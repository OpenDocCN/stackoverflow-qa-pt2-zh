# StackOverflow 问答 12922000-12922999

# web - 如何从 Web 应用程序获取操作系统内部版本号？

> ID：12922000
> 
> 赞同：0
> 
> 时间：2012-10-16T19:21:42.633
> 
> 标签：web, operating-system

如何从浏览器中获取操作系统版本号（Windows、Mac 等）？

如果必须，可以使用 Flash 或 Java 吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:24:40.640

这是一个很好的网站，可以为您提供所有您需要知道的信息， http: [//msdn.microsoft.com/en-us/library/ms537503 (v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms537503(v=VS.85).aspx)

```
javascript:alert(navigator.userAgent) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:27:13.040

作为一个快速的答案，您可以在通过 http 加载页面时从页面的标题中获取所有这些信息。您可以在 PHP（或类似的东西）中轻松地回显标题，他们会说 I AM WINDOWS - RELEASE X - BROWSER-AGENT I.E9 等...我认为 jquery 可以告诉您正在轻松使用的操作系统和浏览器出色地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:30:35.473

不，您无法可靠地获得操作系统内部版本号。[Panopticlick](https://panopticlick.eff.org)之类的网站将向您展示可以获得哪些价值（通过一些努力）。

一个例外是内置的手机浏览器：

*   [从用户代理获取 Android 操作系统版本](https://stackoverflow.com/questions/5293394/get-android-os-version-from-user-agent)
*   [使用 JavaScript 检测低于 5 的 iOS 版本](https://stackoverflow.com/questions/8348139/detect-ios-version-less-than-5-with-javascript)

因为这些版本只有一个版本，您可以可靠地检测到版本号，您可以假设一个版本号。

您可以根据操作系统版本号猜测其他浏览器的内部版本号，但您不能肯定地证明这一点。

# java - 如何解决一个老实说没有意义的 TransientObjectException

> ID：12922003
> 
> 赞同：2
> 
> 时间：2012-10-16T19:21:53.087
> 
> 标签：java, hibernate, exception, tags, transient

我正在使用 Hibernate 4.1，每当我尝试存储已添加到对象集合中的瞬态标记列表时，都会出现以下异常。

```
org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.myapplication.domain.Tag
    at org.hibernate.engine.internal.ForeignKeys.getEntityIdentifierIfNotUnsaved(ForeignKeys.java:249)
    at org.hibernate.type.EntityType.getIdentifier(EntityType.java:459)
    at org.hibernate.type.ManyToOneType.nullSafeSet(ManyToOneType.java:132)
    at org.hibernate.persister.collection.AbstractCollectionPersister.writeElement(AbstractCollectionPersister.java:811) 
```

现在，我需要稍微解释一下。我的 Tag 类有一组同义词。在添加此关系之前，我从未遇到此异常，并且一切正常：

```
<class name="com.myapplication.domain.Tag">
    <id name="id" column="tag_id" type="long">
        <generator class="native"/>
    </id>
    <property name="term" index="termIndex" unique="true" not-null="true" />
    <property name="description" />
    <property name="approved" />

    <many-to-one name="masterTag" column="master_tag_id"
                 class="com.myapplication.domain.Tag" />

    <bag name="synonyms">
        <key column="master_tag_id" />
        <one-to-many class="com.myapplication.domain.Tag" />
    </bag>
</class> 
```

这是对象映射标签的方式。该类`Tags`只是一个组件类。Tags.list 是 Hibernate 持久化的实际集合。

```
 <component name="tags">
        <bag name="list" table="user_to_tag">
            <key column="user_id" />
            <many-to-many class="com.myapplication.domain.Tag" column="tag_id"/>
        </bag>
    </component> 
```

我试图保存在数据库中的标签实际上根本不包含任何同义词，所以我不相信它与瞬态同义词标签有任何关系。我不希望这些级联，这就是为什么我没有在`<bag>`标签上给它一个级联属性。

用户通常会通过字符串列表将标签插入系统。我这样做是因为我想在保存包含标签的对象时即时创建标签或链接到现有标签。也许这比它的价值更麻烦？如果我只让他们链接到存在的标签，那么我知道我可以解决我的问题。也许在 Hibernate 中处理动态标签创建的复杂性比它可以处理的要多一点？

这是我用来一次性保存新/现有标签的方法。每当一个对象被保存到数据库时，它首先调用这个方法来持久化标签集合：

```
public void saveAll(Tags tags) {
    List<Tag> tagsToOverwrite = new ArrayList<Tag>();

    Iterator<Tag> i = tags.getList().iterator();
    while(i.hasNext()) {
        Tag tag = i.next();

        if(stopListService.hasWord(tag.getTerm())) {
            i.remove();
        } else {
            if(tag.isTransient()) {
                Tag dbTag = findByTerm(tag.getTerm());

                if(dbTag == null) {
                    save(tag);
                } else {
                    tagsToOverwrite.add(dbTag);
                }
            }
        }
    }

    tags.overwriteAll(tagsToOverwrite);
} 
```

由于某种原因，它在`Tag dbTag = findByTerm(tag.getTerm());`抛出`TransientObjectException`. 这个方法只是一个简单的查询：

```
public Tag findByTerm(final String term) {
    Query query = getCurrentSession().createQuery(
        "from Tag tag " +
        "where tag.term = :term "
    );

    return (Tag) query
        .setParameter("term", term.toLowerCase())
        .setCacheable(true)
        .uniqueResult(); // This is where the exception gets thrown specifically
} 
```

我不确定为什么这个方法会抛出这个异常，因为我想做的只是在保存之前检查它是否在数据库中。当我所做的只是查询对象时，为什么抱怨对象没有被保存？

如果标签列表仅包含单个标签，则该方法有效。仅当要保存的临时标签数量为 2 个或更多时，它才会失败。例如，这会失败：

```
@Test
public void saveShouldPersistTransientTags() {
    User user = userRepository.find(1);
            // makes list of 3 tags that are transient (id = 0)
    user.getTags().setTagsAsString("training learning business");

    userRepository.save(user);
    flush();

    user = userRepository.find(1);
    assertEquals(3, user.getTags().getList().size());
} 
```

这是 UserRepository.save() 方法：

```
@Override
public void save(User user) {
    tagRepository.saveAll(user.getTags());

    super.save(user);
} 
```

如您所见，我试图在保存用户之前先保存所有临时标签（或在数据库中查找它们）。然而，Hibernate 似乎希望`user.tags.list`在调用期间将集合保留`tagRepository.saveAll(user.getTags());`在抛出异常的位置，即使我从未要求它这样做。

当然，如果我`synonyms`从 Hibernate 映射中删除该集合，该测试将毫无问题地通过。它仅在我启用`synonym`集合时失败，并且仅在到达`learning`标签时才失败（`training`在数据库中找不到标签，并且保存得很好。）

关于同义词集合为什么会导致此问题的任何想法？

如果我不能很快解决这个问题，为了节省时间，我很想只使用 JDBC 来解决这个问题，因为 Hibernate 在这种情况下的复杂性并不是一件好事。我认为考虑到这种行为，这甚至可能是一个错误。这对我来说仍然没有任何意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:40:39.657

当你准备好查询 Hibernate 时可能会查看它的托管对象。那些脏的它会尝试刷新到数据库，因此查询会命中最新的数据存储。在代码中的某处，您正在向集合中添加非托管（可能是新的？）同义词，然后当 Hibernate 尝试通过刷新脏对象来“帮助”您时，您会得到该异常。

# css - Twitter引导下拉截止

> ID：12922005
> 
> 赞同：3
> 
> 时间：2012-10-16T19:21:57.623
> 
> 标签：css, twitter-bootstrap

我创建了一个带有下拉菜单的固定导航栏。但是下拉菜单是截止的，单击时不可见。

[您可以在http://svn.figure8.be/bootstrap/menu.html](http://svn.figure8.be/bootstrap/menu.html)看到一个演示。

我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T20:05:30.670

在 bootstrap.min.css 中有一个名为 overflow 的`.collapse`类中的属性被设置为隐藏。删除此属性，它将起作用。这是溢出属性所在的类

```
.collapse {
position: relative;
height: 0;
overflow: hidden;
-webkit-transition: height .35s ease;
-moz-transition: height .35s ease;
-o-transition: height .35s ease;
transition: height .35s ease;
} 
```

或者您可以将其设置为可见

```
.collapse {
position: relative;
height: 0;
overflow: visible;
-webkit-transition: height .35s ease;
-moz-transition: height .35s ease;
-o-transition: height .35s ease;
transition: height .35s ease;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:09:59.217

删除崩溃类解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:05:42.370

崩溃类导致了这种情况，它添加了溢出：隐藏，它隐藏了任何溢出元素。

# facebook - 在页面上作为页面发布消息的简单示例

> ID：12922011
> 
> 赞同：1
> 
> 时间：2012-10-16T19:22:15.327
> 
> 标签：facebook, api

今天我用 Facebook API 尝试了几乎所有的东西。我正在使用 PHP SDK。它可以作为用户、页面和应用程序登录。

我现在已经做了最简单的登录系统：

登录.php

```
$app_id = "xx";
$app_secret = "xx";
$my_url = "continue.php";
session_start();   
// TOESTEMMING VRAGEN
$code = $_REQUEST["code"];
if(empty($code)) {
    $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
    . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
    . $_SESSION['state'] . "&scope=manage_pages";
    echo("<script> top.location.href='" . $dialog_url . "'</script>");
} 
```

在 continue.php 我有这个代码：

```
session_start();
if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
    $graph_url = "https://graph.facebook.com/me/accounts?access_token=" 
    . $params['access_token'];

    $accounts = json_decode(file_get_contents($graph_url));
    print_r($accounts);
} else {
    echo("The state does not match. You may be a victim of CSRF.");
} 
```

我正在登录，我可以授予访问权限，但是当我继续时，我收到以下消息：

> stdClass Object ( [error] => stdClass Object ( [message] => 必须使用活动访问令牌来查询有关当前用户的信息。[type] => OAuthException [code] => 2500 ) )

我试图实现的是：在我网站的管理部分，我想创建一个对话框，管理员可以在其中将更新作为页面帐户发布到 facebook 页面。我也尝试以应用程序登录，但我不知道这是否是正确的解决方案。

我在网上找不到关于哪种解决方案需要哪种方法的教程。作为应用程序登录的优点是管理员不需要拥有 facebook 帐户。但是我可以（作为应用程序）将更新发布到 Facebook 页面吗？

对不起，我有点困惑。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:13:43.317

在您拥有的页面上发布的基本示例（作为页面发布）：

确保 user/page_owner 已对应用程序进行身份验证并已登录（通常的 FB API 方法）。用户必须拥有`manage_pages`该页面的（管理员）权限。

```
$facebook = new Facebook(... );
$user = $facebook->getUser(); 
```

获取页面访问令牌：

```
$page_id = 123456;
$page_info = $facebook->api('/'.$page_id.'?fields=access_token'); 
```

使用页面访问令牌发布到您的页面：

```
if (!empty($page_info['access_token'])) {
  $args = array(
    'access_token' => $page_info['access_token'],
    'message' => 'Testing SDK !',
  );
  $post_id = $facebook->api('/'.$page_id.'/feed', 'post', $args);
  error_log('successfully posted post id '.$post_id);
} catch (FacebookApiException $e) {
  error_log('caught exception: '. $e);
} 
```

如果您仍然收到访问令牌错误，请记录*用户*访问令牌并在[调试器](https://developers.facebook.com/tools/debug)中测试/粘贴用户访问令牌并验证`manage_pages`权限已启用。

另请参阅[有关页面权限的有用博客文章](https://developers.facebook.com/blog/post/524/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:49:50.227

您的代码不完整。我建议你重新阅读[http://developers.facebook.com/docs/howtos/login/server-side-login/](http://developers.facebook.com/docs/howtos/login/server-side-login/)

在获得页面访问令牌之前，您需要用户访问令牌

```
 if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $_SESSION['access_token'] = $params['access_token'];

     $graph_url = "https://graph.facebook.com/me?access_token=" 
       . $params['access_token'];

     $user = json_decode(file_get_contents($graph_url));
     echo("Hello " . $user->name);
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   } 
```

# jquery - jQuery 对话框在 Firefox 中不起作用

> ID：12922016
> 
> 赞同：0
> 
> 时间：2012-10-16T19:22:35.687
> 
> 标签：jquery, jquery-ui, firefox, modal-dialog

我发现了一些问题，为什么我的 Jquery 对话框在 Firefox 中不起作用。在 Chrome 中它工作正常。

```
 $(".showTasksButton").click(function() {
    return false;
    var lessonId = $(this).attr('href');
    var dialogwindow = $(this).next().clone();

    dialogwindow.dialog({
        draggable : false,
        resizable : false,
        width : 300,
        height : 350,
        zIndex : 10001,
        modal:true,
        open: function(){
            jQuery('.ui-widget-overlay').bind('click',function(){
                dialogwindow.dialog("destroy");
            })
        },          
    })              

}) 
```

你们中有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:37:04.900

您缺少多个行尾，并且您在第一行返回 false，此代码应按预期工作：

```
$(".showTasksButton").click(function() {
    var lessonId = $(this).attr('href');
    var dialogwindow = $(this).next().clone();

    dialogwindow.dialog({
        draggable: false,
        resizable: false,
        width: 300,
        height: 350,
        zIndex: 10001,
        modal: true,
        open: function() {
            jQuery('.ui-widget-overlay').click(function() {
                dialogwindow.dialog("destroy");
            });
        },
    });
    return false;
});​ 
```

# c# - .NET 4.0 中网络共享上的异常保存配置

> ID：12922022
> 
> 赞同：3
> 
> 时间：2012-10-16T19:23:20.847
> 
> 标签：c#, .net, exception, configuration

我正在.NET 4 中创建一个应用程序，它需要在应用程序运行时更新应用程序的配置。执行此操作的代码如下：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.AppSettings.Settings["MySetting"].Value = "my value";
config.Save(); 
```

我的 App.Config 看起来像这样......

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="MySetting" value="my old value"/>
  </appSettings>
</configuration> 
```

当我在本地驱动器上运行此应用程序时（因此，当程序运行时配置文件也将位于本地驱动器上），则此代码有效。但是，如果应用程序在网络共享（实际上是 Z:) 上使用配置文件运行，则代码将失败，并在行上出现以下异常`config.Save();`...

```
System.InvalidOperationException 未处理
  消息=方法失败，出现意外错误代码 1。
  源=mscorlib
  堆栈跟踪：
       在 System.Security.AccessControl.NativeObjectSecurity.CreateInternal（ResourceType resourceType，布尔 isContainer，字符串名称，SafeHandle 句柄，AccessControlSections includeSections，布尔 createByName，ExceptionFromErrorCode exceptionFromErrorCode，对象 exceptionContext）
       在 System.Security.AccessControl.FileSystemSecurity..ctor（布尔 isContainer，字符串名称，AccessControlSections includeSections，布尔 isDirectory）
       在 System.Security.AccessControl.FileSecurity..ctor（字符串文件名，AccessControlSections includeSections）
       在 System.Configuration.Internal.WriteFileContext.DuplicateTemplateAttributes（字符串源，字符串目标）
       在 System.Configuration.Internal.WriteFileContext.DuplicateFileAttributes（字符串源，字符串目标）
       在 System.Configuration.Internal.WriteFileContext.Complete（字符串文件名，布尔成功）
       在 System.Configuration.Internal.InternalConfigHost.StaticWriteCompleted（字符串流名称，布尔成功，对象 writeContext，布尔 assertPermissions）
       在 System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.WriteCompleted（字符串流名称，布尔成功，对象 writeContext，布尔断言权限）
       在 System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.WriteCompleted（字符串流名，布尔成功，对象 writeContext）
       在 System.Configuration.Internal.DelegatingConfigHost.WriteCompleted（字符串流名，布尔成功，对象 writeContext）
       在 System.Configuration.UpdateConfigHost.WriteCompleted（字符串流名称，布尔成功，对象 writeContext）
       在 System.Configuration.MgmtConfigurationRecord.SaveAs（字符串文件名，ConfigurationSaveMode saveMode，布尔 forceUpdateAll）
       在 System.Configuration.Configuration.SaveAsImpl（字符串文件名，ConfigurationSaveMode saveMode，布尔 forceSaveAll）
       在 System.Configuration.Configuration.Save()
       在 Z:\repos\project\MyProj\Program.cs:line 61 中的 MyProj.Program.Main()
       在 System.AppDomain._nExecuteAssembly（RuntimeAssembly 程序集，字符串 [] 参数）
       在 System.AppDomain.nExecuteAssembly（RuntimeAssembly 程序集，字符串 [] 参数）
       在 System.Runtime.Hosting.ManifestRunner.Run（布尔 checkAptModel）
       在 System.Runtime.Hosting.ManifestRunner.ExecuteAsAssembly()
       在 System.Runtime.Hosting.ApplicationActivator.CreateInstance（ActivationContext activationContext，字符串 [] activationCustomData）
       在 System.Runtime.Hosting.ApplicationActivator.CreateInstance（ActivationContext 激活上下文）
       在 System.Activator.CreateInstance（ActivationContext 激活上下文）
       在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssemblyDebugInZone()
       在 System.Threading.ThreadHelper.ThreadStart_Context（对象状态）
       在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔 ignoreSyncCtx）
       在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
       在 System.Threading.ThreadHelper.ThreadStart()
  内部异常：

```

我认为这是.NET 的某种安全问题，但我不确定如何禁用该安全性。

存储配置文件的网络共享实际上是一个 VirtualBox 共享驱动器。主机系统是 linux，共享驱动器映射到 Ext4 文件系统。

我不相信这只是一个文件系统写入问题，因为我可以成功写入与我的 App.config 文件位于同一目录中的文本文件（至少我认为它是同一目录，除非 .NET 在后面做了一些时髦的事情像使用临时目录这样的场景）。

```
File.WriteAllText("Text.txt", "Testing"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:59:43.080

这看起来像一个代码访问安全问题，这里有一个很好的帖子：[http ://www.sellsbrothers.com/Posts/Details/1519](http://www.sellsbrothers.com/Posts/Details/1519)

基本上，当您从网络驱动器运行应用程序时，默认情况下，它被赋予“Intranet”的信任级别，我认为不允许您修改配置文件。

因此，基本上您需要通过执行以下操作来提升该驱动器的信任级别：

```
caspol -q -machine -addgroup 1 -url file://z:/* FullTrust -name "Z Drive" 
```

希望对您有所帮助，我无法访问网络驱动器，因此无法确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T13:18:34.930

我尝试`caspol`使用.Net 4，但没有成功。这可能很愚蠢，但我只设法做到这一点：

*   获取`APP_CONFIG_FILE`并将其存储在局部变量中
*   `APP_CONFIG_FILE`用本地文件系统中的文件替换实际文件
*   根据需要修改设置
*   使用本地驱动器复制并覆盖`APP_CONFIG_FILE`网络驱动器上的
*   设置为`APP_CONFIG_FILE`网络上的原始文件
*   删除本地文件

例如：

```
string APP_CONFIG_FILE = AppDomain.CurrentDomain.GetData("APP_CONFIG_FILE").ToString();
string TEMP_FILE = System.IO.Path.GetTempPath() + Guid.NewGuid();
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", TEMP_FILE);

Configuration config = 
ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.AppSettings.Settings["MySetting"].Value = "my value";
config.Save();

File.Copy(TEMP_FILE, APP_CONFIG_FILE, true);
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", APP_CONFIG_FILE);
File.Delete(TEMP_FILE); 
```

有趣的是，当我在安装了 Visual Studio 的机器上运行程序时，它运行良好（没有`caspol`），无需使用上述步骤。

# php - 获取分配给属性组的所有属性

> ID：12922025
> 
> 赞同：0
> 
> 时间：2012-10-16T19:23:49.687
> 
> 标签：php, magento, attributes

我正在为 magento 开发一个导入模块。我需要找出一个属性是否属于一个属性组。我加载了属性以及属性组。我试过了：

```
$attributeCollection = $attributeGroup->getAttributes(); 
```

理论是我可以查看集合，并确定属性是否已分配给属性组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:44:05.030

您可以从属性中获取组 ID，并在需要时加载组。

```
$product = Mage::getModel('catalog/product')->load(ID_HERE);
foreach($product->getAttributes() as $attribute)
{
    $groupId = $attribute->getAttributeGroupId();
} 
```

如果您想加载组模型：

```
$group = Mage::getModel('eav/entity_attribute_group')->load($groupId); 
```

# hadoop - 在 map reduce 中从 hadoop dfs 引用文件

> ID：12922026
> 
> 赞同：1
> 
> 时间：2012-10-16T19:23:50.080
> 
> 标签：hadoop

对于我的 map reduce 工作，我正在读取输入文件中的行以获取外部文件路径。所以我用作输入的文件如下所示：

```
/user/local/myfiles/temp1.png

/user/local/myfiles/temp2.jpg

/user/local/myfiles/temp3.txt

/user/local/myfiles/temp4.txt

.... 
```

我想对这些文件执行一些操作。我需要从我在 map 函数中读取的字符串路径中获取文件对象。我的问题是：我将这些文件的实际副本放在哪里以便我可以获取它们？我把它们放在hadoop dfs上吗？当我把它们放在本地系统上时，我得到一个文件未找到错误，但是当我把它们放在 hadoop 文件系统上时，我得到了同样的错误（所以输入文件中的每一行都类似于“/user/hadoop/input/ temp1.txt")。我可以获取文件名，但我需要能够从输入文件中列出的路径中获取图像对象或文本文件对象。有没有什么方法可以从我的 map 函数中访问 dfs（或本地系统）上的文件，只要一个字符串路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:32:26.697

您需要将它们添加到 HDFS，以便所有映射器都可以访问它们。以下对我有用（在 0.20 上）：

```
 FileSystem fs = FileSystem.get(context.getConfiguration());
        FSDataInputStream in = null;
        BufferedReader br = null;
        String line = null;

        String file = context.getConfiguration().get(Constants.INFILE); 
        in = fs.open(new Path(file));
        br = new BufferedReader(new InputStreamReader(in));
        while((line=br.readLine())!=null) 
```

我在驱动程序中添加了 Constants.INFILE，以免将文件名硬编码到代码中。

# html - 使用 div 和 CSS 创建表格

> ID：12922027
> 
> 赞同：-2
> 
> 时间：2012-10-16T19:23:53.437
> 
> 标签：html, css, css-tables

我有以下格式的 div 标签：

```
<div>first</div>
<div>1</div>
<div>2</div>
<div>3</div>
<div>4</div>
<div>5</div>
<div>6</div>
<div>last</div> 
```

我想要它在 2X3（col X 行）表中。是否可以？仅使用 CSS 而不添加任何其他 HTML 标签。如果是，那么 CSS 会是什么？

输出格式：
前
1 4
2 5
3 6
最后

我想要上述格式的数据。抱歉，我没有在上面的问题中提到格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:26:55.897

你可以使用这个CSS：

```
.div-table{
  display:table;         
  width:auto;         
  background-color:#eee;         
  border:1px solid  #666666;         
  border-spacing:5px;/*cellspacing:poor IE support for  this*/
}
.div-table-row{
  display:table-row;
  width:auto;
  clear:both;
}
.div-table-col{
  float:left;/*fix for  buggy browsers*/
  display:table-column;         
  width:200px;         
  background-color:#ccc;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:27:23.227

您可以使用 ：

```
 ​div {
        float:left;
        width: 50%;
    }​ 
```

见[http://jsfiddle.net/LUMg2/](http://jsfiddle.net/LUMg2/)

需要一个上下文来确保它在您的场景中真正起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:31:03.933

使用**display:table-row;** 您可能会发现以下链接很有帮助。

[http://snook.ca/archives/html_and_css/getting_your_di](http://snook.ca/archives/html_and_css/getting_your_di)

之前有几个关于这个的讨论。

[如何仅使用 <div> 标签和 Css 创建表](https://stackoverflow.com/questions/3053205/how-create-table-only-using-div-tag-and-css)

最终，如果你想要一张真正的桌子，只需使用`table`标签。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:36:32.817

有一些简单的解决方案：

```
div {widht:50%;flot:left;padding:none;position:relative} 
```

但是，如果您想显示表格数据，请使用`table`, 表格的用途。如果你想布置一些东西，不要使用表格。

也许定义列表会为您完成这项工作：http: [//www.w3schools.com/html/html_lists.asp](http://www.w3schools.com/html/html_lists.asp)

dl, dt, dd

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:49:03.000

```
<head>
<style type="text/css">

#board
{
    margin:100px 100px 100px 400px;
}
#r1,#r2,#r3
{
   display:table-row;
   width:auto;
   text-align:center;
   background-color:White;
}
#r1c1,#r1c2,#r1c3,#r2c1,#r2c2,#r2c3,#r3c1,#r3c2,#r3c3
{
    float:left;
    text-align:center;
    display:table-column;
    width:50px;
    height:50px;
    border:solid 1px;
    padding: 10px 10px 10px 10px;
    font-size:larger;
}
</style>
</head>
<body>
<div id="board">

<div id="r1">
    <div id="r1c1"></div>
    <div id="r1c2"></div>

</div>
<div id="r2">
    <div id="r2c1"></div>
    <div id="r2c2"></div>
</div>
<div id="r3">
    <div id="r3c1"></div>
    <div id="r3c2"></div>
</div>
</div>
</body> 
```

# ruby - /usr/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error)

> ID：12922029
> 
> 赞同：4
> 
> 时间：2012-10-16T19:24:06.617
> 
> 标签：ruby, selenium, capybara

我正在使用 Capybara（Selenium 驱动程序）访问网站上的某些页面。我只需单击数组中的每个项目，然后单击后退按钮。它运行良好，但每次经过一些迭代后它都会中断。这是代码：

```
all(:xpath, '//table[@class="griglia_bordata"]//tr[td]/td/a[1]').each do |a|
  a_js_functions << a[:href]
end
a_js_functions.each do |js_for_model|
  puts js_for_model
  page.execute_script js_for_model
  find(:xpath, "//a[text()='Check availability']").click
  puts find(".testo_grande_blu_B").text
  puts "--------------------------------------------"
  find(:xpath, "//a[text()='Back']").click
end 
```

我有输出：

> javascript:selectModel('130254') 样式：RB2132 --------------------------------------- ----- javascript:selectModel('309257') 样式：RB2140 ---------------------------------- ---------- javascript:selectModel('68238') 样式：RB3016 ----------------------------- --------------- javascript:selectModel('68248') 样式：RB3025 ------------------------ -------------------- javascript:selectModel('68293') 样式：RB3026 -------------------- ------------------------- javascript:selectModel('68320') 样式：RB3044 -------------- ------------------------------ javascript:selectModel('68460') /usr/lib/ruby/1.9.1/net /protocol.rb:146:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error) from /usr/lib/ruby/1.9.1/net/protocol.rb:140:in`rbuf_fill' 来自 /usr/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil' from /usr/lib/ruby/1.9.1/net/protocol.rb:132:in`readline' 来自 /usr/lib/ruby/1.9.1/net/http.rb :2562:在`read_status_line' from /usr/lib/ruby/1.9.1/net/http.rb:2551:in`从 /usr/lib/ruby/1.9.1/net/http.rb:1319:in 中读取新的'从 /usr/lib/ruby/1.9.1/net/http.rb:1316:in 中`block in transport_request' from /usr/lib/ruby/1.9.1/net/http.rb:1316:in`捕获'`transport_request' from /usr/lib/ruby/1.9.1/net/http.rb:1293:in`来自/的请求' usr/lib/ruby/1.9.1/net/http.rb:1286:in `block in request' from /usr/lib/ruby/1.9.1/net/http.rb:745:in`start' from /usr/lib/ruby/1.9.1/net/http.rb:1284:in `request' from /var/lib/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:82:in` response_for' from /var/lib/ gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:38:in `request' from /var/lib/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in` call'来自/var/lib/gems/1.9.1/gems/selenium -webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute' from /var/lib/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in` execute' 来自 /var/lib/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/ webdriver/remote/bridge.rb:554:in `find_elements_by' from /var/lib/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/search_context.rb:62:in` find_elements' from /var/lib/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/selenium/driver.rb:52:in `find' from /var/lib/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/finders.rb:158:in` find_in_base' 来自 /var/lib/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/finders.rb:137:in `block in first' from /var/lib/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/finders.rb:136:in` each' 来自 /var/lib/gems/1.9.1/gems /capybara-1.1.2/lib/capybara/node/finders.rb:136:in `first' from /var/lib/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/finders.rb:27:in` block in find' from /var/lib/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/ base.rb:46:in `wait_until' from /var/lib/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/finders.rb:27:in` find' from (eval):2:in `find' from /var/lib/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/dsl.rb:161:in` find' from /home/biske/workspace/ScrapingGlasses/lib/luxottica.rb:39:in `block in scrape' from /home/biske/workspace/ScrapingGlasses/lib/luxottica.rb:36:in`each' from /home/biske/workspace/ScrapingGlasses/ lib/luxottica.rb:36:in `scrape' from /home/biske/workspace/ScrapingGlasses/lib/luxottica.rb:12:in`go' 来自 /home/biske/workspace/ScrapingGlasses/lib/luxottica.rb:48:in `'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T00:52:48.920

我之前看到过类似的痕迹，并且有两个潜在原因：

1) 像 FakeWeb 和 WebMock 这样的 gem 修改了 ruby​​ 的 http。尝试删除那些你可能用来模拟/阻止网络请求的宝石和任何类似的宝石。

2) 我在一个真正负载过重的系统中看到过这种超时会随机发生的情况。真正的问题不是测试，而是系统以及在其上运行的内容。可以更改 http 库使用的超时并继续测试。

为 Capybara 更新：（来自[http://selenium.googlecode.com/svn/wiki/RubyBindings.wiki](http://selenium.googlecode.com/svn/wiki/RubyBindings.wiki)）

```
Capybara.register_driver :selenium_extended_http_timeout do |app|
    client = Selenium::WebDriver::Remote::Http::Default.new
    client.timeout = 240
    Capybara::Selenium::Driver.new(app, 
                               :browser => :firefox, 
                               :http_client => client, 
                               :resynchronization_timeout => 60,
                               :resynchronize => true)                                                                   
end
Capybara.javascript_driver = :selenium_extended_http_timeout 
```

您很有可能不需要重新同步的东西。

在这两种情况下，这都与 selenium 如何进行一些内部通信有关。JsonWire 协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:00:50.620

我在使用 Fakeweb 和 VCR 时遇到了这个问题，但是在升级到 selenium-webdriver (2.27.0) 之后，超时就消失了

# c++ - 递归矩阵乘法

> ID：12922031
> 
> 赞同：2
> 
> 时间：2012-10-16T19:24:13.857
> 
> 标签：c++, algorithm, matrix, matrix-multiplication, clrs

我正在阅读 CLRS 的算法简介。本书展示了简单的分治矩阵乘法的伪代码：

```
n = A.rows
let c be a new n x n matrix
if n == 1
    c11 = a11 * b11
else partition A, B, and C
    C11 = SquareMatrixMultiplyRecursive(A11, B11)
        + SquareMatrixMultiplyRecursive(A12, B21)
    //...
return C 
```

例如，A11 是大小为 n/2 xn/2 的 A 的子矩阵。作者还暗示我应该使用索引计算而不是创建新矩阵来表示子矩阵，所以我这样做了：

```
#include <iostream>
#include <vector>

template<class T>
struct Matrix
{
    Matrix(size_t r, size_t c)
    {
        Data.resize(c, std::vector<T>(r, 0));
    }    

    void SetSubMatrix(const int r, const int c, const int n, const Matrix<T>& A, const Matrix<T>& B)
    {
        for(int _c=c; _c<n; ++_c)
        {
            for(int _r=r; _r<n; ++_r)
            {
                Data[_c][_r] = A.Data[_c][_r] + B.Data[_c][_r];
            }
        }
    }

    static Matrix<T> SquareMultiplyRecursive(Matrix<T>& A, Matrix<T>& B, int ar, int ac, int br, int bc, int n)
    {
        Matrix<T> C(n, n);

        if(n == 1)
        {
            C.Data[0][0] = A.Data[ac][ar] * B.Data[bc][br];
        }
        else
        {
            C.SetSubMatrix(0, 0, n / 2,
                           SquareMultiplyRecursive(A, B, ar, ac, br, bc, n / 2),
                           SquareMultiplyRecursive(A, B, ar, ac + (n / 2), br + (n / 2), bc, n / 2));

            C.SetSubMatrix(0, n / 2, n / 2,
                           SquareMultiplyRecursive(A, B, ar, ac, br, bc + (n / 2), n / 2),
                           SquareMultiplyRecursive(A, B, ar, ac + (n / 2), br + (n / 2), bc + (n / 2), n / 2));

            C.SetSubMatrix(n / 2, 0, n / 2,
                           SquareMultiplyRecursive(A, B, ar + (n / 2), ac, br, bc, n / 2),
                           SquareMultiplyRecursive(A, B, ar + (n / 2), ac + (n / 2), br + (n / 2), bc, n / 2));

            C.SetSubMatrix(n / 2, n / 2, n / 2,
                           SquareMultiplyRecursive(A, B, ar + (n / 2), ac, br, bc + (n / 2), n / 2),
                           SquareMultiplyRecursive(A, B, ar + (n / 2), ac + (n / 2), br + (n / 2), bc + (n / 2), n / 2));
        }

        return C;
    }

    void Print()
    {
        for(int c=0; c<Data.size(); ++c)
        {
            for(int r=0; r<Data[0].size(); ++r)
            {
                std::cout << Data[c][r] << " ";
            }
            std::cout << "\n";
        }
        std::cout << "\n";
    }

    std::vector<std::vector<T> > Data;
};

int main()
{
    Matrix<int> A(2, 2);
    Matrix<int> B(2, 2);
    A.Data[0][0] = 2;
    A.Data[0][1] = 1;
    A.Data[1][0] = 1;
    A.Data[1][1] = 2;

    B.Data[0][0] = 2;
    B.Data[0][1] = 1;
    B.Data[1][0] = 1;
    B.Data[1][1] = 2;

    A.Print();
    B.Print();

    Matrix<int> C(Matrix<int>::SquareMultiplyRecursive(A, B, 0, 0, 0, 0, 2));

    C.Print();
} 
```

它给了我不正确的结果，但我不确定我做错了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:11:26.860

```
// Recursive naive matrix multiplication in C, not strassen.
// 2013-Feb-15 Fri 12:28 moshahmed/at/gmail

#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define M 2
#define N (1<<M)

typedef int mat[N][N]; // mat[2**M,2**M]  for divide and conquer mult.
typedef struct { int ra, rb, ca, cb; } corners; // for tracking rows and columns.

// set A[a] = k
void set(mat A, corners a, int k){
  int i,j;
  for(i=a.ra;i<a.rb;i++)
    for(j=a.ca;j<a.cb;j++)
      A[i][j] = k;
}

// set A[a] = [random(l..h)].
void randk(mat A, corners a, int l, int h){
  int i,j;
  for(i=a.ra;i<a.rb;i++)
    for(j=a.ca;j<a.cb;j++)
      A[i][j] = l + rand()% (h-l);
}

// Print A[a]
void print(mat A, corners a, char *name) {
  int i,j;
  printf("%s = {\n",name);
  for(i=a.ra;i<a.rb;i++){
    for(j=a.ca;j<a.cb;j++)
      printf("%4d, ", A[i][j]);
    printf("\n");
  }
  printf("}\n");
}

// Return 1/4 of the matrix: top/bottom , left/right.
void find_corners(corners a, int i, int j, corners *b) {
  int rm = a.ra + (a.rb - a.ra)/2 ;
  int cm = a.ca + (a.cb - a.ca)/2 ;
  *b = a;
  if (i==0)  b->rb = rm;     // top rows
  else       b->ra = rm;     // bot rows
  if (j==0)  b->cb = cm;     // left cols
  else       b->ca = cm;     // right cols
}

// Naive Multiply: A[a] * B[b] => C[c], recursively.
void mul(mat A, mat B, mat C, corners a, corners b, corners c) {
  corners aii[2][2], bii[2][2], cii[2][2];
  int i, j, m, n, p;

  // Check: A[m n] * B[n p] = C[m p]
  m = a.rb - a.ra; assert(m==(c.rb-c.ra));
  n = a.cb - a.ca; assert(n==(b.rb-b.ra));
  p = b.cb - b.ca; assert(p==(c.cb-c.ca));
  assert(m>0);

  if (n==1) {
    C[c.ra][c.ca] += A[a.ra][a.ca] * B[b.ra][b.ca];
    return;
  }

  // Create the smaller matrices:
  for(i=0;i<2;i++) {
  for(j=0;j<2;j++) {
        find_corners(a, i, j, &aii[i][j]);
        find_corners(b, i, j, &bii[i][j]);
        find_corners(c, i, j, &cii[i][j]);
      }
  }

  // Now do the 8 sub matrix multiplications.
  // C00 = A00*B00 + A01*B10
  // C01 = A00*B01 + A01*B11
  // C10 = A10*B00 + A11*B10
  // C11 = A10*B01 + A11*B11

  mul( A, B, C, aii[0][0], bii[0][0], cii[0][0] );
  mul( A, B, C, aii[0][1], bii[1][0], cii[0][0] );

  mul( A, B, C, aii[0][0], bii[0][1], cii[0][1] );
  mul( A, B, C, aii[0][1], bii[1][1], cii[0][1] );

  mul( A, B, C, aii[1][0], bii[0][0], cii[1][0] );
  mul( A, B, C, aii[1][1], bii[1][0], cii[1][0] );

  mul( A, B, C, aii[1][0], bii[0][1], cii[1][1] );
  mul( A, B, C, aii[1][1], bii[1][1], cii[1][1] );

}

int main() {
  mat A, B, C;
  corners ai = {0,N,0,N};
  corners bi = {0,N,0,N};
  corners ci = {0,N,0,N};
  //set(A,ai,2);
  //set(B,bi,2);
  srand(time(0));
  randk(A,ai, 0, 2);
  randk(B,bi, 0, 2);
  set(C,ci,0); // set to zero before mult.
  print(A, ai, "A");
  print(B, bi, "B");
  mul(A,B,C, ai, bi, ci);
  print(C, ci, "C");
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:28:08.520

我找到了解决方案... SetSubMatrix 完全不正确：

```
void SetSubMatrix(const int r, const int c, const int rn, const int cn, const Matrix<T>& A, const Matrix<T>& B)
{
    for(int _c=c; _c<cn; ++_c)
    {
        for(int _r=r; _r<rn; ++_r)
        {
            Data[_c][_r] = A.Data[_c-c][_r-r] + B.Data[_c-c][_r-r];
        }
    }
}

static Matrix<T> SquareMultiplyRecursive(Matrix<T>& A, Matrix<T>& B, int ar, int ac, int br, int bc, int n)
{
    Matrix<T> C(n, n);

    if(n == 1)
    {
        C.Data[0][0] = A.Data[ac][ar] * B.Data[bc][br];
    }
    else
    {
        C.SetSubMatrix(0, 0, n / 2, n / 2,
                       SquareMultiplyRecursive(A, B, ar, ac, br, bc, n / 2),
                       SquareMultiplyRecursive(A, B, ar, ac + (n / 2), br + (n / 2), bc, n / 2));

        C.SetSubMatrix(0, n / 2, n / 2, n,
                       SquareMultiplyRecursive(A, B, ar, ac, br, bc + (n / 2), n / 2),
                       SquareMultiplyRecursive(A, B, ar, ac + (n / 2), br + (n / 2), bc + (n / 2), n / 2));

        C.SetSubMatrix(n / 2, 0, n, n / 2,
                       SquareMultiplyRecursive(A, B, ar + (n / 2), ac, br, bc, n / 2),
                       SquareMultiplyRecursive(A, B, ar + (n / 2), ac + (n / 2), br + (n / 2), bc, n / 2));

        C.SetSubMatrix(n / 2, n / 2, n, n,
                       SquareMultiplyRecursive(A, B, ar + (n / 2), ac, br, bc + (n / 2), n / 2),
                       SquareMultiplyRecursive(A, B, ar + (n / 2), ac + (n / 2), br + (n / 2), bc + (n / 2), n / 2));
    }

    return C;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T05:19:00.980

这是我的答案，取决于递归矩阵乘法。仅适用于 N = 2 ^ M，其中 M >= 2

```
template <std::size_t size>
int matrix_mul_recursive(int N, int i, int j, const int (&A)[size][size], const int (&B)[size][size], int (&C)[size][size]) {
    if (N == 1) {
        return *(const_cast<int*>(&(A[0][0])) + i) * (*(const_cast<int*>(&(B[0][0])) + j));
    }
    else {
        const int H = N / 2;
        const int T = (size * H);

        int r = i / size;
        int c = 0;
        if (j < size) {
            c = j;
        }
        else {
            c = j % size;
        }

        C[r][c] += matrix_mul_recursive<size>(H, i, j, A, B, C) + 
            matrix_mul_recursive<size>(H, i + H, T + j, A, B, C);
        C[r][c + H] += matrix_mul_recursive<size>(H, i, j + H, A, B, C) +
            matrix_mul_recursive<size>(H, i + H, T + j + H, A, B, C);
        C[r + H][c] += matrix_mul_recursive<size>(H, T + i, j, A, B, C) +
            matrix_mul_recursive<size>(H, T + i + H, T + j, A, B, C);
        C[r + H][c + H] += matrix_mul_recursive<size>(H, T + i, j + H, A, B, C) +
            matrix_mul_recursive<size>(H, T + i + H, T + j + H, A, B, C);
    }
    return 0;
} 
```

# networking - RPC 服务器不可用。（来自 HRESULT 的异常：0x800706BA）

> ID：12922033
> 
> 赞同：11
> 
> 时间：2012-10-16T19:24:21.150
> 
> 标签：networking, powershell

在远程计算机上工作时偶尔会出现此错误。我在哪台电脑上安装它是命中或错过。但是我能够ping通计算机并进行测试连接。例如，我今天收到此错误的计算机昨天可以访问。我知道电脑是开着的，因为它就在我旁边。

```
Get-WmiObject : The RPC server is unavailable. (Exception from HRESULT: 0x800706BA)
At line:1 char:14
+ get-wmiObject <<<<  -Class win32_operatingsystem -ComputerName $current -Authentication 6 -credential $credential | Invoke-WMIMethod -name Win32Shutdown
    + CategoryInfo          : InvalidOperation: (:) [Get-WmiObject], COMException
    + FullyQualifiedErrorId : GetWMICOMException,Microsoft.PowerShell.Commands.GetWmiObjectCommand 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T21:46:26.417

检查`Remote Procedure Call (RPC)`服务是否正在运行。如果是，那么这是您的工作站和服务器之间的防火墙问题。您可以通过暂时禁用防火墙并重试该命令来对其进行测试。

评论后编辑：

好的，这是防火墙问题。您必须限制 WMI/RPC 工作的端口，或者在 McAfee 防火墙中打开大量端口。

以下是一些解释这一点的网站：

1.  [用于限制端口的 Microsoft KB](http://support.microsoft.com/kb/154596)
2.  [迈克菲网站谈论同样的事情](https://community.mcafee.com/thread/44646)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T04:55:51.953

您可能会在这里得到答案：[Get-WmiObject：RPC 服务器不可用。（来自 HRESULT 的异常：0x800706BA）](https://stackoverflow.com/questions/11330874/get-wmiobject-the-rpc-server-is-unavailable-exception-from-hresult-0x800706?rq=1)

**更新**

这可能是由于各种问题。我不能说你的情况是哪一个。可能是因为：

*   主机 pc 或目标 pc 或两者都未启用 DCOM
*   您的防火墙甚至您的防病毒软件正在阻止访问
*   任何 WMI 相关服务都被禁用

一些与 WMI 相关的服务是：

*   远程访问自动连接管理器
*   远程访问连接管理器
*   远程过程调用 (RPC)
*   远程过程调用 (RPC) 定位器
*   远程注册表

对于 DCOM 设置，请参阅注册表项`HKLM\Software\Microsoft\OLE`、值`EnableDCOM`。该**值应设置为 'Y'**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-08T17:02:36.810

我的问题原来是我用来提供 WMI Powershell 脚本的 txt 文件中的空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-12T15:09:36.487

在尝试运行仅查看远程服务器以读取硬盘大小的 PowerShell 脚本时，我遇到了同样的问题。

我关闭了远程服务器上的防火墙（域网络、专用网络和访客或公共网络）并且脚本正常工作。

然后我重新打开了域网络的防火墙，它工作了。

然后我重新打开了专用网络的防火墙，它也可以工作。

然后我打开了访客或公共网络的防火墙，它也起作用了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-16T03:02:50.217

在创建集群时，我的错误是：

```
An error occurred while creating the cluster.
Could not determine Management Point Network Type.

The RPC server is unavailable 
```

解决方案：

```
Server Manager
Local Server
Click on one of the network adapter links, like "Ethernet".
Control Panel\Network and Internet\Network Connections
Right click on the first network adapter
Internet Protocol Version 4 (TCP/IPv4)
Properties
Advanced
DNS
Click radio button:
Append primary and connection specific DNS suffixes 
```

# wpf - 从 RadGridView WPF 中删除行/项目

> ID：12922034
> 
> 赞同：1
> 
> 时间：2012-10-16T19:24:27.707
> 
> 标签：wpf, telerik, row, telerik-grid, radgridview

我有一个类似于 next 的代码来从 SQL 查询中加载数据.....

```
Dim myDataset as new dataset = myMethod(params)  'This is a methos that fills a common dataset.

With Me.myRadDataGrid
      .AutoGenerateColumns = True
      .ItemsSource = myDataset.Tables(0).Rows
End With 
```

到目前为止一切都很好....但是当我尝试删除一行时，对象项并没有什么；该行没有显示任何异常，但没有发生任何事情......

```
Me.myRadDataGrid.Items.RemoveAt(myIndex)  'Nohitng happend
Me.myRadDataGrid.Items.Remove(Me.myRadDataGrid.SelectItem) 'Nothig happend
Me.myRadDataGrid.Items.Refresh()
Me.myRadDataGrid.Rebind() 
```

最后，RadGridView 中的数据集集合具有相同的元素....不要删除任何行。

谢谢大家....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:58:59.197

您需要从 中删除该项目`ItemsSource`，而不是从`Items`集合中。

因此，从 中删除该项目`myDataset.Tables(0).Rows`，您可能需要手动刷新网格，因为我相当确定 a`DataTable`不会像 an`ObservableCollection`那样在删除项目时自动引发更改通知。

# c# - JSON 解析错误 (Windows 8)

> ID：12922040
> 
> 赞同：0
> 
> 时间：2012-10-16T19:24:43.930
> 
> 标签：c#, json, xaml, windows-8

> **可能重复：**
> [JsonArray.Parse(...) 错误](https://stackoverflow.com/questions/10951466/jsonarray-parse-error)

我正在为 Windows 8 开发一个漫画信息应用程序（在 C#、XAML 中）。我正在从公共 Web API ( [http://www.mangaeden.com/api/list/0/](http://www.mangaeden.com/api/list/0/) ) 接收信息，我将在我的应用程序中相应地使用这些信息。我可以有效地接收 JSON 字符串，但我无法正确解析它，我不知道它到底有什么问题。出现的错误是“无效的 JSON 字符串”，但是当我检查[http://jsonlint.com/](http://jsonlint.com/)时，它是经过验证的 JSON 字符串。

每次我运行代码时，都会出现以下错误：

位置 0 处的字符无效

这是我的代码：

```
//Receive JSON String from MangaEden Website
var client = new HttpClient();
client.MaxResponseContentBufferSize = Int32.MaxValue;
var response = await client.GetAsync(new Uri("http://www.mangaeden.com/api/list/0/"));
var result = await response.Content.ReadAsStringAsync();

//
// Parse the JSON data
//
var manga = JsonArray.Parse(result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:39:57.850

你的 json 不是一个数组，它是一个包含数组的对象，试试这个：

```
var client = new HttpClient();
var response = await client.GetStringAsync(new Uri("http://www.mangaeden.com/api/list/0/"));

var obj = JObject.Parse(response);
var manga = obj["manga"] as JArray; 
```

# box2d - 在 Corona SDK 中以可变速度沿贝塞尔曲线移动物体

> ID：12922048
> 
> 赞同：1
> 
> 时间：2012-10-16T19:25:26.757
> 
> 标签：box2d, coronasdk, bezier

我正在使用 Corona SDK 开发一个像纸折腾这样的游戏，但在我的游戏中，有一个功率因数决定了物体的速度。现在我想沿着第一次触摸对象、对象角度、风速和功率创建的贝塞尔曲线移动我的对象。一切正常，但我无法以变速移动物体。请让我知道我应该如何移动物体，速度因功率而异。或者它可以通过仅使用物理学来完成。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T13:48:39.253

尝试这个。

[http://developer.coronalabs.com/forum/2010/12/12/bezier-curves-corona-source-code](http://developer.coronalabs.com/forum/2010/12/12/bezier-curves-corona-source-code)

这是随着贝塞尔曲线移动的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:00:27.563

是的，你可以使用物理学——但对于 Corona 中的贝塞尔曲线，你无法击败这篇文章/代码；[http://developer.coronalabs.com/forum/2010/12/12/bezier-curves-corona-source-code](http://developer.coronalabs.com/forum/2010/12/12/bezier-curves-corona-source-code)

# php - PHP 正则表达式从模式中删除不需要的值

> ID：12922054
> 
> 赞同：1
> 
> 时间：2012-10-16T19:26:00.173
> 
> 标签：php, regex, preg-replace, preg-match

我有大量类似于以下内容的抓取名称和价格：

```
Array([0] => apple3 [1] => £0.40 [2] => banana6 [3] => £1.80 [4] => lemon [5] => grape [6] => pear5 [7] => melon4 [8] => £2.32 [9] => kiwi [10] => £0.50) 
```

我想删除没有紧跟价格的水果名称。在上面的示例中，这将删除：`[4] => lemon [5] => grape [6] => pear5`导致以下输出：

```
Array([0] => apple3 [1] => £0.40 [2] => banana6 [3] => £1.80 [7] => melon4 [8] => £2.32 [9] => kiwi [10] => £0.50) 
```

如果需要将数组转换为字符串以便我执行此操作，这不是问题，也不是在数组项之间添加值以帮助进行正则表达式搜索。到目前为止，我一直无法使用 preg_match 和 preg_replace 找到正确的正则表达式来执行此操作。

最重要的因素是需要保持水果和价格的顺序，以便我在稍后阶段将其转换为水果和价格的关联数组。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:33:21.197

为什么涉及正则表达式？这可以通过一个简单的循环来实现，在该`foreach`循环中迭代数组并删除名称后面的名称：

```
$lastWasPrice = true; // was the last item a price?
foreach ($array as $k => $v) {
    if (ctype_alpha($v)) {
        // it's a name
        if (!$lastWasPrice) {
            unset($array[$k]); // name follows name; remove the second
        }
        $lastWasPrice = false;
    }
    else {
        // it's a price
        $lastWasPrice = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:13:17.603

下面的代码同时完成了你的两个任务：去掉没有价值的水果，并将结果转换为水果与价格的关联数组。

```
$arr = array('apple', '£0.40', 'banana', '£1.80', 'lemon', 'grape', 'pear', 'melon', '£2.32', 'kiwi', '£0.50' );

preg_match_all( '/#?([^£][^#]+)#(£\d+\.\d{2})#?/', implode( '#', $arr ), $pairs );
$final = array_combine( $pairs[1], $pairs[2] );

print_r( $final ); 
```

首先，将数组转换为字符串，用“#”分隔。正则表达式捕获所有带有价格的水果组 - 每个都作为单独的子组存储在结果中。将它们组合成一个关联数组是一个函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:33:40.500

只需这样做：

```
 <?php
for($i=0;$i<count($my_array);$i++)
{
if($my_array[$i+1]value=="")
unset($my_array[$i])
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:35:59.223

这样的事情可能会帮助你

```
$array = ...;
$index = 0;

while (isset($array[$index + 1])) {
  if (!is_fruit($array[$index + 1])) {
    // Not followed by a fruit, continue to next pair
    $index += 2;
  } else {
    unset($array[$index]);  // Will maintain indices in array
    $index += 1;
  }
} 
```

虽然没有测试。此外，您需要自己创建函数`is_fruit`；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:37:36.487

如果不重新格式化它，我认为你不能用`preg_match`或者`preg_replace`- 也许，但什么都没有想到。

什么是创建该数组？如果可能的话，我会把它改成更像：

```
Array([apple] => £0.40 [banana] => £1.80 [lemon] => [grape] => '' [pear ] => '' [melon  => £2.32 [kiwi] => £0.50) 
```

然后`array_filter($array)`就是你需要清理它的所有内容。如果你不能改变原始数组的创建方式，我倾向于从原始数组中创建键/值数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T19:39:41.373

尝试将模式 ** => ([a-zA-Z])** 替换为 ** => £0.00 $1**

基本上是在寻找零价格并插入零磅的上下文。

希望这可以帮助。

祝你好运

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T20:30:07.457

假设`$a`是你的数组。

```
function isPrice($str) {
    return (substr($str, 0, 1) == '£');
}
$newA = array();
for($i=0;$i<count($a);$i++) {
    if( isPrice($a[$i]) != isPrice($a[$i+1]) ){
        $newA[] = $a[$i];
    }
} 
```

# java - netty 应用程序中的 Java SSL 速度慢

> ID：12922055
> 
> 赞同：6
> 
> 时间：2012-10-16T19:26:10.203
> 
> 标签：java, ssl, netty

`SslHandler`使用 netty与外部 SSL 终结器（如 stud 或 stunnel ）相比，我的性能显着下降。完成握手的时间差约为 100 毫秒。我通过 httperf 向我的应用程序请求了数百次相同的资源，并确保在每种情况下都使用相同的密码 (DHE-RSA-AES128-SHA)。

这个[问题](https://stackoverflow.com/questions/10896502/how-can-i-increase-server-ssl-performance)没有得到公认的答案，但评论表明在 Java 进程前运行 SSL 终结器可能是一个好主意。

这是预期的行为吗？是否已知 Java 的 SSL 实现要慢得多，还是我的某些设置配置不正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-17T19:39:28.620

Netty 人推荐 openssl 而不是 JDK SSL 有几个原因，性能就是其中之一。可以在他们的wiki上找到解释：

[http://netty.io/wiki/requirements-for-4.x.html#benefits-of-using-openssl](http://netty.io/wiki/requirements-for-4.x.html#benefits-of-using-openssl)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T20:35:55.173

是的，与 openssl 相比，它的速度很慢，.. 您可以尝试使用原生 openssl 绑定，例如 twitter：

[https://github.com/twitter/finagle/tree/master/finagle-native](https://github.com/twitter/finagle/tree/master/finagle-native)

这是 apr 和 SSL 的原因之一：

[http://tomcat.apache.org/tomcat-6.0-doc/apr.html#HTTPS](http://tomcat.apache.org/tomcat-6.0-doc/apr.html#HTTPS)

# coding-style - 坚持“编码风格”、“命名约定”和“记录代码”

> ID：12922057
> 
> 赞同：1
> 
> 时间：2012-10-16T19:26:12.703
> 
> 标签：coding-style, documentation, naming-conventions, project-management

我真的不知道这个问题适合stackoverflow，如果不适合，我很抱歉。如果你让我知道我应该在哪里问这样的问题，我将非常感激。

在一家小公司担任开发主管，这总是让我烦恼：

**我应该在多大程度上坚持“编码风格”、“命名约定”和“记录代码”？**

据了解（和学习），程序员真的很讨厌被提醒这些事情，特别是记录。但是，另一方面，这些在很多方面都非常重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:34:55.997

> 我应该多少钱...

**很多。**

不是*太多，*但足够了。编码风格和命名约定是程序员编写代码质量的重要组成部分。如果我要雇用程序员，并且有两个候选人编写了以下代码片段：

一：

```
int main(int argc,char*argv[]){
int a=atoi(argv[1]);
int b=atoi(argv[2]);
printf("%d+%d=%d\n",a,b,a+b);
return(0);
} 
```

二：

```
int main(int argc, char *argv[])
{
    int a = atoi(argv[1]);
    int b = atoi(argv[2]);
    printf("%d + %d = %d\n", a, b, a+b);
    return 0;
} 
```

我肯定会选择第二个。

文档？这也很重要。代码应该被正确记录——我的意思是，文档必须干净、简洁、用良好的英语编写（“diz funktion iz calculate teh sum of two params”是不可接受的！）但它也不应该太长——好的代码是可读的并且不言自明。

# c# - Mono 中的 NameResolutionFailure 但不是 .NET

> ID：12922062
> 
> 赞同：6
> 
> 时间：2012-10-16T19:26:22.563
> 
> 标签：c#, .net, mono

我正在使用 C# 发出 HTTPS POST 请求（与 HTTP 相同的问题）

```
byte[] byteArray = Encoding.UTF8.GetBytes("var1=blah&var2=hah");
HttpWebRequest request = (HttpWebRequest)(WebRequest.Create("https://www.example.com"));
request.Credentials = CredentialCache.DefaultCredentials;
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = byteArray.Length;
request.Method = "POST";
Stream dataStream = request.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();
WebResponse response = request.GetResponse(); 
```

当我不必通过代理时，前面的代码在 .NET 和 Mono 中都非常有效。当我必须使用代理时，它在 .NET 上运行时可以工作，但在 Mono 中失败并出现以下问题

```
WebException: Error: NameResolutionFailure
    at System.Net.HttpWebRequest.EndGetRequestStream (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0
    at System.Net.HttpWebRequest.GetRequestStream () [0x00000] in <filename unknown>:0 
```

此外，在具有相同代理配置的浏览器中运行也可以正常工作。为什么 Mono 会抛出 NameResolutionFailure 而 .NET 不会？

有一个类似的stackoverflow问题，在创建请求时使用直接IP，然后将域添加到request.Host。但是，我必须通过的代理拒绝这种请求。帮助！

操作系统是 Windows 7，Mono 版本是 2.6.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-21T20:27:18.930

**提示**：首先检查您手机中的网络浏览。如果它会是同样的情况 - 那么你必须担心。我有同样的情况，当模拟器没有权限上网时，它一直发生。在普通设备上尝试。

# ruby-on-rails - 在 Rails 代码流上调试 ruby 的技巧

> ID：12922064
> 
> 赞同：0
> 
> 时间：2012-10-16T19:26:38.367
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我很难调试“Ruby on Rails”上的代码流。请给我一些提示。我是“Ruby on rails”的新手。就像我们在 php 中使用的一样`var_dump,print_r and die`，只是为了检查数据到达的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:53:50.267

Ruby 中的类似技巧：

将某些内容输出到服务器日志（`log/development.log`默认情况下）。每当我开发时，我通常会保留一个终端窗口来查看日志。( `tail -f /log/development.log`)

您可以使用`puts`或`logger.info`将内容打印到日志中，但我个人喜欢[这个 gem， lll](https://github.com/mwilden/lll)，它可以很好地记录您传递的任何内容的突出显示版本。

要停止执行，您可以使用`abort`或`raise`。例如：

```
raise "something terrible happened." 
```

当您在开发模式下执行此操作时，与任何其他异常一样，Rails 会呈现一个页面，上面有一堆方便的东西——异常、堆栈跟踪以及参数、会话和环境变量的当前状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T09:11:32.417

有点晚了，但供您参考 print_r 使用以下内容：

中止 Object.methods.inspect

Abort 就等于死了。“方法”方法将列出与对象关联的所有方法。如果您有一个数组并希望输出该数组，只需执行以下操作：

中止 Array.inspect

# javascript - Facebook 什么是频道文件？

> ID：12922067
> 
> 赞同：11
> 
> 时间：2012-10-16T19:26:44.993
> 
> 标签：javascript, facebook, oauth, initialization

正如标题所述，我的问题是什么是频道文件。

我正在创建一个使用 OAuth 连接到用户 Facebook 帐户的 Javascript 程序。

有一个看起来像这样的初始化脚本

```
<div id="fb-root"></div>
<script>
// Additional JS functions here
window.fbAsyncInit = function() {
FB.init({
  appId      : 'YOUR_APP_ID', // App ID
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

// Additional init code here

};

// Load the SDK Asynchronously
(function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   ref.parentNode.insertBefore(js, ref);
 }(document));
</script> 
```

那么在 channelUrl 中我会将其设置为什么？这是什么意思？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:32:46.900

您可以在下面找到有关频道 URL 参数的说明。

[https://developers.facebook.com/blog/post/530/](https://developers.facebook.com/blog/post/530/)

它详细说明了为什么要包含该参数，但下面确实是最重要的部分。

> 异步加载是另一种简单的策略，它允许您的页面快速加载，而不会阻止页面其他元素的加载。

# wpf - WPF 按钮，内容到达两侧

> ID：12922072
> 
> 赞同：0
> 
> 时间：2012-10-16T19:27:02.230
> 
> 标签：wpf, data-binding

所以我在网格列的窗口上有一个按钮。该按钮如下图所示：

```
<Button>
    <Border BorderThickness="3" BorderBrush="Red">
        <Grid Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Button, AncestorLevel=1}, Path=Width}">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
                <TextBlock Grid.Row="0" Background="LightBlue">bunnies</TextBlock>
            <TextBlock Grid.Row="1" Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Button, AncestorLevel=1}, Path=Width}" Background="LightBlue">bunnies</TextBlock>
        </Grid>
    </Border>
</Button> 
```

我看到的是下面最左边按钮中的示例，我希望它看起来像下面的 2。

编辑：如果您将 Width="1000" 添加到第一个 TextBlock，您将看到我想要的效果，除了文本不再是列的中心，而是 1000 宽的块的中心。所以我所追求的是实际列宽或实际按钮宽度的绑定语法。

我留下了一些我尝试过的东西，改变了单列定义的宽度，绑定的东西，等等。

![左 = 1 右 = 2](../Images/4d889c7b383a54c359c4e80054fa02f3.png)

忽略对文本的狡猾编辑，我只希望边框到达按钮的边缘。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:35:31.783

试试这个：

```
<Button HorizontalContentAlignment="Stretch">
            <Border BorderThickness="3" BorderBrush="Red">
                <Grid HorizontalAlignment="Stretch">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0" TextAlignment="Center" Background="LightBlue">bunnies</TextBlock>
                    <TextBlock Grid.Row="1" TextAlignment="Center" Background="LightBlue">bunnies</TextBlock>
                </Grid>
            </Border>
        </Button> 
```

# centos - 如何在 CentOS 上安装 libmemcache

> ID：12922081
> 
> 赞同：1
> 
> 时间：2012-10-16T19:27:37.020
> 
> 标签：centos, package-managers, libmemcached

我需要将**libmemcache**安装到 CentOS 机器上。我没有root权限，所以最好所有东西都放在我的主目录中。

我尝试下载**libmemcached-1.0.12.tar.gz**并使用 , 构建它`./configure --prefix=/home/charrison`，`make install`但这不可思议地失败了。有些东西提示我安装**libevent**，这有所帮助，但最终**libmemcached** make 现在失败如下：

```
In file included from ./libmemcached/common.h:72,
             from ./libmemcached/csl/common.h:40,
             from libmemcached/csl/context.cc:38:
./libmemcached-1.0/memcached.h:46:27: error: tr1/cinttypes: No such file or directory 
```

而且，即使我解决了这个问题，谁知道还有多少先决条件？

然后我想到“嘿，这不是'包管理器'的用途吗？了解和安装先决条件？” 我发现**RPM**是 CentOS 包管理器，但我淹没在手册页中。我什至不确定它是否能够下载包或了解依赖项。

我唯一有经验的“包管理器”是**cpan**，它非常强大且简单。

所以我真的很想知道

*   如何在 CentOS 中私下安装**libmemcached**，如果可能的话，
*   包管理器做什么和*不做*什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:59:56.197

这是我对这两个问题的回答。希望它可以帮助你。

1.  如何在 CentOS 中私下安装 libmemcached，如果可能的话，

    （步骤 1）从 CentOS 镜像站点下载 libmemcached RPM 包，例如`ftp://ftp.riken.jp/Linux/centos/<centos version>/os/<your arch>/Packages/`.

    （第 2 步）使用 rpm2cpio 命令将包解压到当前目录中。

    `e.g., $ mkdir foo; cd foo; rpm2cpio ../libmemcached-*.rpm | cpio -di`

2.  包管理器做什么和不做什么

    `rpm`命令允许您找出安装了哪些软件包（*1）。此外，您可以确认多个包之间的依赖关系（*2），指定文件属于哪个包（*3）以及指定包包含哪些文件（*4）。

    (*1) 例如，`$ rpm -qa`

    (*2) 例如，`$ rpm -q --requires foo`

    (*3) 例如，`$ rpm -qf /etc/foo.conf`

    (*4) 例如，`$ rpm -ql foo`

我认为Maximum RPM(http://www.rpm.org/max-rpm/) 对您来说非常有用。

# asp.net - ASP.NET C# - 插入记录后重定向

> ID：12922092
> 
> 赞同：0
> 
> 时间：2012-10-16T19:28:34.020
> 
> 标签：asp.net

我执行并插入新记录，下面的代码用于插入。之后，我想使用 window.parent.location 重定向到另一个页面，并使用我在插入中使用的 ID (ProposalID)。

```
private void ExecuteInsert(string ProposedID, string CreatedBy, string Note)
    {
    SqlConnection conn = new SqlConnection(GetConnectionString());
    string sql = "INSERT INTO MDF_ProposedNote (ProposedID, Note, CreatedBy) 
    VALUES "
                + " (@ProposedID, @Note, @CreatedBy)";

    try
    {

            conn.Open();
        SqlCommand cmd = new SqlCommand(sql, conn);
        SqlParameter[] param = new SqlParameter[3];

        param[0] = new SqlParameter("@ProposedID", SqlDbType.Int, 10);
            param[1] = new SqlParameter("@Note", SqlDbType.VarChar, 2000);
            param[2] = new SqlParameter("@CreatedBy", SqlDbType.Int, 10);

        param[0].Value = ProposedID;
        param[1].Value = Note;
        param[2].Value = CreatedBy;

        for (int i = 0; i < param.Length; i++)
        {
            cmd.Parameters.Add(param[i]);
        }

        cmd.CommandType = CommandType.Text;
        cmd.ExecuteNonQuery();
    }
    catch (System.Data.SqlClient.SqlException ex)
    {
        string msg = "Insert Error:";
        msg += ex.Message;
        throw new Exception(msg);
    }
    finally
    {
        conn.Close();
        Response.Write("<script>window.parent.location = 
        'ProposalItemView.aspx?ProposedID='"<%=ProposedID%>";</script>");
    }
    } 
```

这是我重定向到另一个页面的地方 + RecordID

```
Response.Write("<script>window.parent.location = 
'ProposalItemView.aspx?ProposedID='"<%=ProposedID%>";</script>"); 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:30:17.717

你可能想要

```
Response.Redirect(string.format("~/ProposalItemView.aspx?ProposedID={0}", ProposedID), true); 
```

# ruby-on-rails - rails 单个文件中的多个模型

> ID：12922099
> 
> 赞同：7
> 
> 时间：2012-10-16T19:29:08.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我会知道是否有办法在一个文件中包含两个或模型模型类。

这是一个简单且非常基本的示例：

dia_actividad.rb

```
class DiaActividad < ActiveRecord::Base

    self.table_name =  "dbo.DIAACTIVIDAD"
  self.primary_keys = :CASINO_ID, :DIAACTIVIDAD_ID

  attr_accessible :CASINO_ID, :DIAACTIVIDAD_ID, :DFECHAHORAINICIO, :ESTADODIA_ID

  belongs_to :dia_actividad_estado, :foreign_key => :ESTADODIA_ID

end 
```

dia_actividad_estado.rb

```
class DiaActividadEstado < ActiveRecord::Base

    self.table_name =  "dbo.ESTADODIA"
  self.primary_key = :ESTADODIA_ID

  attr_accessible :ESTADODIA_ID, :CESTADODIA

end 
```

我想要一个这样的文件：

```
 class DiaActividad < ActiveRecord::Base

        self.table_name =  "dbo.DIAACTIVIDAD"
      self.primary_keys = :CASINO_ID, :DIAACTIVIDAD_ID

      attr_accessible :CASINO_ID, :DIAACTIVIDAD_ID, :DFECHAHORAINICIO, :ESTADODIA_ID

      belongs_to :dia_actividad_estado, :foreign_key => :ESTADODIA_ID

    end

    class DiaActividadEstado < ActiveRecord::Base

        self.table_name =  "dbo.ESTADODIA"
      self.primary_key = :ESTADODIA_ID

      attr_accessible :ESTADODIA_ID, :CESTADODIA

    end 
```

两个类在一个文件中。但我得到未初始化的常量错误。当 ai 试图引用 DiaActividadEstado 时。

有没有办法做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T00:34:33.440

我强烈建议不要这样做。在一个名称与类名不对应的文件中定义模型会破坏 Rails 的自动加载机制（即，每当您找到未定义的常量时，需要相应的文件，并希望在那里找到定义。

如果你真的坚持这样做，至少在某处配置“自动加载”，（阅读这里[http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html](http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html)了解更多信息），所以缺少的类在正确的位置搜索（自动加载覆盖 rails “smart” 需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-14T23:57:39.707

另一种选择是使用模块，比如说*dia.rb*

```
module Dia
  class Actividad < ActiveRecord::Base
    ...
    belongs_to :actividad_estado, :foreign_key => :ESTADODIA_ID
  end

  class ActividadEstado < ActiveRecord::Base
    ...
  end
end 
```

然后，你必须使用`Dia::ActividadEstado`等等。

虽然最初的问题有一个 rails 3 的标签，但我在使用 rails 4 并试图实现同样的事情时偶然发现了它。所以我不确定这是否适用于rails 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:37:17.803

您如何在运行时创建类。

请参阅此代码片段[http://dzone.com/snippets/create-classes-runtime](http://dzone.com/snippets/create-classes-runtime)并让我们知道它是否有帮助

# java - 数组索引超出范围

> ID：12922100
> 
> 赞同：0
> 
> 时间：2012-10-16T19:29:10.217
> 
> 标签：java, arrays, indexing

```
public class Homework2 {
    public static void main(String[] args){
        int num1 = (int) (Math.random()*(10-3+1)+3);
        int num2 = (int) (Math.random()*(10-3+1)+3);

        double[][] doubMatrix1 = new double[num1][num2];
        double[][] doubMatrix2 = new double[num1][num2];
        double[][] doubMatrix3 = new double[num1][num2];

        doubMatrix1 = getdoubMatrix(num1,num2);
        doubMatrix2 = getdoubMatrix(num1,num2);
        doubMatrix3 = addMatrices(doubMatrix1, doubMatrix2, num1, num2);        
        printDoubMatrix("First matrix", doubMatrix1);
        printDoubMatrix("Second matrix", doubMatrix2);
        printDoubMatrix("Result of adding", doubMatrix3);
        doubMatrix2 =transposeMatrix(num1,num2);

    }

    public static double[][] getdoubMatrix(int num1,int num2){

        double[][] tempArray = new double[num1][num2];
        for(int i = 0;i < tempArray.length;i++)
            for(int j = 0;j < tempArray[i].length;j++)
            {
            tempArray[i][j] = Math.random() * (100);                
            }
        return tempArray;
    }

    public static double[][] addMatrices(double[][] doubMatrix1, double[][] doubMatrix2,int num1,int num2)
    {

        double[][] tempArray = null;
        if(doubMatrix1.length == doubMatrix2.length)
            if(doubMatrix1[0].length == doubMatrix2[0].length)
            {
                 tempArray = new double[num1][num2];
                for(int i = 0; i< doubMatrix1.length;i++)
                      for(int j = 0; j< doubMatrix1[i].length;j++ )
                      {
                          tempArray[i][j] = doubMatrix1[i][j] + doubMatrix2[i][j];
                      }
            }
            else
            {
                return tempArray = new double[0][0];

        }

        return tempArray;
    }

    public static void printDoubMatrix(String text,double[][] doubMatrix1){

        System.out.println(text);
        for(int i = 0; i< doubMatrix1.length;i++)
              for(int j = 0; j< doubMatrix1[i].length;j++ )     
                  System.out.printf("%f\n", doubMatrix1[i][j]);                         
}

    public static double[][] transposeMatrix(int num1, int num2){
        double[][] tempArray = new double[num2][num1];
        for(int i = 0;i < tempArray.length;i++)
            for(int j = 0;j < tempArray[i].length;j++)
            {
                tempArray[i][j] = tempArray[j][i];
                System.out.printf("%f\n", tempArray[i][j]); 
            }    
        return tempArray;
    }

} 
```

我在运行这个程序时遇到问题，没有错误，但是当我运行它时，它说数组索引超出范围，问题出在转置方法上，谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:38:18.473

方法的for循环中的赋值**`transpose`**应该是这样的： -

```
tempArray[i][j] = doubleMatrix2[j][i]; 
```

而不是： -

```
tempArray[i][j] = tempArray[j][i]; 
```

在上面的代码中，您只是将新创建的数组中的值分配`tempArray`给它自己。这没有意义。它不会影响阵列。如果它也会抛出`ArrayIndexOutOfBounds`异常`row != col`

您需要使用要转置的矩阵。

由于您正在调用此方法`doubleMatrix2`

```
doubMatrix2 =transposeMatrix(num1,num2); 
```

你的两个矩阵就像： -

```
tempArray[][] = new double[num2][num1];

doubleMatrix[][] = new double[num1][num2]; 
```

`doubleMatrix[j][i]`所以分配给是有意义的`tempArray[i][j]`。因为两个矩阵中的行数和列数是相反的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:34:02.617

在您的 transposeMatrix 函数中，您必须断言 num1 和 num2 具有相同的值。以任何其他方式，它会导致一个 ArrayOutOfBound，只需检查你的逻辑，你会发现你在矩阵的两个维度中都使用了“i”和“j”值，所以它们都必须相等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:36:29.590

我认为您假设您的二维数组不是参差不齐的数组，并且它包含相同数量的行和列。这并不总是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T19:34:42.477

您的问题是以下行：

```
tempArray[i][j] = tempArray[j][i]; 
```

变量 j 的范围可以从 0 到 tempArray[i].length。但是，您正在使用它来索引 tempArray 本身 (tempArray[j][i])。所以如果 j 大于 tempArray.length，你会得到一个错误。

此外，该函数似乎没有做任何事情，因为 tempArray 中没有任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:43:22.777

在转置矩阵方法中，您正在就地转置。这意味着您正在尝试在不使用任何新数组的情况下替换元素。此外，使用 num1 * num2 大小初始化的 tempArray 没有在方法 transposeMatrix 中初始化的任何值。

我建议如下：

1.  将数组传递给要转置的转置方法。可以说，这有 m 行和 n 列
2.  创建一个大小为 n 行 m 列的新数组
3.  现在使用 for 循环将 array1[i][j] 复制到 array2[j][i]。

超出范围的索引很明显，因为尽管 tempArray[i][j] 对所有情况都有效，而 tempArray[j][j] 不是

这是您可以尝试的示例代码：

```
//assuming array1 is of size num1 * num2
public static double[][] transposeMatrix(int num1, int num2, double[][] array1){
    double[][] tempArray = new double[num2][num1];
    for(int i = 0;i < num1;i++)
        for(int j = 0;j < num2;j++)
        {
            tempArray[j][i] = array1[i][j];
            //System.out.printf("%f\n", tempArray[j][i]);   
        }    
    return tempArray;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T19:34:41.193

我的猜测是问题出在这个循环上——而且它有时只会发生。

```
 double[][] tempArray = new double[num2][num1];
    for(int i = 0;i < tempArray.length;i++) {
        for(int j = 0;j < tempArray[i].length;j++) {
            tempArray[i][j] = tempArray[j][i];
            System.out.printf("%f\n", tempArray[i][j]); 
        }
    } 
```

那么当`num2`and `num1`（或`i`and `j`）不相等时会发生什么？让我们展平循环并为和使用常`num1`量值`num2`...

```
 double[][] tempArray = new double[2][5];
    // i=0, j=0
    tempArray[0][0] = tempArray[0][0];
    System.out.printf("%f\n", tempArray[0][0]); 
    // i=0, j=1
    tempArray[0][1] = tempArray[1][0];
    System.out.printf("%f\n", tempArray[0][1]); 
    // i=0, j=2
    tempArray[0][2] = tempArray[2][0]; // Array index out of bounds! 
```

在您的第三个“循环”中，您尝试访问`tempArray[2][0]`- 但临时数组的大小定义为`double[2][3]`. 这意味着没有`tempArray[2]`，更不用说`tempArray[2][0]`。

# javascript - javascript 时间事件问题 (setTimeout/clearTimeout)

> ID：12922106
> 
> 赞同：2
> 
> 时间：2012-10-16T19:30:07.690
> 
> 标签：javascript, jquery, timer, settimeout

我一直在处理时间事件时遇到困难。有人可以解释为什么A不起作用而B起作用吗？唯一的区别是 AI 将事件绑定放在一个函数中。不用担心函数关闭，它与问题无关。当我测试A时，没有js错误但没有清除计时器。

一个->

```
Test.Navigation = (function() {

    var openTimer = null;
    var closeTimer = null;

    var addListeners = function() {
        $('.hover_container').on('mousemove', function(e) {

            clearTimeout(closeTimer);

        });

        $('.hover_container').on('mouseleave', function(e) {

            // set the close timer
            var container = this; 
            closeTimer = setTimeout(function() {
                //has the mouse paused
                close(container);
            }, 750);
        });

    };

    return {
        init : function() {
            addListeners();
        }
    };

})(); 
```

乙->

```
Test.Navigation = (function() {

    var openTimer = null;
    var closeTimer = null;

    $('.hover_container').on('mousemove', function(e) {

        clearTimeout(closeTimer);

    });

    $('.hover_container').on('mouseleave', function(e) {

        // set the close timer
        var container = this; 
        closeTimer = setTimeout(function() {
            //has the mouse paused
            close(container);
        }, 750);
    });

    var addListeners = function() {
        // nothing here
    };

    return {
        init : function() {
            addListeners();
        }
    };

})(); 
```

编辑：请忽略容器部分，它与问题无关，它只是我没有取出的完整代码的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:37:26.377

在调用 init 的对象存在之前绑定 A。因为您返回了一个新对象。如果您正在使用，则会创建 2 个对象。1 与 vars en 绑定。和 1 与回报。

B 正在工作，因为您创建了一个函数，其中元素被初始化并使用正确的范围。A 不起作用，因为绑定在错误的范围内，因为您创建了 2 个对象：

```
new Test.Navigation(); // Create 1 object

// Create second object.
return {
    init : function() {
        addListeners();
    }
}; 
```

你最好得到这样的结构，那么它也应该可以工作：

```
Test.Navigation = (function() {
    // Private vars. Use underscore to make it easy for yourself so they are private.
    var _openTimer = null,
        _closeTimer = null;

    $('.hover_container').on('mousemove', function(e) {
        clearTimeout(_closeTimer );
    });

    $('.hover_container').on('mouseleave', function(e) {

        // set the close timer, 
        //    use $.proxy so you don't need to create a exta var for the container.
        _closeTimer = setTimeout(
                $.proxy(function() {
                    //has the mouse paused
                    close(this);
                }, this)
            , 750);

    });

    this.addListeners = function() {
        // nothing here
    };

    this.init = function() {
        this.addListeners();
    }

    // Always call the init?
    this.init();

    return this; // Return the new object Test.Navigation
})(); 
```

并像使用它一样

```
var nav = new Test.Navigation();
nav.init(); 
```

正如你所看到的，我稍微升级了你的代码。将`$.proxy`,`_`用于私有变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:37:38.113

我的猜测是，在调用代码中，您有一个语句`new Test.Navigation()`，对于 B，addListeners 在 new Test.Navigation() 时被调用。在 A 中，您返回一个调用 init 函数的对象 ref。您可以验证是否调用了 init() 吗？

即在 A 中，必须在添加处理程序之前调用 init()。在 B 中，每次实例化 Test.Navigation 时都会添加处理程序 --- 根据调用代码，如果您打算一次实例化多个 Test.Navigation()，这可能会很糟糕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:33:46.377

`this`对于第一种方法，您的使用范围是错误的。

尝试

```
var openTimer = null;
var closeTimer = null;
var self = this; 
```

然后稍后

```
var container = self; 
```

在您的代码中，例如 A，

```
$('.hover_container').on('mouseleave', function(e) {
 // set the close timer
 var container = this; 
```

`this`实际上是指当前`$('.hover_container')`元素。

此外，由于`setTimeout`将在之前的`setTimeout`完成之前等待重新开始，您可能会得到差异。您可能想要切换到，`setInterval`因为无论之前的回调是否完成，它都会在每个设置的时间间隔发出回调。

# c++ - 如何在 Blackberry Cascades、QML 和 C++、QT 的列表视图中获取 Web 视图

> ID：12922109
> 
> 赞同：0
> 
> 时间：2012-10-16T19:30:21.407
> 
> 标签：c++, qt, listview, qml, blackberry-10

我正在尝试从 Internet 获取图像列表以显示在 QML 的列表视图中。我的代码如下所示：

```
ListView {

    objectName: "imageListView"

    listItemComponents: [

        ListItemComponent {

            type: "item"

            Container {
                WebView {
                     url: ListItemData.imageSource
                }    
            }                           
        }
    ]
} 
```

问题是这只会导致以下错误：“无法将 [undefined] 分配给 QUrl url”

我知道 ListItemData.imageSource 包含正确的数据，因为我使用 Label { text: ListItemData.imageSource } 代替 WebView 对其进行了测试，它显示了所有需要的图像 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:59:03.303

我建议您仅在从 Internet 加载图像时才使用 ImageView。

首先，使用 QNetworkRequest、QNetworkAccessManager 和 QNetworkReply 类发出网络请求，并在 ImageView 中获取回复加载 QByteArray。

```
QNetworkAccessManager* netManager = new QNetworkAccessManager();
if (netManager) {

QUrl url(ImageUrl);
QNetworkRequest networkRequest(url);
QNetworkReply* networkReply = netManager->get(networkRequest);
connect(networkReply, SIGNAL(finished()), this, SLOT(onReply()));
} 
```

& 在 onReply() 插槽中，您可以像这样加载图像：

```
void App::onReply(QNetworkReply* reply) {
if (reply->error() != QNetworkReply::NoError) {
    qDebug() << "Image not available or any error";
    return;
}

Image image = Image(reply->readAll());
imageView->setImage(image);

} 
```

请注意，如果图像太大，您可能必须使用 ImageData 类及其方法在级联 ImageView 中加载图像。它不会使用 setImage 方法直接加载图像。& 要使其与 ListView 一起工作，您必须创建自己的 CustomItem & ListItemProvider & 还必须覆盖更新项的方法。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:15:46.490

好的 - 所以我找到了另一个解决方案。我从 Beta 2 SDK 升级到了 Beta 3 SDK。然后我只是做了这样的事情：

```
#include <QObject>
#include <bb/cascades/Image>

class MyImageClass : public QObject, public bb::cascades::Image
{
    Q_OBJECT

    Q_PROPERTY(bb::cascades::Image image READ image WRITE setImage NOTIFY imageChanged FINAL)

    //...
    bb::cascades::Image image_;
public:
    //...
    bb::cascades::Image image() const {return image_;}

    void setImage(bb::cascades::Image image {
         image_ = image;
         emit imageChanged();
    }

signals:
    //...
    void imageSourceChanged();
} 
```

然后在将图像插入列表时，我只是使用了：

```
groupDataModel_.insert(myImageObject); 
```

在我的 qml 中，我有：

```
ListView {
    id: imageListView
objectName: "ImageListView"         

    listItemComponents: [
    ListItemComponent {
        type: "item"

        Container {
            id: imagesRoot
            objectName: "ImagesRoot"

                ImageView {
                image: ListItemData.image
            }
        }
    }
    ]
} 
```

# java - 添加 Slick jvm 后不再找到 Main 类

> ID：12922110
> 
> 赞同：0
> 
> 时间：2012-10-16T19:30:25.133
> 
> 标签：java, maven, lwjgl

我目前正在尝试使用 Slick 和 Maven 构建一个简单的 java 游戏。

我的设置确实可以正常工作。但是，当我将主类扩展为 Slick“BasicGame”时，我无法再执行 jar，提示此错误消息：

```
D:\workspace\GameTest\target>java -jar GameTest-1.0-SNAPSHOT.jar
Exception in thread "main" java.lang.NoClassDefFoundError: org/newdawn/slick/BasicGame
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.newdawn.slick.BasicGame
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 12 more
Could not find the main class: gameTest.MyGame. Program will exit. 
```

在我这样做之前，一切都执行得很好。Pom.xml 是从[这里](http://www.lwjgl.org/wiki/index.php?title=Setting_Up_LWJGL_with_Maven)复制的。

MyGame 类如下所示： ... 导入 ...

```
public class MyGame extends BasicGame {

   ...
   empty implementations of BasicGame Methods
   ...

   public static void main(String[] args){
      System.out.println("Hello World");       
   }
} 
```

有谁知道为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:47:08.990

> 有谁知道为什么会发生这个错误？

当您切换到使用可执行 jar 时，您创建了一种情况，您的依赖库 - slick.jar - 不再在您的类路径中。一切开始正常，因为 MyGame 在您的 jar 文件中。但是 MyGame 扩展了不在您的 jar 文件中的 BasicGame。它在 slick.jar 中，您的 java 命令没有引用 slick.jar。

不知何故，您必须将所有依赖项重新放入您的类路径中。有关更多信息，请查看相关问题[是否可以使用自定义清单文件创建一个包含项目类和项目依赖项的“uber”jar 作为 jars？](https://stackoverflow.com/questions/1832853/is-it-possible-to-create-an-uber-jar-containing-the-project-classes-and-the-pr)

刚刚检查了您的 pom.xml 文件 - 您还必须将 lwjgl 和 vecmath 集成到您的类路径中。

# forms - CakePHP 2.x：使用 CakeDC 的用户插件和安全组件将登录表单嵌入为元素

> ID：12922111
> 
> 赞同：9
> 
> 时间：2012-10-16T19:30:26.877
> 
> 标签：forms, security, cakephp, plugins

新的 CakePHP 用户在这里。我一直无法找到解决此问题的方法。

我想将登录表单作为元素嵌入到现有页面中。我正在使用 CakeDC 用户插件。目标是在页面中嵌入登录表单，然后在他们登录时更新页面上的一些内容而不刷新页面。在我们开始担心 AJAX 和 SecurityComponent 之前，我想至少让表单作为一个元素嵌入到其他页面上。

对于初学者，我尝试直接将“/Views/Users/login.ctp”的内容复制并粘贴到元素中。这给了我一个“未定义变量“$Model”的警告，所以我将模型硬编码为“Users.User”（因为我假设访问插件内部模型的符号是“plugin.model”，就像他们在手册）。失败并显示错误消息 Error: *Users.usersController could not be found。*

因此，我调整了表单以将“用户”作为模型而不是 $model 并且请求现在被黑洞。如果我禁用安全组件，我可以成功登录。这不是一个令人满意的解决方案（我的意思是，我可以选择不验证表单或将“登录”定义为解锁操作，但如果我这样做，那么我可能还没有为登录启用安全性，对吧？ ）。

这是 app/Plugin/Users/View/Elements/login.ctp 的代码：

```
<div class="users index">
<h2><?php echo __d('users', 'Login'); ?></h2>
<fieldset>
    <?php
        echo $this->Form->create('User', array(
            'action' => 'login',
            'id' => 'LoginForm'));
        echo $this->Form->input('User.email', array(
            'label' => __d('users', 'Email')));
        echo $this->Form->input('User.password',  array(
            'label' => __d('users', 'Password')));

        echo '<p>' . __d('users', 'Remember Me') . $this->Form->checkbox('remember_me') . '</p>';
        echo '<p>' . $this->Html->link(__d('users', 'I forgot my password'), array('action' => 'reset_password')) . '</p>';

        echo $this->Form->end(__d('users', 'Submit'));
    ?>
</fieldset> 
```

以下是调用该元素的视图的代码：

```
<div id="loginform">
<?php echo $this->element('Users.login'); ?>
</div> 
```

如果我将元素代码复制并粘贴到 View 中（例如 in `apps/Plugin/Users/View/Users/login.ctp`），无论 Security 是打开还是关闭，它都可以正常工作，因此我怀疑在表单或 Security 调用方面进行了一些胡闹。

任何想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:08:37.617

我认为问题在于元素本质上是愚蠢的视图——它们并不意味着了解模型。您必须自己传递数据。

我通常`$this->set("authUser", $this->Auth->user());`在设置身份验证后放入我的 AppController，这让我可以在任何地方检查当前登录用户的数据，包括元素。

您也可以像这样直接传递数据：

`<?php echo $this->element("Users.login", array("user"=>$user));?>`

另外，我并不清楚您的措辞，但登录应该是解锁操作，否则用户将如何首次登录？

# ios - 标签栏继承行为

> ID：12922114
> 
> 赞同：1
> 
> 时间：2012-10-16T19:30:36.130
> 
> 标签：ios, xcode, cocoa-touch, interface-builder, storyboard

我有一个标签栏控制器。标签栏的第一项是表格视图控制器，它从父标签栏控制器获取标签栏。现在我将视图控制器连接到表视图控制器的单元格，但它没有得到标签栏。

所以：

```
Tab bar
  Table view
    View 
```

如何将标签栏保留在视图控制器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:08:23.500

我的故事板是：

UINavigationController > UITabBar > UITableViewController > UIViewController

如果我更改为：

UITabBar > UINavigationController > UITableViewController > UIViewController

并使用：

```
UIViewController *c = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"];
[c setTitle:[NSString stringWithFormat:@"%d", [indexPath row]]];
[self.navigationController pushViewController:c animated:YES]; 
```

我试图在 tabController 中找到 pushViewController: 方法，但 tabController 没有，所以我尝试更改控制器的顺序并且它可以工作。

# c# - C# 无法使用 UdpClient 接收 WOL 包

> ID：12922122
> 
> 赞同：2
> 
> 时间：2012-10-16T19:31:05.820
> 
> 标签：c#, udp, broadcast, udpclient, wake-on-lan

我正在尝试在我的 C# 应用程序中接收 WOL 包。我想为什么它不起作用的问题与我运行 DD-WRT 的路由器如何广播包有关。

我用来接收 UDP 包的代码：

```
 UdpClient udp = new UdpClient(10);
   IPEndPoint all = new IPEndPoint(IPAddress.Any, 0);
   while (true)
   {
     System.Diagnostics.Debug.Print("listening");
     byte[] receivedBytes = udp.Receive(ref all);
     System.Diagnostics.Debug.Print(Encoding.ASCII.GetString(receivedBytes));
   } 
```

这已经适用于我的旧路由器，但现在我运行了 DD-WRT，它必须像这样设置：我将端口 10 上的传入 UDP 包转发到（不存在的）IP 192.168.1.254 在路由器启动时执行命令“arp -i br0 -s 192.168.1.254 FF:FF:FF:FF:FF:FF”以广播在该 IP 上接收到的消息。此设置有效，每台机器都会收到一个魔术包，我可以从网络外部唤醒它们。

WireShark 能够捕获此包，但“udp.Receive(ref all);” 不是。这是发送到我的路由器的 WOL 包在 Wireshark 中的样子：http: [//i.stack.imgur.com/nxaAP.png](http://i.stack.imgur.com/nxaAP.png)

另一方面，如果我（从我的 C# 应用程序中）发送广播的 UDP MagicPackage，我上面的代码会收到这个包。这个 MagicPackage 在 Wireshark 中显示如下：http: [//i.stack.imgur.com/tPU1v.png](http://i.stack.imgur.com/tPU1v.png)

所以我不能 100% 确定不同的“目的地”（192.168.1.254 与 255.255.255.255）或不同的“协议”（WOL 与 UDP）是否是问题所在。我的猜测是，UdpClient 忽略了 WOL 包，因为它的目的地（在 IP 标头内）是不同的 IP 地址（代码在机器 192.168.1.2 上运行）。另一方面，第二个包的 IP Header 中的目标地址为“255.255.255.255”，因此被 UdpClient 捕获。

所以最大的问题是：如何设置一个同时接收路由器广播的 WOL 包的 UDP 侦听器？

顺便说一句：我也已经用这段代码试过了，但没有任何运气：

```
Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
EndPoint iep = new IPEndPoint(IPAddress.Any, 10);
sock.Bind(iep);
byte[] data = new byte[1024];
int recv = sock.ReceiveFrom(data, ref iep); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:48:02.420

检查此属性： http: [//msdn.microsoft.com/en-us/library/system.net.sockets.socket.enablebroadcast.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.enablebroadcast.aspx) 我相信 WOL 数据包被广播。在这种情况下，它应该有所帮助。

**编辑：**

检查您的 Wireshark 屏幕截图后，我认为问题不在您的代码中。据我所知，网络堆栈中有很多过滤器。第一个是MAC过滤器。WOL 数据包将通过广播地址 ff:ff:ff.... 第二个过滤器在 IP 地址上。您的 WOL 数据包具有目标 IP ...1.254，但您的操作系统期望 ...1.2，因此 IP 堆栈将抛出此数据包，您的应用程序将不会收到任何内容。另一边的 Wireshark 将网卡切换到“混杂模式”，在这种模式下，所有过滤器都被关闭，wireshark 能够捕获所有内容。所以要解决这个问题：

1）您可以使用一些捕获库实现与 Wireshark 类似的行为 - 看看 WinPCAP - [http://www.winpcap.org/](http://www.winpcap.org/)

2) 尝试使用 RAW 套接字，但我不确定这是否有效 - [http://en.wikipedia.org/wiki/Raw_socket](http://en.wikipedia.org/wiki/Raw_socket)

3) 最好的方法是修复您的路由器以标准格式发送 WOL。

# python - py3k：不区分大小写的列表排序 - 使用或不使用 lambda？

> ID：12922124
> 
> 赞同：2
> 
> 时间：2012-10-16T19:31:11.423
> 
> 标签：python, sorting, lambda, python-3.x, case-insensitive

在：

[不区分大小写的列表排序，不小写结果？](https://stackoverflow.com/questions/10269701/case-insensitive-list-sorting-without-lowercasing-the-result)

我见过两种解决方案：（假设输入是 utf-8 字符串列表，例如`['z1', 'A1', 'a0', 'bC']`）

*   没有 lambda：`L.sort(key = str.lower);`
*   使用 lambda：`L.sort(key = lambda s: s.lower());`

有什么区别？哪个更好或更“pythonic”？

（因为我标记的问题是关于`python-3.x`。欢迎所有与特定于 python 2 的行为相关的评论，但请注意）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:34:09.387

`str.lower`是`str`类型的未绑定方法，`lambda s: s.lower()`是匿名函数。最终效果是一样的：对于 中的每个元素`L`，`key`调用可调用对象，传入元素。

如果您不对字符串进行排序，效果可能会有所不同*。*该`str.lower`方法只适用于字符串，而匿名 lambda 函数适用于任何有`.lower()`方法的东西；例如，当您混合`bytes`和时使用它`str`。

我更喜欢第一个版本，它更短，速度更快。此外，如果我的值不是字符串，它会抛出一个错误，这*通常*是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:01:14.153

第三个选项`methodcaller`来自`operator`模块。

```
from operator import methodcaller
L.sort(key=methodcaller('lower')) 
```

它相当于`lambda`它所做的选项，但根据口味，它很好且可读，并且来自操作员模块，相当简洁。`str.lower`如果对象是`unicode`字符串（反之亦然），则会中断。

# php - PHP MySQL 出席嘉宾名单

> ID：12922128
> 
> 赞同：1
> 
> 时间：2012-10-16T19:31:43.197
> 
> 标签：php, mysql, post, checkbox

我正在写一份出席名单，我想将其用于即将举行的活动。

当一个人登录网站时，它可以选择他/她和其他人是否将出席活动。

```
if ($res && mysql_num_rows($res) >= 1)
{
     echo '<form method="post" action="guest.php">';
     echo '<table border="10">
        <tr>
            <td>Name</td>
            <td>Present</td>
        </tr>';

    while ($row = mysql_fetch_array($res))
    {
        echo '<tr>
            <td>'.$row['guestId']." ".$row['firstName'].'</td>
            <td><input type=\'checkbox\' name=\'present[]\' value='.$row['guestId'].'></td>
        </tr>';
    }

    echo '</table>';
    echo '<input type="submit" name="submit" value="submit">';

} else {
    echo 'No data found!';
} 
```

在这里，我`guestId`将值写入用于将其写入数据库的值：

```
 if( isset($_POST['present']) ) {
        foreach($_POST['present'] as $value){
            $query=mysql_query("INSERT INTO present (gastId, present) VALUES (".$value.", 1)");
            $resultadd=mysql_query($query) or die("Errore insert G: ".mysql_error());
        }
    } 
```

有没有更好的方法来做到这一点？因为我无法想象这是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:50:03.410

您的代码还不错，有很多不同的方法可以做到这一点。

如果您要创建项目，我建议您查看 MVC（模型视图控制器），这里有一个教程： http: [//www.nathandavison.com/posts/view/11/custom -php-mvc-tutorial-part-1-介绍](http://www.nathandavison.com/posts/view/11/custom-php-mvc-tutorial-part-1-introduction)

还有一些框架，如 codeigniter、cakePHP、YII ( [http://www.phpframeworks.com/top-10-php-frameworks/](http://www.phpframeworks.com/top-10-php-frameworks/) ) 可以帮助您制作 MVC 应用程序，而且它更有条理、OOP、安全。

**编辑：**作为@MadaraUchiha 的建议，这里是使用 PDO 的链接，它们是安全的：http: [//php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:41:20.573

您可以使用一个查询插入多行：

```
INSERT INTO present 
(gastId, present)
VALUES
( 1, 1 ),
( 2, 0 ),
( 3, 1 ) 
```

或者您可以使用 mysqli 和准备好的语句：

```
$mysqli = new mysqli(/* Connection information here */);
$stmt = $mysqli->prepare("INSERT INTO present (gastId, present) VALUES ( ?, 1 )");
$stmt->bind_param("i", $value);
foreach($_POST['present'] as $value) {
   $stmt->execute();
}
$stmt->close();
$mysqli->close(); 
```

# google-drive-api - Google docs api文件查看和下载

> ID：12922137
> 
> 赞同：0
> 
> 时间：2012-10-16T19:32:27.093
> 
> 标签：google-drive-api, google-docs-api

有没有人使用 google docs api 下载文件有运气？

我已经苦苦挣扎了好几个星期才能让这个工作没有成功。

[https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files](https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files)

我可以成功获取文件列表并显示在我的网页中。但是，我接下来要做的是允许用户单击文件链接，然后在谷歌文档查看器中将其打开，然后允许他们查看和编辑该文件。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:57:35.927

我建议使用更新的 Google Drive API，它更易于使用，支持多种编程语言，并且每种方法都有文档，包括下载文件：

[https://developers.google.com/drive/manage-downloads](https://developers.google.com/drive/manage-downloads)

# c++ - 复制和交换习语在 C++11 中仍然有用吗

> ID：12922138
> 
> 赞同：17
> 
> 时间：2012-10-16T19:32:30.153
> 
> 标签：c++, c++11, swap

我指的是这个问题： [什么是复制和交换成语？](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)

实际上，上述答案导致以下实现：

```
class MyClass
{
public:
    friend void swap(MyClass & lhs, MyClass & rhs) noexcept;

    MyClass() { /* to implement */ };
    virtual ~MyClass() { /* to implement */ };
    MyClass(const MyClass & rhs) { /* to implement */ }
    MyClass(MyClass && rhs) : MyClass() { swap(*this, rhs); }
    MyClass & operator=(MyClass rhs) { swap(*this, rhs); return *this; }
};

void swap( MyClass & lhs, MyClass & rhs )
{
    using std::swap;
    /* to implement */
    //swap(rhs.x, lhs.x);
} 
```

但是，请注意，我们可以完全避开 swap()，执行以下操作：

```
class MyClass
{
public:
    MyClass() { /* to implement */ };
    virtual ~MyClass() { /* to implement */ };
    MyClass(const MyClass & rhs) { /* to implement */ }
    MyClass(MyClass && rhs) : MyClass() { *this = std::forward<MyClass>(rhs);   }
    MyClass & operator=(MyClass rhs)
    { 
        /* put swap code here */ 
        using std::swap;
        /* to implement */
        //swap(rhs.x, lhs.x);
        // :::
        return *this;
    }
}; 
```

请注意，这意味着我们将不再使用 MyClass 在 std::swap 上进行有效的参数相关查找。

简而言之，使用 swap() 方法有什么好处。

* * *

编辑：

我意识到在上面的第二个实现中存在一个可怕的错误，这是一个很大的事情，所以我将保持原样以指导遇到这个问题的任何人。

如果运算符 = 定义为

```
MyClass2 & operator=(MyClass2 rhs) 
```

然后，只要 rhs 是一个 r 值，就会调用移动构造函数。但是，这意味着在使用时：

```
MyClass2(MyClass2 && rhs)
{
    //*this = std::move(rhs);
} 
```

请注意，您最终会递归调用移动构造函数，因为 operator= 调用移动构造函数......

在您遇到运行时堆栈溢出之前，这是非常微妙且难以发现的。

现在解决这个问题的方法是同时拥有

```
MyClass2 & operator=(const MyClass2 &rhs)
MyClass2 & operator=(MyClass2 && rhs) 
```

这允许我们将复制构造函数定义为

```
MyClass2(const MyClass2 & rhs)
{
    operator=( rhs );
}

MyClass2(MyClass2 && rhs)
{
    operator=( std::move(rhs) );
} 
```

请注意，您编写了相同数量的代码，复制构造函数是“免费的”，您只需编写 operator=(&) 而不是复制构造函数和 operator=(&&) 而不是 swap() 方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-17T10:48:56.730

首先，无论如何你都做错了。复制和交换习语用于为赋值运算符重用构造函数（而不是相反），从已经正确构造的构造函数代码中受益，并为赋值运算符保证强大的异常安全性。但是您不要在移动构造函数中调用交换。与复制构造函数复制所有数据的方式相同（无论这在单个类的给定上下文中意味着什么），移动构造函数移动此数据，移动构造函数构造并分配/交换：

```
MyClass(const MyClass & rhs) : x(rhs.x) {}
MyClass(MyClass && rhs) : x(std::move(rhs.x)) {}
MyClass & operator=(MyClass rhs) { swap(*this, rhs); return *this; } 
```

这将在您的替代版本中

```
MyClass(const MyClass & rhs) : x(rhs.x) {}
MyClass(MyClass && rhs) : x(std::move(rhs.x)) {}
MyClass & operator=(MyClass rhs) { using std::swap; swap(x, rhs.x); return *this; } 
```

这不会表现出通过在构造函数中调用赋值运算符引入的严重错误。您永远不应该调用赋值运算符或在构造函数中交换整个对象。构造函数负责构建，并且具有不必关心先前数据的破坏的优势，因为该数据尚不存在。同样，构造函数是否可以处理不可默认构造的类型，最后但**并非**最不重要的是，直接构造比默认构造后跟赋值/交换的性能更高。

但是要回答您的问题，整个事情仍然是复制和交换的习惯用法，只是没有明确的`swap`功能。在 C++11 中它甚至更有用，因为现在您已经使用单个函数实现了复制**和移动赋值。**

如果交换函数在赋值运算符之外仍然有价值是一个完全不同的问题，并且取决于这种类型是否可能被交换，无论如何。事实上，在 C++11 中，具有正确移动语义的类型可以使用默认`std::swap`实现进行足够高效的交换，通常无需额外的自定义交换。请确保不要`std::swap`在赋值运算符中调用此默认值，因为它本身会进行移动赋值（这将导致与移动构造函数的错误实现相同的问题）。

但是再说一遍，不管是否自定义`swap`函数，这并没有改变复制和交换习语的用处，这在 C++11 中更有用，消除了实现额外函数的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:08:09.850

你当然没有考虑全貌。您的代码为不同的赋值运算符重用构造函数，原始代码为不同的构造函数重用赋值运算符。这基本上是一样的，你所做的只是改变它。

除了因为他们编写构造函数，他们可以处理非默认构造类型或如果没有像默认构造一样显式初始化`int`或对于默认构造来说很昂贵或者默认构造的成员对破坏无效（对于例如，考虑一个智能指针——未初始化的 T* 导致错误删除）。

所以基本上，你所取得的一切都是相同的原则，但在一个明显更糟的地方。哦，你必须定义所有四个函数，否则相互递归，而原始的复制和交换只定义了三个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:11:50.820

使用复制和交换习语来实现复制分配的原因（如果有的话）的有效性在 C++11 中与在以前的版本中相同。

另请注意，您应该`std::move`在移动构造函数中使用成员变量，并且应该`std::move`在作为函数参数的任何右值引用上使用。

`std::forward`应该只用于表单的模板参数引用`T&&`和`auto&&`变量（在类型推导期间它们都可能被引用折叠成左值引用），以酌情保留它们的右值或左值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-25T00:20:46.707

对于我来说最好在 C++11 中这样做：

```
class MyClass {
public:
    MyClass(MyString&& pStr) : str(pStr)) { 
        // call MyString(MyString&& pStr)
    }
    MyClass(const MyString& pStr) : str(pStr)) { 
        // call MyString(const MyString& pStr)
    }
private:
    MyString const str; // Still const!
}; 
```

# jquery - Rails，发送 json 参数

> ID：12922140
> 
> 赞同：4
> 
> 时间：2012-10-16T19:32:44.847
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, json

我必须使用一个需要包含 json 字符串的单个参数的 API：

```
def function
  data = params['data']
  # Do thing with the json string data
  #... More code
end 
```

配置.rb：

```
match "/thing" => "controller#function", :via => :post 
```

我已经搜索并阅读了文档，我似乎无法找到如何做到这一点的方法。我用 form_for 或 form_tag 函数搜索过，这似乎是不可能的。我已经使用 remote => true 尝试了这两种方法，但它并没有达到我想要的效果。

我也尝试使用 jquery $.ajax 来执行此操作，但它以 json 格式而不是 json 字符串发送参数。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:50:46.730

尝试像这样访问 json 对象

```
data = params[:data].first[0] 
```

包含 [0] 以读取 json 格式对象的第一个元素，假设它没有嵌套在另一个 json 对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:53:32.873

我认为 Rails 可能会自动将参数转换为哈希，因为它识别出它是 json。你应该可以通过调用`to_json`它把它变成一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:53:55.077

您仍然可以将数据作为 json 字符串发送：

*   在您的 jquery ajax 设置中，将 contentType 选项设置为“text/html”

# youtube-api - 在 Youtube API V3 或 Youtube Analytics 中获取视图引用

> ID：12922143
> 
> 赞同：1
> 
> 时间：2012-10-16T19:32:47.013
> 
> 标签：youtube-api

有谁知道是否有可能在新的实验性 Youtube API v3 中获得推荐人/视图来源？我们检查了这些以及实验性的 Youtube Analytics API，但这似乎是不可能的。

我们希望获得推荐人报告，因为我们可以在 V2 中找到：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_insight](https://developers.google.com/youtube/2.0/developers_guide_protocol_insight)

谢谢，

斯蒂芬妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:34:06.113

YouTube Analytic V3 api 不包含获取引荐来源或来源的方法。可以在此页面上查看可用的指标。[https://developers.google.com/youtube/analytics/v1/dimsmets/mets](https://developers.google.com/youtube/analytics/v1/dimsmets/mets)

如果您想添加更多指标，请在此处提交功能请求。[https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20(Enhancement%20Request](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20(Enhancement%20Request) )

# sql-server - SqlServer SMO Scripting.ScriptingError 事件处理程序未触发

> ID：12922145
> 
> 赞同：0
> 
> 时间：2012-10-16T19:32:59.527
> 
> 标签：sql-server, database, smo

我有一个 SQL Sever 2008 R2/64 位数据库服务器，我正在使用 Sql Server 管理对象 (SMO) 编写一些相当基本的脚本实用程序。我的项目是用 C# 编写的 32 位 VS2010 可执行文件。

大部分努力都相当简单和成功。我遇到的唯一问题是触发我的自定义事件处理程序，应该调用它以响应脚本错误。

该`Scripter`对象公开了一个`ScriptingError`事件，我试图以此来利用它：

```
//srv contains a valid server name
Scripter scrp = new Scripter(srv);

//scrp_ScriptingError is my handler
scrp.ScriptingError += new ScriptingErrorEventHandler(scrp_ScriptingError); 
```

我的处理程序是这样声明的：

```
 static void scrp_ScriptingError(object sender, ScriptingErrorEventArgs e)
   {
       // my handler goes here, just printing e.Current.Urn to the console
       // This is merely representative, have had other things here, but
       // the handler never fires
       Console.WriteLine(e.Current.Value);
   } 
```

所有这些都编译得很干净。

我的代码是通过简单的方式调用的，`scrp.Script(urns);`其中`urns`只是一个被脚本化的数据库对象数组。没有什么花哨：

```
 try
    {
        sc = scripter.Script(urns);
    }
    catch (Exception e)
    {
        WriteLog(String.Format("Failure during scripting: {0}: Inner exception message (if any): {1}",e.Message,((e.InnerException==null)?"[None]":e.InnerException.Message)));
    }
    using (System.IO.StreamWriter file = new System.IO.StreamWriter(fileName,true))
    {
        foreach(String currentLine in sc)
        {
            file.WriteLine(currentLine);
            file.WriteLine("GO");
        }
    } 
```

问题是，到目前为止，无论我尝试了什么，当脚本编写过程中发生错误时，我的 ScriptingError 处理程序永远不会触发。

即使在 VS2010 中的调试模式下，当我在处理程序中设置断点并触发我的脚本代码并知道会发生错误时，只会抛出异常，但我的 ScriptingError 处理程序中的断点永远不会触发。

我现在处于以树换林的模式，不知道我做错了什么。我是否期望 ScriptingError 处理程序出现错误的情况？

我搜索了有关 SMO 对象的 MSDN 文档，除了基本的 API 调用本身以及 Internet 上的极少数示例之外，几乎没有发现任何关于 ScriptingError 处理程序的内容。对我来说，这似乎非常简单和直接——只需为事件分配一个事件处理程序——但有一些我没有注意到的不包括电池的通知。

非常感谢您指出我的错误，如果我的错误非常愚蠢，请礼貌地要求最少的砖块:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:05:07.367

我不知道，但我认为您应该尝试设置[ContinueScriptingOnError](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.scriptingoptions.continuescriptingonerror%28v=sql.105%29.aspx)选项。否则，SMO 将没有理由调用该事件，而是通过异常来代替。

# javascript - 如何检查输入的值是否为 10 javascript？

> ID：12922147
> 
> 赞同：-1
> 
> 时间：2012-10-16T19:33:04.073
> 
> 标签：javascript, verify

我想检查输入的值是否为 10（如果值为 10，我希望将结果发送到“send.php”）。我究竟做错了什么？

```
<?php  $cod1=rand(0, 10); 
    $cod2=10-$cod1; ?>   
    <form action='send.php'  method='post' onsubmit='f1(this)'>
    Please enter the value of <br> <?php echo $cod1 ?> + <?php echo $cod2 ?> in the following box
    <input type="text" name="xrezultat" id="xrezultat" class="box" size="32"/>

    <input name="Submit1" type="submit" class="butt" value="Trimiteti">      
    <input name="Submit2" type="reset" class="butt" value="Stergeti ">

    </form>

    <Script> 
    function f1(input) 
    {    
    if(document.getElementById("xrezultat").value!=10)   
    aux==false;

     if (aux == true)
    {
       return true;
    }

       else
    {
        alert ( "Please enter the correct value" );
        return false;
                 }

    }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:35:48.827

`aux==false;`检查是否`aux`等于 false，它不会分配给它。

它应该是`aux=false;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:34:54.903

尝试使用`parseInt`.

```
var numberValue = parseInt(document.getElementById("xrezultat").value, 10); 
```

# ruby - 在 ruby 中访问父方法以编写该方法的包装器

> ID：12922149
> 
> 赞同：0
> 
> 时间：2012-10-16T19:33:16.470
> 
> 标签：ruby, datamapper

```
class Package
  include DataMapper::Resource
  property :id,           Serial
  property :product,      String, :required => true 

  def self.create(attributes = {})
    puts 'I am in the Object method'
    #do something here with value of product before creating a new row
    create(attributes)
  end
end

p = Package.new
p.create :product=>'myprod' 
```

我实际上想要一个围绕 Datamapper 提供的“创建”方法的包装器。这样在 Package 表中创建一行之前，我可以对“product”的值做一些事情。但是上面的实现是错误的，它似乎在循环调用中丢失了。我明白了

```
.......
.......
I am in the Object method
I am in the Object method
I am in the Object method
I am in the Object method
I am in the Object method
I am in the Object method
I am in the Object method
I am in the Object method
I am in the Object method
SystemStackError - stack level too deep: 
```

我究竟做错了什么？我怎样才能实现我的目标

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:36:58.833

您在代码中拥有的是递归定义。你必须避免这种情况。

```
class Package
  include DataMapper::Resource
  property :id,           Serial
  property :product,      String, :required => true 

  def self.create(attributes = {})
    puts 'I am in the Object method'
    #do something here with value of product before creating a new row
    super(attributes)
  end
end 
```

# c - 在 shell 中运行 C 程序时将相对路径扩展为完整路径

> ID：12922151
> 
> 赞同：2
> 
> 时间：2012-10-16T19:33:20.120
> 
> 标签：c, bash, argv, shebang

当我的脚本需要与 C 可执行文件通信时，我遇到了问题。我无法获得脚本的完整路径，我需要将其加载并发送到另一个进程。

脚本的名称是`myScript`

```
#!/home/user/git/proyect/test

hello this

is a
script 
```

这是C可执行文件的源代码

```
#include <stdio.h>

int main (int argc, char *argv[]){
    int count;

    printf ("Este programa fue llamado con: \"%s\".\n",argv[0]);
    if (argc > 1){
        for (count=1; count<argc; count++){
            printf("argv[%d] = %s\n", count, argv[count]);
        }
    }
    else{
        printf("The command had no other arguments.\n");
    }
    return 0;
 } 
```

如果我`myScript`从终端运行，

*   `argv[0]`显示可执行文件的路径（我猜那是因为它是位于的信息`#!`）。
*   `argv[1]`显示传递给可执行文件的第一个参数，即
    *   如果我`./myScript`用作参数，那就是我所看到的（相对路径）
    *   如果我`/home/user/git/proyect/test/scriptFolder/myScript`用作参数，它会显示绝对路径（这是我需要的，但我不想每次都在终端中编写完整路径）

所以我的问题是，如何`myScript`在调用脚本时获得完整路径而不传递其完整路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:37:12.257

您的问题措辞不是很好，所以我不确定我是否在回答您提出的相同问题，但您可以使用[realpath()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/realpath.html)函数将“./myScript”转换为其完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:43:15.400

据我了解，您正在实现脚本解析器/解释器。

您在此处显示的`main`函数已编译并链接到`/home/user/git/proyect/test`可执行文件。我对吗？

这意味着当您`./myScript`在终端上执行时，实际执行的是`/home/user/git/proyect/test ./myScript`.

如果是这种情况@MK 的答案是正确的。和`realpath()`你可以得到“./myScript”的绝对路径

我建议编辑您的问题以使其更具可读性。

# macos - 在附加之前缩放 QTMovie

> ID：12922155
> 
> 赞同：0
> 
> 时间：2012-10-16T19:33:30.237
> 
> 标签：macos, cocoa, scaling, quicktime, qtkit

使用该`QTKit`框架，我正在开发一个小应用程序。

在应用程序中，我试图在另一部电影之后附加一部电影，本质上它已经在工作（大部分时间），但我在附加电影时遇到了一些麻烦。我要附加的电影很大，比如 1920x1080，附加的电影通常要小得多，但我不知道它到底是什么尺寸。附加的电影在之前的 1920x1080 帧中保持自己的大小，如下所示：![在此处输入图像描述](../Images/3a7502d79270094ba38de69731c42515.png)

有没有人熟悉这个？有没有办法可以将需要附加的电影缩放到附加电影的大小？文档中没有提到这样的事情。

这是一些相关的方法：`QTMovie *segmentTwo = [QTMovie movieWithURL:finishedMovie error:nil]; QTTimeRange 范围 = { .time = QTZeroTime, .duration = [segmentTwo 持续时间] };

```
 [segmentTwo setSelection:range];
        [leader appendSelectionFromMovie:segmentTwo];

        while([[leader attributeForKey:QTMovieLoadStateAttribute] longValue] != 100000L)
        {
            //wait until QTMovieLoadStateComplete
        }

        NSDictionary *exportAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                          [NSNumber numberWithBool:YES], QTMovieExport,
                                          [NSNumber numberWithLong:kQTFileTypeMovie], QTMovieExportType, nil];

        NSString *outputFile = [NSString stringWithFormat:@"%@.mov", onderwerp];
        NSString *filepath = [[@"~/Desktop" stringByExpandingTildeInPath] stringByAppendingFormat:@"/%@", outputFile];
        BOOL succes = [leader writeToFile:filepath withAttributes:exportAttributes error:&theError]; 
```

领导者初始化如下：

```
NSDictionary *movieAttributes = [NSDictionary dictionaryWithObjectsAndKeys:path, QTMovieFileNameAttribute, [NSNumber numberWithBool:YES], QTMovieEditableAttribute,  nil];

leader = [QTMovie movieWithAttributes: movieAttributes  error:&error]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:25:02.417

这包含了我需要的所有信息，尽管没有使用 QTKit 框架。[QTKit - 合并两个不同宽度和高度的视频？](https://stackoverflow.com/questions/9213088/qtkit-merge-two-videos-with-different-width-and-height)

# ant - 将文件复制并解压缩到远程机器 - ant

> ID：12922157
> 
> 赞同：5
> 
> 时间：2012-10-16T19:33:36.867
> 
> 标签：ant, ssh, exec, scp

我需要从本地机器复制 zip 文件并粘贴到远程机器上，然后在远程机器上解压缩这些文件。

我知道第一部分可以使用 scp 完成（从本地复制 zip 文件并粘贴到远程机器中）但是如何使用 ant 完成第二部分？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:40:22.637

您可以使用[sshexec 任务](http://ant.apache.org/manual/Tasks/sshexec.html)在远程计算机上调用命令行`unzip`命令（假设远程计算机已安装解压缩）。

```
<!-- local directory containing the files to copy -->
<property name="archives" location="C:\path\to\zipfiles" />
<property name="archives.destination" value="/home/testuser/archives" />
<property name="unzip.destination" value="/home/testuser/unpacked" />

<fileset id="zipfiles.to.copy" dir="${archives}" includes="*.zip" />

<!-- copy the archives to the remote server -->
<scp todir="${user}:${password}@host.example.com:${archives.destination}">
  <fileset refid="zipfiles.to.copy" />
</scp>

<!-- Build the command line for unzip - the idea here is to turn the local
     paths into the corresponding paths on the remote, i.e. to turn
     C:\path\to\zipfiles\file1.zip;C:\path\to\zipfiles\file2.zip... into
     /home/testuser/archives/file1.zip /home/testuser/archives/file2.zip

     For this to work there must be no spaces in any of the zipfile names.
-->
<pathconvert dirsep="/" pathsep=" " property="unzip.files" refid="zipfiles.to.copy">
  <map from="${archives}" to="${archives.destination}" />
</pathconvert>

<!-- execute the command.  Use the "-d" option to unzip so it will work
     whatever the "current" directory on the remote side -->
<sshexec host="host.example.com" username="${user}" password="${password}"
  command="/bin/sh -c '
    for zipfile in ${unzip.files}; do
      /usr/bin/unzip -d ${unzip.destination} $$zipfile ; done '" /> 
```

该`unzip`命令可以采用许多其他选项，有关完整详细信息，请参见其[手册页](http://linux.die.net/man/1/unzip)。例如，该`-j`选项将忽略 zip 文件中的任何目录层次结构，并将所有提取的文件直接放在目标目录中。并且`-o`会在不提示的情况下强制覆盖目标目录中的现有文件。

# java - 在 Grid-Graph 中查找空的地形矩形

> ID：12922158
> 
> 赞同：4
> 
> 时间：2012-10-16T19:33:37.727
> 
> 标签：java, algorithm

我游戏中的城市是随机生成的，但它是只能形成矩形的道路和十字路口的图形：

![在此处输入图像描述](../Images/47a5413907285892823a88dee4b9cd17.png)

可以看出，我的地形非常空旷。我想要做的是找到每个空矩形并存储在矩形列表中，形成很多。

![在此处输入图像描述](../Images/9a28a02b347db8acecafc1aa4543478d.png)

正如您在此插图中看到的那样，我填写了 3 个“地块”，并在 1 个中显示了由它构成的 3 个矩形。

我的数据结构是：

```
package com.jkgames.gta;

import android.graphics.Bitmap;
import android.graphics.RectF;

public class Intersection extends Entity
{
    Road topRoad;
    Road leftRoad;
    Road bottomRoad;
    Road rightRoad;
    Bitmap image;

    public Bitmap getImage() 
    {
        return image;
    }

    public void setImage(Bitmap image)
    {
        this.image = image;
    }

    public Intersection(RectF rect, Bitmap image)
    {
        setRect(rect);
        setImage(image);
    }

    public Road getTopRoad() 
    {
        return topRoad;
    }

    public void setTopRoad(Road topRoad)
    {
        this.topRoad = topRoad;
    }

    public Road getLeftRoad()
    {
        return leftRoad;
    }

    public void setLeftRoad(Road leftRoad)
    {
        this.leftRoad = leftRoad;
    }

    public Road getBottomRoad() 
    {
        return bottomRoad;
    }

    public void setBottomRoad(Road bottomRoad)
    {
        this.bottomRoad = bottomRoad;
    }

    public Road getRightRoad()
    {
        return rightRoad;
    }

    public void setRightRoad(Road rightRoad) 
    {
        this.rightRoad = rightRoad;
    }

    @Override
    public void draw(GraphicsContext c)
    {
        c.drawRotatedScaledBitmap(image, getCenterX(), getCenterY(),
                    getWidth(), getHeight(), getAngle());
    }

}

public class Road extends Entity
{
    private Bitmap image = null;
    private Intersection startIntersection;
    private Intersection endIntersection;
    private boolean topBottom;

    public Road(RectF rect, Intersection start, Intersection end,
            Bitmap image, boolean topBottom)
    {
        setRect(rect);
        setStartIntersection(start);
        setEndIntersection(end);
        setImage(image);
        setTopBottom(topBottom);
    }

    @Override
    public void draw(GraphicsContext c)
    {
        //Rect clipRect = c.getCanvas().getClipBounds();
        //c.getCanvas().clipRect(getRect());
        float sizeW;
        float sizeH;
        if(isTopBottom())
        {
            sizeW = getWidth();
            sizeH = (sizeW / image.getWidth()) * image.getHeight();
        }
        else
        {
            sizeW = getHeight();
            sizeH = (sizeW / image.getWidth()) * image.getHeight();

        }

        int numTiles = isTopBottom() ? (int)Math.ceil(getHeight() / sizeH) :
            (int)Math.ceil(getWidth() / sizeW);

        for(int i = 0; i < numTiles; ++i)
        {
            if(isTopBottom())
            {
                c.drawRotatedScaledBitmap(
                        image,
                        getRect().left + (sizeW / 2.0f),
                        (getRect().top + (sizeH / 2.0f)) + (sizeH * i), 
                        sizeW, sizeH, 0.0f);
            }
            else
            {
                c.drawRotatedScaledBitmap(
                        image,
                        getRect().left + (sizeH / 2.0f) + (sizeH * i),
                        getRect().top + (sizeH / 2.0f), 
                        sizeW, sizeH, (float)Math.PI / 2.0f);
            }

        }

    //  c.getCanvas().clipRect(clipRect);
    }

    public Bitmap getImage() 
    {
        return image;
    }

    public void setImage(Bitmap image) 
    {
        this.image = image;
    }

    public Intersection getStartIntersection()
    {
        return startIntersection;
    }

    public void setStartIntersection(Intersection startIntersection) 
    {
        this.startIntersection = startIntersection;
    }

    public Intersection getEndIntersection()
    {
        return endIntersection;
    }

    public void setEndIntersection(Intersection endIntersection) 
    {
        this.endIntersection = endIntersection;
    }

    public boolean isTopBottom()
    {
        return topBottom;
    }

    public void setTopBottom(boolean topBottom) 
    {
        this.topBottom = topBottom;
    }
} 
```

城市是道路和十字路口的列表。

是否有某种算法可以生成这些地块及其矩形？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:00:03.003

我想到的最简单的方法是使用洪水填充算法来建立您的区域列表。所以基本上

```
foreach square:
    if the square isn't part of a region:
        create a new empty region list
        add the square to it
        recursivly add all neighboring squares to the region 
```

最终结果将是您将拥有一个区域列表，然后您可以对这些区域进行任何操作（查看包含的任何方块是否有建筑物，为用户着色等）。

注意：要确定一个正方形是否是一个区域的一部分，我会在正方形数据结构中添加一个标记的标志或其他东西，这样当你开始时，你会检查并清除所有这些标志，然后当你添加一个正方形到您设置该标志的区域，当您想要检查一个正方形是否在一个区域中时，您需要做的就是检查是否设置了该标志。这样，您最终会使用线性时间算法来构建您的区域列表。

正如 Markus 在这里的评论中指出的那样，这个“标志”实际上可能是一个指向 Lot 对象的指针/引用，该对象包含你的方格列表，无论如何，这可能很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:53:08.883

```
for (int y = 0; y < height; y++)
for (int x = 0; x < width; x++) {
    if (x > 0 && squares[y][x].isConnectedTo(squares[y][x-1]) {
        // Connected from the left
        squares[y][x-1].getLot().addSquare(squares[y][x]);

        if (y > 0 && squares[y][x].isConnectedTo(squares[y-1][x]) {
            // Connected from both the left and above
            squares[y-1][x].getLot().mergeWith(squares[y][x].getLot());
        }
    }
    else if (y > 0 && squares[y][x].isConnectedTo(squares[y-1][x]) {
        // Connected from above
        squares[y-1][x].getLot().addSquare(squares[y][x]);
    }
    else {
        // Not connected from either
        createNewLot().addSquare(squares[y][x]);
    }
} 
```

*   `Lot.addSquare(…)`为地段添加一个正方形，并调用`setLot(…)`该正方形。
*   `Lot.mergeWith(…)`合并两个批次，如果它们不是同一批次，则重新分配分配给它们的方格。
*   `Square.isConnectedTo(…)`检查他们是否是邻居，并且两者之间没有道路。

您可以通过使用不[相交集数据结构来优化它](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)

# objective-c - NSUserDefault 注册的默认值初始显示在 NSMenuItem 绑定中

> ID：12922161
> 
> 赞同：2
> 
> 时间：2012-10-16T19:33:44.740
> 
> 标签：objective-c, macos, cocoa, nsuserdefaults, cocoa-bindings

为了使绑定到 NSUserDefault 键的 NSMenuItem(s) 显示注册的默认值，您需要执行的操作顺序是什么？

我正在注册默认值，但我的 NSMenuItems 没有显示我在启动应用程序时注册的默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:39:39.153

我花了大部分上午的时间来追查这个问题，而那里的大多数答案似乎都是零碎的，所以我想分享一下。

1）将您的菜单项绑定到：

*   共享用户默认值
*   控制器键：值
*   模型密钥路径：keyName（在本例中为 Deduplication_Target）

2) 在调用 awakeFromNib 之前注册您的默认值，我在 AppDelegate 的 + (void)initialize 方法中完成了它。（applicationDidFinishLaunching、(id)init、applicationWillFinishLaunching，这些都不起作用）

```
+ (void)initialize {
    [self setupDefaults];
} 
```

3）使用 NSNumbers 为 BOOL 值初始化您的默认字典，尽管那里的示例显示它们已初始化为 NSStrings：

```
NSString *const KEY_DEDUPLICATION_TARGET = @"Deduplication_Target";
NSString *const KEY_DEDUPLICATION_SOURCE = @"Deduplication_Source";
+ (void)setupDefaults {    
    NSDictionary* userDefaultsValuesDict = [NSDictionary dictionaryWithObjectsAndKeys: 
                                           [NSNumber numberWithBool:YES], KEY_DEDUPLICATION_TARGET, 
                                            [NSNumber numberWithBool:YES], KEY_DEDUPLICATION_SOURCE, 
                                            nil];

    // set them in the standard user defaults
    [[NSUserDefaults standardUserDefaults] registerDefaults:userDefaultsValuesDict];
} 
```

这为我解决了它。

供参考：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Concepts/NSUserDefaultsController.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Concepts/NSUserDefaultsController.html)

# php - Jquery 等使用鼠标移动内容块？

> ID：12922164
> 
> 赞同：0
> 
> 时间：2012-10-16T19:33:57.513
> 
> 标签：php, javascript, jquery, jquery-ui, web

所以基本上我在页面上有文本块，基本上只有大约 10 个使用 CSS 的相同大小的文本框。我希望能够订购这些 - 所以拖放一个。我可以自己编写后端排序代码 - 任何人都可以推荐去哪里进行前端拖放吗？我知道 jquery 可能是我最好的选择，但我从未使用过 javascript，所以如果已经为此创建了任何类型的代码，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:45:25.447

这是 jQueryUI 的可拖动和可放置：

[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

[http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)

他们有点可爱，但很可能不会做你想做的事。

下面是关于如何实现 HTML5 方式的拖放的非常简单的解释：

[http://www.w3schools.com/html/html5_draganddrop.asp](http://www.w3schools.com/html/html5_draganddrop.asp)

（它主要说服我实现自己的，而不是等待更好的 HTML5 拖放支持。）

这是旧浏览器的示例：

[http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx](http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx)

还有我不推荐的 draggable.js（及其 jQuery 端口）。

这些例子并没有真正做的东西包括几乎任何有用的东西。例如，如果您想定位对象的部分或对象之间的空格怎么办？您如何根据页面中发生的事情来制定动态目标。这一切都变得非常丑陋非常快。

很抱歉没有更简单的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:35:27.797

你是这个意思？[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

# iphone - Cocos2d - 拖动图像时遵循路径

> ID：12922170
> 
> 赞同：0
> 
> 时间：2012-10-16T19:34:32.717
> 
> 标签：iphone, ios, cocos2d-iphone

我正在尝试使用 cocos2d 构建一个游戏，其中用户能够沿着路径拖动对象到最终目标。我已经让拖放工作，但我不确定如何实现路径，以便当用户离开路径时它会死掉。

知道如何实现这一点，以便我可以拥有多个级别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:53:48.703

根据我对您的问题的理解，您根本不想进行拖放。而是将沿路径的移动作为一个动作，并使用用户的触摸来设置他们沿该动作的距离。这样（就像你用视频前后擦洗一样）用户可以沿着它的路径擦洗对象的动作。

首先，我会使用 CCBezierTo 或其他方式让您的对象沿着您想要的路径移动。当您对结果感到满意时，开始触摸操作。当用户触摸对象时，您想知道他们沿着路径有多远，0 是起点，1 是终点。然后将数字移近 1，越靠近触摸移动的端点，越靠近 0，越靠近起点。如果您的路径相当直，您可能只需简单计算触摸在起点和终点之间的直线上的位置。如果它是一条复杂的曲线，说绕圈子，您将需要做一些艰苦的工作/触发！

然后随着触摸的移动，您需要将对象的位置更新到路径上的新位置。假设您已经计算出触摸现在沿着您的路径在 0.75，您现在需要锻炼对象应该在 0.75 * 持续时间的位置。您可能需要为您的操作扩展或添加一个类别，以允许您设置给定经过值的位置。

希望这会引导您朝着可能的方向前进！

# c# - 如何调整某些 ListView 列的大小与 ListView 的剩余大小成比例

> ID：12922173
> 
> 赞同：1
> 
> 时间：2012-10-16T19:34:49.123
> 
> 标签：c#, winforms, listview

在计算任何静态宽度列宽后，我试图根据剩余大小仅重新调整 ListView 的某些列的大小。例如，我不希望列（例如数量、价格等）调整大小，但我希望通常具有更宽数据（例如名称、描述）的列变得更宽。这是我在下面尝试使用的方法，但是它不起作用。

顺便说一句，我在 ListView 上触发 ClientSizeChanged 事件时调用此方法。不确定这是否相关。

```
 public static void ResizeListViewColumns(ListView lv, List<int> fixedColumnIndexes, List<int> nonFixedColumnIndexes)
    {
        int lvFixedWidth = 0;
        int lvNonFixedWidth = 0;
        if (fixedColumnIndexes.Count + nonFixedColumnIndexes.Count != lv.Columns.Count)
        {
            throw new Exception("Number of columns to resize does not equal number of columns in ListView");
        }
        else
        {
            // Calculate the fixed column width
            // Calculate the non-fixed column width
            // Calculate the new width of non-fixed columns by dividing the non-fixed column width by number of non-fixed columns
            foreach (var fixedColumn in fixedColumnIndexes)
            {
                lvFixedWidth += lv.Columns[fixedColumn].Width;
            }

            foreach (var nonFixedColumn in nonFixedColumnIndexes)
            {
                lvNonFixedWidth += lv.Columns[nonFixedColumn].Width;
            }

            int numNonFixedColumns = nonFixedColumnIndexes.Count;
            foreach (var newNonFixedColumn in nonFixedColumnIndexes)
            {
                lv.Columns[newNonFixedColumn].Width = lvNonFixedWidth / numNonFixedColumns;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:51:25.633

像这样的东西应该适合你......在我的示例中，我将每个固定列的“Tag”属性设置为字符串“fixed”，而不是保留固定和未固定索引的列表。

```
int fixedWidth = 0;
        int countDynamic = 0;

        for (int i = 0; i < listView1.Columns.Count; i++)
        {
            ColumnHeader header = listView1.Columns[i];

            if (header.Tag != null && header.Tag.ToString() == "fixed")
                fixedWidth += header.Width;
            else
                countDynamic++;
        }

        for (int i = 0; i < listView1.Columns.Count; i++)
        {
            ColumnHeader header = listView1.Columns[i];

            if (header.Tag == null)
                header.Width = ((listView1.Width - fixedWidth) / countDynamic);
        } 
```

# c++ - 从字符串数组中获取字符

> ID：12922177
> 
> 赞同：-1
> 
> 时间：2012-10-16T19:34:59.663
> 
> 标签：c++, arrays, string, char

我有一个字符串数组和一个整数数组。通常当我想从我使用的字符串中获取某个字符时：

```
string[char_position]; 
```

但是当我有两个数组时，获取 char 的相同方式不起作用：

```
string[i][char_position[i]]; 
```

如何从字符串数组中获取某些字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:36:20.707

试试这样：

```
string[i][char_position]; 
```

你不应该下标 char_position。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:49:26.913

`string[i][char_position[i]];`表示指令：

*   从索引为 i的**数组**中获取**INTEGER**`char_position`
***   获取第一个`i`字符串中的字符，在第一步得到的**位置****

 **仅当 char_position 是 ARRAY 而不是 SCALAR VARIABLE 时，这才是有效且正确的。

另一方面，如果 char_position 是一个标量变量，那么：

string[i][char_position] 是在字符数组数组中检索第 th 字符串中第`char_position`th 字符的方式`i``string`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:37:06.413

在第一个示例中，您使用`char_position`as`int`但在第二个示例中，您将其用作`array`. 如果您在两种情况下表示相同的变量，那么其中任何一种显然都是错误的。但是看起来你想要访问`j`字符串的`i`字符。如果是这样的话

```
string[i][j]; // j is position of char in string[i] 
```**

# c# - 针对多个 if 条件检查 asp.net 文本框值

> ID：12922179
> 
> 赞同：0
> 
> 时间：2012-10-16T19:35:17.680
> 
> 标签：c#, .net-2.0, asp.net-2.0

我的网站是用 ASP.NET 2.0 和 C# 构建的。我有一个名为 tbCode 的文本框，用户可以在其中输入代码。我正在尝试通过单击按钮检查输入的值与后面代码中的多个值。

这是我到目前为止的标记。

```
 protected void btUpdate_Click(object sender, EventArgs e)
{

    if ((this.tbcode.Text.Trim().ToUpper() != "AB12") ||(this.tbcode.Text.Trim().ToUpper() != "DE14") || (this.tbcode.Text.Trim().ToUpper() != "XW16"))
    {
        lbmessage.Text = "Invalid Promo code. Please enter again";
    }
    else if ((this.tbcode.Text.Trim().ToUpper() == "AB12") || (this.tbcode.Text.Trim().ToUpper() == "DE14") || (this.tbcode.Text.Trim().ToUpper() == "XW16"))
    {
        Order.Shipping.Cost = 0;
        this.lShipping.Text = Order.Shipping.Cost.ToString("c");
        this.lSubtotal.Text = Order.Subtotal.ToString("c");
        this.lTotal.Text = Order.TotalCost.ToString("c");
        Order.PomoCode = this.tbcode.Text.Trim().ToUpper();
        lbmessage.Text = "Promo Code Applied.";
    }
    else
    {
        this.lShipping.Text = Order.Shipping.Cost.ToString("c");
        this.lSubtotal.Text = Order.Subtotal.ToString("c");
        this.lTotal.Text = Order.TotalCost.ToString("c");

    }

} 
```

当我按下按钮时，它总是说无效代码。不知道我在哪里犯了错误。如果我只检查一个值而不是 3，它会完美运行。

感谢并感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:55:29.127

这可能是您想要做的：

```
protected void btUpdate_Click(object sender, EventArgs e)
{
    string tbcodeValue = this.tbcode.Text.Trim().ToUpper();

    string[] validCodes = new string[] { "AB12", "DE14", "XW16" };
    if (!validCodes.Contains(tbcodeValue))
    {
        lbmessage.Text = "Invalid Promo code. Please enter again";
    }
    else 
    {
        Order.Shipping.Cost = 0;
        this.lShipping.Text = Order.Shipping.Cost.ToString("c");
        this.lSubtotal.Text = Order.Subtotal.ToString("c");
        this.lTotal.Text = Order.TotalCost.ToString("c");
        Order.PomoCode = tbcodeValue;
        lbmessage.Text = "Promo Code Applied.";
    }
} 
```

首先，你到处打电话`this.tbcode.Text.Trim().ToUpper()`。这确实使您的代码变得混乱并且难以阅读。将其分配给变量不仅使代码更清晰，而且避免了一遍又一遍地执行所有这些字符串操作函数。

接下来，您的意图似乎是说，“如果文本框值不是这些值中的任何一个，则运行一些代码说它是无效的。最简单的方法是将所有有效值放入一些容器中排序并查看它是否包含您感兴趣的值。您的下一个代码块基本上是“如果它是有效值之一”。所以如果它*确实*包含字符串，那么它是有效的。至于你的 else ，我不知道它的意图是什么。要么字符串无效，要么有效。我没有看到任何第三种情况，所以我只是删除了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:37:05.393

您需要在第一个 if 语句中将 || 更改为 &&。否则你总是会落入那个街区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:39:12.700

试试这个：

```
 if ((this.tbcode.Text.Trim().ToUpper() != "AB12") && (this.tbcode.Text.Trim().ToUpper() != "DE14") && (this.tbcode.Text.Trim().ToUpper() != "XW16"))
    {
        lbmessage.Text = "Invalid Promo code. Please enter again";
    }
    else if ((this.tbcode.Text.Trim().ToUpper() == "AB12") || (this.tbcode.Text.Trim().ToUpper() == "DE14") || (this.tbcode.Text.Trim().ToUpper() == "XW16"))
    {
        Order.Shipping.Cost = 0;
        this.lShipping.Text = Order.Shipping.Cost.ToString("c");
        this.lSubtotal.Text = Order.Subtotal.ToString("c");
        this.lTotal.Text = Order.TotalCost.ToString("c");
        Order.PomoCode = this.tbcode.Text.Trim().ToUpper();
        lbmessage.Text = "Promo Code Applied.";
    }
    else
    {
        this.lShipping.Text = Order.Shipping.Cost.ToString("c");
        this.lSubtotal.Text = Order.Subtotal.ToString("c");
        this.lTotal.Text = Order.TotalCost.ToString("c");

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T20:32:26.673

你也可以使用 switch;case; 堵塞。

```
String testtext = this.tbcode.Text.Trim().ToUpper();

switch(testtext)
{
    case "AB12":
        // Do stuff for this case
        break;
    case "Text2":
        // Do stuff for this case
        break;
    default:
        // anything that fails all above tests goes here
        break;
} 
```

只需确保在每种情况下都中断、返回或继续，否则您将收到编译错误。默认值也需要排在最后。

# css - 引导列加或减装订线宽度

> ID：12922180
> 
> 赞同：1
> 
> 时间：2012-10-16T19:35:22.843
> 
> 标签：css, twitter-bootstrap, grid

我将 Twitter Bootstrap 与 lesscss 一起使用。`.spanX`我喜欢网格系统，但我如何定义一个类来添加或减去像`.span3`or这样的类的 gutterwidth `.span11`？像这样的东西：

```
.addgutter {
    width: (@gridColumnWidth * @columns) + (@gridGutterWidth * (@columns - 1)) + @gridGutterWidth; 
}
.subtractgutter{
    width: (@gridColumnWidth * @columns) + (@gridGutterWidth * (@columns - 1)) - @gridGutterWidth; 
} 
```

但这是整个站点宽度添加/减去排水沟宽度。我需要它，以便自动设置列宽加或减装订线宽度。其实我对less不是很熟悉，我用了不到三个月。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:11:07.687

您可以通过下面给出的链接根据您的要求自定义 Twitter Bootstrap 的 CSS。我希望这有帮助。

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

# haskell - 如何在需要类型构造函数而不是具体类型的类实例中统计类约束？

> ID：12922187
> 
> 赞同：16
> 
> 时间：2012-10-16T19:35:55.213
> 
> 标签：haskell, type-constructor

我目前在[*Learn you a Haskell*](http://learnyouahaskell.com/chapters)[的第 8 章](http://learnyouahaskell.com/making-our-own-types-and-typeclasses)，我已经到达了关于typeclass 的部分。在上述部分中，作者给出了如何使不同类型成为类实例的示例（例如，自定义类型等）。看到这一点，我决定（为了好玩和练习）尝试为该类型实现一个实例。当然，所有这些都忽略了。[](http://learnyouahaskell.com/chapters)*`Functor``Maybe``Tree`[`Data.Set`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Set.html#t:Set)[`Data.Set.map`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Set.html#v:map)*

 *实际实例本身非常简单，我将其写为：

```
instance Functor Set.Set where
  fmap f empty = Set.empty
  fmap f s = Set.fromList $ map f (Set.elems s) 
```

但是，由于我碰巧使用了这个函数，[`fromList`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Set.html#v:fromList)这会引入一个类约束，调用`Set`to be中使用的类型`Ord`，正如编译器错误所解释的那样：

```
Error occurred
ERROR line 4 - Cannot justify constraints in instance member binding
*** Expression    : fmap
*** Type          : Functor Set => (a -> b) -> Set a -> Set b
*** Given context : Functor Set
*** Constraints   : Ord b 
```

请参阅：[**实时示例**](http://codepad.org/vw3tYjKV)

我尝试对实例施加约束，或向 中添加类型签名`fmap`，但均未成功（两者也是编译器错误。）

在这种情况下，如何实现和满足约束？有没有可能的方法？

提前致谢！:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T19:38:53.607

不幸的是，标准类*没有*简单的方法来做到这一点。`Functor`这就是为什么默认情况下`Set`不附带`Functor`实例的原因：您不能编写实例。

这是一个问题，并且有一些建议的解决方案（例如`Functor`以不同的方式定义类），但我不知道是否就如何最好地处理这个问题达成共识。

`Functor`我相信一种方法是使用[约束类型](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/constraint-kind.html)重写类，以具体化新类实例`Functor`可能具有的附加约束。这将让您指定`Set`必须包含类中的`Ord`类型。

另一种方法仅使用多参数类。我只能找到关于在`Monad`课堂上执行此操作的文章，但制作`Set`part`Monad`与制作`Functor`. 它被称为[Restricted Monads](http://okmij.org/ftp/Haskell/types.html#restricted-datatypes)。

在这里使用多参数类的基本要点似乎是这样的：

```
class Functor' f a b where
  fmap' :: (a -> b) -> f a -> f b

instance (Ord a, Ord b) => Functor' Data.Set.Set a b where
  fmap' = Data.Set.map 
```

本质上，您在这里所做的只是在类中*创建*`Set`类型。然后，当您编写该类的实例时，这可以让您限制这些类型可以是什么。

此版本`Functor`需要两个扩展名：`MultiParamTypeClasses`和`FlexibleInstances`. （您需要第一个扩展才能定义类，第二个扩展才能定义实例`Set`。）

[Haskell：不是 Functor（或不可遍历）的 Foldable 示例？](https://stackoverflow.com/questions/8359115/haskell-an-example-of-a-foldable-which-is-not-a-functor-or-not-traversable)对此有很好的讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T15:18:51.587

这是不可能的。这门课的目的`Functor`是，如果你有`Functor f => f a`，你可以用`a`你喜欢的任何东西替换 。该课程不允许限制您只返回这个或那个。由于`Set`要求它的元素满足某些约束（实际上这不是实现细节，而是集合的基本属性），它不满足`Functor`.

正如另一个答案中提到的那样，开发这样一个类的方法`Functor`确实会以这种方式限制你，但它确实是一个不同的类，因为它为类的用户提供了更少的保证（你不能将它与任何你想要的类型参数），以换取适用于更广泛的类型。也就是说，毕竟，定义类型属性的经典权衡：您想要满足的类型越多，它们必须被迫满足的越少。

（另一个有趣的例子是`MonadPlus`类。特别是，对于每个实例，`MonadPlus TC` 您都可以创建一个实例`Monoid (TC a)`，但您不能总是反过来。因此，`Monoid (Maybe a)`实例与实例不同`MonadPlus Maybe`，因为前者可以限制`a`但后者不能。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T19:03:33.710

[You can do this using a CoYoneda Functor.](https://stackoverflow.com/a/17184834/3176773)

```
{-# LANGUAGE GADTs #-}

data CYSet a where
    CYSet :: (Ord a) => Set.Set a -> (a -> b) -> CYSet b

liftCYSet :: (Ord a) => Set.Set a -> CYSet a
liftCYSet s = CYSet s id

lowerCYSet :: (Ord a) => CYSet a -> Set.Set a
lowerCYSet (CYSet s f) = Set.fromList $ map f $ Set.elems s

instance Functor CYSet where
  fmap f (CYSet s g) = CYSet s (f . g)

main = putStrLn . show
  $ lowerCYSet
  $ fmap (\x -> x `mod` 3)
  $ fmap abs
  $ fmap (\x -> x - 5)
  $ liftCYSet $ Set.fromList [1..10]
-- prints "fromList [0,1,2]" 
```*

# php - 具有“可选”必填字段的实体。取决于 UI 中使用的表单

> ID：12922189
> 
> 赞同：0
> 
> 时间：2012-10-16T19:35:58.840
> 
> 标签：php, symfony, doctrine-orm

我在 Doctrine 和 Symfony 2 中有一个公司实体。在我的实体中，我使用 Doctrine 注释根据需要声明了名称、街道、邮编、城市、国家等字段。

现在，在用户体验方面，我希望人们能够快速添加新公司。

例如，当添加一个项目并且用户需要添加尚未在数据库中的新公司时，我希望他们只输入公司名称并在他们的仪表板中自动创建一个任务，“COMPLETE COMPANY X”。

这样，他们可以专注于他们的主要任务，即添加一个新项目并稍后填写所需的公司字段。但好在公司现在在数据库中有一个 ID 和记录，我可以用它来链接到项目等......

你将如何解决这个问题？在我当前的设置中，必填字段设置在模型中，因此数据库字段设置为 NOT NULL。

我是否应该创建一个仅具有必需属性 Name 的类 LightCompany，然后创建一个类 ExtendedCompany，该类使用所有必需字段扩展 LightCompany？

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:33:46.170

您可以根据提交的数据设置表单验证组。请参阅[此处](http://symfony.com/doc/2.0/book/forms.html#validation-groups)了解更多信息。

# google-analytics-api - 如何将 nthWeek 和 nthMonth 转换为日期？

> ID：12922192
> 
> 赞同：0
> 
> 时间：2012-10-16T19:36:09.753
> 
> 标签：google-analytics-api

我正在尝试使用 Google Analytics API 获取过去 X 年的每周和每月访问者总数。我设置：

```
metrics=ga:visitors
dimensions=ga:nthWeek (or nthMonth) 
```

它返回我想要的数据：

```
0 week : 100 visitors
1 week : 200 visitors
2 week : 300 visitors 
```

`0`我只希望它显示为而不是星期`01/01/2012`。如何将第 N 周（或月）转换为日期？

我试过了：

*   作为指标传递`ga:date`（这将是一个合乎逻辑的事情，类似于它在 SQL 中的完成方式），但它不会将其识别为有效的指标。
*   `ga:date`作为第二个维度传递可以防止每周分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T16:33:28.190

你没有提到你正在使用什么语言，所以我不知道你可以使用什么样的日期争论界面，但`ga:week,ga:year`应该为你提供一年中可以插入的一周并允许你适当地建立日期。在 PHP 中，它可能类似于以下内容：

```
<?php
// assuming use of the official PHP API for Google services, and
// that you've appropriately initialized the connection, and that
// you've chosen to "$client->setUserObjects(true)", and that you've
// initialized the necessary variables...
$results = $service->data_ga->get($analytics_id, $start_date, $end_date, 'ga:visitors',
    array('dimensions' => 'ga:week,ga:nthWeek,ga:year'));
$columns = array();
foreach ($results->columnHeaders as $headidx => $col) {
    $columns[$col->name] = $headidx;
}
$traffic = array();
foreach ($results->rows as $idx => $week) {
    $date = new DateTime;
    $date->setISODate($week[$columns['ga:year']], $week[$columns['ga:week']]);
    $traffic[$week[$columns['ga:nthWeek']]] = array('date' => $date, 'visitors' => $week[$columns['ga:visitors']], 'visits' => $week[$columns['ga:visits']], 'pageviews' => $week[$columns['ga:pageviews']]);
}
ksort($traffic);

// $traffic now holds a sorted array of your week by week traffic, with the full
// date in the DateTime object that you can access and format however you please
?> 
```

# java - 范围内的随机数

> ID：12922194
> 
> 赞同：3
> 
> 时间：2012-10-16T19:36:14.217
> 
> 标签：java, ios, random

我有一个我正在为 iOS 和 Android 编写的应用程序。在启动时，我试图获得 1 到 6 之间的随机数。

iOS（目标-C）：

```
int random = rand() % (6 - 1) + 1; 
```

安卓（Java）：

```
Random random = new Random();
int num = random.nextInt(6)+1; 
```

在这两种情况下，它们每次都返回 3。

从我读过的其他问题来看，人们遇到了同样的问题，因为他们正在遍历随机数并不断重新实例化 Random 对象。但我只想要一个随机数，所以我只实例化一次。

那么，我怎样才能获得这些代码中的任何一个来获得数字 1-6 而不仅仅是 3？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:41:13.700

对于 Objective-C 部分，我可以告诉你，你必须随机播种，如下所示：

```
srand(time(0)); // seed it using the current time 
```

对于 Java 部分，`new Random()`构造函数会自动将其植入桌面应用程序的默认 JVM 中，[但不会在 Android 上](http://developer.android.com/reference/java/util/Random.html#Random%28%29)播种。在 Android 上，它使用默认种子值。

```
Random rand = new Random(System.nanoTime()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T20:43:11.543

在 Objective-C 中，您可以交替使用`arc4random()`不需要种子的推荐函数。你会像这样使用它：

```
int random = (arc4random() % 5) + 1; 
```

这个函数的一个巨大好处`rand()`是它的范围是 的两倍`rand()`，因此允许“更随机”的数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T22:27:25.273

最好的解决方案是尽可能使用`arc4random_uniform`，它在 iOS 4.3 及更高版本中可用。它消除了通常由 mod 运算符引入的偏差。

```
+ (u_int32_t)randomInRangeLo:(u_int32_t)loBound toHi:(u_int32_t)hiBound {
    int32_t   range = hiBound - loBound + 1;
    return loBound + arc4random_uniform(range);
} 
```

请注意，不需要播种，它会产生加密质量的随机数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T19:40:32.303

不确定 Android 上的 Random，但在其他情况下，您可能希望为 Random 实例播种一些相当独特的东西，例如系统时间。

`Random r = new Random(System.currentTimeMillis());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:41:22.363

我尝试了 Java 部分，它对我来说工作正常，但您可以尝试使用时间作为种子来实例化 Random：

```
 java.util.Date d = new java.util.Date();
    Random random = new Random(d.getTime());
    int num = random.nextInt(6)+1;
    System.out.println(num); 
```

# r - 是否可以在 geom_bar 上具有固定宽度

> ID：12922195
> 
> 赞同：1
> 
> 时间：2012-10-16T19:36:14.963
> 
> 标签：r, ggplot2

我正在使用一堆不同的数据框，这些数据框可能有多个变量或单个变量：

我的数据框如下所示：x

```
Team         Grade
Football      10 
```

当我这样做时，条形尺寸很大。我想要一个固定大小，以便在有一两行数据时看起来不错：

```
ggplot(x, aes(Team, Grade, group=Team)) + geom_bar(aes(fill=Team)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:46:39.760

如果您的数据如下所示：

```
df <- data.frame(Team=gl(4, 1), Grade=sample(1:4)) 
```

您可以按如下方式指定栏的宽度：

```
ggplot(df, aes(x=Team, y=Grade, fill=Team)) + geom_bar(width=0.2) 
```

这给出了这个情节：

![在此处输入图像描述](../Images/7a6045ee3c928ef214fb7b9e809416a8.png)

一个类似的数据集，但只有一个团队，由下式给出：

```
ggplot(subset(df, Team==1), aes(x=Team, y=Grade, fill=Team)) + geom_bar(width=0.2) 
```

![在此处输入图像描述](../Images/67abd99a413500490cfa7d4f634b05d7.png)

我认为这看起来不错。

如果您更关心只有一个（或几个）Team 的情况，并且条形图都位于情节的顶部，您可以设置 y 限制：

```
+ scale_y_continuous(limits=c(0, 4)) 
```

![在此处输入图像描述](../Images/378531a1363d199ffb117dcc0e8a57e4.png)

# sql - 简单的更新语句，以便为所有行分配不同的值

> ID：12922202
> 
> 赞同：3
> 
> 时间：2012-10-16T19:36:42.863
> 
> 标签：sql, sql-server

我正在尝试将一个表中的列设置为随机外键以进行测试。我尝试使用以下查询

```
update table1 set table2Id = (select top 1 table2Id from table2 order by NEWID()) 
```

这将随机获得一个 table2Id 并将其分配为 table1 中每一行的外键。这几乎是我想要的，但我希望每一行都获得不同的 table2Id 值。

我可以通过遍历 table1 中的行来做到这一点，但我知道有一种更简洁的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T20:33:15.093

在一些测试表上，我的最终计划如下所示。

![原计划](../Images/4dc1345b4f6d790a38f5cd9e5dafc4d8.png)

它只计算一次结果并将其缓存在 sppol 中，然后重放该结果。您可以尝试以下操作，以便 SQL Server 将子查询视为相关的并且需要重新评估每个外部行。

```
UPDATE table1
SET    table2Id = (SELECT TOP 1 table2Id
                   FROM   table2
                   ORDER  BY Newid(),
                             table1.table1Id) 
```

For me that gives this plan without the spool.

![新计划](../Images/c94ec78b874a7d100dda44b587b1fcb5.png)

It is important to correlate on a unique field from `table1` however so that even if a spool is added it must always be rebound rather than rewound (replaying the last result) as the correlation value will be different for each row.

If the tables are large this will be slow as work required is a product of the two table's rows (for each row in `table1` it needs to do a full scan of `table2`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:40:42.823

I'm having another go at answering this, since my first answer was incomplete.

As there is no other way to join the two tables until you assign the `table2_id` you can use `row_number` to give a temporary key to both `table1` and `table2`.

```
with
 t1 as (
  select row_number() over (order by table1_id) as row, table1_id
  from table1 )
,
t2 as (
  select row_number() over (order by NEWID()) as row, table2_id 
  from table2 )

update table1
set table2_id = t2.table2_id
from t1 inner join t2
on t1.row = t2.row

select * from table1 
```

SQL Fiddle 对其进行测试：[http ://sqlfiddle.com/#!6/bf414/12](http://sqlfiddle.com/#!6/bf414/12)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:36:38.277

Broke down and used a loop for it. This worked, although it was very slow.

```
Select *
Into   #Temp
From   table1

Declare @Id int

While (Select Count(*) From #Temp) > 0
Begin

    Select Top 1 @Id = table1Id From #Temp

    update table1 set table2Id = (select top 1 table2Id from table2 order by NEWID()) where table1Id = @Id

    Delete #Temp Where table1Id = @Id

End
drop table #Temp 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T19:39:51.120

我将假设基于前 1 的 MS SQL：

```
update table1 
set table2Id = 
  (select top 1 table2Id from table2 tablesample(1 percent)) 
```

（抱歉，未测试）

# c# - 如何在没有表单框架的情况下显示文本或任何内容？

> ID：12922210
> 
> 赞同：-4
> 
> 时间：2012-10-16T19:37:09.190
> 
> 标签：c#

例如，在第二台显示器上，我想显示我在文本框中编写的文本，但没有表单框架，只有黑色背景和白色字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:50:20.080

您可以制作一个`Form`透明的（我假设您正在使用 WinForms）。

*   将`BackColor`表单的 设置为将用作透明颜色的某种颜色（例如 Color.Red）。
*   设置`TransparencyKey`为相同的颜色。
*   设置`FormBoderStyle`为`None`

或者您可以为背景赋予任何颜色而不使其透明。只是不要定义`TransparencyKey`. 重要的部分是将 设置`FormBoderStyle`为`None`。这不仅隐藏了边框，还隐藏了标题栏以及表单图标和控制框。

然后`Label`在该表单上放置所需文本。就是这样。

# grails - Grails 清洁不起作用

> ID：12922215
> 
> 赞同：2
> 
> 时间：2012-10-16T19:37:25.013
> 
> 标签：grails, grails-plugin, grails-2.0

我正在使用 Grails -2.0.1，在尝试运行应用程序时，我发现 NoClassDefFoundError ：

错误 2012-10-16 15:24:25,301 [http-bio-8080-exec-9] ERROR errors.GrailsExceptionResolver - NoClassDefFoundError 在处理请求时发生：[GET] /workstation/track/computerName/login/MacOSX/true/username

无法初始化类工作站.server.TrackController。Stacktrace 如下：消息：创建名为“workstation.server.TrackController”的 bean 时出错：bean 实例化失败；嵌套异常是 java.lang.NoClassDefFoundError: 无法初始化类工作站.server.TrackController Line | 方法->> 886 | java.util.concurrent.ThreadPoolExecutor$Worker 中的 runTask

* * *

| 908 | 运行 '' ^ 680 | 跑 。. 在 java.lang.Thread

我无法弄清楚这个错误我是否尝试过执行 grails -clean（希望再次运行）。原来清洁不起作用

错误：plugin-list-grailsCentral.xml:29227:22：XML 文档结构必须在同一实体内开始和结束。另外，在 grails 目录中没有找到这个 XML。

任何线索任何人？谁能帮我解释一下为什么清洁不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:39:44.877

尝试在清理后删除 .grails 目录。这可以解决很多问题，尤其是在插件方面。

# php - PHP未设置嵌套数组的部分

> ID：12922217
> 
> 赞同：2
> 
> 时间：2012-10-16T19:37:27.647
> 
> 标签：php, arrays, unset

试图处理一个数组并在更大的数组集中删除一个特定的关联数组。我现在拥有的代码可以在 for 循环中本地删除特定部分，但不会影响原始`$cursor`数组。

```
foreach($cursor as $key) {

    foreach($key as $value => $k){

        if ($value == 'user'){

            unset($k['confinfo']);
        }
    }   
} 
```

这是一个全局变量问题吗？如何取消设置原始变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:38:56.807

通过引用迭代原始数组：

```
foreach($cursor as &$key) // added & 
```

重要的是要注意，无论何时执行此操作，最好*使用*循环`unset`来破坏引用：

```
foreach($cursor as &$key) {
    // ...
}
unset($key); 
```

就我个人而言，我觉得这有点难看（与 PHP 课程相当），但这样您就消除了`$key`以后重用名称并导致各种“有趣”效果的风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T19:52:55.957

问题是`$k`您进入循环的不是`$cursor`包含的原始数组，它只是一个副本，一旦循环进入下一轮就会被销毁。要真正从您那里删除`confinfo`索引，`$cursor`您需要开始`$cursor`并参考您的工作。

代替

```
unset($k['confinfo']); 
```

和

```
unset($cursor[$key][$value]['confinfo']); 
```

它不像其他答案那么短，但它更好地显示了正在发生的事情，因此更容易在以后进行调试和扩展。

# html - CSS IE6 案例 - 内部 div 不适合 100%

> ID：12922218
> 
> 赞同：0
> 
> 时间：2012-10-16T19:37:31.723
> 
> 标签：html, css, internet-explorer-6

我有一个大容器（div）和一个标题 div。它应该适合容器 100% 的宽度。它确实如此，无处不在，而不是 IE6（甚至在 IE7 中也是如此）。

HTML 代码：

```
<body>
   <header>
      <table summary="Displaying something">
         <tr class="first-row">
            <th>Fdsfdsf:</th>
            <td>fdjsklf</td>
         </tr>
         <tr>
            <th>dfdsfdsf:</th>
            <td>vcxvcx</td>
         </tr>
         <tr>
            <th>FDSfjdsklf</th>
            <td>FDsjfkdsj</td>
         </tr>
      </table>
   </header>
</body> 
```

和 CSS：

```
* {
    margin:                 0;
    padding:                0;
}
html {
    font:                   62.5% verdana, geneva, sans-serif;
    line-height:            1.125em;
    background-color:       silver;
    text-align:             center;
}
body {
    background-color:       white;
    width:                  79%;
    min-width:              1024px;
    max-width:              1920px;
    margin:                 3% auto;
    text-align:             left;
}
header {
    padding:                1em;
    border-bottom:          1px solid silver;
    text-align:             center;
}
header table {
    margin:                 0 auto;
}
header table tr {
    font-size:              0.8em;
}
header table .first-row {
    font-size:              1em;
}
header table th {
    font-weight:            normal;
    padding:                0 10px 0 0;
    text-align:             right;
}
header table .first-row th {
    font-weight:            bold;       
}
header table .first-row td, header table .first-row th {
    border-bottom:          1px dotted silver;
} 
```

对不起，代码的长度。为了检查标题大小，我添加了底部边距。它非常适合外部容器的左侧。由于标题没有在文件中设置宽度，因此它也应该适合外部 div 到右侧。但是，右侧存在间隙。边框的末端距离右侧有一点点（大约 20px），所以它太短了。

你能看出问题吗？我尝试了一切，唯一有效的是在标题中设置宽度：100%。然而，由于填充它在其他浏览器中太长了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:40:10.513

如果将 100% 添加到`header`作品中，您可以使用：

```
header {
    padding:                1em;
    border-bottom:          1px solid silver;
    text-align:             center;
    width:                  100%;
    box-sizing:             border-box; /* that's the magic */
} 
```

[**由于box-sizing**](http://paulirish.com/2012/box-sizing-border-box-ftw/)的强大功能，在以后的浏览器中，填充将包含在总长度中。

* * *

正如他们已经在评论中指出的那样，[除非您住在中国](http://www.ie6countdown.com/)，否则您可能会忽略 IE7 及以下版本。

# node.js - Node.js + Cluster :: 在不停机的情况下重启工人？

> ID：12922219
> 
> 赞同：5
> 
> 时间：2012-10-16T19:37:33.137
> 
> 标签：node.js

出于我会在这里轻而易举的原因，我想让集群（在 node.js 中）启动的工作人员在重新启动之前每个工作 1 小时。

需要注意的是，我需要零停机时间。因此，简单地对每个 worker 执行 destroy() 是不可接受的，因为它会关闭集群，直到 worker 重新启动。

这是我的基本代码：

```
if(cluster.isMaster) {
    for(var i=0; i<2; i++)
    {
        cluster.fork();
    }
    return;
}
require('./api').startup(settings, process.argv, function(error, api){
    if(error)
    {
        console.log('API failed to start: '+error);
    }
    else 
    {
        console.log('API is running');
    }
}); 
```

api.js 脚本实现 express 以启动一个非常标准的 RESTful JSON API。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T15:41:54.143

我最终这样做的方式是确保我至少有 2 个工作人员在运行，然后一次只重新启动一个。

这段代码会自动重启通过 cluster.worker.destroy() 自杀的worker

```
cluster.on('exit', function(worker, code, signal) {
  if (worker.suicide === true) {
    console.log(new Date()+' Worker committed suicide');
    cluster.fork();
  }
}); 
```

从那里开始，通过 setTimeout() （或您希望使用的任何其他条件）让每个工人自杀是一件简单的事情。我的方法实际上是让主人杀死工人：

```
function killWorker(worker)
{
    return function() {
        worker.destroy();  
    };
}

// This should be run on cluster.isMaster only
function killWorkers()
{
    var delay = 0;
    for (var id in cluster.workers) {
        var func = killWorker(cluster.workers[id]);
        if(delay==0)
            func();
        else
            setTimeout(func, delay);
        delay += 60000 * 5;// 5 minute delay, inserted to give time for each worker to re-spool itself
    }
} 
```

如您所见，这在重新启动工作人员之间插入了 5 分钟的延迟，从而使每个工作人员有足够的时间重新启动自己——这意味着永远不应该出现所有工作人员都停机的情况。

# javascript - 谷歌在距离计算器中映射当前位置

> ID：12922227
> 
> 赞同：0
> 
> 时间：2012-10-16T19:38:07.263
> 
> 标签：javascript, maps

我有一个小型网络应用程序，可让您使用谷歌地图计算 2 点之间的距离。

我想获取用户当前位置并将其标记在地图上，而不是预先定义地图中心（我在当前代码中这样做）。

作为一个 JS 菜鸟，有没有人可以编辑代码来帮助我获得这个功能？

谢谢！

```
 <html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">

    var directionDisplay;
    var map;

function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var copenhagen = new google.maps.LatLng(55.6771, 12.5704);
    var myOptions = {
        zoom:12,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: copenhagen
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);
    }

    var directionsService = new google.maps.DirectionsService();

    function calcRoute() {
    var start = document.getElementById("start").value;
    var end = document.getElementById("end").value;
    var distanceInput = document.getElementById("distance");

    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
            distanceInput.value = response.routes[0].legs[0].distance.value / 1000;
        }
    });
    }

    var showPosition = function (position) {
    var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    // Do whatever you want with userLatLng.
}
navigator.geolocation.getCurrentPosition(showPosition); 
    </script>

    <title>Distance Calculator</title>

    <style type="text/css">

            body {
                font-family:Helvetica, Arial;
            }
            #map_canvas {
                height: 50%;
            }
    </style>
    </head>
    <body>

    <body onload="initialize()">
    <p>Enter your current location and desired destination to get the distance</p>
        <div>
            <p>
                <label for="start">Start: </label>
                <input type="text" name="start" id="start" />

                <label for="end">End: </label>
                <input type="text" name="end" id="end" />

                <input type="submit" value="Calculate Route" onclick="calcRoute()" />
            </p>
            <p>
                <label for="distance">Distance (km): </label>
                <input type="text" name="distance" id="distance" readonly="true" />
            </p>
        </div>
        <div id="map_canvas"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:44:25.230

尝试这个：

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position){
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    var coords = new google.maps.LatLng(latitude, longitude);
    var mapOptions = {
        zoom: 12,
        center: coords,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(
            document.getElementById("mapContainer"), mapOptions
            );
        var marker = new google.maps.Marker({
                position: coords,
                map: map,

                            });
         }else {

         alert("Geolocation API is not supported in your browser.");

         } 
```

这会在用户的当前位置为您提供一个标记。

# jquery - 散点图谷歌可视化不处理我的 json

> ID：12922228
> 
> 赞同：0
> 
> 时间：2012-10-16T19:38:07.310
> 
> 标签：jquery, json, google-visualization

出于某种原因，以下代码未提供预期的谷歌散点图。JSON url 具有两个表变量的数字输出。任何线索（顺便说一下，JSON 确实适用于饼图，包括一个字符串变量而不是散点图的数字变量）。

```
$(function() { 
     // when document loads, grab the json
     $.getJSON(jsonurl, function(data) {
         // once grabbed, we run this callback

         // setup the new table and its data
         var data = new google.visualization.DataTable();
             data.addRows(data.rows.length);  // length gives us the number of results in our returned data
             data.addColumn('number', 'meterprijs');
             data.addColumn('number', 'perceeloppervlak');

         // now we need to build the map data, loop over each result
         $.each(data.rows, function(i,v) {
             // set the values for both the name and the population
             data.setValue(i, 0, v.a1_meterprijs);
             data.setValue(i, 1, v.a1_buitenopp);
         });
         // finally, create the map!

var options = {
      title: 'Age vs. Weight comparison',
      hAxis: {title: 'Meterprijs', minValue: 1500, maxValue: 6000},
      vAxis: {title: 'Perceelopp', minValue: 10, maxValue: 1000},
      legend: 'none'
    };        

         var chart = new google.visualization.ScatterChart(
           document.getElementById('visualization2'));
              chart.draw(data, options);

          });
        });
       });
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:37:44.380

好的，这是正在运行的代码。初始设置很好，但我改变了：

1）图表地图命名为'mapje'而不是数据，这是为了合理（图表不是数据，而是数据本身） 2）表格需要填充数字，所以当json解析数字时作为字符串（在 " 和 " 之间），这些必须通过在变量前添加 + 来读取为数字（例如 v.a1_meterprijs）。

所以毕竟最初的代码可能对某些人有用，但这个对我有用：

```
$(function() { 
     // when document loads, grab the json
     $.getJSON(jsonurl, function(data) {
         // once grabbed, we run this callback

         // setup the new table and its data
         var mapje = new google.visualization.DataTable();
             mapje.addRows(data.rows.length);  // length gives us the number of results 
             in our returned data
             mapje.addColumn('number', 'Perceelopp');
             mapje.addColumn('number', 'Meterprijs');

         // now we need to build the map data, loop over each result
         $.each(data.rows, function(i,v) {
             // set the values for both the name and the population
             mapje.setValue(i, 0, + v.a1_buitenopp);
             mapje.setValue(i, 1, + v.a1_meterprijs);
         });
         // finally, create the map!

var options = {
      title: 'Meterprijs vs Perceeloppervlak',
      hAxis: {title: 'Perceelopp', minValue: 10, maxValue: 1000},
      vAxis: {title: 'Meterprijs', minValue: 1500, maxValue: 6000},
      legend: 'none'
    };  

         var chart = new google.visualization.ScatterChart(
           document.getElementById('visualization2'));
              chart.draw(mapje, options);

          });
        });
       });
      }); 
```

# jquery - JQuery Mobile 和 ASP.NET MVC 导航栏按钮活动状态不起作用

> ID：12922231
> 
> 赞同：1
> 
> 时间：2012-10-16T19:38:25.983
> 
> 标签：jquery, asp.net-mvc, jquery-mobile

```
 <div data-role="navbar">
        <ul>
            <li><a id="navBtnThirty" href="@Url.Action("View", "VesselLogs", new { id = @ViewContext.ViewData["VesselGID"], ShowDays = 30})" class="navbarbtn ui-btn-active ui-state-persist">30 Days</a></li>
            <li><a id="navBtnSixty"  href="@Url.Action("View", "VesselLogs", new { id = @ViewContext.ViewData["VesselGID"], ShowDays = 60 })" class="navbarbtn" >60 Days</a></li>
            <li><a id="navBtnNinty" href="@Url.Action("View", "VesselLogs", new { id = @ViewContext.ViewData["VesselGID"], ShowDays = 90 })" class="navbarbtn" >90 Days</a></li>
            <li><a id="navBtnAll" href="@Url.Action("View", "VesselLogs", new { id = @ViewContext.ViewData["VesselGID"], ShowDays = -1 })" class="navbarbtn"  >All Days</a></li>
        </ul>
    </div> 
```

首次加载页面时，活动按钮正确显示。单击其中一个链接后，在操作完成之前不会设置活动按钮，然后我再次单击该按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:45:25.540

字符串语法在我看来是错误的。我敢打赌有一些编译错误。在您的 href 属性标记中，删除内部的双引号并替换为单引号。

```
<div data-role="navbar">
    <ul>
        <li><a id="navBtnThirty" href="@Url.Action('View', 'VesselLogs', new { id = @ViewContext.ViewData['VesselGID'], ShowDays = 30})" class="navbarbtn ui-btn-active ui-state-persist">30 Days</a></li>
        <li><a id="navBtnSixty"  href="@Url.Action('View', 'VesselLogs', new { id = @ViewContext.ViewData['VesselGID'], ShowDays = 60 })" class="navbarbtn" >60 Days</a></li>
        <li><a id="navBtnNinty" href="@Url.Action('View', 'VesselLogs', new { id = @ViewContext.ViewData['VesselGID'], ShowDays = 90 })" class="navbarbtn" >90 Days</a></li>
        <li><a id="navBtnAll" href="@Url.Action('View', 'VesselLogs', new { id = @ViewContext.ViewData['VesselGID'], ShowDays = -1 })" class="navbarbtn"  >All Days</a></li>
    </ul>
</div> 
```

**编辑：**

完全是我的错。我没有想到你的href中有剃刀语法。现在才注意到'@'符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:48:43.353

下面的代码解决了这个问题，请务必更改 jquery 移动事件以将其绑定到您的特定设置。

```
 $(document).bind('pageshow', 
    function () {
        var days = @ViewContext.ViewData["ShowLogs"];
        $('.navbarbtn').removeClass("ui-btn-active");
        if (days == 30) {
            $('#navBtnThirty').addClass("ui-btn-active");
        } else if (days == 60) {
            $('#navBtnSixty').addClass("ui-btn-active");
        } else if (days == 90) {
            $('#navBtnNinty').addClass("ui-btn-active");
        } else if (days == -1) {
            $('#navBtnAll').addClass("ui-btn-active");
        }
    });
</script> 
```

# java - 从两个表中获取数据的 Java 代码

> ID：12922234
> 
> 赞同：0
> 
> 时间：2012-10-16T19:38:32.460
> 
> 标签：java, sql

```
String pnumber = request.getParameter("pnumber");
          ResultSet rs = DAO.fetch("SELECT * FROM Products Where ProductNumber ='" + pnumber + "'");
          ResultSet r = DAO.fetch("SELECT * FROM ExpensiveProducts"); 
```

在这里，我从数据库中获取数据：

```
try {
            int v = Integer.parseInt(pnumber);

            if (pnumber.length() == 7) { 
```

数据没有通过这种情况？

```
 while (rs.next()) {
                    String pn = rs.getString(3);
                    String pqty = rs.getString(4);
                    int qty = Integer.parseInt(pqty);

                    if (pn.equals(pnumber)) {

                        if (qty > 0) {
                            response.sendRedirect("Status.jsp?Status=Available");
                        } else {
                            response.sendRedirect("Status.jsp?Status=Not Available");
                        }

                    } else {

                        while (r.next()) {
                            String epn = r.getString(3);
                            String epp = r.getString(4);
                            out.print(pnumber);
                            out.print(epn);
                            if (epn.equals(pnumber)) {
                                response.sendRedirect("Status.jsp?Status=EAvailable");
                            } else {
                                response.sendRedirect("Status.jsp?Status=E NAvailable");
                            }
                        }
                        response.sendRedirect("Status.jsp?Status=Product number not exist");
                    }

                }
            } else {
                response.sendRedirect("Status.jsp?Status=test");
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:43:45.463

您有一个循环`rs.next()`- 这将为其中的每条记录迭代一次。

里面你正在看`r.next()`- 这将是多少？

如果它们不完全匹配，那么您将在访问数据时遇到问题。

# javascript - 读取数据时删除行 D3

> ID：12922236
> 
> 赞同：5
> 
> 时间：2012-10-16T19:38:47.617
> 
> 标签：javascript, csv, d3.js

假设我有一个示例文件 sample.csv：

```
row,col,value
1,1,2
1,2,3
1,3,NA 
```

在 d3 中读取数据时，您可以执行以下操作：

```
d3.csv("sample.csv", function(data) {
    data.forEach(function(d) {
    d.value = +d.value;
}); 
```

但是，对于 NA 值，+d.value 将返回 NaN。如何从我的数据中排除 NaN 值。即读取数据，并且只取具有数字值的行

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T19:44:55.940

您可以`isNaN`在尝试添加数据之前调用数据：

```
d3.csv('sample.csv', function(data) {
    data = data.filter(function(d){
        if(isNaN(d.value)){
            return false;
        }
        d.value = parseInt(d.value, 10);
        return true;
    });
}); 
```

这假设您的数字都是以 10 为底的整数。

# asp.net - 客户端 - 服务器按钮请求

> ID：12922243
> 
> 赞同：1
> 
> 时间：2012-10-16T19:39:22.993
> 
> 标签：asp.net

对不起。这对你来说可能很简单......

我的 Web 表单中有一个按钮。在浏览器中，我打开了Fire Bug，看到了下面这个与Button对应的HTML

```
<input type="submit" id="btn" value="Upload" name="btn"> 
```

以下是我在服务器端的 Button HTML ...

```
<asp:Button ID="btn" runat="server" Text="Upload" OnClick="ButtonClick" /> 
```

因此，当用户点击现在位于客户端的按钮时，调用按钮的服务器端处理程序。

我的问题是这个映射是如何在内部完成的，我的意思是，用户在客户端点击按钮，这是在服务器端执行代码？因为按钮在服务器上不再可用。页面已下载，现在位于客户端。对？

在 windows 窗体应用程序中，这个概念很容易理解，因为按钮事件和处理程序都位于同一个文件中，并且没有客户端-服务器概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:42:43.240

一切都绑定在页面的 ViewState 中，在 PostBack 期间作为参数传递。所以实际上，按钮继续“活动”并且各种参数随之传递。如果您查看生成页面的源代码，您会看到一个`__doPostBack`处理正在发生的实际事件的 JavaScript 调用。这是以 http POST 请求的形式发送的，ViewState 将任何“有状态”信息提供给页面的服务器端代码。

这里还有很多事情要做，我建议您研究[Asp.Net Page Lifecycle](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)以更彻底地理解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:42:21.603

按钮单击调用表单提交，将值发布到您的服务器，进而触发按钮单击事件。

# winforms - C++/CLI Graphics->DrawArc(DrawLine) 循环清除

> ID：12922245
> 
> 赞同：0
> 
> 时间：2012-10-16T19:39:34.253
> 
> 标签：winforms, graphics, c++-cli, drawing

问题：我有 CircleSegment 的集合，当我试图在 PictureBox 上绘制它们时，我只收到来自 pictureBox 集合的最后一个 CircleSegment。为什么？

```
ref class CircleSegment 
    {
    public:
        array<double>^ massive;
        Pen^ Blackpen;
        int index;
         CircleSegment^ SegmentCircleCollection::operator [] ( const int a ) 
     { 
         return this->Alfa[a];
     }
    ....
    }

ref class SegmentCircleCollection
{
    public:
    Generic::List<CircleSegment^> ^Alfa;
...
}

private: System::Void pictureBox1_Paint(System::Object^  sender, System::Windows::Forms::PaintEventArgs^  e) 
 {   
   //Where SegmentCircleCollection^ myCollection;
   for each(CircleSegment^ Selected in myCollection->Alfa)
       {
           e->Graphics->DrawLine(Selected->Blackpen,(int)Selected->massive[6],(int)Selected->massive[7],(int)Selected->massive[8],(int)Selected->massive[9]);
            e->Graphics->DrawArc(Selected->Blackpen,(int)Selected->massive[0],(int)Selected->massive[1],(int)Selected->massive[2],(int)Selected->massive[3],(int)Selected->massive[4],(int)Selected->massive[5]);
       } 
```

...

}

# charts - Highcharts - 固定点数

> ID：12922258
> 
> 赞同：1
> 
> 时间：2012-10-16T19:40:40.477
> 
> 标签：charts, highcharts, real-time, highstock

最近才开始使用 Highcharts。我正在使用 API Highstock 实时生成图表，但我有疑问。如何在图表中设置一定数量的点？例如，如果我只发送两个点，我不希望图表针对这两个点进行自我调整，但它固定为接收 20 个点。

谢谢你

# wpf - 更新 ItemsSource 时的问题

> ID：12922263
> 
> 赞同：0
> 
> 时间：2012-10-16T19:40:59.767
> 
> 标签：wpf, data-binding, combobox

我有一个用户可编辑的组合框，因此我将 Text 属性绑定到我的类的属性。同一个组合框的 ItemsSource 绑定到 AsyncObservableCollection （我根据其他帖子做了，效果很好）。

但是，我在更新 ItemsSource 时遇到了问题。

以下是重现的步骤：

1.  在组合框下拉列表中选择一个值。
2.  在组合框中键入一些文本。（说“aaa”）
3.  更新 ItemsSource。（通过我的按钮点击）

结果：MyText 属性仍然设置为您键入的文本（“aaa”），但组合框显示一个空白条目。

但是，如果您执行上述相同步骤但跳过第 1 步，则组合框会正确显示 MyText 属性中的文本。这使我相信在对 ItemsSource 的更新完成后，所选索引/所选值正在用于更新组合框。

关于在更新 ItemsSource 后如何使显示的值与 MyText 属性同步的任何想法？

在下面提供的代码中，我正在更新按钮单击上的 ItemsSource 以便重现。

谢谢你！

XAML：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
<Grid>
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" Name="comboBox1" VerticalAlignment="Top" Width="200" IsEditable="True"
                          DataContext="{Binding Path=MyDataClass}"
                          ItemsSource="{Binding Path=MyListOptions}"
                          SelectedIndex="{Binding Path=MySelectedIndex}"
                          Text="{Binding Path=MyText, UpdateSourceTrigger=LostFocus}"
              >
    </ComboBox>
    <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="416,276,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
</Grid> 
```

后面的代码：

```
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows;
using System.Diagnostics;

namespace WpfApplication2
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public class DataClass : INotifyPropertyChanged
        {
            private string mytext = "";
            public string MyText
            {
                get
                {
                    return mytext;
                }
                set
                {
                    mytext = value;
                    OnPropertyChanged("MyText");
                }
            }

            private int myselectedindex = -1;
            public int MySelectedIndex 
            {
                get
                {
                    return myselectedindex;
                }

                set
                {
                    if (value != -1)
                    {
                        mytext = MyListOptions[value];
                        OnPropertyChanged("MyText");
                    }
                }
            }

            private AsyncObservableCollection<string> mylistOptions = new AsyncObservableCollection<string>();
            public AsyncObservableCollection<string> MyListOptions
            {
                get
                {
                    return mylistOptions;
                }

                set
                {
                    mylistOptions.Clear();
                    OnPropertyChanged("MyListOptions");
                    foreach (string opt in value)
                    {
                        mylistOptions.Add(opt);
                    }
                    OnPropertyChanged("MyListOptions");
                }
            }

            public DataClass()
            {
            }

            public event PropertyChangedEventHandler PropertyChanged;

            internal void OnPropertyChanged(string prop)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(prop));
            }
        }

        public DataClass MyDataClass { get; set; }

        public MainWindow()
        {
            MyDataClass = new DataClass();

            MyDataClass.MyListOptions.Add("Option 1 - Provides helpful stuff.");
            MyDataClass.MyListOptions.Add("Option 2 - Provides more helpful stuff.");
            MyDataClass.MyListOptions.Add("Option 3 - Provides extra helpful stuff.");

            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            AsyncObservableCollection<string> newList = new AsyncObservableCollection<string>();
            newList.Add("Option A - Provides helpful stuff.");
            newList.Add("Option B - Provides more helpful stuff.");
            newList.Add("Option C - Provides extra helpful stuff.");

            MyDataClass.MyListOptions = newList;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:22:49.857

好的，我通过将 SelectedValue 绑定到与 Text 相同的属性并将其模式设置为 OneWay 解决了这个问题。

```
 <ComboBox Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" Name="comboBox1" VerticalAlignment="Top" Width="200" IsEditable="True"
                          DataContext="{Binding Path=MyDataClass}"
                          ItemsSource="{Binding Path=MyListOptions}"
                          SelectedIndex="{Binding Path=MySelectedIndex}"
                          SelectedValue="{Binding Path=MyText, Mode=OneWay}"
                          Text="{Binding Path=MyText, UpdateSourceTrigger=LostFocus}" 
```

# symfony - SonataAdminBundle 使用事件订阅者

> ID：12922265
> 
> 赞同：0
> 
> 时间：2012-10-16T19:41:13.387
> 
> 标签：symfony, symfony-2.1, sonata-admin

我尝试在 SonataAdminBundle 表单中设置当前经过身份验证的用户：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
    ->add('title')
    ->add('content')
    ->add('slug')
    //->add('user')
    ;
} 
```

由于我不希望用户选择/选择它自己的用户，我想我想在用户发送表单的过程中设置用户名（没有任何用户对象）。（注意：我想以几种形式使用它，所以我需要一个通用的解决方案。）

我现在所做的是在阅读完此内容后设置了一个 EventListener：http: [//symfony.com/doc/current/cookbook/service_container/event_listener.html](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)

```
class PostListener
{
    protected $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    public function prePersist(LifeCycleEventArgs $args)
    {
        $entity = $args->getEntity();

        //Get user
        $securityContext = $this->container->get('security.context');
        $user = $securityContext->getToken()->getUser();

        //Set authenticated user as autor
        $entity->setUser($user);
    }
} 
```

包括服务：

```
post.listener:
  class: Backender\BlogBundle\Listener\PostListener
  calls:
    - [ setContainer, [ @service_container ] ]
  tags:
    - { name: doctrine.event_listener, event: prePersist } 
```

现在不确定这是否是正确的方法，因为我不想指定要设置用户的表单。（这个人想在每个表单上设置用户，对吧？）

通过更多的研究，我似乎必须使用这样的事件订阅者：[http](http://symfony.com/doc/2.0/cookbook/form/dynamic_form_generation.html) ://symfony.com/doc/2.0/cookbook/form/dynamic_form_generation.html 在这个例子中，他们使用 FormEvents::PRE_SET_DATA，我猜我的情况我必须使用 POST_SET_DATA。

这里我有一些问题！：

1：我对 SonataAdminBundle 很陌生，我们使用受保护的函数 configureFormFields(FormMapper $formMapper)... 哪里`->addEventSubscriber()`不可用？

2：这是正确的方法吗？，我真的没有找到任何像我需要的奏鸣曲管理员的例子。

我感谢每一个帮助！最好的祝福...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:56:52.193

尝试`$formMapper->getFormBuilder()->addEventSubscriber($subscriber);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:53:06.490

最后，我为我的问题找到了两种可能的解决方案。我想在这里描述这些可能性，因为没有太多东西可以找到。

**具有调用**实例查询的事件侦听器作为服务：****

 **```
 blog.post.listener:
      class: Acme\BlogBundle\Listener\PostListener
      arguments: ['@service_container']
      tags: 
        - { name: doctrine.event_listener, event: prePersist } 
```

监听器类：

```
class PostListener
{
    protected $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    public function prePersist(LifeCycleEventArgs $args)
    {
        $entity = $args->getEntity();

        //Get user
        $securityContext = $this->container->get('security.context');
        $user = $securityContext->getToken()->getUser();

        if ($entity instanceof Post) {

            //Set authenticated user as autor
            $entity->setUser($user);

        }
    }
} 
```

**第二种方法（也许更容易）是在 SonataAdminBundle 的管理类中使用 prePersist**

作为服务调用（使用服务容器或安全上下文作为参数）：

```
blog.admin.post:
  class: Acme\BlogBundle\Admin\PostAdmin
  tags:
    - { name: sonata.admin, manager_type: orm, group: Article Handling, label: Posts }
  arguments: [null, Acme\BlogBundle\Entity\Post, SonataAdminBundle:CRUD, @service_container] 
```

PostAdmin：（ *注意，我使用容器是因为我将来需要更多的东西）*

```
class PostAdmin extends Admin
{
    protected $securityContext;

    public function __construct($code, $class, $baseControllerName, ContainerInterface $container)
    {
        parent::__construct($code, $class, $baseControllerName);
        $this->container = $container;
    }

    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
        ->add('title')
        ->add('content')
        ;

    }

    public function prePersist($post)
    {
        $user = $this->container->get('security.context')->getToken()->getUser();
        $post->setUser($user);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T15:11:15.030

我通过注入事件调度程序解决了向管理类添加事件的问题：

```
 <service id="acme.listener.contract"
             class="Acme\AppBundle\Event\ContractListener">
         <argument type="service" id="twig"></argument>   
         <argument type="service" id="mailer"></argument>   
        <tag name="kernel.event_listener" event="contract.created" method="onContractCreated" />
    </service> 
```

然后在我的管理类中，我将事件添加到现有方法中：

```
use Symfony\Component\EventDispatcher\EventDispatcherInterface;
use Symfony\Component\Security\Core\SecurityContextInterface;

class ContractAdmin extends Admin
{
    protected $dispatcher;

/**
 * Security Context
 * @var \Symfony\Component\Security\Core\SecurityContextInterface
 */
protected $securityContext;

public function setEventDispatcher(EventDispatcherInterface $dispatcher)
{
    $this->dispatcher = $dispatcher;
}

public function setSecurityContext(SecurityContextInterface $securityContext)
{
    $this->securityContext = $securityContext;
}

public function prePersist($contract)
{
    $user = $this->securityContext->getToken()->getUser();
    $contract->setUser($user);

    $event = new ContractEvent($contract);

    $dispatcher = $this->dispatcher;
    $dispatcher->dispatch(
        ContractEvents::CONTRACT_CREATED,
        $event
    );
} 
```

这让我也可以在其他地方添加我在我的应用程序中共享的额外事件。

在您的情况下，您可以只注入安全上下文：

```
 sonata.admin.contract:
    class: Acme\AppBundle\Admin\ContractAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "Contracts", label_catalogue: "messages", label: "Auftragsübersicht" }
    arguments:
        - ~
        - Acme\AppBundle\Entity\Contract
        - ~         
    calls:
        - [ setSecurityContext, [@security.context]]
        - [ setEventDispatcher, [@event_dispatcher]] 
```**

# java - 在视频摘要中使用神经网络？

> ID：12922266
> 
> 赞同：0
> 
> 时间：2012-10-16T19:41:17.787
> 
> 标签：java, neural-network, video-processing

我用Java制作了一个总结视频的程序。该文件将读取音频和视频文件，将它们分成多个镜头，根据启发式，它们将被分配一些权重。并且根据用户提供的百分比值，仅将权重较高的镜头作为摘要的一部分。

如上所述，是否有可能根据视频类型计算阈值：像素运动、关键帧阈值和百分比……最好通过神经网络进行一些训练？

# sql - 在 RPG ILE CGI Web 程序中分析 SQL 语句

> ID：12922269
> 
> 赞同：0
> 
> 时间：2012-10-16T19:41:25.717
> 
> 标签：sql, ibm-midrange, rpg

通常为了分析 SQL 语句，我运行 STRDBG，然后在 STRSQL 中输入 SQL。

但是，我有一个 CGI RPGLE 程序，它执行许多 SQL 语句，大多数是动态的，我想对所有这些语句进行概要分析，以查看哪些导致程序变慢。

这样做的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:24:59.617

我不能代表最佳实践，但如果您喜欢 STRDBG 输出，请将您的 CGI 程序包装在一个执行 STRDBG 的简单 CLP 中，调用您真正的 CGI 程序，然后对 *OUTFILE 执行 DSPJOBLOG。

另一种方法是使用作为 IBM i Access 一部分的 IBM i Navigator。向下钻取数据库到 SQL 性能监视器。在右侧底部，单击 Create a New SQL Performance Monitor。您可以选择监视所有作业中的特定程序。

# java - 如何显示来自 HTTP Web 服务器的图像？

> ID：12922271
> 
> 赞同：2
> 
> 时间：2012-10-16T19:41:30.523
> 
> 标签：java, image, http, webserver, mime

我试图在我的 HTTP Web 服务器中显示图像，但我无法。我可以显示 HTML。我认为这与我处理 IO（输入和输出流）的方式有关。那里可能有很多我没有注意到的错误。

```
import java.io.* ;
import java.net.* ;
import java.util.Properties;

public class HTTPThread extends Thread
{
    private Socket socket = null;
    private Properties config = null;
    private String root = "";

    public HTTPThread(Socket s, Properties config)
    {
        this.socket = s;
        this.config = config;
        this.root = this.config.getProperty("root");        
    }

    public void run()
    {   

//      InputStream in = null;
        OutputStream out = null;

        try
        {
            out = socket.getOutputStream();
            PrintWriter writer = new PrintWriter(out, true);

            BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            String request = reader.readLine();
            writer.println("HTTP/1.1 200 OK");
            writer.println("Content-Type: text/html");          
            writer.println();

            // Search for filename 
            int slash = request.indexOf("/"); //find first occurrence of slash
            int emptySpace = request.indexOf(" ", slash); //find first space after slash
            String filename = request.substring(slash, emptySpace); //return filename 
//          writer.println("<b>" + filename + "</b>");

            String pathname = "";
            try
            {
                pathname = (filename == "/") ? root + filename : root;
//              System.out.println(filename);           
                URL url = new URL(pathname);
                URLConnection urlc = url.openConnection();
                BufferedReader in = new BufferedReader(
                        new InputStreamReader(
                        urlc.getInputStream()));

                String line;                
                while ((line = in.readLine()) != null)
                {
                    writer.println(line);
                }
                in.close();
            }
            catch (MalformedURLException e)
            {
                System.err.println("Don't know about host: " + pathname);
                System.exit(1);
            }
            catch (IOException e)
            {
                  System.err.println("Couldn't get I/O for "
                                     + "the connection to: " + pathname);
                  System.exit(1);
            }

//          reader.close();
            writer.close();
            socket.close();
        }
        catch(IOException e)
        {
            System.out.println("Error: " + e);          
        }

        finally
        {
            try
            {
//              in.close() ;
                out.close() ;
                socket.close();
            }
            catch(IOException e)
            {
                System.out.println("Error: " + e);          
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:48:05.117

您是否正在尝试编写某种从请求中获取外部 URL 并返回内容的代理服务器？好吧，您的代码有几个问题：

```
writer.println("HTTP/1.1 200 OK");
writer.println("Content-Type: text/html"); 
```

当浏览器看到上述内容时，它假定返回的内容是 HTML。**将二进制**图像渲染为 HTML 显然会失败。这导致我们这样做：

```
String line;                
while ((line = in.readLine()) != null)
{
    writer.println(line);
}
in.close(); 
```

在上面的循环中，您正在逐行读取一些外部 URL（以文本模式）并将其转发给原始客户端。这适用于 HTML（基于文本），但对于任何图像（二进制）都将失败。您必须使用`InputStream`/`OutputStream`代替。

最后还有小事：

```
pathname = (filename == "/") ? root + filename : root; 
```

不要使用`==`运算符比较字符串，将其替换为：

```
pathname = (filename.equals("/")) ? root + filename : root; 
```

最后一点，考虑使用 Tomcat 或 Jetty 之类的 servlet 容器，这将使您摆脱 HTTP 处理代码并提供更高级的构造。

# php - 解码 PHP base64 编码

> ID：12922273
> 
> 赞同：-3
> 
> 时间：2012-10-16T19:41:35.620
> 
> 标签：php, base64, encode

我必须对现有的 php 页面进行编码才能对其进行编辑。

你能帮我吗？我正在努力弄清楚，但似乎并不像我想象的那么容易。

这里是：

```
eval(strrev(";)))ppa_BF_tiBbeW$(31tor_rts(edoced_46esab(lave@")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:52:37.037

执行 strrev 函数我们有： `@eval(base64_decode(str_rot13($WebBit_FB_app)));`

尝试打印`$WebBit_FB_app`变量，然后使用`str_rot13()`and`base64_decode()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:42:51.853

使用 base64_decode 函数 [http://php.net/manual/en/function.base64-decode.php](http://php.net/manual/en/function.base64-decode.php)

```
 <?php
     $str = 'VGhpcyBpcyBhbiBlbmNvZGVkIHN0cmluZw==';
     echo base64_decode($str);
 ?> 
```

# openmpi - OpenMPI 跳出循环

> ID：12922276
> 
> 赞同：1
> 
> 时间：2012-10-16T19:41:47.193
> 
> 标签：openmpi

我很难弄清楚如何在 c 中使用 OpenMPI 打破循环。

这是我的循环

```
 for( i=1; i<=steps;i++) {

    do_calculation(psi,new_psi,&mydiff,i1,i2,j1,j2);

    if (breakNow == 1) {
       break;
    }

     diff = find_difference();
    if(myid == mpi_master && i % iout == 0){
       printf("%8d %15.5f\n",i,diff);

       if (diff == 0.00) {
        printf("DONE!");

        breakNow = 1;

         MPI_Bcast(&breakNow, 1, MPI_INT, mpi_master, MPI_COMM_WORLD);
       }          
    }
  } 
```

当差异为 0.00 时，我需要将所有处理器从循环中断开，但似乎 breakNow 变量没有被广播到所有处理器。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:43:55.500

`MPI_Bcast`是集体行动。您需要在**所有**进程中调用它才能完成。在等级匹配的过程中`mpi_root`，广播将表现为发送操作，而在所有其他等级中，它将表现为接收操作。

只需将调用移到`MPI_Bcast`条件之外。可能是正确的地方就`if (breakNow == 1) break;`在行前。

另一个建议：如果`find_difference`在所有进程中返回相同的值，你可以做类似的事情：

```
for (i = 1; i <= steps; i++) {

   do_calculation(psi, new_psi, &mydiff, i1, i2, j1, j2);

   diff = find_difference();
   if (i % iout == 0) {
      if (myid == mpi_master) {
          printf("%8d %15.5f\n", i, diff);
          if (diff == 0.00)
             printf("DONE!");
      }
      if (diff == 0.00) break;
   }
} 
```

如果`find_difference`只在master进程中给出有意义的结果，那么修改如下：

```
for (i = 1; i <= steps; i++) {

   do_calculation(psi, new_psi, &mydiff, i1, i2, j1, j2);

   diff = find_difference();
   if (i % iout == 0) {
      if (myid == mpi_master) {
          printf("%8d %15.5f\n", i, diff);
          if (diff == 0.00)
             printf("DONE!");
      }
      MPI_Bcast(&diff, 1, MPI_DOUBLE, mpi_master, MPI_COMM_WORLD);
      if (diff == 0.00) break;
   }
} 
```

（我假设它`diff`是类型并保留了代码的原始语义，以便每一步`double`检查一次零差异）`iout`

# r - 按近似列值合并数据框

> ID：12922281
> 
> 赞同：5
> 
> 时间：2012-10-16T19:42:14.677
> 
> 标签：r

我有两个包含时间序列的数据帧（时间编码为数字，而不是时间对象；时间未排序）。我想将一个数据帧中的响应变量标准化为另一个数据帧中的响应变量。问题是两个数据帧中的时间点并不完全相同。因此，我需要通过两个时间列的近似匹配来合并两个数据帧。

数据如下所示：

```
df1 <- structure(list(t1 = c(3, 1, 2, 4), y1 = c(9, 1, 4, 16)), .Names = c("t1", "y1"), row.names = c(NA, -4L), class = "data.frame")
df2 <- structure(list(t2 = c(0.9, 4.1), y2 = structure(1:2, .Label = c("a", "b"), class = "factor")), .Names = c("t2", "y2"), row.names = c(NA, -2L), class = "data.frame") 
```

结果应如下所示：

```
t1  y1    y2
 1   1    a
 4  16    b 
```

似乎`approx`或`approxfun`会很有用，但我不太明白该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T19:51:55.540

您可以使用`na.approx`from zoo 轻松完成此操作：

```
library(zoo)
Data <- merge(df1, df2, by.x="t1", by.y="t2", all=TRUE)
Data$y1 <- na.approx(Data$y1, na.rm=FALSE, rule=2)
na.omit(Data)
#    t1 y1 y2
# 1 0.9  1  a
# 6 4.1 16  b 
```

你也可以这样做`approx`：

```
Data <- merge(df1, df2, by.x="t1", by.y="t2", all=TRUE)
y1.na <- is.na(Data$y1)
Data$y1[y1.na] <- (approx(Data$y1, rule=2, n=NROW(Data))$y)[y1.na] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:42:05.070

@JoshuaUlrich 提供了一种很好的方法来执行此操作，如果您希望最终结果包含 from 的所有内容`df2`并且您不关心`t1`列是否具有 from 的值`t2`。

但是，如果您想避免这些事情并按照@BrandonBertelsen 建议的方式继续，您可以定义自定义`round`函数，然后在第二个的合并列上使用它`data.frame`。例如：

```
# define a more precise rounding function that meets your needs.
# e.g., this one rounds values in x to their nearest multiple of h
gen.round <- function(x, h) {
    ifelse(x %% h > (h/2), h + h * (x %/% h), -(h + h * (-x %/% h)))
}

# make a new merge function that uses gen.round to round the merge column 
# in the second data.frame
merge.approx <- function(x, y, by.x, by.y, h, ...) {
    y <- within(y, assign(by.y, gen.round(get(by.y), h)))
    merge(x, y, by.x=by.x, by.y=by.y, ...)
}

merge.approx(df1, df2, by.x='t1', by.y='t2', h =.5)

  t1 y1 y2
1  1  1  a
2  4 16  b 
```

# scheme - 检查Scheme中的2个间隔是否重叠

> ID：12922283
> 
> 赞同：2
> 
> 时间：2012-10-16T19:42:27.990
> 
> 标签：scheme, intervals, overlap

所以基本上我已经收到了一个关于这种语言的问题，我从昨晚开始就一直在阅读文档。我什么都不知道，所以我想我会试试这个网站。

基本上这里的问题是：

我已经获得了几种日历日期结构和方案间隔：

```
 (define-struct cal (month day))

    (define-struct interval (start end)) 
```

但是，我被要求检查 2 个不同的间隔是否相互重叠。一个例子：

```
 If I have dates March 12th - March 14th in my first interval, 
    but in my second interval I have the dates March 13th - March 2th
    (overlap? int1 int2) would return true.

    However if I have dates March 12th - March 14th in my first interval,
    but I have March 15th - March 18th in my second interval
    (overlap? int1 int2) would return false. 
```

我不知道从哪里开始。如果有人可以为我解决这个问题，以便我可以完成这个问题，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:01:25.610

编写程序时，一个好的方法通常是将问题分解为更易于管理的问题。因此，在解决比较两个间隔的问题之前，请尝试解决比较两个日历日期的简单问题。给定两个日期`a`and `b`，尝试编写一个函数，如果`a`是 before则返回 true `b`，否则返回 false。所以，

```
; date1 is January 5, date2 is February 6
(before? date1 date2) ; returns true
; date1 is January 5, date2 is January 2
(before? date1 date2) ; return false 
```

接下来，考虑如何使用`before?`来构造`overlap?`. 特别要考虑这一点：如果两个间隔*不*重叠，则一个的结束日期在另一个的开始日期*之前。*

最后，考虑边缘情况——如果给定，例如 (1 月 4 日至 3 月 6 日) 和 (3 月 6 日至 12 月 3 日)，您希望您的程序做什么？这些间隔是否重叠？

快乐编码！

PS - 如果您需要更多帮助，请不要害怕询问。我故意含糊其辞，因为我认为给你提示会比在你面前摆出一个解决方案更好——那样你就不会学到任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:43:22.797

添加到 Ord 的出色建议中，如果您正在寻找更多基本信息：define-struct 是什么意思？我如何编写一个使用日期的函数？--那么我建议你看一下（免费的，在线的）教科书[How To Design Programs, version 2e](http://www.ccs.neu.edu/home/matthias/HtDP2e/)。看起来您对第 2.5 节“添加结构”很感兴趣，但如果不阅读前面的内容，可能很难理解本节。

祝你好运！

# html - 我的图片左上角的这个图标是什么？

> ID：12922284
> 
> 赞同：0
> 
> 时间：2012-10-16T19:42:28.990
> 
> 标签：html, image, internet-explorer

在 Internet Explorer 中有一个我不知道如何去掉的图标。有人可以解释如何摆脱它以及它是什么吗？

![](../Images/a660b524806edefb5fb8f17dd60adadc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:45:11.210

图像本身未加载。如果您可以发布您的代码，我们可以提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:46:46.990

将鼠标放在它上面。右键单击它并获取图像属性。查看它的来源。你可以这样做去工具/互联网选项/高级/重置该按钮重置所有配置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:46:46.840

尝试将其添加到 css：

```
background: transparent url(whatever) **0 0** no-repeat;
border: none;
padding: 0; 
```

显然这[对这个人有用](https://stackoverflow.com/questions/1918820/css-sprites-showing-broken-image-icon-over-image-but-hover-still-works)

# biztalk - BizUnit 自定义管道测试用例

> ID：12922288
> 
> 赞同：2
> 
> 时间：2012-10-16T19:42:38.477
> 
> 标签：biztalk, biztalk-2010, biztalk-2009, bizunit

我有一个自定义管道组件..

我正在使用下面的代码 Using BizUnit

```
using System;
using BizUnit.TestSteps.BizTalk.Pipeline;
using BizUnit.Xaml;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Reflection;

namespace BizUnit4_TestProject
{
[TestClass]
public class PipelineTest
{
    [TestMethod]
    public void TestReceivePipeline()
    {
        try
        {
            // Create the test case
            var testCase = new TestCase { };

            // Create test steps...
            var docSpecDefinition = new DocSpecDefinition();
            docSpecDefinition.AssemblyPath = Assembly.GetAssembly(typeof(BizUnit4_BizProject.Schemas.TestSchema)).CodeBase;
            //@"C:\Projects\Edan\BizUnit4_TestProject\BizUnit4_BizProject\bin\Debug\BizUnit4_BizProject.dll";

            docSpecDefinition.TypeName =  typeof(BizUnit4_BizProject.Schemas.TestSchema).FullName;

           // docSpecDefinition.TypeName =  =  typeof(BizUnit4_BizProject.Schemas.TestSchema).FullName;

            var executeReceivePipelineStep = new ExecuteReceivePipelineStep();
            executeReceivePipelineStep.DestinationFileFormat=
            executeReceivePipelineStep.Source = @"C:\Users\Administrator\Downloads\BizUnit4_TestProject\BizUnit4_TestProject\BizUnit4_BizProject\Messages\testFile.xml";
            executeReceivePipelineStep.DestinationDir = @"c:\Temp";
            executeReceivePipelineStep.DestinationFileFormat = "*.xml";
            executeReceivePipelineStep.PipelineAssemblyPath = Assembly.GetAssembly(typeof(BizUnit4_BizProject.Pipelines.Test_ReceivePipeline)).CodeBase;
            executeReceivePipelineStep.PipelineTypeName = typeof(BizUnit4_BizProject.Pipelines.Test_ReceivePipeline).FullName;
            executeReceivePipelineStep.DocSpecs.Add(docSpecDefinition);

            //executeReceivePipelineStep.PipelineAssemblyPath = @"C:\Users\Administrator\Downloads\BizUnit4_TestProject\BizUnit4_BizProject\bin\Debug\BizUnit4_BizProject.dll";
            //executeReceivePipelineStep.PipelineTypeName = "BizUnit4_BizProject.Pipelines.Test_ReceivePipeline";
            //executeReceivePipelineStep.DocSpecs.Add(docSpecDefinition);

            // executeReceivePipelineStep.PipelineAssemblyPath = Assembly.GetAssembly(typeof(BizUnit4_BizProject.Pipelines.Test_ReceivePipeline)).CodeBase;
            // executeReceivePipelineStep.PipelineTypeName = typeof(BizUnit4_BizProject.Pipelines.Test_ReceivePipeline).FullName;

            // Add test steps to the required test stage
            testCase.ExecutionSteps.Add(executeReceivePipelineStep);

            // Create a new instance of BizUnit and run the test
            var bizUnit = new BizUnit.BizUnit(testCase);
            bizUnit.RunTest();
        }
        catch (Exception exception)
        {
            var message = exception.InnerException;
            throw;
        }

    }
} 
```

}

但是当我运行该文件时，我收到以下错误。

```
Error Message:Test method 

 BizUnit4_TestProject.PipelineTest.TestReceivePipeline threw exception:     
 BizUnit.TestStepExecutionException: BizUnit encountered an error executing a test step ---> 
 System.ArgumentException: URI formats are not supported.

  Error Stack Trace

  System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength)  
  System.IO.Path.GetFullPathInternal
  (String path)System.IO.File.InternalCopy(String sourceFileName, String destFileName, Boolean overwrite)
   System.IO.File.Copy(String sourceFileName, String destFileName, Boolean overwrite)
   BizUnit.TestSteps.BizTalk.AssemblyHelper.LoadAssembly(String path) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit.TestSteps.BizTalk\AssemblyHelper.cs: line 28

   BizUnit.TestSteps.BizTalk.Pipeline.ExecuteReceivePipelineStep.Execute(Context context) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit.TestSteps.BizTalk\Pipeline\ExecuteReceivePipelineStep.cs: line 189

   BizUnit.BizUnit.ExecuteXamlTestStep(TestStepBase testStep, TestStage stage) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs: line 1122

   BizUnit.BizUnit.RunTestInternal(TestCase xamlTestCase) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs: line 1054BizUnit.BizUnit.RunTest() in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs: line 1000

   BizUnit4_TestProject.PipelineTest.TestReceivePipeline() in C:\Users\Administrator\Downloads\BizUnit4_TestProject\BizUnit4_TestProject\BizUnit4_TestProject\PipelineTest.cs: line 68

   Standard Console OutputTest step validation for stage: Execution, step: BizUnit.TestSteps.BizTalk.Pipeline.ExecuteReceivePipelineStep was successful. -------------------------------------------------------------------------------                                   S T A R T Test:  started @ 15:36:26.715 16/10/2012 by USCMPDEPC28\Administrator-------------------------------------------------------------------------------Info: Adding context property: BizUnitTestCaseStartTime, value: 10/16/2012 3:36:26 PM Setup Stage: started @ 15:36:26.716 16/10/2012 Setup Stage: ended @ 15:36:26.716 16/10/2012 Execute Stage: started @ 15:36:26.716 16/10/2012Step: BizUnit.TestSteps.BizTalk.Pipeline.ExecuteReceivePipelineStep started  @ 15:36:26.716 16/10/2012, failOnError = TrueStep: BizUnit.TestSteps.BizTalk.Pipeline.ExecuteReceivePipelineStep ended @ 15:36:26.721 16/10/2012 with ERRORS, exception: System.ArgumentException*******************************************************************************Error: Exception caught!BizUnit.TestStepExecutionException: BizUnit encountered an error executing a test step ---> System.ArgumentException: URI formats are not supported.   at System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength)   at System.IO.Path.GetFullPathInternal(String path)   at System.IO.File.InternalCopy(String sourceFileName, String destFileName, Boolean overwrite)   at System.IO.File.Copy(String sourceFileName, String destFileName, Boolean overwrite)   at BizUnit.TestSteps.BizTalk.AssemblyHelper.LoadAssembly(String path) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit.TestSteps.BizTalk\AssemblyHelper.cs:line 28   at BizUnit.TestSteps.BizTalk.Pipeline.ExecuteReceivePipelineStep.Execute(Context context) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit.TestSteps.BizTalk\Pipeline\ExecuteReceivePipelineStep.cs:line 189   at BizUnit.BizUnit.ExecuteXamlTestStep(TestStepBase testStep, TestStage stage) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs:line 1122   --- End of inner exception stack trace ---   at BizUnit.BizUnit.ExecuteXamlTestStep(TestStepBase testStep, TestStage stage) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs:line 1138   at BizUnit.BizUnit.ExecuteSteps(IEnumerable`1 testSteps, TestStage stage) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs:line 1087******************************************************************************* Execution Stage: ended @ 15:36:26.721 16/10/2012 with ERROR's Cleanup Stage: started @ 15:36:26.725 16/10/2012*******************************************************************************Error: Exception caught!BizUnit.TestStepExecutionException: BizUnit encountered an error executing a test step ---> System.ArgumentException: URI formats are not supported.   at System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength)   at System.IO.Path.GetFullPathInternal(String path)   at System.IO.File.InternalCopy(String sourceFileName, String destFileName, Boolean overwrite)   at System.IO.File.Copy(String sourceFileName, String destFileName, Boolean overwrite)   at BizUnit.TestSteps.BizTalk.AssemblyHelper.LoadAssembly(String path) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit.TestSteps.BizTalk\AssemblyHelper.cs:line 28   at BizUnit.TestSteps.BizTalk.Pipeline.ExecuteReceivePipelineStep.Execute(Context context) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit.TestSteps.BizTalk\Pipeline\ExecuteReceivePipelineStep.cs:line 189   at BizUnit.BizUnit.ExecuteXamlTestStep(TestStepBase testStep, TestStage stage) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs:line 1122   --- End of inner exception stack trace ---   at BizUnit.BizUnit.ExecuteXamlTestStep(TestStepBase testStep, TestStage stage) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs:line 1138   at BizUnit.BizUnit.ExecuteSteps(IEnumerable`1 testSteps, TestStage stage) in c:\Affinus\Depot\BizUnit\BizUnit4.0\Main\Dev\Src\BizUnit\BizUnit.cs:line 1087******************************************************************************* Cleanup Stage: ended @ 15:36:26.725 16/10/2012 with ERROR's 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:34:26.377

只是改变

这个

```
executeReceivePipelineStep.DestinationFileFormat = "*.xml"; 
```

至

```
executeReceivePipelineStep.DestinationFileFormat = "*.xml"; 
```

# c# - 将日期时间插入 Access

> ID：12922292
> 
> 赞同：2
> 
> 时间：2012-10-16T19:43:00.860
> 
> 标签：c#, ms-access, oledb

问题：我正在尝试使用 C# 中的 Oledb 接口将日期时间插入访问数据库。

黑客解决方案：在不使用 command.Properties 的情况下生成我的插入字符串

我可以毫无问题地将文本插入数据库，但是在尝试 datetime 时，我最终会遇到此错误：System.Data.OleDb.OleDbException {“标准表达式中的数据类型不匹配。”}

有几个与此类似的帖子，但可惜没有有效的解决方案。

这是我的代码：

```
void TransferData()
{
    string instCmd = Get_InsertCommand(0); // hard coded table 0 for testing

    Fill_ProductTable_ToInsert();

    con.Open();

    // It would be nice not to have to separate the date indexes
    int[] textIndex = { 0, 1, 2, 3, 4, 7 };
    int[] dateIndex = { 5, 6 };
    try
    {
        foreach (DataRow row in DataToStore.Tables[0].Rows)
        {
            OleDbCommand command = new OleDbCommand();
            command.Connection = con;

            command.CommandText = instCmd;

            foreach(int j in textIndex)
                command.Parameters.AddWithValue("@" + j, row[j]);
            foreach (int j in dateIndex)
            {

                // TESTING CODE
                ///////////////////////////////////////////////////////////////////////////

                string input = "#\'" +DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss") +"\'#";
                command.Parameters.AddWithValue("@" + j,    input.ToString());
                Program.WriteLine(input.ToString());

                ///////////////////////////////////////////////////////////////////////////
            }

            command.ExecuteNonQuery();
        }
    }
    finally
    {
        con.Close();
    }
}

string Get_InsertCommand(int i)
{
    string sqlIns = "INSERT INTO " + DataToStore.Tables[0].TableName + " (";
    string temp = "VALUES (";
    for (int j = 0; j < expected_header[i].Length - 1; j++)
    {
        sqlIns += expected_header[i][j] + ", ";
        temp += "@" + j + ", ";
    }

    int lastIndex = expected_header[i].Length -1;
    sqlIns += expected_header[i][lastIndex] + ") ";
    temp += "@" + lastIndex + ")";
    sqlIns += temp;

    return sqlIns;
} 
```

在标记为测试代码的区域内，我尝试了我能想到的所有日期时间排列。我用 # 和 ' 尝试了每种格式 我尝试了以下格式：yyyy-MM-dd、yyyyMMdd、yyyy\MM\dd、yyyy/MM/dd

我还尝试将数据库设置为接受 ANSI-92 Sql

我的想法不多了。

注意：此代码设置为处理来自多个数据库的多个表，请注意循环...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:08:24.363

正确使用参数，不要担心在查询中连接的日期时间值的格式。我不明白您为什么要将日期时间值转换为字符串值？

```
DateTime theDate = new DateTime(2012,10,16);
var cmd = new OleDbCommand();
cmd.CommandText = "INSERT INTO sometable (column) VALUES (@p_bar)";
cmd.Parameters.Add ("@p_bar", OleDbType.DateTime).Value = theDate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:24:02.047

我能够通过不使用命令属性来解决这个问题。我生成了自己的 sql 输入并将其设置为 cmd.commandText。日期时间到数据库的文本输入是#yyyy-MM-dd#

# excel - matlab：删除excel中的最后一行

> ID：12922296
> 
> 赞同：0
> 
> 时间：2012-10-16T19:43:15.837
> 
> 标签：excel, matlab, delete-row

我有一个包含内容和背景颜色的 excel 文件，

类似于第一行的东西： ![在此处输入图像描述](../Images/6b9bcd006ac905751ea965c14675309e.png)

我想删除第一行的所有内容，有这样的命令吗？

**更新：**

我成功删除了 A3:I3 的单元格：

```
esh.Range('A1:I1').value = []; 
```

我试图用白色为 J1 单元格着色，但它让我得到了 J2 的单元格，我需要得到 J3 的单元格。

所以我需要用'NoFill'给J1上色。

我怎样才能做到这一点？

我不得不说**我总是想删除文件中的最后一行（*示例没有显示，但总是最后一行*）**

**您可以假设我有要删除的范围/number_of_the_row**

```
e = actxserver ('Excel.Application'); %# open Activex server
ewb = e.Workbooks.Open(filename); %# open the file
esh = ewb.ActiveSheet;
clr = [255 255 255] * [1 256 256^2]';
esh.Range('A1:I1').value = [];
esh.Range('J1:J1').Interior.Color = clr;
set(e, 'DisplayAlerts', 0); % Stop dialog!
xlWorkbookNormal = excelWorkbook; %# it's the Excel constant, not sure how to pass it other way
ewb.SaveAs(filename, xlWorkbookNormal)
ewb.Close(false)
e.Quit
e.delete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:20:16.910

```
esh.Range(J1).interior.ColorIndex = 0; 
```

# delphi - 更新到 Delphi XE 后调用过程 _ftol2_sse？

> ID：12922301
> 
> 赞同：0
> 
> 时间：2012-10-16T19:43:39.597
> 
> 标签：delphi, soap, dll, delphi-xe

在我们的程序中，我们使用 Web 服务将数据从第三方提取到我们的程序中。

自从我们从 Delphi 2009 更新到 Delphi XE 后，Windows server 2003 用户在对 Web 服务进行 SOAP 调用时收到以下错误消息。

![在此处输入图像描述](../Images/7cff6eee84f7b81e04cc9f02086ede92.png)

Server 2003 上的 msvcrt.dll 没有过程 _ftol2_sse，现在由于某种原因正在调用它。

我知道当我们在 Delphi 2009 上获得源代码时没有调用此过程，因为在运行这些构建时我在 Windows server 2003 上没有收到此错误。

这可行吗？IDE 中的更改会影响正在调用的 dll 过程吗？是否有人对我如何追踪或修复此错误有任何见解或想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:14:10.517

这是您就该主题提出的第三个类似问题。我将尝试为您提供一些背景信息并帮助您弄清楚发生了什么。

首先，重要的是要知道 msvcrt.dll 是一个系统组件。它不是 MSVC 运行时。它作为 Windows 的一部分提供。回到糟糕的过去，在 90 年代中期，许多开发人员认为 MSVC6 运行时始终可用。他们忽略了将运行时安装为程序安装的一部分。当安装程序碰巧找到没有 MSVC6 的机器时，这偶尔会引起麻烦。

MSVC 团队转移到不同名称的运行时 DLL、msvcrt70.dll、msvcrt80.dll 等。他们教育开发人员安装 MSVC 运行时应该是所有 MSVC 应用程序安装程序的一部分。

但 Windows 团队希望帮助那些安装程序假定 MSVC6 运行时可用的遗留应用程序。因此，他们将 MSVC6 运行时置于他们的控制之下，并开始随 Windows 一起发布。我认为这开始于 Windows 2000 或 XP 左右。

我要说明的一点是 msvcrt.dll 是一个您无法控制的系统 DLL。在您之前的问题中，您已经描述了修改该 DLL 的尝试。不要那样做。

现在，据我所知，2003 服务器附带的 msvcrt.dll 版本没有导出名为`_ftol2_sse`. 这不足为奇，因为 SSE 浮点在 2003 年服务器时代并未广泛使用。显然，您系统中的某些内容导致尝试导入`_ftol2_sse`.

[您应该能够通过使用Dependency Walker](http://www.dependencywalker.com/)找出引发这种情况的原因。使用 Profile 菜单上的功能启动您的应用程序并仔细研究日志。您应该能够看到导致尝试链接到的事件链`_ftol2_sse`。

如果有任何 Windows 代码链接到 msvcrt.dll，我会感到惊讶。该库纯粹是作为链接到 MSVC6 的旧版应用程序的道具提供的。但你永远不知道。

还可以尝试在 Dependency Walker 中加载您的可执行文件。查看导入的 DLL 列表。检查 msvcrt.dll 是否在列表中。如果是这样，请查看您的可执行文件导入了哪些函数，以及是否`_ftol2_sse`在该列表中。如果是这样，那么您将能够在 Delphi 源代码的某处找到它。

从网络上各种类似的冠冕堂皇的报道中，我怀疑您面临的问题是良性的。许多报告相同问题的人可以确定对话框并让他们的程序继续运行而不会出现问题。这表明您可以简单地抑制错误报告，从而解决您的问题。使用该[`SetErrorMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621.aspx)功能来做到这一点。你想包括`SEM_FAILCRITICALERRORS`标志。

请注意，它`SetErrorMode`有一个相当反常的界面。我见过的几乎所有代码都错误地使用了它。包括Delphi RTL中的代码，以及很多常用的Delphi第三方库。Raymond Chen像往常一样[解释如何正确使用它](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/27/198410.aspx)。

切换编译器会引发行为变化吗？他们当然可以。您正在使用的库代码的实现方式不同。或者在关键时刻错误模式可能有所不同。

# c++ - 递归函数中的堆栈溢出

> ID：12922303
> 
> 赞同：0
> 
> 时间：2012-10-16T19:43:52.513
> 
> 标签：c++, winapi

我正在编写一个简单的应用程序，它将某个目录中的所有文件输出到控制台。为了实现这一点，我在函数中动态分配内存`PathCreator()`并返回指向该内存的指针。我不知道如何在`GetAllFiles()`. 当我使用下面的代码时，我得到一个堆栈溢出异常。我怎样才能解决这个问题？请不要让我使用不需要动态分配内存的东西，我只想修复我的代码。

```
#include "stdafx.h"
#include <windows.h>
#include <iostream>
wchar_t *PathCreator(wchar_t *dir, wchar_t *fileName);
int is_directory(wchar_t *p)
{
    wchar_t *t = PathCreator(p,L"\\");
    WIN32_FIND_DATA file;
    HANDLE search_hendle = FindFirstFile(t, &file);
    long error = GetLastError();
    if(error == 267)
    {
        return 0;
    }
    else
    {
        return 1;
    }
}

wchar_t *PathCreator(wchar_t *dir, wchar_t *fileName)
{
    wchar_t* path = 0;
    int size = 0;
    wchar_t *d = dir;
    wchar_t *f = fileName;
    while(*d != '\0')
    {
        d++;
        size++;
    }
    while(*f != '\0')
    {
        f++;
        size++;
    }
    path = new wchar_t[(size+=3) * sizeof(wchar_t)];
    int j = 0;
    while(j < size)
    {
        path[j] = '\0';
        j++;
    }
    int i;
    i = 0;
    while(*dir != '\0')
    {
        path[i] = *dir;
        i++;
        dir++;
    }
    path[i++] = '\\';
    wchar_t *t = fileName;  
    while(*t != '\0')
    {
        path[i] = *t;
        i++;
        t++;
    }
    path[i] = '\0';
    return path;
} 

void GetAllFiles(wchar_t* dir)
{
    wchar_t *p = 0;

    int i = 0;
    WIN32_FIND_DATA file;
    wchar_t *t = PathCreator(dir, L"*");
    HANDLE search_hendle = FindFirstFile(t, &file);
    if(search_hendle)
    {

        do
        {
            p = PathCreator(dir,file.cFileName);
            if(!is_directory(p))
            {
                std::wcout << p << std::endl;
            }
            else
            {
                GetAllFiles(p);
            }
            delete [] p;
        }
        while(FindNextFile(search_hendle, &file));

    }
    delete [] t;
    FindClose(search_hendle);
}

int _tmain(int argc, _TCHAR* argv[])
{
    GetAllFiles(L"C:\\Users");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T19:56:19.877

所以你有了 ”。” 和“..”在您的目录搜索中。

第一个条目是“.”，所以：

```
p = PathCreator(dir, file.cFilename) 
```

产量：

```
"C:\Users\." 
```

然后是下一行：

```
if (!is_directory(p)) 
```

总是错误的，所以它只是不断递归到：

```
GetAllFiles(p) 
```

永远......或者直到你的堆栈爆炸，以先到者为准;-)

我建议明确检查“。” 和“..”并跳过这些条目（MFC 和 Qt 等也有很好的目录处理类，但我认为你想这样做）。

我的修改：

```
 do
    {

        // I added this - guess I can't embolden code text
        if (wcscmp(file.cFileName,L".") == 0 || wcscmp(file.cFileName,L"..")==0)
            continue;

        p = PathCreator(dir,file.cFileName);
        if(!is_directory(p))
        {
            std::wcout << p << std::endl;
        }
        else
        {
            GetAllFiles(p);
        }
        delete [] p;
    }
    while(FindNextFile(search_hendle, &file)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:29:38.273

你再次尝试使用`C`代替，`C++`你还在使用`wcout`？！没问题，您是程序员，我相信您有理由这样做！但是内存管理`C`要困难得多`C++`，你应该有一些使用它的技能。这是一个完整的工作代码，但正如您所见，它比使用标准容器和字符串的 C++ 版本更难管理、使用和理解，所以如果您被允许使用 C++（当您使用时`wcout`），那么请使用它的 C++ 版本以方便使用：

```
#include <Windows.h>
/*! \brief Merge \a folder and \a filename into a newly allocate memory and
 * return it to the caller. Use free to free returned memory!
 */
wchar_t* PathCreator( wchar_t const* folder, wchar_t const* filename )
{
    wchar_t* res;
    size_t i, len, folderLen = wcslen( folder ), filenameLen = wcslen( filename );
    len = folderLen + filenameLen;
    if( folder[folderLen - 1] != '\\' ) ++len;
    ++len;  // for \0

    res = (wchar_t*) malloc( sizeof(wchar_t) * len );
    if( !res ) return NULL;

    wcscpy_s( res, len, folder );
    /* Remove possible wide card at end of folder */
    for( i = folderLen; i--; ) {
        if( res[i] == '*' || res[i] == '?' ) {
            res[i] = 0;
            --folderLen;
        } else {
            break;
        }
    }
    if( res[folderLen - 1] != '\\' ) wcscat_s( res, len, L"\\" );
    wcscat_s( res, len, filename );

    return res;
}
/*! \brief Free memory that returned by \ref GetAllFiles
 */
void FreeAllFilesMemory( wchar_t** p )
{
    wchar_t** tmp = p;
    if( !p ) return ;
    while( *tmp ) free( *tmp++ );
    free( p );
}
wchar_t** AddToArray( wchar_t** p, size_t* pAllocated, size_t* pUsed, wchar_t* s )
{
    if( *pUsed >= *pAllocated ) {
        size_t newAlloc = *pAllocated * 3 / 2;  // Grow by 1.5
        if( newAlloc < 16 ) newAlloc = 16;
        p = (wchar_t**) realloc( p, newAlloc * sizeof(wchar_t*) );
        if( !p ) return NULL;
        *pAllocated = newAlloc;
    }

    p[*pUsed] = s;
    ++*pUsed;
    return p;
}
wchar_t** GetAllFilesImpl( wchar_t const* folder, wchar_t** res, size_t* pAllocated, size_t* pUsed )
{
    HANDLE hSearch;
    WIN32_FIND_DATAW fileinfo;
    size_t allocatedMemory = 0;

    hSearch = FindFirstFileW( folder, &fileinfo );
    if( hSearch != INVALID_HANDLE_VALUE ) {
        do {
            wchar_t* sFileName, ** tmp, sTmp[ 1024 ];
            /* ignore ., .. */
            if( !wcscmp(fileinfo.cFileName, L".") ||
                !wcscmp(fileinfo.cFileName, L"..") )
                continue;
            sFileName = PathCreator( folder, fileinfo.cFileName );
            wprintf( L"%s\n", sFileName );  /* Print result */
            tmp = AddToArray( res, pAllocated, pUsed, sFileName );
            if( !tmp ) return FreeAllFilesMemory(res), NULL;
            res = tmp;
            if( fileinfo.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY ) {
                wcscpy_s( sTmp, sFileName );
                wcscat_s( sTmp, L"\\*" );
                tmp = GetAllFilesImpl( sTmp, res, pAllocated, pUsed );
                if( !tmp ) return NULL;
                res = tmp;
            }
        } while( FindNextFileW(hSearch, &fileinfo) );
        FindClose( hSearch );
    }
    return res;
}
/*! \brief List all files that match a pattern and return it as an array of
 * wide strings, free result using \ref FreeAllFilesMemory
 */
wchar_t** GetAllFiles( wchar_t const* folder )
{
    size_t nAllocated = 0, nUsed = 0;
    wchar_t** res = GetAllFilesImpl( folder, NULL, &nAllocated, &nUsed );
    if( res ) {
        /* to indicate end of result add a NULL string */
        wchar_t** tmp = AddToArray( res, &nAllocated, &nUsed, NULL );
        if( !tmp ) return FreeAllFilesMemory(res), NULL;
        res = tmp;
    }
    return res;
} 
```

# java - Android pop countdown

> ID：12922306
> 
> 赞同：0
> 
> 时间：2012-10-16T19:44:06.840
> 
> 标签：java, android, view, countdown

I am tring to make a circle pop after 3 seconds and disappear in 3 seconds in a loop. this program pop the circle after 3 seconds but I have problem with the 3 seconds duration beteen.

it will be great if some one will have a solution for me

```
public class TestView extends View{

private boolean isPop;

public TestView(Context context) {
    super(context);

    isPop=false;
    // TODO Auto-generated constructor stub
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawColor(Color.RED);

    Paint circle = new Paint();
    circle.setColor(Color.BLUE);
    if (isPop){
        canvas.drawCircle(100, 100, 40, circle);
    }
    invalidate();

    CountDownTimer count = new CountDownTimer(3000, 1000) {

        public void onTick(long millisUntilFinished) {
        }

        public void onFinish() {

            CountDownTimer count = new CountDownTimer(3000, 1000) {

                public void onTick(long millisUntilFinished) {
                    isPop=true;

                }

                public void onFinish() {

                    isPop=false;

                }

             }.start();             
        }

     }.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:50:18.960

Consider using the Handler that comes with every View instead:

```
class TestView extends View { 
    private Paint circle = new Paint();
    private boolean isPop = false;
    private Runnable everyThreeSeconds = new Runnable() {
        public void run() {
            // Do something spiffy like...
            isPop = !isPop;
            invalidate();

            // Don't forget to call you next three second interval!
            postDelayed(everyThreeSeconds, 3000);
        }
    };

    public TestView(Context context) {
        this(context, null);
    }

    public TestView(Context context, AttributeSet attrs) {
        super(context, attrs);
        circle.setColor(Color.BLUE);
        post(everyThreeSeconds);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawColor(Color.RED);

        if (isPop){
            canvas.drawCircle(100, 100, 40, circle);
        }
    }
} 
```

# asp.net - 向 Gridview 添加多个页脚行

> ID：12922309
> 
> 赞同：2
> 
> 时间：2012-10-16T19:44:20.423
> 
> 标签：asp.net, vb.net

我正在尝试向页脚添加更多行，但我的代码不断出现错误。我已经为此工作了几天。请帮忙！

```
Partial Class Capacity_Plan_Default
    Inherits System.Web.UI.Page

    Private Property EngTotalQuoteHours As Decimal
    Private Property EngTotalUsedHours As Decimal
    Private Property column1 As Decimal
    Private Property column2 As Decimal
    Private Property column3 As Decimal
    Private Property CNC_5Axis As Decimal
    Private Property CNC_Large As Decimal
    Private Property CNC_Small As Decimal
    Private Property EDM_Large As Decimal
    Private Property EDM_Small As Decimal
    Private Property EDM_Trodes As Decimal
    Private Property Assy As Decimal
    Private Property Polish As Decimal
    Private Property Sample As Decimal

    Private Property orginalDatatable As Data.DataTable

    Protected Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound

        If e.Row.RowType = DataControlRowType.DataRow Then

            Dim hourRow As GridViewRow = e.Row

            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "Eng_Quoted_Hrs")) Then
                EngTotalQuoteHours += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "Eng_Quoted_Hrs"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "Eng_Used_Hrs")) Then
                EngTotalUsedHours += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "Eng_Used_Hrs"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "column1")) Then
                column1 += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "column1"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "column2")) Then
                column2 += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "column2"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "column3")) Then
                column3 += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "column3"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "CNC_5Axis")) Then
                CNC_5Axis += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "CNC_5Axis"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "CNC_Large")) Then
                CNC_Large += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "CNC_Large"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "CNC_Small")) Then
                CNC_Small += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "CNC_Small"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "EDM_Large")) Then
                EDM_Large += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "EDM_Large"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "EDM_Small")) Then
                EDM_Small += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "EDM_Small"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "EDM_Trodes")) Then
                EDM_Trodes += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "EDM_Trodes"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "Assy")) Then
                Assy += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "Assy"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "Polish")) Then
                Polish += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "Polish"))
            End If
            If Not IsDBNull(DataBinder.Eval(e.Row.DataItem, "Sample")) Then
                Sample += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "Sample"))
            End If

        ElseIf e.Row.RowType = DataControlRowType.Footer Then
            e.Row.Cells(0).Text = "Total Hours:"
            e.Row.Cells(5).Text = EngTotalQuoteHours.ToString
            e.Row.Cells(6).Text = EngTotalUsedHours.ToString
            e.Row.Cells(7).Text = column1.ToString
            e.Row.Cells(8).Text = column2.ToString
            e.Row.Cells(9).Text = column3.ToString
            e.Row.Cells(10).Text = CNC_5Axis.ToString
            e.Row.Cells(11).Text = CNC_Large.ToString
            e.Row.Cells(12).Text = CNC_Small.ToString
            e.Row.Cells(13).Text = EDM_Large.ToString
            e.Row.Cells(14).Text = EDM_Small.ToString
            e.Row.Cells(15).Text = EDM_Trodes.ToString
            e.Row.Cells(16).Text = Assy.ToString
            e.Row.Cells(17).Text = Polish.ToString
            e.Row.Cells(18).Text = Sample.ToString

            Dim GridView1 As GridView = CType(sender, GridView)
            ''gets the current footer row to clone
            Dim footer As GridViewRow = GridView1.FooterRow
            Dim numCells = footer.Cells.Count

            Dim newRow As New GridViewRow(footer.RowIndex + 1, -1, footer.RowType, footer.RowState)

            ''have to add in the right number of cells
            ''this also copies any styles over from the original footer
            For i As Integer = 0 To numCells - 1
                Dim emptyCell As New TableCell
                emptyCell.ApplyStyle(GridView1.Columns(i).ItemStyle)

                newRow.Cells.Add(emptyCell)
            Next

            newRow.Cells(5).Text = (EngTotalQuoteHours / 46).ToString

            ''add new row to the gridview table, at the very bottom
            CType(GridView1.Controls(0), Table).Rows.Add(newRow)

        End If
    End Sub
End Class 
```

我得到的错误如下。

你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

源错误：

第 90 行：''获取当前页脚行以克隆第 91 行：将页脚调暗为 GridViewRow = GridView1.FooterRow 第 92 行：Dim numCells = footer.Cells.Count 第 93 行：第 94 行：将 newRow 作为新的 GridViewRow(footer.RowIndex + 1、-1、footer.RowType、footer.RowState)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:09:58.393

我认为在这种情况下 GridView1.FooterRow 是 null 所以而不是

```
Dim footer As GridViewRow = GridView1.FooterRow 
```

采用

```
Dim footer As GridViewRow = e.Row 
```

# mysql - 根据日期限制大表

> ID：12922311
> 
> 赞同：1
> 
> 时间：2012-10-16T19:44:25.700
> 
> 标签：mysql, date, limit

我有一个包含 500 万行的表，我只想获取具有`date`两个日期（date1 和 date2）之间的字段的行。我试着做

```
select column from table where date > date1 and date < date2 
```

但是处理时间真的很大。有没有更聪明的方法来做到这一点？也许直接访问一行并仅在该行之后进行查询？我的意思是，有没有办法丢弃与日期期间不匹配的大部分表格？或者我必须逐行阅读并比较日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:59:22.070

您可以尝试/做几件事：

1.) 如果您还没有，请索引您的日期列

2.) 在日期字段上对表进行范围分区

当您对表进行分区时，查询优化器可以消除在不实际处理任何数据的情况下无法满足查询的分区。

例如，假设您按日期字段每月对表进行分区，并且表中有 6 个月的数据。如果查询 OCT-2012 的一周范围内的日期，查询优化器会抛出 6 个分区中的 5 个，只扫描 2012 年 OCT 月份有记录的分区。

有关更多详细信息，请查看[MySQL 分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)页面。它为您提供了所有必要的信息，并为我在上面的“分区修剪”部分中描述的内容提供了一个更完整的示例。

请注意，我建议在新的分区表中创建/克隆您的表并执行查询以测试结果以及它是否满足您的要求。如果您还没有索引日期列，那应该是您的第一步，测试，如果需要检查分区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:49:00.640

通常，您在检索结果之前应用某种条件。如果您没有任何要过滤的内容，则可能要使用`LIMIT`and `OFFSET`：

```
SELECT * FROM table_name WHERE date BETWEEN ? AND ? LIMIT 1000 OFFSET 1000 
```

通常，您会`LIMIT`在特定页面上显示任何数量的记录。

# css - 如何在Firefox中旋转元素

> ID：12922312
> 
> 赞同：0
> 
> 时间：2012-10-16T19:44:52.310
> 
> 标签：css, 3d, rotation

我正在尝试旋转像[http://jsfiddle.net/jeanluca/HKpAX/这样的 div](http://jsfiddle.net/jeanluca/HKpAX/)

在 chrome 中哪个看起来比 firefox 更好，但为什么呢？Firefox 不支持这些类型的旋转还是我错过了一个 css 属性？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:51:27.553

你`px`缺少`perspective`属性

```
.container {
    height: 100% ;
    width: 100% ;
    -webkit-perspective: 200px ; 
       -moz-perspective: 200px ; /* 200px instead of 200 */

    margin-left:200px ;
} 
```

[**演示**](http://jsfiddle.net/HKpAX/1/)

# hibernate - 休眠查询 - 如何选择那些所有孩子都匹配一个值的父母？

> ID：12922320
> 
> 赞同：5
> 
> 时间：2012-10-16T19:45:19.363
> 
> 标签：hibernate, jpa, jpql

我正在尝试编写一个 Hibernate (JPA) 查询来选择那些**所有**孩子都匹配一个属性的父母。

让我们举一个实际的例子......

我想选择那些孩子都是金发**的父亲。**如果只有一个是黑发的，则不会选择父亲。

查询将如何显示？先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:17:48.190

也许这样的事情会起作用：

```
From Father f
where not exists (select c from f.children c where not c.hair = "BLONDE"); 
```

只是一个想法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:01:27.243

`ALL` 使用参见[http://openjpa.apache.org/builds/1.1.0/docs/jpa_langref.html#jpa_langref_all_any](http://openjpa.apache.org/builds/1.1.0/docs/jpa_langref.html#jpa_langref_all_any)试试这个：

```
select p from parent where 'blonde'=all(parent.children.haircolor) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T15:52:19.247

这也应该有效，并且看起来更干净。

```
SELECT p from Parent p join p.children c where c.haircolor = 'blonde'; 
```

# sql - SQL 扁平化数据

> ID：12922326
> 
> 赞同：2
> 
> 时间：2012-10-16T19:45:28.460
> 
> 标签：sql, tsql

我绝不是 SQL 专家，只是知道我的方法。

我需要展平一些数据以便为 SQL 报告目的生成它。

因此我的查询不是最佳的，因为它很慢，我相信有 10 种更好的方法可以做到这一点：

这里的核心列是 InspectionID，它是 Inspections 表的主键

有什么建议吗？

```
SELECT      
    INSP.HouseSiteNo,
    (SELECT TOP 1 WORKFLOWSTATES.Name FROM INSPECTIONWORKFLOWITEM WFITEM 
        INNER JOIN WORKFLOWSTATES ON WFITEM.WorkflowStateID = WORKFLOWSTATES.WorkflowStateID
        WHERE WFITEM.InspectionID = INSP.InspectionID AND WORKFLOWSTATES.StateNumber = 1) as StateName
    FROM INSPECTIONS INSP       
ORDER BY HouseSiteNo 
```

表结构如下：

检查：

```
HouseSiteNo     HouseType    ProjectID                              InspectionID
1                A           543C6381-8704-4129-B484-05B02927F690   E061F76F-8998-450B-B08C-DA2817B310A4
2                A           543C6381-8704-4129-B484-05B02927F690   E0D1F3DB-51D4-465A-A0B4-ACFFF181DC56 
```

检查工作流程

```
InspectionID                            WorkflowStateID                         DateStarted               StateCompleted    ID
FAA4E366-1D57-4699-982C-001FF351D717    AB2B7DA0-A90A-46FB-8F4B-8E662191E380    2012-09-09 00:00:00.000 0   D77332CB-D026-409A-814D-5632C109850A
FAA4E366-1D57-4699-982C-001FF351D717    E2AC895A-0986-4A03-B104-A727D41405E3    2012-09-09 00:00:00.000 0   F118FD02-20C4-4B45-8539-6F8BDC6B3868
FAA4E366-1D57-4699-982C-001FF351D717    F0469593-1B6B-4F98-92AE-DF50E76B9ED8    2012-09-09 00:00:00.000 0   8FBEE61B-D7B3-4D13-9FC8-730EB0FE7C95
FAA4E366-1D57-4699-982C-001FF351D717    5929D0CA-E8B0-42EE-9CF4-E3FBC9973AA6    2012-09-09 00:00:00.000 0   02646FE5-B338-4D6F-B5F5-7984B0EF7BF5
FAA4E366-1D57-4699-982C-001FF351D717    ECDDB790-88A4-4654-889D-BCA577C35CA8    2012-09-09 00:00:00.000 0   0B9C26FA-8D9D-4552-A3FE-84D4D21F5791
FAA4E366-1D57-4699-982C-001FF351D717    099D66A4-16F2-4E72-A42A-06B4D6DC0102    2012-09-09 00:00:00.000 0   3B90F113-5194-4ED2-B920-8DA004C9EA5C
FAA4E366-1D57-4699-982C-001FF351D717    66132F53-0A0E-431A-AD84-ADE77656CDF0    2012-09-09 00:00:00.000 0   05223484-8BB3-43A8-A9A8-C8FBC6270186
9AC52A0A-BC2D-4BBD-9585-0028C07ACC27    F0469593-1B6B-4F98-92AE-DF50E76B9ED8    2012-09-09 00:00:00.000 0   A1471AF4-B733-488C-86B4-FB29970E536E
9AC52A0A-BC2D-4BBD-9585-0028C07ACC27    ECDDB790-88A4-4654-889D-BCA577C35CA8    2012-09-09 00:00:00.000 0   30F3A1F9-6E51-4504-A9FD-B32FD2B35B39
9AC52A0A-BC2D-4BBD-9585-0028C07ACC27    5929D0CA-E8B0-42EE-9CF4-E3FBC9973AA6    2012-09-09 00:00:00.000 0   760D4907-ED6C-4D84-AED9-775FBBAE5123
9AC52A0A-BC2D-4BBD-9585-0028C07ACC27    AB2B7DA0-A90A-46FB-8F4B-8E662191E380    2012-09-09 00:00:00.000 0   49D632C7-31D0-4818-AC36-564F157D1959
9AC52A0A-BC2D-4BBD-9585-0028C07ACC27    66132F53-0A0E-431A-AD84-ADE77656CDF0    2012-09-09 00:00:00.000 0   C6771081-198D-475B-BA09-14BB696567DA
9AC52A0A-BC2D-4BBD-9585-0028C07ACC27    099D66A4-16F2-4E72-A42A-06B4D6DC0102    2012-09-09 00:00:00.000 0   F265B140-25C5-46CA-B060-2A27CD9F9D00
9AC52A0A-BC2D-4BBD-9585-0028C07ACC27    E2AC895A-0986-4A03-B104-A727D41405E3    2012-09-09 00:00:00.000 0   E56AEC15-4BA1-4089-B1A7-3BF054568929 
```

工作流状态

```
WorkflowStateID                         Name          StateNumber
099D66A4-16F2-4E72-A42A-06B4D6DC0102    State 3     3
AB2B7DA0-A90A-46FB-8F4B-8E662191E380    State 6     6
E2AC895A-0986-4A03-B104-A727D41405E3    State 1     1
66132F53-0A0E-431A-AD84-ADE77656CDF0    State 2     2
ECDDB790-88A4-4654-889D-BCA577C35CA8    State 5     5
F0469593-1B6B-4F98-92AE-DF50E76B9ED8    State 7     7
5929D0CA-E8B0-42EE-9CF4-E3FBC9973AA6    State 4     4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:47:11.743

如果您使用的是 SQL Server 2005 或更新版本，您可以使用[cross/outer apply](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
SELECT  INSP.HouseSiteNo, StateName.Name
FROM INSPECTIONS INSP 
CROSS APPLY
(
    SELECT TOP 1 WORKFLOWSTATES.Name FROM INSPECTIONWORKFLOWITEM WFITEM 
    INNER JOIN WORKFLOWSTATES ON WFITEM.WorkflowStateID = WORKFLOWSTATES.WorkflowStateID
    WHERE WFITEM.InspectionID = INSP.InspectionID AND WORKFLOWSTATES.StateNumber = 1
) StateName
ORDER BY HouseSiteNo 
```

~~当我在一个批次中运行这两个查询时，实际执行计划显示您的查询成本相对于批次是 68%，而我的成本是 32% - 所以这是巨大的性能提升。~~业绩增长是由于缺乏`ORDER BY`陈述造成的。目前，它们都占批次的 50%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:36:07.563

不确定这是否是您要查找的内容。

如果您的查询需要很长时间并且有效，请尝试通过分析器运行它并查看是否有可以添加的索引以提高性能。

```
SELECT i.HouseSiteNo, w.Name
FROM Inspections i
JOIN InspectionWorkflowItem wfi on i.InspectionID = wfi.InspectionID
JOIN WorkflowStatus w on w.WorkflowStateID = wfi.WorkflowStateID
WHERE w.StateNumber = 1
ORDER BY i.HouseSiteNo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:22:24.643

这是一个潜在的问题。没有唯一排序的前 1 名是不确定的。
即使是具有聚集 PK 的表也不能保证在没有排序的情况下返回相同的前 1。

```
SELECT TOP 1 WORKFLOWSTATES.Name 
FROM INSPECTIONWORKFLOWITEM WFITEM 
INNER JOIN WORKFLOWSTATES 
   ON WFITEM.WorkflowStateID = WORKFLOWSTATES.WorkflowStateID
WHERE WFITEM.InspectionID = INSP.InspectionID 
  AND WORKFLOWSTATES.StateNumber = 1

SELECT INSP.HouseSiteNo, min(WORKFLOWSTATES.Name)  -- at least min is deterministic 
FROM FROM INSPECTIONS INSP 
JOIN INSPECTIONWORKFLOWITEM WFITEM
  ON WFITEM.InspectionID = INSP.InspectionID
JOIN WORKFLOWSTATES 
  ON WORKFLOWSTATES.WorkflowStateID = WFITEM.WorkflowStateID
 AND WORKFLOWSTATES.StateNumber = 1
GROUP BY INSP.HouseSiteNo
ORDER BY INSP.HouseSiteNo 
```

# php - ftp_get 不会下载图像

> ID：12922329
> 
> 赞同：2
> 
> 时间：2012-10-16T19:45:47.063
> 
> 标签：php, ftp

```
 $fp = 'test.png';
    $server_file = "dir/testing.png";

    //-- Connection Settings
    $ftp_server = 'ftp.net';; // Address of FTP server.
    $ftp_user_name ='user'; // Username
    $ftp_user_pass = 'password'; // Password

    // set up basic connection
    $conn_id = ftp_connect($ftp_server,21);

    // login with username and password
   $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);       
   $mode = ftp_pasv($conn_id, TRUE);

   $download=ftp_get($conn_id, $fp, $server_file, FTP_BINARY);
    // try to download $server_file and save to $local_file
    if ( $download) {
        echo "Successfully $fp\n";

    } else {
        echo "There was a problem\n";
    }

    ftp_close($conn_id); 
```

当我运行它时，它说它成功，但不会写入或下载文件。如果我`echo file_get_contents($fp);`那么它将显示解构为文本的图像 [在 Web 浏览器中]

需要下载图片和视频...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-07T21:01:22.763

尝试添加

```
header('Content-Type: image/png'); 
```

# javascript - XML 按 JavaScript 中的标签排序

> ID：12922330
> 
> 赞同：1
> 
> 时间：2012-10-16T19:45:52.450
> 
> 标签：javascript, xml, sorting

我正在尝试转换此 XML 树

```
<IN1>
    <IN1.1>
        <IN1.1.1>1</IN1.1.1>
    </IN1.1>
    <IN1.17>
        <IN1.17.1>1</IN1.17.1>
    </IN1.17>
    <IN1.47>
        <IN1.47.1>C</IN1.47.1>
    </IN1.47>
    <IN1.3>
        <IN1.3.1>paycode</IN1.3.1>
    </IN1.3>
</IN1> 
```

进入这个

```
<IN1>
    <IN1.1>
        <IN1.1.1>1</IN1.1.1>
    </IN1.1>
    <IN1.3>
        <IN1.3.1>paycode</IN1.3.1>
    </IN1.3>
    <IN1.17>
        <IN1.17.1>1</IN1.17.1>
    </IN1.17>
    <IN1.47>
        <IN1.47.1>C</IN1.47.1>
    </IN1.47>
</IN1> 
```

我目前的代码是

```
for each (field in msg['IN1'].children()) 
{
    fields.push(field.toString());
}
fields.sort(); 
```

这对最后两个元素进行排序，然后重新排列前两个元素。解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:55:19.470

[通过使用 jQuery TinySort](http://tinysort.sjeiti.com/)插件，您可能会找到一些运气。您可以根据数字/字母参数对 DOM 元素进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:15:34.923

1) 编写递归算法，对树中的每个节点进行排序。

对于每个孩子：

2) 将元素下的所有子元素聚集到一个 JavaScript 数组中。
3) 根据自定义标准对数组进行排序。
4) 迭代数组，按排序顺序将子代添加到父代。
^(注意：将子元素重新添加到 DOM 会自动将其从之前的位置移除。)

如果您需要有关这些部分的其他帮助，请随时澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:07:35.227

创建 XSLT 是为了将 XML 从一种形式转换为另一种形式（[jsFiddle](http://jsfiddle.net/Zqqaq/6/)）：

```
var xml = "<IN1><IN1.1><IN1.1.1>1</IN1.1.1></IN1.1><IN1.17><IN1.17.1>1</IN1.17.1></IN1.17><IN1.47><IN1.47.1>C</IN1.47.1></IN1.47><IN1.3><IN1.3.1>paycode</IN1.3.1></IN1.3></IN1>";
var xsl = "<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"><xsl:template match=\"IN1\"><IN1><xsl:apply-templates select=\"*\"><xsl:sort select=\"substring-after(name(), 'IN1.')\" data-type=\"number\"/></xsl:apply-templates></IN1></xsl:template><xsl:template match=\"*\"><xsl:copy-of select=\".\"/></xsl:template></xsl:stylesheet>";
var parser = new DOMParser();
var domToBeTransformed = parser.parseFromString(xml, "text/xml");
var xslt = parser.parseFromString(xsl, "text/xml");
var processor = new XSLTProcessor();
processor.importStylesheet(xslt);
var newDocument = processor.transformToDocument(domToBeTransformed);
var serializer = new XMLSerializer();
var newDocumentXml = serializer.serializeToString(newDocument);
alert(newDocumentXml); 
```

以上代码适用于 Chrome 和 Firefox；[小提琴](http://jsfiddle.net/Zqqaq/6/)有 IE 的实现。IE 的诀窍在于它对 Active X 的依赖。它都是随 IE 一起安装的，不过，实际上，没有使用“外部”库。

祝你好运。

# java - 从 ListBuffer 中删除元素

> ID：12922334
> 
> 赞同：4
> 
> 时间：2012-10-16T19:46:06.180
> 
> 标签：java, scala, iterator, scala-collections

根据[这个帖子](https://stackoverflow.com/a/5753935/456933)，据说[ListBuffer](http://www.scala-lang.org/api/current/scala/collection/mutable/ListBuffer.html)允许恒定时间删除第一个和最后一个元素。我一直在研究 API 参考和 ListBuffer 源代码，但我找不到如何在恒定时间内删除最后一个元素，同时`remove(0)`为第一个元素完成这项工作。删除最后一个元素的正确方法是什么？

另一个问题：是否可以在迭代 ListBuffer 时有效地删除元素？在 Java 中它可以完成，`Iterator.remove()`但 Scala 迭代器似乎没有该`remove()`方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:56:34.327

第一个问题有一个简单但令人失望的答案：您不能在恒定时间内删除最后一个元素，因为这样做需要引用最后一个元素。（它是一个单链表，在一个包含列表开始和结束元素的包装类中。）

第二个问题同样简单，也许令人失望：`Iterator`Scala 中的 s 只是集合的视图。他们不会修改基础集合。（这符合“默认情况下不可变，仅在必要时可变”的理念。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:56:40.633

您可以删除最后一个元素`trimEnd(1)`

# unit-testing - IronPython.Modules.PythonSignal 导入单元测试模块时抛出异常

> ID：12922336
> 
> 赞同：0
> 
> 时间：2012-10-16T19:46:10.720
> 
> 标签：unit-testing, signals, ironpython

这里有一个有趣的案例：我在我的家用机器和工作中使用 IronPython 2.7.3。导入 unittest 在家里可以正常工作，但在工作中不行：

![铁蟒错误](../Images/3d3d84b03b20cdde826850c0bcba746a.png)

知道发生了什么吗？奇怪的是我卸载了 Iron Python，重新安装了，我能够导入 unittest 一个小时而没有问题。我走了一会儿，试图运行额外的测试，但它又坏了。知道可能是什么原因吗？

编辑：遵循杰夫的建议，基本例外是： ![在此处输入图像描述](../Images/3db9d245cf1fcc5281e2f51c75be8ba4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:29:04.330

尝试`import signal`直接运行，看看是否仍然出现。此外，尝试运行 with`ipy -X:ExceptionDetail -X:ShowClrExceptions`以查看其中是否包含任何额外信息。

PythonSignal 必须做一些 P/Invoke 代码，这对于一些奇怪的行为总是有好处的。

# php - 比较 $.ajax 结果

> ID：12922339
> 
> 赞同：0
> 
> 时间：2012-10-16T19:46:32.273
> 
> 标签：php, javascript, jquery, ajax

我只想知道如何比较 JavaScript 中 $.ajax 调用产生的回声。我尝试了这个，即使我得到`1`了，它实际上并没有正确比较结果。

jQuery：

```
 $.ajax({
        type: "POST",
        url: "login.php",
        data: user,
        dataType: 'html',
        success: function(result)
        {
            alert(result);
            if(result == '1')
            {
                alert("logged in :D");
                //document.location.replace('home.php');
            }
            else
            {
                alert("not logged in :<");
            }
        },
        failure: function()
        {
            alert('An Error has occured, please try again.');
        }
    }); 
```

PHP：

```
<?php
session_start();
$host = "localhost";
$user = "root";
$passw = "";
$con = mysql_connect($host, $user, $passw);

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

$json = $_REQUEST['json'];
$json = stripslashes($json);

$jsonobj = json_decode($json);

$password = $jsonobj->password;
$email = $jsonobj->email;

mysql_select_db("tinyspace", $con);

$result = mysql_query("SELECT 1 FROM users WHERE email = '"
                    . $email . "' AND password = '" . $password . "'");

 while($info = mysql_fetch_array( $result )) 
 { 
    if($info[0] == 1)
    {
        echo '1';
    }
}
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:00:19.060

在回显的“1”之后可能有空格或换行符。检查开始标签之前是否没有空格`<?php`并删除结束`?>`标签（您可以这样做，这将防止意外的空白被输出。

您应该能够通过将 javascript 更改为：

```
alert('X' + result + 'X'); 
```

您很快就会看到 . 周围是否有任何空白`result`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:08:45.647

尝试发送 json 响应

php:

```
echo json_encode(array(
    'status' => 'ok',
)); 
```

js：

```
dataType : "json",
success : function(response) {
    if (response.status == "ok") {
        alert('success');
    } else {
        alert('error');
    }
} 
```

# facebook-javascript-sdk - fbAsyncInit：3次刷新后显示的用户名

> ID：12922346
> 
> 赞同：0
> 
> 时间：2012-10-16T19:46:52.933
> 
> 标签：facebook-javascript-sdk

我正在使用 PHP Facebook API 和 Javascript 部分来检查用户是否已登录。

但是我的用户名会在页面刷新 3 次后显示。这是我采取的步骤。

1.  登录脸书
2.  转到我的网站（第一次访问）
3.  刷新我的网站 2 次
4.  我的用户名将显示

有人知道这个问题吗？

# c# - 有没有办法在 C# 中以通用方式表达通用处理程序？

> ID：12922347
> 
> 赞同：3
> 
> 时间：2012-10-16T19:46:54.217
> 
> 标签：c#

想象一下，我有一个指定一些集合处理程序的接口：

```
interface ICollectionHandler<T> where T : new() { ... } 
```

然后我有同样的其他类需要一个集合处理程序，它将用于各种类型，所以我想做类似的事情：

```
class SomeClass<T> where T : ICollectionHandler<> ... 
```

但是，如果我这样做，我会收到一条错误消息，指出“缺少类型参数”。

那么有没有办法指定 T 是一个泛型类型，它自己的类型参数可以在运行时指定，或者我是否将 C# 推到了它的（可能是明智的）边界之外？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:54:25.273

您可以尝试以下方法：

```
interface ICollectionHandler<T> where T : new() { }

public class MyImplementation<T, U> where T : ICollectionHandler<U> { } 
```

我很确定需要知道哪些泛型类型驻留在您的接口实现中。如果您不关心该子类型：

```
interface ICollectionHandler { }

public abstract class CollectionHandler<T> : ICollectionHandler where T : new()  { }

public class MyImplementation<T> where T : ICollectionHandler { } 
```

但这真的取决于你将如何使用它以及在什么情况下使用它。也许你可以提供更多细节？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T19:52:22.920

您可以为它创建一个基本接口`ICollectionHandler<T>`并对其进行约束。

```
interface ICollectionHandler { ... }
interface ICollectionHandler<T> : ICollectionHandler where T : new() { ... }
class SomeClass<T> where T : ICollectionHandler { ... } 
```

或者添加一个参数来`SomeClass`表示应该传递给`ICollectionHandler<T>`约束的类型：

```
class SomeClass<T, U> where T : ICollectionHandler<U> { ... } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T19:52:54.073

您可以将第二个类型参数添加到`SomeClass`：

```
class SomeClass<T, U> where T : ICollectionHandler<U> ... 
```

# c - 截图

> ID：12922348
> 
> 赞同：3
> 
> 时间：2012-10-16T19:46:55.277
> 
> 标签：c, screen, screenshot, image

我正在尝试使用此代码：

```
bool SaveBMPFile(char *filename, HBITMAP bitmap, HDC bitmapDC, int width, int height);

bool ScreenCapture(int x, int y, int width, int height, char *filename){
// get a DC compat. w/ the screen
HDC hDc = CreateCompatibleDC(0);

// make a bmp in memory to store the capture in
HBITMAP hBmp = CreateCompatibleBitmap(GetDC(0), width, height);

// join em up
SelectObject(hDc, hBmp);

// copy from the screen to my bitmap
BitBlt(hDc, 0, 0, width, height, GetDC(0), x, y, SRCCOPY);

// save my bitmap
bool ret = SaveBMPFile(filename, hBmp, hDc, width, height);

// free the bitmap memory
DeleteObject(hBmp);

return ret;
} 
```

它抛出这些错误：

```
bot.c|185|error: expected '=', ',', ';', 'asm' or '__attribute__' before 'SaveBMPFile'|
bot.c|187|error: expected '=', ',', ';', 'asm' or '__attribute__' before 'ScreenCapture'| 
```

我能做些什么？尝试不同的代码不起作用，并尝试使用 Gdi+- 也错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:51:26.197

我想你不见了`#include <stdbool.h>`。

`bool`不是 C 中的原始类型。您必须包含`<stdbool.h>`标头才能获得其定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:51:50.017

您的错误可能实际上在您显示的代码之前。错误消息说它期待其中之一；因此，在您显示的摘录之前，很可能有一行您没有以分号 ( `;`) 结尾，或者您没有以右括号 ( ) 结尾的函数。`}`一件事是确保您没有将其粘贴到另一个函数的中间；你不能在 C 中嵌套函数。

# ios - 在主线程外创建 UIImage

> ID：12922349
> 
> 赞同：0
> 
> 时间：2012-10-16T19:46:55.823
> 
> 标签：ios, multithreading, uikit, uiimage

我正在使用下面的代码在后台线程中创建一个 UIImage，然后将此图像设置为我在主线程上的视图的图像。偶尔，我会遇到一个糟糕的访问错误。我想知道我是否不应该在后台线程中创建 UIImage 。有什么想法吗？

```
CGImageRef imageRef =
    CGImageCreate(serverInit.rfbWidth,serverInit.rfbHeight,bitsPerComponent,bitsPerPixel,bytesPerRow,colorSpaceRef,bitmapInfo,provider,NULL,NO,renderingIntent);

    screenImage = [UIImage imageWithCGImage:imageRef];

    CFRelease(imageRef);

    [view performSelector:@selector(replaceImage:) onThread:[NSThread mainThread] withObject:screenImage waitUntilDone:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:17:55.103

尝试使用它，它可以防止 screenImage 被释放

```
CGImageRef imageRef = CGImageCreate(serverInit.rfbWidth,serverInit.rfbHeight,bitsPerComponent,bitsPerPixel,bytesPerRow,colorSpaceRef,bitmapInfo,provider,NULL,NO,renderingIntent);
    screenImage = [UIImage imageWithCGImage:imageRef];
    CFRelease(imageRef);
dispatch_sync(dispatch_get_main_queue(), ^{
   [view replaceImage:screenImage];
}); 
```

# svg - 为什么svg中的文字不显示？

> ID：12922350
> 
> 赞同：10
> 
> 时间：2012-10-16T19:46:56.743
> 
> 标签：svg

我有一个简单的 svg 元素，

```
<svg height="100" width="710">
  <rect width="700" height="50"/>
    <rect width="70" height="50" style="fill: rgb(0, 0, 255);">
      <text y="0" style="fill: white;">-0.123994</text>
    </rect>
    <rect width="70" height="50" style="fill: rgb(255, 0, 0);" transform="translate(630,0)">
    <text y="50">0.387869</text>
  </rect>
</svg> 
```

为什么没有任何一个`text`元素出现？这就是它所显示的： ![在此处输入图像描述](../Images/a20117cd8730845b764d0d07ab7fa164.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T20:20:11.730

你不能把`text`标签放在`rect`. 如果要在 rect 元素中显示文本，则应将它们放在一个组中。

```
<svg height="100" width="710">
    <g>
    <rect width="70" height="50" style="fill: rgb(0, 0, 255);"></rect>
      <text y="0" style="fill: white;">-0.123994</text>
    </g>
    <g>
    <rect width="70" height="50" style="fill: rgb(255, 0, 0);" transform="translate(630,0)"></rect>
    <text y="50">0.387869</text>
   </g>

</svg> 
```

请调整文本的坐标以显示在矩形内。

# spring - 我可以为数据库实例使用多个 C3P0 数据源吗？

> ID：12922351
> 
> 赞同：3
> 
> 时间：2012-10-16T19:47:02.003
> 
> 标签：spring, jdbc, datasource, connection-pooling, c3p0

我想知道是否可以为一个数据库运行多个 c3p0 数据源，例如：

```
<bean id="dataSource1" class = "com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${db.driverClassName}"/>
    <property name="jdbcUrl" value="${db.url}/schema1"/>
    <property name="user" value="${db.username}"/>
    <property name="password" value="${db.password}"/>

    <property name="acquireIncrement" value="1" />
    <property name="idleConnectionTestPeriod" value="100"/>
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="50" />
    <property name="maxIdleTime" value="1800" />
</bean>

<bean id="dataSource2" class = "com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${db.driverClassName}"/>
    <property name="jdbcUrl" value="${db.url}/schema2"/>
    <property name="user" value="${db.username}"/>
    <property name="password" value="${db.password}"/>

    <property name="acquireIncrement" value="1" />
    <property name="idleConnectionTestPeriod" value="100"/>
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="50" />
    <property name="maxIdleTime" value="1800" />
</bean> 
```

它们将被不同的持久性服务使用。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:55:21.140

那绝对没问题。您会遇到一些配置问题，例如：

*   按类型自动装配`DataSource`不起作用

*   `@Transactional`/declarative transactions 将仅针对一个 selected `DataSource`。或者，您必须手动告诉您要使用哪个事务管理器（因此您还需要两个事务管理器：`transactionManager1`和`transactionManager2`）：

    ```
    @Transactional("transactionalManager2") 
    ```

此外，这个配置并没有什么问题。实际上这是一个非常好的主意（+1）：如果您的应用程序的某些层/组件使池饱和，其他层/组件仍然可以运行。

我唯一推荐的是使用鲜为人知的`abstract`/ `parent`bean 声明来避免重复：

```
<bean id="dataSource" abstract="true" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${db.driverClassName}"/>
    <property name="user" value="${db.username}"/>
    <property name="password" value="${db.password}"/>
    <property name="acquireIncrement" value="1" />
    <property name="idleConnectionTestPeriod" value="100"/>
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="50" />
    <property name="maxIdleTime" value="1800" />
</bean>

<bean id="dataSource1" parent="dataSource">
    <property name="jdbcUrl" value="${db.url}/schema1"/>
</bean>
<bean id="dataSource2" parent="dataSource">
    <property name="jdbcUrl" value="${db.url}/schema2"/>
</bean> 
```

# 也可以看看：

*   [spring 中的 abstract="true" 是什么意思？](https://stackoverflow.com/questions/9397532)

# android - Android 推送通知 - 我的服务应该扩展 GCMBaseIntentService 还是 IntentService

> ID：12922355
> 
> 赞同：0
> 
> 时间：2012-10-16T19:47:28.433
> 
> 标签：android

我试图创建的推送功能的基本架构是

1）我会得到电话号码并将其存储在我的数据库中

2）只有当服务器上发生某些事情时，我才会尝试创建推送消息

所以我不需要应用程序尝试调用服务器向它发送消息的部分。我想知道我应该在 Service 类中扩展什么以及我需要实现其中的哪些方法。

另外，我是否能够在不使用服务器的情况下获取设备 ID 并将该信息发送到我的服务器？

我正在使用 Google 云消息传递。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:35:55.170

好的，要获取手机的注册 ID，您需要在活动中执行以下操作：

```
 import com.google.android.gcm.GCMRegistrar;
    private final static String SENDER_ID = "0001234567" // API Key, see comments;

    public class myActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {

            GCMRegistrar.checkDevice(this);
            GCMRegistrar.checkManifest(this);
            regId = GCMRegistrar.getRegistrationId(this);
 if (regId.equals("")) 
        {
             GCMRegistrar.register(this, SENDER_ID);
             Log.i(TAG,"registered a new ID");
        } 
        else 
        {
            Log.i(TAG,"Already Registered");
        } 
```

您的 google reg 将包含在 regId 中

你将在你的清单中需要这个：

```
<receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="my.namespace" />
        </intent-filter>
    </receiver> 
```

其中 my.namespace 将等于您的包名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T11:01:43.840

您可以按照本[教程](http://developer.android.com/google/gcm/client.html).. 它使用新的 GooglecloudMessaging API。是的，您应该扩展**IntentService** ，因为现在不推荐使用其他的。

# google-maps-api-3 - 在 Google Maps V3 中强制多边形内部/外部？

> ID：12922356
> 
> 赞同：4
> 
> 时间：2012-10-16T19:47:36.233
> 
> 标签：google-maps-api-3, polygon

我的问题类似于另一个 SE 网站上的问题，似乎没有得到非常有用的回答： [https ://gis.stackexchange.com/questions/10741/google-maps-js-api-v3-polygon-formation](https://gis.stackexchange.com/questions/10741/google-maps-js-api-v3-polygon-formation)

我正在尝试使用多边形在 Google Maps V3 中为地球的大部分区域着色。我的问题是该算法自行决定地图的哪个部分在多边形“内部”，哪个在“外部”。

据我所知，地图总是将南极设置在多边形之外。示例 jsfiddle：http: [//jsfiddle.net/YFJ6a/6/](http://jsfiddle.net/YFJ6a/6/)

我从之前关于填充多边形外部区域的问题中猜测（例如[Google Maps Polygon Outer Fill](https://stackoverflow.com/questions/9804830/google-maps-polygon-outer-fill)），没有办法简单地反转多边形。我在使用链接中描述的方法方面取得了一些成功，将我的多边形与紧密环绕南极的多边形相结合：

```
[new google.maps.LatLng(-89.99,180), new google.maps.LatLng(-89.99,-120), 
 new google.maps.LatLng(-89.99,-60), new google.maps.LatLng(-89.99,0), 
 new google.maps.LatLng(-89.99,60), new google.maps.LatLng(-89.99,120), 
 new google.maps.LatLng(-89.99,180)] 
```

上面的路径生成了一个几乎覆盖整个地球的多边形。但这很混乱，只有当我的形状实际上不与这个多边形相交时才有效，我不能保证。（例如，我很容易得到直接在极点交叉的多边形。）

有没有更清洁或更直接的方法来实现这一点？

# python - 如何在变量后立即打印标点符号？Python

> ID：12922359
> 
> 赞同：1
> 
> 时间：2012-10-16T19:47:58.767
> 
> 标签：python, string, printing, punctuation

```
s = "A Colon is beside me"
print s,":" 
```

我应该得到

> > > 冒号在我身边：

但我想得到

```
>>>A Colon is beside me: 
```

如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T19:49:14.970

连接字符串：

```
print s + ':' 
```

或使用字符串格式：

```
print '{0}:'.format(s) 
```

在 python 3 上，`print()`还可以告诉该函数在多个参数之间使用空分隔符，而不是空格：

```
print(s, ':', sep='') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T18:31:37.263

这绝对有效。（我是该网站的新手，我放的是普通文本而不是代码！？）

```
 print "%s:" % s 
```

%s 表示在此处插入变量，第二个 s 表示插入特定变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-30T11:48:41.677

这是为了总结的目的。

打印语句有四种方式：

s = "一个冒号在我身边"

数据类型解析模式：

`print("%s:" %s)`

变量连接模式：

`print(s+":")`

格式（）方法：

`print("{}:".format(s))`

使用内置函数：

`print(s,':',sep='')`

# php - PHP：二维数组创建索引或添加（如果存在）

> ID：12922361
> 
> 赞同：2
> 
> 时间：2012-10-16T19:47:59.613
> 
> 标签：php, multidimensional-array

好的，长话短说：我试图将项目放在一个按值排序的数组中，作为对象的一部分（定义为 $aProductOrdered 的对象和公共值：productMan）。帖子将根据从数据库中添加和删除的项目而变化，因此它必须是动态的。

例如，如果某个 productMan 值的索引为 12，则所有具有该值的项目都将位于一行中，例如：

```
[12][0]:prodObj [12][1]:prodObj
[15][0]:prodObj 
[22][0]:prodObj [22][1]:prodObj 
```

其中第一个是来自对象的 prodMan 值，第二个是任意自动分配的索引，用于循环表示每个对象。

下面是我所拥有的，但是当我插入数组时，它准确地说我要添加的索引是未定义的。如果它不存在或者它只是附加到它，我该如何添加索引？

```
$vendOrderArray = array(array());

//here we will loop through all non blank posted orders and create objects to place them in our $orderArray
foreach($_POST as $prodID=>$numOrderded)
{
    if(is_numeric($numOrderded) && $numOrderded != "" && $numOrderded != "0")
    {
    $aProductOrdered = getProduct($prodId);
    $aProductOrdered->numberOrdered = $numOrderded;
    array_push($vendOrderArray[$aProductOrdered->productMan],$aProductOrdered);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:53:14.197

```
if(!isset($vendOrderArray[$aProductOrdered->productMan]))
    $vendOrderArray[$aProductOrdered->productMan] = array(); 
```

就在`array_push`通话之前。

# android - 带有时间选择器的自定义对话框

> ID：12922363
> 
> 赞同：2
> 
> 时间：2012-10-16T19:48:20.243
> 
> 标签：android, android-widget

我正在从主要活动开始一项新活动。当单击主要活动上的单选按钮时，我需要显示时间选择器对话框。当我单击应该向我显示对话框的单选按钮时出现错误。

代码

```
import java.util.Calendar; 
import android.app.Dialog;
import android.support.v4.app.DialogFragment;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.text.format.DateFormat;
import android.widget.TimePicker;

public class Tilldate extends DialogFragment implements TimePickerDialog.OnTimeSetListener{
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour, minute,
                DateFormat.is24HourFormat(getActivity()));
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // Do something with the time chosen by the user
    }

} 
```

LOGCAT

```
10-16 13:01:37.539: E/AndroidRuntime(1435): FATAL EXCEPTION: main
10-16 13:01:37.539: E/AndroidRuntime(1435): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.avst.callxpressmobile/com.example.avst.callxpressmobile.Tilldate}: java.lang.ClassCastException: com.example.avst.callxpressmobile.Tilldate cannot be cast to android.app.Activity
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.os.Looper.loop(Looper.java:137)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at java.lang.reflect.Method.invokeNative(Native Method)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at java.lang.reflect.Method.invoke(Method.java:511)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at dalvik.system.NativeStart.main(Native Method)
10-16 13:01:37.539: E/AndroidRuntime(1435): Caused by: java.lang.ClassCastException: com.example.avst.callxpressmobile.Tilldate cannot be cast to android.app.Activity
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
10-16 13:01:37.539: E/AndroidRuntime(1435):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
10-16 13:01:37.539: E/AndroidRuntime(1435):     ... 11 more 
```

对于我的主要活动，请查看

[与单选按钮相关的自定义对话框（日期和时间选择器）的数量](https://stackoverflow.com/questions/12908902/custom-dialog-date-and-time-picker-with-radio-buttons)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:59:47.023

由于它不是从 AndroidManifest.xml 中删除 Tilldate 的活动，然后假设您正在调用 startActivity ，请使用

```
 DialogFragment dialog = new Tilldate(); 
```

> ~~对话框 .show(getFragmentManager(), "对话框");~~

```
 dialog .show(getFragmentManager().beginTransaction(), "dialog"); 
```

而不是 startActivity

如果您需要自定义对话框，请扩展 TimePickerDialog。

# android - 如何解决权限被拒绝可能缺少互联网权限？

> ID：12922365
> 
> 赞同：2
> 
> 时间：2012-10-16T19:48:30.397
> 
> 标签：android, android-manifest, android-permissions

我正在使用 Netbeans7.2 并输入了使用权限，但我有这个错误 Java.net.Socket Exception Internet denied(Maybe missing internet permission)`我的 AndroidManifest 文件是这样的

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="importacao.dados"
          android:versionCode="1"
          android:versionName="1.0">
        <application android:label="@string/app_name" >
            <activity android:name="importacao"
                      android:label="@string/app_name">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                    <uses-permission android:name="android.permission.INTERNET" /> 
                </intent-filter>
            </activity>
        </application>
    </manifest> 
```

//按钮

```
cliente.setOnClickListener(new  Button.OnClickListener(){
    public void onClick(View view){
        InputStream is = null;
         ArrayList namevaluePairs = new ArrayList();
        List r = new ArrayList();
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost;
            httppost = new HttpPost("http://localhost/cliente.php");
        httppost.setEntity(new UrlEncodedFormEntity(namevaluePairs));
        HttpResponse response;
            response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    }
    catch(Exception e)
    {
        Toast.makeText(getBaseContext(),e.toString(),Toast.LENGTH_LONG).show();
    }
    try{
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));
     StringBuilder sb = new StringBuilder();
     String line = null;
      while((line=reader.readLine()) != null)
     {
      //   
     }}
    catch(Exception e)
    {
       Log.e("Erro",e.toString());
    }}}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:50:21.500

将您的使用权限标签移动到应用程序标签之外。您可能还需要为 android.permission.ACCESS_NETWORK_STATE 添加使用权限，不确定 netbeans 是如何工作的。

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="importacao.dados"
        android:versionCode="1"
        android:versionName="1.0">

        <uses-permission android:name="android.permission.INTERNET" />

        <application android:label="@string/app_name" > 
```

# vb.net - 使用 ADO.NET (XML) 连接时覆盖 Crystal Report Viewer 中的 DbConnectionAttributes

> ID：12922367
> 
> 赞同：1
> 
> 时间：2012-10-16T19:48:42.730
> 
> 标签：vb.net, crystal-reports, ado.net, crystal-reports-2008

我有一个带有水晶报表查看器的 .net 表单。我试图在其中加载的报告是使用 ADO.Net(xml) 类型的连接创建的，该连接具有指向返回数据集的文件名（在本例中为 .dll）的硬编码路径。我的问题是该 dll 的路径因应用程序的安装路径而异。所以我需要在代码中覆盖它，但我不知道该怎么做。这是我正在使用的代码：

```
Dim conInfo As New ConnectionInfo()
conInfo.Type = CrystalDecisions.Shared.ConnectionInfoType.CRQE
conInfo.Attributes.Collection.Add(New NameValuePair2("Database DLL", "crdb_adoplus.dll"))
conInfo.Attributes.Collection.Add(New NameValuePair2("QE_DatabaseName", ""))
Dim dba As New DbConnectionAttributes
dba.Collection.Add(New NameValuePair2("Class Name", "class name in that dll"))
dba.Collection.Add(New NameValuePair2("DataSet Names", "method in the class"))
dba.Collection.Add(New NameValuePair2("File Path", "path to dll.dll"))
conInfo.Attributes.Collection.Add(New NameValuePair2("QE_DatabaseType", "ADO.NET (XML)"))
conInfo.Attributes.Collection.Add(New NameValuePair2(DbConnectionAttributes.QE_LOGON_PROPERTIES, dba))
CrystalReportViewer1.ParameterFieldInfo = paramFields
CrystalReportViewer1.ReportSource = ReportFileName 
```

Crystal 报表查看器出现并询问错误的登录信息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-15T09:25:57.157

可能有点旧，但这是 C# 和 Crystal Report 13.0.28 的有效解决方案。无法判断是否真的需要修改 InitTable 中的其他属性。在未来的 CR 版本中，它们可能不会被设置为这些默认值。

```
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;

private void PrintMe()
{
    using (ReportDocument rep = new ReportDocument())
    {
        //Open report
        rep.Load(sReport, OpenReportMethod.OpenReportByTempCopy);

        NameValuePair2 nvp2 = new NameValuePair2("File Path ", sFullFileName);  //Space after "File Path " is important! The LogonProperties have defined it as such
        InitTables(rep, nvp2);

        rep.Refresh();

        if (sReportPdf == null)
        { 
            rep.PrintOptions.PaperSource        = printerSettings.PaperSource;
            rep.PrintOptions.PaperOrientation   = printerSettings.PaperOrientation;
            rep.PrintOptions.PaperSize          = printerSettings.PaperSize;
            rep.PrintOptions.PrinterName        = printerSettings.PrinterName;
            rep.PrintOptions.ApplyPageMargins(printerSettings.PageMargins);

            rep.PrintToPrinter(printerSettings.NumCopies, true, 1, 9999);
        }
        else
        {
            rep.ExportToDisk(ExportFormatType.PortableDocFormat, sReportPdf);
        }
    }
}

private void InitTables(ReportDocument rep, NameValuePair2 filePath)
{
    foreach (Table table in rep.Database.Tables)
    {
        var collection = table.LogOnInfo.ConnectionInfo.Attributes.Collection;

        InitTableCollections(collection, "Database DLL", "crdb_adoplus.dll");   //same as default
        InitTableCollections(collection, "QE_DatabaseName", "");                //same as default
        InitTableCollections(collection, "QE_DatabaseType", "ADO.NET (XML)");   //same as default
        InitTableCollections(collection, "QE_ServerDescription", "items");      //default: invoice
        InitTableCollections(collection, "QE_SQLDB", false);                    //same as default
        InitTableCollections(collection, "SSO_Enabled", false);                 //same as default

        InitTableCollections(table.LogOnInfo.ConnectionInfo.LogonProperties, filePath);

        table.ApplyLogOnInfo(table.LogOnInfo);
    }

    try
    {
        foreach (ReportDocument subReportDocument in rep.Subreports)
            InitTables(subReportDocument, filePath);
    }
    catch (NotSupportedException)
    {
        //thrown when trying to enumerate rep.Subreports at a certain depth
    }
}

private void InitTableCollections(NameValuePairs2 collection, string key, object value)
{
    if (collection.ContainsKey(key))
        collection.Set(key, value);
    else
        collection.Add(new NameValuePair2(key, value));
}

private void InitTableCollections(NameValuePairs2 collection, NameValuePair2 nvp)
{
    if (collection.ContainsKey(nvp.Name))
        collection.Set(nvp.Name, nvp.Value);
    else
        collection.Add(new NameValuePair2(nvp.Name, nvp.Value));
} 
```

# ios - 通过自定义 UINavigationBar 类获取 navigationItem

> ID：12922368
> 
> 赞同：1
> 
> 时间：2012-10-16T19:48:49.383
> 
> 标签：ios, uinavigationbar

为了自定义我的导航栏，我做了几个步骤：

1.  创建一个继承自`UINavigationBar`类的子类，进行一些自定义，例如绘制阴影或为导航栏设置背景图像。
2.  创建一个空的 xib 文件，它只包含一个导航视图控制器。
3.  在导航视图控制器中设置导航栏的类名。

一切正常，但是当我想在导航栏上添加另一个自定义的后退按钮时，我尝试将 a 附加`UIBarButtonItem`到`navigationItem.backbarbuttonitem`，我不知道如何`navigationItem`从`UINavigationBar`子类中获取。

代码示例：

```
// header file
@interface MyNavigationBar : UINavigationBar
@end

// implementation file
@implementation MyNavigationBar
-(void)drawRect:(CGRect)rect
{
  // background image
  UIImage* background_image = [UIImage imageNamed:@"my-navigation-bar.png"];
  [self setBackgroundImage:background_image forBarMetrics:UIBarMetricsDefault];

  // draw shadow
  self.layer.masksToBounds = NO;
  self.layer.shadowOpacity = 0.6;
  self.layer.shadowOffset = CGSizeMake(0, 3);
}

@end 
```

有没有办法`navigationItem`在我的自定义子类中获取条目`UINavigationBar`，或者我只是做错了？:P

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:24:17.250

您可以隐藏 uinavigationbar。然后放一个uiview，它可以具有uinavigationbar的高度和宽度。然后添加尽可能多的按钮可以适合或您想要。将 uiimage 添加到视图中。您将拥有一个不错的自定义导航栏。您可以使用 popviewcontroller 或 poptorootviewcontroller 来模仿后退按钮。

# php - 使用 preg_replace 通过反向引用调用常量

> ID：12922371
> 
> 赞同：0
> 
> 时间：2012-10-16T19:49:00.623
> 
> 标签：php, regex

```
$so = file_get_contents(...) ;
$so = preg_replace("/\*([^*]+)\*/e", constant(\1), $so) ; 
```

试图用同名的常量替换星号之间的文本，但我不断收到意外的 T_LNUMBER。我写错了什么？我验证了 $so 作为字符串的存在，并且所有常量都以纯文本形式存在。

我可能不会使用这个脚本，但我很好奇我在搞砸什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:54:00.700

尝试`preg_replace_callback("/\*([^*]+)\*/e", create_function('$matches','return constant($matches[1]);'), $so)`

我一直怀疑php中有匿名函数，但我从来没有使用过它们。这是更好的：

```
preg_replace_callback("/\*([^*]+)\*/e", function($matches){
    return constant($matches[1]);
}, $so) 
```

编辑：正如下面评论中所指出的，一旦您使用回调，就不需要 \e 修饰符，因为我们不需要评估返回值中的任何代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:56:10.810

正确的做法是：

```
$so = preg_replace_callback("/\*([^*]+)\*/", function($m){return constant($m[1])}, $so); 
```

你`constant(\1)`在 php.ini 中没有任何意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:53:49.627

正如您所说，您应该替换为`$1`,`\1`更好地用于反向引用，但在同一个正则表达式中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:56:37.857

问题在于如何评估代码。

该行：

```
preg_replace("/\*([^*]+)\*/e", constant(\1), $so) ; 
```

应该：

```
$so = preg_replace("/\*([^*]+)\*/e", "constant('\\1')", $so) ; 
```

您需要将传递给的值括`constant()`在引号中，以便将其视为字符串。此外，将第二个参数括在引号中，以便评估反向引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:57:31.650

T_LNUMBER 引用您的变量。您不能命名以数字开头的变量。 [php 法典](http://php.net/manual/en/language.variables.basics.php)

# asp.net - 在 TabPanel 中的 asp.net 上传文件

> ID：12922373
> 
> 赞同：0
> 
> 时间：2012-10-16T19:49:03.637
> 
> 标签：asp.net, file-upload, path, tabpanel

我正在尝试通过 asp.net 将文件从客户端上传到服务器。问题是文件上传控件在 TabPanel 中不起作用。基本上fileupload的文件名和postedfiles属性在提交后为空。而且我无法将 TabPanel 踢出去。

我正在寻找其他解决方案。一个是我要求用户将文件的路径输入到输入字段并提交一个按钮。

问题是如何根据文件的路径上传文件？

您的帮助将不胜感激。

代码是这样的。有问题的控件 ID 是“fuAttachments”

```
<asp:updatepanel id="upnlForTab" runat="server">
<ContentTemplate>
            <asp:TabContainer ID="tcFS" runat="server" ActiveTabIndex="0">                    
                <asp:TabPanel ID="TabPanelAnnualFS" runat="server" HeaderText="AnnualFS">                    
                    <ContentTemplate>     
                        <asp:FormView ID="fvAnnualFS" OnDataBound="fvAnnualFS_DataBound" runat="server">
                            <InsertItemTemplate>
                            </InsertItemTemplate>
                            <EditItemTemplate>
                                <table>
                                    <tr>
                                        <td colspan="2">
                                            Edit a Financial Statement
                                            <asp:HiddenField ID="hfIDStatement" runat="server" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Attachments:
                                        </td>
                                        <td>
                                            <asp:GridView ID="gvAttachments" AutoGenerateColumns="false" runat="server">
                                                <Columns>
                                                    <asp:TemplateField>
                                                        <ItemTemplate>
                                                            <asp:Label runat="server" Text='<%#Eval("AttachmentName")%>'></asp:Label>
                                                        </ItemTemplate>
                                                    </asp:TemplateField>
                                                </Columns>
                                            </asp:GridView>
                                            <asp:FileUpload ID="fuAttachments" runat="server" /> 
                                            <asp:Button ID="btnAddAttachment" runat="server" OnClick="btnAddAttachment_Click" Text="Add" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <asp:Button ID="btnSubmitEditAnnualFS" ValidationGroup="SaveFS" OnClick="btnSubmitEditNewAnnualFS_Click"
                                                runat="server" Text="Submit" />
                                        </td>
                                        <td>
                                        </td>
                                    </tr>
                                </table>
                            </EditItemTemplate>
                        </asp:FormView>
                    </ContentTemplate>
                </asp:TabPanel>
            </asp:TabContainer>
</ContentTemplate> 
```

在后端，代码是这样的。问题是 fuAttachments 的所有属性都没有发布，这是 updatepanel 和 tabpanel 中文件上传控制的一个已知问题。

```
 /// <summary>
    /// Add document to the document list.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    protected void btnAddAttachment_Click(object sender, EventArgs e)
    {
        HiddenField hfIDStatement = fvAnnualFS.FindControl("hfIDStatement") as HiddenField;
        FileUpload fuAttachments = fvAnnualFS.FindControl("fuAttachments") as FileUpload;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:46:03.147

首先，您的 HiddenField 和 FileUpload 不会以您寻找它们的方式找到。它们嵌套在其他对象中，所以你必须先找到它们的父对象，我知道这有点痛苦。

```
 protected void btnAddAttachment_Click(object sender, EventArgs e)
    {
        Button btn = (Button)sender;
        TemplateControl UploadContainer = (TemplateControl)btn.Parent;

        HiddenField hfIDStatement = (HiddenField)UploadContainer.FindControl("hfIDStatement");
        FileUpload fuAttachments = (FileUpload)UploadContainer.FindControl("fuAttachments");
    } 
```

# java - Java 整数加法

> ID：12922377
> 
> 赞同：0
> 
> 时间：2012-10-16T19:49:15.563
> 
> 标签：java, integer, addition

我的程序让用户输入一些 5 位数字，我需要一种方法来获取那个 5 位整数并将所有数字加在一起。例如，用户输入 26506，程序执行 2+6+5+0+6 并返回 19。我相信这将通过某种循环来完成，但不确定从哪里开始。

为了澄清，这个整数可以是任何东西，只要是 5 位数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:52:32.840

从我的脑海中，您可以将其转换为字符串并遍历每个字符，使用 (charAt( position ) - '0' ) 累积值。我现在远离 java 编译器，但我想这应该可行。只要确保你只有数字数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T19:52:44.807

```
int sum = 0;
while(input > 0){
    sum += input % 10;
    input = input / 10;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T19:54:36.690

每次你取一个`modulus`数字`10`时，你都会得到数字`ones`。并且每次将`divide`您的数字加 10，您将获得除数字之外的所有`ones`数字。因此，您可以使用这种方法对所有数字求和，如下所示：-

```
22034 % 10 = 4
22034 / 10 = 2203

2203 % 10 = 3
2203 / 10 = 220

220 % 10 = 0
220 / 10 = 22

22 % 10 = 2
22 / 10 = 2

2 % 10 = 2 
```

把它们都加起来.. (4 + 3 + 0 + 2 + 2 = 11)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T19:58:10.980

如果您的输入是字符串：

```
public static void main(String[] args) {
        // TODO code application logic here
        System.out.println("Enter your number: ");

        try{
            BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));
            String input = bufferRead.readLine();
            char[] tokens;
            tokens = input.toCharArray();
            int total=0;
            for(char i : tokens){
                total += Character.getNumericValue(i);
            }
            System.out.println("Total: " + total);

            }catch(IOException e){
                e.printStackTrace();
            }            
    } 
```

如果您的输入是整数，简单使用

```
 String stringValue = Integer.toString(integerValue); 
```

并将其插入。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-16T19:53:21.227

您需要除以取模：

```
26506 / 10000 = 2
26506 % 10000 = 6506

6506 / 1000 = 6
6506 % 1000 = 506

506 / 100 = 5
506 % 100 = 6

6 / 10 = 0
6 % 10 = 6

6 / 1 = 6 
```

所以每个除法的结果是那个base10位置的数字，为了得到下一个较低的有效数字，你取模。然后重复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T20:02:31.203

有两种方法：

使用以下方法解压数字：（假设数字仍然是 5 个字符）

```
int unpack(int number)
{
    int j = 0;
    int x = 0;
    for(j = 0; j < 5; j++){
        x += number % 10;
        number = number / 10;
    }
    return x;
} 
```

将其放入字符串并选择单个字符并解析为整数：

```
int sumWithString(String s)
{
    int sum = 0;
    for(int j = 0;j < 5;j++){
        try{
        sum += Integer.parseInt(""+s.charAt(j));
        }catch(Exception e){ }
    }
    return sum;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T20:09:16.187

```
 Scanner scanner = new Scanner(System.in);
    System.out.print("Enter number: ");
    String s = scanner.nextLine();

    char[] a = s.toCharArray();
    int total = 0;

    for(char x: a){
        try {
            total += Integer.parseInt(""+x);
        } catch (NumberFormatException e){
            // do nothing
        }
    }

    System.out.println(total); 
```

这将省略任何非数字字符。

# logic - 致力于逻辑 - 惠誉系统

> ID：12922379
> 
> 赞同：1
> 
> 时间：2012-10-16T19:49:25.580
> 
> 标签：logic, fitch-proofs

与逻辑和惠誉系统作斗争，

给定 (p ⇒ ¬q) 和 (¬q ∧ p ⇒ r) 和 p，我正在尝试使用 Fitch System 来证明 r。

关于我应该如何进行的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:33:51.293

您还可以尝试其他形式的证明系统，这些系统可用作计算机实现的证明检查器。使用[Isabelle](http://isabelle.in.tum.de)的结构化证明语言，您可以这样编写证明：

```
theory Scratch
imports Main
begin

notepad
begin
  assume 1: "p ⟶ ¬ q"
    and 2: "¬ q ∧ p ⟶ r"
    and 3: p
  have "¬ q" using 1 and 3 ..
  then have "¬ q ∧ p" using 3 ..
  with 2 have r ..
end

end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T08:44:58.430

1.  (p ⇒ ¬q)
2.  (¬q ∧ p ⇒ r)
3.  p
4.  ¬q（1 3 隐含消除）
5.  ¬q ^ p (2 4 和介绍)
6.  r (2 5 隐含消除) ---> END

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-21T00:28:12.060

以下证明使用 Klement 的 Fitch 式自然演绎证明检查器。规则说明可在*forallx*中找到。

[![在此处输入图像描述](../Images/85da4beab1011e6c747b32c1da13275d.png)](https://i.stack.imgur.com/mghbi.png)

前三行是前提。第 4 行来自条件消除 (→E)，第 5 行来自连词介绍 (∧I)，最后一行来自条件消除。

* * *

参考

Kevin Klement 的 JavaScript/PHP Fitch 风格的自然演绎证明编辑器和检查器[http://proofs.openlogicproject.org/](http://proofs.openlogicproject.org/)

PD Magnus、Tim Button 以及 J. Robert Loftis 的添加，由 Aaron Thomas-Bolduc、Richard Zach 重新混合和修订，forallx Calgary Remix: An Introduction to Formal Logic，2018 年冬季。http: [//forallx.openlogicproject.org/](http://forallx.openlogicproject.org/)

# c - 确保 C 中的尾调用优化

> ID：12922381
> 
> 赞同：1
> 
> 时间：2012-10-16T19:49:33.030
> 
> 标签：c, compiler-construction, tail-call-optimization

> **可能重复：**
> [哪些 C++ 编译器（如果有）进行尾递归优化？](https://stackoverflow.com/questions/34125/which-if-any-c-compilers-do-tail-recursion-optimization)

我正在为类似 Lisp 的语言编写一个小型运行时以用于教育目的，但我想确保 C 代码经过尾调用优化，因为我在我的语言中依赖它。是否有任何编译器可以保证尾调用递归得到优化？如果是这样，是否有关于导致递归优化的规则的文档？

显然，gcc 或 clang 会很好，但我需要确保代码得到适当的优化，因为它取决于它。

# sass - Where does COMPASS expect to find the config.rb (if there are several)?

> ID：12922387
> 
> 赞同：2
> 
> 时间：2012-10-16T19:49:43.373
> 
> 标签：sass, compass-sass

I'm introducing **COMPASS** to a project where we have different development branches from a SVN versioned web project in different folders for development. So we'll need to have several config.rb copies - the config.rb should be in trunk and thus in every branch we check out from SVN. How can I switch from "watching" the SASS directory in one branch checked out on my computer to watching another **SASS** directory in another branch checked out?!

Since the directory names for the checked out branched change with every new branch, having just one config.rb for **COMPASS** outside of / at the root directory of all branch directories is not an optimal solution since then we'd have to update every local config.rb on every developers computer with every new branch checked out...

Do I simply start "compass watch" in every branch's styles directory when working within that branch? Will there then be several **COMPASS** instances running, watching all the different branches?

I didn't find any answer to this problem on the internet, so I hope to find one here. Any idea welcome!

Cheers, Roman.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T04:53:51.600

You can precise the location of the configuration file with the `-c` command line argument: `compass watch -c custom/folder/config.rb`. **But** be careful, all paths to match the configuration variables (`sass_dir`, `css_dir`, etc) depend on the initial path where the command Compass is launched. For example, you can place in a branch and point the configuration file present in the trunk.

However, the easiest way would be to have a configuration file by branch and start the compilation in each of them.

# ios - SDK 3.1 iOS 6 - 登录后和从 Facebook 应用设置中删除权限后发 布权限

> ID：12922388
> 
> 赞同：1
> 
> 时间：2012-10-16T19:49:44.620
> 
> 标签：ios, facebook, ios6

以下情况给我带来了一些麻烦。

流程是这样的：

1.  使用 Facebook 登录并请求基本读取权限
2.  用户在请求发布权限的应用中执行操作
3.  用户说“是”以发布权限
4.  用户然后转到 Facebook 应用程序，然后是我们应用程序的应用程序设置并删除发布权限
5.  然后用户返回我们的应用程序并尝试发布故事
6.  Facebook iOS SDK 没有表明该权限被拒绝，实际上它返回该权限已被授予。但是，在图形 API 中查询 /permissions 时，该权限不可用。

有人遇到这个吗？

# android - 如何比较时间设置和实际时间？

> ID：12922389
> 
> 赞同：1
> 
> 时间：2012-10-16T19:49:49.747
> 
> 标签：android, date, time

在我的应用程序中，您使用 date/timePickers 设置日期/时间。

```
 SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
 Date datahora;
 datahora = (Date) formatter.parse(data); 
```

我需要将我设置的时间与手机的实际时间进行比较。所以我试过这个：

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date datahora;
String datatmp = formatter.format(new Date(0));
 try {
    datahora = (Date) formatter.parse(data);
    if(datahora <= datatmp) 
```

但我确实知道它错了，因为它说它无法检查`date > string`但我不知道如何检查实际时间。

**编辑**

日志猫

```
 10-08 20:14:07.453: E/AndroidRuntime(261): FATAL EXCEPTION: main
    10-08 20:14:07.453: E/AndroidRuntime(261): java.lang.IllegalStateException: get field slot from row 0 col -1 failed
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.database.CursorWindow.getString_native(Native Method)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.database.CursorWindow.getString(CursorWindow.java:329)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at com.example.mensagem.Mensagenssalvas$1.onItemClick(Mensagenssalvas.java:59)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.widget.ListView.performItemClick(ListView.java:3382)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.os.Handler.handleCallback(Handler.java:587)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.os.Handler.dispatchMessage(Handler.java:92)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at         android.os.Looper.loop(Looper.java:123)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at java.lang.reflect.Method.invokeNative(Native Method)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at java.lang.reflect.Method.invoke(Method.java:521)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    10-08 20:14:07.453: E/AndroidRuntime(261):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:54:05.400

要获取当前日期/时间，您只需创建一个新`Date`对象。

要比较您使用的日期`Date.compareTo()`：

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date now = new Date();
int difference = now.compareTo(formatter.parse(data)); 
```

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)，`difference`将是：

> 如果参数 Date 等于此 Date，则值为 0；如果此 Date 在 Date 参数之前，则值小于 0；如果此 Date 在 Date 参数之后，则值大于 0。

```
if (difference == 0) {
    // the dates are equal
}
else if (difference < 0) {
    // the date is before now
}
else {
    // the date is after now
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:57:33.770

但当然，您不能将日期与字符串进行比较。

尝试以下

```
Date datatmp = new Date();  

 try {
       datahora = (Date) formatter.parse(data);
        if( datahora.before(datatmp) )
.
. 
```

如果检查[Java Docs 的 Date](http://developer.android.com/reference/java/util/Date.html#before%28java.util.Date%29)，它除了.`after`还有其他功能。`before``compareTo`

最好的，罗汉

# html - 链接到 html 中的根目录文件夹

> ID：12922391
> 
> 赞同：3
> 
> 时间：2012-10-16T19:50:03.763
> 
> 标签：html, ftp, hyperlink

我在我的网站上托管视频。在我的代码中，我像这样链接到视频的路径。

```
file: "video/some_random_video.mp4" 
```

这很好用，因为我的 .html 页面和视频文件夹的位置在同一个目录中。将视频放在这里允许任何人查看 .html 源代码并找到我保存所有视频的路径，基本上允许他们全部下载。

是否可以将视频放回我的根目录中的几个目录，以便我可以链接到它们但其他人无法访问它们？

这是行不通的。

```
file: "./video/some_random_video.mp4" 
```

我试图找到任何方法来链接到我服务器上的视频，但禁止用户检查源并找到那里的位置。

任何输入表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:55:35.583

要向后浏览您的目录，您需要使用

```
file: "../../video/some_random_video.mp4" 
```

（两个点，不是一个）

或者，您可以尝试使用[.htaccess](http://www.kavoir.com/2009/01/htaccess-deny-from-all-restrict-directory-access.html)来阻止公众访问您的视频文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:50:55.840

试试这个：

```
"/video/some_random_video.mp4" 
```

假设该`video`文件夹位于根目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:53:23.363

[您可以像Kevin Boucher](https://stackoverflow.com/a/12922405/888177)建议的那样使用相对根目录的 url 。

另一种选择是在页头中使用 HTML 基本标记：

```
<base href='http://yoursite.com/'> 
```

然后你可以使用这样的链接：

```
<a href='video/some_random_video.mp4'>Video</a> 
```

换句话说，就好像你所有的链接都有你的基本href。

顺便说一句，只要记住 css 文件文件中的链接总是相对于 css 文件的位置 - 无论您是否使用基本标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:07:21.350

使用`.htaccess`会很有用，存在许多解决方案。

尝试通过检查请求的引用者来防止**盗链。**

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^https?://(www\.)?example.com [NC]
RewriteRule \.(mp4|flv)$ - [F] 
```

看看[这里](http://blamcast.net/articles/block-hotlinks)或[这里](https://stackoverflow.com/questions/636402/how-can-i-edit-the-htaccess-file-to-deny-hotlinking-to-css-inc-files)

或通过 PHP 文件传递​​文件并将它们发送到输出，同时拒绝直接访问文件/文件夹：

```
<FilesMatch "\.(mp4|flv)$">
    Order Allow,Deny
    Deny from all
</FilesMatch> 
```

# jquery - 来自 NON-JSON 服务的 JSONP 解析错误

> ID：12922397
> 
> 赞同：0
> 
> 时间：2012-10-16T19:50:18.863
> 
> 标签：jquery, ajax

`enter code here`有一个第三方 Web 服务 (soap) 从其网站中的搜索返回值。我可以使用包含搜索参数的普通旧 URL 调用此服务。前任。城市、州或邮编。此服务返回格式良好的 XML 字符串。

问题是......使用Javascript，我可以毫无问题地调用服务/ URL。

但回调失败。显示的消息指示解析错误。

使用 firefox 和 firebug，我可以看到结果被正确返回，只是在普通的旧 XML 中。

似乎 ajax 回调正在尝试解析结果，但它失败了。

该第三方位于完全不同的网站上，因此确实适用跨站点脚本规则。

所以问题是......

1）有没有办法不执行解析，只得到结果？2) 是否有任何额外的参数可以调整以允许我查看和处理结果集？

这是我正在使用的代码...

```
 function LoadMenu() {
    varType = "GET";
    varUrl = "https://www.xxxx.com/soap/352mg/xml.php?callback=?";
    varData = { zip: 68105 };
    varContentType = "text/xml; charset=utf-8";
    varDataType = "jsonp";
    varProcessData = false;
    $.ajax({
      crossdomain: true,
      type: varType, //GET or POST or PUT or DELETE verb
      url: varUrl, // Location of the service
      data: varData, //Data sent to server
      contentType: varContentType, // content type sent to server
      dataType: varDataType, //Expected data format from server
      processdata: false, // varProcessData, //True or False
      success: function (msg) {//On Successfull service call
        serviceSucceeded(msg);
      },
      error: ServiceFailed// When Service call fails
    });
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:55:52.130

JSONP 是一种跨域限制的 hacky 解决方案，它在 html 中包含一个新的脚本标签，因此浏览器会自动解析 src。您不能禁用它。

如果您需要获取 XML 并且他们不提供 JSONP 或某种跨域请求（如 CORS），那么您将需要设置代理。通过设置代理，您可以使用其他方式（如 PHP）获取数据，然后将其重新路由到您域上可能需要它的任何页面。

# cakephp - CakePHP：自引用 HABTM 关联？

> ID：12922402
> 
> 赞同：0
> 
> 时间：2012-10-16T19:50:34.817
> 
> 标签：cakephp, associations

我想创建 HABTM 自我关联。也就是说，用户可以与其他用户相关联。问题是这样的：我可以将一个用户的关联保存到另一个用户，但我只能以一种方式查看和编辑这些关联。这是我的协会：

```
'Partner' => array(
    'className' => 'User',
    'joinTable' => 'players_trainers',
    'associationForeignKey' => 'player_id',
    'foreignKey' => 'trainer_id', 
    'unique' => true
) 
```

所以当我打电话给一个用户（他是一名教练）时，我可以看到与他们相关联的球员。没有汗水。但是，当尝试从另一端查看/编辑关联时（查看球员与哪些教练相关联），什么都不会出现，因为该关联以相同的方式对待每个用户：期望从教练与球员关联。

我考虑过在我的控制器中进行即时绑定（基于用户角色），但这似乎很老套。

有没有一种干净的方式来进行 HABTM 自关联，而无需向我的模型添加新字段？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:15:18.243

尝试设置其他关联。

```
var $hasAndBelongsToMany = array(
 'Partner' => array(
    'className' => 'User',
    'joinTable' => 'players_trainers',
    'associationForeignKey' => 'player_id',
    'foreignKey' => 'trainer_id', 
    'unique' => true
  ),
  'Trainer' => array(
    'className' => 'User',
    'joinTable' => 'players_trainers',
    'associatedForeignKey' => 'trainer_id',
    'foreignKey' => 'player_id',
    'unique' => true
  )
); 
```

# wcf - .Net 4.0 内存缓存清除

> ID：12922407
> 
> 赞同：2
> 
> 时间：2012-10-16T19:51:03.793
> 
> 标签：wcf, caching, .net-4.0

我在我的 WCF 服务中使用 .Net 4.0 MemoryCache。我最初使用的是默认缓存，如下所示：

```
var cache = MemoryCache.Default; 
```

然后做通常的模式，试图在缓存中找到一些东西，获取，如果没有找到则设置到缓存中（代码片段/伪代码如下）：

```
var geoCoordinate = cache.Get(cacheKey) as GeoCoordinate;
if (geoCoordinate == null)
{
    geoCoordinate = get it from somewhere;
    cache.Set(cacheKey, geoCoordinate, DateTimeOffset.Now.AddDays(7));
} 
```

我发现我的条目在大约之后消失了。2分钟。即使我的代码将丢失的条目放回缓存中，后续的缓存 Gets 也会返回 null。我的 WCF 服务由 IIS 7.5 托管。如果我回收应用程序池，一切都会正常工作 2 分钟，但随后会重复上述模式。

在做了一些研究之后，我做了以下替换： var cache = MemoryCache.Default;

// 使用新代码创建缓存，如下所示：

```
 var config = new NameValueCollection();
 //Hack:  Set Polling interval to 10 days, so will no clear cache.
 config.Add("pollingInterval", "10:00:00:00");
 config.Add("physicalMemoryLimitPercentage", "90");
 config.Add("cacheMemoryLimitMegabytes", "2000");

 //instantiate cache
 var cache = new MemoryCache("GeneralCache", config); 
```

看来，无论我放入什么`physicalMemoryLimitPercentage`，或`cacheMemoryLimitMegabytes`似乎都没有帮助。但是把它放在`pollingInterval`一个大`datespan`的地方。

即：如果我设置如下： config.Add("pollingInterval", "00:00:15:00"); 然后一切正常15分钟。

注意：如果我的 WCF 服务由我的开发环境中的 IISExpress 托管，我将无法重现。当我的 WCF 服务由 IIS 7.5 托管时，这似乎也会发生。我在 IIS 7.5 上的应用程序池未回收。

有没有人经历过这样的事情？我看到了以下内容： [MemoryCache 不遵守配置中的内存限制](https://stackoverflow.com/questions/6895956/memorycache-strangeness)

谢谢，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:15:52.670

我也看到了这个问题，并[在这里](http://connect.microsoft.com/VisualStudio/feedback/details/764911/memorycache-gets-disposed-after-pollinginterval-when-used-in-webapp-in-integrated-pipeline-mode)用一个简单的复制器项目向 MS 提交了一个错误。

MS 在我提交的上述错误中已经解决了这个问题 - 在那里解决了一个问题，即将推出 .net 4 的 QFE 以及确认这在 4.5 中不是问题我还没有尝试解决这个问题

但是，我可以提供更多关于我自己重新创建它所需条件的信息。应用程序池需要处于集成管道模式才能看到此问题 - 经典模式修复了此问题，但消除了迁移到 IIS 7.5 的一些好处。同样，在使用集成模式时，如果我使用内置应用程序池标识（例如*ApplicationPoolIdentity* ），我也没有看到此问题。但是，我的应用程序需要使用服务帐户作为自定义身份运行，此时我看到了该行为。因此，如果您不需要集成模式或自定义身份，您可以解决这个问题。

也许内置帐户有权进行由 pollingInterval 发起的缓存内存统计收集，而我的自定义身份没有，我不知道。

希望这会有所帮助，甚至其他人可以加入更多的点来找出更好的解决方法。

# c - 编写一个 C 程序以从文件生成 .tar 文件并包含 struct stat

> ID：12922408
> 
> 赞同：0
> 
> 时间：2012-10-16T19:51:05.430
> 
> 标签：c, archive, tar, archive-tar

问候 Stackoverflow，

我有一个项目，我需要编写一个 C 程序，该程序使用命令行参数中指定的文件生成 .tar 存档。该程序应该像Linux内置的tar函数一样模拟和工作。该程序应该从命令行运行，其方式与默认的 tar 函数大致相同。

从 args 中的三个文件创建 tar 的命令： ./tar c archive.tar file1 file2 file3

它还必须能够解压缩 tar 存档并恢复包含的文件，以及它们的权限、访问时间和修改时间。

解压 .tar 文件的命令：./tar x archive.tar

我无法使用 system() 函数从脚本内部调用 tar()。而是必须使用内置的 Linux 系统调用。

此外，对于要包含在存档中的每个文件和目录，必须保留权限、修改时间和访问时间。我假设这可以通过为每个文件调用 stat() 然后检查 struct stat 成员来完成。

我该怎么做呢？

这个项目有很多麻烦...

# jquery - GoMaps 和 Google API 密钥

> ID：12922413
> 
> 赞同：0
> 
> 时间：2012-10-16T19:51:26.583
> 
> 标签：jquery, google-maps-api-3, asp.net-mvc-4

我有一个大量使用谷歌地图的应用程序。我们目前使用 GoMaps 作为 Google Maps V3 API 的包装器，它运行良好。但是，当我们投入生产时，我按照 Google 网站上的文档添加我们的 API，但它不起作用。我们收到以下错误消息：“Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权此站点上的 Google Maps JAvascript API V3.... ..”

我们以下列方式加载 Google Maps & Go Maps (ASP.NET MVC4 Razor)：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=@Model.GoogleKey&sensor=false"> </script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.gomap-1.3.2.js")"></script> 
```

@Model.GoogleKey 是 Google 发送给我们的电子邮件中的密钥。基于阅读此内容：[https](https://developers.google.com/maps/documentation/javascript/tutorial) ://developers.google.com/maps/documentation/javascript/tutorial （获取 API 密钥）以上应该可以工作。

还是我们需要做额外的工作？我是否需要以某种方式加密 API 密钥？GoMaps 中有什么东西可以解决这个问题吗？我看过但什么也没看到。

任何帮助将不胜感激。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:23:34.953

使用营业执照略有不同。在此处查看文档：http: [//goo.gl/WFztZ](http://goo.gl/WFztZ)

但基本上你想要：

```
<script src="http://maps.googleapis.com/maps/api/js?v=3&client=gme-yourclientid&sensor=true_or_false&channel=yourchannel"
  type="text/javascript"></script> 
```

如果合适，替换`key`为`client`并添加一个频道

# code-analysis - 用 UML 显示单个类的工作流程的最佳方式是什么

> ID：12922417
> 
> 赞同：1
> 
> 时间：2012-10-16T19:51:43.193
> 
> 标签：code-analysis, uml

当试图展示一个类的行为如何从一种方法流向另一种方法时，最好使用哪种 UML 图类型？

我正在尝试绘制现有代码的图表，我正在查看的行为主要涉及私有方法调用，以及对类外部静态对象的一些调用。在这种情况下，我认为序列图不会提供最好的细节，**因为除了前面提到的极少数静态调用之外，所讨论的类不与任何其他类交互。**

在这种情况下什么最适合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:20:58.620

根据UML上层结构（http://www.omg.org/spec/UML），在UML中存在两种行为：涌现行为和执行行为。

*一个执行行为是由一个对象（它的宿主）执行的，是对这个对象行为的描述。执行行为直接由调用该对象的行为特征或其创建引起。在任何一种情况下，它都是某个相关对象执行操作的结果。行为可以访问其宿主对象的结构特征。可以承载行为的对象由 BehavioredClassifier 元类的具体子类型指定。涌现行为源于一个或多个参与者对象的交互。如果参与的对象是一个更大的复合对象的一部分，那么一个新出现的行为也可以被看作是间接描述容器对象的行为。然而，紧急行为可能来自参与者对象的执行行为。*

您可以通过活动或交互对行为进行建模（实际上您也可以使用状态机和用例）。活动更适合模拟执行行为，而交互则更适合模拟紧急行为。

现在，如果您的类有很多部分，并且您想要建模的行为包括其部分的“复杂”交互，那么交互图（序列）可能是正确的选择。否则，如果您需要建模的行为由一系列原子动作组成，则活动可能会更好。考虑在 UML 中有一个特定的操作来表示方法的调用 (CallOperationAction)，该方法将您可以通过专用操作 (ReadSelfAction) 检索的对象引用作为输入引脚。还有一个读取对象属性的动作（ReadStructuralFeatureAction）。还要检查可执行 UML 模型的基础 (FUML) [http://www.omg.org/spec/FUML](http://www.omg.org/spec/FUML)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:26:07.740

虽然前面的所有答案都是正确的，但我想添加使用[状态机](http://www.uml-diagrams.org/state-machine-diagrams.html)来定义类的行为的选项。状态机允许您显示类的当前状态以及当调用方法或接收事件时类的状态如何变化。由于您声明您主要是在为一个类建模，我认为最重要的是要展示的是可以做什么（可以调用哪些方法调用），具体取决于当前状态以及这些方法调用如何影响类的状态。我认为我真正喜欢状态机的一个原因是它们具有相对明确定义的语义，并且还可以使用复合和正交状态在不同级别显示信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:41:50.817

I would recommend collaboration diagram (UML 1.x) renamed to Communication diagram (UML 2.x). This may be better than sequence diagram, better because it may be more readable in your case.

> A Communication diagram models the interactions between objects or parts in terms of sequenced messages. Communication diagrams represent a combination of information taken from Class, Sequence, and Use Case Diagrams describing both the static structure and dynamic behavior of a system.

![enter image description here](../Images/5769b786654f13b6acffb5bf249b62a8.png)
[http://en.wikipedia.org/wiki/Communication_diagram](http://en.wikipedia.org/wiki/Communication_diagram)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T07:34:19.873

总的来说，您有 2 个选择（根据@Silli 的回答）：序列图或活动图。我可能会建议将序列诊断作为首选，但是您说您认为这不合适。你能详细说明为什么吗？

也许这是条件逻辑？如果是这样，活动图可能是更好的选择。它具有比序列图更直观的语法来显示控制流。您还可以在单​​独的泳道中显示静态对象 - 从而清楚地区分对外部对象的调用。如果这与您相关，您还可以说明并行行为。如果有帮助，[这里](http://www.uml-diagrams.org/activity-diagrams-examples.html)有一些很好的例子。

hth。

# matlab - 纠正 Matlab 工具箱图中的 compute_curvature.m 错误

> ID：12922419
> 
> 赞同：5
> 
> 时间：2012-10-16T19:51:45.760
> 
> 标签：matlab

我目前正在使用 Matlab File Exchange 上的 Toolbox Graph 来计算 3D 曲面上的曲率，并发现它们非常有用 ( [http://www.mathworks.com/matlabcentral/fileexchange/5355](http://www.mathworks.com/matlabcentral/fileexchange/5355) )。但是，对于某些表面描述，在“compute_curvature”中会发出以下错误消息，并且代码无法完全运行：

```
> Error in ==> compute_curvature_mod at 75
> dp = sum( normal(:,E(:,1)) .* normal(:,E(:,2)), 1 );
> ??? Index exceeds matrix dimensions. 
```

这种情况只是偶尔发生，但没有明显的理由说明工具箱对某些表面工作得非常好，而对其他表面（具有类似拓扑）则不然。我还注意到早在 2009 年 11 月就有人在 File Exchange 上询问过这个错误，但这个问题没有得到解答。该帖子称

> “compute_curvature 将在第 75 行 (" `dp = sum( normal(:,E(:,1)) .* normal(:,E(:,2)), 1 );`") 上为某些曲面生成错误。该错误源于`E`包含超出范围的索引，这是由第 48 行 (" `A = sparse(double(i),double(j),s,n,n);`") 引起的，其中`A`的值最终完全构成了`E`矩阵。当`i`和`j`向量两次创建相同的有序对时会出现问题，在这种情况下，稀疏函数将两个`s`向量元素相加到该矩阵位置，导致值太大而无法用作第 75 行的索引。例如，如果`i = [1 1]`然后将等于。`j = [2 2]`_`s = [3 4]``A(1,2)``3 + 4 = 7`
> 
> `i`和`j`向量在这里创建：
> `i = [face(1,:) face(2,:) face(3,:)];`
> `j = [face(2,:) face(3,:) face(1,:)];`
> 
> 只是想补充一下，我提到的错误是通过重新排列面矩阵中顶点的顺序来翻转一个面的表面法线的符号引起的”

我曾尝试自己调试代码，但没有任何运气。我想知道这里是否有人解决了这个问题或者能给我一些见解——我需要代码足够通用，以便计算各种曲面的曲率，而不仅仅是少数几个曲面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T09:38:57.090

2009 年 11 月有关文件交换的错误报告将问题追溯到以下行为`sparse`：

> ```
> S = SPARSE(i,j,s,m,n,nzmax) uses the rows of [i,j,s] to generate an
> m-by-n sparse matrix with space allocated for nzmax nonzeros.  The
> two integer index vectors, i and j, and the real or complex entries
> vector, s, all have the same length, nnz, which is the number of
> nonzeros in the resulting sparse matrix S .  Any elements of s 
> which have duplicate values of i and j are added together. 
> ```

问题所在的代码行在这里：

```
i = [face(1,:) face(2,:) face(3,:)];
j = [face(2,:) face(3,:) face(1,:)];
s = [1:m 1:m 1:m];
A = sparse(i,j,s,n,n); 
```

基于此信息删除重复索引，大概使用`unique`或类似，*可能会*解决问题：

```
[B,I,J] = unique([i.' j.'],'rows');
i = B(:,1).';
j = B(:,2).';
s = s(I); 
```

完整的解决方案可能如下所示：

```
i = [face(1,:) face(2,:) face(3,:)];
j = [face(2,:) face(3,:) face(1,:)];
s = [1:m 1:m 1:m];
[B,I,J] = unique([i.' j.'],'rows');
i = B(:,1).';
j = B(:,2).';
s = s(I);
A = sparse(i,j,s,n,n); 
```

由于我对算法没有详细的了解，因此很难判断删除条目是否会产生负面影响。

# c# - 如何将对象初始化器与 using 语句一起使用？

> ID：12922420
> 
> 赞同：3
> 
> 时间：2012-10-16T19:51:48.253
> 
> 标签：c#, refactoring, using, using-statement

有没有办法重构这段代码，不必使用临时变量，仍然使用与对象初始化器相关的语法糖？

```
FrmSomeForm someTempForm = new FrmSomeForm()
{
    SomePropA = "A",
    SomePropB = "B",
    SomePropC = "C"
};
using (FrmSomeForm someForm = someTempForm)
{
    someForm.ShowDialog();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:56:12.007

```
using (FrmSomeForm someForm = new FrmSomeForm())
{
    someForm.SomePropA = "A";
    someForm.SomePropB = "B";
    someForm.SomePropC = "C";
    someForm.ShowDialog();
} 
```

我认为这是最简单的方法，在我看来甚至更具可读性......

**保持简单**:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T19:54:27.007

```
using (FrmSomeForm someForm = new FrmSomeForm(){
    SomePropA = "A",
    SomePropB = "B",
    SomePropC = "C"
})
{
    someForm.ShowDialog();
} 
```

这不行吗？oO

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T19:55:13.447

尝试：

```
 using (FrmSomeForm someForm = new FrmSomeForm()
                        {
                            SomePropA = "A",
                            SomePropB = "B",
                            SomePropC = "C"
                        })
        {
            someForm.ShowDialog();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:57:24.480

你可以这样做

```
using 
(
    FrmSomeForm someForm = new FrmSomeForm()
    {
        SomePropA = "A",
        SomePropB = "B",
        SomePropC = "C"
    }
)
{
     someForm.ShowDialog();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:55:46.643

```
using (FrmSomeForm someForm = new FrmSomeForm()
    {
        SomePropA = "A",
        SomePropB = "B",
        SomePropC = "C"
    })
{
    someForm.ShowDialog();
} 
```

如果你不喜欢这种格式，你可以这样做：

```
using (FrmSomeForm someForm = new FrmSomeForm() { SomePropA = "A", SomePropB = "B", SomePropC = "C" })
{
    someForm.ShowDialog();
} 
```

或者：

```
private FrmSomeForm InitFrmSomeForm()  
{
    return new FrmSomeForm()
    {
        SomePropA = "A",
        SomePropB = "B",
        SomePropC = "C"
    };
}

using (FrmSomeForm someForm = InitFrmSomeForm())
{
    someForm.ShowDialog();
} 
```

# java - 附加到存储在外部文件中的 ArrayList

> ID：12922424
> 
> 赞同：0
> 
> 时间：2012-10-16T19:52:20.860
> 
> 标签：java, arrays, file

我有一个名为 的文件`ArrayList.data`，它存储哈希图的数组列表。由于我正在使用的程序的限制，我无法一次添加所有数据，因为该程序为每个用户创建了一个新实例。要创建所有用户数据的数组列表，我需要打开文件，添加用户数据，然后关闭文件。

该文件仅包含哈希图的数组列表。有没有办法每次都附加到这个哈希图，还是我需要用更新的附加版本替换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:02:57.237

您是否使用 Java 序列化来存储`ArrayList`？不幸的是，这种机制不允许您以增量方式将数据添加到已经序列化的表单中。相反，您必须打开文件，反序列化整个文件`ArrayList`，添加一个元素并将其序列化回来，覆盖文件中的先前数据。如果列表变大，这种方法是不可行的。

您可以做的是分别序列化每个`HashMap`（单个`ArrayList<Map<?, ?>>`项目）。这样，当必须对新项目进行序列化时，您只需打开文件并`Map`在最后附加这个新项目。当你想反序列化它时，只需`Map`一个接一个地读取并重建`ArrayList`.

# data-structures - Heap 数据结构的准确定义是什么？

> ID：12922429
> 
> 赞同：6
> 
> 时间：2012-10-16T19:52:33.543
> 
> 标签：data-structures, heap

[维基百科（ http://en.wikipedia.org/wiki/Heap_(data_structure)](http://en.wikipedia.org/wiki/Heap_%28data_structure%29) ）中给出的堆定义是

> 在计算机科学中，堆是一种特殊的基于树的数据结构，它满足堆属性：如果 A 是 B 的父节点，则 key(A) 相对于 key(B) 进行排序，并且在整个堆中应用相同的排序. 要么父节点的key总是大于等于子节点的key，最高的key在根节点（这种堆称为max heap），要么父节点的key小于等于子节点的key孩子们（最小堆）

该定义没有说明树是完整的。例如，根据这个定义，二叉树 5 => 4 => 3 => 2 => 1，其中根元素为 5，所有后代都是右孩子，也满足堆属性。我想知道堆数据结构的精确定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:10:23.490

正如其他人在评论中所说：这*是*堆的定义，您的示例树是堆，尽管是退化/不平衡的。树是完整的，或者至少是合理平衡的，对于在树上进行更有效的操作很有用。但是低效的堆仍然是堆，就像不平衡的二叉搜索树仍然是二叉搜索树一样。

请注意，“堆”不是指数据结构，而是指任何满足堆属性或（取决于上下文）特定操作集的数据结构。在堆的数据结构中，最有效的数据结构显式或隐式地保证树是完整的或平衡的。例如，二叉堆根据定义是一棵完全二叉树。

无论如何，你为什么在乎？如果您关心特定操作的特定下限或上限，请说明这些而不是要求堆。如果您讨论的是堆和完整树的特定数据结构，请*说明*而不是仅仅谈论堆（当然，假设完整性很重要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-14T20:27:06.787

自从提出这个问题以来，维基百科的定义已经更新：

> 在计算机科学中，堆是一种专门的基于树的数据结构**，它本质上是一棵满足堆属性的几乎完整的¹树**：在最大堆中，对于任何给定的节点 C，如果 P 是 C 的父节点，则P的key（值）大于等于C的key。在min heap中，P的key小于等于C的key。²堆“顶”的节点（没有父节点）称为根节点。

但是，“堆数据结构”实际上是指一系列*不同*的数据结构，其中还包括：

*   [二项式堆](https://en.wikipedia.org/wiki/Binomial_heap)
*   [斐波那契堆](https://en.wikipedia.org/wiki/Fibonacci_heap)
*   [左派堆](https://en.wikipedia.org/wiki/Leftist_tree)
*   [斜堆](https://en.wikipedia.org/wiki/Skew_heap)
*   [配对堆](https://en.wikipedia.org/wiki/Pairing_heap)
*   [2-3堆](https://en.wikipedia.org/wiki/2%E2%80%933_heap)

...这些当然*不一定*是完整的树。

另一方面，[d-ary heap](https://en.wikipedia.org/wiki/D-ary_heap)数据结构——包括*二叉堆*——通常指的是*完整*的树，因此它们可以在数组中按级别顺序实现，没有间隙：

> -ary 堆由一组项目组成，每个项目都有一个与之关联的优先级。这些项目可以看作是完整的二叉树中的节点，按广度优先遍历顺序列出。

# javascript - 有没有办法合并这些多行代码？

> ID：12922434
> 
> 赞同：1
> 
> 时间：2012-10-16T19:52:47.803
> 
> 标签：javascript, jquery, html, css

[这是我的代码执行的示例。](http://jsfiddle.net/mvNCz/3/)

我正在尝试开发一个包含以下代码多次迭代的网站：

```
$(function() {
    $('.nav1, .nav1x').not('#current').hover(
        function () {
            $(".nav1x a").css("visibility","visible");
          },
          function () {
            $(".nav1x a").css("visibility","hidden");
          }
    );
    $(".nav2, .nav2x").not('#current').hover(
        function () {
            $(".nav2x a").css("visibility","visible");
          },
          function () {
            $(".nav2x a").css("visibility","hidden");
          }
    );
    $(".nav3, .nav3x").not('#current').hover(
        function () {
            $(".nav3x a").css("visibility","visible");
          },
          function () {
            $(".nav3x a").css("visibility","hidden");
          }
    );
    $(".nav4, .nav4x").not('#current').hover(
        function () {
            $(".nav4x a").css("visibility","visible");
          },
          function () {
            $(".nav4x a").css("visibility","hidden");
          }
      );
}); 
```

由于选择的性质，我不知道如何更简单地写这个。它在 .nav1 和 .nav1x 上都有一个悬停事件，以防止在我的网站上发生闪烁，因此必须保留。你们中的任何聪明人都知道更好的方法来写这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:10:23.720

这似乎工作：http: [//jsfiddle.net/gibble/mvNCz/5/](http://jsfiddle.net/gibble/mvNCz/5/)

```
$(function() {
    $.each(['nav1', 'nav2', 'nav3', 'nav4'], function(index, value) {
        $("." + value + ", ." + value + "x").not('#current').hover(
            function () {
                $("." + value + "x a").css("visibility","visible");
            },
            function () {
                $("." + value  + "x a").css("visibility","hidden");
            }
        );
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:29:15.973

我建议重组你的代码，html的当前结构是多余的。[这是我](http://jsfiddle.net/mvNCz/6/)简化菜单的方法。

的HTML

```
 <ul class="nav">
        <li id="current"><a href="#">Images</a></li>
        <li><span>.</span></li>
        <li><a href="#">Articles</a></li>
        <li><span>.</span></li>
        <li><a href="#">Links</a></li>
        <li><span>.</span></li>
        <li><a href="#">Contact</a></li>
    </ul> 
```

CSS

```
.nav li{ display: inline;}
.nav li span, .nav li a{   
    font-size: 24px; 
    text-decoration:  none;
    color:black; 
}

.clone li a { color: blue }​ 
```

javascript

```
$('.nav').clone().addClass('clone').insertAfter('.nav').find('li').css('visibility', 'hidden');

$('.nav').on('hover', 'li', function(e){ 
    if( e.type === 'mouseenter' )
        $('.clone').find('li').eq( $(this).index() ).css('visibility', 'visible'); 
    else if( e.type === 'mouseleave' )
        $('.clone').find('li').eq( $(this).index() ).css('visibility', 'hidden');  
}); 
```

您当前代码的问题在于，对于任何未来的菜单项，您必须在 html 中两次更改三个不同的位置，在 javascript 中更改一次。使用上面的代码，您只需对 html 进行一次更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T20:37:59.913

你完全可以不用javascript：http: [//jsfiddle.net/Shmiddty/mvNCz/7/](http://jsfiddle.net/Shmiddty/mvNCz/7/)

```
.nav li{ display: inline;position:relative;}
.nav li span, .nav li a{   
    font-size: 24px; 
    text-decoration:  none;
    color:black; 
}

.nav li + li:before{
    content:'.';
    font-size:24px;
    display:inline-block;
    padding:0 .25em;
}

.nav li.current:after,
.nav li:hover:after{
    content:attr(data-name);
    font-size:24px;
    position:absolute;
    left:0;
    top:1em;
    color:#00f;
}
.nav li+li.current:after,
.nav li+li:hover:after{
    left:.75em;
} 
```

HTML

```
<ul class="nav">
    <li class="current" data-name="Images"><a href="#">Images</a></li>
    <li data-name="Articles"><a href="#">Articles</a></li>
    <li data-name="Links"><a href="#">Links</a></li>
    <li data-name="Contact"><a href="#">Contact</a></li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T20:30:22.830

据您所知，编写相同代码的更多 JQuery 方法是：

```
$(".nav li[id!=current]").hover(
    function () {
        $("."+ $(this).attr("class") + "x a").css("visibility","visible");
    }, 
      function () {
        $("."+ $(this).attr("class") + "x a").css("visibility","hidden");
    }
); 
```

[http://jsfiddle.net/96wvB/](http://jsfiddle.net/96wvB/)

# css - 位于 div 窗口中心的 Css div 窗口

> ID：12922438
> 
> 赞同：1
> 
> 时间：2012-10-16T19:53:06.163
> 
> 标签：css, html, center

我在屏幕中央有一个触摸板形状的主 div。在其中我有另一个 div，我想在其中显示输出。但是，pad 本身设置为 % 以对不同的分辨率做出反应。

见下图，黄色窗口是整个pad，红色窗口是内容屏幕。

现在我想制作那个红色窗口，就像垫子的屏幕设置在 % 上一样，这样它就可以适应不同的分辨率，有没有一种简单的方法可以做到这一点？

![在此处输入图像描述](../Images/da4d5732786773fe53f20932aa220370.png)

黄色的CSS：

```
#mainWindow{
    margin-left:auto;
    margin-right:auto;
    background-image:url("../images/mainWindow.png");
    background-size:100% 100%;
    height:100%;
    width:80%;
    position: relative;
    border-style:solid;
    border-width:3px;
    border-color:yellow;
} 
```

红色的真的什么都没有。

我希望你能理解我。预先感谢。

**编辑：**

屏幕的html代码：

```
<div id='mainWindow'>

        <div id='screen'>

        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:56:15.113

为了使 DIV 具有 100% 的高度，您还需要使其父级的高度为 100%：

```
body, html {height:100%} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:25:20.790

提示有点混乱，但看看这是否适合你：

[http://jsfiddle.net/T3MHZ/](http://jsfiddle.net/T3MHZ/)

HTML 片段：

```
<html>
    <head></head>
    <body>
        <div id='mainWindow'>
            <div id='screen'></div>
        </div>
    </body> 
</html>​ 
```

CSS 样式：

```
html, body{
    width:100%; 
    height:100%;
    margin:0;
}

#mainWindow{
    margin:0;
    height:100%;
    width:100%;
    /* SET THE PADDING TO THE PX MEASURE OF THE TABLET BORDER */
    padding:50px 40px 50px 40px; 
    /* box sizing will make sure that the usable content size is minus the padding value */
    box-sizing:border-box; 
    position: relative;
    border:1px solid black;
}

#screen{
    width:100%;
    height:100%;
    border:1px solid red;   
} 
```

通过在#mainWindow 上使用测量的填充来考虑平板电脑边框和边框框的框大小以确保#screen 内容的精确匹配，这应该为您提供您正在寻找的灵活布局。

不要忘记您的视口元标记！;) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:54:38.763

我不确定我是否正确理解了您想要的内容，但请尝试 height: 100%; 在红色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T19:59:14.293

```
min-height:100%; 
```

你没有内容，它是 100% 的父内容。出于同样的原因，Diodeus 的答案也会起作用，如果 body、html 是 100% 的窗口高度，那么里面的 div 会将其视为内容。

[http://jsfiddle.net/calder12/Jq7xR/](http://jsfiddle.net/calder12/Jq7xR/)

```
<body>
<div class="container">
    <div class="outside">
        <div class="inside"></div>
    </div>
</div>
</body>​

.container{height:250px;width:400px;}
.outside{border:1px solid red; min-height:100%; height:100%;}
.inside{border:1px solid green; min-height:82.5%; margin:5%} 
```

老实说，即使是我的大脑也在与 82.5% 的高度作斗争以使边距正常工作 =/ 但我相信这就是你所追求的。

# jquery - 在 underscore.js 模板脚本中实现选择的下拉菜单的问题

> ID：12922445
> 
> 赞同：0
> 
> 时间：2012-10-16T19:53:24.697
> 
> 标签：jquery, css, select, underscore.js, jquery-chosen

在我的代码中，如果我 `<script type="text/html" class="template"> </script>` 从包含一些`<select>`标签的 div 部分周围删除标签，则 selected.jquery.js 样式会生效。

如果我留下`<script>`标签，那么它不会正确修改选择下拉列表，而是将其修改为某种操作链接。

这是一个[jsfiddle](http://jsfiddle.net/7WvUK/17/)。

如果您删除模板的标签以及下划线和 jquery 调用，下拉菜单将正确加载。

这是显示两种方式的图像：

![在此处输入图像描述](../Images/9e12c110d5d9a0d80ddf48205f3453a0.png)

我希望它看起来类似于底部选项，同时仍然使用下划线的模板。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:37:23.383

当你说 时[`_.template(some_html)`](http://underscorejs.org/#template)，你会得到一个函数，而不是 HTML：

> **模板** `_.template(templateString, [data], [settings])`
> 
> 将 JavaScript 模板编译为可评估以进行渲染的函数。
> [...]
> 如果您正在编写一次性的，您可以将**数据**对象作为第二个参数传递给模板，以便立即呈现而不是返回**模板**函数。

因此，您尝试向页面添加一个功能，就好像它是一大块 HTML 一样，但效果并不好。此外，您试图将模板放入文档`<head>`区域，这不是一个好主意。

您需要编译模板，然后运行返回的函数以获取 HTML：

```
var template = _.template(some_html);
var html     = template(); // Or template(data) if you have data. 
```

如果您有模板的数据，您可以一次性完成：

```
var html = _.template(some_html, data); 
```

演示：http: [//jsfiddle.net/ambiguous/3ezqV/](http://jsfiddle.net/ambiguous/3ezqV/)

# javascript - Websockets 传输完成

> ID：12922447
> 
> 赞同：4
> 
> 时间：2012-10-16T19:53:44.057
> 
> 标签：javascript, websocket, socket.io, transfer

我正在使用 socket.io，我想知道 send() 命令何时完成。- 可能吗？- 可以在 websockets 中使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T20:22:09.020

您知道的唯一方法是在发送消息时提供回调。
这会从服务器调用 ACK。

# eclipse - Eclipse 设置详细：启动配置的类标志

> ID：12922450
> 
> 赞同：2
> 
> 时间：2012-10-16T19:53:52.837
> 
> 标签：eclipse, flags, jvm-arguments, verbose

java.exe 命令支持一个“详细”标志，它可以查看类从哪个文件加载。Eclipse 是否支持为启动配置设置此标志？

这是一个解释我所说的“详细”标志的[网站](https://web.archive.org/web/20120303221350/http://extreme-java.blogspot.com/2011/01/java-verbose-options-for-running.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-05T14:53:28.557

> Eclipse 是否支持为启动配置设置此标志？

**是的！**Eclipse 支持

*   去`Run configurations`
*   选择`Arguments`选项卡
*   单击`VM Arguments`并键入`-verbose`标志
*   点击`Run`

繁荣！！！！

查看下面的**屏幕截图**。

**1)**

[![在此处输入图像描述](../Images/0e9dca3df89566d086069627638fb1b3.png)](https://i.stack.imgur.com/1xsRX.png)

**2)**

[![在此处输入图像描述](../Images/c3e8fd4cb656c5c251a0ac68676670e6.png)](https://i.stack.imgur.com/7vCw8.png)

**3)**

[![在此处输入图像描述](../Images/c471c0d2b3fdf133c578e2dbbfb980e0.png)](https://i.stack.imgur.com/IuBzh.png)

**4)**

[![在此处输入图像描述](../Images/a8741e0c41cf695c8bb44a11a0be84de.png)](https://i.stack.imgur.com/bzUkX.png)

# java - 由 Wicket 渲染后向网页添加其他组件

> ID：12922452
> 
> 赞同：0
> 
> 时间：2012-10-16T19:54:03.973
> 
> 标签：java, wicket, wicket-1.5

我需要使用 Wicket 1.5 创建一个网页，它可以显示可变数量的面板来捕获用户输入。所有面板具有相同的结构。该页面将从一个面板开始，并包含一个按钮以根据需要动态添加更多内容。

因此，在最初呈现页面时，面板的数量是未知的。实际上我会动态地改变页面的结构。这在 Javascript 中是可能的，使用`document.addElement()`

我过去做过类似的事情，在页面加载时创建所有组件，并有选择地显示/隐藏组件。

这里的区别在于组件（面板）的数量最初是未知的。我不确定 Wicket 将如何实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:44:09.497

这实际上是一个常见的用例，通常使用 RepeatingView 完成（ListView 会重新绘制所有面板，这可能不是您想要的）。

[http://www.stackoverflow.com/questions/7807514/can-i-add-an-element-to-a-repeatingview-without-refreshing-the-latter](http://www.stackoverflow.com/questions/7807514/can-i-add-an-element-to-a-repeatingview-without-refreshing-the-latter)

```
final RepeatingView rv = new RepeatingView("rv");
rv.add(new MyPanel(rv.newChildId()));
...
AjaxLink addPanelLink = new AjaxLink("addPanelLink") {
     public void onSubmit(AjaxRequestTarget target) {
         MyOtherPanel pnl = new MyOtherPanel(rv.newChildId())
         rv.add(pnl);
         target.prependJavaScript(String.format(
                "var item=document.createElement('%s');item.id='%s';var container = $('%s'); container.append(item,container.firstChild);",
                "div",
                pnl.getMarkupId(),
                ".dom_parent_div_id"));
         target.add(pnl);
     }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:57:25.653

采用：

*   `ListView`组件来固定面板。

*   `IndicatingAjaxSubmitLink`将模型对象添加到您的`ListView`模型。

每当您添加一个对象时，只需通过 Ajax 刷新`webmarkupcontainer`持有的列表视图。

# php - 使用 Jquery 调整多个购物车价格

> ID：12922454
> 
> 赞同：1
> 
> 时间：2012-10-16T19:54:14.197
> 
> 标签：php, javascript, jquery, html, shopping-cart

我正在尝试根据用户选择的数量动态更改购物车价格。我已经有代码可以更改产品总价，但我在更改产品插件的总价时遇到了困难。谁能帮我？

另外，我忘了补充一个事实，即我正在改变插件价格，但它正在改变购物车中的每个插件价格。我想真正的问题是如何单独更改每个附加组件的价格并与其他附加组件分开？

这是HTML

```
<table id="carttable">

<tr>
    <th>Item</th>
    <th>Price</th>
    <th>Quantity</th>
    <th>Total</th>
    <th></th>
</tr> 
```

```
<tr>
    <td class="cartField">12 inch sub</td>
    <td class="cartField productPrice" id="price_448" data-price="5.99">$5.99</td>
    <td class="cartField">
        <select class="quantityDrop" name="quantity[448]">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3" selected="selected">3</option>
        </select>
    </td>
    <td class="cartField totalProdPrice" id="item_448">$20</td>
</tr>
<tr class="addon_field">
    <td class="cartField addon_name">Turkey</td>
    <td class="addPrice" id="addon_448" data-addon="addon_448_41" data-price="2.00">$2.00</td>
    <td class="cartField totalAddPrice" data-addon-total="addon_448_41" id="totalAddOn_448">$6.00</td>
</tr>
<tr class="addon_field">
    <td class="cartField addon_name">Grilled Onions via Jim</td>
    <td class="addPrice" id="addon_448" data-addon="addon_448_68" data-price="0.50">$0.50</td>
    <td class="cartField totalAddPrice" data-addon-total="addon_448_68" id="totalAddOn_448">$1.50</td>
</tr>
<tr>
    <td class="cartField" style="width: 359px;">12 inch sub</td>
    <td class="cartField productPrice" id="price_453" data-price="5.99">$5.99</td>
    <td align="center" class="cartField">
        <select class="quantityDrop" name="quantity[453]">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>
    </td>
    <td class="cartField totalProdPrice" id="item_453">$35.94</td>
</tr>
<tr class="addon_field">
    <td class="cartField addon_name">Turkey</td>
    <td class="addPrice" id="addon_453" data-addon="addon_453_41" data-price="2.00">$2.00</td>
    <td class="cartField totalAddPrice" data-addon-total="addon_453_41" id="totalAddOn_453">$12.00</td>
</tr>
<tr class="addon_field">
    <td class="cartField addon_name">Grilled Onions via Jim</td>
    <td class="addPrice" id="addon_453" data-addon="addon_453_68" data-price="0.50">$0.50</td>
    <td class="cartField totalAddPrice" data-addon-total="addon_453_68" id="totalAddOn_453">$3.00</td>
</tr>

<tr>
    <td><b>Subtotal:</b></td>
    <td class="subtotal">$67.89</td></tr>
<tr>
    <td><b>Taxes:</b></td>
    <td>$<span class="tax">4.75</span> (<span class="taxAmt">0.07000</span>)</td>
</tr>
<tr>
    <td><b>Grand Total:</b></td>
    <td class="grandTotal">$72.64</td>
</tr> 
```

和 Jquery 代码

```
 $(".quantityDrop").change(function() {
    var qty         = $(this).val();

    var price       = $(this).closest("tr")
                           .find("td[id^=price_]")
                           .html().split("$")[1];

    var addOnPrice  = $(this).closest("tbody")
                            .find("tr.addon_field")
                            .find("td[data-addon^=addon_]")
                            .html().split("$")[1];

    var prodAddtotal = parseFloat(price) + parseFloat(addOnPrice);
    var addOnTotal  = parseInt(qty) * parseFloat(addOnPrice);
    var total       = parseInt(qty) * parseFloat(price);

    $(this).closest("tbody").find("tr.addon_field").find("td[data-addon-total^=addon_]").html("$" + addOnTotal.toFixed(2));
    $(this).closest("tr").find("td[id^=item_]").html("$" + total.toFixed(2));

    var subTotal = 0;
    $("td[id^=item_]").each(function() {
        subTotal += parseFloat($(this).html().split("$")[1]);
    });
    $(".subtotal").html("$" + subTotal.toFixed(2));
    var taxAmount        = $('.taxAmt').html();
    var tax               = (subTotal * taxAmount);
    $('.tax').html(tax.toFixed(2));
    var subtotalTax       = parseFloat(tax.toFixed(2),10);
    var grandTotal       = (subTotal + subtotalTax);
    $('.grandTotal').html("$" + grandTotal.toFixed(2));

}); 
```

如果有人可以提供帮助，将不胜感激。提前致谢。

# c# - 使用 C#.Net 2010 调用远程 Web 服务上的方法并使用其数据

> ID：12922457
> 
> 赞同：0
> 
> 时间：2012-10-16T19:54:22.713
> 
> 标签：c#, xml, visual-studio-2010, web-services, soap

我正在使用 C# 在 Visual Studio .Net 2010 上创建一个 Windows 应用程序。互联网上有一个使用 API 方法的有效 Web 服务。这是其中之一的示例，它们使用 SOAP 消息：因此，您在此 SOAP 请求中输入用户名和密码字符串：

```
POST /anp.asmx HTTP/1.1
Host: api.anp.se
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://api.anp.se/GetOptOutList"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetOptOutList xmlns="http://api.anp.se/">
      <strUsername>string</strUsername>
      <strPassword>string</strPassword>
      <strMailingListID>string</strMailingListID>
    </GetOptOutList>
  </soap:Body>
</soap:Envelope> 
```

SOAP 响应的格式如下所示：

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetOptOutListResponse xmlns="http://api.anp.se/">
      <GetOptOutListResult>
        <xsd:schema>schema</xsd:schema>xml</GetOptOutListResult>
    </GetOptOutListResponse>
  </soap:Body>
</soap:Envelope> 
```

当您单击调用按钮时，在线服务会返回一个 XML 数据集，这是结果的片段：

```
<DataSet xmlns="http://api.anp.se/">
<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="Report">
<xs:complexType>
<xs:sequence>
<xs:element name="SendQueueID" type="xs:int" minOccurs="0"/>
<xs:element name="SendTime" type="xs:dateTime" minOccurs="0"/>
<xs:element name="Subject" type="xs:string" minOccurs="0"/>
<xs:element name="SubscriberCount" type="xs:int" minOccurs="0"/>
<xs:element name="MailingList" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema>
<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
<NewDataSet xmlns="">
<Report diffgr:id="Report1" msdata:rowOrder="0">
<SendQueueID>1235163</SendQueueID>
<SendTime>2011-06-20T12:26:54.25+02:00</SendTime>
<Subject>Tack för din bokning</Subject>
<SubscriberCount>939</SubscriberCount>
<MailingList>Tack för din bokning 2011-06-20</MailingList>
</Report>
<Report diffgr:id="Report2" msdata:rowOrder="1">
<SendQueueID>1235146</SendQueueID>
<SendTime>2011-06-20T12:15:55.62+02:00</SendTime>
<Subject>Välkommen hem</Subject>
<SubscriberCount>688</SubscriberCount>
<MailingList>Välkommen hem 2011-06-20</MailingList>
</Report>
<Report diffgr:id="Report3" msdata:rowOrder="2">
<SendQueueID>1235128</SendQueueID>
<SendTime>2011-06-20T12:08:54.277+02:00</SendTime>
<Subject>Trevlig resa</Subject>
<SubscriberCount>832</SubscriberCount>
<MailingList>Trevlig resa 2011-06-20</MailingList>
</Report>
<Report diffgr:id="Report4" msdata:rowOrder="3">
<SendQueueID>1232232</SendQueueID>
<SendTime>2011-06-17T12:07:54.767+02:00</SendTime>
<Subject>Tack för din bokning</Subject>
<SubscriberCount>398</SubscriberCount>
<MailingList>Tack för din bokning 2011-06-17</MailingList>
</Report> 
```

如果您向我推荐一个教程，请确保它直截了当并且很有用，因为我已经看到了很多对我没有帮助的教程。我需要处理数据集。如何获取数据集对象以及如何访问其中的数据？我是否必须向我的项目添加服务首选项？应该是什么类型的 .Net 项目？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:42:06.913

几乎任何类型的 C# 项目都应该可以工作。您只需右键单击项目并选择“添加服务引用”。然后你可以把网址放到地址文本框中，给它一个名字，然后点击确定。这应该创建一个服务代理类，其中包含您需要的所有内容，包括服务返回的所有类。

我已经很久没有这样做了。这个***非常*基本**的示例使用 Dilbert Web 服务：

```
DilbertSoapClient client = new DilbertSoapClient();
string s = client.DailyDilbert(DateTime.Now);
DataTable table = new DataTable();
StringReader reader = new StringReader(s);
table.ReadXml(reader);
foreach (DataRow row in table.Rows)
{
    // do something with the row
} 
```

当然，我没有你实际使用的webservice，所以处理它可能会有所不同，但这是基本模型。

# sql - 如何以编程方式在 as400 上运行复杂查询？

> ID：12922462
> 
> 赞同：10
> 
> 时间：2012-10-16T19:54:39.207
> 
> 标签：sql, ibm-midrange, db2-400

我是使用 as400 的新手，我有一个跨 4 个表的连接查询。查询本身很好，它在 STRSQL 中运行并显示结果。

我正在努力使查询能够以编程方式运行（它最终将从预定的 CL 脚本中运行）。

我尝试创建一个物理文件，其中包含使用 RUNQRY 运行它的查询，但它只是显示查询本身，而不是实际的结果集。

有谁知道我做错了什么？

* * *

## 更新

感谢大家的指导和资源，有了他们，我能够实现我的目标。如果它对任何人有帮助，这就是我最终要做的事情（所有这些都是在它自己的库 ALLOCATE 中完成的）：

1.  创建了一个源物理文件（使用 CRTSRCPF）：QSQLSRC，并创建了一个名为 SQLLEAGSEA 的成员，其类型为 TXT，其中包含 SQL 语句。

2.  创建了另一个源物理文件：QCLSRC，并创建了一个名为 POPLEAGSEA 的成员，其类型为 CLP，将当前库更改为 ALLOCATE，然后使用 RUNSQLSTM 运行查询（下面有更多详细信息）。这是实际的命令：

    RUNSQLSTM SRCFILE(QSQLSRC) SRCMBR(SQLLEAGSEA) COMMIT(*NONE) NAMING(*SYS)

3.  将 CLP 添加到计划作业（使用 ADDJOBSCDE），运行以下命令：

呼叫 PGM（分配/POPLEAGSEA）

关于 RUNSQLSTM，我的研究表明我将无法使用此功能，因为它不支持 SELECT 语句。我在我的问题中没有指出的是我需要对结果做什么——我将把结果数据插入另一个表（如果我这样做了，我相信帮助可以解决很多问题更快）。如此有效，我不打算做一个 SELECT，我的最终结果实际上是一个 INSERT。所以我的 SQL 语句（在 SQLLEAGSEA 中）以：

插入分配/LEAGSEAS

选择 ... 呜呜呜呜...

根据我的研究，我发现 RUNSQLSTM 不支持 SELECT，因为它没有对结果做任何事情的机制。一旦我停止采取婴儿步骤并意识到我需要在同一个语句中选择和插入，它就解决了我的主要问题。

再次感谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T20:30:37.830

该命令是[`RUNSQLSTM`](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/cl/runsqlstm.htm)在物理文件成员或流文件中运行静态 SQL 语句。

它是一个非交互式命令，因此它不会执行试图返回结果集的 sql 语句。

如果您想要更多控制，包括运行交互式语句的能力，请参阅[Qshell db2 实用程序](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahz/rzahzdb2utility.htm)。

例如：

```
QSH CMD('db2 -f /QSYS.LIB/MYLIB.LIB/MYSRCFILE.FILE/MYSQL.MBR') 
```

请注意，该`db2`实用程序仅接受 *SQL 命名约定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T22:47:40.527

## 质量管理查询

如果您需要的所有 SQL 都是单个复杂的 SQL 语句，并且听起来就是这样，那么您最好的选择是使用查询管理查询[（请参阅此处的 QM 查询手册）](http://publib.boulder.ibm.com/infocenter/iseries/v6r1m0/topic/rzatc/sc415703.pdf)。

结果可以定向到显示器、假脱机文件或物理文件（即 DB2 表）。交互运行时的默认输出是屏幕，但在（计划的）批处理作业中运行时，它将默认为假脱机文件报告。

`WRKQMQRY`您可以通过、在提示模式（很像 Query/400）或 SQL 模式下交互式地创建 QM 查询。`CRTQMQRY`或者，您可以使用命令从源代码编译 QM 查询。
要运行您的 QM 查询，请使用`STRQMQRY`命令。

## 运行 SQL 命令

如果您使用的系统具有完全最新的 IBM i 7.1，并且安装了 Technology Refresh 4 (TR4)，那么您还可以使用新`RUNSQL`命令来执行单个语句。[（参见 developerWorks 中的讨论）](https://www.ibm.com/developerworks/mydeveloperworks/wikis/home?lang=en#/wiki/IBM%20i%20Technology%20Updates/page/Run%20SQL%20%28RUNSQL%29%20-%20new%20command)

## 使用 RUNSQLSTM cmd 编写 SQL 脚本

在 CL 中，您可以从一个源文件成员运行多个 SQL 语句的 SQL 脚本。对此没有标准的默认源文件名，但通常使用 QSQLSRC。源成员可以包含多个非交互式 SQL 语句。这意味着您不能（直接）使用 SELECT 语句，因为理论上它不知道将结果发送到哪里。`CL:`如果给定前缀，甚至允许使用 CL 命令。SQL 和 CL 语句都应该以分号结尾`;`。虽然 SQL 语句不能直接在屏幕上显示数据，但同样的限制不适用于脚本化的 CL 命令。

通过在命令前面放置前缀“CL:”，`STRQMQRY`可以将命令嵌入到脚本中。`RUNSQLSTM`由于 STRQMQRY 可以直接输出到屏幕、报告或输出表，这非常有用。

请记住，要将 SELECT 查询的输出定向到文件，您可以使用 INSERT 或 CREATE TABLE 语句。

```
CREATE TABLE newtbl AS
  ( full-select )
  WITH DATA; 
```

或者，要将结果放入您在作业的 QTEMP 库中创建的表中：

```
DECLARE GLOBAL TEMPORARY TABLE AS
  ( full-select )
  WITH DATA; 
```

* * *

[注意：如果您创建供 使用的源`CRTQMQRY`，建议您将其创建为`CRTSRCPF yourlib/QQMQRYSRC RCDLEN(91)`，因为编译器将仅使用 79 列源数据（添加 12 用于序列和更改日期 =91）。但是对于可用于提供附加格式的 QM 表单，`CRTQMFORM`编译器将使用 81 列，因此`RCDLEN(93)`建议用于 QQMFORMSRC。]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T20:32:27.837

RUNQRY 是一个实用程序，可让您执行由另一个名为 WRKQRY 的实用程序创建的查询。如果您真的想处理保存在文件中的 SQL 语句，请尝试 RUNSQLSTM。它使用源物理文件来存储语句，而不是数据库文件。该源物理文件的标准名称是 QQMQRYSRC。要创建该文件，CRTSRCPF yourlib/QQMQRYSRC. 然后，您可以使用 PDM 处理该源 PF。WRKMBRPDM yourlib/QQMQRYSRC。使用 F6 创建新的源成员。将其设为源类型 TXT。然后使用选项 2 将启动一个名为 SEU 的编辑器。将您的 SQL 语句复制/粘贴到此编辑器中。F3 保存源。保存源代码后，使用 RUNSQLSTM 执行它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T21:43:28.237

（现在）可以在不使用 QM Query、RUNSQLSTM 或 QShell 的情况下直接在 CL 程序中运行 SQL。

这是一篇讨论 CL 程序中的 RUNSQL 语句的文章...

[http://www.mcpressonline.com/cl/the-cl-corner-introducing-the-new-run-sql-command.html](http://www.mcpressonline.com/cl/the-cl-corner-introducing-the-new-run-sql-command.html)

本文包含有关支持哪些操作系统级别的信息以及使用 RUNSQL 语句的几种方法的清晰示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T12:33:43.173

当然有一个完全不同的解决方案：您可以编写和编译一个包含该语句的程序。它需要更长的阅读时间，特别是如果您是该平台的新手，但它应该为您提供最大的灵活性来处理结果。您可以在 C、C++、RPG、RPG/LE、REXX、PL（我不知道它是什么）和 COBOL 中使用 SQL。这样做，您可以以任何可处理的方式对一个查询的结果做出反应，并根据您获得的结果启动/创建其他查询。

尽管一些老式的 RPG 程序员千方百计否认 RPG 中的 SQL 存在，但今天在许多情况下，编写仅使用 SQL 且没有直接文件访问的 RPG 程序是可能的（对于那些了解 RPG 的人来说，没有 F-Specs）。

如果您的解决方案适合您，那就完美了。如果您需要做其他事情，请尝试查看此 pdf：http: [//publib.boulder.ibm.com/infocenter/iseries/v5r3/topic/rzajp/rzajp.pdf](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/topic/rzajp/rzajp.pdf)

与 RPG 的融合还不错。它适用于正常的程序流程。看起来像这样（自由形式）：

```
/free
    // init search values:
    searchval = 'Someguy';
    // so the sql query:
    exec sql
      SELECT colum1, colum2
      INTO :var1, :var2
      FROM somelib/somefile
      WHERE keycol=:searchval;
    // now do something with the values:
    some_proc(var1);
/end-free 
```

在此，`var1`、`var2`和`searchval`是普通的 RPG 变量。无需引用。也适用于数据结构（外部定义，例如文件本身的记录格式非常适合）。当然，您也可以使用游标和循环。我觉得 RPG 程序往往更容易阅读。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-08T19:20:00.717

这将分两个步骤进行：

```
 RUNSQL SQL('CREATE TABLE QTEMP/REPORT AS (SELECT +         
          EXTRACT_DATE , SYSTEM, ODLBNM, SUM( +              
          OBJSIZE_MB ) AS LIB_SIZE FROM +                    
          ZSYSCOM/DISKRPTHST WHERE ODLBNM LIKE +             
          ''SIS%'' GROUP BY EXTRACT_DATE, SYSTEM, +          
          ODLBNM ORDER BY LIB_SIZE DESC) WITH +              
          DATA') COMMIT(*NONE) DATFMT(*USA) DATSEP(/)        

 RUNQRY     QRYFILE((QTEMP/REPORT)) OUTTYPE(*PRINTER) +          
          OUTFORM(*DETAIL) PRTDFN(*NO) PRTDEV(*PRINT) 
```

第一步在 qtemp 中创建一个临时表结果，第二步/行仅对临时表运行临时查询到假脱机文件。

谢谢，迈克尔弗里洛

# networking - 我将如何使用/在 NS2 中模拟 TCP-RTM？

> ID：12922464
> 
> 赞同：1
> 
> 时间：2012-10-16T19:54:42.700
> 
> 标签：networking, tcp, real-time, ns2

[这是Sam Liang](http://gregorio.stanford.edu/sliang/)和[David Cheriton](http://www.forbes.com/profile/david-cheriton/)的一篇名为“ [TCP-RTM：使用 TCP 进行实时多媒体应用程序](http://gregorio.stanford.edu/sliang/rtm.pdf)”的论文。

本文是为了适应 tcp 在实时应用中的使用。我实际上希望您帮助我的两个主要修改是：

1.  在 TCP 连接上的应用程序级读取时，如果没有按顺序读取的数据排队等待连接，但有一个或多个乱序数据包排队等待连接，则第一个连续范围的乱序数据包将从乱序队列到接收队列，接收指针前进到这些数据包之外，并将产生的数据传递给应用程序。在接收到序列号在逻辑上大于当前接收指针 (rcv next ptr) 的无序数据包并且读取器正在等待连接时，数据包数据被传递到等待接收器，接收指针提前过去这个数据，这个新的接收指针在下一个确认段中返回。
2.  在发送方的发送缓冲区因大量积压数据而已满的情况下，TCP-RTM 会丢弃缓冲区中最旧的数据段，并接受应用程序写入的新数据。TCP-RTM 也将其发送窗口推进到丢弃的数据段。这样，应用程序写入调用永远不会被阻塞，并且发送方应用程序的时间不会被破坏。

他们实际上在真实环境中的旧 linux 2.2 内核中更改了 tcp 的“tcpreno with sack”版本。但是，我想在[NS2](http://www.isi.edu/nsnam/ns/)中模拟这个。我可以使用 NS2，例如分析、制作性能图表等。我查看了所有相关文件，但找不到更改的地方。所以，请你帮我做这件事。

# ruby-on-rails - 未找到 jquery-ui 资产。如何将rails管道中的资产合并到jquery-ui css中？

> ID：12922468
> 
> 赞同：3
> 
> 时间：2012-10-16T19:55:04.193
> 
> 标签：ruby-on-rails, ruby, jquery-ui, asset-pipeline

我注意到在本地我们收到了关于 7 个不同 jquery-ui 图像的错误，例如`ActionController::RoutingError (No route matches [GET] "/public/ui-bg_highlight-soft_100_eeeeee_1x100.png")`

这些资产确实存在于 jquery-ui 文件结构中。

我发现将 jquery-ui 框架 css 本身中使用的 url 从“ `url(/images/ui-bg_highlight-soft_100_eeeeee_1x100.png`”更改为“ `url(/assets/ui-bg_highlight-soft_100_eeeeee_1x100.png`”或“ `url(ui-bg_highlight-soft_100_eeeeee_1x100.png`”可以消除错误（尽管我也必须在`rake assets:precompile`本地执行）。然而，这似乎是一种不好的方法，而不是正确的做法。

解决这些错误的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:29:42.810

首先，我强烈建议使用 jquery-ui-rails gem 轻松地将 jquery ui 滚动到资产管道中。

在您的 Gemfile 中：

```
group :assets do
  gem 'jquery-ui-rails' # jquery ui
end 
```

在您的 app/assets/stylesheets/application.css 中：

```
*= require jquery.ui.all 
```

请注意，您只能要求您使用的 jquery ui 的部分，例如进度条或日期选择器，ala`jquery.ui.progressbar`

在 app/assets/javascripts/application.js 中：

```
//= require jquery.ui.all 
```

现在运行`bundle install`，瞧！你准备好了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T01:32:30.490

最终结果是：

*   删除我的本地版本。
*   将项目添加到 jquery js 和 css 清单文件中。
*   使用 jquery-ui-rails gem

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T04:08:05.653

在浏览器中观察 404 Not Found 是什么路径，然后确保 query-ui 主题的 /images 目录已移动或链接到 Rails 应用程序中的该路径。

**例子**

我经历404：

```
http://localhost:3000/assets/images/ui-icons_ffffff_256x240.png 
```

我的 jquery-ui 主题目录在 /vendor，所以图片的真实路径是：

```
RAILS_ROOT/vendor/assets/stylesheets/ui-lightness/images 
```

因此，要修复 404，请将符号链接放置到预期的目录：

```
% cd vendor/assets/stylesheets
% ln -s ui-lightness/images images 
```

现在，该 URL 提供图像。

# c - 当我使用 sendto() 发送数据包时，我看到“IP0 bad-hlen 0”错误

> ID：12922472
> 
> 赞同：0
> 
> 时间：2012-10-16T19:55:17.047
> 
> 标签：c, sockets, packet

使用 sendto() 函数发送数据包，使用 TCP Dump 分析数据包，我得到：

> IP0 坏-hlen 0

该程序使用 libpcap 和 raw socket 来避免 SYN Stealth，在每个打开的端口发送一个 SYN/ACK 数据包，以欺骗攻击者。

这是我的代码：

```
#include <pcap.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netinet/tcp.h>
#include <netinet/ip.h>
#include <time.h>
#include <netinet/ether.h>
#include <limits.h>
#include <string.h>
#include <errno.h>
#include <malloc.h>
#define MAX_EXISTING_PORTS 30

void caught_packet(u_char *,const struct pcap_pkthdr *,const u_char *);
int set_packet_filter(pcap_t *,struct in_addr *,u_short *);
unsigned short csum(unsigned short *ptr,int nbytes);
int random_number(int);
void fatal(char *);
void print_ip_hdr(struct iphdr *);
void print_eth_hdr(struct ethhdr *);
void print_tcp_hdr(struct tcphdr *);

int main(int argc,char *argv[]){
//Pcap header
struct pcap_pkthdr cap_header;
//Packet Char pointer
const u_char *packet;
//Pcap Handle
pcap_t *pcap_handle;
//Pcap error Buffer
char errbuf[PCAP_ERRBUF_SIZE];
//Sniffing Device
char *device;
//Socket Descriptor
int sockfd;
int i,yes=1;
//sockaddr_in to check validity of IP
struct sockaddr_in sa;
//Array of available ports
u_short existing_ports[MAX_EXISTING_PORTS];

if((argc < 2) || ( argc > MAX_EXISTING_PORTS+2)){
    if(argc >2)
        printf("Limited to tracking %d existing ports.\n",MAX_EXISTING_PORTS);
    else
        printf("Usage: %s <IP to shroud> [existing ports...]\n",argv[0]);
    exit(0);
}
if(geteuid()!=0)
    fatal("you must run this program as root ");
//Check target ip
if(inet_pton(AF_INET,argv[1],&(sa.sin_addr)) == 0)
    fatal("Invalid target address");
if((sockfd = socket(AF_INET,SOCK_RAW,IPPROTO_TCP)) == -1)
    fatal("Making socket");
if(setsockopt(sockfd, IPPROTO_IP, IP_HDRINCL, &yes, sizeof(yes)) < 0)
    fatal("Setting IP_HDRINCL");
//Iterate command line arguments saving them to existing_ports[]
for(i=2;i< argc;i++)
    existing_ports[i-2] = (u_short) atoi(argv[i]);

existing_ports[argc-2] = 0;
//Initialize Pcap Device
device = pcap_lookupdev(errbuf);
if(device == NULL)
    fatal(errbuf);
printf("Sniffing on device %s \n",device);
//Initialize Pcap Handle in promiscous mode
pcap_handle = pcap_open_live(device,128,1,0,errbuf);
if(pcap_handle == NULL)
    fatal(errbuf);
//Call set_packet_filter() function
set_packet_filter(pcap_handle,(struct in_addr *)&sa.sin_addr,existing_ports);
//Call pcap_loop() function and use callback function caught_packet
pcap_loop(pcap_handle,-1,caught_packet,(u_char *)&sockfd);
//Close pcap handler
pcap_close(pcap_handle);
//Close socket descriptor
close(sockfd);
return(0);
}

void fatal(char *msg){
printf("%s",msg);
exit(1);

 }

 int random_number(int nt){
struct timeval tv;
gettimeofday(&tv,NULL);
unsigned int seed = (unsigned int)tv.tv_usec;
srand(seed);
switch(nt){
//1 <--> Unsigned 8-Bit
    case 1:
        return(rand()%UCHAR_MAX);
        break;
//2 <--> Signed 8-Bit
    case 2:
        return(rand()%SCHAR_MAX);
        break;
//3 <--> Unsigned Short
    case 3:
        return(rand()%USHRT_MAX);
        break;
//4 <--> Signed Short
    case 4:
        return(rand()%SHRT_MAX);
        break;
//5 <--> Unsigned Int
    case 5:
        return(rand()%UINT_MAX);
        break;
//6 <--> Signed Int
    case 6: 
        return(rand()%INT_MAX);
        break;
//7 <--> Unsigned Long
    case 7:
        return(rand()%ULONG_MAX);
        break;
//8 <--> Signed Long
    case 8:
        return(rand()%LONG_MAX);
        break;
// Default value
    default:
        return(0);
        break;
}
   }

  int set_packet_filter(pcap_t *pcap_hdl,struct in_addr *target_ip,u_short *ports){
//Bpf Filter
struct bpf_program filter;
char *str_ptr,filter_string[90+(25 * MAX_EXISTING_PORTS)];
int i=0;
//Set dst host rule
sprintf(filter_string,"dst host %s and ",inet_ntoa(*target_ip));
//Set flag rule
strcat(filter_string,"tcp[tcpflags] & tcp-syn != 0 and tcp[tcpflags] & tcp-ack = 0");
//Set ports rules
if(ports[0] != 0){
    str_ptr = filter_string + strlen(filter_string);
    if(ports[1] == 0)
        sprintf(str_ptr," and not dst port %hu",ports[i]);
    else{
        sprintf(str_ptr," and not (dst port %hu",ports[i++]);
        while(ports[i] != 0){
            str_ptr= filter_string + strlen(filter_string);
            sprintf(str_ptr," or dst port %hu",ports[i++]);
        }
        strcat(filter_string,")");
    }
}
//Print final filter string
printf("DEBUG: filter string is \' %s \' \n ",filter_string);
//Try to compile filter string into bpf filter
if(pcap_compile(pcap_hdl,&filter,filter_string,0,0) == -1)
    fatal("pcap_compile failed");
//Assign bpf filter to pcap handler
if(pcap_setfilter(pcap_hdl,&filter) == -1)
    fatal("pcap_setfilter failed");
  }

  unsigned short csum(unsigned short *buf, int nwords)
  {       //
    unsigned long sum;
    for(sum=0; nwords>0; nwords--)
            sum += *buf++;
    sum = (sum >> 16) + (sum &0xffff);
    sum += (sum >> 16);
    return (unsigned short)(~sum);
   }

 void print_ip_hdr(struct iphdr *iphdr){
//Print IP Header IN HOST BYTE ORDER AND NETWORK BYTE ORDER
printf("IP HEADER \n\n ");
printf("             NORD HORD  \n");
printf("IP VERSION  | %d | %d |\n",iphdr->version,ntohs(iphdr->version));
printf("IP HDL      | %d | %d |\n",iphdr->ihl,ntohs(iphdr->ihl));
printf("IP TOS      | %d | %d |\n",iphdr->tos,ntohs(iphdr->tos));
printf("IP TOT LEN  | %d | %d |\n",iphdr->tot_len,ntohs(iphdr->tot_len));
printf("IP ID       | %d | %d |\n",iphdr->id,ntohs(iphdr->id));
printf("IP FRAG OFF | %d | %d |\n",iphdr->frag_off,ntohs(iphdr->frag_off));
printf("IP TTL      | %d | %d |\n",iphdr->ttl,ntohs(iphdr->ttl));
printf("IP PROTOCOL | %d | %d |\n",iphdr->protocol,ntohs(iphdr->protocol));
printf("IP CHECKSUM | %d | %d |\n",iphdr->check,ntohs(iphdr->check));
printf("SOURCE ADDRESS | %s | \n",inet_ntoa(*((struct in_addr *)&iphdr->saddr)));
printf("DEST ADDRESS   | %s | \n\n",inet_ntoa(*((struct in_addr *)&iphdr->daddr)));
  }

  void print_eth_hdr(struct ethhdr *ethhdr){
int i;
//Print ETHERNET Header 
printf("ETHERNET HEADER \n\n");
printf("DEST MAC   | ");
for(i=0;i<ETH_ALEN;i++)
    printf("%x",ethhdr->h_dest[i]);
printf(" |\n");
printf("SOURCE MAC | ");
for(i=0;i<ETH_ALEN;i++)
    printf("%x",ethhdr->h_source[i]);
printf(" |\n\n");
  }

  void print_tcp_hdr(struct tcphdr *tcphdr){
//Print TCP Header IN HOST BYTE ORDER AND NETWORK BYTE ORDER
printf("TCP HEADER \n\n");
printf("             NORD HORD  \n");
printf("SOURCE PORT | %d | %d |\n",tcphdr->source,ntohs(tcphdr->source));
printf("DEST PORT   | %d | %d |\n",tcphdr->dest,ntohs(tcphdr->dest));
printf("SEQ         | %d | %d |\n",tcphdr->seq,ntohl(tcphdr->seq));
printf("ACK         | %d | %d |\n",tcphdr->ack_seq,ntohl(tcphdr->ack_seq));
printf("Flags |FIN|SYN|RST|PSH|ACK|URG| \n");
printf("      |%d |%d |%d |%d |%d |%d | \n",tcphdr->fin,tcphdr->syn,tcphdr->rst,tcphdr->psh,tcphdr->ack
        ,tcphdr->urg);
printf("WINDOW      | %d | %d |\n",tcphdr->window,ntohs(tcphdr->window));
printf("TCP CHECKSUM| %d | %d |\n",tcphdr->check,ntohs(tcphdr->check));
printf("URG PTR     | %d | %d |\n\n",tcphdr->urg_ptr,ntohs(tcphdr->urg_ptr));

 }

 void caught_packet(u_char *user_args,const struct pcap_pkthdr *cap_header,const u_char *packet){
//Bytes written and Socket Descriptor
int bcount,sockfd;
//IP Header
struct iphdr *iphdr_old,*iphdr;
//TCP Header
struct tcphdr *tcphdr_old,*tcphdr;
//Retrieve sockfd
sockfd = *((int *)user_args);
//Packet Buffer
char pkt_buffer[sizeof(struct iphdr) + sizeof(struct tcphdr)];
//Structuring old packet
iphdr_old = (struct iphdr *)(packet + sizeof(struct ethhdr));
tcphdr_old = (struct tcphdr *)(packet + sizeof(struct ethhdr) + sizeof(struct iphdr));
//Structuring new headers
iphdr = (struct iphdr *)(packet);
tcphdr = (struct tcphdr *)(packet + sizeof(struct iphdr));
//Sin address to send packet
struct sockaddr_in sin;
//initialize buffer
memset(pkt_buffer,0,(sizeof(struct iphdr) + sizeof(struct tcphdr)));
//initialize sin addr
sin.sin_family = AF_INET;
sin.sin_port = tcphdr_old->source;
sin.sin_addr = *((struct in_addr *)&iphdr_old->saddr);

print_ip_hdr(iphdr_old);
print_tcp_hdr(tcphdr_old);

//Create Packet
//Ip Header

iphdr->ihl       = 5;
iphdr->version   = 4;
iphdr->tos       = IPTOS_LOWDELAY;
iphdr->tot_len   = htons(sizeof(struct ip) + sizeof(struct tcphdr));
iphdr->id        = htons(random_number(3));;
iphdr->frag_off  = 0;
iphdr->ttl       = MAXTTL;
iphdr->protocol  = IPPROTO_TCP;
iphdr->check     = 0;
//Reverse IPs
iphdr->saddr     = iphdr_old->daddr;
iphdr->daddr     = iphdr_old->saddr;

//Tcp Header
//Reverse Ports
tcphdr->source = tcphdr_old->dest;
tcphdr->dest   = tcphdr_old->source;
tcphdr->seq    = htonl(random_number(5));
tcphdr->ack_seq= (tcphdr_old->seq+1);
tcphdr->doff   = 5;
tcphdr->syn    = 1;
tcphdr->ack    = 1;
tcphdr->fin    = 0;
tcphdr->rst    = 0;
tcphdr->psh    = 0;
tcphdr->urg    = 0;
tcphdr->window = htons(random_number(3));
tcphdr->check  = 0;
tcphdr->urg_ptr= 0;

//IP Checksum
iphdr->check = csum((unsigned short *) pkt_buffer,(sizeof(struct iphdr) + sizeof(struct tcphdr)));

//DEBUG
print_ip_hdr(iphdr);
print_tcp_hdr(tcphdr);

//Send packet
bcount = sendto(sockfd,pkt_buffer,ntohs(iphdr->tot_len),0,(struct sockaddr *)&sin,(socklen_t)sizeof(sin));

if(bcount < 0 )
    printf("Couldn't send packet: %s  \n",strerror(errno));
else
    printf("(%d) bytes sent ! \n",bcount);

 } 
```

我该如何解决这个问题？

# jquery - jQuery 幻灯片在 IE 中加载 3 次中的 1 次

> ID：12922475
> 
> 赞同：1
> 
> 时间：2012-10-16T19:55:21.467
> 
> 标签：jquery, internet-explorer, slideshow

[我的网站](http://www.holzwurm-namibia.com/gallery.php?c=k&g=adler)上有一个[Cycle2](http://jquery.malsup.com/cycle2/)幻灯片。此图像幻灯片在 Chrome 上加载良好。

在 IE9 上，这个幻灯片可以正常工作，但前提是它显示出来。这就是问题所在。它只是有时会出现。我会说大约三分之一。（打开兼容模式时也会发生同样的情况）

如何开始搜索此错误？或者更确切地说，这个错误是什么？

**编辑：**我现在注意到幻灯片实际上显示了一秒钟，然后消失了。

**Edit2：**删除`data-cycle-loader="wait"`页面后似乎在 IE 中加载正常。我无法解释为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:21:29.687

`data-cycle-loader="wait"`从幻灯片中删除将修复此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:10:01.123

您应该做的第一件事是检查任何控制台错误。按 F12 然后导航到控制台选项卡并刷新页面。如果有任何问题，您应该会看到与您的代码/周期 2 相关的控制台错误。另一件事是检查它是否在 IE7/8 中工作。您可以通过更改控制台选项卡上方的“浏览器模式”来切换这些模式。

我唯一能想到的另一件事是，有一些奇怪的 z-indexing 问题导致脚本隐藏在另一个元素后面……或其他东西。

# javascript - 避免多次加载相同的 javascript

> ID：12922482
> 
> 赞同：0
> 
> 时间：2012-10-16T19:56:00.187
> 
> 标签：javascript, html

我想防止我的系统多次加载同一个脚本，因为可以组合不同的模块并且我使用我不想操作的第三方库。

有没有人这样做过？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:58:25.443

[RequireJS](http://requirejs.org/)怎么样？似乎是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:48:58.887

由于诸如 Require JS 之类的库没有解决我的问题，我制作了自己的解决方案，我将在下面发布。

我的系统也是由不同的模块组成的。在主模块中，我有一个用于所有模块（php、js 和 css 文件）的依赖项的加载器。加载依赖项后，应用程序会触发一个事件并设置一个全局变量，以防止双重包含文件。

希望能帮助到你。如果您有任何疑问，请告诉我。

编码：

```
//Main 
var main = {
    init: function(){
        //Dependencies to load (php, js or css)
        var deps = [
            '/helpers/edit/v/edit.php',                
            '/helpers/edit/css/edit.css',              
            '/helpers/validate/js/jquery.validate.js,messages_pt_BR.js'
        ];        
        //Load initial pack
        if (!window.editReady){
            //Load dependencies
            this.load('edit',deps);        

            //Bind loaded event
            $('body').on('editReady',function(){
                //Set editLoaded to avoid double ajax requests
                window.editReady = true;

                //Do whatever you need after it's loaded

            });
        }
    },
    //Load external resources
    load: function(name,data_urls){
        var url, ext;  
        var len = data_urls.length;
        var i = 0;
        $(data_urls).each(function(){
          //Get proper file
          $.get(this, function(data) {
              url = this.url;
              ext = url.split('.').pop();
              switch(ext){
                  case 'php':
                      this.appended
                      $(data).appendTo('body');
                      break;
                  case 'css':
                      $('<link/>')
                        .attr({
                          'rel':'stylesheet',
                          'href':url
                        }).appendTo('head');
                      break;
              }
              //Check if all files are included
              i += 1;
              if (i == len) {
                $("body").trigger(name+"Ready");
              }
          });
        });
    }
};

var modules = {
    themes : {
        init : function(){
            //Load dependencies
            var deps = [
                '/helpers/plupload/js/plupload.js,plupload.html5.js,plupload.flash.js' 
            ];        
            if (!window.themesReady){
                //Set themesReady to avoid double ajax requests
                window.themesReady = true;

                //Load dependencies
                main.load('themes',deps);   

                $('body').on('themesReady',function(){

                    //Do whatever you need after it's ready
                });
            }
        }
    }
}    
main.init(); 
```

# c# - 自定义验证对象未设置为实例

> ID：12922483
> 
> 赞同：1
> 
> 时间：2012-10-16T19:56:00.580
> 
> 标签：c#, webforms, customvalidator

我是验证新手，我创建了一个简单的 web 表单，我正在尝试验证，我在其中覆盖了 App_Code 文件夹`EvaluateIsValid()`中类的方法。`BaseValidator`在这种方法中，我在调用设置字符串时收到错误**Object is not set to an instance of an object 。**`this.GetControlValidationValue()`

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="ValidApp.Default" %>

<!DOCTYPE html>

<script runat="server">
    protected void pageCvd_ServerValidate(object source, ServerValidateEventArgs args)
    {
        ValidApp.App_Code._Validators valid = new ValidApp.App_Code._Validators(usernameTxt.ClientID.ToString());
    }
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div style="display:inline-block; width:200px;">
        <asp:CustomValidator ID="pageValidatorCvd" runat="server" EnableClientScript="false" OnServerValidate="pageCvd_ServerValidate"></asp:CustomValidator>       
        <asp:Label ID="usernameLbl" runat="server" Text="Username:" style="width:50px; font-size:xx-small"></asp:Label>
        <asp:TextBox ID="usernameTxt" runat="server" style="width:100px; font-size:xx-small"></asp:TextBox>
        <br />
        <asp:Label ID="passwordLbl" runat="server" Text="Password:" style="width:50px; font-size:xx-small"></asp:Label>
        <asp:TextBox ID="passwordTxt" runat="server" style="width:100px; font-size:xx-small"></asp:TextBox> 
    </div>
    <div>
        <asp:Button ID="registryBtn" runat="server" OnCommand="registryBtn_Command" CommandName="" CommandArgument="" Text="Register" style="width:50px; font-size:xx-small"/>
    </div>
    </form>
</body>
</html> 
```

* * *

**代码背后**

* * *

```
namespace ValidApp.App_Code
{
    public class _Validators : BaseValidator
    {
        private string regex;
        private string errorMessage;
        private string controlToValidate;

        protected override bool EvaluateIsValid()
        {
            string value = this.GetControlValidationValue(controlToValidate);
            return Regex.IsMatch(value, regex);
        }

        public _Validators(string controlToValidate = "", string regex = @"^[a-z0-9]{6-8}$", string errorMessage = "The Username is not valid!")
        {
            this.regex = regex;
            this.errorMessage = errorMessage;
            this.controlToValidate = controlToValidate;

            bool validation = EvaluateIsValid();            
        }
    }
} 
```

我试图创建自己的自定义验证，`<%@ Register >`但无济于事。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:39:16.817

解决方案：

似乎您无法调用类**构造函数**，这样`EvaluateIsValid()`方法会自行命中并获得正确的控制权！

```
namespace ValidApp.App_Code
{
    public class _Validators : BaseValidator
    {   
        protected override bool EvaluateIsValid()
        {
            string value = this.GetControlValidationValue(ControlToValidate);
            return Regex.IsMatch(value, @"^[a-z0-9]{6-8}$");
        }

        public _Validators()
        {

        }
    }
} 
```

这就是它的全部内容！

# javascript - 如何制作按钮来隐藏和显示标记？

> ID：12922491
> 
> 赞同：0
> 
> 时间：2012-10-16T19:56:30.730
> 
> 标签：javascript, google-maps

在谷歌地图中，​​我想要隐藏和显示地图标记的按钮，但我需要有多个按钮，每个按钮都有自己的一组标记。例如，按钮 1 将显示和隐藏标记 1 和 3，而按钮 2 将显示和隐藏标记 2 和 4。

这对我来说有点难，因为我是 api v3 的新手。

这是我的代码。

```
 function initialize() {

    var mapDiv = document.getElementById('map-canvas');
    var map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(-8.762472, -63.887951),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP       });

  var marker = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(-8.759662,-63.906489),      
      icon:  predio});

   var infowindow    =  new google.maps.InfoWindow({
  content:contentimage})
 google.maps.event.addListener(marker,'click',function(){
infowindow.open(map,marker); });

var marker1 = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(-8.766159,-63.889567),      
      icon:  yellow});

  var infowindow1    =  new google.maps.InfoWindow({
 content:contentimage1})
   google.maps.event.addListener(marker1,'click',function(){
infowindow1.open(map,marker1); });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:37:53.367

## 你可能会喜欢这个

[**这里是一个工作示例**](http://jsfiddle.net/X5r8r/788/)。

```
function init()
{
    // Icon urls for 4 icons
    var bell="http://image1.png", cam="http://image2.png",
    black="http://image3.png", green="http://image4.png";
    // Image urls for 4 images
    conimg1="http://contentImage1.jpg", conimg2="http://contentImage2.jpg",
    conimg3="http://contentImage3.jpg", conimg4="http://contentImage4.jpg",

    var map,
    locations = [
        [42.82846160000000000000, -76.53560419999997000000, bell, conimg1],
        [43.65162010000000000000, -77.73558579999997000000, black, conimg2],
        [44.75846240000000000000, -78.22252100000003000000, cam, conimg3],
        [41.71773540000000000000, -75.74897190000002000000, green, conimg4]
    ],
    myOptions = {
       zoom: 6,
       center: new google.maps.LatLng(locations[0][0], locations[0][1]),
       mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var mapDiv = document.getElementById('map');
    map = new google.maps.Map(mapDiv, myOptions);
    var infowindow = new google.maps.InfoWindow(), marker, i, markers=[];
    for (i = 0; i < locations.length; i++) {  
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][0], locations[i][1]),
            map: map,
            icon: locations[i][2],
            visible:true   
         });
         markers.push(marker)
         google.maps.event.addListener(marker, 'click',(function(marker, i){
             return function() {
                 var img="<img class='contentImage' src='"+locations[i][3]+"' />";
                 infowindow.setContent(img);
                 infowindow.open(map, marker);
             }
         })(marker, i));
     }

    var btn1=document.getElementById('btn1');
    google.maps.event.addDomListener(btn1, 'click', function(){
        if(markers[0].visible)
        {   
            this.innerHTML="Show Icons (1 and 2)";
            this.className="btn"; 
            markers[0].setVisible(false);
            markers[1].setVisible(false);
        }
        else
        {
            this.innerHTML="Hide Icons (1 and 2)";
            this.className="btn btn-primary";
            markers[0].setVisible(true);
            markers[1].setVisible(true);  
        }    
    });

    var btn2=document.getElementById('btn2'); 
    google.maps.event.addDomListener(btn2, 'click', function(){
        if(markers[2].visible)
        {   
            this.innerHTML="Show Icons (3 and 4)";
            this.className="btn";
            markers[2].setVisible(false);
            markers[3].setVisible(false);
        }
        else
        {
            this.innerHTML="Hide Icons (3 and 4)";
            this.className="btn btn-primary";
            markers[2].setVisible(true);
            markers[3].setVisible(true);  
        }    
    });
} 
```

# ruby-on-rails - 指定没有子域的路由

> ID：12922497
> 
> 赞同：0
> 
> 时间：2012-10-16T19:56:49.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在运行 Rails 3.0.17。我目前在我的路线中定义了以下内容：

```
constraints :subdomain => "" do
    get 'faq'     => 'static_pages#faq'
end 
```

问题是它允许任何带有子域（例如 anysubdomain.mypage.com/faq）的 faq url 路由到 faq 页面，而我只希望没有子域（mypage.com/faq）的 url 路由到 faq 页面.

任何提示/见解？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:59:51.897

在你的`routes.rb`

```
constraints SubdomainConstraint.new do
  get 'faq' => 'static_pages#faq'
end 
```

在你的`lib/`

```
class SubdomainConstraint
  def self.matches?(request)
    request.subdomain.blank?
  end
end 
```

# php - 如何使用javascript从循环中的字段中获取信息

> ID：12922499
> 
> 赞同：0
> 
> 时间：2012-10-16T19:56:56.613
> 
> 标签：php, javascript, mysql

我有一堆图像名称正在从我的数据库中检索并处于 while 循环中。在这个循环中，我有一个带有图像名称的小表格。此表格正用于其他目的。我想要的是获取带有项目名称的字段信息到 javascript。

例子 ：

```
while($row = mysql_fetch_array($query)) { 
    $itemname = $row['name'];
    echo "< input type='hidden' name='$itemname' value='$itemname'>
    <img src='source' onclick='getname()'  width='100%' height='100%' />"; 
} 
```

我相信我点击的每张图片都只给我数据库中的第一个信息的原因是因为我的 id 被复制了。我的问题是如何在不使用 getElementById 的情况下将字段信息获取到 javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:00:27.587

使用以下更改后的 PHP：

```
$i = 0;
while($row = mysql_fetch_array($query)) { 
    $itemname = $row['name']; 
     echo "<input type='hidden' name='".$itemname."[]' id='input$i' value='$itemname' />";
     echo "<img src='source' onclick=\"getname('input$i')\" width='100%' height='100%' />"; 
     $i++;
} 
```

然后您可以在 Javascript 中检索输入值：

```
 function getname(id) {
   var theinput = $('#'+id).val(); // jQuery example
   // do something 
```

（我还将输入名称更改为一个数组，当然您可以将其命名为您想要的名称，也许`$itemname$i`可以是一个想法，这取决于您如何以及是否要处理您的表单，但是名称应该是唯一的或数组好实践）

这是 HTML/JS 的一个工作示例：http: [//jsfiddle.net/fuHSv/1/](http://jsfiddle.net/fuHSv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:04:24.193

如何使用一些 jQuery 1.8.2，如下所示：

```
$(document).ready(function() {
    var inputs = $('input').on('click', function() {
        var name = $(this).attr('name');
        var val = $(this).val();
        // do stuff
    });
}); 
```

有关更多信息，请参阅[api.jquery.com](http://api.jquery.com)。

# sql - 删除唯一约束的麻烦

> ID：12922500
> 
> 赞同：7
> 
> 时间：2012-10-16T19:57:06.947
> 
> 标签：sql, postgresql

在 PG 中：

我制作了一个包含唯一电子邮件的用户表，但后来决定电子邮件不应该是唯一的。我推送了更改以使我的电子邮件字段不唯一（我使用 ORM，所以我实际上没有发生的确切 SQL），但 PG 仍然不允许我使用重复的电子邮件地址。

我检查了索引，它不是唯一的，但是有一个限制让我不能拥有重复的电子邮件地址。但是，我无法删除此约束。我究竟做错了什么？

```
SQL> ALTER TABLE "users" DROP CONSTRAINT "unique_users_email"
PGError: ERROR:  constraint "unique_users_email" of relation "users" does not exist

SQL> UPDATE users SET email = 'test@test.com'
PGError: ERROR:  duplicate key value violates unique constraint "unique_users_email"
DETAIL:  Key (email)=(test@test.com) already exists. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:52:29.600

我敢打赌，“unique_users_email”实际上是唯一**索引**的名称，而不是约束。尝试：

`DROP INDEX "unique_users_email";`

`\d`在查看表的描述时，最新版本的 psql 应该会告诉您唯一索引和唯一约束之间的区别。

# vb.net - 使用面向 .NET 2.0 的 MSBuild 构建新的 Visual Basic 项目

> ID：12922501
> 
> 赞同：1
> 
> 时间：2012-10-16T19:57:07.127
> 
> 标签：vb.net, compiler-construction, build, msbuild

我在 VS 2010 和 2012 中针对 .NET 2.0 构建我的 VB 项目没有问题。

但是，MSBuild 拒绝构建它，因为它不喜欢 VS 2010 中引入的一种 VB 语言功能（更具体地说，它是“隐式续行”）。

我为 MSBuild 尝试了以下参数（来自 .NET 3.5）：

```
/p:TargetFrameworkVersion=2.0
/toolsversion:3.5 
```

这不是因为我使用的 VB 功能已在 4.0 工具中引入。

所以我将 toolsversion 更改为 4.0（并使用 .NET 4.0 的 MSBuild）：

```
/p:TargetFrameworkVersion=2.0
/toolsversion:4.0 
```

现在 MSBuild 抱怨另一件事：

```
C:\Users\Libor\AppData\Local\Temp\.NETFramework,Version=2.0.AssemblyAttributes.vb(6,24):
error BC30002: Type 'System.Runtime.Versioning.TargetFrameworkAttribute' is not defined.
[project.vbproj] 
```

现在对我来说唯一的解决方案是在 VS 2008 中打开我的项目并手动更正代码，使其与所有工具兼容。但我希望可以配置 MSBuild 以便正确构建，因为 VS 也可以针对 .NET 2.0 构建项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:00:29.267

类似的问答[在这里](https://stackoverflow.com/questions/2419585/target-specific-version-of-net-with-msbuild)。他们的关键是：

```
msbuild YourSolution.sln /tv:4.0 /p:TargetFrameworkVersion=v2.0 
```

# telerik - 使用级联组合框

> ID：12922504
> 
> 赞同：0
> 
> 时间：2012-10-16T19:57:18.250
> 
> 标签：telerik, radgrid, radcombobox

我正在使用 Telerik radGrid 来显示数据，包括地址。我希望能够插入新地址或编辑现有地址。为此，我希望使用级联组合框来预填充下一个，即 country_onselectedindexchanged 填充省/州等。

我的问题是，每当我单击 Country 时，我都可以在逐步完成中看到我的省/州组合已填充，但随后会发生回发，并且我的 Grid_itemdatabound 事件会触发，并且会再次重新填充初始数据。

我在 Telerik 网站上有一个帐户，但上次我发布问题花了一周时间才得到回复。

```
<telerik:RadGrid ID="RecipientsGrid" runat="server" AutoGenerateColumns="false"  EnableViewState="true" PageSize="5" 
                    AllowFilteringByColumn="true" AllowPaging="true" AllowSorting="True">
            <ClientSettings EnablePostBackOnRowClick="true">
                <Selecting AllowRowSelect="true" />
            </ClientSettings>
            <MasterTableView CommandItemDisplay="Bottom" DataKeyNames="RecipientOrganizationID" EditMode="EditForms" >   
                <EditFormSettings EditFormType="Template">
                <FormTemplate>
                                    <telerik:RadComboBox ID="CountryCombo" runat="server" DataTextField="CountryName" DataValueField="CountryID"  
                                                       OnSelectedIndexChanged="CountryCombo_SelectedIndexChanged" AutoPostBack="true">
                                    </telerik:RadComboBox>
                                    <telerik:RadComboBox ID="ProvinceCombo" runat="server" Width="325" EnableLoadonDemand="true" OnSelectedIndexChanged="ProvinceCombo_SelectedIndexChanged" AutoPostBack="true" >
                                    </telerik:RadComboBox>
                </FormTemplate>
            </EditFormSettings>

            </MasterTableView>

        </telerik:RadGrid> 
```

* * *

```
Private Sub RecipientsGrid_NeedDataSource(sender As Object, e As Telerik.Web.UI.GridNeedDataSourceEventArgs) Handles RecipientsGrid.NeedDataSource

                Dim ctx As New DataEntities
                RecipientsGrid.DataSource = ctx.RecipientOrganizations.ToList

                AddOrganizationButton.Visible = False
                RecipientOrganizationComboBox.Visible = False

    End Sub

 Private Sub RecipientsGrid_ItemDataBound(sender As Object, e As Telerik.Web.UI.GridItemEventArgs) Handles RecipientsGrid.ItemDataBound

        If TypeOf e.Item Is GridEditableItem AndAlso e.Item.IsInEditMode Then
            Dim editedItem As GridEditableItem = TryCast(e.Item, GridEditableItem)

            If e.Item.OwnerTableView.IsItemInserted Then

                Dim CountryCombo As RadComboBox = TryCast(editedItem.FindControl("CountryCombo"), RadComboBox)
                Dim ProvinceCombo As RadComboBox = TryCast(editedItem.FindControl("ProvinceCombo"), RadComboBox)
                Dim CityCombo As RadComboBox = TryCast(editedItem.FindControl("CityCombo"), RadComboBox)

                LoadCountries(CountryCombo)

            Else

            End If

        End If

    End Sub

    Protected Sub CountryCombo_SelectedIndexChanged(ByVal sender As Object, ByVal e As RadComboBoxSelectedIndexChangedEventArgs)

        Dim CountryCombo As RadComboBox = DirectCast(sender, RadComboBox)
        Dim editedItem As GridEditableItem = DirectCast(TryCast(sender, RadComboBox).NamingContainer, GridEditableItem)
        Dim ProvinceCombo As RadComboBox = DirectCast(editedItem.FindControl("ProvinceCombo"), RadComboBox)

        LoadProvinces(e.Value, ProvinceCombo)

    End Sub

    Protected Sub ProvinceCombo_SelectedIndexChanged(ByVal sender As Object, ByVal e As RadComboBoxSelectedIndexChangedEventArgs)

        Dim ProvinceCombo As RadComboBox = DirectCast(sender, RadComboBox)
        Dim editedItem As GridEditableItem = DirectCast(TryCast(sender, RadComboBox).NamingContainer, GridEditableItem)
        Dim CityCombo As RadComboBox = DirectCast(editedItem.FindControl("CityCombo"), RadComboBox)

        LoadCities(e.Value, CityCombo)

    End Sub

    Protected Sub LoadCountries(ByVal Control As RadComboBox)

        Using context As New DataEntities
            With Control
                .DataValueField = "CountryId"
                .DataTextField = "CountryName"
                .DataSource = context.Countries.OrderBy(Function(x) x.displayOrder).ToList
            End With
            Control.Width = Unit.Pixel(320)
            Control.DataBind()
        End Using

    End Sub

    Protected Sub LoadProvinces(ByVal countryID As Integer, ByVal Control As RadComboBox)

        Using context As New DataEntities
            With Control
                .DataValueField = "ProvinceId"
                .DataTextField = "NameEnglish"
                .DataSource = context.Provinces.Where(Function(x) x.CountryId = countryID).OrderBy(Function(x) x.NameEnglish).ToList
            End With
            Control.Width = Unit.Pixel(320)
            Control.DataBind()
        End Using

    End Sub

    Protected Sub LoadCities(ByVal ProvinceId As Integer, ByVal Control As RadComboBox)

        Using context As New DataEntities
            With Control
                .DataValueField = "CityId"
                .DataTextField = "CityName"
                .DataSource = context.Cities.Where(Function(x) x.ProvinceID = ProvinceId).OrderBy(Function(x) x.CityName).ToList
            End With
            Control.Width = Unit.Pixel(320)
            Control.DataBind()
        End Using

    End Sub
    Public Sub SetComboBoxDefault(ByVal FindItemByValue As Integer, ByVal Control As RadComboBox, ByVal DisplayText As String)

        Dim ComboBoxItem As RadComboBoxItem

        If FindItemByValue > 0 Then
            ComboBoxItem = Control.FindItemByValue(FindItemByValue)
            If ComboBoxItem IsNot Nothing Then
                ComboBoxItem.Selected = True
            Else
                Control.Items.Insert(0, New RadComboBoxItem("-- Please select a " & DisplayText & " --", String.Empty))
            End If
        Else
            Control.Items.Insert(0, New RadComboBoxItem("-- Please select a " & DisplayText & " --", String.Empty))
        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:24:31.310

在这里发布这个是因为我不相信我有足够的代表发表评论。通常当我遇到这个问题时，这是因为我在 Page_Load 中的 RadComboBox 上有某种类型的绑定事件，该事件未包含在`If Not IsPostBack`. 尝试这样的事情：

```
Sub Page_Load
    If Not IsPostBack
        RadComboBox.DataSource = foo;
        RadComboBox.DataBind();
    End If
End Sub 
```

希望这可以帮助。

# python - 有没有办法将 unix 上的 md5 与 hadoop 上的 md5 与 python 进行比较？

> ID：12922506
> 
> 赞同：0
> 
> 时间：2012-10-16T19:57:28.510
> 
> 标签：python, hadoop, md5

我需要比较 unix 服务器和 hadoop 服务器之间的 md5s。我想用python来做这个。我想使用 pythons hashlib，但我不知道我是否可以使用 hadoop 做到这一点，或者我是否必须使用某种标准输入/标准输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:04:12.983

不太清楚你所说的“hadoop”是什么意思。我相信，您可以使用 hadoop 运行特定程序。您可以使用 md5 计算例程。

```
import hashlib
hash = hashlib.md5()
hash.update( "stringformd5" )
hash.hexdigest() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T18:30:03.750

您可以将其下载到您的本地文件系统

```
hadoop fs -copyToLocal 
```

Python 示例：

```
import hashlib
import subprocess

def md5_for_file(f, block_size=2**20):
    md5 = hashlib.md5()
    while True:
        data = f.read(block_size)
        if not data:
            break
        md5.update(data)
    return md5.digest()

bashCommand = "hadoop fs -copyToLocal" + from + " " + to
hash = hashlib.md5()
process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE)
print md_for_file(to) 
```

# javascript - 使用 AngularJS 获取图像请求

> ID：12922509
> 
> 赞同：106
> 
> 时间：2012-10-16T19:57:38.333
> 
> 标签：javascript, http-status-code-404, angularjs

我将要在 AngularJS 控制器中以 HTML 形式呈现的图像的源字符串存储在 AngularJS 控制器中，但是在初始化 Angular 控制器之前它会产生 404。

这是HTML：

```
 <div ng-controller="Cont">
      <img src="{{imageSource}}">
 </div> 
```

角度控制器：

```
 var Cont = function($scope) {
      $scope.imageSource = '/tests.png';
 } 
```

我得到的错误（`%7D%7D`对应`{{`于模板中的）。

```
 GET https://localhost:9000/%7B%7BimageSource%7D%7D 404 (Not Found) 
```

我怎样才能防止这种情况发生？也就是说，只有在 Angular 控制器初始化后才加载图像？

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-10-16T20:00:09.877

尝试用 ng-src 替换您的 src 以获取更多信息，请参阅[文档](http://docs.angularjs.org/api/ng.directive:ngSrc)：

> 在 src 属性中使用像 {{hash}} 这样的 Angular 标记不能正常工作：浏览器将从带有文本 {{hash}} 的 URL 获取，直到 Angular 替换 {{hash}} 中的表达式。ngSrc 指令解决了这个问题。

```
 <div ng-controller="Cont">
      <img ng-src="{{imageSource}}">
 </div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-26T10:48:53.157

如果有人正在搜索样式背景图像的解决方案，请使用：

```
<div ng-style="{'background-image': 'url({{ image.source }})'}">...</div> 
```

# objective-c - 比较 id 对象和 NSString

> ID：12922510
> 
> 赞同：2
> 
> 时间：2012-10-16T19:57:44.280
> 
> 标签：objective-c, nsstring, compare

我无法使用字符串值从数组中保存所选项目。知道有什么问题吗？

它是我的比较代码：

```
if(self.detailItem){
    [WebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[self.detailItem description] ofType:@"html"]isDirectory:NO]]];
    NSString *value = (NSString *)self.detailItem;
    NSString *value1 = (NSString *)@"DecideVectorVPiramidi";
    value=[NSString stringWithFormat:@"%@", value];
    value1=[NSString stringWithFormat:@"%@", value1];
    if (value == value1) {
        WebView.scalesPageToFit=YES;
    } 
```

这是数组代码：

```
case 1:
            switch (self.nomberInSection) {
                case 0:
                    self.detailViewController.detailItem =[NSString stringWithFormat:@"%@", [DecideOfZakusPath objectAtIndex:indexPath.row]];
                    break;
            }
break; 
```

类型`detailItem`是`id`。

对于错误，我检查了

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T19:59:04.533

你需要使用`isEqualToString`. 操作员将`==`仅通过引用进行比较。

这意味着你必须做

```
if ( [value isEqualToString:value1] )
{
    ... 
```

您的两个字符串将是指向两个不同内存位置的指针，并且`==`将比较这两个内存位置，并因此评估为`NO`. [`isEqualToString`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)或是用于使用字符串相等规则进行字符串比较的方法（即，如果两个字符串包含相同的字符，则认为它们相等）[。`isEqual`](https://stackoverflow.com/questions/1292862/nsstring-isequal-vs-isequaltostring)

这可能有点违反直觉。在 Objective-C 中，运算符重载是不可能的。在许多其他语言中，可以重载运算符，以便可以使用相等运算符完成内置和自定义类的值比较。

# objective-c - 初始化 kAudioUnitSubType_VoiceProcessingIO 后奇怪的增益变化

> ID：12922513
> 
> 赞同：2
> 
> 时间：2012-10-16T19:57:59.330
> 
> 标签：objective-c, audio, core-audio

我正在编写使用`kAudioUnitSubType_VoiceProcessingIO`音频单元录制声音的应用程序。我试图捕捉几天的奇怪错误。创建 VPIO 单元的新实例后，整个系统的内部麦克风增益会自动更改。

初始化代码：

```
AudioComponentDescription audioComponentDescriptionWildcard =
  {
    kAudioUnitType_Output,
    kAudioUnitSubType_VoiceProcessingIO,
    kAudioUnitManufacturer_Apple
   };

AudioComponent audioComponent = 
  AudioComponentFindNext(NULL,   
  &audioComponentDescriptionWildcard);

OSStatus status = AudioComponentInstanceNew(audioComponent, &audioComponentInstance); 
```

验证问题的最简单方法是在`AudioComponentInstanceNew`通话中设置断点并启动 Skype 呼叫以进行 Skype 测试呼叫服务。在这条线执行之前，录制的声音响亮而清晰。执行此线路后，麦克风电平急剧下降。

其他单位一切正常。并且应用程序不会干扰其他录音应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:26:54.820

这是因为默认情况下启用了自动增益控制。您需要将 kAUVoiceIOProperty_VoiceProcessingEnableAGC 属性更改为 0。

[http://developer.apple.com/library/ios/#documentation/AudioUnit/Reference/AudioUnitPropertiesReference/Reference/reference.html#//apple_ref/doc/constant_group/Voice_Processing_I_O_Audio_Unit_Properties](http://developer.apple.com/library/ios/#documentation/AudioUnit/Reference/AudioUnitPropertiesReference/Reference/reference.html#//apple_ref/doc/constant_group/Voice_Processing_I_O_Audio_Unit_Properties)

# android - 如何防止多个 Toast 重叠

> ID：12922516
> 
> 赞同：30
> 
> 时间：2012-10-16T19:58:13.850
> 
> 标签：android, toast

在发布新的 toast 之前，我一直在使用一个常见的“myToast” `myToast.cancel()`。对于 Android v2.3 及更早版本，这很好用。当需要发送新的 toast 时，旧的 toast，如果仍然打开 -屏幕，被取消（并立即消失）以替换为新的吐司。如果用户多次按下需要警报（和其他条件）的键，这可以避免堆积一堆吐司。我的实际情况是出现一个吐司当按下错误键时，如果未按下清除键，则会出现另一个。

对于 Android 4.0 和 4.1，在下一个 toast 之前发出 a`myToast.cancel()`会杀死当前和下一个 toast。当前的`cancel()`API 确实表明它取消了当前和下一个 toast（这似乎很愚蠢）。为什么要取消你想举的祝酒词？

关于使取消在 Android 版本中一致工作的任何想法（以及它在 v2.3 和更早版本中的工作方式）？

我将尝试一些不优雅的双 toast 系统，并跟踪正在使用的 toast，但在 4.x 中解决这种不良行为似乎很痛苦，以便在较旧的 Android 版本中完美且合乎逻辑地工作。

* * *

好的，我解决了它，但它不像我希望的那样干净。我实现了一种双吐司方法，它在两个吐司之间交替。首先，我们在 之前为活动定义敬酒`OnCreate`：

```
Toast toast0;
Toast toast1;
private static boolean lastToast0 = true; 
```

在 OnCreate 中：

```
toast0 = new Toast(getApplicationContext());
toast0.cancel();
toast1 = new Toast(getApplicationContext());
toast1.cancel(); 
```

最后，当我需要同时显示 toast 并取消之前的 toast 时，我使用类似于：

```
if (lastToast0) {
    toast0.cancel();
    toast1.setDuration(Toast.LENGTH_LONG);
    toast1.setText("new message");
    toast1.show();
    lastToast0 = false;
} else {
    toast1.cancel();
    toast0.setDuration(Toast.LENGTH_LONG);
    toast0.setText("new message");
    toast0.show();
    lastToast0 = true;
} 
```

如果您只需要取消现有的 toast（在超时之前），请使用：

```
toast0.cancel();
toast1.cancel(); 
```

在 Nexus 7 (4.1)、Emulator 4.0 和多款搭载 Android 2.2、2.3 的设备上进行了测试。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-16T20:28:25.420

而不是调用`cancel()`. 尝试重置文本并调用`show()`. 这应该自行取消最后一个吐司

```
myToast.setText("wrong key")
myToast.show(); 
```

如果您继续使用相同的`myToast`而不是每次都创建一个，我猜它们不会堆积起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T08:04:11.557

这是我从另一个类似问题中复制的答案：

*   [Android 在退出应用程序和显示 Toast 时取消 Toast](https://stackoverflow.com/a/16099959/383414)

该`Boast`课程完全满足您的需求。

* * *

诀窍是跟踪显示的最后一个`Toast`，并取消那个。

我所做的是创建一个`Toast`包装器，其中包含对显示的最后一个 Toast 的静态引用。

当我需要显示一个新的时，我首先取消静态引用，然后再显示新的（并将其保存在静态中）。

这是我制作的包装器的完整代码`Boast`——它模仿了足够多的 Toast 方法供我使用。默认情况下，`Boast`将取消前一个，因此您不会建立等待显示的 Toast 队列。

如果您只想知道如何在退出应用程序时取消通知，您会在其中找到很多帮助。

* * *

```
package mobi.glowworm.lib.ui.widget;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.res.Resources;
import android.support.annotation.Nullable;
import android.widget.Toast;

import java.lang.ref.WeakReference;

/**
 * {@link Toast} decorator allowing for easy cancellation of notifications. Use this class if you
 * want subsequent Toast notifications to overwrite current ones. </p>
 * <p/>
 * By default, a current {@link Boast} notification will be cancelled by a subsequent notification.
 * This default behaviour can be changed by calling certain methods like {@link #show(boolean)}.
 */
public class Boast {
    /**
     * Keeps track of certain Boast notifications that may need to be cancelled. This functionality
     * is only offered by some of the methods in this class.
     * <p>
     * Uses a {@link WeakReference} to avoid leaking the activity context used to show the original {@link Toast}.
     */
    @Nullable
    private volatile static WeakReference<Boast> weakBoast = null;

    @Nullable
    private static Boast getGlobalBoast() {
        if (weakBoast == null) {
            return null;
        }

        return weakBoast.get();
    }

    private static void setGlobalBoast(@Nullable Boast globalBoast) {
        Boast.weakBoast = new WeakReference<>(globalBoast);
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Internal reference to the {@link Toast} object that will be displayed.
     */
    private Toast internalToast;

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Private constructor creates a new {@link Boast} from a given {@link Toast}.
     *
     * @throws NullPointerException if the parameter is <code>null</code>.
     */
    private Boast(Toast toast) {
        // null check
        if (toast == null) {
            throw new NullPointerException("Boast.Boast(Toast) requires a non-null parameter.");
        }

        internalToast = toast;
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Make a standard {@link Boast} that just contains a text view.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param text     The text to show. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, CharSequence text, int duration) {
        return new Boast(Toast.makeText(context, text, duration));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view with the text from a resource.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param resId    The resource id of the string resource to use. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, int resId, int duration)
            throws Resources.NotFoundException {
        return new Boast(Toast.makeText(context, resId, duration));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view. Duration defaults to
     * {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param text    The text to show. Can be formatted text.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, CharSequence text) {
        return new Boast(Toast.makeText(context, text, Toast.LENGTH_SHORT));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view with the text from a resource.
     * Duration defaults to {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param resId   The resource id of the string resource to use. Can be formatted text.
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, int resId) throws Resources.NotFoundException {
        return new Boast(Toast.makeText(context, resId, Toast.LENGTH_SHORT));
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Show a standard {@link Boast} that just contains a text view.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param text     The text to show. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     */
    public static void showText(Context context, CharSequence text, int duration) {
        Boast.makeText(context, text, duration).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view with the text from a resource.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param resId    The resource id of the string resource to use. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    public static void showText(Context context, int resId, int duration)
            throws Resources.NotFoundException {
        Boast.makeText(context, resId, duration).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view. Duration defaults to
     * {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param text    The text to show. Can be formatted text.
     */
    public static void showText(Context context, CharSequence text) {
        Boast.makeText(context, text, Toast.LENGTH_SHORT).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view with the text from a resource.
     * Duration defaults to {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param resId   The resource id of the string resource to use. Can be formatted text.
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    public static void showText(Context context, int resId) throws Resources.NotFoundException {
        Boast.makeText(context, resId, Toast.LENGTH_SHORT).show();
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Close the view if it's showing, or don't show it if it isn't showing yet. You do not normally
     * have to call this. Normally view will disappear on its own after the appropriate duration.
     */
    public void cancel() {
        internalToast.cancel();
    }

    /**
     * Show the view for the specified duration. By default, this method cancels any current
     * notification to immediately display the new one. For conventional {@link Toast#show()}
     * queueing behaviour, use method {@link #show(boolean)}.
     *
     * @see #show(boolean)
     */
    public void show() {
        show(true);
    }

    /**
     * Show the view for the specified duration. This method can be used to cancel the current
     * notification, or to queue up notifications.
     *
     * @param cancelCurrent <code>true</code> to cancel any current notification and replace it with this new
     *                      one
     * @see #show()
     */
    public void show(boolean cancelCurrent) {
        // cancel current
        if (cancelCurrent) {
            final Boast cachedGlobalBoast = getGlobalBoast();
            if ((cachedGlobalBoast != null)) {
                cachedGlobalBoast.cancel();
            }
        }

        // save an instance of this current notification
        setGlobalBoast(this);

        internalToast.show();
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T22:33:26.130

nandeesh 的解决方案对您不起作用吗？他的解决方案比使用两种不同的吐司更清洁。

例如，（扩展他/她的答案）在 onCreate 之前，我们将声明 toast：

```
private Toast myToast; 
```

在 onCreate 中，我们必须使用 makeToast 来初始化它（否则我们会得到一个错误）：

```
myToast = Toast.makeText(getApplicationContext(), null, Toast.LENGTH_SHORT); 
```

每当我们想要显示祝酒词时，我们只需调用：

```
myToast.setText("some text");
myToast.show(); 
```

这将正确替换以前的吐司。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T20:30:51.793

`cancel()`我害怕什么都没做。

我建议使用 Crouton [https://github.com/keyboardsurfer/Crouton](https://github.com/keyboardsurfer/Crouton)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-19T01:34:07.977

制作一个 java 类作为***ShowToast.java***如下所示

```
 public class ShowToast {

        private static Toast toast;

        public static void show(Context mcontext, String text) {
            if (toast != null) 
               toast.cancel();
            toast = Toast.makeText(mcontext, text, Toast.LENGTH_SHORT);
            toast.show();
        }
    } 
```

然后将其称为

```
 ShowToast.show(getApplicationContext(),"YOUR_TOAST_TEXT"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-17T11:18:10.623

我的解决方案适用于 4.* 和 2.3 Android 版本

```
static Toast toast;
.....

if (toast != null)
    toast.cancel();

boolean condition = Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB;
if ((toast == null && condition) || !condition)
    toast = Toast.makeText(context, text, Toast.LENGTH_LONG);
if ((toast != null && condition))
    toast.setText(text);
toast.show(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-16T06:06:54.513

创建一个 Toast 对象：

```
Toast toastobject=null; 
```

现在使用下面的代码来显示吐司。这对我有用

```
 int index = clickCounter-1;

    if(toastobject!= null)
            {
                toastobject.cancel();
            }
            toastobject = Toast.makeText(this,"Toast Text" , Toast.LENGTH_SHORT);
            listItems.remove(index);
            toastobject.show(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-17T13:14:26.893

创建新函数并调用它。

```
ImageButton ABtn = (ImageButton) findViewById(R.id.Btn);
ABtn.setOnClickListener(new View.OnClickListener() {
public void onClick(View v)
{       
SETToast("mytext");
}
});

    private Toast toast = null;

public void SETToast( String text)
{
  if(toast==null)
  {
     toast = Toast.makeText(getApplicationContext(), text, Toast.LENGTH_SHORT); 
     toast.show();
     final Handler handler = new Handler(); 
     handler.postDelayed(new Runnable() {
        @Override
        public void run() {
            toast=null;
        }
     }, 2000);
  }
  else
  {
      toast.setText(text);
  }   
} 
```

# java - 使用 ArrayList 对象中另一个类的方法

> ID：12922518
> 
> 赞同：0
> 
> 时间：2012-10-16T19:58:24.273
> 
> 标签：java

```
 ListIterator litr = PuntenLijst.listIterator();

    while(litr.hasNext()){
       Object Punt = litr.next();
       Punt.print();
    } 
```

PuntenLijst 是一个 ArrayList，其中包含来自另一个类的对象实例。

现在我创建了一个 print() 方法，它从该对象（另一个类的）中打印出一些东西。

通过这个循环，我尝试遍历 ArrayList，然后使用另一个类的 print() 方法，但它似乎不起作用。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:00:23.657

```
 Object Punt = litr.next();
   Punt.print(); 
```

您需要将您`Punt`的类转换为适当的类，其中有 ArrayList。

当然`print()`不是`Object`类的方法

**假设你有这样的 ArrayList： -**

```
ArrayList<YourClass> PuntenLijst 
```

将您的调用更改为： -

```
Object Punt = litr.next();
((YourClass)Punt).print(); 
```

或者： -

```
 YourClass Punt = litr.next();
   Punt.print(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:00:47.990

将您作为响应的对象`litr.next()`转换为相应类型并调用该类型的方法。

例子：

```
 Punt puntObj =(Punt) litr.next();
       puntObj.print(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T20:01:40.460

强制`Punt`转换为包含该`Print()`方法的类型。

```
while(litr.hasNext()){
       TYPE_THAT_HAS_PRINT Punt = (TYPE_THAT_HAS_PRINT) litr.next();
       Punt.print();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T20:01:43.763

为什么不只使用 for:each 循环？如果您使用正确的类型定义了 PuntenLijst，则该转换由 JVM 负责。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T20:03:01.653

您需要将`Object`type 转换为您的实际对象的类型。

# c# - 实体框架和泛型

> ID：12922519
> 
> 赞同：9
> 
> 时间：2012-10-16T19:58:40.710
> 
> 标签：c#, generics, entity-framework-5, fluent-interface

我有几个独立的对象，每个对象都有一个公共对象列表。例如，

```
public class Project 
{ 
   public IEnumerable<CommentEntry<Project>> Comments{get;set;}
}
public class Sample
{ 
   public IEnumerable<CommentEntry<Sample>> Comments{get;set;}
}
public class CommentEntry<T> where T: class
{ 
   public int TId {get;set;}
   public int CommentEntryId{get;set;}
   public DateTime TimeStamp{get;set;}
   public string Comment{get;set;}
} 
```

使用 Entity Framework 5 的 fluent api，我想要一个用于项目和请求的 CommentEntry 表。所以，这是我的映射代码：

```
modelBuilder.Entity<CommentEntry<Project>>()
            .Map(m =>
                {
                    m.ToTable("EngineeringProjectComments");
                });
        modelBuilder.Entity<CommentEntry<Request>>()
            .Map(m =>
            {
                m.ToTable("SampleRequestComments");
            }); 
```

当我尝试迁移时，我遇到以下消息：

类型 CommentEntry`1[Project]' 未映射。使用 Ignore 方法或 NotMappedAttribute 数据注释检查该类型是否被显式排除。验证该类型是否被定义为一个类，不是原始的、嵌套的或泛型的，并且不是从 EntityObject 继承的。

我可以看到我尝试在这种情况下使用泛型的明显缺陷。但是，任何人都可以建议我的数据库表结构、类代码或映射代码的替代方案，以允许我在许多类之间共享单一的通用类型并拥有独立的表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:30:52.353

只需使用正常的继承结构。并且，不要使用特定的 ID 名称，如 EngineeringProjectId，只需使用 Id。

```
public class Project 
{ 
   public ICollection<ProjectCommentEntry> Comments{get;set;}
}
public class Sample
{ 
   public ICollection<SampleCommentEntry> Comments{get;set;}
}
public class ProjectCommentEntry : CommentEntry {}
public class SampleCommentEntry : CommentEntry {}
public class CommentEntry
{ 
   public int Id {get;set;}
   public int CommentEntryId{get;set;}
   public DateTime TimeStamp{get;set;}
   public string Comment{get;set;}
} 
```

顺便说一句，您不能将 IEnumerable 用于 EF 中的导航属性，您需要一个完整的集合，这就是您应该使用 ICollection 的原因。

# emacs - Emacs 标签：etags、ebrowse、cscope、GNU Global 和 exuberant ctags 之间的关系

> ID：12922526
> 
> 赞同：111
> 
> 时间：2012-10-16T19:59:19.377
> 
> 标签：emacs, cscope, cedet, gnu-global

我从事 C++ 项目，我浏览了 Alex Ott 的[CEDET 指南](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)和关于 StackOverflow 中标签的其他线程，但我仍然对 Emacs 如何与这些不同的标签系统接口以促进自动完成、查找定义、导航源感到困惑代码库或文档字符串的预览。

1.  `etags`、`ebrowse`、[`exuberant ctags`](http://ctags.sourceforge.net/)、[`cscope`](http://cscope.sourceforge.net/)和[`GNU Global`](http://www.gnu.org/software/global/)之间有什么区别（例如在特征方面） [`GTags`](http://code.google.com/p/google-gtags/wiki/GTagsEmacsClient)？我需要做什么才能在**Emacs**中使用它们？

2.  如果我想使用标签来导航/自动完成符号，我是否需要语义/参议员 (CEDET)？

3.  在这些不同的标签实用程序之上，语义带来了什么？它如何与这些工具交互？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-16T21:50:46.823

这是我最近在这里读到的一个好问题，所以我将尝试更详细地解释差异：

**第 1 点：**

`etags`并且`ctags`两者都生成在源文件中找到的语言对象的索引（又名标签/标签）文件，允许文本编辑器或其他实用程序快速轻松地找到这些项目。标记表示可以使用索引条目的语言对象（或者，为该对象创建的索引条目）。ctags 生成的标签在元数据方面更丰富，但 Emacs 无论如何都无法解释额外的数据，因此您应该认为它们或多或少相同（主要优点`ctags`是它支持更多语言）。标签文件的主要用途是查找类/方法/函数/常量/等声明/定义。

`cscope`是更强大的野兽（至少就 C/C++ 和 Java 而言）。虽然它的工作原理或多或少相同（生成有用的元数据文件），但它允许您做一些更奇特的事情，例如查找对符号的所有引用，查看调用函数的位置等（您也可以找到定义） .

把它们加起来：

`ctags`一个允许您导航到符号声明/定义（有些人称之为*单向查找*）。`ctags`是适用于多种语言的通用工具。

另一方面（如项目页面所述）`cscope`允许您：

*   转到符号的声明
*   显示对符号的所有引用的可选列表
*   搜索任何全局定义
*   函数调用的函数
*   函数调用函数
*   搜索文本字符串
*   搜索正则表达式模式
*   查找文件
*   查找包括文件在内的所有文件

在这一点上，任何人都不会感到惊讶，当我处理 C/C++ 项目时，我大量使用`cscope`并且很少关心`ctags`. 在处理其他语言时，情况显然会相反。

**第 2 点。**

要实现智能自动完成，您需要一个真正的[源代码解析器](http://en.wikipedia.org/wiki/Parsing)（如语义），否则您将不知道应用程序中对象（例如）的类型以及可以在它们上调用的方法。您可以根据许多不同的来源进行自动补全，但要获得最佳结果，您最终需要一个解析器。语法高亮也是如此——目前 Emacs 主要模式中的语法高亮仅基于正则表达式，这非常脆弱且容易出错。希望通过在 Emacs 23.2 中包含语义（在此之前它曾经是一个外部包），我们将开始看到它的更多用途（比如使用它来分析缓冲区源代码以正确突出显示它）

由于 Emacs 24.1 语义可以从 Emacs 完成框架中使用。测试它的最简单方法是打开一个 C 源代码文件并键入`M-TAB`or`C-M-i`并观察语义自动为您完成。对于默认情况下未启用语义的语言，您可以将以下行添加到您选择的主要模式挂钩中：

```
(add-to-list 'completion-at-point-functions 'semantic-completion-at-point-function) 
```

**第 3 点。**

语义带来了真正的代码意识（对于它目前支持的少数语言）并缩小了 IDE 和 Emacs 之间的差距。它并没有真正与 和 之类的工具交互`etags`，`cscope`但这并不意味着您不能将它们一起使用。

希望我的解释有意义，对你有用。

PS 我对 and 不太熟悉`global`，`ebrowse`但如果没记错的话，他们使用了 etags。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-02T01:18:17.063

我将尝试在 1 中添加一些解释。

**它是什么？**

*   Etags 是一个生成“TAGS”文件的命令，该文件是 Emacs 的标记文件。您可以将该文件与 etags.el 一起使用，它是 emacs 包的一部分。
*   Ctags 是一个生成“标签”文件的命令，它是 vi 的标签文件。Universal Ctags，Exuberant Ctags的继承者，可以通过-e选项生成'TAGS'文件，支持超过41种编程语言。
*   Cscope 是一个用于 C 语言的一体化源代码浏览工具。它拥有自己的精美 CUI（字符用户界面）和标签数据库（cscope.in.out、cscope.out、cscope.po.out）。您可以使用 Emacs 中的 cscope 使用 xcscope.el，它是 cscope 包的一部分。
*   GNU GLOBAL 是一个源代码标记系统。虽然它与上述工具相似，但它与它们的不同之处在于它依赖于任何编辑器，并且它除了命令行之外没有用户界面。Gtags 是为 GLOBAL（GTAGS、GRTAGS、GPATH）生成标签文件的命令。您可以使用 gtags.el 从 emacs 使用 GLOBAL，它是 GLOBAL 包的一部分。除此之外，还有许多 elisp 库（xgtags.el、ggtags.el、anything-gtags.el、helm-gtags.el 等）。

**比较**

*   Ctags 和 etags 只处理定义。Cscope 和 GNU GLOBAL 不仅处理定义，还处理引用。
*   Ctags 和 etags 使用纯文本标记文件。Cscope 和 GNU GLOBAL 使用键值标签数据库。
*   Cscope 和 GNU GLOBAL 具有类似 grep 的搜索引擎和标记文件的增量更新工具。

**组合**

通过将 ctags 用作 GLOBAL 的插件解析器，您可以将 Universal Ctags 的丰富语言支持和 GNU GLOBAL 的数据库工具结合起来。

尝试以下操作：（分别需要 GLOBAL-6.5.3+ 和 Universal Ctags）

构建 GNU GLOBAL：

```
$ ./configure --with-universal-ctags=/usr/local/bin/ctags
$ sudo make install 
```

用法：

```
$ export GTAGSCONF=/usr/local/share/gtags/gtags.conf
$ export GTAGSLABEL=new-ctags
$ gtags                     # invokes Universal Ctags internally
$ emacs -f gtags-mode       # load gtags.el 
```

（但是，您不能通过此方法处理引用，因为 ctags 不处理引用。）

您还可以将 cscope 用作 GNU GLOBAL 的客户端。GLOBAL 包包含一个名为“gtags-cscope”的命令，它是 cscope 的一个端口，也就是说，它是 cscope 本身，只是它使用 GLOBAL 作为搜索引擎而不是 cscope 的搜索引擎。

```
$ gtags-cscope          # this is GLOBAL version of cscope 
```

通过这些组合，您可以将 cscope 用于 41 种语言。

祝你好运！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-05T14:36:25.833

## TAGS 文件包含定义

文件`TAGS`包含定义函数和类的列表。它通常放在项目的根目录中，如下所示：

```
^L
configure,3945
as_fn_success () { as_fn_return 0; }^?as_fn_success^A180,5465
as_fn_failure () { as_fn_return 1; }^?as_fn_failure^A181,5502
as_fn_ret_success () { return 0; }^?as_fn_ret_success^A182,5539
as_fn_ret_failure () { return 1; }^?as_fn_ret_failure^A183,5574 
```

这使 Emacs 能够找到定义。基本导航是内置的`find-tag`，但[`etags-select`](http://melpa.org/#/etags-select)在有多个匹配项时提供更好的 UI。

您还可以使用 TAGS 文件来完成代码。例如，[公司的 etags 后端使用 TAGS 文件](https://github.com/company-mode/company-mode/blob/master/company-etags.el)。

## TAGS文件可以通过不同的工具构建

[`ctags`](https://ctags.io/)（以前称为 'universal ctags' 或 'exuberant ctags'）可以生成 TAGS 文件并支持最广泛的语言。它在 github 上积极维护。

Emacs 附带了两个生成 TAGS 文件的程序，分别称为`etags`和`ctags`. Emacs`ctags`与`etags`通用 ctags 具有相同的 CLI 界面。为避免混淆，许多发行版重命名这些程序（例如`ctags.emacs24`在 Debian 上）。

还有用于生成 TAGS 文件的特定语言工具，例如[`jsctags`](https://github.com/ramitos/jsctags)和[`hasktags`](https://hackage.haskell.org/package/hasktags).

## 其他文件格式

`ebrowse`是 Emacs 附带的 C 程序。它索引 C/C++ 代码并生成`BROWSE`文件。ebrowse.el 提供通常的查找定义和补全。您也可以`BROWSE`直接在 Emacs 中打开该文件，以获取定义代码库的类/函数的概览。

[GNU Global](http://www.gnu.org/software/global/)有自己的数据库格式，由`GTAGS`,`GRTAGS`和`GPATH`文件组成。`gtags`您可以使用解析 C/C++ 代码的命令生成这些文件。对于其他语言，GNU Global 可以读取由通用 ctags 生成的文件。

GNU Global 还提供了一个 CLI 界面来询问更复杂的问题，例如“这个符号在哪里提到？”。它附带一个 Emacs 包 gtags.el，但[ggtags.el](https://github.com/leoliu/ggtags)也很流行用于访问 GNU 全球数据库。

[Cscope](http://cscope.sourceforge.net/)在精神上类似于 GNU Global：它将 C/C++ 解析为自己的数据库格式。它还可以回答诸如“查找此功能的所有调用者/被调用者”之类的问题。

另请参阅[比较 global 和 cscope 的此 HN 讨论](https://news.ycombinator.com/item?id=8617027)。

## 客户端/服务器项目

[rtags](https://github.com/Andersbakken/rtags)使用持久服务器解析和索引 C/C++。它使用 clang 解析器，因此它可以很好地处理 C++。它附带一个 Emacs 包来查询服务器。

[google-gtags](https://code.google.com/archive/p/google-gtags/)是一个将大型 TAGS 文件存储在服务器上的项目。当您查询服务器时，它会提供与您的搜索相关的 TAGS 文件子集。

## 语义（CEDET）

Semantic 是一个内置的 Emacs 包，其中包含 C/C++ 解析器，因此它也可以找到定义。它还可以从 TAGS 文件、csope 数据库和其他来源导入数据。CEDET 还包括使用此数据的 IDE 样式功能，例如生成类层次结构的 UML 图。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-06T21:35:04.010

*[答案从[shigio](https://stackoverflow.com/a/15169556/915044)更新]*

我将尝试为问题的第 1 部分添加一些解释。

**它是什么？**

1.  [Etags](https://www.gnu.org/software/emacs/manual/html_node/emacs/Create-Tags-Table.html#Create-Tags-Table)生成一个`TAGS`文件，该[文件是 Emacs 的标记文件格式](https://www.emacswiki.org/emacs/EmacsTags)。您可以使用作为`etags.el`Emacs 一部分的 Etags 文件。
2.  `Ctags`是可以生成`tags`文件的任何东西的通用术语，它是 Vi 的原生标记文件格式。[Universal Ctags](https://ctags.io/)（又名`UCtags`，以前的 Exuberant Ctags）也可以使用该`-e`选项生成 Etags。
3.  [Cscope](https://en.wikipedia.org/wiki/Cscope)是一个多合一的 C 源代码浏览工具（对 C++ 和 Java 的支持较少），具有自己的标记数据库 ( `cscope.in.out`, `cscope.out`, `cscope.po.out`) 和[TUI](https://en.wikipedia.org/wiki/Text-based_user_interface)。Vim 内置了 Cscope 支持；您可以使用[xcscope.el 包](https://github.com/dkogan/xcscope.el)从 Emacs 中使用 Cscope 。还有[基于 Cscope 的 GUI](https://en.wikipedia.org/wiki/Cscope#GUI_frontends)。
4.  [GNU GLOBAL](https://www.gnu.org/software/global/)（又名`Gtags`）是另一个源代码标记系统（有很大的不同——见下一节），因为它也生成标记文件。

**比较**

*   Ctags 和Etags 只处理定义（例如，变量和函数）。Cscope 和 Gtags 也处理引用。
*   Ctags 和 Etags 标记文件是[平面](https://en.wikipedia.org/wiki/Flat_file_database)的。Cscope 和 Gtags 标记文件是更强大[的键值数据库](https://en.wikipedia.org/wiki/Key-value_database)，它允许（例如）增量更新。
*   Cscope 和 Gtags 有一个类似`grep`的搜索引擎。
*   Ctags 内置了对更多语言和数据格式的支持：请参阅[通用 Ctags 解析器的当前存储库列表](https://github.com/universal-ctags/ctags/tree/master/parsers)。UCtags 还[记录了如何开发自己的解析器](http://docs.ctags.io/en/latest/optlib.html#submitting-an-optlib-to-universal-ctags-project)。
*   Cscope 和 Gtags 是独立于编辑器的。
*   Gtags 不提供自己的用户界面，但目前（2016 年 10 月）可以从命令行 (CLI)、Emacs 和亲属、Vi 和亲属、`less`(pager)、[Doxygen](https://en.wikipedia.org/wiki/Doxygen)和任何 Web 浏览器使用。
*   Gtags`gtags.el`通过 GLOBAL 包提供，但也有许多其他的 elisp 扩展，包括 xgtags.el、ggtags.el、anything-gtags.el、helm-gtags.el。

**组合**

通过将 Ctags 用作[GLOBAL 插件解析器，](https://www.gnu.org/software/global/manual/global.html#Plug_002din)您可以将 Universal Ctags 的丰富语言支持与 Gtags 的数据库工具和众多扩展相结合：

```
# build GNU GLOBAL
./configure --with-exuberant-ctags=/usr/local/bin/ctags
sudo make install

# use it
export GTAGSCONF=/usr/local/share/gtags/gtags.conf
export GTAGSLABEL=ctags
gtags                     # invokes Universal Ctags internally
emacs -f gtags-mode       # load gtags.el 
```

再次注意，如果您使用 Ctags 作为 Gtags 的解析器，您将失去处理 Gtags 否则会提供的引用（例如，变量使用、函数调用）的能力。从本质上讲，您用 Gtags 的参考跟踪来换取 Ctags 更强大的内置语言支持。

您还可以将 Cscope 用作 Gtags 的客户端：[`gtags-cscope`](https://www.gnu.org/software/global/manual/global.html#Gtags_002dcscope).

祝你好运！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-24T20:42:36.027

我实际上没有检查过，但根据 CEDET 手册（[http://www.randomsample.de/cedetdocs/common/cedet/CScope.html](http://www.randomsample.de/cedetdocs/common/cedet/CScope.html)）：

语义可以使用 CScope 作为数据库搜索的后端。要启用它，请使用：

```
 (semanticdb-enable-cscope-databases) 
```

这将使 cscope 能够用于所有 C 和 C++ 缓冲区。

当预先存在的语义数据库搜索可能无法解析您的所有文件时，CScope 将作为备份用于项目范围的搜索。

# iphone - 如何更改 UITableView 边框的颜色？

> ID：12922527
> 
> 赞同：1
> 
> 时间：2012-10-16T19:59:18.770
> 
> 标签：iphone, ios, ipad

我在 UISplitViewController 中有一个 UITableView，并且在该表视图的顶部有一个自定义标题单元格。自定义标题视图中设置了深灰色背景图像，但问题是标题单元格的左侧显示了浅灰色边框（在下图中以红色圈出）...

![在此处输入图像描述](../Images/226ec4e89b7992e8767bb417e48f4ee2.png)

如何更改该颜色或摆脱该边框？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:12:09.227

Import`#import "QuartzCore/QuartzCore.h"` 在 ViewDidLoad 中使用，

```
tableView.layer.borderWidth = 3.0;
tableView.layer.borderColor = [UIColor redColor].CGColor; 
```

也检查[一下](https://stackoverflow.com/questions/4283041/creating-border-for-uitableview)。

# assembly - PIC18 的 .asm 中左移位

> ID：12922531
> 
> 赞同：1
> 
> 时间：2012-10-16T19:59:28.997
> 
> 标签：assembly, shift, bits, pic18

我试图通过旋转`.asm`通过*rlcf*向左移动位，然后清除进位。这行得通吗？如果没有，我能得到一些帮助吗？由于某种原因，它无法编译，它让我发疯，这是一个如此简单的程序，但我无法得到它。非常感谢所有帮助。

```
count equ 0x20
byte equ 0x21

;shift right

movlw b'11111110'
movwf byte
bcf STATUS,C
rlcf Byte ;for left shift
bcf STATUS,C
loop
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:29:16.433

请注意，将 X 左移 1 正好是 X + X - 使用 add ( `addwf`) 指令。

# backbone.js - 将 HTML 分解为 AngularJS 的管理模板

> ID：12922532
> 
> 赞同：1
> 
> 时间：2012-10-16T19:59:34.117
> 
> 标签：backbone.js, angularjs

所以我正在尝试评估 AngularJS，因为我认为它很有趣，但是它与我一直使用的 BackboneJS 完全不同。作为这次评估的一部分，我想从我现有的 Backbone 应用程序中提取几页，并尝试将它们移植到 AngularJS。所以我有以下html布局：

```
<html>
    <head>
    </head>
    <body>
        <div class="page-wrapper">
            <div class="header-wrap">
                <ul>
                    <li><a href="#">Ryan Zec</a></li>
                    <li><a href="#">Admin</a></li>
                    <li><a href="#">Logout</a></li>
                </ul>
            </div>
            <div class="content-wrap">
                <form>
                    <input type="text" name="username" value="" />
                    <input type="password" name="password" value="" />
                    <input type="button" value="Login" />
                </form>
            </div>
            <div class="footer-wrap">
                <span>Copyright &copy; 2012 - Ryan Zec
            </div>
        </div>
    </body>
</html> 
```

现在在主干中，我会让带有 -wrap 类的 div 为空，并且每个部分的内容都将放在单独的模板中（并且每个部分可能有多个可能显示在其中的模板）。然后将有一个与每个模板关联的视图，以附加到正确的元素并在其中显示模板的内容。

现在使用 AngularJS，不鼓励在除指令之外的任何地方直接进行 DOM 操作。所以我想知道在 AngularJS 中进行与 BackboneJS 相同的设置的最佳方法是什么，记住这些部分的内容需要根据他们正在查看的页面/url 切换为不同的内容？（我知道我可以将 ng-directive-name 添加到 div 以便在初始加载时正确加载，但是如何在单页应用程序中切换页面时让它重新加载到不同的数据）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:57:12.193

答案是指令:)

你可以使用这个-> [http://jsfiddle.net/thaqL/](http://jsfiddle.net/thaqL/)

或者只是下载 chrome -> 转到[http://angularjs.org](http://angularjs.org) -> 按 F12 -> 查看他们是如何做到的

希望能帮助到你。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:35:11.277

我认为目前最好的答案是 ngInclude。我认为 AngularJS 团队希望在未来使路由更强大（基于我记得读过的东西）（比如每个路由的多个视图，每个视图应该有一个标题控制器，一个页脚控制器和一个控制器主要内容），但在那之前 ngInclude 应该可以帮助我。

# asp.net - 将新的 .NET SDK 添加到 Visual Studio

> ID：12922533
> 
> 赞同：1
> 
> 时间：2012-10-16T19:59:47.733
> 
> 标签：asp.net, vb.net, amazon-web-services

我对 Visual Studio 和 .NET 和 VB.NET 比较陌生。我最近安装了 Amazon Web Services .NET SDK，并试图弄清楚如何让事情运行起来，特别是我需要做任何事情来将 SDK 包含在现有项目中吗？我知道有一些示例代码，但它在 C# 中，并且项目已经设置，所以我觉得它不是很有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:04:25.603

我不是 VB 专家，但您应该能够将 AWS dll 包含到您现有的项目中。这样您就可以使用 AWS API 函数。您可以使用示例项目找到 dll。（我记得 dll 的名称是 AWS2SDK.dll 或类似的东西..）

# jsf-2 - 如何在 primefaces 中为 MenuItem 调用 ActionListener

> ID：12922535
> 
> 赞同：2
> 
> 时间：2012-10-16T19:59:56.677
> 
> 标签：jsf-2, primefaces

我需要实现一个动态菜单模型。在 actionlistener 中，我需要调用一个支持 bean 方法。当我将 actionListener 添加到 menuItem 时，我得到一个 java.lang.InstantiationException。

```
@ManagedBean(name = "sampleBean")  
@ViewScoped  
public class Sample1 implements Serializable {

private MenuModel model;

public Sample1() {
    model = new DefaultMenuModel();

    for(int i = 0; i < 3; i++){
        MenuItem item1 = new MenuItem();
        item1.setValue("test1" + i);
        item1.setAjax(false);
        item1.setId("item1" + i);
        item1.addActionListener(this.new MenuActionListener());
        model.addMenuItem(item1);
    }
}

// inner class action listener
class MenuActionListener implements ActionListener{
    @Override
    public void processAction(ActionEvent arg0) throws AbortProcessingException {
     System.out.println("test... " + arg0.getComponent().getClientId());
     test(arg0.getComponent().getClientId());   
    }
}

public void test(String test){
    System.out.println("tested..." + test); 
} 
```

我也尝试过使用 MethodExpressionActionListener。在这种情况下，传递的参数“item1”为空。请让我知道如何在 methodExpression 中传递参数。

```
for(int i = 0; i < 3; i++){
        MenuItem item1 = new MenuItem();
        item1.setValue("test1" + i);
        item1.setAjax(false);
        item1.setId("item1" + i);
        //item1.addActionListener(new MenuActionListener());
        ExpressionFactory factory = FacesContext.getCurrentInstance().getApplication().getExpressionFactory();
        ELContext elContext = FacesContext.getCurrentInstance().getELContext();
        MethodExpression expression = factory.createMethodExpression(elContext, "#{beanName.method(" + item1 + ")}", null, new Class[] {MenuItem.class});
        item1.addActionListener(new MethodExpressionActionListener(expression));
        model.addMenuItem(item1);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:07:27.623

尝试使 MenuActionListener 成为*普通*类而不是内部类

还可以看看这个[事件驱动编程与 JSF](http://www.javabeat.net/2007/11/event-driven-programming-with-jsf/)

# php - 从 EntityManager 检索实体命名空间

> ID：12922536
> 
> 赞同：0
> 
> 时间：2012-10-16T20:00:00.797
> 
> 标签：php, doctrine-orm

我正在尝试`Doctrine`从`EntityManager`.

我可以按如下方式设置命名空间：

```
$em = EntityManager::create($connectionOptions, $config);
$sm = $em->getConnection()->getSchemaManager();
$driver = new \Doctrine\ORM\Mapping\Driver\DatabaseDriver($sm);
$driver->setNamespace('My\Entities');
$em->getConfiguration()->setMetadataDriverImpl($driver); 
```

但是我无法检索它：

```
$em->getConfiguration()->getMetadataDriverImpl()->getNamespace(); 
```

> PHP 致命错误：调用未定义的方法 Doctrine\ORM\Mapping\Driver\DatabaseDriver::getNamespace()

如果我搜索`Doctrine/ORM/Mapping/Driver/DatabaseDriver.php`我可以看到`setNamespace()`但看不到`getNamespace()`，并且该`namespace`属性是私有的:(

**如何从 EntityManager 的实例中检索我的 Doctrine 实体的命名空间？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:28:01.027

```
$em->getConfiguration()->getEntityNamespaces(); 
```

# c - 带有任务的 OpenMP 代码的特殊性能：1 个线程的性能优于多个线程

> ID：12922539
> 
> 赞同：1
> 
> 时间：2012-10-16T20:00:11.443
> 
> 标签：c, parallel-processing, task, openmp

我有以下代码，我已经为其实现了明确的任务版本：

```
int waves = N_a + N_b +1;  /*considering N_a == N_b */
#pragma omp parallel firstprivate(a, gap, waves) private(temp, wave, ii, i) shared(np, mp, elements)
    {
#pragma omp master
        {
            for(wave = 0; wave < waves; ++wave) {
                // 0 <= wave < n-1
                if(wave < N_a-1) {
                    elements = wave+1;
                    np = wave+1;
                    mp = 0+1;
                }
                // n-1 <= wave < m
                else if(wave < N_b) {
                    elements = N_a;
                    np = N_a-1+1;
                    mp = wave-(N_a-1)+1;
                }
                // m <= wave < m+n-1
                else {
                    elements = N_a-1-(wave-N_b);
                    np = N_a-1+1;
                    mp = wave-(N_a-1)+1;
                }

                for(ii = 0; ii < elements; ii+=chunk) {
                    min = MIN(elements,ii + chunk);
#pragma omp task firstprivate(ii, np, mp, chunk, elements)
                    {
                        for (i = ii; i < min; i++)
                        {

                        temp[0] = H[(np-i)-1][(mp+i)-1] + similarity(seq_a[a][(np-i)-1],seq_b[a][(mp+i)-1]);
                        temp[1] = H[(np-i)-1][(mp+i)]-gap;
                        temp[2] = H[(np-i)][(mp+i)-1]-gap;
                        temp[3] = 0;
                        H[(np-i)][(mp+i)] = find_array_max(temp,4);
                        }
                    } // task
                } //for loop
 #pragma omp taskwait
            }
        }

    } 
```

奇怪的是，在执行代码时，1 个线程的性能比 2、4、8 和 16 个线程的性能要好得多。只有一个并行区域，我已经剥离了内部 for 循环，以便每个“块”数量的元素都有助于创建任务。

我坚持创建一个任务实现，因为其中元素的价值会不断变化，而且我觉得代码有潜力通过高效的任务实现来对抗非结构化并行性。

我正在 Intel xe12 版本的编译器上尝试这个。以下是我观察到的样本块大小的读数：256 和 N_a = N_b = 4096：

1 个线程：1.237560 2 个线程：7.223232 4 个线程：4.579173 8 个线程：3.663661 16 个线程：4.425525

我注意到 gcc 编译器的类似行为。有人可以请为什么带有 1 个线程的代码比多线程做得更好。对于 N_a = N_b = 1024、2048 和 8192，我也看到了类似的结果。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:42:05.357

您的所有代码都受到保护，`#pragma omp master`仅允许主线程运行所有计算。您必须删除此编译指示（或者有任何理由吗？）才能看到至少一些缩放。

# javascript - Object.create 和引用属性

> ID：12922548
> 
> 赞同：3
> 
> 时间：2012-10-16T20:00:50.890
> 
> 标签：javascript, prototype, design-patterns, object-create

您如何处理在其子代之间共享原型的引用属性的问题？是否有任何众所周知的模式（除了在构造函数中重新定义属性）来解决这个问题？这到底是个问题，还是我缺少关于原型继承的一些东西？

例子：

```
var dog = 
{
    name: "no-name",
    paws: ["front-right", "front-left", "back-right", "back-left"]
};

var rex = Object.create(dog);
rex.name = "Rex";

var bingo = Object.create(dog);
bingo.name = "Bingo";
bingo.paws.pop(); //Bingo is just like a dog, but has lost a paw in a tragic accident

console.log(bingo.paws); //["front-right", "front-left", "back-right"]
console.log(rex.paws); //Rex lost a paw too! ["front-right", "front-left", "back-right"] 
```

## 更新：

在研究了原型继承之后，在我看来，这种范式中“自然”的编程方式是扩展对象，而不是在将它们用作“类”的意义上过分依赖构造函数。我在博客上看到的示例（它似乎也与 Douglas Crockford 的一致`Object.create`）或多或少是这样的：

```
var Dog = 
{
    name: "no-name",
    paws: ["front-right", "front-left", "back-right", "back-left"],
    bark: function() { alert("Bark!!"); }
};

//No constructor acting like a "class"
var BigDog = Object.create(Dog);
BigDog.bark = function() { alert("WOLF!!!"); };

var thor = Object.create(BigDog);
thor.name = "Thor";
thor.bark(); 
```

构造函数是在新实例上复制或创建新数组的唯一方法吗？这是`Object.create`“不完整”的模​​式吗？

感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:10:08.857

如您所知，对象的原型是包含构成该对象的基本属性的对象。与所有对象一样，该原型对象是名称到值的映射。javascript 中的数组（和对象）总是通过引用传递，因此当在原型上调用 Object.create 时 - 它只是将数组的引用复制到新对象中。正如 TheZ 在他的评论中所说，你可以这样做：

```
function Dog(){
    this.paws = ['front-right', 'front-left', 'back-right', 'back-left'];
}
Dog.prototype = {
    name: 'no-name',
    paws: null
}; 
```

所以现在我们可以创建我们的对象：

```
var rex = new Dog();
rex.name = 'Rex';

var bingo = new Dog();
bingo.name = 'Bingo';
bingo.paws.pop(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:12:01.053

您应该查看模块模式

制作一个可以使用的封闭装置，以便您的狗可以分开

```
var dog = function(){
 //private
 var name = "no-name";
 var paws = ["front-right", "front-left", "back-right", "back-left"];

 //public
 function getName(){
  return name;
 }

 function setName(newName){
  name = newName;
 }

 function getPaws(){
  return paws;
 }

 function pawPain(){
  paws.pop();
 }

 //expose
 return{
  pawPain: pawPain,
  getPaws: getPaws,
  getName: getName,
  setName: setName
 };
}; 
```

现在你可以用它来制作新狗了

```
var rex = new dog();    
var bingo = new dog();
rex.pawPain();
console.log(bingo.getPaws()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T20:11:05.833

[http://jsfiddle.net/sVaSp/](http://jsfiddle.net/sVaSp/)

只需要一个构造函数。每个版本都拥有自己的对象副本。

```
 function dog(name) {
        this.name = "no-name",
        this.paws = ["front-right", "front-left", "back-right", "back-left"]
    } 

    var rex = new dog();
    rex.name = "Rex";

    var bingo = new dog();
    bingo.name = "Bingo";
    bingo.paws.pop(); //Bingo is just like a dog, but has lost a paw in a tragic accident

    console.log(bingo.paws); //["front-right", "front-left", "back-right"]
    console.log(rex.paws); //Rex lost a paw too! ["front-right", "front-left", "back-right"]​ 
```

# c# - C#中多线程和多任务的区别

> ID：12922552
> 
> 赞同：5
> 
> 时间：2012-10-16T20:01:35.260
> 
> 标签：c#, multithreading, task-parallel-library

> **可能重复：**
> [任务和线程有什么区别？](https://stackoverflow.com/questions/4130194/what-is-the-difference-between-task-and-thread)

我知道标题本身可能看起来是一个重复的问题，但我真的阅读了与该主题相关的所有先前帖子，但仍然不太了解程序行为。

我目前正在编写一个检查大约 1,000 个电子邮件帐户的小程序。毫无疑问，我觉得多线程或多任务处理是正确的方法，因为每个线程/任务的计算成本并不高，但每个线程的持续时间很大程度上依赖于网络 I/O。

我认为在这种情况下，将线程/任务的数量设置为远大于核心数量的数量也是合理的。（i5-750 四个）。因此，我将线程或任务的数量设置为 100。

使用 Tasks 编写的代码片段：

```
 const int taskCount = 100;
        var tasks = new Task[taskCount];
        var loopVal = (int) Math.Ceiling(1.0*EmailAddress.Count/taskCount);

        for (int i = 0; i < taskCount; i++)
        {
            var objContainer = new AutoCheck(i*loopVal, i*loopVal + loopVal);
            tasks[i] = new Task(objContainer.CheckMail);
            tasks[i].Start();
        }
        Task.WaitAll(tasks); 
```

使用 Threads 编写的相同代码片段：

```
 const int threadCount = 100;
        var threads = new Thread[threadCount];
        var loopVal = (int)Math.Ceiling(1.0 * EmailAddress.Count / threadCount);

        for (int i = 0; i < threadCount; i++)
        {
            var objContainer = new AutoCheck(i * loopVal, i * loopVal + loopVal);
            threads[i] = new Thread(objContainer.CheckMail);
            threads[i].Start();
        }
        foreach (Thread t in threads)
            t.Join();
        runningTime.Stop();
        Console.WriteLine(runningTime.Elapsed); 
```

那么这两者的本质区别是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:07:41.933

任务不一定对应线程。它们将由任务库以比您的线程代码更有效的方式安排到线程池线程。

创建线程相当昂贵。任务将排队并在线程可用时重用它们，因此当一个线程正在等待网络 IO 时，它实际上可以被重用以执行另一个任务。闲置的线程是浪费的资源。您只能（同时）执行与您的处理器核心数相对应的线程数，因此 100 个线程意味着所有核心上的上下文切换至少 25 次。

如果使用任务，只需将所有 1000 个电子邮件处理任务排队，而不是将它们批量处理并让它撕裂。任务库将处理运行它的线程数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:08:59.797

排序快速的答案是任务不等于线程。一个任务在任务调度器中排队，然后在一个线程上执行，但是排队 100 个任务并不意味着你将有 100 个线程在运行。

通常，任务将在线程池中的一个线程上运行，该线程池具有有限的大小。一旦所有这些线程都忙了，那么您的任务将不得不等待一个线程变得可用于执行您的任务。也可以使用适当的任务调度程序将它们排列在 UI 线程等事物上，在这种情况下，它们最终由 UI 线程的消息循环同步运行（这在与 UI 交互时很有用）。

在您的任务示例中，实际上不需要限制启动的任务数量，因为这些任务已经排队并且必须等到有可用的线程来运行它们。这可能是最好的方法，因为您让系统根据系统可以处理的内容确定最大线程数，而不是假设您有足够的 CPU/内存来处理它。

而您使用线程的示例特别意味着您肯定会增加您分配的线程数。

# c++ - C++ 部分模板特化和多个符号定义错误

> ID：12922555
> 
> 赞同：1
> 
> 时间：2012-10-16T20:01:42.233
> 
> 标签：c++, templates

我现在一直在尝试以多种方式分析这个问题，但我无法弄清楚。

我的用例是 - 我有一个模板类，我想为特定类型提供特定实现，同时为其余部分保留通用实现。

这是代码：

```
template< typename T >
struct SomeClass
{
    void foo();
};

template< typename T >
void SomeClass< T >::foo()
{
    printf( "generic impl." );
}

template<>
void SomeClass< char >::foo()
{
    printf( "char-specific impl." );
} 
```

一切正常，只要整个代码位于使用它的代码旁边的 CPP 文件中。

一旦我将代码移动到专用文件，如下所示：

**一些类.h**

```
#ifdef _SOME_CLASS_H

template< typename T >
struct SomeClass
{
    void foo();
};

template< typename T >
void SomeClass< T >::foo()
{
    printf( "generic impl." );
}

#endif 
```

**SomeClass.cpp**

```
#include "SomeClass.h"

template<>
void SomeClass< char >::foo()
{
    printf( "char-specific impl." );
} 
```

我收到一个链接器错误，提示 void SomeClass< char >::foo() 已经实现。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:36:26.003

将专用函数成员的前向声明添加到标题中：

```
template<> void SomeClass<char>::foo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:05:26.593

为了声明专用模板类的成员函数，您需要首先定义专用类：

```
template <>
struct SomeClass<char>
{
  void foo ();
}; 
```

只有这样你才能定义实际的函数实现：

```
template <>
void SomeClass<char>::foo () { /* do something */ } 
```

# android - Android JSON 发布到 WCF 服务

> ID：12922570
> 
> 赞同：2
> 
> 时间：2012-10-16T20:02:52.823
> 
> 标签：android, json, wcf, post

我的 android 客户端尝试将 JSON 类发布到我的 wcf 服务时遇到问题。这是android客户端的代码：

```
 public HttpResponse TestPost() throws Exception 
{

    HttpPost httpost = new HttpPost(url+"/TestPost");

    JSONStringer img = new JSONStringer()
        .object()
        .key("TestModel")
            .object()
                .key("p1").value("test")
                .key("p2").value("test")
                .key("p3").value(1)
                .key("p4").value("test")
                .key("p5").value(2)
                .key("p6").value("test;test")
            .endObject()
        .endObject();
        StringEntity se = new StringEntity(img.toString());

    httpost.setEntity(se);

    httpost.setHeader("Accept", "application/json");
    httpost.setHeader("Content-type", "application/json");

    return httpclient.execute(httpost);
} 
```

这是 Wcf 的代码

```
 [OperationContract]
    [WebInvoke(Method = "POST",
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "TestPost")]
    void TestPost(TestModel tm);

[DataContract]
public class TestModel
{
    [DataMember(Name = "p1")]
    public string p1 { get; set; }

    [DataMember(Name = "p2")]
    public string p2{ get; set; }

    [DataMember(Name = "p3")]
    public int p3 { get; set; }

    [DataMember(Name = "p4")]
    public string p4 { get; set; }

    [DataMember(Name = "p5")]
    public int p5 { get; set; }

    [DataMember(Name = "p6")]
    public string p6 { get; set; } 
```

}

在我的 wcf 方法中，参数 TestModel tm 始终为空。什么可能是错的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:24:57.663

对象的包装（因为您指定`WebMessageBodyStyle.Wrapped`）是根据参数**名称**完成的，而不是参数类型。最外层 JSON 成员的名称应该是“tm”，而不是“TestModel”：

```
public HttpResponse TestPost() throws Exception  
{ 
    HttpPost httpost = new HttpPost(url+"/TestPost"); 

    JSONStringer img = new JSONStringer() 
        .object() 
        .key("tm") 
            .object() 
                .key("p1").value("test") 
                .key("p2").value("test") 
                .key("p3").value(1) 
                .key("p4").value("test") 
                .key("p5").value(2) 
                .key("p6").value("test;test") 
            .endObject() 
        .endObject(); 
        StringEntity se = new StringEntity(img.toString()); 

    httpost.setEntity(se); 

    httpost.setHeader("Accept", "application/json"); 
    httpost.setHeader("Content-type", "application/json"); 

    return httpclient.execute(httpost); 
} 
```

# java - 服务中的刷新会话

> ID：12922573
> 
> 赞同：0
> 
> 时间：2012-10-16T20:03:02.970
> 
> 标签：java, hibernate

也许这是我对 Hibernate 的会话刷新的误解，但我一直在考虑在我的服务中刷新我的会话，但是在服务中做这样的事情感觉不好：

```
public Object serviceMethod(Object model){

    //Do things with model
    sessionFactory.getCurrentSession().flush();

} 
```

感觉不对，因为我的服务会知道我的持久性机制。

所以我一直在考虑制作一个方面并使用注释，所以我的代码如下所示：

```
@FlushAfter
public Object serviceMethod(Model model){
    //Do things with model
} 
```

这种方法是正确的还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:56:17.423

没有必要这样做，因为它已经由事务拦截器自动完成：默认情况下，在事务提交之前会自动刷新 Hibernate 会话。因此，如果您的服务是事务性的（它应该是，与 Hibernate 一起工作），会话将被自动刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T14:43:13.157

事务拦截器/管理器可能决定在事务结束时刷新 session()。还要记住，如果需要，它可能会在事务中间自动刷新会话。你没有明确地调用flushsession。顺便说一句，显式调用刷新会话的原因是什么。This [flush session in the middle of transaction](https://stackoverflow.com/questions/33979644/flush-session-in-the-middle-of-transaction) - 关于此主题的相关问题

# visual-c++ - gnuplot Makefile 找不到从 Visual Studio 2010 命令提示符编译的 gd.h

> ID：12922575
> 
> 赞同：1
> 
> 时间：2012-10-16T20:03:09.490
> 
> 标签：visual-c++, gd, gnuplot

我正在尝试在 Windows 7 x64 机器上编译 gnuplot。

以下是我在为 gnuplot 4.6.1 解压 tar.gz 后遵循的步骤：

1.  打开 Visual Studio 命令提示符
2.  cd 到目录 ..\gnuplot-4.6.1\config\msvc
3.  输入命令“nmake -f Makefile

它运行很短的时间，然后输出

...breaders.c<302>：致命错误 C1083：无法打开包含文件：'gd.h'：没有这样的文件或目录 NMAKE：致命错误 U1077：..\VC\BIN\cl.EXE"'：返回代码“0x2”停止。

需要安装[gd库](http://www.boutell.com/gd/)还是提醒msvc gd.h所在的位置？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:41:01.773

好吧，对于像我这样不知道如何解压缩 tarball 和编译 gnuplot 的用户来说，有一些特定于平台的二进制文件可以处理所有设置。

[http://sourceforge.net/projects/gnuplot/files/gnuplot/4.6.0/gp460-win32-setup.exe](http://sourceforge.net/projects/gnuplot/files/gnuplot/4.6.0/gp460-win32-setup.exe)工作得很好，所以我可以立即使用 gnuplot 并担心稍后再编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T18:47:18.947

在Windows`gnuplot`中使用`nmake`. 有许多库需要`gnuplot`，旨在用于 in `Unix`，例如`gd`. 您可以尝试不使用 gd: 进行编译`--nogd`，但我认为，由于缺少其他一些库，构建应该会中断。

下载安装程序或预构建`gnuplot`是最佳选择。

`Gnuplot`可以像[这里描述](http://www2.warwick.ac.uk/fac/sci/moac/people/students/peter_cock/cygwin/part5/)的那样安装在 Cygwin 下。

一些预先构建的 gnuplot 版本[是用`MinGW`](http://www.tatsuromatsuoka.com/gnuplot/Eng/winbin/). 所以，你也可以尝试`gnuplot`在`mingw`.

# .net - 具有 IList 类型的 UITypeEditor 的用户控件 抛出异常“控件未标记为可序列化”

> ID：12922577
> 
> 赞同：2
> 
> 时间：2012-10-16T20:03:34.617
> 
> 标签：.net, serialization, typeconverter, uitypeeditor

我正在尝试向我的用户控件类型添加一个属性`IList<Control>`，并且我已经实现了一个 UITypeEditor 来向用户显示表单中控件的 CheckedListBox 并允许用户识别要包含的控件。到目前为止，这工作正常。

但是当我尝试关闭 UITypeEditor 时，设计器会显示一条消息“属性值无效”，其中包含以下详细信息：

```
Type 'System.Windows.Forms.Control' in Assembly 'System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' is not marked as serializable. 
```

我不确定这是否可以通过 TypeConverter 解决，但如果是，我不确定 TypeConverter 应该从该`ConvertTo`方法返回什么（因为您无法从构造函数初始化 List，并且它需要引用我不确定如何传回的控件）。

如有必要，我可以将类型更改为 Control[] 如果这样可以解决从构造函数初始化的问题。

编辑：我尝试了这个 TypeConverter，但尽管将它与用户控件上的属性相关联，但它似乎并没有以任何方式使用。

```
class ControlListConverter : TypeConverter {
public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType) {
    if (destinationType == typeof(InstanceDescriptor)) return true;

    return base.CanConvertTo(context, destinationType);
}

public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType) {
    if (destinationType == typeof(InstanceDescriptor) && value is IList<Control>) {
        IList<Control> list = (IList<Control>)value;

        ConstructorInfo ctor = typeof(List<Control>).GetConstructor(new Type[] {typeof(IEnumerable<Control>)});

        if (ctor != null) {
            return new InstanceDescriptor(ctor, new object[] { list });
        }
    }

    return base.ConvertTo(context, culture, value, destinationType);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:36:23.503

似乎相对较好的解决方法是将属性更改为 IList 并存储控件名称。然后，当您需要访问控件时，您只需通过它们的名称查找每个控件。

# mpi - MPI_BCAST 和 MPI_SEND 之间的区别

> ID：12922581
> 
> 赞同：0
> 
> 时间：2012-10-16T20:03:49.673
> 
> 标签：mpi

我知道 MPI_SEND 将被暂停，直到 MPI_RECV 在目标节点中执行。MPI_Bcast 呢？是否需要等到所有其他节点都收到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:08:55.187

MPI_Bcast 是一个集体操作，所以通信器中的所有等级都必须调用它。当它返回成功时，保证数据传输已经完成。

# javascript - jQuery-ui-map 不适用于 jQuery Mobile

> ID：12922584
> 
> 赞同：0
> 
> 时间：2012-10-16T20:03:57.307
> 
> 标签：javascript, jquery, jquery-mobile, google-maps-api-3, jquery-ui-map

我只是在这里查看 jquery-ui-map 的演示[http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#basic_map](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#basic_map)

这正是我想要实现的，它非常基本，我只是按照他们在示例中所做的那样，但它似乎不起作用，我在**Chrome 桌面浏览器**上对其进行了测试。

这是来源：

```
<!DOCTYPE html >
<html >
<head>
    <title>Map Search Page</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.0.1.min.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.0.1.min.css" />    
    <style type="text/css">
        html { height: 100% }
            body { height: 100%; margin: 0px; padding: 0px }
            #map { height: 100%; width:100%; }
    </style>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.ui.map.full.min.js"></script>       
    <script type="text/javascript" src="js/jquery.ui.map.services.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.0.1.min.js"></script>            
    <script type="text/javascript" src="js/script.js"></script>
    <script type="text/javascript">

        var mobileDemo = { 'center': '57.7973333,12.0502107', 'zoom': 10 };
        $('#home').live("pageinit", function () {

            $('#map').gmap({ 'center': mobileDemo.center, 'zoom': 17 });
            //$('#map').gmap('addMarker', { 'position': mobileDemo.center, 'animation': google.maps.Animation.DROP });
        });

        $('#home').live('pageshow', function () {
            $('#map').gmap('refresh');
        });
    </script>
</head>
<body>
    <section id="home" data-role="page">
        <header data-role="header">
            <h1>Multi Color Rating</h1>
        </header>
        <div class="content"  style="width:100%; height:100%; " data-role="content">
          <div id="map">

          </div>
        </div>
        <footer data-role="footer">
       <h2>     All Rights Reserved &copy; 2012</h2>
        </footer>
    </section>

    <script type="text/javascript" src="js/script.js"></script>
</body>
</html> 
```

现在只显示页眉和页脚。

**有一件重要的事情，当我给地图 div 一些高度时，它会显示静态地图图像。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:35:19.700

现在刚刚开始工作，源代码很好。出现问题是因为**jQuery Mobile Map 响应了 Touch 事件**。

Chrome 中的触摸事件默认不启用，因此只需**在 Chrome 控制台中打开触摸事件即可。**

# c# - C# 插件架构和对用户可配置数据库设置的引用

> ID：12922585
> 
> 赞同：10
> 
> 时间：2012-10-16T20:04:12.107
> 
> 标签：c#, .net, plugins

我有一个可由用户配置的数据库应用程序 - 其中一些选项是从不同的外部插件系统中选择的。

我有一个基本插件类型，我的数据库架构具有相同的插件记录类型和相同的字段。我必须`PlugingMananger`在应用程序启动时加载插件（通过 IoC 容器）并将它们链接到数据库（基本上将磁盘上的插件字段复制到数据库）。

```
public interface IPlugin
{
    Guid Id{ get; }
    Version Version { get; }
    string Name { get; }
    string Description { get; }
} 
```

然后可以使用 检索插件`PlugingMananger.GetPlugin(Guid pluginId, Guid userId)`，其中用户 ID 是可能调用插件操作的多个用户之一的用户 ID。

应用程序已经预先声明了一组已知接口，每个接口都特定于某个功能（格式化程序、外部数据、数据发送器等），如果插件实现了一个未知的服务接口，那么它将被忽略：

```
public interface IAccountsPlugin : IPlugin
{
    IEnumerable<SyncDto> GetData();
    bool Init();
    bool Shutdown();
} 
```

插件还可以`PluginSettingAttribute`在多用户系统中为每个用户定义设置属性 - 这些属性是在为特定用户检索插件时设置的，而`PluginPropertyAttribute`对于所有用户通用且插件一次只读设置的属性在应用程序启动时注册插件时。

```
public class ExternalDataConnector : IAccountsPlugin
{
    public IEnumerable<AccountSyncDto> GetData() { return null; }
    public void Init() { }
    public void Shutdown() { }

    private string ExternalSystemUsername;
    // PluginSettingAttribute will create a row in the settings table, settingId
    // will be set to provided constructor parameter. this field will be written to
    // when a plugin is retrieved by the plugin manager with the value for the
    // requesting user that was retrieved from the database.
    [PluginSetting("ExternalSystemUsernameSettingName")]
    public string ExternalSystemUsername
    {
        get { return ExternalSystemUsername }
        set { ExternalSystemUsername = value; } 
    }

    // PluginPropertyAttribute will create a row in the attributes table common for all users
    [PluginProperty("ShortCodeName")]
    public string ShortCode
    {
        get { return "externaldata"; }
    }

    public Version PluginVersion
    {
        get { return new Version(1, 0, 0, 0); }
    }

    public string PluginName
    {
        get { return "Data connector"; }
    }

    public string PluginDescription
    {
        get { return "Connector for collecting data"; }
    }
} 
```

以下是我寻求指导的问题和领域：

1.  通过上述将 IoC 容器中的插件链接到数据库的抽象，用户可以选择数据库字段`Customer.ExternalAccountsPlugin = idOfExternalPlugin`。这感觉很重 - 是否有其他系统实现这一点的更简单方法（例如，SharePoint 有很多用户数据库引用的插件）？

2.  我的应用程序在编译时规定了它支持的接口并忽略了所有其他接口 - 我已经看到一些系统声称可以使用开放插件完全扩展，我认为这意味着许多松散类型的接口和强制转换，是否存在中间立场这两个选项允许在不重新编译的情况下发布未来更新但仍使用具体接口？

3.  我的插件可能包含元数据（PluginProperty 或 PluginSetting），我不确定存储它的最佳位置，无论是在插件元数据表中（会使 linq 查询更复杂）还是直接在插件数据库记录行中（简单的 linq 查询`PluginManager.GetPluginsOfType<IAccounts>.Where(x => x.ShortCode = "externaldata").FirstOrDefault();`，即用作最佳实践？

4.  由于插件功能和接口严重依赖于数据库模式，我可以限制插件与特定模式修订版一起使用的推荐方法是什么？我是否会将此架构修订作为单行保留在数据库的设置表中，并在每次发布后手动更新？插件是否支持最大架构版本，或者应用程序是否支持已知插件版本列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:30:27.283

1) 对不起，但我不确定。但是，我很确定，在由自定义插件创建或处理数据的软件中，它们会按照您描述的方式处理插件。这个想法是，如果用户加载数据但缺少该特定插件，则数据不会损坏，并且不允许用户修改该数据。（我想到的一个例子是一般的 3D 软件）

2）只给出非常严格的接口实现，当然对插件的创建有很大的限制。（例如：Excel，我无法创建新的单元格类型）它没有好坏之分，这在很大程度上取决于您想要从中获得什么，这是一个选择。如果您希望插件创建者仅通过一些非常特定的管道访问数据，限制他可以创建的数据类型，那么它与您的设计相一致。否则，如果您的目标是开放您的软件以进行改进，那么您还应该公开一些您认为足够安全以供外部使用的类和方法。（例如：Maya，我可以创建一个从基类派生的新实体类型，而不仅仅是一个接口）

3）嗯，这取决于很多事情，不是吗？序列化数据时，您可以创建一个包装器，其中包含特定插件、ID、元数据以及您认为需要的任何其他信息的所有信息。我会走那条路，因为它更容易检索，但它是满足您需要的最佳方式吗？没有更多信息很难说。

4) Firefox 就是一个很好的例子。较小的版本增量不会改变插件的兼容性。考虑到插件实现的内容，如果插件仍然有效，则从数据库进行中等版本增量测试。如果插件没有实现一些改变，它仍然有效。主要版本增量需要重新编译所有插件以使用新定义。从我的角度来看，这是一个很好的中间地带，它允许开发人员不必总是重新编译，但它使主要软件的开发变得更加棘手，因为必须提前计划更改。这个想法是平衡软件开发人员和插件开发人员之间的 PitA（屁股痛）因素。

嗯……那是我长期收藏的 2 美分。

# c++ - 自动编译器问题？错误：在声明器列表中，“auto”必须始终推断为相同的类型

> ID：12922588
> 
> 赞同：7
> 
> 时间：2012-10-16T20:04:17.097
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, auto

```
std::vector<int> vec;
auto i = vec.begin(), j = std::next(i); 
```

> 错误：在声明器列表中，“auto”必须始终推断为相同的类型

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T20:08:10.687

在 Linux 上的 g++ 中编译得很好，所以它似乎是一个编译器错误。[大概就是这个](https://connect.microsoft.com/VisualStudio/feedback/details/545958#details)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T20:12:24.543

这似乎是编译器错误。请参阅下面的此链接。 [http://connect.microsoft.com/VisualStudio/feedback/details/728741](http://connect.microsoft.com/VisualStudio/feedback/details/728741) 从链接中的评论来看，可能已经修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-31T23:33:13.187

是的，这是 VS2010 编译器工具链上的一个问题。换到2013年还好。

# filepicker.io - Filepicker.io 上传资源 > 1.6 MB 失败

> ID：12922598
> 
> 赞同：4
> 
> 时间：2012-10-16T20:05:24.540
> 
> 标签：filepicker.io

今天早上，我们注意到如果文件大小大于 ~1.6MB，我们的 filepicker.io 上传将不再处理。不确定这是否与最近升级 Javascript API (v1) 有关，但目前我们的用户无法上传文件。

对文件选择器的 POST 请求返回 200，但进度条在 99.30% 处停止。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:12:01.657

只是想正式将此标记为已修复，因此我们没有未解决的问题！随意标记为已回答或删除

# oracle - 可变数组类型的 Oracle 检查约束

> ID：12922601
> 
> 赞同：3
> 
> 时间：2012-10-16T20:05:26.660
> 
> 标签：oracle, constraints

我有一个自定义类型定义为：

```
CREATE TYPE myType_t AS VARRAY(2) of char(10); 
```

是否可以在 char(10) 类型上添加检查约束，以便 myType_t 项目尊重某个正则表达式？我尝试过类似的事情

```
CREATE TYPE myType_t AS VARRAY(2) of char(10)
( constraint c_myType_format check ( regexp_like(IdontKnowWhatToWriteHere, '[:digit:]{8}')); 
```

这显然是行不通的......我想也许可以为

```
AS VARRAY(2) of myOtherType_t 
```

但在这里我又不知道在哪里放置正则表达式检查。

是的，我还尝试将约束添加到将使用我的类型的表中，但我找不到正确的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:56:47.513

[根据 Oracle 文档：](http://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm#i1002038)

> Oracle 不支持对类型为用户定义对象、嵌套表、VARRAY、REF 或 LOB 的列或属性进行约束

# php - uploadifive - 上传时更改文件名

> ID：12922607
> 
> 赞同：0
> 
> 时间：2012-10-16T20:05:47.260
> 
> 标签：php, javascript, jquery, uploadify

我正在使用 uploadifive 上传图片 - 但是我想将图片的名称更改为“newimage”我不确定在哪里或如何使用所提供的内容来执行此操作 - 这是我需要部署的最后一个修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:24:19.273

您将需要在处理上传的 PHP 脚本中更改名称（我假设您使用 PHP，因为这是 uplidfy 的标准）。这可能有点棘手，因为您必须将传入的文件名与其扩展名分开。这应该足以让你开始。

```
 $theFile = $_FILES['file_upl']['name'];
    $tempFile = $_FILES['file_upl']['tmp_name'];
    $newName = "newname";
    $saveDir = $_SERVER['DOCUMENT_ROOT']."/images/";

    //Function returns the extension from the '.' on
    function get_ext($from_file) { 
        $ext = strtolower(strrchr($from_file,'.'));
        return $ext;
    }

    //This will rename the file to $newname + the extension
    $theFile = $newname.get_ext($theFile);

//Save the file
    move_uploaded_file($tempFile,$saveDir.$theFile); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T20:20:16.153

```
$file = 'uploaded_img.jpg';
$remote_file = 'Saved.txt';

ftp_put($conn_id, $remote_file, $file, FTP_ASCII) 
```

只需更改远程文件的名称

# php - PHP生成的CSV文件充满了来自网络主机的html废话而不是数据？

> ID：12922609
> 
> 赞同：-3
> 
> 时间：2012-10-16T20:06:13.990
> 
> 标签：php, csv, fputcsv

我正在使用 PHP 生成一个带有名字和第二个名字的 csv 文件。

在我的本地 XAMPP 服务器上，它工作正常并生成此输出。

```
Andy,Murray
Sarah,Palin
Bob,Saget 
```

然而，在这个 000webhost.com 免费虚拟主机站点上，我得到以下输出。

```
 <br><table border='1' cellpadding='2' bgcolor='#FFFFDF' bordercolor='#E8B900' align='center'><tr><td><font face='Arial' size='1' color='#000000'><b>PHP Error Message</b></font></td></tr></table><br />
<b>Warning</b>:  array_walk() [<a href='function.array-walk'>function.array-walk</a>]: The argument should be an array in <b>/home/a2806375/public_html/csv.php</b> on line <b>15</b><br />
<br><table border='1' cellpadding='2' bgcolor='#FFFFDF' bordercolor='#E8B900' align='center'><tr><td><div align='center'><a href='http://www.000webhost.com/'><font face='Arial' size='1' color='#000000'>Free Web Hosting</font></a></div></td></tr></table>
<!-- Hosting24 Analytics Code -->
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code --> 
```

这是我的代码：

```
function outputCSV($data) 
        {
            $outstream = fopen("php://output", "w");

            function __outputCSV(&$vals, $key, $filehandler) 
            {
                fputcsv($filehandler, $vals); // add parameters if you want
            }
            array_walk($data, "__outputCSV", $outstream);
            fclose($outstream);
        }

        $result = $db->fetch_array($result);

        header("Content-type: text/csv");
        header("Content-Disposition: attachment; filename=guestlist.csv");
        header("Pragma: no-cache");
        header("Expires: 0");

        outputCSV($result); 
```

为什么要这样做？

是因为它是一个免费的托管网站，而且他们正试图将广告放在 CSV 文件中吗？

我该如何解决，我的 atm 钱有点少，所以我买不起付费服务器。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:18:49.687

禁止从他们的控制面板插入他们的分析代码：

[http://members.000webhost.com/analytics.php](http://members.000webhost.com/analytics.php)

来自：[http ://www.000webhost.com/forum/faq/7894-faq-frequent-ask-questions-guide.html](http://www.000webhost.com/forum/faq/7894-faq-frequent-ask-questions-guide.html)

# objective-c - 如何获得 MPAVController“设置电影路径”

> ID：12922610
> 
> 赞同：1
> 
> 时间：2012-10-16T20:06:16.973
> 
> 标签：objective-c, ios, uiwebview, mpmovieplayercontroller, avplayer

我正在使用 UIWebView 开发视频应用程序。

MPAVController 在连接到视频站点时启动，电影 URL 显示在调试控制台中。

**例子：**

```
2012-10-17 04:50:57.391 MovieApp[43145:14003] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2012-10-17 04:50:57.392 MovieApp[43145:14003] setting movie path: 【MOVIE URL】
2012-10-17 04:50:57.392 MovieApp[43145:14003] [MPAVController] Autoplay: Enabling autoplay 
```

如何获得“设置电影路径”？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:38:50.570

`MPAVController`是完全私有的，你不应该直接在它的实例上做任何事情。

# ruby-on-rails - has_one 关联和嵌套形式

> ID：12922616
> 
> 赞同：0
> 
> 时间：2012-10-16T20:06:50.273
> 
> 标签：ruby-on-rails, associations, has-one

我有一个模型`Post`：

```
class Post < ActiveRecord::Base
  has_one :draft, class_name: Post, foreign_key: draft_id
end 
```

在`routes.rb`我有以下内容：

```
namespace :admin do
  resources :posts do
    resource :draft
  end
end 
```

我想要实现的是在使用时启用草稿`form_for`，即：

```
= form_for [:admin, @post, @draft] do |form| 
```

...其中`@post`和`@draft`是同一模型的不同实例。

现在，如果我这样做，我会收到一个错误：

```
NoMethodError: undefined method `admin_tour_tour_url' 
```

**问题**：那么如何使表单生成`admin_tour_draft_url`带有所需修饰符的 +`edit_`和`new_`？

PS我在这里走错路了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:31:29.150

通过从您的路线中显式提取路线，在 form_tag 帮助程序中指定您自己的路径：

1) 耙式路线 | grep admin_posts

2）注意路径..可能类似于'admin_posts_draft'

3）将“_path”添加到路径中，这是您的助手的名称..在您的代码中使用该助手

```
<%= form_tag admin_posts_draft_path(@post, @draft) %>
<% end %> 
```

# dojo - 道场建造……？现在怎么办？

> ID：12922618
> 
> 赞同：6
> 
> 时间：2012-10-16T20:07:11.290
> 
> 标签：dojo, dojo-build

不久前，我研究了在使用 Dojo 和 Dojo 主题时出现“无样式内容闪烁”的解决方案。有人建议通过创建构建来组合所有内容，这将减少加载/解析时间并消除使用预加载器覆盖等的需要。

然而，Dojo 的许多功能似乎严重缺乏直接的、“真实世界”的使用示例和教程，尤其是这一点。许多资源告诉您如何设置构建，但没有告诉您如何实现它。

假设我在“pageinit.js”中有这个：

```
require([
    'dojo/parser', 
    'dojo/dom',
    'dojo/dom-class',
    //etc...

    'dijit/form/ValidationTextBox', 
    'dijit/form/CheckBox',
    // etc...

    // Dom Ready call
    'dojo/domReady!']
    function(
        Parser, 
        Dom,
        Class,
        // etc...){
    // do stuff with parser, dijits, so on.
    }
) 
```

为简洁起见，删除了一些 require 调用，但有一些`dom`requires、`style`classes、some`dijits`等。当此页面加载时，会出现无样式内容的闪烁，然后就可以了。

使用[Dojo Web Builder](http://build.dojotoolkit.org/)，我选择了我正在使用的模块并运行它。它下载了一个包含很多文件的 zip，其中包括一个新的`dojo.js`和`custom_layer.js`.

所以我现在的问题是，我如何使用这些新的组合和缩小文件来代替我的“非构建”版本？我该怎么办`require`？还是我？

如此迷茫...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T20:22:36.653

首先，让我们了解 AMD(require/define) API 的工作原理。

```
require([
  'dojo/parser', 
  'dojo/dom',
  'dojo/dom-class'
], function(parser, dom, domClass){
}); 
```

这将调用 require 函数，指定我需要三个模块才能完成一些工作。require 将获取每个模块。如果将确定模块是否已加载。如果没有，它将异步获取文件，并将模块加载到 javascript 运行时。一旦 require 检索到所有必需的模块，它将执行您的回调（函数），将模块作为参数传递给函数。

接下来，让我们了解构建。dojo 构建完全符合您的描述。它将一堆单独的文件压缩成一个文件。这将使页面加载更快并防止您描述的“闪光”。

最后，将它们放在一起，您应该将`custom_layer.js`文件与文件一起包含在内`dojo.js`。

```
<script type="text/javascript" src="path/to/dojo/dojo.js" />
<script type="text/javascript" src="path/to/custom_layer.js" /> 
```

Web 浏览器将加载这两个文件并评估代码。与其在自己的文件中懒惰地加载每个模块，不如将模块已经加载，因为它是在`custom_layer.js`.

因此，最后一个问题的答案是，您不应该根据您正在使用的特定代码版本（源代码与自定义构建）更改任何代码。使用 AMD api，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T18:40:01.783

不确定这是否是最佳实践，但是当我第一次开始（几天前）时，我看到了无样式内容的闪现，并且在某个地方看到了几个示例，这些示例只需隐藏`<body>`. Parse 将在准备好显示某些内容时取消隐藏它。

```
<body style="visibility: hidden;"> 
```

# javascript - 如何在 :before 使用 javascript 的伪元素上检测 CSS 转换支持？

> ID：12922619
> 
> 赞同：2
> 
> 时间：2012-10-16T20:07:15.550
> 
> 标签：javascript, css-transitions, pseudo-element, browser-feature-detection

我正在尝试将[CSS 转换](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)与[`:before`](http://www.w3.org/TR/CSS2/selector.html#before-and-after)选择器一起使用，目前唯一支持此功能的浏览器是 Firefox。我可以毫无问题地创建一个[jQuery 后备](http://api.jquery.com/animate/)，但我不确定如何使用这样的伪元素进行特征检测。

[这是一个 JSBin，它显示了我正在使用的 HTML 和 CSS。](http://jsbin.com/ikuxoz/3/edit)

（[......这是一个类似的SO问题，但关于使用常规元素。](https://stackoverflow.com/questions/7264899/detect-css-transitions-using-javascript-and-without-modernizr)）

**更新：**哇，连IE10的平台预览版都支持这个了，那个webkit是怎么回事？！

![IE 10 平台预览版在 :before 上支持 CSS 过渡](../Images/0af476c345395459e74e535239957f65.png)

（**编辑：**解决方案移至下面的答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:14:52.030

我知道建议指出你应该使用后备而不是 polyfill，但就在你我之间，使用无条件 polyfill 对于像 CSS3 这样的前沿技术来说并不是那么糟糕。

如果您必须知道功能状态，您可以使用[Modernizr](http://modernizr.com/)，~~但如果您使用的是库，您不妨只使用[Selectivizr](http://selectivizr.com/)并获得完整的 CSS 跨浏览器支持。~~

啊哈！[这](http://jsfiddle.net/tahGs/21/show/light/)是来自 github 上 Modernizr 人员的一个非常好的小提琴。基本上，它检查伪元素的计算样式值是否在比过渡持续时间短的时间跨度内从其原始值更改。当然，问题在于使用 setTimeouts 的不可靠性（同步问题），以及您需要推迟一切直到 setTimeout 测试完成的事实。检查您的控制台以查看浏览器是否具有伪元素转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:11:10.777

公平地说，即将推出的 IE10 确实支持生成内容的转换（我自己在 Windows 8 Enterprise 试用版中进行了测试）。

实际上，我确信没有必要检测这种类型的东西。过渡只是轻微的*改进*，而不是关键功能。因此，让过渡在更高级的浏览器中工作而不在不太高级的浏览器中工作是完全可以的。

但是如果你需要检测它，考虑到这不能直接可靠地检测到，你可以通过测试标准全局 JS 对象的存在来使用浏览器引擎检测。例如，因为我们知道 IE10 支持转换生成的内容，所以我们可以完全适应未来的[过滤 IE9 和更旧的 IE](http://tanalin.com/en/articles/ie-version-js/)条件`document.all && !window.atob`。Opera 可以通过检测 的存在来检测`window.opera`，所以当 Opera 修复这个问题时，我们可以使用`window.opera && !someGlobalObjectAddedInFixedOpera`条件来检测旧版本。有可能以类似的方式检测到 WebKit。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T02:30:18.907

感谢[@Asad](https://stackoverflow.com/a/12922703/1414)挖掘了一些[方便的代码](http://jsfiddle.net/tahGs/21/show/light/)，我能够想出一个[很好的解决方案](http://jsbin.com/eliwum/3)，这里是 jQuery 版本：

```
$(function() {
  var isTransitionSupported = (function (pseudo, transProp, transPropStart, transPropEnd) {
    var id = pseudo + transProp + '-' + (new Date()).valueOf(),
        prefixes = ['o', 'ms', 'moz', 'webkit'],
        prop = "transition: " + transProp + " 99s linear;",
        allprops = (function () {
          var props = "";
          for (var l = prefixes.length; l--;) {
            props += "-" + prefixes[l] + "-" + prop;
          }
          return props + prop;
        }()),
        $css = $("<style>" +
                 "#" + id + "{position:absolute;left:-999em;}" + 
                 "#" + id + ":" + pseudo + "{display:block;content:'M';" + transProp + ":" + transPropStart + ";}" + 
                 "#" + id + ".t:" + pseudo + "{" + allprops + transProp + ":" + transPropEnd + ";}" + 
                 "</style>"),
        $bct = $('<div id="' + id + '" />');

      $css.appendTo("head");
      $bct.appendTo("body");

      try {
        // get style value before any changes
        window.getComputedStyle($bct[0], ':' + pseudo).getPropertyValue(transProp);

        $bct.addClass("t");

        // test style after changes
        return (window.getComputedStyle($bct[0], ':' + pseudo).getPropertyValue(transProp) !== transPropEnd);
      } catch (e) {}
      return false;
    }("before", "width", "0px", "1000px"));
}); 
```

[这是一个不使用 jQuery 的版本](http://jsbin.com/ekafan/1)：

```
var isTransitionSupported = (function (pseudo, transProp, transPropStart, transPropEnd) {
    var ticks = (new Date()).valueOf(),
        id = pseudo + transProp + '-' + ticks,
        prefixes = ['o', 'ms', 'moz', 'webkit'],
        prop = "transition: " + transProp + " 99s linear;",
        allprops = (function () {
            var props = "";
            for (var l = prefixes.length; l--;) {
                props += "-" + prefixes[l] + "-" + prop;
            }
            return props + prop;
        }()),
        body = document.body || document.createElement('body'),
        node = document.createElement('div'),
        css = "<style>" +
                    "#" + id + "{position:absolute;left:-999em;}" + 
                    "#" + id + ":" + pseudo + "{display:block;content:'M';" + transProp + ":" + transPropStart + ";}" + 
                    "#" + id + ".t" + ticks + ":" + pseudo + "{" + allprops + transProp + ":" + transPropEnd + ";}" + 
                    "</style>",
        bct = document.createElement('div'),
        isSupported = false;

    bct.id = id;
    node.innerHTML += css;
    node.appendChild(bct);
    body.appendChild(node);

    try {
        // get style value before any changes
        window.getComputedStyle(bct, ':' + pseudo).getPropertyValue(transProp);

        bct.className += "t" + ticks;

        // test style after changes
        isSupported = (window.getComputedStyle(bct, ':' + pseudo).getPropertyValue(transProp) !== transPropEnd);
    } catch (e) {}

    node.parentNode.removeChild(node);

    return isSupported;
}("before", "width", "0px", "1000px"));

document.documentElement.className += ' ' + (isTransitionSupported ? '' : 'no-') + "pseudo-trans"; 
```

这是[github 上的 gist 中的所有代码](https://gist.github.com/3908275)，如果有人想分叉和改进它。

# android - 从地图中移除 OverylayItem

> ID：12922621
> 
> 赞同：1
> 
> 时间：2012-10-16T20:07:20.170
> 
> 标签：android, google-maps, itemizedoverlay, indexoutofboundsexception

我试图允许用户从地图中删除一个点（或更具体地说，一个 OverlayItem）。我按照开发人员[教程](https://developers.google.com/maps/documentation/android/hello-mapview)开始并在[本](http://www.kind-kristiansen.no/2011/android-handling-longpresslongclick-on-map-revisited/)教程中实现了 CustomMapView 以捕获地图上的长按。

所以现在我有一个程序允许用户在地图上放置点。我的下一个目标是让用户删除积分。这是用户单击地图上现有点时的代码。

```
public class OurItemizedOverlay extends ItemizedOverlay {

//Create new list of points
private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();
private Context mapContext;
@Override
protected boolean onTap(final int index) {
    Button edit, remove;

    //Get index of item tapped
    OverlayItem item = mapOverlays.get(index);

    //Create Dialog to show point info, allow for edit or removal.
    LinearLayout layout = new LinearLayout(mapContext);
    layout.setOrientation(LinearLayout.VERTICAL);

    LayoutInflater inflater = LayoutInflater.from(mapContext);
    AlertDialog.Builder builder = new AlertDialog.Builder(mapContext);
    builder.setTitle(item.getTitle());
    builder.setMessage(item.getSnippet());

    View view = inflater.inflate(R.layout.view_or_edit_location_dialog, null);
    builder.setView(view); 
    builder.show();

    //BUTTONS

    edit = (Button)view.findViewById(R.id.edit);
    remove = (Button)view.findViewById(R.id.delete);

    //Edit Button Listener
    edit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    });

    //Remove Button Listener
    remove.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            removeOverlay(index); <--------

            Log.d("View location info", "user clicked delete.");
            return;
        }
    });

    return true;
} 
```

这是我的 removeOverlay 代码。

```
protected void removeOverlay(int index) {

    mapOverlays.remove(index);
    com.example.mapproject.MainActivity.mapView.invalidate();
} 
```

在我单击现有点后，会出现一个对话框，提供删除该点。当我选择删除该点时，该点仍保留在屏幕上。如果我放置一个新点，则会删除“已删除”的点。但是，如果我单击“已删除”点或另一个现有点，程序会因此错误而崩溃。

![错误](../Images/671c58eaec1546fb4f7f9a070ad5af15.png)

如果您知道该怎么做，我会很高兴收到您的来信！

**编辑**

根据 Vishwa Patel 的提示，我使用 postInvalidate() 立即从地图中删除了一个点。但是，当我单击图标所在的位置时，我仍然会遇到 indexoutofbounds 异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:37:06.610

您可能需要调用`invalidate()`您的`MapView`，强制它重新绘制自己。正如评论者所提到的，您可能还需要重新调用`populate()`. 您的应用程序可能正在崩溃，因为它试图调用`onTap()`一个`OverlayItem`不存在的。您可能还想尝试任何可以“刷新”`MapView`和/或覆盖的方法，因为这是您需要做的才能使`OverlayItem`消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:39:04.363

尝试使用

```
com.example.mapproject.MainActivity.mapView.postInvalidate(); 
```

因为您正在从非 UI 线程进行无效调用，如 postInvalidate() 的文档中所述；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:01:55.890

我相信我在[这里](http://developmentality.wordpress.com/2009/10/19/android-itemizedoverlay-arrayindexoutofboundsexception-nullpointerexception-workarounds/)找到了解决方案。到目前为止似乎有效，答案是将以下行放入我的 removeOverlay 方法中，

```
setLastFocusedIndex(-1); 
```

从我的自定义 Overlay 中删除 OverylayItem 的代码是，

```
 protected void removeOverlay(OverlayItem overlayItem) {

    mapOverlays.remove(overlayItem);
    MainActivity.mapOverlays.remove(this);
    setLastFocusedIndex(-1);
    populate();

} 
```

欢迎任何想法/建议！

# ruby-on-rails - 我应该如何解析 Facebook Oauth 令牌的过期日期以存储在 PostgreSQL 中？

> ID：12922623
> 
> 赞同：1
> 
> 时间：2012-10-16T20:07:43.487
> 
> 标签：ruby-on-rails, facebook, postgresql, oauth

我正在使用 OAuth 对我的应用程序进行身份验证，以使用 OAuth 访问用户的 Facebook 详细信息。最近，我将数据库迁移到使用 PostgreSQL，现在在从 Facebook 返回时无法存储令牌信息。

确切的错误是：

```
PG::Error: ERROR:  invalid input syntax for type timestamp: "1350424800"
: INSERT INTO "authentications" ("created_at", "oauth_expires_at", "oauth_token", "provider", "uid", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id" 
```

奇怪的是，SQLite 并非如此，因此这显然与 Facebook 返回到期日期的格式（“1350424800”）有关。关于我应该如何解析它以使其工作的任何想法？

我目前的创建方式并没有做任何聪明的事情，简单地说：

```
def self.create_with_omniauth(auth)
    create(uid: auth['uid'], provider: auth['provider'], oauth_token: auth['credentials'].token, oauth_expires_at: auth['credentials'].expires_at)
end 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:50:16.893

有一个问题是 postgres 中的变量类型。如果您将“oauth_expires_at”作为“日期时间”，则应将字符串时间戳转换为日期时间。在 Rails 中，您可以使用 Time.at 轻松转换它，如下所示：

> ... oauth_expires_at: Time.at(auth['credentials'].expires_at)

重写你的函数如下：

```
def self.create_with_omniauth(auth)
    create(uid: auth['uid'], provider: auth['provider'], oauth_token: auth['credentials'].token, oauth_expires_at: Time.at(auth['credentials'].expires_at))
end 
```

如果您想要更大的灵活性并将其与omniauth-twitter 一起使用，您可以这样做。我正在使用 rail 的 try 方法来优雅地处理 twitter 或其他社交媒体中没有 expires_at 的情况

```
class User < ActiveRecord::Base
    has_many :authentications, dependent: :destroy

    def create_authentication(oauth)
        authentications.create!(
            provider: oauth['provider'], 
            uid: oauth['uid'], 
            oauth_token: oauth['credentials']['token'],
            oauth_secret: oauth['credentials'].try(:[],'secret'),
            oauth_token_expires_at: oauth['credentials'].try(:[],'expires_at') ? Time.at(oauth['credentials'].try(:[],'expires_at')) : nil,
            data: oauth.to_json.to_s
        )
    end 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:28:28.133

> PG ::错误：错误：类型时间戳的无效输入语法：“1350424800”

你在这里有一个数字 Unix Timestamp 值——而 PostgreSQL 数据类型`timestamp`显然必须以另一种格式给出。

并在这里查看[http://www.postgresql.org/docs/current/static/datatype-datetime.html#DATATYPE-DATETIME-DATE-TABLE](http://www.postgresql.org/docs/current/static/datatype-datetime.html#DATATYPE-DATETIME-DATE-TABLE)，您可以看到一些接受的格式，但没有出现数字 Unix Timestamp列在那里。

因此，您必须首先将值转换/格式化为一种可接受的格式；在 PostgreSQL 中可能有一个功能可以做到这一点……（如果没有，谷歌应该提供帮助）。

# c# - C#/ASP.NET 中的控制数组类型循环

> ID：12922627
> 
> 赞同：2
> 
> 时间：2012-10-16T20:08:09.923
> 
> 标签：c#, asp.net, control-array

我正在编写一个 C#/ASP.Net Web 应用程序，并且我有大量文本框需要在后面的代码中设置为变量值。目前我正在做以下事情：

```
AspTextBox0.Text = codeBehindVariable[0];
AspTextBox1.Text = codeBehindVariable[1];
AspTextBox2.Text = codeBehindVariable[2];
AspTextBox3.Text = codeBehindVariable[3];
… 
```

有没有一种简单的方法可以在一个简单的“for”循环中做到这一点？

这是一个非常简化的例子，真实的程序有一个 switch case 和其他一些需要在分配变量时执行的测试。因此，“for”循环将大大简化代码的编写和可维护性。回到过去的 VB6 和控制阵列，这简直是小菜一碟。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T20:13:16.233

VB6的*美好时光*早已一去不复返，最好不要回来。

创建一个控制数组或更好的`List<TextBox>`自己：

```
var textBoxes = new List<TextBox> {
    AspTextBox0,
    AspTextBox1,
    // ...
}; 
```

然后用**[Zip 压缩](http://msdn.microsoft.com/en-us/library/dd267698.aspx)**`codeBehindVariable`：

```
textBoxes.Zip(codeBehindVariable, 
              (textBox, variable) => textBox.Text = variable); 
```

或者，如果您更喜欢`for`循环：

```
for ( int i = 0; i < codeBehindVariable.Length; i++ )
{
    textBoxes[i].Text = codeBehindVariable[i];
} 
```

请记住，在`for`循环中，您必须确保两者都`textBoxes`具有`codeBehindVariable`相同数量的项目（或使循环仅在最短列表的条目数量上运行）。该`Zip`函数将自行处理此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:24:58.687

假设您在一个实现的类中，`System.Web.UI.Page`您可以尝试查找控件以找到您想要的控件，如下所示：

```
for (int i = 0; i <= codeBehindVariable.Length; i++)  
{ 
  var textBox = FindControl("AspTextBox" + i, false);
  if(textBox != null)
  {
    textBox.Text = codeBehindVariable[i];  
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T20:13:12.697

你可以做这样的事情......

```
 int i = 0;
    foreach (Control ctrl in this.Controls)
    {
        if (ctrl is TextBox)
        {
            TextBox tempTextBox = (TextBox)ctrl;
            tempTextBox.Text = codeBehindVariable[i];
            i++;
        }
    } 
```

# jquery - 谷歌地图外部标记链接

> ID：12922630
> 
> 赞同：0
> 
> 时间：2012-10-16T20:08:13.337
> 
> 标签：jquery, google-maps-api-3, google-maps-markers

我正在使用谷歌地图并尝试制作一些外部链接标记。我正在用异步加载它，然后尝试制作具有外部链接的标记，然后可以单击这些链接以动画到标记。我所拥有的不是很有效，但我认为它已经接近了。我也想知道如何使用 jquery 来做到这一点？我认为部分问题是我无权访问 body 标签，所以我不能这样做，我不知道该怎么做。

```
function initialize() {
    var mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng(-34.397, 150.644),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);
  }

  function loadScript() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&' +
        'callback=initialize';
    document.body.appendChild(script);
  }

  window.onload = loadScript;

var marker1;
var marker2;

function initialize() { 
var latlng = new google.maps.LatLng(26.032260, 50.514686); 
var myOptions = { 
  zoom: 15, 
  center: latlng, 
  mapTypeId: google.maps.MapTypeId.HYBRID
}; 

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 

var infowindow = new google.maps.InfoWindow(); 

marker1 = new google.maps.Marker({ position: new 
google.maps.LatLng(41.569690, 2.257090), map: map, title: 'Barcelona' }); 
google.maps.event.addListener(marker1, 'click', function() { 
  infowindow.setContent('Spanish Grand Prix'); 
  infowindow.open(map, marker1); 
}); 

marker2 = new google.maps.Marker({ position: new 
google.maps.LatLng(31.338463, 121.220355), map: map, title: 'Shanghai'}); 
google.maps.event.addListener(marker2, 'click', function() { 
  infowindow.setContent('Chinese Grand Prix'); 
  infowindow.open(map, marker2); 
}); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:56:42.527

使用 JQuery，您可以使用任何 Maps 插件，例如此链接中所述的插件和许多其他插件：

[http://slodive.com/web-development/15-jquery-google-map-plugins/](http://slodive.com/web-development/15-jquery-google-map-plugins/)

# c - 如何检测字符缓冲区编码？

> ID：12922635
> 
> 赞同：4
> 
> 时间：2012-10-16T20:08:30.773
> 
> 标签：c, encoding, character-encoding, detection

是否有任何免费的开源库可以自动检测任意`char*`缓冲区的编码？

例如，在 python 中有一个名为[chardet](http://pypi.python.org/pypi/chardet)的模块，它做同样的工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:17:20.573

如果存在[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)，那么您可以使用必须位于流开头的特定序列来查找使用的编码。

# objective-c - 为什么 NSDateFormatter 为这 4 个时区返回 nil 日期？

> ID：12922645
> 
> 赞同：42
> 
> 时间：2012-10-16T20:09:20.030
> 
> 标签：objective-c, ios6, nsdate, nsdateformatter, julian-date

尝试在 iOS6 中运行它（iOS6 之前没有测试过）：

```
NSDateFormatter *julianDayDateFormatter = nil;
julianDayDateFormatter = [[NSDateFormatter alloc] init];
[julianDayDateFormatter setDateFormat:@"g"];

for (NSString *timeZone in [NSTimeZone knownTimeZoneNames]) {
    julianDayDateFormatter.timeZone = [NSTimeZone timeZoneWithName: timeZone];
    NSDate *date = [julianDayDateFormatter dateFromString:[NSString stringWithFormat:@"%d", 2475213]];
    if (date == nil)
        NSLog(@"timeZone = %@", timeZone);
} 
```

你得到以下输出：

```
America/Bahia
America/Campo_Grande
America/Cuiaba
America/Sao_Paulo 
```

谁能解释为什么当 NSDateFormatter 设置为儒略日数时这四个时区的行为如此？所有其他时区使 NSDateFormatter 返回实际的 NSDates。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-16T20:29:02.557

我有一个*怀疑*。只是一种怀疑，但相当强烈的怀疑。

*该值代表 2064 年 10 月 19 日。巴西时区从当地午夜开始*实行夏令时- 那是他们的时钟向前走的时候，所以午夜本身并不存在。10 月 19 日是这些转变之一。

这是一些使用 Noda Time（我的 .NET 日期/时间 API）的示例代码。它检查它所知道的每个时区的一天的开始是否实际上是午夜：

```
using System;
using NodaTime;

class Test
{
    static void Main()
    {
        var localDate = new LocalDate(2064, 10, 19);
        var provider = DateTimeZoneProviders.Tzdb;
        foreach (var id in provider.Ids)
        {
            var zone = provider[id];
            var startOfDay = zone.AtStartOfDay(localDate).LocalDateTime.TimeOfDay;
            if (startOfDay != LocalTime.Midnight)
            {
                Console.WriteLine(id);
            }
        }
    }
} 
```

这会产生一个非常相似的列表：

```
America/Bahia
America/Campo_Grande
America/Cuiaba
America/Sao_Paulo
Brazil/East 
```

我怀疑巴西/东部可能是 America/Sao_Paolo 的别名，这就是为什么它不在您的列表中。

无论如何，回到你的儒略日问题 - 我怀疑格式化程序总是想返回一个`NSDate *`在当地午夜的。在这些时区中，2064 年 10 月 19 日不*存在*这种情况……因此它返回 nil。我个人建议它应该返回 1am 值，但是嘿......

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-17T09:01:31.440

感谢 Jon Skeet 让我走上了正轨。但是，我只想在 iOS 上下文中澄清他的答案。

当您要求 NSDateFormatter 将儒略日数转换为 NSDate 时，您只能在要解析的字符串中指定整数（通常可以指定一天中的小时/分钟/秒的小数部分）。因为Apple在午夜划分朱利安日（与天文学中的中午相反，请在此处阅读更多信息：[http](http://www.unicode.org/reports/tr35/#Date_Field_Symbol_Table) ://www.unicode.org/reports/tr35/#Date_Field_Symbol_Table ）并且一些午夜根本不存在（感谢您指出这一点@JonSkeet）NSDateFormatter 标识该特定时间点在该时区中不存在并返回 nil。

作为记录，iOS5 的行为并非如此，我同意 Jon Skeet 的观点，即 NSDateFormatter 应该返回为 DST 而不是 nil 调整的 NSDate，因为那个特定的朱利安日实际上存在！我向Apple提交了一个错误。

# excel - LIBRE OFFICE / EXCEL 如何从列中获取数据并与字符串连接

> ID：12922647
> 
> 赞同：0
> 
> 时间：2012-10-16T20:09:31.820
> 
> 标签：excel, libreoffice

我该怎么做，例如：

COL(C2).VALUE + ",\n" + COL(D2).VALUE + ",\n" + COL(E2).VALUE

在 excel 或 libre 办公室。

我想用我选择的分隔符将一行中的列值连接成 1 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:20:03.070

在 Excel 中：

```
=C2 & CHAR(10) & D2 & CHAR(10) & E2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:20:38.187

在 excel 中，我总是使用[http://www.mcgimpsey.com/excel/udfs/multicat.html](http://www.mcgimpsey.com/excel/udfs/multicat.html)中的这个函数：

```
 '*****************************************
  'Purpose: Concatenate all cells in a range
  'Inputs:  rRng - range to be concatenated
  '         sDelimiter - optional delimiter
  '            to insert between cell Texts
  'Returns: concatenated string
  '*****************************************

  Public Function MultiCat( _
        ByRef rRng As Excel.Range, _
        Optional ByVal sDelim As String = "") _
             As String
     Dim rCell As Range
     For Each rCell In rRng
        If rCell.Value <> "" Then
         MultiCat = MultiCat & sDelim & rCell.Text
         End If
     Next rCell
     MultiCat = Mid(MultiCat, Len(sDelim) + 1)
  End Function 
```

你这样输入：

```
=multicat(A1:A5,",") 
```

我不能提供关于 Libre 的太多建议——我没有——但我相信你可以为 Libre 找到一个类似的自定义函数。

祝你好运。

# mpi - MPI_BCAST 会广播主节点变量并改变从节点变量吗？

> ID：12922648
> 
> 赞同：-1
> 
> 时间：2012-10-16T20:09:34.647
> 
> 标签：mpi

在以下代码中：

```
if (rank==0) master();
else slave();

...

void master()
{
int i=0;
}

...

void slave()
{
int i=1;
MPI_BCAST(&i,1,MPI_INT,0,COMM);
} 
```

从节点是否会在主节点中广播“i(==0)”并将所有从节点中的“i”值设置为0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:11:08.063

从您发布的内容中有点不清楚您是否拥有正确的语义 - 通信器中的所有进程都必须调用`MPI_BCAST`，这是 MPI 的集体操作之一。然后，您的程序将表现得好像在调用中指定根的进程`MPI_BCAST`将消息发送到指定通信器中的所有其他进程，这些进程反过来接收消息。

您的代码段表明您认为`MPI_BCAST`如果仅在您所谓的“从属”进程上调用 to 就会成功，这是不正确的。

但是，您的调用语法是正确的。

**编辑**回应评论

我相信所有进程都必须执行调用`MPI_BCAST`. 如果按照您的建议，伪代码是这样的：

```
if (myrank == master) then
   do_master_stuff ...
   call mpi_bcast(...)
end if

if (myrank /= master) then
   call mpi_bcast(...)
   do_worker_stuff ...
end if 
```

那么调用将失败；在作业管理或操作系统注意到并将其丢弃之前，您的程序可能会停止。`MPI_BCAST`MPI 中没有跨范围“匹配”对（或任何其他集体通信例程）的调用的机制。

你的伪代码应该是这样的

```
if (myrank == master) then
   do_master_stuff ...
end if

if (myrank /= master) then
   do_worker_stuff ...
end if

! all together now
call mpi_bcast(...) 
```

或您的程序需要的任何变体

# javascript - Highcharts - 未分配没有警报消息的数组

> ID：12922658
> 
> 赞同：1
> 
> 时间：2012-10-16T20:10:36.707
> 
> 标签：javascript, highcharts

试图为这种奇怪的行为寻求帮助。

我设法得到了 highcharts 图表、多个系列等所有设置。使用内联数组中的静态值时，这些值会正确分配给图表，但如果我从 csv 文件中提取数字，除非我暂停执行并显示警报消息，否则不会分配它们。请看下面的代码

```
$(function () {

        // every row on report needs
        // category defined (left side)
        var mycategories = [];

        // every column on report needs
        // seriesname defined
        var headers = [];
        var myseriesnames = []; 

        var lines = [];
        var line_tokens = [];

        // Read data from csv file
        $.get('top10raj.csv', function(data) { 

        // Split the lines
        lines = data.split('\n');
        console.log("First line : "+ lines[0]);

        headers = lines[0].split(',');
        for (var i = 1; i < headers.length; i++) {
            myseriesnames.push(headers[i]);
        }

        //
        // display all lines 
        //
        for (var i = 1; i < lines.length; i++) {

            line_tokens = lines[i].split(',');

            console.log('Equip.No:' + line_tokens[0].trim());   // Equipment Number
            console.log(line_tokens[1].trim());                 // ActualCost
            console.log(line_tokens[2].trim());                 // ActualMaterial
            console.log(line_tokens[3].trim());                 // ActualLabor
            console.log(line_tokens[4].trim());                 // ActualOther

            mycategories.push(line_tokens[0].trim());

            }

        });

        alert('report ready');

        var myarray = [7,6,7,8,7,8,3,4,1,4,7,8,7,5];

        var serObj = [{ 'name': myseriesnames[0], 
                        data:[8,9,8,6,5,2,3,6,5,7,4,5,8,9]
                        },
                    {   'name': myseriesnames[1], 
                        data:[8,5,6,9,8,7,4,5,2,5,8,7,8,6]
                        },
                    {   'name': myseriesnames[2], 
                        data: myarray
                        },
                    {   'name': myseriesnames[3], 
                        data: myarray
                    },                  
            ];

        var chart = new Highcharts.Chart({
            chart: {
                renderTo:'container',
                type: 'column'
            },
            title:{
                text:'Chart Title'
            },
            tooltip:{
                    formatter:function(){
                        return '<b>' + this.series.name + '</b>' +          
                        '<br/><b>Item Number:</b> ' + this.x +                  // X Value
                        '<br/><b>Amount:</b> ' + this.y +                       // Y Value
                        '<br/><b>Other Data:</b> ';// + this.point.note;
                    }
            },          
            credits:{enabled:false},
            legend:{
            },
            plotOptions: {
                series: {
                    shadow:false,
                    borderWidth:0
                }
            },
            xAxis:{
                // Need to define categories for every row 
                // on the report (left side)
                categories: mycategories,
                lineColor:'#999',
                lineWidth:1,
                tickColor:'#666',
                tickLength:3,
                labels: { rotation:45, align:'left'},
                title:{
                    text:'Equipment', 
                }
            },
            yAxis:{
                lineColor:'#999',
                lineWidth:1,
                tickColor:'#666',
                tickWidth:1,
                tickLength:3,
                gridLineColor:'#ddd',
                title:{
                    text:'Amount (USD)',
                    rotation:-90,
                    margin:50,
                }
            },    
            series: serObj

        });

});

EqptNumber,ActualTotal,ActualMaterial,ActualLabor,ActualOther,
111.3207B,666693.61,606564.37,53866.49,6262.75,
106.3355,588647.91,240175.91,322779.00,25693.00,
106.3307,364234.86,266598.36,97636.50,0,
125.L8702A,356025.49,347519.49,8506.00,0,
122.E8801A,340712.89,25483.39,33729.50,281500.00,
127.E2201,319372.29,112362.97,307731.88,100722.56,
107.3251A,310587.25,316225.36,35496.50,41134.61,
622.CW88105,307762.86,7957.36,299805.50,0,
133.1203A,307285.20,40273.19,249658.01,17354.00,
106.3352,278737.48,132009.49,146728.00,0.01,
107.3251ACC,310587.25,316225.36,35496.50,41134.61,
622.CW88105CC,307762.86,7957.36,299805.50,0,
133.1203ACC,307285.20,40273.19,249658.01,17354.00,
106.3352CC,278737.48,132009.49,146728.00,0.01, 
```

我正在使用的 csv 文件显示在源代码的底部。

如果以下行

```
alert('report ready'); 
```

被注释掉，我丢失了所有类别标签，它们被沿 X 轴的 0..1,2,3.. 等取代。努力理解为什么会发生这种情况，但到目前为止还没有修复的运气。感谢我能得到的任何帮助，因为我真的想将 Highcharts 库与动态数据一起使用，并且仅使用来自预定义数组的静态数据是非常有限的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:27:53.313

问题是您对 csv 文件 ( [$.get](http://api.jquery.com/jQuery.get/) ) 的请求是异步执行的，这意味着您的其余代码在返回数据之前正在运行。尝试将您的代码移动到回调函数中，例如

```
//..your code
mycategories.push(line_tokens[0].trim());

            }
      //moved your code here
      var myarray = [7,6,7,8,7,8,3,4,1,4,7,8,7,5];

        var serObj = [{ 'name': myseriesnames[0], 
                        data:[8,9,8,6,5,2,3,6,5,7,4,5,8,9]
                        },
                    {   'name': myseriesnames[1], 
                        data:[8,5,6,9,8,7,4,5,2,5,8,7,8,6]
                        },
                    {   'name': myseriesnames[2], 
                        data: myarray
                        },
                    {   'name': myseriesnames[3], 
                        data: myarray
                    },                  
            ];

        var chart = new Highcharts.Chart({
            chart: {
                renderTo:'container',
                type: 'column'
            },
            title:{
                text:'Chart Title'
            },
            tooltip:{
                    formatter:function(){
                        return '<b>' + this.series.name + '</b>' +          
                        '<br/><b>Item Number:</b> ' + this.x +                  // X Value
                        '<br/><b>Amount:</b> ' + this.y +                       // Y Value
                        '<br/><b>Other Data:</b> ';// + this.point.note;
                    }
            },          
            credits:{enabled:false},
            legend:{
            },
            plotOptions: {
                series: {
                    shadow:false,
                    borderWidth:0
                }
            },
            xAxis:{
                // Need to define categories for every row 
                // on the report (left side)
                categories: mycategories,
                lineColor:'#999',
                lineWidth:1,
                tickColor:'#666',
                tickLength:3,
                labels: { rotation:45, align:'left'},
                title:{
                    text:'Equipment', 
                }
            },
            yAxis:{
                lineColor:'#999',
                lineWidth:1,
                tickColor:'#666',
                tickWidth:1,
                tickLength:3,
                gridLineColor:'#ddd',
                title:{
                    text:'Amount (USD)',
                    rotation:-90,
                    margin:50,
                }
            },    
            series: serObj

        });

        });

        //here's where  the alert used to be
       ///alert('report ready');
}); 
```

# c - SaveBMPFile 未定义引用

> ID：12922662
> 
> 赞同：-4
> 
> 时间：2012-10-16T20:11:10.437
> 
> 标签：c, winapi, screenshot

我从这里得到了代码片段：[link](https://stackoverflow.com/questions/3370702/c-take-screenshot)

错误是：未定义的引用`SaveBMPFile` 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:14:17.210

看起来您使用的代码最初是从[这个论坛帖子](http://www.daniweb.com/software-development/cpp/threads/119804/screenshot-maybe-win32api#post593378)中复制的。请注意，它说“附加了上面引用的 SaveBMPFile 函数（我没有写）”并提供了一个包含定义[的附件。](http://static.daniweb.com/images/attachments/0/saveBMP.cpp)

# mercurial - 我们如何将特定分支移动到新存储库并保持连接回来？

> ID：12922663
> 
> 赞同：0
> 
> 时间：2012-10-16T20:11:15.950
> 
> 标签：mercurial

这是我想做的：

*   我们有一个 5.X 产品的存储库。
*   我们有 5.0、5.1、5.2、5.3 等的分支。
*   我们即将推出 6.0。
*   我们想为 6.X 创建一个全新的存储库。

然而，问题来了。我们希望能够：

*   将新的 6.X 存储库建立在 5.x 存储库的“最右侧”尖端。

    *   也就是“5.last”分支
*   迁移/合并前向维护更改和我们对 5.X 分支所做的其他修复，从那里到 6.X 存储库。

换句话说，我们希望有两个存储库，就像一个大存储库一样。

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:47:22.617

“Mercurial 分支指南”，混合[使用克隆](http://stevelosh.com/blog/2009/08/a-guide-to-branching-in-mercurial/#branching-with-clones)分支和[使用命名分支进行分支](http://stevelosh.com/blog/2009/08/a-guide-to-branching-in-mercurial/#branching-with-named-branches)

您将使用这两种方法

*   带有开发分支 V5 的 Repo R5
*   带有开发分支 V6 的 Repo R6

无论 R6 将如何启动：克隆并剥离旧的变更集，从 R5 导出提示并将其作为第一个 cset 添加到 R6。*只有结果才有意义：主线开发*分支名称不同的 R5 和 R6

 *“Foreign”存储库必须出现在路径部分，并通过带有 -b 选项的 pull|push 执行同步，其中 -b 中的 BRANCHNAME 是*外部 repo 中主线开发的分支名称*

在 pu(ll|sh) 之后合并分支，玩得开心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:31:48.097

这是不可能的，因为没有祖先节点就无法存在。变更集只不过是与其父亲的差异。如果您希望 Repo6 从 Repo5 接收变更集，则它必须包含整个内容。*

# reporting-services - 如果 Tablix 单元格中的第一个文本框跨越分页符，则它会击败其他文本框的 CanGrow

> ID：12922665
> 
> 赞同：1
> 
> 时间：2012-10-16T20:11:27.660
> 
> 标签：reporting-services, textbox, ssrs-2008, page-break

当第一个文本框被分页符破坏时，SSRS 在 Tablix 内的文本框中处理长文本的方式存在问题。这是简化的设置：

* * *

1.  使用单个单元格创建 Tablix。
2.  向该单元格添加一个矩形。
3.  向该矩形添加 2 个文本框，一个在另一个下方。
4.  确保两个文本框的 CanGrow = True。
5.  向每个文本框添加数据，使每个文本框包含多行，并且第一个包含足够的行以强制其中一些行超出页面末尾。出于测试目的，它有助于将页面高度设置为 1 英寸等荒谬的值。

* * *

*需要在打印布局模式下预览报表或将其导出为 PDF*，才能看到第一个 Textbox 中的所有行都打印出来，但第二个 Textbox 只打印第一行。从第一个文本框中取出足够多的行以避免将其拆分到一个页面中，这将允许第二个文本框打印其所有行。

我错过了什么吗？有没有办法让 Tablix 在分页符之间正常运行？这是 Tablix，因为将 Rectangle 和 Textboxes 移到 Tablix 之外可以解决问题。我在 Rectangle 或 Tablix 上看不到 CanGrow 或类似属性。一种解决方法是将每个文本框放入其自己的 Tablix 行中，但这在我的情况下并不理想。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:36:03.413

我能够重现该问题，但看起来有一个简单的解决方法：

如果您将第二个矩形嵌套在第一个矩形中，然后将第二个文本框嵌套在该矩形中，那么我的 pdf 就会正确显示。我用 BIDS 2008R2、11x8.5（横向）页面尝试了这个。

# php - 从当前页面获取特定的href

> ID：12922667
> 
> 赞同：0
> 
> 时间：2012-10-16T20:11:58.607
> 
> 标签：php, dom

试图从当前页面中提取一个 href 路径（#navbar a href 以 $pg 结尾）。

在第一个 foreach 上收到警告：

```
file_get_contents() [function.file-get-contents]: Filename cannot be empty. 
```

我怎样才能解决这个问题？

```
<?php
include_once 'path/to/simple_html_dom.php';

$pg = 'c.html';
echo 'Page: ' . $pg . "<br />"; // Correct: c.html
$cpath = $_SERVER['REQUEST_URI'];
echo var_dump($cpath).": Current Path"."<br />";  // Correct: /copyr/index.php
$cfile = basename($cpath);
echo 'Current File: ' . $cfile . "<br />";  // Correct: index.php
$html = file_get_html($cfile);

foreach($html->find(sprintf('#navbar a[href=%s]', $pg)) as $path) {  // BROKEN
    echo 'Path: ' . $path."<br />";
    $tpath = $path."/".$pg;
    echo 'Total Path: ' . $tpath;
    $html->clear();
}

$html = file_get_html($tpath);

foreach($html->find('#testdiv2') as $ret) {
  echo $ret;
  $html->clear();
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:19:42.197

`basename`返回路径的最后一部分。如果`REQUEST_URI`以`/`(结尾`http://yourdomain.arg/`，则 basename 返回一个空字符串，而`file_get_html`需要一个 uri 或文件名。

# c# - MonoTouch.Dialog 仅图像单元格

> ID：12922669
> 
> 赞同：3
> 
> 时间：2012-10-16T20:12:06.047
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

我正在开发一个应用程序，用户可以在其中输入一些数据，然后用相机或设备拍摄图像。

我遇到的问题是我似乎无法让单元格或元素只显示图像。图像的宽度将是它所在的单元格（分组样式）的宽度。我想指定自己的高度。

我试图继承 ImageElement 但不能改变它的大小。

是否已经是我可以使用的元素，还是有其他好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:30:51.093

尝试将 UIViewElement 与 UIImageView 一起使用：

```
var imageView = new UIImageView(new RectangleF(0, 0, 300, 100));
imageView.ContentMode = UIViewContentMode.Center;
var element = new UIViewElement(String.Empty, imageView, true); 
```

# javascript - 将 ASP.net AJAX 计时器与 javascript 倒计时相结合

> ID：12922672
> 
> 赞同：0
> 
> 时间：2012-10-16T20:12:16.027
> 
> 标签：javascript, asp.net, asp.net-ajax

我目前正在将 vb.net winforms 程序移植到基于 Web 的版本，并且原始程序中的一个功能已被难倒。

在原始程序中，每 5 分钟会弹出一个表单供用户输入。主窗体上还有一个标签控件，可以倒计时到下一个弹出窗口。这是通过一个持续时间为 1 秒的定时器控制来实现的。每次滴答，它都会减少倒计时，当倒计时达到0时，它会弹出表单然后重置。很简单，但在我的网络应用程序中，我无法承受每秒都进行回发，所以我试图将 javascript 倒计时小部件与 AJAX 计时器结合起来。本质上，应该发生的是，当页面加载时，倒计时从 300 秒开始递减，而 AJAX 计时器从 300 秒的持续时间开始。我的想法是，当计时器滴答作响时，它将运行我的功能，并将倒计时再次重置为 300 秒。

我的问题是我无法使用我拥有的代码重置倒计时，而且我知道我做错了一些事情（可能非常简单），但我对 Java 的了解不够多，无法知道是什么。

如果我将 Timer var 硬编码为 300，则倒计时有效，并且计时器滴答作响（触发附加功能），但倒计时只是继续倒计时（变为负数）。如何从后面的代码中重置倒计时变量？

这是倒计时功能

```
 var Timer = <%= CountDown %>;

    function updateClock() {

        // Update Countdown
        Timer -= 1;
        var TimerMin = Math.floor(Timer / 60);
        var TimerSec = Timer - (TimerMin * 60);
        TimerSec = (TimerSec < 10 ? "0" : "") + TimerSec;
        var TimerFormat = TimerMin + ":" + TimerSec;

        // Update the countdown display
        document.getElementById("javaCountdown").firstChild.nodeValue = TimerFormat
    } 
```

这是正文代码

```
<body onload="updateClock(); setInterval('updateClock()', 1000 )"> 
```

以及背后的代码

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Countdown = 300
End Sub

PProtected Sub Timer1_Tick(ByVal sender As Object, ByVal e As EventArgs) Handles Timer1.Tick
    Countdown = 300
    'Additional Functions
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:32:24.563

此解决方案使用 jQuery。

```
<script>

    var intervalSecond = null;
    var interval5minutes = null;

    $(document).ready(function() {

      // enable both intervals
      enableIntervals();

      // onsubmit event for your form
      $("#popupForm").submit(function() {

         // hide the form again
         $("#popupForm").css("display", "none");

         // enable intervals again.
         enableIntervals();
      });
    });

    function enableIntervals() {

      // every second interval
      intervalSecond = setInterval(function() {
        $("#updateMeEverySecond").html(new Date());
      }, 1000);

      // every 5 minutes interval
      interval5minutes = setInterval(function() {

        // display form and shut off the interval timers
        $("#popupForm").css("display", "block");
        clearInterval(intervalSecond);
        clearInterval(interval5minutes);
      }, 5 * 60 * 1000);
    }

</script>

<div id="popupForm" style="display:none;">
  <form>
    <input type="text" />
  </form>
</div>
<label id="updateMeEverySecond">Test</label> 
```

# jquery - 如果视口太小，jQuery 自动垂直滚动

> ID：12922677
> 
> 赞同：0
> 
> 时间：2012-10-16T20:12:44.803
> 
> 标签：jquery, scroll

我制作了一个全屏显示的基于 HTML 的信息屏幕。我使用几个 jQuery 脚本来为屏幕设置动画，例如，我在一个标签列表中循环，`<article>`这些标签在屏幕上一一显示。问题是这些“文章”中的一些对于屏幕来说太长了。所以理想情况下，我想检测这些文章何时太长（最好的触发可能是垂直滚动条变得可见），并且在这种情况下，我希望文本在指定的时间段内自动向下滚动。

我见过几个滚动和幻灯片插件，它们显示了其中的一些功能，但不是全部。你知道一个（jQuery）插件我可以很容易地实现我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:24:21.993

要使用 jQuery 检测滚动条何时可见，您可以使用此代码段：`var hasVerticalScrollbar = element.scrollHeight>element.clientHeight;`它将根据滚动条是否可见返回 true 或 false。

然后，您可以使用[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)检查变量的结果，如果它的值为真，则使用 jQuery 的[`.scrollTop()`](http://api.jquery.com/scrollTop/)函数向下滚动。

# intersystems-cache - 使用“import”的正确语法是什么？

> ID：12922678
> 
> 赞同：1
> 
> 时间：2012-10-16T20:12:44.980
> 
> 标签：intersystems-cache, objectscript

据此，我应该能够有多个这样的导入语句[：](http://docs.intersystems.com/ens20122/csp/docbook/DocBook.UI.Page.cls?KEY=ROBJ_class_import)

```
import class1, class2, class3, class4

Class MyApp.MyClass {} 
```

代码通过一次导入进行编译，但是一旦我放置多个，代码就无法编译。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:38:18.870

我在文档中找不到它，但是

```
import (class1, class2, class3, class4)

Class MyApp.MyClass {} 
```

似乎工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T20:45:11.953

[文档](http://docs.intersystems.com/cache20121/csp/docbook/DocBook.UI.Page.cls?KEY=ROBJ_class_import)
不止一个包，需要带括号

# ios - 简单添加到数据库的 CoreData 错误

> ID：12922686
> 
> 赞同：-1
> 
> 时间：2012-10-16T20:13:18.713
> 
> 标签：ios, xcode, core-data, input

编辑：我试图找出的错误消息位于代码的右侧，列为注释！！！

Xcode 不断尝试提出替代方案并拒绝让我构建。这 3 个列在代码右侧的注释标记中。他们的意思是什么？我对使用核心数据非常陌生，真的希望看看我做错了什么，只是以用户名为例（我知道我不应该这样做）！

```
- (IBAction)saveData:(id)sender {
    NSManagedObjectContext *cxt = [self managedObjectContext];       //instance method managedObjectContext not found
    NSManagedObject *newContacts = [NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:cxt];
    [newContacts setValue:self.username.text forKey:@"username"];          //insert NSManagedObjectModel instead of NSManagedObject...claims that it is undeclared?
    username.text = @"";

    NSManagedObject *newContacts = [NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:cxt];     //trying to replace NSEntityDescription with KSecAttrDescription...claims that it is undeclared      
    [newContacts setValue:self.password.text forKey:@"password"];
    password.text = @"";

    NSError *err;
    if (![cxt save:&err]) {
        NSLog(@"An error has occured: %@", [err localizedDescription]);      //Instance Method -save not found
    }           

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:16:13.180

CoreData 代码看起来不错，但您使用`NSManagedObject *newContacts`了两次，只需使用另一个变量名或删除 `NSManagedObject *`第二个对象。

另外，我建议您为对象创建类以直接访问变量而不是`[obj setValue:value forKey:@"key"];`

当然，很高兴看到错误输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:52:45.340

解决了！但是，这是从先前对这个问题的回答中自行删除的，所以我将功劳归功于那个不知名的人。如果将来有人遇到此错误，请单击 core data.xcdatamoldeld，然后单击菜单栏（桌面）上的 Editor 部分，然后单击 set NSManagedObject Subclass 并添加它们。它应该工作。

# php - 将 mcrypt 与 phalanger 一起使用

> ID：12922689
> 
> 赞同：0
> 
> 时间：2012-10-16T20:13:39.457
> 
> 标签：php, asp.net, phalanger

如何使用像 mcrypt 这样的 php 扩展？我的第一个想法是找到 mcrypt.php 并简单地包含它（context.Include("mcrypt.php", false);)，但当然它不存在，因为它是用 C 编写的。
我正在阅读[写作编译PHP 中的 PHP 扩展](http://www.php-compiler.net/blog/2012/php-extension-in-php)来自博客，但这似乎是关于创建您自己的扩展以在 .net 中使用。但考虑到这句话，我可能错了：“在 PHP 语言中实现 Phalanger 扩展。当你使用你的 PHP 库并使用 Phalanger 编译它时，结果是 DLL 像任何其他扩展一样工作”但即使仍然 phpc（phalanger php 编译器）不会据我所知编译c代码虽然我还没有尝试过。

这些是我的 php 类试图进行的调用： mcrypt_module_open mcrypt_enc_get_key_size mcrypt_enc_get_block_size

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:19:39.367

mcrypt 尚未作为托管 Phalanger 扩展重新实现......如果您知道一些开源替代方案，我可以帮助移植到 Phalanger 扩展。

目前，您可以使用本机替代方案（因此您必须在 x86 中运行）。只需打开您的 .config（web.config 用于 Web 应用程序，或创建 app.config 用于桌面应用程序），然后添加以下内容

```
<phpNet>
    <classLibrary>
        <add assembly="php_mcrypt.mng, Version=3.0.0.0, Culture=neutral, PublicKeyToken=4ef6ed87c53048a3" section="mcrypt" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:47:29.263

Jakub Míšek 的回答绝对正确，如果这篇文章对您有帮助，请也给他投票。然而，我想简化他所说的话，因为他的建议仍然让我花了一些时间来理解他在说什么。如果你有机会阅读这篇文章，如果我对任何事情有误，也请 Jakub 纠正我。

让我知道他的答案的第一件事就是这个文件

> php_mcrypt.mng

mng那是什么？？？但是在挖掘了他们的 [Phalanger] svn 和位于

> C:\Program Files\Phalanger 3.0\Wrappers

我找到了 mcrypt 文件。另外在 php 聊天室的帮助下，我得到了关于 mng 是什么的线索，[Managed Code](http://en.wikipedia.org/wiki/Managed_code)。

因此，在添加文件作为参考以及编辑 web.config 文件以包含它之后（如 Jakub 所示）

```
 <phpNet>
    <classLibrary>
      <add assembly="php_mcrypt.mng, Version=3.0.0.0, Culture=neutral, PublicKeyToken=4ef6ed87c53048a3" section="mcrypt" />
    </classLibrary>
    <scriptLibrary/>
  </phpNet> 
```

这些行必须输入到 Phalanger 以在编译时加载此扩展（我认为/知道）。

之后，一切似乎都可以编译并运行良好！谢谢雅库布

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-16T20:55:01.713

安装和使用 MCrypt 并不复杂。[对于 *nix 用户，PHP.net在此页面中](http://br2.php.net/manual/en/mcrypt.installation.php)提供了信息来源。

但对于 Windows，没有太多信息。

不过也很容易。您只需从 PHP 二进制文件中复制**libmcrypt.dll**文件，将其保存在**ext**目录中并启用它：

```
extension=php_mcrypt.dll 
```

注意：在 WINDOWS 环境中，PHP 扩展通常以**php_**命名，因此您必须重命名 DLL 或上面的 PHP.INI 行。

之后，重新启动 Apache。

但在执行此操作之前，请先检查您的 phpinfo()，因为某些软件包和/或发行版带有预编译的静态 MCrypt。

运行它并检查**with-mcrypt=static**和/或*启用 mcrypt 支持的MCrypt 组*

# php - 多词查询

> ID：12922692
> 
> 赞同：0
> 
> 时间：2012-10-16T20:13:45.943
> 
> 标签：php, sql

我有一个搜索引擎，它扫描给定网页中的所有单词，然后显示它们的出现。然后按照单词在文档中出现的次数对它们进行排名。但它不会返回多个术语查询。

下面是我的 SQL 查询。我希望能够让它检查所有输入的单词，然后按单词在文档中出现的次数进行排名。它目前仅适用于单项查询。

```
 $result = mysql_query(" SELECT p.page_url AS url,
                       COUNT(*) AS occurrences 
                       FROM page p, word w, occurrence o
                       WHERE p.page_id = o.page_id AND
                       w.word_id = o.word_id AND
                       w.word_word = \"$keyword\"
                       GROUP BY p.page_id
                       ORDER BY occurrences DESC
                       LIMIT $results" ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:41:37.807

我将使用 MATCH-AGAINST，这对于像搜索引擎这样的 MySQL 优化搜索应该更好。您应该查看全文搜索：http: [//dev.mysql.com/doc/refman/5.5/en//fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)

注意：在 MySQL 表中，应将索引编辑为数据库表中关键字行的 FULLTEXT。这将为搜索提供更好的性能。

例子：

输入关键字示例：

$keywords = '+Word+Word2+Word3';

```
SELECT p.page_url AS url,
COUNT(*) AS occurrences, MATCH('w.word_word') AGAINST ('$keywords') as keyword FROM page p, occurrence o, w.word WHERE MATCH
('w.word_word') AGAINST('{$keywords}' IN 
BOOLEAN MODE) 
AND p.page_id = o.page_id AND w.word_id = o.word_id
GROUP BY p.page_id
ORDER BY occurrences DESC
LIMIT $results 
```

如果您的查询未优化（组太多、where 子句和条件），则在其他去优化模式下或有降低服务器性能的风险。而不是这个，您可以在 MySQL 中使用 REGULAR EXPRESSION 例如：

```
REGEXP "/(honda)|(jazz)|(manual)/" 
```

这也将使用正则表达式获得良好的性能（不推荐用于大型数据库）：

做一个循环并计算它而不是放入 REGEXP：

```
$keywords = "keyword1,keyword2,keyword3";

$expl = explode("," $keywords);

if (count($expl) == 1)
{
    $all = w.word_word REGEXP = '[[:<:]]$keywords[[:>:]]';
}
else
{
    $all = '';
    foreach ($expl as $keyone)
    {
        $all .= 'OR '.w.word_word REGEXP = '[[:<:]]$keyone[[:>:]]';
    }
}

$sql =  'SELECT p.page_url AS url,
COUNT(*) AS occurrences 
FROM page p, word w, occurrence o
WHERE p.page_id = o.page_id AND
w.word_id = o.word_id AND
$all
GROUP BY p.page_id
ORDER BY occurrences DESC
LIMIT $results';

$result_query = mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:30:29.867

如果你想得到所有的话，那么你的加入条件将不允许你这样做

```
w.word_word = \"$keyword\" 
```

您的查询可以写成如下

```
$sql = "SELECT p.page_url as url, COUNT(*) as occurences "
     . "FROM page p "
     . "INNER JOIN occurence o ON p.page_id = o.page_id "
     . "INNER JOIN word w ON w.word_id = o.word_id "
     . "GROUP BY p.page_id "
     . "ORDER BY occurences DESC "
     . "LIMIT {$results}";
$result = mysql_query($sql); 
```

这将抓取`word`表格中的所有单词，从而为您提供（据我所知）需要的结果。

如果您对几个词感兴趣，那么您可以使用该`IN`语句（正如 Dev 在评论中所建议的那样），您的查询将变为：

```
$my_keywords = array('apple', 'banana');
// This produces: "apple", "banana" and assumes that all of your 
// keywords are in lower case. If not, you can transform them to lower
// case or if you don't want that, remove the LOWER() function below 
// from the WHERE
$keywords    = '"' . implode('","', $my_keywords) . '"';
$sql = "SELECT p.page_url as url, COUNT(*) as occurences "
     . "FROM page p "
     . "INNER JOIN occurence o ON p.page_id = o.page_id "
     . "INNER JOIN word w ON w.word_id = o.word_id "
     . "WHERE LOWER(w.word_word) IN ({$keywords}) "
     . "GROUP BY p.page_id "
     . "ORDER BY occurences DESC "
     . "LIMIT {$results}";
$result = mysql_query($sql); 
```

最后，尝试使用`mysqli`代替`mysql`，或 PDO。

高温高压

# python - 从同一目录中检索多个文件

> ID：12922693
> 
> 赞同：1
> 
> 时间：2012-10-16T20:13:56.780
> 
> 标签：python, python-2.7, text-files

我正在创建一个有 25 个按钮的 GUI 程序，每个按钮访问同一个文件夹中的一个唯一文件，我知道我可以单独编程每个按钮以访问每个文件，但这似乎比需要的代码多得多，是有更有效的方法吗？这是代码：

```
box1 = 'C:/Users/Geekman2/Documents/Tests/box1.txt
cupcake = Button(donut,text = "Box #1", command = open(box1)) 
```

这样做我将不得不为每个文件创建一个变量，效率不高

PS如果你感到困惑，我用糕点命名我的所有变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:40:40.317

我会尝试类似这样的代码片段：

```
directory = 'C:/Users/Geekman2/Documents/Tests/'
...
def AddDirTo(filename)
     return directory + filename 
```

然后您发布的代码将变成：

```
box1 = AddDirTo('box1.txt') #note: you did close box1's quote on your question
cupcake = Button(donut,text = "Box #1", command = open(box1)) 
```

如果您拥有的每个文件都是文本文件，如问题的说明所示，您甚至可以制作它：

```
directory = 'C:/Users/Geekman2/Documents/Tests/'
extension = '.txt'
...
def AddDirTo(filename):
     return directory + filename + extension
...
box1 = AddDirTo('box1') #note: you did close box1's quote on your question
cupcake = Button(donut,text = "Box #1", command = open(box1)) 
```

对于那些将投票否决顶部的`directory`和`extension`变量的人，它使代码可重用于其他目录和扩展，而无需创建新函数。

# debugging - 您可以从 Visual Studio 2012 直接调试到 Microsoft Surface（或任何 Windows 8 RT 平板电脑）吗？

> ID：12922695
> 
> 赞同：6
> 
> 时间：2012-10-16T20:14:09.420
> 
> 标签：debugging, windows-8, windows-runtime, visual-studio-2012

我还没有找到任何文档说明您是否可以像在 iPad 或 Android 设备上一样从基于 Windows 8 RT 的平板电脑（例如新的 Microsoft Surface）上运行调试应用程序。

有谁知道这是否可能，如果可能（或不可能），是否有任何文件指向此类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T20:19:40.530

是的，Visual Studio 远程调试支持调试在 ARM 目标上运行的应用。您可以找到更多信息[“关于在 ARM (WOA) 上开发 Windows 所需了解的内容”。](http://blogs.msdn.com/b/jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm-woa.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T20:34:47.340

Visual Studio 具有用于处理外部设备和其他计算机的远程调试工具。在 Windows 应用商店应用程序项目中，您转到项目属性并单击调试选项卡。在下拉[调试设置中选择目标设备（点击查看屏幕截图）](http://i.stack.imgur.com/5xkqT.png)

您需要在平板电脑和开发计算机上设置远程调试服务。这些设备需要位于同一网络子网中。我不确定这将如何在 Surface ARM 设备上运行，因为它们无法加入域。我想一旦硬件发货我们会知道更多。

[在Visual Studio 下载](http://www.microsoft.com/visualstudio/eng/downloads)处获取您的远程调试工具。

Jason Zander 有一篇[关于使用 ARM](http://blogs.msdn.com/b/jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm-woa.aspx)设备的帖子可能会有所帮助。

# pdf - SSRS 导出到 PDF 页脚打印在最后一页问题

> ID：12922701
> 
> 赞同：2
> 
> 时间：2012-10-16T20:14:37.860
> 
> 标签：pdf, reporting-services, footer, ssrs-2008-r2

嗨，我已经与 SSRS 合作了很长时间，这是我第一次看到这样的事情，所以我想我会把它发布在那里，看看其他人是否有这个问题以及他们是如何解决的，首先是一些我的环境背景。

Windows 版本：Windows 7 企业
版 SSRS 版本：SSRS 2008 R2

问题如下，我有一份报告，在页脚我将其设置为仅在最后一页上打印。如果报告是一页或两页长，则可以正常工作，仅在第一页底部打印页脚信息是一页，如果是两页，则在第二页的底部打印。问题是当页面大于 2 页时，我没有按预期在第一页上获得页脚，但是之后的每一页都显示了页脚。我真的被这个难住了，检查了我的设置，在盯着它看了一会儿后，没有看到任何吸引我眼球的东西。提前感谢您的建议和帮助。麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T15:01:57.797

为了解决这种奇怪的行为，我将页脚的所有元素放在一个矩形框中，并在此框上添加了可见性条件“=Globals!PageNumber<>Globals!TotalPages”。在页脚属性中，我选中了最后一页框。

我工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:47:14.520

我认为该属性`PrintOnLastPage`的行为可能与您的预期不同：它是一种选择退出机制而不是选择加入机制。从您的问题看来，您似乎期望此属性的行为就像它被调用`Print *Only* OnLastPage`而不是`PrintOnLastPage`.

您不能将页脚设置为仅打印在最后一页*上*。
您只能将其设置为打印在最后一页，是或否。

我怀疑你被抛弃的原因是因为你也可能设置`PrintOnFirstPage`为 false。报告有 2 页的行为就好像*它只*显示最后一页的页脚。但是，对于 3 页的报告，它将在第 2 页*和*第 3 页显示页脚，对于 4 页的报告，它将在 2/3/4 显示页脚，依此类推。

总结一下：

```
 | OnFirstPage = True     | OnFirstPage = False
-------------------|------------------------|----------------------
OnLastPage = True  | footer everywhere      | footer on all pages 
                   |                        | except first
-------------------|------------------------|----------------------
OnLastPage = False | footer on all pages    | footer on all pages  
                   | except last            | except first and last 
```

有关详细信息，请参阅[PrintOnFirstPage](http://msdn.microsoft.com/en-us/library/microsoft.reportingservices.reportrendering.pagesection.printonfirstpage%28v=sql.105%29.aspx)和[PrintOnLastPage](http://msdn.microsoft.com/en-us/library/microsoft.reportingservices.reportrendering.pagesection.printonlastpage%28v=sql.105%29.aspx)的 MSDN 页面。

# python - 改变一个扭曲的列表：幕后发生了什么

> ID：12922706
> 
> 赞同：2
> 
> 时间：2012-10-16T20:15:30.397
> 
> 标签：python, list

在 python 中，您可以像这样更改列表：

```
In [303]: x = [1,2,3,4,5,6]

In [304]: x[x <= 3]+=3

In [305]: x
Out[306]: [4, 2, 3, 4, 5, 6] 
```

我已经知道这件事有一段时间了，但我认为我并不完全了解幕后发生的事情。如果有人愿意花时间解释，我会很高兴。

```
In [307]: x = [1,2,3,4,5,6]

In [308]: dis.dis('x[x <= 3]+=3')
          0 SETUP_LOOP      30811 (to 30814)
          3 SLICE+2        
          4 STORE_SUBSCR   
          5 DELETE_SUBSCR  
          6 SLICE+2        
          7 DELETE_SLICE+1 
          8 FOR_ITER        15659 (to 15670)
         11 DELETE_SLICE+1 

In [309]: x
Out[309]: [1, 2, 3, 4, 5, 6]

In [310]: x[x <= 3]+=3

In [311]: x
Out[311]: [4, 2, 3, 4, 5, 6]

In [312]: x<=3
Out[312]: False

In [313]: x[False]+=3

In [314]: x
Out[314]: [7, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T20:17:51.910

`x <= 3`是一个布尔表达式。由于在 Python 中，`boolean`类型是 的子类`int`，`False`结果被解释为`0`，所以最终效果是：

```
x[0] += 3 
```

或者，以不同的方式展示：

```
>>> False == 0
True
>>> True == 1
True
>>> isinstance(False, int)
True 
```

该`dis.dis()`方法不适用于字符串；它适用于代码对象（或包含代码的东西，例如函数、方法、类或模块）或字节码。它似乎能够解码您的字符串这一事实是一个快乐的巧合。`SETUP_LOOP`是操作码 120（ 的 ASCII 值`x`），整个字符串被解释为一组操作码和偏移量。

改用函数：

```
>>> def foo(): x[x <= 3]+=3
... 
>>> dis.dis(foo)
  1           0 LOAD_GLOBAL              0 (x)
              3 LOAD_GLOBAL              0 (x)
              6 LOAD_CONST               1 (3)
              9 COMPARE_OP               1 (<=)
             12 DUP_TOPX                 2
             15 BINARY_SUBSCR       
             16 LOAD_CONST               1 (3)
             19 INPLACE_ADD         
             20 ROT_THREE           
             21 STORE_SUBSCR        
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

# ruby - @driver.find_element(:id=>"body").text.include?(textcheck) 不验证文本只验证 id

> ID：12922708
> 
> 赞同：0
> 
> 时间：2012-10-16T20:15:38.830
> 
> 标签：ruby, selenium, webdriver

我正在为 Ruby 使用 Selenium-WebDriver，并且我正在尝试验证页面上是否存在文本。我已经做了很多搜索并尝试了很多东西，我发现最好的答案是使用类似的东西

```
 def check_page(textcheck)
  if verify {@driver.find_element(:id=>"body").text.include?(textcheck)}
    yield it_to "fail"
  else
    yield it_to "pass"
  end
  end 
```

如果正文中存在 textcheck 的值，则预期结果将通过，如果正文中不存在 textcheck 的值，则将失败。实际发生的情况是，如果 :id=>"body" 存在，则通过，如果不存在，则无论 .text.include 是什么都失败？（textcheck）

如果有人能指出我正确的方向，如何使用 Ruby 中的 Selenium-WebDriver 验证页面上是否存在文本，我们将不胜感激。对于某些我可以做的情况，我找到了解决方法

```
verify {@driver.find_element(:tag_name, 'h1').text!=(textcheck)} 
```

但我试图验证的元素我不能那么容易地得到。我研究了 css 定位器，对如何简化标签以便我可以使用它感到非常困惑。任何帮助将不胜感激。非常感谢你。如果您需要我提供更多信息，请告诉我，我会尽快提供。

我在 Firefox 14.0.1 中使用 Ruby 1.93 和 Selenium-WebDriver 2.25 测试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:51:50.980

我这样做

```
@wait = Selenium::WebDriver::Wait.new(:timeout => 30)
begin
  @wait.until { @driver.find_element(:tag_name => "body").text.include?("your text")}
rescue  
  puts "Failure! text is not present on the page"
  #Or do one of the options below
  #raise
  #assert_match "true","false", "The text is not present"
end 
```

更新

* * *

在评论部分回答您的问题。

有两种“等待”，隐式等待和显式等待。[你可以在这里](http://seleniumhq.org/docs/04_webdriver_advanced.html)阅读更多关于它的信息。您的代码失败的原因是您搜索的是“id”=>“body”而不是“tag_name”=>“body”。通常，所有文本都包含在 DOM 中的“body”HTML 标记中。

# iphone - 带有动画的自定义消息视图

> ID：12922709
> 
> 赞同：0
> 
> 时间：2012-10-16T20:15:54.783
> 
> 标签：iphone, objective-c, xcode

目标是在给定位置的任何给定视图中出现一条消息，其中包含动画持续时间和用于从父视图中移除的计时器：
![在此处输入图像描述](../Images/8745fc8db648df6185a9f07ffd790e5c.png) 创建一个返回视图的 NSObject，这几乎是我目前所拥有的。我想避免在我的视图控制器中实现很多委托方法，除非通知已被删除。

非常感谢可以帮助我朝着正确方向发展的资源链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:27:40.997

为了实现这一点，我使用[WBNoticeView](https://github.com/tciuro/NoticeView)。它易于使用，并提供可用于任何视图的错误视图和成功视图。如果您想要不同的外观，您可以自定义它更改背景和错误或成功图像。

# mysql - 将 MySQL 数据导出到创建多个页面的 RTF 模板

> ID：12922710
> 
> 赞同：1
> 
> 时间：2012-10-16T20:15:58.627
> 
> 标签：mysql, loops, header, content-type

只要我只有 1 行，从数据库中提取的数据就可以毫无问题地插入到 RTF 模板中。但是，如果我将我`header("Content-type: text/rtf")`的放在循环中，我会收到一个标头已发送错误。从代码中删除标头时，原始数据会在浏览器窗口中正确打印。

如何组合数据库中多条记录的数据以创建多个文档（或 1 个带分页符的文档）？

代码在这里：

```
$document='../docs/letter.rtf';
$qry="Select * from table";
$result=mysql_query($qry);
$num_row=mysql_num_rows($result);

while($row=mysql_fetch_assoc($result)){
$account_id=$row['pk_account];
$name=$row['first_name'];
$file_doc='01-'.$pk_account.'.rtf';
....

$body=file_get_contents($document);
$body=str_replace("NAME", $name, $body);
....

for($i=0; $i<$num_rows; $i++){
}

header("Content-type: text/rtf");
header("Content-Disposition:attachment; filename={$file_doc}");
echo $body;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:49:19.037

你需要连接你的 $body。所以代替这个：

```
$body=file_get_contents($document);
$body=str_replace("NAME", $name, $body); 
```

尝试这个：

```
$body.=str_replace("NAME", $name, file_get_contents($document)); 
```

然后把它放在你的while循环之外：

```
header("Content-type: text/rtf");
header("Content-Disposition:attachment; filename={$file_doc}");
echo $body; 
```

# bash - 编写主要的多文件多服务器 FTP 上传脚本：智能中断传输恢复可能吗？

> ID：12922711
> 
> 赞同：1
> 
> 时间：2012-10-16T20:16:08.950
> 
> 标签：bash, upload, ftp

我正在尝试将数百个文件上传到 10 多个不同的服务器。我之前使用 FileZilla 完成了这项工作，但我试图仅使用常见的命令行工具和 shell 脚本来实现它，以便它不依赖于在特定主机上工作。

现在我有一个 shell 脚本，它接受一个服务器列表（以[ftp://user:pass@host.com](ftp://user:pass@host.com)格式）并产生一个新的后台实例 'ftp [ftp://user:pass@host.com](ftp://user:pass@host.com) < batch .file' 为每个服务器。

这原则上可行，但是一旦与给定服务器的连接超时/重置/中断，它就会中断。虽然所有其他传输继续进行，但我无法恢复任何被中断的传输。知道这是否发生的唯一方法是手动检查每个接收服务器。这糟透了！

现在我正在查看 wput 和 lftp，但这些都需要安装在我想从中运行上传的任何主机上。关于如何以更简单的方式完成此任务的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:24:27.853

我建议使用[rsync](http://en.wikipedia.org/wiki/Rsync)。仅传输在传输过程中更改的数据非常好。比FTP更高效！有关如何通过示例恢复中断连接的更多信息，请参见[此处](http://techtavern.wordpress.com/2008/11/19/resume-scprsync-file-transfer/)。希望有帮助！

# ruby-on-rails - 如何使用 Deface 在 Spree 中呈现自定义 HTML

> ID：12922716
> 
> 赞同：0
> 
> 时间：2012-10-16T20:16:40.967
> 
> 标签：ruby-on-rails, erb, spree

我正在用 Deface 替换一些 Spree 核心模板代码，并且在我尝试使其更加自定义之前一切正常。

```
Deface::Override.new(
    :virtual_path => "spree/shared/_products",
    :replace => "span.price",
    :text => "<%= link_to truncateproduct.display_price + '<span class=\"purchase-suggestion\">BUY NOW</span>', :length => 20), product, :class => 'price selling', :itemprop => \"price\", :title => product.name + ': ' + product.display_price %>",
    :name => "product_price"
) 
```

上面我的目标是使价格文本成为一个链接，并且还包括一个包裹在跨度中的“立即购买”文本，以用于个人造型目的。

这样呈现： `$15.99<span class="purchase-suggestion">BUY NOW</span>`

如何让 Deface 评估 HTML 而不是编写字符串？

我尝试通过制作两个不同的 Deface 文件分两步执行此操作，一个是我将跨度交换为链接，另一个是我将跨度添加到：insert_bottom。在我看来，不可能使用 Deface 两次更改同一个元素 - 这是正确的吗？

* * *

**解决方案** 感谢您在频道中的回答和对话。这是解决方案：

```
Deface::Override.new(
    :virtual_path => "spree/shared/_products",
    :replace => "span.price",
    :text => "<%=
                  link_to ('<span>' + product.display_price + '</span> <span class=\"purchase-suggestion\">BUY NOW</span>').html_safe, product,
                  :class => 'price selling',
                  :itemprop => 'price',
                  :title => product.name + ': ' + product.display_price
              %>",
    :name => "product_price"
) 
```

`.truncate`无缘无故被使用，`.html_safe`完成了这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:19:07.013

您的问题是截断。结果未标记为 HTML 安全，因此在视图中使用时将受到默认转义，除非由 raw() 包装。如果文本包含 HTML 标记或实体，则应小心，因为截断可能会产生无效的 HTML（例如不平衡或不完整的标记）。

[http://apidock.com/rails/ActionView/Helpers/TextHelper/truncate](http://apidock.com/rails/ActionView/Helpers/TextHelper/truncate)

# android - 远程通知是否在从 Android 上的服务器收到后立即发送

> ID：12922720
> 
> 赞同：0
> 
> 时间：2012-10-16T20:17:08.410
> 
> 标签：android, notifications

Android：从 Android 上的服务器收到远程通知后是否会立即发送？我们还可以在 Android 上安排通知吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:20:26.363

如果您在谈论 GCM，是的，所有通知都旨在尽快发送给收件人（网络延迟等，Google 无法控制）。

不，目前您无法安排这些。你能做的最好的就是在你的服务器上安排它们`cron`或类似的东西

有关更多信息，请参阅开发站点：http: [//developer.android.com/guide/google/gcm/adv.html](http://developer.android.com/guide/google/gcm/adv.html)

# java - 通过 @Configuration 启动 Spring 应用程序

> ID：12922723
> 
> 赞同：0
> 
> 时间：2012-10-16T20:17:23.497
> 
> 标签：java, spring, bootstrapping, applicationcontext

我在我的代码库中找到了这段代码。其实类：

```
package my.services.config;

@Configuration
@ImportResource("classpath:spring/*.xml")
@ComponentScan("my.services.jms.server")
public class MyServicesConfiguration {
    @Bean
    public ApplicationLifecycle lifecycle() {
        return new MyServicesLifecycle();
    }   
} 
```

我试图理解：因此，它在启动之前/同时使用所有 spring/*.xml 文件/bean，然后将 ApplicationLifecycle bean 注入到 spring 上下文中（以及来自 spring/*xml 的其他 bean 和来自 ' my.services.jms.server' 包）。所以，最后我们将拥有一个包含所有 bean 的全局上下文（？）

问题：如何启动这个应用程序（如果，据我所知，这个类只是应用程序的一个入口点）？

这将是一些 main(String[] args) {} 函数，可以通过“my.services.config”路径启动它，比方说，作为参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:21:50.653

> 所以，最后我们将拥有一个包含所有 bean 的全局上下文（？）

这是正确的。从 Spring 的角度来看`@Configuration`，类只是定义 bean 的另一种方式，相当于 XML。Java 配置和 XML 配置都被合并并在以后同等对待。

这就是你如何从 withing 开始你的上下文`main()`：

```
ApplicationContext ctx = 
    new AnnotationConfigApplicationContext(MyServicesConfiguration.class); 
```

然后：

```
ApplicationLifecycle applicationLifecycle = 
    ctx.getBean(ApplicationLifecycle.class); 
```

# forms - grails action提交网址

> ID：12922724
> 
> 赞同：2
> 
> 时间：2012-10-16T20:17:35.303
> 
> 标签：forms, grails, submit

我正在尝试 grails 操作提交按钮，并且我有以下代码

```
<g:form name="sample" controller="person">
  <g:actionSubmit value="Submit me" action="Update"/>
</g:form> 
```

当它调用“更新”操作时，url 仍然存在，`http://myapp/person/list`而不是实际显示正在应用的操作（在本例中为更新）。从最终用户的角度来看，这是令人困惑的。有没有办法实际显示正确的 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:42:56.387

这实际上被报告为一个错误（次要）。我认为不显示正确的网址没什么大不了的，但我同意你的观点，视情况而定，这可能会造成混淆。但无论如何，关于 Jira 问题的最后一条评论描述了一种可行的解决方法。=) 它基本上是在使用：

```
<g:actionSubmit class="update" onclick="this.form.action='${createLink(action:'update')}';" value="Update" /> 
```

这是它的[链接](http://jira.grails.org/browse/GRAILS-3086)。

# c# - 后台工作人员因处理过多而崩溃？

> ID：12922725
> 
> 赞同：4
> 
> 时间：2012-10-16T20:17:36.923
> 
> 标签：c#, backgroundworker

一段时间以来，我一直在与后台工作人员作斗争，我开始怀疑一个人可以用 bw 做什么是有限制的。我正在尝试利用 bw 来处理 TCPIP 交换，同时使用其`ProgressChanged`方法更新 UI。我知道 UI 更新没问题，但我的`DoWork`例程（如下所示）有时会导致 bw 线程消失/停止工作。有没有其他人有这个问题？

```
private void TCPIP_DoWork(object sender, DoWorkEventArgs e)
{
   int a = 0;
   s.Send(System.Text.Encoding.ASCII.GetBytes("s"));
   if (worker.CancellationPending == true)
   {
      s.Send(System.Text.Encoding.ASCII.GetBytes("t"));
   }
   else
   {
      try
      {
         a = s.Available;
         s.Receive(bytes);
         Thread.Sleep(25);
         using (Stream fileStream = new FileStream(@sbpFile.Text, 
                         FileMode.Append, FileAccess.Write, FileShare.None))
         {
             using (BinaryWriter bw = new BinaryWriter(fileStream))
             {
                if (a == 0)
                   Thread.Sleep(20);
                else if (a < 1023)
                {
                   bw.Write(bytes, 0, a);
                   Thread.Sleep(20);
                }
                else
                {
                   bw.Write(bytes, 0, 1024);
                   Thread.Sleep(20);
                }
             }
          }
       }
       catch(Exception e)
       {
          Console.WriteLine("{0} Exception.", e);
       }
   }
} 
```

注意：那些 Thread.Sleep() 操作在那里的唯一原因是因为它们似乎是让 bw 不会自己绊倒的临时修复......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:32:45.377

尝试检查事件处理程序的`Error`属性。`RunWorkerCompleted`也许您会遇到一些异常，而这些异常并未由您的代码处理。

```
void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
   if (e.Error != null)
      Console.WriteLine("{0} Exception.", e.Error);        
   // etc
} 
```

# c++ - glibc 检测到内存损坏

> ID：12922728
> 
> 赞同：2
> 
> 时间：2012-10-16T20:17:50.280
> 
> 标签：c++, pointers, memory-management, crash

我必须经常工作和创建矩阵（我必须使用指针），所以我在 C++ 中创建了一个函数来为它们分配空间，并确保最后一个值设置为 NULL。在特定情况下，应用程序会删除此错误（检测到 glibc：内存损坏）。这是代码：

```
template<typename T> T *allocate(int size) {
    T *temp = new T[size];
    temp[size] = (T) NULL;
    return temp;
} 
```

这有效：

```
unsigned char *tmp = allocate <unsigned char> (10); 
```

但这一个删除了错误：

```
unsigned char **tmp = allocate <unsigned char *> (10); 
```

这相当于：

```
unsigned char **tmp = new unsigned char *[10];
tmp[10] = (unsigned char *) NULL; 
```

哪个好。为什么它会给我这个错误？

更新：感谢您的回复。我太盲目了。这是一个错误。但是崩溃的问题来自代码的另一部分，也因为我在数组的分配空间之外添加了 NULL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:20:44.253

你不能这样做：

```
temp[size] = (T) NULL; 
```

在这种情况下，大小是在您分配的最后一个内存位置之后索引内存位置，为此进行更改：

```
temp[size-1] = (T) NULL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:20:45.570

> `temp[size] = (T) NULL;`

正在分配给未分配的内存。

```
 T *temp = new T[size]; 
```

从 temp[0] 分配到 temp[size-1]

# xcode - 从 WebView 获取当前 URL 和标题

> ID：12922734
> 
> 赞同：0
> 
> 时间：2012-10-16T20:18:30.683
> 
> 标签：xcode, macos, cocoa, xcode4, webkit

我正在尝试从 WebView 获取当前 URL 和标题。我已将其用于 URL

```
- (void)webView:(WebView *)sender didStartProvisionalLoadForFrame:(WebFrame *)frame
{
    // Only report feedback for the main frame.
    if (frame == [sender mainFrame]){
        NSString *url = [[[[frame provisionalDataSource] request] URL] absoluteString];
        [addressBar setStringValue:url];
    }
} 
```

这是标题：

```
- (void)webView:(WebView *)sender didReceiveTitle:(NSString *)title forFrame:(WebFrame *)frame
{
    // Report feedback only for the main frame.
    if (frame == [sender mainFrame]){
        [[sender window] setTitle:title];
    }
} 
```

此代码直接来自 Apple 的 WebKit Objective-C Programming Guide。我只是将 URL 方法稍微修改为 addressBar 而不是 textField。但它不起作用。addressBar 字段永远不会填充页面的 URL，并且窗口标题不会更新 ether。界面生成器中的所有内容都已正确连接。为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T11:28:42.067

如果页面已经加载，那么它不是临时数据源，请将其替换为

```
[[[[frame dataSource] request] URL] absoluteString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T23:41:09.453

这是你让这个工作。

1.  **设置你`frameLoadDelegate`的`WebView`对象**。在您的可视界面中，从您的`WebView`元素控制拖动到`NSWindow`包含`WebView`. 松开鼠标时，会出现一个黑色的小下拉菜单。选择`frameLoadDelegate`。完成此操作后，诸如此类的消息`webView:DidReceiveTitle:forFrame`将发送到您的`NSWindow`.
2.  **创建一个子类`NSWindow`并将您的`NSWindow`对象分配给这个子类**。由于这个新的子对象将从 继承所有内容`NSWindow`，因此它将接收`webView:DidReceiveTitle:forFrame`消息。
3.  **将上面的代码粘贴到这个新的子类**中。这有效地覆盖了父类的方法定义，并让您自主控制发生的事情。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:45:47.747

不幸的是，我自己也不知道。但是我发现了一个很棒的网站，里面有教程，其中一个是制作 RSS 提要，并且它从 RSS 中获取标题。如果向下滚动，您会看到它。希望你可以修改它来工作！

[http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)

# loops - Excel VBA 查找/替换循环 - VBA 中的新功能

> ID：12922735
> 
> 赞同：1
> 
> 时间：2012-10-16T20:18:32.697
> 
> 标签：loops, excel, replace, vba

我需要在现有宏中添加一个部分，该部分获取单元格的地址并从工作表上其他位置的单元格范围内的值中查找该地址（作为字符串？） - 然后偏移一列以使用该单元格的值替换搜索地址的单元格的原始值。

我的代码正在寻找未合并的单元格，当它找到未合并的单元格时，它需要获取正确的值以放入其中。并非我的范围 mCell 中的所有单元格都未合并，因此这是循环中的查找/替换。

我无法对单元格进行硬编码，也无法找出成功通过我的范围并使用工作表另一部分的值查找/替换的功能循环。我是 VBA 的新手，不断收到错误，最终定义了十几个范围和字符串，试图传递数据。任何帮助将不胜感激！

例如：

如果未合并的 mCell.address = "B20"，则宏在指定范围内找到值 "B20"（在下面的示例中，在单元格 Q20 中找到），然后偏移一列（到单元格 R20），然后使用值该单元格（即 6）替换 mcell 的值，使得 B20（即活动 mCell）的新单元格值 = 6。然后转到下一个未合并的 mCell...

```
 row   Column Q   Col. R '(not code, but can't get formatting any other way)
 18    B18(text)  5
 19    B19        4
 20    B20        6
 21    B21        3 
```

感谢您的任何建议，我现有的代码在“第二部分”之前运行良好，但后来我惨遭失败，并请求有关如何更正/改进代码的具体帮助。现有代码是：

```
 ' This sub looks for the word "Table" in column A.  If the word appears, it unmerges the  cells in columns B - E
    ' and the rows following to allow for the insert of a table, then merges all other rows for sake of format.

Option Explicit
Private Sub Worksheet_Activate()

Application.ScreenUpdating = False

Range("B14:E64").SpecialCells(xlCellTypeVisible).Select
With Selection
.RowHeight = 17
.VerticalAlignment = xlTop
.HorizontalAlignment = xlLeft
.WrapText = True
End With

'*******Merge or unmerge rows according to whether or not they contain Table data -
' this only acts on visible cells, so rows of data table can be hidden as needed

 Dim TA As Integer
 Dim ColValues As Variant
 Dim rng As Range
 Dim tabNo As Range                    'uses value on worksheet to know how many rows to unmerge

'*******Dims in finding and replacing unmerged cell values

 Dim mergeRange As Range             'Range B16:E64 - where my mCells are being pulled from
 Dim mCell As Range                  'Cell that is unmerged, looking for its address
 Dim ws As Worksheet
 Dim tabledata As Range              'Range Q11:Q38 - this is the column I'm searching in and offsetting from
 Dim aCell As String                 'picks up cell address, to use in .find
 Dim myCell As Range                 'cell address in Q
 Dim ReplaceString As String
 Dim foundCell As Range
 Dim bCell As Range
 Dim i As Long

Application.DisplayAlerts = False

'Make column B = Column A values, cannot make this happen on sheet, because data is too variable

ColValues = ActiveSheet.Range("A16:A64").Value
ActiveSheet.Range("B16:B64").Value = ColValues

'Look for data table, if not present, merge cells
Set rng = ActiveSheet.Range("B14:B100")
Set tabNo = ActiveSheet.Range("K6")

For TA = 15 To 64                     'defines TA variable to loop from row 14 to row 64

If Cells(TA, "A") = "Table" Then      '

Range("B" & TA & ":E" & TA + tabNo).UnMerge   'unmerges the row with "Table" listed and the next 7 rows (to make a 8-row x 4 column unmerged area for table
TA = TA + tabNo                               ' moves active cell "TA" down 7 spaces

  Else

Range("B" & TA & ":E" & TA).Merge         'If "Table" not found, then merge the cells for the row TA is in across columns B:E
  End If

Next TA

'*** Part II: Need some calculation to loop or offset or find through data and fill
'unmerged cells from a data table on the worksheet.
'the placement of the data table varies depending on the layout of the report,
'which changes day to day, so can not be hard coded into the cells - needs to look up
'position of the word "Table" and dump data after that.

'offset? .find? loop?

'***want to take the cell address of each unmerged cell within the range of the report
'and look for that cell in an array, then replace the cell contents with the correct value

Set mergeRange = ActiveSheet.Range("B16:E64")

For Each mCell In mergeRange
   ' If mergeRange.MergeCells = True Then
   ' MsgBox "all cells are merged, exiting sub"
   ' Exit Sub
   'Else
    If mCell.MergeCells = False Then

   aCell = mCell.Address      '??? Need to set the cell address as
                                    'a text string or something in order to look for that address in the values
                                  'of cells in range "tabledata"

    'MsgBox "aCell " & Range(aCell).Address

    Set tabledata = ActiveSheet.Range("Q11:Q38")

    Set bCell = tabledata.Find(aCell, After:=Range("Q1"), LookIn:=xlValues, lookAt:=xlWhole,  SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

                                    'this gives me a "type mismatch" error that I cannot clear

                                    '- then wanting the value of the cell offset one column over
                                    'need to take the value of that offset cell and use it
                                    'to replace the value of the original unmerged cell (mCell)

    ActiveCell.Offset(1, 0).Select
    ActiveCell.Offset(0, 1).Value = ActiveCell.Value

  Application.DisplayAlerts = True

  Application.ScreenUpdating = True

  End If
  Next mCell

  End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:30:59.660

那里有一些问题，但我认为它现在正在工作。您必须进行验证，因为我仍然不能 100% 确定它应该做什么。

问题 1：您不需要`tabledata`. 您在搜索参数中指定，`After:=Range("Q1")`以便它在正确的位置查找。`Find`在 a 上工作，`Cells`所以你的行应该是：

```
Set bCell = Cells.Find(aCell, After:=Range("Q1"), LookIn:=xlValues, lookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False) 
```

问题 2：您的行`aCell = mCell.Address`需要`aCell = Replace(mCell.Address, "$", "")`作为绝对单元格引用出现，并且工作表上的单元格地址不是（可能是一种更优雅的方式）。

您的 Dropbox 文件中还有其他一些问题，但现在也应该对这些问题进行排序。有一个额外的`Next`，这条线`aCell.Offset(, 1) = bCell.Offset(, 1)`似乎应该是`mCell.Offset(, 1) = bCell.Offset(, 1)`。

[https://www.dropbox.com/s/jqdg3v0gd59mxjn/Test%20Workbook%201016jb.xlsm](https://www.dropbox.com/s/jqdg3v0gd59mxjn/Test%20Workbook%201016jb.xlsm)

# c# - 尝试连接到 TCP 套接字时出现无效的指针地址错误

> ID：12922736
> 
> 赞同：7
> 
> 时间：2012-10-16T20:18:35.787
> 
> 标签：c#, sockets, networking

我有以下 .NET 代码。其中大部分是在我被聘用之前很久就写好的，而且没有一个最初的开发人员仍然为我们工作。

```
private void SendTCPMessage(string IpAddress, string Message)
    {
        ...

        //original code that fails because the Host entry produced 
        //has no elements in AddressList.
        //IPHostEntry remoteMachineInfo = Dns.GetHostEntry(IpAddress);

        //New code that fails when connecting
        IPHostEntry remoteMachineInfo;

        try
        {
            remoteMachineInfo = Dns.GetHostEntry(IpAddress);

            if (remoteMachineInfo.AddressList.Length == 0)
               remoteMachineInfo.AddressList = 
                  new[]
                     {
                        new IPAddress(
                           //Parse the string into the byte array needed by the constructor;
                           //I double-checked that the correct address is produced
                           IpAddress.Split('.')
                           .Select(s => byte.Parse(s))
                           .ToArray())
                     };
        }
        catch (Exception)
        {
            //caught and displayed in a status textbox
            throw new Exception(String.Format("Could not resolve or parse remote host {0} into valid IP address", IpAddress));
        }

        socketClient.Connect(remoteMachineInfo, 12345, ProtocolType.Tcp);

        ...
    } 
```

注意的SocketClient代码如下：

```
 public void Connect(IPHostEntry serverHostEntry, int serverPort, ProtocolType socketProtocol)
    {
        //this line was causing the original error; 
        //now AddressList always has at least one element.
        m_serverAddress = serverHostEntry.AddressList[0];
        m_serverPort = serverPort;
        m_socketProtocol = socketProtocol;
        Connect();
    }

    ...

    public void Connect()
    {
        try
        {
            Disconnect();
            SocketConnect();
        }
        catch (Exception exception) ...
    }

    ...

    private void SocketConnect()
    {
        try
        {
            if (SetupLocalSocket())
            {
                IPEndPoint serverEndpoint = new IPEndPoint(m_serverAddress, m_serverPort);

                //This line is the new point of failure
                socket.Connect(serverEndpoint); 

                ...
            }
            else
            {
                throw new Exception("Could not connect!");
            }
        }
        ...
        catch (SocketException se)
        {
            throw new Exception(se.Message);
        }
        ...
    }

    ...

    private bool SetupLocalSocket()
    {
        bool return_value = false;
        try
        {
            IPEndPoint myEndpoint = new IPEndPoint(m_localAddress, 0);
            socket = new Socket(myEndpoint.Address.AddressFamily, SocketType.Stream, m_socketProtocol);
            return_value = true;
        }
        catch (SocketException)
        {
            return_value = false;
        }
        catch (Exception)
        {
            return_value = false;
        }
        return return_value;
    } 
```

在 SocketConnect 中连接到端点时，我收到一个 SocketException 说明：

> 系统在尝试在调用中使用指针参数时检测到无效的指针地址。

网上的信息对如何解决这个问题有点轻描淡写。AFAICT，地址正在正确解析，并且一旦传入 SocketClient 类就会正确检索。老实说，我不知道这段代码*是否*有效；我从来没有亲眼见过它做它应该做的事情，使用这一切的功能是为了我们的一个客户的利益而创建的，而且在我被录用之前显然没有功能。

我需要知道要寻找什么来解决错误。如果有帮助，我尝试与之建立连接的远程计算机位于 VPN 隧道的远程端，并且我们确实通过我们使用的其他软件建立了连接。

帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T22:15:14.823

找到了。用作套接字本地端点的地址，在 SetupLocalSocket() 中，使用了类似的简单方法来获取地址；通过解析本地主机并获取第一个地址。第一个地址通常是 IPv6 地址，而不是显然预期的 IPv4 地址。因此，我让它在列表中查找第一个 IPv4 地址并将其用作端点，并且它起作用了。

# r - 在R中绘制椭圆/双曲线

> ID：12922740
> 
> 赞同：2
> 
> 时间：2012-10-16T20:18:56.473
> 
> 标签：r, ggplot2

我想在 R 中绘制椭圆、双曲线。如何使用 ggplot2 来绘制？让我举个例子

```
x^2 +3xy+ 4x+ 2y+ 2y^2 = 0 
```

为了

```
x between -2 and 2
y between -2 and 2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T20:31:48.453

构造一个数据字段：

```
d <- transform(expand.grid(x=seq(-2,2,length=51),
            y=seq(-2,2,length=51)),z=x^2+3*x*y+4*x+2*y+2*y^2) 
```

制作一个基本`geom_contour`图，每个级别的颜色不同：

```
g1 <- qplot(x,y,z=z,data=d,colour=factor(..level..),geom="contour") 
```

现在摆脱除“0”级别之外的所有行。这取决于`stat_contour`选择零作为其轮廓级别之一，这在某些情况下可能很脆弱......（对我来说，`stat_contour()`允许控制选择的级别并不明显，相当于基数 R 的`levels`参数`contour()`或`contourLines()`在基数 R 中的参数 - 如果它确实，这个过程会更容易一些。如果有人足够关心这个，可以向[https://github.com/hadley/ggplot2/issues提交一个愿望清单项目......）](https://github.com/hadley/ggplot2/issues)

```
g1 + scale_colour_discrete(breaks="0",limits=c("0","0"),na.value=NA,
                          guide="none") 
```

![在此处输入图像描述](../Images/bd102191795e4c368660693638cb6fd7.png)

# java - 根据用户反馈修改代码

> ID：12922741
> 
> 赞同：0
> 
> 时间：2012-10-16T20:19:05.530
> 
> 标签：java

我将一些数据存储在哈希图中。现在我想根据用户输入修改与键关联的值，并以这些方式永久存储它们。

为了让自己更清楚，我有一个这样的哈希图：

```
public static HashMap<String,Integer> mymap= new HashMap<String,Integer>();
mymap.put("Hi",2);
mymap.put("Hello",3); 
```

我会从某个用户那里得到用户的反馈，如果他想要的话，我会说，存储 4 来对抗 Hello。我希望保存这些更改以供将来参考。

我听说过Java 中的[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)API，但不确定这是否能达到目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:25:10.933

反射 API 允许操作/访问其他方式无法访问的数据 - 或在编译时未知的类上的某些数据。

在这里，真的不需要。您所需要的只是`put()`将元素放入映射中，它将从您刚刚插入的键中“删除”旧值（如果它已经存在）并将其（键）与新添加的值相关联。

所以，基本上 - 你需要做的就是`myMap.put(key,newValue)`，并且`Map`（假设它是一个正确的，当然）的实现将照顾其余的。

* * *

如果您想在程序运行之间存储数据 - 您必须将其（地图）保存在磁盘上。为此，您可以使用[serialization](http://en.wikipedia.org/wiki/Serialization#Java)，或者 [`Properties`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)在某些情况下可以使用。
确保在程序启动后从磁盘加载地图，否则您将看不到存储的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:38:48.983

Preferences API 使在磁盘上存储少量数据变得容易。它通常用于存储配置数据。它类似于 Windows 注册表。

这是一个介绍：[http ://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:28:20.433

就说吧，`mymap.put(key,value);`。它将更新匹配键的值。如果不存在，它将插入一个新条目，例如

```
 mymap.put("Hello",4); 
```

如果您不想为新键插入新值，例如`World`，您可以进行如下检查：

```
 if(mymap.containsKey(key)){
         mymap.put(key,value);
      }else{
        //no existing key found
      } 
```

# sql-server - 在我的笔记本电脑上安装不同版本的 Sql Server 是个好主意吗？

> ID：12922742
> 
> 赞同：0
> 
> 时间：2012-10-16T20:19:08.237
> 
> 标签：sql-server

我的笔记本电脑上已经安装了 SQL Server 2008 R2 Developer 版本。我们使用的数据库之一是 SQL Server 2012。我无法修改存储过程。我必须登录服务器才能使用 Management Studio 2012。这有点痛苦。是否值得在我的本地计算机上放置一个命名实例以使用 Management Studio 2012？我可能会遇到什么样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:23:00.557

如果您只想在本地计算机上安装 Management Studio 2012，您可以这样做，而无需添加另一个实例。当您选择功能时，只需开始安装并仅选择管理工具。

我实际上是自己做的，因为我想利用 SSMS 2012 中的一些改进。我们还没有运行 2012 的任何生产服务器，但我仍然在 2012 版本中完成所有 SSMS 工作，即使在旧版本上也是如此服务器。

但是，要回答您的核心问题，SQL 完全支持放置不同版本的第二个实例。Microsoft 还没有[这篇文章的 2012 版本，](http://technet.microsoft.com/en-us/library/ee210714%28v=SQL.105%29.aspx)但对于 gotcha 和并行安装的注意事项来说，信息可能几乎相同。

# excel - XL 宏可以选择具有可变起始行和结束行的范围吗？

> ID：12922743
> 
> 赞同：3
> 
> 时间：2012-10-16T20:19:10.030
> 
> 标签：excel, vba, variables, row

我是一线技术人员。对宏编码并不陌生，但我的大部分经验都是在 WordPerfect 宏中。我正在尝试编写一个 Excel 宏，该宏将选择并作用于一系列文件中的一个范围。所需的范围在一组恒定的列中，但在一组可变的行中。静态值标记开始行和结束行，但这些行将随每个数据文件而变化。

我遇到的问题是，当我录制宏时，XL 不会记录我的光标移动（Ctrl-Up、Ctrl-Shift-Home 等），它会记录我正在操作的绝对单元格地址。由于每个数据文件的起始行和结束行会有所不同，因此绝对单元格引用将不起作用。任何人都可以提供任何关于我可以/应该如何处理这个问题的提示吗？

在此先感谢，詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:23:17.423

```
Dim rng as Range

With ActiveSheet
    'Ctrl+Arrow
    Set rng = .Range("A10000").End(xlUp) 'CTRL+Up arrow
    Set rng = .Range("A1").End(xlDown) 'CTRL+Down arrow
    Set rng = .Range("Z1").End(xlToLeft) 'CTRL+Left arrow
    Set rng = .Range("A1").End(xlToRight) 'CTRL+Right arrow

    'Ctrl+Shift+Arrow
    Set rng = .Range(.Range("A1"),.Range("A1").End(xlDown)) 
    Set rng = .Range(.Range("A1"),.Range("A1").End(xlToRight))

End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:39:38.317

首先，蒂姆的回答非常简洁 - 你应该知道的另一件很酷的事情是记录一个带有相关引用的宏 - [http://support.microsoft.com/kb/213740](http://support.microsoft.com/kb/213740)

您面临的挑战是，当您录制宏时，它默认为绝对引用，如果您按下相对引用按钮，您将得到您正在寻找的结果。

希望这也有帮助！

# c++ - std::left/right 的 Iomanip 错误

> ID：12922744
> 
> 赞同：0
> 
> 时间：2012-10-16T20:19:16.050
> 
> 标签：c++, format, iomanip

我试图左对齐一条线的一侧并右对齐另一侧，但我无法让右侧对齐。谁能抓住我的错误？

```
//The following program will declare
#include <iostream>
#include <iomanip>

using namespace std;

const int HOUSING = 3500;                                       //housing cost
const int MEALS = 2000;                                         //meal cost
const int N_CRED_PER = 285;                                     //out of state credit cost
const int CRED_PER = 130;                                       //amount of money per credit(cost)
const int TAB = 30;                                             //precision
const int ADD_FEES = 6200;                                      //out of state fees for non-resident

int main()
{
  cout << "Grant Mercer section 1002 Assignment 6\n\n";
  int size, studentID, credits, i, valid,total;
  //size of loop, studentID to hold ID of student, credits to hold num
  //of credits the student will take, i to start loop
  char first, last, res, housing, meal;                         //first and last to hold initials of
                                                                //student, res to hold code
                                                                //if student is resident, meal to hold
                                                                //code if student has meals
  cin >> size;                                                  //grab length of loop in file
  cout << left;                                                 //manipulate stream
  cout << fixed << showpoint << setprecision(2);
  valid = size;                                                 //initially all entries are valid, but de
                                                                //cremented each time something goes wrong
  while  (i < size)
    {
      cin >> studentID >> first >> last >> credits >> res;      //read in mandatory data to vars
      cout << setw(TAB) << left <<  "Student #: " << right << studentID << endl;  //display id
      cout << setw(TAB) << left << "Initials: " << right << first << last << endl;//display initials
      if(credits > 0 && credits < 21)                           //if credits are fine
        {
          switch(res)                                           //find char in res
            {
            case 'R':                                           //if RESIDENT
            case 'r':
              cout << setw(TAB) << left << "Residency status: " << right << "Resident" << endl;
              cout << setw(TAB) << left << "Credits: " << right << credits << endl;
              cout << setw(TAB-10) << left << "Tuition: " << setw(10) << "$" << right << (double)CRED_PER * credits << endl;
              cout << setw(TAB-10) << left << "Total due: " << setw(10) << "$" << right << (double)CRED_PER * credits << endl;
              total += CRED_PER * credits;                      //add to total cost
            break;
            case 'N':                                           //if NON-RESIDENT
            case 'n':
              cout << setw(TAB) << left  << "Residency status: " << right <<  "Non-resident" << endl;
              cin >> housing >> meal;                            //since the student is non-resident, they
                                                                 //have a mean and house code
              cout << setw(TAB) << left << "Credits: " << right << credits << endl;
              cout << setw(TAB - 10) << left  << "Tuition: " << setw(10) << "$" << right << (double)credits * N_CRED_PER + ADD_FEES << endl;
              if(housing == 'H' || housing == 'h')
              {
                cout << setw(TAB - 10) << left << "Housing: " << setw(10) << "$" << right << (double)HOUSING << endl;
                if(meal == 'M' || meal == 'm')                  //if MEALS
                  {
                    cout << setw(TAB-10) << left << "Meal Plan: " << setw(10) << "$" << right << (double) MEALS << endl;
                    cout << setw(TAB-10) << left << "Total due: " << setw(10) << "$" << right << (double) MEALS + HOUSING + (credits * N_CRED_PER) + ADD_FEES << endl;
                    total += MEALS + HOUSING + (credits * N_CRED_PER) + ADD_FEES;
                                                                //add to total
                  }
                else                                             //if NO MEALS
                  {
                    cout << setw(TAB-10) << left << "Total due: " << setw(10) << "$" << right << (double)\
HOUSING + (credits *N_CRED_PER) + ADD_FEES << endl;
                    total += HOUSING + (credits * N_CRED_PER) + ADD_FEES;
                                                                //add to total
                    total += HOUSING + (credits * N_CRED_PER) + ADD_FEES;
                                                                //add to total
                  }
              }
              else                                              //if NO HOUSING NO MEALS
              {
                cout << setw(TAB-10) << left  << "Total due: " << setw(10) << "$" << right << (double)(cr\
edits * CRED_PER) + ADD_FEES
                     << endl;
                total += (credits * CRED_PER) + ADD_FEES;
              }
            break;
            }

        }
      else
      {
        cout << "INVLIAD CREDIT AMOUNT...\n";
        valid--;
      }
      i++;
      cout << endl << endl;
    }
  cout << "\nFINAL TOTALS\n";                                   //display final totals from students
  cout << right << setw(TAB) << left << "Valid request count: " << right << valid << endl;
  cout << setw(TAB) << left  << "Invalid requrest count: " << right << size - valid << endl;
  cout << setw(TAB - 10) << left  << "Total feed due: " << setw(10) << "$" << right << (double)total;
  cout << endl;
  return 0;
} 
```

输出都是左对齐的，我不明白我需要做什么才能使这一切都正确。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:37:38.400

`setw()`在打印每个右对齐字符串之前，您忘记使用`cout`. 例如，在您的代码中采用以下行：

```
cout << setw(TAB) << left << "Residency status: " << right << "Resident" << endl; 
```

在打印每个向左或向右对齐的字符串之前，您必须设置一个新的宽度：

```
cout << setw(20) << left << "Residency status: " << setw(20) << right << "Resident" << endl; 
```

没有 a `setw()`，它假定宽度为零，这基本上忽略了右对齐。

# java - JMS 排队方案所需的建议

> ID：12922745
> 
> 赞同：2
> 
> 时间：2012-10-16T20:19:17.597
> 
> 标签：java, jms, activemq

JMS 排队方案所需的建议

嗨，我是 Java EE 和应用程序服务器的新手，我想知道 JMS 队列（或 ActiveMQ？）解决方案是否适合我的场景。现在我认为不是，但似乎有很多我可能不知道的选择。

我有客户端应用程序可以访问项目（数据库上的数据）并将锁定该项目，直到客户端完成。如果客户不关闭应用程序，他可能会锁定一个项目很多天。

我需要开发一个 web 服务，该服务将发布到要在项目中完成的队列操作。**困难的部分是，如果该项目当前被锁定，则需要暂停这些操作。**（而且我不知道何时释放该锁；因此我可能需要一个计时器来尝试使这些操作出列）。

因此，如果项目 A 当前被锁定，我的队列可能如下所示：

1.  将数据 XXX 添加到项目**A**
2.  将数据 ZZZ 添加到项目 B
3.  **更新项目A 的**数据 XXX
***   更新项目 B 的数据 ZZZ*   删除项目 B 的数据 ZZZ**

 **如果**A**被锁定，我需要能够继续处理 B（或任何其他未锁定的项目）上的操作，并在项目 A 的锁定被释放时进行处理。

我考虑过在内存中为每个具有挂起操作以保留其顺序的项目创建 JMS 队列）但我不能（也不应该）因为队列将由应用服务器定义。而且我显然需要持久队列（所以没有临时队列？）

JMS 队列是否适合这种情况？ActiveMQ 或其他实现有帮助吗？

我是否必须在 Timer 上通过自己的 Queue/SQL Table/EJB 进行编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:53:04.627

JMS 和其他方法都有很多选择。

但这是我对 JMS（ActiveMQ 或诸如此类）的一种可能解决方案的想法：

您可以有一个用于传入消息的 JMS 队列和一个用于保留消息的队列（等待在某个锁定项目上进行处理）。希望您也有一些 ID（我称之为“projectId”，以识别锁定的项目）。我还假设您可以在项目发布时执行代码。

在使用队列实现此场景时，这里有一些 psudecode 的想法。

```
public void onMessage(Message msg){
   ProjData pd = extractProjectData(msg);
   if( projectLocked(pd) ) {
     msg.setStringProperty("projectId",pd.getProjectId());
     sendToOnHoldQueue(pd);
   }else{
    processProjectData(pd);
   }
}

// Say there is an event somewhere when the lock is released
public void onProjectLockReleased(projectId){
   // select messages waiting for this project via Jms selectors..

   // you may or may not want to lock the project here, while working of the "on hold events"
   MessageConsumer consumer = session.createConsumer(onHoldQueue,"projectId='"+projectId+"'");
   while(Messages msg  = consumer.receiveNoWait()){
     processProjectData(pd); 
   }
} 
```**

# c# - 从动态对象 C# 中读取值

> ID：12922746
> 
> 赞同：9
> 
> 时间：2012-10-16T20:19:16.783
> 
> 标签：c#, asp.net-mvc, json, dynamicobject

我正在尝试从 System.Web.Helpers.DynamicJsonObject 读取值。我可以在调试器中看到这些值，但我不知道如何访问它们。我试过这个

`item.GetType().GetProperty("batch_id").GetValue(item, null);`

但是当我尝试在调试器中得到这个响应时“item.GetType().GetProperty("batch_id")' is null”

我从我的解决方案中附上了一张图片 ![在此处输入图像描述](../Images/daf30649687cff5006c21cbb5c68bfb9.png)

谢谢你，-Tesh

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-16T20:21:17.657

它是动态的，所以你可以这样做：

```
string batchId = item.batch_id; 
```

如果由于某种原因您在 a 中有属性名称`string`，并且在编译时不知道它，则索引运算符将起作用：

```
string value = item["batch_id"]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T20:31:17.220

尝试枚举值[DynamicJsonObject.GetDynamicMemberNames Method](http://msdn.microsoft.com/en-us/library/system.web.helpers.dynamicjsonobject.getdynamicmembernames%28v=vs.111%29.aspx)。它返回一个*字符串*的*IEnumerable*。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T20:25:15.583

它不起作用，因为它们是字段，而不是属性。而且，是的，它是动态的，所以你可以只使用`item.batch_id`.*

# playframework - 在 Play Framework 1.2.4 中的应用程序之间共享实体

> ID：12922748
> 
> 赞同：0
> 
> 时间：2012-10-16T20:19:20.420
> 
> 标签：playframework, playframework-1.x

我有一组应用程序共享同一个数据库。

一个用于报告，另一个用于用户使用，最后一个用于我们通过电子表格导入客户的系统。

它们都需要相同的实体才能正常运行，并且当时它们都具有包 models.entities。

除了如果我需要更改应用程序中的实体，它迫使我更改另一个以避免冲突。

我可以通过在 PLAY 上创建一个只存储这些实体的模块来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:25:36.060

是的，您可以创建一个包含所有模型类的模块，并在所有应用程序中使用此模块

# html - 停止 HTML 实体

> ID：12922757
> 
> 赞同：1
> 
> 时间：2012-10-16T20:19:52.277
> 
> 标签：html, wordpress

有没有办法阻止 HTML 实体被渲染？

我的意思是我想要两行。首先是呈现实体的位置（例如＆），在第二行，我希望拥有实体本身但不呈现（例如＆ - amp;）。

我不知道它是否有帮助，但我正在使用 WordPress 添加这两行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:22:07.327

逃脱＆符号。例如，不是`&nbsp;`将 & 号呈现为实体：`&amp;nbsp;`.

根据您的示例，使用`&amp;amp;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:21:36.050

只需在 php 中使用 htmlentities() 或 htmlspecialchars() wordpress 在 php.so 中即可使用这些函数： htmlspecialchars('your tags');

# php - 收集 MYSQL 数据库中列中每个唯一单元格的总计

> ID：12922759
> 
> 赞同：0
> 
> 时间：2012-10-16T20:19:54.367
> 
> 标签：php, mysql, database

这是用于从数据库中提取数据的当前代码
`$query = "SELECT username,time,UNIX_TIMESTAMP(time) as timestamp,UNIX_TIMESTAMP(active) as activestamp,IP FROM ".$table_name." WHERE success='1' ORDER BY active DESC";`

这是一组数据示例（删除了所有不重要的字段）
`ID | username
_01 | admin
_02 | admin
_03 | bob
_04 | jill`

我想要的是每个用户出现的总次数，例如：
`admin (2)
bob (1)
jill (1)`

我需要在`COUNT(IF(name = 'admin', 1, NULL)) AS login_totals`我向您展示的原始查询中添加一些类似的内容，但我无法找出正确的代码。我的示例中的名称 admin 必须是当前用户名，所以我是否将“用户名”放在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:22:21.130

试试这个：我添加了`count(*) and the group by`

```
 $query = "SELECT username,time,
UNIX_TIMESTAMP(time) as timestamp,
UNIX_TIMESTAMP(active) as 
activestamp,IP, count(*) 
FROM ".$table_name." WHERE success='1' 
group by username 
ORDER BY active DESC"; 
```

看看这个博客：[http ://www.mysqlperformanceblog.com/2007/04/10/count-vs-countcol/](http://www.mysqlperformanceblog.com/2007/04/10/count-vs-countcol/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:24:27.613

添加`COUNT(username)`in`SELECT`子句并`GROUP BY username`在查询末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:01:39.263

```
SELECT
   username,count(username)
   FROM ".$table_name." WHERE success='1' 
GROUP BY username
ORDER BY active DESC"; 
```

# regex - 尝试使用 find 和 sed 删除恶意软件代码

> ID：12922761
> 
> 赞同：0
> 
> 时间：2012-10-16T20:20:03.207
> 
> 标签：regex, sed, replace, monkey

一些愚蠢的猴子浪费了他们和我的时间来感染我们的一个网站。现在，该网站似乎已通过 ftp 入侵，并且一大堆文件已被感染。更改了 ftp 凭据后，我现在的想法是运行 find 和 sed 以摆脱代码：

```
find . -type f -exec sed -i 's/term-to-search-for//g' {} \; 
```

现在我需要一些关于正则表达式的帮助。脚本以一些 JS 代码开头，`<script>`然后总是有一个名为的变量`egbserb`（在其他地方从未使用过），还有结束标记 ( `</script>`)。两个问题：

1.  这就是我尝试过的：（`script*egbserb*script`保持简单），但没有成功。
2.  如果代码写在更多行上，那么我将如何编写正则表达式？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:44:12.597

以下应该对您有所帮助。（假设：我正在处理 test_regex 文件）

```
sed -r -i "s/.*ebgserb.*//g" test_regex
sed -r -i "s/.*split\(\"\&\&\"\).*//g" test_regex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:02:39.897

我遇到了类似的问题，我成功地使用了它。你可以使用这个 Perl 脚本：

```
#!/usr/bin/perl

use strict;
use warnings;
my @arr;
my $start;
my $flag=1;
open (MYFILE, 'temp');

while (<MYFILE>) {
if($flag!=0)
{
push(@arr,$_);
}
                if(/<\/script>/)
                {
                $flag=1;
                }
                if(/<script>/)
                {
                $start=scalar(@arr);
                }
          if(/ebgserb/)
          {
          delete @arr[$start-1..(scalar(@arr)-1)];
          $flag=0;
          }
}
print "@arr";
close(MYFILE); 
```

# image - qml 图像大小负值

> ID：12922762
> 
> 赞同：2
> 
> 时间：2012-10-16T20:20:05.960
> 
> 标签：image, qt, qml, image-size

我想用 QML Image 元素`height`属性制作一个 QML 动画。但是 Image height 属性的负值在 Timer 中不起作用。

你能告诉我这个动画有什么问题吗？

```
import QtQuick 1.1

Rectangle {
    width: 300
    height: 300

    property int mySize: 10

    Image {
        x: 150; y: 150
        width: 20
        height: -mySize       // animation does not work in Timer, Why?
        //height: mySize      // animation works in Timer
        source: "Bar.jpg"
    }
    Timer {
        interval: 200
        running: true
        repeat: true
        onTriggered: mySize +=5
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:55:38.500

首先，（回答您的问题），您不能使用负尺寸。改为使用[缩放](http://doc-snapshot.qt-project.org/4.8/qml-scale.html)，它支持负值。

```
Scale {
    yScale: ...                // <-- change this value; 1 = original size

    Image {
        x: 150; y: 150
        width: 20; height: 10  // <-- use constant size
        source: "Bar.jpg"
    }
} 
```

其次，您显然应该阅读[QML 中的动画](http://doc-snapshot.qt-project.org/4.8/qml-animation.html)。在 QML 中，您不需要计时器来实现动画。这个想法是你只告诉要动画的属性的开始和结束值，然后激活这个动画。您还可以配置动画的速度/持续时间，甚至是缓动曲线（以在最后减慢动画速度和弹跳之类的花哨的东西......）。一个例子可能是：

```
import QtQuick 1.1

Rectangle {
    width: 300; height:300

    Scale {
        Image {
            x: 150; y: 150
            width: 20; height: 10
            source: "Bar.jpg"
        }

        NumberAnimation on yScale {
            from: 1
            to: -1
            running: ...     // <-- Animation is running while expression is true
        }
    }
} 
```

或者，如果您不想使用属性绑定 on 的表达式`Animation.running`，也可以使用方法`Animation.start()`、`stop()`等。（在动画上设置 id 以使其可从 JavaScript 寻址。）

但是理解和使用表达式中的属性绑定是 QML 的主要部分，因此您应该尝试使用表达式来表达您想要的内容，而不是使用方法调用、事件、条件等。这就是 QML 的方式，也是它美丽的原因。;)

# grails - Grails Quartz 插件并发不工作

> ID：12922765
> 
> 赞同：0
> 
> 时间：2012-10-16T20:20:14.273
> 
> 标签：grails, quartz-scheduler

我无法让 Grails 中的 Quartz Job 按预期同时运行。这是我的工作的样子。我已经注释掉了使用 Executor 插件的行，但是当我不注释掉它们时，我的代码会按预期工作。

```
import java.util.concurrent.Callable

import org.codehaus.groovy.grails.commons.ConfigurationHolder

class PollerJob {

    def concurrent = true
    def myService1
    def myService2
    //def executorService

    static triggers = {
        cron name: 'pollerTrigger', startDelay:0, cronExpression: ConfigurationHolder.config.poller.cronExpression
    }

    def execute() {
        def config = ConfigurationHolder.config
        //Session session = null;
        if (config.runPoller == true) {
            //def result = executorService.submit({
                myService1.doStuff()
                myService2.doOtherStuff()
            //} as Callable)
        }
    }

} 
```

就我而言， myService2.doOtherStuff() 需要很长时间才能完成，这与下次触发该作业时重叠。我不介意它们是否重叠，这就是我明确添加 def concurrent = true 但它不起作用的原因。

我有 Quartz 插件的 0.4.2 版本和 Grails 1.3.7。我在这里做错了吗？似乎是一个非常简单易用的功能。我不反对使用 Executor 插件，但似乎我不应该这样做。

我不确定这是否重要，但在这种情况下，我从配置加载的 cronExpression 意味着每分钟执行一次此作业：“0 * * * * ？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:17:47.743

显然，有一个我不知道的隐藏配置使它无法正常工作。在我的 conf 文件夹中有一个名为 quartz.properties 的文件，其中包含以下属性：

org.quartz.threadPool.threadCount = 1

增加这个数字后，即使我的工作还没有完成上一次执行，它也会触发。

# php - 使用 PHP 搜索 CSV

> ID：12922772
> 
> 赞同：1
> 
> 时间：2012-10-16T20:20:30.390
> 
> 标签：php, search, csv, lookup

我有一个大的 CSV 文件。第一列包含处理器的名称。第二，处理器的基准分数。例如：

> Intel Pentium Dual T3400 @ 2.16GHz,1322

使用 PHP 脚本，我想在第一列中搜索字符串（例如 Pentium Dual T3400），并且（假设每次搜索只有一个结果，否则返回错误消息）创建一个包含第二列。

我不知道这是否会有所帮助，但我有点希望它看起来像这样：

```
$cpuscore = csvsearch(CSV_file,query_string,column#_to_search,column#_to_return) 
```

其中 $cpuscore 将包含与搜索查询匹配的处理器名称的分数。

随意提出一些会产生类似结果的东西。我有 MySQL，但我没有从 CSV 导入表的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:30:14.647

可以使用php函数fgetcsv()，[http](http://php.net/manual/en/function.fgetcsv.php) ://php.net/manual/en/function.fgetcsv.php逐行遍历csv文件。例如：

```
$ch = fopen($path_to_file, "r");
$found = '';

/* If your csv file's first row contains Column Description you can use this to remove the first row in the while */
$header_row = fgetcsv($ch);

/* This will loop through all the rows until it reaches the end */
while(($row = fgetcsv($ch)) !== FALSE) {

    /* $row is an array of columns from that row starting at 0 */
    $first_column = $row[0];

    /* Here you can do your search */
    /* If found $found = $row[1]; */
    /* Now $found will contain the 2nd column value (if found) */

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:29:34.990

我喜欢遍历 csv 文件的每一行并找到我要查找的单词，然后从那里编译结果。这里有一些东西可以帮助你开始：

```
 <?php
   $query = "Intel Core i7 3600M"     
   $file = file('db.csv');    
       foreach($file as $value) { 
         if(stristr($value,$query)){
            $items = explode(",", $value); echo $items[1];
              }; 
         };
    ?> 
```

# sql-server - 将数据库邮件用作电子邮件中继服务器是个好主意吗？

> ID：12922776
> 
> 赞同：5
> 
> 时间：2012-10-16T20:20:51.870
> 
> 标签：sql-server, database-mail, emailrelay

我们的问题之一是我们的出站电子邮件服务器有时很糟糕。用户将在我们的应用程序中触发一封电子邮件，应用程序可能需要大约 30 秒才能实际发送它。让我们让它变得更糟，并承认我们甚至没有在后台线程上执行此操作，因此在此期间用户被完全阻止。SQL Server 数据库邮件已被提议作为该问题的解决方案，因为它基本上实现了一个消息队列，并且在物理上比我们的第三方电子邮件主机更接近且响应速度更快。诚然，它对我们来说也很容易实现，因为它只是将一个调用替换`SmtpClient.Send`为存储过程的执行。我们的大多数申请电子邮件都包含 PDF、XLS 等，我看到这些附件的大小高达 20MB。

使用数据库邮件处理我们所有的应用程序电子邮件对我来说很糟糕，但鉴于实施成本极低，我很难说服任何人放弃它。我们的生产数据库服务器太强大了，所以我也不确定它*是否无法*处理负载。有什么想法或更安全的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:28:21.713

您所要做的就是通过 SMTP 服务器运行它，如果您计划发送大量邮件，那么您不仅需要对服务器（如果您计划发送 100K 邮件，还需要对 DNS 服务器进行负载平衡） + 邮件），但请确保您的出站电子邮件服务器在 DNS 中注册了正确的 A 记录，以防止退回。

这是一个便宜的解决方案（减去负载均衡器成本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:20:46.220

是的，您的内部局域网和互联网的双主服务器，并确保它是仅出站服务器。从一台 SMTP 服务器开始，如果您立即遇到瓶颈，请查看它是否与内存、磁盘、网络或负载相关。如果它的负载相关，那么可能是时候看看负载平衡了。如果它与内存有关，请向其投入更多内存。如果它与磁盘相关，则向其抛出一个 raid 0+1 阵列。如果它与网络相关，请使用更大的管道。

# azure - Azure 流量管理器能否保证不同地理区域中的请求隔离？

> ID：12922777
> 
> 赞同：2
> 
> 时间：2012-10-16T20:20:58.127
> 
> 标签：azure

我试图了解如何设计应用程序的分发。该计划是在不同的地理区域（欧盟、美国、亚洲）复制整个应用程序，并使用 Azure 流量管理器来处理请求分发。

问题是应用程序有一个特殊的需求，请求应该在一个区域内隔离。美国用户应该只被引导到美国数据中心，欧盟用户应该被引导到欧盟数据中心等等。要求是防止流量随机流向不同的数据中心，例如：美国用户很少向美国数据中心发出请求，然后很少向欧盟数据中心发出请求。

同样重要的是要注意，这与请求粘性无关。我需要实现的是来自同一个城市/国家的所有用户总是被引导到同一个数据中心。

只有在数据中心发生故障时，所有请求才能被定向到另一个区域。

是否可以创建这样的配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:22:20.617

据我了解，您似乎可以通过“性能”负载平衡方法来做到这一点。[Microsoft 提供的此动手实验室提供了](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_windowsazuretrafficmanager.aspx)设置流量管理器以处理基于地理位置的请求的分步过程。

# teamcity - 从 Google Test 获取 TeamCity 中的 XML 报告

> ID：12922778
> 
> 赞同：7
> 
> 时间：2012-10-16T20:21:00.087
> 
> 标签：teamcity, googletest

我试图弄清楚如何使用 Google Test 运行单元测试，并将结果发送到 TeamCity。

我已经运行了我的测试，并使用命令行参数将结果输出到 xml `--gtest_output="xml:test_results.xml"`。

我试图让这个 xml 在 TeamCity 中被读取。我看不到如何在构建/运行期间将[XML 报告](http://confluence.jetbrains.com/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ImportingXMLReports "XML 报告") 传递给 TeamCity...

除了通过[XML 报告处理](http://confluence.jetbrains.com/display/TCD7/XML+Report+Processing "XML 报告处理")：

我添加了 XML 报告处理，添加了 Google 测试，然后……它要求我指定监控规则，我添加了 xml 文件的路径……我不明白监控规则是什么，或者如何创建它们。 ..

[不过，我在生成的 xml 中看不到任何地方，它打算与 TeamCity 对话......]

在日志中，我有：

```
Google Test report watcher
[13:06:03][Google Test report watcher] No reports found for paths:
[13:06:03][Google Test report watcher] C:\path\test_results.xml
[13:06:03]Publishing internal artifacts 
```

而且，当然，没有报告结果。

谁能指导我将 xml 测试结果文件导入 TeamCity 的正确方法？非常感谢 ！

编辑：XML 报告处理是否可能只处理在构建期间创建的报告？（哪个 Google 测试没有做？）并且忽略以前生成的报告，因为“已过时”，而只是说它找不到它们 - 或者格式错误，或者......但是我应该阅读上面的信息？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T17:10:35.427

我发现了一个[错误报告](http://youtrack.jetbrains.com/issue/TW-21410)，显示构建期间未生成的 xml 报告被忽略，使像我这样的新手相信它们可能无法正确生成。

两个简单的解决方案：

1）创建后期构建脚本

2) 添加一个使用命令行参数调用命令行可执行文件的构建步骤。例子：

添加构建步骤

![在此处输入图像描述](../Images/edf28d8d81e3ec698a99fe8f73080d13.png)

添加构建功能 - XML 报告处理

![在此处输入图像描述](../Images/6cc90344d4a16d8a737f45c5901995f5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-25T20:17:32.487

我在让它工作时遇到了类似的问题。这就是我让它工作的方式。

当您从命令行调用您的 google 测试可执行文件时，将 %teamcity.build.checkoutDir% 添加到您的 xml 文件的名称中，以设置它的路径，如下所示：

```
--gtest_output=xml:%teamcity.build.checkoutDir%test_results.xml 
```

然后在构建步骤页面上配置您的其他构建功能时，将此行添加到您的监控规则中：

```
%teamcity.build.checkoutDir%test_results.xml 
```

现在路径匹配并且在构建目录中。

# objective-c - ceil() 没有像我预期的那样工作

> ID：12922779
> 
> 赞同：3
> 
> 时间：2012-10-16T20:21:08.480
> 
> 标签：objective-c, ios

我试图将一个数字除以另一个数字，然后立即 ceil() 结果。这些通常是变量，但为简单起见，让我们坚持使用常量。

如果我尝试以下任何一项，当我想获得 4 时，我会获得 3。

```
double num = ceil(25/8); // 3
float num = ceil(25/8); // 3
int num = ceil(25/8); // 3 
```

我已经阅读了这里的几个线程（尝试了[这个线程](https://stackoverflow.com/questions/2311262/math-h-ceil-not-working-as-expected-in-c)的 nextafter() 建议）以及其他站点，但我不明白发生了什么。我已经检查过了，我的变量是我期望的数字，实际上我已经尝试了上述方法，使用常量，但仍然得到意想不到的结果。

在此先感谢您的帮助。我敢肯定，我错过了一些简单的事情，但此时我不知所措。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T20:23:14.347

这是因为您正在做整数运算。在您调用 之前，该值为 3 `ceil`，因为 25 和 8 都是整数。首先使用整数算术计算 25/8，计算结果为 3。

尝试：

```
double value = ceil(25.0/8); 
```

这将确保编译器将常量 2​​5.0 视为浮点数。

您还可以使用显式强制转换来获得相同的结果：

```
double value = ceil(((double)25)/8); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T20:25:21.353

这是因为表达式在作为参数传递给 ceil 函数之前进行了评估。您需要先将其中一个转换为双精度，因此结果将是一个小数，将传递给 ceil。

```
double num = ceil((double)25/8); 
```

# ios - 你如何设置 UICollectionView 动画的持续时间？

> ID：12922780
> 
> 赞同：41
> 
> 时间：2012-10-16T20:21:08.500
> 
> 标签：ios, ios6, grid, collectionview

我有一个自定义流布局，它在使用以下两个函数从 CollectionView 中插入和删除单元格时调整它们的属性，但我无法弄清楚如何调整默认动画持续时间。

```
- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath {
    UICollectionViewLayoutAttributes* attributes = [self layoutAttributesForItemAtIndexPath:itemIndexPath];

    // Assign the new layout attributes
    attributes.transform3D = CATransform3DMakeScale(0.5, 0.5, 0.5);
    attributes.alpha = 0;

    return attributes;
}

- (UICollectionViewLayoutAttributes *)finalLayoutAttributesForDisappearingItemAtIndexPath:(NSIndexPath *)itemIndexPath {

    UICollectionViewLayoutAttributes* attributes = [self layoutAttributesForItemAtIndexPath:itemIndexPath];

    // Assign the new layout attributes
    attributes.transform3D = CATransform3DMakeScale(0.5, 0.5, 0.5);
    attributes.alpha = 0;

    return attributes;
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-02-26T15:24:38.483

要解决[gavrix 在答案](https://stackoverflow.com/a/15146098/1987748)中提出的不破解问题， 您可以使用新属性对 UICollectionViewLayoutAttributes 进行子类化`CABasicAnimation *transformAnimation`，而不是创建具有合适持续时间的自定义转换并将其分配给 in 中`initialLayoutAttributesForAppearingItemAtIndexPath`的属性，然后在 UICollectionViewCell 中根据需要应用属性：

```
@interface AnimationCollectionViewLayoutAttributes : UICollectionViewLayoutAttributes
@property (nonatomic, strong)  CABasicAnimation *transformAnimation;
@end

@implementation AnimationCollectionViewLayoutAttributes
- (id)copyWithZone:(NSZone *)zone
{
    AnimationCollectionViewLayoutAttributes *attributes = [super copyWithZone:zone];
    attributes.transformAnimation = _transformAnimation;
    return attributes;
}

- (BOOL)isEqual:(id)other {
    if (other == self) {
        return YES;
    }
    if (!other || ![[other class] isEqual:[self class]]) {
        return NO;
    }
    if ([(( AnimationCollectionViewLayoutAttributes *) other) transformAnimation] != [self transformAnimation]) {
        return NO;
    }

    return YES;
}
@end 
```

在布局类中

```
- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath {
    AnimationCollectionViewLayoutAttributes* attributes = (AnimationCollectionViewLayoutAttributes* )[super initialLayoutAttributesForAppearingItemAtIndexPath:itemIndexPath];

    CABasicAnimation *transformAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];
    transformAnimation.duration = 1.0f;
    CGFloat height = [self collectionViewContentSize].height;

    transformAnimation.fromValue = [NSValue valueWithCATransform3D:CATransform3DMakeTranslation(0, 2*height, height)];
    transformAnimation.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeTranslation(0, attributes.bounds.origin.y, 0)];
    transformAnimation.removedOnCompletion = NO;
    transformAnimation.fillMode = kCAFillModeForwards;
    attributes.transformAnimation = transformAnimation;
    return attributes;
}

+ (Class)layoutAttributesClass { 
    return [AnimationCollectionViewLayoutAttributes class]; 
} 
```

然后在 UICollectionViewCell 应用属性

```
- (void) applyLayoutAttributes:(AnimationCollectionViewLayoutAttributes *)layoutAttributes
{
    [[self layer] addAnimation:layoutAttributes.transformAnimation forKey:@"transform"];
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-04-18T03:20:51.183

改变CALayer的速度

```
@implementation Cell
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    self.layer.speed =0.2;//default speed  is 1
}
return self;
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-02-05T10:26:49.960

基于@rotava's answer，您可以通过使用集合视图的批量更新来临时设置动画速度：

```
[self.collectionView performBatchUpdates:^{
    [self.collectionView.viewForBaselineLayout.layer setSpeed:0.2];
    [self.collectionView insertItemsAtIndexPaths: insertedIndexPaths];
} completion:^(BOOL finished) {
    [self.collectionView.viewForBaselineLayout.layer setSpeed:1];
}]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-12T20:59:18.577

在尝试`[CATransaction setAnimationDuration:]`并且`[UIView setAnimationDuration:]`在布局过程的每个可能阶段都没有成功之后，我想出了一种有点hacky的方法来改变由它创建的单元动画的持续时间`UICollectionView`，它不依赖于私有API。

您可以使用`CALayer`'`speed`属性来更改在给定层上执行的动画的相对媒体时间。为此`UICollectionView`，您可以`layer.speed`在单元格层上更改为小于 1 的值。显然，让单元格的图层始终具有非统一动画速度并不是很好，因此一种选择是`NSNotification`在准备单元格动画时发送动画完成后的适当时间。

我不建议将这种方法用作长期解决方案，因为它非常迂回，但它确实有效。希望 Apple 将来会为 UICollectionView 动画提供更多选项。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-28T21:35:16.090

`UICollectionView`使用一些硬编码值在内部启动所有动画。但是，在提交动画之前，您始终可以覆盖该值。一般来说，过程如下所示：

*   开始动画
*   获取所有布局属性
*   将属性应用于视图（UICollectionViewCell's）
*   提交动画

应用属性是在每个 UICollectionViewCell 下完成的，您可以在适当的方法中覆盖 animationDuration。问题是 UICollectionViewCell 有公共方法，`applyLayoutAttributes:`但它的默认实现是空的！基本上， UICollectionViewCell 调用了其他私有方法`_setLayoutAttributes:`，这个私有方法由 UICollectionView 调用`applyLayoutAttributes:`，最后调用这个私有方法。默认布局属性，如框架、位置、变换在调用当前`animationDuration`之前应用。`applyLayoutAttributes:`也就是说，您必须`animationDuration`在私有方法中覆盖`_setLayoutAttributes:`

```
- (void) _setLayoutAttributes:(PSTCollectionViewLayoutAttributes *)layoutAttributes
{
    [UIView setAnimationDuration:3.0];
    [super _setLayoutAttributes:layoutAttributes];
} 
```

这显然不是苹果商店安全的。您可以使用其中一种运行时技巧来安全地覆盖此私有方法。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-14T19:26:41.123

您可以设置图层的速度属性（如在[Rotoava 的答案](https://stackoverflow.com/a/23146861/5271393)中）来更改控制动画的速度。问题是您使用的是任意值，因为您不知道插入动画的实际持续时间。

使用[这篇文章](https://stackoverflow.com/questions/28225517/what-is-the-default-animation-duration-for-uicollectionview-layout-changes)，您可以弄清楚默认动画持续时间是多少。

```
newAnimationDuration = (1/layer.speed)*originalAnimationDuration
layer.speed = originalAnimationDuration/newAnimationDuration 
```

如果你想让动画长 400 毫秒，在你的布局中你会：

```
- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes* attributes = [super finalLayoutAttributesForDisappearingItemAtIndexPath:indexPath];
    //set attributes here
    UICollectionViewCell *cell = [self.collectionView cellForItemAtIndexPath:indexPath];
    CGFloat originalAnimationDuration = [CATransaction animationDuration];
    CGFloat newAnimationDuration = 0.4f;
    cell.layer.speed = originalAnimationDuration/newAnimationDuration;
    return attributes;
} 
```

在我的情况下，我有可以拖出屏幕的单元格，我想根据平移手势的速度更改删除动画的持续时间。

在手势识别器（应该是您的收藏视图的一部分）中：

```
- (void)handlePanGesture:(UIPanGestureRecognizer *)sender
{
    CGPoint dragVelocityVector = [sender velocityInView:self.collectionView];
    CGFloat dragVelocity = sqrt(dragVelocityVector.x*dragVelocityVector.x + dragVelocityVector.y*dragVelocityVector.y);
    switch (sender.state) {
    ...
    case UIGestureRecognizerStateChanged:{
        CustomLayoutClass *layout = (CustomLayoutClass *)self.collectionViewLayout;
        layout.dragSpeed = fabs(dragVelocity);
    ...
    }
    ...
} 
```

然后在您的customLayout中：

```
- (UICollectionViewLayoutAttributes *)finalLayoutAttributesForDisappearingItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes* attributes = [super finalLayoutAttributesForDisappearingItemAtIndexPath:indexPath];
    CGFloat animationDistance = sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));
    CGFloat originalAnimationDuration = [CATransaction animationDuration];
    CGFloat newAnimationDuration = animationDistance/self.dragSpeed;
    UICollectionViewCell *cell = [self.collectionView cellForItemAtIndexPath:indexPath];
    cell.layer.speed = originalAnimationDuration/newAnimationDuration;
    return attributes;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-09T13:30:51.697

自 forBaselineLayout 已弃用以来对@AshleyMills 的更新

这有效

```
self.collectionView.performBatchUpdates({ () -> Void in
    let indexSet = IndexSet(0...(numberOfSections - 1))
    self.collectionView.insertSections(indexSet)
    self.collectionView.forFirstBaselineLayout.layer.speed = 0.5
}, completion: { (finished) -> Void in
    self.collectionView.forFirstBaselineLayout.layer.speed = 1.0
}) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-15T15:33:18.197

没有子类化：

```
[UIView animateWithDuration:2.0 animations:^{
  [self.collection reloadSections:indexSet];
}]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-03T08:44:24.130

您可以更改 UICollectionView layout.speed 属性，这应该会更改布局的动画持续时间...

# ruby-on-rails - Rails 部署 - 运行资产：每个部署环境预编译一次还是每次构建只预编译一次？

> ID：12922782
> 
> 赞同：3
> 
> 时间：2012-10-16T20:21:11.403
> 
> 标签：ruby-on-rails, sass

TL;DR：运行 assets:precompile 将生产资产主机注入到为非生产环境生成的资产中。

背景：我们部署 Rails 应用程序的当前方式是 CI 服务器将每个成功的构建作为 tarball 部署到集成环境中。而且这个 tarball 一直被提升到 prod env。但即使在我们 tar 应用程序以推广到不同的环境之前，我们运行

```
rake assets:precompile 
```

一旦这个命令在 tarring 之前运行，我们最终将编译的资产作为 tarball 的一部分，这节省了单个环境的部署时间（预编译很慢）。

问题：在我们在生产环境中引入asset_host 属性之前，这种安排运行良好。因为 assets:precompile 默认在生产环境中运行，并且 sass 文件使用 image-url 标签引用图像资产，所以资产主机开始被预编译拾取，并且生成的资产开始具有对生产环境的直接 URL 引用资产主机的服务器。显然这是不能接受的。

在互联网上搜索导致了这个[Github 问题](https://github.com/rails/sass-rails/issues/93)，这是对我遇到的问题的非常接近的描述。看到 gem 维护者的反应，似乎运行 assets:precompile once for ALL 环境而不是一次 PER 环境似乎是个坏主意。但是考虑到预编译时间很慢，这似乎是我们唯一的方法。

那么其他 Rails 部署是如何处理这个问题的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:21:26.737

检查 public/assets/manifest.yml 到源代码控制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:19:26.510

我正在解决非常相似的问题。我们的解决方案是为每个单独的环境运行预编译——在我们的例子中是登台和生产环境。原因是一样的——不同的资产主机。

如果可以，请仅在必要且真正需要资产的环境中运行预编译。

`capistrano-ext`我们正在使用 Capistrano 与gem一起进行部署。这允许我们指定不同的阶段以及每个阶段特定于阶段的设置和方法（或环境，如果阶段 == 环境）。

# spring - Spring，@PostConstruct，事务......并且使用这种解决方法会发生任何不好的事情吗？

> ID：12922783
> 
> 赞同：0
> 
> 时间：2012-10-16T20:21:12.353
> 
> 标签：spring, hibernate

`@PostConstruct`从一些对先前问题的搜索中，我发现我不能指望以一种带有注释的方法提供[Hibernate](https://stackoverflow.com/a/5635147/617188)会话像这样：

```
getSession().getSessionFactory().openSession() 
```

这对我来说就像一种魅力，但感觉有点……不对劲……有什么我应该注意的潜在陷阱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:27:31.497

`Session`Spring为每个线程管理 Hibernate的边界。

> 我不能指望在使用 @PostConstruct 注释的方法中可以使用 Hibernate 会话

那是错误的，你可以在那个时候有一个会话。

您可以通过多种方式做到这一点，一种是定义 Session 的 bean，并告诉 Spring 通过 SessionFactory bean 的工厂方法“openSession”实例化它。像这样的东西：

```
<!-- Prototype so there is a new Session in every injection -->
    <bean id="newSession" scope="prototype" class="...Session" factory-bean="sessionFactory"
        factory-method="openSession" ... >
    </bean> 
```

此外，您可能想通过 Spring SessionFactory 实现告诉 Spring 使用 Hibernate 托管会话。

# django - 将 json 数据保存并更新到 django 模型

> ID：12922784
> 
> 赞同：0
> 
> 时间：2012-10-16T20:21:13.507
> 
> 标签：django, json, django-models

我有一个简单的模型类

```
class Talk(models.Model):
    url = models.URLField()
    user = models.ForeignKey(User)
    category = models.ForeignKey(Category)
    description = models.TextField(blank=True, max_length=500)
    title = models.TextField(blank=True) 
```

我连接到 oembed api 以从提交的 url 获取数据

```
def get_oembed_info(self):
    params = {'url': self.url, 'format': 'json'}
    fetch_url =  'http://api.embed.ly/1/oembed?%s' % urllib.urlencode(params)
    result = urllib.urlopen(fetch_url).read()
    result = json.loads(result)
    KEYS = ['title', 'type', 'url', 'description', 'provider_url', 'provider_name', 'width', 'height', 'html', 'thumbnail_url', 'author_url']
    for key in KEYS:
    if result.has_key(key):
         setattr(self, key, result[key])

def save(self):
    self.get_oembed_info()
    super(Talk, self).save() 
```

可以从管理员添加一个新的谈话，但是当我稍后尝试更新同一个谈话时，没有任何变化。

这种方式也可以很好地获取数据并将其存储在数据库中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:26:55.280

每次保存时，都会从服务器获取数据并覆盖模型字段。您可以在获取之前检查它是否是新对象：

```
def save(self, *args, **kwargs):
    if not self.pk:
        self.get_oembed_info()
    super(Talk, self).save(*args, **kwargs) 
```

# xcode - xcode xib 文件仅创建空引用

> ID：12922786
> 
> 赞同：2
> 
> 时间：2012-10-16T20:21:23.597
> 
> 标签：xcode, reference, null, xib, textfield

今天我遇到了一个奇怪的问题。我开始了一个非常简单的项目，其中我只有一个带有 UITextField 的视图。在程序执行期间，我想设置该 TextField 的文本，但我发现 UITextField 仅被引用到 0x000000。

当然，在我像往常一样正确地将 Outlet 连接到 TextField 之前 - 我在使用 Xcode 和 iOS 方面有很多经验，并且以前经常这样做。

我尝试了一切，从再次删除 TextField，在界面构建器的帮助下创建一个新的出口，甚至删除所有代码和平，从一开始就做所有事情。但是没有任何效果。

因为我不理解它，所以我创建了一个新项目，尽管这次我以相同的方式完成了所有操作，但它确实有效。Unhopeflly 在许多多行代码之后，我添加了第二个视图，现在我在第二个视图中遇到了同样的问题。

现在有人吗，我做错了什么？

如果您需要某种代码，请告诉我，但请相信我，我真的只是创建了一个新视图，在上面放了另一个 TextField，通过 Xcode 创建了出口，然后按下运行。然后我在 viewDidLoad 方法中设置了一个断点，你在这里： TextField only 被引用为 nil。

如果您有任何想法，请帮助我。

# java - HttpServlet 可以使用 doGet() 方法或其他方法向客户端响应我自己的类的实例的对象吗？

> ID：12922787
> 
> 赞同：0
> 
> 时间：2012-10-16T20:21:27.207
> 
> 标签：java, jsp, servlets

HttpServlet 可以使用 doGet() 方法或其他方法向客户端响应我自己的类的实例的对象吗？

我想到的是发送在客户端创建的序列化对象，让服务器端处理它并将序列化对象 - “后端对象” - 作为响应发送回客户端。

考虑到我刚刚开始阅读有关 servlet 的内容，这个问题在我阅读时突然出现在我的脑海中，以查看我是否会使用 servlet 实现我的目标，或者我走错了路，请善待，不要告诉我用谷歌搜索它，因为我已经在谷歌搜索和阅读我找到的关于 servlet 的所有内容。

提前谢谢你：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:59:13.997

是的，您可以将对象传递回服务器并返回修改后的对象，**前提**是您将对象序列化为文本并将其反序列化为双方的对象。查看[JSON](http://json.org)。正如您所描述的，它是实现对象交换的流行方法之一。

# objective-c - 查找点靠近线并且位于线的端点之间

> ID：12922789
> 
> 赞同：4
> 
> 时间：2012-10-16T20:21:31.513
> 
> 标签：objective-c, xcode, algorithm, line, point

要查找该点是否在包含两个点的指定线上，我进行以下检查：

```
-(Boolean)isOnLine:(Line*) line point:(CGPoint) point{
    //If between two dots:
    if (((line.first.x <= point.x && point.x <= line.last.x)||(line.first.x >= point.x && point.x >= line.last.x))&&((line.first.y<=point.y && point.y<= line.last.y)||(line.first.y>=point.y && point.y>=line.last.y)) ) {    
        //Calculate distance:
        double dist = (((double)point.y - line.first.y)) / (0.00001+((double)(point.x - line.first.x)))- ((double)(line.last.y - line.first.y)) / (0.00001+((double)(line.last.x - line.first.x)));
        NSLog(@"Dist to line: %f", fabs(dist));
        return fabs(dist) <0.5;
    }else
        return NO;  
    }
} 
```

然而，不知何故，该功能不适用于垂直线。我的猜测是 if 子句在某种意义上是无效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:28:49.983

我没有仔细阅读你的代码，所以我不完全确定你在做什么，但是做这个操作最简单的方法是找到线的一端到点的距离，找到另一端的距离线的末端到点，然后添加这些距离并与线的长度进行比较。

就像是：

```
Boolean isOnLine(line, point) {
  var dist1 = dist(line.first, point)
  var dist2 = dist(line.last, point)
  return abs(line.length - (dist1 + dist2)) < .5
} 
```

对于 dist() 函数，我猜 CoreGraphics 提供了它，但如果不是，它只是基本的三角函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T17:55:21.277

@jhocking 解决方案的另一个（我的）实现：

```
- (BOOL)isPoint:(CGPoint)origin nearToLineSegmentPointA:(CGPoint)pointA pointB:(CGPoint)pointB withMarginOfError:(CGFloat)marginOfError {
    CGFloat distanceAP = [self distanceBetweenPointA:origin pointB:pointA];
    CGFloat distanceBP = [self distanceBetweenPointA:origin pointB:pointB];
    CGFloat distanceAB = [self distanceBetweenPointA:pointA pointB:pointB];

    if (fabsf(distanceAB - distanceAP - distanceBP) < marginOfError) {
        return YES;
    } else {
        return NO;
    }
}

- (CGFloat)distanceBetweenPointA:(CGPoint)pointA pointB:(CGPoint)pointB {
    return sqrtf(powf((pointA.x - pointB.x), 2.f) + powf((pointA.y - pointB.y), 2.f));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T22:32:04.177

这是我对 jhockings 解决方案的实现

```
 return abs([line length] -
    (sqrt((line.first.x - point.x)*(line.first.x - point.x)
    + (line.first.y - point.y)*(line.first.y - point.y))
    + sqrt((line.last.x - point.x)*(line.last.x - point.x)
    + (line.last.y - point.y)*(line.last.y - point.y)))) < .5; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T20:50:36.650

为什么它不起作用的解释是您正在比较两个三角形的角度的*切线*- 尽管有注释和变量名称，但您根本没有计算距离。

现在，随着角度接近 90 度，切线的大小迅速增加，直到它本身在 90 度处达到无穷大。在 90 度时，x 坐标的差异为零，您最终会遇到被零除的错误，而不是添加`0.00001`常数来避免它。虽然 90 附近的两条切线之间的*相对*差异可能很小，但即使角度非常接近，*绝对*`< 0.5`差异也可能很大，因此您的测试失败。

所以你需要另一种方法。一种是计算点到两个端点的距离，以及线本身的长度，然后比较——如果到点的两个距离之和大于线的长度，则三个点形成一个三角形，如果不是，它们是共线的。（如果总和更小，你就滑入了另一个维度……）。

您可以使用毕达哥拉斯计算线条的长度：sqrt((x1 - x2)^2 + (y1 - y2)^2)。

# visual-studio-2010 - Visual Studio 2010 患有精神分裂症

> ID：12922791
> 
> 赞同：5
> 
> 时间：2012-10-16T20:21:46.910
> 
> 标签：visual-studio-2010, visual-studio

在安装 VS2010 后的某个时间点，我执行了全局搜索 (ctrl + shift + F)，为文件类型添加 *.xaml。

好吧，现在* .xaml 总是在我打开解决方案后第一次搜索时出现。

我尝试清除该框并关闭所有 VS 实例。但现在，它总是坚持 *.xaml 所以我每次打开解决方案时都必须清除它。

还，

我总是在顶部收到“你有混合标签和空格”的消息，我总是选择“不再显示”。

从我可以收集到这个vs2010中的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:24:27.417

你使用一些扩展吗？如果您使用电动工具，请尝试关闭混合选项卡的选项。在工具选项中选择 Productivity Power Tools 并关闭修复混合选项卡。

# visual-studio-2010 - Visual Studio 解决方案中 SccNumberOfProjects 的含义

> ID：12922795
> 
> 赞同：11
> 
> 时间：2012-10-16T20:22:04.157
> 
> 标签：visual-studio-2010, projects-and-solutions

我正在比较两个解决方案文件，发现它们之间有一个奇怪的区别。它们都正确构建，并且源代码控制似乎有效。我想相信我看到了一个没有区别的区别，但我需要一些帮助来说服自己。

在

```
Global
    GlobalSection(TeamFoundationVersionControl) = preSolution 
```

解决方案之一有

```
 SccNumberOfProjects = 25 
```

另一个有

```
 SccNumberOfProjects = 26 
```

“26”的解决方案有一个部分

```
 SccProjectUniqueName25 = SomethingTests\\SomethingTests.csproj
    SccProjectName25 = SomethingTests
    SccLocalPath25 = SomethingTests 
```

但带有“25”的解决方案以“SccProjectUniqueName24”结尾。

在这两种情况下，SomethingTests 项目在由 Visual Studio 打开时都存在于解决方案中。

另外，我查看了 File->Source Control->Change Source Control，发现在这两种情况下，有问题的项目都绑定到同一个服务器，在源代码管理的正确位置，已连接，状态为“有效的”！

所以，如果有人真的*知道*“Scc”部分是多余的信息，或者类似的东西，那么请告诉我，并请让我知道记录在哪里。

# oauth - iOS 的 OAuth 回调 url

> ID：12922799
> 
> 赞同：2
> 
> 时间：2012-10-16T20:22:14.210
> 
> 标签：oauth, callback

我有一个我在 xCode 4.5 中开发并使用 phonegap 的应用程序。我想连接到 twitter 和 Dropbox 并注册了我的应用程序，我正在使用 childBrowser 和 oAuth.js 进行授权。我遇到的问题是我应该为我的应用设置什么回调 url？我在某些网站上看到在您的 plist 中创建一个 url 方案，我确实将其称为“myapp://”，当我在手机中打开 safari 并在其中输入它时，它会启动我的应用程序，但是当我将它传递给 dropbox 时或 twitter 什么都没有发生，那就是控制权永远不会返回给我的应用程序。

请帮忙！！

# regex - 如何删除包含字符串且不包含其他字符串的行？

> ID：12922806
> 
> 赞同：0
> 
> 时间：2012-10-16T20:23:00.450
> 
> 标签：regex

我需要一些正则表达式帮助。

使用 Firefox firebug 扩展“css-usage”，我能够导出一个新的 css 文件，该实用程序将“未使用”添加到页面中未引用的每个类。

我现在想删除所有包含 UNUSED 样式的样式，但是这样做有一些复杂性。也就是说，一些标签与其他可能仍在使用的标签/选择器用逗号分隔，所以我不想删除任何有逗号的行。其次，一些样式是在花括号中的长多行块中指定的，所以我不想删除任何没有右花括号“}”的行。

我使用的是 mac，所以任何带有 SED 或 AWk 或 vi 的解决方案都是可以接受的。我想删除 css 文件中以“未使用”开头且不包含逗号且必须有一个右大括号“}”的所有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:26:56.273

要在不捕获该字符或向前移动指针的情况下测试字符串是否包含字符，请使用前瞻。

```
(?=.*[,]) 
```

或者，要确保字符串不包含该字符，请使用否定前瞻。

```
(?!.*[,]) 
```

如果要确保字符串不包含字符但包含其他字符，则可以组合负前瞻和正前瞻。

```
(?!.*[,])(?=.*[}])(?=.*UNUSED) 
```

最后，要实际选择发生此匹配的整个字符串，请在前瞻后使用 .*。

```
^(?!.*[,])(?=.*[}])(?=.*UNUSED).*$ 
```

我最熟悉 .NET，但我相信许多正则表达式引擎都有允许您指定是否匹配整个输入字符串的开头/结尾或一行的开头/结尾的`^`选项。`$`你想要第二个选项。

最后，您可以使用正则表达式替换将与给定表达式匹配的行替换为空字符串（从而“删除”这些行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:28:23.710

要匹配`UNUSED`不带逗号并确保它以 : 结尾`}`：

```
UNUSED [^,]*} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:30:25.177

使用正则表达式模式

```
^UNUSED[^,]*}[^,]*$ 
```

带有多行修饰符。

# php - 拦截一个 sql 查询，该查询在没有按下正确的提交按钮的情况下执行相关的 php

> ID：12922810
> 
> 赞同：0
> 
> 时间：2012-10-16T20:23:22.067
> 
> 标签：php, button, submit, isset

如果用户允许出现在页面中，我有一个名为“验证”的提交类型按钮。验证按钮将 db 中的一行设置为已验证 (TRUE)

如果验证字段为真或假，我首先在 db 中检查。

如果 false 和 isset($_POST['valid']) 我显示按钮

```
 <input <?php echo $disabledvalid; ?> type="submit" class="sub" name="valid"  id="valid" value = "validate"   /> 
```

在我输入将验证字段从 FALSE 更改为 true 的 UPDATE 查询之后。

当页面被处理时，if 被忽略并被执行更新查询？

我该如何解决这个问题？

```
 <form action="view_support.php" method="post">
            <?php

            //check if validated field is true or false
            $queryvalid = "SELECT validated FROM support WHERE suppid = $suppid";
            $risqueryvalid = pg_query($queryvalid);
            $row = pg_fetch_array($risqueryvalid);
            $suppvalidated = $row['validated'];
            //echo "supp " . $suppvalidated;

            //$suppvalidated == "f";
            unset($_POST['valid']);
            //if validated field is false show me validate button
            if ( $suppvalidated == FALSE && (isset($_POST['valid'])  ){ 
                $suppvalidated = 'true';

                    <input <?php echo $disabledvalid; ?> type="submit" class="sub" name="valid"  id="valid" value = "validate"   />
                <?php

                if(isset($_POST['valid'])){
                    $vquery = "UPDATE support SET validated = $suppvalidated WHERE suppid = $suppid";
                    $risvquery = pg_query($vquery);
                    if (!$risvquery) {
                        #die("Error during insert support");    
                        die("Errore nella query $risvquery: " . pg_last_error());
                    }
                    unset($_POST['valid']);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:55:35.407

编写此行时，您仍处于 PHP 模式：

```
<input <?php echo $disabledvalid; ?> type="submit" class="sub" name="valid"  id="valid" value = "validate"   /> 
```

你的右括号在哪里：

```
if ( $suppvalidated == FALSE && (isset($_POST['valid'])  ){ 
```

# web-applications - 用于 Web 应用程序的 Java、PHP 或 Python？

> ID：12922811
> 
> 赞同：5
> 
> 时间：2012-10-16T20:23:30.697
> 
> 标签：web-applications, frameworks, server-side

我将编写一个用于管理和标记照片的 Web 应用程序，我想就选择合适的平台/框架征求意见。

从用户的角度来看，该应用程序将非常简单，但是，我需要在后端进行一些更复杂的事情：

*   在单独的/后台线程中重新缩放和处理大量图像（不阻塞服务器/HTTP 响应），并有可能被另一个 HTTP 请求中断该线程
*   访问 Amazon S3 存储，通过网络发送大文件（也在后台线程中）
*   访问 PostgreSQL 并使用复杂且可能很慢的 SQL 查询

此外，我更喜欢一些轻量级的解决方案（越轻量级越好），速度并不是那么重要，但我受到内存的限制——我将在只有 512 MB RAM 的 Linux 虚拟服务器上运行该应用程序。

我对 Java 最熟悉，但我也可以用 PHP 和 Python 编写代码。

您建议我使用哪个平台/框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:26:19.363

这三个都会做。但是，PHP 是_专门_设计_用于编写 Web 应用程序的，因此您会发现针对 PHP 的用例编写的资源和教程比 Python 或 Java 的要多得多。此外，请确保您运行的服务器支持您选择的技术，即用于 Java 的 servlet 容器或用于 PHP 的适当 Apache 模块。

请注意，PHP 不支持线程，所有在线“PHP 线程”教程都是可怕的 hack。我通常使用 PHP 作为 UI 的后端，并在 PHP 或 Python 中从 cron 作业开始执行后台任务。获取 cron 作业（用 PHP 或 Python 编写）的调度任务信息的一个很好的解决方案是使用 php 将它们写入数据库：

```
mysql_query("INSERT INTO PhotosToProcess ('time', 'tmp_name', 'resolution') VALUES (NOW(), 'someName', '640')"); 
```

尽管 Python 支持线程，但我不喜欢从用于输出 UI (HTML) 的进程中生成新线程。

# opengl - OpenGL 模型复杂度级别

> ID：12922819
> 
> 赞同：0
> 
> 时间：2012-10-16T20:24:15.720
> 
> 标签：opengl

我正在开发的一个移动应用程序的范围正在扩大。客户希望在应用程序的产品查看器中拥有实际的 3D 对象，潜在客户/经销商可以缩放和旋转这些对象。我担心将模型带入移动设备中的 OpenGL 环境。

我最大的担忧是复杂性。我查看了一些产品的工程模型，其中一些包含超过 360K 的面孔！有谁知道任何指南可以讨论 OpenGL 能够处理的对象的复杂程度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:43:50.407

> 有谁知道任何指南可以讨论 OpenGL 能够处理的对象的复杂程度？

OpenGL 只是一个规范，并不处理几何复杂性。顺便说一句：OpenGL 不会将几何体视为连贯的对象。对于 OpenGL，它只是一堆松散的点、线或三角形，它一次一个地抛出（即渲染）到帧缓冲区。

任何关于性能的考虑都只对实际实现有意义。例如，低端 GPU 每秒可以处理低至 50 万个顶点，而高端 GPU 每秒可以轻松处理数 1000 万个顶点。

# templates - Symfony 2：PHP 模板自动加载

> ID：12922827
> 
> 赞同：0
> 
> 时间：2012-10-16T20:24:35.933
> 
> 标签：templates, symfony

任何人都可以帮助我使用 Symfony 2（我是新手）。

我刚刚安装了框架，创建了我自己的包，它运行良好，直到我将模板引擎从 Twig 切换到 PHP。

我做的步骤：

*   `templating: { engines: ['php', 'twig'] }`在*config.yml*中指定
**   将视图文件重命名`hello.html.twig`为`hello.html.php`*   将树枝模板代码更改为 php 的`echo`*

 *此外，如果在我离开的行动中：

```
return $this->render('MyBundle:Default:index.html.php', array('name' => $name)); 
```

一切正常，但是当我将其更改为：

```
return array('name' => $name); 
```

Symfony 向我显示一个错误：**找不到模板“MyBundle:Default:index.html.twig”**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:38:23.890

我假设您使用`@Template()`注释？从[官方文档](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/view.html)：

> 如果您使用 PHP 作为模板系统，则需要明确说明::
> 
> /**
>   * @Template(engine="php")
>   */
> public function showAction($id)
> {
>     // ...
> }

所以你应该添加`engine="php"`到注释中。*

# java - 接受 URL 作为参数并返回 Java 中的 ImageView

> ID：12922830
> 
> 赞同：0
> 
> 时间：2012-10-16T20:24:44.953
> 
> 标签：java, android, bitmap, imageview

我试图解决这个问题好几天，但还没有运气。请帮助我。我需要编写一个函数来接受 URL 作为参数并返回 ImageView。有人可以告诉我如何修改此代码来做到这一点吗？它给了我下面的红线`imgURL.setImageBitmap(directory.getString(TAG_IMAGE));`

```
public class ViewProfileActivity extends Activity {

    ImageView imgURL;
    TextView txtName;

    String eid; 

    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();

    private static final String url_veiw_directory = "http://website.com/app/include/view_directory.php";

    private static final String TAG_SUCCESS = "success";
    private static final String TAG_DIRECTORY = "directory";
    private static final String TAG_ID = "eid";
    private static final String TAG_IMAGE = "image";
    private static final String TAG_NAME = "name";  

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_directory);

        Intent i = getIntent();

        eid = i.getStringExtra(TAG_ID);     

        new GetDirectoryDetails().execute();

    }   

    class GetDirectoryDetails extends AsyncTask<String, String, String> {

        protected String doInBackground(String... params) {

            runOnUiThread(new Runnable() {
                public void run() {

                    int success;
                    try {

                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("id", eid));

                        JSONObject json = jsonParser.makeHttpRequest(url_veiw_directory, "GET", params);

                        Log.d("Single Directory Details", json.toString());

                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {                     

                            JSONArray directoryObj = json.getJSONArray(TAG_DIRECTORY);  
                            JSONObject directory = directoryObj.getJSONObject(0);

                            imgURL = (ImageView) findViewById(R.id.image);
                            txtName = (TextView) findViewById(R.id.name);                       

                            imgURL.setImageBitmap(directory.getString(TAG_IMAGE));
                            txtName.setText(directory.getString(TAG_NAME));                         

                        }else{

                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

        protected void onPostExecute(String file_url) {
            pDialog.dismiss();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:29:28.673

[http://developer.android.com/reference/android/widget/ImageView.html#setImageBitmap%28android.graphics.Bitmap%29](http://developer.android.com/reference/android/widget/ImageView.html#setImageBitmap%28android.graphics.Bitmap%29)

`setImageBitmap()`ImageView 中没有接受字符串作为参数的 - 方法。您必须提供位图。

相反，您可以使用[BitmapFactory](http://developer.android.com/reference/android/graphics)创建您的位图，如下所示：

`setImageBitmap(BitmapFactory.decodeFile(directory.getString(TAG_IMAGE)));`

**编辑**：抱歉，忘记了这是您要解码的 URL。请参阅@MarchingHome 答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:35:59.607

I think I see the problem. `ImageView.setImageBitmap` needs a `Bitmap` object as argument. A `String` won't do. You should try to load the `JSONObject` as a `Bitmap` object.

This could be the answer you are looking for: [Loading a Bitmap from URL](https://stackoverflow.com/a/2472175/1110688)

# javascript - 更改链接的 CSS 文件以删除特定 HTML 标记的样式

> ID：12922835
> 
> 赞同：1
> 
> 时间：2012-10-16T20:25:10.570
> 
> 标签：javascript, html, css

我有一个 CSS 文件，它提供了一些样式，但其中一个真的很烂（`<code>`标签样式）。我想消除它，可能通过 JavaScript。有没有快速的方法来做到这一点？

编辑：这些元素不需要样式，我也不需要替换现有的样式，我只需要摆脱它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:31:48.550

*您*可以为`<code>`. 里程可能会有所不同，具体取决于您的加价。

```
body code {
 ... your styling ...
} 
```

请参阅：[http ://coding.smashingmagazine.com/2010/04/07/css-specificity-and-inheritance/](http://coding.smashingmagazine.com/2010/04/07/css-specificity-and-inheritance/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:12:42.720

我最终只是更改了样式表并托管了一份副本。不理想，但实用。

# css - 使用 CSS 选择第一个后代

> ID：12922841
> 
> 赞同：13
> 
> 时间：2012-10-16T20:25:33.587
> 
> 标签：css, html

无论如何使用CSS*只*选择第一个后代。例如，无论如何要从 .container 元素开始并设置带有蓝色边框的 <li class="example"> 样式，而不是其中的 <p class="example"> ？

我知道在 CSS 中有很多替代方法。但是有没有办法用下面的确切代码来做到这一点？这意味着仅使用选择器类 .container 和 .example，将类 .container 保留在下面 HTML 中的确切位置，并使用下面的确切 HTML 标记。

```
<style>
    .container .example{
        border: 1px solid blue;
    }
</style>

<div>
    <div class="container">
        <ul>
            <li class="example"><p class="example"></p></li>
            <li class="example"><p class="example"></p></li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-16T20:27:20.763

你的意思是“直接子选择器”吗？

```
.container > ul > li 
```

..这是你的蓝色边框：

```
.container > ul > li {
    border: solid 1px #00f;
} 
```

..仅使用类，您可以通过以下方式完成：

```
.container > * > .example{
    border: solid 1px #00f;
} 
```

## 选择“层次结构中的第一个”

css2 方式（我认为仍然更强大）是添加边框`.example`并从中删除`.example .example`：

```
.example{
    border: solid 1px #00f;
}
.example .example{
    border: none;
} 
```

在 CSS3 中，您可以这样做：

```
:not(.example) > .example{
    border: solid 1px #00f;
} 
```

请注意，这也*不会*阻止`.example > div > .example`获得蓝色边框..但它保证不是`.example`另一个人的直接孩子`.example`会获得这种风格。

## 更新：从 .container 开始

怎么样`.container :not(.example) > .example`？

我不认为你可以用“干净”的 css 做得更好（即单一规则；无需重置等）。

选择器的意思`not()`是“匹配任何与选择器不匹配的项目”，而不是“禁止此选择器匹配规则中此处的某处”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-14T23:36:16.143

第一个直系子女：

```
.container ul > :first-child{
    border: 1px solid blue;
} 
```

[http://codepen.io/sprynm/pen/PpKBRe](http://codepen.io/sprynm/pen/PpKBRe)

由于和 目标`<ul>`之间有一个节点，因此增加了一些复杂性。`.container`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T21:35:00.930

关于什么：

```
li.example:first-child {border: 1px solid blue;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T20:28:28.727

如果您正在使用该精确标记，为什么您仅限于选择器中的`.container`和`.example`类？

`.container ul > li.example`会选择你想要的，虽然它不符合你的班级限制。

（`>`是子选择器）

适合您所有限制的另一种选择是：

```
.container .example {
  border: 1px solid blue;
}

.container .example .example {
 border: none; 
} 
```

它的局限性在于它显然不只选择第一个后代；它只是覆盖了所有非第一后代的样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-15T05:35:55.613

最简单的方法是：

```
.container ul li{
    border: 1px solid blue;
} 
```

# vb.net - VB：使用来自另一个类的变量的问题+如何处理未使用的接口函数

> ID：12922843
> 
> 赞同：0
> 
> 时间：2012-10-16T20:25:55.323
> 
> 标签：vb.net

我在从另一个类中获取变量时遇到问题，并且无法理解如何处理已经存在于另一个类中的接口函数。

我有的：

单击按钮的表单我应该看到反转的字符串：（**我想调用以下的pooraja.StringReverse**）

```
 Private Sub btnPoora1_Click(sender As System.Object, e As System.EventArgs) _
        Handles btnPoora1.Click

        'Dim text As PrjTekstiPooraja.ITeisendused = New PrjTekstiPooraja.CtekstiPooraja
        Dim text As PrjTekstiPooraja.ITeisendused = New PrjTekstiPooraja.CtekstiPooraja
        Dim pooraja As PrjTekstiPooraja.ITeisendused = New PrjTekstiPooraja.CAlgrotimilinePooraja

        text.strText = txtSisendTekst.Text
        txtValjundTekst1.Text = pooraja.stringReverse

        text.intStart = 1
        text.intEnd = Len(txtSisendTekst.Text)

        ascFSymbol.Text = text.ascFirstSymbol
        ascLSymbol.Text = text.ascLastSymbol()
    End Sub 
```

CtekstiPooraja：（ **这个类将用于存储数据。数据下我的意思是strPooratavText。数据将用于CALgoritmilinePooraja）**

```
 Public Class CtekstiPooraja
    Implements ITeisendused

    Public intStartSymbol As Integer
    Public intEndSymbol As Integer
    Public strPooratavText As String

    Private Property intEnd As Integer Implements ITeisendused.intEnd
        Get
            Return intEndSymbol
        End Get
        Set(ByVal value As Integer)
            intEndSymbol = value
        End Set
    End Property

    Private Property intStart As Integer Implements ITeisendused.intStart
        Get
            Return intStartSymbol
        End Get
        Set(ByVal value As Integer)
            intStartSymbol = value
        End Set
    End Property

    Public Function pooraText() As String Implements ITeisendused.pooraText
        Return StrReverse(strPooratavText)
    End Function

    Public Property strText As String Implements ITeisendused.strText
        Get

            Return strPooratavText
        End Get
        Set(ByVal value As String)
            strPooratavText = value
            MsgBox(strPooratavText)
        End Set
    End Property

    Public Sub teisendaText(ByRef strSisendText As String) Implements ITeisendused.teisendaText
        strPooratavText = StrReverse(strSisendText)
    End Sub

    Public Function ascFirstSymbol() As String Implements ITeisendused.ascFirstSymbol
        Return Asc(GetChar(strPooratavText, intStartSymbol))
    End Function

    Public Function ascLastSymbol() As String Implements ITeisendused.ascLastSymbol
        Return Asc(GetChar(strPooratavText, intEndSymbol))
    End Function

    Public Function stringReverse() As String Implements ITeisendused.stringReverse
        Return Nothing
    End Function

End Class 
```

CAlgrotimilinePooraja：（ **这个类将由表单按钮调用。我需要对来自 CtekstiPooraja 的数据使用 stringReverse 函数。问题是到处都使用相同的接口，并且该接口中有一些函数和过程不`t necessary. I don`知道什么值应该返回这些未使用的函数/程序。仅使用“return Nothing 或 return 0/”是个坏主意，可能有可能以某种方式引用 CTekstiPooraja 函数/程序变量“）**

```
Public Class CAlgrotimilinePooraja
    Implements ITeisendused

    Private x As New PrjTekstiPooraja.CtekstiPooraja
    Public Function stringReverse() As String Implements ITeisendused.stringReverse
        MsgBox(x.strPooratavText)
        Dim i As Integer = 0
        Dim j As Integer
        Dim characters(j) As Char
        Dim newString(j) As Char
        characters = x.strPooratavText.ToCharArray()
        newString = x.strPooratavText.ToCharArray()

        Do While i <= j - 1
            newString(i) = characters(j - 1)
            newString(j - 1) = characters(i)
            i += 1
            j -= 1
        Loop
        Return newString
    End Function

    Public Function ascFirstSymbol() As String Implements ITeisendused.ascFirstSymbol
        Return x.ascFirstSymbol()
    End Function

    Public Function ascLastSymbol() As String Implements ITeisendused.ascLastSymbol
        Return Nothing
    End Function

    Public Property intEnd As Integer Implements ITeisendused.intEnd
        Get
            Return x.intEndSymbol
        End Get
        Set(ByVal value As Integer)

        End Set
    End Property

    Public Property intStart As Integer Implements ITeisendused.intStart
        Get
            Return x.intStartSymbol
        End Get
        Set(ByVal value As Integer)

        End Set
    End Property

    Public Function pooraText() As String Implements ITeisendused.pooraText
        Return x.pooraText()
    End Function

    Public Property strText As String Implements ITeisendused.strText
        Get
            Return x.strPooratavText
        End Get
        Set(ByVal value As String)

        End Set
    End Property

    Public Sub teisendaText(ByRef strSisendText As String) Implements ITeisendused.teisendaText
        x.strPooratavText = StrReverse(strSisendText)
    End Sub
End Class 
```

我的界面：

```
Public Interface ITeisendused

    Property intStart As Integer
    Property intEnd As Integer
    Property strText As String

    Function pooraText() As String
    Function ascFirstSymbol() As String
    Function ascLastSymbol() As String
    Function stringReverse() As String
    Sub teisendaText(ByRef strSisendText As String)

End Interface 
```

我无法理解如何将变量 strPooratavText 从 CTekstiPooraja 获取到 CAlgrotimilinePooraja。通常我创建的那个实例有效但现在不行。当相同的函数和过程在另一个类中有相同的函数和过程时，我无法理解如何处理 CAlgoritmilinePooraja 中已经存在的函数和过程。也许，有可能以某种方式将它们引用到 CTekstiPooraja 中的现有函数/程序？你能解释一下如何识别，已经厌倦了上网寻找解决方案，已经尝试了很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:37:20.807

好吧，我认为您在理解接口方面存在根本问题。它们描述了数据和行为，想要实现接口的一部分应该是非常罕见的。

也就是说，如果您确实想实现接口的一部分，而不是返回虚假数据，请为您未实现的行为抛出异常。

您的具体问题是 CAlgoritmilinePooraja 在 CtekstiPooraja 的实例上工作，但它会创建一个新实例而不是使用现有实例。添加

```
Sub New(incomingX as CtekstiPooraja)
  x = incomingX
End Sub 
```

到 CalgoritmilinePooraja。然后在你的事件中，使用....

```
Dim text As PrjTekstiPooraja.CtekstiPooraja = New PrjTekstiPooraja.CtekstiPooraja
text.strText = txtSisendTekst.Text
Dim pooraja As PrjTekstiPooraja.ITeisendused = New PrjTekstiPooraja.CAlgrotimilinePooraja(text) 
```

这是对您的设计进行的最小更改，可以使您想要发生的事情发生，但这可能不是您应该做的。除了实现 strReverse，CtekstiPooraja 似乎是你想要的，CAlgrotimilinePooraja 看起来只做一件事，实际的字符串反转。

我会将 strReverse 的实现移到 CtekstiPooraja 中，然后消除 CAlgrotimilinePooraja。

PS 我会尽量坚持使用英语的类名以及函数和变量。

# batch-file - 用于在特定目录中搜 索所有 *.xml 文件实例的批处理脚本

> ID：12922845
> 
> 赞同：2
> 
> 时间：2012-10-16T20:26:01.120
> 
> 标签：batch-file

到目前为止，我已经遇到了这个问题：

```
for /r . %%g in (*.xml) do echo %%g 
```

但是我在弄清楚如何为其搜索指定路径时遇到了一些麻烦。例如，我需要查看 Z:\abc\def\ 目录和所有子目录中的所有 XML 文件。

提前感谢您查看此内容！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:46:32.167

天哪……你99%都在那里。

/R 选项后面的点代表当前目录。只需替换您想要的特定路径。

```
for /r "Z:\abc\def" %%g in (*.xml) do echo %%g 
```

如果您要做的只是在屏幕上列出文件，那么您可以使用 DIR 命令：

```
dir /b /s /a-d "Z:\abc\def\*.xml" 
```

# opengl - 在OpenGL中上传纹理非常慢

> ID：12922846
> 
> 赞同：5
> 
> 时间：2012-10-16T20:26:09.820
> 
> 标签：opengl, direct3d

我写了一个模拟器，正在移植到 Linux。目前我正在使用 Direct3D 11 制作视频，我正在将其移植到 OpenGL（我现在正在 Windows 上运行）。我渲染到 1024x1024 纹理，每帧上传到内存（原始硬件并不真正适合现代硬件加速，所以我只是在软件中完成）。但是，我发现在 OpenGL 中上传纹理要慢得多。

在 Direct3D 中，每帧上传纹理都会将帧速率从 416 下降到 395（下降 5%）。在 OpenGL 中，它从 427 下降到 297（下降了 30%！）。

这是我的绘图函数中的相关代码。

Direct3D：

```
D3D11_MAPPED_SUBRESOURCE resource;
deviceContext_->Map(texture, 0, D3D11_MAP_WRITE_DISCARD, 0, &resource);
uint32_t *buf = reinterpret_cast<uint32_t *>(resource.pData);
memcpy(buf, ...);
deviceContext_->Unmap(texture, 0); 
```

OpenGL：

```
glBindTexture(GL_TEXTURE_2D, texture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 1024, 1024, 0, GL_RGBA,
    GL_UNSIGNED_BYTE, textureBuffer); 
```

任何人都可以提出可能导致这种放缓的原因吗？

如果有任何可能性，我正在运行带有 NVIDIA GeForce GTX 550 Ti 的 Windows 7 x64。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T20:53:24.713

> glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 1024, 1024, 0, GL_RGBA, GL_UNSIGNED_BYTE, textureBuffer);

你在这里做错了几件事。首先，`glTexImage2D`相当于每帧*创建*一个 Direct3D 纹理资源。但你不是在创造它；你只是上传到它。每个感兴趣的 mipmap 层应该`glTexImage2D`只使用一次；之后，所有上传都应该使用[`glTexSubImage2D`](http://www.opengl.org/wiki/GLAPI/glTexSubImage2D).

其次，您的[内部格式](http://www.opengl.org/wiki/Image_Format)（左起第三个参数）是`GL_RGBA`. 您应该始终为图像格式使用明确的尺寸。所以使用`GL_RGBA8`. 这不是一个真正的问题，但你现在应该养成这个习惯。

第三，您使用的是[像素传输格式](http://www.opengl.org/wiki/Pixel_Transfer#Pixel_transfer_arguments)`GL_RGBA`的排序（**右边**的第三个参数，而不是左边的第三个参数）。这通常不是最理想的像素传输格式，因为许多硬件倾向于排序。但是，如果您没有从按该顺序生成数据的任何事物中获取数据，那么就无能为力了。**`GL_BGRA`**

 **第四，如果您在开始上传和实际渲染之间还有其他事情可以做，您可以使用[异步像素传输操作](http://www.opengl.org/wiki/Pixel_Buffer_Object)。您将数据写入缓冲区对象（可以映射，因此您不必复制到其中）。然后你用`glTexSubImage2D`这个数据传输到OpenGL。因为源数据和目标图像是 OpenGL 内存的一部分，所以它不必在`glTexSubImage2D`返回之前将数据从客户端内存中复制出来。

当然，这可能对您没有多大帮助，因为您已经在 D3D 案例中有效地进行了该复制。

> 在 OpenGL 中，它从 427 下降到 297（下降了 30%！）

更重要的统计数据是 1 毫秒的差异。您应该以绝对时间而不是每秒帧数或 FPS 下降百分比来查看您的时间。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T20:40:03.930

glTexImage2d 进行内存重新分配和更新。尝试改用 glTexSubImage2d。**

# php - 一半的 PHP 脚本未提交

> ID：12922851
> 
> 赞同：0
> 
> 时间：2012-10-16T20:26:30.020
> 
> 标签：php, mysql

我制作了一个 php 脚本来从同一个数据库中的两个不同表中提取。提取数据后，将其放入另一个表中，该表将保存该特定信息以供以后使用。现在，它将提交用户 ID 和用户名，但不会提交我所说的 puid 变量。

这是脚本

```
include('data.php');

//Database Connection
$con=@mysql_connect("$ip", "$guser", "$gpass")
            or die(mysql_error());

//Select Database
$dbcon=@mysql_select_db($forums, $con)
            or die(mysql_error());

$search = $_POST['term'];

$sql = mysql_query("select userid, usergroupid, username from $users where username like '%$search%'");

while ($row = mysql_fetch_array($sql)) {
    $id = $row['userid'];
    $name = $row['username'];
    $ugid = $row['usergroupid'];
}       

if ($ugid == '21') {

    $sql4 = "INSERT INTO $vip (fuid, username) VALUES ('$id', '$name')";
    $res2 = @mysql_query($sql4, $con) or die(mysql_error());

    $sql2 = mysql_query("SELECT $id, field5 FROM $userfield");
    while ($row = mysql_fetch_array($sql2)) {
        $puid = $row['field5'];
    }

    $sql3 = "INSERT INTO $vip (puid) VALUES ('$puid')";
    $res = @mysql_query($sql3, $con) or die(mysql_error());
    echo 'Completed';
} else {
    echo 'User is not VIP'; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:32:00.183

您没有对所有检索到的行进行这些查询。您应该在 foreach 循环中获取这些查询，否则只会影响最后一行！

# windows-8 - 单击“单击此处查看完整报告”后出现 Windows 应用认证工具包错误

> ID：12922853
> 
> 赞同：5
> 
> 时间：2012-10-16T20:26:35.957
> 
> 标签：windows-8, wack

`Unhandled exception`运行 Windows 应用程序认证工具包并单击“*单击此处查看完整报告*”链接后出现错误。这是我的应用程序的问题还是 Windows 应用程序认证工具包崩溃了？

错误是`Class Not Registered`，这里是详细信息：

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.ComponentModel.Win32Exception (0x80004005): Class not registered
   at System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo)
   at System.Diagnostics.Process.Start(ProcessStartInfo startInfo)
   at System.Windows.Forms.LinkLabel.OnMouseUp(MouseEventArgs e)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Label.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T04:07:32.980

如果 Chrome 被注册为与 .htm 文件关联的默认应用程序，您将收到此错误（我没有在 Firefox 中看到它）。

它在尝试使用 WACK 的结果启动 Validation.htm 文件时特别发生，因此在这方面，不是您的应用程序导致了问题，并且 WACK 确实是完整的。Validation.htm 位于 Visual Studio 解决方案目录的内部，在 Release（或 Debug）文件夹下，因此您可以在任何默认浏览器中直接从文件资源管理器中打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T02:52:48.613

这很烦人，我不想更改我的默认浏览器。只需前往：

\bin\Debug\ValidationResult.htm

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T05:22:36.263

我也遇到了同样的错误。我刚刚从我的系统中卸载了 Chrome 和 Firefox。并且没有错误。而我可以在下面给出的位置查看完整的认证报告：-

```
C:\Users\vishwajeet.kumar\AppData\Local\Microsoft\AppCertKit\ValidationResult.htm 
```

该文件`ValidationResult.htm`包含认证的完整报告。

# java - Encog 神经网络总是给出不一致的结果

> ID：12922855
> 
> 赞同：3
> 
> 时间：2012-10-16T20:26:48.897
> 
> 标签：java, encog

总的来说，我是机器学习和 Encog 的新手，但我希望 Encog 至少能从示例中给出一致的结果，以帮助我更轻松地了解 Encog。对我来说，Encoge 每次运行都会给出不同的方向性结果。

谁能帮助我更好地理解这是为什么？下面是一些正在使用的修改后的示例代码。

方向正确：10/25

方向正确：8/25

方向正确：6/25

...

```
 public class MainPredict {
    public static void main(String[] args) {

        Co.println("--> Main Predict");

        final MarketLoader marketLoader = new YahooFinanceLoader();
        final MarketMLDataSet marketDataSet = new MarketMLDataSet(marketLoader, Config.INPUT_WINDOW, Config.PREDICT_WINDOW);
        final MarketDataDescription marketDataDescription = new MarketDataDescription(Config.TICKER, MarketDataType.adjusted_close, true, true);
        marketDataSet.addDescription(marketDataDescription);

        Calendar end = new GregorianCalendar();// end today
        Calendar begin = (Calendar) end.clone();// begin 30 days ago
        begin.add(Calendar.DATE, -60);
        end.add(Calendar.DATE, -60);
        begin.add(Calendar.YEAR, -2);

        marketDataSet.load(begin.getTime(), end.getTime());
        marketDataSet.generate();

        BasicNetwork basicNetwork = EncogUtility.simpleFeedForward(marketDataSet.getInputSize(), Config.HIDDEN1_COUNT, Config.HIDDEN2_COUNT, marketDataSet.getIdealSize(), true);

        ResilientPropagation resilientPropagation = new ResilientPropagation(basicNetwork, marketDataSet);
        resilientPropagation.setRPROPType(RPROPType.iRPROPp);

//      EncogUtility.trainToError(resilientPropagation, 0.00008);
        EncogUtility.trainConsole(basicNetwork, marketDataSet, 3);

        System.out.println("Final Error: " + basicNetwork.calculateError(marketDataSet));

        MarketEvaluate.evaluate(basicNetwork);

        Encog.getInstance().shutdown();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:23:13.677

将神经网络权重初始化为随机值是很常见的，这几乎会直接破坏确定性。因此，要获得可重复的结果，您需要保存您喜欢的随机初始权重的特定网络实例，然后将其加载到其他运行中作为起点。

在这种情况下，basicNetwork 将是保存的（可能使用 createPersistor() 序列化为 XML），然后在以后每次想要重置它时重新加载，而不是从头开始构建一个新的。

您可以尝试的另一个测试是使用 basicNetwork.clone()，然后在它们上运行您的实验，看看结果如何。

链接：

*   [http://www.heatonresearch.com/javadoc/encog-2.3/org/encog/neural/networks/BasicNetwork.html#clone%28%29](http://www.heatonresearch.com/javadoc/encog-2.3/org/encog/neural/networks/BasicNetwork.html#clone%28%29)
*   [http://www.heatonresearch.com/javadoc/encog-2.3/org/encog/persist/Persistor.html](http://www.heatonresearch.com/javadoc/encog-2.3/org/encog/persist/Persistor.html)

# layout - 在 Bootstrap 中为 span div 添加边框会破坏布局

> ID：12922858
> 
> 赞同：14
> 
> 时间：2012-10-16T20:27:02.743
> 
> 标签：layout, twitter-bootstrap

我从 Twitter Bootstrap 开始，并有一个关于布局如何在其中发挥作用的问题。这是HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Bootstrap Test</title>
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />
        <link rel="stylesheet" type="text/css" href="style.css" />
        <script  src="http://code.jquery.com/jquery-latest.js"></script>
        <script  src="bootstrap/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="span4">a</div>
                <div class="span8">b</div>
            </div>
            <div class="row">
                <div class="span12">c</div>
            </div>
        </div>
    </body>
</html> 
```

样式.css：

```
div.container
{
    background-color:#aaa;
}
div.span4, div.span8, div.span12
{
    background-color:#eee;
    border: 1px solid #888;
    border-radius:3px;
} 
```

向 span4 和 span8 添加边框会增加它们的宽度，我最终得到以下结果：

![引导跨度布局](../Images/a3e8c61fcde2e96e327e1c4a4c0a4fda.png)

span4 和 span8 堆叠在一起，而它们应该在同一行。我意识到我可以在我的 .css 文件中减小它们的宽度并更正它，或者使用它：

[http://paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

但是 Bootstrap 是否提供了纠正此问题的方法（每次添加或删除边框时都不会添加额外的 CSS 等）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-16T21:00:45.853

bootstrap 中的 span 类具有特定的宽度，因此添加边框会抛出行的总数并强制它们换行。为了解决这个问题，我通常将边框样式放在带有 span 类的 div 内的 div 上。像这样的东西：

HTML

```
<div class="row">
   <div class="span4">
       <div>a</div>
   </div>
   <div class="span8">
       <div>b</div>
   </div>
</div> 
```

CSS

```
.span4 > div, .span8 > div
{
   background-color:#eee;
   border: 1px solid #888;
   border-radius:3px;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-30T12:28:05.117

我遇到了完全相同的问题，并且使用 box-sizing 根本没有帮助。最终对我有用的唯一解决方案是使用[`row-fluid`](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem).

与 row-fluid 的区别在于它们基于百分比，而不是固定像素。然后，一行中的子跨度总是加起来为 12，而不是在正常像素宽度行中加起来它们的父跨度宽度。

所以例如你的现在是

```
<div class="container">
    <div class="row-fluid">
        <div class="span4">a</div>
        <div class="span8">b</div>
    </div>
    <div class="row-fluid">
        <div class="span12">c</div>
    </div>
</div> 
```

现在，您不会遇到更改边距、填充或边框的任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T20:41:12.633

听起来你希望你的 div 保持在同一条线上，是吗？为此，您必须指定宽度并浮动它们。Div 往往总是希望彼此堆叠。

这是一个小提琴：http: [//jsfiddle.net/me73v/](http://jsfiddle.net/me73v/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T10:11:27.930

您也可以使用负边距：

```
div.span4, div.span8, div.span12
{
    background-color: #eee;
    border: 1px solid #888;
    border-radius: 3px;
    margin: -1px;
} 
```

`box-sizing: border-box`恕我直言，它不如使用`box-sizing: content-box`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T19:20:30.517

另一种选择是使用 JQuery 调整跨度宽度：

```
$(".some-bordered-container [class*=span] ").each(function(index) {
    $(this).width($(this).width()-1);
}); 
```

它似乎对我很有效。我不会错过像素。

# mysql - 将表连接到json分层片段的单个mysql选择，如何？

> ID：12922859
> 
> 赞同：11
> 
> 时间：2012-10-16T20:27:02.550
> 
> 标签：mysql, sql, json, hierarchical

**从单个**MySQL 选择查询中检索来自两个连接表的所有信息的最佳和最优雅的方法是什么，但是以分层的方式？

我有这两张桌子：

```
-----------------         ------------------
| Table COMPANY |         | Table EMPLOYEE |
-----------------         ------------------
| id            |         | id             |
| companyName   |         | companyId      |
-----------------         | employeeName   |
                          ------------------

(for each company, many employees) 
```

我想输出以下分层 JSON 片段：

```
[
    {"id": 1,
     "companyName": "Company A",
     "employees": [
         {"id": 1, "employeeName": "Employee 1"},
         {"id": 2, "employeeName": "Employee 2"}
    ]},
    {"id": 2,
     "companyName": "Company B",
     "employees": [
         {"id": 3, "employeeName": "Employee 3"},
         {"id": 4, "employeeName": "Employee 4"}
    ]}
] 
```

## “解决方案”1：

对连接的表进行全选，并在创建 json 片段后编写一些代码：

```
select * from company, employee where employee.companyId = company.id; 
```

问题：我留下了很多丑陋的 foreach 类型代码来创建 json 片段

## “解决方案”2：

按公司所有员工在 json 字符串中分组：

```
select company.id, company.name,
   concat('[',
      group_concat('{"id": ', employee.id, ',
         "employeeName": "', employee.employeeName,'"}'), ']') as employees
from company, employee where company.id = employee.companyId
group by company.id 
```

这里，“employees”已经是一个json片段，我只需要jsonify company.id和name即可。**但是**在 mysql 中构建 json 片段似乎是非常糟糕的做法。

任何见解或其他解决方案？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:55:19.440

我可能会使用像您的解决方案 1 这样的查询，只需添加“按 company.id 排序”，然后在表中循环一次，为每一行建立一个数据结构，如果公司与前一个相同一，将员工数据推送到公司，否则，定义新公司并开始使用它来推送员工数据。

像 Carlos Quijano 一样，我在这里看不到任何 foreach 混乱。（但有排序使它更容易处理）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:15:41.667

因为您**需要运行单个 MySQL 查询**并且**不想弄乱针对每种类型的丑陋代码**，所以您可能应该返回一个*无层次的 JSON 结果*，您可以通过序列化查询结果来为您的代码添加一些优雅到带有 DbUtils 查询的集合。

QueryRunner 运行 = new QueryRunner(dataSource);

```
// Use the BeanListHandler implementation to convert all
// ResultSet rows into a List of Employees JavaBeans.
ResultSetHandler<List<Employee>> handler = new BeanListHandler<Employee>(Employee.class);

// Execute the SQL statement and return the results in a List of
// Person objects generated by the BeanListHandler.
List<Employee> employees = run.query("SELECT * FROM EMPLOYEE ORDER BY COMPANY_ID", handler); 
```

但是，如果您*需要生成分层 JSON 结果*，我同意下面的 MortenSickel 回答，使用类型化的 foreach 减少该集合，最后使用 GSON 进行 JSON 编码，我认为这绝对没有问题。

# excel - 如何使用来自多个工作表的数据创建单个图表

> ID：12922861
> 
> 赞同：0
> 
> 时间：2012-10-16T20:27:13.523
> 
> 标签：excel, vba

我正在尝试将包含多个工作表中的数据的图表绘制到同一个图表中。所以每张纸的数据在我的图表中都是一个单独的系列。这是 2 张纸的示例代码：

```
Name1 = ActiveWorkbook.Worksheets(1).Name
Name2 = ActiveWorkbook.Worksheets(2).Name

ActiveSheet.Shapes.AddChart.Select
ActiveChart.ChartType = xlXYScatterSmooth
ActiveChart.ChartArea.Select

ActiveChart.SeriesCollection.NewSeries

ActiveChart.SetSourceData Source:=Range("'" & Name1 & "'!$C$" & nStart & ":$D$" & nLast & "")
ActiveChart.SeriesCollection(1).Name = "=" & Name1 & "!A1"
ActiveChart.SeriesCollection(1).XValues = "='" & Name1 & "'!$C$" & nStart & ":$C$" & nLast & ""
ActiveChart.SeriesCollection(1).Values = "='" & Name1 & "'!$E$" & nStart & ":$E$" & nLast & ""

ActiveChart.SeriesCollection.NewSeries
ActiveChart.SetSourceData Source:=Range("'" & Name2 & "'!$C$" & nStart & ":$D$" & nLast & "")
ActiveChart.SeriesCollection(2).XValues = "='" & Name2 & "'!$C$" & nStart & ":$C$" & nLast & ""
ActiveChart.SeriesCollection(2).Values = "='" & Name2 & "'!$E$" & nStart & ":$E$" & nLast & ""
ActiveChart.SeriesCollection(2).Name = "=" & Name2 & "!A1" 
```

但我在第二系列集合中收到“无效参数”错误。请帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:00:22.260

尝试注释掉第二个系列集合中的代码行，`ActiveChart.SetSourceData Source:=Range("'" & Name2 & "'!$C$" & nStart & ":$D$" & nLast & "")`然后看看它是否有效。

由于您是专门为系列定义值，因此您甚至不需要第一`ActiveChart.SetSourceData`行代码。

您还可以添加这些代码行来为图形命名，因为当您添加第二个系列时它会被覆盖；

```
ActiveChart.SetElement (msoElementChartTitleAboveChart)
Selection.Caption = "NameOfChart" 
```

希望有帮助

# asp.net - 没有代码隐藏的 SharePoint UserControl：如何添加/使用服务引用？

> ID：12922865
> 
> 赞同：1
> 
> 时间：2012-10-16T20:27:20.543
> 
> 标签：asp.net, wcf, sharepoint-2010, code-behind, service-reference

我有几个充满 .ascx 用户控件的项目，其中包含 C# 代码块而不是代码隐藏页面。我正在寻找使用我创建的 WCF 服务，并且我已将服务引用添加到项目中，但我无法使用各种指令在页面上引用它。

这可能吗？如果有不同，则在 SharePoint 2010 中的 WebPart 内部使用 UserControl。如果这也很重要，Web 服务将部署到 _vti_bin，并且绝对可以运行（我已经通过控制台应用程序和利用代码隐藏的可部署项目测试了公开的方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:38:45.140

如果这不是针对 SharePoint 完成的（是的，它有*很大*的不同！）那么我会说您应该创建一个类库项目，将服务引用添加到类库，然后使用您的用户的类库控制。

但是，由于它是 SharePoint，因此您必须关注 DLL 文件的部署。

我认为我的建议的一些变体会起作用。您必须签署类库并将其放入 GAC，或者您应该安排对它进行 bin 部署。无论哪种情况，我相信您都希望将您的控件和此类库包含在同一个功能中。

# memory - openCL CPU 上的最大内存分配

> ID：12922866
> 
> 赞同：6
> 
> 时间：2012-10-16T20:27:24.030
> 
> 标签：memory, opencl

我已经读到最大内存分配限制为设备内存的 60% 左右，并且可以通过修改GPU 的环境变量`GPU_MAX_HEAP_SIZE`和环境变量来更改。`GPU_MAX_ALLOC_SIZE`

如果我想提高内存分配的限制，我想知道 AMD SDK 是否对 CPU 有类似的东西？

对于我当前的配置，它返回以下内容：

`CL_DEVICE_MAX_MEM_ALLOC_SIZE = 2973.37MB`

`CL_DEVI_CEGLOBAL_MEM_SIZE = 11893.5MB`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-11T03:36:31.520

我能够在我的系统上更改它。当您最初提出问题时，我不知道这种方法是否可行。

将环境变量“CPU_MAX_ALLOC_PERCENT”设置为您希望能够为单个全局缓冲区分配的总内存百分比。我有 8GB 系统内存，将 CPU_MAX_ALLOC_PERCENT 设置为 80 后，clinfo 报告以下内容：

```
Max memory allocation:                         6871207116 
```

成功！6.399GB

您也可以对 GPU 设备以相同的方式使用 GPU_MAX_ALLOC_PERCENT。

# python - 避免在 Python 中部分写入文件

> ID：12922888
> 
> 赞同：5
> 
> 时间：2012-10-16T20:28:51.423
> 
> 标签：python, file

在 Python 中编写文件的“最安全”方法是什么？我听说过原子文件写入，但我不确定如何去做以及如何处理它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T20:39:51.107

您想要的是原子文件替换，以便磁盘上永远不会有未完成的最终文件。目标位置仅存在完整的新版本或完整的旧版本。

Python的方法在这里描述：

[Python中的原子文件替换](https://stackoverflow.com/questions/7645338/atomic-file-replacement-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-03T19:53:53.437

您可以写入临时文件并重命名它，但是有很多正确的方法。我更喜欢使用这个不错的库[Atomic Writes](https://github.com/untitaker/python-atomicwrites)。

安装它：

```
pip install atomicwrites==1.4.0 #check if there is a newer version 
```

然后将其用作上下文：

```
from atomicwrites import atomic_write

with atomic_write('foo.txt', overwrite=True) as f:
    f.write('Hello world.')
    # "foo.txt" doesn't exist yet will be created when closing context 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T20:33:25.723

```
with open("path", "w") as f:
    f.write("Hello, World") 
```

with-Statement 的使用保证了文件被关闭，无论发生什么（好吧，它等于 try .. finally）。

# oracle - 字符串内的子字符串

> ID：12922889
> 
> 赞同：4
> 
> 时间：2012-10-16T20:28:56.677
> 
> 标签：oracle

假设这是我的表：

```
ID  STRING
1   'ABC'
2   'DAE'
3   'BYYYYYY'
4   'H' 
```

我想选择在另一行的 STRING 变量中某处的 STRING 列中至少包含一个字符的所有行。

例如，`1`and`2`有一个`A`共同点，`1`ad`3`有一个`B`共同点，但`4`与任何其他行没有任何共同的字符。所以我的查询应该只返回前三行。

我不需要知道它与哪条线匹配。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T21:10:46.080

@ABCade：很好的解决方案，但可以在没有任何`distinct`nor的情况下完成`join`。

```
SELECT * FROM test t1
WHERE EXISTS
(
  SELECT * FROM test t2
  WHERE t1.id<>t2.id AND
  regexp_like(t1.string, '['|| replace(t2.string, '.[]', '\.\[\]')||']')
) 
```

该查询不会将字符串与额外的行进行比较，因为它会在为当前行找到 1 个匹配项后立即停止比较...

[见小提琴。](http://sqlfiddle.com/#!4/4a9a7/12)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T21:04:34.113

@GolezTrol 的回答很好，但这是另一种方法：

```
select distinct t1."ID", t1."STRING" 
from table1 t1, table1 t2
where t1."ID" <> t2."ID"
and regexp_like(t1."STRING", '['|| t2."STRING"||']') 
```

首先取表的笛卡尔积
然后确保您没有将相同的字符串与自身进行比较，
然后从一个字符串创建一个正则表达式以与另一个字符串进行比较 -`[<string1>]`意味着该字符串必须包含其中一个字母，这些字母`[` `]`都来自 string1

[这](http://www.sqlfiddle.com/#!4/5f235/11)是一个小提琴

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T20:41:33.190

像这样：

```
select distinct
  id, name
from
  (select distinct
    x.id,
    x.NAME,
    length(x.NAME) as leng,
    substr(x.name, level, 1) as namechar
  from
    YourTable x
  start with
    level = 0
  connect by
    level <= length(x.name)) y
where
  exists 
    (select 
      'x' 
    from 
      YourTable z 
    where 
      instr(z.name, y.namechar) > 0 and
      z.id <> y.id)
order by 
  id 
```

它能做什么：

首先，（内部选择）使用带有数字生成器的表格，该生成器为名称中的每个字母返回一个数字。现在每条记录都`YourTable`被返回`Length(Name)`次数，每条记录都有另一个数字。该生成的数字用于隔离该字母（substr）。

然后（在顶级 where 子句中进行子选择）检查是否存在包含该孤立字母的记录。需要区分，因为如果多个字母匹配，则多次返回记录。您可以添加`namechar`到外部选择字段列表以查看匹配的字母。

# android - 谷歌地图上的 KMZ 矢量文件

> ID：12922892
> 
> 赞同：2
> 
> 时间：2012-10-16T20:29:07.487
> 
> 标签：android, google-maps, kmz

我有一个 KMZ 矢量文件，可以在我的 Google 地球应用程序上正常工作，但我想通过 Google 地图将它覆盖在我的手机（android）上。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:31:18.943

KMZ 文件只是一个存档结构，包含一个主 KML 文件和零个或多个支持文件。我假设您想要 KML 数据？这就是代表 KMZ 的类似“路线”的内容。就显示 KML 文件而言，它之前已经完成 - 查看之前的[SO](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723) question - 它涉及使用 SAX 解析器（或其他兼容的解析类）解析 KML 并将其拼接到路径中。一旦有了坐标列表，就可以创建一个自定义`Overlay`类，它可以将坐标列表作为参数。然后，在类的`onDraw()`方法上，`Overlay`您只需绘制一个表示坐标列表的路径。有关绘制路线的更多信息，请查看[此](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps)内容。

如果这不是您想要的，请发表评论，我会看看我能做什么！

# java - java客户端中的NullPointer异常？

> ID：12922893
> 
> 赞同：0
> 
> 时间：2012-10-16T20:29:08.420
> 
> 标签：java, eclipse, sockets, exception, nullpointerexception

我正在编写一个简单的客户端，但我总是得到一个`NullPointerException`：

```
 while ((input = in.readLine()) != null) { 
```

这是我的代码：

```
public class ClientTest {

public static String server = "127.0.0.1";
public static int sport = 11111;
public static int cport = 11111;
private static String clientname="";
public static ExecutorService pool = Executors.newCachedThreadPool();
public static BufferedReader in = null;
public static PrintWriter out = null;
public static Socket socket = null;

public ClientTest(){
    this.clientname="";
}

public static void main(String[] args) {

    try {
        socket = new Socket(server, sport);
        out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    } catch(IOException e) {
        System.out.println("could not create connection:\n" + e);
        try {
            if(socket != null) socket.close();
        } catch(Exception ex) {
            ex.printStackTrace();
        }
    }
    pool.execute(new Communicator());

}

public static class Communicator implements Runnable {
    @Override
    public void run() {
        String input = "";
        try {
            while ((input = in.readLine()) != null) {//here  i get the NPException
                StringTokenizer tokenizer = new StringTokenizer(input);
                tokenizer.nextToken();

                if(input.startsWith("!open")) {
                    if(tokenizer.hasMoreTokens()) System.out.print(tokenizer.nextToken() + "> ");
                    else System.out.print("> ");
                } 
                else if(input.startsWith("!exit")) {
                    System.out.print("Hallo hallo");
                } 
            }
        } catch(IOException e) {
            System.out.println("An error as occurred while reading from server - \n" + e);
        }
    }

}

} 
```

为什么我会得到`NullPointerException`？我仍在初始化字符串输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:31:47.173

> 我的问题是，为什么会出现 NP 异常，我仍在初始化字符串输入！

`NullPointerException`如果为空，你会得到一个`in`……它当然可能是。毕竟，如果第一部分中的任何内容`main`引发异常，您将捕获它，将其打印出来......然后继续！因此，如果`socket.getOutputStream()`抛出异常，两者都`in`将为`out`空。

道德：发现异常并继续好像什么都没发生过，这*很少*是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:36:46.513

我认为 try 块中的某些内容失败并且`in`没有被初始化，然后在您运行异常之后`Comunicator`仍然`in`为空。

# ms-word - Microsoft Word 文档中的奇怪字符不会导出/无法搜索

> ID：12922895
> 
> 赞同：3
> 
> 时间：2012-10-16T20:29:13.367
> 
> 标签：ms-word, diacritics, fieldcodes

我有一份草草撰写的文件。这是一个包含西里尔字符的字典。大多数字典都是可以管理的，但我遇到了一件我需要帮助的事情。单词中有重音字母，它们大多被正确格式化为带有 unicode 重音的字母（因此形成一个字母）。然而，有一些非常特殊的字母看起来类似于：a;´（其中“a”是任意西里尔字母）。你会期望 á 代替它。但是，如果只有这个东西可以导出到，比如说 HTML 并在文本编辑器中操作，它本身就不是问题。问题是 Word 将这个“事物”视为单个字符/实体，并且

*   导出时完全省略
*   复制时只能粘贴到记事本中（将其翻译成三个单独的字符），粘贴到写字板时根本不会出现。
*   当在 Word 中运行搜索时，它不会找到字母，既不是实际字符，也不是完全复制/粘贴的组合。
*   在任何其他软件（例如 Libre Office）中打开文档时，该字母将消失

在这一点上，我正在尝试：

*   了解这个组合到底是什么
*   运行搜索/替换操作以查找并清除所有这些错误

[这是](http://www.smallfiles.org/download/2823/dicterr.doc.html)一个示例 Word 文件。

这是相关单词/字母的屏幕截图：

![在此处输入图像描述](../Images/b7066be5228af456423451dca478d69e.png)

正确键入时应显示为“ `скре́пка`”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:16:41.303

“字符”似乎是“eq”（方程式）类型的 Word 字段。这是带有切换域代码的字段：

![在此处输入图像描述](../Images/94619b79608b761bda60d5cf9c2e7d3b.png)

如果它是一个大文档，您可以尝试创建一个 VBA 例程来删除字段并用相应的字符替换它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:45:55.777

假设@Anonimista 的分析是正确的，正如我认为的那样，您可以通过在 Word 中运行一些搜索和替换操作来修复文件，将 ^19eq \o(е;´)^21 替换为 е́ （后者是西里尔字母е 后接重音重音 U+0301)。这很乏味，因为您需要分别为每个元音执行此操作（以及大写元音）。但是我找不到在这种情况下使用通配符的方法；仅当未启用通配符时，字段开始和结束的代码 ^19 和 ^21 才起作用。

# flash - Flash 无法在 IE9 中呈现

> ID：12922899
> 
> 赞同：3
> 
> 时间：2012-10-16T20:29:18.593
> 
> 标签：flash

我已经尝试了所有可以找到的修复程序，但我仍然遇到 Flash 没有出现在我的 IE9 网站上的问题。这是一个白洞。它适用于所有其他浏览器。有什么建议么？

```
<div id="flashContent">
        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="550" height="400" id="Untitled-1" align="middle">
            <param name="movie" value="Untitled-1.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="window" />
            <param name="scale" value="showall" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="" />
            <param name="allowScriptAccess" value="sameDomain" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="Untitled-1.swf" width="550" height="400">
                <param name="movie" value="Untitled-1.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflash">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:51:57.593

使用[SWFObject](http://code.google.com/p/swfobject/)嵌入您的 Flash 文件。

通常它可以解决跨浏览器问题。

这是一个非常方便的代码生成器：http: [//www.bobbyvandersluis.com/swfobject/generator/index.html](http://www.bobbyvandersluis.com/swfobject/generator/index.html)

# heroku - Heroku Push 被 Rails 2.3.5 拒绝

> ID：12922903
> 
> 赞同：3
> 
> 时间：2012-10-16T20:29:37.083
> 
> 标签：heroku, ruby-on-rails-2

我正在尝试将我的应用程序推送到 Heroku，但被拒绝了。这是我收到的错误消息。

```
Counting objects: 63, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (56/56), done.
Writing objects: 100% (63/63), 80.06 KiB, done.
Total 63 (delta 10), reused 0 (delta 0)

-----> Heroku receiving push
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:agile-shelf-2850.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:agile-shelf-2850.git' 
```

我的应用程序是简单的 hello world 应用程序，我正在使用以下内容：

Rails 2.3.5 红宝石 1.8.7 宝石 1.4.2

我研究了该站点并发现其他有此问题但他们正在使用 Rails 3。示例：[Heroku 推送被拒绝，未检测到 Cedar 支持的应用程序](https://stackoverflow.com/questions/8361475/heroku-push-rejected-no-cedar-supported-app-detected)

有任何想法吗？我正在使用这些旧版本，因为我试图集成的项目正在使用这些版本，所以我试图保持一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:32:28.320

您需要将 config/environment.rb 中的 config.gem 行移动到 Gemfile 并安装捆绑程序。Rails 2.x 没有对 Bundler 的固有支持，Cedar 要求您使用 Bundler 来指定应用程序的 gem 依赖项。否则，它不会将您的应用视为 Rails 应用。

通过以下方式安装 Bundler for Rails 2.3：

> [http://gembundler.com/v1.3/rails23.html](http://gembundler.com/v1.3/rails23.html)

如果之后您还有其他问题，请告诉我们！

# jquery - JQuery AJAX 为现有 url 抛出 404

> ID：12922905
> 
> 赞同：2
> 
> 时间：2012-10-16T20:29:39.553
> 
> 标签：jquery, ajax, codeigniter, http-status-code-404

我正在使用 Jquery ajax 调用 CodeIgniter 函数：

```
$.ajax({
  type: "POST",
  dataType:'json',
  beforeSend: function() {
  $("#opc").addClass("opacity");
  $("#searching").show(); 
  },
  url: "<?php echo base_url(); ?>search/get_results",
  data: {
    'ns_pos':ns_pos,
    'NSPlaceDomainID':activity,
    'DistrictID':area,
    'NSAssociationID':referer,
    'Title':text,
    'SettlementID':settlement,
    'NoOpinion':$("input[name=NoOpinion]").is(":checked"),
     'SpecialCharacteristics':ns_attr
  } 
```

ETC...

在 Chrome 控制台中，我收到以下消息：

```
POST http://mattat.org.il/ci/index.php/search/get_results 404 (Not Found) 
```

响应预览是：

```
Not Found

The requested URL /ci/index.php/search/get_results was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

但是，这个函数**确实**存在，当我简单地将链接粘贴到 URL 行时就很明显了。

我很困惑...

编辑：根据@paul 的建设性评论，我已将请求更改为 GET，并且确实找到了该页面。什么会导致这种晦涩难懂的行为？

再一步：当我清空数据对象（如：data: {}）时，即使使用 POST 请求也能找到**该函数**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:48:51.307

正如 Paul 已经指出的那样，由于 GET/POST 限制，这可能是一个错误。如果您支持此端点上的 POST 请求，请检查您的服务器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T21:06:38.220

而不是使用`base_url()`请使用`site_url()`. 我遇到过同样的问题。

可以给出一个简单的示例，其中查看 ajax jQuery 发布。

```
 $.post("<?php echo site_url('message/add') ?>", {message: msg}, function() {
        $('#content').load("<?php echo site_url('message/view/ajax') ?>");
        $('#message').val('');
    }); 
```

消息/添加在这里，您可以猜到该功能是在控制器中定义的。当我第一次处理 php 时，我搜索了一个很好的例子。我不仅是 php 的新闻，也是 codeigniter 的新闻。在许多例子中，实现的形式就像“base_url+message/add”。codeigniter 版本可能会导致此错误，因为它们都是由 2.X 之前的版本编写的。无论如何，如果您想要一个现成的代码，请检查以下链接，它对我有用！

[jQuery ajax 代码点火器示例](http://justalittlebrain.wordpress.com/2010/10/24/codeigniter-and-ajax-using-jquery-tutorial-using-json/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T03:49:53.473

同样的问题让我很困惑。原来是Apache权限问题。我咨询了我的托管服务提供商，他们确认、修复了它并向我展示了如何设置一个每小时运行一次的 Cron 作业以重新声明适当的权限。他们还建议我使用 FileZila 而不是 WinSCP，并为我提供了在重新上传文件时自动重置权限的设置。

# java - 从列表中删除节点

> ID：12922906
> 
> 赞同：2
> 
> 时间：2012-10-16T20:29:52.137
> 
> 标签：java, linked-list, nodes

我的问题：我的删除节点方法适用于从用户创建的列表中删除除第一个元素之外的任何指定节点。我如何让这个方法能够删除列表的前面？

```
public void deleteNode(node spot, node front) {
    node current = spot, previous = front;

    while(previous.next != current) {
        previous = previous.next;
    }
    previous.next = current.next;
} 
```

这是完整的程序代码。

```
import java.io.*;

public class LinkedList {
public int num;
public node front;

//set front to null
public void init() {
    front = null;
}

//make a new node
public node makeNode(int num) {
    node newNode = new node();
    newNode.data = num;
    newNode.next = null;
    return newNode;
}

//find the end of a list
public node findTail(node front) {
    node current = front;

    while(current.next != null) {
        current = current.next;
    }
    return current;
}

//find a specified node
public node findSpot(node front, int num) {
    node current = front;
    boolean searching = true, found = false;

    while((searching)&&(!found)) {
        if(current == null) {
            searching = false;
        }
        else if(current.data == num) {
            found = true;
        }
        else {
            current = current.next;
        }
    }
    return current;
}

//delete a specified node
public void deleteNode(node spot, node front) {
    node current = spot, previous = front;

    while(previous.next != current) {
        previous = previous.next;
    }
    previous.next = current.next;
}

//add nodes to the end of a list
public void add2Back(node front, int num) {
    node tail;

    if (front == null) {
        front = makeNode(num);
    }
    else {
        tail = findTail(front);
        tail.next = makeNode(num);
    }
}

//add nodes after a specified node
public void addAfter(int num, node spot) {
    node newNode;
    newNode = makeNode(num);
    newNode.next = spot.next;
    spot.next = newNode;
}

//print out a list
public void showList(node front) {
    node current = front;

    while(current != null){
        System.out.println(current.data);
        current = current.next;
    }
}

public static void main(String [] args) throws IOException{
    //make a new list and node
    LinkedList newList = new LinkedList();
    node newNode = new node();
    //add data to the nodes in the list
    for(int j = 1; j < 10; j++){
        newList.add2Back(newNode, j);
    }
    //print out the list of nodes
    System.out.println("Auto-generated node list");
    newList.showList(newNode);

    //ask the user how many nodes to make, make those nodes, and show them
    System.out.println("Please enter how many nodes you would like made.");
    BufferedReader inputReader = new BufferedReader(new InputStreamReader(System.in)) ;
    String inputData = inputReader.readLine();
    int listLength = Integer.parseInt(inputData);
    LinkedList userList = new LinkedList();
    node userNode = new node();
    for(int j = 1; j < listLength; j++) {
        userList.add2Back(userNode, j);
    }
    userList.showList(userNode);

    //ask the user to add a new node to the list after a specified node
    System.out.println("Please enter a number for a node and then choose a spot from the list to add after.");
    BufferedReader inputReader2 = new BufferedReader(new InputStreamReader(System.in)) ;
    String inputData2 = inputReader2.readLine();
    BufferedReader inputReader3 = new BufferedReader(new InputStreamReader(System.in)) ;
    String inputData3 = inputReader3.readLine();
    int newNodeValue = Integer.parseInt(inputData2);
    int nodeInList = Integer.parseInt(inputData3);
    userList.addAfter(newNodeValue, userList.findSpot(userNode, nodeInList));
    userList.showList(userNode);

    //ask the user to delete a specified node
    System.out.println("Please enter a node to delete.");
    BufferedReader inputReader4 = new BufferedReader(new InputStreamReader(System.in)) ;
    String inputData4 = inputReader4.readLine();
    int nodeToDelete = Integer.parseInt(inputData4);
    userList.deleteNode(userList.findSpot(userNode, nodeToDelete), userNode);
    userList.showList(userNode);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:39:25.123

问题是您`deleteNode`没有修改`front`列表的成员变量，因为`front`里面的变量`deleteNode`是方法参数，而不是实例变量`front`。

这是您需要做的：

*   `front`作为公共成员公开是`LinkedList`违反封装的。创建`front`一个私有变量。
*   `front`从所有采用它的方法中删除参数；改用私有成员`front`。
*   添加签入`deleteNode`以查看要删除的位置是否为`front`. 如果是，则执行分配`front`新值的特殊操作，然后退出；否则，请执行`while`您已有的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:35:53.050

```
public void deleteNode(node spot, node front) {
    node current = spot, previous = front;
    if(front == spot) {
        front = null;
        return;
    }
    while(previous.next != current) {
        previous = previous.next;
    }
    previous.next = current.next;
    current = null;
} 
```

您开始从`front.next`. 所以`front`它本身每次都被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:32:02.027

```
Delete a node from linklist in PHP by just passing that value to
linklist delete method....

<?php

class ListNode
{

    public $data;

    public $next;

    function __construct($data)
    {
        $this->data = $data;
        $this->next = NULL;
    }

    function readNode()
    {
        return $this->data;
    }
}

class LinkList
{

    private $firstNode;

    private $lastNode;

    private $count;

    function __construct()
    {
        $this->firstNode = NULL;
        $this->lastNode = NULL;
        $this->count = 0;
    }

    //deleting a node from linklist $key is the value you want to delete
    public function deleteNode($key)
    {
        $current = $this->firstNode;
        $previous = $this->firstNode;

        while($current->data != $key)
        {
            if($current->next == NULL)
                return NULL;
            else
            {
                $previous = $current;
                $current = $current->next;
            }
        }

        if($current == $this->firstNode)
         {
              if($this->count == 1)
               {
                  $this->lastNode = $this->firstNode;
               }
               $this->firstNode = $this->firstNode->next;
        }
        else
        {
            if($this->lastNode == $current)
            {
                 $this->lastNode = $previous;
             }
            $previous->next = $current->next;
        }
        $this->count--;  
    }

}

    $obj = new LinkList();

    $obj->deleteNode($value);

}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-08T20:28:35.543

链表删除方法....

```
<?php

class ListNode
{

    public $data;

    public $next;

    function __construct($data)
    {
        $this->data = $data;
        $this->next = NULL;
    }

    function readNode()
    {
        return $this->data;
    }
}

class LinkList
{

    private $firstNode;

    private $lastNode;

    private $count;

    function __construct()
} 
```

# html - 如何使文本出现在 HTML 的列中

> ID：12922909
> 
> 赞同：5
> 
> 时间：2012-10-16T20:30:07.347
> 
> 标签：html, razor, webmatrix

抱歉，这可能是一个厚问题，但是如何让 HTML 显示类似于在 Word 中使用选项卡按钮？我想这样显示：

```
header text      header text      Header text  
text in column   text in column   text in column 
```

如果我使用空格键，它只会忽略空格。实际上，我将把剃刀变量放在列中，但这是我试图创建的总体思路。

毫无疑问，有一个 div 标签或类似的标签代表“标签”功能，或者将文本分列 - 我只是不知道！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T20:34:51.337

您需要使用 CSS + HTML，而不是基于字符的标记。

```
<div class="column">
    <h2>header text</h2>
    <p>paragraph text</p>
</div>
<div class="column">
    <h2>header text</h2>
    <p>paragraph text</p>
</div>
<div class="column">
    <h2>header text</h2>
    <p>paragraph text</p>
</div> 
```

CSS：

```
.column {
     width:300px;
     float:left
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-25T20:26:16.097

所有主流浏览器现在都支持 CSS3，您可以在其中使用 column-count，如下所示：

```
<style>.columns{column-count: 3;}</style>

<div class="columns"> your text ... </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T20:34:38.527

你可能会得到一个 HTML 表格：

```
<table>
  <tr>
   <th>header text</th>
   <th>header text</th>
   <th>header text</th>
  </tr>
  <tr>
   <td>text in column</td>
   <td>text in column</td>
   <td>text in column</td>
  </tr>
 </table> 
```

当然还有一点点造型，你可以看看这个工具：[http ://tablestyler.com](http://tablestyler.com)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T21:11:35.230

您可以为此使用 WebGrid 帮助器（如果您所追求的是 Grid（带有列和行））：

[WebGrid 类文档](http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid%28v=vs.111%29.aspx)

```
<div id="grid">
    @grid.GetHtml(
            headerStyle: "HeaderStyle",
                columns: grid.Columns(
            grid.Column(
                columnName: "NameOfDatabaseColumn",
                header: "Name Of Column"),
            grid.Column(
                columnName: "NameOfDatabaseColumn",
                header: "Name Of Column",
                format: @item["something"]),
            grid.Column(
                columnName: "NameOfDatabaseColumn",
                header: "Name Of Column",
                format: @item["something"]),
            grid.Column(
                columnName: "NameOfDatabaseColumn",
                header: "Name Of Column",
                format: @item["something"])
            )
        )
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T20:43:06.643

我能想到的几件事，

1）使用“ ” （删除 & 之后的空格）与您在 HTML 中的静态文本，这将被转换为空格（不太推荐，除非您只谈论几行静态内容）

2）使用表格并使表格边框不可见

标题文本 标题文本 标题文本

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-27T11:31:42.367

如果您的文本类似于表格，那么您`<table>`将在另一个答案中描述。但是，如果您的文本与表格不同，您可以尝试使用该`<pre>`元素

`<pre>`是预格式化文本的缩写，它保留空白并使用等宽字体。这样，您可以轻松地使文本对齐。

例子：

```
<pre>
header text      header text      Header text  
text in column   text in column   text in column  
</pre> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-25T09:55:40.970

这个问题是在 google 中搜索 HTML 列时出现的第一个问题。接受的答案使用表格进行布局，不应该这样做。

现在您可以使用 CSS 属性`columns`or `display: flex`，它比所有其他答案都简单得多，并且被所有浏览器广泛支持。

对于这个特定的问题`display: flex`效果更好，但对于不需要标题的长文本`columns`就足够了。

```
section {
  display: flex;
}
article {
  padding: 0 2em;
}
```

```
<section class="container">
  <article>
    <h2>First title</h2>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ultrices sapien ut nulla malesuada, at vehicula ex cursus. Suspendisse ac leo aliquet, gravida lectus eleifend, facilisis ante. In pretium tempus orci, id pretium ipsum. Nulla bibendum odio ut lobortis pharetra. Integer nec lectus pellentesque purus eleifend venenatis. In et sagittis ipsum, eget volutpat enim. Vivamus vel neque sit amet nisl vulputate scelerisque id in diam. Fusce pretium, est eget sodales faucibus, turpis erat sollicitudin nisl, a elementum lorem nisi quis nisi. Nullam tincidunt iaculis lectus. Morbi nec sem metus. Nulla cursus tincidunt cursus.</p>
  </article>
  <article>
    <h2>Second title</h2>
    <p>Pellentesque euismod iaculis dolor. Duis finibus arcu nec odio vulputate, vitae ullamcorper felis suscipit. Nullam neque arcu, finibus quis tincidunt eu, pretium nec est. Pellentesque sagittis malesuada mauris sed auctor. Donec neque urna, pharetra in libero in, posuere finibus massa. Nam eu maximus turpis. Sed faucibus, orci sit amet tristique facilisis, enim risus ornare diam, non interdum dolor metus nec sem. Phasellus non sodales justo. Pellentesque congue leo ut diam semper aliquet condimentum id neque. Cras nec eros quis nulla accumsan egestas ac quis purus. Suspendisse leo tellus, dapibus nec facilisis vitae, convallis sit amet ligula.</p>
  </article>
  <article>
    <h2>Third title</h2>
    <p>Morbi non semper dui. Suspendisse posuere dapibus ipsum, vitae gravida nisl pretium aliquet. Vivamus aliquet risus in libero luctus molestie. Proin imperdiet magna nunc, ac fermentum tellus egestas eu. Integer ac erat nisl. Aliquam erat volutpat. Etiam nec lorem ornare nisl sagittis pulvinar. Ut lobortis ullamcorper odio eu porttitor. Nunc luctus, sem quis dictum rutrum, sapien felis pharetra eros, id viverra risus turpis nec arcu. Donec rutrum, mauris ac mollis facilisis, felis nisi vehicula velit, vestibulum placerat velit augue ac magna. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Suspendisse tempor rhoncus facilisis. Morbi pretium, mi quis feugiat rutrum, leo turpis malesuada nisl, at tristique eros leo vitae quam.</p>
  </article>
</section>
```

# javascript - jQuery 对话框奇怪的错误

> ID：12922910
> 
> 赞同：4
> 
> 时间：2012-10-16T20:30:08.280
> 
> 标签：javascript, jquery, jquery-ui, oop

这是迄今为止我在使用 jQuery 时遇到的最烦人和最奇怪的问题。这是可笑的基本（墨菲定律错误之一）

我有一个 div（divDialog）：

```
 <div id="divDialog">
    </div> 
```

我调用对话框函数：

```
 $('#divDialog').dialog(); 
```

它在萤火虫中给了我这个错误：

```
 this.element[0].nodetitle is undefined 
```

如果我删除 div，错误就会消失。如果我只排除选择器部分，它会在萤火虫中显示节点，一切看起来都很好。我目前正在通过以下方式扩展 jquery：

```
$.fn.isAfter = function(sel){ //returns true if element is after, else return false, for animations
    return this.prevAll(sel).length > 0;
}
$.fn.isBefore= function(sel){ //returns true if element is before, else return false, for animations
    return this.nextAll(sel).length > 0;
}
$.fn.exists = function(){ //returns true if element exists, false if not
    return this.length>0;
}
$.fn.btnClick = function(fn){ //check if the element is disabled before executing onclick
    $(this).click(function(){
        if($(this).attr('disabled')!='disabled'){
            fn(this);
        }
    });
    return $(this);
}
$.fn.btnToggle = function(){ //toggle disable/enable
    if($(this).attr('disabled')=='disabled'){
        $(this).removeAttr('disabled');
    }
    else{
        $(this).attr('disabled','disabled');
    }
    return $(this);
} 
```

我也在扩展 Array 原型：

```
 Array.prototype.isArray = true; //this allows us to say if(variable.isArray) to detect arrays 
```

有任何想法吗？我对此感到非常沮丧。任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:55:51.850

问题显然是 jQuery、jQuery UI 或它们配对的版本问题。我使用的是 jQuery 1.7.1 和 jQuery UI 1.8.1。使用谷歌的 AJAX 库后问题消失了。Nodetitle 仅出现在 UI 库中，所以我假设其中的某个地方很大。对于任何 jQuery 开发人员，我建议在 UI 和 vanilla 之间进行某种包控制。也许可以通过使用 AJAX 调用将 UI 移植到浏览器中，以便 UI 始终与正确的 vanilla 包匹配？总之，解决了。

# drupal-7 - 仅在 Drupal 7 page.tpl.php 中渲染单个页面字段

> ID：12922915
> 
> 赞同：1
> 
> 时间：2012-10-16T20:30:25.177
> 
> 标签：drupal-7

所以我收集我可以像这样渲染数组的特定元素`$page['content']`......

```
<?php print render(field_view_field('node', $node, 'field_image')); ?> 
```

在开箱即用的地方，这将使用标准默认值按预期呈现元素。好的，那么我怎样才能确保`<?php print render($page['content']) ?>`稍后在调用中不再呈现手动拔取的元素？

为什么我想要这样愚蠢的东西？因为每个页面都会有一个标题图像，其中包含一些用于覆盖、设计等的 css 技巧。但不是每个页面都会有附件、链接等等……你知道，页面中的附加字段。所以我不能手动打印出每个字段，因为我不知道有多少或还有什么。我所知道的是，我在上面打印的 field_image 包含大量用于样式的标记，并且必须以这种方式完成。其他几个领域也是如此。

基本上我正在寻找一种在使用后立即取消设置字段的方法。

有谁知道如何实现这一目标？我宁愿不制作显示特定页面的视图或自定义块。我最终不得不把它交给一个客户，他们无法将他们的头脑围绕在 CMS 中的许多地方进行管理的单个页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T05:54:48.117

实际上，您可以控制 Drupal 中内容类型的各个字段的显示，而无需求助于您使用过的功能。

由于您事先知道要禁止显示哪些字段，因此可以在内容类型设置中关闭其显示。

在 Drupal 7 中，请参阅：
**管理 >> 结构 >> 内容类型 >>*您的内容类型*>> 管理显示**
在“格式”下，为要省略的字段选择 <隐藏>。

这将阻止字段内容显示在通常的节点内容中，但 field_view_field 自然仍然有效。

您还可以根据不同的视图模式微调字段格式，例如选择在预告片中显示字段但不显示完整内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:41:59.713

看起来这会起作用：

```
<?php
print render(field_view_field('node', $node, 'field_image'));
MYTHEME_remove_item($page['content'], 'field_image');
?> 
```

在 template.php 文件中我做了这个函数：

```
function MYTHEME_remove_item(&$content, $field)
{
    foreach($content['system_main']['nodes'] AS $key => $val){
        unset($content['system_main']['nodes'][$key][$field]);
    }
} 
```

在我看来，这很荒谬。我认为像drupal这样健壮的系统会有这样的解决方案。如果有人知道这样做的正确方法，我很乐意将它们标记为正确。与此同时，对于其他面临类似情况的人来说，这对我有用。

# asp.net-mvc - New Relic Azure Nuget 包安全异常

> ID：12922918
> 
> 赞同：1
> 
> 时间：2012-10-16T20:30:34.437
> 
> 标签：asp.net-mvc, nuget-package, securityexception, newrelic

我正在构建一个 ASP.NET MVC 4 应用程序，我最近安装了一个 NuGet 包，用于简化通过 ASP.NET 运行 New Relic 的过程（这里是 GitHub 上包的链接[https://github.com/mikecousins/newrelicazurenuget](https://github.com/mikecousins/newrelicazurenuget) ) 但它没有用。但是，当我卸载它时，我的应用程序将不再在中等信任级别下运行。

这是我得到的安全异常堆栈：

```
 [SecurityException: Request failed.]
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +161
   System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +120
   System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +452
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +15
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +34
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +229
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +53
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +1694
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +465 
```

我不知道其中任何一个来自哪里，只是在我尝试使用该软件包之前问题不存在。

任何有关导致此问题的原因以及如何解决此问题的帮助将不胜感激。

谢谢。

* * *

编辑：这仅在我将站点发布到本地 IIS 时发生，而不是在我仅通过 VS 调试时发生。信任级别只是在 Web.Config 中设置。有没有办法在调试时强制信任级别，所以当这个错误弹出时我可能会得到更好的代码提示？

# .htaccess - .htaccess 文件中的 CakePHP 路由异常仍然导致缺少控制器错误

> ID：12922929
> 
> 赞同：1
> 
> 时间：2012-10-16T20:31:31.977
> 
> 标签：.htaccess, routing, controller, cakephp-2.0

我安装了 CakePHP 2，但某些 URL 不受默认路由的约束。我通过将异常添加到 .htaccess 文件来做到这一点。因此，例如调用[http://www.mydomain.com/blog](http://www.mydomain.com/blog)或[http://www.mydomain.com/proofgallery](http://www.mydomain.com/proofgallery)都重定向到 cakephp 之外的文件夹。

.htaccess 代码如下所示：

```
# Overrides to the cake routing    
<IfModule mod_rewrite.c>
  RewriteEngine On
RewriteCond %{REQUEST_URI} ^/?  (blog|proofgallery)/(.*)$
  RewriteRule ^.*$ - [L]
</IfModule> 
```

但是，我在 error.log 中注意到某些情况会导致这些豁免的缺少控制器错误。

例如

```
2012-10-16 14:49:15 Error: [MissingControllerException] Controller class ProofgalleryController could not be found.
#0 /home/mydomain/public_html/app/webroot/index.php(96): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}

2012-10-16 11:13:24 Error: [MissingControllerException] Controller class BlogController could not be found.
#0 /home/mydomain/public_html/app/webroot/index.php(96): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse)) 
```

#1 {主要}

这是为什么？以及如何避免？据我所知，应用程序中的所有链接都使用完整的 URL (http://www.mbvphotography.com/blog) 而不是 Cake HTML 帮助程序，这可能解释了缺少控制器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:30:36.283

我想您想添加其他代码但仍想使用 Cakephp。

根据这个你的例子，如果你想添加[http://www.mydomain.com/blog](http://www.mydomain.com/blog)你必须去CakePHP的以下路径“app/webroot”并添加文件夹“blog”。例如，如果您想在 CakePHP 应用程序中使用 wordpress。

验证您在 app/webroot/.htaccess 上是否有默认的 .htacces

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

并删除您对 .htaccess 所做的更改。

如果您有更多疑问，请告诉我

# c - C - 如何从麦克风捕捉声音？

> ID：12922930
> 
> 赞同：1
> 
> 时间：2012-10-16T20:31:33.337
> 
> 标签：c, winapi, audio, capture

> **可能重复：**
> [如何在 C++（操作系统 Windows）中从麦克风获取 PCM 数据？](https://stackoverflow.com/questions/2351659/how-to-get-pcm-data-from-microphone-in-c-os-windows)

如何从麦克风捕获声音，并在另一台计算机上实时听到？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:35:42.643

最简单的方法是使用Win32 API 提供的[waveIn函数。](http://msdn.microsoft.com/en-us/library/aa452431.aspx)

您可以阅读[使用波形音频接口录制和播放声音以](https://web.archive.org/web/20110324040408/http://msdn.microsoft.com/en-us/library/aa446573.aspx)获得概述，或者只是深入研究[API 文档](http://msdn.microsoft.com/en-us/library/ms940101.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:38:28.137

另一个简单的音频 i/o 解决方案是[portaudio](http://www.portaudio.com)。除了便携之外，它还非常易于使用。

正如另一个答案指出的那样，要通过网络获取音频数据，您应该知道您的数据是巨大的。但是，一个好的起点是尝试发送原始数据。一旦你能做到这一点，那么你就可以担心压缩它——你需要一步一步地解决一个复杂的问题。最终，您可能希望将 UDP 用于原始音频数据包。

用于发送音频、视频、聊天和其他数据的好库是 google 的[libjingle](https://developers.google.com/talk/libjingle/)，它实现了 google talk 协议。它解决了 UDP 与 TCP、防火墙等的许多问题。无论如何，您可能会发现它有点难以使用，因为它有很多代码，并且您需要使用您可能不熟悉的 XMPP。此外，它是 C++，而不是 C。它还需要一些服务器中介，尽管您可以使用 google 的服务器。如果这对你不起作用，你可以做一些自产的事情，但你可能会发现你需要做一些工作才能把它做好。

我相信有一些图书馆可以帮助你。尝试在谷歌上搜索诸如“internet telephony library c”和“voip c library”之类的东西（即使这不是，在最严格的意义上，voip）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:38:35.790

要录制，您可以使用 win32API 中的 waveIn 函数。

但是在发送之前，请记住通过waveIn函数进入字节缓冲区的数据是PCM格式，它很容易阻塞您的网络。您必须先将 PCM 数据压缩成 aLaw 或 uLaw 格式，然后才能通过 WinSOCK API 进行隧道传输。否则，它肯定不会是“实时”提要，也会占用大量带宽。

# gridview - Gridview删除按钮不起作用

> ID：12922931
> 
> 赞同：2
> 
> 时间：2012-10-16T20:31:41.697
> 
> 标签：gridview, sqldatasource

我正在尝试使我的网页能够使用网格视图从管理页面编辑数据库（ImportantNews）。但是，当我单击删除时，它只会刷新页面并且不会删除任何内容。我正在使用 ASP.Net 2.0

**网格视图**

```
<asp:GridView ID="GridView2" runat="server" 
  AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
    <Columns>
        <asp:CommandField ShowDeleteButton="True" />
        <asp:BoundField DataField="Title" HeaderText="Title" 
                    SortExpression="Title" />
        <asp:BoundField DataField="Content" HeaderText="Content"
                    SortExpression="Content" />
    </Columns>
</asp:GridView>
<br/>
<b>SqlDataSource</b>
<asp:SqlDataSource ID="SqlDataSource1" 
    runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT * FROM [ImportantNews]" 
     DeleteCommand="DELETE FROM [ImportantNews] WHERE [Content] = @Content AND [Title] = @Title">
    <DeleteParameters>
        <asp:Parameter Name="Title" Type="string"/>
        <asp:Parameter Name="Content" Type="string"/>
    </DeleteParameters>
  </asp:SqlDataSource> 
```

我做了人们建议的事情并得到了这个错误
必须声明标量变量“@Content”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：必须声明标量变量“@Content”。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[SqlException (0x80131904): 必须声明标量变量“@Content”。] System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +1953274 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) ) +4849707 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +194 System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2392 System.Data.SqlClient .SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async) +192 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult 结果, String methodName, Boolean sendToPipe) +317 System.Data.SqlClient.SqlCommand。ExecuteNonQuery() +137 System.Web.UI.WebControls.SqlDataSourceView.ExecuteDbCommand(DbCommand 命令，DataSourceOperation 操作) +386 System.Web.UI.WebControls.SqlDataSourceView.ExecuteDelete(IDictionary 键，IDictionary oldValues) +303 System.Web.UI .DataSourceView.Delete(IDictionary 键，IDictionary oldValues，DataSourceViewOperationCallback 回调) +89 System.Web.UI.WebControls.GridView.HandleDelete(GridViewRow row, Int32 rowIndex) +714 System.Web.UI.WebControls.GridView.HandleEvent(EventArgs e , Boolean CauseValidation, String validationGroup) +869 System.Web.UI.WebControls.GridView.RaisePostBackEvent(String eventArgument) +207 System.Web.UI.WebControls.GridView.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) + 10 系统.Web.UI.页面。RaisePostBackEvent（IPostBackEventHandler sourceControl，字符串 eventArgument）+13 System.Web.UI.Page.RaisePostBackEvent（NameValueCollection postData）+175 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+1565

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:03:55.567

尝试添加 DataKeyNames="Content"

# windows-8 - 是否允许将应用程序旁加载到 Windows RT 设备上？

> ID：12922935
> 
> 赞同：3
> 
> 时间：2012-10-16T20:31:51.240
> 
> 标签：windows-8

是否可以将 Windows 8 应用程序 (WinRT) 旁加载到 Windows RT 设备上，例如新的 Microsoft Surface RT？例如，如果我有一个内部的业务线应用程序，我是否可以向我的主管提供 Microsoft Surface RT 并加载我的公司应用程序而不通过 Windows 应用商店提供它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:31:51.240

**是**的。侧载在以下设备上原生支持：

1.  视窗
2.  视窗 8 专业版
3.  Windows 8 企业版

并且，在 Visual Studio 上启用了侧加载：

4.  视窗 8 核心

企业可以使用 Microsoft Configuration Manager 部署应用程序，就像他们现在部署桌面应用程序一样。企业还可以使用 Microsoft Intune 及其 Windows 8 自助服务门户 ( [http://blogs.msdn.com/b/b8/archive/2012/04/19/managing-quot-byo-quot-pcs-in-the -enterprise-including-woa.aspx](http://blogs.msdn.com/b/b8/archive/2012/04/19/managing-quot-byo-quot-pcs-in-the-enterprise-including-woa.aspx) ) 应用程序也可以安全地向设备交付应用程序。

考虑到这一点？这是一篇关于 W8 平板电脑安全性的有趣文章：http: [//www.windowsecurity.com/articles/Windows-8-Tablets-Secure-enough-Enterprise.html](http://www.windowsecurity.com/articles/Windows-8-Tablets-Secure-enough-Enterprise.html)

喜欢阅读？这里有更多信息：http: [//blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx](http://blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:18:57.410

更多资源

[适用于 Windows 8 的私有企业应用程序部署](http://blogs.telerik.com/mehfuz-hossain/posts/13-04-16/private-enterprise-app-deployment-for-windows-8)

[试试看：旁加载 Windows 应用商店应用程序](http://technet.microsoft.com/en-US/windows/jj874388.aspx?ocid=wc-nl-insider)

[旁加载 Windows 8 应用商店应用](http://blogs.windows.com/windows/b/springboard/archive/2013/02/21/sideloading-windows-8-store-apps.aspx)

# gwt - GWT - 使用填充绘制到 CanvasPixelArray

> ID：12922943
> 
> 赞同：1
> 
> 时间：2012-10-16T20:32:16.580
> 
> 标签：gwt, canvas

我正在搜索（尚未找到）可以绘制到具有填充能力的 CanvasPixelArray 对象的库。我希望能够调用 beginFill 函数，画一些线，然后调用 endFill。

有这样的图书馆吗？也许 GWT 有这样的功能？

# arrays - 为什么人们不在 for 循环中使用 (int i = length(); i > -1; i--) 而不是创建一个新的长度整数？

> ID：12922947
> 
> 赞同：2
> 
> 时间：2012-10-16T20:32:31.463
> 
> 标签：arrays, loops, for-loop

在我学习编程时阅读的所有教程和书籍中，遍历数组的做法一直与 for 循环一起使用：

```
int len = array.length();
for(int i = 0; i < len; i++) {//loop code here} 
```

人们有没有理由不使用

```
for(int i = length(); i > -1; i--) {//loop code here} 
```

据我所知，代码更短，更易于阅读，并且不会创建不必要的变量。我可以看到在某些情况下可能需要从 0 到 end 遍历数组，但在大多数情况下方向并没有影响。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T20:35:28.157

> 在大多数情况下，方向没有区别

诚然，在许多情况下，假设没有任何例外，您最终会得到相同的结果。

但就*考虑代码的作用*而言，从头到尾考虑它通常*要简单得多。*这就是我们在余生中*一直在做的事情。*

哦，你的代码中有一个错误 - 你几乎肯定不希望`length()`作为初始值 - 你可能想要`array.length() - 1`否则它开始成为数组的无效索引（并且只有在修复之后`length()`）`array.length()`。你*有*这个错误的事实证明了我的观点：你的代码比你不喜欢的代码更难快速推理。

在几乎所有情况下，使代码更易于阅读和理解*都比*额外变量的微小、几乎总是无关紧要的代码重要得多*。*（您没有指定语言，但在许多情况下，在我自己的代码中，我只是`array.length()`在每次迭代时调用，然后让优化对其进行排序。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T20:35:36.440

原因是可读性。从 0 开始枚举对我们大多数人来说最有意义，因此它是大多数开发人员的默认选择，除非算法明确需要反向迭代。

在当今所有常见的编程平台中，声明一个额外的整数变量几乎没有成本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T20:39:55.123

取决于您使用的平台。例如，在 Java 中，编译器优化非常好，如果它没有产生任何明显的差异，我不会感到惊讶。我曾经对各种不同的技巧进行基准测试，以了解哪些真正更快，哪些不是。经验法则是，如果您没有强有力的证据证明您在浪费资源，请不要试图智取 Java。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T21:47:49.393

第一个原因是你如何看待它。一般来说，作为人类，我们确实从头到尾迭代，而不是相反。

第二个原因是这种语法源于像 C 这样的语言。在这种语言中，在某些情况下，从结尾到开头是完全不可能的，最明显的例子是字符串 ( `char*`)，通常会为您提供起始地址你必须通过枚举来计算它的长度，直到你找到`0`.

# actionscript-3 - 基于计时器的秒表显示错误时间 AS3

> ID：12922948
> 
> 赞同：0
> 
> 时间：2012-10-16T20:32:35.543
> 
> 标签：actionscript-3

我创建了由两个类组成的秒表。首先是秒表模型。其次是秒表视图。我的秒表正在工作，但显示的时间少于实际持续的时间。看起来我的秒表比现实慢。

秒表模型

```
 private function initStopwatchModel():void{
        timer = new Timer(100,0);
        timer.addEventListener(TimerEvent.TIMER,onTimer);
    }

    private function onTimer(e:TimerEvent):void{
        decsec++;
        if (decsec == 10){
            sec++;
            decsec=0;
            if (sec == 60){
            sec = 0;
            min++;
            }
        }
        playerTimeString = min + ":" + sec + ":" + decsec + "0";
        dispatchEvent(new Event("NEW_TIME"));
    } 
```

秒表查看

```
 private function initModelEventListeners(){
        _model.addEventListener("NEW_TIME",onNewTime);
    }

    //update textoveho pola, vzdy ked sa zmeni cas
    private function onNewTime(e:Event):void{
        textFieldStopWatch.text = _model.playerTimeString;
    } 
```

谢谢你的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:39:40.217

您应该使用[`getTimer`函数](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getTimer())，而不是[`Timer`类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html)。参见例如[https://stackoverflow.com/a/12495538/842685](https://stackoverflow.com/a/12495538/842685)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:40:49.897

因为计时器并不完全准确，但它在某种程度上取决于帧速率，因此它会找到最接近的间隔，即多到一帧时间。

我建议您在应用程序启动时使用[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getTimer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getTimer) () 保存 getTimer() 返回，然后对其进行测量在计时器上并计算差异 - 这肯定会起作用。

该问题也记录在[http://www.computus.org/journal/?p=22](http://www.computus.org/journal/?p=22)

# objective-c - UIView z-index 透明度

> ID：12922950
> 
> 赞同：0
> 
> 时间：2012-10-16T20:33:12.133
> 
> 标签：objective-c, ios, uiview, uigesturerecognizer

我将具有相同框架的视图堆叠在一起，它们都是同一视图的子视图。问题是我使用平移手势将它们移出堆栈，虽然我设置了它的 alpha，但顶部视图下的视图是完全透明的。如何使下面的视图可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:05:17.570

我的问题原来是完全无关的。我从 xib 实例化了两次视图，由于某种原因，这导致了我的问题。

# exception - 尽管在 catch 块中捕获，但未处理的异常错误

> ID：12922952
> 
> 赞同：1
> 
> 时间：2012-10-16T20:33:18.733
> 
> 标签：exception, exception-handling

我收到以下代码的未处理异常类型错误，尽管据我了解，我已经在 catch 块中处理了异常。

```
class NewException extends Exception{
private String msg;
public NewException(String msg){
    this.msg = msg;
}
public String getExceptionMsg(){
    return msg;
}}
class CatchException {
public static void method () throws NewException{
    try {
        throw new NewException("New exception thrown");
    }
    catch (NewException e){
        e.printStackTrace();
        System.out.println(e.getExceptionMsg());
    }
    finally {
        System.out.println("In finally");
    }
}}
public class TestExceptions{
public static void main(String[] args){
    CatchException.method();
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:38:38.450

您`method()`声明它会抛出`NewException`. 该方法中的任何内容都无关紧要：

```
public static void method () throws NewException{
    //...
}}

public static void main(String[] args){
    CatchException.method();
}} 
```

编译器看到您正在调用`CatchException.method()`并且`main()`您没有以任何方式处理它（捕获或声明`main()`也抛出`NewException`。因此错误。

编译器并不关心你是否真的抛出了那个异常。看看[`ByteArrayInputStream.close()`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayInputStream.html#close%28%29)- 它永远不会抛出`IOException`- 但你仍然必须处理它，因为它被声明了。

# hibernate - 条件查询返回子对象而不是请求的父对象

> ID：12922954
> 
> 赞同：1
> 
> 时间：2012-10-16T20:33:28.610
> 
> 标签：hibernate, mapping, hibernate-criteria

我对休眠条件查询有疑问。我有：

```
DetachedCriteria carCriteria = DetachedCriteria.forClass(Car.class);
List<Car> cars = getHibernateTemplate().findByCriteria(carCriteria);

for(Car car : cars) {
System.out.println("class type " + car.getClass());
} 
```

上面打印了类类型 model.FourByFour，其中 FourByFour 扩展了 Car。因为我在 DetachedCriteria 中指定了 Car 类，所以我期望类类型是 Car 而不是 FourByFour。

映射（简化）：

```
<hibernate-mapping default-access="field" default-lazy="true" package="model">
<class name="model.Vehicle" table="VEHICLE">
<id column="VEHICLE_ID" name="id" type="long">
    <generator class="native" />
</id>

    ...

    <joined-subclass extends="model.Vehicle" name="model.Car" table="CAR">
    <key column="VEHICLE_ID" />
        ....
        <joined-subclass extends="model.Car" name="model.FourByFour" table="FOUR_BY_FOUR">
    <key column="VEHICLE_ID" />
    </joined-subclass>
</joined-subclass>
</class> 
```

如何使从条件查询返回的对象成为 Car 对象而不是 FourByFour 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:52:32.670

您要求汽车，并且由于 FourByFour 扩展*了 Car，FourByFour 是*汽车，因此查询还返回了 FourByFour 实例。Hibernate 查询是多态的。就像您去汽车商店时，他们会向您展示他们所有的汽车，即使它们是 SUV、Monospaces 或混合动力汽车。

要限制到特定的类实例，您必须添加一个附加条件：

```
carCriteria.add(Restrictions.eq("class", Car.class)); 
```

# jquery - 在模态弹出窗口中动态扩展图像

> ID：12922955
> 
> 赞同：0
> 
> 时间：2012-10-16T20:33:30.293
> 
> 标签：jquery, image, resize, gallery

我即将开始在一个作品集页面上工作，其中画廊由四个选项卡组成。

在每个选项卡中，将有三个投资组合样本。

单击时，我希望相关图像在模式弹出窗口中展开。

如果有人能指出可以动态处理此问题的 jQuery 插件的方向，我将不胜感激，即画廊上的图像与扩展的图像相同。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:37:28.740

我用过的最简单和最好的。您需要做的就是将图像包装在链接元素中并使用 jQuery 选择器来触发插件。

[http://fancybox.net/](http://fancybox.net/)

# ios - iOS应用突然找不到文件

> ID：12922958
> 
> 赞同：0
> 
> 时间：2012-10-16T20:33:34.600
> 
> 标签：ios

原帖：

> 我有一个 iOS 应用程序，它愉快地成功加载了几次文件，然后所有的 >sudden，没有明显的原因，再次加载文件失败。这些路径似乎都是正确的>看到它们成功加载以开始......有没有人知道这可能>发生的任何原因？
> 
> 我首先注意到这是在 ipod touch 上运行应用程序的，但它也发生在 iphone >simulator 中。我正在使用 XCode 4.2 和 iOS6。

编辑：事实证明，我使用的音频系统没有正确释放音频播放器对象，所以大概他们最终保持文件句柄打开或其他什么，导致新文件无法打开。在音频播放器完成后添加一个版本似乎已经解决了问题，或者至少显着降低了它发生的可能性！

如果您遇到文件无法打开的类似问题，您可以检查以确保文件句柄没有保持打开状态（当文件不再需要时，每个 fopen 都应该有一个 fclose）。

# c# - APPCRASH 消息的详细信息是什么意思？

> ID：12922961
> 
> 赞同：7
> 
> 时间：2012-10-16T20:33:59.247
> 
> 标签：c#, event-log, crash-reports, crash, windows-error-reporting

我在 C# 应用程序中遇到 APPCRASH。运行时给出“此应用程序已请求运行时以异常方式终止它”的错误消息。然后，当我单击确定时，我会收到一条“MyApplication 已停止工作”消息，其中包含通常的“在线检查解决方案”、“关闭程序”和“调试程序”选项。当我单击“附加详细信息”时，我得到了 APPCRASH 签名，其中包含许多附加信息。其中一些是人类可读的，其中一些只是十六进制数字。“异常代码”是 40000015。还有几行“附加信息”。我的问题是：宇宙中是否有人知道 APPCRASH 消息中的信息是什么意思？

似乎这条消息是为了让能从中推测出原因的人阅读。在搜索答案时，我发现很多人发布格式完全相同的消息。不幸的是，我没有找到有关此信息含义的解释。

另外，我尝试了“调试程序”选项，但它没有帮助。它只是把我放在系统 dll 中，而我的代码在调用堆栈中的任何地方都没有。我调查了一下，这个系统代码中没有出现这个错误。

APPCRASH 消息将另一个 dll 命名为“故障模块”（此代码使用了很多外部 dll），并且可能发生致命错误。但这些信息并不是很有帮助，因为我需要在我的代码中找到对外部 dll 进行错误调用（或将其置于错误状态）的位置。可悲的是，当我说“我的代码”时，我只是指我正在使用的代码。这是一个巨大的代码库，由几十个人在几年内编写，所以我不能只猜测可能导致致命呼叫的地方。这就是为什么我希望从 APPCRASH 消息中获得更多信息。这也是我对细节非常吝啬的原因。整个事情都是非常专有的，有很多繁文缛节。这也是我没有发布APPCRASH消息内容的原因。

需要明确的是，我并不是要你为我调试我的问题。我无法给你一个可重现的错误案例，我也没有要求任何人告诉我在我的具体案例中错误的原因。我只想知道如何解释这些十六进制数字，但我找不到任何文档。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-11T20:50:11.767

以下是应用程序崩溃消息的示例：

```
Problem signature:
Problem Event Name: APPCRASH
Application Name: WINWORD.EXE
Application Version: 12.0.4518.1014
Application Timestamp: 45428028
Fault Module Name: StackHash_7ae5
Fault Module Version: 6.0.6000.16386
Fault Module Timestamp: 4549bdc9
Exception Code: c0000374
Exception Offset: 000af1c9
OS Version: 6.0.6000.2.0.0.256.4
Locale ID: 1033
Additional Information 1: 7ae5
Additional Information 2: 4cf2e59e469447e0692da79a5a9446de
Additional Information 3: 333f
Additional Information 4: 583336399425ab3efc33bdfbb60895ee 
```

应用程序名称和应用程序版本很简单，时间戳也是如此（这是文件资源管理器中的更改日期，编码为 32 位 Unix 时间戳值）。故障模块通常是一个dll名称，异常偏移量是导致错误的DLL中硬件指令的偏移地址。在这种情况下，这是一个内部运行时错误，无法检索到有效模块，因此我们得到了 StackHash 而不是实际值。这些版本是 Windows 中可执行文件的普通 PE 版本字符串。区域设置 ID 是正在使用的全球化设置库：1033 是 en-US。

异常代码可以在[这里](http://msdn.microsoft.com/en-us/library/cc704588(d=lightweight,l=en-us,v=PROT.10).aspx)解释。在此示例中，错误是 STATUS_HEAP_CORRUPTION。

附加信息字段是不透明的数据，并且基于异常代码是什么。我不知道有关这些字段的任何有用信息，可能没有，而且这些字段很可能是故意未记录的，以便 Microsoft 可以根据需要更改它们。这些字段通常是大量信息的 md5 哈希......它基本上就在那里，因此可以通过哈希码快速比较大量信息是否相同/不同，这样您就可以知道错误是否是由于与另一个相同的执行状态造成的.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:36:17.670

这意味着您有一个未捕获的未处理异常，它正在使您的应用程序崩溃。

如果它在调试模式下工作，您需要查看发布版本的不同之处。所有的图书馆都在吗？你有你的 app.config 设置吗？

检查 Windows 日志 -> 应用程序下的事件查看器以获取更多信息。

如果您设置异常处理程序，您将获得更好的信息，例如堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T23:03:23.670

您需要生成一个可以在事后分析的故障转储。您将需要对注册表进行一些更改，然后您可以使用 Visual Studio 分析转储文件。希望这将为您提供更多线索，例如失败的特定功能。

有关详细信息，请参阅此网站：http: [//blog.functionalfun.net/2013/05/how-to-debug-silent-crashes-in-net.html](http://blog.functionalfun.net/2013/05/how-to-debug-silent-crashes-in-net.html)

您将设置来自 Microsoft 的工具 DebugDiag。

让我知道事情进展如何，或者您是否找到了一些更好的工具。

问候，

戴夫

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T11:31:58.967

.net 中有一个很好的功能，托管调试器助手，用于解决本机和托管代码互操作问题[MSDN 文章在这里使用它](http://msdn.microsoft.com/en-us/library/d21c150d(v=vs.110).aspx)

MDA 引发的异常可以在 Visual Studio 异常视图窗口中进行配置。

# c# - 在实体框架中使用 Code First 重命名表

> ID：12922962
> 
> 赞同：2
> 
> 时间：2012-10-16T20:34:08.603
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-migrations

有谁知道是否可以*用*`Code First`in重命名数据库表`Entity Framework 5`？

我只有简单的模型和一个数据库初始化程序，但由于我的数据库已经包含数据，我已经注释掉了该初始化程序。所以，我不想和**一个**全新的数据库。`drop``create`

当我向这样的模型添加新列时，我使用`Package Manager Console`并运行`update-database`. 更新我的数据库。这也适用于重命名表吗？该`update-database`命令是否自动知道旧名称是什么？

我还没有很多 CF 经验，每天都在学习新东西。`alter table`如果没有 CF，只需运行一个命令并刷新 dbml 文件就很“容易” ……但是使用 CF？我一点头绪都没有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:44:39.477

采用

```
<Table("TableName")> _
Public Class ClassName
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T21:58:01.997

显然该`update-database`命令知道旧名称是什么...因此，如果出现数据丢失警告，您可以选择应用该`-force`选项。

# stream - RTSP WinRT 客户端应用程序的流读取器/写入器

> ID：12922963
> 
> 赞同：0
> 
> 时间：2012-10-16T20:34:18.470
> 
> 标签：stream, microsoft-metro, windows-runtime, rtsp, inputstreamreader

我花了几个小时来转换旧的 net v2 项目并将其移植到 C# 中的 WinRT。它是一个向 DVB 服务 (DVBViewer) 发送命令的 RTSP 客户端。因此，此时，WinForm 程序已经更新并且运行良好。连接、发送和接收命令到服务器，最后流到我的 localhost UDP 端口都可以正常工作，并且 ts 流可以通过 VLC 和 RTP 协议完全读取。

但现在，我想用这些东西编写我的 Metro 应用程序。我设法完成了这项工作，似乎快完成了（至少是 Socket 和流的东西）。

但是现在，我陷入了一个愚蠢的问题。我无法与 RTSP 服务器通信。我的 Stream Reader/Writer 不工作，我已经尝试了很多。

该应用程序基于 Uniriotec.DV 项目的代码，因此有关更多信息，您可以通过 google 找到它。

所以，这就是我遇到的问题：它是主句柄，就是将 StreamSocket 与 Stream（消息）放在一起。

```
//Set input and output stream filters in the main client app
RTSPBufferedReader = new BufferedReader<Stream> (RTSPsocket);
RTSPBufferedWriter = new BufferedWriter<Stream> (RTSPsocket);

namespace RTSP.Client
{
    public class BufferedReader<T> : StreamReader where T : Stream
    {
        private StreamSocket socket;
        private T unbufferedStream;
        private StreamSocket streamSocket;

        public T UnbufferedStream
        {
            get { return unbufferedStream; }
            set { unbufferedStream = value; }
        }

        public BufferedReader(T myStream)
            : base(myStream)
        {
            unbufferedStream = myStream;
        }

        public BufferedReader(StreamSocket mySocket)
            : base(new Stream(mySocket)) // <== here is the problem, saying "could'nt establish an instance of the abstract or interface class "System.IO.Stream"....
        {
            this.streamSocket = mySocket;
        }
    }
} 
```

你知道我在哪里犯了错误吗？

谢谢你的回答，乔

* * *

PS：我需要等待 writer.StoreAsync(); 因为答案是发送大约 10-15 秒。稍后，当服务器准备好处理请求并向我发送 SessionID 等时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:03:24.857

Stream 类是抽象的，你不能直接实例化一个抽象类，就像你对 base(new Stream(mySocket)) 所做的那样。请参阅此处了解 System.IO.Stream 定义 [http://msdn.microsoft.com/en-us/library/windows/apps/system.io.stream.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/system.io.stream.aspx)

您需要将 Stream 类替换为适当的派生类，例如 DataReader。这是一个使用 StreamSocket 示例的示例，可能会有所帮助： [http ://code.msdn.microsoft.com/windowsapps/StreamSocket-Sample-8c573931](http://code.msdn.microsoft.com/windowsapps/StreamSocket-Sample-8c573931)

# mysql - Mysql查询从另一个复制时间戳数据

> ID：12922972
> 
> 赞同：0
> 
> 时间：2012-10-16T20:34:46.683
> 
> 标签：mysql, stored-procedures, timestamp, mysql-workbench

我正在处理 mysql 查询，但无法运行。我正在尝试根据用户 ID 将时间戳字段数据从一个表复制到另一个表。这不是直截了当的。这是故事。在分数表中，我有 User_id、问题 ID、标签 ID 和 add_date 字段......该表中有一个用户的各种标签 ID，我想为每个用户复制添加日期字段，其中 tagid=627 在另一个表在其各自的 Date_record(timestap) 字段中称为 User，现在是 0000 0000。再一次，尝试为每个用户复制 add_date 字段，其中 tagid=627（对于每个）并粘贴到相同的用户 ID（字段名称是 id对于与 suser id 相同的表）在 Date_record 字段中的其他表中，该字段是时间戳，当前为 0000-00-00 00:00:00。例如，表格的屏幕截图。

[http://minus.com/lw2prl55nTBHA](http://minus.com/lw2prl55nTBHA) 具有空 Date_record 字段（时间戳）的用户表，它将具有来自相同用户 id 的分数表（下一个）的数据（int 此表 id 与 user_id 相同）和标签 id=627][ 1]

[http://minus.com/lby84cURuoD5DN](http://minus.com/lby84cURuoD5DN) 得分表，其中对于相同的用户 ID 有差异标签 ID，我想复制 tagid =627 add_date 数据字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:47:26.143

```
update `user` 
join score on `user`.User_id = score.User_id
set `user`.Date_record = score.Date_record
where score.tagid = 627 
```

# javascript - HTML 富文本编辑：围绕选择包装自定义 html

> ID：12922979
> 
> 赞同：0
> 
> 时间：2012-10-16T20:35:32.323
> 
> 标签：javascript, html, richtext, jwysiwyg

我正在通过 jWysiwyg 库使用 html 5 富文本编辑。我希望能够用自定义 HTML 包围文档的选定部分，就像人们如何突出显示文档上的文本并将其标记为粗体一样。关于这个主题的信息非常有限，我什至不确定这是否可能。我还尝试获取页面的原始 html 选择，但到目前为止，我只能获得屏幕上突出显示的任何内容的纯文本版本。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:35:32.323

经过进一步研究，我发现jWysiwyg中的getInternalRange()函数有效地返回了document.createRange()生成的对象。在查看文档后，我能够找到符合我需要的环绕内容（）方法。下面提供了一个示例。我正在使用 jQuery，因此我还将演示如何使用 jQuery 为您生成 html 元素：

```
var range = document.createRange();

range.surroundContents($('<span style="background-color: red;" />').get(0)); 
```

此特定示例以红色突出显示所选文本，但是可以轻松推广此示例以允许开发人员使用任意数量的 html 元素围绕选择。

# ruby-on-rails-3 - 使用 Carrierwave 上传到 Rackspace 时出现 Fog::Storage::Rackspace::NotFound 错误

> ID：12922980
> 
> 赞同：2
> 
> 时间：2012-10-16T20:35:34.373
> 
> 标签：ruby-on-rails-3, file-upload, carrierwave, rackspace, fog

大家：在将它发布到 Stackoverflow 之前，我已经搜索了该错误，因此无需向我指出：groups.google.com/forum/?fromgroups=#!topic/carrierwave/ 这不是同一个问题。

我正在使用 Carrierwave，因此用户可以将文件上传到我的 Rackspace 容器。但是当我从我的站点提交时（在我的本地机器上，仍处于测试模式），我得到一个**Fog::Storage::Rackspace::NotFound** app/controllers/authors_controller.rb:8:in `update' 错误。我的 Rackspace 容器称为 kontainer.ofstuff。这是我的代码：

pic_uploader.rb：

```
class PicUploader < CarrierWave::Uploader::Base

  include Rails.application.routes.url_helpers
  storage :fog

  def store_dir
    "#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end
end 
```

模型作者.rb

```
class Author < ActiveRecord::Base
  attr_accessible :stuff, :profilepic

  mount_uploader :pic, PicUploader

  def dostuff
  end
end 
```

carrierwave.rb 位于 config/initializers 目录中

```
CarrierWave.configure do |config|

  config.storage = :fog
  config.fog_credentials = {
    :provider           => 'Rackspace',
    :rackspace_username => 'myusername',
    :rackspace_api_key  => '98765asecretnumber3'
  })
  config.fog_directory = 'kontainer.ofstuff'
  config.fog_host = 'https://34567secretnumberiiiii.ssl.cf2.rackcdn.com'
end 
```

控制器 authors_controller.rb

```
class AuthorsController < ApplicationController

  def update
    @author = Author.find(params[:id])
    @booklist = Book.where(:author_id => @author.id)
#line 7
    if @author.update_attributes(params[:author])
      sign_in @author
      redirect_to @author
    else
      render 'profileinfo'
    end
  end
end 
```

编辑.html.erb：

```
<%= f.file_field :pic %>
<%= f.submit "Save Author Info" %> 
```

当我将此代码“上传”/存储到文件时，效果很好。也许 f.submit 不适用于 Carrierwave？如果不是...我在哪里可以找到正确的提交代码？

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-19T09:52:15.503

我也遇到了这个错误。通过将此添加到上传的代码来解决：

```
class MyUploader < CarrierWave::Uploader::Base

  ....

  def remove!
    begin
      super
    rescue Fog::Storage::Rackspace::NotFound
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:47:22.627

我有同样的问题，但对我来说，我需要多次使用相同的名称制作容器，但适用于所有区域。我不知道为什么在那之后它会起作用，但我想这是可以尝试的？

**2012 年 11 月 7 日更新**

因此，自从我回答之后，Carrierwave 有了一些更新。通过一些试验和错误，我能够获得更稳定的上传。这是我所做的：

1.  将载波 gem 更新到 0.7.0
2.  登录 Rackspace 并删除所有区域的容器。
3.  添加了一个容器。不管哪个地区更适合你。
4.  公开容器（启用 CDN）
5.  复制了容器的公共 HTTP CDN 链接
6.  更新了我的 /config/initializers/carrierwave.rb 文件：

    ```
    CarrierWave.configure do |config|
      config.fog_credentials = {
        :provider           => 'Rackspace',
        :rackspace_username => '[Your Rackspace Username]',
        :rackspace_api_key  => '[Your Rackspace API key]'
      }
      config.fog_directory = '[The name of the container you created]'

      if Rails.env.production? || Rails.env.staging?
        config.asset_host = '[The Public HTTP CDN url for the container]'
      end
    end 
    ```

注意：我将上传器配置为在生产或登台环境时使用 storage:fog。否则我使用默认的本地文件系统。

主要需要注意的是，carrierwave 将配置“fog_host”更改为“asset_host”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:35:45.117

值得一提的是：从 AWS 迁移到 Rackspace 后，我遇到了同样的问题。由于更新文件的一部分正在删除旧文件，因此引发了错误。就我而言，旧文件在 S3 上，而不是在 Rackspace 上，因此carrierwave 很不高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T12:31:08.650

这似乎是等待几个月并安装更新的 gem 的情况。问题几乎消失了。我也摆脱了 Rackspace 并转到了 Amazon S3，尽管我之前曾尝试过 S3，但也遇到了同样的问题。我将解决方案归功于更新的 Carrierwave gem。

# cakephp - 如何使用 Cakephp 从 URL 中检索 id？

> ID：12922984
> 
> 赞同：0
> 
> 时间：2012-10-16T20:35:48.310
> 
> 标签：cakephp

我有帖子控制器，我可以通过他们的 ID 路由到每个帖子。

有没有办法从 URL 中获取 id 以将该 id 存储在`Comments`表`post_id`外键字段中？

如果是的话，我可以给点提示或一点帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:57:54.403

假设 CakePHP 2.0 和 URL: `APP/posts/view/1`, 在你的`view.ctp`

您可以使用 URL 访问所有信息`debug($this->request->url);`

根据您想要提供的信息`pass`，因此：

```
$post_id = $this->request->url['pass'][0]; 
```

将此值传递给表单中的隐藏字段，其中的操作`add`为`CommentsController`

```
echo $this->Form->input('post_id', array('type'=>'hidden', 'value'=>$post_id)); 
```

当你提交表单时，会有一个数组键`data[Comment][post_id] // 1`

然后它将`comments`使用正确的`post_id`外键填充表。

# c++ - 使用 fstream 对象将文件中的信息存储到变量中

> ID：12922992
> 
> 赞同：0
> 
> 时间：2012-10-16T20:36:03.943
> 
> 标签：c++, fstream

我有以下代码块，用于读取以下格式的文本文件：

```
firstname lastname id mark
firstname lastname id mark 
```

以下是代码块。

```
void DBManager::ReadFile(void){
fstream myfile; /*fstream object that will be used for file input and output operations*/
char* fn;       /*pointer to the storage which will hold firstname*/
char* ln;       /*pointer to the storage which will hold lastname*/
int id;         /*integer var to hold the id*/
float mark;     /*float var to hold the mark*/

/*read in the filename*/
g_FileName = new char[1024];                /*allocate memory on the heap to store filename*/
cout << "Please enter the filename:";
    cin >> g_FileName;

/*open file*/
myfile.open(g_FileName, ios::in | ios::out);

if(myfile.is_open()){   /*check if the file opening is successful*/
    cout << "File reading successful !\n";

    /*read information from the file into temporary variables before passing them onto the heap*/
    while (!myfile.eof()) {

        fn=(char*) new char[1024];
        ln=(char*) new char[1024];
        myfile >> fn >> ln >> id >> mark;
        cout << fn << " " << ln << " " << id << " " << mark << " " << endl;

    }
    myfile.close();
}
else{                   /*else print error and return*/
    perror("");
    return;
} 
```

}

上面的代码块有效！:) 但是我很惊讶 myfile 如何知道它应该一次保存一行，以及它如何足够聪明地设置四个变量。

我是 C++ 新手，因此这可能包含在某种文档中。但我很乐意从您那里获得一些见解或链接到我可以更好地理解 fstream 对象的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:42:03.360

我不确定问题是什么。但是，代码有几个问题：

1.  在尝试阅读**后**，您应该**始终**检查输入。
***   测试`eof()`以确定是否还有更多要阅读的内容不起作用。*   您有内存泄漏，在每个迭代器中分配内存。*   在没有约束的情况下读取`char`数组是不安全的，即，它容易发生缓冲区覆盖（主要攻击向量之一）。**

 **你想使用一个看起来像这样的循环：

```
std::string fn, ln;
while (myfile >> fn >> ln >> id >> mark) {
     ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:15:40.537

在 C++ 中，`std::fstream`是一种专门用于文件的流。从文件中读取时，接口`std::fstream`几乎与`std::cin`. 当操作员询问时，输入流被编程为读取下一个单词或数字`>>`。他们知道单词和数字在哪里，因为它们被空格隔开。在默认语言环境中，空格、制表符和换行符被视为空白。您可以更改语言环境以包含其他字符，例如逗号，并在读取文件时跳过这些字符。基本上，当使用输入流读取时，换行符和空格的处理方式相同。

了解流的一些很好的解释在这里：[http ://www.cprogramming.com/tutorial/c++-iostreams.html](http://www.cprogramming.com/tutorial/c++-iostreams.html)**

# hadoop - hbase hdfs 在进程重启时进入安全模式（可能在复制报告下？）

> ID：12922997
> 
> 赞同：2
> 
> 时间：2012-10-16T20:36:25.643
> 
> 标签：hadoop, hbase, hdfs

**更新** 您需要将 hdfs-site.xml 提供给 hbase/conf 以便 hbase 可以使用正确的目标副本，否则它使用默认值 3。

这修复了消息。但是我的namenode在每次进程重启期间总是处于安全模式。fsck 一切正常，没有错误，没有复制不足等。

之后我看不到日志：

2012-10-17 13:15:13,278 信息 org.apache.hadoop.hdfs.StateChange：状态 * 安全模式开启。上报区块 0.0000 的比例未达到阈值 0.9990。安全模式将自动关闭。

2012-10-17 13:15:14,228 INFO org.apache.hadoop.net.NetworkTopology：添加新节点：/default-rack/127.0.0.1:50010 2012-10-17 13:15:14,238 INFO org.apache .hadoop.hdfs.StateChange：*BLOCK*
NameSystem.processReport：来自 127.0.0.1:50010，块：20，处理时间：0 毫秒

有什么建议么 ？

* * *

我将 dfs.replication 设置为 1。hbase 处于分布式模式。

第一次写入通过，但是当我重新启动 namenode 时，总是将块报告为报告不足。

hadoop fsck /hbase 的输出

```
/hbase/tb1/.tableinfo.0000000003:  Under replicated blk_-6315989673141511716_1029\. Target Replicas is 3 but found 1 replica(s).

.
/hbase/tb1/83859abf0f46016485814a5941b16de5/.oldlogs/hlog.1350414672838:  Under replicated blk_-7364606700173135939_1027\. Target Replicas is 3 but found 1 replica(s).
.

/hbase/tb1/83859abf0f46016485814a5941b16de5/.regioninfo:  Under replicated blk_788178851601564156_1027\. Target Replicas is 3 but found 1 replica(s). 
```

状态：健康

```
 Total size:    8731 B
 Total dirs:    34
 Total files:   25 (Files currently being written: 1)
 Total blocks (validated):      25 (avg. block size 349 B) (Total open file blocks (not validated): 1)
Minimally replicated blocks:   25 (100.0 %)
Over-replicated blocks:        0 (0.0 %)
 Under-replicated blocks:       25 (100.0 %)
Mis-replicated blocks:         0 (0.0 %)
 Default replication factor:    1
Average block replication:     1.0
Corrupt blocks:                0
Missing replicas:              50 (200.0 %)
Number of data-nodes:          1
Number of racks:               1 
```

FSCK 在 0 毫秒内于 2012 年 10 月 16 日星期二 13:23:55 PDT 结束

为什么它说目标副本是3，但默认复制因子显然是1。请任何人指教。

我的版本是 hadoop 1.0.3 和 hbase 0.94.1

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:18:37.990

强制 Hdfs 退出安全模式。
输入这个：

```
hadoop dfsadmin -safemode leave 
```