# StackOverflow 问答 13805000-13805999

# mysql - MYSQL查询问题

> ID：13805001
> 
> 赞同：-2
> 
> 时间：2012-12-10T16:28:42.880
> 
> 标签：mysql

我创建了一个数据库，并试图从多个表中提取信息。我期待不超过 3 个结果，我最终得到 15 个！

在 15 个结果中，它还重复了数据并给出了错误的数据！

好的，这是我运行的语句

```
select *
from [Student, Accomadation_Application
where lname = 'Torrance' 
  and accomodationType = 'flat' 
```

任何帮助都会很棒不知道我是否提供了足够的信息..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:33:04.057

这些表之间有什么关系吗？你应该使用类似的东西

```
SELECT *
FROM student
    INNER JOIN Accomadation_Application ON Accomadation_Application.studentId = student.id
WHERE lname = 'Torrance' and accomodationType = 'flat' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:31:51.450

您需要使用外键连接两个表。像这样的查询将为您提供两个表中所有可能的行组合。

像 Student.key = Accomadation_Application.fk 这样的东西 - 或者相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:33:34.663

您必须将表连接在一起。

Select * from Student s join accomadation_application a on a.iname = s.iname where s.iname = 'Torrance' and a.accomodationType = 'flat'

（可能需要转换语法，因为这是 t sql）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T16:34:22.767

根据您的表格可能包含的内容进行猜测...

```
SELECT *
FROM Student AS s
JOIN Accomadation_Application AS a ON s.bannerNO = a.bannerNo
WHERE s.lname = 'Torrance' AND a.accomodationType = "flat"; 
```

# javascript - 在预提交javascript中清理“坏”字符的表单提交数据？

> ID：13805002
> 
> 赞同：1
> 
> 时间：2012-12-10T16:28:44.887
> 
> 标签：javascript, regex, utf-8, character-encoding

**更新：**编辑，因为我不太清楚我之前在说什么。

我有一个提交给服务器端脚本的表单，该脚本使用该数据为 Web 服务生成 XML 输出。如果数据中有无效字符（我假设这只是意味着“在 XML 中不允许”，但可能与编码有关），则 XML 会发出嘶嘶声。该错误经常发生，因为许多用户剪切/粘贴word文档等来填写表格。

我无法修改使用数据或将其放入 XML 的服务器端脚本（我无权访问服务器），因此我无法清理服务器端的数据。为了至少在我们可以添加一些服务器端清理之前缓解这个问题，我想用 javascript 拦截表单提交并清理每个文本输入和“坏”字符的文本区域。

我知道如何遍历表单，并且希望我想在 thisString.replace() 中添加一个正则表达式来处理它。

我不知道的是（a）将 .replace() 与正则表达式一起使用是否是正确的方法，如果是这样，（b）正则表达式中实际应该使用什么。我想在不破坏 XML 输出的情况下允许尽可能多的字符。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:34:13.313

通常浏览器以 UTF-8 提交数据，无论它是从哪里复制粘贴的，只要您使用 http 标头将编码设置为 utf-8`Content-Type: text/html; charset=utf-8`

当然，IE 中也有一些例外。

此外，没有非 UTF8 字符之类的东西。您的意思是浏览器以某些 utf-8 不兼容的编码对表单进行编码，例如 Windows-1252。

除了将字符限制为 ASCII 字符外，您在 javascript 中无能为力，但这并不能真正阻止普通用户之外的任何事情。无论如何，在编码攻击的情况下，您必须始终检查服务器端的编码。

# javascript - 从 JSDoc3 获得更好的输出

> ID：13805006
> 
> 赞同：3
> 
> 时间：2012-12-10T16:28:55.190
> 
> 标签：javascript, jsdoc

我在开始使用 JSDoc3 时遇到了一些麻烦。最重要的是，`@param`s 不会出现！

这是我的测试源：

```
/**
 * Testing JsDoc3.
 * Why isn't this working `better`?
 */
function foo(bar) {
    console.log(+bar);
}

/**
   A function with params.
   @param {string} baz
   @param {...number} bim
 */
function goo(baz/*, ...bim */) {

}

/**
 * Hello, is this thing on?
 * @namespace bop
 * @type {object}
 */
var bop = {

    sting: function(WHO) {
        console.log(WHO);
    },

    buzz: function(when, why) {

    }

}; 
```

我正在跑步`./jsdoc -r -l test.js`。问题是我得到的输出非常平淡并且缺少很多信息：

* * *

![JSDoc3 输出](../Images/8719fcef8d614163aec3ce8f89766e0d.png)

* * *

为什么没有参数信息？！我正在使用默认模板；默认模板真的太平淡以至于不显示参数吗？还是我做错了什么？

我尝试为 JSDoc3 寻找一些模板，但并没有真正找到任何好的东西。如果您知道一个很好的工作并且实际上包含有用的信息，请分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T23:34:10.310

在最新版本的 JSDoc3 的早期版本中记录全局对象时存在一些问题，一切运行良好。

如果您再次尝试使用最新版本，您将获得 goo 全局函数的参数。

但是，如果您想获得更好的描述，则应遵循规则

@param {type} param_name 参数说明 @param 标签、类型、参数名称、参数说明

foo 全局函数不会为您提供任何信息，因为缺少 @param 标记。这是我的代码输出

![全局函数](../Images/6b1d41b7dd58e1aa8d37c37e6c6f5ef4.png)

![命名空间对象](../Images/42a0210b9bf3017a25e564b6213949c0.png)

我在您的原始代码中添加了一些标签：

/** * 测试 JsDoc3。* 为什么这不起作用`better`？* @method * @param {Object} bar Som bar 值 */ function foo(bar) { console.log(+bar); }

```
/**
   A function with params.
   @param {string} baz
   @param {...number} bim
   @returns {boolean} return false because we're testing
 */
function goo(baz/*, ...bim */) {
    return false;
}

/**
 * Hello, is this thing on?
 * @namespace bop
 * @type {object}
 */
var bop = {

    /**
    * Hello, is this thing on?
    *
    * @method
    * @param {object} WHO Some Param
    * @memberof bop
    */
    sting: function(WHO) {
        console.log(WHO);
    },

    /**
    * I'm public
    *
    * @method
    * @param {object} when Some Param when
    * @param {object} why Some Param why
    * @memberof bop
    */
    buzz: function(when, why) {
        _buzz(when, why);
    },

    /**
    * I'm inner (private)
    *
    * @inner
    * @method
    * @param {object} when Some Param when
    * @param {object} why Some Param why
    * @memberof bop
    */
    _buzz: function(when, why) {
        console.log(when);
    }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-11T01:25:52.243

有时它取决于您使用的 jsdoc3 模板。我使用几个模板生成了一个输出，因此我们可以根据自己的需要比较哪个是最合适的：[https](https://cancerberosgx.github.io/jsdoc-templates-demo/demo/) ://cancerberosgx.github.io/jsdoc-templates-demo/demo/我会随着时间的推移投入更多，但我认为这是确实有助于做出决定。它还记录了它们中的每一个是如何生成的。希望能帮助到你！

# java - 在 try/catch 中捕获异常后继续执行循环

> ID：13805008
> 
> 赞同：8
> 
> 时间：2012-12-10T16:29:07.473
> 
> 标签：java, while-loop, try-catch

一旦在此代码中捕获到异常，该`menuSystem`方法就会运行，但是一旦我输入一个数字，程序就会关闭并显示“构建成功”消息。一旦发生异常，有什么办法可以回到while循环？

```
public static void main(String[] args) {
   final UnitResults myUnit = new UnitResults(10, "Java");
   int option = menuSystem();

   try {
      while (option != 0) {
         final Scanner keyb = new Scanner(System.in);
         System.out.println("");
         switch (option) {
         }
      }
   } catch (Exception InputMismachException) {
      System.out.println("\nPlease Enter a Valid Number\n");
      option = menuSystem();
   }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T16:31:48.927

把你的**try/catch**放在你的**while 循环中**：

```
 while (option != 0) {
        final Scanner keyb = new Scanner(System.in);
        System.out.println("");
        try {
            switch (option) {

            }
        } catch (Exception InputMismachException) {
            System.out.println("\nPlease Enter a Valid Number\n");
            option = menuSystem();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:31:42.560

将`try`and`catch`放入`while`循环中。如果代码正在使用，`nextInt()`那么您需要跳过无效输入，因为它不会在不匹配的情况下被消耗。

在尝试使用之前使用直到输入有效输入`InputMismatchException`的`hasNextInt()`方法可以避免异常处理：`Scanner`

```
while (!kb.hasNextInt()) kb.next(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T19:57:08.313

另一种方法是：

```
 List<File> directories;
   ...
   for ( File f : directories ) {
        try {
            processFolder(f);
        } catch( Exception e ) {
            SimpleLog.write(e);
        }
    } 
```

# core-data - 核心数据并发 - 集合在被枚举时发生了变异

> ID：13805013
> 
> 赞同：0
> 
> 时间：2012-12-10T16:29:21.080
> 
> 标签：core-data, concurrency, nsmanagedobjectcontext

我`Transaction`在我的核心数据应用程序中添加了一些名为 s 的对象。这些交易与一个帐户相关联。

保存所有交易后，我想更新帐户金额。有时会出现并发异常

> “集合在枚举时发生了变异”

在方法`NSArray *matches = [managedObjectContext executeFetchRequest:request error:&error];`中。`accountManagedObjectWithId`

```
//TransactionsManager

- (BOOL)addRepeatTransaction:(Transaction *)transaction{

    Account *accountTrx = transaction.account;
    double accountAmount = accountTrx.amount;
    for (int i =0; i<nbRepeat; i++){
         accountAmount +=transactionBiz.amount;
        [[Persister instance] registerTransaction:transaction];
    }
    [[Persister instance]editAmountAccount:transaction.account amount:accountAmount];
    [[Persister instance]saveContext];

    return YES;
}

//Persister

-(id)init {
    if (self = [super init]){
        managedObjectContext = [appDelegate managedObjectContext];
        return self;
    }
    return nil;
}

-(BOOL)registerTransaction:(Transaction *)transaction {
    TransactionManagedObject *transactionsRow = (TransactionsManagedObject *)[NSEntityDescription insertNewObjectForEntityForName:@"Transactions" inManagedObjectContext:managedObjectContext];

    transactionsRow.idTransaction =  [NSNumber numberWithInt:transaction.idTransaction];
    transactionsRow.name = transaction.name;
    transactionsRow.amount = [NSNumber numberWithDouble:transaction.amount];
    [...]
    transactionsRow.account = [[Finder instance] accountManagedObjectWithId:transaction.account.idAccount];

    return YES;
}

-(BOOL)editAmountAccount:(Account *)asset amount:(double)amount {
    AccountManagedObject *accountRow = [[Finder instance] accountManagedObjectWithId:account.idAccount];

    accountRow.amount = [NSNumber numberWithDouble:amount];
    return YES;
}

-(AccountManagedObject *)accountManagedObjectWithId:(NSInteger)idAccount {

    NSFetchRequest *request = [[NSFetchRequest alloc]init];
    [request setEntity:[NSEntityDescription entityForName:@"Accounts" inManagedObjectContext:managedObjectContext]];

    //Predicate
    NSString *recordedIdAccount = @"idAccount";
    NSNumber *numberIdAccount = [NSNumber numberWithInt:idAccount];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K == %@", recordedIdAccount,numberIdAccount];
    [request setPredicate:predicate];

    //Execute
    NSError *error;
    NSArray *matches = [managedObjectContext executeFetchRequest:request error:&error];
    NSInteger nbResult = [matches count];
    if(nbResult==1){
        return [matches objectAtIndex:0];
    }
    if(nbResult==0){
        [...]
        return nil;
    }
    if(nbResult>0){
        [...]
        return nil;
    }
    return nil;
}

//UI call
[...]
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
     //Save
     [[TransactionsManager instance] addRepeatTransaction:transactionToAdd];

     dispatch_async(dispatch_get_main_queue(), ^{

          //Call the delegate
          [self.delegate theSaveButtonOnTheAddTransactionTVCWasTapped:self];
      });
}); 
```

* * *

@瓦伦丁·拉杜

我已经尝试过了，但问题仍然存在。我必须为每个添加设置一个`managedObjectContext`。这是有效的，但它会减慢应用程序的速度。这是正确的方法吗？

```
-(BOOL)registerTransaction:(Transaction *)transaction{
    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
   [moc setPersistentStoreCoordinator:[[self managedObjectContext] persistentStoreCoordinator]];

    TransactionsManagedObject *transactionsRow = (TransactionsManagedObject *)[NSEntityDescription insertNewObjectForEntityForName:@"Transactions" inManagedObjectContext:moc];

    transactionsRow.idTransaction =  [NSNumber numberWithInt:transaction.idTransaction];
    transactionsRow.name = transaction.name;
    transactionsRow.amount = [NSNumber numberWithDouble:transaction.amount];
    [...]
    transactionsRow.account = [[Finder instance] accountManagedObjectWithId:transaction.account.idAccount andManagedContext:moc]];

    NSError *error = nil;
    if (![moc save:&error]) {
        [[ErrorManager instance] addError:error];
        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T17:06:15.343

您似乎只使用一个上下文，如果您在核心数据对象上执行并行操作，这是错误的。每个线程都应该有一个上下文，并在每次保存时合并上下文。Apple 的核心数据指南对此进行了更详细的讨论。

# ruby - 在 ruby 的控制台中接受用户的输入

> ID：13805025
> 
> 赞同：0
> 
> 时间：2012-12-10T16:30:29.663
> 
> 标签：ruby, console, user-input

以下程序接受用户的两个输入（逗号分隔）：

```
puts "Enter the code"
input_codes = gets.split(',')
puts "your given code is: "

code_1 = input_codes[0]
code_2 = input_codes[1]

puts code_1=='GEO'
puts code_2=='TYP' 
```

输出如下：

```
Enter the code
> GEO,TYP

true
false 
```

它应该为这两种情况打印`true`，对吧？为什么要打印`false`最后一个案例？我错过了什么？

编辑：是的，一开始我缺少一个额外的换行符。在 tadman 的帮助下修复了该问题。是的，从那时起，**检查**的东西就非常酷且有用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:35:25.490

您的输入中可能有一个尚未删除的换行符。处理来自文件的数据时，请确保`chomp`输入任何值。更好的是调用`strip`which 将删除前导和尾随空格。

```
gets.chomp.split(',') 
```

每当尝试进行诊断时，显示“隐形”字符很重要：

```
puts code_2.inspect
# "TYP\n" 
```

这可能会更早地暴露这个问题。`inspect`但是，对于具有自己的自定义发射器的自定义类，可能会产生误导。它不能总是被信任，但它通常是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:34:40.537

您在字符串末尾有一个换行符，只需将其剥离：

```
input_codes = gets.strip.split(',') 
```

# linux - xmodmap KeyPress 事件到 ButtonPress 事件

> ID：13805030
> 
> 赞同：3
> 
> 时间：2012-12-10T16:30:45.400
> 
> 标签：linux, configuration, mouse, xorg, xmodmap

我已经在 unix.stackexchange 上问过这个问题，但到目前为止还没有运气，所以我把它贴在这里。希望有人知道答案。

我刚得到一个罗技 t400 鼠标，一切正常，除了我想将鼠标中键的“顶部”部分重新映射到实际的鼠标中键功能。

当我运行 xev 并捕获点击时，所有鼠标按钮都返回 ButtonPress/ButtonRelease 事件，但中间按钮的顶部返回 KeyPress/KeyRelease 事件：

```
KeyPress event, serial 35, synthetic NO, window 0x5200001,
root 0x31d, subw 0x0, time 630089839, (80,128), root:(2871,588),
state 0x10, keycode 133 (keysym 0x31d, (no name)), same_screen YES,
XLookupString gives 0 bytes: 
XmbLookupString gives 0 bytes: 
XFilterEvent returns: False

KeyRelease event, serial 36, synthetic NO, window 0x5200001,
root 0x31d, subw 0x0, time 630089983, (80,128), root:(2871,588),
state 0x50, keycode 133 (keysym 0x31d, (no name)), same_screen YES,
XLookupString gives 0 bytes: 
XFilterEvent returns: False 
```

中间按钮的底部工作正常，并返回：

```
ButtonPress event, serial 37, synthetic NO, window 0x5200001,
root 0x31d, subw 0x0, time 630137726, (10,171), root:(2801,631),
state 0x10, button 2, same_screen YES

ButtonRelease event, serial 37, synthetic NO, window 0x5200001,
root 0x31d, subw 0x0, time 630138960, (10,171), root:(2801,631),
state 0x210, button 2, same_screen YES 
```

我希望以与底部相同的方式重新映射顶部，这可以使用 xmodmap 吗？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T11:55:39.630

下载并构建[http://linuxgazette.net/153/misc/ziemann/xevent.c](http://linuxgazette.net/153/misc/ziemann/xevent.c)

编辑 ~/.xbindkeysrc：

```
~ % cat .xbindkeysrc
 "xevent -b 2"
  c:133 
```

将 xbindkeys 添加到您的 ~/.xinitrc

# c# - ado.net - 通过连接放置单个 SQL 语句是否比等效的多个 SQL 语句更好？

> ID：13805032
> 
> 赞同：1
> 
> 时间：2012-12-10T16:30:49.687
> 
> 标签：c#, sql-server, ado.net, sqlconnection

假设以下代码：

```
public void ExecuteSomeSql(string sql, SqlConnection sqlConnection)
{
  etc etc
} 
```

并假设`allSql`= `sql1`+ `sql2`+ `sql3`。

性能或其他方面是否有任何差异：

**方案 1**

```
ExecuteSomeSql(allSql, sqlConnection); 
```

和

**方案 2**

```
ExecuteSomeSql(sql1, sqlConnection);
ExecuteSomeSql(sql2, sqlConnection);
ExecuteSomeSql(sql3, sqlConnection); 
```

我不太确定通过**同一**连接多次执行 SQL 时会发生什么。大概没有复杂的握手，因为我们已经有一个活动的连接。

有什么强有力的理由让我更喜欢场景 1 而不是场景 2？

（对于上下文，我的问题实际上是我是否可以在 C# 中实现一些我更愿意执行的业务规则，或者（性能很重要）我是否应该尝试在单个 SQL 命令中执行所有内容。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:24:44.457

我想说这在很大程度上取决于您正在执行的操作。如果您要插入 1 条记录，那么您所做的事情不会有很大的不同（但您应该使用参数化查询以确保安全并允许缓存 exec 计划）。如果您要插入 10 条记录，您可以通过发送一个包含 10 个用分号分隔的语句的 sql 字符串来做到这一点，但您将无法使用参数（或者如果您这样做了，您需要 10x 个参数，其中 x 是字段数你正在插入），所以你最好进行参数化查询。如果你有 100 次插入，你真的应该使用参数化查询。如果要进行 1000 次插入，则可能应该使用 SqlBulkCopy 类

总而言之，没有任何理由不使用参数化语句。即使是反对使用它们的人“因为 sql 是动态的”——你当然可以构建一个参数化的 SQL 字符串并在循环中填充参数集合，就像你可以将字符串连接在一起一样。

如果您正在寻找一种提高 SQL 性能的方法，您需要在示例中发布更多关于 SQL 内容的信息。如果将单个字符插入单个列一百万次，那么毫无疑问使用一个参数化查询，您在其中编写 SQL，添加参数，执行查询，然后（更改参数值并重新执行）进一步 999999 次无疑比将 SqlCommandText 设置一百万次并在每次执行时再次将文本发送到服务器要快。你可能永远不会让服务器接受一个 30 多兆字节的字符串，其中包含一百万个串联的“插入 a(a) 值('a');” 与原始问题的字符串 concat *sql1 + sql2 ... + sql1000000极其等价的语句*

要解决所查询的问题（而不是回答所提出的问题），请使用参数化查询，构建查询和参数集合一次，更改参数值但需要 N 次.. 或者.. 如果您的操作确实是批量操作，使用为此优化的类（例如 SqlBulkCopy）

如果你的sql1、2、3都是不同类型的操作，准备3条语句，在客户端根据需要改变执行次数。您真正希望每个 SqlCommandText 使用多个语句的唯一时间是用于诸如“INSERT INTO ... SELECT SCOPE_IDENTITY()”之类的内容来检索计算值，例如自动编号

# html - CSS / HTML如何不重叠固定标题

> ID：13805033
> 
> 赞同：1
> 
> 时间：2012-12-10T16:30:57.333
> 
> 标签：html, css

我有一个类似 twitter/facebook 的标题、一个固定的标题和一个主要内容。当我向下滚动到最后一行时，内容 div 与标题重叠。我怎样才能避免这种情况？

这是我页面的截图： ![在此处输入图像描述](../Images/005d4c66ebd61ed49d15ff60fb3912d8.png)

**这是我的html的结构：**

```
<body>

<div>
<?php include("initcontrols/header.php"); echo $plHeader;?>   
</div>

<div id="mainform">
<noscript>It seems your browser doesn't support Javascript.<br /></noscript>

<!-- Apply blue theme as default for all tiles -->
<div id="tiles" class="blue">
<!-- Sliding Tile that shows 100% of the back tile every 3 seconds -->
<div class="live-tile" data-stops="100%" data-speed="750" data-delay="3000">
    <span class="tile-title">slide tile (figure 2a)</span>
    <div><img src="images/say.jpg" width="180" height="180" alt="1" /></div>
    <div><img src="images/sayako.jpg" width="180" height="180" alt="2" /></div>
</div>

    <!-- Red Flip Tile that flips every 4 seconds -->
<div class="red live-tile" data-mode="flip" data-delay="4000">
    <div>
        <img src="images/home.png" alt="3" />
        <a class="tile-title">flip tile front (figure 2b)</a>
    </div>
    <div>
        <img src="images/message.png" alt="4" />
        <a class="tile-title">flip tile back (figure 2b)</a>
        </div>
</div>

<script type="text/javascript">
// apply regular slide universally unless .exclude class is applied 
// NOTE: The default options for each liveTile are being pulled from the 'data-' attributes
$(".live-tile, .flip-list").not(".exclude").liveTile();
</script>

</div> 
```

**我的CSS：**

```
div#header{
padding-left:15px;
overflow:hidden;
position: fixed;
margin:0px;
top:0px;
left:0px;
display: block;
width: 100%;
height: 90px;
-moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
background:#333333;
background: -moz-linear-gradient(center top , #736F6E, #111111) repeat scroll 0 0 transparent;
}
div#header-title{
color: #FFF;
float: left;
display:inline-block;
}
div#header h2{
margin: 0 0 0 3px;
z-index:12;
}
div#header h1{
margin-top:0;
margin-bottom:0;
}

#mainform{
width:960px;
background: #F0F0F0;
border: 1px solid #CCC;
height: 2000px;
margin: 100px auto;

} 
```

对于我的实时瓷砖外观： http: [//pastebin.com/cpBXYVRu](http://pastebin.com/cpBXYVRu) 我使用了[http://www.drewgreenwell.com/projects/metrojs#applicationBar](http://www.drewgreenwell.com/projects/metrojs#applicationBar)的模板：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:35:32.560

您可以调整元素的 z-index 以将其置于另一个元素的后面。在这种情况下，您可能希望增加固定标头的 z-index。[在此处](http://www.w3schools.com/cssref/pr_pos_z-index.asp)和[此处](https://developer.mozilla.org/en-US/docs/CSS/z-index)阅读有关 z-index 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T16:21:39.280

我认为那里有图像可以使您的内容隐藏在标题后面，您可以清楚地看到像字母图像，并且它的位置是绝对的

# bash - 错误字符串/文件创建验证的shell实现

> ID：13805038
> 
> 赞同：2
> 
> 时间：2012-12-10T16:31:05.727
> 
> 标签：bash

我有一个用 sh/bash 编写并每天运行并检查所有操作系统的 SCSI/FC 多路径的脚本。如果出现错误，脚本会生成特殊的“Error”字符串并将其发送到 syslog，我们的监控程序会在其中提取它并为操作员生成事件记录。我需要为脚本实现生成此特殊“错误”到系统日志的能力，而不是每天都存在该错误，而是每周一次。所以，我需要实现这种类型的逻辑： 第 1 天：存在错误 - 生成特殊的“错误”字符串并将其发送到 syslog，例如创建具有创建日期的临时文件 第 2 天：存在错误 - 检查临时文件创建日期以及是否日期少于 7 天，不要生成特殊的“错误”字符串，也不要将其发送到 syslog。......第8天：

实施此类内部验证的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:03:05.303

我想到的是这样的：

2.  检查错误情况
3.  执行`find "error_file_dir" -mtime 7 -name "error_file"`并检查错误代码以查看是否找到文件**编辑：检查返回的行数而不是错误代码**
4.  如果未找到该文件，则记录错误，然后将错误写入 error_file_dir/error_file（如果存在则覆盖该文件）

这里的关键是要查找的 mtime 参数。它将确保只有在过去 7 天内修改过的文件才会返回，在这种情况下，您不会记录错误。

# python - 如何将 Python 程序（包括库）发送给朋友？

> ID：13805040
> 
> 赞同：3
> 
> 时间：2012-12-10T16:31:11.110
> 
> 标签：python, shared-libraries

我想将我制作的程序发送给我的朋友，但问题是它无法在他的计算机上运行，​​因为他没有安装所有库。例如 ：

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
from bs4 import BeautifulSoup as bs
import sys 
```

我怎样才能向他发送所有必要的库？希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:16:03.413

你也可以试试“Python to EXE”：

```
http://www.py2exe.org/ 
```

这会将脚本及其组件打包到一个包中，该包与包含的 exe 一起运行。

如果你有勇气，你可以“自己动手”，为 python 收集关键的 DLL 和 EXE：

```
.\MSVCR71.dll
.\OCI.dll
.\python.exe
.\python25.dll 
```

以及 Python HOME 的 Lib 目录中所有需要的 *.pyc 和 *.pyd 文件：

```
.\Lib\cx_Oracle.pyc
.\Lib\cx_Oracle.pyd
.\Lib\encodings\aliases.pyc
.\Lib\glob.pyc
.\Lib\logging\config.pyc
.\Lib\os.pyc
.\Lib\pprint.pyc
... excreta ... 
```

获取所有文件和您开发的任何 *.py 脚本并将它们卷入适当的目录结构并将其压缩以进行分发。

# android - 格式化日期字符串时出现 IllegalArgumentException？

> ID：13805042
> 
> 赞同：0
> 
> 时间：2012-12-10T16:31:17.057
> 
> 标签：android, date-format, simpledateformat, illegalargumentexception

日期字符串来自我的应用程序的 XML 提要，格式如下`Mon, 10 Dec 2012 13:18:23 GMT`，我想格式化为“13:18:23”。我有这个方法

```
private String formatTime(String time) {
    DateFormat df = new SimpleDateFormat("EEE, dd MMM yyyy kk:mm:ss zzz", Locale.getDefault());

    String temp = null;

    try {

        temp = df.format(time);

    } catch (IllegalArgumentException e) {
         e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return temp;
} 
```

但我不断收到错误`IllegalArgumentException`。

任何人都可以看到这段代码正在发生的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:39:02.173

```
df.format(time); 
```

您将 String 传递给 format() 方法，而它需要 Date 对象。

[在此处](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)查看文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:40:18.703

```
 String tmp = "Mon, 10 Dec 2012 13:18:23 GMT";
    String DATE_FORMAT = "EEE, dd MMM yyyy kk:mm:ss zzz";
    String DATE_FORMAT_NOW = "kk:mm:ss";

    SimpleDateFormat sdfSource = new SimpleDateFormat(DATE_FORMAT);
    Date date = sdfSource.parse(tmp);

    SimpleDateFormat sdfDestination = new SimpleDateFormat(DATE_FORMAT_NOW);

    tmp = sdfDestination.format(date);

    System.out.println("Converted date is : " + tmp); 
```

**输出**：

`Converted date is : 15:18:23`

由于格林威治标准时间，您有 +2 小时的差异。`zzz`从中删除`DATE_FORMAT`，您将获得：

`13:18:23`

# iphone - 随机出现的 UIImage

> ID：13805051
> 
> 赞同：-5
> 
> 时间：2012-12-10T16:32:02.810
> 
> 标签：iphone, objective-c, ios, xcode, ipad

非常新手 obj-c 问题。

在 ViewController 我有四个 UIImages。他们在模仿扑克牌。用户在开始时只能看到他们的背面。通过点击其中一个，用户将看到正面（现在已经准备好动画）。我的任务是从四个具有定义重复率的图像中显示随机正面。所以我想设置其中一张图片（奖品）的出现次数比获得其他任何一张的机会少八倍，每次用户访问这个 ViewController 时。

如果可能的话，请给我看一段可以随机生成但可以设置重复率的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:11:03.280

```
- (NSUInteger)indexForImageGivenIndexSet:(NSIndexSet*)indexSet             // Set of indexes you want to select from
                         prizeImageIndex:(NSUInteger)prizeIndex      // The prize index
                        probabilityScale:(CGFloat)probabilityScale   // The scale for the prize (8.0 for 8x less than the others)
{
    // If invalid, return what was given
    if (![indexSet containsIndex:prizeIndex]) {
        return prizeIndex;
    }

    // Calculate our probabilities
    // For a set of 4, with a scale of 8 on the prize, our probabilities would be
    // 0.04 (prize), 0.32, 0.32, 0.32
    double prizeProbability = (1.0 / indexSet.count) * (1.0 / probabilityScale);

    double val = (double)arc4random() / RAND_MAX;

    if (val < prizeProbability) {
        return prizeIndex;
    }
    else {
        // Select from the others in range equally
        NSMutableIndexSet* newSet = [[NSMutableIndexSet alloc] initWithIndexSet:indexSet];
        [newSet removeIndex:prizeIndex];

        NSInteger selectedPosition = arc4random() % newSet.count;
        __block NSInteger count = 0;
        return [newSet indexPassingTest:^BOOL(NSUInteger idx, BOOL *stop) {
            if (count == selectedPosition) {
                *stop = YES;
                return YES;
            }
            else {
                count++;
                return NO;
            }
        }];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:26:49.217

也许我使用 WDUC 的答案是错误的，但我没有用这种方法得到正确的结果，正如我在对他的回答中所写的那样。我有一个不同的方法，它在概念上与我提到的思想实验相同——也就是说，如果你将你的奖品图像放入一个数组中，然后将其他 3 个图像中的每一个放入一个数组 8 次，那么你将选择奖品图像比其他任何人少 8 倍。但是，要实现这一点，您可以让随机数生成器从一组等于该假设数组的计数（在本例中为 25）的数字中选择，然后使用模运算符来获取正确的索引。

如果您有一个包含 4 个图像的数组，奖品图像是最后一个，则此方法应该选择最后一个索引（在这种情况下为 3）比其他 3 个中的任何一个少 8 倍（我为 numOfItems 传递 4，为 probFactor 传递 8对于你的例子）：

```
-(int)indexOfSelectionFromItems:(int) numOfItems timesLessPicked:(int) probFactor {
    int size = (numOfItems - 1) * probFactor + 1;
    int pick = arc4random_uniform(size);
    if (pick != size-1) {
        return (pick % (numOfItems - 1));
    }else{
        return numOfItems -1;
    }
} 
```

# android - 从一项活动转到另一项活动的其他方式，而不是意图

> ID：13805056
> 
> 赞同：0
> 
> 时间：2012-12-10T16:32:25.913
> 
> 标签：android, android-intent

有没有办法从一个活动转到另一个活动但不使用意图？这就是我使用它的方式：

```
Intent intent = new Intent(context,class);
startActivity(intent); 
```

问题是我不知道为什么，但是从一项活动转到另一项活动需要很长时间。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:33:19.093

> 有没有办法从一个活动转到另一个活动但不使用 Intents？

不。

> 从一项活动转到另一项活动需要很长时间

使用 Traceview 确定您的问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:37:42.587

没有意图就无法在活动之间导航。研究活动生命周期，寻找内存泄漏。这应该可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:41:03.163

android中的一切都是由意图完成的。从一项活动到另一项活动也不例外。因此，意图是从一项活动转到另一项活动的唯一途径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:58:51.347

检查`onPause()`第一个活动，看看你是否有时间在那里工作？如果是这样，优化代码。或者在后台线程中完成工作。

检查第二个活动`onCreate()`的`onResume()`时间等。`thread/ handler/ asynctask`如果需要，请使用。Activity 直到`onResume()`.

# c - C中的dirname（）：手册错了吗？

> ID：13805059
> 
> 赞同：7
> 
> 时间：2012-12-10T16:32:36.867
> 
> 标签：c, dirname

在这里引用[手册](http://linux.die.net/man/3/dirname)：

> 函数 dirname() 和 basename() 将一个以 null 结尾的路径名字符串分解为目录和文件名组件。在通常情况下，**dirname() 返回字符串直到但不包括最后的 '/'**，而 basename() 返回最后的 '/' 之后的组件。尾随 '/' 字符不计入路径名的一部分。

稍后，你有这张小桌子：

```
path         dirname    basename
"/usr/lib"    "/usr"    "lib"
"/usr/"       "/"       "usr"        // wat?
"usr"         "."       "usr"
"/"           "/"       "/"
"."           "."       "."
".."          "."       ".." 
```

为什么是`dirname( "/usr/")`返回`"/"`而不是`"/usr"`？
手册中的句子告诉我我应该得到`/usr`结果。
我在一个虚拟程序中测试了实际结果，它的行为就像手册所说的那样。

```
#include <libgen.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, char const *argv[])
{
    const char *mydir="/usr/";
    char *dummy  = strdup( mydir );
    char *dummy2 = strdup( mydir );

    char *dname = dirname( dummy );
    char *bname = basename( dummy2 );

    printf("mydir: '%s', dname: '%s', bname: '%s'\n", mydir, dname, bname);

    free( dummy );
    free( dummy2 );

    return 0;
}

$ ./test  
mydir: '/usr/', dname: '/', bname: 'usr' 
```

现在，我期望的是：

```
path         dirname    basename
"/usr/"       "/usr"       ""        // more consistent? 
```

所以..有人明白这里发生了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T16:42:05.223

> 尾随 '/' 字符不计入路径名的一部分。

因此“/usr/”和“/usr”是一样的，它可能表示一个文件或目录，在目录中具有名称（目录条目命名`usr`）`/`。该函数`dirname`返回路径的父目录。的父目录`/usr`是`/`. 似乎完全一致。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T16:37:53.653

目录也是文件。 `usr`当然是文件的基本名称`/usr`。这完全遵循手册 - 在 中`/usr`，根-`/`是最终的`/`，`usr`是它后面的内容，因此是基本名称。

至于`/usr/`v. `/usr`，我怀疑这是因为决赛`/`总是被吞下，这是在其他地方指定的，或者属于“通常情况下”的限定。否则`/usr///`，`/usr///////////`将指代完全不同的实体......

# unix - 如何使用 sed 在 unix 中用 '$' 替换字符串

> ID：13805063
> 
> 赞同：1
> 
> 时间：2012-12-10T16:32:39.237
> 
> 标签：unix, search, sed, replace

我正在尝试使用以下语句替换目录中所有文件中的字符串`#########`，但出现错误。`$``$HOME/findreplace/``sed: Function s_#########_ cannot be parsed.`

提前感谢您的帮助。

```
for file in $HOME/findreplace/*.*
do
    sed -e "s_#########_$_g" $file> /tmp/tempfile.tmp
    mv /tmp/tempfile.tmp $file
    echo "Modified: " $file
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:36:01.693

你可以做：

```
for file in $HOME/findreplace/*.*
do
    sed -i 's/#########/\$/g' "$file"
    echo "Modified:  $file"
done 
```

**解释：**

*   `/`改为使用`_`之前的位置来分隔要匹配的模式和要替换的模式。
*   用于`\`转义`$`字符
*   使用单引号而不是双引号来避免 bash 自动扩展某些内容（单引号括起来的字符串将按字面意思解释）
*   使用该`-i`选项进行`sed`就地编辑，这样您就可以避免使用临时文件。
*   您几乎总是希望将变量（例如`$file`）括在双引号中。

# matlab - 混淆曲面图和矩阵之间的轴差异。（试图解决泊松方程）

> ID：13805065
> 
> 赞同：0
> 
> 时间：2012-12-10T16:32:50.157
> 
> 标签：matlab

我尝试遵循本教程：[离散泊松方程的数值解](http://www.cryptosystem.org/archives/2009/09/using-matlab-for-numerical-solutions-to-the-discrete-poisson-equation/ "离散泊松方程的数值解")并添加边界条件，但我无法正确设置轴。然后我修改了一些变量，它似乎已经开始工作了，但我不是 100% 确定的。

这是我要解决的问题：

```
u_xx + u_yy = f(x,y), 0 <= x <= 1, 0 <= y <= 1.

u(x,y)=lower(x), if y=0
u(x,y)=upper(x), if y=1
u(x,y)=left(y), if x=0
u(x,y)=right(y), if x=1 
```

Solver 函数如下：（让我担心的地方标有 %WARNING%）：

```
function [ hor_padded ] = poisson_solver( f, upper, lower, left, right ,m, n)
%m, n - Number of points (same in x and y direction)

x_a=0;
x_b=1;
y_a=0;
y_b=1;

dx = (x_b-x_a)/m; %dx=dy

x=linspace(x_a,x_b,m);
y=linspace(y_a,y_b,n);

g=zeros(m,n);

for i=1:n,
    for j=1:m,
        %WARNING 1% 
        g(j,i)=-f(x(i),y(j))*dx*dx;

        if j==2
           g(j,i)=g(j,i)+lower(x(i));
        end
        if j==n-1
           g(j,i)=g(j,i)+upper(x(i));
        end
        if i==2
           g(j,i)=g(j,i)+left(y(j));
        end
        if i==n-1
           g(j,i)=g(j,i)+right(y(j));
        end
    end
end

b = reshape(g(2:m-1, 2:n-1),(m-2)*(n-2),1);

A = gallery('poisson',m-2);

U = A\b;

u = reshape(U,m-2,n-2);

upper_part=upper(x(2:m-1)); 
lower_part=lower(x(2:m-1)); 
left_part = left(y');
right_part = right(y');

%WARNING 2%
ver_padded = vertcat(lower_part, u, upper_part);
hor_padded = horzcat(left_part, ver_padded, right_part);

end 
```

1.  警告 1) Matlab 似乎在矩阵内混合了 x 和 y 轴。（如此处所述：[Axis labeling question](https://stackoverflow.com/questions/3116849/axis-labeling-question)）。所以我在for循环中改变了X和Y方向。它是否正确？
2.  警告 2）我一开始就有了 upper_part 和 lower_part，但结果图中的边界没有相遇。我检查了变量，尝试了相反的方法，它开始工作了。它是否正确？

我的测试程序在这里：

```
clear;

m = 100;
n = 100;

x_a=0;
x_b=1;
y_a=0;
y_b=1;

e=exp(1);
f=@(x,y)(e*x+e*y); 

%Boundary conditions
upper = @(x) (x);
lower = @(x) (3-x);
left = @(y) (3-3*y);
right = @(y) (2-y);

u = poisson_solver(f, upper, lower, left, right, m, n);

x=linspace(x_a,x_b,m);
y=linspace(y_a,y_b,n);

surf(x,y,u);
xlabel('x');
ylabel('y'); 
```

还有另一个测试用例：（其他一切都和上面的例子一样）：

```
upper = @(x) (exp(x));
lower = @(x) (cos(x*2*pi));
left = @(y) (cos(y*2*pi));
right = @(y) (exp(y)); 
```

名称“上”、“下”、“左”和“右”指的是结果图，而不是求解器函数中矩阵 u 中的相应位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:21:36.617

> 警告 1) Matlab 似乎在矩阵内混合了 x 和 y 轴。（如此处所述：Axis labeling question）。所以我在for循环中改变了X和Y方向。它是否正确？

是的，矩阵的第一个索引是行索引，第二个索引是列索引：

```
[ (1,1)  (1,2)  . . .   (1,n);
  (2,1)  (2,2)  . . .   (2,n);
    :      :    .         :
    :      :      .       :
    :      :        .     :
  (m,1)  (m,2)  . . .   (m,n)]; 
```

> 警告 2）我一开始就有了 upper_part 和 lower_part，但结果图中的边界没有相遇。我检查了变量，尝试了相反的方法，它开始工作了。它是否正确？

如果将矩阵定义为 xy 平面，则必须遵守索引的定义。正如您在我的索引示例中看到的那样，“原点”( `(1,1)`) 位于左上角，“y 轴”指向“向下”。所以考虑到这一点，你的上下变化是正确的。

在旁注中，您当然可以以不同的方式定义所有内容，这只是一堆以您定义的方式排列和存储的数字！

# php - Flex 使用 AMFPHP 下载文件

> ID：13805073
> 
> 赞同：0
> 
> 时间：2012-12-10T16:33:16.427
> 
> 标签：php, actionscript-3, apache-flex, air, amfphp

有谁知道是否可以使用 AMFPHP 下载文件。我找到了一些使用直接从 php 下载的示例。如果是，一些例子？我有一个使用 AMFPHP 上传文件的例程，但我没有在网上找到使用 AMFPHP 下载的示例。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:10:09.890

尝试使用 ByteArray。类似 return new Amfphp_Core_Amf_Types_ByteArray($data);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T23:01:16.447

我找到了这篇文章： http: [//gertonscorner.wordpress.com/2009/03/15/fileupload-using-amfphp-remoteobject-and-flash-10/](http://gertonscorner.wordpress.com/2009/03/15/fileupload-using-amfphp-remoteobject-and-flash-10/)。基于它我制作了自己的版本，因为我的服务是通过 service-config.xml 以 amfphp 文档中描述的方式定义的， [您的第一个项目使用 Amfphp 部分](http://www.silexlabs.org/amfphp/documentation/your-first-project-using-amfphp/)。

服务器端：

如果您已经知道如何配置网关以同时访问服务类和值对象类，这里是两个类：

值对象类：

```
<?php
class FileVO {

    public $filename;
    public $filedata;

    // explicit actionscript class
    var $_explicitType = "remoting.vo.FileVO";
}
?> 
```

服务等级：

```
<?php
class RemoteFile { 
/** 
* Upload files! 
* 
* @param  FileVO $file
* @return string
**/  
  public function upload(FileVO $file) { 
    $data = $file->filedata->data;
    file_put_contents(UPLOAD_PATH . $file->filename, $data);
    return 'File: ' . $file->filename .' Uploaded '; 
  } 
}
?> 
```

如您所见，我们有常量 UPLOAD_PATH，这是我们放置文件的目录。该目录中的文件名将是来自客户端的文件名。当然，您需要更改它，但目前超出了本示例的范围。

客户端：

在客户端，在 Flex 项目的 src 文件夹中，我使用值对象类构建了一个包，保存为 ActionScrip 文件：

```
package remoting.vo
{
import flash.utils.ByteArray;

  [RemoteClass(alias="FileVO")]
  public class FileVO{
    public var filename:String;
    public var filedata:ByteArray;

    public function FileVO(){
    }

  }
} 
```

带有文件上传的组件：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         xmlns:net="flash.net.*">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <net:FileReference id="fileReference"
                           select="select_handler(event)"
                           complete="complete_handler(event);"
                           />
        <s:RemoteObject id="ro" 
                        destination="amfphp"
                        source="RemoteFile"
                        result="handleResult(event)"
                        fault="Alert.show('Error ! ')"/>
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.rpc.events.ResultEvent;

            import remoting.vo.FileVO;

            public function handleResult(event:ResultEvent):void{
                Alert.show('the server said : ' + event.result);
            }

            private function btn_click(evt:MouseEvent):void {
                fileReference.browse();
            }
            private function select_handler(evt:Event):void{
                fileReference.load();
            }
            private function complete_handler(evt:Event):void{
                var data:ByteArray = new ByteArray(); 
                var file:FileVO;

                //Read the bytes into bytearray var
                fileReference.data.readBytes(data, 0, fileReference.data.length); 

                // Create a new FileVO instance
                file = new FileVO();
                file.filename = fileReference.name;
                file.filedata = data;
                ro.upload(file);
            }

            private function onEvent(evt:Event):void {
            Alert.show(evt.toString(), evt.type);
            }
        ]]>
    </fx:Script>
    <s:Button id="btn" label="Browse to Upload" click="btn_click(event);" />
</s:Group> 
```

对我来说它有效！至少在我的开发服务器上。请注意此处的安全漏洞。您需要提供某种形式的保护以防止任何滥用行为。

# perl - autovivification 创建的哈希有额外的键

> ID：13805077
> 
> 赞同：1
> 
> 时间：2012-12-10T16:33:21.513
> 
> 标签：perl, hash, autovivification

这就是我所拥有的

```
my %count_words;

while (<DATA>){
    my $line= $_;
    chomp $line;
    my @words = split (/ /, "$line");
    foreach my $word(@words){
        $count_words{"$word"}++;
    }
}

foreach my $key (%count_words){
    print "\"$key\" occurs \"$count_words{$key}\" times\n";
}

__DATA__
we name is something
this is what it does
we food food food food 
```

这是我得到的输出

```
"it" occurs "1" times
"1" occurs "" times
"what" occurs "1" times
"1" occurs "" times
"name" occurs "1" times
"1" occurs "" times
"food" occurs "1" times
"1" occurs "" times
"does" occurs "1" times
"1" occurs "" times
"is" occurs "2" times
"2" occurs "" times
"we" occurs "2" times
"2" occurs "" times
"food" occurs "3" times
"3" occurs "" times
"something" occurs "1" times
"1" occurs "" times
"this" occurs "1" times
"1" occurs "" times 
```

我的问题是为什么要创建这些附加键，它们本质上是先前创建的键-> 值对的值。

这是我所期望的

```
"it" occurs "1" times
"what" occurs "1" times
"name" occurs "1" times
"food" occurs "1" times
"does" occurs "1" times
"is" occurs "2" times
"we" occurs "2" times
"food" occurs "3" times
"something" occurs "1" times
"this" occurs "1" times 
```

有人可以纠正我明显的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:35:28.627

你的错误在你的 foreach 循环中，你需要这个`keys`函数：

```
foreach my $key ( keys %count_words){
    print "\"$key\" occurs \"$count_words{$key}\" times\n";
} 
```

否则，您`foreach`将遍历所有键和值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T16:38:51.463

问题是你没有使用

```
use strict;
use warnings; 
```

如果你有，它会给你一个关于你的代码错误的线索

```
Use of uninitialized value $count_words{"1"}... 
```

或者类似的东西。

问题是，正如 Tim A 已经指出的那样，您在列表上下文中使用哈希，这意味着它扩展为键和值。您应该像他建议的那样使用该`keys`功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T16:36:24.850

尝试：

```
foreach my $key (keys %count_words){
    print "\"$key\" occurs \"$count_words{$key}\" times\n";
} 
```

问题在于，当您遍历哈希时，您会交替遍历键**和**值。

# macos - Applescript 在新窗口中从命令行打开 url

> ID：13805078
> 
> 赞同：0
> 
> 时间：2012-12-10T16:33:21.357
> 
> 标签：macos, bash, applescript

Applescript 中有一些奇怪的行为。我得到了这个脚本

```
property tmpUrl:"http://www.example.com"
on run argv
  if(count argv) > 0 then
    set tmpUrl to item 1 of argv
  end if
  if running of application "Safari" then
    tell application "Safari"
      activate
      make new document with properties{URL:tmpUrl}
    end tell
  else
    tell application "Safari"
      activate
      set URL of document 1 to tmpUrl
    end tell
  end if
end run 
```

从代码中可以看出，它应该总是打开一个新窗口。如果 Safari 已经在运行，则不需要创建新窗口。它将使用自动打开的窗口并更改位置。

当我用 scripteditor 运行它时，一切都按预期工作。但是当我从 bash 中调用它时：

```
osascript web_win_open.applescript "http://www.stackoverflow.com" 
```

它总是表现得像 Safari 正在运行。因此，如果 Safari 没有运行，它会弹出两个窗口。一个带有主页，一个带有来自 cli 的位置。

有什么不同，你如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:05:32.550

> 如果 Safari 已经在运行，则不需要创建新窗口。

您的代码似乎是倒退的。在“如果运行应用程序“Safari”下，那么当使用文档 1 的情况下，您会告诉它创建一个新文档。只需重新排列您的代码，它是倒退的。

# html - 重新排列 CSS 下拉菜单

> ID：13805081
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:33:24.480
> 
> 标签：html, css

我正在按照[教程制作一个 CSS 下拉菜单](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)。但我想知道是否有办法让它出现在左侧，一个按钮在另一个之上，而不是在按钮彼此相邻的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:52:23.907

您将需要删除或更改此 CSS 属性：

```
nav ul li {
    float: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:51:25.607

如果您使用教程来学习，为什么不按照垂直菜单的教程来学习呢？不仅菜单中项目的定位不同，而且子元素的定位也会有很大不同。如果您正在创建一个像您一样的水平菜单，即使您将元素彼此重叠移动，如果当它们的父元素悬停/单击时它们仍然具有相同的“下拉菜单”，这些子元素也会覆盖其他菜单项.

这是一个垂直菜单教程的例子，但那里有很多。 [http://www.devinrolsen.com/pure-css-vertical-menu/](http://www.devinrolsen.com/pure-css-vertical-menu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:12:35.590

我根据您提供的链接为垂直菜单制作了一个[jsFiddle 。](http://jsfiddle.net/qt3Hc/)我删除了所有花哨的渐变、填充和圆角，只使用了一点颜色，其余的都是功能性的 CSS。

每个菜单项都可以是具有此 CSS 的子菜单的根：

```
nav li {
     position: relative;
}
nav ul ul {
     position: absolute;
     top: 0;
     left: 100%;
} 
```

通过这种方式，您可以创建任意深度的菜单。

# android - Android CAB ListView 背景切换问题

> ID：13805086
> 
> 赞同：1
> 
> 时间：2012-12-10T16:33:34.247
> 
> 标签：android, select, android-actionbar, cab

我正在尝试将 CAB（上下文操作栏）添加到我的应用程序中的 ListView 中，除了一件事之外，一切都很顺利。当我最初添加 CAB 时，当我长按它时背景颜色没有改变，尽管它被选中了。我对此的解决方案是覆盖 onItemCheckedStateChanged 并在那里设置背景颜色。我的问题是，当我尝试将背景颜色设置为之前的颜色时，我不能。ListView 背景似乎已褪色，这意味着我无法选择与背景融为一体的颜色。你们是怎么做到的？这是我的代码：

```
@Override
public void onItemCheckedStateChanged(ActionMode mode, int position,
                                              long id, boolean checked) {

    if (checked) {
        //#6DCAEC is a type of Holo Blue that I want.
        listView.getChildAt(position).setBackgroundColor(Color.parseColor("#6DCAEC"));
    } else {
        //#f1f1f1 was the closest I could get to the background put it still seems out of place
        listView.getChildAt(position).setBackgroundColor(Color.parseColor("f1f1f1"));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:23:26.163

关闭选择模式`ListView`：

```
mListView.setChoiceMode(ListView.CHOICE_MODE_NONE); 
```

清除选项*（这不会影响可见项目，只会清除`ListView`内部选项列表）*

```
mListView.clearChoices(); 
```

最后，遍历可见项并更改它们：

```
 for (int i = 0; i < mListView.getChildCount(); i++) {

        View c = mListView.getChildAt(i);

         //--below code is for un-checking, 
         //--you can do something else, 
         //--like altering the background
        if (c instanceof Checkable) {
            ((Checkable) c).setChecked(false);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T09:43:03.880

试试这个代码#e7e8e9，在我的手机上试过，效果很好

在这里找到：[导航抽屉的全息灯颜色代码](https://stackoverflow.com/questions/17031727/holo-light-color-code-of-navigation-drawer)

# jquery - 使用 PhoneGap 从我的应用内目录购买产品

> ID：13805087
> 
> 赞同：0
> 
> 时间：2012-12-10T16:33:38.300
> 
> 标签：jquery, jquery-mobile, cordova, in-app-purchase

我的 PhoneGap 应用程序上有一个产品目录，想知道是否可以从应用程序内的人那里收款，而不是将他们引导到 safari 浏览器网页视图？即让用户输入他们的银行详细信息等。

我研究了应用内购买，但我不相信这是我需要的。它有望成为网站上的支付网关，但只是为了集成到 PhoneGap 中？一厢情愿的想法也许..：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:42:54.443

有一个用于 phonegap 的贝宝插件，它运行良好：[https](https://github.com/phonegap/phonegap-plugins/tree/master/Android/PayPalPlugin) ://github.com/phonegap/phonegap-plugins/tree/master/Android/PayPalPlugin 。

如果您在插件集成方面需要帮助，请与我联系。此版本适用于 phonegap/cordova 2.0。

# java - 为什么我的锯齿测试音无法播放？

> ID：13805091
> 
> 赞同：1
> 
> 时间：2012-12-10T16:33:51.580
> 
> 标签：java

我不应该在循环样本长度的for循环中制作它吗？我不明白为什么它播放的是正弦波公式而不是锯齿波......这是从一个结构非常相似的哔哔声类修改而来的，也许是中间的 for 循环产生了太多的轮数而无法获得锯齿形状。你怎么看？这是我的代码：

```
class MakeSaw
{

  static void makeSaw(double f, int t) throws Exception
  {

    int nChannel = 1;         // number of channel : 1 or 2

    // samples per second
    float sampleRate = 16000;  // valid:8000,11025,16000,22050,44100
    int nBit = 16;             // 8 bit or 16 bit sample

    int bytesPerSample = nChannel*nBit/8;

    int bufferSize = (int) (nChannel*sampleRate*t*bytesPerSample);
    byte[] audioData = new byte[bufferSize];

    // "type cast" to ShortBuffer
    java.nio.ByteBuffer byteBuffer = java.nio.ByteBuffer.wrap(audioData);
    java.nio.ShortBuffer shortBuffer = byteBuffer.asShortBuffer();

    int sampleLength = audioData.length/bytesPerSample;

    // generate the wave
    double volume = 8192;   // 0-32767
    double PI = Math.PI;
    double sawWave=0;

        //make saw wave
        for(int i = 0; i < sampleLength; i++)
        {
            double time = i/sampleRate;
            sawWave = sawWave + Math.sin(2*PI*f*(i*t)/i);    //passing amplitude frequency and time
            short amplitude = (short) (volume*sawWave);

            for (int c=0;c<1;c++) //repeat once because audio playing on one channel
            {
                shortBuffer.put(amplitude);
            }
        }

    //end wave making//end generating sound wave sample

    boolean isSigned=true;
    boolean isBigEndian=true;

    // Define audio format
    javax.sound.sampled.AudioFormat audioFormat =
      new javax.sound.sampled.AudioFormat(sampleRate, nBit, nChannel, isSigned,isBigEndian);

    javax.sound.sampled.DataLine.Info dataLineInfo =
      new javax.sound.sampled.DataLine.Info(
         javax.sound.sampled.SourceDataLine.class, audioFormat);

    // get the SourceDataLine object
    javax.sound.sampled.SourceDataLine sourceDataLine = 
      (javax.sound.sampled.SourceDataLine)
      javax.sound.sampled.AudioSystem.getLine(dataLineInfo);

    sourceDataLine.open(audioFormat);
    sourceDataLine.start();

    // actually play the sound
    sourceDataLine.write(audioData,0,audioData.length);

    // "flush",  wait until the sound is completed
    sourceDataLine.drain();

  }

  public static void main(String[] args) throws Exception
  {

    makeSaw(400,2);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:40:49.070

你的计算`sawWave`是错误的。所有的幅度都为零。

我没有尝试为你调试这个，但是有三件事很突出

```
 double time = i/sampleRate;
        sawWave = sawWave + Math.sin(2*PI*f*(i*t)/i);    //passing amplitude frequency and time 
```

1.  你没有`time`在`sawWave`计算中使用。
2.  这种划分`i`看起来很可疑。
3.  为什么要`sin()`在生成锯齿波时使用？

# r - 残差输入 R

> ID：13805092
> 
> 赞同：0
> 
> 时间：2012-12-10T16:31:37.820
> 
> 标签：r

我得到了关于 1960 年和 1970 年的原始数据，这些数据是关于前次生育的妇女将再生育一次的比例。我必须做一个 2 路分析表，然后是一个方形组合表来获得残差。我不知道如何在 R 中计算，所以它是手动完成的（按行中位数，然后按列中位数）。这是我对不同组的残差：

```
P0      P1      P2      P3      P4      P5
0.186   0.122   -0.014  -0.059  -0.017  0.013
-0.004  -0.004  -0.004  0.004   0.042   0.006
-0.174  -0.125  -0.013  0.018   0.048   0.012
0.205   0.176   0.043   -0.043  -0.052  -0.053
0.004   0.004   0.004   -0.004  -0.013  -0.069
-0.040  -0.011  0.009   0.005   0.013   -0.006 
```

如何在 R 中输入，以创建茎叶和残差图。这些值是 1960 年第 1-3 行和 1970 年第 1-3 行数据的残差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:07:06.867

To get row medians of a matrix `a`:

```
 apply(a,1,median) 
```

To get column medians:

```
 apply(a,2,median) 
```

To get overall median:

```
 median(a) 
```

To combine the resulting row and column effects (say they're in vectors called `roweff` and `coleff`) into a matrix, `outer(roweff,coleff,"+")`

However, the command `medpolish` may also be useful in that it probably does mostly what you need.

To read the data in as a table (i.e. a matrix), use `read.table`, see the help under `?read.table`

To read the data in as a vector, among other things you could `scan` it. See `?scan`

To get a stem and leaf plot, see `?stem`.

As my comment suggests, I can't tell what you want for a residual plot.

This information is covered in numerous documents. To get started, see the manual "An Introduction to R" that comes with R and is also freely available on the internet. There are a heap of beginner R documents to be found as well. One place to start is [here](http://cran.r-project.org/other-docs.html)

# php - Windows 上的 PHP：空白 .php 文件加载缓慢，空白 .html 文件加载快速

> ID：13805096
> 
> 赞同：2
> 
> 时间：2012-12-10T16:34:19.397
> 
> 标签：php, performance, iis-6

我正在开发一个最近转换为 PHP（以前是 VB.net）的站点，而新的 PHP 站点运行速度非常缓慢（在此处插入 PHP 笑话）。

www.silhouetteonlinestore.com

所以我做的第一件事就是优化我的代码，在我能找到的每个地方进行调整，但它对加载时间的帮助可能超过 50 毫秒。然后我在 web.config 中取消了 URL 重写，这实际上将加载时间缩短了一半，但仍然不能接受。

然后我发现了这个：

*   www.silhouetteonlinestore.com/php/test.php（运行缓慢）
*   www.silhouetteonlinestore.com/php/test.html（运行速度快）
*   www.silhouetteonlinestore.com/php/test.aspx（运行速度很快）

上述三个文件都运行相同的静态 HTML 代码，标签中带有“test”一词，但 PHP 的运行速度很慢！具有相同配置的站点的测试版本，在同一台服务器上，运行速度极快，因此无论问题是什么，似乎都因站点上的额外流量而加剧。但是我们没有数以百万计的人访问该网站或任何其他东西——我们平均在任何特定时刻浏览该网站的用户有 300-500 人。

配置：

*   IIS 6.0 上的 PHP 5.2.17，使用 FastCGI
*   托管在 Windows 2008 服务器上，配备四核 AMD Opteron(tm) 处理器 2374 HE 2.20 GHz
*   8 GB 内存
*   64 位操作系统

我对服务器管理不是很有经验，因此感谢您的帮助。我的第一个预感是升级到 PHP 5.4.4，因为那里可能存在兼容性问题，所以我将继续努力；不久前我尝试这样做，但无法使其正常工作（phpinfo（）显示某些设置仍然认为它是5.2，并且我认为有一个未设置的环境变量或其他东西）。

让我知道我遗漏了哪些其他重要信息；我真的很感谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:54:17.597

要找出导致问题的原因，您应该尝试以下操作：

1.  您需要查看 PHP 的严格、通知、错误和警告消息。您可以通过编辑 PHP.ini 来做到这一点。请参阅PHP 手册[的 errorfunction 部分](http://php.net/manual/en/errorfunc.configuration.php)。注意我实际上会编辑 php.ini 文件而不使用[ini_set()](http://php.net/manual/en/function.ini-set.php)因为问题可能发生在第一次调用发生之前`ini_set()`。
2.  为 IIS安装[PHP 管理器](http://phpmanager.codeplex.com/)并查看它添加到 IIS 管理器的部分中的警告。它会对您的 php.ini 文件有什么问题提出一些建议。我从未见过它检测到显着降低 PHP 速度的问题，但它肯定有可能。
3.  [使用Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)分析对 php.exe 的调用，看看是否有任何失败的文件调用等。

# exception - z3 中的一个例外

> ID：13805100
> 
> 赞同：0
> 
> 时间：2012-12-10T16:34:28.243
> 
> 标签：exception, warnings, z3

那里当我从 smtlib2 实例中获得 unsat cores 时，我将它们拆分为一个子句，例如（not (>=::Int x1))。然后我尝试将该子句添加到 z3 以再次解决。但是问题发生了被遵守后。

> 警告：无效的函数应用，位置 1 的参数排序不匹配警告：（定义非 Bool Bool）应用于：（非（<= 0::Int x6））排序 Bool

```
expr F = to_expr(ctx,f);
solver s(ctx);`
expr_vector todo(c);
vector<expr> u;
todo.push_back(F);
while (!todo.empty()) {
    expr current = todo.back();
    todo.pop_back();
    if (current.decl().decl_kind() == Z3_OP_AND) {
         for (unsigned i = 0; i < current.num_args(); i++) {
             u.push_back(current.arg(i));
          }
    }
}
for(i=0;i<u.size();i++){
    expr r = to_expr(ct.,Z3_mk_not(ctx,u[i]));
    s.add(r);
}
if(s.check() == sat){
    model m = s.get_model();
}else if(s.check() == unsat){
    expr_vector core = s.unsat_core();
} 
```

你能帮帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:17:17.063

你没有提供完整的例子。所以，很难准确。我的猜测是您正在混合来自不同 Z3 上下文的表达式。下面这段代码非常可疑：

```
solver s(ctx);
expr_vector todo(c); 
```

看来您有两个 Z3 上下文：`ctx`和`c`. 一个上下文中的表达式和公式不能用于不同的上下文。我们必须将它们从一种上下文翻译到另一种上下文（API: `Z3_translate`）。这是一个“高级”功能。大多数用户不需要多个上下文。我强烈建议您使用单一上下文。

此外，您似乎正在尝试从 Stackoverflow 上可用的不同现有帖子中“粘合”代码片段。但是，生成的代码似乎很奇怪。你基本上得到了一个公式`f`，在 -loop 中提取它的合取词`while`，然后在 -loop 中断言它们中的每一个的否定`for`。也就是说，如果`f`是公式

```
A and B and C 
```

您的程序在求解器中断言以下文字`s`:`(Not A)`和. 那是你真正想要的吗？`(Not B)``(Not C)`

为什么要使用双循环？您可以在 -loop 中断言否定`while`，并避免使用辅助向量`u`。

`check`另一个问题，您在不提供假设的情况下调用。因此，该`unsat_core`方法将返回空向量。请查看`examples/c++/example.cpp`Z3 发行版文件中的 unsat-core 示例。

请记住，Z3 具有适用于 Python 和 .Net 等托管语言的 API。它们比 C++ 更容易使用。我们有几个[Z3 Python API](http://rise4fun.com/Z3Py/tutorial/guide)教程。

# php - PHP - 将数组传递给函数 - 重置的目的

> ID：13805102
> 
> 赞同：2
> 
> 时间：2012-12-10T16:34:34.967
> 
> 标签：php

我正在浏览一些书籍示例，但无法理解为什么一个示例会以这种方式工作。在这个例子中，一个数组被传递给一个函数。然后该函数创建一个表格，其中包含单独行上的所有元素。我的问题是重置如何在此功能中工作？在我的逻辑中，当 reset 重置 $data 时，数组返回到第一个元素，并且表格应该无休止地只显示第一个元素。只是在浏览器中看到结果，我知道这不是真的。但为什么？

```
<?php

    function create_table($data) {
        echo "<table border=\"1\">";
        reset($data); // Remember this is used to point to the beginning 
        $value = current($data);
        while ($value) {
            echo "<tr><td>".$value."</td></tr>\n";
            $value = next($data);
        }
        echo "</table>";
    }
?>

<?php
    $my_array = array('Line one. ','Line two. ','Line three. ');
    create_table($my_array);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:36:59.290

数组有一个指示当前元素位置的内部指针。该`current()`函数获取当前项，然后`next()`移动到下一项并获取它。该`reset()`函数将指针移回起点。

最终这是对函数调用的浪费。只需使用`foreach($data as $value)`就足够了，但还有一种更简单的方法：

```
function create_table($data) {
  echo "<table border=\"1\"><tr><td>".implode("</td></tr><tr><td>",$data)."</td></tr></table>";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T16:37:40.560

重置仅在 while 循环之外调用一次。因此，每次调用 create_table 时它只会重置一次数组。然后，在循环中，有 next($data) 将指针移动到下一个元素

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T16:37:35.287

我将突出显示循环：

```
while ($value) {
        echo "<tr><td>".$value."</td></tr>\n";
        $value = next($data);
    } 
```

你看到最后的声明了吗？`next($array)`将“指针”向前移动一位，值存储在`$value`. 当数组指针到达末尾时，`next()`将返回`false`并且也将停止循环。

类似的构造`foreach()`隐式地执行此操作，即它重置数组并循环遍历其元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:37:00.260

> 为什么[此代码有效]？

您正在使用and遍历数组 ( `$data`) 。[`current()`](http://php.net/manual/en/function.current.php)[`next()`](http://php.net/manual/en/function.next.php)

### 流动：

*   `reset()`数组到开头
*   获取`current()`元素（第一）
*   循环`while`你有一个`$value`
    *   移动到`next()`元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T16:37:15.733

因为`while`循环`next()`在这一行中有一个，`$value = next($data);`它转到数组中的下一个元素。`current()`因此，循环使用和遍历数组`next()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T16:38:11.287

因为[`next`](http://us3.php.net/manual/en/function.next.php)将内部数组指针向前移动。 `reset`用于确保内部数组指针位于开头（即以防万一`next`或类似的东西在此函数调用之前对其进行调用），并`current`获取第一个值。然后，它继续向前推进`next`。

实际上，由于数组不是通过引用传递的，我很确定`reset`它什么都不做，但我并不肯定。

我根本不会推荐这个，而且我认为它有点过时了。我会用`foreach`. 如果虚假值合法地位于数组内部，则上述内容甚至都不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T16:38:41.073

`reset()`在进入函数时将数组指针设置为开头，以确保它在数组迭代时从开头开始。

循环内部实际上`next()`使`while`指针前进。

# eclipse - Eclipse Juno 在编辑器中切换选项卡很慢

> ID：13805109
> 
> 赞同：21
> 
> 时间：2012-12-10T16:34:45.383
> 
> 标签：eclipse

在 OSX 10.8.2 Mountain Lion，Java 版本“1.6.0_37”上的 Eclipse Juno SR1 中，启动后一段时间，在正在编辑的源文件的选项卡之间切换会变得非常慢。CPU 达到 100% 并且编辑器在显示新选项卡内容之前冻结了几秒钟。

在阅读有关问题后，我将 eclipse.ini 编辑为：

```
--launcher.XXMaxPermSize 2768M
-XX:MaxPermSize=2768M
-Xms440m
-Xmx2512m 
```

[正如http://wiki.eclipse.org/](http://wiki.eclipse.org/)所建议的那样，这只产生了这样的效果，即现在我重新启动 Eclipse 后问题需要更长的时间才能再次开始发生。

我不敢相信在一台配备 SATAIII SSD、i5 处理器和 8GB 内存的机器上，在文本编辑器中切换选项卡会如此缓慢。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T05:35:47.753

Juno 和 Juno SR1 在打开、关闭和切换编辑器时存在严重的性能问题。

[Eclipse 社区在即将推出的 Juno SR2 和 Kepler M4 中修复了许多性能问题](http://dev.eclipse.org/mhonarc/lists/eclipse-dev/msg09513.html)。您可以安装 Juno 的维护版本进行尝试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T10:48:59.947

**编辑**：SR1 补丁不再是最佳选择，因为 SR2 已经发布。使用最新的 Eclipse Juno (4.2.2) 或 Kepler (4.3) 发布后（[正式日期为 6 月 26 日](http://wiki.eclipse.org/Kepler/Simultaneous_Release_Plan#Schedule)）。

* * *

如果您还不想安装 SR2（正式发布日期为2 月），Eclipse [Juno](http://wiki.eclipse.org/Juno/Simultaneous_Release_Plan#SR2) SR1 有一个补丁。

1.  调用帮助 > 安装新软件
2.  选择这个存储库：http: [//download.eclipse.org/eclipse/updates/4.2](http://download.eclipse.org/eclipse/updates/4.2)
3.  展开 Juno SR1 补丁并安装**Eclipse UI Juno SR1 优化**

在这里阅读更多：http: [//wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation](http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-02T11:59:18.830

我在 Ubuntu 中遇到过类似的问题，并且将`General/Apperance/Theme`设置切换为`Classic`有很大帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-07T12:12:26.683

更新：Eclipse Juno 的新性能版本 (SP2) 已发布。因此，如果您的 Eclipse Juno(4.2) 太慢或间歇性崩溃，则可以将其更新到 SP2。

只需转到帮助 -> 检查更新

PS 请在执行此操作之前备份您的 Eclipse 文件夹。

原始答案：

这是 Eclipse Juno 中的一个已知问题，并且为此发布了一个补丁。安装它可以解决性能问题 -

[http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation](http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation)

引用

Juno SR2 流 (4.2.2) 中解决了几个主要的性能缺陷。社区成员已确认这些修复大大解决了编辑器和视图打开、关闭和切换的性能问题。这些修复将在 Juno Service Release 2（2013 年 2 月）和 Kepler（2013 年 6 月）版本中广泛提供。同时，为使用 Juno SR1 的用户提供了一个补丁，可以提前访问这些修复程序。要安装此补丁：

确保您已经在 J​​uno SR1 版本（2012 年 9 月）的包上运行 调用帮助 > 安装新软件 选择此存储库：http: [//download.eclipse.org/eclipse/updates/4.2](http://download.eclipse.org/eclipse/updates/4.2)展开 Juno SR1 补丁并安装 Eclipse UI Juno SR1 优化 重复一遍，此补丁仅适用于 Juno SR1 版本的用户。如果您有 11 月 21 日或之后的 Juno SR2 维护版本，或者 Kepler 流里程碑 M4 或更高版本，则不需要此补丁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T19:02:05.320

我正在使用 Kepler 4.3.0.I20130605-2000，并且遇到了标签更改缓慢的烦人问题。

我的项目使用 Spring 3.1、JPA 2、Hibernate。

我通过以下步骤让 Eclipse 运行得非常快：

(1) 最小化自动验证：

```
(menu) Window:Preferences:Validation 
```

(2) 不要加载不必要的插件：

```
(menu) Window:Preferences:Startup and Shutdown 
```

(3) 我也关闭了所有的视角，然后只重新打开我真正需要的那些。

(4) 我用尽可能少的视图创建了一个精益 Java 透视图。

(5) 优化eclipse.ini。

注意奇怪的参数值：

```
-Xmx930m 
```

在我的机器上，如果 Xmx > 930 JVM 将无法启动（操作系统：XP SP3，Ram：4Gb）

eclipse.ini：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar

--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20130521-0416

-product
org.eclipse.epp.package.jee.product

--launcher.defaultAction
openFile

--launcher.XXMaxPermSize
512m

-showsplash
org.eclipse.platform

--launcher.XXMaxPermSize
512m

--launcher.defaultAction
openFile

--launcher.appendVmargs

-vm
C:\dev\Java\jdk1.6.0_26\bin\javaw.exe

-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx930m 
```

# lucene - Sitecore 高级数据库爬虫和部分语言回退

> ID：13805110
> 
> 赞同：0
> 
> 时间：2012-12-10T16:34:48.237
> 
> 标签：lucene, sitecore, culture

我们在 Sitecore 安装中实现了 ADC 和部分语言回退。我们已经确定了一个问题，我们希望其他人已经遇到并可以帮助我们解决这个问题。

基本上，当在默认语言（全球英语）版本之后创建非默认（例如中文）语言项版本并且中文版本“回退”在英文版本上时，Lucene爬虫不会拾取非默认版本。当通过修改中文版破坏“回退”时，Lucene 拾取该项目。

我想知道是否有解决方案或提示下一步在哪里查看以尝试解决此问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T19:42:38.300

我知道这是一篇较旧的帖子，但我们对此有答案并进行了修复，您可以在此处的 sitecore 技术博客中找到详细的答案：

[http://www.sitecore.net/Community/Technical-Blogs/Elizabeth-Spranzani/Posts/2014/03/Fallback-Series-Post-6.aspx](http://www.sitecore.net/Community/Technical-Blogs/Elizabeth-Spranzani/Posts/2014/03/Fallback-Series-Post-6.aspx)

我在这里有一个关于语言后备的 10 个帖子系列。

原因是因为adc爬虫在遍历item并将每个字段的值放入索引时，它不知道语言回退并且不使用它。所以它认为该值为空。您需要添加到逻辑以便它应用回退，查看该字段的回退语言版本，然后将该值放入索引中。

您还可以在此处找到要下载的代码： [https ://github.com/Verndale-Corp/Sitecore-Fallback-ADC-Updates](https://github.com/Verndale-Corp/Sitecore-Fallback-ADC-Updates)

谢谢，丽兹

# javascript - 在新选项卡中打开收集的 html

> ID：13805114
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:35:08.360
> 
> 标签：javascript, ajax

我的网站上有一个报告系统，我想做类似的事情。发送带有进程栏的 ajax，我的服务器端将收集所需的数据，将它们转换为 html，然后发回给我，在 ajax 成功时，我想关闭进程栏并在新的浏览器选项卡中打开我的响应数据。是否可以？如果是，请给我建议，我该怎么做？当数据已经收集并存储在我的 javascript var 中时，我对最后一步感兴趣，我只需要在新选项卡中表示它。

我忘记了一个细微的报告输出，比如 pdf 文件而不是 html=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:50:45.783

你所要做的就是一个

```
window.open(url, window name, attributes...) 
```

标签由浏览器管理，根据用户的设置，您的呼叫将在新标签或新窗口中打开 URL；通常在新标签中。

```
var newWindow = window.open("","","status");

function fillNewWindow() {
    // newWindow.focus()
    var newContent = "<HTML><HEAD><TITLE>A New Doc</TITLE></HEAD>";
    newContent += "<BODY><H1>This document is brand new.</H1>";
    newContent += "</BODY></HTML>"";
    newWindow.document.write(newContent);
    newWindow.document.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:43:50.990

好吧，**无法**控制页面是否会在选项卡和新窗口中打开，但通常在现代浏览器中会`window.open(url, page_title);`在新选项卡中打开。

一旦您将第三个参数发送到`window.open`，例如`'width=850,height=625'`，它将在新窗口中打开。

# javascript - 如何判断 Flowplayer 是否停止计数

> ID：13805117
> 
> 赞同：0
> 
> 时间：2012-12-10T16:35:16.067
> 
> 标签：javascript, flowplayer

我正在使用 Flowplayer 开发一个播放器。使用此播放器时，进入播放器的视频流可能会发生一些切换，视频格式和比特率会发生变化。

现在的问题是，当视频流发生变化时，播放器中的视频会停止并冻结。

JavaScript 中有什么方法可以确定 Flowplayer 的计数器是否已停止？如果是这样，是否还有针对 Flowplayer 的重新加载命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:19:54.660

你看过`getState()`他们的[API 文档](http://flash.flowplayer.org/documentation/api/player.html)吗？

getState() - 整数 - 返回玩家的状态。可能的值为：

*   -1：卸载
*   0：加载
*   1：未启动
*   2：缓冲
*   3：玩
*   4：暂停
*   5：结束

    getStatus() 也将帮助您确定视频的当前时间。

# ajax - 在 Wordpress 上为类别和标签创建 Ajax 链式/依赖下拉列表

> ID：13805120
> 
> 赞同：1
> 
> 时间：2012-12-10T16:35:27.097
> 
> 标签：ajax, wordpress, drop-down-menu

我正在尝试为 WP 创建 2 个相关的下拉列表。我要创建的部分是针对食谱的，所以我希望我的示例比一般问题更有帮助。

我们将食谱分为两部分：餐食类型（开胃菜、主菜、甜点等）和配料（米饭、家禽、牛奶等）。餐食的种类是类别，食材是标签。我正在尝试创建一个 ajax 代码，以便人们可以按类别（即开胃菜）或标签（即鸡肉）或类别和标签（即有鸡肉的开胃菜）过滤我们的食谱。

访问者将从类别页面开始，因此理想情况下，第一个下拉列表应识别用户当前所在的类别并默认列出该类别。第二个下拉菜单的默认值可以说“选择成分”之类的内容，一旦单击，它应该只列出该类别中可用的成分。因此，例如，如果没有香草开胃菜，则香草不应作为第二个下拉列表中的标签提供。

这是我发现的一些[链接](https://stackoverflow.com/questions/4626930/dynamically-filter-wordpress-posts-with-dropdown-menu-using-php-and-ajax)，可以帮助我入门，但我不知道如何使其专门针对类别和标签。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:09:12.193

使用 Ajax 执行 WordPress 函数调用并操作返回值。在 WordPress StackExchange 中查看此插件以[从帖子中取消附加图像](https://wordpress.stackexchange.com/q/54822/12615)。

您描述的名称是“链式菜单”或“链式选择”，请参阅本教程[Simple chained combobox plugin for jQuery](https://web.archive.org/web/20130430040427/http://codeassembly.com/Simple-chained-combobox-plugin-for-jQuery/)。

> 非常简单的 jQuery 链接选择插件，具有 JSON 处理和回调功能，轻松链接多个选择。

# excel - excel公式帮助=+P17-P18

> ID：13805124
> 
> 赞同：0
> 
> 时间：2012-12-10T16:35:34.583
> 
> 标签：excel

这个公式在excel中是什么意思？我有点困惑。结果值为 (P17-P18)/100。

```
=+P17-P18 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:41:02.670

它只是减去`P18`from的值`P17`。领先`+`是没用的，就像说+3和3是相同的值一样。

如果您看到的结果是`(P17-P18)/100`，我猜 P17 和 P18 被格式化为百分比，而结果单元格不是。因此，您将百分比视为其实际数值的 100 倍。

例如

```
P17 = 50%
P18 = 25%
=+P17-P18 = 0.25 (50% - 25% = 25%, and 25% is actually 0.25, which is (50-25)/100 
```

# html - 在 href 属性中用下划线替换空格

> ID：13805125
> 
> 赞同：1
> 
> 时间：2012-12-10T16:35:34.757
> 
> 标签：html, command-prompt

我已经用下划线替换了文件名中的所有空格。文件数量约为 800 个。我使用 Replace Pioneer 相同。但问题是我应该如何替换 href 字段中的这些文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:24:28.663

乍一看，您可能会尝试使用 unix find 和 sed 命令。然而，这样做需要对正则表达式有很强的了解，并且最终可能不仅仅是一个简单的单行。由于您不是简单地替换一个已知字符串并且需要避免替换文件名之外的空格，我建议您通过使用 xml 解析器编写脚本来做到这一点。

如果您要在 Python 中编写这样的脚本，以下是您需要做的基本概述：

1) 导入[操作系统](http://docs.python.org/2/library/os.html)和[ElementTree 库](http://docs.python.org/2/library/xml.etree.elementtree.html)：`import os`和2) 使用 Python 的“ [listdir](http://docs.python.org/2/library/os.html) ”或“ [glob](http://docs.python.org/2/library/glob.html)`from optparse import OptionParser import xml.etree.ElementTree as ET`
” 获取您想要修改的 HTML 文件列表。3) 对于每个文件，根据哪些标签包含需要更改的属性，获取全部或标签。例如，您可以像这样获取文件中的所有标签：`img``a``href``img`

```
file = ET.parse(filename)
doc = file.getroot()
imgs = doc.findall('.//img') 
```

4) 最后，对于每个`img`or`a`标记，将所有空格替换为 tags`href`属性中的下划线。

我希望这有帮助。如果我误解了你的问题，请告诉我。此外，可以使用您提到的工具或类似工具来解决此问题，尽管我认为这不太可能，并且可能需要大量的正则表达式。

# regex - 有没有办法使用 containsregexp 排除文件集中的某些文件？

> ID：13805126
> 
> 赞同：1
> 
> 时间：2012-12-10T16:35:34.663
> 
> 标签：regex, ant

ant 有没有办法使用正则表达式从文件集中排除某些文件？

containsregexp 可用于包含文件，但如何排除与正则表达式匹配的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:18:02.327

您可能正在寻找[`<not>`](http://ant.apache.org/manual/Types/selectors.html#notselect)选择器容器。Ant 文档示例

```
<fileset dir="." includes="*.txt">
    <containsregexp expression="[4-6]\.[0-9]"/>
</fileset> 
```

可以这样否定：

```
<fileset dir="." includes="*.txt">
    <not>
        <containsregexp expression="[4-6]\.[0-9]"/>
    </not>
</fileset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:42:43.343

通常，您可以使用`!`正则表达式前缀来反转匹配。

以下是关于反向正则表达式匹配的一些相关讨论：

*   [如何与正则表达式“反向匹配”？](https://stackoverflow.com/questions/164414/how-to-inverse-match-with-regex)

*   [使用正则表达式反转匹配](https://stackoverflow.com/questions/957379/invert-match-with-regexp)

*   [特定字符串的正则表达式反向匹配？](https://stackoverflow.com/questions/6263923/regex-inverse-matching-on-specific-string)

*   [正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

# css - 转换在 Firefox 或 Opera 中不起作用，只有 chrome

> ID：13805127
> 
> 赞同：0
> 
> 时间：2012-12-10T16:35:44.897
> 
> 标签：css, css-transitions

这是我的 CSS：

```
#pays li{
list-style:none;
margin-left:44px;
display:block;
text-indent: 100%;
white-space: nowrap;
overflow: hidden;
background:url('http://symbolset.com/images/paypal-logo.png') no-repeat;
transition:0.2s;
-moz-transition:0.2s;
-webkit-transition:0.2s;
-o-transition:0.2s;
background-size:300px 180px;
}
#pays li:hover{background:url('http://data-informed.com/wp-content/uploads/2012/10/PayPal_logo.svg-crop-300x180.png') no-repeat}
#paypal{width:300px;height:180px}​ 
```

这是[jsfiddle 中的完整代码](http://jsfiddle.net/vMq3A/)。它在 Chrome 中完美运行，所有其他浏览器都无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:52:40.410

`background-size`在“CSS 背景和边框模块 Level 3”的早期草稿中是不可动画的。我猜它还没有跨浏览器实现。但实际上[它应该在草案中是可动画的](http://www.w3.org/TR/css3-background/#the-background-size)（“Animatable：是的，除了关键字值”）。

永远记住，背景和过渡模块都还没有完成。“CSS 背景和边框 3 级”处于“候选推荐”状态，“CSS 过渡”只是一个“工作草案”。因此，您正在使用可能会受到进一步变化的不稳定技术。不要相信 Chromium 已经实现的东西，它可能会改变。

CSS 中的动画属性列表：http: [//oli.jp/2010/css-animatable-properties/](http://oli.jp/2010/css-animatable-properties/)

CSS 开发状态概览：[http ://www.w3.org/Style/CSS/current-work](http://www.w3.org/Style/CSS/current-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:24:12.170

由于背景图像更改的转换非常受 atm 支持，因此您有 2 个选项：

1.  使用图像精灵并为背景位置设置动画
2.  嵌入另一个元素（不幸的是你不能使用伪元素，它们上的动画也很差支持，atm）和动画不透明度

# android - Android 扩展文件 - 找不到资源

> ID：13805129
> 
> 赞同：3
> 
> 时间：2012-12-10T16:35:53.323
> 
> 标签：android

我正在尝试让我的应用下载扩展文件。这是我的主要内容：

```
package tm.down.rob;

import com.google.android.vending.expansion.downloader.DownloadProgressInfo;
import com.google.android.vending.expansion.downloader.DownloaderClientMarshaller;
import com.google.android.vending.expansion.downloader.Helpers;
import com.google.android.vending.expansion.downloader.IDownloaderClient;

import android.app.Activity;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;
import android.os.Messenger;
import android.util.Log;
import android.widget.ProgressBar;
import android.widget.TextView;

public class main extends Activity implements IDownloaderClient {
    /** Called when the activity is first created. */

    TextView tv1;

    @Override
     public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      //////////
      tv1 = (TextView)findViewById(R.id.textView1);
      //////////

      // Check whether the file have been downloaded.
      String mainFileName = Helpers.getExpansionAPKFileName(this, true, 1);
      boolean fileExists = Helpers.doesFileExist(this, mainFileName, 32921796L, false);

      if (!fileExists) {
       Intent launcher = getIntent();
       Intent fromNotification = new Intent(this, getClass());
       fromNotification.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
       fromNotification.setAction(launcher.getAction());

       if (launcher.getCategories() != null) {
        for (String cat : launcher.getCategories()) {
         fromNotification.addCategory(cat);
        }
       }

       PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, fromNotification, PendingIntent.FLAG_UPDATE_CURRENT);

       try {

        int result = DownloaderClientMarshaller.startDownloadServiceIfRequired( this, pendingIntent, ExpansionFileDownloaderService.class);
        if (DownloaderClientMarshaller.NO_DOWNLOAD_REQUIRED != result) {

            // implement Downloading UI.
            tv1.setText("Need to download.");

         return;
        }

       } catch (Exception e) { 
        Log.e("apk-expansion-files", "NameNotFoundException occurred. " + e.getMessage(), e);
       }
      }

      tv1.setText("Downloaded!");

     }

    ///////////////////////////////////////////////////

    @Override
    public void onServiceConnected(Messenger m) {
        tv1.setText("onServiceConnected: " + m.toString() );
    }

    ///////////

    @Override
    public void onDownloadStateChanged(int newState) {
        tv1.setText("onDownloadStateChanged: " + String.valueOf(newState) );
    }

    ////////////

    @Override
    public void onDownloadProgress(DownloadProgressInfo progress) {
        ProgressBar mPB = (ProgressBar)findViewById(R.id.progressBar1);

        progress.mOverallTotal = progress.mOverallTotal;
        mPB.setMax((int) (progress.mOverallTotal >> 8));
        mPB.setProgress((int) (progress.mOverallProgress >> 8));
        //mProgressPercent.setText(Long.toString(progress.mOverallProgress * 100 / progress.mOverallTotal) + "%");
        //mProgressFraction.setText(Helpers.getDownloadProgressString(progress.mOverallProgress,progress.mOverallTotal));

    }

    ////////////

} 
```

我编译了 apk 并将其上传到标记，并使用重命名为**main.1.tm.down.rob.obb**的 zip 文件，但是当我运行我的应用程序时，它仍然向我抛出“下载失败，因为找不到资源” ...

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T11:48:01.550

当我尝试使用使用[https://github.com/mosabua/maven-android-sdk-deployer部署到我的 Maven 存储库的下载器库 apklib+jar 时遇到了同样的问题](https://github.com/mosabua/maven-android-sdk-deployer)

当我使用这个 Gradle 构建脚本将下载器库重新部署到我的 Maven 存储库时：

```
buildscript {
  repositories {
    mavenCentral()
  }

  dependencies {
    classpath 'com.android.tools.build:gradle:0.11.+'
  }
}

apply plugin: 'android-library'
apply plugin: 'maven'

repositories {
  maven {
    url "http://repository_url/nexus/content/repositories/release"
  }
  maven {
    url "http://repository_url/nexus/content/repositories/release/"
  }
  mavenCentral()
}

dependencies {
  compile 'com.google.android.licensing:play-licensing:2.+@aar'
}

android {
  compileSdkVersion 19
  buildToolsVersion '19.1'

  sourceSets {
    main {
      assets.srcDirs       = ['assets']
      res.srcDirs          = ['res']
      aidl.srcDirs         = ['src']
      resources.srcDirs    = ['src']
      renderscript.srcDirs = ['src']
      java.srcDirs         = ['src']
      manifest.srcFile 'AndroidManifest.xml'
    }
  }
}

uploadArchives {
  repositories {
    mavenDeployer {
      repository(url: "http://repository_url/nexus/content/repositories/release/") {
        authentication(userName: "user", password: "password")
      }

      pom.version = "3.0.0"
      pom.artifactId = "play-apk-expansion-downloader"
      pom.groupId = "com.google.android.apk.expansion"
    }
  }
} 
```

并将依赖项更改为 AAR 包：

```
dependencies {
  compile 'com.google.android.apk.expansion:play-apk-expansion-downloader:3.+@aar'
} 
```

它开始起作用了。

# spring - 在 Spring Security 中，如何在密码比较期间正确生成随机盐？

> ID：13805130
> 
> 赞同：2
> 
> 时间：2012-12-10T16:35:56.240
> 
> 标签：spring, security, salt, password-encryption

我正在使用 Spring 安全 3.1.1.RELEASE。我正在使用 StandardPasswordEncoder.encode(password) 函数来加密我的用户密码，这依赖于生成的随机盐。从 Spring 安全源，最终从“org.springframework.security.crypto.keygen.SecureRandomBytesKeyGenerator”调用这个方法来生成盐......</p>

```
public byte[] generateKey() {
    byte[] bytes = new byte[keyLength];
    random.nextBytes(bytes);
    return bytes;
} 
```

我的问题是，当从登录页面输入密码时，如何生成用于编码密码比较的相同盐？上面的内容似乎是随​​机的，所以我想在比较完成后会创建一个新的随机盐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:45:44.940

salt与哈希密码一起保存在数据库中，当用户再次登录时，从数据库中提取salt，与密码进行哈希，并与数据库中的密码哈希进行比较。如果它们匹配，则密码正确。

盐值只会使具有相同密码的人不会在数据库中脱颖而出，因为盐键会更改哈希值。这也使得暴力破解哈希变得更加困难，因为密钥也会使密码更长。如果通过蛮力找到散列密码，则仍必须从该散列中删除密钥才能知道真正的密码，从而更难从散列中对密码进行逆向工程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:32:42.320

否。如果您为加盐哈希密码配置了 Spring Security，那么在比较时，就会调用用户数据查找。一旦通过用户名找到用户记录，然后从密码字段中提取盐，并用于从页面计算密码的哈希值。然后比较哈希值。

# css - 调整浏览器窗口大小时，母版页上的内容占位符会迁移

> ID：13805131
> 
> 赞同：0
> 
> 时间：2012-12-10T16:35:58.710
> 
> 标签：css, visual-studio

我在母版页上设置了一个内容占位符，当我调整浏览器窗口的大小时，它不会留在原位。当我缩小浏览器窗口时，内容占位符会移动到它应该位于右侧的 div 下方。

这是将相关div的位置设置为绝对的问题吗？还是有什么我没有考虑到的？

提前致谢

```
<div class="header">
    <h2>Intranet</h2>
</div>
</div>
    <div>
        <div class="leftcontent">
            <ul>
                <li>
                    <a id="lnkbtnAddUpdate" href="javascript:__doPostBack(&#39;ctl00$lnkbtnAddUpdate&#39;,&#39;&#39;)">Add/Update Job Listing</a></li>
                <li>
                    <a id="lnkbtnReview" href="javascript:__doPostBack(&#39;ctl00$lnkbtnReview&#39;,&#39;&#39;)">Review Applicants</a></li>
                <li>
                    <a id="LinkButton3" href="javascript:__doPostBack(&#39;ctl00$LinkButton3&#39;,&#39;&#39;)">Interview Results</a></li>
                <li>
                    <a id="LinkButton4" href="javascript:__doPostBack(&#39;ctl00$LinkButton4&#39;,&#39;&#39;)">Applicant Search</a></li>
            </ul>
        </div>
        <div class="maincontent">

<div class="addupdate">

    <div class="lbljobtitle">
        <span id="ContentPlaceHolder1_lblJobTitle">Job Title</span>
    </div>

    <div class="txtjobtitle">
        <input name="ctl00$ContentPlaceHolder1$txtJobTitle" type="text" id="ContentPlaceHolder1_txtJobTitle" style="height:22px;width:250px;" />
    </div>

    <div class="lblemployeetype">
        <span id="ContentPlaceHolder1_lblEmployeeType">Employee Type</span>
    </div>

    <div class="txtemployeetype">
        <input name="ctl00$ContentPlaceHolder1$txtEmployeeType" type="text" id="ContentPlaceHolder1_txtEmployeeType" style="height:22px;width:250px;" />
    </div>

    <div class="lbllocation">
        <span id="ContentPlaceHolder1_lblLocation">Location</span>
    </div>

    <div class="txtlocation">
        <input name="ctl00$ContentPlaceHolder1$txtLocation" type="text" id="ContentPlaceHolder1_txtLocation" style="height:22px;width:250px;" />
    </div>

    <div class="lbljobdescription">
        <span id="ContentPlaceHolder1_lblJobDescription">Job Description</span>
    </div>

    <div class="txtjobdescription">
        <input name="ctl00$ContentPlaceHolder1$txtJobDescription" type="text" id="ContentPlaceHolder1_txtJobDescription" style="height:160px;width:250px;" />
    </div>

    <div class="lblrequirements">
        <span id="ContentPlaceHolder1_lblRequirements">Requirements</span>
    </div>

    <div class="txtrequirements">
        <input name="ctl00$ContentPlaceHolder1$txtRequirements" type="text" id="ContentPlaceHolder1_txtRequirements" style="height:160px;width:250px;" />
    </div>

    <div class="lblexperience">
        <span id="ContentPlaceHolder1_lblExperience">Experience</span>
    </div>

    <div class="txtexperience">
        <input name="ctl00$ContentPlaceHolder1$txtExperience" type="text" id="ContentPlaceHolder1_txtExperience" style="height:22px;width:250px;" />
    </div>
    <input type="submit" name="ctl00$ContentPlaceHolder1$btnSubmit" value="Post Job" id="ContentPlaceHolder1_btnSubmit" />
</div>

        </div>
    </div>

</form>
<div class="footer">
    <h5>Footer Goes Here</h5>
</div> 
```

```
* {
font-family: Tahoma;
}

.lbljobtitle, .lblemployeetype, .lbllocation, .lbljobdescription, .lblrequirements, .lblexperience {
    float: left;
    width: 200px;
    height: 20px;
}

.header {
    width: 100%;
    height: 86px;
    background-color: #053A54;
    color: #FFFFFF;
}

h2 {
    padding: 25px;
    float: left;
    margin-bottom: -20px;
}

h5 {
    text-align: right;
}

.leftcontent {
    width: 200px;
    height: 700px;
    float: left;
}

    .leftcontent ul {
        list-style: none;
    }

    .leftcontent li {
        padding: 5px;
    }

    .leftcontent a {
        display: block;
        padding: 0.5em;
        border: 1px solid #CCC;
        color: #053A54;
    }

.maincontent {
    width: 700px;

}

.footer {
    clear: both;
    color: #FFFFFF;
    background-color: #053A54;
    width: 100%;
}

.addupdate {
    float: left;
    position: absolute;

} 
```

# c# - 防止 ContextMenuStrip 触发子控件

> ID：13805135
> 
> 赞同：1
> 
> 时间：2012-12-10T16:36:18.137
> 
> 标签：c#, .net, winforms

我有一个带有上下文菜单的控件。该控件有一个子控件。我希望上下文菜单仅在用户单击其子控件*未*覆盖的控件区域时出现。

当然，我实际上可以使用屏幕坐标检查每个子控件。我的问题是：是否有任何简单或内置的方法可以仅在 Control 上立即右键单击显示上下文菜单？

# java - 对对象引用在 Java 中的工作方式感到困惑

> ID：13805141
> 
> 赞同：3
> 
> 时间：2012-12-10T16:36:43.233
> 
> 标签：java, object-reference

我对对象引用的工作方式感到困惑，想知道是否有人可以提供帮助。下面是一些示例代码，它应该根据一般情况的链表对队列进行排队：

```
Object head = listHead.datum;
listHead = listHead.next;
return head; 
```

我的理解是，当你有一个原始变量时，存储的实际值被分配给它，但如果变量是一个对象，那么对一个对象的引用就会存储在那里。所以在上面的代码中，对 listHead.datum 的引用存储在 head 中，但随后存储在 listHead 中的引用更改为 listHead.next。当需要返回名为 head 的对象时，我会认为它会跟随它分配的引用，即转到 listHead（现在指的是不同的地方），然后到基准。

上面的代码应该返回队列的头部，但按照我的逻辑，它将返回队列中的第二个。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:44:10.463

`head`引用不会随着更改而动态更新`listHead`。事实上，没有对象引用具有动态分辨率。必须通过直接分配显式更改引用。这是实现您认为正在发生的事情的唯一方法：

```
Object head = listHead.datum;
listHead = listHead.next;
// Only direct assignment can change the object that head points to
head = listHead.datum;
return head; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T16:49:32.660

我们有：

```
Object head = listHead.datum;
listHead = listHead.next;
return head; 
```

这里有许多参考资料：

*   `listHead`是参考
*   `head`是参考
*   `listHead.datum`是参考
*   `listHead.next`是参考

有两个实际的对象实例被引用：

*   任何`datum`引用（让我们称之为实例`D`）
*   任何`next`引用（让我们称之为实例`N`）

事情是这样发展的。

*   `listHead.datum`有参考`D`
*   `listHead.next`有参考`N`
*   `head`参考`D`
*   listHead 给出了一个引用`N` （注意`head`没有改变）
*   你返回`head`仍然引用`D`

# objective-c - 强制 NavigationBar 的标题动画

> ID：13805147
> 
> 赞同：2
> 
> 时间：2012-12-10T16:37:10.073
> 
> 标签：objective-c, ios5, uinavigationcontroller, ios6

我正在开发一个导航系统，它向下钻取三个步骤，然后让您使用实际上只是更改该视图的内容的箭头导航内容，因此从技术上讲，navigationcontroller 不会收到任何弹出/推送，因为我尽快就像我做的那样

```
self.navigationItem.title = [[[self.symbol valueForKey:@"section_title"] uppercaseString]  stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

标题应按原样更改，但由于明显的原因没有动画。

有没有办法强迫它像弹出/推动动作一样发生？就像是：

```
self.navigationItem.direction = NavigationDirectionLeft;
self.navigationItem.title = @"Whatevah!"; 
```

这样，一旦标题更改，它就会使旧标题在从左到右的过渡中淡出，并且标题淡入，或者更好的是新标题在从左到右的过渡中淡出从左侧进入

[仅供参考，我**不需要**支持 5.0 之前的 ios 版本，所以只有 5.0 > :)]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-18T12:23:28.190

好的，这不是一个完美的解决方案，但可能会给你一个起点：

导航栏标题之间​​的淡入淡出相当简单：

```
CATransition *fade = [CATransition animation];
fade.type = kCATransitionFade;
fade.duration = 2.0;
[self.navigationController.navigationBar.layer addAnimation: fade forKey: @"fadeText"];
self.navigationItem.title = "new Title"; 
```

您可以使用其他类型的“开箱即用”过渡来为标题的位置设置动画，例如：

```
CATransition *push = [CATransition animation];
push.duration = 2.0;
push.type = kCATransitionPush;
push.subtype = kCATransitionFromRight;
[self.navigationController.navigationBar.layer addAnimation: push forKey: @"pushText"];
self.navigationItem.title = "new Title"; 
```

这样做的问题是整个导航栏都会移动。为了解决这个问题，您需要在导航栏的子视图中找到标题标签的图层。此视图层次结构是“私有的”，因此您不应该将此代码提交到商店，但就像我说的……这可能会给您一个起点。

```
CATransition *fade = [CATransition animation];
fade.type = kCATransitionFade;
fade.duration = 2.0;

CATransition *move = [CATransition animation];
move.duration = 2.0;
move.type = kCATransitionMoveIn;
move.subtype = kCATransitionFromRight;

UILabel * navBarTitleLabel;
for (UIView * view in self.navigationController.navigationBar.subviews) {
    if ([NSStringFromClass(view.class) isEqualToString: @"UINavigationItemView"]) {
        navBarTitleLabel = view.subviews.firstObject;
        break;
    }
}

[navBarTitleLabel.layer addAnimation: fade forKey: @"fadeText"];
[navBarTitleLabel.layer addAnimation: move forKey: @"moveText"];

self.navigationItem.title = newTitle; 
```

`removeAllAnimations`一旦完成，您可能会发现需要从图层中删除。我没有机会完全测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:20:11.110

尝试将 a 设置`UIView`为`self.navigationItem.titleView`，然后创建 a`UILabel`并将其添加为标题。当你想要动画时，在这个标签上制作动画，`UIView`然后添加一个新的`UILabel`动画来替换它。您可以为此使用一些基于块的动画。

例如：-

```
[UIView animateWithDuration:0.5
    delay:1.0
    options: UIViewAnimationCurveEaseOut
    animations:^{
        label.frame = labelFrame;
    } 
    completion:^(BOOL finished){
        NSLog(@"Done!");
    }]; 
```

# objective-c - Objective-C – 排队和延迟 UIKit 消息

> ID：13805150
> 
> 赞同：1
> 
> 时间：2012-12-10T16:37:16.913
> 
> 标签：objective-c, cocoa-touch, grand-central-dispatch

我正在`UIKit`根据这个[SO answer延迟消息](https://stackoverflow.com/a/13662842/294661)

现在出现了另一个要求，而不仅仅是排队`SSHUDView`方法调用，我们还应该处理`UIAlertView`. 例如，一种情况可能是我们显示一个 hud，然后在 1 秒后我们显示另一个 hud，最后在 1 秒后我们显示一个`UIAlertView`.

现在的问题是，由于`SSHUDView`s 是在后台线程上异步运行的，所以当我要显示s 时`UIAlertView`，`SSHUDView`s 还没有完成显示，所以`UIAlertView`会覆盖 hud。

基本上我需要一种方法来排队和延迟方法，无论它们是类`SSHUDView`还是`UIAlertView`. 反馈队列，您可以在其中延迟单个消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:49:54.553

您所说的听起来非常适合[信号量](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW24)（请参阅标题下*使用调度信号量来规范有限资源的使用*）！我看到了你链接到的 SO Answer，我认为它不能解决`UIView`动画的问题。这是我使用信号量的方法。

在您的视图控制器中添加一个实例变量`dispatch_semaphore_t _animationSemaphore;`并在`- init`方法中对其进行初始化：

```
- (id)init
{
  if ((self = [super init])) {
    _animationSemaphore = dispatch_semaphore_create(1);
  }
  return self;
} 
```

（不要忘记在`- dealloc`using 方法中释放信号量`dispatch_release`。您可能还想通过 using 等待排队的动画完成`dispatch_semaphore_wait`，但我会让您自己弄清楚。）

当你想排队一个动画时，你会做这样的事情：

```
- (void)animateSomething
{
  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    dispatch_semaphore_wait(_animationSemaphore, DISPATCH_TIME_FOREVER);
    dispatch_async(dispatch_get_main_queue(), ^{
      [UIView animateWithDuration:0.5 animations:^{
        // Your fancy animation code
      } completion:^(BOOL finished) {
        dispatch_semaphore_signal(_animationSemaphore);
      }];
    });
  });
} 
```

您可以使用`- animateSomething`模板来完成不同的事情，例如显示一个`SSHUDView`或一个`UIAlertView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:32:36.387

你所描述的听起来像一个动画。为什么不直接使用 UIView 动画并链接一系列动画块：

```
[UIView animateWithDuration:2
     animations:^{
         // display first HUD
     }
     completion:^(BOOL finished){
         [UIView animateWithDuration:2
              animations:^{
                  // hide first HUD, display second HUD
              }
              completion:^(BOOL finished){
                  [UIView animateWithDuration:2
                       animations:^{
                           // hide second HUD, show UIAlert
                       }
                       completion:nil
                   ];
              }
          ];
     }
 ]; 
```

# c# - 通过 .Net 网页创建和通过电子邮件发送 PDF

> ID：13805152
> 
> 赞同：0
> 
> 时间：2012-12-10T16:37:22.037
> 
> 标签：c#, .net, pdf

我有一个项目，要求我创建一个网页，允许用户在网页中填写信息，创建信息的 pdf（可能是整个 HTML），然后通过电子邮件将 pdf 发送给某人。

我正在使用 c# 和 .Net。有谁知道这样做的方法或可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:42:56.760

简单的东西：您需要配置您的 SMTP 以发送电子邮件。然后使用 ASPOSE。这个程序正是这样做的：创建 PDF 并将它们连接在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:44:17.860

不幸的是，我已经为自己寻找了一种方法，并且在不使用 3rd 方库的情况下无法直接在 .Net 中找到方法。

现在我正在使用一个名为 iTextSharp 的库并取得了相当大的成功。[http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

我在经典 ASP 应用程序中使用的另一个（确实有一个 .Net 组件，但不是免费的），非常好是 Web Super Goo 的 ABCPdf [http://www.websupergoo.com/abcpdf-1.htm](http://www.websupergoo.com/abcpdf-1.htm)

祝你好运。

# visual-c++ - 有什么办法可以缩短这段代码？

> ID：13805160
> 
> 赞同：1
> 
> 时间：2012-12-10T16:37:52.750
> 
> 标签：visual-c++

这是我在 Visual C++ 上的问答游戏的代码

```
 if (this->answer->Text == "2"){
                 this->question->Text = "2+2?";
             }
             else if (this->answer->Text == "4"){
                 this->question->Text = "3+3?";
             }
             else if (this->answer->Text == "6"){
                 this->question->Text = "4+4?";
             }
             else if (this->answer->Text == "8"){
                 this->question->Text = "Finished!";
             }
             else {
                 MessageBox::Show("Wrong!!");
             } 
```

有什么可以缩短此代码吗？考虑使用数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:45:57.343

我不是 Windows 程序员，不知道你的类型 `this->question->Text`是什么，你没有告诉我们，但如果是`std::string`或可以转换为的东西`char *`，那么这应该可以工作：

```
std::string t = this->answer->Text;
this->question->Text = t == "2" ? "2+2?"
                     : t == "4" ? "3+3?"
                     : t == "6" ? "4+4?"
                     : t == "8" ? "Finished"
                     : "";
if (this->question->Text = "") MessageBox::Show("Wrong!!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:42:24.623

你在重复`if (this->answer->Text ==`和`this->question->Text =`。只写一次并将条件和答案保存在 std::map 中。

更新：

```
#include <map>
#include <string> 
```

...

```
std::map<std::string,std::string> answers;
answers["2"]="2+2"; // "configuration
answers["4"]="3+3?";
//and so on
std::string text=this->answer->Text;
    // instead of if ...
std::map<std::string,std::string>::const_iterator found=answers.find(text);
if (found!=answers.end())
    this->question->Text = answers[text]; //once. Even better found->second
else
    MessageBox::Show("Wrong!!"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:40:07.267

尝试使用`switch case`语句。

# android - 在布局中使用自定义属性时出现异常

> ID：13805164
> 
> 赞同：1
> 
> 时间：2012-12-10T16:38:06.983
> 
> 标签：android, android-theme

*我已经定义了一些我想在我的应用程序中使用的自定义属性，它们在通过 Eclipse 运行时工作正常，但有时*在构建和分发 APK 时会引发异常。下面是异常的堆栈跟踪：

```
W/dalvikvm( 2521): threadid=1: thread exiting with uncaught exception (group=0x40f44300)
E/AndroidRuntime( 2521): FATAL EXCEPTION: main
E/AndroidRuntime( 2521): android.view.InflateException: Binary XML file line #13: Error inflating class <unknown>
E/AndroidRuntime( 2521): at android.view.LayoutInflater.createView(LayoutInflater.java:613)
E/AndroidRuntime( 2521): at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
E/AndroidRuntime( 2521): at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
E/AndroidRuntime( 2521): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
E/AndroidRuntime( 2521): at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
E/AndroidRuntime( 2521): at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
E/AndroidRuntime( 2521): at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
E/AndroidRuntime( 2521): at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
E/AndroidRuntime( 2521): at com.myapp.android.ui.fragment.CustomDialogFragmentImpl.onCreateView(CustomDialogFragmentImpl.java:74)
E/AndroidRuntime( 2521): at com.myapp.android.ui.fragment.SupportCustomDialogFragment.onCreateView(SupportCustomDialogFragment.java:41)
E/AndroidRuntime( 2521): at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
E/AndroidRuntime( 2521): at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
E/AndroidRuntime( 2521): at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
E/AndroidRuntime( 2521): at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
E/AndroidRuntime( 2521): at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
E/AndroidRuntime( 2521): at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime( 2521): at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 2521): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 2521): at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime( 2521): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 2521): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 2521): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime( 2521): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime( 2521): at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 2521): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime( 2521): at java.lang.reflect.Constructor.constructNative(Native Method)
E/AndroidRuntime( 2521): at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
E/AndroidRuntime( 2521): at android.view.LayoutInflater.createView(LayoutInflater.java:587)
E/AndroidRuntime( 2521): ... 23 more
E/AndroidRuntime( 2521): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
E/AndroidRuntime( 2521): at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
E/AndroidRuntime( 2521): at android.view.View.<init>(View.java:3342)
E/AndroidRuntime( 2521): at android.view.ViewGroup.<init>(ViewGroup.java:427)
E/AndroidRuntime( 2521): at android.widget.FrameLayout.<init>(FrameLayout.java:101)
E/AndroidRuntime( 2521): at android.widget.FrameLayout.<init>(FrameLayout.java:97)
E/AndroidRuntime( 2521): ... 26 more 
```

这是第 13 行的视图：

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:minHeight="12dp"
    android:paddingLeft="?attr/listItemPaddingLeft"
    android:paddingRight="?attr/listItemPaddingRight" > 
```

这是我定义的属性：

```
<declare-styleable name="MyAppTheme">
    <attr name="listItemPaddingLeft" format="dimension" />
    <attr name="listItemPaddingRight" format="dimension" />
    <attr name="listItemHeight" format="dimension" />
    <attr name="listHeaderHeight" format="dimension" />
</declare-styleable> 
```

最后，这是我的主题：

```
<style name="MyAppTheme" parent="@style/Theme.Sherlock.Light">
    <item name="listItemPaddingLeft">22dp</item>
    <item name="listItemPaddingRight">22dp</item>
    <item name="listItemHeight">43dp</item>
    <item name="listHeaderHeight">73dp</item>
</style> 
```

有没有人看到我定义事物的方式有任何问题，或者可以解释为什么这在本地构建时会起作用，但在 APK 签名时不起作用？我的设备是 Galaxy Nexus，它在本地和已签名的 APK 上运行良好，但 Galaxy S3 不适用于已签名的 APK（无法在本地测试）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-14T19:51:11.787

您需要确保当前（使用）设置的主题是包含您的自定义属性的主题。您可以在清单文件中设置它，或者在扩展布局之前明确设置它：

```
setTheme(R.style.MyAppTheme)
setContentView(R.layout.MyActivity); 
```

# javascript - 如何使用java脚本对对象数组进行排序以映射到对象数组中的字段

> ID：13805169
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:38:17.927
> 
> 标签：javascript

我有一个像这样的对象数组

```
[
      {bookName:"javascript",authorName:"john"},
      {bookName:"java",authorName:"peter"},
      {bookName:"j2ee",authorName:"john"},
      {bookName:".net",authorName:"peter"},
      {bookName:"oracle",authorName:"peter"}]; 
```

我尝试了逻辑，但我没有正确。我想这样整理..

```
{
peter:{
    [{bookName:"java",authorName:"peter"},

    {bookName:".net",authorName:"peter"},

    {bookName:"oracle",authorName:"peter"} ]

     } ,
john :{
    [{bookName:"j2ee",authorName:"john"},

    {bookName:"javascript",authorName:"john"}]

    }

}. 
```

我该怎么做..提前谢谢..

```
var obj={};
var objArr = given objectarray;
for(var i=0;i<objArr.length.i++ ){
  objArr[objArr[i].authorName]=objArr[i];    
} 
```

和

```
var obj={};
var objArr = given objectarray;
for(var i=0;i<objArr.length.i++ ){
  var arr=[];
  objArr[objArr[i].authorName]=arr.push(objArr[i]);    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:44:10.713

你可以这样做：

```
var b = ... your object ...
var m = {};
b.map(function(v){(m[v.authorName]=m[v.authorName]||[]).push(v)}); 
```

[演示（打开控制台）](http://jsfiddle.net/EFLJV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:47:03.490

[http://jsfiddle.net/azqRu/](http://jsfiddle.net/azqRu/)

```
var array = [
          {bookName:"javascript",authorName:"john"},
          {bookName:"java",authorName:"peter"},
          {bookName:"j2ee",authorName:"john"},
          {bookName:".net",authorName:"peter"},
          {bookName:"oracle",authorName:"peter"}
    ];

    var items = {};
    for(var i = 0, ii = array.length; i < ii; i++) {
        var cell = array[i];
        items[cell.authorName] = items[cell.authorName] || [];
        items[cell.authorName].push(cell);
    }    

    alert(items["peter"]); 
```

# c# - 你能捕捉到 RaceOnRCWCleanup 异常吗

> ID：13805171
> 
> 赞同：2
> 
> 时间：2012-12-10T16:38:35.597
> 
> 标签：c#, visual-studio-2010, exception

我的同事在下面写了这段代码“closeConnection()”，它抛出了一个类型的异常：

> **检测到 RaceOnRCWCleanup**
> 
> > 已尝试释放正在使用的 RCW。RCW 正在活动线程或其他线程上使用。尝试释放正在使用的 RCW 可能会导致损坏或数据丢失。

```
private static void closeConnection()
    {
        if(connection != null)
        {
            try
            {
                connection.Close(); // <-- this is the problem
            }
            catch(Exception)
            {
            }

            connection = null;
        }
    } 
```

由于此代码包含在 try { } catch { } 块中，因此我得出结论，您无法捕获此类异常。是这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T18:03:59.170

这不是一个例外，它是一个调试器警告。它是“托管调试助手”之一，旨在捕获可能导致以后很难诊断问题的常见错误。所以不，你不能用 try/catch 来捕捉它。您可以使用 Debug + Exceptions、Managed Debugging Assistants、Thrown 复选框将其关闭以用于“RaceOnRCWCleanup”。

这*可能*是一场虚惊，但你应该对此有点担心。一般诊断是 connection.Close() 调用导致 COM 对象被释放。但它返回到由同一个 COM 对象启动的代码，通常是由于一个事件。这意味着它可能会返回到 COM 服务器内的代码，该代码是现已销毁的 COM 对象的一部分。如果这是服务器无法处理的事情，通常会发出一声巨响，通常是完全无法诊断的 AccessViolation。如果它没有爆炸并且你彻底测试了它，那么继续关闭警告。或者找到一种稍后调用 Close() 的方法，查看[此答案](https://stackoverflow.com/questions/1874496/why-a-raceonrcwcleanup-error-when-closing-a-form-with-webbrowser-control-on-it/1878279#1878279)以获取示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:48:29.950

您可能有竞争条件，多个线程可以同时进入您的方法。您需要锁定，以便 2 个线程不会同时输入相同的代码，例如

```
public static classs SomeClass
{

private static object locker;

private static void closeConnection()
    {
        if(connection != null)
        {
            lock(locker)
            {
                if(connection != null) //might have been set to null by another thread so need to check again
                {
                    try
                    {
                        connection.Close(); // <-- this should work now
                    }
                    catch(Exception)
                    { //Don't swallow an exception here
                    }

                    connection = null;
                }
            }
       }
} 
```

RaceOnRCWCleanup 不是异常，因此您无法捕获它，它是在 CLR 之外发生的事情，触发了调试器附件请求。

# java - 不同类别的油漆

> ID：13805172
> 
> 赞同：1
> 
> 时间：2012-12-10T16:38:38.343
> 
> 标签：java, swing, graphics, paintcomponent

我正在尝试用 Java（学校项目）制作游戏，并且我有以下设置：

一个用 JFrame 扩展的主类，一个用 JPanel 扩展的“游戏”类。

现在从这个主类中，我调用一个类'Player'和一个类'Map'。'Map'类存在两个子类'Blocks'和'Bombs'。

但我想知道.. 我如何让所有这些类的绘制方法绘制到同一个 JPanel（类 Game）？

我给每个班级“public void paint(Graphics g)”方法并进行绘画。但是当我运行程序时，只显示“游戏”类的绘画，而不是子类的绘画。

我该如何实施？

例如，我将代码简化为：

主类：

```
 BomberGame game = new BomberGame();
        add(game);
        setSize(400, 400);
        setTitle("Bomber");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.show();

    }

    public static void main(String[] args) {
        BomberB1 main = new BomberB1();
    }
} 
```

游戏类：

```
 package bomberb1;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

import java.util.ArrayList;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
public class BomberGame extends JPanel {
    public BomberGame() {;
        BomberMap map = new BomberMap(this);
    }

    public void paint(Graphics g) {
        g.drawRect(10, 10, 10, 10);
        g.setColor(Color.red);
        g.fillRect(10, 10, 10, 10);
    }
} 
```

地图类：

```
 package bomberb1;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.*;
import javax.swing.SwingUtilities;
public class BomberMap{
    BomberGame game;
    public BomberMap(BomberGame game) {
        this.game = game;
    }
    public void paint(Graphics g) {
        g.drawRect(30, 30, 20, 20);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T16:47:07.920

在要绘制的实体类（可能是地图播放器等）中有一个`draw`接受`Graphics`对象的方法，从而允许它访问`Graphics`对象`JPanel`并绘制到它，例如：

```
class GamePanel extends JPanel {

    Entity e=new Entity;

    @Override
    protected paintComponent(Graphics g) {
        super.paintComponent(g);

        e.draw(g);//call draw method for entity and pass graphics object
    }

}

class Entity {

   //will draw whats necessary to Graphics object
    public void draw(Graphics g) {
        //draw to the graphics object here
    }
} 
```

其他建议：

*   不要`JFrame`不必要地扩展课程
*   覆盖`JPanel` `paintComponent()`而不是`paint()`（+1 到垃圾神评论）
*   Swing 组件应该通过块在[Event Dispatch Thread上创建和操作。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)`SwingUtilities.invokeLater(..)`

**更新：**

正如@GuillaumePolet 所说，一个更好的游戏设计将实现`JPanel`s 作为大多数游戏实体的父类，请参阅[这个](https://stackoverflow.com/questions/13791614/lag-spike-when-moving-player/13792012#13792012)类似的答案以获得更多信息。

# jquery - 如何在相对元素上设置绝对位置？

> ID：13805175
> 
> 赞同：1
> 
> 时间：2012-12-10T16:38:43.867
> 
> 标签：jquery, html, css, offset

经过一些简化后，问题是当用户单击第一个图像时，我不知道如何将图像设置在另一个图像上。[在这个 fiddle](http://jsfiddle.net/navi2000/T7czp/199/)中更容易看到这一点。

有什么问题？我相信问题出在“相对”的*div#problem*元素上。如果您从 CSS中删除“*位置：相对”，一切正常，但我需要这里的相对。*

另外，我注意到如果我将“pin 容器”更改为替代容器（直接从*HTML标记挂起）一切正常，但我需要**相对 DIV*中的“pin 容器” 。

真正的问题是什么？我想这`.offset()`会给我*相对于文档*中所述的[文档](http://api.jquery.com/offset/)的位置，并且`.offset(coordinates)`会做同样的事情。

**注意**：想法是黑盒子应该出现在与大图像相同的坐标中，但它似乎放错了位置。

**NOTE2**：我不知道这是否是问题所在，但我正在使用 Chrome 和 Firefox 开发 Ubuntu Linux。两种浏览器都显示错位的黑匣子。

**NOTE3**：目标是获取大图像的坐标并使用`absolute`定位在同一位置设置一个小框。`margin`没有像将大图像设置为黑匣子一样的技巧，对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:34:33.777

`.offset()`查找元素相对于文档的位置。你似乎想用它`.position()`来查找`relative`容器内的位置。

见[http://jsfiddle.net/T7czp/200/](http://jsfiddle.net/T7czp/200/)

您还需要应用原始图像的边距，并应用新尺寸`.css()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:34:44.353

`.offset()`返回元素相对于*整个文档*的位置。您想要的是获得相对于*偏移父级*的位置（`#inner`在这种情况下）。这`.position()`就是为了。

```
$("img").click(function () {
    var offset = $(this).position(); // not offset!
    var $pin = $('<img>')
            .addClass('pin')
            .attr('src', "http://208.86.154.173/shared/images/black_box.png")
            .css({top: offset.top, left: offset.left}); //.offset() works, but shouldn't
    $("#pins").append($pin);
});​ 
```

为图钉添加 5px 的边距（与原始图像上的边距相同），图钉正好出现在图像的左上角。

# ios5 - alertViewShouldEnableFirstOtherButton iOS5 中的无限循环

> ID：13805176
> 
> 赞同：0
> 
> 时间：2012-12-10T16:38:47.173
> 
> 标签：ios5, ios6, uialertview

我正在尝试在方法 alertViewShouldEnableFirstOtherButton 中将用户输入的第一个字母更改为大写。在 iOS 6 中一切都按预期工作，但在 iOS 5 中，我似乎得到了无限循环（当我以编程方式设置警报视图的文本字段时，它递归地调用方法 alertViewShouldEnableFirstOtherButton ）这是代码：

```
- (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView{
    NSString *inputText = [[alertView textFieldAtIndex:0] text];
    if(inputText.length==0)return NO;

    unichar firstChar=[[inputText capitalizedString] characterAtIndex:0];
    NSString *capitalizedLetter= [NSString stringWithCharacters:&firstChar length:1];
    NSString *str=[inputText stringByReplacingCharactersInRange:NSMakeRange(0, 1) withString:capitalizedLetter];

   [[alertView textFieldAtIndex:0] setText:str];// setText calls again alertViewShouldEnableFirstOtherButton
    return YES;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:09:35.127

`- (BOOL)alertViewShouldEnableFirstOtherButton:`是让 alertView 询问其代表是否应该启用第一个（非取消）按钮。alertView 可以随时调用此方法（例如，它可能会在其文本字段更改时调用它），以从委托中获得 YES/NO 答案。因此，您不应在此处实现副作用。

我建议使用类似`[alertView textFieldAtIndex:0].delegate = self`的方法并使用其中一种 textField 委托方法（例如`– textFieldDidBeginEditing:`）来修改字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:01:27.943

实际上我使用的`shouldChangeCharactersInRange`方法`UITextField`将插入字符串的第一个字母大写。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    NSLog(@"range: %@ string: %@", NSStringFromRange(range), string);
    if ([string isEqualToString:@""]) {// detect when the user removes symbol
        if ([textField.text length] > 0)textField.text = [textField.text substringToIndex:[textField.text length] - 1];//remove last character from the textfield 
    }
    if (range.location==0) {//capitalize first letter
        NSString *upperString = [[textField.text stringByAppendingString:string] uppercaseString];
        textField.text = upperString;
    }else {
        textField.text=[textField.text stringByAppendingString:string];
    }
    return NO;
} 
```

# asp.net-mvc - Keno UI TreeView 和 JSON 对象

> ID：13805179
> 
> 赞同：1
> 
> 时间：2012-12-10T16:38:54.573
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试将我的示例 XML 文件转换为 JSON 对象并将其设置为我的树视图控件的数据源。它不工作。我确定我在这里遗漏了一些东西，但不确定那是什么。请帮我。

这是我在 Controller 类中的代码，我在其中加载 XML 文件并以 JSON 格式返回

```
 public JsonResult Employees()
        {

            XElement xdoc = XElement.Load("C:\\Users\\a409114\\Desktop\\TreeView.xml");
            return Json(xdoc, JsonRequestBehavior.AllowGet);
        } 
```

这是视图文件中的代码，我在控制器类“TreeViewController”中调用动作名称“Employees”。

```
<div class="demo-section">
@(Html.Kendo().TreeView()
    .Name("treeview")
     .DataTextField("vehicles")
    .DataSource(dataSource => dataSource
        .Read(read => read
            .Action("Employees", "TreeView")
        )
    )
)
</div>

<style scoped>
.demo-section {
    width: 200px;
}
</style> 
```

这是我的同一个 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<tree>
<vehicles>
    <car>FM-1100</car>
    <car>FM-4200</car>
    <bike>FM-3100</bike>
</vehicles>
<personnel>
    <client>GH-3000</client>
    <vip>GH-3100</vip>
</personnel>
</tree> 
```

这对我不起作用。请帮忙！

# php - MySQL 和 UNIX_TIMESTAMP 插入错误

> ID：13805183
> 
> 赞同：0
> 
> 时间：2012-12-10T16:39:02.950
> 
> 标签：php, mysql

我目前正在从事的一个项目存在问题，该项目是用 PHP 和 MySQL 构建的。该项目本身类似于在线招标系统。用户对一个项目进行投标，如果他们再次点击并点击他们的投标，他们就有机会获胜。

问题是这样的：例如，如果 5 个用户同时进入游戏，我会在数据库中得到 8-10 秒的延迟 - 我使用 UNIX_TIMESTAMP(CURRENT_TIMESTAMP) 更新数据库，这使得整个系统的出价无用。

我还想提一下，该项目是数据库密集型的（每页大约 30-40 个查询），我在想查询可能会延迟，但我不确定这是否正在发生。如果是这样的话，有什么建议可以避免这种类型的问题吗？

希望我至少对这个问题很清楚。这是我第一次发生这种情况，我将感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:52:29.927

你可以决定

1.  优化或最小化所需的查询。
2.  您可以缓存查询而不需要在每次访问时更新。
3.  您可以使用 Summery 表
4.  仅在更改时更新查询。

你必须巧妙地做到这一点。你可以关注这个 MySQLPerformanceBlog

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:05:49.600

我不清楚你在做什么，但让我详细说明你所说的。如果你在你的 MySQL 查询中使用 UNIX_TIMESTAMP(CURRENT_TIMESTAMP()) 你有一个严重的问题。

您的方法的问题是您正在使用 MySQL 函数来提供将存储在数据库中的时间戳记录。这是一个问题，因为您必须等待 MySQL 在生成时间戳之前解析并执行您的查询（并且某些 MySQL 引擎，如 MyISAM 使用表级锁定）。由于行级锁定粒度，其他引擎（如 InnoDB）的写入速度较慢。这意味着存储在行中的时间不一定反映生成插入所述行的请求的时间。此外，这也可能意味着您从数据库读取的时间不一定是最新记录（*假设您在将记录插入表后更新记录*）。

您需要的是生成 SQL 查询的 PHP 请求直接在 SQL 查询中提供 TIMESTAMP。这意味着时间戳反映了 PHP 接收请求的时间，而不一定是该行被插入/更新到数据库中的时间。

您还必须清楚您的表正在使用哪个 MySQL 引擎。例如，像 InnoDB 这样的引擎使用[MVCC](http://dev.mysql.com/doc/refman/5.0/en/innodb-multi-versioning.html)（*多版本并发控制*）。这意味着在读取一行时，可以同时对其进行写入。如果发生这种情况，数据库引擎将使用称为页表的东西来存储现有值，客户端将在更新新值时读取该值。这样，您就可以保证行级锁定，读取速度更快、更稳定，但写入速度可能更慢。

# c# - 不允许用户选择现有日期

> ID：13805184
> 
> 赞同：0
> 
> 时间：2012-12-10T16:39:03.297
> 
> 标签：c#, asp.net-mvc, html-helper

因此，用户从两个日历中选择假期（开始和结束日期），然后从开始到结束的日期存储在数据库中每个日期的单独记录中。

（感谢上一个问题的帮助，这一切都很好）

现在，我想要某种错误消息，如果用户选择的日期已经存在于数据库中，则不允许单击按钮。

我不确定这是从视图还是控制器完成？

看法：

```
<form action ="ListHolidays" id="listHolidays" method="post">
@using (Html.BeginForm()) {
      @Html.ValidationSummary(true)
    <fieldset>
        <legend>Holiday</legend>

        <div>
            @Html.LabelFor(model => model.PersonId, "Person")
        </div>

        <div>     
            @Html.DropDownListFor(model => model.PersonId,
                                new SelectList(ViewBag.Id, "Value", "Text"),
                                "---Select---"
                                )   
         @Html.ValidationMessageFor(model => model.PersonId)            
        </div>

        <div>
            @Html.LabelFor(model => model.HolidayDate)
        </div>

        <div>

            @Html.TextBoxFor(model => model.HolidayDate)

            @Html.TextBoxFor(model => model.endDate)
    <script>

//        Date.format = 'dd/m/yyy';
        $("#HolidayDate").addClass('date-pick');
        $("#endDate").addClass('date-pick');
            //$('.date-pick').datePicker//({dateFormat: 'dd-mm-yy'}).val();

//        clickInput: true

        $(function () {
        //3 methods below dont allow user to select weekends
            $('.date-pick').datePicker(
               {
                   createButton: false,
                   renderCallback: function ($td, thisDate, month, year) 
                   {
                       if (thisDate.isWeekend()) 
                       {
                           $td.addClass('weekend');
                           $td.addClass('disabled');
                       }
                   }
               }
        )

        .bind('click',
            function () 
            {
                $(this).dpDisplay();
                this.blur();
                return false;
            }
        )

        .bind('dateSelected',
            function (e, selectedDate, $td) 
            {
                console.log('You selected ' + selectedDate);
            }
        );

//        HolidayDate is start date
            $('#HolidayDate').bind('dpClosed',
                    function (e, selectedDates) 
                    {
                        var d = selectedDates[0];
                        if (d) 
                        {
                            d = new Date(d);
                            $('#endDate').dpSetStartDate(d.addDays(1).asString());
                        }
                    }
            );

            //end date is end date
            $('#endDate').bind('dpClosed',
                    function (e, selectedDates) 
                    {
                        var d = selectedDates[0];
                        if (d) 
                        {
                            d = new Date(d);
                            $('#HolidayDate').dpSetEndDate(d.addDays(-1).asString());
                        }
                    }
                );
        });

    </script>

     @Html.ValidationMessageFor(model => model.HolidayDate)
        </div>

        <p>
            <input type="submit" value="Create"/>
        </p> 
```

控制器：

```
 [HttpPost]
    public ActionResult listHolidays(Holiday holiday, int? PersonId, string HolidayDate, string endDate)
    {

            DateTime startDates = Convert.ToDateTime(HolidayDate),
                     endDates = Convert.ToDateTime(endDate);

            while (startDates <= endDates)
            {
                if (startDates.DayOfWeek != DayOfWeek.Saturday && startDates.DayOfWeek != DayOfWeek.Sunday)
                {
                    Holiday holiday1 = new Holiday();
                    holiday1.PersonId = PersonId.Value;
                    holiday1.HolidayDate = startDates;

                    db.Holidays.AddObject(holiday1);
                    db.SaveChanges();

                    //say start date is 10\. AddDays(1) will make it 11 then return it to startDates in 'startDates' = startdates,
                    //but doesnt chage the value of startdates = 'startdates'
                }

                startDates = startDates.AddDays(1);
            }

            return RedirectToAction("Index");
        } 
```

如果holidayDate = db.exisitng 日期？

不确定如何去做。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:18:39.657

根据您需要做的事情，您有几个选项可供您选择：

1.  将现有日期预加载到某种类型的 JS 数组/集合中，然后在值更改时对该数组进行验证。
2.  将 ajax 查询附加到日期选择器的更改事件。当用户更改日期时，进行查询并验证该日期。

    ```
     $('.date-pick').bind('dateSelected',function (e, selectedDate, $td){
        $.ajax({
           url:'somepath/action',
           data: {selectedDateVal: selectedDate},
           success:function(result){
                if(result == true){
                  //value exists
                 }else{
                   //value is good
                 }
           }
        });}); ​ 
    ```

3.  查看自定义数据注释。希望我能提供更多关于这方面的意见，但不幸的是我在这方面没有很多经验。

# c# - 实现重复功能的方法？

> ID：13805185
> 
> 赞同：0
> 
> 时间：2012-12-10T16:39:05.527
> 
> 标签：c#

我想实现一个重复的功能来做一些激活的事情，比如每周一。

在服务器中连续运行的窗口窗体应用程序中以编程方式执行此操作的方法是什么？

我对延误很熟悉，但我还没有实施过一周或一个月的延误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:53:31.113

在我看来，最好的办法是在控制台应用程序中编写此功能，并使用计划任务（或 SQL 计划程序，或您最喜欢的计划工具）在服务器上创建一个任务，以在您需要的任何时间间隔执行它。

我不希望看到应用程序在特定时间执行的代码中有“隐藏”任务。太多机会在​​没有通知的情况下失败。

使用计划工具，您可以查看/更改计划，而无需接触源代码。

作为旁注，Windows 窗体应用程序应该在*客户端*上运行，而不是在*服务器*上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:41:41.680

如果您的应用程序已经在运行，我会做一个定期任务来检查您是否要执行每周任务

这是演示逻辑的伪代码。

```
if(today is Monday && i didn't do this task yet today)
{
    //do monday stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:54:41.457

理想情况下，您应该在 Windows 计划任务下执行此操作。然后它将处理重复发生和时间安排。

如果您需要通过 winforms 应用程序执行此操作，则有两个选项 - 定期时间轮询或阻塞等待/睡眠。

通过定期时间轮询，您可以设置应用程序必须运行的时间间隔。然后循环检查这段时间是否已经过去，并采取行动。您可以在回路中设置所需的准确度。

使用阻塞等待，您可以让正在运行的线程休眠，直到执行时间。这种方法的唯一问题是如果服务器重新启动，应用程序**应该**重新获得它的状态并恢复任何睡眠操作。这种方法的准确性应该在几秒钟内（取决于您的服务器的时间漂移​​）。

# batch-file - 如何在 /F 的循环内设置变量

> ID：13805187
> 
> 赞同：68
> 
> 时间：2012-12-10T16:39:26.423
> 
> 标签：batch-file, cmd

我做了这个代码

```
dir /B /S %RepToRead% > %FileName%

for /F "tokens=*" %%a in ('type %FileName%') do (
    set z=%%a
    echo %z%
    echo %%a
) 
```

`echo %%a`工作正常，但`echo %z%`返回“回声禁用”。

我需要设置一个 %z% 因为我想像这样拆分变量`%z:~7%`

有任何想法吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-12-10T21:47:52.097

在 for 循环和括号范围内设置和使用变量有两种方法。

1.  `setlocal enabledelayedexpansion`见`setlocal /?`寻求帮助。这仅适用于 XP/2000 或更新版本的 Windows。然后在循环内使用`!variable!`而不是...`%variable%`

2.  使用批处理 goto labels 创建批处理函数`:Label`。

    例子：

    ```
    for /F "tokens=*" %%a in ('type %FileName%') do call :Foo %%a
    goto End

    :Foo
    set z=%1
    echo %z%
    echo %1
    goto :eof

    :End 
    ```

    批处理函数是非常有用的机制。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-12-10T16:54:30.197

你可能想要`SETLOCAL ENABLEDELAYEDEXPANSION`. 有关详细信息，请参阅[https://devblogs.microsoft.com/oldnewthing/20060823-00/?p=29993](https://devblogs.microsoft.com/oldnewthing/20060823-00/?p=29993)。

基本上：正常`%variables%`在`cmd.exe`读取命令后立即展开。在您的情况下，“命令”是全部

```
for /F "tokens=*" %%a in ('type %FileName%') do (
    set z=%%a
    echo %z%
    echo %%a
) 
```

环形。那时`z`还没有价值，所以`echo %z%`变成`echo`. 然后循环被执行并被`z`设置，但它的值不再被使用。

`SETLOCAL ENABLEDELAYEDEXPANSION`启用附加语法，`!variable!`. 这也扩展了变量，但它仅在执行每个（子）命令之前才这样做。

```
SETLOCAL ENABLEDELAYEDEXPANSION
for /F "tokens=*" %%a in ('type %FileName%') do (
    set z=%%a
    echo !z!
    echo %%a
) 
```

`z`这为您提供了每次运行的当前值`echo`。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-11-23T20:35:14.563

我为此奋斗了好几个小时。这是我注册命令行变量的循环。示例：Register.bat /param1:value1 /param2:value2

它的作用是循环所有命令行参数，并将具有正确名称的变量设置为值。

之后，您可以使用 set value=!param1! 设置 value2=!param2!

无论给出参数的顺序。（所谓的命名参数）。注意 !<>!，而不是 %<>%。

```
SETLOCAL ENABLEDELAYEDEXPANSION

FOR %%P IN (%*) DO (
    call :processParam %%P
)

goto:End

:processParam [%1 - param]

    @echo "processparam : %1"
    FOR /F "tokens=1,2 delims=:" %%G IN ("%1") DO (
        @echo a,b %%G %%H
        set nameWithSlash=%%G
        set name=!nameWithSlash:~1!
        @echo n=!name!
        set value=%%H
        set !name!=!value!
    )
    goto :eof

:End 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-30T16:32:00.860

**使用 %var%、!var! 和 %% 的批处理代码的简单示例。**

在这个示例代码中，这里的重点是我们要使用内置变量 TIME 来捕获开始时间（使用时间，因为它总是自动更改）：

**代码：**

```
@echo off
setlocal enabledelayedexpansion
SET "SERVICES_LIST=MMS ARSM MMS2"
SET START=%TIME%
SET "LAST_SERVICE="

for %%A in (%SERVICES_LIST%) do (
    SET START=!TIME!
    CALL :SOME_FUNCTION %%A
    SET "LAST_SERVICE=%%A"
    ping -n 5 127.0.0.1 > NUL
    SET OTHER=!START!
    if !OTHER! EQU !START! (
    echo !OTHER! is equal to !START! as expected
    ) ELSE (
    echo NOTHING
    )
)
ECHO Last service run was %LAST_SERVICE%

:: Function declared like this
:SOME_FUNCTION
echo Running: %1
EXIT /B 0 
```

**代码评论：**

*   使用 enabledelayedexpansion
*   前三行 SET 是 SET 命令的典型用法，大部分时间都使用它。
*   下一行是一个 for 循环，必须使用 %%A 进行迭代，然后 %%B 如果里面有循环等等。你不能使用长变量名。
*   要访问已更改的变量，例如时间变量，您必须使用 !! 或设置 !! （已启用延迟扩展）。
*   在 for 循环中循环时，每次迭代都作为 %%A 变量访问。
*   for 循环中的代码指出了设置变量的各种方法。查看“SET OTHER=!START!”，如果您要更改为 SET OTHER=%START%，您会明白为什么！是需要的。（提示：你不会看到任何东西）输出。
*   简而言之 ！！更可能在循环内部需要，通常 %var% ， %% 总是一个 for 循环。

**进一步阅读**

使用以下链接更详细地确定原因：

*   [%variable% 和 !variable! 之间的区别！在批处理文件中](https://stackoverflow.com/questions/14354502/difference-between-variable-and-variable-in-batch-file)
*   [批处理文件中的变量用法](https://stackoverflow.com/questions/16859818/variable-usage-in-batch-file)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-25T18:34:50.547

为了扩展答案，我来到这里以获得更好的理解，所以我写了这个可以解释它并帮助我。

它`setlocal DisableDelayedExpansion`在里面有，所以你可以在`setlocal EnableDelayedExpansion`它和它之间根据需要在本地设置它。

```
@echo off
title %~nx0
for /f "tokens=*" %%A in ("Some Thing") do (
  setlocal EnableDelayedExpansion
  set z=%%A
  echo !z!        Echoing the assigned variable in setlocal scope.
  echo %%A        Echoing the variable in local scope.
  setlocal DisableDelayedExpansion
  echo !z!        &rem !z!           Neither of these now work, which makes sense.
  echo %z%        &rem ECHO is off.  Neither of these now work, which makes sense.
  echo %%A        Echoing the variable in its local scope, will always work.
  ) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-11T07:06:34.677

```
set list = a1-2019 a3-2018 a4-2017
setlocal enabledelayedexpansion
set backup=
set bb1=

for /d %%d in (%list%) do (
   set td=%%d
   set x=!td!
   set y=!td!
   set y=!y:~-4!
   if !y! gtr !bb1! (
     set bb1=!y!
     set backup=!x!
   )
)

rem: backup will be 2019
echo %backup% 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-27T09:37:16.190

如果您访问范围之外的变量，则可以使用宏

```
@echo off
::Define macro
set "sset=set"

for /l %%a in (1,1,4) do (
    ::set in loop
    %sset% /a "x[%%a]=%%a*%%a"

    if %%a equ 4 (
        :: set in condition
        %sset% "x[%%a]=x Condition"
        %sset% "y=y Condition"
    )
)

echo x1=%x[1]%  x2=%x[2]%  x3=%x[3]%  x4=%x[4]%  y=%y%

:: Bonus. enableDelayedExpansion used to access massive from the loop
setlocal enableDelayedExpansion

echo Echo from the loop
for /l %%a in (1,1,4) do (
    ::echo in one line - echo|set /p =
    echo|set /p "=x%%a=!x[%%a]!  "
    if %%a equ 4 echo y=%y%
)
pause 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-02-03T11:51:04.450

尝试这个：

```
setlocal EnableDelayedExpansion

...

for /F "tokens=*" %%a in ('type %FileName%') do (
    set z=%%a
    echo !z!
    echo %%a
) 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2018-07-06T09:25:47.563

我知道这不是所要求的，但是当我尝试在“循环”中设置变量时，我从这种方法中受益。使用数组。替代实施选项。

```
SETLOCAL ENABLEDELAYEDEXPANSION

...

set Services[0]=SERVICE1
set Services[1]=SERVICE2
set Services[2]=SERVICE3

set "i=0"

:ServicesLoop
if defined Services[%i%] (
    set SERVICE=!Services[%i%]!

    echo CurrentService: !SERVICE!

    set /a "i+=1"
    GOTO :ServicesLoop
) 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2015-06-08T11:40:26.063

以下应该有效：

```
setlocal EnableDelayedExpansion
for /F "tokens=*" %%a in ('type %FileName%') do (
    set "z=%%a"
    echo %z%
    echo %%a
) 
```

# android - 切换按钮 - 禁用滑动功能

> ID：13805188
> 
> 赞同：28
> 
> 时间：2012-12-10T16:39:30.080
> 
> 标签：android

我有一个`switch`按钮（实际上是一个自定义按钮），出于某种原因我想禁用滑动功能；我希望用户只能单击它。有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-06-19T19:04:26.427

您可以 setClickable(false) 到您的 Switch，然后在 Switch 的父级中侦听 onClick() 事件并以编程方式切换它。该开关仍将显示为已启用，但不会发生滑动动画。

...

[在 onCreate() 中]

```
Switch switchInternet = (Switch) findViewById(R.id.switch_internet);
switchInternet.setClickable(false); 
```

...

[点击监听]

```
public void ParentLayoutClicked(View v){
    Switch switchInternet = (Switch) findViewById(R.id.switch_internet);

    if (switchInternet.isChecked()) {
        switchInternet.setChecked(false);           
    } else {
        switchInternet.setChecked(true);    
    }       
} 
```

...

[布局.xml]

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:onClick="ParentLayoutClicked"
        android:focusable="false"
        android:orientation="horizontal" >

        <Switch
            android:layout_marginTop="5dip"
            android:layout_marginBottom="5dip"
            android:id="@+id/switch_internet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textOff="NOT CONNECTED"
            android:textOn="CONNECTED"
            android:focusable="false"
            android:layout_alignParentRight="true"                                                
            android:text="@string/s_internet_status" />

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-01-14T23:12:41.590

更好的方法是阻止 Switch 类接收`MotionEvent.ACTION_MOVE`事件。

这可以通过以下方式完成：

```
switchButton.setOnTouchListener(new View.OnTouchListener() {
  @Override
  public boolean onTouch(View v, MotionEvent event) {
    return event.getActionMasked() == MotionEvent.ACTION_MOVE;
  }
}); 
```

然后，您可以根据需要在开关上自由设置点击侦听器。

查看[Switch 的实现](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/widget/Switch.java#404)以了解拖动的工作原理。它太酷了！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-10T11:45:19.120

要禁用 Switch，请使用以下方法

```
switchBtn.setEnabled(false); 
```

使开关不可点击使用

```
switchBtn.setClickable(false); 
```

其中 switchBtn 是 Switch 对象

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-12T11:23:44.157

我的解决方案是：

```
switchView.setOnTouchListener(new View.OnTouchListener() { 
@Override           
public boolean onTouch(View view, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_UP) {
                            //Your code
                }
                return true;            
    }       
}); 
```

或黄油刀：

```
@OnTouch(R.id.switchView)
public boolean switchStatus(Switch switchView, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_UP) {
        // your code
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-20T07:23:51.613

您可以自定义扩展 Switch 的视图，然后覆盖其 onTouchEvent()

```
@Override
public boolean onTouchEvent(MotionEvent ev) {
    boolean handle = ev.getActionMasked() == MotionEvent.ACTION_MOVE;
    return handle ? handle : super.onTouchEvent(ev);
} 
```

它应该工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-17T15:54:08.267

使用绑定适配器可以通过这个简单的 Kotlin 扩展来完成：

```
@SuppressLint("ClickableViewAccessibility")
@BindingAdapter("isSwipeEnabled")
fun SwitchCompat.setSwipeEnabled(isSwipeEnabled: Boolean) {
    setOnTouchListener { _, event ->
        if (isSwipeEnabled)
            false
        else
            event.actionMasked == MotionEvent.ACTION_MOVE
    }
} 
```

然后你可以在这样的布局文件中使用它：

```
<com.google.android.material.switchmaterial.SwitchMaterial
        android:id="@+id/switch"
        isSwipeEnabled="@{false}"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-03-25T18:19:54.870

//这段代码工作正常

公共类 MainActivity 扩展 AppCompatActivity 实现 CompoundButton.OnCheckedChangeListener { Switch my_switch;

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    my_switch = (Switch) findViewById(R.id.my_switch);
    my_switch.setOnCheckedChangeListener(this);
}
@Override
public void onClick(View v) {
    switch (v.getId()){
        case R.id.my_switch:
            if(my_switch.isChecked())
                my_switch.setChecked(true);                
            else           
                my_switch.setChecked(true);
            break;
    }
} 
```

}

# java - 在java中调用构造函数

> ID：13805191
> 
> 赞同：3
> 
> 时间：2012-12-10T16:39:41.230
> 
> 标签：java, object, constructor, superclass

```
class A {

    A() {
        System.out.print("A");
    }
}

class B extends A {
     B() {
        System.out.print("B");
    }
}

class C extends B {
 C() {
        System.out.print("C");
    }
}

public class My extends C {
My(){
super();
}
    public static void main(String[] args) {
        My m = new My();
    }
} 
```

问题从一个面试问题开始**（在 Java 中创建对象时会发生什么？）**

答案是……

> 最派生类的构造函数被调用。**构造函数做的第一件事就是调用它的超类的构造函数**。这个过程一直持续到调用 java.lang.Object 的构造函数，因为 java.lang.Object 是 java 中所有对象的基类。在执行构造函数的主体之前，会执行所有实例变量初始化程序和初始化块。然后执行构造函数的主体。**因此，基类的构造函数首先完成，最派生类的构造函数最后完成。**

所以，根据上面的说法，答案应该是**ABCC**，但它只显示**ABC**。虽然，当我评论`super()`派生构造函数时。然后，输出为**ABC**。请帮我弄清楚，我是否误解了上面的段落。?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:43:55.190

不，答案是**ABC**

```
My m = new My(); 
```

上面**首先**调用`My`类，然后对其超类（即`C`类）进行超级调用，然后对`B`类进行超级调用，然后对类进行超级调用，然后对所有对象`A`进行超级调用扩展。`java.lang.Object``java.lang.Object`

因此答案是**ABC**。

您实际上不需要**显式**调用`super()`您的`My`类，因为它会被**编译器**包含，除非您调用该类的重载构造函数，例如`this(something)`.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-10T16:42:54.257

下面的代码将打印`ABC`

要调用超类的构造函数`super()`，如果您没有显式调用构造函数，编译器将在扩展该类的每个类中隐式调用`super`。

# javascript - Google Maps API v3 的 {directionsService} API 的问题

> ID：13805192
> 
> 赞同：0
> 
> 时间：2012-12-10T16:39:41.360
> 
> 标签：javascript, google-maps-api-3

我正在尝试学习 Google Maps API 以获取从 A 点到 B 点的路线。当我简单地尝试本[教程](https://developers.google.com/maps/documentation/javascript/tutorial)中的示例代码时，我的 Javascript 控制台将我带到一些我无法理解的代码部分，并且调试器停止在“请参阅服务条款以获取更多信息：[http://www. google.com/help/terms_maps.html](http://www.google.com/help/terms_maps.html)。”。以下是我的 html 代码清单：

```
<html>
  <head>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=MY_KEY&sensor=false">
    </script>
    <script type="text/javascript">
      var directionsDisplay;
      var directionsService = new google.maps.DirectionsService();
      var map;

      function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 10,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        directionsDisplay.setMap(map);
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }

      function calcRoute() {
        initialize()
        var start = "Sydney, NSW";
        var end = "Chatswood, NSW";
        var request = {
            origin:start,
            destination:end,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
      }

    </script>
  </head>
  <body onload="calcRoute()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

地图确实显示在浏览器中，但方向不显示。任何人都可以在这里看到问题吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:56:06.907

问题是这两行的顺序：

```
 directionsDisplay.setMap(map);
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions); 
```

反转它们，它应该可以工作，将方向渲染器的地图设置为空（或未定义），从地图中删除方向。我将它们更改为（因此将地图分配给全局地图变量）：

```
 map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
    directionsDisplay.setMap(map); 
```

[工作示例](http://www.geocodezip.com/v3_SO_directionsService.html)

**代码片段：**

```
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var mapOptions = {
    center: new google.maps.LatLng(-34.397, 150.644),
    zoom: 10,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"),
    mapOptions);
  directionsDisplay.setMap(map);
}

function calcRoute() {
  initialize()
  var start = "Sydney, NSW";
  var end = "Chatswood, NSW";
  var request = {
    origin: start,
    destination: end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    }
  });
}
```

```
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}
#map_canvas {
  height: 100%;
}
@media print {
  html,
  body {
    height: auto;
  }
  #map_canvas {
    height: 650px;
  }
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>

<body onload="calcRoute()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
```

# android - 将屏幕截图错误上传到开发者控制台

> ID：13805196
> 
> 赞同：5
> 
> 时间：2012-12-10T16:39:57.767
> 
> 标签：android, screenshot, image-uploading, publishing

尝试将图像作为屏幕截图上传到开发人员控制台时出现以下错误：

“您需要检查您的截图图像是否为有效图像。”

1.  我从我的单元格中截取了一个屏幕截图并将其作为屏幕截图上传到开发者控制台并且它有效。
2.  然后我只是使用油漆在图像顶部添加了一条线。
3.  尝试将修改后的图像上传到开发者控制台，但失败了。

我的图像是 480wx800h PNG 格式的图像，所以应该没问题。（原始位图和修改后的位图）。

any1 可以告诉我如何解决这个问题吗？我想从我的应用上传一个示例图片，并在图片顶部添加一些说明。但我做不到。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T11:08:46.353

解决了：

显然，当您使用绘画保存 PNG 时，它会将位深度更改为 32 而不是 24，并且它增加了 Google 播放规则禁止的图像的透明度。所以将它保存为JPEG解决了这个问题

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-05T14:05:24.343

[![最大纵横比误差](../Images/6e94f362dabd64a9979169cc0e31d777.png)](https://i.stack.imgur.com/9aaTL.png)

当我尝试上传 IDE 生成的**错误纵横比的屏幕截图时，它给了我错误**

即，我从 Android Studio IDE 拍摄了像素屏幕截图，并尝试直接上传到 Playstore 商店列表，它给了我错误，因为屏幕截图尺寸为 1226 X **2502 ，当我将它们更改为 1226 X** **2452**时它开始上传（纵横比 1:2）

我希望 Android Studio IDE 将来能解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-28T07:00:25.713

对于任何可能遇到此答案的人。我的问题是我的屏幕截图分辨率在 6000 像素 x 3000 像素时太高了。

所以谷歌播放控制台无法处理它，而是向我显示了错误消息：

> “您需要检查您的截图图像是否为有效图像。”

为了修复它，我将图像缩小到 2000 x 1000 像素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-22T21:35:29.490

每次我从手机截屏时都会遇到这个问题，我通过修改图像分辨率来解决这个问题，具体来说是通过**最小化**高度图像。从 1080x **2220**到 1080x **2160**。

清晰的解释：

**2:1**的宽高比是高的两倍。这就是您需要调整屏幕截图大小的原因。

我通过这个[网站](https://calculateaspectratio.com/)计算了良好的分辨率：只需将您的图像**宽度**输入“像素宽度”输入，高度就会自动计算:)

[![在此处输入图像描述](../Images/d417cca7158284d7ef42e919c400628f.png)](https://i.stack.imgur.com/yOH1o.png)

## 关于尺寸和纵横比的更多解释：

[因此，假设您有一张宽 1920 像素 x 高 1080 像素的图像（该尺寸相当于全高清图像），您必须裁剪它以适应 2:1 的空间：您可以简单地保持宽度不变，并将高度裁剪为 960 像素的一半。](https://thenextweb.com/basics/2019/02/12/how-to-crop-your-images-to-a-specific-size-or-aspect-ratio/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-23T07:21:54.170

我尝试使用经典的 Play 管理中心进行上传，并且成功了。
[![经典控制台](../Images/479dc95b974fa104c9faadf6af826d57.png)](https://i.stack.imgur.com/E0aJR.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-02T13:26:31.797

就我而言，我已经阻止了第三方 cookie，而 Play 控制台只显示了一个一般性错误，建议重试

# php - 定义不解析的块

> ID：13805197
> 
> 赞同：3
> 
> 时间：2012-12-10T16:39:59.520
> 
> 标签：php, phpdoc

我试图用 phpDocumentor v2 记录我的框架。一切都很好，除了常数。这是我的代码：

```
// Define our site url
    if( MOD_REWRITE )
    {
        /**
         * The URL to get to the root of the website (HTTP_HOST + webroot)
         *
         * @package     System
         */
        define('SITE_URL', Request::BaseUrl());
    }
    else
    {
        /**
         * @ignore
         */
        define('SITE_URL', Request::BaseUrl() .'/?uri=');
    } 
```

问题是在这里的图片中： ![在此处输入图像描述](../Images/dc569f7d17a3c5008da9ef214a9ed925.png)

不仅 SITE_URL 被打印了两次（尽管第二次带有 @ignore 标签），而且没有描述，并且常量也没有按照定义存储在“System”包下。描述，也没有任何 phpdoc 标记适用于我定义的任何常量，但所有其他 doc 块（函数和类）都可以正常工作。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T17:52:03.127

phpDocumentor 看到两个常量。Better 在一个地方只定义一次常量。

更好的解决方案：

```
define('SITE_URL', Request::BaseUrl() . ( !MOD_REWRITE ? '/?uri=' : null ) ); 
```

# c++ - C++11 range-based for usage with auto

> ID：13805203
> 
> 赞同：4
> 
> 时间：2012-12-10T16:40:16.963
> 
> 标签：c++, c++11, foreach, auto, rvalue-reference

> **Possible Duplicate:**
> [What is the advantage of using universal references in range-based for loops?](https://stackoverflow.com/questions/13130708/what-is-the-advantage-of-using-universal-references-in-range-based-for-loops)

To iterate over the elements of a `vector<int>` to read them, I think the following usage of C++11 *range-based for* with `auto` is correct:

```
std::vector<int> v;
....
for (auto n : v)
{
   // Do something on n ...
   ....
} 
```

If the elements stored in the container are not simple integers, but something "heavier", like say `std::string`s, my understanding is that to iterate over them in a `vector<string>` the correct usage of range-based for + `auto` is:

```
std::vector<std::string> v;
....
for (const auto& s : v)
{
   // Do something on s ...
   ....
} 
```

The use of `const &` avoids useless deep-copies, and should be OK since the loop code is just *observing* the content of the vector.

Is my understanding correct so far?

Now, I saw code that uses another form of `auto` in range-based for loops: `auto&&`, e.g.:

```
for (auto&& elem : container)
  .... 
```

What is this usage good for? What is the advantage of using r-value references (`&&`) with range-based for loops? In what cases should we use this style?

# opencv - Convert image color space and output separate channels in OpenCV

> ID：13805204
> 
> 赞同：0
> 
> 时间：2012-12-10T16:40:17.533
> 
> 标签：opencv

I'm trying to reduce the runtime of a routine that converts an RGB image to a YCbCr image. My code looks like this:

```
cv::Mat input(BGR->m_height, BGR->m_width, CV_8UC3, BGR->m_imageData);
cv::Mat output(BGR->m_height, BGR->m_width, CV_8UC3);

cv::cvtColor(input, output, CV_BGR2YCrCb);

cv::Mat outputArr[3];
outputArr[0] = cv::Mat(BGR->m_height, BGR->m_width, CV_8UC1, Y->m_imageData);
outputArr[1] = cv::Mat(BGR->m_height, BGR->m_width, CV_8UC1, Cr->m_imageData);
outputArr[2] = cv::Mat(BGR->m_height, BGR->m_width, CV_8UC1, Cb->m_imageData);  

split(output,outputArr); 
```

But, this code is slow because there is a redundant split operation which copies the interleaved RGB image into the separate channel images. Is there a way to make the cvtColor function create an output that is already split into channel images? I tried to use constructors of the _OutputArray class that accepts a vector or array of matrices as an input, but it didn't work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:04:51.733

There is no calling option for cv::cvtColor, that gives it result as three seperate cv::Mats (one per channel).

> dst – output image of the same size and depth as src.

source: [http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)

You have to copy the pixels from the result (as you are already doing) or write such a conversion function yourself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T16:37:58.880

使用拆分。这会将图像分成 3 个不同的通道或数组。

现在将它们转换回`UIImage`是我遇到麻烦的地方。我得到三个灰度图像，每个数组中一个。我确信它们是 cvMat 格式的正确通道，但是当我将它们转换为灰度时，`UIImage`它们是灰度的，但每个图像中的灰度值不同。如果您可以使用`imread`，`imshow`那么它应该在拆分后为您显示图像。我的问题是尝试使用 ios.h 方法，我相信它会重新组装数组，而不是传输单个数组。这是我的代码，它使用分段控件来选择要显示的图层或数组。就像我说的，我得到了 3 张灰度图像，但它们的值完全不同。我需要保留一层并放弃其余的。仍在研究它的那部分。

```
UIImageToMat(_img, cvImage);
cv::cvtColor(cvImage, RYB, CV_RGB2BGRA);
split(RYB, layers);
if (_segmentedRGBControl.selectedSegmentIndex == 0) {
   // cv::cvtColor(layers[0], RYB, CV_8UC1);
    RYB = layers[0];
    _imageProcessView.image = MatToUIImage(RYB);
}
if (_segmentedRGBControl.selectedSegmentIndex == 1) {
    RYB = (layers[1]);
    _imageProcessView.image = MatToUIImage(RYB);
}
if (_segmentedRGBControl.selectedSegmentIndex == 2) {
    RYB = (layers[2]);
    _imageProcessView.image = MatToUIImage(RYB);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:02:28.777

您确定复制图像数据是限制步骤吗？
你是如何生产 Y 的？Cr / Cb cv::mats？
你可以重写这个函数来将结果写入三个单独的图像吗？

# c++ - 替换 Scene 后，Schedule 方法不再起作用

> ID：13805205
> 
> 赞同：3
> 
> 时间：2012-12-10T16:40:17.180
> 
> 标签：c++, cocos2d-iphone, cocos2d-x

我正在 cocos2dx 中制作游戏，所以我制作了一个名为的类，`CoCoGui` 并且我还制作了一个`IntroPage`继承自`CCLayerColor`游戏介绍页面的`StartPage`类和一个继承自的类`CCLayerColor`。我想在前2秒显示介绍页面，然后在（这是游戏的主循环）的函数中显示`StartingPage` 但是，当方法被调用并且被替换时，该方法将不再被调用！请帮我解决这个问题谢谢！`updateGame``CoCoGui``replaceScene``Scene``updateGame`

这是 CoCoGui.h 文件： `StartingPage`并且`IntroPage`是两个继承自的类`CCLayerColor`

```
#ifndef _COCOGUI_H_
#define _COCOGUI_H_

#include "StartingPage.h"
#include "..\Classes\WorkSpace.h"
#include "..\Classes\GameBoard.h"
#include "..\Classes\IntroPage.h"
using namespace cocos2d;

class CoCoGui : public CCLayerColor{

public:
    CoCoGui();
    void addScene (CCScene * startPage, CCScene * work);
    virtual ~CoCoGui(void);
    void updateGame ( float dt );
    virtual bool init();
    static CCScene* scene();
    CREATE_FUNC(CoCoGui);
private:
    bool isInit;
    CCScene * runnigScene;
    IntroPage * introPage;
    StartingPage * startingPage;
    void onEnterTransitionDidFinish();
    void menuCloseCallback(CCObject* pSender);
public:
    CCScene * getRunningScene(void);
};

#endif /* COCOGUI_H */ 
```

这里也是 CoCoGui.cpp 文件

```
#include "CoCoGui.h"
#include <iostream>
using namespace std;
CCScene* CoCoGui::scene(){
    CCScene *scene = CCScene::create();
    CoCoGui *layer = CoCoGui::create();

    scene->addChild(layer);

    return scene;
}

CoCoGui::CoCoGui ( )
{
    this->isInit = false;
    this->introPage = new IntroPage ( );
    this->startingPage = new StartingPage ( );
}

CoCoGui::~CoCoGui(void)
{
    delete introPage;
    delete startingPage;
}

void CoCoGui::menuCloseCallback(CCObject* pSender)
{
    CCDirector::sharedDirector()->end();

#if (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
    exit(0);
#endif
}

bool CoCoGui::init ( ){
    if ( !CCLayerColor::initWithColor ( ccc4 (100,100,100,255) ) ){
        return false;
}
    this->schedule ( schedule_selector ( CoCoGui::updateGame ), 0.5 );
    return true;
}

void CoCoGui::updateGame ( float dt ){
    cout << "Update Called" << endl;
    if ( !isInit )
        return;
    CCScene * scene = NULL;
    if ( !this->introPage->isIntroPageDone ( ) ){
        scene = IntroPage::scene();
    }
    else if ( this->introPage->isIntroPageDone ( )  ){
        scene = StartingPage::scene();
}
    CCDirector::sharedDirector()->replaceScene(scene);
}

void CoCoGui::onEnterTransitionDidFinish ( ){
    isInit = true;
}

CCScene * CoCoGui::getRunningScene(void)
{
    return this->runnigScene;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:52:32.643

ReplaceScene 将触发`this->onExit()`which will tr​​igger`unschedule`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:20:25.390

如果这与 cocos2d-iphone 类似，则必须调用 onEnterTransitionDidFinish 的基类实现和类似的 onEnter/onExit 覆盖。在 cocos2d-iphone 中，其中一些方法不调用 super 会导致调度和输入停止工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T00:40:26.240

尝试添加

```
this->resume(); 
```

调用时间表后。

还要确保加载连接到图层的场景。如果不是，它将导致运行时错误。

# php - Logout and access_token

> ID：13805208
> 
> 赞同：1
> 
> 时间：2012-12-10T16:40:18.623
> 
> 标签：php, facebook, facebook-graph-api

I'm trying to simply log a user out of fb before continuing on to log them out of my system.

Here's what I'm trying:

```
require_once '/src/facebook.php';

    $facebook = new Facebook(array( 'appId'  => 'MY_APP_ID', 'secret' => 'MY_SECRET' ));
    $fb_userID = null;
    $fb_userID = $facebook->getUser();
    $access_token = $facebook->getAccessToken();

    if($fb_userID){

    $logoutUrl = $facebook->getLogoutUrl( array ('next' => 'http://myurl.com/pages/userlogin.html?logoff=true')); 

    }

echo "<a href="$logoutUrl">Log-out</a>"; 
```

When I do this not only does it not work but the end of the URL shows `access_token=0`

If I try the following instead I get the access token but it stil doesn't work

```
$logoutUrl = "https://www.facebook.com/logout.php?next=http://myurl.com/pages/userlogin.html?logoff=true&access_token=$access_token"; 
```

Is there a better way of doing this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:54:29.823

在 getLogoutUrl 不起作用时强制注销：

```
$app_config = array(
  'appId' => '1234567',
  'secret' => '7722b9foobar00foobar'
);
$facebook = new Facebook($app_config);
$facebook->destroySession();
session_destroy(); 
```

# android - Create a base class for xmlpullparser utility in Android

> ID：13805209
> 
> 赞同：0
> 
> 时间：2012-12-10T16:40:18.850
> 
> 标签：android, xml, base-class, xmlpullparser

I have some problem with parsing XML using xmlpullparser API for Android.

**Problem**: I have a lot of duplication in Android classes like Activity or some business class for xml parser but it's the same!

**Required:** some base class or util for xmlpullparser to make all parsing in the same class; I just need send to him the URL for XML or for the WebService and I get the values and some utils if there is.

This what I have in the classes:

```
 int count = 0;
    try {
        srv = new URL(
                "URL Web Service");
        factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(false);
        xpp = factory.newPullParser();
        xpp.setInput(XMLUtility.getInputStream(srv), "UTF_8");
        insideItem = false;
        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG) {
                if (xpp.getName().equalsIgnoreCase(tag)) {
                    insideItem = true;
                } else if (xpp.getName().equalsIgnoreCase(SId)) {
                    if (insideItem)
                        id.add(xpp.nextText()); // extract the headline
                } else if (xpp.getName().equalsIgnoreCase(SEn)) {
                    if (insideItem)
                        enable.add(xpp.nextText());
                }
            } else if (eventType == XmlPullParser.END_TAG
                    && xpp.getName().equalsIgnoreCase(tag)) {
                insideItem = false;
                checkEnable.add(id.get(count) + "," + enable.get(count));
                count++;
            }
            eventType = xpp.next();
        }
    } catch (IOException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } 
```

This code is duplicated; just change the tag. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T17:07:14.010

使用 xstream

[http://x-stream.github.io/download.html](http://x-stream.github.io/download.html)

您可以为 xml 定义响应类，并且只定义对象类或 pojo 类。

# javascript - Scraping dynamic page content phantomjs

> ID：13805215
> 
> 赞同：2
> 
> 时间：2012-12-10T16:40:52.670
> 
> 标签：javascript, html, web-scraping, phantomjs

My company is using a website that hosts all of our FAQ and customer questions. We have plans to go through and wipe out all of the old data and input new and the service does not have a backup, or archive option for questions we don't want to appear anymore.

I've gone through and tried to scape the site using perl and mechanize, but I'm missing the customer comments on the page as they are loaded through ajax. I have looked at phantomjs and can get the pages to save to an image using an example page, however, I'd like to get an full page html dump of the page, but can't figure out how. I used this example code on our site

```
var page = new WebPage();

page.open('http://espn.go.com/nfl/', function (status) {
//once page loaded, include jQuery from cdn
page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js", function() {
//once jQuery loaded, run some code
//inserts our custom text into the page
page.evaluate(function(){$("h2").html('Many NFL Players Scared that Chad Moon Will Enter League');});
//take screenshot and exit
page.render('espn.png');
phantom.exit();

});

}); 
```

Is there a way using phantomjs that I can just get a full page dump of the data, similar to if I did a view source in chrome? I can do this with perl + mechanize, but don't see how to do this using phantomjs.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-16T12:50:54.647

您可以使用`page.content`获取完整的 HTML DOM

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:10:23.407

如果您想使用 PhantomJS 进行抓取，我会推荐 pjscrape [http://nrabinowitz.github.com/pjscrape/](http://nrabinowitz.github.com/pjscrape/)

# php - 海量数据导入，Wordpress php & mysql

> ID：13805217
> 
> 赞同：1
> 
> 时间：2012-12-10T16:40:52.543
> 
> 标签：php, mysql, wordpress

我在 2 个不同的服务器上有 2 个数据库。源数据库是一个海量的房地产数据库，第二个是一个 Wordpress 数据库。我必须将数据从源导入到 Wordpress 数据库的帖子和 postmeta 表。

目前，我正在从源数据库中提取所有内容，然后循环遍历这些结果以将它们插入到帖子表中，并使用另一个嵌套查询使用帖子插入中的插入 ID 将每个字段作为元值插入。换句话说，它是一个内存猪。

我的问题是，我下面的循环是否可以改进，以便没有那么多单独的插入行？或者有没有人有任何建议让这个更快/不那么草率？

```
// SOURCE DB
$query = "select $fields from listings where data_id = 'B'"; 

$result = mysql_query($query);

// WORDPRESS DB
while ($row = mysql_fetch_assoc($result)) {
    $query2 = "insert into wp_posts (post_author, post_content, post_title, post_status, comment_status, ping_status, post_name, post_type) values";
    $query2 .= " ('1', '" . mysql_real_escape_string($row['remarks']) . "', '{$row['mls_acct']}', 'publish', 'closed', 'closed', '{$row['mls_acct']}', 'properties')";

    $result2 = mysql_query($query2);

    $id = mysql_insert_id();

    foreach ($row as $key => $val)
    {
        $query3 = "insert into wp_postmeta (post_id, meta_key, meta_value) values ";

        $query3 .= "('$id', '$key', 'mysql_real_escape_string($val)')";

        $result3 = mysql_query($query3);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:52:18.397

您可能可以将`INSERT ... SELECT FROM ...`一个查询作为单个查询而不是您在内部执行的循环版本：

```
INSERT INTO wp_postmeta (post_id, meta_key, meta_value)
    SELECT $id, meta_key, meta_value FROM wp_posts WHERE id = $id 
```

我对 WP 的内部结构不是特别熟悉（而且我真的不想变得如此……），但是如果你可以调整它以使其工作，你将在循环中为自己节省几十个单独的插入查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:58:31.207

我对此的第一个想法是分批插入记录，而不是一次插入一个。所以你的内部插入最终会是这样的：

```
insert into wp_postmeta (post_id, meta_key, meta_value) values
(1, meta_key_1, meta_value_1),
(1, meta_key_2, meta_value_2),
(1, meta_key_3, meta_value_3),
(1, meta_key_4, meta_value_4),
(1, meta_key_5, meta_value_5),
(1, meta_key_6, meta_value_6),
(1, meta_key_7, meta_value_7),
...
(1, meta_key_100, meta_value_100); 
```

我不确定每批的最佳记录数是多少，但我想你明白了。

# .net - “通过网络”的外键关系（如何对它们进行数据绑定？）

> ID：13805221
> 
> 赞同：0
> 
> 时间：2012-12-10T16:41:12.637
> 
> 标签：.net, wpf, wcf, web-services, data-binding

场景：需要从 Web 服务收集对象集合并将它们呈现在 GUI 中。该对象包含对另一个对象（*外键*）的引用，我也需要表示这个相关对象。

我有两种可能的选择，它们各自的缺点：

1.  发送“通过电线”整个相关对象。
2.  **仅发送外键并检索查询另一个集合的相关对象（以前存储在本地）**

第一个选项使数据绑定（我在客户端使用 WPF）直截了当，尽管它在通信中引入了显着的开销（特别是如果相同的相关对象出现很多次）。因此，这似乎不是要走的路。

第二个选项实现了更小的消息，它似乎是要走的路。**但是，我找不到执行与此相关对象的数据绑定的方法**。

让我用一个例子来澄清这个问题：

对象 -> 房间 || 相关对象 -> 建筑 || 本地存储的集合 -> 建筑物

来自 Web 服务的消息包含房间属性（比如说“名称”、“大小”……）和“BuildingId”。我希望能够在 UI 中显示（通过数据绑定自动）来自建筑物的信息，而不仅仅是“BuildingId”。因此，**我必须查询“Buldings”集合以获取正确的建筑对象，然后使用它的属性来填充 UI**似乎是合乎逻辑的。

所以，我的问题是：

1.  **如何通过 WPF 中的数据绑定来实现这一点？**我想有一种自动的方法可以实现这一目标。没有吗？
2.  我是否缺少任何基本概念（与数据绑定相关）？我是 .NET 堆栈的新手，所以这可能比我看起来更容易！

谢谢你们！;)

PS：任何可以为我指明正确方向的文档/链接将不胜感激；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:48:32.020

我将在 Room 对象上有一个名为 Building 的属性，该属性最初可以为空（null），但稍后在您加载建筑对象时设置。你的房间对象应该实现`INotifyPropertyChanged`当对象最终加载并导致所有绑定刷新时通知 UI。

示例 INotifyPropertyChanged 实现：

```
private bool _Active;
public bool Active
{
    get { return _Active; }
    set
    {
        if (_Active == value)
            return;

        _Active = value;
        OnPropertyChanged("Active");
    }
}

#region PropertyChanged Implementation

        // Code Below Copied From : http://www.codeproject.com/KB/cs/PropertyNotifyPart1.aspx
        /// <summary>
        /// Raises the <see cref="E:PropertyChanged"/> event.
        /// </summary>
        /// <param name="propertyName">
        /// Name of the property that changed.
        /// </param>
        protected void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventArgs e = new PropertyChangedEventArgs(propertyName);
            OnPropertyChanged(e);
        }

        /// <summary>
        /// Raises the <see cref="E:PropertyChanged"/> event.
        /// </summary>
        /// <param name="e">
        /// The <see cref="PropertyChangedEventArgs"/> instance
        /// containing the event data.
        /// </param>
        protected void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            PropertyChangedEventHandler temp = this.PropertyChanged;
            if (null != temp)
                temp(this, e);
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected void OnPropertyChanged(object sender, PropertyChangedEventArgs e)
        {
            PropertyChangedEventHandler temp = this.PropertyChanged;
            if (null != temp)
                temp(sender, e);
        }

        #endregion 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:54:20.657

尝试将您的两个选项与 .Net/WPF 世界中的典型方法相关联（以相反的顺序）：

**方法 2：** 模型-视图-视图模型方法 (MVVM) 可能是一种方法。您的 DTO 旨在使用 WCF（模型）优化消息传递。MVVM 原则建议您不应因数据绑定等问题而污染它们。一个单独的类 ViewModel 对此负责，并且还可以管理诸如使用缓存查找等将原始标识符（例如 BuildingId）映射到对象的可绑定表示等问题。而不是绑定到 DTO，然后您的 WPF 视图绑定到 ViewModel .

如果您想采用此选项，请了解[MVVM 概念](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，然后您可能需要考虑使用工具来提供帮助。（我发现[Caliburn Micro](http://caliburnmicro.codeplex.com/)非常出色，但 WPF 也有一些）

**方法 1：** 这是更简单的方法，意味着您编写 WCF 服务，以便将预制的 ViewModel 从服务器提供给客户端（即，您的 DTO 和 ViewModel 是同一件事）。正如您已经观察到的，由于构建 ViewModel 的责任是在服务器上完成的，您可能会遇到传输冗余数据的问题。这种方法还意味着客户端和服务器非常紧密地耦合——每个 DTO/ViewModel 都设计用于特定的 View。

最终，最佳方法取决于您的应用程序的要求。如果您正在寻找一种简单的方法，您不关心一些冗余数据通信并且只想尽快找到解决方案，那么方法 1 可能更可取。

但是，如果您需要服务其他客户端，或者出于其他原因避免将客户端和服务器耦合很重要，或者需要高效通信，则应考虑使用 MVVM 方法。

# mysql - 在 InnoDB 上使用 AUTO_INCREMENT 创建 2 列

> ID：13805223
> 
> 赞同：0
> 
> 时间：2012-12-10T16:41:18.687
> 
> 标签：mysql, innodb

我有 2 个 id 列：一个是表/系统 id，它没有任何意义，应该始终自动递增。第二个是企业 ID，它并不总是在插入时设置一个值，并且可以在插入后的任何时候设置一个递增的数字。

所以我打算使用 NO_AUTO_VALUE_ON_ZERO 设置，但从我读到的 InnoDB 不支持 2 个 auto_increment 列。我可以在这里使用任何解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:05:32.777

您不能在一个表中使用 2 个自动增量，也不能在 CURRENT_TIMESTAMP 中使用 2 个 TIMESTAMP 列，

你的选择：

*   就是创建一个触发器。
*   重新设计您的数据库，因为如果您需要 2 个不为空的 auto_increment，这意味着您将在该表中拥有 2 个不为空（PK）的唯一键，这不好。

如何创建触发器：[http ://dev.mysql.com/doc/refman/5.1/de/create-trigger.html](http://dev.mysql.com/doc/refman/5.1/de/create-trigger.html)

# php - 我应该使用什么方法来叠加图片？

> ID：13805226
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:41:23.077
> 
> 标签：php, image-processing

**我已经完成了我的研究**，但我仍然感到非常不了解。我正在寻找一个库，它将制作由其他图片组成的实际物理（数字）图片，这些图片一层层叠加。我从 Imagick 开始，但我不完全确定它会创建一个新图像，而不是渲染到屏幕上的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:46:40.337

[PHP GD](http://php.net/manual/en/book.image.php)会做到这一点 - 只需渲染透明 PNG 以获得您的图层，然后通过 CSS 将它们放在另一个之上：

```
.layers img{
  position: relative;
  top: 0;
  left: 0;
} 
```

**标记：**

```
<div class="layers">
  <img src="someScript.php">
  <img src="someScript.php">
  <img src="someScript.php">
</img> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:28:51.397

您所追求的输出的实际图像会有所帮助。

是这样的吗？

![重叠的照片](../Images/1a0b9670cab67b577c7eb6918e10f59b.png)

从此更改这些行

```
/* Output the image */
header("Content-Type: image/png");
echo $canvas; 
```

对此

```
/* Save the image as output.png in the same folder as the code */
$canvas->writeImage('output.jpg');  
$canvas->destroy(); 
```

# java - Radio Group + Swipe Navigation + Button Android

> ID：13805230
> 
> 赞同：3
> 
> 时间：2012-12-10T16:41:54.560
> 
> 标签：java, android, eclipse, radio-button

I have researched and tried various algorithms and ritual dances but to no avail. I need a three page layout that will be implemented through android swipe. I can get that set up just fine. The issue I am having is on my first layout I have a radio group, edit text field and a button. To test that the radio buttons are being selected properly I have the OnCheckedChangeListener edit the id of the radio button to the hint field of the edit text box. My first implementation here.

```
 import android.os.Bundle;
    import android.support.v4.app.Fragment;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.app.FragmentManager;
    import android.support.v4.app.FragmentPagerAdapter;
    import android.support.v4.view.ViewPager;
    import android.view.LayoutInflater;
    import android.view.Menu;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.EditText;
    import android.widget.RadioButton;
    import android.widget.RadioGroup;

    public class MainActivity extends FragmentActivity 
    {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide
 * fragments for each of the sections. We use a
 * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
 * will keep every loaded fragment in memory. If this becomes too memory
 * intensive, it may be best to switch to a
 * {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;   

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter 
{

    public SectionsPagerAdapter(FragmentManager fm) 
    {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) 
    {
        // getItem is called to instantiate the fragment for the given        page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.

        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);

        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() 
    {
        // Show 3 total pages.
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) 
    {
        switch (position) 
        {
            case 0:
                return getString(R.string.title_section1);
            case 1:
                return getString(R.string.title_section2);
            case 2:
                return getString(R.string.title_section3);
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply
 * displays dummy text.
 */
public class DummySectionFragment extends Fragment 
{
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    RadioGroup group1;
    RadioButton radio1, radio2, radio3;
    EditText editText1;

    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() 
    {

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) 
    {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.

        int position = getArguments().getInt(ARG_SECTION_NUMBER);

         int resId = 0;
            switch (position) 
            {
                case 1:
                    resId = R.layout.layout1;
                    break;
                case 2:
                    resId = R.layout.layout2;
                    break;
                case 3:
                    resId = R.layout.layout3;
                    break;
            }

    View view = inflater.inflate(resId, container, false);

    if (position == 1)
    {
    group1 = (RadioGroup)
            findViewById(R.id.radioGroup1);
        radio1 = (RadioButton)
            group1.findViewById(group1.getCheckedRadioButtonId());
        radio2 = (RadioButton)
            group1.findViewById(group1.getCheckedRadioButtonId());
        radio3 = (RadioButton)
            group1.findViewById(group1.getCheckedRadioButtonId());

        editText1 = (EditText) findViewById(R.id.editText1);

        group1.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() 
        {

            public void onCheckedChanged(RadioGroup group, int checkedId) 
            {
                switch (checkedId)
                {
                    case R.id.radio1:
                        editText1.setHint("Layout1 selected");
                        break;

                    case R.id.radio2:
                        editText1.setHint("Layout2 selected");
                        break;

                    case R.id.radio3:
                        editText1.setHint("Layout3 selected");
                        break;
                }

            }
        });
    }
    return view;
    }

        }
        } 
```

will implement the layouts just fine but fails when adding the last if statement (if (position == 1)

However, my next implementation works but after I swipe to layout3, layout1 doesn't reinstantiate my argument as it did when it first loads up Here is the code snippet

```
 import android.content.Context;
    import android.os.Bundle;
    import android.os.Parcelable;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.view.PagerAdapter;
    import android.support.v4.view.ViewPager;
    import android.view.LayoutInflater;
    import android.view.Menu;
    import android.view.View;
    import android.widget.EditText;
    import android.widget.RadioButton;
    import android.widget.RadioGroup;
    import android.widget.Toast;

    public class MainActivity extends FragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.pager);
   myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

class MyPagerAdapter extends PagerAdapter {

    RadioGroup group1;
    RadioButton radio1, radio2, radio3;
    EditText editText1;

    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.title_section1);
        case 1:
            return getString(R.string.title_section2);
        case 2:
            return getString(R.string.title_section3);
        }
        return null;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.layout1;
            break;
        case 1:
            resId = R.layout.layout2;
            break;
        case 2:
            resId = R.layout.layout3;
            break;
        }

        String a = Integer.toString(position);
        Toast.makeText(getBaseContext(), a, Toast.LENGTH_SHORT).show();

       if (position == 1){
                group1 = (RadioGroup)
                    findViewById(R.id.radioGroup1);
            radio1 = (RadioButton)
                    group1.findViewById(group1.getCheckedRadioButtonId());
            radio2 = (RadioButton)
                    group1.findViewById(group1.getCheckedRadioButtonId());
            radio3 = (RadioButton)
                    group1.findViewById(group1.getCheckedRadioButtonId());

            editText1 = (EditText) findViewById(R.id.editText1);

            group1.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() 
              {

                public void onCheckedChanged(RadioGroup group, int checkedId) 
                {
                    switch (checkedId)
                    {
                        case R.id.radio1:
                            editText1.setHint("radio1");
                            break;

                        case R.id.radio2:
                            editText1.setHint("radio2");
                            break;

                        case R.id.radio3:
                            editText1.setHint("radio3");
                            break;
                    }

                } 
              });
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;

    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) 
    {

        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) 
    {
        return arg0 == ((View) arg1);

    }

    @Override
    public Parcelable saveState() 
    {
        return null;
    }
    } 
        } 
```

Here is my main layout and layout 1

main.xml

```
 <android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<!--
This title strip will display the currently visible page title, as well as the page
titles for adjacent pages.
-->

<android.support.v4.view.PagerTitleStrip
    android:id="@+id/pager_title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="#33b5e5"
    android:paddingBottom="4dp"
    android:paddingTop="4dp"
    android:textColor="#fff" />

</android.support.v4.view.ViewPager> 
```

layout1.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" />

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="57dp" >

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="radio1" />

    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="radio2" />

    <RadioButton
        android:id="@+id/radio3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="radio3" />
</RadioGroup>

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/radioGroup1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="52dp"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/editText1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="40dp"
    android:text="Button" />

</RelativeLayout> 
```

# java - 使用带有片段的部分，NullPointerException

> ID：13805233
> 
> 赞同：4
> 
> 时间：2012-12-10T16:42:02.010
> 
> 标签：java, android, nullpointerexception, android-fragments

我之前通过使用 tablistener 并为每个片段都有一个类来完成带有选项卡的片段，现在我发现 Eclipse 允许您设置带有片段的选项卡或部分，所以我改用它。但现在我有一个问题。我在 mainactivity 类中创建了一个片段类。但是当我尝试更改文本视图中的数据时，我得到一个空指针。

这是代码

```
public class MainActivity extends FragmentActivity {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for    each of the
 * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
 * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
 * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Create the adapter that will return a fragment for each of the three primary sections
    // of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
    mViewPager.setCurrentItem(2);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@SuppressWarnings("deprecation")
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    return true;
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
 * sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new MainFragment();
        Bundle args = new Bundle();
        args.putInt(MainFragment.ARG_SECTION_NUMBER, i);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 4;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();
            case 3: return getString(R.string.title_section4).toUpperCase();
        }
        return null;
    }
}

public static class MainFragment extends Fragment {

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bundle args = getArguments();
        int position = args.getInt(ARG_SECTION_NUMBER);
        int tabLayout = 1;

        switch(position) {
        case 0:
            tabLayout = R.layout.tab1;
            break;
        case 1:
            tabLayout = R.layout.tab2;
            break;
        case 2:
            tabLayout = R.layout.tab3;
            break;
        case 3:
            tabLayout = R.layout.tab4;
            break;

        }

        View view = inflater.inflate(tabLayout, container, false);

        TextView tv = (TextView) getActivity().findViewById(R.id.stats_squats);
        tv.setText("DEPRSTgjhndkpgfhn");

        return view;
    }

} 
```

我尝试了不同的方法来做到这一点：

```
 TextView tv = (TextView) getActivity().findViewById(R.id.stats_squats);
        tv.setText("DEPRSTgjhndkpgfhn");

        TextView tv = (TextView) getView().findViewById(R.id.stats_squats);
        tv.setText("DEPRSTgjhndkpgfhn");

        TextView tv = (TextView) view.findViewById(R.id.stats_squats);
        tv.setText("DEPRSTgjhndkpgfhn"); 
```

每次都是同样的错误。

这是logcat日志：

```
12-10 17:37:56.898: D/OpenGLRenderer(13574): Enabling debug mode 0
12-10 17:37:58.970: D/AndroidRuntime(13574): Shutting down VM
12-10 17:37:58.970: W/dalvikvm(13574): threadid=1: thread exiting with uncaught exception (group=0x40f82300)
12-10 17:37:58.980: E/AndroidRuntime(13574): FATAL EXCEPTION: main
12-10 17:37:58.980: E/AndroidRuntime(13574): java.lang.NullPointerException
12-10 17:37:58.980: E/AndroidRuntime(13574):    at no.whg.workout.MainActivity$MainFragment.onCreateView(MainActivity.java:189)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.view.ViewPager.populate(ViewPager.java:895)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1234)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.View.measure(View.java:15172)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.View.measure(View.java:15172)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.View.measure(View.java:15172)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2435)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.View.measure(View.java:15172)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.Choreographer.doFrame(Choreographer.java:525)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.os.Handler.handleCallback(Handler.java:615)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.os.Looper.loop(Looper.java:137)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at android.app.ActivityThread.main(ActivityThread.java:4931)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at java.lang.reflect.Method.invokeNative(Native Method)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at java.lang.reflect.Method.invoke(Method.java:511)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-10 17:37:58.980: E/AndroidRuntime(13574):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:56:18.750

如果您查看[Fragment 文档](http://developer.android.com/reference/android/app/Fragment.html)，您会看到`onCreateView()`之前运行过`onCreateActivity()`。`getActivity()`将返回 null `onCreateView()`。您需要将该部分移出`onCreateView()`并覆盖`onActivityCreated()`..

# extjs4.1 - 根据 javascript 变量值禁用 extjs xtype 按钮

> ID：13805234
> 
> 赞同：0
> 
> 时间：2012-12-10T16:42:02.947
> 
> 标签：extjs4.1

我有一个按钮，如果 javascript 变量是“用户”，我需要禁用该按钮。我不知道该怎么做。这是我尝试过的：

```
var loggedin_role = '<?php echo "$user_role"; ?>';          

                 xtype: 'button',
                if(loggedin_role =='user') {
                    disabled:true
                },
                text: 'Save', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:53:05.340

## 使用 PHP

您可以使用简单的 php 逻辑来做到这一点。

```
<?php if ($user_role=='user'): ?>
disabled: true;
<?php endif; ?> 
```

## 使用 ExtJS 事件

您可以使用任何事件处理程序。激活（Ext.Component this，Object eOpts）

```
var loggedin_role = '<?php echo "$user_role"; ?>';          

        xtype: 'button',
        listeners : {
            activeate: function(btn, eOpts){
                if(loggedin_role =='user') {
                    btn.disable();
                }
            }
        }, 
```

# jquery - 在 jQuery UI 中，如何将 ui 关闭按钮添加到可拖动的？

> ID：13805237
> 
> 赞同：1
> 
> 时间：2012-12-10T16:42:04.570
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-ui-sortable, jquery-ui-draggable

这是使用 .sortable 工作的：

```
if ($(ui.item).find('.removeButton').length == 0){
    var removeButton = $('<span class="removeButton">X</span>').click(function(){
        $(this).remove();
        $(this).each(function(){
            $(this).appendTo($(this).attr('parentClass'));
        });
    });
    $(ui.item).append(removeButton);
}; 
```

但我根本无法让它在 .draggable 上工作。我不能再使用 .sortable ，因为程序员使用 .draggable 制作了整个东西，所以我必须对其进行一些转换。这似乎是一段非常简单的代码，所以我不知道为什么它不起作用。

HTML 类似于具有两个区域的可排序，将一侧拖动到另一侧。

```
<div id="source">
    <div id="su1">
      <h3></h3>
      <ul></ul>
    </div>
    ....
</div>
<div id="destination">
    <div id="su1">
      <h3></h3>
      <ul></ul>
    </div>
    ....
</div> 
```

[工作的.sortable。](http://jsfiddle.net/rvAgL/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:38:12.343

你最好也使用类来拖动你的 div，如下所示：

```
<div id="source">
    <div id="su1" class="source ui-state-default">
      <h3>Item 1</h3>
      <ul></ul>
    </div>
    <div id="su2" class="source ui-state-default">
      <h3>Item 2</h3>
      <ul></ul>
    </div>
    ...
</div> 
<div id="destination"> 
    <div id="su1" class="dest ui-state-highlight">
      <h3>Ìtem 1</h3>
      <ul></ul>
    </div>
    <div id="su2" class="dest ui-state-highlight">
      <h3>Ìtem 2</h3>
      <ul></ul>
    </div>
    ....
</div>​ 
```

然后你可以创建类似下面的东西。请注意，我*没有*使用. 复制这将是相当多的工作，所以我把它留给你和“程序员”。这只是为了演示如何添加删除按钮，然后将其移回div：`sortable``draggable``source`

```
 $('.source').draggable({ revert: 'invalid' });
    $('.dest').draggable({ revert: 'invalid' });
    $('#destination').droppable({
        drop:function(ev, ui){
            var widget = $(this);
            if ($(ui.draggable).find(".removeButton").length == 0)
            {
                var removeButton = $("<span class='removeButton'>X</span>").click(function(){
                    var parentDiv = $(this).parent();
                    $(this).remove();
                    parentDiv.appendTo($('#source'))
                     $('#source div').appendTo($('#source'));
                });
                $('h3',ui.draggable).append(removeButton);
            }
        }
    }); 
```

# php - Form data on load of Blueimp jQuery File Upload

> ID：13805238
> 
> 赞同：1
> 
> 时间：2012-12-10T16:42:12.513
> 
> 标签：php, jquery, file-upload, blueimp

It seems that I have looked everywhere and tried everything and I can not get this to work, any help would be much appreciated! I am using Blueimp's jQuery File Upload. I have changed the UploadHandler.php in the following ways to make this upload work with multiple records and places within my system. I am using PHP and MySQL.

Added to handle_file_upload function so that the file path, file name, file type, file size, the record type, and the "job number" is uploaded to a table I created in MySQL for each different file.

```
$file->upload_to_db = $this->add_file($job_num, $recordtype, $file_path, $filename, $type, $file_size); 
```

This job number is sent to the page (with the file upload) as a get variable as well as a hidden form field to send to the Handler when adding a file. The add_file function I added is as follows:

```
function add_file($job_num, $recordtype, $filepath, $filename, $filetype, $filesize)
{
    $filepath = addslashes($filepath);
    $insert_query = $this->query("INSERT INTO fileupload (job_num, recordtype, file_path, file_name, file_type, file_size) VALUES ('".$job_num."','".$recordtype."','".$filepath."','".$filename."','".$filetype."','".$filesize."')");
    return $insert_query;
} 
```

The query function:

```
protected function query($query) {
    $database = $this->options['database'];
    $host = $this->options['host'];
    $username = $this->options['username']; 
    $password = $this->options['password'];
    $Link = mysql_connect($host, $username, $password);
    if (!$Link){
        die( mysql_error() );
    }
    $db_selected = mysql_select_db($database);
    if (!$db_selected){
        die( mysql_error() );
    }
    $result = mysql_query($query);
    mysql_close($Link);
    return $result;
} 
```

I have a function for the delete as well. Now, this all works fine. Every file I add is saved and the path is stored in the database. From here I had to find a way to only show the files uploaded for that record instead of showing all files for every record. I modified the get function:

```
public function get($print_response = true) {
      if ($print_response && isset($_GET['download'])) {
        return $this->download();
    }
    $uploads = $this->query_db();
    return $this->generate_response($uploads, $print_response);
} 
```

The query_db function:

```
public function query_db() {
    $uploads_array = array();
    // error_log("Job Num: ".$this->job_num."\n\n",3,"error_log.txt");
    $select_result = $this->query("SELECT * FROM fileupload WHERE job_num=423424");
    while($query_results = mysql_fetch_object($select_result))
    {   
        $file = new stdClass();
        $file->id = $query_results->id;
        $file->name = $query_results->file_name;
        $file->size = $query_results->file_size;
        $file->type = $query_results->file_type;
        $file->url = "filepath_to_url/".$query_results->file_name;
        $file->thumbnail_url = "filepath_to_thumbnail/".$query_results->file_name;
        $file->delete_url = "";
        $file->delete_type = "DELETE";
        array_push($uploads_array,$file);
    }
    return $uploads_array;
} 
```

Where the filepath is correct on my system. This, again, works just fine. But as you can see from the query in the query_db function I have the job_num hard coded. I need a way to get this when the first page is loaded. I have looked for a way to do this and nothing has worked. When I submit/add other files I can use the $_REQUEST['job_num'] to get it, but not when the page is loaded. I am not very familiar with OOP PHP so some of this is new to me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:30:14.947

也许这会有所帮助

```
protected function get_file_objects() {

    $user_id = $this->options['session_id'];
    $files = $this->query("SELECT yourname FROM yourname WHERE yourname='$user_id'");
    $files_array=array();
    while($row = mysql_fetch_assoc($files)){
        array_push($files_array,$row['yourname']);
    }
    return array_values( array_filter( array_map(
        array($this, 'get_file_object'),
        $files_array
    ) ) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:21:09.810

根据您的评论，您可能希望向`job_number`您的班级添加一个属性。`add_file()` 然后，当您像这样调用时，您可以在您的班级中设置此值

```
function add_file($job_num, $recordtype, $filepath, $filename, $filetype, $filesize)
{
    $this->job_number = $job_num;
    $filepath = addslashes($filepath);
    $insert_query = $this->query("INSERT INTO fileupload (job_num, recordtype, file_path, file_name, file_type, file_size) VALUES ('".$job_num."','".$recordtype."','".$filepath."','".$filename."','".$filetype."','".$filesize."')");
    return $insert_query;
} 
```

`query_db()`然后，您可以在您的方法中引用此作业编号，如下所示：

```
public function query_db() {
    $uploads_array = array();
    // error_log("Job Num: ".$this->job_num."\n\n",3,"error_log.txt");
    $select_result = $this->query("SELECT * FROM fileupload WHERE job_num=" . $this->job_number);
    while($query_results = mysql_fetch_object($select_result))
    {   
        $file = new stdClass();
        $file->id = $query_results->id;
        $file->name = $query_results->file_name;
        $file->size = $query_results->file_size;
        $file->type = $query_results->file_type;
        $file->url = "filepath_to_url/".$query_results->file_name;
        $file->thumbnail_url = "filepath_to_thumbnail/".$query_results->file_name;
        $file->delete_url = "";
        $file->delete_type = "DELETE";
        array_push($uploads_array,$file);
    }
    return $uploads_array;
} 
```

请注意，我的代码示例中没有考虑数据卫生。您还需要这样做以防止 SQL 注入。实际上，您应该真正考虑使用已弃用的`mysqli_*`功能。`mysql_*`您还应该将数据库连接传递到您的类中，您可以将它用于类的所有区域（例如在`add_file`将作业编号设置到对象中之前最好转义作业编号的方法）。

# c# - Convert RGB32 byte array to jpeg to base64 string without saving to disk

> ID：13805239
> 
> 赞同：0
> 
> 时间：2012-12-10T16:42:16.040
> 
> 标签：c#, image, encoding, websocket, file-format

I have a device which is sending RGB32 encoded color image frames as byte arrays at 30 FPS.

I'd like to send these frames to the browser in the most performant manner possible via a websocket connection.

I'm assuming that the best way to get the image data through the websocket is as a base64 string that I interpret as a URI in the browser, but base64 encoding raw RGB32 data obviously doesn't work, as it's not interpretable by the browser.

Therefore, I need to encode the RGB32 data as jpg before encoding into base64 and sending down the pipe, but all of the solutions I have been able to find for encoding byte arrays involve saving to the disk, which is obviously a performance killer.

Can anyone explain to me a performant manner to convert these RGB32 byte arrays to jpgs on the fly so I can push them down the pipe?

Alternately, if anyone has any ideas on an alternate high performance manner to get these RGBA frames down a websocket to a browser, I'd love to hear.

Thanks!

Code looks something like this:

```
private void ColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
{
    using (ColorImageFrame frame = e.OpenColorImageFrame())
    {
        if (frame != null)
        {
            byte[] pixelData = new byte[frame.PixelDataLength];
            frame.CopyPixelDataTo(pixelData);
            //display in wpf   
            this._ColorImageBitmap.WritePixels(this._ColorImageBitmapRect, pixelData, this._ColorImageStride, 0);

            //send via websocket to chrome
            //how do we create a base64 encoded jpg here and pass it off to chrome?
            MainWindow.Broadcast(DataForChromeGoesHere);

        }
    }
} 
```

# java - 使用 Apache POI 从 Excel 中写出 XML

> ID：13805247
> 
> 赞同：6
> 
> 时间：2012-12-10T16:42:35.177
> 
> 标签：java, apache-poi

我需要将我的 excel 文件转换为 XML。目前我有一个使用 POI 吐出 2010 excel 文件 (xlsx) 的工具，但我想进一步扩展它并让它吐出 XML。

我似乎找不到任何关于如何在 POI 中执行此操作的明确示例，但搜索表明这是可能的。希望有人对此有直接的经验吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:07:46.310

我从来没有直接使用过 POI，尽管我使用 Apache Tika（它实现了 POI）来做类似的事情。解析器/处理程序接口自动将文档转换为 XML，您应该能够根据自己的目的进行调整。

[https://tika.apache.org/1.2/parser.html](https://tika.apache.org/1.2/parser.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:19:53.930

查看 www.servingxml.com。它将 excel/csv 转换为 XML。不涉及 Java 代码。您所要做的就是创建转换 xml 文件，这很容易做到。网站上有很多例子。

# ruby-on-rails-3 - How to trigger the download popup box using Rails 3

> ID：13805249
> 
> 赞同：0
> 
> 时间：2012-12-10T16:42:37.470
> 
> 标签：ruby-on-rails-3, http

I am trying to trigger the download pop up box on firefox using an Ajax jquery call. my jquery code is this:

```
function download_clip(){
    $.ajax({
        url: '/controller/download_clip',
        type: "GET",
        complete: function (data_response) {
            status = data_response.responseText; //the response variable from the presentation controller
            console.log(status);
        }
    });
}; 
```

in my controller:

```
 def download_clip
       send_file "public/output.mp4", :type=>"video/mp4", :filename => "output.mp4", :x_sendfile=>true, :disposition => 'inline'
  end 
```

Any ideas how to trigger the download box?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:20:22.090

...好吧，我认为如果你这样做，Firefox 自己会这样做

```
document.location.href = "/controller/download_clip"; 
```

用javascript。

# templates - Resolution template for Tablet App

> ID：13805258
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:43:03.007
> 
> 标签：templates, resolution

I need help with a project. I need to create 2 templates for an aplicattion (10.1 inch tablet), but I just need to give to the developer de PSD templates of it, he will do the rest of the work (programing). So the question is, in what resolution I need to give him these templates? any "safe" area (for menu navigation)?, minimu size for buttons?any other tip? Thank you for your time.

Regards.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:26:13.337

No safe area. Buttons should be at least 44px on 44px. Resolution is different in different devices, check this out: [http://webdev-il.blogspot.co.il/2011/03/web-design-for-mobile-screen-sizes.html](http://webdev-il.blogspot.co.il/2011/03/web-design-for-mobile-screen-sizes.html)

Here is a great guide for mobile design: [http://mobile.smashingmagazine.com/2012/07/12/elements-mobile-user-experience/](http://mobile.smashingmagazine.com/2012/07/12/elements-mobile-user-experience/)

Good luck!

# entity-framework - 如何在实体框架模型优先设计器中将字段设置为索引

> ID：13805259
> 
> 赞同：1
> 
> 时间：2012-12-10T16:43:15.980
> 
> 标签：entity-framework, indexing, visual-studio-2012, edmx, ef-model-first

这在过去被问了很多，我知道在 EDMX 设计器中没有直接支持将字段设置为索引，但是由于 Visual Studio 2012 已经发布并且 Entity Framework 5 发布，它现在可能支持编辑设计器中的索引选项（没有理由不支持它），我查看了字段的属性，我能找到的只是将字段设置为实体键，但这并不能解决我的问题（我已经有一个实体键，出于性能原因，我只想在其他一些字段上创建索引）。

如何在 EDMX 设计器中将字段设置为索引列？（我知道如何在通过 SQL 查询之后执行此操作，但我需要一种更加模块化的方法，因为我将编辑数据库并重新创建它，而且我很可能会忘记每次通过 SQL 查询添加索引）。

谢谢，坎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:36:50.557

不幸的是，VS2012 在这方面的情况并没有改变。我鼓励您在[EF6 codeplex 站点上打开一个工作项](http://entityframework.codeplex.com/)

# objective-c - 您可以为 UIStepper 对象设置默认/当前值吗？

> ID：13805263
> 
> 赞同：1
> 
> 时间：2012-12-10T16:43:35.410
> 
> 标签：objective-c, ios, xcode, uistepper

我试图在 viewDidLoad 方法中做这样的事情：

```
 self.myStepper.value = 10.0; 
```

但它不起作用。我用谷歌搜索和搜索，但找不到任何答案。滑块看起来很容易，但你也可以用步进器来做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:57:54.310

步进器值需要在最小值和最大值的范围内，或者就像在对您的问题的评论中一样，它们会被推到最小值或最大值。始终查看 Apple 的参考文档。
参考：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html)

![在此处输入图像描述](../Images/25c3593b83da325b43291c42cff656d8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:02:54.217

我想通了，我只是忘记在 viewDidLoad 方法中初始化步进器。对不起大家！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T07:08:40.877

我们可以使用以下语法为步进器设置值，

[your_stepper_name setValue:your_stepper_value];

前任：

[步进设置值：10]；

# ruby-on-rails - 全日历时区

> ID：13805264
> 
> 赞同：0
> 
> 时间：2012-12-10T16:43:38.810
> 
> 标签：ruby-on-rails, fullcalendar

我有一个使用 Fullcalendar 的 RoR 应用程序 - 在 Heroku 上运行。日历视图将事件显示为上午 9 点 - 上午 10 点。当我查看时间列表时，我会得到下午 4 点到晚上 7 点。

它与时区有关吗？

我尝试将ignoreTimeZone设置为true，然后设置为false：

```
$(document).ready ->
  $('#calendar').fullCalendar
    editable: true,
    ignoreTimezone: true,
    header:
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay'
    defaultView: 'month',
    height: 500,
    slotMinutes: 30, 
```

谢谢您的帮助！

这是一个示例 - 数据库记录的 start_at 为 16:00（下午 4 点），但 Fullcallendar 视图显示它从上午 9 点开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:55:57.393

您的事件列表（index.html.erb 等）显示 UTC 时间，而 fullcalendar 显示浏览器检测到的时区中的时间。

为了解决这个问题，您应该将每个请求线程的时区设置为用户的时区。这应该有效：

在您的事件控制器中，添加以下内容：

```
before_filter set_time_zone

def set_time_zone
    (...)
end 
```

查看这篇文章中的其余代码： [https ://stackoverflow.com/a/942865/336806](https://stackoverflow.com/a/942865/336806)

我自己也在使用这个整洁的宝石：

[https://github.com/scottwater/detect_timezone_rails](https://github.com/scottwater/detect_timezone_rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:42:02.920

以下解决了该问题：

$ heroku 配置：添加 TZ=美国/丹佛

# c# - DataGrid 异步验证

> ID：13805266
> 
> 赞同：0
> 
> 时间：2012-12-10T16:43:43.970
> 
> 标签：c#, wpf, wpf-controls, wpfdatagrid

我想制作包含 DataGrid 控件并在 C# WPF DataGrid 中启用以下场景的 WPF 窗口：在 DataGrid 中加载数据，应用程序在后台验证数据（并行异步操作），当确定行有效时，其背景颜色变为绿色，否则为红色。对这种行为进行编程的最干净的方法是什么？DataGrid 和 WPF 中是否有任何内置功能可以进行这种验证？

编辑：现在我已经设法通过使用 RowStyle 来执行此操作，但这会使应用程序无响应，因为验证每一行都需要时间，所以我想让这个异步和并行。

```
<DataGrid.RowStyle>
    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="Background" Value="{Binding BgColor}">
        </Setter>
    </Style>
</DataGrid.RowStyle> 
```

EDIT2：这是进展：

```
<DataGrid.RowStyle>
    <Style TargetType="{x:Type DataGridRow}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=BgColor}" Value="DarkRed">
                <Setter Property="Background" Value="DarkRed"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</DataGrid.RowStyle> 
```

后面的代码如下所示：

```
Func<List<bool>> func = () => data.AsParallel().Select(x => File.Exists(x.FullPath)).ToList();
List<bool> res = null;
IAsyncResult ar = func.BeginInvoke(new AsyncCallback(x=>
{
    res = ((Func<List<bool>>)((AsyncResult)x).AsyncDelegate).EndInvoke(x);
    for (int i = 0; i < res.Count; ++i)
        if (!res[i])
            data[i].BgColor = Brushes.DarkRed;
}), null); 
```

剩下的问题是只有在重绘行时才会刷新行背景颜色（移出视图而不是再次进入视图）。有什么干净简单的方法来解决这个问题吗？

EDIT3：最后一切都完全按要求工作，EDIT2 中唯一缺少的是在数据源类中实现 INotifyPropertyChanged。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:51:02.063

最好的方法是使用`DataTrigger`的样式，`DataGridItems`并`bool?`在绑定到`DataTrigger`. 在`DataTrigger`你可以声明所有三个状态的视觉`Null, True, False`

有关更多信息`DataTrigger`，请查看[此处](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)。

**编辑**

嗯，有没有机会将突出显示功能放在`DataTemplate`? 我为实体的选择状态实现了突出显示。它按预期工作。

```
<DataTemplate.Triggers>
  <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem}}"
                  Value="true">
  <!-- Expand -->
  <DataTrigger.EnterActions>
    <BeginStoryboard>
      <Storyboard Storyboard.TargetName="CommandPanel">
        <DoubleAnimation Duration="0:0:0.200" Storyboard.TargetProperty="Opacity" To="1" />
        <DoubleAnimation Duration="0:0:0.150" Storyboard.TargetProperty="Height"
                            To="{StaticResource TargetHeightCommandPanel}" />
      </Storyboard>
    </BeginStoryboard>
  </DataTrigger.EnterActions>
  <!-- Collapse -->
  <DataTrigger.ExitActions>
      <BeginStoryboard>
        <Storyboard Storyboard.TargetName="CommandPanel">
          <DoubleAnimation Duration="0:0:0.100" Storyboard.TargetProperty="Opacity" To="0" />
          <DoubleAnimation Duration="0:0:0.150" Storyboard.TargetProperty="Height" To="0" />
        </Storyboard>
      </BeginStoryboard>
    </DataTrigger.ExitActions>
  </DataTrigger>
</DataTemplate.Triggers> 
```

顺便说一句，你听说过 MVVM 吗？

# qt - 作为 Qt Slot 的成员函数

> ID：13805271
> 
> 赞同：1
> 
> 时间：2012-12-10T16:43:58.180
> 
> 标签：qt, function, connect, member, slot

我需要将按钮连接到另一个类的成员函数。这里是类的代码：

```
 int g_switch_value = 0;
int filterInt = 0;
int lastfilterInt = -1;

void MoyenEtMedian::switch_callback(int position, void* object)
{   MoyenEtMedian* moyetmed = (MoyenEtMedian*) object;
    filterInt = position;
}

void MoyenEtMedian::exec(void)
{
    const char* name = "Filtres";
    IplImage* img = cvLoadImage( "image.png" );
    IplImage* out = cvCreateImage( cvGetSize(img), IPL_DEPTH_8U, 3 );
    cvNamedWindow( name, 1 );
    cvShowImage(name, out);

    // Create trackbar
    cvCreateTrackbar2( "Filtre", name, &g_switch_value, 1, &MoyenEtMedian::switch_callback, this );

    while( 1 ) {
        switch( filterInt ){
            case 0:
                cvSmooth( img, out, CV_BLUR, 7, 7 );
                break;
            case 1:
                cvSmooth( img, out, CV_MEDIAN, 7, 7 );
                break;
                    }
        if(filterInt != lastfilterInt){
            cvShowImage(name, out);
            lastfilterInt = filterInt;
        }
        if( cvWaitKey( 15 ) == 27 )
            break;
    }

    cvReleaseImage( &img );
    cvReleaseImage( &out );
    cvDestroyWindow( name ); 
```

}

这是 GUI 的 .cpp（使用 Qt Designer 创建）：

```
FenPrincipale::FenPrincipale(QWidget *parent) :
QWidget(parent),
ui(new Ui::FenPrincipale)
{

ui->setupUi(this);

QObject::connect(ui->bMoyMed,SIGNAL(clicked()),MoyenEtMedian,SLOT(MoyenEtMedian::exec()));

} 
```

我收到 MoyenEtMedian 的“未在此范围内声明”错误，即使直接传递它也是如此。

**更新**：#include 丢失。“未在此范围内声明”问题已解决。

但我还有一个：

“'，'标记之前的预期主要表达式”涉及：

```
QObject::connect(ui->bMoyMed,SIGNAL(clicked()),MoyenEtMedian,SLOT(exec())); 
```

我已经在 moyenetmedian.h 文件中声明了 SLOT：

```
 #ifndef MOYENETMEDIAN_H
 #define MOYENETMEDIAN_H
 #include "ui_fenprincipale.h"

 class MoyenEtMedian
 {Q_OBJECT
  public:
 MoyenEtMedian();
 static void switch_callback(int position, void*);

 public slots :
 void exec(void);

 };

 #endif // MOYENETMEDIAN_H 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:55:12.460

在 Qt 5.0 之前，连接的目的地必须在类声明中声明为 SLOT。

Qt 5.0 引入了一些新的连接语法。其中之一允许您将信号连接到任何成员函数：http: [//qt-project.org/doc/qt-5.0/qtcore/qobject.html#connect-4](http://qt-project.org/doc/qt-5.0/qtcore/qobject.html#connect-4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:44:47.993

您需要在`MoyenEtMedian`此处创建一个带有成员的示例的对象（或者，如果已经创建`FenPrincipale`对象，您可以将对象作为参数传递给构造函数）。`FenPrincipale`

```
FenPrincipale::FenPrincipale(QWidget *parent) :
        QWidget(parent),
        ui(new Ui::FenPrincipale)
{
    ui->setupUi(this);
    moyenEtMedian = new MoyenEtMedian();
    QObject::connect(ui->bMoyMed,SIGNAL(clicked()), moyenEtMedian, SLOT(exec()));
} 
```

在您的代码`MoyenEtMedian`中是一个类而不是一个对象。

# python - 不知道用 python-excel 读取数据文件

> ID：13805274
> 
> 赞同：0
> 
> 时间：2012-12-10T16:44:04.973
> 
> 标签：python, excel

我是一名学生，并没有很大的期限来做这项工作。所以问题是下一个。我有一部分代码：

```
import matplotlib.pyplot as plt
from pylab import *
import cmath
def sf(prompt):
""" """
    error_message = "Value must be integer and greater or equal than zero"
    while True:
        val = raw_input(prompt)
        try:
            val = float(val)
        except ValueError:
            print(error_message)
            continue
        if val <= 0:
            print(error_message)
            continue
        return val
def petrogen_elements():
    """Input and calculations the main parameters for
    pertogen elements"""
    print "Please enter Petrogen elements: \r"
    SiO2 = sf("SiO2: ")
    Al2O3= sf("Al2O3: ")
    Na2O = sf("Na2O: ")
    K2O =  sf("K2O: ")

    petro = [SiO2,TiO2,Al2O3,]                    

    Sum = sum(petro)

    Alcal = Na2O + K2O
    TypeA lcal= Na2O / K2O
    Ka= (Na2O + K2O)/ Al2O3 

    print  '-'*20, "\r Alcal: %s \r TypeAlcal: %s  \
     \r Ka: %s \r" % (Alcal, TypeAlcal,Ka,)

petrogen_elements() 
```

所以问题是下一个。我必须加载和读取 excel 文件并读取其中的所有数据。在该程序必须计算例如 Alcaline、Alcaline 类型等之后。Excel 文件只有这种结构

```
 1    2     3     4    5     
1 name1 SiO2 Al2O3 Na2O K2O
2        32  12    0.21 0.1
3 name2 SiO2 Al2O3 Na2O K2O
4        45    8   7.54  5
5 name3 SiO2 Al2O3 Na2O K2O
6\. … …. …. …
…
… 
```

所有 excel 文件只有 5 列和无限行。用户可以选择输入数据或导入excel文件。我已经完成的第一部分工作，但它仍然很重要最后我需要读取所有文件并计算值。

我会很感激一些建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:12:53.530

这个网站[http://www.python-excel.org/](http://www.python-excel.org/)列出了所有主要的 Python excel 相关库。我个人已经尝试过 XLRD - 第一个列出的 - 并发现它很棒，并且它有一个简洁的文档。

在埃及举行总统选举时，我还使用它做了一些工作，因为我们需要将大量数据导入到 mysql 数据库中。我已经在 Github 上发布了代码：[https ://github.com/mos3abof/egypt-elections-misc](https://github.com/mos3abof/egypt-elections-misc)

首先安装 xlrd

您将想出的脚本应该类似于：

```
from xlrd import *
## Opening the excel file
book = open_workbook('excel_file.xls')

## Reading the sheet we need
## Most probably the data will be on the first sheet, 
## otherwise this needs to be updated
our_sheet = book.sheet_by_index(0)

## Get the rows number
rowcount = our_sheet.nrows

## Looping over sheet rows
for i in range(rowcount -1):
    ## Get the data in the row
    our_row = our_sheet.row_slice(i+1)

    ## Access each row by index and do whatever you like with it
    ## Since you have 5 columns, the index will range from 0 - 4
    print our_row[0]
    print our_row[1]
    print our_row[2]
    print our_row[3]
    print our_row[4] 
```

您可以从我上面在此文件中提到的脚本中找到一个工作示例：[https ://github.com/mos3abof/egypt-elections-misc/blob/master/elections_import_excel.py](https://github.com/mos3abof/egypt-elections-misc/blob/master/elections_import_excel.py)

# javascript - Javascript 事件处理程序触发“错误：CS1026:) 预期”异常

> ID：13805280
> 
> 赞同：0
> 
> 时间：2012-12-10T16:44:28.733
> 
> 标签：javascript, c#, asp.net, controls, dom-events

我创建了一个动态控件表，其中每一行都是一对（DropDownList 和 TextBox），然后我在每个 DropDownList 选择的更改事件上关联了一个事件处理程序，因此我可以在其 TextBox 上进行更改，如下面的代码所示：

```
DropDownList TypeDDL = new DropDownList();
    TypeDDL.ID = "TypeDDL_" + rowN.ToString();
    TypeDDL.Width = 120;
    TypeDDL.Height = 20;
    InitializeTypeDDL(TypeDDL);
    TypeDDL.AutoPostBack = true;
    TypeDDL.Attributes.Add("onchange", "javascript:handleFieldsDDLEvent(this);");
    TextBox FieldsDDL = new TextBox();
    FieldsDDL.ID = "FieldsDDL_" + rowN.ToString();
    FieldsDDL.Width = 120;
    FieldsDDL.Height = 20;
    FieldsDDL.Attributes.Add("style", "float:right"); 
```

但是事件处理程序的 Javascript 代码会触发一个异常，告诉您：

```
function handleFieldsDDLEvent(e) {
    var elementId = (e.target || e.srcElement).id;
    var IdArray = elementId.Split('_');
    var ControlId = "Control_"+IdArray[1].toString();

    if (IdArray[1] != "") {
        var FieldsDDL = document.getElementById("<%="+ControlId +".ClientID%>"); 
        // error CS1026: ) expected 

    ValueTxtBx.style.display = "none";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:47:54.410

在你的 javascript 中，你有

```
var FieldsDDL = document.getElementById("<%="+ControlId +".ClientID%>"); 
```

这些`<%= ... %>`部件在服务器上呈现，因此不能在 javascript 中以这种方式完成。

# python - Numpy / Python：没有for循环的数组迭代

> ID：13805286
> 
> 赞同：2
> 
> 时间：2012-12-10T16:44:37.900
> 
> 标签：python, arrays, numpy, indexing, slice

所以这是另一个 n 维数组问题：我希望能够将 n 维数组中的每个值与其邻居进行比较。例如，如果 a 是二维数组，我希望能够检查：

```
a[y][x]==a[y+1][x] 
```

对于所有元素。所以基本上检查所有维度的所有邻居。现在我正在通过以下方式进行：

```
for x in range(1,a.shape[0]-1):
   do.something(a[x]) 
```

使用了数组的形状，这样我就不会在边缘遇到超出范围的索引。因此，如果我想在 nD 中对数组中的所有元素执行类似的操作，我确实需要 n 个 for 循环，这似乎是不整洁的。有没有办法通过切片来做到这一点？像 a==a[:,-1,:] 这样的东西还是我完全理解错了？有没有办法告诉切片在最后停止？或者是否会有另一种想法让事情以完全不同的方式工作？屏蔽数组？问候乔尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:46:11.587

就像是：

```
a = np.array([1,2,3,4,4,5])
a == np.roll(a,1) 
```

返回

```
array([False, False, False, False,  True, False], dtype=bool 
```

您也可以为更高的维度指定一个轴，尽管正如其他人所说，当值环绕时，您需要以某种方式处理边缘（正如您可以从名称中猜到的那样）

对于 2D 中更完整的示例：

```
# generate 2d data
a = np.array((np.random.rand(5,5)) * 10, dtype=np.uint8)

# check all neighbours
for ax in range(len(a.shape)):
    for i in [-1,1]:
        print a == np.roll(a, i, axis=ax) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:21:05.473

这也可能很有用，它将沿轴 = 1 将每个元素与以下元素进行比较。您显然可以调整轴或距离。诀窍是确保`==`运算符的两侧具有相同的形状。

```
a[:, :-1, :] == a[:, 1:, :] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:26:27.307

怎么样：

```
np.diff(a) != 0 
```

?

如果您需要另一个轴上的邻居，也许可以区分 np.swapaxes(a) 的结果并以某种方式将结果合并在一起？

# libgit2sharp - 为 .net 2.0 构建 libgit2sharp

> ID：13805290
> 
> 赞同：3
> 
> 时间：2012-12-10T16:45:01.557
> 
> 标签：libgit2sharp

有没有人成功使用 .NET 2.0 构建 libgit2sharp？我需要使库在 VS 2005 下工作，并且需要重写许多 3.5 功能。有谁知道在 VS 2005 下使用该库的更好方法，或者是否有 .net 2.0 库版本可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:09:54.533

> 是否有 .net 2.0 库版本可用？

没有针对 .Net 2.0 的官方 LibGit2Sharp 版本。当前仅支持 .Net 3.5 或 Mono 2.10。

> 有谁知道在 VS 2005 下工作的更好方法？

当前版本**[嵌入了轻量级兼容层](https://github.com/libgit2/libgit2sharp/tree/vNext/LibGit2Sharp/Core/Compat)**，以简化未来向 .Net 4.0 的迁移。

如果您致力于使其适用于 .Net 2.0，我建议您采用类似的隔离层，并且（*尽可能尝试*）避免更改库的代码。这将简化您项目中任何未来 LibGit2Sharp 更新的向后移植。

# wpf - 如何在模态对话框窗口上创建“应用”按钮

> ID：13805291
> 
> 赞同：0
> 
> 时间：2012-12-10T16:45:10.043
> 
> 标签：wpf, vb.net, user-interface, modal-dialog

我有一个 vb.net WPF 应用程序，它有一个模式对话框窗口，其中有一个“确定”、“取消”和“应用”按钮。“应用”按钮与“确定”按钮的作用相同，但是当单击“应用”时，模式对话框应保持打开状态。通常我喜欢调用 ShowDialog 来显示一个模态，但是当它返回时会导致模态关闭，所以我不能将它与具有“应用”按钮的模态一起使用。有人可以为我提供一个简单的解决方法吗？另一种方法是使用 .Show 显示模式对话框窗口，但在这种情况下，我不确定当用户单击其中一个按钮时如何正确返回值。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:50:35.760

对话框的关闭由用户单击“确定”按钮时执行的代码处理。因此，除了 Close() 调用和设置 DialogResult 的调用之外，您可以将所有代码移至一个函数。然后，您可以从 OK 处理程序（或 ICommand）和 Apply 处理程序（或 ICommand）中调用该函数。然后不要从 Apply 按钮调用 Close()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:50:03.147

带有“应用”按钮的对话框通常不是模态的，但一种方法是实例化您的对话框并为其提供 ViewModel，通过该视图模型`DataContext`，您的对话框数据可以在调用对话框的函数和对话框本身之间共享。然后，连接您的“应用”按钮以由模式对话框和您拥有的任何 ViewModel 代码处理，可能通过 ICommand 绑定。

让我们知道样本是否有用。

# perl - 在没有模块的服务器上运行 Perl 脚本

> ID：13805292
> 
> 赞同：1
> 
> 时间：2012-12-10T16:45:12.630
> 
> 标签：perl, package

我需要运行一个 perl 脚本来收集将在不同的 unix 服务器上部署和执行的系统信息。

现在我正在编写并测试它，我收到了这个错误。

> 在 @INC 中找不到 XML/DOM.pm（@INC 包含：/usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl / usr/lib64/perl5 /usr/share/perl5 .) 在 test.pl 第 7 行。 BEGIN 失败 - 编译在 test.pl 第 7 行中止。

所以我只是在使用 XML::DOM，它应该是 Perl 的一部分，但它不适用于 5.10.1 这个特定服务器上的这个版本。

无论如何，有没有一种方法可以创建和设计我的脚本并将模块打包到其中，同时保留 .pl 扩展名，这是该脚本的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:48:49.063

如果模块不需要编译库，您可以通过将模块中的文本复制到 .pl 文件中来包含它们。这是一个可怕的黑客，但它应该工作。

Perl 模块应该包含一个包声明，给出它们的名字。当你进入你的主程序部分时，你需要一个`package main;`你自己的声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:02:30.750

[您可以将模块放在任何目录中，然后通过pragma](http://perldoc.perl.org/lib.html)将该目录包含在搜索模块[中`lib`](http://perldoc.perl.org/lib.html)。请注意，模块`Foo::Bar`必须在文件`MY-ROOT/Foo/Bar.pm`中，并且可能不在`MY-ROOT/Bar.pm`，`MY-ROOT`您的模块目录在哪里。

```
use lib 'MY-ROOT';
use Foo::Bar; 
```

但是，这只适用于纯 Perl 模块，不支持 XS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:56:29.767

代替使用`lib`amon 建议的编译指示，考虑安装[perlbrew](http://perlbrew.pl/)和[cpanminus](https://metacpan.org/module/App%3a%3acpanminus)，它们旨在协同工作以添加和/或更新模块。

`perlbrew`旨在通过`#!/usr/bin/env perl`在您的 Perl 脚本中指定为解释器行，同时添加类似的行`source ~/perl5/perlbrew/etc/bashrc`来`${HOME}/.bash_profile`定位所需的本地 Perl 版本。

# linux - What's a .sh file?

> ID：13805295
> 
> 赞同：118
> 
> 时间：2012-12-10T16:45:26.857
> 
> 标签：linux, sh, download-manager

So I am not experienced in dealing with a plethora of file types, and I haven't been able to find much info on exactly what `.sh` files are. Here's what I'm trying to do:

I'm trying to download map data sets which are arranged in tiles that can be downloaded individually: [http://daymet.ornl.gov/gridded](http://daymet.ornl.gov/gridded)

In order to download a range of tiles at once, they say to download their script, which eventually leads to `daymet-nc-retrieval.sh`: [https://github.com/daymet/scripts/blob/master/Bash/daymet-nc-retrieval.sh](https://github.com/daymet/scripts/blob/master/Bash/daymet-nc-retrieval.sh)

So, what exactly am I supposed to do with this code? The website doesn't provide further instructions, assuming users know what to do with it. I'm guessing you're supposed to paste the code in to some other unmentioned application for a browser (using Chrome or Firefox in this case)? It almost looks like something that could be pasted in to Firefox/Greasemonkey, but not quite. Just by a quick Google on the file type I haven't been able to get heads or tails on it.

I'm sure there's a simple explanation on what to do with these files out there, but it seems to be buried in plenty of posts where people are already assuming you know what to do with these files. Anyone willing to just simply say what needs to be done from square one after getting to the page with the code to actually implementing it? Thanks.

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2015-08-28T04:42:54.733

f**What is a file with extension .sh?**

It is a [Bourne shell script](http://fileformats.archiveteam.org/wiki/Bourne_shell_script). They are used in many variations of UNIX-like operating systems. They have no "language" and are interpreted by your shell (interpreter of terminal commands) or if the first line is in the form

```
#!/path/to/interpreter 
```

they will use that particular interpreter. Your file has the first line:

```
#!/bin/bash 
```

and that means that it uses Bourne Again Shell, so called bash. It is for all practical purposes a replacement for good old sh.

Depending upon the interpreter you will have different language in which the file is written.

Keep in mind, that in UNIX world, it is not the extension of the file that determines what the file is (see How to execute a shell script).

If you come from the world of DOS/Windows, you will be familiar with files that have .bat or .cmd extensions (batch files). They are not similar in content, but are akin in design.

**How to execute a shell script**

Unlike some unsafe operating systems, *nix does not rely exclusively on extensions to determine what to do with a file. Permissions are also used. This means that if you attempt to run the shell script after downloading it, it will be the same as trying to "run" any text file. The ".sh" extension is there only for your convenience to recognize that file.

You will need to make the file executable. Let's assume that you have downloaded your file as `file.sh`, you can then run in your terminal:

```
chmod +x file.sh 
```

`chmod` is a command for changing file's permissions, `+x` sets execute permissions (in this case for everybody) and finally you have your file name.

You can also do it in GUI. Most of the time you can right click on the file and select properties, in XUbuntu the permissions options look like this:

[![File permissions in XUbuntu](../Images/5f63c63960c3ea08c5bf2ad29d963e8a.png)](https://i.stack.imgur.com/WiI5J.png)

If you do not wish to change the permissions. You can also force the shell to run the command. In the terminal you can run:

```
bash file.sh 
```

The shell should be the same as in the first line of your script.

**How safe is it?**

You may find it weird that you must perform another task manually in order to execute a file. But this is partially because of strong need for security.

Basically when you download and run a bash script, it is the same thing as somebody telling you "run all these commands in sequence on your computer, I promise that the results will be good and safe". Ask yourself if you trust the party that has supplied this file, ask yourself if you are sure that have downloaded the file from the same place as you thought, maybe even have a glance inside to see if something looks out of place (although that requires that you know something about *nix commands and bash programming).

Unfortunately apart from the warning above I cannot give a step-by-step description of what you should do to prevent evil things from happening with your computer; so just keep in mind that any time you get and run an executable file from someone you're actually saying, "Sure, you can use my computer to do something".

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-12-10T16:49:06.367

If you open your second link in a browser you'll see the source code:

```
#!/bin/bash
# Script to download individual .nc files from the ORNL
# Daymet server at: http://daymet.ornl.gov 
```

[...]

```
# For ranges use {start..end}
# for individul vaules, use: 1 2 3 4 
for year in {2002..2003}
do
   for tile in {1159..1160}
        do wget --limit-rate=3m http://daymet.ornl.gov/thredds/fileServer/allcf/${year}/${tile}_${year}/vp.nc -O ${tile}_${year}_vp.nc
        # An example using curl instead of wget
    #do curl --limit-rate 3M -o ${tile}_${year}_vp.nc http://daymet.ornl.gov/thredds/fileServer/allcf/${year}/${tile}_${year}/vp.nc
     done
done 
```

So it's a bash script. Got Linux?

* * *

In any case, the script is nothing but a series of HTTP retrievals. Both wget and curl are available for most operating systems and almost all language have HTTP libraries so it's fairly trivial to rewrite in any other technology. There're also some Windows ports of bash itself (git includes one). Last but not least, Windows 10 now has [native support for Linux binaries](https://docs.microsoft.com/en-us/windows/wsl/install-win10).

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-12-10T16:48:13.350

`sh` files are unix (linux) shell executables files, they are the equivalent (but much more powerful) of `bat` files on windows.

So you need to run it from a linux console, just typing its name the same you do with bat files on windows.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-10T16:49:27.770

Typically a .sh file is a shell script which you can execute in a terminal. Specifically, the script you mentioned is a bash script, which you can see if you open the file and look in the first line of the file, which is called the shebang or magic line.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-28T03:58:07.343

I know this is an old question and I probably won't help, but many Linux distributions(e.g., ubuntu) have a "Live cd/usb" function, so if you really need to run this script, you could try booting your computer into Linux. Just burn a .iso to a flash drive (here's how [http://goo.gl/U1wLYA](http://goo.gl/U1wLYA)), start your computer with the drive plugged in, and press the F key for boot menu. If you choose "...USB...", you will boot into the OS you just put on the drive.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-06-01T16:52:20.433

How do I run .sh scripts?

Give execute permission to your script:

chmod +x /path/to/yourscript.sh And to run your script:

/path/to/yourscript.sh Since . refers to the current directory: if yourscript.sh is in the current directory, you can simplify this to:

./yourscript.sh

or with GUI

[![enter image description here](../Images/04ba0eeca86da79ccf896c5d3034d916.png)](https://i.stack.imgur.com/fxP4R.png) [![enter image description here](../Images/ca45f9f5e2ad6d26f5c0a6c4292ea9bd.png)](https://i.stack.imgur.com/Wo3KL.png)

[https://askubuntu.com/questions/38661/how-do-i-run-sh-scripts/38666#38666](https://askubuntu.com/questions/38661/how-do-i-run-sh-scripts/38666#38666)

[https://www.cyberciti.biz/faq/run-execute-sh-shell-script/](https://www.cyberciti.biz/faq/run-execute-sh-shell-script/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-02-12T09:46:06.703

open the location in terminal then type these commands 1\. chmod +x filename.sh 2\. ./filename.sh that's it

# jquery - 一页网站 - 将 html 文件包含在“主”html 中

> ID：13805296
> 
> 赞同：0
> 
> 时间：2012-12-10T16:45:31.553
> 
> 标签：jquery

我正在尝试使用 jQuery 制作一个单页网站。所以我想有一个主 index.html 文件，其中包含所有 css/jquery 文件，并在该 index.html 中，一个 div( div id="page" ) 我将其他页面中的所有 html 放在其中。

然后我遇到了以下问题：如果我想要包含在 index.html 中的“子页面”之一需要 javascript，我需要将所有脚本包含到该子页面中，而不是 index.html 中。这是一个大问题，因为我不想在每个“子页面”中一遍又一遍地包含相同的脚本。

我已经使用 $.get 函数来执行此操作，然后使用 $('...').html(...) 我在 Google 上搜索了很多解决方案，但找不到。有没有人知道我该怎么做？

/** 编辑 **/ 为了更好地理解：我正在搜索我的菜单 ul li 并从 href 中获取所有链接并将它们放入一个数组中。之后对于该数组中的每个链接，我得到了 html 代码和将其存储在变量中。

```
    allMenuLinks = ['关于'，'画廊'等]

    howManyLinksInMenu = allMenuLinks.length;
    $.each(allMenuLinks, function(index, page) {
       $.get("pages/" + page + ".html", function(content) {
           pagesContent[page] = 内容；
           howManyLinksInMenu = howManyLinksInMenu - 1;
           howManyLinksInMenu == 0 ？更改页面（）：''；
       }, "html")
    })

在 changePage 我有 $('#page').html(pagesContent[page]) 和一些动画。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:47:28.777

您正在寻找的是一个模板引擎，例如：

[http://www.smarty.net/](http://www.smarty.net/)

# javascript - Javascript 按钮堆叠、问卷调查

> ID：13805297
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:45:33.973
> 
> 标签：javascript, html

所以我想创建一个问卷调查之类的东西。但我希望我的布局与大多数布局略有不同。所以，我想有一个问题框，它下面有多个选择（也是框（问答框所有图像））。到目前为止，我有一个问题（有答案）正在工作并在网站的其他地方输出答案。

我需要帮助的是，一旦我单击答案框，我希望出现一个新问题和多项选择答案来代替第一个问题。

以下是我想法的基本原理：[http ://www.sn0wy0wl.com/quest.html](http://www.sn0wy0wl.com/quest.html)

我还希望能够存储这些答案，以便以后能够调用它们（以确认答案），尽管这可能是另一天的故事。

任何投入将不胜感激，

法规；sn0wy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:10:38.413

我会用它查看[http://knockoutjs.com/](http://knockoutjs.com/)，您可以创建一个视图模型来保存问题，以及可能答案的可观察数组，并将视图中的单击绑定到更改问题。有点像：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Knockout Example</title>
        <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
        <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.1.0.js"></script>
        <script>
            function QuestionnaireViewModel() {
                var self = this;
                var currentQuestionIndex = 0;

                //Some dummy model data, probably want to load this from an ajax call
                var questions = [
                    {
                        caption: 'How do you like Knockout.js?',
                        answers: [
                            { caption: 'It sucks!' },
                            { caption: 'It rules!' }
                        ]
                    },
                    {
                        caption: 'But seriously, it is pretty cool right?',
                        answers: [
                            { caption: 'Ok, it is pretty awsome' },
                            { caption: 'I told you man, it rocks!' }
                        ]
                    }
                ];

                //Setup observable properties
                self.currentQuestion = new ko.observable(questions[0]);
                self.progress = new ko.observableArray();

                //Add a command
                self.selectQuestion = function (answer) {
                    self.progress.push({ question: questions[currentQuestionIndex].caption, answer: answer.caption });

                    currentQuestionIndex++;
                    if (currentQuestionIndex < questions.length) {
                        self.currentQuestion(questions[currentQuestionIndex]);
                    }
                    else {
                        alert('Your done');
                    }
                };
            };

            $(document).ready(function () {
                //Apply bindings
                ko.applyBindings(new QuestionnaireViewModel());
            });
        </script>

        <div data-bind="with:currentQuestion">
            <h1 data-bind="text:caption"></h1>
            <ul data-bind="foreach:answers">
                <li data-bind="text:caption, click:$root.selectQuestion"></li>
            </ul>
        </div>
        <div data-bind="foreach:progress">
            <div>
                For question 
                <b data-bind="text:question"></b>
                you selected 
                <b data-bind="text:answer"></b>
            </div>
        </div>
    </head>
</html> 
```

显然，这需要一些重构和整理，但希望你能理解。淘汰赛网站也有一些很棒的文档和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:53:21.623

这是一个多方面的问题。

> 我需要帮助的是，一旦我单击答案框，我希望出现一个新问题和多项选择答案来代替第一个问题。

如果没有数据库检索问题，您可以使用带有 javascript 的隐藏/显示属性来提供流程。

使用数据库，您将需要中间层来执行请求以检索问题集。

> 我还希望能够存储这些答案，以便以后能够调用它们（以确认答案），尽管这可能是另一天的故事。

没有数据库，您可以使用会话。

使用数据库，您将需要设置用户、问题、答案表之类的东西。

# blackberry-10 - 条形码阅读器示例应用程序

> ID：13805299
> 
> 赞同：2
> 
> 时间：2012-12-10T16:45:36.047
> 
> 标签：blackberry-10

我正在使用 cascades 示例中提供的条形码阅读器示例应用程序将 QRCode 扫描仪嵌入到我的应用程序中。

就目前而言，样本很棒，但我希望扫描仪在用户导航到我的屏幕后立即打开，并且我想摆脱样本中的打开滑块图像。

首先，我尝试删除图像及其动画并添加动作：

```
onCreationCompleted: {
    camera.open()
} 
```

到页面。这会按预期完美打开相机，但由于某种原因，bacrode 只是不扫描。

所以，我倒退了一步，这次我只是将代码原样放入，并将代码更改为：

```
onCreationCompleted: {
    startupAnimation.play()
} 
```

正如预期的那样，屏幕打开，播放动画，但仍然无法读取条形码，但是，如果我再次调用动画（通过点击屏幕），动画再次播放并且扫描仪读取条形码没有任何问题。

我能想到的只是这是一个时间问题，在创建屏幕后我需要某种延迟才能将相机作为条形码阅读器启动？

有谁能帮忙吗？

谢谢，

道格拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:33:51.090

要在应用程序启动时立即进行扫描，您需要确保实际设置并初始化了相机。

基本上，在 onCreationComplete 中，打开相机。在 onCameraOpened 中，启动取景器。在 onViewfinderStarted 中，将条码检测器摄像头设置为摄像头。

# php - 警告：不能在 include() 中使用标量值作为数组

> ID：13805301
> 
> 赞同：3
> 
> 时间：2012-12-10T16:45:40.337
> 
> 标签：php, drupal, drupal-7, drupal-theming

为了在我的站点中设置特定页面的主题，我创建了一个名为 node--2.tpl.php 的文件。根据我阅读的其他一些教程，我将其添加到我的 template.php 文件中：

```
function mtheme_preprocess_node(&$vars) {
  if (request_path() == 'node/2') {
    $vars['theme_hook_suggestions'][] = 'node__2';
  }
} 
```

在这个页面上，我希望渲染名为schools_landing 的区域。因此，node--2.tpl.php 看起来像这样，仅此而已：

```
<?php print render($page['schools_landing']); ?> 
```

这样做之后，我开始在管理员覆盖的顶部看到以下错误消息：

```
Warning: Cannot use a scalar value as an array in include() (line 1 of /home/something/public_html/project/sites/all/themes/mtheme/node--2.tpl.php). 
```

此外，我可以在 node--2.tpl.php 文件中写入文本，它显示得很好（而不是默认的页面内容），但我根本无法在该区域内渲染块。如果我为schools_landing 块分配一个块，我在页面上什么也看不到。

1.  这是在特定页面上定义自定义内容的正确过程吗？
2.  如何修复导致标量值作为数组错误消息的错误？
3.  如何让我的块开始在该区域中渲染？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:12:03.150

在[节点模板](http://api.drupal.org/api/drupal/modules!node!node.tpl.php/7)中，`$page`是一个布尔值，而不是一个数组。这就是您收到该错误的原因。
[template_preprocess_node()](http://api.drupal.org/api/drupal/modules!node!node.module/function/template_preprocess_node/7)使用以下代码设置它。

```
$variables['page']      = $variables['view_mode'] == 'full' && node_is_page($node); 
```

它是`hook_preprocess_page()`获取`$page`具有您期望值的变量。
[template_preprocess_page()](http://api.drupal.org/api/drupal/includes!theme.inc/function/template_preprocess_page/7)包含以下代码。

```
 foreach (system_region_list($GLOBALS['theme']) as $region_key => $region_name) {
    if (!isset($variables['page'][$region_key])) {
      $variables['page'][$region_key] = array();
    }
  } 
```

[page.tpl.php](http://api.drupal.org/api/drupal/modules!system!page.tpl.php/7)描述`$page`为：

> 地区：
> 
> *   `$page['help']`：动态帮助文本，主要用于管理页面。
> *   `$page['highlighted']`：突出显示的内容区域的项目。
> *   `$page['content']`：当前页面的主要内容。
> *   `$page['sidebar_first']`：第一个侧边栏的项目。
> *   `$page['sidebar_second']`：第二个侧边栏的项目。
> *   `$page['header']`: 标题区域的项目。
> *   `$page['footer']`: 页脚区域的项目。

额外的区域可以从主题中实现。

作为旁注，`template_preprocess_node()`已经建议了以下模板名称。

```
 $variables['theme_hook_suggestions'][] = 'node__' . $node->type;
  $variables['theme_hook_suggestions'][] = 'node__' . $node->nid; 
```

无需为您的主题或自定义模块推荐它们。

# ios - 从命令行为 armv7、armv7s 构建最小的 c++

> ID：13805302
> 
> 赞同：1
> 
> 时间：2012-12-10T16:45:42.037
> 
> 标签：ios, build

我有一个非常简单的源文件**foo.cpp**：

```
#include <stdio.h>
int foo() {
    printf("foo\n");
    return 11;
} 
```

我想用架构 armv7构建一个对象**foo.o。**我想完全来自命令行（即没有 Xcode 项目）。首先我试过：

```
g++ -arch armv7 -c foo.cpp 
```

我收到的错误是：

```
llvm-g++-4.2: error trying to exec '/usr/bin/../llvm-gcc-4.2/bin/arm-apple-darwin11-llvm-g++-4.2': execvp: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:45:42.037

```
IOSROOT=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer
$IOSROOT/usr/bin/g++ -c foo.cpp -arch armv7s -isysroot $IOSROOT/SDKs/iPhoneOS6.0.sdk 
```

# objective-c - 在方法定义和实现中使用宏

> ID：13805308
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:46:02.507
> 
> 标签：objective-c, ios

我想知道在 iOS 的一个项目中为多个目标开发时，您使用的最佳实践是什么。我在 .h 中有这样的东西：

（target1 和 targetX 是预处理器宏）

```
#if target1
-(void)logOut:(UIButton*)sender;
#endif 
```

有时我正在使用这样的东西（在.m中）：

```
#if targetX
-(void)logOut:(UIButton*)sender{
.....
}
#endif 
```

我做对了吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:54:10.403

对您的问题的简短回答是肯定的，只要一个目标定义`-Dtarget1=1`和另一个目标定义`-DtargetX=1`，那么您就正确地执行了此操作。

如果您向一个目标添加了额外的编译器标志，例如：

```
-Dtarget1=1 
```

然后里面的代码：

```
#if target1
    // code specific to target1
#endif 
```

将成为已编译应用程序的一部分。

如果你有国旗：

```
-Dtarget1=0 
```

然后里面的任何东西：

```
#if target1
    // code specific to target1
#endif 
```

不会是已编译应用程序的一部分。

使用多个目标时，您可以执行以下操作：

```
#if target1
    // code specific to target1
#elif targetX
    // code specific to targetX
#endif 
```

# maven - 将 Maven 依赖项添加到 Eclipse 插件项目

> ID：13805312
> 
> 赞同：4
> 
> 时间：2012-12-10T16:46:18.573
> 
> 标签：maven, eclipse-plugin, pom.xml, plugin.xml

只是一个简单的问题：我需要将 Maven 依赖项添加到 Eclipse 插件项目中。该项目没有 POM 文件，因此我将其转换为 Maven 文件。现在我有 plugin.xml 文件和 pom.xml 文件。POM 包含我需要满足的依赖，但它被忽略了；我的意思是，我无法解析引用该导入的源代码中的导入。

你能帮助我吗？泰

我阅读了关于 Tycho 插件的信息，但在线配置不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:32:08.687

如果我没看错，您刚刚开始向项目添加 Maven 依赖项，但没有可用于 Eclipse 验证您的代码的依赖项。

添加全新的依赖项后，您需要启动 Maven 构建，以便 Maven 可以将其添加到本地缓存存储库。Maven 构建完成后，Eclipse 应该正确识别您的导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-02T14:43:56.793

您可能想要检查您正在寻找的依赖项是否在[Eclipse Orbit](https://www.eclipse.org/orbit/)中可用。

Orbit 项目基本上是一个库的存储库，使它们可用于 Eclipse 插件开发。Orbit 库中特别好的地方在于它们还提供了源代码。因此，可以查看实现并获得适当的 JavaDoc 等。

**例子**

可以使用更新站点找到 com.google.gson 库

`https://download.eclipse.org/tools/orbit/downloads/drops/R20190602212107/repository`

因此，该部分`R20190602212107`是指您在[项目的下载页面上](https://download.eclipse.org/tools/orbit/downloads/)找到的 Orbit 构建名称。

# sql - 如何在带有 £ 符号的数字列上为 SQL 查询添加前缀

> ID：13805315
> 
> 赞同：2
> 
> 时间：2012-12-10T16:46:28.873
> 
> 标签：sql, oracle, symbols, oracle-apex

> **可能重复：**
> [将货币符号 £、$ 添加到某些字段 ORACLE](https://stackoverflow.com/questions/2717686/add-currency-sign-to-certain-fields-oracle)

我有一个代表钱的值表，我想在 SQL 查询输出前加上一个 £ 符号。

反正有这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:52:54.973

你可以

```
SELECT to_char( column_name, '£999,999,999.99' ) 
  FROM table_name 
```

假设您要对货币符号和格式进行硬编码。如果要使用会话的 NLS 设置来确定适当的货币符号和分组符号

```
SELECT to_char( column_name, 'L999G999G999D99' ) 
  FROM table_name 
```

打破它

*   L 是当地货币符号
*   G 是分组符号（在美国是逗号）
*   D 是小数点分隔符（美国的句点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:49:28.043

使用类似的东西：`to_char(money, '£9999.00')`.

详情[在这里](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions181.htm)。

# php - jQuery 显示/隐藏 div 和表单提交

> ID：13805316
> 
> 赞同：0
> 
> 时间：2012-12-10T16:46:31.120
> 
> 标签：php, jquery

如果复选框 (div id="foldstate") 被标记，简单的表单将显示附加字段 (div class="fold")。

单击复选框会按预期隐藏/显示其他字段。

选中复选框，填写其他字段并提交（预览）使用 php 输入的表单以进行某些服务器端验证显示复选框已选中，但折叠仍然存在`<div class="fold" style="display: none;">`

我的错误在哪里？

我的 jQuery 代码：

```
$(document).ready(function() {
    if ($("#foldstate").not(":checked")) {
        $(".fold").css("display","none");
    }
    $("#foldstate").click(function(){
        if ($("#foldstate").is(":checked")) {
            $(".fold").show("fast");
        }
        else {
            $(".fold").hide("fast");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:18:36.450

当您的复选框未选中时，.not() 函数将返回 JQuery 对象的集合或空集合。在这两种情况下，您的代码都将评估为 true，因此您始终会得到 display:none。

由于您按 ID 销售，我建议您替换此块：

```
if ($("#foldstate").not(":checked")) {
    $(".fold").css("display","none");
} 
```

这样：

```
if (!$("#foldstate").attr("checked")) {
    $(".fold").css("display","none");
} 
```

# jquery - 将城市匹配到解析 JSON 的 div

> ID：13805318
> 
> 赞同：0
> 
> 时间：2012-12-10T16:46:35.097
> 
> 标签：jquery, json, parsing

我有一个 JSON 文件，它将提供 15 个城市的数据，如下所示：

```
"New York": {
    "total": 121,
    "shameless": 16,
    "honorable": 105,
    "index": 0.132
} 
```

我对每个城市都有一个 div：

```
<p class="pin newyork" id="New-York">
    New York
</p> 
```

我需要解析 JSON 文件并确定它是哪个城市，在本例中是纽约，然后获取与该城市关联的“索引”。

如果索引小于 0.33，它应该 addClass “几乎”，如果它小于 0.66 addClass “相当”，任何高于 0.66 addClass “完全”。应该是这样的：

```
var shamelessIndex;

if (shamelessIndex < .33 ){
    $(".shamerating").addClass("barely");
}
else if (shamelessIndex < .66){
    $(".shamerating").addClass("fairly");
}
else {
    $(".shamerating").addClass("totally");
} 
```

我有一个提取数据的函数，我只是不确定如何解析它以将城市与 DIV 匹配？

```
function dataStore(dataObj) {
    $.each(dataObj, function(key, value) {
        console.log(key);
        console.log(value.index);
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:50:18.523

假设您只是用连字符替换城市名称中的空格来获得`id`，试试这个：

```
$.each(dataObj, function(key, value) {
    var $city = $("#" + key.replace(' ', '-'));
    var shamelessIndex = value.shameless;
    // do stuff with shameless index here...
}); 
```

# xcode - 在两点之间移动 UIButton 的正确方法？

> ID：13805320
> 
> 赞同：2
> 
> 时间：2012-12-10T16:46:41.383
> 
> 标签：xcode, uibutton, interpolation

尝试制作一个小型点击游戏，其中您有一个正方形网格，需要以不同的顺序点击它们。偶尔这些方块会互相交换位置。

我认为我需要将每个正方形的位置放入一个数组中。然后，当需要移动时，从当前位置转到从数组中随机选择的位置，然后在数组中删除该位置，这样我就不会在同一个位置获得多个按钮。

不幸的是，我什至无法让 UIButtons 移动，更不用说在两个位置之间进行插值了。

目前这将移动一个按钮：

```
-(IBAction)button:(id)sender
{
    button.center = CGPointMake(200, 200);
} 
```

但我不希望它那样工作，我希望它像这样工作，但它不起作用：

```
if (allButtonsPressed == YES)
{
    button.center = CGPointMake(200, 200);
} 
```

如果像这样放置它甚至不会移动：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    button.center = CGPointMake(200, 200);
} 
```

为清楚起见，按钮是通过 Interface Builder 添加的，所有这些情况在做其他事情时都有效，所以我猜 UIButtons 需要以特定方式移动/动画？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T16:56:36.843

viewDidLoad 发生在视图可见之前，因此它只会移动而不是动画。您可以尝试将其放入 viewDidAppear 方法中。

如果您希望它们动画而不是闪烁到位，您可以像这样将事物包装在 UIView 动画块中。

```
[UIView animateWithDuration:0.5 animations:^{
    button.center = CGPointMake(200.0, 200.0);
}]; 
```

由于您使用的是界面构建器，我假设您使用属性来跟踪按钮。如果您只使用几个设置按钮，这可以工作，但我希望在游戏中这些按钮会发生变化，因此您可能想要移动到代码或至少使用 IBOutletCollections 来跟踪按钮。

**斯威夫特 3.0**

```
UIView.animate(withDuration: 0.5) { [weak self] in
    self?.button.center = CGPoint(x: 200, y: 200)
} 
```

# iphone - 如何在 Youtube 应用程序中将按钮链接到 Youtube 用户

> ID：13805322
> 
> 赞同：0
> 
> 时间：2012-12-10T16:46:47.717
> 
> 标签：iphone, ios, youtube

我发现此代码可以链接到 youtube 应用程序中的特定视频，但是如何向 youtube 用户显示？

我使用此代码显示特定视频：

```
NSString *stringURL = @"http://www.youtube.com/watch?v=WZH30T99MaM";
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

[http://www.youtube.com/user/username](http://www.youtube.com/user/username)

和

[http://www.youtube.com/channel/channelname+](http://www.youtube.com/channel/channelname+some)一些变量

有谁知道如何做到这一点？

如果用户没有在 ios6 之后可用的 youtube 应用程序怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:54:25.427

应用程序内所有可能的链接都显示[在这里](http://krish.codeworth.com/development/ios-development-2/iphone-2/url-schemes/)。URL 链接不支持从您的 YouTube 应用程序中打开特定频道。

# visual-studio-2010 - 使用 Microsoft Visual Studio 2010 Performance Profiler 进行分析时如何获得一致的结果

> ID：13805323
> 
> 赞同：0
> 
> 时间：2012-12-10T16:46:48.793
> 
> 标签：visual-studio-2010, visual-c++, profiler

这是我第一次使用 Microsoft Visual Studio 2010 Performance Profiler 进行分析。应用程序完成后，我使用 CPU Sampling 方法进行分析并创建性能部分。之后我启动分析。我发现的问题是，每次我分析同一个程序时，我都会得到不同的示例帐户。下图可以说明我的问题： ![在此处输入图像描述](../Images/4e206332c67ac92abd34bed31d999597.png) 上图中`baseline file`和`comparison file`来自同一个应用程序。我希望这两个配置文件应该是相同的，但实际上它们不是。我想知道我能做些什么来获得一致的结果。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:18:41.583

当您使用采样方法来分析您的程序时，这是不可能的。它通过定期中断您的程序并找出它在做什么来工作。不可避免地，当您重复配置文件时，它会在完全相同的位置可靠地中断您的程序的可能性非常低。您将获得的数据仅具有统计相关性，它是一个*估计值*，对在您的代码中查找热点很有用。当您进行分析时，您应该始终首先检查这一点。

您将需要检测方法来获取有关函数执行次数的硬数字。分析器现在可以可靠地记录输入函数的时间。最大的问题是它大大减慢了你的程序。

[此MSDN 库文章](http://msdn.microsoft.com/en-us/library/dd264994.aspx)中提供了有关这些分析方法的背景信息。

# css - 在 SASS/SCSS 中过度嵌套选择器在实践中有多糟糕？

> ID：13805324
> 
> 赞同：19
> 
> 时间：2012-12-10T16:46:52.850
> 
> 标签：css, performance, css-selectors, sass

我有一个 .scss 文件，其中包含以下内容：

```
nav {
  font-size: 0;
  ul {
    margin: $padding/3;
  }
  li {
    z-index: 10;
    position: relative;
    display: inline-block;
    font-size: $fontSize;
    /**
     * If we want separated, Uncomment!

    margin: $padding/3;
    @include border-radius(5px);

    */
    &:first-child {
      @include border-radius(0 5px 5px 0);
    }
    &:last-child {
      @include border-radius(5px 0 0 5px);
    }
    padding: $padding/3 0;
    @include background(linear-gradient(lighten($textColor, 10%), $textColor));
    border: 1px solid lighten($textColor, 20%);
    a {
      color: $brightColor;
      padding: $padding/3 $padding;
      font-weight: bold;
      text-decoration: none;
      @include transition(.2s all);

    }
    //Nested menues
    ul {
      opacity: 0;
      //display: none;
      position: absolute;
      margin: 0;
      top: 0;
      left: 0;
      right: 0;
      z-index: 5;
      pointer-events: none;
      @include transition(.2s all);
      li {
        @include background(linear-gradient(darken($brightColor, 10%), darken($brightColor, 30%)));
        display: block;
        border: 1px solid lighten($textColor, 20%);
        &:first-child {
          @include border-radius(0);
        }
        &:last-child {
          @include border-radius(0 0 5px 5px);
        }
        a {
          color: $textColor;
        }
      }
    }
    &:hover ul {
      pointer-events: all;
      top: 100%;
      opacity: 1;
      //display: block;
    }
  }
} 
```

它在实践中有多糟糕/有害？我听过很多关于“不要超过 3 个嵌套选择器！”的讨论。但它真的有害吗？它对页面加载有任何明显的影响吗？我所做的基准测试说不，但我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-11T15:07:12.553

这取决于页面加载后将对 DOM 和样式进行多少动态操作。问题不是页面加载（大部分）或初始布局上的[慢速选择器](http://calendar.perfplanet.com/2011/css-selector-performance-has-changed-for-the-better/)，而是重绘/重排。

现在，Steve Souders 说，[在一般网站上，这根本不是一个真正的问题](http://www.stevesouders.com/blog/2009/03/10/performance-impact-of-css-selectors/)。但是，在 Web 应用程序或高度交互的网站上，性能不佳的 CSS 规则[会使您的重绘速度](http://dev.opera.com/articles/view/efficient-javascript/?page=3#reflow)比必须的慢。如果你有很多重绘...

[Nicole Sullivan](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)、[Paul Irish](http://paulirish.com/2011/dom-html5-css3-performance/)和[Steve Souders](http://www.stevesouders.com/blog/2009/06/18/simplifying-css-selectors/)等专家介绍了 CSS 与 JavaScript 交互的方式以及如何编写高性能的 CSS 选择器。这不仅仅是深度（不同的选择器有不同的性能），但一个好的经验法则是限制深度和复杂性，以免自己陷入困境——但不是那么多的性能问题，请继续阅读。

然而，正如[jankfree.org 所](http://jankfree.org/)指出的，与其说是后代或特定选择器，不如说是[某些上下文(html5rocks.com) 中的](http://www.html5rocks.com/en/tutorials/speed/css-paint-times/)[某些**属性**](http://www.html5rocks.com/en/tutorials/speed/css-paint-times/)使绘制变得昂贵。我认为长或复杂的*选择器*更像是[一个可维护性问题](http://nicolasgallagher.com/about-html-semantics-front-end-architecture/)（Nicolas Gallagher）而不是性能问题——请记住，可维护性与性能相互作用。高度可维护的代码可以更快地迭代并且更容易调试（帮助您发现和修复性能问题）。

现在，关于 Sass 优化。是的，Sass 可以优化你的 CSS。但它不能优化你的***选择器***。4 级嵌套块将作为 4 级嵌套选择器输出。Sass 无法在不使您的 CSS 无法正常工作的情况下更改它。作为作者，你必须优化你编写 Sass 的方式来优化你的输出。我个人仅以有限的方式使用嵌套（对我来说，Sass 中的一个杀手级功能是使用`@extend`和占位符组合样式）。[但是，如果你真的喜欢嵌套，你可以使用Sass 父选择器引用](http://thesassway.com/intermediate/referencing-parent-selectors-using-ampersand)（或更新的[@at-root](https://github.com/nex3/sass/issues/774) ）在某种程度上调整你的输出。

据我所知，Sass 和 Compass 都没有内置工具来分析选择器并发出警告。[使用AST](http://alexsexton.com/talks/abusing-preprocessor-asts/)创建一个工具来做到这一点是可能的（设置最大深度并让你的预处理器警告你）。更直接地说，[Google Page Speed 确实](https://developers.google.com/speed/pagespeed/)具有提供一些信息的现有功能。 [SCSS Lint](https://github.com/brigade/scss-lint)有一个嵌套选项。还有[CSS Lint](http://csslint.net/)。`on_stylesheet_saved`（如果您还没有使用 Grunt 或 Gulp 之类的东西，这些理论上可以添加到您的 Compass 配置中运行）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-13T09:31:13.307

想想你想如何编写实际的 css 选择器。不要仅仅因为它是元素的子元素就嵌套所有内容。

```
nav li ul li a { 
    /* over specific, confusing */
}
.sub-menu a {
    /* add a class to nested menus */
} 
```

一旦你开始链接这么多选择器，覆盖就变得很痛苦，并且可能导致特异性问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-10T17:56:26.217

Don't nest CSS. We feel comfortable nesting css because that closely mirrors what we do in HTML. Nesting gives us context that `.some-child` is inside `.some-parent`. It gives us some control over the cascading. But not much else.

As SMACSS suggests, I would nest in class names instead. i.e, use `.child-of-parent` instead of `.parent .child` or `.parent > .child`

Nesting badly in practice can lead to extremely slow pages. See how github speeded up their diff pages.The least you should do is follow the [inception rule](http://thesassway.com/beginner/the-inception-rule) which states that you shouldn't be nesting beyond 4 levels.

However, I would go one step further and say that we shouldn't nest CSS at all. I wrote a [blog post](http://sriharisriraman.in/blog/2013/09/08/dont-nest-css/) with my opinions. Hope this is useful.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-11T22:26:48.127

只是为了插话并执行其他人所说的话。从性能的角度来看，这不一定是一种不好的做法（与优化选择器相比，移除模糊/阴影和圆角可能会增加绘制时间），而是从可维护性的角度来看。

选择器嵌套的越多，生成的 CSS 规则就越具体（您已经知道了）。因此，当您想在某个时候“胜过”该规则时，您必须在级联的下方编写一个具有相同（或更高）特异性的规则以推翻第一个规则。如果你在那里有一个 ID，那也会使它更具体（所以避免，除非你需要它们并且知道你不需要覆盖下一行）。

要遵循这一逻辑结论，除非需要，否则不要嵌套。不要有这样的规则：

`.selector .another .yeah-another {}`

当这将做同样的工作时：

`.yeah-another {}`

它只是让每个人（包括你）的生活更轻松。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-24T19:13:15.897

我的意见：

**你告诉*我***哪个更伤你的眼睛

从操作

```
nav li ul li a {color: $textColor;} 
```

或如建议的那样

```
.nav-menuitem-menu-menuitem-link {color: $textColor;} 
```

所以...

问题是“在 SCSS 中过度嵌套是不好的做法吗？” （或者是 SASS？）我说不。*但这是一个辅助论点。*

**更糟糕**的做法在于将 SASS（或者它是 SCSS？）输出以机器驱动的状态用于生产。

S*SS 只是你的技巧包中的一个工具，与 Notepad++ 或 Git 或 Chrome 没有什么不同。它的作用是通过将一些非常通用的编程概念带到构建一些 css 的点上，让你的生活更轻松一些。*它的作用不是构建你的 CSS。*您不能指望它为您完成工作并创建完全可用、可读、执行的输出。

### 尽可能多和尽可能深地嵌套，然后遵循良好实践......

...之后将通过您的CSS并进行手动调整。使用您的超嵌套输出进行测试、构建等。当 S*SS 在上面创建我的第一个示例时，给该锚一个类并使用`nav .class`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-10T10:32:39.857

尽管不能直接回答您的问题，但您可以为自己的目的保留高度嵌套的 sass，但仍使用`@at-root`. [在这里](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#at-root)查看。

```
.parent {
  @at-root {
   .child1 { ... }
   .child2 { ... }
  }
} 

// compiles to ... 

.child1 { ... }
.child2 { ... } 
```

# php - 按顺序打印数组值和变量

> ID：13805326
> 
> 赞同：-1
> 
> 时间：2012-12-10T16:46:56.313
> 
> 标签：php, arrays, foreach

我确信有一个更简单的解决方案，我正在寻找

这是一些基本描述我在做什么的代码：

```
$array = array('1.4','2.7','4.1','5.9'); 
$score = '4.4';
foreach($array as $value) {
    if($score>$value){
        $x = $value;
    }
}
foreach($array as $value) {
    if($x==$value){
        echo $value."<br>";
        echo $score."<-- <br>";
    } else {
        echo $value."<br>";
    }
} 
```

将显示为：

```
1.4
2.7
4.1
4.4<--
5.9 
```

我要做的是按顺序打印带有得分值的数组值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:50:12.890

为什么不将数组更改为实际数值然后对其进行排序？

```
$array = array(1.4, 2.7, 4.1, 5.9);
$score = 4.4;

$array[] = $score;
sort($array); 
```

或者，如果您需要使用字符串：

```
$array = array('1.4', '2.7', '4.1', '5.9');
$score = '4.4';
$array[] = $score;
sort($array, SORT_NUMERIC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:55:41.977

对于排序，最简单的方法可能是使用`sort()`方法（[docs](http://php.net/manual/en/function.sort.php)）。

您`$x`每次都在通过第一个循环进行覆盖。...它的编写方式，当你完成第一个循环时，`$x`最后一个值小于`$score`. （您是否确定了分界线？）

使用该方法排序后`sort()`，您的第二个循环应该按您的意愿工作。有更严格的方法来进行打印（例如，你可以`implode()`），但你所拥有的应该可以工作。

# javascript - 首先加载 Kendo UI Grid

> ID：13805330
> 
> 赞同：3
> 
> 时间：2012-12-10T16:47:13.243
> 
> 标签：javascript, html, kendo-ui

我对 Kendo UI Grid 有疑问。当我加载数据（来自返回 json 数据格式的异步请求）时，网格不会正确呈现网格的页脚。当我单击以订购或分页网格时，它呈现得很好。我的问题是：如何纠正这个错误？

看图像。

第一次加载：

![在此处输入图像描述](../Images/6ea28d7e764a420dfbba49ae8ede4909.png)

按代码排序后，页脚看起来没问题。

![在此处输入图像描述](../Images/69c6a794346b680fd95751fabe3a1814.png)

如果有人知道我该如何纠正这个错误并分享它，我真的很感激。

谢谢你。

## 客户端代码（剑道版本：v2012.3.1114）

```
<script>

    var grid;

    $(document).ready(function () {
        var serviceUrl = "@Url.Action("GetAsyncData", "Home")";

        grid = $("#grid").kendoGrid({
            dataSource: {
                type: "json",
                transport: {
                    read: {
                        dataType: "json",
                        url: serviceUrl,
                        cache: false
                    }
                },
                schema: {
                    data: "data",
                    total: "count",
                    model: {
                        id: "Id"
                    }
                }               
            },
            height: 400,
            toolbar: [{ text: "New", className: "add-button" }],
            groupable: true,
            sortable: true,
            pageable: false,
            selectable: true,
            resizable: true,
            columns: [
                {
                    field: "Code",
                    title: "Cód.",
                    width: "150px",
                    filterable: true,
                    groupable: false,
                    sortable: true,
                    resizable: true
                },
                {
                    field: "Name",
                    title: "Nome",
                    filterable: true,
                    groupable: false,
                    sortable: true,
                    resizable: true
                }, {
                    field: "Contact",
                    title: "Contato",
                    encoded: false,
                    filterable: true,
                    groupable: true,
                    sortable: true,
                    resizable: true
                },
                { command: { name: "Editar", text: "", className: "edit-button custom-button edit" }, title: "", width: "50px", filterable: false, sortable: false, groupable: false, resizable: false },
                { command: { name: "Detalhes", text: "", className: "detail-button custom-button detail" }, title: "", width: "50px", filterable: false, sortable: false, groupable: false, resizable: false },
                { command: { name: "Excluir", text: "", className: "delete-button custom-button delete" }, title: "", width: "50px", filterable: false, sortable: false, groupable: false, resizable: false }
            ]
        }).data("kendoGrid");

        $("#grid").delegate(".add-button", "click", function (e) {
            window.location = '@Url.Action("Create")';
        });
    });

</script>

<div id="grid"></div> 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-17T07:09:02.163

你用的是什么版本的剑道？我无法使用 Q3 版本复制行为

# ruby-on-rails - Rails 中的普通旧 Ruby 对象位置

> ID：13805331
> 
> 赞同：7
> 
> 时间：2012-12-10T16:47:20.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Rails n00b 问题。我正在 Rails 中创建一个普通的旧 Ruby 对象。但我不确定应用程序中是否有一个标准位置我应该放置这个对象。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:52:54.287

几种选择，但`lib`目录是最常见的。

如果需要初始化代码，最常见的地方是 `config/initializers`.

所以你可能有：

```
lib/mystuff.rb 
```

和：

```
config/initializers/mystuff.rb
lib/mystuff.rb 
```

包含您的红宝石代码。

```
config/initializers/mystuff.rb 
```

包含初始化您的东西的代码，无论在其中找到的任何 Ruby 文件都会`config/initializers`在 Rails 启动时运行。

# c# - t-sql 中的空行为

> ID：13805332
> 
> 赞同：1
> 
> 时间：2012-12-10T16:47:21.007
> 
> 标签：c#

> **可能重复：**
> [C# if-null-then-null 表达式](https://stackoverflow.com/questions/4244225/c-sharp-if-null-then-null-expression)

我在 C# 中错过的是在 sql server 中对空引用的处理：

`var a = SomeObject.Property1.Property2.Property3.Property4`

如果任何属性为空，那么我会得到 NullReferenceException。有时，如果`a`将其设置为 null 而没有错误会更方便，我可以简单地检查一下。

相似地，

`var a = SomeList.FirstOrDefault(...).Select(...)`

`a`如果序列不包含任何元素而不是设置为 null，这也会引发异常。

所以我的问题是：在这些场景中是否有简短而好的方法（可能使用扩展？）来实现类似 sql 的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:56:51.073

这仅适用于静态属性，因为未实例化的对象为空。使用扩展方法也无法做到这一点，因为它们将扩展对象的实例作为其第一个参数。

这样做的丑陋方式......

```
var a;
try {
   a = SomeObject.Property1.Property2.Property3.Property4;
} catch (NullReferenceException) { } 
```

# java - 完美的数字。有问题

> ID：13805335
> 
> 赞同：-2
> 
> 时间：2012-12-10T16:47:31.637
> 
> 标签：java, perfect-numbers

我正在努力完成一项任务。打印1 到 10000 之间的4 个[完美数字。](http://en.wikipedia.org/wiki/Perfect_number)

> 在数论中，一个完美数是一个正整数，它等于它的适当正因数之和，即不包括数字本身的它的正因数之和。

这是我的代码：

```
public class PerfectNumbers
{
    public static void main(String[] args)
    {
        // Perfect numbers!

        for (int number = 1; number < 10000; number++)
        {
            int sum = 0;
            int i = 1;
            while (i < number)
            {

                if (number % i == 0)
                {
                    sum += i;
                    i++;

                }
                else
                {   
                    i++;
                    continue;
                }

                if (sum == number)
                {
                    System.out.println(number);
                }
                else
                {
                    continue;
                }

            }
        }
    }
} 
```

输出是：

```
6
24 <--- This one is wrong because next must be 28\. 
28
496
2016
8128
8190 
```

我的代码有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T16:49:16.770

`if (sum == number)`检查需要在循环外进行。否则，您可能会选择除数*子集*之和等于该数字的数字。

事实上，24 就是一个这样的例子，因为`1+2+3+4+6+8=24`. 你的代码过早地断定 24 是完美的，尽管它也可以被 12 整除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:54:34.727

您的代码打印 24 是因为当您以 i = 8 单步执行循环时，所有数字的总和为 1+2+3+4+6+8 = 24，因此您的条件得到满足。您需要在打印中添加另一个条件，以防止在求和尚未完成时打印。在这种情况下，您尚未添加 12 以使计算有效。

我会将 if 语句移到 while 循环之外，以便仅在计算总和后检查它。

# javascript - $.post 不工作（任何地方）！为什么？

> ID：13805340
> 
> 赞同：1
> 
> 时间：2012-12-10T16:47:47.577
> 
> 标签：javascript, jquery, ajax, post, asynchronous

我对 $.post 的调用并没有在我的代码中运行。我没有将请求发送到其他域，实际上，我所做的一切都是本地化的。我的 localhost 别名是由 Mac OS X 10.8 自动定义的`ramon.local`，我从`http://ramon.local/linkebuy_0.7/resourceX`to请求`http://ramon.local/linkebuy_0.7/resourceY`。Chrome 的控制台上没有错误。

服务器端没有收到请求，我可以通过直接从浏览器访问（输​​入 URL）来检查它。

不只是一个电话不起作用，没有一个电话不起作用。他们都是工作日前，我怀疑我不小心更改了本地设置的某些内容。会是什么呢？

这是我所面临的一个例子：

```
$.post(
    <<CORRECT URL INSIDE THE DOMAIN>>,
    {},
    function(response) {
        console.log('THIS SHOULD BE PRINTED ON CONSOLE');
        alert('THIS SHOULD BE POPPED UP');
    }
); 
```

在运行上面的代码时，我没有收到警报，也没有收到控制台消息。所以我尝试了以下方法：

```
$.support.cors = true;
$.ajax({
    url: "http://ramon.local/linkebuy_0.7",
    dataType: "json",
    type: "GET",
    crossDomain: true,
    success: function (data) {
        console.log(data);
    },
    error: function (xhr, status, error) {
        alert(error + " - " + status);
    }
}); 
```

我只是来`$.support.cors = true;`检查`crossDomain: true`它是否是跨域问题。所以我`No Transport - error`和以前一样被警告了。

我能做些什么来解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:22:31.350

试试这个，看看你是否收到任何警报：

```
// Assign handlers immediately after making the request,
// and remember the jqxhr object for this request
var jqxhr = $.post("your url", function() {
    alert("success");
}).success(function() {
    alert("second success");
}).error(function() {
    alert("error");
}).complete(function() {
    alert("complete");
});

// perform other work here ...
// Set another completion function for the request above
jqxhr.complete(function() {
    alert("second complete");
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:13:51.483

好吧，我以一种非常奇怪的方式解决了这个问题。

我删除了 JQuery 文件并再次下载，替换了旧的。碰巧成功了。

所以，如果你是：

*   发出非跨域的 AJAX 请求；
*   为它使用 JQuery（例如`$.post`，`$.get`等）；
*   获取`No Transport`AJAX 错误

然后**重新下载并替换你的 JQuery source**。

否则，如果您正在发出跨域请求（不是这种情况），请查找 JSONP 并尝试`$.support.cors = true;`在代码的开头设置。

感谢大家的评论和回答。

# sql - SQL：填充 B 列，其中 A 列在 B 列的其他位置有匹配项

> ID：13805341
> 
> 赞同：1
> 
> 时间：2012-12-10T16:47:47.920
> 
> 标签：sql, sql-server, tsql

我对 SQL 查询有点陌生，尤其是任何包含逻辑的东西，尽管我已经搜索了几个小时，但在这种情况下找到要搜索的确切术语并不容易！我有一个相对简单的，我敢肯定：

一个表有 2 列，每行包含有关程序中函数的数据。某些函数具有关联的父函数（用于分组）。A 列是唯一的函数 ID。B 列在适用时指示父函数的 ID。所有父函数 ID 都是独立且有效的函数 ID，存在于 A 列的其他位置。

出于报告目的，我需要列出按父 ID 分组的函数，列出父函数和子函数。我可以通过父函数ID轻松报告，但问题是父函数不知道它是父函数，因为它的B列是空的！

我需要做的是完成 B 列中的值，如果它为空并且该函数在其他地方作为父函数引用。

否则，对于在 B 列中具有空值的**每一行：**

1.  从 A 列取值
2.  检查 B 列的 ANY 行中是否存在该值
3.  如果匹配，则将值注入 B 列（使 A 列和 B 列具有相同的值）

我有什么：（查询`SELECT function_id, parent_function FROM functions`：）

```
FUNCTION_ID   PARENT_FUNCTION   
4  
13            4  
79  
138           4
195
314           345
345 
```

我需要具备的：

```
FUNCTION_ID   PARENT_FUNCTION
4             4
13            4
79
138           4
195
314           345
345           345 
```

有任何想法吗？我迫不及待地想更熟悉 SQL！提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:52:45.997

这应该适合你：

```
UPDATE functions
SET parent_function = function_id
WHERE parent_function IS NULL
AND function_id IN (SELECT parent_function FROM functions) 
```

这将设置`parent_function`为等于`function_id`尚未设置的位置，以及它出现在`parent_function`列中某处的位置。

如果您实际上不想修改表数据但仍返回所需的值，则可以使用类似的逻辑，如下所示：

```
SELECT f.function_id, COALESCE(f.parent_function, f2.function_id) as parent_function
FROM functions f
LEFT JOIN functions f2
  ON f.function_id = f2.function_id
  AND f2.function_id IN (SELECT parent_function FROM functions) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:18:50.837

这个样子怎么样？

```
select distinct
t1.funx, t1.parent,
case when t2.parent is null then t1.parent
else t2.parent end as newparent
from 
tbl t1 left outer join
tbl t2 on 
t1.funx = t2.parent 
```

[sqlFiddle](http://sqlfiddle.com/#!3/55d23/15/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:53:19.657

也许您可以使用 EXCEPT 或 INTERSECT 比较这两个表

```
http://msdn.microsoft.com/en-us/library/ms188055.aspx 
```

更多教程>：

```
 http://www.mssqltips.com/sqlservertip/1327/compare-sql-server-datasets-with-intersect-and-except/ 
```

# html - DPI 和 Retina 图像说明

> ID：13805342
> 
> 赞同：2
> 
> 时间：2012-12-10T16:47:50.120
> 
> 标签：html, css, mobile, photoshop

我一直在阅读有关@2x 图像只是比常规图像大两倍的图像，但是我们是否必须更改 DPI 以提高质量，或者我们只需要两倍大的图像？我不明白为什么相同质量的两倍大图像会更好？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:58:49.723

不用担心 DPI，这对屏幕无关紧要，但要回答您的问题，以相同质量制作两倍大小的图像将具有比原始图像高得多的像素密度，因此渲染的像素会更加清晰和良好定义。

例如：

原始图像：300 像素 x 300 像素 = 90,000 像素

视网膜图像（相同质量）：600 像素 x 600 像素 = 360,000 像素

现在，当浏览器渲染 Retina 图像时，它仍将其渲染在与原始图像相同的 300 x 300 像素空间中。这意味着此图像中有 360,000 个像素，而不是之前的 90,000 个像素。现在有更多的像素来渲染相同的图像，因此图像看起来会更加清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:51:58.983

对于屏幕，DPI 不存在。您需要了解的原始基础是像素数。你可以有一个 100px x 100px 的图像，它是 1 DPI 或 100,000,000 DPI，没有区别。

如果您真的想了解更多信息，请查看[http://en.wikipedia.org/wiki/Pixel_density](http://en.wikipedia.org/wiki/Pixel_density)

但是对于屏幕输出，您可以忽略 DPI。

# python - 样本集和动力样本集的均值

> ID：13805343
> 
> 赞同：3
> 
> 时间：2012-12-10T16:47:53.400
> 
> 标签：python, random, numpy, statistics

我正在研究基于假设的[ICA](http://en.wikipedia.org/wiki/Independent_component_analysis)实现，即所有源信号都是独立的。所以我检查了[依赖与相关](http://en.wikipedia.org/wiki/Correlation_and_dependence)的基本概念，并试图在样本数据上展示[这个例子](http://mathforum.org/library/drmath/view/64808.html)

```
from numpy import *
from numpy.random import *
k =  1000
s = 10000
mn = 0
mnPow = 0
for i in arange(1,k):
    a = randn(s)
    a = a-mean(a)
    mn = mn + mean(a)
    mnPow = mnPow + mean(a**3)
print "Mean X: ", mn/k
print "Mean X^3: ", mnPow/k 
```

但我无法生成此示例 E(X^3) = 0 的最后一步：

```
>> Mean X:  -1.11174580826e-18
>> Mean X^3:  -0.00125229267144 
```

我认为第一个值为零，但第二个值太大了，不是吗？由于我减去 的平均值`a`，我预计 的平均值也`a^3`为零。问题出在

1.  随机数发生器，
2.  数值的精度
3.  在我对均值和期望值概念的误解中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:19:59.640

样本均值本身是一个随机变量。虽然这里的期望值为零，但特定的实现[将围绕该期望值波动](http://en.wikipedia.org/wiki/Sampling_distribution)。

当我多次运行以下命令时：

```
from numpy import *
from numpy.random import *
k =  1000
s = 10000
mn = 0
mnPow = 0
for i in arange(k):
    a = randn(s)
    mn += mean(a)
    mnPow += mean(a**3)
print "Mean X: ", mn/k
print "Mean X^3: ", mnPow/k 
```

我得到的数字都在零附近波动。

编辑：

如果您绘制它的密度，则平均值本身看起来是高斯的： ![在此处输入图像描述](../Images/f4910da58639713f868cc61ac42f68e5.png)

请注意，我已从`a = a-mean(a)`您的代码中删除，因为它是错误的。有了它，由于[期望的线性，](http://en.wikipedia.org/wiki/Expected_value#Linearity)`mn`在`mean(a - mean(a))`数学上为零：

```
E[x - E[x]] = E[x] - E[E[x]] = E[x] - E[x] = 0 
```

它出现略微非零的唯一原因是由于舍入误差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:01:42.093

可能只是舍入误差？

您是否尝试过计算协方差并对其进行平均？

# php - 如何将 Yaml 转换为 csv，反之亦然

> ID：13805347
> 
> 赞同：1
> 
> 时间：2012-12-10T16:48:01.760
> 
> 标签：php, csv, yaml

我有一个申请，我想做翻译。

我想将翻译外部化，翻译我的应用程序的人需要 Excel 电子表格。

我有 yaml 格式的消息，但我不知道如何提取它们并制作 csv 或电子表格。

第二步是我要提取csv文件来制作一个yaml文件。

我有你的想法吗？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:31:39.807

我猜您正在尝试转换包含翻译的 YAML 文件。这些文件基本上是这样存储的键值：

```
button.ok.value: Ok
button.ok.tooltip: Commits the action 
```

当然 YAML 可以更复杂，但是如果你有这样的东西，只需将 ':' 字符替换为 ',' 然后将文件保存为 CSV（或更改扩展名），使用 Excel 打开它。然后您可以将其保存为 xls 格式或您想要的任何格式。

如果您的文件使用分层节点，例如：

```
button:
    ok:
        value: Ok
        tooltip: Commits the action 
```

然后您可能想要编写一些脚本来迭代这些值（这是一个树遍历）并将这些值写入一个文件。

您应该提供一个 YAML 外观示例，因为它是一种非常灵活的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:07:38.887

```
$csv = "out.csv";
$yaml = "in.yml";

fputcsv($csv, yaml_parse_file($yaml)); 
```

需要[http://pecl.php.net/package/yaml](http://pecl.php.net/package/yaml)

# javascript - 用于 JQuery 选择器的 Mixin

> ID：13805349
> 
> 赞同：0
> 
> 时间：2012-12-10T16:48:09.057
> 
> 标签：javascript, jquery

是否可以为`jQuery`选择器创建一个 mixin（请注意，我不需要插件，它们对于我正在做的事情来说太笨重了）？

这是我要完成的任务：

```
 // Given a div I need to paint it with green for which...
  var $container = $("#id001");

  // current solution
  var do = function(e) {

     var container = e.container;
     container.css("backgroudColor", "green");
  };

  do({ container: $container }); // call

  // desired solution
  var do**Mixin** = function(e){
     e.css("backgroudColor", "green");
  };

  container.do(); // call 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:56:10.333

我知道您说您不需要插件，但是您需要的插件非常简单：

```
function($){
    $.fn.makeItGreen = function(){
        return this.each(function() {
            this.css({
                'background-color': 'green'
            });
        });
    }
)(jQuery)); 
```

利用：

```
$(yourSelector).makeItGreen(); 
```

未经测试，但是....很确定它应该按原样工作。

**小提琴**（由 Jamiec 提供）：

[http://jsfiddle.net/mPu6X/](http://jsfiddle.net/mPu6X/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T16:56:22.103

你在寻找这样的东西吗？[http://jsfiddle.net/WDmjS/](http://jsfiddle.net/WDmjS/)

```
​jQuery.prototype.do = function(){
    this.css("background-color","green");
    return this;
};

$(".mydiv").do(); 
```

更简洁的写法：

```
​$.fn.do = function(){
    return this.css("background-color","green");
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T16:50:42.017

您可以进行自定义事件：

```
$('selector').on('changeToGreen', function(){
    $(this).css("backgroudColor", "green");
}); 
```

去做吧：

```
$('selector').trigger('changeToGreen'); 
```

# api - 带有 API Ruby gem 的变体 product_id

> ID：13805355
> 
> 赞同：1
> 
> 时间：2012-12-10T16:48:40.933
> 
> 标签：api, shopify

我正在使用[Shopify_api gem](https://github.com/Shopify/shopify_api)来获取应用程序的产品和变体。获取变体时，我似乎无法获得 product_id，即使[API 文档](http://api.shopify.com/product_variant.html#show)说它应该可用。有人知道我如何从变体中获取 product_id 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T04:42:17.170

[http://docs.shopify.com/api/product_variant](http://docs.shopify.com/api/product_variant)确实说 product_id 应该在响应中，如果您检查实际响应，它就是。问题是 ActiveResource 似乎没有将其保存为普通属性，如果您查看[https://github.com/Shopify/shopify_api/blob/master/lib/shopify_api/resources/variant.rb](https://github.com/Shopify/shopify_api/blob/master/lib/shopify_api/resources/variant.rb)，它使用了这个作为前缀选项。我现在弄清楚如何做的唯一方法是

variant.prefix_options[:product_id]

这也在 ActiveResource 中报告[https://github.com/rails/rails/issues/3917](https://github.com/rails/rails/issues/3917)

# android - 设置 Window.FEATURE_CUSTOM_TITLE 会创建 AndroidRuntimeException

> ID：13805361
> 
> 赞同：2
> 
> 时间：2012-12-10T16:49:06.017
> 
> 标签：android

我似乎无法克服这个错误：

> android.util.AndroidRuntimeException：您不能将自定义标题与其他标题功能结合使用

我正在运行 API > 14。

清单如下：

```
 <activity
        android:name=".activity.ActivityWelcome"
        android:label="@string/app_label_name"
        android:launchMode="singleTask"
        android:clearTaskOnLaunch="true"
        android:theme="@style/My.Theme">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

我的活动正在执行以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.welcome);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title_main);
    ... 
```

在哪里`R.layout.window_title_main`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_title"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:paddingLeft="5dp" >

    <TextView
        android:id="@+id/textview_title"
        android:drawableLeft="@null"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="-1"/>

</LinearLayout> 
```

当它似乎对其他人有用时，为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T18:00:04.370

这种错误会驱使你发疯甚至超越。

所以我碰巧被`Theme.Holo`用作我的父主题。（我自己的主题扩展的主题）

文档说：

> ...操作栏包含在使用 Theme.Holo 主题（或其后代之一）的所有活动中，当 targetSdkVersion 或 minSdkVersion 属性设置为“11”或更大时，这是默认主题。
> 
> [http://developer.android.com/guide/topics/ui/actionbar.html#Adding](http://developer.android.com/guide/topics/ui/actionbar.html#Adding)（第一段）

好的，所以当我尝试完成上述过程（我的问题）时，我得到了错误：

> 您不能将自定义标题与其他标题功能结合使用

好吧，那是因为，默认情况下，操作栏已经设置好了，它也不允许您使用自定义标题栏。

文档显示“每个活动都包括操作栏”：

> 这样，当应用程序在Android 3.0或更高版本上运行时，系统会将全息主题应用于每个活动，因此每个活动都包含操作栏。

所以，我现在将把时间集中在更改操作栏而不是标题栏上！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:52:39.587

`FEATURE_CUSTOM_TITLE` 和

```
<item name="android:windowNoTitle">true</item> 
```

是互斥的。消除

```
<item name="android:windowNoTitle">true</item> 
```

它会再次起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T14:51:53.927

作为初学者，大多数答案对我的情况没有帮助。所以这是我的答案。

转到您的 android 项目中的 res/values 文件夹并检查 strings.xml（此文件可能因您的情况而异，例如 theme.xml）

在资源标签下的文件中检查您是否有样式标签。如果您没有找到它，请将下面提到的代码添加为资源标签的子项

像下面的东西

```
<resources>
    <style name="SomeNameHere">
        <item name="android:windowNoTitle">true</item>
    </style>
</resources> 
```

如果您已经有样式标签，只需将下面的代码添加到您的样式标签

```
 <item name="android:windowNoTitle">true</item> 
```

# php - 提示不使用 IF 语句

> ID：13805368
> 
> 赞同：0
> 
> 时间：2012-12-10T16:49:24.173
> 
> 标签：php, javascript, if-statement

同样，我对使用 PHP 和 JS 进行编程非常陌生。我提取了一段代码，它是 PHP 中的 JS 提示函数，用于确认对数据的修改。当我在提示符中键入 $confirmdelete 变量时，它确实是“YES”......（我用回声检查了它），但无论如何它都会不断产生“MODIFICATION ABORTED”消息（当然不会更改数据） .

我的 IF 语句不好吗？希望这只是一个新手错字......这甚至是一个好方法吗？谢谢你的帮助...

```
<?php
        //prompt function
        function prompt($prompt_msg){
                echo("<script type='text/javascript'> var answer = prompt('".$prompt_msg."'); </script>");
                $answer = "<script type='text/javascript'> document.write(answer); </script>";
                return($answer);
        }

        $prompt_msg = "Are you SURE you wish to make a modification? Type YES to confirm: ";
        $confirmdelete = prompt($prompt_msg);
        if ($confirmdelete != "YES") {
            echo "MODIFICATION ABORTED <br><br>
                <a href='index.php'>RETURN TO MAIN PAGE</a>";
            exit();
        }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:55:54.380

嗯嗯……

## 你不能这样做。

当 PHP 代码输出时——就完成了。除非您添加一些 AJAX 处理程序，否则不再与服务器对话。

* * *

唯一认为您的代码输出是这样的：

```
<script type='text/javascript'> var answer = prompt('Are you SURE you wish to make a modification? Type YES to confirm: '); </script>MODIFICATION ABORTED <br><br>
                <a href='index.php'>RETURN TO MAIN PAGE</a> 
```

[演示](http://codepad.org/od4r3l6l)

# c# - 如何动态地将文本插入文本框？

> ID：13805377
> 
> 赞同：1
> 
> 时间：2012-12-10T16:49:51.163
> 
> 标签：c#, .net

我正在使用 C# 开发一个项目，我需要将文本插入到超过 250 个的文本字段中，我将数据存储在字符串数组中，现在我必须将数组中的数据按顺序插入到这 250 个文本框中，例如

```
textbox1.Text=StringArray[1];
textbox2.Text=StringArray[2];
       .               .
       .               .
       .               .
textbox250.Text=StringArray[250]; 
```

我谷歌它没有积极的结果，我做了代码来清除所有文本框中的文本，即

```
Action<Control.ControlCollection> func = null;
func = (controls) =>
{
    foreach (Control control in controls)
       if (control is TextBox)
          (control as TextBox).Clear();
       else
          func(control.Controls);
 };
 func(Controls); 
```

我试图插入这样的文字

```
 Action<Control.ControlCollection> func = null;
 int i=0;
 func = (controls) =>
 {
     foreach (Control control in controls)
     {
         if (control is TextBox)
            (control as TextBox).Text = result_set[i++].ToString();
         else
            func(control.Controls);

     }
 };

 func(Controls); 
```

但得到了“System.IndexOutOfRangeException”类型的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:56:04.617

该错误是因为您访问了数组外部的成员。这可能是因为您在页面上有其他文本框被循环找到，然后您的数组索引超出范围。也许你可以做这样的事情：

```
 for(int i = 1; i <= StringArray.Length; i++)
 {
     // I don't know which technology you use, it might be a different method to find
     Control control = controlCollection.FindByName("Textbox" + i.ToString(); 
     if (control is TextBox)
        (control as TextBox).Text = StringArray[i];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:21:33.940

您可以使用数组的索引将属性“index”添加到页面上的每个文本框，并将函数附加到事件“OnInit”以插入文本。一个例子：

页：

```
[asp:TextBox ID="TextBox1" runat="server" OnInit="setText" index="1"][/asp:TextBox]

[asp:TextBox ID="TextBox2" runat="server" OnInit="setText" index="2"][/asp:TextBox]

... 
```

代码背后：

公共无效 setText（对象发送者，System.EventArgs e）{

```
 TextBox tbx;
    tbx = sender;
    tbx.Text = StringArray[sender.attributes["index"]];

} 
```

希望这可以帮助！

# xcode - 从命令行确定 Xcode 派生数据位置

> ID：13805378
> 
> 赞同：23
> 
> 时间：2012-12-10T16:50:00.923
> 
> 标签：xcode, xcode4

有没有办法从命令行确定使用 xcodebuild 构建后派生数据文件夹的位置？

例如，运行 xcodebuild 后：

```
xcodebuild -project projectname -target targetname 
```

我希望能够找出应用程序所在的文件夹。我想在不使用 CONFIGURATION_BUILD_DIR 或在项目设置中更改输出路径的情况下执行此操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-10T20:15:32.240

```
xcodebuild -project myapp.xcodeproj -showBuildSettings 
```

打印所有构建设置和值，特别是构建应用程序的文件夹：

> BUILT_PRODUCTS_DIR = /path/to/myapp/DerivedData/myapp/Build/Products/Release

# php - PHP中的函数集合和类有什么区别？

> ID：13805385
> 
> 赞同：0
> 
> 时间：2012-12-10T16:50:16.867
> 
> 标签：php, class, function

我想知道我可以在 PHP 文件中创建的函数集合与 PHP 类文件之间的区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:01:59.177

出于实际目的，它`CLASS`是不同的，因为它可以被实例化。当它被实例化时，它将有自己独特的属性和值。

通过这种方式，您可以多次实例化同一个类，每个类都具有其独特的属性。

一个常见的例子是游戏中的角色；即你有一个名为`enemy`. 您通过多次实例化该类来产生 5 个敌人。每个实例都有自己的属性、寿命、速度等……您可以单独访问每个实例并在其中运行调整其属性的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:52:42.703

类是可以实例化的数据和函数的集合（每个实例的不同数据集）。

类是 OOP 的焦点，它们的存在是为了以对象为重点来组织代码。OOP 比命令式编程更好地促进模块化。对于您的研究，最好查看[这个对不同问题的答案](https://stackoverflow.com/a/6295260/483347)以及其中包含的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T17:02:28.537

在类构造中定义的函数称为方法，通常需要该类的实例才能工作（静态方法除外）。例如实例将在要使用的方法之间保持“共享”数据，封装对象的行为。

一组函数也可以做到这一点，例如`fopen()`打开一个可以作为第一个参数传递给`fread()`、`fwrite()`等的流；可以使用流类进行类似的方法，例如：

```
$f = new MyFile('filename');
$f->read(10);
$f->write('hello'); 
```

相对于：

```
$f = fopen('filename');
fread($f, 10);
fwrite($f, 'hello'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T16:54:04.900

函数集合只是函数的随机集合。一个类封装了特定的行为领域。

例如，当你向一个类添加一个函数时，你应该想“这是正确且唯一的地方吗？”

可以`class`在 PHP 中编写一个同时满足这两个定义的 - 但您应该以后者为目标。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-10T18:01:46.257

我想你可以把 PHP 中函数和类之间的区别想象成 C 和 C++ 语言之间的区别。首先是 C，然后是 C++ 作为其*面向对象的版本*。PHP也是如此，它最初是基于C语言制作的，作为Web（个人主页）的*简化C语言，后来添加了OOP功能。*但是 PHP 的美妙之处在于它的简单性，您可以在几分钟内创建一个全新的页面，而无需任何扎实的编程经验。在 PHP 中使用类会破坏这个目的，因为如果你只是开发一些相对简单的东西，它可能会矫枉过正。

类非常适合图书馆。我建议你使用它们。它是一种更高级的编码风格：创建类意味着创建您自己的库，您可以将其用于不同的项目。只要确保你没有过度使用它们。并不是 PHP 中的所有东西都需要一个类，只是为了那些永远重复的功能。类为您的项目增加了灵活性和可扩展性。

# ios - 创建需要公共库的库

> ID：13805388
> 
> 赞同：1
> 
> 时间：2012-12-10T16:50:24.433
> 
> 标签：ios, xcode, compilation, shared-libraries, static-libraries

我在一个非常大的 iOS 项目中工作，它有很多类和资源，需要很长时间来索引和编译它们。随着它越来越多，我需要对此做点什么，因为我花费了太多时间等待 IDE 让我工作。

我的第一个想法是将所有图像打包在一个自定义包中，以便 IDE 将其视为单个文件，并且索引和复制它会更快，但我已经看到包只不过是一个带有扩展名的简单文件夹，所以我猜性能仍然会很慢。然后我读到，如果我对图像使用“蓝色文件夹”而不是“黄色组”，Xcode 不会索引它们。但是这种方式现在并不容易，因为我应该替换查找图像以在该文件夹中查找它们的函数（绝对路径？）

所以我的最后一种方法是节省编译时间和索引时间。我想在多个库中模块化我的代码，这样就不需要再次“编译”它，这样 Xcode 也不需要索引源文件。

我已经学习了一些教程，现在我知道如何创建一个静态库并将头文件包含在另一个项目中。但我目前的问题如下。

我的应用程序有几个“独立”模块，所以我想为每个模块创建一个静态库（也许我也会为每个模块生成一个图像包......）。但是所有这些模块都使用一个共同的核心，我也想在静态库中维护它。所以，如果我这样做，我将不得不在每个模块库中包含主核心库，我担心这不是最优化的方式，因为核心的二进制代码会出现几次，正确的？

我想正确的解决方案是为模块的核心和静态库生成一个动态库，但我找不到如何生成动态库...此外，我不确定这是否是解决方案。

所以我问你：我有什么选择？多次编译核心是我拥有的最佳方法吗？非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:06:01.310

IOS 不支持动态链接，所以这不是一个选项。虽然静态库被添加到其他库中，但它没有嵌入到其他静态库中，您可以在构建时看到这一点，其他库应该在项目文件夹中显示为单独的库，因此每个静态库/project 只会在应用程序构建中包含一次。

最后......如果您在同一个工作区中使用静态库，我不确定这是否会为您节省大量时间。我在一些项目中使用静态库，如果我对应用程序执行清理，然后构建，静态库也将重新构建。

# wpf - 数据网格样式

> ID：13805389
> 
> 赞同：1
> 
> 时间：2012-12-10T16:50:23.497
> 
> 标签：wpf, xaml, datagrid, styles

安装并引用了带有 WPF 工具包的 vS 2008。在 Window1.xaml 我添加了这一行：

```
xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit" 
```

它运行，网格显示数据，直到我尝试设置网格样式。尝试应用使文本居中的样式时出现错误。该错误是指 App.xaml 并且是：

> 类型引用找不到名为“DataGridCell”的公共类型。第 9 行位置 75。

我的应用程序.xaml

```
<Application x:Class="DataGridStyles.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                        
StartupUri="Window1.xaml">
<Application.Resources>

    <Style x:Key="CenterCellStyle" TargetType="{x:Type DataGridCell}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridCell}">
                    <Grid Background="{TemplateBinding Background}">
                        <ContentPresenter HorizontalAlignment="Center" 
                                  VerticalAlignment="Center"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background" Value="Transparent" />
                <Setter Property="BorderBrush" Value="Transparent" />
                <Setter Property="Foreground" Value="Black" />
            </Trigger>
        </Style.Triggers>
    </Style>

</Application.Resources>
</Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:17:25.523

如果数据网格是 WPF 工具包的一部分，您还需要在 App.xaml 中添加该命名空间 ( `xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit"`)。

然后，只需将您的更改`TargetType="{x:Type DataGridCell}"`为`TargetType="{x:Type my:DataGridCell}"`

# c# - 将时间转换为易于阅读的字符串

> ID：13805390
> 
> 赞同：3
> 
> 时间：2012-12-10T16:50:26.373
> 
> 标签：c#, sql-server, datetime

什么是从 sql server 获取日期时间并将其转换为使用友好字符串的最佳方法，如下所示：

如果超过 1 天 > 1 天前。
超过 7 天 > 1 周前
1 年前
3 分钟前
56 秒前。

等这可以轻松完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:54:54.817

你最好的选择是做一个`DateTime`扩展方法：

```
public static class DateTimeExtensions
{
    public static string ToRelative(this DateTime value)
    {        
        DateTime now = DateTime.Now; //maybe UtcNow if you're into that

        TimeSpan span = new TimeSpan(now.Ticks - value.Ticks);
        double seconds = Math.Abs(ts.TotalSeconds);

        if (seconds < 60)
            return string.Format("{0} seconds ago", span.Seconds);

        if (seconds < 2700)
            return string.Format("{0} minutes ago", span.Minutes);

        if (seconds < 86400)
            return string.Format("{0} hours ago", span.Hours);

        // repeat for greater "ago" times...
    }
} 
```

然后像这样调用你的`DateTime`价值：

```
myDateTime.ToRelative(); 
```

# php - 连续计算多个值，连续两次遍历列

> ID：13805391
> 
> 赞同：0
> 
> 时间：2012-12-10T16:50:33.217
> 
> 标签：php, mysql

我有一个看起来像这样的表：

```
Name | date1   | date2   | date3   | etc..
per1 | status1 |         | status2 | etc
per4 | status2 | status3 |         | etc 
```

日期列的数量不固定。它们的值可以是状态，也可以为空。

我想分别访问每一行的日期列的数据并处理数据。

我想要实现的输出：

```
Name | field1 | status1  | status2  | etc..
per1 | value  | #ofstat1 | #ofstat2 | etc 
```

所以对我来说，访问问题开头的表格：

```
$confirmed ="Confirmed";
$accepted ="Accepted";

while ($row = mysql_fetch_array($result)) {

    $confirmed_cnt =0;
    $accepted_cnt =0;

    foreach ($row as $value) {
        if (strcmp($value, $confirmed)) $confirmed_cnt++;
        else if (strcmp($value, $accepted)) $accepted_cnt++;
    }
print("<tr>");
print("<td>$row["Name"]</td>"); // name   
print("<td>$confirmed</td>"); // confirmed
print("<td>$accepted</td>"); // accepted
print("</tr>");
} 
```

据我所知，这应该可以工作，但由于某种原因，它会连续通过每列 2 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:52:32.517

尝试`mysql_fetch_assoc()`或`mysql_fetch_row()`代替。
`mysql_fetch_array()`每列返回两次：作为 [1] 和作为 ['fieldName']

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:54:41.997

另外，您还有另一个错误，请替换以下行：

```
print("<td>$row["Name"]</td>"); // name 
```

对于这个：

```
print("<td>$row['Name']</td>"); // name 
```

# eclipse - Eclipse 在重新启动时忘记我最近的 12 个文件是否正常？

> ID：13805395
> 
> 赞同：2
> 
> 时间：2012-12-10T16:50:41.317
> 
> 标签：eclipse, launch

你好，

我有 Eclipse ：

版本：Juno Service Release 1

版本号：20120920-0800

退出并重新启动 Eclipse 让他忘记“文件”菜单中我最近的文件列表是正常的吗？这很烦人。

如果有人对此有解决方案，我会喜欢的！

谢谢，

尼古拉斯

# tfs - 如何从代码中禁用 CodedUI 测试代理？

> ID：13805397
> 
> 赞同：0
> 
> 时间：2012-12-10T16:50:40.550
> 
> 标签：tfs, error-handling, automation, coded-ui-tests

我们有一项服务可以获取 XML 中的自定义测试并将其转换为 CodedUI 测试。然后，我们为 MSTest 启动一个进程，将测试加载到测试控制器中，然后将测试分布到各种代理中。我们在晚上运行回归测试，所以如果出现问题，没有人会在附近修复系统。当测试程序中发生某些异常时，它会弹出一个错误窗口，并且无法在系统上运行更多测试。随后的测试被加载到代理中并立即失败，因为它们无法执行分配的任务。数以千计的测试本应在多个系统上花费一整夜，现在几分钟内就失败了。

我们可以通过测试返回的速度来检测错误发生，但我们不知道如何禁用代理以使其不再接受任何测试。

**附录：**

如果测试失败得很惨，以至于没有更多测试可以尝试成功运行（如前所述，我们可能没有操作来处理一些可能是新的弹出窗口），那么我们希望禁用该代理，因为不再需要运行测试关于它：他们都会失败。由于我们有许多代理同时运行，如果一个失败（并被禁用），负载仍然可以分布，而不会出现一长串失败。这些其他回归测试仍然有机会成功（一切正常）或失败（我们是否错过了另一个弹出窗口，或者这是一个实际的回归失败）。

20 秒内 2000 次失败并没有说明什么，除了 1 个系统出现了没人意识到会出现的问题，现在我们浪费了一整夜的测试。2 次故障（1 次自然故障，1 次由先前故障的问题引起）和 1 次系统停机意味着总夜间运行可能会延长一两个小时，我们有关于如何开始新一天的有用数据：修复 1 次测试并重新运行这两个故障.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:51:44.603

在这种情况下，需要中止测试运行。如果您自己运行 mstest，则需要将 ^c 注入命令行进程。但是：如果周围没有人来修复它，那么随后的测试失败有什么关系呢？如果它只是为了快速查看哪个测试是导致错误的原因，为什么不生成代码 ui 检查以查看消息框是否存在并使用 Assert.inconclusive 将测试标记为不确定。引起的测试会像一面旗帜一样突出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:46:42.097

如果您可以检测到要禁用代理的点，则可以通过运行“TestAgentConfig.exe delete”来禁用代理，这会将代理重置为未配置状态。

# java - Java 垃圾收集器和字符串操作

> ID：13805409
> 
> 赞同：3
> 
> 时间：2012-12-10T16:51:14.107
> 
> 标签：java, string, garbage-collection

我有一个应用程序进行大量字符串操作，我注意到 jvm 内存使用率非常高，而我什至没有在内存中存储任何内容。

我制作了一个示例应用程序来演示这个问题：我有一个带有一个按钮的简单 JFrame

```
private void buttonDoWorkActionPerformed(java.awt.event.ActionEvent evt) {
    String randomString = "abc test garbagecollector";

    ArrayList<String> results;

    for(int i=0; i<100000; i++)
        results = doNothing(randomString.split(" "));

    results = null;//No effect
    System.gc();//No effect
}

private static ArrayList<String> doNothing(String[] words) {
    ArrayList<String> results = new ArrayList<String>();

    for (String word : words)
        results.add(word);

    return results;
} 
```

如果你运行这个示例，JVM 会在内存中占用大约 50Mo，一旦你按下按钮，它就会增加到 150Mo，并且永远不会下降。编辑：我指的是 Windows 任务管理器中的“java.exe”进程。

显然，我正在做很多临时字符串副本，但我希望一旦我丢失了引用，它们会被 carbage 收集器释放。

编辑：也许不相关，但我尝试使用 32 位和 64 位版本的 java 1.6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:55:09.490

您需要澄清您的意思，`it`因为您可能会在这里看到许多级别。有些会在 GC 上减少，有些不会。

如果您在 GC 之后查看内存使用情况，您应该会看到没有增加，如果您看到其他方面的增加，则可能是最大内存或其他一些数字。

```
public static long memoryUsed() {
    return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
}

public static void main(String... args) {
    String randomString = "abc test garbagecollector";

    System.gc();
    System.out.printf("Memory used before test started %.1f MB%n", memoryUsed() / 1e6);
    for (int t = 0; t < 5; t++) {
        List<String> results = new ArrayList<String>();

        for (int i = 0; i < 100000; i++) {
            for (String word : randomString.split(" "))
                results.add(word);
        }
        long beforeGC = memoryUsed();
        results = null;
        System.gc();
        System.out.printf("%d: before GC %.1f MB used, after GC %.1f MB used%n",
                t, beforeGC / 1e6, memoryUsed() / 1e6);
    }
} 
```

印刷

```
Memory used before test started 5.7 MB
0: before GC 61.8 MB used, after GC 5.8 MB used
1: before GC 44.3 MB used, after GC 5.8 MB used
2: before GC 44.3 MB used, after GC 5.8 MB used
3: before GC 44.3 MB used, after GC 5.8 MB used
4: before GC 44.3 MB used, after GC 5.8 MB used 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:54:19.523

字符串可能正在被实习，这是与一些 VM 设计决策相关的 Java 和字符串问题。您可能可以尝试获取 VisualVM 或其他一些框架，连接到您正在运行的 JVM 并查看对象，和/或进行堆转储并查看结果。

# svn - 如何下载此诺基亚开发者存储库

> ID：13805410
> 
> 赞同：1
> 
> 时间：2012-12-10T16:51:13.467
> 
> 标签：svn, nokia

如何下载该存储库： [http](http://projects.developer.nokia.com/DSP/browser/examples/WindowsPhone/NoiseReduction#sdkMicrophoneCS) ://projects.developer.nokia.com/DSP/browser/examples/WindowsPhone/NoiseReduction#sdkMicrophoneCS 我安装了 SVN 客户端，即使很难访问我有诺基亚开发者帐户。任何人都可以为我下载并粘贴到 speedyShare 中吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:40:19.277

试试这个：`svn co http://projects.developer.nokia.com/svn/DSP`。

我单击了您提供的链接，它在该页面上显示了这个 Subversion URL。大约在网页的第五行。这是一种很小的印刷品，所以很容易错过。

# c# - 在没有这些参数的情况下将具有默认值的方法分配给 Func<>？

> ID：13805414
> 
> 赞同：13
> 
> 时间：2012-12-10T16:51:31.017
> 
> 标签：c#, .net, functional-programming, func

我希望能够做到以下几点：

```
Func<int,bool> tryMethodFunc = TryMethod; 
```

TryMethod 的签名如下：

```
bool TryMethod(int value, int value2 = 0, double value3 = 100.0) 
```

我不反对将方法分解为咖喱格式，但如果没有这种方法可以做到这一点，那会更有效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T19:52:36.723

可选参数是一种语言特性，编译器负责将对带有可选参数的方法的调用转换为带有值的完整调用。

看看下面这段简单的代码，

```
 public void GeneralMethod()
    {
        TestMethod(6);
    }

    public bool TestMethod(int a, int b = 8)
    {
        return true;
    } 
```

当您反汇编这些方法时，您会看到 C# 编译器实际上将带有一个参数的 TestMethod 调用替换为带有两个参数的调用。来自 ildasm 的屏幕截图证明，

![ildasm 屏幕截图](../Images/516bb14112078f58b79176460866d0ac.png)

现在，谈到当前的问题，有问题的代码行正在尝试将 Func 与具有可选参数的方法绑定。如果 C# 编译器必须处理这个问题，它必须确保 Func 有些知道默认值。虽然这可以通过编译器实现，但它完全违背了 Func 的目的。

Func 的目的*是提供一种以通用且简单的方式存储匿名方法的方法。*"[参考](http://www.dotnetperls.com/func)

可以在[此处找到 stackoverflow 中的另一个类似问题](https://stackoverflow.com/a/7690501/570239)

*@Chris Sinclair 的解决方案通过创建一个匿名方法来解决这个问题，该方法接受一个参数并从该匿名方法的主体调用 TryMethod。*

# android - 每个操作栏选项卡的不同背景

> ID：13805418
> 
> 赞同：3
> 
> 时间：2012-12-10T16:51:37.227
> 
> 标签：android, actionbarsherlock

在我的应用程序中，我在操作栏中有三个选项卡（使用 ActionBarSherlock）。在 xml 样式中，我设置/覆盖默认背景选择器，一切正常。但是......现在我必须为每个标签设置单独的背景。视觉上我想让我的标签有不同的下划线颜色。

理想情况下，我想要这样的东西：

```
Tab t = actionBar.newTab();
t.setBackground(...);
actionBar.addTab(t); 
```

但是没有方法setBackground。

所以，我为标签创建了一个自定义视图，现在我有了这个：

![](../Images/5380587fe7e5aefa4f2ae7a49b0790b7.png)

第一个问题是尺寸。我希望拥有与标准/默认选项卡完全相同的尺寸。第二个问题是背景选择器不起作用。当我按下未选择的选项卡时，它不会更改其状态/背景，并且它是与 TabView.background 完美配合的同一个选择器。

我真正想要的是标准操作栏选项卡，每个选项卡都有不同的背景选择器。有任何想法吗？

# php - PHP SOAP 客户端和服务器

> ID：13805419
> 
> 赞同：1
> 
> 时间：2012-12-10T16:51:44.997
> 
> 标签：php, soap, wsdl

我正在尝试编写我的第一个 SOAP 服务器，对 SOAP 客户端做了一些工作。当我尝试发送单个字符串时，效果很好。但是当尝试向服务器发送多个参数时，我会陷入困境。有没有更好的方法来解决这个问题？

服务器：

```
<?php    
if(!extension_loaded("soap")){
    dl("php_soap.dll");
}
ini_set("soap.wsdl_cache_enabled","0");

function getCatalogEntry($array){
$conn = mysqli_connect($host,$user,$password,$db) or die(mysqli_error($conn));
$sql = "SELECT '" . $array[0]. "' FROM soap WHERE id = '".$array[1]."'";

$result = $conn->query($sql) or die(mysqli_error($conn));
$row = mysqli_fetch_array($result);
    return var_dump($array).$array[0];//$sql.$row[$field];
}

$server = new SoapServer("test.wsdl");
$server->AddFunction("getCatalogEntry");
$server->handle();
?> 
```

客户：

```
<?php
try{
    $sClient = new SoapClient('server.php?wsdl');

    $params = array( 
        "field" => "field2",
        "id" => "id"); 

    $response = $sClient->getCatalogEntry($params);

    var_dump($response);

} catch(SoapFault $e){
    var_dump($e);
}
?> 
```

WSDL：

```
<?xml version ='1.0' encoding ='UTF-8' ?>
<definitions name='Catalog'
  targetNamespace='http://example.org/catalog'
  xmlns:tns=' http://example.org/catalog '
  xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/'
  xmlns:xsd='http://www.w3.org/2001/XMLSchema'
  xmlns:soapenc='http://schemas.xmlsoap.org/soap/encoding/'
  xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'
  xmlns='http://schemas.xmlsoap.org/wsdl/'>

  <xsd:complexType name="KeyValueData">
<xsd:sequence>
  <xsd:element minOccurs="1" maxOccurs="1" name="id" type="string"/>
  <xsd:element minOccurs="1" maxOccurs="1" name="field" type="string"/>
</xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="ArrayOfKeyValueData">
<xsd:sequence>
  <xsd:element minOccurs="0" maxOccurs="unbounded"
           name="keyval" type="tns:KeyValueData"/>
</xsd:sequence>
  </xsd:complexType>

  <message name='getCatalogRequest'>
    <part name='catalogId' type='ArrayOfKeyValueData'/>
  </message>
  <message name='getCatalogResponse'>
    <part name='Result' type='xsd:string'/>
  </message>

  <portType name='CatalogPortType'>
    <operation name='getCatalogEntry'>
      <input message='tns:getCatalogRequest'/>
          <output message='tns:getCatalogResponse'/>
        </operation>
      </portType>

      <binding name='CatalogBinding' type='tns:CatalogPortType'>
    <soap:binding style='rpc'
      transport='http://schemas.xmlsoap.org/soap/http'
  />
    <operation name='getCatalogEntry'>
      <soap:operation soapAction='urn:localhost-catalog#
    getCatalogEntry'/>
      <input>
        <soap:body use='encoded' namespace=
      'urn:localhost-catalog'
          encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </input>
      <output>
        <soap:body use='encoded' namespace=
   'urn:localhost-catalog'
          encodingStyle='http://schemas.xmlsoap.org/soap/encoding/' />
      </output>
    </operation>
  </binding>

  <service name='CatalogService'>
    <port name='CatalogPort' binding=
  'CatalogBinding'>
      <soap:address location='server.php'/>
    </port>
  </service>
</definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:08:16.610

我看到您返回的问题是 a`var_dump()`但[var_dump](http://php.net/manual/en/function.var-dump.php)没有返回值。

改为使用`var_export()`。看看[手册](http://php.net/manual/en/function.var-export.php)。

所以在你的代码中，这看起来像：

```
$result = $conn->query($sql) or die(mysqli_error($conn));
$row = mysqli_fetch_array($result);
return var_export($array,true); 
```

# javascript - 无法清除画布

> ID：13805424
> 
> 赞同：0
> 
> 时间：2012-12-10T16:52:08.133
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

我很难重置/清除画布的内容。我目前正在使用：[Sketch.js](http://intridea.github.com/sketch.js/)插件来生成自由形式的画布。它完全符合我的需要，但是，它似乎没有一个简单的画布“重置”函数调用来清除内容。

jsfiddle：http: [//jsfiddle.net/k7fmq/](http://jsfiddle.net/k7fmq/)

**注意：**我读到“宽度”方法在 chrome 中不起作用，并且这两种方法似乎都不适用于“自由形式”画布，但仅适用于我没有测试的形状。

这是我到目前为止所尝试的：

标记

```
<div class="signature-field">
            Signature:
    <span class="sketch-container">
            <canvas style="border:1px solid grey; border-radius:7px;" id="simple_sketch" width="400" height="150"></canvas>
            <span class="save-signature">Save Signature</span>
            <span class="reset-canvas">Reset Canvas</span>
    </span>
    Date: <input type="text"><br/><br/>Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="text">
</div> 
```

JQuery（我最近的尝试）

```
$('.reset-canvas').click(function() {
        var myCanvas = document.getElementById("#simple_sketch");
        var width = myCanvas.width;
        myCanvas.width = width + 1;

 }); 
```

方法二：

```
 $('.reset-canvas').click(function() {
           canvas.width = canvas.width; 
   }); 
```

方法三：

```
$('.reset-canvas').click(function() {
       var myCanvas = document.getElementById("simple_sketch");
       var ctx = myCanvas.getContext('2d');
       ctx.clearRect(0, 0, myCanvas.width, myCanvas.height);
 }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T19:35:27.703

试试这个：http: [//jsfiddle.net/k7fmq/1/](http://jsfiddle.net/k7fmq/1/)

画板插件保留了一系列“动作”，并在每次更新时重新绘制它们（这似乎没有必要，真的，但是whatevs）。

```
var sktch = $('#simple_sketch').sketch();  // store a reference to the element.
var cleanCanvas = $('#simple_sketch')[0];

$('.save-signature').click(function(){
    /* replace canvas with image */
    var canvas = document.getElementById("simple_sketch");
    var img    = canvas.toDataURL("image/png");
    $('#simple_sketch').replaceWith('<img src="'+img+'"/>');
    $('.signature-buttons').replaceWith('');
});
$('.reset-canvas').click(function(){
    sktch.sketch().actions = [];       // this line empties the actions. 
    var myCanvas = document.getElementById("simple_sketch");
    var ctx = myCanvas.getContext('2d');

    ctx.clearRect(0, 0, myCanvas.width, myCanvas.height);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:59:27.040

试试这个：

```
var ctx = myCanvas.getContext('2d');
ctx.save();
ctx.setTransform(1, 0, 0, 1, 0, 0);
ctx.clearRect(0, 0, myCanvas.width, myCanvas.height);
ctx.restore(); 
```

# php - Zend缓存我们每次都需要创建一个新对象吗？

> ID：13805428
> 
> 赞同：0
> 
> 时间：2012-12-10T16:52:21.450
> 
> 标签：php, zend-framework

在我们的应用程序中，我们有一些与此非常相似的东西：

```
$cache  = App_Cache::getInstance()->newObject(300);
$sig = App_Cache::getCacheName(sha1($sql));
$res = $cache->load($sig);
if ($res === false) {
    $res = $db->fetchAll($sql);
    $cache->save($res, $sig);
} 
```

目前的问题是我们最终每次都会创建一个 Zend_Cache 的新对象，并且对于每个请求，这最终可能会被调用 300 多次。

```
class App_Cache {

    protected static $_instance = null;
    public static $enabled = true;
    protected $frontend = null;
    protected $backend = null;
    protected $lifetime = null;

    public function __construct() { }

    public static function getInstance() {
        if (is_null(self::$_instance))
            self::$_instance = new self();
        return self::$_instance;
    }

    public function newObject($lifetime = 0) {
        return Zend_Cache::factory('Core','Memcached',$this->getFrontend($lifetime),$this->getBackend());
    }

    public static function getCacheName($suffix) {
        $suffix = str_replace(array("-","'","@",":"), "_",$suffix);
        return "x{$suffix}";
    } 
```

在[Magento](https://github.com/magento/magento2/blob/master/app/code/core/Mage/Core/Model/Cache.php)中，他们似乎在 __construct 中创建了一次，其中 Concrete5 创建了一个静态属性。

我的问题是最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:37:04.627

我认为您的`getInstance()`方法应该返回您的 Zend_Cache 实例而不是 App_Cache。尝试这样的事情：

```
class App_Cache 
{
  protected static $_instance = null;
  protected static $_cacheInstance = null;
  public static $enabled = true;
  protected $frontend = null;
  protected $backend = null;
  protected $lifetime = null;

  public function __construct() { }

  public static function getInstance() {
    if (is_null(self::$_instance))
        self::$_instance = new self();
    return self::$_instance;
  }

  public function newObject($lifetime = 0) {
    if (is_null(self::$_cacheInstance))
      self::$_cacheInstance = Zend_Cache::factory('Core','Memcached',$this->getFrontend($lifetime),$this->getBackend());
    return self::$_cacheInstance;
  }

  public static function getCacheName($suffix) {
    $suffix = str_replace(array("-","'","@",":"), "_",$suffix);
    return "x{$suffix}";
  }
} 
```

~~请注意，我将`newObject()`方法更改为静态并将其参数添加到`getInstance()`. 这样，您可以`getInstance()`在整个代码中调用，它只会创建一次 Zend_Cache 实例，然后将其保存在 App_Cache 对象的`$_instance`变量中。~~

好的，更改代码以保存 Zend_Cache 对象的静态实例并在请求时返回它。这只会创建一次实例。我认为应该将方法名称更改为 getCache() 或类似的名称，以便更清楚它在做什么。

# java - 从预生成的 html 中为 span 添加亮点

> ID：13805435
> 
> 赞同：1
> 
> 时间：2012-12-10T16:52:33.487
> 
> 标签：java, android, html

您好，我不知道如何使用 styledText 字符串中的跨度，并只为这些跨度中的单词添加高亮。当前 styledText String 是我从另一个应用程序收到的代码示例。跨度的突出显示需要自动发生。有谁知道如何最好地做到这一点？

```
 public class ArticleActivity extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_article);

        TextView textview = new TextView(this);

        String styledText = "Vanwege een verdacht koffertje <span id=\"txt8264:idx8:tkn41:cls1\" class=\"supported dictionary\">is</span> vanochtend een tankstation langs <span id=\"txt8264:idx18:tkn4:cls11\" class=\"supported dictionary\">de</span> A16 bij Hazeldonk korte tijd afgesloten <span id=\"txt8264:idx32:tkn1156:cls1\" class=\"supported dictionary\">geweest</span>.<br/><br/>Volgens <span id=\"txt8264:idx37:tkn4:cls11\" class=\"supported dictionary\">de</span> politie stapte een man uit zijn auto en zette hij <span id=\"txt8264:idx59:tkn98:cls11\" class=\"supported dictionary\">het</span> koffertje naast <span id=\"txt8264:idx65:tkn98:cls11\" class=\"supported dictionary\">het</span> tankstation neer. Daarna reed hij weg.<br/><br/>Een explosievenverkenner van <span id=\"txt8264:idx87:tkn4:cls11\" class=\"supported dictionary\">de</span> politie onderzocht <span id=\"txt8264:idx93:tkn98:cls11\" class=\"supported dictionary\">het</span> koffertje en constateerde dat <span id=\"txt8264:idx103:tkn98:cls11\" class=\"supported dictionary\">het</span> leeg was. <span id=\"txt8264:idx110:tkn66:cls11\" class=\"supported dictionary\">Het</span> tankstation werd korte tijd later weer vrijgegeven. <span id=\"txt8264:idx127:tkn25:cls11\" class=\"supported dictionary\">De</span> afsluiting <span id=\"txt8264:idx131:tkn404:cls1\" class=\"supported dictionary\">had</span> geen gevolgen voor <span id=\"txt8264:idx139:tkn98:cls11\" class=\"supported dictionary\">het</span> verkeer op <span id=\"txt8264:idx145:tkn4:cls11\" class=\"supported dictionary\">de</span> A16 bij <span id=\"txt8264:idx151:tkn4:cls11\" class=\"supported dictionary\">de</span> grensovergang met België.<br/><br/>Ook <span id=\"txt8264:idx162:tkn4:cls11\" class=\"supported dictionary\">de</span> parkeerplaats achter <span id=\"txt8264:idx168:tkn98:cls11\" class=\"supported dictionary\">het</span> tankstation <span id=\"txt8264:idx172:tkn215:cls1\" class=\"supported dictionary\">was</span> bereikbaar.<br/><br/>";

        textview.setText(Html.fromHtml(styledText), TextView.BufferType.SPANNABLE);

        setContentView(textview);               
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:03:47.573

我发现工作的最佳/唯一方法是使用带有内联 html/css 的 webview。

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    WebView webView = new WebView(this);        
        String styledText = "Vanwege een verdacht koffertje <span id=\"txt8264:idx8:tkn41:cls1\" class=\"supported dictionary\">is</span> vanochtend een tankstation langs <span id=\"txt8264:idx18:tkn4:cls11\" class=\"supported dictionary\">de</span> A16 bij Hazeldonk korte tijd afgesloten <span id=\"txt8264:idx32:tkn1156:cls1\" class=\"supported dictionary\">geweest</span>.<br/><br/>Volgens <span id=\"txt8264:idx37:tkn4:cls11\" class=\"supported dictionary\">de</span> politie stapte een man uit zijn auto en zette hij <span id=\"txt8264:idx59:tkn98:cls11\" class=\"supported dictionary\">het</span> koffertje naast <span id=\"txt8264:idx65:tkn98:cls11\" class=\"supported dictionary\">het</span> tankstation neer. Daarna reed hij weg.<br/><br/>Een explosievenverkenner van <span id=\"txt8264:idx87:tkn4:cls11\" class=\"supported dictionary\">de</span> politie onderzocht <span id=\"txt8264:idx93:tkn98:cls11\" class=\"supported dictionary\">het</span> koffertje en constateerde dat <span id=\"txt8264:idx103:tkn98:cls11\" class=\"supported dictionary\">het</span> leeg was. <span id=\"txt8264:idx110:tkn66:cls11\" class=\"supported dictionary\">Het</span> tankstation werd korte tijd later weer vrijgegeven. <span id=\"txt8264:idx127:tkn25:cls11\" class=\"supported dictionary\">De</span> afsluiting <span id=\"txt8264:idx131:tkn404:cls1\" class=\"supported dictionary\">had</span> geen gevolgen voor <span id=\"txt8264:idx139:tkn98:cls11\" class=\"supported dictionary\">het</span> verkeer op <span id=\"txt8264:idx145:tkn4:cls11\" class=\"supported dictionary\">de</span> A16 bij <span id=\"txt8264:idx151:tkn4:cls11\" class=\"supported dictionary\">de</span> grensovergang met België.<br/><br/>Ook <span id=\"txt8264:idx162:tkn4:cls11\" class=\"supported dictionary\">de</span> parkeerplaats achter <span id=\"txt8264:idx168:tkn98:cls11\" class=\"supported dictionary\">het</span> tankstation <span id=\"txt8264:idx172:tkn215:cls1\" class=\"supported dictionary\">was</span> bereikbaar.<br/><br/>";
        final WebSettings webSettings = webView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        StringBuilder html = new StringBuilder();
        html.append("<html>");
        html.append("<head>");
        html.append("<style type='text/css'>  body .supported{background-color:#00A4E4;}  </style>");
        html.append("</head>");
        html.append("<body>");
        html.append("<h1>Some Heading</h1>");
        html.append(styledText.toString());
        html.append("</body></html>");
        webView.loadDataWithBaseURL("file:///android_asset/", html.toString(), "text/html", "UTF-8", "");           
        setContentView(webView);
        } 
```

# android - 在 AlertDialog 中膨胀复选框布局有效，textview 布局无效

> ID：13805436
> 
> 赞同：0
> 
> 时间：2012-12-10T16:52:34.047
> 
> 标签：android, textview, layout-inflater

当单击 listView 中的项目时，我有这段代码显示警报对话框；一切正常，直到我添加了一个复选框首选项，该首选项应该使另一个对话框能够输入文本字符串（稍后使用）。

```
AlertDialog.Builder helpBuilder = new AlertDialog.Builder(MyActivity.this);

helpBuilder.setIcon(android.R.drawable.ic_dialog_info);
adb.setTitle("title");
adb.setMessage("message");

        helpBuilder.setPositiveButton("positive", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {

                        boolean fileRenameEnabled = settings.getBoolean("text_view", false);
                        if (fileRenameEnabled == true) {
                            AlertDialog.Builder adb = new AlertDialog.Builder(MyActivity.this);
                            LayoutInflater adbInflater = LayoutInflater.from(MyActivity.this);
                            View inputFilename = adbInflater.inflate(R.layout.dialog_text_view, null);
                            tv = (TextView) inputFilename.findViewById(R.id.tv);
                            tv.setHint("hint");

                            adb.setView(tv);
                            adb.setTitle("New filename");

                            adb.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                    //some code here modifies method1()
                                    method1();
                                }
                            });
                            adb.show();
                        } else {
                            method1();
                        }
                    }
                });

                helpBuilder.setNeutralButton("neutral", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {

                        Checkbox1Enabled = settings.getBoolean("checkbox1", true);
                        if (Checkbox1Enabled == true) {
                            AlertDialog.Builder adb = new AlertDialog.Builder(MyActivity.this);
                            LayoutInflater adbInflater = LayoutInflater.from(MyActivity.this);
                            View info = adbInflater.inflate(R.layout.dialog_checkbox1, null);
                            cb = (CheckBox) info.findViewById(R.id.cb);
                            cb.setChecked(true);
                            adb.setView(info);
                            adb.setTitle("title");
                            adb.setMessage("message");

                            adb.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                    if (cb.isChecked() == false) {
                                        SharedPreferences.Editor editor = settings.edit();
                                        editor.putBoolean("checkbox1", false);
                                        editor.commit();
                                        Checkbox1Enabled = settings.getBoolean("checkbox1", true);
                                        Log.d(DEBUG_TAG, "Checkbox1Enabled: " + Checkbox1Enabled);
                                    }
                                    method2(); 
                            }
                            });
                            adb.show();
                        } else {
                            method2();
                        }
                    }
                });
                AlertDialog helpDialog = helpBuilder.create();
                helpDialog.show();
            }
}); 
```

}

事实是我在`onClickListener`中性按钮内部做几乎相同的事情；唯一的区别是我在`AlertDialog.Builder`而不是在复选框中膨胀了一个 textView （有效......）。

例外是：

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:57:30.900

您将添加`TextView`作为对话框的内容而不是膨胀的布局（并且`TextView`（很可能）在您膨胀的布局中已经有一个父级）。它应该是：

```
View inputFilename = adbInflater.inflate(R.layout.dialog_text_view, null);
tv = (TextView) inputFilename.findViewById(R.id.tv);
tv.setHint("hint");
adb.setView(inputFilename); 
```

# javascript - 如何动态更改在屏幕外运行的元素的 css 以使其保持在屏幕上？

> ID：13805447
> 
> 赞同：2
> 
> 时间：2012-12-10T16:53:11.997
> 
> 标签：javascript, jquery, position, positioning

我有一个鼠标悬停工具提示的所有意图。它存在于多个页面元素上（动态生成，所以我永远不知道会有多少或它们的位置。）

我抱怨在较低分辨率的屏幕上，最右边的元素列中的项目的工具提示会跑出屏幕。由于我不知道创建父项时的位置，因此我需要一种方法来检测（在鼠标悬停实际发生之前）工具提示 div 在显示时将部分在屏幕外，并相应地更改 css。

我知道 css 需要是什么；我遇到的问题是检测部分。我见过[一些类似的](https://stackoverflow.com/questions/6294284/how-to-know-when-an-element-will-be-off-screen) [问题](https://stackoverflow.com/questions/1230414/how-to-see-if-an-element-in-offscreen)，但解决方案都涉及使用原型或 jquery 插件。我仅限于这个项目的核心 jquery（或只是普通的 javascript）。

那里有任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:27:37.263

这是我放在 jsFiddle 上的一个快速演示：http: [//jsfiddle.net/2gGrd/](http://jsfiddle.net/2gGrd/)

HTML：

```
<p class="left">Left</p>
<p class="center">Center</p>
<p class="right">Right</p>​ 
```

CSS：

```
p {
    position: absolute;
    top: 50%;
}

.left {
    left: 0;
}

.center {
    left: 50%;
}

.right {
    right: 0;
}

.toolTip {
    width: 100px;
    height: 25px;
    background: red;
    color: green;
    position: absolute;
} 
```

JavaScript：

```
var tip;

$('p').hover(function() {
    $(this).css('color', 'red');
    var xpos = $(this).width() / 2 + $(this).offset().left;
    var ypos = $(this).height() / 2 + $(this).offset().top;
    tip = createToolTip('thing', xpos, ypos);
    $(this).parent().append(tip);
    tip.offset({
        left: tip.offset().left - tip.width() / 2
    });
    if (tip.offset().left < 0) tip.offset({
        left: 0
    });
    if (tip.offset().left + tip.width() > $('body').width()) {
        tip.offset({
            left: $('body').width() - (tip.width())
        });
    }
}, function() {
    $(this).css('color', '');
    $(tip).remove();
});

function createToolTip(text, x, y) {
    return $('<div />').addClass('toolTip').css('left', x).css('top', y).text(text);
}​ 
```

这不是完美的代码，也不是您对工具提示的想法，但希望它回答了有关将项目保留在屏幕上的问题。

# java - 安卓。如何从java代码更改视图大小

> ID：13805448
> 
> 赞同：1
> 
> 时间：2012-12-10T16:53:10.507
> 
> 标签：java, android

我有这个问题。我有一个活动：

```
public class MyActivity extends Activity
{
   public View m_top_overlay;
   private MyFrameLayout m_preview;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_activity);

    m_preview = (MyFrameLayout) findViewById(R.id.my_preview);  
    m_top_overlay = (View) findViewById(R.id.top_overlay);
    m_frame_preview.setParent(this);
}
   ... 
```

和 xml：

```
<com.myexample.MyFrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

    <View             
        android:id="@+id/top_overlay"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_gravity="top"
        android:background="#FFFFFF"
        />
<com.myexample.MyFrameLayout /> 
```

然后，我的自定义视图继承自 FrameLayout

```
public class MyFrameLayout extends FrameLayout
{   
    private MyActivity m_myActivity;

<constructors...>

    public void setParent(MyActivity _activity)
    {
        m_myActivity = _activity;
    }

    @Override
    protected void onLayout (boolean changed, int left, int top, int right, int bottom)
    {
        super.onLayout(changed, left, top, right, bottom);
        ViewGroup.LayoutParams params = m_myActivity.m_top_overlay.getLayoutParams();
        params.height = 200;
        m_myActivity.m_top_overlay.setLayoutParams(params);
    } 
```

所以，我想要的是从java代码设置我的视图（m_top_view）的高度。值 200 只是示例。我会计算的。但是我描述的方式不起作用。

# android - TableLayout.addView(view) 与 TableLayout.addView(view, pos)

> ID：13805455
> 
> 赞同：0
> 
> 时间：2012-12-10T16:53:38.103
> 
> 标签：android

我有两个布局文件，一个包含自定义视图的主文件，一个表格和一个行布局。根据情况，表格需要额外的行，从行布局中膨胀，如下所示：

```
TableLayout tl = (TableLayout) mParent.findViewById(R.id.table_layout);
LayoutInflater inflater = LayoutInflater.from(mParent);
TableRow tr = (TableRow) inflater.inflate(R.layout.layout_row, null);

tl.addView(tr, 0); 
```

这按预期工作。

```
tl.addView(tr) 
```

这根本没有任何作用。

为什么？在我尝试使用两个参数的 addView 之前，我花了半个小时来解决这个问题，现在我可以完成这项工作，但最好能真正理解为什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:03:31.453

愚蠢的问题。它被添加了，但是因为在屏幕之外所以不可见。为此事道歉。

# php - 在分辨率数组中找到最接近的较大分辨率和最接近的纵横比

> ID：13805456
> 
> 赞同：6
> 
> 时间：2012-12-10T16:53:44.873
> 
> 标签：php, arrays, image, resolution, image-resizing

我有一个数组：

```
$resolutions = array(
    '480x640',
    '480x800',
    '640x480',
    '640x960',
    '800x1280',
    '2048x1536'
); 
```

我想用最接近的纵横比（相同的方向）检索最接近的较大值。

所以，在`$needle = '768x1280'`-的情况下`800x1280`。
并且，在`$needle = '320x240'`-的情况下`640x480`。虽然这里最接近的是`480x640`它不应该匹配，因为它的纵横比差异太大。等等等等。

### 目的：

我有一组图像，其分辨率在`$resolutions`. 这些图像将用于智能手机壁纸。

使用 JavaScript，我发送一个请求`screen.width`并`screen.height`确定`$needle`.

在服务器端，我将获取给定分辨率的最接近的较大值，将其缩小以适应整个屏幕，同时保持纵横比，如果某些内容与尺寸重叠，则将其裁剪以完全适合屏幕。

### 问题：

虽然缩放和裁剪一切都非常简单，但我想不出一种方法来找出最接近的较大值，以加载参考图像。

### 提示：

如果它有帮助，`$resolutions`并且`$needle`可以采用不同的格式，即：`array('width' => x, 'height' => y)`.

### 尝试：

我试图用 levenshtein 距离进行实验：[http](http://codepad.viper-7.com/e8JGOw)
://codepad.viper-7.com/e8JGOw 显然，它只适用于`768x1280`并产生`800x1280`。因为`320x240`它导致了`480x640`但不适合这次。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T17:19:48.090

试试这个

```
echo getClosestRes('500x960');
echo '<br /> try too large to match: '.getClosestRes('50000x960');

function getClosestRes($res){
    $screens = array(
        'landscape'=>array(
            '640x480',
            '1200x800'
        ),
        'portrait'=>array(
            '480x640',
            '480x800',
            '640x960',
            '800x1280',
            '1536x2048'
        )
    );

    list($x,$y)=explode('x',$res);
    $use=($x>$y?'landscape':'portrait');

    // if exact match exists return original
    if (array_search($res, $screens[$use])) return $res; 

    foreach ($screens[$use] as $screen){
        $s=explode('x',$screen);
        if ($s[0]>=$x && $s[1]>=$y) return $screen;
    }
    // just return largest if it gets this far.
    return $screen; // last one set to $screen is largest
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:20:07.640

做了一个快速的类。应该能够找到您指定的任何两个数字的最小分辨率。我已经用您指定的分辨率预加载了它，但`$_resolutions`阵列可以设置为您喜欢的任何标准，也可以即时更改。

```
class Resolution {

    /**
     * Standard resolutions
     *
     * Ordered by smallest to largest width, followed by height.
     *
     * @var array
     */
    private $_resolutions = array(
        array('480', '640'),
        array('480', '800'),
        array('640', '480'),
        array('640', '960'),
        array('800', '1280'),
        array('2048', '1536')
    );

    /**
     * Width
     *
     * @var int
     */
    private $_width;

    /**
     * Height
     *
     * @var int
     */
    private $_height;

    /**
     * Constructor
     *
     * @param  int $width
     * @param  int $height
     * @return void
     */
    public function __construct($width, $height) {
        $this->setSize($width, $height);
    }

    /**
     * Find the minimum matched standard resolution
     *
     * @param  bool $revertToLargest (OPTIONAL) If no large enough resolution is found, use the largest available.
     * @param  bool $matchAspectRatio (OPTIONAL) Attempt to get the closest resolution with the same aspect ratio. If no resolutions have the same aspect ratio, it will simply use the minimum available size.
     * @return array The matched resolution width/height as an array.  If no large enough resolution is found, FALSE is returned, unless $revertToLargest is set.
     */
    public function getMinimumMatch($revertToLargest = false, $matchAspectRatio = true) {
        if ($matchAspectRatio) {
            $aspect = $this->_width/$this->_height;
            foreach ($this->_resolutions as $res) {
                if ($res[0]/$res[1] == $aspect) {
                    if ($this->_width > $res[0] || $this->_height >     $res[1]) {
                        return ($revertToLargest ? $res : false);
                    }
                    return $res;
                }
            }
        }
        foreach ($this->_resolutions as $i => $res) {
            if ($this->_width <= $res[0]) {
                $total = count($this->_resolutions);
                for ($j = $i; $j < $total; $j++) {
                    if ($this->_height <= $this->_resolutions[$j][1]) {
                        return $this->_resolutions[$j];
                    }
                }
            }
        }
        return ($revertToLargest ? end($this->_resolutions) : false);
    }

    /**
     * Get the resolution
     *
     * @return array The resolution width/height as an array
     */
    public function getSize() {
        return array($this->_width, $this->_height);
    }

    /**
     * Set the resolution
     *
     * @param  int $width
     * @param  int $height
     * @return array The new resolution width/height as an array
     */
    public function setSize($width, $height) {
        $this->_width = abs(intval($width));
        $this->_height = abs(intval($height));
        return $this->getSize();
    }

    /**
     * Get the standard resolutions
     *
     * @return array
     */
    public function getStandardResolutions() {
        return $this->_resolutions;
    }

    /**
     * Set the standard resolution values
     *
     * @param  array An array of resolution width/heights as sub-arrays
     * @return array
     */
    public function setStandardResolutions(array $resolutions) {
        $this->_resolutions = $resolutions;
        return $this->_resolutions;
    }

} 
```

**示例用法**

```
$screen = new Resolution(320, 240);
$screen->getMinimumMatch();
// Returns 640 x 480 (aspect ratio matched)

$screen = new Resolution(1280, 960);
$screen->getMinimumMatch();
// Returns 640 x 480 (aspect ratio matched)

$screen = new Resolution(400, 960);
$screen->getMinimumMatch();
// Returns 640 x 960 (aspect ratio not matched, so uses closest fit)

$screen = new Resolution(5000, 5000);
$screen->getMinimumMatch();
// Returns FALSE (aspect ratio not matched and resolution too large)

$screen = new Resolution(5000, 5000);
$screen->getMinimumMatch(true);
// Returns 2048 x 1536 (aspect ratio not matched and resolution too large, so uses largest available) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:14:46.597

如果你有一个数字来比较会更容易吗？

这是一个比率，所以就这样做，例如：640 / 480 = 1.33*

那么您至少有一些简单易用的东西可以与您发送的尺寸进行比较，并且大概会得出一个公差？

一个简单的例子，假设比率数组从最低到最高排序。如果这是一个问题，那么我们将创建一个按区域排序的搜索（x x y）。

```
function getNearestRatio($myx, $myy)
{

    $ratios = array(
        array('x'=>480, 'y'=>640),
        array('x'=>480, 'y'=>800),
        array('x'=>640, 'y'=>480),
        array('x'=>640, 'y'=>960),
        array('x'=>800, 'y'=>1280),
        array('x'=>2048, 'y'=>1536)
    );
    $tolerance = 0.1;
    foreach ($ratios as $ratio) {
         $aspect = $ratio['x'] / $ratio['y'];
        $myaspect = $myx / $myy;

        if ( ! ($aspect - $tolerance < $myaspect && $myaspect < $aspect + $tolerance )) {
            continue;
        }

        if ($ratio['x'] < $myx || $ratio['y'] < $myy) {
            continue;
        }
        break;
    }

    return $ratio;
} 
```

正如您在问题中提到的那样，我已经建立了一个容差，以便它匹配“附近”的纵横比。

这个函数应该通过你给出的两个测试用例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T17:20:37.527

您可以先提取数组，如：

```
$resolutions = array(
    '480x640',
    '480x800',
    '640x480',
    '640x960',
    '800x1280',
    '2048x1536'
);

foreach ($resolutions as $resolution):
    $width[]=(int)$resolution;
    $height[]=(int)substr(strrchr($resolution, 'x'), 1);
    echo $width,' x ',$height,'<br>';
endforeach; 
```

然后，您可以将给定的 needle 与数组匹配`in_array`，`array_search`例如：

```
$key = array_search('480', $items);
echo $key; 
```

当您拥有密钥时，只需将其递增为最接近的更大值。我会让你自己做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T17:26:14.297

好的，我有。我编写了一个函数，它返回最低的合适分辨率，并且还考虑了非标准分辨率。

```
 <?php
    //some obscure resolution, for illustrative purposes
    $theirResolution = '530x700'; 
    $resolutions = array(
        '480x640',
        '480x800',
        '640x480',
        '640x960',
        '800x1280',
        '2048x1536'
    );

    function findSmallestResolution($theirResolution,$resolutions){
        $temp = explode('x',$theirResolution);
        //Isolate their display's X dimension
        $theirResolutionX = intval($temp[1]);
        foreach($resolutions as $key => $value){
            $temp = explode('x',$value);
            //if the current resolution is bigger than or equal to theirs in the X dimension, then it's a possibility.
            if($theirResolutionX <= intval($temp[1])){
                $possibleResolutionsX[] = $value;
            }
        }
        //Now we'll filter our $possibleResolutions in the Y dimension.
        $temp = explode('x',$theirResolution);
        //Isolate their display's Y dimension
        $theirResolutionY = intval($temp[0]);
        foreach($possibleResolutionsX as $key => $value){
            $temp = explode('x',$value);
            //if the current resolution is bigger than or equal to theirs in the X dimension, then it's a possibility.
            if($theirResolutionY <= intval($temp[0])){
                $possibleResolutionsXY[] = $value;
            }
        }
        //at this point, $possibleResolutionsXY has all of our entries that are big enough. Now to find the smallest among them.
        foreach($possibleResolutionsXY as $key => $value){
            $temp = explode('x', $value);
            //since we didn't specify how standard our app's possible resolutions are, I'll have to measure the smallest in terms of total dots and not simply X and Y.
            $dotCount[] = intval($temp[0]) * intval($temp[1]);
        }
        //find our resolution with the least dots from the ones that still fit the user's.
        foreach($dotCount as $key => $value){
            if($value == min($dotCount)){
                $minkey = $key;
            }
        }
        //use the key from dotCount to find its corresponding resolution from possibleResolutionsXY.
        return $possibleResolutionsXY[$minkey];
    }

    findSmallestResolution($theirResolution,$resolutions);
    // returns '640x960'.

    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T17:28:07.800

首先，我会先使用宽度，然后使用高度来存储干草堆：

```
$resolutions = array(
    array('w' => 640, 'h' => 480),
    array('w' => 800, 'h' => 480),
    array('w' => 960, 'h' => 640),
    array('w' => 1280, 'h' => 800),
    array('w' => 2048, 'h' => 1536),
); 
```

然后，计算针和每个项目之间的尺寸差异，然后是面积大小：

```
array_walk($resolutions, function(&$item) use ($needle) {
    $item['aspect'] = abs($item['w'] - $needle['w']) / abs($item['h'] - $needle['h']);
    $item['area'] = $item['w'] * item['h'];
});

usort($resolutions, function($a, $b) {
  if ($a['aspect'] != $b['aspect']) {
    return ($a['aspect'] < $b['aspect']) ? -1 : 1;
  }
 return 0;
}); 
```

然后根据更大的分辨率过滤列表；第一个匹配是最接近针长宽比的匹配：

```
$needle_area = $needle['w'] * $needle['h'];
foreach ($resolutions as $item) {
    if ($needle_area < $item['area']) {
        return $item;
    }
}
return null; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T18:19:10.810

嗯，结果比我预期的要大，但我认为这符合标准。它通过将可用分辨率分解为它们的比率来工作。然后按目标比率和可用比率之间的增量升序排序，然后按大小（像素）降序排序。返回顶部匹配 - 这应该是最接近、最小的匹配。

```
class ResolutionMatcher
{
    private $resolutions;

    public function __construct(array $resolutions)
    {
        foreach ($resolutions as $resolution) {
            $this->resolutions[$resolution] = $this->examineResolution($resolution);
        }
    }

    public function findClosest($target)
    {
        $targetDetails = $this->examineResolution($target);
        $deltas = array();
        foreach ($this->resolutions as $resolution => $details) {
            if ($details['long'] < $targetDetails['long'] || $details['short'] < $targetDetails['short']) continue;
            $deltas[$resolution] = array(
                'resolution' => $resolution,
                'delta' => abs($details['ratio'] - $targetDetails['ratio']),
            );
        }
        $resolutions = $this->resolutions;
        uasort($deltas, function ($a, $b) use ($resolutions) {
            $deltaA = $a['delta'];
            $deltaB = $b['delta'];
            if ($deltaA === $deltaB) {
                $pixelsA = $resolutions[$a['resolution']]['pixels'];
                $pixelsB = $resolutions[$b['resolution']]['pixels'];
                if ($pixelsA === $pixelsB) {
                    return 0;
                }
                return $pixelsA > $pixelsB ? 1 : -1;
            }
            return $deltaA > $deltaB ? 1 : -1;
        });
        $resolutions = array_keys($deltas);
        return array_pop($resolutions);
    }

    private function examineResolution($resolution)
    {
        list($width, $height) = explode('x', $resolution);
        $long = ($width > $height) ? $width : $height;
        $short = ($width < $height) ? $width : $height;
        $ratio = $long / $short;
        $pixels = $long * $short;
        return array(
            'resolutions' => $resolution,
            'pixels' => $pixels,
            'long' => $long,
            'short' => $short,
            'ratio' => $ratio,
        );
    }
} 
```

用法：

```
$resolutions = array(
    '480x640',
    '480x800',
    '640x480',
    '640x960',
    '800x1280',
    '2048x1536'
);

$target = $_GET['target'];

$matcher = new ResolutionMatcher($resolutions);
$closest = $matcher->findClosest($target); 
```

# php - 如何在我的 Mac 上使用 Homebrew 安装 PHP 5.4.9？

> ID：13805457
> 
> 赞同：18
> 
> 时间：2012-12-10T16:53:49.243
> 
> 标签：php, homebrew

我需要将我 Mac 上的 PHP 从 5.3.x 升级到 5.4.9，这是我们服务器上的版本。如何使用 Homebrew 做到这一点？我试过`brew install php54`并得到一个错误，它不知道那个公式。我在哪里可以获得公式列表，以便我知道我的选择是什么？我试过`brew list`了，但也没有用。

# python - 制作字典列表按值传递

> ID：13805461
> 
> 赞同：3
> 
> 时间：2012-12-10T16:54:05.337
> 
> 标签：python, pass-by-value

我对听写列表有点头疼。

```
def funk(x):
    for i in x:
        i['a'] += 1
        print i

list1 = [{'a':1, 'b':2}, {'a':3, 'b':4}]
funk(list1)
print list1 
```

这将输出：

```
{'a': 2, 'b': 2}
{'a': 4, 'b': 4}
[{'a': 2, 'b': 2}, {'a': 4, 'b': 4}] 
```

但我想要这个：

```
{'a': 2, 'b': 2}
{'a': 4, 'b': 4}
[{'a':1, 'b':2}, {'a':3, 'b':4}] 
```

我如何`list1`保持原样？例如：**`[{'a':1, 'b':2}, {'a':3, 'b':4}]`**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T16:56:08.857

`funk()`可以制作副本`x`并修改该副本，而不是修改原始`x`.

```
import copy

def funk(x):
    x = copy.deepcopy(x)
    for i in x:
        i['a'] += 1
        print i

list1 = [{'a':1, 'b':2}, {'a':3, 'b':4}]
funk(list1)
print list1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:58:35.563

在我看来，`copy`字典的方法可能会对您有所帮助：

```
def funk(x):
    for i in x:
        new_dict = i.copy()
        new_dict['a'] += 1
        print new_dict 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:59:04.887

显然，它是否可行取决于您的操作的复杂性/目标，但不是就地修改您的列表，而是使用[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)来创建一个新的：

```
def funk(x):
    return [{key: value+1 if key == "a" else value for key, value in i.items()} for i in x] 
```

在您的示例中，您正在打印值，因此这将没有用，但如果您的意图可以通过拥有一个新的、更改的 dicts 列表来填充，那么它可能是最好的路线。

# c# - 对象引用未设置为对象错误尝试使用 LINQ 递归查找对象的实例

> ID：13805463
> 
> 赞同：1
> 
> 时间：2012-12-10T16:54:15.393
> 
> 标签：c#, linq

我正在尝试更新我的对象图中的一个项目，该项目可以跨越“n”级深度。

以下是我的对象模型：

```
 public class Entity
    {
        public string Name { get; set; }
    }

    public class Category : Entity
    {        
        public List<Category> Categories { get; set; }
        public List<Product> Products { get; set; }      
    }

    public class Product : Entity
    {        
    } 
```

我的观点与`ObservableCollection<Category> Categories`. 我想要做的是给定一个类别名称，我需要从集合中检索与该对象匹配的第一个对象。

例如，给定这样的列表和面部组织类别，我需要从集合中检索面部组织类别对象。

```
Category - Pharmacy
  |-Product - Aspirin
  |-Product - Tylenol
  |-Category - Tooth Paste
  |  |-Product - Crest
  |  |-Product - Colgate
  |-Category - Paper Products
   |-Category - Toilet Paper
   |  |-Product - NoName
   |  |-Product - Charmin
   |-Category - Facial Tissue
      |-Product - Kleenex
Category - Household
  |-Product - Pinesol Cleaner
  |-Product - Garbage Bags 
```

我已经尝试过了，但是当我在层次结构中搜索级别 >2 时，它会抛出一个***未设置为对象异常实例的对象引用。***

```
 return Categories.FirstOrDefault(n => n.Name == name) ??
                   Categories.SelectMany(node => node.Categories).Where(lx => lx.Name == name).FirstOrDefault(); 
```

**注意：**有时类别在层次结构的深处可能为空。即，如果没有类别，则集合设置为空。此外，解决方案不一定需要使用 LINQ。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:16:07.643

您可以使用以下任一方法递归遍历树结构：

```
public static IEnumerable<T> Traverse<T>(IEnumerable<T> source, Func<T, IEnumerable<T>> childSelector)
{
    var queue = new Queue<T>(source);
    while (queue.Any())
    {
        var item = queue.Dequeue();
        yield return item;
        foreach (var child in childSelector(item))
        {
            queue.Enqueue(child);
        }
    }
}

public static IEnumerable<T> Traverse<T>(T root, Func<T, IEnumerable<T>> childSelector)
{
    return Traverse(new[] { root }, childSelector);
} 
```

单个根项有一个重载，另一个需要一系列项。

如果您愿意，可以使用实际递归来实现它们，但我更喜欢显式数据结构。如果您想要深度优先搜索而不是呼吸优先搜索，只需将 a 更改`Queue`为 a`Stack`并相应地更新方法。

要使用它，您可以执行以下操作：

```
Category root = new Category();
var searchResult = Traverse(root, item => item.Categories)
            .Where(category => category.Name == "testValue")
            .FirstOrDefault(); 
```

您似乎也收到了空错误，因为您有空错误`Categories`。如果可能的话，我*强烈*建议您解决这个问题，而不是处理它。如果实体没有类别，它应该有一个*空*列表，而不是空列表。`Traverse`话虽如此，如果您有任何空项目，您可以按如下方式调整调用：

```
Traverse(root, item => item.Categories ?? Enumerable.Empty<Category>()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:15:38.300

LINQ 本身没有用于[*深度优先搜索*](http://en.wikipedia.org/wiki/Depth-first_search)的专用运算符（这是您在这种情况下所需要的）。但是，鉴于您的要求，有一个使用简单递归函数的相当简单的解决方案：

```
// Returns the first category with the given name or null, if none is found
Category findCategory(Category start, String name) {
    if (start.name == name) {
        return start;
    }
    if (start.Categories == null) {
        return null;
    }
    return (from c in start.Categories
            let found = findCategory(c, name)
            where found != null
            select found).FirstOrDefault()
} 
```

您可以考虑将`Categories`没有子类别的类别的属性设置为空列表而不是`null`. 这允许您在此处跳过空值检查（可能在许多其他地方也可能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:33:32.623

这是一个简单的解决方案，尽管它不仅使用 Linq：

```
public Category GetCategory(string name, List<Category> Categories) 
{
    Category found = Categories.FirstOrDefault(cat => cat.Name == name);
    return found ?? Categories.Select(cat => GetCategory(name,cat.Categories))
                              .FirstOrDefault(cat => cat != null);
} 
```

# php - 如何将 Joomla 用户数据放入 json 数组

> ID：13805467
> 
> 赞同：-4
> 
> 时间：2012-12-10T16:54:28.823
> 
> 标签：php, mysql, json

```
$sql = "SELECT * FROM `jos_users` LIMIT 0, 30 ";

$response = array();
$posts = array();
$result=mysql_query($sql);

while($row=mysql_fetch_array($result)) 
{ 
    $id=$row['id']; 
    $id=$row['name']; 

    $posts[] = array('id'=> $title, 'name'=> $name);

} 

$response['jos_users'] = $posts;

$fp = fopen('results.json', 'w');
fwrite($fp, json_encode($response));
fclose($fp); 
```

我想将用户 id 和名称获取到 json 文件。我认为 id 代码错误。有人可以纠正吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-10T16:58:18.927

您正在覆盖`$id`变量，然后您没有使用它...

`$title`似乎,`$name`和`$id`变量在那里一团糟。

试试这个：

```
 <?php 
$sql = "SELECT * FROM `jos_users` LIMIT 0, 30 ";

$response = array();
$posts = array();
$result=mysql_query($sql);
while($row=mysql_fetch_array($result)) 
{ 
$id=$row['id'];  //change here
$name=$row['name']; //change here

//change variables here
$posts[] = array('id'=> $id, 'name'=> $name);

} 

$response['jos_users'] = $posts;

$fp = fopen('results.json', 'w');
fwrite($fp, json_encode($response));
fclose($fp);

?> 
```

# c# - XNA 3.1 DrawUserPrimitives with Anti Aliasing - MultiSampling 不起作用？

> ID：13805474
> 
> 赞同：2
> 
> 时间：2012-12-10T16:54:50.460
> 
> 标签：c#, xna, antialiasing, multisampling

所以这是我今天早些时候提出的一个问题的延续。我使用 XNA 3.1 的 DrawUserPrimitives 方法为自己构建了一些漂亮的色带轨迹，主要是通过在运动发生时扩展多边形。除了一件事 - 抗锯齿之外，这一切看起来都非常时尚和漂亮。我一生都无法弄清楚如何应用它。

我在游戏构造函数中设置了这个：

```
graphics.PreferMultiSampling = true; 
```

我还添加了这个来测试硬件：

```
 graphics.PreparingDeviceSettings += new EventHandler<PreparingDeviceSettingsEventArgs>((sender, e) =>
        {
            PresentationParameters parameters = e.GraphicsDeviceInformation.PresentationParameters;
            parameters.MultiSampleQuality = 0;

        #if XBOX
                pp.MultiSampleType = MultiSampleType.FourSamples;
                return;
        #else

            int quality;
            GraphicsAdapter adapter = e.GraphicsDeviceInformation.Adapter;
            SurfaceFormat format = adapter.CurrentDisplayMode.Format;

            if (adapter.CheckDeviceMultiSampleType(DeviceType.Hardware, format, false, MultiSampleType.FourSamples, out quality))
            {
                parameters.MultiSampleType = MultiSampleType.FourSamples;
            }
            else if (adapter.CheckDeviceMultiSampleType(DeviceType.Hardware, format, false, MultiSampleType.TwoSamples, out quality))
            {
                parameters.MultiSampleType = MultiSampleType.TwoSamples;
            }
        #endif
        }); 
```

通过添加一些打印行，我知道我的硬件可以支持 4 个示例 AA，但这一切似乎没有任何区别。我似乎无法让它发挥作用。

这是我的一条路线的屏幕截图，其中应用了所有代码：

![看？ 没有AA！](../Images/af7eae580028ee54b5e78bfed72573f5.png)

我真的很感激一些帮助。不久前，我查看了此问题的解决方案，以解决不同的问题，但当时也无法使其正常工作。

嗯，干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:53:51.157

这个也修好了！

问题是，虽然后台缓冲区获得了正确的抗锯齿设置，但渲染目标却没有。这意味着绘制到渲染目标是在没有 AA 的情况下完成的，但是随后绘制到后台缓冲区的纹理是用它完成的。我现在已经修好了。

# python - 如何将布尔的numpy记录数组转换为整数以计算协方差？

> ID：13805476
> 
> 赞同：3
> 
> 时间：2012-12-10T16:54:52.713
> 
> 标签：python, numpy, covariance

我有大约 40 个维度的大约 50 万个条目的记录数组。维度是数据类型的混合。我想子选择 5 个布尔维度并获取大约 1k 个条目的块，然后计算协方差矩阵以查看维度相关性。我完全不知道如何使用`.view()`或`.astype()`进行这种转换。初始子选择：

```
p_new[['no_gender', 'no_age', 'no_income', 'no_politics', 'no_edu']]
array([(False, False, True, False, False), (True, True, False, True, True),
       (True, True, False, True, True), ...,
       (True, True, True, True, True), (True, True, True, True, True),
       (True, True, True, True, True)], 
      dtype=[('no_gender', '|b1'), ('no_age', '|b1'), ('no_income', '|b1'), ('no_politics', '|b1'), ('no_edu', '|b1')]) 
```

我所有的转换尝试都将我的 5 个维度折叠为 1（不需要！），所以我最终`(1000,5) dtype=np.bool`得到.`(1000,5) dtype=np.int32``(1000,1) dtype=np.int32`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:22:03.080

Notice that in a recarray each record is treated as a single element, ie for the following array the shape is (3,) not (3, 5).

```
A = np.array([('joe', 44, True, True, False),
              ('jill', 22, False, False, False),
              ('Jack', 21, True, False, True)],
             dtype=[['name', 'S4'], ['age', int], ['x', bool],
                    ['y', bool], ['z', bool]])
print A.shape
# (3,) 
```

The easiest way to do what you're asking for is probably something like:

```
tmp = [A[field] for field in ['x', 'y', 'z']]
tmp = np.array(tmp, dtype=int) 
```

You might also be able to use views, but using views for arrays with mixed data types can get kind of tricky.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:38:27.063

您实际上根本不必将布尔值转换为整数。在 Python 中，`True`并且`False`实际上是 的子类`int`，因此您可以像往常一样简单地对它们进行所有数学运算。 `True`是`1`和`False`是`0`。

证明：

```
>>> isinstance(True, int)
True
>>> isinstance(False, int)
True
>>> (True + True * 3) / (True + False)
4 
```

虽然我承认，但我不能 100% 确定`numpy`数据类型以及它如何与您尝试做的事情发生关系。

### 更新

稍微`numpy`研究一下数据类型，它们似乎确实表现出相似但不完全相同的行为。 `numpy.bool`字面上与 相同`bool`，它只是标准的 Python 布尔值，所以它肯定表现出所有相同的行为并且可以用作整数。但是，`numpy.int32`是从 单独子类化的`int`，所以`isinstance(numpy.bool(1), numpy.int32)`自然地计算为`False`。也许你直接去`int`/会少一些麻烦`numpy.int`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T06:27:37.357

您可以创建一个新的 dtype，然后使用`a.astype(new_dtype)`：

```
In [44]: a
Out[44]: 
array([(False, False, True, False, False), (True, True, False, True, True),
       (True, True, False, True, True), (True, True, True, True, True),
       (True, True, True, True, True), (True, True, True, True, True)], 
      dtype=[('no_gender', '|b1'), ('no_age', '|b1'), 
             ('no_income', '|b1'), ('no_politics', '|b1'), ('no_edu', '|b1')])

In [45]: new_dtype = np.dtype([(name, np.int) for name in a.dtype.names])

In [46]: a.astype(new_dtype)
Out[46]: 
array([(0, 0, 1, 0, 0), (1, 1, 0, 1, 1), (1, 1, 0, 1, 1), (1, 1, 1, 1, 1),
       (1, 1, 1, 1, 1), (1, 1, 1, 1, 1)], 
      dtype=[('no_gender', '<i8'), ('no_age', '<i8'), ('no_income', '<i8'),
             ('no_politics', '<i8'), ('no_edu', '<i8')]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T17:59:27.320

我猜你的问题是你在改变类型时对整行进行操作。如果您将其视为 bool 数组，您将获得所有值，然后您可以执行`astype`. 但是你必须重塑。

```
pnew.view("bool").astype(int).reshape(len(pnew),-1) 
```

更容易使用`.tolist()`，但可能会使用更多内存并且可能会更慢。

```
asarray(pnew.tolist()).astype(int) 
```

# javascript - 谷歌图表 - 如何并排显示带有饼图的数据

> ID：13805479
> 
> 赞同：1
> 
> 时间：2012-12-10T16:55:06.750
> 
> 标签：javascript, asp.net-mvc-4, google-visualization

我目前正在尝试找到一种方法来显示与饼图相关的数据，并在表格或图例字段中使用生成的颜色（如“颜色标签值百分比”）。

我提供图表颜色，所以谷歌自己决定。

这是我正在寻找的示例：

![在此处输入图像描述](../Images/a503772338cb9bbb6dad3f1240ed06af.png)

顺便说一句，我正在使用 Google JSAPI 来生成这个 svg 饼图。

# java - java按钮按下3秒

> ID：13805482
> 
> 赞同：2
> 
> 时间：2012-12-10T16:55:11.460
> 
> 标签：java, button, swt

我创建了一个按钮，我想要这些：

当用户单击按钮时，它会保持按下状态 3 秒。3 秒后按钮应该再次看起来可以按下。所以用户不能在不等待 3 秒的情况下再次单击该按钮。我试过这些：

```
{
    button3 = new Button(c20, SWT.PUSH | SWT.CENTER);
    button3.setText("QUERY");
    button3.setBounds(205, 131, 62, 40);
    button3.addSelectionListener(new SelectionListener() {
        public void widgetSelected(SelectionEvent event) {
            try {
                start_query();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        setPressedIcon();///??
        public void widgetDefaultSelected(SelectionEvent event) {
        }
    });
} 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:08:00.320

愿这对你有帮助

```
btn.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            btn.setEnabled(false);
            doSomething() ;
            btn.setEnabled(true);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:09:16.450

单击按钮时，您需要生成一个新线程。

```
 button3.addSelectionListener(new SelectionListener() {
    public void widgetSelected(SelectionEvent event) {
        try {
            Thread t = new Thread(){
              int count = 0;
              setPressedIcon();
              while(count < 4){
                 try{
                  Thread.sleep(1000);
                  count++;
                 }
              }
              setUnpressedIcon();
            }
            t.start();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    setPressedIcon();///??
    public void widgetDefaultSelected(SelectionEvent event) {
    }
}); 
```

如果您在与 UI 相同的线程中执行此操作，则所有内容都将在 3 秒内停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T17:22:39.757

```
btn.addActionListener(new ActionListener() {
  @Override
  public void actionPerformed(ActionEvent e) {
   btn.setEnabled(false);
   Timer timer = new Timer( 3000, new ActionListener(){
     @Override
     public void actionPerformed( ActionEvent e ){
       btn.setEnabled( true );
     }
   }
   timer.setRepeats( false );
   timer.start();
 }
}); 
```

我从@vels4j 那里得到了答案并添加`javax.swing.Timer`了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T09:09:21.877

不要使用 PUSH `Button`，而是使用 TOGGLE 按钮。这样，您可以根据需要一直按住它。

```
final boolean buttonPressed[] = new boolean[] { false };
final Button button = new Button(comp, SWT.TOGGLE);
button.setText("Test");
button.addSelectionListener(new SelectionAdapter() {
    @Override
    public void widgetSelected(SelectionEvent e) {
        if (buttonPressed[0]) {
            button.setSelection(true);              
            return;
        }

        buttonPressed[0] = true;
        Display.getDefault().timerExec(3000, new Runnable() {
            @Override
            public void run() {
                button.setSelection(false);
                buttonPressed[0] = false;
            }
        });
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T08:58:30.563

尝试禁用它，让线程休眠三秒钟，然后再次启用它：

```
private void setPressedIcon(){
 try {
  button3.setEnabled(false);
  Thread.sleep(3000);
 } catch(InterruptedException e) {
 } finally {
   //reenable the button in all cases
   button3.setEnabled(true);
} 
```

# objective-c - 不使用点语法反转 BOOL 属性

> ID：13805490
> 
> 赞同：1
> 
> 时间：2012-12-10T16:55:43.093
> 
> 标签：objective-c, syntax, declared-property

在这行代码中，我正在反转一个`BOOL`值：

```
 someObject.boolValue = ![someObject boolValue]; 
```

如何在没有点语法的情况下用“纯”Objective-C 语法重写这一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:58:06.390

采用

```
[someObject setBoolValue:!([someObject boolValue])]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:57:20.293

`[someObject setBoolValue:![someObject boolValue]];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:45:40.413

始终使用 NSNumber 来避免您的 BOOL 设置为非布尔（大于一个）值。

```
NSNumber * currValue = [NSNumber numberWithBOOL:[someObject boolValue]];
NSNumber * yesNum = [NSNumber numberWithBOOL:YES];
NSNumber * noNum = [NSNumber numberWithBOOL:NO];

if( NSOrderedSame == [currValue compare:yesNum] ){
    [someObject setBoolValue:[noNum boolValue]];
}
else if( NSOrderedSame == [currValue compare:noNum] ){
    [someObject setBoolValue:[yesNum boolValue]];
}
else {
    // Set default
    [someObject setBoolValue:[yesNum boolValue]];
} 
```

# email - 从 Google 读取电子邮件列表

> ID：13805492
> 
> 赞同：0
> 
> 时间：2012-12-10T16:55:49.587
> 
> 标签：email, pop3

现在我知道这对某些人来说可能很容易，但我似乎找不到答案。

有没有人在 asp.net 中有一个解决方案来遍历 Gmail 中列出的电子邮件，我可以在其中遍历每封电子邮件并获取地址详细信息、内容和任何附件。

然后我想将详细信息保存到数据库（简单一点）

我只是在寻找给定日期的列表电子邮件脚本。

这很容易做到吗？我是在 asp.net 中做的，所以这里面的任何例子在 VB 格式中都会很棒。

谢谢乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:02:55.227

您应该首先参考[Google Gmail API](https://developers.google.com/google-apps/gmail/)。正如您会注意到的那样，Google 不会让查询和获取电子邮件变得太容易。这就是 Gmail 的用途！

当然，您可以创建自己的 IMAP 客户端，因为 Gmail 提供的支持相同。我找到了这个[IMAP 客户端库](http://www.codeproject.com/Articles/8008/IMAP-Client-library-using-C)，但它在 C# 中。

希望这可以帮助。

# javascript - 合金形式模式？

> ID：13805494
> 
> 赞同：1
> 
> 时间：2012-12-10T16:55:53.493
> 
> 标签：javascript, forms, titanium, appcelerator-mobile

在使用 Titanium 的 Alloy 框架时，模型使用 Backbone.js。我是 Backbone.js 和 Alloy 的新手。

但是我对 ExtJS 很熟悉，在 ExtJS 中，您可以创建一个表单，然后说如下内容：

```
form.loadRecord(record);       // where record is an instance of a model 
```

接着

```
form.getRecord(record);        // When you're saving the form, get the record
var vals = form.getValues();   // And then get the values from the form that the user changed
record.setValues(vals);        // Update your record with whatever values the user changed. 
```

所以我的问题是，合金中的表格模式是什么？还是没有？

我可以轻松地制作自己的函数，但是在尝试将模型绑定到这样的表单对象时，我遇到了应用程序崩溃的问题：

```
that.model = model;             // where model was passed in to the form.loadRecord function. 
```

# perl - sed / perl 正则表达式非常慢

> ID：13805496
> 
> 赞同：0
> 
> 时间：2012-12-10T16:56:02.353
> 
> 标签：perl, bash, sed

这篇文章中的私人信息。已移除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:29:49.923

bash 脚本的问题在于，虽然非常灵活且功能强大，但它几乎可以为任何东西创建新进程，并且分叉成本高昂。在循环的*每次迭代*中，都会产生 3× `echo`、 2× `awk`、 1×`sed`和 1× `perl`。将自己限制在一个进程（因此，一种编程语言）将提高性能。

然后，您`output.txt`每次在调用`perl`. IO 总是很慢，所以缓冲文件会更有效率，如果你有内存的话。

如果没有哈希冲突，多线程就可以工作，但很难编程。与将 Perl 转换为多线程 Perl 相比，简单地转换为 Perl 将获得更大的性能提升。^([需要引用])

你可能会写类似

```
#!/usr/bin/perl
use strict; use warnings;
open my $cracked, "<", "cracked.txt" or die "Can't open cracked";
my @data = do {
  open my $output, "<", "output.txt" or die "Can't open output";
  <$output>;
};

while(<$cracked>) {
  my ($hash, $seed, $pwd) = split /:/, $_, 3;
  # transform $hash here like "$hash =~ s/foo/bar/g" if really neccessary

  # say which line we are at
  print "at line $. with pwd=$pwd\n";

  # do substitutions in @data
  s/\Q$hash\E/$hash ( $pwd )/ for @data;
  # the \Q...\E makes any characters in between non-special,
  # so they are matched literally.
  # (`C++` would match many `C`s, but `\QC++\E` matches the character sequence)
}

# write @data to the output file 
```

（未经测试或任何东西，不保证）

虽然这仍然是一个*O(n²)*的解决方案，但它会比 bash 脚本执行得更好。请注意，当组织成散列树时，它可以减少到*O(n) ，由散列码索引：*`@data`

```
my %data = map {do magic here to parse the lines, and return a key-value pair} @data;
...;
$data{$hash} =~ s/\Q$hash\E/$hash ( $pwd )/; # instead of evil for-loop 
```

实际上，您将存储对包含哈希树中包含哈希代码的所有行的数组的引用，因此前面的行宁愿是

```
my %data;
for my $line (@data) {
   my $key = parse_line($line);
   push @$data{$key}, $line;
}
...; 
s/\Q$hash\E/$hash ( $pwd )/ for @{$data{$hash}}; # is still faster! 
```

另一方面，具有 8E7 元素的散列可能不会很好地执行。答案在于基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:29:40.110

在解析我的工作日志时，我会这样做：将文件拆分为 N 个部分（N=num_processors）；将分割点与 \n 对齐。启动 N 个线程来处理每个部分。工作速度非常快，但硬盘是瓶颈。

# android - 为什么要回收 TypedArray？

> ID：13805502
> 
> 赞同：11
> 
> 时间：2012-12-10T16:56:09.497
> 
> 标签：android, garbage-collection, typedarray

[这个答案](https://stackoverflow.com/questions/7252839/what-is-the-use-of-recycle-method-in-typedarray)告诉我调用[`recycle()`](http://developer.android.com/reference/android/content/res/TypedArray.html#recycle())TypedArray 的方法可以对其进行垃圾收集。我的问题是为什么 TypedArray 特别需要一种方法来对其进行垃圾收集？为什么不能像普通对象一样等待垃圾收集？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T17:06:34.593

这是缓存目的所必需的。当你调用`recycle`它时，意味着这个对象可以从这一点开始被重用。内部`TypedArray`包含很少的数组，因此为了不每次使用时分配内存，它作为静态字段`TypedArray`缓存在类中。`Resources`您可以查看`TypedArray.recycle()`方法代码：

```
/**
 * Give back a previously retrieved StyledAttributes, for later re-use.
 */
public void recycle() {
    synchronized (mResources.mTmpValue) {
        TypedArray cached = mResources.mCachedStyledAttributes;
        if (cached == null || cached.mData.length < mData.length) {
            mXml = null;
            mResources.mCachedStyledAttributes = this;
        }
    }
} 
```

因此，当您调用时，`recycle`您的`TypedArray`对象只是返回到缓存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-14T19:32:03.567

@Andrei Mankevich 我刚刚检查了最新版本的 Android SDK，似乎对 recycle() 进行了一些更改。请检查以下代码：

```
/**
 * Recycle the TypedArray, to be re-used by a later caller. After calling
 * this function you must not ever touch the typed array again.
 */
public void recycle() {
    if (mRecycled) {
        throw new RuntimeException(toString() + " recycled twice!");
    }

    mRecycled = true;

    // These may have been set by the client.
    mXml = null;
    mTheme = null;

    mResources.mTypedArrayPool.release(this);
} 
```

# java - 高效搜索非空交叉点（Java）

> ID：13805505
> 
> 赞同：2
> 
> 时间：2012-12-10T16:56:13.910
> 
> 标签：java, processing-efficiency, disjoint-union

我有一个返回整数值或整数范围（initial..final）的方法，我想知道值是否都是不相交的。

有没有比以下更有效的解决方案：

```
ArrayList<Integer> list = new ArrayList<Integer>();

// For single value
int value;
if(!list.contains(value))
    list.add(value);
else
    error("",null);

// Range
int initialValue,finalValue;
for(int i = initialValue; i <= finalValue; i++){
    if(!list.contains(i))
        list.add(i);
    else
        error("",null);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:08:08.593

平均而言，在其中找到一个值 ( `contains`)[`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)是一个恒定时间操作 (O(1))，这优于 a `List`，其中`contains`是线性 (O(n))。因此，如果您的列表足够大，可能值得将第一行替换为：

```
HashSet<Integer> list = new HashSet<Integer>(); 
```

这样做的原因是，要在（未排序的）列表中查找值，您需要检查列表中的每个索引，直到找到所需的索引或用完要检查的索引。平均而言，如果值在列表中，则在查找值之前，您将检查一半列表，如果不在列表中，则检查整个列表。对于[哈希表](http://en.wikipedia.org/wiki/Hash_table)，您从要查找的值生成索引，然后检查一个索引（可能需要[检查多个](http://en.wikipedia.org/wiki/Hash_table#Collision_resolution)索引，但在设计良好的哈希表中应该不常见）。

此外，如果您使用 Set，则可以保证每个值都是唯一的，因此如果您尝试[添加一个已经存在的值，`add`则会返回`false`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#add%28E%29). 您可以使用它来稍微简化代码（注意：**如果您使用 List，这将不起作用，因为[`add`总是返回`true`List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28E%29)**）：

```
HashSet<Integer> list = new HashSet<Integer>();

int value;
if(!list.add(value))
    error("",null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:20:52.583

涉及范围的问题通常适用于使用树。这是一种使用方法[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)：

```
public class DisjointChecker {

    private final NavigableSet<Integer> integers = new TreeSet<Integer>();

    public boolean check(int value) {
        return integers.add(value);
    }

    public boolean check(int from, int to) {
        NavigableSet<Integer> range = integers.subSet(from, true, to, true);
        if (range.isEmpty()) {
            addRange(from, to);
            return true;
        }
        else {
            return false;
        }
    }

    private void addRange(int from, int to) {
        for (int i = from; i <= to; ++i) {
            integers.add(i);
        }
    }

} 
```

在这里，这些方法不是调用错误处理程序，而是`check`返回一个布尔值，指示参数是否与所有先前的参数不相交。范围版本的语义与原始代码中的不同；如果范围不是不相交的，则不添加任何元素，而在原始范围内，添加第一个非不相交元素以下的任何元素。

有几点可能需要详细说明：

*   [`Set::add`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#add%28E%29)返回一个布尔值，指示添加是否修改了集合；我们可以将其用作方法的返回值。
*   [`NavigableSet`](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableSet.html)是一个晦涩但标准的子接口，[`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)遗憾的是它被忽略了。尽管您实际上可以在此处使用纯`SortedSet`文本，只需进行少量修改。
*   该[`NavigableSet::subSet`](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableSet.html#subSet%28E,%20boolean,%20E,%20boolean%29)方法（如[`SortedSet::subSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html#subSet%28E,%20E%29)）返回限制在给定范围内的基础集的轻量级视图。这提供了一种非常有效的方式来查询树在一次操作中与整个范围的任何重叠。
*   这里的`addRange`方法非常简单，当将 m 个项目添加到之前已经查看过 n 个项目的检查器时，运行时间为 O(m log n)。可以通过编写一个`SortedSet`描述整数范围的实现然后使用来制作一个在 O(m) 中运行的版本[`Set::addAll`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#addAll%28java.util.Collection%29)，因为`TreeSet`的实现包含`SortedSet`在线性时间内添加其他 s 的特殊情况。该特殊集合实现的代码非常简单，但涉及大量样板，因此我将其作为练习留给读者！

# jquery - 引导轮播不起作用

> ID：13805506
> 
> 赞同：-2
> 
> 时间：2012-12-10T16:56:14.687
> 
> 标签：jquery, twitter-bootstrap

我有一个奇怪的问题，我只是想通过使用引导程序来使用轮播。我将 bootstrap.js 包含到我的代码中，然后我使用了 Log Console Javascript，出现了一些错误代码 Uncaught TypeError: Object [object Object] has no method 'on'

然后我将所有“on”方法更改为“bind”

但是现在整个链接（标签）都不起作用，有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:01:02.617

首先包含 jquery javascript 文件

```
<html>
   <head>
       <script type="text/javascript" src="jquery.js" />
       <script type="text/javascript" src="bootstrap.js" />
   </head>
</html> 
```

# objective-c - 简单数组的问题 - Cocoa

> ID：13805512
> 
> 赞同：1
> 
> 时间：2012-12-10T16:56:31.370
> 
> 标签：objective-c, arrays, cocoa, syntax-error

我想知道是否有可能执行以下操作：

我有这样的方法：

```
one = [[NSMutableArray alloc] initWithObjects:@"1",@"2",@"3", nil];
two  = [[NSMutableArray alloc] initWithObjects:@"4",@"5",@"6", nil];

-(void)getStringAndChooseArray:(NSString *)nameOfArray {
//What i want to do is something like:
NSLog(@"The array %@ has got %i objects",nameOfArray,[nameOfArray count]) 
//Of course it is giving me an error since nameOfArray is a string..

//I know it is hard to understand,
//but what I'm trying to do is to call this method
//pass a string variable, which is named as one of the two arrays,
//and using it to do the rest..

} 
```

如何使用字符串来识别数组并对其进行操作？

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:59:22.837

将您的数组存储在字典中，并使用您想要引用它们的名称作为它们的相关键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:00:18.633

使用[字典](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)将数组映射到字符串，然后您可以使用它们：

```
one = [[NSMutableArray alloc] initWithObjects:@"1",@"2",@"3", nil];
two  = [[NSMutableArray alloc] initWithObjects:@"4",@"5",@"6", nil];
NSDictionary *mapping = [NSDictionary dictionaryWithObjectsAndKeys:@"one",one,@"two",two,nil];

-(void)getStringAndChooseArray:(NSString *)nameOfArray {
  NSArray *array = [mapping objectForKey:nameOfArray];
  NSLog(@"The array %@ has got %i objects",array,[array count]) 
} 
```

# python - Google App Engine 后端启动

> ID：13805518
> 
> 赞同：0
> 
> 时间：2012-12-10T16:56:51.940
> 
> 标签：python, google-app-engine, backend

我正在编写一个 GAE 应用程序，当它启动时需要初始化与第三方服务的连接，然后在后台运行连续检查（本质上是从第三方提取数据并将其推送到 GAE 任务队列）

我知道后端会调用 /_ah/start 来初始化它们并让 GAE 知道后端已经启动。从StartHandler开始拉取过程是否安全，即

```
f = urllib2.urlop
for l in f:
     deferred.defer(doMyStuff,l) 
```

我认为答案是有一个 StartHandler 沿线：

```
class StartHandler(webapp2.RequestHandler):
    def get(self):
        logging.info("Handler started")
        key = self.request.get('key')
        taskqueue.add('/backend/startdata', params={'key':key}, target='1.backend0') 
```

然后让处理程序`/backend/startdata`运行循环。

欢迎建议和评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:59:36.223

回答这个问题。Google App Engine 不会让这个工作。我放弃了它并使用了[不同的云提供商](http://www.pythonanywhere.com)，因为生命太短了，python 应该是 python，任何地方。

# javascript - 同步和异步 JavaScript 脚本加载的性能有何不同？

> ID：13805519
> 
> 赞同：1
> 
> 时间：2012-12-10T16:56:52.773
> 
> 标签：javascript, asynchronous

我的问题很简单：同步和异步 JavaScript 脚本加载之间的性能差异是什么？

从我收集的同步代码中，同步代码阻止了页面的加载和/或其余代码的执行。这发生在**两个层面**。

首先，在实际加载的脚本级别，其次，在 JavaScript 代码本身。

例如，在页面上：

同步：`<script src="demo_async.js" type="text/javascript"></script>`

异步：`<script async src="demo_async.js" type="text/javascript"></script>`

**编辑：**删除无效代码示例

那么，使用这些不同的加载方法和 JavaScript 模式在性能上的真正区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:00:41.400

对于您的第一个问题/片段，它更多的是关于*控制流*而不是性能。性能只是一个隐含的结果。

`<script>`传统上，如果遇到标签，它们会阻止*HTML**呈现器。*这意味着，如果您在标记的最顶部加载带有阻止标记的*巨大*javascript 文件，`<script>`只要脚本正在加载和评估，用户就不会在页面上看到任何进度。

相反，如果我们用*async*和/或*defer*`<script>`等属性标记标签，浏览器将不再停止*HTML 渲染过程，而是**异步*加载和评估脚本块。一个实现如何做到这一点，不是你关心的（无论是在后台使用真正的线程还是只是按顺序处理它）。

 **** * *

您的第二个片段并不是真正的*异步*代码。它只是调用自身的*函数表达式。*那仍然被认为是*同步执行*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:01:48.690

当您异步加载内容时，浏览器同时可以加载页面本身的其他部分。

除此之外，如果您仅比较脚本本身的负载，则两种方法的性能相同。***

# c# - 此代码中的错误在哪里（c# HttpWebRequest）

> ID：13805521
> 
> 赞同：0
> 
> 时间：2012-12-10T16:56:56.183
> 
> 标签：c#, httpwebrequest

发布数据 =>

```
Accept:application/json, text/javascript, */*; q=0.01

Accept-Charset:ISO-8859-9,utf-8;q=0.7,*;q=0.3

Accept-Encoding:gzip,deflate,sdch

Accept-Language:tr-TR,tr;q=0.8,en-US;q=0.6,en;q=0.4

Connection:keep-alive

Content-Length:0

Cookie:pfu=32904422; pfp=PO7PkdBDUwKoMG4FqkriwDLF7jrwcHBEoVqnX2i3; pfe=1386687638; 
logged_in=1; tmgioct=5hRBmncU3JQtInFOSa4qqoHX

Host:www.tumblr.com

Origin:http://www.tumblr.com

Referer:http://www.tumblr.com/customize/hayirasla?redirect_to=http%3A%2F%2Fhayirasla.tumblr.com%2F

User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11

X-Requested-With:XMLHttpRequest 
```

* * *

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Method = "POST";

        request.Headers.Add("Origin", "http://www.tumblr.com");
        request.Headers.Add(HttpRequestHeader.UserAgent, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11"); //Bu üstbilgi uygun özellik veya yöntem kullanılarak değiştirilmelidir.
        request.Headers.Add(HttpRequestHeader.Cookie, "pfu=32904422;pfe=1386687638;pfp=PO7PkdBDUwKoMG4FqkriwDLF7jrwcHBEoVqnX2i3;logged_in=1;");
        return new StreamReader(((HttpWebResponse)request.GetResponse()).GetResponseStream()).ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:04:38.233

您不能通过 **HttpWebRequest.Headers.Add()添加标头**

某些标头设置为受限

```
 private static readonly string[] RestrictedHeaders = new[]
        {
            "Accept", "Connection", "Content-Type", "Content-Length", "Date", "Expect", "Host", "Range", "Referer", "User-Agent"
        }; 
```

上面列出的所有标题都不能直接添加，只能通过使用来设置

```
//HttpWebRequest.[TheProperty] = value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:25:21.240

您忘记“填写”发布数据？！？因为我看到你发送的请求只有标题......

# c# - 意外的跨线程问题

> ID：13805522
> 
> 赞同：3
> 
> 时间：2012-12-10T16:57:09.577
> 
> 标签：c#, multithreading, process

原则上我正在尝试做一些非常简单的事情，但是我一直遇到一个`cross-threading exception`让我难过的事情，因为我没有打算使用多个线程。

我有一个 Windows 窗体应用程序。它启动另一个 Windows 窗体应用程序（使用`System.Diagnostics.Process`该类），并在该应用程序关闭时捕获 Exited 事件。然后，我的应用程序事件处理程序尝试将文本从剪贴板复制到当前显示表单上的控件。此时`Cross-threading exception`抛出 a。

我认为问题是来自关闭应用程序的事件在另一个线程中（我在这里超出了我的舒适区，所以请耐心等待），所以问题归结为“如何防止这种异常？”

我在某种程度上不得不从剪贴板复制，但如果这样可以解决问题，我可以以不同的方式启动另一个应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T17:02:20.363

该`Exited`事件不会在 UI 线程中触发，它会在`Process`该类创建的一些后台线程中触发以监视其他进程。

您需要编组到 UI 线程以访问控件，这可以通过使用以下`Control.Invoke`方法来完成：

```
textbox1.Invoke(new Action(()=> textbox1.Text = Process.ExitCode.ToString())); 
```

# magento - Magento：向发票 PDF 添加附加信息

> ID：13805523
> 
> 赞同：0
> 
> 时间：2012-12-10T16:57:12.500
> 
> 标签：magento, m2e-pro

我正在使用 M2EPro 来同步来自 eBay 和亚马逊的订单。

我想将亚马逊订单 ID 和 Ebay 订单 ID 添加到我的 PDF 发票中。

我需要以下数据：

```
Column amazon_order_id from m2epro_ebay_order 
```

和

```
Column ebay_order_id from m2epro_amazon_order 
```

任何人都可以就添加到 Abstract.php 或任何其他解决方案的受保护函数提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:03:19.063

感谢您的帮助！我用了：

```
$order = Mage::getModel('sales/order')->load(entity_id); 
$paymentInfo = Mage::helper('payment')->getInfoBlock($order->getPayment()) 
->setIsSecureMode(true);

$channelOrderId = $paymentInfo->getChannelOrderId(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:53:40.610

您应该为表创建模型（如果还没有可用的模型） [如何创建模型](http://codemagento.com/2011/02/creating-and-instantiating-a-model/) 然后您可以简单地获取模型的实例

```
$ebay = Mage::getModel('m2epro/ebay')->load($row_id);
echo $ebay->getData('ebay_order_id'); 
```

# c# - 对网站进行负载测试

> ID：13805525
> 
> 赞同：2
> 
> 时间：2012-12-10T16:57:24.523
> 
> 标签：c#, jmeter, load-testing, web-testing

我目前正在编写一个小型应用程序来对网站进行负载测试，但遇到了一些问题。

```
List<string> pageUrls = new List<string();
// NOT SHOWN ... populate the pageUrls with thousands of links

var parallelOptions = new System.Threading.Tasks.ParallelOptions();
parallelOptions.MaxDegreeOfParallelism = 100;
System.Threading.Tasks.Parallel.ForEach(pageUrls, parallelOptions, pageUrl =>
{
    var startedOn = DateTime.UtcNow;

    var request = System.Net.HttpWebRequest.Create(pageUrl);

    var responseTimeBefore = DateTime.UtcNow;

    try
    {
        var response = (System.Net.HttpWebResponse)request.GetResponse();
        responseCode = response.StatusCode.ToString();
        response.Close();
    }
    catch (System.Net.WebException ex)
    {
        // NOT SHOWN ... write to the error log
    }

    var responseTimeAfter = DateTime.UtcNow;

    var responseDuration = responseTimeAfter - responseTimeBefore;

    // NOT SHOWN ... write the response duration out to a file

    var endedOn = DateTime.UtcNow;

    var threadDuration = endedOn - startedOn;

    // sleep for one second
    var oneSecond = new TimeSpan(0, 0, 1);
    if (threadDuration < oneSecond)
    {
        System.Threading.Thread.Sleep(oneSecond - threadDuration);
    }
}
); 
```

当我将 设置`MaxDegreeOfParallelism`为低值（例如`10`一切正常）时，`responseDuration`保持在 1 到 3 秒之间。如果我将值增加到`100`（如示例中），则`responseDuration`爬升很快，直到大约 300 次请求后，它已达到 25 秒（并且仍在爬升）。

我认为我可能做错了什么，所以我还使用标准[Web 测试计划](http://jmeter.apache.org/usermanual/build-web-test-plan.html)设置运行了[Apache jMeter ，并将用户数设置为 100。在大约 300 个样本之后，响应时间飙升至大约 40 秒。](http://jmeter.apache.org/)

我怀疑我的服务器是否达到了极限。服务器上的任务管理器显示 16GB 中只有 2GB 正在使用，处理器挂起大约 5% 的工作量。

1.  我可以在客户端计算机上的同时连接数上达到一些限制吗？如果是这样，我该如何改变？
2.  我是否忘记在我的代码中做某事？清理/关闭连接？
3.  难道是我的代码没问题，实际上是我的服务器无法处理流量？

作为参考，运行上述代码的客户端计算机正在运行 Windows 7，并且与我正在测试的服务器位于同一网络上。该服务器运行 Windows Server 2008 IIS 7.5，是一台专用的 8 核 16GB RAM 机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:42:00.340

MaxDegreeOfParallelism 应仅在您尝试限制要用作程序策略的一部分的内核数量时使用。

默认情况下，Parallel 库使用最多的可用线程 - 因此将此选项设置为任意数量主要会限制性能，具体取决于运行它的环境。

我建议您在不设置此选项的情况下尝试运行此代码，这样可以提高性能。

[MSDN 中的 ParallelOptions.MaxDegreeOfParallelism 属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)- 阅读备注部分了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:16:17.473

几个建议：

1.  您录制的 Jmeter 测试脚本有多大，您是否插入了一些思考时间？测试越大，负载越重。
2.  确保 LAN 在测试运行期间没有被竞争流量使用。拥有千兆以太网交换机应该是强制性的。
3.  一定要使用 2-3 台从机，并避免在 Jmeter 中使用大量的结果记录器，比如树。你将这些图表和结果最小化是对的。

# c++ - 混合语言 F77/C++：避免 破坏 C++ 实例

> ID：13805529
> 
> 赞同：0
> 
> 时间：2012-12-10T16:57:46.610
> 
> 标签：c++, memory-management, fortran, destruction

我需要将 Fortran 和 C++ 混合在一起。我已经编写了 C++ 类。由于调用 C++ 库的 extern "C" 函数，我能够调用 C++ 公共函数。

此函数创建此 C++ 类的一些实例。当这个函数结束时，我想把这些实例保存在内存中以便之后调用它们。但是销毁我的实例是自动调用的。

我不想将这些实例与 Fortran 一起使用，而是在其他包装的 C++ 函数中使用它们。我不能使用 iso_c_binding 或任何 Fortran 2003 函数（很遗憾）。

您有什么简单的想法可以将实例保存在内存中吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:19:57.250

如果您想在下次输入相同的函数时再次访问相同的 C++ 对象，您可以将它们声明为`static`函数内部。这将使函数的每次调用共享同一组（静态）变量。

如果多个函数需要访问同一个对象，您可以在命名空间范围内（在任何函数或类之外）定义它们。访问对象的所有函数调用将共享相同的全局变量。

如果您不希望通过使它们成为全局或隐含的实例共享，`static`最好的选择（无论如何最好的选择）是围绕类编写一个 C 包装器，其中包含动态分配实例的创建/销毁函数班上。例如：

```
// x.hpp
class X {
public:
    X(int);
    void foo();
};

// x_wrapper.h
extern "C" {
void* create_x(int arg);
void destroy_x(void* anX);
void x_foo(void* anX);
}

// x_wrapper.cpp
#include "x.hpp"
#include "x_wrapper.h"

void* create_x(int arg) {
    return new X(arg);
}

void destroy_x(void* anX) {
    X* self = (X*)anX;
    delete self;
}

void x_foo(void* anX) {
    X* self = (X*)anX;
    return self->foo();
} 
```

# excel - 如何根据第一行中的字符串隐藏列并设置宽度？

> ID：13805530
> 
> 赞同：0
> 
> 时间：2012-12-10T16:57:36.193
> 
> 标签：excel, vba

我在第一行有一堆带有特定字符串的工作簿。因此，例如，我说我在 A - D 行中有“狗”、“猫”、“松鼠”和“鱼”。我想要一个搜索值“狗”和“松鼠”的宏，并隐藏列，然后将“Cat”和“Fish”的宽度设置为值 11。

我不能只使用列号，因为它们在我的所有工作簿中都不一致。谢谢你的帮助。

```
Sub HideColumn1()
If Range("B4").Value = 0 Then
    Columns("H").EntireColumn.Hidden = True
Else
    Columns("H").EntireColumn.Hidden = False
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:15:33.193

将 Range("A1:D1") 更改为您想要的范围或更动态的范围：

```
Dim cell As Range
Dim hiddenRng As Range, widthRng As Range

For Each cell In Range("A1:D1")

    If cell = "Dog" Or cell = "Squirrel" Then

        If (hiddenRng Is Nothing) Then
            Set hiddenRng = cell
        Else
            Set hiddenRng = Union(hiddenRng, cell)
        End If

    End If

    If cell = "Cat" Or cell = "Fish" Then

        If (widthRng Is Nothing) Then
            Set widthRng = cell
        Else
            Set widthRng = Union(widthRng, cell)
        End If

    End If

Next cell

If (Not hiddenRng Is Nothing) Then hiddenRng.EntireColumn.Hidden = True
If (Not widthRng Is Nothing) Then widthRng.EntireColumn.ColumnWidth = 11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:35:19.047

这是另一个例子

```
Sub hideColumns()
Dim iRow, iCol As Integer
iRow = 1
iCol = 1

Dim cat, dog, fish, squirrel As String

cat = "Cat"
dog = "Dog"
fish = "Fish"
squirrel = "Squirrel"

Do While Cells(iRow, iCol).Value <> ""
    If Cells(iRow, iCol).Value = dog Or Cells(iRow, iCol).Value = squirrel Then
        Cells(iRow, iCol).Select
        Selection.EntireColumn.Hidden = True
    ElseIf Cells(iRow, iCol).Value = cat Or Cells(iRow, iCol).Value = fish Then
        Cells(iRow, iCol).EntireColumn.Select
        Selection.ColumnWidth = 11
    Else
        'did not find anything do somthing
    End If

iCol = iCol + 1
Loop
End Sub 
```

# java - 从 Android 应用程序调用网络服务似乎挂起

> ID：13805541
> 
> 赞同：2
> 
> 时间：2012-12-10T16:58:05.543
> 
> 标签：java, android, web-services, asmx, ksoap2

我正在尝试从 Android 应用程序调用 asmx Web 服务。今天刚刚开始了一些Android开发。我一直在关注我在网上和这里找到的各种解决方案，这似乎比预期的要困难。我尝试了各种解决方案，使用 KSoap2 似乎是实现这一点的最简单方法，如果我能让它工作的话。

我有以下代码一直有效：

```
private class CallWebService extends AsyncTask<Void, Void, Void> {

    private static final String SOAP_ACTION = "http://tempuri.org/GetUser";
    private static final String METHOD_NAME = "GetUser";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://160.10.1.79:59315/Service1.asmx";
    TextView tv;

    @Override
    protected Void doInBackground(Void... params) {
        tv=(TextView)findViewById(R.id.txtMessage);

        try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet=true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            androidHttpTransport.call(SOAP_ACTION, envelope);

            Object result = (Object)envelope.getResponse();

            tv.setText(result.toString());
        }
        catch (Exception e) {
            tv.setText(e.getMessage());
        }
        return null;
    }
} 
```

它似乎挂在网上`androidHttpTransport.call(SOAP_ACTION, envelope);`任何想法为什么？这是正确的方法吗？我应该转向另一个方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:01:59.673

```
 tv.setText(result.toString()); 
```

完全不建议从`doInBackground`.

`doInBackground`将自动将结果传递给`onPostExecute`，您可以在那里设置文本

```
protected void onPostExecute(String result){
   tv.setText(result.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:05:23.137

好的，这个解决方案最终非常简单。Web 服务在 localhost 下运行，但无法使用`localhost:59315`. 所以我把它改成了`**MY IP**:59315`. 仍然没有工作。使用这个问题[Accessing localhost:port from Android emulator](https://stackoverflow.com/questions/6760585/accessing-localhostport-from-android-emulator)我尝试使用`10.0.2.2:59315`它并且它有效。所以感谢另一个问题中的 Akhil Jain。

# ruby-on-rails-3 - HTTP 下载不工作

> ID：13805544
> 
> 赞同：0
> 
> 时间：2012-12-10T16:57:55.597
> 
> 标签：ruby-on-rails-3

我的 Rails 控制器中有这个：

```
 def download_clip
    send_file "public/output.mp4", :type=>"video/mp4", :filename => "output.mp4", :disposition => 'attachment'
  end 
```

在我的 HTML 代码中，我有这个：

```
<a href="download_clip/"></a> 
```

现在有人可以告诉我为什么 Firefox 的下载窗口不会弹出，但 chrome 可以正常下载文件吗？相反，Firefox 会打开一个新窗口并开始播放该文件。我想让下载框弹出。我花了太多时间在它上面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:01:59.913

您正在使用相对 url，根据使用的页面，它可能无法正确映射。

尝试将您的链接更改为：

```
<%= link_to "some text", :controller => :your_controller_name, :action => :download_clip %> 
```

如果这没有帮助，请检查 Content-Diposition 响应标头是否设置为“附件”。如果是，那么问题可能出在您自己的 Firefox 环境而不是服务器上。将 Firefox 重置为默认值应该可以解决这个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:49:09.940

添加

```
headers['Content-Disposition'] = "attachment;" 
```

在您的 download_clip 操作中..

# android - 未找到 MapsActivity

> ID：13805545
> 
> 赞同：2
> 
> 时间：2012-12-10T16:58:37.240
> 
> 标签：android

我正在尝试显示一个简单的地图。

这就是我所拥有的：

```
package com.chance.squat;

import com.chance.squat.R;
import com.google.android.maps.MapActivity;
import android.os.Bundle;

public class Maps extends MapActivity 
{    
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maps);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
}

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="A2:D9:A5:1C:21:6F:D7:44:47:23:31:EC:1A:98:EF:36"
/>

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.chance.squat"
      android:versionCode="1"
      android:versionName="1.0">

    <application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@style/CustomTheme">
          <uses-library android:name="com.google.android.maps"/>

        <activity android:name=".MyApp"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.chance.squat.Search"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

            </intent-filter>
        </activity>

        <activity android:name="com.chance.squat.Add"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

            </intent-filter>
        </activity>
       <activity android:name="com.chance.squat.About"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

            </intent-filter>
        </activity>

    </application>

    <uses-permission android:name="android.permission.INTERNET"/>

</manifest> 
```

我还下载了第 8 版的 Google API，并准备针对它们进行构建。我的问题是它似乎没有找到 import com.google.android.maps.MapActivity 我不知道为什么或下一步是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:02:03.573

地图应该在清单中

```
 <activity android:name="com.chance.squat.Maps"
              android:label="@string/app_name">
        ...
    </activity> 
```

# java - 继承 - 阴影具有相同名称的超类变量时发出警告

> ID：13805546
> 
> 赞同：3
> 
> 时间：2012-12-10T16:58:30.713
> 
> 标签：java

使用 Java 时，当子类通过声明另一个同名的实例变量来隐藏超类的实例变量时，是否有办法获得编译器警告（如果重要，则使用 E​​clipse）？例如：

```
class A {
    String variable;

    A() {
        variable = "A";
    }
}

class B extends A {
    int variable;

    B() {
        variable = 1;
    }
}

B b = new B();
System.out.println("Variable value: " + b.variable + ", " + ((A) b).variable);
// prints out: "Variable value: 1, A" 
```

我想被警告`B`该变量已经存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T17:16:00.720

是的。在 Eclipse 中转到

```
Preferences->Java->Compiler->Errors/Warnings 
```

在该窗格中有一个关于**名称阴影和冲突**的小节，其中包含您正在寻找的选项。

# objective-c - 无论对根容器有多少级深度访问，都给予所有子视图控制器

> ID：13805551
> 
> 赞同：0
> 
> 时间：2012-12-10T16:59:10.060
> 
> 标签：objective-c, objective-c-category

我已经做到了这一点，但如果我做得对，我会问更多。我一直沉浸在苹果文档和iOS编程书籍中。从那以后，我完全重新设计了我的应用程序以实现可重用性和所有这些好东西。

现在我有一个名为 RootController 的主 UIViewController 来处理 UINavigationController 和自定义 MenuController。我认为 UIViewController 包含是我的 RootController 的最佳方法。

```
RootController ---> UINavigationController
               ---> MenuController 
```

现在出现了一个问题，我需要 UINavigationController 中的一些子 UIViewController 与主 RootController 进行通信。

```
RootController ---> UINavigationController --> UIViewController
       ^_____________________________________________| 
```

我决定做的是用一个类别扩展 UIViewController。

UIViewController+RootController.h

```
@interface UIViewController (RootController)

@property (nonatomic, readonly) RootController *rootController;

@end 
```

UIViewController+RootController.m

```
@implementation UIViewController (RootController)

- (RootController *)rootController {
    static RootController *rootControler;
    if(rootControler == nil) {
        UIViewController *vc = self;
        while((vc = vc.parentViewController)) {
            if([vc isMemberOfClass:[RootController class]]){
                rootControler = (RootController *)vc;
                break;
            }
        }
    }
    return rootControler;
}

@end 
```

当 [self rootController] 被任何 UIViewController 调用时，它将遍历父视图控制器，直到找到与 RootController 匹配的视图控制器，然后它将返回匹配项。我还将属性设为静态，因此它只被查找一次。

所以我的问题是这是我采取的正确方法吗？我试图做一些类似于 UIViewController 的 navigationController 方法的东西。

我需要访问主根控制器，以便可以从应用程序中的任何视图处理 MenuController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:13:26.440

您的解决方案似乎正确但不那么干净恕我直言。在类似情况下，我通常更喜欢使用 AppDelegate 以“反向”方法获取引用。

例如：

```
#import "AppDelegate.h" // at the top of your file

UIViewController *vc = [[(AppDelegate *)[[UIApplication sharedApplication] delegate] window] rootViewController]: 
```

vc 是对根视图控制器的引用。请注意，因为窗口的根视图控制器可能会更改（如果您更改它:-)。因此，在这种情况下，您应该更改您的方法（例如，将 @property 添加到您的 AppDelegate 并让您的 RootController 在加载时设置此属性）

# windows - 串口传输坏数据和WriteFile返回写入字节数错误的原因？

> ID：13805555
> 
> 赞同：1
> 
> 时间：2012-12-10T16:59:27.447
> 
> 标签：windows, serial-port, usb

错误修复更新：截至 2013 年 6 月，FTDI 确实向我承认该错误是真实的。此后，他们发布了一个新版本的驱动程序（2.8.30.0，日期为 2013 年 7 月 12 日）以解决该问题。该驱动程序在 2013 年 8 月 1 日左右通过 WHQL，目前可通过 Windows 更新获得。

我重新测试了运行相同的测试代码，但无法重现新驱动程序的问题，所以目前修复似乎是“升级驱动程序”。

最初的问题：我有一个基于 FTDI FT2232D 芯片的 8 端口 USB 串行设备（来自 VsCOM）。当我从一个端口以某些设置进行传输，并且我使用硬件握手停止并从另一端启动数据流时，我得到两个症状：

1）输出数据有时会变成垃圾。会有 NUL 字符，以及几乎任何你能想到的随机事物。

*2) WriteFile*调用有时会返回比我要求它写入的字节数更大的字节数。那不是错字。我要求传输 30 个字节，发送的字节数返回 8192（是的，我在拨打电话之前将发送的数字清除为 0）。

相关事实：使用 FTDI 驱动程序 2.8.24.0，这是目前最新的。串口设置为 19200，7 个数据位，奇校验，1 个停止位。我在另一个基于 FTDI 的串行设备上得到了同样的行为，这次是一个单端口。我使用另一个相同类型的 8 端口设备得到相同的行为。在内置串行端口 (COM1) 上传输时，我没有出现这种情况。我有一个非常简单的“Writer”程序，它只是连续传输，一个非常简单的“Toggler”程序，每秒切换一次 RTS。这些似乎在 60 秒内触发了问题。我已经向设备制造商提出了问题，但他们还没有太多时间做出回应。编译器是 mingw32，它包含在 Qt 4.8.1 (gcc 4.4.0) 的 Qt 安装程序中

我想首先知道，如果有人能想到我可以做些什么来触发这种行为。我无法想象任何事情，但总有一些我不知道的事情。

其次，我附上了 Writer 和 Toggler 测试程序。如果有人能发现一些可能触发该程序的问题，我很想听听。我很难认为存在驱动程序错误（尤其是来自像 FTDI 芯片这样成熟的东西），但情况迫使我认为至少有一些驱动程序参与。至少，无论我对它做什么，它都不应该返回比我要求它写的更多的字节数。

写程序：

```
#include <iostream>
#include <string>

using std::cerr;
using std::endl;

#include <stdio.h>
#include <windows.h>

int main(int argc, char **argv)
{
    cerr << "COM Writer, ctrl-c to end" << endl;

    if (argc != 2) {
        cerr << "Please specify a COM port for parameter 2";
        return 1;
    }

    char fixedbuf[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

    std::string portName = "\\\\.\\";
    portName += argv[1];

    cerr << "Transmitting on port " << portName << endl;

    HANDLE ph =  CreateFileA( portName.c_str(),
                              GENERIC_READ | GENERIC_WRITE,
                              0,      //  must be opened with exclusive-access
                              NULL,   //  default security attributes
                              OPEN_EXISTING, //  must use OPEN_EXISTING
                              0,      //  overlapped I/O
                              NULL ); //  hTemplate must be NULL for comm devices

    if (ph == INVALID_HANDLE_VALUE) {
        cerr << "CreateFile " << portName <<  " failed, error " << GetLastError() << endl;
        return 1;
    }

    COMMCONFIG  ccfg;
    DWORD ccfgSize = sizeof(COMMCONFIG);
    ccfg.dwSize = ccfgSize;

    GetCommConfig(ph, &ccfg, &ccfgSize);
    GetCommState(ph, &(ccfg.dcb));

    ccfg.dcb.fBinary=TRUE;
    ccfg.dcb.fInX=FALSE;
    ccfg.dcb.fOutX=FALSE;
    ccfg.dcb.fAbortOnError=FALSE;
    ccfg.dcb.fNull=FALSE;

    // Camino is 19200 7-O-1
    ccfg.dcb.BaudRate = 19200;
    ccfg.dcb.Parity = ODDPARITY;
    ccfg.dcb.fParity = TRUE;
    ccfg.dcb.ByteSize = 7;
    ccfg.dcb.StopBits = ONESTOPBIT;

    // HW flow control
    ccfg.dcb.fOutxCtsFlow=TRUE;
    ccfg.dcb.fRtsControl=RTS_CONTROL_HANDSHAKE;
    ccfg.dcb.fInX=FALSE;
    ccfg.dcb.fOutX=FALSE;

    COMMTIMEOUTS ctimeout;
    DWORD tout = 10;// 10 ms
    ctimeout.ReadIntervalTimeout = tout;
    ctimeout.ReadTotalTimeoutConstant = tout;
    ctimeout.ReadTotalTimeoutMultiplier = 0;
    ctimeout.WriteTotalTimeoutMultiplier = tout;
    ctimeout.WriteTotalTimeoutConstant = 0;

    SetCommConfig(ph, &ccfg, sizeof(COMMCONFIG));
    SetCommTimeouts(ph, &ctimeout);

    DWORD nwrite = 1;
    for(;;) {
        nwrite++;
        if (nwrite > 30) nwrite = 1;

        DWORD nwritten = 0;
        if (!WriteFile(ph, fixedbuf, nwrite, &nwritten, NULL)) {
            cerr << "f" << endl;
        }

        if ((nwritten != 0) && (nwritten != nwrite)) {
            cerr << "nwrite: " << nwrite << " written: " << nwritten << endl;
        }
    }

    return 0;
} 
```

切换程序：

```
#include <iostream>
#include <string>

using std::cerr;
using std::endl;

#include <stdio.h>
#include <windows.h>

int main(int argc, char **argv)
{
    cerr << "COM Toggler, ctrl-c to end" << endl;
    cerr << "Flips the RTS line every second." << endl;

    if (argc != 2) {
        cerr << "Please specify a COM port for parameter 2";
        return 1;
    }

    std::string portName = "\\\\.\\";
    portName += argv[1];

    cerr << "Toggling RTS on port " << portName << endl;

    HANDLE ph =  CreateFileA( portName.c_str(),
                              GENERIC_READ | GENERIC_WRITE,
                              0,      //  must be opened with exclusive-access
                              NULL,   //  default security attributes
                              OPEN_EXISTING, //  must use OPEN_EXISTING
                              0,      //  overlapped I/O
                              NULL ); //  hTemplate must be NULL for comm devices

    if (ph == INVALID_HANDLE_VALUE) {
        cerr << "CreateFile " << portName <<  " failed, error " << GetLastError() << endl;
        return 1;
    }

    COMMCONFIG  ccfg;
    DWORD ccfgSize = sizeof(COMMCONFIG);
    ccfg.dwSize = ccfgSize;

    GetCommConfig(ph, &ccfg, &ccfgSize);
    GetCommState(ph, &(ccfg.dcb));

    ccfg.dcb.fBinary=TRUE;
    ccfg.dcb.fInX=FALSE;
    ccfg.dcb.fOutX=FALSE;
    ccfg.dcb.fAbortOnError=FALSE;
    ccfg.dcb.fNull=FALSE;

    // Camino is 19200 7-O-1
    ccfg.dcb.BaudRate = 19200;
    ccfg.dcb.Parity = ODDPARITY;
    ccfg.dcb.fParity = TRUE;
    ccfg.dcb.ByteSize = 7;
    ccfg.dcb.StopBits = ONESTOPBIT;

    // no flow control (so we can do manually)
    ccfg.dcb.fOutxCtsFlow=FALSE;
    ccfg.dcb.fRtsControl=RTS_CONTROL_DISABLE;
    ccfg.dcb.fInX=FALSE;
    ccfg.dcb.fOutX=FALSE;

    COMMTIMEOUTS ctimeout;
    DWORD tout = 10;// 10 ms
    ctimeout.ReadIntervalTimeout = tout;
    ctimeout.ReadTotalTimeoutConstant = tout;
    ctimeout.ReadTotalTimeoutMultiplier = 0;
    ctimeout.WriteTotalTimeoutMultiplier = tout;
    ctimeout.WriteTotalTimeoutConstant = 0;

    SetCommConfig(ph, &ccfg, sizeof(COMMCONFIG));
    SetCommTimeouts(ph, &ctimeout);

    bool rts = true;// true for set
    for(;;) {
        if (rts)
            EscapeCommFunction(ph, SETRTS);
        else
            EscapeCommFunction(ph, CLRRTS);

        rts = !rts;
        Sleep(1000);// 1 sec wait.
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T13:55:03.900

我还没有从 FTDI 那里得到好的答案，但是对于任何处理这个问题的人，我有以下建议：

1) 考虑切换到非 FTDI USB 串行转换器。这就是我的公司所做的，但当然这不是每个人的选择（我们将芯片放入我们自己的产品中）。我们现在使用的是 Silicon Labs 芯片，但我认为还有一两家其他供应商。

2) Per Hans Passant 在评论中 - 重新考虑使用 RTS/CTS 信号。如果写入没有因为阻塞而失败，那么你不应该触发这个错误。

3) 将所有写入设置为无限超时。同样，不会因阻塞而失败，也不会触发错误。当然，这可能不适用于所有应用程序。

请注意，如果采用策略#3，如果使用 Overlapped IO 进行写入，则[CancelIo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363791%28v=vs.85%29.aspx)和它的新表亲[CancelIoEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363792%28v=vs.85%29.aspx)可以在必要时用于终止写入。我没有尝试过这样做，但我怀疑这样的取消也可能导致触发这个错误。如果它们仅在关闭端口时使用，那么即使它们确实触发了错误，您也可能逃脱它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T16:35:33.490

如果其他人仍然看到这一点 - 将您的 FTDI 驱动程序更新到 2.8.30.0 或更高版本，因为这是由早期版本的 FTDI 驱动程序中的驱动程序错误引起的。

# .net - 通过 TextTransform.exe 运行模板时使用 $(SolutionDir)

> ID：13805563
> 
> 赞同：8
> 
> 时间：2012-12-10T17:00:34.847
> 
> 标签：.net, visual-studio, batch-file, t4

我试图让我们的 T4 模板在构建时运行，而不添加对 Visual Studio 建模 SDK 的依赖项。我已经成功使用了[此处](https://stackoverflow.com/a/3041089)显示的批处理文件的变体，但我现在遇到的问题是我的 .tt 文件使用该`$(SolutionDir)`变量来引用其他项目（因此现在没有编译）。

处理这个问题的最佳方法是什么？其他人做了什么？（硬编码绝对路径不是一个选项）

编辑：我看到有`-a`可以传递给 TextTransform.exe 的参数，是否可以使用它来定义`$(SolutionDir)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T05:56:16.820

查看 TextTransformation.exe 的源代码（使用 ILSpy）我认为如果不修改模板这是不可能的（但我确实有一个解决方案）。

最终我们在这里关心的是模板解析过程中调用**Microsoft.VisualStudio.TextTemplating.Engine.ResolveAssemblyReferences()**的步骤。这委托给**ITextTemplatingEngineHost.ResolveAssemblyReference()**（尽管它确实首先扩展了环境变量）

当模板从命令行运行时，所使用的实现是由**CommandLineHost**提供的，它的实现只是查找参考路径和 GAC 中提供的文件。鉴于此时文件名仍然包含 $(SolutionPath) 位，它永远不会成功。

您可以实现*自己*的 TextTransform.exe 版本，但您必须从头开始（或使用反射），因为 CommandLineHost 是内部的 :-( 或者您可能会利用 Mono 端口[https://stackoverflow.com/一个/1395377/26167](https://stackoverflow.com/a/1395377/26167)

我不能说我对此感到高兴，因为我发现自己在同一条船上......

**编辑：**但是...由于最终您需要做的就是更改模板，因此我整理了一个 PowerShell 脚本以将模板复制到临时目录，在此过程中手动扩展 $(SolutionDir) 宏，然后从那里执行它们. 这似乎工作*得很好*。

将其放入有问题的项目中（您可能想要更改文件扩展名），您应该很高兴：

```
<#
.Synopsis
Executes all the T4 templates within designated areas of the containing project

.Description
Unfortunately the Visual Studio 2010 'Transform All Templates' function doesn't appear
to work in SSDT projects, so have to resort to hackery like this to bulk-execute templates
#>
param(

)

$ErrorActionPreference = 'stop';
$scriptDir = Split-Path $MyInvocation.MyCommand.Path

$commonProgramFiles32 = $env:CommmonProgramFiles
if (Test-Path environment::"CommonProgramFiles(x86)") { $commonProgramFiles32 = (gi "Env:CommonProgramFiles(x86)").Value };

$t4 = Resolve-Path "$commonProgramFiles32\Microsoft Shared\TextTemplating\10.0\texttransform.exe";
$solutionDir = Resolve-Path "$scriptDir\..\"

$templates = @(dir "$scriptDir\Database Objects\load\*.tt")

# Cloning to temp dir originally caused issues, because I use the file name in the template (doh!)
# Now I copy to temp dir under the same name
pushd $scriptDir;
try{
    foreach($template in $templates){
        $templateTemp = Join-Path ([IO.Path]::GetTempPath()) $template.Name;
        $targetfile = [IO.Path]::ChangeExtension($template.FullName, '.sql');
        Write-Host "Running $($template.Name)"
        Write-Host "...output to $targetFile";

        # When run from outside VisualStudio you can't use $(SolutionDir)
        # ...so have to modify the template to get this to work...
        # ...do this by cloning to a temp file, and running this instead
        Get-Content $template.FullName | % {
            $_.Replace('$(SolutionDir)',"$solutionDir")
        } | Out-File -FilePath:$templateTemp

        try{
            & $t4 $templateTemp -out $targetfile -I $template.DirectoryName;
        }finally{
            if(Test-Path $templateTemp){ Remove-Item $templateTemp; }
        }
    }
}finally{
    popd;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T21:16:53.983

我使用了一种与 piers7 非常相似的方法——除了在我的情况下，我实际上需要将 *.tt 文件保存在同一目录中（因为运行时基于相对路径查找文件），但并不关心文件是否本身被命名不同。因此，我没有让 $templateTemp 在临时目录中创建一个临时文件，而是将它保存在同一个文件夹中。

我还需要在解决方案目录中的任何位置递归搜索 *.tt 文件。

这是生成的脚本，采用 piers7 并对其进行修改：

```
<#
.Synopsis
Executes all the T4 templates within designated areas of the containing project
#>
param(

)

$ErrorActionPreference = 'stop';
$scriptDir = Split-Path $MyInvocation.MyCommand.Path

$commonProgramFiles32 = $env:CommmonProgramFiles
if (Test-Path environment::"CommonProgramFiles(x86)") { $commonProgramFiles32 = (gi "Env:CommonProgramFiles(x86)").Value };

$t4 = Resolve-Path "$commonProgramFiles32\Microsoft Shared\TextTemplating\12.0\texttransform.exe";
$solutionDir = Resolve-Path "$scriptDir\"
$templates = Get-ChildItem -Path $scriptDir -Filter *.tt -Recurse
$extension = '.ts';

pushd $scriptDir;
try{
    foreach($template in $templates){
        # keeping the same path (because my template references relative paths), 
        #    but copying under different name:
        $templateTemp = $template.FullName + "____temporary"
        $targetfile = [IO.Path]::ChangeExtension($template.FullName, $extension);
        Write-Host "Running $($template.Name)"
        Write-Host "...output to $targetFile";

        # When run from outside VisualStudio you can't use $(SolutionDir)
        # ...so have to modify the template to get this to work...
        # ...do this by cloning to a temp file, and running this instead
        Get-Content $template.FullName | % {
            $_.Replace('$(SolutionDir)',"$solutionDir")
        } | Out-File -FilePath:$templateTemp

        try{
            & $t4 $templateTemp -out $targetfile -I $template.DirectoryName;
        }finally{
            if(Test-Path $templateTemp){ Remove-Item $templateTemp; }
        }
    }
}finally{
    popd;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-08T01:40:01.737

基于 piers7 代码。

Powershell脚本`Transform.ps1`：

```
Param(
  [string]$variablesPath,
  [string]$t4File,
  [string]$targetfile
)

# Get C:\Program Files (x86)\Common Files
$commonProgramFiles32 = $env:CommmonProgramFiles
if (Test-Path environment::"CommonProgramFiles(x86)") { $commonProgramFiles32 = (gi "Env:CommonProgramFiles(x86)").Value };

# Get path t4 transformer executable
$t4 = Resolve-Path "$commonProgramFiles32\Microsoft Shared\TextTemplating\14.0\texttransform.exe";

# File object for the $t4 file (.tt)
$template = (get-item $t4File)

# Create a dictionary from the contents of system variables file
$vars = @{}
get-content $variablesPath | Foreach-Object {
    $split = $_.split("=")
    $vars.Add($split[0], $split[1])
}

# Temp file name to store the modified template.
$templateTemp = Join-Path ([IO.Path]::GetTempPath()) $template.Name;

# Read the content of the template
$content = [IO.File]::ReadAllText($template.FullName)

# Replace the variables in the template with the actual values.
($vars.Keys | Foreach-Object {
    $content = $content.Replace("`$($_)",$vars[$_])
})

# Write the modified template to the original location
$content > $templateTemp

# Execute the transformation, and delete the temporary template after done.
try{
    & $t4 $templateTemp -out $targetfile -I $template.DirectoryName;
}finally{
    if(Test-Path $templateTemp){ Remove-Item $templateTemp; }
}

# texttransform.exe seems to be messing up the BOM of the file.  Fixing.
[IO.File]::WriteAllText($targetfile, [IO.File]::ReadAllText($targetfile), [System.Text.Encoding]::UTF8) 
```

然后从预构建事件：

```
pushd $(ProjectDir)
if exist "$(ProjectDir)var.tmp.txt" del "$(ProjectDir)var.tmp.txt"
echo SolutionDir=$(SolutionDir)>>"$(ProjectDir)var.tmp.txt"
echo ProjectDir=$(ProjectDir)>>"$(ProjectDir)var.tmp.txt"
if exist "$(ProjectDir)my.cs" del "$(ProjectDir)my.cs"
Powershell.exe -ExecutionPolicy Unrestricted -File "..\..\..\Transform.ps1" "$(ProjectDir)var.tmp.txt" "$(ProjectDir)My.tt" "$(ProjectDir)My.cs"
if exist "$(ProjectDir)var.tmp.txt" del "$(ProjectDir)var.tmp.txt"
popd 
```

# jquery - 根据已通过另一个输入字段更新更新的输入触发更改

> ID：13805566
> 
> 赞同：0
> 
> 时间：2012-12-10T17:00:43.673
> 
> 标签：jquery

我有一个可以由另一个输入字段更新的输入字段，我试图在发生这种情况时发生一些事情，css 更改等等。我找不到触发它的好方法。

我用一个简化的例子设置了一个 jsfiddle。

这个想法是，当表单 1 中的字段发生更改时，会在表单 2 上触发警报。

[http://jsfiddle.net/8KKHK/](http://jsfiddle.net/8KKHK/)

**HTML 代码：**

```
<h3>form 1</h3>
<div id="form1">
  <input type="text" data-pair="1">
  <input type="text" data-pair="2">
  <input type="text" data-pair="3">    
</div><!--#form1-->

<h3>form 2</h3>
<div id="form2">
  <input type="text" data-pair="1">
  <input type="text" data-pair="2">
  <input type="text" data-pair="3">    
</div><!--#form1--> 
```

**Javascript代码：**

```
jQuery('input').bind("change keyup input",function(){
    var d = jQuery(this).attr("data-pair");
    var value = jQuery(this).val();
    jQuery('input[data-pair="'+d+'"]').val(value);
});

jQuery('#form2 input').change("change keyup input",function(){
    var d = jQuery(this).attr("data-pair");
    alert(d);           
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:13:35.650

使用自定义事件（`change.myown`在我的示例中）：

```
jQuery('input').bind("change keyup input",function(e){
                var d = jQuery(this).attr("data-pair");

                var value = jQuery(this).val();
                var pair=jQuery('input[data-pair="'+d+'"]');
                pair.val(value);
                pair.trigger('changed.myown',e);
                }); 

jQuery('#form2 input').bind("changed.myown",function(e,orig_event){
console.log(orig_event);
var d = jQuery(this).attr("data-pair");
alert(d);

});​ 
```

# jquery - 客户端尝试前进/后退时的主干/jQuery事件？

> ID：13805568
> 
> 赞同：1
> 
> 时间：2012-12-10T17:00:54.543
> 
> 标签：jquery, backbone.js

我正在构建一个骨干应用程序，并且正在学习如何使用 Backbone 的 pushState。我的应用程序的主视图是一个“Feed”视图，它显示了一堆项目。当您单击一个项目时，它会加载一个新项目“显示”视图，并将其滑入页面。

现在，我已经成功地让我的应用程序使用 pushState true 在浏览器的历史记录中输入每篇文章的查看记录。

但是，当我“返回”浏览器的历史记录时，我想触发一个事件来在显示视图上做一些事情。是否有一个主干或 jQuery 事件/函数可用于检测用户何时选择前进/后退历史记录？

使用这样的主干事件会很棒：

```
 events: {
  'dblclick':'test'
 }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:32:37.930

如果您正在为 App 控制器使用视图，则可以使用将窗口对象作为`el`选项传递给视图的技巧。使用视图中保存的窗口对象，您将获得绑定到事件哈希的所有窗口事件，这样您就可以向`popstate`哈希添加类似的事件，并且您将获得一个后退按钮事件。

我很快对此进行了测试，因此它应该适合您：

```
var App = Backbone.View.extend({
    events: {
      "popstate":          "onPopState"
    },
    onPopState : function onPopState() {
        console.log("onPopState");
    }
});
var MainApp = new App({ el : window }); 
```

# java - 显示倒计时

> ID：13805569
> 
> 赞同：1
> 
> 时间：2012-12-10T17:00:56.550
> 
> 标签：java, swing, timer, jlabel

我需要在我的应用程序中实现一个计时器，它将从 10 秒 - 0 秒开始倒计时。并且，在 a 中显示倒计时`JLabel`。

这是我的实现；

```
...
Timer t = new Timer(1000, new List());
        t.start();

}

class List implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent e) {
        int sec = 0;
        label.setText(""+sec);
        // Do a if- condition check to see if the clock has reached to, and then stop

    }

} 
```

我期待 JLabel 从 0 到 10 开始计数，然后停止。但事实并非如此。JLabel 设置值`0`并且它不会增加。

更新 1

```
 t = new Timer(1000, new Listner());
    t.start();

}

class Listner implements ActionListener{
    private int counter = 0;
    @Override
    public void actionPerformed(ActionEvent e) {
        lable.setText(""+ (counter++));

        if (counter == 10)
              t.removeActionListener(this);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:09:06.497

好吧，每次调用计时器时，它都会将 int 变量 sec 声明为 0。因此标签不会被更新。

您应该将 sec 变量声明为全局变量，然后在 actionPerformed 方法中每次调用它时递增其值。

```
 public int sec = 0;
 class List implements ActionListener{

   @Override
   public void actionPerformed(ActionEvent e) {
        sec++;
        label.setText(""+sec);
        // Do a if- condition check to see if the clock has reached to, and then stop

  }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T17:09:38.307

您没有`secs`在任何地方存储或增加，所以我看不到它应该如何更新，尝试使用

```
Timer timer;

void start() {
  timer = new Timer(1000,new List());
}

class List implements ActionListener {
    private counter = 0;
    @Override
    public void actionPerformed(ActionEvent e) {
        label.setText(""+counter++);

        if (counter == 10)
          timer.removeActionListener(this);
    }
} 
```

请注意，您需要在某处存储对计时器的引用，以便在倒计时完成后能够从中删除侦听器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T17:35:30.423

一个完整的例子

```
public class ATimerExample {

    Timer timer;
    int counter = 0;

    public ATimerExample() {
        final JFrame frame = new JFrame("somethgi");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JLabel label = new JLabel("0");
        JPanel panel = new JPanel();
        panel.add(label, BorderLayout.SOUTH);
        frame.getContentPane().add(panel);
        frame.pack();
        frame.setVisible(true);

        timer = new Timer(1000, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                label.setText(String.valueOf(counter));
                counter++;
                if (counter == 10) {
                    //timer.removeActionListener(this);
                      timer.stop();
                }
            }
        });
        timer.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ATimerExample();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-28T01:51:16.060

由于java以毫秒为单位读取时间，它应该是10000而不是1000。试试你的代码，看看它是否有效。当我想要 30 秒时，我遇到了同样的问题。而不是写 Timer t = new Timer(30000, new List()); t.start();

我写了 Timer t = new Timer(3000, new List()); t.start();

这使我的程序每 3 秒停止一次。我建议您使用 10000 而不是 1000。

记得做： t.stop() 在你的 List 类。谢谢

# repository - 在 Perforce 中处理敏感密码数据

> ID：13805577
> 
> 赞同：1
> 
> 时间：2012-12-10T17:01:30.820
> 
> 标签：repository, perforce

在*Perforce中处理***包含敏感密码数据的文件**的最佳做法是什么？

 *在我团队的项目中，我们试图从存储库中删除此类文件。

1.  是否有任何**Perforce 特定的功能/约定**可以提供帮助？
2.  有一些 xml 文件包含代码（不仅仅是密码），需要受到修订控制。这些文件是如何处理的？

以下特定于 git 的帖子似乎是一个很好的起点：

1.  [删除敏感数据](https://help.github.com/articles/remove-sensitive-data)
2.  [github最佳实践](https://stackoverflow.com/a/2397905/640378)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:15:08.170

您可以使用[p4 obliterate](http://www.perforce.com/perforce/r12.1/manuals/cmdref/obliterate.html)删除包含密码的文件的违规版本。您可以使用包含示例/假密码的 .example 文件。使用您最喜欢的脚本语言在本地替换密码并创建真实文件。您可以添加[p4 保护](http://www.perforce.com/perforce/doc.current/manuals/cmdref/protect.html)权限以禁止签入特定文件。*

# sql - 选择哪里和哪里不

> ID：13805580
> 
> 赞同：0
> 
> 时间：2012-12-10T17:01:52.103
> 
> 标签：sql, database, select

我有一张桌子，里面有我称之为“课程”（法语）的课程，里面有几个课程，我已经将它们与学生联系起来，他们之间有一张桌子，看看他们是否去上课。

我想用 SELECT 和未选择的数据返回数据。

所以，如果一个学生学习了 5 门 3 门课程，我想退回他遵循的 3 门课程和他没有遵循的 2 门课程。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:13:29.140

这将根据您的 RBDMS 而有所不同，但类似于以下内容应该可以工作：

```
SELECT
    s.Name,
    l.Name,
    CASE WHEN sl.StudentID IS NULL 
        THEN 'Not Follows' 
        ELSE 'Follows' 
    END AS Status
FROM
    Student s
    CROSS JOIN Lessons l
    LEFT JOIN Student_Lessons sl
        ON s.ID = sl.StudentID
        AND l.ID = sl.LessonID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:08:22.227

这是一个`outer join`. 如果您确定了您的数据库引擎（可能具有特定的外连接语法）和您的模式，那么您可以获得一些有关实际 SQL 的帮助。

# node.js - 图片上传和调整大小的模块

> ID：13805588
> 
> 赞同：0
> 
> 时间：2012-12-10T17:02:12.217
> 
> 标签：node.js, module

Node.JS 是否有一个模块可以处理上传，然后自动修改新上传的文件？

我来自 PHP 背景，我曾经使用以下类，这对于上述目的一直很有用：[http ://www.verot.net/php_class_upload_samples.htm](http://www.verot.net/php_class_upload_samples.htm)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:20:11.330

我不认为有一个模块可以完成所有这些，但我使用了[强大的](https://github.com/felixge/node-formidable)和[GraphicsMagick](http://aheckmann.github.com/gm/)，它们工作得很好。如果你使用 Express，你可以只使用 bodyParser 和 gm。

对于前端，[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)是一个很好的使用查询的拖放式上传器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:57:30.900

这与您要查找的内容不完全匹配，但是如果您可以在服务器上安装 ImageMagick，这看起来是一个很好的工具来完成调整大小的工作：[https ://github.com/rsms/node-imagemagick](https://github.com/rsms/node-imagemagick)

# c# - C#、wpf和datagrid，设置selectedIndex，行为灰色

> ID：13805594
> 
> 赞同：1
> 
> 时间：2012-12-10T17:02:29.253
> 
> 标签：c#, wpf, datagrid

我有一个使用 MVVM 模式的 wpf 应用程序。在代码中，我设置了 selectedItem 属性，该属性绑定了 axml 中的 dataGrid 属性，并且该行具有灰色，而不是蓝色。

如果我用鼠标选择该行，则该行是蓝色的。

为什么？

我对 selectedIndex 属性使用绑定模式“双向”。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:07:49.067

灰色突出显示可能是因为它正在显示所选项目，但控件本身（`DataGrid`）没有焦点。同样的事情发生在`ListBox`es 上。试着`TextBox`在你的窗户旁边放一个`DataGrid`。用鼠标选择行，它会变成蓝色。然后单击，`TextBox`选择将变为灰色。

# ruby-on-rails - 试图用 rspec 和 Capybara 测试omniauth，失败了

> ID：13805604
> 
> 赞同：3
> 
> 时间：2012-12-10T17:03:13.170
> 
> 标签：ruby-on-rails, rspec, capybara

使用 Rails 3.2 和最新的 Rspec 和 Capybara，这意味着我的 Capybara 规范存在于`spec/features`.

我对 Rails 和测试真的很陌生，但我想习惯测试。我最终在测试之前实现了 OAuth。我终于让它工作了，现在我正在尝试追溯测试它（所以我至少知道它是否会在未来发生故障）。我正在尝试按照[本教程](http://blog.zerosum.org/2011/03/19/easy-rails-outh-integration-testing.html)进行操作，但是没有用。这是我所做的：

1) 创建`spec/support/integration_spec_helper.rb`于：

`module IntegrationSpecHelper def login_with_oauth(service = :google) visit "/auth/#{service}" end end`

2) 修改`spec/spec_helper`为包含`config.include IntegrationSpecHelper, :type => :request`在`Rspec.configure`do 块内。

3) 创建`spec/features/omniauth_spec.rb`于：

```
require 'spec_helper'
feature 'testing oauth' do
  scenario 'should create a new tiger' do
    login_with_oauth
    visit new_tiger_path

    fill_in 'tiger_name', :with => 'Charlie'
    fill_in 'tiger_blood', :with => 'yes'

    click_on 'Create Tiger'

    page.should have_content("Thanks! You are a winner!")
  end
end 
```

当然它会失败（我的应用程序中没有老虎），但我希望它在`visit new_tiger_path`. 相反，运行规范，我得到：

`1) testing oauth should create a new tiger Failure/Error: login_with_oauth NameError: undefined local variable or method `login_with_oauth' for #<RSpec::Core::ExampleGroup::Nested_3:0x83355d8> # ./spec/features/omniauth_spec.rb:4:in `block (2 levels) in <top (required)>'`

所以基本上，它说没有这样的事情`login_with_oauth`。这一定是一个非常基本的错误，因为由于某种原因我的代码没有包含在内。

我没有使用 spork （试图让事情变得简单）。

知道问题可能是什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:57:52.143

如果您尝试使用 google 的 oauth，则需要更改：

`def login_with_oauth(service = :google)`

**至：**

`def login_with_oauth(service = :google_oauth2)`

`:google_oauth2`也应该是**OmniAuth.config.add_mock**的第一个参数，即：

```
OmniAuth.config.add_mock(
    :google_oauth2, 
    {
        :info => {
        :email => 'test@some_test_domain.com',
        :name=>'Test User'
    }
}) 
```

不要忘记更改：

`config.include(IntegrationSpecHelper, :type => :request)`

**至：**

`config.include(IntegrationSpecHelper, :type => :feature)` 如上所述，在 RSpec.configure 块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:46:37.527

有点晚了，但也许我可以帮忙。遇到了同样的问题。它是由

```
config.include IntegrationSpecHelper, :type => :request 
```

参数 ':type' 需要更改为 ':feature' 因为您编写了 rspec 功能测试。

解决方案：

```
config.include IntegrationSpecHelper, :type => :feature 
```

不幸的是，这会导致更多问题，我还无法解决。

问候， C-

# sql-server - 重复外键的级联删除？那可能吗？

> ID：13805608
> 
> 赞同：1
> 
> 时间：2012-12-10T17:03:30.953
> 
> 标签：sql-server, key, cascade, cascading-deletes

我的 MSSQL DB 设计如下：

> 一张带有图片的表格，image_id = PK 一张带有视频的表格，video_id = PK 一张带有评论的表格，comment_id = PK，以及与父项唯一匹配的两个字段：item_id（等于 image_id 或 video_id）和 item_type，它告诉我谁是父级（图像或视频）。

如何添加级联删除，以便在删除图像时自动删除匹配的评论`Images.image_id = Comments.item_id AND Comments.item_type = 'image'`？如您所见，为此，我必须同时指定项目类型，`item_id`因为另一个注释可以存在于相同`item_id`但具有不同`item_type`属性的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:21:35.100

使用 a [`TRIGGER`](http://msdn.microsoft.com/en-us/library/ms189799.aspx)，这允许您包含必要的`c.item_type = 'image'`过滤器：

```
CREATE TRIGGER [dbo].[TrgImagesDelete] ON [dbo].[Images] FOR DELETE
AS
BEGIN
    DELETE c
    FROM
        Comments c
        JOIN Deleted d
            ON c.item_id = d.image_id
            AND c.item_type = 'image'
END
GO 
```

# java - Akka 演员和未来：通过例子理解

> ID：13805610
> 
> 赞同：26
> 
> 时间：2012-12-10T17:03:45.587
> 
> 标签：java, playframework-2.0, akka

我正在尝试学习 Akka 演员和期货，但在阅读了[http://akka.io](http://akka.io)上的文档 并做了[http://doc.akka.io/docs/akka/2.0.2/intro/getting-started-first -java.html](http://doc.akka.io/docs/akka/2.0.2/intro/getting-started-first-java.html) 我仍然有一些理解问题。我想计算 Pi 的值也是很多人都可以理解的，但不是我 =)。我搜索了一下，但没有找到任何适合我的例子。因此，我想我会拿一些我的真实代码并把它扔在这里，并用它来交换一个如何用 Akka 做到这一点的例子。

好的，我们开始吧：

我有一个 java play2 应用程序，我需要从我的数据库中获取一些数据并将其索引到我的 elasticsearch 实例中。

1.  我打电话给 DB 并获取场地的 ID。

2.  然后我拆分列表并创建几个可调用的索引任务。

3.  之后，我调用所有任务，其中每个任务从数据库中收集分配的 id 的场所。

4.  对于每个场所，将其索引到 elasticsearch 实例并使其可搜索。

5.  完毕。

**应用程序.java：**

```
public class Application extends Controller {

  private static final int VENUE_BATCH = 1000;
  private static int size;

  public static Result index() {

      List<Long> venueIds = DbService.getAllVenueIds();
      size = venueIds.size();
      Logger.info("Will index " + size + " items in total.");
      ExecutorService service = Executors.newFixedThreadPool(getRuntime().availableProcessors());
      int startIx = 0;
      Collection<Callable<Object>> indexTasks = new ArrayList<Callable<Object>>();
      do {
          int endIx = Math.min(startIx + VENUE_BATCH, size);
          List<Long> subList = venueIds.subList(startIx, endIx);
          VenueIndexTask indexTask = new VenueIndexTask(subList);
          indexTasks.add(indexTask);
      } while ((startIx += VENUE_BATCH) < size);

      Logger.info("Invoking all tasks!");
      try {
          service.invokeAll(indexTasks);
      } catch (InterruptedException e) {
          e.printStackTrace();
      }

      return ok(index.render("Done indexing."));
  } 
} 
```

**场地任务：**

```
public class VenueIndexTask implements Callable<Object> {

    private List<Long> idSubList;

    public VenueIndexTask(List<Long> idSubList){
        this.idSubList = idSubList;
        Logger.debug("Creating task which will index " + idSubList.size() + " items. " +
                "Range: " + rangeAsString() + ".");
    }

    @Override
    public Object call() throws Exception {
        List<Venue> venues = DbService.getVenuesForIds(idSubList);
        Logger.debug("Doing some indexing: "+venues.size());

        for(Venue venue : venues) {
            venue.index();
        }
        return null;
    }
    private String rangeAsString() {
        return "[" + idSubList.get(0) + "-" + idSubList.get(idSubList.size() - 1) + "]";
    }
} 
```

**地点：**

```
@IndexType(name = "venue")
public class Venue extends Index {

    private String name;

    // Find method static for request
    public static Finder<Venue> find = new Finder<Venue>(Venue.class);

    public Venue() {
    }

    public Venue(String id, String name) {
        super.id = id;
        this.name = name;
    }

    @Override
    public Map toIndex() {
        HashMap map = new HashMap();
        map.put("id", super.id);
        map.put("name", name);
        return map;
    }

    @Override
    public Indexable fromIndex(Map map) {
        if (map == null) {
            return this;
        }
        this.name = (String) map.get("name");
        return this;
    }
} 
```

所以你们所有的阿卡人都发疯了！请尽可能多地提出可以使用的酷期货功能或我可以用来学习这些东西的任何其他知识/代码。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-07T13:52:54.697

我对 Akka（或任何其他基于消息的系统）的看法是像传送带一样思考，就像在工厂中一样。Actors 中一种简化的思维方式可能是接受披萨订单。

*   你，饥饿的*顾客*（演员/角色）向披萨店发送订单（A Message）

*   客服（演员/角色）接您的订单，给您订单号（未来）

*   如果您不耐烦，您可能会在电话/互联网/商店等到您拿到披萨（同步/阻塞交易），否则您会对订单号感到满意，稍后再检查（非阻塞）

*   客服在厨房经理（演员）的监督下将消息发送给厨师（演员）。这是一个流程很重的厨房，有层次感。阿卡喜欢这样。见[监督](http://doc.akka.io/docs/akka/snapshot/general/supervision.html)

*   Chef 创建了一个新的 Pizza 并附加了订单的详细信息（一条新消息），然后通过送货经理（Supervisor Actor）将其传递给送货员（Actor）。

*   在此过程中，您的订单详细信息没有更改，那将是一场噩梦。如果你想要纯奶酪，如果你有意大利辣香肠，你会不高兴！所有消息都应该是不可变的！但是，对于不同的参与者，消息可能会有所不同。送货员会期待披萨和附上的订单详细信息，厨师会期待订单。当消息需要更改时，会创建一条新消息。

*   每个演员都擅长一个角色，如果一个人必须完成所有任务，效果如何？可能是某些参与者的数量超过了其他参与者（厨师 10 个线程，送货员 2 个线程，客户服务 1 个线程）。

*   阻止行为是一种痛苦，想象一下客户服务正在等待厨师和送货员在看到下一位客户之前？

希望我对您有所帮助，这是一个巨大的话题和巨大的思想转变。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T08:54:46.247

Coursera 目前开设了一门关于反应式编程的课程，其中有最后 3 堂课是关于 Akka 和 Actor 模型的。这包括视频讲座和家庭作业（在 Scala 中，但不是 Java）。虽然您收到完整证书为时已晚，但您仍然可以参加课程并检查最后三周。

[https://class.coursera.org/reactive-001/class](https://class.coursera.org/reactive-001/class)

# javascript - html5 颜色输入元素的事件处理程序

> ID：13805611
> 
> 赞同：19
> 
> 时间：2012-12-10T17:03:48.217
> 
> 标签：javascript, html, jquery, dom-events

在 Chrome 中使用新的 input="color" 元素会触发一个新的弹出对话框：

![屏幕截图颜色对话框](../Images/c278c0bbbd47b662b5c065f9a537160a.png)

我想知道是否有一个事件处理程序会在此预览窗口中的值更改后立即触发，而不仅仅是在单击“确定”之后

```
jQuery('#colorinput').on('change', function() { // fires only after clicking OK
    jQuery('#main').css('background-color', jQuery(this).val()); 
 });​ 
```

见[http://jsfiddle.net/Riesling/PEGS4/](http://jsfiddle.net/Riesling/PEGS4/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-09-03T17:20:58.300

您正在寻找的是[`input`event](http://www.w3.org/TR/html5/forms.html#common-input-element-events)。

您[修改后的小提琴](http://jsfiddle.net/PEGS4/2/)现在应该可以在所有（体面的）浏览器中使用：

```
$('#colorinput').on('input', function() { ... } ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T17:34:58.320

你真的想要每个 HTML 规范的输入事件。没有什么能保证在输入元素失去焦点之前触发更改事件。

“只要用户修改了控件的数据，就会触发输入事件。当值提交时，如果这对控件有意义，或者当控件失去焦点时，就会触发更改事件。”

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-17T11:07:52.443

要获取颜色输入的值，应该使用[w3school](http://www.w3schools.com/tags/ref_eventattributes.asp)`onchange`中提供的 event 属性

```
<input name="eventColor" type="color" onchange="getColorVal(eventColor.value)"/> 
```

并定义一个处理事件的函数

```
 function getColorVal(colorValue){

     alert(colorValue);
} 
```

# scala - Scala - 返回一个类型

> ID：13805612
> 
> 赞同：4
> 
> 时间：2012-12-10T17:03:50.497
> 
> 标签：scala, types, type-systems

我想从函数返回一个类型。例如：

```
class Super
case class One(a: Int) extends Super
case class Two(b: Float) extends Super
case class Unknown extends Super

def decide(criterion: String): ??? = {
  criterion match {
    case "one" => One
    case "two" => Two
    case _ => Unknown
  }
} 
```

所以我想返回类型本身，将其存储在 Map 中，以便以后可以在某处应用它：

```
val test = Buffer(
  ("ahaha" -> "one")
  ("ohoho" -> "two")
  ("lalala" -> "one")
)

var map = scala.collection.mutable.Map[String, Super]()

test.map {pair =>
  map(pair._1) = decide(pair._2)
} 
```

所以以后我可以喜欢：

```
def act(code: String) {
  map(code) match {
    case One => doSmth[One]()
    case Two => doSmth[Two]()
    case _ => doNothing()
  }
} 
```

我知道某些部分，例如案例类的未使用参数，在这里可能看起来很奇怪，但这就是我工作的环境中的情况，这个例子很完整，因为我不确定如果我这样做是否会有所不同拿走东西……

那么我怎样才能让`decide`函数返回一个类型，然后以类似于我所展示的方式使用它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:19:56.453

我认为您可能想要`case object One`等，而不是使用 Class 或 ClassTag。然后你会得到有用的匹配支持。对于该`act`方法，您的案例对象可以返回 ClassTag 或类似的，或者只是让 act 将 One 与 doSmth[OneClass] 等相关联。

看来您可以将您的案例伴侣变成案例对象。那是不是很特别。

```
package typeswitch
import reflect.runtime.universe._

sealed trait Selection

class Super
case class One(a: Int) extends Super
case object One extends Selection
case class Two(b: Float) extends Super
case object Two extends Selection
case class Unknown() extends Super
case object Unknown extends Selection

object Test extends App {
  type What = Selection

  def decide(criterion: String): What = criterion match {
    case "one" => One
    case "two" => Two
    case _ => Unknown
  }

  val test = List(
    "ahaha" -> "one",
    "ohoho" -> "two",
    "lalala" -> "one"
  )

  val m = scala.collection.mutable.Map[String, What]()

  test map (pair => m(pair._1) = decide(pair._2))

  def act(code: String) = m(code) match {
    case One => doSmth[One]()
    // non-exhaustive
    //case Two => doSmth[Two]()
    case Unknown => doNothing()
    // handle exhaustively
    case s: Selection => doSmthNew(s)
  }
  def doSmthElse[A <: Super]()(implicit t: TypeTag[A]): A = {
    Console println s"Do st with $t"
    val claas: Class[_] = t.mirror.runtimeClass(t.tpe)
    null.asInstanceOf[A]
  }
  def doSmth[A <: Super]()(implicit t: ClassTag[A]): A = {
    Console println s"Do st with $t"
    val claas: Class[_] = t.runtimeClass
    null.asInstanceOf[A]
  }
  def doSmthNew[A >: What : ClassTag, B <: Super](what: A): B = {
    Console println s"Do st new with $what"
    null.asInstanceOf[B]
  }
  def doNothing() { }

  val res = act("lalala")
  Console println s"Got $res?"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T18:15:16.090

对不起，如果这太基本了，但是：

```
$ scala
Welcome to Scala version 2.10.0-RC2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_06).
Type in expressions to have them evaluated.
Type :help for more information.

scala> trait Bar
defined trait Bar

scala> case class Foo(i:Int) extends Bar
defined class Foo

scala> import reflect.runtime.universe._
import reflect.runtime.universe._

scala> def f[A <: Bar : TypeTag]() = println(s" Do ${ implicitly[TypeTag[A]] }") 
f: [A <: Bar]()(implicit evidence$1: reflect.runtime.universe.TypeTag[A])Unit

scala> f[Foo]
 Do TypeTag[Foo] 
```

# mysql - 尝试将实体从 SQL Server 添加或更新到 MySql

> ID：13805613
> 
> 赞同：0
> 
> 时间：2012-12-10T17:03:49.847
> 
> 标签：mysql, sql-server, entity-framework

我在 SQL Server 的上下文和 MySql 的上下文中有相同的实体，我需要将相同的实体从 SQL Server 添加到 MySql，但我不能。

我有这个代码：

```
 var test1 = contextSQL.MyEntitys.Where(m => m.Id == 1000).FirstOrDefault();
    var test2 = contextMySql.MyEntitys.Where(m => m.Id == 1000).FirstOrDefault();

    if(test2 != null)
       test2 = test1;
    else
       contextMySql.MyEntitys.Add(test1);

    contextMySql.SaveChanges(); 
```

这是行不通的。

我尝试了很多东西和其他人的示例代码，显然有同样的问题，但没有任何效果。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:15:30.203

```
test2 = test1; 
```

在这里你只是让 test2 引用 test1 但你不改变它，为你的实体实现方法 getValues 和 setValues 并这样做

```
test2.setValues(test1.getValues()); 
```

让它像这样

```
public void setValues(MyEntity entity) {
this.Name = entity.getName();
} 
```

和

```
test2.setValues(test1); 
```

关键是 contextMySql.MyEntitys 持有对 test2 指向的同一对象的引用。它指向同一个对象，但它们不相同，它们是相同地址的两个副本。如果您将新地址放入其中，则不会影响其他地址，但如果您将某些内容放入其中，则它将同时在其中。

```
Object o1 = new Object();
Object o2 = o1;

o1.setId(1);
//both have id 1

o2.setId(2);
//both have id 2

o2 = new Object();
o2.setId(3);
//o1 still have id 2 but o2 has id 3 
```

在您的情况下，o1 在 contextMySql.MyEntitys 内，而 test2 是 o2。

PS：实体的复数是实体。

# c# - 正则表达式（前导零）

> ID：13805614
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:03:54.777
> 
> 标签：c#, regex

我试图只允许以下形式的字符串：`.0.2`or `.1.2.3`or `.0.8.9.87`。

但是没有前导零。这是我到目前为止得到的`^(\.[0-9])*$`

这应该失败：`.0.02`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:09:13.530

如果我的要求正确，也许是这样的：

```
^(?:\.(?:0|[1-9]\d*))+$ 
```

它将是一个点`.`后跟数字，而不是前导 0，并且可以跟随任意数量的此类实例。

# c# - 类型转换和'as'转换之间的区别

> ID：13805617
> 
> 赞同：2
> 
> 时间：2012-12-10T17:05:41.857
> 
> 标签：c#, casting, type-conversion

> **可能重复：**
> [强制转换与在 CLR 中使用“as”关键字](https://stackoverflow.com/questions/496096/casting-vs-using-the-as-keyword-in-the-clr)

我知道有很多关于演员表的问题，但我不知道这两个演员表的具体名称，所以我不知道去哪里找。下面这两个演员有什么区别？

```
TreeNode treeNode = (TreeNode)sender; // first cast
TreeNode treeNode = (sender as TreeNode); //second cast 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T17:11:27.773

第一种类型的强制转换称为“显式强制转换”，第二种强制转换实际上是使用`as`运算符进行的转换，这与强制转换略有不同。

如果对象不是指定的类型，显式转换`(type)objectInstance`将抛出一个。`InvalidCastException`

```
// throws an exception if myObject is not of type MyTypeObject.
MyTypedObject mto = (MyTypedObject)myObject; 
```

如果对象不是指定类型，`as`则运算符不会抛出异常。它会简单地返回`null`。如果对象属于指定类型，则`as`运算符将返回对转换后类型的引用。使用`as`运算符的典型模式是：

```
// no exception thrown if myObject is not MyTypedObject
MyTypedObject mto = myObject as MyTypedObject; 
if (mto != null)
{
    // myObject was of type MyTypedObject, mto is a reference to the converted myObject
}
else
{
    // myObject was of not type MyTypedObject, mto is null
} 
```

有关显式转换和类型转换的更多详细信息，请查看以下 MSDN 参考：

*   [铸造 (C#)](http://msdn.microsoft.com/en-us/library/ms173105.aspx)
*   [类型转换和类型转换](http://msdn.microsoft.com/en-us/library/ms173105.aspx)
*   [如何：使用 as 和 is 运算符安全地进行转换](http://msdn.microsoft.com/en-us/library/cc488006.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T17:07:20.257

If `sender`is not a `TreeNode`than 第一个抛出异常，第二个返回`null`。

# sql - 如何使用 sql 计算表中最常见的条目？

> ID：13805619
> 
> 赞同：0
> 
> 时间：2012-12-10T17:05:39.113
> 
> 标签：sql, oracle, count

我有一个比赛条目表，里面有很多不同的成员。我想找出迄今为止参加最多比赛的成员。请问我该怎么做？我通过 SQL Developer 使用 Oracle，所以`TOP 1`不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:20:00.503

最有效的方法通常是使用分析函数

```
SELECT member_no,
       cnt
  FROM (SELECT member_no, 
               count(*) cnt,
               rank() over (order by count(*) desc) rnk
          FROM race
         GROUP BY member_no)
 WHERE rnk = 1 
```

您也可以进行`GROUP BY/ HAVING`查询，但这将涉及`race`两次访问表，这通常会降低效率。

如果出现平局，您希望发生什么？如所写，如果有多个`member_no`值与表中的大多数条目相关联，我发布的查询将返回多行`race`。如果你想任意选择一个`member_no`值，你可以使用`row_number`解析函数而不是`rank`. 或者，您可以在该子句中添加一些额外的标准，`order by`以确保有一个独特的顺序来打破平局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:18:10.740

那么您应该能够应用`count()`聚合并`group by member_no`获得总数：

```
select member_no, count(*) TotalEntries
from yourtable
group by member_no 
order by TotalEntries desc 
```

然后，如果您想限制您应该能够使用的记录：

```
select member_no, TotalEntries
from
(
    select member_no, count(*) TotalEntries, row_number() over(order by count(*) desc) rn
    from yourtable
    group by member_no 
) src
where rn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:20:24.550

尝试这样的事情：

```
with
data as (
    -- Create some test data
    select distinct mod(rownum,20)+1 race_id, round(DBMS_RANDOM.VALUE(1,5)) member_id 
    from dual
    connect by level <= 100
)
-- real query starts here
select *
from (
    select member_id, count(*) race_count
    from data
    group by member_id
    order by race_count desc
)
where rownum <= 1; 
```

注意：这只会返回一名成员，即使有几场比赛并列最多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T17:23:23.610

```
select member_id, races
  from (select member_id, count(*) races, rank() over (order by count(*) desc) rnk
          from your_table
         group by member_id)
 where rnk = 1; 
```

将获得所有参加最多比赛的成员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T18:41:36.303

最有效的方法是不使用窗口/分析函数：

```
select member_no, TotalEntries
from (select member_no, count(*) TotalEntries, rownum as seqnum
      from yourtable
      group by member_no 
      order by 2 desc
     ) t
where seqnum = 1 
```

# gwt - GWT ImageLoadingCell 刷新

> ID：13805620
> 
> 赞同：0
> 
> 时间：2012-12-10T17:05:28.147
> 
> 标签：gwt

我正在使用 ImageLoadingCell 类在表格中显示图像。它显示旋转图标，然后显示加载图像。这可以。但是，当表格刷新时，它会再次显示旋转图标，直到获得图像。我希望这只是第一次发生。有没有办法关闭刷新这个特定列，或者让单元格足够聪明而不会刷新自己？

[ImageLoadingCell.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/cell/client/ImageLoadingCell.java?r=10797/ImageLoadingCell.java) - 请参阅 onBrowserEvent() 和 render()。

```
ImageLoadingCell myImgCell = new ImageLoadingCell() {
  public Set<String> getConsumedEvents() {
  }
};

Column<MeasuredFilter, String> thumbColumn = new Column<MeasuredFilter, String>(myImgCell) {
  @Override
  public String getValue(MeasuredFilter object) {
      return object.getThumbnail();
  } 
```

# c++ - 如何比较和排序向量 在 c

> ID：13805625
> 
> 赞同：0
> 
> 时间：2012-12-10T17:05:09.960
> 
> 标签：c++, algorithm, sorting, vector, set-intersection

我有两个由蛋白质 pdb id 制成的载体，例如 1A3BA、3B5RE、1WYX5。我想比较这些两个向量中的蛋白质列表是否相同。有什么不同？我尝试在C++中使用stl算法，但是一直有段错误！有没有人可以告诉我怎么了..？我也不太确定排序算法，但无论如何..无论我是否进行排序，代码都有问题......

```
vector<string> pdb_b_list;
vector<string> pdb_a_list;
vector<string> intset;
vector<string>::iterator im;

           sort(pdb_a_list.begin(),pdb_a_list.end());
           sort(pdb_b_list.begin(),pdb_a_list.end());  

         if (includes(pdb_a_list.begin(), pdb_a_list.end(), pdb_b_list.begin(), pdb_b_list.end())){
            cout << "a includes b"<<endl;
             cnt_s++;
              }

       else if (includes(pdb_b_list.begin(), pdb_b_list.end(), pdb_a_list.begin(), pdb_a_list.end()) ){
             cout <<"b includes a" <<endl;
             cnt_s++;
              }
         else      {
           cout << "different proteins  in the sets" <<endl;
           cnt_d++;
           //sort(pdb_a_list.begin(),pdb_a_list.end());
          // sort(pdb_b_list.begin(),pdb_a_list.end());
           im = set_intersection(pdb_a_list.begin(),pdb_a_list.end(),pdb_b_list.begin(),pdb_a_list.end(), intset.begin());
           cout <<" the intersetion has \t" <<int(im- intset.begin())<<"elements" <<endl;

                   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:07:51.040

看看如何对第二个向量进行排序：

```
sort(pdb_b_list.begin(),pdb_a_list.end()); 
```

您插入了错误的结束索引，它应该是`pdb_**b**_list.end()`，因此是段错误。

# c# - 定时器，如自定义控件 int .NET

> ID：13805626
> 
> 赞同：1
> 
> 时间：2012-12-10T17:05:34.260
> 
> 标签：c#, custom-controls

如何在 C# 中创建一个自定义控件，它在设计时就像一个计时器，而在运行时是不可见的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:15:43.327

从 Component 派生您的类，而不是 Control

[零件](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.aspx)

# sql - 在 Rails 中准备好关于 Postgresql 的语句

> ID：13805627
> 
> 赞同：11
> 
> 时间：2012-12-10T17:05:14.233
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql, prepared-statement

现在我正在从 SQLite 迁移到 Postgresql，我遇到了这个问题。以下准备好的语句适用于 SQLite：

```
id = 5
st = ActiveRecord::Base.connection.raw_connection.prepare("DELETE FROM my_table WHERE id = ?")
st.execute(id)
st.close 
```

不幸的是，它不适用于 Postgresql - 它在第 2 行引发异常。我正在寻找解决方案并遇到了这个问题：

```
id = 5
require 'pg'
conn = PG::Connection.open(:dbname => 'my_db_development')
conn.prepare('statement1', 'DELETE FROM my_table WHERE id = $1')
conn.exec_prepared('statement1', [ id ]) 
```

这个在第 3 行失败。当我打印这样的异常时

```
rescue => ex 
```

ex 包含这个

```
{"connection":{}} 
```

在命令行中执行 SQL 是可行的。知道我做错了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-10T18:01:23.423

如果您想这样使用`prepare`，则需要进行一些更改：

1.  PostgreSQL 驱动程序希望看到编号占位符 ( `$1`, `$2`, ...) 而不是问号，您需要为准备好的语句命名：

    ```
     ActiveRecord::Base.connection.raw_connection.prepare('some_name', "DELETE FROM my_table WHERE id = $1") 
    ```

2.  调用序列[`prepare`](http://rubydoc.info/gems/pg/PG/Connection#prepare-instance_method)后跟[`exec_prepared`](http://rubydoc.info/gems/pg/PG/Connection#exec_prepared-instance_method)：

    ```
    connection = ActiveRecord::Base.connection.raw_connection
    connection.prepare('some_name', "DELETE FROM my_table WHERE id = $1")
    st = connection.exec_prepared('some_name', [ id ]) 
    ```

上面的方法适用于我的 ActiveRecord 和 PostgreSQL，`PG::Connection.open`如果你连接正确，你的版本应该可以工作。

另一种方法是自己引用：

```
conn = ActiveRecord::Base.connection
conn.execute(%Q{
    delete from my_table
    where id = #{conn.quote(id)}
}) 
```

这就是 ActiveRecord 通常在你背后做的事情。

直接与数据库交互在 Rails 中往往有点混乱，因为 Rails 的人认为你不应该这样做。

如果您真的只是想在没有干扰的情况下删除一行，您可以使用[`delete`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-delete)：

> **删除（）**
> 
> [...]
> 
> 使用记录的主键上的 SQL`DELETE`语句简单地删除该行，并且不执行任何回调。

所以你可以这样说：

```
MyTable.delete(id) 
```

你会发送一个简单`delete from my_tables where id = ...`的到数据库中。

# xml - 在 VB.NET 中将字符串转换为 XML

> ID：13805628
> 
> 赞同：0
> 
> 时间：2012-12-10T17:05:44.680
> 
> 标签：xml, vb.net

```
Dim filter As String
filter = 'Bal_ln_id = 110 and Bal_ln_id = 100'     
Dim xmldoc As New System.Xml.XmlDocument
xmldoc.LoadXml(filter) 
```

我只是想在 VB.net 中将字符串转换为 xml 文件。我得到一个 xmlException`'Data at the root level is invalid. Line 1, position 1.'`

我错过了什么吗？

我期待输出为

```
<DocumentElement>
  <DATA_TABLE>
    <BAL_LN_ID>110</BAL_LN_ID>
  </DATA_TABLE>
  <DATA_TABLE>
     <BAL_LN_ID>100</BAL_LN_ID>
  </DATA_TABLE>
</DocumentElement>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T18:26:24.440

要使用`XmlTextWriter`该类执行此操作，您可以执行以下操作：

```
Private Function GenerateXml(ByVal ids As List(Of String)) As String
    Dim stringWriter As New StringWriter()
    Dim xmlWriter As New XmlTextWriter(stringWriter)
    xmlWriter.WriteStartDocument()
    xmlWriter.WriteStartElement("DocumentElement")
    For Each id As String In ids
        xmlWriter.WriteStartElement("DATA_TABLE")
        xmlWriter.WriteStartElement("BAL_LN_ID")
        xmlWriter.WriteString(id)
        xmlWriter.WriteEndElement()
        xmlWriter.WriteEndElement()
    Next
    xmlWriter.WriteEndElement()
    xmlWriter.WriteEndDocument()
    Return stringWriter.ToString()
End Function 
```

然后你可以像这样使用它：

```
Dim ids As New List(Of String)()
ids.Add("110")
ids.Add("100")
Dim xml As String = GenerateXml(ids) 
```

# ios - 使用自定义 URL 方案将 PDF url 发送到使用 as3 和 FlashBuilder 4.6 的 iBooks 应用程序？

> ID：13805634
> 
> 赞同：2
> 
> 时间：2012-12-10T17:06:11.840
> 
> 标签：ios, actionscript-3, pdf, mxml, flash-builder

我目前正在使用 Adob​​e FlashBuilder 4.6 和 Air 3.4 开发一个 iOS 特定应用程序，一切进展顺利......

我唯一的问题是该应用程序将针对我们网站上的大量 PDF 文件，我希望用户能够在本机 iBooks 应用程序中查看 PDF 文件。（以便他们可以发送电子邮件、打印等 - 在我发现所有操作栏都在视口中删除之前，StageWebView 是一个选项）

我尝试过使用此代码，该代码确实打开了 iBooks，但它不会调用 PDF 文件的加载...

```
navigateToURL(new URLRequest("ibooks://www.website.com/myPdf.pdf")); 
```

有没有办法使用 AS3 将 PDF 的路径发送到 iBooks？

另外，有没有办法在尝试启动 iBooks 之前检测它是否已安装？（不像我将在首次启动时提示用户他们需要 iBooks 那样成为问题，但如果能够检测到他们是否拥有它，那就太好了！）

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T11:01:39.150

您是否尝试过 itms-books:// 和 itms-bookss:// 方案？

此外，这对我来说似乎是一个更好的解决方案 [http://andycodes.tumblr.com/post/738375724/ios4-sdk-opening-pdfs-in-ibooks](http://andycodes.tumblr.com/post/738375724/ios4-sdk-opening-pdfs-in-ibooks) 但您需要通过本机扩展来实现它.. .

# javascript - 带上下文的 TransitionTo

> ID：13805636
> 
> 赞同：1
> 
> 时间：2012-12-10T17:06:18.197
> 
> 标签：javascript, ember.js

我在使用 embers transitionTo 时遇到了一些问题，我无法让它将参数传递给上下文中的状态。尝试使用

```
test: Ember.Route.transitionTo('step', {step:1}), 
```

但这不会将上下文中的 step 值传递给路由。如果我有一个状态“最终”并使用

```
test: Ember.Route.transitionTo('final'), 
```

输入最终路线，因为显然没有传递任何上下文

[在http://jsfiddle.net/reubenposthuma/6p6XJ/167/](http://jsfiddle.net/reubenposthuma/6p6XJ/167/)工作演示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:24:22.483

使用时`Ember.Route.transitionTo('state')`，您正在定义一个处理程序，该处理程序调用 router.transitionTo('state', context)，其中上下文在运行时检索。

所以`test: Ember.Route.transitionTo('step', {step:1})`是无效的，但是动作助手中的上下文，例如`{{action test controller.content}}`

见[http://jsfiddle.net/Sly7/6p6XJ/168/](http://jsfiddle.net/Sly7/6p6XJ/168/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:41:26.883

我认为您正在寻找的可能是`router.send()`方法，它接受第二个参数作为上下文。

所以如果你在你的路由器中定义了这个

```
test: Ember.Route.transitionTo('final') 
```

然后你应该可以打电话

```
App.router.send('test', {step:1}) 
```

从您想要的代码中的任何位置。然后`{step:1}`它将作为上下文传递给路由。

# mysql - 如何在 MySQL 中创建未附加到模式/数据库的函数？

> ID：13805637
> 
> 赞同：2
> 
> 时间：2012-12-10T17:06:19.267
> 
> 标签：mysql, function

我试图弄清楚如何在 MySQL 中创建一个可以从任何模式/数据库访问的函数。

我试过：

```
DELIMITER $$
USE ``$$
CREATE FUNCTION . . . 
```

但我收到一条错误消息：未选择数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:02:11.633

正如@Jack[在我的问题下面的评论中所说](https://stackoverflow.com/questions/13805637/how-do-i-create-a-function-in-mysql-that-is-not-attached-to-a-schema-database#comment18991871_13805637)，这似乎是不可能的。现在我创建了一个函数模式/数据库并将我的函数添加到其中。

# c# - 按计划运行 C# 应用程序：明智的方法？

> ID：13805638
> 
> 赞同：0
> 
> 时间：2012-12-10T17:06:23.127
> 
> 标签：c#, automation, scheduled-tasks

我需要使用 C# 自动执行几个基本数据导入步骤，并在每个工作日运行一次。我知道我可以通过以下一项或多项组合来做到这一点：

1.  维护自己的时间表的独立应用程序
2.  维护自己的计划的 Windows 服务
3.  由 Windows 任务自动化运行的独立应用程序
4.  由其他一些自动化工具（SQL Scheduler、Stonebranch 等）运行的独立应用程序。

我倾向于#3，因为考虑到我们在此处拥有的应用程序和服务器环境的现有架构，它将允许最多的代码重用。

然而，这是明智的做法吗？我是否无意中 MacGuyvering 什么？

# android - 从 onDraw() 调用 getDrawingCache() 时出现 StackOverflowError

> ID：13805640
> 
> 赞同：3
> 
> 时间：2012-12-10T17:06:24.943
> 
> 标签：android, stack-overflow, android-3.0-honeycomb

我有一个手动绘制的自定义视图。我正在将东西绘制到位图中，然后在 onDraw() 中使用该位图。我意识到如果启用绘图缓存，我可以使用该缓存而不是创建自己的位图。这主要是有效的。

目前我的 onDraw 方法如下所示：

```
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(getDrawingCache(), 0, 0, null);
} 
```

这适用于我尝试过的模拟器。但是，我收到有关 StackOverflowError 的崩溃报告。报告如下所示：

```
java.lang.StackOverflowError
at android.view.View.getDrawingCache(View.java:10481)
at android.view.View.getDrawingCache(View.java:10446)
at com.aragaer.jtt.JTTClockView.onDraw(JTTClockView.java:162)
at android.view.View.draw(View.java:10983)
at android.view.View.buildDrawingCache(View.java:10700)
at android.view.View.getDrawingCache(View.java:10481)
at android.view.View.getDrawingCache(View.java:10446)
and so on... 
```

我查看了 android 源代码，实际上 buildDrawingCache 调用了 draw()。这将解释循环。但是 buildDrawingCache() 应该在第二次调用时立即返回。

除非设置了 PFLAG_DRAWING_CACHE_VALID ( [source](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/View.java#L12829) )，否则这不会发生。并且仅当视图附加到父级时才设置该标志，是硬件加速并且层类型是 LAYER_TYPE_NONE （[再次来源](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/View.java#L12951)）。

问题是 - 是否可以将图层类型显式设置为非无，或者我应该使用其他方法？如果是，我应该选择哪种类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T17:54:53.863

`getDrawingCache()`从来没有打算被 View 本身使用。它由父级管理。View在硬件加速时不设置标志的原因是因为“绘图缓存”与硬件加速具有不同的含义。它用于控制显示列表的生命周期。即使在你想要的时候设置了标志，你也不会得到你想要的行为。

这里有两种解决方案：创建您自己的位图或更好，只需在您的视图上启用绘图缓存并且不要`canvas.drawBitmap(getDrawingCache(), ...)`从`onDraw()`. 无论如何，父母都会为你做的！

# java - 在Java中找到多项式的根

> ID：13805644
> 
> 赞同：4
> 
> 时间：2012-12-10T17:06:39.187
> 
> 标签：java, math, polynomial-math

我需要找到[Legendre polynomial](https://en.wikipedia.org/wiki/Legendre_polynomials)的（近似的，数值的）解。我尝试了几个 Java 库，但都没有我想要的（最接近的是 commons-math，它甚至有在[Laguerre 求解器](https://en.wikipedia.org/wiki/Laguerre%27s_method)中查找解决方案的代码，但它没有公开该方法）。有现有的解决方案还是我需要实施自己的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T17:11:06.717

您可以使用[EJML](http://code.google.com/p/efficient-java-matrix-library/)（*高效 Java 矩阵库*）。

请找到以下相同的示例。

```
public class PolynomialRootFinder {

    /**
     * <p>
     * Given a set of polynomial coefficients, compute the roots of the polynomial.  Depending on
     * the polynomial being considered the roots may contain complex number.  When complex numbers are
     * present they will come in pairs of complex conjugates.
     * </p>
     *
     * @param coefficients Coefficients of the polynomial.
     * @return The roots of the polynomial
     */
    public static Complex64F[] findRoots(double... coefficients) {
        int N = coefficients.length-1;

        // Construct the companion matrix
        DenseMatrix64F c = new DenseMatrix64F(N,N);

        double a = coefficients[N];
        for( int i = 0; i < N; i++ ) {
            c.set(i,N-1,-coefficients[i]/a);
        }
        for( int i = 1; i < N; i++ ) {
            c.set(i,i-1,1);
        }

        // Use generalized eigenvalue decomposition to find the roots
        EigenDecomposition<DenseMatrix64F> evd =  DecompositionFactory.eigGeneral(N, false);

        evd.decompose(c);

        Complex64F[] roots = new Complex64F[N];

        for( int i = 0; i < N; i++ ) {
            roots[i] = evd.getEigenvalue(i);
        }

        return roots;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T20:48:10.803

从 3.1 版开始，[Commons-Math](https://cwiki.apache.org/confluence/display/COMMONS/Math)支持查找多项式函数的所有复数根。

见[LaguerreSolver#solveAllComplex](http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/analysis/solvers/LaguerreSolver.html#solveAllComplex%28double%5B%5D,%20double%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T12:59:56.230

[Commons-Math](https://cwiki.apache.org/confluence/display/COMMONS/Math)有一个合理的多项式 API：

```
//  -4 + 3 x + x^2
PolynomialFunction polynomial = new PolynomialFunction(new double[]{ -4, 3, 1});
LaguerreSolver laguerreSolver = new LaguerreSolver();
double root = laguerreSolver.solve(100, polynomial, -100, 100);
System.out.println("root = " + root); 
```

# windows-installer - 自定义操作的 CLR 版本

> ID：13805645
> 
> 赞同：1
> 
> 时间：2012-12-10T17:06:40.830
> 
> 标签：windows-installer, installshield

我有一个 InstallShield 2010 基本 MSI 安装，其中包含与应用程序一起安装的托管代码 .dll 自定义操作。如果我使用 .NET 3.5 构建自定义操作，它会起作用，但如果我使用 4.0 构建它，它会失败。

我在手册中看到了设置 CLR 版本的参考资料，但我不知道如何在 MSI 中实际执行它。

感谢所有帮助。

**编辑 1**：

我运行了一个简单的 MSI，它使用 .NET 版本 4 运行 CA 构建，以下是从日志中挑选出来的一些有趣的事情：

> 属性（S）：RedirectedDllSupport = 2
> 
> 属性（S）：MsiWin32AssemblySupport = 5.1.2600.5512
> 
> 属性（S）：MsiNetAssemblySupport = 4.0.30319.1
> 
> ……
> 
> MSI (c) (0C:10) [12:12:15:689]：连接到 CA 接口的服务。
> 
> InstallShield：成功加载 CLR
> 
> InstallShield：加载程序集 [#v4.dll]
> 
> InstallShield：解析程序集文件密钥 [#v4.dll]。
> 
> InstallShield: - 解析为 C:\Program Files\My Company Name\My Product Name\V4.dll
> 
> InstallShield：从路径 C:\Program Files\My Company Name\My Product Name\V4.dll 加载程序集
> 
> InstallShield：无法加载托管自定义操作程序集 [#v4.dll]：无法加载文件或程序集“file:///C:\Program Files\My Company Name\My Product Name\V4.dll”或其其中之一依赖关系。此程序集由比当前加载的运行时更新的运行时构建，无法加载。
> 
> 行动于 12:12:15 结束：v4Test。返回值 3。
> 
> ……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:41:00.620

在支持公共语言运行时程序集的系统上，Windows Installer 将[MsiNetAssemblySupport 属性](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/32f4f971-8e42-46b0-96e4-b3505abd2314)设置为用户计算机上最新版本的 .NET Framework 版本。您可以检查版本的 MsiNetAssemblySupport 属性，然后在您的 CA 需要时安装更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:35:55.060

我无法使用 InstallShield 中的“托管程序集”来完成这项工作。我仍在使用 InstallShield 进行安装，但我使用的是 WiX DTF（部署工具基金会）自定义操作，它在各个版本中都能正常工作。

# node.js - 如果 Windows PowerShell 的颜色在运行程序后损坏，如何重置它们？

> ID：13805646
> 
> 赞同：27
> 
> 时间：2012-12-10T17:06:41.467
> 
> 标签：node.js, powershell, colors

我开始将 PowerShell 用于使用 node.js 的 Windows 项目。从 Powershell 命令行运行许多程序（包括节点、主管和 npm）时，我的 PowerShell 背景和前景色开始从默认的 Powershell 颜色发生变化。如何在 PowerShell 中保持一致的外观，以便轻松读取运行命令的结果？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2016-02-17T23:52:42.557

作为一次性操作，只需运行以下命令：

```
> [Console]::ResetColor() 
```

[来自文档：（](https://msdn.microsoft.com/en-us/library/system.console.resetcolor%28v=vs.110%29.aspx) 强调添加）

> 前景色和背景色**恢复为当前进程开始时存在的颜色**。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-10T17:14:37.310

我在使用 MSBuild 时遇到了这个问题，尤其是当我 ctrl+C 构建时。这是我放入 profile.ps1 文件中的内容：

```
$OrigBgColor = $host.ui.rawui.BackgroundColor
$OrigFgColor = $host.ui.rawui.ForegroundColor

# MSBUILD has a nasty habit of leaving the foreground color red
# if you Ctrl+C while it is outputting errors.
function Reset-Colors {
    $host.ui.rawui.BackgroundColor = $OrigBgColor
    $host.ui.rawui.ForegroundColor = $OrigFgColor
} 
```

然后，当 MSBuild 搞砸它们时，我只调用 Reset-Colors。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-10T17:10:59.977

如果您还没有配置文件，请首先在 PowerShell 中创建配置文件：

```
test-path $profile
new-item -path $profile -itemtype file -force
notepad $profile 
```

其次，将此代码放入文件中：

```
function prompt {
  [Console]::ResetColor()
} 
```

第三，检查 PowerShell 是否允许您运行脚本。

```
Get-ExecutionPolicy 
```

如果显示为 Restricted，则运行以下 AS 管理员（请确保您了解安全隐患）：

```
Set-ExecutionPolicy RemoteSigned 
```

打开一个新的 PowerShell 提示符，您应该能够运行 node 或其他命令而不会出现任何颜色问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-23T10:41:22.753

我通过运行以下命令来修复颜色问题：

```
cmd
color 07
exit 
```

这些命令的作用是在 PowerShell 中运行 cmd，运行`color 07`以修复颜色，然后从 cmd 退出以恢复到 PowerShell。

# time - 水晶公式在页脚中求和时间字段

> ID：13805648
> 
> 赞同：1
> 
> 时间：2012-12-10T17:06:51.577
> 
> 标签：time, crystal-reports, formula

我正在尝试添加/总结 TIME 并在页脚中以 TIME 格式 HH:MM 该字段是一个仅按分钟显示的数字字段（示例：60.00）并创建了一个公式将其转换为 HHMM（01:00 ） 经过：

```
whileprintingrecords;
numberVar hrs;
numberVar min;
stringVar hhmm;
hrs := Remainder(Truncate({field.duration}/60),60);
min := Remainder({field.duration},60);
hhmm := totext(hrs,"00") + ":" + totext(min,"00"); 
hhmm 
```

现在我需要将它添加到页脚中，但格式为 HH:MM 任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:20:10.530

我想你有点回答了你自己的问题。而不是为每条记录的持续时间执行该公式，只需为持续时间的总和执行此公式。

```
local numbervar sum_mins := sum([field.duration}); //sum up each record's duration in mins
local numbervar hrs;
local numbervar mins;
hrs := truncate(sum_mins/60); //get whole hours
mins := remainder(sum_mins,60); //get remaining minutes
totext(hrs,'00') + ':' + totext(mins,'00') 
```

然后将此公式放在报表的页脚中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T02:24:04.057

创建公式，称之为**“FieldToInt”**详细信息

```
int(fieldname); 
```

然后，为分钟的剩余小数创建另一个公式**“FieldToDec”**

```
({fieldname} - {fieldtoint}) * 100 
```

最后在组页脚添加这个公式

```
numbervar hh;
numbervar mm;
numbervar a;
numbervar b;
numbervar c;

hh := sum({FieldToInt},{group}); // sum of hh (in hh.mm)
mm := sum({FieldTodec},{group}); // sum of mm (in hh.mm)

//formula to convert total mm to hh.mm
 a := truncate(mm / 60);
 b := a * 60;
 c := (mm - b) / 100;

//This will be the final total hrs output
hh + (a + c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T09:21:20.090

制作两个公式

1.  创建此公式 (@time) 以将所有字符串字段转换为时间，然后转换为秒：

    ```
    timevar t:= time({time_field});
    (hour(t)*3600) + (minute(t)*60) + second(t); 
    ```

2.  创建此公式以添加所有秒数并将它们转换回 hh: mm: ss:

    ```
    numbervar fin_t := sum({@time},{groupName}); //@time is the formula you create in the 1st step
    NumberVar Hours   := Truncate (fin_t/3600);
    NumberVar Minutes := Truncate (Remainder (fin_t,3600)/60);
    NumberVar Seconds := Remainder (fin_t,60) ; 
    ```

    将其放在报告页脚。

    ```
    Totext (Hours, "00") + ':'+ Totext (Minutes, "00") + ':' + Totext(Seconds, "00"); 
    ```

# php - PHP imagecopy（）：设置X坐标使黑色区域

> ID：13805652
> 
> 赞同：1
> 
> 时间：2012-12-10T17:07:08.307
> 
> 标签：php

我正在制作一个从外部 URL 提取图像的脚本。然后我使用 imagecopy() 来合并图像，因为它是透明图像。但是，当我将 X 坐标指定为不为 0 时，它会在图像的一侧创建一个黑色区域。这是我的代码的一部分。

```
$src = imagecreatefrompng("URL...");
imagecopy($im, $src, 0, 0, 50, 18, 300, 300); 
```

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:25:07.153

您好，欢迎来到论坛！

您需要在这些行中间添加这些行，因此您的最终代码应该是：

```
$src = imagecreatefrompng("URL...");
imagealphablending($im, false);
imagesavealpha($im, true);
imagecopy($im, $src, 0, 0, 50, 18, 300, 300); 
```

现在应该可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:53:18.970

我花了很长时间让透明度为我工作，针对您的情况进行了修改但未经测试：

```
$newImg=imagecreatetruecolor($im_width,$im_height);
imagealphablending($newImg,false);
imagesavealpha($newImg,true);
$transparent = imagecolorallocatealpha($newImg, 255, 255, 255, 127);
imagefilledrectangle($newImg, 0, 0, $im_width, $im_height, $transparent);
imagecopyresampled($newImg, $im, 0, 0, 0, 0, $im_width, $im_height, $im_width, $im_height);
imagecopy($newImg, $src, 0, 0, 50, 18, 300, 300); 
```

# html - PhpMyAdmin like table（调整大小和重新排列单元格）

> ID：13805653
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:07:10.097
> 
> 标签：html, html-table, resize

我想知道是否可以（轻松地）重现在 phpmyadmin 表中找到的表单元的大小调整和重新排列（我的意思是显示数据库值的 html 表）。实际上，我想任何解决方案都可以，但是由于 phpmyadmin 是开源的，我想也许我可以依赖他们的代码。

编辑：我想做的是以下。假设在我的 html 表中，我有四个可见的列：姓名、姓氏、出生地和生日。

假设默认情况下，它们按该顺序排列，每列的宽度为 25%。

我想为用户提供重新排列表格 html 表格的可能性，以便他们可以选择每列的首选顺序和宽度。

我想知道是否可以简单地使用 DOM（基本上我会说使用 js），或者唯一的方法是结合 js、ajax 和 php，但是，这会导致更多复杂的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:35:00.233

也许你可以使用像“ [Flexigrid](http://flexigrid.info) ”这样的 jQuery 库，因为它有你需要的一切：

*   可排序的列
*   隐藏/显示列
*   更改列宽
*   ajax 支持
*   您可以连接的 API

# jquery - JQuery Mobile 选择列表 - 本机菜单模式下的固定宽度 (Android)

> ID：13805655
> 
> 赞同：1
> 
> 时间：2012-12-10T17:07:10.080
> 
> 标签：jquery, mobile, selectlist

我正在使用一个使用 JQuery Mobile、Phonegap for Android 平台的选择列表。选择列表中的项目具有不同数量的字符。选择列表的宽度根据所选项目的长度而变化。

我们如何使用 native-menu="true" 选项集固定选择列表的宽度。

我找到了这个，但它适用于 native-menu="false"：

[JQuery Mobile：调整分组选择的宽度和高度](https://stackoverflow.com/questions/7682914/jquery-mobile-adjusting-width-and-height-of-grouped-select)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T09:43:15.557

**尝试通过 CSS 设置固定宽度以选择菜单：**

```
select
{
width:150px ! important ;
} 
```

# git - 如何在 git-buildpackage 中启用子模块克隆

> ID：13805658
> 
> 赞同：3
> 
> 时间：2012-12-10T17:07:21.890
> 
> 标签：git, git-submodules, deb

我们一直在使用`git-buildpackage`构建 Debian 软件包并取得了巨大的成功，但是自从将 git 子模块引入到组合中后，我们最近遇到了障碍。

我们通常运行

```
git-buildpackage -b -us -uc --git-export-dir="latest" 
```

构建包。然而，任何子模块的内容都不会被检出并包含在包中（我们只是得到一个子模块所在的空目录，就像我们在没有`--recursive`标志的情况下克隆一样）。

从`git-buildpackage`日志中可以看出，v0.5.0.20 中添加了对子模块的支持，但在 0.5.22 版中，有一个更改日志条目显示“默认禁用子模块处理”。这意味着我们可以设置一个标志或开关来启用它。但是没有多少手册页和互联网拖网显示它。

我想子模块在 Debian 源代码中很常见——但对于我来说，我无法弄清楚如何正确构建包。我的问题是因为我告诉它只做一个二进制包（`-b`开关）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:24:55.287

此更改的[提交](https://github.com/agx/git-buildpackage/commit/f5db59de4e0d60161136339045124db09cdb34fa)看起来就像您正在寻找的一样`--submodules`简单。

# asp.net - razor 函数调用 - NullReferenceException

> ID：13805659
> 
> 赞同：0
> 
> 时间：2012-12-10T17:07:27.943
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

这是一个非常简单的类（Test.cs）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcApplication5.Models
{
    public class Test 
    {
        public string add(string s)
        {
            return s + "blaaaaa";
        }

    }
} 
```

和一个视图（Index.cshtml）

```
@model MvcApplication5.Models.Test
@{
    ViewBag.Title = "Homepage";
}

@Model.add("test") 
```

我得到一个 System.NullReferenceException: Object reference not set to an instance of an object，但我不知道为什么。

谢谢，罗克索 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:15:03.933

您必须创建模型的实例

```
var myModel = new MvcApplication5.Models.Test() 
```

并通过控制器将其传递给视图。查看一些初学者 mvc 指南以了解如何编写控制器。

# spring - spring security open ldap memberOf

> ID：13805661
> 
> 赞同：3
> 
> 时间：2012-12-10T17:07:29.813
> 
> 标签：spring, spring-security, openldap

我正在尝试使用 spring security 3.1 配置开放式 ldap 身份验证，似乎我可以很好地进行身份验证，但是角色没有通过，将我重定向到 access-denied-page

使用命令行实用程序 ldapsearch，我必须指定“memberOf”参数，否则不会打印出任何角色。

我需要为 ldap-authentication-provider 设置特殊参数吗？

```
 <s:ldap-server url="ldaps://IP:636/dc=blank,dc=loc"
        manager-dn="cn=blank,ou=blank,ou=blank,ou=blank,dc=blank,dc=loc"
        manager-password="password"  />
 <s:authentication-manager>
     <s:ldap-authentication-provider
            user-search-filter="uid={0}"
            user-search-base=""
            group-search-base=""
            group-search-filter=""
            group-role-attribute="memberOf"
     />
  </s:authentication-manager> 
```

# static-analysis - 如何将 PC-lint 与 Visual C++ 2008 集成

> ID：13805664
> 
> 赞同：2
> 
> 时间：2012-12-10T17:07:40.507
> 
> 标签：static-analysis, lint, visual-c++-2008, pc-lint

我的公司有 PC-lint 可执行文件 lint-nt.exe。

我正在尝试使用它来将 PC-lint 与 MS Visual Studio 2008 集成以分析*.c/* .cpp 源。但我没有成功让它发挥作用。

我读：

[http://www.gimpel.com/html/pub80/env-vc9.lnt](http://www.gimpel.com/html/pub80/env-vc9.lnt)

以及一两个其他网站上的类似此类信息，但没有成功。

我按照指示的步骤在 Visual C++ 8 中添加了一个外部工具，但是当我单击新添加的工具时，pc-lint 窗口会立即打开并立即关闭，我怀疑它是否运行了任何分析。所以它不适合我。

然后我尝试在 Windows 命令提示符下运行 lint-nt.exe

`lint-nt.exe +fce +fcp +cpp(cpp,cxx,cc) -i"C:\Program Files\Microsoft Visual Studio 9.0\VC\include" +libdir +libh myfile.cpp`

它确实执行了分析，但它分析了 Visual C++ INCLUDE 文件夹（limits.h sal.h iostream 等）中的许多头文件，因为我的源文件有`#include <iostream>`等等。

编辑：我看到 pc-lint 有 options`+/-libdir`和`+/-libh`这样的选项，这可能会有所帮助，但我只是无法正确使用它们来避免对编译器头文件的分析。

两个问题：

1.  如何防止 pc-lint 分析编译器头文件而只分析我的源代码文件？
2.  如何将 pc-lint 集成到我正在使用的 Visual C++ 2008 Express 版本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:56:48.350

如果您的公司有 Lint 可执行文件，如果没有纸质版，它也有 PDF 格式的 PC-Lint 手册。它与可执行文件一起提供在 CD-ROM 上。该手册是您的朋友，您可以了解如何使用所有可用的选项。

对于你的问题：

1.  要快速开始，请从命令行中删除、和`+fce`选项。我想您只是错过了对 MS 库产生的许多警告保持沉默的选项。不要使用：您将静音库头文件的所有选项，但源自这些库头文件的不正确配置可能会在您的代码中产生大量警告，您无法找到隐藏在这些编译器头文件中的罪魁祸首。`+fcp``+libdir``+libh``-wlib(1)``-wlib(0)`
2.  user34341 的链接并不是一个糟糕的开始，尽管我在精确跟踪时遇到了一些问题。Gimpel 网站上的 env-vc9.lnt 假定您已经使用他们的安装程序安装了 PC-lint。在你问题的字里行间阅读，我猜你没有。创建此类安装的详细信息包括生成 PC-lint 选项文件 std.lnt 让我们对这个答案太过分了，但我写了一个 PDF 文档“[如何使用 PC Lint](http://www.bezem.de/pdf/htwpl.pdf) ”详细解释了这一切。如果你结合[来自 user34341 的链接](http://www.viva64.com/en/a/0033/)、来自 Gimpel 的[选项文件](http://www.gimpel.com/html/pub90/env-vc9.lnt)和我的文档，你应该没问题。

此外： env-vc9.lnt 仅包含使用 VC9 环境（又名 Visual Studio）的选项；要支持 C/C++ 编译器，您需要适当的编译选项文件[http://www.gimpel.com/html/pub80/co-msc90.lnt](http://www.gimpel.com/html/pub80/co-msc90.lnt)及其相关的（仅 Lint）头文件[http://www .gimpel.com/html/pub80/co-msc90.h](http://www.gimpel.com/html/pub80/co-msc90.h)。

因此，在您开始在 VS2008 中集成之前，请下载它们并尝试以下命令行：

```
lint-nt.exe +cpp(cpp,cxx,cc) co-msc90.lnt myfile.cpp 
```

看看结果是否比以前更好。该`-i`选项没问题，但如果您为 Visual Studio 正确设置了环境变量（例如 %INCLUDE%），则没有必要。

还有一个提示：假设您还没有这样做，请查看您可用的 PC-lint 版本，并确保更新到最新的补丁级别：[7.50ad](http://www.gimpel.com/html/ptch75.htm)、[8.00x](http://www.gimpel.com/html/ptch80.htm)、[9.00i](http://www.gimpel.com/html/ptch90.htm)（当前版本）；版本号下的链接会将您带到相应的网站页面。它会为你省去很多麻烦。我知道获得最新版本并不总是一种选择，即使非常可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:46:26.907

[PC-Lint 的安装及其在 Visual Studio 2005 中的使用](http://www.viva64.com/en/a/0033/)。见中间文章。

# spring - 将拦截器应用于连接为 Spring @Component 的 Jersey RESTful 服务

> ID：13805674
> 
> 赞同：2
> 
> 时间：2012-12-10T17:08:15.287
> 
> 标签：spring, jersey, interceptor

是否可以应用 Spring 处理程序拦截器或类似于 Jersey Restful 服务的东西？Jersey 服务是用 Spring 构建的，并且在 Spring @Component 中？

我注意到 Spring 允许对控制器使用处理程序拦截器，但找不到任何可以与我的 Jersey-Rest 组件一起使用的东西

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:14:55.750

Jersey 带有它自己的 servlet，因此几乎在 Spring MVC 之外，拦截器是其中的一部分。您可以：

*   使用 Spring HTTP 过滤器来按摩 Jersey 周围的 HTTPServletRequest 和 HTTPServletResponse
*   在 Jersey 内部的 Spring 组件周围使用 Spring Handled Aspect 来按摩方法调用和结果。

这里的这个人在总结细节方面做得很好：[http ://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/](http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T09:42:01.283

我遇到了类似的问题，这就是我在泽西岛[解决它的方法。](https://stackoverflow.com/questions/35727497/is-there-an-interceptor-in-jersey-similar-to-that-of-springs-handlerinterceptor)这与 Spring 的 HandleInterceptor 类似。

# android - 当我尝试获取 SQLite 数据时出现 StringIndexOutOfBoundsException

> ID：13805677
> 
> 赞同：0
> 
> 时间：2012-12-10T17:08:22.260
> 
> 标签：android, sqlite, android-sqlite, indexoutofboundsexception

当我尝试在我的活动中从数据库 SQLite 获取数据时

```
DataBaseAdapterCars mDbHelper = new DataBaseAdapterCars(this);
        mDbHelper.createDatabase();
        mDbHelper.open();

        Car[] carsList= mDbHelper.getDataDBCarsArray(uso, eta,
        category, class); 
```

我收到这个错误

```
12-10 17:14:47.069: E/AndroidRuntime(17936): FATAL EXCEPTION: main
12-10 17:14:47.069: E/AndroidRuntime(17936): java.lang.StringIndexOutOfBoundsException
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.app.ContextImpl.validateFilePath(ContextImpl.java:1649)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:555)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:187)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at com.my.app.db.DataBaseHelper.createDataBase(DataBaseHelper.java:36)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at com.my.app.db.DataBaseAdapterCars.createDatabase(DataBaseAdapterCars.java:42)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at com.my.app.Cars.initializeData(Cars.java:111)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at com.my.app.Cars$MyAsync$1.run(Cars.java:156)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.os.Handler.handleCallback(Handler.java:587)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.os.Looper.loop(Looper.java:130)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at java.lang.reflect.Method.invokeNative(Native Method)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at java.lang.reflect.Method.invoke(Method.java:507)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-10 17:14:47.069: E/AndroidRuntime(17936):    at dalvik.system.NativeStart.main(Native Method) 
```

我的*DataBaseAdapterCars*类是

```
public class DataBaseAdapterCars {

    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;
    static String currentDBName;

    String language;

    public DataBaseAdapterCars(Context context) {
        this.mContext = context;
        currentDBName = "CarInfo";
        mDbHelper = new DataBaseHelper(mContext, currentDBName);
        String lang = Locale.getDefault().getLanguage();
        if (lang.equals("es_ES")) {
            language = "ES";
        } else {
            language = "EN";
        }
    }

    public DataBaseAdapterCars createDatabase() throws SQLException {
        try {
            mDbHelper.createDataBase();
        } catch (IOException mIOException) {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public DataBaseAdapterCars open() throws SQLException {
        try {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } catch (SQLException mSQLException) {
            Log.e(TAG, "open >>" + mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    public Cursor getData(String uso, String eta, String category,
            String class) {
        try {
            Cursor c;
            if (class.equals(null) && category.equals(null)) {
                c = mDb.rawQuery("SELECT * FROM dbtable WHERE Uso LIKE \""
                        + uso + "\" AND Eta LIKE \"" + eta
                        + "\" AND Language LIKE \"" + language
                        + "\" order by Name asc", null);
            } else if (class.equals(null)) {
                c = mDb.rawQuery("SELECT * FROM dbtable WHERE Uso LIKE \""
                        + uso + "\" AND Eta LIKE \"" + eta
                        + "\" AND Tipo LIKE \"" + category
                        + "\" AND Language LIKE \"" + language
                        + "\" order by Name asc", null);
            } else if (category.equals(null)) {
                c = mDb.rawQuery("SELECT * FROM dbtable WHERE Uso LIKE \""
                        + uso + "\" AND Eta LIKE \"" + eta
                        + "\" AND Certification LIKE \"" + class
                        + "\" AND Language LIKE \"" + language
                        + "\" order by Name asc", null);
            } else {
                c = mDb.rawQuery("SELECT * FROM dbtable WHERE Uso LIKE \""
                        + uso + "\" AND Eta LIKE \"" + eta
                        + "\" AND Tipo LIKE \"" + category
                        + "\" AND Certification LIKE \"" + class
                        + "\" AND Language LIKE \"" + language
                        + "\" order by Name asc", null);
            }
            if (c != null) {
                c.moveToNext();
            }
            return c;
        } catch (SQLException mSQLException) {
            Log.e(TAG, "getDataCar >>" + mSQLException.toString());
            throw mSQLException;
        }

    }

    public Car[] getDataDBCarsArray(String uso, String eta,
            String category, String class) {
        ArrayList<Car> list = new ArrayList<Car>();
        Cursor c = getData(uso, eta, category, class);
        try {
            if (c.moveToFirst()) {
                do {
                    Car n = new Car(c.getString(0), c.getString(1),
                            c.getString(2), c.getString(3), c.getString(4),
                            c.getString(5), c.getString(6), c.getString(7),
                            c.getString(8), c.getString(9), c.getString(10),
                            c.getString(11), c.getString(12), c.getString(13));
                    list.add(n);
                } while (c.moveToNext());
            }
        } catch (SQLiteException e) {
            Log.d("SQL Error", e.getMessage());
            return null;
        } finally {
            c.close();
            mDb.close();
        }

        Car[] listArray = list.toArray(new Car[list.size()]);
        return listArray;
    }

} 
```

DB 表有 14 列，Object Car 有 14 个字符串参数。

怎么了？

DataBaseHelper 类是

```
public class DataBaseHelper extends SQLiteOpenHelper {
    private static String TAG = "DataBaseHelper"; // Tag just for the LogCat
                                                    // window
    // destination path (location) of our database on device
    private static String DB_PATH = "";
    private static String DB_NAME = "";// Database name
    private SQLiteDatabase mDataBase;
    private final Context mContext;

    public DataBaseHelper(Context context, String nomeDB) {
        super(context, DB_NAME, null, 1);// 1? its Database Version
        DB_NAME = nomeDB;
        DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
        this.mContext = context;
    }

    public void createDataBase() throws IOException {
        // If database not exists copy it from the assets

        boolean mDataBaseExist = checkDataBase();
        if (!mDataBaseExist) {
            this.getReadableDatabase();
            this.close();
            try {
                // Copia il database dalla cartella assests
                copyDataBase();
                Log.e(TAG, "createDatabase database created");
            } catch (IOException mIOException) {
                throw new Error("ErrorCopyingDataBase");
            }
        }
    }

    // Controlla Che il database esista
    private boolean checkDataBase() {
        File dbFile = new File(DB_PATH + DB_NAME);
        // Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }

    // Copia il database dalla cartella assests
    private void copyDataBase() throws IOException {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer)) > 0) {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    // Apre il database, cosi da poter eseguire le query
    public boolean openDataBase() throws SQLException {
        String mPath = DB_PATH + DB_NAME;
        // Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null,
                SQLiteDatabase.CREATE_IF_NECESSARY);
        // mDataBase = SQLiteDatabase.openDatabase(mPath, null,
        // SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() {
        if (mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T18:04:25.433

异常来自您实例化`DataBaseHelper`类的方式，最准确地说，在您的构造函数中：

```
//...
private static String DB_NAME = "";// Database name
    private SQLiteDatabase mDataBase;
    private final Context mContext;

    public DataBaseHelper(Context context, String nomeDB) {
        super(context, DB_NAME, null, 1);// 1? its Database Version
        DB_NAME = nomeDB;
//... 
```

正如您所看到的，当您调用您传递的超级构造函数时，该构造函数`DB_NAME`当时是空`String`的。在某些时候，您调用您调用`createDatabase()`的类的数据库`DataBaseHelper`：`this.getReadableDatabase();`。这将触发有关数据库的一些初始化，该初始化将因该异常而失败，因为您将空字符串作为数据库名称传递。

即便如此，您的代码还是有点混乱，使用`SQliteOpenHelper`并从资产中复制数据库。如果您打算将数据库与您的应用程序捆绑在一起（在资产中），那么也许您会想要考虑使用[这个库](https://github.com/jgilfelt/android-sqlite-asset-helper)，它会让您的生活更轻松。

# css - Div 不会与页面的其他元素一起移动

> ID：13805678
> 
> 赞同：0
> 
> 时间：2012-12-10T17:08:26.110
> 
> 标签：css

我正在使用我购买的模板开发 WordPress。我在网站顶部添加了一个 div，其中唯一的元素是一个链接。

我需要让它与页面的其余元素对齐，所以我使用了 padding-left。问题是，当我调整窗口大小时，页面的其余元素正在移动，但我无法让链接以相同的方式移动。

我试过'位置'但没有运气。

这是我正在使用的代码：

```
<div id="extra_header">
        <a class="specialLink" href="http://www.fitnessforum.gr">FITNESSFORUM.gr</a>
        </div> 
```

CSS

```
#extra_header{
    height:26px;
    background-color: #ac0003;
    display: block;
    }

    a.specialLink:link {
    color: #eeeeee;
    font-size: 12px;
    font-family: arial;
    font-weight: normal;
    font-style: normal;
    line-height: 26px;
    float: left;
    margin-left: 260px;
    }

    a.specialLink:hover { 
    color: #FFFFFF; 
    font-size:12px;
    font-family: arial;
    font-weight:normal;
    font-style:normal;
    text-decoration:underline;
    float: left;
    margin-left: 260px;
    line-height:26px;
    } 
```

这里还有一个网站链接：[www.topgreekgyms.fitnessforum.gr](http://www.topgreekgyms.fitnessforum.gr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:12:38.323

添加到`#extra_header`

```
width:1020px;
margin:0 auto; 
```

并调整`margin-left:260px`到你想要的..

* * *

此外，您不需要复制`:hover`规则上的所有属性。

只是那些从链接的正常状态发生变化的那些。

所以

```
a.specialLink:hover { 
    color: #FFFFFF; 
    text-decoration:underline;
} 
```

# linq - Linq 到实体优化

> ID：13805680
> 
> 赞同：0
> 
> 时间：2012-12-10T17:08:40.493
> 
> 标签：linq, entity-framework

我有以下 linq 到实体查询

```
from p in Products
where p.ProductId==1219
select new
{
    Name = p.ProductName,
    count = (from dc in DiscountCodes
        where dc.ProductId == p.ProductId
        select dc).Count()
} 
```

现在生成的 sql 是（使用 linqpad）

```
-- Region Parameters
DECLARE @p0 Int = 1219
-- EndRegion
SELECT [t0].[ProductName] AS [Name], (
    SELECT COUNT(*)
    FROM [DiscountCode] AS [t1]
    WHERE [t1].[ProductId] = [t0].[ProductId]
    ) AS [count]
FROM [Product] AS [t0]
WHERE [t0].[ProductId] = @p0 
```

这似乎不是很有效，特别是如果我需要开始在相关表上添加更多计数。

有没有更好的方法来优化这个查询？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:16:00.277

我想你`DiscountCodes`和`Products`表之间有关系。我的意思是`DiscountCodes`表有`ProductId`ForeignKey

那么这应该更好

```
from p in Products
where p.ProductId==1219
select new
{
    Name = p.ProductName,
    Count = p.DiscountCodes.Count,
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:16:29.170

实体框架通过它们的外键关系创建父表和子表之间的关系。所以在这种情况下，下面的查询应该适合你。

```
from p in Products
where p.ProductId==1219
select new
{
    Name = p.ProductName,
    count = p.DiscountCodes.Count()
} 
```

# android - 服务中的android自定义吐司

> ID：13805683
> 
> 赞同：2
> 
> 时间：2012-12-10T17:08:58.273
> 
> 标签：android, service, toast

我希望服务在进入手机主菜单、连接服务器并且如果得到消息显示自定义吐司后工作。我做了大部分，但我只能在吐司中显示文本。我想用图像制作自定义吐司，我找到了很多解决方案如何在活动中做到这一点，但它在服务中不起作用。

有人能告诉我我应该改变什么才能使这段代码正常工作吗？

```
 public class MyService extends Service {
    private Toast toast;
    private Timer timer;
    private TimerTask timerTask;
    private class MyTimerTask extends TimerTask {
        @Override
        public void run() {
            showToast();
        }
    }

    private void showToast() {

        LayoutInflater inflater = (LayoutInflater)
           getSystemService(LAYOUT_INFLATER_SERVICE);
         View layout = inflater.inflate(R.layout.toast, null);
         ImageView image = (ImageView)
           layout.findViewById(R.id.image);
         image.setImageResource(R.drawable.truck); 
         TextView textView = (TextView)
           layout.findViewById(R.id.text);
         textView.setText("Some toast message");
         toast = new Toast(getApplicationContext());
         toast.setGravity(Gravity.BOTTOM, 0, 0);
         toast.setDuration(Toast.LENGTH_LONG);
         toast.setView(layout);
         toast.show();
    }

    @Override
    public void onCreate() {
        super.onCreate();
        timer = new Timer();
        toast = Toast.makeText(this, "", Toast.LENGTH_SHORT);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        clearTimerSchedule();
        initTask();
        timer.scheduleAtFixedRate(timerTask, 4 * 1000, 4 * 1000);
        return super.onStartCommand(intent, flags, startId);
    }

    private void clearTimerSchedule() {
        if(timerTask != null) {
            timerTask.cancel();
            timer.purge();
        }
    }

    private void initTask() {
        timerTask = new MyTimerTask();
    }

    @Override
    public void onDestroy() {
        clearTimerSchedule();
        super.onDestroy();
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:59:05.107

我以其他有点原始的方式解决了我的问题，但也许它会帮助与我遇到同样问题的人。

我从 Toast 辞职并创建了新的 Activity 看起来像对话框

在清单中：

```
 <activity android:label="@string/app_name" 
            android:name="YourDialog" 
            android:theme="@android:style/Theme.Dialog" 
            android:taskAffinity=""/> 
```

并在服务中：

```
Intent dialog = new Intent(this, YourDialog.class);
    dialog.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(dialog); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:21:07.680

可以根据我们的意愿定制 Toast。开发者网站本身已经提到了它。检查以下链接[http://developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

# ruby-on-rails - 绕过 Devise gem 注册表单来创建新用户？

> ID：13805695
> 
> 赞同：1
> 
> 时间：2012-12-10T17:09:39.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, rubygems

我在rails项目中使用devise gem和recaptch，
任何人都可以给我一个提示：

如何绕过recaptcha创建一个新用户并且不提交设计gem的形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:40:04.567

在 Devise wiki 文档中有一篇关于如何集成 devise 和 recaptcha 的文章：[Devise Wiki: Hot to use Recaptcha with Devise](https://github.com/plataformatec/devise/wiki/How-To%3a-Use-Recaptcha-with-Devise)。

Devise 是一个非常受欢迎的宝石，如果您对它有任何疑问，很可能之前有人问过它，所以它实际上是一个[谷歌搜索](https://www.google.com/search?btnG=1&pws=0&q=Devise+rails+recaptcha)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:47:51.913

`Devise::SessionsController`您必须通过继承并覆盖 action来创建新控制器`register`。

更多详情： [https ://github.com/plataformatec/devise#configuring-controllers](https://github.com/plataformatec/devise#configuring-controllers)

# javascript - 在 JavaScript 中创建下拉菜单/div

> ID：13805696
> 
> 赞同：2
> 
> 时间：2012-12-10T17:09:42.910
> 
> 标签：javascript, jquery, menu

我想在 webapp 中实现类似于 android 的下拉菜单：http: [//cdn4.droidmatters.com/wp-content/uploads/2011/06/android-notifications.jpg](http://cdn4.droidmatters.com/wp-content/uploads/2011/06/android-notifications.jpg)

基本上我想将菜单、工具栏、组件等从顶部、左侧、右侧、底部拉入屏幕。现在我已经使用 jquery-ui resizable 函数找到了一些基本的东西

```
$("#menuContainer").resizable(); 
```

[http://jsfiddle.net/JXeWA/46/](http://jsfiddle.net/JXeWA/46/)

不同之处在于，显示的 div 是相当静态的。所以我没有随着元素向下移动，它已经完全存在，因此“仅”暴露。如果您将其与类似 android 下拉状态栏的内容进行比较：在这里您会得到这样的印象，即该元素确实是用手指向下拉的。当您将元素拉入显示器时，它会连续显示 - 希望有意义，很难解释。

谢谢你的任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:09:42.787

这就是我将如何去做...

CSS：

```
#menuContainer{
     position:relative;
     background-color:#A3155C;
     overflow:hidden;
     height:10px;
     padding:5px 5px 12px 5px;
}
#ddMenu{
    position:absolute;
    top:25%;
    width:100%;
    display:none;
}
#grippie{
     height:16px;
     display:inline-block;
     position:absolute;
     left:50%;
     bottom:0px;
     color:#FFF;
     -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
    width:40px;
    font-size:12px;
} 
```

JAVASCRIPT：

```
var h = parseInt($("#menuContainer").css('height')); //height mentioned in css - feel free to change

$("#menuContainer").resizable({ 
        handles: {
            "s":"#grippie"   
        },
        maxHeight:50, 
        minHeight:0,
        resize: function(){
            if($(this).height()<=h){
                 $("#ddMenu").hide();
            }else{
                $("#ddMenu").show();
            }

        }
}); 
```

演示：http: [//jsfiddle.net/JXeWA/112/](http://jsfiddle.net/JXeWA/112/)

希望这是您正在寻找的。需要帮助请叫我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:30:35.253

如果您的目标是一种拉动，然后是动画，那么使用 jQuery UI 会有点困难。我想到的提示是你拉菜单然后触发'mouseup'或任何事件来释放菜单然后继续动画。不过，它可能是错误的。

# java - 在同一包中查找属性文件时，class.getResourceAsStream 返回 null

> ID：13805697
> 
> 赞同：1
> 
> 时间：2012-12-10T17:09:47.343
> 
> 标签：java, netbeans, properties, path

我有一个使用 class.getResourceAsStream(props.properties) 加载其属性文件的类。属性文件与类本身在同一个包中，但它现在返回 null 而不是对象。我很沮丧，因为这在原始计算机上运行良好，但在另一台计算机上却失败了。我将整个目录结构从旧的复制到新的。我在两台计算机上都使用 Netbeans 7.2.1。我确定它必须是类路径设置或某些东西，但我找不到这两种环境之间的任何差异。这是示例代码：

```
package Cab;
import java.util.*;
import java.lang.reflect.*;
import java.io.*;

public class CabTest{

    public static void main(String[] args)
    {
        Properties  l_Prop = new Properties();
        InputStream l_IS;
        try
        {
           l_IS = CabTest.class.getResourceAsStream("props.properties");
           l_Prop.load(l_IS);
        }
        catch(IOException l_Exc)
        {
            System.out.println(l_Exc);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:11:29.880

这真的适用于一个环境而不是另一个环境吗？它看起来不正确，因为这

```
l_IS = Class.class.getResourceAsStream("props.properties"); 
```

无法解析为与您的特定课程相关的流。尝试：

```
l_IS = CabTest.class.getResourceAsStream("props.properties"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:15:33.683

这表示如果 .class 文件在包“foo.bar.baz.props.properties”中，那么这就是你应该给类加载器的路径：

```
l_IS = this.getClass().getResourceAsStream("foo/bar/baz/props.properties"); 
```

只有当它位于 CLASSPATH 的根目录时，您的方式才有效。

# c# - 用于实现 NTLM 授权的 C# 助手类

> ID：13805704
> 
> 赞同：2
> 
> 时间：2012-12-10T17:10:51.037
> 
> 标签：c#, ntlm, nancy

目前我正在尝试解决我的问题——即以我认为应该如何工作的方式在我的 Intranet 站点上实施 NTLM 授权，即仅在某些页面上询问密码。不只是点击主页——所以网站应该分为两部分：对所有人开放和受限。

我使用 Nancy 框架的问题，它本身没有实现 NTLM。但这不会阻止真正的牛仔程序员。所以我正在尝试开发自定义请求/响应序列来实现这个目标。

现在我已经发现了[这个 Q&A](https://stackoverflow.com/questions/13423239/nancyfx-and-windows-authentication)，但是那里的解决方案粘在 IIS 上......

我发现有很多关于 NTLM 的复杂信息的[站点，我想知道是否有任何 C# 类来简化这个过程？](http://davenport.sourceforge.net/ntlm.html)

即，帮助创建不同类型的响应。

目前我的代码如下所示：

```
Get["/Profile/"] = parameters =>
{
    var request = this.Request;

    if (this.Request.Headers.Keys.Any(x => x == "Authorization"))
    {
        var items = Response.Context.Items;

        var expert = new Expert(WindowsIdentity.GetCurrent());
        var model = expert.Ensure();

        return View["Profile.liquid", model];
    }
    else
    {
        var response = new Response();
        response.StatusCode = HttpStatusCode.Unauthorized;
        response.Headers.Add("WWW-Authenticate", "NTLM");
        return response;
    }
}; 
```

但它只实现了 NTLM 授权的第一阶段。是否可以通过涉及即用型助手来避免大量手动代码来实现其他步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:02:18.787

如果您真的想自己编写所有这些，我认为您将面临一项艰巨的任务。此 URL 可能会对您有所帮助，它通常包含有关 NTLM 身份验证的信息，但也显示了使用 NTLM 进行 HTTP 身份验证的对话示例：

[http://davenport.sourceforge.net/ntlm.html#ntlmHttpAuthentication](http://davenport.sourceforge.net/ntlm.html#ntlmHttpAuthentication)

另一种可能的探索途径是查看 Mono 代码库中是否有任何可以使用的东西——这就是我们使用内置 JSON 序列化程序所做的。

另一种选择是使用表单或基本身份验证，但根据 AD/LDAP 对用户名/密码进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:52:43.137

我已经开发，合并了几个来源，整个协议的工作实现：“NTLM”->“带有客户端数据的 NTLM”->“NTLM 挑战”->“来自客户端的 NTLM 挑战”，一切正常，不需要外部库。唯一的小问题是所有 C++（讨厌在 C# :P 中玩缓冲区），它是一个 140kb C++ 源代码。一切都可以在这里找到：[https ://kendar.org/?p=/dotnet/kendarntlmlib](https://kendar.org/?p=/dotnet/kendarntlmlib)

--这里开始坏消息...--

据我在 IIS 上的理解，这种东西只能作为 ISAPI 过滤器工作。作为 NTLM 一个基于连接的协议，我无法在 MVC 控制器、aspx 页面或 ashx 处理程序中的同一个 http 请求中执行请求-响应-请求。并且 IIS 没有公开任何可用于“覆盖”http 的标准无连接方法但在 ISAPI 部分中的任何套接字句柄......（毕竟是 HTTP，但它正在削减我的翅膀：P）

我希望像在 Bonobo github 克隆上看到的基本身份验证属性一样使用它……但没有运气……

--这里结束坏消息--

另外，我在将本机 DLL 加载到 C#-ANyCPU 编译项目中时遇到了一些问题，但这很容易：P（[http://blogs.msdn.com/b/jorman/archive/2007/08/31/loading-c- assembly-in-asp-net.aspx](http://blogs.msdn.com/b/jorman/archive/2007/08/31/loading-c-assemblies-in-asp-net.aspx)仅供参考）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T10:38:17.677

我需要一个使用[https://github.com/toolchain/Nancy.Authentication.Ntlm](https://github.com/toolchain/Nancy.Authentication.Ntlm)的示例，其中用户对某些 Nancy 视图有限制。谢谢！

# objective-c - 如何在不中断动画的情况下更改动画的持续时间？

> ID：13805710
> 
> 赞同：1
> 
> 时间：2012-12-10T17:11:18.687
> 
> 标签：objective-c, ios, cocoa-touch

我正在使用以下代码示例来旋转（连续旋转）`UIImageView`：

```
CAKeyframeAnimation *theAnimation = [CAKeyframeAnimation animation];
theAnimation.values = [NSArray arrayWithObjects:
    [NSValue valueWithCATransform3D:CATransform3DMakeRotation(0, 0,0,1)],
    [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_PI, 0,0,1)],
    [NSValue valueWithCATransform3D:CATransform3DMakeRotation(2*M_PI, 0,0,1)],
    nil];
theAnimation.cumulative = YES;
theAnimation.duration = duration;
theAnimation.repeatCount = HUGE_VALF;
theAnimation.removedOnCompletion = YES;
[self.layer addAnimation:theAnimation forKey:@"transform"]; 
```

现在我想在显示动画时更改旋转速度（意味着不同的持续时间）。最简单的方法是停止动画并创建一个新动画。这样做的问题是，新动画将从 0 度开始，当旋转视图的速度发生变化时，这会导致难看的跳跃。

**如何在不中断动画的情况下更改动画的持续时间？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:17:33.257

保存对先前旋转的引用，然后在创建新动画时将其用作起始值。

```
CALayer* layer = [self.layer presentationLayer]; 
float currentAngle = [[layer valueForKeyPath:@"transform.rotation.z"] floatValue]; 
```

有关为什么应该调用 [[self.layer presentationLayer] valueForKeyPath..... 而不是 [self.layer valueForKeyPath....... 的更深入解释，请参阅 Core Animation Programming Guide . 由于旋转（变换）已经动画化，您需要检查呈现层的值。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/CoreAnimationArchitecture.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/CoreAnimationArchitecture.html)

# sql - 参数化表名

> ID：13805714
> 
> 赞同：1
> 
> 时间：2012-12-10T17:11:34.097
> 
> 标签：sql, postgresql, plpgsql, dynamic-sql, postgresql-8.3

我正在研究 Postgres 8.3 数据库，并试图使用 PL/pgSQL 创建函数，该函数根据输入到表的日期生成表名：

我必须创建一系列按日期索引的表，例如：

```
drop table one_day_11_13 cascade;
create table one_day_11_13 as
select * from master_table where
timestamp < '2012-11-14' and timestamp >= '2012-11-13';  

drop table one_day_11_14 cascade;
create table one_day_11_14 as
select * from master_table where
timestamp < '2012-11-15' and timestamp >= '2012-11-14'; 
```

我在想这样做的方法是创建一个 PL/pgSQL 函数，该函数将作为参数`('11_13', '2012-11-14', '2012-11-13')`，例如创建上面的第一个表。我在编写适当的 EXECUTE 语句时遇到问题。

做这种事情的最好方法是 PL/pgSQL 矫枉过正吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T19:39:42.940

首先，考虑升级到更新的版本。[8.3 即将推出。](http://www.postgresql.org/support/versioning/)

对于 8.3，它可以像这样工作：

```
CREATE OR REPLACE FUNCTION f_recreate_tbl(date, date)
 RETURNS void AS
$func$
DECLARE
   -- derive tablename from first date
   _tbl text := 'one_day_' || to_char($1, 'MM_YY'); 
BEGIN

 -- Use IF EXISTS to avoid an exception when table does not exist.
EXECUTE
'DROP TABLE IF EXISTS ' || _tbl || ' CASCADE';

EXECUTE 
'CREATE TABLE ' || _tbl || ' AS
SELECT *
FROM   master_table
WHERE  timestamp >= ''' || $1::text || '''::date
AND    timestamp <  ''' || $2::text || '''::date';

END
$func$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT f_recreate_tbl('2012-11-13'::date, '2012-11-14'::date); 
```

*   每当您想参数化标识符时，您都不能使用纯 SQL。[`EXECUTE`](http://www.postgresql.org/docs/8.3/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)在 PL/pgSQL 函数或[`DO`语句](http://www.postgresql.org/docs/current/interactive/sql-do.html)中使用动态 SQL （版本 9.0+）。

*   这个版本足够安全。使用更灵活的输入，您必须使用[`quote_ident()`并`quote_literal()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)防止可能的 SQL 注入来清理标识符和值。

*   在现代版本（自 8.4 起）中，您将使用该[`USING`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)子句跳过将参数转换为文本。

*   不要`timestamp`用作列名。它是数据类型的名称。

*   使用`DROP TABLE` **`IF EXISTS`**. [已经在 8.3 中可用。](http://www.postgresql.org/docs/8.3/interactive/sql-droptable.html)

*   我从日期派生表名并跳过第三个参数。似乎是一种简化。

# git - 如何将现有存储库克隆到 gitlab 中的组

> ID：13805718
> 
> 赞同：3
> 
> 时间：2012-12-10T17:11:41.993
> 
> 标签：git, import, export, gitlab

我有一个全新的 gitlab 设置，一切都运行良好。而且我有几个想要导入到 gitlab 的现有存储库（每个都有数千个提交和数十个分支）。我有一个裸仓库的文件夹结构，比如

> -operators
> --xxxxx.git
> --yyyyy.git
> --zzzzz.git
> 
> --offices
> --xxxxx1.git
> --yyyyy2.git
> --zzzzz3.git

等等

我想要做的是将第一级文件夹创建为组，将第二级文件夹创建为项目。是否可以在 gitlab 导入中执行此操作？

我已经检查了这个[https://github.com/gitlabhq/gitlabhq/wiki/Export-existing-repositories-to-gitlab](https://github.com/gitlabhq/gitlabhq/wiki/Export-existing-repositories-to-gitlab)但它不像我预期的那样工作。它只是创建第一级 git repos。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:29:48.920

在服务器上，[GitLab](http://gitlabhq.com/)自行管理存储库的布局。

因此，“[存储库组](http://sitaramc.github.com/gitolite/groups.html)”的概念（您可以在 gitolite 中找到，gitlab 使用的[授权层](http://sitaramc.github.com/gitolite/auth.html)）与用于存储相同存储库的实际目录组织无关。

当 gitlab 创建一个 repo 时，它会将创建委托给 gitolite，gitolite 会将其存储在（默认情况下）在`~/repositories`.
（这就是页面“[将现有存储库导出到 gitlab](https://github.com/gitlabhq/gitlabhq/wiki/Export-existing-repositories-to-gitlab) ”提到的原因`/home/git/repositories`）

# php - Mysql查询总是返回0个结果

> ID：13805720
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:11:50.147
> 
> 标签：php, mysql

我试图做的是检查表中是否存在值。如果不存在，则应显示失败消息

```
 $mysqli = new mysqli("localhost","root","", "myusers");
    print($string);
    if ($mysqli->connect_errno) {
        printf("Failed1");
        exit();
    }

    else
    {
    if ($result=$mysqli->query("SELECT 1 FROM `users` WHERE `k1`='$string' AND 'k2'='$string2'"))
    {

    if($result->num_rows == 0)
    {
    printf("Failed2");
    } 
```

尽管值存在于表中，但此查询始终返回 Failed2。问题是什么，该表有三个值 k0、k1 和 k2，但我只使用 k1 和 k2 进行 SELECT 查询。请帮助

编辑：

我已经通过删除 ' 更改了您建议的代码，但现在查询将不会执行，并将导致 Failed3

```
<?php  

$string1=$_POST['value1'];
$string2=$_POST['value2'];
$mysqli = new mysqli("localhost","root","", "myusers");
print($string);
if ($mysqli->connect_errno) {
    printf("Failed1");
    exit();
}

else
{
    if ($result=$mysqli->query("SELECT 1 FROM `users` WHERE k1='$string1' AND k2='$string2'"))
    {    
        if($result->num_rows == 0)
        {
            printf("Failed2");
        }
        else
        {
            //---------
        }
    }
    else
    {
         printf("Failed3");
    } 
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:14:22.467

### 在这里打错字：

您使用`'`s 而不是反引号！

```
`k1`='$string' AND 'k2'='$string2'"
 ------------------^--^---------------- You have used single quotes! 
```

将其替换为：

```
SELECT 1 FROM `users` WHERE `k1`='$string' AND `k2`='$string2' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:13:42.930

从表和列名中删除反引号和引号，即

```
SELECT 1 FROM users WHERE  k1 ='$string' AND k2='$string2' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T17:18:44.273

除非你有一个名为 1 的列。你不想`Select 1 from users`

这将只返回一个结果，如果那是你要找的

```
SELECT * FROM `users` WHERE `k1`='$string' AND `k2`='$string2' LIMIT 1 
```

# html - 来自 textarea 的 Jquery Mobile 自动换行文本

> ID：13805727
> 
> 赞同：0
> 
> 时间：2012-12-10T17:12:27.573
> 
> 标签：html, css, cordova, jquery-mobile

手机插入 HTML 文本区域后用什么包装文本？

我测试了几件事，但我无法让我的自动换行工作。

如果我输入一个像

```
 b
 c
 a 
```

它将作为一行“bc a”出来。

我有一个 HTML P 标签，但来自 Textarea 的文本不会得到换行符。

我试过：

```
replace("\n", "<br />");
CSS worp wrap rules 
```

有任何想法吗 ？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:28:04.780

我自己修好了:) white-space: pre-wrap; 我不知何故错过了这个 CSS 规则:)

# android - 带有 gridview 的 Viewpager 片段

> ID：13805733
> 
> 赞同：0
> 
> 时间：2012-12-10T17:12:52.930
> 
> 标签：android

使用gridview创建片段的正确方法是什么？我可以这样做吗？

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview1"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:background="#FF0000"

    android:numColumns="2"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="0dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/> 
```

以及如何在运行时将适配器添加到 gridview 以向其中添加项目？

```
private void initialisePaging() {

    List<Fragment> fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, fragment1.class.getName()));
    fragments.add(Fragment.instantiate(this, fragment2.class.getName()));
    fragments.add(Fragment.instantiate(this, fragment3.class.getName()));
    this.mPagerAdapter  = new MyPagerAdapter(super.getSupportFragmentManager(), fragments);
    //this.mPagerAdapter.setListener(this);
    Log.e("init", "message");
    pager = (ViewPager)super.findViewById(R.id.viewpager_menu);
    pager.setAdapter(this.mPagerAdapter);

    GridView gridView = (GridView)findViewById(R.layout.menu1_fragment);
} 
```

当我这样做时，gridview 为空，我无法将适配器附加到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:24:04.267

`instantiateItem`您应该在您的方法中查找/配置单个页面上的视图`PagerAdapter`，而不是在配置寻呼机本身时。每个页面都是在需要时懒惰地创建的，并且`instantiateItem`是每个页面都调用它来设置它。在您尝试在此处找到您的`GridView`实例时，它还不存在，因为寻呼机尚未创建它，并且您尚未将其本地化到要设置的页面。

# java - 在mysql中的二进制字段中插入密码并在登录系统时检查

> ID：13805736
> 
> 赞同：1
> 
> 时间：2012-12-10T17:13:08.590
> 
> 标签：java, mysql, netbeans, mysql-workbench

我正在开发一个软件，我有一个框架来保存用户。我有密码字段可以从保存新用户框架中获取密码。我选择二进制数据类型来保存密码。保存记录后，我从工作台查看它，密码字段有“BLOB”。我试过登录框架。但它不起作用。我没有使用任何加密方法。

我的查询如下和代码。我也想知道保存密码的最佳方法是什么。

```
 //get password from  password field in save user frame
    String password = txtUserPassword.getPassword().toString();

    /////////////////////////////////QUERY TO SAVE NEW USER////////////////////////////////////////////////////
    //query to save the new user
     "INSERT INTO user(username,fname,lname,password,contact,type,isDeleted) VALUES( '"+userName+"','"+fname+"','"+lname+"','"+password+"','"+contact+"','"+type+"','false' )"

    ///////////////////LOG IN FORM CODE/////////////////////////////////////////////////////////////////////

    //in Login form ,get the user name and password and check with database value
     String username = txtUsername.getText();
            String password = new String(txtPassword.getPassword());

    //take the values to result set
            ResultSet rst = DB_Access.getData("SELECT username,password FROM user   WHERE BINARY  username='"+username+"' AND BINARY   password =  '"+password+"'  ");

            // check user existing or not in the if condition

             if(rst.next())

            {
                 Guesrname = txtUsername.getText(); // this user name to pass the user name to next form
                this.dispose();
                Seller sellFrame = new Seller(Guesrname ); // next appearing form
                sellFrame.setVisible(true);
            }

            else 
            {
                JOptionPane.showMessageDialog(this, "Invalid user name or password");

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:33:24.223

我看到一个问题。此行不正确：

```
String password = txtUserPassword.getPassword().toString(); // returns something like"[C@12345" 
```

稍后您使用 String 构造函数而不是正确地做到这一点`toString`：

```
String password = new String(txtPassword.getPassword()); 
```

JPassword.getPassword() 返回一个`char []`非字符串。奇怪的是，char 数组的 toString 方法不返回包含字符数组文本的字符串。

修改您输入密码的代码，使其与您使用密码登录的代码一样工作。这应该让你更接近。

# database - 改变模式生成器中的列长度？

> ID：13805737
> 
> 赞同：19
> 
> 时间：2012-12-10T17:13:23.327
> 
> 标签：database, schema, builder, laravel, alter

我有两个字段需要增加字符限制。我通读了文档，令我惊讶的是，我没有找到它的选择。有可能吗？如果没有，我应该如何解决这个问题？

我可以删除该列并使用正确的属性重新创建它，但我不想丢失数据库中的任何数据。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-03T19:30:43.277

**对于 Laravel 4**

```
DB::update('ALTER TABLE `my_table` MODIFY `my_column` VARCHAR(<new length>)'); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-10T17:30:32.593

使用[原始查询](http://laravel.com/docs/database/raw)：

```
/**
 * Make changes to the database.
 *
 * @return void
 */
public function up()
{
  DB::query('ALTER TABLE mytable MODIFY mycolumn VARCHAR(new-length)');
}

/**
 * Revert the changes to the database.
 *
 * @return void
 */
public function down()
{
  DB::query('ALTER TABL mytable MODIFY mycolumn VARCHAR(old-length)');
} 
```

替换`mytable`、和。`mycolumn`_`new-length``old-length`

对于 Laravel 5+ 替换`DB::query`为`DB::statement`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-06-08T10:49:27.873

**对于 Laravel 5：**

```
Schema::table('users', function($table)
{
    $table->string('name', 50)->change();
}); 
```

检查[文档](http://laravel.com/docs/5.0/schema#changing-columns)以获取更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T20:46:24.137

如果名称是系统的关键字，则使用 `` 作为列名。否则，您将收到“语法错误或访问冲突”。

```
DB::query("alter table MYTABLE modify `MYCOLUMN` varchar(new-length)"); 
```

# java - 需要一个应用服务器 - Java

> ID：13805738
> 
> 赞同：0
> 
> 时间：2012-12-10T17:13:25.707
> 
> 标签：java, jakarta-ee, architecture, jboss, glassfish

我来自客户端编程背景（主要是 C++）。但是，我现在偶尔需要参与一些 Java 中的小型服务器端项目，因此需要有经验的服务器端人员的一些建议。我不太了解应用程序服务器。

是否有任何经验法则或考虑因素来决定程序何时需要应用程序服务器（如 GlassFish 或 JBoss）？

我有 2 台用 Java 编写的服务器都在专用机器上运行。一台服务器在 Tomcat 上运行，没有任何 App Server。第二台服务器在应用服务器（Glassfish）上运行。

我需要编写一个位于中间的相当简单的程序。这就是程序要做的事情

*   听一个套接字。当连接来自第一台服务器时，它会创建一个线程来接受连接并继续侦听。

*   线程从第一台服务器获取少量数据（比如 100-200 字节），对数据进行非常小的格式化并通过 web 服务调用将其传递给第二台服务器。它获取 web 服务调用的返回值，并基于它进行一些处理 - 可能是大约 10-20 行代码 - 这不是一些主要处理 - 只是在不同的（第 3 个）服务器上调用一些 web 服务。在此之后，它将一些数据返回给第一台服务器——同样不多——可能是 50 字节。

*   我的程序不是网络服务。它只是从第一台服务器以特定格式获取消息，并根据从第一台服务器接收到的数据对第二台服务器进行网络服务调用。在某些情况下，您可以这样想——它充当第一台服务器的代理，向第二台服务器发出 web 服务调用。

所有主要工作都由运行在 Tomcat 服务器上的应用程序运行的第一台服务器和运行在 GlassFish 上的 Web 服务完成。这两个都是经过良好测试的程序。我想写的中间程序很简单，半天就能搞定。但是，我担心的是它是否能够承受负载。

有哪些规则/注意事项可以确定我是否可以将这个 Java 程序作为常规 Windows 服务运行，或者我是否需要 Glassfish 或任何其他应用程序服务器之类的东西。

我应该考虑每分钟/小时的连接数吗？我将为每个连接分叉一个线程，但线程本身的寿命不会很长。我应该考虑应用服务器的连接数阈值是多少？还有其他考虑吗？如果可能的话，我非常希望避免使用应用程序服务器。

是否在 App Server 下运行它只是一个问题——我这里还有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:51:11.003

应用程序服务器并不神奇，因为它们不会创造更好的性能。实际上，对于您所概述的简单应用程序，应用程序服务器可能会产生相反的效果，因为大多数应用程序服务器都会引入所有额外开销。

应用服务器提供基础设施组件、​​企业级开发的实用模式和标准规范的实现。它们主要用于组织更大规模的开发工作，并针对大量相对较短的连接进行规模化设置。也就是说，如果您已经熟悉轻量级服务器（如 Tomcat 或 Jetty）提供的基础架构，则可以使用它们。特别是，它们会为您提供入站 HTTP 连接处理。

我认为根据您的问题描述，您最好使用[Apache HttpComponents](http://hc.apache.org/)等库编写独立的 java 服务来处理 HTTP 和 WebService 客户端功能。目前尚不清楚您需要多少额外的工作来处理入站连接。如果是简单的套接字，那么自己编程很容易。

您对需要同时支持多少个连接的描述含糊不清（而且都是相对的）。如果您需要每个连接一个线程并希望支持数百个连接，那么我建议您使用线程连接池来实现连接处理，确保在用尽服务器功能之前阻止新连接。如果走这条路，请查看 Java 5+ [ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)和相关类。

如果您的需求很简单，我怀疑应用程序服务器会带来很多好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:00:57.150

评估任何工具时的基本规则也应该适用于此：它会让我的工作更轻松吗？

所以问题是：应用程序服务器为我的用例提供的功能是否完整，限制不会限制我。

根据您的用户案例的描述：

应用服务器将`JavaEE`提供 Servlet 抽象来轻松管理`HTTP`请求（理论上其他类型的请求可以由您实现，您需要自己通过在应用服务器的实现中添加新东西来实现）。它还将提供通过`Jax-WS`或`Jax-RS`抽象来创建 Web 服务端点。

这些抽象的代价是应用服务器将管理线程。大多数实现将使用线程池进行`HTTP`连接，因此每个请求都没有线程创建成本。

此外，full`JavaEE`将为您提供简单的声明式事务和安全性 ( `EJB`)、持久消息传递`JMS`等。

由您来平衡提供的抽象的附加价值和它们的成本（更少的控制，在大多数情况下，更少的控制将导致更好的行为，因为 Java 标准已经制定以匹配大多数用例，然后比普通程序员执行得更好代码...）。

因此，在您的情况下，您应该查看您需要的功能，使用最简单的方法（快速）来满足您的功能并制作 POC 来进行一些负载测试。

顺便说一句，Tomcat**是**一个应用服务器，它只是没有实现所有的 JavaEE 部分，它只实现了基本的 web 相关功能（servlet，但默认情况下没有 WS 或 restfull ws，但这可以通过 libs 轻松添加）。与 Tomcat 相比，新的 Jboss 和 Glassfich 提供了更多的功能（在部署时容易加载），具有相似的大小和性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T18:14:28.080

我认为性能问题将更多地受到您的网络拓扑和机器硬件的影响，而不是您选择的应用程序服务器。一些应用服务器，如 JBoss，提供用于创建和管理集群的管理工具，但所有应用服务器都可以使用正确的工具进行类似的设置。也就是说，我认为像[jetty](http://jetty.codehaus.org/jetty/)或[grizzly](http://grizzly.java.net/)这样的可嵌入 servlet 容器会很好地为您服务。这将为您提供应用程序服务器所带来的配置和可移植性优势，而无需额外负担您不太可能需要的 EE 合规性，并且可以轻松设置您的开发配置。

# c++ - 如何处理异常以便我的程序仍然运行？

> ID：13805741
> 
> 赞同：1
> 
> 时间：2012-12-10T17:13:31.037
> 
> 标签：c++, exception, c++11, exception-handling

我正在编写一个通用链表类，并且在我的反向迭代器类中重载了 * 运算符。这是我所拥有的：

```
try
{
    return this->item->data;
}
catch (...)
{
    cout << "OUT OF RANGEEEEE" << endl;
} 
```

`item`，这是我的链表类的节点，可能是 nullptr 因为我的指针指向 rend() 位置。在那种情况下，我该如何处理该异常以使我的程序仍然运行？我尝试使用此代码运行，但我的程序崩溃了。

另外，只做这样的事情可以吗？

```
if (item == nullptr)
{
    throw std::out_of_range("Error message here!");
}
else
{
    return this->item->data;
} 
```

编辑：所以我认为我的第二个实现更好？但是，当我使用第二个实现运行我的程序时，我无法继续我的程序。我怎样才能让它更安全，这样我的程序才能继续运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:26:32.107

一旦您进入 catch 块¹ ，您的程序仍在运行。为了继续，您必须返回`this->item->data`. 您返回的内容取决于调用您的函数的意义。

恕我直言，这是一个糟糕的例外用例。命中链表的末尾并不例外，这是正常的和意料之中的。`return this->item->data`大概你想抛出一个异常，所以当你到达列表末尾时你不必特殊情况。但是为了继续，你必须返回*一些东西*，然后你的调用者必须检查它。您只是将这项工作转移到另一个地方并在此过程中**支付异常的成本。**更好的解决方案是在最有意义的地方检查 null 并完成。没有例外，没有额外费用。

* * *

1.  `catch (...)`对于这种情况来说太宽泛了。这抓住了一切。您真的应该尝试将其限制为`std::out_of_range`或其祖先之一。否则，您会将未预料到的东西集中到您的 catch 块中，并且您可能不会准备好处理它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:24:06.740

取消引用空指针是未定义的行为。它从未被指定（按标准）抛出异常。这就是您的第一个示例崩溃的原因。

你的第二个例子很好，如果这是你想要的行为。标准库的行为是保留无效的取消引用（未定义）。但是，如果您想实施更安全的替代方案，您可以自由地这样做。

> 我怎样才能让它更安全，这样我的程序才能继续运行？

您可以在任何级别使用 try-catch 块。例如：

```
try {
    MyListType<int> my_list;
    // do a bunch of stuff here involving my_list::iterators
    // If one is improperly dereferenced, an `std::out_of_range`
    // exception will be thrown, and caught below
} catch (std::out_of_range & e) {
    // your error handling
} 
```

我建议您创建自己的特定类型的异常，可能源自`std::out_of_range`. 这样，您就不会从其他库中捕获您可能不准备处理的异常。

# java - 将多个图像从 java 服务器发送到 android 客户端

> ID：13805743
> 
> 赞同：0
> 
> 时间：2012-12-10T17:13:35.843
> 
> 标签：java, android, sockets

我需要阻止 Java 中的服务器程序，直到它收到来自客户端 android（froyo 2.2）的连接。当您解锁 Java 服务器时，向他发送图片（多张），android 客户端将接收并存储在 SD 卡上。

当客户端尝试获取位图时，问题就出现了，该位图被锁定并且程序没有响应。

在这一点上卡在 Android 代码上。位图位图 = BitmapFactory.decodeStream(in);

服务器代码 (Java)

```
server= new ServerSocket(port);

while(true){
try{
    System.out.println("Wait for connect...");
    conex = server.accept();

    // The number of images to be sent.
    dataOutputStream = new DataOutputStream(conex.getOutputStream());
    dataOutputStream.writeInt(Path().list().length);
    dataOutputStream.flush();

    do{
        // Send the images
        if( j <= Path().list().length){
        image = (BufferedImage) ImageIO.read(new File(Path(),"img"+j+".jpg"));

        if (image != null) {
            try{
               System.out.println("Sending img "+"img"+j+".jpg...");
               OutputStream out = conex.getOutputStream();
               ImageIO.write(image, "JPEG", out);
               System.out.println("Image"+"img"+j+".jpg send correctly");
              out.flush();
              j++;
            } catch (IOException excepcionES ) {
              System.out.println( "Can't write object" );
            }
        } else {
            System.out.println("Can't read image...");
        }
       }

    // Wait until client store the image and cofirm that.
    System.out.println("Wait client confirmation...");
    dataInputStream = new DataInputStream(conex.getInputStream());
    modo = dataInputStream.readUTF();
    System.out.println("Receive from client: "+modo);

    }while(modo.equals("OK"));

} catch (EOFException exceptionES) {
    exceptionES.printStackTrace();
} finally {
    dataOutputStream.close();
    conex.close();
}
} 
```

客户端代码（Android 2.2）

```
try {
client = new Socket(ip,port);
} catch (UnknownHostException e1) {
e1.printStackTrace();
} catch (IOException e1) {
e1.printStackTrace();
}

// We get the number of images that will be received.

try {
dataInputStream = new DataInputStream(client.getInputStream());
images = dataInputStream.readInt();
} catch (Exception e) {
e.printStackTrace();
}

do{
try {
    InputStream in = client.getInputStream();

            // Get stuck at this point!
    Bitmap bitmap = BitmapFactory.decodeStream(in);

    if(bitmap==null)
        Log.e("Client", "bitmap is null!");

    File sd = Environment.getExternalStorageDirectory();
    dir = new File(sd + "/Images/");

    File f = new File(dir, "image"+ dir.list().length + ".jpg");

    f.createNewFile();
    OutputStream os = new FileOutputStream(f);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, os);
    os.close();

    numberOfImgRec++;
} catch (OptionalDataException e1) {
    e1.printStackTrace();
} catch (IOException e1) {
    e1.printStackTrace();
}

try {
    dataOutputStream= new DataOutputStream(client.getOutputStream());

    if(numberOfImgRec != images)
        dataOutputStream.writeUTF("OK");
    else
        dataOutputStream.writeUTF("END");
} catch (IOException e) {
    e.printStackTrace();

}while(numberOfImgRec != images); 
```

# javascript - 在 WinJS HTML5/JS Windows Store 应用程序中获取平移内容的滚动偏移量？

> ID：13805745
> 
> 赞同：0
> 
> 时间：2012-12-10T17:13:43.360
> 
> 标签：javascript, css, windows-store-apps, winjs

我已经根据 WinJS [HTML 滚动、平移和缩放示例](http://code.msdn.microsoft.com/windowsapps/Scrolling-panning-and-47d70d4c)设置了一些平移内容。当我的滚动内容的滚动位置发生变化时，我想要一个事件监听器。

但是，由于滚动功能是使用 CSS 属性添加的，而不是指定 a `data-win-control`，因此很难确定是否存在我可以监视其属性以在滚动位置更改时获取更新的对象。[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh465310.aspx)的文档似乎暗示没有这样的对象暴露给 JS：

> 滚动控件为用户平移或滚动视图提供帮助。它仅在设计时通过级联样式表 (CSS) 使用 JavaScript 开发人员向 Windows 应用商店应用程序公开

我一直在尝试侦听`DOMAttrModified` 包含滚动内容（带有`-ms-scroll-snap-type: mandatory`&`overflow-x: auto;`设置）的 div 上的事件，但是当滚动位置发生变化时它似乎不会触发。

当通过 CSS 设置的平移内容的滚动偏移量发生变化时，我可以设置一个事件监听器来通知吗？

我尝试了一些技巧（包括将 JQuery 添加到项目中并使用`.offset()`），但无论我使用什么方法，我都可以看到不受滚动偏移影响的项目的位置（页面的基本状态，就像它一样）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:29:46.673

`<div>`像( 和 ) 这样的常规元素在滚动时会`window`触发一个`scroll`事件，它们的[`scrollTop`](https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop)和[`scrollLeft`](https://developer.mozilla.org/en-US/docs/DOM/element.scrollLeft)属性将指示 x 和 y 轴上的当前滚动位置。[`scrollHeight`](https://developer.mozilla.org/en-US/docs/DOM/element.scrollHeight)和属性也很有用[`scrollWidth`](https://developer.mozilla.org/en-US/docs/DOM/element.scrollWidth)，它为您提供内容的宽度/高度（包括剪辑的部分）。

# php - php中的动态导航，带有没有数据库的子菜单

> ID：13805746
> 
> 赞同：0
> 
> 时间：2012-12-10T17:13:42.883
> 
> 标签：php, drop-down-menu, navigation

使用此处规定的方法/答案：[php 中的动态导航](https://stackoverflow.com/a/4909467/1892007)

我想添加一些页面链接作为子菜单。

我有这个在玩（来自上一个回答的问题）

```
<?php
$pages = array(
    'index.php' => 'Home',
    'about.php' => 'About',
    'contact.php' => 'Contact',
    'faq.php' => 'FAQ',
    'tutorials.php' => 'Tutorials',
) ;

$currentPage = basename($_SERVER['REQUEST_URI']) ;

?>

<div id="menu">
    <ul id="menuList">
        <?php foreach ($pages as $filename => $pageTitle) { 
            if ($filename == $currentPage) { ?>
        <li class="current"><?php echo $pageTitle ; ?></li>
            <?php } else { ?>
        <li><a href="<?php echo $filename ; ?>"><?php echo $pageTitle ; ?></a></li>
            <?php
            } //if 
         } //foreach 
            ?>
    </ul>
</div> 
```

我想做的是能够将子菜单项添加到“关于”菜单项或“常见问题解答”菜单中。

尽管在狩猎和啄食的 php 部分中，我迷路了，直到某些东西起作用。:)

当然，因为它最多只有 10 页的站点，所以我可以简单地在每个页面中都有菜单代码。但那会是一种什么样的学习实验呢？:)

提前感谢您对这位“设计师-想成为编码员”的任何见解

附言。非常感谢[Fanis](https://stackoverflow.com/users/137259/fanis)提供上面的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:55:46.697

**[SPAGUETTI 代码警报]**

你可以试试这个

```
<?php
$pages = array(
    'index.php' => 'Home',
    'about.php' => array('pageTitle' => 'About', 'subpages' => array(
        'about1.php' => 'About subpage #1',
        'about2.php' => 'About subpage #2',
        'about3.php' => 'About subpage #3')),        
    'contact.php' => 'Contact',
    'faq.php' => 'FAQ',
    'tutorials.php' => 'Tutorials',
) ;

$currentPage = basename($_SERVER['REQUEST_URI']) ;

?>

<div id="menu">
    <ul id="menuList">
    <?php foreach ($pages as $filename => $value) {

        if (is_array ($value)) {
            $pageTitle = $value ['pageTitle'];
        } else {
            $pageTitle = $value;
        }

        if ($filename == $currentPage) {
            $attr_current = ' class="current"';
        } else {
            $attr_current = '';
        }
        ?>
        <li<?php echo $attr_current; ?>><a href="<?php echo $filename; ?>"><?php echo $pageTitle ; ?></a>

        <?php if (is_array ($value)) { ?>
            <ul id="submenuList">
            <?php foreach ($value ['subpages'] as $subfilename => $subpageTitle) { ?> 
                <li><a href="<?php echo $subfilename; ?>"><?php echo $subpageTitle ; ?></a></li>
            <?php } ?>
            </ul>
        <?php } ?>

        </li>

    <?php } //foreach ?>
    </ul>
</div> 
```

正如你所看到的，它不是最干净的解决方案，所以如果我要做这样的事情，我会像这样编写上面的代码：

```
<?php
$pages = array(
    'index.php' => 'Home',
    'about.php' => array('pageTitle' => 'About', 'subpages' => array(
        'about1.php' => 'About subpage #1',
        'about2.php' => 'About subpage #2',
        'about3.php' => 'About subpage #3')),        
    'contact.php' => 'Contact',
    'faq.php' => 'FAQ',
    'tutorials.php' => 'Tutorials',
) ;

$currentPage = basename($_SERVER['REQUEST_URI']) ;

?>

<div id="menu">
    <ul id="menuList">
    <?php foreach ($pages as $filename => $value):

        $pageTitle = is_array ($value) ? $value ['pageTitle'] : $value;   
        $attr_current = $filename == $currentPage ? ' class="current"' : '';
        ?>
        <li<?=$attr_current?>><a href="<?=$filename?>"><?=$pageTitle?></a>

        <?php if (is_array ($value)): ?>
            <ul id="submenuList">
            <?php foreach ($value ['subpages'] as $subfilename => $subpageTitle): ?> 
                <li><a href="<?=$subfilename?>"><?=$subpageTitle?></a></li>
            <?php endforeach; ?>
            </ul>
        <?php endif; ?>

        </li>

    <?php endforeach; ?>
    </ul>
</div> 
```

也不是很整洁但是..

如果您想使用后者，请记住：

*   它使用[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)
*   [它使用您应该在此处](https://softwareengineering.stackexchange.com/a/151694)`<?=`阅读的短标签来查看您是否可以使用它
*   [在此处](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)阅读您必须使用的 CSS`submenuList`

# php - 正则表达式替换撇号 (') - 编译失败：在偏移量 50 处丢失

> ID：13805747
> 
> 赞同：0
> 
> 时间：2012-12-10T17:13:48.383
> 
> 标签：php, regex

所以我是正则表达式的新手，我正在尝试编写一个允许我将撇号 ( `'`)替换为`\'`. [当我在http://myregextester.com](http://myregextester.com)上测试它时，我想出的正则表达式适用于我的所有测试用例，但是当我在我的代码中实现它时完全出错。

无论如何，这就是我迄今为止所拥有的：

```
preg_replace('/((?<!\\)\'+(?=\d\ds\b))|(\b(?<=\w)(?<!\\)\'+(?=\w+\b))/','\'',$text); 
```

它抛出这个错误：

> 遇到 PHP 错误
> 严重性：警告
> 消息：preg_replace() [function.preg-replace]: Compilation failed: missing ) at offset 50

我数了二十次，看看哪里`)`不匹配，而在我看来，没有。这是我的几个计数之一：

```
( ( ?<!\\ )'+ ( ?=\d\ds\b ) ) | ( \b ( ?<=\w ) ( ?<!\\ ) '+ ( ?=\w+\b )  )
1 2       3   4           5 6   7    8       9 10      11   12        13 14 
```

任何想法，或指出新手无法发现的明显错误将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:20:28.947

在字符串内部转义的地方，您还需要转义转义字符；这真的很混乱！

如果你想要一个`\`你需要做的`\\\\`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:22:25.320

`\\)`在**字符串文字**中变成`\)`- 转义的右括号 - 在**正则表达式模式**中，因为即使在由单引号分隔的字符串文字中，双反斜杠序列也被插入到单个反斜杠中。但问题是，`\)`正则表达式模式中的序列用于表示文字`)`符号（否则将被解析为元字符）。

您打算做的最好用`\\\\)`. 这样`\\`，字符串文字中的每个序列都成为`\`模式中的一个。模式解析器将看到：

`\\)`

...一个文字反斜杠符号，后跟`)`元字符。

但这里似乎还有另一个问题：在您的正则表达式中，您正在寻找一些特殊的（一系列）撇号，但再次用单个撇号替换它们。请记住，`\'`在字符串文字中就是 - 单引号！您可能打算在`'\\\''`这里使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:20:28.947

我在这里错过了什么吗？为什么不只是这个？

```
str_replace("'", "\'", $str) 
```

# git - git 无法检测到重命名

> ID：13805750
> 
> 赞同：84
> 
> 时间：2012-12-10T17:14:00.710
> 
> 标签：git

一个分支 ( `refactoringBranch`) 进行了完整的目录重组。文件被乱动，但内容被保留了下来。

我试图合并： `git merge --no-ff -Xrename-threshold=15 -Xpatience -Xignore-space-change refactoringBranch`

git status 显示大约一半的文件重命名识别。但在项目中的 10000 个文件中，有一半未被识别为已移动。

一个例子是：

```
# On branch master
# Changes to be committed:

#   deleted:    404.php
#   new file:   public_html/404.php
    ...
#   deleted:    AnotherFile.php
#   new file:   public_html/AnotherFile.php
    ...
#   renamed:    contracts/css/view.css -> public_html/contracts/css/view.css 
```

建议？

* * *

## 史前史

重构是在 git 之外进行的。我做了以下事情：

1.  创建了`refactoringBranch`起源于`master`.
2.  将更改后的结构`refactoringBranch`放到 .
3.  添加并提交所有内容，然后尝试合并。

这是我的工作流程：

```
git checkout -b refactoringBranch
cp -R other/place/* ./
git add . -A
git commit -a -m "blabla"
git checkout master
git merge --no-ff -Xrename-threshold=15 -Xpatience -Xignore-space-change refactoringBranch 
```

问题可能出现在`git add . -A`步骤上。因为如果那里的重命名检测是正确的，我会假设合并会完美无缺。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2016-05-26T20:09:00.310

OS X 区分大小写，但不敏感。Git ​<em>​区分大小写。如果您更改了文件名并且唯一的更改是大小写更改，请将文件重命名回原来的方式，然后使用`git mv`重命名。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-12-10T20:30:56.743

重命名检测：

我最好的猜测是，由于候选人数量众多，重命名检测失败了。git 源代码在某些地方有点难以理解，但似乎在重命名检测算法的特定搜索步骤中使用了一些硬编码限制（请参阅 参考资料[`diffcore-rename.c`](http://git.kernel.org/?p=git/git.git;a=blob;f=diffcore-rename.c;h=512d0ac5fd2bc0acfb57147a6eb77f61f92b7c7e;hb=HEAD)），以及对最大数量的可配置限制要查看的对（配置键`diff.renameLimit`和`merge.renameLimit`）。即使您已将配置的限制设置得适当高，这也可能导致检测失败。可配置限制本身被限制在 [1, 32767] 范围内。

也许您可以通过首先执行重组步骤来解决此问题：使用 git mv 移动文件而不进行任何内容更改，以匹配新布局，将其提交到新分支上，然后用您的最终版本替换它，它应该只有内容更改，没有重命名。*可能*更可靠地检测到没有内容更改的重命名。这只有在您所做的重组相当简单的情况下才实用，而且我不确定它是否会解决重命名检测失败。

或者，也许您可​​以使用一些简单的文件分组将更改拆分为单独的提交，以便在每个提交中进行重命名检测的候选者更少。

合并：

不幸的是，通过将新分支建立在 master 之上，您向 git 提供了有关合并的错误信息。无论是否正确检测到重命名，当新创建的分支与 master 合并时，它将覆盖 master 中的所有内容，因为从 git 的角度来看，master 中没有尚未包含在新分支中的更改.

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2019-07-12T06:56:00.033

这是让 git 知道您重命名文件的完美方法。

```
git mv old-file-name.ts new-file-name.ts 
```

然后 git 将获取这些更改。

享受。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2014-07-12T14:15:15.987

而不是`git status`, try `git commit --dry-run -a`，它可以更好地检测重命名。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-11-22T15:40:45.563

您可以考虑`git mv`改用：[https ://www.kernel.org/pub/software/scm/git/docs/git-mv.html](https://www.kernel.org/pub/software/scm/git/docs/git-mv.html)

根据我的经验，它要可靠得多。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-10T17:40:06.277

每当我不得不重命名/移动文件而忘记明确告诉 GIT 时，我都会使用

```
git add . -A 
```

自动检测移动的文件

# r - 从数据帧列表中的 lapply 分配给向量

> ID：13805751
> 
> 赞同：1
> 
> 时间：2012-12-10T17:14:02.727
> 
> 标签：r

我有一个包含 27 个数据帧的列表，每个帧的行数不同，但列数相同（22）。我需要将每列的最小值、最大值和中值放入每个帧的向量中，结果应如下所示：

frame1 = (c1min, c1max, c1median, c2min, c2max, c2median ... c22min, c22max, c22median)

frame2 = (c1min, c1max, c1median, c2min, c2max, c2median ... c22min, c22max, c22median)

...

frame27 = (c1min, c1max, c1median, c2min, c2max, c2median ... c22min, c22max, c22median)

我已经生成了每列的最小值：

```
> all_min = lapply(all_list, function(x){apply(x,2,min)}) 
```

其中“all_list”是我的列表，“all_min”是列表中所有列分钟的向量。我不确定如何获取向量的编号列表（如上面的示例），以及如何正确格式化它们。有任何想法吗？

编辑：这是其中一个框架的示例：

```
 lx        ly        lz   ...
1  -0.039256 -0.078644 -0.032388 
2  -0.036041 -0.074536 -0.033906 
3  -0.033898 -0.071544 -0.033906 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:23:13.550

可重现的数据 FTW。

无论如何，这是一个猜测：

```
lapply( all_list, function(dat) {
   sapply( c(min,max,median), function(fn) apply(dat,2,fn) )
}) 
```

虽然没有样本数据很难测试。

这通过将函数作为参数传递给 sapply 来实现。对 R 来说“一切都是对象”的众多方式之一。

`lapply`获取（在本例中为 data.frame）的每个元素，`all_list`并将其作为第一个参数传递给给定的函数。该函数的第一个参数是`dat`，因此每次运行该函数时都会调用 data.frame（例如，对于包含在 中的每个 data.frame `all_list`）。

然后`sapply`像这样工作，`lapply`但如果可以的话，会做一些可爱的安排。所以它需要一个函数向量`c(min,max,median)`并将它们依次分配给函数的第一个参数。该函数的第一个参数是`fn`，因此每个函数在每次运行时都会被调用。凉爽的。

所以现在我们有了，对于一个`all_list`被调用的data.frame`dat`和一个被调用的函数`fn`，一个简单的函数可以完成你最初设定的事情——将汇总函数应用于data.frame的每一列。

最后一步是利用`sapply`它的魔力返回一个矩阵，其输出形式整洁。然后`lapply`将该矩阵作为列表的一个元素包含在内，它最终将返回给您。

# java - 为什么指定的类路径找不到扩展类？

> ID：13805752
> 
> 赞同：0
> 
> 时间：2012-12-10T17:14:05.660
> 
> 标签：java, classpath, javac, cp

我在搞乱类路径等。还有一些我完全不明白的东西......

假设我们在 dir 结构中有两个文件，如下所示：

```
[current dir]
|
org
|
amigo
|
|---A.class
|---B.java 
```

A类：

```
package org.amigo;
public class A {} 
```

B类：

```
package org.amigo;
public class B extends A {} 
```

到目前为止一切顺利......现在，在`current dir`我们调用

```
javac org\amigo\B.java 
```

这编译类就好了。接下来我们试试

```
javac -cp . org\amigo\B.java 
```

这也有效。但是...当我们尝试运行时

```
javac -cp .:org org\amigo\B.java 
```

我们得到一个：

```
cannot find symbol
symbol: class A
public class B extends A {
                       ^
1 error 
```

Sooooo....我的问题是 - 为什么这不起作用？

（当然，我们可以替换`-cp .:org`为`-cp .:[any dir]`并仍然得到相同的结果。）

据我了解（我吗？... -_-）该`-classpath`选项，它只是让我们指定在哪些目录中搜索所需的类。因此，如果 A.class 存在于这些目录之一中，它不应该工作吗？我的意思是 - 只是这个`-cp .`选项有效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:24:13.143

在 Windows 上，路径分隔符是 ';'。因此，您不是说“在 . 和 org 中查找”，而是明确指出 VM 应该查找类的路径是“.:org”，它不存在。但同时禁止VM在当前目录中查找，因此它找不到类。

# javascript - 非输入元素的 JavaScript 事件监听器

> ID：13805753
> 
> 赞同：1
> 
> 时间：2012-12-10T17:14:09.897
> 
> 标签：javascript, jquery, events, javascript-events

> **可能重复：**
> [是否有 jQuery DOM 更改侦听器？](https://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener)
> [如何查看 DOM 对象的属性？](https://stackoverflow.com/questions/5520346/how-do-can-watch-dom-object-properties)

有没有办法将事件绑定到非输入类型的元素？例如，将事件绑定到在 href 属性更改时触发的锚元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:15:26.533

`click`您可以将处理程序绑定到非输入元素（ 、`mousemove`等）上的各种事件。但是，当属性更改时（例如`href`链接上的属性示例），不会引发（一致的跨浏览器）事件。[正如bfavarello](https://stackoverflow.com/users/825789/bfavaretto)指出的那样，某些属性（如`src`）将导致事件（如`load`）作为次要事物。

（关于元素的[“突变”事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)，包括属性更改 [mutations]，现在已经过时了，但它从未得到广泛支持。有一个[更新的提案](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)，但它也没有 [尚未] 广泛支持。）

当然，您可以使用轮询：保存旧值，并定期（通过`setTimeout`或`setInterval`）检查它是否已更改。除非您要检查**很多**元素并且需要几乎不断地检查它们，否则这不一定是性能问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T17:17:01.757

[DOM Mutation Observers](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)可以做到这一点，但它们非常新，在撰写本文时还没有得到很好的支持。

您是否正在编写扩展程序或类似的东西（即，您不控制修改 DOM 的代码）？这是这些事件最常见的用例之一——您无法控制更改 DOM 的代码。我之前已经将它与在 Chrome 中运行良好的[Mutation Summary一起使用。](http://code.google.com/p/mutation-summary/)

如果您确实控制了修改 DOM 的代码 - 即您自己在自己的网站上修改属性 - 您可能希望在修改属性时简单地触发您自己的自定义事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T17:16:15.387

您可以将`DomSubtreeModified`侦听器添加到祖先，或者您可以在 DOM 对象`watch`的`src`属性上使用（如果您正在使用的浏览器支持它）。

```
myImage.watch("src",function(id, oldval, newval){
    document.write("src changed!");
    return newval;    
}); 
```

# java - 在 Hibernate 中使用自定义加载器和条件

> ID：13805754
> 
> 赞同：0
> 
> 时间：2012-12-10T17:14:09.787
> 
> 标签：java, database, hibernate

假设在我现有的生产数据库中，我有一个学生表。大多数学生都是ex。学生，我想将其与当前学生分开。更具体地说，我想为当前注册的学生保留学生表，并将其他学生移动到 Students_history 表。与连接到学生的其他一些表类似。这样做的动机是希望将 (school_name, student_id) 作为主键，有时同一所学校会重新分配 student_id，因此对于某个 10 年前毕业的学生和另一个目前就读的学生，我将拥有相同的 student_id。这个 student_id 是我无法控制的，它来自进入应用程序的数据。第二件事是我桌子上的许多操作会快得多，

我能找到的最佳解决方案包括在 Student 表上定义触发器，删除它们会将学生（以及引用学生条目的其他数据）移动到相应的 Student_history 表。我试图弄清楚的部分是如何让 Hibernate 使用它。我想在网络应用程序中显示两个表（学生和学生历史）中的条目，就像它目前正在工作一样。为了在 Web 界面中显示这些数据，我使用了 GWT，其中数据是通过以下方式获取的：

```
Criteria criteria = session.createCriteria(Students.class); 
```

在 Web 应用程序中对项目进行排序和过滤时，使用标准非常有帮助。我尝试指定自定义查询进行加载，如下所示：

```
@Entity
@Table(name = "Students")
@Loader(namedQuery = "students")
@NamedNativeQuery(name = "students", query = "select * from students union all select * from students_history WHERE Id = ?", resultClass = Students.class) 
```

查询之后是 Student 类的定义。这不起作用 - Hibernate 使用上述条件生成的查询不包括任何提及 students_history。

我正在使用 postgreSQL、Hibernate 4 和 Java 1.6。

## 我的问题是：

1.  我在区分当前和老学生的正确轨道上吗？我的意思是在删除时使用帮助表和存储过程。
2.  Hibernate 条件可以与使用 @Loader 注释定义的自定义加载查询一起使用吗？我预计 Hibernate 将使用我的加载器查询作为标准的基础。如果这是可能的，任何代码片段或链接都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:41:19.537

命名查询是一项功能，可帮助您重用 HQL/SQL 查询。

它们与 Criteria API 没有任何关系，这是一种从数据库中选择的不同方式。因此，Criteria 无法使用您的加载程序查询。

可以这样想：Criteria API 使用您提供的条件从头开始构建 SQL 查询。在您的情况下，它必须首先解释您的加载程序查询，然后围绕它构建一个正确的 SQL。

# java - 如何有效地获得所有对的集合？

> ID：13805759
> 
> 赞同：11
> 
> 时间：2012-12-10T17:14:19.457
> 
> 标签：java, set

给定 a 的对象`Set`，我想遍历它的所有（无序）对。

示例：Set = {1, 2, 3}，对：(1, 2), (1, 3), (2, 3)。

在处理 a`Vector<Integer>`时，可以借助每个元素的索引来实现：

```
for (int i = 0; i < vector.size(); i++)
  for (int j = i + 1; j < vector.size(); j++)
    // Do something with vector.get(i) and vector.get(j) 
```

但是 a 中的元素`Set<Integer>`没有索引。

到目前为止，我发现最好的解决方案是将 a 转换`Set`为 a`Vector`并使用上面的解决方案。

有没有更有效/直接的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T17:21:49.760

```
List<Integer> list = new ArrayList<Integer>(mySet);
for (int i = 0; i < list .size(); i++)
    for (int j = i + 1; j < list .size(); j++)
        // Do something with vector.get(i) and vector.get(j) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:49:48.920

就该算法的复杂性而言 = `n (n -1) / 2`，因此 O(n^2) 是您可以获得的最好的（顺序）。

虽然，如果你的设备真的很大，那么一个只适合 RAM 的设备。您可以通过以类似于使用平铺块的矩阵乘法中所做的块方式计算对来优化算法。通过这种方式，您可以减少缓存未命中的百分比，从而提高整体性能。

除此之外，您可以引入并行化并在线程/进程之间分配工作，因为该算法似乎是令人尴尬的并行。

# php - mysqli - 更新整数

> ID：13805762
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:14:38.353
> 
> 标签：php, mysqli

有没有更简单的方法可以在不“获取/返回”值的情况下将表中的整数值更新 1？

我正在寻找类似的东西`$i ++;`

```
$query = $DBH->prepare("UPDATE table SET col = ?");
$query->bind_param(++);
$query->execute(); 
```

显然上述方法行不通，但这就是我希望实现的目标。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T17:15:40.970

当然：

```
$query = $DBH->prepare("UPDATE table SET col=col+1"); 
```

# ios - 为 iPad 打补丁的 Cloud Carousel 不响应“点击”事件

> ID：13805765
> 
> 赞同：1
> 
> 时间：2012-12-10T17:14:48.960
> 
> 标签：ios, cloud, carousel, tap

我们在一个网站上使用了Cloud教授的Cloud Carousel，我们也需要在iOS设备上实现这个功能。

我们使用 AlbanX 的 Cloud Carousel Touch 脚本修补了 Carousel 的 javascript 代码：

[http://www.albanx.com/?pid=5&subid=18](http://www.albanx.com/?pid=5&subid=18)

[http://www.albanx.com/programing/cloudcarouseltouch/jslibs/cloud-carousel.1.0.5.js](http://www.albanx.com/programing/cloudcarouseltouch/jslibs/cloud-carousel.1.0.5.js)（代码下载）

轮播运行良好，但有一个例外....我们需要轮播中的项目可点击（链接到其他页面），并且在 iOS 设备上（我们目前不测试其他移动平台）这些项目不可用响应点击事件的时间更长。

我在 Javascript 编码方面相当新，所以我正在寻找更改现有脚本的帮助，以便在没有手势的情况下单击项目（换句话说，点击而不是滑动）导致链接被跟踪而不是旋转木马旋转。

任何帮助将不胜感激。

# android - 获取订阅信息时来自 Google Play Android Developer REST API 的错误 500

> ID：13805766
> 
> 赞同：4
> 
> 时间：2012-12-10T17:14:51.210
> 
> 标签：android, api, httprequest, google-play, subscription

我已按照 Google 此处描述的完整步骤访问 API： [https](https://developers.google.com/android-publisher/authorization) ://developers.google.com/android-publisher/authorization 。

我设法获得了一个刷新令牌，并在我现有的访问令牌到期时获取一个新的访问令牌。所以现在我正在尝试使用以下方法获取有关有效订阅的信息：

```
GET https://www.googleapis.com/androidpublisher/v1/applications/<packageName>/subscriptions/<subscriptionId>/purchases/<token>?access_token=<myAccessToken> 
```

但我得到的唯一回应是：

```
{
 "error": {
  "code": 500,
  "message": null
 }
} 
```

有没有人遇到过这个问题？我目前正在使用未发布的应用程序进行测试，尽管订阅已发布，因此`packageName`,`subscriptionId`并且`token`应该是有效的。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-10-09T02:34:58.917

更改或再次添加新的互联网设置..500 错误是由于您的错误或误导网络设置导致连接提前超时，无法通过清除数据缓存来解决..

# javascript - 不同屏幕上的相同图像尺寸（物理上）

> ID：13805767
> 
> 赞同：0
> 
> 时间：2012-12-10T17:14:51.710
> 
> 标签：javascript, screen, resolution, dpi, ppi

> **可能重复：**
> [如何在所有现代浏览器中检测页面缩放级别？](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)

我正在构建一个网站，其图像需要在每个设备或浏览器上具有相同的物理尺寸。假设图像完全适合 iPhone5 屏幕，即它的物理尺寸为 3.49x1.96 英寸（或 4" 对角线）。如果我在笔记本电脑的浏览器上查看它，它也需要具有 3.49x1.96 的尺寸英寸（显然分辨率较低）。在屏幕较小的 iPhone4 上，它甚至会切掉图像的某些部分。

我想我需要获取 PPI/DPI，然后进行相应的调整，即如果设备具有 iphone5 的 PPI/DPI，我需要将图像大小调整为 50%。不过，我有点困惑，是否还需要考虑屏幕分辨率，因为它可能会在非移动设备上发生变化。有谁可以帮我离开这里吗？

在所有设备上进行这项工作的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:27:33.073

我会使用 srcset 标签

```
<img src="foo-lores.jpg"
 srcset="foo-hires.jpg 2x, foo-superduperhires.jpg 6.5x"
 alt="decent alt text for foo."> 
```

2 和 6.5 是相对分辨率 *来源：[HTML Doctor](http://html5doctor.com/html5-adaptive-images-end-of-round-one/)

# r - 如何将两列与偏移数据结合起来？

> ID：13805769
> 
> 赞同：3
> 
> 时间：2012-12-10T17:14:56.600
> 
> 标签：r, multiple-columns

我的数据集包含两列，其中的数据是偏移的 - 例如：

```
col1<-c("a", "b", "c", "d", "ND", "ND", "ND", "ND")
col2<-c("ND", "ND", "ND", "ND", "e", "f", "g", "h")
dataset<-data.frame(cbind(col1, col2)) 
```

我想将这两个偏移列组合成一个包含字母 a 到 h 的列，仅此而已。

我在想类似下面的内容，但 rbind 不是正确的命令：

```
dataset$combine<-rbind(dataset$col1[1:4], dataset$col2[5:8]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:17:04.800

关于什么：

```
sel2 <- col2!="ND"
col1[sel2] <- col2[sel2]
> col1
[1] "a" "b" "c" "d" "e" "f" "g" "h" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:23:43.387

使用`sapply`一个匿名函数：

```
dataset[sapply(dataset, function(x) x != "ND")]
# [1] "a" "b" "c" "d" "e" "f" "g" "h"
dataset$combine <- dataset[sapply(dataset, function(x) x != "ND")]
dataset
#   col1 col2 combine
# 1    a   ND       a
# 2    b   ND       b
# 3    c   ND       c
# 4    d   ND       d
# 5   ND    e       e
# 6   ND    f       f
# 7   ND    g       g
# 8   ND    h       h 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T17:23:55.077

用于`grep`查找匹配的元素并选择它们：

```
c(col1[grep("^[a-h]$",col1)],col2[grep("^[a-h]$",col2)]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T18:05:43.233

还有另一种方式，使用`mapply`and `gsub`：

```
 within(dataset, combine <- mapply(gsub, pattern='ND', replacement=col2, x=col1))
#   col1 col2 combine
# 1    a   ND       a
# 2    b   ND       b
# 3    c   ND       c
# 4    d   ND       d
# 5   ND    e       e
# 6   ND    f       f
# 7   ND    g       g
# 8   ND    h       h 
```

根据您对@Andrie 的回答的评论，这也将保留`NA`行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T17:46:19.093

另一个角度来看：

```
transform(dataset, 
          combine=dataset[apply(dataset, 2, function(x) x %in% letters[1:8])])
  col1 col2 combine
1    a   ND       a
2    b   ND       b
3    c   ND       c
4    d   ND       d
5   ND    e       e
6   ND    f       f
7   ND    g       g
8   ND    h       h

dataset$combine <- dataset[apply(dataset,2, function(x) nchar(x)==1)] #Also works 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T17:18:19.280

有时问题是想得足够简单...... ;-)

```
dataset$combine<-c(dataset$col1[1:4], dataset$col2[5:8]) 
```

# c# - 从另一个类调用的方法不起作用

> ID：13805772
> 
> 赞同：0
> 
> 时间：2012-12-10T17:15:06.147
> 
> 标签：c#, class, methods

我有两节课：

`mainGUI`和`preferencesGUI`

每次按下按钮时，我都想在`mainGUI`名为 的类中调用一个方法。但是，当我尝试这样做时，什么也没有发生。`updateGUI``applychanges`

这是我的课程：

更新界面：

```
public void updateGUI()
{
    String[] colors = (Regex.Split(File.ReadAllText(prefpath), ","));
    int[] colori = new int[colors.Length];
    for (int x = 0; x < colors.Length; x++)
    {
        colori[x] = Convert.ToInt32(colors[x].ToString());
    }
    preferencesGUI pg = new preferencesGUI();
    pg.R1 = colori[0]; 
    pg.G1 = colori[1];
    pg.B1 = colori[2];
    pg.R2 = colori[3]; 
    pg.G2 = colori[4]; 
    pg.B2 = colori[5];
    outputbox.ForeColor = Color.FromArgb(colori[0], colori[1], colori[2]);
    outputbox.BackColor = Color.FromArgb(colori[3], colori[4], colori[5]);
    eventlist.ForeColor = Color.FromArgb(colori[0], colori[1], colori[2]);
    eventlist.BackColor = Color.FromArgb(colori[3], colori[4], colori[5]);
} 
```

首选项GUI上的按钮单击事件处理程序：

```
private void applychanges_Click(object sender, EventArgs e)
{
        mainGUI mg = new mainGUI();
        mg.updateGUI();
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:34:02.120

首先，我假设当preferencesGUI 进行此调用时mainGUI 已经打开。所以当你这样做时：

```
private void applychanges_Click(object sender, EventArgs e)
{
        mainGUI mg = new mainGUI();
        mg.updateGUI();
} 
```

您所做的只是创建一个新的 mainGUI 实例，然后让它超出范围，所以是的，它什么也不做。

这是 GUI 开发中非常常见的障碍。你如何让不同的组件相互了解。人们最初尝试的一种方法是单例。但是，如果您想要组件的多个实例，这可能会导致问题，实际上它只是有点混乱。一个更好的想法是传入控件的实例，但这种设计不是非常模块化，因为它要求preferencesGUI 类知道mainGUI 类。

相反，您应该在您的首选项GUI 中创建一个事件，如下所示：

```
class preferencesGUI
{
    // ... Some code ...
    public event Action RequestGUIUpdate;
    protected void OnRequestGUIUpdate() { if (this.RequestGUIUpdate == null) return; RequestGUIUpdate(); }

    // ... Some more code ...

    private void applychanges_Click(object sender, EventArgs e)
    {
        OnRequestGUIUpdate();
    }

    // ... Some more code ...
} 
```

所以现在preferencesGUI 能够在需要更新GUI 时发出通知。因此，当您从 mainGUI 创建 preferencesGUI 实例时，附加一个事件处理程序，如下所示：

```
preferencesGUI preferences = new preferencesGUI();
preferences.RequestGUIUpdate += new Action(updateGUI); 
```

# asp.net-mvc - MVC 4 中的角色何时初始化？不是在成功登录后

> ID：13805774
> 
> 赞同：3
> 
> 时间：2012-12-10T17:15:11.860
> 
> 标签：asp.net-mvc, roles, simplemembership

想要设置一些基于角色的依赖项（Ioc、Ninject）。但是成功登录后，用户的角色是未知的。何时何地进行注射？我可以强制初始化角色吗？还是我必须自己去取？

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
        {
            DoRolebasedObjectBinding(model.UserName);   // THIS IS THE WRONG PLACE!
            return RedirectToLocal(returnUrl);
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
        return View(model);
    } 
```

应用程序从 HomeContoller 开始（未设置角色），成功登录后，应用程序被重定向到 de HomeController（参见上面的标准代码），现在角色已设置......一个技巧是强制角色在HomeController 通过添加所有角色或额外的“普通”角色

```
public class HomeController : Controller
{
    [Authorize(Roles = "Common")]
    public ActionResult Index()
    {
        DoRolebasedObjectBinding(User.Identity.Name); 
```

但这会强制登录，也会强制 HomeController 作为起点。希望是一个“优雅”的地方来调用我的 DoRolebasedObjectBinding。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:54:15.460

基于[新 MVC 4 Internet 模板中基于角色的身份验证](https://stackoverflow.com/questions/12257232/role-based-authentication-in-the-new-mvc-4-internet-template-using-simplemembers)，答案相当简单：自己动手：

```
var roles = Roles.Provider;
string[] rolesArr = roles.GetRolesForUser(username); 
```

# java - Java：在超类方法上同步

> ID：13805775
> 
> 赞同：0
> 
> 时间：2012-12-10T17:15:15.463
> 
> 标签：java, concurrency

```
abstract class Basic (){
    public synchronized void basicMethod(String string){
        //Some actions here
    }
}

public class A extends Basic{
    public void aMethod(){
        //Some actions here
    }
}

public class B extends Basic{
    public void bMethod(){
        //Some actions here
    }
}

Basic a = new A();
Basic b = new B();

a.basicMethod(); // acquires lock
b.basicMethod(); //Same lock? 
```

换句话说 - 锁与具体的 Object 或 Super 类相关也很重要吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T17:18:53.123

不同的锁。实例方法在`synchronized`与该特定对象*实例*`a`关联的监视器上同步，因此每个实例`b`都有自己的监视器。

如果你有

```
abstract class Basic (){
    public synchronized void basicMethod(String string){
        //Some actions here
    }
}

public class A extends Basic{
    public synchronized void aMethod(){
        //Some actions here
    }
} 
```

然后调用`a.basicMethod()`并`a.aMethod()`锁定同一个监视器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:18:38.443

尽管两者都`a & b`获得了锁，但这些锁与对象引用相关联。因此`a & b`，两者都可以通过获取不同的锁在同一点进入它们的同步区域。

> 换句话说 - 锁与具体的 Object 或 Super 类相关也很重要吗？

锁与对象实例有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T17:19:42.947

据我所知，锁定是在对象引用上，而不是在类定义上。这意味着这将是两个不同的锁，因为它们没有保存在同一个对象引用上。请记住，Java 中的每个对象都是 Object 类的子类，因此如果它锁定在最高超类上，那么程序中就只能有一个锁定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T17:22:40.330

有不同的锁，因为锁被持有在一个`object`. [Javadoc](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)说

> 首先，同一对象上的同步方法的两次调用不可能交错。当一个线程正在为一个对象执行同步方法时，所有其他为同一对象调用同步方法的线程都会阻塞（暂停执行），直到第一个线程处理完该对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T17:23:44.790

```
Basic a = new A();
Basic b = new B(); 
```

每个**a**和**b**具有不同的对象引用，因此具有不同的锁，因此会调用具有两个不同锁的同步方法。

# java - 如何实例化一个正在“注释处理”的类？

> ID：13805777
> 
> 赞同：3
> 
> 时间：2012-12-10T17:15:27.293
> 
> 标签：java, annotations, code-generation, annotation-processing

我正在编写一个注释处理器，我需要实例化一个正在处理的类。

我正在根据类及其注释提取一些文档，并且我想从该类运行一个方法并将结果输出到生成的文档中。

不幸的是，当我尝试实例化它时，我有一个`ClassNotFoundException`对我来说似乎合乎逻辑的处理，因为处理发生在编译轮之前。

我目前正在编写一个包含文档的 xml 文件，也许有注释后处理器或类似的东西？

您对解决方法有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:30:14.247

好吧，当然，我们不能访问正在处理的类，因为它正在**被**编译。

并且没有办法在编译轮之后运行注释处理器。

然后我在 maven 中搜索并发现了阶段：[**process-classes**](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

它在编译成功后立即执行，因此非常适合我的需求。在此阶段，我执行一个 java 类，该类读取我在注释处理期间生成的 xml 文件。此时我可以访问所有内容！

HIH

# c++ - 正态分布代码返回意外值

> ID：13805785
> 
> 赞同：0
> 
> 时间：2012-12-10T17:15:57.593
> 
> 标签：c++, random, normal-distribution

> **可能重复：**
> [在 C# 中实现 Box-Mueller 随机数生成器](https://stackoverflow.com/questions/5817490/implementing-box-mueller-random-number-generator-in-c-sharp)

我正在使用 Box-Muller 变换方法来生成正态分布的随机数：

```
 do {
        rand1 = 2*(rand()/(double)RAND_MAX)-1 ; 
        rand2 = 2*(rand()/(double)RAND_MAX)-1;
        distSqr = rand1 * rand1 + rand2 * rand2;
  } while (distSqr >= 1 );

  mp1 = sqrt((-2*log(distSqr))/distSqr); 
  res = rand1 * mp1;
  norm_dist=res*var+mean; 
```

我犯了一个明显的错误吗？

# hibernate - 列表 在 Hibernate 中使用复合键映射对象

> ID：13805789
> 
> 赞同：2
> 
> 时间：2012-12-10T17:16:05.107
> 
> 标签：hibernate

一个很简单的问题。我有一个代表订单的类

给定以下映射文件：

```
<hibernate-mapping>
<class name="Order" table="hbmOrder">
    <composite-id name="key">
        <key-property name="OrderStatus" type="string" />
        <key-property name="OrderType" type="string" />
        <key-property name="version" type="integer" />
        <key-property name="orderId" type="string" />
    </composite-id>
    <property name="ccy" type="string" /> 
```

我想添加一个新属性，它是一个无序列表的字符串来保存销售人员列表。可以有零个、一个或多个销售人员。

```
List<String> salesPersons; 
```

到目前为止，这已经打败了我。到目前为止，我最好的尝试是：

```
 <list name="salesPersons" table="order_salesPersons">
        <key column="key" />
        <list-index column="index" />
        <many-to-many column="order_id" class="java.lang.string" />
    </list> 
```

这不起作用，因为：

1.  这是一个多对多映射（我想它应该是一对多）
2.  `java.lang.string`Hibernate 不支持该类？

此外，由于我无法控制的项目限制，我无法使用注释。

我可以在下一个处理中找到的大多数示例都处理更复杂的示例。同样，如果有人能指出我的一个简单示例的方向，那将是一个很大的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:15:22.137

而不是多对多使用元素：

```
<element column="order_id" type="java.lang.String"/> 
```

# ruby-on-rails - 定位和删除延迟的 resque 作业

> ID：13805796
> 
> 赞同：1
> 
> 时间：2012-12-10T17:16:40.673
> 
> 标签：ruby-on-rails, ruby, resque

我有一个 resque 工作陷入了一些糟糕的代码中，并且在反复故障转移后被无限地请求。我想以某种方式手动删除作业，但我不确定 redis 命名空间中的作业名称是什么。它不是“失败”，因为我正在捕捉实际的异常。在例外情况下，我使用 Resque.enqueue_in() 将作业添加回 resque 队列。我如何弄清楚 redis 中的作业名称是什么，以便我可以删除键/作业以防止发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:06:25.470

`list`如果你想从 redis 中删除消息，Resque 轮询一个 redis ，它本质上是一个队列，那么你可以试试这个

```
require "rubygems"
require "redis"
require 'redis/namespace'
redis = Redis.new
namespace ||= :resque

@redis = Redis::Namespace.new(namespace, :redis => redis)
## If you dont know how does the job payload look like then find inside the list
## normally the payload look like this 
## {'class' => 'ProcessCSV' , args => ['1'] }.to_json.inpsect 
list_job_payloads = @redis.lrange "queue:[my queue name]",0,-1

## then finally remove from the list
@redis.lrem "queue:[my_queue_name]",0,value 
```

但我想更好的方法是像这样通过 resque 删除工作

考虑到以下是通过 resque 推送到您的 redis 列表的作业有效负载

```
 { 'class' => 'ProcessCSV', 'args' => ['1'] } 
```

然后您可以使用删除有效负载

```
 Resque::Job.destroy(queue, 'ProcessCSV', '1') 
```

它还在[这里更详细地描述](https://github.com/resque/resque/blob/master/lib/resque/job.rb#L71-L94)

# sql - 引用不同表的 SQL 日期条件

> ID：13805797
> 
> 赞同：2
> 
> 时间：2012-12-10T17:16:54.067
> 
> 标签：sql, date

我有两个正在尝试构建的视图。View #1 仅返回一组推荐数据，条件是推荐起源于过去 14 天（以及一些其他条件）。这已经完成。

第二种，视图 #2，必须返回过去 14 天内有推荐的客户的所有相关推荐（来自视图 #1 的推荐），但必须限制在推荐日期前不超过 60 天的视图中#1，不得包含来自视图 #1 的相同推荐，并且不能在来自视图 #1 的相关推荐之后产生相关推荐

查看#1：TP.INC_REFERRALS_V

所以基本上我想在第二个视图中为每个推荐放置一个日期条件，该推荐基于第一个视图中的推荐对应项。

到目前为止，我在查询结束时的条件是：

`... WHERE TP.PROSPECT.PROSPECT_ID IN ((SELECT TP.INC_REFERRALS_V.REFERRAL_TABLE_PROS_ID FROM TP.INC_REFERRALS_V))` --这将标识符（prospect_id）与第一个视图（tp.inc_referrals_v）匹配以返回所有相关的推荐

`AND TP.REFERRAL_V.REFERRAL_ID NOT IN (SELECT TP.INC_REFERRALS_V.REFERRAL_ID FROM TP.INC_REFERRALS_V)` -- 这不包括已在第一个视图中返回的推荐

`AND...`-- 需要其他标准的逻辑。

建议？

第一个视图的查询如下。第三个视图将是完全相同的格式，但条件不同..（这是我遇到问题的部分）

查看#1

```
 SELECT TP.REFERRAL_V.REFERRAL_ID,
TP.REFERRAL_V.PROSPECT_ID AS REFERRAL_TABLE_PROS_ID,  
TP.PROSPECT.PROSPECT_ID,    
TP.PROSPECT.SEARCH_NAME AS CUSTOMER_PROSPECT_NAME,  
TP.PROSPECT.CUSTOMER_ID,  
TP.PROSPECT.CUSTOMER_SINCE,  
TP.PROSPECT.IS_BUSINESS,  
TP.PRODUCT_ML_INFO.PRODUCT_CODE,  
TP.PRODUCT_ML_INFO.PRODUCT_ID,  
TP.REGION_ML_INFO.REGION_DESCRIPTION,  
CASE WHEN (TP.REFERRAL_V.PRODUCT_ID) IS NULL THEN
TP.PRODUCT_CATEGORY_ML_INFO.PROD_CAT_DESCRIPTION ELSE 
TP.PRODUCT_ML_INFO.PRODUCT_DESCRIPTION END AS PROD_CAT_NAME,
TP.REFERRAL_V.PROD_CATEGORY_ID,  
(VXUZ.FIRST_NAME || ' ' || VXUZ.LAST_NAME)    AS CREATED_BY,
(VXU2.FIRST_NAME || ' ' || VXU2.LAST_NAME) AS ASSIGN_TO,
CASE WHEN (TP.REFERRAL_V.REFERRAL_STATUS) = '2'   
THEN TP.REFERRAL_V.CREDIT_LOCATION_NAME ELSE LCX1.LOCATION_NAME END AS   ASSIGN_TO_COST_CENTER,  
     EXU2.EMPLOYEE_NUMBER AS ASSIGN_TO_EMP_NUM,
    CXZ1.CODE_TEXT AS STAGE,  
  TP.CODE.CODE_TEXT AS STATUS, 
  TP.REFERRAL_EXTENSION_V.EXTENDED_DATETIME2 AS SOLD_DATE,    
TP.REFERRAL_V.CREATED_WHEN AS ORIGINATION_DATE,  
FROM TP.REFERRAL_V  
(joins removed - too many to list)  
WHERE VXU4.USER_ID <> VXU2.USER_ID  
   AND TRUNC(TP.REFERRAL_V.CREATED_WHEN) BETWEEN TRUNC(SYSDATE - 14) AND TRUNC(SYSDATE) 
```

* * *

查看 1 个结果

```
Referral_id    Origination_Date   Prospect_ID
        2001              29-NOV-12             A1
        2002              02-DEC-12             A2
        2003              07-DEC-12             A3 
```

View2 结果（应该是这样的）：

```
Referral_id   Origination_Date   Prospect_ID
        1995              01-NOV-12             A1  
        1993              25-OCT-12             A2  
        1994              20-OCT-12             A2
        1990              17-OCT-12             A2  
        1989              10-NOV-12             A3 
```

正如您在 View2 结果中看到的那样，结果应包括 View1 中涉及的“prospect_ids”的所有相关引用，但不应包含 60 天前的任何日期，也不应包括视图 1 本身的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:36:38.337

这个样子怎么样？

```
SELECT DISTINCT referralID, r.origination_date, r.prospectID, min_dt
FROM referralV r INNER JOIN
(
    SELECT prospectID, min(origination_date) AS min_dt
    FROM referralv
    WHERE origination_date >= dateadd(d,-14,getdate())
    GROUP BY prospectID
) p ON
r.prospectID = p.prospectid
WHERE
  origination_date < dateadd(d,-14,getdate()) AND
  origination_date >= dateadd(d,-60,min_dt)

CREATE TABLE [referralv](
    [referralID] [int] NOT NULL,
    [origination_date] [datetime] NOT NULL,
    [prospectID] [char](2) NOT NULL
) ON [PRIMARY];

INSERT INTO [referralv]([referralID],[origination_date],[prospectID]) VALUES
           (2001,'29-NOV-12','A1');
INSERT INTO [referralv]([referralID],[origination_date],[prospectID]) VALUES
           (2002,'02-DEC-12','A2');
INSERT INTO [referralv]([referralID],[origination_date],[prospectID]) VALUES
           (2003,'07-DEC-12','A3');
INSERT INTO [referralv]([referralID],[origination_date],[prospectID]) VALUES
           (1995,'01-NOV-12','A1');
INSERT INTO [referralv]([referralID],[origination_date],[prospectID]) VALUES
           (1993,'25-OCT-12','A2');
INSERT INTO [referralv]([referralID],[origination_date],[prospectID]) VALUES
           (1994,'20-OCT-12','A2');
INSERT INTO [referralv]([referralID],[origination_date],[prospectID]) VALUES
           (1990,'17-OCT-12','A2');
INSERT INTO [referralv]([referralID],[origination_date],[prospectID]) VALUES
           (1989,'10-NOV-12','A3'); 
```

[sqlfiddle](http://sqlfiddle.com/#!3/f96fee/1/2)

# objective-c - 调整 UIView 的大小以隐藏“剪切线”下的部分

> ID：13805800
> 
> 赞同：1
> 
> 时间：2012-12-10T17:17:03.600
> 
> 标签：objective-c, cocoa-touch, uiview

我正在设计一个可编辑的`UITableViewCell`^* . 在正常状态下，我的单元格应该看起来像这张图片中红线上方的部分。

![表格单元格](../Images/9ee2880600114dc77c320857b3076076.png)

当用户单击`[Edit...]`时，让用户更改设置的控件将出现，并且`[Edit...]`按钮的文本将变为`[Done]`。单击`[Done]`将隐藏红线下方的部分，并将按钮上的文本更改回`[Edit...]`。

我试图通过更改代表中行的高度来实现这种效果。当单元格处于编辑模式时，它会返回全高；当单元格不处于编辑模式时，返回上半部分从红线开始的高度。不幸的是，当我这样做时，编辑控件“向上滑动”，遮挡了单元格的其余部分。我通过使这些控件在编辑模式下不可见来解决这个问题，但我认为应该有更好的解决方案。

是否有可以应用于控件的设置，以便让我切断底部，将内容剪裁在红线下方？

* * *

^*我正在使用 Interface Builder 来设计我的单元格，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:59:16.413

在您的 xib 中 - 只需打开顶部支柱

![在此处输入图像描述](../Images/60dbac23facb7c8d57cf741a19eb1448.png)

这对我有用。为了使其顺利扩展和收缩，您需要使用空`beginUpdates`/`endUpdates`调用的技巧

```
[tableView beginUpdates];
[tableView endUpdates]; 
```

# excel - Excel中单元格内容的条件交换

> ID：13805802
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:17:09.780
> 
> 标签：excel, vba

我想知道，给定一个 excel 文件中的 3 列，如何在给定第三列的值的情况下有条件地交换前 2 列的内容。

美国广播公司

a 1 y
b 2 n
c 3 y
d 4 y
e 5 n

我想要做的是：每当 C 列中有一行包含值“y”时，我想交换同一行的 A 列和 B 列中的值。

除了VBA没有别的办法了吗？

希望问题很清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:31:20.697

我看到了两种方法：

1.  创建 2 列，在其中插入一个简单的函数，例如 `=IF(C="something", B, A)`在另一列上插入相反的 (A，B)。这将根据需要进行切换，然后您可以将值复制粘贴到列上并删除临时列。
2.  `if-statement`在循环内部使用简单的交换算法。如果您对 VBA 有非常基本的了解，这应该非常简单。如果你没有这方面的知识，那就去internetz上查一下。

代码的总体感觉应该是：

```
Dim cell as Range
Dim temp as string
for each cell in Range("C2:C" & Range("C2").End(xlDown).Row)
    if cell.value = "something" then
        temp = cell.offset(0, -1).value
        cell.offset(0, -1).value = cell.offset(0, -2).value
        cell.offset(0, -2).value = temp
    end if
next cell 
```

# c - 运行时检查失败 #2 - 变量“tempID”周围的堆栈已损坏

> ID：13805803
> 
> 赞同：0
> 
> 时间：2012-12-10T17:17:10.130
> 
> 标签：c, variables, stack, runtime, stack-corruption

我最近开始用 c 编码，在编码过程中遇到了这个运行时错误，我找不到解决方案。它要么显示此运行时错误，要么`scanf`在找到客户的情况下停止，您选择要编辑的内容，然后输入新信息。

例子：

*   输入 ID:322993
*   成立
*   按 [1] 编辑 ID
*   输入新身份证
*   *程序卡住了*

这是代码：

```
void modifyCustomer(){
    int counter=0;
    long int tempID=0;
    flag found = false;
    fflush(stdin);
    printf("Enter Customer ID\n");
    scanf("%lld", &tempID);
    do{
        char option_str[200];
        int option = 0;
        char *not_valid;
        if(tempID == customers[counter].customerID){
            printf("Customer found!\n");
            found = true;
            do{
                fflush(stdin);
                printf("Choose what to modify:\n 1\. ID\n 2\. Name\n 3\. Surname\n 4\. Address\n 5\. Mobile\nOption: ");
                scanf("%s", &option_str);
                option = strtol(option_str, &not_valid, 10);
                fflush(stdin);
                if (*not_valid != '\0') {
                    printf("%s is not valid.\n", not_valid);
                } else{
                    switch(option){
                    case 1:
                        printf("Enter new ID:\n");
                        scanf("%d\n", &customers[counter].customerID);
                        printf("Customer Modified Successfully!\n");
                        break;
                    case 2:
                        printf("Enter new Name:\n");
                        scanf("%s\n", &customers[counter].customerName);
                        printf("Customer Modified Successfully!\n");
                        break;
                    case 3:
                        printf("Enter new Surname:\n");
                        scanf("%s\n", &customers[counter].customerSurname);
                        printf("Customer Modified Successfully!\n");
                        break;
                    case 4:
                        printf("Enter new Address:\n");
                        scanf("%s\n", &customers[counter].customerAddress);
                        printf("Customer Modified Successfully!\n");
                        break;
                    case 5:
                        printf("Enter new Mobile:\n");
                        scanf("%lld\n", &customers[counter].customerMobile);
                        printf("Customer Modified Successfully!\n");
                        break;
                    default:
                        printf("You did not enter a valid Number. Please re-enter your Input \n");
                        break;
                    }
                }
            }while((option <1) || (option > 5));
        }
        else{
            counter++;
        }
    }while((found != true) && (counter < (custNum-1)));
    if (found == false)
        printf("Customer not found!\n");
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:19:20.280

格式说明`%lld`符用于`long long`. 您已经声明了一个`long int`所以可能正在尝试写入比您的存储空间更大的类型。`sizeof(long int) != sizeof(long long)`这样做的影响是未定义的，但如果在您的平台上，很可能会覆盖下一个堆栈变量。

您可以通过更改`tempID`为 type`long int`或将您使用的格式说明符更改为`%ld`.

# c# - WinRT、C#、画布和儿童惯性滚动

> ID：13805810
> 
> 赞同：1
> 
> 时间：2012-12-10T17:17:39.570
> 
> 标签：c#, canvas, windows-runtime

情况：WinRT 应用程序，主页面上的画布。画布有许多孩子。当用户点击画布并移动指针时，我正在尝试滚动它们。一切正常，但我不知道如何模拟惯性滚动。

编码：

```
private GestureRecognizer gr = new GestureRecognizer();
public MainPage()
        {
            this.InitializeComponent();

            gr.GestureSettings = GestureSettings.ManipulationTranslateInertia;
            gr.AutoProcessInertia = true;
        } 
```

我订阅了一些画布事件：

```
//Pressed
private void Canvas_PointerPressed(object sender, PointerRoutedEventArgs e)
        {
            if (e.Pointer.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Touch)
            {

                var _ps = e.GetIntermediatePoints(cnvMain);
                if (_ps != null && _ps.Count > 0)
                {
                    gr.ProcessDownEvent(_ps[0]);
                    e.Handled = true;

                    Debug.WriteLine("Pressed");
                }
                initialPoint = e.GetCurrentPoint(cnvMain).Position.X;
            }
        }

//Released
private void Canvas_PointerReleased(object sender, PointerRoutedEventArgs e)
        {
            if (e.Pointer.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Touch)
            {

                var _ps = e.GetIntermediatePoints(cnvMain);
                if (_ps != null && _ps.Count > 0)
                {
                    gr.ProcessUpEvent(_ps[0]);
                    e.Handled = true;

                    Debug.WriteLine("Released");

            }
        }

// Moved
private void Canvas_PointerMoved(object sender, PointerRoutedEventArgs e)
        {

            if (gr.IsActive || gr.IsInertial)
            {

                                   gr.ProcessMoveEvents(e.GetIntermediatePoints(null));

// Here is my code for translation of children
                e.Handled = true;
            }
        } 
```

所以，我可以翻译canvas子，但没有惯性。我该如何启用它？

不幸的是，由于特定数据，我无法在此应用中使用 GridView 或 ListView 之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:17:57.270

你应该使用[`GestureRecognizer`](http://msdn.microsoft.com/en-us/library/windows/apps/br241937.aspx)with [`ManipulationInertiaStarting`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.gesturerecognizer.manipulationinertiastarting)。这应该为您提供足够的信息来实现惯性滚动。

# c++ - C ++ STL：创建std :: string的const副本时会更改c_str（）吗？

> ID：13805811
> 
> 赞同：2
> 
> 时间：2012-12-10T17:17:53.827
> 
> 标签：c++, stl, libstdc++, libc++, c-str

这是关于 STL 实现在处理`std::string`. 我有这么短的测试，它执行 2 个 const 副本并打印由返回的地址`c_str()`：

```
#include <stdio.h>
#include <string>
using namespace std;
int main()
{
          string a("Hello World!");
    const string b(a);
    const string c(b);

    printf("a: %p = %s\n", a.c_str(), a.c_str());
    printf("b: %p = %s\n", b.c_str(), b.c_str());
    printf("c: %p = %s\n", c.c_str(), c.c_str());
  return c.c_str() == b.c_str();
} 
```

在我的带有 libstdc++.so.6.0.16 STL 的 gcc 4.6.2 上，所有指针都返回为相等的。

我可以依靠这种行为吗？

它是可移植的还是在最近的标准中定义的？

这是否适用于当前或未来版本的 libstdc++、libc++、Microsoft STL、stdcxx (apache.org)？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T17:19:13.130

这就是所谓的[COW（写时复制）](http://en.wikipedia.org/wiki/Copy-on-write)语义。这是一种避免不必要的字符串复制的优化策略。但是你不能依赖这种行为——它是 GNU libstdc++ 的一个实现细节。事实上，[C++11 标准是不允许的](https://stackoverflow.com/questions/12199710/legality-of-cow-stdstring-implementation-in-c11)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T18:25:31.987

你根本不能依赖这种行为。唯一可以保证的`c_str()`是返回的指针在底层`string`发生突变之前是有效的（特定方法/功能使返回的指针无效）。您不能保证它可以在任何特定的体系结构或编译器上运行，并且不应该依赖这种行为。

# .net - .NET - Entity Framework 3.5 - 使用 top/where 子句

> ID：13805816
> 
> 赞同：1
> 
> 时间：2012-12-10T17:18:07.947
> 
> 标签：.net, frameworks, entity, where, iqueryable

我是 .NET 的新手，有人要求我对项目进行一些更改。它使用实体框架 3.5。

我们目前有如下代码块：

```
using (MemphisEquipmentEntities entities = new MemphisEquipmentEntities())
{
    var trucks = entities.Trucks.Top("4");
    truckRepeater.DataSource = trucks;
    truckRepeater.DataBind();
} 
```

与其抢前 4 辆卡车，我需要在 IsSpanish 正确的情况下抢前 4 辆卡车。所以我写了代码

```
var trucks = entities.Trucks.Top("4").Where(t => t.IsSpanish == true) 
```

不幸的是，这并没有按照我想要的顺序进行评估。它将前四辆卡车拉出桌子，然后检查它们是否是西班牙人，如果不是，则丢弃它们。切换 top/where 子句不起作用 - 它会引发错误。

谁能带领我朝着正确的方向前进？我的谷歌技能让我失望了，我一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:24:34.577

```
var trucks = entities.Trucks.Where(t => t.IsSpanish == true).Take(4); 
```

虽然你也应该对它们进行排序，在获得前 4 名之前，但你没有告诉我们排序标准应该是什么。

注意：取而不是顶部

# web-services - Actionsscript 移动项目中的 mx.rpc 类？

> ID：13805819
> 
> 赞同：1
> 
> 时间：2012-12-10T17:18:15.093
> 
> 标签：web-services, actionscript-3, apache-flex, air, starling-framework

我正在评估 Feathers UI 框架以替代我们当前的 Flex 移动应用程序（Flex 的限制太多，主要与视网膜设备上的性能有关）并且来自 Flex，我有一些问题使用纯 AS 项目。

一个大问题似乎是网络服务的使用。我经常使用 mx.rpc 类和接口，例如`IResponder`、`AsyncToken`和`HTTPService`，这些显然在没有 Flex SDK 的情况下不可用。为什么这不是 AIR 的一部分而仍然是 Flex SDK 的一部分，我该如何解决这个问题？是否有等价物，还是我必须进行破解并手动导入相应的 SWC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:41:22.463

对于需要与 Web 服务通信的非 Flex 项目，您需要 Flex 框架中的两个文件：rpc.swc 和 framework.swc。

您只需像添加任何其他 SWC 一样将 SWC 添加到您的项目中。没有 MXML，不需要黑客攻击。我在 Flash CS 项目和 FlashDevelop AS3 项目中使用过它们。

# java - Jetty 在运行几天后停止从 Grails 应用程序加载样式表

> ID：13805822
> 
> 赞同：1
> 
> 时间：2012-12-10T17:18:17.873
> 
> 标签：java, css, grails, jetty, grails-2.0

我在 Rackspace 云虚拟机上托管的 Jetty 服务器上运行 Grails。部署并启动应用程序后，一切运行良好。几天后，CSS 样式表停止加载。我仍然可以成功导航到该页面，并且所有链接都有效。所有的数据也都在那里，只是没有样式。

重新启动 Jetty 可以解决问题，但我不想每隔几天重新启动一次。什么可能导致此问题？

作为参考，网址是[http://www.flashbandproject.org](http://www.flashbandproject.org)。我还没有重新启动服务器，不过我可能会在接下来的几个小时内重新启动（所以你可能会也可能不会看到 CSS）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:52:39.667

不确定您的问题是否相同，但我的问题是 /tmp 目录被 cron 作业定期清除。（请参阅此处的说明：[https](https://serverfault.com/questions/377348/when-does-tmp-get-cleared) ://serverfault.com/questions/377348/when-does-tmp-get-cleared ）默认情况下，Jetty 将战争文件扩展至 /tmp 目录。如果您只是在 $JETTY_HOME 下创建一个 /work 目录，Jetty 将使用该目录来代替扩展的战争。

# jquery - 无法读取控制器中的 $ .ajax 数据

> ID：13805826
> 
> 赞同：3
> 
> 时间：2012-12-10T17:18:45.737
> 
> 标签：jquery, ajax, asp.net-mvc, json

我正在尝试创建一个 jQuery .ajax 程序，其中用户单击视图中的按钮，触发 $.ajax 然后将名称发送到控制器，控制器在名称前添加 hello 并发送回 json 响应。

我已设法从控制器接收 JSON 响应，但未能读取`name`控制器中的发布数据。

这是我的代码：

## 控制器类

```
 public JsonResult processJsonRequest(PersonModel model)
    {       
        string returnString = "Hello , receive JSON data" + model.Name;
        return Json(returnString, JsonRequestBehavior.AllowGet);
    } 
```

## 模型类

```
public class PersonModel
{
    public string Name { get; set; }
} 
```

## 看法

```
@{
ViewBag.Title = "Index";}

 @Scripts.Render("~/bundles/jquery")

 @using (Html.BeginForm())
   {
      <input type="button" id="b1" value ="Press Me" />  
   }

 <script type="text/javascript">

   $(document).ready(function () {

    $("#b1").click(function () {

        var person = { Name: 'khurram' };

        $.ajax({
            type: "POST",

            url: "/JSON_Ajax_03/processJsonRequest",
            data: JSON.stringify(person),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (response) {
                alert(response);
            }
        });
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:21:30.157

代替：

```
JSON.stringify(person) 
```

做这个：

```
JSON.stringify({ model: person }); 
```

问题是您没有正确命名模型参数。

# sql-server - 如何同时更新和添加新记录

> ID：13805827
> 
> 赞同：1
> 
> 时间：2012-12-10T17:18:49.597
> 
> 标签：sql-server, performance, tsql, insert-update, bulk

我有一个包含超过一百万条记录（产品）的表。现在，每天，我都需要更新现有记录和/或添加新记录。

我没有一个接一个地做（需要几个小时），而是设法使用`SqlBulkCopy`一堆记录并设法在几秒钟内完成我的插入，但它只能处理新的插入。所以我正在考虑创建一个包含新记录和旧记录的新表；然后使用该临时表（在 SQL 端）更新/添加到主表。

有什么建议我该如何执行该更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:36:07.810

我们按照您描述的方式在代码中处理这种情况；我们有一个临时表，然后运行更新，其中临时表中的 ID 与要更新的表匹配，然后运行插入，其中要更新的表中的 ID 为空。不过，我们通常这样做是为了更新库/程序设置，因此它只是很少在较小的表上运行。对于那么多记录或每日运行，性能可能达不到标准。

我在使用这种方法时遇到的主要“问题”是，对于更新，我们进行了比较，以确保在实际运行更新之前至少有几个字段中的一个发生了变化。（我们这样做的最初原因是避免覆盖一些默认值，这可能会影响服务器行为。如果您的临时表可能包含实际上没有更改的记录，那么您这样做的原因可能是性能）。我们遇到了一种情况，我们确实想要更新其中一个默认值，但我们的旧脚本没有捕捉到这一点。因此，如果您进行任何比较以确定要更新哪些产品，请确保它从一开始就完整，或者记录好您不比较的任何字段以及原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:43:24.293

处理此问题的更好方法之一是使用 SQL 中的[MERGE](http://msdn.microsoft.com/en-us/library/bb510625.aspx)命令。Mssqltips 有一个很好的[教程](http://www.mssqltips.com/sqlservertip/1704/using-merge-in-sql-server-to-insert-update-and-delete-at-the-same-time/)，它可能比其他一些命令使用起来有点棘手。

此外，由于锁定，您可能希望将其分解为多个较小的事务，除非您知道可以容忍更新期间的阻塞。

# opencl - OpenCl 寄存器的幻数

> ID：13805830
> 
> 赞同：7
> 
> 时间：2012-12-10T17:18:58.733
> 
> 标签：opencl, nvidia

我编写了两个不同的 openCl 内核，使用 nvidia 分析器获取了一些关于它们的信息，发现每个工作项都使用 63 个寄存器。

我尝试了我能想到的一切来降低这个数字（用 ushort 替换 int，尝试在 {} 中声明变量以显示编译器何时可以摆脱它们）但似乎不可能改变这个 63！

然后我发现[了另一个](https://stackoverflow.com/questions/12726527/opencl-and-cuda-registers-usage-optimization)关于他编写的内核的问题，该内核使用......再次使用 63 个寄存器。

当然这可能纯属巧合，但也许背后有一个原因……使用的特定功能，硬件限制？有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-22T10:45:17.403

最多 63 个寄存器。在大多数最新硬件（如 GTX 480 到 GTX 770）上的数量。只有使用 GTX 780 或 Tesla K20，每个线程才能获得 255 个寄存器。

因此，当您的内核使用 63 个寄存器时，它很可能使用超过 63 个，但它们会溢出到片外私有内存（也称为 CUDA 本地内存）。例如，如果您的 nvidia 分析器报告 128 字节的本地内存，则意味着您需要摆脱 32 个（溢出）寄存器，然后才能获得低于 63 个硬件寄存器。

顺便说一句：“每个多处理器 8,192 个 32 位寄存器”意味着驻留在多处理器上的所有工作组有 8,192 个寄存器。但通常工作组的数量受工作组大小和内核需要的寄存器数量的限制。例如，如果您的内核使用 63 个寄存器并且您的工作组大小为 16^2，您将得到：63*16^2 = 每个工作组 16128 个寄存器。假设每个多处理器有 64K 寄存器，那么每个多处理器上可以有 4 个工作组，这将产生 25% 的占用率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T05:10:24.957

最大。寄存器/线程的数量受硬件限制，并且取决于设备的“计算能力”。查看 [Compute Capabilities](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#compute-capabilities)表。

（这适用于 NVidia，其他供应商可能有其他限制）。

# c# - 设置 selectedIndex 属性且 selectedItems 为空

> ID：13805839
> 
> 赞同：0
> 
> 时间：2012-12-10T17:19:53.287
> 
> 标签：c#, wpf, datagrid, selectedindex

我有一个使用带有数据网格的 MVVM 的 wpf 应用程序。我在 viewModel 中设置了 selectedIndex 属性，但 SelectedItems 属性为空。它不应该选择选定的项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:21:37.457

不必要。

一种方法是将数据网格 xaml 中的 SelectedItem 属性设置为视图模型上实现 INotifyPropertyChanged 的​​属性。然后将xaml绑定模式设置为双向。

然后，如果您单击所选项目，它将触发 xaml 绑定的更改以更新视图模型中的值

# vb.net - 为什么 vb.net 拒绝分配给嵌套协变接口为“模棱两可”

> ID：13805847
> 
> 赞同：5
> 
> 时间：2012-12-10T17:20:16.093
> 
> 标签：vb.net, compiler-errors, covariance, ambiguity

在代码中：

```
Interface ISelf(Of Out TMe)
End Interface
Class SomeBase
    Implements ISelf(Of SomeBase)
End Class
Class SomeDerived
    Inherits SomeBase
    Implements ISelf(Of SomeDerived)
End Class
Module ISelfTester
    Sub TestISelf()
        Dim z7 As New SomeDerived
        Dim z8 As ISelf(Of SomeDerived)
        Dim z9 As ISelf(Of ISelf(Of SomeDerived))
        z8 = z7
        z9 = z8
        z9 = z7 ' Why is this illegal?
    End Sub
End Module 
```

直接从 Z7 到 Z9 的分配产生消息“错误 13 Option Strict On 不允许从 'wo​​kka.SomeDerived' 到 'wokka.ISelf(Of wokka.ISelf(Of wokka.SomeDerived))' 的隐式转换，因为转换不明确。” 与从 Z7 到 Z8 或从 Z8 到 Z9 的分配相比，该分配如何更加模棱两可？据我所知，所有三个分配都必须是保留表示的转换，这意味着所有三个必须简单地存储对与 Z7 相同的对象的引用。

我可以理解，如果我试图将 的实例分配给`SomeDerived`type 的引用`ISelf(Of ISelf(Of SomeBase))`，则尝试访问该接口的成员可能会从`SomeBase`or中产生实现`SomeDerived`；如果成员是返回类型的方法`TMe`，我可以理解这种歧义可能导致编译失败（因为编译器不知道返回类型是什么）。不过，我很困惑，为什么仅仅尝试分配引用会因为“歧义”而失败，因为分配不可能被解释为除了对引用类型变量的引用的直接存储之外的任何东西？

顺便说一句，预期的用途是`ISelf(Of T)`包含一个只读属性`Self`type `T`，预期的实现将是`Return This`[在每种情况下都保留表示形式的转换；我想我应该在 中添加一个类约束`TMe`，但它不会影响原始问题]。如果有多种类都对实现感兴趣`ISelf(Of theirOwnTypes)`，那么应该可以利用 的协方差`ISelf`来促进一些原本会很困难的事情[例如，如果每个类都对实现`IMoe`、`ILarry`和/或`ICurly`等感兴趣。还实现了相应的类`ISelfAndMoe(Of ItsOwnType)`ISelfAndLarry(Of ItsOwnType) 和/或 ISelfAndCurly(Of ItsOwnType)`, etc. then one can accept a parameter type which is known to implement any combination of those interfaces e.g.`ISelfAndMoe(Of ISelfAndLarry(Of ICurly)) param `. Given that declaration,`param `would implement`IMoe `, and`param.Self `would implement`ILarry `, and`param.Self.Self `would implement`ICurly `. Further, if the class implements the expected pattern, one could cast`param `to e.g.`ISelfAndCurly(Of IMoe) `, if one wanted to call a routine which needed those two interfaces but didn't need`ILarry`（如果实现做了一些意想不到的事情，这种转换可能会失败，但如果对象的类如下则应该成功预期的模式）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:33:18.563

Option Strict On 告诉编译器忽略对引用隐式转换的简单引用。它是隐含的，因为 z9 被允许是 a`SomeBase(Of SomeBase(Of SomeDerived)`并且因为`SomeDerived`可以替换`SomeBase`编译器不确定你的意思是哪个。但是因为您在 z8 中明确表示`ISelf(of SomeDerived)`没有任何猜测。我怀疑如果您将 z9 更改为`ISelf(Of SomeDerived(Of SomeDerived)`这种歧义可能会消失。

然而，作为一种观点，这种嵌套会变得非常混乱，因为它会叠加在自身上，并且可能成为维护的噩梦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:44:35.117

我也觉得这很难理解。如果是这样的话：

```
Dim y9 As ISelf(Of ISelf(Of SomeBase))
y9 = z7 
```

`SomeDerived`想象从到 的许多“路线”会更容易`ISelf(Of ISelf(Of SomeBase))`。

看问题的例子，很明显：

```
SomeDerived "is a" ISelf(Of SomeDerived) 
```

通过声明。从这里，使用协方差，可以：

```
ISelf(Of SomeDerived) "is a" ISelf(Of
                                      ISelf(Of SomeDerived)
                                                           ) 
```

但是从第一个“方程”到这个方程有不止一种方法吗？一种方法似乎是将第一个方程插入自身，当然使用协方差。另一种方法可能是在第一个方程`ISelf(Of ...)`的两边加上苹果`"is a"`，然后使用某种传递性将原始方程与结果结合起来。

我真的不确定这些是否是不同的方式。这里是否存在某种关联性，就像在抽象（正式）数学方程中一样：

```
(a·a)*x  =  a*(a*x) 
```

也许我没有意义，这只是VB.NET编译器中的一个错误。如果`SomeBase`从示例中删除基类会发生什么？这种行为是否仍然存在？

还有[一个关于逆变错误](https://stackoverflow.com/questions/8647738/)的问题，它声称 VB.NET 过于严格。但也许过于严格比[C# 看起来的过于宽松](https://stackoverflow.com/questions/13568337/)要好。

# sql - 如何在 Datetime 中使用 NOT IN 或 Not Exist 自定义？

> ID：13805857
> 
> 赞同：1
> 
> 时间：2012-12-10T17:20:31.757
> 
> 标签：sql, sql-server, sql-server-2008, datetime, notin

我使用 2 个表，我希望第一个表而不是表 2 中的数据显示到数据库中。

**前任。** **第一个表“filesTA”* *

```
EmpNo | ChkDate
00001 | 2012-10-01 00:00:00.000
00001 | 2012-10-02 00:00:00.000
00001 | 2012-10-03 00:00:00.000
00001 | 2012-10-04 00:00:00.000
00001 | 2012-10-05 00:00:00.000 
```

**“工资日2”**

```
sEmpNo | sDate
00001 | 2012-10-01 00:00:00.000
00001 | 2012-10-02 00:00:00.000 
```

**当我在 2012-10-01 和 2012-10-05 之间选择日期时间时**

**我需要输出：**

```
sEmpNo | sDate
00001 | 2012-10-03 00:00:00.000
00001 | 2012-10-04 00:00:00.000
00001 | 2012-10-05 00:00:00.000 
```

**这段代码：**

```
SELECT tf.EmpNo,tf.ChkDate
FROM filesTA tf 
WHERE tf.ChkDate NOT IN(
SELECT sd2.sDate
FROM SalaryDay2 sd2
WHERE Convert(nvarchar(10),sd2.sDate,126) Between '2012-10-01' and '2012-10-05'
) 
```

**请帮我。谢谢你的时间。:)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:25:02.530

除非我误解了你的问题，否则你需要这样的东西：

```
SELECT tf.EmpNo,tf.ChkDate
FROM filesTA tf 
LEFT JOIN SalaryDay2 sd2 ON (sd2.EmpNo = tf.EmpNo AND sd2.ChkDate = tf.ChkDate)
WHERE sd2.EmpNo IS NULL  --you may want to add other condition as well 
```

（来自 filesTA 的记录，在 SalaryDay2 中没有相应记录）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:50:56.007

您可以`NOT EXISTS`用于此目的。它应该根据您的加入标准消除第二个表中不存在的行。

```
DECLARE @FirstDate DATE = '2012-10-01'
DECLARE @SecondDate DATE = '2012-10-05'
SELECT  *
FROM    FilesTA
WHERE   NOT EXISTS ( SELECT 1
                     FROM   SalaryDay2
                     WHERE  SalaryDay2.sDate = FilesTA.ChkDate 
                     -- If you want to check per EmpNo as well uncomment this line:
                     -- AND SalaryDay2.sEmpNo = FilesTA.EmpNo
)
        AND FilesTA.ChkDate BETWEEN @FirstDate
                            AND     @SecondDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:24:41.797

`BETWEEN`是一个包容的东西，基本上归结为

```
x BETWEEN a AND b 
```

与

```
(x >= a) AND (x <= b) 
```

如果我正确阅读了您的示例，则您需要一个非包含版本，您必须以艰难的方式写出：

```
yourdate > '2012-10-01' AND yourdate <= '2012-10-05'
         ^-- note: <, not <= 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T09:41:15.483

使用[**EXCEPT**](http://msdn.microsoft.com/en-us/library/ms188055%28v=sql.105%29.aspx)子句

```
SELECT EmpNo, ChkDate
FROM filesTA
EXCEPT
SELECT sEmpNo, sDate
FROM SalaryDay2
WHERE sDate BETWEEN '20121001' and '20121005' 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/e3c80/1/0)上的演示[](http://sqlfiddle.com/#!3/e3c80/1/0)

# apache - 在 html 页面中配置 apache 运行 run php

> ID：13805861
> 
> 赞同：2
> 
> 时间：2012-12-10T17:20:43.163
> 
> 标签：apache

如何让 apache 在我的 html 页面中解析 php 代码？我不想使用.htaccess。我已经添加：

```
 AddType application/x-httpd-php .html 
    AddType application/x-httpd-php .php 
```

在我的其中一个网站的 vhost 文件中，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:45:08.933

您是否使用 PHP 构建了 Apache 二进制文件？或者，如果您构建了 SO，请在 Apache 配置中引用它（例如：LoadModule php5_module modules/libphp5.so）？

为 PHP 使用 .html 时，请确保删除了“AddType text/html .html”，这样它就不会与 x-httpd-php 引用冲突。

仅供参考——您可以创建一个条目“AddType application/x-httpd-php .html .php”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-20T01:59:11.087

我在最新版本（Debian 10，Apache 2.4.25，PHP 7.0.33）中遇到了同样的问题
我的解决方案是编辑 php.config 文件，找到它我放：

```
find -iname php*.conf 
```

...在我的 debian 安装中，我在以下位置找到了它：

```
 /etc/apache2/mods-available/php7.0.conf 
```

然后，我在开始时介绍这些行：

```
<FilesMatch ".+\.html$">
    SetHandler application/x-httpd-php
</FilesMatch> 
```

它对我有用。

# html - 如何创建在屏幕上占 75% 的水平条，但随着屏幕大小的调整而延伸？

> ID：13805862
> 
> 赞同：0
> 
> 时间：2012-12-10T17:20:44.553
> 
> 标签：html, css

我想创建 3 个位于页面顶部的水平条。

我想要实现的是让条形图从屏幕边缘到页面宽度的 75% 左右。

顶栏右对齐，中间栏左对齐，底栏再次右对齐。

我想让条形图在页面的中间（大约 25% - 因此是 75% 的宽度）相互重叠，但是如果随后调整窗口大小，条形图需要在中间保持静态页面，但会拉伸，以便它们调整大小以保持与页面的边缘对齐。

我在这里有一个初始设置的例子：http: [//jsfiddle.net/headshot_harry/LsNby/2/](http://jsfiddle.net/headshot_harry/LsNby/2/)

但是正如您所看到的，当调整窗口大小时，条形图保持与页面边缘对齐，但它们在中间不是静态的。我需要它们调整大小或“拉伸”，同时保持屏幕中间的重叠完好无损。

下面的代码：

# HTML

```
<div id="headerBar1"></div>
<div id="gap"></div>
<div id="headerBar2"></div>
<div id="gap"></div>
<div id="headerBar3"></div>
<div id="content"></div>​ 
```

# CSS

```
#gap {
    width: 100px;
    height: 3px;
    border: 0px solid black;
}

#content {
    width: 600px;
    margin: 10px auto;
    background: #ccc;
    border: 1px solid black;
    height: 100px
}

#headerBar1 {
    height: 40px;
    background: blue;
    width: 400px;
    margin-left: auto;
}
#headerBar2 {
    height: 40px;
    background: blue;
    width: 400px;
}

#headerBar3 {
    height: 40px;
    background: blue;
    width: 400px;
    margin-left: auto;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:23:02.450

我认为你需要使用`%`而不是`px`

[http://jsfiddle.net/headshot_harry/LsNby/2/](http://jsfiddle.net/headshot_harry/LsNby/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:24:43.950

你将不得不使用`%`来实现这一点。`px`是固定大小并且`%`是静态的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T17:25:42.770

给`width:75%`每个头条。根据您的需要更改宽度百分比。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T17:26:17.370

你想要这样的东西吗？[http://jsfiddle.net/LsNby/6/](http://jsfiddle.net/LsNby/6/)

CSS：

```
.header-bar{
    height:40px;
    background:blue;
    margin-bottom:4px;
    position:relative;
}

.header-bar.left{
    right:25%;
}

.header-bar.right{
    left:25%;
} 
```

我在 html 中添加了类：

```
<div id="headerBar1" class="header-bar right"></div>
<div id="headerBar2" class="header-bar left"></div>
<div id="headerBar3" class="header-bar right"></div> 
```

# node.js - 重新编码嵌套的 for 循环以在 node.js 中使用异步

> ID：13805865
> 
> 赞同：2
> 
> 时间：2012-12-10T17:21:16.907
> 
> 标签：node.js, asynchronous

我是 Node.js 和异步编码的新手。我需要编写与 Node.js 一起使用的嵌套 for 循环的等价物。我知道我的问题与此处发布的问题非常相似：[nested loops asynchronusly in nodejs, next loop must start only after one getting completed](https://stackoverflow.com/questions/9715589/nested-loops-asynchronusly-in-nodejs-next-loop-must-start-only-after-one-gets-c)，但即使在详细查看该帖子之后，我也无法修复我的代码。

我正在使用 XML 提要。“解析器”使用 xml2js 包。如果我删除 sql 查询（为此我正在使用 mysql 节点包），循环将完全按预期运行，但是当我放入 sql 查询时，所有订单都会首先得到处理，输出“DONE”，然后查询失败，因为它试图重复查找最后一个订单的项目。

我尝试用 async.forEach 循环替换 for 循环，但这没有帮助。

任何有关如何以更符合节点习惯的方式重新编码的帮助或建议将不胜感激。

非常感谢！六个霍比特人

```
 parser.parseString(data, function (err, result) {
    if(err) throw(err);     
    var numOrders = result['Root']['Orders'][0]['Order'].length;
    var curr, currItem, currOrdId, items, sellersCode;
    console.log("Logging IDs of", numOrders, "orders");
    // for each order
    for (var j=0; j<numOrders; j++){
        //current order
        curr = result['Root']['Orders'][0]['Order'][j];         
        currOrdId = curr['OrderId'][0]          
        items = curr['Items'][0]['Item'];
        console.log("Order ID:", currOrdId, "--",items.length, "Items");
        // for each item
        for (var k=0; k<items.length; k++){
            currItem = items[k];
            sellersCode = currItem['SellersProductCode'][0];
            var sqlQuery = 'select data_index, fulltext_id, cataloginventory_stock_item.product_id from catalogsearch_fulltext inner join cataloginventory_stock_item where catalogsearch_fulltext.data_index like "' + sellersCode + '|%"' + 'and cataloginventory_stock_item.item_id = catalogsearch_fulltext.product_id';
            var query = connection.query(sqlQuery,function(err,rows,fields){
                if (err) throw(err);
                console.log("    Item ID          :",currItem['ItemId'][0]);
                console.log("    Full Text ID     :", rows[0]['fulltext_id']);
                console.log("    Product ID       :", rows[0]['product_id']);
            });
        }//for
    }//for
    console.log("DONE");
});//parseString 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:34:32.650

通过寻找使用`async.forEach`. 以下是您将如何修改此代码以使用它：

```
parser.parseString(data, function (err, result) {
    if(err) throw(err);
    var numOrders = result['Root']['Orders'][0]['Order'].length;
    var currOrdId, items, sellersCode;
    console.log("Logging IDs of", numOrders, "orders");
    // for each order
    async.forEach(result['Root']['Orders'][0]['Order'], function (curr, callback1) {
        currOrdId = curr['OrderId'][0];
        items = curr['Items'][0]['Item'];
        console.log("Order ID:", currOrdId, "--",items.length, "Items");
        async.forEach(items, function (currItem, callback2) {
            sellersCode = currItem['SellersProductCode'][0];
            var sqlQuery = 'select data_index, fulltext_id, cataloginventory_stock_item.product_id from catalogsearch_fulltext inner join cataloginventory_stock_item where catalogsearch_fulltext.data_index like "' + sellersCode + '|%"' + 'and cataloginventory_stock_item.item_id = catalogsearch_fulltext.product_id';
            var query = connection.query(sqlQuery,function(err,rows,fields){
                console.log("    Item ID          :",currItem['ItemId'][0]);
                console.log("    Full Text ID     :", rows[0]['fulltext_id']);
                console.log("    Product ID       :", rows[0]['product_id']);
                callback2(err);
            });
        }, callback1);
    }, function (err) {
        console.log("DONE");
    });
});//parseString 
```

的每次迭代都`async.forEach`必须在其所有异步处理完成后调用其回调参数。在这种情况下，您有两个级别，这使得您很难在脑海中跟踪，但这是相同的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:35:57.317

这是一个经典的闭环问题。您需要通过将 currItem 作为参数传递来打破闭包：

```
 for (var k=0; k<items.length; k++){
        currItem = items[k];
        sellersCode = currItem['SellersProductCode'][0];
        var sqlQuery = 'select data_index, fulltext_id, cataloginventory_stock_item.product_id from catalogsearch_fulltext inner join cataloginventory_stock_item where catalogsearch_fulltext.data_index like "' + sellersCode + '|%"' + 'and cataloginventory_stock_item.item_id = catalogsearch_fulltext.product_id';
        var query = connection.query(sqlQuery,(function(CI){
          return function(err,rows,fields){
            if (err) throw(err);
            console.log("    Item ID          :",CI['ItemId'][0]);
            console.log("    Full Text ID     :", rows[0]['fulltext_id']);
            console.log("    Product ID       :", rows[0]['product_id']);
          }
        })(currItem)); // Break closure by passing currItem as argument
    }//for 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T14:42:13.233

我意识到这是一篇旧帖子，但您可能会发现此功能很有用

```
eachKVAsync = function(elements,userInfo,onKeyValue,ondone) {
    var onDone = ondone;
    var ret = null;
    var done=false;
    var isArray = typeof elements.forEach===$f$; 
    var keys   = isArray ? null     : [], 
        values = isArray ? elements : [];

    if (keys) {
        for (var k in elements) {
            keys.push(k);
            values.push(elements[k]);
        }
    }

    var aborted=false;
    var endLoop = function (userInfo){
        aborted=true;
        if (onDone) {
            onDone(userInfo,aborted);
            onDone = null;
        }
    }

    var i = 0;
    var iterate = function (userInfo) {
        if (i < values.length) {
            var ix=i;
            i++;
            onKeyValue((keys?keys[ix]:i),values[ix],userInfo,iterate,endLoop);          
        } else {
            if (onDone) {
                onDone(userInfo,aborted);
                onDone = null;
                return;
            }
        } 
    } 

    iterate(userInfo);

}, 
```

使用示例

```
 eachKVAsync(
            elements, {
                aValue: 2004
            },
            function onItem(key, value, info, nextItem, endLoop) {
                if (value.isOk) {
                    info.aValue += value.total;
                    setTimeout(nextItem,1000,info);
                } else {
                    endLoop(info);
                }
            },
            function afterLastItem(info, loopEndedEarly) {
                if (!loopEndedEarly) {
                    console.log(info.aValue);
                }
            }
        ); 
```

# sql - SQL OVER (Partiton by) - 处理空值

> ID：13805867
> 
> 赞同：4
> 
> 时间：2012-12-10T17:21:23.377
> 
> 标签：sql, oracle, null

我有以下情况：

表员工：

```
First Name | Last Name | Department | Salary
-----------|-----------|------------|---------
John       | Doe       | Finance    | 20
John       | Doe       | R&D        | 20
John       | null      | Finance    | 20
John       | long      | Finance    | 20 
```

我想要每个（名字，姓氏）1行，除非我们的姓氏中有一个空值，然后我只想要1行（名字，空值）

对于上面的例子，结果是：

```
First Name | Last Name | Department | Salary
-----------|-----------|------------|---------
John       | null      | Finance    | 20 
```

但如果我没有那个记录，那么结果应该是：

```
First Name | Last Name | Department | Salary
-----------|-----------|------------|---------
John       | Doe       | R&D        | 20
John       | long      | Finance    | 20 
```

我想答案涉及一些 Partition By-s，但我不确定在哪里。

现在我来到了这个：

```
SELECT FirstName,LastName, DEPARTMENT,Salary,RK FROM 
(
select * from 
    SELECT EXT.*, 
    ROW_NUMBER() OVER(PARTITION BY EXT.FirstName,EXT.LastName 
    ORDER BY rownum ASC) AS RK
      FROM Employees EXT   
)
WHERE RK = 1 ; 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T17:43:43.813

您的问题出在 PARTITION 子句中。您需要每个有姓氏的名字，除非至少有一个姓氏为 NULL，在这种情况下，您只需要那些姓氏为 NULL 的名字。

这里的答案是使用[RANK()](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions141.htm#SQLRF00690)而不是 ROW_NUMBER()。RANK() 不创建连续列表；相反，具有相同值的行获得相同的排名。

```
select firstname, lastname, department, salary, rk 
  from ( select a.*
              , rank() over ( partition by firstname
                                  order by case when lastname is null then 0 
                                                else 1 
                                           end
                                           ) as rnk
           from employees a
                )
where rnk = 1 
```

这是通过使姓氏的存在而不是姓氏本身相关来实现的。

还有两点：

1.  您有一个没有括号的嵌套选择。这行不通。
2.  按 ROWNUM 排序没有意义。根据定义，rownum 按语句返回的顺序返回行，这意味着行将*始终*按照 ROWNUM 的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:39:44.250

像这样的东西：

```
SQL> create table person
  2  (
  3    fname varchar2(10),
  4    lname varchar2(10),
  5     dept  varchar2(10),
  6     sal   number
  7  );

Table created.

SQL> insert into person values ('John', 'Doe', 'Finance', 20);

1 row created.

SQL> insert into person values ('John', 'Doe', 'R&D', 20);

1 row created.

SQL> insert into person values ('John', '', 'Finance', 20);

1 row created.

SQL> insert into person values ('John', 'Long', 'Finance', 20);

1 row created.

SQL> insert into person values ('Paul', 'Doe', 'R&D', 30);

1 row created.

SQL> insert into person values ('Paul', 'Doe', 'Finance', 30);

1 row created.

SQL> insert into person values ('Paul', 'Long', 'Finance', 30);

1 row created.

SQL> select fname, lname, dept, sal
  2    from (select fname, lname, dept, sal,has_null,
  3                  row_number() over(partition by fname,
  4                                                  case when has_null = 'N' then lname else null end
  5                                    order by lname desc nulls first) rn
  6             from (select fname, lname,
  7                           nvl(max(case  when lname is null then 'Y'
  8                               end) over(partition by fname), 'N') has_null, dept, sal
  9                      from person))
 10   where rn = 1;

FNAME      LNAME      DEPT              SAL
---------- ---------- ---------- ----------
John                  Finance            20
Paul       Doe        R&D                30
Paul       Long       Finance            30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:38:01.010

该查询执行（相同）技巧，但执行得更好。

```
SELECT fname, 
       lname, 
       dept, 
       sal 
FROM   (SELECT fname, 
               lname, 
               dept, 
               sal, 
               First_value(lname) 
                 OVER( 
                   partition BY fname 
                   ORDER BY lname nulls first) null_domain, 
               Row_number() 
                 OVER ( 
                   partition BY fname, lname 
                   ORDER BY fname)             r 
        FROM   person) 
    WHERE  ( ( null_domain IS NULL 
           AND lname IS NULL ) 
          OR null_domain IS NOT NULL ) 
        AND r = 1; 
```

# arrays - 即使数组中只有一个元素，如何强制jettison写入数组？

> ID：13805871
> 
> 赞同：23
> 
> 时间：2012-12-10T17:21:30.600
> 
> 标签：arrays, xml, jettison

使用下面的简化示例：

正如预期的那样，我得到以下信息：

```
{"person":{"name":"john","tags":["tag1","tag2"]}} 
```

但是，如果我只设置一个标签，我会得到：

```
{"person":{"name":"john","tags":"tag1"}} 
```

我期待得到这个：

```
{"person":{"name":"john","tags":["tag1"]}} 
```

也就是说，jettison 已经移除了标签的数组，因为数组中只有一个元素。

我认为这是非常不安全的。

**即使只有一个元素，如何强制放弃写一个数组？**

注意：我知道还有其他替代方案可以替代抛弃，例如 StAXON。但是，我在这里问如何使用 Jettison 来实现这一点。请不要建议抛弃其他替代方案。

```
import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.*;

import java.io.*;
import javax.xml.bind.*;
import javax.xml.stream.XMLStreamWriter;
import org.codehaus.jettison.mapped.*;

public class JettisonTest {
    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Person.class);

        Person person = new Person();
        person.name = "john";
        person.tags.add("tag1");
        person.tags.add("tag2");

        Configuration config = new Configuration();
        MappedNamespaceConvention con = new MappedNamespaceConvention(config);
        Writer writer = new OutputStreamWriter(System.out);
        XMLStreamWriter xmlStreamWriter = new MappedXMLStreamWriter(con, writer);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.marshal(person, xmlStreamWriter);
    }
}

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
class Person {
    String name;
    List<String> tags = new ArrayList<String>();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-05T09:28:45.637

我发现了这个：[https ://blogs.oracle.com/japod/entry/missing_brackets_at_json_one](https://blogs.oracle.com/japod/entry/missing_brackets_at_json_one)

似乎在上下文解析器中添加一行以明确声明这`tags`是一个数组是这样做的方法；IE

```
props.put(JSONJAXBContext.JSON_ARRAYS, "[\\"tags\\"]"); 
```

NB：我对 Jettison 不熟悉，所以没有亲身经历来支持这一点；只有上述博客文章中的信息。

```
@Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext> {

    private JAXBContext context;
    private Class[] types = {ArrayWrapper.class};

    public JAXBContextResolver() throws Exception {
        Map props = new HashMap<String, Object>();
        props.put(JSONJAXBContext.JSON_NOTATION, "MAPPED");
        props.put(JSONJAXBContext.JSON_ROOT_UNWRAPPING, Boolean.TRUE);

        props.put(JSONJAXBContext.JSON_ARRAYS, "[\\"tags\\"]"); //STATE WHICH ELEMENT IS AN ARRAY

        this.context = new JSONJAXBContext(types, props);
    }

    public JAXBContext getContext(Class<?> objectType) {
        return (types[0].equals(objectType)) ? context : null;
    }

} 
```

# c++ - 如何使用 C++ 驱动程序在 MongoDB 中使用 UserException 处理数据类型错误

> ID：13805877
> 
> 赞同：0
> 
> 时间：2012-12-10T17:21:55.257
> 
> 标签：c++, mongodb

Windows 7 64 SP1 MongoDB 2.2.0 C++ 驱动程序 MSVS 2010

根据：

[http://api.mongodb.org/cplusplus/2.2.0/classmongo_1_1_b_s_o_n_element.html#a692f3eecb505eae2181eb938b7680fbe](http://api.mongodb.org/cplusplus/2.2.0/classmongo_1_1_b_s_o_n_element.html#a692f3eecb505eae2181eb938b7680fbe)

`Double()``UserException`（和类似的函数）应该“如果元素不是所需的类型，则抛出 a ”。

我的代码：

```
BSONObj a_document = BSON("a_string"<<"A string");

try
{
    a_document["a_string"].Double();
}
catch(mongo::UserException ue)
{
    cout << ue.toString() << endl;
} 
```

但它不会被抓住。Intead 断言：

```
Sun Dec 09 16:04:28 Assertion: 13111:wrong type for field (a_string) 2 != 1
Sun Dec 09 16:04:28 dev: lastError==0 won't report:wrong type for field (a_string) 2 != 1 
```

我究竟做错了什么？我想自己捕捉和处理数据类型异常。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:27:38.303

通过查看 cocumentation 和标题，我的感觉是文档此时不准确，或者使用了一些选项来禁用 MongoDB 的异常。

试试下面的代码：

```
BSONObj a_document = BSON("a_string"<<"A string");

try
{
    a_document["a_string"].Double();
}
catch(mongo::UserException& ue)
{
    cout << "UserException: " << ue.toString() << endl;
}
catch(mongo::MsgAssertionException& ex)
{
    cout << "MsgAssertionException: " << ex.toString() << endl;
}
catch(mongo::DBException& ex)
{
    cout << "DBException: " << ex.toString() << endl;
}
catch(std::exception& ex)
{
    cout << "std::exception: " << ex.what() << endl;
} 
```

查看实际抛出了哪个异常（如果有）。

# php - 使用闭包而不是 eval() 进行事件处理会更好吗？

> ID：13805880
> 
> 赞同：1
> 
> 时间：2012-12-10T17:22:13.433
> 
> 标签：php, event-handling

我正在为一个类创建一个事件处理程序，但我想知道使用闭包而不是评估代码是否会更好？

我使用 eval() 的唯一原因仅仅是因为它能够访问类中的所有内容（而且它真的非常不安全：D），但我不知道闭包是否可以。

如果我做了这样的事情：

```
<?php
    class SomethingCool {
        protected $handlers;

        public function addHandler($cmd, closure $func) {
            $this->handlers[$cmd][] = $func;
        }

        public function handle($cmd) {
            if(!isset($this->handlers[$cmd]))
                return false;
            foreach($this->handlers[$cmd] as $func)
                $func();
        }
    }
?>

<?php
    $wut = new SomethingCool();
    $wut->addHandler('lol', function() use($wut) {
                                $wut->handle('lol');
                            }
                    );
?> 
```

它会毫无错误地执行吗？我会自己测试它，但我目前无法测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:34:17.663

如果您使用 编写处理程序`eval`，您最终将编写如下代码：

```
$wut->addHandler('lol', '$this->handle(\'lol\');'); 
```

除了在编辑器中转义引号和语法高亮的明显可怕问题之外，这还引入了模糊依赖的问题。`$this`您的代码中指的是什么？它不像在代码中那样按字面意思工作，它取决于在特定上下文中进行评估。这使代码变得一团糟。

另一种方法是依赖注入：

```
$wut->addHandler('lol', function (SomethingCool $sc) {
    $sc->handle('lol');
}); 
```

调用此处理程序时，`SomethingCool`会将自身作为函数参数注入。这要健壮得多。这意味着您可以将此回调传递给其他上下文并在幕后做任何您想做的事情，回调不再依赖于在特定上下文中被评估。

或者，使用闭包：

```
$wut->addHandler('lol', function () use ($wut) {
    $wut->handle('lol');
}); 
```

这与您确定您的依赖来自何处并知道您可以依赖它具有相同的好处。

所以是的，*任何事情*都比`eval`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:32:48.797

为什么不将您的实例传递`SomethingCool`给每个处理程序？

```
public function handle($cmd) 
{
    if (!isset($this->handlers[$cmd])) {
        return;
    }
    foreach ($this->handlers[$cmd] as $func)
        $func($this); // pass ourself to each handler
    }
}

$wut->addHandler('lol', function(SomethingCool $obj) {
    // $obj refers to the SomethingCool instance
});

$wut->handle('lol'); 
```

顺便说一句，如果您还希望能够删除处理程序，您也可以使用`SplObjectStorage`每个命令类别。

# python - 空列表是否等于无？

> ID：13805882
> 
> 赞同：14
> 
> 时间：2012-12-10T17:22:16.380
> 
> 标签：python, python-3.x, python-2.7, ironpython

> **可能重复：**
> [为什么当“if not []”成功时“[] == False”评估为 False？](https://stackoverflow.com/questions/10440792/why-does-false-evaluate-to-false-when-if-not-succeeds)

根据python的三元运算符，我是python新手

```
>>> 'true' if True else 'false'  true
   true 
```

我期待下面的代码输出为 [] 因为 [] 不等于 None

```
>>> a=[]
>>> a==None
False
>>> a if a else None
None 
```

如果我错了，请纠正

谢谢盒马

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T17:33:01.503

空列表`[]`不**等于**。`None`

但是，它**可以**评估为`False`——也就是说，它的“真实性”值为`False`. （请参阅 OP 上留下的评论中的来源。）

因为这，

```
>>> [] == False
False
>>> if []:
...     print "true!"
... else:
...     print "false!"
false! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:04:58.280

`None`是 the 的唯一实例，`NoneType`通常用于表示没有价值。在您的示例中发生的情况是，在布尔上下文中获取的空列表评估为`False`，条件失败，因此执行 else 分支。解释器做了一些事情：

```
>>> a if a else None
    [] if [] else None
    [] if False else None
None 
```

这是另一个有用的讨论`None`：[not None test in Python](https://stackoverflow.com/questions/3965104/not-none-test-in-python)

# c++ - 结合 sigc 库使用 lambda

> ID：13805883
> 
> 赞同：7
> 
> 时间：2012-12-10T17:22:17.537
> 
> 标签：c++, c++11, lambda, gtkmm, libsigc++

我想在 gtk++ 中使用与 goocanvas 相关的 lambda 表达式。根据我的理解，这意味着我必须能够将我的 lambda 放入 sigc++ 函子中。

我尝试过这样的事情：

```
sigc::slot<bool,  const Glib::RefPtr<Goocanvas::Item>& , GdkEventMotion* > slot2=
    [](  const Glib::RefPtr<Goocanvas::Item>& item, GdkEventMotion* ev)->bool
    {
        cout << "Lambda " << endl; return false;
    };

((Glib::RefPtr<Goocanvas::Item>&)item1)->signal_motion_notify_event().connect( slot2); 
```

但这不会编译。

有没有机会让 sigc 直接与 lambdas 或更好的 gtkmm 一起工作而无需 sigc++ 中间体:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T03:32:32.943

对于没有参数的 void 返回函数/方法，它非常简单，例如（gcc 4.6、4.7）：

```
 fileButton.signal_pressed().connect([this]{on_file_button_clicked();}); 
```

不幸的是，我无法获得值返回或参数获取方法来编译，并且不得不求助于`sigc::mem_fun()`这些方法。最近似乎有一些活动可以解决这个问题，例如，[这个 commit](http://git.gnome.org/browse/libsigc++2/commit/?id=2da0db61029ca85062b164d37ca6c8af142f4851)。如果您有 sigc++ 2.2.11 或更高版本，您可以尝试定义`SIGC_FUNCTORS_DEDUCE_RESULT_TYPE_WITH_DECLTYPE`，但我不知道它的效果如何。

同样相关的是[这个错误报告](https://bugzilla.gnome.org/show_bug.cgi?id=672555)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T07:34:52.033

我发现以下代码可以完成这项工作。我不知道它如何与 sigc++ lib 交互，但我可以将它用于简单的情况。也许其他人可以看看它。

```
 #include <type_traits>
            #include <sigc++/sigc++.h>
            namespace sigc
            {   
                template <typename Functor>
                    struct functor_trait<Functor, false>
                    {   
                        typedef decltype (::sigc::mem_fun (std::declval<Functor&> (), 
                                    &Functor::operator())) _intermediate;

                        typedef typename _intermediate::result_type result_type;
                        typedef Functor functor_type;
                    };  
            } 
```

更新：Libsigc 现在无需任何额外的用户代码即可处理lambas。如果使用任何当前版本，则必须删除上述代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-29T10:55:22.270

使用[gtkmm helloworld 示例的演示：](https://developer.gnome.org/gtkmm-tutorial/stable/sec-helloworld.html.en)

```
#include "helloworld.h"
#include <iostream>

HelloWorld::HelloWorld()
    : m_button("Hello World")  // creates a new button with label "Hello World".
{
    // Sets the border width of the window.
    set_border_width(10);

    // When the button receives the "clicked" signal, it will call the
    // on_button_clicked() method defined below.
    m_button.signal_clicked().connect(
        sigc::mem_fun(*this, &HelloWorld::on_button_clicked));

    m_button.signal_clicked().connect([=]() { std::cout << "hello lambda\n"; });

    // This packs the button into the Window (a container).
    add(m_button);

    // The final step is to display this newly created widget...
    m_button.show();
}

HelloWorld::~HelloWorld() {}

void HelloWorld::on_button_clicked() {
    std::cout << "hello method" << std::endl;
} 
```

拉姆达有效。

# python - python类子类或实例

> ID：13805884
> 
> 赞同：1
> 
> 时间：2012-12-10T17:22:18.897
> 
> 标签：python, class, inheritance, instance, subclass

这是我使用 python 类和子类的第一个示例。这里的一个问题是属性 ParentUI 被覆盖。

```
class OptUI(object):
def __init__(self, ParentUI):
    self.ParentUI = ParentUI

class ListUI(object):
    def __init__(self, ParentUI):
        self.ParentUI = ParentUI

class Window(OptUI, ListUI):
    MainFrame = "MainFrame"
    TestFrame = "TestFrame"
    def __init__(self):
        OptUI.__init__(self, self.MainFrame)
        ListUI.__init__(self, self.TestFrame) 
```

如果我在 Window 类中使用实例而不是继承，则有一个解决方案。

```
class Window(object):
    MainFrame = "MainFrame"
    TestFrame = "TestFrame"
    def __init__(self):
        self.OUI = OptUI(self.MainFrame)
        self.LUI = ListUI(self.TestFrame) 
```

在第二种情况下，我有一个属性 ParentUI 的准命名空间。那么这在实践中是一个好方法吗？这是应该如何解决的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:10:04.127

我认为你需要考虑你的类是如何相互关联的，然后用它来确定代码的结构。

继承意味着两个类之间的 IS-A 关系。也就是说，派生类*的*实例是基类的实例。在您的原始代码中，`Window`该类试图从两者继承`OptUI`and `ListUI`，如果这两者可以以有意义的方式重叠并且一个`Window`对象可以同时*是*两者，这可能是有意义的。但是，由于基类都希望有一个`ParentUI`具有不同值的变量，因此同时成为它们可能没有意义（尽管它也可能只是`OptUI`or`ListUI`类的设计缺陷）。您应该对此得出自己的结论，因为我不知道您的课程的实际含义。

另一方面，包括 UI 类的实例（称为“组合”）并没有说明`Window`该类应该具有哪些接口。它暗示了一种 HAS-A 关系，因为每个`Window`实例*都有*一个`OptUI`实例和一个`ListUI`实例。如果这比 IS-A 关系更有意义，那么组合绝对是要走的路。

做其中的一些也可能是有意义的。也就是说，从其中一个 UI 类继承，同时包含另一个的实例。该`Window`实例可能*是*一个`OptUI`实例，同时*拥有*一个`ListUI`实例。

# hadoop - 如何在不使用 java 的情况下将数据放入 Hbase

> ID：13805888
> 
> 赞同：1
> 
> 时间：2012-12-10T17:22:23.440
> 
> 标签：hadoop, hbase, apache-pig

有没有办法从文件中读取数据并将它们放入 Hbase 表而不使用任何 java？我试图通过使用从猪脚本存储数据

`sample = LOAD '/mapr/user/username/sample.txt' AS (all:chararray);` `STORE deneme INTO 'hbase://sampledata' USING org.apache.pig.backend.hadoop.hbase.HBaseStorage('mysampletable:intdata');`

但这给出了这个错误信息：

> > 错误 org.apache.pig.tools.grunt.Grunt - 错误 2998：未处理的内部错误。org/apache/hadoop/hbase/filterWritableByteArrayComparable
> > 
> > 错误 org.apache.pig.tools.grunt.Grunt java.lang.NoClassDefFoundError: org/apache/hadoop/hbase/filter/WritableByteArrayComparable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:54:41.053

Pig 似乎是将数据导入 HBase 的好主意。检查 Armon 关于设置`$PIG_CLASSPATH`.

将数据批量加载到 HBase 的另一种可能性是使用特色工具，如`ImportTsv`（制表符分隔值）和`CompleteBulkLoad`.

[http://hbase.apache.org/book/ops_mgt.html#importtsv](http://hbase.apache.org/book/ops_mgt.html#importtsv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:36:30.850

嗯，有[Stargate](http://wiki.apache.org/hadoop/Hbase/Stargate) REST 接口，它可以从任何语言中使用。它并不完美，但值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:48:27.263

您只需要确保 $PIG_CLASSPATH 也指向 hbase.jar

# python - list[:] = process_list(list) 在 python 中做了什么？

> ID：13805895
> 
> 赞同：2
> 
> 时间：2012-12-10T17:22:43.680
> 
> 标签：python, python-2.7

> **可能重复：**
> [python 中的 list 和 list[:] 有什么区别？](https://stackoverflow.com/questions/4081561/what-is-the-difference-between-list-and-list-in-python)

我是 python 的新手，所以我遇到了无法找到以下问题的答案的情况。

这在python中意味着什么？

```
l[:] = process_list(l) 
```

`l`是类型`list`

基本上我有一个全局声明列表，我想根据 process_list 方法的响应来修改它（用新值覆盖旧值）。当我这样尝试时：

```
l = process_list(l) 
```

我明白了：`Unresolved reference 'l'`

你能解释一下有什么区别吗？如果我目前使用的第一种方法是一个好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:28:02.807

在函数中，对可能是局部变量的名称的赋值会通过该名称创建一个局部变量，即使它隐藏了一个全局变量：

```
a = None
def foo():
    a = 5  # local 'a' shadows global 'a' 
```

切片赋值是修改，不是赋值，所以名称继续指全局：

```
a = [1, 2, 3]
def foo():
    a[:] = [5]  # modifies global 'a' 
```

发生这种`Unresolved reference`情况是因为通过创建一个遮蔽全局的局部变量，不再可以看到全局。做你想做的另一种方法可能是使用`global`：

```
a = None
def foo():
    global a
    a = 5  # rebinds global 'a' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:26:44.033

`list[:] = whatever` 将更改现有列表的内容

（而不是将其替换为`list = whatever`）...顺便说一句，这`list`是一个可怕的变量名...

# snmp - Snmp++ (v3.2) 通过 TCP 接收通知

> ID：13805896
> 
> 赞同：1
> 
> 时间：2012-12-10T17:22:44.773
> 
> 标签：snmp

我正在尝试使用 snmp++ V3.2 api 实现一个简单的 NMS。目的是通过 TCP 接收 SNMP 通知。

问题是我只通过 UDP 接收通知......我在 java 中使用 SNMP4J API 实现了一个代理，但只有当我通过 UDP 发送时才有效。

我已经搜索了示例，但我只找到代理通过 UDP 向 snmp++ 管理器发送陷阱/通知的示例......

我还发现了这个： http: [//lists.agentpp.org/pipermail/agentpp/2005-October/003196.html](http://lists.agentpp.org/pipermail/agentpp/2005-October/003196.html)，可能 TCP 通信还没有在 SNMP++ 中实现？

最大的问题是，snmp++ 管理器可以通过 TCP 接收警报吗？如果是的话，有人有一个例子/教程给我看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-19T03:36:24.777

SNMP over TCP 在[RFC3430](https://www.rfc-editor.org/rfc/rfc3430)中定义为实验标准。它没有被广泛采用，并且基于它的常见问题 SNMP++ 根本不支持它，

[http://oosnmp.net/confluence/pages/viewpage.action?pageId=7766018](http://oosnmp.net/confluence/pages/viewpage.action?pageId=7766018)

# objective-c - [ self init ] 和 self = [ super init ] 之间的区别

> ID：13805898
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:22:49.320
> 
> 标签：objective-c, ios

如果我不覆盖“init”方法，我想知道 init 系列方法之间`[ self init ]`有什么不同 。`self = [ super init ]`

为什么人们通常使用`self = [ super init ]`init 系列方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:26:35.210

`[ self init ]`表示您正在初始化 self 类。

和

`self = [ super init ]`表示初始化超类，并将返回的地址/内存位置设置为自身类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:28:32.037

人们习惯于`self = [ super init ]`所有父类最多`NSObject`，所以这很重要

通常人们使用 `if (self = [ super init ]) {... return self;}`以防万一`self == nil`，但我从来没有这样的事情

`[self init]`是不对的，因为您只是忽略了父类的初始化，这可能是导致错误的原因

# mongodb - Zend MongoDB 实现

> ID：13805900
> 
> 赞同：2
> 
> 时间：2012-12-10T17:22:57.980
> 
> 标签：mongodb, zend-framework2

我正在尝试将 Zend 与 MongoDB 集成。我想我快到了，但我需要一些帮助才能完成任务。我对 zend 和 mongo 都是新手，但对 PHP 和 MySQL 有相当的经验。

一些细节：

我的 Zend 项目基于[http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)上的骨架教程。这在我的计算机上运行良好，但基于 mysql。

我已经安装了 MongoDB。我可以在命令行上编写 nosql 并且可以在 PHP 脚本中实例化 MongoClient 对象，所以这些东西似乎可以工作并相互交谈。

我想使用 mongo 而不是 mysql，并且我已经实现了 Doctrine。我不知道 Doctrine 做了什么，我已经通过几次搜索尝试找到如何在 zend 中运行 mongo 命令。这些事实使我得出结论，我不知道自己在做什么。

所以对于我的问题的细节：

*   据我了解，我应该在某处实例化一个 mongo 对象。如果是这样，我应该把实例化放在zend的哪里？
*   如果不是，大概我需要 mongo 对象的现有实例来从模型类内部运行各种查找/保存命令，所以如果这是真的，我如何访问现有的 mongo 对象？

感谢您的帮助，同样欢迎澄清问题。

**为澄清起见，于 2012 年 13 月 12 日编辑。**

有了给定的答案，我似乎走在了正确的轨道上，我可以进一步澄清我需要什么：查看下面链接的[Doctrine Documentation](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/tutorials/getting-started.html)，我仍然不清楚应该在哪里进行文档管理器实例化。我本来希望它进入一个更通用的位置，该位置在每个页面加载时运行。此外，我发现的大多数教程似乎都引用了与骨架应用程序不同的文件结构，所以当他们说将某些东西放在某些地方时，我不确定他们的意思。例如，我不断看到对引导文件的引用，但我唯一的引导文件位于测试目录中。

我的问题是：

*   如果我只是想打印集合中的所有文档，我需要在 indexAction 函数中添加什么代码（当我转到正确的 URL 时它肯定会响应）？
*   我是否需要在其他地方添加任何其他代码，如果需要，在哪里以及什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:51:03.530

有用于 mongoDB 访问的出色模块[教义-mongo-odm-module 。](https://github.com/doctrine/DoctrineMongoODMModule)只需添加到 composer.json

```
"require": {   
....
"doctrine/doctrine-mongo-odm-module": "dev-master",
.... 
```

[教义文档](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/tutorials/getting-started.html)应该有助于如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:41:18.210

这些是不同的位以及它们的作用，自下而上地工作：

**mongodb**：数据持久化

**教义ODM**：对象文档映射器。这会将 mongo 文档映射到 php 对象。这意味着您不必担心直接对 mongo 进行任何调用 - 您只需使用普通的旧 php 对象。要使用doctrineODM，您需要定义您的模型类，并掌握使用DocumentManager 的窍门——建议，Doctrine 文档非常好。

**学说**MongoODMModule ：将学说与zf2集成的模块。它的主要作用是允许您使用 zf2 config 样式配置学说，并允许您通过 zf2 ServiceManager 访问 DocumentManager。（我也做了很多其他的事情，但它们是主要的）

**zf2 (mvc)**：让您定义一个接口，以便其他东西（如 Web 客户端）可以操作您的文档。

# python - Python 日志记录：dictConfig

> ID：13805905
> 
> 赞同：3
> 
> 时间：2012-12-10T17:23:23.433
> 
> 标签：python, logging

我正在尝试使用配置文件来配置 Python 日志记录，但也在加载 dict 配置后添加处理程序。所以我的配置文件就像

```
version: 1
formatters:
  default_formatter:
    format: '%(asctime)s : %(levelname)s : %(message)s'
    datefmt: '%d-%b-%Y %H:%M:%S'
  plain_formatter:
    format: '%(message)s'
handlers:  
  console_default_handler:
    class: logging.StreamHandler
    level: INFO
    formatter: default_formatter
    stream: ext://sys.stdout  
root:
  level: INFO
  handlers: [console_default_handler] 
```

然后在代码中 - 我做

```
log_config_dict=yaml.load(open(log_config_file, 'r'))
logging.config.dictConfig(log_config_dict) 
```

我想以这种方式添加记录器 -

```
fhandler1=logging.FileHandler(log_file_name,mode="w")
fhandler1.setFormatter(log_config_dict['formatters']['plain_formatter'])
fhandler1.setLevel(logging.DEBUG) 
```

这是行不通的。请问有什么方法可以捕获 dictConfig 中定义的获取值，以便在我的手动日志配置中使用它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:45:40.750

哦，我想通了。我需要做的是

```
formatter =logging.Formatter(log_config_dict['formatters']['plain_formatter']['format'])             
fhandler1.setFormatter(formatter) 
```

所以，我需要创建一个 Formatter 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-31T14:07:29.410

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import logging
import logging.handlers
from logging.config import dictConfig

logger = logging.getLogger(__name__)

DEFAULT_LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
}
def configure_logging(logfile_path):
    """
    Initialize logging defaults for Project.

    :param logfile_path: logfile used to the logfile
    :type logfile_path: string

    This function does:

    - Assign INFO and DEBUG level to logger file handler and console handler

    """
    dictConfig(DEFAULT_LOGGING)

    default_formatter = logging.Formatter(
        "[%(asctime)s] [%(levelname)s] [%(name)s] [%(funcName)s():%(lineno)s] [PID:%(process)d TID:%(thread)d] %(message)s",
        "%d/%m/%Y %H:%M:%S")

    file_handler = logging.handlers.RotatingFileHandler(logfile_path, maxBytes=10485760,backupCount=300, encoding='utf-8')
    file_handler.setLevel(logging.INFO)

    console_handler = logging.StreamHandler()
    console_handler.setLevel(logging.DEBUG)

    file_handler.setFormatter(default_formatter)
    console_handler.setFormatter(default_formatter)

    logging.root.setLevel(logging.DEBUG)
    logging.root.addHandler(file_handler)
    logging.root.addHandler(console_handler)

[31/10/2015 22:00:33] [DEBUG] [yourmodulename] [yourfunction_name():9] [PID:61314 TID:140735248744448] this is logger infomation from hello module 
```

我认为带功能的配置日志更方便。

# android - Activity setContent() 到另一个布局文件

> ID：13805908
> 
> 赞同：0
> 
> 时间：2012-12-10T17:23:28.803
> 
> 标签：android

我有activity_main，这是我的活动中的默认布局，我有framelayout，它显示不同布局的片段，是否可以将不同的布局textview连接到我的活动中的setText（）？如何从活动连接到这个片段 xml 布局？

```
activity_main
   frameLayout
      fragment 1 xml
      fragment 2 xml
   /frameLayout 
```

活动.java

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    dirShow("a");
}

void dirShow(String s) {
    setContentView(R.layout.fragment1);
    textPath = (TextView) findViewById(R.id.path_text);
    textPath.setText(s);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:33:22.993

您不应在活动中多次调用 setContentView。内容视图是整个活动布局。如果要更改布局，正确的方法是更改​​片段或活动，并让新活动或片段显示新布局。

如果您不尝试更改布局，则只需将所需的 TextView 放在您设置的第一个布局中。发布您的布局文件并告诉我们您正在尝试做什么可能会让我们帮助您实现您想要的。

编辑：如果我正确理解您更新的问题，您正在使用[Fragments](http://developer.android.com/guide/components/fragments.html)。如果是这种情况，请在 Fragments 的 onCreateView() 函数中调用 dirShow() 函数，而不是调用活动的 onCreate() 函数。

如果您只是在问题中错误地使用了术语片段，我建议您改用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:28:09.677

您想使用 include 标记将另一个 xml 包含到您的主 xml 中，并根据需要在 textview 上设置文本。

# java - 如何使用 Swing 在 GUI 上显示多个标签

> ID：13805909
> 
> 赞同：2
> 
> 时间：2012-12-10T17:23:29.087
> 
> 标签：java, swing

我在 java 中创建了一个窗口，在其中添加了一个列表框和一个提交按钮。用户可以从列表框中选择一个项目/它，他/她应该点击提交按钮。

提交后，将根据用户名、项目和唯一编号生成唯一 ID。因此，对于列表中存在的每个项目，都会有一个唯一的 id。此外，我使用唯一 ID（用户名、项目和唯一编号）创建标签。

现在，问题是，当同一个用户在列表前面选择多个项目时，唯一 id 会被覆盖。

我的要求是在 UI 上显示所选项目（由同一用户）的所有唯一 ID。

编辑

`label.setText("Unique Id:"+Uid+""+usernme+""+jcombox.getselecteditem.to string())`这就是我如何成为框架的一个标签。此标签对于列表框中的项目是唯一的。因此，对于用户选择的多个项目，如何将这些标签显示/添加到框架/窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:47:03.540

对您的密钥使用辅助序列号。您检查该项目是否存在于列表中，如果存在则增加此 seqnum 并将其添加到您的密钥中，如果不只是添加填充 0。或者将此 seq 编号用作始终在您的密钥上的全局“计数器”以进行任何“提交” .

您可以通过扩展 DefaultListModel 来实现您自己的 ListModel，以实现这些想法。

我可能错过了解释您的问题:) 但如果没有，这将很简单。

# python - 分配错误前的参考

> ID：13805910
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:23:29.003
> 
> 标签：python, reference, variable-assignment

> **可能重复：**
> [在python中的赋值错误之前引用](https://stackoverflow.com/questions/855493/referenced-before-assignment-error-in-python)

所以我开始尝试自学一点 Python，我已经遇到了我的第一个错误。
当我尝试在 else 语句中增加“猜测”（我希望能够显示它进行了多少猜测）时，我在分配错误之前得到了一个参考，我不明白，因为我已经分配了“猜测”一个函数开始前的值。

这是我的代码 -

```
import random

def guessFunc():
    guess = input("Guess a number between 1 and 10: \n")
    guess = int(guess)

    if guess == num:
        print("Congratulations, you got it right")

    else:
        guesses += 1 
        guessFunc()

num = random.randint(1,10)
guesses = 1
guessFunc() 
```

更让我困惑的是，如果我把

```
print(guesses) 
```

在我的函数开始时，它将打印我分配的“猜测”值。我真的只是不明白该函数如何查看该值并可以打印它，但无法更改它。

如果有人可以向我解释为什么会发生这种情况，我将非常感激，我猜这是本地/全球的事情，但我真的不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:26:09.820

Python 作用域允许来自外部作用域的值落入读取范围。因此，您可以按照`print()`语句中的描述从函数访问和使用全局变量。

但是，当您要分配时，您需要使用`global`语句告诉 Python 您要分配给全局值，而不是局部值，这意味着如果您`global guesses`在尝试分配之前这样做，它将起作用。由于您不在这里，它会看到分配，因此假定您要创建一个局部变量，但是当您这样做`+=`时，它需要新局部变量的现有值，这当然不存在，从而导致错误.

请注意，全局变量通常被认为是不好的做法，最好避免使用，因为它们很难看出函数将要做什么。让函数返回一个值并使用它要好得多。

做你想做的更好的方法是这样的：

```
import random

def guessFunc():
    guesses = 0
    while guess != num:
        guess = input("Guess a number between 1 and 10: \n")
        guess = int(guess)
        guesses += 1 
    print("Congratulations, you got it right")
    return guesses

num = random.randint(1,10)
guesses = guessFunc() 
```

首先，我们使用`while`循环来重复操作，因为递归在 Python 中没有优化，然后我们返回从函数执行的猜测次数，并将其分配给`guesses`而不是使用全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:26:33.107

函数中的使用`guesses`是指该名称的局部变量。而且由于您没有分配这样的局部变量，因此当您尝试从中读取时程序会失败。

您需要告诉解释器您要引用全局变量。

```
def guessFunc():
    global guesses
    guess = input("Guess a number between 1 and 10: \n")
    guess = int(guess)

    if guess == num:
        print("Congratulations, you got it right")

    else:
        guesses += 1 
        guessFunc() 
```

# asp.net-mvc - KnockoutJs & Asp.Net MVC 4 - 更改视图模型取决于所选类型

> ID：13805911
> 
> 赞同：0
> 
> 时间：2012-12-10T17:23:33.043
> 
> 标签：asp.net-mvc, knockout.js, knockout-mvc

我正在使用 MVC 4 和 KnockoutJs，但我遇到了这种情况

我有一个对象（称为父对象），它有一个名为 ChildType 的属性

**_ 如果 ChildType = 1 ---> 我将使用 ViewModel-A 渲染 Partial-A
_ 如果 ChildType = 2 ---> 我将使用 ViewModel-B 渲染 Partial-B**

我没有找到太多关于我的问题的文章或答案。最重要的是，他们建议使用主视图模型，不知何故这是最好的方法，但如果我们有超过 2 个子视图模型，则意味着主视图模型太大了。

所以，请帮我实现它。

问候..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:37:35.097

使用模板绑定

```
<!-- ko template: { name: childTemplate, data: childModel } -->
<!-- /ko --> 
```

childTemplate 是一个 observable，可以是计算的或标准的 observable，它将返回一个带有要渲染的模板名称的字符串。childModel 一个可观察的或计算的，将返回选定的 childModel

此外，如果 childModel 可以为 null，那么您需要向模板绑定添加一个 if 检查，否则您将收到 null 错误

```
<!-- ko template: { name: childTemplate, data: childModel, if: childModel } -->
<!-- /ko --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:13:03.733

使用模板绑定：

```
 <!-- ko template: { name: templateName, data: modelName, if: modelName } -->
 <!-- /ko --> 
```

然后，在您的视图模型中添加以下 observable：templateName 和 modelName。

您的视图模型可能如下所示：

```
var parent = {
    ChildType: ko.observable(1),
    templateName: ko.observable('Partial-A'),
    modelName: ko.observable(ViewModelA)
}; 
```

接下来要做的是根据 ChildType 值设置 templateName 和 modelName。

```
var option = parent.ChildType();

if(option == 1)
{
      parent.modelName(null);
      parent.templateName('Partial-A');
      parent.modelName(ViewModelA);
 } 
```

在更改模板名称之前将 modelName 设置为 null 非常重要，因为 ko 将无法应用绑定。

接下来，您只需定义模板，如下所示：

```
<script id="Partial-A" type="text/html">  
 // your code goes here
</script> 
```

# c# - 在 Asp.Net Web API 中实现自定义模型绑定器时出错

> ID：13805915
> 
> 赞同：3
> 
> 时间：2012-12-10T17:23:46.793
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, custom-model-binder

我被这个非常奇怪的问题困住了。
我有一个名为`AttendanceController`派生的 API 控制器，它又是从 这里`APIControllerFA`派生的代码`ApiController`

```
public class AttendanceController : ApiControllerFA
    {
        public HttpResponseMessage PostAttendance([ModelBinder(typeof(AttendanceRegistrationModelBinder))]AttendanceRegistrationModel model)
        {
            //checking model state for errors
            //throw new Exception("Just to throw an error ");

            ........... 
```

从 PostAttendance 方法中可以看出，我有一个自定义`ModelBinder`名称`AttendenceRegistrationModelBinder`，这是代码

```
public class AttendanceRegistrationModelBinder :  DefaultModelBinder
    {

        protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
        {
            if (propertyDescriptor.Name == "formJson")
            {
                string val = bindingContext.ValueProvider.GetValue(propertyDescriptor.Name).AttemptedValue;
                dynamic jsonVal = JsonConvert.DeserializeObject(val);
                propertyDescriptor.SetValue(bindingContext.Model, jsonVal);
                return;
                //SetProperty(controllerContext, bindingContext,propertyDescriptor,jsonVal);
            }
            base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
        }

    } 
```

但是当我尝试使用 Fiddler 访问这个控制器时。我收到一条错误消息

```
Could not create a 'IModelBinder' from 'AttendanceRegistrationModelBinder'. Please ensure it derives from 'IModelBinder' and has a public parameterless constructor 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T10:00:18.333

您遇到的问题是您使用的是 MVC 模型绑定器而不是 WebApi。看起来您是从`System.Web.Mvc.DefaultModelBinder`which implements派生的`System.Web.Mvc.IModelBinder`。

要为 WebApi 创建自定义模型绑定器，您需要实现`System.Web.Http.IModelBinder`.

看看 WebApi 中可用的模型绑定器，例如 CompsiteModelBinder [http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/f079d76e57b5#src%2fSystem.Web.Http%2fModelBinding%2fBinders%2fCompositeModelBinder.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/f079d76e57b5#src%2fSystem.Web.Http%2fModelBinding%2fBinders%2fCompositeModelBinder.cs)。

一些有用的资源[here](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx)和[here](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)。

您是否考虑过为您的 Json 表单字段使用[JToken ，这可能在没有自定义活页夹的情况下工作。](http://www.hanselman.com/blog/TinyHappyFeatures2ASPNETWebAPIInVisualStudio2012.aspx)

# wpf - 针对 Linq 实体属性的验证

> ID：13805917
> 
> 赞同：0
> 
> 时间：2012-12-10T17:24:03.140
> 
> 标签：wpf, validation, xaml, linq-to-sql, mvvm

我有一个 linq 实体，包装在我的 ViewModel 中的一个属性中：

```
public NA_Header Na_Header
{
    get
    {
        _na_header=Job.NA_Headers.FirstOrDefault();
        return _na_header;
    }
    set { _na_header = value; }
} 
```

我在我的视图中使用这个 Na_Header 属性来更新我的 GUI (xaml) 中的字段：

```
<Toolkit:DateTimePicker BorderBrush="Gray"  Grid.Column="1" Grid.Row="1"  Margin="5" VerticalAlignment="Top" Value="{Binding Path=Na_Header.JobStart, Mode=TwoWay, Converter={StaticResource thisNullDateConverter}, ValidatesOnDataErrors=True}"  Format="Custom" FormatString="MMM dd yyyy"/>
<Toolkit:DateTimePicker BorderBrush="Gray"  Grid.Column="1" Grid.Row="2"  Margin="5" VerticalAlignment="Top" Value="{Binding Path=Na_Header.JobEnd, Mode=TwoWay, Converter={StaticResource thisNullDateConverter},ValidatesOnDataErrors=True}" Format="Custom" FormatString="MMM dd yyyy"/> 
```

请注意，我想针对 Na_Header.JobStart 和 Na_Header.JobEnd 验证此对象中的 2 个属性（这些是日期）。我将每个属性的 ValidatesOnDataErrors 设置为 true。

同样在 ViewModel 中，我实现了 IDataError：

```
public string this[string columnName]
{
    get
    {
        if (columnName == "Na_Header")
        {
            if (Na_Header.JobStart > Na_Header.JobEnd)
                return "Job Stat Date must be an earlier date than Job End Date";
        }
        return "";
    }
}

public string Error
{
    get { throw new NotImplementedException(); }
} 
```

不幸的是，当对 JobStart 或 JobEnd 属性进行更改时，不会触发 DataError。我不认为我需要 NotifyPropertyChanged 因为它是一个 linq 实体（PropertyChanged 的​​东西是自动完成的）

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:02:23.300

但是你没有你所说的 Linq 实体。

IEnumerable First() 实际上返回一个类型为 T 的对象，尽管您没有显示字段 _na_header 的定义。我猜那是 Job/Na_Job。

我建议你有几个选择。

1.  如果您的 Job 类是 ViewModel 命名空间的一部分（或者您只想在模型层发生更改时获取更新），则实现 INotifyPropertyChanged。这样 JobStart 和 JobEnd 将更新 Binding。

2.  与其公开 NA_Header 属性，不如公开 JobStart 和 JobEnd （然后在您的 ViewModel 中实现 INotifyPropertyChanged，但我认为您已经这样做了）。这可能会通过隐藏模型层中的一些类来简化您的 ViewModel，或者它可能会使它更复杂，但有利于简化 XAML。

# vb6 - 就此提出建议。我的代码有一些阻止程序。我收到错误“需要对象”

> ID：13805920
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:24:10.050
> 
> 标签：vb6

我正在使用下面的函数。在第一个函数中，我使用 MSXML 解析了 xml 的节点及其值。与其他 xml 类似的 func。我想使用两个节点值并突出显示它。我尝试了一些东西。但我在突出显示的行（*** *）中遇到错误，因为“需要对象”。你的快速回复将帮助我更多。

Public Sub DisplayNode1(ByRef Nodes1 As MSXML2.IXMLDOMNodeList, _ ByVal Indent1 As Integer)

一些线

```
 RichTextBox2.Text = Space$(Indent) & xNode1.ParentNode.nodeName & _
        ":" & xNode1.NodeValue 

        difference 
```

一些线

```
Public Sub difference() 

Dim a As IXMLDOMText 

Dim b As IXMLDOMText

a.NodeValue = xNode.innertext  'i get erroe in line    

b.NodeValue = xNode1.innertext           

If StrComp(a, b) > 0 Then  

a = vbRed  

b = vbRed 

End If 
```

请尽快帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:51:02.243

这有很多潜在的错误。

*   xnode 未在您的代码示例中的任何地方声明
*   a、b 或 xnode 均未在代码示例中的任何位置显式设置
*   除非 xnode 是表单/模块/全局级别变量，否则它将超出差异过程的范围
*   它没有显示，但我猜你的代码中或默认情况下没有设置 Option Explicit

您需要先解决这些问题，然后才能使用此代码到达任何地方。

# node.js - 发送错误请求的 html 页面，node.js

> ID：13805921
> 
> 赞同：0
> 
> 时间：2012-12-10T17:24:11.080
> 
> 标签：node.js, http, response, bad-request

我正在`http`使用 node.js 构建服务器，并尝试发送`html`错误请求的页面。这是我的代码：

```
function respond(request, socket) {
    console.log("Request for " + request["url"] + ".");
    fs.readFile(request["url"], request["encoding"], function(error, file) {
        if(error) {
            console.log(error);
            writeHead(socket,request["version"],404,"text/html",null);
            socket.write(notFound(request["url"]));
            socket.end();
        } else {
            fs.stat(request["url"],function (err,stats) {
                writeHead(socket,request,200,stats)
                socket.write(file, request["encoding"]);
                socket.end();
            });
        }
    });
}

function notFound(url) {
return "<html> \
    <head> \
    <title>404 Not Found</title> \
    </head> \
    <body> \
    <h1>Not Found</h1> \
    <p>The requested URL " + url + " was not found on this server.</p> \
    <hr> \
    <address>EX4 Server</address> \
    </body> \
    </html>"
}

function writeHead(socket, request, code, stats) {
    socket.write(request["version"] + " " + code + " " + "\r\n");
    socket.write("Date: " + getDate() + "\r\n");
    if (stats != null) {
        socket.write("Content-Length: " + stats.size + "\r\n");
        socket.write("Last-Modified: " + stats.mtime + "\r\n");
    }
    socket.write("Server: EX4" + "\r\n");
    socket.write("Content-Type: " + request["contentType"] + "\r\n");
    socket.write("\r\n");
    return;
} 
```

如您所见，如果文件无法打开，我会调用`writeHead()`它总是以结尾，`\r\n\r\n`然后发送一个 html 页面。

但是，发生的情况是我只在浏览器上看到了整个响应（标题 + 正文）（如果重要，则为 chrome）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:02:51.123

我认为您忘记了[状态代码](https://www.rfc-editor.org/rfc/rfc2616#section-6.1)的文本表示。

```
HTTP/1.x 200 OK 
```

# c# - 带有 WHERE 子句的 OLE CALL 到 Excel

> ID：13805925
> 
> 赞同：5
> 
> 时间：2012-12-10T17:24:13.483
> 
> 标签：c#, .net, excel, ado.net, oledb

我正在修复一个 C# 项目，该项目使用带有数据定义的 Excel 工作表来创建 SQL Server 中的批量插入使用的 .fmt 文件。

我的问题是 Excel 文件有时在底部有空白行，而我正在处理的 C# 解析器将检测到比包含数据定义的实际行数更高的行数。

因此，fmt 文件在其第二行上有更多的行，并且批量插入在到达底部并尝试继续读取时会引发异常。

例如，只有 50 行数据和 50 个空白行。fmt 文件的第二行将有一个 100（第一行是 SQL Server 版本）。第 3 到 52 行是 50 行数据定义。当批量插入尝试到达第 53 行时，它会返回一些列异常。

C# 解析器使用 Ace OleDB 12 连接到 Excel 97 格式文件。

SQL 是：

```
var commandText = string.Format("SELECT * FROM [{0}$]", SpreadSheetName); 
```

我试图在 SQL 代码中添加 WHERE 子句，以仅选择具有非空“A”列的行，但这不起作用。

```
SELECT * FROM [{0}$] WHERE [A] <> '' 
```

有没有一种方法可以使用一些 SQL 代码来增强命令文本，以便仅从满足特定条件的 Excel 中提取数据行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T22:00:25.173

如果您的电子表格有标题（我不是指 Excel 的“A”、“B”等列标题），那么您可以在条件中使用这些标题。实例化`OleDbConnection`.

```
string connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + filename + ";Extended Properties=\"Excel 8.0;HDR=YES;\""; 
```

然后您可以按照以下方式执行SQL

```
string SQL = "SELECT * FROM [Sheet1$] WHERE [Name] <> ''"; 
```

如果您的电子表格没有标题，您仍然可以使用 WHERE 子句，但您必须通过“F1”、“F2”等引用列，并将连接字符串设置为不使用标题

```
string connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + filename + ";Extended Properties=\"Excel 8.0;HDR=NO;\"";
string SQL = "SELECT * FROM [Sheet1$] WHERE [F1] <> ''" 
```

# grails - Grails 命令对象可以有可变数量的参数吗？

> ID：13805934
> 
> 赞同：3
> 
> 时间：2012-12-10T17:24:43.077
> 
> 标签：grails, controller, grails-2.0, command-objects

我们在 Grails 2.0.1 中使用带有 Grails 控制器的命令对象。这是一个了不起的功能，并产生了非常漂亮、简洁的控制器，并具有完全验证的参数。我有一个案例，在控制器中实现了一个 Web 服务调用，其中有一些固定参数，然后是一些可变长度参数。我用谷歌搜索了整个地方，似乎找不到一个例子。一般而言，grails 文档对命令对象相当简洁。我可以在没有 Command 对象的情况下做我想做的事，但是我会打破这组控制器中的模式，其中每个其他调用都使用 Command 对象。FWIW 这个特定的调用是一个将数据提交到后端的 POST。这里没有域对象，数据正在被转换为电子表格中的一行。

我不确定代码示例是否会有所帮助，但无论如何这里是一个：

```
package com.companyname.platform.api

    class ApiController {
        static allowedMethods = [save:'POST', close:'POST', storeResults: 'POST']

        def save = { APISaveCommand cmd->
            doSaveAction(cmd)
        }
        def close = APICloseCommand cmd->
            doCloseAction(cmd)
        }
        def storeResults = { params->
            doStoreResults(params)
        }
    }
} 
```

看看 storeResults 如何没有 Command 对象？它需要可变数量的参数。在上面的代码中，假设 do*Action 方法位于已注入此控制器的 Service 中。doStoreResults(params) 没有错，但我真的很想坚持使用命令对象模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:31:50.753

根据您的评论，是的，在这种情况下可以使用命令。Juts 在命令中声明所有字段，并对必须成对声明的字段实施[自定义验证器](http://grails.org/doc/latest/ref/Constraints/validator.html)。

在验证器中，您可以访问字段值以及对象实例，因此您可以轻松比较其中一个是否为空，另一个是否为空。

```
@Validateable
class MyCommand {
  String a
  String b
  String c

  static constraints = {
    a nullable: false, blank: false
    b validator: { val, obj ->
      if((!val && obj.c) || (val && !obj.c)) {
        return 'mycommand.declareBAndC.message' //key to the i18n message
      }
    }
  }

} 
```

# c# - 从 Pivotviewer 中删除 scrollviewer

> ID：13805937
> 
> 赞同：0
> 
> 时间：2012-12-10T17:25:03.577
> 
> 标签：c#, silverlight, silverlight-5.0, pivotviewer

不知道为什么，但是将我的 pivotviewer 应用程序从 Silverlight 4 迁移到 Silverlight 5 改变了一些事情。

当我过去切换到 graphview 时，我的类别习惯于组合成一些范围，如图所示（在 SL4 中）

![在此处输入图像描述](../Images/6267296d36a8fdcfbfe1ac559b3f66f9.png)

现在发生了一些变化，每个类别在 graphview 中都有自己的列。

![在此处输入图像描述](../Images/77715a22c1af30dbcd1174a898b7897e.png)

我想回到旧的行为，但我不知道如何禁用它。此外，滚动查看器位于枢轴查看器的底部。

试着像这样玩 ScrollViewer。

```
<pivot:PivotViewer x:Name="PivotMainPage" ItemsSource="{Binding}" ScrollViewer.VerticalScrollBarVisibility="Hidden" /> 
```

似乎它不想工作。有什么建议吗？

我怀疑它与容器的宽度和高度有关。似乎最小 MinHeight = 250 e MinWidth = 450 会影响 pivotviewer 超出列的边界。

**编辑。**我删掉了所有无用的东西，才发现Pivotviewer 随意决定何时使用scrollviewer。我可以找到一种方法来禁用它。现在的行为是旧 SL4（一些项目被分组）和新 SL5（即使项目被分组，滚动条可用）之间的混合。

这是SL5中第一张图片的示例！

![在此处输入图像描述](../Images/fc2d8e3a247385362ad278a256f6f35f.png)

这是新代码：

```
<UserControl x:Class="PVClean.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:pivot="clr-namespace:System.Windows.Controls.Pivot;assembly=System.Windows.Controls.Pivot"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">

            <pivot:PivotViewer x:Name="PivotMainPage" ItemsSource="{Binding}" ScrollViewer.VerticalScrollBarVisibility="Hidden"  />

    </Grid>
</UserControl> 
```

这是后面的代码：

```
public MainPage()
        {
            InitializeComponent();
            PivotMainPage.Loaded += pViewer_Loaded;
        }

        void pViewer_Loaded(object sender, RoutedEventArgs e)
        {
            _cxml = new CxmlCollectionSource(new Uri("http://pivot.blob.core.windows.net/msdn-magazine/msdnmagazine.cxml", UriKind.Absolute));
            _cxml.StateChanged += _cxml_StateChanged;
        }

        void _cxml_StateChanged(object sender,
                               CxmlCollectionStateChangedEventArgs e)
        {
            if (e.NewState == CxmlCollectionState.Loaded)
            {
                PivotMainPage.PivotProperties =
                           _cxml.ItemProperties.ToList();
                PivotMainPage.ItemTemplates =
                           _cxml.ItemTemplates;
                PivotMainPage.ItemsSource =
                           _cxml.Items;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:33:42.230

SL5 PivotViewer 中编码了一个限制，它确定（可能基于控件的宽度）有多少“桶”是最大值。如果您有超过此最大值，它将开始对它们进行分组。

但是，为了回答您的问题，我同意 - 他们编码的方式并不完美 - 即使项目被分组，它仍然显示滚动条。这是我们必须忍受的另一件事，除非发布新版本。我错过了 SL4 的一个功能是您能够为直方图（而不是 AZ）指定排序。

# python - 测试三个值的相等性

> ID：13805939
> 
> 赞同：73
> 
> 时间：2012-12-10T17:25:08.307
> 
> 标签：python

这和我想的一样吗？在我看来，是的。我要求确定。

```
if n[i] == n[i+1] == n[i+2]:
    return True 
```

这些是平等的吗？

```
if n[i] == n[i+1] and n[i+1] == n[i+2]:
    return True 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-10T17:27:57.123

它*等效*于但不等于，因为访问只执行一次。Python 自然地链接关系运算符（包括`in`and `is`）。

显示细微差别的最简单方法：

```
>>> print(1) == print(2) == print(3)
1
2
3
True
>>> print(1) == print(2) and print(2) == print(3)
1
2
2
3
True 
```

`print()`总是返回`None`，所以我们在`None`这里所做的只是比较 s，所以结果总是`True`，但是请注意，在第二种情况下，`print(2)`被调用了两次，所以我们`2`在输出中得到了两个 s，而在第一种情况下，使用了结果对于这两个比较，所以它只执行一次。

如果你使用没有副作用的纯函数，这两个操作最终会完全一样，但除此之外它们会有些不同。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-10T17:31:56.617

是的，但是，当比较被链接时，*公共表达式*被评估一次，使用`and`它时被评估两次。在这两种情况下，如果第一个比较为假，则不会评估第二个比较，例如来自[文档](https://docs.python.org/2/reference/expressions.html#comparisons)：

> 比较可以任意链接，例如，x < y <= z 等价于 x < y 和 y <= z，除了 y 只计算一次（但在这两种情况下，当找到 x < y 时根本不计算 z是假的）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-10-23T16:45:36.207

正如其他人的回答，答案是肯定的。但是：小心添加括号。例如：

```
>>> 1 == 2 == 0
False
>>> (1 == 2) == 0
True 
```

在第二种情况下，`(1 == 2)`计算结果为`False`，然后`False == 0`计算结果为`True`，因为 Python 允许将布尔值与整数进行比较。

同样地：

```
>>> 0 == 0 == 1
False
>>> (0 == 0) == 1
True 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-10T17:28:12.007

是的，你是对的 ....

你也可以

```
5 > x > 1 
```

或者

```
1 < x < 5 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-04T13:01:44.950

您可以使用集合来测试相等性

```
>>> a, b, c = 2, 2, 2
>>> len({a, b, c}) == 1
True
>>> a, b, c = 2, 2, 3
>>> len({a, b, c}) == 1
False 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-10T17:42:11.627

是的，在 python 的内部，比较运算符既不返回 true 也不返回 false，而是返回“比较结果”对象（不记得类名，这是过去的事了），这个对象提供了**_ *lt* _**，**_ *gt* _** , **_ *eq* _** etc 等方法，并对最终结果“负责”（并且“比较结果”在语句结束时转换为 True 或 False）。这是 python 为您提供的语义控制的魔力 :)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-28T15:58:49.017

看来您也可以将 == 与 != 链接起来：

```
>>> a = b = c = 1
>>> a == b == c
True
>>> a == b == c == 1
True
>>> a == b == c == 2
False
>>> a == b == c != 2
True
>>> a == b == c != 1
False
>>> 
```

# java - 绘图程序重复 JMenuBar

> ID：13805941
> 
> 赞同：1
> 
> 时间：2012-12-10T17:25:31.537
> 
> 标签：java, swing, jframe, paintcomponent, jmenubar

我用 Java 编写了一个简单的绘图程序，它允许用户在不同的形状、大小和颜色之间进行选择（在 中`JMenuBar`）并用鼠标绘制它们。在克服了程序的许多问题之后（我最初是用它编写的，`AWT`但被说服改用 Swing，所以请原谅任何糟糕`Swing`的编码，因为这是我第一次使用它），我还有一个问题要解决。每当用户在屏幕上绘制一些东西（默认情况下是一个带有黑色边框的红色矩形）时，`JMenuBar`副本就会在原始`JMenuBar`. 我认为paintComponent 缓冲屏幕的方式有些奇怪，但由于我以前从未使用过它，所以我不知道它是如何工作的。

有什么想法可以让它停止复制`JMenuBar`吗？

```
import java.awt.*;
import java.awt.event.*;
import java.lang.*;
import javax.swing.*;

public class E3G04 extends JFrame implements WindowListener, ActionListener, MouseListener, MouseMotionListener
{
    //Variables are declared as volatile to ensure that they're always called from system RAM
    static volatile String type = "rectangle";
    static volatile Boolean fill = true;
    static Color lineColor = Color.BLACK;
    static Color fillColor = Color.RED;
    static int size = 1;

    CanvasEX cx = new CanvasEX();

    static boolean running = true;

    JMenuBar mb = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
            JMenuItem newItem = new JMenuItem("New");
            JMenuItem quitItem = new JMenuItem ("Quit");

    protected E3G04()
    {

        mb.add(fileMenu);
        fileMenu.add(newItem);
        fileMenu.add(quitItem);             
        newItem.setMnemonic('N');
        quitItem.setMnemonic('Q');
        newItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, ActionEvent.CTRL_MASK));
        quitItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Q, ActionEvent.CTRL_MASK));          
        newItem.addActionListener(this);
        quitItem.addActionListener(this);
        cx.setSize(800,600);
        cx.addMouseListener(this);
        cx.addMouseMotionListener(this);
        setJMenuBar(mb);
        setBounds(100,100,800,600);
        setLayout(new BorderLayout());
        add("Center",cx);
        addWindowListener(this);
        setResizable(true);
        setVisible(true);
    }

    public static void main(String [] args)
    {
        new E3G04();
    }

    public void stop()
    {
        newItem.removeActionListener(this);
        quitItem.removeActionListener(this);    
        dispose();
        System.exit(0);
    }

    public void actionPerformed(ActionEvent e)
    {
        Object o = e.getSource();

        if (o == newItem)
        {
            cx.erase = true;
            cx.repaint();
        }

        if (o == quitItem)
        {   
            running = false;
            stop();
        }

    }      

    public void mousePressed(MouseEvent m)
    {
        cx.start = m.getPoint();
        cx.end = cx.start;
        cx.cur = cx.start;
    }

    public void mouseDragged(MouseEvent m)
    {
        cx.cur = m.getPoint();
    }   

    public void mouseReleased(MouseEvent m)
    {
        cx.end = cx.cur;
        cx.repaint();
    }   
    public void itemStateChanged(ItemEvent e)
    {
        Object o = e.getSource();

    }
    public void windowClosing(WindowEvent e)
    {
        running = false;
        stop();
    }
    public void mouseClicked(MouseEvent m){}    
    public void mouseExited(MouseEvent m){}
    public void mouseEntered(MouseEvent m){}    
    public void mouseMoved(MouseEvent m){}
    public void windowClosed(WindowEvent e){}
    public void windowOpened(WindowEvent e){}
    public void windowActivated(WindowEvent e){}
    public void windowDeactivated(WindowEvent e){}
    public void windowIconified(WindowEvent e){}
    public void windowDeiconified(WindowEvent e){}
}

class CanvasEX extends JPanel
{
    Point start = new Point(100,100);
    Point cur = new Point(100,100);
    Point end = new Point(100,100);
    boolean erase = false;

    public void paintComponent(Graphics g)
    {

        Graphics buffer = g;
        if (erase)
        {
            g.dispose();
            erase = false;
        }   
        g.setColor(E3G04.lineColor);
        if (end.x > start.x && end.y > start.y)
            g.fillRect(start.x,start.y, Math.abs(end.x-start.x),Math.abs(end.y-start.y));
        if (end.x > start.x && end.y < start.y)
            g.fillRect(start.x,end.y, Math.abs(end.x-start.x),Math.abs(end.y-start.y));  
        if (end.x < start.x && end.y > start.y)
            g.fillRect(end.x, start.y, Math.abs(end.x-start.x),Math.abs(end.y-start.y));
        if (end.x < start.x && end.y < start.y)
            g.fillRect(end.x, end.y, Math.abs(end.x-start.x),Math.abs(end.y-start.y));
        g.setColor(E3G04.fillColor);
        if (end.x > start.x && end.y > start.y)
            g.fillRect(start.x + E3G04.size,start.y + E3G04.size, Math.abs(end.x-start.x) - 2 * E3G04.size,Math.abs(end.y-start.y) - 2 * E3G04.size);
        if (end.x > start.x && end.y < start.y)
            g.fillRect(start.x + E3G04.size,end.y + E3G04.size, Math.abs(end.x-start.x) - 2 * E3G04.size,Math.abs(end.y-start.y) - 2 * E3G04.size);  
        if (end.x < start.x && end.y > start.y)
            g.fillRect(end.x + E3G04.size, start.y + E3G04.size, Math.abs(end.x-start.x) - 2 * E3G04.size,Math.abs(end.y-start.y) - 2 * E3G04.size);
        if (end.x < start.x && end.y < start.y)
            g.fillRect(end.x + E3G04.size, end.y + E3G04.size, Math.abs(end.x-start.x) - 2 * E3G04.size,Math.abs(end.y-start.y) - 2 * E3G04.size);          
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:28:13.033

`super.paintComponent(Graphics g)`通过调用覆盖`paintComponent(..)`方法，您不尊重油漆链（您应该这样做） ：

```
@Override
public void paintComponent(Graphics g)
{
     super.paintComponent(g);

    //do rest of painting etc
} 
```

# vba - 从 vba 中的 vlookup 返回行号

> ID：13805942
> 
> 赞同：4
> 
> 时间：2012-12-10T17:25:31.673
> 
> 标签：vba, vlookup

我需要知道在这种情况下使用什么代码。

我在 vba 中使用 vlookup 来定位某个记录号。然后我需要知道记录所在的行号。我尝试了以下方法，但收到错误：

```
nRowSavedRecord = [Vlookup(Cells(nRows, nColRecNmbr),Range("RecordInfo"),2,False).Row] 
```

这给了我一个“ `Type Mismatch`”错误。

或者

```
nRowSavedRecord = Application.vlookup(cells(nRows, nColRecNmbr), Range("RecordInfo"),2,False).Rows 
```

这给了我一个“ `Object Required`”错误。

我敢肯定，我所缺少的一切都很简单。
（`nRowSavedRecord`是一个`Long`）有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T18:16:19.533

你的问题有几个问题。

*   VLookup 不是 Application 的属性，而是 Application.WorksheetFunction 的属性
*   VLookup 返回值，而不是对单元格的引用，因此您无法从中获取行

您可能想使用 Match 功能，例如：

```
nRowSavedRecord = Application.WorksheetFunction.Match(Cells(nRows, nColRecNmbr), Range("RecordInfo"), 0) 
```

最后一个 0 表示这是完全匹配的。您还必须确保这`RecordInfo`是一个一维范围

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:13:03.937

您是否尝试过使用匹配功能？

[http://office.microsoft.com/en-gb/excel-help/match-function-HP010062414.aspx](http://office.microsoft.com/en-gb/excel-help/match-function-HP010062414.aspx)

# mpi - 一般来说，为什么使用 MPI 的相同代码的时序会发生变化？

> ID：13805943
> 
> 赞同：0
> 
> 时间：2012-12-10T17:25:32.283
> 
> 标签：mpi, multidimensional-array, fortran90

我有一个串行代码，我在 FORTRAN 中使用 MPI 将其并行化。在不更改测试输入的情况下，时序会从一次运行更改为另一次运行。说 run 1 t = 0.75sec run 2: t = 0.32 sec 同样没有任何变化，相同的输入变量，相同的编译器和相同数量的 porcesses 和使用的节点。会发生什么？谢谢

# jquery - 将类添加到多个缓存的 jquery 元素

> ID：13805947
> 
> 赞同：4
> 
> 时间：2012-12-10T17:25:44.187
> 
> 标签：jquery

使用 jQuery 可以同时向多个缓存元素添加一个类。我知道我可以做到以下几点：

```
cachedElement1 = $('#div1');
cachedElement2 = $('#div2');

cachedElement1.addClass('someclass');
cachedElement2.addClass('someclass'); 
```

但是有没有一种简短的方法可以做到这一点。所以像下面这样的东西实际上不起作用。

```
$(cachedElement1,cachedElement2).addClass('someclass'); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T17:27:11.187

您可以使用`add()`将元素添加到选择器。试试这个：

```
cachedElement1.add(cachedElement2).addClass('someclass'); 
```

[API 参考：Add()](http://api.jquery.com/add/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:27:23.773

是的，像这样：

```
cachedElement1.add(cachedElement2).addClass('someclass'); 
```

# javascript - HTML5/JS - 断断续续的游戏循环

> ID：13805948
> 
> 赞同：0
> 
> 时间：2012-12-10T17:26:08.410
> 
> 标签：javascript, html, canvas, game-loop

我一直在尝试用 HTML5/JS 制作一个简单的游戏。我已经设法为状态机和游戏循环准备了一个基本骨架，但即使是做一个简单的矩形移动也会导致一些“有形”的波动。

更重要的是，在让它闲置一段时间（跳出）之后，它似乎滴答作响的速度非常快，使一个简单的按键移动矩形远远超过它应该。

我正在使用`setTimeout`游戏的更新。在每个“滴答”期间，我调用当前状态的更新函数，即

```
State.prototype.update = function(ms) {
    this.ticks += ms;

    var updates = 0;
    while(this.ticks >= State.DELTA_TIME && updates < State.MAX_UPDATES) {
          this.updateState();

          this.updateFrameTicks += State.DELTA_TIME;
          this.updateFrames++;

          if(this.updateFrameTicks >= 1000) {
              this.ups = this.updateFrames;
              this.updateFrames = 0;
              this.updateFrameTicks -= 1000;
          }

        this.ticks -= State.DELTA_TIME;
        updates++;
    }   

    if(updates > 0) {
          this.renderFrameTicks += updates*State.DELTA_TIME;
          this.renderFrames++;

          if(this.renderFrameTicks >= 1000) {
              this.rps = this.renderFrames;
              this.renderFrames = 0;
              this.renderFrameTicks -= 1000;
          }

          this.renderState(updates*State.DELTA_TIME);
    }

}; 
```

这个想法是`Game.update`使用 尽可能频繁地调用`setTimeout`，然后将经过的时间传递给`State.update`。`State.update`仅当状态累积的时间大于或等于固定更新时间步长时才会更新状态。如果状态实际更新，`State.update`也会渲染/重绘当前状态，确保状态呈现与状态模拟相匹配。

现在，我知道这`requestAnimationFrame`比 更好`setTimeout`，但理论上当前版本**应该可以**工作，除非我犯了一个根本性错误。

这是我到目前为止所拥有的：http: [//jsbin.com/ogicec/1](http://jsbin.com/ogicec/1)（[编辑](http://jsbin.com/ogicec/1/edit)）

您可以清楚地观察到它有断断续续的现象，如果您长时间观察并重新进入，它似乎比正常运行“更快”。

我无法真正确定问题所在，因此非常感谢您的帮助！

**编辑：** 我将状态的更新和渲染部分分开，`setTimeout`用于更新和`requestAnimationFrame`渲染。它解决了标签问题，整个事情感觉更加一致。但是，与此同时，性能仍然不稳定，我想在继续添加更多游戏相关代码之前确保它足够流畅。

这是更新的 JSBin：http: [//jsbin.com/eyarod/1](http://jsbin.com/eyarod/1)（[编辑](http://jsbin.com/eyarod/1/edit)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:59:08.943

在我的系统上，JSBin 测试实际上几乎一直使用 UPS: 60 和 FPS: 60 运行（注意我在 i7-2600k 上的 chrome 25.0.1349.2 dev 中运行它，并且我打开了 VSync，所以这是为什么帧率会受到限制）。当我切换到另一个选项卡并返回FPS时，请稍加干扰：我怀疑这与浏览器“ browsers stertimeout”调用的方式有关。

更一般地说，您似乎试图将消息轮询繁忙等待循环硬塞到 JavaScript 中，这是一种事件驱动的语言。我怀疑（但不确定），添加一个使用当前 x 和 y 更新共享对象的事件处理程序，然后有一个单独的循环以固定到监视器刷新率的速率更新屏幕会执行很多更好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:27:30.017

> 现在，我知道 requestAnimationFrame 比 setTimeout 效果更好，但理论上当前版本应该可以工作，除非我犯了一个根本性的错误。

允许用户代理等待额外的时间，只要他们愿意，超过提供给的毫秒参数`setTimeout`（并且通常执行延迟执行的非实时 API 保证代码不会在您指定的延迟之前运行，但它可能会运行您指定的延迟后的任意时间）。此外，当一次更新调用`this.ticks`非常接近但小于一帧时，您可能会观察到不稳定的运动，而下一次调用发生在触发两次更新的时间，跳过一帧。

错误是`setTimeout`永远不能提供这样做的保证`requestAnimationFrame`。

如果您使用 requestAnimationFrame 并继续遇到问题，您可以使用 Chrome 开发工具深入研究它们；[这是有关避免动画斩波的幻灯片](http://www.igvita.com/slides/2012/devtools-tips-and-tricks/#14)

# ssrs-2008 - 我需要在报告 SSRS 2008 中显示 HTML 文件

> ID：13805952
> 
> 赞同：2
> 
> 时间：2012-12-10T17:26:14.657
> 
> 标签：ssrs-2008, reporting-services

我有一个目录中的 html 文件列表

我想在 SSRS 2008 中显示它们的内容，以便以 PDF 格式打印它们。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:15:48.020

SSRS 不完全支持 html。在这里您可以看到 SSRS 可以呈现哪些 html 元素：http: [//msdn.microsoft.com/en-us/library/ff519562.aspx](http://msdn.microsoft.com/en-us/library/ff519562.aspx)。如果您需要更多 - 那么这是不可能的。

# regex - 在wordpress中重写搜索url

> ID：13805953
> 
> 赞同：1
> 
> 时间：2012-12-10T17:26:15.497
> 
> 标签：regex, wordpress, apache, .htaccess, rewrite

我尝试了几种不同的 .htaccess 解决方案以及插件，但似乎没有任何效果。我在我的 Wordpress 网站上有不同的链接使用这样的网址：

`http://www.mydomainname.com/?s=&post_type=schools&general_search=1&general_search_term=Science`

我将如何将这些网址重写为： `http://mydomainname.com/search/science`在浏览器中？

谢谢！

这是我在 .htaccess 文件中的内容：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
RewriteRule ^search/(.+)$ /?s=&post_type=schools&general_search=1&general_search_term=$1 [L,QSA,NC]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:01:18.257

在您的 .htaccess 中尝试此代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^search/(.+)$ /?s=&post_type=schools&general_search=1&general_search_term=$1 [L,QSA,NC] 
```

**编辑：**

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteRule ^search/(.+)$ /?s=&post_type=schools&general_search=1&general_search_term=$1 [L,QSA,NC]

RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule ^index\.php$ - [L]

RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T08:47:08.217

这对我有用。

[http://wpengineer.com/2258/change-the-search-url-of-wordpress/](http://wpengineer.com/2258/change-the-search-url-of-wordpress/)

```
# search redirect
# this will take anything in the query string, minus any extraneous values, and turn     them into a clean working url
RewriteCond %{QUERY_STRING} \\?s=([^&]+) [NC]
RewriteRule ^$ /search/%1/? [NC,R,L] 
```

不要忘记添加任何内容 `/search/`以匹配您拥有的网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-23T16:13:53.280

简单的方法

```
function ctheme_search_url() {
  if ( is_search() && ! empty( $_GET['s'] ) ) {
      wp_redirect( home_url( "/search/" ) . urlencode( get_query_var( 's' ) ) );
      exit();
    }   
}
add_action( 'template_redirect', 'ctheme_search_url' ); 
```

您可以使用 wordpress 重定向功能

# asynchronous - 如何在 AsAsyncOperation 中进行强制转换？

> ID：13805965
> 
> 赞同：0
> 
> 时间：2012-12-10T17:26:47.083
> 
> 标签：asynchronous, windows-runtime, async-await

我正在上 WinRT IAsyncOperation、async、await 的速成课程。我正在尝试用 IAsyncOperation 包装任务，但未能想出一种简单的方法来进行强制转换。

```
public interface IInfo{}
public class InfoList : IInfo{}

public class Parser {
    private async Task<InfoList> ParseList() {
        var returnList = new InfoList();

        HttpClient client = new HttpClient();
        Task<string> htmlTask = client.GetStringAsync("http://stackoverflow.com");

        string html = await htmlTask;
        // parsing logic...
        return returnList;
    }

    public IAsyncOperation<IInfo> Parse()
    {
        return AsyncInfo.Run(_ =>
            Task.Run<IInfo>(async () =>
            {
                var returnList = await ParseList();
                return returnList;
            })
        );
        // I have tried following but causes InvalidCastException
        //return (IAsyncOperation<IInfo>)ParseList().AsAsyncOperation<InfoList>();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:40:44.990

```
public IAsyncOperation<IInfo> Parse()
{
    return AsyncInfo.Run(async _ => (IInfo) await ParseList());
} 
```

或者

```
public IAsyncOperation<IInfo> Parse()
{
    return AsyncInfo.Run(_ => ParseList().ContinueWith(t => (IInfo)t.Result));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:36:32.177

类型不是协变的`IAsyncOperation<>`，这意味着您不能将 an 强制`IAsyncOperation<InfoList>`转换为`IAsyncOperation<IInfo>`.

尝试让您的`ParseList`方法返回 a `Task<IInfo>`。

# tree - Setf (?) 在树中引起循环

> ID：13805966
> 
> 赞同：3
> 
> 时间：2012-12-10T17:26:54.157
> 
> 标签：tree, lisp, common-lisp, setf

我正在 Common Lisp (CLISP) 中实现进化算法，但我遇到了问题。

我有一个类似树的类：

```
(defclass node ()
  ((item :initarg :item :initform nil :accessor item)
   (children :initarg :children :initform nil :accessor children)
   (number-of-descendants :initarg :descs :initform nil :accessor descs))) 
```

还有一些方法：

```
(defmethod copy-node ((n node))
  (make-instance
   'node
   :item (item n)
   :descs (descs n)
   :children (mapcar #'copy-node (children n))))

(defmethod get-subtree ((n node) nr)
 (gsth (children n) nr))
(defmethod (setf get-subtree) ((val node) (n node) nr)
  (setf (gsth (children n) nr) val))
(defmethod get-random-subtree ((n node))
  (gsth (children n) (random (descs n))))
(defmethod (setf get-random-subtree) ((val node) (n node))
  (setf (get-subtree n (random (descs n))) val))

(defun gsth (lst nr)    
  (let ((candidate (car lst)))
    (cond
      ((zerop nr) candidate)
      ((<= nr (descs candidate)) (gsth (children candidate) (1- nr)))
      (t (gsth (cdr lst) (- nr (descs candidate) 1))))))

(defun (setf gsth) (val lst nr)    
  (let ((candidate (car lst)))
    (cond
      ((zerop nr) (setf (car lst) val))
      ((<= nr (descs candidate))
       (setf (gsth (children candidate) (1- nr)) val))
      (t (setf (gsth (cdr lst) (- nr (descs candidate) 1)) val)))
    val)) 
```

我想要做的是从人口中交换两个随机树的两个随机子树。但是当我做这样的事情时：

```
(defun stdx (population)
  (let ((n (length population))
        (npop))
    (do ((done 0 (+ done 2)))
        ((>= done n) npop)
      (push (stdx2 (copy-node (random-el population))
                   (copy-node (random-el population)))
            npop))))

(defun stdx2 (father mother)
  ;; swap subtrees
  (rotatef (get-random-subtree father)
           (get-random-subtree mother))
  (check-for-cycles father)
  (check-for-cycles mother)) 
```

有时会检测到一个循环，这显然不应该发生。

Check-for-cycles 没问题，我也用 (trace) 检测到了循环。我一直在更新后代的数量。

我想（setf get-subtree）有问题。我是 LISP 的新手，我对 setf 扩展不是很好。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T18:11:43.583

想想这将如何实现：

```
;; swap subtrees
(rotatef (get-random-subtree father)
         (get-random-subtree mother)) 
```

该`rotatef`表单将被宏观扩展为以下内容：

```
(let ((a (get-subtree father (random (descs father))))
      (b (get-subtree mother (random (descs mother)))))
  (setf (get-subtree father (random (descs father))) b)
  (setf (get-subtree mother (random (descs mother))) a)) 
```

（您可以使用[`macroexpand`](http://www.lispworks.com/documentation/HyperSpec/Body/f_mexp_.htm)它来准确找出您的情况下的扩展。）

换句话说，随机子树将被选择*两次*（一次在读取时，一次在更新时），这样子树不会相互交换，对子树的引用将被复制到另一棵树的随机位置。

例如，在下图中，算法可能会选择要交换的蓝色和红色子树。但是当涉及到附加它们时，它会将它们放在标有点的点上。

![](../Images/c76c70bffd1fd81880618e7bb5bda710.png)

图的下半部分显示了将子树附加到新点后生成的数据结构：您可以看到已经创建了一个循环。

因此，您需要修改代码，以便只选择*一次*随机子树。像这样的东西，也许：

```
(let ((a (random (descs father)))
      (b (random (descs mother))))
  (rotatef (get-subtree father a)
           (get-subtree mother b))) 
```

# sql - 动态 SQL 查询的转换失败错误

> ID：13805969
> 
> 赞同：1
> 
> 时间：2012-12-10T17:27:08.987
> 
> 标签：sql, sql-server

下面的查询会引发此错误：

`Conversion failed when converting the varchar value 'query below that stops at WHERE tsv.Transition_ID =' to data type int`

```
DECLARE @Language_ID INT
SELECT @Language_ID = dbo.BPE_F_Default_Language_GetOne()

DECLARE @Transition_ID int
SET @Transition_ID = -1

DECLARE @SQLSTR nvarchar(4000)
SELECT @SQLSTR = 'SELECT tsv.Transition_Set_Variable_ID
                        , tsv.Set_To_Variable_ID
                        , tsv.Transition_ID
                        , tl.Transition_Text
                        , tsv.Variable_ID_To_Change
                        , variable.Name
                        , tsv.Set_To_Variable_ID
                        , tsv.Set_To_Value_ID
                        , tsv.Changed_In_SP
                        , tsv.Set_To_Comment_Input
                        , tsv.Comment AS Assigned_Comment
                        , variable2.Name AS Set_To_Variable_Name
                        , value.Name AS Set_To_Value_Name
                        FROM BPE_T_VA_Variable AS variable 
                        INNER JOIN BPE_T_VA_Transition_Set_Variable AS tsv 
                            ON variable.Variable_ID = tsv.Variable_ID_To_Change
                        LEFT JOIN BPE_T_VA_Variable AS variable2 
                            ON tsv.Set_To_Variable_ID = variable2.Variable_ID
                        LEFT JOIN BPE_T_VA_Value AS value 
                            ON tsv.Set_To_Value_ID = value.Value_ID
                        INNER JOIN BPE_T_WF_Transition_Localisation AS tl
                            ON tsv.Transition_ID = tl.WF_Transition_ID
                        WHERE tsv.Transition_ID = ' + @Transition_ID + ' OR ' + @Transition_ID + ' = -1 
                        AND (' + @Column + ' LIKE ''%''' + @search_string + '''%'' )
                        AND tl.Language_ID = ' + @Language_ID + '
                        ORDER BY tsv.Transition_ID, variable.Name'
EXEC(@SQLSTR); 
```

有谁知道这可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:29:11.523

`@Transition_ID`是 a `INT`，您必须先将其转换为 a `VARCHAR`，然后再将其与字符串的其余部分连接起来。

但是，最好在查询中使用[`sp_executeSql`](http://msdn.microsoft.com/en-us/library/aa933299%28v=sql.80%29.aspx)和参数化`@Transition_ID`和`@search_string`参数。就目前而言，它很可能容易受到[**Sql Injection Attack**](http://en.wikipedia.org/wiki/SQL_injection)的攻击。

此外，要非常小心您允许进入的值`@Column`，最好使用白名单，因为这不能以您使用它的方式进行参数化，而且它也会让您容易受到攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:29:49.047

由于您要将 an 连接`INT`到字符串，因此必须对其进行转换，否则会引发错误。

添加以下内容：

```
cast(@Transition_ID as varchar(50)) 
```

要制作完整的脚本：

```
DECLARE @Language_ID INT
SELECT @Language_ID = dbo.BPE_F_Default_Language_GetOne()

DECLARE @Transition_ID int
SET @Transition_ID = -1

DECLARE @SQLSTR nvarchar(4000)
SELECT @SQLSTR = 'SELECT tsv.Transition_Set_Variable_ID
                        , tsv.Set_To_Variable_ID
                        , tsv.Transition_ID
                        , tl.Transition_Text
                        , tsv.Variable_ID_To_Change
                        , variable.Name
                        , tsv.Set_To_Variable_ID
                        , tsv.Set_To_Value_ID
                        , tsv.Changed_In_SP
                        , tsv.Set_To_Comment_Input
                        , tsv.Comment AS Assigned_Comment
                        , variable2.Name AS Set_To_Variable_Name
                        , value.Name AS Set_To_Value_Name
                        FROM BPE_T_VA_Variable AS variable 
                        INNER JOIN BPE_T_VA_Transition_Set_Variable AS tsv 
                            ON variable.Variable_ID = tsv.Variable_ID_To_Change
                        LEFT JOIN BPE_T_VA_Variable AS variable2 
                            ON tsv.Set_To_Variable_ID = variable2.Variable_ID
                        LEFT JOIN BPE_T_VA_Value AS value 
                            ON tsv.Set_To_Value_ID = value.Value_ID
                        INNER JOIN BPE_T_WF_Transition_Localisation AS tl
                            ON tsv.Transition_ID = tl.WF_Transition_ID
                        WHERE tsv.Transition_ID = ' + cast(@Transition_ID as varchar(50)) + ' OR ' + cast(@Transition_ID as varchar(50)) + ' = -1 
                        AND (' + @Column + ' LIKE ''%''' + @search_string + '''%'' )
                        AND tl.Language_ID = ' + @Language_ID + '
                        ORDER BY tsv.Transition_ID, variable.Name'
EXEC(@SQLSTR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:31:47.660

将您的 Int 变量转换为 varchar：

```
SELECT @SQLSTR = 'SELECT tsv.Transition_Set_Variable_ID
                        , tsv.Set_To_Variable_ID
                        , tsv.Transition_ID
                        , tl.Transition_Text
                        , tsv.Variable_ID_To_Change
                        , variable.Name
                        , tsv.Set_To_Variable_ID
                        , tsv.Set_To_Value_ID
                        , tsv.Changed_In_SP
                        , tsv.Set_To_Comment_Input
                        , tsv.Comment AS Assigned_Comment
                        , variable2.Name AS Set_To_Variable_Name
                        , value.Name AS Set_To_Value_Name
                        FROM BPE_T_VA_Variable AS variable 
                        INNER JOIN BPE_T_VA_Transition_Set_Variable AS tsv 
                            ON variable.Variable_ID = tsv.Variable_ID_To_Change
                        LEFT JOIN BPE_T_VA_Variable AS variable2 
                            ON tsv.Set_To_Variable_ID = variable2.Variable_ID
                        LEFT JOIN BPE_T_VA_Value AS value 
                            ON tsv.Set_To_Value_ID = value.Value_ID
                        INNER JOIN BPE_T_WF_Transition_Localisation AS tl
                            ON tsv.Transition_ID = tl.WF_Transition_ID
                        WHERE tsv.Transition_ID = ' + cast(@Transition_ID as varchar) + ' OR ' + cast(@Transition_ID as varchar) + ' = -1 
                        AND (' + @Column + ' LIKE ''%''' + @search_string + '''%'' )
                        AND tl.Language_ID = ' + cast(@Language_ID as varchar) + '
                        ORDER BY tsv.Transition_ID, variable.Name' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T17:39:56.810

这不会给你带来麻烦吗？

```
WHERE tsv.Transition_ID = ' + @Transition_ID + ' OR ' + @Transition_ID + ' = -1 
```

我认为它必须是

```
WHERE tsv.Transition_ID = ' + @Transition_ID + ' OR tsv.Transition_ID =' + @Transition_ID + ' = -1 
```

由于您将值设置为 -1，我希望 SQL（如果您打印它）看起来像：

```
WHERE tsv.Transition_ID = -1 OR -1 = -1 
```

那是意图吗？

# java - 带有 RevoluteJoint 的 Box2d 纺车

> ID：13805975
> 
> 赞同：1
> 
> 时间：2012-12-10T17:27:26.550
> 
> 标签：java, libgdx, box2d, physics

我的目标是制作一个缓慢旋转的轮子，它应该指向重力所在的位置。我正在使用适用于 Android 的 libgdx 开发它，当设备旋转时（我正在使用加速度计），轮子应该旋转。

这是使用 box2d 编辑器制作的轮子：[![车轮](../Images/c42a4df61e446a309b59de92ae02b22d.png)](https://i.stack.imgur.com/qYa0a.png)

在时间 = 0 时，车轮指向南方，重力为 (0, -10)，所以它应该保持这种状态.. 但事实并非如此。正如你在图片中看到的那样，轮子慢慢地逆时针旋转，直到它到达一个让你认为重力就像 (10 , 0) 的点；

我的猜测是这与质心有关，但是当我尝试改变时，绝对没有任何反应。

这是一些代码：

## 世界

```
world = new World( new Vector2(0, -10), false ); 
```

## 渲染

```
public void render() {
    world.step(1/2f, 6, 2);
    debugRenderer.render(world, camera.combined);
} 
```

## 轮子创作

```
 BodyDef engranajeBodyDef = new BodyDef();
    engranajeBodyDef.position.set(0,0);
    engranajeBodyDef.type = BodyType.DynamicBody;
    engranajeBodyDef.angularDamping = 0.1f;

    FixtureDef engranajeFixture = new FixtureDef();
    engranajeFixture.density = 10;
    engranajeFixture.friction = 0.1f;
    engranajeFixture.restitution = 0f;
    engranajeFixture.filter.groupIndex = -1;

    Body engranajeBody = world.createBody(engranajeBodyDef);

    bodyLoader.attachFixture(engranajeBody, "engranaje", engranajeFixture, 501);

    RevoluteJointDef engranajeJointDef = new RevoluteJointDef();
    engranajeJointDef.bodyA = bgBody;
    engranajeJointDef.bodyB = engranajeBody;
    engranajeJointDef.collideConnected = false;
    engranajeJointDef.localAnchorA.set(0, 0);
    engranajeJointDef.localAnchorB.set(0, 0);

    world.createJoint(engranajeJointDef); 
```

## 安装轮子的假人

```
 BodyDef bgBodyDef = new BodyDef();
    bgBodyDef.type = BodyType.StaticBody;
    bgBodyDef.position.set(0,0);

    bgBody = world.createBody(bgBodyDef);
    PolygonShape bgShape = new PolygonShape();
    //bgShape.setAsBox(camera.viewportWidth / 2, camera.viewportHeight / 2);
    bgShape.setAsBox(GAME_WIDTH,GAME_HEIGHT);

    bgBody.createFixture(bgShape, 1);
    bgShape.dispose(); 
```

这是车轮在重力（0，-10）和我用来使这个问题更加丰富多彩的精灵下停止的地方：）

[![车轮精灵](../Images/5d52e33584962dff0021edaf6ac2254c.png)](https://i.stack.imgur.com/Bk9Fj.jpg)

任何有助于理解这一点并为我指明任何方向的帮助都将不胜感激。

莱安德罗。

# restkit - 未使用 post:params:delegate 调用 RKObjectLoaderDelegate 方法：

> ID：13805976
> 
> 赞同：1
> 
> 时间：2012-12-10T17:27:31.253
> 
> 标签：restkit

在使用 loadObjectsAtResourcePath:delegate: 进行 GET 时，我能够获取所有必需的 RKObjectLoaderDelegate 方法。

但是，当我使用 post:params:delegate: 进行 POST 时，只会调用 request:didLoadResponse:。甚至诸如 objectLoader:didLoadObjects: 和 objectLoader:didFailWithError: 之类的方法也不会被调用。

这是代码片段。

```
 self.appObjectManager.client = [RKObjectManager managerWithBaseURLString:self.webServiceURLString];
    [self.appObjectManager.client setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [self.appObjectManager.client setValue:@"" forHTTPHeaderField:@"Cookie"];

    RKObjectMapping* sessionInformationMapping = [RKObjectMapping mappingForClass:[sessionInformation class]];
    [sessionInformationMapping mapKeyPath:@"uid" toAttribute:@"userID"];
    [self.appObjectManager.mappingProvider setObjectMapping:sessionInformationMapping forKeyPath:@"user"];

    NSMutableDictionary *parameters = [NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"abc", @"pwd", nil]
                                                                         forKeys:[NSArray arrayWithObjects:@"username", @"password", nil]];

    [self.appObjectManager.client post:resourcePath params:parameters delegate:self]; 
```

我在这里发现了一个类似的问题，但它似乎对我没有帮助。 [RestKit：postObject 调用了什么委托方法？](https://stackoverflow.com/questions/10307649/restkit-what-delegate-method-is-called-for-postobject)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:17:21.280

试试这个而不是 post:params:delegate:

```
[self.appObjectManager loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader * loader) {
  loader.method = RKRequestMethodPOST;
  loader.params = params;
  loader.delegate = self;
}]; 
```

当响应返回时，应该调用 objectLoader 委托方法。

# c# - asp.net 隐式变量

> ID：13805977
> 
> 赞同：1
> 
> 时间：2012-12-10T17:27:31.730
> 
> 标签：c#, asp.net, implicit-conversion

我有 2 个类共享 10 个属性中的 9 个。我正在尝试执行您在下面看到的操作，但在当前上下文中不存在 gc。我想知道是否有

```
 if (methodId == 2)
     {
         var gc = new LblPremium(id);

     }
     else
     {
         var gc = new LblIsoReport(id);
     }

     gc.Nbr = Nbr;

    if (method == 2) { gc.Location = "Location Identification: " + pvtData.Location; }
            ..
            .. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:30:24.380

尝试：

```
var gc = (methodId == 2)? (LblBase)new LblPremium(id) : (LblBase)new LblIsoReport(id); 
```

和`LblBase`的基类在哪里。`LblPremium``LblIsoReport`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:29:27.360

您在 if 和 else 代码块中声明 gc ，因此它不存在于它们之外。

您也不能像在编译时需要知道确切类型那样使用 var 变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T17:41:24.713

```
var gc = new Object(); 
```

//程序开始......

```
switch (methodId)
{

case 1:

//what you want;

break;

case 2:
 gc = new LblPremium(id);
 gc.Location = "Location Identification: " + pvtData.Location;
 gc.Nbr = Nbr;
break;

default:
gc = new LblIsoReport(id);
gc.Nbr = Nbr;

break;

} 
```

# c# - 我应该传递什么参数来调用该方法 C#

> ID：13805979
> 
> 赞同：0
> 
> 时间：2012-12-10T17:27:33.597
> 
> 标签：c#, methods, arguments

我想在 BufferReady 方法的末尾调用 Spectrum 方法，但我不知道为什么会出现错误，这告诉我我向它传递了错误的参数。`Raw`是一个`int`。

```
 void microphone_BufferReady(object sender, EventArgs e) {
                if (buffer.Length <= 0) return;

                // Retrieve audio data
                microphone.GetData(buffer);

                double[] sampleBuffer = new  double[(Utilities.NextPowerOfTwo((uint)buffer.Length))];
                int index = 0;
                for (int i = 0; i < 2048; i += 2) {
                    sampleBuffer[index] = Convert.ToDouble(BitConverter.ToInt16((byte[])buffer, i)); index++;
                }
        //ERROR UNDER
                double[] spectrum = FourierTransform.Spectrum(sampleBuffer, Raw);// I GOT ERROR HERE
            }

    -----------------------

        public static double[] Spectrum(ref double[] x, int method = Raw)
                {
                    //uint pow2Samples = FFT.NextPowerOfTwo((uint)x.Length);
                    double[] xre = new double[x.Length];
                    double[] xim = new double[x.Length];

                    Compute((uint)x.Length, x, null, xre, xim, false);

                    double[] decibel = new double[xre.Length / 2];

                    for (int i = 0; i < decibel.Length; i++)
                        decibel[i] = (method == Decibel) ? 10.0 * Math.Log10((float)(Math.Sqrt((xre[i] * xre[i]) + (xim[i] * xim[i])))) : (float)(Math.Sqrt((xre[i] * xre[i]) + (xim[i] * xim[i])));
                    return decibel;
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:30:59.090

在方法调用[`ref`](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)的第一个参数中添加关键字`Spectrum`

```
double[] spectrum = FourierTransform.Spectrum(ref sampleBuffer, Raw); 
```

*UPDATE* `ref`关键字指出，该数组应通过引用传递给 Spectrum 方法，如果您将`x`在 Spectrum 方法中分配新值，那么这将`sampleBuffer`在micic_BufferReady 方法中为变量分配新值。但正如 Jon 在评论中所说，在这种特殊情况下`ref`，可以从您的 Spectrum 方法定义中删除（但您也必须修改该方法的所有其他调用）。

# c - 数组中未初始化元素的值是多少？

> ID：13805983
> 
> 赞同：6
> 
> 时间：2012-12-10T17:27:37.673
> 
> 标签：c, initialization

我有以下代码

```
int t[] = {
        [1] = 45,
        [2] = 33
    }; 
```

`t[0]`在这种情况下，价值是多少？它会包含垃圾吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T17:28:13.113

其他值将被初始化；来自 C11 标准，§6.7.9*初始化*，¶19 和 ¶21：

> 初始化应按初始化程序列表顺序进行，为特定子对象提供的每个初始化程序都覆盖同一子对象的任何先前列出的初始化程序；^(151))所有未显式初始化的子对象都应隐式初始化，与具有静态存储持续时间的对象相同。
> 
> ^(151) 任何被覆盖的子对象的初始化器，因此不用于初始化该子对象可能根本不会被评估。)
> 
> * * *
> 
> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

并且未初始化`int`的*静态存储持续时间*被隐式初始化为零；同一部分，¶10：

> 如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。如果具有静态或线程存储持续时间的对象未显式初始化，则：
> 
> *   如果是指针类型，则初始化为空指针；
> *   如果是指针类型，则初始化为空指针；
> *   **如果它具有算术类型，则将其初始化为（正或无符号）零**；
> *   如果是聚合，则根据这些规则（递归）初始化每个成员，并将任何填充初始化为零位；
> *   如果是联合，则根据这些规则（递归）初始化第一个命名成员，并将任何填充初始化为零位；

C89 和 C99 中的行为相同。

# razor - Razor 不正确解析 onclick

> ID：13805984
> 
> 赞同：0
> 
> 时间：2012-12-10T17:27:43.923
> 
> 标签：razor, html-parsing

如何正确键入此输入以进行正确的剃须刀解析：

```
<input type="checkbox" onclick="window.location='@(Request.RawUrl)?manufacturer=@(Model.Alias)'" checked="@(item.Checked?"checked":"")" /> 
```

在VS中我得到解析错误，但是在页面源上，这会生成正确的html：

```
<input type="checkbox" checked="" onclick="window.location='/shop/kondicionery?manufacturer=manufacturer'"> 
```

# javascript - 值存在时更新变量

> ID：13805985
> 
> 赞同：1
> 
> 时间：2012-12-10T17:27:44.967
> 
> 标签：javascript, jquery

我有一个简单的代码字符串。当页面加载到函数所在的位置时，我想显示一个默认值`numResults()`。在某些时候，我想`numResults()`使用新值进行更新，然后在不重新加载页面的情况下更改字符串。

```
$('#step1').before('Showing results 1 - ' + numResults());

function numResults(value) {
    var results = 10; // default number

    if (value) {
        return value; // show updated value
    } else {
        return results; // show default
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:48:42.850

这是 knockout.js 的典型用例。

运行示例：http: [//jsfiddle.net/55fXu/1/](http://jsfiddle.net/55fXu/1/)

```
<div data-bind="text:numResults"/>

<script>
$(function() {
  function AppViewModel() {
    this.numResults = ko.observable(10);
  }

  ko.applyBindings(new AppViewModel());
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:43:08.943

我认为您可以为此使用一个[`jQuery.Callbacks`对象：](http://api.jquery.com/jQuery.Callbacks/)

```
// flags: store latest value, and prevent same callback adding multiple times
var resultNumberChanged = $.Callbacks("memory unique");
resultNumberChanged.fire(10); // init with "default number"

resultNumberChanged.add(function(val) {
    $('#step1').before('Showing results 1 - ' + val); // update each time it changes
}); // will also be fired immediately, as there is the default value already

// then, at any point, e.g. inside the numResult function when there is a parameter
…
    resultNumberChanged.fire(newvalue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:04:39.643

首先，在开始 else 之前关闭你的 if 标签。好吧，如果你想做一些简单的事情，试试这个：

```
$(function () {
        $("#myText").val(numResults());

        $("#myButton").click(function(){
            $("#myText").val(numResults("123"));
        });
    });

    function numResults(value) {
        var results = 10; // default number

        if (value) {
            return value; // show updated value
        }
        else {
            return results; // show default
        }
    } 
```

# jquery - Jquery 对话框中未显示忙碌指示器

> ID：13805987
> 
> 赞同：0
> 
> 时间：2012-12-10T17:27:51.257
> 
> 标签：jquery, modal-dialog

我有一个 jquery 确认对话框。当用户按下 OK 时，我会执行一个 Ajax 调用，这需要几秒钟。在这个延迟期间，我想在对话框上显示一个 gif 动画，以便用户知道我们正在处理他们的数据。但是，我似乎无法让 gif 出现在对话框中。

html是：

```
<div id="dlgReleaseConfirmation" title="ConfirmRelease" style="display : none"  >
    <div id="release-in-progress" style="display:none">
            <img src="images/ajax-loader.gif" ></img>
    </div>
</div> 
```

js文件中的代码是：

```
 $("#dlgReleaseConfirmation").dialog({
        modal: true,
        buttons: {
            "Release": function () {
                $("#release-in-progress").show();       // show the busy div - not working, blocked by dialog?
                Release();   // release assays
                loadTable();           // refresh datatable
                $("#release-in-progress").hide();       // hide the busy div
                $(this).dialog("close");    // close this dialog
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        } 
```

谁能看到我做错了什么？

更新解决方案。

亚历山大让我走上了正确的道路。底线是您必须异步执行 Ajax 调用，以便更新对话框以显示忙碌指示符。但是，如果只是这样做，那么问题就变成了代码将继续并关闭屏幕，而 ajax 调用继续异步，因此不会向用户提供任何反馈。

为了解决这个问题，我添加了对 ajaxStart() 和 ajaxStop() 的调用，以在异步 Ajax 调用进行时隐藏和显示忙碌指示符。这是有效的释放按钮处理程序代码：

```
"Release": function () {
    $(this).ajaxStart(function () {
        $("#release-in-progress").show();   
    });
    $(this).ajaxStop(function () {
        $("#release-in-progress").hide();
        $(this).dialog("close");    // close this dialog
    });
    Release();   // release assays
    loadTable();           // refresh datatable
 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:23:49.463

通过在函数中执行同步 AJAX 调用 ( `async: false`)，`loadTable()`您将冻结执行，直到请求完成并且图像资源没有被加载。您需要使用异步调用来实现您想要的。