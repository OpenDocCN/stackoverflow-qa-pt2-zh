# StackOverflow 问答 14119000-14119999

# android - 如何在 Eclipse IDE 中混淆我的 android 项目？

> ID：14119004
> 
> 赞同：10
> 
> 时间：2013-01-02T08:36:09.160
> 
> 标签：android, obfuscation, proguard, android-2.2-froyo

我想最小化我的应用程序大小，并避免应用程序进行逆向工程。任何人都可以帮助简单的答案吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-02T08:39:55.843

[Proguard](http://developer.android.com/tools/help/proguard.html)是 android eclipse 插件的一部分，因此您不必手动调用它。你只需要在你的构建上激活它。

要启用 ProGuard 使其作为 Ant 或 Eclipse 构建的一部分运行，请在文件中设置`proguard.config`属性。`<project_root>/project.properties`路径可以是绝对路径，也可以是相对于项目根目录的路径。

在某些情况下，proguard.cfg 文件中的默认配置就足够了。但是，ProGuard 很难正确分析许多情况，它可能会删除它认为未使用但您的应用程序实际需要的代码。一些例子包括：

*   仅在 AndroidManifest.xml 文件中引用的类
*   从 JNI 调用的方法
*   动态引用的字段和方法

默认的 proguard.cfg 文件试图涵盖一般情况，但您可能会遇到异常，例如 ClassNotFoundException，当 ProGuard 剥离应用程序调用的整个类时会发生这种情况。

当 ProGuard 剥离您的代码时，您可以通过`-keep`在 proguard.cfg 文件中添加一行来修复错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T11:19:55.473

1) 从“http://sourceforge.net/projects/proguard/files/”下载最新的proguard。当前最新版本是proguard4.7

2）用最新下载的proguard文件夹替换“你的SDK\tools\proguard路径”的“bin”和“lib”文件夹。

3) 检查 Eclipse 中的 SDK 位置是否有空格，然后转到窗口 > 首选项 > Android。如果有空格，则将其替换为：

Android SDK的路径

4) 检查 proguard.cfg 文件是否在项目的根文件夹中，并在 android 项目的 project.properties 文件中添加“proguard.config=proguard.cfg”。

5) 现在导出您的项目以获得混淆的 apk。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:40:26.737

是的，可以在项目中使用启用 proguard 来限制应用程序进行逆向工程 您应该阅读本教程 [Proguard for Android app](http://developer.android.com/tools/help/proguard.html)

并且为了最小化应用程序大小，您应该起诉 .9patch 图像和选择器..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:40:33.850

您可以为此使用proguard。它是谷歌为同样目的而提供的工具。请参阅此处的官方指南：

[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-09T15:38:32.583

你可以试试 Dexguard [https://www.guardsquare.com/dexguard](https://www.guardsquare.com/dexguard)，可以添加更多的混淆层，应用字符串加密、类加密和反射。它不是免费的，但它超越了proguard。

PD）这不是垃圾邮件，我与此产品没有任何关系，只是信息。

# python - mongoengine 中的 F() 对象类似于 django 中的对象

> ID：14119005
> 
> 赞同：1
> 
> 时间：2013-01-02T08:36:13.653
> 
> 标签：python, django, mongoengine

我们是否有类似于 mongoengine 中的 F() 对象的东西，类似于 Django 中的对象。

如果是，请帮助我如何使用它。

如果否，请提出一种在 mongoengine 中合并类似功能的方法。

任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T09:03:28.937

您可以使用`where`运算符（自 v0.5 起）：

```
User.objects( ).where( "this.firstname == this.lastname" ) 
```

请注意，这是低效的，因为 Mongo 不会在这些查询中使用索引，因此应该避免：

[http://docs.mongodb.org/manual/reference/operators/#_S_where](http://docs.mongodb.org/manual/reference/operators/#_S_where)

# iphone - cocos2d + iphone：在 iOS 中处理矢量图的最简单方法是什么？

> ID：14119013
> 
> 赞同：2
> 
> 时间：2013-01-02T08:37:10.330
> 
> 标签：iphone, ios

我正在尝试在`cocos2d`项目中导入 svg 文件。

为什么它们实施起来如此复杂？我下载`monkVG`了所有其他库，但`errors`因为错过了这个或那个而得到。

在 iOS 中处理 svg 等矢量图像的最简单方法是什么？

# c++ - 你可以调用模板参数成员的成员吗？

> ID：14119014
> 
> 赞同：5
> 
> 时间：2013-01-02T08:37:11.850
> 
> 标签：c++, templates, c++11

我似乎做错了什么，但我不确定是什么。这是我正在尝试做的最小示例：

```
#include <iostream>

using std::cout;

class CallMe {
 public:
  void Maybe() {
    cout << "A";
  }
};

class TemplateValue {
 public:
  static CallMe call_me;
};

template<typename T>
void CallMemberMember() {
  T::call_me.Maybe();
}

int main(int argc, char *argv[]) {
  CallMemberMember<TemplateValue>();
} 
```

当我尝试构建它时，我收到一个链接错误：

```
$ clang++ --std=c++11 repro_link_error.cc
Undefined symbols for architecture x86_64:
  "TemplateValue::call_me", referenced from:
      void CallMemberMember<TemplateValue>() in repro_link_error-9BE9gw.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T08:39:41.360

您需要为静态成员提供定义`call_me`：

```
CallMe TemplateValue::call_me;
int main(int argc, char *argv[]) {
  CallMemberMember<TemplateValue>();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T08:40:51.633

这与模板无关：您需要为静态类成员提供*定义：*

```
class TemplateValue {
 public:
  static CallMe call_me;
};

CallMe TemplateValue::call_me; 
```

（你应该学会区分编译器错误和链接器错误。你的代码编译得很好，只是不完整。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:42:20.620

您声明`call_me`为静态的。静态对象需要定义，就像方法和函数一样。您需要像这样初始化它：

```
CallMe TemplateValue::call_me = CallMe(); 
```

# ios - popToRootViewControllerAnimated 后无法隐藏后退按钮

> ID：14119023
> 
> 赞同：0
> 
> 时间：2013-01-02T08:37:47.640
> 
> 标签：ios, uinavigationcontroller

我正在使用一个 NavigationController，它的第一个视图控制器是一个没有任何 UI 的“决策者”类。因此，以它为根，检查本地数据库，如果我们有某些项目，决策者 VC 将推送某个 VC，或者如果没有项目，它将推送另一个 VC。所以它真的就像一棵有 2 个树枝的树。

在分支 1 的某个时刻，我们有一些 VC 被推入堆栈，用户可能会删除他们的最后一个“项目”，所以我想调用 popToRootViewControllerAnimated 并让我的决策者正确路由到分支 2。一切正常，除了在导航栏中，我无法摆脱分支 2 上第一个 VC 中的后退按钮，其中包含分支 1 中最后一个 VC 的标题。

这是图表导航（有点）：

```
NavController
DecisionMaker
   branch1VC1
      branch1VC2
         branch1VC3
   branch2VC1
      branch2VC2 
```

如果我们在 branch1VC3 并且我删除最后一个项目然后调用 popToRootViewControllerAnimated，它会通过 DecisionMaker 并正确降落在 branch2VC1，但它有一个带有标签“branch1VC3”的后退按钮。当你按下按钮时，它不会做任何事情。我还注意到，当我单击底部导航栏中的另一个按钮（将您带到“关于页面”）时，我会在“关于”页面顶部看到的正常后退按钮不存在，所以我无法返回。基本上，导航被这一点搞砸了。

我试过了：

*   在目标 VC (branch2VC1) 中调用 self.navigationItem.hidesBackButton = YES 但它不起作用。
*   调用 self.navigationItem.backBarButtonItem = NULL 相同。
*   调用 self.navigationItem.leftBarButtonItem = NULL 相同（所有这些都在 viewDidLoad 和 viewWillAppear 中尝试过）
*   在 DecisionMaker VC 中将 self.title 设置为 null。这只是将后退按钮内的文本转换为“后退”的效果，但一旦完成导航到 VC，它仍然存在。
*   调试以查看我认为在堆栈上的 VC 肯定是，即在 DecisionMaker VC 内部只有 1 个（本身），在 branch2VC1 内部有 2 个。

基本上，对我来说，问题似乎可能是 pop to root 操作与新推送到另一个分支的 UI 周期相同。但我不明白为什么这不可行。我发现[这个 SE 问题](https://stackoverflow.com/questions/7998348/poptorootviewcontrolleranimated-doesnt-clear-the-back-button)我认为可能是相同的，但实际上并没有任何答案。

**编辑：** 解决方案是在执行我的任何自定义逻辑和导航之前在 DecisionMaker VC 上调用 super.viewWillAppear。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self decideViewController];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:03:38.303

如果视图层次结构被推入`viewWillAppear`，或者在新 UI 正确加载之前的某个地方，它们几乎总是会出现问题。确保在正确的时间推送新视图。

# android - sqlite 更新查询问题

> ID：14119025
> 
> 赞同：1
> 
> 时间：2013-01-02T08:37:51.403
> 
> 标签：android, android-sqlite

我有一个查询必须将数据库中的值减 1。 [这](https://stackoverflow.com/questions/14068983/restructuring-the-database-after-deleting-a-row)是实际问题的链接和我收到的答案

```
update t
set num = num-1
where num > <val deleted> 
```

现在上面正在将数据库中的实际数字更新为字符串“num-1”。如何减小值而不将值更改为字符串“num-1”。列的数据类型是整数。

实际查询是：

```
ContentValues dataToInsert = new ContentValues();                          
dataToInsert.put(MARKER_ID, MARKER_ID+"-1");
String where = /*IMAGE_ID_F+" = " +imageId+ " AND "+*/MARKER_ID+" > "+markerId;
int resultUpdate = db.update(TABLE_DEFECTS, dataToInsert, where, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:36:56.900

`update`是一种专门设计为不接受任何此类计算的方法。您应该在 contentValues 中输入您想要的确切值。

为了您的目的，您需要`rawQuery`：

```
db.rawQuery("update " + TABLE_DEFECTS + " set " + MARKER_ID + " = " + MARKER_ID + " -1 where " + MARKER_ID + " > ?", new String[] { String.valueOf(markerId) }); 
```

# python - 如何在 django-tastypie 上上传带有 POST 请求的文件？

> ID：14119031
> 
> 赞同：4
> 
> 时间：2013-01-02T08:38:38.823
> 
> 标签：python, django, tastypie

> **可能重复：**
> [Django-tastypie：POST 中文件上传的任何示例？](https://stackoverflow.com/questions/12381016/django-tastypie-any-example-on-file-upload-in-post)

我目前像这样向我的 API 发出 cURL POST 请求

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"username":"theusername", "api_key":"anapikey", "video_title":"a title", "video_description":"the description"}' http://localhost:8000/api/v1/video/ 
```

但现在我需要能够将视频文件添加到上传中。关于使用 Tastypie 上传文件的问题，我已经四处寻找了几个小时，但我没有提出一个可靠的回应。我需要添加 Base64 编码吗？如果有怎么办？使用 POST 请求上传文件后，如何访问该文件？只是正常的 request.FILES 动作？我不希望将文件保存到数据库，只是获取文件的路径。

```
#Models.py
class Video(models.Model):
    video_uploader = models.ForeignKey(User)
    video_path = models.CharField(max_length=128)
    video_views = models.IntegerField(default=0)
    upload_date = models.DateTimeField(auto_now_add=True)
    video_description = models.CharField(max_length=860)
    video_title = models.SlugField() 
```

我对如何为 Tastypie 实现文件上传系统感到非常困惑，因此非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T07:39:41.447

这是`MultiPart`通过`django-tastypie`.

**模型.py**

```
class Video(models.Model):
    video_uploader = models.ForeignKey(User)
    video = models.FileField(_('Video'), upload_to='path_to_folder/') # save file to server
    video_views = models.IntegerField(default=0)
    upload_date = models.DateTimeField(auto_now_add=True)
    video_description = models.CharField(max_length=860)
    video_title = models.SlugField() 
```

**api.py**

```
class MultipartResource(object):
    def deserialize(self, request, data, format=None):
        if not format:
            format = request.META.get('CONTENT_TYPE', 'application/json')
        if format == 'application/x-www-form-urlencoded':
            return request.POST
        if format.startswith('multipart'):
            data = request.POST.copy()
            data.update(request.FILES)
            return data
        return super(MultipartResource, self).deserialize(request, data, format)

class VideoResource(MultipartResource, ModelResource):
   """
   Inherit this Resource class to `MultipartResource` Class
   """
   # Assuming you know what to write here 
   ... 
```

然后通过`CURL`

```
curl -H "Authorization: ApiKey username:api_key" -F "video=/path_to_video/video.mp3" -F "video_title=video title" http://localhost:8000/api/v1/video/ -v 
```

# .net - 我应该为我的程序使用什么模式/框架？

> ID：14119038
> 
> 赞同：-2
> 
> 时间：2013-01-02T08:39:45.630
> 
> 标签：.net, design-patterns, frameworks

我的程序应该像汽车模拟器一样运行。我有很多汽车模型，每个汽车模型都有自己的一组属性。这些汽车的属性可能相同，也可能不同。例如，一辆车可以有 3 个属性，而另一辆车可以有相同的 4 个属性，其中 3 个属性与第一辆车相同。而且，情况可能是两辆车可以具有相同的属性名称但具有不同的数据类型。还有可能添加另一个模型和/或属性。我应该为我的程序使用什么模式或框架。帮助我的极客！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:52:08.293

弄清楚汽车的基本属性是什么，并将它们放在抽象基类（或接口，但基类更合适）中。如果某些属性位于一类汽车上，而其他属性位于另一类汽车上，则可以建立更深层次的层次结构。（明白了吗，类？）如果这些属性类重叠并且您需要多重继承，您可以使用接口。

您的一处房产有哪些不同的类型？如果这些是用户类型，请给它们一个公共基类。否则给属性不同的名称。无论如何，这听起来像是代码异味

并非每个属性都应该在基类中。仅在适当的情况下使用继承。但也要重新检查您认为需要哪些属性并将它们合理化。我敢肯定你在某个地方做出了错误的选择，但你没有给出你的属性的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:08:59.297

您可以使用工厂模式

会有一个ICar界面。

并且所有的汽车模型都将是具体的类。在 ICar 接口中编写所有合同。

在具体类中只实现必要的属性。

# solr - solr 可以用两种不同的颜色突出显示两个不同的搜索词吗？

> ID：14119041
> 
> 赞同：1
> 
> 时间：2013-01-02T08:39:55.503
> 
> 标签：solr, solrnet

我是 solr 的新手，并被要求实施搜索结果突出显示。我的搜索查询是这样的，

查询 = 类似**“searchterm1”**和**“searchterm2”的文本**

现在我需要指示 solr分别以**黄色**和**蓝色突出显示****'searchterm1'**、**'searchterm2'**。这甚至可能与solr有关吗？如果是的话，我该怎么做？

 ****这是当前突出显示搜索结果的代码片段。

```
 private AbstractSolrQuery _query = new SolrQuery(searchterm1) && new SolrQuery(searchterm2);

    public SolrQueryResults<Document> Execute(string defaultField)
    {
        var results = _solr.Query(_query, new QueryOptions
        {
            Rows = 100,
            Fields = Document.GetPropertiesExceptList(new List<string>{"text","text_exact"}).ToArray(),
            ExtraParams = new Dictionary<string, string> {
                    { "df", defaultField },
                    { "hl.fragsize", "0" },
                    { "hl", "true" }
            }
        });

        Highlight(results);
        return results;
    }

    private void Highlight(SolrQueryResults<Document> results)
    {
        foreach (var result in results)
        {
            foreach (var highlightedSnippet in results.Highlights[result.Id.ToString()])
            {
                result.SetProperty("content", highlightedSnippet.Value.ToList());
            }
        }
    } 
```

对此的任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:55:11.753

您可以检查[hl.fragmentsBuilder](http://wiki.apache.org/solr/HighlightingParameters#hl.fragmentsBuilder)它将允许您返回不同颜色的片段。我只是不确定它是否适用于搜索词、匹配项或字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:59:34.900

`requestHandler`您可以在定义中设置以下参数`solrconfig.xml`以用不同的颜色突出显示。您可以根据需要设置背景颜色。

```
 <str name="hl.simple.pre">&lt;b style="background:yellow"&gt;</str>
   <str name="hl.simple.post">&lt;/b&gt;</str> 
```

完整的示例 requestHandler 可能类似于：

```
 <requestHandler name="/select" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">10</int>
       <str name="df">text</str>

     <!-- Highlighting defaults -->
       <str name="hl">on</str>
       <str name="hl.fl">*</str>
       <str name="hl.simple.pre">&lt;b style="background:yellow"&gt;</str>
       <str name="hl.simple.post">&lt;/b&gt;</str>
     </lst>
   </requestHandler> 
```

有关详细信息，您可以查看[HighlightingParameters。](http://wiki.apache.org/solr/HighlightingParameters)****

# web-services - 仅由 Java 客户端使用的内部 WebService（与 EJB 应用程序）架构师

> ID：14119044
> 
> 赞同：0
> 
> 时间：2013-01-02T08:40:09.553
> 
> 标签：web-services, architecture, soa

我有两个位置，`A`在美国的位置和`B`在埃及的位置。

**我正在位置部署一个 Web 应用程序，该应用程序`B`需要从位置数据库中获取数据`A`。**

我需要创建一些要部署的应用程序，`A`以便为 Web 应用程序提供`B`数据。（我知道 Web App on`B`可以直接连接到 DB，`A`但一些限制阻止了我）

对于应用程序`A`，我应该创建：

1.  **JSON**网络服务？
2.  WebService 将**序列化**的对象返回给 Web 应用程序进行反序列化和使用？
3.  可以从 webapp**通过 JNDI 远程访问的 EJB 应用程序？**

我知道 JSON 是轻量级的，但它更快还是序列化（选项 2）？还是我应该让应用服务器为我做这件事（选项 3）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:26:22.003

在选择中（JSON、WS、EJB）

JSON是客户端可以解释的东西，目标应用程序可以直接使用数据库数据（json）而无需进一步处理-最佳方法

WS 方法似乎也很好，但在客户端直接处理有点复杂（取决于交换的数据） - 可接受的方法

EJB 方法很复杂，因为您的 APP B 需要从 APP A 收集数据并处理和（可能转换）并传播到前端。

# jsf - Primefaces Picklist“必需”验证失败

> ID：14119054
> 
> 赞同：2
> 
> 时间：2013-01-02T08:40:56.733
> 
> 标签：jsf, primefaces

我有一个选择列表，每次使用时都需要提供一个值，并且在未输入值时`required`我使用它来显示一条消息。`requiredMessage`但是它们都不适用于我的选择列表，如下所示：

```
<p:pickList value="#{parameterValueDialog.selectedModelSeries}"
            var="item" itemValue="#{item}" required="true"
            converter="pickListConverter" requiredMessage="#{msg.validation_message}"> 
```

有谁知道如何解决这个问题？这是 Primefaces 库本身的问题吗？

**编辑：**发布`getAsObject()`方法

```
@Override

public final Object getAsObject(final FacesContext ctx, final UIComponent component, final String string) {

Object returnObject = null;
Object dualList = ((PickList) component).getValue();
DualListModel<Item<?>> listModel = (DualListModel<NamedItem<?>>) dualList;
for (Item<?> item : listModel.getSource()) {
    String id = String.valueOf(item.getId());
    if (string.equals(id)) {
        returnObject = item;
        break;
        }
    }
    if (returnObject == null) {
        for (Item<?> item : listModel.getTarget()) {
            String id = String.valueOf(item.getId());
            if (string.equals(id)) {
                returnObject = item;
                break;
            }
        }
    }

return returnObject; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T04:13:15.140

您可以通过提供在您的pickList 中使用的验证器方法来解决您的问题。

就我而言，我的目标列表包含成员名称，我必须确保该列表包含至少一个成员并且第一个成员具有特殊状态。您首先必须将 pickList 返回的对象转换为 DualListModel 并掌握目标列表。然后，您可以检查它是否为空并执行所需的任何其他验证。这是我的验证器方法：

```
public void valideLocationsResponsables(FacesContext contexte, UIComponent composant, Object locationResps) throws ValidatorException {
    DualListModel<LocationsResponsables> dualListModel;
    if (locationResps instanceof DualListModel) {
        dualListModel = (DualListModel<LocationsResponsables>) locationResps;
        List<LocationsResponsables> listeResponsables = dualListModel.getTarget();
        ListIterator<LocationsResponsables> iterateur = listeResponsables.listIterator();
        // Your validation criteria here
        if (listeResponsables.isEmpty() || !iterateur.next().getIdMembreReserv().getStatut().isPeutReserver()) {
            ((UIInput) composant).setValid(false); // Pick list is made invalid
            FacesMessage msgErreur = new FacesMessage();
            msgErreur.setSeverity(FacesMessage.SEVERITY_ERROR);
            msgErreur.setDetail("Your error message here");
            throw new ValidatorException(msgErreur);
        }
    }
} 
```

验证器方法使用验证器关键字连接到pickList，如下所示：

```
 <p:pickList id="listeResp" value="#{locationsControleur.locationsResponsablesListe}" var="resp" effect="puff"
                            itemValue="#{resp}" itemLabel="#{resp.idMembreReserv.prenomNom}"
                            converter="#{locationsResponsablesListeConvertisseur}"
                            validator="#{locationsControleur.valideLocationsResponsables}">
                <f:facet name="sourceCaption">#{msgs.LocationsMembresEligibles}</f:facet>
                <f:facet name="targetCaption">#{msgs.LocationsResponsablesChoisis}</f:facet>
        </p:pickList>
                <p/><p/>
                <h:message id="listeRespMsg" for="listeResp" errorStyle="color: red"/> 
```

希望这能有所帮助。

# java - 重启elasticsearch节点

> ID：14119062
> 
> 赞同：65
> 
> 时间：2013-01-02T08:42:07.030
> 
> 标签：java, scala, elasticsearch

在elasticsearch中重启节点的正确方法是什么？（最好通过 REST API，java API 也可以）

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-11T12:10:07.277

重新启动节点的正确方法是关闭它，使用[关闭 API](https://web.archive.org/web/20120701041008/http://www.elasticsearch.org/guide/reference/api/admin-cluster-nodes-shutdown.html)或向进程发送`TERM`信号（例如使用`kill $PID`）。

关闭后，您可以使用用于运行 elasticsearch 的任何内容（例如服务包装器）启动新节点，或者仅从命令行启动它。

如果您正在使用服务包装器，您可以通过将`restart`命令传递给节点来重新启动节点：例如`/etc/init.d/elasticsearch restart`，但这只是上述的便利包装器。

该`restart`API 自 0.11 版以来已被禁用，因为它存在问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-12-08T10:05:34.357

每次节点宕机和/或新节点出现时，集群都会重新分配分片，当您只需要重新启动节点时可能不需要这样做，因此您可以使用滚动重启：

1.  首先禁用分片分配：

    PUT /_cluster/settings { "transient" : { "cluster.routing.allocation.enable" : "none" } }

2.  重启节点`service elasticsearch restart`

3.  启用分片分配：

    PUT /_cluster/settings { "transient" : { "cluster.routing.allocation.enable" : "all" } }

更多信息：[这里](https://www.elastic.co/guide/en/elasticsearch/guide/current/_rolling_restarts.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-02T08:50:43.133

有一个类似于[关闭 API 的重启 API](http://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-shutdown.html)。只需将“关机”替换为“重启”即可。另请参阅[github 上的问题](https://github.com/elasticsearch/elasticsearch/issues/155)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-12-10T05:53:32.343

要重启 elasticserch 服务，首先检查状态，然后重启，这将给出一个清晰的画面

```
sudo service elasticsearch.service status -l    
sudo service elasticsearch.service restart 
```

# django - django站点地图xml文件

> ID：14119064
> 
> 赞同：4
> 
> 时间：2013-01-02T08:42:18.980
> 
> 标签：django

嗨，我是 django 的新手，我需要为我的书模型创建一个站点地图，但是这样做之后，我在项目目录中找不到任何 xml 文件。我错过了什么吗？我的 sitemap.py 是：

```
class BookSitemap(Sitemap):
    changefreq = "weekly"
    priority = 0.5

    def items(self):
        return Book.objects.all()

    def lastmod(self, obj):
        return obj.pub_date 
```

网址.py：

```
sitemaps = {
 'book':BookSitemap,
}
url(r'^sitemap.xml$',
'django.contrib.sitemaps.views.index',
{'sitemaps': sitemaps}),

url(r'^sitemap-(?P<section>.+).xml$',
'django.contrib.sitemaps.views.sitemap',
{'sitemaps': sitemaps}), 
```

设置.py

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:46:54.167

来自[文档](https://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/)：

> 这告诉 Django 在客户端访问 /sitemap.xml 时构建站点地图。

站点地图不是静态文件，而是每次有人访问您的站点地图网址时的 xml 响应。测试它是否工作的最快方法是启动您的 django 服务器并将浏览器指向您的站点地图之一（http://localhost:8000/sitemap-<您的部分标识符>.xml，在您的情况下），您应该看到它

# php - 使用 TideSDK 执行后台 PHP 任务

> ID：14119067
> 
> 赞同：0
> 
> 时间：2013-01-02T08:42:29.917
> 
> 标签：php, javascript, curl, tidesdk

是否可以使用 TideSDK 在后台运行 PHP 代码？我正在尝试在 PHP 中使用 curl 上传文件。无论 Javascript 立即调用 PHP 以响应事件还是使用事件来安排调用，GUI 在上传期间都会变得无响应。

Javascript 直接从处理程序调用 PHP：

```
upload_file(path_to_file) 
```

Javascript 安排直接从处理程序调用 PHP：

```
setTimeout(function() {upload_file(path_to_file);}, 250); 
```

文件上传是使用 PHP curl 函数完成的。我都试过了`curl_exec()`和`curl_multi_exec()`。看起来很有希望，但示例代码反复`curl_multi_exec()`调用。`curl_multi_exec()`

我正在考虑打破这个循环以在循环之间返回 JS 以尝试解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:23:31.033

AFAIK 这是不可能的。我发现解决这个问题的唯一方法是使用 Ti.Process 运行后台进程——它基本上是通过 CLI 运行你的脚本。但是，我只针对一个平台 - osx。

# mysql - 查询以获取每个 EmpGroup 的任意 2 个 EmpCode

> ID：14119070
> 
> 赞同：1
> 
> 时间：2013-01-02T08:42:51.400
> 
> 标签：mysql, sql

需要编写一个 SQL 查询

得到任何 2`EmpCode`为`EmpGroup``city = del`

*   `EmpCode`是独特的
*   1`EmpCode`只能有 1`EmpGroup`
*   1`EmpGroup`可以有多个`EmpCodes`

**表**：EMP_CITY

```
EmpCode  EmpGroup   City
1         A          del
2         A          del
3         B          del
4         B          del
5         C          del
6         C          del
7         A          ban
8         A          del 
```

**输出**

```
EmpGroup: A
    1
    2
EmpGroup: B
    3
    4
EmpGroup: C
    5
    6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:11:42.627

试试这个查询

```
SET @level = 0;
SET @group = '';

SELECT 
EmpCode,EGroup
FROM (
    SELECT 
        City,
        EmpCode,
        EmpGroup,
        @level := IF(@group = EmpGroup, @level+1, 1) AS level, 
        @group := EmpGroup as EGroup 
    FROM test
    ORDER BY EmpGroup 
) rs
WHERE level < 3 
```

输出

```
EMPCODE     EGROUP
1           A
2           A
3           B
4           B
5           C
6           C 
```

这是 sqlfiddle[演示](http://sqlfiddle.com/#!2/bfa8b/16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:49:30.700

1.  您必须获取整个结果集，然后从每个 emp 组中打印 2 个结果。

    ```
    select EmpCode, EmpGroup, City
      from EMP_CITY
     ORDER BY EmpGroup 
    ```

2.  您可以在您的应用程序中获取 EmpGroup；然后为每个 Emp 组运行不同的查询。只有当每个 emp 组有很多员工时，这才会比 #1 快；这样单个查询的额外开销就会被更少的总返回行数所抵消。

    ```
    select DISTINCT EmpGroup
      from EMP_CITY
     ORDER BY EmpGroup

    select EmpCode, City
      from EMP_CITY
     where EmpGroup = ? limit 2 
    ```

    `?`作为各种 emp 组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:11:50.683

如果可用，请使用顶部

```
SELECT TOP 2 EMPCODE FROM EMPLIST WHERE EMPGROUP=A 
```

如果它不可用，那么试试这个

```
SELECT EMPCODE FROM EMPLIST WHERE EMPGROUP=A LIMIT 2 
```

对于 oracle 试试这个

```
SELECT EMPCODE FROM EMPLIST WHERE EMPGROUP=A and ROWNUM<3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:26:17.603

请看这个：

```
SELECT EmpGroup, EmpCode
FROM EMP_CITY a
WHERE EmpCode <= (
  SELECT EmpCode
  FROM Emp_CITY b
  WHERE EmpGroup = a.EmpGroup
  LIMIT 1, 1
) 
```

我尝试通过 EmpGroup **WHERE EmpGroup = a.EmpGroup**获取行号 2 EmpCode 组，然后我选择 EmpCode 小于或等于我在子查询中获得的行号的位置。

# ruby-on-rails - Ruby/Rails/Hobo Dryml 在哪里 文件？

> ID：14119072
> 
> 赞同：0
> 
> 时间：2013-01-02T08:43:03.083
> 
> 标签：ruby-on-rails, paperclip, hobo

我正在尝试移植一个 ruby​​/rails/hobo 应用程序。如何在 dryml 中使用“if”标签？

```
 <if:dist_image>
     <div>
       <a href="#{image.url}">
         <img src="#{image.url :thumbnail}" title="Click to enlarge"/>
       </a>
     </div>
  </if> 
```

dist_image 可能是一个对象（包含一个图像），也可能是 nil。似乎没有任何效果。另外我在dryml中找不到条件运算符的任何文档。

我得到错误：

```
"undefined method `url' for "<img alt=\"Assets\" src=\"/assets/\">":ActionView::OutputBuffer" 
```

更新：大家好，感谢您的建议。我尝试了以下所有方法：

```
 <if test="&dist_image">
  <if test="&dist_image.blank?">
  <if test="dist_image.blank?">
  <if test="dist_image"> 
```

它们都产生相同的错误。:( 我遵循了文档中的语法，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:05:26.080

问题不在于您的 if 语句，而在于 #{image.url}。您可能想要#{this.image.url} 或#{this.url} 或其他东西。 `<if:dist_image>`将上下文设置为`this.dist_image`，因此它相当于`this = this.dist_image`.

以您的方式调用它意味着您正在调用一个名为“image”的助手，而不是从您的对象中获取 image 属性。

顺便说一句，您可能不需要查找文档`<if>`，您可能需要的是 DRYML 上下文的文档，该文档也在 DRYML 指南中。

# android - onActivityResult() 不会在 TabActivity 中被调用

> ID：14119075
> 
> 赞同：0
> 
> 时间：2013-01-02T08:43:23.923
> 
> 标签：android, android-tabhost

我创建了子类，`TabActivity`它包含四个`TabHost`选项卡。

我只想从我的应用程序中选择联系人，为此我使用以下代码

```
private final int PICK = 2;
Intent intentContact = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI); 
    parentActivity.startActivityForResult(intentContact, PICK); 
```

Android Contact Picker 屏幕调用成功，当我点击任何联系人时，它会将我重定向到我调用它的应用程序的最后一个屏幕，但`onActivityResult`没有调用方法。

在这方面我需要你的帮助。如果我忘记提及任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:14:09.670

如您所愿，这里有一些代码内容。

```
public class MyActivity extends TabActivity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
            super.onCreate(savedInstanceState);

            // some other stuff

            TabHost.TabSpec firstTab = tabHost.newTabSpec("firstTab");

            firstTab.setContent(new Intent(this, FirstTabActivity.class)); // your class with content picker

            tabHost.addTab(firstTab);
    }
} 
```

这是另一个

```
public class FirstTabActivity extends Activity
{
    private static final int PICK_REQUEST_CODE = 2;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
            super.onCreate(savedInstanceState);

            // some stuff

            Button pickContactButton = findViewById(R.id.btn_pick_contact);

            pickContactButton.setOnClickListener(new View.OnClickListener()
            {
                    @Override
                    public void onClick(View view)
                    {
                            Intent intentContact = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
                            startActivityForResult(intentContact, PICK_REQUEST_CODE);
                    }
            });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
            super.onActivityResult(requestCode, resultCode, data);

            if(PICK_REQUEST_CODE == requestCode && resultCode == RESULT_OK)
            {
                    // do some stuff
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:16:32.197

其他的做法是这样...

```
1.On button click(which you want to open intent) open another activity.
2.On another activity's onCreate() open that intent.
3.onActivityResult set static data which is on previous activity and call finish().
4.This way no one ever know that you opened such a activity and you ll get your data.
:) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:48:34.807

[TabActivity](https://developer.android.com/reference/android/app/TabActivity.html)有几个奇怪的行为，这可能是其中之一，您可以解决它以使其工作，但我绝对建议您开始删除它，自 API 级别 13 以来它已被弃用。阅读有关它的更多信息：（[https ://developer.android.com/reference/android/app/TabActivity.html](https://developer.android.com/reference/android/app/TabActivity.html) )

# windows-phone-7 - 推送通知注意事项

> ID：14119079
> 
> 赞同：0
> 
> 时间：2013-01-02T08:44:05.167
> 
> 标签：windows-phone-7, push-notification, apple-push-notifications, google-cloud-messaging

根据我的阅读，平台推送通知服务（APNS、GCM 和 WNS）是免费的。但是是否有警告（定期消息限制、重复消息、产生的成本等）。我需要在我的服务器代码中处理哪些条件以避免这些警告？

谢谢你，我希望我的问题是“程序化的”，足以在这个论坛上获得资格。

**编辑：** @Joel 同意。我会将我的问题范围限制在 APNS。现在我需要处理哪些条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:02:55.130

对于 Windows 通知服务 (WNS)，您需要处理[MSDN 上记录的响应标头](http://msdn.microsoft.com/en-us/library/windows/apps/hh465435.aspx)。

标头喜欢`dropped`并且`channelthrottled`会通知您的服务器您正在做的事情是错误的。

另请参阅[推送通知的指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh761462.aspx)。

# sql-server - 特定数据库上的 DataAdapter.fill(dataset) 超时异常

> ID：14119081
> 
> 赞同：2
> 
> 时间：2013-01-02T08:44:07.513
> 
> 标签：sql-server, vb.net, stored-procedures, timeout

在 VB.NET 应用程序 (VS2005) 中，我通过 SQLDataAdapter 调用存储过程。在我的本地数据库上一切正常。如果我在另一个数据库上执行此操作，则会出现超时异常。这是代码：

```
 Public Overloads Shared Function ExecuteDataset( _
                                                    ByVal connection As SqlConnection, _
                                                    ByVal commandType As CommandType, _
                                                    ByVal commandText As String, _
                                                    ByVal ParamArray commandParameters() As SqlParameter) As DataSet
        If (connection Is Nothing) Then Throw New ArgumentNullException("connection")
        ' Create a command and prepare it for execution
        Dim cmd As New SqlCommand
        Dim ds As New DataSet
        Dim dataAdatpter As SqlDataAdapter
        Dim mustCloseConnection As Boolean = False

        dataAdatpter = Nothing

        PrepareCommand(cmd, connection, CType(Nothing, SqlTransaction), commandType, commandText, commandParameters, mustCloseConnection)
        cmd.CommandTimeout = 0 'I get a timeout exception if I leave this out
        Try
            ' Create the DataAdapter & DataSet
            dataAdatpter = New SqlDataAdapter(cmd)

            ' Fill the DataSet using default values for DataTable names, etc
            dataAdatpter.Fill(ds)

            ' Detach the SqlParameters from the command object, so they can be used again
            cmd.Parameters.Clear()
        Finally
            If (Not dataAdatpter Is Nothing) Then dataAdatpter.Dispose()
        End Try
        If (mustCloseConnection) Then connection.Close()

        ' Return the dataset
        Return ds
    End Function ' ExecuteDataset 
```

我已经直接在数据库上执行了存储过程，并且运行良好且快速。我还尝试将 cmd 的 CommandTimeout 属性设置为 0。当我这样做时，存储过程会被执行，但这需要很长时间。同样，如果我在本地数据库上工作，则没有问题。

这是超时异常的堆栈跟踪

```
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
   at KlantenApplicatie.BL.DAL.SQLHelper.ExecuteDataset(SqlConnection connection, CommandType commandType, String commandText, SqlParameter[] commandParameters) in C:\BitProjects\teamsystem\gerher\KlantenApplicatie.BL.DAL\sqlHelper\SQLHelper.vb:line 545 
```

关于这可能是什么原因的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:34:53.337

我找到了解决方案。

结果证明这是查询优化的参数嗅探问题。我需要将 OPTION(RECOMPILE) 添加到创建存储过程的 sql 中。

这个问题在这里解释：

[http://www.sqlmag.com/article/sql-server/-using-the-recompile-query-hint-to-solve-parameter-sniffing-problems-94369](http://www.sqlmag.com/article/sql-server/-using-the-recompile-query-hint-to-solve-parameter-sniffing-problems-94369)

和这里：

[http://social.technet.microsoft.com/Forums/en-US/sqldatabaseengine/thread/74a85e26-be9b-4830-9638-6aa30fd9e3e7](http://social.technet.microsoft.com/Forums/en-US/sqldatabaseengine/thread/74a85e26-be9b-4830-9638-6aa30fd9e3e7)

# c++ - 将类对象传递给内核

> ID：14119088
> 
> 赞同：9
> 
> 时间：2013-01-02T08:44:36.357
> 
> 标签：c++, cuda

我们可以将对象传递给内核函数吗？

考虑我有一堂课

```
class MyClass
{
    public:
        int value;
        float rate;
        MyClass()
        {
            value = 0; rate = 0;
        }
        MyClass(int v,float r)
        {
            value = v; rate = r;
        }
}; 
```

我的内核采用 MyClass 对象的数组

```
__global__ void MyKernel(MyClass * mc)
{
    //Some Calculation
} 
```

我可以传递数组吗？如何分配内存？？现在我尝试使用以下代码得到 CudaMemcpy 错误

```
cudaError_t cudaStatus;

MyClass darr[10] ;
cudaStatus = cudaMalloc((void**)&darr, size * sizeof(MyClass));

if (cudaStatus != cudaSuccess) {
    fprintf(stderr, "cudaMalloc failed!");
    goto label1;
}

cudaStatus = cudaMemcpy(darr, arr, size * sizeof(MyClass), cudaMemcpyHostToDevice);
//arr is a host array 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T09:00:51.807

这里有一些问题，并非都与您看到的任何错误直接相关。

首先，您必须在主机和设备中定义每个类方法，以便可以在两个内存空间中实例化该类（当您进行复制时，仅复制每个实例的数据成员）。所以你的类声明应该是这样的：

```
class MyClass
{
    public :
        int value;
        float rate;
        __device__ __host__ MyClass()
        {
            value = 0; rate = 0;
        }
        __device__ __host__ MyClass(int v,float r)
        {
            value = v; rate = r;
        }
        __device__ __host__ ~MyClass() {};
} 
```

然后，您需要正确分配设备内存。如果您希望设备上有一个包含 10 个成员的数组，`MyClass`请将其分配并复制到设备，如下所示：

```
MyClass arr[10];
MyClass *darr;
const size_t sz = size_t(10) * sizeof(MyClass);
cudaMalloc((void**)&darr, sz);
cudaMemcpy(darr, &arr[0], sz, cudaMemcpyHostToDevice); 
```

[免责声明：所有代码在浏览器中编写，从未编译或测试，使用风险自负]

然后，您可以将`darr`作为参数从主机传递给内核。

# .htaccess - 端口号上的 htpasswd

> ID：14119092
> 
> 赞同：0
> 
> 时间：2013-01-02T08:45:05.770
> 
> 标签：.htaccess, .htpasswd

是否可以使用 htpasswd 或某种 htaccess 规则来保护特定端口号。例如，我在端口 5533 上运行了数据库分析器，并希望阻止公众访问它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:32:35.830

试试这个：

```
 RewriteCond %{SERVER_PORT} !5533 # If port is 5533
    RewriteRule ^ - [E=NO_AUTH:1] # We're setting the env variable for any request
                                  # because condition works only on next line

    Order deny,allow 
    Deny from all
    AuthType basic
    AuthName "You have to be logged in"
    AuthUserFile "/etc/httpd/conf.d/.htpasswd" #Your htpasswd path
    Require valid-user
    Allow from           env=NO_AUTH # If env variable was set
                                     # we can pass the request only through authentication
    Satisfy              Any 
```

# visual-studio-2010 - 如何翻译一个程序？

> ID：14119095
> 
> 赞同：0
> 
> 时间：2013-01-02T08:45:35.100
> 
> 标签：visual-studio-2010, visual-studio, user-interface, translation

我在visual studio中用英文写了一个程序。现在我想为其添加语言选择，以便用户可以将程序更改为其他语言。我从互联网上搜索，但大多是关于需要使用第三方程序的方法。我可以只创建一些文件，如 .txt 或 .dll 或任何加载来进行翻译吗？

谢谢！

**编辑**

理想的方法是创建一个带有 ID 和相应语言翻译的 Microsoft Excel 文件。然后当我更改语言时，它可以使用此文件进行转换。这才是我真正想要的。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:57:45.357

它有两个部分

1.  编写程序，以便它可以显示各种语言的文本。只解决语言问题，您需要确保程序中的所有文本都收集到一个单独的文件中。此外，您的所有文本都应使用 Unicode 字符。外部化到外部文件的细节取决于编译器/框架。该线程提出了一些建议[——C++ 中 I18N 的资源](https://stackoverflow.com/questions/195497/resources-for-i18n-in-c) 完全国际化虽然涉及更多一点——你需要注意日期格式等。

2.  然后是关于实际提供所需翻译的部分。例如，如果您的程序有一个名为“foo”的显示项（菜单、输出字符串等），那么您需要提供您想要支持的所有语言的翻译；例如，印地语中的 foo == baz。您可以为此使用一些机器翻译；但通常它是由人类完成的。

当用户更改语言时，操作系统本身会处理标准菜单项。例如，“复制”菜单将由操作系统翻译成用户语言。但我认为，当您使用某些框架（如 MFC）并遵守框架指南时，也会发生这种情况。

# google-maps - 为标记设置 InfoWindows，并在循环中进行地理编码

> ID：14119097
> 
> 赞同：2
> 
> 时间：2013-01-02T08:45:38.703
> 
> 标签：google-maps, infowindow

下面的代码正在运行。但它没有使用初始化的标准函数，这就是为什么我不能使用在线示例为地图上的每个地址制作自定义信息窗口。

我必须如何定义它才能让它工作？

```
var address = <?php echo json_encode($adr); ?>; //define address array here
var map = new google.maps.Map(document.getElementById('map'), {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    zoom: 10
});    
var geocoder = new google.maps.Geocoder();
var image = 'http://www.site.com/images/hi.png';
var nbAddresses = address.length;
for (var i=0;i<nbAddresses;i++){
    geocoder.geocode({
        'address': address[i]
    }, 
    function(results, status) {
        if(status == google.maps.GeocoderStatus.OK) {
            new google.maps.Marker({
                position: results[0].geometry.location,
                map: map,
                icon: image,
                title:"Hello"
            });
            map.setCenter(results[0].geometry.location);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:49:13.827

这是应该完成工作的Javascript

[**工作演示**](http://jsfiddle.net/ytM6h/1/)

**脚本：**

```
geocoder.geocode({
        'address': add
    }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            mark = new google.maps.Marker({
                position: results[0].geometry.location,
                map: map
            });
            map.setCenter(results[0].geometry.location);
            setInfoWindow();
        }
    });

    function setInfoWindow() {
        google.maps.event.addListener(mark, 'click', function(event) {
            var iwindow = new google.maps.InfoWindow();
            iwindow.setContent(event.latLng.lat() + "," + event.latLng.lng());
            iwindow.open(map, this);

        });
    } 
```

**更新：** 使用循环演示如何在地理编码成功后将标题值分配给制造商-

[**小提琴**](http://jsfiddle.net/ytM6h/3/)

这里的关键是用于获取地址的循环变量在子函数的范围内不可用，因此您需要创建一个全局变量并将其递增以从数组中获取标题的新值。

# java - JSF ajax 和自定义转换器

> ID：14119103
> 
> 赞同：1
> 
> 时间：2013-01-02T08:46:27.123
> 
> 标签：java, ajax, jsf, converter, managed-bean

我对 JSF 页面上的可能 AJAX 有疑问。他没有调用bean方法。转换器工作并返回一个正确的对象，但 bean 方法不调用。如果我删除执行部分方法调用。如果我删除转换器并仅发送 Id 方法调用。他们一起失败了。

**JSF 页面**

```
<h:form id="jewelForm">
  <!-- ... -->
    <h:selectOneMenu id="material" value="#{jewelBean.material}" >
        <f:converter converterId="materialConverter"/>
        <f:selectItems value="#{jewelBean.materialList}" var="c"
                       itemLabel="#{c.name}" itemValue="#{c.id}"  />
    </h:selectOneMenu>

    <h:commandButton id="but1" value="#{titles.addThisMat}">
        <f:ajax id ="aj1"  
                listener="#{jewelBean.addMaterial}" 
                render="jewelForm:matTable"
                execute="material"/>
    </h:commandButton>

    <h:dataTable id ="matTable" 

    </h:dataTable>
    <h:commandButton value="#{titles.createThisJ}"  
                     action="#{jewelBean.saveJewel()}" />
</h:form> 
```

**豆**

```
@ManagedBean(name = "jewelBean")
@SessionScoped
public class JewelBean implements Serializable {

private Material material;

public void addMaterial() {
    MaterialJewel mj = new MaterialJewel();
    mj.setMaterial(material);
    mj.setWeight(materialWeight);
    materialJewels.add(mj);
}

public Material getMaterial() {
    return material;
}

public void setMaterial(Material material) {
    this.material = material;
} 
```

}

**转换器**

```
@FacesConverter("materialConverter")
public class materialConverter implements Converter {

@Override
public Object getAsObject(FacesContext context, UIComponent component, String value) {

    try {
    //finding object with DAO
        return material;
        }
    } catch (NumberFormatException ex) {
      }  
}

@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    return value.toString();

}
} 
```

感谢您的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:15:08.280

我已经解决了我的问题。那是在 selectOneMenu 中。主要问题是 selectOneMenu 中的[*itemValue*必须与*value*](https://stackoverflow.com/a/7097911/1204251)的类型相同。所以我必须重写我的转换器，getAsString 方法。实体的方法也必须是这样[的](https://stackoverflow.com/a/3181374/1204251)。

**固定选择 JSF 页面**

```
<h:selectOneMenu id="material" value="#{jewelBean.material}" >
      <f:converter converterId="materialConverter"/>
      <f:selectItems value="#{jewelBean.materialList}" var="c"
                     itemLabel="#{c.name}" itemValue="#{c}"  />
</h:selectOneMenu> 
```

**固定转换器法**

```
@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    Material material = (Material) value;
    return (material.getId() != 0) ? String.valueOf(material.getId()) : null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:26:24.373

删除 f:ajax 上的侦听器并将 actionListener 添加到命令按钮。这有帮助吗？

# android - 如何知道 GridView 何时完全绘制并准备就绪？

> ID：14119128
> 
> 赞同：8
> 
> 时间：2013-01-02T08:49:38.350
> 
> 标签：android, android-listview

我有一个带有自定义适配器的长 GridView，我如何知道 GridView 何时完全显示并准备就绪？

这是我在代码中的问题：

```
dashboard = (GridView) findViewById(R.id.dashboard);
dashboard.setAdapter(new ListItemsAdapter(this, allIcons));
AlertSomeItemsOfTheListView(); 
```

在顺序中，方法“AlertSomeItemsOfTheListView”在完全绘制 GridView 之前执行。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T09:19:33.917

您可以为您获取[`ViewTreeObserver`](https://developer.android.com/reference/android/view/ViewTreeObserver.html)实例`GridView`并使用它来侦听诸如`onLayout`. 你可以得到`ViewTreeObserver`你的`View`使用[`View.getViewTreeObserver()`](https://developer.android.com/reference/android/view/View.html#getViewTreeObserver())。我不确定`onLayout`event 是否足以满足您的需要，因为它并不完全意味着 a`View`已完全绘制，但您可以尝试一下。

这里有一个代码示例，您可以使用它来监听`onLayout`事件（您可以使用这样的代码，例如在`onCreate`您的方法中`Activity`）：

```
dashboard.getViewTreeObserver().addOnGlobalLayoutListener(
    new ViewTreeObserver.OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {
            AlertSomeItemsOfTheListView();

            // unregister listener (this is important)
            dashboard.getViewTreeObserver().removeOnGlobalLayoutListener(this);
        }
    }); 
```

**注意：**在调用监听器后取消注册监听器很重要。如果您不这样做，它将在每个`onLayout`不是我们想要的事件上调用（我们希望它只执行一次）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:12:34.093

当 GridView/ListView 具有适配器时，它会在显示要显示的项目时调用 getView。如果您真的需要在显示所有视图后调用方法，您可以执行类似...。

```
while(!dashboard.getAdapter().areAllItemsEnabled()){
   //wait
}

AlertSomeItemsOfTheListView(); 
```

我不肯定这会起作用，但看看[http://developer.android.com/reference/android/widget/GridView.html#getAdapter](http://developer.android.com/reference/android/widget/GridView.html#getAdapter) () 和[http://developer.android.com/reference/android /widget/ListAdapter.html](http://developer.android.com/reference/android/widget/ListAdapter.html)让它看起来会。

# c++ - 内部类模板关键字使用

> ID：14119131
> 
> 赞同：0
> 
> 时间：2013-01-02T08:49:51.913
> 
> 标签：c++, templates, visual-c++, gcc, cross-platform

> **可能重复：**
> [哪个编译器是正确的？需要模板化返回类型之前的“模板”？](https://stackoverflow.com/questions/6232294/which-compiler-is-right-template-before-templated-return-type-needed)

如果我有以下课程：

```
template <typename T1>
class OuterClass
{
    template <typename T2>
    class InnerClass
    {
    };
}; 
```

当我尝试引用`OuterClass<int>::InnerClass<int>`时，GCC 抱怨我需要`template`之前使用的关键字`InnerClass`，但 Visual Studio 抱怨该关键字。显然我可以使用宏来解决这个问题，但感觉有点难看。在这种情况下谁是对的，有更好的解决方案吗？

海合会：

```
OuterClass<int>::template InnerClass<int> 
```

对比：

```
OuterClass<int>::InnerClass<int> 
```

解决方案：

```
#if defined(_MSC_VER)
#define INNER_TEMPLATE
#else
#define INNER_TEMPLATE template
#endif

OuterClass<int>:: INNER_TEMPLATE InnerClass<int> 
```

# php - 未定义索引 $_POST，但已定义

> ID：14119132
> 
> 赞同：-2
> 
> 时间：2013-01-02T08:49:55.767
> 
> 标签：php, undefined-index

我定义了一个`$_POST`索引，但收到未定义的错误消息。

这是代码：

```
 if (isset($_POST['submit']) AND ($_POST['userid']) AND ($_POST['firstname']) AND ($_POST['lastname']) AND ($_POST['address']) AND ($_POST['ZIP']) AND ($_POST['phonenumber']) AND ($_POST['mail']) AND ($_POST['group']))
       {
        $result = $this->sendEmail(
           $_POST['userid'], 'mail@mymail.com', 'mail@mymail.com', $_POST['firstname'], $_POST['lastname'], $_POST['address'], $_POST['ZIP'], $_POST['phonenumber'], $_POST['mail'], $_POST['group']
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:56:45.977

适用`isset()`于您的每个`$_POST`如果：

```
if (isset($_POST['submit']) AND 
    isset($_POST['userid']) AND
    isset($_POST['firstname']) AND
    isset($_POST['lastname']) AND
    isset($_POST['address']) AND
    isset($_POST['ZIP']) AND
    isset($_POST['phonenumber']) AND
    isset($_POST['mail']) AND
    isset($_POST['group']))
{
  $result = $this->sendEmail(
    $_POST['userid'],
    'mail@mymail.com',
    'mail@mymail.com',
    $_POST['firstname'],
    $_POST['lastname'],
    $_POST['address'],
    $_POST['ZIP'],
    $_POST['phonenumber'],
    $_POST['mail'],
    $_POST['group']
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:59:12.630

你也可以这样使用。

```
if (isset($_POST['submit']) && isset($_POST['userid']) && isset($_POST['firstname']) && isset($_POST['lastname']) && isset($_POST['address']) && isset($_POST['ZIP']) && isset($_POST['phonenumber']) && isset($_POST['mail']) && isset($_POST['group']))

           {
               $result = $this->sendEmail(
               $_POST['userid'], 'mail@mymail.com', 'mail@mymail.com', $_POST['firstname'], $_POST['lastname'], $_POST['address'], $_POST['ZIP'], $_POST['phonenumber'], $_POST['mail'], $_POST['group']
            );
          } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:59:41.423

首先，我建议检查 html 本身，我假设该方法设置为 POST，因为其他方法都在工作，但请仔细检查以确保安全！然后，另一个大错误是您在输入时输入名称字段时搞砸了。检查 html 上的所有名称以确保它们拼写正确。此外，请确保您拥有所有结束标签和开始标签，以及开始/结束引号。

也不要忘记将 isset() 添加到上面的所有内容中。您还可以创建更好的功能，例如，

```
function checkSet($var){
       if(isset($var) && $var != ""){
            return $var;
       }else{
            return false;
       }
} 
```

这将检查它是否为空字符串，以及是否已定义。很有用。如果您愿意，也可以通过 return trim($var) 来使用它来修剪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:56:48.300

你可以这样写——

```
 if (isset($_POST['submit']) AND 
        isset($_POST['userid']) AND $_POST['userid'] != "" AND 
        isset($_POST['firstname']) AND $_POST['firstname'] != "" AND 
        isset($_POST['lastname']) AND $_POST['lastname']!= "" AND 
        isset($_POST['lastname']) AND $_POST['lastname']!= "" AND 
        isset($_POST['address']) AND $_POST['address'] != "" AND 
        isset($_POST['ZIP']) AND $_POST['ZIP'] != "" AND 
        isset($_POST['phonenumber']) AND $_POST['phonenumber'] != "" AND 
        isset($_POST['mail']) AND $_POST['mail'] != "" AND 
        isset($_POST['group']) AND $_POST['group'] != "")
       {
        $result = $this->sendEmail(
           $_POST['userid'], 'mail@mymail.com', 'mail@mymail.com', $_POST['firstname'], $_POST['lastname'], $_POST['address'], $_POST['ZIP'], $_POST['phonenumber'], $_POST['mail'], $_POST['group']
        ); 
```

# sql - 插入日期时间时从字符串转换日期和/或时间时转换失败

> ID：14119133
> 
> 赞同：188
> 
> 时间：2013-01-02T08:49:59.240
> 
> 标签：sql, sql-server

我试图按如下方式创建一个表，

```
create table table1(date1 datetime,date2 datetime); 
```

首先，我尝试插入如下值，

```
insert into table1 values('21-02-2012 6:10:00 PM','01-01-2001 12:00:00 AM'); 
```

它给出了错误说，

> *无法将 varchar 转换为日期时间*

然后我尝试了以下格式作为我们的stackoverflow建议的帖子之一，

```
insert into table1 values(convert(datetime,'21-02-2012 6:10:00 PM',5)
                          ,convert(datetime,'01-01-2001 12:00:00 AM',5)); 
```

但是我仍然收到错误消息，

> *从字符串转换日期和/或时间时转换失败*

有什么建议么？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-01-02T08:51:40.790

SQL Server 支持多种格式 - 请参阅[有关 CAST 和 CONVERT 的 MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。这些格式中的大多数**取决于**您拥有的设置 - 因此，这些设置有时可能有效 - 有时无效。

解决此问题的方法是使用 SQL Server 支持的（稍作调整的）**ISO-8601 日期格式**- 这种格式**始终**有效- 无论您的 SQL Server 语言和日期格式设置如何。

SQL Server 支持的[ISO-8601 格式](http://msdn.microsoft.com/en-us/library/ms180878.aspx)有两种形式：

*   `YYYYMMDD`仅适用于日期（无时间部分）；注意这里：**没有破折号！**，这很重要！`YYYY-MM-DD`不独立于 SQL Server 中的日期格式设置，并且**不会****在**所有情况下工作！

 **或者：

*   `YYYY-MM-DDTHH:MM:SS`对于日期和时间 - 请注意：这种格式*有*破折号（但*可以*省略），并且`T`在`DATETIME`.

这对 SQL Server 2000 和更新版本有效。

因此，在您的特定情况下 - 使用这些字符串：

```
insert into table1 values('2012-02-21T18:10:00', '2012-01-01T00:00:00'); 
```

你应该没问题（注意：你需要使用国际**24 小时**格式而不是 12 小时 AM/PM 格式）。

**或者**：如果您使用的是 SQL Server **2008**或更高版本，您也可以使用`DATETIME2`数据类型（而不是 plain `DATETIME`），并且您的当前`INSERT`将正常工作而没有任何问题！:-)`DATETIME2`在转换上要好得多，也不那么挑剔——无论如何，它是 SQL Server 2008 或更新版本的推荐日期/时间数据类型。

```
SELECT
   CAST('02-21-2012 6:10:00 PM' AS DATETIME2),     -- works just fine
   CAST('01-01-2012 12:00:00 AM' AS DATETIME2)   -- works just fine 
```

不要问我为什么整个话题如此棘手和令人困惑——事情就是这样。但是使用该`YYYYMMDD`格式，您应该适用于任何版本的 SQL Server 以及 SQL Server 中的任何语言和日期格式设置。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-06-06T20:18:34.097

SQL server 中的转换有时不是因为使用的日期或时间格式而失败，而仅仅是因为您试图存储系统无法接受的错误数据。

例子：

`Create Table MyTable (MyDate);`

`Insert Into MyTable(MyDate) Values ('2015-02-29');`

SQL 服务器将抛出以下错误：

`Conversion failed when converting date and/or time from character string.`

此错误的原因只是年份（2015 年）没有这样的日期（2 月 29 日）。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-01-02T09:01:07.613

简单的答案 - 5 是意大利语“yy”，105 是意大利语“yyyy”。所以：

```
SELECT convert(datetime,'21-02-12 6:10:00 PM',5) 
```

将正常工作，但

```
SELECT convert(datetime,'21-02-12 6:10:00 PM',105) 
```

会报错。

同样地，

```
SELECT convert(datetime,'21-02-2012 6:10:00 PM',5) 
```

将给出错误，其中

```
SELECT convert(datetime,'21-02-2012 6:10:00 PM',105) 
```

将工作。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-09-15T06:38:24.480

只要有可能**，应避免使用特定于文化的日期/时间文字**。

有一些*安全*格式可以将日期/时间作为文字提供：

所有示例`2016-09-15 17:30:00`

### ODBC（我最喜欢的，因为它立即作为*真实*类型处理）

*   `{ts'2016-09-15 17:30:00'}`--时间戳
*   `{d'2016-09-15'}` --仅日期
*   `{t'17:30:00'}` --只有时间

### ISO8601（最适合*任何地方*）

*   `'2016-09-15T17:30:00'`——注意`T`中间！

### 未分隔（被误解为数字的风险很小）

*   `'20160915'` --仅适用于*纯*日期

### 谨记：无效日期往往会出现*奇怪的错误*

*   没有 6 月 31 日或 2 月 30 日...

### 奇怪转换错误的另一个原因：执行顺序！

众所周知，SQL-Server 会按照人们可能没有预料到的执行顺序来做事。您的书面声明看起来像是在某些与类型相关的操作发生**之前完成了转换，但引擎决定 - 为什么会 - 在稍后的步骤中进行转换。**

这是一篇很棒的文章，用示例解释了这一点：[Rusano.com：“t-sql-functions-do-no-imply-a-certain-order-of-execution”](http://rusanu.com/2011/08/10/t-sql-functions-do-no-imply-a-certain-order-of-execution/)，这是[相关的问题](https://stackoverflow.com/q/6989522/5089204)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-08-19T09:57:43.717

只需更新日期格式，如下所示

```
yyyy-MM-dd hh:MM:ss 
```

它为我解决了问题并且效果很好

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-06-16T12:24:53.433

我试过这个，它对我有用：

```
SELECT CONVERT(date, yourDate ,104) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-29T17:44:09.580

最好的方法是这段代码

```
"select * from [table_1] where date between convert(date,'" + dateTimePicker1.Text + "',105) and convert(date,'" + dateTimePicker2.Text + "',105)" 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-08-16T15:11:42.547

尝试连接`getdate()`到要插入到 nvarchar 字段中的字符串时，我遇到了这个问题。

我做了一些演员来解决它：

```
 INSERT INTO [SYSTEM_TABLE] ([SYSTEM_PROP_TAG],[SYSTEM_PROP_VAL]) VALUES 
   (
    'EMAIL_HEADER',
    '<h2>111 Any St.<br />Anywhere, ST 11111</h2><br />' + 
        CAST(CAST(getdate() AS datetime2) AS nvarchar) + 
    '<br /><br /><br />'
   ) 
```

这是一个经过消毒的例子。其中的关键部分是：

`...' + CAST(CAST(getdate() AS datetime2) AS nvarchar) + '...`

将日期转换为`datetime2`，然后将`nvarchar`其连接起来。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-01-11T19:40:07.723

```
convert(datetime2,((SUBSTRING( ISNULL(S2.FechaReal,e.ETA),7,4)+'-'+ SUBSTRING( ISNULL(S2.FechaReal,e.ETA),4,2)+'-'+ SUBSTRING( ISNULL(S2.FechaReal,e.ETA),1,2) + ' 12:00:00.127')))  as fecha, 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-18T11:49:04.870

实际在 sql server 上运行的日期时间格式是

```
yyyy-mm-dd hh:MM:ss 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-06-02T04:49:46.927

请试试这个。

SQL Server 需要 MM/DD/YYYY 格式的日期，如果将英语设置为默认语言。这里将 datepicker 值保存到 sql2008 数据库。我的字段类型是数据库中的 datetime。dpdob 是我的 datepicker 名称。

```
 Dim test = dpdob.Text.Replace("-", "/")
           Dim parts As String() = test.Split(New Char() {"/"c})
           Dim firstPart As String = parts(0)
           Dim thirdPart As String = parts(2)
           Dim secondPart As String = parts(1)
           Dim test1 = secondPart + "/" + firstPart + "/" + thirdPart
           Dim dob = test1 
```

现在在插入查询中使用 dob。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-04-10T08:45:02.057

你可以试试这段代码

```
select (Convert(Date, '2018-04-01')) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-12-03T22:36:07.140

这是从 ISO 字符串轻松转换为 SQL-Server 的方法`datetime`：

```
INSERT INTO time_data (ImportateDateTime) VALUES (CAST(CONVERT(datetimeoffset,'2019-09-13 22:06:26.527000') AS datetime)) 
```

来源[https://www.sqlservercurry.com/2010/04/convert-character-string-iso-date-to.html](https://www.sqlservercurry.com/2010/04/convert-character-string-iso-date-to.html)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-01-29T15:29:23.740

对我来说，这很有效：

```
INSERT INTO [MyTable]
           ([ValidFrom]
           ,[ValidTo])
       VALUES
           ('2020-01-27 14:54:11.000'
           ,'2023-01-27 14:52:50.000') 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-09-22T04:57:03.767

从 web.config 文件将文化设置为英语

```
 <globalization uiCulture="en-US" culture="en-US" /> 
```

例如，如果您将文化设置为阿拉伯语，则 thime 将是

‏22‏/09‏/2017‏ 02:16:57 ص

并且您收到错误：在插入日期时间时从字符串转换日期和/或时间时转换失败

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-17T07:12:29.713

在编写 SQL 插入查询时，将日期写在单引号中，并以日期格式 (DD/MM/YYYY) 使用正斜杠，如下所示：

```
insert into table_name (Emp_Id, Name, **DOB**) values
(01, 'Suresh Kumawat', **'22/03/2015'**); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-05T08:05:25.963

当日期不存在时也会显示此错误（例如，日期`'09-31-2021'`不存在，因为九月的长度为 30 天）。**

# c++ - llvm clang编译器上的dynamic_cast失败

> ID：14119136
> 
> 赞同：7
> 
> 时间：2013-01-02T08:50:30.973
> 
> 标签：c++, compilation, llvm, clang, dynamic-cast

我看到一个奇怪的失败，它`dynamic_cast`正在返回`NULL`clang 编译器。但是相同的代码适用于 gcc 环境。

你能指出我可能是什么根本原因吗？`dynamic_cast`on llvm 和 gcc之间可能有什么区别。

我正在使用两个编译器的默认行为，我认为默认情况下启用 RTTI。

```
template<typename T> T* 
find_msg_of_type(
    MsgList *list
) {
    T* msg = NULL;

    if (list) {
        for (std::vector<MsgList*>::iterator it = list->element.begin();
                                                        it != list->element.end();
                                                        it++) {// MsgList can be list of objects build with GSoap.
            if (typeid(*(*it)) == typeid(T)) {
                msg = dynamic_cast<T*>(*it); // Failing on clang but this same code is working with gcc compiler.
                break;
            }
        }
    }

    return msg;
} 
```

另一个观察：使用 gcc

```
if (typeid(*(*it)) == typeid(T)) 
```

工作正常，但有叮当声

```
if (typeid(*(*it)) == typeid(T)) 
```

比较显示不同的行为..不确定为什么会有所不同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:14:25.963

对于这样的代码，一个好主意是静态确保类 T 派生自 MsgList。使用 boost，可以这样完成：

BOOST_STATIC_ASSERT((boost::is_base_and_derived::value));

# performance - Log4J 意外的性能提升

> ID：14119139
> 
> 赞同：0
> 
> 时间：2013-01-02T08:50:53.053
> 
> 标签：performance, log4j

将日志记录包装到单独的类中后，我们体验到了性能的提高，这是我们无法完全解释的。

如果有人可以发表评论以帮助我们理解这一点？

**这是主线程：**

```
package myapp;

import myapp.logging.Log;

import org.apache.log4j.Logger;

public class ApplicationMain extends Thread {
private static Logger LOG = Logger.getLogger(ApplicationMain.class); 

@Override 
public void run() {
for (int i = 0; i < 50; i++) {
    try {
    Thread.sleep(500);

    //traditional plain log4j
    long startTime = System.nanoTime();
    LOG.info("Hello World Log4j");
    long endTime = System.nanoTime();
    System.out.println(endTime - startTime);

    //logging in wrapper
    long startTime2 = System.nanoTime();
    Log.Info("Hello World Log4J from within wrapper");
    long endTime2 = System.nanoTime();
    System.out.println(endTime2 - startTime2);

    } catch (InterruptedException ex) {
    Log.Info(ex.getMessage());
    }
}
} 
```

}

**日志包装类：**

```
package myapp.logging;

import org.apache.log4j.Logger;

public class Log {

private static Logger LOG;

public static synchronized void Info(String LogMessage) {

Throwable throwable = new Throwable();
StackTraceElement[] stackTraceElements = throwable.getStackTrace();
LOG = Logger.getLogger(stackTraceElements[1].getClassName());
LOG.info(LogMessage);
}
} 
```

我们`Thread.start()`得到以下类型的输出：

```
2013-01-02 10:42:25,359 INFO   [ApplicationMain] Hello World Log4j

191478

2013-01-02 10:42:25,359 INFO   [ApplicationMain] Hello World Log4J from within wrapper 

163852

2013-01-02 10:42:25,859 INFO   [ApplicationMain] Hello World Log4j 

166165

2013-01-02 10:42:25,859 INFO   [ApplicationMain] Hello World Log4J from within wrapper 

85361

2013-01-02 10:42:26,359 INFO   [ApplicationMain] Hello World Log4j 

188694

2013-01-02 10:42:26,359 INFO   [ApplicationMain] Hello World Log4J from within wrapper

82709

..... 
```

为什么包装器的性能优于直接调用？尽管检索调用者类名称增加了开销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:59:09.957

我强烈建议阅读微观基准。这是一个非常有趣的主题，我发现这个问题作为起点很有用：

[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

本质上，这不是一个有效的性能衡量标准，因为还有一大堆其他事情需要考虑，主要是围绕编译器优化

# c# - 等待用户输入时停止python进程

> ID：14119151
> 
> 赞同：0
> 
> 时间：2013-01-02T08:52:07.467
> 
> 标签：c#, python, user-input

我有一个`C#`/`WPF`应用程序，它为非程序员从拖放命令创建 python 代码。

结果测试在单独的线程中执行。其中一个命令是对 Python 的环绕`'raw_input'`（使用 Python2.6）。

在某些情况下，用户不小心将此命令放入循环中并运行结果测试。由于我的应用程序正在等待他的输入，因此他无法使用应用程序通常的停止命令（因为我的应用程序已打开另一个消息框并正在等待输入）。

有没有办法让用户在这种情况下停止运行？它可以是 Python 中的某种东西，也可以是在这种情况下使应用程序的主窗口响应的一种方式。

**编辑**代码看起来像这样
：`Python`

```
for i in range(5):
    print "Labster7Information:i:Labster7Information"
    print i
    print "Labster7InputRequired:user input::Labster7InputRequired"
    s = str.strip(raw_input()) 
```

`C#`创建新窗口的代码只是`Window`用`TextBox`. 当它显示时，如果我不设置它的 Owner 属性，我可以看到我的主窗口，但它不起作用。

# ios - 模拟器没有拾取 iPhone 5 资产

> ID：14119152
> 
> 赞同：0
> 
> 时间：2013-01-02T08:52:21.170
> 
> 标签：ios, ios5, ios4, ios6

我正在使用不支持 iPhone 5 的 cocos2d 2.0 开发 iPhone 游戏。现在我已经更新了我的设置代码和 cctexture 中的一些代码，用于获取 iPhone 5 的艺术资产。但是我尝试使用模拟器来调试确切的问题模拟器没有为 iPhone 5 挑选资产。我应该如何解决这个问题除了购买新的 iPhone 5 之外还有什么办法吗？

现在我更改了代码以识别设备是视网膜显示器还是普通 iPhone。它现在选择正确的图像，但它只显示 640X960 图像的 320X480 部分。我附上了图片以获得确切的想法![在此处输入图像描述](../Images/a9acf3a05c2653d2f070916ef37d56cb.png)原始图像看起来像![在此处输入图像描述](../Images/4f496ee79b7442eafc247573e2fd7754.png)

# android - EditText 在按下返回按钮后返回先前输入的数据

> ID：14119158
> 
> 赞同：1
> 
> 时间：2013-01-02T08:53:07.423
> 
> 标签：android, android-edittext

我有一个应用程序登录系统类型的应用程序。一旦用户登录后按下返回按钮，用户名和密码 EditText 将填充用户刚才输入的内容。有什么办法可以将 EditText 清空？抱歉，如果我让这听起来令人困惑。任何评论将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:56:49.213

``et.setText("");``在内部`onResume()`设置立即开始时的空文本。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T08:56:41.627

您可以通过重写`onPause`Activity 方法并在 onPause 方法中将所有 EditText 值清除为：

```
@Override
 protected void onPause(){
        super.onPause();

         // Clear all value here
        editTextone.setText("");
        editTexttwo.setText("");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T08:54:49.203

为什么不使用`edittext.setText("");`

或者你也可以使用`edittext.setText(null)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:56:53.627

使用此手动清除所有editText`onResume`

```
edtText.setText(""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T08:58:20.257

猜猜这会解决你的问题。

```
@Override
public void onResume(){
    super.onResume();

    EditText username = (EditText) findViewById(R.id.edittext);
    username.setText("");
    EditText password = (EditText) findViewById(R.id.edittext);
    password.setText("");

} 
```

# html - CSS背景图像不起作用

> ID：14119164
> 
> 赞同：0
> 
> 时间：2013-01-02T08:53:34.167
> 
> 标签：html, css, drop-down-menu

```
.menubar li {
    float: left;
    width: 115px;
    text-align: center;
    background-image: url(js/left_main_bg_image.gif);
} 
```

背景图像不适用于firefox、chrome。我也在餐桌上试了一下。也不工作。

谁能帮我！
我会感谢谁帮助了我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:56:30.273

也将图像的高度添加到您的 CSS 声明中。你不需要那些`<br>`标签

像下面这样的东西应该可以工作：

```
.menubar li {
    float: left;
    width: 115px;
    text-align: center;
    background: url('js/left_main_bg_image.gif');
     height: 100px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:00:52.233

你错过了`height`CSS 属性。请参阅[工作示例](http://jsfiddle.net/LAYjP/)。

这是所需的 HTML 和 CSS。与您的代码进行比较，看看您错过了什么。

**HTML**

```
<ul class="menubar">
    <li></li>
    <li></li>
</ul> 
```

​<strong>CSS

```
.menubar li {
    float: left;
    width: 115px;
    height: 115px; 
    text-align: center;
    background-image: url(js/left_main_bg_image.gif);
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:59:35.110

```
.menubar li {
    float: left;
    width: 115px;
    height:100px;
    text-align: center;
    background-image: url('js/left_main_bg_image.gif');
} 
```

注意图像网址周围的引号......

而且我不知道为什么你`<br>`的css中有元素......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:02:33.920

它期望**li**元素位于类为**menubar的****ol**或**ul**标签内。确保这些具有指定类的标签存在。

# ffmpeg - 网络服务器上视频编码的可扩展性问题

> ID：14119165
> 
> 赞同：0
> 
> 时间：2013-01-02T08:53:41.010
> 
> 标签：ffmpeg, scalability, video-encoding

在即时创建用户的 Web 应用程序上，允许上传视频。使用 ffmpeg 将视频转换为 x264 以进行 iOS 播放。因此，如果有太多用户，那将会杀死 Web 服务器。

我正在考虑这样的事情。有几个编码服务器供应用程序使用，应用程序在接收到视频文件后上传到任何一个编码服务器，编码服务器对视频进行编码并将其上传回Web服务器。

是否有任何其他解决方案最好不会增加用户的响应时间？上传过程完成后，用户必须立即查看视频的预览。

客户端不想要任何 3rd 方视频编码服务。我们已经谈判了很多次，但他们不希望这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:20:20.057

使用 Resque 之类的东西来排队编码作业。然后，您可以根据 Resque 上的队列大小来扩展进程/机器的数量。

# mysql - 从 MySQL 数据中获取最后一个 mod_date

> ID：14119166
> 
> 赞同：2
> 
> 时间：2013-01-02T08:53:43.940
> 
> 标签：mysql, sql, greatest-n-per-group

我的数据库中有以下数据

```
|NO | name  |exp   | mod_date          | 
+---+-------+------+-------------------+
|1  | dede  |  1   |2012-11-07 01:04:26|
|2  | dede  |  10  |2012-11-07 01:05:42|
|3  | GoGo  |  20  |2012-11-07 03:05:40|
|4  | baba  |  23  |2012-11-07 05:22:50|
|5  | baba  |  35  |2012-11-07 08:06:57|
|6  | baba  |  50  |2012-11-08 06:32:13|
|7  | rara  |  43  |2012-11-13 06:40:35| 
```

我想获取每个名称的最后更新 mod_date ：

```
|NO | name  |exp   | mod_date          | 
+---+-------+------+-------------------+
|2  | dede  |  10  |2012-11-07 01:04:26|
|3  | GoGo  |  20  |2012-11-07 03:05:40|
|6  | baba  |  50  |2012-11-08 06:32:13|
|7  | rara  |  43  |2012-11-13 06:40:35| 
```

我尝试了这个解决方案，但它没有用（[同样的问题](https://stackoverflow.com/questions/8470311/get-the-last-date-from-mysql-data)）

```
SELECT no,name,exp,max(date) FROM skill_exp
GROUP BY name 
```

我从那个查询中得到这个结果

```
|NO | name  |exp   | mod_date          | 
+---+-------+------+-------------------+
|1  | dede  |  1   |2012-11-07 01:05:42|
|3  | GoGo  |  20  |2012-11-07 03:05:40|
|4  | baba  |  23  |2012-11-07 05:22:50|
|7  | rara  |  43  |2012-11-13 06:40:35| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:55:55.167

子查询背后的想法是它分别获取每个名称的最新（*最大值*）`mod_Date`。然后将其结果连接回原始表以获取每行中的其他列。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT name, MAX(mod_date) maxDate
            FROM tableName
            GROUP BY name
        ) s ON  a.name = s.name AND
                a.mod_date = s.maxDate 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/07162/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:50:50.800

一种更简单的方法`SELF JOIN`

```
select max(t1.no) NO,t1.name,max(t1.exp),max(t1.mod_date) from tablename t1
inner join tablename t2
on t1.name=t2.name
where t1.mod_date>=t2.mod_date
group by t1.name order by t1.No 
```

[**SQL_LIVE_DEMO**](http://sqlfiddle.com/#!2/07162/33)

# android - 在谷歌地图中显示方向

> ID：14119167
> 
> 赞同：0
> 
> 时间：2013-01-02T08:53:46.420
> 
> 标签：android, google-maps, show, direction

我想显示谷歌地图中两个点的指定来源和目的地（通过经纬度）的方向。

我进行了很多搜索，但在我得到的几个答案中存在很多混乱。

有没有简单的方法来显示从一个指定的经纬度点到另一个指定的经纬度点的地图方向。

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:01:11.307

另一种在谷歌地图上显示根的替代方法是。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr=20.344,34.34&daddr=20.5666,45.345"));
startActivity(intent); 
```

这里的saddr 表示源地址的经纬度，daddr 表示目标地址的纬度和经度。我希望它对你有帮助..

# html - Tridion - 在 RTF 中插入 HTML（文字和部分元素）

> ID：14119168
> 
> 赞同：11
> 
> 时间：2013-01-02T08:53:56.130
> 
> 标签：html, tridion, rtf

我正在尝试在 Tridion 中创建一个 GUI 扩展，在单击按钮时将特定的 html 插入到 RTF 中......我有工具栏按钮和弹出窗口来通知用户。但是，当我在插入 HTML“</div><div class='Page'>”时在弹出窗口上单击“确定”时，它会插入“<div class='Page'/>”。

我发现 applyHTML 方法正在修改正在插入的内容。是否有任何其他功能/方法可以准确插入我所指出的内容，我的意思是缺少结束标签或打开标签的无效 html？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T03:10:30.760

如果您需要进行无效标记，请考虑使用纯文本字段。不确定这会在多大程度上改变您现有的扩展和内容模型，但您可以在纯文本字段中输入任何内容，包括似乎是某种“拆分”或分割占位符的内容。

`</div><div class='Page'>`

要保留富文本功能并遵循一些典型的 Tridion 实践，请考虑以下其中一项。

# 一次完成所有标记更改

假设您的最终标记将有一个 open`<div>`和 close `</div>`，考虑让您的扩展包装一整套选定的富文本。在此过程中和更新组件之前，允许作者选择“拆分”的位置并将整个更新保存到 RTF。

# 使用嵌入式模式和模板代码创建“拆分”

嵌入式架构字段是一种更简单的*拆分*内容的方法。作者创建了一组新的嵌入字段，模板代码可以将其更改为选项卡、段落，或者在您的情况下可能是页面（分页？）。

据我了解，“[段落”嵌入式模式可以处理这个用例。](http://www.tridiondeveloper.com/the-stuff-schema-are-made-of)

```
<!-- TemplateBeginRepeat name="Component.Fields.Paragraph" -->
<div class='Page'>
<!-- author-entered content -->
</div>
<!-- TemplateEndRepeat --> 
```

这将创建`</div><div class='Page'>`中间的嵌入字段集。它还允许您在将来更改类和标签，而无需更改扩展名。

# 改为插入非 HTML“合并字段”

请参阅我写的关于[富文本字段中的自定义标签](http://www.tridiondeveloper.com/rich-text-format-area-css-classes-vs-custom-xml-nodes)的帖子中的选项，其中包括：

*   Content Manager Explorer 中的 CSS 类，例如`class="page-split"`. 您甚至可以将其样式化为某种方式（`<hr/>`例如视觉上），然后将其模板化为最终标记中所需的任何内容。
*   合并字段占位符标签，例如“ `[[end-page]][[start-page]`”
*   自定义 HTML5 节点（如果必须）

您可以使用扩展插入其中的任何一个，可选择将它们设置为在 CME 中以某种方式显示。

我喜欢为作者提供在富文本字段中插入功能的更简单方法，但是将特定 HTML（尤其是无效 HTML）插入组件的问题在于将此功能硬编码到内容中。您将遇到迁移和设计更改的问题。

考虑利用 Tridion 如何将设计与内容分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:45:50.983

大概当你说：`</div><div class='Page'>`，你的意思是`<div class='Page'></div>`。如果是这样，那么除非您可以直接控制 XML 整理，否则唯一剩下的方法（IMO）是确保 div 有一些内容。最常见的方法是插入一个不间断的空格。

```
<div class='Page'>&#160;</div> 
```

# python - gui 在调用 QWebView.print_() 时被锁定

> ID：14119170
> 
> 赞同：2
> 
> 时间：2013-01-02T08:54:01.217
> 
> 标签：python, qt, pdf-generation, pyside, qwebview

我正在使用**Python 2.7**和**PySide**，我需要将一个大的 html 文件导出到一个 pdf 文件。

我尝试使用 a 加载它，`QWebView`然后将其打印到`QPrinter`配置为 pdf 格式的文件中。这很好用。

但是，我的解决方案存在一个大问题：当我调用 时`QWebView.print_()`，gui 被锁定，对于 windows，我的程序看起来像是崩溃了。发生这种情况是因为我的 html 很大（1000 页或更多）。

所以我的问题是：有没有一种干净的方法可以避免这种“崩溃”？

编辑：

我尝试在单独的线程中进行打印，就像 jadkik94 建议的那样。据我了解，下面的代码应该可以工作。不幸的是，它随机崩溃。;) 任何想法为什么会这样？

```
import sys
from PySide import QtGui, QtWebKit, QtCore

class PrintThread(QtCore.QThread):
    def __init__(self, webview, printer, parent=None):
        super(PrintThread, self).__init__(parent)
        self._webview = webview
        self._printer = printer

    def run(self):
        self._webview.print_(self._printer)

class MyWindow(QtGui.QMainWindow):
    def __init__(self):
        super(MyWindow,self).__init__()

        # a printer to print on
        self._myPrinter = QtGui.QPrinter()
        self._myPrinter.setOutputFormat(QtGui.QPrinter.PdfFormat)
        self._myPrinter.setPrintRange(QtGui.QPrinter.AllPages)
        self._myPrinter.setOrientation(QtGui.QPrinter.Portrait)
        self._myPrinter.setPaperSize(QtGui.QPrinter.A4)
        self._myPrinter.setNumCopies(1)

        # a webview for loading the html and printing it
        self._webview = QtWebKit.QWebView(self)
        self.setCentralWidget( self._webview )
        self._webview.loadFinished.connect(self.webViewLoadFinished)

        # print-preview-dialog
        self._previewDlg = QtGui.QPrintPreviewDialog(self._myPrinter)
        #self._previewDlg.paintRequested.connect(self.dlgPaintRequestNoThread) # works but freezes the mainthread
        self._previewDlg.paintRequested.connect(self.dlgPaintRequestWithThread) # as far is i understand this should work... but crashes randomly ;)

        # load the html
        self._webview.load('index.htm') # file is 2MB

    def webViewLoadFinished(self):
        # when webview has finished loading, show the dialog
        self._previewDlg.show()

    def dlgPaintRequestNoThread(self):
        self._webview.print_(self._myPrinter)

    def dlgPaintRequestWithThread(self):
        self.printPages()

        # wait for the print-thread to finish without blocking the mainthread
        eventLoop =  QtCore.QEventLoop()
        self.worker.finished.connect(eventLoop.quit)
        eventLoop.exec_()

    def printPages(self):
        self.worker = PrintThread(self._webview, self._myPrinter)
        self.worker.finished.connect(self.donePrinting)

        self.progressDlg = QtGui.QProgressDialog()
        self.progressDlg.setCancelButton(None)
        self.progressDlg.show()

        self.worker.start()

    def donePrinting(self):
        self.progressDlg.close()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    window = MyWindow()
    window.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:21:39.933

我相信你需要使用线程来解决这个问题。它似乎`QWebView.print_()`在主线程中运行，因此阻止了您的 GUI 运行。

您有 2 个选项，您可以使用 Python 的`threading`模块或 Qt 的`QThread`s。

[这个问题](https://stackoverflow.com/questions/10044197/how-to-get-qthreads-to-work-in-a-console-pyside-program)展示了如何使用`QThread`s。基本上：

```
class PrintThread(QtCore.QThread):
    def __init__(self, webview, parent=None):
        super(PrintThread, self).__init__(parent)
        self.webview = webview

    def run(self):
        # Get a printer from somewhere
        self.webview.print_(printer) 
```

接着：

```
def printPage(self):
    worker = PrintThread(self.page)
    worker.finished.connect(self.donePrinting)
    # Show a loading dialog
    worker.start()

def donePrinting(self):
    # Close the loading dialog
    pass 
```

您可以对 threading 模块应用相同的东西，但既然您已经在使用 pyside，为什么不也使用它呢。另外，我不确定另一个线程（QThread 除外）是否会弄乱 Qt GUI，它可能只是告诉您无法从另一个线程访问 GUI 线程（虽然不确定）。

# search-engine - 访问社交引擎管理面板时出错

> ID：14119176
> 
> 赞同：1
> 
> 时间：2013-01-02T08:54:40.237
> 
> 标签：search-engine, social

我正在与一个社会引擎网站合作。当通过输入“http://localhost/admin”url 打开管理面板时，我得到空白屏幕。我检查了 main.log 文件，发现以下错误。

调试（7）：需要类 Core_Controller_Action_Helper_RequireAdmin 未能检查：core.admin-index.index

调试（7）：需要类 Core_Controller_Action_Helper_RequireUser 未能检查：core.admin-index.index

DEBUG (7): Require class Core_Controller_Action_Helper_RequireUser 检查失败：core.error.requireuser

请帮忙解决以上问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T12:12:22.310

检查您的缓存功能并在选择其中任何一个之前进行设置 您必须拥有

```
Memcache
APC
Xcache 
```

# windows - 如何在没有 RVM 的情况下将 jRuby 用作 Windows 上的默认引擎？

> ID：14119181
> 
> 赞同：1
> 
> 时间：2013-01-02T08:55:17.923
> 
> 标签：windows, rvm, jrubyonrails

我正在使用 Ruby on Rails 开发一个项目，我的操作系统是 Windows 7。有时我不得不使用 java .jar 库来处理一些工作。我已经搜索了很多，但我找不到办法做到这一点。

我已经独立安装了 jRuby。但是当我在控制台上输入“ruby -v”时，我仍然看到 ruby​​。我也可以输入“jruby -v”，它会正确显示 jruby 版本。但是我无法整合它们。

由于 RVM 不能在 Windows 上运行，我不能说 'rvm use' 等。我基本上想这样[做](https://devcenter.heroku.com/articles/moving-an-existing-rails-app-to-run-on-jruby)。

如何在 Windows 上的 Ruby On Rails 项目中执行此操作并使用 .jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:34:05.523

[Pik](https://github.com/vertiginous/pik)类似于 RVM，但适用于 Windows。这可能会回答您的部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:16:20.117

您必须在 jruby 中运行整个 rails 应用程序。我建议您使用[https://github.com/jruby/jruby-lint](https://github.com/jruby/jruby-lint)运行您当前的应用程序以查找任何冲突。在您的应用程序兼容 jruby 后，您可以通过以下方式运行 rails

```
 jruby -S rails server 
```

要求您的 jar 文件

```
 require 'java'
    require 'path/to/mycode.jar' 
```

始终在命令前添加任何 rails 或 rake`jruby -S`命令

# php - MySQL插入查询一次插入多条记录

> ID：14119182
> 
> 赞同：0
> 
> 时间：2013-01-02T08:55:21.630
> 
> 标签：php, mysql, codeigniter, phpmyadmin

我的项目中有以下代码：

```
$start_time = $this->input->post("start_time");
$a          = explode(":",$start_time);
$start_sec  = ($a[0]*3600)+($a[1]*60);
$end_sec    = $start_sec+5400;
$m          = ($end_sec/60);
$hrs        = (int)($m/60);
$mins       = ($m%60);
$sec        = "00";
$end_time   = $hrs.":".$mins.":".$sec;
$start_time .= ":".$sec;

$tablearr=array(
  "rest_id"        => $info['rest_id'],
  "rest_sec_id"    => $info['rest_sec_id'],
  "book_date"      => $this->input->post("date"),
  "book_start_time"=> $this->input->post("start_time"),
  "book_end_time"  => $end_time,
  "book_special"   => $this->input->post("purpose"),
  "book_cuisine"   => $this->input->post("cuisine"),
  "book_no_person" => $this->input->post("no_person"),
  "user_id"        => $this->session->userdata('member_id'),
  "book_is_menu"   => $this->input->post("menu"),
  "table_reserved" => $info['table_reserved']
);

$this->db->insert("b_rest_book",$tablearr); 
```

这应该插入“预订”的单条记录。但是在执行时插入了 5 条记录的查询：一条记录​​具有所有正确的值，其余 4 条记录具有空值。

开始时间由用户输入，结束时间根据开始时间计算。

插入表格后看起来像这样：

```
book_id     rest_id     rest_sec_id     book_date   book_start_time     book_end_time   book_special    book_cuisine    book_no_person  user_id     book_is_menu    table_reserved  special_request

1   1   2   2012-12-23  07:00:00    08:30:00    2   2   2   2   No  1 

2   1   0   0000-00-00  00:00:00    01:30:00    0   0   0   2       1 

3   1   0   0000-00-00  00:00:00    01:30:00    0   0   0   2       1 

4   1   0   0000-00-00  00:00:00    01:30:00    0   0   0   2       1    
5   1   0   0000-00-00  00:00:00    01:30:00    0   0   0 
```

究竟出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:58:46.793

试试这个：

```
if($info['rest_sec_id'] != 0)
{
   $this->db->insert("b_rest_book",$tablearr);
} 
```

# mapreduce - 使用 hive 解决我的任务

> ID：14119183
> 
> 赞同：0
> 
> 时间：2013-01-02T08:55:24.210
> 
> 标签：mapreduce, hive, hiveql

所以我有一个任务，在表中插入一条新记录。

然后我在同一张表中查询所有历史记录。

并将所有这些历史记录与新记录进行比较，并将匹配项存储在不同的表中。现在存在一个问题，即当存在大量数据时它会变得不成比例。并且每次新的计算都需要更多的时间。

我无法缓存历史记录，因为它们可能会在一段时间后过期并过时。

比较任务相当复杂，因此它在 java 代码中。我不想写一个地图减少工作来做到这一点。

有没有办法我可以使用蜂巢来完成我的任务

# android - Android取消异步调用

> ID：14119185
> 
> 赞同：3
> 
> 时间：2013-01-02T08:55:27.550
> 
> 标签：android, quickblox

异步调用很棒，似乎所有使用 Quickblox Android SDK 的调用都是异步的，允许从主 ui 线程轻松实现。

但是我需要能够中止对服务器的调用，因为我的调用是由同步适配器进行的，并且可以在进程中间取消或中止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:31:31.657

您可以在 Android SDK 中禁用异步调用 - 请查看[Synchronous requests are available](http://quickblox.com/developers/Android_Guide#Synchronous_requests_are_available)

并将此调用包装在您自己的异步任务或其他东西上。

然后您将能够取消查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:20:41.857

Android SDK 0.7 发布[http://quickblox.com/blog/2013/01/android-sdk-0-7/](http://quickblox.com/blog/2013/01/android-sdk-0-7/)

现在只需使用此代码取消查询：

```
QBRequestCanceler canceler =  QBUsers.getUser(37823232, new QBCallbackImpl() {
    @Override
    public void onComplete(Result result) {
         if (result.isSuccess()) {
               QBUserResult qbUserResult = (QBUserResult) result;
               System.out.println(">>> User: " + qbUserResult.getUser().toString());
         } else {
               handleErrors(result);
         }
    }
});

...    

// cancel if need
canceler.cancel(); 
```

# javascript - 是否可以隐藏/保护 webGL 中使用的数据？

> ID：14119186
> 
> 赞同：7
> 
> 时间：2013-01-02T08:55:31.140
> 
> 标签：javascript, hosting, three.js, webgl

学了一点webGL，主要是用three.js。我加载 .obj 文件并以 3D 形式绘制它们。

我已将我的项目放在网上，例如：www.mydomain.com

我不介意人们通过他们的浏览器查看我的源代码，但我展示的 .obj 文件来自不想泄露它们的人。

我是一个关于这个的新手。

由于我的源代码可供所有人使用，我猜测 .obj 文件也可供所有人使用。那么是否有可能隐藏或保护它们以便没有人可以下载它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T12:58:17.550

如果您想在 Javascript / WebGL 中访问和使用它们，我很确定您无法保护任何文件。它们需要在某个时候被解析为可用的格式，以便浏览器/javascript 能够显示它们。你有两个选择：

1) 混淆。我认为这不是一个很好的选择，因为最终有人总是可以使用 Firebug 和其他工具来访问您的文件的一些有用的表示。您可以通过在服务器端加密或加扰数据以及在 Javascript 中重建内容来使其变得不那么容易。或者只是使用非常规的方式来加载和表示文件。

您还可以在着色器代码中进行一些解码/解密，这将更难窃取。但这可能仅适用于纹理。

2）使文件不那么有用。如果有人要重用您的 OBJ 文件，他们可能希望将模型导入他们选择的软件并做一些事情。您无法阻止这种情况，但您可以去除文件中的额外信息，使文件更易于使用。这将使文件对任何潜在的窃贼来说都不那么理想。

我这样做的原因完全不同，但我对 WebGL 的主要使用涉及将模型从 Sketchup 导出到 Collada，并在 WebGL 中显示它们。我的导出代码做了一些事情，作为副作用，导出的模型很难使用。这包括使所有组件实例唯一（去实例化？），将所有组件和组分解为普通几何体，对所有面进行三角剖分，删除隐藏的几何体等。

在没有原始文件的情况下将其带回 Sketchup 进行编辑将是一个 PITA……特别是因为我使用的模型本质上很大程度上依赖于组件和组实例化。但是，仍然没有什么能阻止某人“按原样”窃取几何图形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:19:25.737

如果有人可以下载到浏览器，那么它就在用户的计算机上。

您可以使读取文件更加困难，但这只会减慢获取 .obj 数据的速度。如果有人想这样做，那么他/她最终可以做到。解密密钥必须始终在客户端计算机上。所以你只能放慢这个过程。所以问题变成了“你想让你的 .obj 阅读代码有多困难和多复杂，值得付出努力吗？” 只需在文件开头添加一个额外的字节就足以使文件无法像在建模软件中那样打开。

我建议你教育你的人互联网是如何工作的，并简单地说这是不可能或不值得尝试这样做，并避免自己提出自制实现如何使数据读取更加困难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T17:08:57.440

查看其他答案，但这并不是 WebGL 独有的。任何语言的任何程序都有这个问题。一旦数据在用户的计算机、手机等上，人们就可以获取数据。例子：

1.  [读取 iOS 应用的数据](http://blog.tojicode.com/2011/05/ios-rage-rendered-with-webgl.html)
2.  [读取本地 PC 应用程序的数据](http://blog.tojicode.com/2011/10/source-engine-levels-in-webgl-video.html)

另一方面，您可以遵循上述技术。使用您自己的格式。按摩数据，使其最适合渲染，这通常不利于编辑。

当然，您当然也可以让您的文件首先要求有人登录您的网站才能阅读它们，类似于 gmail、facebook、google docs 等要求您登录的方式。这不会阻止他们在注册后获取文件，但是。[您还可以设置您的服务器，以便只有您的应用程序可以下载文件](https://www.google.com/search?q=prevent%2bbandwidth%2bstealing)。同样，这不会阻止用户在您的应用下载文件（或他们通过浏览器扩展程序注入 JavaScript）后获取文件，但可以防止您的带宽从直接链接到您数据的其他站点被盗。

# java - 如何处理处理指数值的异常，E尾随没有指数值

> ID：14119190
> 
> 赞同：1
> 
> 时间：2013-01-02T08:55:56.050
> 
> 标签：java, exception, bigdecimal, exponent

这是我在这个论坛上提出的第一个问题，所以如果问题是新手请指教。

我通过 接收用户输入`EditText`，因此它是一个字符序列/字符串。然后我创建`BigDecimal`以保持该值。它也可以优雅地处理指数，没有任何麻烦。但问题是当用户输入诸如`1.1E+`（没有任何尾随指数值）之类的值时，这段代码中的代码会崩溃。但是当输入是这样的时候它可以工作`1.1E+2`

```
EditText edit_text_left;
Editable editable_val_text;
....
editable_val_text = edit_text_left.getText();
BigDecimal val = new BigDecimal((editable_val_text.toString().trim())); // crash happens here 
```

如何处理？

更多信息：您可以在谷歌单位转换应用程序中尝试此操作，方法是选择数字存储：PB 到比特转换。并以 PB 为单位键入 9，它将显示`8.106e+16`在位部分中。现在尝试编辑`8.106e+16`，`8.106e+`它仍然可以工作。我只想要类似的处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:03:21.983

IMO，您应该做的是*捕获*异常（在封闭的 try-catch 语句中）并告诉用户他们提供了无效的数字。

如果您想处理“科学”格式的非标准版本，您可能需要实现自己的数字解析器/转换器。您可以通过从 BigDecimal 类中获取标准解析代码并将其转换为可以理解您的非标准格式的静态帮助方法来做到这一点。

或者，您可以尝试创建与非标准形式的字符串匹配的正则表达式，并使用它将字符串更正为可以接受的形式`BigDecimal`。

但坦率地说，我不会那样做。如果用户能够理解科学格式，他们也应该能够获得正确的语法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:07:41.780

根据[BigDecimal的 Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)

> 指数由字符 'e' ('\u0075') 或 'E' ('\u0045') 后跟一个或多个十进制数字组成。指数的值必须介于`-Integer.MAX_VALUE` `(Integer.MIN_VALUE+1)`和之间`Integer.MAX_VALUE`，包括 和 。

恕我直言，您可以做的是记住最后输入的指数，然后如果发生异常，则在需要这种行为时附加最后一个指数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:40:40.220

感谢这个社区和所有回复的人。其中一个提示给了我解决问题的想法。没有内置的方法来处理结尾的 e/E/e-/E-/e+/E+。相反，我使用 String.endsWith 方法来识别孤独的 e/E/e-/E-/e+/E+ 并从字符串中删除它们。

```
if ((str.endsWith("e")) || (str.endsWith("E")))    {
    str1 = str.copyValueOf(str.toCharArray(), 0, str.length() - 1);
}
else if ((str.endsWith("e+")) || (str.endsWith("E+")) || (str.endsWith("e-")) || (str.endsWith("E-")))    {
    str1 = str.copyValueOf(str.toCharArray(), 0, str.length() - 2);
} 
```

# javascript - 从 html5 小部件记录数据

> ID：14119191
> 
> 赞同：0
> 
> 时间：2013-01-02T08:56:09.067
> 
> 标签：javascript, html, web-widget

我正在尝试使用 HTML5 形成一个测验小部件。在测验结束时，当用户点击“发送”按钮时，我必须记录它的结果。用户不需要查看记录。我该怎么做？我可以使用 html5 还是需要 javascript 或其他东西来录制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:02:12.513

您使用 HTML5 很好，但您真的在使用 html5 元素吗？如果是，那么它可以，但据了解，您的小部件将更多是 javascirpt 驱动的，您可以使用 ajax 存储发送到数据库的条目。

谢谢 Dhiraj

# wpf - 根据鼠标悬停时的标签值更改图片

> ID：14119193
> 
> 赞同：2
> 
> 时间：2013-01-02T08:56:15.807
> 
> 标签：wpf, visual-studio-2010

我需要在鼠标悬停时显示不同的图像`Image`。
目前我正在这样做

```
 <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <!-- Hover image -->
                                <Setter Property="Cursor" Value="Hand"/>
                                <Setter Property="Source" Value="C:\Users\Images\Hi.png"/>
                            </Trigger>
 </Style.Triggers> 
```

它工作正常。但我需要在显示不同`tag`的图片之前检查属性。 也就是说，如果值为 1 我需要显示如果它是 2 我需要显示。 我知道这可以通过处理图像和事件的代码来实现。 但我想在 XAML 中做到这一点。有什么线索吗？`Image`
`Tag``Hi1.png``hi2.png`
`MouseEnter``MouseLeave`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T09:20:21.467

您可以使用[MultiDataTrigger](http://msdn.microsoft.com/en-us/library/system.windows.multidatatrigger_members(v=vs.90).aspx)。

由于 DataTrigger 对关联的 DataContext/Binding 进行操作，因此需要使用 Image 控件。

```
 <Style.Triggers> 
       <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
            <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsMouseOver}" Value="True"/>
            <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Tag}" Value="1"/>

        </MultiDataTrigger.Conditions>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Source" Value="C:\Users\Images\Hi1.png"/>
        </MultiDataTrigger>

        <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
            <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsMouseOver}" Value="True"/>
            <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Tag}" Value="2"/>

        </MultiDataTrigger.Conditions>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Source" Value="C:\Users\Images\Hi2.png"/>
        </MultiDataTrigger>
    </Style.Triggers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-09T02:05:21.560

我创建了一个 UserControl，它允许您更改 MouseOver 上图像的颜色。有一个矩形使用两种 SolidColorBrush 样式来切换颜色并将图像显示为 OpacityMask。

这 a) 允许您使任何图像成为您选择的任何颜色，并且 b) 照顾您在每次需要新按钮时都必须重写事件逻辑。

注意：Source 必须在代码中设置，因为它不能直接在 XAML 中绑定。

ImageButton.xaml：

```
<UserControl x:Class="ImageButton"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Width="Auto"
        Height="Auto" 
        Cursor="Hand">
    <Rectangle x:Name="Border">
        <Rectangle.OpacityMask>
            <ImageBrush/>
        </Rectangle.OpacityMask>
        <Rectangle.Style>
            <Style TargetType="{x:Type Rectangle}">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter Property="Fill" Value="{DynamicResource ImageHoverBackground}" />
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="false">
                        <Setter Property="Fill" Value="{DynamicResource ImageBackground}" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Rectangle.Style>
    </Rectangle>
</UserControl> 
```

ImageButton.xaml.cs：

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace MyNamespace
{
    public partial class ImageButton : UserControl
    {
        public static DependencyProperty SourceProperty = DependencyProperty.Register("Source", typeof(ImageSource), typeof(ImageButton), new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, OnSourceChanged));
        public ImageSource Source
        {
            get
            {
                return (ImageSource)GetValue(SourceProperty);
            }
            set
            {
                SetValue(SourceProperty, value);
            }
        }
        private static void OnSourceChanged(DependencyObject Object, DependencyPropertyChangedEventArgs e)
        {
            ImageButton Button = Object as ImageButton;
            var ImageBrush = Button.Border.OpacityMask as ImageBrush;
            ImageBrush.ImageSource = Button.Source;
        }

        public ImageButton()
        {
            InitializeComponent();
        }
    }
} 
```

# google-chrome-extension - 弹出窗口不会在第一次点击时出现

> ID：14119206
> 
> 赞同：1
> 
> 时间：2013-01-02T08:57:37.447
> 
> 标签：google-chrome-extension

当用户单击图标时，我试图显示一个弹出窗口。仅当 url 不包含“chrome://”或“about:”时才会显示弹出窗口。效果很好。但是在普通页面上，仅当我第二次单击该图标时才会出现弹出窗口。第一次点击没有任何反应。这是来自 background.html 的代码

```
// Called when the user clicks on the browser action.
chrome.browserAction.onClicked.addListener(function(tab) {
    if (!tab.url.indexOf('chrome://') ||!tab.url.indexOf('about:')) {
        alert('For security reasons, this page cannot shared.');
        return;
    }
    else {
        chrome.browserAction.setPopup({tabId:tab.id,popup:"html/popup.html"});
    }
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:40:13.263

正确复制您的问题后，我发现发生了什么：**第一次单击时没有显示弹出窗口的原因是因为它没有显示。**

想想看。单击浏览器图标*后*，您正在设置弹出窗口。应该显示什么？它不知道，但是事件已经被触发了，所以默认机制不知道要显示什么。在你的事件处理程序中，它只是一个没有内置在浏览器中的 javascript 机制，然后你设置它，但已经太晚了。但是，第二次（以及第三次、第四次等等）实际上会显示一个弹出窗口，因为现在它知道要显示哪个弹出窗口。

解决方案？显而易见的是将弹出窗口作为 manifest.json 的一部分，就像其他人一样：

```
"browser_action": {
  "default_icon": "icons/icon19.png",
  "default_title": "browser action demo",
  "default_popup": "src/browser_action/browser_action.html"
}, 
```

当然这样做意味着`chrome.browserAction.onClicked`不会被解雇，但公平地说，你应该给用户一个登陆弹出窗口。如果您想在之后出现弹出窗口，请提供一个执行此操作的界面（单击时会向 backgroundPage 发送消息以更改弹出窗口的按钮）。

其他选项可能是`beforeShow`弹出处理程序，但我不会放弃希望，因为我在 API 中没有找到类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:11:40.007

您似乎正在将两个互斥事件混合到一个功能中。

`chrome.browserAction.onClicked`将在没有使用弹出窗口时使用。

以下脚本仅使用您的 background.html 执行一次

```
chrome.browserAction.onClicked.addListener(function (tab) {
    console.log("Is fired..");
    chrome.browserAction.setPopup({
        popup: "popup.html"
    });

}); 
```

如果您想更改某些任意逻辑的弹出页面（例如某些 url 或内容），请将其放在每个选项卡 ID 的背景页面中。顺便说一句，您正在寻找什么业务逻辑？

# python - 最初在 OpenERP6.1 中为 one2many 表存储的值在哪里

> ID：14119208
> 
> 赞同：2
> 
> 时间：2013-01-02T08:57:42.987
> 
> 标签：python, openerp

我想知道最初在 OpenERP6.1 中为 one2many 表存储的值在哪里？即，如果我们为 one2many 表创建一条记录，则该记录只有在保存与此关联的主表的记录后才会真正保存到数据库表中，即使我们可以为 one2many 表创建许多记录（行）。

这些行存储在哪里？

它们是否存储在任何 OpenERP 内存变量中？如果是这样，我们可以使用哪个变量或函数来访问它们..

请帮我解决这个问题。

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:10:14.057

在 openerp 中保存新记录时，将生成一个字典，其中所有字段都以数据为键，以数据为值。如果该字段是 one2many 并且有很多行，那么字典列表将是 one2many 字段的值。您可以通过覆盖 openerp 中的`create`and`write`函数来修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:47:23.073

当您定义 o2m 字段时，您必须在关系表中创建一个 m2o 字段，我们将在 o2m 中将其称为第二个参数。现在数据库观点 o2m 领域根本不存在。相反，我们将信息存储在关系表上，例如

```
OpenERP Code:
modelA                 MOdel B
o2m_field   -------->  m2o_field 

While Databvase picture is 

tableA                    TableB
                        m2o_field (FK) 
```

现在，我们需要在 id= 当前记录的关系表 m2o 字段中显示客户端框架搜索中的 o2m 字段值，这里有结果。

谢谢你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:37:41.073

One2Many 字段是 OpenERP 中的子父关系。One2Many 只是逻辑字段，在数据库中对此没有影响。

如果您正在创建销售订单，则销售订单行是销售订单模型中的 One2Many。但是，如果您不将 Many2One 放在销售订单行中，那么 One2Many 在销售订单中将不起作用。

Many2One 字段将相关模型的外键放在当前表中。

# database - 基于数据库的 Facebook 连接

> ID：14119209
> 
> 赞同：6
> 
> 时间：2013-01-02T08:57:43.633
> 
> 标签：database, facebook

> **可能重复：**
> [我是否可以在我的服务器上存储从 Facebook 连接检索到的数据？](https://stackoverflow.com/questions/4760891/am-I-allowed-to-store-data-retrieved-from-Facebook-connect-on-my-server)

我们能否将 Facebook 登录信息存储到我们的数据库中，这样如果用户可以再次访问我们的网站，他就可以自动登录 Facebook。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T11:46:48.720

如果用户已接受您的应用请求并与您分享他的信息。您可以将这些信息存储在您的数据库中，但由于安全原因，您无法保存他的登录凭据。如果用户已经登录 facebook，并且那时他访问您的网站，您可以管理他将自动登录到您的网站。

希望您理解，如果您需要更多说明，请访问 facebook API。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:03:38.667

不，这是不可能的。但是，您可以检查用户是否已登录（[FB.getLoginStatus()](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)）并要求该用户登录（如果他/她未登录）（[FB.login()](http://developers.facebook.com/docs/reference/javascript/FB.login/)）

# algorithm - 有意义的加密文本的加密算法

> ID：14119211
> 
> 赞同：-1
> 
> 时间：2013-01-02T08:57:47.460
> 
> 标签：algorithm, security, encryption

谁能建议我一种加密数据的算法。加密后的数据不应与原始数据相同，但应具有一定的意义。例如，如果我加密“hi”，它可以显示“what”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:57:10.393

加密和编码在很大程度上是正交的。无需混合它们。所以我会：

1.  压缩输入
2.  使用标准加密对输入进行加密
3.  编写一个将任意二进制数据编码为单词序列的函数，并将密文交给它。

第 3 步的难度取决于您如何解释“有意义的文本”。无论您做什么，人类都可能能够将您的文本与有意义的文本区分开来。

在最简单的情况下，只需获取一个包含 4096 个单词的列表，然后将密文拆分为 12 位块，将每个块映射到一个单词。对于更高级的方法，马尔可夫链是一个考虑因素。

# javascript - 纯javascript触发文件下载

> ID：14119214
> 
> 赞同：3
> 
> 时间：2013-01-02T08:58:06.757
> 
> 标签：javascript, http, download, mime

不会有**服务器端请求**。所以它必须由纯JS来完成。例如我有这个代码。

```
function downloadFile(data, name, mime){
    /// what to put here?
}
var txt="Hello world";
var filename="sample.txt";
var mime="text/plain";
downloadFile(txt,filename, mime); 
```

我知道[一个](http://jspdf.com/)完全在浏览器中完成而不发送任何 http 请求的库。如果我发送请求，我可以通过服务器端脚本来完成。只需获取数据并使用一些标头即可触发文件下载。但我想用纯 JS 来做。没有服务器端请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T06:29:59.310

您链接到的库使用[https://github.com/dcneiner/Downloadify/](https://github.com/dcneiner/Downloadify/)，它使用 Flash 来确保跨浏览器兼容性。如果您不需要确保它适用于所有浏览器，则可以使用数据 uri 和纯 javascript 实现，如下所示：[https](https://gist.github.com/syntagmatic/2202660) ://gist.github.com/syntagmatic/2202660 。您还可以查看新的 HTML5 文件 API：[http](http://www.html5rocks.com/en/tutorials/file/filesystem/#toc-filesystemurls) ://www.html5rocks.com/en/tutorials/file/filesystem/#toc-filesystemurls 。

# c# - C# 线程的状态和“睡眠”

> ID：14119216
> 
> 赞同：3
> 
> 时间：2013-01-02T08:58:21.397
> 
> 标签：c#, thread-state

我正在尝试获取 .NET 线程状态。
为此，我检查了`ProcessThread.ThreadState`财产。
但是，当我`Thread.Sleep`在该线程上使用并检查它的状态时`Process Explorer`- 我看到它处于“等待：延迟执行”，而我的 ThreadState 仍然是“运行”。
怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:32:41.117

该类`Process`在首次访问时缓存属性，因此您可能需要调用该`Refresh`方法来获取更新的`ThreadState`. 似乎`ProcessThread`对象（来自`ProcessThreads`属性）没有附加到 parent `Process`，并且它包含的值在`Refresh`被调用时没有更新。您将需要`Process`再次检查该对象。

就像是：

```
Process p = Process.GetProcessByName("MyProcess);

while(true)
{
  p.Refresh();
  Console.WriteLine(p.ProcessThreads[0].ThreadState);
  Thread.Sleep(1000);
} 
```

# php - 显示表格单元格的平均值和总和

> ID：14119217
> 
> 赞同：-2
> 
> 时间：2013-01-02T08:58:24.643
> 
> 标签：php, javascript, jquery

我有测验结果表格，表格中有一个成绩单元格。

示例（单元格等级在 while 循环中，并且在使用 if 检查其他单元格后出现数字）：

```
 <table border="1">
      <tbody>
        <tr>
          <th> id </th>
          <th> question </th>
          <th> answer </th>
          <th> correct answer </th>
          <th> grade </th>

        </tr>

        <tr>

          <td> 1 </td>
          <td> question how bla bla bla</td>
          <td> bla bla answer</td>
          <td> correct answer</td>
          <td> 5 (this cell has the grade of each question)</td>
        </tr>
        <tr>

          <td> 2 </td>
          <td> question2 how bla bla bla</td>
          <td> bla bla answer2</td>
          <td> correct answer2</td>
          <td> 8 (this cell has the grade of each question)</td>
        </tr> 
```

ETC

```
// in this cell i want to show me the average from td grade

<td colspan="4" align="center">average</td>
  <td><input type="text" readonly="readonly" name="Avg" /></td>      

      </tbody>
    </table> 
```

多谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:05:02.760

看到这个 tut [http://www.amitpatil.me/table-manipulation-with-jquery/](http://www.amitpatil.me/table-manipulation-with-jquery/)您可能正在寻找的内容在上面页面的第 5 点中提到，即“5）从特定列的 td 中查找所有值”

```
$(".grid tr").each(function(i){
   colValues[i] = $('tr:nth-child('+(i+1)+')>td:nth-child(1)').html();
}); 
```

# android - 如何在android中使用sqlite获得不同的升序记录？

> ID：14119220
> 
> 赞同：0
> 
> 时间：2013-01-02T08:58:26.787
> 
> 标签：android, sqlite, android-listview

我在按钮的单击事件上创建数据库，当我在下一个活动上触发选择查询时，两个相同的记录显示在`ListView`. 我无法理解发生了什么。

这是我的代码

ListActivity.java

```
public class ListActivity extends Activity {
    ListView lv;
    ArrayList<String> items = new ArrayList<String>();
    ArrayList<String> items_id = new ArrayList<String>();
    dbhelper dh;
    SQLiteDatabase db;
    int index_id;
    Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);
        Button btn;
        btn = (Button)findViewById(R.id.newProjectlist);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                    Intent intent= new Intent(ListActivity.this,NewProject.class);
                startActivity(intent);
            }
        });  
        lv = (ListView)findViewById(R.id.projectListView);
        setUpList();
        dh = new dbhelper(this);
        Cursor c = getAllData();
        showAllData(c);  
        registerForContextMenu(lv);      
    }

  @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);

        if(v.getId() == R.id.projectList){
            menu.setHeaderIcon(R.drawable.ic_launcher);
            menu.setHeaderTitle("Record List");
            menu.add(0,1,menu.NONE,"Delete Record");
            menu.add(0,2,menu.NONE,"Show Record");
        }
    }

    @Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
        int itemId = item.getItemId();
        if(itemId == 1)
        {
            AdapterView.AdapterContextMenuInfo menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            int poistion = menuinfo.position;
            String id_string = items_id.get(poistion);
            long id = Long.valueOf(id_string);

            //menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            //index_id = menuinfo.position;
            deleteUserData(index_id);
            items_id.remove(poistion);
        }
        if(itemId == 2){
            AdapterView.AdapterContextMenuInfo menuinfo;
            menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            index_id = menuinfo.position;
            editUserData(index_id);
        }
    return super.onContextItemSelected(item);
}

    private void editUserData(int indexid) {
        // TODO Auto-generated method stub
        String user_id = items_id.get(indexid);
        Intent intEdit = new Intent(ListActivity.this, MainActivity.class);
        intEdit.putExtra("EditID", user_id);
        startActivityForResult(intEdit, 1);
    }

    private void deleteUserData(int indexid) {
        // TODO Auto-generated method stub
//      String user_id = items_id.get(indexid);
        //Toast.makeText(getApplicationContext(), "id " + user_id, 1).show();
        db = dh.getWritableDatabase();
        db.delete("timer","_ID" + "=" + indexid, null);
        finish();
//      Toast.makeText(getApplicationContext(), "Record deleted successfully", 1).show();
    }

    private void showAllData(Cursor c) {
        // TODO Auto-generated method stub
        while(c.moveToNext())
        {
            int id = c.getInt(0);
            String name = c.getString(1);
            String timerpoint1 = c.getString(2);
            String timerpoint2 = c.getString(3);
            String timerpoint3 = c.getString(4);
            String servicetime1 = c.getString(5);
            String servicetime2 = c.getString(6);
            items.add("" + name);
            items_id.add(""+id);
        }
        setUpList();
    }

    private Cursor getAllData() {
        // TODO Auto-generated method stub
        db = dh.getReadableDatabase();
        //String sortorder = dh.Name + "DESC";
    //  String query ="SELECT DISTINCT name FROM timer";
    //  Cursor c = db.rawQuery(query, null);
    //   if (c != null) {
    //            c.moveToFirst();
    //        }
//      String[] cols = new String[] {dh.Name, "name"};
        Cursor c = db.query(true, "timer",null,null,null,null,null,null, null);   
        //Cursor cur = db.query(Distinct,"timer", null, null, null, null, null, null, null);
        startManagingCursor(c);
        return c;   
        }
    private void setUpList() {
        // TODO Auto-generated method stub
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,items));
    }   

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:01:52.430

你可以使用这个[方法](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28boolean,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)。

```
public Cursor query (boolean distinct, String table, 
                     String[] columns, String selection, 
                     String[] selectionArgs, String groupBy, 
                     String having, String orderBy, String limit) 
```

将 distinct 变量设置为 true 并按 orderBy 您可以将其替换为您的列名和 ASC，如下所示

```
KEY_TABLE_COLUMN + " ASC"

 String[] cols = new String[] {"name"};
        Cursor c = db.query(true, "timer",cols,null,null,null,null,null, "name ASC"); 
```

# java - Java 类加载器动态

> ID：14119225
> 
> 赞同：1
> 
> 时间：2013-01-02T08:58:47.583
> 
> 标签：java, class, load

我的问题是我想在执行时创建一个类（我创建一个`.java`名称、包、方法等的文件。好吧）。当我尝试编译和执行它时，总是加载旧版本，而不是我在程序执行期间编写的新版本。

我应该在我的代码中更改什么？

```
File f = new File("src/pfc/Temp.java");

FileWriter w = new FileWriter(f);
BufferedWriter bw = new BufferedWriter(w);
PrintWriter wr = new PrintWriter(bw);
wr.write("package pfc;\n\npublic class Temp {\n\tpublic float getResult(float[] array){\nfloat res=0;//usar para guardar el resultado final\n");//preparamos la clase
wr.write(entrada.getText());//escribimos en el archivo
wr.write("\nreturn res;\n}\n}");
bw.flush();
bw.close();
wr.flush();
wr.close();
String fileToCompile = f.getAbsolutePath();
try {
    pfc.Temp result = new pfc.Temp();

    //Otra forma

    Class<?> c = Class.forName("pfc.Temp");
    Class[] argTypes = new Class[] { float[].class };
    Method main = c.getDeclaredMethod("getResult", argTypes);
    float nts[] = new float[model.getColumnCount()];
    for(int i = 0; i < model.getRowCount(); i++){
        System.err.println("Voy a la fila: "+i+" de "+model.getRowCount());
        for(int j = 1; j < model.getColumnCount(); j++){
            nts[j] = Float.parseFloat(model.getValueAt(i,j).toString());
            System.err.println("Notas parciales: "+nts[j]+" de la columna "+j+" sobre "+model.getColumnCount());
        }
    }
    Object comp = main.invoke(result, (Object) nts); 
```

谢谢 ！

* * *

好的，我会尝试更好地解释它。我有一个桌面应用程序，我想在执行它时加载一个类。问题是我用 JTextArea 修改了这个类，然后我写入文件并想编译它，但是这样它不起作用。它在我运行我的应用程序之前编译它编写的文件，而不是我在执行中编写的新文件。

我将尝试使用 ClassLoader，我的 Temp.java 是这样的：

```
package pfc;

public class Temp {
public float getResult(float[] array){
       float res=0;//usar para guardar el resultado final
       float erer = array[1];float fdsfds = array[2];float awd = array[3];

       res= 5;
       return res;
    }
 } 
```

当我在我的应用程序中编辑它时，比如替换 res= 5; 分辨率= 10；我编译但结果是 5 而不是 10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:14:03.540

实际上，您需要使用 ClassLoader 才能加载类。另外，如果你只是使用.java文件，你需要编译生成.class文件才能被加载，然后调用构造函数获取实例。

[这里](http://weblogs.java.net/blog/kirillcool/archive/2005/08/reflection_and.html)有一个与主题相关的有趣博客

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:04:19.037

我不明白你的 Temp 类是做什么的，但是这段代码对我来说是一个带有 setter 和 getter 的 TestClass。（您需要 tools.jar，您可以在 JDK 文件路径 \lib 中找到它）

```
package pfc;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class ClassGenerator {

public static BufferedWriter writeClass(String dir, String className) throws IOException {
    BufferedWriter bw1 = new BufferedWriter( new FileWriter( dir + File.separator + className
            + ".java" ) );
    bw1.write( "public class " + className + " {" );
    bw1.newLine( );
    bw1.write( "  private int value;" );
    bw1.newLine( );
    bw1.write( "  public int getValue() {" );
    bw1.newLine( );
    bw1.write( "    return this.value;" );
    bw1.newLine( );
    bw1.write( "  }" );
    bw1.newLine( );
    bw1.write( "  public void setValue(int value) {" );
    bw1.newLine( );
    bw1.write( "    this.value = value;" );
    bw1.newLine( );
    bw1.write( "  }" );
    bw1.newLine( );
    bw1.write( "}" );
    bw1.newLine( );
    bw1.close( );
    return bw1;
}

public static void main(String [] args) throws IOException, ClassNotFoundException,
        NoSuchMethodException, SecurityException, InstantiationException,
        IllegalAccessException, IllegalArgumentException, InvocationTargetException {
    String className = "TestClass";
    String dir = "bin";
    BufferedWriter bw = writeClass( dir , className );

    com.sun.tools.javac.Main.compile( new String [] { dir + File.separator + className
            + ".java" } );

    ClassLoader classLoader1 = ClassGenerator.class.getClassLoader( );
    Class clazz1 = classLoader1.loadClass( className );

    Constructor ctr1 = clazz1.getConstructor( new Class [0] );
    Object testClassInstance = ctr1.newInstance( new Object [0] );
    Method setter1 = clazz1.getMethod( "setValue" , new Class [] { int.class } );
    setter1.invoke( testClassInstance , 12 );

    Method getter1 = clazz1.getMethod( "getValue" , new Class [0] );
    Object result = getter1.invoke( testClassInstance );
    System.out.println( result.toString( ) );
}
} 
```

# c# - C#如何将y轴标记为字符串而不是数字？

> ID：14119228
> 
> 赞同：1
> 
> 时间：2013-01-02T08:59:00.943
> 
> 标签：c#, winforms, visual-studio-2010, charts

我用过**c# vs2010** winform

我做了一个基本的图表，并添加了这样的点：

```
chart1.Series[0].Points.AddXY(0, 1);
chart1.Series[0].Points.AddXY(1, 3); 
```

但我希望 y 轴显示`"A"`, `"B"`,`"C"`而不是`1`, `2`, `3`,

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:26:43.407

有一个属性叫

> 图表值类型

```
chart1.Series[0].XValueType = System.Windows.Forms.DataVisualization.Charting.ChartValueType.String 
```

您可以尝试在此处替换为任何格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:40:37.757

确保仅使用 1-26 作为值，然后实现此自定义事件

```
private void chart1_Customize(object sender, EventArgs e)
    {
        foreach (var label in chart1.ChartAreas[0].AxisY.CustomLabels)
        {
            label.Text = (string)char.ConvertFromUtf32(Int32.Parse(n) + 64);
        }
    } 
```

# android - 作为夏洛克动作栏中的动作溢出的列表视图

> ID：14119237
> 
> 赞同：3
> 
> 时间：2013-01-02T09:00:28.480
> 
> 标签：android, android-actionbar, actionbarsherlock

如何在单击 sherlock 操作项时获取 listdropdown。它应该类似于创建微调器。但是我对这种方法有疑问，因为我不希望在操作栏上显示所选项目。它应该类似于操作溢出。任何人都可以帮助我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:58:38.093

您可以在菜单项的操作布局中使用`Spinner`（或`IcsSpinner`for ）创建此类行为。`ActionBarSherlock`尽管您必须使用一个小技巧 - 隐藏当前选定的项目。

创建菜单xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/item1"
          android:actionLayout="@layout/my_dropdown_action_layout"
          android:showAsAction="always"/> 
```

其中`res/layout-v14/my_dropdown_action_layout.xml`将包含（此版本用于原生操作栏）：

```
<?xml version="1.0" encoding="utf-8"?>
<Spinner xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="wrap_content"
             android:layout_height="match_parent"
             android:background="?attr/actionBarItemBackground"
             android:id="@+id/spinner"/> 
```

并将`res/layout/my_dropdown_action_layout.xml`包含（此版本用于`ActionBarSherlock`）：

```
<?xml version="1.0" encoding="utf-8"?>
<com.actionbarsherlock.internal.widget.IcsSpinner 
             xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="wrap_content"
             android:layout_height="match_parent"
             android:background="?attr/actionBarItemBackground"
             android:id="@+id/spinner"/> 
```

使用`IcsSpinner`是创建下拉微调器所必需的。如果您`res/layout-v14/my_dropdown_action_layout.xml`对默认版本 (in ) 使用布局`res/layout/`，它在 Android 2.x 上的行为会有所不同（微调器将处于对话框模式）。

现在您必须正确地用数据填充微调器。只需创建一个`Activity`你膨胀菜单的地方，这样：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.my_menu, menu);
    MenuItem menuItem = menu.findItem(R.id.item1);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.spinner_layout, R.id.text, items);
    adapter.setDropDownViewResource(R.layout.list_item);

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        // native ActionBar
        Spinner sp = (Spinner) menuItem.getActionView();
        sp.setAdapter(adapter);
    } else {
        // ActionBarSherlock
        IcsSpinner sp = (IcsSpinner) menuItem.getActionView();
        sp.setAdapter(adapter);
    }

    return super.onCreateOptionsMenu(menu);
} 
```

现在是隐藏当前选定项目的技巧。布局`res/layout/spinner_layout.xml`将包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:background="@null">
    <TextView
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:id="@+id/text"
            android:visibility="invisible"/>
    <ImageView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/my_dropdown_icon"
            android:background="@null"/>
</FrameLayout> 
```

这样，您将看到一个图标作为菜单项，并且您拥有下拉菜单。请注意，布局`res/layout/list_item.xml`也必须包含`TextView`带有 id的内容`R.id.text`。

或者，您可以使用类似的方法来[`ActionProvider`](https://developer.android.com/reference/android/view/ActionProvider.html)代替操作布局。

另一种解决方案是创建类似于 dropdown 的自定义小部件`Spinner`。

# hadoop - hbase-0.94.0 启动错误

> ID：14119239
> 
> 赞同：2
> 
> 时间：2013-01-02T09:00:31.027
> 
> 标签：hadoop, hbase

今天启动hbase的时候遇到一个问题， **错误如下：**

**1.在 hbase-localhost-zookeeper-chaobin.log**

```
2013-01-02 16:05:26,406 INFO org.apache.zookeeper.server.NIOServerCnxnFactory: Accepted socket connection from /127.0.0.1:3170
2013-01-02 16:05:26,406 INFO org.apache.zookeeper.server.ZooKeeperServer: Refusing session request for client /127.0.0.1:3170 as it has seen zxid 0xc our last zxid is 0x0 client must try another server
2013-01-02 16:05:26,406 INFO org.apache.zookeeper.server.NIOServerCnxn: Closed socket connection for client /127.0.0.1:3170 (no session established for client)
2013-01-02 16:05:27,984 INFO org.apache.zookeeper.server.NIOServerCnxnFactory: Accepted socket connection from /127.0.0.1:3171
2013-01-02 16:05:27,984 INFO org.apache.zookeeper.server.ZooKeeperServer: Refusing session request for client /127.0.0.1:3171 as it has seen zxid 0xc our last zxid is 0x0 client must try another server
2013-01-02 16:05:27,984 INFO org.apache.zookeeper.server.NIOServerCnxn: Closed socket connection for client /127.0.0.1:3171 (no session established for client)
2013-01-02 16:05:29,796 INFO org.apache.zookeeper.server.NIOServerCnxnFactory: Accepted socket connection from /127.0.0.1:3172
2013-01-02 16:05:29,796 INFO org.apache.zookeeper.server.ZooKeeperServer: Refusing session request for client /127.0.0.1:3172 as it has seen zxid 0xc our last zxid is 0x0 client must try another server
2013-01-02 16:05:29,796 INFO org.apache.zookeeper.server.NIOServerCnxn: Closed socket connection for client /127.0.0.1:3172 (no session established for client)
2013-01-02 16:05:31,750 INFO org.apache.zookeeper.server.NIOServerCnxnFactory: Accepted socket connection from /127.0.0.1:3173
2013-01-02 16:05:31,750 INFO org.apache.zookeeper.server.ZooKeeperServer: Refusing session request for client /127.0.0.1:3173 as it has seen zxid 0xc our last zxid is 0x0 client must try another server
2013-01-02 16:05:31,750 INFO org.apache.zookeeper.server.NIOServerCnxn: Closed socket connection for client /127.0.0.1:3173 (no session established for client) 
```

**2.在 hbase-localhost-master-chaobin.out**

```
java.io.IOException: Waiting for shutdown of standalone server
    at org.apache.hadoop.hbase.zookeeper.MiniZooKeeperCluster.shutdown(MiniZooKeeperCluster.java:224)
    at org.apache.hadoop.hbase.master.HMasterCommandLine$LocalHMaster.run(HMasterCommandLine.java:223)
    at java.lang.Thread.run(Thread.java:619) 
```

**3.在 hbase-localhost-regionserver-chaobin.log**

```
2013-01-02 16:02:10,375 INFO org.apache.hadoop.hbase.util.VersionInfo: Subversion https://svn.apache.org/repos/asf/hbase/branches/0.94 -r 1332822
2013-01-02 16:02:10,375 INFO org.apache.hadoop.hbase.util.VersionInfo: Compiled by jenkins on Tue May  1 21:43:54 UTC 2012
2013-01-02 16:02:10,531 WARN org.apache.hadoop.hbase.regionserver.HRegionServerCommandLine: Not starting a distinct region server because hbase.cluster.distributed is false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:39:01.003

从源代码中可以看到，throw 中的`waitForServerDown`方法会`MiniZooKeeperCluster`抛出异常。这是因为为指定机器上的 zookeeper 服务器分配的端口被其他应用程序使用，或者它根本无法承载流。尝试将端口更改为其他端口，或检查在该端口上运行的应用程序。

如果您使用的是 linux，请输入`netstat -tulp|grep port-no`一个替换 zookeeper 端口的终端，以查看它是否被其他程序使用。

# java - 使用 Like 和 % % 运算符的休眠命名查询？

> ID：14119241
> 
> 赞同：39
> 
> 时间：2013-01-02T09:00:37.517
> 
> 标签：java, hibernate, jpa, hql

在我的 Hibernate JPA 示例代码中..

```
public List<AttendeesVO> addAttendees(String searchKeyword) {
    TypedQuery<AttendeesVO> query = entityManager.createQuery(" select at from AttendeesVO at where at.user.firstName LIKE :searchKeyword",AttendeesVO.class);
    query.setParameter("searchKeyword", searchKeyword+"%");
    return query.getResultList();
} 
```

给出整个字符串时它工作正常`firstName=Narasimham`

但是当我们给出`Narasimham`ie`a`或`n`

其实我的想法是我给`Like`操作员，`% %`所以它可以工作给定字符串的任何字符..

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-02T09:06:38.930

您正在使用`query.setParameter("searchKeyword", searchKeyword+"%");`

代替`query.setParameter("searchKeyword", "%"+searchKeyword+"%");`

第一个将返回`Narasimham` `N` `Na` `Nar` `Nara`等的行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-02T09:12:42.317

> 但是当我们给出 Narasimham 的任何字符时它不起作用，即 a 或 n

因为您正在进行区分大小写的搜索。尝试`N`, `Na`,`Nar`代替。如果要执行不区分大小写的搜索，请尝试使用`upper`or `lower`。喜欢

```
entityManager.createQuery("select at from AttendeesVO at where lower(at.user.firstName) LIKE lower(:searchKeyword)",AttendeesVO.class); 
```

> 实际上我的想法是我给 Like 运算符 % %

`searchKeyword+"%"`表示以searchKeyword*开头的*返回值。
`"%"+searchKeyword+"%"`表示*包含*搜索关键字的返回值。
根据您的要求决定。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-18T11:05:01.123

我会将我的声音添加到@ssk，以便在关键字前后使用 2%。或者，如果您在查询本身中这样配置它，我认为它更专业的解决方案：

```
public List<AttendeesVO> addAttendees(String searchKeyword) {
    TypedQuery<AttendeesVO> query = entityManager.createQuery(" select at from AttendeesVO 
    at where at.user.firstName LIKE CONCAT('%',:searchKeyword,'%')",AttendeesVO.class);
    query.setParameter("searchKeyword", searchKeyword);
    return query.getResultList();
} 
```

**因为 '%' 它是查询的一部分，而**不是您稍后可能填写的参数

> CONCAT() 函数将两个或多个表达式相加。 [https://www.w3schools.com/sql/func_mysql_concat.asp](https://www.w3schools.com/sql/func_mysql_concat.asp)

# php - 我需要为站点成员创建的每个虚拟页面生成一个新的 php 文件吗？

> ID：14119242
> 
> 赞同：0
> 
> 时间：2013-01-02T09:00:37.357
> 
> 标签：php

我希望网站成员创建可由谷歌搜索并可以链接到的页面。目的是评论和讨论将在新创建的页面上进行。

```
For example
funfoods.com/getting-kids-to-eat-broccoli
funfoods.com/discovered-a-new-farmers-market
or
strategygame.com/game-94572yu34g
strategygame.com/game-05ww945t2j 
```

我需要为用户创建的每个页面生成一个新的 php 文件吗？（我希望不会）

或者它会是类似于 showpage.php?argument 的东西，但是我如何让它显示为一个有意义的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:07:12.157

如果不了解有关您的“创建页面”功能的更多信息，很难知道您要做什么。

我要做的是让成员能够创建一个页面，显然，然后可能将其添加到您存储信息的表中：

```
tbl_member_site_pages: id, ..., pageTitle, pageURL, pageKeywords 
```

您可以对 pageTitle、pageURL 和 pageKeywords 进行适当的 SEO，然后使用 PHP 和 RewriteCond 和 RewriteRules 做一些有趣的事情

对于后者，请查看：[htaccess url rewrite/redirect - like facebook does](https://stackoverflow.com/questions/11167871/htaccess-url-rewrite-redirect-like-facebook-does)

对于 PHP，我会做这样的事情：

```
// assume strategygame.com/index.php?page=check-out-this-strategy-by-josh, or strategygame.com/check-out-this-strategy-by-josh
$page = $_GET['page'];
$result = $m->query("SELECT * FROM tbl_member_site_pages WHERE pageURL = '$page'");
// display page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:03:59.890

您创建一个 PHP 文件，该文件将根据输入参数显示不同的信息。要实现“有意义”的 URL，您需要在 Web 服务器上进行 URL 重写。

此类 URL 的正确术语是“seo/用户友好 URL”，互联网/SO 上有大量信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:04:34.890

您不会为每个页面生成一个新的 php 文件。相反，您应该将数据保存在数据库中，并根据 URL 提取不同的记录。要获得漂亮/干净的 URL，您将使用“slugs”，例如“getting-kids-to-eat-broccoli”。最后，您将创建 .htaccess 文件，它将所有请求重定向到服务器上不存在的页面到您的中央 php 文件，该文件将从请求的 url 中提取 slug 并尝试将其与数据库匹配。

# jquery - 使用jquery将文本和背景颜色从html表单添加到div

> ID：14119244
> 
> 赞同：1
> 
> 时间：2013-01-02T09:00:46.587
> 
> 标签：jquery, html

我正在尝试将文本颜色和背景颜色添加到表单中的隐藏 div。一旦填充了文本或背景输入字段，div 也应该以新颜色和背景显示预先填充的文本。代码如下：

**对于 CSS**

```
.testcolor{
    width:250px;
    height:150px;
    border:1px solid #000000;
    display:hidden; 
} 
```

**对于 HTML**

```
<form id="myform" action="" method="post"> 
    <input type="text" id="txtcolor" class="tstcolor" name="txtcolor" value="#FF0000">
    <input type="text" id="bgcolor" class="tstcolor" name="bgcolor" value="#FFFFFF">
    <a href="#" class="preview">Preview</a>
    <div class="testcolor">
        Lorem ipsum ist nuch nach in die postimen obscurites nang interust ingrostech hochester gelumen bransiolen.
    </div>
</form> 
```

**对于 Javascript**

```
$(document).ready(function(){
    $(".tstcolor").keyup(function(){
        var txtcolor = $("#txtcolor").val();
        var background = $("#bgcolor").val();

        $("#txtcolor").css("color",txtcolor);
        $("#bgcolor").css("background-color",background);

        $('.preview').click(function(){
            $("#testcolor").css("visibility","visible");                        
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:03:07.417

改变

```
$('.preview').click(function(){
            $("#testcolor").css("visibility","visible");                        
}); 
```

至

```
$('.preview').click(function(){
   $(".testcolor").css("visibility","visible");                        
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:10:42.137

您提到`#testcolor`而不是`.testcolor`并且您将 css 属性分配给 TextBoxes 而不是`div`. 更改单击事件中的 css 属性，因为您希望在单击`a`标记时显示更改。（如果您在单击事件之外更改 css，那么只要 TextBoxes 的值发生更改，div 就会更改）

**[工作小提琴](http://jsbin.com/ohuciv/3/edit)**

```
$(document).ready(function(){
   $(".tstcolor").keyup(function(){
      var txtcolor = $("#txtcolor").val();
      var background = $("#bgcolor").val();            
      //removed div css properties from here
      $('.preview').click(function(){
         //added div css properties
         $(".testcolor").css("color",txtcolor);               
         $(".testcolor").css("background-color",background);
         //replaced '#' with '.'
         $(".testcolor").css("visibility","visible");              
      });
   });
}); 
```

检查这个**[工作小提琴](http://jsbin.com/ohuciv/3/edit)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:04:26.683

您可以使用 text 代替 val

```
var txtcolor = $("#txtcolor").text;
var background = $("#bgcolor").text; 
```

和

```
$('.preview').click(function(){
 $(".testcolor").css("visibility","visible");                        
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:17:57.387

```
$(document).ready(function(){
    $(".tstcolor").keyup(function(){
        var txtcolor = $("#txtcolor").val();
        var background = $("#bgcolor").val();

        $("#txtcolor").css("color",txtcolor);
        $("#bgcolor").css("background-color",background);
        });

        $('.preview').click(function(){ // Place onclick outside keyup event
            var txtcolor = $("#txtcolor").val();
            var background = $("#bgcolor").val();
            $(".testcolor").css({"background-color":background,"color":txtcolor}).show();//use class selector,i.e (.) for class and (#) for id                       
        });

});​ 
```

## [更新的演示](http://jsfiddle.net/wqzk7/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T09:22:05.117

尝试这个：

```
$(".tstcolor").keyup(function() {

    var txtcolor = $("#txtcolor").val();
    var background = $("#bgcolor").val();
    $("#txtcolor").css("color", txtcolor);
    $("#bgcolor").css("background-color", background);
});

$('.preview').click(function(e) {

    e.preventDefault();
    $(".testcolor").show().css({
        'color': $("#txtcolor").val(),
        'background-color': $("#bgcolor").val()
    });
}); 
```

[在这里演示](http://jsfiddle.net/DzKGM/)

# sql-server-2008 - 我如何在 sql server 中使用 2000 美元或 2000 英镑等货币数据显示工资，然后求和，

> ID：14119247
> 
> 赞同：0
> 
> 时间：2013-01-02T09:00:55.257
> 
> 标签：sql-server-2008, currency

> **可能重复：**
> [在 sql server 中使用货币 $ 格式？](https://stackoverflow.com/questions/4883865/using-currency-format-with-sql-server)

在 Microsoft Sql 服务器中，我想创建一个表，其中包含像薪水这样的列，但对于国际公司，例如我们有很多工人**，他们的薪水是美元，有些是欧元，有些是英镑**，所以我想输入薪水 2000 美元或2000e 或 2000 英镑，并像 sum 或 count 一样聚合，但在设计中，当我为此列选择货币时，我不能写 $ 或 £，然后 sum？如何以**货币形式显示工资，例如****person1**的 2000美元，以及**person2**的 2000**£**，然后将所有存款合计**为 £**或将所有存款或**支出**合计为**美元** 。我的支出是多少美元，我的支出是多少欧元或英镑。

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T09:11:37.213

将货币单位存储在单独的列中。我自己的偏好是使用 ISO 4217 代码来记录这一点 - 这样您就可以区分使用相同符号的多种货币，例如美元和澳元（美元和澳元）。

您需要的任何格式（例如生成`$2000.00`）都应该在前端完成，而不是在数据库中完成。**

# .net - Google Earth API 在鼠标点击时绘制多边形

> ID：14119252
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:01:11.760
> 
> 标签：.net, google-earth-plugin

我正在使用 google earth api 开发一个 wep 应用程序。我想允许用户在鼠标单击时绘制多边形，例如，如果单击点 a 然后 b 然后 c 绘制多边形。并且可以通过单击“ON/OFF”按钮来启用或禁用此功能，例如，如果我单击“ON”按钮则允许用户绘制多边形，如果单击“OFF”则不允许用户绘制。请在这里提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:34:32.553

请参阅`Polyplot`James Stafford 的示例。您应该能够轻松地适应您的需求。[http://www.barnabu.co.uk/geapi/polyplot/](http://www.barnabu.co.uk/geapi/polyplot/)

**编辑：**

如果您想测试给定点（纬度、经度）是否在给定的范围内，也可以使用[GEarthExtensions 库](http://code.google.com/p/earth-api-utility-library/)`polygon`。

```
var contains = polygon.containsPoint(
                 new geo.Point(point.getLatitude(), point.getLongitude())); 
```

# unit-testing - 如何配置 GWTTestCase 扩展类

> ID：14119253
> 
> 赞同：3
> 
> 时间：2013-01-02T09:01:12.103
> 
> 标签：unit-testing, gwt, testing, junit, gwttestcase

我想为我创建的 GWT 复合组件编写测试用例，我有扩展 com.google.gwt.user.client.ui.Composite 的类 Count，在这个 Count 中我有一个文本框和一些处理程序来显示标签到价值观。

现在我想为这个类编写测试用例，我尝试了下面的代码，但它总是显示相同的错误：java.lang.NoSuchMethodError: org.mortbay.thread.Timeout.(Ljava/lang/Object;)V

我的代码是：

```
 package com.rubirules.uibuilder.client;
import org.junit.Test;
import com.google.gwt.junit.client.GWTTestCase;
public class CountTest extends GWTTestCase {
    @Override
    public String getModuleName() {
        return "com.rubirules.uibuilder.client.Count";
    }
    @Test
    public void testNullConstructor(){  
            assertFalse(true);
                        //TODO need to add some code to test Count class
    }
} 
```

我也想知道 getModuleName() 方法的用途是什么？我已经给出了我的测试类的字符串路径。

完整的错误消息是：

```
java.lang.NoSuchMethodError: org.mortbay.thread.Timeout.<init>(Ljava/lang/Object;)V
    at org.mortbay.io.nio.SelectorManager$SelectSet.<init>(SelectorManager.java:306)
    at org.mortbay.io.nio.SelectorManager.doStart(SelectorManager.java:223)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:303)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.Server.doStart(Server.java:233)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.junit.JUnitShell.getUnitTestShell(JUnitShell.java:707)
    at com.google.gwt.junit.JUnitShell.runTest(JUnitShell.java:652)
    at com.google.gwt.junit.client.GWTTestCase.runTest(GWTTestCase.java:441)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at com.google.gwt.junit.client.GWTTestCase.run(GWTTestCase.java:296)
    at junit.framework.TestSuite.runTest(TestSuite.java:243)
    at junit.framework.TestSuite.run(TestSuite.java:238)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
   [WARN] failed SelectChannelConnector@0.0.0.0:0
java.lang.NoSuchMethodError: org.mortbay.thread.Timeout.<init>(Ljava/lang/Object;)V
    at org.mortbay.io.nio.SelectorManager$SelectSet.<init>(SelectorManager.java:306)
    at org.mortbay.io.nio.SelectorManager.doStart(SelectorManager.java:223)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:303)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.Server.doStart(Server.java:233)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.junit.JUnitShell.getUnitTestShell(JUnitShell.java:707)
    at com.google.gwt.junit.JUnitShell.runTest(JUnitShell.java:652)
    at com.google.gwt.junit.client.GWTTestCase.runTest(GWTTestCase.java:441)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at com.google.gwt.junit.client.GWTTestCase.run(GWTTestCase.java:296)
    at junit.framework.TestSuite.runTest(TestSuite.java:243)
    at junit.framework.TestSuite.run(TestSuite.java:238)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
   [WARN] failed Server@2edfcb
java.lang.NoSuchMethodError: org.mortbay.thread.Timeout.<init>(Ljava/lang/Object;)V
    at org.mortbay.io.nio.SelectorManager$SelectSet.<init>(SelectorManager.java:306)
    at org.mortbay.io.nio.SelectorManager.doStart(SelectorManager.java:223)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:303)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.Server.doStart(Server.java:233)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.junit.JUnitShell.getUnitTestShell(JUnitShell.java:707)
    at com.google.gwt.junit.JUnitShell.runTest(JUnitShell.java:652)
    at com.google.gwt.junit.client.GWTTestCase.runTest(GWTTestCase.java:441)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at com.google.gwt.junit.client.GWTTestCase.run(GWTTestCase.java:296)
    at junit.framework.TestSuite.runTest(TestSuite.java:243)
    at junit.framework.TestSuite.run(TestSuite.java:238)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:14:35.360

我推荐你使用[gwt-test-utils](https://github.com/gwt-test-utils/gwt-test-utils)，它有完整的文档和[示例](https://github.com/gwt-test-utils/gwt-test-utils-samples)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:49:23.647

请查看 Google GWT 团队如何为小部件编写测试用例。[您可以在GitHub 上](https://github.com/gwtproject/gwt/tree/master/user/test/com/google/gwt/user/client/ui)的 GWT 存储库中找到示例。

实现`getModuleName()`它以返回一个字符串，该字符串反映了您的 GWT 模块文件的路径`com.rubirules.uibuilder.UIbuilder`。

# python - 如何在 Cython 中声明 2D 列表

> ID：14119254
> 
> 赞同：9
> 
> 时间：2013-01-02T09:01:15.523
> 
> 标签：python, cython

我正在尝试编译这种代码：

```
def my_func(double c, int m):
    cdef double f[m][m]

    f = [[c for x in range(m)] for y in range(m)]
    ... 
```

这引发了：

```
Error compiling Cython file:
------------------------------------------------------------
def grow(double alpha, double beta, double gamma, int m, int s):
    cdef double f[m][m]
                     ^
------------------------------------------------------------
test.pyx:6:22: Not allowed in a constant expression 
```

之后我假设我不能在指定的地方使用变量，我尝试使用数值：

```
def my_func(double c, int m):
    cdef double f[500][500]

    f = [[c for x in range(500)] for y in range(500)]
    ... 
```

但后来我得到：

```
Error compiling Cython file:
------------------------------------------------------------
    f = [[beta for x in range(500)] for y in range(500)]
     ^
------------------------------------------------------------
test.pyx:13:6: Assignment to non-lvalue 'f' 
```

所以，我想知道如何在 cython 代码中声明和制作 2D 列表。我在谷歌搜索“cython 2D list”的文档中找不到这种示例

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T09:54:35.400

不要在 Cython 中使用列表推导。没有加速，因为他们创建了常规的 python 列表。Wiki[说](http://wiki.cython.org/DynamicMemoryAllocation)，您应该在 Cython 中使用动态分配，如下所示：

```
from libc.stdlib cimport malloc, free

def my_func(double c, int m):
    cdef int x
    cdef int y
    cdef double *my_array = <double *>malloc(m * m * sizeof(double))

    try:

        for y in range(m):
            for x in range(m):
                #Row major array access
                my_array[ x + y * m ] = c

        #do some thing with my_array

    finally:
       free( my_array ) 
```

但是如果你需要一个二维数组的 python 对象，建议使用[NumPy](http://wiki.cython.org/tutorials/numpy)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T09:54:32.123

```
cdef double f[500][500] 
```

这是声明一个包含 500 个 C 数组的 500 个双精度数组的 C 数组。那是 500 * 500 压缩的双精度值（在这种情况下存储在堆栈中，除非 Cython 做了一些时髦的事情），没有任何间接，这有助于性能和缓存利用率，但显然增加了严格的限制。也许你想要这个，但你应该先学习足够的 C 来了解这意味着什么。顺便说一句，一个限制是大小必须是编译时常量（取决于 C 版本；C99 和 C10 允许），这就是第一条错误消息的内容。

如果您确实使用了数组，则不会`f`按照您所做的方式进行初始化，因为这没有任何意义。`f`已经是 500x500 双变量，并且不能将整个数组分配给（这是后一个错误消息试图告诉您的内容）。特别是，列表推导创建了一个完整的 Python 列表对象（您也可以从 Cython 使用它，见下文），其中包含完整的“盒装”Python 对象（`float`在本例中为 objects）。列表与 C 数组不兼容。使用带有项目分配的嵌套`for`循环进行初始化。最后，这样的数组需要 500 * 500 * 8 字节，几乎是 2 MiB。在某些系统上，这比整个堆栈都大，而在所有其他系统上，它占堆栈的很大一部分，这是一个坏主意。

如果您使用 Python 列表，请注意您不会在性能和内存使用方面获得太多改进（假设您的代码将主要操作该列表），尽管您可能会获得一些便利作为回报。您可以省略`cdef`, 或`list`用作类型（`object`也应该工作，但您没有从中获得任何收益，所以您不妨省略它）。

NumPy 数组可能更快、更节省内存*并且*更方便使用。如果您可以根据 NumPy 的操作来实现算法的性能关键部分，那么您完全可以在不使用 Cython*的*情况下获得所需的加速。

# html - 如何对齐 本身不是中心的项目？

> ID：14119255
> 
> 赞同：4
> 
> 时间：2013-01-02T09:01:19.107
> 
> 标签：html, css, jsf

当我使用此代码段时

```
<h:panelGrid id="myGrid" columns="1"
rendered="#{myBean.showResults}" width="50%"
border="1" style="text-align: center;"> 
```

panelGrid 的项目将集中
但
我想将 h:panelGrid 本身集中在我的 XHTML 页面的中心
就像这个 HTML 代码

```
<table id="myGrid" border="1" align="center"> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T12:21:53.350

假设它有一个已知的宽度，给它一个左右边距`auto`。这样，它将相对于父块元素居中。

```
<h:panelGrid ... style="margin: 0 auto;"> 
```

### 也可以看看：

*   [在 CSS 中将 div 居中](https://stackoverflow.com/questions/2281087/center-a-div-in-css/2281107#2281107)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:32:22.240

将其包装在具有页面大小的面板网格中，并将父网格的样式设置为文本居中对齐。然后您的子网格将在页面上居中（从您的子面板网格中删除 text-align: center 样式

# facebook - 如果朋友接受我的申请邀请，如何获得通知

> ID：14119256
> 
> 赞同：0
> 
> 时间：2013-01-02T09:01:19.580
> 
> 标签：facebook, facebook-graph-api, fbml, xfbml

我们可以邀请朋友申请，有什么方法可以获取特定朋友接受我的邀请的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:18:03.657

通常，我们会在朋友点击“接受按钮”的那一刻提供一个链接，打开带有该链接的网络浏览器，您可以在那里做任何您喜欢的事情。

但是，如果您在用户已阅读邮件的情况下要求“确认”之类的内容……或者，那么情况就不同了……

# html - 如何解析 HTML5 Canvas 中显示的数据？

> ID：14119257
> 
> 赞同：4
> 
> 时间：2013-01-02T09:01:22.463
> 
> 标签：html, web-scraping, html5-canvas

我想解析使用 HTML5 画布元素显示的图形详细信息。当我检查元素时，它看起来只是空元素。有没有办法找出画布的内容来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:06:01.793

不。

画布实际上是图形的画布。最好的办法是找到画布被渲染的位置，然后找到数据的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:48:30.107

关于你[最后一个封闭的问题](https://stackoverflow.com/questions/14120262/how-to-click-on-html5-canvas-element-using-java-script)......

```
// ==UserScript==
// @name        Graph reader
// @namespace   http://gm.wesley.eti.br
// @include     http://www.quantcast.com/stackoverflow.com
// @version     1
// ==/UserScript==

var tz = 60 * new Date().getTimezoneOffset();
(function recursive (x, l, f) {
    if (l.length) {
        if (x[l[0]]) {
            recursive(x[l.shift()], l, f);
        } else {
            setTimeout(recursive, 1000, x, l, f);
        }
    } else {
        f(x);
    }
}(unsafeWindow, ["qctg", "controller", "subset", "reach"], function (data) {
    // data is equals to unsafeWindow.qctg.controller.subset.reach

    var index = data.length - 1;
    alert([
        "DATE       " + new Date(1000 * (data[index].date + tz)),
        "PEOPLE     " + data[index].reach.PEOPLE.GLOBAL,
        "VISITS     " + data[index].reach.HOURLY_SESSIONS.GLOBAL,
        "PAGE VIEWS " + data[index].reach.ARRIVALS.GLOBAL,
    ].join("\n"));
})); 
```

# android - ActionBarSHerlock 选项卡和菜单项：自定义

> ID：14119259
> 
> 赞同：0
> 
> 时间：2013-01-02T09:01:34.400
> 
> 标签：android, actionbarsherlock

我有一些关于如何自定义选项卡和菜单项的问题 - 如何设置徽标和选项卡之间的边距（它们都在一行中）以及如何在只有图标的菜单项之间放置垂直分隔符？（问题是当您将菜单项显示为文本或图标+文本时有垂直分隔符，但仅在图标的情况下没有）关于菜单项分隔符的另一件事是如何将此分隔符放在每个图标之前？

我看过所有的 actionbarsherlock 示例，其中有很多样式，并检查了有关它的其他资源，但我没有找到如何自定义这些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:17:55.803

**Margin between tabs and logo**

Unless you create a custom view with your custom tab implementation there is only one way I can figure out to create a space between tabs and logo (assuming that the title is hidden) is setting the tab bar's left padding. For this your theme has to contain:

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="actionBarTabBarStyle">@style/MyTabBarStyle</item>
    <item name="android:actionBarTabBarStyle">@style/MyTabBarStyle</item>
</style> 
```

The `MyTabBarStyle` has to contain:

```
<style name="MyTabBarStyle" parent="Widget.Sherlock.ActionBar.TabBar">
    <item name="android:paddingLeft">@dimen/my_left_padding</item>
</style> 
```

Note that you have to set this version of `MyTabBarStyle` in the proper place to be displayed only when the tabs are placed in the main action bar (which happens usually in the landscape orientation configuration), so you should place it in `res/values-land/styles.xml`.

**Menu items' dividers**

You mentioned correctly, that it is a problem to create dividers when the menu items are displayed as icons. You can still use little trick to do it - encode the dividers into action button backgrounds. If you use 9-patch drawables like this (scaled for better visibility):

![enter image description here](../Images/7569869a7aef4d3b0f02369b3e0d4884.png)

then a green dividers will be created (naturally you should also create versions for other states).

To set the background, you have to define `android:actionButtonStyle` in the theme:

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="actionButtonStyle">@style/MyActionButtonStyle</item>
    <item name="android:actionButtonStyle">@style/MyActionButtonStyle</item>
</style> 
```

And the style has to have background defined:

```
<style name="MyActionButtonStyle" parent="@style/Widget.Sherlock.ActionButton">
    <item name="android:background">@drawable/my_actionbutton_bg</item>
</style> 
```

With this solution, you can place the divider before each item. Note that if overflow icon is displayed, you should probably define a similar background for `android:actionOverflowButtonStyle`.

A different solution to the problem might be to define `android:actionLayout` for menu items. There you can define your custom layout for each menu item.

# csv - 带有 gawk 的 CSV 可选引号

> ID：14119260
> 
> 赞同：0
> 
> 时间：2013-01-02T09:01:36.813
> 
> 标签：csv, awk, gawk

我需要使用 gawk 的“FPAT”或等效函数“patsplit”。但是在我们的 CentOs 服务器上，gawk 的安装版本似乎是 3.1.5。

我尝试使用以下命令更新 gawk：

```
yum update gawk; 
```

服务器显示：“没有标记为更新的包”

我还尝试使用以下方法重新安装 gawk：

```
 yum install gawk; 
```

服务器输出：“包 gawk-3.1.5-15.el5.x86_64 已安装且最新版本”

我需要 gawk 4.0 或更高版本才能使用那些 FPAT 或 patsplit。为什么我需要使用它们？好吧，我正在尝试处理一个 CSV 文件，似乎 CSV 文件有可选的引号和嵌入的逗号。

例子：

从这样的 csv 行：

```
this,is,a,"csv,with,embedded coma" 
```

我需要像这样拆分字段：

```
this

is

a

"csv,with,embedded comma" 
```

这是 gawk 代码：

```
awk '{patsplit("this,is,a,\"csv,with,embedded comma\"",a,"([^,]*)|(\"([^\"]|\"\")+\"[^,]*)",seps); for(i=0;i<length(a);i++) print a[i];}'; 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T23:31:39.900

尝试在您的管道中使用 csvquote 以使数据易于 awk 解释。这是我编写的脚本，它用非打印字符替换引用字段中的逗号，然后恢复它们。

因此，如果您的 awk 命令最初看起来像这样：

```
awk -F, '{print $3 "," $5}' inputfile.csv 
```

...可以使用 csv 引用的分隔符，如下所示：

```
csvquote inputfile.csv | awk -F, '{print $3 "," $5}' | csvquote -u 
```

有关代码和更多文档，请参阅[https://github.com/dbro/csvquote](https://github.com/dbro/csvquote)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:13:49.230

我认为我们可以使用 match() 来获取字段。

以下是代码：

```
awk '{ $0=$0","                                   
while($0) {
  match($0,/ *"[^"]*" *,|[^,]*,/) 
  field=substr($0,RSTART,RLENGTH)            
  gsub(/,$/,"",field)   
  print field
  $0=substr($0,RLENGTH+1)              
}}' file 
```

使用您的输入示例进行测试：

```
kent$  echo 'this,is,a,"csv,with,embedded coma"'|awk '{
$0=$0","                                   
while($0) {
  match($0,/ *"[^"]*" *,|[^,]*,/) 
  field=substr($0,RSTART,RLENGTH)            
  gsub(/,$/,"",field)   
  print field
  $0=substr($0,RLENGTH+1)              
}}'
this
is
a
"csv,with,embedded coma" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T20:44:36.303

最简单的做法是在进行实际处理之前将引号之外的逗号转换为其他内容。例如：

```
$ cat file
this,is,a,"csv,with,embedded coma",and,here,"is,another",one
and,here,"is,another,line"
$
$ awk 'BEGIN{FS=OFS="\""}{for (i=1;i<=NF;i+=2) gsub(/,/,";",$i)}1' file
this;is;a;"csv,with,embedded coma";and;here;"is,another";one
and;here;"is,another,line" 
```

如果您不喜欢“;”作为字段分隔符，请选择其他内容，例如控制字符，或者这里有一个使用换行符作为 FS 和空行作为 RS 的示例：

```
$ awk 'BEGIN{FS=OFS="\""; ORS="\n\n"}{for (i=1;i<=NF;i+=2) gsub(/,/,"\n",$i)}1' file
this
is
a
"csv,with,embedded coma"
and
here
"is,another"
one

and
here
"is,another,line"

$ awk 'BEGIN{FS=OFS="\""; ORS="\n\n"}{for (i=1;i<=NF;i+=2) gsub(/,/,"\n",$i)}1' file |
awk -F'\n' -v RS= '{for (i=1;i<=NF;i++) print NR,i,"<" $i ">"}'
1 1 <this>
1 2 <is>
1 3 <a>
1 4 <"csv,with,embedded coma">
1 5 <and>
1 6 <here>
1 7 <"is,another">
1 8 <one>
2 1 <and>
2 2 <here>
2 3 <"is,another,line"> 
```

仅当您嵌入了换行符或嵌入了转义双引号时，它才会变得棘手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-20T13:33:18.347

这是一个纯粹的 GAWK 解决方案：

```
{ # Split on double quotes to handle lines like "this, this, or this".
    printf("LINE:    '%s'\nFIELDS:", $0)
    n = split($0,q,/"/)
    f = 0
}

n == 1 { # If n is 1, there are no double quotes on the line.
    n = split($0,c,/,/)
    for (i = 1; i <= n; i++) {
        printf("  %d='%s'", i, c[i])
    }
    printf("\n")
    next
}

{ # There are "strings"; the EVEN entries in q are the quoted strings.
    for (i = 1; i <= n; i++) {
        if (0 == and(i,1)) { # i is EVEN: This is a double-quoted string.
            printf("  %d='\"%s\"'", ++f, q[i])
            continue
        }
        if (0 == length(q[i])) { # First/last field is a quoted string.
            continue
        }
        if (q[i] == ",") {
            # First/last field empty, or comma between two quoted strings.
            if (i == 1 || i == n) { # First/last field empty
                printf("  %d=''", ++f)
            }
            continue
        }
        # Remove commas before/after a quoted string then split on commas.
        sub(/^,/,"",q[i])
        sub(/,$/,"",q[i])
        m = split(q[i],cq,/,/)
        for (j = 1; j <= m; j++) {
            printf("  %d='%s'", ++f, cq[j])
        }
    }
    printf("\n")
} 
```

使用此输入：

```
This is one,23,$9.32,Another string.
Line 2,234,$88.34,Blah blah
"This is another",763,$0.00,"trouble, or not?"
"This is, perhaps, trouble too...",763,$0.00,"trouble, or not?"
2,"This is, perhaps, trouble too...",763,"trouble, or not?"
3,,"number, number","well?"
,,,
"1,one","2,two","3,three","4,four"
",commas,","no commas",",,,,,",
,"Fields 1 and 4 are empty","But 2 and 3 are not", 
```

产生此输出：

```
LINE:    'This is one,23,$9.32,Another string.'
FIELDS:  1='This is one'  2='23'  3='$9.32'  4='Another string.'
LINE:    'Line 2,234,$88.34,Blah blah'
FIELDS:  1='Line 2'  2='234'  3='$88.34'  4='Blah blah'
LINE:    '"This is another",763,$0.00,"trouble, or not?"'
FIELDS:  1='"This is another"'  2='763'  3='$0.00'  4='"trouble, or not?"'
LINE:    '"This is, perhaps, trouble too...",763,$0.00,"trouble, or not?"'
FIELDS:  1='"This is, perhaps, trouble too..."'  2='763'  3='$0.00'  4='"trouble, or not?"'
LINE:    '2,"This is, perhaps, trouble too...",763,"trouble, or not?"'
FIELDS:  1='2'  2='"This is, perhaps, trouble too..."'  3='763'  4='"trouble, or not?"'
LINE:    '3,,"number, number","well?"'
FIELDS:  1='3'  2=''  3='"number, number"'  4='"well?"'
LINE:    ',,,'
FIELDS:  1=''  2=''  3=''  4=''
LINE:    '"1,one","2,two","3,three","4,four"'
FIELDS:  1='"1,one"'  2='"2,two"'  3='"3,three"'  4='"4,four"'
LINE:    '",commas,","no commas",",,,,,",'
FIELDS:  1='",commas,"'  2='"no commas"'  3='",,,,,"'  4=''
LINE:    ',"Fields 1 and 4 are empty","But 2 and 3 are not",'
FIELDS:  1=''  2='"Fields 1 and 4 are empty"'  3='"But 2 and 3 are not"'  4='' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-12T19:35:00.733

如果您可以访问 yum，现在应该称为 dnf，请参阅

> [https://en.wikipedia.org/wiki/DNF_（软件）](https://en.wikipedia.org/wiki/DNF_(software))

那么你可以**作为普通用户运行**

```
git clone https://git.savannah.gnu.org/git/gawk.git
cd gawk
./configure
make
sudo make install 
```

那么你的 tmp.txt 输入文件的问题

```
this,is,a,"csv,with,embedded coma" 
```

很容易转换为

```
gawk '{patsplit("this,is,a,\"csv,with,embedded comma\"",a,"([^,]*)|(\"([^\"]|\"\")+\"[^,]*)",seps); for(i=0;i<length(a);i++) print a[i];}' tmp.txt 
```

您可能在编译 gawk 时遇到问题，如果它们弹出，您应该解决这些问题。

# backbone.js - 如何使用主干控制器和视图进行嵌套选项卡（子选项卡）？

> ID：14119269
> 
> 赞同：0
> 
> 时间：2013-01-02T09:02:36.343
> 
> 标签：backbone.js, marionette

我是 Backbone 开发的初学者，我正在尝试使用 Backbone 开发生命周期管理。该项目包含四个主要选项卡，每个选项卡中都有子选项卡。我使用控制器、模型和视图等创建了主选项卡。我还添加了导航滑块

这一切都很好，但我对如何在主选项卡中加载子选项卡感到困惑。我的主要问题是，我在哪里启动子选项卡的控制器？它来自主选项卡控制器的初始化方法吗？

代码概述： - 主控制器为每个选项卡加载集合和模型 - 主控制器在单击主选项卡时显示每个选项卡的视图

```
// Declare pages collection
var mainpages = new TST.Collections.Pages([ new SCL.Models.Page({
    id : 1,
    name : "Main Tab1",
    route : "!/tab1",
    _controller : TST.Controllers.Tab1
}), new SCL.Models.Page({
    id : 2,
    name : "Main Tab2",
    route : "!/tab2",
    _controller : TST.Controllers.Tab2
}) ], {
    current : 1
});

// show the main layout
var layout = new TST.Layouts.Main({
    collection : mainpages
});
this.options.region.show(layout);

// show the menu
var menu = new TST.Views.Nav({
    collection : mainpages
});
layout.menu.show(menu); 
```

区域在主布局中声明。并使用 -> self.content.show(options.view, self.options.collection.goRight); 显示每个选项卡上的选项卡单击 其中自我 = 这个

每个选项卡的控制器如下所示

```
SCL.Routers.Tab1= Backbone.Marionette.AppRouter.extend({
    appRoutes : {
        "!/request" : "start"
    }
});

  SCL.Controllers.Tab1= TST.Framework.Controller.extend({
    initialize : function(options) {
        this.layout = new TST.Layouts.Tab1();
        this.router = new TST.Routers.Tab1({
            controller : this
        });
    },

    start : function() {
        app.vent.trigger("page:change", {
            view : this.layout
        });
    }
}); 
```

那么现在，如何在 Tab1 下加载子标签？

请分享您的想法并帮助我...在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T08:30:02.353

基于 Derick Bailey 的原始文章（[http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)），我写了一篇关于类似问题的博文在这里：[http ://davidsulc.com/blog/2013/02/03/tutorial-nested-views-using-backbone-marionettes-compositeview/](http://davidsulc.com/blog/2013/02/03/tutorial-nested-views-using-backbone-marionettes-compositeview/)

您应该能够应用博客文章中的内容来解决您自己的挑战，因为它们在本质上非常相似。

# yii - 通过多个条件查找全部

> ID：14119271
> 
> 赞同：6
> 
> 时间：2013-01-02T09:02:45.107
> 
> 标签：yii

我有 4 张桌子：

*   内容
*   关系
*   学科
*   团体

内容：

```
id(int)
title(varchar)
text(text) 
```

学科：

```
id(int)
title(varchar)
prent_id(int) 
```

团体：

```
id(int)
title(varchar) 
```

关系：

```
id(int)
content_id(int)
group_id(int)
subject_id(int) 
```

**与****内容**的关系是多对多**的**。

**组**对**内容**是**多对多的**。

**受制于****内容**是多对多**的**。

内容可能属于多个主题或多个组。

我想执行一个有点像这样的查询：

```
select * from relation where group_id = 1,3 and subject_id = 1,4,6,7 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T10:24:16.287

您可以使用[`findAllByAttributes`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAllByAttributes-detail "http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAllByAttributes-detail")：

```
$relation_models = Relation::model()->findAllByAttributes(array(
        'group_id'=>array('2','3'),
        'subject_id'=>array('4','5','7')
    )
); 
```

这会给你类似的东西（实际查询可能包含别名）：

```
select * from relation where group_id IN (1,3) and subject_id IN (1,4,6,7) 
```

* * *

但是，如果您想要：（`where group_id IN (1,3) OR subject_id IN (1,4,6,7)`即 OR 而不是 AND），那么您将不得不使用[`CDbCriteria`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria "http://www.yiiframework.com/doc/api/1.1/CDbCriteria")：

```
$criteria = new CDbCriteria;
$criteria->condition = 'group_id IN (1,3) OR subject_id IN (1,4,6,7)'
$relation_models = Relation::model()->findAll($criteria); 
```

你也可以使用`addInCondition`：

```
$criteria->addInCondition('group_id', array('1','2'), 'OR');
$criteria->addInCondition('subject_id', array('1','4','6','7'), 'OR');
$relation_models = Relation::model()->findAll($criteria); 
```

* * *

不过，请记住绑定参数，以防您从用户那里获取输入。像这样的东西：

```
$criteria->condition = 'group_id IN (:gid1, :gid2) OR subject_id IN (:sid1, :sid2, :sid3, :sid4)';     
$criteria->params = array(':gid1'=>$xyz,':gid2'=>'2',':sid1'=>$uvw,':sid2'=>$abc,':sid3'=>'6',':sid4'=>'7');
$relation_models = Relation::model()->findAll($criteria); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:34:38.753

您可以使用 with()

如果您在创建模型时在 gii 上选择 Build Relations 选项，原始关系名称将在您的关系模型中。

```
 $relation_models = Relation::model()->with('contents','groups','subjects')->findAllByAttributes(array(
        'group_id'=>array('2','3'),
        'subject_id'=>array('4','5','7')
    )); 
```

# mysql - MySQL 集群复制配置

> ID：14119272
> 
> 赞同：1
> 
> 时间：2013-01-02T09:02:52.020
> 
> 标签：mysql, replication, cluster-computing, database-replication

我正在尝试使用两个 MySQL 集群之间的单个复制通道来设置复制。我已经多次关注 mysql.com 的文档，但似乎无法使其正常工作。

我遇到的问题是对未配置为 Master 的 SQL 节点进行的查询不会复制 NDBCLUSTER 表的任何 INSERT、UPDATE 或 DELETE 查询，但是当我在 SQL 节点上插入、更新或删除一行时是主节点，它可以很好地复制到另一个集群。

我知道复制已设置，因为如果我在主集群中的任何 SQL 节点上运行 CREATE DATABASE 查询，它会很好地复制到从集群。同样，如果我在任何 SQL 节点上运行 CREATE TABLE 查询以在我的新数据库中创建 NDBCLUSTER 表，它也会很好地复制到从属集群。

我阅读文档的方式以及我对集群复制工作的理解是，您的集群中可以有 10 个 API 节点，其中一个节点配置为专用于复制作为主节点。因此，如果在集群中的 10 个 API 节点中的任何一个上发生 INSERT、UPDATE 或 DELETE 查询，那么复制主节点和 NDB 二进制日志将选择这个，允许从节点进行复制。这似乎对我不起作用。

我的理解正确吗？

以下是我的设置方式：

所有服务器都是运行 64 位 CentOS 6.2 和 MySQL Cluster 7.2.8 x86_64 的 VM。

**集群 1（主集群）：**
1 x ndb_mgmd 管理节点（服务器 1A - IP：10.14.64.10）
2 x mysqld API 节点（服务器 1B 和 1C - IP：10.14.64.11 和 10.14.64.12）
2 x ndbd 数据节点（服务器1D 和 1E - IP：10.14.64.13 和 10.14.64.14）

**集群 2（从属集群）：**
1 x ndb_mgmd 管理节点（服务器 2A - IP：10.13.64.10）
2 x mysqld API 节点（服务器 2B 和 2C - IP：10.13.64.11 和 10.13.64.12）
2 x ndbd 数据节点（服务器2D 和 2E - IP：10.13.64.13 和 10.13.64.14）

这是一张漂亮的图片来帮助解释：（
必须包含一个链接，因为这是我的第一篇文章）

[http://cpjon.es/wp-content/uploads/2013/01/mysql-cluster-replication.png](http://cpjon.es/wp-content/uploads/2013/01/mysql-cluster-replication.png)

我有复制设置，因此服务器 1C 是复制主机，服务器 2C 是复制从机。

这是服务器 1C（作为 MASTER）的 /etc/my.cnf 文件：

```
[mysqld]
ndbcluster
ndb-connectstring=10.14.64.10
log-bin
binlog-format=ROW
server-id=10

[mysql_cluster]
ndb-connectstring=10.14.64.10 
```

这是服务器 2C（作为 SLAVE）的 /etc/my.cnf 文件：

```
[mysqld]
ndbcluster
ndb-connectstring=10.13.64.10
server-id=11

[mysql_cluster]
ndb-connectstring=10.13.64.10 
```

当我运行查询**CREATE DATABASE test_db1;** 在 SQL Server 1B 或 1C 上，它会立即复制到集群 2，我可以在 SQL Server 2B 和 2C 上看到数据库**test_db1 。**

当我运行以下**CREATE TABLE**查询时：

```
CREATE TABLE `City` (
  `ID` int(11) NOT NULL auto_increment,
  `Name` char(35) NOT NULL default '',
  `CountryCode` char(3) NOT NULL default '',
  `District` char(20) NOT NULL default '',
  `Population` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ID`)
) ENGINE=NDBCLUSTER DEFAULT CHARSET=latin1; 
```

在 SQL Server 1B 或 1C 上，它会立即复制到集群 2，我可以在 SQL Server 2B 和 2C 上看到我新创建的表**City 。**

但是，*这是问题所在- 当我在***Server 1B**上运行以下查询时：

```
INSERT INTO City VALUES (1,'Melbourne','AUS','Victoria',4100000); 
```

我可以看到集群 1 中所有 SQL 节点（即服务器 1B 和 1C）上的条目，但看不到集群 2 中任何 SQL 节点（即服务器 2B 和 2C）上的条目。

**如果我在Server 1C**上运行类似的查询：

```
INSERT INTO City VALUES (2,'Sydney','AUS','New South Wales',4600000); 
```

**我可以在集群 1和**集群 2中的所有 SQL 节点上看到该条目- 所以在所有四个 SQL 节点上 - 这是我所期望的。

我一定错过了一些非常简单的东西。我已经尝试炸毁这些服务器并在许多场合重新开始 - 并且似乎无法将服务器 1B 上的任何 INSERT、UPDATE 或 DELETE 查询发送到我的辅助集群。

任何指示或帮助将不胜感激（对于冗长的帖子感到抱歉）

问候，
克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:36:13.443

在 1B 上启用 binlog。

要启用它，请将其添加到 my.cfg：

```
log-bin=binlog
binlog-format=ROW 
```

# json - 使用 knockoutjs 与 Grid 发布绑定日期

> ID：14119276
> 
> 赞同：1
> 
> 时间：2013-01-02T09:03:09.273
> 
> 标签：json, date, knockout.js, grid

我有一个可编辑的网格和一个向网格添加数据的表单。用户可以直接编辑网格数据，他可以使用表单部分输入新条目。我已经将 ASP.Net MVC 与 ajax 表单结合使用，效果很好。我在成功的 ajax 回发后更新了整个网格 html。没有什么复杂的，一个传统的实现。

> 现在，我一直在努力使用 knockoutjs 来增强它。这个想法是保留 UI，但在后端做所有事情，以便用户体验更好，闪烁最少，流量/回发时间更少。正如预期的那样，一切都在后端进行。以下是总结——

我有一个 viewModel，它由一个“commentToAdd”对象和一个“commentList”对象组成，正如预期的那样，它是一个评论对象列表。我将“commentList”对象与我的 Grid 绑定，“commentToAdd”与表单绑定。

```
var viewModel = new commentsModel();        
$.getJSON('@Url.Action("CommentsKOVM", "Claim", new { ClaimGUID = commentObj.ClaimGUID })',
 function(data) { //upon success
    viewModel.commentToAdd = ko.mapping.fromJS(data.CommentToAdd);
    viewModel.allComments = ko.mapping.fromJS(data.AllComments, mapping);// Initial items         
  ko.applyBindings(viewModel); 
```

工作正常。但我有一个“日期”字段。JSON 将其呈现为 '/Date(1224043200000)' 所以，我必须对其进行格式化 -[如何格式化 Microsoft JSON 日期？](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)喜欢：

```
<span data-bind="text:new Date(parseInt(PostedOn.toString().substr(6))).toLocaleFormat('%d/%m/%Y')"></span> 
```

但它不起作用，因为似乎 'PostedOn' 被转换为可观察的！.toString 返回一个函数定义！

我还尝试按照[Hanselman 文章](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)的解释实现日期绑定。

我似乎没有在网格中正确显示我的日期。我还尝试“忽略映射”：

```
var mapping = {'ignore': ["PostedOn"]}; 
```

但不知道如何使它适用于我的子对象（即commentList.PostedOn）。

我可能没有以正确的方式这样做，所以请建议或至少帮助我在我的网格中获得正确的日期。

*PS：当我使用 ko.observableArray(data.commentList) 时按预期工作，但它不适合编辑功能。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:13:24.037

这个问题有很多很好的例子：

[使用 Asp.Net MVC 和 KnockoutJS 处理日期](https://stackoverflow.com/questions/8735617/handling-dates-with-asp-net-mvc-and-knockoutjs/13744151)

我个人建议使用这样的自定义绑定：

```
var jsDateFormat = "%d/%m/%Y"; // can be something like yy-mm-dd

//...

 ko.bindingHandlers.date = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var value = valueAccessor();
        if (value != null) {
            var jsonDate = new Date(parseInt(valueAccessor().substr(6)));
            element.innerHTML = jQuery.datepicker.formatDate(jsDateFormat, jsonDate);
        }
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
    }
}; 
```

如果你有 jQuery UI 和 datepicker，如果没有，只需更改：

`jQuery.datepicker.formatDate(jsDateFormat, jsonDate)`给你的`parseInt(jsonDate.substr(6))).toLocaleFormat(jsDateFormat)`

然后代替：

```
<span data-bind="text:new Date(parseInt(PostedOn.toString().substr(6))).toLocaleFormat('%d/%m/%Y')"></span> 
```

利用：

看看现在有多干净！:)

您可以在 knockout.js 文档中阅读有关自定义绑定的更多信息：http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:45:55.273

最后事实证明 KO.mapping.fromJS 正在完成它的工作，它将我的 data.allComments （评论数组）转换为“可观察数组”。我相信它在内部将其每个属性都转换为可观察对象。

所以，当我访问日期字段时

```
PostedOn: <input type="text" data-bind="date: PostedOn" /> 
```

日期的自定义活页夹有一个可观察的而不是值 -

```
ko.bindingHandlers.date = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var jsonDate = valueAccessor(); 
```

经过一番调试，我更新如下，宾果游戏，它按预期工作！

```
PostedOn: <input type="text" data-bind="date: PostedOn()" /> 
```

我同意这是我对 KO 的误解。**然而，我仍然有点不清楚**ko.mapping.fromJS 和 ko.Observable 之间的区别，更重要的是何时使用哪个？

# sql - 在 SQL 中减去两个日期并得到结果的天数

> ID：14119277
> 
> 赞同：41
> 
> 时间：2013-01-02T09:03:11.850
> 
> 标签：sql, sql-server, tsql

```
Select I.Fee
From Item I
WHERE GETDATE() - I.DateCreated < 365 days 
```

我怎么能减去两天？结果应该是天。例如：365 天。500天……等等……

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-02T09:04:19.947

使用[DATEDIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

```
Select I.Fee
From Item I
WHERE  DATEDIFF(day, GETDATE(), I.DateCreated) < 365 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T09:04:33.933

利用`DATE_DIFF`

```
Select I.Fee
From   Item I
WHERE  DATEDIFF(day, GETDATE(), I.DateCreated)  < 365 
```

*   [DATE_DIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-02T09:51:05.053

编辑：似乎我对代码示例的性能有误。表现最好的是在发布的案例中第二个运行的片段。这证明了我试图解释的内容，并且时间差异并不那么明显：

```
----------------------------------
--  Monitor time differences
----------------------------------
CREATE CLUSTERED INDEX dtIDX ON #ArbDates (MyDate)
DECLARE @Stopwatch DATETIME 
SET @Stopwatch = GETDATE()
    -- SARGABLE
    SELECT *
    FROM #ArbDates
    WHERE MyDate > DATEADD(DAY, -364, '2010-01-01')

PRINT DATEDIFF(MS, @Stopwatch, GETDATE())
SET @Stopwatch = GETDATE()
    -- NOT SARGABLE
    SELECT *
    FROM #ArbDates
    WHERE DATEDIFF(DAY, MyDate, '2010-01-01') < 365
PRINT DATEDIFF(MS, @Stopwatch, GETDATE()) 
```

请原谅我发布迟到和粗略评论的例子，但我认为提及[SARG](http://en.wikipedia.org/wiki/Sargable)很重要。

```
SELECT I.Fee
FROM Item I
WHERE  I.DateCreated > DATEADD(DAY, -364, GETDATE()) 
```

尽管下面代码中的临时表没有索引，但由于在表达式和表中的值之间进行比较，而不是在修改表中的值和常量的表达式之间进行比较，性能仍然得到了增强。希望这被发现是有用的。

```
USE tempdb
GO

IF OBJECT_ID('tempdb.dbo.#ArbDates') IS NOT NULL DROP TABLE #ArbDates
DECLARE @Stopwatch DATETIME 

----------------------------------
--  Build test data: 100000 rows
----------------------------------
;WITH Base10 (n) AS
(
    SELECT 1 UNION ALL  SELECT 1 UNION ALL  SELECT 1 UNION ALL
    SELECT 1 UNION ALL  SELECT 1 UNION ALL  SELECT 1 UNION ALL
    SELECT 1 UNION ALL  SELECT 1 UNION ALL  SELECT 1 UNION ALL
    SELECT 1
)
,Base100000 (n) AS
(
    SELECT 1
    FROM Base10 T1, Base10 T3, Base10 T4, Base10 T5, Base10 T6
)
SELECT MyDate = CAST(RAND(CHECKSUM(NEWID()))*3653.0+36524.0 AS DATETIME) 
INTO #ArbDates 
FROM Base100000

----------------------------------
--  Monitor time differences
----------------------------------
SET @Stopwatch = GETDATE()

    -- NOT SARGABLE
    SELECT *
    FROM #ArbDates
    WHERE DATEDIFF(DAY, MyDate, '2010-01-01') < 365

PRINT DATEDIFF(MS, @Stopwatch, GETDATE())
SET @Stopwatch = GETDATE()

    -- SARGABLE
    SELECT *
    FROM #ArbDates
    WHERE MyDate > DATEADD(DAY, -364, '2010-01-01')

PRINT DATEDIFF(MS, @Stopwatch, GETDATE()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-25T12:43:55.717

```
SELECT DATEDIFF(day,'2014-06-05','2014-08-05') AS DiffDate 
```

diffdate 是列名。

结果：

差异日期

23

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-11T04:18:10.220

怎么样

```
Select I.Fee
From Item I
WHERE  (days(GETDATE()) - days(I.DateCreated) < 365) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T13:45:58.300

```
SELECT (to_date('02-JAN-2013') - to_date('02-JAN-2012')) days_between
FROM dual
/ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-01T05:39:41.777

句法

***DATEDIFF(expr1,expr2)***

描述

DATEDIFF() 返回 (expr1 – expr2)，表示为从一个日期到另一个日期的天数。expr1 和 expr2 是日期或日期和时间表达式。计算中仅使用值的日期部分。

***@D 斯坦利***

# mysql - mysql 其中 10 < id < 20

> ID：14119280
> 
> 赞同：-3
> 
> 时间：2013-01-02T09:03:24.450
> 
> 标签：mysql

我将从 db 中选择一些特定的 id。我的逻辑是这样的：根据小时，我选择像这样的某些项目，因为作业在 cronjob 中运行，并且它每`*:31`分钟运行一次，所以每小时，这是我的逻辑：

伪代码：

```
get hour // 08:30
take 08 and mult(08,10); // 80 
get items from db whose ids lie between 80 < id < 90 
```

我怎样才能在mysql中做这个查询？`80 < id < 90`我在 php 中的 mysql 中需要这个条件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:05:29.270

您可以使用关键字`between`

```
select * from tableName where id between 80 AND 90 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:13:45.750

将您的伪代码转换为 SQL，并具有与描述完全相同的行为

> 80 < 标识 < 90

导致

```
SELECT * 
FROM table 
WHERE id BETWEEN 80+1 AND 90-1 
```

因为`WHERE`包括界限

或直

```
SELECT * 
FROM table 
WHERE 80 < id AND id < 90 
```

# .net - 基于 .NET 的推送通知服务

> ID：14119283
> 
> 赞同：4
> 
> 时间：2013-01-02T09:03:29.900
> 
> 标签：.net, wcf, push-notification, scalable, durable-duplex

我正在寻找基于 .net 的可扩展推送通知解决方案。

**设想：**

客户端和服务器都将在 .NET 中。要求是，将有大约 60-100 个客户端连接到单个服务器，并且服务器应该能够为每个客户端每分钟发送 4000-5000 个通知。每个通知也会有一个小的有效负载。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:03:19.403

如果您考虑 .NET... 看看 XSockets [http://xsockets.net](http://xsockets.net) XSockets 可以提供您需要的东西（以及更多）。

问候乌夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:43:12.060

检查此供应商：[http ://www.pubnub.com/](http://www.pubnub.com/)

如果还有其他问题，它会让您了解您的解决方案可能需要解决的其他一些问题。

我认为这家供应商的后端使用 SingnalR，因此使用 websockets 进行服务器、客户端连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:34:33.570

它认为很大程度上取决于客户端环境的性质和您想要实现的抽象级别。您可以像@skrealin 建议的那样开发一个解决方案，直接与消息传递基础架构进行交互，但这对于无法保证连接/订阅并且可能还需要不必要地公开您的基础架构的基于 Internet/Web 的客户端来说并不是真正理想的。对于这些场景，我会考虑调查几个选项

1.  信号R
2.  Azure 服务总线

这两者都将提供“推送”通知，并通过简单的 API 帮助您管理客户的订阅。由于通知率相对较高，因此“轮询”解决方案在这里可能并不合适。

我敢肯定还有其他方法，但看看这个会让你对所涉及的内容有所了解。

# c# - Microsoft.Build.Utilities、Microsoft.Build.Utilities.v3.5、Microsoft.Build.Utilities.v4.0 的单独项目

> ID：14119292
> 
> 赞同：0
> 
> 时间：2013-01-02T09:04:15.407
> 
> 标签：c#, .net, msbuild, msbuild-task

我创建了一个引用 Microsoft.Build.Utilities.dll 的自定义构建任务 DLL

由于每个版本的文件名不同，

我是否需要创建单独的项目文件以针对不同的 MSBuild 版本？2.0、3.5、4.0 / 4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:29:58.437

我不会那样做的。如果您从代码构建项目，您应该能够为`GlobalProperty`在 .csproj 文件中找到的每个属性进行设置。将自动选择正确的 MSBuild 版本。

```
 ProjectCollection pc = new ProjectCollection();
     Dictionary<string, string> GlobalProperty = new Dictionary<string, string>();

     //GlobalProperty.Add("Configuration", "Debug");
     //GlobalProperty.Add("Platform", "x86");
     //GlobalProperty.Add("OutputPath", "c:\\src");
     //GlobalProperty.Add("TargetFrameworkVersion", "4.0");

     BuildRequestData buidlRequest = new BuildRequestData("projectfile.csproj", GlobalProperty, null, new string[] { "Build" }, null);
     BuildResult buildResult = BuildManager.DefaultBuildManager.Build(new BuildParameters(pc), buidlRequest);

     //if (buildResult["Build"].ResultCode == TargetResultCode.Success)
     //{
     //   Console.WriteLine("Build Success");
     //}
     //else
     //{
     //   Console.WriteLine("Build Fail");
     //} 
```

# c++ - VC++正则表达式匹配长字符串

> ID：14119295
> 
> 赞同：1
> 
> 时间：2013-01-02T09:04:21.537
> 
> 标签：c++, regex

我有以下代码：

```
#include <regex>
#include <iostream>
#include <string>

int main()
{
    std::tr1::regex rx("(\\w+)(\\.|_)?(\\w*)@(\\w+)(\\.(\\w+))+");
    std::string s;
    std::getline(std::cin,s);
    if(regex_match(s.begin(),s.end(),rx))
    {
        std::cout << "Matched!" << std::endl;
    }
} 
```

如果正则表达式类似，它运行良好，`"myemail@domain.com"`但如果我尝试`"myemail@domain.com:anothermail@domain.com:useless string:blah blah"` 它会失败！

我能做些什么来匹配有效的字符串（最终打印找到的字符串，只有匹配的部分不是所有的字符串）？

我以某种方式成功了，但是对于一些 REGEX 模式它失败了：

```
#include <regex>
#include <iostream>
#include <string>

int main () {
    std::string str("mymail@yahoo.com;lslsls;myemail@gmail.com");
    std::tr1::regex rx("[a-zA-Z0-9_\\.]+@([a-zA-Z0-9\\-]+\\.)+[a-zA-Z]{2,4}");
    std::tr1::sregex_iterator first(str.begin(), str.end(), rx);
    std::tr1::sregex_iterator last;

    for (auto it = first; it != last; ++it) 
    {
        std::cout << "[Email] => " << it->str(1) << std::endl;
    }

    return 0;
} 
```

在这里而不是得到`mymail@yahoo.com`，`myemail@gmail.com`我得到`yahoo.c`和`gmail.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:18:31.097

`regex_match`用于检查字符串是否符合精确模式。

`regex_search`根据您的要求或您的模式必须涵盖所有可能性，您可以使用. 看看[正则表达式](http://msdn.microsoft.com/en-us/library/bb982382.aspx)

# iphone - iOS CoreLocation 检查 CLLocation 时间戳以使用它

> ID：14119303
> 
> 赞同：3
> 
> 时间：2013-01-02T09:05:04.303
> 
> 标签：iphone, ios, nsdate, core-location, cllocationmanager

您如何检查 CLLocation 对象并决定是要使用它还是丢弃结果并获取新的位置更新？

我在 CLLocation 上看到了时间戳属性，但我不确定如何将其与当前时间进行比较。

另外，在我比较时间并找到以秒为单位的差异之后，差异应该在什么值下才能让我使用该 CLLocation 对象？什么是好的门槛。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T10:00:51.363

检查时间戳真的很重要，因为 iOS 通常会缓存位置，并且作为第一个度量返回最后缓存的，所以这是我在 Core Location Manager 的委托方法中的操作：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{
    CLLocation * newLocation = [locations lastObject];
        //check if coordinates are consistent
        if (newLocation.horizontalAccuracy < 0) {
            return;
        }
        NSTimeInterval interval = [newLocation.timestamp timeIntervalSinceNow];
        //check against absolute value of the interval
        if (abs(interval)<30) {
            //DO STUFF
        }
    } 
```

我用30秒。如您所见，我还检查了询问水平精度的结果的一致性。
希望这会有所帮助，
安德里亚

# linux - e2fsprogs 保留块计数中的 Tune2fs 实用程序在开发板中重置为默认状态

> ID：14119305
> 
> 赞同：0
> 
> 时间：2013-01-02T09:05:23.047
> 
> 标签：linux, filesystems

e2fsprogs 保留块计数中的 Tune2fs 实用程序在开发板中重置为默认值。但在市场发布的产品中，如 GS2 和 GS3 储备块计数不会重置为默认值。为什么？

我在目标设备和商业设备中都使用了以下命令。$ tune2fs -m 25 /dev/block/mmcblk0p5 ---- 设置 25% 的保留块数。$ df –B 4096 /dev/block/mmcblk0p5 ---- 读取已用空间、可用空间和可用空间。$ tune2fs -l /dev/block/mmcblk0p5 ---- 检查保留块计数。

# java - 编译调用休息服务的代码时出错

> ID：14119306
> 
> 赞同：0
> 
> 时间：2013-01-02T09:05:25.917
> 
> 标签：java, rest, packages

我尝试使用此示例并学习如何调用休息服务，当我输入此代码时出现错误，因为 eclipse 不知道 **org.example.Customer;** .定义客户客户的错误。如何将其导入我的项目？我尝试使用 eclipse 建议但没有成功。（修复项目设置等）

```
import java.util.List;
import javax.ws.rs.core.MediaType;
import org.example.Customer;
import com.sun.jersey.api.client.*;

public class JerseyClient {

   public static void main(String[] args) {
      Client client = Client.create();
      WebResource resource =
        client.resource("http://localhost:8080/CustomerService/rest/customers");

      // Get response as String
      String string = resource.path("1")
        .accept(MediaType.APPLICATION_XML)
            .get(String.class);
      System.out.println(string);

      // Get response as Customer
      Customer customer = resource.path("1") ------"*Here is the error in customer*-------
        .accept(MediaType.APPLICATION_XML)
            .get(Customer.class);
      System.out.println(customer.getLastName() + ", "+ customer.getFirstName());

      // Get response as List<Customer>
      List<Customer> customers = resource.path("findCustomersByCity/Any%20Town")
        .accept(MediaType.APPLICATION_XML)
            .get(new GenericType<List<Customer>>(){});
      System.out.println(customers.size());
   }
} 
```

我已经使用了这个博客的代码

[http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:10:53.393

如果您的`org.example.Customer`课程不在您创建此服务的同一个项目中，您可以将其包含到当前项目的类路径中。

只需确保您的目录结构如下所示（从您在问题中给出的链接中使用它）。如果它不喜欢它，那么这可能是错误的原因。

![在此处输入图像描述](../Images/2652890b6b2b6792a6e17cb4da5c8426.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:34:12.853

[您提供链接](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html)的博客说：

> 在我们在[第 4 部分](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-45.html)中创建的 CustomerService 会话 bean 中，我们指定我们的 RESTful 服务将使用 @Path 注释的路径“/customers”。

你在哪一步？

您是否遵循了所有步骤？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:14:39.570

可能

1：import语句`import org.example.Customer;`有红色下划线吗？

2：类`Customer`是在罐子里吗？或您工作区中的另一个项目？或者它在哪里？

3：是否有可能在您的类路径中有两个包含该类的 jar `Customer`？

4：如果它在一个项目中，您是否首先构建了该项目？

更新，请参阅[此处的链接](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-45.html)

![在此处输入图像描述](../Images/b33f65d4e72335b97147e5100e4de122.png)

他们展示了打包和部署组织，看到 Customer 类在里面`CustomerService.jar`，里面在里面`CustomerService.war`。你有这些物品吗？

兄弟，你按照教程学的好吗？

# java - JTree 禁用/覆盖 TransferHandler 键盘操作

> ID：14119310
> 
> 赞同：1
> 
> 时间：2013-01-02T09:05:41.147
> 
> 标签：java, swing, jtree, drag-and-drop, key-events

我需要摆脱用于 JTree 的 TransferHandler 类的标准键盘操作处理程序。JTree 实现了控制节点是否可以删除的访问级别机制。通过使用键盘组合（如 shift-delete）忽略此行为，允许每个用户从 JTree 中删除任何节点。

基本上我需要 TransferHandler 来提供移动和排序节点（DnD）的便捷方式。而已。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:06:30.557

[您可以通过从ActionMap](http://docs.oracle.com/javase/7/docs/api/javax/swing/ActionMap.html#remove%28java.lang.Object%29)中删除键默认绑定来删除它们

像这样的东西：

```
ActionMap actionMap = tree.getActionMap();
actionMap.remove("cut");
actionMap.getParent().remove("cut");
actionMap.remove("copy");
actionMap.getParent().remove("copy");
actionMap.remove("paste");
actionMap.getParent().remove("paste"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T10:12:14.950

编辑：我迟到了，上面已经建议了 lbalazscs。

你可以尝试这样的事情：

```
JTree tree = new JTree();
tree.setDragEnabled(true);
tree.setDropMode(DropMode.ON_OR_INSERT);
tree.setTransferHandler(new YourTreeTransferHandler());
//......
Object key = TransferHandler.getCutAction().getValue(Action.NAME);
System.out.println(key);
tree.getActionMap().put(key, new AbstractAction() {
  @Override public void actionPerformed(ActionEvent e) {
    System.out.println("dummy");
  }
}); 
```

# javascript - jqGrid隐藏div中的宽度不正确

> ID：14119311
> 
> 赞同：4
> 
> 时间：2013-01-02T09:05:47.090
> 
> 标签：javascript, jquery, jqgrid

我正在使用 jqGrid 4.4.1 版。我需要在页面上创建 x 个网格。第一个网格在可见块中输出，但其他网格以以下格式输出

```
<div style='display:none'>
//My jqGrid output
</div> 
```

在可见 div 中输出的第一个表具有正确的宽度：

```
<div class="ui-jqgrid ui-widget ui-widget-content ui-corner-all" id="gbox_table0" dir="ltr" style="width: 920px;"> 
```

但所有其他表格的宽度都不正确：例如。100像素；

```
<div class="ui-jqgrid ui-widget ui-widget-content ui-corner-all" id="gbox_table1" dir="ltr" style="width: 100px;"> 
```

当我尝试在可见 div 中呈现所有表格时，所有宽度都正确计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:28:21.560

是的，你是对的.. 时`disply:none`，网格宽度将无法正确计算。要解决此问题，您必须确定负责显示网格的事件，并且在该事件中，在显示网格后，您应该使用`setGridWidth`函数来正确设置网格的宽度。

由于您没有使用单独的列宽，我建议您将网格包装在一个 div 中（假设它的 id 是 container_grid），并且在显示网格时，将其宽度设置为包装 div 的宽度。

如果您使用 div 元素宽度的百分比（或者说流体布局），您可以使用`offsetWidth`javascript 这样的方法获取包装 div 的宽度。

```
if($('#container_grid').attr("id")!==undefined)        
            grid.setGridWidth($("#container_grid")[0].offsetWidth); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T08:19:06.077

简单的解决方案是在初始化网格时使用固定宽度：

代替 ：

```
 autowidth       : true, 
```

利用：

```
 width           :  1030, 
```

这样，即使您将网格显示设置为无，它也会保持所需的宽度。

# javascript - Chrome 扩展 - 加载扩展添加的 javascript 文件

> ID：14119317
> 
> 赞同：0
> 
> 时间：2013-01-02T09:06:26.237
> 
> 标签：javascript, javascript-events, google-chrome-extension

我的 chrome 扩展添加了几个对 js 文件的引用（例如`<script src="javascript_file_1.js"></script>`）。使用 chrome 的“检查元素”功能，我可以看到所有引用都已正确添加，但它们似乎没有被“加载”。有没有办法“重新执行”页面以便加载这些新的 js 文件？

这是我使用的代码：

```
var srcArray = ["javascript_file_1.js",
        "javascript_file_2.js",
        "javascript_file_3.js",
        "javascript_file_4.js",
        "javascript_file_5.js",
        "javascript_file_6.js",
        "javascript_file_7.js"];

function AddScript(value)
{
    var entry = document.createElement("SCRIPT")
    entry.src = value;
    document.head.appendChild(entry);

} 
```

它们似乎是在页面渲染后添加的，因此在渲染页面时没有使用它们的内容。

非常感谢，卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:44:11.880

使用 注入您的内容脚本`"run_at" : "document_start"`，使用此选项注入的脚本会在 之后`css injection`，但在构造 DOM 或运行任何其他脚本之前注入。

```
{
  "name": "My extension",
  ...
  "content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "css": ["mystyles.css"],
      "js": ["jquery.js", "myscript.js"],
      "run_at": "document_start"
    }
  ],
  ...
} 
```

使用此选项，您的代码将在呈现页面时使用。

# android - 图片sd卡android

> ID：14119322
> 
> 赞同：0
> 
> 时间：2013-01-02T09:06:44.220
> 
> 标签：android, image, android-sdcard, bitmapdata

我的问题是有没有具有以下功能的android库

1.从 sd 卡访问图像作为缩略图

2.单击缩略图显示实际图像。在该图像的滑动上，它应该显示其他图像。我使用视图翻转器实现了此功能，但成本很高，因为我需要在加载时将所有图像添加到视图翻转器。

与此相关的任何链接都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:21:57.330

没有任何专用的图书馆。但是我们可以通过创建 Gallery View 并提供 sd 卡路径作为活动中图像的路径来实现这一点。

# iphone - 一个简单的计算器，Objective-C

> ID：14119324
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:06:57.293
> 
> 标签：iphone, objective-c, ios5, calculator

起初，我有一个calculatorBrain：

```
@interface calculatorBrain : NSObject {
    NSString *theOperator;
}

@property (assign, nonatomic) NSString *theOperator;

-(float)performOperation:(float)a andOperandB:(float)b;
@end 
```

然后， 中的一个函数`ViewController`，链接到一个`button`.

ViewController.m 的一部分

```
@implementation ViewController
@synthesize result, brain;

-(IBAction)operatorPressed:(UIButton *)sender
{
    if([sender.currentTitle isEqualToString:@"AC"]) {
        result.text = @"0";
    } else if ([sender.currentTitle isEqualToString:@"."]) {
        if (0 == [result.text rangeOfString:@"."].length)
        result.text = [result.text stringByAppendingString:@"."];
    } else {
        brain.theOperator = sender.currentTitle;
        NSLog(@"%@", brain.theOperator); // return (null)
    }
} 
```

视图控制器.h

```
@interface ViewController : UIViewController {
    IBOutlet UILabel *result;
    calculatorBrain *brain;
}

@property (assign, nonatomic) IBOutlet UILabel *result;
@property (strong, nonatomic) calculatorBrain *brain;

-(IBAction)digitPressed:(UIButton *)sender;
-(IBAction)operatorPressed:(UIButton *)sender;

@end 
```

问题是，为什么我按下后什么都不设置`button`？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:11:19.060

从您的代码片段来看，您似乎希望合成此属性。[您可以在网络上的各种教程](http://blog.ablepear.com/2010/04/objective-c-tuesdays-property-and.html)中阅读更多相关信息。

确切的行为将取决于所使用的 Obj-C 版本。我建议您阅读上述教程，以便更好地理解您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:24:24.913

试试这个：

```
 -(IBAction)operatorPressed:(UIButton *)sender
    {
        brain = [[calculatorBrain alloc] init] autorelease];
        if([sender.currentTitle isEqualToString:@"AC"]) 
        {
            result.text = @"0";
        } 
        else if ([sender.currentTitle isEqualToString:@"."]) 
        {
            if (0 == [result.text rangeOfString:@"."].length)
                result.text = [result.text stringByAppendingString:@"."];
        } 
        else 
        {
            brain.theOperator = sender.currentTitle;
            NSLog(@"%@", brain.theOperator); // return (null)
        }
    } 
```

# python - 如何调试爬虫中的规则？

> ID：14119325
> 
> 赞同：4
> 
> 时间：2013-01-02T09:07:07.133
> 
> 标签：python, scrapy

scrapy shell 是调试 xpath 表达式的好工具，但是有什么工具或方法可以调试 crawlspider 中的规则吗？这意味着我怎么知道规则按我的意愿工作。

我的规则是：

```
rules = (
        Rule(SgmlLinkExtractor(allow=r'/search*',restrict_xpaths="//a[@id='pager_page_next']"), follow=False),
        #Rule(SgmlLinkExtractor(allow=r'/chart/[\d]+s$'), callback='parse_toplist_page', follow=True),
    ) 
```

它不遵循我想要的链接，那么如何调试？任何例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T22:26:11.603

您是否尝试过 Scrapy`parse`命令？

```
scrapy parse <URL> 
```

`<URL>`您要测试的 URL在哪里。

它将返回从该 url 提取的所有链接（将被跟踪）。

您可以使用该`--noitems`参数仅显示链接，并使用该`--spider`参数明确指定蜘蛛。

```
scrapy parse <URL> --noitems --spider <MYSPIDER> 
```

有关调试蜘蛛的更多信息，请参阅： [http ://doc.scrapy.org/en/latest/topics/debug.html](http://doc.scrapy.org/en/latest/topics/debug.html)

> *这个答案由 Pablo hoffman 在用户组中提供：[https ://groups.google.com/forum/?fromgroups=#!topic/scrapy-users/tOdk4Xw2Z4Y](https://groups.google.com/forum/?fromgroups=#!topic/scrapy-users/tOdk4Xw2Z4Y)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:34:13.763

我不这么认为，我通常不得不让蜘蛛松动并在命令提示符下查看它正在访问的站点。有时我无法使用控件 C 来终止程序，而不得不打开我的任务管理器并终止整个命令提示符。这是一种痛苦。

# php - 左连接多行

> ID：14119326
> 
> 赞同：0
> 
> 时间：2013-01-02T09:07:07.823
> 
> 标签：php, mysql

我有这两张表：

```
sections - {id,title,description}
topics - {id,section_id,topictitle} 
```

每个部分在主题表中都有多个主题。

阅读并尝试后，我发现使用左连接是正确的方法

```
$sql = 'select * from sections left join topics on sections.id=topics.sections_id';
$query = mysql_query($sql);
$section = array();
$i=0;
while ($sections = mysql_fetch_assoc($query)) {
    $sl = array(
        'title' => $sections['title'],
        'topics'=> $sections['topictitle'],
    );
    $section[$i++] = $sl;
} 
```

这是查看所有部分和主题的正确代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:31:53.093

您正在选择`sections`并加入`topics`，因此您只会将一个主题链接到每个部分，如果您有多个主题链接到一个部分（我认为您有），它将不起作用。

反过来做 - 选择`topics`并加入`sections`：

```
select * from topics left join sections on sections.id=topics.section_id 
```

请记住，如果您有一个没有链接主题的部分，您将不会在结果集中获得该部分。如果你想要，那么首先选择这些部分是值得的。

此外，您可以直接推送到数组，而不是像那样递增 - 您不需要手动管理索引：

```
// $section[$i++] = $sl;  // <-- your way

$section[] = $sl; 
```

# java - 在 MigLayout 中调整窗口大小时列意外增长

> ID：14119328
> 
> 赞同：0
> 
> 时间：2013-01-02T09:07:14.200
> 
> 标签：java, swing, miglayout

好吧，我对 MigLayout 很陌生，并且已经在白皮书和快速入门中阅读过它，但这还不够。我在其下方放置了一个面板，我希望一个面板占据 30% 的窗口，而其他面板则占 70%。当窗口被调整大小（最大化）时，组件搞砸了。代码如下：

```
 Mig_tmp1(){
    j=new JFrame("test");
    j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    j.setLayout(new MigLayout("debug,fill","[70px]5[:70:250,grow]","[:100:]10[fill,grow]"));

    one=new JPanel();
    one.setBackground(Color.red);
    two=new JPanel();
    two.setBackground(Color.ORANGE);
    three=new JPanel();
    three.setBackground(Color.BLUE);

    j.add(one,"wrap,span,grow");
    j.add(two,"grow");//,"w 40!");
    j.add(three,"grow");

    //j.pack();
    j.setSize(400, 600);
   j.setVisible(true); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:39:47.473

`grow XX`您可以使用where `XX`is the percent to increase来指定组件在构造函数中应增长的百分比。

在您的示例中：

```
j.setLayout(new MigLayout("debug,fill", "[grow 70, fill]5[grow 30, fill]", "[:100:]10[fill,grow]")); 
```

假设您希望橙色面板始终占据屏幕的 70%，而蓝色面板始终占据屏幕的 30%。

# c# - 如何在 Visual Studio 2012 中为新项目添加文件夹

> ID：14119331
> 
> 赞同：2
> 
> 时间：2013-01-02T09:07:27.520
> 
> 标签：c#, visual-studio-2012, project, prism

在我的解决方案中，我想添加一个要添加新项目的文件夹。这样做的程序是什么？

我试图从 Visual Studio 中创建文件夹，但它创建了一个“解决方案文件夹”。我现在对此进行了研究，发现它是一个组织提示，但只是一个虚拟提示，并且文件系统中没有反映“解决方案文件夹”。

然后我在 Windows 资源管理器中创建了一个目录，发现您可以单击“解决方案资源管理器”窗口中显示所有文件的按钮。我右键单击它并选择包含在项目中，使其可见，但是当我右键单击此文件夹时，我没有“添加新项目”选项。此外，此文件夹是主要解决方案项目的一部分，而不仅仅是解决方案中的一个文件夹（如果有意义的话）。无论如何，我无法在解决方案资源管理器中将项目拖放到此文件夹中，因此这不是答案。

基本原理：我正在尝试研究如何使用 prism 并希望将模块（包含在解决方案中自己的 VS 项目中）存储在“模块”目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:23:59.973

正如您所说，解决方案文件夹是一个虚拟的东西。您需要在文件系统上手动创建一个文件夹，通常位于 .sln 文件旁边，并且与 Visual Studio 中所需的文件夹名称相同。然后在工作室中添加相应的解决方案文件夹。右键单击并在解决方案文件夹上添加新项目，命名新项目，然后将其位置浏览到文件系统上的相应文件夹，并在那里创建项目。

# android - 文本视图不滚动

> ID：14119334
> 
> 赞同：1
> 
> 时间：2013-01-02T09:07:47.100
> 
> 标签：android, textview

我正在尝试实现一个连续滚动的文本视图。

但是文本没有滚动。我希望文本以以下格式显示：

![在此处输入图像描述](../Images/d2fb722d8cd77764f4dcaffc63e92fec.png)

这是我写的代码。

```
public class ScrollingTextView extends TextView {
    public ScrollingTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ScrollingTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ScrollingTextView(Context context) {
        super(context);
    }

    @Override
    protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
        if(focused)
            super.onFocusChanged(focused, direction, previouslyFocusedRect);
    }

    @Override
    public void onWindowFocusChanged(boolean focused) {
        if(focused)
            super.onWindowFocusChanged(focused);
    }

    @Override
    public boolean isFocused() {
        return true;
    }
} 
```

这是我的 xml 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:background="@color/background"
        android:orientation="vertical" >

        <org.fluturasymphony.recommendation.ScrollingTextView
            android:id="@+id/TextView03"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:marqueeRepeatLimit="marquee_forever"
            android:padding="25dip"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="Really Long Scrolling Text Goes Here.... ..... ............ .... ...." />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="170dp"
            android:background="@color/background"
            android:orientation="horizontal" >

            <EditText
                android:id="@+id/outlet_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:hint="@string/outlet_id_text"
                android:inputType="textAutoComplete" />

            <ImageView
                android:id="@+id/search_button"
                android:layout_width="32dp"
                android:layout_height="32dp"
                android:adjustViewBounds="true"
                android:contentDescription="@string/cd_search_icon"
                android:src="@drawable/search_icon" />
        </LinearLayout>

        <Button
            android:id="@+id/view_stores_on_map"
            android:layout_width="221dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="76dp"
            android:onClick="showStoreList"
            android:text="@string/view_stores_on_map" />

        <Button
            android:id="@+id/view_stores"
            android:layout_width="221dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="38dp"
            android:onClick="showStoreList"
            android:text="View List Of Stores" />
    </LinearLayout>

</RelativeLayout> 
```

谁能告诉我如何实现这个？同样，我需要的是让红框中的代码连续滚动。

```
public class HomeActivity extends Activity {    
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.home);    

      final Button view_stores = (Button) findViewById(R.id.view_stores);
      final Button view_stores_on_map = (Button) findViewById(R.id.view_stores_on_map);
      final EditText outlet_id = (EditText) findViewById(R.id.outlet_id);
      final ImageView search_button = (ImageView) findViewById(R.id.search_button);

      view_stores.setOnClickListener(new Button.OnClickListener(){
         public void onClick(View v){
            // Load the stores
           Intent myIntent = new Intent(HomeActivity.this, StoreListActivity.class);            
           startActivity(myIntent);
           HomeActivity.this.startActivity(myIntent);
         }
      });
      TextView tv;

      tv = (TextView) findViewById(R.id.textId);----------->***text view***
      tv.setSelected(true);

      search_button.setClickable(true);
      search_button.setOnClickListener(new View.OnClickListener() {

      @Override
      public void onClick(View v) {
        // TODO Auto-generated method stub
        String outlet_no = outlet_id.getText().toString();
        if(!outlet_no.isEmpty()){
        SharedPreferences myPrefs = getApplicationContext().getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();

        prefsEditor.putString("outlet_id", outlet_no);
        prefsEditor.commit();

        Intent myIntent = new Intent(HomeActivity.this, StoreActivity.class);       
        startActivity(myIntent);
        HomeActivity.this.startActivity(myIntent);
        }
        else{
          Toast.makeText(getApplicationContext(), "Please enter an outlet id", Toast.LENGTH_SHORT);
        }  
      }
    });

    view_stores_on_map.setOnClickListener(new Button.OnClickListener(){

      @Override
      public void onClick(View v){
        SharedPreferences myPrefs = getApplicationContext().getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();

        prefsEditor.putString("show_all", "1");
        prefsEditor.commit();
        Intent myIntent = new Intent(HomeActivity.this, StoreMapActivity.class);       
        startActivity(myIntent);          
      }
    });
    }

    /*
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.settings_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.set_client:     final CharSequence[] items = {"colgate", "godrej", "parle"};
                                      AlertDialog.Builder builder = new AlertDialog.Builder(this);
                                      builder.setTitle("Set the client");
                                      builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
                                        public void onClick(DialogInterface dialog, int item) {
                                          SharedPreferences myPrefs = getApplicationContext().getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
                                          SharedPreferences.Editor prefsEditor = myPrefs.edit();

                                          prefsEditor.putString("client",(String) items[item]);
                                          prefsEditor.commit(); 
                                        }
                                       });
                                      AlertDialog alert = builder.create();
                                      alert.show();

                                      break;            
        }
        return true;
    }
    */   
} 
```

这是我调用文本视图的Java代码，它是调用文本视图的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:51:46.807

尝试这个 ：

```
<TextView
            android:id="@+id/textId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:lines="1"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="Simple application that shows how to use marquee, with a long text"
            android:textColor="#ff4500" /> 
```

从 Activity 执行此操作：

```
 TextView tv;

    tv = (TextView) findViewById(R.id.textId);
    tv.setSelected(true); 
```

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:17:06.853

我不知道您使用自定义滚动文本视图的目的是什么，而您可以将文本视图本身更改为滚动文本视图。你可以这个[链接](https://stackoverflow.com/a/3333855/1649309)，你可以在其中获得一个在 TextView 内滚动文本的示例。如果在执行此操作后它也没有滚动，那么您只需在 Activity 的 onCreate() 中调用 Textview 实例上的 setSelected(true) 即可。

# git - 同步两个裸仓库的分支

> ID：14119335
> 
> 赞同：0
> 
> 时间：2013-01-02T09:07:50.190
> 
> 标签：git, git-branch

我有以下场景：两个远程裸存储库 repo1 和 repo2。他们应该共享一个分支，即事实上有关于特定分支的定期推送到 repo1。这些更改应同步到 repo2。

我认为，同步意味着类似于基于钩子或某物的自动拉动。像这样。

您有什么想法，如何满足上述要求？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:29:17.763

设置一个将转发更改的挂钩。您可以从四个挂钩中选择：`pre-receive`、`update`和。`post-receive``post-update`

前两个在推送期间运行，因此它们会减慢速度，但可以中止它。后两者在推送之后运行，因此用户不必等待它们，但它们不能中止它并且需要单独的方法来通知错误。

代码将大部分相似并且非常简单。简单`post-update`（文件`hooks/post-update`in `repo1`）变体将是：

```
#!/bin/sh
for ref; do
    if [ refs/heads/branch-to-mirror = "$ref" ]; then
        git push repo2 "$ref"
    fi
done 
```

`pre-receive`/`update`需要说明，因为`git push repo2 $newsha:branch-to-mirror`本地分支尚未更新。条件当然可以不同；任何可以说明分支应该被镜像到`repo2`.

如果无法转发到，则会`update`中止推送到的钩子是：`repo1``repo2`

```
#!/bin/sh
set -e
if [ refs/heads/branch-to-mirror = "$1" ]; then
    git push repo2 "$3:$1"
fi 
```

用于将`set -e`错误传播到脚本之外。或者`|| exit 1`，可以添加到应该传播其失败的命令中。这个钩子会为每个更新的 ref 调用一次，所以没有循环。参数为 ref 名称、旧 SHA1 和新 SHA1，并且推送需要使用新 SHA1，因为本地 ref 尚未更新。

# php - WordPress将默认小部件添加到小部件区域

> ID：14119338
> 
> 赞同：1
> 
> 时间：2013-01-02T09:07:54.760
> 
> 标签：php, wordpress

我正在尝试设置一些默认小部件区域，并在激活我的主题时向它们添加一些默认小部件。

在一个全新的 WordPress 安装中，我在第一个侧边栏
（搜索、最近的帖子、档案、元区域）中有一些小部件，
我`unregister_widget()`用来删除这些小部件，
现在我找不到通过 functions.php 将小部件添加到这些侧边栏的方法。

请问你能帮帮我吗？

现在谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:17:54.753

[`unregister_widget`](http://codex.wordpress.org/Function_Reference/unregister_widget)将从系统中完全删除小部件，使其无法使用。您需要做的是将小部件删除/添加到侧边栏，而不是取消注册它们。WordPress 特定论坛上有一篇很好的帖子：[https ://wordpress.stackexchange.com/questions/26557/programmatically-add-widgets-to-sidebars](https://wordpress.stackexchange.com/questions/26557/programmatically-add-widgets-to-sidebars)

基本思想是操作存储在选项表中的小部件数组。

```
$widgets = get_option( 'sidebars_widgets' );
var_dump($widgets); 
```

如果你看一下，`var_dump`应该很明显正在发生什么。棘手的部分是所有小部件都有数字后缀，以便可以使用倍数。

# sql - 如果我搜索除 CustomerNumber 以外的列，分区能否提高性能

> ID：14119342
> 
> 赞同：0
> 
> 时间：2013-01-02T09:08:59.703
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在阅读 SQL Server 的分区教程：

[http://databases.about.com/od/sqlserver/a/partitioning.htm](http://databases.about.com/od/sqlserver/a/partitioning.htm)

这里作者将表拆分，并根据`CustomerNumber`列将它们存储到4个文件组中。

我想知道的是，如果我搜索名字或姓氏：

```
Select * From tableName where FirstName Like '%Jack%' 
```

如果我分区，这个查询会运行得更快吗？SQL Server 会在不同的文件组上发出 4 个查询，然后合并最终结果吗？

**编辑：**

虽然这不是我最初的问题，但 Raj 和 TimTom 说这会导致表扫描，但查询执行计划显示了我所说的其他内容。我错过了什么吗？

![在此处输入图像描述](../Images/64f3a56ef91a917555b4f7f1890eef90.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:40:44.393

> 分区可以提高性能吗...

不。分区绝不是为了提高性能，而是关于数据存储管理和/或切换入/切换出 ETL 处理。IO 并行性可以通过单个文件组中的多个文件来实现，而没有分区的（严重！）缺点。如果你想要一篇关于分区的*好*文章，我推荐 Kendra Little[如何决定是否应该使用表分区](http://www.brentozar.com/archive/2012/03/how-decide-if-should-use-table-partitioning/)。

至于您的问题：`LIKE '%text%'`只能使用全文搜索有效地回答。

# actionscript-3 - 单击按钮时如何更改精灵颜色 AS3

> ID：14119346
> 
> 赞同：2
> 
> 时间：2013-01-02T09:09:22.233
> 
> 标签：actionscript-3, flash

我有一个精灵（圆圈），我用动作脚本制作的。这是伪代码：

```
 var board:Sprite = new Sprite();
    var spDot:Sprite = new Sprite()
    spDot.graphics.lineStyle(1,0x0000CC);   
    spDot.graphics.beginFill(0xFFFFFF); //white;
    spDot.graphics.drawCircle(0,0,dZ);  
    spDot.graphics.endFill();
    spDot.name="v";
    board.addChild(spDot); 
```

我有一个按钮“btnA”可以将当前的精灵颜色（白色）更改为黑色。

```
btnA.addEventListener(MouseEvent.CLICK, changeColor);
function changeColor(evt:MouseEvent){
     (board.getChildByName("v") as Sprite).graphics.beginFill(0x000000);
} 
```

但是，我的问题，它在这部分返回了错误：`(board.getChildByName("v") as Sprite).graphics.beginFill(0x000000);`

其实我只是猜想用来`(board.getChildByName("v") as Sprite).graphics.beginFill(0x000000);`改变颜色。你有什么主意吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-25T11:38:39.310

我建议不要公开应该着色的显示对象的实现，如果你同意这个说法，你可以使用[ColorTransform](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/ColorTransform.html) ;)

> ColorTransform 类允许您调整显示对象中的颜色值。颜色调整或颜色转换可应用于所有四个通道：红色、绿色、蓝色和 Alpha 透明度。

### 例子：

```
btnA.addEventListener(MouseEvent.CLICK, buttonDidClick);

function buttonDidClick(e:MouseEvent) {
    transformColor(board.getChildByName("v"), 0x000000);
}

function transformColor(target:DisplayObject, color:uint):void {
    var colorTransform:ColorTransform = new ColorTransform();
    colorTransform.color = color;
    target.transform.colorTransform = colorTransform;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:12:00.527

这种最简单的方法是清除图形数据并重新绘制到图形对象中。

```
function drawCircle(sprite:Sprite, radius:Number = 40, fillColor:int = 0):Sprite
{
  if (!sprite) return null;

  const g:Graphics = sprite.graphics;

  g.clear();
  g.lineStyle(1, 0x0000CC);   
  g.beginFill(fillColor);
  g.drawCircle(0, 0, radius);
  g.endFill();

  return sprite;
} 
```

另外，我强烈建议您在需要某种类型时不要使用隐式调用：

```
function changeColor(evt:MouseEvent)
{
  // hides the fact, that you're having an instance of am unexpected type
  (board.getChildByName("v") as Sprite).graphics.beginFill(0x000000);
} 
```

尽管您有一个有效的引用，但将导致一个 1009/null 指针。

```
function changeColor(evt:MouseEvent)
{
  // fails fast - for example when you change from sprite to bitmap.
  Sprite(board.getChildByName("v")).graphics.beginFill(0x000000);
} 
```

在这种情况下，快速失败是合适的施法方式。

# windows - 检索网络掩码信息的 IPHelper api 是什么？

> ID：14119348
> 
> 赞同：0
> 
> 时间：2013-01-02T09:09:39.340
> 
> 标签：windows, iphelper

我的第一个赌注是`GetIpAddrTable()`有示例代码，但它只支持 IPv4。然后我尝试 `GetAdaptersInfo()`了，但文件表明它已被`GetAdaptersAddresses()`. 我应该使用任何使用 GetAdaptersAdresses() 或任何其他 IP Helper API 获取网络掩码的代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:29:39.840

对于 IPv4，您可以使用 AF_INET 套接字和 SIO_GET_INTERFACE_LIST 标志调用 WSAIoctl。这将返回一个包含一组 IP、网络掩码和广播地址的 INTERFACE_INFO 结构数组。请参阅下面的示例代码。

对于 IPv6，“网络掩码”的概念与在 IPv4 中的应用方式不同。 [有关详细信息，请参见此处](https://stackoverflow.com/questions/7765125/validating-ipv6-netmask)。您是否注意到当您从命令行键入“ipconfig”或尝试从控制面板手动设置 IPv6 地址时，没有显示“网络掩码”字段？

因此，您可以使用 SIO_GET_INTERFACE_LIST 或 GetIpAddrTable 作为 IPv4 接口的网络掩码。但是对于 IPv6，您可能必须详细说明您真正想用这些信息做什么。

```
int _tmain(int argc, _TCHAR* argv[])
{
    WSAData data = {};
    sockaddr_in addrLocal = {};
    INTERFACE_INFO infolist[100] = {};
    DWORD dwBytesReturned = 0;
    DWORD dwNumInterfaces = 0;

    ::WSAStartup(MAKEWORD(2,2), &data);
    int s = socket(AF_INET, SOCK_DGRAM, 0);
    int result = WSAIoctl(s, SIO_GET_INTERFACE_LIST, NULL, 0, (void*)infolist, sizeof(infolist), &dwBytesReturned, NULL, NULL);
    dwNumInterfaces = dwBytesReturned / sizeof(INTERFACE_INFO);

    for (DWORD index = 0; index < dwNumInterfaces; index++)
    {
        char szIP[120]={};
        char szBroadcast[120]={};
        char szNetMask[120]={};

        if (infolist[index].iiAddress.Address.sa_family == AF_INET)
        {
            // ipv4
            sockaddr_in* pAddr4 = &infolist[index].iiAddress.AddressIn;
            inet_ntop(AF_INET, &pAddr4->sin_addr, szIP, ARRAYSIZE(szIP));

            pAddr4 = &infolist[index].iiBroadcastAddress.AddressIn;
            inet_ntop(AF_INET, &pAddr4->sin_addr, szBroadcast, ARRAYSIZE(szBroadcast));

            pAddr4 = &infolist[index].iiNetmask.AddressIn;
            inet_ntop(AF_INET, &pAddr4->sin_addr, szNetMask, ARRAYSIZE(szNetMask));
        }
        else
        {
            continue;
        }

        printf("IP:%s   NetMask:%s    Broadcast:%s\n", szIP, szNetMask, szBroadcast);
    }

    return 0;
} 
```

# android - SQLite 查询问题

> ID：14119350
> 
> 赞同：1
> 
> 时间：2013-01-02T09:10:09.663
> 
> 标签：android, android-sqlite

嗨，我是 Android SQlite 的新手，并通过几个示例来学习。我正在尝试创建一个查询，该查询将获取数据库中可用的 ID 数量并返回错误，因为我的查询有问题，所以我需要一些帮助来修复此查询：

```
public Cursor getIds()
{
     return database.query(false, "details", "_id", "Select", "COUNT", null, null, null, null, null)
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:30:41.817

尝试这个：

```
public Cursor getIds()
{
    String sql = "SELECT COUNT(_Id) AS CountTotal FROM details";
    return db.rawQuery(sql, null); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:18:16.153

查询错误

> 查询（字符串表，字符串 [] 列，字符串选择，字符串 [] selectionArgs，字符串 groupBy，字符串有，字符串 orderBy）

你应该有这样的东西：

```
Cursor c=query("TABLE NAME",new String[]{"COLUMN_ID_NAME"},null,null,null,null);
return c.getCount(); 
```

# javascript - 日期验证的正则表达式

> ID：14119353
> 
> 赞同：0
> 
> 时间：2013-01-02T09:10:20.170
> 
> 标签：javascript, regex

我在验证日期时遇到问题，在我的代码中，我使用了一个接受 2012 年日期的正则表达式，如果我给出的日期为 2013 年，它会显示“无效日期”。请在这方面帮助我。它应该接受任何年份。我的意思是至少从 2000 年到 3000 年的有效年份。提前致谢。

```
function checkDates(){
  var sdate = "2013-01-02";
  var edate = "2013-01-02";

  if (!isValidDate(sdate)) {
         alert("Report Start Date is Invalid!!");
         return false;
    } 

    if (!isValidDate(edate)) {
     alert("Report End Date is Invalid!!");
     return false;
   }
   return true;
}

function isValidDate(sText) {

    var reDate = /(?:([0-9]{4}) [ -](0[1-9]|[12][0-9]|3[01])[ -]0[1-9]|1[012])/;  // yy/mm/dd
    return reDate.test(sText);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T09:18:48.133

您的正则表达式中有一个额外的空格并且缺少括号（括号问题使其接受`2012-aa-xx`日期：

```
/(?:([0-9]{4}) [ -](0[1-9]|[12][0-9]|3[01])[ -]0[1-9]|1[012])/
              ^                               ^
-------------/-------------------------------/ 
```

所以：

```
([0-9]{4}[ -](0[1-9]|[12][0-9]|3[01])[ -](0[1-9]|1[012])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:36:49.157

下面的表达式也有效

```
/(?:19|20\d{2})\-(?:0[1-9]|1[0-2])\-(?:0[1-9]|[12][0-9]|3[01])/ 
```

谢谢， 迪拉吉

# c - C编程将一定数量的字节打印到屏幕上

> ID：14119354
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:10:20.597
> 
> 标签：c, file

如何让程序读取“partSize”字节数并将其打印到屏幕上？假设我正在打开一个总共包含 100 个字符的文本文件。如果 partSize 是 50 字节，我希望屏幕上打印 50 个字符。

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/stat.h> 
#include <sys/types.h> 
#include <errno.h>

#define PERMS 0777

int main(int argc, char *argv[])
{
    int createDescriptor;
    int openDescriptorOriginal;
    int closeCreateDescriptor;

    //char fileNameOriginal[] = "picture.jpg";
    char fileNameOriginal[] = "myFile.txt";

    int parts;
    int partSize;

    parts=2;

    int bytesRemaining;
    int partNumber;
    char BUFFER[512];
    int readDescriptor;

    if ((openDescriptorOriginal = open(fileNameOriginal, O_RDONLY )) == -1)
    {
        printf("Error opening %s", fileNameOriginal);
        exit(EXIT_FAILURE);
    }

    struct stat buf;
    int r = fstat(openDescriptorOriginal, &buf);
    if (r)
    {
        fprintf(stderr, "error: fstat: %s\n", (char *) strerror(errno));
        exit(1);
    }

    int originalFileSize = buf.st_size;
    printf("The file is %.9f Kilobytes large.\n", (double) originalFileSize/1024);

    partSize = ((originalFileSize + parts) + 1)/parts;

    //I am stuck at this part
    while ((readDescriptor = read(openDescriptorOriginal, BUFFER, partSize)) < partSize))
    {
        write(1, BUFFER, readDescriptor);
    }

    if ((closeCreateDescriptor = close(openDescriptorOriginal)) == -1)
    {
        printf("Error closing file.\n");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:52:58.880

您需要检查返回值，并在每次迭代中更新长度：

```
ssize_t count, total;
total = 0;
char *buf = BUFFER;
while (partSize) {
    count = read(openDescriptorOriginal, buf, partSize);
    if (count < 0) {
        /* handle error */
        break;
    }
    if (count == 0)
        break;
    buf += count;
    total += count;
    partSize -= count;
}
write (1, BUFFER, total); 
```

`total`将包含读取的字节数。

# html - 在多行中输入 tds，它们都在单个 tr 内

> ID：14119359
> 
> 赞同：2
> 
> 时间：2013-01-02T09:10:37.890
> 
> 标签：html, css

大家好，我需要在多行中输入 td 值，这些值都在一个 tr 中。我尝试过这样但无法实现。

```
<table class="table">
<tr style="margin-bottom:10px;border:5px solid lightgrey;width:700px">
<td style="width:500px">.... </td>
<td style="width:300px">.... </td>
<td style="width:500px">.... </td>
</tr>
</table> 
```

我认为由于提到的 tds 宽度，它将换行到下一行，但事实并非如此。即使将 td 宽度增加到 700px 以上，我也无法获得预期的输出。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T09:22:32.787

将您的`TD`元素设置为`display: block;`将强制它们进入新行：

```
​.table td { display: block; }​ 
```

示例：[jsFiddle](http://jsfiddle.net/5fPHj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:20:05.180

你的意思是这样吗......

> td1
> td2
> td3

如果，你为什么不使用

```
<table>
    <tr>
        <td>TD1</td>
    </tr>
    <tr>
        <td>TD2</td>
    </tr>
</table> 
```

或者，如果您想将 tds 分组到一个 tr

```
<table>
    <tr>
        <td>
            <table>
                <tr>
                    <td>TD1</td>
                </tr>
                <tr>
                    <td>TD2</td>
                </tr>
                <tr>
                    <td>TD3</td>
                </tr>
            </table>
        </td>
    <tr>
<table> 
```

顺便说一句，如果这不是必须将 td 用于**tds 信息**，您可以试试这个：

```
<table>
    <tr>
        <td>
            TD1 information<br/>
            TD2 information<br/>
            TD3 information<br/>
        </td>
    <tr>
<table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:17:41.767

用于第一行：

```
table tr td:nth-child(1)
{
  background-color:red;
} 
```

用于第二行：

```
table tr td:nth-child(2)
{
  background-color:yellow;
} 
```

等等。

要支持 IE 7 和 8，您需要使用：

```
td:first-child + td 
```

对于第一第二行

```
td:first-child + td + td 
```

第 3 次。

等等。

要支持 IE6，您需要使用 Javascript。

```
$(function() {
    $('td:first-child').addClass("Class1");
    $(".table-class tr").each(function() {
        $(this).find('td:eq(1)').addClass("Class2");
        $(this).find('td:eq(2)').addClass("Class3");
    });
}); 
```

这将添加一个您可以调用的类

# javascript - javascript中文本框的语言转换器

> ID：14119362
> 
> 赞同：0
> 
> 时间：2013-01-02T09:10:57.493
> 
> 标签：javascript, jquery

我正在搜索允许我选择语言选项的插件/代码，当用户将数据输入文本框时，它会更改语言

还有什么允许此功能仅用于某些输入选项意味着如果有 3 个文本框，那么在语言更改后只有 1 或 2 个将起作用，默认情况下将允许英语

**选择语言后不刷新页面**

# vb.net - 转换类型

> ID：14119363
> 
> 赞同：0
> 
> 时间：2013-01-02T09:11:04.157
> 
> 标签：vb.net

这是我的条件

我从数据库中检索日期时间数据并将其存储到我的应用程序中的字符串类型中。我需要从字符串类型将其转换为日期才能打印收据。

我的数据是“2012 年 12 月 31 日”。我只想在没有时间的情况下将其转换为日期（DateTime（））。这个 aapcation 已经由我之前的程序员完成，没有问题，但现在我一次又一次地面临这个问题。

我的最后一个问题是当我忽略转换问题并打印来自数据库的字符串时，我收到的是“dd/mm/yy”而不是日期本身。我可以知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:15:39.930

```
DateTime.Parse("31/12/2012").ToShortDateString() 
```

# google-chrome - Chrome 处理智能 url 并导致并发请求相互挂起

> ID：14119367
> 
> 赞同：5
> 
> 时间：2013-01-02T09:11:26.710
> 
> 标签：google-chrome, browser, client-server, lamp

我在 Google-Chrome 中遇到了一个奇怪的问题，即当使用长时间运行的脚本打开一个选项卡时，另一个选项卡处于“待处理”状态，直到第一个选项卡完成。我创建了一个小小提琴来重现此问题，并且还包括在 Safari 上运行的结果。当这个小提琴添加 ?q=a 和 ?q=b 时，它解决了这个问题。但是，当我调用两个不同的智能 url（`http://domain.com/a/v1` `http://domain.com/a/v2`甚至`http://dev.domain.com/a/v6`or `http://dev.domain.com/b/v8`）时，它们也会导致这种“挂起”行为。

小提琴：

```
<?php
echo time();
echo '<br>Now:       '. date('h:m:s');

sleep(10);

echo time();
echo '<br>Now:       '. date('h:m:s');

?> 
```

在谷歌浏览器中打开两个并发标签时，输出：1：

```
Now: 11:01:12
1357117332
Now: 11:01:22
1357117342 
```

2：

```
Now: 11:01:22
1357117342
Now: 11:01:32
1357117352 
```

如您所见，尽管我几乎同时启动了它们，但第二个等待第一个完成后才开始。

在 Safari 上运行时也是如此： 1：

```
Now: 10:01:36
1357116336
Now: 10:01:46
1357116346 
```

2：

```
Now: 10:01:37
1357116337
Now: 10:01:47
1357116347 
```

如您所见，在 Chrome 中，第二个脚本仅在第一个脚本完成后才开始，而在 Safari 中，它们一起工作。什么会导致这种奇怪的行为？我应该寻找哪些信息来帮助调试原因？

更新：添加 ?q=a 和 ?q=b 解决此问题的答案是正确的。现在我试图弄清楚为什么我首先在​​这个问题上运行，尽管我调用了两个不同的 url。我正在使用智能网址，网址看起来甚至`domain.com/dir/var1`都导致相同的效果。什么会导致这种情况？`domain.com/dir/var2``dev.domain.com/var6`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T09:14:28.167

这是 Chrome 的行为。

如果您对完全相同的 url 执行 GET 请求 - 它会等到第一个结束。*只需通过附加一些不同*的参数来更改 url，例如`?q=a`并查看它们将同时执行。

# c++ - 使用一个大的包含文件的优点/缺点

> ID：14119371
> 
> 赞同：1
> 
> 时间：2013-01-02T09:11:47.650
> 
> 标签：c++, include, header-files

我有一个个人项目，我怀疑它会超过 20 对 header/cpp 文件。我想知道是否最好让每个头文件和 cpp 文件包含它需要的其他文件（或使用前向声明），或者让每个文件都包含“Includes.hpp”，而后者又包含所有标准库，给出每个类的前向声明，然后包括我所有的其他标题。

如我所见，使用一个大头文件：

*   清理一切
*   更容易从其他目录中包含这些文件（因为您只需导航到使用一个文件，然后链接所有其他文件）
*   将包含每次编译的所有文件，考虑到这是一个小项目，这不是一个缺点，因为我将使用所有文件

这是一个好主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:56:41.960

我会说，*总的来说*，这是一个坏主意，原因有以下几个：

*   它给你的封装很差：客户端应该只拉入他们需要的标题。通过这种方法，包含将引入所有内容，正如 Alok 提到的那样，这将增加构建时间和对重建的敏感性
*   接口类和实现类之间没有区别，即你的库的客户端使用的那些和这个库内部使用的那些客户端不需要（也许不应该）看到的
*   如果您的任何标头定义了宏，那么这些现在可能会“泄漏”到包含标头的任何其他代码中，这可能是不可取的。任何不得不打字的人`#undef MIN`都会知道这种痛苦。
*   如果您有多个需要相互了解的类，则可能会递归包含，因此它可能对包含顺序很敏感，否则您将获得包含循环

我认为尽管有一个实例是可以接受的，那就是如果您的库仅提供了一些旨在由客户端调用的类/函数，而其余的只是实现使用的内部类。所以客户可以只包括在内`mylib.h`，这就是他们需要担心的全部。如果您想将库编译为静态库，这也使您更容易，因为您只需分发库和一个标头即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T09:40:19.990

老实说，我不会这样做。您提到您的项目将只有大约 20 个 cpp 文件，但您没有提到这些文件将有多大以及它们将包含多么复杂的代码。如果你把所有东西都放在一个大头文件中，每次你都必须重新编译这 20 个文件，如果这些文件包含大量代码，那将大大增加编译时间。

当然，如果您想在大头文件中包含的只是标准库中的头文件或您不会修改的头文件，那么您可以将它们全部放入预编译的头文件中，并让所有 cpp 文件都包含它。

但是，如果您要修改头文件（例如更改类定义、添加 typedef 等），您应该知道每次修改都需要重新编译所有 cpp 文件。根据这些文件的大小，每个小的编辑（更改函数名称、添加空格、添加注释）可能会延迟您的工作一分钟，而这可能需要五秒钟（如果您使用更复杂的库，例如Boost.Spirit，那些时间真的很快）。

总而言之，如果您正在处理一个需要维护的项目，我不会将所有内容都放在一个文件中，即使该项目现在*很小*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:37:32.353

并不真地。

*确实存在便利*标头的使用，请注意，它们可用于打包组合在一起的功能，`include`如果您认为 90% 的时间是无论如何，标头也需要包含对象的完整定义。

然而，全局标题是不好的风格，虽然你的项目现在很小，但它可能会在以后增长。不得不解开这种事情并重新划分标题，我只能说：没有乐趣......

无论如何，收益是什么？如果项目很小，开始的标题很少，所以它是边缘的。

# php - 如果选中该行第一列中的一个或多个复选框，如何将值传递给jquery？

> ID：14119374
> 
> 赞同：-5
> 
> 时间：2013-01-02T09:12:23.143
> 
> 标签：php, jquery, codeigniter

这是，

1.  如果选中标题复选框，我需要在表格的第一列中启用所有复选框。
2.  我需要将一个或多个或所有选定复选框的行 ID 传递给 jQuery 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:18:47.377

针对您的问题的非常恶心的 jQuery 解决方案：http: [//briancray.com/posts/check-all-jquery-javascript](http://briancray.com/posts/check-all-jquery-javascript)

当您遍历表中的每个 tr 时，请执行以下操作：

```
// assume you have an array like:
$array = array(
     '0' => array(
            'name' => 'bob',
            'pet' => 'dog'
     ),
     '1' => array(
            'name' => 'josh',
            'pet' => 'cat'
     ), 
 );
for($i=0;$i<count($array);$i++) { ?>
<td><input type="checkbox" name="rows[<?=$i?>]" /><td><?=$array[$i]['name']?></td><td><?=$array[$i]['pet'];?></td>
<? } ?> 
```

发布后，您将在帖子中获得一个带有行索引的数组，您可以进一步迭代该数组。

如果您想要更多示例代码，我很乐意提供一些。不过，这应该可以帮助您入门。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:20:16.680

对 html 使用这种类型的结构

```
<fieldset>
        <!-- these will be affected by check all -->
        <div><input type="checkbox" class="checkall"> Check all</div>
        <div><input type="checkbox"> Checkbox</div>
        <div><input type="checkbox"> Checkbox</div>
        <div><input type="checkbox"> Checkbox</div>
    </fieldset>
    <fieldset>
        <!-- these won't be affected by check all; different field set -->
        <div><input type="checkbox"> Checkbox</div>
        <div><input type="checkbox"> Checkbox</div>
        <div><input type="checkbox"> Checkbox</div>
    </fieldset> 
```

在这里，每个字段集的所有复选框都可以使用这个 jquery 代码进行检查，还可以获取选中复选框的所有 id

```
$(function () {
    $('.checkall').click(function () {
        $(this).parents('fieldset:eq(0)').find(':checkbox').attr('checked', this.checked);
      var x =  $(this).parents('fieldset:eq(0)').find(':checkbox').attr('id');

    });
}); 
```

# vb.net - 如何在不浪费纸张和墨水的情况下模拟打印 10K 双面打印纸

> ID：14119381
> 
> 赞同：1
> 
> 时间：2013-01-02T09:12:45.420
> 
> 标签：vb.net, printing

我们有一个用 VB.NET 编写的桌面应用程序，每月打印一次 10K 双工报告。有一个问题需要我们调试或尝试复制。

如果我打印到 NULL 打印机，它工作正常。

如何在不实际打印的情况下真实地模拟打印所有这些纸张？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:50:57.290

根据 OP 的要求，回顾一下我的评论，

使用 PDF 打印机可能是一个很好的解决方案。另一种方法可能是使用普通打印机，但将其设置为打印到文件（在 Windows 中非常简单）。

主要缺点是为每个打印作业提供文件名，也许您可​​以在运行时劫持 PrintDialog 提供文件名，但我从未尝试过。使用普通驱动程序并将其设置为打印到文件可能具有相同的限制。

但是有几个支持自动命名的 PDF 打印驱动程序，请查看[此链接](http://www.novapdf.com/kb/how-to-create-a-pdf-file-without-displaying-the-save-pdf-file-as-dialog-140.html)或[SU 上的此问题](https://superuser.com/questions/103855/pdf-printer-without-user-intervention)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:29:33.193

使用 CutePDF 打印到具有顺序生成的文件名（和目录，如果需要）的 PDF 文件应该能够复制问题。

但是，如果问题出在打印机驱动程序而不是您的代码中，则打印到 PDF 将找不到问题。获得正在发生的确切问题的详细信息可能会很好。

# ruby - 无法从 ruby 中的父类访问常量

> ID：14119386
> 
> 赞同：0
> 
> 时间：2013-01-02T09:13:08.353
> 
> 标签：ruby

我正在尝试从父类访问常量但出现错误

**NameError: 未初始化的常量 CONTS**

这是我的代码 - 父类

```
module Abc
  class Xyz
    class A
      class CONSTS
        ONE = "1"
        TWO = "2"
        Three = "3"
      end
    end
  end
end 
```

这是子班

```
module Abc
  class Xyz
    class B < A
      class << self
        def print_const
          get_const
        end

        private

        def get_const
          puts CONSTS::ONE
        end
      end
    end
  end
end 
```

现在，当我尝试 Abc:Xyz::B.print_const 时，出现上述错误。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:24:08.577

尝试使用`a::CONSTS:ONE`或完整的标识符`::abc::xyz::a::CONSTS:ONE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-07T08:43:05.553

你可以这样使用

```
...
def get_const
  puts self.class.superclass::CONSTS::ONE
end
... 
```

# mysql - 我在 Ubuntu 中的 sql 安装错误 - 12.04

> ID：14119387
> 
> 赞同：4
> 
> 时间：2013-01-02T09:13:18.200
> 
> 标签：mysql, regex, linux, ubuntu-12.04

当我写命令时

```
 sudo apt-get install mysql-server-5.5 
```

我收到以下错误消息

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package mysql-server-5.5
E: Couldn't find any package by regex 'mysql-server-5.5' 
```

请告诉我如何删除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:17:12.357

那个错误说明包名不正确，试试

```
apt-cache search mysql-server 
```

写下你要安装的包名，然后重试

```
sudo apt-get install correct-package-name 
```

另一个答案可能是您没有存储包的正确存储库。从[这里](http://packages.ubuntu.com/precise/database/)您可以看到您应该启用`security`存储库。[在这里](https://help.ubuntu.com/community/Repositories/Ubuntu)你可以看到如何做到这一点。

编辑：

正如 Tuim 所说，它也可以是“。”。在名称中，但只有在找不到确切表达式时才会出现这种情况（apt-get 手册）：

> 如果没有包与给定的表达式匹配，并且表达式包含“.”、“？”之一 或 "*" 则假定为 POSIX 正则表达式，并将其应用于数据库中的所有包名称。然后安装（或删除）任何匹配项。

所以我仍然认为你的存储库有问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T09:21:17.153

因为 '。' 在包名称中，它被视为正则表达式。

尝试：

```
sudo apt-get install mysql-server 
```

# .net - 比 .net 中的 SqlConnection 和 SqlDataReader 更快

> ID：14119388
> 
> 赞同：1
> 
> 时间：2013-01-02T09:13:20.850
> 
> 标签：.net, sqldatareader, sqlconnection

我使用这段代码：

```
 Dim connection As SqlConnection
Dim connetionString As String
Dim sqlq As String = "select c.* from(..."
    connetionString = "Data Source=...;Initial Catalog=...;User ID=...;Password=..."
    connection = New SqlConnection(connetionString)
                track3.Text = "Connection... " & DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff")
        Using connection
            connection.Open()
                track4.Text = "SqlCommand... " & DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff")
            Dim command As SqlCommand = New SqlCommand(sqlq, connection)
                track5.Text = "SqlDataReader... " & DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff")
            Dim reader As SqlDataReader = command.ExecuteReader()
                track6.Text = "Filling RTB... " & DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff")
            If reader.HasRows Then
                ........
                Do While reader.Read()
                    .......
            reader.Close()
        End Using
                track7.Text = "Done " & DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff") 
```

而且我注意到命令'command.ExecuteReader（）'消耗大部分时间。这个时间范围有时在 1 到 19 秒之间，这对我来说太长了。有没有更好的方法来做我所做的事情？我需要从数据库中读取一些数据并在富文本框中显示它（不是从 DB 接收到的所有数据）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T09:18:58.053

有各种性能部分`ExecuteReader`：

*   查询本身的性能（这尤其会影响*延迟*，即*开始*获取数据`ExecuteReader`所需的时间）
**   返回的数据量（这会影响*带宽*、行数和`While`循环的迭代次数）*   行处理代码的性能（`While`循环内的代码）*

 *根据您的描述，这听起来像是第一个问题。这与 ADO.NET 完全无关，*与***您**的查询有关。所以：写一个更好的查询，或者添加适当的索引。

 *其他可能影响这一点的事情：

*   高服务器负载/网络负载
*   从其他连接锁定
*   不同的`SET`配置（ADO.NET`SET`对 SSMS 窗口有不同的默认值，因此在某些情况下性能可能会有很大差异）
*   参数嗅探；如果您在某个时间点运行非典型查询（非常有偏见的数据），则可以缓存错误的查询计划 - 在这种情况下，**如果**您确认参数嗅探是问题所在`OPTIMIZE FOR`，查询提示可以提供帮助。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:17:51.020

如果`ExecuteReader()`是您的性能瓶颈，那么您将需要编写更好的 SQL 查询，更好地组织数据库中的数据（例如设置索引）并通常优化数据库上的内容。

您不能在客户端做太多事情，因为`ExecuteReader()`基本上只是将查询发送到数据库并等待结果到达。****

# django - SelectDateWidget 没有得到正确的初始值

> ID：14119390
> 
> 赞同：0
> 
> 时间：2013-01-02T09:13:28.463
> 
> 标签：django, django-forms

我在这里使用 userena，我的 ProfileForm 扩展了 userena 提供的 EditProfileForm（这是一个模型表单）

这是我在 forms.py 中的代码

```
class ProfileForm(EditProfileForm):
    contact = forms.CharField(label="Contact Number")
    birthday = forms.DateField(widget=SelectDateWidget(years=reversed(range(1930, datetime.date.today().year))))
    gender = forms.ChoiceField(widget=forms.RadioSelect, choices=GENDER, label="Gender")

    class Meta:
        model = get_profile_model()
        exclude = ['mugshot', 'privacy', 'user']

    def save(self, force_insert=False, force_update=False, commit=True):
       [...] 
```

从呈现的页面中，我的日期和月份显示得很好，但是在页面的第一次加载时年份将显示 2012 年（正确的年份是 1981 年），然后再次刷新将使年份的选择字段为空（为什么？2012 年甚至不显示再上来）。

我很确定传入的数据是正确的，因为如果我删除 SelectDateWidget，它会显示得很好。此外，我检查了传递到表单中的数据类型，并且正确键入了 datetime.date 和正确的值。

我的猜测是 SelectDateWidget 代码中可能有问题，但我也找不到任何问题，另外，我对自己的代码比其他的更怀疑。有谁知道为什么会这样？传入的数据是正确的，我敢肯定。

编辑：如果有帮助，我的 settings.py 包含这些

```
USE_L10N = False
DATE_FORMAT = 'j  M  Y' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:40:34.327

通过删除解决了这个问题`reversed`：

```
birthday = forms.DateField(widget=SelectDateWidget(years=reversed(range(1930, datetime.date.today().year)))) 
```

并将其替换为：

```
birthday = forms.DateField(widget=SelectDateWidget(years=range(datetime.date.today().year, 1930, -1))) 
```

# php - 使用自定义验证来验证多个表单字段

> ID：14119392
> 
> 赞同：1
> 
> 时间：2013-01-02T09:13:32.530
> 
> 标签：php, cakephp

我有一个登录表单。我想用`notempty()`规则验证字段。我想一次显示所有错误消息（其中字段 a 为空）。在我的情况下，这不会发生。

我的代码是：

```
if(empty($this->data['Employee']['username'])){
    $this->Employee->invalidate('username','Please Enter User Name');
}
else if(empty($this->data['Employee']['password'])){
    $this->Employee->invalidate('password','Please Enter Password');
}
else if(empty($this->data['Employee']['project_id'])){
    $this->Employee->invalidate('project_id','Please Select Any Project.');
    $this->redirect(array('controller'=>'employees','action' => 'login'));
} 
```

登录.ctp 文件：

```
<?php echo $this->Form->create('Employee', array('action' => 'login'));?> 
<h2>Login</h2> <div id="login-area"> 
<?php echo $this->Form->input('username',array('div'=>false,'id'=>'loginusername'));?> 
<?php echo $this->Form->input('password',array('div'=>false,'type'=>'password','id'=>'passw‌​ord'));?> 
<?php echo $this->Form->input('project_id',array('id'=>'projects','empty'=>'Select'));?> 
<?php echo $this->Form->end(__('submit',true));?> 
```

控制器功能：

```
function login(){
        $this->layout = 'login'; //pr($this->data);exit;

        if(isset($this->data['Employee'])){
            if(empty($this->data['Employee']['username'])){
                $this->Employee->invalidate('username','Please Enter User Name');
            }
            else if(empty($this->data['Employee']['password'])){
                $this->Employee->invalidate('password','Please Enter Password');
            }

            else{
                //$project_id = $this->data['Employee']['project_id'];
                $result=$this->Employee->findByUsername($this->data['Employee']['username']);
                $pwd=$result['Employee']['password'];echo $pwd; 
                $emp_id =$result['Employee']['id'];
                if($pwd==md5($this->data['Employee']['password'])){
                    //$this->Session->write('project_id',$project_id);
                    $this->Session->write('emp_id',$emp_id);
                    $this->redirect(array('action' => 'index'));
                }

                else{
                    $this->Session->setFlash(__('Please enter valid username And password to login', true));
                }
            }
        } 
```

如何在提交表单时一起显示所有错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:15:05.207

如果您在控制器中进行验证，应该看起来像这样。

```
if(empty($this->data['Employee']['username'])){
    $this->Employee->invalidate('username','Please Enter User Name');
}
if(empty($this->data['Employee']['password'])){
    $this->Employee->invalidate('password','Please Enter Password');
}

if($this->Employee->validates()) {
    // do your login stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:14:49.730

您应该将验证放在您的模型类中，CakePHP 可以开箱即用地处理所有这些。

使用 CakePHP 表单助手在您的视图中呈现输入框，并且在提交无效表单时将自动呈现错误消息。

在此处查看模型验证的详细信息：http: [//book.cakephp.org/2.0/en/models/data-validation.html](http://book.cakephp.org/2.0/en/models/data-validation.html)

例如在您的模型类中

```
public $validate = array(
    'username' => array(
        'rule'    => 'notEmpty',
        'message' => 'Please enter username'
    )
); 
```

在您看来（在以 开头的表单内`$this->Form->create()`）

```
<?php echo $this->Form->input('username'); ?> 
```

# android - Webview 自动放大以适应屏幕

> ID：14119396
> 
> 赞同：0
> 
> 时间：2013-01-02T09:14:07.670
> 
> 标签：android, webview, zooming

我制作了一个 Android 应用程序，它只是一个移动网站的包装器。现在一些用户抱怨“小”网站对于更大的屏幕/分辨率来说太小了。我会尝试稍微“自动缩放”该网站，以便它更适合，这似乎工作得相当不错。但有时网站不会换行，因此缩放页面的一部分会落在屏幕上。我用它来设置缩放级别：

```
oWebView.setInitialScale(getResources().getInteger(R.integer.zoom)); 
```

在我放的 HTML 中：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, target-densitydpi=device-dpi" /> 
```

测试起来有点困难，但是通过将一些 AVD 设置为不同的分辨率，我可以获得很长的路要走。

还有其他人有更聪明的方法吗？我发现的所有主题都是为了缩小，以便整个网站适合 web 视图。我想放大，以便网站的左上角更适合，但不想水平滚动。所以在缩放之后，网站必须换行（就像我使用 zoomin 控件时一样）

亲切的问候！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:44:53.823

用这个：

```
WebSettings settings = webView.getSettings();
settings.setUseWideViewPort(true);
settings.setLoadWithOverviewMode(true); 
```

概览模式将负责自动缩放页面以适应屏幕 - 创建概览。ViewViewport 禁用手机适配，并说它的页面宽度与普通浏览器一样。

# javascript - jquery值不更新

> ID：14119400
> 
> 赞同：0
> 
> 时间：2013-01-02T09:14:29.057
> 
> 标签：javascript, jquery

```
function addrewarddb()
{
    var rval="98";
    $.post("db/mkreward.php",{
        proid:getURLParameter("id")
    },function(data){

         rval="99";
         alert(rval);
    });
    alert(rval);
     return rval;

} 
```

当此函数执行时，该函数返回 98 而不是 99。两个警报显示 98，然后是 99。如何使我的函数返回 99。我认为这里的问题是在来自服务器页面 mkreward.php.how 的响应之前的函数 returnig我可以让函数在服务器响应后返回

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T09:18:26.167

$.post 调用是异步的。

这意味着函数在 HTTP 请求完成之前返回。

然后，当 $.post() 调用完成时，它会更新变量并警告 99。

从[jquery 文档](http://api.jquery.com/jQuery.ajax/)：

> async Boolean 默认值：true 默认情况下，所有请求都是异步发送的（即默认设置为 true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用完成/成功/错误回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:18:17.517

将返回值放入回调函数中：

```
function addrewarddb()
{
    var rval="98";
    $.post("db/mkreward.php",{
        proid:getURLParameter("id")
    },function(data){

         rval="99";
         alert(rval);
         return rval;
    });

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T09:18:32.343

你有`async`call`post`并且你的 return 语句将在你的回调函数被调用之前执行。您可以像这样返回`post`对象`addrewarddb()`并对其调用完成。

```
function addrewarddb()
{
    var rval="98";
    return $.post("db/mkreward.php",{
        proid:getURLParameter("id")
    })
}

addrewarddb().complete (function (data){
       alert( data);
       return data;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T09:56:21.420

这是因为**异步****`$.post`**工作。只是 的简写。为了能够告诉您**同步**工作（这是您想要的）**，您必须使用**.****`$post`****`$.ajax`****`$.post`******`$.ajax`******

 ****你的函数的翻译应该是这样的：

```
function addrewarddb() {
    var rval = "98";

    $.ajax({
        type: "POST",
        url: "db/mkreward.php",
        data: { proid: getURLParameter("id") },
        async: false,
        success: function (msg) {
            rval = "99";
            alert(rval);
        },
        error: function (jqXHR, textStatus) {

        }
    });

    alert(rval);
    return rval;
} 
```

查看 jquery 网站了解详情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T09:19:26.947

您可以使用

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType,
  async:false
}); 
```

或者等待回调函数得到结果****

# android - Json 不使用 HttpPost 可能围绕 setEntity

> ID：14119410
> 
> 赞同：3
> 
> 时间：2013-01-02T09:15:41.770
> 
> 标签：android, json, entity, http-post

我正在使用此代码将其发送到我的 php 文件。该文件看起来像这样。

```
file_put_contents('dump.txt', "POST: \n" . print_r($_POST, true) . "\n\n\n GET: \n" . print_r($_GET, true)); 
```

我正在发送这样的json：

```
public void postData(String url,JSONObject json) {
    HttpClient httpclient = new DefaultHttpClient();
    String object = "?data=" +json.toString();
    System.out.println("object:" + object);
    try {
        HttpPost httppost = new HttpPost(url.toString());
        httppost.setHeader("Content-type", "application/json");
        System.out.println("url:" + url.toString());
        StringEntity se = new StringEntity(object); 
        System.out.println("json:" + json.toString());

        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        httppost.setEntity(se); 

        HttpResponse response = httpclient.execute(httppost);
        String temp = EntityUtils.toString(response.getEntity());
        System.out.println("response:" + response);

        int statusCode = response.getStatusLine().getStatusCode();
        System.out.println("Statuscode " + statusCode);

        if(statusCode==200) {
            Toast.makeText(LbsGeocodingActivity.this, "Verstuurd",  Toast.LENGTH_LONG).show();
        }
        else if(statusCode!=200) {
            Toast.makeText(this, statusCode, Toast.LENGTH_LONG).show();
        }
        /* try {
                String responseBody = EntityUtils.toString(response.getEntity());
        Toast.makeText(this, responseBody, Toast.LENGTH_LONG).show();
        } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        }*/
    } 
    catch (ClientProtocolException e) {

    } 
    catch (IOException e) {
    }
} 
```

日志文件是这样的：

```
01-08 09:36:00.278: I/System.out(1124): object:?data={"id":"69403","timestamp":"08-01-2013 09:36:00","longitude":"-122.084095","latitude":"37.422005"}
01-08 09:36:00.298: I/System.out(1124): json:{"id":"69403","timestamp":"08-01-2013 09:36:00","longitude":"-122.084095","latitude":"37.422005"}
01-08 09:36:01.038: I/System.out(1124): response:org.apache.http.message.BasicHttpResponse@412d1b38
01-08 09:36:01.038: I/System.out(1124): Statuscode 200 
```

出于安全原因，我省略了网址..

但我在 dump.txt 中得到一个空文件

```
POST: 
Array
(
)

 GET: 
Array
(
) 
```

**编辑**

setEntity（或附近的某个地方）出了点问题，因为当我已经将 ?data= 粘贴到 url 中时，我从 PHP 文件中得到了这个：

```
POST: 
Array
(
)

 GET: 
Array
(
    [data] => 
) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T09:51:20.273

我`DefaultHttpClient`在我的应用程序中发送 JSON 的方式非常有效：

```
public static HttpUriRequest createPostForJSONObject(
        JSONObject params, String url) {
    HttpPost post = new HttpPost(url);
    post.setEntity(createStringEntity(params));
    return post;
}

private static HttpEntity createStringEntity(JSONObject params) {
    StringEntity se = null;
    try {
        se = new StringEntity(params.toString(), "UTF-8");
        se.setContentType("application/json; charset=UTF-8");
    } catch (UnsupportedEncodingException e) {
        Log.e(TAG, "Failed to create StringEntity", e);
        exception = e;
    }
    return se;
} 
```

为了在您的代码中运行此请求，您需要做的就是：

```
public void postData(String url,JSONObject json) {
    HttpClient httpclient = new DefaultHttpClient();
    try {
          HttpPost post = createPostForJSONObject(json, url);
          HttpResponse response = httpClient.execute(post);
          // DO YOUR THING
    } catch Exception {
         // HANDLE EXCEPTION
    }
} 
```

# selenium - 如何从弹出窗口打开另一个弹出窗口

> ID：14119412
> 
> 赞同：0
> 
> 时间：2013-01-02T09:15:46.173
> 
> 标签：selenium, selenium-rc

我想创建一个自动化测试用例，其中涉及从另一个弹出窗口（例如 PopA）启动弹出窗口（例如 PopB）。

我使用以下代码得到了弹出窗口（PopA）：

```
selenium.windowFocus();
selenium.waitForPopUp("PopupDialog", "60000");
selenium.selectWindow("PopupDialog");
selenium.selectFrame("PopupDialog"); 
```

但 60 秒后，整个应用程序因“超时”异常而崩溃。我想在弹出窗口（PopA）上的按钮单击时启动第二个弹出窗口（PopB）。

能否达到要求？如果是，请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:33:36.957

是的，你可以做到这一点。请按照以下步骤操作

*   selenium.windowFocus();
*   selenium.waitForPopUp("PopupDialogA", "60000");
*   selenium.selectWindow("PopupDialogA");
*   selenium.selectFrame("PopupDialogA");
*   click("弹出窗口 A 中的按钮");
*   selenium.windowFocus();
*   selenium.waitForPopUp("PopupDialogB", "60000");
*   selenium.selectWindow("PopupDialogB");
*   selenium.selectFrame("PopupDialogB");
*   关闭弹出窗口 B
*   切换回弹出窗口 A
*   关闭弹出窗口 A
*   切换回主窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T12:20:39.807

我认为另一种方法可能有效。未经测试...但值得一看..

```
<a href="http://foo.com" onclick="javascript:void window.open('http://foo.com','1412867400701','width=940,height=620,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=0,left=50,top=80');return false;">Foo</a><br/> 
```

在下一个窗口中..

```
<a href="http://bar.com" onclick="javascript:void window.open('http://bar.com','1412867400702','width=840,height=460,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=0,left=30,top=50');return false;">Bar</a> 
```

**将 1412867400701**和**1412867400702**更改为不同的数字应该可以解决问题..
  就像我说的......没有经过测试......但理论有效......

# ios6 - NKAssetDownload 在 iPhone 5 上不起作用

> ID：14119413
> 
> 赞同：3
> 
> 时间：2013-01-02T09:16:00.210
> 
> 标签：ios6, download, nsurlconnection, iphone-5, newsstand-kit

我正在开发一个报亭应用程序，但在使用 NKAssetDownload 时遇到问题，在调用“downloadWithDelegate:”后下载不会开始。

相同的应用程序（代码）在模拟器和 Iphone4（都带有 ios6）上完美运行。

有什么线索吗？

谢谢。

# android - Android - 多点触控 - 在查看时 onClick 后无法捕获 ACTION_POINTER_DOWN

> ID：14119416
> 
> 赞同：0
> 
> 时间：2013-01-02T09:16:20.373
> 
> 标签：android, multi-touch

我有这样的布局 -

```
 <RelativeLayout   
        android:id="@+id/relativeLayoutTable"   
        android:layout_height="fill_parent"     
        android:layout_width="fill_parent"       
        android:layout_below="@+id/relativeLayout215"
        android:layout_toRightOf="@+id/relativeLayout20" >

            <ScrollView 
                android:id="@+id/scrollView" 
                android:layout_height="fill_parent"     
                android:layout_width="fill_parent"         
                android:scrollbars="horizontal|vertical" 
                android:fillViewport="true"
                android:scrollbarStyle="insideOverlay"> 

                <HorizontalScrollView
                    android:id="@+id/horizontalScrollView1"  
                    android:layout_width="wrap_content"  
                    android:layout_height="wrap_content"
                    android:scrollbarStyle="insideOverlay" >

                    <TableLayout
                        android:id="@+id/tableLayout1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center" />
                </HorizontalScrollView>
        </ScrollView>
    </RelativeLayout> 
```

表格布局由以编程方式创建的单元格/视图组成。我已经为每个单元格/视图定义了 onClicklistener。现在，我还为scrollView 定义了onTouchlistener。我可以获取单元格/视图的点击事件，但我没有在滚动视图中获取 ACTION_POINTER_DOWN 事件。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T01:19:20.837

如果去掉onClicklistener，那么drag/onTouchlistener table-layout就可以了，你可以试试代码，对我有用：</p>

```
 @Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    boolean intercept = false;
    switch (event.getAction()  & MotionEvent.ACTION_MASK ) {
        case MotionEvent.ACTION_DOWN: {
            currentX = (int) event.getRawX();
            currentY = (int) event.getRawY();
            break;
        }
        case MotionEvent.ACTION_MOVE: {
            int x2 = Math.abs(currentX - (int) event.getRawX());
            int y2 = Math.abs(currentY - (int) event.getRawY());
            if (x2 > touchSlop || y2 > touchSlop) {
                intercept = true;
            }
            break;
        }
        case MotionEvent.ACTION_POINTER_DOWN: {//it's important
            oldDist = spacing(event);
            mode = ZOOM;
            intercept = true;
            break;
        }
    }
    return intercept;
} 
```

# c# - 使用 c# 的亚马逊市场网络服务（amazon mws）

> ID：14119419
> 
> 赞同：4
> 
> 时间：2013-01-02T09:16:42.210
> 
> 标签：c#, asp.net, amazon, amazon-mws

我从 https://developer.amazonservices.co.uk/[^] 研究了亚马逊市场

我想详细了解如何使用此服务在亚马逊中添加产品。

在亚马逊添加产品的步骤是什么，我需要先列出亚马逊的产品然后添加还是可以直接添加（我知道我们不能在亚马逊创建新产品）

文档没有清零，我们也没有任何测试环境可供测试。

如果您有任何有用的链接，请提供给我..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T23:43:08.947

要使用 Amazon Marketplace Webservices (MWS)，您需要一个[Pro Merchant 卖家账户、一个 Amazon WebStore 账户、一个 Checkout by Amazon 账户或一个 Amazon Product Ads 账户](https://developer.amazonservices.com/gp/mws/faq.html/182-4740930-1031725#mwsSellers)。Pro Merchant 或 Professional Sellers 帐户目前的价格为每月[25.00 英镑](http://services.amazon.co.uk/services/sell-online/features-and-benefits.html)或[39.99 美元。](http://services.amazon.com/content/sell-on-amazon.htm?ld=SCSOAlogin)然后通过单击[http://developer.amazonservices.co.uk/上的](http://developer.amazonservices.com/)**Sign up for MWS**[按钮](https://developer.amazonservices.com/gp/mws/faq.html/182-4740930-1031725#signupMWS)来注册 MWS （或适合您所在的地区）。

 **据我了解，通过调用亚马逊卖家服务，您可以获得一个“沙盒”MWS 帐户，尽管我从未使用过。

设置完成后，您有两个选择：

1.  使用您的产品信息创建一个制表符分隔的文本提要（在文档中称为“平面文件”）
2.  创建多个 XML 提要（主要是这四个：产品、价格、库存和图像）

完成后，您将使用以下 API 调用：

1.  SubmitFeed 将您的数据发送到亚马逊并将其放入处理队列（如果使用 XML 格式，您需要多次调用）
2.  GetFeedSubmissionList 查看是否已处理
3.  GetFeedSubmissionResult 查看是否有任何问题

如果操作正确，使用上述 API 可以完全自动化在亚马逊上创建新产品、将您的数据链接到现有产品（通过链接到相同的 ASIN、EAN、UPC 或 ISBN）以及更改图像、价格和库存的过程。

Amazon Developer 站点有 C# 示例客户端代码供您使用。其他有用的参考资料：

*   [Amazon Marketplace Web 服务提要 API 部分参考](https://images-na.ssl-images-amazon.com/images/G/01/mwsportal/doc/en_US/bde/MWSFeedsApiReference._V388518764_.pdf)
*   [在亚马逊上销售 XML 指南](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/XML_Documentation_Intl._V397584891_.pdf)**

# php - 数组比较检查

> ID：14119421
> 
> 赞同：0
> 
> 时间：2013-01-02T09:17:03.093
> 
> 标签：php, logic

我有 2 个数组：

首先：

```
$array1 = ("Key 1","Key 2","Key 3"); //is dynamic, so can range from 1 => many values 
```

第二个数组是一个数据库值，它将根据玩家在库存中拥有的键数返回一个数组。

```
$array2 = ("Key 1","Key 1","Key 2","Key 3","Key 3","Key 3") //in this case, the player DOES have all the keys. 
```

我的问题是，我想不出合适的逻辑来比较这些数组，`$array2`看看`$array1`.

我试过的比较代码..

```
$check = array();
while ($k = mysql_fetch_array($array2)) {
    foreach ($array1 as $name) {
    if ((string)$name == (string)$k['name']) $check[] = true;
    else $check[] = false;
    }
}
foreach ($check as $bool) {
    if ($bool == false) {
        $return = false;
    } else {
    $return = true;
    }
}
return $return; 
```

问题是当 I 时`print_r($check)`，我得到很多错误，所以即使播放器包含所有正确的键，关闭比较也会破坏代码并返回错误。

任何有关此比较逻辑的帮助都会非常好，如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:15:22.777

答案是，这是`in_array()`我用来解决它的算法（感谢你们的帮助）

```
while ($k = mysql_fetch_array($pkey)) { //turn returned list of player items into a new array
    $new_pkey[] = $k['name'];
}
foreach ($key as $name) { //search new array using the set list required to pass the check
    if (in_array($name,$new_pkey)) $check[] = true;
    else $check[] = false;
}
foreach ($check as $bool) { //search the check array to see if it contains a false. If so, break and return false
    if ($bool == false) {
        $return = false;
        break; //crucial bug -- would return true unless the last element was false. This lets any element be false and finally yield false
    } else {
        $return = true;
    }
}
return $return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:16:03.550

你原来的逻辑是好的。你犯了两个错误：

1.  您忘记在遇到真条件时跳出循环，以便循环继续并在下一次迭代时将 $check 设置为 false 并且这会导致 $check 不必要的膨胀。
2.  您过早地将 $check 设置为 false；未来的匹配条件将翻转数组中另一个位置的位，而先前的不匹配已经将位设置为假。

试试这个：

```
<?php

$check = array();
foreach ($array1 as $name) {
    $check[$name] = false;
}

while ($k = mysql_fetch_array($array2)) {
    foreach ($array1 as $name) {
    if ((string)$name == (string)$k['name'])
    {
        $check[$name] = true;
        break;
    }
    }
}
foreach ($check as $bool) {
    if ($bool == false) {
    $return = false;
    } else {
    $return = true;
    }
}
return $return;
?> 
```

然后你也可以做一些优化。无需比较从 DB 读取的每个值与 $array1 中的每个值，您可以仅针对 $check 数组中存在错误的键检查值。当你开始用 true 填充 $check 时，你的内部循环会运行得更快。

或者，如果您的内部循环较长，您可以考虑对其进行排序，以便搜索变得更快。我缺少内置的二进制搜索功能，或者 PHP 没有内置的；你可能需要从某个地方剪切和粘贴它。

或者，如果不进行优化，至少通过一次调用诸如“in_array”之类的函数来取消内部循环。

# android - 从 SQLite 检索当前日期前 3 天和后 3 天范围内的数据

> ID：14119426
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:17:23.593
> 
> 标签：android, sqlite, android-sqlite

我想要实现的是从 SQLite 数据库中检索当前日期前 3 天和当前日期后 3 天范围内的记录，包括当前日期。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:03:15.207

假设您的日期以 SQLite 日期函数预期的格式存储，即 ，`yyyy-mm-dd`您可以使用该[`date`函数](http://www.sqlite.org/lang_datefunc.html)对日期进行计算：

```
SELECT *
FROM MyTable
WHERE DateCol BETWEEN date('now', '-3 days') AND date('now', '3 days') 
```

# php - 将图像数组排序到图库列中

> ID：14119427
> 
> 赞同：1
> 
> 时间：2013-01-02T09:17:28.780
> 
> 标签：php, image, gallery, sinemacula

这个问题有点像我之前的一个[问题](https://stackoverflow.com/questions/13840168/distribute-images-evenly-to-columns-in-gallery)。

但是，我想用最基本的术语来说明这一点，希望有人能够帮助我找到解决方案。

考虑这个多维数组：

```
$images = array(
    0 = array(
        'height' => 100
    ),
    1 = array(
        'height' => 90
    ),
    2 = array(
        'height' => 60
    ),
    3 = array(
        'height' => 30
    )
); 
```

**请注意，数组已经按高度降序排序！**

这些图像需要被推入三列，同时尽量保持列的高度。因此（上述示例的）结果数组将如下所示：

```
$gallery_columns = array(
    1 => array(
        'height' => 100
        'images' => array(
            0 = array(
                'height' => 100
            ),
        )
    ),
    2 => array(
        'height' => 90
        'images' => array(
            0 = array(
                'height' => 90
            ),
        )
    ),
    3 => array(
        'height' => 90
        'images' => array(
            0 = array(
                'height' => 60
            ),
            1 = array(
                'height' => 30
            ),
        )
    )
); 
```

我正在努力编写一个算法来实现上述目标。任何人都可以在不使用大量嵌套循环等的情况下看到实现这一目标的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:41:46.387

这可能是您正在寻找的：

```
$images = array(
    0 => array(
        'height' => 100
    ),
    1 => array(
        'height' => 90
    ),
    2 => array(
        'height' => 60
    ),
    3 => array(
        'height' => 30
    )
);

$gallery_columns = array(
    1 => array(
        'height' => 0,
        'images' => array()
    ),
    2 => array(
        'height' => 0,
        'images' => array()
    ),
    3 => array(
        'height' => 0,
        'images' => array()
    )
);

foreach ($images as $img)
{
    // start with first column as the shortest
    $shortest_colm = &$gallery_columns[1];

    // loop over all the columns, updating the shortest column if shorter
    for ($i = 2; $i <= 3; $i++)
    {
        if ($gallery_columns[$i]['height'] < $shortest_colm['height'])
        {
            $shortest_colm = &$gallery_columns[$i];
        }
    }

    // push the image into the shortest column
    $shortest_colm['height'] += $img['height'];
    $shortest_colm['images'][] = $img;
}

print_r($gallery_columns); 
```

输出：

```
Array
(
    [1] => Array
        (
            [height] => 100
            [images] => Array
                (
                    [0] => Array
                        (
                            [height] => 100
                        )

                )

        )

    [2] => Array
        (
            [height] => 90
            [images] => Array
                (
                    [0] => Array
                        (
                            [height] => 90
                        )

                )

        )

    [3] => Array
        (
            [height] => 90
            [images] => Array
                (
                    [0] => Array
                        (
                            [height] => 60
                        )

                    [1] => Array
                        (
                            [height] => 30
                        )

                )

        )

) 
```

* * *

**奖金：**

```
foreach($gallery_columns as &$column)
{
    shuffle($column['images']);
} 
```

由于您按从大到小的顺序插入图像，因此您可以在插入完成后随机播放图像。这样它就不会在顶部有所有大图像，在底部有小图像。

# r - 2种条件下的比较

> ID：14119429
> 
> 赞同：0
> 
> 时间：2013-01-02T09:17:31.457
> 
> 标签：r

我有一个小问题，我有这些参数：

```
df <- data.frame(Equip = c(1,1,1,1,1,2,2,2,2,2),
                 Notif = c(1,1,1,2,2,3,3,3,3,4),
                 Component = c("Dichtung","Motor","Getriebe","Service","Motor","Lüftung","Dichtring","Motor","Getriebe","Dichtring"),
                rank= c(1 , 1 , 1 , 2 , 2 , 1 , 1 , 1 , 1 , 2)) 
```

现在我想进行比较，只寻找一个`Equip`，如果第一个中使用`Components`的`rank`，与第二个`rank`相同（只是相同`Equip`）：

2种方式：

第一个：所有组件都一样吗？

任何（至少 1 个）组件是否相同？

我需要一个高度自动化的解决方案，因为我的数据集有超过 150k 行。

所需的答案可能是一个只有布尔表达式的向量，包括 TRUE 和 FALSE。

所以对于上面的例子，

`answer <- c(TRUE,TRUE)`

因为 Equip 1 rank 1 Component: Motor "AND" Equip 1 rank2 也是 Component: Motor。（1 所需方式的示例）

非常感谢您的帮助 =)

* * *

我使用了评论功能，但我无法显示问题，因为我想显示代码。

请对此感到抱歉..

原始数据有超过 2 个等级现在我想一步将等级 x 与等级 x+1 结合起来，因为这是使用的，为此我在函数中使用了一个 foor 循环，但它没有任何想法？

 ````
a <- lapply(split(df,df$Equips),function(x){
 for(i in 1:8){
  ll <- split(x,x$rank) 
if(length(ll)>i )
 ii <- intersect(ll[[i]]$Comps,ll[[i+1]]$Comps ) 
else ii <- NA c(length(ii)> 0 && !is.na(ii),ii) 
} 
})
 b <- unlist(a) 
c <- table(b,b) 
rowSums(c) 
```` 

`知道我能为它做什么（主要想法是一步获得 1-2,2-3,3-4 等的结果！`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:57:29.487

这是一个可能的解决方案：

```
df <- data.frame(Equip = c(1,1,1,1,1,2,2,2,2,2),
                 Notif = c(1,1,1,2,2,3,3,3,3,4),
                 Component = c("Dichtung","Motor","Getriebe","Service","Motor","Lüftung","Dichtring","Motor","Getriebe","Dichtring"),
                 rank= c(1 , 1 , 1 , 2 , 2 , 1 , 1 , 1 , 1 , 2))

allComponents <- function(subDf){
  setequal(subDf[subDf$rank==1,'Component'],subDf[subDf$rank==2,'Component'])
}

anyComponents <- function(subDf){
  length(intersect(subDf[subDf$rank==1,'Component'],subDf[subDf$rank==2,'Component'])) > 0
}

# all components are equal
res1 <- by(df,INDICES=df$Equip,FUN=allComponents)
# at least one component equal
res2 <- by(df,INDICES=df$Equip,FUN=anyComponents)

as.vector(res1)
> FALSE, FALSE

as.vector(res2)
> TRUE, TRUE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:57:22.670

包`plyr`适合组操作

```
dat.r <- dlply(df ,.(Equip),function(x){      # I split by Equipe
  ll <- split(x,x$rank)                       # I split by rank

  if(length(ll)> 1)
    ii <- intersect(ll[[1]]$Comps,ll[[2]]$Comps ) ## test intersection
  else 
    ii <- NA
  c(length(ii)> 0 && !is.na(ii),ii)                        ## the result
}) 
```

在这里我得到了比较结果和组件名称

```
dat.r
$`1`
[1] "TRUE"  "Motor" 
```

编辑：这里是基本包的结果（没有互联网）

```
lapply(split(df,df$Equip),function(x){      # I split by Equipe
  ll <- split(x,x$rank)                       # I split by rank
  if(length(ll)> 1)
    ii <- intersect(ll[[1]]$Comps,ll[[2]]$Comps ) ## test intersection
  else 
    ii <- NA
  c(length(ii)> 0 && !is.na(ii),ii)                                          ## the result
})

$`1`
[1] "TRUE"  "Motor"

$`2`
[1] "TRUE"      "Dichtring" 
````

# c# - 延迟 Lightswitch 自动完成过滤器的触发

> ID：14119431
> 
> 赞同：4
> 
> 时间：2013-01-02T09:17:32.793
> 
> 标签：c#, autocomplete, visual-studio-lightswitch

我正在尝试找到一种方法来延迟**Lightswitch 自动完成框**上的列表检索，以便它仅在用户输入 3 个字符后触发。

这是出于性能原因，因此 LS 在输入第一个字符后不会返回数千个项目，这会延迟用户输入。

输入 3 个字符后，我希望自动完成列表检索 xxx LIKE 'abc%' 而不是默认行为 xxx LIKE 'a%' 的项目。无论如何指定在自动完成工作之前要输入的最少字符数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T13:30:42.560

不确定此示例是否可以移植到电灯开关，但最简单的方法是使用 Reative Extensions。这篇博文详细介绍了。[例子](http://blog.petegoo.com/index.php/2011/11/22/building-an-auto-complete-control-with-reactive-extensions-rx/)

抱歉，如果这不起作用，我只在 wpf 中使用了这些扩展。

# android - 如何将通过 SMS 接收的数据存储在 Android 应用程序的数据库中？

> ID：14119432
> 
> 赞同：-2
> 
> 时间：2013-01-02T09:17:36.237
> 
> 标签：android

如何通过短信发送/接收应用程序在我的数据库中存储数据？

如果可能的话，如果有人能举例说明如何做，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:03:33.810

*   如果您想在收到短信时保存短信，它是[Android 短信广播接收器的副本](https://stackoverflow.com/questions/4117701/android-sms-broadcast-receiver)
*   如果您想在发送时保存 SMS，它是[SMS sent ContentObserver的副本](https://stackoverflow.com/questions/7332771/sms-sent-contentobserver)
*   如果您想阅读现有存储的短信（接收或发送），它是[如何使用短信内容提供者的副本](https://stackoverflow.com/questions/1976252/how-to-use-sms-content-provider-where-are-the-docs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:24:21.453

是的，有可能。您应该使用广播接收器来获取短信的发送和接收事件。

onRecive 方法你应该写你的代码。

```
// AndroidManifest.xml
<receiver android:name=".SMSReceiver"> 
  <intent-filter> 
    <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
  </intent-filter> 
</receiver>        

<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission> 

// SMSReceiver.java
public class SMSReceiver extends BroadcastReceiver 
{ 
    @Override 
    public void onReceive(Context context, Intent intent) { 
        Log.i(TAG, "SMS received.");
        ....
    }
} 
```

或者您也可以阅读这些教程以获得更多帮助 [对传入的短信做出反应](http://www.anddev.org/recognize-react_on_incoming_sms-t295.html)

# android - android中自定义listView中editText上的afterTextChanged事件

> ID：14119442
> 
> 赞同：2
> 
> 时间：2013-01-02T09:18:03.807
> 
> 标签：android, android-listview

在我的 android 应用程序中，我想在列表中显示项目。为此，我正在使用 listView。因为列表项由文本（名称）和编辑文本（数量）组成，所以我使用自定义 ArraryAdapter。我使用 editText 是因为我想允许用户修改数量。当用户停止编辑时，我想存储新值，所以我在 editTexts 中添加了一个 onTextChanged 事件。

我为项目创建了一个类（我在列表中显示）。很简单，只有名称和数量：

```
public class Foo {
    final String name;
    int quantity;

    public Foo (String name, int quantity) {
        this.name = name;
        this.quantity = quantity;
    }

    // for debug message
    @Override
    public String toString () {
        return "name: " + this.name+ " quantity: " + this.quantity;
    }
} 
```

在主要活动的 onCreate 方法中，我创建了一个 Foo 元素列表，并使用自己的 Adapter 将它们放入列表中：

```
public class MainActivity extends Activity {
    ListView list;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        list = (ListView) findViewById (R.id.list);
        List<Foo> elements = new ArrayList<Foo> ();
        elements.add(new Foo ("foo", 1));
        elements.add(new Foo ("bar", 2));
        elements.add(new Foo ("baz", 3));
        elements.add(new Foo ("foo2", 4));
        elements.add(new Foo ("bar2", 5));
        elements.add(new Foo ("baz2", 6));

        FooAdapter adapter = new FooAdapter (this, R.layout.foo_elements, elements);
        //where foo_elements contains a horizontal LinearLayout and in it
        //there's a TextView and an EditText
        list.setAdapter(adapter);
    } 
```

所以我的适配器如下（我在这里找到了持有人模式：[http](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder) ://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder ）：

```
public class FooAdapter extends ArrayAdapter<Foo> {
    Context context;
    int layoutResourceId;
    List<Foo> elements;

    public FooAdapter (Context context, int layoutResourceId, List<Foo> elements) {
        super (context, layoutResourceId, elements);
        this.context = context;
        this.layoutResourceId = layoutResourceId;
        this.elements = elements;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        Holder holder = null;

        final Foo item = elements.get(position);

        if (row == null) {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater ();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new Holder ();
            holder.name = (TextView) row.findViewById (R.id.name);
            holder.quantity = (EditText) row.findViewById(R.id.quantity);

            holder.quantity.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                    // TODO Auto-generated method stub
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                    // TODO Auto-generated method stub
                }

                @Override
                public void afterTextChanged(Editable s) {
                    Log.d("textchanged", "text has changed");
                    Log.d ("new text", s.toString());
                    item.quantity = Integer.parseInt(s.toString());
                }
            });

            row.setTag(holder);
        }
        else {
            holder = (Holder) row.getTag();
        }

        holder.name.setText (item.name);
        holder.quantity.setText (String.valueOf(item.quantity));

        return row;
    }

    class Holder {
        TextView name;
        EditText quantity;
    }
} 
```

如您所见，我使用 TextWatcher 来监听 textchanged 事件，并且在 afterTextChanged 函数中我想将新数量设置为 Foo 对象。

我放了一些调试消息来查看那里发生了什么，并添加了一个按钮来打印 Foo 对象。启动我的应用程序后，输出是这样的：

```
textchanged      text has changed
new text         1
textchanged      text has changed
new text         2
textchanged      text has changed
new text         3
textchanged      text has changed
new text         4
textchanged      text has changed
new text         5
textchanged      text has changed
new text         6
textchanged      text has changed
new text         6
textchanged      text has changed
new text         2
textchanged      text has changed
new text         3
textchanged      text has changed
new text         4
textchanged      text has changed
new text         5
textchanged      text has changed
new text         6 
```

因此，启动程序后，数量为：

```
name: foo quantity: 6 //instead of name: foo quantity: 1
name: bar quantity: 2
name: baz quantity: 3
name: foo2 quantity: 4
name: bar2 quantity: 5
name: baz2 quantity: 6 
```

如果我修改最后一个元素，那么它也会更改第一个元素：

```
name: foo quantity: 62 //instead of name: foo quantity: 1
name: bar quantity: 2
name: baz quantity: 3
name: foo2 quantity: 4
name: bar2 quantity: 5
name: baz2 quantity: 62 
```

我是 Android（甚至是 Java）的新手，我没有发现我的错。你有什么主意吗？为什么会有这么多 textchanged 事件？它是如何工作的？我是否错误地使用了 listView？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:32:21.680

我认为你的问题在这里。

```
item.quantity = Integer.parseInt(s.toString()); 
```

item 变量可能不是您想要的。请参阅这篇文章：[Android SimpleAdapter 错误的数据项与列表行相关联，](https://stackoverflow.com/questions/14116710/android-simpleadapter-wrong-data-item-gets-associated-with-a-list-row/14116809#14116809)它描述了 getView 不能被调用一次并且视图可以被重用。您在此处通过设置名称和值成功地实现了它：

```
holder.name.setText (item.name);
holder.quantity.setText (String.valueOf(item.quantity)); 
```

但不是使用 EditText。将标签设置为您的编辑视图，或以其他方式检索项目以更正它。

希望它会有所帮助。

# asp.net - IE10 条件 IE 评论功能启动器

> ID：14119455
> 
> 赞同：2
> 
> 时间：2013-01-02T09:18:54.217
> 
> 标签：asp.net, css, internet-explorer, conditional-statements

在 IE10 中调试我的 ASP.NET MVC（基于 Razor）网站时，我仍然需要设置 IE 特定的 css。使用 IE 条件注释时，在将 IE10 切换到 IE8 标准渲染模式时，以下语法有效：

```
<!--[if IE]><!--> 
<link href="@Url.Content("~/Content/global/global.ie.css")" rel="stylesheet" type="text/css">
<!--<![endif]--> 
```

而这 - 不会：

```
<!--[if IE]> 
<link href="@Url.Content("~/Content/global/global.ie.css")" rel="stylesheet" type="text/css">
<![endif]--> 
```

后面的语法在大多数提供条件注释信息的网站上作为示例给出，包括 MSDN 上的官方页面。这两者有什么区别？先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T09:57:31.977

使用“下层显示的条件评论”让它工作......

## 句法：

```
<![if IE]>    
     ...statements...  
<![endif]> 
```

## 例子：

```
<![if IE]>    
    <link href="@Url.Content("~/Content/global/global.ie.css")" rel="stylesheet" type="text/css">  
<![endif]> 
```

# 更多信息：

某些验证服务将下层显示的条件注释语法标记为无效 HTML。可以添加其他字符以在要显示的 HTML 内容之前和之后构建有效的 HTML 注释。

```
<!--[if !IE]>--> 
    YOUR HTML 
<!--<![endif]--> 
```

在上面的示例中，否定条件表达式阻止 Internet Explorer 在下层显示的条件注释块中显示 HTML 内容。但是，如果条件表达式的计算结果为真，则第一个注释的结束“-->”将与 HTML 内容一起出现在 Internet Explorer 中。要对 Internet Explorer 用户隐藏这些字符，请添加“

```
<!--[if !IE]><!--> 
    YOUR HTML 
<!--<![endif]--> 
```

# 例子：

以下是更多条件注释的示例。

```
<!--[if IE]><p>You are using Internet Explorer.</p><![endif]-->
<![if !IE]><p>You are not using Internet Explorer.</p><![endif]>

<!--[if IE 7]><p>Welcome to Internet Explorer 7!</p><![endif]-->
<!--[if !(IE 7)]><p>You are not using version 7.</p><![endif]-->

<!--[if gte IE 7]><p>You are using IE 7 or greater.</p><![endif]-->
<!--[if (IE 5)]><p>You are using IE 5 (any version).</p><![endif]-->
<!--[if (gte IE 5.5)&(lt IE 7)]><p>You are using IE 5.5 or IE 6.</p><![endif]-->
<!--[if lt IE 5.5]><p>Please upgrade your version of Internet Explorer.</p><![endif]-->

<!--[if true]>You are using an <em>uplevel</em> browser.<![endif]-->
<![if false]>You are using a <em>downlevel</em> browser.<![endif]>

<!--[if true]><![if IE 7]><p>This nested comment is displayed in IE 7.</p><![endif]><![endif]--> 
```

*内容取自**[Valid HTML for downlevel-revealed conditional comments](http://msdn.microsoft.com/en-us/library/ms537512%28v=VS.85%29.aspx)***

# drupal - 在 Drupal 网站上注册一个模块

> ID：14119457
> 
> 赞同：1
> 
> 时间：2013-01-02T09:19:05.103
> 
> 标签：drupal, drupal-7, drupal-modules

我有一个模块名称 twitter_widget 并且我使用了 drupal 7，我想在 drupal 网站上注册我的模块。请有人帮助我，我是 drupal 的初学者

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:58:11.470

您可以通过在 Drupal.org 中注册您的帐户来贡献您的模块。访问此处了解更多详情，以便为 Drupal 做出贡献：

[http://drupal.org/contribute/development](http://drupal.org/contribute/development)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:20:54.717

只需将模块放入文件夹`sites/all/modules`中。

例如，您的模块的绝对路径是`http://YOUR_DOMAIN/sites/all/modules/twitter_widget/`.

就这样 ：）

# actionscript-3 - Actionscript 3/Flash - 单击按钮后未“选择”Air/.exe，未注册键盘

> ID：14119461
> 
> 赞同：0
> 
> 时间：2013-01-02T09:19:23.590
> 
> 标签：actionscript-3, flash

我有一个奇怪的问题，我点击（例如）开始按钮，然后当后来出现需要按下键盘的交互时，它不会注册，直到我点击舞台（不按下按钮）。所以，我的 .exe 需要在使用按钮后“重新选择”它或其他东西。我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:20:49.743

尝试完全集中在一个又一个阶段的负载上。这样您就无需点击舞台。

```
 stage.focus = interactiveObject; //Like button or TextField 
```

更多细节：

[键盘事件阶段焦点问题解决方案](http://www.mindscriptact.com/2011/08/03/as3-keyboardevent-stage-focus-problem-solution/)

[使用 stage.focus](http://www.remitoffoli.com/blog/2009/05/03/as3-using-stagefocus/)

[设置焦点-flash-actionscript-3](http://www.williammalone.com/briefs/how-to-set-focus-flash-actionscript-3-as3/)

# sql - Sql 查询在多对多关系中查找不匹配的数据

> ID：14119466
> 
> 赞同：0
> 
> 时间：2013-01-02T09:19:48.750
> 
> 标签：sql, oracle

我需要有关 sql 查询的帮助。

我有两张桌子`Person_Table` 和`PersonAlias_Table`。在第一个表中， **person_id**和**uniqe_id**是主键，在别名表中， **person_id**和 uniqe_id 以及**activity_code**也是主键。我想找到在 Alias 表中**但**不在 person 表中的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:24:34.120

```
select *
  from PersonAlias_Table PA
       left outer join Person_Table P on PA.person_id = P.person_id 
       and PA.uniqe_id = P.uniqe_id
 where P.uniqe_id is null 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:55:33.637

执行此操作的最佳方法取决于您的 DBMS，您可以使用`NOT EXISTS`或`LEFT JOIN/IS NULL`

**不存在**

```
SELECT  *
FROM    PersonAlias_Table pat
WHERE   NOT EXISTS
        (   SELECT  1
            FROM    Person_Table pt
            WHERE   pt.Person_ID = pat.Person_ID
            AND     pt.Uniqe_ID = pat.Uniqe_ID
        ) 
```

**左连接/为空**

```
SELECT  *
FROM    PersonAlias_Table pat
        LEFT JOIN Person_Table pt
            ON pt.Person_ID = pat.Person_ID
            AND pt.Uniqe_ID = pat.Uniqe_ID
WHERE    pt.Person_ID IS NULL 
```

According to [this answer](https://stackoverflow.com/a/2246793/1048425) in MySQL `NOT EXISTS` is a little bit less efficient, In SQL Server `LEFT JOIN / IS NULL` is less efficient, in PostgreSQL and Oracle both methods are the same, so it is really personal preference.

# c++ - __func__ 和日志记录

> ID：14119469
> 
> 赞同：5
> 
> 时间：2013-01-02T09:20:10.507
> 
> 标签：c++, logging, callstack, func

我正在用 C++ 实现一个日志处理程序，它工作得很好，但是我发现有一件事是可用的，那就是记录器从哪里获得输出。

我想这并不是什么大问题，但我偶然发现了`__func__`标识符，它基本上会保留当前函数的函数名。

所以我在我的 Log 类中有一个名为 的静态函数`Write`，它需要一个日志级别和一个变化列表。所以我会这样称呼它：

```
Log::Write(LOG_DEBUG, "this is an integer: %d", 10); 
```

它会打印：

```
2013-01-02 => 10:12:01.366 [DEBUG]: this is an integer: 10 
```

但是，我认为在消息中也包含调用者可能会很有用，以产生如下内容：

```
2013... => 10:12:... (functionName) [DEBUG]: blah 
```

所以我可以做的（当然）是将`__func__`作为参数添加到`Log::Write`，但这意味着任何时候我打电话`Log::Write`我也需要发送`__func__`它总是相同的，我觉得应该可以在没有的情况下做到这一点明确表示。

所以我想要的是将提供的功能：

```
Log::Write(LOG_DEBUG, __func__, "message"); 
```

无需每次都显式输入**func 。**

我不知道这是否真的可行，我最好的选择是有一些方法可以取消引用函数内部的调用者`Write`，我似乎不太可能只是“推断”这样的参数. 但至少值得一问，也许我可以看到有哪些选择。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T09:32:05.607

这通常使用宏以及文件名`__FILE__`和行号来完成`__LINE__`。

```
void Log::Write(Level l,
                char const* function,
                char const* file,
                int line,
                char const* format,
                ...); 
```

被包装成一个宏：

```
#define LOG(Level_, Format_, ...) \
    Log::Write(Level_, __func__, __FILE__, __LINE__, Format_, __VA_ARGS__); 
```

请注意，您可能希望通过检查是否在该级别登录来“保存”一些计算：

```
// suppose availability of "bool Log::Enabled(Level l)"
#define LOG(Level_, Format_, ...)   \
    while (Log::Enabled(Level_)) {  \
      Log::Write(Level_, __func__, __FILE__, __LINE__, Format_, __VA_ARGS__);  \
      break;  \
    } 
```

使用 a`while`而不是`if`是为了避免悬空的 else 问题。

*注意：您可能希望调查使用流进行日志记录。样式的问题`printf`在于它是不可组合的。使用流，您可以重载`std::ostream& operator<<(std::ostream&, X const&)`任何内容`X`，然后只编写**一次**将其内容转储到日志中的方法。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T09:27:00.410

```
#define WRITE_LOG(X,...) Log::Write(LOG_DEBUG, __func__, (X),__VA_ARGS__); 
```

用这个宏代替函数写日志，它会自动添加**func**参数。正如 Mat 提到的，这是典型的方式，在这种情况下我想不出任何方法来避免宏。

# javafx-2 - JavaFX 2.2 - 向 BarChart 或 StockedBarChart 中的 Bar 添加鼠标事件

> ID：14119475
> 
> 赞同：3
> 
> 时间：2013-01-02T09:20:22.783
> 
> 标签：javafx-2, bar-chart

我正在 JavaFX 2.2 中动态创建一个 StockkedBarChart（请参见下面的代码片段）用于在图表中绘制相关条形的数据。

```
 final CategoryAxis xAxis = new CategoryAxis();
      final NumberAxis yAxis = new NumberAxis();

        List<String> itemTypes = new ArrayList<String>();
        vipTypes.add("Type A");
        vipTypes.add("Type B");
        vipTypes.add("Type C");

        xAxis.setCategories(FXCollections.<String>observableArrayList(itemTypes));

        m_barChart = new StackedBarChart<String,Number>(xAxis,yAxis);
        m_barChart.setTitle("Item Status");

        XYChart.Series upSer = new XYChart.Series();
        upSer.setName("UP"); 
        XYChart.Series downSer = new XYChart.Series();
        downSer.setName("Down");
        XYChart.Series unknownSer = new XYChart.Series();
        unknownSer.setName("Unknown");

     for(Item item: ItemsList)
        {
            upSer.getData().add(new XYChart.Data<String, Number>(item.getName(),        item.getCountOfUpItems());
            downSer.getData().add(new XYChart.Data<String, Number>(item.getName(),        item.getCountOfDownItems());
            unknownSer.getData().add(new XYChart.Data<String, Number>(item.getName(),      item.getCountOfUnknownItems());
        }

m_barChart.getData().addAll(upSer, downSer, unknownSer); 
```

我想做类似的事情：

```
 //get a specific bar.

   Node n = m_barChart.lookup("what should I look for??");

            if (n != null && n instanceof Path) 
            {
                final Path path = (Path) n;
                final Glow glow = new Glow(.8);
                path.setEffect(null);
                path.setOnMouseEntered(new EventHandler<MouseEvent>() 
                        {
                    @Override public void handle(MouseEvent e) 
                    {
                        path.setEffect(glow);
                    }
                        });
                path.setOnMouseExited(new EventHandler<MouseEvent>() {
                    @Override public void handle(MouseEvent e) {
                        path.setEffect(null);
                    }
                });
                        path.setOnMouseCLicked(new EventHandler<MouseEvent>() {
                    @Override public void handle(MouseEvent e) {
                        openDetailsScreen(<selected Bar>);
                    }
                });
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:56:27.097

您可以`Node`通过`XYChart.Data#getNode()`. 以下是应用于您的修改的示例：

```
private final Glow glow = new Glow(.8);

private void setupHover(XYChart.Series<String, Number> series) {
    for (final XYChart.Data<String, Number> dt : series.getData()) {
        final Node n = dt.getNode();

        n.setEffect(null);
        n.setOnMouseEntered(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent e) {
                n.setEffect(glow);
            }
        });
        n.setOnMouseExited(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent e) {
                n.setEffect(null);
            }
        });
        n.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent e) {
                System.out.println("openDetailsScreen(<selected Bar>)");
                System.out.println(dt.getXValue() + " : " + dt.getYValue());
            }
        });
    }
} 
```

在 m_barChart.getData().addAll(upSer, downSer, unknownSer) 之后调用此方法：

```
m_barChart.getData().addAll(upSer, downSer, unknownSer);
setupHover(upSer);
setupHover(downSer);
setupHover(unknownSer); 
```

通过 dt.getXValue() 和 dt.getYValue() 获取当前柱值。

# symfony - Symfony2 原则 GROUP BY

> ID：14119485
> 
> 赞同：0
> 
> 时间：2013-01-02T09:21:50.607
> 
> 标签：symfony, doctrine

我创建了一个 MONTH 函数来提取日期的月份。

我想用这些查询对结果进行 GROUP BY：

```
SELECT MONTH(p.publicationDateStart) AS archive 
FROM ApplicationSonataNewsBundle:Post p 
GROUP BY archive 
```

但这给了我错误：

```
An exception has been thrown during the rendering of a template 
("Notice: Undefined index: archive in 
/home/kiddo/Code/apache2/work/ibctal.dev/vendor/doctrine/orm/lib/Doctrine/ORM/Query
/SqlWalker.php line 2197") in ApplicationSonataNewsBundle:Post:archive.html.twig 
at line 10\. 
```

我该如何解决这个问题。

作为参考，我发现了学说提交的以下信息： [https](https://github.com/doctrine/doctrine2/commit/2642daa43851878688d01625f272ff5874cac7b2) ://github.com/doctrine/doctrine2/commit/2642daa43851878688d01625f272ff5874cac7b2 ：

**编辑 ：**

这是控制器代码

命名空间 Application\Sonata\NewsBundle\Controller；

使用 Symfony\Bundle\FrameworkBundle\Controller\Controller；使用 Doctrine\ORM\Query\ResultSetMapping；

```
class SidebarController extends Controller
{
    public function archiveAction()
    {
        $em = $this->getDoctrine()->getManager();
        $dql = "SELECT 
                    MONTH(p.publicationDateStart) AS archive, 
                    p.publicationDate AS HIDDEN archiveDate
                FROM 
                    ApplicationSonataNewsBundle:Post p 
                GROUP BY 
                    MONTH(archiveDate)";
        $query = $em->createQuery($dql);
        $paginator = $this->get('knp_paginator');
        $pager = $paginator->paginate($query, $this->get('request')->query->get('page', 1), 10);

        return $this->render('ApplicationSonataNewsBundle:Sidebar:archive.html.twig', array(
            'archives' => $pager
        ));
    } } 
```

仅供参考，我使用 2.3.1-DEV 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:26:55.953

为了同样的目的，我不得不使用类似的解决方法，看看我的解决方案：

```
SELECT 
    MONTH(p.publicationDateStart) as archive, 
    CAST(p.publicationDateStart as date) AS HIDDEN archiveDate 
FROM
    ApplicationSonataNewsBundle:Post p
GROUP BY 
    MONTH(archiveDate) 
```

# c# - 实体“有”联系人或实体“是”联系人

> ID：14119487
> 
> 赞同：0
> 
> 时间：2013-01-02T09:21:57.450
> 
> 标签：c#, design-patterns, architecture

当我构建 LOB 应用程序时出现了这个问题。问题是根据您的经验，将 Contact 关系建模为继承还是委托更好？
例如：
联系人：有名字、姓氏、全名、地址、电子邮件等。
客户拥有所有这些以及其他客户特定的东西。
经销商拥有所有这些以及其他经销商特定的东西。
A ..... has .... and .... etc
现在客户和经销商最好从 Contact 派生或拥有 Contact 参考？
**注意：**我知道这可能是一个争论的问题，但我想知道有经验的开发人员是如何解决这个问题的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:49:49.143

有一本书叫做分析模式，其中详细介绍了如何对这种结构（以及许多其他结构）进行建模。在本书中，继承用于对基`Party`类型进行建模，以后可以将其子类化为更具体的`Person`类`Organization`。你可以在这里找到一些信息[（pdf）](http://martinfowler.com/apsupp/accountability.pdf)。

我认为在这种情况下继承是一个很好的解决方案，因为您显然是在建模*is-a*关系。您只需要注意不要仅仅为了代码重用而滥用继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:01:36.883

您应该更喜欢组合而不是继承，尤其是在项目的第一阶段。如果这会给你带来显着的优势，那么将来你可能会选择*派对模式。*

（另请注意，该书指出，*使用 Party (5) 的明显情况是当您的模型中有人员和组织并且您看到共同行为时*。行为在这里具有优先权。一旦您对数据进行建模，就更喜欢组合）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:49:16.367

根据对这两个词的公认解释，客户*不是*一种联系人。

您不会仅仅因为它们都具有名称这一事实而使用继承对文件和人进行建模。尽管在某些（奇怪的）域中它们都继承自一个通用的“NamedThing”接口，但这可能是有意义的。

总而言之，在大多数情况下，我会选择“有一个”，但并非总是如此。

# android - 播放192Khz采样率的WAV文件（android不支持），下一曲播放不开始

> ID：14119490
> 
> 赞同：1
> 
> 时间：2013-01-02T09:21:58.843
> 
> 标签：android

首先，android不支持192KHZ采样率本身...因此，当我们尝试播放文件时，“播放器不支持这种类型的文件”消息将通知用户或下一首歌曲播放列表将自动开始播放。

我通过处理我们的重采样器可以处理的最大和最小采样率在 WAVExtractor 中解决了这个问题。修复工作非常好。但是，修复需要是通用的。

我想知道的是..“谁负责跳过不受支持的格式并转到下一个文件并播放它？？” 是媒体播放器应用程序根据从中间件级别接收到的适当消息做出此决定吗？

有多种方法可以在 android.one 中声明文件“不受支持”，例如“采样率”约束。不支持的格式的“跳过”并转到下一首歌曲到底在哪里处理？

# c# - 在窗口窗体中聚焦时更改按钮的背景颜色

> ID：14119493
> 
> 赞同：0
> 
> 时间：2013-01-02T09:22:17.877
> 
> 标签：c#, winforms, button, focus

我需要在焦点上更改按钮 BackColor。
现在我在按钮中使用`MouseOverBackColor`<= **Silver 。**
当我用鼠标聚焦按钮时，它的背景色变为**Silver**。
当我通过制表键或`.focus()`后面的代码聚焦按钮时，我想将它的背景色更改为**Silver**。
我应该使用哪个事件？
有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:25:49.803

为此，您可以使用`GotFocus`and`LostFocus`或`Enter`and事件。`Leave`

```
private void myBtn_GotFocus(object sender, EventArgs e)
{
    myBtn.BackColor = Color.Silver;
}

private void myBtn_LostFocus(object sender, EventArgs e)
{
    myBtn.BackColor = SystemColors.Control;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:28:04.827

为了保持一致性，您可以同时拥有`tab`并`mouseover`在焦点位于表单上时更改按钮颜色。

但是您需要覆盖低级别的 Got、LostFocus 事件。

```
protected override void OnLostFocus(EventArgs e)
{
    base.OnLostFocus(e);
}

protected override void OnGotFocus(EventArgs e)
{
    base.OnGotFocus(e);
} 
```

[参考](https://stackoverflow.com/questions/13355140/cant-find-gotfocus-lostfocus-in-my-user-control)

*   You may also try [enter and leave events](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.leave%28v=vs.80%29.aspx)

# visual-studio-2010 - 使用 msbuild 构建解决方案文件

> ID：14119498
> 
> 赞同：49
> 
> 时间：2013-01-02T09:22:39.253
> 
> 标签：visual-studio-2010, msbuild

我正要使用 msbuild 构建一个 Visual Studio 解决方案文件。我使用以下命令行来构建解决方案

```
msbuild.exe SolutionFile.sln /t:Build/p:Configuration=Release;Platform=Win32 
```

即使构建在某个时候开始，构建看起来也挂起并且无法向前推进，如下所示

```
Done Building Project "D:\SolutionPath\ProjectFile10.vcxproj" (default targets). 
```

我必须建立很多`.proj`。`SolutionFile.sln`

我必须使用`msbuild.exe`而不是`devenv.com`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-02T10:30:09.667

有一种技术可以诊断 msbuild 内部发生的事情，它可以帮助您弄清楚这里发生了什么。从命令提示符设置环境变量：

```
set msbuildemitsolution=1 
```

运行 msbuild 后，这将生成一个`.metaproj`文件。此文件是 msbuild 内部使用的文件，但随后会被删除。您可以阅读它以找出实际目标的名称。`Build`目标被扩展以显示它实际调用的内容。然后，您可以尝试使用`/t`msbuild 标志构建单个目标，以找出导致问题的目标。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-02T15:48:02.450

将详细程度属性设置为诊断并将输出保存到文件中。这将帮助您确定解决方案中的哪个项目挂起并帮助诊断您的问题。

命令行语法如下，将输出保存到名为 MyProjectOutput.log 的文件中：

```
msbuild SolutionFile.sln /t:build /fl /flp:logfile=MyProjectOutput.log;verbosity=diagnostic 
```

在您列出的命令中传递的 /t 目标之后似乎还需要一个空格来构建参数。

```
msbuild.exe SolutionFile.sln /t:Build /p:Configuration=Release;Platform=Win32 
```

另外，您确定每个项目都包含“Release”和“Win32”配置吗？您也可以尝试运行以下命令并查看编译的内容。Msbuild 将自动运行所需的默认目标和配置。

```
msbuild SolutionFile.sln 
```

您可以尝试的另一种选择是编译项目并查看生成的内容：

```
msbuild "D:\SolutionPath\ProjectFile10.vcxproj" /fl /flp:logfile=MyProjectOutput.log;verbosity=diagnostic 
```

# c# - 无法从 X509 证书中提取密钥

> ID：14119500
> 
> 赞同：0
> 
> 时间：2013-01-02T09:22:58.973
> 
> 标签：c#, cryptography, x509certificate

我低于异常

> ConsoleApplication1.exe 中出现“System.NullReferenceException”类型的未处理异常附加信息：对象引用未设置为对象的实例。

我正在尝试的是下面

```
RSACryptoServiceProvider rsacsp = (RSACryptoServiceProvider)Certificate.PrivateKey;

pubkey.Key = rsacsp.ExportParameters(false);

privkey.Key = rsacsp.ExportParameters(true); 
```

异常见于 pubkey.Key = rsacsp.ExportParameters(false);

# ruby-on-rails - 防止 factory_girl 加载 spec/factories/*.rb 文件

> ID：14119501
> 
> 赞同：4
> 
> 时间：2013-01-02T09:23:01.337
> 
> 标签：ruby-on-rails, rspec, rspec2, factory-bot

在一个`rails`项目中，我想放入`factory_girl`工厂`spec/support/factories/`而不是`spec/factories/`（因为后者已经包含“工厂”类的规范）。

这是我的`spec_helper.rb`：

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rails'
require 'capybara/rspec'

FactoryGirl.definition_file_paths = [File.join(Rails.root, 'spec', 'support', 'factories')]
# FactoryGirl.factories.clear
# FactoryGirl.reload

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.include FactoryGirl::Syntax::Methods
  config.include AuthenticationHelper
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
end 
```

但是当我运行时`rspec`，文件`spec/factories`仍然被加载两次（由两者`factory_girl`和`rspec`），导致重复的测试执行。

我认为`FactoryGirl.factories.clear`也不能帮助我，`FactoryGirl.reload`因为它们不会阻止运行测试。

有什么办法可以防止`factory_girl`加载`spec/factories/`吗？

（使用`ruby 1.9.3p327`, `rails 3.2.9`, `factory_girl 4.1.0`, `factory_girl_rails 4.1.0`, `rspec-core 2.12.2`, 和`rspec-rails 2.12.0`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:26:20.430

使用此行创建一个初始化程序（`config/initializers`例如中的任何文件`config/initializers/factory_girl.rb`）：

```
FactoryGirl.definition_file_paths.delete(File.join(Rails.root, 'spec/factories')) 
```

然后从 中删除您不需要的 line `FactoryGirl.definition_file_paths = ...`line 。`spec_helper.rb`

有关该方法的更多信息，请参阅[文档](http://rubydoc.info/github/thoughtbot/factory_girl/FactoryGirl.definition_file_paths)`definition_file_paths`。

# r - 如何使用表格列表

> ID：14119503
> 
> 赞同：2
> 
> 时间：2013-01-02T09:23:53.560
> 
> 标签：r, xml, list, web-scraping

使用 XML 包，我能够从网站上抓取 80 多个表，而且这个数字也会随着时间的推移而增长。它们本身的表不是很大，主要是 6x10（这个大小在表之间也随着时间的推移而变化）。可取的事实是 99% 的时间表将具有相同的列，即列名。例如：

```
 table[1]
 A B C D E F
 1 b b 2 2 b
 2 b b 2 2 b 

 table[2]
 A B C D E F
 1 c c 2 2 c
 2 c c 2 2 c 
```

我将如何将所有表格及其观察结果组合成单独的变量（每列=变量），同时确保每个变量中的观察结果保持与原始表格的链接（例如，通过附加变量）。

由于不同的表格指的是比赛中不同轮次的结果，因此我希望实现的最终结果是能够跟踪个人在比赛中的进步，并就此而言在任何一年的不同比赛中（我希望刮了很多桌子）。

任何人都可以传递的任何漂亮的**R**代码都会很棒，并且使用和/或分析大量信息的最佳实践的想法将是无价的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:47:31.493

在发布之前我还没有看到@flodel 解决方案，但使用基本包的想法是一样的。

```
dat1 <- read.table(text = '
A B C D E F
1 b b 2 2 b
2 b b 2 2 b',header=T)

dat2 <- read.table(text ='
A B C D E F
1 c c 2 2 c
2 c c 2 2 c',header=T) 
```

想法是将所有 data.frames 放在一个 list 中，然后处理它们。

```
ll <- list(dat1,dat2)   ## I assume your table in a list 
ll <- lapply(seq_along(ll),function(i)cbind(ll[[i]],id = i))
do.call(rbind,ll)

  A B C D E F id
1 1 b b 2 2 b  1
2 2 b b 2 2 b  1
3 1 c c 2 2 c  2
4 2 c c 2 2 c  2 
```

我认为您不需要将所有内容都放在一个大数据框架中，您可以将它们放在列表中。例如 ：

```
ll <- lapply(ll,function(dat){
  sum(rank(dat))  ## dummy rank function 
}) 
```

你会得到每轮的分数列表

```
 ll
[[1]]
[1] 105

[[2]]
[1] 105 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:39:44.153

两件事情：

1）为每个表添加一个 ID 列：

```
tables <- lapply(seq_along(tables), function(i) transform(tables[[i]], ID = i)) 
```

2) 要绑定/对齐可能不具有所有相同列的列，请使用`plyr::rbind.fill`：

```
library(plyr)
all.data <- do.call(rbind.fill, tables) 
```

你得到的是一个单独的 data.frame 保存你的所有数据。要像您要求的那样创建“单独的变量”，您可以使用`attach(all.data)`，但实际上不建议这样做。您最好将数据保存在 data.frame 中以供分析。

# javascript - 改变目标答案

> ID：14119509
> 
> 赞同：5
> 
> 时间：2013-01-02T09:24:18.040
> 
> 标签：javascript, jquery

我正在为孩子们创建一个“打地鼠”风格的教育游戏，其中给出了一个问题，他们必须点击正确的出现数字。例如，当给定“2+2”之类的总和时，孩子必须等待“4”出现并单击它。每次点击正确答案时问题都会改变，但问题是当新问题出现时没有正确答案并且您单击的每个数字都会增加错误分数。有人可以告诉我为什么这种情况一直发生。

这是总和的情况..

```
function correctlabels() {
    switch (Math.ceil(Math.random() * 9)) {
        case 1:
            check = sum1;
            $('#target').html('0 + 1 = ?');
            break;
        case 2:
            check = sum2;
            $('#target').html('1 + 1 = ?');
            break;
        case 3:
            check = sum3;
            $('#target').html('2 + 1 = ?');
            break;
        case 4:
            check = sum4;
            $('#target').html('2 + 2 = ?');
            break;
        case 5:
            check = sum5;
            $('#target').html('2 + 3 = ?');
            break;
        case 6:
            check = sum6;
            $('#target').html('3 + 3 = ?');
            break;
        case 7:
            check = sum7;
            $('#target').html('2 + 5 = ?');
            break;
        case 8:
            check = sum8;
            $('#target').html('2 + 6 = ?');
            break;
        case 9:
            check = sum9;
            $('#target').html('2 + 5 = ?');
            break;
    } 
```

这是一个小提琴来说明我的意思.. [http://jsfiddle.net/pUwKb/8/](http://jsfiddle.net/pUwKb/8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:34:03.890

我认为这是因为您从不重新添加“正确”的课程。尝试改变这个：

```
 $('.character').each(function (index, character) {
        if (!check(parseInt(this.getAttribute("value")))) {
            $(this).addClass("wrong");
            $(this).removeClass("right");
        }
    }); 
```

对此：

```
 $('.character').each(function (index, character) {
        if (!check(parseInt(this.getAttribute("value")))) {
            $(this).addClass("wrong");
            $(this).removeClass("right");
        } else {
            $(this).addClass("right");
            $(this).removeClass("wrong");
        }
    }); 
```

不错的游戏顺便说一句:)

# drupal - Drupal commerce - 来自产品名称的页面标题

> ID：14119511
> 
> 赞同：1
> 
> 时间：2013-01-02T09:24:27.087
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-commerce

我已经安装了一个 drupal 商务模块。我用一些产品做了一篇文章。所以我想在本文中将页面标题更改为从列表产品中选择的标题。我尝试使用 Page_title 模块，但没有我需要的令牌。

截图：[http ://s7.postimage.org/3svsccp0b/file.jpg](http://s7.postimage.org/3svsccp0b/file.jpg)

# java - javac有多聪明？

> ID：14119515
> 
> 赞同：1
> 
> 时间：2013-01-02T09:24:39.083
> 
> 标签：java, compiler-construction, javac

如果我要使用 javac 编译以下代码，编译器是否足够聪明，只能评估一次 codeInput.length()，或者我是否可以通过将受迭代器变量影响的评估放在首位来获得更快的程序？

```
// edit: The first character must be an upper case letter, the next four must be 
// edit: numeric and there must be exactly five characters in total in a product
// edit: code.

for (int i = 1; i < 5; i++)
    if (codeInput.length() != 5 || codeInput.charAt(i) < '0' 
        || codeInput.charAt(i) > '9' || codeInput.charAt(0) < 'A'
        || codeInput.charAt(0) > 'Z')
        {if (verbose) System.out.println("Sorry, I don't understand! 
            Use product codes only."); return true;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:30:29.293

作为一项规则；您应该编写最简单、最清晰的代码，这样会很好地执行。通常，性能问题与使代码更清晰更重要。在你的例子中，我会这样写。

```
static final Pattern CODE = Pattern.compile("[A-Z][0-9]{4}");

if (!CODE.matcher(codeInput).matches()) {
    if (verbose) 
        System.out.println("Sorry, I don't understand! Use product codes only.");
    return true;
} 
```

即使这稍微慢一些，维护恕我直言也更清晰，更容易

* * *

`javac`几乎没有优化，它们几乎都是由 JIT 在运行时执行的。

> 如果我用 javac 编译以下代码，编译器是否足够聪明，只计算一次 codeInput.length()，

不是，但，

> 或者我是否可以通过将受迭代器变量影响的评估放在首位来获得更快的程序？

这不像您会注意到差异，因为如果代码运行足够长的时间，JIT 就会启动，并且方法将被内联，从而不再需要局部变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T10:01:59.020

您的第一个目标应该是代码的简单性和可读性。对于像您提出的问题这样简单的问题，您真的必须竭尽全力将其变成性能瓶颈。最简洁、最灵活的字符串验证方法是正则表达式：

```
boolean valid = codeInput.matches("[A-Z][0-9]{4}");
if (!valid && verbose) 
   System.out.println("Sorry, I don't understand! Use product codes only.");
return !valid; 
```

如果你真的想要最后一点性能，你可以预编译正则表达式：

```
static final Pattern productCodeRegex = Pattern.compile("[A-Z][0-9]{4}");
boolean validate(String codeInput) {
  boolean valid = productCodeRegex.matcher(codeInput).matches();
  ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:29:50.567

是的，它将`codeInput.length()`在每次迭代中进行评估。`codeInput`如果是最终的或一次只能由一个线程访问，编译器可能能够进行优化。否则`codeInput`可以被当前线程不会注意到的另一个线程更改。

因此，程序员决定`codeInput.length()`跳出循环并利用提高的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T09:30:30.397

编译器必须创建`codeInput.length()`对每次迭代进行评估的代码，因为它不知道它是否会在每次迭代中返回相同的值。您知道这一点，因为您知道该课程的运作方式。但是编译器不知道它并且必须假设`codeInput`更改（例如由于调用`charAt()`）。

所以是的：您可以通过评估`codeInput.length()`一次并将结果分配给局部变量来获得一些性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T09:37:12.667

在这里聪明的不是*编译器，而是**JVM*。

现代 JVM 都具有 JIT（即时），这意味着代码将在旅途中进行优化。

不要费心尝试在 Java 中优化您的代码，只需编写*正确的*代码即可。JVM 将为您完成剩下的工作。

至于您的特定代码，如果您使用的是[Guava](http://code.google.com/p/guava-libraries/)，您可以`CharMatcher`在这里使用 a 来获得良好的效果：

```
private static final CharMatcher PRODUCT_CHARS
    = CharMatcher.inRange('A', 'Z')
        .or(CharMatcher.inRange('a', 'z'))
        .or(CharMatcher.inRange('0', '9'))
        .precompute();

// In the verification method:
if (!(codeInput.length() == 5 && PRODUCT_CHARS.matchesAllOf(codeInput)))
    badProductCode(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T18:36:58.027

Marko 的答案显然是该问题中编程努力的最佳答案之一。

但是，将其用作一般示例，从中可以推断出没有更好的解决方案（如 regexp 或 CharMatcher）的上下文，作为风格和实践的问题，我使用并推荐更简单的表达式，捕捉原本会重复的内容使用局部变量的方法调用结果。

我断言这提高了清晰度，因为我们可以命名局部变量，并允许我们将每段更简单的代码定位在最合乎逻辑的位置以执行（同时还允许 JVM 优化它真正擅长的一件事，即局部变量用法）。

您会注意到，在这个转换后的版本中，我们在循环外测试 firstChar，而不是在循环内重复测试；与 .length() 相同。我首先会认为这是逻辑上更正确的编程（它让其他读者感到困惑，为什么这可能会在循环中一遍又一遍地完成），其次才是它会有更好的性能。

虽然循环的这种代码运动不会对这个简单示例的性能产生实质性影响（仅计算 5 次迭代，并且在使用循环库为我们提供更好的解决方案的情况下），但在一般情况下和其他情况下，我建议这样做最佳实践，更易读，更简洁（同时也是面向性能的）。

另请注意，我首先测试长度，因此 .charAt(0) 已知存在，即长度> 0，这意味着我们将`reportError()`使用零长度字符串，而不是抛出一些.charAt(0) `IndexOutOfBounds`。这是另一个示例，说明使用更简单的表达式如何允许编程逻辑的高级排序。

这种 KIS（保持简单）风格也使调试更容易，因为这些局部变量可以很容易地被观察到。我认为它对维护者来说也更具可读性。

此外，将常量 5 限制在一个位置可以简化维护。

```
public static final int expectedLength = 5; 
```

...

```
if ( codeInput.length() != expectedLength )
    return reportError ();

char firstChar = codeInput.charAt(0);
if ( firstChar < 'A' || firstChar > 'Z' )
    return reportError (); 

for (int i = 1; i < expectedLength; i++) {
    char nextChar = codeInput.charAt(i);
    if ( nextChar < '0' || nextChar > '9' )
        return reportError ();
} 
```

...

```
private static boolean reportError () {
    if (verbose) 
        System.out.println("Sorry, I don't understand!\nUse product codes only."); 
    return true;
} 
```

# sql - 'stuff' 和 'for xml path('')' 来自 Postgresql 中的 SQL Server

> ID：14119517
> 
> 赞同：7
> 
> 时间：2013-01-02T09:24:40.190
> 
> 标签：sql, postgresql, string-aggregation

我正在将一些 SQL Server 2008R2 查询迁移到 Postgresql 9.0，但遇到了一些问题。这是 SQL Server 查询：

```
stuff((select ', '+p.[NAME] as 'data()' 
from BPROVIDERS_PROVIDER p, BORDER_ARTICLEORDERPROVIDER aop 
where p.OID = aop.PROVIDER for xml path('')),1,1,'')) as pNAMES 
```

阅读 SQL Server 文档我知道这会创建一个逗号分隔的列表。我认为我可以将`stuff`函数更改为`overlay`在 Postresql 中运行。我对么？

第二个问题来自带有`for xml path`('') 作为参数的 SQL Server。它返回分配给名为`pNAMES`而不是创建行元素的属性的值。那是对的吗？

`Query_to_xml()`具有属性的Postgresql 函数是否`tableforest = 'true'`相同？

谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-02T09:56:37.500

你可以`string_agg`改用。

[SQL小提琴](http://sqlfiddle.com/#!1/c28d1/2)

**PostgreSQL 9.1.6 架构设置**：

```
create table T
(
  Name varchar(10)
);

insert into T values('Kalle');
insert into T values('Pelle');
insert into T values('Urban'); 
```

**查询 1**：

```
select string_agg(Name, ',') as Names
from T 
```

**[结果](http://sqlfiddle.com/#!1/c28d1/2/0)**：

```
|             NAMES |
---------------------
| Kalle,Pelle,Urban | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-22T11:07:21.170

STUFF((SELECT DISTINCT ', ' + CONVERT(VARCHAR,L.ROLE_SUB_CAT_ID) FROM [PHS].[dbo].PHS_ADMIN_USER_ACCESS_DTL K, [PHS].[dbo].[PHS_ADMIN_USER_ROLE_SUB_CAT_MST] L 其中 L.ROLE_SUB_CAT_ID = K.ROLE_SUB_CAT_ID 和K.UMC_ID = A.UMC_ID AND K.CCR_ID = A.CCR_ID FOR XML PATH('')), 1, 1, '') AS ROLE_SUB_CAT_ID

像这样将其转换为 postgresql：

string_agg((SELECT distinct ', ' || cas​​t(L.ROLE_SUB_CAT_ID as VARCHAR) FROM PHS.dbo.PHS_ADMIN_USER_ACCESS_DTL K, PHS.dbo.PHS_ADMIN_USER_ROLE_SUB_CAT_MST L WHERE L.ROLE_SUB_CAT_ID = K.ROLE_SUB_CAT_ID AND K.UMC_ID = A.UMC_ID AND K .CCR_ID=A.CCR_ID ), 1, 1, '') AS ROLE_SUB_CAT_ID

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-21T04:24:20.950

**STUFF() 与 XML PATH**

**相同的 teble 来记录 STUFF**

```
SELECT distinct C.country, X.ProductList FROM     
tbl_demo as C     
CROSS APPLY    
(    
SELECT STUFF    
      (    
          (    
              SELECT 
                    distinct 
                        ',' + P.product 
                    FROM 
                        tbl_demo AS P    
                    JOIN 
                        tbl_demo AS CP 
                    ON 
                        P.country = CP.country     
                    WHERE 
                        CP.sub_id = C.sub_id    
                    FOR XML PATH('')    
          )    

      ,1,1,'') as ProductList    
) as X 
```

# tomcat - 由于 8080 端口繁忙，Netbeans 无法启动 Tomcat

> ID：14119518
> 
> 赞同：1
> 
> 时间：2013-01-02T09:24:43.100
> 
> 标签：tomcat, netbeans

那是问题：我在 Ubuntu 12.04 中使用 Netbeans + 安装的 Tomcat 6。我将 Tomcat 集成到 Netbeans 中，我可以在节点“服务器”中看到他。当我尝试运行我的应用程序时，我收到错误 - 无法启动 Tomcat。8080 端口很忙（我用的是俄语版，但感觉是有的）。

所以，问题是：如何检查阻止 Tomcat 的服务是什么？我可以停止这项服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:27:54.407

您可以使用以下命令获取进程名称和编号。

```
netstat -anp | grep 8080 
```

你可以用[kill](http://linux.die.net/man/1/kill)命令杀死

# php - 通过 php exec() 运行 mysqldump，管道到 gzip，返回 mysqldump stderr

> ID：14119520
> 
> 赞同：3
> 
> 时间：2013-01-02T09:24:46.497
> 
> 标签：php, error-handling, exec, mysqldump

**解决方法见底部**

我`mysqldump`作为通过 cron 作业调用的 php 脚本的一部分运行。

是否可以`stderr`从 mysqldump 命令返回，也许将其分配给可以直接读取的变量？或者是否可以分配`stderr`给命令的`output`或？`return_var``exec()`

使用的基本命令：

```
$dump_cmd = 'mysqldump -u username -pPassword db_name --tables db_table --where="field1 = abc" | gzip -c > dumpfile.sql.gz';

exec( $dump_cmd, $dump_cmd_output, $dump_cmd_return_var ); 
```

`output`和`return_var`from`exec()`没有帮助：

`$dump_cmd_output`为空，因为输出通过管道传输到 gzip。

`$dump_cmd_return_var`显示来自 gzip 的返回状态。

* * *

我知道其他方法可以查看 mysqldump 运行时是否出现任何错误：

我可以在不压缩的情况下进行转储，检查`$dump_cmd_return_var`返回状态，然后将 gzip 作为附加命令运行。

```
$dump_cmd = 'mysqldump -u username -pPassword db_name --tables db_table --where="field1 = abc" --result-file="dumpfile.sql"';

$zip_cmd = 'gzip dumpfile.sql';

exec( $dump_cmd, $dump_cmd_output, $dump_cmd_return_var );

if($dump_cmd_return_var == 0) {
  exec( $zip_cmd, $zip_cmd_output, $zip_cmd_return_var );
} 
```

* * *

我可以`stderr`使用 mysqldump 的选项从 mysqldump 发送到文件`--log-error=dump_errors.txt`：

```
$dump_cmd = 'mysqldump -u username -pPassword db_name --tables db_table --where="field1 = abc" --log-error=dump_errors.txt | gzip -c > dumpfile.sql.gz'; 
```

* * *

或者通过`stderr`在管道之前发送到文件`2> dump_errors.txt`：

```
$dump_cmd = 'mysqldump -u username -pPassword db_name --tables db_table --where="field1 = abc" 2> dump_errors.txt | gzip -c > dumpfile.sql.gz'; 
```

* * *

或者我可以尝试使用`proc_open()`. 虽然我预计我会遇到与 相同的问题`exec()`，但执行命令 ( `return_var`) 的返回状态显示了 gzip 返回的状态。

* * *

如果任何错误直接返回或发送到可从脚本访问的变量，那会更干净（不太复杂），所以我很好奇这是否可能。

* * *

**解决方案：**

@user1281385 有一个很好的解决方案。为了更好的理解，我搜索了一下：
“bash PIPESTATUS[0]”

一个结果使用了这个确切的场景（mysqldump 通过管道传输到 gzip）。这是任何想要了解更多信息的人的链接：
[Bash - 如何检查管道命令的退出状态](http://scratching.psybermonkey.net/2011/01/bash-how-to-check-exit-status-of-pipe.html)

这是我使用它的方式：

```
$dump_cmd = 'mysqldump -u username -pPassword db_name --tables db_table --where="field1 = abc" | gzip -c > dumpfile.sql.gz';

system("bash -c '".$dump_cmd." ; exit \${PIPESTATUS[0]}'", $dump_cmd_return);

if($dump_cmd_return == 0) {
  Do some other stuff;
} 
```

基本上，mysqldump 命令是第一个执行的命令，因此它的返回值存储为 PIPESTATUS 数组的第一个值（键 [0]）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:32:33.227

`proc_open`是我使用的唯一方法

[Exec() 之后的 PHP StdErr](https://stackoverflow.com/questions/2320608/php-stderr-after-exec)

一个类似的问题

如果它只是你的标准错误，你可以将标准输出重定向到无处和标准错误到标准输出

或使用 PIPESTAUS

system("bash -c 'your_command ; 退出 \${PIPESTATUS[0]}'", $return);

管道状态需要通过与 sh 兼容的东西来调用。在这种情况下，bash。

bash -c 通过 bash 运行命令，PIPESTATUS 将显示管道每个部分的数组。

# javascript - 获取动态创建行的索引

> ID：14119522
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:24:50.647
> 
> 标签：javascript, html

我正在制作一个 Web 应用程序，在该应用程序中动态创建行并将点击侦听器添加到每个动态添加的行。但我不知道如何获取行索引并将一些变量传递给侦听器。

```
for(var i=0; i<len; i++)  {      
    var TABLE = document.getElementById('tableId');
    var BODY = TABLE.getElementsByTagName('tbody')[0];

    //making a row
    var TR = document.createElement('tr');
    TR.className = "section group";

    //creating first column
    var TD = document.createElement('td');
    TD.className = "col span_1_of_3";

    //adding click listener
    url_array[count] = result.details[count].video_url;
    TR.addEventListener('click', function(e) {
        console.log(count,e);  //     ---------> 1 
    });

    count++;
} 
```

在指示的行中`---> 1`，我有一个全局变量计数初始化为零，它的值是最后一行索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:32:40.950

这是一个范围界定问题。当`click`处理程序触发时，然后`count`设置为最后一个。尝试`.addEventListener`使用匿名函数包装您的方法：

```
(function(count){
    TR.addEventListener('click', function(e) {
        console.log(count,e);  //     ---------> 1 
    });
})(count); 
```

这将起作用，因为与`for`循环不同，函数会创建单独的范围。

# sql-server - EntityFramework 因来自 MVC Web Api 的多个 SELECT 请求而失败

> ID：14119527
> 
> 赞同：0
> 
> 时间：2013-01-02T09:25:15.013
> 
> 标签：sql-server, asp.net-mvc, entity-framework, asp.net-web-api, dbcontext

目前我正在使用 MVC4 的 Web Api 功能构建一个 api，使用 EntityFramework 4 并禁用延迟加载和代理创建。由于我正在迁移现有的 MySQL 数据库，因此我使用了数据库优先策略。

我的服务器在带有 IIS 8 和 Microsoft SQL Server 2012 的 Windows Server 2012（目前仍然是 Datacenter RC）上运行。

我认为我遇到的问题不属于“功能”类别，而更多来自“性能”类别。例如，我有一个 Person 对象。这个对象有一个孩子列表和一个城市对象（带有城市的基本信息）：

```
[DataContract(IsReference = true)]
public partial class Person
{
    public Person()
    {
        this.Children = new HashSet<Children>();
    }

    [DataMember]
    public int ID { get; set; }
    [DataMember]
    public int ParentID { get; set; }
    [DataMember]
    public int CityID { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public int Age { get; set; }

    [DataMember]
    public virtual ICollection<Person> Children { get; set; }
    [DataMember]
    public City City { get; set; }
}

[DataContract(IsReference = true)]
public partial class City
{
    [DataMember]
    public int ID { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public int Residents { get; set; }
}

Note: These classes are generated by EntityFramework/DBContext 
```

这些类在 PersonsController 中使用，以使用 httpget 从人员那里检索信息：

```
public class PersonsController : ApiController
{
    private MyEntities db = new MyEntities();

    [HttpGet]
    public Person Get(int id, bool getChildren = false, bool getCity = false)
    {
        Person person = this.db.Persons.SingleOrDefault(p => p.ID == id);
        if (person == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        if (getChildren)
        {
            person.Children = this.db.Persons.Where(c => c.ParentID == person.ID)
        }

        if (getCity)
        {
            person.Customer = this.db.Cities.SingleOrDefault(r => r.ID == person.CityID);
        }

        return person;
    }
} 
```

首先，我希望有人能给我一些信息，如果这是在 Web Api 中使用 EntityFramework 的正确方法，尤其是创建 db 对象。我已经阅读了多篇关于创建所谓的存储库类的文章，但我选择不这样做。

现在我正在为这个问题创建这个问题；当我执行请求以获取 ID 为 1 的人员的信息时，一切顺利。还将 GetChildren 和 getCity 参数设置为 true。（这适用于数据库中所有可用的人）。但是，这是在当时执行一个请求时。当我使用 Fiddler 在彼此之后快速执行相同的请求时，在几个请求之后开始出现 500 错误。然后几个请求再次正常，然后失败了几次，等等。

当请求失败时，会出现以下错误消息之一： 不允许新事务，因为会话中正在运行其他线程。或 无法执行事务操作，因为有处理此事务的待处理请求。

所以这实际上说的是他不能创建一个新事务，因为这个会话中有其他线程，而且它不能向事务添加请求，因为队列已经准备好了。

希望你明白这真的很烦人，因为这也可能发生在 api 上线并被多个用户同时使用时。

有谁知道如何解决上述错误？请检查我上面的实现示例，也许它不是最佳的:)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:23:37.827

您可以通过将“MultipleActiveResultSets=True”添加到连接字符串来启用[MARS](https://stackoverflow.com/questions/10478693/multipleactiveresultsets-in-entity-framework-4-1-code-first)以解决此问题。您必须启用 MARS 的原因是您在单个连接（即 DbContext）上执行多个查询。

另一种更好的方法是不启用 MARS 并通过执行此操作来优化您的操作以执行单个查询（Entityframework [eager loading）](http://msdn.microsoft.com/en-us/data/jj574232.aspx)。这具有调用单个查询与 3 个查询（最坏情况）的优势。

```
public class PersonsController : ApiController
{
    private MyEntities db = new MyEntities();

    public Person Get(int id, bool getChildren = false, bool getCity = false)
    {
        var people = this.db.Persons;

        if(getChildren)
        {
            people = people.Include("Children");
        }

        if(getCity)
        {
            people = people.Include("City");
        }

        Person person = people.SingleOrDefault(p => p.ID == id);
        if (person == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        return person;
    }
} 
```

# javascript - 我怎样才能在 Telerik 网格 mvc3 中获得不可见的列

> ID：14119528
> 
> 赞同：0
> 
> 时间：2013-01-02T09:25:15.683
> 
> 标签：javascript, jquery, asp.net-mvc-3, telerik

我有一个网格，我用这段代码隐藏了一些列：

```
foreach (var attr in grid.Attr)
    .Columns(columns =>
    {
       columns.Bound(attr.key)
         .Width(attr.width)
         .Visible(attr.isVisible);
    }) 
```

如何访问所有不可见的列？如果我使用命令“Hidden()”，那么解决方案是这样的：

```
var grid = $("#ELISAAssay").data("tGrid");
var hidden = $.grep(grid.columns, function(column) { return column.hidden });
hidden = $.map(hidden, function(column) { return column.member }); 
```

但是，它不适用于 visible() 命令。

谢谢，RM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:20:23.133

一种快速的方法是将一个类添加到所有不可见的列，然后通过类选择器访问这些列，例如

```
.Columns(columns =>
{
   columns.Bound("")
     .Width(90)
     .Visible(false)
     .HtmlAttributes(new{class="hiddenCol"});
}) 
```

然后像访问它

```
$(function(){
  console.log($(".hiddenCol"));
}); 
```

# macos - 检查像素颜色并触发 bash 脚本

> ID：14119530
> 
> 赞同：3
> 
> 时间：2013-01-02T09:25:24.350
> 
> 标签：macos, bash, applescript, compare, pixel

我们如何检查确定的像素（x，y）的颜色，如果它等于某个值，则运行 bash 脚本。

特别是我想写一个脚本：

1.  等待确定的键被按下（特别是“j”或“f”或“空格”或“y”）。
2.  将 4 个像素的颜色与一种颜色进行比较。如果我们发现一个或多个（如果有更多，我们可以选择第一个或随机一个），我们可以转到第 2 步。
3.  运行 bash 脚本。
4.  转到步骤 1。

我只知道如何完成第 3 步，前 2 步超出了我的编码技能。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:53:31.333

我不知道第一步，但您可以截屏并使用 ImageMagick[打印像素的颜色](http://www.wizards-toolkit.org/discourse-server/viewtopic.php?f=1&t=15912)。

```
tmp=/tmp/$(uuidgen).png
trap "rm $tmp" exit
screencapture $tmp
/usr/local/bin/convert $tmp[1x1+1000+500] $tmp[1x1+1100+500]\
$tmp[1x1+1000+510] $tmp[1x1+1100+510] txt: | grep '#FFFFFF' || exit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T03:07:48.767

至于检查击键，我使用这个命令行工具：

[http://www.klieme.ch/pub/checkModifierKeys.zip](http://www.klieme.ch/pub/checkModifierKeys.zip)

，这在 macscripter.net 上进行了讨论（抱歉，不能将此作为链接发布）。这个命令行命令的使用方式与我在下面描述的类似（“do shell script”）。另一个命令行工具用于获取鼠标的像素位置：

www.bluem.net/en/mac/cliclick/

*（再次，很抱歉无法将此作为链接发布）。*

为了获得像素颜色...

请参阅我关于为此使用 python 的博客文章（我的方法基于类似的解决方案）： [http ://thechrisgreen.blogspot.com/2013/04/python-script-for-getting-pixel-color.html](http://thechrisgreen.blogspot.com/2013/04/python-script-for-getting-pixel-color.html)

我有一个 AppleScript 脚本，它使用这个 python 脚本执行“执行 shell 脚本”，将变量“rgb”设置为（字符串）结果，然后执行

```
run script rgb 
```

这会给你一个像

```
{255,255,255} 
```

在游戏中看到这个相当晚......我猜这是为未来的冲浪者准备的......

# breeze - 如何授权 BreezeController webapi 调用

> ID：14119531
> 
> 赞同：0
> 
> 时间：2013-01-02T09:25:25.043
> 
> 标签：breeze

我创建了一个新的 MVC4 应用程序并安装了 nuget 包 Breeze.MVC4WebApiClientSample

在 BreezeSampleController 中，我添加了一个“Authorize”属性。当我浏览到这里 `http://localhost:XXXXX/api/BreezeSample/todos`时，我仍然可以看到数据。

如何授权通话？我试图删除 BreezeController 属性并添加这些 [ODataActionFilter, JsonFormatter] 但我有另一个错误（控制器“帖子”上的操作“帖子”.....不支持查询）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:30:48.000

从微风 v0.82.1 开始，现在应该已修复此问题。BreezeController 属性将不再导致删除任何授权属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:24:39.680

My bad. The [BreezeController] attribute was too aggressive in removing ambient action filters; it apparently removed the filter responsible for the [Authorize] attribute. I have a fix that is currently under review.

The "[ODataActionFilter, JsonFormatter]" formula didn't suffer from this problem because it didn't remove any existing filters. Of course that was a problem too. **If you used the new ASP.NET MVC SPA template ... and I think you are! ... then its QueryFilterProvider conflicted with our ODataActionFilter** ... which is why we invented the [BreezeController] attribute and why, I think, that you're getting the error about not supporting querying. Can you confirm that you built your app from that SPA template?

Btw ... what 'Posts' action are you talking about? The "Breeze.MVC4WebApiClientSample" does not have such an action.

In any case, we expect to have the [BreezeController] attribute working properly with [Authorize] very soon.

# python - 使用python发布以下请求

> ID：14119533
> 
> 赞同：0
> 
> 时间：2013-01-02T09:25:40.537
> 
> 标签：python, http-post

我是 python 新手

如何使用 python 发布以下内容，我需要登录 CISCO VNMC 并登录并从输出中获取 cookie，然后注销

```
 POST https://10.193.34.70/xmlIM/mgmt-controller

 Please enter content (application/x-www-form-urlencoded) to be POSTed:

 <aaaLogin 

    inName="admin" 

    inPassword="cisco@123"/> 
```

[http://www.cisco.com/en/US/docs/unified_computing/vnmc/sw/1.3/VNMC_API_Reference_Guide/VNMC_XML_API_2chap2.html#wp1162932](http://www.cisco.com/en/US/docs/unified_computing/vnmc/sw/1.3/VNMC_API_Reference_Guide/VNMC_XML_API_2chap2.html#wp1162932)

建议我这样做的一些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:45:55.870

[http://docs.python.org/2/library/httplib.html](http://docs.python.org/2/library/httplib.html)

您可以执行第一个请求，从响应中获取 cookie，以及您需要对这个模块执行的任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:52:05.463

使用最先进的 Python**请求模块**

[http://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)

# kendo-ui - 删除时的 Kendo DatePicker 更改事件

> ID：14119535
> 
> 赞同：0
> 
> 时间：2013-01-02T09:25:54.530
> 
> 标签：kendo-ui

有人可以告诉我如何在使用 DELETE 键或退格键删除内容时触发 kendo DatePicker 元素的更改事件。我需要更新另一个剑道 DatePicker 的最大日期。即使我在第一个剑道 DatePicker 上删除/清除日期，第二个 DatePicker 也没有得到更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:26:53.170

我**不**建议您使用它，但是您可以像这样手动触发更改事件：

```
$('#dPicker').data().kendoDatePicker.element.on('keydown',function(e){
      if(e.keyCode==8) //backspace
      {
           $(this).data().kendoDatePicker.trigger('change');
      }

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:45:16.407

```
$("#datepicker").kendoDatePicker().bind("change", function(e) {
//handle change event here
}): 
```

这将为您提供更改事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T12:22:19.783

```
$('some selector').bind('keyup', function (e) { $(this).data().kendoDatePicker._blur() }) 
```

# c++ - 如何将仅资源 dll 转换为十六进制格式 *.cpp 文件？

> ID：14119538
> 
> 赞同：0
> 
> 时间：2013-01-02T09:26:00.677
> 
> 标签：c++, windows, mfc

我有一些仅限资源的 dll，我想将它们转换为十六进制格式的 *.cpp 文件。稍后从 *.cpp 文件中获取资源。但是，我不知道该怎么做。

这是 *.cpp 格式（示例格式）？

```
unsigned long g_XXXResourceMap[172] = 
{
    0x7725,0xa,0x0,0xd21,0x7726, 0xa,0xd21,0xf99,0x7727, 0xa,0x1cba,0xe15,0x7728, 0xa,0x2acf,0xd7f,
    0x7729,0xa,0x384e,0xcf2,0x772a, 0xa,0x4540,0xc75,0x772b, 0xa,0x51b5,0x128a,0x772c, 0xa,0x643f,0xda1,
    0x772d,0xa,0x71e0,0xf51,0x7744, 0xa,0x8131,0xda5,0x7745, 0xa,0x8ed6,0xcc2,0x7746, 0xa,0x9b98,0xe18,
};

unsigned char g_XXXResourceArray[55001] = 
{
    0x78,0x9c,0x1,0x16,0xd,0xe9,0xf2,0x89,0x50,0x4e,0x47,0xd,0xa,0x1a,0xa,
    0x0,0x0,0x0,0xd,0x49,0x48,0x44,0x52,0x0,0x0,0x0,0x18,0x0,0x0,0x0,0x18,
    0x8,0x6,0x0,0x0,0x0,0xe0,0x77,0x3d,0xf8,0x0,0x0,0x0,0x9,0x70,0x48,0x59,
    0x73,0x0,0x0,0xb,0x13,0x0,0x0,0xb,0x13,0x1,0x0,0x9a,0x9c,0x18,0x0,0x0,
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T13:33:39.200

看看这个，我花了几个小时来实现它。注意：代码使用 C++ 11、STL 和 Lambda。我用Visual Studio 2010编译，代码如下：

```
#include "stdafx.h"
#include "function.h"

/*
0: type
1: name
2: Lang
*/
typedef std::tuple<VARIANT, VARIANT, DWORD> resInfoTuple;

// Declare callback functions. 
BOOL EnumTypesFunc( 
    HANDLE hModule, 
    LPTSTR lpType, 
    LONG lParam); 

BOOL EnumNamesFunc( 
    HANDLE hModule, 
    LPCTSTR lpType, 
    LPTSTR lpName, 
    LONG lParam); 

BOOL EnumLangsFunc( 
    HANDLE hModule, 
    LPCTSTR lpType, 
    LPCTSTR lpName, 
    WORD wLang, 
    LONG lParam); 

void rawData2Hex(
    CCodec_ModuleMgr*,
    HMODULE hRes, 
    std::wofstream& wofs, 
    const wchar_t* wsInxAryName, 
    const wchar_t* wsDataAryName, 
    std::vector<resInfoTuple>& vecResInfo
    );

namespace omg
{
    int res2C(
        const wchar_t* szFileName, 
        const wchar_t* wsInxAryName, 
        const wchar_t* wsDataAryName,
        const wchar_t* outFileName
        ) 
    {
        // Load the .EXE whose resources you want to list. 
        auto hRes = LoadLibrary(szFileName); 
        if (hRes == NULL) 
        {
            // Add code to fail as securely as possible.
            return -1;
        } 

        std::wofstream wofs;
        std::vector<resInfoTuple>vecResInfo;

        CCodec_ModuleMgr *  pCodecModuleMgr = nullptr;
        CPDF_Document*      pDoc = nullptr;
        CPDF_Parser*        pParser = nullptr;

        //initialization
        pCodecModuleMgr = CCodec_ModuleMgr::Create();
        CFX_GEModule::Create();
        CFX_GEModule::Get()->SetCodecModule(pCodecModuleMgr);
        CPDF_ModuleMgr::Create();
        CPDF_ModuleMgr* pModule = CPDF_ModuleMgr::Get();
        if (pModule)
        {
            pModule->SetCodecModule(pCodecModuleMgr);
            pModule->InitPageModule();
            pModule->InitRenderModule();
        }

        auto bRes = EnumResourceTypes(hRes,  // module handle 
            (ENUMRESTYPEPROC)EnumTypesFunc,  // callback function 
            (LONG_PTR)&vecResInfo);          // extra parameter 
        if(!bRes) return -1;

        wofs.open(outFileName, std::ios_base::ate/* | std::ios_base::binary*/);
        rawData2Hex(pCodecModuleMgr, hRes, wofs, wsInxAryName, wsDataAryName, vecResInfo);

        // Unload the executable file whose resources were 
        // enumerated and close the file created to contain 
        // the resource information. 
        FreeLibrary(hRes); 

        wofs.close();

        pCodecModuleMgr->Destroy();
        CFX_GEModule::Destroy();
        CPDF_ModuleMgr::Destroy();

        return 0;
    }//--end res2C

}//--end namespace::omg

//    FUNCTION: EnumTypesFunc(HANDLE, LPSTR, LONG) 
// 
//    PURPOSE:  Resource type callback 
BOOL EnumTypesFunc( 
    HANDLE hModule,   // module handle 
    LPTSTR lpType,    // address of resource type 
    LONG lParam)      // extra parameter, could be 
    // used for error checking 
{ 
    // Find the names of all resources of type lpType. 
    EnumResourceNames((HMODULE)hModule, 
        lpType, 
        (ENUMRESNAMEPROC)EnumNamesFunc, 
        lParam); 

    return TRUE; 
} 

//    FUNCTION: EnumNamesFunc(HANDLE, LPSTR, LPSTR, LONG) 
// 
//    PURPOSE:  Resource name callback 
BOOL EnumNamesFunc( 
    HANDLE hModule,   // module handle 
    LPCTSTR lpType,   // address of resource type 
    LPTSTR lpName,    // address of resource name 
    LONG lParam)      // extra parameter, could be 
    // used for error checking 
{ 
    // Find the languages of all resources of type 
    // lpType and name lpName. 
    EnumResourceLanguages((HMODULE)hModule, 
        lpType, 
        lpName, 
        (ENUMRESLANGPROC)EnumLangsFunc, 
        lParam); 

    return TRUE; 
} 

//    FUNCTION: EnumLangsFunc(HANDLE, LPSTR, LPSTR, WORD, LONG) 
// 
//    PURPOSE:  Resource language callback 
BOOL EnumLangsFunc( 
    HANDLE hModule,  // module handle 
    LPCTSTR lpType,  // address of resource type 
    LPCTSTR lpName,  // address of resource name 
    WORD wLang,      // resource language 
    LONG lParam)     // extra parameter, could be 
    // used for error checking 
{
    std::vector<resInfoTuple>& vecResInfo = *(std::vector<resInfoTuple>*)lParam;
    HANDLE hResInfo; 
    size_t cbString = 0; 

    hResInfo = FindResourceEx((HMODULE)hModule, lpType, lpName, wLang); 

    VARIANT varType = {0};
    VARIANT varName = {0};
    if ((ULONG)lpType & 0xFFFF0000) 
    {
        varType.vt = VT_BSTR;
        varType.bstrVal = _bstr_t(lpType);
    }
    else 
    {
        varType.vt = VT_UI2;
        varType.uiVal = (USHORT)lpType;
    }

    if ((ULONG)lpName & 0xFFFF0000) 
    {
        varName.vt = VT_BSTR;
        varName.bstrVal = _bstr_t(lpName);
    }
    else 
    {
        varName.vt = VT_UI2;
        varName.uiVal = (USHORT)lpName;
    }
    vecResInfo.push_back(std::make_tuple(varType, varName, wLang));

    return TRUE; 
} 

void rawData2Hex(
    CCodec_ModuleMgr* pCodecModuleMgr,
    HMODULE hRes, 
    std::wofstream& wofs, 
    const wchar_t* wsInxAryName, 
    const wchar_t* wsDataAryName,
    std::vector<resInfoTuple>& vecResInfo)
{
    using namespace std;
    unsigned __int64  offset = 0;
    size_t lineFeedFlag = 1;

    wstringstream wss;
    wss << endl;
    std::vector<FX_BYTE> vecBytes;
    wss << L"unsigned long " << wsInxAryName << L"[" 
        //<< vecResInfo.size() * 4
        << "] = " << endl << "{" << endl;

    auto inxAry2Hex = 
    [pCodecModuleMgr, &wss, &vecBytes, &hRes, &lineFeedFlag, &offset]
    (resInfoTuple& param, const wchar_t* format) mutable -> void
    {
        auto varType = std::get<0>(param);
        auto varName = std::get<1>(param);
        auto wLang = std::get<2>(param);

        bool bRawData = (VT_BSTR == varType.vt);
        HRSRC hResInfo = nullptr;       
        hResInfo = FindResourceEx((HMODULE)hRes, 
            bRawData ? (LPCTSTR)varType.bstrVal : (LPCTSTR)varType.uiVal, 
            (VT_BSTR == varName.vt) ? (LPCTSTR)varName.bstrVal : (LPCTSTR)varName.uiVal, wLang); 

        CString strOut;
        auto srcSize = SizeofResource(hRes, hResInfo);
        auto hData = LoadResource((HMODULE)hRes, hResInfo);
        auto pSrcData = (unsigned char*)LockResource(hData);

        FX_LPBYTE pDestBuf = nullptr;
        FX_DWORD destSize = 0;
        if(2 != varType.uiVal)
            FlateEncode(pSrcData, srcSize, pDestBuf, destSize);
        else
        {
            auto pBasicModule = pCodecModuleMgr->GetBasicModule();
            ASSERT(nullptr != pBasicModule);
            pBasicModule->RunLengthEncode(pSrcData, srcSize, pDestBuf, destSize);
        }

        vecBytes.insert(vecBytes.end(), pDestBuf, pDestBuf + destSize);

        UnlockResource(pSrcData);
        FreeResource(hData);

        /*name / id, type, offset, size*/
        strOut.Format(format, varName.uiVal, bRawData ? 10 : varType.uiVal, offset, destSize);
        if(1 == lineFeedFlag)
            wss << '\t';
        wss << strOut.GetBuffer();
        if(0 == lineFeedFlag % 2)
        {
            lineFeedFlag = 1;
            wss << std::endl;
        }else
            ++lineFeedFlag;

        offset += destSize;
    };
    if(vecResInfo.size() > 0)
    {
        auto& param = *vecResInfo.begin();
        inxAry2Hex(param, _T("0x%08x, 0x%08x, 0x%08llx, 0x%08x"));
    }

    for(auto iter = vecResInfo.begin() + 1; iter != vecResInfo.end(); ++iter)
    {
        auto& param = *iter;
        inxAry2Hex(param, _T(", 0x%08x, 0x%08x, 0x%08llx, 0x%08x"));
    }//--end for each(auto& param in vecResInfo)    
    wss << endl << L"};" << endl << endl;

    lineFeedFlag = 1;
    wss << L"unsigned char " << wsDataAryName << L"["
        //<< vecBytes.size() 
        << "] = " << endl << "{" << endl;

    if(vecBytes.size() > 0)
    {
        FX_BYTE param = *vecBytes.begin();
        CString strOut;
        strOut.Format(_T("0x%02x"), param);

        wss << '\t' << strOut.GetBuffer();

        ++lineFeedFlag;
    }
    for_each(vecBytes.begin() + 1, vecBytes.end(), 
        [lineFeedFlag, &wss](FX_BYTE param) mutable
    {
        CString strOut;
        strOut.Format(_T(", 0x%02x"), param);
        if(1 == lineFeedFlag)
            wss << '\t';
        wss << strOut.GetBuffer();
        if(0 == lineFeedFlag % 21)
        {
            lineFeedFlag = 1;
            wss << std::endl;
        }else
            ++lineFeedFlag;
    }
    );//--end for_each

    wss << endl << L"};";

    wofs << L"extern const size_t " << wsInxAryName << L"Cnt = " 
        << vecResInfo.size() * 4 << L";" << endl;

    wofs << L"extern const size_t " << wsDataAryName << L"Cnt = " 
        << vecBytes.size() << L";" << endl;

    wofs << wss.str();
} 
```

# asp.net - 在多个位置进行 Windows Azure 部署

> ID：14119544
> 
> 赞同：1
> 
> 时间：2013-01-02T09:26:33.140
> 
> 标签：asp.net, azure, azure-sql-database

在过去的一年中，我看到几乎所有云提供商的某些数据中心都出现了严重中断。例如，我在美国中南部地区有一些东西，刚刚经历了超过 3 天的存储服务中断。（幸运的是，我在 Amazon S3 上托管了我的大部分存储需求）。

我想知道公司如何拥有多个数据中心，同时保持所有数据同步并进行自动故障转移。这是自定义编码还是有特定的工具/方法可以做到这一点？

为了详细说明，我使用

*   Azure 存储 Blob（仅适用于临时文件）
*   用于主要数据存储的 Amazon S3
*   SQL Azure
*   虚拟服务器（Web 角色）
*   AppFabric 缓存

我可以看到缓存和 Azure 存储并不重要，因为它们只托管可以轻松重新生成的临时文件和数据。虚拟服务器只是运行一个 ASP.NET 网站，因此您可以随时随地启动其中一个。但是，我需要将 SQL 数据库指向本地区域。

我遇到的主要问题是如何让 SQL 数据库在多个区域中可用和同步？

其次是如何在 Amazon S3 中提供冗余。我有一个带有 CloudFront 的 CDN，但这只是一个 CDN，不是完全冗余的。或者它甚至值得吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:32:58.747

在 Windows Azure 上，一个技巧可能是使用流量管理器（通过旧的管理门户）和 SQL 数据库数据同步。

使用流量管理器，您基本上拥有一个故障转移 DNS。可能不需要同时运行这两个位置，但在发生一般性中断的情况下，流量管理器允许您在第二个位置启动服务，而无需执行复杂的 DNS 更新。

数据同步将同步两个或多个位置的数据库。不是实时的，但如果您想拥有一个灾难恢复站点并且最终会丢失一些数据，这可能会有所帮助。

查看[http://www.slideshare.net/maartenba/architectural-patterns-for-the-cloud](http://www.slideshare.net/maartenba/architectural-patterns-for-the-cloud)了解更广泛的故事。

附带说明：这始终是您必须弄清楚的事情。Windows Azure 和 Amazon 提供了许多构建块，但希望您根据您使用的需求和服务将它们组合起来。

# jquery - 为什么在减小垂直尺寸时 div resize 不适合浏览器窗口？

> ID：14119547
> 
> 赞同：0
> 
> 时间：2013-01-02T09:26:52.237
> 
> 标签：jquery, html, css, resize

考虑以下简单的 html 页面：

```
<doctype>
<html>
    <head>
        <title>This is my page</title>
        <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    </head>

    <body style="padding:0px;margin:0px">
        <div id="root" style="background-color:#dddddd;width:100px;height:100px;position:relative">
            <div id="graph" style="background-color:#00ff00;width:200px;height:200px;position:absolute;bottom:0px">
                This is the DW box
            </div>
        </div>

        <script type="text/javascript">
            $(window).resize(function(){
                $('#root').width($(window).width());
                $('#root').height($(window).height());
            });
        </script>
    </body>
</html> 
```

正如您所看到的，通过使用`jQuery`I resize div`root`以适应窗口。如果您尝试代码（至少在 Chrome 上，我的版本是 Chrome 23）会发生什么，`root`它将不断水平地适应浏览器窗口。垂直拟合也正确执行，但仅在增加浏览器的窗口高度时。

如果您尝试垂直扩展浏览器窗口，没问题。但是，扩展后，如果你尝试减少浏览器窗口的垂直占用，`root`将无法适应它！

## 演示

你可以在这里看到我的窗户。

![在此处输入图像描述](../Images/ea1e0e9a8b3e2dd15f256e7ea2e34172.png)

这里我展开，没有错，灰色框（根）展开。

![在此处输入图像描述](../Images/b4c179efe02e9a8e969c35ffa1f41982.png)

不幸的是，快照工具没有显示滚动条，但很明显，当减小垂直尺寸时，灰色框不适合......

![在此处输入图像描述](../Images/122f26e723f65d0cadc5a87fe5d17edc.png)

为什么是这样？如何解决这个问题？谢谢

### 附言

您会看到一个名为 的 div `graph`。该 div 应该保留在浏览器窗口的下部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:28:27.080

这里的重点是 jQuery(window).height() == document.documentElement.clientHeight（对于 jQuery 1.8+），它在不同的浏览器中表现不同。

$(document).height() 返回 scrollHeight、offsetHeight 和 clientHeight 之间的最高值——但浏览器之间的结果却截然不同。

所以它实际上比使用 CSS***更少***跨浏览器。这就是你应该做的：

```
html,body { height:100%; }
#root { min-height:100%; position:relative; }
#graph { position:absolute; bottom:0; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:49:06.407

似乎只使用CSS是可能的，即 `height: 100%`

在此处查看[浏览器兼容性](https://developer.mozilla.org/en-US/docs/CSS/height)高度 css 属性

**[工作小提琴](http://jsbin.com/ogimut/9/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:42:10.643

为了`make it cross browser`这个也`you have to use css`为了`html and body`。

在我的小提琴中，我对 CSS 进行了更改：

```
html,body{height:100%;} 
```

然后jquery中的小变化：

```
$(window).resize(function() {
    $('#root').width('100%'); // <---100% width
    $('#root').height('100%'); //<---100% height
}); 
```

这样你就不会在扩大或缩小窗口时出现故障。

查看更新的小提琴：http: [//jsfiddle.net/D6YUr/2/](http://jsfiddle.net/D6YUr/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:13:13.607

正如我已经在评论中写的那样，我只看到一个问题。零宽度空间 ( `&#8203;`)。那是一个不可见的 Unicode 字符，用于标记可以分隔单词的位置（在行尾）。我真的不知道它是如何进入你的代码的。所以我只是重新输入了你的代码（我知道删除它的唯一解决方案）结果如下：

```
<doctype>
<html>
    <head>
        <title>This is my page</title>
        <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    </head>

    <body style="padding:0px;margin:0px">
        <div id="root" style="background-color:#dddddd;width:100px;height:100px;position:relative">
            <div id="graph" style="background-color:#00ff00;width:50px;height:20px;position:absolute;bottom:0px">
            </div>
        </div>

        <script type="text/javascript">
            $(window).resize(function(){
                $('#root').width($(window).width());
                $('#root').height($(window).height());
            });
        </script>
    </body>
</html> 
```

它看起来完全一样，但零宽度空间被删除了。

# android - 无法在 android 设备上使用 gps 位置提供程序获取位置

> ID：14119554
> 
> 赞同：0
> 
> 时间：2013-01-02T09:27:21.900
> 
> 标签：android, geolocation, gps, location

我正在开发基于小型位置的 android 应用程序，其中我需要用户当前位置。一旦位置发生一些变化，我也会更新用户当前位置。我的代码如下所示：

```
private final LocationListener locationListener = new LocationListener() {
public void onLocationChanged(Location location) {
updateWithNewLocation(location);

}
public void onProviderDisabled(String provider) {}
public void onProviderEnabled(String provider) {}
public void onStatusChanged(String provider, int status,
Bundle extras) {}
}; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LocationManager locationManager;
    String svcName = Context.LOCATION_SERVICE;
    locationManager = (LocationManager)getSystemService(svcName);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setSpeedRequired(false);
    criteria.setCostAllowed(true);
    String provider = locationManager.getBestProvider(criteria, true);

    //Location l = locationManager.getLastKnownLocation(locationManager.NETWORK_PROVIDER);
    Location l = locationManager.getLastKnownLocation(provider);

    updateWithNewLocation(l);

    locationManager.requestLocationUpdates(provider, 2000, 10, locationListener);

}

private void updateWithNewLocation(Location location) 
{
    TextView myLocationText;
    myLocationText = (TextView)findViewById(R.id.myLocationText);
    String latLongString = "No location found";
    if (location != null) {
    double lat = location.getLatitude();
    double lng = location.getLongitude();
    latLongString = "Lat:" + lat + "\nLong:" + lng;
    }
myLocationText.setText("Your Current Position is:\n" +
latLongString);

} 
```

我的问题是，当我使用提供商作为网络时，它工作正常。但是当它选择 gps 作为提供者时，它会给出空值。我第一次知道它给了我空值。我也使用了 onLocationChanged 方法，但它仍然没有给我正确的输出。当我打开我的应用程序时，它会显示输出空值，它还会启动 gps 来搜索我的位置。我等待一段时间来获取更新的位置，但它没有给我有效的输出。我的代码有什么问题吗。我正在使用安卓设备。

需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:32:00.880

更改此行

```
Location l = locationManager.getLastKnownLocation(provider); 
locationManager.requestLocationUpdates(provider, 2000, 10, locationListener); 
```

至

```
Location l = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
locationManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 2000, 10, locationListener); 
```

然后我认为它会起作用。

或者您可以按照[本](http://www.firstdroid.com/2010/04/29/android-development-using-gps-to-get-current-location-2/)教程使用 gps 获取位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:37:36.567

当您将提供商用作网络时，您会立即获得位置，因为它会获取网络提供商最近的塔的位置值。但是当您使用 GPS 时，获取当前位置值需要一些时间。在您的情况下（在查看代码之后），很明显您正在使用网络提供商获取最后一个已知位置，因此它可以获取位置，并且在使用 gps 提供商时需要一些时间，更重要的是，如果您在附近区域，则需要更多时间通过 gps 提供程序获取位置值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:53:53.483

请在使用用户当前位置时使用此类

```
private GPSTracker gps;

gps = new GPSTracker(this);

if (gps.canGetLocation()) {

        /*----get Lat and Long---------*/

        double lat = gps.getLatitude();
        double lon = gps.getLongitude();

        String mLatitute = Double.toString(lat);
        String mLongitute = Double.toString(lon);
} 
```

GPTTracker 服务：

```
public class GPSTracker extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location = null; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.e("Network", "Network Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.e("GPS", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener Calling this function will stop using GPS in your
 * app
 * */
public void stopUsingGPS() {
    if (locationManager != null) {
        locationManager.removeUpdates(GPSTracker.this);
    }
}

/**
 * Function to get latitude
 * */
public double getLatitude() {
    if (location != null) {
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude() {
    if (location != null) {
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * 
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog On pressing Settings button will
 * lauch Settings Options
 * */
public void showSettingsAlert() {
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog
            .setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(
                            Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                    mContext.startActivity(intent);
                }
            });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });

    // Showing Alert Message
    alertDialog.show();
}

public void onLocationChanged(Location location) {
}

public void onProviderDisabled(String provider) {
}

public void onProviderEnabled(String provider) {
}

public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:35:53.153

您是否在清单中输入了这些权限？

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_GPS"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T09:39:59.417

在这里，系统正在尝试根据您设置的标准选择最佳提供商

```
e.g. criteria.setPowerRequirement(Criteria.POWER_LOW); 
```

但 GPS 提供商不符合您指定的标准。这就是它可能无法正常工作的原因。要么更改标准，要么如果您只想从 GPS 提供商获取位置更新，请使用以下代码，

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,2000, 10, locationListener); 
```

# c# - 如何在 c# 中获取整个解决方案中类的类名称

> ID：14119555
> 
> 赞同：0
> 
> 时间：2013-01-02T09:27:35.677
> 
> 标签：c#

```
ProcessStartInfo info = new ProcessStartInfo(@"D:\\ss\\Class1.cs"); 
```

我有这种类型的代码，但我想获得“类名”，比如我的解决方案代码中有多少类将计算类的数量并通过 c# 中的代码获取名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:30:38.890

你试图做的事情不会涉及`ProcessStartInfo`。有两种方法可以解决此问题：如果已编译，则加载程序集并使用反射检查程序集（`someAssembly.GetTypes()`将是一个好的开始）。或者，对于检查*源代码*（未编译），Roslyn CTP 可用于加载项目/解决方案/类文件，并检查分析树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:42:43.857

如果我没记错的话，您想搜索解决方案中存在的所有类并获取类名。

这是伪代码

1- 搜索 *.cs 文件的所有解决方案。

```
string[] files = System.IO.Directory.GetFiles(path, "*.txt"); 
```

2-遍历所有 *.cs 文件并搜索以下模式

```
namespace [WhatEver the name is]
{
    public class [Class Name] 
```

这是您可以使用的代码

```
foreach(string path in files)
{
    string[] lines = System.IO.File.ReadAllLines(path);
    for (int i=0; i < lines.Count(); i++)
            {
                if(lines[i].ToLower().Contains("namespace"))
                {
                    int j = i + 2;
                    if(lines[j].ToLower().Contains("public class"))
                    {
                       string lClassname = lines[j].Replace("public class","");
                       //Save the class name here
                       break;
                    }
                }
            }
} 
```

# javascript - 如何在 HTML textarea 中的字符串之后的一行中查找空格数？

> ID：14119556
> 
> 赞同：0
> 
> 时间：2013-01-02T09:27:36.457
> 
> 标签：javascript, html, jsp, textarea, whitespace

我有一个文本区域和一个按钮。我在 textarea 中使用按钮的每个 onclick() 附加一些 String(text) 。

字符串应该是一行或半行或两行，无论它可能是什么。

但是我需要知道字符串后面的行中剩余的空格。如果我得到了问题的解决方案，我会做一些事情。

如果问题不理解或有任何疑问，请让我解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:39:28.337

考虑一下：

```
yourTextarea.value.split( '\n' ).map( function( str ) { 
    var ws = str.match( /\s+$/g )
    return ws ? ws[ 0 ].length : 0;
}); 
```

将为每一行输出一些结束空格，例如：

```
[0, 3, 4] 
```

# ios - iOS UIScrollView 动画后的动画

> ID：14119558
> 
> 赞同：21
> 
> 时间：2013-01-02T09:27:51.160
> 
> 标签：ios, animation, uiscrollview

我想要类似于应用程序启动时 Flipboard 轻微翻转动画的目的。Flipboard 启动时会有轻微的上下翻转，向不熟悉界面的用户表明它是可翻转的。

我有一个 UIScrollView 我想制作一点动画来向用户展示它是可滚动的。所以我想向右滚动一点并返回。UIScrollView 有一条`setContentOffset:animated:`没有完成子句的消息。我发现调用它两次似乎没有动画。如果我想要一个接一个又一个动画怎么办？

编辑：感谢李维的回答。为了记录，`UIViewAnimationOptionAutoreverse` 我`UIViewAnimationOptionRepeat`可以使用它。所以这就是我最终得到的结果。

```
CGPoint offset = self.scrollView.contentOffset;
CGPoint newOffset = CGPointMake(offset.x+100, offset.y);

[UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionCurveEaseIn | UIViewAnimationOptionAutoreverse |UIViewAnimationOptionRepeat animations:^{
    [UIView setAnimationRepeatCount: 2];
    [self.scrollView setContentOffset:newOffset animated: NO];
} completion:^(BOOL finished) {
    [self.scrollView setContentOffset:offset animated:NO];
}]; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-11-03T23:48:22.517

对于 scrollView、tableView 或 collectionView，如果您执行以下操作：

```
[self.collectionView setContentOffset:CGPointMake(self.collectionView.contentOffset.x+260.0,
                                                  self.collectionView.contentOffset.y)
                             animated:YES]; 
```

然后你会得到一个：

```
-(void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView 
```

当滚动完成时。

如果用户移动视图，您不会收到此回调。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-02T09:34:35.817

两种选择：

1）使用`-(void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView`委托回调

2) 尝试将其放入`... animated:NO];`具有完成部分的动画块中（带有 ）。

# linux-kernel - 使用 HZ 值的超时错误

> ID：14119564
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:28:06.043
> 
> 标签：linux-kernel, timeout, linux-device-driver

运行带有超时参数的函数，我发现硬编码的 10000 值给出 10 秒超时，`10*HZ`值给出 2.5 秒超时：

```
usb_bulk_msg(context->udev, 管道, context->buffer, context_size, &bytes_read,
    10000); // 10 秒
// 10*HZ); // 2.5 秒

```

用 printk 打印的 HZ 值是 250 - 这个值是不正确的。查看 Linux 源代码：http: [//lxr.free-electrons.com/source/include/asm-generic/param.h#L6](http://lxr.free-electrons.com/source/include/asm-generic/param.h#L6)，我看到它`HZ`被定义为`CONFIG_HZ`- 看起来像配置参数。为什么这个值不正确，是否有另一种方法来指定 jiffies 超时？

Ubuntu 12.04，32 位，内核版本 3.2.34。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:51:18.677

这是因为[`usb_bulk_msg`](http://docs.blackfin.uclinux.org/kernel/generated/usb/re61.html)将毫秒数而不是 jiffies 数作为其第六个参数：

> *超时*
> 
> > 在超时之前等待消息完成的时间（以毫秒为单位）（如果为 0，则等待是永远的）

# code-generation - Xtext，Xbase：推断问题

> ID：14119566
> 
> 赞同：0
> 
> 时间：2013-01-02T09:28:31.613
> 
> 标签：code-generation, xtext, xbase

我将为我的 dsl 编写一个推断器，并且我有一些仅靠文档的帮助无法解决的问题。

第一个：我需要从一个特性创建**静态 void main()**：如何添加**静态**.toMethod **()**？

第二个：假设我的 dsl 中有这样的规则：

```
Sequence:
    'SEQ' name=ID '{'
        statements+=Statement*
    '}'
; 
```

哪里声明：

```
Statement:
    Sequence | others...
; 
```

Sequence 必须映射到**void 方法**，并且该方法的主体由**语句**的翻译组成。但问题是这样的：当在一个序列中我会找到另一个序列时，我必须为新序列创建一个方法并在超级序列中添加一个调用。

例如：

```
SEQ first {
   instructions...
   SEQ second {
      other instructions....
   }
   instructions...
} 
```

必须生成：

```
void first(){
   instructions(translated)...
   second();
   instructions(translated)...
}
void second(){
   other instructions(translated)...
} 
```

有可能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T07:19:13.823

第一个问题：

```
ctx.toMethod('main', ctx.newTypeRef(Void.Type)) [
  static = true
  ….
] 
```

第二个问题：

暗示“指令”是指“XExpression”的实例，您需要花点功夫，因为目前无法在推理过程中编写新的表达式。您可以做的基本上是使您的序列成为 XExpression 的子类型。然后在 JvmModelInference 期间，您需要遍历表达式树（语句）并为序列创建方法。您需要覆盖 XbaseTypeComputer 以及 XbaseCompiler 并为您的表达式添加类型计算和编译策略。后者将是对推理期间创建的方法的调用。

# php - 我可以在一个字段的值中添加“&”吗

> ID：14119568
> 
> 赞同：0
> 
> 时间：2013-01-02T09:28:33.003
> 
> 标签：php, url, query-string

例如，我问如何在其中一个参数的值中添加“&”

```
www.example.com/index.php?param1=m&c&param2=value2 
```

这可能吗？

我需要通过 query_str() 作为 param1=m&c param2=value2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T09:30:54.327

> 这可能吗？

当然可以，但你需要这样做[`url encode`](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)：

```
www.example.com/index.php?param1=m%26c&param2=value2 
```

在 PHP 中，这可以通过[`urlencode`](http://php.net/manual/en/function.urlencode.php)函数来​​完成。

就解码值而言，您不需要做任何特殊的事情，只需像通常读取 GET 查询字符串参数一样读取它：

```
$_GET["param1"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:31:12.477

只需`%26`使用 PHP将 & 编码为[`urlencode`](http://php.net/manual/en/function.urlencode.php)，然后[`urldecode`](http://php.net/manual/en/function.urldecode.php)在检索值时使用

# ruby-on-rails - 如何根据对象进行映射？

> ID：14119570
> 
> 赞同：0
> 
> 时间：2013-01-02T09:28:47.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

`@results`我在（即`@results = @videos + @artists`）中有两种对象。

我正在尝试做，伪代码：

```
@results.map(&:title || &:first_name) 
```

视频有标题栏，但艺术家没有。我该如何进行这项工作？

我可以进入每个循环，但要寻找更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:29:06.517

我不会试图找到正确的方法，而是创建一个可以从任何地方调用的通用接口。

示例（我正在使用一种名为“名称”的方法，但您可以选择其他名称）：

Video 类将具有“name”方法，如下所示：

```
class Video
  def name
    self.title
  end
end 
```

对于 Artist 类，我也会这样做，但使用“first_name”方法：

```
class Artist
  def name
    self.first_name
  end
end 
```

他们，您可以在地图块上使用相同的方法（名称）：

```
@results.map(&:name) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T09:32:16.393

```
@results.map{|x| 
  x.title if x.respond_to?('title')
  x.first_name if x.respond_to?('first_name')
} 
```

# joomla - Joomla 2.5 渲染 com_content 组件输出

> ID：14119573
> 
> 赞同：2
> 
> 时间：2013-01-02T09:29:11.787
> 
> 标签：joomla, joomla2.5

是否可以从外部脚本呈现 Joomla 内容？例如，我有一些 html 字符串，我想将其传递给`com_content`组件，以使所有内容插件和模块功能都可用。我想我应该使用`JDocumentRendererComponent`类。我的外部文件中的代码：

```
<?php

require_once ('framework.php'); //loading joomla framework

jimport('joomla.document.html.renderer.component');

$contentHtml = '<p>Some content html</p>';

echo JDocumentRendererComponent::render('com_content',array(),$contentHtml);

?> 
```

我得到的是最后一行的错误：

`Fatal error: Class 'JDocumentRendererComponent' not found...`

我做错了什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:41:36.350

这是因为您没有将 Joomla 框架包含到外部脚本中。使用下面的代码。这将确保 Joomla! 环境加载正确

```
/* Initialize Joomla framework */
define( '_JEXEC', 1 );
define('JPATH_BASE', dirname(__FILE__) );
define( 'DS', DIRECTORY_SEPARATOR );
/* Required Files */
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
/* To use Joomla's Database Class */
require_once ( JPATH_BASE .DS.'libraries'.DS.'joomla'.DS.'factory.php' );
/**************************************************/
// Your code starts here...
// Remember that the Site application isn't running, so you cannot access $mainframe or any of its methods.
/**************************************************/ 
```

`JDocumentRendererComponent`类位于 /libraries/joomla/document/html/renderer/component.php 如果您正确加载框架，一切都应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:24:08.353

我为我的问题找到了其他解决方案。这项工作也可以通过内容插件事件（触发器）来完成。一段代码来自`components/com_content/views/article/view.html.php`：

```
JPluginHelper::importPlugin('content');
$results = $dispatcher->trigger('onContentPrepare', array ('com_content.article', &$item, &$this->params, $offset));

$item->event = new stdClass();
$results = $dispatcher->trigger('onContentAfterTitle', array('com_content.article', &$item, &$this->params, $offset));
$item->event->afterDisplayTitle = trim(implode("\n", $results));

$results = $dispatcher->trigger('onContentBeforeDisplay', array('com_content.article', &$item, &$this->params, $offset));
$item->event->beforeDisplayContent = trim(implode("\n", $results));

$results = $dispatcher->trigger('onContentAfterDisplay', array('com_content.article', &$item, &$this->params, $offset));
$item->event->afterDisplayContent = trim(implode("\n", $results)); 
```

所以我们实际上可以从我们的字符串中创建一个对象并将其传递给这些触发器。结果，我们获得了像文章一样呈现的内容，并具有其主要功能。

关于它的更多信息：

[http://www.inmotionhosting.com/support/edu/joomla-25/create-plugin/content-plugin-events](http://www.inmotionhosting.com/support/edu/joomla-25/create-plugin/content-plugin-events) [https://groups.google.com/forum/#!msg/joomla-dev-cms/VZVurjiZWIs /9Vr45KS2LTMJ](https://groups.google.com/forum/#!msg/joomla-dev-cms/VZVurjiZWIs/9Vr45KS2LTMJ)

# visual-studio-2010 - 如何在 Visual Studio 中将时间跨度转换为字符串

> ID：14119574
> 
> 赞同：1
> 
> 时间：2013-01-02T09:29:11.200
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, datetime

它给出了一个错误，

**异常详细信息：System.InvalidCastException：从“TimeSpan”类型到“String”类型的转换无效。**

```
Time.Text = datareader1.GetValue(3) 
```

我正在尝试显示来自的数据`database(MS ACCESS)`，数据显示是一种`time`类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:32:31.337

只需致电`ToString()`：

```
Time.Text = datareader1.GetValue(3).ToString() 
```

您目前*在执行时*看到这一点的事实表明您已经`Option Strict`出发*了*。（我假设这是 VB。）我建议您继续使用`Option Strict` *，*除非您出于故意后期绑定的原因真的非常需要它。

# twitter-bootstrap - 如何在 Bootstrap - Carousel 中将图像缩放到全高？

> ID：14119577
> 
> 赞同：5
> 
> 时间：2013-01-02T09:29:17.807
> 
> 标签：twitter-bootstrap

我试图在 Bootstrap Carousel 控件中显示一个应该填满整个屏幕的图像。我正在使用 1024px*795px 的图像

我正在使用带有全尺寸图像的 Bootstrap 站点上给出的示例。在水平方向上，它很好地填满了屏幕。但在垂直方向上它不能很好地扩展。我应该添加/删除哪些属性以使图像填满整个屏幕，尽管它们的像素尺寸较小？

我怎样才能在响应式设计中做到这一点，以便图像可以缩放任意大小？

我正在使用示例站点上的 css，并且只更改 carousel.html 中的 CSS。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T18:50:00.907

**2019 年 Bootstrap 4.x 的更新答案**

由于现代浏览器现在支持`object-fit`，这里有[更好的选择](https://stackoverflow.com/questions/58760217/how-to-make-navbar-and-carousel-combined-always-full-screen/58765043#58765043)。

**Bootstrap 3.x 的原始答案**

我意识到这个答案有点晚了，但我也面临与 Bootstrap 轮播类似的挑战。为了使 100% 的高度起作用，轮播和它的任何父容器也必须是 100% 的高度。

我在 Bootstrap CSS 类中添加了一些覆盖：

```
html,body{height:100%;}
.carousel,.item,.active{height:100%;}
.carousel-inner{height:100%;}
.fill{width:100%;height:100%;background-position:center;background-size:cover;} 
```

然后将“填充”类相应地添加到您的轮播中：

```
<div class="container fill">
<div id="myCarousel" class="carousel slide">
  <div class="carousel-inner">
    <div class="active item">
      <div class="fill" style="background-image:url('//www.portalapp.com/images/greengrass.jpg');">
        <div class="container">
          <h1 class="pull-left pull-middle light-color"><strong><a href="#">Slide 1</a></strong></h1>

        </div>
      </div>
    </div>
    <div class="item">
      <div class="fill" style="background-image:url('//placehold.it/1024x700');">
        <div class="container">
          <h1 class="pull-left pull-middle light-color"><strong><a href="#">Slide 2</a></strong></h1>

        </div>
      </div>
    </div>
  </div>
  <div class="pull-center">
    <a class="carousel-control left" href="#myCarousel" data-slide="prev">‹&lt;/a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">›&lt;/a>
  </div>
</div>
</div> 
```

这是一个工作示例：[http ://bootply.com/59900](http://bootply.com/59900)

# css - 根据设备方向更改图像

> ID：14119580
> 
> 赞同：8
> 
> 时间：2013-01-02T09:29:39.490
> 
> 标签：css, image, cordova, orientation, media-queries

我正在为一家本地公司使用 PhoneGap 构建一个基本的 Web 应用程序。我为应用程序顶部的标题/横幅创建了两个图像。一种针对纵向进行了优化，一种针对横向进行了优化。我希望能够根据设备的握持方式显示其中一个。我一直在阅读有关媒体查询的内容，坦率地说，它对于我的需求来说有点过于复杂，因为 JQuery mobile 将为我处理其余的功能，而我只为整个应用程序使用一个 CSS。

有没有人可以添加几行简单的代码来帮助解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T09:43:39.410

您可以对纵向和横向使用 CSS 媒体查询，一点也不复杂：

```
@media screen and (orientation: portrait) { ... }
@media screen and (orientation: landscape) { ... } 
```

使用这些媒体查询，您可以覆盖`background-image`任何方向。

官方文档：[http ://www.w3.org/TR/css3-mediaqueries/#orientation](http://www.w3.org/TR/css3-mediaqueries/#orientation)

有两种使用方法：

假设你有`<div>`class `header`：

```
@media screen and (orientation: portrait)
{
    div.header { background-image:url(image1.jpg); }
}
@media screen and (orientation: landscape)
{
    div.header { background-image:url(image2.jpg); }
} 
```

或者，您可能希望使用`<img>`标签。在这种情况下，您将需要其中两个，并且仅使用 CSS 规则隐藏/显示一个。比方说，`<img>`标签有类`header-land`和`header-portrait`分别：

```
@media screen and (orientation: portrait)
{
    .header-land { display:none; }
    .header-portrait { display:inline-block; }
}
@media screen and (orientation: landscape)
{
    .header-land { display:inline-block; }
    .header-portrait { display:none; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:49:32.760

这是关于如何使用媒体查询的答案，这是解决问题的一种非常简单的方法。但是一个先决条件是可以将图像显示为 css 背景，而不是`<img ... />`

伪代码

```
.my-banner {
  ...declarations like:
  background-position: 
  border: 
  margin: 
  padding: 
}
@media all and (max-width: 320px) {
  .my-banner {
  background-image: url(portrait.png);
}
@media all and (min-width: 321px) {
  .my-banner {
  background-image: url(landscape.png);
} 
```

# java - 低 CPU 利用率的 Java 最佳编码实践

> ID：14119582
> 
> 赞同：0
> 
> 时间：2013-01-02T09:29:43.877
> 
> 标签：java, performance, jakarta-ee, garbage-collection, aix

任何人都可以提供一些关于 AIX 中低 CPU 利用率的 Java 最佳编码实践的提示吗？例如，像避免 while(true) 循环，..etc 我的要求是我的 java 应用程序应该以低 CPU 使用率运行，这样它就不会占用在同一服务器上运行的其他关键应用程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:32:51.947

运行 CPU 和内存分析器，从 Java 附带的免费 VisualVM 开始，优化耗时最长的代码。

尝试在不使用分析器的情况下优化代码只是猜测。

注意：除非您没有看到 GC 收集，否则分配内存和丢弃垃圾会使用 CPU（并导致缓存流失），因此减少它可以提高 CPU 使用率和性能。

> 我的要求是我的 java 应用程序应该以低 CPU 使用率运行，这样它就不会占用在同一服务器上运行的其他关键应用程序

我会先降低它的 CPU 优先级，直到你解决了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:40:33.733

除了编写您的应用程序以不使用过多 CPU 之外，您还可以[优先](http://www.ibm.com/developerworks/aix/library/au-aixprocesscontrol/index.html)使用`nice`.

非常简单地说，nice 决定了一个特定进程可以消耗多少 CPU 资源，并且可以确保其他进程提前运行（获得更高的 CPU 时间份额）。

存在其他工具/技术 - 有关更多详细信息，请参阅链接。

# javascript - 如何获得不同缩放级别的文档高度？

> ID：14119587
> 
> 赞同：0
> 
> 时间：2013-01-02T09:30:23.970
> 
> 标签：javascript

我正在使用 ASP.NET 和 C#。

```
document.documentelement.offsetHeight 
```

我正在使用它来查找页面的高度。但它根据缩放级别而有所不同。现在我需要在所有缩放级别获得基本高度（以 100% 缩放）。因为使用这个我正在做一些计算来设置其他标签的高度。

可能吗？

**编辑：**

我确实用它来检测缩放级别

```
((screen.deviceXDPI / screen.systemXDPI) * 100).toFixed(); 
```

但这并不准确。有没有其他方法可以检测缩放级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T15:44:44.423

document.height / $(document).height() 应该给你缩放级别。我已经在 chrome 上测试过了——需要 jquery

# python - Scraperwiki + lxml。如何获取具有类的元素的子元素的 href 属性？

> ID：14119590
> 
> 赞同：6
> 
> 时间：2013-01-02T09:30:31.137
> 
> 标签：python, web-scraping, lxml, scraperwiki

在 URL 中包含“alpha”的链接上有许多链接（hrefs），我想从 20 个不同的页面收集这些链接并粘贴到一般 url 的末尾（倒数第二行）。href 可以在一个表中找到，其中 td 的类是 mys-elastic mys-left ，而 a 显然是包含 href 属性的元素。任何帮助将不胜感激，因为我已经为此工作了大约一周。

```
for i in range(1, 11):
# The HTML Scraper for the 20 pages that list all the exhibitors
 url = 'http://ahr13.mapyourshow.com/5_0/exhibitor_results.cfm?alpha=%40&type=alpha&page='         + str(i) + '#GotoResults'
print url
list_html = scraperwiki.scrape(url)
root = lxml.html.fromstring(list_html)
href_element = root.cssselect('td.mys-elastic mys-left a')

for element in href_element:
#   Convert HTMl to lxml Object 
 href = href_element.get('href')
 print href

 page_html = scraperwiki.scrape('http://ahr13.mapyourshow.com' + href)
 print page_html 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T10:17:59.587

无需使用 javascript - 它都在 html 中：

```
import scraperwiki
import lxml.html

html = scraperwiki.scrape('http://ahr13.mapyourshow.com/5_0/exhibitor_results.cfm?  alpha=%40&type=alpha&page=1')

root = lxml.html.fromstring(html)
# get the links
hrefs = root.xpath('//td[@class="mys-elastic mys-left"]/a')

for href in hrefs:
   print 'http://ahr13.mapyourshow.com' + href.attrib['href'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T10:25:51.530

```
import lxml.html as lh
from itertools import chain

URL = 'http://ahr13.mapyourshow.com/5_0/exhibitor_results.cfm?alpha=%40&type=alpha&page='
BASE = 'http://ahr13.mapyourshow.com'
path = '//table[2]//td[@class="mys-elastic mys-left"]//@href'

results = []   
for i in range(1,21):     
    doc=lh.parse(URL+str(i)) 
    results.append(BASE+i for i in doc.xpath(path))

print list(chain(*results)) 
```

# php - 我的 IP 地址在 PHP 中显示不正确

> ID：14119598
> 
> 赞同：2
> 
> 时间：2013-01-02T09:30:56.747
> 
> 标签：php, get, ip, ip-address

[我通过http://whatismyipaddress.com/](http://whatismyipaddress.com/)网站查看我的 IP 地址。它显示我的 IP 地址，如`203.128.31.58`. 但是当我使用这个 PHP 代码获取 IP 地址时

```
echo $ip = $_SERVER['REMOTE_ADDR']; 
```

它显示 IP 地址，如 127.0.0.1。如何获取 IP 地址`203.128.31.58`并通过此 IP 地址获取国家/地区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:33:37.863

那是因为它显示了您的本地主机 IP 地址。PHP 是***服务器***端，因此代码在您的机器（localhost）上运行，因此显示 IP 地址 127.0.0.1，localhost。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:33:58.210

当您将代码上传到实时服务器并获取 IP 地址时，它将显示您的公共 IP 地址。

当你在本地运行它时，它总是显示`127.0.0.1`.

[MaxMind](http://www.maxmind.com/)提供了一个免费的 PHP GeoIP 国家查询类（也有一个免费的国家+城市查询类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:44:28.020

**原因：**

正如其他人所说，它表明`127.0.0.1`，因为您正在通过`http://localhost`.

**解决方案：**

如果您有一些自定义域，请将一个子域（如`test.custom.com`）链接到您的 IP 地址，并配置网络服务器以将您的页面/目录链接到该域（`test.custom.com`> `/usr/local/www/site`）。然后通过此域 ( `http://test.custom.com`) 访问该网站。您的 IP 地址将是外部的。

# .net - 从 ListBox 拖放多个项目

> ID：14119599
> 
> 赞同：1
> 
> 时间：2013-01-02T09:30:57.823
> 
> 标签：.net, wpf, vb.net, drag-and-drop, listbox

我有一个`ListBox`并且我希望能够单击多个项目，然后从每个选定的项目中拖动字符串。我可以让它对单个对象正常工作。我只是不能让它工作超过1。

我用 SelectionMode Multiple 查看了[从 ListBox 拖放的 WPF 拖放，](https://stackoverflow.com/questions/1553622/wpf-drag-drop-from-listbox-with-selectionmode-multiple)但它完全难住了我（尝试使用它，但它没有用，我不明白。）

我当前的 Drag 'n' Drop 代码如下。

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <EventSetter Event="MouseDoubleClick" Handler="ListBoxItemDClick"/>
        <EventSetter Event="MouseDown" Handler="ReferenceList_PreviewMouseLeftButtonDown"/>
        <EventSetter Event="MouseMove" Handler="ReferenceList_PreviewMouseMove"/>
        <EventSetter Event="MouseUp" Handler="ReferenceListMouseUp"/>
        <Style.Triggers>
            ...
        </Style.Triggers>
    </Style>
</ListBox.ItemContainerStyle>

Private Sub ListBoxItemDClick(sender As Object, e As MouseButtonEventArgs) 'DoubleClick
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    If PW IsNot Nothing Then
        Dim selite As ListBoxItem = DirectCast(ReferenceList.ItemContainerGenerator.ContainerFromItem(ReferenceList.SelectedItem), ListBoxItem) 
        PW.NewItem = False
        PW.EditItem = ReferenceList.SelectedItem
        PW.ChangeSlide(sender, 1)
    End If
End Sub

Private Sub ReferenceList_PreviewMouseLeftButtonDown(sender As Object, e As MouseButtonEventArgs) 'Mouse Down on ListBoxItem
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    StartPoint = e.GetPosition(Nothing)
    PW.Resizing = False
End Sub

Private Sub ReferenceListMouseUp(sender As Object, e As MouseButtonEventArgs) 'Mouse Up on ListBoxItem
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    StartPoint = e.GetPosition(Nothing)
    PW.Resizing = True
End Sub

Private Sub ReferenceList_PreviewMouseMove(sender As Object, e As MouseEventArgs) 'MouseMove on ListBoxItem
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    If PW.Resizing = False Then
        If ReferenceList.SelectedItems.Count = 1 Then
            Dim MousePosition As Point = e.GetPosition(Nothing)
            Dim Difference As Vector = StartPoint - MousePosition
            Dim StopDrop As Boolean = False
            Dim LBITEM As ListBoxItem = DirectCast(sender, ListBoxItem)
            If e.LeftButton = MouseButtonState.Pressed AndAlso (Math.Abs(Difference.X) > SystemParameters.MinimumHorizontalDragDistance Or Math.Abs(Difference.Y) > SystemParameters.MinimumVerticalDragDistance) Then
                PW.TempItem = LBITEM.DataContext
                Dim FN As String = PW.TempItem.PropLastName & ", " & PW.TempItem.PropFirstName.Substring(0, 1)
                Dim TT As String = PW.TempItem.PropTitle
                Dim YR As String = PW.TempItem.PropYear.ToString
                Dim ReferenceText As String = FN & " " & YR & ", " & TT
                Dim DragData As DataObject = New DataObject(DataFormats.StringFormat, ReferenceText)
                If DragData IsNot Nothing And StopDrop = False Then
                    DragDrop.DoDragDrop(sender, DragData, DragDropEffects.Copy)
                End If
            End If
        Else
            Dim TotalReference As String = "Reference Data"
            For Each ITEM As Object In ReferenceList.SelectedItems
                Dim MousePosition As Point = e.GetPosition(Nothing)
                Dim Difference As Vector = StartPoint - MousePosition
                Dim StopDrop As Boolean = False
                If e.LeftButton = MouseButtonState.Pressed AndAlso (Math.Abs(Difference.X) > SystemParameters.MinimumHorizontalDragDistance Or Math.Abs(Difference.Y) > SystemParameters.MinimumVerticalDragDistance) Then
                    PW.TempItem = ITEM
                    Dim FN As String = PW.TempItem.PropLastName & ", " & PW.TempItem.PropFirstName.Substring(0, 1)
                    Dim TT As String = PW.TempItem.PropTitle
                    Dim YR As String = PW.TempItem.PropYear.ToString
                    Dim ReferenceText As String = FN & " " & YR & ", " & TT
                    If TotalReference Is "Reference Data" Then
                        TotalReference = ReferenceText
                    Else
                        TotalReference = ReferenceText & vbCr & ReferenceText
                    End If
                End If
                Dim DragData As DataObject = New DataObject(DataFormats.StringFormat, TotalReference)
                If DragData IsNot Nothing And StopDrop = False Then
                    DragDrop.DoDragDrop(sender, DragData, DragDropEffects.Copy)
                End If
            Next
        End If
    End If
End Sub 
```

变量：

```
PW.Resizing (Boolean on MainWindow that determines whether window is resizing (True/False)
PW.TempItem (Declared on MainWindow as: Public TempItem as Reference 'Reference is my own class like a Student or such class to store data)
Private StartPoint As Point
ReferenceList is the ListBox containing all the ListBoxItems. 
```

如果我需要提供更多详细信息，请告诉我。我无法判断拖动多个项目的代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:07:25.497

没关系，我发现了我的错误。我替换了这一行：

```
TotalReference = ReferenceText & vbCr & ReferenceText 
```

有了这条线：

```
TotalReference = TotalReference & vbCr & ReferenceText 
```

现在一切正常！

# ruby-on-rails - 如何在视图中添加列表（数字）以便输出显示数字？

> ID：14119604
> 
> 赞同：0
> 
> 时间：2013-01-02T09:31:27.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在列表中添加数字

```
<% @name.each do |name| %>
   <tr>
    <td><%= name.fname %></td>
    <td><%= name.lname %></td>
  </tr>
<% end %> 
```

我想让它像 1\. John Doe 2\. Jane Doe

但不确定哪种是标准的添加方式

*   就像我添加时一样

    ```
    <td><li></li></td>, 
    ```

    它没有显示数字，而只是

    *   ，我确定我错过了一些非常小的东西，但不确定是什么？

    * * *

    ## 回答 #1

    > 赞同：3
    > 
    > 时间：2013-01-02T09:34:35.270

    ```
    <% @name.each_with_index do |name, index| %>
       <tr>
        <td><%= index+1 %></td>
        <td><%= name.fname %></td>
        <td><%= name.lname %></td>
      </tr>
    <% end %> 
    ```

    * * *

    ## 回答 #2

    > 赞同：1
    > 
    > 时间：2013-01-02T09:34:55.243

    哥们不是

    ```
    <td><li></li></td> 
    ```

    而是它的

    ```
    <ol>
      <li>Coffee</li>
      <li>Tea</li>
      <li>Milk</li>
    </ol>

    <ul>
      <li>Coffee</li>
      <li>Tea</li>
      <li>Milk</li>
    </ul> 
    ```

    * * *

    ## 回答 #3

    > 赞同：0
    > 
    > 时间：2013-01-02T15:16:35.860

    你想要的是一个有序列表：

    ```
    <ol>
      <% @name.each do |name| %>
        <li>
          <%= name.fname %> <%= name.lname %>
        </li>
      <% end %>
    </ol> 
    ```

# wpf - 合成后如何将 InputBindings 添加到窗口？

> ID：14119606
> 
> 赞同：0
> 
> 时间：2013-01-02T09:31:36.313
> 
> 标签：wpf, mef, inputbinding

我试图通过实现我自己版本的众所周知的计算器示例来掌握使用 MEF 框架。用户界面在 WPF 中。

合成后，Viewmodel 拥有一个`ObservableCollection(Of IOperation)`由 View 中的“ListBox”表示的`Buttons`。每个上的文本都`Button`被`Char`定义`IOperation`为一个名为 的属性`Symbol`。通过将 ListBox 的 SelectedItem 绑定到 ViewModel 中的属性，我可以触发 `Calculate`当前选择的方法，`IOperation`而无需知道`Button`按下了哪个方法。（下面的代码说明了这一点。）

但是，现在我需要添加`InputBindings`到 View ，其中每个`KeyBinding`都将与`Symbol`在`IOperation`. 看起来我无法避免实现一个`Select Case`( `switch`) 语句来遍历 Viewmodel 的`IOperation`s 集合，以选择应该调用 'Calculate' 方法的那个。

有任何想法吗？

XAML：

```
<ListBox Grid.Column="1" Grid.Row="3" Name="OperationsList" 
         SelectedItem="{Binding ActiveOperation,Mode=TwoWay}"
         ItemsSource="{Binding Operations}">
         <ListBox.ItemsPanel>
             <ItemsPanelTemplate>
                 <UniformGrid IsItemsHost="True"/>
             </ItemsPanelTemplate>
         </ListBox.ItemsPanel>
         <ListBox.ItemTemplate>
             <DataTemplate>
                 <Button Content="{Binding Symbol}"
                         ToolTip="{Binding Description}"
                         Command="{Binding ElementName=OperationsList, Path=DataContext.ActivateOperation}"
                            Click="Button_Click_1"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

操作：

```
Public Interface IOperation
    Function Calculate() As Double
    Property Left As Double
    Property Right As Double
    Property Symbol As String
    Property Description As String
End Interface 
```

视图模型：

```
Private _activateOperation As Command
    Public Property ActivateOperation As Command
        Get
            Return _activateOperation
        End Get
        Set(value As Command)
            _activateOperation = value
            OnPropertyChanged()
        End Set
    End Property

Public Property ActiveOperation As IOperation
    Get
        Return _compositor.ActiveOperation
    End Get
    Set(value As ICalculator)
        _compositor.ActiveOperation = value
        OnPropertyChanged()
    End Set
End Property

   Public ReadOnly Property Operations As ObservableCollection(Of IOperation)
        Get
            Return New ObservableCollection(Of ICalculator)(_compositor.Operations)
        End Get
    End Property

   Private Sub DoActivateOperation(Optional parameter As Object = Nothing)
        If Left.HasValue Then
            MakeCalculation()
        Else
            Left = CDbl(Display)
            ClearDisplay()
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:10:29.987

代码的边缘有点粗糙，因此请进行相应调整...

```
// in ViewModel, after composition

// map string symbols to input Keys (for brevity, using a Dictionary)
Dictionary<string, System.Windows.Input.Key> SymbolsToKeys = new Dictionary<string, Key>
{
  { "+", Key.Add },
  // etc.
}

// compose the list (expose it via a public property)
// (ensure not to get confused: the KeyValuePair.Key is for the string symbol
// ... and the KeyValuePair.Value is for the Sys.Win.Input.Key value)
KeyBindings = (from symbolAndKey in SymbolsToKeys
               join op in Operations on Equals(symbolAndKey.Key, op.Symbol)
               select new KeyBinding(
                 new Command(op.Calculate)),
                 new KeyGesture(symbolAndKey.Value)
              ).ToList();

// in View, after Binding to ViewModel
var vm = DataContext as YourViewModel;
if(vm != null)
{
   foreach(var keybinding in vm.KeyBindings){
       this.InputBindings.Add(keybinding);
   }
} 
```

# javascript - 如何仅在成功进入下一个循环值时才在循环中运行 ajax 请求？

> ID：14119607
> 
> 赞同：0
> 
> 时间：2013-01-02T09:31:39.990
> 
> 标签：javascript, jquery, ajax, loops

我有一个非常基本的场景：运行 3 个 Google 地图位置 URL 并在每次成功时显示结果

这是我到目前为止所拥有的：

```
 var  values = ["url1", "url2", "url3"];

  values.forEach(function(value, i) {

     var jsonReq = JSON.stringify({
        action: 101,
        supported: value 
    });

    ...

     $.ajax({
        type: "POST",
        url: "data.ajax.php",
        dataType:"json",
        data:{
            data:jsonReq
        },
        success:function(data){
           // parse results
           ....

        }
    }); 

  }); 
```

**问题是我在没有等待成功**的情况下循环运行所有 3 个 URL 。

我只想在获得前一个请求的响应（回调）时发送下一个请求。

有什么建议么？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:54:05.150

尝试递归......像这样

```
var currentR = 0;
    var  values = ["url1", "url2", "url3"];
    function sendReqests()
    {
       if(!values[currentR])
       return false;
       var jsonReq = JSON.stringify({
            action: 101,
            supported: values[currentR]
        });
       $.ajax({
            type: "POST",
            url: "data.ajax.php",
            dataType:"json",
            data:{
                data:jsonReq
            },
            success:function(data){
             currentR++;  
              if(values[currentR]){
              sendReqests();
              }
            }
        }); 

    }

    // call the recursive function 

    sendReqests(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T09:37:15.210

在ajax请求中调用下一个请求的完整功能

```
var  values = ["url1", "url2", "url3"];

  values.forEach(function(value, i) {

     var jsonReq = JSON.stringify({
        action: 101,
        supported: value 
    });

    ...

     $.ajax({
        type: "POST",
        url: "data.ajax.php",
        dataType:"json",
        data:{
            data:jsonReq
        },
        success:function(data){
           // parse results
           ....

        },
      complete: function(){

      }
   }); 

  }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:36:06.320

您可以使用[**setTimeout**](http://www.w3schools.com/jsref/met_win_settimeout.asp)而不是使用循环

```
var  values = ["url1", "url2", "url3"];
var index = 0;

function repeatedCall(value, i) {

     var jsonReq = JSON.stringify({
                        action: 101,
                        supported: values[index]
                    });
     index++;
     if(index == 4)
         clearTimeout(loop );
     else
         setTimeout(repeatedCall, 0);
}
var loop setTimeout(repeatedCall, 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T09:52:39.427

相反`foreach`，你可以使用`every`，因为突破`every`比更容易`foreach`

```
var  values = ["url1", "url2", "url3"];
function ajaxCall(value) {
    var jsonReq = JSON.stringify({
        action: 101,
        supported: value 
    });

    $.ajax({
        type: "POST",
        url: "data.ajax.php",
        dataType:"json",
        async: false,
        data:{
            data:jsonReq
        },
        success:function(data){
           // parse results
           // if success
           //       return true
           // else
           //       return false

        }
    });
    return true;
}
values.every(ajaxCall); 
```

# binary - Mathematica：用 FromDigits 逆 IntegerDigits

> ID：14119609
> 
> 赞同：0
> 
> 时间：2013-01-02T09:31:43.157
> 
> 标签：binary, wolfram-mathematica

使用 IntegerDigits 和 ToCharacterCode 我将字符串转换为二维二进制表。现在我需要扭转这一点，所有 Mathematica 帮助都声称 FromDigits 是 IntegerDigits 的倒数。然而我无法回到我原来的字符串。这是我的代码：

```
ConvTextTo[s_String]:= IntegerDigits[ToCharacterCode[s],2, 8];
ConvTextFrom[l_List]:= FromCharacterCode[FromDigits[l, 2]]; 
```

这会返回乱码，我不知道为什么。如果 FromDigits 确实是 IntegerDigits 的倒数，为什么这不起作用，看在上帝的份上？这让我发疯，我用谷歌搜索了一个小时，我找不到解决方案。我已经尝试了我能想到的任何东西，似乎没有任何结果。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:58:00.440

你做得很好，但还有一点点。首先，您需要将 (/@) FromDigits 映射到每个二进制序列上，代表一个字符。第二次将（@@）StringJoin 应用到FromCharacterCode 的结果中，得到原始拼接的String。Apply 将任何表达式的 Head 替换为应用于其参数的新函数。

一般来说，减少挫败感:-) 试着让问题休息一下，然后再回来解决问题，或者像你一样寻求帮助。这是一种优雅的语言，会逐渐变得本能。

```
In[9]:= string1 = 
  "The quick brown fox jumped over the lazy white dog.";

In[10]:= ToCharacterCode@string1

Out[10]= {84, 104, 101, 32, 113, 117, 105, 99, 107, 32, 98, 114, 111, \
119, 110, 32, 102, 111, 120, 32, 106, 117, 109, 112, 101, 100, 32, \
111, 118, 101, 114, 32, 116, 104, 101, 32, 108, 97, 122, 121, 32, \
119, 104, 105, 116, 101, 32, 100, 111, 103, 46}

In[11]:= IntegerDigits[%10, 2, 8]

Out[11]= {{0, 1, 0, 1, 0, 1, 0, 0}, {0, 1, 1, 0, 1, 0, 0, 0}, {0, 1, 
  1, 0, 0, 1, 0, 1}, {0, 0, 1, 0, 0, 0, 0, 0}, {0, 1, 1, 1, 0, 0, 0, 
  1}, {0, 1, 1, 1, 0, 1, 0, 1}, {0, 1, 1, 0, 1, 0, 0, 1}, {0, 1, 1, 0,
   0, 0, 1, 1}, {0, 1, 1, 0, 1, 0, 1, 1}, {0, 0, 1, 0, 0, 0, 0, 
  0}, {0, 1, 1, 0, 0, 0, 1, 0}, {0, 1, 1, 1, 0, 0, 1, 0}, {0, 1, 1, 0,
   1, 1, 1, 1}, {0, 1, 1, 1, 0, 1, 1, 1}, {0, 1, 1, 0, 1, 1, 1, 
  0}, {0, 0, 1, 0, 0, 0, 0, 0}, {0, 1, 1, 0, 0, 1, 1, 0}, {0, 1, 1, 0,
   1, 1, 1, 1}, {0, 1, 1, 1, 1, 0, 0, 0}, {0, 0, 1, 0, 0, 0, 0, 
  0}, {0, 1, 1, 0, 1, 0, 1, 0}, {0, 1, 1, 1, 0, 1, 0, 1}, {0, 1, 1, 0,
   1, 1, 0, 1}, {0, 1, 1, 1, 0, 0, 0, 0}, {0, 1, 1, 0, 0, 1, 0, 
  1}, {0, 1, 1, 0, 0, 1, 0, 0}, {0, 0, 1, 0, 0, 0, 0, 0}, {0, 1, 1, 0,
   1, 1, 1, 1}, {0, 1, 1, 1, 0, 1, 1, 0}, {0, 1, 1, 0, 0, 1, 0, 
  1}, {0, 1, 1, 1, 0, 0, 1, 0}, {0, 0, 1, 0, 0, 0, 0, 0}, {0, 1, 1, 1,
   0, 1, 0, 0}, {0, 1, 1, 0, 1, 0, 0, 0}, {0, 1, 1, 0, 0, 1, 0, 
  1}, {0, 0, 1, 0, 0, 0, 0, 0}, {0, 1, 1, 0, 1, 1, 0, 0}, {0, 1, 1, 0,
   0, 0, 0, 1}, {0, 1, 1, 1, 1, 0, 1, 0}, {0, 1, 1, 1, 1, 0, 0, 
  1}, {0, 0, 1, 0, 0, 0, 0, 0}, {0, 1, 1, 1, 0, 1, 1, 1}, {0, 1, 1, 0,
   1, 0, 0, 0}, {0, 1, 1, 0, 1, 0, 0, 1}, {0, 1, 1, 1, 0, 1, 0, 
  0}, {0, 1, 1, 0, 0, 1, 0, 1}, {0, 0, 1, 0, 0, 0, 0, 0}, {0, 1, 1, 0,
   0, 1, 0, 0}, {0, 1, 1, 0, 1, 1, 1, 1}, {0, 1, 1, 0, 0, 1, 1, 
  1}, {0, 0, 1, 0, 1, 1, 1, 0}}

In[14]:= FromDigits[#, 2] & /@ %11

Out[14]= {84, 104, 101, 32, 113, 117, 105, 99, 107, 32, 98, 114, 111, \
119, 110, 32, 102, 111, 120, 32, 106, 117, 109, 112, 101, 100, 32, \
111, 118, 101, 114, 32, 116, 104, 101, 32, 108, 97, 122, 121, 32, \
119, 104, 105, 116, 101, 32, 100, 111, 103, 46}

In[15]:= FromCharacterCode@# & /@ %14

Out[15]= {"T", "h", "e", " ", "q", "u", "i", "c", "k", " ", "b", "r", \
"o", "w", "n", " ", "f", "o", "x", " ", "j", "u", "m", "p", "e", "d", \
" ", "o", "v", "e", "r", " ", "t", "h", "e", " ", "l", "a", "z", "y", \
" ", "w", "h", "i", "t", "e", " ", "d", "o", "g", "."}

In[16]:= StringJoin @@ %15

Out[16]= "The quick brown fox jumped over the lazy white dog." 
```

# c# - Dictionary.Count 性能

> ID：14119612
> 
> 赞同：5
> 
> 时间：2013-01-02T09:32:04.567
> 
> 标签：c#, dictionary

**这个问题似乎是无稽之谈。该行为无法可靠地再现。**

比较以下测试程序，我观察到以下示例中的第一个和第二个之间存在*巨大*的性能差异（第一个示例比第二个慢十倍）：

第一个例子（慢）：

```
interface IWrappedDict {
    int Number { get; }
    void AddSomething (string k, string v);
}

class WrappedDict : IWrappedDict {
    private Dictionary<string, string> dict = new Dictionary<string,string> ();

    public void AddSomething (string k, string v) {
        dict.Add (k, v);
    }

    public int Number { get { return dict.Count; } }
}

class TestClass {
    private IWrappedDict wrappedDict;

    public TestClass (IWrappedDict theWrappedDict) {
        wrappedDict = theWrappedDict;
    }

    public void DoSomething () {
        // this function does the performance test
        for (int i = 0; i < 1000000; ++i) {
            var c = wrappedDict.Number; wrappedDict.AddSomething (...);
        }
    }
} 
```

第二个例子（快速）：

```
// IWrappedDict as above
class WrappedDict : IWrappedDict {
    private Dictionary<string, string> dict = new Dictionary<string,string> ();
    private int c = 0;

    public void AddSomething (string k, string v) {
        dict.Add (k, v); ++ c;
    }

    public int Number { get { return c; } }
}
// rest as above 
```

有趣的是，如果我将成员变量的类型`TestClass.wrappedDict`从`IWrappedDict`更改为 ，差异就会消失（第一个示例也很快） `WrappedDict`。我对此的解释是，`Dictionary.Count`每次访问元素时都会重新计算元素，并且元素数量的潜在缓存仅由编译器优化完成。

有人可以证实这一点吗？有没有办法以`Dictionary`一种高性能的方式获取元素的数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:35:19.187

不，每次使用时*都不会*`Dictionary.Count`重新计算元素。字典保持计数，应该和你的第二个版本一样快。

 *我怀疑在您对第二个示例的测试中，您已经`WrappedDict`使用了`IWrappedDict`，这实际上是关于接口成员访问（它始终是虚拟的）和 JIT 在知道具体类型时编译对属性的内联调用。

如果您仍然认为`Count`是问题所在，您应该能够编辑您的问题以显示一个简短但完整的程序，该程序演示快速和慢速版本，包括您如何计时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T09:43:16.497

听起来你的时机不对；我得到：

```
#1: 330ms
#2: 335ms 
```

*在 IDE 之外以发布模式*运行以下命令时：

```
public void DoSomething(int count) {
    // this function does the performance test
    for (int i = 0; i < count; ++i) {
        var c = wrappedDict.Number; wrappedDict.AddSomething(i.ToString(), "a");
    }
}
static void Execute(int count, bool show)
{
    var obj1 = new TestClass(new WrappedDict1());
    var obj2 = new TestClass(new WrappedDict2());

    GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);
    GC.WaitForPendingFinalizers();
    var watch = Stopwatch.StartNew();
    obj1.DoSomething(count);
    watch.Stop();
    if(show) Console.WriteLine("#1: {0}ms", watch.ElapsedMilliseconds);

    GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);
    GC.WaitForPendingFinalizers();
    watch = Stopwatch.StartNew();
    obj2.DoSomething(count);
    watch.Stop();
    if(show) Console.WriteLine("#2: {0}ms", watch.ElapsedMilliseconds);
}
static void Main()
{
    Execute(1, false); // for JIT
    Execute(1000000, true); // for measuring
} 
```

基本上：“无法复制”。另外：为了完整起见，否：`.Count`不计算所有项目（它已经知道计数），编译器也没有添加任何神奇的自动缓存代码（注意：有一些有限的例子；例如，JIT可以删除对*向量*`for`循环的边界检查）。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T09:34:55.163

不，字典或哈希表从不迭代条目以确定长度。

它将（或应该）始终跟踪条目数。

因此，时间复杂度为`O(1)`。**

# cocoa - 无法使用 Mac 端口 Clozure Common Lisp `(require "COCOA")`

> ID：14119618
> 
> 赞同：1
> 
> 时间：2013-01-02T09:32:18.373
> 
> 标签：cocoa, common-lisp, ccl

我已经用 Mac 端口安装了包 ccl。现在我想使用可可桥。

```
Welcome to Clozure Common Lisp Version 1.8  (DarwinX8664)!
? (require "COCOA")
> Error: Permission denied : #P"/opt/local/share/ccl/1.8/temp bundle64.app/Contents/252752233492590994.tem"
> While executing: %CREATE-FILE, in process listener(1).
> Type :POP to abort, :R for a list of available restarts.
> Type :? for other options. 
```

如果我从它开始`ccl64`就`sudo`可以了。但我希望能够以普通用户的身份做到这一点。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:35:49.987

```
svn co http://svn.clozure.com/publicsvn/openmcl/release/1.8/darwinx86/ccl 
```

而 in`~`可能是实现您想要的最直接的方式。

如果你想使用 MacPorts 来管理 ccl（而不是上面的 svn 方法），然后运行

```
sudo chown -R $USER /opt/local/share/ccl 
```

请注意，后一种情况确实让我有点不舒服，因为如果您尝试这样做`sudo port uninstall ccl`，MacPorts 不会完全删除 share/ccl 目录，可能是因为该`(require :cocoa)`调用将编译的二进制文件添加到 Macports 未跟踪的目录中。

要使 MacAppStore 版本正常工作，您可能需要找到 ccl.app 目录中的 ccl 二进制文件，然后为 slime 启动它。也可能不是一个坏方法。

请注意，无论您以何种方式执行此操作，一旦您执行此操作，`(require :cocoa)`您将在 slime 运行时弹出一个单独的可可侦听器。一旦打开，我就把它移到一边。如果您在 之后找到一种方法来抑制此侦听器窗口`(require :cocoa)`，我很想知道这一点。

但我推荐第一种（svn）方法。那是我与 slimv 一起使用的那个，也是 Clozure 在他们的下载页面上推荐的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:29:13.893

如果您使用的是 Mac，运行 Clozure CL 的最简单方法是从 Apple 的 Mac App Store 加载它。

[https://itunes.apple.com/de/app/clozure-cl/id489900618?mt=12](https://itunes.apple.com/de/app/clozure-cl/id489900618?mt=12)

这样它就安装在 Applications 文件夹中并运行 Cocoa-App 没有问题，因为它已提供。但随后您将运行基于 Cocoa 的 IDE 版本的 CCL。

如果您从 MacPorts 安装 CCL，我猜该应用程序不存在。您需要拥有该目录的权限才能创建必要的文件。

否则我只会从 Clozure 的存储库中安装一个新的 CCL：

[http://ccl.clozure.com/download.html](http://ccl.clozure.com/download.html)

# android - 如何在 Google Maps Android API V2 中将当前位置显示为箭头？

> ID：14119623
> 
> 赞同：11
> 
> 时间：2013-01-02T09:32:32.727
> 
> 标签：android, google-maps, google-maps-api-2

我正在使用 Google Maps Android API V2。当我使用 Googlemap setMyLocationEnabled(true) 时，当前位置显示为一个蓝点。如何将当前位置显示为可以指示当前航向的闪烁箭头？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-27T07:43:29.670

移动！

> 如果设备是静止的，则该位置将在地图上用一个小蓝点指示，如果设备正在移动，则该位置将显示为一个 V 形。

来自[谷歌地图 v2 文档](https://developers.google.com/maps/documentation/android/location#the_my_location_layer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T02:47:47.120

[根据这篇文章](https://stackoverflow.com/questions/15860103/location-animation-using-blue-flashing-arrow-and-show-direction-in-android-googl)，我们无法在默认情况下或通过 Android 上的 API 获得我们在 Google 的 Google 地图应用程序中看到的蓝色箭头。我的结论是，对于那个特定的功能，我们可能是靠我们自己的。只是我的2美分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T09:39:50.757

在下面使用它可以获取当前位置

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);     
    Criteria criteria = new Criteria();
   String provider = locationManager.getBestProvider(criteria, false);
Location location = locationManager.getLastKnownLocation(provider);

 if (location != null) {
                    System.out.println("Provider " + provider + " has been selected.");
                    onLocationChanged(location);
                  } 

Geocoder geocoder = new Geocoder(ViewTestDrive.this, Locale.getDefault());
                List<Address> addresses = null;

                try {
                    addresses = geocoder.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
                } catch (IOException e) {
                    e.printStackTrace();
                    // Update address field with the exception.
                    //Message.obtain(mHandler, UPDATE_ADDRESS, e.toString()).sendToTarget();
                }
                String addressText = null;
                if (addresses != null && addresses.size() > 0) {
                    Address address = addresses.get(0);
                    // Format the first line of address (if available), city, and country name.
                     addressText = String.format("%s, %s, %s",
                            address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                            address.getLocality(),
                            address.getCountryName());
                    // Update address field on UI.
                    //Message.obtain(mHandler, UPDATE_ADDRESS, addressText).sendToTarget();
                }

                Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
                        Uri.parse("http://maps.google.com/maps?saddr="+addressText+"&daddr="+));
                intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");        
                startActivity(intent);

@Override
public void onLocationChanged(Location location) {
    int lat = (int) (location.getLatitude());
    int lng = (int) (location.getLongitude());
    String.valueOf(lat);
    String.valueOf(lng);

}

@Override
public void onProviderDisabled(String provider) {
    Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();

}

@Override
public void onProviderEnabled(String provider) {
    Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-27T07:06:47.077

（对不起，我来不及回答了。希望你在这个时候解决问题。）

您可以通过一些简单的步骤自定义标记的显示方式。以下是实现此目的所需的代码部分。

```
//You need a GoogleMap object to deal with the map functionality.
private GoogleMap map;
...
//Find Your Map view from layout
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
//This method will do the rest needed
showMarker(userLatitude, userLongitude)
...
...
// Pass the desired latitude and longitude to this method
public void showMarker(Double lat, Double lon) {
    map.clear();
    // Create a LatLng object with the given Latitude and Longitude
    LatLng markerLoc = new LatLng(lat, lon);

    //Add marker to map
    map.addMarker(new MarkerOptions()
            .position(markerLoc)                                                                        // at the location you needed
            .title("Desired Title")                                                                     // with a title you needed
            .snippet("Any summary if needed")                                                           // and also give some summary of available
            .icon(BitmapDescriptorFactory.fromResource(R.drawable.your_flashing_arrow_anim_drawable))); // and give your animation drawable as icon
}

// To work these functionalities, you may require the following imports
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions; 
```

最后布局应该包含一个像这样的条目，如 MAP

```
<fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" /> 
```

希望这也能解决其他一些问题...... :)

# cakephp - 用于从 cakephp 中的帖子内容中查找标签的插件

> ID：14119625
> 
> 赞同：0
> 
> 时间：2013-01-02T09:32:39.247
> 
> 标签：cakephp, cakephp-2.1

我正在使用 cakephp 制作一个网络应用程序。

我想使用插件，它可以自动从用户编写的内容中找到标签，这样用户就不必手动编写标签，如果他/她想添加更多标签，那么他/她可以手动添加。我的问题是：cakephp 中是否有可用的插件，如果有，我如何在我的应用程序中使用它？？？？

# popup - 更新最新版本后，剑道弹出窗口非常小

> ID：14119627
> 
> 赞同：0
> 
> 时间：2013-01-02T09:32:42.657
> 
> 标签：popup, window, kendo-ui

我正在使用 Kendo 开源 Web UI。

我在应用程序中有弹出窗口。它工作正常。我从剑道网站更新到最新发布的源代码，弹出窗口变得非常小，看不清，主页在后台。

我该如何解决？

我应该回到 JQuery 还是应该继续使用剑道，希望这些问题的修复很快就会到来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:49:13.950

这是 jQuery 1.7 和 1.8 之间更改的问题。请将您正在使用的 jQuery 升级到 1.8，问题就会消失（或使用最新的 Kendo UI 内部版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:35:18.570

这是我最后一天最好的错误

你必须更新到最新的 jQuery 版本

但请记住，jQuery 1.8 有一个带有 outerHeight 函数的错误，如果在没有参数的情况下调用 outerHeight()，则返回对象而不是整数

所以你可以更新到 1.8 并编辑 kendo.web.js 文件替换任何调用 outerHeight()

到外部高度（真）

# php - PHP exec 和标头重定向

> ID：14119628
> 
> 赞同：2
> 
> 时间：2013-01-02T09:32:45.763
> 
> 标签：php, linux, exec

我有一个长时间运行的 PHP 脚本，我想在用户操作后在服务器的后台执行。并且用户应该被重定向到其他页面，而命令应该在后台运行。下面是代码

```
$command = exec('php -q /mylongrunningscript.php');
header("Location: /main.php?action=welcome"); 
```

上面的脚本运行良好，但页面在执行之前不会重定向 **`$command = exec('php -q /mylongrunningscript.php');`**。

我希望该用户应立即重定向到欢迎页面。

有没有其他方法可以完成这个任务。另一个想法是 $command = exec('php -q /mylongrunningscript.php'); 应该在欢迎页面上执行，但是在命令执行后会显示欢迎页面 HTML。命令大约需要 5,6 分钟，并且此时间页面不会重定向。

我在 Cent os Linux 上使用 PHP 5.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:34:53.900

你可以试试这个：

```
$result = shell_exec('php -q /mylongrunningscript.php > /dev/null 2>&1 &'); 
```

PS：请注意，这是将 stdout 和 stderr 重定向到`/dev/null`如果要捕获输出，请使用：

```
$result = shell_exec('php -q /mylongrunningscript.php > /tmp/script.our 2>&1 &'); 
```

或者使用这个 PHP 函数在后台运行任何 Unix 命令：

```
//Run linux command in background and return the PID created by the OS
function run_in_background($Command, $Priority = 0) {
    if($Priority)
        $PID = shell_exec("nohup nice -n $Priority $Command > /dev/null & echo $!");
    else
        $PID = shell_exec("nohup $Command > /dev/null & echo $!");
    return($PID);
} 
```

礼貌：发表在[http://php.net/manual/en/function.shell-exec.php上的评论](http://php.net/manual/en/function.shell-exec.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:36:27.740

如`exec()`PHP 手册页所述：

> 如果使用此函数启动程序，为了使其继续在后台运行，程序的输出必须重定向到文件或另一个输出流。否则将导致 PHP 挂起，直到程序执行结束。

所以让我们这样做，使用`2>&1`（基本上 2 is`stderr`和 1 is `stdout`，所以这意味着“*将所有 stderr 消息重定向到 stdout* ”）：

```
shell_exec('php -q /mylongrunningscript.php 2>&1'); 
```

或者如果你想知道它输出什么：

```
shell_exec('php -q /mylongrunningscript.php 2>&1 > output.log'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:36:10.787

将脚本输出发送到 /dev/null，exec 函数将立即返回

```
$command = exec('php -q /mylongrunningscript.php > /dev/null 2>&1'); 
```

# c# - 文件已下载但内容缺失

> ID：14119629
> 
> 赞同：0
> 
> 时间：2013-01-02T09:32:49.007
> 
> 标签：c#, asp.net, wcf, web-applications, web-config

我正在使用 WCF 上传和下载文件。我正在使用以下下载。

```
try
        {
            MyService.IWITSService clientDownload = new WITSServiceClient();
            MyService.DownloadRequest requestData = new DownloadRequest();
            MyService.RemoteFileInfo fileInfo = new RemoteFileInfo();
            requestData.ItemID = Convert.ToInt32(Request.QueryString["id"]);

            fileInfo = clientDownload.DownloadFile(requestData);

            Response.BufferOutput = false;   // to prevent buffering 
            byte[] buffer = new byte[6500000];
            int bytesRead = 0;

            HttpContext.Current.Response.Clear();
            HttpContext.Current.Response.ClearHeaders();
            HttpContext.Current.Response.ContentType = fileInfo.FileExt;
            HttpContext.Current.Response.AddHeader("Content-Disposition","attachment; filename=" + fileInfo.FileName);

            bytesRead = fileInfo.FileByteStream.Read(buffer, 0, buffer.Length);

            while (bytesRead > 0)
            {
                // Verify that the client is connected.
                if (Response.IsClientConnected)
                {

                    Response.OutputStream.Write(buffer, 0, bytesRead);
                    // Flush the data to the HTML output.
                    Response.Flush();

                    buffer = new byte[6500000];
                    bytesRead = fileInfo.FileByteStream.Read(buffer, 0, buffer.Length);

                }
                else
                {
                    bytesRead = -1;
                }
            }
        }
        catch (Exception ex)
        {
            // Trap the error, if any.
            System.Web.HttpContext.Current.Response.Write("Error : " + ex.Message);
        }
        finally
        {
            Response.Flush();
            Response.Close();
            Response.End();
            System.Web.HttpContext.Current.Response.Close();
        } 
```

文件已下载，但不显示文件数据。文件大小与实际大小相同。任何人都可以帮助我在我必须改变的地方..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:53:34.963

你不想打电话给既不`Response.Close()`也不`System.Web.HttpContext.Current.Response.Close()`。它会中断与客户端的连接。

[HttpResponse.Close 方法](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.close.aspx)的文档说：

> 此方法以突然的方式终止与客户端的连接，不适用于正常的 HTTP 请求处理。该方法向客户端发送一个重置数据包，这可能导致缓存在服务器、客户端或介于两者之间的某个位置的响应数据被丢弃。
> 
> 您可以使用此方法来响应恶意 HTTP 客户端的攻击。但是，如果您想跳转到 EndRequest 事件并向客户端发送响应，通常应该调用 CompleteRequest。

所以将`finally`代码简化为：

```
finally
{
    Response.Flush();
    Response.End();
} 
```

# android - 如何将编辑文本和图像保存在单个文件中？

> ID：14119633
> 
> 赞同：1
> 
> 时间：2013-01-02T09:32:57.860
> 
> 标签：android, file-io

如何创建和编辑可以包含文本和图像的文件。

我能够保存一个文件并再次编辑它，它只有文本。我通过从多行编辑文本中获取文本来做到这一点。我添加了一个 imageview 并为其设置了一个图像。但我不知道如何保存并检索以进行编辑。

```
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_lesson_edit);

txtData = (EditText) findViewById(R.id.txtData);
img =(ImageView)findViewById(R.id.imageView1);

final String path = "/sdcard/ram/notebook/lesson";

try {
        FileInputStream fIn = new FileInputStream(path);
        BufferedReader myReader = new BufferedReader(new InputStreamReader(fIn));
        String aDataRow = "";
        String aBuffer = "";
        while ((aDataRow = myReader.readLine()) != null) {
            aBuffer += aDataRow + "\n";
        }
        txtData.setText(aBuffer);
        myReader.close();
    } catch (Exception e) {
        Toast.makeText(getBaseContext(), e.getMessage(),Toast.LENGTH_SHORT).show();
    }

btnWriteSDFile = (Button) findViewById(R.id.btnWriteSDFile);
btnWriteSDFile.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    String notes = txtData.getText().toString()+ img.getBackground();
    try {
          FileOutputStream fOut = new FileOutputStream(path);
            OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
            myOutWriter.append(notes);
            myOutWriter.close();
            fOut.close();
            Toast.makeText(getBaseContext(),"Done writing",Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),Toast.LENGTH_SHORT).show();
        }
      }// onClick
}); // btnWriteSDFile
} 
```

我尝试过使用画布。但它将文本和图像保存为 jpg，这是不可编辑的（如果我错了，请纠正我）。

请帮助我如何做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:57:07.413

我已经通过下面的代码实现了这一点。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    sv = new ScrollView(getApplicationContext());
    ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    ll.setBackgroundColor(Color.CYAN);
    ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    sv.addView(ll);
    setContentView(sv);
Button b1 = new (Button)findViewById(R.id.button1);
b1..setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
saveAsJpg();
            }
        });

}
public void saveAsJpg ()
{
    //Bitmap b = Bitmap.createBitmap(sv.getWidth(), sv.getHeight(), Bitmap.Config.ARGB_8888);
    sv.setDrawingCacheEnabled(true);
    Bitmap b = sv.getDrawingCache();
      try {
          b.compress(CompressFormat.JPEG, 95, new FileOutputStream("/sdcard/ram/ert/d.jpg"));
          Toast.makeText(this, "Saved!", Toast.LENGTH_LONG).show();
        } catch (Exception e) {
          Log.v("EXCEPTION", e.getMessage());
        }

} 
```

# python - Django 单元测试：测试 HTML 的 CSS 选择器？

> ID：14119637
> 
> 赞同：1
> 
> 时间：2013-01-02T09:33:10.760
> 
> 标签：python, django, css-selectors, django-unittest

关于 Rails 框架，我发现了一些我非常喜欢的东西，能够使用 css 选择器非常轻松地测试模板的输出，例如测试页面中有多少“li”元素，如果存在具有特定 ID 的元素, 抄送。

与这些工具相比，AssertContains 感觉非常有限，请查看： [http ://guides.rubyonrails.org/testing.html#testing-views](http://guides.rubyonrails.org/testing.html#testing-views)

如何用 django 实现类似的功能？是否有实现 CSS 选择器的 python 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-11T21:45:20.223

[django-with-asserts](https://django-with-asserts.readthedocs.org/en/latest/)提供了一个 TestCase mixin，它允许您测试 HTML，例如：

```
with self.assertHTML(resp, 'input[name="email"]') as (elem,):
    self.assertEqual(elem.value, 'bob@example.com') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:09:05.030

您可以使用 Selenium 使用 CSS 选择器、xpath 等查找元素。驱动程序是特定于浏览器的，例如 Firefox 驱动程序、Chrome 驱动程序等，但它是您在 Django 中获得的最接近的驱动程序。

有关 LiveServerTestCase 的更多信息，请参阅：[https](https://docs.djangoproject.com/en/1.4/topics/testing/#django.test.LiveServerTestCase) : //docs.djangoproject.com/en/1.4/topics/testing/#django.test.LiveServerTestCase。

和：[http](http://selenium-python.readthedocs.org/en/latest/locating-elements.html) ://selenium-python.readthedocs.org/en/latest/locating-elements.html用于 Selenium 中可用的选择器。

# android - 如何制作一次显示三个视图的 ViewFlipper？

> ID：14119638
> 
> 赞同：2
> 
> 时间：2013-01-02T09:33:16.260
> 
> 标签：android, android-layout, android-view

我想做类似图片中的事情

![在此处输入图像描述](../Images/9e722460f22911802ef1e350cfb2e1d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:37:27.957

使用`ViewFlipper`和创建自定义`FragmentPageAdapter`

# android - 从 SherlockFragment 获取资源

> ID：14119640
> 
> 赞同：1
> 
> 时间：2013-01-02T09:33:34.037
> 
> 标签：android, actionbarsherlock, android-resources

我正在尝试`colors.xml`使用类似的东西从中获取颜色

`view.setBackgroundColor(getResources().getColor(R.color.bgcolor_view));`

虽然`R.color.bgcolor_view`我的`colors.xml`文件中有一个，但该`R.color`部分仅显示内置 android 设置中可用的颜色。所以我假设这`getResources()`不是从我的项目中获取资源。

所以，我的问题是，我如何从 SherlockFragment 中获取资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:36:41.620

查看您的导入，您可能导入了 android.R，因此删除此导入并仔细检查您是否从自己的项目中导入了自己的 R。

# javascript - 如何从 Javascript 打开 Windows 资源管理器窗口？

> ID：14119642
> 
> 赞同：3
> 
> 时间：2013-01-02T09:33:52.407
> 
> 标签：javascript, windows, windows-explorer

我拥有一个本地 PHP 销售点，使用 wampp 作为我的网络服务器 (Win7)。我正在寻找的是找到一种方法来打开闪存驱动器 E，就像我们通常通过访问我的电脑 - > USB 闪存 E：...但使用 Javascript 所做的那样。

我找到了这段代码，它可以根据需要完美运行……但这仅适用于 IE，我使用 Google chrome 作为我的 POS 浏览器，但 chrome 的作用是……打开一个空白窗口！

这是代码：

```
<script>
function CallMe()
{
 window.open("file://PCNAME/E$");
}
</script>
<html>
<input  type="button" onClick="CallMe()" value="Open USB" />
</html> 
```

有没有其他方法可以打开 USB Drive E？也许通过使用PHP？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T09:38:41.577

您可以允许用户使用以下方法从浏览器导航他们的文件系统：

```
<input type="file" />​ 
```

但是，您不能指定默认位置，浏览器也不能自动打开它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-11T06:17:13.263

```
window.open("file:///" + yourLocalOrNetworkPath); 
```

# android - Phonegap 不返回 base64 编码的数据

> ID：14119647
> 
> 赞同：0
> 
> 时间：2013-01-02T09:34:16.753
> 
> 标签：android, cordova, camera

我正在使用 Phonegap 和相机应用程序。我想获得一个 base64 编码的字符串。但无法让它工作。我总是得到图像的系统路径。我需要检索字符串。

```
function clickPhoto() 
{
    navigator.camera.getPicture(onPhotoDataSuccess, onFail, 
    { 
        quality: 25, 
        destinationType:  destinationType.FILE_URI 

    });
} 
```

我需要知道如何获取 base64 编码的字符串。我在堆栈的某处读到 phonegap 的默认值现在返回文件路径。我需要一个base64。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:39:43.810

用这个 ：

```
navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
    destinationType: destinationType.DATA_URL }); 
```

谢谢。

# android - Android - 无法打开堆栈跟踪文件

> ID：14119648
> 
> 赞同：1
> 
> 时间：2013-01-02T09:34:25.037
> 
> 标签：android, android-asynctask, gson, stack-trace

我是一名新手 Android 开发人员，我正在尝试使用 GSON 和 AsynTask 从 RESTful Web 服务获取数据。但是，当调用包含 AsynTask 类的活动时，我在 LogCat 中得到的唯一错误是：

> 01-02 11:17:58.275: E/dalvikvm(807): 无法打开堆栈跟踪文件'/data/anr/traces.txt': 是一个目录

然后`doInBackground`无法调用该方法，因此无法从 Web 服务获得响应。我已经用谷歌搜索了这个问题，但大多数人都得到了`permission denied`或其他东西，不像`is a directory`我的情况。因此，如果您对如何解决此问题有任何建议，请帮助我！

如果有人可能会要求提供包含 AsynTask 的类的代码，我将其包含在此处：

```
public class PlaceListActivity extends Activity{

    private ListView m_vwPlaceLayout;
    private ArrayList<Place> m_arrPlaceList;
    private PlaceAdapter m_placeListAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.place_list);
        m_vwPlaceLayout = (ListView) findViewById(R.id.spotListView);
        m_arrPlaceList = new ArrayList<Place>();
        m_placeListAdapter = new PlaceAdapter(this, R.layout.place_view, m_arrPlaceList);
        m_vwPlaceLayout.setAdapter(m_placeListAdapter);
        populateList();
    }

    public void populateList(){
        Intent intent = getIntent();
        String key = intent.getStringExtra("KEYWORD");
        new GetSpots().execute(key);
    }

    private class GetSpots extends AsyncTask<String, Integer, ArrayList<Place>>{

        protected ArrayList<Place> doInBackground(String... keys){
            ArrayList<Place> list = null;
            String url = "http://10.0.2.2:81/HGourmet/getPlaces?key=" + keys[0].trim();
            try{
                RestClient client = new RestClient(url);
                try{
                    client.Execute(RequestMethod.GET);
                }catch(Exception e){
                    e.printStackTrace();
                }

                String json = client.getResponse();
                Gson gson = new Gson();
                Type listType = new TypeToken<ArrayList<Place>>(){}.getType();
                list = gson.fromJson(json, listType);
            }catch(Exception e){}
            return list;
        }

        protected void onProgressUpdate(Integer... progress){

        }

        protected void onPreExecute(){

        }

        protected void onPostExecute(ArrayList<Place> placeList){
            if (placeList != null){
                for (Place place : placeList){
                    m_arrPlaceList.add(place);
                }
                m_placeListAdapter.notifyDataSetChanged();
            }
            else{
                Toast.makeText(PlaceListActivity.this, "No Results!", Toast.LENGTH_LONG).show();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:05:50.117

哦，事实证明无论何时显示堆栈跟踪错误**都不是问题。**我注意到在`doInBackground`方法中捕获异常时忘记打印错误，当我添加它时，我发现错误在于 JSON 请求的 URL。好吧，这很尴尬，但我还是解决了它。

# cocos2d-iphone - Cocos2D - 将精灵的颜色更改为原来的颜色

> ID：14119654
> 
> 赞同：2
> 
> 时间：2013-01-02T09:35:03.947
> 
> 标签：cocos2d-iphone

我正在使用以下代码更改我的精灵的颜色

```
 sprite.color = ccc3(255, 0, 0); 
```

它将颜色变为红色..

我怎样才能将颜色更改为原来的颜色？

谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T11:41:24.300

您可以通过使用返回到原始颜色

> sprite.color = ccc3(255, 255, 255);

原来的颜色没有丢失。着色方法（在这种情况下为 ccc3）不是添加颜色，而是使各个 RGB 通道变暗。这就是您不能将黑色图像着色为任何其他颜色的原因。

在您的示例中，您没有将精灵涂成红色。您刚刚切断了除红色通道之外的所有通道

# javascript - GWT - 用于客户端验证的简单 Javascript

> ID：14119657
> 
> 赞同：0
> 
> 时间：2013-01-02T09:35:28.130
> 
> 标签：javascript, gwt, client-side-validation

我是 GWT 的新手。我们可以为客户端验证编写直接的 JavaScript 代码吗？（Afaik，我们编写 Java 代码，然后它将在运行时转换为 JavaScript。我想知道的是，我们可以使用自己的 JavaScript 编写简单的客户端验证，而不编写 Java？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:41:47.277

您可以编写自己的 JavaScript 方法并从 GWT 调用它们：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:44:19.333

几乎没有必要这样做。

1）您拥有 GWT 验证框架，以实现最佳框架方法。

2) 对您的小部件进行编码以在 java 中进行大部分验证。

3) 添加您的 GWT 代码验证以更改输入小部件中的处理程序或模糊处理程序。

4) 始终依赖请求工厂的服务器端重新验证。

您应该避免将 gwt 小部件与 javascript 验证混合使用。

最后一种不推荐的方法是使用 JSNI - [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)

这允许您在 GWT Java 中包装 javascript 代码。此代码无法由 GWT 优化或单元测试。GWT Java 无法保证浏览器的这一点。

# mysql - SQL：获取元素的子元素

> ID：14119658
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:35:37.097
> 
> 标签：mysql, sql

我有一个以下结构的 MySQL 表。

```
**Table elements :**

element_id  element_name    parent_id
1           UIG             0
2           CAM             1
3           IHG             1
4           USR             1
5           DBL             1
6           APD             1
7           RTM             1
8           OCR             2
9           IRT             3
10          ICR             3
11          OCR             2
12          USH             1
13          AML             1 
```

我需要找到给定元素的子元素。

我做了以下查询：

```
SELECT parent_id,GROUP_CONCAT(element_id)
FROM elements
WHERE parent_id='1'
GROUP BY parent_id 
```

返回，

```
+-----------+--------------------------+
| parent_id | GROUP_CONCAT(element_id) |
+-----------+--------------------------+
|         1 | 2,3,4,5,6,7,12,13        | 
+-----------+--------------------------+
1 row in set (0.00 sec) 
```

虽然我还需要元素 2 和 3 的子元素，但这应该会导致

```
+-----------+------------------------------------+
| parent_id | GROUP_CONCAT(element_id)           |
+-----------+------------------------------------+
|         1 | 2,3,4,5,6,7,8,9,10,11,12,13        | 
+-----------+------------------------------------+
1 row in set (0.00 sec) 
```

我如何在没有程序和查询的情况下实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:46:15.060

您只需要`in`在子查询上使用运算符。

```
select group_concat(element_id)
from chpr
where parent_id in (
  select group_concat(element_id)
from chpr
where parent_id = 1
group by parent_id)
; 
```

* * *

**根据OP的评论，水平绝对是一个问题**

但是，根据初始样本数据和请求，这里是[SQLFIDDLE DEMO](http://sqlfiddle.com/#!2/701f6/3)，它根据问题的预期输出提供结果。

唯一的变化是需要同时按最内层的第一个子查询进行`element_id`分组`parent_id`。

根本不是一个非常优雅的查询：

```
select 1 as parent_id, group_concat(x.element_id)
from (
(select element_id
from chpr
where parent_id in
(select element_id
from chpr
where parent_id = 1
group by element_id, parent_id
))
union all
(select element_id
from chpr
where parent_id = 1
group by element_id, parent_id
)) x
; 
```

结果：

```
PARENT_ID   GROUP_CONCAT(X.ELEMENT_ID)
1           8,9,10,11,2,3,4,5,6,7,12,13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:41:08.510

使用`IN ()`谓词...

```
SELECT '1' As Parent_Id,GROUP_CONCAT(element_id)
  FROM elements 
 WHERE Parent_Id IN ('1','2','3')
 GROUP BY '1'; 
```

在这种情况下，某些数据库需要其他数据库`GROUP BY`，但即使不需要，将其包含在内也是相当好的做法。

顺便说一句，我怀疑 Parent_Id 是某种数字，在这种情况下它应该真的读...

```
SELECT 1 As Parent_Id,GROUP_CONCAT(element_id)
  FROM elements 
 WHERE Parent_Id IN (1,2,3)
 GROUP BY 1; 
```

您实际上可以完全排除`1 As Parent_Id`and `GROUP BY 1`。

如果您只能指定一个值，请使用子查询...

```
SELECT GROUP_CONCAT(element_id)
  FROM Elements 
 WHERE Parent_Id IN (SELECT Element_Id
                        FROM Elements
                       WHERE Parent_Id = 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:39:42.377

看看我的这个问题

[使用单个查询（递归查询）在 mysql 表中查找所有父级](https://stackoverflow.com/questions/12948009/finding-all-parents-in-mysql-table-with-single-query)

这是此类工作的来源。

[http://explainextended.com/2009/07/20/hierarchical-data-in-mysql-parents-and-children-in-one-query/](http://explainextended.com/2009/07/20/hierarchical-data-in-mysql-parents-and-children-in-one-query/)

# email - 在 PostFix 上更改 smtp 传出端口

> ID：14119664
> 
> 赞同：0
> 
> 时间：2013-01-02T09:35:53.577
> 
> 标签：email, ubuntu, port, postfix-mta, dovecot

我设置了 PostFix，一切正常，除了我无法发送电子邮件。现在我知道大多数 ISP 端口会阻止端口 25，如以下错误日志条目所示：

```
Jan  2 04:29:08 mail postfix/smtp[5835]: connect to gmail-smtp-in.l.google.com[74.125.134.27]:25: Connection timed out 
```

但我知道有备用端口，如 587。如何更改 PostFix 以使其尝试连接到`gmail-smtp-in.l.google.com`端口 587 而不是 25？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:03:26.913

这篇文章向您介绍了如何[使用 SMTP 凭据“使用 SMTP 和 PHP 发送邮件”</a>。本文将向您展示如何使用 Gmail 的 SMTP 服务器发送电子邮件。你需要安装两个 pear 包， Mail 和](http://scriptime.blogspot.in/2012/12/how-send-email-using-gmails-smtp-server.html)[SMTP](http://scriptime.blogspot.in/2012/12/how-send-email-using-gmails-smtp-server.html)。代码相当 [不言自明][3]。例子 ...

# c - 当我知道每个元素的大小时，如何从指向数组的 void 指针中获取项目？

> ID：14119680
> 
> 赞同：2
> 
> 时间：2013-01-02T09:37:12.500
> 
> 标签：c, void-pointers

当我想为教育目的编写自己的快速排序时，它就来了。这就是我得到的：

```
qsort(void* array, int count, int size, int(*compare)(const void*, const void*)); 
```

我有数组中每个元素的大小，以及指向数组中第一个元素的指针。如何获取该数组中的每个单独元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T09:40:21.907

如果 size 是使用运算符生成的，则它是 of （根据定义为 1）`sizeof`的倍数。`sizeof(char)`因此，将其`void*`转换为`char*`，并一次移动`size`“字符”。

```
(((char*)array) + i*size) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T09:40:09.503

您通常会使用`char *`指针进行地址运算，例如访问以下元素`i`：`array`

```
char * array_ptr = (char *)array + i * size; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T09:41:06.277

很简单，将其转换为`char*`并进行指针运算：

```
char *carray = (char*)array;
char *pointer_to_n = carray + n * size; 
```

顺便说一句，一些编译器（例如 GCC）有一个扩展，允许对指针进行指针运算，`void`就好像它们是指向 的指针一样`char`，但这是不可移植的。

# opencl - 处理 Image2D 时的 INVALID_WORK_GROUP_SIZE

> ID：14119682
> 
> 赞同：1
> 
> 时间：2013-01-02T09:37:21.513
> 
> 标签：opencl

我正在尝试在我的 AMD CPU 上使用 OpenCL 1.1 C++ 处理图像。

特点是：

```
using CPU: AMD Turion(tm) 64 X2 Mobile Technology TL-60
initCL:CL_DEVICE_IMAGE2D_MAX_WIDTH :8192
initCL:CL_DEVICE_IMAGE2D_MAX_HEIGHT :8192
initCL:timer resolution in ns:1
initCL:CL_DEVICE_GLOBAL_MEM_SIZE in bytes:1975189504
initCL:CL_DEVICE_GLOBAL_MEM_CACHE_SIZE in bytes:65536
initCL:CL_DEVICE_MAX_CONSTANT_BUFFER_SIZE in bytes:65536
initCL:CL_DEVICE_LOCAL_MEM_SIZE in bytes:32768
initCL:CL_DEVICE_MAX_COMPUTE_UNITS:2
initCL:CL_DEVICE_MAX_WORK_GROUP_SIZE:1024
initCL:CL_DEVICE_MAX_WORK_ITEM_DIMENSIONS:3
initCL:CL_DEVICE_MAX_WORK_ITEM_SIZES:dim=0, size 1024
initCL:CL_DEVICE_MAX_WORK_ITEM_SIZES:dim=1, size 1024
initCL:CL_DEVICE_MAX_WORK_ITEM_SIZES:dim=2, size 1024
createCLKernel:mean_value
createCLKernel:CL_KERNEL_WORK_GROUP_SIZE:1024
createCLKernel:CL_KERNEL_LOCAL_MEM_SIZE used by the kernel in bytes:0
createCLKernel:CL_KERNEL_PREFERRED_WORK_GROUP_SIZE_MULTIPLE:1 
```

内核暂时是空的：

```
__kernel void mean_value(image2d_t p_image,                 
                     __global ulong4* p_meanValue) 
 {

 } 
```

执行调用是：

```
cl::NDRange l_globalOffset;
// The global worksize is the entire image
cl::NDRange l_globalWorkSize(l_width, l_height);
// Needs to be determined
cl::NDRange l_localWorkSize;//(2, 2);
// Computes the mean value
cl::Event l_profileEvent;
gQueue.enqueueNDRangeKernel(gKernelMeanValue, l_globalOffset, l_globalWorkSize,
  l_localWorkSize, NULL, &l_profileEvent); 
```

如果`l_width=558`and `l_height=328`,`l_localWorkSize`不能大于 (2, 2) 否则，我得到这个错误：“无效的工作组大小”

是因为我只有2个核心吗？是否有确定 l_localWorkSize 的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:16:58.590

我在 OpenCL 规范中读到`enqueueNDRangeKernel()`如果`l_globalWorkSize`可以被`l_localWorkSize`. 就我而言，我可以将其设置为 (2,41)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:28:57.103

**您可以使用clGetDeviceInfo**函数检查两件事：

*   **CL_DEVICE_MAX_WORK_GROUP_SIZE**检查 4 对于您的工作组来说不是太大，并且

*   **CL_DEVICE_MAX_WORK_ITEM_SIZES**检查按维度划分的工作项的数量是否不太大。

并且组大小可能受限于内核数量这一事实是有道理的：如果您有工作项之间的通信/同步，您将希望它们同时执行，否则 OpenCL 驱动程序将不得不模拟这一点在一般情况下，这可能至少很难并且可能是不可能的。

# java - 用于内部 REST 通信的 OAuth + spring 安全性

> ID：14119683
> 
> 赞同：7
> 
> 时间：2013-01-02T09:37:27.057
> 
> 标签：java, rest, oauth, spring-security, oauth-2.0

## 设置

我们正在使用**Java 和 Spring**开发一个分布式应用程序，我们现有的客户端前端（包括自己的身份验证、数据库、帐户等）使用**REST**调用来访问我们的新服务器以获取其他服务。我们想用**Oauth**保护这些资源。

访问应受**角色或帐户**限制。但是，我们不希望客户端用户不必担心除了**现有帐户**之外的任何其他身份验证。同时，我们需要为第三方应用程序提供一种在通过某种服务器注册后从外部访问某些资源的方法（这就是我们首先分发的原因）。

所以我们在服务器端设置了**spring security**来提供应该用来**限制对资源的访问的**帐户。**用户应该在客户端登录，**然后只能访问分配给他的那些**服务器资源。**我们有某种注册过程，可以在客户端设置用户以便能够访问服务器服务，因此我认为应该在那里完成任何帐户设置。

## 所以问题是

如何使客户端能够获取受保护资源的访问令牌，而无需用户登录其服务器端帐户？

以及如何在不需要任何用户输入的情况下设置服务器端帐户？

## 我的想法

**这不行**

我想我要么告诉客户端在服务器端为该用户创建的新帐户（但是，我将如何选择和传达密码？）或将客户端帐户同步到服务器，并且使用这些凭据针对服务器对客户端进行身份验证并生成访问令牌。但这能节省多少？此外，服务器在其帐户上具有更高的安全性（一种加密、加盐密码），我真的不想通过使用较少保存的客户帐户来破坏这一点。

**也许这会？**

也许要走的路是在第一次身份验证期间告诉服务器有关客户端帐户的信息，在服务器端创建一个帐户，将生成的令牌存储在客户端，然后使用该令牌针对服务器对客户端进行身份验证。要求..？对于每个请求，服务器是否能够通过该令牌使用其服务器端帐户登录客户端？对于只能从客户端服务器访问的初始（两条腿？）握手，我需要一个特殊资源，对吗？

另外：OAuth 1 还是 2 哪个更适合这项任务？

我希望有人理解我的问题并可以帮助我解决可能的误解和知识差距（我现在正在阅读 Oauth 和 Spring 安全文档，所以如果我想出更清晰的图片并因此更清晰的问题，我会更新做什么）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:08:06.577

所以我们目前的状态是使用**OAuth2**主要是为了简单。我们还确信，它可能存在的与安全性相关的缺陷我们可以根据需要自行解决，并且将来很可能会由实施供应商或 IETF 解决。

为了处理 REST 服务器和 REST 客户端（都在我们的控制范围内）之间的通信，我们使用以前称为 2-legged 身份验证，现在是客户端凭据授予。我已经问了一些关于 SO 的问题，包括

*   我们当前的[spring-security 上下文设置](https://stackoverflow.com/questions/14138556/spring-security-context-setup-for-2-legged-client-credentials-oauth2-server)
*   客户端[凭据特别流动](https://stackoverflow.com/questions/14140020/understanding-oauth2-client-credentials-flow)
*   使用[长寿命令牌与重新认证](https://stackoverflow.com/questions/14315777/oauth2-long-lived-tokens-vs-reauthentication-in-a-client-credentials-flow)
*   以及如何[通过 HTTP 方法限制 REST 访问](https://stackoverflow.com/questions/14316506/oauth2-with-spring-security-limit-rest-access-by-http-method)

* * *

关于使用基于客户端的用户帐户对服务器进行身份验证，我们没有进一步了解。

现在我们像以前一样针对我们的旧客户端 Web 应用程序对用户进行身份验证，然后针对服务器 2-legged 对客户端进行身份验证。从理论上讲，这将允许任何用户使用客户端访问令牌访问任何资源，但现在这对我们来说没问题，所以我们不会在这条路上进一步调查。

尽管如此，如果有人对如何解决这个问题有一个好主意，我们会接受它，只是为了进一步加强安全性。所以，我会留下这个问题。

我目前的想法是在身份验证服务器上为每个用户注册一个新的客户端 ID，并使用生成的秘密，然后将它们同步回客户端服务器并使用这些 client_id / 秘密组合来访问由生成的用户代表的资源客户端凭据流中的 client_id。

对于我们最新的应用程序，我们将在 REST 服务器（身份验证提供程序）上存储帐户，并让用户登录该服务器，然后使用令牌按照规范的预期访问 REST 资源。

# asp.net-mvc - Lib.Web.Mvc，JqGridColumnModel 类的 CellAttributes 不起作用

> ID：14119688
> 
> 赞同：0
> 
> 时间：2013-01-02T09:37:34.357
> 
> 标签：asp.net-mvc, jqgrid, lib.web.mvc

我正在使用 Lib.Web.Mvc（版本 6.1.0）在客户端生成 jqgrid。

JqG​​ridColumnModel 的大多数属性都可以正常工作，但**CellAttributes**在这里没有任何作用。

这是我的代码：

* * *

```
configuration.Settings.ColumnsModels.AddRange(new JqGridColumnModel[]
{
new JqGridColumnModel("ProductID") { Index = "ProductID" },
new JqGridColumnModel("ProductName") {  Index = "ProductName" },
new JqGridColumnModel("SupplierID") {  Index = "SupplierID" },
new JqGridColumnModel("CategoryID") {  Index = "CategoryID" },
new JqGridColumnModel("QuantityPerUnit") {  Index = "QuantityPerUnit"}, 
```

new JqGridColumnModel("UnitPrice") { Index = "UnitPrice", *CellAttributes* *="value=1"} });

* * *

我不知道 CellAttributes 在 lastes 版本 6.1.0 中是否仍然不起作用？或者我不知道如何使用它。

请告诉我从服务器端（控制器）向单元添加更多属性的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:43:07.177

是的属性的`JqGridColumnModel.CellAttributes`代理。此属性采用一个 JavaScript 函数，该函数应返回带有属性的字符串。您可以在下面找到[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)中的相应部分：`cellattr``colModel`

> 该函数在数据创建期间向单元格添加属性 - 即动态地。例如，可以使用表格单元格的所有有效属性或具有不同属性的样式属性。该函数应返回字符串。...

并来自[Lib.Web.Mvc 文档](http://www.nudoq.org/#!/Packages/Lib.Web.Mvc/Lib.Web.Mvc/JqGridColumnModel/P/CellAttributes)：

> 获取或设置在数据创建过程中（动态地）向单元格添加属性的函数。

因此，在您的情况下，代码应如下所示：

```
configuration.Settings.ColumnsModels.AddRange(new JqGridColumnModel[]
{
    new JqGridColumnModel("ProductID") { Index = "ProductID" },
    new JqGridColumnModel("ProductName") {  Index = "ProductName" },
    new JqGridColumnModel("SupplierID") {  Index = "SupplierID" },
    new JqGridColumnModel("CategoryID") {  Index = "CategoryID" },
    new JqGridColumnModel("QuantityPerUnit") {  Index = "QuantityPerUnit" },
    new JqGridColumnModel("UnitPrice") { Index = "UnitPrice", CellAttributes = "function() { return 'value=1'; }" }
}); 
```

**更新**

有一种特殊情况，配置导入和导出功能。在这种情况下，JavaScript 函数、事件和回调的所有设置都将被忽略，因为它们无法序列化为 JSON（这是设计使然）。

# codeigniter - 使用 codeigniter 和 Ion_Auth 在 localhost 上登录和会话不起作用

> ID：14119690
> 
> 赞同：0
> 
> 时间：2013-01-02T09:37:38.127
> 
> 标签：codeigniter, session, login, ion-auth

我有一个运行良好的实时站点，可以毫无问题地登录。我有该站点的本地副本，但由于某种原因会话无法正常工作。如果我登录，我可以告诉登录已经成功，因为它试图重定向到成功页面，我可以看到一个新的会话开始了。

但是，系统无法识别我已登录。

我已经更改了 cookie_domain 配置变量，更改了 session_ip 和 session_user_agent 匹配变量，但似乎没有任何效果。

此外，我将数据库中保存会话/用户数据数据的字段的大小增加到长文本，以确保没有任何内容被截断。

有什么我错过的，有什么我忘记的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:02:31.323

啊，我的坏。我没有意识到我在那里有一个仅限开发人员的配置，需要更改它的 cookie 域。哎呀！！

# web-services - 用于 Web 应用程序的 CMUSphinx

> ID：14119696
> 
> 赞同：0
> 
> 时间：2013-01-02T09:37:55.567
> 
> 标签：web-services, web, cmusphinx

我正在尝试创建一个基于语音识别的网络。经过一番搜索，我发现 cmusphinx 是一个非常适合语音识别应用程序的库。我的问题是 cmusphinx 和 web 之间如何通信？对不起，如果这是一个愚蠢的问题。

感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:30:48.427

一般来说，您需要一个 Web 框架来将 Web 请求编组到 Java 或 C 代码，然后您只需要使用 CMUSphinx API 实现所需的语音到文本方法。

这是 JAX-RS 教程：

[http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html](http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html)

还有更轻量级的 Web 服务框架，例如[Sinatra](http://www.sinatrarb.com/) for Ruby。

您还可以使用 CMUSphinx 研究现有的 Web 服务实现，例如

[https://github.com/alumae/ruby-pocketsphinx-server](https://github.com/alumae/ruby-pocketsphinx-server)

[在此处](http://www.phon.ioc.ee/dokuwiki/lib/exe/fetch.php?id=people%3atanel%3amain.en&cache=cache&media=people%3atanel%3asltu2012_paper.pdf)阅读更多相关信息。

# c# - C# new RDOSession() 抛出异常

> ID：14119697
> 
> 赞同：2
> 
> 时间：2013-01-02T09:37:56.440
> 
> 标签：c#, outlook-redemption

我正在尝试使用 Redemtion 创建 Outlook 电子邮件。

我的部分代码：

```
RDOSession session = new RDOSession(); // throws exception 1
session.Logon(ProfileName, Password, false, true);

Send_Redemption(mail, ref session, MoveToFolder);

session.Logoff(); 
```

例外一：

> 由于以下错误，检索具有 CLSID {29AB7A12-B531-450E-8F7A-EA94C2F3C05F} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

有人可以建议告诉我为什么我得到这个，并纠正它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:54:17.530

该错误表示未注册兑换。您是否尝试使用 regsvr32.exe 重新注册它？
您的应用、Redemption 和 Outlook 的位数是多少？ 有关详细信息，
请参阅[http://www.dimastr.com/redemption/faq.htm#ErrorCreatingRedemptionObject 。](http://www.dimastr.com/redemption/faq.htm#ErrorCreatingRedemptionObject)
您可能还想使用[RedemptionLoader](http://www.dimastr.com/redemption/security.htm#redemptionloader) - 这样您根本不必处理注册表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T11:59:23.177

我发现这个旧帖子有同样的问题，这里没有任何帮助。我尝试运行安装程序进行手动注册。没有帮助。检查了 32 位/64 位冲突，但没有。

最终对我有帮助的是在注册表中搜索所有带有 redemption.dll 的条目。其中可能有 10 个具有几个不同的 CLSID。我将它们全部删除并再次运行安装程序并开始工作。

# jsf-2 - 不工作/识别 faces-config.xml 中的语言

> ID：14119699
> 
> 赞同：0
> 
> 时间：2013-01-02T09:38:08.360
> 
> 标签：jsf-2, localization, faces-config

语言“TR”不起作用/无法识别。这是我的**faces-config.xml**代码。

```
<locale-config>
      <default-locale>tr</default-locale>
      <supported-locale>en</supported-locale>
</locale-config>
<resource-bundle>
      <base-name>resource.index</base-name>
      <var>msgs</var>
</resource-bundle> 
```

*   我的属性文件位于名为 index_tr.properties 的源/资源中。其他语言如中国、加拿大等。有用。

*   我在 Locale java 类中找到了这些语言，并认识到它不包括土耳其语。我该如何解决这个谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:29:33.297

我更改了我的属性文件，如下所示。

index.properties -> index_en.properties

有必要这样做吗？我读过这个词后没有任何后缀，它是

默认为英语，不是吗？

# javascript - 在 HTML 中的 jQuery 滑块上居中图像

> ID：14119702
> 
> 赞同：0
> 
> 时间：2013-01-02T09:38:16.353
> 
> 标签：javascript, html, css, asp.net-mvc-4

我有一个 jQuery 内容滑块。但是我有一个问题，高大的图像被拉伸了。是不是可以将图像居中。有人说我需要将溢出设置为隐藏。但它没有任何区别。最好的问候莫滕斯塔克

html代码：

```
 <ul class="bxslider">
<li>
  <img id="propImageSliderLarge" src="http://billeder.edc.dk/edcmedia/2012/04-April/04/4fac343a-5d4b-4aab-8205-f57f165bc484_Size687x458.jpg"/></li>
<li>
  <img id="propImageSliderLarge" src="http://billeder.edc.dk/edcmedia/2012/04-April/04/7bdfb0cc-47ec-4afa-9fc7-aa2cbb9d43a0_Size687x458.jpg"/></li>
<li>
  <img id="propImageSliderLarge" src="http://billeder.edc.dk/edcmedia/2012/04-April/04/aad1d457-285d-42e3-8e68-e243bd2988d4_Size687x458.jpg"/></li>
<li>
  <img id="propImageSliderLarge" src="http://billeder.edc.dk/edcmedia/2012/04-April/04/768fda69-af61-4322-a60b-012040d78384_Size687x458.jpg"/></li>
<li>
  <img id="propImageSliderLarge" onload="FixImages(true)" src="http://www.blog.designsquish.com/images/uploads/victorian-flatbush-old-hous_thumb.jpg" /></li> 
```

和 Javascript：

```
<script type="text/javascript">
  $('.bxslider').bxSlider({
    pagerCustom: '#bx-pager'
  });
</script> 
```

和CSS代码：

```
#propImageSliderLarge {
  width: 530px;
  height: 400px;
  overflow: hidden; 
  position: relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:43:08.867

你在这里做错了两件事。首先，您对多个元素使用相同的 ID，这是无效的。我认为您打算使用 CSS 类。其次，您正在设置标签的`width`和`height`属性，而`IMG`实际上您应该在容器上设置这些属性（在本例中为`LI`）。尝试以下操作：

**将您的标记更改为此**

```
<li class="propImageSliderLarge">
    <img src="http://billeder.edc.dk/edcmedia/2012/04-April/04/4fac343a-5d4b-4aab-8205-f57f165bc484_Size687x458.jpg"/>
</li> 
```

**将您的 CSS 更改为此**

```
.propImageSliderLarge {
    width: 530px;
    height: 400px;
    overflow: hidden; 
    position: relative;
    text-align: center; /* this will centre your image in the LI */
} 
```

**如果大于 LI 容器，则更新图像尺寸**

该脚本假定为变量设置`containerWidth`，`containerHeight`因此只需将它们设置为您的`LI`容器大小，它会将图像大小调整为容器的最大约束，以便您可以看到整个图像。

```
function resizeImage(img) {
    var imgWidth = parseInt($(img).width());
    var imgHeight = parseInt($(img).height()); 

    if (imgWidth > containerWidth || imgHeight > containerHeight) {
        $(img).width(containerWidth);
        $(img).height(containerHeight);
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:46:15.530

首先，将属性 id 更改为属性类。Id 表示标识符，顾名思义，两个事物不能具有相同的标识符。要使图像居中，请为 ul 标签提供一个 id 并添加以下 css：

文本对齐：居中；

试试这个......不确定它是否会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:36:07.350

您可以在 onload 中运行滑块并检查它。

```
<script type="text/javascript">
  $(document).ready(function(){
    $('.bxslider').bxSlider({
      mode: 'fade',
      captions: true
    });
  });
</script> 
```

否则，您可以在[http://bxslider.com/examples中使用任何合适的滑块](http://bxslider.com/examples)

# c# - 在 NUnit 中将参数传递给 TestDelegate

> ID：14119703
> 
> 赞同：9
> 
> 时间：2013-01-02T09:38:24.403
> 
> 标签：c#, unit-testing, delegates, nunit

我正在尝试创建一个采用 testdelegate 或委托并将参数传递给委托对象的方法。这是因为我正在为所有采用相同参数（一个 id）的控制器中的方法创建测试，并且我不想为所有控制器方法创建测试。

我有的代码：

```
protected void AssertThrows_NullReference_Og_InvalidOperation(TestDelegate delegateMethod)
{

    Assert.Throws<NullReferenceException>(delegateMethod);
    Assert.Throws<InvalidOperationException>(delegateMethod);
    Assert.Throws<InvalidOperationException>(delegateMethod);
} 
```

我想做什么：

```
protected void AssertThrows_NullReference_Og_InvalidOperation(TestDelegate delegateMethod)
{

    Assert.Throws<NullReferenceException>(delegateMethod(null));
    Assert.Throws<InvalidOperationException>(delegateMethod(string.Empty));
    Assert.Throws<InvalidOperationException>(delegateMethod(" "));
} 
```

编辑：我忘了提到控制器有一个返回值。因此不能使用 Action。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T09:51:46.747

用于`Action<string>`传递接受单个字符串参数的方法。使用您的测试参数调用该操作：

```
protected void AssertThrowsNullReferenceOrInvalidOperation(Action<string> action)
{
    Assert.Throws<NullReferenceException>(() => action(null));
    Assert.Throws<InvalidOperationException>(() => action(String.Empty));
    Assert.Throws<InvalidOperationException>(() => action(" "));
} 
```

用法：

```
[Test]
public void Test1()
{
    var controller = new FooController();
    AssertThrowsNullReferenceOrInvalidOperation(controller.ActionName);
} 
```

更新：

用于`Func<string, ActionResult>`返回 ActionResult 的控制器。您也可以为此目的创建通用方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:19:27.203

如编辑中所述，控制器具有返回类型。因此，我不得不从 Action 更改为 Func，因为我在单元测试中使用了它，所以我必须创建一个临时对象来保存该函数。

基于lazyberezovsky的回答，这里是我生成的代码：

```
 public class BaseClass
    {
            protected Func<string, ActionResult> tempFunction;
            public virtual void AssertThrowsNullReferenceOrInvalidOperation()
            {
                if (tempFunction != null)
                {
                    Assert.Throws<NullReferenceException>(() => tempFunction(null));
                    Assert.Throws<InvalidOperationException>(() => tempFunction(string.Empty));
                    Assert.Throws<InvalidOperationException>(() => tempFunction(" "));
                }
            }
    } 
```

那么单元测试是：

```
[TestFixture]
public class TestClass
{
        [Test]
        public override void AssertThrowsNullReferenceOrInvalidOperation()
        {
            tempFunction = Controller.TestMethod;
            base.AssertThrowsNullReferenceOrInvalidOperation();
        }
} 
```

# wpf - 如何将 System.Char 转换为 System.Windows.Input.Key？

> ID：14119705
> 
> 赞同：0
> 
> 时间：2013-01-02T09:38:30.077
> 
> 标签：wpf

在 XAML 中，我可以这样做：

```
<KeyBinding Command="{Binding UndoCommand}"
            Key="Z"
           Modifiers="Control"/> 
```

但现在我想在后面的代码中实现这一点：

```
dim binding=New KeyBinding(someCommand,ConvertToKey("Z"), ModifierKeys.Control) 
```

“ConvertToKey”功能到底是什么样子的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:14:38.390

键是一个枚举，你可以通过将字符串转换为枚举

```
Enum.Parse(typeof(Key),"Z") 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:43:42.253

在这背后的代码中可以实现为：

```
new KeyBinding(someCommand, Key.Z, ModifierKeys.Control) 
```

# xmpp - 从 ejabberd 模块访问 muc roster (disco_items?)

> ID：14119709
> 
> 赞同：3
> 
> 时间：2013-01-02T09:38:50.303
> 
> 标签：xmpp, ejabberd, multiuserchat

我正在构建一个 ejabberd 模块来将消息的副本发送到外部 RESTful API。一切正常，对该 API 的请求正在发送带有发件人、收件人和消息正文的 POST 参数。

我为此触发了 user_send_packet 和 user_receive_packet 钩子，我可以从数据包中提取参数（发件人、收件人、正文）：

```
Sender = xml:get_tag_attr_s("from", Packet),
Recipient = xml:get_tag_attr_s("to", Packet),
Body = xml:get_path_s(Packet, [{elem, "body"}, cdata]) 
```

对于群聊 (MUC)，我还想在参数中发送 MUC 名册（参与者），但我不知道如何访问它们。

有这方面的活动吗？谁能指点我一些文件？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T06:52:23.593

您似乎想要获得特定房间的 MUC 参与者。

您需要查看 mod_muc.erl 和 mod_muc_room.erl。我不确定你使用的是哪个版本的 ejabberd，所以我将根据最新的 ejabberd 进行解释。

通过调用获得房间的pid后

```
mnesia:dirty_read(muc_online_room, {Room, Host}) 
```

你可以打电话

```
gen_fsm:sync_send_all_state_event(Pid, {get_disco_item, From, Lang}, 100) 
```

或使用类似的代码。用户列表在回复中。

如果您不喜欢回复格式，您可能需要在`handle_sync_event`mod_muc_room.erl 中添加自定义。

# c# - Compact Framework 3.5 上的 System.Data.SQLite 问题

> ID：14119713
> 
> 赞同：3
> 
> 时间：2013-01-02T09:39:15.917
> 
> 标签：c#, sqlite, embedded, windows-ce, system.data.sqlite

我在我的紧凑框架应用程序中使用 sqlite 来记录系统中的事件。我也在使用[System.Data.SQLite](http://sqlite.phxsoftware.com/)。事件有时间戳来描述它发生的时间。我将此时间戳作为刻度存储在我的表中。除此列外，该表还包含另外 5 列整数/文本类型。下面是表模式

```
CREATE TABLE T1 (TimeStamp INTEGER, Col2 INTEGER, Col3 INTEGER, Col4 INTEGER,
                      Col5 INTEGER, Col6 TEXT, PRIMARY KEY(TimeStamp DESC)); 
```

我正在使用带有以下查询的 ADO 查询两个时间戳之间的数据

```
SELECT TimeStamp,Col1,Col2,Col3,Col4,Col5 FROM T1 WHERE TimeStamp 
BETWEEN @startDate AND @endDate LIMIT 2000; 
```

我正在将用户提供的时间戳转换为 Ticks，并将它们作为“@startDate”和“@endDate”的参数值发送。

**在我执行了上面的查询之后，我开始使用while 循环**遍历 SqLiteDataReader ，我发现这个 while 循环永远不会出现并继续无休止地执行。理想情况下，它应该在读取 2000 条记录后结束。下面是代码片段。

```
SQLiteDataReader dr = cmd.ExecuteReader();

    while(dr.Read())
    {
        :
        : Fill the data from column into Event class object
        :
    } 
```

请让我知道是否有人遇到过同样的问题。

**编辑：-**经过调查，我发现这个问题出现在满载的系统上。我模拟了满载系统的环境并试了一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:12:53.310

你总是可以用另一种方式解决它，`LIMIT 2000`从 SQL 中消除并稍微改变你的读取逻辑，如下所示：

```
var dr = cmd.ExecuteReader();
var rows = 0;

while(dr.Read())
{
    if(++rows > 2000) break;

    //
    // Fill the data from column into Event class object
    //
} 
```

# openerp - OpenErp：更新表单字段

> ID：14119724
> 
> 赞同：2
> 
> 时间：2013-01-02T09:40:03.800
> 
> 标签：openerp

我想在按下触发python函数的按钮后“即时”更新表单字段。
类似 onchange 的东西允许返回字段值，但我需要在按下按钮后这样做。情况是，创建一个模块，允许根据输入的公司注册 ID 在公开的公司注册中搜索公司信息。最好的办法是显示一些带有更新字段列表的弹出窗口，并且用户必须确认是否更新字段值。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:31:56.757

您可以创建一个向导（osv.osv_memory 类）来模拟动态弹出窗口。要填充此向导，您可以使用返回的 python 函数的操作描述符，如下所示：

```
return {'res_model':'your.osv.memory',
'view_mode':'form',
'view_type':'form',
'target':'new',
'context':{...},
} 
```

感谢您获取公开公司信息的算法，您只需将字段值放在上下文中，就像您在 write() 方法中所做的那样。覆盖您的 osv_memory 的 default_get() 方法，该方法接收您的上下文，并根据需要填充您的向导。

我认为您的向导上的简单文本字段将有效地显示字段更新值，以及 2 个按钮：取消和确定（它将调用 write 方法来应用字段值，始终使用您的上下文）。

# jenkins - 在构建中止时优雅地停止构建步骤（插件）

> ID：14119727
> 
> 赞同：12
> 
> 时间：2013-01-02T09:40:10.883
> 
> 标签：jenkins, jenkins-plugins

我在 Jenkins 中有一个插件，它通过 rest 操作远程服务器。
如何在构建中止时向服务器发送最后一个请求？就这样，优雅地完成了插件的工作？

我发现的对“中止序列”的唯一引用是[this](https://wiki.jenkins-ci.org/display/JENKINS/Aborting+a+build)。这让我觉得这个过程非常粗糙，并且在它终止子（我的插件）之前我无法捕捉到信号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T10:24:52.607

我有类似的需求，我用[PostBuildScript Plugin](https://wiki.jenkins-ci.org/display/JENKINS/PostBuildScript+Plugin)解决了这个问题。

我选择运行构建步骤，但您可以运行其他几个选项。非常容易使用。无论构建如何结束（成功、失败或中止），我都有一个必须运行的脚本。这对我很有效。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T10:05:26.163

当构建中止时，`InterruptedException`抛出一个。您可以像任何其他异常一样捕获它，如果您愿意，不仅可以优雅地退出，还可以防止中止。

在您的`boolean perform()`方法中，设置一个

```
try {
 ... // Whatever your plugin does
}
catch (InterruptedException e) {
    // Code to handle build being aborted.
} 
```

语句，它将处理运行构建步骤时发生的任何中止。在`catch`语句中，您可以再次抛出`InterruptedException`以继续中止构建，或者只是返回并让构建继续。

# javascript - “单击”而不是“鼠标输入”上的 fx.morph 列表

> ID：14119728
> 
> 赞同：2
> 
> 时间：2013-01-02T09:40:12.433
> 
> 标签：javascript, mootools

我试图获得与 fx.morph 演示类似的结果，但点击而不是“mouseenter”或“mouseleave”。如果单击列表选项，它应该会变形。如果单击另一个项目，它应该变形，而原始变形到它的默认状态。第一部分很简单，但到目前为止，我还无法让第二部分按预期工作。我尝试创建一个“clickOutside”事件，但这仅在您单击不是列表项的某个位置时才有效。新物品会变形，但旧物品不会恢复到原来的状态。

到目前为止我在哪里：

```
Element.Events.outerClick = {
    base : 'click',
    condition : function(event){
        event.stopPropagation();
        return false;
    },
    onAdd : function(fn){
        this.getDocument().addEvent('click', fn);
    },
    onRemove : function(fn){
        this.getDocument().removeEvent('click', fn);
    }
};

window.addEvent('domready', function() {
    $$('#idList LI').each(function(el) {
        el.set('morph', {
            duration: 200
        }).addEvents({
            click: el.morph.pass('.hover', el),
            outerClick: el.morph.pass('.default', el)
        });
    });

});​ 
```

如果你想摆弄：http: [//jsfiddle.net/JXTMa/](http://jsfiddle.net/JXTMa/)

为了说明原始概念，我将其恢复为原始 mouseenter 示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:08:13.007

outerClick 事件将被停止，`e.stopPropagation`因此您需要手动触发该事件`this.getDocument().fireEvent('click')`

```
Element.Events.outerClick = {
    base : 'click',
    condition : function(event){
        event.stopPropagation();
        this.getDocument().fireEvent('click');
        return false;
    },
    onAdd : function(fn){
        this.getDocument().addEvent('click', fn);
    },
    onRemove : function(fn){
        this.getDocument().removeEvent('click', fn);
    }
}; 
```

这是一个示例小提琴：http: [//jsfiddle.net/cNNjP/1/](http://jsfiddle.net/cNNjP/1/)

我有时喜欢的另一种方式是创建一个类并将其用作组件。这是一个例子：http: [//jsfiddle.net/kVnY4/3/](http://jsfiddle.net/kVnY4/3/)

编辑：更新了我的组件使用的第二个小提琴`toElement`和`store`. 检查您的 javascript 控制台，您将看到从对象中检索第一个元素，然后从元素中检索对象。

# java - Java 中的正则表达式仅在出现在 .css 方法签名中时才匹配逗号

> ID：14119732
> 
> 赞同：2
> 
> 时间：2013-01-02T09:40:27.477
> 
> 标签：java, regex

我想要一个Java中的正则表达式，它只有在方法的方法签名中才会匹配`.css`。

例如

```
$('div').css( 'zIndex','10' ); 
```

在这种情况下，逗号出现在 的方法签名中`.css`。因此，它应该是匹配的。

考虑另一个例子

```
$('div').css( 'zIndex' ); 
```

下面给出的示例不应匹配，因为它在 .css 方法中没有逗号。

我写了一个正则表达式

```
\.css\(.+,.+\) 
```

这仅在某些情况下正常工作。例如`parseInt ( $('div').css('zIndex') , 10 );` 在这个例子中，正则表达式不应该匹配，因为没有逗号`.css`方法，但我的正则表达式匹配。请帮助如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:46:39.390

使用这个正则表达式：

```
\.css\([^,)]+,[^)]+\) 
```

在 Java 中，它可以翻译为：

```
\\.css\\([^,)]+,[^)]+\\) 
```

## [现场演示](http://www.rubular.com/r/ZRHlH5Wu9I)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:47:57.667

试试这个：

```
\.css\([^,)]+(,[^,)]+)+\) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:43:52.737

这是因为你应该转义括号

```
\.css[(][^,]+,[^,]+[)] 
```

# c# - Excel确定单元格的数据类型是DateTime还是Int

> ID：14119733
> 
> 赞同：1
> 
> 时间：2013-01-02T09:40:30.157
> 
> 标签：c#, excel, datetime, int

我正在研究一些功能，它需要知道给定 Excel 电子表格的用户列的数据类型。这些电子表格可以有各种格式，除了第一行是列的名称之外没有标准格式。我遇到的问题是能够区分整数和日期时间列。目前，我正在使用以下函数来确定单元格是否为 DateTime 单元格：

```
 private bool isOADate(double Val)
 {
     try
     {
         DateTime dt = DateTime.FromOADate(Val);
         return true;
     }
     catch (ArgumentException)
     {
         return false;    
     }
 } 
```

但是，如果一个单元格中有 1、2、3 等，此函数将返回 true，因为它能够将这些转换为 1899/12/31 12:00:00 AM、1900/01/01 12:00:00 AM、分别为 1900/01/02 12:00:00 AM。有没有更好的方法来确定单元格的 DateTime 数据类型？或者您能否建议对我当前的功能进行改进以区分它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:33:40.477

VBA function `Isdate()` checks also the cell format: `27/01/2012`gives `True`, the result of its integer equivalent `40935` is `False`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:09:24.353

Excel 中的每个单元格都包含一个公式、一个文本字符串或一个双精度数值。

日期/时间只是一个数字，因此 2013 年 1 月 2 日的 11:02 是 41276.45972，表示自 1899 年 12 月 31 日以来的天数（包括认为 1900 年是闰年的旧 Lotus 123 错误）。

因此，如果不了解工作表的特定上下文，就无法确定单元格是否包含日期值。

如果您知道日期将在某个范围内（特别是我们通常可以至少定义一个下限），那么可以增强该功能以测试最小值。

此外，如果您可以使用对单元格本身的引用，并且您知道包含表示日期/时间的值的单元格将被适当地格式化，那么您可以测试与`NumberFormat`日期/时间相关的属性（但这很快就会变得复杂使用自定义格式的地方）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T09:53:57.417

Excel 将日期时间存储为整数。在没有任何其他上下文的情况下，您无法区分整数和日期时间。除非用户已将列指定为日期时间；在这种情况下，您可以读取 .numberformat 并从中推断出列的类型。

# c++ - rapidxml 意外类型 alloc_func

> ID：14119742
> 
> 赞同：1
> 
> 时间：2013-01-02T09:41:12.847
> 
> 标签：c++, rapidxml

我正在使用 rapidxml 在我的项目中解析和创建 xml 文件。问题是在一个项目中它运行良好，而在另一个项目中我得到了

```
rapidxml.hpp(385): error C2226: syntax error : unexpected type 'alloc_func' 
```

错误。

有什么快速解决这个问题的方法吗？为什么它首先发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:43:00.957

已知问题 - 说明（和修复）可以在此提升票中找到：

*   [https://svn.boost.org/trac/boost/ticket/5281](https://svn.boost.org/trac/boost/ticket/5281)

# javascript - Grails JSONObject 解析问题

> ID：14119743
> 
> 赞同：0
> 
> 时间：2013-01-02T09:41:13.127
> 
> 标签：javascript, json, grails, groovy

hrere 是该问题的一个示例：

命令：

```
(new JSONObject([a:[b:1]])).toString() 
```

将导致：

```
{"a":"{b=1}"} 
```

当我期待得到

```
{"a":{"b":1}} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:34:44.533

如果您在控制器中执行此操作，则可以使用 grails JSON 转换器进行转换：

```
import grails.converters.JSON
...
render [a:[b:1]] as JSON 
```

# c# - 如何在复杂环境中使用 FQDN 获取 NETBIOS 域名

> ID：14119753
> 
> 赞同：16
> 
> 时间：2013-01-02T09:41:44.920
> 
> 标签：c#, active-directory, directoryservices

从完全限定的 Active Directory 域名获取 NETBIOS 域名有时是一项乏味的任务。[我在这里](https://stackoverflow.com/a/13814584/1027551)找到了一个很好的答案。

但是，在具有多个林的环境中，如果 PC 不在您正在查询的林中，则此方法将不起作用。这是因为`LDAP://RootDSE`将查询计算机域的信息。

有人可能会问：为什么这么复杂？只需在通过以下方式检索到的第一个点之前使用名称：

```
ActiveDirectory.Domain.GetComputerDomain().Name; 
```

或者只是获取用户的域名：

```
Environment.GetEnvironmentVariable("USERDOMAIN"); 
```

或者

```
Environment.UserDomainName; 
```

但是 NETBIOS 域名可能完全不同，您或您的计算机可能位于不同的域或林中！所以这种方法只能在简单的环境中使用。

[DJ KRAZE 的](https://stackoverflow.com/users/955076/dj-kraze)解决方案只需要稍作修改即可允许跨域查询。这假定了信任关系！

```
private string GetNetbiosDomainName(string dnsDomainName)
{
      string netbiosDomainName = string.Empty;

      DirectoryEntry rootDSE = new DirectoryEntry(string.Format("LDAP://{0}/RootDSE",dnsDomainName));

      string configurationNamingContext = rootDSE.Properties["configurationNamingContext"][0].ToString();

      DirectoryEntry searchRoot = new DirectoryEntry("LDAP://cn=Partitions," + configurationNamingContext);

      DirectorySearcher searcher = new DirectorySearcher(searchRoot);
      searcher.SearchScope = SearchScope.OneLevel;
      searcher.PropertiesToLoad.Add("netbiosname");
      searcher.Filter = string.Format("(&(objectcategory=Crossref)(dnsRoot={0})(netBIOSName=*))", dnsDomainName);

      SearchResult result = searcher.FindOne();

      if (result != null)
      {
        netbiosDomainName = result.Properties["netbiosname"][0].ToString();
      }

      return netbiosDomainName;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-15T01:13:11.693

您还可以使用[DsGetDcName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675983%28v=vs.85%29.aspx) API，它将为您完成所有的工作。如果您查询的域是本地计算机，它还会缓存调用，甚至不会访问网络。

如果您对

利用：

```
internal static string GetNetbiosNameForDomain(string dns)
{
    IntPtr pDomainInfo;
    int result = DsGetDcName(null, dns, IntPtr.Zero, null,
        DSGETDCNAME_FLAGS.DS_IS_DNS_NAME | DSGETDCNAME_FLAGS.DS_RETURN_FLAT_NAME,
        out pDomainInfo);
    try
    {
        if (result != ERROR_SUCCESS)
            throw new Win32Exception(result);

        var dcinfo = new DomainControllerInfo();
        Marshal.PtrToStructure(pDomainInfo, dcinfo);

        return dcinfo.DomainName;
    }
    finally
    {
        if (pDomainInfo != IntPtr.Zero)
            NetApiBufferFree(pDomainInfo);
    }
} 
```

P/调用：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
private class DomainControllerInfo
{
    public string DomainControllerName;
    public string DomainControllerAddress;
    public int DomainControllerAddressType;
    public Guid DomainGuid;
    public string DomainName;
    public string DnsForestName;
    public int Flags;
    public string DcSiteName;
    public string ClientSiteName;
}

[Flags]
private enum DSGETDCNAME_FLAGS : uint
{
    DS_FORCE_REDISCOVERY = 0x00000001,
    DS_DIRECTORY_SERVICE_REQUIRED = 0x00000010,
    DS_DIRECTORY_SERVICE_PREFERRED = 0x00000020,
    DS_GC_SERVER_REQUIRED = 0x00000040,
    DS_PDC_REQUIRED = 0x00000080,
    DS_BACKGROUND_ONLY = 0x00000100,
    DS_IP_REQUIRED = 0x00000200,
    DS_KDC_REQUIRED = 0x00000400,
    DS_TIMESERV_REQUIRED = 0x00000800,
    DS_WRITABLE_REQUIRED = 0x00001000,
    DS_GOOD_TIMESERV_PREFERRED = 0x00002000,
    DS_AVOID_SELF = 0x00004000,
    DS_ONLY_LDAP_NEEDED = 0x00008000,
    DS_IS_FLAT_NAME = 0x00010000,
    DS_IS_DNS_NAME = 0x00020000,
    DS_RETURN_DNS_NAME = 0x40000000,
    DS_RETURN_FLAT_NAME = 0x80000000
}

[DllImport("Netapi32.dll", CallingConvention = CallingConvention.StdCall, EntryPoint = "DsGetDcNameW", CharSet = CharSet.Unicode)]
private static extern int DsGetDcName(
    [In] string computerName,
    [In] string domainName,
    [In] IntPtr domainGuid,
    [In] string siteName,
    [In] DSGETDCNAME_FLAGS flags,
    [Out] out IntPtr domainControllerInfo);

[DllImport("Netapi32.dll")]
private static extern int NetApiBufferFree(
    [In] IntPtr buffer);

private const int ERROR_SUCCESS = 0; 
```

# jquery - 单击功能“div”未附加

> ID：14119760
> 
> 赞同：1
> 
> 时间：2013-01-02T09:42:07.930
> 
> 标签：jquery, html, click, append

我正在从数据库中搜索字符串并选择附加到文本框的字符串

我可以从数据库中获取搜索结果，并且可以将结果附加到文本框下方。

但我的问题是特定结果的 onclick 我无法获得附加结果的“id”

我的代码看起来像这样..

```
<span id="new">
    <input id="addSearch" type="text" width="50px"/>
</span>

<div id="append" style="margin-top: -11px;width: 149px;"></div>

<script type="text/javascript">

$(function(){      
  $("#addSearch").keyup(function() {    
    var v = $('#addSearch').val();
    $.getJSON('http://localhost/api/getresult/?q='+v, function(data){
      $('#append').html('');
        $.each(data, function (key,value){
           $('<div  id='+value["id"]+' class="searchResult">  
                   '+value["name"]+' 
                 </div>').appendTo($('#append'));
         });
     });    
  });    
});
$('.searchResult').click(function(){
  alert($(this).attr("id"));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:08:24.207

Your key up method is correct, you just need to modify the click event like this:

```
$(document).on('click', '.searchResult', function(e) {
    alert($(this).attr('id'));
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:05:40.527

正如 Adarsh Raj 所指出的，您没有将`click`处理程序绑定到`.searchResult`您在 AJAX 回调中附加的元素上。jQuery 集合不是“实时的”，因此事件处理程序*在调用时直接绑定在匹配的 DOM 元素上*。

但是，您应该在父元素上使用[委托事件处理程序，而不是手动将处理程序绑定到每个插入的元素：](http://api.jquery.com/on/#direct-and-delegated-events)

```
$('#append').on('click', '.searchResult', function(){
    alert($(this).attr("id"));
}); 
```

This requires that the `#append` element is in the DOM at the time of the call, but any `.searchResult` elements inserted later will be able to trigger the event handler through event propagation. Another advantage is that there is only one event handler handling the click event for *all* `.searchResult` elements, instead of having an event handler for each individual element.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:48:37.813

尝试

```
var a = $('<div  id='+value["id"]+' class="searchResult"> '+value["name"]+' </div>');
$('#append').append(a);

instead of your approach below
var a = $('<div  id='+value["id"]+' class="searchResult">  
                       '+value["name"]+' </div>').appendTo($('#append')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:50:28.027

你不需要`var a`

`$(stuff).appendTo(selector)`很好。

尽管这不是解决方案，而是一种观察。

因此，假设您来自后端的响应给出了这样的 JSON： `{ id: 123, name: "name" }`

您在函数中的迭代 `$.each(data, function(k,v) {`

`v`本身具有所需的值。`value["id"]`是错误的，并试图访问`id`密钥的属性。所以你不需要对 JSON 的迭代，你可以简单地访问它的属性，如果你知道它们是什么的话。

试试这个：

`$('<div id=' + data["id"] + 'class="searchResult">' + data["name"] + ...`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T09:59:36.943

您正在尝试在元素进入 dom 之前绑定 click 函数。所以在你的循环中绑定事件

```
$(function(){      
  $("#addSearch").keyup(function() {    
    var v = $('#addSearch').val();
   $.getJSON('http://localhost/api/getresult/?q='+v, function(data){
     $('#append').html('');
      $.each(data, function (key,value){
         $('<div  id='+value["id"]+' class="searchResult">  
               '+value["name"]+' 
             </div>').appendTo($('#append'));

          bindClick();
       });
   });    
});    
});
function bindClick(){
    $('.searchResult').click(function(){
      alert($(this).attr("id"));
   });
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T10:43:18.347

try like this,

$('.searchResult').live('click', function() {

```
alert($(this).attr("id")); 
```

});

# javascript - 通过按钮删除动态添加的 li

> ID：14119764
> 
> 赞同：1
> 
> 时间：2013-01-02T09:42:27.900
> 
> 标签：javascript, jquery, html

我创建了一个通过带有删除按钮的按钮动态`<ul>`添加的内容。`<li>`

最初默认的 li 不能包含删除，所以我在脚本中添加了它

**脚本**

```
$(document).ready(function(){
$("#add").click(function () 
{       
  $('.main').append('<br>');    
  $('.main').append($('.append_list').html());

  $('.main').append("<button class='rmv_btn' style='clear:both'> Remove </button>");

});                 
$(".rmv_btn").click(function () 
{
   $(this).remove("append_list");
  //Also tried this      $(this).closest('li').remove();
});
}); 
```

当我单击删除按钮时，该特定部分仅删除了.....

**HTML**

```
 <ul class="main" style="list-style-type:none;">
<li class="append_list">
  <label>Product 1</label> <input type="text">
  <br>
   <label>Product 2</label> <input type="text">
  <br>
   <label>Product 3</label> <input type="text">
  <br>
   <label>Product 4</label> <input type="text">
  <br>

</li>
</ul>
<button id="add" style="clear:both">ADD NEW PRODUCTS</button>- 
```

在这里，我做了一个[垃圾桶](http://jsbin.com/unaxon/4/)。

我怎么能做这个？？

**笔记**

我已经完成了这个过程，但直到它完成，因为我想将删除按钮放在此处创建的第一个文本框旁边......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:05:51.037

试试这个方法

```
$(document).ready(function(){
$("#add").click(function () 
{       
    $('.main').append($('.main > :first-child').clone());
    $('.main').append("<button class='rmv_btn' style='clear:both'> Remove </button>");

});                 
$('.main').on("click",".rmv_btn",function () 
{   $(this).prev('li').remove();
     $(this).remove();
});
});​ 
```

[工作演示](http://jsfiddle.net/MpEUZ/1/)

## [更新的演示](http://jsfiddle.net/MpEUZ/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:43:52.407

您需要使用**[on()](http://api.jquery.com/on/)**在动态添加的控件上绑定事件。您还需要将按钮附加到 added`li`中，而不是添加到`ul`.

**[现场演示](http://jsbin.com/unaxon/16/edit)**

```
$(document).ready(function() {
    $("#add").click(function() {
        $('.main').append('<br>');
        $('.main').append($('.append_list :first').clone());
        $('.main li:last').append("<button class='rmv_btn' style='clear:both'> Remove </button>")
        $('.main li:last :input').val('');
    });

    $(document).on("click", ".rmv_btn", function() {
        $(this).closest('li').remove();

    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:44:31.580

使用[on()](http://api.jquery.com/on/)。`on`将一个或多个事件的事件处理函数附加到选定元素。

```
$(document).on('click',".rmv_btn",function ()
 ..... 
```

**更新**

代码在里面追加元素，`<li>`所以你新添加的元素丢失了`<li>`......你需要在里面追加元素，`<ul class=main>`以便添加的元素被包装 inisde`<li>`

```
$("#add").click(function () {           
 //$('.main').append('<br>');
   $('ul.main').append($(".main").html());
   $('.main li:last').append("<button class='rmv_btn' style='clear:both'> Remove </button>");   
}); 

$(document).on("click", ".rmv_btn", function () 
{
   $(this).closest('li').remove(); // and add the closet() to remove to closest <li>

});​ 
```

[在这里](http://jsfiddle.net/6zVgm/1/)摆弄..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T10:47:16.977

一种解决方案可能只是直接附加删除功能。

```
$(document).ready(function() {
    $("#add").click(function () {
        $('.main').append("<div><br />" + $('.append_list').html() + '<button class="rmv_btn" onclick="$(this.parentNode).remove()">Remove</button></div>');
    });
}); 
```

[演示](http://jsbin.com/unaxon/11)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T13:23:50.710

有点晚了，但我想把这个扔进去，不需要[`jQuery.on()`](http://api.jquery.com/on/)

[JSFiddle](http://jsfiddle.net/pbXsX/)

HTML：

```
<ul class="main" style="list-style-type:none;">
<li class="append_list">
    <label>Product 1</label> <input type="text">   <br>
    <label>Product 2</label> <input type="text">   <br>
    <label>Product 3</label> <input type="text">   <br>
    <label>Product 4</label> <input type="text">   <br>
</li>
</ul>
<button style="clear:both" onclick="add_products()">ADD NEW PRODUCTS</button>- 
```

JS：

```
function remove_products(element) {
    $(element).prev().remove();
    $(element).remove();
}

function add_products() {
    $('.main').append($('.main > :first-child').clone());
    $('.main').append('<button style="clear:both" onclick="remove_products(this)"> Remove </button>');
} 
```

# batch-file - 紧凑型文件

> ID：14119765
> 
> 赞同：0
> 
> 时间：2013-01-02T09:42:33.233
> 
> 标签：batch-file, window, cmd

我想压缩一个比今天更早的目录下的所有文件。我使用的命令是 forfiles /p E:\testbeg /s /d -1 /c "CMD /c Compact "

在 E:\Testbeg 中有今天创建的文件夹和文件，其中一些是较旧的。

我想压缩所有比今天旧的文件并保持今天的文件不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:20:45.853

以下将压缩最后一天内未修改的文件，但显然它不是您要查找的文件。

```
forfiles /p E:\testbeg /s /d -1 /c "CMD /c if @isdir==FALSE Compact /c @path" 
```

根据您的评论，您希望压缩1 天前*创建的文件夹中存在的所有文件。*我想您还想压缩文件夹本身，以便自动压缩添加到其中的新文件。

我认为 FORFILES 不会有帮助，因为它使用“最后修改日期”，而不是“创建日期”。如果您在文件夹中添加或修改文件，则会更新文件夹的最后修改日期。

# php - 子类中的self如何在php中完全工作

> ID：14119768
> 
> 赞同：0
> 
> 时间：2013-01-02T09:42:41.360
> 
> 标签：php

我正在尝试使用下面的类生成一个 xml 文件，当传递一个没有深度约束的数组数据时，下面的代码会成功生成 xml。我只是想弄清楚 `self::createNode($value, $child);`语句是如何工作的，它会创建一个新对象吗？`parent::_construct`类构造函数中的语句有什么意义？因为编码已经在子类构造函数中初始化。从现在开始，我所读到的关于 self 关键字的内容是它用于调用静态方法，但这里的 createNode 方法是非静态的。有人能帮我理解这句话的上下文吗，我在这里可以说的是 DomDocument 类根本没有任何 createNode 方法。有人能帮忙吗？非常感谢你。

```
class array2xml extends DomDocument
{
    public $nodeName;
    private $xpath;
    private $root;
    private $node_name;
    public $xml_data;

    public function __construct($root='root', $node_name='node')
    {
        parent::__construct();
        $this->encoding = "UTF-8";
        $this->formatOutput = true;
        $this->node_name = $node_name;
        $this->root = $this->appendChild($this->createElement($root));
        $this->xpath = new DomXPath($this);
    } 

    public function createNode( $arr, $node = null)
    {   
        if (is_null($node))
        {
            $node = $this->root;
        }
        foreach($arr as $element => $value) 
        {
            $element = is_numeric( $element ) 
                ? $this->node_name 
                : $element;
            $element = htmlspecialchars($element,ENT_QUOTES,'UTF-8');
            $child = $this->createElement($element, (is_array($value) 
                ? null 
                : htmlspecialchars($value,ENT_QUOTES,'UTF-8')));
            $node->appendChild($child);
            if (is_array($value))
            {
                self::createNode($value, $child);
            }
        }
    }

    public function __toString()
    {
        $this->xml_data= $this->saveXML();
        return $this->saveXML();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:18:34.173

在 PHP中`self` **总是**指`self`被执行的类。因此，在您的情况下，`self`将引用类中的方法`array2xml`。

通常`self`用于调用`static`方法。由于在您的情况下调用的方法`self`不是静态的，因此最好使用它`$this`。

where`parent`总是从“父”类调用方法。所以扩展的类。同样在您的情况下，当`parent::some function()`被调用时，它将在`DomDocument`类中搜索该方法。因为那是“父”（扩展）类。

在类`parent::__construct()`的构造函数中调用的原因是，当您自己的类**也**使用. 除非你的班级**没有**. 只有这样 PHP 才会调用父类的。否则，您将不得不从您自己的构造函数中手动调用它。`array2xml`**`__construct()`**`__construct()``__construct()`****

# iphone - Xcode 构建设置

> ID：14119771
> 
> 赞同：2
> 
> 时间：2013-01-02T09:42:50.863
> 
> 标签：iphone, xcode, ios5

我的项目的构建设置有问题，没有下拉菜单，请参见图片。我意识到已经提出了类似的问题，但这并没有为我的问题提供答案。

图片：[构建设置屏幕截图](https://www.dropbox.com/s/m31m5i7by0i1spt/xcodeBuildError.png)

（作为新用户，我无法在此处附加图片，请参阅上面的 Dropbox 链接）

我在另一台 Mac 上开始了该项目的开发，然后在我的新 Mac 上更新并完成了它。我的配置文件都已安装并列在配置部分 xcode 管理器中。

我可以在 sim 和我的设备上构建和测试 OK，但是当我尝试更改发布的代码签名设置时，我无法看到文档中指示的下拉列表。

非常感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:06:18.327

转到编辑器 - > 显示值。它会像魅力一样工作:)

![在此处输入图像描述](../Images/003cb11da404096a8fdca406df25a188.png)

# ruby - 如何更改 Jekyll 生成的文件的扩展名？

> ID：14119772
> 
> 赞同：2
> 
> 时间：2013-01-02T09:42:54.840
> 
> 标签：ruby, jekyll

如何使用 Jekyll 生成不是 * *.html*文件，而是使用另一个扩展名生成文件？我想用*rb*插件修补它。可能吗？

我试过这个（用谷歌搜索），但它不起作用：

```
module Jekyll

  # Extensions to the Jekyll Page class.

  class Page

    def output_ext(ext)
      ".myext"
    end

  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:00:45.773

如果你想要一个`_sites/`带有扩展名的“from the box”的输出，你可以只使用`pages`文件——它们不使用`permalink`来自配置的文件，所以这些文件将具有你给它们的相同扩展名。

因此，最小的集合是`page.my-ext`项目根目录中的一个文件，它有一个 YAML 前端（可能为空），如下所示：

```
---
---

Foo 
```

这样的文件对 Jekyll 是可见的，你可以在里面使用任何液体标记，或者使用任何布局，然后这个文件将被保存到`_sites/`与之前相同的名称。

你不能`/_posts/`在.`permalink``.html`

带有转换器的自定义插件对我有用，但也仅适用于简单页面 - 来自`/_posts/`的帖子仍在获取`.html`，所以它似乎在那里被硬编码。

因此，目前唯一的方法是使用简单的页面而不是帖子。如果你想像使用帖子一样遍历所有这些页面，你应该阅读 Jekyll Bootstrap 的[pages_list 模块](http://jekyllbootstrap.com/api/bootstrap-api.html#jbpages_list)是如何制作的——我认为它是这样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T20:48:14.600

编辑：

解决方案在这里找到：http: [//jekyllrb.com/docs/permalinks/](http://jekyllrb.com/docs/permalinks/)

您可以在标记帖子中指定永久链接。不幸的是，如果在 _config.yml 中指定，它将无法工作

根据我的测试，如果您在标记帖子中输入：

永久链接：/whatever/filename/with/arbitrary.xtension

，您的索引文件将被命名为“arbitrary.xtension”并放置在文件夹中：/whatever/filename/with/

对于文件内容需要与扩展名一致的其他应用程序，此插件可能会对您有所帮助： [https ://github.com/fauno/jekyll-pandoc-multiple-formats](https://github.com/fauno/jekyll-pandoc-multiple-formats)

# hibernate - 哪个是我们可以用于 Java Web 应用程序的 hibernate 的稳定版本

> ID：14119776
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:43:07.697
> 
> 标签：hibernate

我们想在基于 Java 的 Web 应用程序中使用 Hibernate，但我们不确定应该使用哪个稳定版本的 Hibernate？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:45:41.863

这取决于您的 JVM 版本、应用服务器版本等，但一个好的起点是[Hibernate.org](http://www.hibernate.org/)和[最新的 Hibernate](http://sourceforge.net/projects/hibernate/files/latest/download)下载包。

# html5-canvas - HTML5 中的文本编辑控件

> ID：14119785
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:44:02.110
> 
> 标签：html5-canvas

我发现他们中的许多人建议避免使用 canvas 标签来实现 html5 中的文本编辑选项。但我找不到此“作者应避免使用画布元素实现文本编辑控件”的替代选项。谁能告诉我同样的替代解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:32:24.580

使用父级相对定位`<canvas>`并将您的 HTML UI 逻辑放在画布顶部。

例子：

[在 HTML5 画布上添加按钮和控件](https://stackoverflow.com/questions/12343053/adding-buttons-and-controls-on-html5-canvas/12343088#12343088)

它本身不是替代解决方案，而是唯一明智的方法。

# sql-server-2008 - 部署报告本地 URL 不起作用

> ID：14119786
> 
> 赞同：2
> 
> 时间：2013-01-02T09:44:07.043
> 
> 标签：sql-server-2008, reporting-services

我正在尝试使用 MS Reporting Services。到目前为止，我已经能够使用*AdventureWorks*数据库创建一个简单的报告。

我想采取的下一步是部署我的报告。这就是我所做的：

1.  在*商业智能*编辑器中，我右键单击项目名称并单击属性
2.  我添加了一个*Start Item*并将其设置为*Reporting Services Configuration Manager*`TargetServerURL`中显示的 URL 。网址是：*`http://ADMIN-PC:80/ReportServer`*
**   之后，我单击“确定”退出“属性”窗口。然后我在*Build*菜单中点击*Build Report Project1 。**

 **在它尝试构建后，它给了我以下错误：

> 找不到指定的报表服务器 URL：“http://admin-pc/ReportServer”。验证 URL 的语法以及报表服务器是否存在。

我确定网址是正确的。或者至少，这是*Reporting Services 配置管理器*所说的。

所以我不知道接下来要检查什么来解决这个问题。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:32:15.813

尝试解决这些一般的“它不工作”错误总是很困难，但这里有一个粗略的想法，我会尝试查看：

1.  **服务是否正在运行？**如果您可以通过*Reporting Services 配置管理器*进行连接，那么答案可能是肯定的，但它始终是要检查的第一件事！

2.  **网址是否正确？**您可能需要检查您使用的 URL 是否正确 - 这些可以通过*Reporting Services 配置管理器*进行确认；默认情况下，命名实例将具有类似`http://admin-pc/ReportServer_InstanceName`和的 URL `http://admin-pc/Reports_InstanceName`。

3.  **我可以连接出 BIDS 吗？**当您`http://admin-pc/ReportServer`通过 Internet Explorer 连接时会发生什么？怎么样`http://admin-pc/Reports`？

4.  **有权限问题吗？**默认情况下，唯一可以访问 SSRS 的用户是`BUILTIN\Administrators`组中的用户。你的用户在这个组吗？

5.  **UAC是在搞砸我吗？**如上所述，只有管理员拥有默认访问权限，但如果启用了 UAC，即使您在此组中，您仍然不会以管理员身份连接。尝试运行 BIDS 或 Internet Explorer，`Run As Administrator`看看是否有任何不同。

6.  **URL注册成功了吗？**如果端口已在使用中，则 URL 将不起作用，但即使端口在使用中，`Reporting Services Configuration Manager`您也可以很高兴地设置它而不会出错；特别是在使用端口 80 时。检查日志文件`Program Files\Microsoft SQL Server\<SSRSInstance>\Reporting Services\LogFiles`；如果无法在指定端口上注册 URL，则会记录错误。如果您在此处看到错误，请尝试使用其他端口。

7.  **日志中还有其他错误吗？**如果失败，请检查日志是否有更多错误。

我承认，没什么可继续的，但也许这里有一些你没有看过的东西。我想说通过这些检查已经解决了我过去看到的 99% 的错误。**

# android - 在谷歌地图（Android）中显示两个位置之间的路径

> ID：14119787
> 
> 赞同：0
> 
> 时间：2013-01-02T09:44:08.677
> 
> 标签：android, google-maps

我正在开发一个与 Android Place Locator 相关的应用程序，我一直在努力显示位置（许多位置和自己的位置），但我想显示任意两个位置之间的路径。位置可以是任意两个。工作了很多，但没有找到任何解决方案。请给我一些参考，以便我得到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:57:20.560

```
try this code   

   String uri = "http://maps.google.com/maps?saddr=" +
   currentLatitude+","+currentLongitude+"&daddr="+fixedLatitude+","+fixedLongitude;
   Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
   Uri.parse(uri)); intent.setClassName("com.google.android.apps.maps",
   "com.google.android.maps.MapsActivity"); startActivity(intent); 
```

愿这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-21T07:23:46.507

要添加此库，请在 gradle 中添加依赖项为

```
compile 'com.akexorcist:googledirectionlibrary:1.0.4' 
```

在活动中使用此代码

```
GoogleDirection.withServerKey("YOUR_SERVER_API_KEY")
            .from(new LatLng(37.7681994, -122.444538))
                .to(new LatLng(37.7749003,-122.4034934))
                .avoid(AvoidType.FERRIES)
                .avoid(AvoidType.HIGHWAYS)
                .execute(new DirectionCallback() {
        @Override
        public void onDirectionSuccess(Direction direction, String rawBody) {
            if(direction.isOK()) {
                // Do something
Snackbar.make(btnRequestDirection, "Success with status : " + direction.getStatus(), Snackbar.LENGTH_SHORT).show();
              googleMap.addMarker(new MarkerOptions().position(origin));
            googleMap.addMarker(new MarkerOptions().position(destination));

            ArrayList<LatLng> directionPositionList = direction.getRouteList().get(0).getLegList().get(0).getDirectionPoint();
            googleMap.addPolyline(DirectionConverter.createPolyline(this, directionPositionList, 5, Color.RED));

        }

            } else {
                // Do something
            }
        }

        @Override
        public void onDirectionFailure(Throwable t) {
            // Do something
        }
    }); 
```

它会帮助你，它会帮助我

# javascript - 通过点击函数中的href链接获取id

> ID：14119788
> 
> 赞同：0
> 
> 时间：2013-01-02T09:44:14.237
> 
> 标签：javascript, jquery

我有一个相当直截了当的问题。为什么我不能`$('a.view').attr('id')`在我的点击函数中使用 (Ref //1 in code)？我试过了，它没有工作，但`this.id`工作。我想我主要想知道下面代码上下文的区别：

**displayRecord.php（以下链接调用click函数）：**

```
echo '<td><a href="#" style="text-decoration: none;" id="'.$data['id'].'" class="view" ><input type="button" value="View" /></a></td>'; 
```

**编辑票证.php：**

```
$('a.view').click(
            function(e) 
                {    
                             //1                    
                             var ticket_id = this.id;

                    dlg.load('displayRecord.php?id='+this.id, function(){                           

                    var escalationValue = '';

                    $.post('escalateValue.php',{post_ticket_id:ticket_id}, 
                    function(data) {

                        if (data == 'No'){
                            showCount();
                        }
                    });

                    dlg.dialog('open');

                });

            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:49:44.253

`$('a.view').attr('id')`可以匹配多个元素，如果你有一个类的多个锚点，所以如果你在事件中`view`使用它，你不一定会得到点击的元素。仅指被点击的元素，也是最快的方式，但为了证明你也可以这样做：`click``this.id`

```
$(this).attr('id'); // in the click event 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:52:59.387

这个这个，看看你是否收到任何警报：

```
$(document).on('click', 'a.view', function(e) {
    alert($(this).attr('id'));
    alert(this.id);
});​ 
```

# javascript - 使用 PhoneGap 进行同步

> ID：14119789
> 
> 赞同：0
> 
> 时间：2013-01-02T09:44:14.950
> 
> 标签：javascript, android, html, jquery-mobile, cordova

[我使用Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求从服务器获取所有[JSON](http://en.wikipedia.org/wiki/JSON)数据。但在我这边我修改了数据，所以我需要使用 JavaScript、jQuery、[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)、[HTML5](http://en.wikipedia.org/wiki/HTML5)和 Ajax 将修改后的数据发送到服务器。

这样做的一些例子是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:48:43.030

用这个：

```
Ext.Ajax.request({ 
    url         : serverApiUrl,
    method      : "POST",
    scriptTag   : true,
    headers     : {'Content-Type': 'application/json'},
    scope       : this,
    jsonData    : yourModifiedJsondata, 
    success     : successFN,
    failure     : failureFN
});

function onError(jqXHR, textStatus, errorThrown) {
   // Or use alerts if you can't see your log
   console.log("status: " + textStatus);
   console.log("errorThrown: " + errorThrown);
   // can't remember if this works:
   console.log(jqXHR.statusText);
}

console.log('ajaxing!'); 
$.ajax({ 
   type: 'post', 
   url: 'PRIVATE_URL', 
   data: {test:'asdf'}, 
   dataType: 'json', 
   success: function(data){ 
      console.log('done'); 
   },
   error: onError
}); 
```

# powershell - 在清除队列之前获取 powershell 到电子邮件消息队列的大小

> ID：14119791
> 
> 赞同：0
> 
> 时间：2013-01-02T09:44:19.647
> 
> 标签：powershell, msmq

在清除队列之前，是否有办法让 powershell 通过电子邮件发送队列中的消息数量？

我能够清除队列并让它对消息进行计数，但电子邮件可能有助于识别问题。如果队列突然开始增加。

我想我需要做的是有一个脚本来计算消息，然后如果它超过预定义的限制，它将发送一封包含消息计数的电子邮件，然后在队列上运行清除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:27:51.140

这是我用来从 Powershell 脚本发送电子邮件的一些 Powershell 代码

```
$smtpServer = ""
$smtpFrom = ""
$smtpTo = ""
$messageSubject = "Email Message";
$messageBody =  "Body of Email"

$smtp = New-Object Net.Mail.SmtpClient($smtpServer)
$mail = new-object System.Net.Mail.MailMessage
$mail.from = $smtpFrom
$mail.to.add($smtpTo)
$mail.subject = $messageSubject
$mail.body = $messageBody
$mail.IsBodyHtml = $true
$smtp.Send($mail) 
```

# android - 如何在android中的listview上使用上下文菜单？

> ID：14119802
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:44:57.507
> 
> 标签：android, listview, contextmenu

我真的不知道，如何在 android 的 listview 上使用上下文菜单。所以请给我一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:03:11.520

您必须在 Activity 中为 ListView 调用 registerForContextMenu(...) 函数。

检查此线程中接受的答案： [自定义 ListView 和上下文菜单。如何得到它？](https://stackoverflow.com/questions/3972945/custom-listview-and-context-menu-how-to-get-it)

# iphone - 在 youtube 嵌入视频 iphone webview 上检测手势

> ID：14119804
> 
> 赞同：0
> 
> 时间：2013-01-02T09:44:58.927
> 
> 标签：iphone, uiwebview, youtube

这是我在这里的第一篇文章，我有一个应用程序，里面有一个嵌入的 Youtube 视频`UIWebView`

我想检测用户的手势，`webview`以便提示加载图像。有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:38:32.883

无需使用任何手势。您只需要使用 UIWebView 委托方法。

检查这个

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)

# java - 如何在应用程序启动时在 TextView 中显示 Android 设备的 MAC 地址

> ID：14119806
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:45:04.763
> 
> 标签：java, android, mac-address

我有一个平板电脑用户将登录的基本登录屏幕，我想在应用程序启动时在屏幕上显示该特定设备的 MAC 地址。

后来，随着我对 Android 开发的了解越来越多，而且我学得越来越慢，我想通过 RESTful Web 服务将用户名、登录时间和 MAC 地址插入数据库。但现在我只是想显示 MAC 地址。

我找到了一些用于从 WIFI 管理器获取 MAC 地址的代码，您将在下面的代码中看到并将其放入方法中。似乎当我在 onCreate 方法中调用此方法时，应用程序会爆炸。什么是正确的工作流程？我应该从 onCreate() 方法中调用 showMACAddress() 吗？它应该在尝试/捕获中吗？

顺便说一句，我正在使用 Android 4.0 的 7 英寸 Kenton 平板电脑上进行测试，并且我在 Android Manifest 文件中指定该应用程序仅为横向。先感谢您。

这是我的java类

```
package za.co.crcode.Inspector;

import android.net.wifi.WifiInfo;  
import android.net.wifi.WifiManager;  
import android.os.Bundle;  
import android.app.Activity;  
import android.content.Context;  
import android.view.Menu;  
import android.widget.TextView;  

public class DeviceLogin extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_device_login);
        showMACAddress();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_device_login, menu);
        return true;        
    }

    public void showMACAddress(){
        WifiManager wifiMan = (WifiManager) this.getSystemService(
            Context.WIFI_SERVICE);
        WifiInfo wifiInf = wifiMan.getConnectionInfo();
        String macAddr = wifiInf.getMacAddress();

        TextView loginDeviceMACAddress = (TextView)findViewById(R.id.LoginDeviceMACAddress);
        CharSequence macAddy = (String) macAddr.toString();     

        loginDeviceMACAddress.setText(macAddy);
    }

} 
```

这是我的 Android GUI XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".DeviceLogin" >

    <LinearLayout
        android:id="@+id/LoginFieldsLayoutLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerVertical="true"
        android:layout_marginTop="5dp"
        android:layout_marginLeft="50dp"
        android:gravity="left"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/LoginScreenHeading"
            android:layout_width="200dp"
            android:layout_height="40dp"
            android:layout_marginTop="20dp"
            android:text="@string/loginScreenHeading"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <EditText
            android:id="@+id/LoginFirstName"
            android:layout_width="200dp"
            android:layout_height="40dp"
            android:layout_marginTop="10dp"
            android:ems="10"
            android:hint="@string/loginFirstNameHint"
            android:inputType="textPersonName"
            android:text="@string/loginFirstName" />

        <EditText
            android:id="@+id/LoginLastName"
            android:layout_width="200dp"
            android:layout_height="40dp"
            android:layout_marginTop="10dp"
            android:ems="10"
            android:hint="@string/loginLastNameHint"
            android:inputType="textPersonName"
            android:text="@string/loginLastName" />

        <EditText
            android:id="@+id/LoginEmployeeID"
            android:layout_width="200dp"
            android:layout_height="40dp"
            android:layout_marginTop="10dp"
            android:ems="10"
            android:hint="@string/loginEmployeeIDHint"
            android:inputType="number"
            android:text="@string/loginEmployeeID" />

        <EditText
            android:id="@+id/loginPassword"
            android:layout_width="200dp"
            android:layout_height="40dp"
            android:layout_marginTop="10dp"
            android:ems="10"
            android:hint="@string/loginPasswordHint"
            android:inputType="textPassword" >

        </EditText>

        <TextView
            android:id="@+id/LoginMACAddressLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dp"
            android:text="@string/LoginMACAddressLabel"
            android:textAppearance="?android:attr/textAppearanceLarge" />
        <TextView
            android:id="@+id/LoginDeviceMACAddress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dp"
            android:text="@string/LoginMACAddress"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/LoginFieldsLayoutRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"        
        android:layout_marginTop="75dp"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/LoginIdPic"
            android:contentDescription="@string/EmployeeImage"          
            android:layout_width ="wrap_content"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:maxWidth="200dp"
            android:maxHeight="200dp"
            android:scaleType="fitCenter"           
            android:src="@drawable/idpic" >         
        </ImageView>

        <Button
            android:id="@+id/LoginScreenButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/loginButtonText"
            android:layout_gravity="center" />                      

    </LinearLayout>  

</RelativeLayout> 
```

这是我的 Strings.XML

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Inspector</string>
    <string name="hello_world">Hello World!</string>
    <string name="menu_settings">Settings</string>
    <string name="loginScreenHeading">Device Login</string>    
    <string name="loginFirstName">First Name</string>
    <string name="loginFirstNameHint">Enter your first name</string>
    <string name="loginLastName">Last Name</string>
    <string name="loginLastNameHint">Enter your last name</string>
    <string name="loginEmployeeID">Employee ID</string>
    <string name="loginEmployeeIDHint">Enter your employee ID</string>
    <string name="loginPasswordHint">Password</string>
    <string name="LoginMACAddressLabel">Device ID</string>
    <string name="LoginMACAddress">00:00:00:00</string>
    <string name="loginButtonText">Login</string>
    <string name="EmployeeImage">Employee_image</string>
</resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:28:28.133

应该可以工作，`setText()`您不必`macAddr`从`String`to 转换`CharSequence`（CharSequence 是一个接口，而 String 实现了它）。我相信为什么您的应用程序崩溃是因为您 **没有将权限 * 添加*到`AndroidManifest.xml`文件中。

放入`<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>`，`AndroidManifest.xml`您的问题应该得到解决。

# eclipse - 在 Eclipse IDE 中将新的文本文件行分隔符设置为 Unix

> ID：14119807
> 
> 赞同：4
> 
> 时间：2013-01-02T09:45:06.810
> 
> 标签：eclipse

在 Microsoft WindowsServer 2008 R2 上运行的 Eclipse Indigo Service Release 2。现在我想为所有用户将“新文件行分隔符”设置为 Unix（或为所有工作空间设置为默认值）。

我们应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:09:03.407

工作区：窗口 -> 首选项 -> 常规 -> 工作区 -> 新文本文件行分隔符。

项目：属性 -> 资源 -> 新文本文件行分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T17:53:12.073

我正在寻找从数据中明显的明显差异（例如 1\. "," , 2\. ":", 3\. ";" 等）中分离出来的代码行。我确实使用以下代码行找到了答案：

```
 String arr[ ] = line.split(",");

              OR

 String arr[ ] = line.split(":"); 
```

# java - Android：虽然创建按钮为空

> ID：14119808
> 
> 赞同：1
> 
> 时间：2013-01-02T09:45:07.917
> 
> 标签：java, android, imagebutton

我尝试使用**initializeBtn()**函数创建我的 ImageButton，但是当我检查它运行该函数时**__animateBtn为空。**有什么想法吗？

当我不尝试捕获空**__animateBtn**时，LogCat 会抛出空指针异常。

```
public class MainActivity extends Activity implements OnTouchListener {

public static ImageButton __animateBtn;

public static myLayout __myLayout;  

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);    
    setContentView(R.layout.activity_main);

    if (__animateBtn == null) {
        initializeBtn (__animateBtn, R.drawable.wrapped_leavemenu_0, false);

    }

    if(__myLayout == null) {

        __myLayout = (myLayout) findViewById(R.id.relative_layout);

        if (__animateBtn == null) {
            Log.d("__animateBtn", "null");
            finish();
        }
        if (__animateBtn2 == null) {
            Log.d("__animateBtn2", "null");
            finish();
        }
        else {
        Log.d ("__myLayout.addView", "are" + __myLayout.getChildCount());               
        __myLayout.addView(__animateBtn, new AbsoluteLayout.LayoutParams(100,140,midX,midY-100));
        __myLayout.addView(__animateBtn2, new AbsoluteLayout.LayoutParams(200,100,midX-100,midY));
        }

    }   

public void initializeBtn (ImageButton btn, int resid, boolean visible) {

    btn = new ImageButton (getApplicationContext());
    btn.setBackgroundResource(resid);

    if (visible) btn.setVisibility(View.VISIBLE);
    else btn.setVisibility(View.INVISIBLE);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:48:05.920

您不能通过将变量提供为方法的值来更新变量。（Java 不支持*引用参数*，例如 C++）。

相反，您可以使用*类成员字段*：

```
public void initializeBtn (int resid, boolean visible) {

     __animateBtn = new ImageButton (getApplicationContext());
     __animateBtn.setBackgroundResource(resid);

    if (visible)
       __animateBtn.setVisibility(View.VISIBLE);
    else
       __animateBtn.setVisibility(View.INVISIBLE);
} 
```

或者*返回*新创建的按钮：

```
public ImageButton initializeBtn (int resid, boolean visible) {

    ImageButton btn = new ImageButton (getApplicationContext());
    btn.setBackgroundResource(resid);

    if (visible)
       btn.setVisibility(View.VISIBLE);
    else
       btn.setVisibility(View.INVISIBLE);

    return btn;
} 
```

以最适合您的设计/想法的为准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:52:03.383

利用 ：

```
public ImageButton initializeBtn (int resid, boolean visible) {

    ImageButton btn = new ImageButton (this);// use this instead of getApplicationContext()
    btn.setBackgroundResource(resid);

    if (visible) btn.setVisibility(View.VISIBLE);
    else btn.setVisibility(View.INVISIBLE);
    return btn;
} 
```

然后在你的`onCreate()`方法中：

```
__animateBtn = initializeBtn(R.drawable.wrapped_leavemenu_0, false); 
```

# c# - 如何获取线程执行完成事件

> ID：14119810
> 
> 赞同：4
> 
> 时间：2013-01-02T09:45:12.663
> 
> 标签：c#, multithreading

我正在创建一个新线程来调用其中的一个函数。

```
Thread th = new Thread(My_Function);
th.start(); 
```

我想在这个线程执行完成后做点什么。

有什么办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T09:53:42.390

至少有两种可能的解决方案：

**后台工作者**

使用 a[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)执行您的代码，并使用[`RunWorkerCompleted`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件执行完成后运行的代码。

A`BackgroundWorker`将基于事件的异步模式包装成一个非常易于使用的机制，包括进度报告和取消。请参阅此[BackgroundWorker 教程](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)和[此](https://stackoverflow.com/questions/6481304/how-to-use-a-backgroundworker)SO 答案。

**任务（.NET 4.0 及更高版本）**

使用一个[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)对象，并使用[`ContinueWith`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.continuewith.aspx)方法定义完成第一个任务后需要执行的代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T09:47:41.960

你可以使用这样的东西

```
if(th.isAlive())
{...} 
```

# javascript - 在 ExtJS 网格项目上双击打开一个 ExtJS 桌面窗口

> ID：14119811
> 
> 赞同：1
> 
> 时间：2013-01-02T09:45:25.673
> 
> 标签：javascript, extjs, java-ee-6, extjs4.1

我是 ExtJS 的新手，我在 Sencha 论坛遇到了一个类似的问题，这个问题没有解决。

[这是问题的链接](http://www.sencha.com/forum/showthread.php?163840-Desktop-Click-on-row-cell-in-grid-opens-new-Window)

基本上，我想做的是打开一个桌面窗口模块应用程序，显示在网格上选择的数据。我已经创建了显示在链接上的相同窗口。我们有完全相同的代码，所以我认为在这里发布我的代码没有意义。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:11:21.213

我不认为你对代码的事情是正确的......但无论如何，这家伙的代码是一团糟，米切尔已经回答了应该如何做。所以暂时忘记这家伙的代码，因为归档它真的很简单。

这是一个工作片段，你可以如何做到这一点：

```
Ext.define('Ext.ux.DemoWin', {
    extend: 'Ext.window.Window',
    alias: 'widget.demowin',
    width: 200,
    height: 200,
    title: 'demo',
    initComponent: function() {
        this.callParent(arguments);
    },
    loadRecord: function(rec) {
        // simplified - just update the html. May be replaced with a dataview
        this.update(rec.data.name + ' - ' + rec.data.email);
    }
});

Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody(),
    listeners: {
        // the registration should be done with the control() method of the responsible controller
        itemclick: function(grid,record) {
            var win = Ext.widget('demowin').show().loadRecord(record);
        }
    }
}); 
```

这是一个**[JSFiddle](http://jsfiddle.net/sran/czrt6/18/)**

**编辑适用于 Ext.ux.desktop.Module**

```
createWindow : function(){
    var desktop = this.app.getDesktop();
    var win = desktop.getWindow('grid-win');
    if(!win){
        win = desktop.createWindow({
            // ...
            loadRecord: function(rec) {
                 this.update(rec.data.name + ' - ' + rec.data.email);
            }
  //.... 
```

# c++ - 使用 C++11 Range For 替换字符串中的所有字符

> ID：14119812
> 
> 赞同：3
> 
> 时间：2013-01-02T09:45:31.943
> 
> 标签：c++, string, c++11

我是 C++ 新手，正在阅读一本书，并且正在学习一些很棒的东西。但是，我严重卡在其中一项练习上，无法弄清楚原理。

这个问题要求我使用新的**Range For**语句将字符串（“Hello World”）中的所有字符更改为字母 X。

通过输入以下代码，我成功获得了正确的输出：

```
 string initial ("Hello World!");
 for (auto &initChange : initial)
     cout << "X"; 
```

但是我知道这段代码远非正确，因为一个例子是将同一字符串中的所有文本更改为大写使用以下内容：

```
string s("Hello World!!!");
for (auto &c : s)
    c = toupper(c);
cout << s << endl; 
```

我理解这段代码，但我无法得到它的变体来实现练习的目的。

我已经拉了两天的头发来弄清楚这个简单的事情。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T09:49:17.360

一个简单的任务应该可以工作：

```
std::string initial ("Hello World!");
for (auto& c: initial) {
    c = 'X';
}
std::cout << initial << '\n'; 
```

请注意，这`c = "X"`将不起作用，因为`"X"`is 类型`char const[2]`（退化为`char const*`）而`c`类型`char`。`'X'`具有适当的类型：`char`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:50:30.747

您的代码给出了正确的输出，但没有做正确的事情。它打印 X，但不更改字符串。

循环中的迭代变量 ( `initChange`) 是对字符串元素（一个字符）的引用；每一次迭代，它都指向字符串中的下一个字符。您可以使用此引用来修改字符串中的字符（就像`toupper()`示例一样）：

```
string initial ("Hello World!");
for (auto &initChange : initial)
  initChange = 'X';
cout << initial;  //verify the original string is changed 
```

# asp.net-mvc - JQuery DatePicker 不更新 MVC 中的模型字段

> ID：14119819
> 
> 赞同：0
> 
> 时间：2013-01-02T09:46:00.103
> 
> 标签：asp.net-mvc, razor, datepicker

以下是代码摘录：

```
@Html.TextBoxFor(m => m.CreatedSearchStartDate, 

            new { @Value=Model.CreatedSearchStartDate.Value.ToString("dd/MM/yyyy"),

                @selectedDate =Model.CreatedSearchStartDate.Value.ToString("dd/MM/yyyy"),

                @class="dateInput", @id="CreatedSearchStartDate" }

            ) 
```

以下是相关的jQuery代码

```
 $("#CreatedSearchStartDate").each(function () {

    var a = $(this).datepicker(

        {

            dateFormat: "dd/mm/yy",

            defaultDate: new Date($(this).val())

        })

}); 
```

该视图显示日期选择器控件，并且运行良好。此外，文本框会更新基础值（我可以使用 Firebug 检查）。唯一的问题是模型中的基础字段没有更新。然而，此模型中还有一些其他字段，它们会正确更新。

可能的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:35:55.450

我有一种感觉，这是一个文化问题。我自己没有遇到过这个问题，但我知道其他人有。如果您的视图的“文化设置”与您的应用程序相比存在差异，则可能会导致验证错误。此外，听起来您需要确保在表单提交上使用 post 以正确应用文化。查看这些其他帖子，看看它们是否有帮助：

[ASP.Net MVC 模型绑定 - 如何更改日期格式？](https://stackoverflow.com/questions/7098613/asp-net-mvc-model-binding-how-to-change-date-format)

[Asp.net MVC 中的自定义 DateTime 模型绑定器](https://stackoverflow.com/questions/2356601/custom-datetime-model-binder-in-asp-net-mvc)

# objective-c - AFHTTPRequestOperation 失败

> ID：14119820
> 
> 赞同：1
> 
> 时间：2013-01-02T09:46:02.497
> 
> 标签：objective-c, ios6

我正在开发一个执行以下任务的应用程序。

1.  获取画廊图像并在网格视图中显示。
2.  选择图像后，它们将被上传到服务器

我使用“POST”方法进行上传。它在 iPhone 模拟器中运行良好。但是进入 iPhone 5 设备，在上传一些进度后会产生以下错误。

```
Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo=0x1f0ba650 {NSErrorFailingURLStringKey=http://192.168.1.25/webservices/uploadphoto.php/?user_id=22, NSErrorFailingURLKey=http://192.168.1.25/webservices/uploadphoto.php/?user_id=22, NSLocalizedDescription=The request timed out., NSUnderlyingError=0x1f0a3b60 "The request timed out."} 
```

在这里，我的上传代码。

```
 -(void)uploadImageWithStatus:(NSData *)data filenumber:(NSInteger)filenumber{ NSUserDefaults *defaultUser = [NSUserDefaults standardUserDefaults];
        NSString *userId = [defaultUser stringForKey:@"UserId"];

        AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",UploadURL,userId]]];
        client.operationQueue.maxConcurrentOperationCount =1;

        //You can add POST parameteres here

        NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:nil];

        NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:nil parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {

            //This is the image
            [formData appendPartWithFileData: data name:@"f" fileName:[NSString stringWithFormat:@"%d_image.jpeg",rand()] mimeType:@"image/jpeg"];

        }];

       NSLog(@"Time out : %f",[request timeoutInterval]);
        AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {

            //        NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);

}];
        //Setup Completeion block to return successful or failure
        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
            NSString *response = [operation responseString];
            NSLog(@"response: [%@]",response);

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"error: %@", [operation error]);
            if(error.code == -1001){
            UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"Error!"
                                                              message:@"The request timed out." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [myAlert show];
            }
            //Code to Run if Failed

        }];

        [operation start]; 
```

如果有人可以帮助我，我将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:55:18.597

您收到的错误是超时错误：您尝试联系的服务器未能及时响应。

我注意到您正在尝试连接到`192.168.1.25`本地 IP 地址。您是否有可能在您的开发机器上本地运行服务器（因此 iPhone 模拟器工作正常），但由于它位于不同的网络上，因此无法在您的 iPhone 设备上访问它？

最好的测试方法是进入 Mobile Safari 并加载`192.168.1.25`. 如果它不起作用，您就会知道问题不在于您的代码，而在于您的网络设置方式。

# c# - 如何在代码合同中使用 TryParse 而不会收到警告

> ID：14119835
> 
> 赞同：3
> 
> 时间：2013-01-02T09:47:17.050
> 
> 标签：c#, code-contracts

使用代码合同时，我收到警告：

> 在方法合同中检测到对方法“System.Int32.TryParse(System.String,System.Int32@)”的调用没有 [Pure]

具有在接口上定义的接口和代码协定的类，如下面的代码。问题是如何检查字符串是否`orgNumberWithoutControlDigit`可以转换为有效整数，因为它是模数工作的先决条件？

```
public string getControlDigit(string orgNumberWithoutControlDigit)
    {
        List<int> orgNumberNumbers = this.getNumberList(orgNumberWithoutControlDigit);

        List<int> productList = orgNumberNumbers.Zip(this.weightNumberList, (first, second) => first * second).ToList();

        int modular = productList.Sum() % 11;

        string controlDigit = getControlDigit(modular);

        return controlDigit;
    }

private static string getControlDigit(int modular)
    {
        string controlDigit;

        if (modular == 0)
        {
            controlDigit = "0";
        }
        else if (modular == 1)
        {
            controlDigit = "-";
        }
        else
        {
            int result = 11 - modular;
            controlDigit = result.ToString();
        }

        return controlDigit;
    }

[ContractClass(typeof(CalculateOrgNumberControlDigitBusinessContract))]
public interface ICalculateOrgNumberControlDigitBusiness
{
    string getControlDigit(string orgNumberWithoutControlDigit);
}

[ContractClassFor(typeof(ICalculateOrgNumberControlDigitBusiness))]
public abstract class CalculateOrgNumberControlDigitBusinessContract:ICalculateOrgNumberControlDigitBusiness
{
    public string getControlDigit(string orgNumberWithoutControlDigit)
    {
        Contract.Requires(orgNumberWithoutControlDigit.Length == 8);
        int parseResult;
        Contract.Requires(int.TryParse(orgNumberWithoutControlDigit, out parseResult));
        Contract.Ensures(parseResult >= 0);
        var result = Contract.Result<string>();
        Contract.Ensures(result != null && result.Length == 1);

        return default(string);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:31:41.460

我了解您想要实现的目标，但我想说将 orgNumberWithoutControlDigit 作为字符串传递给 getControlDigit [sic] 是真正的罪魁祸首。

即使您可以使您的合同生效 - 调用者也必须将字符串转换为 int 才能满足您的合同。现在，如果调用者已经将该转换转换为 int，为什么不让它传递该 int 呢？

我是 Code Contracts 的忠实拥护者，并且在我的大多数项目中都使用它，而且我了解到它不是灵丹妙药。因此，如果您必须有一个字符串参数，请完全删除合同，并在使用前确保您的字符串格式有效。

也许 OrgNumberValidator 助手会比依赖合同更好的选择？

编辑：实际上，我建议创建一个 OrgNumber 类来处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:13:08.743

您可以创建一个纯辅助方法，而不是`int.TryParse`直接调用：

```
[Pure]
private static bool IsInt(string s)
{
    int n;
    return int.TryParse(s, out n);
} 
```

您可以更进一步并将其包装`TryParse`在一个`try`块中，`false`如果抛出任何类型的异常，则返回（只是为了安全起见）。

但是，我倾向于同意 Michael 的观点，即如果可以的话，最好避免传递代表整数的字符串。

# ruby-on-rails - 为 twitter bootstrap 安装 gem 后无法启动 rails 服务器

> ID：14119842
> 
> 赞同：0
> 
> 时间：2013-01-02T09:47:45.803
> 
> 标签：ruby-on-rails, ruby

祝大家新年快乐，万事如意。

我已经开始学习 ROR 并尝试用它创建我的第一个应用程序。我正在尝试使用 Twitter 引导 gem。捆绑安装后，当我尝试运行 rails server 命令时，出现此错误：

```
/var/lib/gems/1.8/gems/twitter-bootstrap-rails-2.1.9/lib/twitter/bootstrap/rails/engine.rb:3:in `require': /var/lib/gems/1.8/gems/twitter-bootstrap-rails-2.1.9/lib/twitter/bootstrap/rails/twitter-bootstrap-breadcrumbs.rb:33: syntax error, unexpected ':', expecting kEND (SyntaxError) 
```

有人可以指导我在这里缺少什么吗？

这是相同的堆栈跟踪：

```
/var/lib/gems/1.8/gems/twitter-bootstrap-rails-2.1.9/lib/twitter/bootstrap/rails/engine.rb:3:in `require': /var/lib/gems/1.8/gems/twitter-bootstrap-rails-2.1.9/lib/twitter/bootstrap/rails/twitter-bootstrap-breadcrumbs.rb:33: syntax error, unexpected ':', expecting kEND (SyntaxError)
    I18n.t name, scope: scope
                       ^
from /var/lib/gems/1.8/gems/twitter-bootstrap-rails-2.1.9/lib/twitter/bootstrap/rails/engine.rb:3
from /var/lib/gems/1.8/gems/twitter-bootstrap-rails-2.1.9/lib/twitter-bootstrap-rails.rb:4:in `require'
from /var/lib/gems/1.8/gems/twitter-bootstrap-rails-2.1.9/lib/twitter-bootstrap-rails.rb:4
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `require'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
from /var/www/ahex_connect/config/application.rb:7
from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require'
from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:53
from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:50
from script/rails:6:in `require'
from script/rails:6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:09:43.163

问题是您使用的是 Ruby 1.8，而第 33 行（`twitter-bootstrap-rails`gem 内）的语法来自 Ruby 1.9。他们已经修复了这个问题，使其兼容`master`. 所以可能的解决方案：

1.  将您的 Ruby 版本升级到 1.9。
2.  使用 git 版本的 gem。将其放入 Gemfile（修改现有行）并运行`bundle install`

    gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'

# android - 实施条码扫描器

> ID：14119847
> 
> 赞同：2
> 
> 时间：2013-01-02T09:48:12.783
> 
> 标签：android, barcode-scanner

我正在开发一个应用程序，在该应用程序中我必须使用**Barcode Scanner**来扫描 Barcode，经过大量搜索后，我得到了以下代码：

```
 Intent intent = new Intent("com.google.zxing.client.android.SCAN"); 
```

借助此代码，**用户可以实现 Zxing 的条码扫描器，**但我想以**编程**方式实现我的条码扫描器，即我**不想要第三方应用程序**。我使用[将 ZXing 库直接集成到我的 Android 应用程序](https://stackoverflow.com/questions/4782543/integration-zxing-library-directly-into-my-android-application)链接中来制作**独立的条码**扫描器，但**我不知道在制作 core.jar 后要做什么** 请帮助我集成条码扫描器。任何帮助将不胜感激..提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:59:49.120

为结果启动活动，或者只是为此的便利代码：

```
IntentIntegrator integrator = new IntentIntegrator(yourActivity);
integrator.initiateScan(); 
```

并有这个方法来接收结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
  IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
  if (scanResult != null) {
    // handle scan result
  }
  // else continue with any other code you need in the method
  ...
} 
```

请参阅此链接以获取更多信息：

[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

# c# - ASP.NET 将参数传递给母版页中的 Javascript 函数

> ID：14119848
> 
> 赞同：1
> 
> 时间：2013-01-02T09:48:14.733
> 
> 标签：c#, javascript, asp.net, html

我从在 SO 上找到的答案中得到了这个调整大小的脚本。

```
<script type="text/javascript">
  function resizeImg(img)
  {
    var resize = 150;
    var origH  = 61;
    var origW  = 250;
    var mouseX = event.x;
    var mouseY = event.y;
    var newH   = origH * (resize / 100);
    var newW   = origW * (resize / 100);

    img.style.height = newH;
    img.style.width  = newW;

    var c = img.parentNode;

    c.scrollLeft = (mouseX * (resize / 100)) - (newW / 2) / 2;
    c.scrollTop  = (mouseY * (resize / 100)) - (newH / 2) / 2;
  }
</script> 
```

它位于我页面的 HEAD 占位符标记中。

在同一页面中，在内容占位符中，我有一个`<img>`标签需要运行“onclick”上方的功能。

因此，它需要像这样返回“this”：

```
<img src="someImage.jpg" alt="" onclick="resizeImg(this)" /> 
```

但是，这不起作用。我不知道该怎么做，我现在尝试搜索谷歌一段时间，但没有任何结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:11:14.183

不确定您从哪里复制了源代码。我怀疑`event.x`，`event.y`- 你不应该使用`clientx`和`clienty`属性。此外，对于跨浏览器，您需要管理事件引用，并且可以从事件对象的目标中获取图像元素。

无论如何，尝试修改后的代码如下：

```
<script type="text/javascript">

    function resizeImg(e)   {     
        var event = window.event || e;
        var img = event.target || event.srcElement;
        var resize = 150;     
        var origH  = 61;     
        var origW  = 250;     
        var mouseX = event.clientX;     
        var mouseY = event.clientY;     
        var newH   = origH * (resize / 100);     
        var newW   = origW * (resize / 100);      
        img.style.height = newH + 'px';     
        img.style.width  = newW + 'px';      
        var c = img.parentNode;      
        c.scrollLeft = (mouseX * (resize / 100)) - (newW / 2) / 2;     
        c.scrollTop  = (mouseY * (resize / 100)) - (newH / 2) / 2;   
}

</script>
<div>
<img src="someImage.jpg" alt="" onclick="resizeImg(event)" />
</div> 
```

我已经为此创建了[jsfiddle](http://jsfiddle.net/P4AKU/1/)。

最后，考虑使用生产力库，例如 jquery，这将使事情变得更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:54:26.367

您不需要`this`通过参数列表传递对的引用，因为上下文已经存在于函数中。将您的标记更改为：

```
<img src="someImage.jpg" alt="" onclick="resizeImg();" /> 
```

然后在 javascript 函数中`resizeImg`，您可以简单地使用`this`来引用单击的图像：

```
function resizeImg() {
    var img = this; // will contain a reference to your element
} 
```

`DIV`这是一个使用元素做同样事情[的工作示例。](http://jsfiddle.net/pmBcm/)

# sql - 如何多次使用不同的数据运行相同的sql

> ID：14119849
> 
> 赞同：3
> 
> 时间：2013-01-02T09:48:18.380
> 
> 标签：sql, database, oracle, loops, cursor

我必须根据表中列 c1 的特定值将一些数据更新到数据库中，现在我必须为 c1 的各种值做同样的事情，但我不能使用 if/else，因为我的情况太多了想一个使用游标的解决方案，但我对它们没有太多经验（或者根本没有任何经验）请帮助我。

我有：

*   桌子`TAB1`
*   值对列表 (V1, V2)
*   为列表运行的 SQL 语句

    ```
    UPDATE TAB1 SET C1=V2 where C1=V1 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:56:46.347

此操作不需要光标。如果表中有值对，只需使用：

```
UPDATE 
  ( SELECT t.C1, vp.V2
    FROM 
        TAB1 t 
      JOIN
        ValuePairs vp
          ON t.C1 = vp.V1
  ) tmp 
SET C1 = V2 ; 
```

如果它只是一个列表，您可以使用派生表：

```
UPDATE 
  ( SELECT t.C1, vp.V2
    FROM 
        TAB1 t 
      JOIN
        ( SELECT 1 V1, 2 V2 FROM dual
        UNION ALL
          SELECT 2, 3 FROM dual
        -- ...

        UNION ALL
          SELECT 19, 23 FROM dual 
        ) vp
          ON t.C1 = vp.V1
  ) tmp 
SET C1 = V2 ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:42:26.263

如果这是一次性工作，那么使用一个不错的基于列的文本编辑器，您可以从以下位置修改您的数据集：

```
1 2
3 4 
```

... 到 ...

```
select 1 v1 2 v2 from dual union all
select 3 v1 4 v2 from dual union all 
```

...等，然后将其用作合并语句的一部分，以避免处理更新连接基数检查的需要

```
merge into tab1 using (
select 1 v1 2 v2 from dual union all
select 3 v1 4 v2 from dual union all
... ) src
on (src.v1 = tab1.c1)
when ... etc 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T10:14:30.533

```
 you can try like this without creating the table.

    bytes = readFile(FilenamewithPath);
    file = Encoding.ASCII.GetString(bytes);
    public static byte[] readFile(bool delFileOnRead, string fileNameWithPath)
   {
     try {
                FileStream fsSource = new FileStream(fileNameWithPath, FileMode.Open,   FileAccess.Read);
                byte[] retVal = new byte[fsSource.Length];
                int numBytesToRead = (int)fsSource.Length;
                int numBytesRead = 0;
                while (numBytesToRead > 0)
                {
                    int n = fsSource.Read(retVal, numBytesRead, numBytesToRead);
                    if (n == 0)
                        break;
                    numBytesRead += n;
                    numBytesToRead -= n;
                }
                fsSource.Close();
                fsSource.Dispose();
                if (delFileOnRead)
                {
                    File.Delete(fileNameWithPath);
                }
                return retVal;
            }
            catch(Exception ex) {
                throw ex;
            }

        } 
```

# javascript - 从 selenium 远程控制台打开的 IE8 窗口声称它是 IE8，但行为类似于 IE7

> ID：14119850
> 
> 赞同：1
> 
> 时间：2013-01-02T09:48:19.023
> 
> 标签：javascript, internet-explorer, selenium, internet-explorer-8, selenium-rc

通过远程控制台在 IE8 上使用 selenium 2.5 时出现问题。在远程控制台打开的页面中，有时（但经常）javascript 的行为就像在 IE7 上运行一样 - 缺少 JSON，setAttribute('style', something) 不会呈现样式。但是它告诉自己它是 IE8。

```
navigator.appVersion //returns "4.0 (compatible; MSIE 8.0; Windows NT 5.1;Trident/4.0)"

document.documentMode //returns 8 
```

我已经设法让远程控制台窗口在 IE8 上运行，但它并不能缓解远程控制台打开的窗口中的问题（以及运行测试的窗口）。我还添加了元标记

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/> 
```

我正在使用 XP 模式，IE8 版本 8.0.6001.18702。

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:28:36.270

尝试像这样创建您的 RemoteWebDriver（但可能是另一个 ip）：

```
DesiredCapabilities ie = DesiredCapabilities.internetExplorer();
ie.set(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS,true);
ie.setCapability(CapabilityType.Version, "8");

URL url = new URL("http://localhost:4444/wd/hub");
WebDriver driver = new RemoteWebDriver(url, ie); 
```

# mysql - mysql注入错误1064

> ID：14119851
> 
> 赞同：1
> 
> 时间：2013-01-02T09:48:26.813
> 
> 标签：mysql, sql

我正在尝试在此语句中注入 sql union 语句。

```
select id, email, `password` from users
where id = 1 union select 1,2,3;
order by users.id 
```

但它返回一个错误：

> [Err] 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“order by users.id”附近使用正确的语法

我怎样才能让这个声明起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T09:49:17.037

去掉`;`前面的`ORDER BY`子句

```
select id, email, password 
from users where id = 1 
union 
select 1,2,3
order by id 
```

**更新 1**

```
SELECT  id, email, password
FROM
    (
        SELECT  id, email, password, 1 AS orders
        FROM    users 
        WHERE   id = 1 
        UNION 
        SELECT  1,2,3,2
    ) s
ORDER BY orders, id 
```

# windows-phone-7 - 如何将自定义字体应用于 Web 浏览器内容 WP7

> ID：14119852
> 
> 赞同：1
> 
> 时间：2013-01-02T09:48:27.563
> 
> 标签：windows-phone-7, webbrowser-control, font-family

我正在开发用于在 Windows 手机中学习**webBrowser概念的简单应用程序。**我的目标是在我的 WP7 中显示泰卢固语（印度语）的内容。该 Web 应用程序仅显示泰卢固语内容

我的 MainPage.xaml.cs 代码是：

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        webBrowser1.Navigate(new Uri("http://www.eenadu.net", UriKind.Absolute));
    } 
```

在 MainPage.xaml 文件中

```
<phone:WebBrowser HorizontalAlignment="Left" Margin="0,92,0,0" Name="webBrowser1"
 VerticalAlignment="Top" Height="575" Width="468" FontFamily="Fonts/eenadu.ttf#Eenadu"  /> 
```

我已将该 .ttf 文件包含在我的项目中 Fonts 文件夹下，并分配了 Build Action = 'Content'

我能够调用 URL，但它显示不可读的字符。

有没有其他方法可以将自定义字体应用于 Web 浏览器控件？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:52:10.643

Windows 手机支持网络字体。但是，它们不能嵌入到 XAP 中。建议的解决方法是将字体托管在远程服务器上，并可能使用 AppCache 将字体文件保存在设备本地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T13:42:04.490

无需从远程服务器托管，您可以使用本地字体嵌入 CSS 并注入到浏览器控制。

(1.) 创建嵌入字体的 CSS

```
body, a, p, span, div, textarea {
        font-family: MyCustomFont;
}

@font-face {
    font-family: MyCustomFont;
    src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRgABAXXXXXXXXXXX......) format('woff');
    font-weight: normal;
    font-style: normal;
} 
```

(2.) 在 WebView_NavigationCompleted 方法中注入 jQuery 和 CSS

```
 private async void MyWebView_NavigationCompleted(WebView sender, WebViewNavigationCompletedEventArgs args)
 {
    // Inject jQuery file which located at local
    StorageFile jquery = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///JavaScripts\\jquery-1.10.2.min.js"));
        string jquery_string = await FileIO.ReadTextAsync(jquery);
        await MyWebView.InvokeScriptAsync("eval", new string[] { jquery_string });

    // Inject custom font embedded CSS 
    StorageFile myfontcss = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///CSS\\mycustomfont.css"));
            string myfontcss_string = await FileIO.ReadTextAsync(myfontcss);

            myfontcss_string = myfontcss_string.Replace("\n", "").Replace("\t", ""); //.Replace("'", "&#39;").Replace("\"", "&#34;");
            string cssRef = "$(\"<style id='myfont' type='text/css'>" + myfontcss_string + "</style>\").appendTo('head');";

            await MyWebView.InvokeScriptAsync("eval", new string[] { cssRef });

 } 
```

# php - ManyToOne 加入 symfony2

> ID：14119854
> 
> 赞同：0
> 
> 时间：2013-01-02T09:48:38.070
> 
> 标签：php, join, symfony, doctrine-orm, many-to-one

对于一个游戏，我有 2 个实体：story 和 story_completed。所有用户（这里是公司）的故事都是相同的，story_completed 表示哪个用户已经看过/完成了哪个故事。现在我想为用户显示一个故事列表，并显示哪些已完成，哪些未完成。

![在此处输入图像描述](../Images/5aa4efda003a89fb78ff39679cc56fcc.png)

所以，我创建了 2 个实体：

```
...
table: story
id:
    id:
        type: integer
        generator: { strategy: AUTO }
fields:
    name:
        type: string 
```

和

```
...
table: story_completed
id:
    id:
        type: integer
        generator: { strategy: AUTO }
ManyToOne:
    story:
        targetEntity: Story
fields:
    company_id: 
        type: integer 
```

但是现在，如果我做一个 JOIN

```
SELECT s FROM Story s LEFT JOIN s.completed c WHERE ... 
```

我收到一个错误：错误：类 ...\Story 没有名为已完成的关联。

也许我误解了 manyToOne 关联，但是我怎样才能做这个简单的 2 个表连接并加入到学说 2 中呢？事实上，我只需要知道用户 X 是否完成了故事。我不需要集合或双向连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:27:37.403

您需要在 story 到 story_completed 中创建 OneToMany 关系并将其命名为“已完成”。如果你这样做，你将能够根据需要使用 JOIN

# c# - 从资源文件调用资源时出错

> ID：14119859
> 
> 赞同：0
> 
> 时间：2013-01-02T09:49:08.910
> 
> 标签：c#, asp.net

我已附加资源文件，当我调试代码时，会生成以下错误。是调用资源的方式还是任何其他方式来做到这一点？

```
 RegularExpressionValidator1.ErrorMessage = App_GlobalResources.ManageJobs.ResourceManager.GetString("SpecialCharectersValidationMessage"); 
```

> *找不到适合指定区域性或中性区域性的任何资源。确保“Zerk.Website.App_GlobalResources.ManageJobs.resources”在编译时正确嵌入或链接到程序集“Zerk.Website”中，或者所有所需的附属程序集都是可加载的并完全签名。*

谁可以帮我这个事 ？？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:14:24.793

您应该能够使用以下方式访问资源：

Resources.ManageJobs.SpecialCharectersValidationMessage

确保文件 ManageJobs.resx 将 Compile Action 设置为 Content 并将 Custom tool 设置为 GlobalResourceProxyGenerator。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:23:52.660

我使用以下代码取得了成功。

```
<%$ Resources:ManageJobs,NameOfResource %> 
```

# jquery - 如何使用 jquery 在 liferay6.1 中验证表单

> ID：14119864
> 
> 赞同：0
> 
> 时间：2013-01-02T09:49:21.100
> 
> 标签：jquery, validation, liferay-6

我有一个带有 Booktitle,Author 的表单。我需要验证这两个字段，如果其中任何一个字段为空，它应该显示消息，因为字段是强制性的。我怎样才能实现这一点。我已经在 google 中搜索了这个，并进行了修改如下代码。

```
<script>
    $(document).ready(function() {
        $("#_fm").validate();
        var element = document.getElementById("_bookTitle");
        element.className = element.className + " required";
        element = document.getElementById("_author");
        element.className = element.className + " required";
    });
</script>
<aui:form name="fm" method="POST" action="<%=updateBookURL.toString()%>">
    <aui:input name="bookTitle" label="Book Title" />
    <aui:input name="author" />
    <aui:button type="submit" value="Save" />
</aui:form> 
```

portlet.xml 是：

```
<portlet>
        <portlet-name>libraryportlet</portlet-name>
        <icon>/icon.png</icon>
        <instanceable>false</instanceable>
        <header-portlet-css>/css/main.css</header-portlet-css>
        <header-portlet-javascript>https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js</header-portlet-javascript>
        <header-portlet-javascript>https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js</header-portlet-javascript>
        <header-portlet-javascript>
            http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js
        </header-portlet-javascript>
        <footer-portlet-javascript>
            /js/main.js
        </footer-portlet-javascript>

        <css-class-wrapper>libraryportlet-portlet</css-class-wrapper>
    </portlet> 
```

但没有成功。我在哪里做错了。谁能告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:48:50.477

您可以使用 liferay 自己的 Alloy 验证器来验证您的表单，这消除了使用 jquery 和 jquery validate 进行表单验证的需要。

首先，您需要将验证器类导入您的 jsp：

```
<%@ page import="com.liferay.portal.kernel.util.Validator" %> 
```

然后您可以继续为每个输入字段定义规则：

```
<aui:form name="fm" method="POST" action="<%=updateBookURL.toString()%>">
    <aui:input name="bookTitle" label="Book Title">
        <aui:validator name="required"  />
    </aui:input>

    <aui:input name="author">
        <aui:validator name="required"  />
    </aui:input>

    <aui:button type="submit" value="Save" />
</aui:form> 
```

如果任何字段为空，这将阻止提交表单。正如 Bondye 所说，您可能还想进行一些服务器端验证，因为 Alloy 运行在 Javascript 之上，用户可以轻松禁用它，从而在提交空表单的情况下将您的应用程序暴露给一些未处理的异常。

# iphone - 遍历从 Core Data 获取的请求数据时出错

> ID：14119865
> 
> 赞同：2
> 
> 时间：2013-01-02T09:49:21.813
> 
> 标签：iphone, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:46:27.207

这是解决发生的数据：故障

```
NSFetchRequest *taskDataRequest = [[NSFetchRequest alloc]init];
NSEntityDescription *dataEntityResultForm = [NSEntityDescription entityForName:@"Task" inManagedObjectContext:managedObjectContext];
[taskDataRequest setEntity:dataEntityResultForm];
//Note: Resolove problem happen data:fault by this properites 
[taskDataRequest setReturnsObjectsAsFaults:NO]; 
```

# xml - MODX mxCalendar XML 提要

> ID：14119867
> 
> 赞同：0
> 
> 时间：2013-01-02T09:49:29.047
> 
> 标签：xml, calendar, feed, modx, modx-revolution

我在 MODX 中使用 mxCalendar，我想为我的日历创建一个自定义 XML 提要，因为 mxcalendar 应该支持 XML 提要。

在 XML 提要选项卡中，我使用此测试提要将一个测试提要设置为本地 .xml 文件：

```
<calendar>
<event>
    <id>2</id>
    <title>test3</title>
    <description>Test description</description>
    <categoryid>1</categoryid>
    <startdate>1355906700</startdate>
    <enddate>1355903100</enddate>
</event> 
```

我真的不知道我的提要应该是什么样子，因为这是我第一次尝试创建提要，所以我需要一些帮助。我只是去了数据库并在 xml 中导出了一个事件并更改了一些 ind 不起作用。

有没有人尝试在 modx 中向 mxcalendar 添加自定义提要，这对我有帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:21:58.450

利用

```
&displayType=`list` 
```

在片段调用中并修改`tplListItem, tplListHeading, tplListWrap`以制作正确的视图

# iphone - 在 iphone 中访问通话记录。？

> ID：14119872
> 
> 赞同：2
> 
> 时间：2013-01-02T09:49:51.317
> 
> 标签：iphone, calllog, core-telephony

> **可能重复：**
> [在 iPhone OS 中读取通话记录](https://stackoverflow.com/questions/144888/reading-call-history-in-iphone-os)

嗨，我的新要求是从 iphone 访问通话记录（来电/去电/未接来电）。是否有任何框架或 API 可以访问它？可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:54:44.063

就非越狱手机而言，这是**不可能的**，即不支持官方sdk。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:57:24.600

锁定在

1.  [iPhone通话记录/历史](https://stackoverflow.com/questions/6214725/iphone-call-log-history)

2.  [xcode应用程序中call_history.db的iphone“无法打开数据库文件”](https://stackoverflow.com/questions/5498291/iphone-unable-to-open-database-file-for-call-history-db-in-xcode-app)

3.  [在 iPhone OS 中读取通话记录](https://stackoverflow.com/questions/144888/reading-call-history-in-iphone-os)

# linux - netty 或 linux 阻塞请求，不显示错误如何找出阻塞的内容？

> ID：14119873
> 
> 赞同：1
> 
> 时间：2013-01-02T09:50:01.370
> 
> 标签：linux, http, connection, jmeter, netty

我在 8 核 64 位的 linux（red hat vm）上安装了 netty。

```
limit :
cputime      unlimited
filesize     unlimited
datasize     unlimited
stacksize    10240 kbytes
coredumpsize 0 kbytes
memoryuse    unlimited
vmemoryuse   unlimited
descriptors  65535
memorylocked 64 kbytes
maxproc      8192 
```

在 windows xp 中，我运行调用 5000 个 http post 请求的 Jmeter。我每次只能处理 3000~ 个请求，永远不会超过它。如果我检查失败的 jmeter 请求，我会收到此异常：

```
java.net.BindException: Address already in use: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:518)
    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:127)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)
    at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
    at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:284)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1075)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1064)
    at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:426)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:255)
    at java.lang.Thread.run(Thread.java:619)

Thread Name: Thread Group 1-4591
Sample Start: 2013-01-01 16:25:05 IST
Load time: 200
Latency: 0
Size in bytes: 1689
Headers size in bytes: 0
Body size in bytes: 1689
Sample Count: 1
Error Count: 1
Response code: Non HTTP response code: java.net.BindException
Response message: Non HTTP response message: Address already in use: connect

Response headers:

HTTPSampleResult fields:
ContentType: 
DataEncoding: null 
```

在网络方面，我没有看到任何错误或异常，它只是站着听。如果我做 ：

```
netstat -a | grep ESTABLISHED | grep 8881 | wc -l 
```

我看到 50 个打开的连接（我认为）。当我关闭 netty 并再次运行 netstate 时，我打开了 0 个连接。但我不知道这是否相关。我的问题是如何检测我不能做更多请求的方式？

**解决方案 ！
将客户端移至 Linux ！**

# android - 添加进度对话框 asynctask Android 登录

> ID：14119876
> 
> 赞同：1
> 
> 时间：2013-01-02T09:50:23.127
> 
> 标签：android, android-asynctask, android-dialog

我试试这个[教程](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

使用 PHP、MySQL 和 SQLite 登录，它可以工作。

但我想在登录过程中添加一个进度对话框。

这是我在添加 asynctask 之前的登录活动并且可以工作

```
package com.app.DatabaseSample;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import com.app.library.DatabaseHandler;
import com.app.library.UserFunctions;

public class LoginActivity extends Activity {
    Button btnLogin;
    Button btnLinkToRegister;
    EditText inputUsername;
    EditText inputPassword;
    TextView loginErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        // Importing all assets like buttons, text fields
        inputUsername = (EditText) findViewById(R.id.loginUsername);
        inputPassword = (EditText) findViewById(R.id.loginPassword);
        btnLogin = (Button) findViewById(R.id.btnLogin);
        loginErrorMsg = (TextView) findViewById(R.id.login_error);

     // Login button Click Event
        btnLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                String email = inputUsername.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                Log.d("Button", "Login");
                JSONObject json = userFunction.loginUser(email, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        loginErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS); 
                        if(Integer.parseInt(res) == 1){
                            // user successfully logged in
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                            // Launch Dashboard Screen
                            Intent dashboard = new Intent(getApplicationContext(), DatabaseSample.class);

                            // Close all views before launching Dashboard
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);

                            // Close Login Screen
                            finish();
                        }else{
                            // Error in login
                            loginErrorMsg.setText("Incorrect username/password");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

    }

} 
```

在我用 asyntask 编辑之后

有我的登录活动

```
package com.app.DatabaseSample;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;
import android.widget.TextView;

import com.app.library.DatabaseHandler;
import com.app.library.JSONParser;
import com.app.library.UserFunctions;

public class LoginActivity extends Activity {
    Button btnLogin;
    Button btnLinkToRegister;
    EditText inputUsername;
    EditText inputPassword;
    TextView loginErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        // Importing all assets like buttons, text fields
        inputUsername = (EditText) findViewById(R.id.loginUsername);
        inputPassword = (EditText) findViewById(R.id.loginPassword);
        btnLogin = (Button) findViewById(R.id.btnLogin);
        loginErrorMsg = (TextView) findViewById(R.id.login_error);

     // Login button Click Event
        btnLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                readLogin(view);
            }
        });

    }

    private class ProcessLogin extends AsyncTask<String, String, String> {

        private ProgressDialog dialog;
        private ProgressDialog pDialog;
        protected Context applicationContext;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(LoginActivity.this);
            pDialog.setMessage("Loading User ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... args) {
            inputUsername = (EditText) findViewById(R.id.loginUsername);
            inputPassword = (EditText) findViewById(R.id.loginPassword);
            String email = inputUsername.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.loginUser(email, password);

            Log.d("Button", "Login");

            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), DatabaseSample.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    }else{
                        // Error in login
                        loginErrorMsg.setText("Incorrect username/password");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;

        }

        @Override
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    Intent dashboard = new Intent(getApplicationContext(), DatabaseSample.class);
                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(dashboard);

                    // Close Login Screen
                    finish();
                }
            });

        }
      }

    public void readLogin(View view) {
        new ProcessLogin().execute();

    // check for login response

  }
} 
```

我尝试运行但出错。

这是我的日志。

```
01-02 12:10:42.445: ERROR/JSON(4021): {"tag":"login","success":0,"error":1,"error_msg":"Incorrect email or password!"}
01-02 12:10:42.453: DEBUG/Button(4021): Login
01-02 12:10:42.453: WARN/dalvikvm(4021): threadid=9: thread exiting with uncaught exception (group=0x40015560)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021): FATAL EXCEPTION: AsyncTask #1
01-02 12:10:42.460: ERROR/AndroidRuntime(4021): java.lang.RuntimeException: An error occured while executing doInBackground()
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at java.lang.Thread.run(Thread.java:1019)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.view.ViewRoot.checkThread(ViewRoot.java:2932)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:642)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:668)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.view.View.invalidate(View.java:5279)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.widget.TextView.checkForRelayout(TextView.java:5528)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.widget.TextView.setText(TextView.java:2730)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.widget.TextView.setText(TextView.java:2598)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.widget.TextView.setText(TextView.java:2573)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at com.app.DatabaseSample.LoginActivity$ProcessLogin.doInBackground(LoginActivity.java:99)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at com.app.DatabaseSample.LoginActivity$ProcessLogin.doInBackground(LoginActivity.java:1)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
01-02 12:10:42.460: ERROR/AndroidRuntime(4021):     ... 4 more
01-02 12:10:42.468: WARN/ActivityManager(1308):   Force finishing activity com.app.DatabaseSample/.LoginActivity
01-02 12:10:42.585: WARN/IInputConnectionWrapper(4021): showStatusIcon on inactive InputConnection
01-02 12:10:42.585: WARN/InputManagerService(1308): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@40683810 (uid=10040 pid=4021)
01-02 12:10:43.320: ERROR/WindowManager(4021): Activity com.app.DatabaseSample.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40529e48 that was originally added here
01-02 12:10:43.320: ERROR/WindowManager(4021): android.view.WindowLeaked: Activity com.app.DatabaseSample.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40529e48 that was originally added here
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.view.ViewRoot.<init>(ViewRoot.java:258)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.app.Dialog.show(Dialog.java:241)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at com.app.DatabaseSample.LoginActivity$ProcessLogin.onPreExecute(LoginActivity.java:83)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.os.AsyncTask.execute(AsyncTask.java:391)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at com.app.DatabaseSample.LoginActivity.readLogin(LoginActivity.java:156)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at com.app.DatabaseSample.LoginActivity$1.onClick(LoginActivity.java:63)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.view.View.performClick(View.java:2485)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.view.View$PerformClick.run(View.java:9080)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.os.Handler.handleCallback(Handler.java:587)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.os.Looper.loop(Looper.java:130)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at java.lang.reflect.Method.invokeNative(Native Method)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at java.lang.reflect.Method.invoke(Method.java:507)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-02 12:10:43.320: ERROR/WindowManager(4021):     at dalvik.system.NativeStart.main(Native Method) 
```

如何在我的登录活动中添加进度对话框？

BR

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:55:16.833

> CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图。

因为目前您正在尝试从 ProcessLogin 的 doInBackground 访问 UI 元素 `AsyncTask`。

只需将所有 Ui 元素从 移动`doInBackground`到`onPostExecute`以更新 Ui`doInBackground`执行完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:57:09.983

问题在于以下几行：

```
loginErrorMsg.setText("");

loginErrorMsg.setText("Incorrect username/password"); 
```

您不能从非 UI 线程更新 UI。而且由于`doInBackground()`在非 UI 线程中执行，因此您无法从该方法更新 UI..

使用[Handler](http://www.vogella.com/articles/AndroidPerformance/article.html)从非 UI 线程更新 UI...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:58:48.897

```
 pDialog.dismiss();

                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    Intent dashboard = new Intent(getApplicationContext(),                   
                      DatabaseSample.class);
                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(dashboard);

                    // Close Login Screen
                    finish(); 
```

这段代码应该在类 LoginActivity 的一个函数中。

当你调用 asynctask 时，将 LoginActivity 的对象传递给它的构造函数。

完成任务后使用对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:02:07.523

请像这样使用 AsyncTask 方法：

```
private class ProcessLogin extends AsyncTask<String, String, String> {

    private ProgressDialog dialog;
    private ProgressDialog pDialog;
    protected Context applicationContext;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginActivity.this);
        pDialog.setMessage("Loading User ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... args) {
        inputUsername = (EditText) findViewById(R.id.loginUsername);
        inputPassword = (EditText) findViewById(R.id.loginPassword);
        String email = inputUsername.getText().toString();
        String password = inputPassword.getText().toString();
        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.loginUser(email, password);

        Log.d("Button", "Login");

 runOnUiThread(new Runnable() {
            public void run() {

try {
            if (json.getString(KEY_SUCCESS) != null) {
                loginErrorMsg.setText("");
                String res = json.getString(KEY_SUCCESS); 
                if(Integer.parseInt(res) == 1){
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                    // Launch Dashboard Screen
                    Intent dashboard = new Intent(getApplicationContext(), DatabaseSample.class);

                    // Close all views before launching Dashboard
                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(dashboard);

                    // Close Login Screen
                    finish();
                }else{
                    // Error in login
                    loginErrorMsg.setText("Incorrect username/password");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

            }
        });

        return null;

    }

    @Override
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread

    }
  } 
```

# java - Google Maps android API，循环绘制折线

> ID：14119881
> 
> 赞同：1
> 
> 时间：2013-01-02T09:50:30.857
> 
> 标签：java, android, google-maps

我有两个字符串数组，`latitude`我`longitude` 想在地图上绘制折线，[文档](https://developers.google.com/maps/documentation/android/lines#add_a_polyline)说，这就像馅饼一样简单。它是。如果我像这样手动添加折线，它可以工作：

```
PolylineOptions rectOptions = new PolylineOptions()
        .add(new LatLng(37.35, -122.0))
        .add(new LatLng(37.45, -122.0))
        .add(new LatLng(37.45, -122.2)) 
```

但是当我尝试循环添加折线时问题就开始了：

```
 rectOptions = new PolylineOptions();
    for(int i = 0; i<latitude.length(); i++){
rectOptions.add(new LatLng(Long.getLong(latitude[i]), Long.getLong(longitude[i])));
// Log.d("coordinates", latitude[i]+"|"+longitude[i]);
    } 
```

我得到一个`java.lang.NullPointerException`而且我不知道为什么。我知道问题出在`rectOptions.add()`方法上，因为`Log.d("coordinates", latitude[i]+"|"+longitude[i]);`在同一个循环中工作正常。

这是 LogCat 的输出：

```
 01-02 11:59:27.380: E/AndroidRuntime(25146): FATAL EXCEPTION: main
01-02 11:59:27.380: E/AndroidRuntime(25146): java.lang.NullPointerException
01-02 11:59:27.380: E/AndroidRuntime(25146):    at com.shniv.MainActivity$1.onClick(MainActivity.java:82)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at android.view.View.performClick(View.java:3519)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at android.view.View$PerformClick.run(View.java:14140)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at android.os.Handler.handleCallback(Handler.java:605)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at android.os.Looper.loop(Looper.java:137)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at android.app.ActivityThread.main(ActivityThread.java:4456)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at java.lang.reflect.Method.invokeNative(Native Method)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at java.lang.reflect.Method.invoke(Method.java:511)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
01-02 11:59:27.380: E/AndroidRuntime(25146):    at dalvik.system.NativeStart.main(Native Method) 
```

# javascript - 客户端应用程序上用于 JSONP 的 Node.js

> ID：14119882
> 
> 赞同：0
> 
> 时间：2013-01-02T09:50:31.787
> 
> 标签：javascript, node.js, jsonp, samsung-smart-tv

我有一个 HTML/JS 中的客户端应用程序（智能电视），它使用 API 检索数据，来自服务器的数据是 JSON 格式。

使用 JSON 我在跨域资源共享（CORS）方面遇到了麻烦，所以我需要在 JSONP 中获取数据，不幸的是当前的 API 不提供 JSONP。

我的问题：

01 - 我可以使用 Node.js 创建一种 HTTP 代理，仅在客户端上使用，以便我可以查询 JSON 格式的 API 并将结果输出为 JSONP 格式吗？

02 - Node.js 可以在 Firefox 和 WebKit 上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:30:00.037

我认为您正在寻找的是一个反向代理，它将代理从您的 html 客户端到不同域上的远程 API 的调用。

如果你这样做，那么你就不需要 JSONP，JSONP 允许你进行跨域调用，但缺点是远程 API 必须返回 JSONP，并不是所有的都这样做。

看看这里：

nginx 作为 api 调用的代理： [http ://www.gabrielweinberg.com/blog/2011/07/nginx-json-hacks.html](http://www.gabrielweinberg.com/blog/2011/07/nginx-json-hacks.html)

node 作为 api 调用的代理： [https ://github.com/nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)

# winforms - Winforms Listview 检查项目丢失

> ID：14119888
> 
> 赞同：0
> 
> 时间：2013-01-02T09:51:13.273
> 
> 标签：winforms, listview

基本上，我的表单中有一个列表视图。为了使在列表视图中选择不同项目的过程更快，我必须添加一个“选择所有项目”复选框。

```
For Each lvItem As ListViewItem In Me.lvwDatos.Items
lvItem .Checked = True
Next 
```

就是这样，非常简单。单击全选复选框后，我可以清楚地看到所有元素如何进入选中状态。但是，在下一步中，当我想遍历代码中的选定项目并执行应应用于它们的任何任务时，我发现所有元素都未选中。是什么让他们失去了状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:52:20.280

This is why I have designed [Better ListView component](http://www.componentowl.com/better-listview) which have this behavior fixed (and many other quirks of .NET ListView).

There is also a free [Better ListView Express](http://www.componentowl.com/better-listview-express), if you are interested.

The checked item collection is maintained separately and you always get its actual state.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:46:11.967

好吧，没关系，我发现了问题......这就是它应该的样子，列表视图中没有问题，只是正在发生的一系列事件破坏了这一切......像往常一样的遗留代码...... .

# web-applications - 如何在我的 Web 应用程序中限制对 javascript 文件的访问

> ID：14119890
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:51:21.343
> 
> 标签：web-applications

我使用 html、javascript 和 servlet 开发了一个 Web 应用程序...

ext/index.html 这是欢迎文件

在这个 html 文件中，我使用脚本标签链接了 javascript 文件

当我将路径更改为 Ext/javascriptfile.js

文件被访问如何限制...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:54:10.843

如果此文件中的某些代码要在您的页面中的某个位置执行，您就是不能。

您的浏览器需要访问此代码才能执行它。如果您的浏览器可以访问它，则可以。限制对客户端代码的访问是无稽之谈，因为它旨在供客户端使用。

但是如果你想让你的代码不可读，你仍然可以尝试[混淆它](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)。

# python - 矩形网格上的 Python 4D 线性插值

> ID：14119892
> 
> 赞同：20
> 
> 时间：2013-01-02T09:51:41.367
> 
> 标签：python, numpy, scipy, interpolation

我需要在 4 个维度（纬度、经度、高度和时间）中线性插入温度数据。
点的数量相当高（360x720x50x8），我需要一种快速的方法来计算数据范围内空间和时间的任何点的温度。

我尝试过使用`scipy.interpolate.LinearNDInterpolator`，但使用 Qhull 进行三角测量在矩形网格上效率低下，需要数小时才能完成。

通过阅读此[SciPy 票证](https://github.com/scipy/scipy/issues/2246)，该解决方案似乎正在实施一个新的 nd 插值器，使用该标准`interp1d`来计算更多数量的数据点，然后对新数据集使用“最近邻”方法。

但是，这又需要很长时间（几分钟）。

有没有一种快速的方法可以在 4 维的矩形网格上插入数据而无需花费几分钟的时间来完成？

我想在*不*`interp1d`计算更高密度的点的情况下使用4 次，而是将其留给用户使用坐标调用，但我不知道如何做到这一点。

 *否则，在这里可以选择根据我的需要编写自己的 4D 插值器吗？

这是我用来测试的代码：

使用`scipy.interpolate.LinearNDInterpolator`：

```
import numpy as np
from scipy.interpolate import LinearNDInterpolator

lats = np.arange(-90,90.5,0.5)
lons = np.arange(-180,180,0.5)
alts = np.arange(1,1000,21.717)
time = np.arange(8)
data = np.random.rand(len(lats)*len(lons)*len(alts)*len(time)).reshape((len(lats),len(lons),len(alts),len(time)))

coords = np.zeros((len(lats),len(lons),len(alts),len(time),4))
coords[...,0] = lats.reshape((len(lats),1,1,1))
coords[...,1] = lons.reshape((1,len(lons),1,1))
coords[...,2] = alts.reshape((1,1,len(alts),1))
coords[...,3] = time.reshape((1,1,1,len(time)))
coords = coords.reshape((data.size,4))

interpolatedData = LinearNDInterpolator(coords,data) 
```

使用`scipy.interpolate.interp1d`：

```
import numpy as np
from scipy.interpolate import LinearNDInterpolator

lats = np.arange(-90,90.5,0.5)
lons = np.arange(-180,180,0.5)
alts = np.arange(1,1000,21.717)
time = np.arange(8)
data = np.random.rand(len(lats)*len(lons)*len(alts)*len(time)).reshape((len(lats),len(lons),len(alts),len(time)))

interpolatedData = np.array([None, None, None, None])
interpolatedData[0] = interp1d(lats,data,axis=0)
interpolatedData[1] = interp1d(lons,data,axis=1)
interpolatedData[2] = interp1d(alts,data,axis=2)
interpolatedData[3] = interp1d(time,data,axis=3) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T12:58:03.527

在您链接的同一张票中，有一个他们称之为*张量积插值*的示例实现，显示了嵌套递归调用的正确方法`interp1d`。如果您为's选择默认`kind='linear'`参数，这等效于四线性插值。`interp1d`

虽然这可能已经足够好了，但这不是线性插值，并且插值函数中会有更高阶项，正如来自[维基百科双线性插值条目](http://en.wikipedia.org/wiki/Bilinear_interpolation)的这张图片所示：

![在此处输入图像描述](../Images/41b552b2d1f27f62731fd99dfff1243d.png)

这对于您所追求的可能已经足够好了，但是在某些应用程序中，三角化、真正分段线性的插值是首选。如果你真的需要这个，有一种简单的方法可以解决 qhull 的缓慢问题。

设置完成后，有`LinearNDInterpolator`两个步骤可以得出给定点的插值：

1.  找出点在哪个三角形（在您的情况下为 4D 超四面体），并且
2.  [使用点相对于顶点的重心坐标](http://en.wikipedia.org/wiki/Barycentric_coordinate_system_%28mathematics%29)作为权重进行插值。

你可能不想弄乱重心坐标，所以最好把它留给`LinearNDInterpolator`. 但是你确实知道一些关于三角测量的事情。大多数情况下，因为你有一个规则的网格，所以在每个超立方体内，三角剖分将是相同的。因此，要插入单个值，您可以首先确定您的点在哪个子`LinearNDInterpolator`立方体中，使用该立方体的 16 个顶点构建一个，并使用它来插入您的值：

```
from itertools import product

def interpolator(coords, data, point) :
    dims = len(point)
    indices = []
    sub_coords = []
    for j in xrange(dims) :
        idx = np.digitize([point[j]], coords[j])[0]
        indices += [[idx - 1, idx]]
        sub_coords += [coords[j][indices[-1]]]
    indices = np.array([j for j in product(*indices)])
    sub_coords = np.array([j for j in product(*sub_coords)])
    sub_data = data[list(np.swapaxes(indices, 0, 1))]
    li = LinearNDInterpolator(sub_coords, sub_data)
    return li([point])[0]

>>> point = np.array([12.3,-4.2, 500.5, 2.5])
>>> interpolator((lats, lons, alts, time), data, point)
0.386082399091 
```

这不适用于矢量化数据，因为这需要`LinearNDInterpolator`为每个可能的子立方体存储一个，即使它可能比对整个事物进行三角剖分要快，但它仍然会非常慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T15:46:12.410

[scipy.ndimage.map_coordinates](http://docs.scipy.org/doc/scipy-dev/reference/generated/scipy.ndimage.interpolation.map_coordinates.html) 是一个很好的用于均匀网格的快速插值器（所有框大小相同）。请参阅SO 上[的 multivariate-spline-interpolation-in-python-scipy](https://stackoverflow.com/questions/6238250/multivariate-spline-interpolation-in-python-scipy)以获得清晰的描述。

对于非均匀的矩形网格，一个简单的包装器 [Intergrid](https://stackoverflow.com/questions/16217995/scipy-fast-interpolation-of-regularly-sampled-3d-data-with-different-intervals/16221098#16221098)将非均匀的网格映射/缩放到均匀的网格，然后执行 map_coordinates。在像您这样的 4d 测试用例中，每个查询大约需要 1 微秒：

```
Intergrid: 1000000 points in a (361, 720, 47, 8) grid took 652 msec 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-19T15:07:59.603

对于非常相似的事情，我使用[Scientific.Functions.Interpolation.InterpolatingFunction](http://dirac.cnrs-orleans.fr/ScientificPython/ScientificPythonManual/Scientific.Functions.Interpolation.InterpolatingFunction-class.html "Scientific.Functions.Interpolation.InterpolatingFunction")。

```
 import numpy as np
    from Scientific.Functions.Interpolation import InterpolatingFunction

    lats = np.arange(-90,90.5,0.5)
    lons = np.arange(-180,180,0.5)
    alts = np.arange(1,1000,21.717)
    time = np.arange(8)
    data = np.random.rand(len(lats)*len(lons)*len(alts)*len(time)).reshape((len(lats),len(lons),len(alts),len(time)))

    axes = (lats, lons, alts, time)
    f = InterpolatingFunction(axes, data) 
```

您现在可以将其留给用户`InterpolatingFunction`使用坐标调用：

```
>>> f(0,0,10,3)
0.7085675631375401 
```

`InterpolatingFunction`具有很好的附加功能，例如集成和切片。

但是，我不确定插值是否是线性的。您必须查看模块源代码才能找到答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-11T14:49:22.133

我无法打开这个地址，并找到关于这个包裹的足够信息*

# powershell - 如何在powerhshell中枚举值是字符串数组的哈希

> ID：14119897
> 
> 赞同：3
> 
> 时间：2013-01-02T09:51:57.163
> 
> 标签：powershell, hashtable, powershell-2.0

我在 powershell 中定义了一个哈希表，如下所示：

```
$jobs = @{
    "Test1"=[Array](
        [Array]("\\server1\file1.txt", "\\server2\file1.txt")

    );
    "Test2"=[Array](
        [Array]("\\sever1\file2.txt", "\\server2\file2.txt"),
        [Array]("\\server1\file3.txt", "\\server2\file3.txt")
    );
} 
```

我试图枚举这个集合并在每一对上调用一个函数。Test1 有 1 个文件比较，Test2 有两个文件比较。

```
$jobs.GetEnumerator() | Sort-Object Key | foreach {
    LogWrite($_.Key + ": comparing files")

    $_.value | foreach {
        LogWrite("Comparing files '" + $_[0] + "' and '" + $_[1] + "'")
        #$r = CompareFiles($_[0], $_[1])
        #LogWrite("Result : " + $r)
    }

    LogWrite($_.Key + ": comparison successful")
    LogWrite("")
} 
```

我得到的输出是：

```
Test1: comparing files
Comparing files '\' and '\'
Comparing files '\' and '\'
Test1: comparison successful

Test2: comparing files
Comparing files '\\server1\file2.txt' and '\\server2\file2.txt'
Comparing files '\\server1\file3.txt' and '\\server2\file3.txt'
Test2: comparison successful 
```

Powershell（某物）似乎正在创建大小相等的数组。任何人都可以提出更好的数据结构或解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:03:57.743

参考[避免不可知的锯齿状数组展平在 Powershell](https://stackoverflow.com/questions/2463190/avoiding-agnostic-jagged-array-flattening-in-powershell)中，如果您在单元素数组中添加逗号，则会出现，它将阻止它被展平：

```
$jobs = @{
    "Test1"=[Array](,
        [Array]("\\server1\file1.txt", "\\server2\file1.txt")

    );
    "Test2"=[Array](
        [Array]("\\sever1\file2.txt", "\\server2\file2.txt"),
        [Array]("\\server1\file3.txt", "\\server2\file3.txt")
    );
} 
```

Powershell 中处理数组的方式一定有些奇怪。

# javascript - “类”中的 JavaScript Scope 和 setTimeout

> ID：14119904
> 
> 赞同：0
> 
> 时间：2013-01-02T09:52:39.630
> 
> 标签：javascript, scope, settimeout

我无法解决范围问题。实际上，我正在开发一个 HMI 浏览器前端的项目。它应该可视化来自自动化系统的变量。对于 HMI，它要求用户可以在不同的页面之间切换。为了解决一般流程，我创建了一个状态机函数，它协调加载、绘图和与用户的交互。我现在的问题是我使用 setTimeout 来调用 run 函数（这实际上是我的状态机）并且现在在 var-scope 上运行时遇到了麻烦。

看下面的代码：

```
function frontend() {

  // Public properties:
  this.soundEnable = true;

  // Private Properties:
  var p1 = 0;
  var p2 = [1,2,3];
  var p3 = {a:1, b:2, c:3};
  var runState = 1;
  var runWait = false:

  // Public Methods

  // stops the state machine until m_continue is called
  this.m_wait = function() {
    runWait = true;
  }

  // continues the state machine
  this.m_continue = function() {
    if (runWait) {
      runWait = false;
      setTimeout(run, 100);
    }
  }

  // Private Methods

  function drawFrame(finish_callback) {
    ...<Drawing of HMI-Objects on the canvas>...
    finish_callback();
  }

  function run() {
    switch (runState) {
    case 1:
      this.m_stop();
      drawFrame(this.m_continue());
    case 2:
      for(i=0; i<p3.length; i++) {
        p2.push(externalObjectCreator(p3[i]));
      }
    }
    if (!runWait) {
      runState++;
      setTimeout(run, 100);
    }
  }

  // Constructor
  ...<code to assign public and private properties>...

  // Finally call the state machine to activate the frontend
  runState = 1;
  run();
} 
```

问题是运行函数的范围。如果从构造函数末尾第一次调用，一切正常。run 可以访问所有私有属性并对其进行操作。但是，当稍后通过 m_continue 的 setTimeout 或它本身调用它时，我无法访问私有属性。在萤火虫中，我只能看到公共属性和功能，而没有我需要的私有属性。

使用全局变量会有所帮助，但这是不可能的，因为在多监视器解决方案中，我有 2 个单独的画布对象，它们需要显示 HMI 的单独版本——在这种情况下，我需要在一个浏览器窗口中并行运行 2 个前端实例。

有谁知道该问题的解决方案？我在我的知识的尽头，完全糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:56:53.670

最简单的方法是定义您的范围。许多知名的 javascript 库也使用这种技术。

```
this.m_continue = function() {
 that = this;  
 if (runWait) {
      runWait = false;
      setTimeout(that.run, 100);
    }
  } 
```

否则，您也可以使用范围绑定`apply`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:24:17.083

您应该在每个 setTimeout 中绑定 run 函数，因为 run 使用`this`.

```
setTimeout(run.bind(this), 100); 
```

# jquery - jquery.ui.js 是否使用 blockUI 功能？

> ID：14119905
> 
> 赞同：1
> 
> 时间：2013-01-02T09:52:41.157
> 
> 标签：jquery, jquery-ui, jquery-blockui

我最近使用 jquery.blockUI.js 库来阻止页面。

但是我在导入 jquery.blockUI.js 和 jquery.ui.js 库时发现我的页面有冲突。

我也在 jquery.ui 库中进行了搜索，并在其中找到了以下代码片段：

```
this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return 
```

我很困惑 jquery.ui 是否包含类似于 blockUI 的功能。

谁能帮我使用哪一个（jquery.ui 或 jquery.blockUI）来阻止页面或页面的一部分。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T14:07:42.373

我查看了 jquery datepicker，如果已定义，它正在使用 blockUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T22:20:27.263

不，jQuery UI 不使用 jquery.blockUI 库。

blockUI 的特性可能就是那个代码参考的内容——但是那个库不包含在 jQuery UI 中，也没有被 jQuery UI 引用。

我看不出为什么您不能在同一页面上同时使用这两种方法的直接原因。可能您在加载顺序或类似性质的问题上存在问题。

我个人现在两者都在生产中，并且没有遇到您所说的任何问题。

# opengl - 关于纹理的多重采样

> ID：14119909
> 
> 赞同：1
> 
> 时间：2013-01-02T09:52:55.933
> 
> 标签：opengl, textures, fragment-shader, multisampling

我在非默认 FBO 中渲染具有绿色背景的白色立方体，并将创建的多重采样纹理附加到此 FBO。当我使用上述纹理在默认 FBO 中渲染立方体时，它会破坏纹理。

这是我的代码：

```
viewport_width=32;
viewport_height=32;
        glBindTexture(GL_TEXTURE_2D_MULTISAMPLE, textureId);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glBindTexture(*target, textureId);"));     

        glUniform1i(glGetUniformLocation(shader_data.psId,"tk_diffuseMap"), 0);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glUniform1i(glGetUniformLocation(shader_data.psId,\"basetexture\"), 0);"));

        glTexImage2DMultisample(GL_TEXTURE_2D_MULTISAMPLE, 4 ,GL_RGBA, viewport_width, viewport_height ,true);  
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glTexImage2DMultisample(GL_TEXTURE_2D_MULTISAMPLE, 4 ,GL_RGBA, 32, 32,true);"));       

        glBindFramebuffer(GL_DRAW_FRAMEBUFFER, Fboid);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glBindFramebuffer(GL_FRAMEBUFFER, Fboid);"));

        glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,GL_TEXTURE_2D_MULTISAMPLE,textureId,0);    
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,GL_TEXTURE_2D_MULTISAMPLE,textureId,0);"));

        glEnable(GL_MULTISAMPLE);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glEnable(GL_MULTISAMPLE);"));

        draw_cube(viewport_width, viewport_height);

                glBindFramebuffer(GL_FRAMEBUFFER, 0);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glBindFramebuffer(GL_FRAMEBUFFER, Fboid);"));

        glBindTexture(GL_TEXTURE_2D_MULTISAMPLE, textureId);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glBindTexture(*target, textureId);"));     

                glDrawElements ( GL_TRIANGLES, 36,GL_UNSIGNED_INT, indices ); 
```

片段着色器：

```
uniform sampler2DMS tk_diffuseMap;
in vec3 ps_texCoord;
out vec4 fragColor;

void main(void)
{

    vec2 iTmp = textureSize(tk_diffuseMap);
    vec2 tmp = iTmp * ps_texCoord.xy;

    vec4 color;
    for(int i = 0; i < 4; ++i)
    {
        color = color + texelFetch(tk_diffuseMap, ivec2(tmp), i);
    }

fragColor=vec4(color/4);
} 
```

让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:28:30.543

用作 FBO 的渲染目标附件的纹理*不得*绑定为采样源，如果它附加到的 FBO 也被绑定为渲染目标。要么是纹理被绑定，要么是 FBO 被绑定。

很明显为什么会这样：如果你可以绑定一个也是渲染目标的纹理，你就会创建一个循环依赖循环。

# iphone - 获取 UITableView 的高度

> ID：14119916
> 
> 赞同：10
> 
> 时间：2013-01-02T09:53:32.990
> 
> 标签：iphone, xcode, uitableview

我已经创建了一个`UITableview`自定义的`UITableViewCell`。`UITableViewCell`包含`UILabels`并且我已经根据单元格的高度计算了每个单元格的高度。但是我怎样才能得到 tableview 的高度？因为根据 tableView 的高度我需要计算我创建的 scrollView 的高度`UITableView`单击按钮时是这样的：

```
-(IBAction)btnClicked:(id)sender
{
    self.tableView=[[UITableView alloc] initWithFrame:CGRectMake(0,150,327,[arr5 count]*205) style:UITableViewStylePlain];
    self.tableView.delegate=self;
    self.tableView.dataSource=self;
    self.tableView.scrollEnabled = NO;
    [self.view addSubview:self.tableView];
    float fscrview = 150 + self.tableView.frame.size.height + 20;
    testscroll.contentSize=CGSizeMake(320, fscrview);
  }
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
  {
  NSString *city1 = city.text;
        UIFont *font = [UIFont fontWithName:@"Helvetica" size:14.0];
        CGSize constraintSize = CGSizeMake(280.0f, MAXFLOAT);
        CGSize bounds = [city1 sizeWithFont:font constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];
//similarly calculated for all 
   return (CGFloat) cell.bounds.size.height + bounds.height+bounds1.height+bounds2.height+bounds3.height+bounds4.height+bounds5.height;
  } 
```

我可以通过这个获得 tableViewCells 的高度。之后如何计算/设置 tableView 的整体高度？

以及如何根据tableView的行/高计算ScrollView的高度？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T10:02:52.187

使用`contentSize.height`的属性`UITableView`。

我想你想用内容大小设置整个表格视图，然后设置滚动视图大小相关的内容，`UITableView`并为此使用下面的代码......

添加数据或仅设置以下代码`reloadData`后..`UITableView`

```
 yourTableView.frame = CGRectMake(yourTableView.frame.origin.x,yourTableView.frame.origin.y, yourTableView.frame.size.width, yourTableView.contentSize.height);

    float ftbl = yourTableView.frame.origin.y + yourTableView.contentSize.height + 15;
    yourScrollView.contentSize=CGSizeMake(320, ftbl); 
```

**更新：**

```
self.tableView=[[UITableView alloc] initWithFrame:CGRectMake(0,150,327,[arr5 count]*205)style:UITableViewStylePlain]; 
self.tableView.delegate=self; 
self.tableView.dataSource=self;

[testscroll addSubview:self.tableView]; /// add this tableview in scrollview not in self.view
[self.tableView reloadData];
self.tableView.frame = CGRectMake(self.tableView.frame.origin.x, self.tableView.frame.origin.y, self.tableView.frame.size.width, self.tableView.contentSize.height);
float ftbl = self.tableView.frame.origin.y + self.tableView.contentSize.height + 15; 
testscroll.contentSize=CGSizeMake(320, ftbl); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T11:20:09.340

获取 UITableView 高度的最简单方法

```
- (CGFloat)tableViewHeight

{
   [tblData layoutIfNeeded];

   return [YOUR_TABLE_NAME contentSize].height;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-31T18:22:09.713

在 iOS 8+ 上，这可以获取表格视图高度

```
CGFloat tableViewHeight = tableView.bounds.size.height; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T10:04:50.643

试试这个：`tableView.backgroundView.bounds.size.height`应该工作

**逻辑：**

*   `UITableView`有一个属性，`backgroundView`即“表视图的背景视图会自动调整大小以匹配表视图的大小”。
*   `backgroundView`是一个具有`UIView`“定义视图的大小和位置”的属性。`bounds``CGRect`
*   `CGRect``size`有财产`size`，`height`有财产_

量子点

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-17T06:55:59.980

您还可以使用 KVO 来观察 tableview 的 contentSize 属性并在其他视图中调整您需要的内容。

把它放在某个地方，例如在 viewDidLoad 中：

```
[self.tableView addObserver:self forKeyPath:@"contentSize" options:NSKeyValueObservingOptionNew|NSKeyValueObservingOptionInitial context:nil]; 
```

然后实现观察者：

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary<NSKeyValueChangeKey,id> *)change context:(void *)context {
      if (object == self.tableView) {
        self.scrollViewHeightConstraint.constant = self.tableView.contentSize.height;
      }
      else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
      }
    } 
```

# wpf - 将数据绑定到由 DataTemplate 托管的 UserControl

> ID：14119917
> 
> 赞同：0
> 
> 时间：2013-01-02T09:53:34.310
> 
> 标签：wpf, winrt-xaml

我有一个用户控件，它公开了一个很长的属性。我想实例化这个控件并绑定到数据模板中的公开属性。

我在资源文件中看到 xaml 错误。模棱两可的“必须有面板的衍生物作为根元素”。当我在调试器中运行它时，我看到 TeamIdx 的值是 -1 并且没有被设置。

```
<DataTemplate x:Key="TeamScheduleTemplate">
    <Grid HorizontalAlignment="Left" Width="400" Height="600">
        <Team:ScheduleControl TeamIdx="{Binding Idx}" />
    </Grid>
</DataTemplate>

public sealed partial class ScheduleControl : UserControl
{
    public static readonly DependencyProperty TeamIdxProperty =
        DependencyProperty.Register(
        "TeamIdx",
        typeof(long),
        typeof(ScheduleControl),
        new PropertyMetadata((long)-1));

    public long TeamIdx
    {
        get { return (long)GetValue(TeamIdxProperty); }
        set { SetValue(TeamIdxProperty, value); }
    }

    public ScheduleControl()
    {
        this.InitializeComponent();

        var team = TeamLookup.GetTeam(TeamIdx);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:02:35.153

编辑：事实证明，在构造控件之前绑定不会发生。回想起来，这完全有道理。我使用的解决方案如下：

```
public sealed partial class ScheduleControl : UserControl
{
    public static readonly DependencyProperty TeamIdxProperty =
        DependencyProperty.Register(
        "TeamIdx",
        typeof(long),
        typeof(ScheduleControl),
        new PropertyMetadata(
            (long)-1,
            OnTeamIdxChanged));

    public long TeamIdx
    {
        get { return (long)GetValue(TeamIdxProperty); }
        set { SetValue(TeamIdxProperty, value); }
    }

    private static void OnTeamIdxChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var target = (ScheduleControl)sender;
            target.OnTeamIdxChanged((long)e.NewValue);
    }

    private void OnTeamIdxChanged(long id)
    {
        var model = FindModel(id);
        this.DataContext = model;
    }

    public ScheduleControl()
    {
        this.InitializeComponent();
    }
} 
```

# wso2 - 定义具有复杂类型属性的流

> ID：14119919
> 
> 赞同：0
> 
> 时间：2013-01-02T09:53:35.433
> 
> 标签：wso2, complex-event-processing

```
org.wso2.siddhi.query.api.definition.Attribute 
```

只能定义类型的元素

```
STRING, INT, LONG, FLOAT, DOUBLE, BOOL 
```

如何定义具有复杂类型元素的流。例如

```
Address {
  String street;
  String city;
}
Person{
  String name;
  Address addr;
} 
```

如何创建`Person`如上定义的流。

是否可以像在 ESPER 中那样根据 Pojo 类定义来定义 Stream？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:04:30.930

在 siddhi 中，您不能根据 Pojo 类定义来定义流。Siddhi 仅支持元组，因此您必须按如下方式定义流；

例如

定义 PersonStream （名称字符串，address_streat 字符串，address_city 字符串）；

# objective-c - 如何在 Cocoa / WebKit 中的 DOM 更改后自动滚动 WebView

> ID：14119929
> 
> 赞同：3
> 
> 时间：2013-01-02T09:54:19.897
> 
> 标签：objective-c, macos, cocoa, webkit

我正在构建一个小型 Mac 应用程序，该应用程序通过 Web 套接字持续提供数据。处理完每个数据段后，数据以`WebView`. 新数据*永远不会替换*任何数据，`WebView`而是始终*使用 DOM 操作将新数据**附加*到`WebView`内容中。下面的代码示例应该让您了解我在做什么。

 *```
DOMDocument *doc = self.webview.mainFrame.DOMDocument;
DOMHTMLElement *container = (DOMHTMLElement *)[doc createElement:@"div"];
NSString *html = [NSString stringWithFormat:@"... omitted for the sake of brevity ... "];
[container setInnerHTML:html];
[doc.body appendChild:container]; 
```

的渲染`WebView`显然是异步发生的。有没有办法判断 DOM 操作何时完成并且内容已被绘制？我想使用类似`[webview scrollToEndOfDocument:self]`实现自动滚动的东西。侦听 DOM 事件并没有帮助，因为它们似乎是在 DOM 被修改但在这些更改被呈现之前触发的。到目前为止我使用的代码类似于以下内容

```
[self.webview.mainFrame.DOMDocument addEventListener:@"DOMSubtreeModified" listener:self useCapture:NO]; 
```

和这个结合

```
- (void)handleEvent:(DOMEvent *)event
{
    [self.webview scrollToEndOfDocument:self];
} 
```

这段代码的问题是滚动发生得太早了。我基本上总是落后一个数据段。我可以注册在绘制内容时触发的任何类型的回调/通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:48:57.607

## 使用定时器

可以使用`NSTimer`. 该解决方案面临的挑战是确定何时禁用计时器以允许手动滚动。我无法做到后者。无论如何，这是使用计时器启用自动滚动的代码：

```
self.WebViewAutoScrollTimer = 
  [NSTimer scheduledTimerWithTimeInterval:1.0/30.0 
                                   target:self
                                 selector:@selector(scrollWebView:)
                                 userInfo:nil
                                  repeats:YES]; 
```

`scrollWebView:`只是一种`scrollToEndOfDocument:`在 Web 视图上调用的方法。

## 使用通知

由 web 视图发出的列表`NSViewFrameDidChangeNotification`只允许在*帧大小更改*的情况下滚动。这些变化发生在添加新内容时以及封装视图的大小发生变化时，例如调整窗口大小。我的实现没有区分这两种情况。

```
NSClipView *contentView = self.webView.enclosingScrollView.contentView;
[contentView setPostsFrameChangedNotifications:YES];
[[NSNotificationCenter defaultCenter] addObserverForName:NSViewFrameDidChangeNotification
                                                  object:contentView
                                                   queue:nil
                                              usingBlock:^(NSNotification *notification) {
                                                  [self.webView scrollToEndOfDocument:self];
                                              }]; 
```

**注意：**指示 web 视图的滚动视图的内容视图很重要——*考虑几次，它就会开始变得有意义*——当它的帧大小发生变化时发布通知，因为`NSView`默认情况下实例不这样做。这是使用上面示例中的前两行代码完成的。*

# excel - 我无法清除和重置单元格的背景颜色

> ID：14119936
> 
> 赞同：4
> 
> 时间：2013-01-02T09:54:38.910
> 
> 标签：excel, vbscript, vba

借助以下命令，我可以清除单元格的内容，但不能清除它们的背景颜色。如何清除和设置范围内单元格的背景颜色？

```
ob9.Range(ob9.Cells(1,StartCol),ob9.Cells(1,maxcolumn)).ClearContents 
```

***编辑***

我尝试了以下方法：

```
CountFill = objExcel1.Application.WorksheetFunction.CountA(ob9.Rows(1))
CountBlnk = objExcel1.Application.WorksheetFunction.CountBlank(ob9.Rows(1))
TotalColumn= CountBlnk + CountFill

ob9.Range(ob9.Cells(1,CountFill + 1 ),ob9.Cells(1,TotalColumn)).Interior.ColorIndex(-4142) '= xlColorIndexNone 
```

它可以在一行中完成吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T10:34:50.483

一切安好。但是不要**选择**，因为你正在运行一个巨大的脚本（知道你到目前为止经历了什么）......

```
with ob9.Range(ob9.Cells(1,StartCol),ob9.Cells(1,maxcolumn))
.Interior.ColorIndex = xlColorIndexNone
.Interior.ColorIndex = 120
End With 
```

如果您直接使用，`range`您甚至可以删除`with`块，因为它也有一些性能下降的缺点。

*   [参考文章](http://blogs.technet.com/b/heyscriptingguy/archive/2007/04/27/how-can-i-assign-a-background-color-to-cells-in-a-spreadsheet-and-then-sum-those-cells.aspx)

回答您的子问题：

1.  如何从列号获取列名？

    [列名中的 Excel 列号](https://stackoverflow.com/questions/10106465/excel-column-number-from-column-name)

2.  如何根据 OP 的`maxcolumn`名称或编号设置范围。

    [范围（行，列）](http://www.ozgrid.com/forum/showthread.php?t=15329)。

    您提到您需要`row 1`，`maxcolumn`然后您可以使用这两个数据构建单元。

    `MsgBox Sheets(3).Rows(1).Columns(5).Address`

    所以试试：

    `MsgBox Sheets(3).Rows(1).Columns(maxcolumn).Address`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T10:04:34.077

你可以试试

```
ob9.Range(ob9.Cells(1,StartCol),ob9.Cells(1,maxcolumn)).Select
Selection.Interior.ColorIndex = xlColorIndexNone
Selection.Interior.ColorIndex = xlNone 
```

最后两行之一应该可以工作，但我不确定是哪一行（我没有 Excel）。如果您可以同时尝试并报告，那就太好了。

您可以使用以下方法设置颜色：

```
Selection.Interior.Color = RGB(255,0,0) 
```

# c# - 奇怪的卸载行为 - WPF 窗口

> ID：14119939
> 
> 赞同：1
> 
> 时间：2013-01-02T09:54:57.147
> 
> 标签：c#, wpf

我有一个带有 MainWindow 的简单 WPF 应用程序。在后面的代码中设置一个卸载事件。将 设置`MainWindow`为启动 uri。关闭窗口时不会触发卸载。创建第二个窗口 -`NotMainWindow`单击一个按钮。

在按钮单击事件中，调用 MainWindow。`MainWindow`触发关闭和卸载。**为什么行为上的差异？**我想要得到的是，我如何**每次都**获得某种卸载事件？

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Unloaded="Main_Unloaded">
<Grid>

</Grid>
</Window>

    private void Main_Unloaded(object sender, RoutedEventArgs e)
    {

    }

<Window x:Class="WpfApplication2.NotMainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="NotMainWindow" Height="300" Width="300">
<Grid>
    <Button Content="Show Main" Height="25" Margin="10" Width="70" Click="Button_Click" />
</Grid>
</Window>

private void Button_Click(object sender, RoutedEventArgs e)
    {
        MainWindow win = new MainWindow();
        win.Show();
    }

<Application x:Class="WpfApplication2.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="NotMainWindow.xaml">
<Application.Resources>

</Application.Resources>
</Application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:12:33.323

根据您的评论，我了解您正在谈论的场景。这是一个[已知问题](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/e7a371dc-48af-4292-b1b4-2bd4459b4a00)，在关闭应用程序（例如关闭最后一个窗口）时不会调用 unloaded。

如果您只想知道窗口何时关闭，请使用以下`Closing`事件：

```
public MainWindow()
{
    this.Closing += new CancelEventHandler(MainWindow_Closing);
    InitializeComponent();
}

void MainWindow_Closing(object sender, CancelEventArgs e)
{
   // Closing logic here.
} 
```

如果您想知道最后一个窗口何时关闭，例如您的应用程序正在关闭，您应该使用`ShutdownStarted`

```
public MainWindow()
{
    this.Dispatcher.ShutdownStarted += Dispatcher_ShutdownStarted;
    InitializeComponent();
}

private void Dispatcher_ShutdownStarted( object sender, EventArgs e )
{
   //do what you want to do on app shutdown
} 
```

# android - 在应用程序内购买？

> ID：14119941
> 
> 赞同：1
> 
> 时间：2013-01-02T09:55:11.127
> 
> 标签：android

谁能告诉我如何获取可供购买的产品列表？我正在使用简单的驱动器示例作为参考。假设在我的应用程序的开发者控制台上，我列出了两个产品作为产品 1 和产品 2。如何在我的应用程序。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T13:10:42.857

我认为这应该是您正在寻找的：

[http://developer.android.com/training/in-app-billing/list-iab-products.html#QueryDetails](http://developer.android.com/training/in-app-billing/list-iab-products.html#QueryDetails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T05:18:05.920

尝试这个，

```
 IabHelper billingHelper = new IabHelper(this, AppPublicKey.BASE_64_KEY);

                billingHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {

                    @Override
                    public void onIabSetupFinished(IabResult result) {
                        if (!result.isSuccess()) {
                            // Oh noes, there was a problem.
                            complain("Problem setting up in-app billing: " + result);
                            return;
                        }

                        // Have we been disposed of in the meantime? If so, quit.
                        if (billingHelper == null) return;
                        List<String> aListSKU = new ArrayList<String>();
                        aListSKU.add(ProductId.SKU100);
                        aListSKU.add(ProductId.SKU200);
                        aListSKU.add(ProductId.SKU400);
                        billingHelper.queryInventoryAsync(true, aListSKU, mGotInventoryListener);
                    }
                }); 
```

创建 QueryInventoryFinishedListener 接口

```
 // Listener that's called when we finish querying the items and subscriptions we own

    IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {

                @Override
                public void onQueryInventoryFinished(IabResult result, Inventory inventory) {

                     // Have we been disposed of in the meantime? If so, quit.
                   if (billingHelper == null) return;

                   // Is it a failure?
                   if (result.isFailure()) {
                       Toast.makeText(ProfileCreditActivity.this, "Failed to query inventory: " + result, Toast.LENGTH_SHORT).show();
                       return;
                   }

                   Log.d(TAG, "Query inventory was successful.");

                   SkuDetails sku100Details = inventory.getSkuDetails(ProductId.SKU100);
                   sku100Price = sku100Details.getPrice();
                   sku100Title = sku100Details.getTitle();

                   SkuDetails sku200Details = inventory.getSkuDetails(ProductId.SKU200);
                   sku200Price = sku200Details.getPrice();
                   sku200Title = sku100Details.getTitle();

                   SkuDetails sku400Details = inventory.getSkuDetails(ProductId.SKU400);
                   sku400Price = sku400Details.getPrice();
                   sku400Title = sku100Details.getTitle();

                    updateUI();
                }

            }; 
```

在此处更新您的用户界面

```
private void updateUI() {

    } 
```

# c# - 如何在 Asp.Net C# 中填充相关下拉列表

> ID：14119945
> 
> 赞同：-4
> 
> 时间：2013-01-02T09:55:31.827
> 
> 标签：c#, asp.net, drop-down-menu

我想填充**两个下拉列表**，根据第一个下拉列表的选择，第二个下拉列表将被填充。

**例子 ：**

就像我有两个下拉列表，即**1.ddlCountry**和**2.ddlState**

Now when country is selected then depending on the selected **Country** the **States** related with that Country will get populated in the State dropdownlist. 我想通过使用 C# 编码语言在 Asp.Net 中重新加载整个页面来实现这一点。

我怎样才能达到同样的效果？

`Dropdownlist`正在通过执行查询从数据库中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:16:42.100

1.  您可以`AJAX toolkit CascadingDropDown`按照`Naresh`. 或者
2.  使用[ajax 更新面板](http://geekswithblogs.net/ranganh/archive/2007/05/11/112405.aspx)并保留所有`Dropdowns`内容。所以整个页面不会在更改下拉值时加载。

> 您没有将代码提供给进一步的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:46:47.330

```
protected void ddlCountry_SelectedIndexChanged(object sender, EventArgs e)
{
  FillStateByCountry();
}
protected void ddlState_SelectedIndexChanged(object sender, EventArgs e)
{
  FillLocationByCountryandState();
}

private void FillStateByCountry()
{
    DataSet dstFillState;
    int CountryId = Convert.ToInt32(ddlCountry.SelectedValue.ToString());
    dstFillState = Tbl_State.FillDDLState(CountryId);
    ddlState.DataSource = dstFillState;
    ddlState.DataTextField = "State";
    ddlState.DataValueField = "Id";
    ddlState.DataBind();
} 
```

相似地`FillLocationByCountryandState();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:49:47.013

在表单中添加两个下拉列表并将其命名为`cmbStates`,`cmbCities`

当您从中选择州名时`cmbStates(dropwdownlist)`，`cmbCities(dropdownlist)`根据州名（cmbStates）生成城市

**通过从数据库中获取数据**

```
 private void Form1_Load(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection("server=pbs-server;database=p2p;user id=shekar;password=sekhar@1346");
        SqlCommand cmd = new SqlCommand("select states from Country", con);
        DataSet ds = new DataSet();
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        con.Open();
        da.Fill(ds, "Country");
        cmbStates.DataSource = ds.Tables[0];
        cmbStates.SelectedValue = 0;
        con.Close();

    }

    private void cmbStates_SelectedIndexChanged(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection("server=xxxx;database=xxxx;user id=xxxxr;password=xxxxxx");
        SqlCommand cmd = new SqlCommand("select cities from States where cityname = 'cmbStates.SelectedItem.ToString()'", con);
        DataSet ds = new DataSet();
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        con.Open();
        da.Fill(ds, "States");
        cmbCities.DataSource = ds.Tables[0];
        cmbCities.SelectedValue = 0;
        con.Close();           

    } 
```

**或者**

**手动添加项目**

```
namespace DropDownlist
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            cmbStates.Items.Add("Andhra Pradesh");
            cmbStates.Items.Add("Tamilnadu");
            cmbStates.Items.Add("Karnataka");
            cmbStates.SelectedValue = 0;
        }

        private void cmbStates_SelectedIndexChanged(object sender, EventArgs e)
        {

            if (cmbStates.SelectedItem.ToString() == "Andhra Pradesh")
            {
                cmbCities.Items.Clear();
                cmbCities.Items.Add("Hyderabad");
                cmbCities.Items.Add("Guntur");
                cmbCities.Items.Add("Vijayawada");
                cmbCities.SelectedValue = 0;

            }
            else if (cmbStates.SelectedItem.ToString() == "Tamilnadu")
            {
                cmbCities.Items.Clear();
                cmbCities.Items.Add("Chennai");
                cmbCities.Items.Add("Coimbatore");
                cmbCities.Items.Add("ooty");
                cmbCities.SelectedValue = 0;

            }
            else if (cmbStates.SelectedItem.ToString() == "Karnataka")
            {
                cmbCities.Items.Clear();
                cmbCities.Items.Add("Bangalore");
                cmbCities.Items.Add("Mangalore");
                cmbCities.SelectedValue = 0;

            }
            else
            {
                MessageBox.Show("Please Select any value");
            }
        }
    }
} 
```

# c# - 如何更改 C# Winform 文本框中某些子字符串的字体颜色？

> ID：14119947
> 
> 赞同：4
> 
> 时间：2013-01-02T09:55:33.417
> 
> 标签：c#, colors, textbox, substring

如果我想将文本文件上传到文本框中并想通过更改字体颜色来突出显示某些单词，我知道我需要编写`TextBox.ForeColor = Color.SomeColor;`
但如果我希望**并非所有文本都具有*相同*的颜色**，只有一些子字符串。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T09:59:37.867

检查[Pieter Joost van de Sande](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/84b16f2d-9596-4095-bb0e-92354114a694/)的答案。

> 您不能在 TextBox 控件中执行此操作，只能在 RichTextBox 控件中执行此操作。

```
if( myRichTextBox.TextLenght >= 5 )
{
myRichTextBox.Select( 0, 5 );
myRichTextBox.SelectionColor = Color.Green;
}

if( myRichTextBox.TextLenght >= 15 )
{
myRichTextBox.Select( 10, 15 );
myRichTextBox.SelectionColor = Color.Red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-04T23:53:09.960

正如@syed-mohsin 回答的那样，可以添加文本，然后选择部分文本并更改其颜色。

也可以不选择任何内容， set `SelectionColor`，并且任何附加的文本（例如通过`AppendText`or `Text +=`）将具有该颜色，直到您`SelectionColor`再次更改。例如：

`richTextBox.AppendText("default color"); richTextBox.SelectionColor(Color.Green); richTextBox.AppendText("that will be in green"); richTextBox.SelectionColor(Color.Red); richTextBox.AppendText("that will be in red"); richTextBox.SelectionColor(Color.Black); richTextBox.AppendText("that will be in black");`

# asp.net - ASP.NET 跟踪 - 自定义 HttpModule

> ID：14119951
> 
> 赞同：3
> 
> 时间：2013-01-02T09:55:57.147
> 
> 标签：asp.net, debugging, trace, system.diagnostics

我们开发了我们的自定义 HttpModule。
现在我想添加跟踪它的功能，并在标准 ASP.NET 跟踪页面（或 trace.axd）中查看跟踪结果。我尝试使用`System.Diagnostics.Trace.Write("FILTER TEST");`写跟踪信息。这适用于除 HttpModule 之外的任何地方。我在 web.config 中添加了一个跟踪侦听器，但它只显示在页面生命周期中编写的跟踪。如何查看我在 HttpModule 中编写的跟踪信息以及如何将此信息添加到 ASP.NET 跟踪页面？

```
<trace>
  <listeners>
    <add name="WebPageTraceListener"
         type="System.Web.WebPageTraceListener, System.Web, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
  </listeners>
</trace> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T08:11:58.320

我通常使用 TraceSource，即使在自定义 HttpModule 中也能正常工作。

所有你需要的是 ：

*   声明一个源（您可以在代码中使用任意数量的源，这取决于您想要的跟踪粒度）-（有关 TraceSource 的更多信息，请[点击此处](http://msdn.microsoft.com/fr-fr/library/System.Diagnostics.TraceSource.aspx)）：

    ```
    public class MyModule : IHttpModule
    {
        public static readonly TraceSource MyTraceSource = new TraceSource("MySource", SourceLevels.Off);
    (...)
    } 
    ```

*   在您的代码中，只要您需要源转储跟踪中的某些内容，请使用 TraceEvent（有关 traceEvent 方法的更多信息，请点击[此处](http://msdn.microsoft.com/fr-fr/library/system.diagnostics.tracesource.traceevent.aspx)）：

    ```
    MyModule.MyTraceSource.TraceEvent(TraceEventType.Information, 0, "Message that'll be dumped in the trace"); 
    ```

*   在您的配置文件中，您可以仅在您想要的级别启用/禁用您想要的跟踪源（信息、警告、错误，...）

    ```
    <system.diagnostics>

        <trace autoflush="true"/>

        <sharedListeners>
            <add name="myListener" initializeData="..." type="..."/>
        </sharedListeners>

        <sources>
            <source name="MySource" switchName="VerboseSwitch" >
                <listeners>
                    <clear/>
                    <add name="myListener"/>
                </listeners>
            </source>
            <source name="OtherSource" switchName="OffSwitch" >
                <listeners>
                    <clear/>
                    <add name="myListener"/>
                </listeners>
            </source>
        </sources>

        <switches>
            <clear/>
            <add name="OffSwitch" value="Off"/>
            <add name="VerboseSwitch" value="Verbose"/>
            <add name="InformationSwitch" value="Information"/>
            <add name="WarningSwitch" value="Warning"/>
            <add name="ErrorSwitch" value="Error"/>
        </switches>

    </system.diagnostics> 
    ```

在这里您可以找到一篇关于跟踪主题的非常棒的文章：http: [//www.codeproject.com/Articles/149251/Debugging-Tracing-and-Instrumentation-in-NET-and-A](http://www.codeproject.com/Articles/149251/Debugging-Tracing-and-Instrumentation-in-NET-and-A)

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:11:57.093

您是否尝试过使用 System.Web.IisTraceListener？请参阅：[http ://www.iis.net/learn/develop/runtime-extensibility/how-to-add-tracing-to-iis-managed-modules](http://www.iis.net/learn/develop/runtime-extensibility/how-to-add-tracing-to-iis-managed-modules)

# objective-c - xml解析在objective-c中抛出SIGABRT

> ID：14119953
> 
> 赞同：0
> 
> 时间：2013-01-02T09:56:09.810
> 
> 标签：objective-c, xml-parsing

我正在解析 xml 数据，但是当我解析 xml 时，它会引发错误 SIGABRT

```
<?xml version="1.0" encoding="utf-8"?>
 <questions>
    <question>
          <questionid>1402</questionid>
          <templateid>1</templateid>
          <questionname><![CDATA[<p><span style="font-size: small;">Subtract (<img   id="MathMLEq1" src="url of image" alt="" width="105" height="21" border="0" /> )from (<img  id="MathMLEq2" src="Url of image" alt="" width="115" height="20" border="0" /> )</span></p><p>&nbsp;</p>]]>
          </questionname>
          <questiontypeid>1</questiontypeid>
      </question>
   <questions> 
```

我将所有内容都放在 CDATA 中，那么为什么它会引发错误？

堆栈跟踪

```
2013-01-02 16:08:23.194 EduApp[1535:15503] *** Terminating app due to uncaught exception  'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'
*** First throw call stack:
(0x2c50022 0x326dcd6 0x2c3cd88 0x210c4 0x1e1de 0x1d50a1e 0x1d50d11 0x1d628fd 0x1d62aef 0x1d62dbb 0x1d6385f 0x1d63e06 0x1d63a24 0x1c42d 0x25af85d 0x2c24936 0x2c243d7 0x2b87790 0x2b86d84 0x2b86c9b  0x44767d8 0x447688a 0x1c89626 0x253d 0x24a5 0x1)
terminate called throwing an exception 
```

# java - 某些包的 Websphere 详细类加载

> ID：14119956
> 
> 赞同：2
> 
> 时间：2013-01-02T09:56:21.963
> 
> 标签：java, websphere, classloader, websphere-7, verbose

在 websphere 7 中，有什么方法可以限制详细的类加载以仅记录某些包中的类。假设我只想查看从包**com.mycompany.***加载的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:03:09.207

正如[IBM SDK 和运行时环境 Java 技术版第 6 版](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/index.jsp)（Java WebSphere 使用的）的[类加载器运行时诊断](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/topic/com.ibm.java.doc.diagnostics.60/diag/tools/class_load_runtime.html)部分中指定的那样

根据您的情况，您可以设置`-Dibm.cl.verbose=<class_expression>`变量以执行您想要的操作`-Dibm.cl.verbose=com.mycompany.*`

在 WebSphere Admin Console 下，`Application servers > server1 > Process definition > Java Virtual Machine`而不是检查`Verbose class loading`只是将变量添加到`Generic JVM arguments`，这应该可以解决问题

# android - 无法使用动态路径从原始文件夹播放视频

> ID：14119957
> 
> 赞同：0
> 
> 时间：2013-01-02T09:56:33.243
> 
> 标签：android, html, android-videoview

我在编写视频播放器时有一个奇怪的行为。我有一个针对 mp4 视频的 html5 菜单。当您单击视频时，将处理路径，并且本机视频播放器意图将开始播放视频。我的视频放在“原始”文件夹中。

当我使用静态路径时，视频播放得非常好：

```
String uriPath = "android.resource://" + getPackageName() + "/" + R.raw.video1; 
```

当我使用以下路径时，我无法播放它：

```
video_title = getIntent().getExtras().getString("video_title");

String uriPath = "android.resource://" + getPackageName() + "/" + "R.raw."+video_title; 
```

请注意，我在主要意图中删除了文件的扩展名，因此变量“video_title”将保存没有扩展名的视频标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:33:36.440

我通过更改 uriPath 变量解决了这个问题：

```
String uriPath = "android.resource://" + getPackageName() + "/" + "R.raw."+video_title; // BAD

String uriPath = "android.resource://" + getPackageName() + "/" + "raw/"+video_title; // GOOD 
```

# spring - Web 应用程序类路径中缺少方法

> ID：14119960
> 
> 赞同：0
> 
> 时间：2013-01-02T09:56:42.233
> 
> 标签：spring, jakarta-ee, maven, classpath

新年快乐！

我正面临 Web 应用程序的类路径问题。我有两个基于 Maven 的模块

1.  api
2.  使用 api 的网络应用程序

有一个在api中存储数据的功能，可以正常工作，没有任何问题，但是当从web应用程序（使用tomcat容器）调用相同的方法时，它会抛出以下异常

```
Dec 27, 2012 9:18:03 PM org.apache.catalina.core.StandardWrapperValve invoke SEVERE: Servlet.service() for servlet [spring] in context with path [/xyz-service] threw exception [Handler processing failed; nested exception is java.lang.NoSuchMethodError: com.hp.hpl.jena.rdf.model.impl.RDFWriterFImpl.setBaseWriterClassName(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;] with root cause
java.lang.NoSuchMethodError: com.hp.hpl.jena.rdf.model.impl.RDFWriterFImpl.setBaseWriterClassName(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    at org.openjena.riot.SysRIOT.wireIntoJena(SysRIOT.java:93)
    at org.openjena.riot.RIOT.init(RIOT.java:61)
    at com.hp.hpl.jena.query.ARQ.init(ARQ.java:458)
    at com.hp.hpl.jena.query.ARQ.<clinit>(ARQ.java:463)
    at com.ontotext.jena.SesameJena.getContext(Unknown Source)
    at com.ontotext.jena.SesameJena.wireExecution(Unknown Source)
    at com.ontotext.jena.SesameJena.<clinit>(Unknown Source)
    at com.ontotext.jena.SesameDataset.<clinit>(Unknown Source)
    at me.xyz.api.ontoop.service.OWLIMInferencing.getScore(OWLIMInferencing.java:63)
    at me.xyz.service.impl.FacebookRegisterServiceImpl.persistUserInfo(FacebookRegisterServiceImpl.java:109)
    at me.xyz.service.impl.RegisterServiceImpl.registerUseronfirstVist(RegisterServiceImpl.java:40)
    at me.xyz.controller.UserController.validate(UserController.java:71)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:123)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:168)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)  at java.lang.Thread.run(Thread.java:680) 
```

当我尝试导出网络应用程序战争时，它的 jar 包含具有报告为未找到的方法的类。

注意： api 中的所有其他类都可以正常工作，没有任何问题，但只有在调用此特定方法时才会出现此问题。

Web 应用程序是使用 spring、jpa 构建的。

提前感谢您的及时帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:04:55.220

看来你需要一个依赖：

```
<dependency>
    <groupId>com.hp.hpl.jena</groupId>
    <artifactId>jena</artifactId>
    <version>2.6.4</version>
</dependency> 
```

或者可能：

```
<dependency>
    <groupId>org.apache.jena</groupId>
    <artifactId>jena</artifactId>
    <version>2.7.4</version>
</dependency> 
```

您应该检查是否没有依赖冲突。可能您的 webapp 正在加载不兼容的依赖项。

# asp.net - Azure 上的联合身份验证

> ID：14119965
> 
> 赞同：27
> 
> 时间：2013-01-02T09:57:08.593
> 
> 标签：asp.net, azure, wif

我正在使用 WIF (.net 4.5) 和 Azure Active Directory 进行身份验证。该网站将位于 Azure 上。

一切都在本地按预期工作，但是当我把它放到天蓝色上时，我得到了错误：

> 数据保护操作不成功。这可能是由于没有为当前线程的用户上下文加载用户配置文件，这可能是线程模拟时的情况。

我知道这是因为应用程序不能使用 DAPI，所以我需要切换到使用 MAC 保护我的应用程序。

在本地，我将此添加到我的 webconfig 中：-

```
 <securityTokenHandlers>
    <remove type="System.IdentityModel.Tokens.SessionSecurityTokenHandler, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <add type="System.IdentityModel.Services.Tokens.MachineKeySessionSecurityTokenHandler, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </securityTokenHandlers> 
```

按照[文档](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.tokens.machinekeysessionsecuritytokenhandler.aspx)中的建议，我添加了一个静态机器密钥，但我找不到任何关于密钥长度的建议 - 所以我假设为 256。

但是，此配置仅给出此错误：

> [CryptographicException: 加密操作期间发生错误。] System.Web.Security.Cryptography.HomogenizingCryptoServiceWrapper.HomogenizeErrors(Func`2 func, Byte[] input) +115 System.Web.Security.Cryptography.HomogenizingCryptoServiceWrapper.Unprotect(Byte[] protectedData) +59 System.Web.Security.MachineKey.Unprotect(ICryptoServiceProvider cryptoServiceProvider, Byte[] protectedData, String[] 目的) +62 System.Web.Security.MachineKey.Unprotect(Byte[] protectedData, String[] 目的) + 122 System.IdentityModel.Services.MachineKeyTransform.Decode(Byte[] 编码) +161 System.IdentityModel.Tokens.SessionSecurityTokenHandler.ApplyTransforms(Byte[] cookie, Boolean outbound) +123 System.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(XmlReader reader ,SecurityTokenResolver tokenResolver) +575 System.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(Byte[] token, SecurityTokenResolver tokenResolver) +76 System.IdentityModel.Services.SessionAuthenticationModule.ReadSessionTokenFromCookie(Byte[] sessionCookie) +833 System.IdentityModel.Services.SessionAuthenticationModule。 TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +186 System.IdentityModel.Services.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +210 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136 System.Web.HttpApplication。 ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69SecurityTokenResolver tokenResolver) +76 System.IdentityModel.Services.SessionAuthenticationModule.ReadSessionTokenFromCookie(Byte[] sessionCookie) +833 System.IdentityModel.Services.SessionAuthenticationModule.TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +186 System.IdentityModel.Services.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +210 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69SecurityTokenResolver tokenResolver) +76 System.IdentityModel.Services.SessionAuthenticationModule.ReadSessionTokenFromCookie(Byte[] sessionCookie) +833 System.IdentityModel.Services.SessionAuthenticationModule.TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +186 System.IdentityModel.Services.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +210 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +186 System.IdentityModel.Services.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +210 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136 System.Web.HttpApplication。 ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +186 System.IdentityModel.Services.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +210 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136 System.Web.HttpApplication。 ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69

我删除了 machinekey 部分，因为我没有指定格式正确的密钥，但错误并没有消失。

WIF 是一场多么激烈的战斗！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-23T12:21:45.633

如果你没有在配置中指定 machineKey，Azure 会添加一个。但是，如果您创建应用程序的新版本并使用 VIP 切换将其部署到 Azure，Azure 会为暂存中的部署生成一个新的机器密钥（假设您的第一次部署是到生产环境）。（VIP 切换是部署新版本然后在生产和暂存之间切换虚拟 IP 地址的好机制）。

所以基本上一种解决方案是让 Azure 生成密钥，但在 VIP 切换后你又遇到了问题。为了避免这种情况，您可以在 Application_Error 处理程序中捕获 Global.asax 中的 CryptographicException，如下所示：

```
// Be sure to reference System.IdentityModel.Services
// and include using System.IdentityModel.Services; 
// at the start of your class
protected void Application_Error(object sender, EventArgs e)
{
    var error = Server.GetLastError();
    var cryptoEx = error as CryptographicException;
    if (cryptoEx != null)
    {
        FederatedAuthentication.WSFederationAuthenticationModule.SignOut();
        Server.ClearError();
    }
} 
```

SignOut() 方法会导致 cookie 被删除。

**编辑**：如@anjdreas 所述，更新了有关生成 machineKey 的信息。

另一种解决方案是生成 machineKey，您可以使用 IIS Manager 来完成，详细信息请参见[生成 MachineKey](http://blogs.msdn.com/b/amb/archive/2012/07/31/easiest-way-to-generate-machinekey.aspx)的最简单方法。如果您将相同的密钥放入 Azure Web 角色中的所有 Web 应用程序，Azure 部署过程将不会替换它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T12:29:52.000

机器密钥不应该存在：Windows Azure 会为您生成一个，并确保它在您角色中的每个实例上都是相同的。

关于您看到的错误：您可以尝试清除 cookie 吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-02T16:12:29.727

在这种情况下，简单地清除 cookie 为我解决了整个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-05T16:58:54.243

如果您使用的是表单身份验证。您可以在捕获异常时注销并允许您的用户登录并创建有效的 cookie

```
catch (CryptographicException cex)
{
    FormsAuthentication.SignOut();
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-03-19T01:22:56.147

要求所有用户清除所有 cookie 对我来说并不是一个真正的选择。在[这个站点](http://anuchandy.blogspot.com/2014/06/acs-wif-asp-net-and-microsoft-azure.html#comment-form)以及“Programming Windows Identity Federation”一书中，我找到了一个更好的解决方案（无论如何对我来说）。如果您已经将 SSL 证书上传到 Azure，则可以使用该证书来加密所有 Azure 实例上的 cookie，您无需担心新的机器密钥、IIS 用户配置文件等。

# c++ - 如何修改 A* 算法以找到前 k（比如说 50）条最短路径？

> ID：14119973
> 
> 赞同：0
> 
> 时间：2013-01-02T09:57:35.457
> 
> 标签：c++, algorithm, graph-algorithm, shortest-path, a-star

> **可能重复：**
> [如何使用 A 星算法找到前 100 条最短路径？](https://stackoverflow.com/questions/14088898/how-can-i-use-the-a-star-algorithm-to-find-the-first-100-shortest-paths)

如何修改 A* 算法以找到前 k（比如说 50）条最短路径？我需要将其开发为 C++ 应用程序。请解释。非常感谢朋友...

# javascript - 谷歌饼图未显示在模态弹出窗口中

> ID：14119975
> 
> 赞同：1
> 
> 时间：2013-01-02T09:57:45.743
> 
> 标签：javascript, jquery, google-visualization

我正在尝试在模态弹出窗口上显示谷歌图表。它在普通页面上工作得很好，但它不会出现在模态页面上。

这是我正在使用的代码。我不确定出了什么问题。

# 这是位于 url 上的 HTML 和 JS 代码，/polls/

```
<!--Div that will hold the pie chart-->
<h3 style="text-align:center;">Test</h3>
<hr>
<div id="chart_div" style="height: 500px;">
</div>
<!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript">

    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
      var data = google.visualization.arrayToDataTable([
        ['Options', 'Votes'],
        ['1',     11],

        ['2',      2],

        ['3',  2],

        ['4', 2],

        ['5',    7],

        ['6',    21],
      ]);

      // Set chart options
      var options = {
                      'backgroundColor': 'transparent',
                      'is3D': 'True',
                      'legend':'bottom',
                      'width':'100%',
                      'height':'100%',
                      chartArea:{left:0,top:0,width:"100%",height:"80%"}
                    };

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
  </script> 
```

# 这是位于页面 /home/ 上的 html 按钮

```
<a class="open-newmodal" href="/poll/">show poll</a> 
```

所以想法是，使用模态和 jquery 的 .load() 函数，我应该能够将 /poll/ 页面上的图表加载到我制作的模态中的 /home/ 页面。

这是我正在使用的模式

# 模态CSS

```
.newmodal-container {
    display: none;
    overflow-y: scroll;
    position: fixed;
    top: 0; right: 0;
    height: 100%;
    width: 100%;
    background-color: rgba(0, 0, 0, 0.3);
}
.newmodal {
    min-height: 100%;
    height: auto;
    width: 60%;
    margin: 0px auto;
    background-color: white;
    padding: 20px;
    border:1px solid #D3D3D3;
    box-shadow: 0px 0px 5px #D3D3D3;
}
.dp-none {
  display: none !important;
}
.dp-block {
  display: block !important;
} 
```

# 模态JS

```
// New Modal
var body = $('body'),
main = $('.main'),
open_modal = $('.open-newmodal'),
close_modal = $('.close-newmodal'),
modal_container = $('.newmodal-container');
open_modal.live('click', function(event){
  event.preventDefault();
  body.addClass('body-locked');
  modal_container.addClass('dp-block');
  var href = $(this).attr('href');
  modal = $('.data-load');
  modal.load(href);
  modal.attr("title",href);
});
close_modal.live('click', function(event){
  event.preventDefault();
  body.removeClass('body-locked');
  modal_container.removeClass('dp-block');
  modal.empty();
});
$(document).keyup(function(e) {
  if (e.keyCode == 27){
    event.preventDefault();
    body.removeClass('body-locked');
    modal_container.removeClass('dp-block');
    modal.empty();
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:52:41.707

这里有一些代码可以解释我的评论中的一些意思。

基本上，当单击按钮显示图表时，您将加载饼图。

希望这能让你走上正确的道路。

```
<button onclick="displayModal">Show Chart <\button>

<div id="modal_chart" class="modal">
  <!--Div that will hold the pie chart-->
  <h3 style="text-align:center;">Test</h3>
  <hr>
  <div id="chart_div" style="height: 500px;">
  </div>
</div>
<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

function displayModal() {
    $("#modal_chart").fadeIn(fast, function() {
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
    });
}

function drawChart() {
  var data = google.visualization.arrayToDataTable([
    ['Options', 'Votes'],
    ['1',     11],

    ['2',      2],

    ['3',  2],

    ['4', 2],

    ['5',    7],

    ['6',    21],
  ]);

  // Set chart options
  var options = {
                  'backgroundColor': 'transparent',
                  'is3D': 'True',
                  'legend':'bottom',
                  'width':'100%',
                  'height':'100%',
                  chartArea:{left:0,top:0,width:"100%",height:"80%"}
                };

  // Instantiate and draw our chart, passing in some options.
  var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
  chart.draw(data, options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:34:04.563

我认为加载图表然后应用模态代码不应该有任何明确的问题。这是一个使用您提到的一些 CSS 和 JQueryUI 替代品[http://jsbin.com/ajerol/3](http://jsbin.com/ajerol/3)的示例（您也可以在此处主动编辑代码[http://jsbin.com/ajerol/3/edit](http://jsbin.com/ajerol/3/edit)）。

```
<!DOCTYPE html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     11],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]);

        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }

    function displayModal() {
      $("#modal_chart").show();
    }

    function hideModal() {
      $("#modal_chart").hide();
    }

    function makeModal() {
      $("#modal_chart").addClass('newmodal-container');
      modal_container = $('.newmodal-container');
      $("#modal_chart").show();

    }

    function jqueryModal() {
      $("#modal_chart").dialog({ modal: true });
    }

    </script>
  </head>
  <body>

    <button onclick="displayModal()">Show Chart </button>
    <button onclick="hideModal()">Hide Chart </button>
    <button onclick="makeModal()">Attach modal CSS </button>
    <button onclick="jqueryModal()">jQuery modal </button>

<div id="modal_chart" class="modal">
  <!--Div that will hold the pie chart-->
  <h3 style="text-align:center;">Test</h3>
  <hr>
  <div id="chart_div" style="height: 300px; width: 300px;">
  </div>
</div>

  </body> 
```

关于您的代码的一个问题，您是否在加载 html 之前调用了以下代码？

```
open_modal = $('.open-newmodal'),
close_modal = $('.close-newmodal'),
modal_container = $('.newmodal-container'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:56:49.860

好的，看到您希望如何将另一个页面加载为模态图，我有以下解决方案。

[像在http://jsbin.com/abucet/3](http://jsbin.com/abucet/3)中一样在父页面上初始化您的 google lib ，然后确保您的子页面不会重新初始化或重新包含父页面中加载的库，请参阅 child @http [://jsbin.com/ajerol/5/edit](http://jsbin.com/ajerol/5/edit)

所以基本上是子页面@ [http://jsbin.com/ajerol/5](http://jsbin.com/ajerol/5) 父页面访问子页面@ [http://jsbin.com/abucet/3](http://jsbin.com/abucet/3)

父页面

```
<!DOCTYPE html>
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
      <script type="text/javascript" src="https://www.google.com/jsapi"></script>

<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>

  <div id='headerDiv' style='background-color:#FF0000'>
      Test Load
  </div>

  <div id='modalDiv' style='background-color:#FFAA00'>
      Close this and click the button to load 

      Graph will be in a modal JQuery Dialog.  Some of the google visualization initialization will be done in this page, not the page we're loading.
  </div>

  <button id='getIt'>Get the Graph</button>

</body>
</html> 
```

Javascript

```
$('#getIt').click( function() {
      $.get( "http://jsbin.com/ajerol/4",
        function(data) {
             var newGraph= "<div id='graphModal'>"+data+"</div>";
             //clean up html
             newGraph.replace('<body>','');
             newGraph.replace('</body>','');
             // we have the libs on this page, no need for that other cruft       
          newGraph.replace('<head.*head>','');
          // debug: 
          //alert(newGraph);
            // append to the current modal
            $('body').append(newGraph);            
            //  the graph page in modal 
            $('#graphModal').dialog({modal:true,width:300});
            $('#getIt').parent().append('<button onclick="$(\'#graphModal\'\).dialog(\);">showGraph</button>');
        }
      );
});

// initial note
$('#modalDiv').dialog({modal:true});

// load this on the parent page, not the one we're calling
google.load("visualization", "1", {packages:["corechart"]}); 
```

子页面

```
 <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     11],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]);

        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }

    </script>

<div id="modal_chart" class="modal">
  <!--Div that will hold the pie chart-->
  <div id="chart_div" style="height: 300px; width: 300px;">
  </div>
</div> 
```

子 Javascript（加载时）

```
drawChart(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-23T08:47:07.937

您可以使用来自远程 url 的谷歌图表和如下模式：

在**远程 url**上，您需要以这种方式加载 google 链接：

```
enter code here

$.getScript( 
"https://www.google.com/jsapi",
   function() {
    google.load('visualization', '1', {'packages':['corechart'],"callback": drawChart});
 }); 
```

为我工作。

# android - 从 sqlite 检索数据

> ID：14119977
> 
> 赞同：0
> 
> 时间：2013-01-02T09:57:52.717
> 
> 标签：android

我想要实现的是从 SQLite 数据库中检索当前日期前 3 天和当前日期后 3 天范围内的记录，包括当前日期。

如何做到这一点，请提出一些例子来尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:24:52.847

首先，存储日期的列应该是长类型。此列将存储日期从纪元开始的毫秒数。

现在查询

```
 Calendar calendar = Calendar.getInstance(); // This will give you the current time.
    // Removing the timestamp from current time to point to todays date
    calendar.set(Calendar.HOUR_OF_DAY, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MILLISECOND, 0);
    calendar.add(Calendar.DATE, -3); // Will subtract 3 days from today.
    Date beforeThreeDays = calendar.getTime();
    calendar.add(Calendar.DATE, 6); // Will be your 3 days after today
    Date afterThreeDays = calendar.getTime();

    db.query("Table", null, "YOUR_DATE_COLUMN >= ? AND YOUR_DATE_COLUMN <= ?", new String[] { beforeThreeDays.getTime() + "", afterThreeDays.getTime() + "" }, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:08:41.117

```
Select *
From TABLE_NAME
WHERE  DATEDIFF(day, GETDATE(), COLUMN_TABLE) <= 3 
```

# numpy - 使用索引的 Numpy 循环

> ID：14119978
> 
> 赞同：2
> 
> 时间：2013-01-02T09:58:03.263
> 
> 标签：numpy, python-2.7

我是一个新手，正在尝试使用 Numpy 在 python 2.7.2 中进行一些操作，但它没有按预期工作，所以想检查一下我是否误解了一些基本的东西。

我正在计算三角形（三法线）的值，然后使用三角形索引数组（trivertexidx）更新三角形每个点的值（垂直法线）。作为一个循环，我正在计算：

```
 for itri in range(ntriangles) :
        vertnormals[(trivertidx[itri,0]),:] += trinormals[itri,:]
        vertnormals[(trivertidx[itri,1]),:] += trinormals[itri,:]
        vertnormals[(trivertidx[itri,2]),:] += trinormals[itri,:] 
```

由于这有点慢，我认为可以将其修改为：

```
 vertnormals[(trivertidx[:,0]),:] += trinormals[:,:]
    vertnormals[(trivertidx[:,1]),:] += trinormals[:,:]
    vertnormals[(trivertidx[:,2]),:] += trinormals[:,:] 
```

然而，这并没有给出相同的结果。还有另一种更简单的方法来编写循环吗？任何指针表示赞赏。请注意，这里的目的是为 vertnormals 中的每个条目获取一个值，然后对结果进行归一化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:39:11.557

如果我很好地理解了您的问题，那么`m`您就有了形成`n`三角形的点，并且`trivertidx`是一个形状数组，其`(n, 3)`值在 range 内`[0, m)`，其中是构成第 -th 三角形`trivertidx[j]`的 3 个点的列表。`j`

`trinormals`然后是一个形状数组，`(n,)`其中包含分配给每个三角形的值，并且您希望`vertnormals`成为一个形状数组`(m,)`，对于每个点，分配给每个三角形的值的总和，该点是该点的顶点。

如果上面是正确的，下面的例子应该说明为什么你的第二个代码不能正常工作：

```
>>> a = np.arange(5)
>>> a
array([0, 1, 2, 3, 4])
>>> a[[1,2,0,2]] += 1
>>> a
array([1, 2, 3, 3, 4]) 
```

即使 position 中的元素在`2`左侧出现了两次，但会发生相同值的两个副本`1`相加，然后将增加的值复制两次到相同的位置。

要矢量化这个总和，您需要一个形状数组，如果 vertex是 triangle 的一部分，则`(n, m)`position 处的值`[j, k]`是，如果不是。您可以像这样构建该数组：`True``k``j``False`

```
trivert = np.zeros((n, m), dtype='bool')
trivert[np.arange(n).reshape(n, 1), trivertidx] = 1 
```

一旦你有了这个数组，你就可以得到每个顶点的总和

```
vertnormals = np.sum(trivert * trinormals.reshape(-1, 1), axis=0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:29:57.873

Numpy 有一个功能`bincount`，在这种情况下非常有用。当 的元素唯一时，下面的两行是相同的`index`，但当`index`具有重复值时是不同的：

```
A[index] += W
A += np.bincount(index, W, minlenght=len(A)) 
```

我相信你想要第二个的行为，但你的代码有点复杂，因为 A、index 和 W 不是 1d。你可以试试这样的

```
import numpy as np
N = len(vertnormals)
for j in range(vertnormals.shape[-1]):
    vertnormals[:, j] += np.bincount(trivertidx[:, 0], trinormals[:, j], minlength=N)
    vertnormals[:, j] += np.bincount(trivertidx[:, 1], trinormals[:, j], minlength=N)
    vertnormals[:, j] += np.bincount(trivertidx[:, 2], trinormals[:, j], minlength=N) 
```

希望有帮助。

# php - 如何在不配置其他文件的情况下启用 PHP 会话

> ID：14119981
> 
> 赞同：-1
> 
> 时间：2013-01-02T09:58:24.990
> 
> 标签：php, html

我将此代码包含在我的 php 网页顶部

```
<?php
ini_set('session.use_cookies', 1);
ini_set('session.use_only_cookies', 1);
session_start();
?> 
```

这是php网页
**a.php**

```
<h1>Page AAAA</h1>
<a href="b.php?t=<? echo time(); ?>">go to page B</a>
<?php
   echo "<h2>CURRENT SESSION = ", $_SESSION['test'], "</h2>";
   $_SESSION['test'] = 'a';
   echo "<h2>AFTER CHANGE SESSION = ", $_SESSION['test'], "</h2>";
?> 
```

**b.php**

```
<h1>Page BBBB</h1>
<a href="a.php?t=<? echo time(); ?>">go to page A</a>
<?php
   echo "<h2>CURRENT SESSION = ", $_SESSION['test'], "</h2>";
   $_SESSION['test'] = 'b';
   echo "<h2>AFTER CHANGE SESSION = ", $_SESSION['test'], "</h2>";
?> 
```

但它不起作用。`CURRENT SESSION`即使我在**a.php**和**b.php之间切换也没有价值**

**更新**我将此代码包含在**a.php**
`echo "<h1>SESSION ID = ", session_id() , "</h1>";`
结果中
`SESSION ID = fhhiilg08rl2ajtplqc9dbud43`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:02:48.490

打开你的 php.ini 文件并设置

```
session.use_cookies=1
session.use_only_cookies=1 
```

所以通过设置这个你不需要配置其他文件

只需在您想要通过以下方式评估会话变量的页面上开始会话

```
session_start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:04:34.530

只需使用`session_start();`页面顶部的功能，然后将值分配给`$_SESSION['test'] = "value"`. 这会在所有页面上显示会话值。

# java - JAVA_HOME 和 PATH 已设置，但 java -version 仍显示旧版本

> ID：14119983
> 
> 赞同：48
> 
> 时间：2013-01-02T09:58:44.807
> 
> 标签：java, linux, environment-variables, linux-mint

我正在使用 Linux Mint Cinnamon 14。我已将`$JAVA_HOME`和`$PATH`环境变量设置`~/.profile`如下：

```
export JAVA_HOME=/home/aqeel/development/jdk/jdk1.6.0_35
export PATH=/home/aqeel/development/jdk/jdk1.6.0_35/bin:$PATH 
```

然后我`source ~/.profile`做了适当的改变。

当我执行`java -version`命令检查活动的 java 版本时，它显示默认的（已经安装的 open-jdk）java 版本。如何用我下载的那个覆盖默认的 open-jdk？

**更新：**

`which java`说 /usr/bin/java

`$JAVA_HOME/bin/java -version`说“权限被拒绝”

`sudo $JAVA_HOME/bin/java -version`（然后要求输入密码）说找不到命令

但是`cd $JAVA_HOME/bin`，并`ls`表明它是正确的目录。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-02T10:06:35.027

虽然看起来您的设置是正确的，但有几件事需要检查：

1.  `env`- 特别是的输出`PATH`。
2.  `command -v java`告诉你什么？
3.  是否有`java`可执行文件，`$JAVA_HOME\bin`是否设置了执行位？如果不是`chmod a+x java`的话。

我相信`source`您`.profile`在添加/更改`JAVA_HOME`and`PATH`的？

此外，您可以通过编写以下代码来帮助自己将来维护 JDK 安装：

```
export JAVA_HOME=/home/aqeel/development/jdk/jdk1.6.0_35
export PATH=$JAVA_HOME/bin:$PATH 
```

然后，您只需在设置 JDK 安装时更新一个 env 变量。

最后，您可能需要运行`hash -r`以清除 Bash 程序缓存。其他 shell 可能需要类似的命令。

干杯，

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-01T06:45:19.960

**`update-java-alternatives`**

`java`找不到可执行文件与您的，`JAVA_HOME`它只取决于您的`PATH`.

`update-java-alternatives`为整个系统管理它的好方法是通过：

```
update-java-alternatives -l 
```

样本输出：

```
java-7-oracle 1 /usr/lib/jvm/java-7-oracle
java-8-oracle 2 /usr/lib/jvm/java-8-oracle 
```

选择以下选项之一：

```
sudo update-java-alternatives -s java-7-oracle 
```

就像`update-alternatives`，它通过符号链接管理工作。优点是同时管理所有 Java 实用程序的符号链接：`javac`、`java`、`javap`等。

我还没有看到`JAVA_HOME`对 JDK 的影响。到目前为止，我只看到它用于第三方工具，[例如 Maven](https://stackoverflow.com/questions/13752519/how-to-change-maven-java-home)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-06-08T18:55:14.147

如果您想**使用从 Oracle 网站下载的 JDK**，对我有用（使用 Mint）的是使用***update-alternatives***：

1.  我下载了 JDK 并将其解压缩到任何地方，例如*/home/aqeel/development/jdk/jdk1.6.0_35*
2.  我跑了：

    ```
    sudo update-alternatives --install /usr/bin/java java /home/aqeel/development/jdk/jdk1.6.0_35/bin/java 1 
    ```

    **现在您可以**执行`sudo update-alternatives --config java`并**选择您的 java 版本**。

3.  这并没有设置我想要配置的**JAVA_HOME 变量**，所以我只是将它添加到我的 ~/.bashrc 中，包括一个`export JAVA_HOME="/home/aqeel/development/jdk/jdk1.6.0_35"`语句

现在，我**下载了两个 JDK**（假设第二个已提取到*/home/aqeel/development/jdk/jdk-10.0.1*）。

我们如何根据当前使用的 java 动态更改 JAVA_HOME？

我的解决方案不是很优雅，我很确定那里有更好的选择，但无论如何：

4.  **为了根据所选的 java 替代项动态更改 JAVA_HOME**，我将此片段添加到 ~/.bashrc：

    ```
    export JAVA_HOME=$(update-alternatives --query java | grep Value: | awk -F'Value: ' '{print $2}' | awk -F'/bin/java' '{print $1}') 
    ```

最后（这超出了范围）**如果您必须不断更改 java 版本**，您可能需要考虑：

5.  为您的*~./bash_aliases*添加**别名**：

     *```
    alias change-java="sudo update-alternatives --config java" 
    ```* 

 *（您可能必须创建文件，并且可能在*~/.bashrc*中取消注释与此相关的部分）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-02T10:25:12.797

> $JAVA_HOME/bin/java -version 说“权限被拒绝”

如果您无法访问或运行代码，则将其添加到您的路径时将被忽略。您需要使其可访问和可运行，或者获取您自己的副本。

做一个

```
ls -ld $JAVA_HOME $JAVA_HOME/bin $JAVA_HOME/bin/java 
```

看看为什么你不能访问或运行这个程序，。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-25T12:10:41.290

当它搜索 java 时，它会从左到右查找由 : 分隔的路径条目，因此您需要在 /usr/bin 之前添加最新的 jdk/bin 目录的路径，这样当它搜索时它会找到最新的并且停止进一步搜索。

即PATH=/usr/java/jdk_1.8/bin:/usr/bin:.....等等。

然后使用命令初始化用户配置文件： source ~/.bash_profile

并检查：[which java]

你会得到正确的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-24T05:59:03.243

使用 update-alternatives 命令检查 Linux 系统上可用的 Java 版本：

```
 $ sudo update-alternatives --display java 
```

现在有合适的候选者可以更改，您可以通过运行以下命令在可用的 Java JRE 之间切换默认 Java 版本：

```
 $ sudo update-alternatives --config java 
```

出现提示时，选择您要使用的 Java 版本。1 或 2 或 3 等。

现在您可以验证默认 Java 版本更改如下。

```
 $ java -version 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-20T12:18:20.293

有一个简单的方法，只需从“/usr/bin”中删除符号链接。它会起作用的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-13T18:13:17.317

更新`~/.profile`或`~/.bash_profile`有时不起作用。我刚刚删除了 JDK 6 和`source`d `.bash_profile`。

尝试运行这个：

```
sudo rm -rd jdk1.6.0_* #it may not let you delete without sudo 
```

然后，修改/添加您的 JAVA_HOME 和 PATH 变量。

```
source ~/.bash_profile #assuming you've updated $JAVA_HOME and $PATH 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-06T17:05:13.513

尝试这个：

*   导出 JAVA_HOME=put_here_your_java_home_path
*   键入 export PATH=$JAVA_HOME/bin:$PATH（确保 $JAVA_HOME 是 PATH 中的第一个元素）
*   试试 java -version

原因：可能有其他 PATH 元素指向替代 java home。如果您将首选的 JAVA_HOME 放在首位，系统将使用这个。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-09T20:23:03.003

在 Linux Mint 18 Cinnamon 中，一定要检查**/etc/profile.d/jdk_home.sh**我将此文件重命名为 jdk_home.sh.old，现在我的路径不会继续被覆盖，我可以调用 java -version 并将 Java 9 视为预期的。即使我在`update-aternatives --config java`这个 jdk_home.sh 文件中正确选择了 Java 9，在启动时仍然会覆盖 $PATH。*

# c# - 保存到 Active Directory - 拒绝域管理员访问

> ID：14119985
> 
> 赞同：2
> 
> 时间：2013-01-02T09:58:48.543
> 
> 标签：c#, asp.net, active-directory

我正在开发一个 C# Web 应用程序以允许对 Active Directory 用户帐户进行读写访问。

我在我们的主要公司 AD 上做得很好-我可以读取帐户、获取属性、将详细信息保存回 AD、启用/禁用帐户等。我正在使用模拟来执行此操作，所以在它保存到 AD 之前它会更改使用不同的帐户（属于域管理员），然后在保存后恢复到主应用程序池帐户。

我刚刚被要求通过应用程序添加用户帐户，但我对在主 AD 上进行测试并不满意，因此我设置了一个带有测试 AD 的 VM。我已经在那个虚拟机上安装了应用程序，它可以从 AD 中读取。我已经设置了在实时 AD 上模拟的相同用户帐户，并将其添加到域管理员组中。但是，当我尝试将详细信息保存给现有用户时，我收到“拒绝访问”错误。

我知道模拟在保存之前正在工作，我输出结果，我尝试更改密码，但失败并出现不同的错误。

我已经问过我们的网络管理员，他是否为实时 AD 的模拟用户设置了任何特别的东西，但他说他没有，而且它们看起来是相同的。

除了将模拟用户添加到域管理员组之外，有谁知道我可能需要做的其他事情？我尝试以用户身份登录 VM，并通过 AD 本身更改了用户帐户，因此用户似乎确实具有所需的访问级别。

以下是我用来模拟用户的代码：

```
Impersonation imp = new Impersonation();
string impResult = "";
imp.ImpersonateDomainUser(out impResult, ConfigurationManager.AppSettings["ADAdminUserLogin"], user.Domain, ConfigurationManager.AppSettings["ADAdminUserPwd"]);
...

imp.Revert(); 
```

`impResult`返回以下内容：

```
Before impersonation: NT AUTHORITY\SYSTEM 
After impersonation: TESTDOMAIN\user.manager.service 
```

我用来保存到 AD 的代码是：

```
var entry = new DirectoryEntry();
var account = userName.Replace(domain, "");

var search = new DirectorySearcher(entry) { Filter = "(SAMAccountName=" + account + ")" };
search.PropertiesToLoad.Add(propertyName);

var result = search.FindOne();

if (result != null)
{
   DirectoryEntry entryToUpdate = result.GetDirectoryEntry();

   if (propertyValue == null || propertyValue.ToString().Length == 0)
      entryToUpdate.Properties[propertyName].Clear();
   else
      entryToUpdate.Properties[propertyName].Value = propertyValue;

   entryToUpdate.CommitChanges();

   entryToUpdate.Close();
   entryToUpdate.Dispose();
} 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:10:38.550

此问题归结为虚拟机上的用户访问控制设置。

通过控制面板禁用用户访问控制后，我就可以将用户保存到 Active Directory。尽管我没有尝试过，但以管理员身份运行浏览器也可能有效。

# java - android phonegap 非编译项目

> ID：14119987
> 
> 赞同：0
> 
> 时间：2013-01-02T09:59:09.567
> 
> 标签：java, android, eclipse, cordova

我需要为 android 修改一些 phonegap 2.2 类，但提供的 sdk 仅包含 .jar 文件。是否有可用的完整项目来重建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:00:18.010

好吧，PhoneGap 的完整 Android 源代码始终可以在以下位置获得：

[https://git-wip-us.apache.org/repos/asf?p=cordova-android.git;a=summary](https://git-wip-us.apache.org/repos/asf?p=cordova-android.git;a=summary)

# javascript - 返回这个 || (0,eval)('this');

> ID：14119988
> 
> 赞同：43
> 
> 时间：2013-01-02T09:59:12.543
> 
> 标签：javascript, dot.js

查看 doT.js 源代码：

[https://raw.github.com/olado/doT/master/doT.js](https://raw.github.com/olado/doT/master/doT.js)

这是做什么的？

```
(function(){ return this || (0,eval)('this'); }()).doT = doT; 
```

对我来说，它看起来像是在创建一个全局变量，`window.doT`. 如果这就是它所做的一切，那么为什么不呢：

```
window.doT = doT; 
```

?

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-02T10:02:04.217

它正在获取对全局对象的引用，以便分配`doT`给它。这通常是因为使用 JavaScript 库/框架/等，它的一个全局标识符需要暴露给*外部世界*。

至于为什么不简单`window.doT = doT;`，那是因为全局对象并不总是`window`，例如，在非浏览器环境中。在执行此代码时，也可能已`window`分配给其他地方。

### 这个怎么运作

如果`this`已经为*真*，例如，一个对象如`window`，它将返回它。很可能会`window`（至少在浏览器中），因为普通函数调用应该将其`ThisBinding`设置为全局对象。否则，它将`eval()`在全局范围内执行，因为间接调用`eval()`会将其范围设置为全局，而不是调用环境的范围。

要实现间接调用，您必须间接调用`eval()`，即不能仅使用`eval()`. 您可以使用`(0, eval)`它来调用它。这依赖于返回最后一个计算表达式的逗号运算符，在本例中为`eval`. 前面的操作数是什么并不重要。同样，`(0||eval)()`会工作。

至于为什么 body 是`this`，那是 的参数`eval()`，就是要作为字符串执行的代码。它将`this`在全局范围内返回，它始终是全局对象。

现在它并不真正相关，但在较旧的 IE 中，您需要用于`execScript()`在全局范围内执行代码。我不记得确切需要哪个版本的 IE。

# web-services - BPEL 持久性问题

> ID：14119989
> 
> 赞同：0
> 
> 时间：2013-01-02T09:59:13.403
> 
> 标签：web-services, glassfish, persistence, bpel, open-esb

在 Glassfish 服务器中打开持久性非常容易，但我发现这将持久化通过系统的所有调用，其中一些是不需要持久化的同步调用。这显然会影响服务器性能。

有没有办法指定哪些 bpel 进程被持久化，例如表示同步调用的 BPEL 不会被持久化，而表示位于内存中的异步进程的 BPEL 会被持久化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:52:54.433

好的，刚刚找到了一个选项来执行此操作。您可以打开持久性，然后在每个 bpel 上为“per bp persistence opt out”设置一个属性。

唯一的问题是，如果您在 glassfish 上已有一组同步服务，则必须更改它们以指定您要选择退出持久性，否则当您打开它时它们都将被持久化！

# android - startActivityForResult() 和 startActivity() 的区别？

> ID：14119992
> 
> 赞同：51
> 
> 时间：2013-01-02T09:59:29.760
> 
> 标签：android, android-intent, android-activity, start-activity

`startActivityForResult()`和 和有什么不一样`startActivity()` ？

什么时候，为了什么，我应该使用每一个？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-02T10:03:05.297

## 开始活动

启动一个活动，就像你启动一个应用程序一样：例如：你有一个带有主屏幕和用户信息屏幕的应用程序：如果你按下用户信息按钮，你就会用这个启动用户信息活动。

## 开始活动结果

开始一项活动并期待一些回报。例如，在您的用户信息屏幕上，您可以上传个人资料图片。您以明确的目标启动画廊活动，以获取带有首选图片的 URI。您从字面上开始此活动以获得结果（图片。有一些技术方法可以确保您实际获得结果，但它们在手册中非常清楚。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-02T10:06:23.393

**startActivity**将启动一个新活动，而不关心该活动何时以及如何完成。

显然

**startActivityForResult**在启动的活动决定完成时等待回调

**startActivity()**将启动您想要启动的活动，而不必担心从 startActivity 启动的新子活动到父活动的任何结果。

**startActivityForResult()**从您的活动开始另一个活动，它希望通过 startAcitvityForResult() 从新启动的子活动中获取一些数据并将其返回给父活动。

检查此链接 -[`Activity#startActivityForResult(Intent, int)`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

# java - 红黑树自顶向下删除算法

> ID：14119995
> 
> 赞同：10
> 
> 时间：2013-01-02T09:59:32.763
> 
> 标签：java, data-structures, red-black-tree, top-down

我正在 O (log n) 时间内实现具有插入、搜索和删除功能的红黑树。插入和搜索工作正常。但是我被困在删除上。我在互联网上找到了这张显示 RBT 删除算法的 ppt 幻灯片：[http](http://www.slideshare.net/piotrszymanski/red-black-trees#btnNext) ://www.slideshare.net/piotrszymanski/red-black-trees#btnNext第 56 页起。我知道我的要求有点过分，但我已经坚持了两个多星期，我找不到问题所在。我理解自上而下删除的方式是，您必须相应地旋转和重新着色节点，直到找到要删除的节点的前身。当你找到这个节点时——它可能是一个叶子节点或一个有一个右孩子的节点，用这个节点的数据替换要删除的节点数据，然后像正常的 BST 删除一样删除这个节点，对吧？

这是我所做的代码，基于我从那张幻灯片中学到的东西。如果有人能这么好心地检查一下，我将不胜感激！或者至少如果您认为有比我使用的更好的算法，请告诉我！

```
 public void delete(int element){

    if (root == null){ 
        System.out.println("Red Black Tree is Empty!");

    } else {

      Node X = root; 
      parent = null; 
      grandParent = null; 
      sibling = null; 

      if (isLeaf(X)){

          if (X.getElement() == element){
              emptyRBT();
          } 

      } else {

      if (checkIfBlack(root.getLeftChild()) && checkIfBlack(root.getRightChild())){
          root.setIsBlack(false);

          if (X.getElement() > element && X.getLeftChild() != null){ 
              X = moveLeft(X);

          } else if (X.getElement() < element && X.getRightChild() != null){
              X = moveRight(X);
          } 

          Step2(X, element);

      } else { 

          Step2B(X, element);

       } 
     }
   } 
   root.setIsBlack(true);
}

public void Step2(Node X, int element)
{
    int dir = -1;

    while (!isLeaf(X)){

      if (predecessor == null){  // still didn't find Node to delete

        if (X.getElement() > element && X.getLeftChild() != null){
            X = moveLeft(X);
            dir = 0;
        } else if (X.getElement() < element && X.getRightChild() != null){
            X = moveRight(X);
            dir = 1;
        } else if (X.getElement() == element){
            toDelete = X;
            predecessor = inorderPredecessor(X.getRightChild());
            X = moveRight(X);
        }

      } else { // if node to delete is already found and X is equal to right node of to delete
               // move always to the left until you find predecessor

          if (X != predecessor){
              X = moveLeft(X);
              dir = 0;
          } 
      }

      if (!isLeaf(X)){
        if (!hasOneNullNode(X)){

         if (checkIfBlack(X.getLeftChild()) && checkIfBlack(X.getRightChild())){
             Step2A(X, element, dir);
         } else {
             Step2B(X, element);
         }
       }
     }
   }

   removeNode(X);

   if (predecessor != null){
       toDelete.setElement(X.getElement());
   }
}

public Node Step2A(Node X, int element, int dir) {

    if (checkIfBlack(sibling.getLeftChild()) && checkIfBlack(sibling.getRightChild())) {
        X = Step2A1(X);

    } else if ((checkIfBlack(sibling.getLeftChild()) == false) && checkIfBlack(sibling.getRightChild())) {
        X = Step2A2(X);

    } else if ((checkIfBlack(sibling.getLeftChild()) && (checkIfBlack(sibling.getRightChild()) == false))) {
        X = Step2A3(X);

    } else if ((checkIfBlack(sibling.getLeftChild()) == false) && (checkIfBlack(sibling.getRightChild()) == false)) {
        X = Step2A3(X);
    }

    return X;
}

public Node Step2A1(Node X) {

    X.setIsBlack(!X.IsBlack());
    parent.setIsBlack(!parent.IsBlack());
    sibling.setIsBlack(!sibling.IsBlack());

    return X;
}

public Node Step2A2(Node X) {

    if (parent.getLeftChild() == sibling){
        LeftRightRotation(sibling.getLeftChild(), sibling, parent);

    } else RightLeftRotation(sibling.getRightChild(), sibling, parent);

    X.setIsBlack(!X.IsBlack());
    parent.setIsBlack(!parent.IsBlack());

    return X;
}

public Node Step2A3(Node X) {

    if (parent.getLeftChild() == sibling){
        leftRotate(sibling);
    } else if (parent.getRightChild() == sibling){
        rightRotate(sibling);  
    }

    X.setIsBlack(!X.IsBlack());
    parent.setIsBlack(!parent.IsBlack());
    sibling.setIsBlack(!sibling.IsBlack());
    sibling.getRightChild().setIsBlack(!sibling.getRightChild().IsBlack());

    return X;
}

public void Step2B(Node X, int element){

    if (predecessor == null){
        if (X.getElement() > element && X.getLeftChild() != null){
            X = moveLeft(X);
        } else if (X.getElement() < element && X.getRightChild() != null){
            X = moveRight(X);
        } else if (X.getElement() == element){
            Step2(X, element);
        }

    } else {

        if (X != predecessor)
            X = moveLeft(X);
        else Step2(X, element);
    }

    if (X.IsBlack()){

       if (parent.getLeftChild() == sibling){
           leftRotate(sibling);
       } else if (parent.getRightChild() == sibling){
           rightRotate(sibling);
       }

       parent.setIsBlack(!parent.IsBlack());
       sibling.setIsBlack(!sibling.IsBlack()); 

       Step2(X, element);

    } else {
        Step2B(X, element);
    }
}

public void removeNode(Node X) {

    if (isLeaf(X)) {
        adjustParentPointer(null, X);
        count--;

    } else if (X.getLeftChild() != null && X.getRightChild() == null) {
        adjustParentPointer(X.getLeftChild(), X);
        count--;

    } else if (X.getRightChild() != null && X.getLeftChild() == null) {
        adjustParentPointer(X.getRightChild(), X);
        count--;
    } 
}

public Node inorderPredecessor(Node node){

   while (node.getLeftChild() != null){
       node = node.getLeftChild();
   }

   return node;
}

public void adjustParentPointer(Node node, Node current) {

    if (parent != null) {

        if (parent.getElement() < current.getElement()) {
            parent.setRightChild(node);
        } else if (parent.getElement() > current.getElement()) {
            parent.setLeftChild(node);
        }
    } else {
        root = node;
    }
}

public boolean checkIfBlack(Node n){
    if (n == null || n.IsBlack() == true){
        return true;
    } else return false;
}

public Node leftRotate(Node n)
{  
    parent.setLeftChild(n.getRightChild());
    n.setRightChild(parent);

    Node gp = grandParent;

    if (gp != null){

        if (gp.getElement() > n.getElement()){
            gp.setLeftChild(n);
        } else if (gp.getElement() < n.getElement()){
            gp.setRightChild(n);
        }

    } else root = n;

    return n;
}

public Node rightRotate(Node n)
{  
    parent.setRightChild(n.getLeftChild());
    n.setLeftChild(parent);

    Node gp = grandParent;

    if (gp != null){

        if (gp.getElement() > n.getElement()){
            gp.setLeftChild(n);
        } else if (gp.getElement() < n.getElement()){
            gp.setRightChild(n);
        }

    } else root = n;

    return n;
} 
```

节点正在被删除，但删除后的树会被黑违，这是非常错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T19:03:48.133

永远困惑的[博客](http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx)对红黑树的插入和删除都有自上而下的实现。它还逐案讨论了它的工作原理。我不会在这里复制它（它相当冗长）。

我已经将该博客用作在 c++ 和 java 中实现红黑树的参考。正如我在[较早的答案](https://stackoverflow.com/a/8024168/4931)中所讨论的，我发现该实现比 std::map 自下而上的红黑树实现要快（无论 STL 当时带有 gcc 的什么）。

这是将代码直接转换为 Java 的未经测试的直接翻译。我强烈建议您对其进行测试并对其进行变形以匹配您的风格。

```
private final static int LEFT = 0;
private final static int RIGHT = 1;

private static class Node {
    private Node left,right;
    private boolean red;
    ...

    // any non-zero argument returns right
    Node link(int direction) {
        return (direction == LEFT) ? this.left : this.right;
    }
    // any non-zero argument sets right
    Node setLink(int direction, Node n) {
        if (direction == LEFT) this.left = n;
        else this.right = n;
        return n;
    }
}

boolean remove(int data) {
  if ( this.root != null ) {
    final Node head = new Node(-1, null, null); /* False tree root */
    Node cur, parent, grandpa; /* Helpers */
    Node found = null;  /* Found item */
    int dir = RIGHT;

    /* Set up helpers */
    cur = head;
    grandpa = parent = null;
    cur.setLink(RIGHT, this.root);

    /* Search and push a red down */
    while ( cur.link(dir) != null ) {
      int last = dir;

      /* Update helpers */
      grandpa = parent, parent = cur;
      cur = cur.link(dir);
      dir = cur.data < data ? RIGHT : LEFT;

      /* Save found node */
      if ( cur.data == data )
        found = cur;

      /* Push the red node down */
      if ( !is_red(cur) && !is_red(cur.link(dir)) ) {
        if ( is_red(cur.link(~dir)) )
          parent = parent.setLink(last, singleRotate(cur, dir));
        else if ( !is_red(cur.link(~dir)) ) {
          Node s = parent.link(~last);

          if ( s != null ) {
            if (!is_red(s.link(~last)) && !is_red(s.link(last))) {
              /* Color flip */
              parent.red = false;
              s.red = true;
              cur.red = true;
            }
            else {
              int dir2 = grandpa.link(RIGHT) == parent ? RIGHT : LEFT;

              if ( is_red(s.link(last)) )
                grandpa.setLink(dir2, doubleRotate(parent, last));
              else if ( is_red(s.link(~last)) )
                grandpa.setLink(dir2, singleRotate(parent, last));

              /* Ensure correct coloring */
              cur.red = grandpa.link(dir2).red = true;
              grandpa.link(dir2).link(LEFT).red = false;
              grandpa.link(dir2).link(RIGHT).red = false;
            }
          }
        }
      }
    }

    /* Replace and remove if found */
    if ( found != null ) {
      found.data = cur.data;
      parent.setLink(
        parent.link(RIGHT) == cur ? RIGHT : LEFT,
        cur.link(cur.link(LEFT) == null ? RIGHT : LEFT));
    }

    /* Update root and make it black */
    this.root = head.link(RIGHT);
    if ( this.root != null )
      this.root.red = false;
  }

  return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:38:42.717

快速链接： [http ://algs4.cs.princeton.edu/33balanced/RedBlackBST.java.html](http://algs4.cs.princeton.edu/33balanced/RedBlackBST.java.html)

--> 注意：网站上的代码依赖于两个 jar。然而，在数据结构中，依赖性可能很小。有时注释掉主要方法（仅用作测试客户端）就足够了。如果没有：jar 可以在同一个站点上下载。

如果您正在寻找两周并学习算法，那么您很可能知道

[http://algs4.cs.princeton.edu/](http://algs4.cs.princeton.edu/)

伴随着名的网站

> 算法，罗伯特·塞奇威克和凯文·韦恩

书。

在这个网站上，有一个红黑（平衡）树的实现：

[http://algs4.cs.princeton.edu/33balanced/RedBlackBST.java.html](http://algs4.cs.princeton.edu/33balanced/RedBlackBST.java.html)

我还没有研究它（我将在今年晚些时候），但我完全相信它是一个 RBTree 的工作实现。

本主题的访问者可能会感兴趣的一些旁注：麻省理工学院在网上放置了有关算法的优秀课程。与 rbtrees 相关的是 [http://www.youtube.com/watch?v=iumaOUqoSCk](http://www.youtube.com/watch?v=iumaOUqoSCk)