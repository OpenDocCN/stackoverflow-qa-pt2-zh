# StackOverflow 问答 12594000-12594999

# python - 如何使内置的 password_reset 视图使用 django-mailer？

> ID：12594002
> 
> 赞同：1
> 
> 时间：2012-09-26T03:02:19.133
> 
> 标签：python, django, django-registration, django-mailer

我在我的网络应用程序上使用[django-registration 。](https://bitbucket.org/ubernostrum/django-registration)我也已经使用 django-mailer 发送了一些通知电子邮件。

Django 注册通过将重置逻辑委托给**django.contrib.auth.views.password_reset启用内置密码重置功能（**[此处](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/registration/auth_urls.py)） 。

 **现在该函数不知道 django-mailer。我怎样才能让它使用 django-mailer？我是否必须复制 password_reset 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:28:16.147

啊，这很容易。

我只需要设置

```
EMAIL_BACKEND = 'mailer.backend.DbBackend' 
```

在设置文件中，像[这样](https://github.com/freedomsponsors/www.freedomsponsors.org/blob/master/djangoproject/frespo/settings.py)

现在，“正常”的 send_mail 调用的行为类似于 mailer.send_mail 并将电子邮件存储到数据库中。所以没有必要自己替换调用。**

# ruby - 获取 S3 对象的下载流并将其传递给 ruby 中的另一个方法

> ID：12594004
> 
> 赞同：3
> 
> 时间：2012-09-26T03:02:36.360
> 
> 标签：ruby, stream, download, amazon-s3, amazon

Amazon S3 API for Ruby 仅在将块传递给 read 方法时流式传输对象。我正在为 em-ftpd 开发一个驱动程序，它需要一个 IOish 对象来将 S3 数据流式传输到客户端。如果简单地通过 myS3Object.read，整个文件被加载到内存中，如 S3 API 所述。有什么方法可以将其封装成自定义 IO 类之类的东西，这样我就可以将流传递给 em-ftpd？

这是我的代码：

```
def get_file(path)
  #loading whole file into memory - not efficient
  yield bucket.objects[path].read
end 
```

这是 em-ftpd 中的代码，它获取我的代码的结果，最好是作为 IOish 对象，使用块来获取其数据块：

```
# send a file to the client
def cmd_retr(param)
  send_unauthorised and return unless logged_in?
  send_param_required and return if param.nil?

  path = build_path(param)

  @driver.get_file(path) do |data|
    if data
      send_response "150 Data transfer starting #{data.size} bytes"
      send_outofband_data(data)
    else
      send_response "551 file not available"
    end
  end
end 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:42:50.543

原来我需要创建一个带有 S3 数据缓冲区的类以及 read 和 eof 方法？

# matlab - 根据向量中的数字计算函数并将结果存储在 Matlab 中的数组中

> ID：12594016
> 
> 赞同：0
> 
> 时间：2012-09-26T03:05:05.703
> 
> 标签：matlab

假设我有一个数字数组。

```
S = [a_1,a_2,...,a_n] 
```

如何计算数组中每个元素的以下函数，并将结果存储在原始元素旁边的相邻单元格中，创建一个 2x2 矩阵？

```
T = [a_1, 1/(n+1); ...; a_i, i/(n+1); ...; a_n, n/n+1] 
```

对于上述矩阵，“i”表示索引，“n”表示元素的总数。有没有比遍历 for 循环中的每个元素更有效的方法？如果我必须在三个这样的向量上运行这个函数，那么 for 循环会是最好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T03:15:30.447

如果我正确理解了您的问题，应该这样做：

```
n=length(S)
T=[S;(1:n)/(n+1)]' 
```

# .net - 检查/Lucene 教程

> ID：12594017
> 
> 赞同：0
> 
> 时间：2012-09-26T03:05:08.023
> 
> 标签：.net, search, lucene, lucene.net

我对[检查](http://examine.codeplex.com/) 在独立桌面应用程序中构建搜索以搜索 db 表以及 office/.pdf 文件感兴趣

这看起来像是 Lucene/examine 的绝佳场景

然而，那里的文档很少，虽然我在 SQL 全文搜索方面有丰富的经验，但 Lucene 完全是一个不同的野兽，因此寻找有关如何/从哪里开始的帮助/指针

是的，我进行了谷歌搜索，但没有找到任何资源，因为这些术语相当普遍（lucene 检查教程等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:34:46.520

首先要知道的是 Lucene.NET 是 Lucene 的逐行移植。它只有很小的方面是特定于 .NET 的，因此您会为 Java Lucene 找到的大多数内容也适用于 .NET 版本。对于如何将 Java 项目移植到 .NET 进行热烈讨论，仅此一项就足够了。实际上，经过多年的孵化，该项目刚刚作为一个成熟的 Apache 项目毕业。

现在，我同意 Vedran 的观点，即[Lucene in Action](http://www.manning.com/hatcher2/)这本书是一种真正的享受，不仅可以快速上手（天知道，Lucene 速度很快），还可以深入了解帮助您解决问题的血腥细节。

如果您想从在线材料开始，看起来[这个介绍](http://today.java.net/pub/a/today/2003/07/30/LuceneIntro.html)可以帮助您。它已经快 10 年了，但一眼看去，我认为它通常仍然存在。它解决了搜索（索引/查询）的两个方面，同时使用应该可以轻松移植到 C# 的实际 Java 代码来演示它。

### 总之，这些是亮点

1.  要写入索引，请使用*IndexWriter*
2.  要查询索引，请在*IndexSearcher上发布查询*
3.  作者采用一个*分析器*（默认为 StandardAnalyzer），它定义了如何存储和/或索引文本
4.  要创建查询，您可以使用*QueryParser*（它也需要一个 Analyzer），或者自己构建查询对象。

使用此信息，您已经可以设置一个最小的工作示例。

### 分析仪

下一步是深入研究标记化。不同的分析器进行不同的标记化。它们允许您忽略短词、拆分为非字母数字字符或进行词干提取 (SnowballAnalyzer)。了解哪些分析器可用并选择正确的分析器对于使 Lucene 适合您的问题至关重要。

### 查询

可以查询索引数据，我会说一种灵活的方式，但有其自身的局限性。由于 Lucene 的性质，诸如求反、排序和范围之类的事情会让您头疼。

您必须意识到的一件事是，Lucene 实际上只不过是一个超高效的字典，您可以使用它进行查找。例如，这解释了为什么否定是奇特的。您不能搜索缺少的东西，但*可以*搜索“MyField:false”。搜索 1 到 3 之间的数字，通常会创建一个查找 1、2 和 3 的查询。在处理日期时，您必须确保它们以可排序的方式编制索引（例如 20121005）

### 社区

如果您遇到问题：[Lucene.NET 新闻组](http://mail-archives.apache.org/mod_mbox/lucene-lucene-net-user/)已经证明非常有用且响应迅速。

### SOLR.NET

您可能会遇到一些限制，例如需要刻面。[SOLR.NET](http://code.google.com/p/solrnet/)构建在 Lucene.NET 之上，并解决了一些原本需要您费尽心思的事情。虽然我从来没有真正使用过它。

### 检查

我也没有使用 Examine 的经验，但从我很快看到的情况来看，它只是减轻了处理查询的负担。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:11:34.067

我曾经需要使用 CLucene，它是 Lucene API 的 C++ 实现。在我遇到[Lucene in Action](http://www.manning.com/hatcher2/)一书之前，这被证明是一项非常艰巨的任务。虽然样本都是Java的，API也有一些差异，但是书里把Lucene中的概念解释的很清楚，所以我只是把这些知识用在了CLucene中。这本书长约 470 页，但你可以通过前三章来完成。

我知道这不是 Lucene/Examine 教程建议，但它确实值得一试，因为 Examine 只是 Lucene 的简单包装。一旦你掌握了这些概念，考试本身就应该变得显而易见。

# c# - 无法在 Visual Studio 2012 中调试单元测试项目

> ID：12594018
> 
> 赞同：16
> 
> 时间：2012-09-26T03:05:10.783
> 
> 标签：c#, unit-testing, visual-studio-2012, class-library

我找不到类似的帖子，所以我希望这不是重复的。

我有 ac# 类库，我正在尝试在 Visual Studio 2012 中运行单元测试。我在我的解决方案中添加了一个新的单元测试项目，并在那里添加了我的主项目作为参考。我已将我的单元测试项目设置为启动项目。当我尝试调试时，我收到一条错误消息

> 不能直接启动具有类库输出类型的项目。
> 
> 为了调试这个项目，将一个可执行项目添加到这个引用库项目的解决方案中。将可执行项目设置为启动项目。

[![在此处输入图像描述](../Images/2ded1ac813228630e09ea57a34e3d7d0.png)](https://i.stack.imgur.com/BiiLZ.png)

根据[msdn](http://msdn.microsoft.com/en-us/library/ms182532.aspx)的演练，当我点击调试时，它应该正在运行测试。有什么想法吗？这是我的单元测试代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Microsoft.VisualStudio.TestTools.UnitTesting;
using Common;
using Messages;

namespace MessageUnitTests
{
    [TestClass]
    class RegistrationTester
    {
        [TestMethod]
        public void RegistrationRequest_TestConstructorsAndFactories()
        {
            RegistrationRequest rr1 = new RegistrationRequest("myhandle");
            Assert.AreEqual("myhandle", rr1.Handle);

            rr1 = new RegistrationRequest("longHandle-ABCDEFGHIJKLMNOPQRSTUVWXYZ-0123456789'|;:',.=-_+!@#$%^&*()");
            Assert.AreEqual("longHandle-ABCDEFGHIJKLMNOPQRSTUVWXYZ-0123456789'|;:',.=-_+!@#$%^&*()", rr1.Handle);

            rr1 = new RegistrationRequest("");
            Assert.AreEqual("", rr1.Handle);

            rr1 = new RegistrationRequest(null);
            Assert.AreEqual(null, rr1.Handle);

            rr1 = new RegistrationRequest("myhandle");
            ByteList bytes = new ByteList();
            rr1.Encode(bytes);

            RegistrationRequest rr2 = RegistrationRequest.Create(bytes);
            Assert.IsNotNull(rr2);
            Assert.AreEqual(rr1.IsARequest, rr2.IsARequest);
            Assert.AreEqual(rr1.MessageNr.ProcessId, rr2.MessageNr.ProcessId);
            Assert.AreEqual(rr1.MessageNr.SeqNumber, rr2.MessageNr.SeqNumber);
            Assert.AreEqual(rr1.ConversationId.ProcessId, rr2.ConversationId.ProcessId);
            Assert.AreEqual(rr1.ConversationId.SeqNumber, rr2.ConversationId.SeqNumber);
            Assert.AreEqual(rr1.RequestType, rr2.RequestType);
            Assert.AreEqual(rr1.SessionId, rr1.SessionId);
            Assert.AreEqual(rr1.Handle, rr2.Handle);
        }

        //[TestMethod]
        //public void RegistrationRequest_EncodingDecoding()
        //{
        //    Message m1 = new RegistrationRequest("myhandle");
        //    m1.MessageNr = MessageNumber.Create(10, 14);
        //    m1.ConversationId = MessageNumber.Create(10, 12);
        //    ByteList bytes = new ByteList
        //}
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T03:13:51.073

您需要以不同的方式对其进行调试：

![在此处输入图像描述](../Images/2321644c3ded3f67bd041d86e04a5f21.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:22:23.043

确保在创建包含测试的 Visual Studio 项目时使用了“单元测试项目”模板。Visual Studio 现在需要 csproj 标记中的一些元数据来执行类库。

您可以通过在记事本中编辑 csproj 文件来添加它或确认它存在：

```
<Project>
 <PropertyGroup>
  <ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
 </PropertyGroup>
</Project> 
```

详情@http: [//onlinecoder.blogspot.ca/2009/09/visual-studio-projects-project-type.html](http://onlinecoder.blogspot.ca/2009/09/visual-studio-projects-project-type.html)

现在它应该可以在 Visual Studio 中使用 F5 了。如果它仍然不起作用，请右键单击测试并单击“运行测试”或使用测试资源管理器（测试 > Windows > 测试资源管理器）

# simperium - 有关 simperium 数据库自动备份的信息

> ID：12594020
> 
> 赞同：1
> 
> 时间：2012-09-26T03:05:42.987
> 
> 标签：simperium

我找不到太多关于 Simperium 多久自动备份一次数据库的信息。是每天吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:40:03.610

全天定期自动备份所有数据。确切的频率取决于并且随着我们架构的发展而变化。

# android - 线程休眠精度

> ID：12594026
> 
> 赞同：5
> 
> 时间：2012-09-26T03:06:51.987
> 
> 标签：android, multithreading, optimization

我一直在试验各种计时方法的代码。创建延迟的一种方法是使用 thread.sleep(millis) 运行线程，但可以很好地说明线程“唤醒”的时间并不是那么准确，可能在此时间之前或之后。然后我遇到了可以选择使用 thread.sleep(millis, nanos) 的定义，其中 nanos 给出“额外的纳秒精度”。

我的问题是，如果 thread.sleep() 在毫秒内不是那么准确，那么添加额外的 nanos 有什么用？添加此值是否会使睡眠方法突然更准确，例如强制操作系统更严格或在监视时允许更高的优先级？此外， .join() 具有相同的选项，我假设 thread.sleep() 部分的答案类似于 .join() 部分。谢谢你。

# java - 存在子类方法时调用的基类方法

> ID：12594028
> 
> 赞同：0
> 
> 时间：2012-09-26T03:07:03.390
> 
> 标签：java, inheritance, overriding

我的班级架构是这样的。

我有一个界面“myInterface”。我创建了一个实现“myInterface”的类“mySuperMostClass”。现在我创建了一个扩展“mySuperMostClass”的类“myBaseClass”。然后我创建扩展“myBaseClass”的“mySubClass”。我已经覆盖了“mySubClass”中“myBaseClass”中的“methodA”、“methodB”方法。

从“methodA”调用“methodB”

现在我为 mySubClass 创建一个对象，并用“myInterface”的实例引用它。当我用 myInterface 的实例调用 methodA 时，会调用“myBaseClass”的实现。但我希望它调用“mySubClass”。请帮助我做到这一点。

我正在使用 Java 1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:16:49.993

首先，我确定您的实际类名不是以小写字母开头的。如果他们这样做，我建议您阅读[Java 命名约定](http://www.cwu.edu/~gellenbe/javastyle/naming.html)

当覆盖父类的方法时，请确保方法签名保持一致。例如，如果您有一个名为 的方法，则`public void method(String input)`必须确保在子类中维护相同的签名。

因此，通过阅读您的问题，我认为正确的实现是这样的：

```
public interface MyInterface{
}

class  MySuperMostClass implements MyInterface{

}

class  MyBaseClass extends MySuperMostClass{
    public void methodA(){
    }

    public void methodB(){
    }
}

class MySubClass extends MyBaseClass{

    @override
    public void methodA(){
        methodB();
    }

    @override
    public void methodB(){
    }
} 
```

**注意：**我不太确定您的方法的实际签名，因此我将它们保持为无参数。在您的情况下，请确保签名保持不变。

你会打电话的方式是这样的：

```
MyInterface myObject = new MySubClass();
myObject.methodA(); 
```

# objective-c - 如何在 ObjC 中做一个通用的逻辑比较函数

> ID：12594036
> 
> 赞同：0
> 
> 时间：2012-09-26T03:08:00.927
> 
> 标签：objective-c

也许我的标题有点混乱，所以我会用一个场景来说明

假设我想比较 2 个 int 值并根据逻辑比较返回一个布尔值。

```
if (int1 > int2) return true;
if (int3 < int4) return true;
if (int5 == int6) return true;
if (int7 >= int8) return true;
if (int9 <= int10) return true; 
```

但是我不想手动编写这个，而是想做类似的事情

```
- (bool)compareVal1: (int)val1 withVal2: (int)val2 usingLogical: (NSString*)logic
{
     if (val1 "logic" val2) return true;
} 
```

我想要一个通用函数，它可以用来表示我想要的 5 个逻辑比较。我不确定这是否可以实现，但如果您有任何其他解决方案，请告知:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T03:31:21.583

首先，我将使用枚举而不是 NSString 来决定使用哪个逻辑运算符。所以尝试这样的事情：

```
typedef enum {

    GREATER_THAN,
    LESS_THAN,
    LESS_THAN_OR_EQUAL,
    GREATER_THAN_OR_EQUAL,
    EQUALS

} logicalOperator; 
```

实际功能如下所示：

```
+ (bool)compareVal1: (int)val1 withVal2: (int)val2 usingLogical: (logicalOperator)op
{
    switch(op) {

        case GREATER_THAN:
            return (val1 > val2);

        case LESS_THAN:
            return (val1 < val2);

        case LESS_THAN_OR_EQUAL:
            return (val1 <= val2);

        case GREATER_THAN_OR_EQUAL:
            return (val1 >= val2);

        case EQUALS:
            return (val1 == val2);
    }
} 
```

我还将该函数设为静态/类函数，因为它不会真正影响类的特定实例，而是对传入的值进行操作的实用函数。此函数用法的示例如下：

```
bool isGreater = [MyClass compareVal1: 4 withVal2: 3 usingLogical: GREATER_THAN]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T03:27:24.327

不知道为什么不能直接解析字符串并返回表达式的结果。例如（仅说明两个运算符）：

```
- (bool)compareVal1: (int)val1 withVal2: (int)val2 usingLogical: (NSString*)operator
{
   if([operator isEqualTo:@">"])
   {
      return (val1 > val2);
   }
   else if ([operator isEqualTo:@"<"]) 
   {
      return (val1 < val2);
   }
   // similar logic statements for other operators
} 
```

不过，更相关的是，当您可以只编写评估本身时，为什么还需要一种方法来执行此操作呢？

# neo4j - Neo4j Web Admin 如何显示关系属性？

> ID：12594038
> 
> 赞同：1
> 
> 时间：2012-09-26T03:08:07.743
> 
> 标签：neo4j, graph-databases, cypher, spring-data-neo4j

我已经生成了一个 Neo4j 图表，并使用“数据浏览器”上的“样式”规则创建了图表的可视化。我能够显示节点的属性。看起来样式规则只能应用于节点。但是我想显示（在数据浏览器上可视化）关系的属性。这可能吗？如果是这样，我该怎么做？

我通读了 Neo4j 文档并在 Neo4j 论坛中进行了搜索，但没有运气。

我很感激任何帮助。

TIA

例如：

```
 (is a)
(Josh) --------------------> (Male)
       (demographic=gender)
       (created=09/25/12) 
```

在人口统计的情况下，创建的是关系“是”的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:11:11.890

好吧，既然您将问题扩展到可用选项，而不仅仅是 Web 管理员：Neo 人提出了关于可视化选项的一面：http: [//www.neo4j.org/develop/visualize](http://www.neo4j.org/develop/visualize) 对于您的用例，请尝试 Neoclipse [https:// github.com/neo4j/neoclipse/downloads](https://github.com/neo4j/neoclipse/downloads) 它允许指定要在节点和关系上显示哪些属性（请确保在图形数据库视图中启用过滤器，否则首选项将不起作用）。它看起来类似于 webadmin，但可以进行更多自定义。

# python - 在scala中跟踪方法执行

> ID：12594039
> 
> 赞同：1
> 
> 时间：2012-09-26T03:08:16.700
> 
> 标签：python, scala

如果我想在 Python 中跟踪方法执行，我将实现以下装饰器：

```
def trace(f):
    indent = '   '
    def _f(*args):
        signature = '%s(%s)' % (f.__name__, ', '.join(map(repr, args)))
        print '%s--> %s' % (trace.level*indent, signature)
        trace.level += 1
        try:
            result = f(*args)
            print '%s<-- %s == %s' % ((trace.level-1)*indent, signature, result)
        finally:
            trace.level -= 1
        return result
    trace.level = 0
    return _f

def disabled(f) : return f

# uncomment the following line to disable tracing
# trace = disabled 
```

然后我可以装饰我想跟踪的方法：

```
@trace
def my_method(arg1, arg2):
... 
```

另一种可能性是使用[跟踪模块](http://docs.python.org/library/trace.html)。

在 Scala 中跟踪方法执行的惯用方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:14:27.780

Python 中的函数装饰器只是说`my_method = trace(my_method)`. 由于 Scala 还支持一流的函数，因此您实际上可以做同样的事情。

然而，有一个问题。由于 Python 是无类型的，因此函数的类型签名是什么并不重要。Scala 关心这一点。你可以稍微绕过这个问题，因为 Scala 对每个参数列表 arity 都有一个函数特征：`Function0`through `Function22`。其他人可能有更好的想法，但是您可以`trace`为每种函数类型编写一个方法（或一个包含 big`match`的跟踪方法），然后通过跟踪方法调用您的函数。您只需要担心参数的数量，因为您可以使用泛型来忽略它们的类型。

# java - Java中带有冒泡排序的Null Ptr异常

> ID：12594040
> 
> 赞同：1
> 
> 时间：2012-09-26T03:08:52.427
> 
> 标签：java, nullpointerexception, linked-list, bubble-sort

在我可以访问我的代码之前，我得到了一个空指针异常。我无法判断它是否会正常工作，因为我无法让它通过这一点。

此行中抛出错误：

```
if(currentNode.getData() > currentNode.getNext().getData()) 
```

这是我的冒泡排序：

```
public static void bubbleSort(DoubleLinkedList list) //static method used to sort the linked list using bubble sort
      {
          int i = 0;
          int j = 0;
          Node currentNode = list.head;
          Node previousNode = currentNode;
          Node tempNext =  currentNode;
          Node tempPrevious = currentNode;

          for(i=1; i<list.getSize(); i++)
          {
              for(j=0; j<list.getSize()-1; j++)
              {
                  if(currentNode.getData() > currentNode.getNext().getData())
                  {
                      if(currentNode == list.head)
                      {
                          Node tempNode = currentNode.getNext();

                          list.head = tempNode;
                          tempNext = tempNode.getNext();

                          tempNode.setNext(currentNode);
                          currentNode.setNext(tempNext);
                          currentNode.setPrevious(tempNode);

                          tempNext.setPrevious(currentNode);
                      }
                      else if(currentNode.getNext() == list.last)
                      {
                          Node tempNode = currentNode.getNext();
                          list.last = currentNode;
                          tempPrevious = currentNode.getPrevious();

                          tempNode.setNext(currentNode);
                          tempNode.setPrevious(tempPrevious);

                          currentNode.setPrevious(tempNode);
                      }
                      else
                      {
                          Node tempNode = currentNode.getNext();
                          tempPrevious = currentNode.getPrevious();
                          tempNext = currentNode.getNext();

                          tempPrevious.setNext(tempNode);
                          tempNext.setPrevious(currentNode);

                          currentNode.setNext(tempNext);
                          tempNode.setPrevious(tempPrevious);
                      }

                  }

                  currentNode = currentNode.getNext();

              }
          }

      } 
```

我认为对循环的限制将使编译器无法尝试访问不一定存在的指针，这就是我理解的空指针异常。

如果有人可以帮助我克服这个错误，以便我可以测试我的冒泡排序，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:12:01.180

要么`currentNode`为空，要么`currentNode.getNext()`返回空，这就是你不能调用`getData()`它的原因。在使用节点之前，您应该始终检查节点是否存在空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:33:05.643

If `currentNode` and `currentNode.getNext()` being or returning `null` don't cause the problem, then I'd guess that the `getData()` methods do not return a primitive data type (like `int`) but an object (like `Integer`).

In this case `getData()` could return `null` and the out-boxing, the automatic conversion of a wrapper class instance to its wrapped primitive type, that is needed for the `<` operation, would fail and cause a NPE.

# azure - windows azure 端口范围转发

> ID：12594041
> 
> 赞同：0
> 
> 时间：2012-09-26T03:08:56.883
> 
> 标签：azure, virtual-machine, cloud-hosting, portforwarding

我在 Windows Azure 上运行虚拟机。不幸的是，该服务几乎无法使用（哈！），因为它与 Internet 被防火墙隔开。端口范围不能在防火墙中打开，只能打开单个端口，并且只能打开有限数量的端口。我很乐意完全禁用虚拟防火墙并依赖 Windows 防火墙，但这似乎也不是一个选项。

有没有人找到解决此端口范围转发问题的方法？

或者，关于我可以在哪里托管此服务器的任何建议？我正在寻找一个允许我提供自己的磁盘映像的虚拟机主机。看起来我们可以从 Windows Azure 下载 VHD 文件，所以我正在寻找一个允许上传 VHD 或 VMDK 文件的主机。

感谢您提出的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:48:39.033

您可以[将自己的 VHD 上传](https://www.windowsazure.com/en-us/manage/windows/common-tasks/upload-a-vhd/)到 Windows Azure 虚拟机。

您能否描述一下您尝试打开的端口以及在什么操作系统上？

有关您尝试启用的方案的任何其他信息也会有所帮助。

# asp.net - HttpModule EndRequest 处理程序调用了两次

> ID：12594043
> 
> 赞同：9
> 
> 时间：2012-09-26T03:09:10.473
> 
> 标签：asp.net, wcf, azure

我正在尝试为在 WCF 中实现并托管在 Azure 上的 REST 服务实施身份验证。我正在使用 HttpModule 来处理 AuthenticationRequest、PostAuthenticationRequest 和 EndRequest 事件。如果缺少 Authorization 标头或其中包含的令牌无效，则在 EndRequest 期间，我将 Response 上的 StatusCode 设置为 401。但是，我确定 EndRequest 被调用了两次，并且在第二次调用时，响应已经具有标头设置，导致设置 StatusCode 的代码抛出异常。

我在 Init() 中添加了锁，以确保处理程序没有被注册两次；还是跑了两次。Init() 也运行了两次，表明正在创建 HttpModule 的两个实例。但是，在 VS 调试器中使用 Set Object ID 似乎表明请求实际上是不同的请求。我已经在 Fiddler 中验证了浏览器只向我的服务发出了一个请求。

如果我切换到使用 global.asax 路由而不是依赖于 WCF 服务主机配置，则处理程序只调用一次并且一切正常。

如果我将配置添加到 system.web 配置部分以及 Web.config 中的 system.webServer 配置部分，则处理程序只调用一次，一切正常。

所以我有缓解措施，但我真的不喜欢我不理解的行为。为什么处理程序被调用两次？

这是该问题的最小重现：

网络配置：

```
 <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <!--<httpModules>
      <add name="AuthModule" type="TestWCFRole.AuthModule, TestWCFRole"/>
    </httpModules>-->
  </system.web>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="WebBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
    <services>
      <service name="TestWCFRole.Service1">
        <endpoint binding="webHttpBinding" name="RestEndpoint" contract="TestWCFRole.IService1" bindingConfiguration="HttpSecurityBinding" behaviorConfiguration="WebBehavior"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
    <bindings>
      <webHttpBinding>
        <binding name="HttpSecurityBinding" >
          <security mode="None" />
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="AuthModule" type="TestWCFRole.AuthModule, TestWCFRole"/>
    </modules>
    <directoryBrowse enabled="true"/>
  </system.webServer> 
```

Http模块：

```
using System;
using System.Web;

namespace TestWCFRole
{
    public class AuthModule : IHttpModule
    {
        /// <summary>
        /// You will need to configure this module in the web.config file of your
        /// web and register it with IIS before being able to use it. For more information
        /// see the following link: http://go.microsoft.com/?linkid=8101007
        /// </summary>
        #region IHttpModule Members

        public void Dispose()
        {
            //clean-up code here.
        }

        public void Init(HttpApplication context)
        {
            // Below is an example of how you can handle LogRequest event and provide 
            // custom logging implementation for it
            context.EndRequest += new EventHandler(OnEndRequest);
        }

        #endregion

        public void OnEndRequest(Object source, EventArgs e)
        {
            HttpContext.Current.Response.StatusCode = 401;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T09:56:47.870

当 ASP.net 应用程序启动时，为了最大限度地提高性能，ASP.NET Worker 进程将`HttpApplication`根据需要实例化尽可能多的对象。每个`HttpApplication`对象，还将实例化每个`IHttpModule`已注册的副本并调用 Init 方法！这实际上是在 IIS（或 cassini 是 VS 内置的网络服务器）下运行的 ASP.NET 进程的内部设计。可能是因为您的 ASPX 页面包含指向浏览器将尝试下载的其他资源、外部资源和 iframe、css 文件或 ASP.NET 工作进程行为的链接。

幸运的是，Global.asax 并非如此：

[这里来自 MSDN](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29)：

> Application_Start 和 Application_End 方法是不代表 HttpApplication 事件的特殊方法。ASP.NET 在应用程序域的生命周期内调用它们一次，而不是为每个 HttpApplication 实例调用一次。

但是`HTTPModule's init`，在创建所有模块后，为 HttpApplication 类的每个实例调用一次方法

> 第一次在应用程序中请求 ASP.NET 页面或进程时，会创建一个新的 HttpApplication 实例。但是，为了最大限度地提高性能，HttpApplication 实例可能会被重复用于多个请求。

并由下图说明： ![在此处输入图像描述](../Images/f48a535a0f4d36220800c82f2ce58295.png)

如果您想要保证只运行一次的代码，您可以使用`Application_Start`或`Global.asax`设置一个标志并将其锁定在底层模块中，这对于身份验证而言不是一个好习惯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:32:11.807

抱歉，不知道为什么它会被调用两次，但是 EndRequest 最终可能会因为多种原因被调用。请求完成，请求被中止，发生了一些错误。所以我不会相信如果你到达那里，你实际上有一个 401，这可能是出于其他原因。

我只是将我的逻辑保留在 AuthenticateRequest 管道中：

```
 public class AuthenticationModule : IHttpModule
    {
        public void Dispose() { }

        public void Init(HttpApplication context)
        {
            context.AuthenticateRequest += Authenticate;
        }

        public static void Authenticate(object sender, EventArgs e)
        {
            // authentication logic here            
            //.............

            if (authenticated) {
                HttpContext.Current.User = new System.Security.Principal.GenericPrincipal(myUser, myRoles);
            }

            // failure logic here           
            //.............         
        }
    } 
```

# java - Java本机方法源代码

> ID：12594046
> 
> 赞同：25
> 
> 时间：2012-09-26T03:09:50.767
> 
> 标签：java

哪里可以下载java原生方法源代码？例如，我想知道 的源代码`System.arraycopy()`，但我找不到。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-26T03:29:37.373

[您可以在此处](http://hg.openjdk.java.net/jdk7/jdk7)下载 OpenJdk 源代码。

在该文件夹`jdk\src\share`中，您可以获取源代码。

`jdk\src\share\native`是用 c 和 c++ 编写的 natice 方法。

1.  `jdk\src\linux`linux的源码。
2.  `jdk\src\windows`窗户的来源。
3.  `jdk\src\solaris`solaris 的来源。
4.  `jd\src\share`共同来源。

例如： System.arrayCopy();

int 文件`hotspot\src\share\vm\oops\objArrayKlass.cpp`第 168 行：

```
void objArrayKlass::copy_array(arrayOop s, int src_pos, arrayOop d,
                           int dst_pos, int length, TRAPS) {
assert(s->is_objArray(), "must be obj array");

if (!d->is_objArray()) {
  THROW(vmSymbols::java_lang_ArrayStoreException());
}

// Check is all offsets and lengths are non negative
if (src_pos < 0 || dst_pos < 0 || length < 0) {
  THROW(vmSymbols::java_lang_ArrayIndexOutOfBoundsException());
}
// Check if the ranges are valid
if  ( (((unsigned int) length + (unsigned int) src_pos) > (unsigned int) s->length())
   || (((unsigned int) length + (unsigned int) dst_pos) > (unsigned int) d->length()) )   {
  THROW(vmSymbols::java_lang_ArrayIndexOutOfBoundsException());
}

// Special case. Boundary cases must be checked first
// This allows the following call: copy_array(s, s.length(), d.length(), 0).
// This is correct, since the position is supposed to be an 'in between point', i.e., s.length(),
// points to the right of the last element.
if (length==0) {
  return;
}
if (UseCompressedOops) {
  narrowOop* const src = objArrayOop(s)->obj_at_addr<narrowOop>(src_pos);
  narrowOop* const dst = objArrayOop(d)->obj_at_addr<narrowOop>(dst_pos);
  do_copy<narrowOop>(s, src, d, dst, length, CHECK);
} else {
  oop* const src = objArrayOop(s)->obj_at_addr<oop>(src_pos);
  oop* const dst = objArrayOop(d)->obj_at_addr<oop>(dst_pos);
  do_copy<oop> (s, src, d, dst, length, CHECK);
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T03:17:30.007

本机方法并由您使用的虚拟机以不同方式实现。这种方法没有一个实现，实际上不同的代码可以在不同的架构或虚拟机上执行。

# eclipse - Eclipse RCP - 从 AbstractUIPlugin.getImageDescriptor 和 ImageRegistry 调用图像

> ID：12594047
> 
> 赞同：0
> 
> 时间：2012-09-26T03:10:00.197
> 
> 标签：eclipse, plugins, rcp

`AbstractUIPlugin.getImageDescriptor`使用图像调用图像并将图像放入图像注册表与从图像注册表调用有什么区别？

似乎两者都在做同样的工作。第一个更容易（更少的代码行！）。

这段代码：

```
ImageDescriptor id = Activator.getImageDescriptor("image/image.png");
Image image = id.createImage(); 
```

对比

首先放入图像注册表..

```
protected void initializeImageRegistry(ImageRegistry registry) {
    super.initializeImageRegistry(registry);
    Bundle bundle = Platform.getBundle(ID);

    ImageDescriptor myImage = ImageDescriptor.createFromURL(
          FileLocator.find(bundle,
                           new Path("image/image.png"),
                                    null));
    registry.put(MY_IMAGE_ID, myImage);
} 
```

然后从图像注册表调用图像..

```
AbstractUIPlugin plugin = Activator.getDefault();
ImageRegistry imageRegistry = plugin.getImageRegistry();
Image myImage = imageRegistry.get(Activator.MY_IMAGE_ID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:48:08.567

每次调用它时它都会创建单独的图像。最后你会得到“没有更多的句柄”异常。:)

```
 ImageDescriptor id = Activator.getImageDescriptor("image/image.png");
    Image image = id.createImage(); 
```

当您关闭应用程序时，请始终缓存图像、重复使用和处置。如果您使用`ImageRegistry`,`AbstractUIPlugin`将为您完成处理它的工作。

# servicestack - 使用数据库中的数据填充 IAuthSession

> ID：12594048
> 
> 赞同：3
> 
> 时间：2012-09-26T03:10:26.857
> 
> 标签：servicestack

因此，我根据此处的示例使用 ServiceStack 创建了一个自定义 CredentialsAuthProvider： [https ://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)

我有身份验证方面的工作，但我不确定如何在 OnAuthenticated 方法中使用来自数据库的数据填充会话。在示例中，它们显示以下内容：

```
 //Fill the IAuthSession with data which you want to retrieve in the app eg:
    session.FirstName = "some_firstname_from_db"; 
```

在 TryAuthenticate 方法中，我有用户名/密码，我可以使用它来针对数据库对用户进行身份验证，但是一旦进入 OnAuthenticated 方法，我如何/使用什么来访问/检索数据库中的用户信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T16:30:04.753

我知道这是一个较旧的线程，但它可能仍然相关，因为不幸的是，自 2012 年 9 月以来，在 ServiceStack 文档的可用性、示例的清晰度甚至代码中的注释方面并没有太大的改进。（**@mythz：**如果你们可以为所有类和方法添加有意义的摘要，那将非常有帮助。）

在查看 CredentialsAuthProvider 的实际代码之前，我一直在为同样的困境苦苦挣扎（这通常是了解 ServiceStack 中的工作原理的唯一方法）。OnAuthenticated 是在 Authenticate 方法内的 TryAuthenticate 之后立即调用的，所以我认为没有必要像@mythz 在他的示例中所建议的那样在 OnAuthenticated 中进行所有数据库调用。相反，我将填充 IAuthSession 对象的代码直接放入了我的 TryAuthenticate 实现中，如下所示：

```
public override bool TryAuthenticate(IServiceBase authService, string userName, string password)
{
    try
    {
        // Use my own repo to authenticate the user.
        var userRepo = authService.TryResolve<IUserRepository>();
        var user = userRepo.Authenticate(userName, password);

        // Populate session properties with data from my user POCO.
        var session = authService.GetSession();
        session.Id = user.CurrentSession.ID.ToString();
        session.IsAuthenticated = true;
        session.CreatedAt = DateTime.UtcNow;
        session.DisplayName = session.FirstName = session.LastName = user.FullName;
        session.UserAuthName = session.UserName = user.Username;
        session.UserAuthId = user.ID.ToString();
    }
    catch (Exception ex)
    {
        // Log the exception, etc....
        return false;
    }
    return true;
} 
```

但是，您仍然必须重写 OnAuthenticated 以便将 cookie 保存在 HTTP 响应中（我假设来自同一浏览器的后续请求需要经过身份验证），因为基本实现仅在 IOC 容器中找到 IUserAuthRepository 时才设置 cookie ，在我的情况下不会发生，因为我使用自己的存储库。所以我的实现现在看起来像这样：

```
public override void OnAuthenticated(IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
{
    try
    {
        // Save the browser cookie.
        var httpRes = authService.RequestContext.Get<IHttpResponse>();
        if (httpRes != null)
        {
            httpRes.Cookies.AddPermanentCookie(HttpHeaders.XUserAuthId, session.UserAuthId);
        }

        // Save the user session object (ServiceStack stores it in the in-memory cache).
        authService.SaveSession(session, SessionExpiry);
    }
    catch (Exception ex)
    {
        // Log the exception, etc....
    }
} 
```

**@mythz：**请让我知道以上是否有意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T04:38:47.507

[ServiceStack 的CustomUserSession](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Models/CustomUserSession.cs#L21)的另一个很好的例子是 SocialBootstrapApi 项目。它不是从数据中提取信息，而是从 UserSession 中提取信息并使用从 AppHost IOC 解析的已注册 DB Factory 填充自己的自定义用户表：

```
authService.TryResolve<IDbConnectionFactory>().Run(db => db.Save(user)); 
```

除了使用它从用户会话中提取和保存数据之外，您还可以使用任何已注册的依赖项来获取数据并使用以下内容填充会话：

```
public override void OnAuthenticated(
    IServiceBase authService, 
    IAuthSession session, 
    IOAuthTokens tokens, 
    Dictionary<string, string> authInfo)
{
    using (var db = authService.TryResolve<IDbConnectionFactory>().OpenDbConnection()) 
    {
        var user = db.Id<MyUser>(session.UserId);
        session.FirstName = user.FirstName;
    }
} 
```

# java - 如何获取 HashMap 中的可能值列表 ?

> ID：12594049
> 
> 赞同：0
> 
> 时间：2012-09-26T03:10:39.743
> 
> 标签：java, sorting, hashmap

> **可能重复：**
> [如何遍历地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

我正在编写一个程序，它将接受一个输入（数据），它是一个字符串数组，并按出现频率的顺序返回它们，如果它们在输入中出现的次数相同，则按字母顺序返回。我使用 HashMap 将每个字符串映射到它在数组中出现的次数，之后我的想法是使用 for 循环遍历每个出现次数，但是我找不到一个命令返回 Hashmap 中唯一值的数量。有谁知道如何获得这个值？

此外，如果您有更简单的方法来执行我描述的任务，欢迎提出任何建议。

```
 HashMap<String, Integer> sortmap = new HashMap<String, Integer>();
    ArrayList<String> stringlist = new ArrayList<String>();
    ArrayList<String> stringlist2 = new ArrayList<String>();
    for(String x : data)
    {
        if(sortmap.containsKey(x)){
            sortmap.put(x, sortmap.get(x)+1);
        }
        else{
            sortmap.put(x, 1);
        }
    }
    for (String s : sortmap.keySet()){
        for (int i : sortmap.values()){
            if (sortmap.get(s) == i){
                stringlist2.add(s);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:12:48.287

最后的双循环是非常不幸的。

获取 sortmap.entrySet() 并将其存储在一个数组中。然后使用您自己的 Comparator 使用您自己的 Comparator 对该数组进行排序，如果它们相等，则按字母顺序比较字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:04:35.573

我想通了——对于那些想知道的人来说，这是完整的逻辑：

```
public String[] sort(String[] data) {
    TreeMap<String, Integer> sortmap = new TreeMap<String, Integer>();
    ArrayList<String> stringlist = new ArrayList<String>();
    for(String x : data){
        if(sortmap.containsKey(x))
            sortmap.put(x, sortmap.get(x)+1);
        else
            sortmap.put(x, 1);
    }
    Arrays.sort(sortmap.values().toArray(), 0, sortmap.size());
    for (int i = data.length; i > 0; i--){
        for (Entry<String, Integer> k : sortmap.entrySet()){
            if (k.getValue() == i)
                stringlist.add(k.getKey());
        }
    }
    String[] output = stringlist.toArray(new String[stringlist.size()]);
    return output;
} 
```

# python - 在 Python 中管理固定数量的工作人员

> ID：12594050
> 
> 赞同：1
> 
> 时间：2012-09-26T03:10:47.013
> 
> 标签：python, concurrency, multiprocessing

我需要实现一个带有主进程的系统，该主进程管理执行其他任务的从进程。我有两种不同的从属类型，每个从属需要 6 个实例。我写了一些可以工作的东西，但是它会杀死每个进程并在任务完成时启动一个新进程。这是不可取的，因为产生新进程的成本很高。我更愿意让每个从站作为一个进程运行，并在它完成时得到通知，然后用新的输入再次运行它。

我当前的伪代码如下。它并不完美；我正在考虑它，因为我没有实际的代码。

```
# SlaveTypeB is pretty much the same.
class SlaveTypeA(multiprocessing.Process):
    def __init__(self, val):
        self.value = val
        self.result = multiprocessing.Queue(1)
        self.start()
    def run(self):
        # In real life, run does something that takes a few seconds.
        sleep(2)
        # For SlaveTypeB, assume it writes self.val to a file instead of incrementing
        self.result.put(self.val + 1)
    def getResult(self):
        return self.result.get()[0]

if __name__ == "__main__":
    MAX_PROCESSES = 6
    # In real life, the input will grow as the while loop is being processed
    input = [1, 4, 5, 6, 9, 6, 3, 3]
    aProcessed = []
    aSlaves = []
    bSlaves = []

    while len(input) > 0 or len(aProcessed) > 0:
        if len(aSlaves) < MAX_PROCESSES and len(input) > 0:
            aSlaves.append(SlaveTypeA(input.pop(0))
        if len(bSlaves) < MAX_PROCESSES and len(aProcessed) > 0 :
            bSlaves.append(SlaveTypeB(aProcesssed.pop(0))
        for aSlave in aSlaves:
            if not aSlave.isAlive():
                aProcessed = aSlave.getResult()
                aSlaves.remove(aSlave)
        for bSlave in bSlaves:
            if not bSlave.isAlive():
                bSlaves.remove(bSlave) 
```

我怎样才能使 aSlaves 和 bSlaves 中的进程不会被杀死和重生。我想我可以使用管道，但我不确定如何判断进程何时完成阻塞而无需等待。

**编辑** 我使用管道重写了它，它解决了我无法保持进程运行的问题。仍然希望输入有关执行此操作的最佳方法的信息。我省略了 slaveB 部分，因为只有一种工作类型可以简化问题。

```
class Slave(Process)
    def __init__(self, id):
        # Call super init, set id, set idlestate = true, etc
        self.parentCon, self.childCon = Pipe()
        self.start()

    def run(self):
        while True:
            input = self.childCon.recv()
            # Do something here in real life
            sleep(2)
            self.childCon.send(input + 1)

   #def isIdle/setIdle():
       # Getter/setter for idle

   def tryGetResult(self):            
       if self.parentCon.poll():
           return self.parentCon.recv()
       return False

   def process(self, input):
       self.parentConnection.send(input)

if __name__ == '__main__'
    MAX_PROCESSES = 6
    jobs = [1, 4, 5, 6, 9, 6, 3, 3]
    slaves = []
    for int i in range(MAX_PROCESSES):
        slaves.append(Slave(i))
    while len(jobs) > 0:
        for slave in slaves:
            result = slave.tryGetResult()
            if result:
                # Do something with result
                slave.setIdle(True)
            if slave.isIdle():
                slave.process(jobs.pop())
                slave.setIdle(False) 
```

**编辑 2** 知道了，请参阅下面的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:40:00.143

创建两个队列？喜欢`worktodoA`并且`worktodoB`让您的员工在等待将某些东西放入队列时闲置，如果放在那里的项目让我们说“退出”，他们会退出吗？

否则你应该给[tMCs 评论](http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers)一个机会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T19:57:13.527

看起来使用 SyncManager 是这种情况下的最佳选择。

```
class Master(SyncManager):
    pass

input = [1, 4, 5, 6, 9, 6, 6, 3, 3]
def getNextInput():
    # Check that input isn't empty first
    return input.pop()

if __name__ == "__main__":
    MAX_PROCESSES = 6
    Master.register("getNextInput", getNextInput)
    m = Master(('localhost', 5000))
    m.start()
    for i in range(MAX_PROCESSES):
        Slave()
    while True:
        pass

class Slave(Process):
    def __init__(self):
        multiprocessing.Process.__init__(self)
        self.start()
    def run(self):
        Master.register("getNextInput", getNextInput)
        m = Master(('localhost', 5000))
        m.connect()
        while True:
            input = m.getNextInput()
            # Check for None first
            self.process(input)
    def process(self):
        print "Processed " + str(input) 
```

# hadoop - Snappy 或 LZO 用于日志，然后由 hadoop 使用

> ID：12594051
> 
> 赞同：4
> 
> 时间：2012-09-26T03:11:15.700
> 
> 标签：hadoop, hive, lzo, snappy

我有大量的服务。我记录事件。每隔几分钟，我使用 gzip 压缩日志并将它们旋转到 S3。从那里，我们通过 Hive 使用 Amazon 的 Hadoop（弹性 mapreduce）处理日志。

现在在服务器上，当我们压缩和旋转日志时，每隔几分钟就会出现一次 CPU 峰值。我们希望从 gzip 切换到 lzo 或 snappy 以帮助减少这种 cpu 峰值。我们是一个 cpu-bound 服务，所以我们愿意在轮换时用更大的日志文件换取更少的 cpu 消耗。

我一直在阅读有关 LZO 和 Snappy（又名 zippy）的大量内容。LZO 的优点之一是它在 HDFS 中是可拆分的。但是，我们的文件是通过 Gzip 压缩的 ~15MB，所以我认为我们不会达到 HDFS 中 64MB 的默认块大小，所以这无关紧要。即使是这样，我们也应该能够将默认值设置为 128MB。

现在，我想尝试一下 snappy，因为它似乎稍微快一些/占用更少的资源。亚马逊的 yum 存储库中似乎都没有，所以我们可能无论如何都必须自定义安装/构建——所以在工程时间方面并没有太大的权衡。我听说过一些关于 LZO 许可证的担忧，但我想如果它不靠近我们的代码，我会发现它只是安装在我们的服务器上，对吧？

那么，我应该选择哪个？一个在 Hadoop 中的性能会比另一个更好吗？有没有人用这两种实现方式做到这一点并且有任何他们可以分享的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:49:12.380

也许为时已晚，但[Python-snappy](https://github.com/andrix/python-snappy)提供了一个用于快速压缩/解压缩的命令行工具：

> 压缩和解压文件：
> 
> `$ python -m snappy -c uncompressed_file compressed_file.snappy`
> 
> `$ python -m snappy -d compressed_file.snappy uncompressed_file`
> 
> 压缩和解压缩流：
> 
> `$ cat uncompressed_data | python -m snappy -c > compressed_data.snappy`
> 
> `$ cat compressed_data.snappy | python -m snappy -d > uncompressed_data`

[Snappy 的解压缩速度也始终比 lzo 快 20% 以上](http://pastebin.com/hu8Ym1n4)，如果您希望它用于通过 hadoop 大量阅读的文件，这是一个相当大的胜利。最后，[它被 Google 用于 BigTable 和 MapReduce 之类的东西](http://en.wikipedia.org/wiki/Snappy_%28software%29)，至少对我来说这是一个非常重要的认可。

# javascript - 立体主义，d3 数据连接

> ID：12594053
> 
> 赞同：2
> 
> 时间：2012-09-26T03:11:47.693
> 
> 标签：javascript, d3.js

我是 d3 初学者，我很抱歉承认我在简单地构建两个数组的叉积时遇到了麻烦。我实际上正在使用立体主义，做一些非常简单的事情：对于每种类型，产生一些聚合。

我的尝试：

```
var aggs = [
    {title: 'mean', metric: function(d) { return cube.metric("sum(" + d +  (value))").divide(cube.metric("sum(" + d + ")")); }},
    {title: 'count', metric: function(d) { return cube.metric("sum(" + d + ")").divide(step / 1e3); }}
]

d3.json(origin + "/1.0/types", function(types) {    
    d3.select("body").insert("div", ".bottom")
    .attr("class", "group")
    .selectAll(".typegrp")
    .data(types)
    .enter()
    .append("div")
    .attr("class", "typegrp")
    .selectAll("div")
    .data(aggs)
    .enter()
    .append("div")
    .attr("class","horizon")
    .call(context.horizon()
        .title(function(d) { return d.title; })
        .metric(function(d) { return d.metric(FOOOO); })
     );
}); 
```

我不明白的部分是“FOOOO”部分。从“内部”上下文（“aggs”中的行），我如何访问“外部”上下文（“类型”中的行）？

提前致谢。

编辑：下面是 nick 建议的完整工作示例。

```
var aggs = [
            {title: 'mean',  metric: function(d) { return cube.metric("sum(" + d + "(value))").divide(cube.metric("sum(" + d + ")")); }},
            {title: 'sum',   metric: function(d) { return cube.metric("sum(" + d + "(value))"); }},
            {title: 'count', metric: function(d) { return cube.metric("sum(" + d + ")"); }},
            {title: 'max',   metric: function(d) { return cube.metric("max(" + d + "(value))"); }},
            {title: 'min',   metric: function(d) { return cube.metric("min(" + d + "(value))"); }}
        ]

d3.json(origin + "/1.0/types", function(types) {    
    d3.select("body")
    .insert("div", ".bottom")
    .attr("class", "group")
    .selectAll(".typegrp")
    .data(types)
    .enter()
    .append("div")
    .attr("class", "typegrp")
    .each(function(type) {
        d3.select(this)
        .selectAll("div.horizon")
        .data(aggs)
        .enter().append("div")
        .attr("class","horizon")
        .each(function(agg) {
            d3.select(this)
            .call(context.horizon()
                .title(agg.title + " " + type)
                .metric(agg.metric(type))
            );
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:07:16.253

我没有使用过立体主义，但我认为这里有两种选择：

1.  简单的选择，如果您真的只有两个聚合指标 - 不要进行数据连接，只需单独添加它们。

    ```
    var typeGroups = d3.select("body").insert("div", ".bottom")
        .attr("class", "group")
      .selectAll(".typegrp")
        .data(types);

    typeGroups.enter()
      .append("div")
        .attr("class", "typegrp");

    typeGroups
      .append("div")
        .attr("class","horizon")
        .call(context.horizon()
            .title('mean')
            .metric(function(d) { return cube.metric( ... ); })
        );

    typeGroups.
      .append("div")
        .attr("class","horizon")
        .call(context.horizon()
            .title('count')
            .metric(function(d) { return cube.metric( ... ); })
        ); 
    ```

2.  稍微难一点的选择 - 在调用中加入 aggs 数组`.each`：

    ```
    typeGroups.enter()
      .append("div")
        .attr("class", "typegrp")
        .each(function(type) {
            d3.select(this).selectAll("div.horizon")
                .data(aggs)
              .enter().append("div")
                .attr("class","horizon")
                .each(function(agg) {
                    d3.select(this)
                        .call(context.horizon()
                            .title(agg.title)
                            .metric(agg.metric(type))
                        );
                });
        }); 
    ```

    这使您可以在调用时访问该`type`变量`context.horizon()`。

# jquery - Ajax 回调以意外的顺序触发

> ID：12594056
> 
> 赞同：2
> 
> 时间：2012-09-26T03:12:07.290
> 
> 标签：jquery

伪代码：when(x, y).then(z);

其中 y 是对进行 ajax 调用的函数的调用，如下所示：

```
function y(......){
  var p = $.ajax(...........);
  p.done(callMeFirst);
  return p;
} 
```

现在根据我的理解，鉴于 x 已经解决，那么在成功的 ajax 调用 'callMeFirst' 应该首先触发，然后是 'z'

但会发生的是'z'先触发，然后'callMeFIrst'

我不明白为什么会发生这种情况或如何解决它，因为我们所有的 ajax 调用都通过“y”运行，并且在任何其他回调处理它之前需要它的调用后处理。

蒂亚罗伯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T11:28:18.767

使用 async 使其同步

```
return $.ajax({
       url  : url,
       type : "POST",
       cache: false,
       async:   false
}).responseText; 
```

# django - Django：使用 __contains 和 **kwargs 过滤器

> ID：12594057
> 
> 赞同：0
> 
> 时间：2012-09-26T03:12:13.577
> 
> 标签：django

我有一个属性，作为字符串传入，我用它来调用 X.objects.filter(**{string: TION})。这将具有返回类型 X 的所有对象的效果，其属性字符串是“TION”。是否可以用 __icontains, __contains 代替这种 **kwargs 输入？那将如何运作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:19:34.690

只需使用`__contains`您的属性构建一个字符串。

更清楚地，你想要这样的东西：

```
query_type = '{0}__contains'
query_key = query_type.format(string)
X.objects.filter(**{query_key: 'TION'}) 
```

要不就

```
X.objects.filter(**{string + '__contains': 'TION'}) 
```

# java - 如何在java中使用math.pi

> ID：12594058
> 
> 赞同：38
> 
> 时间：2012-09-26T03:12:14.487
> 
> 标签：java, pi

我在转换这个公式时遇到问题`V = 4/3 π r^3`。我使用`Math.PI`and `Math.pow`，但我收到此错误：

> ';' 预期的

此外，直径变量不起作用。那里有错误吗？

```
import java.util.Scanner;

import javax.swing.JOptionPane;

public class NumericTypes    
{
    public static void main (String [] args)
    {
        double radius;
        double volume;
        double diameter;

        diameter = JOptionPane.showInputDialog("enter the diameter of a sphere.");

        radius = diameter / 2;

        volume = (4 / 3) Math.PI * Math.pow(radius, 3);

        JOptionPane.showMessageDialog("The radius for the sphere is "+ radius
+ "and the volume of the sphere is ");
    }
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-26T03:13:44.673

您缺少乘法运算符。另外，你想`4/3`用浮点数做，而不是整数数学。

```
volume = (4.0 / 3) * Math.PI * Math.pow(radius, 3);
           ^^      ^ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-20T19:17:25.223

代替

```
volume = (4 / 3) Math.PI * Math.pow(radius, 3); 
```

和：

```
volume = (4 * Math.PI * Math.pow(radius, 3)) / 3; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-19T07:36:26.417

这是`Math.PI`查找圆的周长和面积的用法首先我们将半径作为消息框中的字符串并将其转换为整数

```
public class circle {

    public static void main(String[] args) {
        // TODO code application logic here

        String rad;

        float radius,area,circum;

       rad = JOptionPane.showInputDialog("Enter the Radius of circle:");

        radius = Integer.parseInt(rad);
        area = (float) (Math.PI*radius*radius);
        circum = (float) (2*Math.PI*radius);

        JOptionPane.showMessageDialog(null, "Area: " + area,"AREA",JOptionPane.INFORMATION_MESSAGE);
        JOptionPane.showMessageDialog(null, "circumference: " + circum, "Circumfernce",JOptionPane.INFORMATION_MESSAGE);
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-24T06:49:10.983

您的直径变量将不起作用，因为您试图将字符串存储到仅接受双精度的变量中。为了让它工作，你需要解析它

前任：

```
diameter = Double.parseDouble(JOptionPane.showInputDialog("enter the diameter of a sphere."); 
```

# c++ - 引用地址如何在 C++ 中变为 NULL？

> ID：12594061
> 
> 赞同：0
> 
> 时间：2012-09-26T03:12:29.423
> 
> 标签：c++

我有一个核心转储，它显示参考地址为 NULL....

细节：

```
(gdb) bt
#0  0xffffe410 in __kernel_vsyscall ()
#1  0x005b6c10 in raise () from /lib/libc.so.6
#2  0x005b8521 in abort () from /lib/libc.so.6
#3  0xf749e641 in Application::fatalSignal () at Application.cc:277
#4  <signal handler called>
#5  SdlProcess::procedureReturn (this=0x0, aSignal=0, aArg1=1, aArg2=0x0)
    at /include/c++/4.1.1/bits/stl_list.h:652
#6  0x08112edb in Sdl::authFailurer (aSdlProcess=@0x0, aLabel=0, aSignal=0, arg2=0x0) at /Mgr/SdlAuth.cc:1781
#7  0x00000000 in ?? ()
================
define:
Sdl::authFailurer(SdlProcess& aSdlProcess, int aLabel, int aSignal, int /*arg1*/, void* arg2)

#5 aSdlProcess.procedureReturn(0, 1, 0); 
```

并在 stl_list.h:652

```
 bool empty() const

      { return this->_M_impl._M_node._M_next == &this->_M_impl._M_node; }    ---->652
in procedureReturn()
{
   ...
  if (!mProcedureStack.empty())---->here,mProcedureStack is a datamember of SdlProcess
   ...
  {
  ...}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:16:44.177

您可以通过取消引用 NULL 指针来获得 NULL 引用。我不确定在这种特殊情况下如何发生这种情况，除非`mProcedureStack`是参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:16:55.703

此问题的最常见原因是当您返回一个*悬空引用*时，例如：

```
int& foo() {
   int bar = 5;
   return bar;
} 
```

现在返回的引用`foo`指向堆栈并将包含未定义的数据。

# drupal-7 - drupal 7 中的 hook_validate 和 hook_node_validate 有什么区别？

> ID：12594062
> 
> 赞同：0
> 
> 时间：2012-09-26T03:12:34.680
> 
> 标签：drupal-7

我只知道在 hook_node_validate 之前调用了 hook_validate 但如何在适当的情况下使用这些函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:58:23.220

根据[以下文档`hook_validate()`](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_validate/7)：

> 此钩子仅在定义节点内容类型的模块上调用

[`hook_node_validate()`](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_validate/7)在任何内容类型上调用的实现在哪里。

# xcode - dyld：库未加载 6.0 模拟器/6.0 设备的不同行为

> ID：12594070
> 
> 赞同：39
> 
> 时间：2012-09-26T03:14:43.880
> 
> 标签：xcode, cocoa-touch, ios6, dyld, ios-frameworks

我的应用程序在 Xcode 中的 iPhone 6.0 模拟器上运行良好，但是当我尝试在我的 6.0 设备上运行它时，我收到以下致命错误：

dyld：库未加载：/System/Library/Frameworks/AdSupport.framework/AdSupport 引用自：/var/mobile/Applications/26329A7C-04B0-415A-B8EB-3C59CC1EC0B1/hammerhead.app/hammerhead 原因：找不到图像

我确信我的手机有 6.0 版并且是最新的。我的项目文件和 info.plist 文件中的部署目标设置为 6.0。我该怎么办？

问题似乎出在 AdSupport 框架上，我将其放入我的应用程序中，以便新的 Facebook SDK (3.1) 可以在 iOS 6 上运行。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-10T05:23:32.650

如果您的目标是低于 6.0 的 iOS 版本，则需要将 AdSupport.framework、Social.framework 和 Accounts.framework 设为可选链接。

请查看随附的屏幕截图。

干杯！！！![在此处输入图像描述](../Images/013245041b2603ce4c1c22341c332872.png)

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-09-26T04:58:27.990

解决了我自己的问题：通过转到项目文件摘要并向下滚动到链接框架和库，将出现问题的框架设置为“可选”而不是“必需”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-06T13:59:56.517

iOS 7 上的 CloudKit.framework 相同（仅适用于 iOS8）。转到 General > Linked Frameworks and Libraries，将 CloudKit.framework 更改为 Optional。感谢 VSN。

# c# - 在c#中实现抽象byref方法

> ID：12594072
> 
> 赞同：1
> 
> 时间：2012-09-26T03:15:25.523
> 
> 标签：c#, vb.net, inheritance, byref

我有一个抽象类方法：

```
Public Class Base_BLL
{
    Public Overridable Function Persist(ByRef x As Base_BO) As Base_BO
    {
    }
}

Public CLass ActualBLL Inherits Base_BLL
{
}

public Class Main_BO Inherits Base_BO
{
} 
```

我正在重用旧的 vb 代码，并且有一个 C# Presenter 类，它试图使用 ActualBLL 方法持久化 Main_BO 类。但我无法编译：

```
ActualBLL bll = new ActualBLL()
Main_BO bo = new Main_BO()
bo.ID="3"
bo = bll.Persist(ref bo) 
```

编译器一点也不喜欢它。但是，在 VB 中，以下行编译得很好：

```
bo = bll.Persist(bo); 
```

我在这里有点茫然...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T03:31:11.713

C# 编译器更严格，它不会为您插入这些强制转换。

```
Main_BO bo = new Main_BO() ;
// ...
Base_BO br = bo ;
bo = (Main_BO) bll.Persist (ref br) ; 
```

# java - 泛型类型多态性混乱？

> ID：12594080
> 
> 赞同：1
> 
> 时间：2012-09-26T03:16:59.803
> 
> 标签：java, generics, polymorphism

我有一个像这样的抽象工厂：

```
public abstract class DAOFactory {
    public abstract EntryDAO<EntryDTO> getEntryDAO();
    ...
} 
```

使用我的 DAO 和 DTO 接口，如下所示：

```
public interface EntryDTO extends GenericDTO {
}

public interface EntryDAO<T extends EntryDTO> extends GenericDAO<T, Serializable> {  
} 
```

我的实现是这样的：

```
public class EntryDTOImpl implements EntryDTO {
}

public class EntryDAOImpl<T extends EntryDTO> extends GenericDaoImpl<EntryDTOImpl, ObjectId> 
 implements EntryDAO<T> {
} 
```

现在，如果我创建一个工厂并`getEntryDAO`像这样覆盖该方法：

```
public class MyDAOFactory extends DAOFactory {   
    @Override
    public EntryDAO<EntryDTO> getEntryDAO() {
        try {
            return new EntryDAOImpl<EntryDTOImpl>();
        } catch (UnknownHostException e) {
            e.printStackTrace();
        }
    } 
```

我得到一个编译时错误：

> 类型不匹配：无法从 EntryDAOImpl 转换为 EntryDAO

**编辑**

我已经像这样更新了我的抽象工厂：

```
public abstract <T extends EntryDTO> EntryDAO<T> getEntryDAO(); 
```

并在我的工厂实现中进行了更改：

```
@Override
public <T extends EntryDTO> EntryDAO<T> getEntryDAO() {
    try {
        return new EntryDAOImpl<EntryDTOImpl>();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

现在我收到编译时错误：

> `Type mismatch: cannot convert from EntryDAOImpl<EntryDTOImpl> to EntryDao<T>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:25:09.217

以这种方式定义抽象方法（注意`?`而不是`T`）：

```
public abstract EntryDAO<? extends EntryDTO> getEntryDAO(); //should work for you 
```

我以我理解的方式重新创建了场景：*返回`subclass1<subclass2>`为`interface1<interface2>`*

例如，这很好用：

```
public static List<? extends CharSequence> dostuff1() { 
    return new ArrayList<String>();
} 
```

但这不起作用：

```
public <B extends CharSequence> List<B> dostuff2() {
    return new ArrayList<String>();
} 
```

这给出了与您得到的相同的编译时错误：`Type mismatch: cannot convert from ArrayList<String> to List<B>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:27:51.643

发生这种情况的原因是您试图返回 an `EntryDaoImpl<EntryDTOImpl>`，它是 的子类型 `EntryDao<EntryDTOImpl>`，但不是`EntryDao<EntryDTO>`，它是方法的返回类型。

**解决方案：**

我相信您想将`getEntryDao`方法的返回类型更改为

`EntryDAO<? extends EntryDTO>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:28:01.677

只需将返回类型从 更改`EntryDao<T>`为`EntryDao<? extends T>`。这样就可以了：

```
@Override
public <T extends EntryDto> EntryDao<? extends T> getEntryDao() {
    try {
        return new EntryDAOImpl<EntryDTOImpl>();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return dao;
} 
```

现在作为一个理由，假设`EntryDao<T>`有返回的`T`方法

```
T load(Serializable id); 
```

和接受`T`类似的方法

```
void save(T t); 
```

现在假设`PersonDTO extends EntryDTO`和 `CarDTO extends EntryDTO`。

如果`EntryDao<EntryDTO>`可从 分配`EntryDao<EntryDTOImpl>`，它也将是可分配形式`EntryDao<PersonDTO>`和 `EntryDao<CarDTO>`。

然后你可以这样做：

```
EntryDao<EntryDTO> x = new EntryDao<PersonDTO>();       // currently this is a compile time error 
```

如果这是合法的，你可以这样做：

```
x.save(new CarDTO());   // a run time error, because x can only save Persons, not Cars 
```

But what is `EntryDao<? extends EntryDTO>`? It is just EntryDao with all `T`-accepting methods like `save(T)` removed.

# mysql - 在 SQL 选择中放置空格

> ID：12594091
> 
> 赞同：1
> 
> 时间：2012-09-26T03:19:03.033
> 
> 标签：mysql, sql

我在 SQL 中创建月份->计数选择查询时遇到了困难。

基本上，我有一个条目列表，所有条目都有一个与之关联的日期。我想要的最终结果是一个包含 12 行（每个月一个）的列表，每行将包含月份编号（1 表示 1 月，2 表示 2 月等），以及有多少条目的计数该月设置为日期。像这样的东西：

```
Month - Count
1     - 12
2     - 0
3     - 7
4     - 0
5     - 9
6     - 0 
```

我可以获得包含计数高于 0 的月份的结果，但如果月份不包含任何条目，则不会创建该行。我只是通过做得到这个结果

```
SELECT Month(goalDate) as monthNumber, count(*) as monthCount 
FROM goalsList 
WHERE Year(goalDate) = 2012 
GROUP BY Month(goalDate) 
ORDER BY monthNumber 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:30:54.500

试试这样的，

```
SELECT a.monthNo, COUNT(b.goalDate)
FROM (
        SELECT 1 monthNo UNION SELECT 2 monthNo
          UNION
        SELECT 3  monthNo UNION SELECT 4 monthNo
          UNION
        SELECT 5  monthNo UNION SELECT 6 monthNo
          UNION
        SELECT 7  monthNo UNION SELECT 8 monthNo
          UNION
        SELECT 9  monthNo UNION SELECT 10 monthNo
          UNION
        SELECT 11  monthNo UNION SELECT 12 monthNo
      )  a LEFT JOIN goalsList b
            ON a.monthNo = CAST(month(b.goalDate) as SIGNED)
GROUP BY a.monthNo
ORDER BY a.monthNo; 
```

*想法是在临时*表中创建月份编号的记录列表，并将其与表连接起来`goalsList`。（*假设 OP 没有月份数字表*）

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/752a8/1)

# java - 如何使用杰克逊创建这个 json 字符串？

> ID：12594095
> 
> 赞同：10
> 
> 时间：2012-09-26T03:19:17.150
> 
> 标签：java, json, jackson

这是我想要的输出

```
{"node":{"type":"community","field_incentives":{"und":[{"value":"fun"},{"value":"nice"}]},"field_community_email":{"und":[{"value":"some@one.com"}]}}} 
```

这是我的代码，但它似乎没有生成上面的输出。如果有更好更简单的方法可以做到这一点，请告诉我。谢谢

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
JsonFactory f = new JsonFactory();
JsonGenerator g = f.createJsonGenerator(outputStream);
g.writeStartObject();
g.writeObjectFieldStart("node");
g.writeStringField("type", "community");
g.writeObjectFieldStart("field_incentives");
g.writeFieldName("und");
g.writeStartArray();
???I don't know how to make [{"value":"fun"},{"value":"nice"}]
g.writeEndArray();
g.writeEndObject();
g.close(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T04:02:25.157

我只是逐行写入您的输出 json 文件[Reference JsonGenerator](http://www.mkyong.com/java/jackson-streaming-api-to-read-and-write-json/)。希望它会有所帮助。

```
import java.io.File;
import java.io.IOException;
import org.codehaus.jackson.JsonEncoding;
import org.codehaus.jackson.JsonFactory;
import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.JsonGenerator;
import org.codehaus.jackson.map.JsonMappingException;

public class CopyOfJacksonStreamExample {
   public static void main(String[] args) {

     try {

    JsonFactory jfactory = new JsonFactory();

    /*** write to file ***/
    JsonGenerator jGenerator = jfactory.createJsonGenerator(new File(
            "c:\\user.json"), JsonEncoding.UTF8);
    jGenerator.writeStartObject(); // {

    jGenerator.writeObjectFieldStart("node"); // node: {
    jGenerator.writeStringField("type", "community"); // "type" : "community"

    jGenerator.writeObjectFieldStart("field_incentives"); // "field_incentives" : {
    jGenerator.writeFieldName("und"); // "und" :
    jGenerator.writeStartArray(); // [
    jGenerator.writeStartObject(); // {
    jGenerator.writeStringField("value", "fun"); // "value" : "fun"
    jGenerator.writeStringField("value", "nice"); // "value" : "nice"
    jGenerator.writeEndObject(); // }
    jGenerator.writeEndArray(); // ]
    jGenerator.writeEndObject(); // } end of field_incentives

    jGenerator.writeObjectFieldStart("field_community_email"); // "field_community_email" : {
    jGenerator.writeFieldName("und"); // "und" :
    jGenerator.writeStartArray(); // [
    jGenerator.writeStartObject(); // {
    jGenerator.writeStringField("value", "some@one.com"); // "value" : "fun"
    jGenerator.writeEndObject(); // }
    jGenerator.writeEndArray(); // ]
    jGenerator.writeEndObject(); // } end of field_community_email

    jGenerator.writeEndObject(); // } end of node
    jGenerator.writeEndObject(); // }

    jGenerator.close();

     } catch (JsonGenerationException e) {

    e.printStackTrace();

     } catch (JsonMappingException e) {

    e.printStackTrace();

     } catch (IOException e) {

    e.printStackTrace();

     }

   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:51:24.353

使用 POJO
**主要**

```
public class Main {

    private Node node;

    // getters/setters 
```

**节点**

```
public class Node {

    private String type;

    private FieldIncentives field_incentives;

    private FieldIncentives field_community_email;

    // getters/setters 
```

**现场激励**

```
public class FieldIncentives {

    private List<Holder> und;

    // getters/setters 
```

**持有者**

```
public class Holder {

    private String value;

    // getters/setters 
```

用法

```
final ObjectMapper o = new ObjectMapper();
final Main m = o.readValue(new File("exampleJson.json"), Main.class); 
```

# ruby-on-rails - 如何关闭 Rack 应用程序？

> ID：12594098
> 
> 赞同：2
> 
> 时间：2012-09-26T03:19:49.570
> 
> 标签：ruby-on-rails, ruby, linux, sinatra, rack

我想通过发送如下 HTTP 请求来关闭 Sinatra 应用程序：

```
get '/shutdown'
   # need some code here to stop the app
end 
```

这怎么能下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:33:43.207

假设这仅在一个进程中运行，您可以简单地使用`Kernel.exit`. 如果您想调用 Sinatra 关闭处理程序，您可以尝试`Process.kill("TERM", Process.pid)`将 SIGTERM 发送到当前进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:35:17.213

请参阅[内核::退出！](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exit-21)：

```
get '/shutdown' do
  exit!
end 
```

# c++ - 无法将类型转换为类型* - C++ 编译错误

> ID：12594100
> 
> 赞同：0
> 
> 时间：2012-09-26T03:20:01.073
> 
> 标签：c++, compiler-errors

我正在尝试创建一个“T”类型的动态数组，其中包含一个“X”类型的数组。为了从 X 访问 T 的属性，我尝试在 struct X 中创建一个指向 T 的指针。这是我拥有的代码：

```
struct WireSeg; // Forward declaration

struct Track { // Type X in above description
    int trackNum;
    bool used;
    WireSeg* parentWireSeg;
};

struct WireSeg { // Type T in above description
    int xCoord; 
    int yCoord;
    char flag;
    char orientation;
    Track* track;
};

typedef WireSeg* WireSegPtr

int main (void) {
  WireSegPtr wireSeg;
  wireSeg = new WireSeg[5];
  for (int i =0; i<5; i++) {
    wireSeg[i].track = new Track[3];
    for (int j =0; j<3; j++) {
      wireSeg[i].track[j].parentWireSeg = wireSeg[i];
    }
  }
} 
```

我得到编译错误：

> 错误：无法在分配中将 'WireSeg' 转换为 'WireSeg*'

我不明白。`parentWireSeg`已被声明为`WireSeg`类型指针并且`wireSeg[i]`也是`wireSeg`数组中的一个元素并且是一个指针（不是吗？）。

我尝试使用它并声明`parentWireSeg`为 type `WireSeg`：

```
struct Track {
    int trackNum;
    bool used;
    bool flag;
    WireSeg parentWireSeg;
}; 
```

这给了我错误：

> “struct Track”没有名为“parentWireSeg”的成员。

这对我来说也没有任何意义，因为 struct`Track`确实有`parentWireSeg`一个元素！有人可以解释一下吗？我不允许有一个指向的指针`Track`吗`WireSeg`？

我可能可以为此使用继承的类（可以吗？），但如果有人告诉我我的方法有什么问题，我更愿意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:24:20.950

尝试将您进行分配的行更改为：

```
wireSeg[i].track[j].parentWireSeg = &wireSeg[i]; 
```

你看，wireSeg 是 type `WireSeg*`，所以当你通过`*wireSeg`or `wireSeg[0]`or取消引用它时`wireSeg[i]`，你会得到 type 的东西`WireSeg`。如果你想要对象的地址而不是对象本身，那么你可以做一个指针，你需要添加地址运算符（&）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:27:11.580

> wireSeg[i] 也是 wireSeg 数组中的一个元素并且是一个指针（不是吗？）。

不，`wireSeg[i]`is 是 a `wireSeg`，而不是指向 a 的指针`wireSeg`。

例如，如果你有一个`int foo[4] = {1, 2, 3, 4}`，那么`foo[0]`将是一个`int`，而不是一个`int *`，对吧？

你需要`&wireSeg[i]`得到一个指针；或者只是`wireSeg + i`， as`wireSeg`可以看作是一个指针，加法`i`和获取 element 的地址是一回事`i`。

# c# - 功能：计算速度、时间、距离（双类型变量）

> ID：12594104
> 
> 赞同：3
> 
> 时间：2012-09-26T03:21:16.197
> 
> 标签：c#

我创建了一个程序，当按下计算按钮时，将使用总行驶距离和总行驶小时数计算平均速度，并将其乘以从纽约市到迈阿密的时间以获得距离纽约市到迈阿密。单击按钮`Label1`后将报告速度、时间和距离，`Clear_textBox()`并将清除所有文本框字段。问题是我没有得到任何结果，而是错误。

有人可以指导我对代码进行更改吗？

我收到错误`Display_Results`和属性的功能`private double get_Time`

```
 namespace form1
   {
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private double Calculate_Velocity()
    {
        //Calculate Velocity
        int startingMileageBox;
        startingMileageBox = Convert.ToInt32(textBox1.Text);

        int endingMileageBox;
        endingMileageBox = Convert.ToInt32(textBox2.Text);

        double time = Get_Time(); //assuming you have set up GetTime()
        double distance = endingMileageBox - startingMileageBox;
        return distance / time; 
    }

   public double Get_Time()
    {
        //Get Time
        return get_Time;
    }

    private double Calculate_Distance(double velocity, double time)
    {
        //Calculate Distance
        return velocity * time;
    }

    private void Display_Results(double velocity, double time, double distance)
    {
        //Display Results
        label1.Text = "Velocity = " + velocity.ToString() + " time= " + time.ToString() + " Distance = " + distance.ToString();
    }

    private void Clear_Textboxes()
    {
        //Clear textboxes
        textBox1.Clear();
        textBox2.Clear();
        textBox3.Clear();
        textBox4.Clear();
    }

    // Property to GetTime
    private double get_Time
    {

        get
        {

            // variable to hold time
            double time = double.MinValue;

            // Safely parse the text into a double
            if (double.TryParse(textBox3.Text, out time))
            {
                return time;
            }

            // Could just as easily return time here   
            return double.MinValue;
        }
        set
        {
            // Set tbTime
            textBox3.Text = value.ToString();
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button2_Click(object sender, EventArgs e)
    {
        Close(); 
    }

    private void button1_Click(object sender, EventArgs e)
    {
        double v = Calculate_Velocity();
        double t = Get_Time();

        double d = Calculate_Distance(v, t);
        Display_Results(v, t, d);

        Clear_Textboxes();

    }
} 
```

}

**形式**

![在此处输入图像描述](../Images/a1829cbdcca09caa844eca385b404a84.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T03:29:19.540

我认为错误在这个函数中

```
private double Display_Results(double velocity, double time, double distance)
            {
                //Display Results
                label1.Text = time + velocity + distance;
            } 
```

请将时间+速度+距离值转换为字符串格式。

尝试关注

```
private double Display_Results(double velocity, double time, double distance)
            {
                //Display Results
                double v=-velocity;
                double t=-time;
                double d=-distance;

                label1.Text = (t + v + d).ToString();
            } 
```

# ios - 单击披露指示器按钮后如何转到第二个视图控制器

> ID：12594112
> 
> 赞同：0
> 
> 时间：2012-09-26T03:22:22.480
> 
> 标签：ios, uiviewcontroller, mkmapview, mkannotation

我想从 mapview 中删除现有的注释。Scenerio 是单击现有的注释标注部分（disclosureindicator 按钮），它将引导用户到另一个视图控制器并显示一个按钮，您可以删除选定的注释。实际上，我正在努力创建完全相同的谷歌地图应用程序，这是我现在正在努力的部分。任何帮助，将不胜感激！![在此处输入图像描述](../Images/a7971382322a52a73f46eb33a2048b61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:32:30.827

MKMapView 类有两个方法你需要添加/删除注释：

```
addAnnotation: id <MKAnnotation>
removeAnnotation: id <MKAnnotation> 
```

您将创建一个实现协议 MKAnnotation 的类。这是另一个 SO 问题中的示例：[MKAnnotation，简单示例](https://stackoverflow.com/questions/6495419/mkannotation-simple-example)

# iphone - 导航栏按钮的 UIWebView

> ID：12594114
> 
> 赞同：0
> 
> 时间：2012-09-26T03:23:00.640
> 
> 标签：iphone, ios, xcode, cocoa-touch, uiview

我在 iOS 上导航栏右上角的按钮有问题：

我有一个按钮，可以从应用程序本身启动 app.html 文件并显示在当前视图的顶部，并且可以使用 dDone 按钮将弹出的 webview 最小化，

我在执行此操作时遇到问题，如何在当前视图之上调用 UIWebView 并允许它从 app 目录启动 app.html 页面。

目前我有：

```
- (BOOL)webView:(UIWebView *)webViewer shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

} 
```

这是一个调用该功能的按钮

```
UIBarButtonItem *showAppMenu = [[UIBarButtonItem alloc] initWithTitle:@"Help" style:UIBarButtonItemStylePlain target:self action:@selector(webView)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:34:41.763

这可能是一个很好的起点，它将告诉您将 html 文件从本地源加载到 WebView 中需要了解的内容：

[在 WebView 中单击链接时加载本地 HTML 文件](https://stackoverflow.com/questions/4214906/load-local-html-file-when-link-is-clicked-in-webview)

要创建 UIWebView 对象本身，您可能会考虑将其构建到您的 XIB 文件或故事板中，以便您可以轻松地将其链接到插座，而不是通过代码创建它。

# ruby - 将帖子数据传递到 Sinatra 中的其他页面

> ID：12594126
> 
> 赞同：5
> 
> 时间：2012-09-26T03:25:00.233
> 
> 标签：ruby, sinatra

这似乎工作正常：

意见/index.haml：

```
%form{:method => 'POST' :action => '/'}
  %label{:for => 'name'} Name:
    %input{:type => 'text, :value => @values[:name] || ""}
  %input{:type => 'submit'} 
```

应用程序.rb：

```
post '/' do
  @values = params
  haml :review
end 
```

意见/评论.rb

```
Hello #{params[:name]}! 
```

但是，当我尝试将我的发布数据发送到不同 URL 上的同一视图时，我收到错误，或者换句话说：

应用程序.rb：

```
post '/' do
  @values = params
  redirect '/review'
end

get '/review' do
  @values = params
  haml :review
end 
```

数据没有通过，但没有引发错误。

如何在这样的页面之间发送发布数据？理想情况下，我不想创建数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T03:57:40.340

您可以将参数存储在会话中或显式指定查询字符串。[来自 Sinatra 文档的浏览器重定向](http://www.sinatrarb.com/intro.html#Browser%20Redirect)

如文档中所述，您可以使用会话或将 POST 参数转换为查询字符串并在`redirect`方法中使用它。一个粗略的例子是：

假设`'/'`块内的 POST 参数哈希是：

```
{
  :name => "Whatever",
  :address => "Wherever"
} 
```

这个散列可以做成这样的字符串：

```
query = params.map{|key, value| "#{key}=#{value}"}.join("&")
# The "query" string now is: "name=Whatever&address=Wherever" 
```

现在在里面使用这个`post '/' do`

```
redirect to("/review?#{query}") 
```

# c# - 瓷砖系统和瓷砖绘图

> ID：12594130
> 
> 赞同：0
> 
> 时间：2012-09-26T03:25:52.003
> 
> 标签：c#, xna

我正在尝试制作一个自动类型的瓷砖系统来根据我的 Texture Atlas 绘制我的 int[,] tileMap 但是当我运行代码时，我得到了整个东西并且纹理没有出现，我知道它的唯一方法是横向是因为用于绘制纹理的“颜色颜色”与 ClearScreen 的颜色不同。

# 平铺分类类：

```
 public Texture2D Texture { get; set; }
    public int Rows { get; set; }
    public int Columns { get; set; }
    public int totalTiles;
    public int _tileWidth;
    public int _tileHeight;
    public int[] tiles;
    public int[,] tileMap = new int[,] {
            {0,0,0,0,0,0,2,0,0,0,},
            {0,0,0,0,0,2,2,0,0,0,},
            {0,0,0,0,0,2,0,0,0,0,},
            {0,0,0,0,0,2,0,0,0,0,},
            {0,0,0,2,2,2,0,0,0,0,},
            {0,0,0,2,0,0,0,0,0,0,},
            {0,0,0,2,0,0,0,0,0,0,},
            {0,0,2,2,0,0,0,0,0,0,},
            {0,0,2,0,0,0,0,0,0,0,},
            {0,0,2,0,0,0,0,0,0,0,}
    };

    public Tile(Texture2D texture, int tileWidth, int tileHeight)
    {
        _tileWidth = tileWidth;
        _tileHeight = tileHeight;
        Texture = texture;
        totalTiles = Rows * Columns;

    }

    public void Update() {

    }

    public void Draw(SpriteBatch spriteBatch, Vector2 location)
    {

        for (int row = 0; row < tileMap.GetLength(1); row++) {

            for (int col = 0; col < tileMap.GetLength(0); col++) {

                switch (tileMap[row, col]) {
                    case 0:
                        spriteBatch.Draw(Texture, new Rectangle(row * _tileWidth, col * _tileHeight, _tileWidth, _tileHeight), new Rectangle(1 * _tileWidth, 1 * _tileHeight, _tileWidth, _tileHeight), Color.Transparent);
                        break;
                    case 2:
                        spriteBatch.Draw(Texture, new Rectangle(row * _tileWidth, col * _tileHeight, _tileWidth, _tileHeight), new Rectangle(2 * _tileWidth, 2 * _tileHeight, _tileWidth, _tileHeight), Color.Transparent);
                        break;
                    default:
                        break;
                }

            } 
```

# 主班

```
public class Main : Microsoft.Xna.Framework.Game {
    // Basic code for drawing.
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Tile test;
    Texture2D texturePack;

    public Main() {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize() {

        base.Initialize();
    }

    protected override void LoadContent() {
        spriteBatch = new SpriteBatch(GraphicsDevice);

        texturePack = Content.Load<Texture2D>("AxiomTileSheet");
        test = new Tile(texturePack, 8, 8);
    }

    protected override void UnloadContent() {
    }

    protected override void Update(GameTime gameTime) {

        if (Keyboard.GetState().IsKeyDown(Keys.Escape))
            this.Exit();

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime) {
        GraphicsDevice.Clear(Color.White);

        spriteBatch.Begin();
        test.Draw(spriteBatch);
        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:47:33.950

这

```
switch (tileMap[row, col]) 
```

应该

```
switch (tileMap[col, row]) 
```

当您使用 col 表示 x 值并使用 row 表示 y 时。

您还需要在矩形计算中切换它。

基于我的经验的另一个性能提示（正如 Andrew 提到的那样，这可能在每种情况下都不值得）而不是每帧创建新的矩形，而是在 Tile 类中定义 2 个矩形，并且每帧只更改 x 和 y 值

浮动

编辑：颜色问题==============================

您可以通过使用完全摆脱 switch case 构造

```
public void Draw(SpriteBatch spriteBatch)
        {
    for (int row = 0; row < tileMap.GetLength(1); row++) {
        for (int col = 0; col < tileMap.GetLength(0); col++)
            {
                        spriteBatch.Draw(_texture, new Rectangle(row * _tW, col * _tH, _tW, _tH), new Rectangle(tileMap[row, col] * _tW, tileMap[row, col] * _tH, _tW, _tH), Color.White);
            }
        }
        } 
```

注意：_tH=_tileHeight, _tW=_tileWidth 我对此进行了测试，它对我来说就像一个魅力；）如果您想保留开关盒，请确保将 Color.White 设置为您的着色颜色（最后一个 spritebatch 参数）。并且您需要更正开关盒的值，因为您在地图定义中使用 0 和 2，但在开关盒中使用 0 和 1。将案例扩展到 3 个（因为您现在似乎有 4 个图块）也对我有用。

所以我认为你的问题是基于错误的颜色和案例结构中的错字。

希望这可以帮助 ：）

# ruby-on-rails - if else 在haml中循环

> ID：12594138
> 
> 赞同：0
> 
> 时间：2012-09-26T03:26:59.733
> 
> 标签：ruby-on-rails, haml

我有一个看起来像这样的haml代码（它比这更复杂，所以这种方法是我唯一的出路）。这是使用 twitter 引导框架。

```
-if <condition>
  .tab-pane.big-tab-pane.active#profile_pane
-else
  .tab-pane.big-tab-pane#profile_pane

  .. followed by the tab-pane code. 
```

现在的问题是该代码仅作为 else 循环的一部分被调用，而不是 if 循环的一部分，因为缩进与 else 循环部分一起。如何使用 haml 进行这项工作，以便使用 if/else 子句而不是其他窗格 HTML 修改唯一的 .active 部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:30:28.920

尝试使用：

```
.tab-pane.big-tab-pane{:class => ("active" if condition)} 
```

# objective-c - 经纬度的 iOS 位置

> ID：12594140
> 
> 赞同：0
> 
> 时间：2012-09-26T03:27:19.980
> 
> 标签：objective-c, ios, location, latitude-longitude

我是 iOS 开发的新手。我有纬度和经度的值。我想使用纬度和经度来获取位置的名称？在iOS中是否可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:31:34.523

是的，它可能称为[反向地理编码](http://en.wikipedia.org/wiki/Reverse_geocoding)。您需要先导入`CoreLocation`框架，然后[`CLGeocoder`](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)在 iOS5（及更高版本）中使用。对于 iOS4 及以下的`mkreversegeocoder`. 以下是使用 `CLGeocoder 获取地址的方法，只需将位置对象提供给它，它就会完成剩下的工作。

```
[self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler: 
     ^(NSArray *placemarks, NSError *error) {

         //Get nearby address
         CLPlacemark *placemark = [placemarks objectAtIndex:0];

         //String to hold address
         NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];

         //Print the location to console
         NSLog(@"I am currently at %@",locatedAt);

     }]; 
```

您获得的`placemarks`数组是[`CLPlacemark`](http://developer.apple.com/library/IOs/#documentation/CoreLocation/Reference/CLPlacemark_class/Reference/Reference.html)对象的实例。IT 让您可以访问 -

```
Accessing the Placemark Attributes
  name  property
  addressDictionary  property
  ISOcountryCode  property
  country  property
  postalCode  property
  administrativeArea  property
  subAdministrativeArea  property
  locality  property
  subLocality  property
  thoroughfare  property
  subThoroughfare  property
  region  property 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:51:21.670

另一种简单的方法是使用 Google map rest api，对以下 url 进行 web 服务调用，它将返回一个包含位置详细信息的 json

[http://maps.googleapis.com/maps/api/geocode/json?latlng=10.03,10.03&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=10.03,10.03&sensor=false)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T03:32:35.100

是的。您可以[`CLGeocoder`](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)用于 iOS5 及更高版本。

[`MKReverseGeocoder`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKReverseGeocoder_Class/Reference/Reference.html)如果您必须支持以前的操作系统版本，则可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T03:47:55.183

除了 MKReverseGeocoder，我推荐你使用 google api。我在我的应用程序中使用它，没有崩溃和快速响应。

# mysql - Rails 3 MySQL 2 报告看似有效的 SQL 语法错误

> ID：12594144
> 
> 赞同：1
> 
> 时间：2012-09-26T03:27:54.140
> 
> 标签：mysql, ruby-on-rails, rake, mysql2

我正在尝试使用以下代码来帮助为我的数据库播种。我需要在开发过程中不断添加数据，并且不希望每次向 seed.rb 文件添加新内容时都必须完全重新植入数据。因此，如果数据不存在，我添加了以下函数来插入数据。

```
def AddSetting(group, name, value, desc)
    Admin::Setting.create({group: group, name: name, value: value, description: desc}) unless Admin::Setting.find_by_sql("SELECT * FROM admin_settings WHERE group = '#{group}' AND name = '#{name}';").exists?
end

AddSetting('google', 'analytics_id', '', 'The ID of your Google Analytics account.')
AddSetting('general', 'page_title', '', '')
AddSetting('general', 'tag_line', '', '') 
```

该函数包含在 db/seeds.rb 文件中。这是正确的方法吗？

但是，当我尝试通过 rake 运行它时出现以下错误。

```
rake aborted!
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'group = 'google' AND name = 'analytics_id'' at line 1: SELECT * FROM admin_settings WHERE group = 'google' AND name = 'analytics_id';

Tasks: TOP => db:seed
(See full trace by running task with --trace)

Process finished with exit code 1 
```

令我困惑的是，据我所知，我正在生成正确的 SQL。事实上，我的代码生成了 SQL，然后我将它传递给模型的 find_by_sql 函数，Rails 本身不能更改 SQL，或者是吗？

```
SELECT * FROM admin_settings WHERE group = 'google' AND name = 'analytics_id'; 
```

这些年来，我写了很多 SQL，并且在这里查看了类似的问题。也许我错过了一些东西，但我看不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:36:15.287

“组”是一个关键字，因此您不能将其按原样用作标识符，您必须用反引号将其引用（至少对于 MySQL）：

```
SELECT *
FROM admin_settings
WHERE `group` = 'google'
  AND name    = 'analytics_id' 
```

Rails/ActiveRecord 生成的任何 SQL 都将使用列名的引用版本，所以我猜您正在生成一些 SQL（或只是 WHERE 子句的 SQL 片段）而忽略引用列名。

我建议不要将`group`其用作列名，而是使用其他名称，这样您就不必担心在代码中到处都是反引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:36:00.960

`group`如果不加引号，则为无效字段名称，因为它是 SQL 关键字。要解决此问题，请在 find_by_sql 查询中用反引号将其括起来，这样您的数据库就不会尝试将其解释为 GROUP 关键字。

# android - 在 Eclipse 中打开 Android XML 布局的快捷方式

> ID：12594145
> 
> 赞同：3
> 
> 时间：2012-09-26T03:28:05.750
> 
> 标签：android, eclipse, shortcut

例如，如果我有类似的东西

```
setContentView(R.layout.activity_main); 
```

会有快捷方式打开`activity_main.xml`吗？如果没有，有没有办法创建一个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T04:57:59.467

在那里。只需按住`Ctrl`并将光标移动到该`activity_main`行的单词上`setContentView(R.layout.activity_main);`，它将提供两个选项，一个用于打开 xml 布局，另一个用于打开`R.java`文件中的声明。这是轻松打开 XML 布局的快捷方式。

干杯!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T04:43:42.167

这不完全是一个快捷方式，但您可以突出显示该行`activity_main`上的部分，`setContentView(R.layout.activity_main);`然后按**Ctrl+Shift+R**。

显示的“打开资源”对话框应该`activity_main.xml`（以及其他`activity_main`名称中包含的文件）位于列表顶部。只需按 Enter 键即可打开您想要的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:01:21.610

实际上它是一个`id`. 当您自动创建该文件时`XML file in android`，该文件已由 Android 提供了一个 id，您可以在其中找到它`gen folder`并且类名为`R.java`. 因此，如果您想查看该文件，您必须打开`res folder -> layout folder -> there you can see that xml file`.

但是您可以按照**@joe**或**@Spk**的建议进行操作。Spk 的解决方案要好得多。所以欢呼。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T21:07:02.803

如果您打开了类文件而不是 java 文件，它可能无法正常工作。但是在 java 文件中，按 windows 上的 control 或 mac 上的命令，然后将鼠标悬停在元素上以进行导航。

# objective-c - 将值从 NSDictionary 分配给 NSManagedObject

> ID：12594147
> 
> 赞同：1
> 
> 时间：2012-09-26T03:28:15.707
> 
> 标签：objective-c, core-data, nsdictionary, nsmanagedobject

当设备连接到 WiFi 时，我的应用程序需要从 .Net WCF 服务获取数据。如果服务器上添加了新行，则应将其添加到其 CoreData 数据库中。我正在使用 NSDictionary 将本地对象与远程对象进行比较。代码是：

```
-(void)handleGetAllCategories:(id)value
{
    if([value isKindOfClass:[NSError class]])
    {
        NSLog(@"This is an error %@",value);
        return;
    }

    if([value isKindOfClass:[SoapFault class]])
    {
        NSLog(@"this is a soap fault %@",value);
        return;
    }

    NSMutableArray *result = (NSMutableArray*)value;
    NSMutableArray *remoteObj = [[NSMutableArray alloc]init];

    for (int i = 0; i < [result count]; i++)
    {
        EDVCategory *catObj = [[EDVCategory alloc]init];
        catObj = [result objectAtIndex:i];
        [remoteObj addObject:catObj];
    }

    NSArray *remoteIDs = [remoteObj valueForKey:@"categoryId"];

    NSFetchRequest  *request = [[[NSFetchRequest alloc] init]autorelease];
    request.predicate = [NSPredicate predicateWithFormat:@"categoryId IN %@", remoteIDs];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Categories" inManagedObjectContext:__managedObjectContext];
    [request setEntity:entity];
    NSMutableArray *results = [[NSMutableArray alloc]initWithArray:[__managedObjectContext executeFetchRequest:request error:nil]];

    NSArray *existingIDs = [results valueForKey:@"categoryId"];
    NSDictionary *existingObjects = [NSDictionary dictionaryWithObjects:results forKeys:existingIDs];

    for (NSDictionary *remoteObjectDic in remoteObj) 
    {
        Categories *existingObject = [existingObjects objectForKey:[remoteObjectDic valueForKey:@"categoryId"]];

        if (existingObject) 
        {
            NSLog(@"object exists");
        } 
        else 
        {
            NSLog(@"create new local object");
//            Categories *newCategory;
//            newCategory = [NSEntityDescription insertNewObjectForEntityForName:@"Categories" inManagedObjectContext:__managedObjectContext];           
//            [newCategory setCategoryId:[NSNumber numberWithInt:[[remoteObjectDic objectForKey:@"categoryId"]intValue]]];
//            [newCategory setCategoryName:[remoteObjectDic objectForKey:@"categoryName"]];  
//            [newCategory setDocCount:[NSNumber numberWithInt:[[remoteObjectDic objectForKey:@"docCount"]intValue]]];
//            [newCategory setCategoryType:[NSNumber numberWithInt:[[remoteObjectDic objectForKey:@"categoryType"]intValue]]];
//            [newCategory setSubCategoryId:[NSNumber numberWithInt:[[remoteObjectDic objectForKey:@"subCategoryId"]intValue]]];
//            [__managedObjectContext insertObject:newCategory];
        }
    }
[my_table reloadData];
} 
```

问题是，我无法从远程对象中提取值并将其分配给 NSManagedObject。我已经注释了（根据我）应该将新对象中的值保存到托管对象的代码。有人可以帮我实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:50:13.893

这是我在最近的项目中所做的保存示例。我在包装器中有一些东西，所以获取托管对象并保存看起来有点奇怪。实际上，我看到的唯一主要区别是储蓄行为。您是否将新的 NSManagedObject 保存在代码的其他位置？

```
dict = (NSDictionary*)data;
        @try {
            if (dict) {
                CaretakerInfo* info = [GenericDataService makeObjectWithEntityName:NSStringFromClass([CaretakerInfo class])];
                [info setName:[dict valueForKey:@"name"]];
                [info setImageURL:[dict valueForKey:@"photo"]];
                [info setCaretakerID:[dict valueForKey:@"id"]];
                [GenericDataService save];
            }
            else {
                theError = [Error createErrorMessage:@"No Data" Code:-42];
            }
        }
        @catch (NSException *exception) {
            //return an error if an exception
            theError = [Error createErrorMessage:@"Exception Thrown While Parsing" Code:-42];
        } 
```

如果不是，它应该看起来像这样......

```
 NSError *error = nil;
     [context save:&error]; 
```

如果您有更多关于提取或分配有用数据（错误/警告/日志消息）时发生的情况的信息。

# python - 跳过 -with- 块的执行

> ID：12594148
> 
> 赞同：32
> 
> 时间：2012-09-26T03:28:32.773
> 
> 标签：python, with-statement, skip

我正在定义一个上下文管理器类，如果在实例化过程中满足某些条件，我希望能够跳过代码块而不引发异常。例如，

```
class My_Context(object):
    def __init__(self,mode=0):
        """
        if mode = 0, proceed as normal
        if mode = 1, do not execute block
        """
        self.mode=mode
    def __enter__(self):
        if self.mode==1:
            print 'Exiting...'
            CODE TO EXIT PREMATURELY
    def __exit__(self, type, value, traceback):
        print 'Exiting...'

with My_Context(mode=1):
    print 'Executing block of codes...' 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T03:54:27.110

根据[PEP-343](http://www.python.org/dev/peps/pep-0343/)，`with`声明翻译自：

```
with EXPR as VAR:
    BLOCK 
```

到：

```
mgr = (EXPR)
exit = type(mgr).__exit__  # Not calling it yet
value = type(mgr).__enter__(mgr)
exc = True
try:
    try:
        VAR = value  # Only if "as VAR" is present
        BLOCK
    except:
        # The exceptional case is handled here
        exc = False
        if not exit(mgr, *sys.exc_info()):
            raise
        # The exception is swallowed if exit() returns true
finally:
    # The normal and non-local-goto cases are handled here
    if exc:
        exit(mgr, None, None, None) 
```

如您所见，从调用`__enter__()`上下文管理器的方法可以跳过`BLOCK`with 语句的主体（“”），没有什么明显可以做的。

[人们已经在withhacks](http://pypi.python.org/pypi/withhacks)`__enter__()`等项目中完成了特定于 Python 实现的事情，例如在. 我记得 Alex Martelli 在一两年前在 stackoverflow 上发布了一个非常有趣的 with-hack（不记得足够多的帖子来搜索和找到它）。

但是对您的问题/问题的简单回答是，您不能按照您的要求做，跳过 with 语句的主体，而不诉诸所谓的“深层魔法”（这在 python 实现之间不一定可移植）。使用深奥的魔法，你也许可以做到，但我建议只做一些练习，看看它是如何完成的，而不是在“生产代码”中。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-26T04:56:36.833

[如果您想要一个使用withhacks](http://pypi.python.org/pypi/withhacks)（特别是来自[AnonymousBlocksInPython](http://code.google.com/p/ouspg/wiki/AnonymousBlocksInPython) ）的想法的临时解决方案，这将起作用：

```
import sys
import inspect

class My_Context(object):
    def __init__(self,mode=0):
        """
        if mode = 0, proceed as normal
        if mode = 1, do not execute block
        """
        self.mode=mode
    def __enter__(self):
        if self.mode==1:
            print 'Met block-skipping criterion ...'
            # Do some magic
            sys.settrace(lambda *args, **keys: None)
            frame = inspect.currentframe(1)
            frame.f_trace = self.trace
    def trace(self, frame, event, arg):
        raise
    def __exit__(self, type, value, traceback):
        print 'Exiting context ...'
        return True 
```

比较以下内容：

```
with My_Context(mode=1):
    print 'Executing block of code ...' 
```

和

```
with My_Context(mode=0):
    print 'Executing block of code ... ' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-02-19T11:40:33.287

[来自withhacks](http://pypi.python.org/pypi/withhacks)的其他答案（特别是来自[AnonymousBlocksInPython](http://code.google.com/p/ouspg/wiki/AnonymousBlocksInPython) ）提到的 hack 的 python 3 更新 ：

```
class SkipWithBlock(Exception):
    pass

class SkipContextManager:
    def __init__(self, skip):
        self.skip = skip

    def __enter__(self):
        if self.skip:
            sys.settrace(lambda *args, **keys: None)
            frame = sys._getframe(1)
            frame.f_trace = self.trace

    def trace(self, frame, event, arg):
        raise SkipWithBlock()

    def __exit__(self, type, value, traceback):
        if type is None:
            return  # No exception
        if issubclass(type, SkipWithBlock):
            return True  # Suppress special SkipWithBlock exception

with SkipContextManager(skip=True):    
    print('In the with block')  # Won't be called
print('Out of the with block') 
```

正如 joe 之前提到的，这是一个应该避免的 hack：

> 当进入一个新的本地范围时调用方法 trace() ，即当您的 with 块中的代码开始时。当此处引发异常时，它会被**exit** () 捕获。这就是这个黑客的工作原理。我应该补充一点，这在很大程度上是一种 hack，不应该依赖它。神奇的 sys.settrace() 实际上并不是语言定义的一部分，它恰好在 CPython 中。此外，调试器依赖 sys.settrace() 来完成他们的工作，所以自己使用它会干扰它。您不应该使用此代码的原因有很多。仅供参考。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-01-14T15:19:12.510

根据@Peter 的回答，这是一个不使用字符串操作但应该以相同方式工作的版本：

```
from contextlib import contextmanager

@contextmanager
def skippable_context(skip):
    skip_error = ValueError("Skipping Context Exception")
    prev_entered = getattr(skippable_context, "entered", False)
    skippable_context.entered = False

    def command():
        skippable_context.entered = True
        if skip:
            raise skip_error

    try:
        yield command
    except ValueError as err:
        if err != skip_error:
            raise
    finally:
        assert skippable_context.entered, "Need to call returned command at least once."
        skippable_context.entered = prev_entered

print("=== Running with skip disabled ===")
with skippable_context(skip=False) as command:
    command()
    print("Entering this block")
print("... Done")

print("=== Running with skip enabled ===")
with skippable_context(skip=True) as command:
    command()
    raise NotImplementedError("... But this will never be printed")
print("... Done") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-26T03:50:40.827

不幸的是，您尝试做的事情是不可能的。如果`__enter__`引发异常，则在`with`语句（`__exit__`未调用）处引发该异常。如果它没有引发异常，则将返回值提供给块并执行该块。

我能想到的最接近的事情是块明确检查的标志：

```
class Break(Exception):
    pass

class MyContext(object):
    def __init__(self,mode=0):
        """
        if mode = 0, proceed as normal
        if mode = 1, do not execute block
        """
        self.mode=mode
    def __enter__(self):
        if self.mode==1:
            print 'Exiting...'
        return self.mode
    def __exit__(self, type, value, traceback):
        if type is None:
            print 'Normal exit...'
            return # no exception
        if issubclass(type, Break):
            return True # suppress exception
        print 'Exception exit...'

with MyContext(mode=1) as skip:
    if skip: raise Break()
    print 'Executing block of codes...' 
```

`Break()`这也使您可以在块的中间加注`with`以模拟正常的`break`语句。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-27T17:52:44.510

上下文管理器不是正确的构造。您要求将主体执行*n*次，在本例中为零或一。如果您查看一般情况，*n*其中*n* >= 0，您最终会得到一个 for 循环：

```
def do_squares(n):
  for i in range(n):
    yield i ** 2

for x in do_squares(3):
  print('square: ', x)

for x in do_squares(0):
  print('this does not print') 
```

在您的情况下，这是更特殊的目的，并且不需要绑定到循环变量：

```
def should_execute(mode=0):
  if mode == 0:
    yield

for _ in should_execute(0):
  print('this prints')

for _ in should_execute(1):
  print('this does not') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-31T16:07:54.510

另一个略显老套的选项使用`exec`. 这很方便，因为可以对其进行修改以执行任意操作（例如，上下文块的记忆）：

```
from contextlib import contextmanager

@contextmanager
def skippable_context_exec(skip):
    SKIP_STRING = 'Skipping Context Exception'
    old_value = skippable_context_exec.is_execed if hasattr(skippable_context_exec, 'is_execed') else False
    skippable_context_exec.is_execed=False
    command = "skippable_context_exec.is_execed=True; "+("raise ValueError('{}')".format(SKIP_STRING) if skip else '')
    try:
        yield command
    except ValueError as err:
        if SKIP_STRING not in str(err):
            raise
    finally:
        assert skippable_context_exec.is_execed, "You never called exec in your context block."
        skippable_context_exec.is_execed = old_value

print('=== Running with skip disabled ===')
with skippable_context_exec(skip=False) as command:
    exec(command)
    print('Entering this block')
print('... Done')

print('=== Running with skip enabled ===')
with skippable_context_exec(skip=True) as command:
    exec(command)
    print('... But this will never be printed')
print('... Done') 
```

如果有一些东西可以摆脱 exec 而没有奇怪的副作用，那就太好了，所以如果你能想到一种方法，我会全力以赴。该问题的[当前主要答案](https://stackoverflow.com/a/12594789/851699)似乎可以做到这一点，但存在[一些问题](https://stackoverflow.com/questions/57617744/context-manager-hackery)。

# iphone - exc_badaccess 错误

> ID：12594149
> 
> 赞同：1
> 
> 时间：2012-09-26T03:29:00.027
> 
> 标签：iphone, xcode

我正在尝试创建一个按钮，该按钮将调用项目中“查看”组文件夹下的注册视图，如下所示：

```
- (void)signUp:(id)sender
{
    Registration *registration = [[Registration alloc]initWithNibName:@"Registration" bundle:nil];
    [self.view addSubview:registration.view];
} 
```

然后在我的注册视图中，我添加了一个按钮，上面写着“返回”以返回到我的上一个/主 viewController.xib

`exc_badaccess = code1`但是当我单击什么都不做/不执行任何操作的“返回”按钮时，我收到了内存错误。我正在使用 ARC。所以我没有释放或任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:35:55.603

我敢打赌，`Registration`实例在被释放后会被访问。您正在方法的本地范围内创建`Registration`实例`signup`，因此在方法退出后将其释放。

如果我的猜测是正确的，您可以通过将`Registration`实例保存在 ivar 中来解决此问题。尝试如下操作。

```
@interface ...
...
    @property (nonatomic, strong) Registration * registration;
...
@end

@implementation
...
- (void)signUp:(id)sender
{
    self.registration = [[Registration alloc]initWithNibName:@"Registration" bundle:nil];
    [self.view addSubview:self.registration.view];
} 
```

# javascript - 如何根据其他 JSON 数据选择 JSON 中的数据？Javascript

> ID：12594151
> 
> 赞同：1
> 
> 时间：2012-09-26T03:29:01.037
> 
> 标签：javascript, json

是否可以使用同一 JSON 对象中的其他数据选择 JSON 对象中的某些数据。类似于 MySQL。例如：

```
myObj = {"elements" : [ { "name" : "Hydrogen", "symbol" : "H" }, { "name" : "Silver", "symbol" : "Ag" }]}; 
```

我想选择符号为“H”的“氢气”。而不是必须放入这样的东西：

```
document.getElementByID("TEST").innerHTML = myObj.elements[0].name; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:49:25.963

在大多数情况下，Tyler Hoilen 的解决方案已经足够好了。如果您有非常大的数据，您可以尝试将数据转换为哈希表，这将提供对元素的快速访问。只要确保每个元素都有一个独特的符号。

```
function convertToHash(data) {
  var hash = {};
  for (var i = 0; i < data.length; i++) {
    hash[data[i].symbol] = data[i].name;
  }
  return hash;
}

var hash = convertToHash(myObj.elements);
document.getElementByID("TEST").innerHTML = hash["H"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:36:28.533

你可以定义一个函数来为你做这件事。

```
document.getElementByID("TEST").innerHTML = findNameBySymbol(myObj.elements, 'H');

function findNameBySymbol(elements, symbol) {
  for (var i = 0; i < elements.length; i += 1) {
    if (elements[i].symbol === symbol) {
      return elements[i].name;
    }
  }
} 
```

更好的是，如果您可以控制数据的结构，您可以像这样构建它：

```
myObj = {"H": "Hydrogen", "Ag": "Silver"}; 
```

然后查找就像`myObj['H']`.

# iphone - AVPlayer 同步使用 setRate:time:atHostTime:

> ID：12594157
> 
> 赞同：6
> 
> 时间：2012-09-26T03:30:25.237
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我的目标：在多个 iOS 设备之间完美同步地播放来自网络服务器的 MP3/AAC 文件（流式传输，而不是提前下载）。

两个问题：

1 - AVPlayer 可以流式传输现有的 MP3/AAC 文件，同时在后台继续播放下一个曲目吗？意思是，假设手机被锁定，或者另一个应用程序在前台，如果我正在播放多个 MP3/AAC 文件的列表，并且一个完成播放，下一首曲目会开始无缝播放吗？

2 - iOS6 AVPlayer中的新`setRate:time:atHostTime:`方法可以允许多个iOS设备之间同步播放吗？意思是，我想在多个 iOS 设备之间完美同步播放音频。[我在这里](http://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html#//apple_ref/occ/instm/AVPlayer/setRate%3atime%3aatHostTime%3a)阅读了文档，但这有点令人困惑，我找不到任何示例代码来了解它是如何工作的：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:41:39.483

Matt 的 AudioStreamer 是您的最佳选择，Avplayer 和 AVaudioplayer 在播放前同步下载远程 mp3 url，这需要时间。

点击[这里](http://www.cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html)

# android - 如何将 MapView 的缩放控件定位到屏幕上的不同位置？

> ID：12594168
> 
> 赞同：5
> 
> 时间：2012-09-26T03:31:23.783
> 
> 标签：android, android-mapview

android.view.View.getZoomControls() 已弃用，MapView 参考说要使用开箱即用的 setBuiltInZoomControls(boolean) 代替。但是，我不仅想*显示*缩放控件，还希望能够将其*移动*到屏幕上的不同位置，即右下角。如何获得对内置缩放控件的引用 - 不使用上述不推荐使用的方法 - 来控制其位置？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:20:19.603

我挖了一圈发现：

```
 ZoomControls controls = (ZoomControls) mapView.getZoomButtonsController().getZoomControls(); 
```

我的 Eclipse 不会对以上被弃用的任何内容发出警告。但是，当我在 MapView 参考中搜索 getZoomButtonsController 时，我没有找到这样的方法！所以，我猜，它是 API 中一个未记录但未弃用的方法。

# php - 将静态函数分配给PHP中的变量

> ID：12594173
> 
> 赞同：6
> 
> 时间：2012-09-26T03:31:50.243
> 
> 标签：php, functional-programming

我想将一个静态函数分配给一个变量，以便我可以将它作为参数发送。例如：

```
class Foo{
    private static function privateStaticFunction($arg1,$arg2){
      //compute stuff on the args          
    }

    public static function publicStaticFunction($foo,$bar){

         //works
         $var = function(){
                   //do stuff
                };

         //also works
         $var = function($someArg,$someArg2){
                   //do stuff
         };

         //Fatal error: Undefined class constant 'privateStaticFunction'                    
         $var = self::privateStaticMethod;

         //same error
         $var = Foo::privateStaticFunction;

         //compiles, but errors when I try to run $var() somewhere else, as expected
         //Fatal error: Call to private method Foo::privateStaticMethod() from context ''
         $var = function(){
             return Foo::privateStaticMethod(); 
         }; 
    }
} 
```

我尝试了更多变体，但没有一个奏效。

我什至不希望这种功能性黑客可以与 PHP 一起使用，但是嘿，谁知道呢？

是否有可能在 PHP 中做到这一点，或者我需要想出一些技巧`eval`吗？

**PS：****##php**上的 LawnGnome提到了一些关于可以做我想做的事情的事情，`array('Foo','privateStaticMethod')`但我不明白他的意思，因为他看起来很忙，所以我没有进一步催促他。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T03:35:45.587

您想将[call_user_func](http://php.net/manual/en/function.call-user-func.php)与数组参数一起使用。

```
$var = array('Foo','privateStaticMethod');
call_user_func($var); 
```

请注意，该方法上的“私有”说明符将使其只能在`Foo`类中以这种方式调用。

call_user_func 将[可调用对象](http://php.net/manual/en/language.types.callable.php)作为第一个参数。请注意，从 PHP 5.2.3 开始，您可以避免使用数组表示法。

> 静态类方法也可以在不实例化该类对象的情况下传递，方法是传递类名而不是索引 0 处的对象。从 PHP 5.2.3 开始，也可以传递 'ClassName::methodName'。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T03:47:50.287

请注意，您应该将静态变量设置为：

```
static $privateStaticMethod;

$var = self::$privateStaticMethod; 
```

`$`在使用时省略a`self::`将尝试访问类 CONSTANT 而不是变量。

实际上，我认为您的意思是：

```
//Fatal error: Undefined class constant 'privateStaticFunction'                    
$var = self::privateStaticFunction("arga", "argb"); 
```

如果你使用的是 PHP 5.4，你可以在你的`publicStaticFunction`:

```
$var = function(){
    return self::privateStaticFunction(); 
}; 

$var(); 
```

在 PHP 5.4 中，PHP 允许您`class scope`从 lambda 函数访问。

另外，你调查过`ReflectionClass`吗？

以下将用于以`call_user_func_array()`更 OOP 样式替换：

```
<?php
$rc = new ReflectionClass('SomeClass');
$class = $rc->newInstanceArgs(array('foo', 'bar'));

echo $class->doSomething(); 
```

您可以编写自己的类以使用[`ReflectionMethod`](http://php.net/manual/en/class.reflectionmethod.php)哪些实现[`ReflectionClass`](http://php.net/manual/en/class.reflectionclass.php)和使用`setAccessible()`来允许访问受保护和私有方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-10T00:44:27.777

这是我为解决问题所做的

```
class test{
  static function Unix($arr){return implode("/",$arr);}
  static function Windows($arr){return implode("\\",$arr);}
  function test(){
    $slash = "Unix";
    echo self::$slash(["path","to","a","folder"]);
  }
} 
```

# ios - UIKit 的 resignFirstResponder 几乎或完全类似于 Javascript 中的 blur()？

> ID：12594176
> 
> 赞同：0
> 
> 时间：2012-09-26T03:32:45.007
> 
> 标签：ios, uikit

我认为`resignFirstResponder`几乎就像`blur()`Javascript 一样？这就是为什么我们可以说

```
[self.firstNameTextField resignFirstResponder];
[self.lastNameTextField resignFirstResponder];
[self.phoneNumberTextField resignFirstResponder]; 
```

所有这些都是连续的，因为它只是“模糊”了自己，因此没有集中注意力。所以我们能永远记住`resignFirstResponder`几乎相同`blur()`（或者它们实际上 100% 相同吗？）。原因是每当我看到时`[aTextField resignFirstResponder]`，我总是会想到“文本字段现在正在让一些响应者辞职——而响应者是……是键盘吗？”……这有点令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:48:19.223

我不确定它是如何`blur()`工作的。这听起来像是一个非常可怕的名字，意味着改变 UI 焦点。但第一响应者是第一个有机会处理事件的对象。（它是第**一个**响应事件的——因此。）当视图被发送到 时，它不再是第一个处理事件的对象，并且**响应**者列表中的下一个响应者成为第一个响应者。详细解释它。`firstRepsonder``resignFirstResponder`[`Cocoa Event Handling Guide`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/Introduction/Introduction.html#//apple_ref/doc/uid/10000060i)

# php - MySQL 行锁定的缺点

> ID：12594178
> 
> 赞同：5
> 
> 时间：2012-09-26T03:33:13.747
> 
> 标签：php, mysql, sql, rabbitmq

我在 MySQL 中使用行锁定（事务）来创建作业队列。使用的引擎是 InnoDB。

**SQL 查询**

```
START TRANSACTION;
SELECT * 
FROM mytable 
WHERE status IS NULL 
ORDER BY timestamp DESC LIMIT 1 
FOR UPDATE;
UPDATE mytable SET status = 1;
COMMIT; 
```

根据这个[网页](http://www.engineyard.com/blog/2011/5-subtle-ways-youre-using-mysql-as-a-queue-and-why-itll-bite-you/)，

> `The problem with SELECT FOR UPDATE is that it usually creates a single synchronization point for all of the worker processes, and you see a lot of processes waiting for the locks to be released with COMMIT.`

**问题：**这是否意味着当执行第一个查询时，需要一些时间才能完成之前的事务，当第二个类似查询发生在第一个事务提交之前，它必须等待它完成才能执行查询? 如果这是真的，那么我不明白为什么单行的行锁定（我假设）会影响下一个不需要读取该锁定行的事务查询？

`UPDATE`此外，是否可以通过执行 a而不是事务来解决此问题（并且仍然实现行锁定对作业队列的效果） ？

```
UPDATE mytable SET status = 1
WHERE status IS NULL
ORDER BY timestamp DESC
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:34:38.530

如果将 FOR`UPDATE`与使用页锁或行锁的存储引擎一起使用，则查询检查的行将被写锁定，直到当前事务结束。Using`LOCK IN SHARE MODE`设置一个共享锁，允许其他事务读取检查的行，但不允许`update or delete`它们读取。关于这个查询

```
UPDATE mytable SET status = 1
WHERE status IS NULL
ORDER BY timestamp DESC
LIMIT 1 
```

自从innodb

在处理 SQL 语句的过程中自动获取锁我认为它的工作原理是一样的。

# c - 无法释放所有使用的内存

> ID：12594181
> 
> 赞同：0
> 
> 时间：2012-09-26T03:34:11.740
> 
> 标签：c, list, linked-list

自动分级机告诉我我未能释放所有使用的内存。我不确定我在哪里造成了内存泄漏，所以这是我的整个代码：

```
struct lnode {
int count;
int line;
char* word;
struct lnode* next;
};

struct lnode* newNode(char* word, int line) {
struct lnode* temp = (struct lnode*)malloc(sizeof(struct lnode));
char* newWord = (char*)malloc(strlen(word) + 1);
newWord = strcpy(newWord, word);
temp->word = newWord;
temp->line = line;
temp->count = 1;
return temp;
}

void pushNode(struct lnode** head, struct lnode* node) {
node->next = *head;
*head = node;

}

struct lnode* getNode(struct lnode* head, char* word) {
struct lnode* current = head;
char* temp = (char *)malloc(strlen(word));
strcpy(temp, word);
while(current != NULL) {
    if(!strcmp(nodeGetWord(current),temp)) 
        return current; 

    current = nodeGetNext(current);
}
return NULL;
}

char* nodeGetWord(struct lnode* node) {
return node->word;
}

struct lnode* nodeGetNext(struct lnode* node) {
return node->next;
}

int nodeGetLine(struct lnode* node) {
int line = node->line;
return line;
}

int nodeGetCount(struct lnode* node) {
return node->count;
}

void nodeSetCount(struct lnode* node, int count) {
node->count = count;
}

void nodeSetLine(struct lnode* node, int line) {
node->line = line;
}

void deleteList(struct lnode** head) {
struct lnode* current = *head;
struct lnode* next;
while(current) {
    next = current->next;
    free(current);
    current = next;
}
*head = NULL;

}

void deleteNode(struct lnode** head, struct lnode* node) {
struct lnode* currentNode = *head;
struct lnode* previousNode = NULL;

while (currentNode != NULL) {
    if (currentNode != node) {
        previousNode = currentNode;
        currentNode = nodeGetNext(currentNode);
        continue;
    }

    if (previousNode)
        previousNode->next = node->next;
    else
        *head = node->next;
    free(node);
    break;
}
}

void printList(struct lnode** head) {
struct lnode* current = *head;
while (current != NULL) {
    printf("%s\n",nodeGetWord(current));
    current = nodeGetNext(current);
}

} 
int main() {
struct lnode* head = NULL;

struct lnode* a = newNode("Hello",3);
pushNode(&head, a);
struct lnode* b = newNode("Hi",2);
pushNode(&head, b);
struct lnode* c = newNode("Hola",4);
pushNode(&head, c);
struct lnode* d = newNode("Yo",5);
pushNode(&head, d);
struct lnode* e = newNode("Bye", 7);
pushNode(&head, e);
printList(&head);
//deleteNode(&head,e);
//printf("key: %s\n",nodeGetWord(e));
//printf("\n");
deleteList(&head);
printf("\n");
printList(&head);   
printf("\nDone\n");

} 
```

main 和 printList() 函数可以忽略，因为当我将其提交给自动评分器时，它们已被注释掉——它们仅用于测试目的。一切似乎对我来说都正常。我什至实现了一个全局整数，每当我有东西时它就会更新`malloc`，而每当有东西被释放时它就会递减。如果有人能指出可能的内存泄漏在哪里，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:19:08.147

您期望节点的 printf 做什么？为什么您期望从列表中删除某些内容会影响已删除内容的打印？

除了释放节点这一事实之外，从列表中删除节点并不相关......您正在打印节点，而不是列表。您要打印的节点是您要打印的节点`free`，这是未定义的行为。没有办法知道可能是什么行为。对于您的实现，它恰好打印了它在您`free`d 之前具有的节点的值，但您不能指望它或类似的东西。

编辑：

> 自动分级机告诉我我未能释放所有使用的内存。

你为单词分配内存，但你从不释放它，你只释放节点。您应该用 freeNode 替换您的两个免费调用，并编写 freeNode 来释放节点拥有的任何内存，在本例中为 free(node->word) 和 free(node)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:52:50.120

我猜`nodeGetWord`只是从传递给它的节点中提取文本字符串，这就是为什么在删除节点后它仍然打印正确的字符串。它根本不看清单。

但是，您确实有另一个更严重的错误，那就是您在将节点`e` *释放*到`deleteNode`. 这是*未定义的行为*，是一件坏事。

# asp.net - 用于提交反馈的 asp.net 页面上的多个表单

> ID：12594190
> 
> 赞同：0
> 
> 时间：2012-09-26T03:36:07.283
> 
> 标签：asp.net, facebook, forms, hidden-field

我想通过将数据包含在表单中来将数据发送到服务器。但是，在 asp.net 中，我不能使用多个具有 runat=server 属性的表单。那么在asp.net页面上使用多个表单有什么用。我无法访问服务器上的数据？就像 facebook 一样，将每个帖子反馈数据包含在一个表单中，然后将其提交给服务器。如何在 asp.net 中执行此操作。当帖子上发生某些操作时，我必须将数据发送到服务器，但必须存储隐藏字段并使用 javascript 读取它不是看起来很乱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:51:44.477

你能解释一下你在这里想要达到的目标吗？

您可以将数据发送到服务器，而无需在一页中包含多个表单（服务器端）。

如果您确实需要它，您可以使用 HTML 表单而不是服务器端表单。

# eclipse-plugin - 如何访问 IParameterValues::getParameterValues() 返回的映射？

> ID：12594191
> 
> 赞同：0
> 
> 时间：2012-09-26T03:36:11.880
> 
> 标签：eclipse-plugin, eclipse-rcp

我为此命令声明了一个命令和一个命令参数。我将此 commandParameter 的“值”指定为我自己实现的类。这个类的实现如下，

```
public class ParameterValues implements IParameterValues {

    @Override
    public Map<String, Double> getParameterValues() {
        // TODO Auto-generated method stub
        Map<String, Double> values = new HashMap<String, Double>(2);
        values.put("testParam", 1.1239);
        values.put("AnotherTest", 4.1239);
        return values;      
    }

} 
```

这个命令的处理程序的实现是吹的，

```
public class testHandler extends AbstractHandler implements IHandler {
    private static String PARAMETER_ID = "my.parameter1";

    @Override
    public Object execute(ExecutionEvent event) throws ExecutionException {

        String value = event.getParameter(PARAMETER_ID);    
        MessageDialog.openInformation(HandlerUtil.getActiveShell(event),
                "Test", "Parameter ID: " + PARAMETER_ID + "\nValue: " + value);

        return null;
    }

} 
```

现在，我将命令贡献给菜单，

```
 <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               id="my.edit"
               label="Edit">
            <command
                  commandId="myCommand.test"
                  label="Test1">
               <parameter
                     name="my.parameter1"
                     value="testParam">
               </parameter>
            </command> 
```

由于我为 commandParater 指定了一个“值”类，因此我希望在单击菜单时，此代码行“String value = event.getParameter(PARAMETER_ID);” 在处理程序类中返回 1.1239 而不是“testParam”。但是，我仍然看到代码行返回“testParam”。

有什么问题？如何访问 getParameterValues() 返回的地图？

顺便说一句，即使我没有在地图中定义“ppp”，以下菜单声明仍然有效。

```
 <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               id="my.edit"
               label="Edit">
            <command
                  commandId="myCommand.test"
                  label="Test1">
               <parameter
                     name="my.parameter1"
                     value="ppp">
               </parameter>
            </command> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:02:04.970

从 javadoc 中，`org.eclipse.core.commands.IParameterValues.getParameterValues()`“返回一个由参数值的外部化名称键控的映射。这些名称应该是人类可读的，并且通常用于在某种用户界面中向用户显示。这些值应该是将被解释的实际值由命令的处理程序。”

该接口用于为命令参数提供可翻译的名称。这样可以在 Keys 首选项页面中显示“显示视图（包资源管理器）”而不是“显示视图（org.eclipse.jdt.ui.PackageExplorer）”

但是`org.eclipse.ui.menus`定义必须包含参数值而不是可翻译的名称。

`AbstractParameterValueConverter`如果要处理字符串参数并将它们转换为各种对象，可以定义参数类型和在命令定义中。

# android - 删除 Activity 作为默认启动器

> ID：12594192
> 
> 赞同：12
> 
> 时间：2012-09-26T03:36:12.893
> 
> 标签：android, android-intent, android-package-managers, android-launcher

我将我的活动设置为默认启动器来拦截主页按钮的点击，如下所示：

```
<activity
    android:name=".ExampleActivity"
    android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        <category android:name="android.intent.category.HOME" />        
        <category android:name="android.intent.category.DEFAULT" />               
    </intent-filter>
</activity> 
```

当我的活动`ExampleActivity`启动时，如果我单击该`home`键，则会提示我进行选择。如果我选择*将此作为默认设置*并选择我的活动，我会根据需要卡在我的活动中。

问题是，当我离开活动时，我尝试从默认启动器中删除我的活动，但没有成功。

我试过了：

```
ComponentName componentName = new ComponentName( 
                    "com.example.exampleactivity", 
                    "com.example.exampleactivity.class");

pm.setComponentEnabledSetting(componentName, PackageManager.COMPONENT_ENABLED_STATE_DEFAULT, PackageManager.DONT_KILL_APP); 
```

和：

```
PackageManager pm = getActivity().getPackageManager();
             ComponentName name = new ComponentName(this, "com.example.exampleactivity.class");
             pm.setComponentEnabledSetting(name, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, 0); 
```

但我对 的指定`home`从未被删除。

有没有人有解决上述问题的工作方法？

我只希望主页按钮不是特定活动的默认设置，而不是我的整个应用程序。当我离开活动时，它应该被删除并恢复为默认值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-22T23:16:11.433

如果您正在清除其默认值是您的应用程序，您可以简单地调用：

```
getPackageManager().clearPackagePreferredActivities(getPackageName()); 
```

然后，为了显示选择使用哪个启动器的对话框，请使用：

```
final Intent intent=new Intent();
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T12:50:44.723

这个解决方案是一个聪明的方法： [清除和设置默认家庭应用程序](https://stackoverflow.com/questions/13167583/clearing-and-setting-the-default-home-application-solved)

onResume() 中的代码基本上是这样的：

```
 ComponentName componentName = new ComponentName(MyActivity.this, FakeHome.class);
    if (!isMyLauncherDefault()) {
        Log.e(TAG, "MyActivity is not default home activity!");

        // toggle fake activity
        PackageManager pm = getPackageManager();
        int flag = ((pm.getComponentEnabledSetting(componentName) == PackageManager.COMPONENT_ENABLED_STATE_ENABLED) ? PackageManager.COMPONENT_ENABLED_STATE_DISABLED
                : PackageManager.COMPONENT_ENABLED_STATE_ENABLED);
        pm.setComponentEnabledSetting(componentName, flag, PackageManager.DONT_KILL_APP);

        // start home activity to enable chooser
        Intent selector = new Intent(Intent.ACTION_MAIN);
        selector.addCategory(Intent.CATEGORY_HOME);
        startActivity(selector);
    } 
```

并且方法 isMyLauncherDefault() 取自这里： [如何检查我的应用程序是否是默认启动器](https://stackoverflow.com/questions/8299427/how-to-check-if-my-application-is-the-default-launcher/8361115#8361115)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T03:40:14.560

您不能覆盖 home 键的行为以适应您的应用程序；这是 Google 的设计决定，以确保用户始终可以返回到静态位置。可能有一些方法可以解决这个问题（如果它们仍然存在），但它们是应用程序不应该依赖的意外错误。

简短的回答：您可以拥有除 home 键之外的任何键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T03:56:00.180

看一下`android.permission.SET_PREFERRED_APPLICATIONS`权限。还有这个方法[http://developer.android.com/reference/android/content/pm/PackageManager.html#clearPackagePreferredActivities(java.lang.String)](http://developer.android.com/reference/android/content/pm/PackageManager.html#clearPackagePreferredActivities(java.lang.String))

# javascript - 水平平滑滚动 div 像素量，没有滚动条

> ID：12594199
> 
> 赞同：0
> 
> 时间：2012-09-26T03:37:16.223
> 
> 标签：javascript, jquery, html, scrollto

我在一个容器 DIV 中有 10 个浮动 DIV，我希望能够使用按钮滚动它们。

我想使用左/右按钮使容器 DIV 水平滚动 300px 以显示下一个浮动 DIV。

我希望容器的宽度显示为窗口的 100%，并且我还希望底部没有水平滚动条。如果它可以横向滚动，那就太好了，但它不是必须的。

这就是我所拥有的：http: [//jsfiddle.net/696je/](http://jsfiddle.net/696je/)

我只是在寻找一个功能以及激活左/右按钮功能的方法。

我已经尝试了谷歌几个小时，我已经尝试了 Flesler 的 ScrollTo 但我没有任何运气，这可能与我设置宽度的方式有关，无论如何，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:28:29.833

可以混合`CSS`(`display:inline-block`和`white-space:nowrap`) 和`jQuery`( `scrollLeft`)

这是一个带有最少可能包装器的[jsFiddle实现。](http://jsfiddle.net/ya5pr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:57:36.313

我对您在 jsFiddle 中发布的代码感到有些困惑。你说你不想要水平滚动条，但你的东西是这样设置的。我选择了水平滚动条，因为这是您在代码中使用的。

我在这里做了一个工作函数[jsFiddle](http://jsfiddle.net/KWgtm/)。要让它在框架中工作，您需要将焦点放在“结果”窗口中（只需单击任意位置），然后使用左右箭头。

[我必须从这篇文章](https://stackoverflow.com/a/4104439/892792)中给出用于按键信用的 javascript

# java - java - 如何在eclipse java中的根目录之外进行图像处理？

> ID：12594200
> 
> 赞同：1
> 
> 时间：2012-09-26T03:37:35.850
> 
> 标签：java, eclipse, image, filepath

这可能是一个简单的问题。

我有很多我正在制作的游戏图像。我不想将它们放在根 MyGame/ 目录中。我想将它们放在根目录中的包或文件夹中，例如 MyGame/Images/"img1.png"

每次我尝试这样做时，我都会得到无效的路径名，没有这样的文件或目录。它唯一有效的时间是图像位于根目录中。我已经尝试过“MyGame/Images/"img1.png"/ 和带有前导斜杠的变体，但无法让它工作。

固定的。我需要有一个名为资源的文件夹，其中有一个名为图像的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:30:08.503

使用资源文件夹。

在 root 中，创建一个名为 resources 的文件夹，并在资源中放置图像。

所以你的文件路径应该是 File f = new File("images/img0.png");

当“真实”文件路径为 root/resources/images/img0.png

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:39:22.683

尝试上一层，然后进入您的图像文件夹。尝试

```
..\Images\img1.png 
```

# c# - 正确处理单例 IDisposable 对象

> ID：12594205
> 
> 赞同：10
> 
> 时间：2012-09-26T03:38:06.027
> 
> 标签：c#, .net

**设想：**

应用程序实例化实现`IDisposable`. 该实例通过一个静态成员公开，使其可供应用程序的所有部分访问。单个实例需要在应用程序的整个生命周期内保持活动状态。

**问题**

`Dispose`在应用程序关闭和进程终止之前调用该方法有多重要？

我一直认为，在大多数这样的场景下，不需要调用`Dispose`，因为进程的终止自然会清理资源。我错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T04:49:24.907

如果“您的应用程序关闭”是指该过程正在终止，那么您在*技术上*不需要做任何事情。您的进程正在终止，操作系统将释放这些资源。

我想它们可能是一些晦涩的极端情况，其中某些组件可能会创建某种类型的文件或其他资源，如果`Dispose`未调用，即使您的进程终止，也不一定会被清理。

我想举一个例子，尽管这是一个奇怪的极端案例。假设您在代码中引用并使用了一个组件。当你创建和使用它时，它会在你的机器上创建一个 2GB 的文件。现在让我们更进一步，说这个组件实际上关闭了文件句柄，在它使用期间的某个时候访问这个 2GB 文件，由于错误或设计不当。现在`Dispose`这个对象上的方法清理了这个文件，但它没有很好的记录。本质上，错过`Dispose`对 this 的调用会在机器上留下一个文件。这绝对是一个极端情况，不会导致您的机器“泄漏”任何东西，但您确实有一个 2GB 的文件就坐在那里。

话虽如此 - 最佳做法是`Dispose`在您确定性地完成资源时调用。你可以在你的 Singleton 上调用一个方法——比方说`Cleanup()`——它可以在你关闭时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:20:14.090

这篇文章详细解释了为什么处置 event pub Others 是一个好习惯

[.NET 对象事件和处置/GC](https://stackoverflow.com/questions/11507632/net-object-events-and-dispose-gc)

由于存在 gc 不会收集 Publisher 的极端情况，即使设置为 null 也会继续触发事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:46:09.407

如果你想确保你的 Dispose 方法被调用，并且如果它不是死亡或活着的情况，你可以附加到`AppDomain.CurrentDomain.ProcessExit`.

如果您绝对必须确保已清理资源，请使用 shell 可执行文件来监视您的主要可执行文件，然后再进行清理。

# android - 在同一布局中使用多个微调器

> ID：12594207
> 
> 赞同：1
> 
> 时间：2012-09-26T03:38:31.640
> 
> 标签：android, spinner

在我的 android 应用程序中，布局中有 4 个微调器。我使用侦听器为微调器设置了值。以下代码片段显示了我如何尝试执行此操作。但似乎没有听用户选择的值。相反，它获取了微调器中设置的第一个值。我对 onItemSelected() 方法中定义的参数不太了解。我在做什么错？

我已经编辑了我的问题。请考虑以下代码。它使用相同的过程来设置微调器的值，使用不同的查询。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_grama_niladhari);

    final ArrayList<String> provinceList = new ArrayList<String>();
    final ArrayList<String> disList      = new ArrayList<String>();
    final ArrayList<String> divList      = new ArrayList<String>();
    final ArrayList<String> gramaList    = new ArrayList<String>();

    final Spinner disSpinner = (Spinner) findViewById(R.id.spinner2);
    final Spinner divSpinner = (Spinner) findViewById(R.id.spinner3);
    final Spinner gramaSpinner = (Spinner) findViewById(R.id.spinner4);

    ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, provinceList);
    final ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, disList);
    final ArrayAdapter<String> adapter3 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, divList);
    final ArrayAdapter<String> adapter4 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, gramaList);

    Button b = (Button) findViewById(R.id.button1);

    DBHelper dbhlper = new DBHelper(getApplicationContext());
    try {

        dbhlper.createDataBase();
        mydb = dbhlper.openDataBase();

    } catch (IOException e) {
        e.printStackTrace();
    }

    final String selected_item;
    String province_query = "SELECT pro_code,name FROM jos_province";

    Cursor c = mydb.rawQuery(province_query, null);
    provinceList.clear();

    final HashMap<String, Integer> hm = new HashMap<String, Integer>();
    if (c != null) {

        int i = 1;
        int noCols = c.getCount();
        if (c.moveToFirst()) {
            do {

                Log.d("Data" + i, c.getString(1));
                provinceList.add(c.getString(1));

                hm.put(c.getString(1), c.getInt(0));

            } while (c.moveToNext());

        }   

    }

    final Spinner provSpinner = (Spinner) findViewById(R.id.spinner1);
    // ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,
    // provinceList);
    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    provSpinner.setAdapter(adapter1);

    // //////////////////////////////// Handling spinner1 ///////////////////////////////////

    final String sel_district_id = null;

    provSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @TargetApi(11)
        @Override
        public void onItemSelected(AdapterView<?> parent, View arg1,
                int arg2, long arg3) {
            String province = provSpinner.getSelectedItem().toString();
            int sel_province_id = hm.get(province);

            String district = "SELECT id,name_english from jos_district `enter code here`where province_id= "+ sel_province_id;

            // ArrayList<String> disList=new ArrayList<String>();
            Cursor c = mydb.rawQuery(district, null);
            hm.clear();
            disList.clear();
            if (c != null) {

                int i = 1;
                int noCols = c.getCount();
                if (c.moveToFirst()) {
                    do {

                        Log.d("Data" + i, c.getString(1));

                        disList.add(c.getString(1));

                    disList.toString());
                        i++;
                        hm.put(c.getString(1),c.getInt(0));

                    } while (c.moveToNext());

                }

            }
            //String sel_district_id ="66";

            adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            String listCount=Integer.toString(adapter2.getCount());
            disSpinner.setAdapter(adapter2);

                }

        @Override
        public void onNothingSelected(AdapterView<?> adapter1) {
            // TODO Auto-generated method stub

        }

    });

    disSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View arg1,
                int arg2, long arg3) {

            String selected_dis = `enter code here`disSpinner.getSelectedItem().toString();
            String sel_district_id = hm.get(selected_dis).toString();

            String division = "SELECT id,name_english FROM jos_division `enter code here`WHERE district_id= "
                    + sel_district_id;
            Cursor c = mydb.rawQuery(division, null);
            hm.clear();
            if (c != null) {

                int i = 1;
                int noCols = c.getCount();
                if (c.moveToFirst()) {
                    do {

                        Log.d("Data " + i, c.getString(1));
                        divList.add(c.getString(1));

                        hm.put(c.getString(1), `enter code here`c.getInt(0));
                        // `enter code here`provinceList.add(c.getString(1));

                    } while (c.moveToNext());

                }
            }
            // set the view for the Drop down list
            `enter code here`adapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            // set the ArrayAdapter to the spinner
            divSpinner.setAdapter(adapter3);

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {

        }
    });

    divSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View arg1,
                int arg2, long arg3) {

            String `enter code here`selected_division=divSpinner.getSelectedItem().toString();

            sel_division_id = hm.get(selected_division).toString();

            String gramaniladhari = "SELECT lifecode,name_english FROM  jos_gramaniladhari WHERE divisional_secretariat_id= " + sel_division_id;

            hm.clear();
            Cursor c=mydb.rawQuery(gramaniladhari, null);
            if (c != null) {

                int i = 1;
                int noCols = c.getCount();
                if (c.moveToFirst()) {
                    do {

                        Log.d("Data " + i, c.getString(1));
                        divList.add(c.getString(1));

                        hm.put(c.getString(1),c.getInt(0));

                    } while (c.moveToNext());

                }

            }

        // set the view for the Drop down list
                         `enter code here`adapter4.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            // set the ArrayAdapter to the spinner
            gramaSpinner.setAdapter(adapter4);

            String `enter code here`selected_grama=gramaSpinner.getSelectedItem().toString();
            String lifeCode = hm.get(selected_grama).toString();
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {

        }
    }); 
```

以下是布局的xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="22dp"
    android:text="@string/enter_your_provincial_details"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="16dp"
    android:text="@string/button" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="40dp"
    android:text="@string/province"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/textView4"
    android:layout_below="@+id/textView2"
    android:layout_marginTop="35dp"
    android:text="@string/district"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView3"
    android:layout_marginTop="44dp"
    android:text="@string/division"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView4"
    android:layout_marginTop="46dp"
    android:text="@string/grama_niladhari"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView3"
    android:layout_alignParentRight="true"
    android:layout_toRightOf="@+id/button1" />

<Spinner
    android:id="@+id/spinner2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView4"
    android:layout_alignLeft="@+id/spinner1"
    android:layout_alignParentRight="true" />

<Spinner
    android:id="@+id/spinner3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/spinner2"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/textView4" />

<Spinner
    android:id="@+id/spinner4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView5"
    android:layout_alignLeft="@+id/spinner3"
    android:layout_alignParentRight="true" />

   </RelativeLayout> 
```

![这是 logcat 结果。我的代码中的第 262 行是 String selected_grama = gramaSpinner.getSelectedItem().toString();

] [1](http://i.stack.imgur.com/d3IIx.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:17:13.453

在您上面发布的代码中，您将`id`相同的微调器分配给`spinner2`代码中的两个微调器`provSpinner`和`disSpinner`. 因此，从您的布局 XML 文件中检查资源的 id，然后更改任何一个微调器的资源 id。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:14:32.120

您在两个微调器对象中都使用了 id spinner2 的资源。这可能是问题所在

# c - 确定缓存级别和大小的 C 程序

> ID：12594208
> 
> 赞同：32
> 
> 时间：2012-09-26T03:38:32.463
> 
> 标签：c, caching

**为了清楚起见，完全重写/更新（和你的理智，它有点太长了）......**（[旧帖子](https://stackoverflow.com/revisions/12594208/3)）

对于分配，我需要找到每个缓存的级别（L1、L2、...）和大小。给出提示和我到目前为止发现的内容：我认为这个想法是创建不同大小的数组并读取它们。定时这些操作：

```
sizes = [1k, 4k, 256K, ...]
foreach size in sizes 
    create array of `size`

    start timer
    for i = 0 to n // just keep accessing array
        arr[(i * 16) % arr.length]++ // i * 16 supposed to modify every cache line ... see link
    record/print time 
```

**已更新（UTC+8 9 月 28 日下午 6:57）**

另请参阅**[完整来源](https://gist.github.com/3787223#file_cache_profile.c)**

好的，现在按照@mah 的建议，我可能已经修复了 SNR 比率问题......并且还找到了一种为我的代码计时的方法（`wall_clock_time`来自实验室示例代码）

但是，我似乎得到了不正确的结果：我在 Intel Core i3 2100 上：[**[规格](http://www.cpu-world.com/CPUs/Core_i3/Intel-Core%20i3-2100%20CM8062301061600.html)**]

*   L1：2×32K
*   L2：2×256K
*   三级：3MB

我得到的结果，在图表中：

lengthMod：1KB 到 512K

![在此处输入图像描述](../Images/fb9630c64e237dd93668e96265baa50b.png)

第一个峰值的基数是32K ...合理...第二个是384K ...为什么？我期待256？

lengthMod：512k 到 4MB

![在此处输入图像描述](../Images/73852798c722d63299ce3513eebb842d.png)

那为什么这个范围会一团糟呢？

* * *

我还阅读了有关预取或来自其他应用程序的干扰，因此我在脚本运行时关闭了尽可能多的东西，它始终（通过多次运行）显示 1MB 及以上的数据总是如此混乱？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-02T20:04:08.580

经过 10 分钟搜索 Intel 说明手册和另外 10 分钟编码后，我想出了这个（对于基于 Intel 的处理器）：

```
void i386_cpuid_caches () {
    int i;
    for (i = 0; i < 32; i++) {

        // Variables to hold the contents of the 4 i386 legacy registers
        uint32_t eax, ebx, ecx, edx; 

        eax = 4; // get cache info
        ecx = i; // cache id

        __asm__ (
            "cpuid" // call i386 cpuid instruction
            : "+a" (eax) // contains the cpuid command code, 4 for cache query
            , "=b" (ebx)
            , "+c" (ecx) // contains the cache id
            , "=d" (edx)
        ); // generates output in 4 registers eax, ebx, ecx and edx 

        // See the page 3-191 of the manual.
        int cache_type = eax & 0x1F; 

        if (cache_type == 0) // end of valid cache identifiers
            break;

        char * cache_type_string;
        switch (cache_type) {
            case 1: cache_type_string = "Data Cache"; break;
            case 2: cache_type_string = "Instruction Cache"; break;
            case 3: cache_type_string = "Unified Cache"; break;
            default: cache_type_string = "Unknown Type Cache"; break;
        }

        int cache_level = (eax >>= 5) & 0x7;

        int cache_is_self_initializing = (eax >>= 3) & 0x1; // does not need SW initialization
        int cache_is_fully_associative = (eax >>= 1) & 0x1;

        // See the page 3-192 of the manual.
        // ebx contains 3 integers of 10, 10 and 12 bits respectively
        unsigned int cache_sets = ecx + 1;
        unsigned int cache_coherency_line_size = (ebx & 0xFFF) + 1;
        unsigned int cache_physical_line_partitions = ((ebx >>= 12) & 0x3FF) + 1;
        unsigned int cache_ways_of_associativity = ((ebx >>= 10) & 0x3FF) + 1;

        // Total cache size is the product
        size_t cache_total_size = cache_ways_of_associativity * cache_physical_line_partitions * cache_coherency_line_size * cache_sets;

        printf(
            "Cache ID %d:\n"
            "- Level: %d\n"
            "- Type: %s\n"
            "- Sets: %d\n"
            "- System Coherency Line Size: %d bytes\n"
            "- Physical Line partitions: %d\n"
            "- Ways of associativity: %d\n"
            "- Total Size: %zu bytes (%zu kb)\n"
            "- Is fully associative: %s\n"
            "- Is Self Initializing: %s\n"
            "\n"
            , i
            , cache_level
            , cache_type_string
            , cache_sets
            , cache_coherency_line_size
            , cache_physical_line_partitions
            , cache_ways_of_associativity
            , cache_total_size, cache_total_size >> 10
            , cache_is_fully_associative ? "true" : "false"
            , cache_is_self_initializing ? "true" : "false"
        );
    }
} 
```

参考： [英特尔® 64 和 IA-32 架构开发人员手册：卷。2A](https://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-2a-manual.html) ，第 3-190 页，CPUID——CPU 标识。

这比测量缓存延迟要可靠得多，因为在现代处理器上关闭缓存预取几乎是不可能的。如果您需要不同处理器架构的类似信息，则必须查阅相应的手册。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-26T03:44:24.780

测量你的时间所花费的时间（即调用clock() 函数的时间）比执行所花费的时间要大很多很多（很多很多......）`arr[(i*16)&lengthMod]++`。这种极低的信噪比（以及其他可能的缺陷）使您的计划无法实施。很大一部分问题是您试图测量循环的单次迭代；您链接的示例代码试图测量一组完整的迭代（在开​​始循环之前读取时钟；从循环中出现后再次读取；不要在*循环*内使用 printf() ）。

如果您的环路足够大，您可能能够克服信噪比问题。

至于“正在增加什么元素”；`arr`是一个1MB缓冲区的地址；`arr[(i * 16) & lengthMod]++;`导致`(i * 16) * lengthMod`从该地址生成偏移量；该偏移量是增加的 int 的地址。您正在执行移位（i * 16 将变为 i << 4）、逻辑和、加法，然后是读/加/写或单个增量，具体取决于您的 CPU）。

编辑：如上所述，由于内存访问的相对速度（缓存或无缓存）和调用函数只是为了测量时间，您的代码的 SNR（信噪比）较差。为了获得您当前获得的时间，我假设您将代码修改为如下所示：

```
int main() {
    int steps = 64 * 1024 * 1024;
    int arr[1024 * 1024];
    int lengthMod = (1024 * 1024) - 1;
    int i;
    double timeTaken;
    clock_t start;

    start = clock();
    for (i = 0; i < steps; i++) {
        arr[(i * 16) & lengthMod]++;
    }
    timeTaken = (double)(clock() - start)/CLOCKS_PER_SEC;
    printf("Time for %d: %.12f \n", i, timeTaken);
} 
```

这会将测量移到循环之外，因此您不是在测量单个访问（这实际上是不可能的），而是在测量`steps`访问。

您可以`steps`根据需要自由增加，这将直接影响您的时间安排。由于您收到的时间太接近了，在某些情况下甚至是倒置的（您的时间在大小之间振荡，这不太可能是由缓存引起的），您可以尝试将值更改为`steps`to`256 * 1024 * 1024`甚至更大。

注意：您可以`steps`尽可能大地放入有符号的 int （应该足够大），因为逻辑并确保您在缓冲区中环绕。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T04:38:12.907

我知道这个！（实际上由于预取，它非常复杂）

```
 for (times = 0; times < Max; time++) /* many times*/
     for (i=0; i < ArraySize; i = i + Stride)
           dummy = A[i]; /* touch an item in the array */ 
```

更改步幅允许您测试缓存的属性。通过查看图表，您将得到答案。

查看幻灯片 35-42 [http://www.it.uu.se/edu/course/homepage/avdark/ht11/slides/11_Memory_and_optimization-1.pdf](http://www.it.uu.se/edu/course/homepage/avdark/ht11/slides/11_Memory_and_optimization-1.pdf)

Erik Hagersten 是一位非常优秀的老师（而且也非常称职，曾经是 sun 的首席架构师）所以请查看他的其他幻灯片以获得更多精彩的解释！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T03:12:06.123

要回答您关于 1MB 以上的奇怪数字的问题，这很简单；缓存逐出策略与分支预测有关，以及 L3 缓存在内核之间共享的事实。

Core i3 有一个非常有趣的缓存结构。实际上任何现代处理器都可以。你应该在维基百科上阅读它们；它有各种各样的方法来决定“好吧，我可能不需要这个......”然后它可以说“我会把它放在受害者缓存中”或任何数量的东西。L1-2-3 缓存时序可能非常复杂，这取决于大量因素和做出的个别设计决策。

最重要的是，所有这些决定以及更多（参见关于该主题的维基百科文章）必须在两个核心的缓存之间同步。将共享的 L3 缓存与单独的 L1 和 L2 缓存同步的方法可能很难看，它们可能涉及回溯和重新计算或其他方法。您不太可能拥有完全免费的第二个内核，并且没有任何东西竞争 L3 缓存空间，从而导致同步异常。

通常，如果您正在处理数据，例如卷积内核，您希望确保它适合 L1 缓存并围绕它塑造您的算法。L3 缓存并不真正意味着以您的方式处理数据集（尽管它比主内存更好！）

我发誓，如果我是那个必须实现缓存算法的人，我会发疯的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T11:08:41.017

对于不同步幅的基准测试，您可以尝试 lmbench 包中的 lat_mem_rd，它是开源的：http: [//www.bitmover.com/lmbench/lat_mem_rd.8.html](http://www.bitmover.com/lmbench/lat_mem_rd.8.html)

我已经将我的 Windows 端口发布到[http://habrahabr.ru/post/111876/](http://habrahabr.ru/post/111876/) ——在这里复制粘贴很长。那是两年前的事了，我没有用现代 CPU 测试它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-05T08:08:19.207

对于 Windows，您可以使用[GetLogicalProcessorInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683194%28v=vs.85%29.aspx)方法。

对于 linux，您可以使用`sysconf()`. 您可以找到`sysconf`in`/usr/include/unistd.h`或的有效参数`/usr/include/bits/confname.h`

# python - 带频率的 Python 字典

> ID：12594209
> 
> 赞同：1
> 
> 时间：2012-09-26T03:38:49.207
> 
> 标签：python

我有一本带钥匙和物品的字典。基本上，键保留人名，值保留薪水。我想要的是根据它们的频率以更高的价值订购物品。

```
d = {'name-1': 100, 'name-2':90, 'name-3': 80, 'name-1': 80}
    print OrderedDict(sorted(d.items(), key=lambda t: t[1])) 
```

所以，输出应该是`('name-1':100)`。因为，在字典中出现两次，薪水最高。

我只能对这个字典进行排序。你能帮我得到那个结果吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T03:53:33.523

一种方法是使用字典，但将每个键的值存储在列表中

```
>>> d = {'name-1': [100, 80], 'name-2':[90], 'name-3': [80]} 
```

进而

```
>>> sorted(d, key=lambda x:max(d.get(x)), reverse=True)
['name-1', 'name-2', 'name-3'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T03:53:10.687

正如其他人指出的那样，您不能在字典中有重复的键...但是您可以轻松地使用列表

```
#d = (('name-1', 100), ('name-2',90), ('name-3',80), ('name-1',80))
names = "name1,name2,name3,name1".split(",")
salaries = map(int,"100,90,80,80".split(","))
d = zip(names,salaries)
print max(d,key=lambda x:names.count(x[0])*1000+x[1])

#('name-1', 100)
print sorted(d,key=lambda x:names.count(x[0])*1000+x[1],reverse=True)
[('name-1', 100), ('name-1', 80), ('name-2', 90), ('name-3', 80)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T03:47:37.287

您是否尝试过创建该`d`字典？

```
>>> d = {'name-1': 100, 'name-2':90, 'name-3': 80, 'name-1': 80}
>>> d
{'name-1': 80, 'name-2': 90, 'name-3': 80} # notice 'name-1' is only in there once.
>>> 
```

如果您尝试在 dict 中创建具有相同名称的第二个键，它将覆盖与该键关联的值。字典中的每个键都是唯一的……如果它们不是唯一的，字典将不再有用。

如果你需要这种数据结构，你可以创建一个嵌套的元组/列表......但是，它会慢得多，因为找到一个键需要遍历列表中的所有对象：

```
d = (
        ('name-1', 100),
        ('name-2', 90),
        ('name-3', 80),
        ('name-1', 80),
     ) 
```

# javascript - Javascript getFrequencies() 函数

> ID：12594212
> 
> 赞同：0
> 
> 时间：2012-09-26T03:39:17.867
> 
> 标签：javascript

我正在开发一个 Javascript 应用程序并且遇到了一个我无法解决的问题。我必须编写一个函数，它接受一个字符串并返回一个对象，其中属性名称是字符，值是该字符在字符串中出现的频率。到目前为止我写的是：

```
function getFrequencies(str) {
    var holder = str;
    var ticker = str;
    var i = 0;
    var j = 0;
    var result = [];

    while (i < holder.length && j < ticker.length) {
        if (holder.charAt(i) < ticker.charAt(j)) {
            i++;
        }
        else if (ticker.charAt(j) < holder.charAt(i)) {
            j++;
        }
        else {
            result.push(holder.charAt(i));
            i++;
            j++;
        }
    }

    return result;
} 
```

如果有人可以帮助我弄清楚如何使这项工作正常工作并告诉我我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:44:27.213

```
function getFrequencies(str) {
  var obj = {}, i;
  for (i = 0; i < str.length; i++) {
    if (str.charAt(i) in obj) {
       obj[str.charAt(i)]++;
    } else {
       obj[str.charAt(i)] = 1;
    };
  }
  return obj;
} 
```

或者

```
String.prototype.getFrequencies = function () {
  var obj = {}, i, c;
  for (i = 0; i < this.length; i++) {
    c = this.charAt(i); 
    if (c in obj) {
       obj[c]++;
    } else {
       obj[c] = 1;
    };
  }
  return obj;
}

// usage
var ret = "abcabcieefje".getFrequencies(); 
```

# python - 如何从 python/gtk 中的类传递变量？

> ID：12594216
> 
> 赞同：2
> 
> 时间：2012-09-26T03:39:56.353
> 
> 标签：python, gtk

我正在使用 gtk 在 python 中开发一个程序来为程序创建一个 GUI，这个程序我试图将我在 A 类中创建的变量传递给 B 类，但我无法做到这一点，我试图做这样的事情：

```
class ClassA(gtk.Window):
    def __init__(self):
        super(ClassA, self).__init__()
        self.set_position(gtk.WIN_POS_CENTER)
        self.button = gtk.Button("Button")
        self.button.connect("clicked", self.on_clicked)

    def on_clicked(self, *args):
        variable = "value"
        ClassB(variable)

class ClassB(variable, gtk.Window):
    def __init__(self):
        super(ClassB, self, variable).__init__()
        self.set_position(gtk.WIN_POS_CENTER)
        self.button = gtk.Button("Button")
        self.button.connect("clicked", self.on_clicked)
    def on_clicked(variable, *args):
        print variable

if __name__ == '__main__':
    app = ClasseA()
    gtk.main() 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:15:44.337

```
class ClassB(gtk.Window):
    def __init__(self, variable):
        #Your code
        self.variable = variable 
```

# php - 能够在版本之间交叉引用的 PHP 文档生成器

> ID：12594220
> 
> 赞同：2
> 
> 时间：2012-09-26T03:40:16.433
> 
> 标签：php, phpdoc

我正在寻找具有以下功能的 PHP 文档生成器（如 PHPDocumentor、Sami 等）：

*   PHPdoc 支持
*   可以为未记录的函数生成文档
*   可以与源代码交叉引用
*   可以在文件/类级别的版本之间进行交叉引用（例如，当我有 1.0、1.1 和 1.2 分支时，并且我正在查看某个类的 1.0 版本时，它将具有指向相同版本的 1.1 和 1.2 版本的链接类，但前提是它存在于这些分支中）。如果它可以在类和版本（或函数和版本）之间生成某种交叉引用表，那就大加了。

有没有可以做到这一点的工具（或者可以通过合理的工作量来定制）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:40:22.057

Well, I'm not sure about your last requirement, but [doxygen](http://www.doxygen.nl) does meet the first three ones.

# php - 创建图像网格

> ID：12594223
> 
> 赞同：1
> 
> 时间：2012-09-26T03:40:38.543
> 
> 标签：php, javascript, jquery, image, grid

我的用户目前可以使用选择框从列表中选择多个项目。我有一段代码检查每个项目的数据库并输出它们的详细信息。

每个项目都有一个图像。这些图像是动态生成的视觉 ID 标签，实际上并未存储在任何地方。我目前正在使用 WideImage PHP 库来生成这些图像。我需要能够为用户选择的项目生成图像，然后将它们组合成一个图像或一个可以放在 A4 大小页面上的网格（用于打印目的）。一张 A4 纸（2 列，4 行）总共可以容纳 8 张这些图像。

我的代码目前如下所示：

```
for($i=0;$i<count($_POST['print']);$i++){
    $ids = $checkbox[$i];
    $query = "SELECT * FROM items WHERE item_id = '".$ids."'";
    $result = $mysqli->query($query);
    while($row = $result->fetch_assoc()){           
        $item_name = $row['name']; // used when generating image
    }

    // WideImage PHP code (to generate image)
    $image1 = WideImage::load('photos/image1.png')->resize(325, 225); // base image
    $image2 = WideImage::load('photos/image2.png');
    $image3 = WideImage::load($item_name);
    $smaller = $image2->resize('124', '158', 'fill');
    $result = $image1->merge($smaller, "196", "5", 100);
    $finalimage = $result->merge($image3, "12", "1", 100);        
} 
```

我一直坚持到这一点。我不知道如何将这些图像“组合”成一个大图像或将它们单独放入网格中。预先生成图像并将图像的路径存储在数据库中会更容易吗？

即使我确实已经生成了所有图像，我如何将它们组合成一个大图像或网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:56:18.203

您可以将调整大小的图像写入缓存文件夹，然后像使用`<img />`标签的普通图像一样输出它们。这样，您甚至可以跳过缓存文件夹中已经存在的图像（假设您根据高度和宽度命名它们，`e.g. image1-325x225.png`）

查看如何将图像写入文件：[http ://wideimage.sourceforge.net/documentation/saving-images/](http://wideimage.sourceforge.net/documentation/saving-images/)

将它们输出为 html 后，您可以使用 CSS 设置它们的样式。或者将它们输出为表格。这取决于你。

# iphone - 如何更改拖动的 mkannotationview 的标题

> ID：12594228
> 
> 赞同：0
> 
> 时间：2012-09-26T03:41:00.380
> 
> 标签：iphone, drag-and-drop, mkmapview, mkannotationview

我想在拖动时更改 mkannotationview 的标题。MKannotationview 没有 title 属性-我有一个自定义视图。那么如何在dragstate委托方法中访问它呢？

```
 -(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view 
  didChangeDragState:(MKAnnotationViewDragState)newState fromOldState:
  (MKAnnotationViewDragState)oldState
   {
   NSLog(@"old state, new state:%d, %d",oldState,newState);
   //view setTitle
   } 
```

如果我可以从这里调用 viewforannotationdelegate 方法，那会有所帮助。那至少有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:21:19.487

这是正确的铸造：

```
 ParkPlaceMark *annotation = (ParkPlaceMark *)view.annotation; 
```

Placemark - 我的自定义类；视图 - mkannotationview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:16:48.710

您可以将其`MKAnnotationView`转换为您自己的包含您的 title 属性的子类。

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view didChangeDragState:(MKAnnotationViewDragState)newState fromOldState:(MKAnnotationViewDragState)oldState {

    if([view isKindOfClass:[CustomMKAnnotationView class]]) {
        CustomMKAnnotation *customView = (CustomMKAnnotation *)view.annotation;
        customView.title = @"New Title";

    }
} 
```

# java - What's the difference between passing this vs. ClassName.this from an event handler when passed to Intent constructor?

> ID：12594229
> 
> 赞同：8
> 
> 时间：2012-09-26T03:41:16.870
> 
> 标签：java, android, event-handling, commonsware

In the earlier Android Programming Tutorial, page 192, we see an implementation of `LunchList#onOptionsItemSelected`. Within this implementation we see two `Intent`s passed to `startActivity`: one whose constructor is passed `LunchList.this`, the other whose constructor is passed `this`.

What's the difference?

[See lines 78 - 91 here](https://github.com/commonsguy/cw-andtutorials/blob/master/14-Rotation/LunchList/src/apt/tutorial/LunchList.java). Note how `onOptionsItemSelected` is not declared within an inner class.

In Android/Java does the value of `this` change within the context of event handlers or function binding via reflection? Could both `Intent` instances be passed `this`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T03:55:46.877

In Java, `this` refers to the containing class, and `ClassName.this` refers to the first containing class whose name is `ClassName`. Event handlers are typically written as anonymous, inner classes, so if you want to refer to the event handler's containing class (and not the event handler's class), you need to specify `ContainingClass.this`, not `this`.

Reference: [http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T03:54:22.750

When you are creating an `Intent` inside an `Inner Class` use `ClassName.this`(here className must be the Activity class Name) and if creating `Intent` inside an `Activity` class you can use `this`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T05:12:27.017

For this example it will make no difference as in either condition the class that will start the activity will remain same. First parameter of the Intent refers to the context of the class from where the activity will be launched and from where the bundle data will be passed.

# inno-setup - 从欢迎屏幕中删除版本文本

> ID：12594230
> 
> 赞同：2
> 
> 时间：2012-09-26T03:41:36.183
> 
> 标签：inno-setup

在欢迎屏幕上，我收到此消息

> 这将在您的计算机上安装“我的程序名称”1.0 版

我怎样才能删除这个`version 1.0`。我希望它只是：

> 这将在您的计算机上安装“我的程序名称”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:49:59.547

那里的文本使用`AppVerName`默认为“AppName version AppVersion”的指令的值。

如果要覆盖 to 以仅显示 AppName，则可以使用与 AppName 指令相同的值：

```
AppName=My Program Name
AppVersion=1.0
AppVerName=My Program Name 
```

# android - 为什么在 TableLayout 中时 EditText 不换行？

> ID：12594232
> 
> 赞同：0
> 
> 时间：2012-09-26T03:41:52.270
> 
> 标签：android, android-layout, android-edittext, android-tablelayout

我注意到当我在一行中放置一个`EditText`（或两个）时`TableLayout`，文本不会换行。

我想了解这里发生了什么，以及是否有任何正确的方法可以`EditText`在`TableRow`.

下面的布局文件：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableRow>

        <EditText
            android:layout_width="match_parent"
            android:hint="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."
            android:minLines="3" />
    </TableRow>

</TableLayout> 
```

导致以下布局没有换行（我认为`View`实际上超出了屏幕的右边界。）：

![在此处输入图像描述](../Images/0382e5f50c78a81fac80718e417b0e28.png)

但是，添加`android:stretchColumns="0"`或省略`TableRow`标签适用于一个`EditText`但不是两个：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:layout_width="match_parent"
        android:hint="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."
        android:minLines="3" />

</TableLayout> 
```

![在此处输入图像描述](../Images/a1786e32ecf17f58dca3c27b33957650.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:48:17.617

尝试将其用作 EditText 属性：

```
android:scrollHorizontally="false" 
```

# jquery - 使用 JQuery 将多个文件上传到 S3

> ID：12594233
> 
> 赞同：0
> 
> 时间：2012-09-26T03:41:53.703
> 
> 标签：jquery, amazon-s3, http-post

我一直在尝试以顺序方式将多个文件上传到 S3。IE 。2个文件A和B

上传文件 A（成功时不重定向）然后上传文件 B（更大的文件）并在成功时重定向。

```
function StartPosting(data) {   
var s3JsonList = JSON.parse(data.s3Json);   
PopupSpinner();    
 $.each(s3JsonList, function (k, v) {    
  HttpPostToS3(k, v);
}); 
```

}

```
 function HttpPostToS3(key, value) {   
document.getElementById(key + 'S3SubmitDiv').innerHTML = value;//This sets the Post variables in the order.   Also key + 'S3SubmitDiv'   
setTimeout(function () {   
  jQuery('#' + key + 'form').submit();   
}, 3000); 
```

}

基本上有 2 种形式，每种形式都适用于各自的文件。会发生什么，如果我放置一个调试器，两个文件都以调试模式上传到 S3。但是当我禁用调试器时，只有第二个文件上传到 S3。

我的问题是
1-使用 jQuery/HttpPost 上传到 S3 的最佳方式是什么
2-有没有办法以文件已上传的相同形式获得确认？
3-上传时还可以看到进度条。

任何建议都会对我有很大帮助。

谢谢 。

**编辑**

我刚刚进行了调整以使上述代码正常工作

当我对这两个文件应用设置超时功能时，显然只有第二个文件被上传。对于第一个文件，我没有申请任何等待。对于第二个文件，我等待了 5 秒。

```
 function StartPosting(data) {
var i = 0;
var s3JsonList = JSON.parse(data.s3Json);
PopupSpinner();
$.each(s3JsonList, function (k, v) {

  if (i == 0) {
    HttpPostToS3(k, v);
  }
  else {
    setTimeout(function () {
      HttpPostToS3(k, v);
    }, 5000);
  }
  i++;
}); 
```

}

是的，代码很丑！！但它现在才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:09:09.980

您可能想尝试[Uploadify](http://www.uploadify.com/)

这些文章将为您提供足够的信息：

[使用 Uploadify 直接发布到 Amazon S3](https://stackoverflow.com/questions/1682825/using-uploadify-to-post-directly-to-amazon-s3)

[http://www.flynsarmy.com/2011/03/upload-to-amazon-s3-with-uploadify/](http://www.flynsarmy.com/2011/03/upload-to-amazon-s3-with-uploadify/)

[http://www.uploadify.com/forum/#/discussion/4713/amazon-s3-and-uploadify-sample/p1](http://www.uploadify.com/forum/#/discussion/4713/amazon-s3-and-uploadify-sample/p1)

# python - Tkinter 中的程序窗口锁定

> ID：12594239
> 
> 赞同：1
> 
> 时间：2012-09-26T03:43:26.820
> 
> 标签：python, locking, window, size, tkinter

我很好奇是否有办法让我在 python 中的程序具有锁定大小。我的意思是您不能拉伸窗口以使其更大或更小等。希望我已经让自己清楚，并希望在 Python 中可以实现类似的东西。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:26:13.673

```
root.resizable(0, 0) #or root.resizable(width=FALSE, height=FALSE) 
```

像一块馅饼一样容易！

或者您可以执行以下操作：

```
root.minsize(min_x, min_y)
root.maxsize(max_x, max_y) 
```

您仍然可以抓住窗户的一侧，但不能拉伸它。

# javascript - jQuery > 复选框更改运行代码

> ID：12594241
> 
> 赞同：2
> 
> 时间：2012-09-26T03:43:33.857
> 
> 标签：javascript, jquery

我在清单上有一排“待办事项”，每一行都有一个“已完成”复选框。用鼠标单击该框后，以下代码将运行并正确发布信息（更新数据库以跟踪任务已完成）：

```
 $(function ()
 {
     $('[id*="howto_step_complete"]').mousedown(function ()
     {
         var id = $(this).attr('id');
         var howto_used_id = id.substr(id.length - 2);

         var howto_step_minutes = $('#howto_step_minutes' + howto_used_id).val();

         if (!$(this).is(':checked'))
         {
             var checked = true;
         }
         else
         {
             var checked = false;
         }
         var value = $('#howto_used_id').val();
         if (howto_step_minutes != '')
         {
             $.post("updateChecklist.php",
             {
                 howto_used_id: howto_used_id,
                 howto_step_complete: checked,
                 howto_step_minutes: howto_step_minutes
             },

             function (data)
             {
                 var obj = jQuery.parseJSON(data);
                 var howto_used_id_returned = obj.howto_used_id;
                 var howto_step_complete = obj.howto_step_complete;
                 alert(howto_step_complete);
             });
             $(this).trigger("change");
         }
         else
         {
             alert('Minutes must be filled out before checking complete');
         }
     });

 }); 
```

问题是，如果一个人使用制表符在表单中移动，然后使用空格键来选中该框，则不会触发，因为它使用的是 mousedown。我尝试将其更改为，`change()`但随后我的警报框不断出现“错误”。

这应该是真的，因为我刚刚检查了该框，但我不明白为什么它会不断出现。

我可以使用什么来代替`mousedown()`正确发布此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:00:16.733

我将其更改为再次使用 change() 然后删除了触发器，我认为这就是不断弹出警报框然后再次更改它并循环的原因。

```
$(function(){
        $('[id*="howto_step_complete"]').change(function() {
        var id = $(this).attr('id');
        var howto_used_id = id.substr(id.length - 2);

        var howto_step_minutes = $('#howto_step_minutes' + howto_used_id).val();

        if (!$(this).is(':checked')) { var checked = false; }else{ var checked = true; }
            var value = $('#howto_used_id').val();
            if(howto_step_minutes!=''){
             $.post("updateChecklist.php", { howto_used_id: howto_used_id, howto_step_complete: checked, howto_step_minutes: howto_step_minutes },
                        function(data) {
                        var obj = jQuery.parseJSON(data);
                           var howto_used_id_returned = obj.howto_used_id;
                        var howto_step_complete = obj.howto_step_complete;
                        alert(howto_step_complete);
                   });
            }else{ alert('Minutes must be filled out before checking complete'); }
        });

}); 
```

我还检查了 var 的真/假错误/反转。也解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:51:09.460

尝试 .change 而不是 .mousedown：

[http://nelsonwells.net/2010/06/jquery-change-event-on-checkbox/](http://nelsonwells.net/2010/06/jquery-change-event-on-checkbox/)

# .net - 如何在自定义控件上添加对 Point 属性的设计器支持？

> ID：12594246
> 
> 赞同：3
> 
> 时间：2012-09-26T03:44:39.363
> 
> 标签：.net, winforms, user-controls, custom-controls, designer

我有一个自定义控件，其属性名为 Offset，类型为 PointF。

我希望能够从表单设计器中编辑属性（目前已禁用）。

我读到我必须添加指向从 System.Drawing.Design.UITypeEditor 派生的类的 EditorAttribute。

看起来已经有很多从 UITypeEditor 派生的内置类型，例如：

```
System.ComponentModel.Design.BinaryEditor
System.ComponentModel.Design.CollectionEditor
System.ComponentModel.Design.DateTimeEditor
System.ComponentModel.Design.MultilineStringEditor
System.ComponentModel.Design.ObjectSelectorEditor
System.Drawing.Design.ColorEditor
System.Drawing.Design.ContentAlignmentEditor
System.Drawing.Design.CursorEditor
System.Drawing.Design.FontEditor
System.Drawing.Design.FontNameEditor
System.Drawing.Design.IconEditor 
```

... ETC

我找不到用于编辑 PointF 或 Point 类型的工具。看起来这个功能应该已经存在，因为 .NET 一直在设计器中公开 Point/PointF 类型。

我希望我不必重新发明轮子——如果它已经存在，我想使用内置的 UITypeEditor 类型。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:26:18.677

`Point`您可以使用以下代码将属性添加到允许在控件的属性网格中进行编辑的类型的自定义控件：

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Visible),
 EditorBrowsable(EditorBrowsableState.Advanced),
 TypeConverter(typeof(PointConverter))]
public Point MyPointProperty { get; set; } 
```

如果您尝试使用 a 相同的方法，`SizeF`您会发现 .NET 中没有内置`TypeConverter`的`PointF`. 不过，您可以创建自己的，我在[这里找到了一个](ftp://ftp.remotesensing.org/osgeo/foss4g/2009/SPREP/2Thu/Parkside%20GO3/1300/Thu%20G03%201300%20Dunsford/MWCD/MapWindow%206/Source/MapWindow/MapWindow/Forms/TypeConverters/PointFConverter.cs)（并复制并粘贴了下面的大部分代码）。

使用 a`PointF` `TypeConverter`您可以编写`PointF`可在属性窗口中编辑的类型的属性：

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Visible),
 EditorBrowsable(EditorBrowsableState.Advanced),
 TypeConverter(typeof(PointFConverter))]
public PointF MyPointFProperty { get; set; } 
```

* * *

这是在上面链接的文章中找到的 PointF 类型转换器代码：

```
/// <summary>
/// PointFConverter
/// </summary>
public class PointFConverter : ExpandableObjectConverter
{
    /// <summary>
    /// Creates a new instance of PointFConverter
    /// </summary>
    public PointFConverter() {
    }

    /// <summary>
    /// Boolean, true if the source type is a string
    /// </summary>
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType) {
        if (sourceType == typeof(string)) return true;
        return base.CanConvertFrom(context, sourceType);
    }

    /// <summary>
    /// Converts the specified string into a PointF
    /// </summary>
    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value) {
        if (value is string) {
            try {
                string s = (string)value;
                string[] converterParts = s.Split(',');
                float x = 0;
                float y = 0;
                if (converterParts.Length > 1) {
                    x = float.Parse(converterParts[0].Trim());
                    y = float.Parse(converterParts[1].Trim());
                } else if (converterParts.Length == 1) {
                    x = float.Parse(converterParts[0].Trim());
                    y = 0;
                } else {
                    x = 0F;
                    y = 0F;
                }
                return new PointF(x, y);
            } catch {
                throw new ArgumentException("Cannot convert [" + value.ToString() + "] to pointF");
            }
        }
        return base.ConvertFrom(context, culture, value);
    }

    /// <summary>
    /// Converts the PointF into a string
    /// </summary>
    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType) {
        if (destinationType == typeof(string)) {
            if (value.GetType() == typeof(PointF)) {
                PointF pt = (PointF)value;
                return string.Format("{0}, {1}", pt.X, pt.Y);
            }
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }
} 
```

# android - USSD 服务不工作

> ID：12594250
> 
> 赞同：18
> 
> 时间：2012-09-26T03:45:39.423
> 
> 标签：android, android-service, ussd

我正在尝试开发一个默默地驳回 USSD 响应的应用程序。我使用了来自[http://commandus.com/blog/?p=58](http://commandus.com/blog/?p=58)的代码，并进行了细微的更改。我已经创建了`IExtendedNetworkService.aidl`in the package`com.android.internal.telephony`和`USSDDumbExtendedNetworkService`inside the package `com.commandus.ussd`。问题是，运行应用程序后没有任何反应（即使在重新启动手机后）。有人可以指出我做错了什么吗？我应该编写任何额外的代码来使它工作吗？

IExtendedNetworkService.aidl

```
package com.android.internal.telephony;

/**
*  Interface used to interact with extended MMI/USSD network service.
*/
interface IExtendedNetworkService {
 /**
 * Set a MMI/USSD command to ExtendedNetworkService for further process.
 * This should be called when a MMI command is placed from panel.
 * @param number the dialed MMI/USSD number.
 */
void setMmiString(String number);

/**
 * return the specific string which is used to prompt MMI/USSD is running
 */
CharSequence getMmiRunningText();

/**
 * Get specific message which should be displayed on pop-up dialog.
 * @param text original MMI/USSD message response from framework
 * @return specific user message correspond to text. null stands for no pop-up dialog need to show.
 */
CharSequence getUserMessage(CharSequence text);

/**
 * Clear timeout message and pre-set MMI/USSD command
 * This should be called when user cancel a pre-dialed MMI command.
 */
void clearMmiString();
} 
```

USSDDumbExtendedNetworkService

```
 package com.commandus.ussd;
    import android.app.Service;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.content.IntentFilter;
    import android.net.Uri;
    import android.os.IBinder;
    import android.os.PatternMatcher;
    import android.os.RemoteException;
    import android.util.Log;

    import com.android.internal.telephony.IExtendedNetworkService;

    /**
    * Service implements IExtendedNetworkService interface.
    * USSDDumbExtendedNetworkService Service must have name
    * "com.android.ussd.IExtendedNetworkService" of the intent declared in the
    * Android manifest file so com.android.phone.PhoneUtils class bind to this
    * service after system rebooted. Please note service is loaded after system
    * reboot! Your application must check is system rebooted.
    * 
    * @see Util#syslogHasLine(String, String, String, boolean)
    */
    public class USSDDumbExtendedNetworkService extends Service {
    public static final String TAG = "MobileServices";
    public static final String LOG_STAMP = "*USSDTestExtendedNetworkService bind successfully*";
    public static final String URI_SCHEME = "ussd";
    public static final String URI_AUTHORITY = "g_el.net";
    public static final String URI_PATH = "/";
    public static final String URI_PAR = "return";
    public static final String URI_PARON = "on";
    public static final String URI_PAROFF = "off";
    public static final String MAGIC_ON = ":ON;)";
    public static final String MAGIC_OFF = ":OFF;(";
    public static final String MAGIC_RETVAL = ":RETVAL;(";

    private static boolean mActive = false;
    private static CharSequence mRetVal = null;
    private Context mContext = null;
    private String msgUssdRunning = "G Testing...";

final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (Intent.ACTION_INSERT.equals(intent.getAction())) {
            mContext = context;
            if (mContext != null) {
                msgUssdRunning = "ussd blocker Running";
                mActive = true;
                Log.d(TAG, "activate");
            }
        } else if (Intent.ACTION_DELETE.equals(intent.getAction())) {
            mContext = null;
            mActive = false;
            Log.d(TAG, "deactivate");
        }
    }
};

private final IExtendedNetworkService.Stub mBinder = new IExtendedNetworkService.Stub() {

    @Override
    public void setMmiString(String number) throws RemoteException {
        Log.d(TAG, "setMmiString: " + number);
    }

    @Override
    public CharSequence getMmiRunningText() throws RemoteException {
        Log.d(TAG, "getMmiRunningText: " + msgUssdRunning);
        return msgUssdRunning;
    }

    @Override
    public CharSequence getUserMessage(CharSequence text)
            throws RemoteException {
        if (MAGIC_ON.contentEquals(text)) {
            mActive = true;
            Log.d(TAG, "control: ON");
            return text;
        } else {
            if (MAGIC_OFF.contentEquals(text)) {
                mActive = false;
                Log.d(TAG, "control: OFF");
                return text;
            } else {
                if (MAGIC_RETVAL.contentEquals(text)) {
                    mActive = false;
                    Log.d(TAG, "control: return");
                    return mRetVal;
                }
            }
        }

        if (!mActive) {
            Log.d(TAG, "getUserMessage deactivated: " + text);
            //return null;//Use this in order to cancel the output on the screen.
            return text;
        }
        String s = text.toString();
        // store s to the !
        Uri uri = new Uri.Builder().scheme(URI_SCHEME).authority(URI_AUTHORITY).path(URI_PATH).appendQueryParameter(URI_PAR,text.toString()).build();
        sendBroadcast(new Intent(Intent.ACTION_GET_CONTENT, uri));
        mActive = false;
        mRetVal = text;
        Log.d(TAG, "getUserMessage: " + text + "=" + s);
        return null;
    }

    @Override
    public void clearMmiString() throws RemoteException {
        Log.d(TAG, "clearMmiString");
    }
};

/**
 * Put stamp to the system log when PhoneUtils bind to the service after
 * Android has rebooted. Application must call
 * {@link Util#syslogHasLine(String, String, String, boolean)} to check is
 * phone rebooted or no. Without reboot phone application does not bind tom
 * this service!
 */
@Override
public IBinder onBind(Intent intent) {
    IntentFilter filter = new IntentFilter();
    filter.addAction(Intent.ACTION_INSERT);
    filter.addAction(Intent.ACTION_DELETE);
    filter.addDataScheme(URI_SCHEME);
    filter.addDataAuthority(URI_AUTHORITY, null);
    filter.addDataPath(URI_PATH, PatternMatcher.PATTERN_LITERAL);
    registerReceiver(mReceiver, filter);
    // Do not localize!
    Log.i(TAG, LOG_STAMP);

    return mBinder;
}

public IBinder asBinder() {
    Log.d(TAG, "asBinder");
    return mBinder;
}

@Override
public boolean onUnbind(Intent intent) {
    unregisterReceiver(mReceiver);
    return super.onUnbind(intent);
}

   } 
```

清单文件

```
<service android:name="com.commandus.ussd.USSDDumbExtendedNetworkService">
        <intent-filter >
            <action android:name="com.android.ussd.IExtendedNetworkService" />
                <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
 </service> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T11:23:59.260

您是否在清单文件中声明了广播接收器？

在清单中添加：

```
<receiver android:name="com.xxx.receivers.BootReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

<service android:name="your.package.ExtendedNetworkService" /> 
```

在 BootReceiver.java 中：

```
 public void onReceive(Context context, Intent intent) {

        context.startService(new Intent(context,ExtendedNetworkService.class));
} 
```

在 ExtendedNetworkService.java 中：

```
public class ExtendedNetworkService extends Service {

    IExtendedNetworkService.Stub binder = new IExtendedNetworkService.Stub() {

        public void setMmiString(String number) throws RemoteException {}
        public CharSequence getMmiRunningText() throws RemoteException {

            return null;
        }
        public CharSequence getUserMessage(CharSequence text)
                throws RemoteException {

            Log.d(Constants.TAG, "Message : " + text);
            Log.d(Constants.TAG, "getMmiRunningTest() : " + getMmiRunningText());
                return null;
        }
        public void clearMmiString() throws RemoteException {
        }

    };

        return false;
    }

    public void onCreate() {

        Log.d(Constants.TAG, "ExtendedNetworkService Started..");

        super.onCreate();
    }

public IBinder onBind(Intent arg0) {

        Log.d(Constants.TAG, "ExtendedNetworkService got binded...");

        return binder;

    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T21:25:24.690

完整的工作代码示例[https://github.com/alaasalman/ussdinterceptor](https://github.com/alaasalman/ussdinterceptor)

享受！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-01T12:11:46.937

请注意，该接口 IExtendedNetworkService 从 Android 4.2.2 开始已被删除 Google 尚未提供替代方案，也没有计划提供此类替代方案 参考您可以查看 [http://code.google.com/p/android/issues/详细信息？id=57120](http://code.google.com/p/android/issues/detail?id=57120)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:59:21.427

如果您使用的是 android 3.1 (API 12)，则在安装应用程序时，默认情况下它处于停止状态，直到用户明确启动您的应用程序，如 commonsblog 中所述：

[http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)

并在 android 文档中：

[http://developer.android.com/about/versions/android-3.1.html#launchcontrols](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)

我相信底线是仅包含 IntentService 或 BroadcastReceiver 的应用程序不能由它自己启动。

# c# - WCF 错误：需要排除除以下类型之一之外的所有类型。只有匹配的类型可以是有效的引用

> ID：12594253
> 
> 赞同：2
> 
> 时间：2012-09-26T03:46:12.920
> 
> 标签：c#, .net, visual-studio-2010, wcf, oop

我在使用 WCF 服务时遇到此错误。这是我使用 Microsoft Service Trace Viewer 查看错误详细信息时得到的错误报告：

运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter 错误：引用类型列表包含多个类型，在命名空间“ [http://schemas.datacontract.org/2004 ”中具有数据协定名称“EchoAddress” /07/WorldVision.NewZealand.CIMS.Common.Entities](http://schemas.datacontract.org/2004/07/WorldVision.NewZealand.CIMS.Common.Entities) '。需要排除除以下类型之一之外的所有类型。只有匹配类型可以是有效引用：“CIMS.CrmService.EchoAddress, App_WebReferences.k4hj-nad, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null”（匹配）“CIMS.AddressService.EchoAddress, App_WebReferences.k4hj-nad ，版本=0.0.0.0，文化=中性，PublicKeyToken=null"（匹配）

看起来有两个名为“EchoAddress”的单独类，我使用 [DataContract] 属性将它们定义为 WCF DataContracts，它们都存在于 WorldVision.NewZealand.CIMS.Common.Entities 命名空间中。我检查过，事实并非如此。该错误还说我需要排除以下类型之一：

CIMS.CrmService.EchoAddress CIMS.AddressService.EchoAddress

但我只在 WorldVision.NewZealand.CIMS.Common.Entities 命名空间中声明了一次“EchoAddress”类。看起来这些是对同一类型（EchoAddress）的引用，在“CrmService”和“AddressService”中，它们是我在主项目中作为“服务引用”引用的两个独立的 WCF 服务。

这是 EchoAddress 类的类型声明，它在单独的项目中声明，然后由包含实际 WCF 服务的项目引用。然后我的主项目将服务引用为服务引用：

```
[DataContract]
public class EchoAddress
{
    [DataMember]
    public string AddressType { get; set; }
    [DataMember]
    public Dictionary<string,string> AddressLines { get; set; }

    ...
} 
```

我尝试了以下方法：

*   在 VS2010 中，右键单击 WCF 服务引用 > 配置服务引用 > 从 web 服务引用配置的高级菜单中取消选中“在引用程序集中重用类型”，用于 CrmService 和 AddressService WCF 服务。
*   删除 Web 服务引用，关闭 VS2010，使用“以管理员身份运行”打开 VS2010，重新添加 Web 服务引用。
*   在整个解决方案中搜索对 EchoAddress 的重复引用
*   为所有数据类型设置 [DataContract(IsReference = false)]，根据：http: [//blogs.msdn.com/b/distributedservices/archive/2010/02/04/wcf-client-issue-with-reuse-types -from-referenced-assemblies.aspx](http://blogs.msdn.com/b/distributedservices/archive/2010/02/04/wcf-client-issue-with-reuse-types-from-referenced-assemblies.aspx)
*   检查任何地方都没有标有 [DataMember] 的类成员也称为 EchoAddress'（显然，当存在这种类型的结构时会发生此错误 - 有关详细信息，请参见上面的链接）
*   检查所有项目引用，以确保没有“循环”类型引用（例如，项目 1 引用项目 2，项目 1 具有对 service1 的服务引用，项目 2 也具有对 service1 的服务引用。检查了服务引用、项目引用和'可能导致这种情况的标准 dll 引用。
*   尝试更新服务参考，重建单个项目，整个解决方案，你能想到的每一种组合！
*   尝试在调试器中单步执行 - 没有提供更多信息，只是在我尝试通过 WCF 服务写入我们的 CRM 时失败，使用 MS Dynamics CRM API 中的 OrganizationServiceContext.SaveChanges()
    *   已阅读以下内容：
    *   [http://social.msdn.microsoft.com/Forums/en/wcf/thread/6ab067fe-0607-4b6e-8ab7-a5e2db1dd490](http://social.msdn.microsoft.com/Forums/en/wcf/thread/6ab067fe-0607-4b6e-8ab7-a5e2db1dd490)
    *   [此 WCF 错误是什么意思：“自定义工具警告：无法导入 wsdl:portType”](https://stackoverflow.com/questions/1872865/what-does-this-wcf-error-mean-custom-tool-warning-cannot-import-wsdlporttype)
    *   [http://www.lukepuplett.com/2010/07/note-to-self-don-let-wcf-svcutil-reuse.html](http://www.lukepuplett.com/2010/07/note-to-self-don-let-wcf-svcutil-reuse.html)
    *   我即将读完：
    *   [http://marktinderholt.wordpress.com/2010/02/12/silverlight-wcf-service-reference-weirdness-solved-custom-tool-error-failed-to-generate-code-for-the-service-reference- %E2%80%98servicereference1%E2%80%99-please-check-other-error-and-warnin/](http://marktinderholt.wordpress.com/2010/02/12/silverlight-wcf-service-reference-weirdness-solved-custom-tool-error-failed-to-generate-code-for-the-service-reference-%E2%80%98servicereference1%E2%80%99-please-check-other-error-and-warnin/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:03:42.750

当我们的服务复杂性增加时，由于诸如此类的各种神秘问题，我们完全放弃了添加服务引用方法。原因是缺乏控制，幸灾乐祸和错误。如果您主要使用 .net world 的服务，请观看以下视频

[http://www.dnrtv.com/default.aspx?showNum=122](http://www.dnrtv.com/default.aspx?showNum=122)

这也将为您提供大量内部信息并帮助调试 wcf 问题。一旦你采取行动，你将永远不会回来！

# c++ - 从整数范围内搜索

> ID：12594254
> 
> 赞同：1
> 
> 时间：2012-09-26T03:46:18.803
> 
> 标签：c++, algorithm, c++11

我需要从整数列表中查找一个整数。我对它们进行排序并使用 lower_bound 来查找给定整数的范围。这需要 O(lgn)。有什么办法比这更好吗？

以下是改进的提示。

1.  给定列表总是正整数
2.  列表是固定的。没有插入或删除。

一种方法是创建一个数组并索引到该数组。这可能不节省空间。我可以使用 unordered_map 吗？我应该定义什么哈希函数？

```
// Sort in reverse order to aid the lookup process
vector<unsigned int> sortedByRange;
//... sortedByRange.push_back(..)
sort(sortedByRange.begin(), sortedByRange.end(), greater);
Range = (sortedByAddress_.begin() - sortedByRange.end();
std::cout<<"Range :"<<Range<<std::endl;    //prints 3330203948

std::pair<unsigned int, unsigned int> lookup(unsigned int addr){
    pair<unsigned int, unsigned int> result;
    vector<unsigned int>::iterator it = lower_bound(sortedByRange.begin(), 
                                           sortedByRange.end(), addr);
    result.first = *it;
    result.second = *(it++);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:58:07.697

如果总范围不是很大，您可以构建一个任何方便大小的采样索引数组（您想投入多少 RAM？）

因此，例如，如果数据的总范围是 256M，并且您有一个空闲的兆字节，那么您存储数据范围的每 1K 间隔的位置。然后对于任何给定的数据点，你做一个 O(1) （实际上是 O(2) :) ）探测索引数组以找到该数据点的最低和最高合理范围，然后你可以做最低限度范围。如果您的范围在大小上没有太大变化，那应该会给您平均恒定时间查找。

如果您不想在问题上投入那么多内存，您可以尝试基于平均范围大小和模糊因子的一对线性估计。如果结果不包含特定数据点，则可以回退到完整的二进制搜索；否则，同样，限制范围内的二进制搜索应该是平均线性时间。

这是第一个建议，以防挥手不够清晰。完全未经测试的代码，甚至没有尝试编译它，并且至少可以说整数类型的使用是草率的。如果你使用它，试着让它更漂亮。我也应该（但没有）将索引范围的开始限制为 *begin_; 如果它显着大于 0，则应该修复它。

```
// The provided range must be sorted, and value_type must be arithmetic.
template<type RandomIterator, unsigned long size>
class IndexedLookup {
 public:
  using value_type = typename RandomIterator::value_type;
  IndexedLookup(RandomIterator begin, RandomIterator end)
    : begin_(begin),
      end_(end),
      delta_(*(end_ - 1) / size) {
    for (unsigned long i = 0; i < size; ++i)
      index_[i] = std::lower_bound(begin_, end_, i * delta_) - begin_;
      // The above expression cannot be out of range
    index_[size] = end_ - begin_;
  }

  RandomIterator lookup(value_type needle) {
    int low = needle / delta_;
    return std::lower_bound(index_[begin_ + low],
                            index_[begin_ + low + 1],
                            needle);
  }

 private:
  RandomIterator begin_, end_;
  value_type delta_;
  std::array<int, size + 1> index_;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:53:06.463

**方法一：**如果只需要知道给定的数字是否在列表中，并且最大值不是太大，可以考虑使用位域。查找将是 O(1) 操作。

**方法 2：**如果值的范围很大（其中有小整数和大整数），但列表大小不大（例如几千），您可以尝试（以编程方式）制作一个哈希函数

1.  与列表中的值是一对一的；
2.  将给出一个 range `0`...的值，`N + m`并且`m` 足够小；
3.  计算起来相对便宜。

然后可以将常量列表的值放入由哈希值索引的数组中，以便快速检查给定输入值的包含情况。如果列表中有漏洞（`m`非零），则应使用特殊值（例如`-1`）来指示这些漏洞。

包含测试：对于给定的输入 1\. 计算哈希值；2.如果哈希值的值超出范围，则输入不在列表中；3\. 否则，当且仅当由哈希值索引的生成数组中的值与输入值相同时，输入才属于列表。

如何制作哈希函数在 SO 中值得另一个问题（对于字符串值，存在为此目的生成工具的工具）。:-)

*限制：*如果列表不是在编译时创建的，而是在程序运行时计算或接收的，则此方法不适用。此外，如果此列表经常更改，则生成散列函数和代码所需的计算时间可能会使此方法不适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-24T05:55:48.593

**Javascript**

```
let searchRangeInterger = function(nums, target) {
  let res = [-1, -1];
  let leftSide = find(nums, target, true);
  let rightSide = find(nums, target, false);
  if (!nums.length) return res;
  if (leftSide > rightSide) return res;
  return [leftSide, rightSide];
};

let find = function (nums, target, findLeft) {
  var left = 0;
  var right = nums.length - 1;
  var mid = 0;

  while (left <= right) {
    mid = Math.floor((left + right) / 2);
    if (nums[mid] > target || (findLeft && nums[mid] === target)) {
      right = mid - 1;
    } else {
      left = mid + 1;
    }
  }

  return findLeft ? left : right;
}; 
```

# html - 在较小的固定高度元素中垂直对齐可变高度图像

> ID：12594261
> 
> 赞同：0
> 
> 时间：2012-09-26T03:47:01.673
> 
> 标签：html, css, vertical-alignment

我有以下 HTML，可以更改，但希望保持简单。

```
<div class="c">
     <img ...>
</div> 
```

图像将是可变大小的，并且应该在 div 中垂直居中。我目前正在使用以下 CSS：

```
.c {
    width: 40px;
    height: 40px;
    overflow: hidden;
}
.c img {
    width: 40px;
    height: auto;
} 
```

我尝试在 CSS 中使用 table 和 table-cell 方法，但容器会扩展以适应图像，即使使用`overflow: hidden`. 我已经考虑过服务器端方法，例如在 上使用`position: relative`负值，但如果不需要，我不希望在页面上使用任何额外的服务器端处理。我不想使用 JavaScript，所以如果这是我唯一的其他选择，我会在服务器端进行。 我应该提一下，图像将始终为 40x40 像素或更大。`top``<img>`

[这个小提琴](http://jsfiddle.net/qrSyc/)展示了我正在尝试的内容`display: table`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:52:36.160

看看这里：[http ://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

你可以选择你觉得最舒服的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:41:14.373

.........................***[演示](http://jsfiddle.net/qrSyc/3/)***

嗨，现在习惯`vertical-align:top`在你的`img tag` **throw** css 中像这样

```
img {
     vertical-align:top;
} 
```

***[现场演示](http://jsfiddle.net/qrSyc/3/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:09:23.277

我决定采用一种更简单的方法，它不会在旧浏览器上缩放图像，但会在新浏览器上缩放，并且使用更少的代码。HTML 基本上可以只是一个`<div>`标签，使用这个 CSS。

```
div.image {
    background: url(IMAGE) center center no-repeat;
    background-size: cover;
} 
```

这`background-size: cover`将允许符合 CSS3 的浏览器缩放图像以适合 div，而旧版本的浏览器仍将图像居中，但不会缩放它。这不是一个完美的解决方案，但肯定会适用于我的情况。

# c# - JMail发送带有图像变量而不是文件的html电子邮件

> ID：12594262
> 
> 赞同：0
> 
> 时间：2012-09-26T03:47:24.357
> 
> 标签：c#, asp.net, jmail

（我使用的是 C#，而不是 VB.NET）

```
Set jmail = Server.CreateObject("JMail.Message")

jmail.AddRecipient "myRecipient@hisdomain.com", "Mr.Example"
jmail.From = "me@mydomain.com"

jmail.Subject = "Here's some graphics!"
jmail.Body = "A nice picture if you can read HTML-mail."

' The return value of AddAttachment is used as a
' reference to the image in the HTMLBody.
contentId = jmail.AddAttachment("c:\myCoolPicture.gif")

' As only HTML formatted emails can contain inline images
' we use HTMLBody and appendHTML
jmail.HTMLBody = "<html><body><font color=""red"">Hi, here is a nice picture:</font><br>"
jmail.appendHTML "<img src=""cid:" & contentId & """>"
jmail.appendHTML "<br><br>good one huh?</body></html>"

' But as not all mailreaders are capable of showing HTML emails
' we will also add a standard text body
jmail.Body = "Too bad you can't read HTML-mail."
jmail.appendText " There would have been a nice picture for you"

jmail.Send( "mailserver.mydomain.com" ) 
```

这是我能找到的通过 jmail 发送 html 电子邮件的唯一示例。

但正如您在此处看到的，它是一个图像文件。

我的情况是我将生成图像并直接发送而不将其保存为文件。

那么我能为此做些什么吗？我真的不想保存它然后发送它然后删除它......

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:05:11.440

有一种方法......使用嵌入式 base64 CSS3 图像，如：

```
.myImage {background: url(data:image/gif;base64,R0lGODlhBgASALM...)} 
```

并在您的 HTML 代码中将其作为 DIV 标记引用。根本不需要保存文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:36:57.413

似乎没有其他选择，只能将其保存为文件并发送，然后将其删除....

我将把这篇文章再留几天，看看是否有可能解决这个问题。

# clojure - 我的简单 Clojure 生成类脚本有什么问题？

> ID：12594263
> 
> 赞同：4
> 
> 时间：2012-09-26T03:47:28.130
> 
> 标签：clojure, gen-class

我正在尝试学习如何`gen-class`在 Clojure 中使用。我从这个简单的脚本开始：

```
(gen-class :name MyClass :prefix MyClass-)

(defn MyClass-toString[this] "This Is My Class")

(println (MyClass.)) 
```

当我尝试运行它时，我得到

```
 Exception in thread "main" java.lang.IllegalArgumentException: Unable to resolve classname: MyClass 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:25:45.387

您需要[AOT](http://clojure.org/compilation)`gen-class`编译.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:55:36.407

编辑，另外，检查主类名是否与 lein 项目文件中定义的类名匹配。

通常你放入 clj 文件的 (ns) 标头。

```
(ns my.namespace
  (:gen-class)) 
```

这里有一些例子

```
(gen-class
    :name "some.package.RefMap"
    :implements [java.util.Map]
    :state "state"
    :init "init"
    :constructors {[] []}
    :prefix "ref-map-") 
```

# ios6 - 自定义 UISLider ， setThumbImageForState 更改

> ID：12594264
> 
> 赞同：0
> 
> 时间：2012-09-26T03:47:31.347
> 
> 标签：ios6, uislider

这是控件的屏幕截图... [http://www.flickr.com/photos/87673882@N02/8025480151/in/photostream](http://www.flickr.com/photos/87673882@N02/8025480151/in/photostream)

这是一个自定义滑块，看起来像突出显示和正常状态..

这个，控制在 ios5.1 之前工作正常，但从 ios6 开始，程序进入无限循环。谁能解释我这个问题并提出解决方案...

你可以浏览我的代码

[https://github.com/SandeepDhull1990/TVCalibratedSlider](https://github.com/SandeepDhull1990/TVCalibratedSlider)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:44:09.363

我已经解决了这个问题。检查上面提到的 git 存储库。

# c++ - 使用 QT creator 在 c++ 中播放视频

> ID：12594272
> 
> 赞同：0
> 
> 时间：2012-09-26T03:48:44.570
> 
> 标签：c++, windows, video, playback

我在带有 Qt creator IDE 的 Windows 7 64 位上使用 SDL 在 C++ 中开发游戏。我需要在比赛期间播放视频。我已经尝试过使用 smpeg.lib（来自 de SDL 本身）、QtMobility API 和 OpenCV。但我都失败了。我真的需要一个简单的教程“如何播放任何格式的视频文件”，使用任何东西！它甚至可以使用我已经尝试过的东西，但我真的需要一个好的教程。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:33:10.743

您可以[`Qt Phonon`](http://doc.qt.digia.com/qt-maemo/phonon-module.html)用于播放视频文件。官方示例可以在 [这里找到](http://doc.qt.digia.com/qt-maemo/phonon-qmusicplayer.html)

该示例用于播放音频文件，但 phonon 也可以播放视频文件。

HTH 给你一个开始。

# php - 如何翻译虚构语言？

> ID：12594274
> 
> 赞同：1
> 
> 时间：2012-09-26T03:48:54.463
> 
> 标签：php, ubuntu, gettext

我正在尝试创建一个类似于 yahoo 的 babelfish 的网站。一个主要的区别是我试图从英语翻译成一种虚构的语言（例如猪拉丁语）。我通过本教程获得了gettext：http: [//mel.melaxis.com/devblog/2005/08/06/localizing-php-web-sites-using-gettext/](http://mel.melaxis.com/devblog/2005/08/06/localizing-php-web-sites-using-gettext/)

我发现我必须在 .mo 文件和我的 php.ini 文件中指定一个语言环境。有没有避免必须设置语言环境（因为它是一种虚构的语言。）我应该只使用英语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T01:55:42.540

它是虚构语言还是鲜为人知的次要语言并不重要。您可以只分配一个新的语言环境名称（国际标准 ISO 639-1 中尚未使用）并使用它。资源文件应该类似于 message-yourlang.po ，可以通过语言环境名称“yourlang”访问。

对于网站的其他部分，您可以使用“en”语言环境和翻译的内容，每次切换到虚构的语言环境语言。在实际使用中，您可以定义一个实用函数来切换语言环境、生成翻译的消息并切换回原始语言环境。

# jquery - jQuery中的就绪函数

> ID：12594276
> 
> 赞同：-4
> 
> 时间：2012-09-26T03:49:00.847
> 
> 标签：jquery

请让我知道这段代码有什么问题。它没有显示警报。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
          $("button").click(function () {
          alert("hi");
      });
     });
    </script>

<form id="theform">
     <input type="text" name="dt" id="id" value="" />
     <input type="button" name="submit" value="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:51:11.207

```
$("button") 
```

应该

```
$("input[type=button]")    OR      $("input[name=submit]") 
```

检查[小提琴](http://jsfiddle.net/sushanth009/RHb7W/)

选择器一开始就不合适..

```
$('#btn')   // If id of the button is btn

$('.btn')   // If class of the button is btn 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:51:06.227

您的 html 中没有“按钮”类型的标签。它是输入标签。请改写为：

```
$(document).ready(function () {
  $("input[type=button]").click(function () {
    alert("hi");
  });
});
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T03:54:04.250

实现这一点的正确方法与提交按钮上的单击操作无关。它与表单上的提交操作挂钩。像这样：

```
$(document).ready(function () {
  $("#theform").submit(function () {
    alert("hi");
  });
}); 
```

# javascript - for (var i in yourObjects) { ... } 和 .hasOwnProperty() ... 讨论

> ID：12594277
> 
> 赞同：0
> 
> 时间：2012-09-26T03:49:04.993
> 
> 标签：javascript

```
var yourObjects = [ 

{ object: {obj1:"aa"}, direction: 'top' },
{ object: "obj2", direction: 'left' }, 
{ object: "obj3", direction: 'bottom' }

]; 

for (var i in yourObjects) { alert(i); } 
```

对此进行了长时间的讨论。使用`for in`迭代对象返回对象的所有属性和方法，因此通常应使用[.hasOwnProperty()方法。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)但是当我们迭代一个数组时，实际上是在`for in`迭代数组的索引（如果它是关联数组，则迭代键）。我在我拥有的所有浏览器中都试过了。但是当在 jsfiddle 中尝试时......它不一样......返回了数组拥有的所有方法。

所以我的问题是：使用`for in`迭代数组是否安全？

在您的浏览器和 jsfiddle 中尝试此代码，然后告诉我您的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T04:02:55.097

`for-in`不使用数组的原因不止一个。

请记住，在 JavaScript 中，数组只是对象的一种类型，因此`for-in`对数组进行操作与`for-in`对普通对象进行操作没有什么不同。

在您的 jsFiddle 中，您可能在左侧选择了一个名为 augmented 的库`Array.prototype`，这将是这些方法的来源。

但还有另一个原因。A`for-in`不保证枚举属性的顺序。因为没有约束，它可以乱序枚举你的索引，并且完全符合 ECMAScript。

此外，还有一些类似数组的集合，比如 NodeList，也不应该使用`for-in`，因为它们包含除了 DOM 元素之外可以枚举的默认属性。

一个简单的事实是，在 JavaScript 中，`for-in`它不是基于索引的枚举的合适工具。

* * *

对于对象，您应该只`hasOwnProperty`在有特定需要时才需要使用它。

有人建议它必须用于所有对象。这是一种极度偏执的心理。这种方法是一种保护，应该在有意义的*狭隘情况下使用。*

大多数情况下，只要您遵循良好的编程习惯，使用它就没有任何意义。这包括不将可枚举属性放在`Object.prototype`. 制作一个编程环境只是一个简单而合理的要求。

它*确实*有意义的时候是当您枚举从自定义构造函数创建的对象时，该构造函数`.prototype`具有可枚举属性的扩展。在这种情况下，它是一个合适的后卫。

在普通对象上使用它是巨大的矫枉过正，当一个更合理的方法是有简单的要求你的环境不会改变时`Object.prototype`。

# ios - 调用 SetStatusBarHidden 后，在 NavigationController 中将 UIView 向下调整 20px？

> ID：12594278
> 
> 赞同：1
> 
> 时间：2012-09-26T03:49:05.163
> 
> 标签：ios, cocoa-touch

这与我在这里看到的其他问题非常相似，当您使用 Setstatusbarhidden 方法隐藏状态栏时，导航控制器内的视图会向上移动 20px，但导航栏不会。这会导致 viewcontroller 内部的内容位于导航栏后面，并且顶部 20px 被剪裁。

大多数人希望将导航栏向上移动以填满整个屏幕，但我没有。我想暂时用通知栏替换状态栏。我希望 viewController 中的视图保持在状态栏移除前的位置。

我尝试调整视图的框架，y -= 20，然后失败，调整 UIViewControllerWrapperView 的框架，y -= 20 无济于事。我知道有一些库会做这种事情，但我想保持简单并自己做。

谢谢您的帮助。

# c - X11中如何存储事件产生的数据？

> ID：12594282
> 
> 赞同：0
> 
> 时间：2012-09-26T03:49:51.780
> 
> 标签：c, x11

我正在开发一个在 x 窗口上绘制形状的事件驱动项目。每当我在屏幕上单击鼠标时，都会生成 x 和 y 的新值。我的问题是：假设每次单击鼠标时都会生成 x 和 y 的新值，我如何在下面的代码中存储不同的 x 和 y 值。

```
int x, y;
x = report.xbutton.x;
y = report.xbutton.y;

if (report.xbutton.button == Button1) {
    XFillArc(display_ptr, win, gc_red, 
             x - win_height/80, y - win_height/80,
             win_height/60, win_height/60, 0, 360*64);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:53:26.863

代码的一个版本可能是：

```
typedef struct Position
{
    int x;
    int y;
} Position;

typedef struct PosnList
{
    size_t     num_pts;
    size_t     max_pts;
    Position  *points;
} PosnList;

void add_point(int x, int y, PosnList *p)
{
    if (p->num_pts >= p->max_pts)
    {
        size_t new_num = (p->max_pts + 2) * 2;
        Position *new_pts = realloc(p->points, new_num * sizeof(Position));
        if (new_pts == 0)
            ...handle out of memory error...
        p->max_pts = new_num;
        p->points  = new_pts;
    }
    p->points[p->num_pts++] = (Position){ x, y };
}

void zap_posnlist(PosnList *p)
{
     free(p->points);
     p->num_pts = 0;
     p->max_pts = 0;
     p->points  = 0;
} 
```

然后你的代码会做：

```
int x, y;
x = report.xbutton.x;
y = report.xbutton.y;

if (report.xbutton.button == Button1) {
    XFillArc(display_ptr, win, gc_red, 
             x - win_height/80, y - win_height/80,
             win_height/60, win_height/60, 0, 360*64);
    add_point(x, y, &positions);
} 
```

你在哪里有一个变量：

```
PosnList positions = { 0, 0, 0 }; 
```

请注意，该`add_point()`函数用于`realloc()`执行初始内存分配和增量内存分配。该代码使用 C99 复合文字将值分配给数组中`x`的`y`下一个。`Position`如果你没有 C99，你需要做两个单独的作业。

该`zap_posnlist()`函数释放一个先前初始化的`PosnList`. 你可能仍然需要一个正式的初始化函数——除非你乐于在`PosnList xxx = { 0, 0, 0 };`任何地方使用这个符号。

这段代码现在已经被 GCC 清理过了；原始版本不是，并且其中存在错误 - 导致编译器错误的错误。

* * *

测试代码——请注意，这`"stderr.h"`不是标准的标头，而是我习惯使用的错误报告代码。它提供`err_error()`和`err_setarg0()`功能。

```
#include <stdlib.h>
#include "stderr.h"

typedef struct Position
{
    int x;
    int y;
} Position;

typedef struct PosnList
{
    size_t     num_pts;
    size_t     max_pts;
    Position  *points;
} PosnList;

extern void add_point(int x, int y, PosnList *p);
extern void zap_posnlist(PosnList *p);

void add_point(int x, int y, PosnList *p)
{
    if (p->num_pts >= p->max_pts)
    {
        size_t new_num = (p->max_pts + 2) * 2;
        Position *new_pts = realloc(p->points, new_num * sizeof(Position));
        if (new_pts == 0)
            err_error("Out of memory (%s:%d - %zu bytes)\n",
                       __FILE__, __LINE__, new_num * sizeof(Position));
        p->max_pts = new_num;
        p->points  = new_pts;
    }
    p->points[p->num_pts++] = (Position){ x, y };
}

void zap_posnlist(PosnList *p)
{
    free(p->points);
    p->num_pts = 0;
    p->max_pts = 0;
    p->points  = 0;
}

#include <stdio.h>

int main(int argc, char **argv)
{
    PosnList positions = { 0, 0, 0 };

    err_setarg0(argv[0]);

    if (argc > 1)
        srand(atoi(argv[1]));

    for (size_t i = 0; i < 37; i++)
        add_point(rand(), rand(), &positions);

    for (size_t i = 0; i < positions.num_pts; i++)
        printf("%2zu: (%5d, %5d)\n", i, positions.points[i].x, positions.points[i].y);

    zap_posnlist(&positions);
    return(0);
} 
```

* * *

*`stderr.h`如果您想要 和 的来源，请与我联系（查看我的个人资料）`stderr.c`。*

# iphone - 更新到 4.5 后 xcode 出现奇怪错误

> ID：12594286
> 
> 赞同：1
> 
> 时间：2012-09-26T03:50:21.067
> 
> 标签：iphone, objective-c, xcode

我在 xcode 中运行我的应用程序。当我在计算机上模拟它时似乎工作正常，但是当我尝试在我的设备上对其进行测试时，我收到以下错误。我四处寻找它，但真的不知道从哪里开始，因为它有点莫名其妙！有没有人看到这个错误或者甚至知道它与什么有关？谢谢。

![错误信息](../Images/5342de7150bf0cffecc59dce9a0d2b94.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T04:05:54.337

秘密*通常*在您的 OP 中的图像中看到的链接器警告中找到——它可能说（解释）“忽略`PATH/TO/FILE`您正在链接的二进制文件没有匹配架构的图像/文件”。当它完成链接时，它意识到它缺少这些符号并发出错误。

通常，当您链接到的库没有`ARCHS`指定匹配的标志时，就会发生这种情况。由于 Xcode 4.5 放弃了 armv6 并添加了对 armv7s 的支持，因此您可能会根据用于构建库的工具链获得不同的值。

解决方法是打开编译这些符号的项目，并更新它`ARCHS`以匹配您项目的`ARCHS`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T03:53:46.117

部署目标设置为什么？我敢打赌它低于 iOS 6，其中 UICollectionView 还不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:39:26.257

尝试目标 -> 构建设置 -> 构建活动架构 -> 是

# c# - JObject 的 C# 问题

> ID：12594289
> 
> 赞同：0
> 
> 时间：2012-09-26T03:50:50.060
> 
> 标签：c#, asp.net, sharepoint, json.net

我的共享点 Web 部件有以下代码：

```
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.Script.Serialization;
using Newtonsoft.Json.Linq;

namespace ScheduleWeeks.WP_ScheduleWeek
{
    public partial class WP_ScheduleWeekUserControl : UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (Request.Params["jsonData"] != null)
            {
                string jsonStr = Request.Params["jsonData"];
                JObject root = JObject.Parse(jsonStr);
            }
            else
            {
                Response.Write("nothing there");
            }
        }  
    }
} 
```

但它不起作用并显示如下错误

> [FileNotFoundException：无法加载文件或程序集“Newtonsoft.Json，版本=4.5.0.0，文化=中性，PublicKeyToken=30ad4fe6b2a6aeed”或其依赖项之一。找不到文件。]

但后来我评论字符串“ `JObject root = JObject.Parse(jsonStr);`”所有作品都没有任何错误。我做错了什么？PS：Json.net 是用 NuGet 安装的。

# javascript - 为什么检查代码块中的变量定义时jslint会出错

> ID：12594291
> 
> 赞同：2
> 
> 时间：2012-09-26T03:50:59.410
> 
> 标签：javascript, jquery, jslint

我有以下代码：

```
 $('#modal .update-title')
            .change(function () {
                var title = $('option:selected', this).prop('title');
                $(this).prop('title', title);

                // For the question screen, after the initial set up 
                // changes move the title to the title input field.
                if ($(this).data('propagate-title') === 'yes') {
                    var m = this.id.match(/^modal_TempRowKey_(\d+)$/);
                    if (m) {
                        $("#modal_Title_" + m[1]).val(title);
                    }
                }
            }); 
```

当我运行 jslint 时，它给了我以下错误：

```
 Combine this with the previous 'var' statement.
   var m = this.id.match(/^modal_TempRowKey_(\d+)$/); 
```

jslint 错了还是我错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T03:58:10.730

使用 if 条件不会创建新范围。所以变量 m 只有在条件为真时才存在。所以这是你可以做的

```
$('#modal .update-title').change(function () {
    var title = $('option:selected', this).prop('title'),
    m = null; // or just m;
    $(this).prop('title', title);

    // For the question screen, after the initial set up 
    // changes move the title to the title input field.
    if ($(this).data('propagate-title') === 'yes') {
        m = this.id.match(/^modal_TempRowKey_(\d+)$/);
        if (m) {
            $("#modal_Title_" + m[1]).val(title);
        }
    }
}); 
```

# java - 冒泡排序陷入无限循环？

> ID：12594294
> 
> 赞同：0
> 
> 时间：2012-09-26T03:51:05.277
> 
> 标签：java, linked-list, infinite-loop, bubble-sort

我一直在努力让我的冒泡排序工作，现在它似乎陷入了无限循环。

我以为我正在适当地增加指针以解决这个问题，但似乎不是。如果有人能发现我的增量器应该去哪里让它适当地退出，那就太好了！

冒泡排序法：

```
public static void bubbleSort(DoubleLinkedList list) //static method used to sort the linked list using bubble sort
      {
          int i = 0;
          int j = 0;
          Node currentNode = list.head;
          Node previousNode = currentNode;
          Node tempNext =  currentNode;
          Node tempPrevious = currentNode;
          Node sentinelNode = currentNode;

          for(i=1; i<list.getSize(); i++)
          {

              while(sentinelNode.getNext() != null)
              {
                  if(currentNode.getData() > currentNode.getNext().getData())
                  {
                      if(currentNode == list.head)
                      {
                          Node tempNode = currentNode.getNext();

                          list.head = tempNode;
                          tempNext = tempNode.getNext();

                          tempNode.setNext(currentNode);
                          currentNode.setNext(tempNext);
                          currentNode.setPrevious(tempNode);

                          tempNext.setPrevious(currentNode);
                      }
                      else if(currentNode.getNext() == list.last)
                      {
                          Node tempNode = currentNode.getNext();
                          list.last = currentNode;
                          tempPrevious = currentNode.getPrevious();

                          tempNode.setNext(currentNode);
                          tempNode.setPrevious(tempPrevious);

                          currentNode.setPrevious(tempNode);
                      }
                      else
                      {
                          Node tempNode = currentNode.getNext();
                          tempPrevious = currentNode.getPrevious();
                          tempNext = currentNode.getNext();

                          tempPrevious.setNext(tempNode);
                          tempNext.setPrevious(currentNode);

                          currentNode.setNext(tempNext);
                          tempNode.setPrevious(tempPrevious);
                      }

                  }

                  sentinelNode = sentinelNode.getNext();

              }
          }

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:23:03.367

你的问题在你的 else 子句中。仔细看看你的设置。首先你有，

```
tempNode = currentNode.getNext();
tempNext = currentNode.getNext(); 
```

它们指向同一个对象。当你这样做时

```
currentNode.setNext(tempNode); 
```

你没有改变任何东西，因为 tempNode 已经是 current.getNext();

正因为如此，您的 sentinelNode 在遍历 DoubleLinkedList 时遇到问题。

# flash - 无法通过 LAN 安装 Red5 演示 - 错误：NetConnection.Connect.Failed

> ID：12594311
> 
> 赞同：0
> 
> 时间：2012-09-26T03:52:46.253
> 
> 标签：flash, ubuntu, installation, red5

我刚刚安装了 Red5 1.0，按照所有的演示文件说明，无法安装任何演示。

当我尝试从 LAN 上的计算机运行演示安装程序时，出现“错误：NetConnection.Connect.Failed”错误...

我在 Red5 服务器机器上没有 GUI，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:50:47.940

[您可以简单地从http://red5.googlecode.com/svn/snapshots/](http://red5.googlecode.com/svn/snapshots/)手动复制 .war 文件

# python - 如何在不重复值的情况下更新机器人和对象的位置

> ID：12594312
> 
> 赞同：1
> 
> 时间：2012-09-26T03:52:51.123
> 
> 标签：python, lego, nxt

我想知道如何解决值被重复传递给我的 activate(valueList) 方法的问题。程序的工作方式是有一个机器人和一个球，主循环连续传递值列表方法。我的目标是将机器人转向球的方向并朝它移动。问题是，如果球仍在移动，值保持不变，直到它停止，这导致机器人转向先前的角度流传下来。有没有特定的方法可以解决这个问题？请注意，即使机器人和球处于静止状态，向下传递的 valueList 中的值也会区分 +2 或 -2。PS。我正在使用通过网络连接到传递值的相机的乐高 nxt (nxt-python)

例如：

返回值的方法：

```
def updateBallx(valueList):
# updates red ball x-axis position
ballx = int(valueList[8])
return ballx

def updateBally(valueList):
    # updates red ball y-axis position
    bally = int(valueList[9])
    return bally

def updateRobotx(valueList):
    # updates robot x-axis position
    robotx = int(valueList[12])
    return robotx

def updateRoboty(valueList):
    # updates robot x-axis position
    roboty = int(valueList[13])
    return roboty

def updateRobota(valueList):
    # updates robot angle position
    robota = int(valueList[14])
    return robota 
```

一个 activate 方法：ps turn_to 和 move_to 方法显示转向和向对象移动

```
def activate():

new_x = updateBallx(valueList)
print 'Ball x',new_x
new_y = updateBally(valueList)
print 'Ball y',new_y
old_x = updateRobotx(valueList)
print 'Robot x',old_x 
old_y = updateRoboty(valueList)
print 'Robot y',old_y
angle = updateRobota(valueList)
print 'Robot angle',angle

turn_to(brick,new_x, new_y, old_x, old_y, angle)
#time.sleep(2)
#move_to(brick,new_x, new_y, old_x, old_y)
#time.sleep(3)
#kickBall(brick,new_y, old_y)
#time.sleep(3) 
```

以及这个不断将值传递给 valueList 的主循环

```
screenw = 0
screenh = 0
while 1:
    client_socket.send("loc\n")
    data = client_socket.recv(8192)
    valueList = data.split()

    if (not(valueList[-1] == "eom" and valueList[0] == "start")):
        #print "continuing.."
            continue

        if(screenw != int(valueList[2])):
            screenw = int(valueList[2])
            screenh = int(valueList[3])

    activate(valueList) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:13:48.187

所以这听起来像是你试图只改变。在这种情况下，您可能只想保留以前的值并进行比较。然后，仅`activate()`在检测到更改时调用。

```
last_valueList = []
while True:
    client_socket.send("loc\n")
    data = client_socket.recv(8192)
    valueList = data.split()

    if (not(valueList[-1] == "eom" and valueList[0] == "start")):
        #print "continuing.."
            continue

        if(screenw != int(valueList[2])):
            screenw = int(valueList[2])
            screenh = int(valueList[3])
    if valueList != last_valueList
        activate(valueList)
    last_valueList = valueList[:] # copy list 
```

# asp.net - 如何通过 web.config 在 ASP.NET 中重定向已经登录的用户？

> ID：12594318
> 
> 赞同：3
> 
> 时间：2012-09-26T03:53:58.147
> 
> 标签：asp.net, authentication, membership

我正在使用**表单**身份验证。

我创建了访问规则。

一切正常，但我想将已经登录的用户重定向到特定页面。

我知道我可以通过**代码**做到这一点，但我想知道如何通过**web.config**做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:08:35.957

试试这样的 defaultUrl 属性

```
 <authentication mode="Forms">
     <forms loginUrl="member_login.aspx" defaultUrl="index.aspx" />
 </authentication> 
```

如文档[here中所述](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.defaulturl%28v=vs.80%29.aspx)

# java - 如何在 Eclipse IDE 的 Seam Validation 中禁用？

> ID：12594325
> 
> 赞同：0
> 
> 时间：2012-09-26T03:54:59.157
> 
> 标签：java, eclipse

当我保存每个文件时，`Seam Validation`检查项目。我正在等待完成验证。我想禁用此验证。我不知道在IDE中配置在哪里。你能提供方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:19:14.803

它应该在验证下的项目属性中可用。（单击 Package Explorer 中的项目，然后在主菜单上单击 Project > Properties，然后在 Project Properties 对话框的左侧窗格中查找 Validation。）

# sql-server - 在 SQL 服务器之间传输数据的最佳做法是什么？

> ID：12594328
> 
> 赞同：1
> 
> 时间：2012-09-26T03:55:27.363
> 
> 标签：sql-server, ssis, dts

我们有许多内部 SQL Server 在运行，并且有一些日常工作正在传输数据。我们还有一些外部数据库，我们将使用 view 或 txt 来传输数据。

现在，我们正在使用 DTS & SSIS。但是由于某些原因，我们的经理不喜欢DTS/SSIS，所以我们从DTS/SSIS搬出来了，但是我们仍然需要传输数据。他们建议开发一些应用程序，用于加载数据/文件，然后插入目标。

这是一个好的解决方案吗？有什么建议吗？

我认为唯一合理的原因是：如果出现性能问题，在 DTS/SSIS 中很难找到原因

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:51:13.710

在服务器之间传输数据的方法有很多。您可以使用带有 OPENROWSET 查询的链接服务器，可以使用带有暂存文件的 BCP 实用程序，或者您可以使用 PowerShell 脚本等等。

最合适的方法取决于您的具体情况，但对我来说，SSIS 通常是最合适的技术，尤其是在涉及转换的情况下。SSIS 拥有 ETL 世界纪录（尽管这是一个使用大量硬件的人为实验），因此应该能够满足您的性能需求。

您可以做很多事情来提高 SSIS 数据移动的性能，并且您的问题中没有足够的信息来确定您需要做什么，但这里有一些关于 SSIS 性能的指针：

*   确保数据流中的缓冲区大小设置得当，通常高于默认的 10000 行，但具体大小取决于您的内存容量。

*   确保您使用的是具有快速加载功能的 OLEDB 目标

*   下载 Balanced Data Distributor 组件并并行加载表。这还需要堆或按顺序数据上的 TABLOCK 和聚集索引上的 TF 610。

*   避免同步转换，例如排序。

# java - 用于跨平台应用程序的 JavaFX 2.0 和 Qt

> ID：12594330
> 
> 赞同：14
> 
> 时间：2012-09-26T03:55:37.553
> 
> 标签：java, c++, qt, cross-platform, javafx-2

我需要一些处理跨平台应用程序（特别是带有 GUI 的程序）的开发人员的建议。

我将很快创建一个需要跨平台的应用程序，因此我对两个不同的框架进行了一些初步研究：JavaFX 2.0 和 Qt。

老实说，两者都可以满足我的需求。所以然后我问自己为什么我会选择一个而不是另一个（剧透警报：我不知道答案：P）。我确实知道 JavaFX 2.0 是相当新的（截至 2012 年）并且不完全支持跨平台，但它最终会支持。

我提出的问题是：您会将其中哪一个用于跨平台应用程序，您在做出决定时考虑了哪些标准？

感谢您抽出时间来阅读！:)

**编辑：** 在考虑这个问题时供您参考，我将编写的应用程序涉及读取/写入 XML 文件、显示图像以及创建一些具有自定义功能的小部件。我已经用 .NET 用 C# 编写了一个类似的应用程序，但是在考虑 JavaFX 2.0 或 Qt 以实现跨平台可用性时，我希望得到建议。

再次感谢！:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-27T01:14:18.653

这是一个老问题：稳定性与前沿。我将尝试根据您的应用程序功能为您提供一些个人见解。

> JavaFX 2.0 相当新（截至 2012 年）并且不完全支持跨平台

嗯，它完全支持 Linux、Windows 和 Mac。我可以这么说是因为我正在 Mac 中开发一个 JavaFX 2.2 应用程序，服务器在 Linux 机器上运行，客户端在 Windows 机器上运行。

> 读/写 XML 文件

我还没有看到比 sax2 更好/更容易/更快的工具/接口来解析 XML。当然，QtXMLPatterns 模块解析器值得尊重，但他们甚至正在开发基于 SAX2 的 XML 解析器（顺便说一句，这并不完整，并且与传统的 SAX1 方法不完全兼容）所以我想说给 JavaFX 2 添加一些分数。

> 显示图像

这两种技术都可以轻松地显示图像，但 JavaFX 2.2 缺少一些用于**图像处理**的工具（特别是格式编解码器）。如果图像处理是一个关键问题，我会说 Qt 在战斗中稍微领先。

> 创建一些具有自定义功能的小部件。

到目前为止，这在 JavaFX 2 中并不是一件容易的事，因为 Stage 对象没有像 ALWAYS_ON_TOP 这样的选项，并且直到 3.0 才会有（2013 年的某个地方）这并非不可能，但 Qt 已经有一些很好的自定义工具/display/handle 小部件，我们根本无法在 JavaFX 中重现。

> 您会将其中哪一个用于跨平台应用程序，您在做出该决定时考虑了哪些标准？

好吧，JavaFX 2.2 是由 Java 构成的，并且是为 Java 编写的。我个人发现用 Java 编程比 C++ 更好也更容易。在 Java 中您永远不必为指针而苦恼，您始终可以依靠垃圾收集器进行内存管理，网络上有大量教程和文档（我相信它们超过了 C++）以及不断增长的 Java 大师社区。

抽象地说，我选择 JavaFX 2.2 是因为它很漂亮，因为它很酷，因为我可以更轻松地处理 MVC 并且因为我喜欢 Java，但我相信如果你的应用程序的小部件部分是主要目的，你应该选择 Qt其中。

希望对你有帮助，加油

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-28T07:21:55.923

我目前正在研究适合开发离线 html5 创作应用程序的各种跨平台框架。除了跨平台操作（Windows、Linux、OS-X）之外，我的应用程序还具有以下主要要求：

嵌入式数据库 嵌入式（或主流浏览器）HTML5 渲染引擎 高性能可编辑 DND 树、拆分面板和富文本编辑器小部件 中型图像处理 U 盘便携性

我认真研究了这些框架：

jQuery (JavaScript), HTML5, CSS3 Google Web Toolkit [GWT] (Java to JavaScript) JavaFX 2.0 (Java) QT (C++ (Java binding available)) Xulrunner (XML, JavaScript) GTK+ (C) Adob​​e Air Pajamas

我在所有这些技术的书籍上花了一点钱，我已经开始编写原型代码，看看每个框架能带我多快和多远。

最初，JavaFX 2.0 让我跑得最快，而且幅度很大。对此的简单解释是，使用 JavaFX，所有工具、IDE、库、文档、代码示例、周转、调试、社区支持、制造商 (Oracle) 支持和学习曲线都以最少的阻抗不匹配出现。

JavaFX 最大的胜利可能是它易于实现客户端嵌入式数据库 (Derby)。令人惊讶的是，对于所有其他框架，这项任务要困难得多，而且“笨拙”。

不幸的是，当我发现 WebView 小部件不从本地 file:// URL 执行 JavaScript 时，我遇到了一个严重的 JavaFX 绊脚石。QtWebKit、GTKWebKit、Safari 和 Opera（都基于 WebKit）也表现出相同的 file:// JavaScript 阻止行为（但 Chrome 没有），所以我推测这是默认的 WebKit 安全措施。

当时，我认为 file:// JavaScript 问题是 JavaFX 的一大障碍，所以我继续开发 jQuery、GWT 和 Xulrunner 原型。然而，结果是，我的原型制作效率大幅下降。与这些其他框架的科学怪人和阻抗不匹配明显比 JavaFX 更糟糕。

如此之多，以至于在杂草丛生中徘徊了数周之后，我回到了我的 JavaFX 原型，非常有动力去寻找工作。我最终通过在原型中嵌入 Java SE 6 的 Web 服务器并通过使用以下格式的 URL 加载 JavaFX WebEngine 来连接到本地文件解决了这个问题：“http://localhost:58357/xxxxx.html”解除阻塞 JavaFX 原型这种方式就像回家一样。这是一股真正的新鲜空气，更不用说大大提高生产力了。

基于这些经验，这里有一些见解可能有助于 JavaFX 与 Qt 的辩论。

*   我同意 JavaFX 与 Qt 的问题，因为这两个框架分别最终成为我的 #1 和 #2 最喜欢的、最有成效的选择。
*   也就是说，我会将 jQuery/HTML5/CSS3 框架添加到组合中。这个框架非常强大，并且充满了 x 平台
    应用程序开发的潜力，以至于我什至可以说它是不可避免的。在我对小部件控件的广泛搜索中，可编辑 DND 树、拆分面板和富文本所见即所得编辑器小部件的主要候选者结果是开源 jQuery 插件。一旦解决了本地 file:// 问题，jQuery/HTML5/CSS3 就可以很好地与 JavaFX WebView 小部件兼容。jQuery/HTML5/CSS3 不足的一个领域是客户端数据库存储。这就是 JavaFX 和 jQuery/HTML5/CSS3 框架的组合被证明非常强大的地方。
*   尽管 Qt 模块是用 C++ 编写的，但 Qt 模块具有 Java 和 JavaScript 语言包装器，这意味着开发人员无需了解或使用 C++ 即可使用 Qt。
*   这就提出了一个问题，即它不一定是 JavaFX 与 Qt，非此即彼的问题。事实上，一个更有建设性和有益的问题很可能是“JavaFX 和 Qt？”。
*   这带来了另一个重要的一点：我很快发现我最好的跨平台应用程序开发框架实际上是 JavaFX 2、直接 Java SE、Swing（用于传统自定义小部件）、WebKit 和 jQuery/HTML5/ 的混合体CSS3。未来，GWT、相关的第三方 GWT 库和 Qt 模块可能会加入其中。这里的重点是使用单一、纯基因框架的计划很快就被淘汰了。
*   目前，将整个混合框架绑定在一起的一个通用线程是普通的 Java SE。而且因为 JavaFX 2 是基于 Java SE 构建的，所以我的投票是从 JavaFX 2 开始，然后根据需要添加 Swing、WebKit、jQuery/HTML5/CSS3、GWT 和 Qt。
*   最后，这篇文章说服了我加入 JavaFX 的行列。 [http://fxexperience.com/2012/04/interview-with-peter-zhelezniakov/](http://fxexperience.com/2012/04/interview-with-peter-zhelezniakov/)

- H

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-03T23:31:31.667

从时间戳中可以看出，4 个月前我报告说我选择 JavaFX2 而不是 QT 来进行原型研究项目。大约 2 个月前，我开始从 JavaFX2 切换到 QT，从那以后就再也没有回头。争论的焦点是从原型设计到生产的转变。在编写生产代码方面，QT 被证明远远领先于 JavaFX2。

与往常一样，魔鬼在细节中，而正是一堆小东西产生了很大的不同。使用 JavaFX2，我一直在面对和解决一些小问题，例如无法控制的拆分器窗格调整大小行为、有限的树控制和有限的 WebKit API 访问（例如，尝试实现浏览器缩放按钮，或将整个网页保存到本地 html 文件 - 可行但比应有的笨重 100 倍）。当加在一起时，这些“次要”的变通办法会使进展减慢到停止。

有了 QT，这样的障碍就少了很多，因此，从原型到产品的过渡是自然的、无缝的，而且速度要快几个数量级。

不利的一面是，使用 QT 进入“Hello World”需要更长的时间。但是，一旦到达那里，生产力就迅速超过并远远超过了 JavaFX2。原因之一是 QT 文档、示例程序和开发人员社区更加广泛。QT 从 1992 年开始出现，JavaFX2 从 2011 年开始出现，这种年龄差异在两个 GUI 框架的成熟度水平上产生了显着差异。

至于 Java 与 C++ 的问题，根本不是问题。两者都是很棒的语言。就个人而言，出于各种效率、生产力和性能原因，我发现 C++ 是卓越的 GUI 语言，但同样，这是个人结论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-28T09:54:54.700

我认为 Qt 最好和最有趣的部分是它的信号槽，特别是在处理线程时，它变得非常容易。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T11:47:35.293

来自 .NET/C#，您还应该将[Real Studio](http://www.realsoftware.com)视为创建跨平台应用程序的一种方式。它当然可以满足您对尝试创建的内容的要求，并且比 JavaFX 或 Qt 简单得多。

# java - LibGDX 打包 .tmx 地图

> ID：12594335
> 
> 赞同：3
> 
> 时间：2012-09-26T03:56:52.480
> 
> 标签：java, libgdx

我正在尝试通过命令行打包我的 .tmx 地图，但我不断收到以下信息：

```
Could not find or load main class libs.gdx-audio-sources.jar 
```

我感觉这只是一个随机的 .jar，无论如何它在我的资产文件夹中的 libs 文件夹中。我输入的命令是：

```
java -cp libs/* tiles output file   (sorry this shouldn't be a comment) 
```

libs 文件夹包含所有的罐子，我确实添加了每一个 libGDX 罐子，只是为了确定。瓦片是我的 .tmx、图像包文件和图像的文件夹，输出是我的空输出文件夹。如果我只是输入 /tiles 和 /output 的目录作为 TiledMapPacker.main 的参数（当然是在一个数组中），我就会得到

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/badlogic/gdx/tools/imagepacker/TexturePacker$Settings
at com.badlogic.gdx.tiledmappacker.TiledMapPacker.main(TiledMapPacker.java:351)
at com.game.packer.Main.main(Main.java:22)
Caused by: java.lang.ClassNotFoundException: com.badlogic.gdx.tools.imagepacker.TexturePacker$Settings
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 2 more 
```

我很确定 imagepacker.texturepacker$settings 在 tiled-preprocessor.jar 中，它在我的 libs 文件夹中，所以我不知道发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T17:55:29.787

幸运的是，您不再需要这样做了。
他们已经完全重构了 Tiled 地图代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:46:50.850

问题在于外壳扩展：

```
java -cp libs/* tiles output file 
```

shell 将扩展`libs/*`到目录中的所有文件，因此您将获得以下命令行：

```
java -cp libs/gdx-audio.jar libs/gdx-audio-sources.jar ... tiles output file 
```

并且`-cp`需要一个冒号分隔的列表，而不是空格分隔的。所以第二个 JAR 文件被解释为“主类”参数，但`libs/gdx-audio-sources.jar`显然不是类的名称。

所以我们需要[用冒号分隔的文件名](https://stackoverflow.com/questions/3430569/globbing-pathname-expansion-with-colon-as-separator)，可以这样做：

```
java -cp $(printf "%s:" libs/*) tiles output file 
```

# windows-8 - 如何清除由 Windoes8 Frame 控件托管的整个导航历史记录？

> ID：12594342
> 
> 赞同：1
> 
> 时间：2012-09-26T03:58:48.323
> 
> 标签：windows-8

我想清除框架的历史记录。但我在框架类 API 中找不到这样的方法或属性。请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:34:07.773

我需要这样做。我刚刚在 app.cs 中执行了相同的步骤来创建一个没有历史记录的新框架（假设您正在使用模板）。

```
Frame rootFrame = new Frame();
SuspensionManager.RegisterFrame(rootFrame, "AppFrame");
Window.Current.Content = rootFrame;
if (!rootFrame.Navigate(typeof(MyAwesomePage)))
{
     throw new Exception("Failed to restart navigation :(");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:41:40.917

我不认为这是一个非常明智的想法。如果您使用的是导航服务，则无需清除它的历史记录。这样做可能会导致您无法通过 Windows 应用商店认证，因为这似乎表明您正在做一些事情来改变用户希望在应用程序中导航的方式，根据我的经验，这是一个很大的禁忌这些应用程序。但我可能是错的。你能提供更多的上下文吗？

# mysql - 如何在同一列中选择多个值？

> ID：12594343
> 
> 赞同：14
> 
> 时间：2012-09-26T03:58:51.500
> 
> 标签：mysql

我正在尝试在单个列中选择多个值。基本上我希望查询选择列下的所有`family`值`Software_1Y`，`XI_1Y`并且`P1_1Y`

我正在运行这个查询：

```
SELECT `salesorder`
    ,`masterproduct`
    ,`family`
    ,`birthstamp`
    ,`duedate`
    ,COUNT(*) AS `total`
FROM `report`
WHERE `birthstamp` BETWEEN '$startDT'
        AND '$endDT'
    AND `family` = 'Software_1Y'
    AND `family = 'XI_1Y'
    AND `family` = 'PI_1Y'
GROUP BY `salesorder`
    ,`masterproduct`
    ,`family`
    ,`duedate`; 
```

我的查询没有返回任何行，但我是逐个搜索每个家庭，我有值。

我的查询有什么问题？

另外，我的目的是获取`family`值为`Software_1Y`,`XI_1Y`和的所有行`PI_1Y`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T04:01:23.147

改用 IN 怎么样

```
SELECT  `salesorder`,
        `masterproduct`,
        `family`,
        `birthstamp`,
        `duedate`, 
        COUNT( * ) AS `total` 
FROM    `report` 
WHERE   `birthstamp` BETWEEN '$startDT' AND '$endDT' 
AND     `family` IN ('Software_1Y','XI_1Y','PI_1Y')
GROUP BY    `salesorder`,
            `masterproduct`,
            `family`,
            `duedate`; 
```

之所以没有返回值，是因为这个部分

```
AND `family` = 'Software_1Y' 
AND `family = 'XI_1Y' 
AND `family` = 'PI_1Y' 
```

`family`不能同时是所有 3 个值，但它可能是 3 个值中的 1 个。

这就是为什么你会使用 IN。

另一种看待它的方法是使用 OR，但这真的很啰嗦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:05:02.850

```
$query="   SELECT `salesorder`,`masterproduct`,`family`,`birthstamp`,`duedate`, COUNT( * ) AS `total` FROM `report` 
    WHERE `birthstamp` BETWEEN '$startDT' AND '$endDT' 
           AND (`family` = 'Software_1Y' 
           OR `family` = 'XI_1Y' 
           OR `family` = 'PI_1Y') 
    GROUP BY `salesorder`,`masterproduct`,`family`,`duedate` "; 
```

在查询 FAMILY 列时，它必须是由于 AND 而不是 OR。

```
$result = mysql_query($query);
while ($row = mysql_fetch_array($result)) 
{
//Operation you want to perform
} 
```

@jude：您似乎直接将字符串类型的查询作为参数直接传递给mysql_fetch_array，这是错误的。而是按照上述方法...

# sql - 如何在没有小数舍入的情况下将小数传递给存储过程？

> ID：12594347
> 
> 赞同：0
> 
> 时间：2012-09-26T03:59:51.817
> 
> 标签：sql, stored-procedures, parameters, user-defined-types

嘿，我有一个将参数传递给的存储过程。参数类型是“结构化的”并使用用户定义的表类型。表格类型看起来像这个精简版。

```
CREATE TYPE dbo.LineItem_TYPE AS TABLE
(

UnitTrade numeric (22,4), 
TotalBuy numeric (22,4),
TotalSell numeric (22,4), 
GrossProfit numeric (22,4), 
QuoteReference varchar (255)
) 
```

实际表与此匹配（相同的精度等），但对十进制值进行四舍五入。什么是错的 SQL 大师？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:33:02.187

检查您如何针对此示例使用它。

```
CREATE TYPE dbo.LineItem_TYPE AS TABLE
(
    UnitTrade numeric (22,4), 
    TotalBuy numeric (22,4),
    TotalSell numeric (22,4), 
    GrossProfit numeric (22,4), 
    QuoteReference varchar (255)
);
GO
CREATE TABLE LineItem
(
    UnitTrade numeric (22,4), 
    TotalBuy numeric (22,4),
    TotalSell numeric (22,4), 
    GrossProfit numeric (22,4), 
    QuoteReference varchar (255)
);
GO
create proc dbo.uspInsertLineItem
@li dbo.LineItem_TYPE READONLY
AS
    set nocount on;
    insert LineItem
    select *
    FROM @li;
GO
declare @li dbo.LineItem_TYPE;
insert @li select
1.23451234,123456789.1111,10.50,1,'Quote1' union all select
999999999999999999.9999,1.1,2.2,null,'Quote1';
exec dbo.uspInsertLineItem @li;
GO
select * from LineItem

------- results

UnitTrade                TotalBuy        TotalSell  GrossProfit  QuoteReference
------------------------ --------------- ---------- ------------ ---------------
1.2345 ****              123456789.1111  10.5000    1.0000       Quote1
999999999999999999.9999  1.1000          2.2000     NULL         Quote1 
```

您可以看到所有数字都忠实地存储到正确的小数位数，除了标有*** * 的单数。我们`1.23451234`输入@li，因为它是a `numeric(22,4)`，一旦它进入用户类型，它就已经是1.2345。看到这个：

```
declare @li dbo.LineItem_TYPE;
insert @li (UnitTrade)
select 1.23451234;
select UnitTrade from @li

--------- result

UnitTrade
---------------------------------------
1.2345 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:40:36.583

您可以尝试使用变量类型`float`而不是`numeric`.

还要确保将`decimal`/`double`变量从程序传递给存储过程。

# php - 将操作按钮命令合并到主页

> ID：12594348
> 
> 赞同：1
> 
> 时间：2012-09-26T03:59:56.870
> 
> 标签：php

我有一个名为 admin.php 的页面，其中包含一些代码和按钮。我的问题是其中一个按钮应用了最初是 HTML 代码的操作代码，但我将其转换为 php，代码如下：

```
echo "<form action=\"write.php\" method=\"post\">\n"; 
echo " <p>your MoD name: <input type=\"text\" name=\"mdname\" /></p>\n"; 
echo " <p><input type=\"submit\" /></p>\n"; 
echo "</form>\n"; 
```

此代码调用 write.php 和 write.php 代码是这样的：

```
<?php
header ('Location: admin.php ');
$myFile = "methods\actmod.txt";
unlink($myFile);
$handle = fopen("methods\actmod.txt", "a");
foreach($_POST as $variable => $value) {
   fwrite($handle, $variable);
   fwrite($handle, "=");
   fwrite($handle, $value);
   fwrite($handle, "\r\n");
}
fwrite($handle, "\r\n");
fclose($handle);
exit;
?> 
```

此代码将一些数据写入名为 actmod.txt 的 txt 文件并返回到管理页面。我想问有什么方法可以将 write.php 合并到主 admin.php 页面，所以当我点击管理页面中的提交按钮时，它将使用任何外部文件并直接从管理页面运行命令，我不会管理页面后面有任何外部文件吗？

我看到很多页面都有这样的地址“http://site.com/admin.php?act=write

我希望每个人都明白我的意思。我是 php 新手，我搜索了很多，我感谢任何人的帮助。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:10:36.890

在你的 admin.php 中使用它

```
<?php

if(array_key_exists('action', $_GET)&&$_GET['action']=='write') {
    $myFile = "methods\actmod.txt";
    // unlink($myFile); deletes your file, if you want to ADD text, don't :)
    $handle = fopen($myFile, "a");
    foreach($_POST as $variable => $value) {
        fwrite($handle, $variable);
        fwrite($handle, "=");
        fwrite($handle, $value);
        fwrite($handle, "\r\n");
    }
    fwrite($handle, "\r\n");
    fclose($handle);
}

echo "<form action=\"admin.php?action=write\" method=\"post\">\n"; 
echo " <p>your MoD name: <input type=\"text\" name=\"mdname\" /></p>\n"; 
echo " <p><input type=\"submit\" /></p>\n"; 
echo "</form>\n"; 
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T04:08:18.633

在你的 admin.php

```
<?php
$post = count($__POST) > 0 ? true : false;
if ($post) {
    // do the work you are doing in write.php
} else {
   // do the work you are already doing in admin.php
} 
```

可能有更好的方法来识别请求是 POST 还是 GET，我只是想给你一个提示，剩下的就是你的了。:)

# php - Magento 动态属性/选项保存到购物车

> ID：12594352
> 
> 赞同：0
> 
> 时间：2012-09-26T04:00:28.960
> 
> 标签：php, magento

在将产品添加到购物车时，我需要动态地将选项选项添加到购物车中。呈现给购物者的选择可能因产品而异，因此它们必须是动态的。但是，选项将始终相同。例如，“选项 1”可能有一个产品的值“a、b、c”和另一种产品的值“x、y、z”。我不需要保存到产品中的选项，只需要购物车。选择需要显示在购物车和订单管理、收据等中。

我从[这个答案](https://stackoverflow.com/questions/4793486/add-option-value-to-product-then-to-cart-with-magento)中了解到，我可以使用`$cart->addProduct($product, $params)`它来为购物车项目设置自定义选项。

我发现我可以在[这篇博](http://xhtmlandcsshelp.blogspot.com/2010/11/magento-overwrite-cart-controller-add.html)文中覆盖购物车控制器。我能够将产品动态添加到购物车。但是，我对如何向产品添加动态属性值感到困惑。`$params`我在调用之前尝试设置“选项”和“超级属性”，`$cart->addProduct($product, $params)`但它没有将值保存到购物车项目。

最后，一些选项选择需要影响产品价格。我也不确定如何解释这一点。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:58:50.233

过去，我结合使用文本字段和下拉选项（用于影响价格的选项）以及自定义 javascript 和隐藏字段来解决此问题。看看下面的例子，当你改变不同的橱柜宽度时，总尺寸和价格将被更新。此信息也将添加到购物车/管理员订单

参见示例@ [http://www.contempospace.com/bedroom-furniture/wardrobe-closets/custom-closet-systems/isa-custom-closet-4-module/isa-closet-system-xl-maximize-large-closet -drawers-shelves-hanging.html](http://www.contempospace.com/bedroom-furniture/wardrobe-closets/custom-closet-systems/isa-custom-closet-4-module/isa-closet-system-xl-maximize-large-closet-drawers-shelves-hanging.html)

假设您使用的是简单的产品。

**要添加附加**选项，请参阅[Magento - Quote/order product item attribute based on user input](https://stackoverflow.com/questions/9412074/magento-quote-order-product-item-attribute-based-on-user-input/9496266#9496266)

**要更改产品价格**，请参阅[在将产品添加到购物车时更改报价中的价格：magento](https://stackoverflow.com/questions/9721583/changing-the-price-in-quote-while-adding-product-to-cart-magento)

# javascript - 在 Firefox 的按键事件中捕获 CTRL+

> ID：12594355
> 
> 赞同：1
> 
> 时间：2012-09-26T04:01:16.730
> 
> 标签：javascript, jquery, keyboard-events, ctrl

我正在使用此代码来捕获键盘按下事件：

```
 $(document.body).keypress(function(e){
    console.log("captured: " + e.which);
  }); 
```

在 Chrome 上，当用户按下`CTRL`+时`R`，我得到 charcode 18。

然而，在 Firefox 上，我得到 114，换句话说，`r`没有`CTRL`.

如何在 Firefox 上捕获 CTRL+ 事件？最好，我想在不使用任何翻译表的情况下接收正确的字符码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:18:45.240

```
$(document).on('keydown', function(e){
    console.log("captured: " + e.which);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:14:36.290

我建议您查看 John Resig 的这个插件

[链接在这里](https://github.com/jeresig/jquery.hotkeys)

它会解决你的问题:)

# c# - 如何确定位序列是正数还是负数

> ID：12594358
> 
> 赞同：1
> 
> 时间：2012-09-26T04:01:24.357
> 
> 标签：c#, c++, c, algorithm, bit-manipulation

我有两组值。每个都在 -15 到 + 15 的范围内，包括 0。

我设法用 8 位表示两个数字。这些位中的 4 个可能属于负集，另外 4 个是正集。

每当我读取该位序列时，我都希望能够确定最初的 4 位是 + 还是 -。

有没有办法使用打包和解包的按位运算来完成这个？还是其他聪明的方法？

提前致谢。

更新：这里是我想要实现的一个示例：

*在这 31 个值中，我只需要使用 8 位表示两个值，例如我有数字 14+ 和 15+。它们可以都是正面的，也可以各有一个，但它们不能都是负面的。所以 14 = 1110 和 15 = 1111（取出所有 0）；bitsequence = 11101111 所以拆包时我知道字节239 = 11101111，实际上通过解析位序列分别代表数字14+和15+。但是，当任何一个数字为负时，我都很难过。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:15:22.487

您可以使用位域非常轻松地做到这一点：

```
struct two_numbers
{
     signed char first : 4;
     signed char second : 4;
}; 
```

然后你可以像往常一样与零进行比较：

```
two_numbers t = { 7, -5 };
if (t.first < 0 || t.second < 0) { ... } 
```

但是请注意，4 位字段只允许从 -8 到 7 的值，而不是 -15 或 15。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:17:16.097

假设您使用的是 8 位示例，其中使用高位表示负数，使用低位表示正数。如果你用 0xF0 屏蔽你的号码，结果非零，那么你的号码是负数。

解决问题的另一种方法是只使用您的语言为字节值提供的任何方法。然后，您不需要做任何聪明的事情，只需测试该值是否小于零。

# sql-server - SSIS 多表插入与联合 ALL

> ID：12594359
> 
> 赞同：4
> 
> 时间：2012-09-26T04:01:27.577
> 
> 标签：sql-server, ssis

我是 SSIS 新手，正在编写我的第一个 SSIS 包。

在我的包中，数据流中有几个转换阶段，每个阶段都有一个脚本组件将记录（某种自定义日志）插入到 ADO.NET 目标。

我正在使用多个指向同一个数据库中同一个表的 ADO.NET 目标组件。

我想知道这是否是一种正确的方法，或者我是否应该使用 Union ALL 并一次插入所有记录。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:45:09.270

从性能的角度来看，如果您在 SSIS 中将结果合并在一起并将它们插入到数据库中，您希望获得非常小的性能提升，因为您只会创建一个到实例/数据库的连接，具体取决于何时脏页被写入磁盘是可能的，但绝不保证磁头可能需要在主轴上移动的次数更少。

我认为这里更重要的是自定义日志记录是什么？如果日志记录记录了您在包中的距离、在某个阶段更新了多少记录等，那么我强烈建议不要在包中使用 UNION，因为以下原因在最后将它们全部插入。

想象一下这样一种情况，当包裹在中途掉落时，您的任务是首先诊断问题，然后修复一些因故障而损坏的数据。如果你把所有的日志都写在最后，而打包还没有完成，那么日志就不会被写，你的任务就会困难很多。

相反，我会将 ADO 连接管理器设置为保留相同的连接。这样，连接将始终保持打开状态，您将不必重新连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:08:11.383

我认为 Union All 然后一次 insert all 更好。

它将使您的 ssis 清晰并获得更好的性能。（据我所知，SSIS 将使用服务器资源而不是数据库资源，对吧？）

# python - 从一系列数字中随机化一个数字 - Python

> ID：12594360
> 
> 赞同：-1
> 
> 时间：2012-09-26T04:01:28.560
> 
> 标签：python, random

我正在制作游戏，我想让我的角色的伤害范围（4,7），

为了造成伤害，我在做敌人HP - chardamage，我如何让chardamage 成为一个随机数`range(4,7)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:04:45.947

您可以使用以下方法执行此操作[`random.randrange`](http://docs.python.org/library/random.html#random.randrange)：

```
random.randrange(4, 8) 
```

您需要使用 8 因为在 Python 中，范围*包括*下限且不*包括*上限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T04:02:30.137

```
import random
print random.randint(4,7) 
```

……

如果你想要浮动然后

```
print random.uniform(4,7) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T04:02:37.353

```
import random

damage = random.randint(4, 7) # To get random num from {4,5,6,7} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T04:03:01.490

您需要`range(4,8)`，因为上限始终为 -1。`range(4,7)`会给你`4,5,6`

```
from random import choice
choice(range(4,8)) 
```

# javascript - javascript，浮动和显示不起作用

> ID：12594361
> 
> 赞同：0
> 
> 时间：2012-09-26T04:01:51.507
> 
> 标签：javascript, jquery, css

我正在尝试构建一个非常简单的 javascript 菜单，其中包含一个单击功能来滑动上下滑动。javascript 代码似乎可以正常工作，但 css 有问题。

我已经尝试了几件事，但无法使其正常工作。

这是演示：http: [//goo.gl/BoIwm](http://goo.gl/BoIwm)

我很感激任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:13:19.250

你的代码，

试试下面的功能。它应该工作。还要制作一个小提琴并使用所有样式更新您的问题。这样我可以建议一个更好/单一的功能

```
$(".Índice").click(function() {
    $(".subindice").slideDown();
});

$(".caeplus").click(function() {
    $(".subcae").slideDown();
});

$(".Follow").click(function() {
    $(".subfollow").slideDown();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:37:57.240

检查这个[小提琴](http://jsfiddle.net/sushanth009/L6cMC/1/)

我已经重新排列了子项 div 以便它们的位置出现在相应的菜单项下方。否则，如果将它们放在包装器之外，则需要指定确切的位置。

你的代码似乎是正确的，但位置搞砸了..

我已经删除了 javascript 函数并为锚标记指定了点击事件..

# bash - 我可以将多个文件输出到 STDOUT 并单独处理它们吗？

> ID：12594364
> 
> 赞同：2
> 
> 时间：2012-09-26T04:02:23.783
> 
> 标签：bash, shell, stdout, stdin

我正在使用 ImageMagick 的[转换](http://www.imagemagick.org/script/convert.php)程序将 pdf 文件拆分为单个图像。它允许您通过将“-”指定为输出文件来将输出写入 STDOUT。

我想处理所有这些图像，然后重新合并它们。不幸的是，当我将输出传输到新进程时，它不会将流识别为单个图像文件。将所有图像写入磁盘然后用不同的程序读取它们显然是浪费时间，那么**有没有办法将多个文件写入 STDOUT 管道，使得每个文件都是另一个图像编辑实例的 STDIN？** 这些图像编辑实例的输出是否可以合并到最终合并过程的输入中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:41:27.143

您不能以工具通常识别的任何标准化方式将多个文件发送到标准输出。stdout 和 stdin 是流，因此无法判断任何给定片段是否来自一个文件或另一个文件。

一些工具具有在标准输出和标准输入上分隔记录的标准方法，例如换行符或空字符，但这不适用于任意数据，例如大多数可能包含两者的图像格式。

你有几个选择：

1.  只需使用多个文件。它可能不会像你想象的那么慢；如果文件不是太大，一切都可能最终发生在缓存中，并且永远不会真正触及磁盘。
2.  使用支持多个帧或层的格式。只要将要编辑的工具理解这种格式，你应该没问题。本质上，这种格式成为不同文件之间的分隔符。一种相对标准且支持多页/层的格式是 TIFF：

    ```
    convert my.pdf tiff:- | convert - -flip - | convert - my.flipped.pdf 
    ```

3.  如果您使用 ImageMagick 编辑文件，请不要将其拆分、编辑每一页并重新组合，只需一次完成所有操作。例如：

    ```
    convert my.pdf -flip my.flipped.pdf 
    ```

    将翻转 PDF 中的页面，一次性为您提供一个新的 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T19:59:20.227

写一个`tar`文件`STDOUT`是一个合适的解决方案吗？

# c - 如何将 coredump 位置/路径配置为特定于进程？

> ID：12594367
> 
> 赞同：2
> 
> 时间：2012-09-26T04:02:28.343
> 
> 标签：c, linux

我有两个相同程序的进程正在运行。我需要他们在不同的可配置位置进行核心转储。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:11:41.167

检查“man 5 core” 如果您将字符串写入 /proc/sys/kernel/core_pattern 它可以控制核心文件的名称。这可以包括 pid 的 $p - 以保持内核分离。

# c++ - `cout << argv[0]` 返回十六进制值？

> ID：12594373
> 
> 赞同：2
> 
> 时间：2012-09-26T04:03:14.403
> 
> 标签：c++, iostream, tchar

> **可能重复：**
> [无法在 VC++ 中使用 std::cout 打印出 argv[] 值](https://stackoverflow.com/questions/8096369/can-not-print-out-the-argv-values-using-stdcout-in-vc)

代码：

```
using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
    cout << argv[0] << endl;
    system("PAUSE");
    return 0;
} 
```

如您所见，一个标准的 Win32 控制台应用程序。
令人困惑的部分是， 的值`argv[0]`输出为`00035B88`。
这是（AFAIK）在没有命令行选项的情况下运行的，因此`argv[]`应该还没有值。（或者这是问题所在？）

但是，`argv[]`被声明为指针 ( `_TCHAR*`)，我听说它`cout`会打印指针的地址。是这样吗？如果是这样，我如何打印/使用 的值`argv`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:08:46.880

`_TCHAR`如果可执行文件是使用 Unicode 选项构建的，则它是宽字符类型。`cout`无法处理宽字符，因此它不是将其转换为 a`char *`并打印出字符串，而是（有效地）使用`void *`打印出字符串地址的默认打印机。

改为使用`wcout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:07:06.383

唔。如果我没记错的话，argv 中的第一个数组条目（即 argv[0]）是可执行文件的名称。所以它可能会打印 ac 样式字符数组中第一个字符的地址。尝试这个：

```
cout << (char *)argv[0] << endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:17:09.717

在你的`project settings->General`. 转到`"Character encoding"`并选择`"multibyte character set"`。并将您的更改`_tmain()`为`main()`. 现在它将打印您的字符。

# tfs - 将多个变更集合并为一个后如何挑选

> ID：12594376
> 
> 赞同：3
> 
> 时间：2012-09-26T04:03:30.080
> 
> 标签：tfs

我们将 TFS 2010 与 内部 Web 应用程序的[codeplex 分支指南中概述的基本分支计划一起使用。](http://vsarbranchingguide.codeplex.com/ "分支指南")我们只有 3 个基本分支 = 开发、主要（QA/测试）和发布（生产）。

由于该应用程序是一个内部 Web 应用程序，因此我们仅支持单个生产版本。

我们基本上是在本地开发，一旦我们完成了一项任务（错误修复或增强），我们就会将其提交给 Dev。当我们开始工作以拉下其他开发人员签入的任何内容时，我们通常还会每天从 Dev 获取最新信息。一段时间后（通常是一两周），我们将确定我们有足够的更改来证明更新 QA 站点的合理性，并执行从 Dev 到 Main 的 Merge All，然后将合并的 Main 分支部署到 QA 服务器进行测试。

然后 QA 将开始测试站点，在他们满意后，我们将执行从 Main 到 Release 的 Merge All 并将合并的 Release 分支部署到我们的生产服务器。有时我们甚至会在将所有内容合并到 Release 之前进行多次 Dev-to-Main 合并。

无论如何，我们已经使用这个策略几个月了，直到最近一切看起来都很棒。如果我们在生产中遇到一些关键问题，我们可以对 Release 进行修补，然后将其向后合并。一切看起来都很好。

然后我们遇到了一些我们不知道如何处理的事情。我们得到的指令是只合并从 Main 到 Release 的单个代码修复（而不合并 Main 中的所有其他内容）。现在，由于我们不知道这即将到来，所以当原始变更集从 Dev 合并到 Main 时，它与其他几个变更集一起合并。所以当我从 Main 合并到 Release 时，我唯一的选择是整个合并的 changset。我不能“深入”到合并的变更集中，只从 Dev 中挑选我真正想要的一个原始变更集。

我最终像 Release 中的修补程序一样手动应用更改，只是为了将其发布。但现在我试图了解您如何防止这种情况发生。

我已经阅读了几篇关于合并策略的文章，并且似乎所有内容都建议您在进行合并时不要挑选变更集 - 简单地合并所有可用的内容......这是有道理的..但是如果您总是合并多个变更集（并且它们成为一个目标分支中的变更集），那么如果需要，您如何可能仅将原始变更集之一合并到生产环境中？

**例如，如果将 Dev (C1, C2, C3) 合并到 Main (成为 C4) - 那么如何仅将 C1 从“内部”C4 合并到 Release？**

这让我认为我们最好将每个单独的变更集从 Dev 合并到 Main，而不是一次合并多个。至少，如果需要的话，我们可以很容易地从 Main 到 Release。

任何建议/生活课程/等。非常感谢处理此特定场景的分支/合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:32:19.513

在您的场景中，您可以执行以下操作：

*   [在 Main 中回滚](https://stackoverflow.com/questions/2694644/how-to-revert-roll-back-a-checkin-in-tfs-2010 "回滚")C4（变为 C5，因为回滚本身就是变更集，它应用反向变更）
*   再次从 Dev 合并到 Main，但这次只选择 C1（在 Main 中变为 C6）。
*   现在再次回滚变更集 C5 和 C6，因此您可以像以前一样在 Main 中进行所有更改。（在 Main 中变为 C7）。

在此之后，您在 Main 中拥有与以前相同的代码库，您现在可以将 C6（仅具有 C1 的更改）从 Main 合并到 Release。

但是，为了防止将来出现此类问题，您应该真正考虑将每个变更集从 dev 单独合并到 main。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:11:55.463

我不建议合并从 dev 到 main 的每一个变更集；那将是一个坏主意，会带来很多额外的风险！

> 但是，如果您总是合并多个变更集（并且它们成为目标分支中的一个变更集），那么如果需要，您如何可能仅将原始变更集之一合并到生产环境中呢？

你不会也不应该让需求出现。

这可能不是您正在寻找的简单答案，但确实没有简单的答案。合并每一个变更集需要付出巨大的努力来为无论如何不应该发生的事情做准备。确实，合并单个变更集的过程引入了更多的复杂性，最终，当您无法弄清楚为什么您的软件无法运行时，这会让您大吃一惊……“妈，我错过了变更集 43 50"...

**如果一个错误的结果：**

*在您的场景中，如果您手动将“修复”重新应用到发布的“修补程序”分支或直接应用到发布行，可能会更好。*

这只是将错误转移到生产环境的成本，我会花一点时间弄清楚为什么这个问题通过了 QA 以及如何在未来防止它。

**如果增强的结果：**

您的财务 (CFO) 人员是否授权因交付未经测试的代码而直接导致生产质量下降？我希望他们能够有效地拥有将该软件列为组织资产的资产负债表！

*在不重新完成整个回归周期的情况下，仅将一个与其他功能一起构建和测试的功能交付到生产环境中是不可行的。*

**结论**

我不建议将每个更改集或功能从 dev 合并到 main。这将是一个坏主意，有很多额外的风险，应该向适当的人高亮！

# excel - 如何读取选定的 Excel 列

> ID：12594377
> 
> 赞同：1
> 
> 时间：2012-09-26T04:03:37.243
> 
> 标签：excel, vb.net, exceldatareader

使用来自[http://exceldatareader.codeplex.com的](http://exceldatareader.codeplex.com)**ExcelDataReader**和此代码：

```
Dim stream As FileStream = File.Open(filePath, FileMode.Open, FileAccess.Read)

'1\. Reading from a binary Excel file ('97-2003 format; *.xls)
Dim excelReader As IExcelDataReader = ExcelReaderFactory.CreateBinaryReader(stream)
'...
'2\. Reading from a OpenXml Excel file (2007 format; *.xlsx)
Dim excelReader As IExcelDataReader = ExcelReaderFactory.CreateOpenXmlReader(stream)
'...
'3\. DataSet - The result of each spreadsheet will be created in the result.Tables
Dim result As DataSet = excelReader.AsDataSet()
'...
'4\. DataSet - Create column names from first row
excelReader.IsFirstRowAsColumnNames = True
Dim result As DataSet = excelReader.AsDataSet()

'5\. Data Reader methods
While excelReader.Read()
    'excelReader.GetInt32(0);
End While

'6\. Free resources (IExcelDataReader is IDisposable)
excelReader.Close() 
```

如何读取选定的excel列？谢谢。

# macos - 如何在 Mac 上的沙盒中启动另一个进程？

> ID：12594380
> 
> 赞同：10
> 
> 时间：2012-09-26T04:03:54.517
> 
> 标签：macos, cocoa, sandbox

我想在 Mac 上的 Sandbox 中通过 LSOpenApplication() 启动另一个自己的应用程序。

当然，我在授权文件中的“com.apple.security.temporary-exception.files.absolute-path.read-write”中添加了一行以进行启动。

但是，在启动时，控制台会吐出一个错误，即不允许进程 xxxx 启动“foo.app”，因为用户之前没有启动过它。手动启动一次该过程后，它能够无错误地启动。

即使以前没有启动，我如何启动该过程？这与沙盒无关吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T17:00:36.933

在极少数情况下，您可以启动另一个应用程序并获得预期的结果。com.apple.security.temporary-exception.files.absolute-path.read-write 对 LaunchServices 没有任何帮助，因此您可以删除该权利。

作为沙盒应用程序，您实际上可以子启动的内容相当有限，这是一种有意的行为，因为启动另一个应用程序在技术上违反了沙盒模型。您可以使用的方法是：

1.  在您的应用程序中包含 XPC 服务并为您启动它
2.  您可以通过 NSTask 运行应用程序，这将导致该应用程序在启动时继承您的沙箱
3.  您可以按名称启动应用程序，但据我所知，这通常仅在应用程序位于 /Applications 文件夹中时才有效，即 -[NSWorkspace launchApplication:]
4.  您可以启动一个包含您的应用程序的应用程序，但前提是您已经 SMLoginItemSetEnabled()

我会说 osascript 调用有效，因为它的作用与 -[NSWorkspace launchApplication:] 大致相同。接受包标识符或绝对/相对路径的 LS 调用都不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:55:14.980

Use `osascript`

```
osascript -e 'tell application "foo" to open' 
```

# iphone - 如何修复 ios6 上的 UIModalTransitionstyle 问题？

> ID：12594383
> 
> 赞同：0
> 
> 时间：2012-09-26T04:04:25.360
> 
> 标签：iphone, uibutton, ios6, uimodaltransitionstyle

当我单击按钮时，我在我的应用程序中为 UIModalTransitionStyle 视图使用以下代码

```
 InfoViewController *infoViewController = [[InfoViewController alloc]initWithNibName:@"InfoViewController" bundle:nil];

infoViewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self.presentedViewController presentViewController:infoViewController animated:YES completion:NULL]; 
```

它在 ios5 中完美运行，但我更新了应用程序 ios6 它不起作用。我该如何处理这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:42:56.403

此代码有效，在 iOS 6.0 模拟器中测试。

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.moviePlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:@"http://videoURL"]];
    self.moviePlayerController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

    [self presentViewController:self.moviePlayerController animated:YES completion:nil];

} 
```

由于 URL 无效，MPMoviePlayerViewController 将无休止地来回翻转，但关键是它可以工作。

# .net - Sitecore 全局标头

> ID：12594390
> 
> 赞同：0
> 
> 时间：2012-09-26T04:05:30.097
> 
> 标签：.net, content-management-system, sitecore

只是想知道最好的做法是设置一个全局标题，如果可能需要，可以在某些页面上覆盖？

例如，谷歌跟踪代码在全球范围内应用（到整个网站），在一种形式上它需要有自己的跟踪代码，而全球的跟踪代码被删除？

我尝试创建一个代码块并在项目模板中设置标准值，尽管仅将代码应用于新创建的页面，但不适用于现有页面。这意味着必须将代码添加到每个单独的页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:40:14.207

当我不得不实现这样的解决方案时，我要么创建一个名为“站点设置”的模板并从主页继承它（或使用此模板创建一个项目），然后为站点类编写一些扩展方法。在 Web.config 中存储设置项的 ID 是我通常更愿意避免的事情，因为我通常只是将模板附加到主页。

这样我就可以得到以下结果。

```
<%=Sitecore.Context.Site.Settings.AnalyticsCode()%> 
```

这个特定的扩展方法将首先查看上下文项以查看是否填充了“分析代码”字段，如果不是，则我抓取主页并从那里获取该字段。

当然，此方法允许您使用上下文站点或上下文项中可用的许多方便的扩展方法进行扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:42:46.280

您可以使用该字段在 Sitecore 树中创建一种设置项，并将该字段也添加到所选页面。然后使用类似这样的代码：

```
<%= (!String.IsNullOrEmpty(Sitecore.Context.Item["GoogleId"]))
    ? Sitecore.Context.Item["GoogleId"] 
    : MySettingsItem["GoogleId"] %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:54:40.390

这听起来像是“Field Fallback”的一个不错的用法。本质上，您网站中的每个页面（项目）都将具有该`Google Tracking Code`字段。您将连接某种回退机制以使用当前项目的值，或者查找树直到找到一个值。这将允许您`Google Tracking Code`在 'Home' 项目上设置 ，并且所有后代都将使用该值，除非它被明确设置在较低级别。

请参阅我（Sean Kearney 的）关于后备主题的[博客文章。](http://seankearney.com/post/Sitecore-Content-Fallback-and-the-Field-Fallback-Module.aspx)

这是我的[Field Fallback 共享源模块](http://trac.sitecore.net/FieldFallback)的链接。

# mysql - mysql回滚错误处理程序不起作用

> ID：12594391
> 
> 赞同：1
> 
> 时间：2012-09-26T04:05:35.000
> 
> 标签：mysql

我只是构建了一个存储过程来测试 mysql 中的事务。

但不知何故，它不起作用。

这是我的代码：

```
USE `test`;
DROP procedure IF EXISTS `testTran`;
DELIMITER $$
USE `test`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `testTran`()
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION rollback;
    START TRANSACTION;
    INSERT INTO `test`.`books`(`name`,`number`) VALUES ('asd', 20);
    ALTER TABLE `test`.`books` ADD COLUMN `name` VARCHAR(45) NULL  AFTER `number` ;
    COMMIT;
END$$
DELIMITER ; 
```

在事务内部，第二个命令是创建一个将失败的存在列。我期望的是第一个插入将是回滚。但实际上，并非如此。插入确实有效。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:48:49.640

为了使用事务，您需要将表转换为像 InnoDB 这样的事务表。

或者，您可以使用 SAVEPOINT 回滚存储过程所做的更改。

```
DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK TO identifier;

SAVEPOINT identifier;

START TRANSACTION;

INSERT INTO `test`.`books`(`name`,`number`) VALUES ('asd', 20);
ALTER TABLE `test`.`books` ADD COLUMN `name` VARCHAR(45) NULL  AFTER `number` ;

COMMIT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T13:58:21.150

ALTER TABLE 语句在执行之前会导致[隐式 COMMIT 。](http://dev.mysql.com/doc/refman/5.7/en/implicit-commit.html)

# android - NullPointerException 试图将小部件添加到自定义启动器

> ID：12594393
> 
> 赞同：3
> 
> 时间：2012-09-26T04:05:57.133
> 
> 标签：android, android-widget, android-4.2-jelly-bean

在我的应用程序（基本上是 AOSP 的 Jelly Bean Launcher）中调用[updateAppWidgetSize()后，我得到了 NullPointerException](http://developer.android.com/reference/android/appwidget/AppWidgetHostView.html#updateAppWidgetSize%28android.os.Bundle,%20int,%20int,%20int,%20int%29)

输出如下：

```
09-26 00:47:34.681: E/AndroidRuntime(2026): FATAL EXCEPTION: main
09-26 00:47:34.681: E/AndroidRuntime(2026): java.lang.NullPointerException
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.os.Parcel.readException(Parcel.java:1431)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.os.Parcel.readException(Parcel.java:1379)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.android.internal.appwidget.IAppWidgetService$Stub$Proxy.updateAppWidgetOptions(IAppWidgetService.java:535)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.appwidget.AppWidgetManager.updateAppWidgetOptions(AppWidgetManager.java:353)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.appwidget.AppWidgetHostView.updateAppWidgetOptions(AppWidgetHostView.java:256)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.appwidget.AppWidgetHostView.updateAppWidgetSize(AppWidgetHostView.java:245)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.launcherjellybean.android.AppWidgetResizeFrame.updateWidgetSizeRanges(AppWidgetResizeFrame.java:339)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.launcherjellybean.android.LauncherAppWidgetInfo.notifyWidgetSizeChanged(LauncherAppWidgetInfo.java:84)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.launcherjellybean.android.Launcher.completeAddAppWidget(Launcher.java:1153)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.launcherjellybean.android.Launcher.addAppWidgetImpl(Launcher.java:1591)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.launcherjellybean.android.Launcher.addAppWidgetFromDrop(Launcher.java:1653)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.launcherjellybean.android.Workspace$8.run(Workspace.java:3071)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.launcherjellybean.android.Workspace$9.run(Workspace.java:3266)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.launcherjellybean.android.DragLayer$3.onAnimationEnd(DragLayer.java:628)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.animation.ValueAnimator.endAnimation(ValueAnimator.java:1018)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.animation.ValueAnimator.access$400(ValueAnimator.java:51)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.animation.ValueAnimator$AnimationHandler.doAnimationFrame(ValueAnimator.java:623)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.animation.ValueAnimator$AnimationHandler.run(ValueAnimator.java:639)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.view.Choreographer.doFrame(Choreographer.java:524)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.os.Handler.handleCallback(Handler.java:615)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.os.Looper.loop(Looper.java:137)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at java.lang.reflect.Method.invoke(Method.java:511)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-26 00:47:34.681: E/AndroidRuntime(2026):     at dalvik.system.NativeStart.main(Native Method) 
```

我不得不对 AOSP 启动器源进行一些细微的修改，以删除一些私有 API 使用，并进行单独的[更改](https://github.com/chrislacy/LauncherJellyBean/commit/15df08d8f69c0cfe8475c29b6cf68f3c91c6d303)，以便可以放置具有 AppWidgetHostView 的小部件。除此之外，我正在使用 AOSP (API 16) 附带的未修改版本的启动器。

如果您有兴趣亲自查看此问题（尝试添加模拟时钟或消息小部件时发生率为 100%），则可以使用该[源。](https://github.com/chrislacy/LauncherJellyBean)

任何帮助，将不胜感激。

# windows - XE3 Metropolis 应用程序和下拉/向下滑动关闭？

> ID：12594394
> 
> 赞同：1
> 
> 时间：2012-09-26T04:06:07.523
> 
> 标签：windows, delphi, gesture

是否有人对 XE3 Metropolis 应用程序有自定义手势来模拟 Windows 8 用鼠标向下滑动/下拉以关闭应用程序？

XE3 只有右键单击/向上滑动关闭按钮。

谢谢

# linux - 不以点开头的文件

> ID：12594400
> 
> 赞同：0
> 
> 时间：2012-09-26T04:07:07.997
> 
> 标签：linux, unix, ubuntu

如何使用通配符删除所有不以点开头的文件，而不是使用 grep 等命令。我是 Unix 的新手，想了解基础知识。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:11:26.043

在这种情况下，不包括 .'s - 所以你可以运行

```
rm * 
```

为了验证您将要删除文件而不是轻率行事 - 最好：

```
echo * 
```

这样做的原因 - 以点开头的文件被认为是“隐藏的”。因此它们不受标准 * 操作的影响。（要实际删除它们 - 您需要在命令中指定）

# winapi - FASM - 如果文件存在 - 使用 GetFileAttributes - INVALID_FILE_ATTRIBUTES 值？

> ID：12594403
> 
> 赞同：2
> 
> 时间：2012-09-26T04:07:42.600
> 
> 标签：winapi, assembly, file-exists, fasm

我在 FASM 中使用 GetFileAttributesA 来确定文件是否存在。我知道如果文件不存在，则返回值将是 INVALID_FILE_ATTRIBUTES，但我不确定如何检查该值。

我的代码：

```
invoke GetFileAttributes,lpFileName
cmp    eax,IDK WHAT TO CHECK FOR
je     notfound
jne    found
invoke ExitProcess,0 
```

看到编译器无法将 INVALID_FILE_ATTRIBUTES 识别为值：

```
cmp    eax,INVALID_FILE_ATTRIBUTES 
```

不管用。

有谁知道这个常量的值，以便我可以手动输入它？

任何帮助表示赞赏。谢谢

* * *

在 Jens Björnhager 回复后，以下是其他感兴趣的人的工作代码：

```
invoke GetFileAttributes,lpFileName
cmp    eax,-1
je     notfound
jne    found
invoke ExitProcess,0 
```

甚至：

```
invoke GetFileAttributes,lpFileName
cmp    eax,$ffffffff
je     notfound
jne    found
invoke ExitProcess,0 
```

再次感谢 Jens Björnhager！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T04:17:29.970

`INVALID_FILE_ATTRIBUTES`被定义为**-1 ($ffffffff)**，所以检查一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T05:53:54.423

您应该使用正确定义的宏 INVALID_FILE_ATTRIBUTES，而不是在代码中使用幻数。该宏定义在 fasm 安装的 INCLUDE 文件夹中的 kernel32.inc 中。你可以像这样包含这个inc文件

包括 'c:\path\to\fasm\INCLUDE\EQUATES\KERNEL32.INC'

或者你可以只添加高级别的包括

包括 'c:\path\to\fasm\INCLUDE\win32a.inc' （或 win32w.inc，如果您使用 unicode 版本的 winapi）

或者，如果您在 fasmw.ini 的 Environment 部分设置 include 值：

包括“win32a.inc”

# c# - 无法隐式转换类型 Web 服务响应

> ID：12594408
> 
> 赞同：0
> 
> 时间：2012-09-26T04:08:25.203
> 
> 标签：c#, arrays, web-services, implicit-conversion

我有一个 Web 服务正在调用另一个客户端 Web 服务。

下面是我用来从中提取预订详细信息的代码。

```
ResMsg.GetBookingsOperationRequest request = new ResMsg.GetBookingsOperationRequest();

        int noofBookings = 3;
        DateTime checkInDate;
        DateTime checkOutDate;
        string bookingStatus;
        string Notes;
        int adults;
        int children;
        Int64 bookingID;
        string bookingSource;
        DateTime bookingDate;

        string resResult;
        using (var proxy = new ResMesg.ResonlineMsg.InventoryServiceClient())
        {

            var result = proxy.GetModifiedBookings(request);
            ResMsg.Booking[] bookings= new ResMsg.Booking[noofBookings];
            result.Bookings = new ResMesg.ResonlineMsg.Booking[noofBookings];
            result.Bookings = bookings;

            for (int i = 0; i < bookings.Length; i++)
            {
                Booking bk = new ResMesg.ResonlineMsg.Booking();
                result.Bookings[i]=bk;

                bookingID = bk.BookingId;
                checkInDate = bk.CheckInDate;
                checkOutDate = bk.CheckOutDate;
                adults = bk.Adult;
                children = bk.Children;
                bookingStatus = bk.BookingStatus;
                Notes = bk.Note;
                bookingSource = bk.BookingSource;
                bookingDate = bk.BookingDate;

                bk.GuestInfo = new GuestDetails[noofBookings]; ** Place where error is referring to.GuestDetails is an array. GuestInfo is an instance of GuestDetails.

            }

           return "Success";

    } 
```

> 错误 1 ​​无法将类型“ResMesg.ResonlineMsg.GuestDetails[]”隐式转换为“ResMesg.ResonlineMsg.GuestDetails”

**更新：GuestDetails 的数据类型

```
Field             Data Type      Description
Name              string         Guest's full name. 
Address           string         Guest's address. 
EmailAddress      string         Guest's email address. 
PhoneNumber       string         Guest's phone number. 
```

从对象浏览器中复制的 GuestDetails 的定义

```
 public GuestDetails GuestInfo { set; get; }
        (Member of Booking) 
```

对于如何解决此错误或出现此错误的原因，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:17:11.237

好的，据我所见

`bk.GuestInfo`是单个实例`GuestDetails`

而您试图在此处为其分配一个数组

```
bk.GuestInfo = new GuestDetails[noofBookings]; 
```

所以要么`bk.GuestInfo`需要是一个数组，`GuestDetails`要么你需要更改`bk.GuestInfo = new GuestDetails[noofBookings];`为将单个实例分配给`bk.GuestInfo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:20:49.893

为什么不简单

```
 bk.GuestInfo = new GuestDetails() ; 
```

第 19、20、21 行看起来也在做同样的事情。

```
 var details = new GuestDetails[noofBookings] ; 
// fill details array before this..
 bk.GuestInfo = details[noofBookings]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:28:44.443

将 Booking.GuestInfo 的声明更改为数组：

```
public GuestDetails[] GuestInfo { set; get; } 
```

# java - 从主类上的函数调用外部类对象

> ID：12594410
> 
> 赞同：1
> 
> 时间：2012-09-26T04:08:27.863
> 
> 标签：java, class, function, main

我正在编写一个程序来跟踪随着时间的推移完成的不同交易。我有一个主类，还有另一个名为 `CheckingAccount.java`.

我有一个以这种方式格式化的主类。

```
public class Main
{
   public static void main (String[] args)
   { 
         CheckingAccount c = new CheckingAccount(bal);
         --line of code---
         --line of code---
         --line of code---          
   }

   public static int getTransCode()
   {
         --line of code---
   }
   public static double getTransAmt()
   {
         --line of code---
   }
   public static void processCheck(double trAm, int tCode, boolean monthCh)
   {
        double curCharge=0.15;

        CheckingAccount.setBalance(trAm,tCode,curCharge,monthCh);
        CheckingAccount.setServiceCharge(curCharge);
   }
   public static void processDeposit(double trAm, int tCode, boolean monthCh)
   {
        double curCharge=0.10;

        CheckingAccount.setBalance(trAm,tCode,curCharge,monthCh);
        CheckingAccount.setServiceCharge(curCharge);
   } 
} 
```

* * *

这是我的 CheckingAccount.java

```
public class CheckingAccount
{
   private double balance;
   private double totalServiceCharge;

   public CheckingAccount(double initialBalance)
   {
        balance = initialBalance;
        totalServiceCharge = totalServiceCharge;
   }

   public double getBalance()
   {
        return balance;
   }

   public void setBalance(double tAm, int Code, double charge, boolean mChrg)
   {
        if(tCode == 1)
        balance = (balance - tAm) - charge;
        else //if(tCode == 2)
            balance = (balance + tAm) - charge;
   }

   public double getServiceCharge()
   {
        return totalServiceCharge;
   }

   public void setServiceCharge(double currentServiceCharge)
   {
        totalServiceCharge = totalServiceCharge+currentServiceCharge;
   }
} 
```

因此，我无法工作的行在我的主类的函数内部`CheckingAccount.setBalance()`。`CheckingAccount.setServiceCharge()`我要做的是从我在主类（和）上创建的函数中调用我在类中创建的方法（和`setBalance`）。`setServiceCharge``processCheck``processDeposit`

但我无法让它运行，我继续运行这些错误消息。

> **不能从静态上下文中引用非静态方法 setBalance(double,int,double,boolean) CheckingAccount.setBalance(trAm,tCode,curCharge,monthCh);**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:17:11.940

您`setBalance`通过错误的类名调用您的...`setBalance()`方法是非静态的，因此它被定义为类的特定实例，而不是类..

```
**CheckingAccount.setBalance(trAm,tCode,curCharge,monthCh);
CheckingAccount.setServiceCharge(curCharge);** 
```

您需要创建一个实例`CheckingAccount`来调用该方法..

其次，在你`constructor`的`CheckingAccount`类中，你没有传递任何参数`totalService`，但是你设置了一个未知变量。你会在那里得到一个编译器错误。你需要`totalServiceCharge`用一个固定值初始化你，或者，你可以将它作为 main.. 的参数传递。并如下更改您的构造函数..

```
public CheckingAccount(double initialBalance, ** double totalServiceCharge)
{
    balance = initialBalance;
    this.totalServiceCharge = totalServiceCharge;
} 
```

然后从 main 中，这样称呼它：-

```
CheckingAccount ca = new CheckingAccount(bal, totalServiceCharge); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:10:28.137

一种可能的解决方案是：

您需要`CheckingAccount`在调用方法之前创建对象。

例子：

```
public static void processDeposit(double trAm, int tCode, boolean monthCh)
   {
        double curCharge=0.10;
        CheckingAccount ca = new CheckingAccount();    
        ca.setBalance(trAm,tCode,curCharge,monthCh);
        ca.setServiceCharge(curCharge);**
   } 
```

另一种方法是将 setBalance 方法更改为静态方法。

```
public static void setBalance(double tAm, int Code, double charge, boolean mChrg)
   {
        if(tCode == 1)
        balance = (balance - tAm) - charge;
        else //if(tCode == 2)
            balance = (balance + tAm) - charge;
   } 
```

我认为第一种方法比第二种方法更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:14:42.850

`CheckingAccount.setBalance`并且`CheckingAccount.setServiceCharge`不是静态方法（在这种情况下，它们不应该是）。

您需要将帐户的引用传递给您的方法...

```
public static void processCheck(CheckingAccount ca, double trAm, int tCode, boolean monthCh)
{
    double curCharge=0.15;

    ca.setBalance(trAm,tCode,curCharge,monthCh);
    ca.setServiceCharge(curCharge);**
}

public static void processDeposit(CheckingAccount ca, double trAm, int tCode, boolean monthCh)
{
    double curCharge=0.10;

    ca.setBalance(trAm,tCode,curCharge,monthCh);
    ca.setServiceCharge(curCharge);
} 
```

你将能够做类似的事情......

```
public static void main (String[] args)
{ 
    CheckingAccount c = new CheckingAccount(bal);
    processCheck(ca, 100.0, 1, false);
} 
```

# magento - 在magento中使用客户ID登录客户

> ID：12594411
> 
> 赞同：-3
> 
> 时间：2012-09-26T04:08:28.433
> 
> 标签：magento, login

我想使用他/她的 customer_id 登录客户。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T07:50:15.220

试试这个代码：

```
$session = Mage::getSingleton('customer/session');
$session->loginById($customer_id); 
```

# php - 通过 PHP 优化图像

> ID：12594413
> 
> 赞同：4
> 
> 时间：2012-09-26T04:08:54.643
> 
> 标签：php, image, optimization

我想构建一个 PHP 脚本来优化图像，类似于 PunyPNG 或 Kraken.io 优化图像的方式。从本质上讲，我需要能够拍摄 .jpeg、.png 和 .gif 图像并尽可能减小它们的文件大小而不会损失质量（或质量损失最小）。

这些服务提供API，但我想避免不必要的成本，我不想被特定的日常使用次数限制。

这可以用 ImageMagick 之类的东西来完成吗？有没有可能，还是太复杂了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:38:07.133

谈论重新调整图像大小，它们从来都不是问题，有几个工具可以帮助您批量执行此操作。由于您专门说 PHP，我希望您会使用它在页面上显示它。出于同样的目的，我不久前编写了这个小脚本，这可能对您有所帮助。在这里分叉[https://github.com/whizzzkid/phpimageresize](https://github.com/whizzzkid/phpimageresize)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-08T13:37:48.277

Spatie 有一个不错的包，它会定期更新，我已经使用了一段时间没有问题：

[https://github.com/spatie/image-optimizer](https://github.com/spatie/image-optimizer)

# zend-framework2 - 如何在没有 Git 的情况下安装 ZfcBase (Zend Framework 2)？

> ID：12594419
> 
> 赞同：2
> 
> 时间：2012-09-26T04:09:58.330
> 
> 标签：zend-framework2, composer-php

如果这是一个微不足道的问题，我深表歉意。

[ZfcBase](https://github.com/ZF-Commons/ZfcBase)的安装指南只提供了这么多信息；

> “只需将此项目克隆到您的 ./vendor/ 目录并在您的 ./config/application.config.php 文件中启用它。”

我的共享主机解决方案上没有 git，但我正在使用 composer。

谁能给我一个通用的方法，我可以在没有 git 的情况下安装 Zfc 模块？（我是 Zend 的新手）

编辑：我猜我可以将 zip 压缩到我的 /vendor 文件夹并在那里解压缩？但这并不好，因为如果有新版本出现，我不想手动更新它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T06:02:35.567

如果您使用的是作曲家，请添加`"zf-commons/zfc-base": "dev-master"`到`require`composer.json 的部分。所以它看起来像：

```
"require": {
    "php": ">=5.3.3",
    "zendframework/zendframework": "2.*",
    "zf-commons/zfc-base": "dev-master"
} 
```

现在你运行：

```
php composer.phar self-update
php composer.phar update 
```

在命令行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:26:33.473

如果您正在做共享主机，您应该首先考虑在您自己的本地计算机上进行开发。

然后，一旦您满意，将其全部压缩并将其全部传输到您的服务器。

在共享服务器上开发不是一个好主意，因为正如您所见，您不会拥有开发所需的所有工具。

如果一直“压缩”它很困难或乏味，您可以使用构建工具。[Phing](http://www.phing.info/)或[Ant](http://ant.apache.org/)都可以。

如果您正在做一些小的更改，我认为在共享服务器上做这件事不会有太大的问题；但即便如此，最好还是在本地机器上进行，这样您就可以利用 IDE、版本控制、更快的网络、更好的工具集以及可能的其他一些东西。

# objective-c - NSUserDefaults 总是返回 1 而不是正确的整数

> ID：12594424
> 
> 赞同：0
> 
> 时间：2012-09-26T04:11:01.593
> 
> 标签：objective-c, ios, xcode, nsuserdefaults

我正在尝试将我的游戏的当前级别存储在 NSUserDefaults 中，但是当我尝试将其转换为 int 时它总是返回 1。这是测试代码：

```
 [[NSUserDefaults standardUserDefaults] setInteger:34 forKey:@"Current Level"];
    NSLog(@"default level raw: %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"Current Level"]);
    self.levelNum = [[[NSUserDefaults standardUserDefaults] objectForKey:@"Current Level"] intValue];
    NSLog(@"default level num: %i", self.levelNum); 
```

和输出：

```
default level raw: 34
default level num: 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T04:13:58.380

只需确保在 NSUSerDefaults 上调用同步：

```
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];

[defaults setInteger:34 forKey:@"Current Level"];
NSLog(@"default level raw: %@", [defaults objectForKey:@"Current Level"]);

[defaults synchronize]; // Call synchronize after set

self.levelNum = [defaults integerForKey:@"Current Level"];
NSLog(@"default level num: %i", self.levelNum); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T04:19:29.517

关于您的代码的一件事是您正在使用“ `setInteger`”（这是一个 NSInteger）

```
[defaults setInteger:34 forKey:@"Current Level"]; 
```

和

```
self.levelNum = [[[NSUserDefaults standardUserDefaults] objectForKey:@"Current Level"] intValue] 
```

假设您正在返回一个 NSNumber 对象，您正在从中读取“ `int`”（不一定与“ `NSInteger`”相同）。

而不是第二次调用，使用：

```
self.levelNum = [[NSUserDefaults standardUserDefaults ] integerForKey: @"Current Level"]; 
```

["`integerForKey:"`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/integerForKey%3a)是使用 " `setInteger:forKey:`" 时使用的正确方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:50:20.530

哦。我的。上帝。我是个白痴。我忘记了我定义了一个自定义 setLevelNum 方法来防止将级别设置在现有级别的范围之外。由于上面的代码发生在我定义级别集之前，它会自动将其设置为最低级别，即 1。删除它现在它可以工作了。谢谢大家的帮助。至少我学到了很多关于 Objective-C 数据类型的知识 :-)

# javascript - javascript match 语句返回什么？

> ID：12594427
> 
> 赞同：0
> 
> 时间：2012-09-26T04:11:38.427
> 
> 标签：javascript, jquery

我有以下代码：

```
 if ($selectInput.data('propagate-title') === 'yes') {
        var m = this.id.match(/^modal_TempRowKey_(\d+)$/);
        if (m) {
            $("#modal_Title_" + m[1]).val(title);
        }
    } 
```

有人可以解释返回并放入 m 中的内容吗？我可以将代码更改为以下代码并使其工作相同吗？

```
 if ($selectInput.data('propagate-title') === 'yes') {
        var m = this.id.match(/^modal_TempRowKey_(\d+)$/)[1];
        if (m) {
            $("#modal_Title_" + m).val(title);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:17:56.680

这两个代码片段之间有一个重要的区别。您不能进行您希望的更改，因为如果没有匹配，`null`将从`match`操作中返回，以及评估结果

```
null[1] 
```

会抛出一个错误，比如

```
TypeError: Cannot read property '1' of null 
```

如果正则表达式匹配或不匹配，则返回值`match`是一个数组`null`。返回数组的元素 0 是整个匹配项，元素 1 将是括号对中以 first 开头的匹配项`(`。在第一个代码片段中，值`m[1]`是 后面的数字序列`"modal_TempRowKey_"`。

编辑：有关所有详细信息，请参阅 Kyle 在对原始问题的评论中提供的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:21:44.783

[这是匹配方法的解释。](http://www.w3schools.com/jsref/jsref_match.asp) **包含匹配项的数组，每个匹配项一个，如果未找到匹配项，则为 null**

id 与您的正则表达式匹配，它返回数组或 null，并且返回的数组分配给 m。所以 m [1](http://www.w3schools.com/jsref/jsref_match.asp)在第一个代码中使用。

id 与您的正则表达式匹配，它返回数组并将数组[1](http://www.w3schools.com/jsref/jsref_match.asp)分配给 m。所以 m 在第二个代码中使用。

如果您的 id 不匹配大小写，在第二个代码中您会得到 null 或未定义的异常，但首先不会。

# objective-c - 捆绑资源未在应用程序上更新。

> ID：12594430
> 
> 赞同：0
> 
> 时间：2012-09-26T04:12:15.677
> 
> 标签：objective-c, ios, xcode

我更新了 iOS 应用程序的启动画面；但是，该应用程序会继续以之前的初始屏幕启动。当我在模拟器中启动应用程序时，它工作正常。

我对其他图像也有类似的问题。如果我不更改文件名，有时图像不会更新。

关于为什么会发生这种情况以及我能做些什么来解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:13:41.387

首先卸载旧应用程序，然后安装新的构建应用程序。

# kernel-module - 缓冲区溢出利用不适用于内核模块

> ID：12594435
> 
> 赞同：2
> 
> 时间：2012-09-26T04:13:05.830
> 
> 标签：kernel-module, buffer-overflow, exploit

我过去曾针对用户级进程进行过缓冲区溢出攻击。但是，如果我尝试溢出易受攻击的内核模块的缓冲区，这似乎不起作用。这就是我所做的：

有一个易受攻击的内核模块，我可以将其作为文件打开并对其进行读/写。写操作是在没有边界检查的情况下完成的。所以我做了一个写操作并溢出缓冲区并将返回地址覆盖为具有我的 shellcode 的环境变量的地址。但是出了点问题。内核崩溃，重新启动后我打开 /var/log/messages 并发现 eip 正确指向我覆盖的地址。但是它仍然崩溃说“无法处理虚拟地址处的内核空指针取消引用”有什么原因会发生这种情况吗？为什么不将控件重定向到覆盖的返回地址？

注意：我在 Redhat Enterprise linux 上运行了这个，并关闭了 exec-shield 和 ASLR。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:19:36.183

内核不能在不执行内核退出的情况下跳转到用户地址，因为它在特权模式下运行，具有与用户空间不同的配置（例如不同的分页表、CPU 权限位等）。

因此，为了将 shellcode 放入内核，您必须将 shellcode 打包到写入驱动程序（并复制到内核）的缓冲区中，并以某种方式获取它的地址。如果您可以访问内核映射，这并不难，但最近 Linux 发行版已开始锁定对此类敏感信息的访问，以使利用内核错误变得更加困难。

# php - 倒数计时器不适用于格林威治标准时间

> ID：12594438
> 
> 赞同：2
> 
> 时间：2012-09-26T04:13:30.580
> 
> 标签：php, javascript, html

我有倒计时，它不占用格林威治标准时间。

我希望它有格林威治标准时间。它使用的伦敦时间似乎是+1。

现场演示： http: [//ffsng.deewayz.in/countdown/](http://ffsng.deewayz.in/countdown/)

看来实际日期：有一些错误，或者我不知道它需要什么时间。我希望它采用 GMT 时间和日期

**这是我的代码：**

```
<?php
$dateFormat = "Y-m-d H:i:s";
$targetDate = mktime(15,00,00,9,26,2012);
$actualDate = time();
$secondsDiff = $targetDate - $actualDate;
$remainingDay     = floor($secondsDiff/60/60/24);
$remainingHour    = floor(($secondsDiff-($remainingDay*60*60*24))/60/60);
$remainingMinutes = floor(($secondsDiff-($remainingDay*60*60*24)-($remainingHour*60*60))/60);
$remainingSeconds = floor(($secondsDiff-($remainingDay*60*60*24)-($remainingHour*60*60))-($remainingMinutes*60));
$targetDateDisplay = gmdate($dateFormat,$targetDate);
$actualDateDisplay = gmdate($dateFormat,$actualDate);
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>FFSng Raid Countdown</title>
<link rel="stylesheet" type="text/css" href="/countdown/css.css"/>
<link href="style/style.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">
var days = <?php echo $remainingDay; ?>;
var hours = <?php echo $remainingHour; ?>;  
var minutes = <?php echo $remainingMinutes; ?>;  
var seconds = <?php echo $remainingSeconds; ?>;

function setCountDown ()
{
  seconds--;
  if (seconds < 0){
      minutes--;
      seconds = 59;
  }
  if (minutes < 0){
      hours--;
      minutes = 59;
  }
  if (hours < 0){
      days--;
      hours = 23;
  }
  document.getElementById("remain").innerHTML = days+" days, "+hours+" hours, "+minutes+" minutes, "+seconds+" seconds";
  setTimeout ( "setCountDown()", 1000 );
}
</script>

</head>
<center>
<body onload="setCountDown();">
<div id="container">
    <div id="header"><div id="header_left"></div>
    <div id="header_main"><span class="red"><h2>FFSng Raid Countdown</h2></span></div><div id="header_right"></div></div>
    <div id="content">
        <table class="countTable">
           <tr><td><span class="points">Target date:</td><td><?php echo $targetDateDisplay; ?></span></td></tr>
           <tr><th colspan="2" id="remain"><?php echo "$remainingDay days, $remainingHour hours, $remainingMinutes minutes, $remainingSeconds seconds";?></th></tr>
           <tr><td>Actual date:</td><td><?php echo $actualDateDisplay; ?></td></tr>
       </table>
    </div>
</div>
</body>
</center>
</html> 
```

**出现第二个问题**

但现在它少了 1 小时： 输出：

> 目标日期：2012-09-26 14:00:00

但我已经设置

> $targetDate = mktime(15,00,00,9,26,2012);

**固定代码：**

```
<?php
$dateFormat = "Y-m-d H:i:s";
$targetDate = gmmktime(15,00,00,9,26,2012);
$actualDate = time();
$secondsDiff = $targetDate - $actualDate;
$remainingDay     = floor($secondsDiff/60/60/24);
$remainingHour    = floor(($secondsDiff-($remainingDay*60*60*24))/60/60);
$remainingMinutes = floor(($secondsDiff-($remainingDay*60*60*24)-($remainingHour*60*60))/60);
$remainingSeconds = floor(($secondsDiff-($remainingDay*60*60*24)-($remainingHour*60*60))-($remainingMinutes*60));
$targetDateDisplay = gmdate($dateFormat,$targetDate);
$actualDateDisplay = gmdate($dateFormat,$actualDate);
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>FFSng Raid Countdown</title>

<script type="text/javascript">
var days = <?php echo $remainingDay; ?>;
var hours = <?php echo $remainingHour; ?>;  
var minutes = <?php echo $remainingMinutes; ?>;  
var seconds = <?php echo $remainingSeconds; ?>;

function setCountDown ()
{
  seconds--;
  if (seconds < 0){
      minutes--;
      seconds = 59;
  }
  if (minutes < 0){
      hours--;
      minutes = 59;
  }
  if (hours < 0){
      days--;
      hours = 23;
  }
  document.getElementById("remain").innerHTML = days+" days, "+hours+" hours, "+minutes+" minutes, "+seconds+" seconds";
  setTimeout ( "setCountDown()", 1000 );
}
</script>

</head>
<center>
<body onload="setCountDown();">
<div id="container">
    <div id="header"><div id="header_left"></div>
    <div id="header_main"><span class="red"><h2>FFSng 100 token Raid Countdown</h2></span></div><div id="header_right"></div></div>
    <div id="content">
        <table class="countTable">
           <center><img src="http://ffsng.com/images/ffsng_big.gif" width="400" height="240"></center>
           <tr><td>Target time and date:</td><td><?php echo $targetDateDisplay; ?></td></tr>
           <tr><th colspan="2" id="remain"><?php echo "$remainingDay days, $remainingHour hours, $remainingMinutes minutes, $remainingSeconds seconds";?></th></tr>
           <tr><td>Actual time and date:</td><td><?php echo $actualDateDisplay; ?></td></tr>
       </table>
    </div>
</div>
</body>
</center>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:41:05.963

要获取 GMT/UTC 日期时间值，请使用`gmdate`而不是`date`.

```
$targetDateDisplay = gmdate($dateFormat,$targetDate);
$actualDateDisplay = gmdate($dateFormat,$actualDate); 
```

该`date`函数做了两件事：

首先，它将 Unix 时间戳（无论如何都是 UTC 值）转换为计算机本地时区。
其次，它然后使用提供的格式字符串将此本地值转换为字符串表示形式。

`gmdate`另一方面，该函数仅创建一个字符串表示，而不进行任何时区转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:15:08.290

对于您的第二个问题，我猜 a`gmmktime`而不是`mktime`将适合您的需求（您应该查看[此处](http://php.net/manual/fr/function.gmmktime.php)的文档）。

# iphone - 首次查看警报

> ID：12594442
> 
> 赞同：1
> 
> 时间：2012-09-26T04:13:49.647
> 
> 标签：iphone, ios, uialertview

我有两个`textfields`，

1.  个人资料名称
2.  简介报价

在我的应用程序主屏幕中，我想在第一次启动时显示一个警报视图“创建配置文件”。如果在下一个启动配置文件中存在，它不应该显示警报视图？有人可以帮我编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:09:27.513

好的，我需要做同样的事情。我创建了一个用于存储 NSUserDefaults 的单例类。

我称它为我的默认类。

默认值.h

```
#import <Foundation/Foundation.h>

@interface Defaults : NSObject
{

}
@property(atomic,assign) int numberOfLaunches; 
+(Defaults*) currentDefaults;
+(Defaults*) defs; 
```

默认值.m

```
#import "Defaults.h"
#include "SynthesizeSingleton.h"
@implementation Defaults

SYNTHESIZE_SINGLETON_FOR_CLASS(Defaults)

+(Defaults*) defs
{
return [Defaults currentDefaults];
}

-(int) numberOfLaunches
{
    return [[NSUserDefaults standardUserDefaults] integerForKey:@"number_of_launches"];
}
-(void) setNumberOfLaunches:(int)numOfLaunch
{
    [[NSUserDefaults standardUserDefaults] setInteger:numOfLaunch forKey:@"number_of_launches"];
} 
```

--现在只需将默认类导入您想要使用它的任何类。

```
if([Defaults defs].numberOfLaunches < 1)
    {                                                      
            [Defaults defs].numberOfLaunches++;
            //Perform whatever alertView action your wanting to do

              UIAlertView *alertV=[[UIAlertView alloc]initWithTitle:NSLocalizedString(@"FIrst Launch",NULL) message:NSLocalizedString(@"This is the apps first launch",NULL) delegate:nil cancelButtonTitle:NSLocalizedString(@"Okay",NULL) otherButtonTitles:nil];
        [alertV show];
        [alertV release];

   } 
```

//如果你想知道他们按下了哪个按钮，你需要通过UIAlertViewDelegate

# php - WordPress Contact Form 7 Plugin - 如何将输入数据保存到 jquery cookie 中？

> ID：12594444
> 
> 赞同：0
> 
> 时间：2012-09-26T04:13:59.590
> 
> 标签：php, wordpress, contact-form-7

我想知道是否有一种方法可以将 Contact Form 7 中的用户输入数据保存到 cookie 中，最好是 jquery cookie 插件。

通过这样做，我可以在访问其他页面时检索这些值，以便显示/重新处理这些数据。

联系表格 7 包含很多文件，我有点迷茫。任何想法或建议如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:37:43.483

设法从 CF7 插件获取表单数据并将其保存到 jQuery cookie。这就是我所做的。（一种快速而肮脏的方式）

**打开includes/js/目录下的scripts.js，找到下面一行代码**

`$(data.into).find('form').resetForm().clearForm()`

这将重置表单，因此表单值将全部为空。

**在上面提到的代码之前添加自定义代码**

例如，如果我想`name`在成功发送电子邮件后保存该值——我们可以这样做

```
if(data.mailSent == 1)
{
    var name = $('input[name="your-name"]').val();
    $.cookie('mycookie_namevalue', name, { path: '/' });
} 
```

`your-name`是`name`属性的默认值，或将其更改为 CF7 插件设置中指定的任何值。

# iphone - 为 TWTweetComposeViewController 设置完成处理程序时崩溃

> ID：12594445
> 
> 赞同：2
> 
> 时间：2012-09-26T04:14:20.010
> 
> 标签：iphone, ios, twitter, objective-c-blocks

好的，这是我的应用程序中的第一个地方，我使用一个块来做任何事情，所以我需要检查一些设置或 Xcode 设置吗？在我看来，这似乎是对块的简单使用，没有做任何花哨的事情，但它在 iOS 6 模拟器中崩溃： **tweetViewController.completionHandler = ^(TWTweetComposeViewControllerResult result) 。**

```
- (void) showTweetComposer
{
    TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];

    [self presentViewController:tweetViewController animated:YES completion:nil];

    tweetViewController.completionHandler = ^(TWTweetComposeViewControllerResult result)
    {
        [self dismissModalViewControllerAnimated:YES];
    };

    [tweetViewController release];
}

thread #1: tid = 0x1c03, 0x02e3d09f libobjc.A.dylib`objc_msgSend + 19, stop reason = EXC_BAD_ACCESS (code=2, address=0x0)
    frame #0: 0x02e3d09f libobjc.A.dylib`objc_msgSend + 19
    frame #1: 0x02e28cc9 libobjc.A.dylib`objc_setProperty_nonatomic_copy + 49
    frame #2: 0x051c38b2 Social`-[SLTwitterComposeViewController setCompletionHandler:] + 47
    frame #3: 0x001e2e06 MyApp`-[SocialViewController showTweetComposer] + 246 at SocialViewController.m:137
    frame #4: 0x001e2ff7 MyApp`-[SocialViewController tweetToFriendsRowTouched] + 247 at SocialViewController.m:150
    frame #5: 0x02e3f663 libobjc.A.dylib`-[NSObject performSelector:] + 62
    frame #6: 0x0018b4f1 MyApp`-[GroupedTableViewController tableView:didSelectRowAtIndexPath:] + 401 at GroupedTableViewController.m:143 
```

无论我是否登录 Twitter，都会发生这种情况。

**编辑**：我在 showTweetComposer 方法的开头添加了一个简单的基于块的代码片段，以测试任何类型的块在我的代码中工作：

[UIView animateWithDuration:0.2 动画：^{ self.view.alpha = 0.0; } 完成：^（布尔完成）{ [self.view removeFromSuperview]; }];

现在它在这个新块上崩溃了。所以，我的项目中似乎有一些东西需要设置为支持使用块，但我不确定那会是什么。我的 iOS 部署目标设置为 iOS 4.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:51:57.120

好的，解决了。这个要点是，不要使用 -weak_library 对 libSystem.dylib 进行弱链接

[在这里](https://stackoverflow.com/questions/6738858/use-of-blocks-crashes-app-in-iphone-simulator-4-3-xcode-4-2-and-4-0-2)找到了答案

# php - 如何获取控制输入文件的完整路径文件？

> ID：12594446
> 
> 赞同：-1
> 
> 时间：2012-09-26T04:14:22.713
> 
> 标签：php, javascript

我有输入文件：

```
<input type="file" id="txt1" onchange="setText();"> 
```

和脚本获取路径文件为：

```
function setText()
  {
       var text = document.getElementById("txt1").value;
       alert(text);

  } 
```

在输入文件的文本框中，`value= C:\Users\iloveyou\Desktop\BaiTapTest.zip` 但在脚本中，我得到了价值：`text=BaiTapTest.zip` 我想得到你`text= C:\Users\iloveyou\Desktop\BaiTapTest.zip` 能帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:20:57.100

由于安全问题，获取文件的完整路径实际上不是一个选项。有一些特定于浏览器的黑客攻击方法，但没有一个是非常可靠的。底线是，以可预测的方式获取文件的完整本地路径是不可能的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T05:00:09.873

```
<input type="file" id="txt1" onchange="javascript:alert(this.value);">​ 
```

你可以吗？你可以通过这个获得完整的路径。

[关联](http://jsfiddle.net/UB6xc/)

# php - PHP将数据插入数据库导致错误

> ID：12594449
> 
> 赞同：-5
> 
> 时间：2012-09-26T04:14:37.907
> 
> 标签：php, mysql

我正在尝试将数据发送到我的数据库，但出现错误：

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'long,avbal,annual2,namebank,bankrupt,unpaid,summy) VALUES ('','','','','',' 附近使用的正确语法','' 在第 1 行

当我删除受影响的字段和上述值时，将相应地发布信息。我不知道是什么原因造成的。

**代码：**

```
$sql="INSERT INTO client (first,middle,last,dob,ssn,streetad,city,state,zip,malayct,nomalay,phone,ownership,annual,worth,bizname,taxid,staddress,city2,state2,zip2,mail,bizphone,bizfax,email,contact,bizst,otherbizst,bizdisp,formation,establish,loantype,paytype,loanpurpose,availcolat,othercolat,pribank,long,avbal,annual2,namebank,bankrupt,unpaid,summy)
VALUES
('$_POST[name1]','$_POST[name2]','$_POST[name3]','$_POST[name4]','$_POST[name5]','$_POST[name6]','$_POST[name7]','$_POST[name8]','$_POST[name9]','$_POST[name10]','$_POST[name11]','$_POST[name12]','$_POST[name13]','$_POST[name14]','$_POST[name15]','$_POST[name16]','$_POST[name17]','$_POST[name18]','$_POST[name19]','$_POST[name20]','$_POST[name21]','$_POST[name22]','$_POST[name23]','$_POST[name24]','$_POST[name25]','$_POST[name26]','$_POST[name27]','$_POST[name28]','$_POST[name29]','$_POST[name30]','$_POST[name31]','$_POST[name32]','$_POST[name33]','$_POST[name34]','$_POST[name35]','$_POST[name36]','$_POST[name37]','$_POST[name38]','$_POST[name39]','$_POST[name40]','$_POST[name41]','$_POST[name42]','$_POST[name43]','$_POST[name44]')"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:19:55.930

您的直接问题是这`long`是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

您需要将其包装在反引号中，例如

```
INSERT INTO ... pribank, `long`, avbal, ... 
```

请参阅[http://dev.mysql.com/doc/refman/5.0/en/identifiers.html](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

这对您的应用程序的安全性没有任何意义。我强烈建议您阅读[PDO](http://php.net/manual/en/book.pdo.php)和[`PDO::prepare()`](http://php.net/manual/en/pdo.prepare.php)[`PDOStatement::bindParam()`](http://php.net/manual/en/pdostatement.bindparam.php)

# telerik - 如何访问 Telerik RadGrid 中的 DIV

> ID：12594454
> 
> 赞同：2
> 
> 时间：2012-09-26T04:15:39.843
> 
> 标签：telerik, telerik-grid

我在 RadGrid 的 GridTemplateColumn 的 ItemTemplate 中有一个具有自己 id 的 div。如何从后面的代码访问这个 div？如果它是网页中的一个 div，我可以通过键入它的 id 来访问它，但是这个方法现在不起作用，因为它嵌套在网格内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:16:57.203

请使用这个例子。

在 Aspx 页面中

```
 <telerik:GridTemplateColumn> 
      <ItemTemplate> 
            <div id="divlayer" runat="server"> 
              Hello             
            </div> 
       </ItemTemplate> 
  </telerik:GridTemplateColumn> 
```

在 CS

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e) 
    { 
        if (e.Item is GridDataItem) 
        { 
            GridDataItem item = (GridDataItem)e.Item; 
            HtmlGenericControl container = (HtmlGenericControl)item.FindControl("divlayer"); 
        } 
    } 
```

希望它可以帮助你..

# php - 如何阻止 MySQL 十进制字段被四舍五入？

> ID：12594456
> 
> 赞同：8
> 
> 时间：2012-09-26T04:15:56.720
> 
> 标签：php, mysql, sql

我在 MySQL 中有一个表，其字段为十进制，长度为 9，无符号。我用它来计算价格。

在我插入数据并查询它之后，它已经全部四舍五入，小数点已被删除。

我很困惑为什么。

故障排除提示？

* * *

**主机**：web.com

**phpMyAdmin 版本**：2.11.10.1

**MySQL客户端版本**：5.0.95

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T04:32:48.763

MySQL 中的小数类型有两个调整旋钮：精度和小数位数。您省略了比例，因此默认为 0。

## 文档（[链接](http://dev.mysql.com/doc/refman/5.1/en/precision-math-decimal-changes.html)）

> DECIMAL 列的声明语法是 DECIMAL(M,D)。MySQL 5.1 中参数的取值范围如下：
> 
> M 是最大位数（精度）。它的范围是 1 到 65。（旧版本的 MySQL 允许的范围是 1 到 254。）
> 
> D 是小数点右侧的位数（刻度）。它的范围是 0 到 30，并且不能大于 M。

## 例子

```
mysql> create table test01 (field01 decimal(9));
Query OK, 0 rows affected (0.01 sec)

mysql> insert into test01 (field01) values (123.456);
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> select * from test01;
+---------+
| field01 |
+---------+
|     123 |
+---------+
1 row in set (0.00 sec)

mysql> create table test02 (field01 decimal(9, 4));
Query OK, 0 rows affected (0.00 sec)

mysql> insert into test02 (field01) values (123.456);
Query OK, 1 row affected (0.01 sec)

mysql> select * from test02;
+----------+
| field01  |
+----------+
| 123.4560 |
+----------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-30T18:21:10.443

我有同样的问题。事实证明，如果您输入 PHPMyAdmin 会忽略小数位并假定它为 0。使用 alter table query 更改它。ALTER TABLE `tablename`CHANGE `rate` `rate`DECIMAL(30,3) UNSIGNED NOT NULL;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:22:14.490

舍入完成是因为您可能已将其数据类型设置为`int`.

将其数据类型更改为`double`OR `Float`。

这将帮助你。

**编辑**

如果您有数据类型，请`decimal`像此编辑一样给出它的大小。

```
create table numbers (a decimal(10,2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-01T03:23:29.413

发生舍入是因为您需要在类型声明中声明精度

```
create table test01 (field01 decimal(9,2)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-30T14:49:47.700

在 PHP/MySQLAdmin 中，转到表结构，点击更改，然后将财务数据（美元）的长度（默认为 10,0）设置为 10,2。

# jboss7.x - 在 JBOSS 7.1 中访问自定义创建的数据源

> ID：12594457
> 
> 赞同：1
> 
> 时间：2012-09-26T04:16:02.937
> 
> 标签：jboss7.x

当天的问候

通常我们在standalone.xml 中定义数据源，然后我们将在基于JNDI 名称的应用程序代码中使用相同的数据源，这对我来说很好用。但是我们有一个特殊的功能，我们通过应用程序创建自定义数据源，然后使用自定义名称创建数据源 xml，例如 oracle.Host_Name-ds.xml、sqlserver.Host_Name-ds.xml、mysql.Host_Name-ds.xml、 oracle.Host_Name1-ds.xml 等等，我们使用这个数据源来连接

```
 String dsName = oracle.Host_Name;

        try
        {
            javax.sql.DataSource ds = DataSourceHelper.getDataSource(dsName);

            conn = ds.getConnection();
        } 
```

在 JBOSS 4.x 中，我们过去常常（通过应用程序）动态创建这些文件并将它们存储在应用程序服务器/服务器/默认/部署文件夹中，我们过去常常毫无问题地访问数据源。

在 JBoss 7.X 中，如何绑定创建的数据源，以便我们可以在不更改代码的情况下访问它们。我不想更改代码，因为我们使用它的实例太多了，而且它还会影响其他功能

问候斯里尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:21:02.617

我认为此链接描述了您的要求。

参考@DataSourceDefinition的使用

[来自应用程序的 ds 配置](https://community.jboss.org/wiki/DataSourceConfigurationInAS7)

希望这可以帮助 ：-）

# scala - 如何以正确的 Scala 函数方式编写以下代码段？

> ID：12594458
> 
> 赞同：0
> 
> 时间：2012-09-26T04:16:12.583
> 
> 标签：scala, functional-programming

我对 Scala 很陌生，想知道这是否是正确的写作方式：

```
def createCol(prior: List[Int], current: List[Int]): List[Int] = {
  if (prior.isEmpty) List(1) ++ current
  else if (prior.tail.isEmpty)   // begin of the block to improve
    createCol(prior.tail, current ++ List(prior.head))
  else
    createCol(prior.tail, current ++ List(prior.head + prior.tail.head))
} 
```

我感兴趣的部分是：

```
if (prior.tail.isEmpty)
  createCol(prior.tail, current ++ List(prior.head))
else
  createCol(prior.tail, current ++ List(prior.head + prior.tail.head)) 
```

因为我重复几乎相同的函数调用`createCol`，所以我尝试了这个：

```
val ssum = if (prior.tail.isEmpty) prior.head else prior.head + prior.tail.head
createCol(prior.tail, current ++ List(ssum)) 
```

最好或推荐的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T04:24:54.850

几点：

1.  我更改了您的函数以使用 Scala 的模式匹配框架，因为它大大简化了您的代码。

2.  您不应该这样做`List(x) ++ someList`，因为这会不必要地构造一个单项列表。您应该只使用 prepend 方法`::`（或`+:`）。附加 ( `:+`) 也是如此。

3.  如果`prior`只有一个元素，你知道所有递归调用要做的就是`1`在`current`. 因此，您可以从第二种情况中删除递归调用。

4.  你的方法是尾递归的，所以用`@tailrec`.

5.  最后，考虑使用 a`Vector`而不是`List`. 追加到 a`List`是 O(n)，因为方法必须一直遍历到最后（然后从后到前重构 List）。但是添加和附加到 a`Vector`实际上都是 O(1)。

所以：

```
@tailrec
def createCol(prior: List[Int], current: List[Int]): List[Int] = {
  prior match {
    case Nil => 1 :: current
    case head :: Nil => 1 +: current :+ head
    case head :: tail => createCol(tail, current :+ (head + tail.head))
  }
} 
```

您也可以在两种情况下这样做，就像您在问题中描述的那样。但是您应该使用该`headOption`方法而不是显式执行`if/else`：

```
@tailrec
def createCol(prior: List[Int], current: List[Int]): List[Int] = {
  prior match {
    case Nil =>
      1 :: current
    case head :: tail =>
      createCol(tail, current ++ List(head + tail.headOption.getOrElse(0)))
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:01:21.237

您的功能似乎等同于以下内容：

```
def createCol(prior: List[Int], current: List[Int]) =
  if (prior.isEmpty) 1 :: current
  else 1 :: current ::: (prior, prior.tail :+ 0).zipped.map(_ + _) 
```

或者，`Vector`如果列表很长，使用 which 应该会产生更好的 prepend 和 append 性能：

```
def createCol(prior: Vector[Int], current: Vector[Int]) =
  if (prior.isEmpty) 1 +: current
  else (1 +: current) ++ (prior, prior.tail :+ 0).zipped.map(_ + _) 
```

这避免了递归，我认为更清楚地看到它`current`没有被修改，它`1`只是预先添加，并且先验与自身相加，偏移量为 1，最后一个元素本身（与 相加`0`），然后附加到当前。

甚至避免重复 (1 +: current)：

```
(1 +: current) ++ (
  if (prior.isEmpty) Vector()
  else (prior, prior.tail :+ 0).zipped.map(_ + _)) 
```

# iphone - 游戏中心排行榜在沙盒中工作但不发布

> ID：12594461
> 
> 赞同：0
> 
> 时间：2012-09-26T04:16:36.173
> 
> 标签：iphone, game-center

在沙盒模式下排行榜正常显示，但是通过应用商店发布后，在游戏中心仪表板中显示“没有排行榜”，我确定至少有3名玩家提交了分数。

PS：我没有用'com.xxx.xxx'包装类别，可以吗？因为它在沙箱中工作。

```
GKScore *uploader = [[[GKScore alloc] initWithCategory:@"board"] autorelease]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:14:36.077

您是否在 iTunesConnect 中提交了您的排行榜/成就？当您将应用提交到商店时，您还必须选择要在发布应用时提交的排行榜和/或成就。在 iTunesConnect 中检查您的应用程序并查看您的排行榜是否已提交。

# r - 选择一个随机数，总是比上次选择的随机数增加值

> ID：12594472
> 
> 赞同：8
> 
> 时间：2012-09-26T04:17:27.553
> 
> 标签：r, random, sample

我将如何有效地获取值 1:n 的 1×1 升序随机样本，确保每个随机采样值始终高于前一个值？

例如：

> 对于值 1:100，获取一个随机数，比如 61。（当前列表 = 61）
> 然后在 62 和 100 之间选择另一个数字，比如 90（当前列表 = 61,90）
> 然后在 91 之间选择另一个数字和 100，说这是 100。
> 当达到最大值时停止进程（最终列表 = 61,90,100）

我一直被困在循环领域，以这种笨拙的方式思考：

```
a1 <- sample(1:100,1)

if(a1 < 100) {
    a2 <- sample((a+1):100,1)
        }

etc etc... 
```

我想报告一个最终向量是 a1,a2,a(n) 的串联：

```
result <- c(a1,a2) 
```

尽管这听起来像是一个家庭作业问题，但事实并非如此。谢天谢地，我多年前离开了做作业的日子。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T10:51:59.800

派对迟到了，但我认为这会震撼你的世界：

```
unique(cummax(sample.int(100))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T04:34:22.607

这使用一个`while`循环并被包装在一个函数中

```
# from ?sample
resample <- function(x, ...) x[sample.int(length(x), ...)]

sample_z <-  function(n){
  z <- numeric(n)
  new <- 0
  count <- 1

  while(new < n){
    from <- seq(new+1,n,by=1)
    new <- resample(from, size= 1)
    z[count] <- new
    if(new < n)  count <- count+1
  }

  z[1:count]
}

set.seed(1234)

sample_z(100)
## [1]  12  67  88  96 100 
```

# 编辑

注意当新样本为 100 时要处理的更改以及处理`sample`整数而不是向量的方式`x`

# 编辑 2

实际上阅读帮助提供`sample`了有用的`resample`功能。这避免了 length(x) == 1 时的陷阱

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T04:31:24.070

不是特别有效，但是：

```
X <- 0
samps <- c()
while (X < 100) {
    if(is.null(samps)) {z <- 1 } else {z <- 1 + samps[length(samps)]}
    if (z == 100) {
        samps <- c(samps, z)
    } else { 
        samps <- c(samps, sample(z:100, 1))
    }
    X <- samps[length(samps)]
} 
```

samps 编辑：从中修剪一点脂肪：

```
samps <- c()
while (is.null(samps[length(samps)]) ||  samps[length(samps)] < 100 ) {
    if(is.null(samps)) {z <- 1 } else {z <- 1 + samps[length(samps)]}
    if (z == 100) {
        samps <- c(samps, z)
    } else { 
        samps <- c(samps, sample(z:100, 1))
    }
}

samps 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T07:04:26.683

甚至更*晚*的聚会，但只是为了好玩：

```
X <- Y <- sample(100L)
while(length(X <- Y) != length(Y <- X[c(TRUE, diff(X)>0)])) {} 
```

* * *

```
> print(X)
[1]  28  44  60  98 100 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-14T06:03:37.170

## 对随机向量进行排序

创建一个随机整数向量，然后对其进行排序。

```
sort(sample(1:1000, size = 10, replace = FALSE),decreasing = FALSE) 
```

给出 10 个 1 到 1000 之间的随机整数。

```
> sort(sample(1:1000, size = 10, replace = FALSE),decreasing = FALSE)
[1]  44  88 164 314 617 814 845 917 944 995 
```

这当然也适用于随机小数和浮点数。

# javascript - javascript函数显示以前的结果

> ID：12594474
> 
> 赞同：-4
> 
> 时间：2012-09-26T04:17:28.130
> 
> 标签：javascript, html

当我将我的javascript文件保存在这样的函数中时：

```
function deletefolder1(ID)
{

    document.write("hello world");
}
and call from here:
<a href='javascript:void(0)' onClick='deletefolder1($folderID) class='deletefolder'>Delete a folder</a> 
```

它工作正常：

但是当我替换功能完全一样时：

```
function deletefolder1(ID)
{
    $.post("modules_user/module_user/scripts/addtofolder.php",{folderID:ID});
} 
```

它再次显示结果：HELLO WORLD

真是废话，我不知道该怎么办，我认为我的脚本在某些地方破解或计算机内存没有被新内容取代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:07:06.047

清除浏览器缓存或按 Ctrl + F5 以在浏览器中获取最新的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:30:17.077

如果你一次又一次地遇到这种错误（很可能在 IE 中），你应该以这种方式请求你的 js 文件：

首先从您的服务器生成随机值。

如果您使用的是 PHP，您可以将代码编写为

```
<script type="text/javascript" src="yourfile.js?rand=<?php echo $random;?>"> 
</script> 
```

# html - 如何停止空白空间的背景图像重复？

> ID：12594476
> 
> 赞同：8
> 
> 时间：2012-09-26T04:17:31.797
> 
> 标签：html, css, repeat

刚刚遇到重复背景图像的问题。

在内容很短，比显示器高度短的情况下，背景图像仍然会为多余的空间重复。

请参考截图。

橙色条是我的页脚。底部的灰色区域是额外的空间。

我可以停止底部区域的背景图像重复吗？

我的意思是理想情况下，只要我的内容重复，背景图像就会重复。

任何帮助将不胜感激。

![我的形象](../Images/86053c121777722014db8fd67332be2e.png).

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T04:21:00.080

您可以使用以下属性。

```
background-repeat:no-repeat; 
```

欲了解更多信息，请访问此[网站](https://developer.mozilla.org/en-US/docs/CSS/background-repeat)

您还可以分别给出`repeat-y`或`repeat-x`使背景图像垂直或水平重复。

如果您想为背景图像提供尺寸，那么您可以使用

```
background-size:100px 100px; /* width height */ 
```

我想这就是你的意思。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T05:34:56.587

与其将背景粘贴到身体上，不如将另一个 div 放在那里并将背景放在上面。内部内容会将 div 推到正确的高度并在该点停止（除非另有说明）。

例如：

```
<!doctype html>
<html>
<body>
    <div id="background">
        Your inner content
    </div>    
</body>
</html> 
```

并将你的重复背景放在`#background`你的CSS而不是你的身体上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T10:12:45.737

如果您可以在此处发布您的代码，那就太好了。

尝试这样的事情：

```
<div>     
 <div>
  <div style="float:left;"></div>
  <div style="float:left;"></div>
  <div style="clear:both"></div>
 </div>
 <div class="footer"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-26T11:28:18.147

在样式部分试试这个。

```
background-size: cover;
background-repeat:no-repeat; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-23T14:39:03.437

您可以直接在 CSS 制作中设置背景，如下所示：

```
body {
 background: url(../images/background.jpg);
 background-size: cover;
 background-repeat: no-repeat;
} 
```

希望这会有所帮助：D

# .htaccess - 使用 mod_rewrite 更改 URL 中的单词的问题

> ID：12594477
> 
> 赞同：1
> 
> 时间：2012-09-26T04:17:41.423
> 
> 标签：.htaccess, mod-rewrite

我正在尝试将我的 URL 中的“portfolio”一词更改为“portfolio/project”，并无意中创建了一个重定向循环。将不胜感激任何帮助指出我正确的方向。

例子：

[http://www.example.com/portfolio/interactive/abc/](http://www.example.com/portfolio/interactive/abc/)到

[http://www.example.com/portfolio/project/interactive/abc/](http://www.example.com/portfolio/project/interactive/abc/)

当前的 htaccess（最后两行与问题有关）：

```
redirect 301 "/sitemap.xml" http://www.example.com/sitemap.php

RewriteEngine On
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/sitemap.php
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{REQUEST_URI} /.*portfolio.*$ [NC]
RewriteRule ^(.*)portfolio(.*)$ /$1portfolio/project$2 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:34:53.497

您的问题是您的正则表达式也与您的目标匹配，因此在重定向之后，URI 匹配相同的规则并再次被重定向（您可能已经注意到 URI 中有一堆`/project/project/project/project/project/project/project`）

添加排除条件：

```
RewriteCond %{REQUEST_URI} !portfolio/project
RewriteCond %{REQUEST_URI} /.*portfolio.*$ [NC]
RewriteRule ^(.*)portfolio(.*)$ /$1portfolio/project$2 [R=301,L] 
```

# oracle - 在 SQL Developer 的单元测试框架中验证 PL/SQL 存储过程 OUT REF CURSOR

> ID：12594478
> 
> 赞同：2
> 
> 时间：2012-09-26T04:17:43.093
> 
> 标签：oracle, unit-testing, plsql, oracle-sqldeveloper

我正在一个包中开发一系列 PL/SQL 存储过程，这些过程打开了作为 OUT 参数传递给调用者的 REF CURSOR，以实现与另一个框架的互操作性。我正在使用 SQL Developer，最近开始研究使用内置的测试功能。

我正在寻找一种使用 SQL Developer 的单元测试框架来验证 REF CURSOR 结果的方法。我开发了一些分页逻辑，我想确保它正常运行，所以我希望我可以验证我的行数是否正确，并且它们的行号在适当的页面范围内。

[我在这里](https://forums.oracle.com/forums/thread.jspa?threadID=2131008)发现了一个类似的问题，但是该解决方案使单元测试绝对无用（至少据我所知），因为它在运行过程后实际上并没有执行任何验证。如果有人可以解释如何验证它或向我展示我在 Oracle 论坛的解决方案中缺少什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:19:35.933

流程验证可用于对 SQL Developer 无法处理的数据类型进行单元测试。

1.  创建一个实现并将其与一个虚拟过程或函数链接（同步）。
2.  设置参数和结果，以便测试成功完成
3.  使用显示的模板使用“用户 Pl/Sql 代码”创建流程验证

模板：

```
DECLARE
  l_Cursor  SYS_REFCURSOR ;
BEGIN
  OPEN l_Cursor FOR '<SQL goes here>' ;
  MY_PROCEDURE( l_Cursor ) ;
  <do validation>
  CLOSE l_Cursor;
  IF <not valid> THEN
    RAISE PROGRAM_ERROR ;
  END IF ;
END ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:37:38.850

通过比较两个 REF CURSOR 的 XML 表示，我们在 PL/SQL 中做了类似的事情（尽管不是使用 SQL Developer 的单元测试框架）：

*   定义一个“预期”查询，将预期输出作为 REF CURSOR 返回（通常从对偶中选择一些常量）
*   运行您的“预期”和“真实”查询，并将它们的输出转换为 XML / HTML / 任何
*   比较输出

要将 REF CURSOR 转换为 XML，您可以使用 DBMS_XMLGEN，如[AskTom 中描述的 ref 光标](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:75558626875490)

# javascript - Javascript删除和重新排列数组元素

> ID：12594482
> 
> 赞同：3
> 
> 时间：2012-09-26T04:18:23.373
> 
> 标签：javascript, arrays, dom

我有这个存储在数组中的图像资源集合，用户将选择一个图像，然后从列表中删除所选图像（也从数组中），然后重新排列数组。我怎么能执行这样的任务？（尽可能我不想使用开源库）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T04:27:49.453

听起来您需要查找 splice() 方法。它允许您在数组中的任何索引处添加和删除一个到多个项目。

这是它的参考。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T04:23:24.823

您的问题缺少代码示例，但您可以使用 Array.splice(index,number) 而 index 从零开始， number 是要删除的项目数。

```
images.splice(selectedIndex,1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-29T03:57:56.237

简单地说，您可以创建一个临时数组，在其中存储所需的初始数组元素，并将初始数组的值重新分配给临时数组。

```
 function clean_array(my_array){
       var no_need_value = 'value you want to remove'
       var tmpArray = new Array()
       for (var i = 0; i < my_array.length; i++)
           if (my_array[i] != no_need_value)
               tmpArray.push(my_array[i])
       my_array = tmpeArray
   } 
```

# ruby-on-rails - 在 rails 中使用 has_many :through 时，查询可以从所有三个表中产生字段吗？

> ID：12594483
> 
> 赞同：0
> 
> 时间：2012-09-26T04:18:34.490
> 
> 标签：ruby-on-rails, activerecord, has-many-through

在我的应用程序中，主要对象是 Accounts 和 Phones，具有典型的 has_many :through Contacts，例如：

```
Account:
has_many :contacts
has_many :phones, :though => contacts

Phone:
has_many :contacts
has_many :accounts, :though => :contacts

Contact:
belongs_to :account
belongs_to :phone 
```

联系人有字段 signup_status, name 每个唯一的帐户/电话对有一个联系人

对于 id = 123 的帐户，它有 5 个联系人，每个联系人都有一部电话，是否有一个查询会产生所有 5 行并包括所有帐户字段和联系人字段和电话字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:15:48.247

您可以使用[预先加载的关联](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-multiple-associations)在一个活动记录查询中获取您需要的所有数据

```
@account = Account.includes(:contacts, :phones).find(123) 
```

，这实际上将转换为三个 SQL 查询：

```
SELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT 1  [["id", 123]]
SELECT "contacts".* FROM "contacts" WHERE "contacts"."account_id" IN (123)
SELECT "phones".* FROM "phones" WHERE "phones"."id" IN (<phone ids found in prev query>) 
```

所有记录都将加载到内存中，并通过@account 变得可用。要获取联系人和电话数组，只需分别调用`@account.contacts`和`@account.phones`。请注意，这些调用不会导致重新发出 SQL 查询，这是急切加载的美妙之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:12:04.360

ActiveRecord 还不够聪明，无法通过一个 SQL 查询来完成所有这些工作。但是，您可以通过使用包含来非常接近，这将避免 n+1 查询。

```
Account.includes(:contacts => :phones).where(:id => 123) 
```

ActiveRecord 将执行一次查询以加载所有帐户记录，一次查询以加载所有联系人，一次查询以加载所有电话。有关这背后的原因，请参阅下面的文档链接。

如果您*真的*想在一个 SQL 查询中获取所有内容（可能有缺点），您应该查看[ActiveRecord::Associations::Preloader （文档）](http://apidock.com/rails/ActiveRecord/Associations/Preloader/ "ActiveRecord::Associations::Preloader")

# delphi - Delphi和Lazarus在表单初始化上的区别？

> ID：12594489
> 
> 赞同：6
> 
> 时间：2012-09-26T04:19:03.520
> 
> 标签：delphi, freepascal, lazarus

MainForm 在运行时创建一些辅助 Frame 对象来显示各种选项面板。

这是其中一个框架类的典型构造函数（它们每个都扩展 TFrame）：

```
constructor Tframe2.Create(AOwner: TComponent);
begin
    inherited;
    edTime.Text := '12:00pm'; //edTime is a TEdit control. this line is where it throws the exception
    //etc.
end; 
```

这段代码在 Delphi 中运行良好（无论它是否是正确的做事方式），但 Lazarus 中的相同代码不断抛出 EInvalidOperation 异常，因为控件（TEdit）尚未分配父“窗口”（rsControlHasNoParentWindow），当我检查代码时，这实际上是有道理的，因为直到调用构造函数之后父级似乎才被分配。

这是 MainForm 中初始化辅助框架的代码：

```
if Assigned(frame) then FreeAndNil(frame);
case Node.AbsoluteIndex of
    optInterval: frame := Tframe2.Create(Self); //here's where the constructor gets called.
    //etc
end;
frame := TframeOther.Create(Self); 
if Assigned(frame) then
begin
    frame.Parent := panOptions; //here's where Tframe2's parent gets set
    frame.Align := alClient;
end; 
```

那么，就表单初始化序列而言，任何人都可以解释 Delphi 和 Lazarus 之间是否有任何重要区别？

解决此类初始化顺序问题的最标准方法是什么？与我更熟悉的其他语言相比，可能有不同的策略来解决此类错误。我可以向构造函数添加另一个参数，或者如果有一个方法被称为构造函数后在屏幕上预绘制它，我可以覆盖我可以重新定位该代码，或者只是创建一个辅助方法并在 setParent 被调用后调用它。这里有什么特别的最佳实践吗？

编辑]：看来这可能以某种方式特定于 TEdit。看起来初始化复选框状态的行没有同样的问题。这可能只是拉撒路的一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:54:20.100

经过进一步的实验，我已经能够通过添加一行将 TEdit 的父级设置为 Frame（而不是设置 Frame 的父级）来解决它崩溃的大部分直接问题。像这样：

```
edTime.Parent := Self;
edTime.Text := '12:00'; 
```

但我仍然很想更好地理解*为什么*“有时”需要这样做。

编辑：虽然这修复了能够在 TEdit 上设置文本的问题，但这并不能修复我拥有的自动调整大小的代码，它遍历组件并调整任何碰巧是复选框的大小。显然，没有父集的表单仍然是“某种”问题。

edit2：向构造函数添加第二个参数并在构造函数中为整个表单设置父级似乎消除了为 TEdit 设置父级的需要。

# mysql - 最新版本的 MySQL 在过去可以正常工作的代码上出现错误 1064

> ID：12594494
> 
> 赞同：1
> 
> 时间：2012-09-26T04:19:19.523
> 
> 标签：mysql

现在许多服务器都有最新版本的 MySQL - 在运行以下代码时会出错：

```
$drop_table = mysql_query("DROP TABLE IF EXISTS `$t_ads`");
$sqls[$t_ads] = "CREATE TABLE `$t_ads` (
  `adid` int unsigned NOT NULL auto_increment,
  `adtitle` varchar(100) NOT NULL default '',
  `addesc` longtext NOT NULL,
  `area` varchar(50) NOT NULL default '',
  `email` varchar(50) NOT NULL default '',
  `showemail` enum('0','1','2') NOT NULL default '0',
  `password` varchar(50) NOT NULL default '',
  `code` varchar(35) NOT NULL default '',
  `cityid` smallint unsigned NOT NULL default '0',
  `subcatid` smallint unsigned NOT NULL default '0',
  `price` DECIMAL( 10, 2 ) NOT NULL default '0',
  `othercontactok` enum('0','1') NOT NULL default '0',
  `hits` int unsigned NOT NULL default '0',
  `ip` varchar(15) NOT NULL default '',
  `verified` enum('0','1') NOT NULL default '0',
  `abused` int unsigned NOT NULL default '0',
  `enabled` enum('0','1') NOT NULL default '0',
  `createdon` datetime NOT NULL default '0000-00-00 00:00:00',
  `expireson` datetime NOT NULL default '0000-00-00 00:00:00',
  `timestamp` timestamp(14) NOT NULL,
  `paid` enum('0','1','2') NOT NULL default '2',
  PRIMARY KEY  (`adid`),
  KEY `subcatid` (`subcatid`),
  KEY `cityid` (`cityid`),
  KEY `verified` (`verified`),
  KEY `enabled` (`enabled`),
  KEY `paid` (`paid`)
) TYPE=MyISAM;"; 
```

具有旧版本 mysql 的服务器似乎接受了这一点，但新版本根本不接受它并给出错误。我有很多与它相关的错误，因为 PHP 数据库设置有点大。错误示例如下：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 21 行的 '(14) NOT NULL, `paid`enum, NOT NULL default '2', PRIMARY KEY ( `adid`), K'附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:24:52.497

您的代码的纯 SQL 部分看起来不错（刚刚使用 MySQL 5.6 对其进行了测试），尽管我通常建议不要将关键字`timestamp`用作列名。该表将在 MySQL 5.6 中创建，但您会遇到两个警告：

1.  该语法`TIMESTAMP(14)`已弃用，将在 MySQL 6.0 中删除。请`TIMESTAMP`改用
2.  该语法`TYPE=storage_engine`已弃用，将在 MySQL 6.0 中删除。请`ENGINE=storage_engine`改用

如果这没有帮助，请发布您正在使用的实际 MySQL 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:23:46.853

更改您的列名，它不应该是 mysql 关键字 'timestamp' 和

改变

```
`timestamp` timestamp(14) NOT NULL, 
```

至

```
`<SOME OTHERNAME>` timestamp NOT NULL, 
```

# ios - 用于 Cordova 2.0 的 Phonegap IOS PrintPlugin

> ID：12594495
> 
> 赞同：2
> 
> 时间：2012-09-26T04:19:20.457
> 
> 标签：ios, phonegap-plugins, cordova-2.0.0

嗨，我在 phonegap IOS (cordova 2.0) 工作，我需要一个打印插件，但我发现只有一个不支持 2.0 的插件[- 链接](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PrintPlugin) 只支持到 cordova 1.5。任何人请帮助我，是否有任何支持cordova 2.0的PrintPlugin。

任何人都可以帮忙吗？?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:11:35.417

在撰写本文时，来自 GitHub 存储库的 PrintPlugin 面向 Cordova 1.5。如果您获得该版本并进行以下更改，则可以在 Cordova 2.0 项目中进行编译。

注意：我在整个插件中看到了一个错误，这是打印多页的问题。我发现这与在打印前等待 webView 完成加载缺乏逻辑有关。我目前正在开发这个插件的新版本，以允许自定义标题、页码等。但现在.....；）

在当前存储库 .m 文件中，它具有以下函数声明：

```
- (void) print:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options{
    NSUInteger argc = [arguments count];

    if (argc < 1) {
        return; 
    }
    self.printHTML = [arguments objectAtIndex:0];

  ... << snipped />> ... 

    [self doPrint];
} 
```

随后是一个单独的 doPrint 函数。

```
- (void) doPrint{
    if (![self isPrintServiceAvailable]){
        [self callbackWithFuntion:self.failCallback withData: @"{success: false, available: false}"];

        return;
    }

    UIPrintInteractionController *controller = [UIPrintInteractionController sharedPrintController];

      if (!controller){
          return;
      }

        ... << snipped  (cut and paste to below) />> ...
} 
```

我更新了本地副本并将两者合并为一个函数，并使用不同的机制来获取参数。以下是我的 .m 函数声明：

```
- (void) print:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options
{   
    // NSUInteger argc = [arguments count];

    NSString* printHTML = [options valueForKey:@"printHTML"];
    NSString* successCallback = [options valueForKey:@"success"];
    NSString* failCallback = [options valueForKey:@"fail"];
    NSString* dialogLeftPos = [options valueForKey:@"dialogLeftPos"];
    NSString* dialogTopPos = [options valueForKey:@"dialogTopPos"];

  UIPrintInteractionController *controller = [UIPrintInteractionController sharedPrintController];

  if (!controller){
      return;
  }

    ... <<  snipped (paste the rest from your original block here />> ...
} 
```

然后我还修改了 .JS 以创建一个对象，而不是简单的参数列表。

当前存储库 PrintPlugin.js 具有：

```
return Cordova.exec("PrintPlugin.print", printHTML, callbackPrefix + '.success', callbackPrefix + '.fail', dialogLeftPos, dialogTopPos); 
```

return Cordova.exec("PrintPlugin.print", printHTML, callbackPrefix + '.success', callbackPrefix + '.fail', dialogLeftPos, dialogTopPos);

我将其更改为以下内容：

```
var args = {
    'printHTML': printHTML,
    'success': callbackPrefix + '.success',
    'fail': callbackPrefix + '.fail', 
    'dialogLeftPos': dialogLeftPos,
    'dialogTopPos': dialogTopPos
};

cordova.exec(null, null, "PrintPlugin", "print", [args]); 
```

现在，结果可能是我可以简单地将 Cordova 的案例更改为cordova，但这纯粹是事后诸葛亮。无论哪种方式，我希望这会有所帮助！

# objective-c - XCode OCUnit 在运行任何测试代码之前崩溃并出现 Abort 陷阱：6

> ID：12594502
> 
> 赞同：1
> 
> 时间：2012-09-26T04:20:26.523
> 
> 标签：objective-c, ios, xcode, ocunit, sentestingkit

我有以下愚蠢的简单测试用例（在带有对应 .h 文件的 .mm 文件中定义）。它使用 boost 尝试从 stringstream 中读取 ptree 以模拟文件中的文本。

```
-(void)setUp {
  printf("setup\n");

  ::std::stringstream ss;
  ss << "bad format text";

  _configuration = new ptree();
  ::boost::property_tree::read_json(ss, *_configuration);
} 
```

tearDown 函数什么都不做，并且有一个测试用例也什么也不做。如果我注释掉 read_json 行，一切正常。但如果我按原样运行它，我会得到：

```
Test Case '-[TestPlanner testPlanner]' started.
libc++abi.dylib: terminate called throwing an exception
/Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include: line 415:  3320 Abort trap: 6           "${THIN_TEST_RIG}" "${OTHER_TEST_FLAGS}" "${TEST_BUNDLE_PATH}"
/Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include:451: error: Test rig '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/Developer/usr/bin/otest' exited abnormally with code 134 (it may have crashed). 
```

真正疯狂的是，如果我在 SetUp 函数中设置断点，它甚至都不会运行！这是唯一启用的测试，因此即使没有运行单个测试的任何一行，也会发生崩溃。我知道测试设置正确，因为如果我注释掉 read_json 行并设置断点，它确实会到达，我可以在测试用例中包含一些断言，它们会按预期工作。

这也不仅仅是一个提升问题。我最初在从我自己的项目中调用不同的库时遇到了这个问题，但为了简化一切，我只使用了这个 boost 调用。这个完全相同的调用发生在代码的其他部分，所以我很确定我已经正确链接了 boost。我对命名空间非常冗长，所以我认为我没有链接错误版本的函数或其他东西。

我正在运行 XCode 4.5（但在 4.4.1 上有同样的问题）并尝试使用 OCUnit 编写单元测试。我正在处理的项目已经在这个框架中编写了一些单元测试，并且这些测试的所有内容似乎都运行良好。

我是 Objective C 和 XCode 的新手，但是设置这个项目的人肯定不是，他看不出我所做的有任何问题，我们都被难住了。

谢谢阅读！如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:51:28.047

如果它得到一个 C++ 异常，结果是 OCUnit barfs，并且由于某种原因，XCode（或者可能是 lldb）没有正确触发断点。设置代码正在运行，调试器只是不工作。添加 try/catch 块或将代码更改为：

```
-(void)setUp {
  printf("setup\n");

  ::std::stringstream ss;
  ss << "{}";

  _configuration = new ptree();
  ::boost::property_tree::read_json(ss, *_configuration);
} 
```

不会导致异常并使一切正常。

因此，如果您遇到此问题，解决方法是确保您尝试/捕获测试用例中的所有内容。希望有人能提出更好的答案，因为这似乎是 OCunit 中的一个相当大的错误。

# ios - RestKit fetchRequestForResourcePath 返回 nil

> ID：12594510
> 
> 赞同：0
> 
> 时间：2012-09-26T04:21:04.650
> 
> 标签：ios, restkit

我正在使用 RestKit 并尝试从我的本地数据存储中检索一个对象：

```
NSFetchRequest *fetchRequest = [[[RKObjectManager sharedManager] mappingProvider] fetchRequestForResourcePath:deviceResourceURI]; 
```

不幸的是，这`nil`为`fetchRequest`.

我`deviceResourceURI`的是`/api/v1/devices/1`。我已经定义

`[router routeClass:[MSZDevice class] toResourcePath:@"/api/v1/devices/:identifier/"];`

上`[RKObjectManager sharedManager].router`。

我相信我所有的其他核心数据配置都在工作。我忘记了什么？

**更新：**

我正在查看[RestKit - fetchFromDataStore (cache) 问题](https://stackoverflow.com/questions/11756210/restkit-fetchfromdatastore-cache-issue)，看看这是否是我的问题。

**更新：**

是的——同样的问题。我只是不知道如何`fetchRequestBlock`形成`setObjectMapping:forResourcePathPattern:withFetchRequestBlock:`. 我被送到了[这种方法](https://github.com/RestKit/RestKit/blob/d3cad8df4e0e7ad4d47325c7f02a9fc316aa1ce3/Code/CoreData/RKObjectMappingProvider+CoreData.m#L22)`return nil;`的道路上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:13:58.617

回答：

配置`RKObjectMappingProvider`：

```
[objectMappingProvider setObjectMapping:deviceMapping forResourcePathPattern:@"/api/v1/devices/:identifier/" withFetchRequestBlock:^NSFetchRequest*(NSString *resourcePath){
    return [MSZDevice fetchRequest];
}]; 
```

回想起来如此简单。很简单，我认为这将是默认的、自省的返回值。

# visual-studio-2010 - Moles 不适用于 VS2010 Framework 4 客户端配置文件

> ID：12594514
> 
> 赞同：2
> 
> 时间：2012-09-26T04:21:38.470
> 
> 标签：visual-studio-2010, unit-testing, c#-4.0, moles, pex

我已经在 .net4 客户端配置文件中构建了一个解决方案。现在我已经添加了测试项目并尝试为我的 dll 添加 Moles 程序集。它给出了一个错误提示

“命令“Mole.exe 的路径”@“Mole.args 的路径”以代码退出 - 1008

"错误 210 命令 ""C:\Program Files\Microsoft Moles\bin\moles.exe" @"D:\Fdi_MainTrack_SCA\FDI UID Renderring\Main_Track\FDI UID Renderer\Fdi.UidRenderer\Fdi.UidRenderer.ObjectManager.Tests \obj\Debug\Moles\moles.args"" 退出，代码为 -1008。"

你能知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:57:48.970

不好了！恐惧1008再次崛起！有几件事*可以*解决这个问题，一个经过验证的解决方法：

1.  关闭 Visual Studio 的所有实例；打开解决方案并重试
2.  尝试将项目类型更改为完整的 .NET 4.0 配置文件而不是客户端；如果错误仍然存​​在，请重复步骤 1
3.  重新安装 Moles 功能集；虽然不方便，但这个解决方案修复了我的安装。

问题是 Moles 是一个不受支持的开发项目。它有漏洞，并且当环境中的其他事物发生变化时会失败。有时需要重新安装，以使 Moles 适应 Visual Studio 或计算机上其他位置的更改。

我一直在使用发布版（Fakes isolation Framework），它是Visual Studio 2012 Ultimate 的一个功能集。假货我完全没有问题。不过，我希望[NCrunch](http://www.ncrunch.net/)支持绕道而行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:15:54.813

我遇到了同样的问题，并通过安装[Visual Studio Service Pack 1解决了它](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

# javascript - 使用javascript在div标签中附加一个表

> ID：12594516
> 
> 赞同：0
> 
> 时间：2012-09-26T04:21:38.793
> 
> 标签：javascript, html

我有一个像

```
function btnclick()
{

  \\creating a div dynamically
  div[divclick,300,200, 'ok', cancel, btnok_click, btncancel_click]

}

<div style display:none>
<table id = 'tblcontainer'>
<tr>
<td>
add:
</td>
<asp:label id = lblgo>
</asp:label>
</tr>
</table> 
```

现在执行 btnclick 功能。我需要将 tblcontainer 附加到 divclick（动态创建）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:05:19.000

创建新元素的语法是，

```
var element= document.createElement(TAG_NAME); 
```

TAG_NAME 是一个字符串，示例值为“DIV”、“H1”、“SPAN”等。

在使用为新的创建元素添加属性之后，

```
element.setAttribute('attributeName','value'); // or element.attributeName = 'value'; 
```

attributeName => 元素的属性名称，即类、id、样式、对齐等。

将内容添加到创建的元素中：

```
var content = document.getElementById('tblcontainer').outerHTML;
element.innerHTML = content; 
```

对于`content`变量，我们可以直接提供元素字符串值。

将创建的元素附加到 body 或任何其他 div 元素上，

```
var _div = document.getElementById("divId");
_div.appendChild(element);
//or
var _body = document.getElementsByTagName('body')[0];
_body.appendChild(element); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:30:31.917

您的 javascript 不是真实的，并且您的 html 格式错误，所以我假设它是伪代码。

```
function btnclick(){
        \\creating a div dynamically
        var div = document.createElement("DIV");
        \\ you can do the other stuff not sure where you got the following...
        \\  div[divclick,300,200, 'ok', cancel, btnok_click, btncancel_click]
        div.appendChild(document.getElementById('tblcontainer'));
}

<div style display:none>
<table id = 'tblcontainer'>
<tr>
<td>
add:
</td>
<asp:label id = lblgo>
</asp:label>
</tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T04:32:03.147

您可以使用 ID 定义一个 div 标签：“divID”或其他

然后，

```
var adddivAll = document.getElementById("divID");
adddivAll.innerHTML = showData(); 
```

功能

```
function showData()
{
   var str;

   str = "<table width='300' border='0' cellspacing='0' cellpadding='0' align='left'>";

   str += "<tr><th width='55'>Rang</th><th width='80'>Name</th></tr>";

   for (i = 0; i < array_count; i++) {
       str += "<tr><td width='55'>" + array_count[i] + "</td><td width='85'>" + array_count_Name[i] + "</td></tr>";
   }

   str += "</table>";

   return str;
} 
```

对于 array_count ：您可以将数组用于动态值。与array_count_name 相同。

谢谢。

# java - 是否需要获得 Itext pdf 库的许可证才能进行内部开发？

> ID：12594520
> 
> 赞同：3
> 
> 时间：2012-09-26T04:22:51.207
> 
> 标签：java, itext

我想使用 Itext library 5.2 为内部软件生成 pdf 格式的报告（不用于商业用途）。它需要购买许可证吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:26:49.843

如果它真的是内部的，那么[您可以使用 AGPL](http://www.affero.org/oagf.html#How_does_this_license_treat_commercial)：

> 问：此许可证如何处理通过 Intranet 和内部网络使用的商业企业？
> 
> A：简单来说，如果在商业公司内部运行，那么公司不需要将源代码发布回世界。许可证要求，如果用户下载源代码，他们有权进行改进并且不发布这些修改。GNU GPL 软件通常以同样的方式解决这个问题。如果员工可以访问源并有权进行改进，则商业实体可能会将这项工作视为公司拥有的雇佣工作，而不必对外发布。
> 
> 问：商业实体可以在企业内网或内部网络环境中移除下载源按钮吗？
> 
> 答：不可以。任何想在公司内网或内部网络中使用该软件的人，都必须留下下载源按钮，但如果不从事分发，则不必进行修改。任何在其企业之外进行分发的人都必须保留下载源按钮，并通过此按钮为任何修改提供源。
> 
> 问：您如何定义网络化的企业？
> 
> A: 员工通过雇主的内部网络连接。

还要注意，即使是商业活动和分发也很好，只要你开源使用 iText 的程序的其余部分。

如果您让公司以外的任何人访问应用程序，即使是通过网络，甚至是免费的，那么您还需要向他们提供完整源代码的副本（或获得商业许可）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:26:33.323

> **一旦您开展商业活动，在您的产品中分发 iText 软件或将其部署在网络上，而无需根据 AGPL 许可披露您自己的应用程序的源代码，就必须**购买此类许可。这些活动包括：以 ASP 的形式向客户提供付费服务，在云端或 Web 应用程序中动态提供 PDF，将 iText 与闭源产品一起提供。

所以，我不会。

但是，您可能需要定义“内部”

# html - 在 iPad/iPhone 上只需要单击一次时需要单击两次

> ID：12594522
> 
> 赞同：5
> 
> 时间：2012-09-26T04:23:03.667
> 
> 标签：html, mobile, safari, click, jquery-address

我正在开发一个应该同时支持移动设备和桌面设备的网站。我正在使用[jquery-address 插件](https://github.com/asual/jquery-address)制作一个可以使用哈希标签进行深度链接的图片库。

但我注意到 iOS5 和 iphone 5 的 ipad 模拟器存在问题，我必须在图片库上两次单击图片库中的一个类别才能使事件正常工作。一键在 OSX 上的 chrome/safari/firefox 上运行良好。

到目前为止，我只在 iphone/ipad 上看到过这个。 **关于为什么桌面浏览器可以一键正常工作，但 ipad/iphone 上的 iOS 需要两个？** 我在这里不知所措。我不知道问题是我的标记/javascript 还是 iPad/iPhone 上 jquery-address/safari 中的一个模糊错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T07:05:05.947

我很确定这是由于您的标记和 .gallery-category 上的悬停状态：

```
.gallery-category:hover {
  color: white;
  cursor: pointer;
} 
```

iOS 不支持 :hover 以正常方式，因为没有鼠标就无法检测悬停状态。它通常会直接在 a:hover 状态下进行排序，但我猜是因为你的标记有点复杂（并且父级上有一个 :hover 状态）它会导致它中断。

我想如果你替换上面的代码片段来处理

```
.gallery-category a:hover {... 
```

它会修复它（虽然我没有在你的代码上尝试过）

# android - 如何将操作栏导航选项卡移动到底部？

> ID：12594526
> 
> 赞同：1
> 
> 时间：2012-09-26T04:23:44.483
> 
> 标签：android, android-actionbar, android-ui

让我先说我知道这违反了[Android 设计指南](http://developer.android.com/design/patterns/actionbar.html)。

我希望能够使用操作栏的内置导航选项卡并将它们移动到屏幕底部。我查看了[Javadocs`ActionBar`](http://developer.android.com/reference/android/app/ActionBar.html)并没有看到任何内置功能（理所当然）。有谁知道某种方式，也许是通过压倒一切的风格或主题，来实现这一目标？

# linux - Git 如何知道要推送到哪个存储库？

> ID：12594530
> 
> 赞同：5
> 
> 时间：2012-09-26T04:24:05.693
> 
> 标签：linux, git, version-control, push

在版本控制方面，我完全是个菜鸟，但我最近开始使用 GitHub 来托管我的一些项目。我盲目地使用该命令`git push origin master`将更改推送到两个存储库中的任何一个。我不明白 Git 如何知道要推送到哪个存储库。我使用相同的命令推送到每个。我所在的目录与它有什么关系吗？

感谢您为我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T04:31:48.533

一句忠告，“盲目使用”任何东西都是一个坏主意。

git 有一个[远程](http://git-scm.com/book/en/Git-Basics-Working-with-Remotes)系统，它允许指定 URL 并传输到您正在工作的存储库以外的存储库。`git push origin master`将当前分支推送到远程称为 origin 作为分支主控。您有一个名为 origin 的遥控器。这是从 URL 克隆存储库时默认创建的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T04:32:17.157

`git remote add origin http://abc.com/def/ghi.git`告诉 git 远程 'origin' 指向的 url。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T15:21:47.083

当您使用 时`git push origin master`，您不会推送到两个存储库 - 您正在推送到存储库中名称（别名）为 origin 的 master 分支。

可以这样想：

我正在将我的东西推送到我的存储库地址。我在推什么？我的主分支。

如果您是新手并通过 git init 自己设置 git，那么您可能不会推送到两个存储库。运行此命令以查看您的遥控器是什么：

```
git remote -v 
```

这将返回类似的东西（假设你有一个像 github 这样的 git 托管服务）：

```
blahblah    git@github.com:yourGithubName/fileName.git (fetch)
blahblah    git@github.com:yourGithubName/fileName.git (push) 
```

git@github.com:yourGithubName/fileName.git 是你的仓库地址。一些地址以 https:// 为前缀。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T04:27:35.543

Git 存储库包含一个`.git`目录，其中包含有关存储库的元数据。这就是 Git 用来确定将更改推送到何处的方法。

# iphone - UITableView 中的点击事件

> ID：12594532
> 
> 赞同：23
> 
> 时间：2012-09-26T04:24:34.727
> 
> 标签：iphone, objective-c, ios, uitableview, tableview

我有一个按钮和表格。现在我想以这样的方式单击，每当我选择任何行`tableview`并按下按钮时，都会发生特定的按钮按下事件。为此，首先我给每一行加上标签，即

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *LabelCellIdentifier = @"cell";
UITableViewCell *cell;
cell = [tableView dequeueReusableCellWithIdentifier:LabelCellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:LabelCellIdentifier];

}

if (indexPath.row <= [_arrayMp3Link count]) {

    cell.textLabel.text = [_arrayMp3Link objectAtIndex:indexPath.row];

     }

// now tag each row
NSInteger count = 1;
for (NSInteger i = 0; i < indexPath.section; i++) {
    count += [[tableView dataSource] tableView:tableView numberOfRowsInSection:i];
}
count += indexPath.row;
// dequeue, create and configure...
cell.tag = count;

return cell;
} 
```

现在，当我选择行并按下按钮时，将事件放入按钮中。但没有得到正确的东西。

```
(IBAction)doDownload:(id)sender {
// to select first row
if(cell.tag==1)
{
    [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-26T05:23:35.700

全局声明一个`int`变量 -

```
int rowNo; 
```

`didSelectRowAtIndexPath:`然后在方法中为其赋值

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
     rowNo = indexPath.row;
 } 
```

现在你有了 indexNo。选定的行。

```
-(IBAction)doDownload:(id)sender
{
    //Now compare this variable with 0 because first row index is 0.
    if(rowNo == 0)
    {
         [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://www.google.com"]];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T04:34:11.250

您必须使用 tableView 的函数 didSelectRowAtIndexPath 方法。

在该方法中，您保存选定的行标记或您想要保存的任何内容。并在按钮操作中检查已保存实体的值并执行任何操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T04:40:26.997

使用 UITableView 的数据源功能，即

`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{}`

其中 indexPath.row 是每一行的索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T04:40:04.907

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 if(indexPath.row==i)
{//Perform whatever action you would like for whichever row number..i'm just using i as an int placeholder
     [[UIApplication sharedApplication]openURL:[NSURLWithString:@"http://www.google.com"]]; 
}

//Or you could perform the same action for all rows in a section
if(indexPath.section==i)
{
 [[UIApplication sharedApplication]openURL:[NSURLURLWithString:@"http://www.google.com"]]; 

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-02T13:41:58.957

'the-interview-2.jpg' 是图像文件的名称

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"Main" bundle:nil];

    ViewController *vc = [sb instantiateViewControllerWithIdentifier:@"viewc"];

    [self.navigationController pushViewController:vc animated:YES];
    [vc setImageName:@"the-interview-2.jpg"]; 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T04:48:35.413

```
//use selectedrow to check the condition

 -(void)tableView:(UITableView *)tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 

                     selectedrow=indexPath.row;
    }

        -(IBAction)doDownload:(id)sender {
        // to select first row
        if(selectedrow==1)
        {
            [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-01T21:17:51.697

如果您想从侧面菜单推送视图。顶部是 switch case 语句运行良好的设计，联系人在顶部显示一个视图，其他人首先打开导航控制器。

```
override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "cell", for: indexPath)
    cell.textLabel?.text = items[indexPath.row]
    cell.textLabel?.textColor = .white
    cell.backgroundColor = .systemTeal
    cell.imageView?.tintColor = .white

    switch indexPath.row {
    case 0:
        cell.imageView?.image = UIImage(systemName: "info.circle")
        //presentViewController(AboutViewController, animated: true, completion: nil)
        //performSegue(withIdentifier: "toLanguageView", sender: nil)
    case 1:
        cell.imageView?.image = UIImage(systemName: "map")
    case 2:
        cell.imageView?.image = UIImage(systemName: "figure.walk")
    case 3:
        cell.imageView?.image = UIImage(systemName: "paperplane")
    default:
        break
    }

    return cell
    }

override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    tableView.deselectRow(at: indexPath, animated: true)

    switch indexPath.row {
    case 0:

        let storyboard = UIStoryboard(name: "Main", bundle: nil)
        let controller = storyboard.instantiateViewController(withIdentifier: "AboutViewController") as! AboutViewController
        self.navigationController?.pushViewController(controller, animated: true)

    case 1:

        let storyboard = UIStoryboard(name: "Main", bundle: nil)
        let controller = storyboard.instantiateViewController(withIdentifier: "DigMenuViewController") as! DigMenuViewController
        self.navigationController?.pushViewController(controller, animated: true)

    case 2:

        let storyboard = UIStoryboard(name: "Main", bundle: nil)
        let controller = storyboard.instantiateViewController(withIdentifier: "VirtualTourViewController") as! VirtualTourViewController
        self.navigationController?.pushViewController(controller, animated: true)

    case 3:

        let storyBoard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)
        let newViewController = storyBoard.instantiateViewController(withIdentifier: "ContactViewController") as! ContactViewController
        self.present(newViewController, animated: true, completion: nil)

    default:
        break
    }
} 
```

# java - System.out 和 System.err 调用的随机打印顺序

> ID：12594537
> 
> 赞同：4
> 
> 时间：2012-09-26T04:25:17.503
> 
> 标签：java, file-io

请看下面的代码片段

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;

public class ReadFile {

    public static void main(String[] args)  {

        String str="";
        FileReader fileReader=null;

        try{

            // I am running on windows only  & hence the path :) 
            File file=new File("D:\\Users\\jenco\\Desktop\\readme.txt");
            fileReader=new FileReader(file);
            BufferedReader bufferedReader=new BufferedReader(fileReader);
            while((str=bufferedReader.readLine())!=null){
                System.err.println(str);
            }

        }catch(Exception exception){
            System.err.println("Error occured while reading the file : " + exception.getMessage());
            exception.printStackTrace();
        }
        finally {
            if (fileReader != null) {
                try {
                    fileReader.close();
                    System.out.println("Finally is executed.File stream is closed.");
                } catch (IOException ioException) {

                    ioException.printStackTrace();
                }
            }
        }

    }

} 
```

当我多次执行代码时，我会随机得到如下输出，有时 System.out 语句首先在控制台中打印，有时 System.err 会先打印。下面是我得到的随机输出

## 输出 1

```
Finally is executed.File stream is closed.
this is a text file 
and a java program will read this file. 
```

## 输出 2

```
this is a text file 
and a java program will read this file.
Finally is executed.File stream is closed. 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T04:32:39.393

我相信这是因为您正在写入两个不同的输出（一个是标准输出，另一个是标准错误）。这些可能在运行时由两个不同的线程处理，以允许在 java 执行期间写入两者。假设是这种情况，cpu 任务调度程序不会每次都以相同的顺序执行线程。

如果您的所有输出都流向同一个输出流（即一切都进入标准输出或一切都进入标准错误），那么您永远不应该获得此功能。您将永远无法保证标准错误与标准输出的执行顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:15:49.677

因为 System.out 和 System.err 在您的情况下都指向控制台。

为了演示，如果在 println() 之后添加 System.out.flush() 和 System.err.flush()，那么输出将是一致的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:06:10.200

这已经在这里得到了回答：

[Java：System.out.println 和 System.err.println 乱序](https://stackoverflow.com/questions/1883321/java-system-out-println-and-system-err-println-out-of-order)

发生这种情况是因为您的 finally 子句使用 System.out 而其他代码使用 System.err。错误流在流出流之前被冲洗掉，反之亦然。

因此，不能保证打印数据的顺序与调用的顺序相同。

您始终可以让控制台将错误流定向到文件或将输出流定向到文件以供以后检查。或者，更改您的代码以将所有内容打印到 System.out。许多程序员不使用 err，除非您将 err 与控制台分开捕获，否则其有用性值得商榷。

刚用完！

完了，走吧...

# javascript - 在 DOM 中的元素之前绑定 Rivets.js

> ID：12594539
> 
> 赞同：1
> 
> 时间：2012-09-26T04:25:37.163
> 
> 标签：javascript, data-binding, backbone.js, rivets.js

我有一个骨干视图，它从其父视图调用 render() 返回子视图，然后将其附加到 DOM。问题是我不能跑

```
rivets.bind(this.$el, {user: this.user}); 
```

在子视图的初始化方法中，因为该元素尚未在 DOM 中。我宁愿不必在渲染后运行另一种方法来绑定铆钉。

可能是一个简单的问题，但有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:06:36.597

我在子视图中使用了非常相似的视图模式，Rivets 0.3.8 绑定到 jQuery 对象没有问题，这些对象在绑定后一段时间才插入 DOM。

我的渲染方法看起来像这样：

```
function render() {
    this.setElement(_.template('<html>...</html>', {tem: plate}));
    rivets.bind(this.$el, {riv: ets});
    return this;
} 
```

然后后来：

```
myView.render();
$('#myTarget').empty();
$('#myTarget').append(myView.el); 
```

# android - 在非活动类中接收意图

> ID：12594540
> 
> 赞同：0
> 
> 时间：2012-09-26T04:25:45.773
> 
> 标签：android, android-intent

我现在正在执行一项任务，其中我必须将行数和图像作为输入，然后将图像划分为给定的编号。行数相等。

我觉得除了一个街区外，它几乎完成了。我必须`intent`在扩展`BaseAdapter`.

**如何从非活动类接收意图？**

我浏览和搜索了很多。所有人都只是打算并给出解决方案来传递来自非活动类的意图，而不是接收来自非活动类的意图。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:33:12.853

嗨，普拉蒂巴。

这在 Android 中是不可能的，但您可以做一件事：在扩展的类中定义扩展`BaseAdapter`as 子类的类，`Activity`以便您可以直接访问子类中的这些数据而无需通过意图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:09:43.887

使用此代码将帮助您，将这些值声明为全局变量，您可以在任何地方获取这些值...

```
public class Animate extends Activity {

GridView gridView;
int img;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.gridview);

    Intent i = getIntent();
    img = i.getIntExtra("ImageViews", 0);       

    GridView gridview = (GridView) findViewById(R.id.gridView1);
    gridview.setNumColumns(3);
    gridview.setAdapter(new MyAdapter(this));
}

public class MyAdapter extends BaseAdapter {

    Animate anim = new Animate();
    private Context mContext;
    int fadeInDuration = 6000;
    int timeBetween = 5000;
    public MyAdapter(Context c) {
        mContext = c;
    }

    @Override
    public int getCount() {
        return img;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View grid = convertView;
        if (convertView == null) {              
            LayoutInflater vi = (LayoutInflater) mContext .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            grid = vi.inflate(R.layout.animation, null);
        }

        final ImageView image = (ImageView) grid.findViewById(R.id.image);
        image.setImageResource(R.drawable.images);
        Animation fadeIn = new AlphaAnimation(0, 1);
        fadeIn.setDuration(fadeInDuration);
        image.startAnimation(fadeIn);
        fadeIn.setAnimationListener(new AnimationListener() {
            @Override
            public void onAnimationEnd(Animation animation) {
                animation.reset();
                Animation fadeIn = new AlphaAnimation(0.0f, 1.00f);
                fadeIn.setDuration(fadeInDuration);
                fadeIn.setStartOffset(5000);
            }

            @Override
            public void onAnimationRepeat(Animation animation) {
            }

            @Override
            public void onAnimationStart(Animation animation) {                 

            }
        });
        return grid;
    }

    @Override
    public Object getItem(int arg0) {
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        return 0;
    }
}
} 
```

# node.js - NPM 全局安装“找不到模块”

> ID：12594541
> 
> 赞同：232
> 
> 时间：2012-09-26T04:25:59.000
> 
> 标签：node.js, npm

我写了一个模块，我刚才发布到 npm (https://npmjs.org/package/wisp)

所以它可以从命令行很好地安装：

`$ npm i -g wisp`

但是，当我从命令行运行它时，我不断收到未安装 optimist 的错误：

```
$ wisp 
Error: Cannot find module 'optimist'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/usr/local/lib/node_modules/wisp/wisp:12:10)
    at Object.<anonymous> (/usr/local/lib/node_modules/wisp/wisp:96:4)
    at Module._compile (module.js:449:26)
    at Object.exports.run (/usr/local/lib/node_modules/coffee-script/lib/coffee-script/coffee-script.js:68:25)
    at compileScript (/usr/local/lib/node_modules/coffee-script/lib/coffee-script/command.js:135:29)
    at fs.stat.notSources.(anonymous function) (/usr/local/lib/node_modules/coffee-script/lib/coffee-script/command.js:110:18) 
```

但是，我在 package.json 中指定了依赖项：

```
{
  "name": "wisp",
  "author": "Brendan Scarvell <bscarvell@gmail.com>",
  "version": "0.1.0",
  "description": "Global nodejs file server",
  "dependencies": {
    "optimist": "~0.3.4"
  },
  "repository": "git://github.com/tehlulz/wisp",
  "bin": {
    "wisp" : "./wisp"
  }
} 
```

有谁知道该怎么做才能让它运行？我知道这与将可执行文件添加到 bin 并且该目录中的 node_modules 为空的 bin 部分有关。不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2013-01-25T05:25:40.963

对于遇到此问题的其他任何人，由于我`npm`安装到不在我的`NODE_PATH`.

```
[root@uberneek ~]# which npm
/opt/bin/npm
[root@uberneek ~]# which node
/opt/bin/node
[root@uberneek ~]# echo $NODE_PATH 
```

我的 NODE_PATH 是空的，运行`npm install --global --verbose promised-io`显示它正在安装到`/opt/lib/node_modules/promised-io`：

```
[root@uberneek ~]# npm install --global --verbose promised-io
npm info it worked if it ends with ok
npm verb cli [ '/opt/bin/node',
npm verb cli   '/opt/bin/npm',
npm verb cli   'install',
npm verb cli   '--global',
npm verb cli   '--verbose',
npm verb cli   'promised-io' ]
npm info using npm@1.1.45
npm info using node@v0.8.4
[cut]
npm info build /opt/lib/node_modules/promised-io
npm verb from cache /opt/lib/node_modules/promised-io/package.json
npm verb linkStuff [ true, '/opt/lib/node_modules', true, '/opt/lib/node_modules' ]
[cut] 
```

我的脚本失败`require('promised-io/promise')`：

```
[neek@uberneek project]$ node buildscripts/stringsmerge.js 

module.js:340
    throw err;
          ^
Error: Cannot find module 'promised-io/promise'
    at Function.Module._resolveFilename (module.js:338:15) 
```

我可能使用`configure --prefix=/opt`. 我不知道为什么这使他们无法找到已安装的模块。现在的解决方法是将 NODE_PATH 指向正​​确的目录：

```
export NODE_PATH=/opt/lib/node_modules 
```

我的`require('promised-io/promise')`现在成功了。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-10-15T11:14:28.607

将此添加到 prog(mac) 的开头：

`module.paths.push('/usr/local/lib/node_modules');`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-11-26T18:15:12.017

默认情况下，node 不会在 /usr/local/lib/node_module 内部查找来加载全局模块。[请参阅http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders](http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders)中解释的模块加载

因此，要么您必须 1) 将 /usr/local/lib/node_module 添加到 NODE_PATH 并将其导出，要么 2) 将已安装的节点模块复制到 /usr/local/lib/node 。（如加载模块节点的链接中所述，将在此路径中搜索并将工作）

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-09-22T07:07:13.700

以下通用修复适用于任何模块。例如与`request-promise`.

代替

```
npm install request-promise --global 
```

和

```
npm install request-promise --cli 
```

工作（[来源](https://github.com/npm/npm/issues/10422#issuecomment-323562182)），也为`globals`和`inherits`

另外，尝试设置环境变量

```
NODE_PATH=%AppData%\npm\node_modules 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-12-14T17:15:13.333

对于一些（像我一样）没有其他工作的人，试试这个：

```
brew cleanup
brew link node
brew uninstall node
brew install node 
```

希望它可以帮助某人:)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-11-14T18:18:51.387

我得到了“乐观主义者”模块错误，我只是做了“npm install”来解决它。越过了那个错误。

[https://github.com/mbloch/mapshaper/issues/12](https://github.com/mbloch/mapshaper/issues/12)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-29T03:37:57.890

在 Windows 上，如果你刚刚进行了全新安装并且得到了这个，你需要在 \AppData\Roaming 中清除你的 npm 缓存

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-10-05T16:38:23.600

$ vim /etc/profile.d/nodejs.sh

```
export NODE_PATH=/usr/lib/nodejs:/usr/lib/node_modules:/usr/share/javascript 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-03-25T02:53:50.003

我以简单的方式做到了这一点......

1.  从控制面板卸载节点 [Windows 7]
2.  再次安装节点
3.  安装量角器 `npm install --global --verbose protractor`
    更新网络驱动程序管理器。

对我来说很好。

希望这可以帮助你....

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-07-30T02:45:08.333

我刚刚遇到了这个`axios`模块的问题。然后我尝试了这个：运行`rm -rf node_modules`和`yarn`. 它有效。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-06-14T07:26:00.580

对于 Mac 用户，最好使用手动安装：

> 为了最大限度地减少权限错误的可能性，您可以将 npm 配置为使用不同的目录。在此示例中，它将是您的主文件夹中的隐藏目录。
> 
> 1.  在开始之前备份您的计算机。
>     
>     
> 2.  为全局安装创建一个目录：
>     
>     
>     
>     mkdir ~/.npm-global
>     
>     
> 3.  配置 npm 以使用新的目录路径：
>     
>     
>     
>     npm 配置设置前缀 '~/.npm-global'
>     
>     
> 4.  打开或创建一个 ~/.profile 文件并添加以下行：
>     
>     
>     
>     导出 PATH=~/.npm-global/bin:$PATH
>     
>     
> 5.  返回命令行，更新系统变量：
>     
>     
>     
>     源〜/ .profile
>     
>     
> 6.  测试：在不使用 sudo 的情况下全局下载一个包。
>     
>     
>     
>     npm install -g jshint
>     
>     
> 
> 除了步骤 2-4，您可以使用相应的 ENV 变量（例如，如果您不想修改 ~/.profile）：
> 
> ```
> NPM_CONFIG_PREFIX=~/.npm-global 
> ```

参考：[https ://docs.npmjs.com/getting-started/fixing-npm-permissions](https://docs.npmjs.com/getting-started/fixing-npm-permissions)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-11T11:45:00.683

我得到了这个错误`Error: Cannot find module 'number-is-nan'`，而模块实际上存在。这是由于 Node.js 安装错误/不完整造成的。

对于 Windows ，正如其他答案所建议的那样，您需要一个干净的[节点安装](https://nodejs.org/en/download/)：

*   卸载 Node.js
*   删除这两个文件夹`npm`并`npm_cache`在`C:\Users\user\AppData\Roaming`
*   重新启动 Windows 并安装 Node.js
*   运行`npm init`或（`npm init --yes`默认[配置](https://docs.npmjs.com/getting-started/using-a-package.json)）
*   为`NODE_PATH`. 此路径是您的软件包的安装位置。大概是这样的`NODE_PATH = C:\Users\user\node_modules or C:\Users\user\AppData\Roaming\npm\node_modules`
*   启动一个新的 cmd 控制台，`npm`应该可以正常工作

**笔记 ：**

在重新安装 Node.js 之前尝试最后几点，它可以节省您一些时间并避免重新安装所有包。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-08-07T04:05:56.170

对于 Windows，从[Nodejs 找不到 Windows 上已安装的模块？](https://stackoverflow.com/questions/9587665/nodejs-cannot-find-installed-module-on-windows)对我有用的是运行 npm 链接，如

```
npm link wisp 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-08-11T22:10:34.077

在运行`Ubuntu`在`root`. 然后创建了一个新用户，并使用`useradd -m myuser`并将[所有内容](https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-an-ubuntu-14-04-server)（`nvm`、、`node`包）安装为`myuser`. 现在它工作正常。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-09-27T13:27:20.777

在我的情况下，两者`node`都`npm`在同一路径中（`/usr/bin`）。`NODE_PATH`是空的，因此将`npm`全局模块放置`/usr/lib/node_modules`在`require(...)`成功找到它们的位置。唯一的例外是`npm`nodejs 包附带的模块。由于我使用的是 64 位系统，因此将其放入`/usr/lib64/node_modules`. 这不是 require(...) 搜索空`NODE_PATH`且节点从 开始的地方`/usr/bin`。所以我有两个选择：

*   链接`/usr/lib64/node_modules/npm`到`/usr/lib/node_modules/npm`
*   将模块`/usr/lib/node_modules/*`移至`/usr/lib64/node_modules/`和设置`NODE_PATH=/usr/lib64/node_modules`

两者都有效。我正在使用 OpenSUSE 42.1 和更新存储库中的 nodejs 包。版本是 4.4.5。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-11-12T23:17:53.193

我遇到了与 OP 相同的错误，但通过挖掘我可以看到的日志`sh: node: command not found`。

事实证明 /usr/bin/node 程序（符号链接）不再随`apt install nodejs`. 一旦符号链接`/usr/bin/node' to`nodejs `,`npm install -g @angular/cli` 成功。

在 debian 上安装它的正确方法是`apt install nodejs-legacy`.

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-07-19T17:25:05.790

我必须将 C:\Users\{Username}\AppData\Roaming\npm 添加到我的环境变量中，然后我才能安装东西。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-10-28T07:22:47.573

面临同样的问题，并通过在我的 zshrc 中添加以下行来解决它。根据您的 shell，您可以尝试在您的 rc 文件中添加 bash 和 zsh - bashrc/zshrc 文件存在于您的主位置。

```
export NODE_PATH="/usr/local/lib/node_modules" 
```

要直接添加 zshrc 文件，请运行此命令

```
echo 'export NODE_PATH="/usr/local/lib/node_modules"' >> ~/.zshrc 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-12-29T01:26:58.093

# 高山/集装箱化

如其他地方所述，解决方案是烘焙到您的图像中，

```
NODE_PATH=/usr/local/lib/node_modules/ 
```

我还用[apk](https://gitlab.alpinelinux.org/alpine/aports/-/issues/13363)[在上游打开了一个问题，所以设置好了`npm`](https://gitlab.alpinelinux.org/alpine/aports/-/issues/13363)

# jquery - 我如何从 ajax 函数中获取一个值来执行另一个函数

> ID：12594546
> 
> 赞同：0
> 
> 时间：2012-09-26T04:27:00.233
> 
> 标签：jquery, getjson

我一直在寻找和阅读大约 3 个小时，但我无法让它工作。我想从一个函数中获取一个值，这样我就可以用它来执行另一个函数。我读到我必须创建一个回调，但我是新手，所以我不太清楚如何去做。你们能帮帮我吗？

这是从 php 中提取数据的代码：

```
 $.getJSON(callback_url, {
                ajax_action: 'list', 
                ajax_data: ''
            },   function(data){

            document.getElementById('ajax-box').innerHTML = "";

            for(i=0;i<data.length;i++){

                document.getElementById('ajax-box').innerHTML += '<div> Some data loaded here</div>';

            }
            }); 
```

在这段代码之后，如果数据长度大于“1”，我想执行一个新函数，如下所示：

```
 if (data.length > 1) { some function here} 
```

我收到一个错误：

> ReferenceError: 数据未定义 if (data.length > 1) {

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:34:09.730

由于范围`data`不在`ajax call`.

在 ajax 调用之外保留一个变量并使用它来访问数据

```
var d;
                $.getJSON(callback_url, {
                ajax_action: 'list', 
                ajax_data: ''
            },   function(data){
            d = data; // added in your code
            document.getElementById('ajax-box').innerHTML = "";

            for(i=0;i<data.length;i++){

                document.getElementById('ajax-box').innerHTML += '<div> Some data loaded here</div>';

            }
            }); 
// use your d here 
```

另外，我强烈建议您在使用 jQuery、用户 $("#") 而不是 getElementById 等时编写更好的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:37:49.883

```
function doAjax(postUrl,postBody,callback){
$.ajax({
        type: 'post',
        url: postUrl,
        data: JSON.stringify(postBody),
        contentType: "application/json; charset=utf-8",
        traditional: true,
        success: function (data) {
        callback(data);
        },
        error: function (xhr, ajaxOptions, thrownError) {
           callback(thrownError);
        }
     });
}
doAjax(callback_url,{request_body_json},function(data){
       document.getElementById('ajax-box').innerHTML = "";
       for(i=0;i<data.length;i++){
         document.getElementById('ajax-box').innerHTML += '<div> Some data loaded here</div>';
    }
}); 
```

这种方式最适合您，只需使用 doAjax 方法并处理您的代码。

# android - 为什么我无法在 Eclipse 中运行 android？

> ID：12594549
> 
> 赞同：1
> 
> 时间：2012-09-26T04:27:24.183
> 
> 标签：android, eclipse, android-emulator, adb, eclipse-adt

adb.exe 只是在正确的路径上，这有点令人困惑...

我使用的 Eclipse 版本是 Build id：

```
Eclipse Java EE IDE for Web Developers.

Version: Juno Release
Build id: 20120614-1722 
```

我的广告版本是：</p>

```
 20.0.3 
```

我从android控制台得到的错误信息如下，为什么会发生错误？

```
[2012-09-26 12:17:40 - android] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(org.apache.commons.httpclient.HttpMethodBase$1) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-09-26 12:17:42 - android] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(org.apache.commons.httpclient.protocol.ControllerThreadSocketFactory$1) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-09-26 12:17:48 - android] ------------------------------
[2012-09-26 12:17:48 - android] Android Launch!

[2012-09-26 12:17:48 - android] The connection to adb is down, and a severe error has occured.
[2012-09-26 12:17:48 - android] You must restart adb and Eclipse.
[2012-09-26 12:17:48 - android] Please ensure that adb is correctly located at 'D:\Tools\sdk-tools\android-sdk-windows\platform-tools\adb.exe' and can be executed. 
```

更重要的是，一旦我启动 android 模拟器，我可以使用以下方法找到它：

```
 adb devices 
```

但是我在adt的设备视图中找不到它，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T04:56:56.393

我不确定，但我希望您能从中获得帮助[我如何在 Eclipse 中更新我的 ADT？](https://stackoverflow.com/questions/12634568/how-can-i-update-my-adt-in-eclipse). 请试试这个。也许你会成功你的问题。祝你好运！

# javascript - JavaScript / Jquery 旋转滑块 - 双延迟问题

> ID：12594550
> 
> 赞同：0
> 
> 时间：2012-09-26T04:27:29.157
> 
> 标签：javascript, jquery

在一些帮助下，我使用 jquery 和 CSS3 创建了一个旋转滑块，它似乎工作得很好，除了一件事......第一个“幻灯片”似乎在第一次播放时有两倍的延迟。谁能解释为什么会发生这种情况？任何帮助将不胜感激...

```
var i = 0;
var z = 0;
delay = 5000;

var el = $('#scroll-script');
var ql = $('#info-box');

var classesb = ['fp-info-one', 'fp-info-two', 'fp-info-three', 'fp-info-four'];    
var classes = ['fp-slide-one', 'fp-slide-two', 'fp-slide-three', 'fp-slide-four'];

var interval = setInterval(function () {

  el.removeClass().addClass(classes[i]);
  i = (i + 1) % 4;

  ql.removeClass().addClass(classesb[z]);
  z = (z + 1) % 4; 

}, delay); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:53:08.117

您的匿名函数，即 setInterval 中的那个，正在等待相同的时间（您的延迟）以开始运行。您可以：

1）将匿名函数更改为命名函数，并在执行间隔之前运行一次

2) 在 setInterval 方法之前运行这些行。只是为了模拟一次匿名函数中的代码。

```
 el.addClass(classes[3]);
   ql.addClass(classesb[3]); 
```

你可以看看这个小提琴里面，看看我提供的一些解决方案。

[http://jsfiddle.net/G7NdU/4/](http://jsfiddle.net/G7NdU/4/)

# c# - 自动完成后完成模型状态

> ID：12594552
> 
> 赞同：1
> 
> 时间：2012-09-26T04:27:36.473
> 
> 标签：c#, jquery, asp.net-mvc

所以这是我遇到的问题。

最初，我在收件人字段中填充了一个选择的用户列表，这些用户首先会成为朋友。

这对我来说似乎不够用户友好。因此，我开始使用 jQuery 进行自动完成。自动完成功能就像一个魅力。

我遇到的问题是当我发送消息时，我的消息`modelstate`无效。收件人只填写了用户名。

我应该摆脱验证并手动填写所有这些字段吗？或者我可以在这个问题上做一些更聪明的事情吗？

```
<div class="label">@Html.LabelFor(model => model.Receiver.UserName)</div>
<div class="fullinput">@Html.TextBoxFor(model => model.Receiver.UserName)</div><br />

<div class="label">@Html.LabelFor(model => model.Subject)</div>
<div class="fullinput">@Html.TextBoxFor(model => model.Subject)</div><br />

<div class="label">@Html.LabelFor(model => model.Content)</div>
<div class="fullinput">@Html.TextAreaFor(model => model.Content)</div><br /> 
```

那是我正在使用的html。

```
$("#Receiver_UserName").autocomplete({ 
            source: function (request, response) {
                $.ajax({
                    url: "/Function/FindUsers", // Or your controller
                    dataType: "json",
                    data: { usr: request.term },
                    success: function (data) {
                        // Returned data follows the Spellword model
                        response($.map(data, function (item) {
                            return {
                                id: item.Id,
                                label: item.UserName,
                                value: item.UserName
                            }
                        }))
                    }
                });
            }, 
```

这是自动完成调用：

```
[HttpPost]
    public ActionResult Send(Message message)
    {
        User user = entities.Users.SingleOrDefault(u => u.UserName.Equals(User.Identity.Name));
        //ViewData["Friends"] = new SelectList(user.Friends, "Id", "Name");

        if (ModelState.IsValid)
        {
            entities.Messages.Add(message);
            entities.SaveChanges();

            return RedirectToAction("Index");
        }
        return View(message);
    } 
```

我在那里检查验证，我猜它总是无效的，这是有道理的。

```
public class Message
{
    [Key]
    public int Id { get; set; }

    [Required(ErrorMessage = "Subject is required")]
    [Display(Name = "Subject")]
    public string Subject { get; set; }

    [Required(ErrorMessage = "Message is required")]
    [Display(Name = "Message")]
    public string Content { get; set; }

    [Required]
    [Display(Name = "Date")]
    public DateTime Created { get; set; }

    public Boolean Read { get; set; }

    [Required(ErrorMessage = "Can't create a message without a user")]
    public int SenderId { get; set; }
    public virtual User Sender { get; set; }

    [Required(ErrorMessage = "Please pick a recipient")]
    public int ReceiverId { get; set; }
    public virtual User Receiver { get; set; }
} 
```

最后是消息模型。显然我没有所有这些字段，所以这就是为什么模型状态对我哭泣。

我想知道在这种情况下我是否可以跳过检查模型状态，或者我是否应该以更好的方式解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:41:49.680

你为什么不尝试这样的事情：

```
$("#Receiver_UserName").autocomplete({ 
            source: function (request, response) {
                $.ajax({
                    url: "/Function/FindUsers", // Or your controller
                    dataType: "json",
                    data: { usr: request.term },
                    success: function (data) {
                        // Returned data follows the Spellword model
                        response($.map(data, function (item) {
                            return {
                                id: item.Id,
                                label: item.UserName,
                                value: item.Email  //Don't pass the name as value
                            }
                        }))
                    }
                });
            }, 
```

我的意思是...您使用用户名作为表单的标签，但将电子邮件作为您在发送电子邮件时真正想要使用的值传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:52:57.660

我解决了这样的问题

```
[HttpPost]
public ActionResult Send(Message message)
{
    User user = entities.Users.SingleOrDefault(u => u.UserName.Equals(User.Identity.Name));
    User recipient = entities.Users.SingleOrDefault(u => u.UserName.Equals(message.Receiver.UserName));
    ModelState.Clear();

    if (recipient != null && user != null)
    {
        message.Sender = user;
        message.SenderId = user.Id;
        message.Receiver = recipient;
        message.ReceiverId = recipient.Id;
        message.Created = DateTime.Now;

        entities.Messages.Add(message);
        entities.SaveChanges();

        return RedirectToAction("Index");
    }
    else
    {
        return View(message);
    }
} 
```

但我对解决方案不太满意，因为它绕过了我的整个验证过程

# java - 如何为表格列添加工具提示？

> ID：12594557
> 
> 赞同：4
> 
> 时间：2012-09-26T04:28:51.030
> 
> 标签：java, javafx, javafx-2

如何为表格列或行添加工具提示？

升级版：

我有一张桌子。我想为单元格（列）或行添加工具提示，如文本字段![例子](../Images/bc348f5377e5e5a85d3d1c2109954e2d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:44:43.280

就我而言：

```
mycolumn.setCellFactory(
   new Callback<TableColumn<MyModel, String>, TableCell<MyModel, String>>() {
      @Override
      public TableCell<MyModel,String> call(TableColumn<MyModel,String> tableColumn){
         return new TextFieldTableCell<MyModel, String>() {
            @Override public void updateItem(String string, boolean isEmpty) {
               super.updateItem(string, isEmpty);
               if (!isEmpty) {
                  MyModel model =
                     getTableView().getItems().get(getTableRow().getIndex());
                  Tooltip tip = new Tooltip(model.getTip());
                  setTooltip(tip);
               }
            }
         };
      }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:24:29.313

工具提示可以通过调用`setToolTip`方法来设置。

# ios - 设置从一个 ViewController 到一个 ViewController 的时间

> ID：12594564
> 
> 赞同：0
> 
> 时间：2012-09-26T04:30:52.837
> 
> 标签：ios

我的应用程序崩溃了，因为我在 AppDelegate.m 中为下面的方法设置了从一个 ViewController 到一个 ViewController 的时间，它显示消息：无法识别的选择器发送到实例 0x6a0e360。

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [self performSelector:@selector(toSecondViewController:) withObject:nil afterDelay:5];
}

-(void)toSecondViewController{
    SecondViewController *second = [[SecondViewController alloc] init];
    [self.navigationController pushViewController:sale animated:YES];
} 
```

我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:34:16.473

尝试更改代码

```
[self performSelector:@selector(toSecondViewController:) withObject:nil afterDelay:5]; 
```

到

```
[self performSelector:@selector(toSecondViewController) withObject:nil afterDelay:5]; 
```

如果 func 没有任何参数，则不要在 func 名称后添加“ **:** ”符号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:45:04.317

如果你想发送任何参数，那么只有你应该添加“：”。否则不需要添加。

所以正确的代码是- [self performSelector:@selector(toSecondViewController) withObject:nil afterDelay:5];

# python - 如何确定浮点数是否在Python中的特定范围内

> ID：12594568
> 
> 赞同：0
> 
> 时间：2012-09-26T04:31:40.560
> 
> 标签：python, floating-point, python-3.x

为了确定输入 x 是否在 1.6 和 1.9 之间，我尝试了以下操作：

```
def function(x)    
    if(x >= 1.6 & x <= 1.9):
        return True
    else
        return False 
```

这里的问题是，当您输入一个非常接近 1.6 或 1.9 的数字时，这将无法正常工作。例如 1.5999999999999999999999 将被评估为 1.6，因此即使它不在范围 (1.6 - 1.9) 内，函数也会返回 True。我尝试了其他一些方法，但我无法摆脱这个舍入问题。

有人能想出办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:14:54.867

`float`在 Python 中使用值时，不可能实现完全准确的数字比较。这是因为浮点值在精度上固有地受到限制。

在您的示例中，该数字将具有与（如 nneonneo 在评论中提到的）`1.5999999999999999999999`相同的浮点表示。`1.6`可能更令您惊讶的是，浮点表示并不完全等于任何一个源数字（到小数点后 20 位，它是`1.60000000000000008882`）。Python 对您隐藏了一点，因为如果您将数字打印出来，`1.6`即使它稍微大一点，它也会显示出来。

最后的额外位是舍入误差，因为没有任何 1.6 的非重复二进制表示。就像三分之一只能用无限重复的十进制精确表示一样，`1.6`需要无限位数才能用二进制精确表示。该错误来自于在一定数量的数字后停止表示并将其余部分四舍五入（如表示`1/3`为`0.333333`，并将重复的 3 的其余部分四舍五入）。

有很多方法可以编写代码来减轻浮点错误的影响，但你不能让它们完全消失，除非，我想，在需要极高精度的情况下不使用浮点值. 在 Python 中，如果您想要更高的精度（以牺牲一些性能为代价），您可以改用标准库中的 Decimal 类：

```
from decimal import Decimal

d1 = Decimal("1.5999999999999999999999")
d2 = Decimal("1.6")

print(d1 >= d2) # prints: False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:03:40.097

当使用所有语言的浮点类型时，这是一个普遍的问题。如果您真的想知道机器上 Python 中使用的浮点数的精度，您可以使用`sys.float_info.epsilon`- 请参阅[http://docs.python.org/library/sys.html#sys.float_info](http://docs.python.org/library/sys.html#sys.float_info)。在我的情况下，它显示以下内容：

```
Python 2.7.1 (r271:86832, Nov 27 2010, 17:19:03) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.float_info.epsilon
2.220446049250313e-16 
```

# jquery - 使用 j 查询查找具有相似 ID 的控件

> ID：12594569
> 
> 赞同：-4
> 
> 时间：2012-09-26T04:31:46.380
> 
> 标签：jquery

我有一个 javascript 对象 ($(this))，我想找到 id 包含“Day”的下拉控件。另外，我需要找到文本区域控件（id 无关紧要）。我已经尝试了下面的代码，但它不起作用。

```
$(this).find('select[id=*"Day"]')
$(this).find('input[type="text"]') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:38:33.080

```
$('select[id*="Day"]');
$('textarea').val();​ 
```

两者都有效：http: [//jsfiddle.net/Czhh9/4/](http://jsfiddle.net/Czhh9/4/)

# java - 骰子程序中的方法返回 0

> ID：12594572
> 
> 赞同：1
> 
> 时间：2012-09-26T04:32:00.717
> 
> 标签：java

我刚刚开始使用 Java 进行编程，但遇到了一个我似乎无法弄清楚的问题。

我的程序旨在滚动具有 (n) 面的骰子，其中 (n) 由用户指定。然后程序会将掷骰的结果打印为整数，将掷骰的面值打印为整数（这似乎与掷骰的结果相同），并将掷骰的结果作为字符串打印。最后两种方法（面值和字符串）是与掷骰子分开的方法，但仍然是必需的。

我的问题是，虽然代码可以编译，但 getFaceValue() 和 toString() 方法都返回零。我的代码是：

```
import java.io.*;
import java.util.*;

public class Die {

  private int z;
  private String faceName;

//sets (and returns) the face value to a uniform random number between 1 and the number of faces.
public int roll() {
    Scanner keyboard = new Scanner(System.in);
    int sides = keyboard.nextInt();
    double x = Math.random();
    double y = (x * sides) + 1;
    z = (int)y;
    return z;
}

//returns the current face value of the die.
public int getFaceValue() {
    int face = z;
    return face;
}

//returns the string representation of the face value.
public String toString() {
    faceName = Integer.toString(z);
    return faceName;
}

public static void main(String [] args) {

    System.out.println("How many sides will the die have?");
    System.out.println(" ");
    System.out.println("Roll: " + new Die().roll());
    System.out.println("Face: " + new Die().getFaceValue());
    System.out.println("String: " + new Die().toString());
}
} 
```

我将不胜感激您能提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T04:34:46.133

我看到的第一个问题是您正在创建 Die 类的三个实例，这意味着生成的任何值都不会影响其他值......

```
System.out.println("Roll: " + new Die().roll());
System.out.println("Face: " + new Die().getFaceValue());
System.out.println("String: " + new Die().toString()); 
```

应该读

```
Die die = new Die();
System.out.println("Roll: " + die.roll());
System.out.println("Face: " + die.getFaceValue());
System.out.println("String: " + die.toString()); 
```

我还将提示`System.out.println("How many sides will the die have?")`移至`roll`方法，因为那是您实际提出问题的地方，但这只是我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:37:33.143

每次调用 时`new Die()`，您都在创建一个独立于上一个骰子的新骰子。因此，您正在制作一个骰子，然后滚动它，然后再制作一个骰子并查看价值。由于您还没有滚动它，它仍然具有默认值`0`，所以这就是输出。您希望拥有与您滚动然后查看相同的骰子，如下所示：

```
public static void main(String [] args) {
    Die die = new Die();
    System.out.println("How many sides will the die have?");
    System.out.println(" ");
    System.out.println("Roll: " + die.roll());
    System.out.println("Face: " + die.getFaceValue());
    System.out.println("String: " + die.toString());
} 
```

这将创建一个骰子，然后滚动它并查看它的值。它将为所有三个方法调用显示相同的值。

# android - 开发人员如何强制应用程序移至 SD 卡

> ID：12594574
> 
> 赞同：0
> 
> 时间：2012-09-26T04:32:09.673
> 
> 标签：android

我正在做一个Android应用程序。当用户下载应用程序时，我希望将应用程序安装在 sd 卡中。我可以从开发人员端在清单中设置任何权限，以便当用户下载应用程序时，它要么自动移动到 sd 卡，要么要求用户允许将应用程序移动到 sd 卡。在这种情况下的任何建议都是有帮助的和高度的可观的

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T04:39:44.673

```
 android:installLocation="preferExternal" 
```

您可以在清单中添加 thjis。您将有更多选择。此[链接](http://developer.android.com/guide/topics/data/install-location.html)将为您提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T04:37:03.190

您可以`android:installLocation="preferExternal"`在 AndroidManifest.xml 中设置。

检查 Android 文档以获取[此属性](http://developer.android.com/guide/topics/manifest/manifest-element.html#install)。

> "preferExternal" => 应用程序更喜欢安装在外部存储（SD 卡）上。无法保证系统会遵守此请求。如果外部媒体不可用或已满，或者应用程序使用前向锁定机制（外部存储不支持），则应用程序可能安装在内部存储上。安装后，用户可以通过系统设置将应用程序移动到内部或外部存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T04:45:19.273

`android:installLocation="preferExternal"`在 AndroidManifest.xml 中。
试试这个它成功地为我工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T05:05:29.497

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
            package="string"
            android:sharedUserId="string"
            android:sharedUserLabel="string resource" 
            android:versionCode="integer"
            android:versionName="string"
            android:installLocation=["auto" | "internalOnly" | "preferExternal"] >
. . </manifest> 
```

使用 preferExternal 移动到 sdcard 这里还有其他选项供将来使用..

# linux - 删除文件名中带有特定字符串的文件

> ID：12594576
> 
> 赞同：3
> 
> 时间：2012-09-26T04:32:17.127
> 
> 标签：linux, shell, ubuntu

如何使用通配符删除包含字符串作为嵌入字符串的文件，除了开头或结尾之外。

我是一个业余爱好者，开始 Ubuntu 还不到一个月。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T04:54:03.673

```
rm ?*foo?* 
```

删除包含 foo 的文件，前提是前后至少有一个字符，因此“foobar”和“barfoo”不会被删除，而“barfoobar”会被删除。

作为预防措施，请执行

`ls ?*foo?*`

首先要确保您没有删除错误的内容。并且要非常小心，不要意外包含任何空格，因为**rm ?* foo?***几乎可以肯定是非常糟糕的。为了提供一些保护，请将参数用引号括起来，因此

```
rm "?*foo?*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:50:05.280

我认为这不可能通过单一的扩展模式实现。您可以`grep`改为使用过滤：

```
ls -d '*foo*' | egrep -v '^foo|foo$' | xargs rm 
```

因此，`ls`列出所有包含的内容`foo`，然后`egrep`删除开头/结尾匹配的文件，最后在每个剩余部分上`xargs`运行一个命令（`rm`在这种情况下）。

[这种技术的危险之](http://mywiki.wooledge.org/ParsingLs)处在于文件名可能包含特殊字符，如换行符或星号，因此使用风险自负！

# wordpress - 在多站点 Wordpress 中将主站点重定向到子站点

> ID：12594577
> 
> 赞同：0
> 
> 时间：2012-09-26T04:32:18.470
> 
> 标签：wordpress, apache, .htaccess, redirect

我有多站点 wordpress，我想将主站点重定向到子站点之一，但 .htacecss 中的重定向会出错。有什么方法可以将主站点重定向到其子站点。这看起来不可能，但我不是 wordpress 专家，所以只是验证一下。

重定向应该像

重定向 301[链接](http://www.example.com/main-site%20www.example.com/main-site/sub-site)

或者如果有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:47:48.273

该`Redirect`指令不将主机名作为 URI 路径的一部分（在您的情况下为第二个参数）。您需要`%{HTTP_HOST}`使用 mod_rewrite 将其与变量匹配：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/main-site/sub-site
RewriteRule ^/?main-site(.*)$ /main-site/sub-site$1 [L,R=301] 
```

您需要将这些放在您的 htaccess 文件中可能已有的任何规则之上。

# c++ - 基于 C++ 策略的设计....基类作为单例或不基于模板参数。

> ID：12594578
> 
> 赞同：1
> 
> 时间：2012-09-26T04:32:22.560
> 
> 标签：c++, design-patterns, template-meta-programming, policy-based-design

我班级的 OutputPolicy 有时会转到静态/单例对象，有时会转到 1 对 1 对象。

不确定我是否可以用英语解释..所以这是伪代码中所需的行为：

```
template< 
    class Algo,
    template<class> OutputPolicy
>
class AlgoBase : Algo, OutputPolicy<Algo>
{
};

class AlgoImp
{
public:
    AlgoImp(string topic) {} 
    void OnData(
    {
        cout << " AlgoImp::OnData";
        if ( .... ) 
            NewMsg(msg);
    }
};

class AlgoImp2
{
public:
    AlgoImp2(string topic) {} 
    void OnData(
    {
        cout << " AlgoImp2::OnData";
        if ( .... ) 
            NewMsg(msg);
    }
}; 
```

AlgoImp::OnData，做一些处理并调用NewMsg。我试图解耦 NewMsg() 调用的实现。

```
template < class T>
class OutMessageQueueTcp
{
    void NewMsg(string in)
    {
        //Should be a signgleton or static
        cout << " OutMessageQueueTcp::NewMsg";
    }
}; 
```

如果 OutputPolicy 是 OutMessageQueueTcp（上图），那么应该只有一个 OutputPolicy 实例。所以我要么必须从单例派生，要么在某处使用静态变量。

```
template <class T>
class OutMessageAsInput : AlgoBase<AlgoImp2, OutMessageQueueTcp>
{ 
    void NewMsg(string in)
    {
        cout << " OutMessageAsInput::OnData";
        AlgoBase<AlgoImp2, OutMessageQueueTcp>::NewMsg(in);
    }
}; 
```

如果 OutputPolicy 是 OutMessageAsInput（上图），则输出将成为姊妹对象的输入，然后将发送到 OutMessageQueueTcp。

这里是主要的。

```
main 
{
    AlgoBase<AlgoImp, OutMessageAsInput> myalgo1;
    myalgo1.OnData("hi");
} 
```

我想要的输出：

```
AlgoImp::OnData
OutMessageAsInput::NewMsg 
AlgoImp2::OnData
OutMessageQueueTcp::NewMsg 
```

我真正拥有的是 AlgoImp 对象的集合，每个对象都有自己的主题和数据。AlgoImp 将通过调用 NewMsg 生成输出。有时这些消息应该发送到一个 Socket，有时它们应该由 AlgoImp2 处理。

这个决定将在编译时发生。会有很多 Algo 各自做不同的事情。好像我正在尝试做一些面向方面的东西。

**问题：**

**是否可以通过将基类设为策略来使基类成为单例对象或普通对象？有这样的设计模式吗？也许是某种工厂？**

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:31:28.030

为了简单起见 -`OutputPolicy`在您的算法类级别应该是一个具有简单方法的简单类。当然，您可以使用真实实现类中的单例或静态方法来实现它：

```
template < class T>
class OutMessageQueueTcp
{
public:
    void NewMsg(string in)
    {
       impl.NewMsg(in);
    }
private:
   static OutMessageQueueTcpImpl<T> impl;
}; 
```

或者：

```
template < class T>
class OutMessageQueueTcp
{
public:
    void NewMsg(string in)
    {
       OutMessageQueueTcpImpl<T>::NewMsg(in);
    }
}; 
```

对于您的`Algo*`类：如果在编译时给出了输出策略 - 使所有这些类模板类，并将 OutputPolicy 视为`Strategy`- keeo 它在您的算法类中聚合（作为成员变量）：

```
template <template <typename> class OutputPolicy>
class AlgoImp
{
public:
    AlgoImp(string topic) {} 
    void OnData(
    {
        cout << " AlgoImp::OnData";
        if ( .... ) 
            outputPolicy.NewMsg(msg);
    }
private:
   OutputPolicy<AlgoImp> outputPolicy;
}; 
```

# javascript - 在 Javascript 对象中分离视图和控制器逻辑

> ID：12594581
> 
> 赞同：0
> 
> 时间：2012-09-26T04:32:42.013
> 
> 标签：javascript, jquery, model-view-controller, node.js, socket.io

我想将 DOM 操作和交互 (jQuery) 分开，让我们从我的客户端应用程序逻辑 (socket.io) 中将其称为 VIEW，让我们将其称为控制器。沟通需要有两种方式：

*   当用户与 DOM 交互时查看到 CONTROLLER，例如单击按钮
*   当服务器发送要在 DOM 中显示的更新时，控制器可以查看，例如新的聊天消息

我无法在这两个 JavaScript 对象之间进行通信。我如何以有效的方式在两者之间进行沟通？下面的简单例子。

```
// CONTROLLER LOGIC (socket.io stuff)
function socketController() {}

socketController.prototype = {

    constructor: function() {

        // define socket listners
    this.socket.on('chatMessage', this.chatUpdate.bind(this));
    }

    chatUpdate: function(data) {

        // somehow call a "render" function on the "view" object
        // this.view.renderChatDOM(data.username, data.message);
    }
}

// VIEW LOGIC (jQuery stuff)
function jqueryView() {}

jqueryView.prototype = {

    onDOMReady: function() {

        // bind event handlers
        $('#send-message').bind('click', this.sendMessage.bind(this));          
    }

    sendMessage: function(event) {

            // manipulate DOM
        var $messageNode = $('#message-input'),
                $buttonNode = $('#send-message'),
                message = $messageNode.val();

            $messageNode.val(''); // clear input

            // somehow call the socketController and send data
            // this.socketController.chatSend(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:36:04.657

为什么不看看提供从视图到控制器（或视图模型）的两种方式数据绑定的 DOM 操作库。然后您不必管理手动更新，而只需更改您的客户端模型（或客户端视图），框架将负责保持层同步。[http://knockoutjs.com](http://knockoutjs.com)可能是一个值得一看的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:03:11.057

所以最后哈西斯是对的。我确实在寻找 javascript 中的 MVC 框架。我决定使用backbone.js，因为就大小、学习曲线和资源而言，它的侵入性最小。

这解决了我将应用程序逻辑 (MODEL) 从 DOM 操作和表示 (VIEW) 中分离出来的问题。

去骨干网.js！

# mysql - 获取sql中的上一行

> ID：12594586
> 
> 赞同：2
> 
> 时间：2012-09-26T04:33:08.363
> 
> 标签：mysql, sql

我需要帮助来创建满足此要求的 sql - 我在表中有数据：

```
Empid      Date         Deptid  Location
-----------------------------------------
001    1st Jan 2012    101      BC
002    4th Jan 2012    101      AB
003    6th Jan 2012    103      PQ
004    8th Jan 2012    104      AB
005    10th jan 2012   105      XY 
```

`date`现在我想获取位置为 AB 且 dept 值不同的前一行（取决于字段）。在上面的示例中，应获取以下行

```
003    6th Jan 2012    103      PQ 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:55:48.377

```
SELECT * FROM `YOUR_TABLE`
WHERE `id` < (SELECT `id` FROM `YOUR_TABLE`
              WHERE `location` =  'AB'
              AND `deptid` =  '104') 
ORDER BY id DESC LIMIT 1 
```

可能这会帮助你：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:11:05.643

```
create table tblTest (
  Empid char(3)
  ,Date date
  ,Deptid char(3)
  ,Location char(2)
);

insert into tblTest (Empid,Date,Deptid,Location) values ("001","2012/01/01","101","BC");
insert into tblTest (Empid,Date,Deptid,Location) values ("002","2012/01/04","101","AB");
insert into tblTest (Empid,Date,Deptid,Location) values ("003","2012/01/06","103","PQ");
insert into tblTest (Empid,Date,Deptid,Location) values ("004","2012/01/08","104","AB");
insert into tblTest (Empid,Date,Deptid,Location) values ("005","2012/01/10","105","XY");

SELECT
  t2.*
FROM
  tblTest t1
  LEFT JOIN tblTest t2 ON t1.Date<t2.date
                          AND
                          t1.Deptid <> t2.Deptid
WHERE
  t1.Empid = "002"
ORDER BY
  t2.Date
LIMIT 1; 
```

[您可以在 SQL Fiddle 上进行测试](http://www.sqlfiddle.com/#!2/4f648/22/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T04:42:56.603

假设 SQL Server 2005+

```
SELECT * FROM(
SELECT *

FROM(SELECT *,Row_Number() OVER(Order By [Date]) From <Your table>)X

WHERE X.[Date] = '8th Jan 2012' AND Location = 'AB')X WHERE Rn = Rn-1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T05:31:42.527

```
select * from table_name where Date < (select Date from table_name where Location="AB") and Deptid NOT IN( select Deptid from table_name where Location="AB") order by Date desc limit 1 ; 
```

鉴于位置为“AB”，根据日期字段返回上一行，并检查员工是否来自同一部门

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T05:07:27.867

使用这种模式。实际上我认为我搞砸了条件，这应该是`LastAB.DeptID!=Emp.DeptID`但你明白了。子查询为您提供要开始的单数记录。然后，外部查询在不同的位置（或 DeptID 或您设置的任何条件）查找先前日期的记录，并使用 ORDER BY + LIMIT 1 来查明单个记录。

```
select Emp.*
from Emp
join (
  select *
  from Emp
  where Location = 'AB'
  order by Date desc
  limit 1) LastAB on LastAB.Date>Emp.Date
                 and LastAB.Location!=Emp.Location
order by Emp.Date desc
limit 1; 
```

下面复制的工作[SQL Fiddle](http://sqlfiddle.com/#!2/a39d0/3/0)

```
create table Emp (
  Empid char(3),
  Date datetime,
  Deptid int,
  Location char(2)
  );
insert Emp values
('001', '2012-01-01', 101, 'BC'),
('002', '2012-01-04', 101, 'AB'),
('003', '2012-01-06', 103, 'PQ'),
('004', '2012-01-08', 104, 'AB'),
('005', '2012-01-10', 105, 'XY');

--- result

EMPID   DATE    DEPTID  LOCATION
003     January, 06 2012   103  PQ 
```

# drupal-7 - 安装 drupal-7 时出现 NO_AUTO_CREATE_USER 错误

> ID：12594594
> 
> 赞同：6
> 
> 时间：2012-09-26T04:33:35.867
> 
> 标签：drupal-7

当我尝试在我的服务器中安装 drupal-7 时，在**设置数据库**步骤中显示错误

> **无法连接到您的数据库服务器。服务器报告以下消息： SQLSTATE[42000]：语法错误或访问冲突：1231 变量 'sql_mode' 不能设置为 'NO_AUTO_CREATE_USER' 的值。**

数据库名称、用户名和密码均正确。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T21:19:32.390

Drupal 不允许在您的 MySQL 数据库中创建新用户。您至少需要 MySQL 5.0.15

# mysql - 在 MySQL 服务器中创建一个以一对作为主键的表

> ID：12594600
> 
> 赞同：3
> 
> 时间：2012-09-26T04:34:17.077
> 
> 标签：mysql, sql, primary-key

我有 2 张桌子：

1.  Authors(id, name, add, DOB)，其中字段分别为 INTEGER、CHAR(20)、CHAR(20)、DATE。主键 = id。

2.  字段分别为 INTEGER、CHAR(20)、CHAR(20) 的书籍（出价、标题、出版商）。主键 = 出价。

我想创建另一个带有字段aid、bid、datePublished的写入表，其中：

1.  aid = INTEGER ... 这实际上是来自 Authors 的 id。
2.  bid = INTEGER ... 这实际上是 Books 的出价
3.  主键 =（援助，出价）。

我该怎么做呢？

我尝试了以下代码行，它们都给出了语法错误：

```
CREATE TABLE Write (
    aid INTEGER, 
    bid INTEGER, datePublished DATE, 
    PRIMARY KEY NONCLUSTERED (aid,bid), 
    FOREIGN KEY (aid) REFERENCES Authors(id), 
    FOREIGN KEY (bid) REFERENCES Books(bid)
);

CREATE TABLE Write (
    aid INTEGER, 
    bid INTEGER, 
    datePublished DATE, 
    PRIMARY KEY (aid,bid)
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T04:42:49.970

你遇到的有趣问题。原因是它`Write`是 mysql 中的保留关键字，如果在查询中用反引号括起来，则只能将其用作标识符。我建议您选择另一个名称，或者，如果您真的想使用`Write`，请将您的 create 查询替换为

```
CREATE TABLE `Write` (
    aid INTEGER, 
    bid INTEGER, 
    datePublished DATE, 
    PRIMARY KEY (aid,bid)
); 
```

请记住，表上的任何其他查询`Write`也需要反引号，如果有人忘记它们，这可能会导致烦人的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:46:12.633

Write 是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，不能命名任何表（它*可以*使用 back tic，但为了让您的生活轻松远离需要 back tic 的名称）。

这是完整的架构 [http://sqlfiddle.com/#!2/dfe22/1](http://sqlfiddle.com/#!2/dfe22/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:39:07.067

尝试这个 ：

```
CREATE TABLE Write (aid INTEGER, bid INTEGER, datePublished DATE PRIMARY KEY (aid,bid)); 
```

# objective-c - SQLite 查询在 3.5.2 版中成功运行，但在 3.7.11 版中出现错误 - 使用聚合函数

> ID：12594607
> 
> 赞同：0
> 
> 时间：2012-09-26T04:35:06.733
> 
> 标签：objective-c, sqlite, ios6

我的查询在 Sqlite 3.5.1 版本中运行良好，但是当我在 3.7.11 版本中运行相同的查询时，出现滥用聚合函数 min() 错误。下面一个是我的查询。请在这方面帮助我

按 min(displayorder) asc 从 m_ipaperdara order 中选择不同的类别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:46:21.650

`DISTINCT`不是可用于聚合函数的分组。
如果要`displayorder`在每个类别中使用 smalled，则必须按该列显式分组：

```
SELECT category FROM m_ipaperdara GROUP BY category ORDER BY MIN(displayorder) 
```

# android - 如何使用带有 AccessType 的 GoogleAuthorizationCodeFlow 离线

> ID：12594608
> 
> 赞同：6
> 
> 时间：2012-09-26T04:35:07.007
> 
> 标签：android, google-drive-api

我必须实现一个将文件上传到 Google Drive 的功能。
如[快速入门](https://developers.google.com/drive/quickstart)指南中所述。

首先，我调用 generateLinkAuth 生成链接来获取代码。
然后将执行 generateCode 以获取令牌。
一切都很好。

```
 List<String> SCOPES = Arrays.asList("https://www.googleapis.com/auth/drive.file", "https://www.googleapis.com/auth/userinfo.email",
            "https://www.googleapis.com/auth/userinfo.profile", DriveScopes.DRIVE);
    public String generateLinkAuth() {
            mHttpTransport = new NetHttpTransport();
            mJsonFactory = new JacksonFactory();

            mFlow = new GoogleAuthorizationCodeFlow.Builder(mHttpTransport, mJsonFactory, CLIENT_ID, CLIENT_SECRET, SCOPES).setAccessType("online").setApprovalPrompt("force").build();

            String url = mFlow.newAuthorizationUrl().setRedirectUri(REDIRECT_URI).build();

            System.out.println("url :" + url);
            return url;
        }

        public void generateCode(String code) {
            new GetCredentialFromCode(mContext, code).execute();
        }

        class GetCredentialFromCode extends AsyncTask<Void, Void, Void> {
            private Context mContext;
            private String code;
            private final ProgressDialog mDialog;

            public GetCredentialFromCode(Context context, String cd) {
                mContext = context;
                mDialog = new ProgressDialog(context);
                mDialog.show();
                mDialog.setTitle("Uploading ...");
                code = cd;
            }

            @Override
            protected Void doInBackground(Void... params) {

                if (mFlow != null) {
                    try {

                        mResponse = mFlow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute();

                        mCredential = new GoogleCredential();

                        mCredential.setFromTokenResponse(mResponse);

                        String accessToken = mCredential.getAccessToken();
                        Editor edit = mPrefs.edit();
                        edit.putString(GOOGLE_DRIVE_TOKEN, accessToken);
                        edit.commit();

                        String accessTokenSave = mPrefs.getString(GOOGLE_DRIVE_TOKEN, "NO KEY");
                        Log.e(TAG, "access Token Saved is " + accessTokenSave);

                    } catch (IOException e) {
                        Editor edit = mPrefs.edit();
                        edit.putString(GOOGLE_DRIVE_TOKEN, "NO KEY");
                        e.printStackTrace();
                    }
                }

                String accessTokenSave = mPrefs.getString(GOOGLE_DRIVE_TOKEN, "NO KEY");

                mHttpTransport = new NetHttpTransport();
                mJsonFactory = new JacksonFactory();
                mCredential = new GoogleCredential().setAccessToken(accessTokenSave);

                getUserInfo();

                mDriveService = new Drive.Builder(mHttpTransport, mJsonFactory, mCredential).build();
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
                mDialog.dismiss();
                GoogleDriveLogInAct act=  (GoogleDriveLogInAct) mContext;
                act.goBackSettingScreen();
            }

        } 
```

问题是令牌将在 1 小时内使用 setAccessType("online") 过期，所以我将其更改为 setAccessType("offline")。
当我更改它并再次运行我的 android 应用程序时，出现错误 - 当我执行以下代码时。

```
 mResponse = mFlow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute();

                mCredential = new GoogleCredential();

                mCredential.setFromTokenResponse(mResponse); 
```

当我尝试在控制台上调试时，执行*mCredential.setFromTokenResponse(mResponse)。*, 将引发异常

```
java.lang.RuntimeException: An error occured while executing doInBackground()
    at android.os.AsyncTask$3.done(AsyncTask.java:278)
    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    at java.lang.Thread.run(Thread.java:856)
 Caused by: java.lang.IllegalArgumentException: Please use the Builder and call setJsonFactory, setTransport and setClientSecrets
    at com.google.common.base.Preconditions.checkArgument(Preconditions.java:88)
    at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.setRefreshToken(GoogleCredential.java:294)
    at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.setRefreshToken(GoogleCredential.java:153)
    at com.google.api.client.auth.oauth2.Credential.setFromTokenResponse(Credential.java:556)
    at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.setFromTokenResponse(GoogleCredential.java:313)
    at com.jp.shotdocs.libs.GoogleDriveLib$GetCredentialFromCode.doInBackground(GoogleDriveLib.java:168)
    at com.jp.shotdocs.libs.GoogleDriveLib$GetCredentialFromCode.doInBackground(GoogleDriveLib.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:264)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    ... 4 more 
```

如何离线使用 accessType？
有什么我必须修改才能使用这种模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T16:09:55.767

(Answered in the comments. See [Question with no answers, but issue solved in the comments (or extended in chat)](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments) )

The OP wrote:

> have solve this problem... I should declare `GoogleCredential` by using `GoogleCredential.Build()` instead of `new GoogleCredential()`.

# iphone - 缩放整个视图控制器

> ID：12594609
> 
> 赞同：2
> 
> 时间：2012-09-26T04:35:12.863
> 
> 标签：iphone, objective-c, ios, xcode

我有一个正在开发的应用程序。主视图控制器有一个键盘（就像在安全门上一样）。我希望用户点击数字键盘，我希望整个视图放大。这不是 UIImageView。我知道如何缩放图像/图像视图。我想要一组超小的数字/数字键盘和一个超小的文本字段，然后当它放大时，这两个 UI 元素会很大。我想通过按下按钮来完成这个！提前致谢。我没有代码可提供！对不起，谢谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:59:33.087

一种可能性是只制作一个图像视图，将其缩放到您想要的大小，然后将其隐藏并用实数键盘“替换”它。为此，只需将数字键盘隐藏在开头并可见，一旦图像视图达到其最终大小并消失（然后将其隐藏）

对用户来说，这一切看起来好像“数字键盘”会缩放 - 这实际上是您的数字键盘图像。

此外，只有一个视图可以隐藏/取消隐藏，只需将数字键盘的所有键和其他任何内容放在一个容器视图上即可。

要缩放图像，只需制作屏幕截图并使用某种 Photoshop 工具剪切可缩放的图像区域。

顺便说一句，我希望您对缩放数字键盘的想法肯定会在您的应用程序中成为一个不错的动画！

# objective-c - 为什么某些 UIViewController 属性在未使用 viewDidLoad 设置时变为 nil？

> ID：12594620
> 
> 赞同：3
> 
> 时间：2012-09-26T04:36:37.777
> 
> 标签：objective-c, cocoa, uikit

这似乎发生在我使用 nib 文件加载视图时。我需要以编程方式为一些自定义视图设置数据源和委托。只有当我在 viewDidLoad 方法中设置它们时它们才起作用。在初始化程序中设置它们， awakeFromNib 等都失败了。有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:48:22.687

当你从一个 nib 文件创建一个视图控制器时， UIViewController 首先被初始化然后被加载。因此，当`initWithNibName:bundle:`调用该方法`self.view`并且从 nib 加载的任何其他视图将是`nil`. 也可能发生视图被卸载（参见 参考资料`viewDidUnload`）。这就是为什么任何与视图相关的初始化都需要在`viewDidLoad`.

# c# - 绑定内部样式

> ID：12594629
> 
> 赞同：1
> 
> 时间：2012-09-26T04:37:23.283
> 
> 标签：c#, wpf, vb.net, xaml

我有以下代码：

```
<Style TargetType="{x:Type ribbon:Button}">
        <Setter Property="ToolTip" Value="{Binding Label}" />
</Style> 
```

这工作正常，但为什么这不起作用或这样做的正确方法是什么：

```
<Style TargetType="{x:Type ribbon:Button}">
        <Setter Property="ToolTip">
                <Setter.Value>
                <ToolTip Content="{Binding Label}" />  
        </Setter.Value>
        </Setter>
</Style> 
```

这样做的原因是我想更改工具提示的其他属性，例如放置等。这只能通过第二种方法实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:41:31.923

这是您所追求的二传手的“长形式”：

```
<Setter Property="ToolTip">
    <Setter.Value>
        <Binding>
            <Binding.Path>Label</Binding.Path>
        </Binding>
    </Setter.Value>
</Setter> 
```

* * *

**编辑#1**实际上，我测试了您的版本，它似乎也可以正常工作。但这并不完全正确，因为您将 ToolTip 的内容设置为另一个 ToolTip。

**编辑#2**像这样设置工具提示放置：

```
<Setter Property="ToolTip.Placement" Value="MousePoint" /> 
```

# sql-server - Entity Framework 4.0 函数导入返回与直接运行存储过程不同的结果

> ID：12594630
> 
> 赞同：0
> 
> 时间：2012-09-26T04:37:24.237
> 
> 标签：sql-server, stored-procedures, entity-framework-4

我有一个存储过程，可以计算给定日期期间的预测销售数据。

```
ALTER PROCEDURE [dbo].[CalculateMonthlyForecast]
    @CustomerID Int = -1,
    @ProductID Int = -1,
    @ForecastDate DateTime = NULL,
    @StartDate DateTime,
    @FinishDate DateTime
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Calculates each month's forecast as an individual row
    SELECT  [Year], [MonthNumber], [BaseSales], [ForecastSales]
    FROM    dbo.GetMonthlyForecast(@CustomerID, @ProductID, @StartDate, @FinishDate,     @ForecastDate)
END 
```

这运行良好并产生了我期望的值。我在实体框架设计器中创建了一个函数导入，它应该将这些结果作为复杂类型 MonthlyForecastResult 的集合引入。我遇到的问题是 MonthlyForecastResult 对象中的值与存储过程生成的值不同。

查看 SQL Server Profiler 中的跟踪，我可以看到调用函数时实体框架生成的 EXEC 调用。直接在 SQL Server 中执行存储过程（使用生成的调用）会返回正确的结果，但函数返回的 MonthlyForecastResult 对象与存储过程结果的值不同。

此外，BaseSales 和 ForecastSales 值在 MonthlyForecastResult 对象中始终是相同的值，即使它们在存储过程的结果中非常不同。

我唯一能想到的可能是导致它与实体键混淆，但即使只返回 1 行也会出现问题，而且我不会想到实体键会在复杂类型上发挥作用反正对象。

**更新**

我今天在更新应用程序的生产版本后发现，我遇到的问题似乎只发生在开发环境中。在连接到其数据库的客户端服务器上运行应用程序似乎产生了正确的数字（因为我预计基本销售额和预测销售额之间存在差异）。这看起来很奇怪，因为我使用开发数据库中的确切定义更新了他们的数据库，并通过使用干净的设置重新安装它来更新应用程序，所以它也应该是相同的。

**例子**

如果我要求它计算 2012 年 9 月的每月预测，则 EF 生成的执行调用在 SQL Server Profiler 中显示为：

```
exec [dbo].[CalculateMonthlyForecast] @CustomerID=1,@ProductID=2,@ForecastDate=NULL,@StartDate='2012-09-01',@FinishDate='2012-10-01' 
```

如果我复制它并在 SQL Server 中运行它，我会返回三行：

```
年月基销售预测销售
2012 8 660 660
2012 9 3590 10890
2012 10 1652 1652

```

注意：额外的月份是因为它是按周计算的，并且 9 月的第一周开始和最后一周结束与其他月份重叠。

根据我的手动计算，这是正确的，但 MonthlyForecastResult 对象没有这些值。生成的三个对象具有以下值：

```
年月基销售预测销售
2012 8 498 498
2012 9 9970 9970
2012 10 2717 2717

```

有谁知道是什么导致存储过程结果与复杂类型值不同？

# inno-setup - Inno Setup 中不同语言的不同许可文件

> ID：12594634
> 
> 赞同：1
> 
> 时间：2012-09-26T04:37:45.067
> 
> 标签：inno-setup

我在 Inno Setup 中创建了多语言安装文件。如何将不同的许可证文件用于不同的语言？

例如：
英语 -> 英语许可证
俄语 -> 俄语许可证

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T10:02:04.270

如果您只想要每种语言的自定义许可证，您可以使用在条目上指定[`LicenceFile`](http://www.jrsoftware.org/ishelp/topic_languagessection.htm#licensefile)参数。`[Languages]`

如果要显示两个单独的许可证，则需要自己添加`[Code]`以执行此操作，使用该`CreateOutputMsgMemoPage()`功能，并使用以下内容加载另一个许可证文件：

```
ExtractTemporaryFile('additional licence.txt');
LoadStringFromFile(ExpandConstant('{tmp}/additional licence.txt'), LicenceText);
LGPLPage.RichEditViewer.RTFText := LicenceText; 
```

如果您想要一组单独的同意/不同意按钮，您还需要创建这些按钮并将其添加到页面并`WizardForm.NextButton`根据需要启用/禁用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-17T16:43:18.680

我遇到了这个问题，你的回答（来自 Deanna）帮助我解决。谢谢！
即便如此，我还是有些困难。
我不明白 MessagesFile 是 [Languages] 的参数

所以我发布示例，以完成朋友的回答：

```
[Languages]
Name: "en";   MessagesFile: "compiler:Default.isl";                       LicenseFile: "doc\file-en.rtf"
Name: "ptb";  MessagesFile: "compiler:Languages\BrazilianPortuguese.isl"; LicenseFile: "doc\file-ptb.rtf"
Name: "es";   MessagesFile: "compiler:Languages\Spanish.isl";             LicenseFile: "doc\file-es.rtf" 
```

# asp.net - 在 asp.net 中使自动完成搜索更快

> ID：12594639
> 
> 赞同：0
> 
> 时间：2012-09-26T04:38:19.133
> 
> 标签：asp.net, ajax, autocomplete, indexing

我已经使用 ajax 自动完成控件在我的网站上实现了自动完成搜索。它使用从数据库返回结果的 Web 服务。为此，我有一个存储过程，它在所有表的所有列中搜索所有文本值。这里的问题是结果需要很长时间才能显示在自动完成控制中。我还在最常搜索的表列上应用了索引，但这并没有太大帮助。这可能是因为服务器上的负载，因为服务器不是专用的。如果不是，我怎样才能更快地获取结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:58:35.447

您始终可以优化查询以更快地加载数据并使用服务器端缓存来缓存数据。

同样在 UI 上，我建议您使用[jQuery 自动完成](http://jqueryui.com/demos/autocomplete/)插件

```
<script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script> 
```

# telerik - 格式化 RadGrid 中列中的值

> ID：12594641
> 
> 赞同：2
> 
> 时间：2012-09-26T04:38:44.017
> 
> 标签：telerik, telerik-grid

请帮助我，如何在每列中找到最高数字并将其格式化以使其粗体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T04:40:04.387

请使用此方法。

```
protected void RadGrid1_PreRender(object sender, EventArgs e)
{
    string[] numericColumns = { "OrderID", "Freight", "Freight1", "Freight2" };
    foreach (string uniqueName in numericColumns)
    {
        int index = -1;
        decimal maxNumber = decimal.MinValue;
        foreach (GridDataItem dataItem in RadGrid1.MasterTableView.Items)
        {
            decimal currentNumber = decimal.Parse(dataItem[uniqueName].Text);
            if (currentNumber > maxNumber)
            {
                maxNumber = currentNumber;
                index = dataItem.ItemIndex;
            }
        }
        if (index >= 0)
        {
            GridTableCell cell = (RadGrid1.Items[index] as GridDataItem)[uniqueName] as GridTableCell;
            cell.BackColor = System.Drawing.Color.LightBlue;
        }
    }
} 
```

希望这对你有用。

# jquery - Jquery插件blockUI不适用于ajax

> ID：12594645
> 
> 赞同：3
> 
> 时间：2012-09-26T04:39:06.120
> 
> 标签：jquery, ajax, blockui, jquery-blockui

我想在进行特定的 ajax 调用时阻止当前页面并将 blockUI 用作消息框。我不能只使用`$(document).ajaxStart($.blockUI).ajaxStop($.unblockUI);`

我的代码如下..

```
bc.find('.submit').click(function (e) {
    e.preventDefault();
    if ($(this).hasClass('lock'))
        return;
    $.blockUI();
    $(this).addClass('lock');
    bc.submit();
});

var validator;
validator = bc.validate({
    ignore: '',
    rules: {
        UserName: {
            required: true
        }
    },
    messages: {
        UserName: 'must have',
    },
    submitHandler: function (form) {
        $.ajax({
            url: '/yyyy/xxxx',
            type: 'POST',
            data: postdata,
            complete: function () {
                bc.find('.submit').removeClass('lock');
            },
            success: function (data) {
                if (data.status == 'OK') {
                    $.blockUI({ message: 'OK' });
                    ......
                }
                else {
                    switch (data.status) {
                        case 'xxx':
                        ......
                    }
                    $.unblockUI();
                }
            },
            error: function () {
                $.unblockUI();
                alert('xxx');
            }
        });
    }
}); 
```

场景是，当我单击`.submit`按钮时，页面被阻止，并且对服务器进行 ajax 调用以获取数据响应。当 ajax 调用成功时，我取消阻止当前页面，如果 data.status 为“OK”，我会显示一个消息框（也基于 blockUI 插件）。否则我在当前页面上显示错误，然后取消阻止它。

**在 2016 年编辑，有一个编辑改变了问题的含义（可能是因为我当时的英语很差），我把更改回滚了，让它更清楚，请不要在下面再更改。**

但实际上，***只有在ajax调用完成之后***（debug step over 中的代码`ajax complete handler`），然后看：

1.  首次`$.blockUI();`执行
2.  执行`$.blockUI({ message: 'OK' })`与否
3.  然后`$.unblockUI()`被称为

（以上是回答中chrome或firefox调试工具执行顺序异常的意思。`blockui code`因为ajax完成后不应该执行）

这不是我想要的，我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-30T03:30:16.587

我遇到了同样的问题，因为我使用了 aync 为 false 的同步 ajax 调用

我通过将 ajax 调用异步为 true 来解决它

```
$.ajaxSetup({ async :true}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T04:43:22.093

在 beforeSend 函数中设置 Block UI 和在 complete 函数中设置 unBlockUI ，这样你就可以得到你所期望的行为。

```
$.ajax({
            url: '/yyyy/xxxx',
            type: 'POST',
            data: postdata,
            beforeSend : function() {
               $.blockUI({ message: 'OK' });
            }, 
            complete: function () {
                bc.find('.submit').removeClass('lock');
                 $.unblockUI();
            },
            success: function (data) {
                if (data.status == 'OK') {

                    ......
                }
                else {
                    switch (data.status) {
                        case 'xxx':
                        ......
                    }

                }
            },
            error: function () {
                $.unblockUI();
                alert('xxx');
            }
        }); 
```

这将确保您的 UI 在请求发送后立即阻塞，并在请求完成后立即解除阻塞..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:38:57.843

问题是由 chrome 和 firefox 中的浏览器调试工具导致的执行序列异常。使用调试器，我确认是否`$.blockUI()`在 ajax 调用之前执行。在我跨过 ajax 中的完整处理程序后，它总是在执行。刚才，我在服务器端代码中设置了一个断点，我发现执行顺序变得如我所愿！

**2016-01-25 更新：**

**笔记：**

1.  这个答案在 2012-09-26 回答。不知道chrome还是firefox现在`abnormal execution sequence`做的时候还有点东西`async call`。（不过我记得，当时设置`a break point`就行了——`$.blockUI({ message: 'OK' });`在chrome调试工具中，输入`F10`（go next），会看到chrome刚刚跨过break点，什么也没有发生）
2.  实际上问题的代码没有错误。我想我为什么要问这个问题只是因为我在调试工具中看到了异常的执行顺序，这让我感到困惑，答案就在这里。如果你想知道为什么你的代码不起作用或其他什么，你最好找到其他答案或提出一个新问题。
3.  关于`abnormal execution sequence`，现在，我想也许它`blockui`也是。因为我们没有看到它是如何`$.blockUI()`工作的，所以可能`block element function`存储在 chrome 执行回调堆栈的深处。我可能会将断点放在错误的行如果这个假设是真的（所以可能需要在中设置断点`blockui source code`）

而且，我已经很多年没有合作了`blockui`。如果你只是想要一个阻止消息框，我建议[sweetalert](http://t4t5.github.io/sweetalert/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-09T02:25:28.657

您可以使用 ajaxBlockUI 等 ajax 包装器使您的代码更简单 - 请参阅[https://stackoverflow.com/a/28358070/460084](https://stackoverflow.com/a/28358070/460084)

您所要做的就是将 blockUI:true 添加到 ajaxBlockUI，实际的阻止和解除阻止 UI 将在内部处理。

# javascript - 是否可以使用 Javascript 和 RegEx 隐藏某些 HTML 元素或页面的某些部分？

> ID：12594649
> 
> 赞同：-1
> 
> 时间：2012-09-26T04:39:39.600
> 
> 标签：javascript, html, dom, hide

我想知道这是否可能，如果可以。请有人告诉我如何或只是将我指向一个教程。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:43:35.897

是的，只有 dom 函数

```
 document.getElementById("p1").style.visibility="hidden"; 
```

像[参考](http://www.w3schools.com/jsref/prop_style_visibility.asp)

```
<html>
<head>
<script>
function displayResult()
{
document.getElementById("p1").style.visibility="hidden";
}
</script>
</head>
<body>

<p id="p1">This is some text.</p>
<input type="button" onclick="displayResult()" value="Hide paragraph" />

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:55:49.770

这是我的镜头：

您想要的表格似乎在一个 div 中，该 div 位于 class=post-body 的 div 中。像这样的东西：

```
<div class="post-body">
    <div dir="ltr">
        <table>
            <tr><td>Ad</td></tr>
            <tr><td>Content</td></tr>
            <tr><td>Ad</td></tr>
        </table>
    </div>
</div>​ 
```

我使用 jQuery 来选择除第二行之外的所有行并像这样隐藏它们

```
$(document).ready(function(){
    $('div.post-body > div > table tr:not(:nth-child(2))').hide();
}) 
```

jsfiddle在这里：http: [//jsfiddle.net/qx2GY/](http://jsfiddle.net/qx2GY/)

# e-commerce - PromotionRule，好听还是不好听？

> ID：12594653
> 
> 赞同：0
> 
> 时间：2012-09-26T04:40:12.827
> 
> 标签：e-commerce, modeling, promotions

我正在从事电子商务网站的推广部分工作。

我们有两种促销方式：

1.  为客户提供折扣
2.  向客户提供礼品产品（免费）

这两种促销活动都需要客户满足一些先决条件。例如，如果购物车的小计超过 1000 美元，客户可以获得 20% 的折扣。另一个例子，如果购物车的小计超过 1500 美元，客户可以获得 iPad 3 作为礼物。

可以看到，这两个推广的前提是相似的。所以我用一个`Promotion`类来表示促销，用一个`PromotionRule`类来呈现客户应该满足的前提条件。模型是（用 C# 编写的）：

```
public class Promotion {
    public string Name { get; set; }
    public PromotionType Type { get; set; }
    public decimal DiscountAmount { get; set; }
    public IList<Product> GiftProducts { get; set; }
    public IList<PromotionRule> Rules { get; set; }
}

public enum PromotionType {
    Discount = 0,
    GiftProduct = 1
}

public class PromotionRule {
    public decimal? MinAmountOfTheShoppingCart { get; set; }
    ...
} 
```

您可以看到，促销可以有一个客户应该满足的促销规则列表。`PromotionType`用于表示我们是否会为客户提供折扣或礼品产品。

**现在，我的问题是：`PromotionRule`在这种情况下是个好名字吗？**因为我英语不是很好。我不知道这个名字是否容易理解。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:52:56.610

> ...一个 PromotionRule 类，用于提出客户应满足的先决条件。

我不认为“规则”是一个坏名字。规则通常包含一个或多个隐式或显式条件。

Wikipedia 在[业务规则](http://en.wikipedia.org/wiki/Business_rule)下列出了一些示例：

> 例如，业务规则可能规定不对回头客执行任何信用检查。业务规则的其他示例包括要求租赁代理在信用评级过低时拒绝租赁租户，或要求公司代理使用首选供应商列表和供应时间表。

在第一个 Wikipedia 示例中，我们看到了以下条件：

```
if( !isReturnCustomer ){
    PerformCreditCheck();
} 
```

一条规则很容易有多个条件，例如：

```
if( temperature < 0 && isRaining ){
    HandleFreezingRain();
} 
```

因此，如果您的类封装了多个条件，我建议使用“规则”，如果对象仅封装一个条件，我建议使用“PromotionCondition”。或者也许是一个`PromotionRule`包含`PromotionConditions`.

# authentication - ServiceStack Authenticate 属性导致空引用异常 - 拉取请求 267

> ID：12594654
> 
> 赞同：1
> 
> 时间：2012-09-26T04:40:19.800
> 
> 标签：authentication, servicestack

我正在使用 ServiceStacks 身份验证机制创建一个 MVC3 站点。当我将 AuthenticateAttribute 添加到控制器时，我得到一个空引用异常：

```
System.NullReferenceException was unhandled by user code
HResult=-2147467261
Message=Object reference not set to an instance of an object.
Source=ServiceStack.FluentValidation.Mvc3
StackTrace:
at ServiceStack.Mvc.ExecuteServiceStackFiltersAttribute.OnActionExecuting(ActionExecutingContext  filterContext) in  C:\src\ServiceStack\src\ServiceStack.FluentValidation.Mvc3\Mvc\ExecuteServiceStackFiltersAttribute.cs:line 21
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
```

我可以在 github 中看到 pull request #267 似乎对我的代码当前抛出的位置进行了一些 null ref 检查。我有另一个可以进行身份​​验证的项目，但是新的失败代码在更新版本的 ServiceStack 上运行，我看不出有什么区别，所以关于什么可能导致新版本的服务堆栈出现此异常的任何想法（v. 3.9.18)

这是我的配置代码：

```
Plugins.Add(new AuthFeature(
                        () => new AuthUserSession(), // Here a custom IAuthSession implementation could be used instead of UserSession.
                        // Allow authentication by using cookies set when authenticating with username/password credentials posted to the /auth/credentials service.
                        new IAuthProvider[]{ new CredentialsAuthProvider() }
                        )
            );
 //Enable Funq IOC in MVC controllers.
 ControllerBuilder.Current.SetControllerFactory(new FunqControllerFactory(container));

IUserAuthRepository userRepository = new OrmLiteAuthRepository(dbFactory);
container.Register(userRepository);
container.Register<ICacheClient>(new MemoryCacheClient());

        // Initialise Registration feature, providing the /register route.
        Plugins.Add(new RegistrationFeature()); 
```

还有我的控制器基类：

```
public abstract class ControllerBase : ServiceStackController<AuthUserSession> {
    public IDbConnectionFactory Db { get; set; }
    public ILog Log { get; set; }
    //Common extension point for all controllers. Inherits from ServiceStack to take advantage of SS powerpack + auth.
    public override string LoginRedirectUrl {
        get {
            return "/Auth/Login?redirect={0}";
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:20:41.027

我更新了 ServiceStack.Mvc NuGet 包，它解决了 (v3.9.18+) 中的空引用异常。尝试更新，看看是否可以解决它。

# android - 应用程序意外停止 - Android

> ID：12594655
> 
> 赞同：0
> 
> 时间：2012-09-26T04:40:20.987
> 
> 标签：android

我是android开发的新手。在设置了一个 android 项目后，我尝试获取文本输入并将其传递给另一个活动（屏幕）。

当我运行该项目时，我没有收到错误，但是当我单击应用程序时，它会显示第一个屏幕，然后当单击屏幕中的按钮时，会出现错误“应用程序意外停止”。

当我尝试代码而不将数据从第一个屏幕传递到第二个屏幕时，应用程序可以正常工作。

这是 MainActivity.java 文件：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText et= (EditText) findViewById(R.id.editText1);
        Button b = (Button)findViewById(R.id.button1);

        b.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
        //intent class is used for activating another or component or an activity
            Intent intent =new Intent(MainActivity.this, Second.class);
                intent.putExtra("textval", et.getText().toString());
                startActivity(intent);
            }
        });}} 
```

这是 Second.java 文件的代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Second extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    TextView tv= (TextView) findViewById(R.id.textView1);
    tv.setText(getIntent().getExtras().getString("textval"));

}
} 
```

这是activitymain.xml 代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
    android:layout_height="match_parent">

    <EditText android:id="@+id/editText1" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true" android:layout_alignParentTop="true"
        android:ems="10"
        android:inputType="text"
        >

        <requestFocus />
    </EditText>

    <Button android:id="@+id/button1" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText1" android:layout_marginTop="28dp"
        android:text="@string/button" />

</RelativeLayout> 
```

这是第二个xml文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView android:id="@+id/textView1" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:text="@string/textview" />

</LinearLayout> 
```

请帮我找出错误。由于我没有收到错误通知，我无法继续。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:50:25.680

在您的第二个 java 文件中进行如下更改

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Second extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);

    TextView tv= (TextView) findViewById(R.id.textView1);
    tv.setText(getIntent().getExtras().getString("textval"));

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:49:14.897

这是你错过的`Second.java`：

```
setContentView(R.layout.second); 
```

把它放在你的`textview`声明之上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T04:42:52.250

在 android 清单文件中声明第二个活动。

```
<activity android:name=".Second"/> 
```

添加`setContentView(R.layout.second);`第二个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T04:52:15.437

在您的清单文件中添加第二个活动的条目。将第一个活动作为启动器，将其他活动作为默认值。这里我有两个活动 MainActivity 和 Player。首先我启动 MainActivity 然后调用其他活动 Player

注意 - 活动名称应与类名相同，因此在清单文件中也应保持相同。

您还需要通过 onCreate 函数中的 setContentView 为这两个活动指定布局文件。

这是示例代码-

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.vt.soc"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Player"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="com.vt.soc.PALYER" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T05:33:08.163

**-**在您的第二个活动中，您忘记**添加**`setContentView()`.

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.second);  

    TextView tv= (TextView) findViewById(R.id.textView1);
    tv.setText(getIntent().getExtras().getString("textval"));

} 
```

**-**还请确保您已将其**添加** `Second Activity`到您的`Manifest.xml`文件中。

# sed - Unix - 使用 sed 删除模式后的所有内容

> ID：12594656
> 
> 赞同：1
> 
> 时间：2012-09-26T04:40:21.843
> 
> 标签：sed

我有一个如下所示的文件：

```
memory=500G
brand=HP
color=black
battery=5 hours 
```

对于每一行，我想删除之后`=`的所有内容以及`=`.

最终，我想得到类似的东西：

```
memory:brand:color:battery: 
```

（都在一行中，每个单词后都有冒号）

有没有我可以使用的单行 sed 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:47:07.230

```
sed -e ':a;N;$!ba;s/=.\+\n\?/:/mg' /my/file 
```

改编自[这个很好的答案](https://stackoverflow.com/a/1252191/132382)。

然而，坦率地说，我会发现这样的东西更具可读性：

```
cut -d = -f 1 /my/file | tr \\n : 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:20:59.960

```
perl -F= -ane '{print $F[0].":"}' your_file 
```

测试如下：

```
> cat temp
abc=def,100,200,dasdas
dasd=dsfsf,2312,123,
adasa=sdffs,1312,1231212,adsdasdasd
qeweqw=das,13123,13,asdadasds
dsadsaa=asdd,12312,123
> perl -F= -ane '{print $F[0].":"}' temp
abc:dasd:adasa:qeweqw:dsadsaa: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T05:50:11.990

这可能对您有用（GNU sed）：

```
sed -i ':a;$!N;s/=[^\n]*\n\?/:/;ta' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T04:56:55.833

这是一种使用方法`GNU awk`：

```
awk -F= '{ printf "%s:", $1 } END { printf "\n" }' file.txt 
```

结果：

```
memory:brand:color:battery: 
```

如果你不想在最后一个单词后面加冒号，你可以`GNU sed`这样使用：

```
sed -n 's/=.*//; H; $ { g; s/\n//; s/\n/:/g; p }' file.txt 
```

结果：

```
memory:brand:color:battery 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T10:26:10.867

我的命令是

第一步：

sed 's/([az]+)(\=.*)/\1:/g' 文件名 |cat >a

猫

记忆：

牌：

颜色：

电池：

第二步：

sed -e 'N;s/\n//' a | sed -e 'N;s/\n//'

我的输出是

内存：品牌：颜色：电池：

# testing - 我应该针对所有浏览器和所有版本测试我的网站吗？

> ID：12594659
> 
> 赞同：0
> 
> 时间：2012-09-26T04:40:39.363
> 
> 标签：testing, browser, web, compatibility

问题 1：我是否需要关心 Firefox 2、firefox 3、chrome7,8、opera 8,9 等的一些错误，这些错误会使我的网站在这些旧浏览器上看起来很奇怪？我想知道开发人员是否在每次更新浏览器时都更改了 HTML 渲染引擎并使我的网站与所有版本不兼容。

几乎访问者会保持他们的浏览器更新吗？如果没有，请向我推荐一些工具，这些工具可以帮助我在所有主要版本中针对 FF、Chrome、IE、Opera、Safari 测试我的网站。（我已经通过一些在线服务尝试过，但是截屏我的网站非常慢）

问题 2：PC、平板电脑、手机浏览器之间是否存在任何差异（屏幕分辨率除外）会导致我的网站显示错误？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:58:22.757

好吧，您是否应该针对以下内容测试您的网站：

*   **所有浏览器**：是的，因为 Windows 用户可以在 IE、Chrome、Firefox 和远程情况下使用 Safari、Opera 等。而 Mac 用户将首选 Safari、Chrome。
*   **所有版本**：可能没有。仅限于那些仍然受支持的，即 IE 7 及以上。

* * *

但是，关键在于浏览器所基于的引擎。可以说：

```
 *OS: Kernel :: Browser:Engine* 
```

例如，Chrome、Safari 都基于“webkit”布局引擎。查看，网络布局引擎：[http ://en.wikipedia.org/wiki/List_of_web_browsers](http://en.wikipedia.org/wiki/List_of_web_browsers)

（这种考虑将节省大量精力，因为您可以放心，使用相同引擎的浏览器将以相似的方式运行。）

*此外，请考虑您的目标受众，这可以帮助您限制浏览器的选择。*

***是的，大多数浏览器都有开发工具（F12 键），可以让您模拟以前版本的浏览器。***

* * *

但是，总而言之，答案是相对的，完全取决于您有多少时间以及您愿意花费多少努力、时间、测试......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:50:06.560

开发人员应始终尝试使他们的网站跨浏览器兼容。我个人不会担心非常旧版本的浏览器（即 Firefox 2），而是会显示一条消息，告诉用户他们应该升级他们的浏览器。

由于许多用户并不总是立即升级他们的浏览器，因此您仍然应该尝试保持您的网站与这些浏览器的兼容性。

我会推荐这个工具来检查您网站的浏览器兼容性[https://browsershots.org/](https://browsershots.org/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-26T04:47:00.677

作为一般规则，有一种快速而肮脏的方法来测试您的网站。一个肮脏的假设是，如果它在 IE 上工作，它可以在任何东西上工作，因为 IE 处理的事情与其他浏览器不同。

话虽如此，您可以通过打开 IE9 浏览器窗口并按 F12 在 IE 上进行测试。这将在底部弹出一个框，使您可以快速检查站点的兼容性。在弹出框的右上角有两个下拉菜单，用于更改正在解释站点的 IE 引擎（左侧是引擎，右侧是引擎运行的兼容模式） . 您可以在 IE7 引擎和 IE9 引擎之间无缝切换，无需第三方应用程序即可。

# java - 在解析时间戳后，它在 java 中的时间戳中添加毫秒

> ID：12594666
> 
> 赞同：1
> 
> 时间：2012-09-26T04:41:11.920
> 
> 标签：java

我想将字符串时间转换为时间戳对象

我的解析代码是这样的

```
String ts = "120918 10:35:45";
SimpleDateFormat dateFormat = new SimpleDateFormat("yyMMdd hh:mm:ss");          
java.util.Date parsedDate = dateFormat.parse(ts);           
//parsing timestamp
Timestamp timestamp = new java.sql.Timestamp(parsedDate.getTime());
System.out.println("timestamp after parsing :: "+timestamp); 
```

它给了我结果：-`timestamp after parsing :: 2012-09-18 10:35:45.0`

但我不想要毫秒部分。我只想要这个——`2012-09-18 10:35:45`

请帮助我删除毫秒部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T04:47:22.440

`Timestamp`是一个毫秒的容器。它所包含的`toString()`格式是基于它认为最好显示的内容。

如果要格式化值，则应使用日期格式化程序，而不是使用`Timestamp`对象返回的值。

```
SimpleDateFormat noMilliSecondsFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
System.out.println(noMilliSecondsFormatter.format(timestamp)); 
```

注意。你拥有的值（在你转换它之后）无论如何都不包含任何毫秒......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:10:07.060

我的猜测，可能你没有在 println() 中使用“noMilliSecondsFormatter”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:02:38.673

`java.util.Date.getTime()`根据其javaDoc的方法：

> 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数

因此，当您创建 TimeStamp 对象时，您已经在传递毫秒数。

# php - 将带有过滤器的 SVG 图像转换为 PNG /PDF

> ID：12594668
> 
> 赞同：3
> 
> 时间：2012-09-26T04:41:16.483
> 
> 标签：php, cakephp, pdf, svg, png

我有以下 svg 图像到 300 DPI 的 png 图像和 pdf 图像。

```
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
 <defs>
  <filter height="200%" width="200%" y="-50%" x="-50%" id="svg_1_blur">
   <feGaussianBlur stdDeviation="10" in="SourceGraphic"/>
  </filter>
 </defs>
 <g>
  <title>Layer 1</title>
  <image filter="url(#svg_1_blur)" xlink:href="images/logo.png" id="svg_1" height="162.999996" width="223.999992" y="99" x="185"/>
  <text xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_2" y="210" x="289" stroke-width="0" stroke="#000000" fill="#000000">sdfdsdsfsdf</text>
 </g>
</svg> 
```

我想使用 PHP 执行此操作，并且我已将过滤器应用于图像的模糊过滤器，并且我想保留它。

我在 IE 中查看此图像时也遇到问题，因为它在 IE9 上没有显示模糊效果。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:12:42.940

您可以使用 GD 的[imagefilter](http://php.net/manual/en/function.imagefilter.php)生成类似的东西：

```
imagefilter($image_res, IMG_FILTER_GAUSSIAN_BLUR); 
```

或者

```
imagefilter($image_res, IMG_FILTER_SMOOTH, (int) $levelOfSmoothness); 
```

但是，对于更复杂的 svg，您将需要一个[SVG 渲染器](http://www.google.com/search?q=php+svg+renderer)。

**编辑**：

[或者，如果您对卷积矩阵](http://php.net/manual/en/function.imageconvolution.php)有足够的了解：

```
$gaussian = array(array(1.0, 2.0, 1.0), array(2.0, 4.0, 2.0), array(1.0, 2.0, 1.0));
imageconvolution($image, $gaussian, 16, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:57:20.580

如果您有可能执行脚本（exec、popen 等），[phantomjs](http://code.google.com/p/phantomjs/wiki/QuickStart)使用 webkit（与 Chrome/Safari 相同）并且在所有主要平台上都可用。您无法比这更接近浏览器将呈现的内容。尝试这样的事情：

`exec("phantomjs rasterize.js http://ariya.github.com/svg/tiger.svg tiger.png)";`

不要忘记清理（文件名或路径中不允许转义路径和字符）您传递给 phantomjs 的参数（文件路径）。

# css - CSS - 为网格中的某些列添加背景

> ID：12594670
> 
> 赞同：6
> 
> 时间：2012-09-26T04:41:29.567
> 
> 标签：css, twitter-bootstrap

好的，我是 CSS 新手，这只会给我带来麻烦。如何将背景颜色添加到多列但不是所有列。

我想要 span2 上的一种背景颜色和 span10 上的另一种颜色。我遇到的问题是填充问题。当我将背景应用于某些列时，它不会在内容周围有很好的均匀填充。这有意义吗？如何为具有嵌套列的某些列添加背景并仍然保持良好的填充？

## HTML

```
<div class="row bg">
  <div class="span10"> 

        <!-- Main hero unit for a primary marketing message or call to action -->
        <div class="sidebar">
            <div class="hero-unit">
                <h1>Join</h1>
                <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
                <p><a class="btn btn-primary btn-large">Register Now &raquo;</a></p>
            </div>
        </div>

        <!-- Example row of columns -->
        <div class="row">
            <div class="span5">
                <div class="bot-pad">
                    <h2>We are Fun!</h2>
                    <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
            </div>
            <div class="span5">
                <div class="right-pad bot-pad">
                    <h2>Learn more about yourself</h2>
                    <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
            </div>
        </div>
    </div>
</div> 
```

## CSS

```
.bg
{
    background: url('/assets/img/grid.png');
    .border-radius(5px); //LESS mixin for creating border radius
}
.right-pad
{
    padding-right: 20px;
}

.bot-pad
{
    padding-bottom: 20px;
} 
```

## 解释

所以`bg`班级正在应用背景。然后我的嵌套列有奇怪的填充，所以我经历并添加了类，比如`right-pad`需要右填充的`bot-pad`列和底部需要填充的列。我知道这在语义上是多么的错误，我只是不知道如何获得我需要的结果。谢谢。

这是我正在尝试做的另一个例子......但是他们也没有提供解决方案 [https://github.com/twitter/bootstrap/issues/1446](https://github.com/twitter/bootstrap/issues/1446)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T07:13:06.927

`background-color`在`span#`级别上设置不是一个好主意。为什么？因为`span#`是定位助手，如果您更改填充或边距，整个网格将中断。

那么，用于渲染彩色背景包装的原生 Twitter Bootstrap 元素是什么？是`well`。

如何使用它？

首先，将`well`元素插入到`span#`：

```
<div class="span5">
    <div class="well well-red">
        <!-- Your content -->
    </div>
</div> 
```

其次，通过类的扩展来分配属性`.well`（我用过`.well-red`）：

```
.well-red {
    background-color: #ff0000;
} 
```

这样，您始终可以使用父类`.well`，但您可以随意应用不同的属性。

# c# - 如何结束 Skype 中的通话

> ID：12594673
> 
> 赞同：0
> 
> 时间：2012-09-26T04:41:48.957
> 
> 标签：c#, skype

我正在使用 Skype API 进行视频通话。现在我有一个按钮可以结束通话。我在按钮单击时编写了以下代码：

```
if (skype.ActiveCalls.Count > 0)
{
    skype.ActiveCalls[0].Finish();

    //conference calls
    //for (int i = 0; i < skype.ActiveCalls.Count; i++)
    //{
        //if (skype.ActiveCalls[i + 1].ConferenceId > 0)
        //{
            //skype.ActiveCalls[i + 1].Finish();
            //call = skype.;
        //}
    //}
} 
```

但它抛出异常：

> 值不在预期范围内。

如何结束正在进行的通话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:49:25.073

好吧，我从注释代码中猜测

```
//conference calls 
//for (int i = 0; i < skype.ActiveCalls.Count; i++) 
//{ 
    //if (skype.ActiveCalls[i + 1].ConferenceId > 0) 
    //{ 
        //skype.ActiveCalls[i + 1].Finish(); 
        //call = skype.; 
    //} 
//} 
```

是 ActiveCalls 数组不是从零开始的，而是从 1 开始，

所以你应该改变

`skype.ActiveCalls[0].Finish();`

至

```
skype.ActiveCalls[1].Finish(); 
```

猜猜看

# android - cocos2d-x：线程

> ID：12594674
> 
> 赞同：0
> 
> 时间：2012-09-26T04:41:51.210
> 
> 标签：android, cocos2d-x

`cocos2d-x`我遇到一个小问题：我需要在 Android 上使用异步任务。

```
private void parseJSONJava() throws ClientProtocolException, IOException, JSONException
{
    STAJSONParser jPars = new STAJSONParser();
    jPars.makeHttpRequest(String.format("%s/app/%s/json",STA_URL,STA_APP_UID)); 
} 
```

但是此代码使应用程序崩溃并出现错误`Can't create handler inside thread that has not called Looper.prepare()`。我通过添加来解决这个问题`runOnUiThread`：

```
me.runOnUiThread(new Runnable(){
public void run(){
    STAJSONParser jPars = new STAJSONParser();
    jPars.makeHttpRequest(String.format("%s/app/%s/json",STA_URL,STA_APP_UID)); 
}
}); 
```

“我”是我的活动。代码来自`STAJSONParser`：

```
public JSONObject makeHttpRequest(String url) {
AsyncGetJson Task= new AsyncGetJson(url);
try {
     return Task.execute().get();
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    return null;
 } catch (ExecutionException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    return null;
 } 
```

`AsyncGetJson`任务它是一个从服务器获取 JSON 的简单 AsyncTask。所以，我的问题是：这个解决方案是对还是错？或者你可以给我其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:54:41.427

我不明白你为什么不能这样做。您还可以使用像 m.ding 提到的 libcurl，以及 pthreads 和 json 解析器。但问题是您需要自己管理 pthread。它比你现在做的方式“更混乱”。再说一次，使用 JNI 也不是很漂亮。这是一个巨大的权衡，可能倾向于 JNI 和 Android Java SDK。

在 iOS 和 Android 上，pthread 是底层线程机制，当您使用 iOS 的 NSOperation 和 Android 的 AsyncTask 之类的东西时，它已经为您管理好了（我假设..）

# iis-7 - 由于线程退出或应用程序，I/O 操作已中止

> ID：12594675
> 
> 赞同：1
> 
> 时间：2012-09-26T04:41:55.170
> 
> 标签：iis-7

嗨，任何人都可以帮助我访问 IIS 7。

我们在访问我们的网址时收到以下失败消息。

1.  -MODULE_SET_RESPONSE_ERROR_STATUS

模块名称 IIS Web 核心

通知 1

HttpStatus 500

HttpReason 内部服务器错误

HttpSubStatus 0

错误代码 2147943395

配置异常信息

通知 BEGIN_REQUEST 错误代码

由于线程退出或应用程序请求，I/O 操作已中止。(0x800703e3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:06:44.783

运行 IIS 的服务器上可能存在问题。您必须在 IIS7 的应用程序池中设置正确的 .NET 版本，还要检查您是否需要在 32 位模式下运行应用程序池。此外，您还需要为应用程序池标识（在大多数情况下为 NetworkService）设置正确的应用程序池权限。如果您的应用程序在 SSL 模式下运行，请确保您已在 web.config 中进行了配置。

# java - 相机预览叠加到Android应用程序中的灰度效果

> ID：12594678
> 
> 赞同：2
> 
> 时间：2012-09-26T04:42:45.340
> 
> 标签：java, android, android-camera

我想将相机预览更改为灰度效果。如何做到这一点？我正在尝试，但无法从以下代码中获得任何输出：

```
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) {
        super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

        if (resultCode == RESULT_OK) {
            Uri selectedImage = imageReturnedIntent.getData();
            basefile = preview.file;
            getRealPathFromURI(selectedImage);
            try {
                loadBaseImage(getBitmapFromURI(selectedImage));
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        try {
            preview.startCamera();
        } catch (Exception e) {
            toast("Ops!" + e.getMessage());
            e.printStackTrace();
        }
    }

    private void loadBaseImage(Bitmap bmp ) {
        try {
            photoBase.setBitmap(bmp);
            photoBase.selectedPicture();
        } catch (Exception e) {
            toast("Ops!" + e.getMessage());
            e.printStackTrace();
        }
    }

    public Bitmap getBitmapFromString(String src)
            throws FileNotFoundException {
        Uri uri = Uri.fromFile(new File(src));
        return getBitmapFromURI(uri);
    }
        public Bitmap getBitmapFromURI(Uri uri )
        throws FileNotFoundException {
        InputStream imageStream = getContentResolver().openInputStream(uri);
        Bitmap bmp = BitmapFactory.decodeStream(imageStream);
        return bmp;
    }

    public Toast getToast(String dados, int duration) {
        return Toast.makeText(this, dados, duration);
    }

    public void toast(String dados) {
        final Toast t = getToast(dados, Toast.LENGTH_LONG);
        t.setGravity(Gravity.CENTER, 0, 0);
        t.show();
    }
    private void setFullBrightness() {  
        WindowManager.LayoutParams layout = getWindow().getAttributes();
        layout.screenBrightness = 1F;
        getWindow().setAttributes(layout);
    }

    private String getSdcardCameraOverlay() {
        return PreferenceManager.getDefaultSharedPreferences(getApplicationContext()).getString("camera_overlay_directory", "/sdcard/CameraOverlay/");
    }
} 
```

# javascript - 如何在 html 5“数据”属性中强制使用字符串值

> ID：12594683
> 
> 赞同：10
> 
> 时间：2012-09-26T04:43:09.147
> 
> 标签：javascript, jquery, html

在 js 中访问 html 5 数据属性时如何强制输入文本值？

我有一个具有类似 html 行的全球应用程序：

```
<div class="slider" data-max="125" data-cost="10000" data-costtext="10.000"> 
```

这 '。' 文本中的成本值对于某些语言是准确的。通过 jQuery js 访问该值时

```
$("div.slider","body").data("costtext") 
```

你会回来`10`的。

重写是我唯一的选择吗？，像这样：

```
<div class="slider" data-obj='{"max":125,"cost":10000,"costtext":"10.000"}'> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T04:45:13.360

用于`attr("data-x")`访问该值，您将拥有一个`String`.

jQuery 尝试推断类型并`String`在您使用`data()`.

> 每次尝试都将字符串转换为 JavaScript 值（这包括布尔值、数字、对象、数组和 null），否则将其保留为字符串。要将值的属性作为字符串检索而不进行任何转换，请使用该[`attr()`](http://api.jquery.com/attr/)方法。

[来源](http://api.jquery.com/data/#data-html5)。

# wpf - 如何计算 OpenXML 中形状的位置和大小以在 WPF 中显示，就像在 PPTx 中一样

> ID：12594689
> 
> 赞同：3
> 
> 时间：2012-09-26T04:44:44.967
> 
> 标签：wpf, openxml

我在 PPTx 中有一个简单的形状

我看到并得到了它在 Openxml 中的位置

```
 <a:xfrm>
 <a:off x="1447800" y="1066800" />
  <a:ext cx="3886200" cy="990600" />
</a:xfrm> 
```

我得到了这个值

但我不知道如何在 Open xml 中获取形状的高度和坐标（左、上），以便在 wpf 中显示相同的高度和位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T18:31:30.173

将这些值除以 12700 以获得点值（WPF 使用的）。所以它会是：

*   **x = 114** (a:off@x = 1447800/12700)
*   **y = 84** (a:off@y = 1066800/12700)
*   **宽度 = 306** (a:ext@cx = 3886200/12700)
*   **高度 = 78** (a:ext@cy = 990600/12700)

# powerbuilder - Powerbuilder 12.5 数据库配置文件设置

> ID：12594695
> 
> 赞同：0
> 
> 时间：2012-09-26T04:45:25.170
> 
> 标签：powerbuilder

我是 powerbuilder 12.5 的新手。当我尝试设置数据库配置文件时，数据源列宽足够小以适合我们的数据库服务器名称。我们在 powerbuilder 10.0 中遇到了这个问题。但是在安装补丁 PB 10.2 之后，我们可以输入完整的服务器名称。目前，我将服务器名称替换为 ip_address 和端口名称，用于临时连接到 db。

此外，当我打开工作空间的属性来配置源代码管理时，powerbuilder 不断崩溃。

提前感谢您的帮助。

苏库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:37:49.233

您可以解决长服务器名称，即导出数据库配置文件（工具\数据库配置文件）。它会生成一个这样的 ini 文件（文本文件）：

```
[DBMS_PROFILES]

Profiles=TestProfile

[Profile QS]
DBMS=OLE DB
Database=
UserId=
DatabasePassword=
LogId=TestUser
LogPassword=
ServerName=
DBParm=PROVIDER='SQLOLEDB',DATASOURCE='MyVeryLongServerName\MyVeryLongInstanceName_MayTheForceBeWithYou_ALWAYS',PROVIDERSTRING='database=StarWarsDB'
Lock=
Prompt=FALSE
AutoCommit=FALSE
NewLogic=EAS 
```

您应该在 DATASOURCE 之后看到您的数据库 IP 地址。只需编辑此文件（更改您的数据库名称的 IP）。在此之后，您可以导入数据库配置文件。我希望它有帮助:)

加博尔兄弟

# ruby-on-rails - 如何运行特定版本的 rake

> ID：12594698
> 
> 赞同：3
> 
> 时间：2012-09-26T04:45:45.120
> 
> 标签：ruby-on-rails

背景：

*   每当我在旧项目中运行 rake 时，我都会遇到错误。（未初始化的常量 Rake::DSL）。
*   有问题的 rails 项目是一个从 Rails 2.1 开始的旧项目（我认为），从那时起，我已经更新了笔记本电脑上的操作系统几次，并在此过程中进行了更新以使其运行。
*   现在，只要我将 RAILS_GEM_VERSION 设置为 2.3.5，rails 应用程序就可以正常工作。我不确定该应用程序是否已*完全*更新到 Rails 2.3.5。
*   我的旧项目中没有 Gemfile。
*   如果我创建一个全新的 rails 项目（并取消设置 RAILS_GEM_VERSION），rake 运行良好。

我的问题：为了排除故障，我想尝试更新版本的 rake。我想知道如何强制使用一个特定版本，因为我似乎安装了多个版本。

关于我的环境的信息：

```
$ gem list rake

*** LOCAL GEMS ***

rake (0.9.2.2, 0.9.2, 0.8.7, 0.8.3)

$ rake --version
rake, version 0.8.7 
```

所以看起来它正在接受 0.8.7 版本。

网上的所有帮助文件似乎都告诉我在 Gemfile 中指定 rake 版本，但这个项目中没有。（也许它早于 gemfiles？）

如果我完全取消设置 RAILS_GEM_ENVIRONMENT 变量，并尝试运行 rake，我会得到：

```
rake aborted!
can't activate rails (= 2.3.5, runtime) for [], already activated rails-3.2.8 for [] 
```

我的旧项目中的任何环境配置文件都没有设置该变量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T01:27:27.640

[这可能会有所帮助。](https://stackoverflow.com/questions/6243304/use-older-version-of-rake)您是否尝试过下划线解决方案？

例子：

```
rake _0.9.2_ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:24:39.143

您可以使用此运行 rake 特定版本

捆绑执行耙...

更多详细信息请参见 - [bundle exec](http://gembundler.com/man/bundle-exec.1.html) , [rake](http://rake.rubyforge.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T21:11:29.237

您可以使用类似于以下的命令卸载当前版本的*rake并安装另一个所需版本：*

```
gem uninstall rake 12.3.1
gem install rake 10.5.0 
```

（注意：您可能需要以 sudo 身份运行以获得权限）

我在尝试安装 rake 10.5.0 时收到以下错误时遇到问题：

```
Could not find a valid gem '0.8.7' (>= 0) in any repository 
```

我通过将以下行添加到我的*Gemfile*解决了这个问题：

```
gem 'rake', ' <11.0' 
```

编辑*Gemfile*后，我可以通过更新我的 gem来成功降级*rake ：*

```
bundle update 
```

# windows - 创建 .bat 文件以清除 apache 日志

> ID：12594699
> 
> 赞同：1
> 
> 时间：2012-09-26T04:45:45.997
> 
> 标签：windows, batch-file

我想创建一个批处理文件来清除我的 Apache 错误日志文件，因为它们会很快变大。我尝试使用以下脚本：

```
@echo off
type NUL > C:\Program Files\Apache Software Foundation\Apache2.2\logs\access.log
type NUL > C:\Program Files\Apache Software Foundation\Apache2.2\logs\error.log 
```

不幸的是，这个脚本不起作用。我正在使用 Windows 7。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T04:47:39.043

不起作用 - Apache 始终保持日志文件打开。您必须停止 Apache，然后截断并重新启动 Apache。另一种选择是使用[日志旋转](http://httpd.apache.org/docs/current/logs.html#rotation)器自动为您执行此操作。

# c# - 如何从网络服务器响应 json 并且不将它们显示到 Webform 上的网页上

> ID：12594700
> 
> 赞同：1
> 
> 时间：2012-09-26T04:45:45.327
> 
> 标签：c#, asp.net, asp.net-ajax

我有一个返回 json 字符串的 api。一个 ashx 文件

```
 public void ProcessRequest (HttpContext context)
    {
        context.Response.ContentType = "application/json";
        context.Response.ContentEncoding = System.Text.Encoding.UTF8;
        string result = string.Empty;
        result = "{\"status\": \"OK\"}";
        context.Response.Write(result);
     } 
```

我想在网页响应中隐藏字符串 {"status": "OK"} 并且客户端可以获得此字符串。

谢谢。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:36:35.630

将字符串获取到客户端代码后，您可以将其转换为 javascript 对象，删除您不想要的属性并再次字符串化以显示它。

您也可以使用字符串操作方法去除您不想要的文本，但我认为第一种方法更优雅。

# java - 如何使用 BorderLayout 将两个具有首选大小的标签添加到面板？

> ID：12594702
> 
> 赞同：2
> 
> 时间：2012-09-26T04:46:06.137
> 
> 标签：java, swing, layout, jlabel, border-layout

我正在尝试将标签添加到面板的北部和南部，并将面板添加到框架的中心。如果我不自己指定标签的大小，程序是完美的，但是当我给它们特定的尺寸时：

```
label.setPreferredSize(di);
label2.setPreferredSize(di); 
```

它变得一团糟！但是面板和框架的尺寸更大，有`(100,100)`什么想法吗？

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;

import javax.swing.JFrame;

public class BorderLayoutDemo2 {

    public static void main(String args[])
    {
        Frame frame = new Frame();
    }
}

class Frame extends JFrame
{

    private static final long serialVersionUID = 1L;

    public Frame(){
        setSize(500,500);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Dimension di = new Dimension(50,50);
        Dimension dim = new Dimension(200,200);

        JPanel panel = new JPanel();
        panel.setPreferredSize(dim);

        JLabel label = new JLabel("Here is my label");
        JLabel label2 = new JLabel("Here is my label2");

        JMenuBar menu = new JMenuBar();
        JMenu setting = new JMenu("Setting");
        JMenuItem exit = new JMenuItem("Exit");
        JMenuItem add = new JMenuItem("Add");
        setting.add(add);
        setting.add(exit);
        menu.add(setting);

        label.setPreferredSize(di);
        label2.setPreferredSize(di);

        panel.add(label,BorderLayout.NORTH);
        panel.add(label2,BorderLayout.SOUTH);

        add(menu,BorderLayout.NORTH);
        add(panel,BorderLayout.CENTER);

        pack();
        setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:50:42.797

您假设面板的布局是`BorderLayout`在您添加组件时，即：`panel.add(label,BorderLayout.NORTH);`. 但是您没有设置[默认](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html#JPanel%28%29)的布局和`JPanel`用途。你可以像这样修复它：`FlowLayout`

```
JPanel panel = new JPanel(new BorderLayout()); 
```

# linux - 使用 Eclipse 和 CMake 在 linux 下 boost::thread 的链接器问题

> ID：12594704
> 
> 赞同：0
> 
> 时间：2012-09-26T04:46:19.223
> 
> 标签：linux, eclipse, cmake, boost-thread

我正在尝试将一些代码从 PC 移植到 Ubuntu，由于在 linux 下开发的经验有限，我遇到了一些问题。

我们使用 CMake 来生成我们所有的构建内容。在 windows 下我正在制作 VS2010 项目，在 Linux 下我正在制作 Eclipse 项目。我已经成功地移植了我的 OpenCV 内容，但是在移植我的线程增强应用程序时遇到了很大的麻烦。

我们很清楚，到目前为止我在干净的 Ubuntu 12 安装上所遵循的步骤。（我已经完成了 2 次干净的重新安装以尝试修复潜在的库故障，现在我只是放弃并询问）：

*   使用我的包管理器安装 Eclipse 和 Eclipse CDT
*   使用我的包管理器安装 CMake 和 CMake Gui
*   使用我的包管理器安装 libboost-all-dev

到目前为止，这就是我所做的一切。我可以使用 CMake 毫无错误地创建 eclipse 项目，因此 CMake 成功找到了我的 boost 安装。当我尝试通过 Eclipse 构建时，就会遇到问题；我正在尝试构建的应用程序将 boost::asio 用于某些 UDP I/O，并使用 boost::thread 为 asio I/O 服务创建工作线程。我可以成功编译每个模块，但是当我开始链接时，我会收到诸如以下错误的垃圾邮件：

```
/usr/bin/c++       CMakeFiles/RE05DevelopmentDemo.dir/main.cpp.o CMakeFiles/RE05DevelopmentDemo.dir/RE05FusionListener/RE05FusionListener.cpp.o CMakeFiles/RE05DevelopmentDemo.dir/NewEye/NewEye.cpp.o  -o RE05DevelopmentDemo -rdynamic -Wl,-Bstatic -lboost_system-mt -lboost_date_time-mt -lboost_regex-mt -lboost_thread-mt -Wl,-Bdynamic 
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libboost_thread-mt.a(thread.o): In function `void boost::call_once<void (*)()>(boost::once_flag&, void (*)()) [clone .constprop.98]':
make[2]: Leaving directory `/home/david/Code/Build/Support/RE05DevDemo'
(.text+0xc8): undefined reference to `pthread_key_create'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libboost_thread-mt.a(thread.o): In function `boost::this_thread::interruption_enabled()':
(.text+0x540): undefined reference to `pthread_getspecific'
make[1]: Leaving directory `/home/david/Code/Build/Support/RE05DevDemo'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libboost_thread-mt.a(thread.o): In function `boost::this_thread::disable_interruption::disable_interruption()':
(.text+0x570): undefined reference to `pthread_getspecific'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libboost_thread-mt.a(thread.o): In   function `boost::this_thread::disable_interruption::disable_interruption()':
(.text+0x59f): undefined reference to `pthread_getspecific' 
```

我从其他 StackOverflow 帖子中收集并已经检查过的一些问题：

*   升压库都存在于 /usr/lib
*   由于无法找到 boost 标头，我没有收到任何编译错误，因此必须找到它们。
*   我正在尝试静态链接，但我相信 eclipse 应该传递正确的参数来实现这一点，因为我的 CMakeLists.txt 包括`SET(Boost_USE_STATIC_LIBS ON)`

我在这里正式没有想法，我尝试过在本地构建 boost 和一堆其他的东西，但没有更多的成功。我什至重新安装了 Ubuntu，以确保我没有完全破坏 libs 目录和与多个奇怪版本或其他任何东西的链接。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T03:33:40.330

正确的机制是使用 Threads 包：

```
find_package(Threads)
#...
target_link_libraries(my_app ${CMAKE_THREAD_LIBS_INIT} ...) 
```

另请参阅[cmake 和 libpthread](https://stackoverflow.com/questions/1620918/cmake-and-libpthread)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:35:19.530

当您构建目标时，添加`-lpthread`它会编译。

请参阅[其他线程](https://stackoverflow.com/questions/7624610/compile-boost-program)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:27:46.337

好的，所以我找到了解决方案。

这与链接命令中缺少 -lpthread 标志有关。为了让 CMake 正确链接，需要编辑 TARGET_LINK_LIBRARIES 行。我的编辑是：

原来的：

```
TARGET_LINK_LIBRARIES( RE05DevelopmentDemo ${Boost_LIBRARIES} ) 
```

修改和工作：

```
IF(WIN32)
  TARGET_LINK_LIBRARIES( RE05DevelopmentDemo ${Boost_LIBRARIES} )
ELSE(WIN32)
  TARGET_LINK_LIBRARIES( RE05DevelopmentDemo ${Boost_LIBRARIES} pthread )
ENDIF(WIN32) 
```

我猜我可能应该将其更改`ELSE(WIN32)`为 elseif for 或使用 CMake 命令`FindThreads`在需要时链接到 pthread，但我目前不确定如何执行此操作，并且我的盘子上有更多重要的事情给时间我迷路了。有趣的是，我注意到我的链接命令现在`-lpthread`在末尾附加了两个标志，一个接一个，但一切仍然很愉快地编译。

# node.js - 使用猫鼬引用是个好主意吗？

> ID：12594705
> 
> 赞同：1
> 
> 时间：2012-09-26T04:46:32.213
> 
> 标签：node.js, mongodb, mongoose

这与 MongoDB 和 Node.js Mongoose 库有关。

我正在处理一种情况，即来自一个模式的大量数据需要在另一个模式中复制。我需要单独加载该数据或使用引用，因为数据需要是最新的（也就是经常更改）。这些频繁的更改使嵌入文档变得不切实际。

如果我要在一个对象中得到 5-10 个引用（并非总是如此，这可能是一个中高数字），​​这是一个坏主意吗？

如果这是一个坏主意，最好用另一个查询或一组查询分别查询每个所需的子文档？

更重要的是，我将把它们放在内存缓存后面，这样它就不会不断地重新加载。仅当缓存过期或文档更改时才会触摸它。

你的想法和经历？

**根据一些请求，这里有一个示例和更多信息**：

```
var postSchema = new Schema({
    postType: String,
    created: {type: Date, default: Date.now},
    event: {type: Schema.Types.ObjectId, ref:'Event'},
    ...
}); 
```

在这种情况下，几乎每次都会加载事件。在大多数其他情况下，它只会有条件地加载。

为了回答规模的问题，这将是相当大量的使用。可能更接近数百万而不是数百。

告诉我，将事件对象缓存在redis（我们的缓存目标）中会更好吗，然后从那里调用它后加载，如果它不在缓存中，做一个单独的查询？我认为这可能是比参考更好的课程。同意？不同意？

# ruby-on-rails-3 - ROR -- 购物车中的 NoMethodError #show -- 私有方法错误

> ID：12594709
> 
> 赞同：0
> 
> 时间：2012-09-26T04:46:51.910
> 
> 标签：ruby-on-rails-3, private, nomethoderror

我目前正在关注《敏捷 Web 开发》一书（Rails 3），并且遇到了私有方法错误。经过数小时的研究，我无法找到解决方案。

以下是我正在使用的代码，并发现给出问题的字符串是：

```
<td class="item_price"><%= number_to_currency(item.total_price) %></td> 
```

已经发布了一个类似的问题/解决方案，解决方案是将行项目类放在私有之上，但是，行项目类不是私有的。

任何帮助，将不胜感激。

代码

```
<% if notice %>
<p id="notice"><%= notice %></p>
<% end %>

<!-- START_HIGHLIGHT -->
<h2>Your Cart</h2>
<table>
<!-- END_HIGHLIGHT -->
  <% @cart.line_items.each do |item| %>
<!-- START_HIGHLIGHT -->
    <tr>
      <td><%= item.quantity %>&times;</td>
      <td><%= item.product.title %></td>
      <td class="item_price"><%= number_to_currency(item.total_price) %></td>
    </tr>
<!-- END_HIGHLIGHT -->
  <% end %>
 <!-- START_HIGHLIGHT -->
  <tr class="total_line">
    <td colspan="2">Total</td>
    <td class="total_cell"><%= number_to_currency(@cart.total_price) %></td>
  </tr>
<!-- END_HIGHLIGHT -->
<!-- START_HIGHLIGHT -->
</table>
<!-- END_HIGHLIGHT -->

<%= button_to 'Empty cart', @cart, method: :delete,
     data: { confirm: 'Are you sure?' } %> 
```

错误

```
private method `total_price' called for #<LineItem 
```

line_item 模型

```
class LineItem < ActiveRecord::Base
  belongs_to :product
  belongs_to :cart
  attr_accessible :cart_id, :product_id
end

def total_price
    product.price * quantity
end 
```

推车模型

```
class Cart < ActiveRecord::Base
  has_many :line_items, dependent: :destroy

  def add_product(product_id)
    current_item = line_items.find_by_product_id(product_id)
    if current_item
      current_item.quantity += 1
    else
      current_item = line_items.build(product_id: product_id)
    end
     current_item
  end

  def total_price
     line_items.to_a.sum { |item| item.total_price }
   end
end 
```

订单项控制器

```
class LineItemsController < ApplicationController
  # GET /line_items
  # GET /line_items.json
   def index
     @line_items = LineItem.all

     respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @line_items }
    end
  end

  # GET /line_items/1
  # GET /line_items/1.json
  def show
    @line_item = LineItem.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @line_item }
    end
  end

   # GET /line_items/new
   # GET /line_items/new.json
  def new
     @line_item = LineItem.new

    respond_to do |format|
       format.html # new.html.erb
       format.json { render json: @line_item }
     end
   end

   # GET /line_items/1/edit
   def edit
     @line_item = LineItem.find(params[:id])
   end

  # POST /line_items
  # POST /line_items.json
   def create
    @cart = current_cart
    product = Product.find(params[:product_id])
    @line_item = @cart.add_product(product.id)
    @line_item.product = product

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to @line_item.cart,
           notice: 'Line item was successfully created.' }
        format.json { render json: @line_item,
          status: :created, location: @line_item }
      else
         format.html { render action: "new" }
         format.json { render json: @line_item.errors,
         status: :unprocessable_entity }
      end
    end
  end

   # PUT /line_items/1
   # PUT /line_items/1.json
   def update
    @line_item = LineItem.find(params[:id])

    respond_to do |format|
      if @line_item.update_attributes(params[:line_item])
        format.html { redirect_to @line_item, notice: 'Line item was successfully updated.' }
        format.json { head :no_content }
      else
         format.html { render action: "edit" }
         format.json { render json: @line_item.errors, status: :unprocessable_entity }
      end
     end
   end

  # DELETE /line_items/1
  # DELETE /line_items/1.json
  def destroy
    @line_item = LineItem.find(params[:id])
    @line_item.destroy

    respond_to do |format|
      format.html { redirect_to line_items_url }
      format.json { head :no_content }
    end
   end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:56:03.467

您是说这`@cart.total_price`给出了错误，但您的错误表明它正在`LineItem`模型中查找此函数。这可能意味着您也必须在模型中有一个`total_price`方法。`LineItem`你有吗？是的，正如其他人所说，最好在您的帖子中添加您的控制器和模型代码。

***编辑：***

根据您在帖子中的更新，是的，该`total_price`方法应该在您的班级中。这能解决问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:41:05.240

在您的`LineItem`模型`total_price`中是在类之外定义的`LineItem`。所以应该是：

```
class LineItem < ActiveRecord::Base
  belongs_to :product
  belongs_to :cart
  attr_accessible :cart_id, :product_id

  def total_price
    product.price * quantity
  end
end 
```

# event-handling - 事件是否建立在投票之上？

> ID：12594714
> 
> 赞同：2
> 
> 时间：2012-09-26T04:47:31.543
> 
> 标签：event-handling

事件是当您单击某物时，代码会立即运行

轮询是应用程序不断检查您的鼠标按钮是否被按住，如果它在某个位置被按住，则运行代码

事件是否真的存在于计算中，或者这一切都是建立在轮询之上的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T04:58:55.243

这是一个复杂的问题，答案取决于您（在抽象层中）回答它的深度。最终，您的 USB 键盘设备每毫秒会被计算机轮询一次，以询问正在按下哪些键。当 USB 设备（在计算机中）从键盘获取数据包时，此信息通过 CPU 中断传递给键盘驱动程序。从那时起，中断用于将数据从一个进程传递到另一个进程（通过 GUI 框架）并最终到达您的应用程序。

正如 Marc Cohen 在他的回答中所说，CPU 中断也会引发 I/O 完成信号。这是一个在您到达硬件级别之前没有轮询的示例，在硬件级别执行检查（可能每个时钟周期一次？具有计算机架构经验的人应该回答）以查看事件是否发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T04:53:46.560

这是一种通过轮询来模拟事件的常用技术，但这通常效率很低，并导致您在事件解析和轮询开销之间进行权衡，但这并不意味着不存在真正的事件。

CPU 中断可以引发外部事件，如 I/O 完成，是硬件层的一个事件示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:01:47.360

好吧，操作系统和应用程序级别都依赖于事件而不是轮询。在无法维持状态的情况下，通常可以进行轮询。然而，在桌面应用程序和操作系统级别，应用程序具有状态；因此，他们将事件用于他们的流程，而不是轮询。

# qt - 如何在 Qt 小部件中保持按钮彼此靠近（水平）？

> ID：12594729
> 
> 赞同：1
> 
> 时间：2012-09-26T04:49:18.553
> 
> 标签：qt, widget, qpushbutton

```
 QGridLayout *layout = new QGridLayout ();
    centralWidget->setLayout (layout);
    layout->addWidget (refresh, 0, 0);
    layout->addWidget (zoomIn, 1, 0);
    layout->addWidget (zoomOut, 1, 1);
    layout->addWidget (panLeft, 2, 0);
    layout->addWidget (panRight, 2, 1);
    layout->addWidget (panTop, 3, 0);
    layout->addWidget (panBottom, 3, 1);
    layout->addWidget (findInfo, 4, 0);
    layout->addWidget (textEdit, 5, 0);

    window->setCentralWidget (centralWidget); 
```

![在此处输入图像描述](../Images/a42e59e5679b14e83d85c622c13709bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:03:45.000

我认为我们需要更多的背景信息。我获取了您的代码并将其包装到以下完整的示例应用程序中：

```
#include <QGridLayout>
#include <QPushButton>
#include <QTextEdit>
#include <QApplication>
#include <QMainWindow>

int main(int argc, char ** argv) {
    QApplication app( argc, argv );
    QMainWindow win;

    QWidget* centralWidget = new QWidget(&win);
    QPushButton* refresh = new QPushButton("Start R");
    QPushButton* zoomIn = new QPushButton("Zoom in");
    QPushButton* zoomOut = new QPushButton("Zoom out");
    QPushButton* panLeft = new QPushButton("Left");
    QPushButton* panRight = new QPushButton("Right");
    QPushButton* panTop = new QPushButton("Top");
    QPushButton* panBottom = new QPushButton("Bottom");
    QPushButton* findInfo = new QPushButton("Find Info");
    QTextEdit* textEdit = new QTextEdit("Vehicle Info. Will be shown here.");

///////////////////////////// Your Code
    QGridLayout *layout = new QGridLayout ();
    centralWidget->setLayout (layout);
    layout->addWidget (refresh, 0, 0);
    layout->addWidget (zoomIn, 1, 0);
    layout->addWidget (zoomOut, 1, 1);
    layout->addWidget (panLeft, 2, 0);
    layout->addWidget (panRight, 2, 1);
    layout->addWidget (panTop, 3, 0);
    layout->addWidget (panBottom, 3, 1);
    layout->addWidget (findInfo, 4, 0);
    layout->addWidget (textEdit, 5, 0);

    window->setCentralWidget (centralWidget);
///////////////////////////// End your code

    win.show();
    app.connect( &app, SIGNAL( lastWindowClosed() ), &app, SLOT( quit() ) );
    return app.exec();
} 
```

这导致以下布局：

![截屏](../Images/79680ff7ac1e9b192c784fcdd08282fe.png)

**看起来您在按钮上添加了一些大小限制，因为它们在您的屏幕截图中都具有相同的大小（除了“开始”按钮）。**

# html - HTML 占位符

> ID：12594736
> 
> 赞同：0
> 
> 时间：2012-09-26T04:49:58.287
> 
> 标签：html

我使用占位符属性为用户提供所需的输入信息。

1.  有没有不兼容的浏览器？
2.  当我在文本框中聚焦时如何删除占位符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:51:18.150

1.  [许多较旧的浏览器](http://caniuse.com/#feat=input-placeholder)。
2.  虽然你可以使用 JavaScript，**但不要那样做**。如果有人点击它，他们不知道他们应该输入什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:51:11.990

> 有没有不兼容的浏览器？

很多，但`placeholder`旨在提供提示（例如示例）而不是替代真实的`<label>`，如果您正确使用它，这应该不是问题。

> 当我在文本框中聚焦时如何删除占位符？

相信浏览器会这样做。

如果浏览器不支持`placeholder`，它将不会首先呈现文本。

# objective-c - NSDictionary 到 NSString 转换问题

> ID：12594740
> 
> 赞同：0
> 
> 时间：2012-09-26T04:50:17.050
> 
> 标签：objective-c, nsstring, type-conversion, nsdictionary

这段代码有什么问题？

这样可行：

```
NSDictionary* fact = [facts objectAtIndex:currentFactId];
[myTextView setText:[fact objectForKey:@"fact"]]; 
```

这不起作用：

```
NSDictionary* fact = [facts objectAtIndex:currentFactId];
NSString *fact_string = [fact objectForKey:@"fact"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:52:41.547

那应该可以，但还是试试这个

```
NSString *fact_string = [NSString stringWithFormat:@"%@",[fact objectForKey:@"fact"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:11:12.577

认为 objectForKey 并不能确保您将返回 NSString。由于您正在分配它的值，因此您需要像 Neo 所说的那样封装它。如果没有封装或至少转换为（NSString *），我不会进行设置和分配。

# sql-server - 无法使用实体框架连接到数据库

> ID：12594743
> 
> 赞同：0
> 
> 时间：2012-09-26T04:50:32.020
> 
> 标签：sql-server, asp.net-mvc, entity-framework, entity-framework-4, database-connection

每次我全新安装 Windows、Visual Studio 和 Sql Server 时，我总是在让应用程序连接到 Sql Server 的本地实例时遇到问题。

我正在尝试首先使用实体​​框架代码启动应用程序。这是我的连接字符串。

```
<add name="KCSoccerDataContext" 
     connectionString="Data Source=.\MSSQLSERVER;Initial Catalog=KCSoccer;Integrated Security=SSPI" 
     providerName="System.Data.SqlClient" /> 
```

我可以使用 Sql Server Management Studio 连接到数据库实例，但似乎无法使用此连接字符串进行连接。我假设问题与数据库实例的配置方式有关。

我得到的错误是

> {“提供者没有返回 ProviderManifestToken 字符串。”}

我不确定这意味着什么或从这里去哪里。

任何人都可以为此提供的任何帮助都很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:28:32.550

仅使用此连接字符串：

```
<add name="KCSoccerDataContext" 
     connectionString="Data Source=.;Initial Catalog=KCSoccer;Integrated Security=SSPI" 
     providerName="System.Data.SqlClient" /> 
```

`MSSQLSERVER`是默认实例的名称。它不用于连接字符串。如果您尝试使用它，它甚至无法在 Management Studio 中使用。只有自定义实例的名称必须使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:06:47.843

您可能没有为 SQL Server 启用远程连接，因为它是全新安装。[在此处](http://support.microsoft.com/kb/914277#method1)或[此处](http://blogs.msdn.com/b/sqlexpress/archive/2005/05/05/415084.aspx)遵循第一个解决方案。

# django - 配置 Django-oauth-plus 时出错

> ID：12594745
> 
> 赞同：3
> 
> 时间：2012-09-26T04:50:46.067
> 
> 标签：django, api, authentication, oauth-2.0, oauth-provider

当我尝试[文档](http://code.larlet.fr/django-oauth-plus/wiki/Home)中的示例时出现**400 错误**

```
settings.py
INSTALLED_APPS = (
'oauth_provider',
'django.contrib.auth',
)

OAUTH_SIGNATURE_METHODS = ['hmac-sha1',] 
```

当我这样做时

```
>>> from oauth_provider.models import Resource, Consumer
>>> resource = Resource(name='photos', url='/oauth/photo/')
>>> resource.save()
>>> CONSUMER_KEY = 'dpf43f3p2l4k3l03'
>>> CONSUMER_SECRET = 'kd94hf93k423kf44'
>>> consumer = Consumer(key=CONSUMER_KEY, secret=CONSUMER_SECRET,
...                     name='http://127.0.0.1:9000', user=jane)
>>> consumer.save()

>>> from django.test.client import Client
>>> c = Client()

>>> import time
>>> parameters = {
...     'oauth_consumer_key': CONSUMER_KEY,
...     'oauth_signature_method': 'PLAINTEXT',
...     'oauth_signature': '%s&' % CONSUMER_SECRET,
...     'oauth_timestamp': str(int(time.time())),
...     'oauth_nonce': 'requestnonce',
...     'oauth_version': '1.0',
...     'oauth_callback': 'http://127.0.0.1:9000/request_token_ready',
...     'scope': 'photos', 
... }
>>> response = c.get("/oauth/request_token/", parameters)
>>> response.status_code

    400 
```

我在配置中遗漏了什么吗？我找不到有关如何执行此操作的良好文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T21:32:05.780

我也在同样的问题上苦苦挣扎，然后在[OAuth 的站点](http://oauth.net/code/)**rauth**上尝试了推荐的 Python 库，然后[按照步骤](https://rauth.readthedocs.org/en/latest/api/#oauth-1-0-services)获取`request_token`所需的参数和其他参数。

我注意到它自动使用 HMAC-SHA1 对签名进行编码，我认为这是您想要的，因为`OAUTH_SIGNATURE_METHODS`您在顶部提到了变量。

希望它可以帮助某人。

# .net - 按查询分组 - 不是按功能分组？

> ID：12594755
> 
> 赞同：0
> 
> 时间：2012-09-26T04:52:15.223
> 
> 标签：.net, sql, database, oracle

我有一张这样的桌子

```
column1 column2 column3

abc      xyz      4
def      ghi      3
abc      xyz      6
abc      xyz      1
jkl      mno      4 
```

查询后的预期结果

```
column1 column2 column3

abc      xyz      11
def      ghi      3
jkl      mno      4 
```

我的查询如下：

```
select column1, column2, count(column3)
from
    (select ......) as column1, 
    (select ......) as column2, 
    (select ......) as column3) 
group by column1, column2, count(column3) 
```

我收到此错误“不是单组组功能”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:54:33.777

如何使用 SUM

```
SELECT  column1,
        column2,
        SUM(column3)
FROM    YOUR_TABLE
GROUP BY column1,
        column2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:08:49.483

您需要使用`SUM`并且必须删除`count(column3)`in `group by`，如果您真的从子查询中获得列作为结果，它可能需要看起来像这样：

```
select column1, column2, sum(column3) 
from   (
         select
             (select ......) as column1, 
             (select ......) as column2, 
             (select ......) as column3
           from dual
       )
group by column1, column2 
```

否则您将需要在`group by`. 在您的查询中您说`FROM (select .......) as column1`，但这意味着调用了子查询`column1`，它不起作用。子查询中的选定列可以使用前缀来寻址`column1`。例如，如果您说`FROM (select x from test) t1`then 您可以通过写作来解决 x `t1.x`。

但是，如果您有一个如上所述的简单表格，则正确的陈述是

```
select   column1, column2, sum(column3) from mytable
group by column1, column2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:04:16.250

通过使用简单的查询，你会得到你喜欢的答案

```
 select col1, col2, sum(col3) from test
  group by col1,col2 
```

# ruby-on-rails - 了解“后续”mixin 模块的 `include` 语句行为

> ID：12594760
> 
> 赞同：7
> 
> 时间：2012-09-26T04:53:07.777
> 
> 标签：ruby-on-rails, ruby, module, include

我试图了解`include`在多个 Mixin 中使用时的语句行为。也就是说，我有这些陈述：

```
class Article < ActiveRecord::Base
  include DoubleIncludedModule
  include AModule

  # ...
end

module AModule
  include DoubleIncludedModule

  # ...
end

module DoubleIncludedModule
  # ...
end 
```

`DoubleIncludedModule`课程中会包含多少次`Article`？也就是说，由于`DoubleIncludedModule`（首先在`Article`类中，然后在类本身中`AModule`包含`Article`）的“后续”包含，将是 Ruby 自动处理的“双重包含”问题，还是会`DoubleIncludedModule`（错误地）包含两次？

当然，我只想包含该`DoubleIncludedModule`模块*一次*。我怎样才能以正确的方式做到这一点（也许通过使用一些 Ruby on Rails 方法）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T05:13:02.107

我会用一个例子来回答：

```
module A
  def self.included base
    puts "A included in #{base}"
  end
end

module B
  include A

  def self.included base
    puts "B included in #{base}"
  end
end

class C
  include A
  include B
end

p C.ancestors 
```

印刷

```
A included in B
A included in C
B included in C
[C, B, A, Object, Kernel, BasicObject] 
```

As we can see, `A` is included only once into `C`. Though *technically* it was included twice since it was included into `B` which was also included into `C`. Does this matter? Probably not. Each still only occurs once in the ancestor chain, and any methods would've been overridden with equivalent implementations—i.e., essentially a no-op. Unless you're doing something exotic with the `included` hook, you're unlikely to notice anything.

# c++ - 当我反转我的字符串时，我得到一个数字 2

> ID：12594761
> 
> 赞同：0
> 
> 时间：2012-09-26T04:53:17.507
> 
> 标签：c++, string

我写了这段代码来反转字符串。它工作得很好，但是当我输入像“american beauty”这样的短字符串时，它实际上会打印“ytuaeb nacirema2”。这是我的代码。我想知道在字符串末尾打印随机 2 的代码有什么问题。谢谢

```
// This program prompts the user to enter a string and displays it backwards.

#include <iostream>
#include <cstdlib>
using namespace std;

void printBackwards(char *strPtr); // Function prototype

int main() {
    const int SIZE = 50;
    char userString[SIZE];
    char *strPtr;
    cout << "Please enter a string (up to 49 characters)";
    cin.getline(userString, SIZE);
    printBackwards(userString);

}

//**************************************************************
// Definition of printBackwards. This function receives a      *
// pointer to character and inverts the order of the characters*
// within it.                                                  *
//**************************************************************

void printBackwards(char *strPtr) {
    const int SIZE = 50;
    int length = 0;
    char stringInverted[SIZE];
    int count = 0;
    char *strPtr1 = 0;
    int stringSize;
    int i = 0;
    int sum = 0;

    while (*strPtr != '\0') {
        strPtr++; // Set the pointer at the end of the string.
        sum++; // Add to sum.
    }
    strPtr--;

    // Save the contents of strPtr on stringInverted on inverted order
    while (count < sum) {
        stringInverted[count] = *strPtr;
        strPtr--;
        count++;
    }
    // Add '\0' at the end of stringSize
    stringInverted[count] == '\0';

    cout << stringInverted << endl;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:56:29.753

您的空终止是错误的。您正在使用`==`而不是`=`. 你需要改变：

```
stringInverted[count] == '\0'; 
```

进入

```
stringInverted[count] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:59:10.213

```
// Add '\0' at the end of stringSize
stringInverted[count] == '\0'; 
```

应该`=`在这里使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T05:04:02.183

您的代码有什么问题是您甚至不使用 strlen 来计算字符串的长度，而是使用固定大小的字符串（没有 malloc，或者，gasp new []）或 std::string（这是 C++） ！即使在纯 C 语言中，不使用 strlen 也总是错误的，因为它是针对处理器手动优化的。最糟糕的是，您已经分配了要从堆栈帧返回的字符串（stringInverted），这意味着当函数退出时，指针无效并且任何时候代码“工作”纯属偶然。

要在 c++ 上反转字符串，请执行以下操作：

```
#include <iostream>
#include <string>

int main() {
    std::string s = "asdfasdf";
    std::string reversed (s.rbegin(), s.rend());
    std::cout << reversed << std::endl;
} 
```

要在 C99 中反转字符串，请执行以下操作：

```
char *reverse(const char *string) {
    int length = strlen(string);
    char *rv = (char*)malloc(length + 1);
    char *end = rv + length;
    *end-- = 0;
    for ( ; end >= rv; end --, string ++) {
        *end = *string;
    }
    return rv;
} 
```

并记住在使用后释放返回的指针。到目前为止，所有其他答案都是公然错误的:)

# asp.net - 动态创建的按钮不起作用

> ID：12594762
> 
> 赞同：0
> 
> 时间：2012-09-26T04:53:23.807
> 
> 标签：asp.net, events, button, dynamically-generated

该页面由链接按钮及其方法组成：

```
protected void LinkButton_Click(Object sender, EventArgs e)
  {
        TableRow tr = new TableRow();
        TableCell tc = new TableCell();
        Button b = new Button(); 
        b.Text = "x";
        b.CommandArgument = "someargument";
        b.Click +=new EventHandler(this.b_Click);
        tc.Controls.Add(b);
        tc.Width = 30;
        tr.Controls.Add(tc);
        Table.Rows.Add(tr);
  } 
```

和方法：

```
 protected void b_Click(object sender, EventArgs e)
    {
        ScriptManager.RegisterStartupScript(UpdatePanel1, this.GetType(), "UpdateCom",      "alert('ok');return false;", true);
        string id = (sender as Button).CommandArgument;
        // other operations...

    } 
```

首先通过单击链接按钮，我在表中创建按钮，然后当我单击按钮时，b_Click 方法不起作用。我什至没有看到 javascript 警报，而只是发生了页面更新。

什么是问题？

请注意，如果我在 pageLoad 方法中的 LinkBut​​tonClick 内部进行操作，一切正常，按钮已创建，并且 b_click 在单击此按钮时也可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:36:01.750

为什么需要在按钮单击时动态构建表格？你能不能把它建在页面加载和隐藏它。当按钮单击显示它 - 它可以显示在客户端或服务器端；

我的意思是我什至会把它放在客户端——我不喜欢 asp.net 的事情是回发太多。从字面上看，它是在隐藏字段中发布表单及其数据（如视图状态）并重新呈现整个页面。对我来说似乎效率低下 - 您的 Web 服务器可以做其他事情，例如服务页面请求并将此 UX 处理推迟到客户端浏览器。

```
<table id="testTable" style="display: none">
  <tr>
     <td width="30px">
        <input id="b" name="b" type="button" value="someargument" text="Click Me!" onclick='alert(this.value);document.getElementById("testTable").style.display="none";' />
     </td>
  </tr>
</table> 
```

在您的链接按钮中，您可以添加此属性。

```
onclientclick='document.getElementById("testTable").style.display="inline";' /> // notice I used the single quote on the outside of the onclick.  This would display the table.. 
```

如果您仍然需要对 popup2 按钮进行一些服务器端操作 - 您可以添加 runat="server" 并将 onclick 更改为 onclientclick ...

自从我使用 asp.net webforms 以来已经有一段时间了，所以让我知道这是否适合你....

# php - 一次带有两个变量的 switch 语句

> ID：12594763
> 
> 赞同：20
> 
> 时间：2012-09-26T04:53:24.853
> 
> 标签：php, switch-statement

有人可以建议使用以下 switch 语句的最佳方法吗？我不知道是否可以一次比较两个值，但这将是理想的：

```
switch($color,$size){
    case "blue","small":
        echo "blue and small";
    break;

    case "red","large";
        echo "red and large";
    break;
} 
```

* * *

这可以与以下内容相媲美：

```
if (($color == "blue") && ($size == "small")) {
    echo "blue and small";
}
elseif (($color == "red") && ($size == "large")) {
    echo "red and large";
} 
```

* * *

**更新** 我意识到我需要能够否定`($color !== "blue")`和比较，而不是将变量等同于字符串。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2015-05-13T08:10:50.287

使用新的数组语法，这看起来几乎就像您想要的那样：

```
switch ([$color, $size]) {
    case ['blue', 'small']:
        echo 'blue and small';
    break;

    case ['red', 'large'];
        echo 'red and large';
    break;
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-26T04:56:19.517

您可以更改比较的顺序，但这仍然不理想。

```
 switch(true)
    {
      case ($color == 'blue' and $size == 'small'):
        echo "blue and small";
        break;
      case ($color == 'red' and $size == 'large'):
        echo "red and large";
        break;
      default:
        echo 'nothing';
        break;
    } 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-26T04:56:29.717

不工作。你可以用一些字符串连接来破解它：

```
switch($color . $size) {
   case 'bluesmall': ...
   case 'redlarge': ...
} 
```

但这很快就会变得丑陋。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-13T07:55:38.567

见 [http://www.siteduzero.com/forum/sujet/switch-a-plusieurs-variables-75351](http://www.siteduzero.com/forum/sujet/switch-a-plusieurs-variables-75351)

```
<?php
$var1 = "variable1";
$var2 = "variable2";
$tableau = array($var1, $var2);

switch ($tableau){
    case array("variable1", "variable2"):
        echo "Le tableau correspond !";
    break;

    case array(NULL, NULL):
        echo "Le tableau ne correspond pas.";
    break; 
}
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-19T23:08:02.773

您的另一个选择（虽然不漂亮）是嵌套 switch 语句：

```
switch($color){
    case "blue":
        switch($size):
            case "small":
            //do something
            break;
    break;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T04:58:09.840

```
var $var1 = "something";
var $var2 = "something_else";
switch($var1.$var2) {
case "somethingsomething_else":
    ...
    break;
case "something...":
    break;
case "......":
    break;
} 
```

# json - 如何使用 ScriptEngine 类在 Qt 中创建 JSON 对象？

> ID：12594764
> 
> 赞同：0
> 
> 时间：2012-09-26T04:53:39.967
> 
> 标签：json, qt, scriptengine

如何使用 ScriptEngine 类在 Qt 中创建 JSON 对象？到目前为止有人试过，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:46:19.673

JavaScript 中的 JSON 几乎等同于普通的 Object。

在 Qt 中，评估一个对象并将其传递给 ScriptEngine 就足够了：

```
QScriptEngine myEngine;
QScriptValue json = myEngine.evaluate("{\"k\":12, \"j\":14};");
qDebug()<<json.isObject(); 
```

然后我们得到了“真”，即我们在引擎中初始化了一个新对象。

如果你想将一个普通的 C++ 对象传递给 JS，我认为`QScriptEngine::newObject()`并且`QScriptEngine::newQObject()`值得一试，尽管我没有测试它们。

# google-app-engine - java.sql.SQLRecoverableException：连接已在使用中

> ID：12594768
> 
> 赞同：1
> 
> 时间：2012-09-26T04:54:05.513
> 
> 标签：google-app-engine, servlets, jdbc, sqlexception, google-cloud-sql

在我的 java 代码中，我正在处理大量数据。所以我将代码作为 servlet 移动到 App Engine 的 Cron Job 中。有些日子它工作得很好。数据量增加后，cron 作业不工作并显示以下错误消息。

```
2012-09-26 04:18:40.627
'ServletName' 'MethodName': Inside SQLExceptionjava.sql.SQLRecoverableException: 
    Connection is already in use.

I 2012-09-26 04:18:40.741
This request caused a new process to be started for your application, and thus caused 
your application code to be loaded for the first time. This request may thus take 
longer and use more CPU than a typical request for your application.

W 2012-09-26 04:18:40.741
A problem was encountered with the process that handled this request, causing it to 
exit. This is likely to cause a new process to be used for the next request to your 
application. If you see this message frequently, you may be throwing exceptions during 
the initialization of your application. (Error code 104) 
```

如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:04:20.930

当在多个线程之间共享单个连接时，此异常很典型。当您的代码不遵循标准 JDBC 惯用语（即在同一块中尽可能短的范围内获取和关闭数据库资源）时，就会发生这种情况，*如下*`try-finally`所示：

```
public Entity find(Long id) throws SQLException {
    Connection connection = null; 
    // ...

    try {
        connection = dataSource.getConnection();
        // ...
    } finally {
        // ...
        if (connection != null) try { connection.close(); } catch (SQLException ignore) {}
    }

    return entity;
} 
```

你对这个问题的评论，

> *@TejasArjun 我使用带有 servlet Init() 方法的连接池。*

没有给我的印象是您以正确的方式做事。这表明您正在 servlet 的`init()`方法中获取一个数据库连接，并在所有 HTTP 会话中的所有 HTTP 请求中重用相同的连接。这是绝对不对的。servlet 实例仅在 webapp 启动期间创建/初始化一次，并在应用程序的整个剩余生命周期中重复使用。这至少证实了您面临的异常。

只需按照上面演示的标准`try-finally`习语重写您的 JDBC 代码，您就应该一切就绪。

### 也可以看看：

*   [在多线程系统中使用静态 java.sql.Connection 实例是否安全？](https://stackoverflow.com/questions/9428573/is-it-safe-to-use-a-static-java-sql-connection-instance-in-a-multithreaded-syste/9431863#9431863)

# apache - Apache跨域404

> ID：12594769
> 
> 赞同：0
> 
> 时间：2012-09-26T04:54:07.413
> 
> 标签：apache, subdomain, http-status-code-404

我想让 apache 始终为所有子域的 404 错误打开一个信号页面。

问题是我的子域位于 public_html 的子文件夹中，因此具有不同的根路径。

例如，主域效果很好：

```
ErrorDocument 404 /Error/404.html 
```

文件夹和主`Error`域分别位于 public_html 中。

但是对于论坛子域，位于`public_html/forum/`上面的根路径中并不存在，它实际上是在寻找`public_html/forum/Error/404.html`不存在的。

我试图重写论坛文件夹的规则，但也没有成功：

```
ErrorDocument 404 /../Error/404.html 
```

似乎，由于某种原因，它不能低于根文件夹。

任何想法如何在**不触发重定向**的情况下从主域和子域中引用同一页面？（例如：`http://mysite/Error/404.html`将完成此操作，但也会更改我不想要的页面的 url 地址）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:34:43.187

> 似乎，由于某种原因，它不能低于根文件夹。

因为能够遍历文档根目录之上是一个**非常非常严重的安全风险**。如果您的网络服务器受到威胁，人们将能够在您的整个服务器上的任何位置提供各种文件。

如果您有权访问服务器配置，则可以为该`/Error`文件夹设置别名。例如，在您的论坛子域的虚拟主机配置中，您可以添加：

```
Alias /Error /path/to/public_html/Error/ 
```

这样，当你去的时候，`http://forum.yourdomain.com/Error/404.html`你实际上是在看`http://main.yourdomain.com/Error/404.html`. 然后你可以使用：

```
ErrorDocument 404 /Error/404.html 
```

在您的论坛子域中像往常一样。

但是，如果您无权访问您的服务器/虚拟主机配置，则需要使用 mod_proxy 和 mod_rewrite。因此，在 htaccess 文件中`public_html/forum/`，将这些添加到顶部：

```
RewriteEngine On
RewriteRule ^Error/(.*)$ http://main.yourdomain.com/Error/$1 [L,P] 
```

# asp.net - 初学者查询asp.net网站管理

> ID：12594784
> 
> 赞同：0
> 
> 时间：2012-09-26T04:56:15.583
> 
> 标签：asp.net, visual-studio, iis

我最近开始管理一个 asp.net 网站。早些时候，我的员工拥有简单的 HTML 和一个 php 网站，我可以轻松地使用它们，并且可以进行中等水平的自定义，例如添加/编辑内容。但现在我有 asp.net 网站和它杀了我。

所有文件都是预编译的，但我有源代码。请告诉我如何添加编辑内容等。将我视为具有 HTML、php 和 css 所需知识的学生。

例如，我被告知要在页面中添加一个表格，我有相同的 html 代码，但不知道该怎么做。我尝试将它添加到 HTML 文件和 aspx 文件中，但没有用。然后我将它添加到 bin 文件夹中的文件中，并且网站首先开始给出有关预编译索引文件的错误。

现在，当您知道我对 asp.net 的了解为零时，请指导我避免我可能面临的尴尬。虽然这不是我从事市场营销的工作，但在面试中我说我可以做到这一切，但我不知道他们有 asp.net 为我服务。也让我知道我需要的工具，如 Visual Studio、IIS 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:32:02.753

这就是为什么 ASP.NET 最适合具有明确定义的构建/部署过程的复杂网站，而不是需要定期更新的简单网站。

您应该能够在`*.master`,`*.aspx`和`*.ascx`文件中添加和编辑静态内容而不会出现任何问题 - ASP.NET 运行时将在服务器上重新编译这些文件，因此不需要源文件 - 除非网站是使用“存根”编译的"`*.aspx`文件（此时文件只有一行看起来像`<%@ Page Inherits="MyAssembly.SomePage" %>`）。

你说你已经试过了，但它“没用”。你能解释一下后来发生了什么吗？您收到任何错误消息吗？

该`bin`文件夹是您在项目构建后放置项目中的 DLL 文件的位置（构建过程包括编译）。您能否向我们展示您收到的整个“首先预编译索引文件”错误消息？您给我们的描述太模糊，无法帮助您。

如果您的 ASP.NET 站点除了简单的“联系我们”电子邮件表单之外没有任何自定义逻辑，那么我强烈建议您将其转换回静态 HTML 或 PHP 网站，以保护大家的理智。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:37:04.010

您在这里没有真正的问题，并且不会替代“破解书”，观看一些在线教程等。我很感激您处于困境中，但只是随意添加从长远来看，.aspx 文件中的内容会给您带来严重的悲痛。

通过 Bing 搜索 PHP 和 ASP.NET，您会找到一些相关资源，这些资源利用您已经具备的技能，让您进入 ASP.NET 思维模式，解释开发和部署模型，并描述页面生命周期模型。

这里有几个：

[面向 PHP 开发人员的 ASP.NET](http://net.tutsplus.com/tutorials/asp-net/asp-net-for-php-developers/)

[开始使用 ASP.NET 和 ASP.NET MVC](http://www.asp.net/get-started)

[面向 PHP 开发人员的 ASP.NET：ASP.NET 简介](https://www.microsoftelearning.com/eLearning/course.aspx?guid=C47815A5-B80D-4531-B358-9EEEA36316C1)

# sql-server-2012 - 在 VS 2012 或 VS 2010 数据工具中打开 SQL 2005 .dtproj 文件时遇到问题

> ID：12594788
> 
> 赞同：1
> 
> 时间：2012-09-26T04:56:30.023
> 
> 标签：sql-server-2012, ssis, sql-server-2012-datatools

我试图从一本书中打开这个旧的 SQL Server 2005 代码示例，但是 VS 2010 或 VS 2012 的转换向导不会转换这个 .dtproj，它每次都失败，转换日志中确实没有充分的理由帮助。我假设项目类型发生了巨大变化，或者可能没有，我不知道，但我不知道如何转换它，所以我可以在较新版本的 VS 中再次打开它（在 VS 2008 之后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:47:00.750

您可以尝试使用旧版本，例如 SQL Server Business Intelligence Development Studio。我认为这是 2005 代码的正确版本。我确定有免费版本。

# sql-server - 在 SQL Server 中创建复合主键

> ID：12594791
> 
> 赞同：27
> 
> 时间：2012-09-26T04:57:20.990
> 
> 标签：sql-server, primary-key

如何在 SQL Server 2008 中添加复合主键？

我有一张如下表。

```
testRequest (wardNo nchar(5)
            , BHTNo nchar(5)
            , testID nchar(5)
            , reqDateTime datetime); 
```

我需要`wardNo, BHTNo`并且`testID`成为复合主键。

如何在 SQL Server Management Studio 中执行此操作？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-01T06:46:04.177

如果您使用 management studio，只需选择 wardNo、BHTNo、testID 列，然后单击工具栏中的键标记。

![在此处输入图像描述](../Images/ccbeb38c75a390088bee831a2846cd21.png)

对此的命令是，

```
ALTER TABLE dbo.testRequest
ADD CONSTRAINT PK_TestRequest 
PRIMARY KEY (wardNo, BHTNo, TestID) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-26T04:59:34.153

这个怎么样：

```
ALTER TABLE dbo.testRequest
ADD CONSTRAINT PK_TestRequest 
PRIMARY KEY (wardNo, BHTNo, TestID) 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-09-26T04:59:34.193

像这样的东西怎么样

```
CREATE TABLE testRequest (
        wardNo nchar(5),
        BHTNo nchar(5),
        testID nchar(5),
        reqDateTime datetime,
        PRIMARY KEY (wardNo, BHTNo, testID)
); 
```

看看这个例子

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/9e8c0/3/0)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-10T09:48:23.807

很简单，选择要插入主键的列，然后单击标题上的键图标并保存表[![sql复合键](../Images/922d026a4f666d8cc1ffcba67ce647e3.png)](https://i.stack.imgur.com/GarGi.png)

快乐编码..，

# r - aov 公式错误项：矛盾的例子

> ID：12594796
> 
> 赞同：3
> 
> 时间：2012-09-26T04:57:36.713
> 
> 标签：r

`aov()`我已经看到了 R/ （`R`= 随机，`X`= 依赖，`W`？= 内部，`B`？= 之间）中被试内设计的通用公式的两种基本方法：

```
# Pure within: 
    X ~ Error(R/W1*W2...)
# or  
    X ~ (W1*W2...) + Error(R/(W1*W2...))

# Mixed:
    X ~ B1*B2*... + Error(R/W1*W2...)
# or  
    X ~ (B1*B2*...W1*W2...) + Error(R/(W1*W2...)+(B1*B2...)) 
```

也就是说，有些人建议永远不要将`W`因子放在错误项之外或将`B`因子放在里面，而另一些人则将所有 ( `B`, `W`) 因子放在外面和里面，表明嵌套在 R 中的错​​误项中。

这些只是符号变体吗？是否有任何理由优先选择另一个作为执行 ANOVA 的默认值`aov()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:33:56.183

我总是建议将所有主题内变量放在错误项的内部和外部。

对于纯粹的受试者内分析，这意味着使用以下公式：

```
X ~ (W1*W2...) + Error(R/(W1*W2...)) 
```

在这里，所有受试者的影响都根据其适当的误差项进行测试。

相反，该公式`X ~ Error(R/W1*W2...)`不允许您测试变量的影响。

同样的原则也适用于混合设计（包括主体间和主体内变量）。正确的公式是：

```
X ~ (B1*B2*...W1*W2...) + Error(R/(W1*W2...)) 
```

无需在公式中使用两次间变量。上面的模型实际上与`X ~ (B1*B2*...W1*W2...) + Error(R/(W1*W2...)+(B1*B2...))`.

此公式允许您使用正确的错误项来测试主体间和主体内的影响。

有关更多信息，请阅读[此](http://personality-project.org/r/r.anova.html)方差分析教程。

# session - Spring MVC 中的手动会话不起作用

> ID：12594798
> 
> 赞同：1
> 
> 时间：2012-09-26T04:57:52.900
> 
> 标签：session, spring-mvc, tomcat6

我正在尝试设置一个会话变量并在将来的请求中检索它。我看到在 Spring MVC 中有几种方法可以做到这一点。我尝试了几种方法，但没有一种方法有效。我回到最简单的方法（手动会话操作），仍然没有运气。

这是我的代码：

```
@Controller
public class Test {

private static final Logger LOG = Logger.getLogger(Test.class);

@RequestMapping({ "/set", "/set/" })
public final ModelAndView set(
        final HttpServletRequest request,
        final HttpServletResponse response, 
        final HttpSession session) {

    LOG.info("setting the session");
    session.setAttribute("userId", new Object());
    request.getSession(true).setAttribute("userId", new Object());

    return new ModelAndView("someView");
}

@RequestMapping({ "/get", "/get/" })
public final ModelAndView get(
        final HttpServletRequest request,
        final HttpServletResponse response, 
        final HttpSession session) {

    final HttpSession session1 = request.getSession();
    final Object userId = session.getAttribute("userId");
    final Object userId1 = session1.getAttribute("userId");
    LOG.info("and the userId is '" + userId + "' '" + userId1 + "'");

    return new ModelAndView("someView");
}
} 
```

我在 /set 上访问我的服务器，然后在 /get 上。我查看我的日志并看到：

```
setting the session
and the userId is 'null' 'null' 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T01:37:49.447

我不知道为什么，但是将以下内容放入我的 web.xml 中解决了问题：

```
 <listener>
    <listener-class>
      org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener> 
```

# rabbitmq - celery worker 什么时候向 RabbitMQ 确认它有任务？

> ID：12594802
> 
> 赞同：16
> 
> 时间：2012-09-26T04:58:17.877
> 
> 标签：rabbitmq, celery

我可能会误解这是如何工作的（这就是我要问的原因），但我认为当芹菜工人从 RabbitMQ 消费一项任务时，它会锁定它——可以这么说——然后必须承认它完成了该任务一旦完成。所以说我有 4 个工作人员，它们的预取设置都为 1，并且需要很长时间才能排队 6 个任务。一旦我启动这些工人并运行：

```
rabbitmqctl -q list_queues name messages messages_ready messages_unacknowledged 
```

我希望看到类似的东西：

```
celery  6       2       4 
```

表示有 4 个任务正在运行（但尚未确认），其中 2 个已准备好使用。

我认为我的理解是错误的，因为我实际看到的是：

```
celery  2       0       2 
```

因此，就好像在工作人员收到消息时发生确认，但在该工作人员完成处理该任务之前。

总而言之，我的问题是，**芹菜工人什么时候承认自己有任务？**似乎它是在收到该任务并开始处理它时，而不是在它完成处理时。有人可以确认吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-26T10:39:24.937

常见问题解答中提到了这一点，但我不能怪你没有找到它： [http ://docs.celeryproject.org/en/latest/faq.html#should-i-use-retry-or-acks-late](http://docs.celeryproject.org/en/latest/faq.html#should-i-use-retry-or-acks-late)

early ack 的默认行为是存在的，因为我们不想强制用户编写幂等任务。

# rsa - 什么是 DSA 复杂性？

> ID：12594809
> 
> 赞同：1
> 
> 时间：2012-09-26T04:59:05.767
> 
> 标签：rsa, complexity-theory, dsa

我进行了一些测试，结果发现 RSA 比 DSA 慢得多。

**通常的[DSA](https://en.wikipedia.org/wiki/Digital_Signature_Algorithm)时间复杂度是多少？**

```
RSA[ms] DSA [ms]    
1125    218 1KiB
1047    188 2KiB
594     17  4KiB
641     234 8KiB
2938    406 16KiB
9063    937 32KiB
39344   3406    64KiB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T01:55:49.897

RSA 和 DSA 都使用幂运算来生成签名。这是最耗时的，因此它们基本上具有相同的复杂性。但不同的是密钥长度。

在密码学中，您尝试选择尽可能小的密钥，但要足够大以获得所需的安全性。

RSA需要相当长的密钥，……。像 2048 位或更大。
DSA 有一个短密钥（约 256 位）和一个长密钥（约 2048 位）。指数不会大于短键。

因此，对于 DSA，您必须计算 2048 位数的 256 位数的幂（以其他数为模），而对于 RSA，您必须计算 2048 位数的其他 2048 位数的幂。这就是 RSA 比 DSA 慢得多的原因。

*注意*：如果为 DSA 选择长度为 2048 位的短密钥，它将与 RSA 一样慢。

# php - PHP 语法错误：第 78 行出现意外的 T_PAAMAYIM_NEKUDOTAYIM

> ID：12594811
> 
> 赞同：-1
> 
> 时间：2012-09-26T04:59:09.843
> 
> 标签：php, static, static-methods, php-5.2

我检查了所有可能的答案，但很抱歉，我无法弄清楚这一点。我尝试将属性设为非静态，但代码板显示该错误：

```
$task = new sfCacheClearTask($sfContext::getInstance()->getEventDispatcher(), new sfFormatter()); 
```

参考[http://codepad.org/zcqrkVoY](http://codepad.org/zcqrkVoY)

请帮助解决这个问题。谢谢

```
class doSokiJobTask extends sfBaseTask {

    CONST STATUS_PENDING = 0;
    CONST STATUS_DONE = 1;
    CONST STATUS_IN_PROGRESS = 2;
    CONST STATUS_FAILED = 3;
    CONST STATUS_CANCELLED = 4;

    CONST TIME_TO_DIE = 60;

    public $context = null;
    public $job_name = null;
    public $done = null;
    public $status = null;
    public $start = 0;

    protected function setJobName($name) {
        $this->job_name = strtolower($name);
    }

    protected function configure() {
        $this->addArguments(array(
                //new sfCommandArgument('build', sfCommandArgument::REQUIRED, ''),
        ));

        $this->addOptions(array(
            new sfCommandOption('env', null, sfCommandOption::PARAMETER_OPTIONAL, 'Env to use', 'dev'),
            new sfCommandOption('application', null, sfCommandOption::PARAMETER_OPTIONAL, 'Env to use', 'frontend'),
            new sfCommandOption('job-type', null, sfCommandOption::PARAMETER_REQUIRED, 'Job to be executed', 'job'),
            new sfCommandOption('daemon', null, sfCommandOption::PARAMETER_REQUIRED, 'Daemon running the job', 0),
        ));

        $this->namespace = 'soki';
        $this->name = 'job';
        $this->briefDescription = 'Lets you run jobs in the background';
        $this->detailedDescription = <<<EOF
The [setup|INFO] task helps run jobs in the background.
Call it with:

  [php symfony setup|INFO]
EOF;
//$this->filesystem = new sfFilesystem(null, $this->formatter);
    }

    protected function execute($arguments = array(), $options = array()) {
        $this->start = $ts_start = microtime(true);
        $options['quiet'] = 'true';
        $configuration = ProjectConfiguration::getApplicationConfiguration($options['application'], $options['env'], true);
        new sfDatabaseManager($configuration);
        $sfContext = sfContext::createInstance($configuration);
        $this->context = $sfContext;
        $this->setJobName($options['job-type']);
        if (true) {
            $file_logger = new sfFileLogger($this->dispatcher, array('file' => $this->configuration->getRootDir() . '/log/jobs.log'));
            $this->dispatcher->connect('command.log', array($file_logger, 'listenToLogEvent'));
        }

        try {
            if (!$this->job_name)
                $this->logSection('INVALID', 'Job Type could not be identified', null, 'ERROR');

            switch ($this->job_name) {
                case 'clear-cache':
                    $task = new sfCacheClearTask($sfContext::getInstance()->getEventDispatcher(), new sfFormatter());
                    $task->run(array(), array('env' => $options['env'], 'app' => $options['application']));
                    $this->done = true;
                    break;
                case 'send-email':
                    $task = new sfProjectSendEmailsTask($sfContext::getInstance()->getEventDispatcher(), new sfFormatter());
                    $task->run(array(), array('env' => $options['env'], 'application' => $options['application'],
                        'message-limit' => sfConfig::get('sf_spool_message_limit', 25)));
                    $this->done = true;
                    break;
                case 'chmod':
                    if (!chmod(sfConfig::get('sf_root_dir') . "/data_society", 0755))
                        throw new Exception('CHMOD failed on ' . sfConfig::get('sf_root_dir') . "/data_society");
                    $this->done = true;
                    break;
                case 'disable-install':
                    $this->done = Application::secureSokiInstaller(true);
                    sokiUtil::clearCacheAsync();
                    break;
                /* case 'enable-install':
                  Application::secureSokiInstaller(false);
                  sokiUtil::clearCacheAsync();
                  break; */
                case 'job':
                    $this->executeJob($arguments, $options);
                    break;
                default:
                    $this->logSection('UNKNOWN', 'Job Type could not be identified', null, 'ERROR');
                    break;
            }
            $ts_end = microtime(true);
            $this->logSection($this->job_name, ($this->done ? 'DONE' : 'FAILED') . ' in ' . round($ts_end - $ts_start) . 's @ ' . $options['env'] . '/' . $options['application'], null, 'INFO');
        } catch (Exception $e) {
            $this->logSection($this->job_name, $e->getMessage(), null, 'ERROR');
            throw $e;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T05:01:37.610

您通过类​​调用静态方法，例如`ClassName::methodName()`，**而不是**通过实例`$instance::methodName()`

# python - SQLAlchemy：为什么我提出 HTTPFound 会导致没有数据插入数据库？

> ID：12594812
> 
> 赞同：2
> 
> 时间：2012-09-26T04:59:10.587
> 
> 标签：python, sqlalchemy, pyramid

我构建了一个视图，允许用户输入一些信息，并使用 Pyramid 框架将该信息作为新记录插入到我的数据库中。代码是这样的：

```
def orderplace_view(request):
    user = User.get(authenticated_userid(request))
    cart = Cart.get_by_user(user)

    if cart.itemtypes == None:  # cat is empty
        request.session.flash(u'Empty cart')
        raise HTTPFound(location = request.route_url('cart'))

    placeorderform = PlaceOrderForm(request.POST)
    placeorderform.address.query = UserAddress.query_by_user(user)

    if request.POST and placeorderform.validate():
        # create order
        order = Order()
        order.address = placeorderform.address.data

        # fill order with other attributes...
        user.orders.append(order)

        # IMPORTANT LINE!!!
        raise HTTPFound(location = request.route_url('order_list'))

    return {'user': user,
        'title': 'place order',
        'cart': cart,
        'placeorderform': placeorderform} 
```

奇怪的是：如果我注释掉“raise HTTPFound()”行，一切正常，新订单将插入数据库。但是，如果我保留将用户重定向到订单列表页面的那一行，订单将不会被插入！为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:10:34.983

如果 Pyramid 事务中间件正在使用中，它将在视图函数引发异常时中止包含事务：http: [//docs.pylonsproject.org/projects/pyramid_tm/en/latest/#transaction-usage](http://docs.pylonsproject.org/projects/pyramid_tm/en/latest/#transaction-usage)

使用 明确提交`transaction.commit()`，或者更好的是，返回`HTTPFound`而不是提高它。

# php - 如何在 yii 中加载 zend 框架 1.12？

> ID：12594820
> 
> 赞同：0
> 
> 时间：2012-09-26T04:59:34.630
> 
> 标签：php, zend-framework, yii

新的 zend 框架 1.12 有新的自动加载器我在 yii 中加载 zend 的旧代码是：

```
require "Zend/Loader/Autoloader.php";
Yii::registerAutoloader(array('Zend_Loader_Autoloader', 'autoload'), true); 
```

现在升级到 1.12 没有
任何建议在 yii 中加载 zend ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:42:32.377

尝试将问题中的自动加载器代码替换为：

```
require_once 'Zend/Loader/Autoloader.php';
Zend_Loader_Autoloader::getInstance(); 
```

只需调用`Zend_Loader_Autoloader::getInstance()`就会让 Zend Framework 自动加载器注册自己，[`spl_autoload_register`](http://php.net/spl_autoload_register)这就是所有`Yii::registerAutoloader()`尝试做的事情。

像这样注册 ZF 的自动加载器应该允许您一起自动加载 Yii 类和 ZF 类而没有任何问题。

# html - Jcrop 缩放功能

> ID：12594821
> 
> 赞同：2
> 
> 时间：2012-09-26T04:59:46.663
> 
> 标签：html, jcrop, zooming

我正在尝试使用 jcrop 实现此缩放插件，但收到类似“IndexSizeError：索引或大小为负数或大于允许量”的错误。

这是我正在使用的缩放插件的链接 [http://www.doogal.co.uk/zoomable.php](http://www.doogal.co.uk/zoomable.php)

请一些身体帮助我

这是javascript代码

```
// For image zooming i am destroying the jcrop after zoom opertaion i am appending it.
var jcrop_api;
function imageZoom(operation)
{
    // Destroy Jcrop widget, restore original state
    jcrop_api.destroy();

    // Making zoom operations
    $('#imageCrop').zoomable(operation);

    // intialzing jcrop
    initJcrop();
}

function initJcrop() {
    $('#imageCrop').Jcrop({
         setSelect: [ 0, 768, 1024, 0 ],
            onChange : updatePreview,
            onSelect : updatePreview
      }, function(){
        jcrop_api = this;
    });

}

// Updating the image preview at the time of image selection
function updatePreview(c) {
    // Updating co-ordinates
    $('#x').val(Math.round(c.x));
    $('#y').val(Math.round(c.y));
    $('#w').val(Math.round(c.w));
    $('#h').val(Math.round(c.h));
    if(parseInt(Math.round(c.w)) > 0) {
        // Show image preview
        var imageObj = document.getElementById("imageCrop");
        var canvas = $("#preview")[0];
        var context = canvas.getContext("2d");
        $("#preview").attr("height", Math.round(c.h));
        $("#preview").attr("width", Math.round(c.w));

        // Drawing the image to canvas
        context.drawImage(imageObj, c.x, c.y, c.w, c.h, 0, 0, c.w, c.h);
    }
}
$(function(){
    // intialzing jcrop
    initJcrop();
}); 
```

HTML 代码

```
<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Image Crop</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://www.doogal.co.uk/js/jquery.zoomable-1.1.js"></script>
<script type="text/javascript" src="http://deepliquid.com/projects/Jcrop/js/jquery.Jcrop.js"></script>
<link rel="stylesheet" type="text/css" href="http://deepliquid.com/Jcrop/css/jquery.Jcrop.min.css">
</head>
<body>
<p>
    <input type="button" title="Zoom in" id="zoomin" onclick="imageZoom('zoomIn');"
        value="+ Zoom" role="button" />
    <input type="button" title="Zoom out" id="zoomout" onclick="imageZoom('zoomOut');"
         value="- Zoom" role="button" />
    <input type="button" title="Reset Zoom" id="zoomReset" onclick="imageZoom('reset');"
        value="Reset Zoom" role="button" />
</p>

<img id="imageCrop" src="http://deepliquid.com/projects/Jcrop/demos/demo_files/sago.jpg">
<br />
<h3>Preview</h3>
<canvas id="preview" width="1024" height="768"></canvas>

</body>
</html> 
```

在行动[http://jsfiddle.net/nU3hh/](http://jsfiddle.net/nU3hh/)

# git - 如何更新分叉项目的本地分支？

> ID：12594822
> 
> 赞同：0
> 
> 时间：2012-09-26T04:59:47.563
> 
> 标签：git, github, git-workflow, git-fork

我克隆了一个分叉的 github 存储库，并从中创建了一个分支。如何使用 upstream/master 更新（使用 git pull ）我的分支？

详细地说，这就是我所做的：

1) 在 GitHub 上创建一个 repo

2) 将我的 github 存储库克隆到本地盒子

然后我做了一些本地更改，提交并推送到我的 GitHub 存储库。这些更改是针对我的，对其他人没有用处，因此没有拉取请求。我将这些提交称为“私人提交”。所以这就是发生的事情：4）做了一些“私人提交”

然后我开始研究一个对其他人非常有用的功能。所以我想我必须从我的本地 master 分支出来，在 "private commits" 之前，称之为 "pull-request-branch" 。所以，这就是我所做的：

5)`git branch <before private commits>`

6)`git checkout -b pull-request-branch`

7)`git push -u origin pull-request-branch`

然后我想在我开始处理新功能之前，我必须使用上游更改来更新这个分支。所以这就是我接下来要做的

8)`git remote add upstream <original-repo>`

9）`git pull upstream pull-request-branch`（这不起作用）

如何使用 upstream/master 更新 pull-request-branch ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:05:43.740

您指定要从中提取的分支，而不是：

```
$ git checkout pull-request-branch
$ git pull upstream master 
```

`pull-request-branch`将从更新`upstream/master`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:03:23.397

我建议有一个 local `pull-request-branch`, `merge --rebase`from`upstream/master`进入它，然后推送到远程`pull-request-branch`

# ruby-on-rails-3.1 - 从 rails 控制器中的 jquery datepicker 获取日期

> ID：12594823
> 
> 赞同：0
> 
> 时间：2012-09-26T04:59:48.537
> 
> 标签：ruby-on-rails-3.1, jquery-ui-datepicker

我有一个必须选择日期并且必须将其传递给操作的表单。但它并没有作为该动作的参数传递。我正在使用 jquery datepicker 来选择日期。

查看页面

```
<%=f.text_field :due_date%> 
```

控制器页面

```
def create
      @task = Task.new(params[:task])
       if @task.valid?
          @task.due_date=params[:task][:due_date]
          @task.save
          redirect_to(calenders_path(:date=>@task.due_date,:task_name=>params[:task][:task_name]))
      else
         render :action=>"new"
      end
end 
```

这里只有 :task_name 作为参数传递请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:14:25.130

试试这个：

```
def create
      @task = Task.new(params[:task])
       if @task.save
          redirect_to(calenders_path(:date=>@task.due_date,:task_name=>@task.task_name))
       else
          render :action=>"new"
      end
end 
```

参数应该已经由`due_date`第一行填充。您可能正在将其设置为 null `@task.due_date=params[:task][:due_date]`。

# vba - 如何拆分邮件合并并使用合并字段作为名称保存文件

> ID：12594828
> 
> 赞同：2
> 
> 时间：2012-09-26T05:00:18.693
> 
> 标签：vba, ms-word, mailmerge

我有一堆邮件合并模板设置，当我合并文档时，我想将结果拆分为单独的文件，每个文件都有一个基于合并字段“FileNumber”的名称。

我目前的代码是：

```
Sub splitter()
' Based on a macro by Doug Robbins to save each letter created by a mailmerge as a separate file.
' With help from http://www.productivitytalk.com/forums/topic/3927-visual-basic-question-for-merge-fields/

Dim i As Integer
Dim Source As Document
Dim Target As Document
Dim Letter As Range
Dim oField As Field
Dim FileNum As String

Set Source = ActiveDocument

For i = 1 To Source.Sections.Count
    Set Letter = Source.Sections(i).Range
    Letter.End = Letter.End - 1
        For Each oField In Letter.Fields
        If oField.Type = wdFieldMergeField Then
            If InStr(oField.Code.Text, "FileNumber") > 0 Then
            'get the result and store it the FileNum variable
            FileNum = oField.Result
            End If
        End If
        Next oField
    Set Target = Documents.Add
    Target.Range = Letter
    Target.SaveAs FileName:="C:\Temp\Letter" & FileNum
    Target.Close
    Next i
End Sub 
```

**问题是如果我“合并到新文档”，那么“文件编号”字段不再存在，所以它无法选择，但如果我只是去“预览结果”并运行宏，它只会保存当前预览的记录和不是其余的字母。**

我假设我需要将代码更改为类似

```
For i = 1 To Source.MergedRecord.Count
    Set Letter = Source.MergedRecord(i).Range 
```

但我无法找出正确的语法。

我知道[http://www.gmayor.com/individual_merge_letters.htm](http://www.gmayor.com/individual_merge_letters.htm)但我不想要对话框，我只想要一个单击按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-19T20:38:43.280

在邮件合并模板文档中，将以下宏代码粘贴到“ `ThisDocument`”模块中：

```
Dim WithEvents wdapp As Application
Dim bCustomProcessing As Boolean

Private Sub Document_Open()

Set wdapp = Application
bCustomProcessing = False
ThisDocument.MailMerge.DataSource.ActiveRecord = 1
ThisDocument.MailMerge.ShowWizard 1
With ActiveDocument.MailMerge
   If .MainDocumentType = wdFormLetters Then
       .ShowSendToCustom = "Custom Letter Processing"
   End If
End With

End Sub
Private Sub wdapp_MailMergeWizardSendToCustom(ByVal Doc As Document)

bCustomProcessing = True
Doc.MailMerge.Destination = wdSendToNewDocument
With Doc.MailMerge
    For rec = 1 To .DataSource.RecordCount
        .DataSource.ActiveRecord = rec
        .DataSource.FirstRecord = rec
        .DataSource.LastRecord = rec
        .Execute
    Next
End With

MsgBox "Merge Finished"
End Sub

Private Sub wdapp_MailMergeAfterMerge(ByVal Doc As Document, ByVal DocResult As Document)
If bCustomProcessing = True Then
    With Doc.MailMerge.DataSource.DataFields
        sFirmFileName = .Item(1).Value ' First Column of the data - CHANGE
    End With
    DocResult.SaveAs "c:\path\" & sFirmFileName & ".docx", wdFormatXMLDocument
     ' Path and File Name to save. can use other formats like wdFormatPDF too
    DocResult.Close False
End If
End Sub 
```

请记住更新用于文件名的列号，以及保存生成文件的路径。

编写此代码后，保存并关闭合并模板文档。重新打开文件，这一次将提示您使用合并向导。按字母要求进行，在最后一步，选择“ `Custom Letter Processing`”选项而不是完成合并。这会将单独的合并文档保存在指定文件夹中。

请记住，这段代码对处理器来说可能很重。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-07T11:34:11.740

有一个不涉及拆分结果文档的简单解决方案：准备合并并保留在模板文档中。在合并一条记录时记录一个宏，然后保存并关闭结果文件，最终前进到下一条记录。

请参阅下面生成的宏。我添加了非常少的代码，只是为了从数据源中的字段中提取文件名（可在模板文档中访问）。

将宏分配给快捷键或在 VBA 中实现循环。请注意，字段名称区分大小写。

问候， 索伦

```
Sub flet1()
'
' flet1 Makro
' 1) Merges active record and saves the resulting document named by the datafield     FileName"
' 2) Closes the resulting document, and (assuming that we return to the template)
' 3) advances to the next record in the datasource
'
'Søren Francis 6/7-2013

    Dim DokName  As String   'ADDED CODE

    With ActiveDocument.MailMerge
        .Destination = wdSendToNewDocument
        .SuppressBlankLines = True
        With .DataSource
            .FirstRecord = ActiveDocument.MailMerge.DataSource.ActiveRecord
            .LastRecord = ActiveDocument.MailMerge.DataSource.ActiveRecord
' Remember the wanted documentname
           DokName = .DataFields("FileName").Value         ' ADDED CODE
        End With

' Merge the active record
        .Execute Pause:=False
    End With

' Save then resulting document. NOTICE MODIFIED filename
    ActiveDocument.SaveAs2 FileName:="C:\Temp\" + DokName + ".docx", FileFormat:= _
        wdFormatXMLDocument, LockComments:=False, Password:="", AddToRecentFiles _
        :=True, WritePassword:="", ReadOnlyRecommended:=False, EmbedTrueTypeFonts _
        :=False, SaveNativePictureFormat:=False, SaveFormsData:=False, _
        SaveAsAOCELetter:=False, CompatibilityMode:=14

' Close the resulting document
    ActiveWindow.Close

' Now, back in the template document, advance to next record
    ActiveDocument.MailMerge.DataSource.ActiveRecord = wdNextRecord
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T00:45:09.417

谢谢你的 roryspop，

我最终交换了 for 循环

```
Set Source = ActiveDocument

'The for loop was "To ActiveDocument.MailMerge.DataSource.RecordCount" but for
'some reason RecordCount returned -1 every time, so I set ActiveRecord 
'to wdLastRecord and then use that in the for loop.
ActiveDocument.MailMerge.DataSource.ActiveRecord = wdLastRecord

For i = 1 To ActiveDocument.MailMerge.DataSource.ActiveRecord
    ActiveDocument.MailMerge.DataSource.ActiveRecord = i
    Set Letter = Source.Range
        For Each oField In Letter.Fields 
```

其余的代码是相同的，它不是很整洁，我相信一定有更好的做事方式，但它确实有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T16:21:49.103

接受的解决方案对我不起作用。我正在使用 Word 2010。我设法得到了一个有效的解决方案，并想在这里分享它，以便其他人可以从中受益：

```
'purpose: save each letter generated after mail merge in a separate file
'         with the file name equal to first line of the letter.
'
'1\. Before you run a mail merge make sure that in the main document you will 
'   end your letter with a Section Break (this can be found under 
'   Page Layout/Breaks/Section Break Next Page)
'2\. Furthermore the first line of your letter contains the proposed file name
'   and put an enter after it. Make the font of the filename white, to make it 
'   is invisible to the receiver of the letter. You can also include a folder 
'   name if you like.
'3\. Run the mail merge as usual. A file which contains all the letters is 
'   generated.
'4\. Add this module to the generated mail merge file. Use Alt-F11 to go to the 
'   visual basic user interface, right click in the left pane on the generated
'   file and click on Import File and import this file
'5\. save the generate file with all the letters as ‘Word Macro Enabled doc 
'   (*.docm)’.
'6\. close the file.
'7\. open the file again, click allow content when a warning about macro's is 
'   shown.
'8\. execute the macro with the name SaveRecsAsFiles

Sub SaveRecsAsFiles()
    ' Convert all sections to Subdocs
    AllSectionsToSubDoc ActiveDocument
    'Save each Subdoc as a separate file
    SaveAllSubDocs ActiveDocument
End Sub

Private Sub AllSectionsToSubDoc(ByRef doc As Word.Document)
    Dim secCounter As Long
    Dim NrSecs As Long
    NrSecs = doc.Sections.Count
    'Start from the end because creating
    'Subdocs inserts additional sections
    For secCounter = NrSecs - 1 To 1 Step -1
        doc.Subdocuments.AddFromRange _
          doc.Sections(secCounter).Range
    Next secCounter
End Sub

Private Sub SaveAllSubDocs(ByRef doc As Word.Document)
    Dim subdoc As Word.Subdocument
    Dim newdoc As Word.Document
    Dim docCounter As Long
    Dim strContent As String, strFileName As String

    docCounter = 1
    'Must be in MasterView to work with
    'Subdocs as separate files
    doc.ActiveWindow.View = wdMasterView
    For Each subdoc In doc.Subdocuments
        Set newdoc = subdoc.Open
        'retrieve file name from first line of letter.
        strContent = newdoc.Range.Text
        strFileName = Mid(strContent, 1, InStr(strContent, Chr(13)) - 1)
        'Remove NextPage section breaks
        'originating from mailmerge
        RemoveAllSectionBreaks newdoc
        With newdoc
            .SaveAs FileName:=strFileName
            .Close
        End With
        docCounter = docCounter + 1
    Next subdoc
End Sub

Private Sub RemoveAllSectionBreaks(doc As Word.Document)
    With doc.Range.Find
        .ClearFormatting
        .Text = "^b"
        With .Replacement
            .ClearFormatting
            .Text = ""
        End With
        .Execute Replace:=wdReplaceAll
    End With
End Sub 
```

[我从这里](http://homepage.swissonline.ch/cindymeister/mergfaq2.htm#SepFile)复制的部分代码

# c++ - 程序中的 C++ 错误

> ID：12594832
> 
> 赞同：0
> 
> 时间：2012-09-26T05:00:54.710
> 
> 标签：c++, debugging, runtime-error

我的程序出现这个错误，我不明白为什么。代码本质上必须检查存储在声明为全局变量的集合中的标记。如果它是有效标签，则将其存储在堆栈中，否则返回错误消息。然后它检查（如果它是一个有效的标签）结束标签是否有序。这就是 is_well_formed 方法的全部内容。对于 print_well_formed_file 方法，它本质上检查给定文件是否格式正确，如果它会显示该文件。：

```
terminate called after throwing an instance of 'std::out_of_range'
what():  basic_string::substr 
```

我能做些什么来解决这个错误？这是代码的一部分：

```
bool is_well_formed(ifstream& ifs, string& error_msg) {
    // your code goes here
    string fname, line;
    Token tok;
    Lexer lexer;
    tags.insert("blue");
    tags.insert("red");
    tags.insert("cyan");
    tags.insert("white");
    tags.insert("yellow");
    tags.insert("magenta");
    tags.insert("dim");
    tags.insert("underline");
    tags.insert("bold");
    while (getline(cin, fname)) {
        // tries to open the file whose name is in string fname
        string name = fname.substr(1, fname.length() - 2);
        cout << "Name" + name;
        ifs.open(name.c_str());
        if (ifs.fail()) {
            cerr << "ERROR: Failed to open file " << fname << endl;
            ifs.clear();
        } else {
            while (getline(ifs, line)) {
                lexer.set_input(line);
                while (lexer.has_more_token()) {
                    tok = lexer.next_token();
                    string tmpTok = tok.value;
                    switch (tok.type) {
                    case TAG:
                        // If it has /, remove / from tmpTok
                        if (tok.value[0] == '/') {
                            tmpTok = tmpTok.substr(1, tmpTok.length() - 1);
                        }
                        if (tags.find(tmpTok) == tags.end()) {
                            // Check whether the encountered tag is valid
                            error_return("Tag " + tmpTok + " is invalid!");
                        } else {
                            // Valid Tag encountered
                            stack < string > tagstack;
                            tagstack.push(tmpTok);
                            // Check if the tags are formed properly
                            if (tok.value[0] == '/') {
                                // Remove / from tmpTok
                                string closingTag = tmpTok;
                                string openingTag = tagstack.top();
                                tagstack.pop();
                                if (closingTag.compare(openingTag) != 0) {
                                    error_return(
                                            closingTag + "doesn't match"
                                                    + openingTag);
                                } //else 
                                //  return true; // if the file is well formed
                            }
                        }
                        break;
                    case IDENT:
                        cout << "IDENT: " << tok.value << endl;
                        break;
                    case ERRTOK:
                        error_return("Syntax error on this line\n");
                        //cout << "Syntax error on this line\n";
                        break;
                    case ENDTOK:
                        break;
                    }
                }
            }
        }
    }
    return true; // if the file is well-formed
}

void print_well_formed_file(ifstream& ifs) {
    //Check if file is well formed.
    string line;
    Lexer command;
    if (is_well_formed(ifs, line)) { //if well formed display
        command.set_input(line);
        display(command);
    }

}
void display(Lexer cmd_lexer) {
    string file_name;

    if (!parse_input(cmd_lexer, file_name)) {
        error_return("Syntax error: display <filename>");
        return;
    }

    ifstream ifs(file_name.c_str());
    string error_msg;
    if (ifs) {
        if (!is_well_formed(ifs, error_msg)) {
            error_return(error_msg);
        } else {
            ifs.clear(); // clear EOF flag
            ifs.seekg(0, ios::beg); // go back to the very beginning
            print_well_formed_file(ifs);
        }
    } else {
        error_return("Can't open " + file_name + " for reading");
    }
    ifs.close();
} 
```

用户输入示例：

```
validate <file name>
display <file name>
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:04:30.243

```
string name = fname.substr(1, fname.length() - 2); 
```

`fname`如果的长度 <= 1将抛出这种异常。我敢打赌，情况就是这样。最简单（不是最好）的解决方案是跳过这些行。

# php - PHP cURL 和 SSL 证书错误

> ID：12594835
> 
> 赞同：3
> 
> 时间：2012-09-26T05:01:32.060
> 
> 标签：php, ssl, curl

使用时出现此错误`CURLOPT_SSL_VERIFYHOST`：

```
Curl error: SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

**我尝试了什么：**

**1 -**关闭`VERIFYHOST`不是一个选项，我需要这个才能登录到 https 页面

**2 -**下载的证书，我像这样使用它：

```
 curl_setopt($c, CURLOPT_SSL_VERIFYPEER, 1);
    curl_setopt($c, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($c, CURLOPT_CAINFO, getcwd() . '/certificate.pl.crt'); 
```

我仍然得到同样的错误。

**3 -**我打开`ssl_module`了 Apache 扩展（我使用 WAMP）

**4 -**我打开`php_openssl`了 PHP 扩展

我还应该做什么？据`phpinfo();`我所知，我有：

```
mod_ssl/2.2.22 
OpenSSL/0.9.8u 
```

它仍然不起作用。我还应该做什么:(？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:12:43.143

不得不编辑这个，因为我之前错过了一些评论。

如果您不尝试导入证书并关闭对等验证，如果我没记错的话，您的传输仍然应该是 SSL 安全的，所以如果目标是让它通过 ssl ，那么我不会打扰证书的导入。当然，如果你确实想要更安心，那就另当别论了。

# twitter-bootstrap - Twitter Bootstrap：移动设备中的可折叠侧边栏

> ID：12594837
> 
> 赞同：2
> 
> 时间：2012-09-26T05:01:39.680
> 
> 标签：twitter-bootstrap, sidebar, collapse

这个我已经被问过了，很抱歉冗余（如果有的话） - 但我还没有想出如何使用 twitter bootstrap 完成可折叠的侧边栏。

使用[此示例](http://twitter.github.com/bootstrap/examples/fluid.html)，我希望侧边栏像移动设备上的全局导航（标题）一样折叠。

有人可以链接代码示例或小提琴吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:26:57.347

只需根据屏幕大小将以下一个或多个类添加到要显示或隐藏的元素中：

![响应式实用程序类](../Images/3da5676c762e0f1805b3656209473cfc.png)

```
...
<div class="row-fluid">
   <div class="span3 hidden-phone">
... 
```

*   更多[信息](http://twitter.github.com/bootstrap/scaffolding.html#responsive)
*   演示[JSFIDDLE](http://jsfiddle.net/handtrix/MgcDU/2978/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T06:30:56.150

# 试试这些（两者都是最好的）

* * *

**代码**
[https://github.com/IronSummitMedia/startbootstrap-simple-](https://github.com/IronSummitMedia/startbootstrap-simple-)

**演示**
[http://ironsummitmedia.github.io/startbootstrap-simple-sidebar](http://ironsummitmedia.github.io/startbootstrap-simple-sidebar)

* * *

**代码**
[http://www.bootstrapzero.com/bootstrap-template/facebook](http://www.bootstrapzero.com/bootstrap-template/facebook)

**演示**
[http://www.bootply.com/render/96266](http://www.bootply.com/render/96266)

* * *

# java - 使用 webservice 调用一些使用资源文件的 java 应用程序方法时出现问题

> ID：12594842
> 
> 赞同：4
> 
> 时间：2012-09-26T05:02:54.423
> 
> 标签：java, web-services, axis2, android-ksoap2, sphinx4

使用 webservice 调用一些使用资源文件的 java 应用程序方法时出现问题

我在我的 java src 文件夹中创建了一个包含以下目录结构的 java 应用程序。

```
Src/
  Transcriber.java
  config.xml
  digits.gram
  transcriber.manifest 
```

我已经使用 .aar 文件成功创建了这个 java 应用程序的 web 服务，并将其放入 axis2 服务文件夹

我将整个打包在 Transcriber.aar 文件中，结构如下

```
Transcriber\edu\cmu\sphinx\demo\transcriber 
```

在上面我列出的所有 4 个文件中。

我在上面的 Transcriber.java 类中有两种方法。第一种方法只是在没有任何其他文件使用的情况下进行处理（例如 config.xml、digits.gram 和 transcriber.manifest）。它工作正常，我可以轻松地从 android 调用该方法。

但我的第二种方法也使用其他文件（例如 config.xml、digits.gram 和 transcriber.manifest）来处理我想要的一些逻辑。

但是，当我调用第二种方法时，我遇到了一些错误，而当我从 android 设备调用第二种方法时，它给了我错误。

我的错误如下：

```
 at java.lang.Thread.run(Thread.java:662)
Caused by: Property exception component:'jsgfGrammar' property:'grammarLocation'
 - Can't locate resource:/edu/cmu/sphinx/demo/transcriber
edu.cmu.sphinx.util.props.InternalConfigurationException: Can't locate resource:
/edu/cmu/sphinx/demo/transcriber 
```

它给了我一些错误，它无法找到我用来通过 config.xml 文件在 config.xml 中添加此代码的语法文件 digits.gram

```
<component name="jsgfGrammar" type="edu.cmu.sphinx.jsgf.JSGFGrammar">
        <property name="dictionary" value="dictionary"/>
        <property name="grammarLocation" 
             value="resource:/edu/cmu/sphinx/demo/transcriber"/>
        <property name="grammarName" value="digits"/>
    <property name="logMath" value="logMath"/>
    </component> 
```

为什么我会出现这种错误？`enter code here`

我的代码首先获取 CONFIG.XML，然后 CONFIG.XML 获取另一个资源文件....它成功找到了 config.xml，但是 config.xml 中的代码无法找到其他资源文件

```
package edu.cmu.sphinx.demo.transcriber;

import edu.cmu.sphinx.frontend.util.AudioFileDataSource;
import edu.cmu.sphinx.recognizer.Recognizer;
import edu.cmu.sphinx.result.Result;
import edu.cmu.sphinx.util.props.ConfigurationManager;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

/** A simple example that shows how to transcribe a continuous audio file that has multiple utterances in it. */
public class TranscribeSimpleGrammar {

        private static final String PATH = "file:///D:\\Sound\\";

        @SuppressWarnings({ "null", "null" })               
        public String recognize_wave(String wavePath) throws MalformedURLException{

              URL audioURL;

              //  if (args.length > 0) {
                //    audioURL = new File(args[0]).toURI().toURL();
              //  } else {
                    //audioURL = TranscribeSimpleGrammar.class.getResource("hello.wav");
                        //audioURL = new URL(PATH + "turn-on-light-kitchen-male.wav");
                        //audioURL = new URL(PATH + "turn-down-tv-volume-female.wav");
                       // audioURL = new URL(PATH + wavePath);
              audioURL = new URL(wavePath);
              //audioURL = new URL(PATH + "turn-down-dining-room-music-player-volume-male.wav");

               // }

                URL configURL = TranscribeSimpleGrammar.class.getResource("config.xml");

                ConfigurationManager cm = new ConfigurationManager(configURL);
                Recognizer recognizer = (Recognizer) cm.lookup("recognizer");

                /* allocate the resource necessary for the recognizer */
                recognizer.allocate();

                // configure the audio input for the recognizer
                AudioFileDataSource dataSource = (AudioFileDataSource) cm.lookup("audioFileDataSource");
                dataSource.setAudioFile(audioURL, null);

                // Loop until last utterance in the audio file has been decoded, in which case the recognizer will return null.
                Result result;
                while ((result = recognizer.recognize())!= null) {

                        String resultText = result.getBestResultNoFiller();
                        System.out.println(resultText);
                }

            return result.getBestResultNoFiller();
        }

        public String get_wav_byte(byte[] wavbite,String path){

            String result1="null";

            try
            {
                File dstFile = new File(path);
                FileOutputStream out = new FileOutputStream(dstFile);
                out.write(wavbite, 0, wavbite.length);

                out.close();

            }
            catch (IOException e)
            {
              System.out.println("IOException : " + e);
            }

            try {
                result1=recognize_wave(path);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

         return result1;

     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T16:46:05.997

你有没有尝试过改变

```
<property name="grammarLocation" value="resource:/edu/cmu/sphinx/demo/transcriber"/> 
```

至

```
<property name="grammarLocation" value="resource:edu/cmu/sphinx/demo/transcriber"/> 
```

（意味着只是删除前导斜线`edu`）？

`Class.getResource()`并`ClassLoader.getResource()`以不同的方式解释提供的名称：虽然`Class.getResource( "/edu/cmu/sphinx/demo/transcriber/transcriber.manifest" )`会找到资源，但您必须使用`ClassLoader.getResource()`参数`"edu/cmu/sphinx/demo/transcriber/transcriber.manifest"`来查找相同的资源。由于您不知道您调用的库代码使用哪种方法来加载其他资源，您应该尝试一下。

# android - 如何使用 Porterduff.mode.overlay

> ID：12594843
> 
> 赞同：1
> 
> 时间：2012-09-26T05:02:56.980
> 
> 标签：android, image, porter-duff

如何使用“覆盖”porterduff 模式？我想要的是类似于 gimp 中的覆盖模式。'Overlay' 列在 porterduff.mode 的文档[页面](http://developer.android.com/reference/android/graphics/PorterDuff.Mode.html)中，但不能使用它。

ps“乘”不是我要找的。

# java - 如何在需要时从类中生成对象？

> ID：12594845
> 
> 赞同：-1
> 
> 时间：2012-09-26T05:03:07.797
> 
> 标签：java, arrays, object

我想从一个类创建对象并将其存储在一个数组中，只要用户想要。每次我想将一个对象添加到数组中时，我必须手动创建它，然后将它存储在一个数组中。 .是一种无需手动创建即可生成对象的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:08:13.863

您仍然需要一些代码来实例化对象并设置其字段，但是，您可以编写一个小型类工厂（使用[工厂设计模式](http://en.wikipedia.org/wiki/Factory_method_pattern)），它允许您在幕后构造对象。

# java - mysql时间戳更新在列中使用相同的值

> ID：12594850
> 
> 赞同：1
> 
> 时间：2012-09-26T05:03:24.647
> 
> 标签：java, mysql, jsp

我在 MySQL 表中有字段，我将其设置为默认值作为时间戳，当我第一次更新它时它会更新到当前时间戳，当我第二次更新它时，当我更新相同的第三个时它也会更新到当前时间戳 bt列时间戳字段中具有相同值的时间不会更新到当前时间戳。

我的表结构是：

```
+-----------+-----------+------+-----+-------------------+-----------------------------+
| Field     | Type      | Null | Key | Default           | Extra                       |
+-----------+-----------+------+-----+-------------------+-----------------------------+
| EID       | int(11)   | NO   | PRI | 0                 |                             |
| MOD_EID   | int(11)   | YES  |     | NULL              |                             |
| EXIT_TIME | timestamp | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
+-----------+-----------+------+-----+-------------------+-----------------------------+ 
```

当我第一次更新时，我在 EID 中插入所需的值，在 MOD_EID 中插入 0。当我第二次更新时，我正在用所需的值更新 MOD_EID。在这两种情况下，我都能在 EXIT_TIME 中获得 current_timestamp。但是当我在分钟或一天后再次使用相同的值更新 MOD_EID 字段时，EXIT_TIME 字段没有更新到 current_timestamp？怎么了

更新代码是

```
String vexit=request.getParameter("string");

StringTokenizer tok=new StringTokenizer(vexit,"");

String sql,query,query2;
int count2=0;

    while(tok.hasMoreTokens())
    {
            String ide=tok.nextToken();
sql="SELECT count(EID) FROM tm_exit where EID='"+ide+"' ";
            ResultSet rs=st.executeQuery(sql);
            while(rs.next())
            {
            count2=rs.getInt(1);
}
        if(count2 >0)
            {
query="UPDATE tm_exit set MOD_EID='"+ide+"' WHERE EID='"+ide+"'";
int flag=st.executeUpdate(query);
}
        else
            {
query2="INSERT INTO tm_exit (EID,MOD_EID)values('"+ide+"',0)";
int flag2=st.executeUpdate(query2);
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:48:17.027

仅当某些其他列的值发生更改时，TIMESTAMP 列才会自动更新。如果您将 MOD_EID 设置为与已有的值相同的值，则不会更新 TIMESTAMP。我不知道为什么它曾经对您有用，这是[文档](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)中的内容：

> 如果该列是自动更新的，则当该行中任何其他列的值从其当前值更改时，它会自动更新为当前时间戳。如果所有其他列都设置为其当前值，则该列保持不变。为了防止该列在其他列更改时更新，请将其显式设置为其当前值。要在其他列没有更改的情况下更新该列，请将其显式设置为应具有的值（例如，将其设置为[CURRENT_TIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-timestamp)）。

# javascript - bxSlider 和自定义效果

> ID：12594851
> 
> 赞同：0
> 
> 时间：2012-09-26T05:03:25.337
> 
> 标签：javascript, jquery, jquery-effects, bxslider

我正在使用[http://bxslider.com](http://bxslider.com)，我想删除所有效果。需要明确的是，我想要在我的图像之间产生类似 hide() 和 show() 的效果，仅此而已。有可能做这样的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:16:50.073

也许尝试使用速度参数。从文档：

```
speed
In ms, duration of time slide transitions will occupy 
```

尝试将其设置为`1ms`或`0ms`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:52:30.693

您是否真的尝试过将“淡入淡出”传递给构造函数的模式选项？

```
$("#slideshow").bxSlider({ mode:'fade' }); 
```

* * *

[http://bxslider.com/options](http://bxslider.com/options)

我会尝试使用 onBeforeSlide 回调

```
function(currentSlideNumber, totalSlideQty, currentSlideHtmlObject){
  // perform actions here
} 
```

并调用序列中`.hide()`的第一`currentSlideHtmlObject`张和下一张幻灯片。

然后您可以使用`onAfterSlide`回调来 .show() 下一张幻灯片。

# c# - 简单的 WPF 平移；这段代码很接近但不太正确

> ID：12594853
> 
> 赞同：5
> 
> 时间：2012-09-26T05:03:34.630
> 
> 标签：c#, wpf, xaml, canvas, panning

我正在尝试使用其 RenderTransform 对 WPF Canvas 对象执行一些简单的平移。我希望能够按住鼠标按钮并拖动。使用下面的代码，当你点击的时候会有一个奇怪的跳跃。是什么原因造成的？其次，由于没有更好的术语，拖动被拖动的对象是“摇晃”的。这是为什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace TestWpfZoom
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private Point _last;
        protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
        {
            CaptureMouse();
            _last = e.GetPosition(canvas);
            base.OnMouseLeftButtonDown(e);
        }

        protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
        {
            ReleaseMouseCapture();
            base.OnMouseLeftButtonUp(e);
        }

        protected override void OnMouseMove(MouseEventArgs e)
        {
            if (e.LeftButton == MouseButtonState.Pressed && IsMouseCaptured)
            {
                var pos = e.GetPosition(canvas);
                var matrix = mt.Matrix; // it's a struct
                matrix.Translate(pos.X - _last.X, pos.Y - _last.Y);
                mt.Matrix = matrix;
                _last = pos;
            }
            base.OnMouseMove(e);
        }
    }
} 
```

和 XAML：

```
<Window x:Class="TestWpfZoom.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Canvas Name="canvas">
        <Canvas.RenderTransform>
            <MatrixTransform x:Name="mt"/>
        </Canvas.RenderTransform>
        <Ellipse Canvas.Left="100" Canvas.Top="100" Fill="Red" Width="100" Height="100"/>
    </Canvas>
</Window> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T05:37:02.600

这应该可以工作（插入 bool 变量 isDragged）并替换

> `var pos = e.GetPosition(canvas);`

和

> `var pos = e.GetPosition(this);`

```
 protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonDown(e);
        CaptureMouse();
        //_last = e.GetPosition(canvas);
        _last = e.GetPosition(this);

        isDragged = true;
    }

    protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonUp(e);
        ReleaseMouseCapture();
        isDragged = false;
    } 
```

并且

```
protected override void OnMouseMove(MouseEventArgs e)
    {
        if (isDragged == false)
            return;

        base.OnMouseMove(e);
        if (e.LeftButton == MouseButtonState.Pressed && IsMouseCaptured)
       {

            var pos = e.GetPosition(this);
            var matrix = mt.Matrix; // it's a struct
            matrix.Translate(pos.X - _last.X, pos.Y - _last.Y);
            mt.Matrix = matrix;
            _last = pos;

       }

    } 
```

# android - 从现有 cocos2dx 项目文件创建 Android 项目后无法解析 Cocos2dX 特定库

> ID：12594854
> 
> 赞同：0
> 
> 时间：2012-09-26T05:03:43.587
> 
> 标签：android, android-ndk

我已经使用 Eclipse、android 和 windows 配置了 cocos2dx 的设置。以下链接是我跟随配置的资源。

*   [http://www.multigesture.net/articles/how-to-setup-cocos2d-x-windows-and-android/#comment-77433](http://www.multigesture.net/articles/how-to-setup-cocos2d-x-windows-and-android/#comment-77433)

但是，在我完成所有教程并从现有的 Cocos2dx 代码（和）创建 Android 项目之后`HelloCpp`，`HelloLua`我`HelloJavaScript`得到了 Eclipse 无法解析 Cocos2dx 特定类的错误，例如`Cocos2dxActivity`.

我的问题是我必须将 Cocos2dx Libraries (Jar) 文件导入 Eclipse 吗？还是我在设置过程中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:26:36.850

你用的是2.0.*版本的cocos2d-x？该版本发生了一些变化。

确保您已链接指向 cocos2dx/platform/android/java/src_common 的源

检查**项目属性->Java 构建路径->源**对话框

# bash - wget的厨师日志记录

> ID：12594855
> 
> 赞同：7
> 
> 时间：2012-09-26T05:03:49.573
> 
> 标签：bash, logging, chef-infra, recipe

我有一个厨师食谱，看起来像：

```
Chef::Log.info('step1')
# do stuff

Chef::Log.info('step2')
bash "do_wget" do
  code <<-EOF
  wget somefile
  EOF
end

Chef::Log.info('step3')
# do stuff 
```

wget 需要一段时间，但日志记录最终看起来像

```
step1    
step2    
step3
bash script runs #indicates that the bash script from step 2 is running 
```

有没有办法阻止从第 3 步开始记录，直到 bash 脚本执行完毕？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T08:52:29.397

您应该熟悉[Chef Run 的解剖学](http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run)。它有两个阶段：编译和执行。

在编译阶段不对配方中的资源采取任何行动——每个评估的资源都只是被采取并放入**资源集合**中。但是，评估资源之外的纯 Ruby 代码。

在执行阶段，它实际上评估**Resource Collection**。但是此时您所有的日志消息都已经打印出来了。

如果您需要在执行阶段运行 ruby​​ 代码（包括 Chef 日志记录），该[Ruby 块有一个特殊资源](http://wiki.opscode.com/display/chef/Resources#Resources-RubyBlock)

```
ruby_block "Add logging step3" do
  block do
    Chef::Log.info('step3')
  end
  action :create
end 
```

另一种方法可能是，在编译阶段实际执行资源：

```
bash "do_wget" do
  code "wget somefile"
  action :nothing
end.run_action :run 
```

Action :nothing 设置为避免运行此资源两次（每个阶段一次）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-10T03:19:09.163

您可以改用日志资源，据我所知，它会根据您的需要在执行阶段运行

```
log "step2" do
    :info
end 
```

或者干脆

```
log "step 3" 
```

[http://docs.opscode.com/resource_log.html](http://docs.opscode.com/resource_log.html)

# iphone - iPhone中的高质量圆角图像

> ID：12594861
> 
> 赞同：0
> 
> 时间：2012-09-26T05:04:45.663
> 
> 标签：iphone, uiimageview, uiimage

在我的应用程序中，我想要高质量的图像。图片是从 Facebook 好友列表中加载的。当该图像以较小的尺寸（50 * 50）加载时，其质量很好。但是当我尝试以更大尺寸（280 * 280）获得该图像时，图像质量会降低。

![在此处输入图像描述](../Images/71207275d19b6a8aba60dffae49be5b8.png)

对于圆角 m 这样做：

```
self.mImageView.layer.cornerRadius = 10.0;
self.mImageView.layer.borderColor = [UIColor blackColor].CGColor;
self.mImageView.layer.borderWidth = 1.0;
self.mImageView.layer.masksToBounds = YES; 
```

使用以下代码获取图像 m：

```
self.mImageView.image = [self  imageWithImage:profileImage scaledToSize:CGSizeMake(280, 280)];

- (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
UIGraphicsBeginImageContextWithOptions(newSize, YES,0.0);
CGContextRef context = CGContextRetain(UIGraphicsGetCurrentContext());
CGContextTranslateCTM(context, 0.0, newSize.height);
CGContextScaleCTM(context, 1.0, -1.0);
CGContextSetInterpolationQuality(context, kCGInterpolationLow);
CGContextSetAllowsAntialiasing (context, TRUE);   
CGContextSetShouldAntialias(context, TRUE);
CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, newSize.width, newSize.height),image.CGImage);
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext();
return newImage; 
```

}

我已经检查了我的代码几次，但无法弄清楚如何使图像完美。那么，伙计们，如何提高这种图像质量呢？提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:19:05.580

> …图像质量下降。

图像的“质量”仍然存在。*（从技术上讲，您通过调整大小会引入少量错误，但这不是真正的问题......）*

那么，您想将 50x50px 的图像缩放到 280x280px 吗？源信号中不存在信息/细节。理想情况下，您会下载更合适大小的图像，以适应您想要显示的大小。

如果这不是一个选项，您可以通过适当的重采样和/或插值来减少像素化。这将简单地平滑您的程序放大 5.6 倍的像素——然后图像看起来就像像素化和模糊之间的交叉（请参阅`CGContextSetAllowsAntialiasing`、`CGContextSetShouldAntialias`和`CGContextSetInterpolationQuality`相关 API 以使用石英完成此操作）。

# python - python的循环问题

> ID：12594862
> 
> 赞同：2
> 
> 时间：2012-09-26T05:04:49.170
> 
> 标签：python, loops, while-loop

我正在尝试循环战斗菜单。虽然它还没有完成，但我在循环它时遇到了问题。我希望菜单一直循环到 myhp 或 hp 低于 0。所以我使用了“while myhp > 0 or hp > 0:”

它不起作用，我做错了什么？

```
def fightmode(name, hp, dmg, gold):
print '\n\n\nYou are in a fight with %s' %name
print '%s has %sHP' %(name, hp)
while myhp > 0 or hp > 0:
    hp = hp - mydmg
    print '\n\t1\. Attack \n\t2\. Guard \n\t3\. Run away.'
    opt1= ''
    allowed = ["1", "2", "3"]
    while opt1 not in allowed:
        opt1 = raw_input("\nWhat will you do? ")
        if opt1 == "1":
            print "You have inflicted %d damage on %s. %s's HP is %s" %(mydmg, name, name, hp)
if myhp > 0 :
    print"myhp"
if hp > 0 :
    print"theirhp" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:06:48.433

没关系，我想我明白了。我将“或”更改为“和”，似乎它正在工作。这是正确的方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:16:47.213

现在，您需要`myhp`OR`hp`为真，while 循环才能继续进行。因此，如果其中一个下降到 0 并因此“变为 False”，则另一个仍然为 true 并保持循环继续进行。

那么你怎么能做些什么呢？（你已经猜对了……`and`改用！）

所以`while myhp > 0 or hp > 0:`应该是`while myhp > 0 and hp > 0:`（请注意，`or`交换为`and`！）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T05:44:06.623

因为*while*循环循环直到布尔表达式为**真并在表达式为****假**后停止

 **所以你需要写`while myhp < 0 or hp < 0:`**

# c++ - 初始化 PhysFS 的问题

> ID：12594863
> 
> 赞同：0
> 
> 时间：2012-09-26T05:05:08.013
> 
> 标签：c++, physfs

当我遇到初始化 PHYSFS 的问题时，我尝试将一些资产打包到具有自定义扩展名的存档中，并尝试遵循 physfs 教程（一个非常模糊的教程）。它需要一个参数 argv[0] 但是它给了我一个错误，即 argv 没有被声明。我还尝试将 argv 作为参数传递给 main 函数，但这似乎也不起作用。这是给我带来麻烦的一小段代码：

```
#include "physfs.h"

int FileManager()
{
  PHYSFS_init(argv[0]) //error
  ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:19:47.317

argv 不是全局范围的变量，因此它在 FileManager() 中不可见。argv 通常是 main() 的参数。因此，为了让您的 FileManager 函数能够看到它，您需要在 main() 和 FileManager() 函数定义中将其定义为参数，然后在调用 FileManager() 时传递 argv（可能来自 main）。

如果您不从 main 调用 FileManager()，假设您通过了一些中间函数，只需重复该过程 - 将 argv 定义为中间函数的参数并确保它在调用 FileManager() 时传播 argv（扩展此根据您的调用堆栈的需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:24:11.000

通过查看[本教程](http://icculus.org/physfs/physfstut.txt)，似乎第一个也是唯一的参数`PHYSFS_init`应该是执行文件的路径。它还指出这通常为 null，因此您可以传递 null。我同意该教程缺少，就我阅读该段而言，它实际上并没有解释该参数的用途。我*假设*它使用参数来根据可执行文件的路径计算要工作的根目录应该是什么。

# sql-server - 如何通过 TSQL 确定 SQL Server 复制类型？

> ID：12594875
> 
> 赞同：2
> 
> 时间：2012-09-26T05:06:23.180
> 
> 标签：sql-server, replication, database-replication

我想知道如何通过 TSQL 确定 SQL Server 复制类型。例如，事务复制、带有队列更新的事务复制、合并复制等。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:11:02.823

在分发数据库上运行以下查询：

```
SELECT 
     P.Publication
    ,P.Publication_type
    ,S.Subscriber_ID
    ,S.Update_Mode
FROM MSPublications P
INNER JOIN MSSubscriptions S
    ON P.Publication_ID = S.Publication_ID 
```

Publication_type - 0=事务性，1=快照，2=合并

Update_mode - 0=只读，1=立即更新，2=使用消息队列进行排队更新，3=使用消息队列将排队更新作为故障转移立即更新，4=使用 SQL Server 队列进行排队更新，5=使用排队更新作为立即更新使用 SQL Server 队列进行故障转移

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:11:52.707

这是一个链接到 Microsoft BOL 页面的 update_mode 解码：http: [//msdn.microsoft.com/en-us/library/ms186785.aspx](http://msdn.microsoft.com/en-us/library/ms186785.aspx)

# java - 如何在android中动态地将图像叠加在另一个图像之上？

> ID：12594876
> 
> 赞同：0
> 
> 时间：2012-09-26T05:06:32.057
> 
> 标签：java, android

如何使用 Java 库或现有的 android 库覆盖两个图像（透明）

# java - 无法让我的 while 语句正常工作

> ID：12594884
> 
> 赞同：0
> 
> 时间：2012-09-26T05:07:03.490
> 
> 标签：java, loops, while-loop, infinite

这个程序的错误是 main 方法中的 while 语句。从某种意义上说，当我输入无效的输入值时，它会停止并退出程序，当我输入正确的值时，它会循环一次 while 语句，但在完成更多工作后，我的代码突然循环无穷大，任何输入低于 1025。忽略程序输出的草率，因为我仍在编辑它，主要问题是为什么它不会停止在 while 语句中循环。

```
import java.util.Scanner;

public class DNS
{
    public static void main(String[] args)
    {
        int y;
        Scanner input = new Scanner( System.in);

        System.out.println("java DisplayNumberSystems");
        System.out.println("Enter a decimal value to display to: ");
        y = input.nextInt();

        while(y !=1025)
        {

            for(int x=0; x <=y; x++)
            {
                System.out.println("Decimal");
                System.out.println(x);
            }

            for(int i=0; i <=y; i++)
            {
                System.out.println("");
                System.out.println("Binary");
                convertToBinary(i);
            }

            System.out.println("");             

            for(int z=0; z <=y; z++)
            {
                System.out.println("Hex");
                convertToHex(z);
            }

            System.out.println("");

            for(int d=0; d <=y; d++)
            {
                System.out.println("Octal");
                convertToOctal(d);
                System.out.println("");
            }

        }
    }

    public static void convertToBinary(int x)
    {

        if(x >0)
        {

            convertToBinary(x/2);
            System.out.printf(x%2 + "");

        }

    }

    public static void convertToOctal(int x)
    {
        int rem; 

        while(x >0)
        {
            rem = x%8;
            System.out.printf("%d", rem);
            x=x/8;
        }
    }

    public static void convertToHex(int x)
    {
        int rem;

        while(x >0)
        {

        rem = x%16;
            switch(rem)
            {
                case 1: 
                    System.out.printf("1");
                    break;

                case 2: 
                    System.out.printf("2");
                    break;

                case 3:
                    System.out.printf("3");
                    break;

                case 4: 
                    System.out.printf("4");
                    break;

                case 5:
                    System.out.printf("5");
                    break;

                case 6:
                    System.out.printf("6");
                    break;

                case 7: 
                    System.out.printf("7");
                    break;

                case 8:
                    System.out.printf("8");
                    break;

                case 9:
                    System.out.printf("9");
                    break;

                case 10: 
                    System.out.printf("A");
                    break;
                case 11: 
                    System.out.printf("B");
                    break;

                case 12: 
                    System.out.printf("C");
                    break;

                case 13: 
                    System.out.printf("D");
                    break;

                case 14: 
                    System.out.printf("E");
                    break;

                case 15: 
                    System.out.printf("F");
                    break;
            }
            x=x/16;
        }
        System.out.println("");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:22:41.783

`while`如果只执行一次循环，为什么还需要循环呢？`if`改为考虑。

没关系，打破`while`循环怎么样？您可以`break;`在适用的地方使用来停止执行循环。

例如 ：

```
while (y != 1025) {

    for (int x = 0; x <= y; x++) {
        System.out.println("Decimal");
        System.out.println(x);
    }

    for (int i = 0; i <= y; i++) {
        System.out.println("");
        System.out.println("Binary");
        convertToBinary(i);
    }

    System.out.println("");

    for (int z = 0; z <= y; z++) {
        System.out.println("Hex");
        convertToHex(z);
    }

    System.out.println("");

    for (int d = 0; d <= y; d++) {
        System.out.println("Octal");
        convertToOctal(d);
        System.out.println("");
    }
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:10:28.687

在此期间，您没有在任何地方增加 y 的值。因此，对于低于 1025 的 y 值，假设 100.y 始终为 100，并且每次检查条件 y!= 1025 为真。所以，请输入增量`y = y + 1`或任何内容，它会做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:12:28.500

```
while(y !=1025) 
```

在这一行中，您的循环在 y`lower than 1025`和时工作`higher than 1025`。
你**也没有**改变`y value`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T05:25:51.267

正如上面的人所说，它总是会循环。除非 y 发生变化，否则它将始终不等于 1025，除非它的原始值为 1025。

你到底想达到什么目的？你应该包括 y = input.nextInt(); 在循环内部，如果条件为真，循环将中断？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T05:29:40.437

如果在 while 循环的末尾添加一个 break，它实际上会使 while 循环变得多余。它会循环一次然后退出。如果您只想为 1025 以外的值运行循环，则应使用 if then 语句...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-02T18:38:50.310

您的`while`循环运行无限次的原因是因为您没有更新（可能增加）`y`. 您可能希望在循环中添加类似以下语句的内容：

```
y++; 
```

这将`y`在每次循环迭代时将 的值增加 1

# c# - 试图在 C# winform 中的按钮单击事件上从串行端口读取数据？

> ID：12594885
> 
> 赞同：0
> 
> 时间：2012-09-26T05:07:03.507
> 
> 标签：c#, winforms, serial-port

我在我的 winform 应用程序中从串行端口读取数据时遇到问题......这是我的代码..

```
private void rtrvBtn_Click(object sender, EventArgs e)
    {
        btnid = 2;
        mySerialPort = new SerialPort(port);
        mySerialPort.Open();
        compacket(btnid);

        if (combuffer[0] != 0)
        {
            mySerialPort.Write(combuffer, 0, 4);
            System.Threading.Thread.Sleep(500);
            mySerialPort.DataReceived += new SerialDataReceivedEventHandler(this.port_rec);
        }
        else
        {
            lblmsg.Text = "FL";
        }
        mySerialPort.Close();

        rtrvBtn.Enabled = false;
        conBtn.Enabled = true;
    }

public void port_rec(object sender, SerialDataReceivedEventArgs e)
    {
        string s = Convert.ToString(mySerialPort.ReadExisting());
        MessageBox.Show(s);
    } 
```

所以在这里我没有得到任何数据，我也没有进入port_rec事件..任何人都可以帮助......我的串口设置是这样的......

```
 public void SettingRS232(string port)
    {
        try
        {
            mySerialPort = new SerialPort(port);
            mySerialPort.PortName = port;
            mySerialPort.BaudRate = 9600;
            mySerialPort.Parity = Parity.None;
            mySerialPort.StopBits = StopBits.One;
            mySerialPort.DataBits = 8;
            mySerialPort.Handshake = Handshake.None;
            mySerialPort.ReadTimeout = 2000;
            mySerialPort.WriteTimeout = 500;

            mySerialPort.DtrEnable = true;
            mySerialPort.RtsEnable = true;

        }
        catch (Exception ex)
        {
            lblmsg.Text = ex.Message;
        }
    } 
```

帮帮我，伙计们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:49:49.817

我猜这两个方法与 mySerialPort 字段在同一个类中。你不应该在点击事件中创建一个新的串口对象，你应该使用你已经拥有的那个。

# c# - 复选框模板

> ID：12594886
> 
> 赞同：0
> 
> 时间：2012-09-26T05:07:17.270
> 
> 标签：c#, .net, wpf

直升机，

我正在尝试创建一个简单的复选框模板，但是经过无数小时的尝试后，我偶然发现了一个问题。自定义模板只是一个`grid containing 2 rows`，它是自己`a label`的`checkbox`。

这里的代码：

```
<Style x:Key="OptionCheckBoxStyle" TargetType="{x:Type local:OptionCheckBox}"
       BasedOn="{StaticResource {x:Type CheckBox}}">
        <Setter Property="Template">
        <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:OptionCheckBox}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Label Content="{TemplateBinding Label}" 
                               ToolTip="{TemplateBinding ToolTip}" >
                        </Label>
                        <CheckBox x:Name="CheckMark" Grid.Column="1" 
                                  Margin="5,0,0,0" />
                    </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

问题是将此元素的 IsChecked 属性绑定到 CheckMark 元素的 IsChecked 属性。我已经尝试了以下（以及其他东西的组合）

```
 <Setter Property="IsChecked" Value="{Binding Path=IsChecked,
            ElementName=CheckMark}"/> 
```

有谁知道这个工作的必要绑定？（基本上，绑定到子元素）

注意：我不`emulate the checkbox`使用整个绘图的原因是因为我们运行不同的主题，它们看起来与普通复选框不同。

问候，丹

# debugging - lua debug.traceback

> ID：12594892
> 
> 赞同：1
> 
> 时间：2012-09-26T05:08:12.147
> 
> 标签：debugging, lua, backtrace

我想`debug.traceback()`在c++中调用lua函数来获取c++中的trackback信息，所以我在c++中添加了这样的函数：

```
int luaErrorHandler(lua_State *m_state) {
    if (!lua_isstring(m_state, 1))
        return 1;
    lua_getfield(m_state, LUA_GLOBALSINDEX, "debug");
    if (!lua_istable(m_state, -1)) {
        lua_pop(m_state, 1);
        return 1;
    }
    lua_getfield(m_state, -1, "traceback");
    if (!lua_isfunction(m_state, -1)) {
        lua_pop(m_state, 2);
        return 1;
    }   
    lua_pushvalue(m_state, 1);  /* pass error message */
    lua_pushinteger(m_state, 2);
        lua_call(m_state, 2, 1);  /* call debug.traceback */

    return 1;
} 
```

然后我`lua_pushcfunction(L, luaErrorHandler)`把它压入堆栈，然后`lua_insert()`把函数移到底部，然后`lua_pcall(L, nArgs, 1, errIndex)`调用lua函数。此时的栈应该是这样的： ..luaErrorHandler , func, arg1 , arg2....

问题是当我调用函数时，函数以某种方式改变了自身内部的堆栈（我认为..），所以我收到错误“尝试调用数字值”，当我不使用错误处理程序时它会正确运行功能。有没有关于如何`debug.traceback()`正确使用的建议？或者我该如何调试这个问题，因为我完全不知道它是怎么出错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:49:15.430

用 a 注册的 C 函数`lua_State`应该返回它们推入堆栈的返回值的数量。你的函数没有返回任何东西（到 Lua 堆栈），而是告诉 Lua 它推送了一个值。因此，Lua 会在你的函数完成后弹出一个值并将其传递给调用者。可能弹出的值是您打算调用的值，但最终却调用了堆栈上的下一个东西 - 一个数字。

尝试用适当的`return 1`语句替换`return 0`并仔细考虑每个语句之前的堆栈内容，`return`以确保您不会弹出任何内容。

# php - 正确使用包含文件

> ID：12594895
> 
> 赞同：-1
> 
> 时间：2012-09-26T05:08:23.037
> 
> 标签：php, mysql, if-statement

我正在用 php 编程与 mysql 数据库交谈。该代码需要根据登录的用户使用不同的包含文件（连接到不同的数据库）。我只是想知道，这样做的正确方法是什么。应该在开头包含所有文件，然后在我的查询中指定数据库名称或继续包含文件而不更改查询。例如，对于用户 a，所需的数据库访问权限是 uae

```
if($user == 'a'){
include('/home/xxxxxxx/xxxxxx/connection.php'); // connection to database x
$qry = "SELECT * FROM sometable";
} elseif($user == 'b'){
include('/home/xxxxxxx/xxxxxx/connect.php'); // connection to database y
$qry = "SELECT * FROM sometable";
} 
```

以上会更好还是以下：-

```
include('/home/xxxxxxx/xxxxxx/connection.php'); // connection to database x
include('/home/xxxxxxx/xxxxxx/connect.php'); // connection to database y
if($user == 'a'){
$qry = "SELECT * FROM databaseX.sometable";
} elseif($user == 'b'){
$qry = "SELECT * FROM databaseY.sometable";
} 
```

请指教。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:13:47.727

在此代码中，加载页面的大小没有增加，因为我们根据条件包含文件。

```
if($user == 'a'){
include('/home/xxxxxxx/xxxxxx/connection.php'); // connection to database x
$qry = "SELECT * FROM sometable";
} elseif($user == 'b'){
include('/home/xxxxxxx/xxxxxx/connect.php'); // connection to database y
$qry = "SELECT * FROM sometable";
} 
```

在这段代码中，加载页面的大小正在增加，因为我们在开始时加载所有文件

```
include('/home/xxxxxxx/xxxxxx/connection.php'); // connection to database x
include('/home/xxxxxxx/xxxxxx/connect.php'); // connection to database y
if($user == 'a'){
$qry = "SELECT * FROM databaseX.sometable";
} elseif($user == 'b'){
$qry = "SELECT * FROM databaseY.sometable";
} 
```

如果它只关心数据库连接，我认为你必须使用`1st`方法。

# powershell - 为什么从 PowerShell 设置时 shell %variable% 不起作用？

> ID：12594896
> 
> 赞同：0
> 
> 时间：2012-09-26T05:08:27.517
> 
> 标签：powershell, windows-shell

我在我的变量中插入一个变量字符串`PATH`。我以下列方式设置变量：

```
$var="MyTestPath"
$mypath=[environment]::GetEnvironmentVariable("PATH",[system.environmentvariabletarget]::User) 
[environment]::SetEnvironmentVariable("TEST",$var,[system.environmentvariabletarget]::User)
[environment]::SetEnvironmentVariable("PATH",$mypath+";%TEST%",[system.environmentvariabletarget]::User) 
```

上面的代码对我不起作用。`%TEST%`当我检查新 shell 中的路径时，变量不会自行扩展。它显示以 结尾的新路径`%TEST%`。当我从 GUI 或 Windows shell 提示符设置它时，这一直有效。当从 PowerShell 设置变量时，为什么这种行为会有所不同？PowerShell 中是否删除了此功能？

我**不想**执行以下操作，因为每次运行脚本时它都会不断将我的变量添加到路径中。

```
[environment]::SetEnvironmentVariable("PATH",$mypath+";"+$var,[system.environmentvariabletarget]::User) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:24:53.197

尝试更改此行：

```
[environment]::SetEnvironmentVariable("PATH",$mypath+";%TEST%",[system.environmentvariabletarget]::User) 
```

和：

```
$test =[environment]::GetEnvironmentVariable("test","user") # this retrieve the rigth variable value
[environment]::SetEnvironmentVariable("PATH", $mypath +";$test",[system.environmentvariabletarget]::User) 
```

`%test%`在 powershell 中没有任何意义，不能像在 CMD 中那样扩展。

`$env:test`仅从系统环境变量中检索，而不是从用户中检索

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:39:49.403

You're wanting to effectively set a registry value (that corresponds to a env var) that uses REG_EXPAND_SZ. See this [post for details on how to do that](https://stackoverflow.com/questions/11294318/setting-environemnt-type-to-reg-expand-sz-using-powershell).

# android - 为什么我不能创建android虚拟设备？

> ID：12594898
> 
> 赞同：0
> 
> 时间：2012-09-26T05:08:49.047
> 
> 标签：android, eclipse, android-emulator, adt, avd

这个问题有点类似于[Cannot Create Android Virtual Device](https://stackoverflow.com/questions/8378457/cannot-create-android-virtual-device)，**不同的是我试图在windows**而不是ubuntu上创建AVD，**另一个区别是我可以**无错误地创建android 2.2和2.3 AVD，**但未能创建ADV 4.x**，为什么？

**无论如何，我已经为 4.x 安装了 sdk 和 api**。

```
[2012-09-26 13:01:40 - SDK Manager] Warning: Ignoring add-on 'google_apis-10_r02': Unable to find base platform with API level '10'
[2012-09-26 13:01:40 - SDK Manager] Warning: Ignoring add-on 'google_apis-11_r01': Unable to find base platform with API level '11'
[2012-09-26 13:01:40 - SDK Manager] Warning: Ignoring add-on 'google_apis-12_r01': Unable to find base platform with API level '12'
[2012-09-26 13:01:40 - SDK Manager] Warning: Ignoring add-on 'google_apis-13_r01': Unable to find base platform with API level '13'
[2012-09-26 13:01:40 - SDK Manager] Warning: Ignoring add-on 'google_apis-5_r01': Unable to find base platform with API level '5'
[2012-09-26 13:01:40 - SDK Manager] Warning: Ignoring add-on 'google_apis-6_r01': Unable to find base platform with API level '6'
[2012-09-26 13:01:40 - SDK Manager] Warning: Ignoring add-on 'google_apis-7_r01': Unable to find base platform with API level '7'
[2012-09-26 13:02:16 - SDK Manager] Unable to find a 'userdata.img' file for ABI armeabi to copy into the AVD folder. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T05:37:19.607

您必须安装`ARM EABI v7a System Image`才能从 Android 4.0 开始创建模拟器。您可以使用安装图像`Android SDK Manager`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T08:06:16.100

@rIHaN JiTHiN 已经给出了答案。但作为后续行动，我放了一个屏幕截图来展示我们正在谈论的内容。

在给定的屏幕截图中，我没有为 Android 4.2 安装“ARM EABI v7a 系统映像”，而我为 Android 4.1.2 安装了“ARM EABI v7a 系统映像”和“Intel x86 Atom 系统映像”

**编辑/跟进**

我在图片中显示的是 Android 4.2，但对于每个版本的 Android 都是如此。

如果您正在为 MIPS CPU 设备进行开发，您必须安装“MIPS 系统映像”。

最后，您可能必须重新启动 eclipse 才能看到新安装的图像。但对我来说，我总是重新启动一个我更新的软件，以确保它考虑到所有的修改，我认为这样做是一个好习惯。

![在此处输入图像描述](../Images/8d77f0a1f459d4c0e6e4b697dbfd9762.png)

# ios5 - 如何使用来自 iphone 应用程序的 SOAP 请求将图像 + xml 上传到 Web 服务器

> ID：12594900
> 
> 赞同：0
> 
> 时间：2012-09-26T05:09:01.913
> 
> 标签：ios5, soap, uiimage, nsdata

我正在实现一个 iPad 应用程序。在我的应用程序中，我需要从用户那里获取一些信息和个人资料图片，并且需要使用 SOAP 请求将该信息上传到 Web 服务器。我完成了文本输入上传。但是当谈到图像时，我并没有意识到这一点。我知道，要上传图像，我们需要将其转换为 NSData 我做到了，但我怎样才能将它添加到我的帖子字符串中？

我的代码如下：

```
NSData* imageData = UIImagePNGRepresentation(myPic);
NSString* uploadValues=@"";
uploadValues = [uploadValues stringByAppendingString:[NSString stringWithFormat:@"<UserInformation><UserInfo action=\"INSERT\"><Userid>123</Userid><FirstName>abc</FirstName><LastName>xyz</LastName><Contact>00000000</Contact><Email>abc@googole.com</Email><Address>USA</Address><Image>How can I put image data here? is that work if I put data here?</Image></UserInfo></UserInformation>"];
        uploadValues = [uploadValues stringByReplacingOccurrencesOfString:@"(null)" withString:@" "];
        serverConnections=[ServerConnections sharedConnections];
        serverConnections.delegate=self;

        NSString* soapString = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?> \n"
                                "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"> \n"
                                "<soap:Body>\n"
                                "<SetUserInfo xmlns=\"http://example.com/\">\n"
                                "<Data><![CDATA[ %s ]]></Data> \n"
                                "</SetUserInfo> \n"
                                "</soap:Body>\n"
                                "</soap:Envelope>\n",[uploadValues UTF8String]];

        printf("\n Input string:%s",[soapString UTF8String]);

        NSURL *url = [NSURL URLWithString:@"http://example.com/xyz.asmx"];
        NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
        NSString *msgLength = [NSString stringWithFormat:@"%d", [soapString length]];

        [theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
        [theRequest addValue: @"http:/example.com/SetUserInfo" forHTTPHeaderField:@"SOAPAction"];
        [theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
        [theRequest setHTTPMethod:@"POST"];
        [theRequest setHTTPBody: [soapString dataUsingEncoding:NSUTF8StringEncoding]];
        [serverConnections startEstablishingConnectionwithServer:theRequest]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:51:25.220

从[这里](https://stackoverflow.com/a/2901919/932011)

```
 [req addValue:@"image/jpeg" forHTTPHeaderField:@"Content-Type"];
 [req setHTTPBody:imgData] 
```

# c# - 在网页中单击按钮将图像保存到磁盘

> ID：12594902
> 
> 赞同：-2
> 
> 时间：2012-09-26T05:09:21.837
> 
> 标签：c#, javascript, asp.net, jquery

我的 Asp.net 网页中有一些图像。我的要求是在单击保存按钮时将所选图像保存到用户磁盘。通常所有浏览器都提供右键单击另存为选项。但我必须在 html 输入按钮单击时实现此功能。我有以下问题。

1.  我怎样才能制作一个脚本来完成这个功能，它应该适用于所有主要浏览器
2.  我们是否有任何执行此功能的 jQuery 库
3.  我可以在 asp.net 技术中获得任何替代方案，而不是 java script/jQuery 来执行相同的功能吗

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:25:21.233

jQuery 是一个客户端 javascript 库。它不涉及提供文件下载。

您可以在 asp.net 中单击任何按钮提供下载。下载文件不需要 jQuery。

您在事件处理程序中的代码如下所示：

```
 Response.ContentType = "application/octet-stream";
    Response.AddHeader("Content-Disposition", string.Format("attachment; filename=\"{0}\"", fileName));
    Response.WriteFile(filePath + fileName);
    Response.Flush();
    Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:31:20.240

您不能将文件从网站直接写入磁盘，期间。这只是明智的安全措施。常规下载链接/按钮将始终调用浏览器的标准下载过程，您无法确定文件是否将被保存或保存在何处。避免这种情况的唯一方法是创建一个用户必须首先安装的本机浏览器插件，它将文件从您的站点直接写入磁盘上的特定位置。如果您这样做，请非常小心地编写这样的插件，以免它成为每个人的巨大安全漏洞。

# meta-tags - 如何“禁用”移动网页的缩放？

> ID：12594905
> 
> 赞同：0
> 
> 时间：2012-09-26T05:09:58.167
> 
> 标签：meta-tags

我知道这个问题已经被问过很多次并且有不同的解决方案，但我有一个不同的问题。

```
<meta content='True' name='HandheldFriendly' /> 
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' /> 
<meta name="viewport" content="width=device-width" /> 
```

如果我将上面的代码添加到我的 aspx 页面，页面会自动缩放到最大尺寸。我该如何解决？没有上面的代码，网页只放大文本框焦点。我为我的网页使用了液体 CSS 布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T19:28:36.240

我想回答这个问题，但需要更多信息。

你想禁用缩放吗？如果是这样，您希望它默认放大还是默认缩小。

移动文档类型有帮助：!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" " [http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd](http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd) "

如果您不想禁用缩放，请告诉我您要做什么，或者请链接到您的网址。

# java - setComponentOrientation 对表单设计器没有影响

> ID：12594907
> 
> 赞同：0
> 
> 时间：2012-09-26T05:10:08.397
> 
> 标签：java, swing, netbeans, jradiobutton

我有从右到左的 JFrame 与 netbeans 一起摇摆。里面有一个单选按钮，它是`setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT)`。当我执行程序时，方向很好。但在 GUI builder 中显示如下：

![在此处输入图像描述](../Images/818fed0232ae12583dddf1482c072a6f.png)

这是netbeans的问题吗？可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:37:50.423

您可以尝试调用有按钮[`applyComponentOrientation()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#applyComponentOrientation%28java.awt.ComponentOrientation%29)的那个。`Container`由于您使用的是 GUI 编辑器，因此您可能必须使用自定义代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:26:50.450

看起来像 Netbeans Matisse 中的一个错误。您可以在这里创建问题：http: [//netbeans.org/community/issues.html](http://netbeans.org/community/issues.html)

# webgl - 在 webgl 纹理中同步加载原始 jpeg 数据

> ID：12594908
> 
> 赞同：0
> 
> 时间：2012-09-26T05:10:12.693
> 
> 标签：webgl, javascript, texture2d

嗨，我有存储在 Uin8Array 中的 jpeg 压缩数据。我在 Webgl 中阅读了有关纹理的信息。我看到的所有链接在加载图像后初始化纹理（由 jpeg 数据创建，image.src = "some data" image.onload (load texture)）。但这是异步过程。这个过程工作正常。但是我可以使用函数compressedTexImage2D(target, level, internalFormat, width, height, border, data) 内部格式应该与jpeg相关，数据将采用压缩jpeg格式的形式（宽度或高度不是2的pow形式) 所以整个过程应该是同步的？或者 webgl 中的任何其他方法直接采用 jpeg 压缩数据而不加载图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:21:56.700

所以这是一个坏消息，截至 2012 年 9 月，WebGL 实际上并不支持`compressedTexImage2D`. 如果您尝试调用该函数，它将始终返回`INVALID_ENUM`错误。如果您对此感到好奇，请参阅[说明](http://www.khronos.org/registry/webgl/specs/latest/#6.16)它的规范部分。

现在一些好消息是，您可以从`Uint8Array`jpeg 数据创建纹理。我不确定如何同步执行此操作，但也许这段代码无论如何都会有所帮助。

基本上我们必须将原始`Uint8Array`数据转换为base64字符串，这样我们就可以创建一个以base64字符串为图像源的新图像。

所以这里是代码：

```
function createTexture(gl, data) {
    var stringData = String.fromCharCode.apply(null, new Uint16Array(data));
    var encodedData = window.btoa(stringData);
    var dataURI = "data:image/jpeg;base64," + encodedData;

    texture = gl.createTexture();
    texture.image = new Image();

    texture.image.onload = function () {
        gl.bindTexture(gl.TEXTURE_2D, texture);
        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.image);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        gl.bindTexture(gl.TEXTURE_2D, null);
    };

    texture.image.src = dataURI;

    return texture;
} 
```

我在[这里](http://antonpantev.com/projects/so-related/rawjpegdata/)有一个函数的演示。为了保持文件小，我只使用了 24x24 像素的 jpeg。万一您想知道，该功能也适用于非 2 高度/宽度幂的 jpeg。

如果您想查看演示的完整源代码，请查看[此处](https://github.com/antonpantev/so-related/tree/master/rawjpegdata)。

# php - jQuery显示先前输入的值而不是选定的值

> ID：12594911
> 
> 赞同：0
> 
> 时间：2012-09-26T05:10:30.337
> 
> 标签：php, jquery

我在学校做了一个小申请。哪里有`dropdown field`. `dropdown`我拥有所有的，`students name`还有 4 个剩余的输入字段。其中输入字段将具有标记`marks in physics, chemistry, maths`的值，最后一个将生成`total`，这将是`addition of marks in physics+chemistry+maths.` 现在我已经使用了一些`ajax and jquery tricks`并做了一些更改，例如`student name will be selected from the dropdown box it will show the mark for that particular student`物理、化学、数学中的一个。现在我希望将物理、化学、数学的分数加起来，并在总领域求和。为此我写了这样的jQuery

```
 <script type="text/javascript">
  jQuery(document).ready(function(){
    jQuery('#student_name').on('change',function(event){
    var totalmarks = jQuery("#marks_physics").val() + jQuery("#marks_chemistry").val()+ jQuery("#marks_chemistry");
    jQuery("#marks_total").val(totalmarks);
  });
});
</script> 
```

这里 id`student_name`是`dropdown field for the students name`id是应该显示`marks_total`的字段名称。现在我的问题是它在. 假设我有两个名为 的学生。选择一次后，它什么也没有显示，但当我选择它时，它显示了 .I 的值。我也曾使用它代替但它在那里不起作用。所以有人可以告诉我如何解决这个问题。任何帮助和建议都将不胜感激。提前致谢。`total mark``after addition``marks``once the name has been changed in that drop down``A and B``A``B from the dropdown``A``select``change`

**更新**

实际上，它显示了该字段的实际值，但是当我尝试控制台选项卡查看该字段的值时，`console.log(#marks_physics)`它显示了该字段的先前值，并且代替`total`它显示了先前输入的`total marks`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:13:28.847

尝试这个

```
<script type="text/javascript">
  jQuery(document).ready(function(){
    jQuery('#student_name').ajaxComplete(function(event,request,settings){
    var totalmarks = jQuery("#marks_physics").val() + jQuery("#marks_chemistry").val()+ jQuery("#marks_chemistry");
    jQuery("#marks_total").val(totalmarks);
  });
});
</script> 
```

现在您可以提醒您实际输入的值`console.log(#marks_physics)`，它会显示正确的值。

# asp.net-mvc - 模板中的Knockout js字符串格式索引

> ID：12594917
> 
> 赞同：2
> 
> 时间：2012-09-26T05:11:05.687
> 
> 标签：asp.net-mvc, knockout.js

我目前正在研究一些 Knockout js 模板的东西。我的要求是我需要使用字符串和行的索引值的组合来设置字段（输入）的名称。例如“xxx3”。

我尝试了两种选择。

```
'xxx' + ko.utils.arrayIndexOf(viewModel.mycollection, $data) 
```

和

```
'xxx' + $index 
```

第一个选项总是为我的索引值提供'-1'，而第二个选项不起作用，因为我似乎只能使用 $index 值而没有任何字符串连接。

有人可以告诉我是否可以在淘汰赛中将字符串值连接到 $index 值，以便我可以将其设置为输入字段的名称属性。

我想要的最终结果应该是这样的。

```
<input class="text-box single-line" data-val="true" 
   data-val-required="The XXX field is required." id="XXX" type="text" name="XXX3"> 
```

这是我的模板的样子。

```
<table id ="editorRows" class="table">
        <tbody data-bind='template: {name: "rowTemplate", foreach: Rules }'></tbody>
    </table>

    <script id="rowTemplate" type="text/html">
        <tr data-bind="attr: { id: RuleKey }">
            <td>
                <div class="editor-field">
                    <input class="text-box single-line" data-val="true" data-val-required="The Name field is required." id="Name" type="text" data-bind="value: Name, attr: {name : 'Rules[' + $index + '].Name'}" />
                    <span class="field-validation-valid" data-bind="attr : { 'data-valmsg-for': 'Rules[' + $index + '].Name'}" data-valmsg-replace="true"></span>
                </div>
            </td>
</tr>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:54:55.923

`$index`是可观察的，因此您需要调用它来检索值。因此，假设您尝试将属性的值设置为字面意思`Rule[0].Name`，您可以这样做：

```
<input class="text-box single-line" data-val="true" data-val-required="The Name field is required." id="Name" type="text"
       data-bind="value: Name, attr: {name : 'Rules[' + $index() + '].Name'}" />
<span class="field-validation-valid" data-valmsg-replace="true"
      data-bind="attr : { 'data-valmsg-for': 'Rules[' + $index() + '].Name'}"></span> 
```

# android - Mono Android捏缩放同时覆盖ondraw

> ID：12594918
> 
> 赞同：2
> 
> 时间：2012-09-26T05:11:10.620
> 
> 标签：android, zooming, pinch

我已经移植了一些用于将图像视图缩放为 android 的单声道的 android 代码，但我在使用比例检测器焦点时遇到了问题。我需要以编程方式绘制对象，所以我重写了 ondraw 方法。

问题是，当我的缩放比例不是 1 时，如果我捏住绘制对象的一侧，绘制的对象会从捏合焦点跳开，你最终会得到一个焦点，而不是你开始的焦点（如果缩放比例大于 1）。如果缩放比例小于 1，则绘制的对象会跳向捏合焦点。

我几乎什么都试过了，但我一定是太老太累了，因为我就是想不通。

在 ondraw 中，我先缩放然后平移，然后在固定点绘制对象。

我是否以正确的方式处理这件事？我在搜索中找不到任何涉及在画布上的某个点绘制对象同时实现捏缩放的内容。

如果有人可以提供帮助，将不胜感激。

代码如下...

```
class clsTarget : ImageView, ImageView.IOnTouchListener
{
    private ScaleGestureDetector mScaleDetector;
    private ScaleListener sListener;
    private static float mScaleFactor = 0.6F;
    private static float scalePointX;
    private static float scalePointY;

    private static int INVALID_POINTER_ID = -1;
    private int mActivePointerId = INVALID_POINTER_ID;
    private static float mPosX, mPosY, mLastTouchX, mLastTouchY;

    public clsTarget(Context context)
        : base(context)
    {
        this.SetOnTouchListener(this);

        sListener = new ScaleListener();
        mScaleDetector = new ScaleGestureDetector(context, sListener);
        mScaleFactor = 800F / (float)Math.Min(Resources.DisplayMetrics.WidthPixels, Resources.DisplayMetrics.HeightPixels);
    }

    protected override void OnDraw(Android.Graphics.Canvas canvas)
    {
        canvas.Save();

        canvas.Scale(mScaleFactor, mScaleFactor, scalePointX, scalePointY);
        canvas.Translate(mPosX, mPosY);

        Paint p = new Paint(PaintFlags.AntiAlias);
        p.Color = Color.Orange;
        p.SetStyle(Paint.Style.Fill);
        p.StrokeWidth = 1F;
        canvas.DrawCircle(400, 400, 200, p);

        canvas.Restore();
    }

    public bool OnTouch(View v, MotionEvent e)
    {
        mScaleDetector.OnTouchEvent(e);

        switch (e.Action & MotionEventActions.Mask)
        {
            case MotionEventActions.Down:
                float x = (e.GetX() - scalePointX) / mScaleFactor;
                float y = (e.GetY() - scalePointY) / mScaleFactor;

                mLastTouchX = x;
                mLastTouchY = y;

                mActivePointerId = e.GetPointerId(0);
                break;

            case MotionEventActions.Move:
                int pointerIndex = e.FindPointerIndex(mActivePointerId);

                float x2 = (e.GetX(pointerIndex) - scalePointX) / mScaleFactor;
                float y2 = (e.GetY(pointerIndex) - scalePointY) / mScaleFactor;

                float dx = (x2 - mLastTouchX);
                float dy = (y2 - mLastTouchY);

                if (!mScaleDetector.IsInProgress)
                {
                    mPosX += dx;
                    mPosY += dy;

                    mLastTouchX = x2;
                    mLastTouchY = y2;
                }

                this.Invalidate();

                break;

            case MotionEventActions.Up:
                mActivePointerId = INVALID_POINTER_ID;
                break;

            case MotionEventActions.Cancel:
                mActivePointerId = INVALID_POINTER_ID;
                break;

            case MotionEventActions.PointerUp:
                int pointerIndex2 = (int)(e.Action & MotionEventActions.PointerIndexMask) >> (int)MotionEventActions.PointerIndexShift;
                int pointerID = e.GetPointerId(pointerIndex2);

                if (pointerID == mActivePointerId)
                {
                    int newPointerIndex = pointerIndex2 == 0 ? 1 : 0;

                    mLastTouchX = (e.GetX(newPointerIndex) - scalePointX) / mScaleFactor;
                    mLastTouchY = (e.GetY(newPointerIndex) - scalePointY) / mScaleFactor;

                    mActivePointerId = e.GetPointerId(newPointerIndex);
                }

                break;
        }

        return true;
    }

    private class ScaleListener : ScaleGestureDetector.SimpleOnScaleGestureListener
    {
        public override bool OnScale(ScaleGestureDetector detector)
        {
            scalePointX = detector.FocusX;
            scalePointY = detector.FocusY;

            mScaleFactor *= detector.ScaleFactor;
            mScaleFactor = Math.Max(0.5f, Math.Min(mScaleFactor, 7.0f));

            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:13:14.077

对不起，英语不好。

首先，案例MotionEventActions.Move，当ScaleDetector.IsInProgress为真时，设置mLastGestureX和mLastGesturey。

在 OnDraw 中，当 ScaleDetector.IsInProgress 为 false 时，canvas.Scale(mScaleFactor, mScaleFactor,mLastGestureX,mLastGestureY)

代码如下...

```
class ImageViewExt : ImageView
{
    private static int INVALID_POINTER_ID = -1;
    private float mPosX;
    private float mPosY;
    private float mLastTouchX;
    private float mLastTouchY;
    private float mLastGestureX;
    private float mLastGestureY;
    private int mActivePointerId = INVALID_POINTER_ID;

    private ScaleGestureDetector mScaleDetector;
    private static float mScaleFactor = 1.0f;

    public ImageViewExt(Context context):base(context)
    {
        mScaleDetector = new ScaleGestureDetector(Context,new ScaleListener());
    }

    public override bool OnTouchEvent (MotionEvent e)
    {
        mScaleDetector.OnTouchEvent (e);

        //int action = e.Action;
        switch (e.Action & MotionEventActions.Mask) {
        case MotionEventActions.Down:
            if (!mScaleDetector.IsInProgress) {
                float x = e.GetX ();
                float y = e.GetY ();

                mLastTouchX = x;
                mLastTouchY = y;
                mActivePointerId = e.GetPointerId (0);
            }
            break;
        case MotionEventActions.Pointer1Down:
            if (mScaleDetector.IsInProgress) {
                float gx = mScaleDetector.FocusX;
                float gy = mScaleDetector.FocusY;

                mLastGestureX = gx;
                mLastGestureY = gy;
            }
            break;
        case MotionEventActions.Move:
            if (!mScaleDetector.IsInProgress) {
                int pointerIdx = e.FindPointerIndex (mActivePointerId);
                float x = e.GetX (pointerIdx);
                float y = e.GetY (pointerIdx);

                float dx = x - mLastTouchX;
                float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                Invalidate ();

                mLastTouchX = x;
                mLastTouchY = y;
            } else {
                float gx = mScaleDetector.FocusX;
                float gy = mScaleDetector.FocusY;

                float gdx = gx - mLastGestureX;
                float gdy = gy - mLastGestureY;

                mPosX += gdx;
                mPosY += gdy;

                Invalidate ();

                mLastGestureX = gx;
                mLastGestureY = gy;
            }
            break;
        case MotionEventActions.Up:
            mActivePointerId = INVALID_POINTER_ID;
            break;
        case MotionEventActions.Cancel:
            mActivePointerId = INVALID_POINTER_ID;
            break;
        case MotionEventActions.PointerUp:

            int pointerIdx2 = (int)(e.Action & MotionEventActions.PointerIndexMask) >> (int)MotionEventActions.PointerIndexShift;
            int pointerId = e.GetPointerId (pointerIdx2);

            if (pointerId == mActivePointerId) {
                int NewPointerIndex = pointerIdx2 == 0 ? 1 : 0;
                mLastTouchX = e.GetX (NewPointerIndex);
                mLastTouchY = e.GetY (NewPointerIndex);
                mActivePointerId = e.GetPointerId (NewPointerIndex);
            }
            else{
                int TempPointerIdx = e.FindPointerIndex(mActivePointerId);
                mLastTouchX = e.GetX(TempPointerIdx);
                mLastTouchY = e.GetY(TempPointerIdx);
            }
            break;
        }

        return true;
    }

    protected override void OnDraw (Canvas canvas)
    {
        canvas.Save ();

        canvas.Translate (mPosX, mPosY);
        if (mScaleDetector.IsInProgress) {
            canvas.Scale (mScaleFactor, mScaleFactor, mScaleDetector.FocusX, mScaleDetector.FocusY);
        } else {
            canvas.Scale (mScaleFactor, mScaleFactor,mLastGestureX,mLastGestureY);
        }
        base.OnDraw (canvas);
        canvas.Restore();
    }

    private class ScaleListener : ScaleGestureDetector.SimpleOnScaleGestureListener
    {
        public override bool OnScale (ScaleGestureDetector detector)
        {
            mScaleFactor *= detector.ScaleFactor;

            //小さすぎず大きすぎず処理
            mScaleFactor = Math.Max(0.1f, Math.Min(mScaleFactor, 10.0f));

            return true;
        }

    }
} 
```

# git - 合并之前或之后的Git标签？

> ID：12594919
> 
> 赞同：61
> 
> 时间：2012-09-26T05:11:20.803
> 
> 标签：git, git-tag

我有一个关于用 git 标记我的项目的不同版本的简单问题。如果我刚刚完成了我的 1.1 分支并计划将其合并到 master 中，我应该在合并之前将此分支标记为 1.1，还是应该将其合并到 master 然后将其标记为 1.1？无论哪种方式都会有所不同吗？也许一种方式是首选？谢谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-26T05:21:22.970

依靠。分支会快进`master`吗？

如果答案是“是”，那么在进行快进合并之前或之后标记它都没有关系，因为标记的提交将是相同的。

如果答案是“否”，那么您可能应该在合并后对其进行标记`master`（假设您从 中删除版本`master`）。通常，您希望您的标签与您的发布相匹配（以便更容易查看已发布代码的版本），因此您在发布版本的地方标记版本。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-26T05:23:26.960

这完全取决于您的分销模式。如果“master”是您的主要发布行，我想 1.1 在成功合并到主行之前并没有真正“完成”，在这种情况下，您应该在合并后进行标记。

*注意：* 我看到一些项目使用 master 作为开发分支，然后为“稳定”版本（不是我同意的模型）设置单独的分支。在这种情况下，您在合并之前进行标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-14T09:23:05.470

同意@Amber 的回答。（我的首选方式）- 一旦你制定了快进合并策略，那么你在哪里标记你的发布就无关紧要了。这种（仅限ff）合并策略的另一个优点是

*   您可以标记您的版本 (v1.0.1)
*   创建到主分支的拉/合并请求
*   合并前设置一些规则（合并到master之前需要的批准数）
*   生成的 git graph 非常干净

# android - Android 在线 XML 解析问题 - SAX Parser

> ID：12594921
> 
> 赞同：3
> 
> 时间：2012-09-26T05:11:59.870
> 
> 标签：android, xml, parsing, url, sax

尽管我确实有一些 java 知识，但我才刚刚开始进行 android 应用程序开发。

所以我的应用程序都需要`local & internet based xml files`被解析。我确实设法在本地解析它们，但我已经尝试了很长一段时间来解析互联网上的 xml 文件，但没有成功。

我两个都用过`XML Pull Parser & SAX Parser`。此外，我还尝试了多个 XML 文件，但没有任何进展。我发布了一个示例代码，`SAX Parser`其中包含一个 url 上的示例 XML 文件。

在程序中，我要做的只是从元素中读取一个简单的属性，但无法读取文件。

```
import java.net.URL;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;
import android.os.Bundle;
import android.app.Activity;
import android.widget.TextView;

public class WeatherXMLParsing extends Activity 
{
TextView tv;

static final String baseUrl="http://gunsnroses23.zxq.net/ak/catalog.xml";
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_weather);
    tv = (TextView) findViewById(R.id.tv1);

    try
    {
        URL website= new URL(baseUrl);

        //setting up XMLReader & SAXParser to parse data
        SAXParserFactory spf=SAXParserFactory.newInstance();
        SAXParser sp=spf.newSAXParser();
        XMLReader xr=sp.getXMLReader();
        HandlingXMLStuff doingWork= new HandlingXMLStuff();
        xr.setContentHandler(doingWork);
        xr.parse(new InputSource(website.openStream()));
        String information=doingWork.getinformation();
        tv.setText(information);
    }
    catch (Exception e)
    {
        tv.setText("Error");
    }
  }
}

public class XMLDataCollected {

String catalog=null;

public void setCatalog(String c){
    catalog=c;
}
public String datatoString(){
    return "The attribute of catalog is " +catalog;
}
}

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class HandlingXMLStuff extends DefaultHandler 
{
private XMLDataCollected info=new XMLDataCollected();
public String getinformation(){
    return info.datatoString();
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException 
        {
    // TODO Auto-generated method stub
        if (localName.equals("catalog")){
            String catalog=attributes.getValue("journal");
            info.setCatalog(catalog);
        }
    }
} 
```

任何帮助将不胜感激。谢谢你。

更新：

我要感谢所有回答我问题的人。非常感谢，但问题已经解决。代码没有问题。唯一简单的问题是 AndroidManifest.xml 中没有定义“internet”权限。这就是我一遍又一遍地阅读代码后的想法。我找不到任何问题，因为它是一个如此简单的代码，但谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:56:38.390

```
URL url = new URL("http://www.cricinfo.com/rss/content/story/feeds/6.xml");//parsing a sample url
XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
factory.setNamespaceAware(false);
XmlPullParser xpp = factory.newPullParser();
xpp.setInput(getInputStream(url), "UTF_8");
int eventType = xpp.getEventType();
while (eventType != XmlPullParser.END_DOCUMENT) {
if (eventType == XmlPullParser.START_TAG) {

    if (xpp.getName().equalsIgnoreCase("item")) {//first tag is item
        insideItem = true;
    }
}
}

 public InputStream getInputStream(URL url) {  //open connection to url
       try {
           return url.openConnection().getInputStream();
       } catch (IOException e) {
           return null;
         } 
```

这对我解析 rss feed xml 文档确实有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:20:55.933

我认为您在这里所做的事情从一开始就是错误的。我认为实现您想要的最好方法是“使用 android 发出 HTTP 请求”，在您获得响应字符串后，您将像本地一样解析它。请参阅这篇文章如何执行 http 请求：

[使用 android 发出 HTTP 请求](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)

# node.js - 如何使用 node.js 发送 html 邮件并检查用户代理

> ID：12594930
> 
> 赞同：1
> 
> 时间：2012-09-26T05:12:28.893
> 
> 标签：node.js, user-agent, html-email

我已经创建了 html 激活邮件。现在我需要将它发送给用户。我从来没有使用过 node.js，所以我不知道该怎么做。有没有我可以使用的代码示例？还有一个关于用户代理的问题。我可以检查用户是从移动设备还是从 nodejs 中的 desctop 访问我的网站。谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T00:53:55.873

这是有关如何使用 node.js 发送电子邮件的相关问题：

*   [在 Node.js 中发送电子邮件？](https://stackoverflow.com/questions/4113701/)

这是有关如何使用 node.js 检查用户代理的相关问题：

*   [服务器端浏览器检测？节点.js](https://stackoverflow.com/questions/6163350/)

# android - AsyncTask 中的嵌套条件

> ID：12594931
> 
> 赞同：0
> 
> 时间：2012-09-26T05:12:33.680
> 
> 标签：android, android-asynctask

我有多个返回方法的`AsyncTask` `doInBackground`嵌套条件，这使得代码非常复杂有没有其他方法来处理这个问题`String``onPostExectue`

现在我的代码看起来像这样

```
protected String doInBackground(Void... params){
    if (position == 0){ 
         return "Set1" 
    }
    else if(Position >something) { 
         return set 2 
    } .........and so on 
}

@Override
protected void onPostExecute(String result) {
    if (result.equals("set1")){
       // do some taskk
    }
    elseif(result.equal("Set2")){
        // do other task
    }
    else if(){
       // sooo onnnnnn
     }
} 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:09:26.580

可以尝试在此处应用[策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式。你可以创建一个抽象类，比如说`Action`，带有一个抽象函数`perform()`。`Action`然后，您可以为可以在 onPostExecute 中执行的每个操作创建具体的子类。所以你有类说`ActionForSet1`等`ActinForSet2` 具有perform（）的具体实现。然后`Action`应该有一个静态方法`String Action createfromString(String set)`，它与 if/else 或 break 基本相同，但更易于维护。它将为每个字符串返回相应的 Action 子类。您可以在那里使用 Map 而不是 if/else，这样更容易添加/删除元素。然后在你`Action`返回你的对象之后，`Action.createFromString`你调用它`perform()`

```
onPostExecute(String result) {
   Action a = Action.actionForResult(result);
   a.perform();
}

abstract class Action {
  abstract void perform();

  static Action actionForResult(String result) {
      if(result.equals("res1") {
          return new ActionForRes1();
      } else if(result.equals("res2") {
          return new ActionForRes2();
      } else throw new IllegalArgumentException("No action for result " + result);
   }
}

class ActionForResult1 extends Action {
  @Override
  void perform() { Log.i("ACTION", "Here's action for result 1"); }
}

class ActionForResult2 extends Action {
  @Override
  void perform() { Log.i("ACTION", "Here's action for result 2"); }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:44:28.933

简化涉及条件的代码的一种很好的 OO 方法是通过策略模式 (http://en.wikipedia.org/wiki/Strategy_pattern) 替换它们。您可以在此处找到有关此特定重构的一些信息：http: [//www.industriallogic.com/xp/refactoring/conditionalWithStrategy.html](http://www.industriallogic.com/xp/refactoring/conditionalWithStrategy.html)。

基本思想是用策略封装每个条件案例的逻辑，然后委托给策略实例。这会产生比嵌套 if/then/else 或 switch 语句更清晰的代码。

为了说明这一点，假设您有一个复杂的条件逻辑，例如：

```
Entity e = // some entity
if ("TypeOne".equals(e.getType()) {
  // process entity of type one...
} else if ("TypeTwo".equals(e.getType()) {
  // process entity of type two...
} else if ("TypeThree".equals(e.getType()) {
  // process entity of type three...
} else {
  // default processing logic
} 
```

我们可以使用策略模式将其分解为不同的实体处理策略，而不是按程序编写这段逻辑。首先，我们需要定义一个接口，该接口将从所有实体处理策略中共享：

```
public interface EntityProcessingStrategy {
  public void process(Entity e);
} 
```

然后我们为我们的每一个条件案例创建一个具体的策略实现，封装了具体的处理逻辑：

```
public class TypeOneEntityProcessingStrategy {
  public void process(Entity e) {
    // process entity of type one...
  }
}

public class TypeTwoEntityProcessingStrategy {
  public void process(Entity e) {
    // process entity of type two...
  }
}

public class TypeThreeEntityProcessingStrategy {
  public void process(Entity e) {
    // process entity of type three...
  }
}

public class DefaultEntityProcessingStrategy {
  public void process(Entity e) {
    // default entity processing logic...
  }
} 
```

因此，我们之前的代码可以简化为删除条件，如下所示：

```
Entity e = // our entity that needs to be processed
EntityProcessingStrategy strategy = EntityProcessingStrategies.getStrategyFor(e.getType);
strategy.process(e); 
```

请注意，在我的最后一个示例中，我包含了一个 EntityProcessingStrategies 类，该类用作具体策略的工厂。更具体地说，它可以是：

```
public final class EntityProcessingStrategies {

  private EntityProcessingStrategies() { }

  public EntityProcessingStrategy getStrategyFor(String type) {
    if ("TypeOne".equals(type)) return new TypeOneEntityProcessingStrategy();
    if ("TypeTwo".equals(type)) return new TypeTwoEntityProcessingStrategy();
    if ("TypeThree".equals(type)) return new TypeThreeEntityProcessingStrategy();
    return new DefaultEntityProcessingStrategy();
  }
} 
```

这是创建具体策略实例的一种方法，但绝不是唯一的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:18:36.557

如果您只使用这种类型的流程，那么

```
if(){
}
else if(){
}
else if(){
} 
```

然后替代方案是它们类型流的开关盒。您需要从 doInBackground() 以整数而不是 String 的形式返回，并在 switch 中使用整数值。

```
switch(result){
case 0:
    break;
case 1:
    break;
....
} 
```

正如你在这里提到的嵌套。它不是真正的嵌套。嵌套的块之一也有 if 条件

```
if(){
}
else{
    if(){
    }
    else{
        if(){
        } and so on..
    }
} 
```

# networking - 如何在 Web 服务器上找到文件的确切路径

> ID：12594932
> 
> 赞同：0
> 
> 时间：2012-09-26T05:12:38.387
> 
> 标签：networking, webserver

是否可以知道服务器上文件的确切路径。例如，此 URL `http://www.hdfcsec.com/Research/ResearchDetails.aspx?report_id=2987918`解析为 PDF。如何确定 PDF 文件的直接位置？任何工具，如网络连接跟踪或找到相同的指针，都值得赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:17:18.310

没有检查文件的实际来源`ResearchDetails.aspx`并弄清楚它从哪里获取文件，没有。服务器端脚本（和非脚本二进制文件）可以以他们需要的任何方式处理请求并生成任何数据。在某些情况下，PDF 是由脚本动态生成的，根本不作为实际文件存在。

# git - git rename：获取文件名替换列表

> ID：12594936
> 
> 赞同：0
> 
> 时间：2012-09-26T05:13:14.887
> 
> 标签：git, docbook

我重命名了 git 存储库中的许多文件，而没有将它们移动到另一个目录。是否可以获得“重命名列表”，以便我可以更新引用所有这些文件的文件？

背景：我有一个 docbook 文档，并且我有许多必须重命名的图像。现在我喜欢用新的文件名替换 docbook xml 中的所有旧文件名。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:22:41.927

感谢hindol的回答：

stackoverflow 答案发布在此[线程](https://stackoverflow.com/questions/6058101/in-git-how-do-i-get-a-detailed-list-of-file-changes-from-one-revision-to-anothe)中：

使用这些信息，我能够创建一个重命名列表，然后在 python 中编写一些脚本后，我可以重命名工作副本中的文件。

# c# - 在 C# 中通过代理服务器发送邮件

> ID：12594938
> 
> 赞同：0
> 
> 时间：2012-09-26T05:13:42.083
> 
> 标签：c#, email, proxy, smtp

我已经实现了一个桌面应用程序。我需要发送邮件。我的应用程序可以直接发送邮件。现在我需要通过代理服务器连接PC时执行此任务。如果有人之前做过请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:16:02.847

邮件使用 smpt。我假设您的目标是通过 isp/公司提供的代理进行连接。那些通常只处理http/https。您将无法使用此类代理发送邮件，因为它们使用不同的协议。

也许您的 isp/公司有一个可以使用的上游 smtp？

# php - PHP 在服务器 2012 上的 IIS 服务器 8 中不起作用？

> ID：12594942
> 
> 赞同：-1
> 
> 时间：2012-09-26T05:13:59.270
> 
> 标签：php, iis, webserver, windows-server-2012

我正在使用 IIS 在我的计算机上运行我的 php 代码。正如人们在 IIs.net 上描述的那样，我使用来自 php.net 的 PHP 二进制文件。

我已经配置了所有东西，但它显示了一个错误。我该如何解决它。

有人可以帮我解决这个问题。实际上我使用的是 IIS8，但我不确定如何在 Server 2012 上修复它。

简单的 php 文件给了我这个错误

> PHP 警告：phpinfo()：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们现在选择时区“UTC”，但请设置 date.timezone 以选择您的时区。在第 1 行的 C:\inetpub\wwwroot\phpinfo.php

```
[Date]
; Defines the default timezone used by the date functions
; http://php.net/date.timezone
date.timezone =  "Asia/Delhi"

; http://php.net/date.default-latitude
date.default_latitude = 6.116667

; http://php.net/date.default-longitude
date.default_longitude = 106.650002

; http://php.net/date.sunrise-zenith
;date.sunrise_zenith = 90.583333

; http://php.net/date.sunset-zenith
;date.sunset_zenith = 90.583333 
```

**问题是我在博客“Asia/Delhi”上读到无效。更改为“亚洲/加尔各答”适用**于 5.4。

感谢您解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:16:02.487

您必须在 php.ini 文件中设置一个值。

例如，这是我的：

```
[Date]
; Defines the default timezone used by the date functions
; http://php.net/date.timezone
date.timezone = Europe/Paris 
```

# php - Ubuntu 服务器上的 PHP PDO 到 MS SQL Server

> ID：12594945
> 
> 赞同：9
> 
> 时间：2012-09-26T05:14:24.843
> 
> 标签：php, sql-server, pdo

我正在尝试使用 PDO 连接到 MS SQL Server。我试过用这个

```
$db = new PDO("sqlsrv:server=server;database=databaseName", "username", "password"); 
```

我正在阅读不再支持 sqlsrv 。我尝试使用 dblib，但这不起作用。

我想使用 PDO，因为它应该适用于各种数据库，但我似乎无法让它适用于 MS SQL。

在 Ubuntu 上将 PDO 与 SQL Server 一起使用的最佳方式是什么？

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T16:39:18.983

I figured it out. I guess I forgot that I never installed the SQL/Sybase drivers on this server.

I installed it:

```
sudo apt-get install php5-sybase 
```

Now I can use:

```
$db = new PDO("dblib:host=sever;dbname=dbname", "username", "password"); 
```

It's working good now.

# orm - 尝试映射现有数据库时，所有 Fk 的 CTP5 列名 [Name]_Id 无效

> ID：12594953
> 
> 赞同：0
> 
> 时间：2012-09-26T05:15:41.737
> 
> 标签：orm, mapping, entity-framework-5

我试试这个：

```
 Property(c => c.CompanyKindId).HasColumnName("CMPCompanyKindId").HasColumnType("smallint").IsOptional();
 HasOptional(c => c.CompanyKind).WithMany().HasForeignKey(c => c.CompanyKindId); 
```

或这个：

```
HasOptional(c => c.CompanyKind).WithMany().Map(m => m.MapKey("CompanyKindId")); 
```

在测试中，我可以得到所有没有关系的类型的列表，但是所有有关系的类型（上面写了关系的映射代码），我得到一些像这样的错误：

```
 Invalid column name 'CompanyKind_ID' ... 
```

我正在使用 vs 2012 、 sql server 2012 和从 2008 R2 获得的脚本生成的 Db。

***编辑：*** 我忽略了关系和导航属性中的属性：

```
Ignore(c => c.CompanyKind);
Ignore(c => c.CompanyKindId); 
```

但我仍然得到同样的错误。

# jquery - jquery插件通过IE上传多个文件

> ID：12594957
> 
> 赞同：1
> 
> 时间：2012-09-26T05:15:57.667
> 
> 标签：jquery, internet-explorer, file-upload

我正在寻找使用 jquery 和 Ajax 的多个文件上传器插件。我搜索了这样一个插件，发现了几个应该可以正常工作的 jquery 插件。

但是，除了 Mozilla Firefox 之外，没有插件能够在选择窗口中选择要上传的多个文件。

即使在 input type="file" 中设置多个在 Internet Explorer 中也不起作用。

```
<input type="file" name="files[]" multiple> 
```

请向我推荐一个工具插件，它可以在 Internet Explorer 中选择多个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:19:11.687

尝试[下载](http://www.plupload.com)。它在所有浏览器中都能正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T05:21:03.057

这里有一些不错的插件列表。第一个和最后一个是我最喜欢的，你可以选择你最喜欢的。

[jQuery 文件上传插件](http://jquerybyexample.blogspot.com/2012/08/5-best-jquery-file-upload-plugin.html)

# ios - Facebook iOS SDK 3.1：“错误：HTTP 状态代码：400”

> ID：12594965
> 
> 赞同：17
> 
> 时间：2012-09-26T05:16:50.270
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk

我正在使用 iOS6 模拟器在 Xcode 4.5GM 上运行 Facebook SDK 3.1。我在 iOS 设置中连接到 FB，并使用新的 iOS6 FBConnect UI 在我的应用程序中成功连接 FB。我有一个访问令牌，可以看到我的朋友、发送应用程序请求、发布到我的墙上等等。但是，每次我启动任何类型的 FBURLConnection 时，我都会看到这个打印到我的控制台：

```
Error: HTTP status code: 400 
```

当打印此错误时，我进入了 FB 代码并打印了响应，我得到：

```
{
    body =     {
        error =         {
            code = 100;
            message = "(#100) The parameter 'attribution' is required for the 'mobile_app_install' activity";
            type = OAuthException;
        };
    };
    code = 400;
} 
```

有谁知道如何解决这个问题？所有功能似乎都可以工作，但我一直在我的控制台看到这个垃圾邮件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-09T15:04:51.677

创建会话后立即执行以下操作：

```
[FBSession setActiveSession:session]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:59:45.537

据我所知，这是 3.1 SDK 中引入的一个错误。与 Charles 一起查看网络流量，他们试图 POST 到`graph.facebook.com/[user id]/activities`但失败了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T23:55:42.327

经过多次故障排除并查看了有关 Stackoverflow 的所有建议后，我得到了解决此错误 400 (error.code = 5) 的问题。就我而言，解决方案是确保我的 startWithGraphPath 调用中包含的参数（又名 postParams）具有**所**发布内容类型所支持的参数。

更具体地说，我使用@“ref”键（通常用于使用 FB Insights 进行跟踪）发布了指向我/feed 的**链接。**

删除@"ref" 键后，startWithGraphPath 成功。

```
NSMutableDictionary *postParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Test NAME field (from ios app)", @"name",
                                   @"Test caption", @"caption",
                                   @"Test description", @"description",
                                   @"http://example.com/test1.html", @"link",
                                   @"http://example.com/water.jpg", @"picture",
                                   // @"foo", @"ref",  // WRONG!
                                   nil];

[FBRequestConnection startWithGraphPath:@"me/feed"
                             parameters:postParams
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) 
```

我的 activeSession（和所有其他可能的罪魁祸首）签出 OK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:16:14.040

这与我在这里的回答相同：[Facebook SDK 3.1 - Error: HTTP status code: 400](https://stackoverflow.com/questions/12805743/facebook-sdk-3-1-error-http-status-code-400/13415309#13415309)

但它可以帮助人们仍然得到 400 错误。

最初的问题在 3.1 SDK 发布后由 Facebook 解决。

但是有些仍然有问题，如果您遇到此问题，您应该检查登录流程，并查看 facebooks 示例，如果您仍然遇到问题，这可能是解决方案的提示。

当我无权获取我的信息时，我收到了 400 错误。奇怪的是，我得到了一个 accessToken 甚至是一个有效的登录名（这是因为我在根据 Scrumptious 示例的帮助下构建了我的代码，并且在会话状态打开时进行了有效的登录）。

FBSessionState 仅打开一秒钟，然后更改为关闭并出现 400 错误。

使用 iOS6 本地登录，您会在请求时收到权限警报，然后手机会在 24 小时内记住该选择。但是，如果用户登录到 facebook 主页然后删除应用程序的权限，手机将在 24 小时内记住该设置，无论您是否重新安装该应用程序。

这是我在调试几个小时后发现的，因为我从 iOS 的设置中允许了该应用程序，但我无法发布，因为我删除了 facebook 隐私的权限，并且警报不会再次显示，所以我无能为力只能通过调试工具手动授予我权限或等待 24 小时，以便我可以再次接受 facebook 权限警报。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T13:29:08.277

我发现当Facebook=>Open Graph 定义面板中的定义操作类型字段集中`FBErrorHTTPError`出现问题时，也会抛出状态代码 400。`Optional Properties`

在我的情况下，我发布了一个没有标记为属性的操作对象`isRequired`。还要注意`isArray`选项，一般来说，要与您发送的内容正确匹配。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-05T03:21:38.320

这个错误反映了服务器上的一个错误，该错误在 3.1 版本发布后不久就得到了修复。此时不应再有来自此请求的失败。希望这可以帮助！

# c# - 带有模板控件的 ASPxGridView 需要更多时间在 IE 9.0 和 10 中显示数据

> ID：12594966
> 
> 赞同：1
> 
> 时间：2012-09-26T05:16:54.483
> 
> 标签：c#, asp.net, .net

我正在开发显示学生出勤率的 ASPxGridView。为此，我通过 sqlqry 过滤 1600 名学生中的 60 名学生。网格控件是在设计环境中创建的，有两列 RollNo 和 Name 以及两列模板列（即 ASPxCombobox 用于出席状态和 ASPxTextBox 用于备注。设计窗口代码如下所示。

**[HTML]**

```
<dx:ASPxGridView ID="dxgrd_StudentAttendance" runat="server" Theme="Glass" Width="800px"  AutoGenerateColumns="False" onprocesscolumnautofilter="dxgrd_StudentAttendance_ProcessColumnAutoFilter">

<Columns>                        
<dx:GridViewDataTextColumn FieldName="roll_no" VisibleIndex="1" Caption="Roll No" Width="70px">
</dx:GridViewDataTextColumn>
<dx:GridViewDataTextColumn FieldName="Name" VisibleIndex="2" Caption="Name of the Student" Width="300px">
</dx:GridViewDataTextColumn>

<dx:GridViewDataColumn FieldName="Attendance" VisibleIndex="3" Caption="Attendance Status" Width="100px">
<DataItemTemplate>

                            <dx:ASPxComboBox ID="dxcb_AttStatus" runat="server" ValueType="System.String" Theme="Glass" Width ="100px">
                                <Items>
                                    <dx:ListEditItem Text="Present" Value="P" Selected ="true" />
                                    <dx:ListEditItem Text="Absent" Value="A" />
                                    <dx:ListEditItem Text="Leave" Value="L" />
                                    <dx:ListEditItem Text="OnDuty" Value="O" />
                                </Items>
                            </dx:ASPxComboBox>

                        </DataItemTemplate>

                    </dx:GridViewDataColumn>

                    <dx:GridViewDataColumn FieldName="Remarks" VisibleIndex="4" Caption="Remarks" Width="230px">
                        <DataItemTemplate>
                            <dx:ASPxTextBox ID="dxtxt_Remarks" runat="server" ValueType="System.String" Theme="Glass" Width="230px"/>
                        </DataItemTemplate>                        
                    </dx:GridViewDataColumn>
                </Columns>
                <Settings ShowFilterRow="True" />
                <SettingsBehavior AllowFocusedRow="True" />
                <SettingsPager 
                    NumericButtonCount="90" 
                    PageSize="90" 
                    RenderMode="Lightweight">
                </SettingsPager>
                <Settings ShowFooter="True" />
                <Styles>
                    <Header HorizontalAlign="Center">
                    </Header>
                </Styles>
                <TotalSummary>
                    <dx:ASPxSummaryItem 
                        FieldName="Name" 
                        SummaryType="Count" ShowInColumn="Name"/>                    
                </TotalSummary>
            </dx:ASPxGridView> 
```

在 C# 代码窗口中，在代码窗口中配置和输入的数据库如下所示

**[C#代码]**

```
SqlDataSource sqlds_StudentAttendanceSection = new SqlDataSource();
SqlDataSource sqlds_StudentAttendanceDept = new SqlDataSource();

sqlds_StudentAttendanceSection.SelectCommand = String.Format("Select b.roll_no, b.Name from tbl_AcademicYear a, tbl_Student_Master b, tbl_Dept_Master c," +
                                                                " tbl_Semester_Master d, tbl_Subject_Master e, tbl_Subject_Dept_Assigned f, tbl_Scheme_master g" +
                                                                " where a.AcademicYear=b.AcademicYear and b.Dept_Code=c.Dept_Code and d.Semester_ID=f.semester_id" +
                                                                " and e.Sub_Code=f.Sub_Code and c.Dept_Code = f.dept_code and g.Sch_Code=a.Sch_Code and" +
                                                                " e.Sub_Code='{0}'and a.AcademicYear='{1}'and c.Dept_Code='{0}'order by b.Roll_No",
                                                                   dxcbSubject.Value,
                                                                   dxcbAcademicYear.Text,
                                                                   dxcbDepartment.Value);
                sqlds_StudentAttendanceDept.ConnectionString = frmAttendance.strCon;
                dxgrd_StudentAttendance.DataSource = sqlds_StudentAttendanceDept;
                dxgrd_StudentAttendance.DataBind(); 
```

问题是，在没有模板控制的情况下在 aspxgridview 中显示数据所花费的时间是可以接受的（比如 1 或 2 秒）。但是使用模板控件，在 aspxgridview 中显示数据所需的时间约为 15 到 20 秒（这是不可接受的）。提供的任何帮助或建议将对我有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:21:49.413

你可以用这个

AspxScheduler 控件和gridview

像这样

[http://www.tanvtech.com/Products/SchoolStudentScheduler.aspx](http://www.tanvtech.com/Products/SchoolStudentScheduler.aspx)

# c++ - 编译器特定的核心转储

> ID：12594967
> 
> 赞同：0
> 
> 时间：2012-09-26T05:17:04.333
> 
> 标签：c++, compiler-construction, redhat

我为电信应用产品工作。在过去的几天里，我的 C++ 代码遇到了问题。我的任务是让产品在`HP server with RHEL`（Red Hat Enterprise Linux）操作系统上运行。而且我正面临应用程序的每个流程的核心转储。对于每个核心转储，堆栈由于某种未知原因而损坏。但是相同的代码在`Windriver 2.0 as well as 4.0`. 然而，在进行一些研发时，我增加了堆栈大小`10MB to unlimited`，现在我不再看到核心转储了。但是 windriver 可以正常使用 even `8MB`。我认为它是一些编译器特定的问题。如果有人对这个问题有所了解，那将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:27:01.123

您需要将堆栈大小设置为无限制的编译器似乎比 Windriver 使用更多的堆栈空间。考虑到堆栈的使用高度依赖于编译器的优化方式，这并不奇怪。例如，内联函数会减少堆栈的使用。

# openssl - 为 Win32 编译 OpenSSL-0.9.7 时出错

> ID：12594968
> 
> 赞同：0
> 
> 时间：2012-09-26T05:17:07.407
> 
> 标签：openssl

我正在从 VC++ 环境提示符在 Win32 上安装 OpenSSL openssl-0.9.7。当我运行以下命令时：

> nmake -f ms\ntdll.mak

我得到以下结果

```
Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

Building OpenSSL
        copy nul+ .\crypto\buildinf.h tmp32dll\buildinf.h
nul
.\crypto\buildinf.h
        1 file(s) copied.
        cl /Fotmp32dll\cryptlib.obj  -Iinc32 -Itmp32dll /MD /W3 /WX /G5 /Ox /O2
/Ob2 /Gs0 /GF /Gy /nologo -DOPENSSL_SYSNAME_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDI
AN -DDSO_WIN32 -DBN_ASM -DMD5_ASM -DSHA1_ASM -DRMD160_ASM /Fdout32dll -DOPENSSL_
NO_KRB5 -D_WINDLL  -DOPENSSL_BUILD_SHLIBCRYPTO -c .\crypto\cryptlib.c
cl : Command line warning D9002 : ignoring unknown option '/G5'
cryptlib.c
C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\errno.h(92) : error C22
20: warning treated as error - no 'object' file generated
C:\Program Files\Microsoft Visual Studio 10.0\VC\INCLUDE\errno.h(92) : warning C
4005: 'EADDRINUSE' : macro redefinition
        tmp32dll\e_os.h(156) : see previous definition of 'EADDRINUSE'
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 10.0\VC\BI
N\cl.EXE"' : return code '0x2'
Stop. 
```

我正在使用 Visual Studio 2010。问题是什么以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:36:06.650

您是否查看过给出构建步骤的 .txt 文件？我已经解决了这个问题。它应该工作。

# java - 在给定范围之间生成奇数随机数

> ID：12594974
> 
> 赞同：7
> 
> 时间：2012-09-26T05:18:12.187
> 
> 标签：java, math, random

如何在给定范围内生成奇数随机数..

例如：对于 1 到 6 之间的范围 .. 随机编号是 3 或 1 或 5

产生随机数的方法：

```
 Random_No = Min + (int)(Math.Random()*((Max-Min)+1)) 
```

请参阅[如何在 Java 中生成特定范围内的随机整数？](https://stackoverflow.com/questions/363681/generating-random-number-in-a-range-with-java)

生成奇数随机数的方法：

```
 Random_No = Min + (int)(Math.Random()*((Max-Min)+1))
    if(Random_No%2 ==0)
    {
          if((Max%2)==0)&&Random_No==Max)
          {
              Random_No = Random_No - 1;  
          }
          else{
              Random_No = Random_No +1;
          }
    } 
```

此函数将始终将 2 转换为 3 而不是 1 我们可以使它成为一个更随机的函数，它可以将 2 有时转换为 3 有时转换为 1 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T05:22:37.413

假设 max 是包容性的，我建议如下：

```
if (Max % 2 == 0) --Max;
if (Min % 2 == 0) ++Min;
Random_No = Min + 2*(int)(Math.random()*((Max-Min)/2+1)); 
```

它导致所有奇数之间的均匀分布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T05:21:56.287

如果您还想在方向上包含随机性，请使用随机数。

```
 int  randomDirection = Min + (int)(Math.Random()*((Max-Min)+1));
  if(randomDirection%2==0) {  // any condition to switch the direction 
      Random_No = Random_No + 1;  
  } else {
      Random_No = Random_No - 1;  
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T05:21:20.027

与其生成 0 到 6 之间的随机数，不如生成 0 到 5 之间的随机数并四舍五入到最接近的奇数，这样您就可以得到完美的分布（每种可能性 33%（1、3、5））

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T05:29:05.073

为此，您需要生成第二个伪随机数来加或减 1

```
Random_No = Min + (int)(Math.Random()*((Max-Min)+1))
repartitionNumber =(int)(Math.Random()*((2)) // between 0 and 1
if(Random_No%2 ==0)
{
      if(Random_No+1<=Max && Random_No-1>=Min)
      {
          if(repartitionNumber==0)
              Random_No = Random_No + 1; 
          else
              Random_No = Random_No - 1;  
      }
      else if(Random_No+1<=Max)
          Random_No = Random_No + 1;
      else if (Random_No-1>=Min)
          Random_No = Random_No - 1;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T05:34:23.273

我想知道为什么其他答案都使用 int cast 来生成随机数。为什么不直接生成**随机整数**，比实数方式更准确？

```
Random rn = new Random();
if(maximum % 2 == 1) maximum = maximum + 1; // turn right bound to even
if(minimum % 2 == 0) minimum = minimum - 1; // turn left bound to odd
int range = (maximum - minimum + 1) / 2;
int randomNum =  rn.nextInt(range) * 2 + minimum; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T07:17:55.737

要从整数生成奇数，您可以使用`n * 2 + 1`真的，您正在生成随机数并随后应用转换

```
int num = min / 2 + random.nextInt((max + 1) / 2 - min / 2);
num = num * 2 + 1; 
```

即使范围是 [1,5] [2,5] [2,6] [1,6]，这也会起作用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T05:26:14.150

在数学上，数字不会通过在最后一步向上或向下舍入来获得任何收益。相反，第一个和最后一个数字被选中的机会比所有其他数字低 50%。

坚持使用 CrazyCasta 或 JA 的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-26T05:31:09.000

如何将 Math.random() 的返回值检查为浮点数。如果它的 int 部分是偶数，则根据它的浮动部分向上/向下转换。像：

假设 Math.random() 返回 xy；如果 x 是偶数，则返回 (y>=0.5)?(x+1):(x-1)

这会随机化一点吗？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-13T19:37:19.517

让上面或下面的路由取决于一个随机的 epsilon。

```
 Random_No = Min + (int)(Math.Random()*((Max-Min)+1))
    if(Random_No%2 ==0)
    {

          if((Max%2)==0)&&Random_No==Max)
          {
              Random_No = Random_No - 1;  
          }
          else{
              epsilon = Math.Random();
              if(epsilon > 0.5)
                  Random_No = Random_No + 1;
              else
                  Random_No = Random_No - 1;
          }
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-31T04:59:17.177

**在 Java 1.7 或更高版本中，我会使用[ThreadLocalRandom](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadLocalRandom.html#nextInt-int-)：**

```
import java.util.concurrent.ThreadLocalRandom;

// Get odd random number within range [min, max]
// Start with an odd minimum and add random even number from the remaining range
public static int randOddInt(int min, int max) {
    if (min % 2 == 0) ++min;
    return min + 2*ThreadLocalRandom.current().nextInt((max-min)/2+1);
}

// Get even random number within range [min, max]
// Start with an even minimum and add random even number from the remaining range
public static int randEvenInt(int min, int max) {
    if (min % 2 != 0) ++min;
    return min + 2*ThreadLocalRandom.current().nextInt((max-min)/2+1);
} 
```

[这里](https://stackoverflow.com/a/23396067/215120)解释了使用 ThreadLocalRandom 的原因。另请注意，我们对 ThreadLocalRandom.nextInt() 的输入 +1 的原因是确保最大值包含在范围内。

# c# - 位图是某种系统资源吗？

> ID：12594978
> 
> 赞同：1
> 
> 时间：2012-09-26T05:18:29.133
> 
> 标签：c#, image

> **可能重复：**
> [何时需要 Dispose？](https://stackoverflow.com/questions/1209585/when-is-dispose-necessary)
> [当没有剩余内存时，.Net 和 Bitmap 不会被 GC 自动处理](https://stackoverflow.com/questions/5838608/net-and-bitmap-not-automatically-disposed-by-gc-when-there-is-no-memory-left)

经过一轮的拉扯后，我终于发现我的罪魁祸首是在调整大小操作中重新分配了位图对象。经过足够的重新分配后，系统退出尝试绘制位图（未调用 Paint 事件）并且变得非常生涩。

在分配新的位图之前处理旧的位图修复了它。

这表示必须有一些基础资源（不仅仅是内存）被孤立那些旧位图所用。

我认为位图只是我可以留给垃圾收集器的内存块。这是怎么回事？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T05:25:17.613

MSDN 声明 Bitmap 封装了一个 GDI+ 对象。因此，我希望您在不再需要这些系统资源时必须调用 Dispose() 来释放它们。

编辑：位图是图像的子类，以下 MSDN 语句适用

> 在释放对图像的最后引用之前，请始终调用 Dispose。否则，在垃圾收集器调用 Image 对象的 Finalize 方法之前，它正在使用的资源不会被释放。

# escaping - 在 zsh 中转义百分比符号

> ID：12594983
> 
> 赞同：0
> 
> 时间：2012-09-26T05:19:03.823
> 
> 标签：escaping, zsh

如何将百分比符号添加到 zsh 中的变量？

```
export number_e164='%2B12125551234';
echo $number_e164; 
```

退货

```
1m12125551234%2B12125551234 
```

在我的机器上。

[本文](http://wiki.zoelife4u.org/index.php/Zsh%3aPrompt_Control_Sequences)建议连续使用两个百分比符号 -`%%`以获得百分之一。

但是运行：

```
export number_e164='%%2B12125551234';
echo $number_e164; 
```

退货

```
%%2B12125551234 
```

这是百分之二。我如何获得只有百分之一的符号？

# ios - 如何使用 NSStreamEventOpenCompleted 回调 NSStreamDelegate？

> ID：12594987
> 
> 赞同：33
> 
> 时间：2012-09-26T05:19:25.083
> 
> 标签：ios, iphone, cocoa-touch, nsstream

我一直在研究`NSStreamDelegate`，我已经实现了回调，我已经初始化了输入和输出流，就像这样......

```
 CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStringRef host = CFSTR("74.125.224.72");
    UInt32 port = 2270;

    CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, host, port, &inputStream, &writeStream);

    if (writeStream && inputStream) {

        inputStream = (__bridge  NSInputStream *)readStream;
        [inputStream setDelegate:self];
        [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [inputStream open];

        outputStream = (__bridge  NSOutputStream *)writeStream;
        [outputStream setDelegate:self];
        [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [outputStream open];
     } 
```

即使在打开两个流之后，`callback(stream:(NSStream *)theStream handleEvent:)`也不会`NSStreamEventOpenCompleted`为两个流调用流。谁能帮助我我在这里做错了什么。或者什么是`NSStreamEventOpenCompleted`不会被调用的可能性，我在文档中看到，如果打开失败它不会调用这个，如果是这样，为什么打开流失败。任何想法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T20:04:15.567

我使用非常相似的代码，它对我来说很好。试试下面的代码。

```
 NSString* host = @"192.168.2.105";
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    UInt32 port = 8008;

    CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, (__bridge CFStringRef)(host), port, &readStream, &writeStream);

    if (writeStream && readStream) {

        self.InputStream = (__bridge  NSInputStream *)readStream;
        [self.InputStream setDelegate:self];
        [self.InputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [self.InputStream open];

        self.OutputStream = (__bridge  NSOutputStream *)writeStream;
        [self.OutputStream setDelegate:self];
        [self.OutputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [self.OutputStream open];
    } 
```

如果它不适合您，我可以给您发送一个实现 TCP 客户端和服务器的小应用程序，例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-17T02:38:14.503

如果是在新的 NSThread 中运行，请确保线程的运行循环在流设置后启动，如 CFRunLoopRun();

# jsf-2 - 如何在 JSF 中动态设置 ID 中的数字

> ID：12594989
> 
> 赞同：1
> 
> 时间：2012-09-26T05:19:30.953
> 
> 标签：jsf-2, facelets, uirepeat

我在 JSF2 和 Facelets 的帮助下设计了一个 JavaEE 网站。超出的代码只是 JSF 代码的示例。

当网站的用户想要创建新用户但忘记设置例如名字时，会发生错误并且元素将被突出显示（元素周围的红色和红框）。为了突出显示，我必须使用该属性：

class="#{faceletUtils.getLabelStyleClass('createUsersForm:allUsers:0:firstName')}"

问题是我必须动态设置数字 0，但据我所知，JSF 中不允许嵌套。我可以使用 #{curUser.number} 来获取号码。

**问题：**如何设置 for 和 class 属性中的数字？

for="createUsersForm:allUsers:0:firstName" class="#{faceletUtils.getLabelStyleClass('createUsersForm:allUsers:0:firstName')}"

**JSF 代码示例：**

```
<h:form id="createUsersForm">
  <ui:repeat id="allUsers" value="#{createUserController.users}" var="curUser">
    <div class="formLine">
      <label for="createUsersForm:allUsers:0:firstName" class="#{faceletUtils.getLabelStyleClass('createUsersForm:allUsers:0:firstName')}">
        <h:outputText value="#{userStaticText['user.firstName.label']}"/>
      </label>
      <h:inputText id="firstName" value="#{curUser.firstName}" class="#{faceletUtils.getLabelStyleClass('createUsersForm:allUsers:0:firstName')}"/>
    </div>
  </ui:repeat>
</h:form> 
```

最好的问候，贾娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:38:31.807

只需使用`<h:outputLabel>`而不是`<label>`. JSF 将自动使用正确的`for`值。此外，您可以使用`#{component.clientId}`获取当前组件的客户端 ID（尽管我认为突出显示无效字段的特定功能要求可以通过[更简单](http://showcase.omnifaces.org/components/highlight)的方式解决）。

```
<h:form id="createUsersForm">
  <ui:repeat id="allUsers" value="#{createUserController.users}" var="curUser">
    <div class="formLine">
      <h:outputLabel for="firstName" styleClass="#{faceletUtils.getLabelStyleClass(component.clientId)}"
          value="#{userStaticText['user.firstName.label']}"/>
      <h:inputText id="firstName" value="#{curUser.firstName}" styleClass="#{faceletUtils.getLabelStyleClass(component.clientId)}"/>
    </div>
  </ui:repeat>
</h:form> 
```

请注意，我也修复了错误的`class`属性`<h:inputText>`。

# ruby - 使用 Jekyll 插件在 _site 内生成文件

> ID：12594990
> 
> 赞同：2
> 
> 时间：2012-09-26T05:19:31.477
> 
> 标签：ruby, jekyll, jekyll-extensions

我编写了一个 Jekyll 插件“Tags”，它生成一个文件并返回指向该文件的链接字符串。

一切都很好，但是如果我将该文件直接写入 _site 文件夹，它将被删除。如果我将该文件放在 _site 文件夹之外，它不会在 _site 中生成。

我应该在哪里以及如何添加我的文件，以便它在 _site 文件夹中可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:31:26.773

您应该`Page`为此使用类并调用方法`render`和`write`.

这是在我的博客上生成[存档页面](http://izidor.matusov.sk/archive.html)的示例：

```
module Jekyll
  class ArchiveIndex < Page
    def initialize(site, base, dir, periods)
      @site = site
      @base = base
      @dir = dir
      @name = 'archive.html'
      self.process(@name)
      self.read_yaml(File.join(base, '_layouts'), 'archive_index.html')
      self.data['periods'] = periods
    end   
  end

  class ArchiveGenerator < Generator
    priority :low

    def generate(site)
        periods = site.posts.reverse.group_by{ |c| {"month" => Date::MONTHNAMES[c.date.month], "year" => c.date.year} }

        index = ArchiveIndex.new(site, site.source, '/', periods)
        index.render(site.layouts, site.site_payload)
        index.write(site.dest)
        site.pages << index
    end
  end
end 
```

# jquery - attr中的href不起作用

> ID：12594992
> 
> 赞同：-3
> 
> 时间：2012-09-26T05:19:59.013
> 
> 标签：jquery

选择单选按钮后尝试交换图像，第二张图像是链接。图片在点击时成功交换，但第二张图片没有链接。

```
<script type="text/javascript">
$(document).ready(function() { 
  $('#chkImg').click(function() {
      if($('#chkImg:checked').val()!=null) {
          $('#imgImage').attr({ src: 'circle.png' , href: 'http://www.google.com' })
      }
  })
})
</script>

<input type="radio" name="chkImg" id="chkImg">
<img id="imgImage" name="imgImage" src="square.png"> </p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:23:29.787

您必须使用`<a>`标签才能使`href`属性起作用。

```
$('#imgImage').attr({ src: 'circle.png' })
  .wrap('<a href="http://www.google.com">'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:26:55.210

href 仅在`<a />`标签内有效。如果您希望您的`<img />`标签是可点击的，您可能想尝试使用 javascript 进行重定向：

```
$('#imgImage')
  .attr({ src: 'circle.png' })
  .click(function() { window.location = 'http://www.google.com' }); 
```

# opencv - EmguCV - 找不到 nvcuda.dll

> ID：12594993
> 
> 赞同：16
> 
> 时间：2012-09-26T05:20:00.937
> 
> 标签：opencv, cuda, emgucv

我被要求构建一个实时人脸识别应用程序，经过一番环顾后，我决定尝试 EmguCV 和 OpenCV 作为人脸识别库。

我目前遇到的问题是尝试安装 SDK 并使其正常工作。我已按照[此处](http://www.emgu.com/wiki/index.php/Download_And_Installation)找到的说明尝试运行它，但我仍然无法运行示例。每当我尝试运行它们时，我都会收到错误消息

```
The program can't start because nvcuda.dll is missing from your computer. 
Try reinstalling the program to fix this problem. 
```

我已经尝试了大多数常见的修复方法，例如将 bin 文件夹添加到我的环境路径并将 dll 复制到我的 system32 文件夹中，但似乎都不起作用。

*   EmguCV 版本 2.4.2.1777-windows-x64-gpu
*   视窗 8
*   AMD Radeon HD 6700 系列显卡。

我假设这是我没有 nVidia 显卡这一事实的问题，但我不确定我能做些什么。现在，我将尝试重新编译源代码而不是使用下载的 .exe，看看是否有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T18:56:17.780

有同样的问题，EmguCV 2.4.2（无论是 x86 还是 x64）是用 GPU 编译的，你必须有支持 CUDA 的 nvidia GPU。所以，如果你想要例如。C# 中 2.4 的 Fisherfaces - 等待非 GPU 版本或购买/借用 CUDA 卡；）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T03:59:39.963

我碰巧遇到了和你一样的问题。在我的电脑（WinXP 32 位）上一切正常，但在 Win7 64 位电脑上却不行。这是因为在我的计算机上我已经安装了 OpenCV 2.4.2，当我执行我的程序时，OpenCV dll 的路径指向 OpenCV 文件夹，而不是 EmguCV 文件夹中的 dll。原始的 OpenCV dll 对 NVidia 的驱动程序没有这种依赖性。

[正如这里](http://www.emgu.com/wiki/index.php/Download_And_Installation#Are_you_missing_any_dependency.3F)所建议的，我使用[Dependency Walker](http://www.dependencywalker.com/)帮助我找出发生了什么。

[这个](http://www.emgu.com/wiki/index.php/Download_And_Installation#GPU_package)链接说只有 -gpu 包启用了 gpu 处理，但正如你所说的最新版本（2.4.2）只有一个 gpu 包，没有 no-gpu 包......

[我在这里](http://developer.nvidia.com/cuda/cuda-faq)读到，我所需要的只是下载最新的 NVidia 驱动程序来获取 nvcuda.dll 文件，但我下载了很多包，但从未找到这个文件：[gpu 计算 sdk、cuda 工具包](http://developer.nvidia.com/cuda/cuda-downloads)、显示驱动程序、设备驱动程序......

[我的解决方法是使用OpenCV 2.4.2](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.2/)中的原始 dll，而不是使用旧版本的 EmguCV/OpenCV 。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T13:46:42.497

我刚刚使用了来自[dll-files.com](http://www.dll-files.com/dllindex/dll-files.shtml?nvcuda)的 nvcuda.dll。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T02:24:23.347

问题似乎在于该站点上的最新版本不包含非 GPU 增强下载，而 GPU 增强下载需要 nVidia 显卡才能集成 CUDA。

我成功下载并运行了没有 GPU 增强功能的先前版本。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-02T02:02:16.483

我有类似的问题。当我使用 NVIDIA gpu 在计算机上编译和运行我的应用程序时，它工作正常。问题是当我将应用程序移动到另一台计算机时。第二台计算机没有 NVIDIA gpu，它抛出了“Emgu.CV.CvInvoke”异常。经过多次尝试，我幸运地解决了这个问题。正如你之前提到的，现在只有 2.4.2 版的 gpu 包。我以前没有注意到这一点。

对我来说，解决方案是：

*   将文件：“cudart64_42_9.dll”和“npp_42_9.dll”复制到调试（应用程序）文件夹中
*   将文件“nvcuda.dll”复制到 System32 文件夹中。在此步骤之后，即使没有 NVIDIA gpu/CUDA，应用程序也可以在所有计算机上运行。

其他解决方案可能是使用 opencv 通用 gpu 版本（现在是 alpha 2.4.9）链接：http: [//sourceforge.net/projects/emgucv/files/emgucv/2.4.9-alpha/](http://sourceforge.net/projects/emgucv/files/emgucv/2.4.9-alpha/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T22:19:47.827

您可以从 GIT 下载源 EmguCV 并编译它，我已经完成了这个并且可以工作：

[http://www.emgu.com/wiki/index.php/Download_And_Installation#Building_from_Git](http://www.emgu.com/wiki/index.php/Download_And_Installation#Building_from_Git)

它生成非 GPU 版本的 dll

问候。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-21T00:52:54.217

这也是 dll 的另一个副本： [http ://www.kimchiandchips.com/files/vvvv/nvcuda/](http://www.kimchiandchips.com/files/vvvv/nvcuda/)

所以2个解决方案：

1.  从上面的链接获取 NVidia CUDA DLL。理想情况下，根据您所需的平台将 64 位或 32 位版本重命名为 nvcuda.dll。放在你的opencv dll旁边
2.  升级到具有通用 GPU 支持的 2.4.9

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-19T13:03:48.497

在使用 EmguCV 进行人脸识别时，我也遇到了一些问题。尽量用最稳定的版本 libemgucv-windows-x86-2.4.0.1717.exe 尽量不要用gpu下载，这个版本bug最少，32位比x64好。首次编译时使用 Visual Studio 2012。使用此版本，您无需安装上述所有内容。您可以查看此示例以了解它确实有效：http: [//sourceforge.net/projects/emgufacerecog/](http://sourceforge.net/projects/emgufacerecog/)

# c# - 使用 C# Mongo 驱动程序进行查询而不创建查询对象？

> ID：12594995
> 
> 赞同：2
> 
> 时间：2012-09-26T05:20:25.347
> 
> 标签：c#, mongodb, mongodb-.net-driver

根据文档，可以通过使用 .Net 的 MongoDB 驱动程序创建 Query 对象来查询 MongoDB，是否有任何替代方法可以使用 MongoDB 查询字符串查询 MongoDB？

我想在 JavaScript 中生成 MongoDB 查询字符串并将其传递给 MongoDB 驱动程序而不创建查询对象。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:35:16.107

使用 Eval()，例如：`database.Eval("return 1;");`.