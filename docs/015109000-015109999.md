# StackOverflow 问答 15109000-15109999

# php - PHP无法从mysql中提取数据

> ID：15109001
> 
> 赞同：0
> 
> 时间：2013-02-27T09:54:08.613
> 
> 标签：php, mysql

我正在尝试使用 php 从 mysql 表中提取数据，这是我的代码。此代码位于 html 正文中。

```
<?php
    // Connects to your Database
    mysql_connect("localhost", "xxxxx", "Hxxxxxx") or die(mysql_error());
    mysql_select_db("core_config") or die(mysql_error());

    $data = mysql_query("SELECT * FROM vrf group by vrf") or die(mysql_error());

    Print "<table border cellpadding=3>";

        while ( $info = mysql_fetch_array ( $data )) {
            Print "<tr>";
            Print "<th>Name:</th> <td>".$info['Switch'] . "</td> ";
            Print "<th>Name:</th> <td>".$info['vlan'] . "</td> ";
            Print "<th>Name:</th> <td>".$info['ip_address'] . "</td> ";
            Print "<th>Pet:</th> <td>".$info['vrf'] . " </td></tr>";
        }

    Print "</table>";
?> 
```

由于某种原因，当我在浏览器中执行 html 时，我没有得到想要的结果。我得到以下输出。

```
 "; while($info = mysql_fetch_array( $data )) { Print ""; Print "Name: ".$info['Switch'] . " "; Print "Name: ".$info['vlan'] . " "; Print "Name: ".$info['ip_address'] . " "; Print 
"Pet: ".$info['vrf'] . " "; } Print ""; ?> 
```

我已经进行了广泛的研究，但我似乎无法让它发挥作用，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:56:35.007

将文件另存`.php`为`.html`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:57:48.880

PHP 是区分大小写的，要么将您的 Change Print 更改为 echo 或将 Print 更改为 print

```
print "abccdd"; 
```

或者

```
echo "abc"; 
```

使用扩展名 .php 而不是 .html 保存文件

在您的代码中发现的另一个错误是

```
 Print "<table border cellpadding=3>"; 
```

将其更改为

```
 print "<table border='cellpadding=3;'>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:02:03.137

这是你的代码`echo`

```
<?php
   // Connects to your Database
   mysql_connect("localhost", "xxxxx", "Hxxxxxx") or die(mysql_error());
   mysql_select_db("core_config") or die(mysql_error());

   $data = mysql_query("SELECT * FROM vrf group by vrf") or die(mysql_error());

   echo "<table border cellpadding=3>";

      while ( $info = mysql_fetch_array ( $data )) {
         echo "<tr>";
         echo " <th>Name:</th> <td>".$info['Switch'] . "</td> ";
         echo " <th>Name:</th> <td>".$info['vlan'] . "</td> ";
         echo " <th>Name:</th> <td>".$info['ip_address'] . "</td> ";
         echo "<th>Pet:</th> <td>".$info['vrf'] . " </td></tr>";
      }

   echo "</table>";
?> 
```

试试这个代码。它应该是工作。（未测试）

```
<?php
   // Connects to your Database
   mysql_connect("localhost", "xxxxx", "Hxxxxxx") or die(mysql_error());
   mysql_select_db("core_config") or die(mysql_error());

   $data = mysql_query("SELECT * FROM vrf group by vrf") or die(mysql_error());

    // Print table header
   echo "<table border cellpadding=3>
                <tr>
                    <th>Name:</th>
                    <th>Name:</th>
                    <th>Name:</th>
                    <th>Pet:</th>
                </tr>";

   while ( $info = mysql_fetch_array ( $data )) {
      echo "<tr>
                <td>".$info['Switch']."</td> 
                <td>".$info['vlan']."</td> 
                <td>".$info['ip_address']."</td> 
                <td>".$info['vrf'] . "</td>
            </tr>";
   }
   echo "</table>";
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:02:51.717

您的代码根本不会被执行。确保您已正确命名脚本（通常应以 .PHP 结尾）并且您已正确配置服务器以运行 PHP 脚本。

这是服务器配置或文件命名问题，而不是 PHP 编程问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:06:22.557

所以你的代码没有被 PHP 解释器解析。我认为打印结果集并不是唯一不起作用的。

> 由于某种原因，当我在浏览器中执行 html 时，我没有得到想要的结果。

你需要做所有这些事情：

*   安装和配置 Web 服务器
*   安装和配置 PHP 解释器
*   `.php`使用扩展名保存文件
*   确保通过网络服务器加载文件，例如`http://...`在浏览器中输入 -something，而不是使用文件/打开。

`echo`在尝试更复杂的东西之前，确保你能够完成一个简单的陈述。

# php - 如何将元素值为1的所有元素名称放入数组中？

> ID：15109005
> 
> 赞同：1
> 
> 时间：2013-02-27T09:54:20.517
> 
> 标签：php, xml, simplexml

这是我的 XML 数据的示例：

```
<features>
    <bedrooms>1</bedrooms>
    <bathrooms>1</bathrooms>
    <ensuite></ensuite>
</features> 
```

我是这样访问的：

```
$data->features; 
```

我基本上想让它循环通过，如果它有一个 1 它将它添加到一个数组中。

然后我可以内爆，并得到以下结果：

```
bedrooms, bathrooms 
```

上面不存在套间，因为它没有套间。

如何循环遍历并将其添加到数组中？

我试过了：

```
foreach($data->features as $key => $val){
    $features[] = $val;
} 
```

但这不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:05:48.180

```
foreach($data->features as $child){
    foreach ($child as $k => $v){
        if ($v == 1){
            $features[] = $k;
        }
    }
} 
```

这似乎有效，但这是一个好方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:03:18.477

使用 simplexml：

```
$lib  = simplexml_load_file("test.xml");
$children = $lib->children()[0];
$features = array();

foreach($children as $node){
  $features[] = $node->title;
}

print_r($features); 
```

# c# - WP7 日期没有国际化？

> ID：15109006
> 
> 赞同：4
> 
> 时间：2013-02-27T09:54:23.530
> 
> 标签：c#, windows-phone-7, datetime, internationalization, formatting

我有一个应用程序可以正确提取资源本地化。但是，日期时间的数据绑定始终使用 en-US 格式显示。

我在启动期间检查了 App 类，并且 CurrentCulture 和 CurrentUICulture 都设置为预期的文化。

据我所知，我没有应用日期格式。

我应该如何获取当前文化格式的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:24:51.227

您必须将属性的数据类型更改`StartDate`为字符串：

```
string _startDate;
public string StartDate
{
    get { return _startDate; }
    set
    {
        _startDate = value;
        OnPropertyChanged("StartDate");
    }
} 
```

当您将值分配给 时，请在方便时`StartDate`使用该方法的以下重载之一`ToString()`：

```
StartDate = DateTime.Now.ToString();
StartDate = DateTime.Now.ToString("d");
StartDate = DateTime.Now.ToString("D"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:27:45.227

与其将 DateTime 传递给视图并依靠绑定将其转换为正确的格式，不如创建一个附加属性来包装现有属性，但应用适当的转换/格式。
例如

```
public class MyViewModel
{
    public DateTime StartDate { get; set; }

    public string LocalizedStartDate
    {
        get
        {
            return this.StartDate.ToString(CultureInfo.CurrentUICulture);
        }
    }
} 
```

然后绑定：

```
<TextBlock Text="{Binding LocalizedStartDate}" .... /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T14:21:51.827

原来有一个非常简单的解决方案。

通过添加[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)并在绑定表达式中使用转换器，但忽略文化参数，格式可以完美地工作。
对于每种不同的格式，您都需要一个转换器（如果您不使用参数）。

转换器（从示例中删除了属性）：

```
public class DateConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        DateTime date = (DateTime)value;
        return date.ToShortDateString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string strValue = value as string;
        DateTime resultDateTime;
        if (DateTime.TryParse(strValue, out resultDateTime))
        {
            return resultDateTime;
        }
        return DependencyProperty.UnsetValue;
    }
} 
```

命名空间

```
xmlns:conv="clr-namespace:Sjofartsverket.LotsPDA20.Client.Converters" 
```

资源

```
<conv:DateConverter x:Key="dateConverter" /> 
```

绑定表达式：

```
<TextBlock Text="{Binding StartDate, Converter={StaticResource dateConverter}}" 
```

结果：日期以正确的文化呈现。

# facebook - 有没有办法 pushState() facebook 画布中的父窗口？

> ID：15109011
> 
> 赞同：9
> 
> 时间：2013-02-27T09:54:35.947
> 
> 标签：facebook, iframe, same-origin-policy, facebook-canvas, pushstate

我希望我的 facebook 画布应用程序能够在更改上下文时更新地址栏 URL。因此，例如，如果我的应用程序的主页 URL 是`https://apps.facebook.com/myapp/`，并且用户单击主屏幕上的某个项目，我希望地址栏中显示的 URL 更改为`https://apps.facebook.com/myapp/1/`或`https://apps.facebook.com/myapp/#1`。

通常，我的应用程序可以使用 HTML5 的`history.pushState()`. 问题是，画布应用程序在 iframe 内运行，并且无法访问父窗口`pushState`（因为 iframe 与 apps.facebook.com 的域不同）。另一种技术应该只更改地址的哈希部分，即`window.location.hash = "1"`，但出于同样的原因，这在 iframe 内也是不可能的。

可以通过使用重新加载整个页面来更改父页面 URL

```
window.parent.location = "https://apps.facebook.com/myapp/1/" 
```

但是，这会导致父页面重新加载，占用大量秒数，然后重新加载 iframe - 总而言之，对于用户来说，这是一个非常漫长且令人沮丧的体验。

有没有一种我没有想到的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T17:47:28.500

我几乎可以肯定，如果没有 Facebook 的特别帮助，就没有办法做到这一点。例如，Facebook 可以在画布页面上实现一个脚本，该脚本利用`postMessage`( [https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage) ) 来侦听来自 iframe 的跨域消息。

但如果没有 Facebook 的合作，我认为任何现代的标准浏览器都不会允许您这样做。

# android - android.app.Fragment 和 android.support.v4.app.Fragment 的区别

> ID：15109017
> 
> 赞同：176
> 
> 时间：2013-02-27T09:54:51.937
> 
> 标签：android, android-fragments

`android.app.Fragment`和之间有什么区别`android.support.v4.app.Fragment`，应该在什么情况下使用它们？

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2013-02-27T10:00:07.797

`android.support.v4.app.Fragment`是android支持库中的[Fragment](http://developer.android.com/reference/android/support/v4/app/Fragment.html)类，它是一个兼容包，可以让你在旧版本的Android上使用Android的一些较新的特性。

`android.app.Fragment`是 Android SDK 原生版本中的[Fragment](http://developer.android.com/reference/android/app/Fragment.html)类。它是在 Android 3 (API 11) 中引入的。

如果你想让你的应用使用 Fragments，并且想要针对 API 11 之前的设备，你必须使用`android.support.v4.app.Fragment`. 但是，如果您只针对运行 API 11 或更高版本的设备，则可以使用`android.app.Fragment`.

编辑：操作系统包含`android.app.Fragment` [现在已弃用](https://developer.android.com/reference/android/app/Fragment)（从 API 级别 28 开始），每个人都应该转向使用支持库实现。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2018-03-19T08:56:44.180

截至 2018 年：

从`android.app.Fragment` [文档](https://developer.android.com/reference/android/app/Fragment.html)：

> 此类在 API 级别 28 中已弃用。
> 使用支持库`Fragment`在所有设备上实现一致的行为并访问生命周期。

`android.support.v4.app.Fragment`所以现在应该到处使用支持片段（ ）而不是原生片段（ `android.app.Fragment`）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-27T10:00:49.223

我`android.support.v4.app.Fragment`专门用。

我编写的所有应用程序都需要支持回 Android 2.3，这是最简单的方法。

如果您支持 11+，请坚持使用`android.app.Fragment`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-18T11:19:32.267

如果您的应用程序针对 API 11 或更高版本，您可以使用`android.app.Fragment`并且您的 APK 文件会更小。

否则，将`android.support.v4.app.Fragment`库添加到您的项目中以支持较旧的 android API 版本（Android 3.x）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T10:04:32.823

`android.support.v4.app.Fragment`是一个库，您可以使用它来获得旧 API 版本的向后兼容性。

在 API 级别 11 上添加了片段（以及其他功能），您应该包含该库以将这些功能扩展到 API 11 之前的设备。这是一个有用的库，我建议看看 ActionBarSherlock，它将操作栏扩展到 API v11 之前的设备。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-03-25T13:46:34.190

如果您的应用程序针对 API 11 或以上级别，您可以使用 android.app.Fragment ，它会减少 APK 大小。否则使用 android.support.v4.app.Fragment

# php - ios JSON 将字符串值解析为

> ID：15109027
> 
> 赞同：1
> 
> 时间：2013-02-27T09:55:23.083
> 
> 标签：php, ios, json, ios6, nsjsonserialization

我的应用程序从我的 php Web 服务接收到一个 json 响应，其中包含一组数据。如果我在 web 服务中打印出数组，我会在我的应用程序中收到以下内容，看起来不错。

```
NSLog(@"data: %@", [[NSString alloc] initWithData:downloaddata encoding:NSASCIIStringEncoding]); 
```

输出：

```
[0] => Array
        (
            [id] => 3
            [title] => some title //MySQL varchar(60), utf8_unicode_ci
            [description] => some description //MySQL text, utf8_unicode_ci
            [type] => AUDIO //MySql enum
            [created] => 2013-02-25 00:00:00
            [edited] => 2013-02-25 00:00:00
            [version] => 1
            [courserooms_id] => 1
        )

    [1] => Array
        (
            [id] => 4
            [title] => some other title
            [description] => some other description
            [type] => MOVIE
            [created] => 2013-02-12 00:00:00
            [edited] => 2013-02-14 00:00:00
            [version] => 1
            [courserooms_id] => 1
        ) 
```

在 iOS 中，我使用 NSJSONSerialization 解析接收到的数据。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSError* error;
    NSDictionary* json = [NSJSONSerialization
                          JSONObjectWithData:downloaddata

                          options:kNilOptions
                          error:&error];
    NSLog(@"error: %@", [error localizedDescription]);

    NSLog(@"json: %@", json);
} 
```

输出：

在输出中，数组的字符串值为空，我不知道为什么。

```
{
            "courserooms_id" = 1;
            created = "2013-02-25 00:00:00";
            description = "<null>";
            edited = "2013-02-25 00:00:00";
            id = 3;
            title = "<null>";
            type = AUDIO;
            version = 1;
        },
                {
            "courserooms_id" = 1;
            created = "2013-02-12 00:00:00";
            description = "<null>";
            edited = "2013-02-14 00:00:00";
            id = 4;
            title = "<null>";
            type = MOVIE;
            version = 1;
        } 
```

我的 php webservice 返回内容类型：text/html; charset=utf-8 知道为什么字符串解析为 null 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:02:57.770

将编码设置为 NSUTF8StringEncoding。它可能会解决您的问题。

NSLog(@"data: %@", [[NSString alloc] initWithData:downloaddata encoding:NSUTF8StringEncoding]);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:34:56.700

我解决了这个问题。问题是我没有在我的 php web 服务的 mysql 查询中设置字符集。在我的数据库中，我使用了排序规则 latin1_swedish_ci。我的数据库中的值包含一些字符，如 'ü' 'ä' 等，这些字符无法在我的 ios 应用程序中正确解码。在使用以下语句准备我的查询后：

```
$query->prepare("SET CHARACTER SET utf8"); 
```

我的服务的响应是 utf-8 编码，我可以从 json 响应中声明 NSStrings，因为 NSStrings 默认使用 utf-8 编码。

所以问题与字符串编码不正确有关。

# jquery - 在页面加载时展开的徽标

> ID：15109029
> 
> 赞同：0
> 
> 时间：2013-02-27T09:55:25.927
> 
> 标签：jquery

我有一个问题，是否可以在 jQuery 中实现这种效果： [http ://www.oakhurstproperty.co.uk/](http://www.oakhurstproperty.co.uk/)

我需要徽标开始变小并像上面页面加载链接中的那样扩展。这只是徽标部分，我不需要上面的图像或输入站点位。

我对 jQuery 很陌生，所以任何帮助将不胜感激！

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:58:20.527

是的，你应该看看[jQuery Animate](http://api.jquery.com/animate/)。

如果您对 jQuery 有一点了解，这应该是一项相当容易的任务，我建议您阅读[jQuery 入门](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)指南。

[Codecademy](http://www.codecademy.com/)是一个很好的网站，您可以在其中获得一些简单的任务来帮助您入门，他们也有一个[jQuery 轨道](http://www.codecademy.com/tracks/jquery)，您将在其中学习一些基本的东西。不会花很长时间，而且根据我的经验，大多数人学习基础知识的速度都很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:28:06.107

希望这可以帮助你

**jQuery**

```
$('document').ready(function() 
       {
           $('#zoomimg').animate({width: "75%", height: "75%"}, 'slow');
       }); 
```

**html**

```
<div id="logo">
<img id="zoomimg" src="http://www.google.com/images/srpr/logo3w.png" width="144" height="48" border="0" />
</div> 
```

**css**

```
#logo{
    width:100%;
    text-align: center;
    margin:50px 0 0;
} 
```

# java - 我可以有一个没有键的非空哈希图吗？

> ID：15109034
> 
> 赞同：0
> 
> 时间：2013-02-27T09:55:32.343
> 
> 标签：java, jakarta-ee, map, hashmap, key

在仅用于测试的部分代码上，我在 java HashMap 上有一个奇怪和意外的行为。

为了在将对象存储在会话中之前尝试为其设置唯一 ID，我使用了一条`if{}else{}`语句，但我发现自己的应用程序出现错误。

ID 是出于测试目的而生成的，因为目前没有数据库来实际存储数据，同时存储在 session 中。

这是我的代码片段：

```
 ...
 HttpSession session = request.getSession();
 Map<Integer, Booking> bookings = (HashMap<Integer, Booking>) session.getAttribute(SESSION_BOOKINGS);

 // Generates ID
 if (bookings == null)
 {
      bookings= new HashMap<Integer, Booking>();
      identificator = 1;
 }
 else
 {
      Object[] arrayKeys = (Object[]) bookings.keySet().toArray();
      Arrays.sort(arrayKeys);
      identificator = (Integer) arrayKeys[arrayKeys.length - 1] + 1;
 }

 ...
 //... The rest is setting the ID to the current worked on booking,
 //... putting the ID/booking pair in the bookings map
 //... and storing the map in session, which worked fine 
```

当地图只包含一个预订时，删除地图中的预订后出现错误。当我在那之后尝试再注册一个时，我收到了一个错误，错误原因如下`java.lang.ArrayIndexOutOfBoundsException: -1`，并且跟踪链接到我的`else`语句的最后一行：`identificator = (Integer) arrayKeys[arrayKeys.length - 1] + 1;`

所以：

1.  `arrayKeys.length -1 == -1 // true`
2.  意思就是`arrayKeys.length == 0 // true`
3.  这反过来意味着`keySet()`from`Map<Integer,Booking> bookings`是空的

4.  但是测试没有进入`if`语句

另一方面，在一个全新的会话上（在重新启动浏览器或注销并再次登录之后），测试确实按预期输入了 if 语句。

测试后，我将状态从 更改`(bookings==null)`
为`(bookings==null || bookings.isEmpty())`。
进一步的测试表明，`(bookings.isEmpty()`在新会话上注册预订时，仅使用导致 NPE。

所以我想知道一个 Map 是否有可能是 non-null 并且其中没有任何值（显然，是的，但我也在问自己如何）以及它为什么在完全清空后没有返回 null ?

尽管我在`new`声明之后知道它是空的，但它在`session.getAttribute()`调用之后是怎么来的？这似乎很明显，因为会话中还没有存储 Map，但同时由于没有`new`声明，这看起来很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:03:25.663

如果

```
 if (bookings == null) 
```

是真的，而不是你没有地图（这**与空地图不同**）。

如果`else`执行该块，则表示引用了一个地图。您对地图中的元素数量一无所知。你可能想要这样的东西：

```
if (bookings == null)
{
     bookings= new HashMap<Integer, Booking>();
     identificator = 1;
} else if (bookings.isEmpty())
{
     identificator = 1;
}
else
{
     identificator = Collections.max(bookings.keySet()) + 1;
} 
```

要回答这个问题：

> 为什么完全清空后它没有返回null？

看看这段代码：

```
Map<Integer, Booking> map = new HashMap<>(); 
```

我从未在地图中输入任何键/值对，所以它是空的。这与我将一些键/值对放入其中然后再次删除它们的状态相同。是空的`map`，但它没有理由是`null`。如果是这样，`null`我们以后就不能再添加任何东西了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:05:11.223

A`HashMap`可以是`null`（如果未初始化）或空（如果已初始化但未输入对象）。从地图中删除对象会将其返回到“空”状态（而**不是** `null`）。

`new`语句为对象分配内存，并将其创建为空`HashMap`（而**不是**空）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:06:32.813

*为空*和为*空*是完全不同的概念。当一个变量（引用类型）为空时，它不指向任何地方。你根本没有`HashMap`。你只有一个空*指针*（不是空的`HashMap`）。您`HashMap`使用`bookings = new HashMap<Integer, Booking>()`. 之后你有一个*空* `HashMap`的. 你确实有一个`HashMap`，但里面什么都没有。

此外，当您从 中删除所有元素时`HashMap`，它会变为*空*，而不是*null*。要做到这一点`null`，您必须明确地这样做：

```
bookings = null; 
```

# android - Android：在 4.2 Jellybean 上“android:configChanges”不适用于区域设置更改

> ID：15109037
> 
> 赞同：1
> 
> 时间：2013-02-27T09:55:38.130
> 
> 标签：android

我设计了用于在应用程序生命周期中处理区域设置更改的应用程序。in 条目`manifest` `android:configChanges="locale"`运行良好并调用`onConfigurationChanged`in 活动，该活动处理与语言环境相关的代码。

但同样的逻辑不适用于 4.2`JellyBean`设备。

调用活动`onDestroy`而不是`onConfigurationChanged`何时`locale`更改。

这是 4.2 特有的吗？如何处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T21:05:39.737

不幸的是，由于某种原因，Android 在 4.2 上过滤掉了 CHANGE_CONFIGURATION 权限。

您可以在此处阅读更多信息：[Android 4.2 过滤掉 CHANGE_CONFIGURATION 权限？](https://stackoverflow.com/questions/13440045/android-4-2-filters-out-change-configuration-permission)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T08:39:55.873

你可以在这里找到答案：[onConfigurationchanged is not called over jellybean(4.2.1)](https://stackoverflow.com/questions/13856229/onconfigurationchanged-is-not-called-over-jellybean4-2-1)

您需要添加`layoutDirection`属性，示例代码如下：

```
android:configChanges="locale|layoutDirection" 
```

# iphone - 无需点击图标即可打开应用程序

> ID：15109040
> 
> 赞同：8
> 
> 时间：2013-02-27T09:55:42.437
> 
> 标签：iphone, ios, xcode, uibutton, uigesturerecognizer

有什么方法可以通过外部音量按钮或 iPhone 上的任何其他手势来启动应用程序，而不是通过默认方式启动？

或者

当应用在后台时，我们的应用能否识别用户与音量按钮的交互？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:13:28.387

> 无需点击图标即可打开应用程序

您可以通过触发本地或推送通知来打开应用程序，它允许您在允许的情况下进入您的应用程序。这是你标题的答案，希望对你有帮助。检查有关此的苹果[文档](https://developer.apple.com/notifications/#next)。对于您的详细问题，上面给出了答案。我知道答案是无关紧要的，但如果你正在尝试这样的事情，希望它对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:56:41.053

> 有什么方法可以通过外部音量按钮或 iPhone 上的任何其他手势来启动应用程序，而不是通过默认方式启动？：

不，这是不可能的。现在是允许的。你没有办法做到这一点。**Apple 在用户体验**部分不允许这样做。除非用户不点击图标，否则您无法强制打开您的应用程序。

> 当应用在后台时，我们的应用能否识别用户与音量按钮的交互？：

是的，它确实识别出音量变化。但是，您无法通知您的应用用户正在执行某些操作。并根据音量变化执行任何操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T10:00:36.243

> 有什么方法可以通过外部音量按钮或 iPhone 上的任何其他手势来启动应用程序，而不是通过默认方式启动？

我很确定这是不可能的。

> 当应用在后台时，我们的应用能否识别用户与音量按钮的交互？

好吧，还有其他应用程序可以识别这一点，例如 Spotify 和 Sonos，所以这是可能的。

**播放背景音频**

连续播放音频的应用程序（即使应用程序在后台运行时）可以通过在其 Info.plist 文件中包含 UIBackgroundModes 键（带有值音频）注册为后台音频应用程序。包含此密钥的应用程序必须在后台向用户播放有声内容。

[苹果参考“播放背景音频”](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)

[确保屏幕锁定时音频继续播放](http://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html#//apple_ref/doc/uid/TP40007875-CH6-SW32)

为了启用/禁用此功能，我发现[Activating and Deactivating Your Audio Session](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html#//apple_ref/doc/uid/TP40007875-CH3-SW23)，我自己没有尝试过，但它看起来像你需要的。

我不知道这是否适用于除背景音频以外的其他操作...

# objective-c - 在 UIButton 上添加图像？

> ID：15109043
> 
> 赞同：1
> 
> 时间：2013-02-27T09:55:50.923
> 
> 标签：objective-c

我正在`UIButtons`使用图像。现在我希望能够在`UIImage`按下该按钮时在该按钮上方设置另一个，并在再次按下时将其移除。

列表的某种复选标记。

**编辑：**

我在按钮上的图像是来自手机内存的图像。我不能只是将图像更改为另一个图像，因为图像是从内存加载的，而不是外部资产。所以我需要在所有按下的按钮上方放置一些固定图像。

1.  我应该把它作为另一个添加`UIButton`到以前的吗？
2.  我应该把它放在它`UIImage`上面吗？它`UIButton`仍然会被触及吗？

什么是最好的方法？谢谢。

```
UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(column*100+10, row*100+10, 92, 92); // distnace related to scroller(not view)
        [button setImage:thumb forState:UIControlStateNormal];
        [button addTarget:self
                   action:@selector(buttonClicked:)
         forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:34:19.077

由于您有自定义按钮，最好的解决方案是根据您拥有的复选框的状态更改按钮的图像（您提到这个想法是创建类似于复选框按钮的东西）。

UIButton 类中有一个名为“setImage:forState:”的方法。您可以使用上述方法更改按钮内的图像。[在此处](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)查看更多信息

示例我如何查看代码（您可以以另一种方式查看）：

```
// bool property
@property (assign) BOOL isChecked;
....
// custom button
UIButton *theCheckboxButton = ;
[theCheckboxButton setImage:[UIImage imageNamed:@"Unchecked"] forState:UIControlStateNormal];
[theCheckboxButton setImage:[UIImage imageNamed:@"Checked"] forState:UIControlStateSelected];
[theCheckboxButton addTarget:self action:@selector(checkBoxButtonAction:) forControlEvents: UIControlEventTouchUpInside];
...
// handler
- (void)checkBoxButtonAction:(UIButton *)aCheckBox
{
    self.isChecked = !self.isChecked;
    [aCheckBox setImage:[UIImage imageNamed:(self.isChecked ? @"Checked" : @"Unchecked")] forState:UIControlStateNormal];
    [theCheckboxButton setImage:[UIImage imageNamed:(self.isChecked ? @"Unchecked" : @"Checked")] forState:UIControlStateSelected];
} 
```

**编辑：**

```
// images from not external resources
@property (strong) UIImage *checkedImage;
@property (strong) UIImage *uncheckedImage;
// bool property
@property (assign) BOOL isChecked;
...
// custom button
UIButton *theCheckboxButton = ;
[theCheckboxButton setImage:self.uncheckedImage forState:UIControlStateNormal];
[theCheckboxButton setImage:self.checkedImage forState:UIControlStateSelected];
[theCheckboxButton addTarget:self action:@selector(checkBoxButtonAction:) forControlEvents: UIControlEventTouchUpInside];
...
// handler
- (void)checkBoxButtonAction:(UIButton *)aCheckBox
{
    self.isChecked = !self.isChecked;
    [aCheckBox setImage:self.isChecked ? self.checkedImage : self.uncheckedImage] forState:UIControlStateNormal];
    [theCheckboxButton setImage:(self.isChecked ? self.uncheckedImage : self.checkedImage) forState:UIControlStateSelected];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:05:09.413

好吧..您可以使用多种选择来做到这一点：
1.`UIImageView`在您的按钮上方添加并添加`UITapGestureRecognizer`到图像视图，方法是在第二次单击时将其删除。
2\. 您还可以将按钮的背景颜色与完全适合您的按钮的图案图像一起使用（以避免重复）。
3.使用图层`CGImageRef`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:05:21.653

您绝对应该使用 UIButton 提供的 API：`setImage:forState:`使用 UIControlStateSelected（单击一次按钮后应获得的状态）/ UIControlStateNormal。按钮可以是`highlighted`或`selected`。突出显示的是当你推动它时，（一旦触摸停止就消失），第一次触摸后选择设置为“是”，第二次返回为“否”。

# java - 接收流后关闭套接字连接 - java

> ID：15109050
> 
> 赞同：0
> 
> 时间：2013-02-27T09:56:17.113
> 
> 标签：java, sockets, network-programming, tcpclient, tcpserver

我制作了一个 tcp 服务器，它从客户端获取文件名并读取位于服务器上的文件的内容，然后将其流式传输回客户端。

我还做了一个客户来接收文件。我的问题是在客户端收到文件后，如何终止循环，以便关闭连接？

这是服务器代码：

```
import java.io.*;
import java.net.*;
import java.util.*;

public class WebTCPServer_file {
    public static void main(String argv[]) throws Exception{
        String request;
        ServerSocket welcomeSocket = new ServerSocket(6790); //opening socket
        while(true){
            Socket connectionSocket = welcomeSocket.accept();
            Scanner inFromClient = new Scanner(connectionSocket.getInputStream());
            DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
            request = inFromClient.nextLine(); //client request
            System.out.println("Received: "+request);

            /*dividing request command*/
            String reqMeth = request.substring(0, 3);
            String reqURL = request.substring(5, (request.lastIndexOf("HTTP/1.1")));
            String reqProto = request.substring(request.indexOf("HTTP/1.1"));
            System.out.println("Request Method:\t" +reqMeth +"\nRequest URL:\t" +reqURL+ "\nRequest Protocol: " +reqProto);

            File localFile = new File(reqURL.trim());
            FileReader in = new FileReader(localFile);
            BufferedReader inBuff = new BufferedReader(in);

            String c;
            while((c = inBuff.readLine())!=null){                   
                outToClient.writeBytes(c + '\n');                   
                System.out.println(c);
            } //END while
            outToClient.flush();
            in.close();

        } //END while(true)
      } //END main
} //END class 
```

这是客户端代码：

```
import java.io.*;
import java.net.*;
import java.util.*;
public class TCPClient_file {

    public static void main(String[] args) throws Exception{
        String sentence ;
        Scanner inFromUser = new Scanner(System.in);
        Socket clientSocket = new Socket("192.168.0.16", 6790);
        DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());

        BufferedReader inFromServer = new BufferedReader(
                            new InputStreamReader(
                                    clientSocket.getInputStream()));

        sentence = inFromUser.nextLine();

        outToServer.writeBytes(sentence + '\n');

        String serverfile;

        while ((serverfile = inFromServer.readLine()) != null) 
            System.out.println(serverfile);

        inFromServer.close();   
        outToServer.close();
        clientSocket.close();
    }   //END main

}   //END class 
```

来自服务器的客户端请求如下：

```
GET /domains.txt HTTP/1.1 
```

其中“domains.txt”是服务器上包含网站列表的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:01:55.843

while 循环不会终止，因为`inFromServer`需要更多数据。您需要关闭`outToClient`服务器端的连接 ( )，以便客户端可以确定没有更多数据传入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:02:35.510

实现这一点的一个粗略方法是发送一个触发器[String from server]，在将所有数据发送到客户端后，表明文件传输完成，在客户端你可以检查这个字符串，在收到这个字符串后你可以出来你的while循环，可以关闭连接。

另一种更好的方法是，在服务器端在发送实际文件内容之前先发送文件的大小，然后发送实际的文件数据，在客户端跟踪读取的字节，一旦你读取了等于前面发布的大小的字节你可以终止你的while循环

# c# - 同一域中的 MVC 和经典 ASPX 应用程序

> ID：15109055
> 
> 赞同：0
> 
> 时间：2013-02-27T09:56:27.853
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在将一个经典的 aspx 应用程序转换为 MVC。

在经典的 aspx 应用程序中还有另一个应用程序，如下所示：

foo.com/ - 主应用程序。

foo.com/bar/ - 包含另一个应用程序。

我正在用 MVC 重写 foo.com，并且很好奇如何将 foo.com/bar/ 存储在 MVC 应用程序中。我应该创建另一个文件夹并将 foo.com/bar 的 aspx 应用程序存储在此文件夹中吗？

做这个的最好方式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:02:50.670

你有几个选择：

使用区域： http: [//msdn.microsoft.com/en-us/library/ee671793 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)

但我只会在应用程序相互协作时才会这样做，因此是相关的。

如果这些应用程序是完全独立的，我建议您创建一个子文件夹。这对我来说更有意义。

# c# - 通过输入文本文件在 C# 中搜索并返回唯一字符串值计数？

> ID：15109067
> 
> 赞同：1
> 
> 时间：2013-02-27T09:57:04.903
> 
> 标签：c#

我有以下格式的日志文件：

```
INFO [SearchServices] WX Search = Server:nomos-scanner.corp.adobe.com User:ashishg appGUID: wx Elapsed Time:875ms SaveSearchID:361
INFO [SearchServices] WX Search = Server:nomos-scanner.corp.adobe.com User:ashishg appGUID: wx Elapsed Time:875ms SaveSearchID:361
INFO [SearchServices] WX Search = Server:nomos-scanner.corp.adobe.com User: ashishg appGUID: wx Elapsed Time:875ms SaveSearchID:361
INFO [SearchServices] WX Search = Server:nomos-scanner.corp.adobe.com User:karansha appGUID: wx Elapsed Time:875ms SaveSearchID:361
INFO [SearchServices] WX Search = Server:nomos-scanner.corp.adobe.com User:gulanand appGUID: wx Elapsed Time:875ms SaveSearchID:361
INFO [SearchServices] WX Search = Server:nomos-scanner.corp.adobe.com User:ashishg appGUID: wx Elapsed Time:875ms SaveSearchID:361 
```

我尝试过的代码是：

```
StreamReader reader = new StreamReader("test file path");     
string x = reader.ReadToEnd();

List<string> users = new List<string>();
int numberOfUsers;

Regex regex = new Regex(@"User:(?<username>.*?) appGUID");
MatchCollection matches = regex.Matches(x);

foreach (Match match in matches)
{
    if (!users.Contains(match.ToString())) users.Add(match.ToString());
}

Regex regex2 = new Regex(@"User: (?<username>.*?) appGUID");
matches = regex2.Matches(x);

foreach (Match match in matches)
{
    if (!users.Contains(match.ToString())) users.Add(match.ToString());
}

numberOfUsers = users.Count;
Console.WriteLine(numberOfUsers);
// keep screen from going away
// when run from VS.NET` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:02:40.490

请参阅以下代码：

```
StreamReader reader = new StreamReader(@"test file path");
string x = reader.ReadToEnd();
List<string> users = new List<string>();
Regex regex = new Regex(@"User:\s*(?<username>.*?)\s+appGUID");
MatchCollection matches = regex.Matches(x);
foreach (Match match in matches) {
    var user = match.Groups["username"].Value;
    if (!users.Contains(user)) users.Add(user);
}
int numberOfUsers = users.Count;
Console.WriteLine(numberOfUsers); 
```

我做了以下两个修改：

1.  您不需要两个正则表达式。我对其进行了编辑以涵盖两种情况
2.  您正在访问比赛，但为了获得用户名，**您应该访问`username`group**。

# php - 从 php newsletter 退回非活动电子邮件

> ID：15109068
> 
> 赞同：0
> 
> 时间：2013-02-27T09:57:04.657
> 
> 标签：php, email, email-bounces

我创建了一个每日交易网站，现在我想运行邮件时事通讯。一切正常，但现在我想处理退回电子邮件（仅限非活动邮件）。

有人可以给我一个示例 cron 脚本，它可以打开退回电子邮件箱，只检测非活动电子邮件并截断收件箱吗？

```
This is my example script for the newsletter:
$result = mysql_query("SELECT email FROM members");
while($row = mysql_fetch_array($result)) {
    $email = $row["email"];

    $subject = 'Subject of Newsletter';

    $headers = "From: noreply@***.com\r\n";
    $headers = "Return-Path: bounce@***.com\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=UTF-8\r\n";

    $content = 'HTML Newsletter';

    mail($email, $subject, $content, $headers);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:03:42.877

您需要配置任何邮件传输代理处理 (MTA) “bounce_handle@domain.com”，以将邮件发送到 PHP 脚本，该脚本执行您需要它执行的任何操作。MTA 实际处理进入服务器的邮件。有许多不同的 MTA，但其中大多数都有一些配置，您基本上可以告诉它将进入某个地址的电子邮件通过管道传输到自定义脚本中。

或者，您可以为退回处理程序设置一个邮箱，并让 PHP 通过 POP3 读取它。为此，您必须为退回处理程序配置一个实际的电子邮件帐户。然后您的 PHP 脚本使用标准协议连接到该邮箱。请参阅[IMAP/POP 上的 php.net 文档了解如何完成。](http://us.php.net/imap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:08:50.810

请检查以下链接，您可能会发现一些有用的东西。

[http://www.boogietools.com/Products/Linux/](http://www.boogietools.com/Products/Linux/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:03:30.563

为避免反弹请尝试使用 PHPMailer 脚本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:01:07.503

我找到了一个解决方案：“使用 PHP 处理电子邮件退回”-> [http://cheesefather.com/?p=163](http://cheesefather.com/?p=163)

# php - 了解jquery、ajax、php和mysql的过程和函数调用

> ID：15109070
> 
> 赞同：-2
> 
> 时间：2013-02-27T09:57:10.003
> 
> 标签：php, mysql, ajax, jquery-ui, jquery

我正在尝试创建类似于定义为对话框的内容，该对话框会在单击按钮时出现，并且应该显示标题、随机图像和按钮以进一步处理原始请求。

```
function custom_display_reminder(theHTML,theDownloadLink){if(typeof jQuery.ui!='undefined'){$("#dialog").attr("title","Please help spread the word").html(theHTML);$("#dialog").dialog({modal:true,width:375,buttons:{"Continue to Download":function(){$(this).dialog("close");window.location=theDownloadLink;}}});}else{window.location=theDownloadLink;}}
function custom_reminder(aelem,topic){theLink=$(aelem).attr("href");
    $.ajax({
        type:"POST",
        url:"/db/ajax.php",
        data:"action=reminder&thepath="+theLink+"&topic="+topic,
        dataType:"json",
        error:function(){window.location=theLink;},
        success:function(msg){if(msg.status==1)custom_display_reminder(msg.html,theLink);
        else{custom_message(msg.message,"error");}}});} 
```

我在其中一个网站上找到了上面的脚本，该网站具有我正在尝试实现的特定功能，但无法理解该过程。有人可以帮我解释该脚本的过程和所有调用吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:04:39.670

在您发布的代码中，theHTML 和 theDownloadLink 是从您在其下方发布的函数中的第一个函数（可能还有脚本中的其他任何位置）提供给第一个函数的参数。在这种情况下，它指的是 msg.html 的 HTML 和 theLink，它是所选特定 a 标记的 href 值（一个 URL）。

$.ajax 只是指一个异步 HTTP（或 AJAX）请求，有关它的文档可以在这里找到：[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

可以在此处找到有关 jQuery 的更多文档以帮助您完成此操作：[jQuery API 文档](http://api.jquery.com/)。阅读和理解本文档将更好地帮助您理解上面的代码，并使编写自己的实现更容易。如果您是 JavaScript 新手，我强烈建议您在线搜索教程，或查看 W3Schools 文档。

# pusher - Pusher - 如何为两个或多个 pusher 对象设置 channel_auth_endpoint？

> ID：15109071
> 
> 赞同：0
> 
> 时间：2013-02-27T09:57:14.443
> 
> 标签：pusher

根据[文档](http://pusher.com/docs/authenticating_users)，

> 可以通过在 Pusher 对象上设置静态属性来配置身份验证请求的目的地。
> 
> `Pusher.channel_auth_endpoint = '/pusher_auth.php';`

但是，如果您在一个页面中有两个或更多推送器实例怎么办？你如何不同地设置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T23:50:30.717

正如leggetter所说，您可以创建两个引用不同变量的 pusher 实例，例如：

```
var pusher1 = new Pusher('<your_app_key>');
pusher1.channel_auth_endpoint = '/pusher1_auth.php';

var pusher2 = new Pusher('<your_app_key>');
pusher2.channel_auth_endpoint = '/pusher2_auth.php'; 
```

至少我是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:29:08.933

您现在不能为两个不同的`Pusher`实例设置两个不同的身份验证端点，因为该属性是静态的。

有计划摆脱这种静态属性，但没有时间表。如果您对此有要求，我建议您提交拉取请求，因为 Pusher JavaScript 库是开源的： [https ://github.com/pusher/pusher-js](https://github.com/pusher/pusher-js)

# android - 如何充分替换 Sensor.TYPE_ORIENTATION（现已弃用）？

> ID：15109073
> 
> 赞同：5
> 
> 时间：2013-02-27T09:57:16.457
> 
> 标签：android, orientation, sensors, magnetometer

我已经尝试了在互联网上`SensorManager.getOrientation()`相关讨论中找到的几个代码片段。没有人像以前那样可靠地给出磁方位角`Sensor.TYPE_ORIENTATION`。`Sensor.TYPE_ORIENTATION`任何人都可以分享用于仿真的工作代码吗？

# javascript - jquery 创建高级搜索（文本、菜单、滑块）网络数据库

> ID：15109081
> 
> 赞同：1
> 
> 时间：2013-02-27T09:57:35.937
> 
> 标签：javascript, jquery, html, search, menu

我想使用 jquery 和 html 在我的应用程序中创建一个搜索页面。我的数据库在 chrome web 数据库中。现在它只有一个接口框架。我看过一些教程，但没有一个提到菜单或滑块。我不知道如何从他们那里获得价值。而且我确实尝试使用 获取`depMenu`值`var depMenu = $("#depMenu option:selected").val();`，但似乎只是获取第一个值，所以我认为它可能首先需要刷新。但这两个`//depMenu[0].selectedIndex = 0; //depMenu.selectmenu("refresh");`根本行不通。

我非常着急解决它，任何帮助提前谢谢！

这是html：

```
<div data-role="page" id="ASearch" data-add-back-btn="true" data-back-btn-text="Back">
        <div data-theme="a" data-role="header">
            <h3>
                Search
            </h3>
        </div>
        <div data-role="content">
            <div data-role="fieldcontain" id="search">
                <fieldset data-role="controlgroup">
                    <input name="" id="TextSearch" placeholder="enter your search term here" value="" type="search" />
                </fieldset>
            </div>
            <div data-role="fieldcontain">
                <label for="depMenu">
                    Department:
                </label>

                <select id="depMenu" name="" data-theme="b">
                    <option value="View all">
                        All department
                    </option>
                    <option value="value">
                        Ladies
                    </option>
                    <option value="value">
                        Men
                    </option>
                    <option value="value">
                        Kids
                    </option>
                </select>
            </div>
            <div data-role="fieldcontain" id="actMenu">
                <label for="actMenu">
                    Activities:
                </label>
                <select id="actMenu" name="" data-theme="b">
                    <option value="option1">
                        All activites
                    </option>
                    <option value="value">
                        Camping
                    </option>
                    <option value="value">
                        Walking
                    </option>
                    <option value="value">
                        Skiing
                    </option>
                    <option value="value">
                        Climbing
                    </option>
                    <option value="value">
                        Travel
                    </option>
                    <option value="value">
                        Cycling
                    </option>
                    <option value="value">
                        Fishing
                    </option>
                </select>
            </div>
            <div data-role="fieldcontain" id="slider">
                <fieldset data-role="controlgroup">
                    <label for="slider">
                        Price
                    </label>
                    <input id="slider" type="range" name="slider" value="50" min="0" max="100" data-highlight="true" data-theme="b" data-track-theme="d" />
                </fieldset>
            </div>

            <input id="ClearButton" type="submit" data-theme="c" data-icon="delete" data-iconpos="right" value="Clear" />
            <input id="SubButton" type="submit" data-theme="b" data-icon="check" data-iconpos="right" value="Submit" />
        </div>
    </div><!--/page--> 
```

这是数据库：

```
 function createDatabaseAndPopulateRecords() {
    //set-up datavase name , version, displayname,max size
    db = openDatabase('outdoorsshop', '1.0', 'beactiveshop', 2 * 1024 * 1024);

    db.transaction(function (txs) {
        txs.executeSql('CREATE TABLE IF NOT EXISTS shops (id unique, name TEXT, price TEXT, department INTEGER, activities INTEGER,\
             large INTEGER, descr TEXT, img TEXT)');
        txs.executeSql('DELETE FROM shops');
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['1', 'Mens Workout clothes ', '£38', '2', '0', 'brand: Lefan / Lu Iraq Sanskrit color-coded: black Item: 21 817 sportswear size (non-mandatory): M L XL', 'image/cmen2.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['2', 'Road Iraqi Sanskrit  ', '£64', '2', '0', 'Fitness apparel leader brand Aerobics clothing, mens movement suite', 'image/cmen1.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['3', 'Autumn ladies lipstick', '£95', '1', '0', 'the same paragraph of shinee key fx Amber Autumn ladies lipstick baseball uniform sweater coat couple shirt', 'image/cladies1.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['4', 'Female genuine badminton clothing ', '£125', '1', '0', 'Mr Adams parked the spring new female genuine badminton clothing fitness sportswear ', 'image/cladies2.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['5', 'Bodysuit', '£87', '3', '0', 'Short-sleeved bodysuit in soft jersey with a print on the front and press-studs on one shoulder and at the crotch. 95% cotton, 5% ', 'image/ckids1.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['6', 'Leisure hammock ', '£121', '0', '1', 'Tmall season only swim the authentic outdoor and indoor leisure hammock widening canvas thick double hammock', 'image/camp1.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['7', 'Single hammock ', '£88', '0', '1', ' Really useful funky looking small daypack. Its very light weight and snug comfy fit round the body makes it one of our most popular packs for everyday use.', 'image/camp2.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['8', 'CNHIMALAYA', '£199', '0', '2', 'Luxury Design Three Room Leisure 5-6 Person Family Camping Tent', 'image/tent1.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['9', 'Large Camping Tents For Sale ', '£18.5', '0', '2', 'Product Name: Antelope Super Large Rain-Proof Camping Tent Brand: Antelope SKU: cp0076 Weight: 9kg', 'image/tent2.jpg']);
        txs.executeSql('INSERT INTO shops (id, name, price, department, activities, descr, img) VALUES (?,?,?,?,?,?,?)', ['10', 'Fiberglass transparent fishing rod ', '£18.5', '0', '2', 'Fishing rod pole in hand, sea fishing rod, hand sea dual-purpose rod three. Sea fishing rod length is about 1.6 meters - 2.4 meters, have longer.', 'image/fishing1.jpg']);
    });
} 
```

这是jQuery：

```
 $(document).ready(function () {
    // getting the value that user typed
    var searchString = $("#TextSearch").val();

    // forming the queryString
    var data = 'search=' + searchString;

    var depMenu = $("#depMenu option:selected").val();
    //depMenu[0].selectedIndex = 0;
    //depMenu.selectmenu("refresh");

    $("#SubButton").on("click", function (e) {
        var asearchString = $(this).val();

        alert($("#TextSearch").data());
        alert(depMenu);
        //var v = search.val().toLowerCase();
        if (depMenu == "view all") {
            db.transaction(function (txsLadies) {
                txsLadies.executeSql('SELECT * FROM shops WHERE shops.department=1', [], function (txs, ladies_results) {
                    var len1 = ladies_results.rows.length, i;
                    $("#SearchResultList").empty();
                    alert('Failed because');
                    for (i = 0; i < len1; i++) {  //for each record in the resultse
                        var LadiesRecord = ladies_results.rows.item(i);  //get the current record from the database recordse
                        //.append funciton to add records
                        $('#SearchResultList').append("<div style=\"border-bottom:1px solid black;padding:10px;margin:10px;\">" +
                        LadiesRecord.name + "(" + LadiesRecord.price + ") Rating: " + LadiesRecord.img + "</div>");

                    }
                    $("#SearchResultList").hide();
                });
            });
        } else {
            return false;
            alert('Failed because');
        }

    });
});

 $('#ClearButton').live('click', function () {

        var myselect = $("#depMenu");
        myselect[0].selectedIndex = 0;
        myselect.selectmenu("refresh");

    });

}); 
```

# java - 如何在 PropertyFile 中指定 user.home？

> ID：15109084
> 
> 赞同：1
> 
> 时间：2013-02-27T09:57:48.497
> 
> 标签：java, properties

我有一个应用程序，其中有一个变量'file_Base_Path'，我正在从 propertyFile（比如 sample.properties）读取它的值。我想将变量值设置为 user.home 并且 **${user.home}**不起作用。如何将值设置为 user.home 以便它在 Linux 和 Windows 中都可以使用。

注意：我不能使用 System.getProperties('user.home') 因为值并不总是 user.home 它可能会有所不同

样本属性：

```
 file_Base_Path=${user.home} 
```

我如何设置值：

```
 properties.getProperty("file_Base_Path")  //i'm expecting '/home/user' but it is returning '${user.home}' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T15:33:13.823

如果您使用 Spring，`@Value`注释将`${user.home}`在注入时转换为适当的值。

保持 sample.properties 原样，并在您的班级中使用：

```
@Value("${file_Base_Path}")
private String filePath; 
```

并且该`${user.home}`变量将在注入变量之前由 Spring 翻译。

有关更多信息，请参见[价值](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Value.html)。

[或者使用此处](https://stackoverflow.com/a/15157599/1145251)解释的 Apache Commons 配置

如果您不想使用 Spring 或 Apache Commons Configuration，那么您必须推出自己的解决方案，因为 Properties 和 System.getProperties 不会对属性文件的内容进行转换。你必须：

1.  检查字符串是否包含“${”（对于用户指定完整路径的情况，如“C:/temp”，无需转换）；
2.  提取属性内容；
3.  使用 System.getProperty(String) 获取实际值；
4.  将值添加回找到它的位置的字符串（例如，在您有类似情况的情况下`file_Base_Path=${user.home}/resources/${java.version}`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:04:20.910

属性文件没有环境变量替换...

获取环境变量的方法是

```
System.getProperties("variablename"); 
```

如果它`"variablename"`本身是可变的，为什么不通过属性进行配置呢？

样本属性：

```
userhome.variable.name=user.home 
```

Java代码：

```
String userhomeVariableName = properties.getProperty("userhome.variable.name");
String userhome = System.getProperties(userhomeVariableName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:05:17.940

你为什么不这样做：

```
 String localHome=properties.getProperty("file_Base_Path");
 if(localHome.equals("${user.home}"){
      localHome=System.getProperties("user.home");
 } 
```

# php - PHP 不在 webmatrix 中创建会话

> ID：15109091
> 
> 赞同：2
> 
> 时间：2013-02-27T09:58:15.560
> 
> 标签：php, session, session-variables, webmatrix, webmatrix-2

我开始使用 webmatrix，现在 iam 使用 php 入门网站模板。

在此模板中您无法登录。我搜索了所有代码，但发现它没有创建会话。也许它会创建但不会传递给其他页面。

如果有用户（logon.php）：

```
if ($statement->num_rows == 1)
{

    $statement->bind_result($uid,$uname);
    $statement->fetch();
    $_SESSION['userid']=$uid;
    $_SESSION['username']=$uname;
    echo $_SESSION['username']; // yes its printing username
    header ("Location: index.php");
} 
```

检查（header.php）：

```
 if (logged_on())
    {
        echo '<li><a href="/logoff.php">Sign out</a></li>' . "\n";
    } 
```

登录功能：

```
function logged_on()
{
    return isset($_SESSION['userid']); //empty
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:02:08.303

写吧

```
session_start(); 
```

在页面顶部

# xslt-1.0 - XSLT-1.0：仅在元素为空时删除元素

> ID：15109093
> 
> 赞同：0
> 
> 时间：2013-02-27T09:58:23.590
> 
> 标签：xslt-1.0

需要帮忙！刚从 xslt 开始，不知道如何在我的情况下进行转换，thanx 事先

源 XML

```
 <?xml version="1.0" encoding="UTF-8"?>
<body xmlns:httpsca="http://www.ibm.com/xmlns/prod/websphere/http/sca/6.1.0" ...>
  <tns:getRealEstateObjects>
    <RequestElement>     
      <IdNumnet>30361100000000000034</IdNumnet>     
      <IdSelectFromDate></IdSelectFromDate>
    </RequestElement>
  </tns:getRealEstateObjects>
</body> 
```

目标 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<result  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sa="http://www.ibm.com/xmlns/prod/websphere/j2ca/sap">
  <IdNumnet>30361100000000000034</IdNumnet>
  </result> 
```

生成了我应该编辑的 xslt

```
 <xsl:output method="xml" encoding="UTF-8" indent="yes" xalan:indent-amount="2"/>
  <xsl:strip-space elements="*"/>

  <!-- The rule represents a custom mapping: "IdSelectFromDate" to "IdSelectFromDate". -->
  <xsl:template name="IdSelectFromDateToIdSelectFromDate">
    <xsl:param name="IdSelectFromDate"/>
    <!-- ADD CUSTOM CODE HERE. -->
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T06:17:14.837

我不知道这个话题是否仍然活跃，但你可以尝试关注

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" encoding="UTF-8" indent="yes" />
  <xsl:strip-space elements="*"/>

 <xsl:template match="/">
    <result xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sa="http://www.ibm.com/xmlns/prod/websphere/j2ca/sap">
        <xsl:apply-templates select="body/getRealEstateObjects/RequestElement" />
    </result>
 </xsl:template>

    <xsl:template match="body/getRealEstateObjects/RequestElement">
        <xsl:copy-of select="IdNumnet" />
        <xsl:call-template name="IdSelectFromDateToIdSelectFromDate">
            <xsl:with-param name="IdSelectFromDate" select="IdSelectFromDate" />
        </xsl:call-template>    

    </xsl:template>

  <!-- The rule represents a custom mapping: "IdSelectFromDate" to "IdSelectFromDate". -->
  <xsl:template name="IdSelectFromDateToIdSelectFromDate">
    <xsl:param name="IdSelectFromDate"/>
    <xsl:choose>
        <xsl:when test="normalize-space($IdSelectFromDate) = ''">
            <xsl:comment>IdSelectFromDate is empty - do nothing</xsl:comment>
        </xsl:when>
        <xsl:otherwise>
            <!-- Do something with IdSelectFromDate -->
            <xsl:copy-of select="$IdSelectFromDate" />
        </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

我只是做了一些简化，以免打扰命名空间等，但原则应该保持不变。

# iphone - 在 UITableViewstylePlain 中展开 UITableView 单元格

> ID：15109099
> 
> 赞同：11
> 
> 时间：2013-02-27T09:58:51.690
> 
> 标签：iphone, ios, uitableview

我想在点击时展开 tableview 单元格。有一个表格视图，其中两个单元格是可扩展的，而其他的则不是。我需要当我点击可扩展单元格时，它应该在它下面显示单元格，再次点击它应该隐藏。下面有一张图片定义了这一点。

![在此处输入图像描述](../Images/6ad161de9e978e35e40cf964c4fe3299.png)

我怎样才能实现这个功能，请指导以上。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T10:11:40.210

[这](http://www.cocoanetics.com/2011/03/expandingcollapsing-tableview-sections/)是可扩展 UITableView 的完整教程

这是代码片段。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([self tableView:tableView canCollapseSection:indexPath.section])
    {
        if (!indexPath.row)
        {
            // only first row toggles exapand/collapse
            [tableView deselectRowAtIndexPath:indexPath animated:YES];

            NSInteger section = indexPath.section;
            BOOL currentlyExpanded = [expandedSections containsIndex:section];
            NSInteger rows;

            NSMutableArray *tmpArray = [NSMutableArray array];

            if (currentlyExpanded)
            {
                rows = [self tableView:tableView numberOfRowsInSection:section];
                [expandedSections removeIndex:section];

            }
            else
            {
                [expandedSections addIndex:section];
                rows = [self tableView:tableView numberOfRowsInSection:section];
            }

            for (int i=1; i<rows; i++)
            {
                NSIndexPath *tmpIndexPath = [NSIndexPath indexPathForRow:i 
                                                               inSection:section];
                [tmpArray addObject:tmpIndexPath];
            }

            UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

            if (currentlyExpanded)
            {
                [tableView deleteRowsAtIndexPaths:tmpArray 
                                 withRowAnimation:UITableViewRowAnimationTop];

                cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor grayColor] type:DTCustomColoredAccessoryTypeDown];

            }
            else
            {
                [tableView insertRowsAtIndexPaths:tmpArray 
                                 withRowAnimation:UITableViewRowAnimationTop];
                cell.accessoryView =  [DTCustomColoredAccessory accessoryWithColor:[UIColor grayColor] type:DTCustomColoredAccessoryTypeUp];

            }
        }
    }
} 
```

如下图所示

![在此处输入图像描述](../Images/91186215780a0ac714be223413eff0eb.png)

[这个](https://stackoverflow.com/questions/1938921/expand-collapse-section-in-uitableview)和[这个](https://stackoverflow.com/questions/9396055/expanding-table-view-cells-disappearing)解决方案还可以帮助您了解如何管理 Expandable TableView

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T11:09:16.693

好的，我在想的是，标题、**事件**、**开销**和**朋友**将是背景、标题和扩展`UIView`的自定义。所以基本上`UIImageView``UILabel``UIButton`

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

返回您拥有的标题的计数。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

每个标题都有回报`UIView`。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

计算该标题中的行数。**您可能需要为此维护一个数组。**

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

具有单元格项目的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

最初它应该是所有部分的 0（零），当用户点击展开时，它应该相对于该部分内**的行数 * 单元格高度**增加。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

您可能需要一些好的逻辑来设置所有行以进行扩展

您的扩展按钮操作类似于，

```
- (void) expandSection:(UIButton *)sender; 
```

您可以使用 sender.tag 确定要扩展的部分，所以不要忘记正确添加标签。您可能需要一个`int`in`.h`文件来存储当前部分，并且可以在`- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section`数据源方法中使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T10:07:21.517

我认为你想要的东西已经被苹果给了。您可以查看Apple 在**Table View Animations and Gestures**标题下提供的[示例代码](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)。

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-29T12:28:09.780

我在下面给出了示例源代码。您可以根据您的要求自定义此示例。

源代码链接：[点这里](https://github.com/gcamp/GCRetractableSectionController/archive/master.zip)

输出屏幕：

![在此处输入图像描述](../Images/e82a4a2aae234661093513b36cb59884.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-26T05:36:29.273

[JKExpandTableView](https://github.com/jackkwok/JKExpandTableView)是 MIT 许可的 iOS 库，它实现了[可扩展的表格视图](https://github.com/jackkwok/JKExpandTableView)。请务必检查包含的示例项目。

![截屏](../Images/7be98ec31f746d96c574fbd379564460.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T10:14:08.353

代表可以做到这一点

```
- (NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath {
       //write code here
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-19T08:34:32.773

接受的答案是正确的，但链接已过时。要使该示例正常工作，您必须做一些额外的事情：

从这里下载 ExpandableTableCells 项目：
[https ://github.com/cocoanetics/Examples](https://github.com/cocoanetics/Examples)

从这里下载 DTCustomColoredAccessory.h 和 .m 文件： [https ://github.com/Cocoanetics/DTFoundation/tree/develop/Core/Source/iOS](https://github.com/Cocoanetics/DTFoundation/tree/develop/Core/Source/iOS)

将 DTCustomColoredAccessory 文件放入 ExpandableTableCells 项目。

那里有一个工作示例，从那里编辑和移动更容易，而不是尝试从零开始写入。**

# java - 如何控制同一个包上两个切入点的执行顺序

> ID：15109101
> 
> 赞同：1
> 
> 时间：2013-02-27T09:58:52.943
> 
> 标签：java, spring, aop

我有一个通用切入点和其他几个特定切入点的情况。我想要的只是通用的应该首先执行，然后只有特定的应该执行。

通用切入点说，

```
 @Before("execution(public * com.java.*.data(..))") 
```

特定切点编号 1

```
 @Before("execution(public * com.java.science.*.data(..))") 
```

特定切点编号 2

```
 @Before("execution(public * com.java.history.*.data(..))") 
```

特定切点编号 3

```
 @Before("execution(public * com.java.geography.*.data(..))") 
```

通用切入点应首先执行，然后是特定切入点。我可以控制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:06:03.560

`@Order( value = ... )`您可以使用`@Aspect`-annotated 类设置优先级：

```
@Aspect
@Order( value=0 )
public class MyFirstPointcut
{
    @Before("execution(public * com.java.*.data(..))")
    public void something(...) { ... }
}

@Aspect
@Order( value=1 )
public class MySecondPointcut
{
    @Before("execution(public * com.java.science.*.data(..))") 
    public void somethingElse(...) { ... }
}

...etc 
```

# jquery-plugins - 使用 greg franko 的 jquery 插件 jquery selectboxit，

> ID：15109104
> 
> 赞同：0
> 
> 时间：2013-02-27T09:58:57.453
> 
> 标签：jquery-plugins

我正在使用 greg franko 的 jquery 插件 jquery selectboxit，我们可以在一个页面中为 2 个不同的选择框呈现 2 个不同的样式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:00:18.547

是的你可以。由于 SelectBoxIt 会将任何类名从原始选择框复制到新的下拉列表中，因此您可以使用它为下拉列表创建许多不同的样式：

这是一个示例 CSS 类，它为下拉应用一个小宽度：

```
.small-dropdown.selectboxit, .small-dropdown.selectboxit + .selectboxit-options{
    width: 50px;
    min-width: 50px;    
} 
```

在您的 HTML 中，您将像这样使用您的类：

```
<select class="small-dropdown">
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
</select> 
```

这是此技术的[jsfiddle](http://jsfiddle.net/PgzDX/64/)示例。

# sql - SQL SUM GROUP BY 两张表

> ID：15109109
> 
> 赞同：5
> 
> 时间：2013-02-27T09:59:09.133
> 
> 标签：sql, group-by, sum

我很难编写一个 SQL 查询，该查询将正确地将 account_no 组合在一起并减去一个金额。

首先，我编写了这个查询，除了 ACCOUNT_NO A-102 应该以 4500 结束，而不是两个不同的正确余额之外，它会更新所有内容。

```
select transactions.account_no, account.balance, transactions.amount,
(account.balance + transactions.amount) AS "CORRECT BALANCE"
from transactions, account
where account.account_no = transactions.account_no;

ACCOUNT_NO| BALANCE   | AMOUNT    | CORRECTBALANCE 

A-102     |  4000     |  2000     |  6000                   
A-102     |  4000     |  -1500    |  2500                   
A-222     |  8000     |  -1000    |  7000                   
A-305     |  2000     |  1300     |  3300 
```

我尝试按 account_no 求和和分组，但我无法弄清楚如何使用这两个表来执行此操作。这只是我尝试过但无法开始工作的事情。

```
select transactions.account_no, SUM(transactions.amount)
from transactions
group by transactions.account_no;

ACCOUNT_NO| SUM(TRANSACTIONS.AMOUNT) 
A-305     |    1300                     
A-102     |    500                      
A-222     |    -1000 
```

预期结果应该是：

```
ACCOUNT_NO| BALANCE   | AMOUNT    | CORRECTBALANCE 

A-102     |  4000     |  500      |  4500                 
A-222     |  8000     |  -1000    |  7000                   
A-305     |  2000     |  1300     |  3300 
```

这是因为帐户 A-102 它有两个不同的金额，但来自相同的余额。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T10:11:09.600

对于您的查询，要将两行分组为一行，您可以尝试对帐号和余额进行分组：

```
SELECT  T.account_no
        ,A.balance
        ,SUM(T.amount) AS TotalAmount
        ,(A.balance + SUM(T.amount)) AS "CORRECT BALANCE"
FROM    transactions AS T
INNER JOIN account AS A ON T.account_no = A.account_no
GROUP BY T.account_no, A.balance; 
```

（顺便说一句，我使用了 ANSI 连接而不是连接表的“旧”方式，因为这样更清楚你在做什么。）

**编辑**

为了让事情更清楚一点，我制作了一个**[SQL Fiddle](http://www.sqlfiddle.com/#!3/22cf8/2)**。这是否或多或少正确地代表了您的情况？

**编辑2**

[正如Kaf](https://stackoverflow.com/users/412923)所说，上述查询不会显示任何没有交易的账户。这可能是您想要的，但如果不是，您可以像这样切换连接表：

```
SELECT  A.account_no
        ,A.balance
        ,SUM(T.amount) AS TotalAmount
        ,(A.balance + SUM(T.amount)) AS "CORRECT BALANCE"
FROM    account AS A
LEFT OUTER JOIN transactions AS T ON T.account_no = A.account_no
GROUP BY A.account_no, A.balance; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:09:24.993

您是否正在寻找如何使用 group by 连接表格和求和？

第一次查询；

**更新：**我认为你*`Account table`*有*1:many*的关系，所以，*`Transaction table`*你应该*`get the sum from transaction table`*然后*加入*。*`Account`*理想情况下，您需要`left join`如下所示。

```
select a.account_no, 
       a.balance, 
       isnull(x.amount,0) amount, 
       (a.balance + isnull(x.amount,0)) correctAmount
from account a left join (
           select t.account_no, sum(t.amount) amount
           from transactions t
           group by t.account_no ) x
   on a.account_no = x.account_no 
```

[**SQL-FIDDLE-DEMO**](http://www.sqlfiddle.com/#!3/22cf8/6)（感谢@Josien 提供表格和数据）

# c - 类型转换指针时崩溃 - C

> ID：15109111
> 
> 赞同：1
> 
> 时间：2013-02-27T09:59:09.450
> 
> 标签：c

C-初学者问题：

我有以下代码在 line 处崩溃`unsigned long rdwValue = *((unsigned long*)pParamPtr);`。我正在使用 GCC 在 Fedora 机器上交叉编译 MIPS32 目标的代码

```
unsigned char* pParamPtr = GetNvParamRamAddress(ParameterId, swIndex);

if (0 != pParamPtr)
{
    unsigned long rdwValue = *((unsigned long*)pParamPtr);// CRASHES
} 
```

但是如果我把里面的线`if`改成

```
rdwValue = *(pParamPtr); 
```

这行得通。

我是否在使用这种类型转换做违反规则的事情？

我需要的是从地址开始`pParamPtr`到 rdwValue 中获取四个字节 [无符号长为 4 字节]。

这是`memcpy`要走的路吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:02:40.593

这是在什么平台上运行的？

一个可能的原因是违反了对齐限制，如果返回的指针是奇数并且平台不支持`unsigned long`从奇数地址读取 s，这将失败。

**更新**根据评论，OP 正在 MIPS 上运行它，这肯定有对齐限制。

作为一个次要的风格点，不需要你的外括号，它可能只是：

```
unsigned long rdwValue = *(unsigned long *) pParamPtr; 
```

逐个读取字节可能是最容易的，这也使您有机会显式处理字节序。假设 little-endian（至少 32 位`int`精度）：

```
unsigned long rwdValue = pParamPtr[0] | (pParamPtr[1] << 8) | (pParamPtr[2] << 16) | (pParamPtr[3] << 24); 
```

# .net - Sitecore 控件未从内容项中提取字段

> ID：15109112
> 
> 赞同：0
> 
> 时间：2013-02-27T09:59:10.477
> 
> 标签：.net, content-management-system, controls, sitecore

我被要求根据我正在处理的网站上的当前设计创建一个新的顶级页面。为此，我创建了一个带有新控件的新布局，以显示我被要求创建的新内容。这是现有设计的布局以及占位符等：

```
<div class="services-left">
  <sc:Sublayout ID="Sublayout7" runat="server" Path="/layouts/company/controls/ServicesContent.ascx" />
</div> 
```

这是在控制中：

```
<h2>
<sc:Text ID="ServicesTitle" runat="server"  field="Service-Title" />
</h2>
<div class="service-header">
<sc:FieldRenderer ID="ServicesCopy" runat="server" field="Service-Copy" />                    
</div>
<div class="service-body">
<sc:FieldRenderer ID="ServicesList" runat="server" field="Service-List" />                    
</div> 
```

我还创建了一个新模板，其中包含上面引用的字段。

我已将模板添加到站点并将其设置为使用我创建的布局，它做得很好并且现有布局正确显示，我遇到的问题是控件中的 html 显示正常但它赢了不要从 CM 中拾取字段并显示它们。

有没有我需要做的额外步骤或我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:18:44.963

FieldRenderer 使用 FieldName 属性而不是 Field 属性。其他 Sitecore 控件（例如图像和文本）确实使用字段。

更改它，它应该开始显示来自 Sitecore 的内容。

# c - 在 R 控制台中添加库

> ID：15109115
> 
> 赞同：-1
> 
> 时间：2013-02-27T09:59:20.933
> 
> 标签：c, r

我想添加一个外部库（我确实有 az 一个 Zip 文件）。

通常，如何处理 R 控制台上的外部包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:15:01.243

就像@Roman 建议的那样：

```
install.packages("filepath.zip", repos = NULL) 
```

# php - WordPress 功能错误

> ID：15109116
> 
> 赞同：0
> 
> 时间：2013-02-27T09:59:22.860
> 
> 标签：php, mysql, wordpress

在我的 Wordpress 类别页面上，我在一些帖子的标题下收到以下消息

> 警告：file_exists() [function.file-exists]：open_basedir 限制生效。文件（/）不在允许的路径中：/nfs/c05/h05/mnt/158666/domains/oddschanger 中的 (/nfs:/tmp:/usr/local:/etc/apache2/gs-bin) .com/html/wp-includes/functions.php 在第 1335 行

例如[http://oddschanger.com/category/fourfourtoms-football-talk/](http://oddschanger.com/category/fourfourtoms-football-talk/)

自从将主机更改为媒体殿堂以来就发生了这种情况……知道错误是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:05:30.623

您只能访问允许目录中的文件。该函数试图访问的文件是`/`，超出了允许范围。

您被允许访问

```
/nfs
/tmp
/usr/local
/etc/apache2/gs-bin 
```

如果这是一个专用/虚拟服务器，您可以在您的 VirtualHost 容器中进行编辑。

```
php_admin_value open_basedir none 
```

这里有一个完整的解释：http: [//www.bigsoft.co.uk/blog/index.php/2007/12/30/fixing-php-s-require-open_basedir-retri](http://www.bigsoft.co.uk/blog/index.php/2007/12/30/fixing-php-s-require-open_basedir-restri)

# json - jqGrid - 服务器端分页 - jsonstring - 显示不正确/无数据

> ID：15109117
> 
> 赞同：0
> 
> 时间：2013-02-27T09:59:32.320
> 
> 标签：json, jqgrid

我正在使用这段代码：

```
 var data = {
            colModel: [
                    { name: 'ID', index: 'id', width: "80" },
                    { name: 'Name', index: 'name', width: "300" },
                    { name: 'Value 1', index: 'value1', width: "110" },
                    { name: 'Value 2', index: 'value2', width: "110" },
                ],
                pager: instance.getPager().attr("id"),
                datatype: "jsonstring",
                datastr: {
                    "page": "5",
                    "total": "16",
                    "records": "400",
                    "rows": [
                          {
                           "id": 0,
                           "name": "name0",
                           "value1": 61,
                           "value2": 81
                       },
                       {
                           "id": 1,
                           "name": "name1",
                           "value1": 91,
                           "value2": 48
                       },
                       {
                           "id": 2,
                           "name": "name2",
                           "value1": 65,
                           "value2": 41
                       },
                       {
                           "id": 3,
                           "name": "name3",
                           "value1": 20,
                           "value2": 49
                       },
                       {
                           "id": 4,
                           "name": "name4",
                           "value1": 34,
                           "value2": 91
                       },
                       {
                           "id": 5,
                           "name": "name5",
                           "value1": 80,
                           "value2": 31
                       },
                       {
                           "id": 6,
                           "name": "name6",
                           "value1": 9,
                           "value2": 37
                       },
                       {
                           "id": 7,
                           "name": "name7",
                           "value1": 41,
                           "value2": 14
                       },
                       {
                           "id": 8,
                           "name": "name8",
                           "value1": 10,
                           "value2": 85
                       },
                       {
                           "id": 9,
                           "name": "name9",
                           "value1": 21,
                           "value2": 9
                       },
                       {
                           "id": 10,
                           "name": "name10",
                           "value1": 67,
                           "value2": 55
                       },
                       {
                           "id": 11,
                           "name": "name11",
                           "value1": 50,
                           "value2": 23
                       },
                       {
                           "id": 12,
                           "name": "name12",
                           "value1": 11,
                           "value2": 92
                       },
                       {
                           "id": 13,
                           "name": "name13",
                           "value1": 52,
                           "value2": 54
                       },
                       {
                           "id": 14,
                           "name": "name14",
                           "value1": 55,
                           "value2": 94
                       },
                       {
                           "id": 15,
                           "name": "name15",
                           "value1": 23,
                           "value2": 98
                       },
                       {
                           "id": 16,
                           "name": "name16",
                           "value1": 5,
                           "value2": 69
                       },
                       {
                           "id": 17,
                           "name": "name17",
                           "value1": 19,
                           "value2": 19
                       },
                       {
                           "id": 18,
                           "name": "name18",
                           "value1": 38,
                           "value2": 60
                       },
                       {
                           "id": 19,
                           "name": "name19",
                           "value1": 21,
                           "value2": 78
                       },
                       {
                           "id": 20,
                           "name": "name20",
                           "value1": 22,
                           "value2": 52
                       },
                       {
                           "id": 21,
                           "name": "name21",
                           "value1": 63,
                           "value2": 33
                       },
                       {
                           "id": 22,
                           "name": "name22",
                           "value1": 51,
                           "value2": 13
                       },
                       {
                           "id": 23,
                           "name": "name23",
                           "value1": 51,
                           "value2": 83
                       },
                       {
                           "id": 24,
                           "name": "name24",
                           "value1": 82,
                           "value2": 13
                       }
                   ]
                },
                jsonReader: { repeatitems: false },
                rowNum: 25,
                viewrecords: true,
                caption: "Packages",
                height: "auto",
                ignoreCase: true
    }; 
    console.log(JSON.stringify(data));
    instance.getContainer().jqGrid(data); 
```

我想要做的是从服务器返回结果的子集（这里我只是硬编码它们），我想通过指定页面和总计来模拟分页，并将它们显示在表格上。

该表已生成并且它知道行（它创建行并且我的表扩展到正确的高度），但是单元格是空白的。

此外，分页数与我预期的不同，我希望的总页数和记录数分别为 16 和 400，它们不是，它们与数据匹配（1 和 25），所以我看到“第 5 页，共 1 页”和'101-125 of 25'。

此外，如果`jsonReader: { repeatitems: false },`缺少或设置为 true，那么我会收到错误消息：

```
TypeError: obj is undefined 
```

这是一个错误吗？不确定我是否做错了什么。

有谁知道如何解决（至少可以重现）这个问题？在 FF 和 Chrome 中测试。

谢谢

**更新：**

问题的一部分已解决（Kris 的回答），我现在可以看到表格中的数据。通过更改 colModel 中的名称标签进行修复。

但是仍然存在一些突出的问题：

1.  总页码仍显示为 1，所以我看到“第 5 页，共 1 页”我希望它显示“第 5 页，共 16 页”
2.  记录总数仍显示为 25，所以当我想查看 '101 - 125 of 400' 时，我会看到 '101 - 125 of 25'
3.  设置的时候还是报错`repeatitems: true`

我认为前两个问题是相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:20:52.103

您在 colModel 中存在一些命名问题（ colModel 中的名称应与 json 中的键完全相同）

改变

```
colModel: [
                { name: 'ID', index: 'id', width: "80" },
                { name: 'Name', index: 'name', width: "300" },
                { name: 'Value 1', index: 'value1', width: "110" },
                { name: 'Value 2', index: 'value2', width: "110" },
            ], 
```

至

```
 colModel: [
                            { name: 'id', index: 'id', width: "80" },
                            { name: 'name', index: 'name', width: "300" },
                            { name: 'value1', index: 'value1', width: "110" },
                            { name: 'value2', index: 'value2', width: "110" },
                        ], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:45:04.073

这是您在视图/html 页面中的网格定义

```
 jQuery(document).ready(function() {
    jQuery("#list").jqGrid({
        url: '/Home/DynamicGridData/',
        datatype: 'json',
        mtype: 'GET',
        colNames: ['id', 'name', 'value1', 'value2'],
        colModel: [
                { name: 'ID', index: 'id', width: "80" },
                { name: 'Name', index: 'name', width: "300" },
                { name: 'Value 1', index: 'value1', width: "110" },
                { name: 'Value 2', index: 'value2', width: "110" },
            ],
        pager: jQuery('#pager'),
        rowList: [5, 10, 20, 50],
        jsonReader: { repeatitems: false },
            rowNum: 25,
            viewrecords: true,
            caption: "Packages",
            height: "auto",
            ignoreCase: true
    }).navGrid('#pager', { edit: false, add: false, del: false, refresh: false, search: true });

});

 <table id="list"></table>
 <div id="pager"></div> 
```

然后你应该定义一个从服务器检索数据的方法，在上面的网格中，我们调用了 URL Home/DynamicGridData，这里是定义和分页逻辑

```
 public ActionResult DynamicGridData(string sidx, string sord, int page, int rows)
    {
        var context = new AdvItemsContext();
        int pageIndex = Convert.ToInt32(page) - 1;
        int pageSize = rows; //this gets you the page size
        int totalRecords = context.db.Count(); //this gets you the totalrecords
        int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize); //this math get the tota pages avaiable

        var dbdata = context.db.ToList().Skip(pageIndex * pageSize).Take(pageSize);// this lets you page through the records

        var jsonData = new
        {
            total = totalPages,
            page = page,
            records = totalRecords,
            rows = new[] {
            new {id=0,cell=new[]{"0","name0","61","81"}},
            new {id=1,cell=new[]{"1","name1","91","48"}},
            new {id=2,cell=new[]{"0","name2","65","41"}},
            // all your other values or better yet get this from server
        }
        };
        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

# ios - iOS 框架和重复的库

> ID：15109118
> 
> 赞同：0
> 
> 时间：2013-02-27T09:59:35.293
> 
> 标签：ios, compiler-construction, frameworks, code-duplication

我目前正在开发一个在内部集成 SBJson 的框架。所以我有一个 blahblah.framework，并将其放入我的项目中。但在我的项目中，我也在使用 SBJson ；所以编译器说“重复的符号”。我想避免将 SBJson 文件重构到框架中，有没有其他方法可以避免重复源？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:06:20.060

如果刚刚添加的 SBJson 框架已经存在，为什么不能删除它？Xcode 无法构建同名的类文件。

# batch-file - 从 VBS 调用批处理文件（多个命令行获取输出）

> ID：15109121
> 
> 赞同：0
> 
> 时间：2013-02-27T10:00:00.303
> 
> 标签：batch-file, vbscript

我正在尝试编写一个 VBscript 来调用批处理文件。我可以从命令提示符下做的事情，但我没有从 VBscript 做同样的事情。
从命令：

```
C:\PR\PS\build\bin>execDl.bat Jack > History.txt \n 
Jack> getHistory 50008 Dl \n
quit 
```

我可以从脚本中调用第一步，但我不明白如何执行第二步和第三步。直到现在我的脚本

```
dim shell
dim ID 
ID ="50008"
dim Deal 
Deal ="Deal"
dim UserName 
Deal ="admin"
dim OutputPoint 
OutputPoint =">"
dim batchFileFolder
batchFileFolder = "C:\PR\PS\build\bin\"
set shell=createobject("wscript.shell")
strRun = batchFileFolder & "execDl.bat admin " & OutputPoint _
   & batchFileFolder & "output1.txt" & """"
shell.run(strRun)
set shell=nothing 
```

## 非常感谢任何帮助。

c:\PR\PS\build\bin>execDl.bat admin ------> 在命令提示符下给出以下输出，然后光标指向 admin
当前用户是：tswan

* * *

**欢迎使用 FlowEngine Prototype 命令行界面。* ****对于有效命令的列表，（在提示符处输入“帮助”。*****

 ******* * *

管理> getHistory 7006 Dl

文档的活动历史记录：7006

进程提交时间：2010-05-19 00:55:59.56
进程 ID：3
提交者：swang

活动名称 资源 行动 完成日期 备注

* * *

提交 tswan 提交 2010-05-19 00:55:59.937 Deal Manager tswan 批准 2010-05-19 00:56:26.013 批准 完成 2010-05-19 00:56:26.027

getHistory "7006 Dl" 已成功完成。

* * *

这是我在命令提示符中遵循的总体命令序列，我在顶部提到的一个是将输出重定向到文本文件的三步命令。

我的疑问是我如何执行包括 getHistory 和 vb 脚本中的退出语句在内的其余步骤。:( @Mr Fuzzy Button 感谢您对其进行格式化。我是stackoverflow 发布方式的新手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:47:38.503

基本上，您需要将通常在 FlowEngine 提示符下键入的命令放入文件中，然后从该文件重定向标准输入。就像是：

```
dim fso
dim f
dim cmd
dim shell
dim inpFile
dim outFile
inpFile = "execInput.txt"
outFile = "execOutput.txt"
Set fso = CreateObject("Scripting.FileSystemObject")
Set f = fso.OpenTextFile( inpFile , 2, True)
f.Write "getHistory 50008 Deal" & vbCrLf & "quit" & vbCrLf
f.close
set shell=createobject("wscript.shell")
cmd = "execDeal.bat admin < " & inpFile & " > " & outFile
shell.run( cmd )
set shell=nothing 
```******

# python - 将输入文件转换为列表

> ID：15109123
> 
> 赞同：2
> 
> 时间：2013-02-27T10:00:10.867
> 
> 标签：python

我有一个包含以下条目的输入文件文本

```
6.56
4.64
5.75
5.59
6.32
6.54
7.20
5.33 
```

如何将其转换为如下所示的列表

```
[6.56,4.64,5.75,5.59,6.32,6.54,7.20,5.33] 
```

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:03:32.333

```
with open('filename.txt', 'r') as f:
    numbers = [float(x.strip()) for x in f] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T06:55:27.823

您可以通过 readlines 直接从文件中读取它（假设每行一个值）并将其转换为浮点数。

```
values = open('filename.txt', 'rb').readlines()

values = [float(value.strip()) for value in values] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:04:35.507

假设您在名为 的文件中有这些值`values.txt`，您可以尝试以下操作：

```
values = []
with open('values.txt', 'r') as f:
    values = [line.strip() for line in f] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:07:20.640

```
[ float(i) for i in open('your_file','r').read().split('\n') if i ] 
```

# android - Child Activity ListView 更新 Parent Activity 的 ListView

> ID：15109126
> 
> 赞同：0
> 
> 时间：2013-02-27T10:00:23.110
> 
> 标签：android, android-listview, android-activity

我有一个问题，子活动的列表视图会更新父活动的列表视图的内容。

基本上，在我的父活动 (DetailActivity) 中，我有一个名为 lvContacts 的列表视图，我使用以下代码填充它：

```
ListView lvDetail = (ListView)findViewById(R.id.lvContacts);
SingleLineAdapter adapter = new SingleLineAdapter(this, Items);
lvDetail.setAdapter(adapter);
lvDetail.setSelector(R.drawable.generic_selector); 
```

其中 Items 是 GenericDataObject 的 ArrayList：

```
public class GenericDataObject implements Serializable {
private static final long serialVersionUID = 7661717999129942666L;
private String Id;
private String Description;
private String RawData;

// getters and setters snipped for smaller code
} 
```

SingleLineAdapter 如下所示：

```
public class SingleLineAdapter extends CustomListAdapter implements Filterable {
private static ArrayList<GenericDataObject> ObjectArray;
private static ArrayList<GenericDataObject> OriginalArray;
private LayoutInflater layoutInflater;
private String SearchedText = "";
private Context OriginatingContext;

public SingleLineAdapter(Context context, ArrayList<GenericDataObject> Objects) {
    OriginatingContext = context;
    ObjectArray = Objects;
    OriginalArray = Objects;
    layoutInflater = LayoutInflater.from(context);
    if (Objects != null)
        Collections.sort(Objects, ObjectComparator);
}

private Comparator<GenericDataObject> ObjectComparator = new Comparator<GenericDataObject>() {
    @Override
    public int compare(GenericDataObject object1,
            GenericDataObject object2) {
        return object1.getDescription().compareTo(object2.getDescription());
    }
};

@Override
public int getCount() {
    return ObjectArray.size();
}

@Override
public Object getItem(int position) {
    return ObjectArray.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = layoutInflater.inflate(R.layout.listitem_generic, null);
           holder = new ViewHolder();
           holder.lblTitle = (TextView)convertView.findViewById(R.id.lblTitle);

           convertView.setTag(holder);
          } else {
           holder = (ViewHolder) convertView.getTag();
    }

    holder.lblTitle.setText(ObjectArray.get(position).getDescription(), TextView.BufferType.SPANNABLE);

    if (!SearchedText.equals("")) {
        Spannable wordToSpan = (Spannable)holder.lblTitle.getText();
        String[] comps;
        if (SearchedText.startsWith("\""))
            comps = new String[] { SearchedText.substring(1, SearchedText.length() - 1) };
        else
            comps = SearchedText.split(" ");

        String name = holder.lblTitle.getText().toString().toLowerCase();
        for(int i = 0; i < comps.length; i++) {
            int Start = name.indexOf(comps[i]);
            while (Start > -1) {
                int End = Start + comps[i].length();
                wordToSpan.setSpan(new BackgroundColorSpan(0xFFFF9900), Start, End, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                Start = name.indexOf(comps[i], End);
            }
        }
    }
    setFont(holder.lblTitle);

    return convertView;
}

static class ViewHolder {
    TextView lblTitle;
}

@Override
public Filter getFilter() {
    return new Filter() {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            SearchedText = constraint.toString();
            final FilterResults result = new FilterResults();

            final ArrayList<GenericDataObject> custs = new ArrayList<GenericDataObject>();
            if(constraint != null) {
                String[] searches;
                if (constraint.toString().startsWith("\"") && constraint.toString().endsWith("\""))
                    searches = new String[] { SearchedText.substring(1, SearchedText.length() - 1) };
                else
                    searches = constraint.toString().split(" ");
                for(int i = 0; i < OriginalArray.size(); i++) {
                    String customerName = OriginalArray.get(i).getDescription().toLowerCase();

                    boolean bNotFound = false;
                    for(int j = 0; j < searches.length && bNotFound == false; j++) {
                        String searchFor = searches[j];
                        if (!customerName.contains(searchFor))
                            bNotFound = true;
                    }

                    if (!bNotFound)
                    {
                        custs.add(OriginalArray.get(i));
                    }
                }
                result.values = custs;
            }
            return result;
        }

        @Override
        @SuppressWarnings("unchecked")
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            ObjectArray = (ArrayList<GenericDataObject>)results.values;
            notifyDataSetChanged();
        }
    };
}
} 
```

lvContacts 的 OnItemClick 查询 Web 服务上的数据，然后显示一个新的 Activity：

```
Intent detail = new Intent(DetailActivity.this, ContactDetailActivity.class);
detail.putExtra("ListOfDetails", RowsFromService);
startActivity(detail); 
```

RowsFromService 也是 GenericDataObject 的 ArrayList。

在 ContactDetailActivity 中，我有一个名为 lvContactDetail 的 ListView。我通过以下方式填充：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    ArrayList<GenericDataObject> DetailRows = (ArrayList<GenericDataObject>)getIntent().getExtras().getSerializable("ListOfDetails");
    ListView lvContactDetail = (ListView)findViewById(R.id.lvContactDetail);
    SingleLineAdapter detailAdapter = new SingleLineAdapter(this, DetailRows);
    lvContactDetail.setAdapter(detailAdapter);
    lvContactDetail.setSelector(R.drawable.generic_selector);
} 
```

到目前为止，一切都很完美，但是如果我使用后退按钮或什至按钮上的 activity.finish() 返回 DetailActivity（父活动），则原始列表 (lvContacts) 现在填充有 lvContactDetail 的结果。

这只发生在我的应用程序中的两个列表中，其余所有列表都 100% 正确工作。

从其他列表加载列表时，是否有任何特殊注意事项需要注意？值得注意的是，我的应用程序中的主要活动为 CLEAR_TOP 和 REORDER_TO_FRONT 设置了标志...

很奇怪：即使我注释掉子活动中的 setAdapter 行，父活动仍然会使用其他活动的数据进行更新。这可能与创建 SingleLineAdapter 的新实例有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:00:34.933

似乎我是唯一真正遇到这个问题的人，所以我所做的只是在 onCreate 中“重新加载”父活动的 UI 部分。（保留布尔值以指示数据是否已加载）

# xml - XML 数字签名的性能：封装 vs 封装 vs 分离

> ID：15109130
> 
> 赞同：2
> 
> 时间：2013-02-27T10:00:31.173
> 
> 标签：xml, performance, digital-signature, xml-signature, electronic-signature

[XML-DSig](http://www.w3.org/TR/xmldsig-core/)描述了 XML 文档的签名可以相对于 XML 文档放置的 3 个位置：签名可以[分离、封装、封装](http://www.w3.org/TR/xmldsig-core/#def-SignatureDetached)

这三个选项的性能有何影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:16:06.933

分离会更有效，但差异很小（当然，它取决于文档大小 - 对于 100Mb 的文档，差异会比小 XML 块更大）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:22:45.853

由于没有编写 XMLdSig，请记住性能或文件大小可能是一个问题；流式传输是不可能的。有大量数据要签名，这确实是个问题，因为 DOM 对象会占用大量内存，相信我。在这方面，包裹或包裹并不重要。

这就是分离的签名闪耀的地方。签名本身并没有那么大，要签名的数据可以流式传输，因为您只需要它的哈希。

# r - 在R中的循环中存储和访问具有属性的变量

> ID：15109132
> 
> 赞同：0
> 
> 时间：2013-02-27T08:16:18.753
> 
> 标签：r, plyr

我的代码有一个小问题。这是我的代码示例。当我运行该函数时，我得到以下结果。另外，我正在使用`raply()`from`plyr`包，此函数将输出作为列表数组返回。我的代码

```
EmpPval<-function(dat,numberOfPermutations=100,usePlyr=TRUE)

{

  if(usePlyr)
  {
    require(plyr)
  }

   if(usePlyr)
  {

statistic <- raply(numberOfPermutations,permdat(dat)$statistic,.progress="tk")
    browser()
  }

  else
  {    
    statistic <- replicate(expr=permdat(dat)$statistic,n=numberOfPermutations,
                           simplify=TRUE)
  }

 }

>statistic   #this is from one iteration

    [1] 0.0409457

    attr(,"numerator")

    [1] 0.0007954759

    attr(,"denominator")

    [1] 0.01942758 
```

我的结果有属性。现在我的问题是我无法将这些值存储在变量中，我想像这样再次访问它们：

```
s1<-attr(statistic,"numerator")

s2<-attr(statistic,"denominator") 
```

在`permdat()`for 循环中运行。所以我将生成 100 个这样的值，并且我想存储所有 100 个统计值及其属性。我现在得到的是这样的：

```
>statistic ##this is after it runs in a loop

[1] 0.028793900 [2] 0.073739396 [3] 0.049136225 [4] 0.058408310 [5] 0.027253176 [6] 0.019471812 [7] 0.071434025 [8] 0.038411458 [9] 0.028921401 [10] 0.021929506..... The attribute values are not stored. 
```

有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:43:41.030

您可以将结果存储`permdat(dat)$statistic`在列表中而不是向量中。这将保留所有属性。

我强烈建议使用`replicate`而不是，`raply`因为后者会删除属性。如果您指定`simplify = FALSE`，结果将存储在列表中并保留所有属性。

```
statistic <- replicate(expr = permdat(dat)$statistic, n = numberOfPermutations,
                       simplify = FALSE) 
```

现在您可以使用 访问单个列表对象`"[["`，例如`statistic[[1]]`将返回第一个对象及其属性。

您可以返回具有以下值的向量`unlist`：

```
unlist(statistic) 
```

具有属性的向量可以通过以下方式返回`sapply`：

```
sapply(statistic, attr, "numerator")

sapply(statistic, attr, "denominator") 
```

如果您想更轻松地访问数据，可以创建一个新对象`s2`：

```
s2 <- unlist(statistic)
attributes(s2, "numerator") <- sapply(statistic, attr, "numerator")
attributes(s2, "denominator") <- sapply(statistic, attr, "denominator") 
```

现在，您可以简单地使用：

```
attr(s2, "numerator")
attr(s2, "denominator") 
```

# windows - 从我的应用程序执行外部命令行工具时，我真的需要“以管理员身份运行”吗？

> ID：15109139
> 
> 赞同：0
> 
> 时间：2013-02-27T10:00:48.137
> 
> 标签：windows, installation, uac

我用 VS2010 安装项目创建了一个应用程序和一个安装包。对于应用程序中的某个功能，我执行一个外部命令行工具 (.exe)，它安装到与应用程序相同的文件夹中。

安装后应用程序启动没有任何问题。我在没有管理员权限的情况下启动它。但它不会执行外部命令行工具。当我使用“以管理员身份运行”标志启动应用程序时，它可以工作。

有没有一种方法可以在不检查“以管理员身份运行”标志的情况下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:17:12.740

如果外部工具需要管理员权限，那么您别无选择。您将需要提升运行它。

不过，您可以以编程方式执行此操作。您无需设置可执行文件的兼容性选项即可检查*以管理员身份运行*选项。您需要做的是通过调用`ShellExecute`或作为动词`ShellExecuteEx`传递来启动该过程。`"runas"`

# history - 如果 mint linux skype 如何导入 windows skype 历史记录？

> ID：15109143
> 
> 赞同：0
> 
> 时间：2013-02-27T10:00:53.893
> 
> 标签：history, skype, linux-mint

我`skype`在我的电脑上使用了一个`windows 7`. 现在，我备份Skype历史记录并格式化PC然后安装`Mint linux os.`

现在。我正在安装Skype，但我怎么能`import old skype history in new skype mint linux os?`

`logs of skype history`mint linux在哪里存储？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T00:21:02.637

Skype 文件夹是：

/home/*用户*/.Skype/

也许它会起作用。

# jquery - 同一页面上的数据分页

> ID：15109150
> 
> 赞同：0
> 
> 时间：2013-02-27T10:01:26.287
> 
> 标签：jquery, ajax, django, postgresql, pagination

我想使用 Django 分页对数据库中的行进行分页，但使用 Ajax 和 JQuery 保持在同一页面上。我可以正确地可视化检索到的数据的第一页，但导航页面的链接不起作用。我知道我粘贴了很多代码，但我没有在互联网上找到完整的工作示例，所以我希望在这里得到一个。你能帮我吗？提前致谢。

使用[Django pagination docs](https://docs.djangoproject.com/en/dev/topics/pagination/)，到目前为止，我已经完成了以下工作：

**urls.py**：

```
from django.conf.urls.defaults import *
from django.contrib.auth.views import login, logout

urlpatterns = patterns('gomos.views',
    url(r'^$',    login,   name='login'),
    url(r'^out',  logout,  {'next_page': '/gomos'},  name='logout'),
    url(r'^main', 'index', name='main'), 
    (r'^getGomosProducts', 'getGomosProducts'),
) 
```

**视图.py**

```
from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.views import logout_then_login
from django.contrib.auth.decorators import login_required
from django.http import HttpResponse, HttpResponseRedirect, HttpRequest
from django.core.urlresolvers import reverse
from gomos.models import *
from django.shortcuts import render_to_response
from django.template import RequestContext
from decimal import *
import datetime
from django.utils.timezone import utc
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger

@login_required
def index(request):
    return render_to_response('gomos/index.html',
                              {},
                              context_instance=RequestContext(request))

@login_required
def getGomosProducts(request):
    get = request.GET
    startDate = get['startDate']
    stopDate = get['stopDate']

    startY = Decimal(startDate[:4])
    startM = Decimal(startDate[5:-3])
    startD = Decimal(startDate[-2:])

    stopY = Decimal(stopDate[:4])
    stopM = Decimal(stopDate[5:-3])
    stopD = Decimal(stopDate[-2:])

    start = datetime.datetime(startY, startM, startD, tzinfo=utc)
    stop = datetime.datetime(stopY, stopM, stopD, tzinfo=utc)

    productList = GomosFiles.objects.filter(prod_date__range=(start, stop)).all()

    paginator = Paginator(productList, 30)

    page = request.GET.get('page')
    try:
        products = paginator.page(page)
    except PageNotAnInteger:
        products = paginator.page(1)
    except EmptyPage:
        products = paginator.page(paginator.num_pages)

    return render_to_response('gomos/prodList.html',
                              {'products': products},
                              context_instance=RequestContext(request)) 
```

**索引.html**

```
{% extends "base.html" %}
{% block header %}
{% load url from future %}
<div id="idLogOutDiv" class="logOutDiv">
    <form id="idLogOutForm" action="{% url 'logout' %}" method="post">{% csrf_token %}
        <span id="welcomeUserId" class="welcomeUserClass">Welcome, <strong>{{ user.username }}</strong></span>
        <button id="idLogOutSubmit" name="idLogOutSubmit" type="submit">Logout</button>
    </form>
</div>
{% endblock header %}

{% block content %}
<span>From <input type="text" id="fromDatePicker" /></span>
<span>to  <input type="text" id="toDatePicker" /></span>
<button type="button" id="searchBut">Search</button>

<div id="prodList"></div>
{% endblock content %} 
```

**产品列表.html**

```
{% for prod in products %}
    <span id="prod-id-{{ prod.id }}">{{ prod.id }}</span>
    <span id="prod-name-{{ prod.id }}">{{ prod.file_name }}</span></br>
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if products.has_previous %}
            <a class="prev" href="getGomosProducts?page={{ products.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ products.number }} of {{ products.paginator.num_pages }}.
        </span>

        {% if products.has_next %}
            <a href="getGomosProducts?page={{ products.next_page_number }}">next</a>
        {% endif %}
    </span>
</div> 
```

**实用程序.js**

```
$(document).ready(function(){
    $("#searchBut").click(function(){

        if($("#fromDatePicker").val() == "")
            $("#fromDatePicker").datepicker("setDate", minDate);

        if($("#toDatePicker").val() == "")
            $("#toDatePicker").datepicker("setDate", maxDate);

        var request = $.ajax({
            type: "get",
            url: "getGomosProducts",
            data:{
                'startDate': $("#fromDatePicker").val(),
                'stopDate': $("#toDatePicker").val()
            }
        });
        request.done(function(prodList){
            $("#prodList").append(prodList);
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:43:35.600

好的，***自动解决***；修改必须如下：

**产品列表.html**

```
{% for prod in products %}
    <span id="prod-id-{{ prod.id }}">{{ prod.id }}</span>
    <span id="prod-name-{{ prod.id }}">{{ prod.file_name }}</span></br>
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if products.has_previous %}
            <button onclick="getPage({{ products.previous_page_number }})">previous</button>
        {% endif %}

        <span class="current">
            Page {{ products.number }} of {{ products.paginator.num_pages }}.
        </span>

        {% if products.has_next %}
            <button onclick="getPage({{ products.next_page_number }})">next</button>
        {% endif %}
    </span>
</div> 
```

**实用程序.js**

```
$(document).ready(function(){
    $("#searchBut").click(function(){

        if($("#fromDatePicker").val() == "")
            $("#fromDatePicker").datepicker("setDate", minDate);

        if($("#toDatePicker").val() == "")
            $("#toDatePicker").datepicker("setDate", maxDate);

        var request = $.ajax({
            type: "get",
            url: "getGomosProducts",
            data:{
                'startDate': $("#fromDatePicker").val(),
                'stopDate': $("#toDatePicker").val()
            }
        });
        request.done(function(prodList){
            $("#prodList").html(prodList);
        });
    });
});

function getPage(page){
    var request = $.ajax({
        type: "get",
        url: "getGomosProducts",
        data:{
            'startDate': $("#fromDatePicker").val(),
            'stopDate': $("#toDatePicker").val(),
            'page': page
        }
    });

    request.done(function(prodList){
        $("#prodList").html(prodList);
    });
} 
```

# jquery - 是否可以使用 jquery 删除 display:none 的内联样式？

> ID：15109152
> 
> 赞同：4
> 
> 时间：2013-02-27T10:01:49.580
> 
> 标签：jquery, jquery-ui

我在我的网站上使用 jquery 选项卡。我刚刚为我正在使用的地图安装了一个新的 jquery 插件（平滑缩放），但它不是 dipalying 。我检查了萤火虫，它正在创建一种内联显示样式：无。

我已经尝试使用以下方法来删除显示样式，但它不起作用

```
$(document).ready(function(){
    $("#tabs-4").css('display', '');
}); 
```

有什么方法可以使用 jquery 从这个元素中完全删除所有内联样式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T10:03:34.527

尝试`.removeAttr()`：

```
$(document).ready(function(){
    $("#tabs-4").removeAttr('style');
}); 
```

如果它不起作用，`doc ready`那么您可以尝试`window load`：

```
$(window).load(function(){
   $("#tabs-4").removeAttr('style');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:03:55.980

代码应该更改显示属性而不是删除它。您可能需要更改`block`为所需的属性值。

```
$(document).ready(function(){
    $("#tabs-4").css('display', 'block');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T10:05:05.073

如果您希望元素上的所有内联 css 消失，请尝试删除整个样式属性。我创建了一个 js fiddle，看看。

[http://jsfiddle.net/TfUhU/](http://jsfiddle.net/TfUhU/)

```
$("document").ready(function(){
    $("#demo").attr("style", "");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T10:03:11.910

这将清除所有内联样式。

`$("#tabs-4").attr("style", "");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-09T19:19:49.817

该链接将成为单击时显示 div 的触发器。所以你的 Javascript 将是：

```
$('.trigger').click(function() {
   $('.news').toggle();
}); 
```

# javascript - 使用 JavaScript 命名空间

> ID：15109153
> 
> 赞同：0
> 
> 时间：2013-02-27T10:01:50.437
> 
> 标签：javascript, namespaces

我正在尝试将此代码转换为名称空间以使其更清洁并避免污染全局名称空间。我对此相当陌生，可以使用一些指导或示例如何将以下代码转换为 javascript 命名空间。

```
function Validator(fields) {
     this.fields = fields;
}

Validator.prototype.validate = function(form) {
  for(var i = 0, l=this.fields.length; i < l; i++) {
    alert(this.fields[i].value);
        if (this.fields[i].value == 0) {
            alert("The field  is empty");
            return false;
        }
    }
}

var validator = new Validator([ "username", "password"]);

function runValidate(form) {
validator.validate(form);
    } 
```

（我知道这种 OO 验证方法太过分了！）我从类似“runValidate(this.form)”这样的表单中的按钮调用这个 runValidate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:35:08.360

命名空间只是 javascript 对象，例如

```
var myNamespace = {};
myNamespace.Validator = function(fields) {
   ...
}
myNamespace.Validator.prototype.validate = function(form) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:50:02.160

Javascript 没有本机命名空间，但您可以使用简单明了的对象来模拟它。这是命名空间实用程序函数的简单实现：

```
function namespace(namespaceString) {
  var nodes = namespaceString.split('.'),
      parent = window,
      currentNode;    

  for(var i = 0, length = nodes.length; i < length; i++) {
    currentNode = nodes[i];
    parent[currentNode] = parent[currentNode] || {};
    parent = parent[currentNode];
  }

  return parent;
} 
```

你可以这样使用：

```
var MyApp = namespace("MyApp");
MyApp.Validator = function(fields) {
  this.fields = fields;
}

var validator = new MyApp.Validator(["username", "password"]);
// this also works:
var validator = new namespace("MyApp.Validator")(["username", "password"]); 
```

这将防止您污染全局命名空间，但您仍然会有一些全局变量：`MyApp`在这种情况下，还有命名空间中的任何其他根节点。

# python - 从文件加载数据集，用于 sklearn/numpy，包括标签

> ID：15109165
> 
> 赞同：7
> 
> 时间：2013-02-27T10:02:13.120
> 
> 标签：python, numpy, scikit-learn, dataset

我看到使用 sklearn 我们可以使用一些预定义的数据集，例如`mydataset = datasets.load_digits()`我们可以获得数据集的数组（一个 numpy 数组？）`mydataset.data`和相应标签的数组`mydataset.target`。但是我想加载我自己的数据集以便能够将它与 sklearn 一起使用。我应该如何以及以哪种格式加载我的数据？我的文件具有以下格式（每一行都是一个数据点）：

```
-0.2080,0.3480,0.3280,0.5040,0.9320,1.0000,label1
-0.2864,0.1992,0.2822,0.4398,0.7012,0.7800,label3
...
...
-0.2348,0.3826,0.6142,0.7492,0.0546,-0.4020,label2
-0.1856,0.3592,0.7126,0.7366,0.3414,0.1018,label1 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T10:31:17.700

您可以使用 numpy 的 genfromtxt 函数从文件中检索数据（[http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)）

```
import numpy as np
mydata = np.genfromtxt(filename, delimiter=",") 
```

但是，如果您有文本列，则使用 genfromtxt 会比较棘手，因为您需要指定数据类型。

[使用优秀的 Pandas 库（ http://pandas.pydata.org/](http://pandas.pydata.org/)）会容易得多

```
import pandas as pd
mydata = pd.read_csv(filename)
target = mydata["Label"]  #provided your csv has header row, and the label column is named "Label"

#select all but the last column as data
data = mydata.ix[:,:-1] 
```

# scala - 使用 Scala 2.10 实现良好数据流的 CPS 库

> ID：15109167
> 
> 赞同：2
> 
> 时间：2013-02-27T10:02:20.163
> 
> 标签：scala, future, continuations

我正在寻找一个允许我使用的轻量级库，而不是编写：

```
val future1 = process1()
future1.onSuccess { process2() } 
```

以下：

```
val future1 = process1()
future1.await()
process2() 
```

*不阻塞*线程（所以不是`Await.result(future1)`：）也就是说，我正在想象一个基于延续的库，它将后者转换为前者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-21T13:57:20.853

这个问题是一年前提出的。今天，比 Akka Dataflow 更有前途的替代方案是**scala-async**，可在[https://github.com/scala/async](https://github.com/scala/async)获得。

Akka Dataflow 依赖于 continuation 插件，该插件没有被积极维护并且正在弃用。

另一方面，**scala-async**并没有尝试成为通用的 cps 解决方案，而只是处理异步代码的编写（我相信这恰好是 cps 插件最常见的用例）。换句话说，它直接实现了 Akka`flow`方法的等价物（在宏的帮助下），因此它的范围比 cps 插件更窄（并且定义更好），我认为这是让它成为一个更好的整体实现的关键。

这是从自述文件页面中获取的示例：

```
val future = async {
  val f1 = async { ...; true }
  val f2 = async { ...; 42 }
  if (await(f1)) await(f2) else 0
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T10:22:40.667

看看[Akka Dataflow Concurrency](http://doc.akka.io/docs/akka/snapshot/scala/dataflow.html)。看起来正是你想要的！

**示例**（请参阅[文档](http://doc.akka.io/docs/akka/snapshot/scala/dataflow.html#Using_flow)）：

```
flow {
  val f1 = flow { "Hello" }
  val f2 = flow { "world!" }
  f1() + " " + f2()
} onComplete println 
```

Akka Dataflow 使用 Scala 的[Delimited Continuations](http://en.wikipedia.org/wiki/Delimited_continuation)自动在幕后为您生成延续。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T10:23:09.943

我目前知道的唯一这样的库是**Akka DataFlow**：[http ://doc.akka.io/docs/akka/snapshot/scala/dataflow.html](http://doc.akka.io/docs/akka/snapshot/scala/dataflow.html)

查看项目定义（[https://github.com/akka/akka/blob/master/project/AkkaBuild.scala](https://github.com/akka/akka/blob/master/project/AkkaBuild.scala)），akka-dataflow 似乎没有太多依赖关系，所以它应该是相当轻量级的。

**更新：** 这是一个使用示例，取自 akka-dataflow 的文档：

```
flow {
  val f1 = flow { "Hello" }
  val f2 = flow { "world!" }
  f1() + " " + f2()
} onComplete println 
```

这清楚地说明了您可以以程序方式编写代码（即使在引擎盖下它确实被转换为 map/flatMap 链）。

作为**另一种简单的选择**，您是否考虑过仅用于延续？它们使用起来有点冗长，但总体好处是相同的：以程序方式编写代码，而不是使用显式的 cps 样式将其弄乱。举个例子，上面的例子直接翻译成下面的纯scala代码：

```
{for {
  f1 <- future( "Hello" );
  f2 <- future( "world!" )
} yield f1 + " " + f2
} onComplete println 
```

这没什么不同。而且你不会找到比**没有**库更轻量级的库（尽管我承认在简洁性方面我仍然更喜欢 akka-dataflow，但只是略微领先）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-27T14:01:43.527

Scala 中还有另外一种数据流并发实现，您可能想要签出，[ScalaFLow](https://github.com/hotzen/ScalaFlow)。github repo 也包含论文 PDF，非常详细地描述了这项工作。

[Kai 在这个论坛帖子](http://www.scala-lang.org/old/node/7890.html)中给出了一个演示：

引用：

“一个最小的演示（是的，看起来像期货）：

```
val v = new Variable[Int]
flow { println( v() ) // suspends without blocking }
flow { v := 42 // resumes above flow } 
```

"

# java - 从 MainActivity 以外的类调用意图

> ID：15109176
> 
> 赞同：0
> 
> 时间：2013-02-27T10:02:38.240
> 
> 标签：java, android, android-intent

首先让我指出这是我第一次编写应用程序，甚至是 Java。我习惯于编写 PHP 和 JS 代码，所以请善待

我遵循谷歌指南[http://developer.android.com/training/basics/network-ops/connecting.html](http://developer.android.com/training/basics/network-ops/connecting.html)

这是我的主要活动

```
package com.example.eerstetest;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.eerstetest.MESSAGE";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public void sendMessage(View view) {
    Intent intent = new Intent(this, DisplayMessageActivity.class); 
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
}

public void getUpdate(View view) {
    Intent intent = new Intent(this, DisplayMessageActivity.class); 

    // see if there is a data connection
    ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
    if (networkInfo != null && networkInfo.isConnected()) {
        // fetch data
        //textView.setText("Network connection available.");
        String dataUrl = "http://www.myurl.com";
        new DownloadUpdate().execute(dataUrl);
    } else {
        // display error
        //textView.setText("No network connection available.");
        String message = "No network connection available.";
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }
}
} 
```

如您所见，我有一个有效的 sendMessage 方法，使用 DisplayMessageActivity 我也有 getUpdate 方法，它调用位于单独 .java 文件中的 DownloadUpdate 类

```
package com.example.eerstetest;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;

import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.util.Log;

// Uses AsyncTask to create a task away from the main UI thread. This task takes a 
// URL string and uses it to create an HttpUrlConnection. Once the connection
// has been established, the AsyncTask downloads the contents of the webpage as
// an InputStream. Finally, the InputStream is converted into a string, which is
// displayed in the UI by the AsyncTask's onPostExecute method.
public class DownloadUpdate extends AsyncTask<String, Integer, String> {
private static final String DEBUG_TAG = "HttpExample";
//private TextView textView;
public final static String EXTRA_MESSAGE = "com.example.eerstetest.MESSAGE";

@Override
protected String doInBackground(String... url) {

   // params comes from the execute() call: params[0] is the url.
   try {
       return downloadUrl(url[0]);
   } catch (IOException e) {
       return "Unable to retrieve web page. URL may be invalid.";
   }
}

// onPostExecute displays the results of the AsyncTask.
@Override
protected void onPostExecute(String result) {
   //textView.setText(result);
    Intent intent = new Intent(this, DisplayMessageActivity.class); 
    intent.putExtra(EXTRA_MESSAGE, result);
    startActivity(intent);
}

// Given a URL, establishes an HttpUrlConnection and retrieves
// the web page content as a InputStream, which it returns as
// a string.
private String downloadUrl(String myurl) throws IOException {
    InputStream is = null;
    // Only display the first 500 characters of the retrieved
    // web page content.
    int len = 500;

    try {
        URL url = new URL(myurl);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setReadTimeout(10000 /* milliseconds */);
        conn.setConnectTimeout(15000 /* milliseconds */);
        conn.setRequestMethod("GET");
        conn.setDoInput(true);
        // Starts the query
        conn.connect();
        int response = conn.getResponseCode();
        Log.d(DEBUG_TAG, "The response is: " + response);
        is = conn.getInputStream();

        // Convert the InputStream into a string
        String contentAsString = readIt(is, len);
        return contentAsString;

    // Makes sure that the InputStream is closed after the app is
    // finished using it.
    } finally {
        if (is != null) {
            is.close();
        } 
    }
}

// Reads an InputStream and converts it to a String.
public String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
    Reader reader = null;
    reader = new InputStreamReader(stream, "UTF-8");        
    char[] buffer = new char[len];
    reader.read(buffer);
    return new String(buffer);
}
} 
```

从这里调用 DisplayMessageActivity 时，我不明白必须为上下文填写什么

为了完整，这里是 m 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.eerstetest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.eerstetest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.eerstetest.DisplayMessageActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.eerstetest.MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.eerstetest.MainActivity" />
    </activity>
    <activity
        android:name="com.example.eerstetest.DownloadUpdate"
        android:label="@string/title_activity_download_update" >
    </activity>
</application>

</manifest> 
```

如果还有什么我可以提供的，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:11:49.863

将上下文作为参数传递，如下所示：

```
new DownloadUpdate(MainActivity.this).execute(dataUrl); 
```

在 DownloadUpdate 中添加构造函数：

```
Context context;
public DownloadUpdate(Context context){
    this.context = context
} 
```

然后将您的 DownloadUpdate 类中的上下文用作全局参数并使用此调用意图

```
Intent intent = new Intent(DownloadUpdate.this, DisplayMessageActivity.class); 
intent.putExtra(EXTRA_MESSAGE, result);
context.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:08:21.853

像这样调用：

```
Intent intent = new Intent(DownloadUpdate.this, DisplayMessageActivity.class); 
intent.putExtra(EXTRA_MESSAGE, result);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:28:39.263

我认为你`DownloadUpdate`来自另一个班级或活动的电话是：

```
new DownloadUpdate().execute(params); 
```

要解决 中的上下文问题`DownloadUpdate`，请创建一个构造函数，例如：

```
public DownloadUpdate(Context context){
    this.context = context;
} 
```

这里的意思是你在类中`this.context`全局声明的`Context`变量。`DownloadUpdate`然后调用`DownloadUpdate`：

```
new DownloadUpdate(your_context).execute(params); 
```

然后使用您进入的上下文`DownloadUpdate`来创建您的意图。像：

```
@Override
protected void onPostExecute(String result) {
   //textView.setText(result);
    Intent intent = new Intent(context, DisplayMessageActivity.class); 
    intent.putExtra(EXTRA_MESSAGE, result);
    startActivity(intent);
} 
```

# math - 平面中的变形点

> ID：15109182
> 
> 赞同：1
> 
> 时间：2013-02-27T10:02:44.247
> 
> 标签：math, opencv, transformation, polygons, roi

点 :: (xy) 是已知的。

我在三角形区域内有点。
我知道初始位置和最终位置的顶点坐标。我知道三角形区域内所有点的初始坐标。

现在**我想找出三角形区域内所有点的最终坐标。**

下图显示了初始位置和最终位置的点。

![在此处输入图像描述](../Images/23b7c8a75cd6ae189da558ec8e8e9af3.png) ![在此处输入图像描述](../Images/66ed6bf2ba74b542196e5af757c8a4a7.png)

谁能告诉我如何在 OpenCV 和 C++ 平台上做到这一点？

我也可以对任意形状的轮廓执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:12:17.763

我正在使用 3D 坐标来考虑

*   向量翻译`[u v]`
*   matrixabcd 进行的二维线性变换

整体变换矩阵将具有以下形式

```
 [ a b u]
M = [ c d v]
    [ 0 0 1] 
```

1.  从三角形中取3 点`A=[x1 y1 1]`和`B=[x2 y2 1]``C=[x3 y3 1]`
2.  将它们与变换后的位置`A' = [x1' y1' 1]`和`B'=[x2' y2' 1]`和进行比较`C'=[x3' y3' 1]`。Id est：做你的数学得到变换矩阵`M` ，这样`A' = M A`和`B' = M B`和`C' = M C`
3.  适用`x -> M x`于每个输入点

编辑：`M`使用[转换矩阵中的转换将转换合并到矩阵中](http://en.wikipedia.org/wiki/Translation_matrix)

编辑：您似乎不清楚“做你的数学”。

你会意识到这 3 个方程可以写成：

```
[x1' x2' x3']     [x1 x2 x3]
[y1' y2' y3'] = M [y1 y2 y3]
[1   1   1  ]     [1  1  1 ] 
```

或者

```
X' = M X 
```

或者

```
M = X . X'^-1 
```

是的，OpenCV`inv()`在矩阵上有一个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:22:14.213

在数学上，您可以通过计算原始三角形中每个点的重心坐标并使用新坐标转换回位置来做到这一点：

```
given initial triangle vertices A, B, and C, and point p,
find barycentric coordinates (a,b,c) such that a+b+c=1 and p = a*A + b*B + c*C:
  -> solve  [A.x B.x C.x]   [a]     [p.x]
            [A.y B.y C.y] * [b]  =  [p.y]
            [ 1   1   1 ]   [c]     [ 1 ]

then, given new vertices D, E, and F,
resulting point q = a*D + b*E + c*F:
  -> compute  [q.x]  =  [D.x E.x F.x] * [a]
              [q.y]     [D.y E.y F.y]   [b]
                                        [c] 
```

因此，在 OpenCV 中：

```
float p_data[3] =
  { p.x,
    p.y,
    1.0
  };
Mat_<float> p(3, 1, p_data);

float m_data[9] =
  { A.x, B.x, C.x,
    A.y, B.y, C.y,
    1.0, 1.0, 1.0
  };
Mat_<float> M(3, 3, m_data);

Mat_<float> bary(3,1);
cv::solve(M, p, bary, DECOMP_LU);

float n_data[6] =
  { D.x, E.x, F.x,
    D.y, E.y, F.y
  };
Mat_<float> N(2, 3, n_data);

Mat_<float> result(2,1) = N * bary; 
```

要同时映射点，请将、和`point_count`的列数设置为而不是（同时相应地增加 的大小等）`p``bary``result``point_count``1``p_data`

根据应用程序，首先显式计算仿射矩阵并直接应用它可能更方便/有效：

```
Mat_<float> Affine = N * M.inv();
Mat_<float> result = Affine * p; 
```

# c++ - C++ 迭代器和反向迭代器

> ID：15109185
> 
> 赞同：5
> 
> 时间：2013-02-27T10:02:47.383
> 
> 标签：c++, iterator

我正在写一个`iterator`（实际上它是`const_iterator`针对我当前的对象，我也想创建一个`reverse_const_iterator`也。

我环顾四周，看看如何做到这一点，我偶然发现了[这个](http://www.cplusplus.com/reference/iterator/reverse_iterator/)：

> 但是请注意，当迭代器被反转时，反转的版本不会指向范围内的相同元素，而是指向它之前的元素。就是这样，为了安排一个范围的最后一个元素：一个指向一个范围中一个过去的元素的迭代器，当反转时，被更改为指向最后一个元素（不超过它) 的范围（如果反转，这将是范围的第一个元素）。如果一个范围内第一个元素的迭代器被反转，反转的迭代器指向第一个元素之前的元素（如果反转，这将是范围的最后一个元素）。

这是从用户的角度发生的情况，还是当您取消引用 a 时`reverse_iterator`，它不会通过为您提供您*认为*它指向的对象的值/引用来抽象它吗？这只是实现细节吗？

我的理解是：

```
for(i = obj.rbegin(); i != obj.rend(); i++) 
```

相当于

```
for(i = obj.begin(); i != obj.end(); i++) 
```

除非反过来。所以`*i`在第一种情况下会向后穿过容器，在第二种情况下会向前穿过容器。我的直觉正确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:07:11.667

你是对的，它是一个抽象。反向迭代器包含一个普通迭代器，它指向如果取消引用它会得到的对象之后的元素。然而，它不仅仅是一个实现细节。适配器提供了一个返回底层迭代器的`std::reverse_iterator`成员函数调用。`base`

该标准定义`std::reverse_iterator`了一个迭代器适配器，它与迭代器的适配关系如下：

> 反向迭代器与其对应的迭代器 i 之间的基本关系由恒等式建立：`&*(reverse_iterator(i)) == &*(i - 1)`

的一个常见用途`base`是从容器中删除一个元素，可以这样完成：

```
it++;
lst.erase(it.base()); 
```

如果您想在反向迭代容器时执行此操作，您可以执行以下操作：

```
it++;
std::list<int>::reverse_iterator(lst.erase(it.base())); 
```

# .net - .net HTTP POST 方法 cookie 已禁用

> ID：15109190
> 
> 赞同：0
> 
> 时间：2013-02-27T10:02:55.747
> 
> 标签：.net, http, post, cookies

我正在尝试使用 POST 和 C#（或 VB）登录到一个站点（不能提供 URL，它只是 Intranet）。我收到以下错误：

> 该系统需要使用 HTTP cookie 来验证授权信息。我们的系统检测到您的浏览器已禁用 HTTP cookie 或不支持它们。请参阅浏览器中的帮助页面，了解有关如何正确配置浏览器以用于本系统的更多信息。

我使用以下代码：

```
var cookies = new CookieContainer();
ServicePointManager.Expect100Continue = false;

var request = (HttpWebRequest)WebRequest.Create("http://.......");
request.CookieContainer = cookies;
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
using (var requestStream = request.GetRequestStream())
using (var writer = new StreamWriter(requestStream))
{
    writer.Write("user=XX&pass=XX");
}

using (var responseStream = request.GetResponse().GetResponseStream())
using (var reader = new StreamReader(responseStream))
{
    var result = reader.ReadToEnd();
    Console.WriteLine(result);
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:17:34.297

> 我该如何解决这个问题？

通过查看合法流量并从代码中重放。我的猜测：登录页面设置了一个 cookie 和/或一个隐藏的表单值，您必须将两者之一或两者都发布到登录页面。

所以：启动[Fiddler](http://www.fiddler2.com/fiddler2/)，用浏览器请求登录页面，登录，确认上述理论并从代码重建：

1.  获取附加了 CookieContainer 的登录表单
2.  读取登录表单并存储隐藏值（如果需要）
3.  使用 1 中的 CookieContainer 和 2 中的表单字段执行 POST
4.  ？？？
5.  利润

# android - 如何在新的开发者控制台中上传 apk 扩展文件

> ID：15109191
> 
> 赞同：11
> 
> 时间：2013-02-27T10:02:56.413
> 
> 标签：android, apk

我有一个 10 Mb 的项目和一个 100 MB 的扩展文件，在新的 Google Play 开发者控制台中，我已经上传了 apk 文件。

但是如何上传扩展文件呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-18T12:18:23.157

根据文档，

由于新的 Google Play 开发者控制台的当前限制，您将无法在为新应用程序上传的第一个 APK 文件中添加其他扩展文件。作为一种解决方法，请先上传一个占位符 APK 文件，然后将其替换为包含您需要的其他扩展文件的 APK 文件。所有这些都可以在应用程序仍处于草稿状态时执行，因此对您的（潜在）用户没有影响。

这个对我有用..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:04:01.297

如新控制台所示，尚不支持此功能。您需要切换回旧控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:06:26.277

您现在无法上传扩展文件。而是切换回旧开发者控制台。

# iphone - 如何获取设备的视频文件数量

> ID：15109199
> 
> 赞同：0
> 
> 时间：2013-02-27T10:03:22.937
> 
> 标签：iphone, xcode

我必须在我的应用程序中使用具有名称的设备的视频文件数量。但我无法检索它，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:43:53.807

[ALAssetsLibrary](http://developer.apple.com/library/ios/#DOCUMENTATION/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)的一个实例提供对照片应用程序控制下的视频和照片的访问。ALAssetsLibrary 还包括保存的照片相册中的内容，来自 iTunes 以及直接导入设备的内容。您可以使用它来检索所有资产组的列表，并将图像和视频保存到“已保存的照片”相册中。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:02:57.237

您可以根据需要[使用 ALAssetsLibrary](https://github.com/siqin/TTImagePicker/blob/master/TTImagePicker/TTImagePickerController/TTAlbumTableController.m)获取专辑、照片或视频的数量。

例如，计算专辑的数量：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // !!! Notice : ALAssetsGroupAll doesn't include ALAssetsGroupLibrary.
    [_assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
        if (group) {
            [self.groupArray addObject:group];
            [self performSelectorOnMainThread:@selector(reloadTableView) withObject:nil waitUntilDone:YES];
        }
    } failureBlock:^(NSError *error) {
        NSLog(@"Group not found!\n"); // Photo-access is disabled.
    }];
}); 
```

然后计算照片的数量：

```
// Get count
ALAssetsGroup *group = (ALAssetsGroup*)[self.groupArray objectAtIndex:indexPath.row];
[group setAssetsFilter:[ALAssetsFilter allPhotos]];
NSInteger groupCount = [group numberOfAssets]; 
```

注意我为allPhotos[设置了过滤器](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsFilter_Class/Reference/Reference.html)，你可以为allVideos设置它。

# wix - 使用 WIX 想要制作一个可以更新现有安装并首次安装应用程序的包

> ID：15109200
> 
> 赞同：0
> 
> 时间：2013-02-27T10:03:22.563
> 
> 标签：wix

在不同的地方，我读过类似于“如果特定用户没有安装您的产品的早期版本，则打包为完整 MSI 包的更新可以表现为首次安装”的声明。

但事实证明，要做到这一点很困难。

我有一个安装得很好的安装包。但是当我在下面添加升级元素时，它不再进行第一次安装。

```
<Upgrade Id="DE3F65C6-FAAF-4FE0-8D3A-87E4A1F5E36F">
    <UpgradeVersion OnlyDetect="no" Minimum="4.1.0.0" IncludeMinimum="yes" Maximum="5.0.0.7" IncludeMaximum="no" Property="PREVIOUSVERSIONFOUND" />
</Upgrade> 
```

上面的 Id 与 Product 元素的 UpgradeCode 属性中的相同。我确定在升级元素中我应该做些什么，但谁能告诉我什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:11:15.877

您可能会在此处看到的一个潜在问题是 Windows Installer 只关心版本号中的前 3 个值。微软表示第四个数字纯粹用于内部构建跟踪，因此发布的安装程序不应该关心它。

因此 Windows Installer 将 5.0.0.1 视为与 5.0.0.30 相同的版本。

此外，除非您需要某种复杂的升级逻辑，否则我建议您可以改用该`MajorUpgrade`元素，因为它消除了编写将执行标准主要升级的包的许多痛苦。它的文档可以在[这里找到](http://wix.sourceforge.net/manual-wix3/wix_xsd_majorupgrade.htm)

另一个令人困惑的地方可能是，虽然安装程序实际上会将主要升级视为卸载，然后重新安装，但您设置的 UI 可能不会以相同的方式运行，特别是如果您只是使用默认 UI 对话框集之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:16:19.657

StackOverflow 是否会授予“在惊呼我是白痴时击中额头”徽章？

问题与我所寻找的地方相去甚远。只是为了让其他寻找我问题答案的人来到这里，真正的答案是包括我在问题中提到的那个元素（显然是针对您的特定情况修改了 ID 和版本号）。

我的包裹也有

```
 <InstallExecuteSequence>
        <RemoveExistingProducts Before="InstallInitialize" />
    </InstallExecuteSequence> 
```

这可能不是绝对必要的，但它确实有效。

# facebook - 是否有官方的 Facebook Graph Search API

> ID：15109204
> 
> 赞同：1
> 
> 时间：2013-02-27T10:03:31.817
> 
> 标签：facebook, facebook-graph-api

是否可以通过 facebook graph api 中的一个 url 中的关键字搜索个人资料、页面、组和事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:20:25.227

我假设您谈论的是最近宣布的图形搜索，目前某些用户可以使用。它不能作为某种 API 使用。但是，您可以使用[此问题中描述的搜索 API](https://stackoverflow.com/questions/2263287/does-facebook-have-a-public-search-api-yet)

# jquery - Phonegap 提交表单和图片

> ID：15109209
> 
> 赞同：0
> 
> 时间：2013-02-27T10:03:35.450
> 
> 标签：jquery, ajax, cordova

我是*Phonegap*开发的新手，在提交表单和图像时遇到了困难。我搜索了其他文章，似乎没有文章涉及提交表单数据和图像。

到目前为止，我得到的是一个 HTML 页面，您可以在其中拍照（相机）或从您的库中选择一个。下面是一个表格。触摸表单中的“发送”按钮后，我想将表单和图像的数据发送到 PHP 服务器。表单运行良好，内容被带到服务器，当我尝试将 Base64 图像数据包含为变量时，发送到服务器的信息是**[object HTMLCollection]**而不是数据本身。

编码：

```
var pictureSource;   // picture source
var destinationType; // sets the format of returned value 

// Wait for Cordova to connect with the device
//
document.addEventListener("deviceready",onDeviceReady,false);

// Cordova is ready to be used!
//
function onDeviceReady() {
    pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
}

// Called when a photo is successfully retrieved
//
function onPhotoDataSuccess(imageData) {
  // Uncomment to view the base64 encoded image data
  // console.log(imageData);

  // Get image handle
  //
  var smallImage = document.getElementById('smallImage');

  // Unhide image elements
  //
  smallImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  smallImage.src = "data:image/jpeg;base64," + imageData;
}

// Called when a photo is successfully retrieved
//
function onPhotoURISuccess(imageURI) {
  // Uncomment to view the image file URI 
  // console.log(imageURI);

  // Get image handle
  //
  var largeImage = document.getElementById('largeImage');

  // Unhide image elements
  //
  largeImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  largeImage.src = imageURI;
}

// A button will call this function
//
function capturePhoto() {
  // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
    destinationType: destinationType.DATA_URL });
}

// A button will call this function
//
function capturePhotoEdit() {
  // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true,
    destinationType: destinationType.DATA_URL });
}

// A button will call this function
//
function getPhoto(source) {
  // Retrieve image file location from specified source
  navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: destinationType.FILE_URI,
    sourceType: source });
}

// Called if something bad happens.
// 
function onFail(message) {
  alert('Mislukt: ' + message);
} 
```

的HTML：

```
<div class="container">
      <div class="contactForm" id="contactForm">
        <form id="contact">
            <fieldset>
                <label for="contactName" id="name_label">Naam (vereist)</label>
                <input type="text" name="contactName" id="contactName" size="30" value="" class="text-input" />
                <span class="error" id="nameError">Geef uw naam op!</span>
                <label for="contactEmail" id="email_label">Email (vereist)</label>
                <input type="text" name="contactEmail" id="contactEmail" size="30" value="" class="text-input" />
                <span class="error" id="emailError">Geef uw e-mailadres op!</span> <span class="error" id="emailError2">Please enter a valid email address !</span>
                <label for="contactMessage" id="message_label">Locatie (vereist)</label>
                <textarea  name="contactMessage" id="contactMessage" class="text-input">    </textarea>
                <span class="error" id="messageError">Geef de locatie op!</span>
                <label for="contactProbleem" id="probleem_label">Probleem (vereist)</label>
                <textarea  name="contactProbleem" id="contactProbleem" class="text-input"></textarea>
                <span class="error" id="messageError">Geef het probleem in!</span>
                <input type="hidden" id="largeImage" name="largeImage" />
                <p class="contact-button-house">
                    <input type="submit" name="submitMessage" class="full-screen-button contactButton button grey" id="contactSubmitBtn" value="Send"/>
                </p>
            </fieldset>
        </form> 
```

JS文件：

```
jQuery(function() {
    jQuery('.error').hide();
    jQuery(".contactButton").click(function() {
    // validate and process form
    // first hide any error messages
        jQuery('.error').hide();

    var name = jQuery("input#contactName").val();
    if (name == "") {
        jQuery("span#nameError").show();
        jQuery("input#contactName").focus();
        return false;
    }
    var email = jQuery("input#contactEmail").val();
    if (email == "") {
        jQuery("span#emailError").show();
        jQuery("input#contactEmail").focus();
        return false;
    }

    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    if(!emailReg.test(email)) {
        jQuery("span#emailError2").show();
        jQuery("input#contactEmail").focus();
        return false;
    }

    var msg = jQuery("textarea#contactMessage").val();
    if (msg == "") {
        jQuery("span#messageError").show();
        jQuery("textarea#contactMessage").focus();
        return false;
    }

    var prob = jQuery("textarea#contactProbleem").val();
    if (prob == "") {
        jQuery("span#messageError").show();
        jQuery("textarea#contactProbleem").focus();
        return false;
    }

    var dataString = 'name='+ name + '&email=' + email + '&msg=' + msg + '&prob=' + prob + '&largeImage=' + largeImage;
//alert (dataString);return false;

    jQuery.ajax({
        type: "POST",
        url: "http://serverurl/script.php",
        data: dataString,
        success: function() {
            jQuery('#contactForm').html("<div id='successMessage' style='margin-top:47px;'></div>");
            jQuery('#successMessage').html("<img src='images/ok.png' alt='' style='float:left; margin-top:4px; margin-right:10px;'/><strong style='float:left;'>Thank you for contacting us!</strong>")
                .append("<p style='float:left;'>We will be in touch soon.</p>")
                .hide()
                .fadeIn(1500, function() {
                    jQuery('#successMessage');
                });
            }
        });
        return false;
    });
}); 
```

任何想法我做错了什么？非常感谢您的帮助！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:52:40.647

在您`dataString`发送一个`largeImage`变量，该变量由

```
var largeImage = document.getElementById('largeImage'); 
```

因此它是一个 JS 对象，而不是你需要的。

我还看到您将图像数据分配给in方法的`src`属性。根据您的*HTML*，是**input**类型，所以我建议您也将其更改为tag ，然后在编写 `dataString.`largeImage``onPhotoURISuccess`*`largeImage`**`<img />``src`***

 ***```
var dataString = 'name='+ name + '&email=' + email + '&msg=' + msg + '&prob=' + prob + '&largeImage=' + largeImage.src; 
```***

# javascript - 当用户在键盘上按下 tab 时触发的事件是什么？

> ID：15109211
> 
> 赞同：1
> 
> 时间：2013-02-26T20:27:08.043
> 
> 标签：javascript

我假设用户没有鼠标（或任何指针设备）。只有一个键盘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:31:03.043

利用`keydown`

例如：

```
if(event.keyCode === 9) { //tab
   //do something
} 
```

# android - 编辑文本中的错误

> ID：15109216
> 
> 赞同：1
> 
> 时间：2013-02-27T10:03:50.473
> 
> 标签：android, android-edittext

我的 EditText`inputType = numericDecimal`和我在多部手机上测试了我的应用程序，它运行良好，但是在 Android 4.04 的低质量手机上，当我将其变成横向时，`EditText`字段显示为密码字段，尽管您只能输入，`numericDecimal`但当我返回时，所有字段都是又好了。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-26T06:13:58.157

我认为这有一些问题显示在[Android 开源项目 - 问题跟踪器](https://code.google.com/p/android/issues/detail?id=2626)中，但没有更新，

如

**更奇怪的行为是，在*纵向输入/键盘*接受逗号作为有效字符，但在横向，逗号从输入中删除，键盘退格按钮开始表现奇怪。**

还有很多。

# javascript - 如何为每个第一个列表元素添加样式，第一个使用 jQuery 的子元素

> ID：15109217
> 
> 赞同：-2
> 
> 时间：2013-02-27T10:03:53.137
> 
> 标签：javascript, jquery, html, css

我有这个标记：

```
<ul>
  <li> // this
    <ul>
      <li>
        <div></div>
      </li>
      <li>
        <div></div>
      </li>
    </ul>
  </li>
  <li> // this
    <ul>
      <li>
        <div></div>
      </li>
      <li>
        <div></div>
      </li>
    </ul>
  </li>
</ul> 
```

在我的风格中，我有这个：

```
.main_menu ul > li {
   // some style
} 
```

这给了我一些风格，只适合`li`那棵树的第一个，而不是`li`它的孩子。所以，我的问题是如何用 jQuery 设置它，当我尝试`$('.main_menu ul > li');`它不起作用时。我想我需要某种这样的写法：

```
$('.main_menu ul').each().first().child(); 
```

但它不正确，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:06:12.557

你可以用纯 CSS3 做到这一点，虽然支持[不完整。](http://caniuse.com/css-sel2)

使用`:first-child`选择器，这会选择你想要的。 `:first-child` [也适用于 jQuery](http://api.jquery.com/first-child-selector/)，因此您可以在那里使用它。

`ul li:first-child`会选择：

```
<ul>
  <li>             //this
    <li>
      <div></div>
    </li>
  </li>
  <li>             
    <li>
      <div></div>
    </li>
  </li>
</ul> 
```

`>`选择所有直系后代，而不仅仅是第一个孩子。例如：

`ul > li`会选择：

```
<ul>
  <li>             //this
    <li>
      <div></div>
    </li>
  </li>
  <li>             // this
    <li>
      <div></div>
    </li>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:06:59.160

你试过这个 CSS 选择器：

```
.main_menu ul li:first-child {
   // some style
} 
```

这种方式应该不需要jQuery！

**此外**，正如评论中所指出的，您的标记是错误的。每个嵌套都`<li>`需要包裹在另一个`<ul>`IE 中：

```
<ul>
    <li></li>
    <li>
        <ul>
            <li></li>
            <li></li>
        </ul>
    </li>
    <li></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:08:27.563

调用的伪选择器`:first-child`可以选择元素的第一个子元素。这是一个 CSS 选择器，jQuery 也支持它。所以你可以通过 CSS 或 jQuery 使用它。

```
ul li:first-child {
   /* Your style */
} 
```

或 jQuery

```
$("ul li:first-child").css('style-name', 'property value'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:08:41.627

它正在工作...

```
$('.main_menu ul li:first') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:08:47.313

尝试：

```
.main_menu ul li:first-child {
   // some style
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T10:14:13.970

试用，

```
$('.main_menu li:first').css('color','red'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T10:20:08.273

试试这个：[**小提琴**](http://jsfiddle.net/nJ2B3/)

```
$('ul').children('li').first().addClass('active'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-27T10:06:25.697

您可以使用`:first-child`选择器，它选择作为其父元素的第一个子元素的所有元素。

```
$('.main_menu ul li:first-child') 
```

文档

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-27T10:06:47.100

尝试

`$('.main_menu ul li').first().addClass('fancyClassOnFirstChild');`

或者`$('.main_menu ul li:first-child').addClass('fancyClassOnFirstChild');`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-27T10:06:47.020

尝试

```
$('.main_menu ul').first('li').css('border','1px solid red'); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-02-27T10:11:06.630

使用`eq(0)`.You 可以做到这一点。试试这个代码：

```
$('.main_menu > ul').find('li:eq(0)').addClass('classname'); 
```

# java - 级别严重时，Java 日志记录不执行信息

> ID：15109223
> 
> 赞同：3
> 
> 时间：2013-02-27T10:04:04.610
> 
> 标签：java, logging

我在用着`java.util.logging`

我有一个 foo 函数：

```
public String foo() {
    System.out.println("syso ==> foo");
    return "foo";
} 
```

当我更改日志级别时，我不希望 foo 被执行！

```
Logger logger = Logger.getLogger(MyClass.class.getSimpleName());
FileHandler fileHandler = new FileHandler("myapp.log");
logger.addHandler(fileHandler);
logger.setLevel(Level.SEVERE);
logger.info("Write foo: " + foo() );
logger.severe("Test severe"); 
```

我知道`logger.info()`不会打印在日志文件中，但是为什么要执行`foo()`呢？我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:08:47.563

虽然它不显示该文本，但该行确实被执行，因为该行不是注释。

如果使用 Apache Logger，请尝试以`Logger.isInfoEnabled()`这种方式使用方法：-

```
if(logger.isInfoEnabled()){
    logger.info("Write foo: " + foo() );
} 
```

否则，如果它的 jdk 记录器，则使用**@n1ckolas建议的以下方法**

```
if (logger.isLoggable(Level.INFO)) {
    logger.info("Write foo: " + foo() );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:09:07.010

`Logger.info`期待一个`String`论点。

`"Write foo: " + foo()`正在转换为`String`，甚至在`info`方法内检查日志记录级别之前。

在这个过程中`foo()`被执行以获得`String`它返回。

要解决这个问题，您可以使用以下构造：

```
if (logger.isLoggable(Level.INFO)) {
    logger.info("Write foo: " + foo());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:12:30.543

看起来你正在使用这些`java.util.logging.*`课程。那么这应该可以解决问题：

```
if (logger.isLoggable(Level.INFO)) {
    logger.info("Write foo: " + foo() );
} 
```

如果您使用的是 Log4J，请使用

```
if (logger.isInfoEnabled()) {
    logger.info("Write foo: " + foo() );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T10:06:59.780

您禁用 info 的事实不会使`logger.info`编译器和链接器“不可见”该行。该行仍将执行，并且由于您对其进行了调用，`foo`因此也将执行该行。

您应该使用 Logger 方法检查是否启用了信息级别，并且仅使用`log.info`

如果您使用的是 apache 记录器而不是使用：

```
if (logger.isInfoEnabled()) {
    logger.info("Write foo: " + foo() );
} 
```

# asp.net - vbscript 无法在客户端机器上运行

> ID：15109225
> 
> 赞同：0
> 
> 时间：2013-02-27T10:04:12.000
> 
> 标签：asp.net, vbscript

我的 html 文件中有这个：

```
<script type="text/vbscript">
    Function FormatADateUsingLocale(aDate)
        Dim vbDate vbDate = DateValue (aDate)
        FormatADateUsingLocale = FormatDateTime(vbDate, 2)
</script> 
```

这是从相同的 HTML 文件 JavaScript 函数调用的：

```
function buildMenuBar(){ 
    aDs = FormatADateUsingLocale("1899/12/23"); 
    alert(aDs);
} 
```

它在大多数机器上都能正常工作。但是在其中一台机器上我看到了这个错误：`aDs is undefined`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:30:26.697

我在您的 vbs 代码中看到了一些错字，可以说它们是在复制/粘贴期间，但最好提及它们。

1.  最明显的是你缺少`End Function`.
2.  在行`Dim`我看到 2 个问题。

First`vbDate`在 VBScript 中保持不变。最好不要在变量名前面使用“vb”。

其次，声明和启动是两个独立的进程/命令，这意味着......

```
' next is incorrect
Dim x = 0

' next is correct
Dim x
x = 0

' next is correct too, but not recommendable
Dim x : x = 0 
```

好的，可能`:`在该行中缺少冒号 ( ) 也是一个错字。

您可以将字符串文字值直接传递给`FormatDateTime`函数，而无需显式转换。更重要的是检查传递给函数的参数是否可以转换为`vbDate`函数`IsDate`，否则`DateValue`也会失败并出现“类型不匹配”错误。因此，以完整函数结束时，还应该预测在参数无法转换为有效`vbDate`类型的情况下它将返回什么。

```
' shortly, something like this
Function FormatADateUsingLocale(ByVal aDate)
    If Not IsDate(aDate) Then aDate = "9999/12/31"
    FormatADateUsingLocale = FormatDateTime(aDate, 2)
End Function 
```

当然，这是基本思想，您可能希望返回空字符串或其他东西，以防传递的参数是“无效的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:59:23.493

您是否有错误的行号或您收到的确切错误消息？在 buildMenuBar() 函数中，ads 应该被视为隐式声明的全局变量。这应该只是一个警告，表明有些事情不太正确，而不是错误。

如果我像下面这样添加一个 JavaScript 函数，那么我会按预期在警报框中显示“未实现”。

```
function buildMenuBar() {
    aDs = FormatADateUsingLocale("1899/12/23");
    alert(aDs);
}
function FormatADateUsingLocale (p) {
     return "Not implemented";
}; 
```

# asp.net - 使用 linq 解决 DateTime 错误

> ID：15109228
> 
> 赞同：0
> 
> 时间：2013-02-27T10:04:23.010
> 
> 标签：asp.net, linq, datetime

我怎样才能用 Linq 做到这一点？我试过没有成功

```
protected void Calendar1_SelectionChanged(object sender, EventArgs e)
{
    DataView view = socialEvents.DefaultView;
    view.RowFilter = String.Format(
                      "Date >= #{0}# AND Date < #{1}#",
                      Calendar1.SelectedDate.ToShortDateString(),
                      Calendar1.SelectedDate.AddDays(1).ToShortDateString()
                   );

    if (view.Count > 0)
    {
        DataGrid1.Visible = true;
        DataGrid1.DataSource = view;
        DataGrid1.DataBind();
    }
    else
    {
        DataGrid1.Visible = false;
    }
} 
```

我试试这个，但它不起作用

> 用户代码未处理 SyntaxErrorException 表达式包含无效名称：[]。

再试一次

```
var rows =  socialEvents.Rows.Cast<DataRow>()
            .Where(r => (DateTime)r["Date"] >= Calendar1.SelectedDate.Date &&
                        (DateTime)r["Date"] <= Calendar1.SelectedDate.AddDays(1))
              .ToArray();
view.RowFilter = rows.ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:18:19.613

以下是您应该如何使用`RowFilter`：

```
view.RowFilter = String.Format(
                  "Date >= #{0}# AND Date < #{1}#",
                  Calendar1.SelectedDate.ToString("MM/dd/yyyy"),
                  Calendar1.SelectedDate.AddDays(1).ToString("MM/dd/yyyy")); 
```

或者使用 LINQ

```
var table = (from r in socialEvents.AsEnumerable()
             where r.Field<DateTime>("Date") >= Calendar1.SelectedDate.Date
                   r.Field<DateTime>("Date") <= Calendar1.SelectedDate.AddDays(1)
             select r).CopyToDataTable();  

if (table.Rows.Count > 0)
{
    DataGrid1.Visible = true;
    DataGrid1.DataSource = table;
    DataGrid1.DataBind();
}
else
{
    DataGrid1.Visible = false;
} 
```

# c# - 序列化为 XML

> ID：15109235
> 
> 赞同：0
> 
> 时间：2013-02-27T10:04:48.520
> 
> 标签：c#, asp.net, web-applications, xml-serialization

我一直在互联网上搜索，但找不到任何帮助。我的问题`serialize`是`arraylist`to `xml`。我首先从数据库中收集数据并将其分配给arraylist，如下所示，

```
 ArrayList conRc = new ArrayList();        
    while (readIp.Read())
    {
        string ipVal = readIp.GetString(0);
        string conLvlVal = readIp.GetString(1);
        string ispVal = readIp.GetString(2);
        string tsVal = readIp.GetString(3);
        ispVal = ispVal.Trim();
        ispVal = ispVal.Replace("\"", "");
        string localPortVal = readIp.GetString(4);
        string foeriegnGeoVal = readIp.GetString(5);

        conRc.Add(new Confidence(tsVal, ipVal, localPortVal, ispVal, foeriegnGeoVal, conLvlVal));

    } 
```

并尝试按如下方式序列化arraylist，

```
 System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(typeof(ArrayList));
    System.IO.TextWriter writer = new System.IO.StreamWriter(@"F:\myItems.xml", false);
    serializer.Serialize(writer, conRc);
    writer.Close(); 
```

但我收到一个错误消息，

`There was an error generating the XML document.`

请问我可以知道如何执行此任务..这将是一个很大的帮助。

仅供参考，下面是`Confidence`课程，

```
public class Confidence
{
    private string ip;

    public string Ip
    {
        get { return ip; }
        set { ip = value; }
    }
    private string count;

    public string Count
    {
        get { return count; }
        set { count = value; }
    }

    private string isp;

    public string Isp
    {
        get { return isp; }
        set { isp = value; }
    }
    private string colColor;

    public string ColColor
    {
        get { return colColor; }
        set { colColor = value; }
    }

    private string timeStamp;

    public string TimeStamp
    {
        get { return timeStamp; }
        set { timeStamp = value; }
    }

    public string Port
    {
        get { return port; }
        set { port = value; }
    }

    public string ForeignGeo
    {
        get { return foreignGeo; }
        set { foreignGeo = value; }
    }

    private string port;

    private string foreignGeo;
    public Confidence(string timeStampVal, string ipVal, string portVal, string ispVal, string foreignGeoVal, string countVal)
    {
        this.timeStamp = timeStampVal;
        this.ip = ipVal;
        this.port = portVal;
        this.isp = ispVal;
        this.foreignGeo = foreignGeoVal;
        this.count = countVal;
    }

    public Confidence(string ipVal, string countVal, string ispVal, string colorVal, string timestampVal)
    {

        this.ip = ipVal;
        this.count = countVal;
        this.isp = ispVal;
        this.colColor = colorVal;
        this.timeStamp = timestampVal;
    }

    public Confidence(string ispVal)
    {

        this.isp = ispVal;

    }
} 
```

**编辑**

`parameterless constructor`正如亚历克斯·菲利波维奇（ **Alex Filipovici** ）所建议的那样，以前的错误是由于丢失造成的，但现在我收到了一个新错误，如下所示，

```
[InvalidOperationException: The type Confidence was not expected. Use the XmlInclude or SoapInclude attribute to specify types that are not known statically.]
   System.Xml.Serialization.XmlSerializationWriter.WriteTypedPrimitive(String name, String ns, Object o, Boolean xsiType) +1151604
   Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterArrayList.Write1_Object(String n, String ns, Object o, Boolean isNullable, Boolean needType) +465
   Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterArrayList.Write2_ArrayOfAnyType(Object o) +271

[InvalidOperationException: There was an error generating the XML document.]
   System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id) +651
   System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o, XmlSerializerNamespaces namespaces) +72
   System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o) +10
   Dashboard.getDataOutTable() in c:\Users\DELL\Documents\Visual Studio 2010\WebSites\Dashboard\Dashboard.aspx.cs:1035
   Dashboard.Page_Load(Object sender, EventArgs e) in c:\Users\DELL\Documents\Visual Studio 2010\WebSites\Dashboard\Dashboard.aspx.cs:59
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +51
   System.Web.UI.Control.OnLoad(EventArgs e) +92
   System.Web.UI.Control.LoadRecursive() +54
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +772 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:14:29.447

如果你看一下内部异常，你会发现你必须向`Confidence`类添加一个无参数构造函数：

```
public class Confidence
{
    public Confidence()
    {

    }

    // other class members
} 
```

对于后续异常，请尝试使用此构造函数：

```
System.Xml.Serialization.XmlSerializer serializer = 
    new System.Xml.Serialization.XmlSerializer(typeof(ArrayList), 
    new Type[] { typeof(Confidence) }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:36:34.533

第一个错误：Confidence 中没有默认构造函数

=> 添加构造函数类：

```
public Confidence()
{
} 
```

第二个错误：序列化程序无法识别 ArrayList 的类型。=> 修改序列化器：

```
 System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(typeof(ArrayList),
 new System.Type[] { typeof(Confidence) }); 
```

# c# - 取回表中的行数返回 -1

> ID：15109236
> 
> 赞同：1
> 
> 时间：2013-02-27T10:04:48.330
> 
> 标签：c#, ado.net

嗨，我正在尝试计算表中的行数，但我总是返回 -1。这是我的代码：

```
using (connection = new SqlConnection(connectionString))
{
      connection.Open();
      SqlCommand command = new SqlCommand("CountBooks", connection);
      command.CommandType = CommandType.StoredProcedure;
      numberOfBooks = command.ExecuteNonQuery();
} 
```

这是我的查询：

```
SELECT COUNT(*) FROM Books 
```

我怎样才能得到正确的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:07:02.207

使用 ExecuteScalar 而不是 ExecuteNonQuery。

# c# - ObjectDataSource“VacancyObjectDataSource”找不到具有参数的非泛型方法“GetVacancy”：VacancyID、语言、状态

> ID：15109237
> 
> 赞同：0
> 
> 时间：2013-02-27T10:04:50.467
> 
> 标签：c#, asp.net, dataset

我有一个像这样的对象数据源：

```
 <asp:ObjectDataSource ID="VacancyObjectDataSource" runat="server" SelectMethod="GetVacancy" 
        TypeName="HRcomgeWebApp.DataLayer.DataSets.MainDataSetTableAdapters.ViewVacancyTableAdapter" OnSelecting="VacancyObjectDataSource_Selecting" OnSelected="VacancyObjectDataSource_Selected">
        <SelectParameters> 
            <asp:Parameter Name="VacancyID" Type="Int32" />
            <asp:Parameter Name="Language" Type="Int32" />
            <asp:Parameter Name="Status" Type="Int32" />
        </SelectParameters>
    </asp:ObjectDataSource> 
```

和这样的表单视图：

```
<asp:FormView ID="VacancyFormView" runat="server" DataKeyNames="VacancyID" DataSourceID="VacancyObjectDataSource"
        CellPadding="0" CellSpacing="0" GridLines="None" BorderStyle="NotSet" width="100%"> 
```

..

我的xsd代码是这样的：

```
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")]
        [global::System.ComponentModel.Design.HelpKeywordAttribute("vs.data.TableAdapter")]

[global::System.ComponentModel.DataObjectMethodAttribute(global::System.ComponentModel.DataObjectMethodType.Select, true)]
    public virtual MainDataSet.VacancyDataTable GetVacancy(global::System.Nullable<int> VacancyID) {
        this.Adapter.SelectCommand = this.CommandCollection[0];
        if ((VacancyID.HasValue == true)) {
            this.Adapter.SelectCommand.Parameters[1].Value = ((int)(VacancyID.Value));
        }
        else {
            this.Adapter.SelectCommand.Parameters[1].Value = global::System.DBNull.Value;
        }
        MainDataSet.VacancyDataTable dataTable = new MainDataSet.VacancyDataTable();
        this.Adapter.Fill(dataTable);
        return dataTable;
    }
and this one

[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]

    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")]
        private void InitCommandCollection() {
            this._commandCollection = new global::System.Data.SqlClient.SqlCommand[1];
            this._commandCollection[0] = new global::System.Data.SqlClient.SqlCommand();
            this._commandCollection[0].Connection = this.Connection;
            this._commandCollection[0].CommandText = "dbo.hr_GetVacancy";
            this._commandCollection[0].CommandType = global::System.Data.CommandType.StoredProcedure;
            this._commandCollection[0].Parameters.Add(new global::System.Data.SqlClient.SqlParameter("@RETURN_VALUE", global::System.Data.SqlDbType.Int, 4, global::System.Data.ParameterDirection.ReturnValue, 10, 0, null, global::System.Data.DataRowVersion.Current, false, null, "", "", ""));
            this._commandCollection[0].Parameters.Add(new global::System.Data.SqlClient.SqlParameter("@VacancyID", global::System.Data.SqlDbType.Int, 4, global::System.Data.ParameterDirection.Input, 10, 0, null, global::System.Data.DataRowVersion.Current, false, null, "", "", ""));
            this._commandCollection[0].Parameters.Add(new global::System.Data.SqlClient.SqlParameter("@Language", global::System.Data.SqlDbType.Int, 4, global::System.Data.ParameterDirection.Input, 10, 0, null, global::System.Data.DataRowVersion.Current, false, null, "", "", ""));
            this._commandCollection[0].Parameters.Add(new global::System.Data.SqlClient.SqlParameter("@Status", global::System.Data.SqlDbType.Int, 4, global::System.Data.ParameterDirection.Input, 10, 0, null, global::System.Data.DataRowVersion.Current, false, null, "", "", ""));
            this._commandCollection[0].Parameters.Add(new global::System.Data.SqlClient.SqlParameter("@ShowOld", global::System.Data.SqlDbType.Bit, 1, global::System.Data.ParameterDirection.Input, 1, 0, null, global::System.Data.DataRowVersion.Current, false, null, "", "", ""));
        } 
```

但我收到了这个错误

```
ObjectDataSource 'VacancyObjectDataSource' could not find a non-generic method 'GetVacancy' that has parameters: VacancyID, Language, Status.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: ObjectDataSource 'VacancyObjectDataSource' could not find a non-generic method 'GetVacancy' that has parameters: VacancyID, Language, Status. 
```

# c# - Crystal Reports 错误“无效的对象格式名称”。对于字段对象

> ID：15109244
> 
> 赞同：0
> 
> 时间：2013-02-27T10:05:00.067
> 
> 标签：c#, asp.net, crystal-reports

我正在使用 Crystal Reports 和 .NET C# 制作动态报告。报告的内容直到运行时才完全知道。报告模板仅包含公式字段和与数据库表的连接。在运行时，我收集想要的数据集合，创建一个新的 reportDocument 对象并将集合设置为报表数据源。然后我从报告模板中收集所有字段对象并循环访问它们，设置数据属性。只要属性是字符串类型，它就可以正常工作，但是当它是 bool 或 double 类型时，它会崩溃并出现以下错误：**“无效的对象格式名称”**

如何在运行时将字段对象的数据类型设置为 numeric/bool？

这是一些代码：

```
//Collecting data and setting data source
for (int i = 0; i < ColNumber; i++)
            {
                //Fields 

                var DbFieldName = mappingNames[i];
                var fieldType = comparisonObj.GetFieldType(DbFieldName);

                var fieldName = "Field" + (i + 1);
                var ffld = report.DataDefinition.FormulaFields[fieldName];
                if (ffld != null)
                {
                    ffld.Text = "{" + aliasName + "." + DbFieldName + "}";                        
                }

                var fobj = report.ReportDefinition.ReportObjects[fieldName] as FieldObject;
                if (fobj != null)
                {
                    fobj.Left = CurrentLeft;
                    fobj.Width = FieldSpace * widths[i] / 100;
                    if (IsNumber(fieldType))
                    {
                        fobj.ObjectFormat.HorizontalAlignment = Alignment.RightAlign;
                        fobj.FieldFormat.NumericFormat.RoundingFormat = RoundingFormat.RoundToTen;
                    }
                    else if (IsBool(fieldType))
                    {
                        fobj.FieldFormat.BooleanFormat.OutputType = BooleanOutputType.YesOrNo;
                    }

                }

                //Headers
                var ColumnHeaderName = headers[i];
                var columnName = "Column" + (i + 1);
                var tobj = report.ReportDefinition.ReportObjects[columnName] as TextObject;
                if (tobj != null)
                {
                    tobj.Text = ColumnHeaderName;
                    tobj.Left = CurrentLeft;
                    tobj.Width = FieldSpace * widths[i] / 100;
                    CurrentLeft = CurrentLeft + tobj.Width + blank;
                    if (IsNumber(fieldType))
                        tobj.ObjectFormat.HorizontalAlignment = Alignment.RightAlign;
                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:37:20.220

好吧，由于没有人可以帮助我解决问题，我自己想出了一个解决方案。我使用 toString 方法将布尔值和数字转换为字符串。不是最好的解决方案（在我看来），因为我想改变它自己的字段对象的类型，但它可以工作。

```
 var DbFieldName = mappingNames[i];
                var fieldType = comparisonObj.GetFieldType(DbFieldName);

                var fieldName = "Field" + (i + 1);
                var ffld = report.DataDefinition.FormulaFields[fieldName];
                if (ffld != null)
                {
                    if (IsNumber(fieldType))
                        ffld.Text = "ToText({" + aliasName + "." + DbFieldName + "}, 00, '')";
                    else if (IsDateTime(fieldType))
                        ffld.Text = "ToText({" + aliasName + "." + DbFieldName + "}, \"dd/MM/yyyy\")";
                    else if (IsBool(fieldType))
                        ffld.Text = "if{" + aliasName + "." + DbFieldName + "} then \"Y\" else \"N\"";
                    else
                    {
                        ffld.Text = "{" + aliasName + "." + DbFieldName + "}";
                    }
                } 
```

# jqgrid - 绘制后更改 columnModel JQgrid 的值

> ID：15109249
> 
> 赞同：0
> 
> 时间：2013-02-27T10:05:12.267
> 
> 标签：jqgrid, cell, param

当我绘制网格时，我有一些这样的列..

```
name: 'codigo', index: 'codigo', width: 50, align: 'center', editable: true } 
```

但是在我想进行查询然后将可编辑选项设置为 false 之后，这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:19:22.743

您可以使用以下方法获取内部*参考*：`colModel``getGridParam`

```
var colModel = $("#grid").jqGrid("getGridParam", "colModel"); 
```

现在您可以枚举`colModel`数组中的元素并找到具有`name`value属性的元素`"codigo"`。之后，您可以修改数组`editable`元素的属性。从代码示例[的答案](https://stackoverflow.com/a/7210627/315935)`colModel`中查看`getColumnIndexByName`函数。

做你想做的最简单的方法是使用[setColProp](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods#add_on_grid_methods)方法

```
$("#grid").jqGrid("setColProp", "codigo", {editable: false}); 
```

# python - 在 Python 中使用随机化减少文本文件

> ID：15109251
> 
> 赞同：1
> 
> 时间：2013-02-27T10:05:19.007
> 
> 标签：python, parsing, text, random, reduction

我在 bash 中解决了以下问题，但考虑到我需要减少的文件大小，我觉得它效率很低而且很慢。希望有人知道如何在 Python 中做同样的事情并希望加快速度。

最初的问题是减少非常大的文本文件（50-60 百万行，制表符分隔的列）。其中一列被视为键，即我们确定文件中有多少具有唯一键的行，然后随机选择其中的一个百分比（例如，如果减少 75%，则为总数的四分之一）附加到一个新文件，将保留我们的结果。我们继续检查其余的键，随机化然后将包含每个唯一键的所有行减少相同的百分比。如果无法减少 - 我们只需将所有行转移到结果文件中。

正如我所说，我的 bash 脚本运行良好，但速度很慢，并且将各种 awk 和 grep 结构串在一起。无论如何，Python 应该以一种更优雅的方式来处理这个问题，并且不会过多地牺牲内存（同样，在这种情况下，我们正在处理 50+ 百万行文件）。任何建议/技巧都会有所帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:54:18.983

简单的解决方案是按键列对文件进行排序，例如，按第二列对制表符分隔的输入进行[排序：](http://linux.die.net/man/1/sort)

```
#!/bin/bash
printf "a\tz\nb\ty\nc\tx" | sort -k 2 -t $'\t' 
```

然后解决一个更简单的问题，即为每个唯一键检索 25% 的随机行，其中具有相同键的所有行都相邻，并且每个唯一键至少应保留一行：

```
#!/usr/bin/env python
import random
import sys
from itertools import chain, groupby

def choose_random(iterator, fraction, random=random.random):
    """Lazy analog of:

        L = list(iterator)
        k = int(len(L) * fraction + .5) or 1 # get at least one
        result = random.sample(L, k)

    Note: this function doesn't randomize the order of elements
          that would require to keep selected elements in memory
          and number of output elements is not exactly k
    """
    # always yield at least one item if input is not empty
    item = next(iterator)
    it = (x for x in chain([item], iterator) if random() < fraction)
    for x in chain([next(it, item)], it):
        yield x

def getkey(line):
    return line.split("\t")[1] # 2nd column

for key, group in groupby(sys.stdin, key=getkey):
    sys.stdout.writelines(choose_random(group, fraction=0.25)) 
```

注意：输入文件的最后一行应该包含一个换行符，否则如果选择了最后一行，则输出会损坏。

该脚本接受标准输入上的排序（按键列）输入，并将减少的输出打印到标准输出。它一次只需要在内存中存储一​​行。这是一个单遍算法（O（n））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:36:36.880

因为你的问题很模糊，我会给出一个高水平的解决方案

1.  不要读取内存中的整个文件`fileObj.read()`，`fileObj.readlines()`而是遍历文件`for line in fileObj`。为什么？这将是美好的回忆
2.  基于 List 创建队列的实现

    ```
    class Queue(object):
        def __init__(self, max_size):
            self.queue = []
            self.max_size = max_size
        def __getitem__(self, index):
            if 0 <= index < max_size:
                return self.queue[index]
            else:
                raise IndexError
        def __iter__(self):
            return iter(self.queue)
        def push(seq):
            if isinstance(seq, Iterable):
                if len(self.queue) + len(seq) > self.max_size:
                    raise Full
                self.queue = seq
            else:
                if len(self.queue) + 1 > self.max_size:
                    raise Full
                self.queue.append(seq)
        def pop():
            if self.queue:
                return self.queue.pop(0) 
    ```

3.  创建一个队列字典，其中 maxsize = 2 * 所选项目的百分比

就像是

```
 PCT_SELECTED = 100
    MAXSIZE = 2 * PCT_SELECTED
    KEY_START = 10
    KEY_STOP = 15 
    from collection import defaultdict
    queue_dict = defaultdict(Queue(MAXSIZE)) 
```

1.  以非阻塞方式将元素放入队列
2.  如果 Queue 为 FULL，它将引发 Exception `Full`，在这种情况下，您从 Queue 中随机选择 50% 的元素并丢弃其余元素。

就像是

```
 with open("your-file") as fin:
        for line in fin:
            key = line[KEY_START: KEY_STOP]
            try:
                queue_dict[key].push(line)
            except Full:
                queue_dict[key] = random.sample(queue_dict[key], PCT_SELECTED) 
```

1.  最后遍历字典并随机修剪掉队列

    ```
    queue_dict = {key: random.sample(value, PCT_SELECTED) for key, value in queue_dict.items()} 
    ```

2.  现在您可以通读字典并写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:38:54.740

对于大量项目，只需检查每个项目的随机数即可选择 75%。

```
import random

with open('input') as f:
for line in f:
    if random.random() < 0.75:
        print line 
```

如果您需要保证每个键至少有一项（即使它只有两行）：

```
import random
keys = set()

with open('input') as f:
    for line in f:
        columns = line.split('\t')
        key = columns[0]

        if not key in keys:
           print line
           keys.add(key)
           continue

        if random.random() < 0.75:
            print line 
```

# android - 如何添加请求超时异常

> ID：15109253
> 
> 赞同：0
> 
> 时间：2013-02-27T10:05:22.593
> 
> 标签：android

如何在我的代码中添加请求超时？

下面是我的代码，它为访问服务器调用 http 类并获得响应，但我想添加超时异常

**所以如果服务器在 15 秒内没有响应超时请求，我该怎么办？**

```
 public class AgAppTransAirTimeTopUp  extends Activity
  {
      private String[][] xmlResponse;

    public void onCreate(Bundle savedInstanceState)
  {

                xmlResponse =  
 AgAppHelperMethods.AgAppXMLParser("AG_IT_App/AgMainServlet?source  
 ="+AgAppHelperMethods.varM      obileNo+"&mobile="+AgAppHelperMethods.varMobileNo+"& 
 pin="+AgAppHelperMethods.getPIN(txtTATpinno.getText().toString())+"&messageType=ATO& 
 channel=INTERNET);
                 if(!AgAppHelperMethods.flag)
                    {

 Toast.makeText(getApplicationContext(), "Invalid Input " , Toast.LENGTH_SHORT).show();
                //       AirTimeProgressDialog.dismiss();
                    }
                    else
                    {

                 Intent j = new Intent(AgAppTransAirTimeTopUp.this,  
        AgAppTransATTPResponse.class);                   
                 MyBean bean = new MyBean();
                 bean.set2DArray(xmlResponse);
                 Bundle b = new Bundle();
                 b.putSerializable("mybean", bean);
                 j.putExtra("obj", b);
                 startActivity(j);
        //            value=false;
                    }        //       
       AirTimeProgressDialog.dismiss();

        }

        }

        catch  (Exception e)
        {
    Toast.makeText(AgAppTransAirTimeTopUp.this, "Invalid Input " ,   
         Toast.LENGTH_SHORT).show();                  
        }

            public class AgAppHelperMethods 
         {

   private static final String LOG_TAG = null;
   private static AgAppHelperMethods instance = null;
   static boolean flag=null != null;

                 public static String smsResponse[][] = new String[20][2];

     String[][] xmlRespone = null;     
   public static AgAppHelperMethods getInstance() 
   {
      if(instance == null) 
          {
             instance = new AgAppHelperMethods();
          }
      return instance;
   }

    public static String getUrl () 
      { 
        String url = "https://xyzaaaaaa/";            
        return url;      
      }

  public static   String[][] AgAppXMLParser( String parUrl) 
  {     
    flag = true;       
    String _node,_element;
    String[][] xmlRespone = null;
    HttpURLConnection urlConnection = null;       
    try 
        {
                String url = AgAppHelperMethods.getUrl() + parUrl;
                URL finalUrl = new URL(url);                
                urlConnection = (HttpURLConnection)  
                       finalUrl.openConnection();
                urlConnection.setConnectTimeout(3000);                
                urlConnection.connect();                
                DocumentBuilderFactory dbf =  
                   DocumentBuilderFactory.newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                Document doc = db.parse(finalUrl.toString());

                       doc.getDocumentElement().normalize();              
                NodeList list=doc.getElementsByTagName("*");
                _node=new String();
                _element = new String();
                xmlRespone = new  
                 String[list.getLength()][2];                   
                //this "for" loop is used to parse through the
                //XML document and extract all elements and their
                //value, so they can be displayed on the device 
                for (int i=0;i<list.getLength();i++)
                    {
                        Node value=list.item(i).       
                   getChildNodes().item(0);
                        _node=list.item(i).getNodeName();
                        _element=value.getNodeValue();
                        xmlRespone[i][0] = _node;
                        xmlRespone[i][1] = _element;        
                    }//end for                  
                urlConnection.disconnect();      
        }//end try  
         catch (Exception e)
           {
             flag=false;
             Log.e(LOG_TAG, " Host not responding", e);
             Messages.setMessage("error"+e.getMessage());
         }  
     return xmlRespone;        

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:23:12.240

捕获超时异常，我认为它可能会对您有所帮助：

```
HttpGet request = new HttpGet("");

        HttpParams httpParameters = new BasicHttpParams();

        /* Set the timeout in milliseconds until a connection is established.
            The default value is zero, that means the timeout is not used.*/  

        int timeoutConnection = 60*1000*1;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);

        /* Set the default socket timeout (SO_TIMEOUT) 
            in milliseconds which is the timeout for waiting for data.  */
        int timeoutSocket = 60*1000*1;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
        HttpClient client = new DefaultHttpClient(httpParameters);

        try {
            HttpResponse httpResponse = client.execute(request);
        } 
        catch (SocketTimeoutException ex)
        {
            // Do something specific for SocketTimeoutException.
        }
        catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (Exception ex)
        {
            // Do something for all other types of exception.
        } 
```

# iphone - UILocalNotification 在我启动它时使我的应用程序崩溃

> ID：15109257
> 
> 赞同：0
> 
> 时间：2013-02-27T10:05:45.047
> 
> 标签：iphone, ios6, crash, uilocalnotification

我可以`UILocalNotification`在我的应用程序中启用一个，我这样进行：

在我的`UIViewController`

```
if(_endDate){    
        UILocalNotification *localNotif = [[UILocalNotification alloc] init];
        if (localNotif == nil)
            return;
        localNotif.fireDate = _endDate;
        localNotif.timeZone = [NSTimeZone defaultTimeZone];

        localNotif.alertBody = @"go";
        localNotif.soundName = UILocalNotificationDefaultSoundName;
        localNotif.applicationIconBadgeNumber = 1;

        [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
    } 
```

在`Appdelegate`：

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification{
    application.applicationIconBadgeNumber = 0;
} 
```

当通知出现时，我启动了应用程序，我正确地进入了委托，但在那之后，应用程序崩溃了。

我在IO6工作

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:23:21.873

对于罚款，您可以对配置文件项目执行以下步骤，例如：-

在 Xcode--> 产品--> 选择配置文件中。

等到项目在指令僵尸中运行。按 Profile 你发现你的模拟器正常运行。当您的应用 Cresh 时，您只需选择 consol，例如：-

![在此处输入图像描述](../Images/b859ce9c2580714cf701f0ab69eb305a.png)

你找到了带有变量的崩溃日志希望你明白了

# mongodb - 如何在 Mongodb-Ccsharp 中创建 2 个标识字段

> ID：15109260
> 
> 赞同：1
> 
> 时间：2013-02-27T10:05:49.860
> 
> 标签：mongodb, mongodb-.net-driver

我想使用 C# mongo 驱动程序创建 2 个标识字段。第一个 id 字段是默认的 mongo id，第二个是每个记录/文档的唯一整数 id。

```
public class Book
{
    [BsonId]
    public ObjectId Id { get; set; }

    [BsonId(IdGenerator = typeof(IdGenerator<Book>))]
    public int BookId { get; set; }

    public string Name { get; set; }
} 
```

有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:05:35.060

C# 驱动程序将自动为您生成第一个（Id），但第二个（BookId）只是驱动程序的另一个数据字段，因此应用程序负责生成下一个可用的唯一 BookId。

我看到人们生成下一个可用的自定义整数 Id 的一种方法是使用序列集合来跟踪下一个可用的 Id。这是使用 MongoDB shell 的样子：

```
db.sequences.insert({ _id : "BookId", nextId : 1 })
db.sequences.find()
{ "_id" : "BookId", "nextId" : 1 }
var result = db.sequences.findAndModify({
    query : { _id : "BookId" },
    update : { $inc : { nextId : 1 }}
    })
result
{ "_id" : "BookId", "nextId" : 1 }
 db.sequences.find()
{ "_id" : "BookId", "nextId" : 2 } 
```

这确实需要额外往返数据库以查找下一个可用 ID。

# java - 在 hibernate4.1.9 buildsessionfactory 方法已被弃用，所以为什么 serviceRegistry 被 paased 到 buildsessionFactory

> ID：15109280
> 
> 赞同：0
> 
> 时间：2013-02-27T10:06:42.557
> 
> 标签：java

在 hibernate4.1.9 buildsessionfactory 方法已被弃用，所以为什么将 serviceRegistry 传递给 buildsessionFactory

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:54:33.500

像这样？

```
public class Util {

    private static SessionFactory sessionFactory;
    private static ServiceRegistry serviceRegistry;

    public static SessionFactory configureSessionFactory() {
        Configuration configuration = new Configuration();
        configuration.configure();
        serviceRegistry = new ServiceRegistryBuilder().applySettings(
                configuration.getProperties()).buildServiceRegistry();
        sessionFactory = configuration.buildSessionFactory(serviceRegistry);
        return sessionFactory;
    }
} 
```

# java - 二维数组的二分搜索

> ID：15109282
> 
> 赞同：0
> 
> 时间：2013-02-27T10:06:47.437
> 
> 标签：java, arrays, algorithm, binary-search

我有一个完全排序的二维数组。下面的数组是示例

```
 1  2  3  
    5  6  7  
    9 10 11 
```

和

```
 1  2  3  4  5
    6  7  8  9  10 
```

我想在这些数组上使用二进制搜索。设`rows`为行`cols`数 为 列数

最初`start = 0`和`end = rows * cols -1`

在上面的 3 X 3 数组中，中点是四个 [9 个元素]。现在如何找出中点对应的行和列？有什么标准公式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T10:08:18.727

公式很简单：

```
row = number/cols_per_row;
col = number%cols_per_row; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:17:20.610

让`size = rows * cols`

`mid = size // 2`（整数除法）

`row = mid // cols`

`col = mid % cols`（整数除法休息）

# eclipse - JSF 资源包找不到基本名称 com.arc.ifuss.util.messages.properties 的包

> ID：15109288
> 
> 赞同：1
> 
> 时间：2013-02-27T10:06:58.353
> 
> 标签：eclipse, jsf, resourcebundle, faces-config

我正在尝试在我的 JSF 项目中添加资源包。我想在我的 JSF 页面中使用来自资源包文件的消息。

我已经完成了这些步骤：

1.  在***com.arc.ifuss.util*** pacakage中创建一个名为**messages.properties的文本文件**

**   我已将此代码添加到`faces-config`文件中

    ```
     <application>

          <resource-bundle>
            <base-name>com.arc.ifuss.util.messages.properties</base-name>
            <var>msg</var>
          </resource-bundle>

          <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>

         </application> 
    ```

    *   在我的 JSF 页面`<f:view>`标记后添加这一行

    ```
    <f:loadBundle basename="com.arc.ifuss.util.messages.properties" var="msg" /> 
    ```

    *   从 JSF 页面中的 messages.properties 文件中访问值

    ```
    <h:outputText value="#{msg.loginMsg}"></h:outputText> 
    ```* 

 *运行 tomcat 服务器后，我得到了这个异常：

HTTP 状态 500 - org.apache.jasper.JasperException：java.util.MissingResourceException：找不到基本名称 com.arc.ifuss.util.messages.properties 的包，语言环境 en_US

```
type Exception report

message org.apache.jasper.JasperException: java.util.MissingResourceException: Can't find bundle for base name com.arc.ifuss.util.messages.properties, locale en_US

description The server encountered an internal error (org.apache.jasper.JasperException: java.util.MissingResourceException: Can't find bundle for base name com.arc.ifuss.util.messages.properties, locale en_US) that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: org.apache.jasper.JasperException: java.util.MissingResourceException: Can't find bundle for base name com.arc.ifuss.util.messages.properties, locale en_US
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)

root cause

org.apache.jasper.JasperException: java.util.MissingResourceException: Can't find bundle for base name com.arc.ifuss.util.messages.properties, locale en_US
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:64)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:65)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:410)
    com.sun.faces.application.ViewHandlerImpl.executePageToBuildView(ViewHandlerImpl.java:473)
    com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:141)
    org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
    org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:109)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
    org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178)
    org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
    org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:64)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:65)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:745)
    org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:716)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:67)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)

root cause

java.util.MissingResourceException: Can't find bundle for base name com.arc.ifuss.util.messages.properties, locale en_US
    java.util.ResourceBundle.throwMissingResourceException(Unknown Source)
    java.util.ResourceBundle.getBundleImpl(Unknown Source)
    java.util.ResourceBundle.getBundle(Unknown Source)
    com.sun.faces.taglib.jsf_core.LoadBundleTag.doStartTag(LoadBundleTag.java:164)
    org.apache.jsp.IfussIndex_jsp._jspx_meth_f_005floadBundle_005f0(IfussIndex_jsp.java:459)
    org.apache.jsp.IfussIndex_jsp._jspx_meth_f_005fview_005f0(IfussIndex_jsp.java:302)
    org.apache.jsp.IfussIndex_jsp._jspService(IfussIndex_jsp.java:261)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:64)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:65)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:410)
    com.sun.faces.application.ViewHandlerImpl.executePageToBuildView(ViewHandlerImpl.java:473)
    com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:141)
    org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
    org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:109)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
    org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178)
    org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
    org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:64)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:65)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:745)
    org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:716)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:67)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:42:18.877

我找到了解决方案。基本上我只需要在资源包标签中写**消息**

```
 <resource-bundle>
        <base-name>com.arc.ifuss.util.messages</base-name>
        <var>msg</var>
      </resource-bundle> 
```

而不是**messages.properties**

```
 <resource-bundle>
    <base-name>com.arc.ifuss.util.messages.properties</base-name>
    <var>msg</var>
  </resource-bundle> 
```

**和**

在标签写入后的 JSF 页面中

```
<f:loadBundle basename="com.arc.ifuss.util.messages" var="msg" /> 
```

代替

```
<f:loadBundle basename="com.arc.ifuss.util.messages.properties" var="msg" /> 
```

无需添加扩展**名 .properties**。*

# conditional-statements - cond 与本地绑定

> ID：15109295
> 
> 赞同：1
> 
> 时间：2013-02-27T10:07:11.323
> 
> 标签：conditional-statements, racket, letrec

`cond`我的问题是关于将嵌套的 if 条件重写为具有本地绑定的分支的单个条件。我对球拍很陌生，只是迈出了第一步，所以如果我的问题很愚蠢，请宽容。

简而言之，任务是编写一个函数，该函数接受一个向量并在其中搜索一个值。向量包含混合的东西——对和非对。感兴趣的价值应该在一对汽车中。

工作解决方案使用带有嵌套 ifs 的递归辅助函数

```
[vlen (vector-length vec)]
[find-in-vector
(lambda (pos)
 (if (= pos vlen)                               ;; if the end of the vector has been reached
     #f                                         ;; then return false
     (let ([el (vector-ref vec pos)])           ;; Otherwise, extract current element from the vector,
       (if (and (pair? el) (equal? v (car el))) ;; if the element is a pair and its car is what we want
           el                                   ;; then return the element
           (find-in-vector (+ 1 pos))))))]      ;; otherwise keep searching the vector 
```

我想重写它，使它`cond`看起来更紧凑。下面的代码是一个可能的实现。问题是`(vector-ref vec pos)` 计算了几次，这就是我想重写的，这样它只计算一次，就像在前面的嵌套 ifs 实现中一样

```
[vlen (vector-length vec)]
[find-in-vector
 (lambda (pos)
   (cond [(= pos vlen) #f]
         [(and (pair? (vector-ref vec pos))            ;; one
               (equal? v (car (vector-ref vec pos))))  ;; two
          (vector-ref vec pos)]                        ;; three is too many
         [#t (find-in-vector (+ 1 pos))]))]) 
```

这就是我最多取得的成就：一次调用`(vector-ref vec pos)`test-expr ，另一次调用 result-expr

```
(cond
  [(= pos vlen) #f]
  [(letrec ([el (vector-ref vec pos)])      ;; extract current element from the vector
     (and (pair? el) (equal? v (car el))))  ;; and use it in conditionals
   (vector-ref vec pos)]                    ;; again, extract and return. FIXIT
  [#t (find-in-vector (+ 1 pos))]))])       ;; otherwise, keep searching 
```

如何进一步`el`在 test-expr 和 result-expression 之间进行共享？我想`el`留在这个特定的 cond 分支的本地。下面的代码工作不正确。AFAIU，整个`letrec`表达式被视为条件的文本表达式？

```
(cond
 [(= pos vlen) #f]
 [(letrec ([el (vector-ref vec pos)])
    (and (pair? el) (equal? v (car el)))
    el)]
 [#t (find-in-vector (+ 1 pos))]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:28:20.677

如果您先导入[SRFI 61](http://srfi.schemers.org/srfi-61/srfi-61.html) ，则可以这样做：

```
(require srfi/61)
(define (find-in-vector vec v)
  (define vlen (vector-length vec))
  (let loop ((pos 0))
    (cond
      ((= pos vlen) #f)
      ((vector-ref vec pos)
       (lambda (el) (and (pair? el) (equal? v (car el))))
       => values)
      (else (loop (add1 pos)))))) 
```

SRFI 61 提供的重要一点是它允许该`(<generator> <guard> => <receiver>)`子句。在这里，*生成器是创建一个供**保护*器和*接收器*使用的公共值的东西。在这种情况下，我们的接收器是简单`values`的，它返回它给出的值而不进行任何处理。

* * *

**更新：**目前`srfi/61`对于使用等的程序不能正常工作`#lang racket`（`srfi/61`正在使用不同的绑定`=>`和`else`来自`racket/private/cond`提供的绑定）。这[最近已修复](https://github.com/plt/racket/commit/9e93ee268269a7f289dd2a936670842e07db5237)，应该会出现在未来的 Racket 版本中。

# automation - QTP 弹性插件

> ID：15109298
> 
> 赞同：0
> 
> 时间：2013-02-27T10:07:13.653
> 
> 标签：automation, qtp

我现在正在使用 QTP 11，但是当我在使用 Flex 的网页上进行一些测试时，QTP 无法正常工作，它无法检测到网页上的任何内容。我可以使用什么插件来使 QTP 工作？以及如何获取，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:12:33.610

对于**QTP 11**，Adobe 提供了一个 Flex 插件（请参阅 Adob​​e 的[pdf 文档](http://livedocs.adobe.com/flex/3/testing_with_QTP_flex3.pdf)）。

从**UFT 11.50**（**UFT**是**QTP+Service Test**作为单一产品）开始，Flex 插件内置并随安装一起提供。

# backbone.js - 双向路由功能

> ID：15109302
> 
> 赞同：1
> 
> 时间：2013-02-27T10:07:24.180
> 
> 标签：backbone.js, backbone-routing

在我的 Backbone 应用程序中单击选项卡时，路由按预期工作并呈现适当的视图：

```
switchView: function(event) {
    event.preventDefault();

    // Get clicked tab
    var target = $(event.currentTarget);

    // Tab is already selected - do nothing
    if (target.parent().hasClass('selected')) {
        return;
    }

    // First remove selected status on all tabs
    this.$el.find('li').removeClass('selected');

    // Then select the clicked tab
    target.parent().addClass('selected');

    // Switch to new view
    var fragment = target.attr('href').split('#');
    Backbone.history.navigate(fragment[1], true);
} 
```

我想知道的是如何在地址栏中编写匹配的 URL 时产生相同的功能？例如`mydomain.com/app.html#section/about`，突出显示“关于”选项卡。也许我忽略了一些东西，也许上面是疯狂的，根本不是最佳实践。

附加应用程序的模型：

![在此处输入图像描述](../Images/bf1582113969f9d0d0896146de07d098.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:59:34.597

我假设您的标签链接看起来像这样：

```
<ul>
  <li><a href="#section/home">Home</a></li>
  <li><a href="#section/products">Products</a></li>
</ul> 
```

您不应该捕获`click`导航链接的事件，即删除您`switchView`和相关的事件绑定。相反，您应该让`Backbone.history`捕获哈希更改并触发路由。

要实现选项卡更改行为，您可以订阅`route`视图中的事件。这将处理由您的选项卡链接触发的选项卡更改以及其他 URL 更改。

```
var TabView = Backbone.View.extend({
  initialize: function() {
    this.listenTo(Backbone.history, 'route', this.onRouteChanged);
  },

  onRouteChanged: function() { 

    //get current url hash part
    var hash = Backbone.history.getHash();

    //find the link that has a matching href attribute
    var $activeTab = this.$("a[href=#'" + hash + "']");

    //if route matched one of the tabs, update tabs.
    if($activeTab.is("a")) {

      // First remove selected status on all tabs
      this.$('li.selected').removeClass('selected');

      // Then select the clicked tab
      $activeTab.parent().addClass('selected');
    }
  }
}); 
```

//代码示例未测试

# ios - 在 iOS 中推送控制器时如何访问 Last 视图控制器的变量？

> ID：15109305
> 
> 赞同：-2
> 
> 时间：2013-02-27T10:07:31.567
> 
> 标签：ios, objective-c, push

我在我的应用程序中遇到问题，问题解释如下，

```
#import <UIKit/UIKit.h>
@interface CLASS_A : UIViewController {
    UIButton *Btn_Push;    
    UILabel *lbl_no;
}
- (IBAction)Btn_PushPressed:(id)sender;
 @property (nonatomic, retain)  UILabel *lbl_no;
@end

#import "CLASS_A.h"
@implementation CLASS_A
@synthesize pdfFilePath;

- (IBAction)Btn_PushPressed:(id)sender
{
    CLASS_B  *obj_CLASS_B= [[CLASS_B alloc] initWithNibName:@"RTC_HomeVC" bundle:nil];
    [self.navigationController pushViewController:obj_CLASS_B animated:TRUE];
}
 @end 
```

* * *

```
#import <UIKit/UIKit.h>
@interface CLASS_B : UIViewController {
    UIButton *Btn_Pop;
}
- (IBAction)Btn_PopPressed:(id)sender;
@end

#import "CLASS_B.h"
@implementation CLASS_B
- (void)viewDidLoad
{
}
- (IBAction)Btn_PopPressed:(id)sender
{

    [self.navigationController popToRootViewControllerAnimated:YES];
}
@end 
```

这是我的两节课。单击 Btn_Push CLASS_A 时，推送 CLASS_B。并单击 CLASS_B CLASS_B 弹出 CLASS_A 的 Btn_Pop。

现在每次我推送和弹出 lbl_no 时都会增加 1。

例子：

*   CLASS_A 推送 CLASS_B lbl_no.text=@"0";

*   CLASS_B 弹出 CLASS_A lbl_no.text=@"1";

*   CLASS_A 推送 CLASS_B lbl_no.text=@"1";

*   CLASS_B 弹出 CLASS_A lbl_no.text=@"2";

*   CLASS_A 推送 CLASS_B lbl_no.text=@"2";

*   CLASS_B pop CLASS_A lbl_no.text=@"3";

*   CLASS_A 推送 CLASS_B lbl_no.text=@"3";

*   CLASS_B pop CLASS_A lbl_no.text=@"4";

所以我的问题是

1.我不想在CLASS_A中执行任何计算操作。您可以在 CLASS_B 中进行任何计算操作，这是必须的。也不想使用 AppDelegate 类、Singletone 类、NSNotification 和 NSUserDefaults。并且想要更改 lbl_no 的文本，如上所述。

那么我该怎么做呢？任何人都可以提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:21:32.263

尝试这样的事情：

A级

```
// CLASS_A.h
#import <UIKit/UIKit.h>
@interface CLASS_A : UIViewController {
    UIButton *Btn_Push;    
    UILabel *lbl_no;
}
- (IBAction)Btn_PushPressed:(id)sender;
@property (nonatomic, retain)  UILabel *lbl_no;
@end

// CLASS_A.m
#import "CLASS_A.h"
#import "CLASS_B.h"
@implementation CLASS_A
@synthesize pdfFilePath;

- (IBAction)Btn_PushPressed:(id)sender
{
    CLASS_B  *obj_CLASS_B= [[CLASS_B alloc] initWithNibName:@"RTC_HomeVC" bundle:nil];
    obj_CLASS_B.delegate = self;
    [self.navigationController pushViewController:obj_CLASS_B animated:TRUE];
}
@end 
```

B类

```
// CLASS_B.h
#import <UIKit/UIKit.h>
@class CLASS_A;
@interface CLASS_B : UIViewController {
    UIButton *Btn_Pop;
}
@property (weak, nonatomic) CLASS_A *delegate;
- (IBAction)Btn_PopPressed:(id)sender;
@end

// CLASS_B.m
#import "CLASS_B.h"
#import "CLASS_A.h"
@implementation CLASS_B
- (void)viewDidLoad
{
}
- (IBAction)Btn_PopPressed:(id)sender
{
    self.delegate.lbl_no.text = [NSString stringWithFormat:@"%d", ([self.delegate.lbl_no.text integerValue] + 1)];
    [self.navigationController popToRootViewControllerAnimated:YES];
}
@end 
```

# internet-explorer - 在 Internet Explorer 中自动输入数据

> ID：15109306
> 
> 赞同：0
> 
> 时间：2013-02-27T10:07:33.740
> 
> 标签：internet-explorer, automation, automated-tests, data-entry

有一个带有 2 个文本框和 2 个按钮的小网页，每个按钮用于将每个文本框中的数据提交到服务器。我在记事本中有一个值列表，我想通过第二个文本框自动提交。

我相信它会像...复制第一行并将其粘贴到第二个框中并按提交..一旦完成，对记事本中的所有行重复该过程...

我一直在尝试使用 c# 开发 Windows 应用程序，但到目前为止无济于事。

我想要的只是自动化这个过程......并期待帮助!!!!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:58:38.363

没关系..通过WatiN做到了:)

添加对项目的引用后..我使用了提到的代码

```
 private void btnComplete_Click(object sender, EventArgs e)
    {
        try
        {
            lblStatus.Text = "";    
            string[] Orders = txtOrders.Text.Split('\n');

                foreach (string text in Orders)
                {
                    // locate the Order Number (Completer) 
                    browser.TextField(Find.ByName("txt_comp_order")).Value = text;

                    browser.Button(Find.ByName("Button2")).Click();

                }

                lblStatus.Text = Orders.Length.ToString() + " Order(s) COMPLETED";

        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

# php - 为什么使用包含连接一次会因 pdo 失败？

> ID：15109310
> 
> 赞同：-2
> 
> 时间：2013-02-27T10:07:47.527
> 
> 标签：php, mysql, pdo

为什么使用包含连接一次会因 pdo 失败？
当我连接到包含连接页面的数据库时，它给了我一个错误，但是当我将连接代码放入并删除包含时，我没有收到错误。可能是什么问题？

```
Error Fatal error: Call to a member function prepare() on a non-object in C:\wamp\www\tish\A\view.php on line 167 
```

连接页面：

```
<?php
  function connected_Db(){
    try {
      $con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf8','root','');
    } catch(PDOException $e){
      echo 'Connection failed'.$e->getMessage();
    }
  }
  connected_Db();
?> 
```

我将其包含在其他页面中的方式：

```
include_once('pdo.inc.php');
connected_Db();
global $con; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:11:03.000

你永远不会`$con`在函数之外使用`connected_Db`。了解[变量范围](http://www.php.net/manual/en/language.variables.scope.php)。您应该`return`从函数中使用它并像这样使用它：

```
require_once 'pdo.inc.php';

$con = connected_Db(); 
```

这也意味着您不应该出现`catch`连接错误（至少不存在），因为如果函数无法返回 PDO 连接，您的脚本就不需要继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:28:20.500

首先，您需要告诉 PDO 在连接错误时抛出异常。
接下来，你不应该抓住它们，至少不要使用 try .. catch。

所以，代码必须是

pdo.inc.php：

```
<?php
function connected_Db(){
    $dsn  = 'mysql:host=localhost;dbname=tish_database;charset=utf8';
    $opt  = array(
        PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
    );
    return new PDO($dsn,'root','', $opt);
} 
```

（您可能还希望通过函数参数传递连接选项）

其他文件

```
include_once('pdo.inc.php');
$con = connected_Db(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:13:38.870

您不能在全局范围内使*函数变量成为全局变量。*该变量`$con`早已被 GC 处理：一旦函数返回，它就会被释放。试试这个：

```
function connected_Db()
{
   return new PDO('mysql:host=localhost;dbname=tish_database;charset=utf8','root','');
}
//global scope:
$con = connect_Db(); 
```

如果你坚持使用`global`关键字，这*不是*一个好主意，你应该这样使用它：

```
function connected_Db()
{
    global $con;//use the global var, set at top of function
    $con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf8','root','');
}
$con = null;// declare global var (optional, but a notice will be issued if not declared)
connect_Db();
var_dump($con); 
```

正如你所看到的，我已经 - 像 deceze 和 YourCommonSense 建议 - 删除了 try-catch 块（你在这里不需要）。它还表明您也不需要函数调用。如果您要编写以下代码，您的脚本将运行得非常好（甚至稍微快一点）：

```
//global scope (or whatever scope you need it to be)
$con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf8','root',''); 
```

这样，您就不会调用不需要调用的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T10:19:27.123

你使用`global`不正确。它应该进入函数，以指定变量来自函数外部，即在全局范围内。

例如

```
function connected_Db()
{
    global $con;

    $con = null;
    try
    {
       $con = new PDO(...);
    }
    catch(PDOException $e)
    {
        die('Could not connect: '.$e->getMessage());
    }
} 
```

但是最好返回连接而不是从全局范围内拉它。

IE

```
function connected_Db()
{
    try
    {
       return new PDO(...);
    }
    catch(PDOException $e)
    {
        die('Could not connect: '.$e->getMessage());
    }
} 
```

# c# - 需要加密/解密方法在加密字符串中没有“/”

> ID：15109313
> 
> 赞同：5
> 
> 时间：2013-02-27T10:08:18.680
> 
> 标签：c#, asp.net

我需要加密和解密字符串值，例如电子邮件地址和数值，但加密的字符串中不应包含“/”，因为我在 URL 中使用它并使用“/”作为分隔符来获取一些值。

我目前正在使用以下方法：

```
 string passPhrase = "Pas5pr@se";        // can be any string
    string saltValue = "s@1tValue";        // can be any string
    string hashAlgorithm = "SHA1";             // can be "MD5"
    int passwordIterations = 2;                  // can be any number
    string initVector = "@1B2c3D4e5F6g7H8"; // must be 16 bytes
    int keySize = 256;                // can be 192 or 128

    public string Encrypt(string plainText)
    {            
        byte[] initVectorBytes = Encoding.ASCII.GetBytes(initVector);
        byte[] saltValueBytes = Encoding.ASCII.GetBytes(saltValue);         
        byte[] plainTextBytes = Encoding.UTF8.GetBytes(plainText);
        PasswordDeriveBytes password = new PasswordDeriveBytes(passPhrase,saltValueBytes,hashAlgorithm,passwordIterations);
        byte[] keyBytes = password.GetBytes(keySize / 8);
        RijndaelManaged symmetricKey = new RijndaelManaged();
        symmetricKey.Mode = CipherMode.CBC;            
        ICryptoTransform encryptor = symmetricKey.CreateEncryptor(keyBytes,initVectorBytes);
        MemoryStream memoryStream = new MemoryStream();
        CryptoStream cryptoStream = new CryptoStream(memoryStream,encryptor,CryptoStreamMode.Write);           
        cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);            
        cryptoStream.FlushFinalBlock();
        byte[] cipherTextBytes = memoryStream.ToArray();
        memoryStream.Close();
        cryptoStream.Close();
        string cipherText = Convert.ToBase64String(cipherTextBytes);
        return cipherText;
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T10:11:47.947

如果您这样做只是为了传递 URL，我建议您生成任何加密字符串（无论是否有`/`），然后执行以下操作：

```
var sanitized = HttpUtility.UrlEncode(encryptedString); 
```

如您所见，`/`变为`%2f`。然后你可以简单地做：

```
var encryptedString = HttpUtility.UrlDecode(sanitized) 
```

你会再次得到相同的字符串。

**编辑：** `HttpUtility`在`System.Web`程序集中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T10:20:04.337

加密本身只是输出字节，而不是字符。所以这个问题与加密/解密完全无关。您的实际问题是将任意字节转换为可在 url 中使用的字符串。为此，我建议使用 URL 安全的 Base64 而不是普通的 Base64。

这些`/`字符是由您应用于密文的 Base64 编码产生的。Base64 使用 ASCII 字母和数字（总共 62 个），加上`/`和`+`最后`=`作为填充。

填充是非常无用的，所以我会剥离它。

然后`/`用`_`和`+`替换`-`。这称为*URL 安全 Base64*或*base64url*。它在[RFC4648](https://www.rfc-editor.org/rfc/rfc4648#section-5)中有描述。

```
public static string Base64UrlEncode(byte[] bytes)
{
    return Convert.ToBase64String(bytes).Replace("=", "").Replace('+', '-').Replace('/', '_');
}

public static byte[] Base64UrlDecode(string s)
{
    s = s.Replace('-', '+').Replace('_', '/');
    string padding = new String('=', 3 - (s.Length + 3) % 4);
    s += padding;
    return Convert.FromBase64String(s);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T10:12:23.397

`Convert.ToBase64String`使用字母、数字，`+`因此`/`您可以简单地将`/`out 切换为不是字母、数字或 的其他内容`+`：

编码：

```
// ...
string cipherText = Convert.ToBase64String(cipherTextBytes);
string ctWithoutSlashes = cipherText.Replace("/", "-"); 
```

解码

```
string cipherText = ctWithoutSlashes.Replace("-", "/");
// ... 
```

# android - 如何确定拨打的电话是本地电话还是 STD 或 ISD

> ID：15109329
> 
> 赞同：6
> 
> 时间：2013-02-27T10:08:51.963
> 
> 标签：android, android-intent, telephonymanager

我正在开发一个应用程序，它需要跟踪用户发出的呼出电话，我可以通过使用广播接收器进行跟踪。我还想检测到呼叫是本地或 STD 或 ISD，但我无法检测到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-02T18:49:16.167

假设，您知道拨出电话要去哪个*州*（电信圈）。然后您只需要检查您的*本地状态*（电信圈）是否与*拨出呼叫状态*（电信圈）相同。如果相同，则本地调用，否则 STD 调用。

现在，问题归结为，如何找到呼出的*状态（电信圈）。*

对于我们专门放置 STD 代码的固定电话，这可以很容易地完成。请参阅州和 STD 代码的[链接](http://stdcodes.bharatiyamobile.com/)。
有趣的是，手机也遵循非常相似的东西。手机号码的前 4 位数字说明了这一点。例如，假设号码是 9999xxxxxx，那么这个号码来自德里 - 沃达丰。有关完整的手机前 4 位详细信息，请参阅[维基百科链接。](https://en.wikipedia.org/wiki/Mobile_telephone_numbering_in_India)

# ios - 标签属性的合法用例是什么？

> ID：15109331
> 
> 赞同：2
> 
> 时间：2013-02-27T10:08:55.923
> 
> 标签：ios, objective-c

视图属性是否有任何合法用途`tag`？在我遇到使用标签可能会解决问题的情况下，已经找到了一种替代（并且[气味](http://en.wikipedia.org/wiki/Code_smell)较小）的解决方案。

换句话说，如果 Apple 要弃用该`tag`属性，您的反对意见是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:17:42.380

当使用`IBOutletCollection`, 并且需要检索子视图的特定实例时。我同意：如果你需要那个特定的实例，你为什么不第一次使用专用属性。虽然，在对应用程序进行原型设计时，假设我正在使用 Storyboard 'prototype' UITableViewCell 制作一个带有 tableView 的 Storyboard。我可以将子视图添加到此单元格，然后通过 UIView`viewWithTag:`在我的 tableView 的数据源方法中访问它们。我不必子类`UITableViewCell`化，只需检索原型，并通过我之前在 Interface-Builder 中设置的标记找到它的子视图。

但我同意你的看法，这仍然有点臭......

我正在寻找一个你**需要**标签的情况，没有其他解决方案......但我认为你可以在不使用标签的情况下完美地生活 :)

**编辑**：

正如其他人指出的那样，当您有太多视图时，为每个视图（属性/操作）处理不同的方法是一种痛苦，而标签使您能够使用单一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:17:52.687

假设您正在制作一个简单的计算器应用程序。您有超过 25 个按钮。如果没有“标签”属性，则每个按钮都需要 25 个 IBAction。

警报视图也是如此。标签属性是 UIView 类的重要属性之一。

# python - 将绝对导入重写为相对导入的工具

> ID：15109336
> 
> 赞同：2
> 
> 时间：2013-02-27T10:09:15.850
> 
> 标签：python, python-import

是否有工具可以自动将 Python 中的绝对导入重写为相对导入？

我想为应用程序提供一个插件，这个插件需要并包含 pygments（它使用绝对导入）。所以我想重写 pygments 代码，而不是手动做所有事情。

该插件可以向 sys.path 添加一个项目以包含 pygments，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-14T20:11:13.047

[查克移动](http://github.com/sb98052/chuckmove)可能对你有用。它是一个工具，可让您递归地重写整个源代码树中的导入以引用模块的新位置。

```
chuckmove --old sound.utils --new media.sound.utils src 
```

...这会下降到 src，并将导入 sound.utils 的语句重写为导入 media.sound.utils。它支持所有 Python 导入格式。即`from x import y`等`import x.y.z as w`。

# python - 比较多个字典并使用python生成另一个字典

> ID：15109340
> 
> 赞同：1
> 
> 时间：2013-02-27T10:09:41.697
> 
> 标签：python, dictionary, generator

我有两个字典，例如：

```
dict1 = {'Ron': ['Ronaldo', 'Ronald', 'Ron', 'Ronny'],
         'John': ['Johnny', 'john', 'johnny Bravo'],
         'Hard': ['Hardy', 'Hardy Boys', 'Hardness']}

dict2 = {'Ronald': ['America', 'New York'],
         'Johnny': ['Canada', 'Ottawa']} 
```

我想比较两个字典并提取 dict1 的“**键”**和**dict2**的**值**，**当且仅当****dict2**的**“键”**与**dict1**的**值****匹配**时！像：

 ******```
resultant_dict = {'Ron' : ['America', 'New York'],
                  'John' : ['Canada', 'Ottawa']} 
```

我已经尝试过嵌套循环并且能够获得所需的字典，但可以请有人通过 python 中的生成器帮助我做到这一点！谢谢
注意：DICT2 的 KEY 在 DICT1 的 VALUE 中只能是一个！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:12:53.893

首先，反转`dict1`字典：

```
rev = {v:k for k,vs in dict1.iteritems() for v in vs} 
```

`rev`就是现在：

```
{'Hardness': 'Hard',
 'Hardy': 'Hard',
 'Hardy Boys': 'Hard',
 'Johnny': 'John',
 'Ron': 'Ron',
 'Ronald': 'Ron',
 'Ronaldo': 'Ron',
 'Ronny': 'Ron',
 'john': 'John',
 'johnny Bravo': 'John'} 
```

`dict2`然后使用此字典映射键：

```
resultant_dict = {rev[k]:v for k,v in dict2.iteritems()} 
```

返回

```
{'John': ['Canada', 'Ottawa'], 'Ron': ['America', 'New York']} 
```******

# c# - 奇怪的 DllImport 行为（仅在 Unity3d 中）

> ID：15109343
> 
> 赞同：0
> 
> 时间：2013-02-27T10:09:57.537
> 
> 标签：c#, c++, sockets, unity3d, dllimport

我用 C 语言为 C# 编写了一个简单的 Winsock 包装器。当我在某个线程中使用 Socket.Accept() 并在主线程中使用 client.Connect 时 - 我有时（收到 DllNotFoundException。

> System.DllNotFoundException：引发了“System.DllNotFoundException”类型的异常。在 (wrapper managed-to-native) TcpWrapper:ES_ConnectClient (string,int) at TcpClientSocket.Connect (System.String address, Int32 port) [0x00000] in C:...\ESCore\TcpClientSocket.cs:21

TcpClientSocket.Connect 调用

```
[DllImport("ESocket")]
public static extern int ES_ConnectClient(string ip, int port); 
```

我不知道为什么这种情况很少发生。

一些代码：

```
listener = new TcpListenerSocket(50231); //calling bind from library here
if (listener.Start()) //calling listen from library
{
    thread = new Thread(new ThreadStart(Listen));
    thread.Start();

    client = new TcpClientSocket();
    if(client.Connect("localhost", 50231)) //exception here!
    {
        ...
        client.Close();
    }
} 
```

线程代码：

```
void Listen()
{
    while (m_Running)
    {
        if (listener.Pending()) //select from library
        {
            TcpClientSocket socket = listener.Accept(); //accept from library
            if (socket != null)
            {
                ...
                socket.Close();
            }
        }
    }
} 
```

听众也在图书馆。

库代码： http: [//pastie.org/private/hdgl9zqxfjt2arlkj11q](http://pastie.org/private/hdgl9zqxfjt2arlkj11q)

**更新：** 这只发生在 Unity3d 中。在单声道项目和 Microsoft .NET 中没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:55:17.463

这是一个简单的“找不到文件”错误消息。您从未说过“并且我确保 DLL 存在”，所以这可能是故障模式。

您必须确保 Windows 可以找到 DLL，它应该与您的 EXE 位于同一文件夹中。选择您的 C# 项目。Project + Add Existing Item，选择 ESocket.dll 文件，以便将其添加到您的项目中。选择它并切换到“属性”窗口。将“复制到输出目录”选项设置为“如果较新则复制”。如果 DLL 是由您的解决方案中的另一个项目构建的，那么请务必设置项目依赖项，以便始终首先构建该项目。重建你的项目。

这可确保 ESocket.dll 始终存在于构建目录中，并且 Windows 始终可以找到它。

# c++ - 如何在 Windows XP 上以比计时器滴答（15 毫秒）更高的精度获取时间？

> ID：15109344
> 
> 赞同：0
> 
> 时间：2013-02-27T10:09:59.947
> 
> 标签：c++, winapi

我编写了一个 C++ 程序来打印两个事件开始时的时间戳（或系统时间）。但这两个时间之间的差异始终是 0 或 15ms。这是因为 Windows XP 计时器每秒更新 64 次，即每 15.625 毫秒一次。所以我没有办法知道0到15.625ms之间的任何延迟。

有没有办法解决这个限制？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:13:08.027

查看[QueryPerformanceCounter](http://support.microsoft.com/kb/172338?wa=wsignin1.0)以获得更高的分辨率。

# pthreads - 我可以在锁定时重新映射共享的 POSIX 互斥锁吗？

> ID：15109349
> 
> 赞同：5
> 
> 时间：2013-02-27T10:10:26.830
> 
> 标签：pthreads, posix, mutex, mmap, remap

假设共享的 POSIX 互斥体已经被初始化（使用 PTHREAD_PROCESS_SHARED）。

然后，考虑以下过程：

```
typedef struct {
    pthread_mutex_t mutex;
    // ...
} Shared;

Shared *shared = (Shared *)mmap(...); // MAP

pthread_mutex_lock(&shared->mutex); // LOCK

// REMAP
munmap(shared, ...);
shared = (Shared *)mmap(...);

pthread_mutex_unlock(&shared->mutex); // UNLOCK 
```

POSIX 是否保证这将按“天真的”预期工作？

据我所知，相关的手册页都没有提到这种情况。

* * *

此外，以下 Linux 特定替代方案怎么样：

```
Shared *shared = (Shared *)mmap(...); // MAP

pthread_mutex_lock(&shared->mutex); // LOCK

shared = (Shared *)mremap(shared, ...); // MREMAP_MAYMOVE

pthread_mutex_unlock(&shared->mutex); // UNLOCK 
```

* * *

例如，我可以想象一个 PTHREADS 实现，它将在进程内的某处存储指向锁定互斥锁的指针。如果互斥锁被配置为健壮的（PTHREAD_MUTEX_ROBUST），如果进程在互斥锁被锁定时终止，它将允许实现将互斥锁标记为“已放弃”。

我不知道这样的方案是否真的有效，是否被 POSIX 允许，或者互斥鲁棒性如何在任何平台上实际实现，但如果按照这些思路的实现**可行**，并且根据 POSIX 有效，**那么**上面的重新映射场景将具有未定义的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:54:16.077

不！

正如@Celada 所指出的，Linux 中健壮互斥锁的实现假定锁定的健壮互斥锁保持在固定地址：

[http://www.kernel.org/doc/Documentation/robust-futexes.txt](http://www.kernel.org/doc/Documentation/robust-futexes.txt)

由此我们可以肯定地得出结论，POSIX 允许**禁止重新映射**锁定的互斥锁的实现。否则 Linux 实现将是不正确的。

因此，我在问题中概述的程序应被视为**不正确**，并导致未定义的行为。

# c++ - 如何使用 Designer 从 C++/CLI 中的现有 Windows 窗体控件继承

> ID：15109356
> 
> 赞同：1
> 
> 时间：2013-02-27T10:11:01.247
> 
> 标签：c++, winforms, user-controls, c++-cli

我需要 Visual Studio 2012 中的 c++/cli 中的自定义 DataGridView 类，可以在设计器视图中使用。

我创建了一个从 System::Windows::Forms::UserControl 继承的默认 clr 用户，并将 UserControl 更改为 DataGridView，但它在 C++ 中不起作用。它在 C# 中工作。[1]

设计师也无法识别从头开始的代码。[2]

似乎我必须将 DataGridView 放在类中，但我将不得不访问它的成员，例如 grid->view->GetName.. 而不是 grid->GetName.. 现在。而且它不会被模式化，因为在所有这些奇怪的语法之后，CLR 的意图是什么。

[1] [http://msdn.microsoft.com/en-us/library/7h62478z.aspx](http://msdn.microsoft.com/en-us/library/7h62478z.aspx)

[2][使用 Windows 窗体设计器添加用户控件](https://stackoverflow.com/questions/3208660/adding-a-user-control-using-windows-form-designer)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:55:53.407

请按照以下适用于 Visual Studio 2010 的步骤操作。这些步骤对于 Visual Studio 2012 也应该有效。

1.  创建一个新的*VisualC++ -> CLR -> ClassLibrary* Project (eg CustomDataGridView)
2.  将*System.Windows.Forms*引用添加到项目中
3.  *将CustomDataGridView.h*的内容更改为：

    ```
    #pragma once

    using namespace System;
    using namespace System::Windows::Forms;

    namespace CustomDataGridView 
    {
        public ref class MyDataGridView : DataGridView
        {
            // TODO: You can include your custom behavior here.
        };
    } 
    ```

4.  编译你的项目
5.  使用表单打开/创建项目，然后打开该表单
6.  右键单击工具箱并选择*选择项目...*
7.  浏览您的*CustomDataGridView.dll*并加载自定义控件
8.  现在*MyDataGridView*应该在 ToolBox 中列出，您可以通过拖放将其放到表单上

# c# - 如何告诉 JsonConvert.SerializeObject 将字符串对象视为 JSON

> ID：15109363
> 
> 赞同：1
> 
> 时间：2013-02-27T10:11:17.487
> 
> 标签：c#, json

我如何告诉`JsonConvert.SerializeObject`将其`UserPreferences`视为 JSON 对象（它作为字符串存储在数据库中）。

```
 public int UserId { get; private set; }

  [[JsonProperty something]]
  public string UserPreferences { get; private set; }

  public CFUser(Int32 userId, string userPreferences) {
      UserId = userId;
      UserPreferences = userPreferences;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:33:24.270

解决您的问题的一个选项是`JsonConverter`对`UserPreferences`属性使用自定义。为此，您需要使用以下属性装饰该属性：

```
[JsonConverter(typeof(UserPreferencesConverter))]
public string UserPreferences { get; private set; } 
```

这是一个完整的示例：

```
class Program
{
    static void Main(string[] args)
    {
        var cfUser = new CFUser(1, @"{""test"":""ok""}");
        var json = JsonConvert.SerializeObject(cfUser);
        var deserialized = JsonConvert
            .DeserializeObject(json, typeof(CFUser));
    }

}

class UserPreferencesConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return true;
    }

    public override object ReadJson(
        JsonReader reader, Type objectType, 
        object existingValue, JsonSerializer serializer)
    {
        var jObject = JObject.Load(reader);

        // you may use the following line instead
        //return jObject.ToString().Replace("\r\n", "");

        return jObject.ToString()
            .Where(c => !"\r\n".Contains(c))
            .Aggregate<char, string>("", (s, c) => s + c);
    }

    public override void WriteJson(JsonWriter writer, 
        object value, JsonSerializer serializer)
    {
        writer.WriteRawValue(value.ToString());
    }
}

public class CFUser
{
    public int UserId { get; private set; }

    [JsonConverter(typeof(UserPreferencesConverter))]
    public string UserPreferences { get; private set; }

    public CFUser(Int32 userId, string userPreferences)
    {
        UserId = userId;
        UserPreferences = userPreferences;
    }
} 
```

# mysql - mysql大查询没有响应

> ID：15109366
> 
> 赞同：0
> 
> 时间：2013-02-27T10:11:29.760
> 
> 标签：mysql, sql, database

我们有大约 90 万条记录的表。我们正在尝试执行具有大数据的查询（注意：查询很大）

```
like <some query> and agt.item in (',productRange,.......<very large data, having around 2 lakh chars>) 
```

有了这个，查询失败，说语法错误。但它执行的查询项目数量较少。请让我知道如何处理此类问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:23:19.593

大多数 DBMS 与大型参数列表一起工作很糟糕。所以如果你有一个很大的“IN”列表，例如

```
SELECT *
FROM   foo
WHERE  bar IN ('1','2','3','4'...,'500000') 
```

与拥有一个包含您要选择的所有值的表并加入两个表相比，您将获得非常差的性能：

```
CREATE TABLE baz (
    bar VARCHAR
)

INSERT INTO baz(bar) VALUES ('1');
INSERT INTO baz(bar) VALUES ('2');
INSERT INTO baz(bar) VALUES ('3');
INSERT INTO baz(bar) VALUES ('4');
...
INSERT INTO baz(bar) VALUES ('500000');

SELECT *
FROM   foo,
       baz
WHERE  foo.bar = baz.bar 
```

因此，由于 MySQL 没有表值参数，因此您最好的选择是将数据存储在临时表中，而不是在查询中输入数据，并且不要忘记您需要对要过滤的值进行索引（agt .item 在你的情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:47:00.777

如果您的子句中的 valuesitemsitems`IN`来自另一个先前的查询，那么您可能只使用子查询。

假设您当前的代码如下所示：

```
SELECT some_field FROM table1 WHERE condition1;
-- returns a long list and/or large strings

SELECT * FROM table2 WHERE condition2 AND item IN ( @records_from_previous_query ); 
```

您可以将其重写为：

```
SELECT *
FROM table2
JOIN table1 ON (table1.some_field = table2.item AND condition1)
WHERE condition2 
```

# python - PyPDF2 合并时抛出错误（Python3.3/Win7）

> ID：15109367
> 
> 赞同：1
> 
> 时间：2013-02-27T10:11:34.237
> 
> 标签：python, pdf, pypdf

我正在使用 PyPDF2 进行 PDF 的简单合并。我在 XP/Python 3.2 上编写了代码，它运行良好。当我将它移至 Win7-64bit/Python 3.3 并使用最新的 PyPDF2 发行版 ( [https://github.com/knowah/PyPDF2/](https://github.com/knowah/PyPDF2/) ) 时，将 PDF 附加到合并对象时会引发以下错误：

```
Traceback (most recent call last):
  File "C:\PDFs\pdfmerge2.py", line 103, in <module>
    count=merge_and_check(l_batch_files)
  File "C:\PDFs\pdfmerge2.py", line 47, in merge_and_check
    merger.append(pf)
  File "C:\Python33\lib\site-packages\PyPDF2\merger.py", line 168, in append
    self.merge(len(self.pages), fileobj, bookmark, pages, import_bookmarks)
  File "C:\Python33\lib\site-packages\PyPDF2\merger.py", line 97, in merge
    elif type(fileobj) == file:
NameError: global name 'file' is not defined 
```

我尝试使用 Python 3.2 进行全新安装并得到相同的错误。

奇怪的是，merge.py 在我的 XP 安装和 Win7 之间非常不同，但我找不到对 PyPDF2 早期版本的引用，我不记得我从哪里下载了那个版本，虽然我知道它是2012 年 12 月 18 日。据我所知，从那时到现在，PyPDF2 没有任何更新。

Win7 上的安装使用标准的“python setup.py build”然后“安装”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T13:55:43.580

尝试导入 io 模块，然后使用方法 FileIO() 创建流

例子：

```
import io
.
.
.
.
outputStream = io.FileIO('c:\example.pdf', 'wb') 
```

# cuda - 用于预取的共享内存配置

> ID：15109369
> 
> 赞同：1
> 
> 时间：2013-02-27T10:11:39.897
> 
> 标签：cuda, nvidia

在我的程序中，我使用共享内存来预取数据。一个 2D 线程块，尺寸为 8 x 4 (32)，获得 8 * 4 * 8 * sizeof(float4) 字节的共享内存。每个线程循环复制 8 个 float4：

```
inline __device__ void pack(const float4 *g_src, float4 *s_dst, const unsigned int w, const unsigned int d) {
    uint2 indx = { blockIdx.x * blockDim.x + threadIdx.x, blockIdx.y * blockDim.y + threadIdx.y };
    uint2 sindx = { threadIdx.x, threadIdx.y };
    int i;

    for (i = 0; i < d; ++i) s_dst[(sindx.y * blockDim.x + sindx.x) * d + i] = g_src[(w * indx.y + indx.x) * d + i];
} 
```

其中'w'设置为全局内存缓冲区的宽度（以float4s的数量为单位），'d'设置为8（复制的float4s的数量）。

这样的配置和内存的进一步使用，是否会导致存储库冲突，或者会应用广播？当线程只复制时也会出现这种情况，比如 5 个 float4s，而不是 8 个？

MK

PS 相同的主题[在这里](https://devtalk.nvidia.com/default/topic/532767/cuda-programming-and-performance/shared-memory-configuration/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:58:32.707

在预取阶段会发生存储库冲突。例如，ID 为 0、4、8 `threadIdx.x + threadIdx.y * blockDim.x`、... 28 的第一个 warp 中的线程访问同一个库。您可以将其视为线程 (0,0) 和线程 (4,0)，用于`i`等于 0 访问`s_dst[0]`并`s_dst[32]`属于同一银行。

如果在进一步使用过程中发生银行冲突，取决于您将访问的方案`s_dst`。

广播机制仅在线程同时**读取**相同地址时应用。

发生多少银行冲突取决于 的值`d`。如果`d mod 32 == 1`没有任何冲突。

**编辑：** 恕我直言，在预取阶段避免银行冲突的最佳方法，特别是如果`d`正在改变，是在经纱之间平均分配工作。假设您需要将值预取`n`到共享内存，`w_id`是 warp 的 ID 和 warp`l_id`中的线程 ID（从 0 到 31）。比预取应该是这样的：

```
for(int i = l_id + w_id*WARP_SIZE; i < n; i += WARP_SIZE*COUNT_OF_WARPS_IN_BLOCK)
{
    s_dst[i] = ...;
} 
```

但这仅有助于避免预取期间的银行冲突。正如我已经说过的，在进一步使用过程中避免冲突取决于您将访问的方案`s_dst`。

# c# - 想要传递字符串为 true 是列表有值

> ID：15109371
> 
> 赞同：-3
> 
> 时间：2013-02-27T10:11:42.223
> 
> 标签：c#

如果某些列表具有值，我想将值作为 True 传递，例如这里

如果`item.Achievements.Count()`有价值，那么我需要传递这样的东西

```
...
item.Location.City + "|" +True + "|" + item.Soid + "|" +
... 
```

代码是这样的

```
foreach (var item in mgrProfile.GetMemberProfile(context.CurrentMember.MemberProfileSoid).Projects)
{
    bool isdataachivevement = 
    string list = item.Soid+ "|" +
                  item.Soid + "|" +
                  item.ProjectTitle + "|" +
                  item.Role + "|" +
                  item.StartDate.ToShortDateString() + "|" +
                  item.EndDate.value.ToShortDateString() + "|" +
                  item.Location.Country + "|" +
                  item.Location.State + "|" +
                  item.Location.City + "|" +
   // Here is I need to pass as True// if Achievements have data, otherwise false
                  item.Achievements.Count() + "|" +
                  item.Soid + "|" +
                  item.Soid + "|" +
                  item.Soid + "|" +
                  item.Soid + "|" +
                  projectlist.Add(list);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:21:55.170

你可以做

`(.Count() > 0).toString();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:25:12.843

只需使用：

```
string list = item.Soid+ "|" +
              item.Soid + "|" +
              item.ProjectTitle + "|" +
              item.Role + "|" +
              item.StartDate.ToShortDateString() + "|" +
              item.EndDate.value.ToShortDateString() + "|" +
              item.Location.Country + "|" +
              item.Location.State + "|" +
              item.Location.City + "|" +
              item.Achievements.Any() + "|" + // <--- Here is a solution
              item.Achievements.Count() + "|" +
              item.Soid + "|" +
              item.Soid + "|" +
              item.Soid + "|" +
              item.Soid + "|" +
              projectlist.Add(list); 
```

这将调用`ToString()`( ) `bool`，`System.Boolean`它将返回`bool.TrueString`or `bool.FalseString`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:15:59.513

将行替换为：

```
(item.Achievements.Count() > 0) ? "true" : "false" 
```

如果您使用的是 .NET 列表，则按照评论中的建议或更好

```
item.Achievements.Any() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:17:38.137

`Count`是一个属性：

```
...
item.Location.City + "|" +
item.Achievements.Count > 0 ? "true" : "false" + "|" +
item.Soid + "|" +
... 
```

# c# - Asp.net C# web 服务 - oracle 连接

> ID：15109373
> 
> 赞同：0
> 
> 时间：2013-02-27T10:11:44.077
> 
> 标签：c#, asp.net, web-services, oracle, connection

我已经为员工休假请求编写了一项 Web 服务。

它有 3 个 Web 服务……

两个连接到 SQL 数据源，一个连接到 oracle DB。

请注意，Oracle [Web 方法] 在浏览器上运行时甚至不显示，而调用其他方法。另请注意，我测试了此连接设置并在 asp 中执行。C# 作为一种应用程序方法，它可以工作。

```
[WebMethod]       
public DataSet Leave_balance(string empNo)
{
    string oradb = "Data Source=hRPROD;UserId=HR;Password=hr;";
    //string oradb = "Data Source=(DESCRIPTION="
    //    + "(ADDRESS=(PROTOCOL=TCP)(HOST=esnaadhrsrv1)(PORT=1521))"
    //     + "(CONNECT_DATA=(SERVICE_NAME=hr1)));"
    //     + "User Id=hr;Password=hr;";
    OracleConnection conn = new OracleConnection();
    conn.ConnectionString = oradb;
    conn.Open();
    OracleCommand cmd = conn.CreateCommand();
    //cmd.CommandText = "Select * from emp_intranet_leave where reg_no='" + empNo + "'";
    cmd.CommandText = "Select * from emp_intranet_leave";
    cmd.ExecuteNonQuery();
    OracleDataAdapter adapter = new OracleDataAdapter(cmd);
    adapter.SelectCommand.Parameters.Add("emp_no", OracleType.Int32).Value = 2415;
    DataSet ds = new DataSet();
    adapter.Fill(ds);
    conn.Close();
    return (ds);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:31:48.817

而不是使用数据集使用类概念。跟踪是否从 oracle 数据库中检索数据。如果没有获取数据，请检查您的数据库连接。您可以使用列表或字符串 (xml) 数据从 webmethod 返回数据。

# windows - 是否有随 Windows 一起提供的支持自动化 (OLE2) 的 HTTP 客户端？

> ID：15109374
> 
> 赞同：1
> 
> 时间：2013-02-27T10:11:47.460
> 
> 标签：windows, abap

是否有随 Windows 一起提供的启用自动化的 HTTP 客户端（即我可以使用 OLE 客户端控制的东西），并且我可以假设大多数版本的 Windows 上都存在该客户端？

我打算在 SAP ABAP 程序中使用它，我希望用户可以选择通过桌面连接下载数据，而不是从 SAP 服务器发起请求。

我想看看在这种情况下是否可以对 Internet Explorer 进行 OLE 调用（尽管我不确定是否可以检索 HTTP 请求的响应），但我不知何故认为这样的客户端会以某种方式“更干净”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:11:47.460

好的，在输入这​​个问题时，我在 Google 上搜索了“vbscript http request”，下面的 Stack Overflow 问题通过指向`MSXML2.XMLHTTP`我将通过 OLE 实例化的对象来回答我的问题：[HTTP GET in VBS](https://stackoverflow.com/questions/204759/http-get-in-vbs)

使用这个答案，我们可以编写一些 ABAP 代码，如下所示：

```
data: httpclient type ole2_object.
data: response type string.

create object httpclient 'MSXML2.XMLHTTP' no flush.

call method of httpclient 'open' no flush
  exporting
    #1         = 'GET'
    #2         = 'http://www.google.co.za'
    #3         = 0.
call method of httpclient 'send'.

get property of httpclient 'responseText' = response. 
```

在 last 之后`GET PROPERTY`，响应字符串变量包含 HTTP 响应的正文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:37:56.090

CL_HTTP_CLIENT 类不适用于您的情况吗？根据我的经验，使用 OLE 自动化会使您的程序不太稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:37:26.960

使用 HTTP_POST 或 HTTP_GET 函数。有一个 RFC_DESTINATION 参数。使用值 SAPHTTP 通过用户桌面访问站点 SAPHTTPA 通过 SAP 服务器进行访问。

# java - 创建和执行批处理文件并将输出链接到进度条

> ID：15109385
> 
> 赞同：0
> 
> 时间：2013-02-27T10:12:15.190
> 
> 标签：java, swing

我正在创建一个 Java swing GUI，它从用户（通过文本字段）获取少量参数并将它们存储在一个名为`finalstring`. 这个字符串基本上是一个命令，它运行一个带有少量参数的“.exe”文件。现在我想**创建一个批处理文件（我桌面上的 start.bat），我想在其中复制这个字符串**。**最后我想执行这个批处理文件。随着执行，我还想存储这个批处理文件的输出。** 此外，批处理文件执行某些进程，我想与进度条链接，这可能吗？（**在批处理文件中运行的进程，要链接到 java swing 的进度条**？）。

我使用 python 和 tkinter 作为 GUI 完成了上述所有操作，但是在存储批处理文件的输出期间，我的 tkinter gui 曾经挂起（没有响应），所以我正在切换到 java swings GUI。我搜索了大多数在线线程，但我脑子里什么也没有（还创建了几个 java 程序，但没有创建批处理文件），所以我需要帮助，我感谢你通过这个线程所做的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:48:37.023

您可以使用 执行您的批处理，如此[处](https://stackoverflow.com/a/5740673/230513)[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)所示。您可以将组合输出流中的线路连接到 a ，如此[处](https://stackoverflow.com/a/3245805/230513)所示。`append()``JTextArea`

我不确定您是否可以在[`JProgressBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)不了解流程粒度的情况下有效地显示进度。

# opengl-es - OpenGL ES xor 绘图模式

> ID：15109388
> 
> 赞同：0
> 
> 时间：2013-02-27T10:12:20.807
> 
> 标签：opengl-es

OpenGL ES 有 XOR 绘图模式吗？我想在那种模式下画一个立方体，然后画一个与立方体相交的球体，输出应该是立方体的一部分和球体的一部分，但有空的交点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:01:59.780

鉴于您想要投影后两个对象的图像空间交集，而不是立方体与球体的实际几何交集（因为这绝对不是 OpenGL 的用途），您可以为此使用[模板](http://www.khronos.org/opengles/sdk/1.1/docs/man/glStencilFunc.xml) [缓冲区](http://www.khronos.org/opengles/sdk/1.1/docs/man/glStencilOp.xml)：

首先确保你有一个模板缓冲区（取决于你的上下文创建框架，不知道 Cocos3D 是怎么做的，但是 OpenGL ES 1 本身支持模板测试）。然后当然在做立方体和球体之前启用模板，并在帧开始时清除模板缓冲区（可能与其他缓冲区一起）：

```
glClear(... | GL_STENCIL_BUFFER_BIT);
...
glEnable(GL_STENCIL_TEST); 
```

首先，我们仅将立方体渲染到模板缓冲区中，`0`为每个绘制的像素递增模板值（从 开始）。

```
glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE); //don't really draw anything
glStencilFunc(GL_ALWAYS, 0, -1);    //always pass the test (default anyway)
glStencilOp(GL_KEEP, GL_KEEP, GL_INCR);  //increment for each drawn pixel
//draw object 
```

然后我们对球体做同样的事情。之后，模板缓冲区在`1`任何地方都有一个立方体像素或一个球体像素，以及一个`2`无处不在的立方体和一个球体像素。

然后我们只是正常绘制这两个东西，但只在没有模板缓冲区的`2`地方（或者`1`如果你想要的话），因此我们不在交叉点绘制任何东西：

```
glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);  //draw something
glStencilFunc(GL_NOTEQUAL, 2, -1);      //draw everywhere except at intersection
glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);    //leave the stencil buffer as is
//draw cube
//draw sphere 
```

最后，完成后，我们再次禁用模板测试 ( `glDisable(GL_STENCIL_TEST)`)。

这只是一个基本示例，但它应该让您开始使用非常强大的模板缓冲区。

目前，整个事情都取决于深度测试结果，这意味着它取决于您绘制对象的顺序。如果您希望它与深度无关（因此只考虑它们的 2D 屏幕投影），那么您可以要么在没有深度测试的情况下绘制你的对象，要么将第二个参数`glStencilOp`（这是模板测试通过但深度测试失败时执行的操作）`GL_INCR`也设置为 。

目前，它也仅在启用背面剔除时才有效，因为否则每个对象的模板值将增加两次（至少在忽略深度的情况下），并且对于非凸对象来说情况会更糟。也许您也可以使用其他模板操作来执行您的任务，但不幸的是，OpenGL ES 1 似乎不支持对模板值的二进制操作，也不支持包装操作（因此`0`再次递减`0`）。

**编辑：**好的，您真的想要 3D 对象之间的几何交集（或者说是看起来的差异）。那么OpenGL本身无法解决您的问题。OpenGL 不做任何其他事情，然后将简单的图元（点、线和三角形）绘制到屏幕上。它既不是场景管理系统，也不是几何库。您要实现的任务并不那么简单（尽管使用像立方体和球体这样的简单对象肯定会有所帮助），您可能需要寻找一些几何库来对生成的网格（或[*构造实体几何 (CSG)*](http://en.wikipedia.org/wiki/Constructive_solid_geometry)）进行布尔运算适当的几何差异作为三角形网格，然后您可以像往常一样使用 OpenGL 绘制。

Another option, similar to your mentioned concept of a *"3D stencil buffer"* would be to discretize space using a regular grid and thus subdivide your objects into small voxels (3D pixels, think of small boxes). On those discrete finite voxel sets boolean operations are pretty easy. But of course this approach comes at the cost of introducing discretization error and performance overhead (operating on voxels means operating on large data sets, ok CSG isn't easy either, but has probably better complexity than O(n^3)). And you also have to recreate a renderable object from the voxel set again, either using some surface extraction method to get a mesh again, or just drawing small points or boxes.

In the end using a proper CSG library is probably your best bet, either way OpenGL doesn't have anything to do with it.

# shell - 在 shell 脚本中以特殊字符开头的行之间的打印行

> ID：15109394
> 
> 赞同：0
> 
> 时间：2013-02-27T10:12:34.050
> 
> 标签：shell

我有一个文本文件，如下所示：

```
 #aabc
 ld
 #ac
 bc
 acz
 c
 #hello 
```

我想阅读这个文件并检查以“#”开头的行之间的行。如果该行以“#”开头，则忽略它，如果它不是以“#”开头，则将整行重定向到另一个文件中。因此文件的内容（新）应该是第一次尝试：

```
ld 
```

我想稍微修改一下问题。

问题是这样的，a）首先读取文件直到第二次出现“#”，即直到上面的“#ac”。现在你有行：

```
 #aabc
 ld
 #ac 
```

现在仅将 ld 重定向到 newfile 并忽略 #started 行。

b) 现在从第二次出现“#”到第三次出现“”读取文件。因此，我们在上述问题中有以下几行：

```
 #ac
 bc
 acz
 c
 #hello 
```

现在仅将 ld 重定向到 newfile1 并忽略 #started 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:27:02.607

尝试这个：

```
grep -v '^#' yourText > newfile 
```

# android - 在android中读取xml文件

> ID：15109395
> 
> 赞同：1
> 
> 时间：2013-02-27T10:12:38.007
> 
> 标签：android, xml-parsing, data-storage

我已将服务器的 IP 配置保存在我的 android 内部存储中 /Simulate/Configuration.xml 的 xml 文件中

配置.xml

```
<?xml version="1.0"?>

<IPconfig>

<ipAddress>172.**.***.***</ipAddress>
<port>5000</port>

</IPconfig> 
```

访问ip地址和端口号的代码

```
try {
File sdcard = Environment.getExternalStorageDirectory ();
File FXmlFile = new File (sdcard, "/ Simulate / Configuration.xml");
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(fXmlFile);
doc.getDocumentElement (). normalize ();
NodeList nlist = doc.getElementsByTagName ("IPconfig");
for (int temp = 0; temp <nList.getLength (); temp + +) {
Node nNode = nList.item(temp);
if (nNode.getNodeType () == Node.ELEMENT_NODE) {
Element eElement = (Element) nNode;
SERVERIP= eElement.getAttribute("ipAddress");
System.out.println ("server ip:" + SERVERIP);
SERVERPORT= eElement.getAttribute("port");
System.out.println ("Server port:" + ServerPort);
}
}
}catch (Exception e) {
            e.printStackTrace();
            } 
```

当我打印 SERVERIP 和 SERVERPORT 时都返回一个空值。如何从 xml 中获取 ipaddress 和 port 值？任何帮助表示赞赏。另外，如果有更好的方法来指定服务器的 ipconfig。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:45:52.577

```
 import org.xml.sax.Attributes;
    import org.xml.sax.SAXException;
    import org.xml.sax.helpers.DefaultHandler;

    public class Handler extends DefaultHandler
    {
public String ipAddress;
public String port;
public StringBuffer  sbBuffer;

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    sbBuffer = new StringBuffer();
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if(localName.equalsIgnoreCase("ipAddress"))
        ipAddress = sbBuffer.toString();
    else if(localName.equalsIgnoreCase("port"))
        port = sbBuffer.toString();
}

public void characters(char[] ch, int start, int length) throws SAXException
{
    sbBuffer.append(ch,start,length);
}

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:38:07.450

回答是因为 Andrey Voitenkov 暗示我使用了元素而不是属性:)

```
********EDIT*******
SERVERIP= eElement.getElementsByTagName("ipAddress").item(0).getTextContent();
System.out.println("server    ip:"+SERVERIP);
SERVERPORT= eElement.getElementsByTagName("port").item(0).getTextContent();
System.out.println("server port:"+SERVERPORT); 
```

# python - python中的计算器

> ID：15109396
> 
> 赞同：1
> 
> 时间：2013-02-27T10:12:40.023
> 
> 标签：python, recursion, calculator

我正在尝试制作可以使用基本 4 个运算符解决表达式的计算器，例如 1+2*3-4/5，但是它不起作用，我不知道出了什么问题。请检查我的代码。当我运行它时，我在 8 行中收到了无数个错误。`return ret(parts[0]) * ret(parts[2])` 这是代码

```
def ret(s):
    s = str(s)
    if s.isdigit():
        return float(s)
    for c in ('*','/','+','-'):
        parts = s.partition(c)
        if c == '*':
            return ret(parts[0]) * ret(parts[2])
        elif c == '/':
            return ret(parts[0]) / ret(parts[2])
        elif c == '+':
            return ret(parts[0]) + ret(parts[2])
        elif c == '-':
            return ret(parts[0]) - ret(parts[2])
print(ret('1+2')) 
```

错误回溯以：

```
 File "C:\Python33\calc.py", line 8, in ret
    return ret(parts[0]) * ret(parts[2])
  File "C:\Python33\calc.py", line 2, in ret
    s = str(s)
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:19:55.447

您做错的主要事情是您正在检查`c`而不是分区运算符的值。您还可以`s.partition`通过使用 left 和 right 进行实际操作来解压结果以使事情变得更容易。

```
def ret(s):
    s = str(s)
    if s.isdigit():
        return float(s)
    for c in ('-','+','*','/'):
        left, op, right = s.partition(c)
        if op == '*':
            return ret(left) * ret(right)
        elif op == '/':
            return ret(left) / ret(right)
        elif op == '+':
            return ret(left) + ret(right)
        elif op == '-':
            return ret(left) - ret(right)
print(ret('1+2')) 
```

**此外，您需要颠倒运算顺序，因为您首先要进行加法和减法，然后是乘法和除法。**

我的意思是，如果你有这样的表达`4+4*3`，你想把它分成

```
ret(4) + ret(4 * 3) 
```

由于它是递归调用，因此您希望具有最高优先级的运算符位于调用堆栈上的最后一个，以便在函数返回时首先执行它们。

举个例子：

```
print(ret('1+2*6'))
print(ret('3*8+6/2')) 
```

**输出**

```
13.0
27.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:23:41.493

无论如何，您都对输入字符串进行分区，从不检查运算符是否在那里。`.partition()`如果输入中不存在分区字符，则返回空字符串：

```
 >>> '1+1'.partition('*')
 ('1+1', '', '') 
```

所以你会打电话`s.partition('*')`但从不检查是否有*任何*这样的运营商存在，导致无条件调用`ret()`. 无论是否在场，您*都会*打电话。`ret(parts[0]) * ret(parts[2])``*``s`

*解决方案是先*测试运算符或检查`.partition()`. 后者可能是最简单的：

```
for c in ('+','-','*','/'):
    parts = s.partition(c)
    if parts[1] == '*':
        return ret(parts[0]) * ret(parts[2])
    elif parts[1] == '/':
        return ret(parts[0]) / ret(parts[2])
    elif parts[1] == '+':
        return ret(parts[0]) + ret(parts[2])
    elif parts[1] == '-':
        return ret(parts[0]) - ret(parts[2]) 
```

请注意，我颠倒了操作员的顺序；是的，乘法和除法需要在加法和减法之前应用，但你在这里是*相反*的；将表达式分成更小的部分，然后在处理子表达式时应用操作。

您可以使用分配解包将 3 个返回值分配`.partition()`给更简单的名称：

```
for c in ('+','-','*','/'):
    left, operator, right = s.partition(c)
    if operator == '*':
        return ret(left) * ret(right)
    elif operator == '/':
        return ret(left) / ret(right)
    elif operator == '+':
        return ret(left) + ret(right)
    elif operator == '-':
        return ret(left) - ret(right) 
```

接下来，您可以使用该[模块](http://docs.python.org/2/library/operator.html)*简化*所有这些操作，该模块具有执行与算术运算相同的操作的功能。地图应该这样做：[`operator`](http://docs.python.org/2/library/operator.html)

```
import operator
ops = {'*': operator.mul, '/': operator.div, '+': operator.add, '-': operator.sub}

for c in ('+','-','*','/'):
    left, operator, right = s.partition(c)
    if operator in ops:
        return ops[operator](ret(left), ret(right)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:22:05.633

您的调度不正确。您定义函数的方式将**始终**尝试按“*”拆分，这基本上使用相同的参数递归调用 ret 函数...

您必须首先检查参数字符串中是否存在“运算符”。

再想想！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:28:15.697

在您的代码中，您对 的结果没有条件`s.partition(c)`，因此即使分区导致`('anything', '', '')`您将在第一个 if 上进行递归。

**已编辑**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-13T16:39:30.483

这是一个简单的python计算器程序，请随意使用：

```
#Python calculator

def menu():
    print ("Welcome to calculator.py")
    print ("your options are:")
    print (" ")
    print ("1) Addition")
    print ("2) Subtraction")
    print ("3) Multiplication")
    print ("4) Division")
    print ("5) Quit calculator.py")
    print (" ")
    return input ("Choose your option: ")

def add(a,b):
    print (a, "+", b, "=", a + b)

def sub(a,b):
    print (b, "-", a, "=", b - a)

def mul(a,b):
    print (a, "*", b, "=", a * b)

def div(a,b):
    print (a, "/", b, "=", a / b)

loop = 1
choice = 0
while loop == 1:
    choice = menu()
    if choice == 1:
        add(input("Add this: "),input("to this: "))
    elif choice == 2:
        sub(input("Subtract this: "),input("from this: "))
    elif choice == 3:
        mul(input("Multiply this: "),input("by this: "))
    elif choice == 4:
        div(input("Divide this: "),input("by this: "))
    elif choice == 5:
        loop = 0

print ("Thank you for using calculator.py!") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-06T12:53:51.253

如何条件用户输入数字 1 和数字 2，如果它在字符串中。使用 if/else 或 try/except。

```
print("\n Select A Number \n")
print("Press 1 for Addition")
print("Press 2 for Subtraction")
print("Press 3 for multiplication")
print("Press 4 for Division \n")

while True:
    user = input("Enter A Choice(1/2/3/4): ")
    if user in ('1','2','3','4'):
        num1 = int(input("Enter First Number: "))
        num2 = int(input("Enter Second Number: "))

        if user == '1':
            print(f"{num1} + {num2} = {num1 + num2}")
            print("Thanks For Usnig This Calculator")
        elif user == '2':
            print(f"{num1} - {num2} = {num1 - num2}")
            print("Thanks For Usnig This Calculator")
        elif user == '3':
            print(f"{num1} * {num2} = {num1 * num2}")
            print("Thanks For Usnig This Calculator")
        elif user == '4':
            print(f"{num1} / {num2} = {num1 / num2}")
            print("Thanks For Usnig This Calculator")
        else:
            print("Please Enter Correct Choice")
    else:
        print("Invalid") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-05T11:51:22.260

```
#1\. Create a class with the name Calculator
class Calculator:
    #2\. Declare two class variables num1 and num2
    num1=""
    num2=""
    result=""
    option=""
    #3\. Initialize the class variables num1 and num2 in constructor __init__()
    def __init__(self):
        self.num1=0
        self.num2=0
        self.result=0
        self.option=0
    #4\. Make getter and setter function for variables
    def getNum1(self):
        return self.num1
    def setNum1(self,n1):
        self.num1=n1 
    def getNum2(self):
        return self.num2
    def setNum2(self,n2):
        self.num2=n2
    def getResult(self):
        return self.result
    def setResult(self,r):
        self.result=int(r)
    def getOption(self):
        return self.option
    def setOption(self,op):
        self.option=op

    #5\. Create Main Manu function to display choices
    def mainMenu(self):
        print("==============")
        print("==CALCULATOR==")
        print("==============")
        print("Menu:")    
        print("1\. Addtion")
        print("2\. Subtraction")
        print("3\. Multiplication")
        print("4\. Division")
        print("5\. Remainer")
        print("6\. Exit")
        print("")
        self.setOption(int(input("Enter Option:")))
        self.setNum1(int(input("Enter Number1:")))
        self.setNum2(int(input("Enter Number2:")))

    #6\. Make a function Take Input
    def takeInput(self):
        if self.option==1:
            self.setResult(self.getNum1()+self.getNum2())
        elif self.option==2:
            self.setResult(self.getNum1()-self.getNum2())
        elif self.option==3:
            self.setResult(self.getNum1()*self.getNum2())
        elif self.option==4:
            self.setResult(self.getNum1()/self.getNum2())
        elif self.option==5:
            self.setResult(self.getNum1()%self.getNum2())

    #7\. Make a display function to display the output
    def display(self):
        resultOption=""
        print("")
        if self.option==1:
            resultOption="Addition"
        elif self.option==2:
            resultOption="Subtraction"
        elif self.option==3:
            resultOption="Multiplication"
        elif self.option==4:
            resultOption="Division"
        elif self.option==5:
            resultOption="Remainder"
        if self.option==1 or self.option==2 or self.option==3 or self.option==4 or self.option==5:
            print(resultOption+":"+str(self.getResult()))
        else:
            print("Invalid Input")
        self.option=input("press x to exit, 0 to continue...")
        if self.option=="x":
            pass
        else:
            self.option=int(self.option)

#8\. Create Object of Calculator Class  
c1=Calculator()
op=0

#9\. Get option in while loop until x is pressed
while(c1.getOption()!='x'):
    #10\.    Call display menu, input and display functions to display the output
    c1.mainMenu()
    c1.takeInput()
    c1.display() 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-02-27T23:58:39.043

我有一个替代你的代码。用户可以输入如下内容：8*6/4-3+3，这仍然有效。非常紧凑，如果您希望命令退出：

```
while True: 
```

只需添加：

```
if(y == "end" or y == "End"):
    break 
```

它会退出“while True:”

代码（Python v3.3.0）：

```
while True:
    x = "x="
    y = input(" >> ")
    x += y
    exec(x)
    print(x) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-09-15T11:59:05.747

这是 python 中的简单代码，用于创建与 Python 终端相同的计算器。

```
number = input("")
print number 
```

# java - Java-Oracle 模糊搜索

> ID：15109401
> 
> 赞同：-4
> 
> 时间：2013-02-27T10:13:09.680
> 
> 标签：java, sql, oracle, oracle10g, fuzzy-search

我们希望有一个更“模糊”的方法：

例如，如果我们输入

旅游天空

快速洞察

沃尔玛

数据库应该能够检索以下内容：

中航信科技

快速洞察

沃尔玛

这就是谷歌的工作方式。

我已经用我自己的逻辑尝试了很多，比如`regex`等等。但没有任何效果。

目前在我们的应用程序中，我们正在根据精确加工进行搜索....但是现在我们希望它更加模糊，可以说我的数据库中是否有一些完整的公司名称

例如。

中航信科技

然后如果我搜索“旅行天空”，那么它应该返回 TravelSky 等等。目前我们正在进行精确加工。

如果需要更多示例，请告诉我。

我在 oracle doc 提到的执行这种搜索的 oracle 10g 中找到了 CONTAINS。我还在尝试..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:00:36.100

您没有详细说明如何使用模糊搜索。对于 Oracle Text 的替代方案，您可以考虑使用 apache [Solr](http://lucene.apache.org/solr/) (lucene)。它具有全文搜索、分面、聚类、地理空间搜索，并且根据我的经验，它具有很强的可扩展性。如果从前端使用，它也有方便的 REST api。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:16:21.397

查看专为您的问题设计的**Oracle Text包。**当我已经为 Oracle 数据库支付了高价时，我会犹豫是否要自己构建此功能。

[http://docs.oracle.com/cd/B10501_01/text.920/a96517/cdefault.htm](http://docs.oracle.com/cd/B10501_01/text.920/a96517/cdefault.htm)

# jsf - 支持 Bean 方法对输入文本框变空

> ID：15109403
> 
> 赞同：0
> 
> 时间：2013-02-27T10:13:12.223
> 
> 标签：jsf

我面临一个输入文本字段行为的特殊问题。我使用模板创建了一个 jsf 页面。最终加载的页面有一个标题来显示徽标和菜单。内容页面有一个选项字段和一个输入文本框（h:inputText），并有commandLink（搜索）组件。当我在输入文本字段中输入任何值并单击 Search(commandLink) 时，我正在进行 ajax 调用以获取在输入文本字段中输入的值并下拉选择，该方法与支持中的 ajax 调用相关联bean 被调用，但两个字段都为空值。当我首先加载主页然后单击菜单以加载该特定页面时，就会发生这种情况。但是，当我通过在浏览器地址字段中提供 url 直接加载页面或使用菜单导航到其他页面并返回到该特定页面时，一切正常，因为我在支持 bean 中获取了这两个值。我找不到解决方法，需要您的帮助。

以下是实现方面的一些要点。1.主模板中只提到了一个h:form，页面加载时找不到多个form。2.菜单导航是通过重定向而不是前进完成的。3\. 支持 bean 在 vi​​ewScoped 中，导入 javax.faces.bean.ViewScoped 和托管 bean 注释的相同包。4\. 页面中没有提到immediate=true 属性的任何jsf 组件。5.输入文本框和选择下拉有公共getter/setter方法。6\. 我使用 mojarra JSF 库 API 作为主要 JSF 组件，weblogic 10.3.6 作为应用服务器，IE v8 作为浏览器。

## 1.JSF页面代码片段

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core" xmlns:o="http://openfaces.org/">

<ui:composition
template="/resources/common/templates/rsaMasterTemplate.xhtml">
<ui:define name="content">
    <f:view>
<h:outputScript name="js/security.js" library="common" />
<h:panelGroup>
<table width="50%">
    <tr class="scrollerTable border">
        <td><h:outputLabel styleClass="fieldLabelText"
                value="#{message['application.common.label.searchBy']}" /></td>
        <td class="cellSpacer"></td>
        <td><h:selectOneMenu id="selOneMenu_SearchCriteria"
                styleClass="entryfieldText"
                value="#{urlMaintenanceManagedBean.selectedSearchCriteria}">
                <f:selectItems
                    value="#{urlMaintenanceManagedBean.searchCriteriaList}" />
            </h:selectOneMenu></td>
        <td class="cellSpacer"></td>
        <td><h:inputText id="iptTxt_SearchValue"
                styleClass="entryfieldText" size="30"
                value="#{urlMaintenanceManagedBean.searchValue}"></h:inputText>
        </td>
        <td class="cellSpacer"></td>
        <td><h:commandLink styleClass="buttonOrange">
                <f:ajax event="click"
                    execute="selOneMenu_SearchCriteria iptTxt_SearchValue"
                    render="panGrp_UrlSearchResults"
                    listener="#{urlMaintenanceManagedBean.search}" />
                <span>#{message['application.common.button.search']}</span>
            </h:commandLink></td>
        <td class="cellSpacer"></td>
        <td><h:commandLink styleClass="buttonOrange"
                onclick="clear('iptTxt_SearchValue')">
                <span>#{message['application.common.button.clear']}</span>
            </h:commandLink></td>
    </tr>
</table>
</h:panelGroup> 
```

## 2.背豆法

```
public void search(AjaxBehaviorEvent event) {

    // TODO Temporary hard coding. To be removed once the value passing to
    // bean gets resolved.
    System.out.println("selectedSearchCriteria= " + selectedSearchCriteria);
    System.out.println("SearchValue= " + searchValue);

    // reset urlList
    if (urlList != null && !urlList.isEmpty()) {
        urlList = null;
    }
    // Call to service layer for search operation starts here
    }
    public String getSelectedSearchCriteria() {
    return selectedSearchCriteria;
}

public void setSelectedSearchCriteria(String selectedSearchCriteria) {
    this.selectedSearchCriteria = selectedSearchCriteria;
}

public String getSearchValue() {
    return searchValue;
}

public void setSearchValue(String searchValue) {
    this.searchValue = searchValue;
} 
```

上面的 SOP 行为具有 getter/setter 方法的字段提供空值，并在单击“搜索”commandLink 时分配给该字段。

寻找您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T12:21:14.490

我认为您只是缺少`<h:form>`字段周围的标签。没有它，给予`execute=xy`是无用的，因为没有可以执行的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:16:35.410

我自己对 JSF 还是很陌生，但考虑到还没有答案，我想为什么不试一试。

根据[https://stackoverflow.com/a/3681276/2277482](https://stackoverflow.com/a/3681276/2277482) 如果您将支持 bean 中的属性分配给 ah:inputtext 如果在页面上更改，它将在支持 bean 中更新。因此您可以检查它是否以这种方式工作没有输入文本上的ajax。

对于 h:selectOneMenu 我发现[https://stackoverflow.com/a/13327653/2277482](https://stackoverflow.com/a/13327653/2277482)。因此，如果您想在没有 primefaces 的情况下实现该答案，请尝试 f:ajax。

我暂时无法对此进行测试，所以我只是盲目地给出建议。

会评论这个，但我的代表太低了:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T12:05:47.420

为你的 bean 创建一个构造函数

```
public beanname() { } 
```

# android - 如何在列表视图中设置 json 解析数据，然后在其中添加搜索功能

> ID：15109406
> 
> 赞同：3
> 
> 时间：2013-02-27T10:13:16.767
> 
> 标签：android, android-4.0-ice-cream-sandwich

我是 android 新手，想在 listview 中解析 json 数据，然后在功能上添加搜索，但我不知道如何添加搜索。

Java 类是：

```
public class AndroidJSONParsingActivity extends ListActivity {

// url to make request
private static String url = "http://10.0.2.2/quick/punk.php";

// JSON Node names
private static final String TAG_CUSTOMER = "Customer";
private static final String TAG_CUSTOMER_CODE = "customer_code";
private static final String TAG_CUSTOMER_NAME = "customer_name";
private static final String TAG_CUSTOMER_MOBILE = "customer_mobile";
private static final String TAG_CUSTOMER_ADDRESS = "customer_address";

// contacts JSONArray
JSONArray Customer = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        Customer = json.getJSONArray(TAG_CUSTOMER);

        // looping through All Contacts
        for(int i = 0; i < Customer.length(); i++){
            JSONObject c = Customer.getJSONObject(i);

            // Storing each json item in variable
            String customer_code = c.getString(TAG_CUSTOMER_CODE);
            String customer_name = c.getString(TAG_CUSTOMER_NAME);
            String customer_mobile = c.getString(TAG_CUSTOMER_MOBILE);
            String customer_address = c.getString(TAG_CUSTOMER_ADDRESS);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_CUSTOMER_CODE, customer_code);
            map.put(TAG_CUSTOMER_NAME, customer_name);
            map.put(TAG_CUSTOMER_MOBILE, customer_mobile);
            map.put(TAG_CUSTOMER_ADDRESS, customer_address);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_CUSTOMER_CODE, TAG_CUSTOMER_NAME,TAG_CUSTOMER_MOBILE,TAG_CUSTOMER_ADDRESS}, new int[] {
                    R.id.code, R.id.name,R.id.mobile,R.id.address});

    setListAdapter(adapter);

}

} 
```

xml文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<EditText 
    android:id="@+id/search"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
<!-- Main ListView 
     Always give id value as list(@android:id/list)
-->

<Button
    android:id="@+id/button1"
    android:layout_width="50dip"
    android:layout_height="wrap_content"
    android:text="+" />

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

我想要的是，当用户在文本框中键入内容时，应该在列表中的数据中搜索它。谁能告诉我如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:21:59.320

使用自定义列表适配器在列表视图中显示项目。在顶部显示一个editText。对于自定义列表视图[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)。

用于搜索列表视图。 [在 android 中的 EditText 上键入时如何过滤 ListView 数据](https://stackoverflow.com/questions/1645209/how-can-i-filter-listview-data-when-typing-on-edittext-in-android/13172848#13172848)。

对于自定义搜索 [，在自定义 listview 上实现搜索](https://stackoverflow.com/questions/6383943/implement-search-on-a-custom-listview/13110015#13110015)。我建议您使用过滤器搜索自定义列表视图。

编辑

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">
<EditText 
 android:id="@+id/search"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"/>
<ListView
android:id="@+id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

MainActivity 类

```
 public class MainActivity extends Activity {
 ArrayList<NewData> mTemp=new ArrayList<NewData>();
 ArrayList<NewData> mPostingData=new ArrayList<NewData>();
 ArrayList< NewData> mOri = new ArrayList<NewData>();

    Myadapter ma;
    EditText search;

    NewData nd;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            for(int i = 0; i < 20; i++)
            {
                 // Add your Json Parsed Data here
                // each item from json add it to hash map in NewData class. Arraylist of 0 contains jsondata of customer1
                nd=new NewData();

                nd.newDatacus.put(NewData.TAG_CUSTOMER_CODE, "i"+i);
                nd.newDatacus.put(NewData.TAG_CUSTOMER_NAME, "a"+i);
                nd.newDatacus.put(NewData.TAG_CUSTOMER_MOBILE, "number");
                nd.newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS, "address");
               mOri.add(nd);
            }

         ma= new Myadapter(MainActivity.this);
       mPostingData=mOri;
       mTemp=mOri;
        ListView lv= (ListView) findViewById(R.id.list);
        lv.setAdapter(ma);
        search= (EditText) findViewById(R.id.search);
         search.addTextChangedListener(new TextWatcher() {

             public void onTextChanged(CharSequence s, int start, int before, int count) {
                             ma.getFilter().filter(s);
                             ma.notifyDataSetChanged();

             }

             public void beforeTextChanged(CharSequence s, int start, int count,
                 int after) {

               }

               public void afterTextChanged(Editable s) {
               }
              });

    }

class Myadapter extends ArrayAdapter
{
    LayoutInflater mInflater;

     public void setData(ArrayList<NewData> mPpst) {   
            mPostingData = mPpst;//contains class items data.
        }

     @Override
     public Filter getFilter() {
         return new Filter() {
             @Override
             protected void publishResults(CharSequence constraint, FilterResults results) {
                 if (results != null && results.count >= 0) {
                     setData((ArrayList<NewData>) results.values);//if results of search is null set the searched results data
                 } else {
                     setData(mOri);// set original values
                 }

                 notifyDataSetInvalidated();
             }

            @Override
             protected FilterResults performFiltering(CharSequence constraint) {
                 FilterResults result = new FilterResults();
                 if (!TextUtils.isEmpty(constraint)) {
                     constraint = constraint.toString().toLowerCase();
                     ArrayList<NewData> foundItems = new ArrayList<NewData>();
                     if(mTemp!=null)
                     {
                     for(int i=0;i<mTemp.size();i++)
                     {

                         if (mTemp.get(i).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString().contains(constraint)) {
                             System.out.println("My datas"+mTemp.get(i).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString());
                             foundItems.add(mTemp.get(i));

                         }
                         else
                         {

                         }
                     }
                     }
                     result.count = foundItems.size();//search results found return count
                     result.values = foundItems;// return values
                 } 
                 else
                 {
                     result.count=-1;// no search results found
                 }

                 return result;
             }
         };
     }
    public Myadapter(Context context) {
        super(context, 0);
        mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        // TODO Auto-generated constructor stub
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mPostingData.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
         ViewHolder holder;

            if(mOri == null ){

                return null;
            }
                    // When convertView is not null, we can reuse it directly, there is no need
                    // to reinflate it. We only inflate a new View when the convertView supplied
                    // by ListView is null.
                    if (convertView == null) {
                        convertView = mInflater.inflate(R.layout.list, null);
                        convertView.setLayoutParams(new AbsListView.LayoutParams(LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));
                        // Creates a ViewHolder and store references to the two children views
                        // we want to bind data to.
                        holder = new ViewHolder();
                        holder.t1=(TextView) convertView.findViewById(R.id.textView1);
                        holder.t2 = (TextView) convertView.findViewById(R.id.textView2);
                        holder.t3 = (TextView) convertView.findViewById(R.id.textView3);

                        convertView.setTag(holder);
                    } else {
                        // Get the ViewHolder back to get fast access to the TextView
                        // and the ImageView.
                        holder = (ViewHolder) convertView.getTag();
                    }
                    holder.t1.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString());
                    holder.t2.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_NAME).toString());
                    holder.t3.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_MOBILE).toString());
                    return convertView;
        }
}
 class ViewHolder
 {
TextView t1,t2,t3;
}
} 
```

list.xml 要在自定义列表适配器中膨胀

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

  <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:text="TextView" />

  <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:text="TextView" />

  <TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:text="TextView" />

  </LinearLayout> 
```

NewData 类 - 将所有数据保存在 hashmap 中

```
 public class NewData {
public static final String TAG_CUSTOMER_CODE = "customer_code";
public static final String TAG_CUSTOMER_NAME = "customer_name";
public static final String TAG_CUSTOMER_MOBILE = "customer_mobile";
public static final String TAG_CUSTOMER_ADDRESS = "customer_address";

   Hashtable newDatacus=new Hashtable();

    public NewData()
    {

        newDatacus.put(NewData.TAG_CUSTOMER_CODE,new String());
        newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS,new String());
        newDatacus.put(NewData.TAG_CUSTOMER_NAME,new String());
        newDatacus.put(NewData.TAG_CUSTOMER_MOBILE,new String());
        newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS,new String());

    }
} 
```

修改以便在 for 循环中添加 json 数据。我在这里制定了搜索条件客户 ID。您可以根据需要更改此设置。此代码经过测试并且可以正常工作。希望有人可以提供更好的代码。希望这对您有所帮助。

# javascript - htmlEncode 和 htmlDecode 正在消除空格和换行符 ？有什么替代品吗？

> ID：15109407
> 
> 赞同：0
> 
> 时间：2013-02-27T10:13:17.797
> 
> 标签：javascript, jquery

我们的 Web 应用程序共享代码。为了共享正确的代码，我们使用了 htmlEncode 和 htmlDecode 如下，以便所有 htmlTag 在通过 http 协议传递时得到正确处理，如下所示

```
 htmlEncode = function (value) {
     if (value) {
         return $('<div />').text(value).html();
     }
     else {
         return '';
     }
 },
htmlDecode = function (value) {
    if (value) {
        return $('<div />').html(value).text();
    }
    else {
        return '';
    }
}, 
```

现在，如果用户在代码中提供了更多空格，它就会被转换为单个空格（这当然不是大问题）。

但是这种实现的问题是，如果用户在代码共享部分中单击**了 EnterKey**两次或三次，则不会按原样执行，但输出如下所示：

**用户输入**： ![在此处输入图像描述](../Images/ecb9b95479e8029ecdd27cad30718c13.png)

**实际输出** ![在此处输入图像描述](../Images/41ae002e2f848eef6aa01ec7c7bb32fa.png)

**预期产出** ![在此处输入图像描述](../Images/ee7d50c1df834e270c2a8ab3d5f033d0.png)

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:20:22.140

这是意料之中的，因为这正是执行 .text() 对您的价值应该产生的影响。我认为你不应该在这种情况下使用 .text

# reporting-services - 如何手动从 ReportViewerWebPart 导出 excel？

> ID：15109408
> 
> 赞同：0
> 
> 时间：2013-02-27T10:13:19.607
> 
> 标签：reporting-services, export-to-excel

我的页面中有一个 ReportViewerWebPart 实例，我需要通过代码从中获取一个 excel 文件。我怎样才能做到这一点？

ps：当访问者单击按钮时，我需要从报告中提供一个excel文件。ReportViewerWebPart 中的嵌入式菜单不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:16:52.793

您必须使用 RS Web 服务并自己编写一些代码来生成该报告。有一个接受文件类型的 Render 方法，只需提供 Excel 类型。

[http://msdn.microsoft.com/en-us/library/ms152787.aspx](http://msdn.microsoft.com/en-us/library/ms152787.aspx)

# c++ - 字符串对的最佳映射

> ID：15109409
> 
> 赞同：0
> 
> 时间：2013-02-27T10:13:19.760
> 
> 标签：c++, map, stl

我有很多字符串对，我正在寻找一种将这些对中的字符串相互映射的好方法。
假设我有*str1*和*str2*对，我需要为*str1返回**str2*和为*str2返回**str1*。 我知道我可以为此使用地图

 ***```
map<string, string> 
```

但是，如果我只是为此使用 std::map，我将需要将每个字符串存储两次作为键和值。
哪个是避免重复的最佳解决方案？是否有为此优化的特殊容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:14:44.330

使用`boost::bidirectional_map`. [http://www.boost.org/doc/libs/1_52_0/libs/bimap/doc/html/index.html](http://www.boost.org/doc/libs/1_52_0/libs/bimap/doc/html/index.html)

简单的例子

```
#include <boost/bimap/bimap.hpp>
#include <string>
#include <iostream>

int main()
{
   namespace bi = boost::bimaps;
   typedef bi::bimap<std::string, std::string> bimap;

   bimap map;
   map.insert(bimap::value_type("1", "2"));
   std::cout << map.left.at("1") << std::endl;
   std::cout << map.right.at("2") << std::endl;
} 
```

http://liveworkspace.org/code/jitNY$0***

# android - 列表视图，XML。空指针异常

> ID：15109410
> 
> 赞同：0
> 
> 时间：2013-02-27T10:13:21.227
> 
> 标签：android, xml, listview

我在这个问题上遇到了麻烦，我无法继续前进，现在卡住了将近 2 天。

这就是我想要的 照片在照片 1 下方 [http://leyth.dk/upload/server/php/files/Activity%202.png](http://leyth.dk/upload/server/php/files/Activity%202.png) [照片 1 http://leyth.dk/upload/server/php/files/picture %201.png](http://leyth.dk/upload/server/php/files/picture%201.png)

我有 json 列表，它工作正常。当我按下 --> **ITEM NUMBER X**时，它会正常启动新活动，它会显示具有给定 lat 和 long 值的地图

但我也想通过列表获取更多值到 2.activity 中。

我可以想象的是我对 XML 文件有问题，可能是膨胀或类似的东西。我放了一些代码，所以你可以看到它。

```
 ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_LAT, TAG_LNG, TAG_POSTAL }, new int[] {
                    R.id.name, R.id.email, R.id.mobile });
    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();      
            String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

    --> here is fail, it cant find textview1 --> gives null pointer exception 
--> its different xml file. And here is the error appers
            String mandag = ((TextView)  view.findViewById(R.id.textView1)).getText().toString();
            String tirsdag = ((TextView) view.findViewById(R.id.textView2)).getText().toString();
            String onsdag = ((TextView) view.findViewById(R.id.textView3)).getText().toString();
            String torsdag = ((TextView) view.findViewById(R.id.textView4)).getText().toString();
            String fredag = ((TextView) view.findViewById(R.id.textView5)).getText().toString();
            String lordag = ((TextView) view.findViewById(R.id.textView6)).getText().toString();
            String sondag = ((TextView) view.findViewById(R.id.textView7)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), dk.mitaffald.maps.MainActivity.class);
            in.putExtra(TAG_LAT, name);
            in.putExtra(TAG_LNG, cost);
            in.putExtra(TAG_Company, description);

            in.putExtra(TAG_MONDAY, mandag);
            in.putExtra(TAG_TUESDAY, tirsdag);
            in.putExtra(TAG_WEDNESDAY, onsdag);
            in.putExtra(TAG_THURSDAY, torsdag);
            in.putExtra(TAG_FRIDAY, fredag);
            in.putExtra(TAG_SATURDAY, lordag);
            in.putExtra(TAG_SUNDAY, sondag);

            Log.d(TAG, "Leyth Days = Mandag : " + mandag +"     Onsdag : " + fredag);

            startActivity(in);

        }
    }); 
```

这是日志猫

```
 02-27 10:55:28.441: E/AndroidRuntime(10980): FATAL EXCEPTION: main
    02-27 10:55:28.441: E/AndroidRuntime(10980): java.lang.NullPointerException
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at dk.mitaffald.main.LocationBased$1.onItemClick(LocationBased.java:188)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at android.widget.ListView.performItemClick(ListView.java:3763)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1936)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at android.os.Handler.handleCallback(Handler.java:587)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at android.os.Handler.dispatchMessage(Handler.java:92)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at android.os.Looper.loop(Looper.java:123)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at android.app.ActivityThread.main(ActivityThread.java:3691)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at java.lang.reflect.Method.invokeNative(Native Method)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at java.lang.reflect.Method.invoke(Method.java:507)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
    02-27 10:55:28.441: E/AndroidRuntime(10980):    at dalvik.system.NativeStart.main(Native Method) 
```

**Textview1 的 XML 文件**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<fragment 
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="300dp"
class="com.google.android.gms.maps.SupportMapFragment" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<TextView
    android:id="@+id/textView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<TextView
    android:id="@+id/textView7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:23:40.357

据我了解，

您的列表项行的**list_item.xml**文件不包含 textView1 、 textView2 .. 等。 TextViews。

我认为这些 TextViews 来自您的 Activity 的 xml 布局文件。

如果是，那么您必须在您的 Activity 或 Fragment中定义这些**TextView** ，并直接使用 in of ，`onCreate()``onItemClick()``ListView`

**NullPointerException**的问题因为，

```
String mandag = ((TextView)  view.findViewById(R.id.textView1)).getText().toString(); 
```

您从视图中引用**textView1**`NPE` ，它是列表项行的视图，因此它会导致。（并且 View 意味着`list_item.xml`不包含`textView1`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:36:21.890

通过使用 getText().toString() 您正在获取文本。请检查文本是否为空。

# jboss7.x - jmeter SocketException 执行负载测试时连接重置

> ID：15109413
> 
> 赞同：1
> 
> 时间：2013-02-27T10:13:26.590
> 
> 标签：jboss7.x, jmeter, java-7

我正在使用 jmeter 对我们部署了 webapp 的远程 jboss7.1 服务器运行一些 http 负载测试

它运行顺利，直到大约 200/300 个请求成功，然后 jmeter 开始返回下面发布的错误，我不得不说在服务器端 jboss 日志中没有错误。

我的环境：

*   客户：

    ```
    Windows 7
    jmeter 2.5 with 5 threads ramp up 5 sec
    java version "build 1.7.0-b147 64 bit" 
    ```

*   服务器：

    ```
    CentOS release 6.3 (Final)
    open jdk "1.7.0_09-icedtea"
    jboss7.1 
    ```

我怀疑这是客户问题，但不确定如何解决，有什么提示吗？

jmeter返回的错误是：

```
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149)
at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:110)
at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:264)
at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:98)
at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:252)
at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:281)
at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:247)
at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:219)
at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:298)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:645)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:262)
at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.followRedirects(HTTPSamplerBase.java:1308)
at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.resultProcessing(HTTPSamplerBase.java:1379)
at org.apache.jmeter.protocol.http.sampler.HTTPAbstractImpl.resultProcessing(HTTPAbstractImpl.java:244)
at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:334)
at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:999)
at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:985)
at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:381)
at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:274)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:24:40.183

The solution just found was to change the parameter in jmeter's Http Request defaults: I had to change HTTP request implementatnion to `Java` instead of `HttpClient4`.

Don't know why this helps but it works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:45:14.233

您正在将 HttpClient 4 与 JMeter 2.5 一起使用。

这是此版本在 2.5.1 中修复的已知问题。

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=51863](https://issues.apache.org/bugzilla/show_bug.cgi?id=51863)

您使用的是旧的 jmeter 版本，当前版本是 2.9，我强烈建议您仔细遵循 JMeter 版本。

# java - 仅复制 3D 数组的前 2 个维度

> ID：15109415
> 
> 赞同：4
> 
> 时间：2013-02-27T10:13:29.120
> 
> 标签：java, arrays, multidimensional-array

我将以下 3D 数组设置为两个程序状态之间的缓冲区。

```
private boolean state [][][] = new boolean [20][20][2]; 
```

我正在尝试复制所有内容

```
state[0-19][0-19][1] 
```

到

```
state[0-19][0-19][0] 
```

目前我正在使用 for 循环，效果很好，但我不禁觉得有更好的方法。我知道我可以只使用两个单独的二维数组并做一个简单的复制，但我有兴趣看看是否有任何解决方法。

电流回路：

```
for (int i=0;i<20;i++){
        for (int j=0;j<20;j++){
            state[i][j][0]=state[i][j][1];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:26:01.323

有时您可以用 替换内部循环`System.arraycopy`，这样会更快。但不是在你的内存布局中，我相信。

如果可能，请考虑更新引用，而不是复制数组。回想一下，java 中的“多维”数组实际上是数组的数组。

尤其，

```
 boolean[] tmp = multi[0];
 multi[0] = multi[1];
 multi[1] = tmp; 
```

*以接近零的成本*交换两个数组引用。*这比复制然后覆盖旧值要快得多*。*但有时你需要一个副本（如果你不覆盖旧值），那么你不能这样做。*

 *请注意，您不应该盲目地这样做：

```
 multi[0][0] = 1;
 multi[1] = multi[0];
 multi[1][0] = 0;
 System.err.println(multi[0][0]); 
```

将 print `0`，因为 now`multi[0]`和`multi[1]`指向同一个嵌套数组，你应该使用过。

```
 multi[1] = multi[0].clone(); 
```

请注意，克隆也不*深*，因此`multi.clone()`将指向与`multi`. Java 中没有内置的深度克隆或深度数组复制，无论哪种方式，您都需要使用循环。

*但是同样，如果您想将第二个元素复制到很多数组*中的第一个元素，这些都不会起作用。这是您的内存布局的问题。

回想一下你的数据结构在内存中的样子：

```
 boolean[][][] -> boolean[][] -> boolean[]{ 0, 1 }
              \               \> boolean[]{ 0, 1 }
               \> boolean[][] -> boolean[]{ 0, 1 }
                              \> boolean[]{ 0, 1 } 
```

您想*在每个数组中复制一个元素*。它们可以*遍布您的内存*（每个`boolean[]...`都是它自己的对象！），因此无法使用原语来加速 - 数据是分散的。如果可能的话，也许**考虑改变你的内存布局**。

还要考虑*布尔*数组的替代方案。布尔值占用 1 个字节的内存，但只存储一位（请注意，这可以更快，所以它本身还不错！）。`BitSet`但有时将整个布尔数组存储在 a或 a`long`中，然后使用实际的位操作是有意义的。但是收获，有时它确实付出了代价，有时它会受到伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:39:44.000

我喜欢 nhahtdh 的重新组织维度的解决方案，但请注意，如果您复制参考，那么如果您稍后更改`state[0]`，`state[1]`将反映更改，反之亦然（请注意，这实际上可能是您想要的）。引用可以在 2 个地方访问，但只能在一个地方存储内容 - 旧的指针/引用混淆。单元测试是你的朋友:-)

如果您有一个**单**维数组，该`Arrays.copyOf()`方法可以帮助避免一些循环代码。但请记住，某个`sometype[]`对象的副本将复制对该对象的**引用**，而不是所有单个`sometype`对象。

您当然可以开始使用`.clone()`甚至序列化来获取`sometype[]`对象的“深层”副本，但是这会比嵌套循环更快地复杂。*

# python - Python中的GTK弹出菜单位置

> ID：15109425
> 
> 赞同：0
> 
> 时间：2013-02-27T10:14:05.717
> 
> 标签：python, python-2.7, pygtk, gtk3

我想将我的弹出菜单放在`GtkToggleButton`不在当前鼠标位置的下方 Gtk 弹出菜单是在`GtkToggleButton`单击时创建的。请参阅下面的示例：

我有的：

![我有的](../Images/a59fa3e1330ca67c9892426531ce7bd6.png)

我想拥有的：

![我想拥有什么](../Images/94f929ad44b5b5caff3d2b083a604557.png)

我怎样才能完成后者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:48:54.667

而不是 GtkToggleButton 您必须使用[GtkMenuButton](http://developer.gnome.org/gtk3/stable/GtkMenuButton.html)或[GtkMenuToolButton](http://developer.gnome.org/gtk3/stable/GtkMenuToolButton)：

```
"The GtkMenuButton widget is used to display a menu when clicked on."

"GtkMenuToolButton — A GtkToolItem containing a button with an additional dropdown menu." 
```

[GtkMenuButton](http://developer.gnome.org/gtk3/stable/GtkMenuButton.html)从 GTK+ 3.6 开始可用，您可以查看[文档中的演示](http://git.gnome.org/browse/gnome-devel-docs/log/platform-demos/C/samples/menubutton.py)。

# c++ - 为什么 C++ stdlib rand() 函数跨平台为同一个种子提供不同的值？

> ID：15109427
> 
> 赞同：19
> 
> 时间：2013-02-27T10:14:08.353
> 
> 标签：c++, c, random, std

我知道该`rand()`函数会根据给定的种子生成伪随机数，并且在给定的平台上，它总是会从同一个种子生成相同的数字序列，我想知道的是为什么它会给出不同的序列跨使用相同库的平台？即如何`rand()`实施？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-27T10:22:11.497

C++ 标准没有指定用于 rand() 函数的算法。

该功能由在您的系统上编写标准库的人定义：Microsoft 用于 Visual Studio 中包含的标准库，而 GNU 人员则用于与 GCC 一起打包的标准库。

您的编译器正在选择从何处获取其库，因此对于同一系统上的不同编译器，您可能有不同版本的标准库。要点保持不变：规范保证了哪些功能可用以及它们做什么；不是他们是怎么做的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T10:26:00.060

> rand() 函数应计算范围为 [0, {RAND_MAX}] 的伪随机整数序列，周期至少为 2^32。
> 
> rand_r() 函数应计算 [0, {RAND_MAX}] 范围内的伪随机整数序列。（{RAND_MAX} 宏的值应至少为 32767。）
> 
> 如果 rand_r() 以相同的初始值调用种子指向的对象，并且在连续返回和调用 rand_r() 之间未修改该对象，则应生成相同的序列。
> 
> srand() 函数将该参数用作新伪随机数序列的种子，这些伪随机数将由后续调用 rand() 返回。如果随后使用相同的种子值调用 srand()，则应重复伪随机数序列。如果在调用 srand() 之前调用了 rand()，则应生成与第一次调用 srand() 时相同的序列，种子值为 1。
> 
> rand() 函数应返回序列中的下一个伪随机数。

这就是 IEEE Std 1003.1 C 标准关于`rand()`函数应该如何表现的内容。它没有说明如何计算序列。换句话说，每个实现者都可以自由选择他们自己版本的伪随机序列生成器。

你的观察表明他们已经利用了这种自由。

*我还可能会指出，`rand()`它的一部分`<cstdlib>`或多或少是 C 标准库的副本，如果您有足够新的 C++ 编译器并且没有，那么新库将为您提供更多的灵活性和标准序列生成器依赖于 C - C++ 互操作性。*

# php - 矩阵向量乘法的更快实现【并行计算】

> ID：15109429
> 
> 赞同：0
> 
> 时间：2013-02-27T10:14:08.793
> 
> 标签：php, algorithm, parallel-processing, execution

我有这段代码执行用 php 编写的矩阵向量乘法。

这是一个片段：

```
for($i = 0; $i < sizeof($transposed_matrix); $i++) {
            $vector[$i] = 0;
            for($j = 0; $j < sizeof($new_vector); $j++) {
                $vector[$i] += ($transposed_matrix[$i][$j] * $new_vector[$j]);
            }
        } 
```

我想知道是否有任何方法可以使这段代码运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:00:25.140

PHP 数组有变慢的趋势，这是对散列机制的致敬。[PHP 数组性能](https://stackoverflow.com/questions/4904049/php-array-performance)。如果您有办法预先确定向量的大小，则可以展开循环并避免使用数组。如果您的代码是整个代码，那么这对您没有帮助，因为其中的每个项目`$transposed_matrix`只被点击一次，您可以`$vector`使用`$sum`Atze Kaputnik 概述的技术来减少点击次数。因此，您最终会将数组参数中的内容复制到局部变量，然后进行计算，然后再复制回来……这不仅会扼杀性能提升。

最后，您所能做的就是切换到一种完全不同的优化方法：JIT 编译器，如[HipHop](https://github.com/facebook/hiphop-php/wiki)或编译语言。C 中的相同循环可能会以 10 到 100 倍的速度运行，减去分叉该进程的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:20:33.497

一种优化是在之前计算`for`：

```
$size = sizeof($transposed_matrix);
$size2 = sizeof($new_vector);
for($i = 0; $i < $size; $i++) {
    $vector[$i] = 0;        
    for($j = 0; $j < $size2; $j++) {
        $vector[$i] += ($transposed_matrix[$i][$j] * $new_vector[$j]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T23:28:07.550

PHP 没有给你足够的控制来进行一些严重的优化。提议的改进可能会产生相对较小的影响，除非您将巨大的矩阵和向量相乘（在这种情况下，您首先不应该使用 PHP）。

除了预先计算大小并为计数器使用预增量（如 Tjoene 所建议的那样），在内部循环中使用一个临时变量作为总和，如下所示：

```
$sum = 0;
for ($j = 0; $j < $numCols; ++$j) {
    $sum += $matrix[$i][$j] * $vector[$j];
}
$vector[$i] = $sum; 
```

这将避免在 $vector 中多次计算正确的目标位置。

通过将矩阵数据存储在单个平面数组中而不是您使用的嵌套结构中，可能可以获得最大的性能增益。只需连接矩阵的行，您就可以使用单个索引遍历其元素，如下所示：

```
for ($i = 0, $n = 0; $i < $numRows; ++$i, ++$n)
{
    $sum = 0;
    for ($j = 0; $j < $numCols; ++$j) {
        $sum += $matrix[$n] * $vector[$j];
    }
    $vector[$i] = $sum;
} 
```

当然，如果您不必在实际乘法之前转换为此矩阵布局，这只会加快速度。

如果您不想更改矩阵布局，则可以通过`foreach`在外部循环中使用来检索矩阵的行来加快速度。但是请注意，这会按照将这些行数组添加到矩阵的顺序遍历行集！如果矩阵和向量之间的顺序不同，结果将全是错误的。所以，可能不是那么可靠的事情，因为它很容易打破......

哦，你总是可以尝试部分展开循环。

# android - 在android中显示标签时出错

> ID：15109434
> 
> 赞同：0
> 
> 时间：2013-02-27T10:14:22.847
> 
> 标签：android, listview, tabs

我正在处理选项卡，每个选项卡都显示一个列表视图

我的代码如下：（我只显示第一个选项卡的代码）任何人都可以帮助我哪里出错了吗？

我的XML文件如下

```
<TabWidget
    android:id="@android:id/tabs"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<FrameLayout
    android:id="@android:id/tabcontent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/tab1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingTop="60dp" >

        <ListView
            android:id="@+id/pcards_list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
        </ListView>
    </LinearLayout>
</FrameLayout> 
```

我的 MAIN.XML 如下

IT 没有显示任何错误，但是当我在模拟器上运行它时程序仍然崩溃

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost mtabhost =(TabHost)findViewById(R.id.tabHost);
        mtabhost.setup();

        TabSpec spec1 = mtabhost.newTabSpec("Tab 1");
        spec1.setContent(R.id.tab1);
        spec1.setIndicator("Personal Cards");

        ListView  pcards_list= (ListView)findViewById(R.id.pcards_list);
        ArrayList<String> pcards_arraylist = new ArrayList<String>();

        ArrayAdapter<String> adapter1= new  ArrayAdapter<String(this,android.R.layout.simple_list_item_2,pcards_arraylist);
        pcards_list.setAdapter(adapter1);

        mtabhost.addTab(spec1);

    }
} 
```

请帮帮我！

任何人都可以为我提供一个很好的关于标签的教程以及使用具有列表视图的片段的标签吗？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:19:44.297

这是一个很好的教程：[http](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/) ://android.codeandmagic.org/2011/07/android-tabs-with-fragments/ 另请查看：[http ://thepseudocoder.wordpress.com/2011/10/04/android-tabs -片段方式/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:20:46.623

我从 Travis (84 - 86) 学习了教程中的选项卡。不确定它是否真的有帮助，而你之前没有做过其余的事情。

[http://thenewboston.org/watch.php?cat=6&number=84](http://thenewboston.org/watch.php?cat=6&number=84)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:24:04.943

***主要的.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <ListView
                    android:id="@+id/myList"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent" >
                </ListView>
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

***AndroidTabActivity.java***

```
public class AndroidTabActivity extends TabActivity {

    ListView mList;

    String[] myContacts = { "Anirudh", "Sonia", "Raj", "Sachin" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mList = (ListView) findViewById(R.id.myList);

        ArrayAdapter<String> myAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, myContacts);

        mList.setAdapter(myAdapter);

        TabHost tabHost = getTabHost();

        // Tab for Contact
        TabSpec contactspec = tabHost.newTabSpec("Contact");
        // setting Title for the Tab
        contactspec.setIndicator("Contact");
        contactspec.setContent(R.id.tab1);

        // Tab for Song
        TabSpec songspec = tabHost.newTabSpec("Song");
        songspec.setIndicator("Songs");
        Intent songIntent = new Intent(this, SongActivity.class);
        songspec.setContent(songIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(contactspec); // Adding contact tab
        tabHost.addTab(songspec); // Adding song tab

    }
} 
```

![输出](../Images/cdffa41501609335446543656440584c.png)

通过这种方式，您可以创建选项卡并设置适当`Activity`的内容。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:18:33.020

你`Activity`在`AndroidManifest.xml`？？？`application`如果没有，请在标签下添加权限，如下所示：

```
 <activity android:name="MainActivity"/> 
```

# cron - 詹金斯 cron 格式

> ID：15109443
> 
> 赞同：14
> 
> 时间：2013-02-27T10:14:58.030
> 
> 标签：cron, jenkins

在 Jenkins 中，我们将 Poll SCM 计划设置为`* * * * *`. 但詹金斯建议`Do you really mean "every minute" when you say "* * * * *"? Perhaps you meant "0 * * * *"`

`* * * * *`和有什么区别`0 * * * *`吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T10:35:59.890

当然有区别！

`0 * * * *`- 是每小时，当分钟 == 0 时。（即 1:00、2:00、..）

`* * * * *`- 是每一分钟

查看[指南](https://linuxconfig.org/linux-cron-guide)以获取更多信息。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-03-02T17:16:38.763

每十五分钟（可能在 :07, :22, :37, :52）

```
H/15 * * * * 
```

每小时前半段每十分钟一次（三次，可能在 :04, :14, :24）

```
H(0-29)/10 * * * * 
```

每两小时一次，从每周日上午 9 点 45 分开始，到下午 3 点 45 分结束，每小时 45 分钟。

```
45 9-16/2 * * 1-5 
```

每个工作日上午 9 点到下午 5 点之间每两小时一次（可能在上午 10 点 38 分、下午 12 点 38 分、下午 2 点 38 分、下午 4 点 38 分）

```
H H(9-16)/2 * * 1-5 
```

除 12 月外，每月 1 日和 15 日每天一次

```
H H 1,15 1-11 * 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-16T05:39:36.413

Poll SCM 将 ping Jenkins 项目中配置的源代码，如果之前的构建中有任何新的提交，那么只有它会触发构建。如果您想通过覆盖来触发构建，请使用 Build Periodically 功能

# xml - 来自 Oracle 的嵌套 XML 结构

> ID：15109444
> 
> 赞同：0
> 
> 时间：2013-02-27T10:15:01.053
> 
> 标签：xml, oracle

使用 SQL Adapter i BizTalk，在 MS SQL DB 上调用 SQL 存储过程，我可以使用 JOIN 和 FOR XML AUTO 获得一个很好的嵌套 XML 结构，如下所示

```
<p code="DK003">
 <ii stamp="2013-01-14T10:27:38.790"value="180.702052"price="184.000000">
   <d Dividend="2.50"DividendDate="2012-03-29T00:00:00" />
 </ii>
 <ii stamp="2013-01-14T10:27:38.790"value="181.702052"price="14.000000">
   <d Dividend="2.50"DividendDate="2012-03-29T00:00:00" />
 </ii>
</p> 
```

如何在 Oracle 上获得同样漂亮的 XML 结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:25:34.507

使用 xmlelement 和相关函数，例如：

```
SELECT XMLELEMENT("Emp",
      XMLATTRIBUTES(e.employee_id AS "ID", e.last_name),
      XMLELEMENT("Dept", e.department_id),
      XMLELEMENT("Salary", e.salary)) AS "Emp Element"
   FROM employees e
   WHERE e.employee_id = 206;

Emp Element
---------------------------------------------------------------
<Emp ID="206" LAST_NAME="Gietz">
  <Dept>110</Dept>
  <Salary>8300</Salary>
</Emp> 
```

请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions220.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions220.htm) 和[http://docs.oracle.com/cd/B19306_01/appdev.102/b14259/xdb13gen.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14259/xdb13gen.htm)作为初始点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:21:51.947

BizTalk WFC 适配器不支持 XMLTypes。因此不再需要在 Oracle 上使用 XML 结构。

# caching - 在 HashMap 中存储 HTML 字符串

> ID：15109445
> 
> 赞同：0
> 
> 时间：2013-02-27T10:15:04.890
> 
> 标签：caching, hashmap

我打算使用使用 Java Maps 的缓存。基本上它是 HashMap 类型的。键将是一个字符串标识符，而值将是一个完整的 HTML。我没有看到 HTML 超过 20 kb。但是，该地图可能包含近 10000 条记录。

在这里使用 Map 有开销吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:22:29.820

HashMap 在“获取”和“设置”场景中非常有效，因为使用的键给出了位置，而不需要可怕的搜索算法。Set 也很有用，因为我们只是简单地散列键并存储。

开销以哈希映射所需的额外内存的形式出现，因此将值存储在键中。

[这个问题](https://stackoverflow.com/questions/1526596/memory-overhead-of-java-hashmap-compared-to-arraylist)的答案非常详细地解释了你想要什么。

# jsf - 允许用户选择包含小时但没有分钟的完整日期

> ID：15109446
> 
> 赞同：0
> 
> 时间：2013-02-27T10:15:05.733
> 
> 标签：jsf, primefaces, calendar

我有一个要求，用户应该能够从日历中选择日期。我用过`<p:calendar>`PrimeFaces 的。

```
<p:calendar value="#{calendarBean.date1}" pattern="MM/dd/yyyy HH:mm" /> 
```

问题是用户不应该能够选择**minutes**。他应该只能选择时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:22:08.180

你可以用css隐藏它们

像那样

```
.ui_tpicker_minute_label{
    display:none;
}

.ui_tpicker_minute{
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T13:01:56.820

模式=“MM/dd/yyyy HH”它工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T14:00:13.997

```
<p:calendar  showOn="button"  id="idCalendar" value="#{managedBean.date}" navigator="true" pattern="MM/dd/yyyy HH">
                            <f:validateBean disabled="true" />
                        </p:calendar> 
```

使用此代码，您只能获得带有日期和小时的日历

# cocos2d-android - 什么是 plist 文件，它有什么好处？

> ID：15109447
> 
> 赞同：-2
> 
> 时间：2013-02-27T10:15:09.943
> 
> 标签：cocos2d-android

plist 属于 iPhone 但如何在 cocos2d-android 游戏引擎中使用？

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:35:31.693

plist 文件是“属性列表”文件。它们处理 Foundation 常见的集合/类型：NSDictionary、NSArray、NSString、NSNumber、NSDate、NSData。

每当您需要一些**配置**文件、一些值列表或键->值时：plist 是首选方式（plist 是数组或字典）基础类实现`NSCoding`协议，因此反序列化非常容易：

*   使用 NSArray 的`+arrayWithContentsOfFile:`
*   或 NSDictionary 的`+dictionaryWithContentsOfFile:`方法。

和另一种方式，序列化：

*   `writeToFile:atomically:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:23:02.350

Plist 是一种存储结构、数据、对象和任何其他需要永久存储在设备中的信息的方式。在 iPhone 中，它主要用作 Sqlite 数据库的替代品。在 iOS 中，每个 Xcode 项目中都有 info.plist 默认文件，它包含项目设置，如 Bundle ID、支持的方向和更多元素。我们可以创建自己的 Plist，例如 User.plist，它将存储用户名和密码等。在 Cocos2D 中，plist 用于游戏设置、关卡、分数保存目的。这是一个如何从资源中保存的 plist 获取数据的示例。

NSString *path = [[NSBundle mainBundle] bundlePath]; NSString *dataPath = [path stringByAppendingPathComponent:@"GameData.plist"];

NSDictionary *infoDict = [[NSDictionary dictionaryWithContentsOfFile:dataPath]retain];

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T10:27:25.290

plist 和 nsDictionary 是一样的，如果我没记错，那么 NSDictionary 就是 plist 的替代品。

所以使用 NsDictionary，两者的生命周期是相同的，但是读取 plist 和写入 plist 是耗时而不是 NSDictionary。

# actionscript-3 - 如何查找为元素定义了哪些样式

> ID：15109457
> 
> 赞同：0
> 
> 时间：2013-02-27T10:16:08.183
> 
> 标签：actionscript-3, apache-flex, styles, flex4.5

我试图弄清楚如何获得为元素（确切地说是皮肤组件）定义的所有样式属性的定义，但我似乎找不到任何可靠的方法来做到这一点。

是否有一些本机方法返回***实例***而不是`String`选择器的合并样式声明？

**UPD：示例**

示例 CSS 将类似于：

`.a { someProperty: "someValue"; }`

然后，类“a”被应用到某个元素上，比如说`s|Button`，有皮肤的元素。皮肤还有一个名为 的属性`someProperty`，它应该是 CSS 样式声明中的“自动填充”，但为了做到这一点，该类必须检查为其定义的所有属性并尝试将值应用于相应的实例属性。

现在，我要解决的问题是**获取**特定实例的已定义属性列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:25:02.697

如果我理解正确，您需要两种设置属性值的方法来设置皮肤。并且，如果存在与皮肤中的属性同名的样式属性，则应该分配样式属性的值。

一种方法是创建一个外观方法，该方法检查是否存在具有特定名称的样式属性（即，应用了该属性的样式包含该属性）。它可能看起来像这样：

```
private function checkProperties(properties:Array)
{
    for each (var property:String in properties)
        if(this.hasOwnProperty(property) && getStyle(property))
            this[property] = getStyle(property);
} 
```

稍后，您可以在皮肤调度其“初始化”事件时调用此方法：

```
<s:Skin initialize="checkProperties(["someProperty", "someProperty2", "someProperty3"])" /> 
```

祝你有美好的一天！如果您需要更多详细信息，请告诉我们。

# django - Django 找不到静态文件

> ID：15109459
> 
> 赞同：2
> 
> 时间：2013-02-27T10:16:13.860
> 
> 标签：django, django-templates

我是 django 的初学者。我阅读了文档和其他很多答案。但是，不幸的是无法弄清楚问题所在。我正在使用 django 1.4 和开发服务器。

这就是我的 css 和 img 文件在 html 中的链接方式：

```
 <link rel="stylesheet" type="text/css" href={{ STATIC_URL }}style.css />
 <img src={{ STATIC_URL }}1.gif /> 
```

我的目录设置：

```
 project
    -manage.py
    -project
    -app
        -static
        -models.py
        -views.py
        -tests.py 
```

我的设置文件：

```
 STATIC_ROOT = ''
  STATIC_URL = '/static/'
  STATICFILES_DIRS = ()
  STATICFILES_FINDERS = (
'django.contrib.staticfiles.finders.FileSystemFinder',
'django.contrib.staticfiles.finders.AppDirectoriesFinder',
 ) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:29:48.777

根据您的操作系统，将您的 STATIC_ROOT 设置为静态目录的路径。Django 不知道在哪个目录中可以找到您的静态文件。

例如：

```
STATIC_ROOT = '/path/to/project/app/static/' 
```

来自 Django 文档：

```
STATIC_URL : URL to use when referring to static files located in STATIC_ROOT. 
```

# ruby-on-rails - 从外部页面（骨干网和 phonegap）使用时，rails json api 返回 406 http 错误

> ID：15109460
> 
> 赞同：0
> 
> 时间：2013-02-27T10:16:15.280
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, cordova, backbone.js

我已经构建了一个 rails 3 应用程序。这个应用程序有一个 json API。我开发了一个调用 API 的 html+javascript Backbone UI (Jquery ajax)。一切正常。

现在，我不想在 Phone Gap 中使用这个 html+js。当我使用 chrome 测试应用程序时，没有安全性（chromium-browser --allow-file-access-from-files --disable-web-security）我从 API 收到 406 错误。

我已经进行了一些测试，当我将“.json”添加到 url 时，问题就解决了，但是，这在骨干网内部并不容易管理。

有人遇到过同样的错误吗？

更新解决方案位于：[带有远程 Rails 服务器的 BackBone 客户端](https://stackoverflow.com/questions/9241045/backbone-client-with-a-remote-rails-server)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:21:22.600

这个问题已经存在，您可以在以下位置找到遮阳篷：

[带有远程 Rails 服务器的 BackBone 客户端](https://stackoverflow.com/questions/9241045/backbone-client-with-a-remote-rails-server)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:41:36.173

您应该在 API 路由前加上这样的前缀

```
namespace :api, defaults: { format: 'json' } do
  namespace :v1 do
    get "/:param/wat" => "api#wat"
    get "/:username/skills" => "users#skills"
  end
end 
```

这`defaults: { format: 'json' }`对你有用。

现在，如果您在 /api/v1/jon/skills 中执行 http 请求（例如），您将在 JSON 中获得 Jon 的技能

# ios - 如何在 iOS 应用程序中读取 Exchange 日历属性？

> ID：15109461
> 
> 赞同：0
> 
> 时间：2013-02-27T10:16:19.463
> 
> 标签：ios, exchange-server, mapi, ekeventkit

我正在构建一个 iOS 应用程序，它将 EKEvent 项目添加到与 Exchange 服务器同步的日历中。此 Exchange 服务器将自定义属性添加到事件项。

是否有可能在 iOS 应用程序中读取 Exchange 项目的自定义属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:03:46.377

您可以使用 EWS 或 RPC 从 Exchange 邮箱中的项目读取自定义属性。

# instagram - Instagram 从 PHP 代码中获取访问令牌

> ID：15109463
> 
> 赞同：3
> 
> 时间：2013-02-27T10:16:23.143
> 
> 标签：instagram

以下 php 代码不适用于我获取访问令牌在客户端 ID 和密钥中，我已替换为我的真实客户端 ID 和密钥。

```
<?php
$client_id = 'MY CLIENT ID';
$client_secret = 'MY CLIENT SECRET';
$redirect_uri = 'http://localhost/instagram/demo.php';
$scope = 'basic+likes+comments+relationships';

$url = "https://api.instagram.com/oauth/authorize?client_id=$client_id&redirect_uri=$redirect_uri&scope=$scope&response_type=code";

if(!isset($_GET['code']))
{
    echo '<a href="'.$url.'">Login With Instagram</a>';
}
else
{
    $code = $_GET['code'];

$apiData = array(
  'client_id'       => $client_id,
  'client_secret'   => $client_secret,
  'grant_type'      => 'authorization_code',
  'redirect_uri'    => $redirect_uri,
  'code'            => $code
);

$apiHost = 'https://api.instagram.com/oauth/access_token';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $apiHost);
curl_setopt($ch, CURLOPT_POST, count($apiData));
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($apiData));
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/json'));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$jsonData = curl_exec($ch);
curl_close($ch);

var_dump($jsonData);
$user = @json_decode($jsonData); 

echo '<pre>';
print_r($user);
exit;
}
?> 
```

上面的代码总是返回 false .. 我不明白为什么这不起作用。

有人调试此代码并让我知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-04T12:03:43.433

因为它已经是 https 所以你需要把它放在你的代码上

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);  
curl_setopt($ch,CURLOPT_SSL_VERIFYHOST, false); 
```

这与您的重定向 uri 是否在本地无关。这是因为你的 curl 选项中没有设置 SSL_VERIFYPEER

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:48:25.103

好吧，您的代码存在一些问题。一方面，您的 redirect_uri 似乎是 localhost。显然，Instagram 的 localhost 是他们自己的服务器。您需要提供一个 FQDN/world 可访问的 url。

同样来自[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)的代码

```
curl_setopt($ch, CURLOPT_POST, count($apiData)); 
```

应该很简单

```
curl_setopt($ch, CURLOPT_POST, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T10:50:45.607

您的代码是正确的，但您需要更改

`$redirect_uri = 'your site addres (not localhost)';`

例子：

```
$client_id        = 'YOUR_CLIENT_ID';
$client_secret    = 'YOUR CLIENT SECRET';
$redirect_uri     = 'http://www.YOUR_SERVER.com/instagram/demo.php';
$scope            = 'basic+likes+comments+relationships'; 
```

如果您使用此更改执行此脚本，您可以获得此结果。

```
stdClass Object
(
    [access_token] => 'your_ID'.xxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    [user] => stdClass Object
        (
            [username] => 'your username'
            [bio] => 
            [website] => 
            [profile_picture] => 'your url picture profile' 
            [full_name] => 
            [id] => 'your_ID'
        )

) 
```

# php - 是否可以在服务器端运行 jQuery？

> ID：15109465
> 
> 赞同：7
> 
> 时间：2013-02-27T10:16:25.643
> 
> 标签：php, javascript, jquery, web-scraping, screen-scraping

我正在研究网页抓取并实现了 AJAX 分页，由于网站是在扩展名为 .aspx 的 asp ie 页面中开发的，因此我尝试提交分页表单以从第一页以外的其他页面获取数据，但没有成功，请看这里代码我已经使用[了从所有实现了 AJAX 分页的 asp.net 页面中抓取数据](https://stackoverflow.com/questions/14768302/scraping-data-from-all-asp-net-pages-with-ajax-pagination-implemented)，所以我的问题是如何从 php 中单击分页链接，即是否可以在服务器端运行 jQuery 或 javascript？

我知道 Node.js 可用于在服务器端运行 javascript，但不知道如何将它与 Apache 和 PHP 一起使用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-28T09:41:54.960

使用[PhantomJS](http://phantomjs.org/)与其他服务上的 HTML 页面进行交互。有这样的 PHP[库](https://github.com/jonnnnyw/php-phantomjs)。

[CasperJS](http://casperjs.org/)是一个建立在 PhantomJS 之上的库，它允许自动化一些常见的测试/脚本任务。

如果您不需要与远程页面交互，但想使用 jQuery 选择器从 HTML 中提取数据，请使用[Cheerio](https://github.com/cheeriojs/cheerio)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:20:35.253

事实上，JavaScript 可以在服务器端运行。

[节点.js](http://nodejs.org/)

但是，您在这里的解决方案是使用 AJAX 调用 PHP 脚本进行分页，因为服务器端 javascript 对这个问题没有多大意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:18:22.537

不，不可能在服务器端运行 jQuery，因为 jQuery 在用户的 Web 浏览器中运行（在 javascript 解释器内）。您可以通过 jQuery 对可以在服务器上运行代码的 PHP 脚本进行 Ajax 调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T10:23:17.737

你能做的是

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        $('ul li a').on('click',function()
        {
            var href = $(this).attr('href');

            $.ajax(
            {
                url         : href,
                data        : passData,
                dataType    : 'html'
                beforeSend  : function()
                {

                },
                success     : function(response)
                {
                    //display it as needed...
                }
            });
        });
    });

</script>

<ul>
    <li><a href="paging.aspx?page=1">1</a></li>
    <li><a href="paging.aspx?page=2">2</a></li>
    <li><a href="paging.aspx?page=3">3</a></li>
    <li><a href="paging.aspx?page=4">4</a></li>
</ul> 
```

在上面的示例中，我有四个分页链接，在该链接上单击事件我进行 AJAX 调用，然后在 AJAX 成功回调中根据您的意愿显示结果。

**但请记住，jQuery 不能在使用 Node.js 的服务器上运行。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:18:52.117

JQuery 和 Javascript 是一种客户端语言，对于分页来说，这可以很容易地使用 jQuery 来实现。

Ajax 可用于与服务器进行通信而无需页面渲染，并且可以为用户提供更好的“客户端”体验。您可以使用 Ajax 连接到服务器并使用 jQuery 执行从服务器返回的操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T10:20:15.267

我认为使用 ajax 可以轻松完成分页操作。否则，如果您真的想使用服务器端 js 。然后尝试[Node.js](http://nodejs.org/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-26T08:10:13.477

我试图这样做，这很痛苦。

我的建议（在 2020 年），特别是如果你使用 React，是使用这个：[https](https://cheerio.js.org/) ://cheerio.js.org/ 。

# cmd - chmod 在 Windows 7 上不起作用

> ID：15109468
> 
> 赞同：2
> 
> 时间：2013-02-27T10:16:40.897
> 
> 标签：cmd, chmod

chmod 在 Windows 7 上不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:21:47.323

`chmod`是一个 Unix 命令，它在 Windows 上不起作用。您需要使用 Windows 等价物，例如[cacls](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cacls.mspx?mfr=true)或[xcacls](http://technet.microsoft.com/en-us/library/cc781299%28v=ws.10%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:23:30.317

尝试使用适用于 Windows 7 的 Icacls。正如凯文已经说过的那样，chmod 适用于 unix .. PHP chmod 在 Windows 7 中不起作用

# c++ - 将 int 转换为 const wchar_t*

> ID：15109469
> 
> 赞同：20
> 
> 时间：2013-02-27T10:16:46.747
> 
> 标签：c++

正如标题所示，我想知道将 a 转换`int`为 a的最佳方法`const wchar_t*`。实际上我想使用该`_tcscpy`功能

```
_tcscpy(m_reportFileName, myIntValue); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T10:36:13.800

由于您使用的是**C 方法**（我假设这`m_reportFileName`是一个*原始*C`wchar_t`数组），您可能只想**`swprintf_s()`**直接考虑：

```
#include <stdio.h>  // for swprintf_s, wprintf

int main()
{
    int myIntValue = 20;
    wchar_t m_reportFileName[256];

    swprintf_s(m_reportFileName, L"%d", myIntValue);

    wprintf(L"%s\n", m_reportFileName);
} 
```

在更现代的**C++ 方法**中，您可以考虑使用`std::wstring`而不是原始`wchar_t`数组和[**`std::to_wstring`**](http://msdn.microsoft.com/en-us/library/ee404765%28v=vs.110%29.aspx)进行转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T10:45:25.473

在`C++11`：

```
wstring value = to_wstring(100); 
```

前`C++11`：

```
wostringstream wss;
wss << 100;
wstring value = wss.str(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T10:19:53.673

这不是“转换”。这是一个两步过程：

1.  使用宽字符将数字格式化为字符串。
2.  在调用中使用字符串的地址。

第一件事可以使用 eg 来完成[`StringCbPrintf()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647510%28v=vs.85%29.aspx)，假设您正在构建启用宽字符。

当然，您可以选择将字符串直接格式化为`m_reportFileName`，从而完全无需进行复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-23T06:27:51.470

如果使用 wstring，可以考虑以下：

```
 int ValInt = 20;
  TCHAR szSize[20];

_stprintf(szSize, _T("%d"), ValInt);

wstring myWchar;
myWchar = (wstring)szSize; 
```

# ruby-on-rails - 如果模型为空，Rails 应用程序将重定向到另一个模型

> ID：15109471
> 
> 赞同：0
> 
> 时间：2013-02-27T10:16:50.567
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, logic

我有一个我正在尝试构建的小应用程序我希望用户能够在模型中存储权重和`Weight`模型中的目标`Goal`。虽然每周都会要求用户输入新的体重，但他们只会在首次进入应用程序时或体重小于或等于当前目标的任何后续时间被要求输入目标。

在这个应用程序的第一次迭代中，为了了解 MVC 和 REST 模式，我希望简单地将用户重定向到`weight#new`他们将填写权重的页面，然后`goal#new`如果目标记录为空白，则将用户重定向到该页面（首次注册应用程序时）或当前最新体重值低于或等于最新记录中的最新目标值的任何其他情况。

我的问题是我将如何在控制器中设置此逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:24:39.557

那应该很容易。像这样的东西：

```
def some_action
  # ... do stuff
  if redirect_to_goal?
    redirect_to new_goal_path
  else
    redirect_to some_thing_else_path
  end
end

def redirect_to_goal?
   current_user.goals.empty? || any_other_condition      
end 
```

# exchange-server - 使用多个 FIX 网关的好处

> ID：15109473
> 
> 赞同：0
> 
> 时间：2013-02-27T10:16:51.657
> 
> 标签：exchange-server, financial, fix-protocol

嘿，我注意到一些场所使用多个网关来执行不同的活动，例如一个用于订单路由的网关和另一个仅用于市场数据的网关。

这样做有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:01:20.260

基本上，这两个角色有完全不同的要求，很容易在逻辑上分离出两个连接的处理。

*   **市场数据**连接通常是非常高流量的，并且主要是单向的。由于它没有订单流量，因此大大减少了对日志的需求。如果市场数据连接出现问题，这没什么大不了的——只需重新启动它并继续交易。无论如何，您在停机期间错过的任何信息都是过时的信息。

*   **订单路由**连接是时间敏感的双向流量。您需要记录几乎所有内容，以防以后需要审核。如果连接中断，您可能需要在恢复时验证您的订单和程序状态（已完成/已取消的订单等）。

在我从事的项目中，我们将有一个 MD 组件和一个 OR 组件。这两个连接允许我们将处理程序分成两组有点独立的逻辑。MD 组件将相关数据存储在一个公共位置，OR 组件将引用该位置。（这个公共位置可能是一个外部数据库，或者它可能只是一些共享内存。）MD 组件将很少或没有日志记录，而 OR 将记录所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:18:31.820

无论如何，您都不想将所有事情都推过去，如果失败了，一切都会失败。首先，它为您提供稳健性，如果一个失败，其他人可以继续。您可以平衡负载，一些用户连接到一个，其他用户连接到另一个。如果出现故障，您可以轻松地重新路由用户。在我工作的地方，它们通常有一个消息总线，所有网关都将它们的消息转储到该总线上，并读取所有发往它们的消息。它使我们可以灵活地添加尽可能多的网关，而不是随心所欲，而是在需要时，或者在发生故障时切换到备用网关。

# c# - C#/Access - 无法绑定到数据源上的属性或列名称。参数名称：dataMember

> ID：15109475
> 
> 赞同：0
> 
> 时间：2013-02-27T10:17:02.193
> 
> 标签：c#, database

我正在尝试使用 C# 和 Access 数据库创建一个程序，并通过在每次添加时创建新行来连接并将值添加到表中，现在我遇到了这个问题，我找不到适用于我的程序的解决方案. 这是我的代码的一部分

```
 public string connstr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=E:\College\Year 2\Structured Programming\Go Greece Ver.1\Database\GoGreece.accdb;Persist Security Info=False;";

        private void savebutton_Click(object sender, EventArgs e)
        {
            {

                OleDbConnection hotelConn = new OleDbConnection(connstr);
                InitializeComponent(); 
                OleDbCommand hotelComm = new OleDbCommand();
                OleDbDataAdapter hotelAdapter = new OleDbDataAdapter();
                DataTable hotelData = new DataTable();
                DataSet ds = new DataSet();

                hotelConn.Open();
                hotelComm.Connection = hotelConn;
                hotelComm.CommandText = " INSERT INTO Hotels (Name) VALUES ('" + nametext + "')";
                int temp = hotelComm.ExecuteNonQuery();
                if (temp > 0)
                {
                    nametext.Text = null;
                    MessageBox.Show("Successfully added into database");
                }
                else
                {
                    MessageBox.Show("Records were not added into the database");
                }
                hotelConn.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:58:43.677

在我的脑海中，我认为它应该是这样的：-

```
string connstr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=E:\College\Year 2\Structured Programming\Go Greece Ver.1\Database\GoGreece.accdb;Persist Security Info=False;";

using (OleDbConnection con = new OleDbConnection(connstr))
        {
            string SQlstring = string.Format("INSERT INTO [Hotels] (Name) VALUES ('{0}')", nametext);
            OleDbCommand cmd = new OleDbCommand(SQlstring, con);

            try
            {
                con.Open();
                int result = cmd.ExecuteNonQuery();
            }
            catch(OleDbException Ex)
            {
                MessageBox.Show(Ex.Message);
            }
        } 
```

# php - Redbean 找不到数据类型

> ID：15109478
> 
> 赞同：1
> 
> 时间：2013-02-27T10:17:08.833
> 
> 标签：php, mysql, redbean

我有一个从 Redbean 生成的名为“聚合”的表，其中包含以下列：

```
id      - INT(11)
user_id - TINYINT(3)
code    - VARCHAR(255)
sample  - INT(11) 
```

但是当我“退出”这段代码时：

```
$aggregates = json_encode(Orm::exportAll(Orm::find('aggregates')));
exit($aggregates); 
```

从 php，我得到这个 json 输出：

```
[
 {"id":"1",  "user_id":"1", "code":"baffdadsad", "sampleWeight":"100"},
 {"id":"2",  "user_id":"1", "code":"prova",      "sampleWeight":"900"},
 {"id":"3",  "user_id":"1", "code":"asdsa",      "sampleWeight":"120"},
 {"id":"4",  "user_id":"2", "code":"grana",      "sampleWeight":"89"},
 {"id":"14", "user_id":"1", "code":"get",        "sampleWeight":"1001"},
 {"id":"15", "user_id":"1", "code":"saghf",      "sampleWeight":"232"}
] 
```

**id**和sampleWeight字段应该是**numbers ，为什么****Redbeans**不认识呢？我能做些什么？

 **在 Redbean 文档[http://redbeanphp.com/import_and_export](http://redbeanphp.com/import_and_export) 我发现了这部分文本：

> 从 3.3 版开始：只导出一组特定的 bean 类型： R::exportAll( $beans, true, $filters ); 这里 $filters 包含要导出**的类型列表。**

可能是 exportAll 我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:41:54.493

我的问题可以通过使用 JSON_NUMERIC_CHECK[预定义常量](http://www.php.net/manual/en/json.constants.php)来解决，如下所示：

```
$json_aggregates = json_encode($array, JSON_NUMERIC_CHECK); 
```

这将输出带有数字而不是字符串数字的正确 json，顺便说一下，我不确定是否是最好的解决方案......**

# python - 如何使用键数组从另一个字典创建小字典？

> ID：15109490
> 
> 赞同：0
> 
> 时间：2013-02-27T10:17:47.337
> 
> 标签：python

我有一个简单的字典`{'a': 1, 'b': 2, 'c': 3, 'd': 4 }`和键列表：`['a', 'd']`.

构造仅包含列表中的键的 dict 对象的更好方法是：`{'a': 1, 'd': 4}`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:18:37.820

```
d = {'a': 1, 'b': 2, 'c': 3, 'd': 4 }
l = ['a', 'd']

new_d = {k:d[k] for k in l} 
```

`new_d`就是现在`{'a': 1, 'd': 4}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:17:20.317

```
d = {'a':1, 'b':2, 'c':3, 'd':4}
c = ['a', 'b']
new_d = {}

for key in c:
    new_d[key]= d[key] 
```

# php - 如何跨多个域重用代码？

> ID：15109494
> 
> 赞同：3
> 
> 时间：2013-02-27T10:17:54.363
> 
> 标签：php, yii, reusability

我只是使用 Yii 框架构建了一个 CMS 框架。我想将 CMS 部署到多个域。

```
/home/root/www/domain1.com
/home/root/www/domain2.com
/home/root/www/domain3.com
/home/root/www/domain4.com 
```

我想重用 css 文件和受保护文件夹下的所有文件，这样一旦我更新 css 和受保护文件夹中的文件，所有域都应该反映更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:29:05.957

是的，Yii 支持这一点。事实上，这就是我配置一些网站的方式。

（当然，这是基于将您的所有站点都放在同一台服务器上。但我看到 Evan 有这个。这在跨服务器时不起作用。）

**首先**，它需要您将代码移出网络根目录并移入文档根目录。见[这里](http://www.yiiframework.com/wiki/116/moving-project-code-outside-of-webroot-plus-multiple-project-support/)。

**其次**，它要求你使用 Yii AssetsBase。看[这里](http://www.yiiframework.com/wiki/148/understanding-assets/)和[那里](http://www.yiiframework.com/wiki/311/assetmanager-clearing-browser-s-cache-on-site-update/)。我发现资产管理很容易配置（但使用起来轻而易举）。这就是我最终的结果：

在 components/Controller.php 中包括以下内容：

```
 /**
     * @var registers which js, css, images have been published
     * See: http://www.yiiframework.com/wiki/311/assetmanager-clearing-browser-s-cache-on-site-          update/
 */

    private $_assetsBase;

    public function getAssetsBase()
    {
            if ($this->_assetsBase === null) {
                Yii::app()->assetManager->newDirMode = 0755;        
                Yii::app()->assetManager->newFileMode = 0644;        

                    $this->_assetsBase = Yii::app()->assetManager->publish(
                            Yii::getPathOfAlias('application.assets'),
                            false,
                            -1,
                            defined('YII_DEBUG') && YII_DEBUG
                    );
            }
            return $this->_assetsBase;
    } 
```

以上假设您的 JS、CSS 和图片位于以下位置：

```
protected/assets/js/mobiscroll-2.3.custom.min.js
protected/assets/css/mobiscroll-2.3.custom.min.css
protected/assets/img/einstein.png 
```

然后在您的视图中，按如下方式调用您的资产：

```
<?php
$cs->registerScriptFile($this->assetsBase.'/js/mobiscroll-2.3.1/js/mobiscroll-2.3.custom.min.js');
$cs->registerCssFile($this->assetsBase.'/js/mobiscroll-2.3.1/css/mobiscroll-2.3.custom.min.css');
?>

<img src="<?php echo $this->assetsBase ?>/img/einstein.png"> 
```

最后，在对 JS 或 CSS 进行更改后，您将希望在所有用户的浏览器中强制刷新缓存。您可以通过触摸（原始）资产目录来执行此操作。这将迫使 Yii 重新散列（已发布）资产目录。随后，您的 JS & CSS 将在所有用户的浏览器中刷新。做这样的事情：

```
$command = 'touch /path/to/your/website/protected/assets';
exec ( $command.' 2>&1',  $output , $result  );
if ($result === 0) {
    $message = 'Assets have been pointed; a new directory should now be hashed';
} else {
    $message = 'Looks like something went wrong. Assets not pointed?';
} // END if 
```

# java - Jenkins：用子项目构建项目的最佳方式

> ID：15109495
> 
> 赞同：5
> 
> 时间：2013-02-27T10:17:57.957
> 
> 标签：java, jenkins

我们在同一个 SVN 存储库中有一个包含两个子项目的项目。例如：

```
svn://ip/svn/ trunk/subproject1
svn://ip/svn/ trunk/subproject2 
```

项目的构建应包括两个子项目的构建结果。为了使我们的构建更快，我想仅在分别更改 SVN 的情况下运行 subproject1 的构建（在 svn://ip/svn/trunk/subproject1 中）。同样对于子项目2

最好的方法是什么？我可以用一份工作来完成吗？在这种情况下我应该如何定义构建触发器？

或者我需要定义 3 个工作：每个子项目一个或每个项目一个？

任何帮助将不胜感激！最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T10:43:07.517

使用 Jenkins 可以通过多种方式实现此目的。

1.  顾名思义，多 SCM 插件将允许在单个作业中包含多个源存储库[。](https://wiki.jenkins-ci.org/display/JENKINS/Multiple+SCMs+Plugin)

2.  您可以定义`n`相互触发的作业（即相互依赖）。您可以在`Build Triggers`>下找到它`Build after other projects are built`。

3.  还有一个主作业控制下游作业的选项。您将在`Post-build Actions`>下找到此选项`Build other projects`。

关于构建触发，您可以使用该`poll SCM`选项。这[不是最有效的方法](http://kohsuke.org/2011/12/01/polling-must-die-triggering-jenkins-builds-from-a-git-hook/)，但您的选择可能会受到 SVN 而不是 Git 的限制。

`aggregate downstream test results`我刚刚注意到您还提到了整理所有构建的结果 - 您可以通过单一工作或使用`Post-build Actions`.

最终，您需要明确您的构建策略。在我看来，如果对任一子项目进行了更改，您想确保没有任何损坏。我不确定 multi-SCM 插件如何处理轮询多个存储库的概念，因此您可能需要将其考虑在内。

我想我给了你几个尝试的选择；让我知道你是怎么办的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-20T07:57:42.290

这是一个旧线程（18 个月），但几天前 Jenkins 多作业插件发布了一个新版本，其中包含一个选项，该选项允许仅当自上次构建以来 scm 发生更改时才触发构建：

这是**仅当 SCM 更改时的构建**。

无论此选项如何，还有一个选项可以强制构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T12:02:09.200

还有一个可用于 Jenkins的[Multijob 插件。](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin "多任务插件")您可以使用它在一个主项目中分层运行您的子项目构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T03:45:31.330

我不知道如何使用 SVN 进行设置，但是使用**GIT**，您可以在源代码管理步骤中设置**附加行为。**

选择**Polling ignores commits in certain paths**，然后设置**Included Regions**。此设置可以过滤同一 git 存储库中的其他子项目提交。

还要在**Build Triggers**步骤上进行设置，勾选**Poll SCM**并将**Schedule**留空。

如果要设置自动部署，您可能需要在 git 存储库端设置**web hook 。**

Jenkins 版本是 2.32 和[Jenkins Git 插件](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin)

# asp.net - 我们可以使用“Eval”动态启用或禁用 ASP.NET 中的控件吗

> ID：15109498
> 
> 赞同：0
> 
> 时间：2013-02-27T10:18:15.033
> 
> 标签：asp.net, eval

```
 <asp:CheckBox ID="cbIsSignificantRegistration" runat="server" 
                AutoPostBack="True" />

   <asp:TextBox ID="txtSignificantOtherName" ReadOnly='<%# cbIsSignificantRegistration.Checked %>' runat="server" class="tblTxt" MaxLength="100"></asp:TextBox>

   <asp:Button ID="btnSignificantOtherSearch" runat="server" Enabled='<%# cbIsSignificantRegistration.Checked %>' OnClick="Button1_Click" Text="Search" /> 
```

参考上面的代码，如果用户选中了 CheckBox，我想启用 TextBox 和 Button，反之亦然。而且我想在不触发 CheckChanged 复选框的情况下做同样的事情。

是否可以在 ASP.NET 中使用 Eval，就像我在上面的代码中使用它一样。

注意：我已经使用了上面的代码，但在我的情况下它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:22:53.790

ASP.NET 是服务器端，因此这只会在页面加载时设置启用状态。之后的任何用户交互都不会被触发。

最好的解决方案是使用 Javascript 触发事件以启用/禁用文本框。

使用 jQuery：

```
$(function(){
    $(".chk").change(function(){
        $(".txt").attr("disabled", !$(this).is(":checked")); 
    });
});

<asp:CheckBox ID="cbIsSignificantRegistration" runat="server" 
                AutoPostBack="True" CssClass="chk" />

<asp:TextBox ID="txtSignificantOtherName" runat="server" class="tblTxt txt" MaxLength="100"></asp:TextBox> 
```

***现场演示：http:** [//jsfiddle.net/VnCpP/](http://jsfiddle.net/VnCpP/)*

# excel - Excel 2013：一张纸上的多个数据透视表（下方）彼此

> ID：15109507
> 
> 赞同：3
> 
> 时间：2013-02-27T10:18:37.897
> 
> 标签：excel, powerpivot

我需要在同一个 Excel 表中创建具有多个数据透视表的仪表板，一个在另一个之下。

问题是，当数据透视表刷新时，它可能会更长（更多行），因此它会发出警告，低于它需要的行将被覆盖。

我想知道如何配置 Excel 数据透视表以在数据透视表中添加行而不覆盖以下内容。

我已经在 Microsoft Techdays 2013 上看到过一个例子，但我不记得方法了。（在 Excel 2013 中有一个复选框可以启用）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T17:53:19.340

每当我每个工作表有多个数据透视表时，我要么

1) 限制数据透视表的行数，例如我有报告需要滚动 6 个月的值，所以我总是有 6 行，但每个月的值都会提前。在这种情况下，您需要使用 VBA 来“选中”和“取消选中”显示的值。使用在此 Google 搜索中找到的方法来执行此操作：

[https://www.google.com/search?q=find+last+used+row#q=excel+pivot+table+vba+to+filter+row+values](https://www.google.com/search?q=find+last+used+row#q=excel+pivot+table+vba+to+filter+row+values)

2) 每次刷新时，从头开始重新创建每个数据透视表，通过删除现有数据透视表相应地定位每个数据透视表，然后从上到下重新创建数据透视表。对于此方法，您需要确定哪一行是数据透视表中的最后一行，以便您可以在其下方重新创建下一行。使用诸如 Google 搜索中的方法来查找数据透视表的最后一行：

[https://www.google.com/search?q=find+last+pivot+table+row](https://www.google.com/search?q=find+last+pivot+table+row)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T14:55:33.573

我最近遇到了这个问题，并构建了以下内容。当然，要让它工作，必须满足先决条件，原则上两张表确实适合一张纸。我要做的是在两个表之间建立足够的空间（=行），并在刷新后隐藏表之间留下的行。所以它确实需要 VBA，例如可以在 PivotTable_Update 事件上执行。

```
Private Sub hideRowsBetweenListObjects(sheetName As String)
Dim tblRowPosition1 As Integer
Dim tblNrOfRows1 As Integer
Dim tblRowPosition2 As Integer
Dim tblNrOfRows2 As Integer

'Initialize
Application.ScreenUpdating = False

With Worksheets(sheetName).ListObjects(1)
    tblRowPosition1 = .Range.Row
    tblNrOfRows1 = .Range.Rows.Count
End With

With Worksheets(sheetName).ListObjects(2)
    tblRowPosition2 = .Range.Row
    tblNrOfRows2 = .Range.Rows.Count
End With

With Worksheets(sheetName)
    If tblRowPosition1 < tblRowPosition2 Then
        .Range(.Cells(tblRowPosition1 + tblNrOfRows1, 1), .Cells(tblRowPosition2 - 4, 1)).EntireRow.Hidden = True
    ElseIf tblRowPosition2 < tblRowPosition1 Then
        .Range(.Cells(tblRowPosition2 + tblNrOfRows2, 1), .Cells(tblRowPosition1 - 4, 1)).EntireRow.Hidden = True
    End If
End With 
```

结束子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-17T20:09:07.693

如果您使用的是专业版的 excel，您可以使用 powerview。创建仪表板。Wenn 使用 powerview 可以限制数据透视表使用的空间。

有关更多信息，请参见以下链接：
[如何激活 powerview](https://www.teachucomp.com/use-power-view-excel-2013/)

[微软powerview教程](https://support.office.com/en-us/article/tutorial-create-amazing-power-view-reports-361b1fca-4429-42a2-94a2-e4d5f3e7d170)

[excel powerview 结合sharepoint](https://www.dotnetcurry.com/sharepoint/853/sharepoint-server-bireports-power-view-excel)

# objective-c - 使用适用于 iOS 的 Google 地图 SDK 时出现“无法制作完整的帧缓冲区”错误

> ID：15109508
> 
> 赞同：9
> 
> 时间：2013-02-27T10:18:42.583
> 
> 标签：objective-c, google-maps-sdk-ios

搜索这个问题只给了我关于 opengl 东西的帖子，我对此一无所知。

在我的 Storyboard 上，我有 1 个视图，我在其中放置了另一个稍小的 UIView 对象作为我的地图的容器。这工作正常，根本没有多少代码。我将 UIView 的类设置为`GMSMapView`. 我按住 CTRL 并拖动它来创建一个到相应 viewController 的出口。在此之后，我创建`GMSCameraPosition`一个特定位置。我将`self.mapView`作为出口的 设置为`[GMSMapView mapWithFrame:CGRectZero camera:camera];`camera 是我指定的相机位置。

这似乎可行，应用程序启动时没有错误，地图显示在我创建的 UIView 中，但是，相机位置不是我指定的位置。而且我知道该位置是有效的，因为如果我使用`self.view`而不是`self.mapView`地图显示在整个屏幕上的正确位置。

在日志中我得到了错误`Failed to make complete framebuffer object 8cd6`，正如我所说，关于这个的帖子对我来说毫无意义，我不知道这是什么问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T12:31:05.097

我想知道是否可能是因为您使用`CGRectZero`. 我认为 using`CGRectZero`意味着当视图是视图控制器的根视图时使用，这意味着它将被调整为屏幕的完整大小。也许你需要设置一个大小，例如：

```
[GMSMapView mapWithFrame:CGRectMake(0, 0, 300, 300) camera:camera]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T06:03:17.390

对我来说，这可以让地图工作/加载正确的坐标，但仍然会引发 8cd6 错误。设置：Xcode 4.6.1 iOS 6.1 使用情节提要

我在主视图/视图控制器中有一个视图。

确保属性选项卡下的 UIView（将成为地图的子视图）->class = GMSMapView 并链接到下面的属性 *mapView

你的视图控制器.h：

```
#import <UIKit/UIKit.h>
#import <GoogleMaps/GoogleMaps.h>
@interface YourViewController : UIViewController

//other @properties
@property (strong, nonatomic) IBOutlet GMSMapView *mapView;//linked to storyboard

@end 
```

你的视图控制器.m：

```
#import "YourViewController.h"
#import <GoogleMaps/GoogleMaps.h> 
@interface YourViewController()
@end

/*.. ..other setup code ..*/

-(void)viewDidLoad{
    [super viewDidLoad];
    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683 longitude:151.2086 zoom:10];
    self.mapView.camera = camera;
} 
```

8cd6 错误与框架/边界有关（显然）。如果您尝试 initWithFrame，则不会调用（或设置？）某些东西。加载视图挂起，然后默认到伦敦附近的地方。我没有为此解决方案编辑 setMapView，我只是跳过了设置边界并让情节提要来处理。

仍然希望有人找到解决 8cd6 错误的修复程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:53:12.837

我也一直遇到这个问题。我的解决方案不是很优雅，但它有效。首先，@sythnesize 你在 viewController.m 中的插座（@synthesize mapView = _mapView;）。然后编写一个自定义设置器：

```
- (void)setMapView:(GMSMapView *)mapView {
    if (!mapView) {
        mapView = [[GMSMapView alloc] initWithFrame:CGRectZero];
    }
    _mapView = mapView;
} 
```

这仍然会给您看到您看到的错误，但是然后在 viewDidLoad（或在视图加载后将调用的其他地方）方法中，设置相机：

```
self.mapView.camera = [GMSCameraPosition cameraWithLatitude:3 longitude:27 zoom:13]; 
```

一瞬间，地图会出错，但我认为用户看不到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T14:08:41.020

有一个朋友帮助过我，谢谢你的回答，但这些答案并不是我最终解决的方式。

我们使用的代码：

```
CLLocationDegrees lat = 59.34702;
CLLocationDegrees lon = 18.04053;
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:lat longitude:lon zoom:10];
[self.mapView setCamera:camera]; 
```

我们根本没有摆弄那个框架，因为看起来，视图会自动在我未指定的位置设置地图，使用它在故事板中的大小。所以我们所要做的就是像这个例子一样添加相机。这摆脱了我谈到的那个错误。

如果有人有更好的答案可以更彻底地解释这一点，那就太好了。但这行得通，只需 ctrl 拖动一个将类设置为的视图`GMSMapView`作为插座并添加我编写的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T20:30:15.863

当我继承 GMSMapView 时，这个错误出现在我面前。我基本上声明了所有的“did*”/“will*”方法，我发现willMoveToWindow和didMoveToWindow之间出现了错误。调试willMoveToWindow发现frame是(0,0,0,0)。我基本上添加了这个，错误消失了。

```
- (void)willMoveToWindow:(UIWindow *)newWindow
{
   self.bounds = self.superview.bounds ;
   [super willMoveToWindow:newWindow] ;
} 
```

# android - 无法启动接收器：使用 sms 广播接收器时出现 CLASS CAST EXCEPTION

> ID：15109510
> 
> 赞同：0
> 
> 时间：2013-02-27T10:18:42.827
> 
> 标签：android, nullpointerexception, broadcastreceiver

真正令人讨厌的部分是我的代码运行良好。现在，不知从何而来，它给了我这个错误：

```
 02-28 14:49:43.086: E/AndroidRuntime(449): FATAL EXCEPTION: main
02-28 14:49:43.086: E/AndroidRuntime(449): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.warningalert/com.example.warningalert.WarningAlert}: java.lang.ClassCastException: com.example.warningalert.WarningAlert
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.os.Looper.loop(Looper.java:123)
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-28 14:49:43.086: E/AndroidRuntime(449):  at java.lang.reflect.Method.invokeNative(Native Method)
02-28 14:49:43.086: E/AndroidRuntime(449):  at java.lang.reflect.Method.invoke(Method.java:507)
02-28 14:49:43.086: E/AndroidRuntime(449):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-28 14:49:43.086: E/AndroidRuntime(449):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-28 14:49:43.086: E/AndroidRuntime(449):  at dalvik.system.NativeStart.main(Native Method)
02-28 14:49:43.086: E/AndroidRuntime(449): Caused by: java.lang.ClassCastException: com.example.warningalert.WarningAlert
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-28 14:49:43.086: E/AndroidRuntime(449):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
02-28 14:49:43.086: E/AndroidRuntime(449):  ... 11 more 
```

我的接收方法如下：

```
public class WarningAlert extends Activity {

private SmsReceiver receiver;

public static class SmsReceiver extends BroadcastReceiver{
    final SmsManager sms = SmsManager.getDefault();

    String body = null;
    String no = "1555215556";
    String number = null;
    int i;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        // Parse the SMS.
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null)
        {
            // Retrieve the SMS.
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);

                if(msgs[i].getOriginatingAddress().equals(no))
                {
                    body = msgs[i].getMessageBody();
                    number = msgs[i].getOriginatingAddress();
                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
                Toast.makeText(context, str, Toast.LENGTH_SHORT).show();

                }
            }

                 if(no.equals(number.toString())){

                 Intent open = new Intent(context, StartAction.class);
                 open.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                 open.putExtra("body", body);
                 open.putExtra("number", number);
                 context.startActivity(open);

                 }
        }
    }

} 
```

我的清单是：-

```
<receiver android:name="com.example.warningalert.WarningAlert$SmsReceiver"
      android:enabled="true"
      android:exported="true">
<intent-filter>
    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
</intent-filter> 
```

```
 <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.VIBRATE"/> 
```

由于此代码最初运行良好，我想清单很好。

**好吧..我有问题！问题出在嵌套类上。如果我直接在类 WarningAlert 中扩展 BroadcastReceiver 并在其中包含代码，它就可以工作。但是如果我在WarningAlert 类中有一个嵌套类SmsReceiver，那么它就行不通了！知道为什么会这样吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:04:39.243

您正在初始化`number`为 null ，然后继续使用它而不检查它是否仍然为 null 。问题是，如果没有消息的原始地址等于您指定的地址，则`number`保持不变。要么初始化`number`为空字符串，要么在第 55 行尝试引用它之前检查它是否仍然为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:31:11.220

请使用此代码。

```
public void sendSMS(String phoneNumber, String message) {
    mPhoneNumber = phoneNumber;
    mMessage = message;
    PendingIntent sentPI = PendingIntent.getBroadcast(mContext, 0, new Intent(SENT), 0);
    PendingIntent deliveredPI = PendingIntent.getBroadcast(mContext, 0, new Intent(DELIVERED), 0);
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(mPhoneNumber, null, mMessage, sentPI, deliveredPI);
    Toast.makeText(mContext, "SMS Sending...", Toast.LENGTH_SHORT).show();
    // ---when the SMS has been sent---final String string = "deprecation";
    mContext.registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(mContext, "SMS sent", Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                Toast.makeText(mContext, "Generic failure", Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NO_SERVICE:
                Toast.makeText(mContext, "No service", Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NULL_PDU:
                Toast.makeText(mContext, "Null PDU", Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_RADIO_OFF:
                Toast.makeText(mContext, "Radio off", Toast.LENGTH_SHORT).show();
                break;
            }
        }
    }, new IntentFilter(SENT));
    // ---when the SMS has been delivered---
    mContext.registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(mContext, "SMS delivered", Toast.LENGTH_SHORT).show();
                break;
            case Activity.RESULT_CANCELED:
                Toast.makeText(mContext, "SMS not delivered", Toast.LENGTH_SHORT).show();
                break;
            }
        }
    }, new IntentFilter(DELIVERED));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:42:38.013

我仍然不明白问题是什么。我一起创建了一个新项目，效果很好。

# c# - 在客户端存储库 2.0 中更改为 AsTableServiceQuery()

> ID：15109512
> 
> 赞同：1
> 
> 时间：2013-02-27T10:18:48.120
> 
> 标签：c#, .net, azure, azure-storage, azure-table-storage

当使用`TableServiceContext`查询 Azure 表存储时，我会执行如下查询：

```
var entities = context.CreateQuery<TEntity>(TableName)
                      .AsTableServiceQuery()
                      .Where(condition); 
```

但这不会在新的客户端存储库 2.0 中编译：

> 方法 'AsTableServiceQuery' 没有重载需要 0 个参数。

唯一可用的方法是`AsTableServiceQuery(TableServiceContext context);`

这意味着我需要具备以下条件：

```
var entities = context.CreateQuery<TEntity>(TableName)
                      .AsTableServiceQuery(context)
                      .Where(condition); 
```

我提供了两次上下文。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T23:03:20.657

IQueryProvider 的工作方式是每个 Linq 扩展实际上都会修改表达式树并通过 CreateQuery 将其传递给提供程序本身。

（参见[http://msdn.microsoft.com/en-us/library/system.linq.iqueryprovider.aspx](http://msdn.microsoft.com/en-us/library/system.linq.iqueryprovider.aspx)）

由于您所指的实现是 WCF 数据服务，因此公开的提供程序创建了一个 DataServiceQuery 而不是 TableServiceQuery，本质上是剥离了 Azure 特定的包装器。不幸的是，DataServiceQuery 没有公开其关联的上下文，这是某些功能和某些可靠性检查所必需的。因此，最终的解决方案需要最后一个方法再次接受上下文，以确保查询被正确包装并关联到创建它的上下文。

请注意，DataServiceQuery 不支持延续，因此在查询 Azure 表时，您应该始终使用 AsTableServiceQuery(ctx) 扩展来确保执行此包装。

我还鼓励您查看 .Table 命名空间中引入的新表服务层，因为它提供了额外的灵活性、显着的性能提升，并避免了这些复杂性。请注意，TSL 当前不公开 IQueryProvider。

希望这可以帮助，

乔

# c - valgrind 内存在点数组中丢失

> ID：15109516
> 
> 赞同：1
> 
> 时间：2013-02-27T10:18:53.513
> 
> 标签：c, malloc, valgrind

我正在使用 Valgrind 调试我的 c 程序。我收到的错误是：

```
==2765== 8,000 bytes in 2 blocks are definitely lost in loss record 1 of 1
==2765==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==2765==    by 0x404123: main (mycode.cpp:352) 
```

这是第 352 行附近的代码：

```
int **matrix;
matrix = (int**)malloc(2*sizeof(int*));
for (i=0; i<2; i++){
    matrix[i] = (int*)malloc(size*sizeof(int)); //line 352
}
for (i=0; i<2; i++){ //inizialization
    for (k=0; k<size; k++)
        matrix[i][k] = 0;
} 
```

这是我为矩阵分配内存的方式。这有什么问题？

* * *

更新：在程序结束时，我使用了：

```
free(matrix); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:11:51.907

就像 simonc 所说，听起来您没有释放单个数组元素。

如果您使用的是支持可变长度数组的 C99 编译器或 C2011 编译器，则可以稍微简化一下并使用单个`malloc`并`free`调用如下：

```
int size;
...
int (*matrix)[size] = malloc(2 * sizeof *matrix);
...
// do stuff with matrix[i][j]
...
free (matrix); 
```

如果您使用的编译器不支持 VLA，您要么必须执行两步分配和解除分配，要么像 Darius 的回答那样分配一维数组和映射索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:23:00.153

valgrind 输出表明您正在释放`matrix`但不是它的成员。`free`每次分配都必须有一次调用：

```
for (i=0; i<2; i++) {
    free(matrix[i]);
}
free(matrix); 
```

请注意，如果您使用以下方式分配内存，则可以简化代码，避免初始化为零循环`calloc`：

```
int **matrix = malloc(2*sizeof(int*));
for (i=0; i<2; i++){
    matrix[i] = calloc(size*sizeof(int));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:24:38.970

为什么你们都坚持单独分配数组的每一行？只需制作一个大型分配器和一个 getter/setter 方法！

```
#define ARR_COLUMNS 10
#define ARR_ROWS 10

int* arr = calloc (ARR_COLUMNS * ARR_ROWS, sizeof(int));

int get(int* arr, int x, int y) {
  if (x<0 || x>= ARR_COLUMNS) return 0;
  if (y<0 || y>= ARR_ROWS) return 0;
  return arr[ARR_COLUMNS*y+x];
}

void set (int* arr, int x, int y, int val) {
  if (x<0 || x>= ARR_COLUMNS) return;
  if (y<0 || y>= ARR_ROWS) return;
  arr[ARR_COLUMNS*y+x] = val;
} 
```

通过这样做，您将：

*   为自己节省昂贵的分配和释放
*   内存碎片较少
*   简化您可能的 realloc 调用
*   确保数据被更好地缓存和访问，而没有常见的 [x][y] vs [y][x] 迭代缓存问题。

# c# - C# 试图从 rss 提要中删除文本

> ID：15109520
> 
> 赞同：0
> 
> 时间：2013-02-27T10:19:05.730
> 
> 标签：c#, rss, windows-runtime, feed

目前有这个代码：

```
 if (caseStudyImages.SelectedIndex < 0)
        {
            caseStudyImages.SelectedIndex = 0;
        }

        var item = container.Items[caseStudyImages.SelectedIndex];
        subTitle.Text = item.Title.Text;

        HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(item.NodeValue);

        doc.DocumentNode.RemoveChild(doc.DocumentNode.FirstChild);

        StringBuilder sb = new StringBuilder();
        using (StringWriter writer = new StringWriter(sb))
        {
            doc.Save(writer);
        }

        item.NodeValue = doc.ToString();       

        caseStudyImages.ItemsSource = container.Items; 
```

caseStudyImages 是屏幕上的一个翻转视图，其中包含一个图像和一个 webview 项。容器是我的联合提要项目。我正在尝试从当前选择的项目中删除第一个节点，因为它是我不想要的文本，然后在 web 视图中显示它。我将 webview 内容绑定到 DataTemplate 中的 item.NodeValue。我的问题是： item.NodeValue = doc.ToString();
我得到一个异常抛出说“方法或操作未实现”。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:26:21.923

您可以访问 HtmlDocument 类吗？检查 ToString ovveride 也许有人在那里留下了 NotImplementedException。

如果您无权访问，则不使用 ToString() 从 HtmlDocument 中获取被认为是 NodeValue 的所需数据。使用字符串格式

# android - imageView android内的可移动文本视图

> ID：15109521
> 
> 赞同：0
> 
> 时间：2013-02-27T10:19:09.370
> 
> 标签：android, draggable, textview

我正在尝试在 android 上的图像内拖动和调整大小的 textview。我能够在触摸 TextView 时拖动，但它会拖动到屏幕之外。你能帮我在图像中拖动 textview。代码在这里

```
 public void drag(MotionEvent event, View v){

    RelativeLayout.LayoutParams params = (android.widget.RelativeLayout.LayoutParams) v.getLayoutParams();

    switch(event.getAction())
    {
       case MotionEvent.ACTION_MOVE:
       {
           Log.v("touch","move");
         params.topMargin = (int)event.getRawY() - (textView.getHeight());
         params.leftMargin = (int)event.getRawX() - (textView.getWidth()/2);
        int y= (int)event.getRawY();
        int x=(int)event.getRawX();

         DisplayMetrics dm = new DisplayMetrics();
         getWindowManager().getDefaultDisplay().getMetrics(dm);
         if(params.topMargin>=0 && params.leftMargin>=0  )
             textView.setLayoutParams(params);
         break;
       }
       case MotionEvent.ACTION_UP:
       {
           Log.v("touch","up");

         params.topMargin = (int)event.getRawY() - (textView.getHeight());
         params.leftMargin = (int)event.getRawX() - (textView.getWidth()/2);

         Log.v("touch", "params.topMargin"+params.topMargin);
         Log.v("touch", " params.leftMargin"+ params.leftMargin);

         if( ( params.topMargin>=0) && (params.leftMargin>=0))

                 textView.setLayoutParams(params);

        // textView.setLayoutParams(params);
         break;
       }
       case MotionEvent.ACTION_DOWN:
       {
           textView.setLayoutParams(params);
        break;
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:46:16.477

你真的需要拖动来移动TextView吗？你可以扩展TextView，重新定义public boolean onTouch(View v, MotionEvent event)，在里面计算offsetX和offsetY，添加接口，比如OnPositionChangeListener(int offsetX, int offsetY)，让包含这个RelativeLayout的activity实现这个接口。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:14:25.257

```
private void initDragView() {
        // text view drag
        _root = (ViewGroup) findViewById(R.id.tblDragView);

        _root.addView(txtContent);
        _root.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getActionMasked()) {
                case MotionEvent.ACTION_MOVE:
                    int x = (int) event.getX() - _xDelta;
                    int y = (int) event.getY() - _yDelta;
                    int w = backgroundImageWidth;// getWindowManager().getDefaultDisplay().getWidth();
                    int h = backgroundImageHeight;// getWindowManager().getDefaultDisplay().getHeight();
                    if (x < 0 || y < 0 || x > w || y > h)
                        return false;

                    if (x > w) {

                        x = w;
                        return true;
                    }
                    if (y > h) {
                        // Log.d("TAG", "Ouch i am out side height");
                        y = h;
                        return true;
                    }

                    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                            new ViewGroup.MarginLayoutParams(
                                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                                    RelativeLayout.LayoutParams.WRAP_CONTENT));
                    if (lp.leftMargin < x && lp.topMargin < y)
                        lp.setMargins(x, y, 0, 0);
                    // txtContent.setBackgroundColor(getResources().getColor(
                    // R.color.blue));
                    txtContent.setLayoutParams(lp);

                    break;
                default:
                    break;
                }
                return true;
            }
        });

        txtContent.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getActionMasked()) {
                case MotionEvent.ACTION_DOWN:
                    _xDelta = (int) event.getX();
                    _yDelta = (int) event.getY();

                    txtContent = (TextView) v;
                    break;
                default:
                    break;
                }
                return false;
            }
        });

    } 
```

# stage3d - AGAL 闪烁和采样伪影

> ID：15109522
> 
> 赞同：0
> 
> 时间：2013-02-27T10:19:12.607
> 
> 标签：stage3d, agal

我一直在使用 AGAL 创建元胞自动机并遇到一些问题。我的代码基本上执行以下操作：

*   从用于创建纹理的位图开始。
*   调用 setTextureAt() 将纹理传递给 context3D
*   将该纹理应用到一个简单的平面
*   有一些元胞自动机魔法吗
*   渲染到后台缓冲区
*   也渲染回相同的纹理
*   重复

我通过添加 1 /（宽度或高度）来采样相邻像素。我认为 mipmap 可能会有所帮助 - 但我看不到 mipmap 生成纹理的方法。

您可以[在此处查看应用程序](http://www.flexmonkey.co.uk/willamowsky-rossler-bin-release/WillamowskyRosslerAgalDemo.html)，[源代码在此处](http://www.flexmonkey.co.uk/willamowsky-rossler-bin-release/srcview/index.html)。AGAL 代码位于*classes.WillamowskyRosslerRenderer*

该代码有效，但是当我放大时我得到了这些奇怪的人工制品：

![在此处输入图像描述](../Images/26ab8d1ac06801bb0dd56831c11b2f9e.png)

提前谢谢了，

西蒙

**更新！** *我一直在玩，人工制品和闪烁都消失了：*

*   *将纹理大小设置为 2048 * 2048*
*   *配置BackBuffer（1024,1024,16）*

*这是一种解决方法而不是修复，所以我仍在调查*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:05:03.020

耶！通过 mipmapping 修复。我没有意识到渲染到纹理会自动创建 mip 贴图，因此我可以在“tex”调用中使用适当的过滤。

此外，在这个项目中，后台缓冲区需要与纹理的纵横比相同

我在这里写了博客：http: [//flexmonkey.blogspot.co.uk/2013/03/stage3d-joys-of-mipmapping.html](http://flexmonkey.blogspot.co.uk/2013/03/stage3d-joys-of-mipmapping.html)

# java - Docx4j Permgen Space 具有 2G 和转换为 PDF 时的小文档

> ID：15109523
> 
> 赞同：1
> 
> 时间：2013-02-27T10:19:12.670
> 
> 标签：java, tomcat, tomcat7, docx4j

我们有一个 5kb 的 .docx 文件被读入 Docx4j-2.8.1，然后转换为 PDF。在单元测试中这是可行的，但是一旦部署到 Tomcat 7（实际上是 TomEE-1.6.0-SNAPSHOT）中，我们在执行 PDF 转换时会出现 Permgen 空间错误。

示例代码：

```
wordMLPackage = WordprocessingMLPackage.load(inputStream);
final PdfConversion pdfConvertor = new Conversion(wordMLPackage);
pdfConvertor.output(stream, null);
return stream.toByteArray(); 
```

inputStream 是从 .docx 文件的 byte[] 创建的。docx 文件本身是一个单页，只有 Times New Roman 中的文本和几个要点（仅供示例使用）。

堆栈跟踪如下（我已将堆大小添加到顶部的日志中）：

[https://gist.github.com/jmkgreen/5046890](https://gist.github.com/jmkgreen/5046890)

这台机器有 6GB 的 RAM，Tomcat 有以下设置：

```
set JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1536m -Xmx2048M -XX:NewSize=512m -XX:MaxNewSize=512m -XX:PermSize=1024m -XX:MaxPermSize=4096m -XX:+DisableExplicitGC -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled" 
```

我不希望看到这个错误。一些建议将不胜感激。

编辑：在调用 PDF 转换器之前，我从 MemoryPoolMXBean 中为 Perm Gen 添加了 getUsage().getMax()：82MB。

我还将 JAVA_OPTS 的 tomcat catalina.bat 文件条目减少到：

```
set JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -XX:MaxPermSize=4096m -XX:+DisableExplicitGC -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled" 
```

编辑 2：从 docx4j 切换到 XDocReport 解决了崩溃问题。可惜既没有提供特别准确的渲染......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:12:27.727

也许您的 JAVA_OPTS 没有被正确读取？以下内容就足够了：

```
set JAVA_OPTS=-XX:PermSize=256m -XX:MaxPermSize=256m 
```

# java - 在 Java Swingx 中修剪 JXDatePicker

> ID：15109525
> 
> 赞同：0
> 
> 时间：2013-02-27T10:19:22.740
> 
> 标签：java, netbeans, swingx

我正在使用 Swingx JXDatePicker 在带有 NEtBeans 的 Java 应用程序中启用日期选择。

我只需要日期，但只要从日历按钮中选择日期，我就会以这种形式将日期和时间一起格式化：Sat Apr 13 00:00:00 BST 2013

但是，我只想知道日期而不是时间。

形式如下：2013 年 4 月 13 日星期六或不包括时间在内的任何其他形式

有没有办法将默认格式修剪为只有日期。

谢谢你们。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-08-01T16:31:59.267

你可以试试这个：

```
DateFormat df = DateFormat.getDateInstance();
String fromdate = df.format(txt_fromdate.getDate()); 
```

# accordion - 打开 Accordion 的第一个选项卡

> ID：15109526
> 
> 赞同：1
> 
> 时间：2013-02-27T10:19:22.770
> 
> 标签：accordion

我在 ul > li > ul > li 列表中有一个手风琴。它有三个在页面加载时关闭的框，但我希望在页面加载时打开第一个框。以下是所有jquery代码。

```
$(document).ready(function(){
    $("#nav > li > a").on("click", function(e){
    if($(this).parent().has("ul")) {
      e.preventDefault();
    }

    if(!$(this).hasClass("open")) {
      // hide any open menus and remove all other classes
      $("#nav li ul").slideUp(350);
      $("#nav li a").removeClass("open");

      // open our new menu and add the open class
      $(this).next("ul").slideDown(350);
      $(this).addClass("open");
    }

    else if($(this).hasClass("open")) {
      $(this).removeClass("open");
      $(this).next("ul").slideUp(350);
    }
  });
}); 
```

html 是一个简单的 ul > li > ul > li 列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T14:55:10.893

如果您的菜单只有链接和子链接（没有标题），请将其放在 css 中：

```
ul#nav li:first-child ul {
  display:block;
} 
```

# c - 空集的 select() 的返回值

> ID：15109527
> 
> 赞同：2
> 
> 时间：2013-02-27T10:19:24.337
> 
> 标签：c

我有一个将套接字 fd 添加到 FD_SET 的客户端，稍后在代码中我想在我拥有的这个 FD_SET 上使用 select() 机制。如果“master” fd_set 根本不包含任何项目，那么 select() 的返回值是多少？我的“fdmax”参数是什么？0?

我需要处理这种情况，我的集合实际上是空的。我只是想知道是否可以隐式处理它，没有特殊的计数器 + if { }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:41:04.490

它会工作得很好。

Linux的[手册页](http://linux.die.net/man/2/select)指出：

> 一些代码调用 select() 时所有三个集合都为空，nfds 为零，并且非 NULL 超时作为一种相当可移植的亚秒精度睡眠方式。

因此，使用空集并没有什么奇怪的。集合可以是空的，这是它们定义的一部分。是的，你必须传递 0，因为你应该传递比最大描述符多 1 的值。

我建议为需要添加描述符的各方定义您的 API，如下所示：

```
int add_fds(FD_SET *set); 
```

并让它们返回 1 +（添加的最大描述符），如果没有按上述添加，则返回 0。

返回值可能为 0，手册页说：

> 成功时，select() 和 pselect() 返回包含在三个返回的描述符集中的文件描述符的数量（即 readfds、writefds、exceptfds 中设置的总位数）如果超时过期可能为零在任何有趣的事情发生之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T12:12:15.037

```
when u try to connect server-side, server must to accept this connect with serverfd or what ever u want to say it. Then server after the accept conneciton u, will use FD_SET(new_client_fd, &readfds). At last u will check with the FDISSET(new_client_fd, &readfds). If return true u can read the socket.

Client side after the connect(...,...,..), u can use again select. Such as

client_read_fd = connect(...,...,.. server info)
maxfd = client_read_fd +1
int a=select(maxfd, &readfds,null,null.....)

a shows u how many fds are 1 so ready to read. 
```

# encryption - 允许对加密数字执行数学运算的加密？

> ID：15109530
> 
> 赞同：0
> 
> 时间：2013-02-27T10:19:34.987
> 
> 标签：encryption

假设我有一个在线排行榜上发布的高分游戏。作弊者通过在发布之前更改内存中的分数来欺骗排行榜。

我认为一个解决方案是加密存储在内存中的数字，并且只有在向用户显示分数时才解密。将加密的分数发送到在线排行榜。

但我认为这个解决方案存在一个问题：可以对加密值进行数学运算吗？什么加密技术允许这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:20:33.587

您的用例的最大问题是密钥必须位于内存中的某个位置，以便您可以加密/解密数据，因此如果“坏”用户有足够的知识来更改内存中的高分，它不应该他也很难找到钥匙。

但是，我可能是错的，或者您的“真正”问题是是否可以对加密值执行数学运算。答案是肯定的，同[态加密](http://en.wikipedia.org/wiki/Homomorphic_encryption)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:23:46.003

您可以对分数进行加密，在需要进行数学运算的任何时候解密并加密回来；基本上，您需要在 OOP 术语中加密分数或任何其他信息的设置器和返回解密分数的获取器，因此在内存中您将始终存储加密信息

# python - 如何将来自 Python 处理程序的并发查询输入到 C 函数并将输出重定向回 Python？

> ID：15109531
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:19:41.373
> 
> 标签：python, c, multithreading, sockets

我在 Python 框架中有我的 Web 应用程序。我已经为复杂的计算编写了一个 C 函数。我想将 Python Handler 收到的查询作为参数传递给我的 C 函数，并以 HTML 格式呈现结果。

这不仅仅是从 Python 调用 C 函数，还有来自 Python 的许多并行请求，并且所有“C 线程”都应该共享一个公共资源。

如果我使用 Java，而不是 C，我会使用套接字和 Java 多线程来处理来自 Python 处理程序的并发请求。

我如何在 C 中做类似的事情？是否有用于 Python 到 C 的多线程库和套接字库？做它的标准方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:27:44.433

Python 是用 C 编写的，并且有一个非常完整[的 C-API](http://docs.python.org/2/c-api/)，您可以使用它来编写自己的 Python/C 函数。不幸的是，由于 GIL（全局解释器锁）python 永远不会有一个轻量级的多线程接口，但只要你小心返回的内容，C-API 中就没有这些限制。

如果这不吸引人，常见的替代品包括[cython](http://www.cython.org/)或[ctypes](http://docs.python.org/2/library/ctypes.html)。

> Cython 是一种语言，它使为 Python 语言编写 C 扩展就像 Python 本身一样容易。

同时

> ctypes 是 Python 的一个外来函数库。它提供 C 兼容的数据类型，并允许调用 DLL 或共享库中的函数。它可用于将这些库包装在纯 Python 中。

# jquery - renderPartial - Jquery - innerHTML

> ID：15109536
> 
> 赞同：0
> 
> 时间：2013-02-27T10:19:57.203
> 
> 标签：jquery, yii, renderpartial

我对 renderPartial 的 JS 和 CSS 注册有点生气。我有一个问题，我有以下观点：

```
<div id="data"></div>
<div id="dayData"></div> 
```

然后我在页脚中有以下脚本：

```
$.ajaxSetup({async: false});

$("#currentdate").html(date.toString('MM.yyyy'));
$.post('userDeployment/shippingDeploymentCalendar', {date: date.toString('yyyy-MM-dd'),YII_CSRF_TOKEN:token}, function(data) {
    var ni = document.getElementById('data');
    ni.innerHTML = data;
});

function calendarItemClicked(id) {
    $("table#calendar td.calendar-current-day").addClass("calendar-day");
    $("table#calendar td.calendar-current-day").removeClass("calendar-current-day");
    $("table#calendar td#"+id).addClass("calendar-current-day");

    if(id<10)
        id = "0"+id;
    $.post('userDeployment/shippingDeploymentDay', {date: date.toString('yyyy-MM')+"-"+id,YII_CSRF_TOKEN:token}, function(data) {
        $("#dayData").html(data);
        var details = $("table#calendar td#"+id+" div.calendar-text").text();
        var substr = details.split(' / ');
        $("#dayDetails").html(need+": "+substr[1]+"<br/>"+planned+": "+substr[0]);
    });
} 
```

现在，当页面加载时，一切看起来都很好，但是 JQuery 不起作用？当我更改`ni.innerHTML = data;`为`$('#data').setHTML(data);`- 然后它再次工作，但这个 HTMl 中的另一个 JQuery 函数不起作用......？

# flash - 如何从交互式 cd 创建下载文件

> ID：15109538
> 
> 赞同：0
> 
> 时间：2013-02-27T10:20:02.043
> 
> 标签：flash, interactive, cd

我有一个大学作业，我必须创建一个函数来下载文件，但我将文件放在我使用闪存创建的交互式 cd 上的一个目录中。我该怎么做？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:41:07.723

它是可用的空气。你必须使用一个[`File`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)类。

参考以下代码。

```
var dir:File = File.userDirectory.resolvePath("MyDirectory"); 
dir.createDirectory(); 
```

更多信息：[文件教程](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7d8e.html)

# javascript - Magento 附加 javascript 但未运行任何功能（消息未定义）

> ID：15109545
> 
> 赞同：0
> 
> 时间：2013-02-27T10:20:17.897
> 
> 标签：javascript, jquery, magento

我目前是第一次使用磁电机，我正在尝试专门为主页制作幻灯片。我的代码显示在源代码和我的浏览器调试器中，但所有功能都显示为未定义。

我尝试将我的 JavaScript 放在 CMS 上的页面内容中，并在外部使用 Layout Update XML 进行：

```
<reference name="head">

<action method="addItem">
<type>skin_js</type><script>Homepage.js</script>
</action>
</reference> 
```

我在 homepage.js 中的 javascript 代码是

```
var ImgNumber = 5; // the number of slides, all slides should be be named "slide" + the dedicated slide number. etc slide1, slide2, slide3, and they should be in jpg.
var CurrentSlide = 1; //the starting slide. 
var slidewidth = 983 * ImgNumber;
slidewidth = slidewidth+"px"; 
var SlideTimer;
$('#jsSlideimageholder').css('width', slidewidth);

ChangeHomeShow();

function ChangeHomeShow(){
if(CurrentSlide == ImgNumber){
CurrentSlide = 1;
}

//To great the move. 
Var MinusOurSlideNumber = CurrentSlide - 1;
var tmpSlideNumber  = MinusOurSlideNumber * 983; //will come 0 if 1

//now for the animation. 

$('#HomepagejsSlideshow').animate({
position: 'relative',
left: tmpSlideNumber,
}, 2000);

}
function StartTimer(){
//SlideTimer = setInterval(functrion() {ChangeHomeShow()}, 8000);
alert('hate magento');
}

function StopTimer(){
clearInterval(SlideTimer);
} 
```

我给定的 chrome 错误是 ChangeHomeShow() 未定义。StartTimer() 和 StopTimer() 也是如此。

有什么建议吗？

我很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:23:26.983

改变这个

```
ChangeHomeShow();

function ChangeHomeShow(){
    if(CurrentSlide == ImgNumber){
    CurrentSlide = 1;
} 
```

到

```
function ChangeHomeShow(){
    if(CurrentSlide == ImgNumber){
    CurrentSlide = 1;
}

ChangeHomeShow(); 
```

在调用它之前需要定义所有函数（或者您可以使用[http://api.jquery.com/ready/](http://api.jquery.com/ready/)）

# python - 在导入语句之前设置 pythonpath

> ID：15109548
> 
> 赞同：73
> 
> 时间：2013-02-27T10:20:21.150
> 
> 标签：python, path, pythonpath

我的代码是：

```
import scriptlib.abc
import scriptlib.xyz

def foo():
  ... some operations 
```

但 scriptlib 位于其他目录中，因此我必须将该目录包含在环境变量“PYTHONPATH”中。

无论如何，我可以先在环境变量“PYTHONPATH”中添加scriptlib目录，然后再执行导入语句，如下所示：

```
import sys
sys.path.append('/mypath/scriptlib')
import scriptlib.abc
import scriptlib.xyz

def foo():
  ... some operations 
```

如果是这样，该值仅适用于该命令提示符还是 global ？

提前致谢

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-27T10:24:43.793

这将为您的 Python 进程/实例（即正在运行的可执行文件）添加一个路径。不会为任何其他 Python 进程修改路径。另一个正在运行的 Python 程序不会修改其路径，如果您退出程序并再次运行，该路径将不会包含您之前添加的内容。你在做什么通常是正确的。

设置.py：

```
import sys
sys.path.append("/tmp/TEST") 
```

循环.py

```
import sys
import time
while True:
  print sys.path
  time.sleep(1) 
```

跑：`python loop.py &`

这将运行 loop.py，连接到您的 STDOUT，并将继续在后台运行。然后就可以运行了`python set.py`。每个都有一组不同的环境变量。观察到输出`loop.py`没有改变，因为`set.py`没有改变`loop.py`的环境。

**进口注意事项**

Python 导入是动态的，就像该语言的其他部分一样。没有进行静态链接。导入是一个可执行行，就像`sys.path.append...`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T10:36:07.707

正如[此处](http://docs.python.org/2/install/index.html#modifying-python-s-search-path)的文档中所述。

转到`Python X.Y/Lib`(Windows) 或`/usr/lib/pythonX.Y`(Linux) 并将这些行添加到`site.py`那里，

```
import sys
sys.path.append("yourpathstring") 
```

这会改变您`sys.path`，以便在每次加载时，它都会具有该值..

如此[处](http://docs.python.org/2/library/site.html)所述，`site.py`

> **该模块在初始化期间自动导入。**导入此模块会将特定于站点的路径附加到模块搜索路径并添加一些内置函数。

有关添加一些路径以`sys.path`查看[这些文档的其他可能方法](http://docs.python.org/2/install/index.html#modifying-python-s-search-path)

# android - 在 AOSP 中使用的 Android 库项目

> ID：15109551
> 
> 赞同：0
> 
> 时间：2013-02-27T10:20:24.363
> 
> 标签：android, android-source, android-library

我有安卓源代码（GB）。我想在 apk 中使用 AOSP 中的 android 库项目。我阅读了有关将 lib 项目定义为 Android.mk 的信息，但我找不到合适的答案。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:25:06.043

我认为 Remixing Android 是最好的文章，可以帮助您理解和编写自己的库。你可以在[这里](http://marakana.com/s/post/1044/remixing_android)阅读。

# magento - Magento：根据产品属性集显示html元素？

> ID：15109556
> 
> 赞同：3
> 
> 时间：2013-02-27T10:20:27.357
> 
> 标签：magento, attributes, magento-1.7, if-statement

如果产品属于某个属性集，我希望在产品页面上显示一个静态块

例如，如果我是一家时装店，并且我有一个“鞋类”属性集，我只希望静态块在属性集与“鞋类”匹配时显示在产品页面上

我找到了一些输出属性集 ID 的代码，但我想把它变成一个 else if 语句。

```
<?php

$entityTypeId = Mage::getModel('eav/entity')
                ->setType('catalog_product')
                ->getTypeId();
$attributeSetName   = 'Footwear';
$attributeSetId     = Mage::getModel('eav/entity_attribute_set')
                    ->getCollection()
                    ->setEntityTypeFilter($entityTypeId)
                    ->addFieldToFilter('attribute_set_name', $attributeSetName)
                    ->getFirstItem()
                    ->getAttributeSetId();
echo $attributeSetId;

?> 
```

有人有想法么？

G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:39:16.653

将此方法添加到`Product View Block`

（当然不是核心文件`app/code/core/Mage/Catalog/Block/Product/View.php`）：

```
public function checkAttributeSet($product = null, $attributeSetName = null)
{
    if(is_null($product) || is_null($attributeSetName)) 
        return false;

    $attributeSetModel = Mage::getModel("eav/entity_attribute_set");
    $attributeSetModel->load($product->getAttributeSetId());

    if($attributeSetModel->getAttributeSetName() == $attributeSetName) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

然后在`app/design/frontend/package/theme/template/catalog/product/view.phtml`：

```
if($this->checkAttributeSet($_product, 'Monitors')):
    echo $this->getLayout()->createBlock('cms/block')->setBlockId('monitor')->toHtml();
elseif($this->checkAttributeSet($_product, 'Footwear')):
    echo $this->getLayout()->createBlock('cms/block')->setBlockId('footwear')->toHtml();
endif; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-28T11:03:31.287

对于删除有关 StackOVERFLOW 点的有用信息的管理员>>>> 第三次用更新的材料回复此帖子，你知道，以防有人偶然发现此线程。

这是完成此任务的更新后的 magento 2.3 方式。

将代码添加到

> 模块目录/视图/前端/模板/产品/视图

```
 <?php    
        $objectManager = \Magento\Framework\App\ObjectManager::getInstance();
        $attributeSet  = $objectManager->create('Magento\Eav\Api\AttributeSetRepositoryInterface');

        $product = $objectManager->create('Magento\Catalog\Model\Product')->load($_product->getId());        
        $attributeSetRepository   = $attributeSet->get($product->getAttributeSetId());
        $attribute_set_name       = $attributeSetRepository->getAttributeSetName();

        //$attribute_set_name_arr[] = $attribute_set_name; 
        //echo '<pre>'; print_r($attribute_set_name);

        if( !empty($attribute_set_name) && $attribute_set_name == 'Rc' ) {
      		// echo $this->getLayout()
    		->createBlock('Magento\Cms\Block\Block')
    		->setBlockId('rcitems')
    		->toHtml();
        }     
        ?>
```

```
 setBlockId = The Identifier of the block in admin.
 Rc = is the attribute set
 no need to add to default.xml 
```

# jquery - 带有混合小数点数字的 Jquery Tablesorter 插件

> ID：15109559
> 
> 赞同：0
> 
> 时间：2013-02-27T10:20:36.933
> 
> 标签：jquery, tablesorter

一直在寻找如何使用 Jquery 表排序器插件（[http://mottie.github.com/tablesorter/docs/#Introduction](http://mottie.github.com/tablesorter/docs/#Introduction)）对混合数字进行排序

当我按总数排序时，它显示如下：

170.5
65.5
63.5
505
263
218
187

所以基本上atm插件只是忽略了“。” 并排在第 1705 位。对不起，如果我刚刚错过了某个地方的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:43:07.410

我会检查您的数字周围的空格，这些空格可能会诱使 tablesorter 认为它们是字符串。看[这个例子](http://jsfiddle.net/mzuN7/2/)- 当像这样运行时，它会正确排序：

```
<table id="tablesorter" class="tablesorter">
    <thead>
        <tr>
            <th>Mixed Numbers</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>170.5</td>
        </tr>
        <tr>
            <td>65.5</td>
        </tr>
        <tr>
            <td>63.5</td>
        </tr>
        <tr>
            <td>505</td>
        </tr>
        <tr>
            <td>263</td>
        </tr>
        <tr>
            <td>218</td>
        </tr>
        <tr>
            <td>187</td>
        </tr>
    </tbody>
</table>

$(function () {
    $("#tablesorter").tablesorter({
        theme: 'blue',
        widgets: ['zebra']
    });
}); 
```

# android - 使用手持设备识别左、右、上、下运动 - Android

> ID：15109560
> 
> 赞同：1
> 
> 时间：2013-02-27T10:20:38.883
> 
> 标签：android, android-sensors

我正在尝试创建一个 android 应用程序来查找带有文本到语音的手机移动方向。这有很多问题。即，它工作了一些，我没有得到准确的移动。这是我的代码

```
 @Override
public void onSensorChanged(SensorEvent event) {
    Sensor sensor = event.sensor;
     float [] values = event.values;
     synchronized (this) {
             Log.d(tag, "onSensorChanged: " + sensor + ", x: " + 
                             values[0] + ", y: " + values[1] + ", z: " + values[2]);
     if (sensor.getType() == Sensor.TYPE_ACCELEROMETER ) {
         x.setText("x"+ values[0]);
         y.setText("y"+ values[1]);
         z.setText("z"+ values[2]);

         xa=(int)values[0];// this part of code is only test to see int x and y on Activity
         ya=(int)values[1];

         ball.scrollBy(xa, ya);
         a=Integer.toString(xa);
         b=Integer.toString(ya);
         ball.scrollBy(xa, ya);
         xat.setText(a);
         yat.setText(b);

        if (trigL || trigD || trigR || trigU ) {

             int ttt = TextToSpeech.QUEUE_FLUSH;

            final long ACCEL_SENSOR_DELAY = 100; 
            long lastAccelSensorChange = 0;
            long now = System.currentTimeMillis();
            if ((now-ACCEL_SENSOR_DELAY) > lastAccelSensorChange) {
                lastAccelSensorChange = now;
              ttt = TextToSpeech.QUEUE_FLUSH;
               sensore.registerListener(MainActivity.this, accelerometer,
             trigL = false;
                 trigR = false;
                 trigU = false;
                 trigD = false;

        }
            }

         if (values[0] < -6) {
             trigL = true;
            if(tts.isSpeaking())
            {    
                 return;
            }
            else

            tts.speak("Move Left", TextToSpeech.QUEUE_FLUSH, null);

            values[0]=0;
            values[1]=0;
            return;

        } else if (values[0] > 6) {
            trigR = true;
            if(tts.isSpeaking())
            {
                 return;    
            }
            else
            tts.speak("Move Right", TextToSpeech.QUEUE_FLUSH, null);
            values[0]=0;
            values[1]=0;

            return;
        } 

        else  if (values[1] < -6) {

            trigD = true;
            if(tts.isSpeaking())
            {
                 return;
            }
            else

            tts.speak("Move Down", TextToSpeech.QUEUE_FLUSH, null);
            values[1]=0;
            values[0]=0;

            return;
        } else if (values[1] > 6) {

            trigU = true;
            if(tts.isSpeaking())
            {

                 return;

            }
            else        
            tts.speak("Move Up", TextToSpeech.QUEUE_FLUSH, null);
            values[1]=0;
            values[0]=0;

            return;
        }
     }
     }

} 
```

我正在寻找最后两周。任何建议都可以为我提供充分的帮助。

# iphone - 在谷歌 JSON 之外获取邮政编码

> ID：15109564
> 
> 赞同：1
> 
> 时间：2013-02-27T10:20:49.443
> 
> 标签：iphone, ios, objective-c, json, google-maps-api-3

我正在尝试从经度和纬度检索邮政编码。因此我使用谷歌 API。

这是我的要求。

[http://maps.googleapis.com/maps/api/geocode/json?latlng=51.04166373133121,5.580196380615234&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=51.04166373133121,5.580196380615234&sensor=true)

当您在浏览器中输入此内容时，您将看到整个 JSON。这里只是其中的一部分。

JSON文件

```
 {

      "results": [
                  {
                  "address_components": [
                                       {
                                           "long_name": "2",
                                           "short_name": "2",
                                           "types": [
                                                     "street_number"
                                                     ]
                                       },
                                       {
                                           "long_name": "Hermisweg",
                                           "short_name": "Hermisweg",
                                           "types": [
                                                     "route"
                                                     ]
                                       },
                                       {
                                           "long_name": "Opglabbeek",
                                           "short_name": "Opglabbeek",
                                           "types": [
                                                     "locality",
                                                     "political"
                                                     ]
                                       },
                                       {
                                           "long_name": "Limburg",
                                           "short_name": "LI",
                                           "types": [
                                                     "administrative_area_level_2",
                                                     "political"
                                                     ]
                                       },
                                       {
                                           "long_name": "Vlaams Gewest",
                                           "short_name": "Vlaams Gewest",
                                           "types": [
                                                     "administrative_area_level_1",
                                                     "political"
                                                     ]
                                       },
                                       {
                                           "long_name": "België",
                                           "short_name": "BE",
                                           "types": [
                                                     "country",
                                                     "political"
                                                     ]
                                       },
                                       {
                                           "long_name": "3660",
                                           "short_name": "3660",
                                           "types": [
                                                     "postal_code"
                                                     ]
                                       }
                              ]
                      }
               ]
       } 
```

我现在的问题是如何从这个 JSON 中获取邮政编码？在这个例子中，我想要 3660 作为输出。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:57:36.583

在里面试试这个`connectionDidFinishLoading`。

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *thexml=[[[NSString alloc] initWithBytes:[webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding] autorelease];

    NSError *jsonError = nil;
    id allValues = [NSJSONSerialization JSONObjectWithData:[thexml dataUsingEncoding:NSUTF8StringEncoding]
                                                   options:0
                                                     error:&jsonError];

    if(jsonError!=nil)
        NSLog(@"JsonError: %@",jsonError);

    NSArray *result = [(NSDictionary*)allValues objectForKey:@"results"];
    for(int i=0;i<[result count];i++)
    {
        NSDictionary *values = (NSDictionary*)[result objectAtIndex:i];                        

        NSArray *component = [(NSDictionary*)values objectForKey:@"address_components"];

        for(int j=0;j<[component count];j++)
        {
            NSDictionary *parts = (NSDictionary*)[component objectAtIndex:j];
            if([[parts objectForKey:@"types"] containsObject:@"postal_code"])
            {
                NSLog(@"Postal Code : %@ ",[parts objectForKey:@"long_name"]);
                break;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:34:27.643

你想要“3600”，它的键是“long_name”......所以你基本上想要“long_name”。

试试这个 ：-

假设您在 resultDict 中获得所有结果。

```
NSString *long_name = [[[[[resultDict objectForKey:@"results"] objectAtIndex:0] objectForKey:@"address_components"] objectAtIndex:0] objectForKey:@"long_name"];

NSLog(@"long_name is %@",long_name); 
```

注意：- 您必须将 0 替换为 for 循环的变量（例如“i”），将您在结果字典中获得的数组中的元素数放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:26:44.863

将此 JSON 映射到 NSDictionary 类。从这里您可以访问 address_components 数组。

使用数组 objectAtIndex 获取所需的值。

如果您需要一个全面的解决方案，请使用 github 中提供的 Abstract KVC 包装类

这些直接将 JSON 映射到模型类。

映射后，您可以通过指定这些类的 object.property 来访问它们。

# javascript - 类型错误：对象未定义

> ID：15109565
> 
> 赞同：3
> 
> 时间：2013-02-27T10:20:54.827
> 
> 标签：javascript, jquery

在下面的代码中：

```
var FilledObjectArray = function() {
    this.filledObject = {};
};

FilledObjectArray.prototype = {
        fill: function() {
            this.filledObject["one"] = 1;
        }
};

var SomeClass = function() {
    this.something = new FilledObjectArray();
};

SomeClass.prototype = {
    showContents: function() {
        this.something.fill();
        for (key in this.something) {
            $("#some-div").append(this.something[key]);
        }
    }   
};

$(document).ready(function() {

    var s = new SomeClass();

    $(".bla").each(function() {
        $(this).click(function() {
            s.showContents();
        });
    });

}); 
```

我在 Firebug 控制台中收到此错误：

```
TypeError: this.filledObject is undefined
this.filledObject["one"] = 1; 
```

我在这里做错了什么？据我了解，对象已正确初始化并且值分配是正确的。我正在 Firefox 18.0.2 版本和 Chrome 25 中对此进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:01:03.603

我在现有代码中发现了这个问题并创建了一个建议的解决方案，但是我并不完全清楚您的意图，因此它可能与您的需求略有不同，请根据需要进行修改。

**问题**

主要问题源于`FilledObjectArray`对象。这个对象的原型被分配了一个函数`fill`，然后被分配了一个`one`int 类型的属性，值为 1。所以请记住，这个对象有两个属性，一个是函数，一个是 int。

因此，当您执行此代码时...

```
for (key in this.something) {
    $("#some-div").append(this.something[key]);  //Item 1
} 
```

循环进行了两次迭代，一次用于函数`fill`，一次用于属性`one`。问题发生在`fill`键的迭代上，因为`this.something[key]`被传递给`append()`，它不能接受函数，导致 jQuery 触发函数。发生这种情况时，在`fill`函数的执行上下文中，`this`分配给`#some-div`没有`filledObject`属性的 ，导致抛出 TypeError 。我在下面评论了其中的一些内容：

```
var FilledObjectArray = function() {
    this.filledObject = {}; //Fill is an object
};

FilledObjectArray.prototype = {
        fill: function() {
            this.filledObject["one"] = 1;
        }
};

var SomeClass = function() {
    this.something = new FilledObjectArray();
};

SomeClass.prototype = {
    showContents: function() {
        this.something.fill();
        for (key in this.something) {
            $("#some-div").append(this.something[key]);  //The fill function is called here
        }
    }   
};

$(document).ready(function() {

    var s = new SomeClass();

    $(".bla").each(function() {
        $(this).click(function() {
            s.showContents();
        });
    });

}); 
```

**建议的解决方案**

```
var FilledObjectArray = function() {
    this.filledObject = [];
};

FilledObjectArray.prototype.fill = function(){
            console.log(this);
            this.filledObject[0] = 1;
};

var SomeClass = function() {
    this.something = new FilledObjectArray();
};

SomeClass.prototype = {
    showContents: function() {
        this.something.fill();
        for (var x = 0; x < this.something.filledObject.length; x++){
            $("#some-div").append(this.something.filledObject[x]);
        }
    }   
};

$(document).ready(function() {

    var s = new SomeClass();
    $(".bla").each(function() {

        $(this).click(function() {
            s.showContents();
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:24:38.680

我认为这应该可以解决您的问题

```
this.something.fill.call(this.something); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:27:39.710

我现在感觉有点笨，但这里是解决这个问题的方法：

```
SomeClass.prototype = {
    showContents: function() {
        this.something.fill();
        for (key in this.something.filledObject) {
            if (this.something.filledObject.hasOwnProperty(key)) {
                $("#some-div").append(this.something.filledObject[key]);                
            }
        }
    }   
}; 
```

我试图访问对象本身（this.something）而不是对象属性（this.something.filledObject）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:00:49.360

我想你在找这个：

```
for (key in this.something) {
  if(this.something.hasOwnProperty(key)){
    $("#some-div").append(JSON.stringify(this.something[key]));
  }
} 
```

[jsbin](http://jsbin.com/eciwor/1)

您需要使用`hasOwnProperty`来迭代对象的属性，而无需在继承属性上执行。

# php - 如果使用 PHP，则记录点击的页面

> ID：15109570
> 
> 赞同：0
> 
> 时间：2013-02-27T10:21:11.497
> 
> 标签：php

目前我在 PHP 中有一个系统，我可以在其中跟踪网站的点击次数。对于这些点击，我会跟踪 url 和/或服务器中可用的各种信息点（如 IP 地址、日期和时间）。

一个示例 url 是：/out/123/2/ 其中 123 是供应商 ID，/2 告诉我点击来源是否来自时事通讯（或其他外部，与我的网站无关的页面）。

我还想跟踪点击的来源页面。我目前使用 $_SERVER['HTTP_REFERER'] 来获取访问者的引荐来源页面，但目前访问者单击链接时并不总是填写此页面。有些实例是空白/空的。

我正在寻找一种解决方案，当访问者点击点击时捕获“最后”页面，上述带有 HTTP_REFERER 的解决方案不能 100% 工作。我一直在考虑的替代选择是：

*   使用会话 - 将最后一页存储在会话中，并在处理点击时从中读取。
*   使用 Cookie - 与会话相同，但现在使用 Cookie

当访问者在网站上时，两者都可以工作，但是当访问者不在网站上时，我会得到一个空白的结果。这将不允许我跟踪访问者的来源，以改进功能。

当访问者点击“点击退出”网址时，跟踪网站访问者的所有“最后”页面的最佳做法是什么？

# android - 如何让 ImageView 以 360 度为中心旋转？

> ID：15109571
> 
> 赞同：0
> 
> 时间：2013-02-27T10:21:12.907
> 
> 标签：android, android-animation

如何像手表中的第二根棒一样旋转图像视图？

如果秒为 30，我想获取系统时间，因此图像旋转 180 度请查看我在线程中实现的代码，但不启动和移动 imageview。

提前感谢。

```
final Handler mHandler = new Handler();

    new Thread(new Runnable() {
        @Override
        public void run() {

            while (true) {
                try {
                    Thread.sleep(1000);
                    mHandler.post(new Runnable() {

                        @Override
                        public void run() {

                            Date date = new Date();

                            second = date.getSeconds();

                            float f = second * 6;

                            Log.e("AnimatoinView", "Second:-" + second
                                    + " Degree:-" + f);

                            RotateAnimation anim = new RotateAnimation(
                                    f, 360, 36, 34);

                            mBlueCircleImageView.setAnimation(anim);

                        }
                    });
                } catch (Exception e) {

                }
            }
        }
    }).start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:31:57.987

尝试`mBlueCircleImageView.startAnimation(anim);`代替`mBlueCircleImageView.setAnimation(anim);`

# c# - 在按钮上访问 Datagrid 内的复选框单击 Asp.net

> ID：15109573
> 
> 赞同：0
> 
> 时间：2013-02-27T10:21:19.070
> 
> 标签：c#, asp.net, datagrid

```
 bool checked1 = (datagrid1.FindControl("CheckBox1") as System.Web.UI.WebControls.CheckBox).Checked; 
```

我得到对象引用未设置为对象的实例。

**我如何从 DataGrid 内部访问 CheckBox 是否选中？**

**注意：** CheckBox 位于 HeaderTemplate 内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:45:48.283

您必须遍历**[DataGridItems](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.items%28v=vs.100%29.aspx)**

```
foreach( DataGridItem di in datagrid1.Items )
    {
        CheckBox chkBx = (CheckBox)di.FindControl("CheckBox1") ;
        if( chkBx !=null && chkBx.Checked )
        {
            //isChecked
        }
    } 
```

# php - 优化php页面的加载时间

> ID：15109577
> 
> 赞同：1
> 
> 时间：2013-02-27T10:21:36.963
> 
> 标签：php, html, mysql, ajax

我有一个简单的 PHP 页面，请求来自 MySQL 数据库的地址列表。数据库表有 1257 个条目。我还包括一个动态加载的侧边菜单以浏览其他站点。我一起收到了 5 个 MySQL 请求

1.  地址
2.  分页
3.  检查用户是否有权浏览
4.  获取侧面菜单的所有组
5.  获取侧边菜单的所有子条目

加载该网站大约需要 5 秒钟。

我用谷歌搜索网站加载时间的改进，发现谷歌开发者工具和页面速度做了所有改进，它告诉我启用放气、更改横幅大小等，但它仍然几乎保持相同的加载时间。我想知道这是否常见，或者我可以做些什么来改善加载时间。

**编辑：**我还索引了列并启用了 MySQL 缓存。我还在来自菜单组表的子条目表中使用外键

**EDIT2：**我找到了解决方案，问题是我使用 localhost 连接到我的数据库，但由于我使用 Windows 7，它尝试通过 ipv6 连接，现在我将所有 localhost 更改为 127.0.0.1，加载我的页面只需要大约 126 毫秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:44:08.377

首先，用浏览器的控制台找出页面加载时间过长的原因。如果延迟的原因是在服务器端，例如长时间生成html文件本身，则检查以下内容：

尝试记录缓慢的 mysql 查询并确保您没有。 [http://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html)

如果您确实正在进行一些昂贵的计算（在您的情况下不太可能），请尝试缓存它。

不要忘记 PHP 代码加速器的好处，例如 APC 和 mysql 优化（查询缓存等）。

...许多其他加快速度的方法，但必须分析应用程序本身并查看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:31:19.650

您是否使用 where 条件对列进行了索引。如果不是，请索引列并检查它

# favicon - Favicon 链接确实下载而不是显示

> ID：15109580
> 
> 赞同：4
> 
> 时间：2013-02-27T10:21:44.443
> 
> 标签：favicon, ico

我的页面上有一个 favicon，当我转到 favicon 的链接时：mypage/favicon.ico 它开始下载，而不是仅将其显示为在线图像（与其他所有站点一样）。

我到处寻找解决方案，但没有得到答案。

我希望它显示，而不是下载，可能是什么问题？

```
<head>
<link rel="shortcut icon" href="/favicon.ico">
</head> 
```

*   它是一个 32x32 的 .ico 文件。

谢谢 - 克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T20:01:17.993

您可以在 HTML 中将其显示为常规图像标记。这已经在 Firefox 26、Chrome 29 和 Internet Explorer 10 中进行了测试。所有这些都取得了积极的结果。如果您愿意，可以在自己的浏览器上尝试。代码：

```
<!DOCTYPE html>
<html>
<body>
<img src = "logo.ico" type = "image/x-icon">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T10:28:11.983

你应该使用

```
<head>
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
</head> 
```

并考虑使用另一个图像，例如`.png`

```
 <link rel="icon" href="/favicon.png" type="image/png" /> 
```

（部分浏览器不支持`.ico`）

如果您`mypage/favicon.ico`直接调用它可能会被下载，这取决于您的 http 服务器/浏览器应该下载或显示哪种 mime 类型。见[维基百科](http://en.wikipedia.org/wiki/Internet_media_type)。

# excel - 带有本地化功能的 Excel 中的 SSRS 日期格式

> ID：15109584
> 
> 赞同：3
> 
> 时间：2013-02-27T10:21:49.687
> 
> 标签：excel, date, reporting-services, localization, format

我正在尝试将 SQL Server 2008 R2 Reporting Services 报告导出到 Excel。该报告有一列日期。日期作为日期时间存储在 SQL 服务器中。报告的语言设置为`=User!Language`，日期单元格的格式为`d`。将报告导出/呈现为 PDF 时，所有内容都显示在浏览器发出的请求的区域设置中 ( `Accept-Language`)。

然而，当渲染到 Excel 时，格式突然更改为`General ([$-10409]M.T.JJJJ)`（德语 Excel，操作系统的区域设置为`de-AT`，浏览器区域设置为`en-US`）。

这意味着 Excel 以完全错误的格式显示日期 - 日、月和年的顺序是硬编码的，只有分隔符来自当前区域设置。这使得在不同操作系统语言之间共享报告几乎是不可能的，因为从一个`d-m-yyyy`国家/地区生成的报告在具有不同日期格式的国家/地区仍将显示为日-月-年（反之亦然）。因此，任何期望`m/d/yyyy`格式化日期的人都会得到`d/m/yyyy`.

如果没有超过 12 天的日期，这尤其危险 - 即：很可能会误读显示的日期，因为没有明显的错误。

迄今为止，在 Excel 中手动设置单元格格式时，一切似乎都很好，并且格式会随着操作系统的区域设置而变化。

是否有可能强制单元格在 Excel 中格式化为日期，而无需编辑 Excel 文件本身？

PS：数字也不是数字格式，而是`[$-10409]#.##0,00;-#.##0,00`- 这不是一个问题，但仍然可能是错误的来源。（报告格式为`N2`）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-23T09:09:54.147

我设法解决了类似的问题。解决方案相当简单。在报告编辑器中，打开设计视图并选择要编辑的字段，单击鼠标右键并选择`Expression`或`Textbox properties`。其余的非常直观，就像在 Excel 编辑器中一样。

# android - 为 ActionBar 项设置按钮样式

> ID：15109588
> 
> 赞同：0
> 
> 时间：2013-02-27T10:21:55.997
> 
> 标签：android, android-actionbar, android-button

我应该使用什么样式来使`Button`外观看起来像 中的一个项目`ActionBar`？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:30:02.080

我用过这样的东西：

样式.xml：

```
 <style name="actionbar_button" parent="AppTheme">
        <item name="android:layout_height">fill_parent</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:background">@drawable/menu_bottom_button_selector</item>
    </style> 
```

button_selector.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"    android:exitFadeDuration="@android:integer/config_mediumAnimTime">

    <item android:drawable="@color/accent2" android:state_focused="true"/>          
    <item android:drawable="@color/accent2" android:state_pressed="true"/>
    <item android:drawable="@drawable/menu_bottom_button_off" android:state_focused="false" android:state_pressed="false"/>

</selector> 
```

menu_bottom_button_off.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

        <solid android:color="@color/button_background"/>

</shape> 
```

颜色.xml：

```
<color name="accent2">#33b5e5</color>
<color name="button_background">@android:color/transparent</color> 
```

# apache-flex - Flex 4.5：弹出窗口的自定义背景

> ID：15109589
> 
> 赞同：1
> 
> 时间：2013-02-27T10:21:57.510
> 
> 标签：apache-flex, popup, flex4

在 Flex 中，当您将**PopUpManager**用于弹出窗口时，会在应用程序上方和弹出窗口本身的后面出现一个背景矩形。我需要的是用自定义覆盖矩形覆盖默认的覆盖矩形（为了圆角，应用渐变填充等）。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:17:44.303

您只能使用 css 更改透明度、颜色和模糊。参见示例：

```
global {
    modalTransparency: 0.7;
    modalTransparencyBlur: 0;
    modalTransparencyColor: "0x000000";
} 
```

第二种方式（如果您想要自己的圆角设计，应用渐变填充等）创建自定义弹出窗口（如 TitleWindow），当弹出窗口创建或关闭时，从窗口自定义事件调度，如：

```
dispatchEvent(new Event('addPopup', true)); 
```

在主应用程序监听事件中：

```
systemManager.addEventListener("addPopup", onAddHandler, false, 0, true); 
```

然后您可以使用自定义设计显示自己的图层。

```
protected function onAddHandler(event:Event):void
{
    // show custom background layer
} 
```

# c# - 找出两个字符串中有多少个单词相同

> ID：15109590
> 
> 赞同：0
> 
> 时间：2013-02-27T10:21:58.790
> 
> 标签：c#, sql-server, user-defined-functions, sqlclr

我有这个函数，我想比较两个字符串，然后返回存在多少个单词，但以下不起作用。我似乎总是得到 SameWordCount 的 0 和 MasterAddressWordCount 的 1

有任何想法吗？

```
// some more string cleaning
        mastermkAddressKey = mastermkAddressKey.Replace(",", " ").Replace(".", " ").Trim();
        mastermkAddressKey = Encoding.ASCII.GetString(Encoding.GetEncoding("Cyrillic").GetBytes(mastermkAddressKey));
        mastermkAddressKey = mastermkAddressKey.Replace("  ", " |").Replace("| ", "").Replace("|", "");
        mastermkAddressKey = QbaseStrings.RemoveDuplicateWords(mastermkAddressKey);

        duplicatemkAddressKey = duplicatemkAddressKey.Replace(",", " ").Replace(".", " ").Trim();
        duplicatemkAddressKey = Encoding.ASCII.GetString(Encoding.GetEncoding("Cyrillic").GetBytes(duplicatemkAddressKey));
        duplicatemkAddressKey = duplicatemkAddressKey.Replace("  ", " |").Replace("| ", "").Replace("|", "");
        duplicatemkAddressKey = QbaseStrings.RemoveDuplicateWords(duplicatemkAddressKey);

        string[] masterAddressSeparateWords = mastermkAddressKey.Split(new char[' '], StringSplitOptions.RemoveEmptyEntries);
        string[] duplicateAddressSeparateWords = duplicatemkAddressKey.Split(new char[' '], StringSplitOptions.RemoveEmptyEntries);

        int SameWordCount = 0;
        int MasterAddressWordCount = 0;

        foreach (string masterWord in masterAddressSeparateWords)
                {
                    foreach (string duplicateWord in duplicateAddressSeparateWords)
                    {
                        if (masterWord == duplicateWord) {SameWordCount++;}
                    }

                    MasterAddressWordCount++;
                }

        int WordDifference = MasterAddressWordCount - SameWordCount;

        if (WordDifference == 0) { return "sure"; }
        if (WordDifference > 0 && WordDifference < 3) { return SameWordCount.ToString() + " " + MasterAddressWordCount.ToString(); }
        if (WordDifference > 2 && WordDifference < 5) { return "possible"; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-20T02:18:28.037

你的问题是因为`new char[' ']`，你在这里的意思是`new char[] {' '}`。编译器（非常有帮助）转换`' '`为`int`here，使其成为`char[int]`. 这意味着：

```
new char[' '] 
```

真的是一样的：

```
new char[32] 
```

最终成为一个无用的大`char[]`数组，而不是您所追求的单个空间。

* * *

您可以通过查看为以下内容生成的 IL 清楚地看到这一点：

```
var a = new char[' ']; 
```

这是：

```
IL_0001:  ldc.i4.s    20
IL_0003:  newarr      System.Char
IL_0008:  stloc.0     // a 
```

20 是 32 的十六进制表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:49:13.447

我通过更改以下几行解决了这个问题：

```
string[] masterAddressSeparateWords = mastermkAddressKey.Split(new char[' '], StringSplitOptions.RemoveEmptyEntries);
        string[] duplicateAddressSeparateWords = duplicatemkAddressKey.Split(new char[' '], StringSplitOptions.RemoveEmptyEntries); 
```

至：

```
string[] masterAddressSeparateWords = mastermkAddressKey.Split(' ');
string[] duplicateAddressSeparateWords = duplicatemkAddressKey.Split(' '); 
```

# android - 通知 setLights() 默认值？

> ID：15109593
> 
> 赞同：9
> 
> 时间：2013-02-27T10:22:02.117
> 
> 标签：android, notifications, android-notifications

我想创建一个自定义通知。所以我想改变灯光和音调。我用`NotificationCompat.Builder`这个。

现在我想通过改变灯光`setLights()`；工作正常。`onMS`但我想设置and的默认值`offMS`。我还没有找到关于那个的东西。

谁能帮我找到默认值？这是相关的文档：http: [//developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setLights(int, int, int)](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setLights%28int,%20int,%20int%29)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-10T07:11:53.363

请参阅[Android 源代码](https://android.googlesource.com/platform/frameworks/base/+/9e27e114af071cd5ffdc5d995015220d6d19778c/core/res/res/values/config.xml#1100)以获取答案：

```
<!-- Default color for notification LED. -->
<color name="config_defaultNotificationColor">#ffffffff</color>
<!-- Default LED on time for notification LED in milliseconds. -->
<integer name="config_defaultNotificationLedOn">500</integer>
<!-- Default LED off time for notification LED in milliseconds. -->
<integer name="config_defaultNotificationLedOff">2000</integer> 
```

然而，不同的 ROM 可能有不同的值。例如我的回报`5000`为`config_defaultNotificationLedOff`. 所以你可能想在运行时获取它们：

```
Resources resources = context.getResources(),
          systemResources = Resources.getSystem();
notificationBuilder.setLights(
    ContextCompat.getColor(context, systemResources
        .getIdentifier("config_defaultNotificationColor", "color", "android")),
    resources.getInteger(systemResources
        .getIdentifier("config_defaultNotificationLedOn", "integer", "android")),
    resources.getInteger(systemResources
        .getIdentifier("config_defaultNotificationLedOff", "integer", "android"))); 
```

根据[diff](https://android.googlesource.com/platform/frameworks/base/+/670f93283b5e2445c58998153de9c476acddc37b%5E%21/core/res/res/values/config.xml)，这些属性保证存在于 Android 2.2+（API 级别 8+）上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:52:33.503

@Aleks G 没有帮助。我有来自 compat libaray 的最新更新。但 Eclipse say`build()`是可用的。我不知道为什么。文件说是的，你...

这是我当前的代码：

```
 NotificationCompat.Builder notify = new NotificationCompat.Builder(context);
    notify.setLights(Color.parseColor(led), 5000, 5000);
    notify.setAutoCancel(true);
    notify.setSound(Uri.parse(tone));
    notify.setSmallIcon(R.drawable.ic_stat_kw);
    notify.setContentTitle("Ttiel");
    notify.setContentText("Text");
    Intent showIntent = new Intent(context, Activity_Login.class);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, showIntent, 0); 
    notify.setContentIntent(contentIntent);

    NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.notify(0, notify.getNotification()); 
```

完美运行。但不是默认值`onMS`和`offMS`:(`setLights()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:34:58.167

你应该能够做到这一点：

```
Notifictaion notf = new Notification.Builder(this).setXXX(...).....build();
notf.ledARGB = <your color>;
notf.ledOnMS = <your value>;  //or skip this line to use default
notf.ledOffMS = <your value>; //or skip this line to use default 
```

基本上，不要`setLights`在通知生成器上使用。相反，首先构建通知 - 然后您可以访问灯光的各个字段。

**更新：**这是我的示例项目的实际复制/粘贴，它在 android 2.1 上编译和工作正常，并为 LED 使用蓝色：

```
Notification notf = new NotificationCompat.Builder(this)
    .setAutoCancel(true)
    .setTicker("This is the sample notification")
    .setSmallIcon(R.drawable.my_icon)
    .build();
notf.ledARGB = 0xff0000ff;
NotificationManager mNotificationManager =
        (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.notify(1, notf); 
```

# java - JSF 中的数据表不是遍历列表中的每个变量，而是返回列表

> ID：15109594
> 
> 赞同：2
> 
> 时间：2013-02-27T10:22:02.763
> 
> 标签：java, jsf, datatable

我正在制作一个带有几个 jsf 页面的应用程序。

```
 <h:dataTable value="#{S1bean.getTweetsByUserId(1)}" var="tweet">
        <h:column>
            <h:outputLabel value="#{tweet.getTweet()}"/>
            <h:outputLabel value="#{tweet.getDatum().toString()}"/>
            <h:outputLabel value="#{tweet.getVanaf()}"/>
        </h:column>
    </h:dataTable> 
```

它没有给 tweet 一个 Tweet 对象，而是给出了一系列 tweet。所以它不会识别返回字符串的 getTweet() 方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:09:02.920

在即将到来的 JSF 2.2 之前，`<h:dataTable>`不支持`Collection`. 目前，它只支持`List`,`Map`和`Object[]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:34:39.170

我不得不在我的 bean 中使用 Object[] 而不是 Collection。

# ruby - 在文件中包含模块与在类中包含模块（Ruby Mixins）：哪个更好？

> ID：15109595
> 
> 赞同：0
> 
> 时间：2013-02-27T10:22:04.690
> 
> 标签：ruby

在 Ruby 中，我想将一些助手放在一个额外的模块和文件中。我将在模型级别使用它，所以我把

```
include MyHelper
class Shop
  ...
end 
```

我现在意识到这也可以这样做：

```
class Shop
  include MyHelper
  ...
end 
```

谁能向我解释更多关于差异的信息？第二个版本总是更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:28:12.253

不同之处在于，在第一种情况下，您将助手包含在全局命名空间中。我想不出这是一个好主意的情况。

在后一种情况下，您将助手包含在类的“命名空间”中。模块中定义的（实例）方法现在可用于`Shop`类的实例。

# django - django 转储出一个变量

> ID：15109599
> 
> 赞同：3
> 
> 时间：2013-02-27T10:22:07.113
> 
> 标签：django

在 Django 中，我可以转储一个变量以查看视图中的内容（不使用命令行）吗？

例如：

```
device = mobile(request)
    print device
    abort

or 
 device = mobile(request)
 return HttpResponse(device) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:25:08.217

当您使用一个不适合直接调试的挂钩框架时，写入文件通常是一种“转储”数据作为调试方法的万无一失的方法。

例如

```
device = mobile(request)
with open('path/to/debug_out.txt', 'w') as outfile:
    outfile.write(device)
abort 
```

为方便起见，您可以将其放在某个调试帮助程序模块中的预定义函数中。或者，您可以使用 sys.excepthook 在转发/重新引发它们之前自动将所有异常写入此文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:40:23.513

有一个类似的问题：

[Django debug 显示一个页面的所有变量](https://stackoverflow.com/questions/2213977/django-debug-display-all-variables-of-a-page)

你可以输入

```
assert False, locals() 
```

在您的视图中查看所有视图变量。或者在你的模板中使用 {%debug%} 模板标签，它会做同样的事情。

# php - 表单提交后 $_POST 为空

> ID：15109603
> 
> 赞同：7
> 
> 时间：2013-02-27T10:22:16.037
> 
> 标签：php, twitter-bootstrap

我正在使用 Twitter Bootstrap 构建一个 Web 应用程序。我有一个表单，用户应该在其中输入他的姓名和姓氏，然后单击提交。问题是，`$_POST`回来是空的。我在 Windows 8 机器上使用 WAMP。

```
<?php
if(isset($_POST["send"])) {
    print_r($_POST)
} else {
    ?>
    <form class="form-horizontal" action="" method="post">
        <div class="control-group"> <!-- Firstname -->
            <label class="control-label" for="inputEmail">First name</label>
            <div class="controls">
                <input type="text" id="inputName" placeholder="First name">
            </div>
        </div>
        <div class="control-group"> <!-- Lastname -->
            <label class="control-label" for="inputEmail">last name</label>
            <div class="controls">
                <input type="text" id="inputLastname" placeholder="Last name">
            </div>
        </div>
        <div class="form-actions">
            <button type="submit" name="send" class="btn btn-primary">Submit data</button>
            <a href="<?php $mywebpage->goback(); ?>" class="btn">Cancel</a>
        </div>
    </form>
    <?php
}
?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-27T10:25:43.097

请尝试为输入类型添加名称，例如

```
<input type="text" id="inputLastname" name="inputLastname" placeholder="Last name"> 
```

现在检查 $_POST 变量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T10:26:03.263

您的输入没有`name`属性。设置那些：

```
<input type="text" id="inputName" placeholder="First name" name="first_name" />
<input type="text" id="inputLastname" placeholder="Last name" name="last_name" > 
```

另外，看看你检测表单提交的方式：

```
if(isset($_POST['send'])) 
```

您检查提交按钮是否存在于发布数据中。这是一个坏主意，因为在 Internet Explorer 的情况下，如果用户按 Enter 键提交表单，则提交按钮将不会出现在发布数据中。

更好的方法是：

```
if($_SERVER['REQUEST_METHOD'] == 'POST') 
```

或者

```
if(isset($_POST['first_name'], $_POST['last_name'])) 
```

更多信息 -[`Why isset($_POST['submit'])`很糟糕](http://www.crosscode.co.uk/php/why-using-isset-post-submit-is-not-compatible-with-internet-explorer/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T17:43:22.837

我注意到使用' **name** '属性不适用于（if（isset（$_POST [“send”]）））的**Bootstrap Validator**。因此，如果您想在表单上添加验证，那么我建议您遵循这条路！

**解决方案**

```
<button type="submit" class="btn btn-primary">Submit data</button> 
```

php

```
if($_SERVER['REQUEST_METHOD'] == 'POST') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:34:03.050

```
<?php
if(isset($_POST["send"])) {
  echo $_POST["inputName"];
    echo $_POST["inputLastname"];
} 
else {
    ?>
    <form class="form-horizontal" action="<? echo $_SERVER['PHP_SELF']; ?>" method="POST">
        <div class="control-group"> <!-- Firstname -->
            <label class="control-label" for="inputEmail">First name</label>
            <div class="controls">
                <input type="text" id="inputName" placeholder="First name" name="inputName"> 
            </div>
        </div>
        <div class="control-group"> <!-- Lastname -->
            <label class="control-label" for="inputEmail">last name</label>
            <div class="controls">
                <input type="text" id="inputLastname" name="inputLastname" placeholder="Last name">
            </div>
        </div>
        <div class="form-actions">
            <input type="submit" name="send" class="btn btn-primary">Submit data</button>
            <a href="#" class="btn">Cancel</a>
        </div>
    </form>
    <?php
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:28:37.740

问题是您正在检查是否`$_POST['send']`已设置，但不会。表单中的“发送”字段是按钮，但该按钮没有值，因此不会包含在`$_POST`.

希望有帮助。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-27T10:24:09.950

添加文件的位置或使用：

```
<form class="form-horizontal" action="<? echo $_SERVER['PHP_SELF']; ?>" method="post"> 
```

# php - 带有 PHP 站点的 Ajax 选项卡

> ID：15109604
> 
> 赞同：0
> 
> 时间：2013-02-27T10:22:18.033
> 
> 标签：php, jquery, ajax, tabs

我的 Web 应用程序有一个“小”大问题。首先，我必须承认，我的英语不太好:)。

我已经实现了非常简单的基于 ajax（由 jquery 提供支持）的 html+css-Tabs，并且每个 Tab 请求一个单独的 PHP 站点。每个站点都包括分钟。一种带有 php-values 和其他 jquery-effects/-plugins 的表单。

主要问题是每个选项卡中的表单视图。加载 ajax 的表单显示不完整，其他表单完全空白。我找到了问题并删除了其中一个字段集中的 PHP 代码，最后我显示了这个字段集，而表单的其余部分为空白。

如果我只使用基于 css 的选项卡而没有 ajax 功能，则表单会完全加载。

ajax有什么问题？我不明白：P

这是其中一种形式的一部分：

```
 <form action="#" method="post" name="form_project" class="form_project mainform">
    <input type="hidden" name="uid" value="<?= issetGlobals('uid') ?>" />
    <table border="0" id="tbl-projects" cellspacing="0" cellpadding="5">
        <tr>
            <td colspan="2"><input type="checkbox" name="cb_newProject" onclick="actFieldset('#fs-newProject')" /> <label for="cb_newProject">Projekt erstellen</label></td>
        </tr><tr>
            <td>

            <fieldset id="fs-newProject" disabled="disabled"><legend>Projektverzeichnis erstellen</legend>
                <table border="0">
                    <tr>
                        <td><label for="projectName">Projektname</label></td>
                        <td><input type="text" name="projectName" value="" /></td>
                    </tr><tr>
                        <td><label for="projectManager">Projektleiter</label></td>
                        <td><select size="1" name="projectManager" id="projectManager">
                        <?php
                            foreach($DBma->getEmployees() as $value) {
                                if($value['uid'] == issetGlobals('uid'))
                                    echo '<option value="'.$value["uid"].'" selected="selected">'. convertString($value["name"]) .'</option>';
                                else
                                    echo '<option value="'.$value["uid"].'">'. convertString($value["name"]) .'</option>';
                            }
                        ?>
                            </select>
                        </td>
                    </tr> 
```

这里是“转换”的 JS 代码：

```
$('#tabs-nav li').each(function(i) {
    $(this).click(function(event){
        event.stopPropagation();
        Tab($(this).attr('id'));
    });
});

function Tab(key){
    $('#tabs-nav li').each(function() {
        $(this).removeClass('active');
    })
    $(key).addClass('active');

    $.ajax({
        url: 'tab-content.php?tab=' + key,
        type: 'get',
        beforeSend: function() {
            $(key + '-loading').html('<img src=\'images/ajax-loader.gif\' width=\'16\' height=\'16\' alt=\'Loading\' />');
        }
    }).done(function(responseText)  {
            $(key + '-loading').html("");
            $('#tabs-content').html(responseText);
        });
} 
```

# ruby-on-rails-3.2 - 在链接中关注？

> ID：15109606
> 
> 赞同：1
> 
> 时间：2013-02-27T10:22:21.457
> 
> 标签：ruby-on-rails-3.2, linkedin

我正在开发与linkedin集成的应用程序。我想获得关注（即个人资料/关注）。但是使用

代码 ：

```
@client=@clients.profile(:fields => ["id","pictureUrl","firstName","lastName","headline","following","suggestions"]) 
```

但它只给我关注的公司而不是这个人。在添加我会得到那个人的领域后，任何人都可以帮忙。

提前致谢。

# xpath - 是否有任何属性可以以毫秒为单位将纪元转换为 wso2 esb 中的 timestampwithtimezone

> ID：15109607
> 
> 赞同：1
> 
> 时间：2013-02-27T10:22:24.883
> 
> 标签：xpath, xquery, wso2, wso2esb

我的财产是这样的：

```
<property name="ReadingDateTime"
     expression="//ReadingDateTime/text()"
     scope="default"
     type="STRING"
/> 
```

结果是：1361855692325

这是纪元格式，我如何转换为 noraml 时区以发送 db

我的尝试是这样的，但它没有转换它

```
<property name="ReadingDateTime"
     expression=" current-dateTime()-xs:dateTime('1361855692325'))"
     scope="default"
     type="STRING"
/> 
```

任何人请帮帮我

```
<property name="epoch"
     expression="get-property(SYSTEM_TIME")
     scope="default"
     type="STRING"/> 
```

结果：-1361855692325 它提供了极好的纪元值，但我想将纪元值更改为时间戳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:41:02.547

您可以使用允许您使用 Javascript 的脚本中介轻松完成此操作。配置看起来像，

```
<property name="epoch" value="1361968436252"/>

<script language="js"><![CDATA[
    var t = mc.getProperty("epoch");
    var date = new Date(parseInt(t)).toString();
    mc.setProperty("newdate", date);
]]></script>

<log level="custom">
   <property name="TIMESTAMP" expression="get-property('newdate')"/>
</log> 
```

# c# - 为什么像 RedirectToAction() 和 HttpNotFound() 这样的控制器方法在内部受到保护？

> ID：15109609
> 
> 赞同：0
> 
> 时间：2013-02-27T10:22:37.240
> 
> 标签：c#, asp.net-mvc

我想实现一个服务模式来为我的几个 ASP.NET MVC 控制器提供一些逻辑。根据逻辑的结果，我可能希望控制器重定向，或给出 404 未找到，或各种其他响应。因此，我希望我的控制器能够`out ActionResult`从服务方法接收参数，他们可以返回该参数以执行这些响应。

问题是我看不到服务生成`ActionResult`s 的任何方式。由于类中的`RedirectToAction()`和`HttpNotFound()`之`Controller`类的方法设置为`protected internal`，因此无法从服务类访问它们。

制作它们的理由是什么`protected internal`？我的服务应该如何向控制器指示他们应该返回什么操作结果？

我可能想要做的一个例子是允许用户在几个地方设置一个配置变量，如果他们有权限的话。控制器代码如下所示：

```
public ActionResult SetVariable(int variableId, int variableValue) {
    ActionResult actionRes;
    _svcVars.SetVariable(variableId, variableValue, out actionRes);
    return actionRes;
} 
```

...并且服务代码看起来像：

```
public bool SetVariable(int variableId, int variableValue, out ActionResult actionRes) {
    ConfigRepository repoConfig = new ConfigRepository();
    if (!repoConfig.VariableExists(variableId)) {
        actionRes = HttpNotFound("Could not find config variable");
        return false;
    }

    if (!repoConfig.VariableMayBeChanged(variableId)) {
        actionRes = Redirect("/ChangeForbidden.html");
        return false;
    }

    int variablesListId = repoConfig.SetVariable(variableId, variableValue);
    actionRes = RedirectToAction("ViewVariablesList", new { listId = variablesListId });
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:40:19.213

> 问题是我看不到服务生成 ActionResults 的任何方法。

与 .NET 中的任何对象一样，您可以使用其构造函数来创建实例。

就像这样：

```
var values = new RouteValueDictionary(new 
{
    action = "ViewVariablesList",
    listId = variablesListId
});
actionRes = new RedirectToRouteResult(values); 
```

至于为什么 Controller 类上的相应方法是受保护的和内部的，嗯，你可以向设计框架的人提出一个问题。

# android - Android AutoCompleteTextview Dropdown 只允许用户选择

> ID：15109610
> 
> 赞同：1
> 
> 时间：2013-02-27T10:22:37.527
> 
> 标签：android, autocompletetextview

在我的 android 应用程序中，我使用的`AutoCompleteTextview`是用户必须在其上选择名称的名称。如果用户输入了一些文本（假设用户没有从 中选择文本`AutoCompleteTextview`），它也会被显示。

所以，现在我想允许用户只选择文本，不允许输入文本。我用过

```
r_code.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            r_code.showDropDown();
            return false;
        }
    }); 
```

当用户触摸时，此代码将显示所有的名称`AutoCompleteTextview`。但它允许用户输入一些文本。如上所述，我不想让用户输入文本，他们必须选择文本。有人可以说如何解决我的问题。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-07-23T07:38:29.297

我做的和你基本一样。

1）我将 设置`OnTouchListener`为消耗点击，所以视图没有聚焦并且键盘没有显示。

```
autoCompleteTextView.setOnTouchListener(object : OnTouchListener {
            override fun onTouch(v: View?, event: MotionEvent?): Boolean {
                autoCompleteTextView.showDropDown()
                return true
            }
        }) 
```

2）我在我的xml中添加了两件事。

我设置`focusable="false"`和`android:focusableInTouchMode="false"`。这样，当用户单击`AutoCompleteTextView`.

```
<AutoCompleteTextView
        android:id="@+id/autoCompleteTextView"
        style="@style/Atomic.Body1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:focusable="false"
        android:focusableInTouchMode="false"/> 
```

这里唯一的缺点是它不会被聚焦`imeOptions="actionNext"`，因此会被跳过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:06:39.650

如果数组不包含输入的字符串，请使用 arrayadapter 中的字符串检查输入的字符串 要求用户选择另一个字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:55:21.130

如果要将选择限制为已知列表，可以使用 a `Spinner`，有关详细信息，请参阅[Spinners 指南](http://developer.android.com/guide/topics/ui/controls/spinner.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:13:48.093

添加 KeyListener r_code.setKeyListener 并处理点击的键。我认为如果您返回 true，则密钥将被消耗。

# json - 在 Google App Script on Sites 中从 JSON 动态加载数据

> ID：15109612
> 
> 赞同：2
> 
> 时间：2013-02-27T10:22:43.117
> 
> 标签：json, google-apps-script, jquery-masonry, google-sites

我有一个谷歌应用脚​​本，我试图从 JSON 调用中获取数据：

```
 var ajaxError = function(){
  $loadingItem.text('Could not load examples :(');
};

// dynamically load sites using Masonry from Zootool
$.getJSON('http://zootool.com/api/users/items/?username=desandro' +
    '&apikey=8b604e5d4841c2cd976241dd90d319d7' +
    '&tag=bestofmasonry&callback=?')
  .error( ajaxError() )
  .success(function( data ){... 
```

基本上，我试图在从文件返回 Html 的 Google Apps 脚本中实现这个 JQuery 插件示例[http://masonry.desandro.com/](http://masonry.desandro.com/) 。

这个杰森的电话最终出错了……但是为什么呢？我在哪里可以看到出了什么问题？Javascript 控制台未显示任何错误。该网址有效：http: [//zootool.com/api/users/items/](http://zootool.com/api/users/items/?username=desandro&apikey=8b604e5d4841c2cd976241dd90d319d7&tag=bestofmasonry&callback=) ?username=desandro&apikey=8b604e5d4841c2cd976241dd90d319d7&tag=bestofmasonry&callback= ？

# maven - maven 忽略 -f 参数

> ID：15109613
> 
> 赞同：3
> 
> 时间：2013-02-27T10:22:47.183
> 
> 标签：maven

一次又一次地与maven斗争。现在问题来了：我的项目中有以下结构：

*   pom.xml
*   本地pom.xml
*   模块1文件夹
*   模块2文件夹

我想保留两个 pom 文件有几个原因。如 maven 帮助中所示，我们需要执行以下操作，而不是使用 pom.xml：，但是当它继续使用 pom.xml，忽略参数`mvn -f localpom.xml clean install`时，令我惊讶的是。`-f`我以为localpom.xml中可能有一些错误，但是没有！当我从当前文件夹`mvn -f localpom.xml clean install`中删除 pom.xml 时，它工作得很好。

有人对为什么会发生这种情况有任何想法吗？

提前致谢！

# java - 在多线程应用程序中分离日志文件

> ID：15109614
> 
> 赞同：1
> 
> 时间：2013-02-27T10:22:49.647
> 
> 标签：java, multithreading, log4j

我正在开发一个以多线程方式处理多个文件的应用程序。分析是通过每个应该分析的文件启动一个线程来完成的，然后执行一系列步骤（在不同的类中），这些步骤都会产生某种形式的日志输出。

我想为我分析的每个文件都有专用的日志文件，这些文件只包含该文件的消息。我现在使用的代码是在程序仍然是单线程时编写的：

```
 PatternLayout layout = new PatternLayout("%d{dd MMM yyyy HH:mm:ss,SSS} [%t] %-5p %C{1} %x - %m%n");
    if(Config.CREATE_SEPERATE_LOG)
    {

        FileAppender appender;
        try {
            String path = (Config.LOGFILE_PATH!=null)?Config.LOGFILE_PATH:filename;
            appender = new FileAppender(layout,path);
            appender.setErrorHandler(new FallbackErrorHandler());
            appender.setName("Dedicated Appender");
            org.apache.log4j.Logger.getRootLogger().addAppender(appender);
        } catch (IOException e) {
            org.apache.log4j.Logger.getLogger(Config.class).warn("Failed to create a dedicated log "+filename, e);
        }
    } 
```

这基本上会创建一个额外的附加程序，该附加程序会写入正在分析的文件的专用日志文件。虽然它可以在应用程序是单线程的时候工作，但它会变得一团糟。

如何更改我的设置，以便我可以让每个类参与某个文件的分析，并将其记录到该文件的特定日志文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:04:21.613

我不会那样做，只需设置每个线程的名称（或前缀+名称）。
然后使用 log4j`PatternLayout`格式化每个日志行，以便输出线程名称。
`%t`是线程名称的格式符号。[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)
文档 中的更多信息：

> 让转换模式为“%-5p [%t]: %m%n”，并假设 log4j 环境设置为使用 PatternLayout。

我的经验是，如果有必要的话，之后使用考虑线程名称的脚本将线程日志分离到单独的文件中会更有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:51:23.667

不确定我是否正确理解了您的问题，我认为您需要为每个线程设置自定义记录器。每个线程都应该指向自己的日志文件。如果是这种情况，您将在线程类级别实现/初始化您的记录器实例。

```
public class MyThread  implements Runnable{
    private Logger logger =null;
public MyThread(){
    FileAppender appender =null;
    //custom initialisation code for specific appender/file
    logger =  // initialise 
}

@Override
public void run() {
    // TODO Auto-generated method stub

}

private void warn(String message){
    logger.warn(message);
}
private void info(String message){
    logger.info(message);
} 
```

}

# javascript - 将 PDF 打印到 Google Drive 中的文件夹

> ID：15109620
> 
> 赞同：0
> 
> 时间：2013-02-27T10:23:05.413
> 
> 标签：javascript, pdf, printing, google-apps-script, google-drive-api

我正在使用脚本将电子表格打印到 PDF。我想将其打印到驱动器“PDF 文件夹”上的某个位置。有人知道怎么做吗？

这是我的代码：

```
function printpdf(){
  var spreadsheet_id="0AkcI3cOVJXI3dHg3Nnk3Y2JUakViTkUzQzdXSUdLNEE";
  var spreadsheetFile = DocsList.getFileById(spreadsheet_id); 
  var blob = spreadsheetFile.getAs('application/pdf'); 
  DocsList.createFile(blob);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:55:28.973

只需将它添加到这样的文件夹中：

（我复制了整个代码）

```
function printpdf(){
  var spreadsheet_id="0AkcI3cOVJXI3dHg3Nnk3Y2JUakViTkUzQzdXSUdLNEE";
  var spreadsheetFile = DocsList.getFileById(spreadsheet_id); 
  var blob = spreadsheetFile.getAs('application/pdf'); 
  var folder = DocsList.getFolder('PDF Folder'); //get the folder by its path
  var pdf = DocsList.createFile(blob).addToFolder(folder);
} 
```

# jsf - JSF FileUploadEvent getSource 是个什么样的Object？

> ID：15109630
> 
> 赞同：0
> 
> 时间：2013-02-27T10:23:25.087
> 
> 标签：jsf, file-upload, richfaces

当我收到我的`FileUploadEvent event`事件时，可以通过`.getSource()`. 我调试了它，我知道它包含`rich:fileUpload`. 所以我想对几个 fileUploads 使用相同的侦听器，并且需要切换这个对象 id。但是它是什么样的对象，所以我可以访问这个成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:06:00.487

它是一个[`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html)，并且 ID 可以通过`getId()`. 您可以通过查看它的`getClass()`.

# android - 在阿拉伯语的浏览器中滑动的反向方向

> ID：15109636
> 
> 赞同：4
> 
> 时间：2013-02-27T10:23:47.787
> 
> 标签：android

昨天发了一个关于PagerAdapter以及在使用数据库时如何实现的问题。我设法把它整理出来，但是，我不希望 viewpager 向左滑动/滚动我想要相反的（向右滑动）。以下是我的代码：

```
public class ScrollViewTest6 extends ActionBarAppActivity {

    private ViewPager awesomePager;
    private static int NUM_AWESOME_VIEWS;
    private Context cxt;
    private AwesomePagerAdapter awesomeAdapter;
    TextView tv;
    int _id;
    int row_numbers;
    int row_position;      
    private DataAdapter mySQLiteAdapter;
    private Cursor cursor;

    /** Called when the activity is first created. */
@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    cxt = this;

    awesomeAdapter = new AwesomePagerAdapter(awesomeAdapter);
    awesomePager = (ViewPager) findViewById(R.id.awesomepager);
    awesomePager.setAdapter(awesomeAdapter);

    mySQLiteAdapter = new DataAdapter(this);
    mySQLiteAdapter.createDatabase();
    mySQLiteAdapter.open();

   Bundle extras = getIntent().getExtras();
   if (extras == null) {
       return;
   }

   _id = extras.getInt("id");
   row_numbers = extras.getInt("row_num");
   row_position = extras.getInt("row_pos");

   NUM_AWESOME_VIEWS = row_numbers;

   awesomePager.setCurrentItem(row_position);

   cursor = mySQLiteAdapter.get_AllColumns(); 
   this.startManagingCursor(cursor);

    this.awesomePager.setOnPageChangeListener(new ViewPager.OnPageChangeListener()
    {
        @Override
        public void onPageScrollStateChanged(int arg0) {
      }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels){
      }

        @Override
        public void onPageSelected(int position){
      }

    });
}

private class AwesomePagerAdapter extends PagerAdapter{

    public AwesomePagerAdapter(PagerAdapter fm) {
       }

    @Override
    public int getCount() {
      return NUM_AWESOME_VIEWS;
      }

    @Override
    public int getItemPosition(Object object) {return POSITION_NONE;}
            @Override
            public Object instantiateItem(ViewGroup collection, int position) {

                LayoutInflater inflater = (LayoutInflater)cxt.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                View layout = inflater.inflate(R.layout.mylayout, null);
                TextView Title = (TextView)layout.findViewById(R.id.title);

                if (cursor != null ) {
                    if  (cursor.moveToPosition(position)) {                         
                        //do {
                            //cursor.moveToPosition(position);
                            String text = cursor.getString(
                                cursor.getColumnIndexOrThrow(DataAdapter.KEY_Title));

                            Title.setText(text);    
                    }
                }                       

                ((ViewPager) collection).addView(layout,0);
                 return layout;
            }

            @Override
            public void destroyItem(View collection, int position, Object view) {
                    ((ViewPager) collection).removeView((View) view);
            }

            @Override
            public boolean isViewFromObject(View view, Object object) {
                    return view==((View)object);
            }

            @Override
            public void finishUpdate(View arg0) {
            }

            @Override
            public void restoreState(Parcelable arg0, ClassLoader arg1) {
            }

            @Override
            public Parcelable saveState() {
                return null;
            }

            @Override
            public void startUpdate(View arg0) {
            }

        }
} 
```

我知道有些人建议使用 setCurrentItem(int); //最后一页

但这与列表视图顺序冲突。

例如列表视图：

1

2

3

当我们使用上面的行时，它显示 1 <- 2 <- 3（从 3 开始）

我想要 3 <- 2 <- 1 （从 1 开始）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-24T07:39:40.850

我遇到了这个问题，我用这个库解决了使用它，你的分页将从右到左完美地工作它与 ViewPager 一样工作

[https://github.com/diego-gomez-olvera/RtlViewPager](https://github.com/diego-gomez-olvera/RtlViewPager)

```
 <com.booking.rtlviewpager.RtlViewPager
            android:id="@+id/arabicViewPager"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

 arabicViewPager = (ViewPager) findViewById(R.id.arabicViewPager);
 adapterViewPager = new Adpt_fragmentPageAdapter(getSupportFragmentManager());
  arabicViewPager.setAdapter(adapterViewPager);

tabLayout = (TabLayout) findViewById(R.id.sliding_tabs);
 tabLayout.setupWithViewPager(arabicViewPager); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T15:03:41.723

感谢 AleksG

以下是他建议的用于所需目的的操作，因此将以下行添加到列表中：

```
setCurrentItem(count - 1) 
```

然后在光标中，您需要在光标中设置列表顺序`"_desc"`

再次感谢。

# c# - 如何在母版页中传递用户控件？IEnumerable 错误来了

> ID：15109637
> 
> 赞同：1
> 
> 时间：2013-02-27T10:23:50.060
> 
> 标签：c#

我将用户控件传递给母版页，同时我也在应用程序的不同页面中传递相同的用户控件。当我要运行应用程序时，我在母版页上出现错误：“传递到字典中的模型项的类型为'System.Collections.Generic.List`1 [Business Layer.Business]'，但该字典需要模型项类型为'业务层.业务'。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:26:53.403

将页面的模型类型从更改`Business`为`IEnumerable<Business>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:27:34.827

错误说的是，当它正在寻找单个实例时，您正在向它传递一个列表`Business`

# html - Solr XSLTResponseWriter

> ID：15109643
> 
> 赞同：0
> 
> 时间：2013-02-27T10:24:02.240
> 
> 标签：html, xslt, solr, nutch

我正在使用 Nutch 和 Solr 来抓取网页。从 solr 接口查询时，结果为 XML 格式。我希望它显示在正常的 html 输出中。

[我试图通过传递从http://grokbase.com/t/nutch/user/103xcghta8/getting-solr-response-in](http://grokbase.com/t/nutch/user/103xcghta8/getting-solr-response-in-html-format-htmlresponsewriter)引用的这 2 个变量 wt=xslt&tr=example.xsl 将 xslt 钢板附加到 SOLR 的响应中 [-html-format-h​​tmlresponsewriter](http://grokbase.com/t/nutch/user/103xcghta8/getting-solr-response-in-html-format-htmlresponsewriter)

然后它可以达到某种预期，但这是一个手动输入，每次我在查询时都必须写。

这可以通过修改 solr 和 nutch 中的某些文件来自动完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:17:52.160

将参数添加到请求处理程序

```
<str name="wt">json</str>
<str name="tr">example.xsl</str> 
```

# sql - 如何在 oracle 11g 中使用 sql 查询达到以下输出？

> ID：15109646
> 
> 赞同：0
> 
> 时间：2013-02-27T10:24:05.843
> 
> 标签：sql, oracle11g

我有以下数据的表格：

## **Block_id 值**

```
1             5
2             5
3             5
4             0
5             0
6             4
7             4 
```

而且我必须编写查询以提供以下输出：

**Block_id**

```
 1-3
   6-7 
```

如何在 Oracle 11g 中使用 pl/sql 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:22:11.950

您可以执行以下操作：

```
SQL> select * from data order by block_id;

  BLOCK_ID      VALUE
---------- ----------
         1          5
         2          5
         3          5
         4          0
         5          0
         6          4
         7          4
         9          5
        10          5
        12          2

SQL> select min(block_id) || '-' || max(block_id) block_range, value
  2    from (select block_id, value, max(grp) over (partition by value order by block_id) grp
  3            from (select block_id, value,
  4                         case
  5                           when lag(block_id) over (partition by value order by block_id) < block_id - 1
  6                           then
  7                             row_number() over (partition by value order by block_id)
  8                           when row_number() over (partition by value order by block_id) = 1 then 1
  9                           else null
 10                         end grp
 11                    from data
 12                   where value != 0))
 13   group by value, grp
 14   order by min(block_id);

BLOCK_RANG      VALUE
---------- ----------
1-3                 5
6-7                 4
9-10                5
12-12               2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:32:12.810

您不需要 PL/SQL 来执行此操作，只需一个简单的查询即可：

```
CREATE TABLE test(
    a   INTEGER,
    b   INTEGER
);

INSERT INTO test VALUES (1, 5);
INSERT INTO test VALUES (2, 5);
INSERT INTO test VALUES (3, 5);
INSERT INTO test VALUES (4, 0);
INSERT INTO test VALUES (5, 0);
INSERT INTO test VALUES (6, 4);
INSERT INTO test VALUES (7, 4);

select min(a) || '-' || max(a) from test group by b order by 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:33:08.407

另一种方法是使用聚合函数：

```
select distinct
        min(block_id) over (partition by value) || '-' ||
        max(block_id) over (partition by value)
   from whatever_your_table_is_called
   where value > 0; 
```

# linq - 业务逻辑层中的 AsQueryable() - 不好的做法？（我想是的，但是....）

> ID：15109647
> 
> 赞同：2
> 
> 时间：2013-02-27T10:24:07.587
> 
> 标签：linq, entity-framework, n-tier-architecture, asqueryable

比如说我有（伪代码）：

`public IEnumerable<User> GetUsers(string name)`在我的实体框架的数据访问层中，目前它`.ToList()`在返回之前执行，从而确保我的业务逻辑层不会干扰我的数据访问层。

但是，我需要在我的业务逻辑层对此稍有不同的变化，例如我需要更少的数据（例如，只需要用户 ID 或进一步过滤它）。

为了拥有一个高效的数据库层，我想要另一种方法返回数据的子集（重载方法或其他方法）。

但是，我可以“作弊”并省略 ToList()，而我的业务逻辑层最后添加了 AsQueryable()。因此，我的业务逻辑层能够操作创建的底层 sql。

人们对业务逻辑层中的 AsQueryable() 有何看法？在我看来，这是对我的数据访问层的泄漏抽象，但它可能非常方便，也许是因为它位于 LINQ 命名空间（而不是 EF 命名空间）中，所以使用它并不是那么糟糕？

* * *

**编辑**

需要注意的一些有用的东西（以及反对省略 ToList() 的论点）是，如果调用它的代码以前依赖 ToList() 进行数据绑定，即避免错误“数据直接绑定到存储查询（DbSet、DbQuery、不支持 DbSqlQuery）。” 你不会得到一个编译时错误，只是一个运行时错误。因此，您需要确保在 UI 层之前确实调用了 ToList()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:33:20.013

我个人会在我的数据访问层中添加第二个执行 ToList() 的方法并调用它。这样更整洁：

```
functionA()
{
    return myDB.entityA.AsQueryable();
}

functionB()
{
    return functionA().ToList();
} 
```

将来某个时候，您可能需要从其他地方调用相同的函数。把它放在一个地方。

# spring - 使用多线程对spring rest ful webservice进行负载测试

> ID：15109648
> 
> 赞同：2
> 
> 时间：2013-02-27T10:24:08.950
> 
> 标签：spring, rest, load-testing

我已经实施了一个`restful service`. 我想对 spring rest ful 服务进行负载测试。在此我想检查有多少用户可以访问服务。怎么做..请给我一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:04:13.927

您可以使用多种工具进行负载测试。我发现[JMeter](http://jmeter.apache.org/)是一个非常强大的开源选项。特别是对于 REST 请求，您可以使用 HTTP 请求组件。

也就是说，我很想知道其他人在使用什么。

# javascript - javascript navigator.appName 和 userAgent 没有给出我想要的

> ID：15109651
> 
> 赞同：1
> 
> 时间：2013-02-27T10:24:10.850
> 
> 标签：javascript, browser-detection

我是全新的，刚开始`javascript`玩基本的`alert()`

我想知道我们如何能够检查`browser`正在使用的内容？所有都是 navigator 对象似乎并没有给出想要的东西。如果我使用`appName`它，我会全力以赴`Netscape`，我相信所有人都知道这一点。

有没有办法让我`alert();`检查和显示只是`IE`, `Firefox`, `Chrome`, 类似的东西？

如果使用`userAgent`，它会提供太多信息...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:31:41.913

首先，您不应该尝试进行*浏览器检测*，也就是说，所有浏览器都选择实现他们想要的 the`userAgent`和 the 。`appName`

要更正此问题，您应该尝试以下代码

```
 var BrowserDetect = {
    init: function () {
        this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
        this.version = this.searchVersion(navigator.userAgent)
            || this.searchVersion(navigator.appVersion)
            || "an unknown version";
        this.OS = this.searchString(this.dataOS) || "an unknown OS";
    },
    searchString: function (data) {
        for (var i=0;i<data.length;i++) {
            var dataString = data[i].string;
            var dataProp = data[i].prop;
            this.versionSearchString = data[i].versionSearch || data[i].identity;
            if (dataString) {
                if (dataString.indexOf(data[i].subString) != -1)
                    return data[i].identity;
            }
            else if (dataProp)
                return data[i].identity;
        }
    },
    searchVersion: function (dataString) {
        var index = dataString.indexOf(this.versionSearchString);
        if (index == -1) return;
        return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
    },
    dataBrowser: [
        {
            string: navigator.userAgent,
            subString: "Chrome",
            identity: "Chrome"
        },
        {   string: navigator.userAgent,
            subString: "OmniWeb",
            versionSearch: "OmniWeb/",
            identity: "OmniWeb"
        },
        {
            string: navigator.vendor,
            subString: "Apple",
            identity: "Safari",
            versionSearch: "Version"
        },
        {
            prop: window.opera,
            identity: "Opera",
            versionSearch: "Version"
        },
        {
            string: navigator.vendor,
            subString: "iCab",
            identity: "iCab"
        },
        {
            string: navigator.vendor,
            subString: "KDE",
            identity: "Konqueror"
        },
        {
            string: navigator.userAgent,
            subString: "Firefox",
            identity: "Firefox"
        },
        {
            string: navigator.vendor,
            subString: "Camino",
            identity: "Camino"
        },
        {       // for newer Netscapes (6+)
            string: navigator.userAgent,
            subString: "Netscape",
            identity: "Netscape"
        },
        {
            string: navigator.userAgent,
            subString: "MSIE",
            identity: "Explorer",
            versionSearch: "MSIE"
        },
        {
            string: navigator.userAgent,
            subString: "Gecko",
            identity: "Mozilla",
            versionSearch: "rv"
        },
        {       // for older Netscapes (4-)
            string: navigator.userAgent,
            subString: "Mozilla",
            identity: "Netscape",
            versionSearch: "Mozilla"
        }
    ],
    dataOS : [
        {
            string: navigator.platform,
            subString: "Win",
            identity: "Windows"
        },
        {
            string: navigator.platform,
            subString: "Mac",
            identity: "Mac"
        },
        {
               string: navigator.userAgent,
               subString: "iPhone",
               identity: "iPhone/iPod"
        },
        {
            string: navigator.platform,
            subString: "Linux",
            identity: "Linux"
        }
    ]

};
BrowserDetect.init(); 
```

顺便说一下，这段代码取自[quirksmode](http://www.quirksmode.org/js/detect.html)。

要使用此代码，您只需执行以下操作

```
var version = BrowserDetect.version;
var OS = BBrowserDetect.OS;
var browser = BBrowserDetect.browser; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:38:33.033

试试这个：

```
if( navigator.userAgent.toLowerCase().indexOf('chrome') > -1){
   // Google chrome
}
else if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1){
   // Firefox.
}
else if(navigator.userAgent.toLowerCase().indexOf('msie') > -1){
   // MSIE
}
else if(navigator.userAgent.toLowerCase().indexOf('safari') > -1){
   // Safari
} 
```

# asp.net-mvc - 如何存储在我的 Sitecore 网站上访问的最后一个页面，然后在用户返回时显示该页面

> ID：15109652
> 
> 赞同：0
> 
> 时间：2013-02-27T10:24:32.360
> 
> 标签：asp.net-mvc, sitecore, sitecore6

Sitecore 非常新，我正在构建一个没有身份验证（匿名）的 Sitecore Web 应用程序。这是一个大型项目，有很多分层的顶部、侧边菜单。

当用户重新访问该网站时，我需要加载上次访问的页面并突出显示菜单项。有人可以帮助我是否有任何提供此功能的 Sitecore API，如果没有，理想的解决方案是什么，即将上次访问的页面存储在客户端 cookie 上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:52:56.497

我可以看到的一个选项是像您说的那样将上次访问的页面存储在客户端 cookie 中，然后构建一个自定义处理器并将其放入

```
<httpRequestBegin> 
```

web.config 中的管道。

自定义处理器需要从 HttpRequestProcessor 类继承，并且您需要重写 Process 方法。

在这种情况下，我建议您使用这样的自定义处理器：

```
<processor type="Your.NameSpace.ClassName, Your.Assembly" />
<processor type="Sitecore.Pipelines.HttpRequest.ItemResolver, Sitecore.Kernel" /> 
```

并具有以下内容：

```
namespace Your.Namespace
{
    public class ClassName : HttpRequestProcessor
    {
        public override void Process(HttpRequestArgs args)
        {
            // Get cookie:
            var cookievalue = WebUtil.GetCookieValue("cookiename");
            WebUtil.Redirect(cookievalue);
        }
    }
} 
```

当然，这建议您将上次访问页面的 URL 存储在 cookie 中。当然，您也可以将上次访问项目的 ID 存储在 cookie 中，并从那里获取它的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:50:27.637

我刚刚看到这篇文章，正如 Holder 提到的，如果您启用并使用它，应该可以从 DMS 获取信息：

[从 Sitecore DMS (OMS) 配置文件中获取上次访问的页面](http://briancaos.wordpress.com/2011/11/18/get-last-visited-pages-from-a-sitecore-dms-oms-profile/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:39:45.250

据我所知，默认 API 中没有任何东西可以做到这一点。

Sitecore OMS中可能有一些东西，但我对OMS了解不多。

我认为 cookie 可能是最简单、最简单的方法。

# qt - QNetworkAccessManager：从串行 QIODevice 发布 http 多部分

> ID：15109656
> 
> 赞同：7
> 
> 时间：2013-02-27T10:24:39.700
> 
> 标签：qt, http, post, qt4, qnetworkaccessmanager

我正在尝试使用 QNetworkAccessManager 将 http 多部分上传到专用服务器。

多部分由描述上传数据的 JSON 部分组成。

数据从串行 QIODevice 中读取，该设备对数据进行加密。

这是创建多部分请求的代码：

```
QHttpMultiPart *multiPart = new QHttpMultiPart(QHttpMultiPart::FormDataType);

QHttpPart metaPart;
metaPart.setHeader(QNetworkRequest::ContentTypeHeader, "application/json");
metaPart.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant("form-data; name=\"metadata\""));
metaPart.setBody(meta.toJson());
multiPart->append(metaPart);

QHttpPart filePart;
filePart.setHeader(QNetworkRequest::ContentTypeHeader, QVariant(fileFormat));
filePart.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant("form-data; name=\"file\""));
filePart.setBodyDevice(p_encDevice);
p_encDevice->setParent(multiPart); // we cannot delete the file now, so delete it with the multiPart
multiPart->append(filePart);

QNetworkAccessManager netMgr;
QScopedPointer<QNetworkReply> reply( netMgr.post(request, multiPart) );
multiPart->setParent(reply.data()); // delete the multiPart with the reply 
```

如果 p_encDevice 是 QFile 的一个实例，那么该文件就可以正常上传。

如果使用专门的加密 QIODevice（串行设备），那么所有数据都是从我的自定义设备中读取的。但是 QNetworkAccessManager::post() 没有完成（挂起）。

我在[QHttpPart](http://qt-project.org/doc/qt-4.8/qhttppart.html#setBodyDevice)的文档中读到：

> 如果设备是顺序的（例如套接字，但不是文件），则应该在设备发出完成（）之后调用 QNetworkAccessManager::post()。

不幸的是，我不知道该怎么做。

请指教。

**编辑：**

QIODevice 根本没有finished() 插槽。更重要的是，如果没有调用 QNetworkAccessManager::post()，则根本不会从我的自定义 IODevice 中读取数据，因此设备将无法发出这样的事件。（第 22 条？）

**编辑2：**

QNAM 似乎根本不适用于顺序设备。请参阅[关于 qt-project 的讨论](http://qt-project.org/forums/viewthread/25317/)。

**编辑 3：**

我设法“愚弄”了 QNAM，使其认为它正在从非顺序设备读取，但查找和重置功能阻止了查找。这将一直有效，直到 QNAM 真正尝试寻找。

```
bool AesDevice::isSequential() const
{
    return false;
}

bool AesDevice::reset()
{
    if (this->pos() != 0) {
        return false;
    }
    return QIODevice::reset();
}

bool AesDevice::seek(qint64 pos)
{
    if (this->pos() != pos) {
        return false;
    }
    return QIODevice::seek(pos);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:45:27.897

您需要大量重构代码，以便传递给的变量在`post`您发布的函数之外可用，然后您需要使用代码定义的新插槽来执行`post`内部实现。最后，您需要将它们`connect(p_encDevice, SIGNAL(finished()), this, SLOT(yourSlot())`粘合在一起。

你大部分时间都在那里，你只需要重构它并添加一个可以绑定到`QIODevice::finished()`信号的新插槽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:26:03.193

与使用`QHttpPart`and相比，我手动创建 http post 数据的成功率更高`QHttpMultiPart`。我知道这可能不是你想听到的，而且有点乱，但它确实有效。在此示例中，我正在读取 a `QFile`，但您可以调用`readAll()`任何`QIODevice`. 还有一点值得注意，`QIODevice::size()`会帮你检查是否所有的数据都被读取了。

```
QByteArray postData;
QFile *file=new QFile("/tmp/image.jpg");
if(!(file->open(QIODevice::ReadOnly))){
    qDebug() << "Could not open file for reading: "<< file->fileName();
    return;
}
//create a header that the server can recognize
postData.insert(0,"--AaB03x\r\nContent-Disposition: form-data; name=\"attachment\"; filename=\"image.jpg\"\r\nContent-Type: image/jpeg\r\n\r\n");
postData.append(file->readAll());
postData.append("\r\n--AaB03x--\r\n");
//here you can add additional parameters that your server may need to parse the data at the end of the url
QString check(QString(POST_URL)+"?fn="+fn+"&md="+md);
QNetworkRequest req(QUrl(check.toLocal8Bit()));
req.setHeader(QNetworkRequest::ContentTypeHeader,"multipart/form-data; boundary=AaB03x");
QVariant l=postData.length();
req.setHeader(QNetworkRequest::ContentLengthHeader,l.toString());
file->close();
//free up memory
delete(file);
//post the data
reply=manager->post(req,postData);
//connect the reply object so we can track the progress of the upload        
connect(reply,SIGNAL(uploadProgress(qint64,qint64)),this,SLOT(updateProgress(qint64,qint64))); 
```

然后服务器可以像这样访问数据：

```
<?php
$filename=$_REQUEST['fn'];
$makedir=$_REQUEST['md'];
if($_FILES["attachment"]["type"]=="image/jpeg"){
if(!move_uploaded_file($_FILES["attachment"]["tmp_name"], "/directory/" . $filename)){
    echo "File Error";
    error_log("Uploaded File Error");
    exit();
};
}else{
print("no file");
error_log("No File");
exit();
}
echo "Success.";
?> 
```

我希望其中一些代码可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T12:46:55.683

我认为问题是 QNetworkAccessManager在上传（POST，PUT）数据时不支持[分块传输编码。](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)这意味着 QNAM 必须提前知道要上传的数据的长度，以便发送 Content-Length 标头。这意味着：

1.  要么数据**不是**来自顺序设备，而是来自随机访问设备，这些设备将通过 正确报告它们的总大小`size()`；
2.  或者数据来自顺序设备，但是设备已经全部缓冲了（这就是关于的注释的意思`finished()`），并且会报告（通过`bytesAvailable()`，我想）；
3.  或者数据来自没有缓冲所有数据的顺序设备，这反过来意味着
    1.  QNAM 读取并缓冲来自设备的所有数据（通过读取直到 EOF）
    2.  或者用户手动设置请求的 Content-Length 标头。

（关于最后两点，请参阅 QNetworkRequest::DoNotBufferUploadDataAttribute 的文档。）

因此，QHttpMultiPart 以某种方式共享这些限制，并且很可能在案例 3 中令人窒息。假设您不可能在内存中缓冲来自“编码器”QIODevice 的所有数据，您是否有可能知道编码数据的大小提前并在 QHttpPart 上设置内容长度？

（最后一点，你不应该使用 QScopedPointer。当智能指针超出范围时，这将删除 QNR，但你不想这样做。你想在 QNR 发出时删除它finished() ）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:16:01.167

从[qt-project](http://qt-project.org/forums/viewthread/25317/)中的单独讨论和检查源代码来看，QNAM 似乎根本不适用于顺序。文档和代码都是错误的。

# javascript - 迭代从 php 接收的 json 元素

> ID：15109658
> 
> 赞同：1
> 
> 时间：2013-02-27T10:24:40.003
> 
> 标签：javascript, jquery, json

我有一些来自于的 JSON`PHP`信息`Ajax`

**`{"5":"rahul","26":"karan","28":"jatin"}`**

我想获得分别是**5,26,28**的密钥 和单独的名称，`rahul,karan,jatin` 我在`java script`. 但没有得到我想要的结果。

```
for (var key in ajaxresponse) {
    if (ajaxresponse.hasOwnProperty(key)) 
    {
        alert(key + " -> " + JSON.stringify(ajaxresponse[key]));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:26:14.913

在一个非常简单的层面上，`for()`is using`ajaxresponse`和 if/alert are using `response`。

如果您粘贴了实际代码的代码？如果是这样，那可能是你的问题。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:28:58.780

按照这篇文章在 jQuery 的帮助下迭代你的 json 数据

[使用 jQuery 进行迭代](https://stackoverflow.com/questions/4233354/how-to-iterate-json-data-in-jquery)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:31:34.643

只需使用 2 个数组，即可获得您想要的：

```
var keys = [], vals = [], key,
ajaxresponse = JSON.parse(ajaxresponse);//parse JSON, which is quite important, too!
for (key in ajaxresponse)
{
    if (ajaxresponse.hasOwnProperty(key))
    {
        keys.push(key);
        vals.push(ajaxresponse[key]);
        console.log(key + '->' + ajaxresponse[key]);//no need to call JSON.stringify on a string
    }
}
console.log(keys.join(', '));//will list all keys, comma-separated
console.log(vals.join(', '));//ditto for values 
```

# javascript - 循环动态javascript一个接一个地转换，而不是一次全部转换

> ID：15109659
> 
> 赞同：2
> 
> 时间：2013-02-27T10:24:41.090
> 
> 标签：javascript, kineticjs

我想在 html5 画布中一个接一个地排队几个转换。循环转换函数一次调用所有转换。如果迭代次数超过 100，我不知道回调是否会这样做。我想做这样的事情：--

for(i=0;i<10;i++) { `move(circle,Math.floor(Math.random()*1000),400);` }

move 是我定义的函数，它可以进行一些转换。它工作得很好。

在这里，我希望圆圈在每次迭代时改变它的位置，但它只改变它的位置一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:14:40.203

是的，当然。它不完全是问题的解决方案，而是一种技巧。我首先将指令存储在一个单独的数组（transitionsequence）中，并使用递归回调回调（在动力学中定义的回调）。它不是很有效的方法，但我不在乎，只要它解决了问题。:)

`功能move2（我，限制）{

```
 var obj = transitionsequence[i].object;
    obj.transitionTo({
      y:100,
      duration: 0.3,
      callback : function()
      {
        obj.transitionTo({
          x:transitionsequence[i].x,
          duration:0.3,
          callback: function()
          {
            obj.transitionTo({
              y:transitionsequence[i].y,
              duration:0.3,
              callback: function()
              {
                if(i < limit)
                move2(i+1 , limit);
              }
            });

          }
        });
      }                          
    });

  };` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:57:53.853

你可以这样做：

```
var i=10;
var interval = window.setInterval(function(){
    move(circle,Math.floor(Math.random()*1000), 400);
    console.log(i);
    if(!--i) {
        window.clearInterval(interval);
    }
}, 400); // wait 400 msecs between calls 
```

或者，如果您的移动函数愿意在转换完成后调用回调函数：

```
var i=10;
var callback = function(){
    if(i--){
        move(circle,Math.floor(Math.random()*1000),400, callback);
    }
}
callback(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:56:48.573

您的方法不起作用的原因是浏览器没有机会在您的绘画步骤之间重新绘制画布。传统上，这是通过渲染一个步骤（帧）然后等待一小段时间来解决的，但是[最近的浏览器中提供了一个新功能：`requestAnimationFrame`](http://caniuse.com/requestanimationframe)，它正在解决这个确切的问题。

检查[Animating with javascript: from `setInterval`to`requestAnimationFrame`](http://hacks.mozilla.org/2011/08/animating-with-javascript-from-setinterval-to-requestanimationframe/)和[`requestAnimationFrame`for Smart Animating](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)（他们还展示了如何在不支持的浏览器中创建 shim 动画`requestAnimationFrame`）。

（我不知道 kinetic.js，但它甚至可能直接支持这样的 shim）。

# python - subprocess.call 使用字符串与使用列表

> ID：15109665
> 
> 赞同：41
> 
> 时间：2013-02-27T10:25:05.287
> 
> 标签：python, subprocess

我正在尝试将 rsync 与 subprocess.call 一起使用。奇怪的是，如果我传递 subprocess.call 一个字符串，它就可以工作，但它不适用于列表（ala，Python's doc）。

### 使用字符串调用 sp.call：

```
In [23]: sp.call("rsync -av content/ writings_raw/", shell=True)
sending incremental file list

sent 6236 bytes  received 22 bytes  12516.00 bytes/sec
total size is 324710  speedup is 51.89
Out[23]: 0 
```

### 使用列表调用 sp.call：

```
In [24]: sp.call(["rsync", "-av", "content/", "writings_raw/"], shell=True)
rsync  version 3.0.9  protocol version 30
Copyright (C) 1996-2011 by Andrew Tridgell, Wayne Davison, and others.
Web site: http://rsync.samba.org/
Capabilities:
    64-bit files, 64-bit inums, 32-bit timestamps, 64-bit long ints,
    socketpairs, hardlinks, symlinks, IPv6, batchfiles, inplace,
    append, ACLs, xattrs, iconv, symtimes

rsync comes with ABSOLUTELY NO WARRANTY.  This is free software, and you
are welcome to redistribute it under certain conditions.  See the GNU
General Public Licence for details.

rsync is a file transfer program capable of efficient remote update
via a fast differencing algorithm.

Usage: rsync [OPTION]... SRC [SRC]... DEST
  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST
  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST
  or   rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST
  or   rsync [OPTION]... [USER@]HOST:SRC [DEST]
  or   rsync [OPTION]... [USER@]HOST::SRC [DEST]
  or   rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]
The ':' usages connect via remote shell, while '::' & 'rsync://' usages connect
to an rsync daemon, and require SRC or DEST to start with a module name.

Options
 -v, --verbose               increase verbosity
 -q, --quiet                 suppress non-error messages
     --no-motd               suppress daemon-mode MOTD (see manpage caveat)
... snipped....
                             repeated: --filter='- .rsync-filter'
     --exclude=PATTERN       exclude files matching PATTERN
     --blocking-io           use blocking I/O for the remote shell
 -4, --ipv4                  prefer IPv4
 -6, --ipv6                  prefer IPv6
     --version               print version number
(-h) --help                  show this help (-h is --help only if used alone)
...snipped ...
rsync error: syntax or usage error (code 1) at main.c(1438) [client=3.0.9]
Out[24]: 1 
```

我如何使用列表有什么问题？你会如何解决它？我需要这个列表，因为我想使用变量。当然我可以使用：

```
 sp.call("rsync -av "+Orig+" "+Dest, shell=True) 
```

但我想了解如何`subprocess`理解列表与字符串。

### 设置 shell=False 和一个列表：

```
In [36]: sp.call(['rsync', '-av', ORIG, DEST], shell=False)
sending incremental file list

sent 6253 bytes  received 23 bytes  12552.00 bytes/sec
total size is 324710  speedup is 51.74
Out[36]: 0 
```

### 设置 shell=False 和一个字符串

```
In [38]: sp.call("rsync -av"+" "+ORIG+" "+DEST, shell=False)
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)
<ipython-input-38-0d366d3ef8ce> in <module>()
----> 1 sp.call("rsync -av"+" "+ORIG+" "+DEST, shell=False)

/usr/lib/python2.7/subprocess.pyc in call(*popenargs, **kwargs)
    491     retcode = call(["ls", "-l"])
    492     """
--> 493     return Popen(*popenargs, **kwargs).wait()
    494 
    495 

/usr/lib/python2.7/subprocess.pyc in __init__(self, args, bufsize, executable, stdin, stdout, stderr, preexec_fn, close_fds, shell, cwd, env, universal_newlines, startupinfo, creationflags)
    677                             p2cread, p2cwrite,
    678                             c2pread, c2pwrite,
--> 679                             errread, errwrite)
    680 
    681         if mswindows:

/usr/lib/python2.7/subprocess.pyc in _execute_child(self, args, executable, preexec_fn, close_fds, cwd, env, universal_newlines, startupinfo, creationflags, shell, p2cread, p2cwrite, c2pread, c2pwrite, errread, errwrite)
   1257                     if fd is not None:
   1258                         os.close(fd)
-> 1259                 raise child_exception
   1260 
   1261 

OSError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-27T10:40:40.943

`subprocess`处理命令参数的规则实际上有点复杂。

从[文档](http://docs.python.org/2/library/subprocess.html)：

> `args`应该是程序参数序列或单个字符串。默认情况下，要执行的程序是`args`if`args`序列中的第一项。如果`args`是字符串，则解释**取决于平台**，如下所述。有关与默认行为的其他差异，请参见`shell`和`executable`参数。**除非另有说明，否则建议`args`作为序列传递.... 如果`shell`为 True，则建议`args`作为字符串而不是序列传递。**

与`shell=False`：

> 在 Unix 上，如果`args`是一个字符串，则该字符串被解释为要执行的程序的名称或路径。但是，只有在不向程序传递参数的情况下才能做到这一点。
> 
> 在 Windows 上，如果`args`是一个序列，它将按照将[参数序列转换为 Windows 上的字符串中描述的方式转换为字符串](http://docs.python.org/2/library/subprocess.html#converting-an-argument-sequence-to-a-string-on-windows)。这是因为底层`CreateProcess()`对字符串进行操作。

与`shell=True`：

> 在带有 的 Unix 上`shell=True`，shell 默认为`/bin/sh`. 如果`args`是字符串，则该字符串指定要通过 shell 执行的命令。这意味着字符串的格式必须与在 shell 提示符下键入时的格式完全相同。这包括，例如，引用或反斜杠转义文件名，其中包含空格。**如果 args 是一个序列，则第一项指定命令字符串，任何附加项都将被视为 shell 本身的附加参数。**
> 
> 在带有 的 Windows 上`shell=True`，`COMSPEC`环境变量指定默认 shell。您需要`shell=True`在 Windows 上指定的唯一时间是您希望执行的命令内置到 shell 中（例如`dir`或`copy`）。您不需要`shell=True`运行批处理文件或基于控制台的可执行文件。

（所有重点都是我的）

# html - 使用 css 使区域变亮

> ID：15109667
> 
> 赞同：-2
> 
> 时间：2013-02-27T10:25:10.527
> 
> 标签：html, css

[http://asifslab.com](http://asifslab.com) 我想减轻徽标所在的徽标后面和附近的区域。这样做的目的是因为徽标的边框与背景混合在一起。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:37:10.807

要柔和地照亮徽标后面的区域，您可以在图像上使用 rgba 背景、圆形边框和浅色阴影的组合：

```
.head > img {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
} 
```

![截屏](../Images/f2042d69e50f3019e2b5f5b2e38318a3.png)

不要忘记添加供应商前缀以支持所有浏览器...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:30:01.180

您所说的“边框”是`body`. 要删除它，只需：

```
body { margin:0; } 
```

你可以做的是给`.head`分隔线一个不透明的背景：

```
.head { background:rgba(255,255,255,0.3); } 
```

**但是，旧浏览器不**支持此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:30:47.043

你可以做

1.  转换为PNG并使原始图像不透明度为0.2
2.  （更好）有一个`<div>`即位置：绝对内部`body`和相同的高度`body`，然后应用`background image`和`opacity: 0.2; filter: alpha(opacity=20);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:31:09.523

请尝试[CSS3](http://css3please.com)

```
.box_shadow {
  -webkit-box-shadow: 0px 0px 10px 0px #fff; /* Android 2.3+, iOS 4.0.2-4.2, Safari 3-4 */
          box-shadow: 0px 0px 10px 0px #fff; /* Chrome 6+, Firefox 4+, IE 9+, iOS 5+, Opera 10.50+ */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:33:22.603

您可以通过 2 种方式执行此操作 1`text-shadow`但您使用的是图像，因此您必须在 Photoshop 中执行此操作`layer style > drop shadow`并选择浅色您也可以这样做，但它以矩形形式覆盖，而不是在您的徽标文本后面

和

2是使用在矩形形式中也具有相同效果的背景使用`background:rgba(255,255,255,0.6);` 最后0.6是不透明度调整它以使颜色变暗或变亮

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T10:27:59.527

您可以添加具有 rgba 属性的背景以提供假光背景。

尝试这个

```
#logo {
   background-color: rgba(255,255,255, 0.5);
   /* Then other css */
} 
```

在您的情况下，将您的 .head 修改为此

```
.head {
  padding-left: 5%;
  background-color: rgba(255,255,255,0.5);
} 
```

# intellij-idea - 在 IntelliJ 11 中删除多个任务

> ID：15109671
> 
> 赞同：2
> 
> 时间：2013-02-27T10:25:16.473
> 
> 标签：intellij-idea

我有许多未使用的任务要删除，但除了一个一个删除之外找不到任何好的方法。我可以在 intelliJ 12 [help](http://www.jetbrains.com/idea/webhelp/creating-and-deleting-tasks.html#procedure%0A______to_delete_a_taskdeleting_tasks)中看到，您可以选择多项任务并删除它们，但这在 IntelliJ 11 中似乎不起作用。

从 workspace.xml 文件中删除所有任务是否安全？我可以在那里看到我的所有任务，但看不到它们的上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:30:34.590

您应该能够通过从任务下拉列表中选择任务，将鼠标悬停在要删除的任务上，然后选择右箭头键来删除它们（是的，这可以更容易）。

完成后，您应该有 2 个选项：

*   切换到
*   消除

删除选项将（显然）删除任务。

![任务删除](../Images/100a1182dda9ddc940b4192f3e886c28.png)

我希望这个对你有用 ：-）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-15T06:48:43.750

这是如何做的。您可以进行多项选择并一次性删除所有这些。

[http://www.jetbrains.com/idea/webhelp/deleting-tasks.html](http://www.jetbrains.com/idea/webhelp/deleting-tasks.html)

# java - 浏览孩子时专注于复合材料？

> ID：15109675
> 
> 赞同：1
> 
> 时间：2013-02-27T10:25:34.923
> 
> 标签：java, swt, eclipse-rcp, jface

我开发了一个自定义组件，当我通过一个 main 选项卡时需要获得焦点`Composite`。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:49:44.210

使用`Control#addKeyListener(..)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:43:27.600

您可以使用 定义 a 的跳位`Composite`顺序[`Composite#setTabList(Control[])`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Composite.html#setTabList(org.eclipse.swt.widgets.Control[]))。

[这](https://stackoverflow.com/questions/12923814/focusable-composite-in-swt)是使用此功能的示例。

# java - 在 BO SDK R4 中查找 Universe 元数据信息

> ID：15109686
> 
> 赞同：2
> 
> 时间：2013-02-27T10:26:06.230
> 
> 标签：java, business-objects, business-objects-sdk

我是 BO 新手，我需要找到 Universe 名称和相应的元数据信息，例如（表名、列名、连接条件等...）。我无法找到正确的开始方式。我查看了数据访问 SDK、语义 SDK。任何人都可以向我提供示例代码或启动过程。我搜索了很多，但我无法找到我查看此链接的任何示例示例，但该代码仅适用于 R2 服务器。

[http://www.forumtopics.com/busobj/viewtopic.php?t=67088](http://www.forumtopics.com/busobj/viewtopic.php?t=67088)

高度赞赏帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T17:58:17.253

假设您正在谈论基于 IDT 的 Universe，您将需要编写一些 Java 代码。[API 的 JavaDoc 可在此处获得](http://help.sap.com/javadocs/bip/40/slsdk/en/index.html)。

简而言之，您可以执行以下操作：

```
SlContext context = SlContext.create() ;
LocalResourceService service = context.getService(LocalResourceService.class) ;
String blxFile = service.retrieve("universe.unx","output directory") ;
RelationalBusinessLayer businessLayer = (RelationalBusinessLayer)service.load(blxFile);
RootFolder rootFolder  = businessLayer.getRootFolder() ; 
```

一旦你在 rootFolder 上有了一个钩子，你就可以使用 getChildren() 方法来钻取文件夹结构并访问各种可用的子文件夹/业务对象。

您可能还需要检查 CmsResourceService 类以访问存储在存储库中的 Universe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:18:05.350

要获得您所追求的信息，需要一个两部分的解决方案。第 1 部分使用 Rebean SDK 查看用于其中使用的 Universe 和对象名称的 WebI 报告。

第 2 部分是打破你最喜欢的 COM 编程工具，*因为我尽量避免使用 COM，所以我使用 Excel 宏编辑器*，并访问 BusinessObjects Designer 库。我目前拥有的主要代码片段是：

```
Dim boUniv As Designer.Universe
Dim tbl As Designer.Table
For Each tbl In boUniv.Tables
  Debug.Print tbl.Name
Next tbl 
```

这将打印 Universe 中的所有表。

您需要自行组合这两个部分，以获得 WebI 报告和 Universe 之间的依赖关系列表。

# c# - 如何获取 ParameterInfo 值？

> ID：15109688
> 
> 赞同：16
> 
> 时间：2013-02-27T10:26:07.980
> 
> 标签：c#, asp.net-mvc-4, stack-trace

我正在使用以下代码在方法中获取调用方法名称及其参数。

```
var stackTrace = new StackTrace();
var methodName = stackTrace.GetFrame(1).GetMethod().Name;
var parameters = stackTrace.GetFrame(1).GetMethod().GetParameters();

foreach (var parameterInfo in parameters)
{
    var name = parameterInfo.Name;
    var value = "How to get value?";
} 
```

现在我的问题是获取该参数的值。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:32:24.760

没有简单的方法可以做到这一点。我见过的唯一可行的方法是向应用程序添加代码，将外部调试器附加到自身并读取堆栈信息。John Robbins 正在展示这是他使用修改后的[MDBG来源的](http://www.microsoft.com/en-us/download/details.aspx?id=19621)[书](https://rads.stackoverflow.com/amzn/click/com/0735622027)。

# c++ - 让库工作（QuadProg++）

> ID：15109690
> 
> 赞同：1
> 
> 时间：2013-02-27T10:26:16.440
> 
> 标签：c++, quadprog

我正在尝试使用 Quadprog++ 库（[http://quadprog.sourceforge.net/](http://quadprog.sourceforge.net/)）。虽然我不明白说明。

> 要构建库，只需通过 ./configure; 制作; 进行安装循环。
> 
> 为了使用它，您需要在代码文件中包含“Array.hh”标头，其中包含向量和矩阵的方便 C++ 实现。

有一些“配置”和“MakeFile”文件，但它们没有扩展名，我不知道如何处理它们。文件夹中还有一些“.am”、“.in”和“.ac”扩展名。

这对任何人来说都很熟悉吗？我该怎么办？

（**编辑**：在 Windows 上。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:34:29.170

这个包是使用**autotools**构建的。您与之交谈的这些文件 (*.am, *.in...) 是因为工具`automake`, 和`autoconf`.

Autotools 是 GNU/Linux 世界中的事实标准。不是每个人都使用它，但如果他们使用它，您可以减轻包和分发经理的工作。实际上，它们应该可以移植到任何 POSIX 系统。

也就是说，我猜您使用的是非 unix 机器，例如 Windows，因此配置脚本不能直接在您的系统中运行。如果您坚持继续使用 Windows，您可能会这样做，您的选择是：

1.  使用 MinGW 和 MSYS 获得与自动工具兼容的最小构建环境。
2.  使用 Cygwin 并在您的 Windows 中创建类似 POSIX 的环境。
3.  创建一个VS项目，将库的所有源代码添加进去，编译和调试它们可能出现的错误，就好像代码是你写的一样。
4.  搜索已经完成工作并分发二进制 DLL 或类似内容的人。
5.  （我的最爱！）获得一台 Linux 机器，安装一个交叉编译器环境来构建 Windows 二进制文件，然后执行`configure --host i686-mingw32 ; make`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:32:53.707

该指令说明了如何在 Linux 中构建像 tarball 一样交付的程序。要了解，请查看[为什么总是 ./configure; 制作; 进行安装；作为3个单独的步骤？](https://stackoverflow.com/questions/10961439/why-always-configure-make-make-install-as-3-seperate-steps).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:41:14.037

一开始这可能会让人感到困惑，但是你去吧。输入这些，如下所示：

```
cd <the_directory_with_the_configure_file>
./configure 
```

此时，一堆东西会在屏幕上滚动过去。这是 Autoconf 正在运行（有关更多详细信息，请参阅[http://www.edwardrosten.com/code/autoconf/index.html](http://www.edwardrosten.com/code/autoconf/index.html)）

完成后，键入：

```
make 
```

这将启动构建过程。（要了解有关 GNU make 的更多信息，请查看[综合 gnu make / gcc 教程](https://stackoverflow.com/questions/2176427/comprehensive-gnu-make-gcc-tutorial)）。这将导致打印出几条构建消息。

完成后，键入：

```
sudo make install 
```

系统将要求您输入 root 密码。如果这不是您自己的计算机（或者您没有超级用户访问权限），请联系管理此计算机的人员。

如果这是您的计算机，请输入 root 密码，该库应安装在 /usr/local/lib/ 或类似的位置（仔细观察屏幕以查看 .so 文件的位置）。

其余部分（包括 .hh 文件）似乎不言自明。

希望有帮助！

# jquery - 如何将 jquery 对话框拖动到 nyromodal iframe 之外

> ID：15109693
> 
> 赞同：1
> 
> 时间：2013-02-27T10:26:31.210
> 
> 标签：jquery, html, nyromodal

我目前正在执行一项任务，其中我打开了 nyromodal iframe 并在 nyromodal 内部打开了 jquery 可拖动对话框。它在 iframe 内工作正常，但我无法将 jquery 对话框拖到 iframe 之外。有人知道我该怎么做吗？

# iphone - 如果图像是数据形式，如何将 SdWebImage 用于图像？

> ID：15109694
> 
> 赞同：0
> 
> 时间：2013-02-27T10:26:31.543
> 
> 标签：iphone, ios5

我是 iphone 开发新手。当图像以 url 的形式提供时，使用 SdwebImage 很好。但是当谈到以数据形式存在的图像时，我无法使用它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:29:59.697

您必须转换`NSData`为`NSString`，在此之后您必须转换为`NSString`in 才能`NSURL`使用它`SDWebImage`：-

```
NSString *urlString = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding]; 
NSURL *url = [[NSURL alloc] initWithString:urlString]; 
```

# php - 如果放置在循环之前，包含一个 php 脚本会使帖子缩略图消失

> ID：15109696
> 
> 赞同：0
> 
> 时间：2013-02-27T10:26:34.347
> 
> 标签：php, wordpress, wordpress-theming

我正在使用 php 脚本来获取一些外部数据以显示在我的 wordpress 网站上。这已经完美运行了一年，但是当我不得不重新排列首页上的 som 元素时，循环中的帖子缩略图突然停止显示。

经过一些研究，我发现如果我在循环**之后**包含我的 php 脚本，则会出现帖子缩略图，但如果它包含**在**循环之前，则帖子缩略图会神秘地消失。

PHP 日志没有给我任何提示，当循环之前包含脚本时，Wordpress 只会在后缩略图块中生成 NO html。

任何人有任何想法为什么会发生这种情况？我怎么能绕过它？

（PS。我需要在循环之前包含脚本的原因是样式/ css 的问题。我想我可以做一些 CSS-hacking 以使其在循环之后工作，但我宁愿找出导致问题的原因。）

这是这样的代码：

我的 index.php 应该出现帖子缩略图（**这不起作用**）：

```
<!-- ### This includes the php script, and works if it's placed bellow the loop/#leftcontent ### -->
<div id="rightcontent">
    <?php include("rightcontentreleases.php"); ?>
</div>

<!-- ### Standard wordpress loop ### -->
<div id="leftcontent">

    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

           <div class="post">

                    <h2 class="posttitle"><a 
                        href="<?php the_permalink() ?>" 
                        rel="bookmark" 
                        title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>

                        <!-- ### The post thumbnail ### -->
                        <a href="<?php the_permalink() ?>" ><?php if (has_post_thumbnail()) {the_post_thumbnail();}?></a>

                    <div class="entry">
                        <?php the_excerpt(); ?><a class="readmore" href="<?php the_permalink() ?>">Read more</a>
                    </div>

            </div><!-- .post -->

 <?php endwhile; else: ?><p>Sorry, no posts matched your criteria.</p><?php endif; ?>

</div><!-- #leftcontent --> 
```

**这有效**：

```
<!-- ### Standard wordpress loop ### -->
    <div id="leftcontent">

        <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

               <div class="post">

                        <h2 class="posttitle"><a 
                            href="<?php the_permalink() ?>" 
                            rel="bookmark" 
                            title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>

                            <!-- ### The post thumbnail ### -->
                            <a href="<?php the_permalink() ?>" ><?php if (has_post_thumbnail()) {the_post_thumbnail();}?></a>

                        <div class="entry">
                            <?php the_excerpt(); ?><a class="readmore" href="<?php the_permalink() ?>">Read more</a>
                        </div>

                </div><!-- .post -->

     <?php endwhile; else: ?><p>Sorry, no posts matched your criteria.</p><?php endif; ?>

    </div><!-- #leftcontent -->

    <!-- ### This includes the php script, and works if placed after the loop like this ### -->
    <div id="rightcontent">
        <?php include("rightcontentreleases.php"); ?>
    </div> 
```

外部脚本简单地遍历外部数据库，并显示一些标准 html：

```
<?php // this script connects to the external database, and defines some functions fetching the data ?>
<?php include_once("tigernet.php"); tigernetmysql(); get3upcoming(); ?>

<?php if (mysql_fetch_assoc($resultupcoming) > 0): ?>
<div class="rightcontentreleases" id="upcomingreleases">
<h2 class="head">Upcoming Releases</h2>

<?php while ($row = mysql_fetch_assoc($resultupcoming)) { ?>
<div class="onelatestrelease">
    <a href="<?php bloginfo( 'wpurl' ); ?>/releases"><img class="albumartwork" src="http://media.tigernet.no/images/item/full/<?= $row["code"] ?>.jpg" /></a>
    <h2 class="artist"><?= $row["artist"] ?></h2><br/>
    <h3 class="title"><?= $row["title"] ?></h3><br/>
    <?php if (isset($row['url'])): ?><div class="soundcloudplayer_right">
            <object height='18'><param name='movie'value='http://player.soundcloud.com/player.swf?url=<?= $row['url'] ?>&auto_play=false&player_type=tiny&show_duration=false&show_user=false&show_playcount=false&font=Arial&color=92140e'>
                                <param name='allowscriptaccess' value='always'> 
                                <param name='wmode' value='transparent'>
                                <embed wmode='transparent' allowscriptaccess='always' height='18' src='http://player.soundcloud.com/player.swf?url=<?= $row['url'] ?>&auto_play=false&player_type=tiny&show_duration=false&show_user=false&show_playcount=false&font=Arial&color=92140e' type='application/x-shockwave-flash'>
                                </object>
    </div><?php endif; ?>
</div><!-- .onelatestrelease -->
<?php } ?>

</div><!-- #latestreleases -->
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:47:35.800

在某种程度上，您`rightcontentreleases.php`一定是弄乱了回答`have_posts()`. 正确的做法是调查`have_posts()`并验证发生这种情况的原因和地点。

或者您可以采用一种解决方法：

```
<?php ob_start(); ?>
<!-- ### Standard wordpress loop ### -->';
<div id="leftcontent">
...
</div><!-- #leftcontent -->
<?php $leftContent = ob_get_clean(); ?>
<div id="rightcontent">
<?php include("rightcontentreleases.php"); ?>
</div>
<?php print $leftContent; unset($leftContent); ?> 
```

这基本上执行了标准循环**，将输出保存**到`$leftContent`. 因此，您处于“一切正常”所描述的情况。

然后您执行正确的内容，这也将起作用，并将在其他任何事情之前输出正确的内容。

最后，您输出`$leftContent`，此时它只是惰性的 HTML，不能与任何东西混淆。

但请记住，这是一种**解决方法**。它将在简单的设置中工作。更复杂的设置仍然不起作用，并且需要您调查真正的问题在哪里。

我假设你没有得到缩略图的原因是如果函数`have_posts()`在新的内容块之后被调用，它会突然返回 FALSE。如果它触发了错误，则必须查看应用程序的日志记录，如果没有发现错误，请了解为什么未报告此错误。但是现在让我们假设没有错误，并且您只需要快速找到出错的地方。

为此，您可以尝试不同的技巧，方法是在代码中包含这样的行

```
 have_posts() or die("SOMETHING JUST CLEARED MY POSTS!"); 
```

...我们知道，如果您将其放在开头，它将不会触发，并且帖子将得到输出。我们也知道，如果你反转这两个块，那条线就会触发。

因此，通过在生成右侧内容的代码中移动该行，从顶部开始，您将找到它触发的位置。之前的操作显然对您的帖子标志做*了一些事情*（可能是通过关闭数据库连接或类似的事情）。一旦你发现它做了什么，你就可以开始计划如何规避这个问题。

# php - modal win8 Metro风格网站

> ID：15109706
> 
> 赞同：1
> 
> 时间：2013-02-27T10:27:06.033
> 
> 标签：php, html, windows-8, hyperlink, modal-dialog

我正在编写一个基于新的 windows 8 Metro 风格的网站，这工作正常。我有一个磁贴链接到同一页面上的“模态”，它从页面顶部下拉，就像一个灯箱，它使背景变暗。

我现在要为页面上的每个图块（大约 10 个）设置一个模式，所以我想我可以有一个名为 modal 的单独页面并将信息传递给它。

我遇到的问题是下面的链接正在调用 modal.php 但不会转到 modal0 div。

瓷砖链接：

```
<div class=" tile wide imagetext wideimage " role="button" data-toggle="modal" onClick="window.location.href='modal.php#modal0';"> 
```

模态的.php

```
<div id="modal0" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

我是不是做错了什么，因为这是我第一次玩模态。

# if-statement - 如何在 if..elseif..else..endif 条件中实际跳过语句

> ID：15109710
> 
> 赞同：0
> 
> 时间：2013-02-27T10:27:21.480
> 
> 标签：if-statement, vbscript, nested

```
if (some condition) --suppose this gets true
    ....
    ....
elseif (some condition)--this also gets false
    ...
    ...
else 
    ... --this else condition becomes false
    ...
    if (some condition)
        ..
    else
        ..
    endif-- stops execution when it gets here,doesnt moves on to next endif

endif 
```

现在我想做的是跳过其他部分。为此，我将跳过它，直到它获得一个 endif 关键字。但是当它在 else 部分中获得第一个 endif 时，它会停止执行。如何跳过该 endif 以使其与 if 的确切 endif 匹配。真的很混乱，请帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:35:04.270

你需要让你的条件逻辑直截了当：

```
magicNumber = 42

If magicNumber = 42 Then
    wscript.echo "Magic number is 42!"
ElseIf magicNumber > 23 Then
    wscript.echo "Magic number is more than 23"
Else
    wscript.echo "Magic number is 23 or less"
    If magicNumber <= 0
         wscript.echo "Woah! Magic number is negative!"
    else
         wscript.echo "Phew, at least Magic number is not zero or negative"
    End if
    wscript.echo "Bye!"
End if
wscript.echo "End."

' Output: 
' Magic number is 42!
' End. 
```

因为第一个条件是`True`，所以不会测试和执行其他条件。

# python - python paramiko 与文件输入连接

> ID：15109713
> 
> 赞同：2
> 
> 时间：2013-02-27T10:27:28.057
> 
> 标签：python, paramiko, file-io

我需要在多台服务器上运行一个命令，我正在使用以下代码：

```
 import paramiko, getpass, fileinput

    username = raw_input("Enter your username [%s]: " % getpass.getuser())
    passwd = getpass.getpass("Enter your password: ")
    serverlist = raw_input("Enter the server list file path with filename: ")

    for line in fileinput.input([serverlist]):
        paramiko.util.log_to_file('paramiko.log')
        s = paramiko.SSHClient()
        #s.load_system_host_keys()
        s.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        s.connect(line, 22, username, passwd)
        stdin, stdout, stderr = s.exec_command('uptime')
        print stdout.read()
        s.close() 
```

但是，此代码产生以下错误消息：

```
 Traceback (most recent call last):
      File "test_paramiko.py", line 15, in 
        s.connect(line, 22, username, passwd)
      File "/usr/lib/python2.6/site-packages/paramiko/client.py", line 277, in connect
        socket.getaddrinfo(hostname, port):
    socket.gaierror: [Errno -2] Name or service not known 
```

我不确定我在这里缺少什么。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:31:04.353

您可能从`serverlist`. 添加类似：

```
print('Connecting with "%s"...' % (line)) 
```

此名称可以包含 CR、LF、空格或为空。核实。如果它有换行符，那么使用

```
hostname = line.strip()
print('Connecting with "%s"...' % (hostname))
s.connect(hostname, 22, username.strip(), passwd.strip()) 
```

`username`, 和`passwd`变量也是如此。但请确保您的用户名和密码不能以空格或其他空格结尾。而不是`strip()`你可以使用`rstrip()`.

# java - 尝试调用方法时出现 IllegalArgumentException

> ID：15109714
> 
> 赞同：1
> 
> 时间：2013-02-27T10:27:31.820
> 
> 标签：java, reflection, illegalargumentexception

我的代码如下：

```
Class<?> targetClass = Class.forName(class_name);
mthd = targetClass.getDeclaredMethod(function_name, new Class[]{Object.class});
mthd.invoke(new Object());  //fails 
```

为什么当我尝试调用我的方法时`IllegalArgumentException`被抛出？

```
java.lang.IllegalArgumentException
at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
... 
```

我错过了什么？

更新：被调用的函数是：

```
public static String categoryCount(Object val){
        System.out.println(val.toString());
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:33:08.197

`mthd.invoke`在你的情况下需要两个论点。第一个是运行被调用方法的对象，第二个是`categoryCount(val)`.

如果是静态方法（如您所见），请使用：

```
mthd.invoke(null, new Object()); 
```

对于非静态方法，请使用：

```
mthd.invoke(myObj, new Object()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:35:18.007

```
Class<?> clazz = Class.forName(class_name);
Method method = clazz.getMethod("categoryCount", Object.class);
Object o = method.invoke(null, new Object()); 
```

工作正常

# gwt - SelectionCell 中的默认选项

> ID：15109717
> 
> 赞同：0
> 
> 时间：2013-02-27T10:27:35.510
> 
> 标签：gwt

当我将字符串列表传递给 selectionCell 时，第一个元素将被选为默认值，如何更改默认值？例如，在运行时，我希望将项目`index=i`视为默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:55:26.297

无法在该单元格中设置索引

你只能在那里使用 String

```
SelectionCell statusOptionsCell = new SelectionCell(statusType);
        Column<InvitedUser, String> statusColumn = new Column<Object, String>(
                statusOptionsCell) {

            @Override
            public String getValue(Object object) {
                return object.getStatus();  //value set at runtime
            }
        }; 
```

如果你只需要数组

```
String[] myaaray= {"one","two","three"};

  SelectionCell statusOptionsCell = new SelectionCell(statusType);
            Column<InvitedUser, String> statusColumn = new Column<Object, String>(
                    statusOptionsCell) {

                @Override
                public String getValue(Object object) {
                    return st[1];  //pass integer as i here at runtime
                }
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:34:57.203

选择单元格用于单元格小部件。因此，让我们以 CellTable 为例。在单元格表中，每一行对应一个记录，即一个模型/POJO。每列对应于模型/POJO 中的一个属性。因此，您的选择单元格列应绑定到模型中的一个属性。

`Set that property's value to whatever you want as a default value before supplying that model to the Cell Table`.

一旦你设置了模型的属性，它的所有单元格表和共同的责任将值设置到选择单元格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T22:13:48.317

我有一个在运行时更改 SelectionCell 值的真实示例。我想要为每一行执行可能的操作列表。选择（并执行）一个操作后，我希望将选择设置回它的默认值。

```
ArrayList<String> options = new ArrayList<String>();
options.add("Choose...");
options.add("Action 1");
options.add("Action 2");

final SelectionCell cell = new SelectionCell(options);

Column<MyObject, String> column = new Column<MyObject, String>(cell) {
    @Override
    public String getValue(MyObject object) {
        return null;
    }
};

column.setFieldUpdater(new FieldUpdater<MyObject, String>() {
    @Override
    public void update(final int index, MyObject object, String value) {
        // perform selected action
        // action name is stored in the `value` parameter
        // ...

        // back to default value
        cell.clearViewData(object);

        // ... or back to other value
        // cell.setViewData(object, "Action 1");

        table.redrawRow(index);
    }
});

table.addColumn(column, "Test"); 
```

请注意，该操作与`update`方法挂钩，因此仅当所选值发生更改时才会触发该操作。它永远不会以默认值 ( `"Choose..."`) 触发。

# html - 在 SVG 中使用外部参数

> ID：15109720
> 
> 赞同：3
> 
> 时间：2013-02-27T10:27:46.740
> 
> 标签：html, svg

我是 HTML 和 SVG 编码的新手，有一个问题

我创建了一个 HTML 模板，它使用 URL 搜索来导入 2 个变量（即 AItext 和 AItextcolour）我想使用这些并将它们传递给 SVG 代码。我已经设法使用 AItext 来改变文本显示，但 AItextcolour 似乎并没有改变文本的颜色。

下面是我正在使用的 HTML 代码

```
<script language="JavaScript">
  function get_AI_variables()
  {
   var parameters = location.search.substring(1).split("&");
   document.getElementById("AItext").innerHTML = parameters[0];
   document.getElementById("AItextcolour").innerHTML = parameters[1];
  }
</script>
<body onload="get_AI_variables()">
  <h2>Received: </h2>
  <p><b>Text: </b> <text id="AItext"/></p>
  <p><b>Fill colour: </b><text id="AItextcolour"/></p>
  <svg>
    <defs>
      <filter id="shadow_filter" x="0" y="0" width="200%" height="200%">
        <feOffset result="offOut" in="SourceAlpha" dx="5" dy="5" />
        <feGaussianBlur result="blurOut" in="offOut" stdDeviation="5" />
        <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
      </filter>
      <path id="path1" d="M100 100 C 100 100, 200 0, 400 100" />
    </defs>
    <text  x=0 y=150 fill=url(#AItextcolour) stroke=Blue stroke-width=4 style=font-family:Verdana;font-size:50;font-weight:bold filter=url(#shadow_filter)>
      <textPath xlink:href="#path1">
        <tref xlink:href="#AItext" />
      </textpath>
    </text>
  </svg>
</body> 
```

我还希望有字体大小、文本路径、笔划宽度的变量，所以也希望这些变量也能正常工作。所以我的问题是，您如何获取在搜索 URL 中导入的值，以像我对 AItext 值所做的那样对 SVG 代码进行更改？

预先感谢您的任何帮助

加雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:47:36.557

Gareth，我玩过您的示例，现在可以提供以下解决方案。我受到[这个解决方案](https://stackoverflow.com/a/5647087/1545993)的启发，因此下载[了这个库](http://keith-wood.name/svg.html)。该解决方案并不完美，但它确实有效。比方说，这是初稿;-)。

```
<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TEST variable pass</title>

  <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
  <script src="jquery.svg.js"></script>
  <script language="JavaScript">
        function get_AI_variables() {
             var parameters = location.search.substring(1).split("&");
                document.getElementById("AItext").innerHTML = parameters[0];
                document.getElementById("AItextcolour").innerHTML = parameters[1];
        }
  </script>
</head>

<body onload="get_AI_variables()">
<div>
 <h2>Received: </h2>
 <p><b>Text: </b> <text id="AItext"/></p>
 <p><b>Fill colour: </b><text id="AItextcolour"/></p>
</div>
<script>
$(document).ready(function() {
  // https://stackoverflow.com/a/5647087/1545993
  // http://keith-wood.name/svg.html
  var parameters = location.search.substring(1).split("&");
  $('#idText').css('fill',parameters[1]);
 });
</script>
<div>
  <svg>
    <defs>
      <filter id="shadow_filter" x="0" y="0" width="200%" height="200%">
        <feOffset result="offOut" in="SourceAlpha" dx="5" dy="5" />
        <feGaussianBlur result="blurOut" in="offOut" stdDeviation="5" />
        <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
      </filter>

      <path id="path1"
        d="M100 100 C 100 100, 200 0, 400 100" />
    </defs>

    <text  x=0 y=150 id="idText"
      style="fill:red;
             stroke:Blue;
             stroke-width:4;
             style=font-family:Verdana;font-size:50;font-weight:bold;
             filter:url(#shadow_filter);
            ">
      <textPath xlink:href="#path1">
        <tref xlink:href="#AItext" />
      </textpath>
    </text>
  </svg>
</div>
</body>
</html> 
```

![在此处输入图像描述](../Images/e0b685983e344464da8d1df9d87716e8.png)

# entity-framework - Required attribute for foreign keys

> ID：15109726
> 
> 赞同：5
> 
> 时间：2013-02-27T10:28:06.227
> 
> 标签：entity-framework, ef-code-first

I'm just thinking about a foreign key attribute in Entity Framework (using code first approach). I want to ensure that this foreign key is always set, in other words: It should be required.

Is using the "Required"-attribute/data annotation a clean solution for this? Or should this data annotation be used for user input only?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T10:39:49.357

I don't think you need to have required attribute in the data annotation . If you have declared it as

```
public int ForeignKeyName{get;set;} 
```

It will take as required by EF. And if it

```
 public int? ForeignKeyName{get;set;} 
```

it will be taken as optional(nullable) by entity framework Conventions . I'm not sure what kind of framework you are using for the web(front end Ex: asp.net mvc). Depend on that you need to think about that input level.

# windows-7 - 在 Windows 上安装 Bugzilla 时出错

> ID：15109734
> 
> 赞同：2
> 
> 时间：2013-02-27T10:28:31.963
> 
> 标签：windows-7, bugzilla

我正在尝试在 Windows 7 操作系统上安装 Bugzilla 4.2.4。

我已完成以下步骤：

1.  安装 og Apache Server 2.2

2.  安装 Active perl 5.16

3.  MySQl 5.6 的安装

4.  安装 Bugzilla 工具所需的 Perl 模块。

完成上述步骤后，我已通过命令提示符运行 CheckSetup.pl。

之后我面临以下错误：

> “InnoDB 已禁用您的 MySQL 安装。Bugzilla 需要启用 InnoDb。请启用它，然后重新运行 checksetup.pl”。

任何人都可以帮助进一步安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-01T19:56:42.503

您需要在 my.cnf中启用*InnoDB并重新启动服务*

[http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#option_mysqld_innodb](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#option_mysqld_innodb)

# php - 通过 ajax 发布值时更新表字段时出错

> ID：15109735
> 
> 赞同：1
> 
> 时间：2013-02-27T10:28:35.780
> 
> 标签：php, javascript, ajax, jquery

我正在尝试通过 ajax 更新学生的个人资料，脚本运行良好，我得到了 dataString 中传递的所有值，但是当通过 ajax 调用 savebasic.php 时，它没有更新字段的值。

脚本：

```
<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$(".savestudent").click(function() {

    var _firstname=$("#firstname").html();
    var _lastname=$("#lastname").html();
    var _gender=$("#gender").html();
    var _location=$("#location").html();
    var _aboutme=$("#about").html();
    var _dob=$("#dob").html(); 

    var dataString= 'fname='+ _firstname + '&lname='+ _lastname + '&gender='+ _gender + '&location='+ _location + '&about='+ _aboutme + '&dob='+ _dob ;
    alert(dataString);

    $.ajax
    ({

    type: "POST",
    url: "savebasic.php",
    data: dataString,
    cache: false,
    success: function(html)
    {

        alert('success');
    },
    error: function(html)
    {

    }
    });
    });
});

</script> 
```

savebasic.php：

```
<?php

include_once('controller/profile.controller.php');
$profileObject=new ProfileController();

        $fname=$_POST['fname'];
        $lname=$_POST['lname'];
        $gender='M';
        $loc=$_POST['location'];
        $about=$_POST['about'];
        $birth=$_POST['dob'];   

$upt=$profileObject->updateUserprofile('59',$fname,$lname,$birth,$gender,$loc,$about);

?> 
```

如果我直接在 savebasic.php 上传递值，它就可以工作。但是在通过 ajax 时它什么也不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:30:52.537

您以错误的方式在 ajax 中使用数据字段。你应该做：

```
data:{'fname=': _firstname, 'lname=':_lastname,'gender=':_gender,'location=': _location} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:32:52.417

您的数据字符串的设置类似于 GET - 正常语法是：

```
data: {'fname': _firstname, 'lname':_lastname .... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:34:36.380

```
Change your code to assign data in following way

<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$(".savestudent").click(function() {

    var _firstname=$("#firstname").html();
    var _lastname=$("#lastname").html();
    var _gender=$("#gender").html();
    var _location=$("#location").html();
    var _aboutme=$("#about").html();
    var _dob=$("#dob").html(); 

    var data= {     fname:_firstname,
                    lname:_lastname,
                    gender=: _gender ,
                    location:_location,
                    about: _aboutme,
                    dob: _dob};
    alert(data);

    $.ajax
    ({

    type: "POST",
    url: "savebasic.php",
    data: data,
    cache: false,
    success: function(html)
    {

        alert('success');
    },
    error: function(html)
    {

    }
    });
    });
});

</script> 
```

此外，从元素中获取值的方法也不正确。如果名字、姓氏和其他字段在文本框中，那么您应该像这样访问那些。

```
var _firstname=$("#firstname").val(); 
```

或者，如果它们在 span 或 div 标签中，则访问这样的

```
var _firstname=$("#firstname").text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:37:08.683

你的数据部分是错误的。你也忘了提到`dataType` 我已经编辑了你的代码。

一探究竟 ：

```
<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$(".savestudent").click(function() {

    var _firstname=$("#firstname").html();
    var _lastname=$("#lastname").html();
    var _gender=$("#gender").html();
    var _location=$("#location").html();
    var _aboutme=$("#about").html();
    var _dob=$("#dob").html(); 

   // var dataString= 'fname='+ _firstname + '&lname='+ _lastname + '&gender='+ _gender + //'&location='+ _location + '&about='+ _aboutme + '&dob='+ _dob ;
   // alert(dataString);

    $.ajax
    ({

    type: "POST",
    contentType: 'text/html',
dataType: 'text',
    url: "savebasic.php",
    data: {
      fname: _firstname, lname :_lastname, gender :_gender, location : _location 
      ,about : _aboutme , dob : _dob
    },
    cache: false,
    success: function(html)
    {

        alert('success');
    },
    error: function(html)
    {

    }
    });
    });
});

</script> 
```

这将为您提供 100% 正确的结果。

# iphone - 使用 NSPredicate 如何使用 1 个实体从核心数据中过滤值

> ID：15109741
> 
> 赞同：0
> 
> 时间：2013-02-27T10:28:47.880
> 
> 标签：iphone, ios, core-data, nsfetchrequest

我有一个实体和三个属性，称为项目、费率、类别。我想从类别属性中过滤值。

```
 if (managedObjectContext==nil) {
        AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
        managedObjectContext = appDelegate.managedObjectContext;

    }

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Restaurantmenu" inManagedObjectContext:managedObjectContext];
    [request setEntity:entity];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"('category' contains[c] 'Fast Foood')"];
[request setPredicate:predicate];
NSLog(@"Pre %@",predicate);
    NSError *error = nil;
    NSMutableArray *mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
    if (mutableFetchResults == nil) {
        // Handle the error.
    }

    // Set self's events array to the mutable array, then clean up.
    [self setDataarr:mutableFetchResults]; 
```

但我不能这样做请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:03:30.303

从下面的代码中替换您的谓词初始化并尝试

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"category CONTAINS[c] %@", @"Fast Foood"]; 
```

# c# - 添加动态添加的标题后读取 Gridview 的确切行？

> ID：15109749
> 
> 赞同：0
> 
> 时间：2013-02-27T10:29:17.020
> 
> 标签：c#, asp.net

我正在动态添加表格标题行，如下所示。它被正确渲染。所以现在我有2个标题。

```
protected void gvCustomers_RowDataBound(object sender, GridViewRowEventArgs e) 
```

{

```
if (e.Row.RowType == DataControlRowType.Header)
{
    GridViewRow newHeaderRow = new GridViewRow(-1, -1, DataControlRowType.Header, DataControlRowState.Normal);

    TableCell cell1 = new TableHeaderCell();
    cell1.ColumnSpan = 1; //e.Row.Cells.Count;
    cell1.Text = "Expected";

    TableCell cell2 = new TableCell();
    cell2.ColumnSpan = 2;
    cell2.Text = "One";

    TableCell cell3 = new TableCell();
    cell3.ColumnSpan = 2;
    cell3.Text = "Two";

    TableCell cell4 = new TableCell();
    cell4.ColumnSpan = 2;
    cell4.Text = "Three";

    newHeaderRow.Cells.Add(cell1);
    newHeaderRow.Cells.Add(cell2);
    newHeaderRow.Cells.Add(cell3);
    newHeaderRow.Cells.Add(cell4);

    ((GridView)sender).Controls[0].Controls.AddAt(0, newHeaderRow);
} 
```

}

如果我的 gridview 有 3 行，并循环通过 gridview 它将只读取 2 行。它正在跳过最后一行。

有什么想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:44:33.107

我解决了这个问题。在 RowCreated 事件上编写此代码。我在 RowDataBound 上编写了这段代码，因此创建的标题行不一致。

```
protected void gvCustomers_RowCreated(object sender, GridViewRowEventArgs e) 
```

{

if (e.Row.RowType == DataControlRowType.Header) { GridViewRow newHeaderRow = new GridViewRow(-1, -1, DataControlRowType.Header, DataControlRowState.Normal);

```
TableCell cell1 = new TableHeaderCell();
cell1.ColumnSpan = 1; //e.Row.Cells.Count;
cell1.Text = "Expected";

TableCell cell2 = new TableCell();
cell2.ColumnSpan = 2;
cell2.Text = "One";

TableCell cell3 = new TableCell();
cell3.ColumnSpan = 2;
cell3.Text = "Two";

TableCell cell4 = new TableCell();
cell4.ColumnSpan = 2;
cell4.Text = "Three";

newHeaderRow.Cells.Add(cell1);
newHeaderRow.Cells.Add(cell2);
newHeaderRow.Cells.Add(cell3);
newHeaderRow.Cells.Add(cell4);

((GridView)sender).Controls[0].Controls.AddAt(0, newHeaderRow); 
```

}

# .net - Visual Studio 2012 - 高效查找循环引用

> ID：15109753
> 
> 赞同：9
> 
> 时间：2013-02-27T10:29:31.313
> 
> 标签：.net, visual-studio, visual-studio-2012, circular-dependency, circular-reference

目前，如果我想在我选择的解决方案中检查循环引用`Architecture - Generate Dependency Graph - For Solution`。然后从打开的新选项卡中选择`Layout - Analyzers - Circular References Analyzer`. 最后，如果我从各个程序集向下钻取并且有循环引用，我可以看到它们在图表上以红色突出显示，并且它们也在错误列表中显示为警告。

因为我打算在同一个类的方法之间发现循环引用，所以在中等大小的代码库上这很容易出错并且很耗时。

我想知道是否有一种方法可以一次获取所有警告，而无需扩展节点，或者可能打开父节点的突出显示，以便我只能深入了解肯定包含循环引用的组合。

NDepend 应该能够提供帮助，但我更喜欢让事情尽可能简单，所以我总是对采用额外的工具持谨慎态度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T08:47:56.673

是的，NDepend 可以*有效地查找循环引用*让我解释一下如何，因为它可能比您想象的要容易（*免责声明：我是 NDepend 的开发人员之一*）。到目前为止，您可以找到*开箱即用的**命名空间*依赖循环，但是，正如我在下面解释的那样，很容易找到命名空间中的类型或*类型的**方法*之间的循环。

 ***有一个[默认的 C# LINQ 代码规则](http://www.ndepend.com/DefaultRules/webframe.html?Q_Avoid_namespaces_dependency_cycles.html)列出了命名空间依赖循环。然后可以将这样的循环导出到依赖图或依赖矩阵。这是 2012 年 6 月在 Roslyn 代码库 CTP 上执行的规则的屏幕截图（请注意，它只需要 16 毫秒即可运行）。它发现了 11 个不同的循环，如屏幕截图所示，您可以深入了解每个循环并将一个循环导出到图表中：

![匹配命名空间依赖循环的规则](../Images/b012e666bdd2e7a5d8b1150d080c4b91.png)

这是 7 个命名空间循环的依赖关系图。请注意，它看起来比经典的 O 形环循环更复杂。这里的关键是，您可以从这些命名空间中的任何一个访问所有其他命名空间。这是循环（纠缠）的广义概念。

![匹配命名空间依赖循环图](../Images/3725d6409507151780aaace756c8ff69.png)

列出命名空间依赖周期的[默认 C# LINQ 代码规则](http://www.ndepend.com/DefaultRules/webframe.html?Q_Avoid_namespaces_dependency_cycles.html)的代码乍一看可能令人生畏。但是 C# 开发人员应该在几分钟内理解它，然后可以轻松地对其进行调整以找到任何类型的依赖循环。

例如，要查找**相同类型的方法循环**（而不是**相同组装循环的命名空间**），几乎就像用*方法替换所有**命名空间*单词，用*类型替换**组装*单词一样简单。

 ***```
// <Name>Avoid methods of a type to be in cycles</Name>
warnif count > 0

from t in Application.Types
                 .Where(t => t.ContainsMethodDependencyCycle != null && 
                             t.ContainsMethodDependencyCycle.Value)

// Optimization: restreint methods set
// A method involved in a cycle necessarily have a null Level.
let methodsSuspect = t.Methods.Where(m => m.Level == null)

// hashset is used to avoid iterating again on methods already caught in a cycle.
let hashset = new HashSet<IMethod>()

from suspect in methodsSuspect
   // By commenting this line, the query matches all methods involved in a cycle.
   where !hashset.Contains(suspect)

   // Define 2 code metrics
   // - Methods depth of is using indirectly the suspect method.
   // - Methods depth of is used by the suspect method indirectly.
   // Note: for direct usage the depth is equal to 1.
   let methodsUserDepth = methodsSuspect.DepthOfIsUsing(suspect)
   let methodsUsedDepth = methodsSuspect.DepthOfIsUsedBy(suspect)

   // Select methods that are both using and used by methodSuspect
   let usersAndUsed = from n in methodsSuspect where 
                         methodsUserDepth[n] > 0 && 
                         methodsUsedDepth[n] > 0 
                      select n

   where usersAndUsed.Count() > 0

   // Here we've found method(s) both using and used by the suspect method.
   // A cycle involving the suspect method is found!
   // 8Feb2021: invoke extension method Append() explicitly to avoid ambiguous compiler error
   //           because of the new .NET BCL extension methods Append() method
   let cycle = NDepend.Helpers.ExtensionMethodsEnumerable.Append(usersAndUsed,suspect)

   // Fill hashset with methods in the cycle.
   // .ToArray() is needed to force the iterating process.
   let unused1 = (from n in cycle let unused2 = hashset.Add(n) select n).ToArray()

select new { suspect, cycle } 
```

...这是该规则的结果的样子（仍然可以将方法循环导出到依赖图或矩阵）。请注意，由于方法和类型的数量远高于命名空间和程序集的数量，因此在 Roslyn 这样的大型代码库上运行此查询大约需要 10 秒（而不是命名空间周期的 16 毫秒），因此您可能需要调整CQLinq 查询执行超时（默认为 2 秒）。

![类型依赖循环](../Images/896d22097e5999db1a78aa860139984b.png)

完整地说，我注意到循环大部分时间是由一些双向引用引起的（即 A 使用 B，B 使用 A）。因此，删除双向引用是打破循环的第一件事。这就是为什么我们提供了默认的 CQLinq 规则[避免命名空间相互依赖](http://www.ndepend.com/DefaultRules/webframe.html?Q_Avoid_namespaces_mutually_dependent.html)，它仍然可以适应类型或方法循环。******

# php - 厚框没有使用 Jquery 获取文本框的值

> ID：15109755
> 
> 赞同：1
> 
> 时间：2013-02-27T10:29:40.270
> 
> 标签：php, ajax, jquery, thickbox

我在 Joomla 中使用了厚盒组件。我正在使用 jQuery ajax 提交表单，但在单击提交按钮后 jQuery 没有获取值。我使用并创建了 script.js 文件，其中包含：

```
jQuery(document).ready(function(){
jQuery('.wp_btn').click(function() {
    var id = $j(this).attr('id');
    var url = $j(this).attr('value');
    if (document.cookie.indexOf('visited=true') == -1) {
        var fifteenDays = 1000*60*60*24*15;
        var expires = new Date((new Date()).valueOf() +  fifteenDays);
        document.cookie = "visited=true;expires=" +  expires.toUTCString();
        jQuery("#dwnlnk").val(url);
        TB_show('', '/#TB_inline?KeepThis=true&id=9876asdvfrty54321&height=250&width=350&inlineId=mypopup&caption=Subscription', '');

    }else{
        window.location = url;
    }
});
//
jQuery(document).on('submit', '#subscription',function(){
    return false; 
});

    jQuery(document).on('click', '#btnSubmit',function(){

            var url = jQuery('#dwnlnk').val();

            var txtname = $j('input[name=txtname]').val();
            var txtemail = $j('input[name=txtemail]').val();

            jQuery.ajax({  
                type: 'POST',
                url: 'whitepapers/',
                data: jQuery('#frmsubscription').serialize(),
                success: function(data) {
                    alert(data);
                    //if(data == 'true') {
                        window.location = url;
                    //}
                }
            });
          });//end click
}); 
```

我已经尝试过`document.getElementById('txtname').value`，但它没有获得文本框的价值。当我输入静态值时，它的获取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T10:09:31.437

您必须使用 jQuery 或 $ 来选择一个元素。

尝试这个

```
var txtname = jQuery('input[name="txtname"]').val();
var txtemail = jQuery('input[name="txtemail"]').val(); 
```

或者

```
var txtname = $('input[name="txtname"]').val();
var txtemail = $('input[name="txtemail"]').val(); 
```

# c# - 设置键/值对

> ID：15109757
> 
> 赞同：5
> 
> 时间：2013-02-27T10:29:50.490
> 
> 标签：c#

我创建了一个列表作为类的属性，并希望在定义列表时设置键/值对。我最初使用的是结构，但意识到它可能不是理想的解决方案，所以我将其更改为列表。问题是我遇到了语法错误。

有任何想法吗？

```
private List<KeyValuePair<String,String>> formData = new List<KeyValuePair<String, String>>[]
    {
            new KeyValuePair<String, String>("lsd",""),
            new KeyValuePair<String, String>("charset", "")
    }; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T10:38:43.003

可能我遗漏了一些东西，但我会使用字典而不是
那么简单....

```
Dictionary<string, string>formData = new Dictionary<string, string>
{
    {"lsd", "first"},
    {"charset", "second"}
}; 
```

然后以下列方式使用它：

```
foreach(KeyValuePair<string, string>k in formData)
{
    Console.WriteLine(k.Key);
    Console.WriteLine(k.Value);
}
....
if(formData.ContainsKey("lsd"))
    Console.WriteLine("lsd is already in");
....    
string v = formData["lsd"];
Console.WriteLine(v); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:32:29.450

试试这个：

```
private List<KeyValuePair<String,String>> formData = new List<KeyValuePair<String, String>>
{
    new KeyValuePair<String, String>("lsd",""),
    new KeyValuePair<String, String>("charset", "")
}; 
```

您的定义中有一个额外`[]`的内容。你没有创建一个数组，所以你不需要它。此外，当使用一些值初始化列表时，这些值应该用逗号 ( `,`) 分隔。

在我看来，更好的方法是使用[`Tuple`class](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)：

```
pirvate List<Tuple<string, string>> formData = new List<Tuple<string, string>>()
{
    new Tuple<string, string>("lsd",""),
    new Tuple<string, string>("charset", "")
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:30:48.297

将第三行的分号更改为逗号，并从第一行删除方括号。

```
private List<KeyValuePair<String,String>> formData = new List<KeyValuePair<String, String>>
{
        new KeyValuePair<String, String>("lsd",""),
        new KeyValuePair<String, String>("charset", "")
}; 
```

顺便说一句，如果您将其更改为字典，您将能够更轻松地通过键查找值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:31:40.470

`[]`从声明中删除

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:31:48.063

```
private List<KeyValuePair<String,String>> formData = new List<KeyValuePair<String, String>>()
    {
            new KeyValuePair<String, String>("lsd",""),
            new KeyValuePair<String, String>("charset", "")
    }; 
```

1.  为什么`[]`在构造函数之后？
2.  集合初始化程序中的项目必须使用逗号分隔：`,`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T10:32:11.370

尝试

```
 private List<KeyValuePair<String, String>> formData = new List<KeyValuePair<String, String>>
    {
            new KeyValuePair<String, String>("lsd",""),
            new KeyValuePair<String, String>("charset", "")
    }; 
```

# websocket - Websocket 频繁断开连接

> ID：15109762
> 
> 赞同：1
> 
> 时间：2013-02-27T10:30:06.260
> 
> 标签：websocket

我正在使用 websocket 构建一个网站。当它由几个用户连接时似乎很好。但是一旦连接数达到 100 左右，用户就会断开很多连接。

似乎不是缺少文件描述符 max 造成的，因为我们服务器的文件描述符 max 是打开文件的数千次。超时似乎不太可能是原因。因为每个用户每 10 秒就可以使用 websocket 进行访问。

有没有人遇到其他断开连接的原因？

我英语不好，可能这篇文章很难理解，对不起。

使用浏览器：谷歌浏览器、火狐浏览器、Safari。他们之间没有区别。

# mysql - 用自联接替换嵌套选择查询

> ID：15109764
> 
> 赞同：2
> 
> 时间：2013-02-27T10:30:21.297
> 
> 标签：mysql, sql, select, self-join

我最近在这里问了一个关于 SQL 查询的问题：[Trouble wrapping head around complex SQL delete query](https://stackoverflow.com/q/15086335/1313143)

我现在明白，我正在尝试做的事情太复杂了，无法通过单个查询甚至多个查询来完成，而没有某种方法可以将结果保持在两者之间。因此我决定创建一个 bash 脚本（最终结果将与 cronjob 有关，因此 bash 是最直接的选择）。

考虑下表：

**关联客户：**

```
+-----------+-----------------+
| Client_id | Registration_id |
+-----------+-----------------+
|         2 |               2 | 
|         3 |               2 | 
|         3 |               4 | 
|         4 |               5 | 
|         3 |               6 | 
|         5 |               6 | 
|         3 |               8 | 
|         8 |               9 | 
|         7 |              10 | 
+-----------------------------+ 
```

我想要做的是选择**与****特定**关联**的**s列表**中**的所有`Registration_id`s 。**`Client_id`**`Client_id` **`Registration_id`******

 ******虽然我对 SQL 很陌生，但我发现这个查询相对容易：

```
SELECT `Registration_id` FROM `AssociatedClient` ac1
WHERE ac1.`Client_id` IN
                      (SELECT `Client_id` FROM `AssociatedClient` ac2 
                       WHERE ac2.`Registration_id` = $reg_id); 
```

where`$reg_id`只是一个 bash 变量。

**这可行**，但我希望看到它通过**self join**完成，因为它看起来更好，尤其是在出现大量字符混乱的 bash 脚本中。恐怕我的 SQL 技能还达不到那么远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:33:56.563

如果我理解正确，您应该能够像这样进行简单的自我加入：

```
SELECT ac1.registration_id
FROM associatedclient ac1
JOIN associatedclient ac2 ON ac2.client_id = ac1.client_id
WHERE ac2.registration_id = $reg_id 
```

所以你正在做的是扫描一次表，将它加入到 client_id 匹配的自身。然后，您将连接的行限制为表的第二个版本具有特定 id 的行，让您在第一个表上获得不同的连接排列，然后从这些行中选择registration_id。

因此，给定变量值为 6 的示例，请尝试运行以下语句：

```
SELECT 
  ac1.client_id AS client_id_1
, ac1.registration_id AS reg_id_1
, ac2.client_id AS client_id_2
, ac2.registration_id AS reg_id_2
FROM associatedclient ac1
JOIN associatedclient ac2 ON ac1.client_id = ac2.client_id 
```

你会注意到完整的连接集。然后尝试添加`WHERE`限制并注意返回哪些行。然后最后只需选择您想要的列。

您可以查看我设置的[SQLFiddle ，它使用 6 的值对其进行测试](http://sqlfiddle.com/#!2/7fb4c/1)******

# c# - 从排序列表中删除重复项c#

> ID：15109765
> 
> 赞同：3
> 
> 时间：2013-02-27T10:30:30.050
> 
> 标签：c#, list, duplicate-removal

我有一个关于大量文件的详细信息列表。此列表包含文件 ID、上次修改日期和文件路径。问题是旧版本的文件存在重复，有时文件路径不同。无论文件路径如何，我只想存储文件的最新版本。因此，我创建了一个循环遍历有序列表，检查 ID 是否唯一，如果是，则将其存储在新的唯一列表中。

```
 var ordered = list.OrderBy(x => x.ID).ThenByDescending(x => x.LastModifiedDate);

            List<Item> unique = new List<Item>();

            string curAssetId = null;

            foreach (Item result in ordered)
            {
                if (!result.ID.Equals(curAssetId))
                {
                    unique.Add(result);
                    curAssetId = result.ID;
                }
            } 
```

然而，这仍然允许重复进入数据库，我无法弄清楚为什么这段代码没有按预期工作。我的意思是重复文件具有相同的 ID 但文件路径不同，就像我之前所说的那样，这应该不是问题。我只想要最新版本，不管途径。其他人可以看到问题是什么吗？谢谢

```
 var ordered = listOfItems.OrderBy(x => x.AssetID).ThenByDescending(x => x.LastModifiedDate);
            List<Item> uniqueItems = new List<Item>();

            foreach (Item result in ordered)
            {
                if (!uniqueItems.Any(x => x.AssetID.Equals(result.AssetID)))
                {
                    uniqueItems.Add(result);

                }
            } 
```

这就是我现在拥有的，它仍然允许重复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:53:46.230

这是因为，您没有搜索整个列表来检查 id 是否唯一。

```
List<Item> unique = new List<Item>();

        string curAssetId = null; // here is the problem 

        foreach (Item result in ordered)
        {
            if (!result.ID.Equals(curAssetId)) // here you only compare the last value.
            {
                unique.Add(result);
                curAssetId = result.ID; // You are only assign the current ID value and 
            }
        } 
```

要解决此问题，请更改以下内容

```
 if (!result.ID.Equals(curAssetId)) // here you only compare the last value.
        {
            unique.Add(result);
            curAssetId = result.ID; // You are only assign the current ID value and 
        } 
```

到

```
if (!unique.Any(x=>x.ID.Equals(result.ID))) 
        {
            unique.Add(result);

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:42:05.680

我不知道这段代码是否只是简化了，但是您是否考虑过按 ID 分组，按 LastModifiedDate 排序，然后从每个组中取第一个？

就像是：

```
var unique = list.GroupBy(i => i.ID).Select(x => x.OrderByDescending(y => y.LastModifiedDate).First()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:33:07.470

`var ordered = list.OrderBy(x => x.ID).ThenByDescending(x => x.LastModifiedDate).Distinct()`??

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:33:37.347

为此，您必须创建自己的 EquityComparer，然后您可以使用 linq 的 Distinct 方法。[Enumerable.Distinct 在 msdn](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

另外我认为您可以保留当前代码，但您必须以这种方式修改它（作为示例）：

```
 var ordered = list.OrderByDescending(x => x.LastModifiedDate);
    var unique = new List<Item>();

    foreach (Item result in ordered)
    {
        if (unique.Any(x => x.ID == result.ID))
            continue;
        unique.Add(result);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T11:50:43.377

```
List<Item> p = new List<Item>();
var x = p.Select(c => new Item
     {
         AssetID = c.AssetID,
         LastModifiedDate = c.LastModifiedDate.Date
     }).OrderBy(y => y.id).ThenByDescending(c => c.LastModifiedDate).Distinct(); 
```

# cakephp - 如何从 cakephp 的 db 字段中的注册中添加隐藏值

> ID：15109768
> 
> 赞同：0
> 
> 时间：2013-02-27T10:30:35.327
> 
> 标签：cakephp

我有一份注册表。我想以这种形式传递隐藏的价值。我在数据库“lang”中创建了一个字段。在注册表单中我这样做了： echo $form->hidden('lang', array('value' => '1')); 但它没有保存数据库中的值。抱歉，我在 cakephp 方面没有经验，所以请如果有人在所有过程中帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:40:45.820

你不应该只是为了它而通过表单传递隐藏的东西。如果可以，请在实际保存之前添加这些值。有关详细信息，请参见[http://www.dereuromark.de/2010/06/23/working-with-forms/](http://www.dereuromark.de/2010/06/23/working-with-forms/)

基本上，你这样做：

```
if ($this->request->is('post') || $this->request->is('put')) {
    $this->Post->create();
    // add the content before passing it on to the model
    $this->request->data['Post']['lang'] = '1';
    if ($this->Post->save($this->request->data)) {
        ... 
    }
} 
```

# c# - 如何在silverlight中设置图像的位置

> ID：15109773
> 
> 赞同：2
> 
> 时间：2013-02-27T10:30:53.480
> 
> 标签：c#, image, silverlight, position

我有拖放图像，它位于 ContentPanel 中。在 MouseLeave 事件中，我得到图像的位置，然后我需要将它与我的网格对齐。尝试使用 Canvas 进行操作，但没有任何反应。当我尝试更改边距时，位置完全错误。

代码：

```
private void MouseLeave(object sender, MouseEventArgs e)
    {
        Image rs = (Image)sender;
        GeneralTransform gt = rs.TransformToVisual(ContentPanel);
        Point offset = gt.Transform(new Point(0, 0));
        double controlTop = offset.Y;
        double controlLeft = offset.X;
        tb.Text = Convert.ToInt16(controlLeft / 40).ToString();
        tb2.Text = Convert.ToInt16(controlTop / 40).ToString();
        double newLeft = Convert.ToInt16(controlLeft / 40)*40;
        double newTop = Convert.ToInt16(controlTop / 40)*40;
        //rs.Margin = new Thickness(newLeft, newTop, 0, 0);
        //((Image)ContentPanel.Children[11]).SetValue(Canvas.LeftProperty, newLeft);
        //((Image)ContentPanel.Children[11]).SetValue(Canvas.TopProperty, newTop);
    } 
```

那么如何设置图像的位置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:22:18.830

一种方法是将翻译转换应用于您的图像？

像这样的东西应该工作：

```
Image rs = (Image)sender;
GeneralTransform gt = rs.TransformToVisual(ContentPanel);
Point offset = gt.Transform(new Point(0, 0));

//create a translate transform 
TranslateTransform tt = new TranslateTransform();

//apply the required offset
tt.X = offset.X;
tt.Y = offset.Y;

//apply the transform to the image
rs.RenderTransform = tt;

double controlTop = offset.Y;
double controlLeft = offset.X;
tb.Text = Convert.ToInt16(controlLeft / 40).ToString();
tb2.Text = Convert.ToInt16(controlTop / 40).ToString();
double newLeft = Convert.ToInt16(controlLeft / 40) * 40;
double newTop = Convert.ToInt16(controlTop / 40) * 40; 
```

# jquery - 带有母版页的 Jquery Mobile（浏览器 url 在导航上没有改变）共享点

> ID：15109776
> 
> 赞同：1
> 
> 时间：2013-02-27T10:31:04.160
> 
> 标签：jquery

我有一个母版页 (mymaster.master) 和 2 个普通页**MobileA.aspx 和 MobileB.aspx**。目前我想通过单击 MobileA.aspx 中的按钮重定向到 MobileB.aspx，我想利用 jquery 移动 Ajax 调用来加载页面，所以我没有使用 rel="external"/data-ajax="错误的”。

一旦我做出 response.redirect("/mobileB.aspx") 它会正确加载，但唯一的问题是浏览器 url 仍然是**/MobileA.aspx**。在阅读了一些面临同样问题的博客之后，他们在 MobileB.aspx 中添加了 data-url="/MobileB.aspx"，并且效果很好。

在我的例子中，我有一个母版页，我在其中添加了 data-role ="page" 到主 div ，现在 mobileB.aspx 加载到内部 div 中 data-role="content" 。所以即使我添加了 data-url 属性，它也会忽略它。

任何帮助表示赞赏如何使浏览器 url 更改为 MobileB.aspx 。

# php - /me/accounts 返回空

> ID：15109777
> 
> 赞同：0
> 
> 时间：2013-02-27T10:31:08.027
> 
> 标签：php, facebook, api

我遇到访问令牌问题已经有一段时间了，我认为这可以通过输入 try-catch 语法来解决。不幸的是，它所做的只是隐藏错误，而且 /me/accounts 有时仍会返回空。这是我的代码：

```
if($facebook->getUser()==0) {
    header("Location:{$facebook->getLoginUrl(array('scope' => 'SCOPE'))}");
} else {
    $user = $facebook->getUser();
    if ($user) {
        $logoutUrl = $facebook->getLogoutUrl();
    } else {
        $loginUrl = $facebook->getLoginUrl(array(
            'scope' => 'SCOPE'
        ));
    }
    try {
        $access_token=$facebook->setExtendedAccessToken();
        $accounts_list = $facebook->api('/me/accounts');            
        .
        .
        .
    } catch(FacebookApiException $e) {
        $results = $e->getResult();
    }
} 
```

谁能告诉我为什么我的代码有时会生成一个空数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:39:39.350

在浏览了 Facebook 上的开发者博客后，我发现了这个：

> 从 /me/accounts/ 中删除应用程序我们将不再在 Graph API 中的 /me/accounts/ 下显示应用程序。您可以通过点击 /me/applications/developer/ 访问用户作为开发人员的应用程序列表。

（您可以[在此处找到完整的更改列表](http://developers.facebook.com/blog/post/2012/12/05/platform-updates--operation-developer-love/)

所以你得到空数组的原因可能是 /me/accounts 不再受支持。

此外，在进行需要访问令牌的 api 调用时，您应该像这样传递它：

```
$facebook->setExtendedAccessToken();
$access_token = $facebook->getAccessToken()
$facebook->api('/me/accounts', 'GET', array(
               'access_token' => $access_token)); 
```

# ruby-on-rails - 了解如何将设计迁移添加到 ruby on rails 中的现有用户模型？

> ID：15109781
> 
> 赞同：7
> 
> 时间：2013-02-27T10:31:14.033
> 
> 标签：ruby-on-rails, model, devise

我已经创建了一个用户模型。我想知道如何使用现有的用户模型配置设计。话虽如此，我是否需要设置任何其他路由或使属性可以在我的用户方法中访问。

到目前为止，用户模型是

```
class User < ActiveRecord::Base
  attr_accessible :email, :pic, :name, :username
  has_many :topics
end 
```

我的 CreateUsers 迁移

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.string :email
      t.string :username
      t.string :pic

      t.timestamps
    end
  end
end 
```

现在我打算做的是运行

```
rails g migration AddDeviseColumnsToUser 
```

并将其添加到我的迁移文件中

```
class AddDeviseColumnsToUser < ActiveRecord::Migration
  def change
    change_table :users do |t|
      t.string :encrypted_password, :null => false, :default => '', :limit => 128
      t.confirmable
      t.recoverable
      t.rememberable
      t.trackable
      t.token_authenticatable
      t.timestamps
    end
  end
end 
```

现在我想知道我应该如何设置我的路线还是必须这样做？在我的用户模型中应该可以访问哪些属性？

更新：我已经安装了设计并配置了它

```
rails generate devise:install 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T10:48:09.897

只需添加`devise_for :user`您的路线

添加`attr_accessible :password, :password_confirmation`

有关更多信息，请查看典型的设计模型

[https://github.com/johndel/Rails-Simple-CMS/blob/master/app/models/admin.rb](https://github.com/johndel/Rails-Simple-CMS/blob/master/app/models/admin.rb)

（很简单）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-07T15:31:08.523

您可以简单地运行：

```
rails generate devise User 
```

将设计添加到用户模型。

# html - 链接html正文中的内容

> ID：15109782
> 
> 赞同：0
> 
> 时间：2013-02-27T10:31:16.187
> 
> 标签：html

我有两个网站托管在主域站点的自己的子域中

一些页面我希望内容匹配只需要编辑一个站点

目前我正在使用 iframe 来链接内容，因此我在主域上编辑了一个文件，并且更改会反映在两个子域上

我如何更喜欢使用类似的东西

$body="main-domain.com/edits/test.html

这样我就不会得到额外的卷轴

我不想隐藏 iframe 上的滚动条，因为这会隐藏内容，我也不想设置页面高度，因为这最终会导致页面有死区

请有任何建议

# msbuild - Msbuild - 如何删除文件夹内容而不是文件夹本身？

> ID：15109785
> 
> 赞同：14
> 
> 时间：2013-02-27T10:31:22.383
> 
> 标签：msbuild

现在在我的 msbuild 脚本中是删除文件夹的任务

```
<RemoveDir Directories="$(Bin)"/> 
```

但是，我宁愿删除文件夹的*内容*，但保留文件夹（以防有人在 Windows 资源管理器中打开了该文件夹）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-27T13:35:54.573

这将删除所有文件和子文件夹：

```
 <Target Name="CleanFolder">

    <PropertyGroup>
      <TargetFolder>c:\clean</TargetFolder>
    </PropertyGroup>

    <ItemGroup>
      <FilesToClean Include="$(TargetFolder)\**\*"/>
      <Directories Include="$([System.IO.Directory]::GetDirectories('$(TargetFolder)', '*', System.IO.SearchOption.AllDirectories))"
                   Exclude="$(TargetFolder)"/>
    </ItemGroup>

    <Delete Files="@(FilesToClean)" ContinueOnError="true"/>
    <RemoveDir Directories="@(Directories)" />
  </Target> 
```

使用 openfiles 工具删除打开的连接也很好：

```
openfiles /disconnect /ID * 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-22T16:47:01.310

下载并安装[msbuild 扩展包](https://www.nuget.org/packages/MSBuild.Extension.Pack/)，然后使用

```
<MSBuild.ExtensionPack.FileSystem.Folder TaskAction="RemoveContent" Path="$(Bin)" /> 
```

# jquery - jQuery - 动态添加数据值并从数据库中检索数据

> ID：15109787
> 
> 赞同：0
> 
> 时间：2013-02-27T10:31:26.910
> 
> 标签：jquery, html

我的网站上有一些图像，单击时会显示“ `.TutorialsSlideDown`” div，同时隐藏“ `.tutorial_listing`” div。我想为这些图像添加数据属性，然后检查点击了哪一个，然后根据我的数据库中的数据填充“.TutorialsSlideDown”div。

可以这样做吗？如何？如果没有，最好的方法是什么？

HTML：

```
 <div class="tutorial_listing">
        <img id="PhpTutorials" src="~/Images/PHP.png" width="150px" height="150px" alt="PHP Tutorialok"/>
        <img id="AspdotNetWPTutorials" src="~/Images/ASPdotNet.png" width="150px" height="150px" alt="ASP.NET Tutorialok"/>
    </div>
    <div class="tutorial_listing"><h3>Programozás</h3></div>
    <div class="TutorialsSlideDown"></div> 
```

jQuery：

```
$('#PhpTutorials').click(function () { openTutorials("PHP Tutorialok. <a class='GoBack'>Vissza</a>") });
    $('#AspdotNetWPTutorials').click(function () { openTutorials("ASP.NET Web Pages Tutorialok. <a class='GoBack'>Vissza</a>") });

    function openTutorials(title) {

        $('.tutorial_listing').slideUp(400);
        $('.TutorialsSlideDown').slideDown(400);
        $('#PageTitle').html(title);
        $('.GoBack').bind('click', function () {
            $('.TutorialsSlideDown').slideUp(400);
            $('.tutorial_listing').slideDown(400);
            $('#PageTitle').html("Tutorialok");
        });

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:36:08.647

1.  向数据库中具有教程 ID 的函数添加一个额外的变量
2.  对可以处理 get/post 并获取 ID 的服务器端脚本进行 ajax 调用
3.  查询数据库，得到你想要的信息
4.  返回数据并使用 jQuery 将其嵌入到页面中

我认为为您编写整个代码没有多大意义。这是一个应该将您推向正确方向的指南。如果您还有其他问题，请告诉我。

您可以在此处阅读有关 jQuery ajax 的信息：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# php - 资产中的 Sprocketsfilter - 要求和示例

> ID：15109794
> 
> 赞同：2
> 
> 时间：2013-02-27T10:31:47.590
> 
> 标签：php, javascript, symfony, sprockets, assetic

我正在使用带有 Twig 和资产文件管理器的 Symfony 2。我有大量具有许多依赖项的 javascript 文件。（Javascript原型继承）

我看到了 sprockets 的作用，我看到assetic 也有 sprocketsfilter 来管理依赖关系。

我还需要我已经拥有的东西（php）吗？（我相信链轮最初是为红宝石创建的）

我想看一个一起使用它的例子，例如5个js文件（包含需要前一个的函数）

# android - 密码字段的 Android 切换按钮无法正常工作

> ID：15109797
> 
> 赞同：1
> 
> 时间：2013-02-27T10:32:10.430
> 
> 标签：android, android-layout

当我单击切换按钮时，它会将密码字段更改为正常外观的文本，但是当我再次单击它时，它不会将文本字段更改为密码类型。为什么呢 ？

这是我的代码，

```
protected void onCreate(Bundle savedInstanceState) {

// TODO Auto-generated method stub

super.onCreate(savedInstanceState);
setContentView(R.layout.text);
chkcmd = (Button) findViewById(R.id.but3);
passtog = (ToggleButton) findViewById(R.id.tb1);
input = (EditText) findViewById(R.id.et1);
display = (TextView) findViewById(R.id.tv2);
passtog.setOnClickListener(new View.OnClickListener() {

@Override
public void onClick(View V) {
// TODO Auto-generated method stub

if(passtog.isChecked())
{
input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_NUMBER_VARIATION_PASSWORD);
}

else if(!passtog.isChecked())
{
input.setInputType(InputType.TYPE_CLASS_TEXT);
}
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-15T11:54:18.503

由于支持库 v24.2.0。你可以很容易地做到这一点

你需要做的只是：

1.  将设计库添加到您的依赖项

    ```
    dependencies {
         compile "com.android.support:design:25.1.0"
    } 
    ```

2.  `TextInputEditText`配合使用`TextInputLayout`

    ```
    <android.support.design.widget.TextInputLayout
        android:id="@+id/etPasswordLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:passwordToggleEnabled="true">

        <android.support.design.widget.TextInputEditText
            android:id="@+id/etPassword"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/password_hint"
            android:inputType="textPassword"/>
    </android.support.design.widget.TextInputLayout> 
    ```

`passwordToggleEnabled`属性将使密码切换出现

3.  在您的根布局中不要忘记添加`xmlns:app="http://schemas.android.com/apk/res-auto"`

4.  您可以使用以下方法自定义密码切换：

`app:passwordToggleDrawable`- 可绘制用作密码输入可见性切换图标。
`app:passwordToggleTint`- 用于密码输入可见性切换的图标。
`app:passwordToggleTintMode`- 用于应用背景色调的混合模式。

[TextInputLayout 文档](https://developer.android.com/reference/android/support/design/widget/TextInputLayout.html)中的更多详细信息。

[![在此处输入图像描述](../Images/08106f45728ff1869b00feb2b013f792.png)](https://i.stack.imgur.com/CDs69.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:49:08.320

除了实现 ClickListener 之外，您还应该使用 CheckChangedListener，如下所示：

> ```
> passtog.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
>      @Override
>       public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
>         // Save the state here
>       if(isChecked)
>        {
>         input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_NUMBER_VARIATION_PASSWORD);
>         }
>        else
>         {
>          input.setInputType(InputType.TYPE_CLASS_TEXT);
>          }
>      }
>   }); 
> ```

# azure - 无法远程登录windows azure远程桌面

> ID：15109799
> 
> 赞同：3
> 
> 时间：2013-02-27T10:32:12.327
> 
> 标签：azure, virtual-machine, remote-desktop

我在 Windows azure 上运行 SQL Server 2012 评估版（64 位）。我可以从我的笔记本电脑远程登录。但是当我试图从我的桌面登录时，它说： -

由于以下原因之一，远程桌面无法连接到远程计算机：
1) 未启用对服务器的远程访问
2) 远程计算机已关闭
3) 远程计算机在网络上不可用

确保远程计算机已打开并连接到网络，并且启用了远程访问。

我不知道有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:08:13.807

谢谢大家，我找到了解决方案。它`Norton Internet Security`阻塞了端口 3389。然后我在这里找到了一个解决方案：[http ://www.symantec.com/connect/forums/issue-windows-7-remote-desktop-2010-internet-security#comment-3515591](http://www.symantec.com/connect/forums/issue-windows-7-remote-desktop-2010-internet-security#comment-3515591)

遵循这些步骤：
要让远程桌面与 NIS 2010 一起使用，您需要打开 NIS，然后单击 GUI 网络部分中的设置。然后，您在智能防火墙下单击高级设置上的配置。
然后在一般规则上单击配置。然后添加选择允许，然后选择下一步并选择与其他计算机的连接。然后单击计算机在任何位置下的下一步，然后选择下一步。
然后选择端口类型并选择仅与下面列出的所有类型和端口匹配的通信：然后单击添加添加您需要选择单独指定的端口的端口，因为远程桌面未列为端口。
并输入您需要为本地和远程添加它的端口 3389。
一旦本地和远程都在那里，请单击下一步。
选择日志和/或 NAT 遍历，然后单击下一步。
将您所做的规则命名为单击下一步，如果看起来正确，则单击完成。
然后单击 OK 关闭所有 NIS 窗口，现在它将允许通过 NIS 2010 进行远程桌面连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:29:55.157

您的代理或防火墙可能禁用了用于 RDP 的端口 3389...并尝试从桌面 ping 服务器的 url( [http://yourRole.cloudapp.net](http://yourRole.cloudapp.net) )...

# c# - Rfc2898DeriveBytes 和 TripleDes

> ID：15109802
> 
> 赞同：3
> 
> 时间：2013-02-27T10:32:21.070
> 
> 标签：c#, .net, cryptography

我现在了解到，`PasswordDeriveBytes`不赞成使用`Rfc2898DeriveBytes`. `Rfc2898DeriveBytes`在 MSDN 上查找。有一个代码示例使用`TripleDES`. 但`TripleDes`比 年老弱`AES`。为什么他们似乎前进了一步又后退了一步？可以将 替换为`TripleDes`或 与`AES`有`Rfc2898DeriveBytes`内在联系`TripleDes`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:38:26.000

基于密码的 KDF 只是将密码+盐转换为字节序列，您可以将其用作密钥，或存储为密码哈希。

它与您选择的密码没有任何关系，您可以将 PBKDF2 与 AES 一起使用。一个小问题是您从 PBKDF2-HMAC-SHA-1 读取了多少数据。我建议只读取 20 个字节，并在需要时使用单独的散列来增加它们的大小。

没有理由遵循 MSDN 示例。他们通常不遵循良好的编码习惯。仅仅因为他们使用 3DES 并不意味着您应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:42:34.663

`PBKDF2`( `Rfc2898DeriveBytes`) 用于从密码中派生密钥（密钥派生函数），它生成的密钥长度以及您随后执行的操作是您的选择，因此使用`PBKDF2`它们生成密钥并使用您喜欢的任何对称密码。要回答您的问题，没有内在联系。

# openlayers - 几个 GML 到一层

> ID：15109806
> 
> 赞同：1
> 
> 时间：2013-02-27T10:32:29.180
> 
> 标签：openlayers, gml

有没有办法在一个矢量图层上绘制多个 GML 多边形？我有几个带有多边形坐标的 KML 文件。我像这样绘制地图：

```
for(var i = 0; i < telepHatarArray.length; i++){
  var telep_layer = new OpenLayers.Layer.Vector("GML", {
    protocol: new OpenLayers.Protocol.HTTP({
      url: "telephatarok/telepules_" + telepHatarArray[i].kshkod + ".kml",
      format: new OpenLayers.Format.GML()
    }), 
    style: {
      fillColor: "#F6EA9D",
      strokeColor: "#000000",
      fillOpacity: 0.2
    },
    strategies: [new OpenLayers.Strategy.Fixed()]
  });

  map.addLayer(telep_layer);
} 
```

但是有了这个，它会将每个多边形生成到一个新层。

画完之后，我用Layer.Text画点。

```
var newlayer = new OpenLayers.Layer.Text(
    "Települések", 
    { 
      location:"./"+forras
    }
);

map.addLayer(newlayer); 
```

'forras' 是文件源。当它提供超过 50 个多边形时，弹出框会在多边形下方打开。我尝试设置新图层的图层索引，但没有帮助。

感谢您的建议。并为我糟糕的英语感到抱歉。

# llvm - llvm 获取全局定义行号

> ID：15109807
> 
> 赞同：0
> 
> 时间：2013-02-27T10:32:33.113
> 
> 标签：llvm

我遵循[如何使用 dbg 元数据获取变量定义行号等？](https://stackoverflow.com/questions/13852180/how-to-get-variable-definition-line-number-etc-using-dbg-metadata)为了获得局部变量（allocas）的行号定义，它工作正常。但我需要同样的全局变量。所以我试图破解`findDbgGlobalDeclare()`来自[http://llvm.org/docs/doxygen/html/DbgInfoPrinter_8cpp_source.html#l00062](http://llvm.org/docs/doxygen/html/DbgInfoPrinter_8cpp_source.html#l00062)的方法。但是，我`llvm.dbg.gv`的字节码中没有，因此没有要提取的 dbg 信息。我使用`clang++ -O0 -g -emit-llvm Test.cpp -c -o Test.bc`. 我的字节码中的一些示例：

```
@r = global i32 3, align 4
%4 = load i32* @r, align 4, !dbg !942
...
%a = alloca i32, align 4
%1 = load i32* %a, align 4, !dbg !939 
```

但是，我确实有：

```
!924 = metadata !{i32 786484, i32 0, null, metadata !"r", metadata !"r", metadata !"", metadata !841, i32 19, metadata !56, i32 0, i32 1, i32* @r} ; [ DW_TAG_variable ] [r] [line 19] [def] 
```

with`!0`是间接依赖的，并且存在`!llvm.dbg.cu = !{!0}`。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:28:21.103

是的，`!llvm.dbg.cu`现在是正确的地方。引用源代码级调试文档：

> 编译单元描述符为在特定编译单元中声明的对象提供根上下文。文件描述符是使用此上下文定义的。这些描述符由命名元数据 !llvm.dbg.cu 收集。它们跟踪子程序、全局变量和类型信息。

具体请参见[“全局变量描述符”。](http://llvm.org/docs/SourceLevelDebugging.html#id13)

您找到的代码是支持仍然由 dragonegg 生成的旧元数据节点，因此读者支持它们以实现向后兼容性。新的 LLVM 代码生成`!llvm.dbg.cu`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:03:15.263

步骤如下：

```
1\. NamedMDNode *NMD = M->getNamedMetadata("llvm.dbg.cu"); 
```

然后进入元数据节点链，直到所需的全局声明。

```
2\. DIDescriptor DIG(cast<MDNode>(NMD->getOperand(i)));
3\. DIDescriptor DIGG(cast<MDNode>(NMD->getOperand(NMD->getNumOperands()-1)));
4\. DIDescriptor DIGF(cast<MDNode>(DIGG->getOperand(0)));
5\. Value* VV = cast<Value>(DIGF->getOperand(i));
6\. DIDescriptor DIGS(cast<MDNode>(VV)); 
```

此时，请执行以下操作：

```
7\. DIGS->getOperand(j) 
```

并检查您想要的所有字段的[http://llvm.org/docs/SourceLevelDebugging.html#cc-front-end-specific-debug-information](http://llvm.org/docs/SourceLevelDebugging.html#c-c-front-end-specific-debug-information)。

# r - R - 从数据框中创建散点图

> ID：15109822
> 
> 赞同：5
> 
> 时间：2013-02-27T10:33:25.937
> 
> 标签：r, plot, ggplot2, lattice, scatter-plot

我有一个`all`看起来像这样的数据框：

[http://pastebin.com/Xc1HEYyH](http://pastebin.com/Xc1HEYyH)

现在我想创建一个散点图，其中 x 轴上的列标题和相应的值作为数据点。例如：

```
7|                 x  
6|          x      x  
5|  x       x      x     x    
4|  x       x            x 
3|                             x      x  
2|                             x      x
1|
 ---------------------------------------
    STM    STM    STM   PIC   PIC    PIC
   cold   normal  hot  cold  normal  hot 
```

这应该很容易，但我不知道怎么做。

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T10:37:08.267

如果您想使用 Hadley's 进行绘图，基本思想`ggplot2`是获取以下形式的数据：

```
 x          y
col_names     values 
```

这可以通过使用`melt`Hadley 的函数来完成`reshape2`。做`?melt`看看可能的论点。但是，在这里，由于我们想要融化整个 data.frame，我们只需要，

```
melt(all) 
# this gives the data in format:
#   variable value
# 1 STM_cold   6.0
# 2 STM_cold   6.0
# 3 STM_cold   5.9
# 4 STM_cold   6.1
# 5 STM_cold   5.5
# 6 STM_cold   5.6 
```

在这里，`x`将是列`variable`，`y`将是相应`value`的列。

```
require(ggplot2)
require(reshape2)
ggplot(data = melt(all), aes(x=variable, y=value)) + 
             geom_point(aes(colour=variable)) 
```

如果您不想要颜色，则只需删除`aes(colour=variable)`geom_point 内部，使其变为`geom_point()`.

![在此处输入图像描述](../Images/60c26c66d6b3e40cb3059297dd6b81c4.png)

**编辑：**我可能应该在这里提一下，你也可以用那个来代替`geom_point`，`geom_jitter`那会给你，嗯，紧张的点：

![在此处输入图像描述](../Images/c3235f2054099bd62cd1a5cc4b81507c.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T11:25:20.037

这里有两个可供考虑的选项。“lattice”包的第一个用途`dotplot`：

```
library(lattice)
dotplot(values ~ ind, data = stack(all)) 
```

![在此处输入图像描述](../Images/575e2bb8bcd342fbc0c53b98fd87e5c4.png)

第二个使用`dotchart`base R 的“图形”选项。要使用该`dotchart`功能，您需要将您的`data.frame`in包装起来`as.matrix`：

```
dotchart(as.matrix(all), labels = "") 
```

请注意，此图形中的点*不是*“抖动”的，而是按照它们记录的顺序呈现的。也就是说，最低点是第一个记录，最高点是最后一个记录。如果您放大此示例的绘图，您会看到有 16 条非常微弱的水平线。每行代表每一列中的一行。因此，如果您查看“STM_cold”的点或任何其他具有`NA`值的变量，您会在顶部看到一些没有可用数据的空白行。

这有其优点，因为如果按时间顺序记录值，它可能会随着时间的推移显示趋势，但如果源数据框中的行太多，也可能是一个缺点。

![在此处输入图像描述](../Images/be6d524f25e54e4adf5b917b768b19a7.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T12:22:05.423

使用基本 R 图形的手动版本只是为了好玩。

获取数据：

```
test <- read.table(text="STM_cold STM_normal STM_hot PIC_cold PIC_normal PIC_hot
6.0 6.6 6.3 0.9 1.9 3.2
6.0 6.6 6.5 1.0 2.0 3.2
5.9 6.7 6.5 0.3 1.8 3.2
6.1 6.8 6.6 0.2 1.8 3.8
5.5 6.7 6.2 0.5 1.9 3.3
5.6 6.5 6.5 0.2 1.9 3.5
5.4 6.8 6.5 0.2 1.8 3.7
5.3 6.5 6.2 0.2 2.0 3.5
5.3 6.7 6.5 0.1 1.7 3.6
5.7 6.7 6.5 0.3 1.7 3.6
NA  NA  NA  0.1 1.8 3.8
NA  NA  NA  0.2 2.1 4.1
NA  NA  NA  0.2 1.8 3.3
NA  NA  NA  0.8 1.7 3.5
NA  NA  NA  1.7 1.6 4.0
NA  NA  NA  0.1 1.7 3.7",header=TRUE) 
```

设置基本情节：

```
plot(
     NA,
     ylim=c(0,max(test,na.rm=TRUE)+0.3),
     xlim=c(1-0.1,ncol(test)+0.1),
     xaxt="n",
     ann=FALSE,
     panel.first=grid()
     )

axis(1,at=seq_along(test),labels=names(test),lwd=0,lwd.ticks=1) 
```

绘制一些点，并带有一些 x 轴`jitter`，因此它们不会相互打印。

```
invisible(
  mapply(
        points,
        jitter(rep(seq_along(test),each=nrow(test))),
        unlist(test),
        col=rep(seq_along(test),each=nrow(test)),
        pch=19
        )
) 
```

结果：

![在此处输入图像描述](../Images/bfbd27b8e95428b4bf2e5ea839c92b03.png)

# 编辑

这是一个在点上使用 alpha 透明度并摆脱`jitter`Ananda 的以下评论中讨论的示例。

```
invisible(
  mapply(
        points,
        rep(seq_along(test),each=nrow(test)),
        unlist(test),
        col=rgb(0,0,0,0.1),
        pch=15,
        cex=3
        )
) 
```

![在此处输入图像描述](../Images/d1c9d907cc6480b353c2ed3cc9bb0126.png)

# c# - AJAX 请求后的 Javascript

> ID：15109825
> 
> 赞同：2
> 
> 时间：2013-02-27T10:33:29.433
> 
> 标签：c#, javascript, asp.net, ajax

加载页面时，`commentsShowHideEffect`javascript中的函数运行。当发出 ajax 请求时，方法中的所有指令`commentsShowHideEffect()`都消失了。`commentsShowHideEffect()`ajax请求后如何恢复这些指令或再次调用方法？

```
<script>
    $(function () {
        commentsShowHideEffect();
    });
</script}

 <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="MessageButton" />
    </Triggers>
    <ContentTemplate>
        <asp:Timer ID="RefreshTimer" runat="server" Interval="500" />
            <asp:DataList ID="ChatDataList" runat="server" >
                <ItemTemplate>    
                    <td><asp:Label ID="lblRaterName" runat="server" Text='<%# Eval("Text")%>'></asp:Label></td>
               </ItemTemplate>
            </asp:DataList>
     </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:40:43.670

您可以绑定[Sys.WebForms.PageRequestManager endRequest](http://msdn.microsoft.com/en-us/library/bb383810%28v=vs.100%29.aspx)事件，该事件将在更新面板完成 ajax 请求后触发。

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
function EndRequestHandler(sender, args)
{
     alert("After ajax call ended");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:36:13.163

在 jQuery 范围之外定义 commentsShowHideEffect：

```
<script>
    function commentsShowHideEffect() {
        //do something
    }

    $(document).ready(function (){
        commentsShowHideEffect();
    });
</script> 
```

此外，我更喜欢使用 document.ready 语法，因为程序员更容易理解它是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:40:35.543

你没有在你的问题中提到 jQuery，也没有在标签中提到。但是您的代码表明您正在使用它，所以这里有一个相关文档页面的链接：

[http://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

在您的情况下，这应该有效：

```
$(document).ajaxComplete(function(event,request, settings) {
   commentsShowHideEffect();
}); 
```

请注意，上述内容将针对每个 ajax 请求触发。如果您想要更多控制权，您应该对各个请求使用完成或成功回调。

# jquery - jQuery insertAfter 有奇怪的行为

> ID：15109828
> 
> 赞同：0
> 
> 时间：2013-02-27T10:33:36.160
> 
> 标签：jquery

我正在尝试移动一个包含一个包含 JW 播放器的对象元素的 div。div 看起来像这样，它当前位于一些 p 元素之间： ![在此处输入图像描述](../Images/59bb8884d568183909df5da6875c63f0.png)

上面的视图来自 Firebug HTML 面板。

我正在使用的 jQuery 是

```
 $('#container_wrapper').insertAfter('p#crown_li'); 
```

执行此操作后，播放器不再可见，HTML 如下所示：![在此处输入图像描述](../Images/ba167ecda6ce491498f80a98c0e54aa5.png)

div 和对象移动到了它们应有的位置，但对象元素已褪色并且不再显示在页面上。

有谁知道可能发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:43:13.073

各种浏览器都不太支持在 DOM 中移动 flash 对象元素。你能`container_wrapper`在初始化jwplayer之前移动吗？

# asp.net - 浏览器中的 Signalr 异常

> ID：15109833
> 
> 赞同：0
> 
> 时间：2013-02-27T10:33:39.347
> 
> 标签：asp.net, visual-studio-2012, signalr

我正在尝试创建一个聊天应用程序，但是在成功构建 Web 应用程序后，当我传递聊天参数时它捕获异常。异常是

> 0x800a139e - JavaScript 运行时错误：SignalR：必须先启动连接，然后才能发送数据。在 .send() 之前调用 .start()

屏幕截图附在此处 ![在此处输入图像描述](../Images/ee9e5bc3182a8b85bc42252215acd13f.png)

![在此处输入图像描述](../Images/bd30cadd061033c8d5e2cf939d0628d5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:51:46.453

您需要确保在`start`is之前不要尝试调用服务器端集线器方法`done`。前任：

```
$.connection.hub.start().done(function(){
     $('#submit').click(function () {
         $.connection.chat.server.addMessage($('#msg').val());
     })
}); 
```

请注意，在建立连接之前，事件处理程序不会连接。

# maven - Jenkins Artifactory Plugin 多项目发布

> ID：15109835
> 
> 赞同：1
> 
> 时间：2013-02-27T10:33:48.453
> 
> 标签：maven, jenkins, artifactory

我已经配置了 jenkins 和 artifactory 插件来工作并为单个项目进行发布。

我最近创建了一个多项目，我不确定如何发布，以便所有依赖项目的版本都增加。

因此，例如项目 A -> 项目 B -> 项目 C

如果我从 jenkins 发布项目 C 会导致所有项目的版本增加，我真的不能搞乱发布......所以没有测试过这个。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:27:10.517

maven 多模块项目。

如果项目不是多模块，那么我将需要单独更新每个模块。

# c# - 显示 MessageBox 后单选按钮消失

> ID：15109837
> 
> 赞同：0
> 
> 时间：2013-02-27T10:33:55.350
> 
> 标签：c#, user-controls, radio-button, messagebox

我有一个 C# 用户控件。在这个控件中，我有一个包含单选按钮和文本框的 GroupBox。

当用户在单选按钮之间切换时，会出现一个消息框，询问用户是否确定自己的选择。

消息框的顶部覆盖了最后一个单选按钮和最后一个文本框。在用户选择不应用单选按钮更改的情况下，消息框将关闭，但最后一个单选按钮（被消息框覆盖）消失了。（消息框也覆盖的最后一个文本框没有消失）。

这是一种刷新问题，因为当我将鼠标按钮移动到最后一个单选按钮的位置时，它又出现了，一切都很好。（如果我最小化和最大化我的应用程序等，它也会再次出现）。

关闭消息框后，我尝试在最后一个单选按钮上运行方法`Show()`，`Refresh()`但它不起作用。

我还可以做些什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:36:11.233

`Application.DoEvents()`在关闭后尝试`MessageBox`以确保处理队列中没有其他进程。这应该会重新显示按钮，但很难判断您是否不显示任何代码，因为可能存在其他问题。

# java - java.util.NoSuchElementException 没有这样的元素异常

> ID：15109842
> 
> 赞同：5
> 
> 时间：2013-02-27T10:34:03.440
> 
> 标签：java

Java 新手 - 只是想掌握它。程序执行如下：

```
What's your age?23
23
What's your name?Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Unknown Source)
    at java.util.Scanner.next(Unknown Source)
    at king.getName(king.java:25)
    at king.main(king.java:9) 
```

它试图运行的代码如下：

```
import java.util.*;

public class king {

    public static void main(String[] args){
        System.out.println(getAge());
        System.out.println(getName());
    }

    public static int getAge(){
        System.out.print("What's your age?");
        Scanner scanner = new Scanner(System.in);
        String age = scanner.next();
        scanner.close();
        int numberAge = Integer.parseInt(age);
        return numberAge;

    }

    public static String getName(){
        System.out.print("What's your name?");
        Scanner newScanner = new Scanner(System.in);
        String name = newScanner.next();
        newScanner.close();
        return name;
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T10:38:41.297

不要使用`scanner.close()`<- 你的错误来源！

删除线`scanner.close()`和`newScanner.close()`

来自 Java 文档：

> 当 Scanner 关闭时，如果源实现了 Closeable 接口，它将关闭其输入源。

这意味着它关闭了`System.in`- 糟糕的选择！

从`Scanner.java`JDK中的源代码来看，`throwFor()`是：

```
private void throwFor() {
    skipped = false;
    if ((sourceClosed) && (position == buf.limit()))
        throw new NoSuchElementException();
    else
        throw new InputMismatchException();
} 
```

显然，如果我们已经到达输入的末尾，或者如果源已关闭，那么我们会得到`NoSuchElementException()`. 我很确定[IDEONE](http://ideone.com/P9ZBcH)发生的那件事是因为`position == buf.limit()`而不是`sourceClosed`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:39:35.933

试试这个：

```
public class King {
  public static void main(final String[] args) {
    final Scanner scanner = new Scanner(System.in);
    System.out.println(getAge(scanner));
    System.out.println(getName(scanner));
  }

  public static int getAge(final Scanner scanner) {
    System.out.print("What's your age?");
    final String age = scanner.next();
    final int numberAge = Integer.parseInt(age);
    return numberAge;
  }

  public static String getName(final Scanner scanner) {
    System.out.print("What's your name?");
    final String name = scanner.next();
    return name;
  }
} 
```

另请注意，java 类应大写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:52:24.093

我认为@Aniket 已经给出了一个很好的答案。

*   首先，`import java.util.*;`您可以使用它代替它，`import java.util.Scanner;`这样它就不会导入不必要的类。
*   第二件事是你可以有一个`Scanner`像我在例子中展示的那样。（所以你可以关闭它）

    ```
     import java.util.Scanner;
     public class SO6 {
         static Scanner scanner = new Scanner(System.in);
         public static void main(String[] args){
             System.out.println(getAge());
             System.out.println(getName());
             scanner.close();
         }

        public static int getAge(){
            System.out.print("What's your age?");
            String age = scanner.next();
            int numberAge = Integer.parseInt(age);
            return numberAge;

        }

        public static String getName(){
            System.out.print("What's your name?");
            String name = scanner.next();
            return name;
        }
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T11:30:15.793

首先，为了避免 NoSuchElementException，您应该在使用 Scanner.next() 之前执行 Scanner.hasNext() 检查。其他评论，尤其是关于使用单个扫描仪的评论也很有用。

# php - 在 mysql 中检查近似相等字符串的脚本

> ID：15109843
> 
> 赞同：0
> 
> 时间：2013-02-27T10:34:05.087
> 
> 标签：php, mysql

我正在开发一个系统，用户可以使用相应的成分创建自己的个人食谱并保存它们（在 mysql 中）。

问题是每次保存一种成分时，我都会检查它是否已经存在于我比较成分名称的成分表中。

如果我应该能够从食谱中正确制作购物清单，我想确保例如：

苹果 - 苹果 - 新鲜苹果 Cant aear

因此，如果首先创建“苹果”并且我试图保存“苹果”，我想检查类似的东西是否已经存在。

像我试图解释的那样的算法是否已经存在？

希望你有一些意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:35:39.923

您可能对 MySQL 的功能有一些运气`SOUNDEX()`，假设这些词足够相似并且可能足够简单。

文档可以在这里找到：[https ://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex](https://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)

基本上，它所做的是将给定的单词简化为表示它的四个字符串。*对于任何两个听起来*大致相同的单词，字符串应该相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:41:19.183

虽然可以使用[soundex](https://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)或[Levenshtein distance](http://www.artfulsoftware.com/infotree/queries.php#552)，但它仍然需要在短语中找到关键词——“apple”和“apples”可能会起作用，但“dozen of fresh apples”可能不会。

根据我的经验，在该应用程序中，没有什么比手动算法更好的了：

*   创建成分的基本列表（“面粉”、“苹果”、“火腿”）
*   添加新配方时，将成分列表与列表匹配，可能允许使用 Levenshtein 或正则表达式进行一些模糊
*   创建一个包含“原始”与“匹配”列表的后端页面，单击可能会标记错误的匹配项
*   创建一个简单的界面来手动匹配不良命中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:41:27.290

在 mySql 中，您可以使用`SOUNDEX()`函数[soundex](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)。

如果你想在 php 中实现它，有[levenshtein](http://php.net/manual/en/function.levenshtein.php)和[similar_text](http://www.php.net/manual/en/function.similar-text.php)函数

# javascript - 在 SharePoint 2007 的客户端获取当前用户名

> ID：15109844
> 
> 赞同：0
> 
> 时间：2013-02-27T10:34:08.657
> 
> 标签：javascript, sharepoint, sharepoint-2007, web-parts, client-side

我需要创建一个简单的静态 Web 部件 - 唯一的动态部件是当前用户登录名（需要包含在链接的 URL 参数中）。

我宁愿只使用内容编辑器 Web 部件，而不是我需要部署的自定义 Web 部件。事实上，我已经使用 JavaScript 和 ActiveX 做到了这一点（`WScript.Shell`- 下面的完整代码）

有没有更好、更本土的方式来做到这一点？我不喜欢 ActiveX 方法的地方在于它需要对 IE 进行更自由的配置，即使我在安全设置中启用了与 ActiveX 相关的所有内容，仍然需要单击提示。跨浏览器支持不是主要问题，它是 Intranet - 但也将是一个不错的附加功能。

我能想到的一种方法是使用 jQuery（或只是 JavaScript）从右上角刮取用户名，但有什么更干净的吗？或者也许有人已经完成了抓取并可以分享代码以节省我一些时间;-)

这是我目前的解决方案：

```
<script language="javascript">
    function GetUserName()
    {
        var wshell = new ActiveXObject("WScript.Shell");
        var username = wshell.ExpandEnvironmentStrings("%USERNAME%");

        var link = document.getElementById('linkId');
        link.href = link.href + username.toUpperCase();
    }
</script>
<P align=center>
    <a id="linkId" onclick="GetUserName();" href="<my_target_URL>?UserID=">open username-based URL</a>
</P> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:35:56.093

在内容编辑器 Web 部件中包含此[Web 部件令牌：](http://msdn.microsoft.com/en-us/library/ms415880%28v=office.12%29.aspx)

```
_LogonUser_ 
```

它输出与 Request.ServerVariables("LOGON_USER") 相同的值

在包含隐藏跨度和普通旧 document.getElementById 以获取内部文本之前，我已经完成了此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:15:10.247

我的结论是没有更好的方法来做到这一点（这也很容易）。

我检查了页面的来源，用户名不在那里，所以不能被 JavaScript/jQuery 抓取。浏览器似乎没有随请求一起发送它（就像它使用您的本地 IP 和其他与客户端相关的信息一样），因此也无法从标头中获取。我能想到的唯一另一种方法是从客户端调用 Web 服务，这对我的场景来说太过分了。

# mysql - 存储十亿封电子邮件的数据库模式

> ID：15109848
> 
> 赞同：1
> 
> 时间：2013-02-27T10:34:22.713
> 
> 标签：mysql, mongodb, database-design, database-schema

我正在尝试开发一个应用程序，用户可以在其中将他们的电子邮件导入并搜索他们导入的电子邮件。由于这可能会被许多用户（通常是 10k+）使用，因此数据库设计至关重要。有了这些用户数量，数据库可能需要能够容纳超过 10 亿行（电子邮件）。

在应用程序上发布搜索查询后，应用程序需要能够快速返回记录。该数据库将被大量搜索，我希望在创建数据库表以创建有效的数据库模式方面得到一些帮助。我自己对 MySQL 有很多经验，但我在某个地方读过我不应该那样去寻找 MongoDB 之类的东西？差异如此之大还是我仍然可以使用MySQL？

*   从
*   至
*   主题
*   日期范围）
*   附件（仅限名称和类型）
*   消息内容
*   （可选）邮箱/文件夹结构

这些是可搜索的字段，当然所有的电子邮件都会有一个额外的两个“列”用于唯一 id 和 user_id。我找到了几个电子邮件的数据库模式，但我找不到任何可以处理超过十亿行的模式的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:57:09.850

您最好从建议的表定义开始并从那里开始 - 如果该站点确实获得了近十亿条记录，那么如果需要，您可以将其移动到亚马逊服务器或另一个（应该）允许表分区的云主机.

假设您不在有限制的共享主机上，MySQL 可以处理大量数据。

所以，从简单开始，不要优化一个尚不存在的问题，看看它是如何进行的。

# windows-phone-8 - 电话联系人修改回调

> ID：15109852
> 
> 赞同：2
> 
> 时间：2013-02-27T09:34:43.960
> 
> 标签：windows-phone-8, contacts

WP8 是否有任何操作系统挂钩或回调（同步机制）我可以实现以在联系人更改时获取通知？

例如，我将应用程序作为后台代理运行，用户随机更改联系人的详细信息。我想在我的后台引擎中得到通知，以便我可以进行各种操作。

我总是可以实施定期检查（比如每分钟我都会阅读所有联系人并检查是否有任何修改 - 假设我以某种方式记住了最后的配置）。但是这种解决方案对于大量联系人来说效率不高，尤其是当我希望应用程序在低端手机上运行时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:58:12.227

Windows Phone 不支持任何内置方式来通知应用程序联系人更改。

正如您所指出的，这样做的唯一方法是跟踪细节并定期查找差异。是的，如果您想支持具有 256MB 内存的 WP7 设备，您必须在应用程序运行（而不是后台代理）的情况下执行此操作。

作为替代方案并假设用户正在将他们的联系人与他们的 live.Windows 帐户同步，您可以创建一个定期轮询他们的 live 帐户的外部服务（通过[http://msdn.microsoft.com/en-us/live/ff519582。 aspx](http://msdn.microsoft.com/en-us/live/ff519582.aspx) ) 进行更改，然后向设备/应用程序发送有关更改的通知。

# mysql - 将子查询转换为联接

> ID：15109853
> 
> 赞同：2
> 
> 时间：2013-02-27T10:34:38.570
> 
> 标签：mysql

我有 2 个表员工和薪水员工 => ID，姓名字段

Salary => Sid, EId(Foriegn key) , Month, Salary

```
Employee 
ID  Name
1   a
2   b
3   c

Salary 
Sid Eid Month Salary
1    1   Jan   10
2    2   Jan   10
3    3   Jan   10 
4    1   Feb   10
5    3   Feb   10
6    1   Mar   10
7    2   Mar   10 
```

由于我需要优化，因此需要找到 3 月份没有发薪的员工并仅使用 Join

我使用子查询搜索 stmt

```
select E.Name from Employee where E.ID not in (Select EID from salary where month ='mar' ); 
```

出于优化目的，我被要求将其转换为加入

我尝试使用

```
Select E.Name from Employee E left join Salary S on E.ID = S.EID where S.EID = null; 
```

但这不是我想要的，我只需要在**3**月份没有发工资的员工。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:45:52.250

试试这个：

```
SELECT E.Name
FROM Employee E
    LEFT JOIN salary S
        ON E.Id = S.EID
          AND S.month ='mar'
GROUP BY E.Name
HAVING COUNT(E.Id) != COUNT(S.EID) 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/b49ad/4)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:58:46.560

```
SELECT E.Name
FROM Employee E
    LEFT JOIN salary S
        ON E.Id = S.EID
          AND S.month ='mar'
GROUP BY E.Id
HAVING COUNT(E.Id) != COUNT(S.EID) 
```

试试这个。

# php - 排序一些字符串？

> ID：15109858
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:34:55.690
> 
> 标签：php

我只能想象这相当简单，但解决方案却让我望而却步。

假设我有以下变量：

```
$group1 = "5";
$group2 = "1";
$group3 = "15";
$group4 = "3";
$group5 = "7";
$group6 = "1";
$group7 = "55";
$group8 = "0";
$group9 = "35"; 
```

我希望首先列出数量最多的组，例如：

```
Group 7 is number 1 with 55.
Group 9 is number 2 with 35.
Group 3 is number 3 with 15.
Group 5 is number 4 with 7.
Group 1 is number 5 with 5.
Group 4 is number 6 with 3.
Group 2 is number 7 with 1.
Group 6 is number 8 with 1.
Group 8 is number 9 with 0. 
```

也许将所有数据列出在双数组中然后对其进行排序会更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:42:12.617

只需将您的数据放在关联数组中，并使用关联感知排序对其进行排序：

```
$groups = array(
'group1' => "5",
'group2' => "1",
'group3' => "15",
'group4' => "3",
'group5' => "7",
'group6' => "1",
'group7' => "55",
'group8' => "0",
'group9' => "35",
);

arsort($groups);

// iteration as usual
foreach ($groups as $group_name => $value) {
}

// getting elements with the array functions based around the array's internal pointer
reset($groups); // reset the pointer to the start
print key($groups); // the first element's key
print current($groups); // the first element's value
next($groups); // moving the array to the next element 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:38:42.230

首先，使用数组（只是通常的数组）。

如果你的数组是

```
$group = array(1 => 5, 2 => 1 ... ) 
```

你可以使用`arsort`函数。

这里我使用数字，而不是字符串。如果您将使用字符串（用于值），则需要一个用于排序的标志 ( `SORT_NUMERIC`)

[PHP 手册](http://www.php.net/manual/en/function.arsort.php)中的更多信息

然后使用`foreach`

```
foreach($group as $key => $value){
    $key is number of varaiable
    $value is value of it.
    you also may add counter to print 1,2,3...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:39:17.507

为此目的使用数组

```
$group[1] = "5";
$group[2] = "1";
$group[3] = "15";
$group[4] = "3";
$group[5] = "7";
$group[6] = "1";
$group[7] = "55";
$group[8] = "0";
$group[9] = "35"; 
```

然后排序。

```
arsort($group, SORT_NUMERIC);   // SORT_NUMERIC suggested by **fab** 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:41:50.500

最好的方法是使用数组和`arsort`. 这将使您的索引保持完整。

`arsort`返回一个布尔值，因此不要分配给新变量

```
$groups = array("5","1","15","3","7","1","55","0","35");
arsort($groups, SORT_NUMERIC);

$i = 1;

foreach ($groups as $key => $val) {
    echo 'Group ' . $key . ' is number ' . $i . ' with ' . $val;
    $i++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:37:16.307

是的，使用数组是最好的选择。类似的东西

```
$group[1]="5";
$group[2]="1"; 
```

之后，您可以对数组进行排序

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T10:38:17.960

将您的组放在一个数组中

```
$groups = array("5","1","15","3","7","1","55","0","35");
arsort($groups); //This sort the array is descending order

var_dump($sorted_groups); 
```

要以您的格式打印数组，请使用以下函数

```
count = 1;
foreach($groups as $key => $value) {
    echo "Group ".($key+1)." is number ".$count++." with ".$value;
} 
```

# ios - ios从网站加载内容

> ID：15109866
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:35:11.747
> 
> 标签：ios, web, load

我想创建原生 iOS 应用程序，它必须显示某些网站（例如新闻网站）的静态内容。我只需要在我的原生 iOS 应用中显示新闻类别、文章的文本和图像。

如何更好地获取网站内容？这样做的通常方法是什么？向网站的开发人员询问网站的api？或者使用一些 iOS SDK 工具来获取网页内容？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:42:01.543

您可以使用`UIWebView`加载网站。

如果开发人员为您提供了一个带有 XML 或 JSON 的网站 API，您可以创建一个`UITableView`带有新闻标题和一个`UIViewController`来加载新闻详细信息的网站 API，但我认为没有任何开发人员会为您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:53:02.953

1.  向网站管理员询问 API 是最好和最简单的方法，如果他们提供的话。
2.  你可以通过 Python 编写的爬虫脚本获取你需要的具体内容。在你自己的服务器上运行 python 脚本，一遍遍地获取新闻类别下的文章，分析内容并提取有用的部分，最终为你的原生 iOS 应用程序提供你自己的 API。这成本更高。
3.  直接创建 NSURLRequest 来加载网页内容，然后在客户端做分析任务。这会影响用户体验。

# iphone - 使用 DidSelectRow 选择作为键/过滤器对象过滤 NSDictionary

> ID：15109869
> 
> 赞同：0
> 
> 时间：2013-02-27T10:35:25.410
> 
> 标签：iphone, ios

我解析并存储`XML`在两个可变数组中，它们是albumArray 和trackArray。我使用这两个数组创建了一个字典，如下所示，

```
 trackANDAlbum = [NSMutableDictionary dictionaryWithObjects:trackArray forKeys:albumArray]; 
```

所以我的字典看起来像这样：

```
 album1 = song1 
 album1 = song2
 album1 = song3 etc. 
```

由于 albumArray 包含重复项，我使用它消除了它，`NSSet`并将这个名为“eliminateDupe”的新数组作为`UITableView`.

我面临的问题是，当用户在 TableView 中选择特定专辑名称时，所选专辑的相应歌曲必须显示在另一个视图中。

那么是否可以识别在`DidSelectRow`TableView 中选择了哪个专辑名称，并将其作为字典 trackANDAlbum 的键，并检索相应的歌曲并将其显示在 tableview 中。

例如，如果选择的专辑是“album1”，那么在下一个tableview中必须列出与album1对应的歌曲，即song1，song2，song3。实现这个概念的任何可能性，或者我有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:21:09.817

如果您使用albumArray 来填充您的tableview，而不是使用此代码，您可以在tableview 中的行中获取专辑名称。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
         NSString * albumName = [albumArray objectAtIndex:indexPath.row];
        } 
```

你可以使用这个albumName变量作为从你的字典中查找歌曲名称的键，如果你使用另一个数组然后改变数组名，是的，如果你想在这个方法之外使用albumName变量而不是在.h文件中创建它的属性.

**更新**

使用我们的 albumName 变量从字典中检索数据

```
if([yourDictionary objectForKey:albumName]!=nil)
   {               
     NSString * songName = [yourDictionary objectForKey:albumName];
   } 
```

您可以使用此代码检索数据，是的，正如我所说，要在另一种方法中使用专辑名称，您必须在 .h 文件中创建其属性并在 .m 文件中合成它。

**编辑**

在您的情况下，单个专辑名称有多个歌曲名称，因此您的代码将是这样的。

```
if([yourDictionary objectForKey: albumName]!=nil)
       {     
          NSArray * newSongAry;
         [newSongAry addObject:[yourDictionary objectForKey:albumName]];
       } 
```

# knockout.js - 每个循环的 JS 淘汰赛生成新的 id

> ID：15109870
> 
> 赞同：0
> 
> 时间：2013-02-27T10:35:27.063
> 
> 标签：knockout.js, foreach

我有一个 Knockout js foreach 循环围绕一个返回多个用户的表和一个搜索按钮，供每个返回的用户搜索该记录。按钮和数据按应有的方式绘制，但是当我单击任何搜索按钮时，它只返回第一个用户。我相信这是因为搜索按钮的 id 总是相同的，需要与 DOM 交互以添加每个功能？这是正确的，如果是这样，这是如何完成的？

```
 <!-- ko foreach: $data -->
    <table class="table table-striped, table-bordered" id="customer-results-policy">
        <thead>
            <tr>
                <th>
                    Title
                </th>
                <th>
                    First Name
                </th>
                <th>
                    Surname
                </th>
                <th>
                    Date of birth
                </th>
                <th>
                    Email
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <span data-bind="text: Customer.Title"></span>
                </td>
                <td>
                    <span data-bind="text: Customer.Forename"></span>
                </td>
                <td>
                    <span data-bind="text: Customer.Surname"></span>
                </td>
                <td>
                    <span data-bind="dateString: Customer.DateOfBirth"></span>
                </td>
                <td>
                    <div><input type="text" id="email-search-box-customer" class="span3 search-query" readonly="readonly" data-bind="value: Customer.Email"  /> <br/>
                    <button type="submit" data-bind="click: $parent." class="btn btn-primary submit-email-search-customer">Search for this customer</button>  </div>

                </td>
            </tr>
        </tbody>
    </table>
    <!-- /ko --> 
```

JS

$('#page-parent').on('click', '.submit-email-search-customer', function () {

```
 $('.submit-email-search-customer').each(function() {
        });

        var email = $('#email-search-box-customer').val();

        var dataExists;
        {
            dataExists = viewModel.refreshViewByEmail(email);
        }

        if (!dataExists) {
            $('#error-message').html("<strong>The email address wasn't recognised -- please check and try again</strong>");
            $('#error-display').show('slow');
            return false;
        } else {
            $('#search-results-many').hide();
            $('#customer-results-email').show();
            $("#search-results").show('slow');
            $("#modify-button").show('slow');
            $("#customer-modify").show();
            $("#account-results").show();
            $("#address-results").show();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:43:24.200

首先，您不能在 foreach 中使用常量值作为 id，因为这会使您的 html 具有多个具有相同 id 的元素（这是不允许的）

而且因为您使用敲除来管理您的模板，所以我应该使用敲除点击绑定来管理点击事件。请参阅淘汰赛的文档 [http://knockoutjs.com/documentation/click-binding.html](http://knockoutjs.com/documentation/click-binding.html)

# android - 在android中找不到资源异常

> ID：15109872
> 
> 赞同：3
> 
> 时间：2013-02-27T10:35:32.180
> 
> 标签：android, android-listview

我正在尝试在我的 android 应用程序中创建一个列表视图。但是我在运行项目时遇到资源未找到异常。

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<include
    android:id="@+id/title_bar" 
    layout="@layout/title_bar" />

<ListView 
    android:id="@+id/FeedList"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/title_bar"
    ></ListView>  

</RelativeLayout> 
```

list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content" 
android:background="#FFFFFF">

<ImageButton
   android:id="@+id/FeedType"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:background="#E0E0E0"
   android:padding="9dp"
   android:src="@drawable/ic_launcher" />

<TextView 
   android:id="@+id/FeedTitle"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="Feed Title"
   android:textSize="18sp"
   android:layout_toRightOf="@+id/FeedType"
   android:paddingLeft="5dp"
   android:textColor="#000000"
   />

<TextView 
   android:id="@+id/FeedPostedBy"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_below="@+id/FeedTitle"
   android:text="by FeedOwner"
   android:layout_toRightOf="@+id/FeedType"
   android:paddingLeft="5dp"
   android:textSize="10sp"
   />

<TextView 
   android:id="@+id/FeedContent"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_below="@+id/FeedPostedBy"
   android:layout_toRightOf="@+id/FeedType"
   android:paddingLeft="5dp"
   android:paddingTop="8dp"
   android:text="The content posted as a feed by the feed owner will appear here"
   android:textSize="10sp"/>  

</RelativeLayout> 
```

列表适配器类：

```
package com.tcs.internal.prime;

import java.util.ArrayList;
import java.util.HashMap;
import android.app.Activity; 
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.TextView;

public class ListAdapter extends BaseAdapter{

private Activity listAdapterActivity = null;
private ArrayList<HashMap<String,String>> data;
private static LayoutInflater inflater;

public ListAdapter(Activity ListActivity,ArrayList<HashMap<String, String>> listData)
{
    listAdapterActivity = ListActivity;
    data = listData;
    inflater = (LayoutInflater)listAdapterActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

@Override
public int getCount() {

    return data.size();

}

@Override
public Object getItem(int position) {

    return position;
}

@Override
public long getItemId(int position) {

    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    View listItem = convertView;

    if(listItem == null)
        listItem = inflater.inflate(R.id.FeedList, null);

    ImageButton feedIcon = (ImageButton) listItem.findViewById(R.id.FeedType);
    TextView    feedTitle = (TextView) listItem.findViewById(R.id.FeedTitle);
    TextView    feedOwner = (TextView) listItem.findViewById(R.id.FeedPostedBy);
    TextView    feedContent = (TextView) listItem.findViewById(R.id.FeedContent);

    HashMap<String, String> feedData = new HashMap<String, String>();
    feedData = data.get(position);

    feedIcon.setImageResource(R.drawable.ic_launcher);
    feedTitle.setText(feedData.get("FeedTitle"));
    feedOwner.setText(feedData.get("FeedOwner"));
    feedContent.setText(feedData.get("FeedContent"));

    return listItem;
}

} 
```

MainActivity 类：

```
package com.tcs.internal.prime;

import java.util.ArrayList;
import java.util.HashMap;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ListView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ArrayList<HashMap<String, String>> feedList = new ArrayList<HashMap<String,String>>();

    HashMap<String, String> data = new HashMap<String, String>();

    data.put("FeedTitle","Application crashed when launched in Windows 7");
    data.put("FeedOwner", "By Venkatramanan");
    data.put("FeedContent","Launch the financial aid adminstration in windows 7 environment");

    feedList.add(data);

    data.clear();

    data.put("FeedTitle","Application crashed when launched in Windows 8 ");
    data.put("FeedOwner", "By Siva Guru");
    data.put("FeedContent","Launch the financial aid adminstration in windows 8 environment");

    feedList.add(data);

    ListView feedListView = (ListView)findViewById(R.id.FeedList);

    ListAdapter listAdapter = new ListAdapter(this, feedList);
    feedListView.setAdapter(listAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

我收到以下异常：

android.content.res.Resources$NotFoundException：资源 ID #0x7f070001 类型 #0x12 无效

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T10:40:05.587

您只需将列表视图适配器的 getview 方法中的自定义布局膨胀为

```
 listItem = inflater.inflate(R.layout.list_item, null); 
```

代替

```
 listItem = inflater.inflate(R.id.FeedList, null); 
```

# cuda - 在 CUDA 中使用 clock() 函数

> ID：15109874
> 
> 赞同：1
> 
> 时间：2013-02-27T10:35:36.470
> 
> 标签：cuda

我有一个简单的内核，我正在使用`clock()`. 我在[如何测量 NVIDIA CUDA 中的内核时间？](https://stackoverflow.com/questions/10585990/how-how-to-measure-the-inner-kernel-time-in-nvidia-cuda)

所以我已经使用 `clock_t start = clock();`（并且同样停止）来计时。在编译时，我收到以下错误：

> tex1.cu（14）：错误：明显调用括号前的表达式必须具有（指向）函数类型`

我是否缺少头文件或编译器选项？

另外，我尝试使用 CUDA 计时器（`cudaEvent_t start, stop;`），但我得到的经过时间是 0 毫秒。我创建开始和停止，记录开始，做一些 CUDA 的东西，同步，记录停止，事件同步和测量经过的时间。这部分编译得很好，但让我经过的时间为零。

这是一个简单的内核，我用它来测试我对纹理内存的理解。内核：

```
__global__ void magic(float *mean, int *clock){
    int i, tid = threadIdx.x + blockIdx.x * blockDim.x;
    float t, sum=0.0;
    clock_t start = clock();
    if ( tid < dimy )
    {
        for(i=0;i<dimx; i++){
            t = tex2D( input, i, tid );
            sum = sum + t*t;
        }
        clock_t stop = clock();
        clock[tid] = (int)(stop-start);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:46:26.287

在您的内核中，不要命名您的内核参数`clock`，因为这会使编译器感到困惑，因为您有一个名为的变量`clock`和一个名为 的函数`clock`。而是这样做：

```
__global__ void magic(float *mean, int *myclock){

...
myclock[tid] = (int)(stop-start);
} 
```

如果您进行更改，括号前表达式的错误将消失。奇怪的是，您回答了有关是否有任何其他变量称为时钟或以 no 开头的问题，因为您*两者都有*。

如果您在使用 cuda 事件方面需要帮助，请发布您用于计时的实际代码。您是否对所有 cuda 调用和内核调用进行错误检查？

# vb.net - UltraTabControl 调整图像大小

> ID：15109889
> 
> 赞同：1
> 
> 时间：2013-02-27T10:36:28.907
> 
> 标签：vb.net, image, tabcontrol, infragistics, image-size

这是我的问题，我的项目中有 ultratabcontrol（infragistics 的控件），其中有六个标签页。每个标签页都包含带有 5 个图像 (.ico) 的图像列表。4 张图片的尺寸为 32x32，一张我制作的尺寸为 60x60。32x32 对我来说真的太小了。但是当我运行项目时，我的 60x60 图像与其他四个图像具有相同的宽度和高度。我试图在 ImageList 对象中设置图像的大小，但它没有帮助。如果您知道出了什么问题，请您提供一些链接或帮助我吗？

# javascript - 获取特定的 div 以查看或滚动到视图中

> ID：15109890
> 
> 赞同：1
> 
> 时间：2013-02-27T10:36:30.690
> 
> 标签：javascript, jquery

我正在尝试向我的网站添加一个功能，当我单击一个链接时，我希望一个特定的 div 元素进入以供用户查看。我尝试了代码

```
$(".testClick").live("click",function(e){
  e.preventDefault(); 
      // Call the scroll function
    goToByScroll("indID13");
});

 function goToByScroll(id){
      // Reove "link" from the ID
    id = id.replace("link", "");
      // Scroll
    $('html,body').animate({
        scrollTop: $("#"+id).offset().top},
        'slow');
} 
```

但这不起作用......是否可以通过纯 jquery 本身在没有任何插件的情况下实现此功能......或者我应该使用任何插件......我将添加我尝试过的示例。jsfiddle 链接[http://jsfiddle.net/xFu3M/](http://jsfiddle.net/xFu3M/)

也试试这个[http://jsfiddle.net/xFu3M/6/](http://jsfiddle.net/xFu3M/6/)这是一个错误..我试图让 div 1 进入视图并且它已经在视图中，所以当我点击链接时它显示了一些其他 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:39:29.517

您刚刚遇到语法错误，将 .live 更改为 .on ，因为 .live 在更高版本的 jQuery 中已贬值，使用它，它将起作用：

```
$(".testClick").on("click",function(e){... 
```

看到这个编辑过的小提琴[jsFiddle](http://jsfiddle.net/xFu3M/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:39:21.327

尝试

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(document).ready(function()
    {
        $(".wrapper").css({"width" : $(window).width() , "height" :  $(window).height()});
        $(".testClick").on("click",function(e)
        {
            e.preventDefault(); 
            goToByScroll("indID13");
        });
    });

    function goToByScroll(id)
    {
        id = id.replace("link", "");
        $('html,body').animate(
        {
            scrollTop: $("#"+id).offset().top
        },'slow');
    }

</script> 
```

您单击的事件代码未包含在`document.ready`.

也使用`.on`代替，`.live`因为它从现在开始已经贬值了。

# javascript - CSS 样式和 JS 文件未上传到生产服务器

> ID：15109893
> 
> 赞同：-4
> 
> 时间：2013-02-27T10:36:37.373
> 
> 标签：javascript, css, drupal-7

当我将新的 CSS 样式和 JS 文件添加到生产服务器时，新文件不会上传到生产服务器，但它会上传到开发服务器并且工作正常。我添加的 CSS 样式和 JS 文件是正确的，因为它们在开发服务器上工作。

- 任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:41:47.273

然后使用api或将它们上传到任何其他服务器并获取链接

并详细说明，然后我们将为您提供更多帮助

# javascript - new Date() 在 Chrome 和 Firefox 中的工作方式不同

> ID：15109894
> 
> 赞同：94
> 
> 时间：2013-02-27T10:36:39.157
> 
> 标签：javascript, date, timezone

我想`Date`通过 javascript 将日期字符串转换为，使用以下代码：

```
var date = new Date('2013-02-27T17:00:00');
alert(date); 
```

`'2013-02-27T17:00:00'`是来自服务器的 JSON 对象中的 UTC 时间。

但是上面代码的结果在 Firefox 和 Chrome 之间是不同的：

火狐返回：

```
Wed Feb 27 2013 17:00:00 GMT+0700 (SE Asia Standard Time) 
```

铬返回：

```
Thu Feb 28 2013 00:00:00 GMT+0700 (SE Asia Standard Time) 
```

1 天不同，我期望的正确结果是 Chrome 的结果。

演示代码：http: [//jsfiddle.net/xHtqa/2/](http://jsfiddle.net/xHtqa/2/)

如何解决此问题以从两者中获得相同的结果？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-27T10:56:51.507

UTC 的正确格式是`2013-02-27T17:00:00Z`（Z 代表祖鲁时间）。如果不存在则追加`Z`以获取正确的 UTC 日期时间字符串。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-27T11:01:03.650

是的，不幸的是，日期解析算法是依赖于实现的。根据（由 使用）的[规范`Date.parse`](http://es5.github.com/#x15.9.4.2)[`new Date`](http://es5.github.com/#x15.9.3.2)：

> 根据字符串的内容，字符串可能被解释为本地时间、UTC 时间或其他时区的时间。该函数首先尝试根据日期时间字符串格式（[15.9.1.15](http://es5.github.com/#x15.9.1.15)）中调用的规则解析字符串的格式。如果字符串不符合该格式，则函数可能会退回到任何特定于实现的启发式或特定于实现的日期格式。

要使[`Date`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)不（可能）使用本地时区，请使用带有时区信息的日期时间字符串，例如`"2013-02-27T17:00:00Z"`. 但是，很难找到一种可以被每个浏览器可靠解析的格式——IE<8 无法识别 ISO 格式（请参阅[JavaScript：哪些浏览器支持使用 Date.parse 解析 ISO-8601 日期字符串](https://stackoverflow.com/q/5802461/1048572)）。更好的是，使用 unix 时间戳，即自[unix epoch](http://en.wikipedia.org/wiki/Unix_time)以来的毫秒数，或者使用正则表达式将字符串分解为各个部分，然后将它们输入[`Date.UTC`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-24T12:56:23.840

我在这里发现了一件事。似乎本机 Firefox Inspector 控制台可能有一个错误：如果我在本机 Inspector 中运行“new Date()”，它会显示一个带有错误时区的日期，GMT 语言环境，但在 Firebug 扩展控制台中运行相同的命令，日期显示使用我正确的时区 (GMT-3:00)。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-08-04T22:52:52.173

注意到 FireFox 没有返回与 Chrome 相同的结果。看起来您在 kendo.toString 中使用的日期格式有所不同。

最后一个控制台结果是我需要的：

[![在此处输入图像描述](../Images/09dc75049a11180e51b60d5b808faede.png)](https://i.stack.imgur.com/FvgqR.png)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-01-22T18:08:01.150

尝试使用 moment.js。它在所有浏览器中运行得非常好并且以类似的方式运行。带有许多格式化选项。使用 moment('date').format("") 而不是 New Date('date')

# android - 解析Cdata描述标签中的Imagelink Dom解析

> ID：15109904
> 
> 赞同：1
> 
> 时间：2013-02-27T10:37:28.107
> 
> 标签：android, xml, parsing, dom

我想检索描述标签内的图片链接，我的标签都在工作，这里是描述标签的示例：

```
[http://news.instaforex.com/analytics/rss][1] 
```

我想检索图像链接或显示图像。我的问题是如何基于我下面的代码？

```
mainactivity

    public class AndroidXMLParsingActivity extends ListActivity {

    // All static variables
    static final String URL = "http://news.instaforex.com/analytics/rss";

    // XML node keys
    static final String KEY_ITEM = "item"; // parent node
    static final String KEY_TITLE = "title";
    static final String KEY_PUBDATE = "pubDate";
    static final String KEY_DESCRIPTION = "description";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final ArrayList<HashMap<String, Spanned>> menuItems = new        `   ArrayList<HashMap<String, Spanned>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, Spanned> map = new HashMap<String, Spanned>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_TITLE, Html.fromHtml(parser.getValue(e, KEY_TITLE)));
            map.put(KEY_PUBDATE, Html.fromHtml(parser.getValue(e, KEY_PUBDATE)));
            String description = parser.getValue(e, KEY_DESCRIPTION);;
            int index = description.indexOf("The material has been provided by InstaForex Company", 0);
            description = description.substring(0, index-1);
            map.put(KEY_DESCRIPTION, Html.fromHtml(description));

            // adding HashList to ArrayList
            menuItems.add(map);
        }

        // Adding menuItems to ListView

        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_TITLE, KEY_PUBDATE }, new int[] {
                        R.id.name, R.id.cost }); 

        setListAdapter(adapter);
        ((BaseAdapter) adapter).notifyDataSetChanged();

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                String title = menuItems.get(position).get(KEY_TITLE).toString();
                String pubDate = menuItems.get(position).get(KEY_PUBDATE).toString();
            String description= menuItems.get(position).get(KEY_DESCRIPTION).toString();

        System.out.println("PubDate==>"+pubDate+"\n Description===>"+description);

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_TITLE, title);
                in.putExtra(KEY_PUBDATE, pubDate);
                in.putExtra(KEY_DESCRIPTION, description);
                startActivity(in);
            }
        });

    }
} 
```

xml解析器

```
 package com.androidhive.xmlparsing;

import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.text.Html;
import android.util.Log;

public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        dbf.setCoalescing(true);
        dbf.setNamespaceAware(true);
        if (dbf.isNamespaceAware()==Boolean.TRUE) {
            dbf.setNamespaceAware(Boolean.FALSE);

        }
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */

     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE || child.getNodeType() == Node.CDATA_SECTION_NODE  ){   
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);
            return this.getElementValue(n.item(0));
        }

} 
```

# tableview - 我可以打印合适的自定义行吗

> ID：15109910
> 
> 赞同：0
> 
> 时间：2013-02-27T10:37:40.510
> 
> 标签：tableview

我的问题是如果行返回 5 然后`UITableView`显示 0 到 5 索引，但我们想要打印 3 到 5 的任何逻辑？？` // 创建单元格标识符 static NSString *CellIdentifier = @"CellIdentifier";

```
// Create the cell if cells are available with same cell identifier
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// If there are no cells available, allocate a new one with Default style
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.textLabel.text = [[no objectAtIndex:indexPath.row]valueForKey:@"name"];
// Configure cell... 
```

我可以打印值自定义范围吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:13:25.420

您的解决方案是这样的，它运行良好：

在.h

`Bool drawCell;` 米

```
- (void)viewDidLoad
{
drawCell=NO;
}    
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{        
UITableViewCell *cell = nil;
if(indexPath.row==3)
{
 drawCell=YES;
}
if(drawCell)
{
cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
cell.textLabel.text = [[no objectAtIndex:indexPath.row]valueForKey:@"name"];
}
else
{
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    cell.frame=CGRectMake(0, 0, 0, 0);
}

return cell;
}
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
if (drawCell) {
    return 100.0f;
} else {
    return 0.0f;
}
} 
```

# php - 如何分配评论ID？

> ID：15109911
> 
> 赞同：1
> 
> 时间：2013-02-27T10:37:41.313
> 
> 标签：php, mysql, codeigniter

我正在制作评论系统，现在我想将评论插入数据库，我很困惑在什么基础上分配特定的comment_id。假设我们有多个带有评论系统的图像潜水。如果有人对图像进行评论，那么我们如何为该特定图像分配特定的评论 ID。如果其他用户对同一图像发表评论，那么他如何找到该图像 comment_id 以便评论保存在正确的方向。我们有许多图像和该图像的评论系统。我的英语不好可能是你明白我想说什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:41:59.427

您需要在数据库中创建许多不同的表

**表：评论**

```
|comment_id | userID | name | comment | (for example)
  1         50     James  test 
  2         50     James  test 
  3         50     James  test 
```

**表：图像**

```
|image_id | link |
  1      example.com/images/image1.png
  2      example.com/images/image2.png
  3      example.com/images/image3.png 
```

**表：comments_on_images（使表的目的明确）**

```
|id | comment_id | image_id
  1        1          2
  2        2          2
  3        3          1 
```

使用此方法，您可以将任意数量的评论与任何图像相关联。您必须使用查询数据库`JOINS`以获取所需的所有信息。

# perl - 将变量传递给 Perl 子例程

> ID：15109917
> 
> 赞同：12
> 
> 时间：2013-02-27T10:38:03.363
> 
> 标签：perl

我想将以下变量传递给子程序 mySubroutine，`$name, $age`然后是这个多维数组：

```
$name = "jennifer";
$age = 100;

$list[0][0] = "TEST NAME 2";
$list[0][1] = "TEST GROUP 2";
$[0][2] = 10;

$[1][0] = "TEST NAME 2";
$[1][1] = "TEST GROUP 2";
$[1][2] = 2; 
```

子程序：

```
sub mySubroutine
{

} 
```

我已经尝试过`$_[0]`, 和`@_`，但我似乎没有正确地将变量传递给子例程。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-27T10:41:30.360

有几种方法可以做到这一点（就像 Perl 中的大多数事情一样）。我个人是这样做的：

```
sub mySubroutine
{
    # Get passed arguments
    my ($name, $age, $refList) = @_;

    # Get the array from the reference
    my @list = @{$refList};
    # Good to go
}

# You need to pass @list as reference, so you 
# put \@list, which is the reference to the array
mySubroutine($name, $age, \@list); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T10:44:21.110

另一种方法是通过引用传递数组，然后复制它以避免在编辑时更改原始数组。

```
sub mySubroutine
{
    ## Retrieve name
    my $name = shift;

    ## Retrieve age
    my $age = shift;

    ## Retrieve list reference
    my $refList = shift;

    ## De-reference the list's scalar
    my @list = @{$refList};
    # Good to go
}

## Function call
mySubroutine($name, $age, \@list); 
```

为了更好地理解，请参阅[perlsub](http://perldoc.perl.org/perlsub.html)（Perl 子例程）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T10:56:05.200

另一种选择，只要您只传递一个数组，就是按值将其作为最后一个元素正常传递：

```
sub scalars_and_one_array {
    my $name = shift;
    my $age = shift;

    foreach my $element (@_)
    {
       # Do something with the array that was passed in.
    }
}

scalars_and_one_array($name,$age,@array); 
```

但是，最有效的方法是仅通过在 sub 中使用引用来避免数组的任何额外副本。这确实意味着对子数组的更改会影响原始数组，但是：

```
sub array_by_ref {
    my $array_ref = shift;

    foreach my $element (@$array_ref)
    {
       # Changing $element changes @original_array!
    }
}

array_by_ref(\@original_array); 
```

# asterisk - 我有服务器 Asterisk 我想在 mixmonitor 中显示 sip 通道

> ID：15109918
> 
> 赞同：0
> 
> 时间：2013-02-27T10:38:03.680
> 
> 标签：asterisk

我有 1 台服务器 Asterisk 我想将声音文件保存在文件夹中并且我可以保存到文件夹但我无法重命名我想要的文件名当一个呼叫进入服务器时当被调用 wit sip 香奈儿号码 sip 保存到名称文件声音我想要输入代码进入上下文

```
[voicemenu-custom-1]
include = default
exten = s,1,NoOp(VM_Main)
exten = s,2,Answer()
exten = s,3,Set(CALLFILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-${UNIQUEID}-${CALLERID(num)})
exten = s,4,Set(CALLFILENAMES=${REPLACE(CALLFILENAME,*)})
exten = s,5,MixMonitor(${CALLFILENAMES}.wav,bW(2))
exten = s,6,Set(CDR(userfield)=audio:${CALLFILENAMES}.wav)
exten = s,7,AGI(agi://192.168.27.85/customivr)
exten = s,8,GotoIf($[${AGISTATUS} != "SUCCESS"]?ringgroup:hangup)
exten = s,9(ringgroup),Goto(ringroups-custom-1,s,1)
exten = s,10,System(/var/lib/asterisk/scripts/checkrcm.sh ${UNIQUEID}
${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)} ${CALLERID(num)})
exten = s,11(hangup),StopMixMonitor()
exten = s,12,Hangup() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T04:52:26.533

接到电话时，您有 DAHDI 频道，但在一位用户接听电话之前，您无法定义 sip 频道。lool :-> 您可以将 dahdhi 频道添加到您的文件名中，但不能保存 sip 频道。如果你想要这个，你必须在挂断事件中重命名文件

# iphone - 所选设备无法在 Xcode 4.6 上运行

> ID：15109922
> 
> 赞同：4
> 
> 时间：2013-02-27T10:38:19.973
> 
> 标签：iphone, ios

我的 Xcode 版本 4.6 (4H127) 和我的 Mac OS 是 10.7.5。我还安装了有效的配置文件和证书。当我通过设备部署 Xcode 时，它​​显示错误`No provisioned iOS devices are available with a compatible iOS version. Connect an iOS device with a recent enough version of iOS to run your application or choose an iOS simulator as the destination`。如果有人知道你能解决我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:42:01.700

在管理器的设备窗格中选择“使用此手机进行开发”怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:41:21.840

10.7.5 是您的 Mac OS X 版本号，而不是您的 iOS 设备版本。

问题是您没有有效的配置文件。前往 Apple Developer Center > Provisioning Portal 创建必要的 App ID 和 Provisioning Profile。

或者，在 Xcode > Organizer 中右键单击您的设备以“添加到配置门户”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:42:29.563

Xcode 现在默认为 ARM7 创建应用程序。

要支持 iPhone 3G 和其他 arm6 设备，需要在 Architectures 列表中指定 arm6 和 arm7，并在 plist 中将设备要求设置为仅 arm6。

这取决于您使用的是什么设备。如果它的 iOS6 设备，那么它可以使用默认设置，否则使用上述设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:41:51.963

检查您选择的部署目标，根据您的设备 iOS 版本选择此项。

![在此处输入图像描述](../Images/b8da772212b20a95b56413fed22c5d15.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:17:12.860

Shivan 的回答（或者，在 Xcode > Organizer 中右键单击您的设备以“添加到配置门户”）帮助我解决了与断开设备（USB）并重新连接的附加步骤相同的问题。

# java - 从 .net 调用 java web 服务返回 null - 不同的命名空间

> ID：15109925
> 
> 赞同：0
> 
> 时间：2013-02-27T10:38:29.380
> 
> 标签：java, asp.net, webservice-client

我在调用 java web 服务方法时遇到问题，它的对象返回 null 但返回的 xml 我可以看到正确的数据。我意识到 asp.net 在创建 Web 服务时生成的命名空间与返回的 xml 中的命名空间不同。返回的命名空间有别名，而生成的命名空间没有别名。

这是 asp.net 命名空间：

```
**[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://#$%#@$$#$@$.com/RedFlag/Admin/RedFlagAdmin/v1")]** 
```

并返回来自 xml 的命名空间：

```
 **<dlwmin:GetEntityHistoryResponse xmlns:dlwmin="http://#$%#@$$#$@$.com/RedFlag/Admin/RedFlagAdmin/v1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">** 
```

我如何能够更改 asp.net 中生成的命名空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:10:15.677

如果您有 wsdl（Web 服务定义语言），您可以轻松地从 .net 客户端调用 java webservice。如果是这样，关于命名空间没有问题

1.  第 1 步：复制该特定服务的 wsdl
2.  第二步：创建.net应用
3.  第3步：YourApplication -> ServiceReference -> 添加服务引用并将您的wsdl url粘贴到那里并给出reference_name（它是您的命名空间）
4.  第四步：完成
5.  第 5 步：在该应用程序上创建 ac# 类
6.  Step6：在该类上添加命名空间，例如： using yourreference_name;
7.  Step7: 一个客户端对象已经在那里创建。使用该对象，您可以调用您的网络服务

# javascript - 注销主干事件

> ID：15109926
> 
> 赞同：0
> 
> 时间：2013-02-27T10:38:30.413
> 
> 标签：javascript, backbone.js, pagination

我正处于骨干的真正瓶颈中。我是新手，如果我的问题很愚蠢，我很抱歉，因为我可能没有明白系统结构的重点。

基本上，我正在创建广告应用程序，它可以让您为不同的“步骤”做一些事情。因此，我实现了某种分页系统。每次页面满足特定条件时，显示下一页链接，并缓存当前页面。

每个页面都使用相同的“页面”对象模型/视图，并且每次都将导航附加到那里。无论如何它只注册了一次，当旧页面淡出而新页面淡入时，我取消委托/重新委托事件。

如果我总是对以前的页面使用缓存版本，一切都很好。但是，如果我重新渲染已经渲染的页面，当我单击“转到下一页”时，它会跳过我重新渲染页面本身的次数。

就像“转到下一页”按钮已经注册了 3 次，并且从未从事件侦听器中删除。

就代码而言，这是一个很长的应用程序，我希望你能理解基本思想，并给我一些提示，而不需要在这里有完整的代码。

在此先感谢，我希望有人可以帮助我，因为我正处于真正的瓶颈中！

ps由于某种原因，我注意到下一个/上一个按钮各自的html没有缓存在页面中。诡异的。

---UPDATE--- 我尝试了stopListening 建议，但没有奏效。这是 jmy 麻烦的按钮：

```
 // Register the next button
    App.Views.NavNext = Backbone.View.extend({

        el: $('#nav-next'),

        initialize: function() {
            vent.on('showNext', function() {
                this.$el.fadeIn();
            }, this)
        },

        events: {
            'click': 'checkConditions'
        },

        checkConditions: function() {
            //TODO this is running 2 times too!
            console.log('checking conditions');
            if (current_step == 1)
                this.go_next_step();
            vent.trigger('checkConditions', current_step); // will trigger cart conditions too

        },

        go_next_step: function() {

            if(typeof(mainView.stepView) != 'undefined')
            {
                mainView.stepView.unregisterNavigation();               
            }

            mainView.$el.fadeOut('normal', function(){
                $(this).html('');
                current_step++;
                mainView.renderStep(current_step);
            }); //fadeout and empty, then refill

        }
    }); 
```

基本上， checkConditions 运行 2 次，就好像之前渲染的点击仍然被注册一样。这是它被注册的地方，然后在当前步骤消失后取消注册（只是该视图的一部分！）：

```
 render: function() {
            var step = this;

            //print the title for this step

            this.$el.attr('id', 'step_' + current_step);
            this.$el.html('<h3>'+this.model.get('description')+'</h3>');
            // switch display based on the step number, will load all necessary data

            // this.navPrev = new App.Views.NavPrev();
            // this.navNext = new App.Views.NavNext();

            this.$el.addClass('grid_7 omega');

            // add cart (only if not already there)
            if (!mainView.cart)
            {
                mainView.cart = new App.Models.Cart;
                mainView.cartView = new App.Views.Cart({model: mainView.cart})
                mainView.$el.before(mainView.cartView.render().$el)                                 
            }

            switch (this.model.get('n'))
            {

                case 5: // Product list, fetch and display based on the provious options

                    // _.each(mainView.step_values, function(option){
                    //  console.log(option)
                    // }, this);

                    var products = new App.Collections.Products;
                    products.fetch({data:mainView.step_values, type:'POST'}).complete(function() {
                        if (products.length == 0)
                        {
                            step.$el.append('<p>'+errorMsgs['noprod']+'</p>')

                        }
                        else {
                            step.contentView = new App.Views.Products({collection: products});
                            step.$el.append(step.contentView.render().$el);

                        }
                        step.appendNavigation();

                    });

                break;

            }
            //console.log(this.el)
            return this;
        },

        appendNavigation: function(back) {
            if(current_step != 2)
                this.$el.append(navPrev.$el.show());
            else this.$el.append(navPrev.$el.hide());

            this.$el.append(navNext.$el.hide());
            if(back) navNext.$el.show();

            navPrev.delegateEvents(); // re-assign all events
            navNext.delegateEvents();
        },

        unregisterNavigation: function() {
            navNext.stopListening(); // re-assign all events            
        } 
```

最后，这是主视图的 renderStep，在按下“下一步”后调用它会加载缓存版本（如果存在），但对于问题页面，我没有创建它

```
renderStep : function(i, previous) { // i will be the current step number
            if(i == 1)
                return this;
            if(this.cached_step[i] && previous) // TODO do not render if going back
            { // we have this step already cached

                this.stepView = this.cached_step[i];
                console.log('ciao'+current_step)

                this.stepView.appendNavigation(true);
                if ( current_step == 3)
                {

                    _.each(this.stepView.contentView.productViews, function(pview){
                        pview.delegateEvents(); //rebind all product clicks
                    })
                }

                this.$el.html(this.stepView.$el).fadeIn();

            } else {

                var step = new App.Models.Step({description: steps[i-1], n: i});
                this.stepView = new App.Views.Step({model: step})
                this.$el.html(this.stepView.render().$el).fadeIn(); // refill the content with a new step
                mainView.cached_step[current_step] = mainView.stepView; // was in go_next_step, TODO check appendnavigation, then re-render go next step

            }

            return this;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:55:38.757

当您在屏幕上显示或删除某个视图时，请尝试使用`listenTo`和。`stopListening`

看看文档：[http ://backbonejs.org/#Events-listenTo](http://backbonejs.org/#Events-listenTo)

所有事件都在视图初始化时绑定，当您从屏幕上删除视图时，请取消绑定所有事件。

阅读本文进行详细分析： http: [//lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

# php - 一页php上有多个mysql连接

> ID：15109933
> 
> 赞同：0
> 
> 时间：2013-02-27T10:38:53.340
> 
> 标签：php, mysql, database, connection

我收到错误（不是真正的错误，只是无法正常工作），我试图弄清楚它是否与我的 sql 连接有关。我与两个完全不同的数据库有 2 个单独的连接。

```
$dshost = "kjbkb";
$dsdatabase = "kjhk";
$dsusername = "hjgfytdf";
$dspassword = "jhv";
mysql_connect($dshost,$dsusername,$dspassword);
mysql_select_db($dsdatabase) or die( "Unable to select database");

$sql = "SELECT * FROM users WHERE `username` = '".$_POST['paydl']."'";
$cheeseburger = mysql_query($sql);
$res = mysql_fetch_array($cheeseburger);
$autobus_user = $res['id'];

mysql_close(); //close first connection

$db_host = "khgv";
$db_user = "trdstx";
$db_password = "txz";
$db_database = "gfxx";
mysql_connect($db_host, $db_user, $db_password) or die("Unable to connect to host");
mysql_select_db($db_database) or die( "Unable to select database");

$ASDFASDF = "SELECT * FROM `autobus` WHERE `user_id` = '".$autobus_user."' LIMIT 3";
$BobDoleDontNeedThis = mysql_query($ASDFASDF);
$resnumbatwo = mysql_fetch_array($BobDoleDontNeedThis);

mysql_close(); //close 2nd connection 
```

我这样做对吗？为什么`$resnumbatwo`返回错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:42:54.267

在 PHP 中使用多个 MySQL 连接时，您必须提供第四个参数，告诉 PHP 像这样实际创建新连接（这非常重要，如果您使用到同一主机的两个连接）：

```
$db1 = mysql_connect($host1, $user1, $passwd1, true);
$db2 = mysql_connect($host2, $user2, $passwd2, true); 
```

如果没有使用第四个参数，并且参数相同，那么 PHP 将返回相同的链接，并且不会建立新的连接。

在此之后，您应该使用带有额外参数的“mysql_query”，而不是定义要使用的连接：

```
$res1 = mysql_query($sql1, $db1) or die(mysql_error($res1));
$res2 = mysql_query($sql2, $db2) or die(mysql_error($res2)); 
```

来自 php.net 的第四个参数的描述是：
“*如果使用相同的参数对 mysql_connect() 进行第二次调用，则不会建立新的链接，而是返回已经打开的链接的链接标识符。 new_link 参数修改了这种行为并使 mysql_connect() 始终打开一个新链接，即使之前使用相同的参数调用了 mysql_connect()。在 SQL 安全模式下，此参数被忽略。* "

查看更多信息：
[http ://www.php.net/manual/en/function.mysql-connect.php](http://www.php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:42:52.700

最好将每个连接处理程序保存在一个变量中并将其传输给对应的`mysql_query()`。

*例子：*

```
$dbch1 = mysql_connect($dshost, $dsusername, $dspassword);
$dbch2 = mysql_connect($db_host, $db_user, $db_password);

$cheeseburger = mysql_query($sql, $dbch1);
$BobDoleDontNeedThis = mysql_query($ASDFASDF, $dbch2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:49:28.373

`mysql_fetch_array``false`如果查询没有返回匹配的记录，将返回。请参阅[API 参考文档](http://php.net/manual/en/function.mysql-fetch-array.php)中的以下条目：

> ## 返回值：
> 
> 返回对应于获取的行的字符串数组，**或者 `FALSE`如果没有更多的行**。返回数组的类型取决于 result_type 的定义方式。通过使用`MYSQL_BOTH` （默认），您将获得一个包含关联索引和数字索引的数组。使用`MYSQL_ASSOC`，您只能获得关联索引（按 [`mysql_fetch_assoc()`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)工作），使用`MYSQL_NUM`，您只能获得数字索引（按[`mysql_fetch_row()`](http://www.php.net/manual/en/function.mysql-fetch-row.php)工作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T12:59:31.137

您可以使用

```
$dbch1 = mysql_connect($dshost, $dsusername, $dspassword,true);
$dbch2 = mysql_connect($db_host, $db_user, $db_password,true);

$cheeseburger = mysql_query($sql, $dbch1);
$BobDoleDontNeedThis = mysql_query($ASDFASDF, $dbch2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-14T04:47:54.413

使用 php7 你可以使用 mysqli_change_user() 函数。

就像 php.net 页面上的示例一样：http: [//php.net/manual/en/mysqli.change-user.php](http://php.net/manual/en/mysqli.change-user.php)

# python - 用于协议解析的python构造

> ID：15109934
> 
> 赞同：1
> 
> 时间：2013-02-27T10:38:53.747
> 
> 标签：python, twisted, construct

我试图将扭曲的力量与声明性二进制数据解析器`Protocol`的延展性混合起来。`construct`

到目前为止，我的`MessageReceiver`协议通过以下方式累积来自 tcp 通道的数据：

```
def rawDataReceived(self, data):
    '''
    This method bufferizes the data coming from the TCP channel in the following way:
        - Initially, discard the stream until a reserved character is detected
        - add data to the buffer up to the expected message length unless the reserved character is met again. In that case discard the message and start again
        - if the expected message length is reached, attempt to parse the message and clear the buffer
    '''
    if self._buffer:
        index = data.find(self.reserved_character)

        if index > -1:
            if len(self._buffer) + index >= self._fixed_size:
                self.on_message(self._buffer + data[:data.index(self._reserved_character)])

            self._buffer = b''
            data = data[data.index(self.reserved_character):]
            [self.on_message(chunks[:self._fixed_size]) for chunks in  [self.reserved_character + msg for msg in data.split(self._reserved_character) if msg]]

        elif len(self._buffer) + len(data) < self._expected_size:
            self._buffer = self._buffer + data
        else:
            self._buffer = b''
    else:  
        try:
            data = data[data.index(self._reserved_character):]
            [self.on_message(chunks[:self._fixed_size]) for chunks in  [self._reserved_character + msg for msg in data.split(self._reserved_character) if msg]]
        except Exception, exc:
            log.msg("Warning: Maybe there is no delimiter {delim} for the new message. Error: {err}".format(delim=self._reserved_character, err=str(exc))) 
```

现在我需要改进协议以考虑消息可能携带或不携带可选字段的事实（因此不再有固定的消息长度）。`construct`我用以下方式对消息解析器建模（一个有意义的部分） ：

```
def on_message(self, msg):
    return Struct(HEADER,
        Bytes(HEADER_RAW, 3),
        BitStruct(OPTIONAL_HEADER_STRUCT, 
            Nibble(APPLICATION_SELECTOR),
            Flag(OPTIONAL_HEADER_FLAG), 
            Padding(3)
        ),
        If(lambda ctx: ctx.optional_header_struct[OPTIONAL_HEADER_FLAG],
            Embed(Struct(None,
                   Byte(BATTERY_CHARGE),
                   Bytes(OPTIONAL_HEADER, 3)
                   )
            )
        )
    ).parse(msg) 
```

所以现在我需要更改缓冲逻辑以将正确的块大小传递给`Struct`. 考虑到对象中已知消息的可能候选对象的规则，我想避免调整要传递给方法的数据的`Struct`大小。`rawDataReceived``construct`

有没有办法将缓冲逻辑推送到`construct`对象？

## 编辑

`Macro`通过简单地使用s 和s ，我能够部分地实现将缓冲逻辑推入内部的目标`Adapter`：

```
MY_PROTOCOL = Struct("whatever",
    Anchor("begin"),
    RepeatUntil(lambda obj, ctx:obj==RESERVED_CHAR, Field("garbage", 1)),
    NoneOf(Embed(HEADER_SECTION), [RESERVED_CHAR]),
    Anchor("end"),
    Value("size", lambda ctx:ctx.end - ctx.begin)
) 
```

`rawDataReceived`这极大地简化了调用者代码（由于 Glyph 的建议不再使用）：

```
def dataReceived(self, data):
    log.msg('Received data: {}'.format(bytes_to_hex(data)))
    self._buffer += data
    try:
        container = My_PROTOCOL.parse(self._buffer)
        self._buffer = self._buffer[container.size:]
        d, self.d = self.d, self._create_new_transmission_deferred()
        d.callback(container)
    except ValidationError, err:
        self._cb_error("A validation error occurred. Discarding the rest of the message. {}".format(err))
        self._buffer = b''    
    except FieldError, err:     #Incomplete message. We simply keep on buffering and retry
        if len(self._buffer) >= MyMessageReceiver.MAX_GARBAGE_SIZE:
            self._cb_error("Buffer overflown. No delimiter found in the stream") 
```

不幸的是，该解决方案仅部分满足了要求，因为我无法找到一种方法来`construct`告诉我产生错误的流的索引，因此我不得不删除整个缓冲区，这并不理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-20T14:23:59.530

要获取发生错误的流位置，您需要使用 Anchor 并编写自己的 NoneOf 版本。假设 HEADER_SECTION 是另一个构造，替换 NoneOf 像这样：

```
SpecialNoneOf(Struct('example', Anchor('position'), HEADER_SECTION), [RESERVED_CHAR])) 
```

SpecialNoneOf 需要从 Adapter继承，并将来自 NoneOf 的**init**和 _validate 与来自 Validator 的 _encode 和 _decode 结合起来。在_decode中，替换

```
raise ValidationError("invalid object", obj) 
```

和

```
raise ValidationError("invalid object", obj.header_section + " at " + obj.position) 
```

将 header_section 替换为 HEADER_SECTION 构造的名称。您将不得不更改生成的容器的结构或找出使用 Embed 的不同方法来使此方法起作用。

# php - 在 post 方法中发送的额外添加的字段值

> ID：15109936
> 
> 赞同：1
> 
> 时间：2013-02-27T10:38:59.723
> 
> 标签：php, javascript, html

使用javascript添加额外字段后，额外字段值不会通过php中的post方法发送。在代码中添加了基本的 5 个字段，其余是用户可以根据需要添加的额外字段

代码如下：

```
 <script language="javascript">
  var i = 11;
  function changeIt()
  {

  my_div.innerHTML = my_div.innerHTML +"<tr><td> <input id='item"+i+"' name='item"+i+"' type='text' maxlength='255' value=''/></td><td><input id='kgorp"+i+"' name='kgorp"+i+"' type='text' maxlength='3' value=''/></td><br/></tr>";
  i++;
  }
  </script>
  <body>
     Please enther the grocery items
   <table>
  <tr>
  <th> Item name</th><th> kg/No of packet</th>
  </tr>
  <form  method="post" action="gl.php">
<tr> <td><input id="item1" name="item1" type="text" maxlength="255" value=""/></td><td><input id="kgorp1" name="kgorp1" type="text" maxlength="3" value=""/></td></tr>
<tr> <td><input id="item2" name="item2" type="text" maxlength="255" value=""/></td><td><input id="kgorp2" name="kgorp2" type="text" maxlength="3" value=""/></td></tr>
<tr> <td> <input id="item3" name="item3" type="text" maxlength="255" value=""/></td><td><input id="kgorp3" name="kgorp3" type="text" maxlength="3" value=""/></td></tr>
<tr> <td> <input id="item4" name="item4" type="text" maxlength="255" value=""/></td><td><input id="kgorp4" name="kgorp4" type="text" maxlength="3" value=""/></td></tr>
<tr> <td> <input id="item5" name="item5" type="text" maxlength="255" value=""/></td><td><input id="kgorp5" name="kgorp5" type="text" maxlength="3" value=""/></td></tr>
<tr id="my_div"></tr>
<tr> <td><input id="saveForm" type="submit" value="Submit List" /></td><td><input id="addtxt" type="button" name="addtxt" value="Add more items" onClick="changeIt()" /></td> </tr>
</form>
   </table>
   </body> 
```

用于检索通过 post 方法发送的数据的 php 代码，

```
$i=1;
foreach ($_POST as $param_value) {
  if ( empty( $param_value ) ) { 

  } else {
    echo "<td>$param_value</td>";
    if ( ( $i % 2 ) == 0 ) {
      echo "</tr> <tr>";
    }//echo $i;
  }
  $i++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:43:38.007

问题在于如何在 HTML DOM 中放置和解析表单标签。将表单标签放在文档中较高的标签之后。

```
<body>
  Please enther the grocery items
  <form method="post" action="gl.php"> 
```

然后将javascript更改为：

```
function changeIt()
{
    var child = document.createElement('td');
    child.innerHTML = "<input id='item"+i+"' name='item"+i+"' type='text' maxlength='255' value=''/><input id='kgorp"+i+"' name='kgorp"+i+"' type='text' maxlength='3' value=''/>";
    document.getElementById("my_div").appendChild(child);
    i++;
} 
```

执行 print_r($_POST) 时应该得到的是：

```
Array ( [item1] => [kgorp1] => [item2] => [kgorp2] => [item3] => [kgorp3] => [item4] => [kgorp4] => [item5] => [kgorp5] => [item6] => [kgorp6] => [item7] => [kgorp7] => [item8] => [kgorp8] => [item9] => [kgorp9] => [item10] => [kgorp10] => [item11] => [kgorp11] => ) 
```

一个更好的解决方案是去掉表格和 tr/td 标签并使用 divs/spans 来处理表单（它是一种更好的编码方式，老实说:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:45:16.003

```
for(i=0;i<=11;i++) {
    document.getElementById("my_div").innerHTML = document.getElementById("my_div").innerHTML +"<tr>
    <td> <input id='item"+i+"' name='item"+i+"' type='text' maxlength='255' value=''/></td>
    <td><input id='kgorp"+i+"' name='kgorp"+i+"' type='text' maxlength='3' value=''/></td>
    <br/>
    </tr>";
 } 
```

[演示](http://jsfiddle.net/qn3kT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:47:27.210

我看不到 my_div 变量的初始化位置。您可以在 changeIt 函数的开头执行以下操作：

```
var my_div = document.getElementById('my_div') 
```

然后是另一个问题：当它实际上是一个 tr 标签时，不要命名这个变量 my_div 。

更进一步：在这个 tr 标记中，你的 changeIt 函数将包含包含另一个 tr 的 HTML，所以你最终会得到错误的 HTML。一个建议：不要使用表格，而是使用 div 或 li 标签来进行此类列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:47:59.217

不要在函数中使用它，只需按以下方式将其内联到表单中，

```
document.write('<input type="hidden" name="whatever" value="'+i+'">'); 
```

并根据您的需要进行必要的调整。

# c# - 日期格式“dd/MM/yyyy”到“yyyy/MM/dd”

> ID：15109938
> 
> 赞同：-2
> 
> 时间：2013-02-27T10:39:10.513
> 
> 标签：c#

我知道这个问题之前已经被问过并使用各种方法解决了。

我正在将值从字符串转换为 DateTime。

在整个项目中，我使用了相同的 CultureInfo，所有使用 Convert.ToDateTime() 转换为日期的字符串，但现在有一个文本字段拒绝转换。

我努力了：

```
string date = "27/02/2013";
string startdated = (Convert.ToDateTime(date)).ToString("yyyy/MM/dd"); 
```

（转换为日期时间并将其更改回我需要的格式。这适用于其他一切）

甚至

```
Datetime dt = Convert.toDateTime(date); doesn't work 
DateTime.ParseExact(date, "yyyy/MM/dd", format); doesn't work 
```

并且都给我同样的错误“字符串未被识别为有效的日期时间。”。我从带有 ajax 日历扩展器的文本框中接收我的日期值（CalendarExtender.Format =“dd/MM/yyyy”用于显示目的，这也适用于其他任何地方，即“dd/MM/yyyy”用于显示和“yyyy/MM /dd" 用于过程）除了这个最终值不会改变。一切都是通过我的机器完成的，没有外部服务器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:41:24.543

您的输入字符串的格式与您提供的 DateTime.ParseExact 格式不同。

为了这个工作

```
DateTime.ParseExact(date, "yyyy/MM/dd", format); 
```

您必须以*年/月/日*格式输入日期。但是你的字符串在*day/month/year*。

这应该会更好。

```
string date = "27/02/2013";
DateTime parsedDate = DateTime.ParseExact(date, "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:41:24.183

您的日期是`date = "27/02/2013";`并且您当前的格式*（in `DateTime.ParseExact`）*是`"yyyy/MM/dd"`，**它应该是：**

```
"dd/MM/yyyy" 
```

所以下面的代码应该可以工作。

```
string date = "27/02/2013";
DateTime dt = DateTime.ParseExact(date, "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

您还可以使用`"d/M/yyyy"`处理一位数或两位数日期/月份的格式。

# jquery - jQuery custom functions

> ID：15109944
> 
> 赞同：0
> 
> 时间：2013-02-27T10:39:25.000
> 
> 标签：jquery

Why the value of `oldHeight` is not overridden ? It still has `oldHeight` to `80` not what i have passed as argument. Even if i pass argument `newHeight`, it will also not override it. But according to the [documentation](http://docs.jquery.com/Plugins/Authoring), it will automatically updated. Here's the code:

```
( function($) {
$.fn.bad = function(callback) {
    var options;
    var settings = $.extend({
        "oldHeight":"80",
        "newHeight":"200"
    }, options);
    return this.each( function() {
        var that$ = $(this);
        that$.bind("mouseenter", function() {
            $(this).animate({ "height" : settings.newHeight+"px" });
        }).bind("mouseleave", function() {
            $(this).animate({ "height" : settings.oldHeight+"px" });
        });
    });
}
})(jQuery);
$(".box").bad({"oldHeight":"400"}); 
```

And this ===> [`Fiddle`](http://jsfiddle.net/cGSNn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:45:28.020

You initialized "options" with null with `var options;` and extended your settings with an empty value.

```
( function($) {
    $.fn.bad = function(options) {
            var settings = $.extend({
                "oldHeight":"80",
                "newHeight":"200"
            }, options);

    ... 
```

this works.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:50:59.900

Try ths,

```
var settings = {};
var settings = $.extend(settings, {
    "oldHeight":"80",
    "newHeight":"200"
}, options); 
```

Your function needs to accept the `options` not the `callback` (if there is no callback being used).

So your code will be,

```
(function($) {
$.fn.bad = function(options) {
    var settings = {};
    var settings = $.extend(settings, {
        "oldHeight":"80",
        "newHeight":"200"
    }, options);
    ... 
```

[Test](http://jsfiddle.net/cGSNn/4/)

# symfony-1.4 - Symfony 1.4 任务：包括来自 apps/frontend/lib 的所有库文件夹

> ID：15109945
> 
> 赞同：1
> 
> 时间：2013-02-27T10:39:27.087
> 
> 标签：symfony-1.4

我生成了一个任务`php symfony generate:task myTask`。

生成的文件`myTaskTask.class.php`位于`app/lib`Symfony 应用程序的文件夹中。

**在这个类中，我想使用位于`apps/frontend/lib`.**

我该怎么办？

我一直在寻找解决方案，但我没有解决问题。我尝试使用`autoload.yml`文件，但它不起作用，并且`require_once`为每个文件做一个不是一个好的解决方案，因为有太多的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:31:19.537

至少有2个解决方案可以解决这个问题：

*   运行任务`--application=frontend`：

    ```
    php symfony project:myTask --application=frontend 
    ```

*   `execute`或在任务函数的开头添加这一行：

    ```
    $conf = sfApplicationConfiguration::getApplicationConfiguration('frontend', 'prod', true); 
    ```

使用这些解决方案，`frontend`应用程序中的所有内容都可以从任务的类中获得。

# javascript - Highcharts：如何将 setData 与通过 ajax 获得的字符串一起使用？

> ID：15109946
> 
> 赞同：0
> 
> 时间：2013-02-27T10:39:27.230
> 
> 标签：javascript, highcharts

我想使用 ajax 更新我的图表，但是 setData 方法需要一个数组，而我只有一个字符串，所以它不起作用。

这是我的代码

```
$(".chooseService a").click(function() {
                            $("span.currentService").html($(this).html());
                            $.get('http://localhost:8080/dashboard/ws/charge/repartition/jour/'+$(this).html(), 
                                function(data) {
                                    // setData (Array<Mixed> data, [Boolean redraw])
                                    chartDay.series[0].setData(data);
                            });
                        }); 
```

数据是一个格式化的字符串，如

```
 [[1356995280000,183.0],[1356995520000,573.0],[1356995760000,243.0]] 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:47:56.923

您可以将 JSON 字符串解析为变量数据。

> 数据 = JSON.parse(数据);

如果您在使用 JSON 方法时遇到问题：http: [//caniuse.com/json](http://caniuse.com/json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:50:24.023

当您从服务器端返回结果时，您可以将内容格式化为 JSON 类型

```
header ('Content-type: text / json');
header ('Content-type: application / json'); 
```

然后，您可以将此结果转换为正确评估它来自客户端的 javascript。

```
jQuery.parseJSON (this.responseString); 
```

如果你想要这样的数组可以使用[这个参考](https://stackoverflow.com/questions/9740775/php-return-array-into-javascript)

# java - 在速度模板中将字符串解析为浮点数

> ID：15109948
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:39:33.857
> 
> 标签：java, velocity

如何将字符串转换为浮动并在速度模板中进行加法操作。

我试过下面的东西，但没有用。

$浮动 = 0.0

$stringValue = "5.5"

$sum = 0.0

$sum = $sum + $Float.parseFloat($stringValue)。

上面的东西甚至没有工作，“$Float.parseFloat($stringValue)”没有被评估。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:58:29.160

刚刚找到答案。

$textutils.parseFloat("5.5") 可以将其转换为浮点数。

另外，其他方式，在类文件中，Float f=5.6f; 速度模板.put("floatVar",f); //将浮点变量传递给速度模板

在模板中， $f.parseFloat("5.5") 将起作用。

谢谢你。

# c++ - 用于数据传输的标准字节通信协议

> ID：15109950
> 
> 赞同：1
> 
> 时间：2013-02-27T10:39:35.053
> 
> 标签：c++, qt, tcp, protocols, network-protocols

我有两个程序通过 TCP/IP 通过交换命令和数据相互通信（连接已经成功）。我正在寻找一种协议，通过它我可以交换命令（ASCII）和二进制数据（float、double、int、char、wchar_t 等......）。

有没有我可以使用的标准？还是我应该发明自己的交换协议？

该程序是用 C++ 和 Qt 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:07:59.877

如果您使用的是 Qt，[这](http://doc.qt.digia.com/4.7/datastreamformat.html)可能会有所帮助。

通常，您应该选择逐字节格式，然后在套接字的每一侧进行序列化和反序列化。否则，您最终会遇到操作系统（通常是 32 位与 64 位系统）之间字节顺序或大小不同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:00:47.217

我建议使用 header+data 来描述这类消息。在标头中，您可以拥有例如消息类型字段，并且根据其值您可以转换数据的内容。我认为实现起来并不复杂。当你有这个时，你可以通过任何你想要的交换这样的结构（例如 QDataStream）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:07:02.457

如果您使用的是 Qt，请查看`QDataStream` [http://doc.qt.io/qt-4.8/qdatastream.html](http://doc.qt.io/qt-4.8/qdatastream.html)

示例：[http ://doc.qt.io/qt-4.8/qt4-network.html](http://doc.qt.io/qt-4.8/qt4-network.html)

# django - Django：消息未收到

> ID：15109952
> 
> 赞同：1
> 
> 时间：2013-02-27T10:39:38.137
> 
> 标签：django

我正在使用[Django Postman](https://bitbucket.org/psam/django-postman/src) 进行我的 django 网站的两个用户之间的互通。

但是当我向另一个用户发送消息时。它不会传递给接收者。

我将我显示为已发送的消息。在`http://127.0.0.1:8000/messages/sent`

这里是`settings.py`设置

```
#############################   Django postman 

POSTMAN_AUTO_MODERATE_AS = True
POSTMAN_SHOW_USER_AS = True
POSTMAN_NOTIFIER_APP = True
################################### 
```

一旦发送消息，它就会正确存储在 Dtabase 中，但不会出现在收件人收件箱中。

请告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T16:16:11.763

我遇到了看似相同的问题，就我而言，原因是默认审核。

**为了更好地诊断是否是这种情况**，您可以：

*   检查数据库中的“不可见”消息，例如使用 phpmyadmin。如果有 'p' 作为 m moderation_status 或在 moderation_... 列下有任何可疑之处，则此曲目可能不错；
*   深入代码：找到 postman/models.py 并尝试使用 MessageManager 类，方法收件箱（因为其他消息目录都可以，所以这个很可疑）。任何过滤器都可能导致您的问题 - 对我来说，这显然是“moderation_status”。即使您的情况不同，这也是进一步调试的良好起点。

**用例：让我们假设审核问题**

我看到你有

```
POSTMAN_AUTO_MODERATE_AS = True 
```

设置，但也许您在某处留下了审核功能，或者您的配置中的某些内容被覆盖了？Postman 的快速入门指南表明两者都是必要的：

> 要禁用审核功能（无控制，无过滤器）：
> 
> > *   将此选项设置为 True
> > *   不提供任何自动调节功能

我建议从您的 settings.py 中删除所有其他邮递员特定选项，只留下 POSTMAN_AUTO_MODERATE_AS = True 并检查是否有任何实用程序函数可能会干扰 Message 对象。

如需进一步参考，有关审核的更多信息在这里：[https ://bitbucket.org/psam/django-postman/wiki/Moderation](https://bitbucket.org/psam/django-postman/wiki/Moderation)

# c# - windows phone 8 如何访问或打开主题和节电设置？

> ID：15109954
> 
> 赞同：1
> 
> 时间：2013-02-27T10:39:39.330
> 
> 标签：c#, windows-phone-8, windows-phone

嗨，我已经看到了在设备中打开 windows phone 设置的[Uri 方案。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937%28v=vs.105%29.aspx)

windows phone 中还有许多其他设置，例如，

省电，

主题，

亮度，

互联网共享等。

如何提供在 windows phone 8 中打开这些设置的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:36:01.850

没有提供从应用程序内启动这些设置的内置方式。

我希望这是由于对这些功能的例外使用。

我希望电池保护程序设置很少更改。打开“电池电量低”一次，然后永远忘记该设置。

即使用户在应用程序正在使用时更改了他们的主题，这些更改也不会在应用程序重新启动之前应用。因此，更改主题然后退出设置页面将使应用程序仍显示旧的主题设置。对于使用电话的人来说，这可能会非常误导用户是否进行了更改。我也希望人们不要经常改变他们的主题。

为什么包含或不包含功能纯粹是推测性的，但这一切都归结为优先事项。如果他们等到添加每个功能，它就永远不会发货。
并且在相关说明中，微软不会谈论未发布的功能和未来版本，因此无法知道这些是否会在未来的更新中出现。

# ruby - method_name(*) 是什么意思？

> ID：15109955
> 
> 赞同：3
> 
> 时间：2013-02-27T10:39:41.627
> 
> 标签：ruby, ruby-on-rails-3

在rails[代码](https://github.com/rails/rails/blob/master/railties/lib/rails/application/configuration.rb)中，我遇到了以下方法定义`def initialize(*)`

我明白是什么`def foo(*a)`意思，但无法弄清楚在 . 之后省略标识符名称的意义`*`。您如何访问传递给此方法的任何参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:50:17.030

这是我的猜测。

它的工作原理是因为第二行：

```
def initialize(*)
  super
  ...
end 
```

所以该方法接收任意数量的参数并将它们全部传递给`super`（如您所知，`super`没有参数意味着从原始方法中获取所有参数）。

然后在这种情况下，不需要参数的名称。

# ios - 了解 convertPoint:toView:

> ID：15109958
> 
> 赞同：46
> 
> 时间：2013-02-27T10:39:45.570
> 
> 标签：ios, cocoa-touch, uiview, geometry

我不太明白这个方法`convertPoint:toView:`。

在 Apple 的文档中写道

> `convertPoint:toView:`
> 
> 将接收器坐标系中的点转换为指定视图的坐标系。
> 
> ```
> - (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view 
> ```

但是将一个点从一个点转换到另一个点实际上意味着什么？

这是否意味着两个边界中的点具有**不同的单位**？还是只是价值观不同？

如果是后者，为什么我们可以简单地将 a's 的值赋给`contentOffset`b's 呢？

```
CGPoint a = [a contentOffset];
[b setContentOffset:a]; 
```

`convertPoint:toView:`与简单地分配有什么不同`contentOffset`？还是我误解了整个概念？**转换点**实际上有什么作用？什么时候应该使用这种方法？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-02-27T14:31:30.940

每个 UIView 都有自己的坐标系。因此，如果您有一个包含另一个 UIView_2 的 UIView_1，它们内部都有一个点 (10,10)。

convertPoint:toView：允许开发人员在一个视图中取一个点并将该点转换为另一个视图坐标系。

示例：view1 包含 view2。view2 的左上角位于 view1 点 (10,10)，或者说 view2.frame.orgin = {10,10} 更好。{10,10} 基于 view1 坐标系。到目前为止，一切都很好。

用户在 view2 内的点 {20,20} 处触摸 view2。现在这些坐标在 view2 坐标系中。您现在可以使用covertPoint:toView: 将{20,20} 转换为view1 的坐标系。接触点 = {20,20}

```
CGPoint pointInView1Coords = [view2 convertPoint:touchPoint toView:view1]; 
```

所以现在 pointInView1Coords 在 vi​​ew1 坐标系中应该是 {30,30}。现在这只是这个例子的简单数学，但是有各种各样的东西有助于转换。我想到了变换和缩放。

阅读有关 UIView 框架、边界和中心的信息。它们都是相关的，它们处理视图的坐标系。在您开始与他们一起做事之前，它会令人困惑。记住这个框架和中心在父坐标系中。边界在视图的坐标系中。

约翰

# c# - 在 C# 中从手持扫描仪或条形码阅读器中读取数字

> ID：15109959
> 
> 赞同：0
> 
> 时间：2013-02-27T10:39:48.900
> 
> 标签：c#, .net, barcode, barcode-scanner

任何在相关事情上做过一些工作的人都可以告诉我如何实现这一目标吗？

我想要实现的是从扫描仪读取数字（打印在我的盒子上）并将该数字放入数据库中。这些数字可以是产品 ID。我需要知道的

*   从哪里开始
*   我可以为此选择什么类型的手持扫描仪
*   我也可以通过 c# 读取这些数字以及哪些类支持这个吗？
*   有可用的教程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:54:03.640

正如这里广泛解释的那样：[https](https://stackoverflow.com/questions/613881/how-to-read-a-value-from-a-barcode-reader) ://stackoverflow.com/questions/613881/how-to-read-a-value-from-a-barcode-reader条形码阅读器/扫描仪（并行、串行或 USB 连接）通常是被视为计算机的键盘，这发生在设备驱动程序级别，您在 C# 代码中与此无关。

事实上，您还应该支持手动输入代码（字母数字），就像超市收银员在您拿走（通过扫描仪）无法读取条形码的商品时所做的那样。

在您的 C# 应用程序中有一个文本框，用户可以在其中使用键盘键入代码，当焦点位于该文本框上并且用户使用阅读器扫描代码时，您不会注意到来自普通键盘的输入或来自普通键盘的输入之间的任何区别阅读器...没有区别，除了在某些情况下，条形码阅读器还将在代码末尾包含一个 CR ( ENTER )，您可以使用它来启动您的下一个操作，例如数据库操作等。

我认为您实际上可以配置是否希望在每次读取后将 CR 发送给您，在设备的驱动程序设置中的某处，它可能取决于特定设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:57:20.020

我所知道的是大多数新的扫描仪都带有不同编程语言的库或 SDK，所以在购买之前询问一个带有支持库的扫描仪，如果它没有附带一个，我认为你可以在 Windows 窗体中使用 SerialPort 组件。此示例可能会帮助您[在 C Sharp 中使用条形码阅读器](http://code.msdn.microsoft.com/windowsdesktop/Using-Barcode-Reader-In-C-e5172a25)

# php - 如何自动提取文本并添加链接

> ID：15109961
> 
> 赞同：0
> 
> 时间：2013-02-27T10:39:55.713
> 
> 标签：php, javascript, extract

我有一个网站，我想做这个功能，当加载帖子时，我想提取一些单词并自动添加链接。

例如：如果我通过 mydomain.com/my-post 访问帖子并且其内容中有单词：“MyWord”，我想提取该单词并将其替换为 MyWord 之类的链接。

我怎样才能通过使用 js 或 php 来做到这一点？

谢谢 ！

# ios - iOS Round Double 值到 2 个小数位并向上舍入第 3 个小数位

> ID：15109963
> 
> 赞同：2
> 
> 时间：2013-02-27T10:40:00.610
> 
> 标签：ios, double, rounding

我有我这样的双重价值`17.125`。它应该四舍五入到`17.13`

如果我使用`%.2f`它向我展示的简单方法，`17.12` 我还遵循其他线程中描述的几种方法，例如 using`NumberFormatter`等等 - 但没有运气。

也许有人建议我解决这个问题？我必须自己圆它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T12:26:43.083

试试这个：

```
float number=17.125;
NSNumberFormatter *format = [[NSNumberFormatter alloc]init];
[format setNumberStyle:NSNumberFormatterDecimalStyle];
[format setRoundingMode:NSNumberFormatterRoundHalfUp];
[format setMaximumFractionDigits:2];
NSString *temp = [format stringFromNumber:[NSNumber numberWithFloat:number]];
NSLog(@"%@",temp); 
```

# ios - 如果 UITableViewCell 包含 cgrect，则以编程方式选择它

> ID：15109965
> 
> 赞同：0
> 
> 时间：2013-02-27T10:40:08.083
> 
> 标签：ios, uitableview

我有一个 UITableView。我在 tableview 旁边有一个像箭头一样的图像。

我必须检查箭头是否与特定单元格相交，以便我可以以编程方式选择该单元格。我该怎么做呢？

**我在单元格/行的选择类型方面没有问题，但在检测箭头是否在特定行上时遇到问题。**

我已经写了这段代码但没有工作：

```
NSArray *paths = [tableView indexPathsForVisibleRows];

for (NSIndexPath *path in paths)
{
    CGRect myRect = [tableView rectForRowAtIndexPath:indexPath];
    CGRect myRect1 = CGRectMake(-12, 234, 55, 52);

    if (CGRectIntersectsRect(myRect1, myRect))
    {
        // Also tried [tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:UITableViewScrollPositionNone];
        cell.selected = YES;
        NSLog(@"\n \n \n myrect = %@ myrect1 = %@ , index = %@ \n \n ", NSStringFromCGRect(myRect),NSStringFromCGRect(myRect1), indexPath);
    }
    else
    {
        cell.selected = NO;
    }
} 
```

图像显示了我想要实现的目标，而不是现有的目标。

![在此处输入图像描述](../Images/86b065b4ba1065417d79b2cc285346a0.png)![在此处输入图像描述](../Images/1f3c92f503b21ad8649fb017c8790764.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:14:51.247

好的...对于箭头的问题...我认为表格正在将每一行的矩形返回到表格的框架中。所以我认为你需要这样做：

```
for (NSIndexPath *path in paths) 
{

    CGRect myRect = [tableView rectForRowAtIndexPath:indexPath];
    CGRect myRect1 = CGRectMake(-12, 234, 55, 52);

    myRect.origin.x += tableView.frame.origin.x;
    myRect.origin.y += tableView.frame.origin.y;

    if (CGRectIntersectsRect(myRect1, myRect)) 
    {
        //selection code here
    }
    else
    {
        // whatever you want
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:23:36.130

我找到了答案.. 发布代码

```
- (void)scrollViewDidScroll:(UIScrollView *)aScrollView 
{

      NSArray *paths = [tableView indexPathsForVisibleRows];

      for (NSIndexPath *indexPath in paths) 
      {

          CGRect myRect = [tableView convertRect:[tableView rectForRowAtIndexPath:indexPath] toView:[tableView superview]];
          CGRect myRect1 = CGRectMake(-12, 236, 20, 30);

          if (CGRectIntersectsRect(myRect1, myRect) && notSelected == FALSE) 
          {

               notSelected = TRUE;
              [tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];

           }
           else
           {

                notSelected = FALSE;
                [tableView deselectRowAtIndexPath:indexPath animated:NO];
            }
      }
} 
```

# titanium - 相机打开时上一张图像的缩略图而不是取消按钮

> ID：15109971
> 
> 赞同：1
> 
> 时间：2013-02-27T10:40:28.010
> 
> 标签：titanium, titanium-mobile

我想在相机运行时显示相机拍摄的前一张图像的缩略图，而不是取消按钮...

那可能吗 ？？需要帮忙 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:53:47.567

是的。只需捕获最后一张图像，将其保存在内存中（或将其保存到磁盘），然后将其用作控件之一。我们可以使用函数的`overlay`属性来做到这一点。`Titanium.Media.showCamera`这是一个简单的例子：

首先我们需要一个覆盖视图来显示图像。var overlayView = Ti.UI.createView(); var imageView = Ti.UI.createImageView({ width:44, height:44, left : 5 });

```
overlayView.add(imageView); 
```

现在这是我们使用覆盖视图打开相机的功能。请注意，我们没有控件，因此您需要添加这些控件（用于关闭等）。我们现在要做的就是设置叠加图像。

```
Titanium.Media.showCamera({
    success:function(event) {
        // called when media returned from the camera
            imageView.image = event.media;
    },
    cancel:function() {},
    error:function(error) {},
    saveToPhotoGallery:true,
    allowEditing:true,
    mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO],
    overlay : overlayView,
    showControls: false // This is important!
}); 
```

要真正完成这项工作，您可能需要将其保存`event.media`在全局变量中，或使用类似的技术确保`overlayView` 不会被清空/垃圾收集。

这也是一个准系统解决方案，不是很健壮，但这是我会使用的基本方法！

# android - 如何获取 NDEF 消息中的记录总数？

> ID：15109977
> 
> 赞同：0
> 
> 时间：2013-02-27T10:40:44.043
> 
> 标签：android, nfc, ndef

我写了一个应用程序来读取和写入 NFC 标签上的 ndef 消息。我的应用程序可以在 NDEF 消息中读取和写入两条 NDEF 记录。但是，当我在 NDEF 消息中展示一个只有一个 NDEF 记录的标签时，应用程序就崩溃了。我知道这背后的原因。而且我也知道如何解决它，但要解决它我需要知道如何获取 NDEF 消息中的记录数？

```
 NdefMessage[] msgs = getNdefMessagesFromIntent(intent);
        NdefRecord ndefRecord1 = msgs[0].getRecords()[0];
        NdefRecord ndefRecord2 = msgs[0].getRecords()[1]; //problem is here
        byte[] payload1 = ndefRecord1.getPayload();
        byte[] payload2 = ndefRecord2.getPayload();
        //Get the text encoding
        String textEncoding1 = ((payload1[0] & 0200) == 0) ? "UTF-8" : "UTF-16";
        String textEncoding2 = ((payload2[0] & 0200) == 0) ? "UTF-8" : "UTF-16";
        //Get the Language Code
        int languageCodeLength1 = payload1[0] & 0077;
        int languageCodeLength2 = payload2[0] & 0077;
        String text1 = null;
        String text2 = null;
        //Get the Text
        try 
        {
            text1 = new String(payload1, languageCodeLength1 + 1, payload1.length - languageCodeLength1 - 1, textEncoding1);
        } 
        catch (UnsupportedEncodingException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //Get the Text
        try 
        {
            text2 = new String(payload2, languageCodeLength2 + 1, payload2.length - languageCodeLength2 - 1, textEncoding2);
        } 
        catch (UnsupportedEncodingException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String payloadString1 = new String(text1);
        String payloadString2 = new String(text2);

        record1.setText(payloadString1);
        record2.setText(payloadString2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:15:16.677

经过实验，我自己找到了解决这个问题的方法。希望它也能帮助其他人......

```
 NdefMessage[] msgs = getNdefMessagesFromIntent(intent);
        NdefRecord[] ndefRecords = msgs[0].getRecords();
        int totalRecords = ndefRecords.length;
        if(totalRecords == 2)
        {
            NdefRecord ndefRecord1 = msgs[0].getRecords()[0];
            NdefRecord ndefRecord2 = msgs[0].getRecords()[1];
            byte[] payload1 = ndefRecord1.getPayload();
            byte[] payload2 = ndefRecord2.getPayload();
            //Get the text encoding
            String textEncoding1 = ((payload1[0] & 0200) == 0) ? "UTF-8" : "UTF-16";
            String textEncoding2 = ((payload2[0] & 0200) == 0) ? "UTF-8" : "UTF-16";
            //Get the Language Code
            int languageCodeLength1 = payload1[0] & 0077;
            int languageCodeLength2 = payload2[0] & 0077;
            String text1 = null;
            String text2 = null;
            //Get the Text
            try 
            {
                text1 = new String(payload1, languageCodeLength1 + 1, payload1.length - languageCodeLength1 - 1, textEncoding1);
            }    
            catch (UnsupportedEncodingException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //Get the Text
            try 
            {
                text2 = new String(payload2, languageCodeLength2 + 1, payload2.length - languageCodeLength2 - 1, textEncoding2);
            } 
            catch (UnsupportedEncodingException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            String payloadString1 = new String(text1);
            String payloadString2 = new String(text2);

            record1.setText(payloadString1);
            record2.setText(payloadString2);
        }
        else
        {
            NdefRecord ndefRecord1 = msgs[0].getRecords()[0];
            byte[] payload1 = ndefRecord1.getPayload();
            String textEncoding1 = ((payload1[0] & 0200) == 0) ? "UTF-8" : "UTF-16";
            int languageCodeLength1 = payload1[0] & 0077;
            String text1 = null;
            try 
            {
                text1 = new String(payload1, languageCodeLength1 + 1, payload1.length - languageCodeLength1 - 1, textEncoding1);
            }    
            catch (UnsupportedEncodingException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            String payloadString1 = new String(text1);
            record1.setText(payloadString1);
            record2.setText("");
        } 
```

# iphone - Twitters iPhone NavBar 徽标

> ID：15109979
> 
> 赞同：0
> 
> 时间：2013-02-27T10:40:46.027
> 
> 标签：iphone, twitter, uinavigationbar

这更像是一个设计问题，但有人知道他们是如何让 UINavigationBar 中的徽标在原生 iPhone 应用程序中看起来那么好的吗？

![推特](../Images/2775cdd8f2f29ac372809e05f1ff2ca8.png)

有人知道教程吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:47:00.810

UIViewController 的-navigationItem 属性本身有一个名为-titleView 的属性。

将当前显示的 UIViewController 的 navigationItem 的 titleView 属性设置为像 Twitter 所做的浮雕、半透明图标，然后你就设置好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:20:21.723

您将加载一个图像，然后将其放在导航控制器内的视图控制器上的 navigationItem.titleView 属性中。

```
UIImage *image = [UIImage imageNamed: @"header_logo.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
viewController.navigationItem.titleView = imageView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T01:37:19.543

基本上两个答案都是正确的。

我只是输入我使用过的代码。我比@stevenhepting 的代码更喜欢它 :)

只需将此代码放入`viewDidLoad:`方法中

```
self.navigationItem.titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourPicture"]]; 
```

图像的完美尺寸（在我看来）是 80x40 像素（宽度 = 80 / 高度 = 40）。

# android - 如何构建自定义对话框“按钮区域”

> ID：15109980
> 
> 赞同：0
> 
> 时间：2013-02-27T10:40:59.303
> 
> 标签：android, view, dialog, customization, android-alertdialog

我正在尝试让自定义对话框工作。它应该没有标题、基本的 TextMessage 和我的自定义布局，通常会出现按钮。我尝试使用 AlertDialog.Builder、扩展 Dialog、调用 Dialog 上的方法来完成此操作，但仍然没有得到预期的结果。

这是布局，我喜欢用作自定义 ButtonArea (layout/dialog_footer)：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <CheckBox
        android:id="@+id/dialog_checkbox"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/never_show_again"
        android:textColor="@color/black"
        android:visibility="gone"
        android:background="@color/dialog_button_background"/>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/dialog_checkbox"
        android:layout_alignWithParentIfMissing="true"
        android:orientation="horizontal"
        android:background="@color/dialog_button_background"
        android:paddingBottom="-10dip">

        <Button
            android:id="@+id/dialog_btn_positive"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".5"
            android:text="@string/ok"
            android:gravity="center"
            android:visibility="gone"
            />

        <Button
            android:id="@+id/dialog_btn_negative"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".5"
            android:text="@string/btn_cancel" 
            android:visibility="gone" />
    </LinearLayout>

</RelativeLayout> 
```

最简单的尝试是这样的：

```
AlertDialog.Buiilder builder = new AlertDialog.Builder(context);
builder.setMessage("my Message");
Dialog dialog = builder.create();

//builder has `setView for Message or setCustomTitle, but no setCustomFooter
LayoutInflater inflater = LayoutInflater.from(context);
View footer = inflater.inflate(R.layout.dialog_footer);

//either NullPointer Exception
dialog.addContentView(footer, footer.getLayoutParams);
//or AndroidRuntimeException (requestFeature() must be called befoire adding content)
dialog.addContentView(footer, new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)); 
```

如果我尝试通过在布局顶部放置 TextView 来模拟“MessageArea”，它可以工作，但底部有非常难看的黑色边框（我猜它是自定义对话框主题）。

保持系统对话框的“外观和感觉”的最佳方法是什么，但用我自己的视图替换按钮并自己处理任何事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:48:03.490

朋友您好，请查看此帖子，它可能对您的问题有所帮助

[Android - 自定义 AlertDialog 背景颜色](https://stackoverflow.com/questions/3995058/android-custom-alertdialog-background-color)

在这里，我为我的应用程序构建了自己的自定义编辑对话框，请参阅布局代码

```
 <?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TableRow>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:text="Name: "
        android:textColor="#fff" />

    <EditText
        android:id="@+id/txtDelName"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp" />
</TableRow>

<TableRow>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:text="Contact No :"
        android:textColor="#fff" />

    <EditText
        android:id="@+id/txtDelAge"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:ems="10" >

        <requestFocus />
    </EditText>
</TableRow>

<TableRow android:layout_height="wrap_content" >

    <Spinner
        android:id="@+id/spinDiagDept"
        android:layout_width="150dp"
        android:layout_height="50dp"
        android:layout_marginLeft="5dp"
        android:layout_span="2"
        android:prompt="@string/Rel_prompt"
        android:visibility="visible" />
</TableRow>

</TableLayout> 
```

这是警报对话框代码

```
 public class Alerts {

    public static AlertDialog ShowEditDialog(final Context con,final Emergencydb emp)
    {
AlertDialog.Builder b=new AlertDialog.Builder(con);
b.setTitle("Emergency Contact Details");
LayoutInflater li=LayoutInflater.from(con);
View v=li.inflate(R.layout.editdialog, null);

b.setIcon(android.R.drawable.ic_input_get);

b.setView(v);
final TextView txtName=(TextView)v.findViewById(R.id.txtDelName);
final TextView txtAge=(TextView)v.findViewById(R.id.txtDelAge);
final Spinner spin=(Spinner)v.findViewById(R.id.spinDiagDept);
Utilities.ManageDeptSpinner(con, spin);
for(int i=0;i<spin.getCount();i++)
{
    long id=spin.getItemIdAtPosition(i);
    if(id==emp.getDept())
    {
        spin.setSelection(i, true);
        break;
    }
}

txtName.setText(emp.getName());
txtAge.setText(String.valueOf(emp.getAge()));

b.setPositiveButton("Modify", new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        emp.setName(txtName.getText().toString());
        emp.setAge(String.valueOf(txtAge.getText().toString()));                                    emp.setDept((int)spin.getItemIdAtPosition(spin.getSelectedItemPosition()));

        try
        {
        @SuppressWarnings("rawtypes")
        DatabaseHelper db=new DatabaseHelper(con);
        db.UpdateEmp(emp);
        Toast.makeText(getBaseContext(), "Modified Successfully",                       Toast.LENGTH_SHORT).show();
        }
        catch(Exception ex)
        {

        }
    }       
});

b.setNeutralButton("Delete", new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        @SuppressWarnings("rawtypes")
        DatabaseHelper db=new DatabaseHelper(con);
        db.DeleteEmp(emp);

    }
});
b.setNegativeButton("Cancel", null);

return b.create();
//diag.show();

     }

    protected static Context getBaseContext() {
// TODO Auto-generated method stub
return null;
      }

        public static void ShowEmpAddedAlert(
    android.view.View.OnClickListener onClickListener) {
// TODO Auto-generated method stub

  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:46:57.260

在 Aleks GI 的帮助下，它成功了：

代码流程是这样的：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setMessage("MyMessage");

LayoutInflater inflater = LayoutInflater.from(context);
View footerView = inflater.inflate(R.layout.apo_plus_dialog_footer, null);

AlertDialog alertDialog = builder.create();
alertDialog.setView(footerView, 0,0,0,0);

if (!hasTitle){
    alertDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
}

alertDialog.show(); 
```

以防万一有人想要和我有类似的 Dialog 行为。

# c - gcc 输出的目标文件可以在具有相同选项的相同源的编译之间有所不同吗？

> ID：15109985
> 
> 赞同：6
> 
> 时间：2013-02-27T10:41:13.590
> 
> 标签：c, gcc, code-generation

目标文件（C 语言）的 gcc 输出是否因编译而异？没有特定时间的信息，编译选项或源代码没有变化。链接库，环境变量也没有变化。这是一个 VxWorks MIPS64 交叉编译器，如果有帮助的话。我个人认为不应该改变。但我观察到，有时指令会随机产生变化。我不知道是什么原因。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:22:52.000

这是如何建造的？例如，如果我构建了相同的 Linux 内核，它包含一个计数器，每次构建都会递增。GCC 可以选择使用分析器信息来指导代码生成，如果分析信息发生变化，代码也会发生变化。

你分析了什么？生成的程序集、目标文件的 objdump 还是可执行文件？你是如何比较不同版本的？您*确定*您查看的是可执行代码，而不是编译器/汇编器/链接器时间戳吗？

环境有什么变化吗？新库（和头文件/声明/宏定义！）？新的编译器，链接器？新内核（是的，一些头文件源自内核源并随它一起提供）？

环境变量的任何变化（另一个用户进行编译，不同的机器，不同的网络连接提供不同的 IP 地址，使其进入构建）？

我会尝试详细跟踪构建过程（运行构建并在文件中捕获输出，然后再次这样做；比较这些）。

完全迷惑了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T19:34:19.683

我对 g++ 也有类似的问题。4.3 之前的版本每次都生成完全相同的目标文件。对于 4.3（及更高版本？），每次运行时，一些损坏的符号名称都不同 - 即使没有 -g 或其他记录。也许使用时间戳或随机数（我希望不是）。显然，其中一些符号进入 .o 符号表，您会有所不同。剥离目标文件使它们再次相等（wrt。二进制比较）。g++ -c 文件.C ; 剥离文件.o; cmp 文件.o origfile.o

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:42:58.050

为什么要有所不同？总是相同的结果。尝试这个：

```
for i in `seq 1000`; do gcc 1.c; md5sum a.out; done | sort | uniq | wc -l 
```

答案总是`1`。更换`1.c`并`a.out`满足您的需求。

`gcc`上面计算了在多次编译相同源时生成了多少不同的可执行文件`1000`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T01:18:27.470

我发现至少在某些环境中，如果后续构建的源代码树位于不同的目录中，则相同的源代码可能会产生不同的可执行文件。例子：

将项目的原始副本签出到 dir1。从头开始完全重建。

然后，在同一台机器上使用同一用户，将源代码的完全相同的副本检出到 dir2 (dir1 != dir2)。从头开始进行另一次完全重建。

这些构建相隔几分钟，工具链或任何第 3 方库或代码都没有变化。源代码的二进制比较是一样的。但是，dir1 中的可执行文件与 dir2 中的可执行文件具有不同的 md5sum。

如果我在 BeyondCompare 的十六进制编辑器中比较不同的可执行文件，差异不仅仅是可能是时间戳的一小部分。

如果我在 dir1 中构建，我*会*得到相同的可执行文件，然后在 dir1 中再次重建。如果我从 dir2 一遍又一遍地构建相同的源代码，也是一样的。

我唯一的猜测是包含层次结构的某种绝对路径嵌入在可执行文件中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-02T08:07:24.133

我的 gcc 有时会为完全相同的输入生成不同的代码。输出目标文件恰好有一个字节不同。

有时这会导致链接器错误，因为一个可能的目标文件无效。重新编译另一个版本通常会修复链接器错误。

Suse Linux Enterprise 上的 gcc 版本为 4.3.4。gcc 参数为：

```
cc -std=c++0x -Wall -fno-builtin -march=native -g -I<path1> -I<path2> -I<path3> -o obj/file.o -c file.cpp 
```

如果有人遇到相同的效果，请告诉我。

# mysql - MySQL 仅替换文本字段/列中的第一次出现

> ID：15109987
> 
> 赞同：0
> 
> 时间：2013-02-27T10:41:15.620
> 
> 标签：mysql, replace

我写了一个函数来替换 MySQL Text 列中的第一次出现，但这有点复杂......

```
UPDATE
  table_name
SET
  column=CONCAT(
           LEFT(column,LOCATE('some string', column)-1),
           CONCAT(substring(column, LOCATE('some string', column) + $length),
           'new string')) 
```

`$length`我们要替换的字符串长度在哪里。如果我们使用 php 它是`strlen()`函数，但在 MySQL 中它将是`CHAR_LENGTH()`函数。

您知道仅替换文本列中的第一个匹配项的更好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:03:35.433

您可以使用[TRIM](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)：

```
UPDATE table_name SET column = TRIM(LEADING 'some string' FROM column); 
```

假设“某些字符串”在“列”内容的开头连续出现不超过 1 次。

因此，如果列包含以下内容，它将起作用：

```
"some string foo some string" 
```

但不适用于：

```
"some string some string foo some string" 
```

**编辑 - 添加 MySQL 功能以简化流程**

我看不到您正在使用的机制的替代方案，但可以通过在 MySQL 中创建一个函数来简化执行它（如果您有特权）：

```
delimiter $$

create function replace_first(
   p_text_to_search varchar(255),
   p_text_to_replace varchar(255)
)
returns varchar(255)
begin
   declare v_found_pos int(11);
   declare v_found_len int(11);
   declare v_text_with_replacement varchar(255);

   select locate(p_text_to_replace, p_text_to_search)
   into   v_found_pos;

   select char_length(p_text_to_replace)
   into   v_found_len;

   select concat(
            left(p_text_to_search, v_found_pos-1),
            mid(p_text_to_search, (v_found_pos + v_found_len))
          )
   into   v_text_with_replacement;

   return v_text_with_replacement;
end$$

delimiter ; 
```

那么您可以使用以下方法调用它：

```
select replace_first('bar foo foo baz foo', 'foo'); 
```

结果：

```
'bar  foo baz' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T18:34:25.753

我创建的函数可以替换任何文本索引：

```
/************** REPLACE_TEXT_OF_INDEX ***************/
DROP FUNCTION IF EXISTS REPLACE_TEXT_OF_INDEX;
DELIMITER $$
CREATE FUNCTION REPLACE_TEXT_OF_INDEX(_text  VARCHAR(3072), _subText VARCHAR(1024), _toReplaceText VARCHAR(1024), _index INT UNSIGNED)
RETURNS VARCHAR(3072)
BEGIN
    DECLARE _prefixText, _sufixText VARCHAR(3072);
    DECLARE _starIndex INT;
    DECLARE _loopIndex, _textIndex INT UNSIGNED DEFAULT 0;

    IF  _text IS NOT NULL AND LENGTH(_text) > 0 AND
        _subText IS NOT NULL AND LENGTH(_subText) > 0 AND
        _toReplaceText IS NOT NULL AND _index > 0 THEN

        WHILE _loopIndex < LENGTH(_text) AND _textIndex < _index DO
            SELECT LOCATE(_subText, _text, _loopIndex + 1) INTO _loopIndex;
            IF _loopIndex > 0 THEN
                SET _textIndex = _textIndex + 1;
            ELSE
                SET _loopIndex = LENGTH(_text) + 1;
            END IF;
        END WHILE;
        IF _textIndex = _index THEN    
            SELECT LOCATE(_subText, _text, _loopIndex) INTO _starIndex;
            SELECT SUBSTRING(_text, 1, _starIndex -1) INTO _prefixText;
            SELECT SUBSTRING(_text, _starIndex + LENGTH(_subText), LENGTH(_text)) INTO _sufixText;
            RETURN CONCAT(_prefixText, _toReplaceText, _sufixText);
        END IF;
    END IF;

    RETURN _text;
END;
$$
DELIMITER ;

SELECT REPLACE_TEXT_OF_INDEX('WORD1 WORD2 WORD3 WORD4 WORD5', 'WORD', '*',1); 
```

# php - Fusioncharts Xt - 多系列线二维图表

> ID：15109991
> 
> 赞同：1
> 
> 时间：2013-02-27T10:41:22.547
> 
> 标签：php, fusioncharts

我正在尝试创建此图 [http://www.fusioncharts.com/demos/gallery/#line-and-area](http://www.fusioncharts.com/demos/gallery/#line-and-area)

如果你看右边的行，那么第三行。（照片 9，共 14 张）。

这是我使用的代码：

```
$this->load->plugin( 'fusion' );  
        $FC =  FusionCharts("MSLine","620","400");  

         $strParam="palette=2;showvalues=1;numvdivlines=10;drawanchors=0;numberprefix=$;divlinealpha=30;alternatehgridalpha=20;
setadaptiveymin=1;";
           # Set chart attributes 
               $FC->setChartParams($strParam);
           # Add category names
           $FC->addCategory("2001");
           $FC->addCategory("2002");
           $FC->addCategory("2003");
           $FC->addCategory("2004");
           $FC->addCategory("2005");
           # Add category names
          # Add Multi-series  Dataset
           $FC->createMSStDataset();
           # Add Multi-series dataset with in dataset
           $FC->addMSStSubDataset("Product A", "");
            # Add set data for plotting the chart
           $FC->addChartData("30");
           $FC->addChartData("26");
           $FC->addChartData("29");
           $FC->addChartData("31");
           $FC->addChartData("34");
            $FC->createMSStDataset();
           # Add Multi-series dataset with in dataset
           $FC->addMSStSubDataset("Product B", "");
           # Add set data for plotting the chart
           $FC->addChartData("1");
           $FC->addChartData("6");
           $FC->addChartData("123");
           $FC->addChartData("4");
           $FC->addChartData("132");
                echo $FC->renderChart(); 
```

出于某种原因，我看不到 2 行，我只能看到 1 ：/我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:04:51.123

对于`MSLine`图表，您需要使用`addDataset`而不是`createMSStDataset`or `addMSStSubDataset`。

`MSStackedColumn2DLineDY`注意：$FC->createMSStDataset或$FC->addMSStSubDataset 用于`MSStackedColumn2D`图表。

因此，您的代码将是：

```
 $this->load->plugin( 'fusion' );  
       $FC =  FusionCharts("MSLine","620","400");  

       $strParam="palette=2;showvalues=1;numvdivlines=10;drawanchors=0;numberprefix=$;divlinealpha=30;alternatehgridalpha=20;setadaptiveymin=1;";

       # Set chart attributes 
       $FC->setChartParams($strParam);
       # Add category names
       $FC->addCategory("2001");
       $FC->addCategory("2002");
       $FC->addCategory("2003");
       $FC->addCategory("2004");
       $FC->addCategory("2005");
       $FC->addDataset("Product A", "");
        # Add set data for plotting the chart
       $FC->addChartData("30");
       $FC->addChartData("26");
       $FC->addChartData("29");
       $FC->addChartData("31");
       $FC->addChartData("34");

       $FC->addDataset("Product B", "");
       # Add set data for plotting the chart
       $FC->addChartData("1");
       $FC->addChartData("6");
       $FC->addChartData("123");
       $FC->addChartData("4");
       $FC->addChartData("132");
       echo $FC->renderChart(); 
```

参考：[http ://docs.fusioncharts.com/charts/?guide-for-web-developers/fusioncharts-php-class/MultiSeriesChart.html](http://docs.fusioncharts.com/charts/?guide-for-web-developers/fusioncharts-php-class/MultiSeriesChart.html)

# testing - Sencha Touch 工作流程

> ID：15109995
> 
> 赞同：1
> 
> 时间：2013-02-27T10:41:28.677
> 
> 标签：testing, sencha-touch-2

我已经开始使用 Sencha Touch 2.1.1。我想知道以下内容：

*   Sencha Touch 应用程序在开发过程中的最佳工作流程是什么？在 Chrome 中进行测试可能无法提供实际的移动视图。在开发期间如何在 Windows 上测试我的应用程序？

*   当我更改浏览器大小时，xtype 'label' 没有被调整大小。

*   每次我来到 Chrome 并刷新时都更改代码后，但加载应用程序需要几秒钟。有没有更快的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:48:41.857

1.  使用 WAMP 或我们的某些服务器托管您的应用程序，并在您的移动设备上打开它，前提是您使用的是相同的 WiFi。
2.  请附上屏幕截图
3.  它不是埃及魔法，它需要几秒钟的时间......

# jquery - 返回假；当鼠标在 x 秒内按住（单击）时

> ID：15109997
> 
> 赞同：1
> 
> 时间：2013-02-27T10:41:33.717
> 
> 标签：jquery, click, mousedown

我的代码是...

```
var timer;
var func = function () {
        $("body").append("1");
};

$(document).on('mousedown' , 'a' , function(e){
        timer = setTimeout(func, 1000);
}).on('mouseup mouseleave' , 'a' , function(e){
        clearTimeout(timer);
}); 
```

一切正常。但是当我将此功能设置为某个链接时`<a href="http://google.com">text</a>`

我需要设置`return false;`（不重定向到 url 或其他`onclick()`函数）

我可以在哪里`return false;`设置？还是另一种解决方案？

**PS：我的链接会在正常点击时正常工作**

**游乐场：http:** [//jsbin.com/iwilop/1/edit](http://jsbin.com/iwilop/1/edit)

* * *

[如何在 jQuery 中监听单击并按住？](https://stackoverflow.com/questions/4080497/jquery-detecting-click-and-hold)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:43:39.580

您需要添加一个`click`处理程序，如果您`func`被调用，请阻止单击的默认操作。在这里，我`timer`用作标志：

```
var timer = 0;
var func = function () {
  $("body").append("1");
  timer = 0;
};

$(document).on('mousedown' , 'a' , function(e){
  timer = setTimeout(func, 1000);
}).on('mouseup mouseleave' , 'a' , function(e){
  if (timer) {
    clearTimeout(timer);
  }
}).on('click', 'a', function() {
  if (!timer) {
    return false;
  }
}); 
```

[更新了 JSBin](http://jsbin.com/iwilop/9/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:45:52.277

您需要一个`click`处理程序（您实际上不需要调用 return false 除非还有其他处理程序也可以触发）：

```
$(document).on('mousedown' , 'a' , function(e){
        timer = setTimeout(func, 1000);
}).on('mouseup mouseleave' , 'a' , function(e){
        clearTimeout(timer);
}).on('click', 'a', function(e) {
        return false;
}); 
```

请记住，以上内容将影响页面上的所有链接 - 您可能需要使`a`选择器更具体（例如`a.blah`）。

**编辑：鉴于您修改后的问题，除了**[TJ Crowder 的回答](https://stackoverflow.com/a/15110051/17602)之外，我没有什么可提供的。我要说的唯一一件事就是注意全局变量——你可能想把整个事情包装在一个[立即调用的函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)或类似的东西中。