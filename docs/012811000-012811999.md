# StackOverflow 问答 12811000-12811999

# objective-c - SKStoreProductViewController 在 iPhone 应用程序内显示 iPad 商店视图（在 iPad 上运行时）

> ID：12811003
> 
> 赞同：0
> 
> 时间：2012-10-10T02:10:34.547
> 
> 标签：objective-c, ios, cocoa-touch, ios6, storekit

我们目前正在开发一个针对 iPhone 的应用程序（即还没有任何原生 iPad UI 并且不是通用的）。iOS 6 的一大特色是能够通过 SKStoreProductViewController 在应用程序内运行 iTunes 商店。但是，当在 iPad 上运行我们的应用程序时，iPad 仍然显示**iPad**商店，而不是**iPhone**商店。这会产生一系列可用性问题，因为较大的 iPad 商店假定它具有更大的区域来显示其实际拥有的内容（屏幕外按钮、以 20 像素高度滚动的列表等）。

是否有标志或任何方法可以解决此问题？我们最终计划开发原生 iPad UI，但我们的客户希望在第一阶段演示/发布 iPhone 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:05:00.673

您现在无法配置`SKStoreProductViewController`UI。SDK 没有提供任何自定义设置，尽管我们都需要它。

# objective-c - 如何从情节提要中的 viewController 创建一个 Outlet 或引用到我们的控制器？

> ID：12811005
> 
> 赞同：0
> 
> 时间：2012-10-10T02:10:47.497
> 
> 标签：objective-c, storyboard, xcode4.5

我创建了一个以 UITabBarController 开头的应用程序

像这样的东西：

![在此处输入图像描述](../Images/e37b3fc6298f537aed748bac2935d3da.png)

现在我想在代码中引用那个 UITabBarController。我该怎么做？

我应该正确拖动到应用程序委托吗？（不起作用）。

我可以使用 instantiateViewControllerWithIdentfier: 但我不想创建一个新的 UITabBarController。我想参考现有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:12:02.160

您想在代码中的哪个位置引用它？如果它是标签栏控制器管理的控制器之一，那么您可以使用 self.tabBarController。如果它来自 appDelegate，您可以使用 self.window.rootViewController。

# ffmpeg - avio_set_interrupt_cb 的替代品是什么？

> ID：12811006
> 
> 赞同：3
> 
> 时间：2012-10-10T02:10:52.283
> 
> 标签：ffmpeg, libav, libavformat

avio_set_interrupt_cb 在新的 ffmpeg 版本中被弃用了吗？什么是替代品？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T01:57:44.473

我自己找到了答案。这是如何完成的

您定义回调

```
int decode_interrupt_cb(void * ctx) {
    return isQuit;
} 
```

做一个回调结构

```
const AVIOInterruptCB int_cb = { decode_interrupt_cb, NULL }; 
```

`AVFormatContext`在`interrupt_callback`读取任何文件之前将其分配给您

```
pFormatCtx->interrupt_callback = int_cb; 
```

如果您使用“avio_open2”打开文件，请像这样使用它：

```
int errCode = avio_open2(&pFormatCtx->pb, filename, AVIO_FLAG_READ, &pFormatCtx->interrupt_callback, NULL); 
```

希望有人觉得它有帮助。

# ios - iOS6 中的 ASIHTTPRequest

> ID：12811008
> 
> 赞同：3
> 
> 时间：2012-10-10T02:10:53.223
> 
> 标签：ios, ios5, ios6, asihttprequest

我使用 iOS 5.1 有一段时间了，今天我决定升级 iOS 6。现在，ASIHTTPRequest 给了我很多警告。此外，我的几个 viewController 背景变成黑色而不是过去的白色。

任何我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T02:18:35.570

ASIHTTPRequest 不再受到其原作者的支持。我建议移动一个更新的框架，比如[AFNetworking](https://github.com/AFNetworking/AFNetworking)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:20:58.350

AFNetworking 的轻量级替代方案是[STHTTPRequest](https://github.com/nst/STHTTPRequest)。

拖放 .h .m 就完成了。

```
STHTTPRequest *r = [STHTTPRequest requestWithURLString:@"http://google.com"];

r.completionBlock = ^(NSDictionary *headers, NSString *body) {
    // ...
};

r.errorBlock = ^(NSError *error) {
    // ...
};

[r startAsynchronous]; 
```

# c++ - 自定义字符串类实现建议？

> ID：12811012
> 
> 赞同：0
> 
> 时间：2012-10-10T02:11:16.913
> 
> 标签：c++, string, unicode, ascii

我正在编写自己的字符串类（只是为了好玩），但我遇到了一些问题。我希望我的班级能够同时处理 ASCII 和 Unicode 字符串。如果您将 a 分配`const wchar_t*`给我的班级，则会设置 Unicode 标志。如果您分配 a `const char*`，则**不会**设置 Unicode 标志。

此外，如果您尝试将 Unicode 字符附加到 ASCII 字符串，它将创建一个全新的 Unicode 字符串，或者将重新分配其缓冲区并将所有内容转换为 Unicode（不确定我会做什么）。

无论如何，关于我的问题：我想要类似于 std::string 的`c_str`函数的东西。显然我会有 2 个不同的函数，一个返回`const char*`ASCII 字符串，一个返回`const wchar_t*`Unicode 字符串。

假设我的字符串是 ASCII。如果我调用该`ToAsciiString()`函数，它只会返回一个指向字符串内部存储的指针，它不会也不应该被手动释放，因为字符串 dtor 会自动执行此操作。

但如果我想要 Unicode 格式的 ASCII 字符串，我可以调用`ToUnicodeString()`. 但这会产生一个问题：我需要分配一个新缓冲区来将我的 ASCII 字符串转换为。如果我这样做了，那么返回的指针将需要手动`delete[]`编辑，例如，这破坏了 std::string's 的简单性`c_str`。

我不确定如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:29:48.293

我认为您应该能够在班级内维护 2 个缓冲区。在某些情况下，您将只有一个，但如果两种表示都需要，则必须同时分配两者。

这种方法将使您的类的使用变得简单。在我们的时代，我们有千兆字节的 RAM。这意味着除非您需要处理大量数据，否则这种方法听起来并不荒谬。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:25:57.730

> 我希望我的班级能够同时处理 ASCII 和 Unicode 字符串。

这是完全错误的问题。如果您希望字符串包含 ASCII 或可能的 Unicode 字符，解决方案很简单：存储 UTF-8。

根据定义，如果 UTF-8 字符串不包含任何后 ASCII 字符，它就是 ASCII。因此，除非有人添加大于 127 的代码点，否则您的字符串是 ASCII。无需来回切换；您使用相同的字节数组处理它们。

此外，您似乎处于常见的 Windows 概念下，`wchar_t*`即“Unicode”和`char*`“ASCII”。他们不是。Unicode 是一种标准，用于描述 21 位代码点的含义以及它们之间的关系。21 位代码点可以以多种编码方式存储。您的“Unicode”可能意味着“UTF-16”。

# typescript - 如何从 Jake 调用 TypeScript 编译器？

> ID：12811014
> 
> 赞同：1
> 
> 时间：2012-10-10T02:11:34.573
> 
> 标签：typescript, jake

如果我想从 jake 脚本中调用 jshint，我会这样做：

```
var jshint = require("jshint").JSHINT;
var pass = jshint(sourceCode, options, globals); 
```

我想用 tsc 做类似的事情 - 但有人知道怎么做吗？该文档仅告诉您如何从命令行运行它，而不是如何以编程方式调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:09:19.263

我什么都不知道`jake`。但是，打字稿编译器目前没有公共接口，因此我相信你不能从`jake`. [在codeplex](http://typescript.codeplex.com/workitem/97)有一个问题。我希望它很快就会修复。

# android - 缺少 org.andengine.BuildConfig 类

> ID：12811022
> 
> 赞同：0
> 
> 时间：2012-10-10T02:12:51.787
> 
> 标签：android, andengine

我已经安装了**ADT 20**，并且最近下载了带有示例的 andengine。但我注意到该`import org.andengine.BuildConfig;`文件不存在，因此我无法编译我的项目。

根据这个[链接](https://github.com/nicolasgramlich/AndEngine/issues/73)，安装 ADT 17 或更高版本应该可以解决这个问题。

有没有其他人遇到过这个问题并解决了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:11:48.120

帮助我的是添加 BuildConfig 类，因为它写在这里 - [https://github.com/nicolasgramlich/AndEngine](https://github.com/nicolasgramlich/AndEngine)。在此之后，我构建了项目而没有任何错误。但是当我想编译项目时，出现了 BuildConfig 重复错误。我查看了 gen 目录，结果发现 BuildConfig 是在构建后添加的。因此，我删除了手动添加到包根目录的 BuildConfig 类，并在需要的地方从 gen 目录导入了该类。

这适用于 Intellij IDEA 12。

为了不执行所有这些步骤，只需首先尝试构建/重建项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T00:43:52.297

我也遇到了这个问题，在 Eclipse 中，这为我解决了这个问题：

在项目资源管理器中，

1.  确保您已安装、构建并添加了 AndEngine 及其所有依赖项到您的工作区。
2.  右键单击项目文件夹并选择属性。
3.  从左侧窗格中选择 android。
4.  在右侧的库框中的窗格中，单击添加，选择 AndEngine 并单击确定。
5.  添加缺少的导入语句，您应该一切顺利。
6.  如果您尝试以任何其他方式包含 AndEngine，在按照上述说明操作之前，您可能需要将其清除，以便您的项目文件夹不那么混乱（如果您不这样做，以后可能会导致问题）。

希望对使用 Eclipse 的人有所帮助。

# android - 如何将单选按钮选择转换为字符串并将其放入 EditText？

> ID：12811023
> 
> 赞同：1
> 
> 时间：2012-10-10T02:13:22.517
> 
> 标签：android, string, int, android-edittext, radio-group

我正在尝试登录我的网站，需要弄清楚如何将单选按钮选项转换为字符串，然后将其转换为 EditText。

```
public class HttpLogin extends Activity {
    private Button login;
    private EditText company, username, password;
    private int radioCheckedId;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        login = (Button) findViewById(R.id.button1);
        RadioGroup radioGroup = (RadioGroup) findViewById(R.id.radioCompany); 
        radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() 
        {
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                radioCheckedId = checkedId;
                if(radioCheckedId==1){
                    company=R.string.a_e;
                }
                if(radioCheckedId==2){
                    company=R.string.stat_o;
                }
                else{
                    Toast.makeText(getApplicationContext(), "Please choose a company.",
                               Toast.LENGTH_LONG).show();
                }

            }
        });
        username = (EditText) findViewById(R.id.editText1);
        password = (EditText) findViewById(R.id.editText2);

        login.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                String mCompany = company.getText().toString();
                String mUsername = username.getText().toString();
                String mPassword = password.getText().toString();

                tryLogin(mCompany, mUsername, mPassword);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:35:18.643

获取 Radio Group 的引用，然后使用 radio group 的 getCheckedInId 方法找到选中的单选按钮，然后获取该 id 对应的单选按钮，然后在其上调用 getText 方法。

希望对你有帮助！！

# zos - 如何在 z/OS 中调用对话框面板命令？

> ID：12811025
> 
> 赞同：2
> 
> 时间：2012-10-10T02:13:46.930
> 
> 标签：zos, rexx, tso

[官方指南](http://publib.boulder.ibm.com/infocenter/zos/v1r13/index.jsp?topic=/com.ibm.zos.r13.f54u200/ispzu29048.htm)说要使用CMD(your_statement) 函数，但我不断收到无法识别的关键字错误。我正在尝试自定义 ISPF 主选项菜单，我需要编辑面板，以便当您按“R”时它会运行 Rexx 执行程序。这是我正在使用的面板中的一些代码：

```
 %                                                                  
 %                      ******************                          
 %                      *                *                          
 %                      * $2  %Edit      *                          
 %                      * $3  %Utility   *                          
 %                      * $6  %Command   *                          
 %                      * $SD %SDSF      *                          
 %                      * $D  %Datasets  *                          
 %                      * $X  %eXit      *                          
 %                      * $R  %REXX      *                          
 %                      *                *                          
 %                      ******************                          
 )PROC                                                              
   &ZSEL = TRANS ( TRUNC (&ZCMD,'.')                                
                 2,'PGM(ISREDIT) PARM(P,ISREDM01) SCRNAME(EDIT)'    
                 3,'PANEL(ISRUTIL) SCRNAME(UTIL)'                   
                 D,'PGM(ISRUDL) PARM(ISRUDLP) SCRNAME(DSLIST)'      
                 6,'PGM(ISRPTC) SCRNAME(CMD)'                       
                 SD,'PGM(ISFISP) NOCHECK NEWAPPL(ISF) SCRNAME(SDSF)'
                 R,'CMD(TSO EXEC 'IBM####.REXX(REXXSYSC)')'         
               ' ',' '                                              
                 X,'EXIT'                                           
                 *,'?' )                                            
   &NEXTOPT = .TRAIL                                                
 )END 
```

当我尝试将命令语句分配给“R”时，会发生错误。我的猜测是引号有干扰，但 TSO 命令必须使用这些引号来指定 Rexx exec 的位置。从指定文件夹运行此 Rexx exec 的正确语法应该是什么？抱歉，代码的缩进有点搞砸了......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:55:03.807

从一些*非常*简短的测试来看，似乎 REXXSYSC 必须驻留在 ISPF 会话的 SYSPROC 或 SYSEXEC 连接中的库中，然后语法是

```
R,'CMD(%REXXSYSC)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T22:13:18.863

虽然现在回答这个问题已经很晚了，但我觉得我可能可以添加一两个指针，这可能对寻找类似解决方案的人有用。

要检查包含源 REXX 代码的库是否包含在 SYSPROC / SYSEXEC 中，我们可以触发以下命令：

TSO ISRDDN

您可以轻松验证您的库是否存在。如果没有，则必须包含它，以便可以直接执行您的目标命令。下面的链接说明了如何将您的库添加到 SYSEXEC / SYSPROC

[http://ibmmainframes.com/about48417.html](http://ibmmainframes.com/about48417.html)

不过请注意，SYSEXEC / SYSPROC 中的库非常敏感，Z/OS 管理员不会高兴看到未经授权的人试图偷看它！

谢谢。

# c++ - BB10 级联命令行开发

> ID：12811027
> 
> 赞同：13
> 
> 时间：2012-10-10T02:14:00.550
> 
> 标签：c++, qt, blackberry-10, blackberry-qnx

由于如果您了解 Qt，BB10 的编程现在应该会容易得多，所以我决定试一试，我一直在阅读：[https ://developer.blackberry.com/cascades/documentation/getting_started/index.html](https://developer.blackberry.com/cascades/documentation/getting_started/index.html)

我注意到 RIM 的所有教程以及我能找到的所有在线教程都以 QNX Momentics IDE 为中心——一个定制的 Eclipse。

因为我是老派，而且我喜欢 VIM，所以我真的更喜欢使用命令行工具。但是，我似乎找不到任何有关如何在此 IDE 之外设置项目、构建过程或设备/模拟器部署的文档。这甚至可能吗？如果是这样，是否有人对某些文档或教程有任何线索？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-30T15:10:42.427

我也喜欢`vi`和`make`。BB10 开发的真正好处是所有 QNX 命令行工具和 makefile 模板都包含在[Native Development Kit](http://developer.blackberry.com/native/downloads/)中，因此可以轻松地从命令行构建和部署应用程序。

要从命令行开始开发，您需要：

**设置 NDK 环境变量**

`bbndk-env.sh`在您的 NDK 安装目录中找到运行。

您现在应该可以访问大量以 blackberry-* 开头的二进制文件。这些将使您能够将您的应用程序打包并部署到模拟器或设备上。

**为 arm 架构构建**

要构建将在 BB10 设备上运行的二进制文件，您需要为 arm 架构构建：

```
qcc -Vgcc_ntoarmv7le main.c 
```

要为模拟器构建，您需要为 x86 架构构建，假设那是您的主机操作系统。您可以通过运行查看所有受支持架构的列表`qcc -V`

**创建 BAR 描述符 XML**

每个 BB10 应用程序都必须有一个名为`bar-descriptor.xml`. 这告诉目标操作系统如何安装应用程序。这是一个最小示例（我的应用程序称为“Mini”）：

```
<qnx>
<id>com.example.Mini</id>
<versionNumber>1</versionNumber>
<name>Mini</name>
<asset path="main" entry="true">main</asset>
</qnx> 
```

**打包、签名和部署**

假设您已向[RIM 注册以签署应用程序](https://www.blackberry.com/SignedKeys/codesigning.html)，您可以将应用程序打包到 BAR (BlackBerry Archive) 文件中，并使用以下命令将其部署到设备：

```
#Package the app and set the author to match the debug token author
blackberry-nativepackager -package arm/mini.bar bar-descriptor.xml -devMode -debugToken ~/Library/Research\ In\ Motion/debugtoken1.bar

#Deploy the BAR to the to the device
blackberry-deploy -installApp 169.254.0.1 -password pass arm/mini.bar 
```

**使用 Makefile 让事情变得更简单**

您可以使用 Qt 工具让您的生活更轻松：

1.  用于`qmake -project`创建[.pro 文件](http://qt-project.org/doc/qt-4.8/qmake-project-files.html)。只运行一次，后续运行将覆盖您的 .pro 文件。
2.  运行`qmake`。`Makefile`这将根据您的 .pro 文件生成一个
3.  运行`make`以构建您的项目。

**更多信息**

在此处查看 NDK 示例：[https](https://github.com/blackberry/NDK-Samples) ://github.com/blackberry/NDK-Samples和此处的社区示例：[https](https://github.com/blackberry/Core-Native-Community-Samples) ://github.com/blackberry/Core-Native-Community-Samples 。您可以通过运行以下命令来构建、打包和部署所有这些示例到您的设备：

```
make CPULIST=arm EXCLUDE_VARIANTLIST=g deploy 
```

您需要设置您的`DEVICEIP`和`DEVICEPW`环境变量以匹配您的目标。

另请查看移植指南：http: [//developer.blackberry.com/native/documentation/porting_getting_started.html](https://developer.blackberry.com/native/documentation/gaming_porting/getting_started/porting_getting_started.html)

# android - 警报对话框，如何让两个按钮都显示

> ID：12811028
> 
> 赞同：0
> 
> 时间：2012-10-10T02:14:07.370
> 
> 标签：android, dialog, android-alertdialog

为什么编译器在下面的代码中显示 setPositiveButton 和 setNegativeButton 的错误。如果我使用 setButton 没有错误，但这只允许我在警报对话框上显示一个按钮。我想要2个按钮。根据许多教程，必须使用 setPositiveButton 和 setNegativeButton 设置两个按钮警报对话框。为什么这些有编译错误？

```
 public void onClick(View v) {

        AlertDialog alert = new AlertDialog.Builder(MainActivity.this).create();
        alert.setTitle("Confirm Edit");
        alert.setMessage("do you want to save edits?");

        alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
            // launches other activity if the user presses the OK button
                Intent myIntent = new Intent(MainActivity.this, TestScreen.class);
             MainActivity.this.startActivity(myIntent);

           Toast.makeText(MainActivity.this, "Edits saved", Toast.LENGTH_SHORT).show();

            }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(MainActivity.this, "Edits Canceled", Toast.LENGTH_SHORT).show();
                dialog.cancel();
            }
        });
        alert.show();

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:18:22.810

你的代码是正确的，只是你需要稍微改变一下。使用 Builder 类创建 AlertDialog。

```
Builder builder = new AlertDialog.Builder ( MainActivity.this ); 
builder.setTitle ( "Confirm Edit" ); 
builder.setMessage("do you want to save edits?");

builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
            // launches other activity if the user presses the OK button
                Intent myIntent = new Intent(MainActivity.this, TestScreen.class);
             MainActivity.this.startActivity(myIntent);

           Toast.makeText(MainActivity.this, "Edits saved", Toast.LENGTH_SHORT).show();

            }
        });

        builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(MainActivity.this, "Edits Canceled", Toast.LENGTH_SHORT).show();
                dialog.cancel();
            }
        });

// Now finally showing Alert Dialog.
AlertDialog alert = builder.create(); 
alert.show(); 
```

# eclipse - Eclipse EGit CLRF 未修改文件在 Linux 64 位中标记为已修改

> ID：12811031
> 
> 赞同：3
> 
> 时间：2012-10-10T02:14:51.563
> 
> 标签：eclipse, git, egit

我将 EGit 与 Eclipse Juno 一起用于 64 位 Linux，它显示许多文件已修改，即使它们不是。这可能是因为我过去曾使用 Windows 签出过这个存储库。在无休止地摆弄 core.autocrlf 和工作区设置之后，我被卡住了。

如何让 EGit 正确地将文件标记为未修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:51:34.170

这是由此处讨论的一个相当复杂的问题引起的：http: [//www.mail-archive.com/git@vger.kernel.org/msg09439.html](http://www.mail-archive.com/git@vger.kernel.org/msg09439.html)

简短的解释是，最初在存储库中存储为二进制（带有 CR）的文件现在被作为文本处理，因此 git 校验和这些文件（没有 CR）并且它们“看起来”被修改，因为校验和不匹配。

不幸的是，git 不知道文件在存储库中是以文本方式还是二进制方式存储（它不在 git 文件格式规范中），因此无法有效修复此问题。人们期望人们应该通过将这些文件作为文本重新提交来“修复”他们的存储库，因为它们本来就不应该被存储为二进制文件。

如果您不需要 git 来转换这些文件的行尾，另一种解决问题的方法是设置您的 Linux 存储库以将这些文件视为二进制文件（例如，在您的“.gitattributes”中添加“二进制”行“ 文件）。

# javascript - 像折线图一样浮动堆叠图表条形宽度

> ID：12811032
> 
> 赞同：0
> 
> 时间：2012-10-10T02:14:52.267
> 
> 标签：javascript, jquery, charts, flot

我试图制作浮点堆积图以在数组 x1,x2,x3... 和 y1,y2,y3... 中输入数据

我的折线图数据是这样制作的，所以我复制了它的 js 并做了一些更改，但条形图的宽度仍然与折线图相同。有什么建议吗？

[http://jsfiddle.net/TXPWK/67/](http://jsfiddle.net/TXPWK/67/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T02:29:41.110

问题是`barWidth: 0.4`。`x1`由于您在 x 轴上使用日期，因此`x2`、等之间的数值`x3`将是相对较大的值。如果您希望条形图比轴线宽得多，则必须设置`barWidth`为：

```
 barWidth:1000 * 60 * 60 * 24 * 15 //Half month: 1000 ms * 60 sec *60 min * 24 hour * 15 days 
```

我从您的 jsfiddle 示例创建了一个分支，其中我修改了 barWidth：

[http://jsfiddle.net/6TaQt/1](http://jsfiddle.net/6TaQt/1)

# typescript - 在 Visual Studio 中使用 TypeScript 定位 ES5

> ID：12811034
> 
> 赞同：31
> 
> 时间：2012-10-10T02:15:12.873
> 
> 标签：typescript

我想在 Visual Studio Express for Web 中的 TypeScript 中使用 get/set 语法。我该如何启用它。我目前在编译时收到此错误；

> 属性访问器仅在面向 ES5 或更高版本时可用

正在编译的文件的构建操作为`TypeScriptCompile`. 我不知道如何从 Visual Studio 中添加必要的编译器开关。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-06-23T14:28:08.730

TypeScript 0.8.2 改变了这一点。您现在从以下位置更改`TypeScriptTarget`文件`.csproj`：

```
<TypeScriptTarget>ES3</TypeScriptTarget> 
```

到

```
<TypeScriptTarget>ES5</TypeScriptTarget> 
```

**MyApp.csproj**：

```
 <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptTarget>ES5</TypeScriptTarget>
    <TypeScriptIncludeComments>true</TypeScriptIncludeComments>
    <TypeScriptSourceMap>true</TypeScriptSourceMap>
    <TypeScriptModuleKind>AMD</TypeScriptModuleKind>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TypeScriptTarget>ES5</TypeScriptTarget>
    <TypeScriptIncludeComments>false</TypeScriptIncludeComments>
    <TypeScriptSourceMap>false</TypeScriptSourceMap>
    <TypeScriptModuleKind>AMD</TypeScriptModuleKind>
  </PropertyGroup> 
```

另请参阅[Asher Barak 的回答](https://stackoverflow.com/a/15201403/12597)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-10T04:01:26.490

您需要将 -target ES5 传递给编译器。使用项目文件中的 msbuild 任务触发编译。您的项目文件可能有一个“TypeScriptCompile”目标，就像下面的 onr 一样，只需确保传递了目标参数。这是一个例子：

```
<Target Name="TypeScriptCompile" BeforeTargets="Build">
   <Message Text="Compiling TypeScript files" />
   <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; -target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-18T17:46:10.787

我正在使用带有 Web Essentials 的 Visual Studio 2013 Update 4。Microsoft 使更改目标 ECMAScript 版本变得更加容易。

您现在可以执行以下操作：

1.  右键单击您的项目名称，然后单击属性。
2.  在“属性”窗口中选择“Typescript Build”
3.  将 ECMAScript 版本设置为“ECMAScript 5”。

我相信 ECMAScript 5 目前是默认的。您目前还可以选择 ECMAScript 3 或 ECMAScript 6 作为目标。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T19:46:18.440

指示 TSC.EXE 生成 ES5 兼容代码的开关是 --target ES5（注意双破折号）。

每个项目都有一个名为 [Something].csproj 的文件（在我们的例子中是 C# 项目）。使用记事本打开该文件并查找`Target`xml 元素。通过添加`--target ES5`.

前：

```
 <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" /> 
```

后：

```
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; --target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-01T12:21:16.173

使用Studio 2012，项目模板类型TypeScript构建，在项目csproj文件中设置为ES3

ES3

将其更改为 ES3 到 ES5，保存并重新加载项目。

# php - 使用 PHP、AJAX、JQUERY 获取表中隐藏 tr 的选定值

> ID：12811037
> 
> 赞同：1
> 
> 时间：2012-10-10T02:15:31.410
> 
> 标签：php, jquery, ajax

我有如下代码：

```
<form method ="post" id="myForm">
<table>

    <tr>
        <td>Classification socio <br /> professionnelle à l'embauche : </td>
        <td>
            <select name="droClassification" class="validate[required]" id="classification">
                <option value="">choisir catégorie </option>
                <option value="Ouvrier">Ouvrier</option>
                <option value="Employe">Employé</option>
                <option value="AgentMaitris">Agent de maitrise</option>
                <option value="Cadre">Cadre</option>
                <option value="Autre">Autre</option>
            </select>
        </td>
        <td></td>
    </tr>
     <?php
        if($_POST['droClassification'] == "Ouvrier" || $_POST['droClassification'] == "Employe"){

            echo '<style type="text/css"> #trHide{display:none;}</style>';
        }
    ?>
    <tr id="trHide">
        <td colspan="4">This is what I want to hide it, when I select on the Ouvrier or Employe</td>
    </tr>

</table> 
```

**我需要：** 当我选择 Ouvrier 或 Employee 时，它​​将是隐藏`<tr id="trHide">`标签。

**问题：** 我使用 PHP 代码作为我上面的代码，但它不起作用。那么你对此有什么想法吗？或者我应该使用哪种技术，如 AJAX、JQUERY、PHP？请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:18:53.117

忘记`php`or `ajax`，您不必为此行为提出请求。
使用`javascript`它，我将向您展示如何使用`jQuery`.

试试这个，使用`jQuery`：

```
jQuery('#classification').change(function() {
    var selectedValue = $(this).val();
    if(selectedValue == 'Ouvrier' || selectedValue == 'Employe') {
        $('#trHide').hide();
    }
}); 
```

[**演示**](http://jsfiddle.net/sFb7U/)

如果您想显示`#classification`何时更改给其他人，您可以执行以下操作。

```
jQuery('#classification').change(function() {
    var selectedValue = $(this).val(),
        $row = $('#trHide');
    if(selectedValue == 'Ouvrier' || selectedValue == 'Employe') {
        $row.hide();
    } else {
        $row.show();
    }
}); 
```

[**演示**](http://jsfiddle.net/sFb7U/2/)

**更新**：根据[此](https://stackoverflow.com/questions/12811037/get-selected-value-for-hidden-tr-in-table-using-php-ajax-jquery/12811059#comment17326954_12811059)评论。
改为`class`而不是`id`。

```
<tr class="trHide">
        <td colspan="4">This is what I want to hide it, when I select on the Ouvrier or Employe</td>
</tr> 
```

然后更改`$('#trHide')`为`$('.trHide')`.

# php - 构建验证码 wav 时 fseek、feof 和 fread 的 PHP 警告消息

> ID：12811039
> 
> 赞同：1
> 
> 时间：2012-10-10T02:15:33.700
> 
> 标签：php, streaming, wav, fread, fseek

我目前在尝试运行 fseek、feof 和 fread 时收到 PHP 警告消息（“期望参数 1 是资源”）。我相信这是因为它在每种情况下都找不到文件。

让我给你一点背景。我正在构建一个验证码 wav，然后流式传输文件。它适用于所有现代浏览器（IE 除外，但我用一些 Flash 来介绍它），但在 iOS 中速度很慢。

我相信问题出在 $fm 变量上，但我们将不胜感激。

```
public function outputAudioFile()
{
    set_error_handler(array(&$this, 'errorHandler'));

    require_once 'wavfile.php';

    try {
        $audio = $this->getAudibleCode();
    } catch (Exception $ex) {
        if (($fp = @fopen(dirname(__FILE__) . '/si.error_log', 'a+')) !== false) {
            fwrite($fp, date('Y-m-d H:i:s') . ': secureaudio audio error "' . $ex->getMessage() . '"' . "\n");
            fclose($fp);
        }

        $audio = $this->audioError();
    }

    if ($this->canSendHeaders() || $this->send_headers == false) 
    {
        if ($this->send_headers) 
        {
            //download range
            $file_size   = strlen($audio);
            $start_point = 0;
            $end_point   = $file_size - 1;

            if(isset($_SERVER['HTTP_RANGE']) && !empty($_SERVER['HTTP_RANGE'])) 
            {                       
                //download range
                $http_range = explode('-', substr($_SERVER['HTTP_RANGE'], strlen('bytes=')));
                $start_point = $http_range[0];
                if($http_range[1] > 0)
                    $end_point = $http_range[1];

                //headers
                header('HTTP/1.1 206 Partial Content');
                header('Status: 206 Partial Content');
                header('Content-Length: '.($end_point - $start_point + 1));
            }
            //full download
            else
            {
                //headers
                header('HTTP/1.1 200 OK');
                header("Status: 200 OK");
                header('Content-Length: '.$file_size);
            }

            //headers
            $uniq = md5(uniqid(microtime()));
            header('Content-Type: audio/x-wav');
            header('Accept-Ranges: bytes');
            header("Content-Range: bytes $start_point-$end_point/$file_size");
            header("Content-Disposition: attachment; filename=\"secureaudio-{$uniq}.wav\"");
            header("Last-Modified: ".gmdate("D, d M Y H:i:s", time() + 3600*(0+date("I")))." GMT");
            header("Expires: ".gmdate("D, d M Y H:i:s", time() + 7200*(0+date("I")))." GMT");
            header('Cache-Control: no-store, no-cache, must-revalidate');
            header('Pragma: no-cache');
            header("Content-Transfer-Encoding: binary\n");
            header('Connection: close');               

            $fm     = fopen($audio, 'r');
            fseek($fm,$start_point);

            while(!feof($fm)&&$start_point<$end_point&&(connection_status()==0))
            { 
                print fread($fm,min(1024*16,$end_point-$start_point));
                $start_point+=1024*16;
            }
        }    
        //output it
        echo $audio;
    }
    else 
    {
        echo '<hr /><strong>'
            .'Failed to generate audio file, content has already been '
            .'output.<br />This is most likely due to misconfiguration or '
            .'a PHP error was sent to the browser.</strong>';
    }

    restore_error_handler();

    if (!$this->no_exit) exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:32:59.590

1.  从 fopen 中删除“@”
2.  确保您将错误报告设置为 E_ALL

    错误报告（E_ALL）；

先找到错误，然后修复它。那应该删除其余的警告。

# c# - 获取分配给服务器的所有 IP

> ID：12811041
> 
> 赞同：6
> 
> 时间：2012-10-10T02:15:53.593
> 
> 标签：c#, .net, dns, wmi

我在这个答案中遇到了一个代码片段：[Get IP address in a console application](https://stackoverflow.com/questions/858341/console-application-ip-address/)

```
using System; 
using System.Net; 

namespace ConsoleTest 
{ 
    class Program 
    { 
        static void Main() 
        { 
            String strHostName = string.Empty; 
            // Getting Ip address of local machine... 
            // First get the host name of local machine. 
            strHostName = Dns.GetHostName(); 
            Console.WriteLine("Local Machine's Host Name: " + strHostName); 
            // Then using host name, get the IP address list.. 
            IPHostEntry ipEntry = Dns.GetHostEntry(strHostName); 
            IPAddress[] addr = ipEntry.AddressList; 

            for (int i = 0; i < addr.Length; i++) 
            { 
                Console.WriteLine("IP Address {0}: {1} ", i, addr[i].ToString()); 
            } 
            Console.ReadLine(); 
        } 
    } 
} 
```

当我在本地运行它以获取计算机的 IP 地址时，此代码工作正常。我想要做的是使用代码来获取我网络上服务器上的 IP 地址。所以基本上我尝试替换 strHostName = Dns.GetHostName(); 与 strHostName = "myServerName"; 但它只返回一个 IP。当我在服务器本身上运行程序时，我会获得分配给该服务器的所有 IP。目标是在我的计算机上运行该程序，从数据库表中读取服务器名称以获取 100 多台服务器上的 IP 地址。我试图避免必须登录到每台服务器并在每台服务器上运行程序来获取 IP 地址。

有趣的是，该代码适用于“www.google.com” - 此服务器与此服务器相关还是安全问题？

在我开始从数据库中获取数据之前，我需要让代码为一台服务器工作:) 希望能更好地解释它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:55:00.880

您是否混淆了 DNS 关于您尝试使用这些方法解析的名称与找出哪些 IP 地址实际绑定到您感兴趣的特定机器上运行的 TCP/IP 协议栈之间的区别？如果您想知道机器实际配置的 IP 地址，无论在 DNS 中注册或未注册的 IP 地址，您都需要查看使用 WMI 枚举机器上配置的地址。

请参阅文章：[WMI 查询以获取 IP 地址、域名、操作系统版本](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/4328bbaf-5e98-4277-914b-af127b9bf931/)

在上面的代码中，您只是要求运行代码的本地计算机使用其配置的 DNS 解析器，并告诉您哪些条目作为您用于查询的名称的 DNS 记录存在。这就是为什么当您尝试查询 www.google.com 之类的内容时可以获得值的原因。这是因为您只是在 DNS 中查找一个名称，并且由于这是一个可公开识别的名称，因此任何正确设置的 DNS 服务器都能够报告一个有效值。

这与可能绑定到服务器的 IP 地址非常不同。例如，想想位于防火墙后面的服务器。服务器实际上可能正在使用内部网络本地的 IP 地址，这些地址映射到防火墙上可公开访问的 IP 地址。在这种情况下，服务器知道的 IP 地址与其相应的 DNS 条目中显示的公共 IP 地址完全不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:46:21.370

可能是服务器故意将其他 IP 从 DNS 中排除。[此知识库文章 (975808) 中](http://support.microsoft.com/kb/975808)提供了此功能的一个很好的示例。

尝试`GetHostAddress()`并验证您是否得到相同的结果。请参阅 MSDN：[gethostaddress()](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)

如果做不到这一点，您可能需要研究其他方法来查询 IP 地址。

# makefile - 在子目录中运行 make 文件的主 makefile

> ID：12811045
> 
> 赞同：1
> 
> 时间：2012-10-10T02:17:13.293
> 
> 标签：makefile

我该如何创建一个makefile，它将启动所有子目录中的所有make文件。是否可以在主makefile的主目录上运行“make”，这将自动触发子目录的make？

例子：

```
/makefile   (this is the main makefile)
/subdirectory1/makefile
/subdirectory1/various .c/.h files compiled by the makefile in this directory
/subdirectory2/makefile
/subdirectory2/various .c/.h files compiled by the makefile in this directory
/subdirectory3/makefile
/subdirectory3/various .c/.h files compiled by the makefile in this directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:23:05.447

是的，这很简单。在主生成文件中：

```
all:
    $(MAKE) -C subdirectory1
    $(MAKE) -C subdirectory2
    $(MAKE) -C subdirectory3 
```

一旦你把它弄下来，就会有更复杂的变化。

# php - 维基百科中的 PHP 史努比

> ID：12811049
> 
> 赞同：1
> 
> 时间：2012-10-10T02:18:05.867
> 
> 标签：php, snoopy

尝试使用 PHP 中的 snoopy 类在 Wikipedia 中提交查询，但失败

```
<?php
        include "Snoopy.class.php";
        $snoopy = new Snoopy;

        $snoopy->agent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.0.5) Gecko/2008120122 Firefox/3.0.5 FirePHP/0.2.1";
        $snoopy->referer = "http://www.google.com/";

        $url = "http://www.wikipedia.org/";

        $data["search"] = "Intel";
        $data["language"] = "en";
        $data["go"] = "submit";

        $snoopy->submit($url, $data);
        echo $snoopy->results;
?> 
```

似乎无法将查询提交到维基百科并返回错误。上面的代码有什么问题？谢谢！！

这是来自 wiki的[错误消息](http://www.hkepc.com/forum/attachments/month_1210/1210092310e72d0c6ab5ca6f89.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:26:51.173

不要刮维基百科。他们有一个 API。

[http://en.wikipedia.org/w/api.php](http://en.wikipedia.org/w/api.php)

# jquery - 重写jQuery左右滚动

> ID：12811051
> 
> 赞同：2
> 
> 时间：2012-10-10T02:18:07.967
> 
> 标签：jquery, css, jquery-animate

我需要帮助重写我的 jQuery。我在顶部有四个链接：“一、二、三、四”

当您从一-> 二走时，它会从右侧擦除。完美的！

当您从二 --> 一开始时，它会从右侧擦入。不理想。我希望它从左侧滑入。

依此类推。这容易吗？

[http://jsfiddle.net/5N3YK/126/](http://jsfiddle.net/5N3YK/126/)

HTML：

```
<a data-section="one" href="#">One</a>
<a data-section="two" href="#">Two</a>
<a data-section="three" href="#">Three</a>
<a data-section="four" href="#">Four</a>

<div id="hello">
    <section id="one" class="active">One</section>
    <section id="two">Two</section>
    <section id="three">Three</section>
    <section id="four">Four</section>
</div> 
```

CSS：

```
#hello, #hello section{
    min-width: 350px;
    height:330px;
    background:green;
}

#hello section{
    position: absolute;
    left:100%;
}

#hello{
    position: relative;
    overflow: hidden;
    width:90%;
}

#hello section:nth-child(1){left:0%} 
```

jQuery：

```
$('a').on('click', function(event) {

    event.preventDefault();

    var sectionId = $(this).attr("data-section"),
        $toSlide = $("#hello section#" + sectionId),
        $fromSlide = $('.active');

    if (!($toSlide.hasClass("active"))) {

        $fromSlide.animate({
            "left": "-100%"
        }, 500, 'linear')
        $toSlide.animate({
            "left": "0%"
        }, 500, 'linear', function() {
            $fromSlide.css("left", "100%");
            $fromSlide.removeClass("active");
            $toSlide.addClass("active");
        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:57:03.243

正如@James 所指出的那样 - 这不会完全像你想要的那样执行，但它很小、简单而且有幻灯片！（只是比你的多一点:)

## *[jsBin 演示](http://jsbin.com/emexug/1/edit)*

这就是你所需要的：

**HTML**

```
<a href="#">One</a>
<a href="#">Two</a>
<a href="#">Three</a>
<a href="#">Four</a>

<div id="hello">
    <section>One</section>
    <section>Two</section>
    <section>Three</section>
    <section>Four</section>
</div> 
```

**jQuery**

```
$('a').click(function(event) {
    event.preventDefault();
    $('#hello').stop().animate({scrollLeft: $(this).index() * $('#hello').width() },700);
}); 
```

**CSS**

```
#hello, #hello section{
    min-width: 350px;
    height:330px;
    background:green;
}   
#hello{
  position: relative;
  overflow:hidden;
  width:90%;
  white-space:nowrap;
}
section{
    width:100%;
    display:inline-block;
    *display:inline;
    zoom:1;
    vertical-align:middle;
    margin-right:-4px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:07:25.303

这段代码不像 roXon 那样漂亮，但保留了原始的滚动机制。当你从一到四时，roXon 的代码将滚动浏览所有不同的选项，而这个会直接跳到四。

[在这里查看。](http://jsfiddle.net/9bKxS/)

编辑：请注意，此代码并非完美无缺。我在下面为 roXon 的出色调试结果添加了部分修复，但它仍然不能完全承受疯狂的点击。如果这就是你想要的，你会想要再修复它一点，以便它处理疯狂的点击。

# android - 如何使用android向facebook添加多行描述帖子

> ID：12811054
> 
> 赞同：2
> 
> 时间：2012-10-10T02:18:25.307
> 
> 标签：android, facebook, post, multiline

在下面尝试了许多不同的组合，但无法获得多行描述。是否可以做到这一点还没有得到明确的答案？

```
Bundle params = new Bundle();
        params.putString("name", "Name" + "\n" + "After line sperator" );
        params.putString("caption", "Caption");
        params.putString("description", "this is some long <br>text that should wrap but it proably wont");
        params.putString("link", "http://www.cnn.com"); 
```

# android - 调用另一个应用程序，并使用包名 Android 发送数据

> ID：12811055
> 
> 赞同：2
> 
> 时间：2012-10-10T02:18:28.863
> 
> 标签：android, android-intent

我用：

```
Intent intent = getPackageManager().getLaunchIntentForPackage("package name");
startActivity(intent); 
```

调用另一个应用程序，但我想为其设置数据

我怎样才能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:20:29.170

没有人可以帮助我:(但我自己找到了:)

我的代码：

```
Uri location = Uri.parse(url);
Intent intent = new Intent(Intent.ACTION_VIEW, location);
intent.setPackage("package name");
startActivity(intent); 
```

# php - 具有填充数据的多选列表

> ID：12811057
> 
> 赞同：2
> 
> 时间：2012-10-10T02:18:37.740
> 
> 标签：php, javascript, jquery, html

我有一个多选列表，需要能够从多组填充数据中进行选择。

我们有一个商店数据库，分为 [公司] -> [地区] -> [地区] -> [个人商店]。每个区有多家商店，每个地区有复合区。这些公司由多个地区组成。

话虽如此，我需要能够选择特定地区的多个商店（或可能所有商店）（可能同时来自多个地区或地区）

我认为最简单的方法是串行输入；选择公司在第二个选择框中打开所有可用区域，选择一个区域在第三个框中显示该区域的所有区域，选择区域将在最后一个框中显示该区域的所有商店。

在此设置之后，我如何允许从多个地区选择商店 - 或者您知道更好的设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:26:35.370

你可以通过序列化来做到这一点你也可以尝试[选择](http://harvesthq.github.com/chosen/)的插件来选择多个具有良好用户界面的插件

# ruby - 无法以正确的配置重新安装 ruby 框架

> ID：12811060
> 
> 赞同：0
> 
> 时间：2012-10-10T02:18:56.947
> 
> 标签：ruby, xcode, macos, command-line, homebrew

前几天我只是随机删除了整个 ruby​​ 框架，现在我想重新安装它。奇怪的是，即使我重新安装它，我也找不到 /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby 文件。但是，每次重新安装时都会出现 /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr 下的库。

我使用命令行 dmg 重新安装，也使用了重新安装 xcode 的方法。但这没有用。

> 自制软件正在使用框架 ruby​​。所以这就是我想重新安装框架的原因。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:47:19.070

有任何理由使用 Ruby 1.8 吗？OSX 预装了 Ruby，但我喜欢使用 RVM 来更好地控制 Ruby 版本。如果你愿意，你可以看看：[https ://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

您还需要记住，为了安装一些 gem，您需要一个编译器和其他开发工具。在 Mac OSX 安装盘中，您可以选择安装包括 XCode 和命令行工具的开发工具。它可以在 Apple 的 App Store 上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:36:05.600

Mac OS 为自己的目的安装了 Ruby，所以不要管它是很重要的。

通过快速搜索，只有一个使用内置 Ruby 的应用程序：

```
/usr/lib/podcastproducer 
```

可能还有其他内容，但这就是使用`locate`.

因此，如果您不需要生成播客，则不必担心重新安装系统 Ruby。

我建议使用[rbenv](https://github.com/sstephenson/rbenv)或[RVM](https://rvm.io/)在单独的沙箱中管理您的 Ruby 安装。这样，如果你有意或无意地把它吹走，你就不会影响其他任何东西。

如果您选择其中任何一个，请在安装前通读他们的安装说明几次。StackOverflow 充斥着来自那些在开始之前没有费心去理解他们在做什么的人的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:54:42.250

您可以在 brew 的第一行更改解释器，将其设置为 RVM 中的 ruby​​，它将起作用。

# security - 如何设计跨多个技术栈的应用安全架构

> ID：12811061
> 
> 赞同：1
> 
> 时间：2012-10-10T02:19:00.610
> 
> 标签：security, architecture

由于收购，我们有很多使用不同技术的模块。我们正在考虑一种集中应用程序安全控制实施的方法。我想到了两个解决方案，但似乎都有一些缺陷： Option1 创建一个独立的安全库。缺点是它不能用于不同的语言。我们至少需要提供不同语言的界面。

选项 2 使用 REST API 创建安全服务。然后，任何技术都可以使用它。但它会引入额外的性能开销。

你有这方面的经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:37:49.937

请考虑选择[XACML](http://en.wikipedia.org/wiki/XACML)：

> XACML 代表可扩展访问控制标记语言。该标准定义了以 XML 实现的声明性访问控制策略语言和描述如何根据策略中定义的规则评估授权请求的处理模型。

它可能适合您，因为它确实允许进行完全集中的访问控制。您只需要为每个特定模块实施 PEP（策略执行点）。

> XACML 模型支持并鼓励将授权决策与使用点分离。当授权决策被纳入客户端应用程序时，当管理策略发生变化时，很难更新决策标准。当客户端与授权决策分离时，授权策略可以即时更新并立即影响所有客户端。

# c# - 无法使用从 MSDN 复制的代码覆盖继承的成员 SelectTemplate...

> ID：12811064
> 
> 赞同：4
> 
> 时间：2012-10-10T02:19:19.953
> 
> 标签：c#, windows-8, microsoft-metro, visual-studio-2012

我有一个覆盖问题。我知道你不能覆盖继承的成员，除非它们被标记为虚拟、抽象或覆盖，但是......

我有 [这个](http://msdn.microsoft.com/en-us/library/ms742521.aspx "这段代码")来自 msdn 的代码：

```
using System.Windows;
using System.Windows.Controls;

namespace SDKSample
{
    public class TaskListDataTemplateSelector : DataTemplateSelector
    {
        public override DataTemplate
            SelectTemplate(object item, DependencyObject container)
        {
            FrameworkElement element = container as FrameworkElement;

            if (element != null && item != null && item is Task)
            {
                Task taskitem = item as Task;

                if (taskitem.Priority == 1)
                    return
                        element.FindResource("importantTaskTemplate") as DataTemplate;
                else 
                    return
                        element.FindResource("myTaskTemplate") as DataTemplate;
            }

            return null;
        }
    }
} 
```

我添加了这段代码：

```
public class PostTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        ListViewItem lvi = item as ListViewItem;

        AppNetClient.PostClass key = lvi.DataContext as AppNetClient.PostClass;

        if (key.postTemplate == "Post")
        {
            return lvi.FindName("PostDataTemplate") as DataTemplate;
        }
        else
        {
            return lvi.FindName("SelectedPostDataTemplate") as DataTemplate;
        }
    }
} 
```

我得到这个错误：

```
Error   3   'oneSocialLife.MainPage.PostTemplateSelector.SelectTemplate(object, Windows.UI.Xaml.DependencyObject)': cannot override inherited member 'Windows.UI.Xaml.Controls.DataTemplateSelector.SelectTemplate(object, Windows.UI.Xaml.DependencyObject)' because it is not marked virtual, abstract, or override   C:\Users\kcone\documents\visual studio 2012\Projects\HttpClientApp\HttpClientApp\MainPage.xaml.cs   339 42  oneSocialLife 
```

我花了几个小时寻找原因，但无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:21:58.363

您引用的示例适用于 WPF ( [System.Windows.Controls.DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx) )。

在 Windows 应用商店应用程序中，您使用的是具有不同语义的[Windows.UI.Xaml.Controls.DataTemplateSelector](http://msdn.microsoft.com/en-us/library/windows/apps/br209469.aspx)，并且[SelectTemplate](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.datatemplateselector.selecttemplate.aspx)确实不可覆盖，但[SelectTemplateCore](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.datatemplateselector.selecttemplatecore.aspx)是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T11:43:16.900

最终工作的代码：来自：http: [//msdn.microsoft.com/en-us/library/ms742521.aspx](http://msdn.microsoft.com/en-us/library/ms742521.aspx) 也：[http ://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-使用数据模板选择器](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)

```
public class PostTemplateSelector : DataTemplateSelector
{
    public DataTemplate PostTemplate { get; set; }
    public DataTemplate SelectedPostTemplate { get; set; }

    protected override DataTemplate SelectTemplateCore(object item, DependencyObject container)
    {
        //ListViewItem lvi = item as ListViewItem;
        //AppNetClient.PostClass key = lvi.DataContext as AppNetClient.PostClass;

        AppNetClient.PostClass key = item as AppNetClient.PostClass;

        if (key.postTemplate == "Post")
        {
            return PostTemplate;
        }
        else
        {
            return SelectedPostTemplate;
        }
    }
} 
```

# python - Python 哈希运行时

> ID：12811065
> 
> 赞同：0
> 
> 时间：2012-10-10T02:19:28.830
> 
> 标签：python, hash, runtime, execution

我有一个运行时问题。

在 Python 函数中：

```
 def f(x):
     hash = { 1: g(x) }
     return hash[1] 
```

g(x) 何时实际执行？是在调用 f(x) 时还是返回 hash[1] 时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:20:22.693

`g(x)``f(x)`被调用时执行；`g(x)`在制作时调用`hash`。

如果您删除 return 语句，您可以看到发生了什么：

```
>>> def g(x):
...     print 'g(%s) called' % x
... 
>>> def f(x):
...     hash = { 1: g(x)}
... 
>>> f(1)
g(1) called 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:25:05.270

同意马修。更准确地说，在创建对象`g(x)`时执行。`hash``f(x)`

# java - 如何阻止图像移动两次？

> ID：12811068
> 
> 赞同：1
> 
> 时间：2012-10-10T02:20:10.453
> 
> 标签：java, android, timer, touch, app-inventor

我正在尝试学习谷歌应用发明者软件。我知道这里没有回答这些问题，但问题不在于软件，而在于代码。由于这是块代码，我无法链接代码，但我正在寻找一种解决问题的方法。

问题：

我正在玩他们的教程来学习软件。在本教程中，您正在制作一个打地鼠游戏。鼹鼠在计时器上（1000 毫秒）将鼹鼠移动到不同的位置。当您触摸痣时，它也会移动到不同的位置。当我触摸鼹鼠时，有时它会跳到另一个位置，记录击中，然后再次移动。我的代码设置为在它移动之前注册命中（我检查了几次）。我相信我的问题来自 1 秒计时器在它单击注册两种移动方法时没有重置。

有没有办法在触摸时重置计时器或在计时器启动时检查触摸或任何其他想法？（我认为这些都不能解决我的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:10:50.297

> 当我触摸鼹鼠时，有时它会跳到另一个位置，记录命中，然后再次移动

正如[教程](http://appinventor.mit.edu/explore/content/molemash.html)最初设计的那样，这可能会发生，但在[修订版](https://sites.google.com/site/appinventor/molemash)中，这已得到纠正，并且痣仅在`Clock1.Timer`事件中移动。

![截屏](../Images/e25b73c5689caa8444d9dc986f63a81b.png)

# c# - 在循环中检查一次

> ID：12811073
> 
> 赞同：0
> 
> 时间：2012-10-10T02:20:50.363
> 
> 标签：c#

以下代码计算两点的最近距离。该部分`if(j==0)`对 UsedServices.Count-1 次进行了冗余测试，有没有办法不引入这种冗余？当然，我们可以将 case 与 for 循环分开，我只是在想有没有更优雅的方法来实现这一点。

```
double[] nearestDistant=new double[UnUsedServices.Count];

for (int i=0;i<UnUsedServices.Count;i++)
{
    for (int j=0;j<UsedServices.Count;j++)
    {
        double distance=GetDistance(UnUsedServices[i].coords, 
                                    UsedServices[j].coords);

        if (j==0) //Used once and redundant for UsedServices.Count-1 time!
        {
            nearestDistant[i] = distance;
        }
        else
        {
            nearestDistant[i] = Math.Min(nearestDistant[i], distance);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:29:15.970

您可以在内部循环之前初始化`nearestDistant[i]`，[`Double.MaxValue`](http://msdn.microsoft.com/en-us/library/system.double.maxvalue.aspx)然后您可以删除`if`.

这样做的副作用是`UsedServices.Count == 0`将`nearestDistant[i]`设置为`Double.MaxValue`。如果对你而言没问题的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:29:27.813

如果您关心表达式评估和分支预测，请不要担心 - 让编译器来优化它。

如果您希望在代码方面对其进行简化，那么[“？” 三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)是一个选项：

```
nearestDistant[i] = j == 0 ? distance : Math.Min(nearestDistant[i], distance); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T02:30:50.667

```
for(int i=0;i<UnUsedServices.Count;i++)
{
    if(UsedServices.Count > 0)
    {
      double distance=GetDistance(UnUsedServices[i].coords, UsedServices[0].coords);
       nearestDistant[i] = distance;
    }

    for(int j=1;j<UsedServices.Count;j++)
    {
        double distance=GetDistance(UnUsedServices[i].coords, UsedServices[j].coords);

        nearestDistant[i] = Math.Min(nearestDistant[i], distance);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T02:31:00.313

在进入“j”循环之前，如何将最近距离 [i] 初始化为一个远大于任何距离值的数字。然后你可以使用

```
 double[] nearestDistant=new double[UnUsedServices.Count];

for(int i=0;i<UnUsedServices.Count;i++)
            {

            nearestDistant[i] = <A REALLY HUGE NUMBER>

            for(int j=0;j<UsedServices.Count;j++)
            {
                double distance=GetDistance(UnUsedServices[i].coords, UsedServices[j].coords);

                nearestDistant[i] = Math.Min(nearestDistant[i], distance);
            }
        } 
```

# msbuild - 在 tfsbuild 中与“AfterCompileSolution”一起使用的条件语句

> ID：12811075
> 
> 赞同：1
> 
> 时间：2012-10-10T02:21:01.157
> 
> 标签：msbuild, tfsbuild

我需要你的帮助。我遇到了一种情况。我正在尝试将某些二进制文件复制到特定文件夹中。我将这些任务添加到 "AfterCompileSolution" 中。我知道这是不正确的，因为它会在每个解决方案编译后执行此步骤。

这是我的情况，我尝试添加像 SolutionFileName 这样的条件，但结果为空。由于 SolutionFileName 参数为空，因此未执行目标。

那么您知道我可以在解决方案构建之间使用的任何参数吗，即我只想在解决方案“A”完成后复制某些二进制文件，并且我希望这些参数成为“AfterCompileSolution”或“BeforeCompileSolution”的一部分

请建议

谢谢萨特什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T14:14:17.173

我已经有一段时间没有这样做了，但我相信您使用以下语法引用文件名：

```
<Target Name="AfterCompileSolution" DependsOnTargets="RandomPreReqTarget">       
    <SomeTask Condition="'%(SolutionToBuildItem.Identity)' == 'ConditionValue'" />
</Target> 
```

您可以做的另一件很酷的事情是在您的 SolutionToBuild 项目中产品额外的属性，并将它们作为元数据引用，例如：

```
<SolutionToBuild Include="$(SolutionRoot)\$(SourceBranch)\RandomDirectory\Project.csproj">
  <Targets>Build</Targets>
  <Properties>OutDir=$(RandomDirectory);Configuration=$(Configuration);Platform=AnyCPU</Properties>
  <GAC>True</GAC>
</SolutionToBuild> 
```

然后，您将能够像这样访问元数据：

```
<Target Name="AfterCompileSolution" DependsOnTargets="RandomPreReqTarget">       
    <SomeTask Condition="'%(SolutionToBuildItem.GAC)' == 'True'" />
</Target> 
```

# javascript - JavaScript 没有收到 this.form 中的值

> ID：12811081
> 
> 赞同：1
> 
> 时间：2012-10-10T02:21:40.640
> 
> 标签：javascript, forms

我正在使用下面的三部分代码：

代码的第一部分：基本上，当用户选择 Google 时会触发一个 javascript 函数 changeSearchEngine。

```
<p id="searchbox">This paragraph will change once javascript is triggered</p>
<form align=right>
<select name="searchengine" onchange="changeSearchEngine(this.form)">
<option value="google">Google</option>
</select>
</form> 
```

这是我在 javascript 中的 changeSearchEngine 函数。

```
function changeSearchEngine(form)
{
    var searchEngine=form.searchengine.value;
    if (searchEngine=="google")
    {
    var url_google='<form method="get" action="http://www.google.com/search" onsubmit="submitGoogle(this.form)" target="_blank"><input type="text" name="q" size="31" maxlength="255" value="" /><input type="submit" value="Google Search"/></form>';
    document.getElementById("searchbox").innerHTML=url_google;
    }
} 
```

在这个时间点上，一切都运行良好。当我选择 Google 时，会出现 google 的搜索框。我可以搜索和一切。

注意有一个 onsubmit="submitGoogle(this.form)" 对吗？我需要将用户搜索词保存到 SQL 表中。所以我在下面有这个 javascript 函数来捕获用户的类型：

```
function submitGoogle(form)
{
    alert("Inside submitGoogle function");
        var searchterm=form.q.value;
    alert(searchterm); //to test. this part didnt capture the value.
} 
```

我设法调用了 submitGoogle 函数，但是尽管使用了 searchterm=form.q.value，但我无法检索 q 的值。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:40:56.193

在您的`onsubmit`处理程序中，您正在传递`this.form`. 但是，`this`已经提到了表单，因为触发`submit`事件的是表单本身。表单字段具有属性，但`form`表单本身没有*属性*`form`。因此，只需将您的处理程序更改为 pass`this`而不是`this.form`.

[http://jsfiddle.net/fmqNj/](http://jsfiddle.net/fmqNj/)

```
onsubmit="submitGoogle(this)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:32:11.367

好的，我找到了一种可能的解决方案。让我回答我自己的问题。

在 changeSearchEngine(form) 函数中，我更改为：

```
var url_google='<form method="get" name="googleform" action="http://www.google.com/search" onsubmit="submitGoogle(this.form)" target="_blank"><input type="text" name="q" size="31" maxlength="255" value="hello" /><input type="submit" value="Google Search"/></form>'; 
```

在 submitGoogle(form) 函数中，我改为： var searchterm=document.googleform.q.value;

但我仍然喜欢其他人评论我的解决方案，无论它在实践中是否优雅。:D

# php - 发布数据不是由代码点火器表单发送的

> ID：12811089
> 
> 赞同：1
> 
> 时间：2012-10-10T02:22:48.703
> 
> 标签：php, codeigniter

我的 CI2.0.2 应用程序有一点问题。

据我所知，它没有从表单中获取任何帖子数据，因此无法运行更新功能，尽管大多数页面都可以正常工作。

表格如下：

```
<?php echo form_open('job/update/', array('id' => 'update', 'name' => 'update')); ?>

<div class="images">

    <?php echo img('application/images/updateJob.png');?>

</div>

<h1>Update Job</h1>
<br><br><br><br>

<div class="fieldset">

    <?php
        if (isset($error))
        {
            echo '<div id ="error">';
            echo '<h2>Error:</h2>';
            echo '<p>'.$error.'</p>';
            echo '</div>';
        }
    ?>

    <input type="hidden" name="c" id='c' value="<?php if(!empty($view[0])) { echo $view[0]; } else { echo "0"; }    ?>">
    <div class="left">
        <h4>Job Details:</h4>
        <div>
            <label for="job_number">Job No:</label>
            <input type="text" name="job_number" id="job_number" value="<?php echo $job['jobno']; ?>" disabled="disabled">
        </div>

        <div>
            <label for="date">Date:</label>
            <input type="text" name="date" id="date" value="<?php echo $job['datetime']->format('d-M-Y'); ?>">
        </div>

        <div>
            <label for="council">Council:</label>
            <input type="text" name="council" id="council" value="<?php echo htmlspecialchars($job['council']); ?>"> *
        </div>

        <div>
            <label for="dano">DA No:</label>
            <input type="text" name="dano" id="dano" value="<?php echo htmlspecialchars($job['dano']); ?>">
        </div>

        <div>
            <label for="client">Client:</label>
            <input type="text" name="client" id="client" value="<?php echo $job['clientid']; ?>" disabled="disabled">           
        </div>

    </div>

    <div class="right" style="margin-left: 390px;">
        <h4>Location:</h4>
        <label for="street_no">Street No:</label>
        <input type="text" name="street_no" id="street_no" value="<?php echo $address['streetno']; ?>"> *
        <br>

        <label for="street_name">Street Name:</label>
        <input type="text" name="street_name" id="street_name" value="<?php echo $address['streetname']; ?>"> *
        <br>

        <label for="street_type">Street Type:</label>
        <select name="street_type" id="street_type">
        <?php
            foreach ($street_types as $type)
            {
                echo '<option';
                if ($type == $address['streettype']) echo ' selected="selected"';
                echo '>'.$type.'</option>';
            }
        ?>
        </select> *
        <br>

        <label for="suburb">Suburb:</label>
        <input type="text" name="suburb" id="suburb" value="<?php echo $address['suburb']; ?>"> *
        <br>

        <label for="postcode">Postcode:</label>
        <input type="text" name="postcode" id="postcode" value="<?php echo $address['postcode']; ?>"> *
        <br>

        <label for="state">State:</label>
        <input type="text" name="state" id="state" value="<?php echo $address['state']; ?>"> *
        <br>

        <label for="country">Country:</label>
        <input type="text" name="country" id="country" value="<?php echo $address['country']; ?>">
        <br>

        <label for="dp">DP:</label>
        <input type="text" name="dp" id="dp" value="<?php echo $address['dp']; ?>">
        <br>

        <label for="lot_no">Lot No:</label>
        <input type="text" name="lot_no" id="lot_no" value="<?php echo $address['lotno']; ?>">
        <br>

        <label for="po_box">PO Box:</label>
        <input type="text" name="po_box" id="po_box" value="<?php echo $address['pobox']; ?>">

    </div>

    <div>
        <input type="submit" id="submit" name="submit" value="Submit" class="button">
        <p>* = Required fields</p>
    </div>

</div>

<?php echo form_close();?> 
```

而控制器的更新部分如下：

```
/**
 * Update an existing job.
 * @param   int $job_number     The number of the job to update.
 */
public function update($job_number=0)
{
    $this->load->model('Job_model');
    $job     = array();
    $address = array();

    // Get post data.
    $job['joblocation'] = '';
    $job['jobno']       = $this->input->post('job_number');
    $job['datetime']    = new DateTime($this->input->post('date'));
    $job['dano']        = $this->input->post('dano');
    $job['council']     = $this->input->post('council');
    echo $job['jobno'];
    echo $job['dano'];
    echo $job['council'];
    $address['streetno']    = $this->input->post('street_no');
    $address['streetname']  = $this->input->post('street_name');
    $address['suburb']      = $this->input->post('suburb');
    $address['country']     = $this->input->post('country');
    $address['postcode']    = $this->input->post('postcode');
    $address['state']       = $this->input->post('state');
    $address['dp']          = $this->input->post('dp');
    $address['lotno']       = $this->input->post('lot_no');
    $address['pobox']       = $this->input->post('po_box');
    $address['streettype']  = $this->input->post('street_type');
    echo "here2";
    if (isset($_POST['submit']))
    {
        $this->Job_model->update($job);
        echo "here";
        redirect('job/');
    }

    // Otherwise, get the data from the database.       
    else
    {
        $job = $this->Job_model->search($job_number);
        $job = $job[0];
        $job['datetime'] = new DateTime($job['datetime']);
        $address = $this->Job_model->get_address($job['joblocation']);
        $address = $address[0];
    }

    // Get the street types.
    $street_types = array();
    $this->load->model('staff_model');
    $streets = $this->staff_model->get_street_types();

    foreach ($streets as $street) 
    {
        $street_types[$street['streettype']] = $street['streettype'];
    }

    // Load the client list.
    $clients = array();
    $this->load->model('client_model');
    $people = $this->client_model->get_client_person_list();
    $companies = $this->client_model->get_client_company_list();

    // Allocate view data.
    $viewdata = array();
    $viewdata['job'] = $job;
    $viewdata['street_types'] = $street_types;
    $viewdata['address'] = $address;
    $viewdata['people'] = $people;
    $viewdata['companies'] = $companies;

    $this->layout->view('job/update', $viewdata);
} 
```

任何想法为什么会发生这种情况？

提前致谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:47:00.257

尝试更改您在此行中使用的引号：

```
<input type="hidden" name="c" id='c' value="<?php if(!empty($view[0])) { echo $view[0]; } else { echo '0'; }    ?>" /> 
```

您在 0 周围使用双引号的方式是您破坏了该 php，因为第一个将关闭开盘值报价。

# java - 使用十六进制在 Java 中绘图

> ID：12811090
> 
> 赞同：3
> 
> 时间：2012-10-10T02:22:56.177
> 
> 标签：java, drawing, hex

我在俄罗斯方块游戏的代码中看到了这一点，我想知道这些值如何能够绘制线、T 形、S 形、Z 形、L 形、倒 L 形和正方形。

我得到四个参数可能是因为每件需要四个块。但他们是如何提出这样的价值观的呢？这些也与颜色有关吗？

```
int blocks[][] = {
    {0x0f00, 0x4444, 0x0f00, 0x4444}, // LINE
    {0x04e0, 0x0464, 0x00e4, 0x04c4}, // T
    {0x4620, 0x6c00, 0x4620, 0x6c00}, // S
    {0x2640, 0xc600, 0x2640, 0xc600}, // Z
    {0x6220, 0x1700, 0x2230, 0x0740}, // 7
    {0x6440, 0x0e20, 0x44c0, 0x8e00}, // inverted 7
    {0x0660, 0x0660, 0x0660, 0x0660}, // square
} 
```

我是 Java 新手，我想学习使用这些值“绘制”。非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T02:34:54.247

表格的每一行都是一个形状。每列是形状的不同旋转。例如，无论您如何旋转正方形，它都是相同的。线（第一行）在两个模式之间翻转。我在网络搜索中找到了这个：

[http://codeincomplete.com/posts/2011/10/10/javascript_tetris/](http://codeincomplete.com/posts/2011/10/10/javascript_tetris/)

# hadoop - 我可以将本地文件的内容传递给 Hadoop Pipes 作业吗

> ID：12811091
> 
> 赞同：1
> 
> 时间：2012-10-10T02:23:04.370
> 
> 标签：hadoop, hadoop-streaming

我需要使用存储在本地文本文件中的信息来初始化映射器中的对象。有没有这样做的机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:50:48.563

您可以将文件上传到 HDFS，然后将其添加到分布式缓存中，使其可供映射器从工作目录加载。

将本地文件上传到 HDFS 并将其放置在分布式缓存中由通用`-files`选项处理

```
hadoop pipes -files localfile.txt <other pipes options> 
```

现在要在映射器中加载文件，只需打开一个同名的文件（您可以假设它位于当前工作目录中）（localfile.txt）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T05:47:10.387

将文件本地存储在客户端上。读取并序列化它并将其添加到 Job conf 对象中。在 mapper 和 reducer 的 setup 方法中，从 conf 对象中读取值并反序列化。

COnf 对象只存储字符串。因此，您需要在对其进行序列化时将其转换为 String 对象。

# exception - Ada CONSTRAINT_ERROR 在“应该”时没有被提出

> ID：12811093
> 
> 赞同：5
> 
> 时间：2012-10-10T02:23:28.143
> 
> 标签：exception, ada, gnat

我一直在看这个[Ada 95 教程](http://www.infres.enst.fr/~pautet/Ada95/e_c03_p4.ada)。我在读到可以定义一个范围不同于标准范围的类型，如果程序试图超出这个范围，它将引发错误。在我自己的程序上工作时，我注意到如果定义中范围的结尾落在其基础类型的边界上，那么在分配超出该范围的值时，程序将不会引发 CONSTRAINT_ERROR。相反，它会愉快地继续前进，然后环绕。我编写了一个程序来明确显示这一点。

有谁知道解释这种行为的 Ada 规则？

-柯克

这是我终端的输出，源代码在下面。

```
me@acheron:~/Dropbox/programs/ada$ gnatmake constraints.adb -f
gcc-4.6 -c constraints.adb
gnatbind -x constraints.ali
gnatlink constraints.ali
me@acheron:~/Dropbox/programs/ada$ ./constraints

Type ON has size:           7
It has a min/max of:           0        127
It's base has a min/max of:        -128        127

Type UNDER has size:           7
It has a min/max of:           0        126
It's base has a min/max of:        -128        127
The value of No_Error is:         245

raised CONSTRAINT_ERROR : constraints.adb:58 range check failed
me@acheron:~/Dropbox/programs/ada$ 
```

源代码：

```
with Ada.Text_IO, Ada.Integer_Text_IO;
use Ada.Text_IO, Ada.Integer_Text_IO;

Procedure Constraints is

    type UNDER is range 0..126;
    type ON is range 0..127;
    type OVER is range 0..128;    

    Error : UNDER := 0;
    No_Error : ON := 0;

    Index : INTEGER := 0;

begin
    New_Line;
    Put("Type ON has size: ");
    Put(INTEGER(ON'SIZE));
    New_Line;
    Put("It has a min/max of: ");
    Put(INTEGER(ON'FIRST));
    Put(INTEGER(ON'LAST));
    New_Line;
    Put("It's base has a min/max of: ");
    Put(INTEGER(ON'BASE'FIRST));
    Put(INTEGER(ON'BASE'LAST));

    New_Line;
    New_Line;

    Put("Type UNDER has size: ");
    Put(INTEGER(UNDER'SIZE));
    New_Line;
    Put("It has a min/max of: ");
    Put(INTEGER(UNDER'FIRST));
    Put(INTEGER(UNDER'LAST));
    New_Line;
    Put("It's base has a min/max of: ");
    Put(INTEGER(UNDER'BASE'FIRST));
    Put(INTEGER(UNDER'BASE'LAST));

    Safe_Loop:
    loop
        No_Error := No_Error + 1;
        Index := Index + 1;
        --Put(INTEGER(No_Error));
        exit Safe_Loop when Index = 245;  
    end loop Safe_Loop;

    New_Line;
    Put("The value of No_Error is: ");
    Put(INTEGER(No_Error));

    Index := 0;

    Crash_Loop:
    loop
        Error := Error + 1;
        Index := Index + 1;
        exit Crash_Loop when Index = 245;
    end loop Crash_Loop;

end Constraints; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:01:28.880

根据[文档](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gnat_ugn_unw/Run_002dTime-Checks.html)：

> 再次注意默认情况下它`-gnato`是关闭的，因此在默认模式下不执行溢出检查。这意味着开箱即用，使用默认设置，GNAT 不会执行 Ada 参考手册中语言描述所期望的所有检查。如果您希望执行所有约束检查，如本手册中所述，则必须在`gnatmake`or`gcc`命令上显式使用 -gnato 开关。

也就是说，该文件还声称：

> 基本上规则是在默认模式（`-gnato`未使用）下，生成的代码确保所有整数变量都保持在其声明的范围内，或者如果没有声明的范围则在基本范围内。这可以防止任何严重的问题，例如数组操作的索引超出范围。¶ 默认模式下未检查的是溢出，导致在范围内但不正确的值。

在您描述的情况下，这似乎是错误的，因为`No_Error`确实最终完全超出了其范围。因此，这似乎超出了“语言描述中没有 [...] 的预期”，而进入了“编译器错误”的领域；但至少你应该能够通过添加`-gnato`标志来修复它。

# asp.net - 运行选择语句的asp.net sql错误

> ID：12811098
> 
> 赞同：0
> 
> 时间：2012-10-10T02:24:20.300
> 
> 标签：asp.net, sql-server

我按照 youtube 上的教程编写了登录和注册代码，但出现了错误。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;

public partial class Registration : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["earchConnectionString"].ConnectionString);
            con.Open();
            string cmdStr = "Select count(*) from user where UserName='" + TextBoxUN.Text + "'";
            SqlCommand userExist = new SqlCommand(cmdStr, con);
            int temp = Convert.ToInt32(userExist.ExecuteScalar().ToString());
            con.Close();
            if (temp == 1)
            {
                Response.Write("User Name Already Exist....<br /> Please Choose Another User Name.");
            }
        }

    }
    protected void Submit_Click(object sender, EventArgs e)
    {
        /*if (IsPostBack)
        {
            Response.Write("You have successfully registered");
        }*/
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["earchConnectionString"].ConnectionString);
        con.Open();
        string insCmd = "Insert into user (UserName, Password, EmailAddress, FullName, level) values (@UserName,@Password,@EmailAddress, @FullName, @level)";
        SqlCommand insertUser = new SqlCommand(insCmd, con);
        insertUser.Parameters.AddWithValue("@UserName", TextBoxUN.Text);
        insertUser.Parameters.AddWithValue("@Password", TextBoxPass.Text);
        insertUser.Parameters.AddWithValue("@EmailAddress", TextBoxEA.Text);
        insertUser.Parameters.AddWithValue("@FullName", TextBoxFN.Text);
        insertUser.Parameters.AddWithValue("@level", level.SelectedItem.ToString());

        try
        {
            insertUser.ExecuteNonQuery();
            con.Close();
            Response.Redirect("Login.aspx");
        }
        catch (Exception er)
        {
            Response.Write("Something wrong");
        }
        finally
        {
            //Any Special Action You Want To Add
        }

    }
} 
```

但有错误信息：

关键字“用户”附近的语法不正确。

> 说明：执行当前 Web 请求期间发生未处理的异常。> 请查看堆栈跟踪以获取有关错误及其来源的更多信息 > 代码。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：关键字“用户”附近的语法不正确。
> 
> 源错误：
> 
> 第 18 行：string cmdStr = "Select count(*) from user where UserName='" + TextBoxUN.Text + "'"; 第 19 行：SqlCommand userExist = new SqlCommand(cmdStr, con); 第 20 行：int temp = Convert.ToInt32(userExist.ExecuteScalar().ToString()); 第 21 行：con.Close(); 第 22 行：如果（温度 == 1）
> 
> 源文件：c:\inetpub\web1\Registration.aspx.cs 行：20
> 
> 堆栈跟踪：
> 
> [SqlException (0x80131904): 关键字'user'附近的语法不正确。] System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2042118
> System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5043644
> System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
> System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2294
> System.Data.SqlClient.SqlDataReader。消费MetaData() +33
> System.Data.SqlClient.SqlDataReader.get_MetaData() +86
> System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +311
> System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +987
> System.Data.SqlClient .SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162
> System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +32 System.Data。 SqlClient.SqlCommand.ExecuteScalar() +139
> Registration.Page_Load(Object sender, EventArgs e) in c:\inetpub\web1\Registration.aspx.cs:20
> System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
> System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control。 OnLoad(EventArgs e) +91
> System.Web.UI.Control.LoadRecursive() +74
> System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:31:38.183

用户是保留关键字。把它放在方括号里，你应该很好。

```
select count(*) from [user] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:51:50.787

将方括号与表名、列一起使用始终是一个好习惯。

此外，在查询中使用用户输入时使用 SqlParameters 以避免 SQL 注入。

# ios - 使用 Parse.com 上传器上传的文件是否计入我的 API 请求限制？

> ID：12811099
> 
> 赞同：0
> 
> 时间：2012-10-10T02:24:30.377
> 
> 标签：ios, parse-platform

我有一个 1m 行的 csv，我希望使用数据上传器将其上传到我的 Parse.com 应用程序。这会在我的请求限制上显示为 100 万个 API 请求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:24:30.377

为了回答我自己的问题，Parse.com 的 Kevin 在 30 秒内回复了我，所以我可以在这里发布他的回复：

> 是的，但这只是整个上传的 1 个 api 请求，所以这并不重要。

# mysql - 在 mysql db 中加载 16,000 行数据的快速方法

> ID：12811103
> 
> 赞同：0
> 
> 时间：2012-10-10T02:25:09.910
> 
> 标签：mysql, vb.net, insert, bulkinsert

目前我在数组中有 16k 行数据，我正在使用 for 循环遍历数据并执行 INSERT 语句。换句话说，每个循环在mysql中执行一个“INSERT”语句。这样做了 16000 次。这需要很长时间。

有没有更好的方法来插入批量数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:37:03.767

我使用此代码（使用 sqlParameters）在 SQL 中完成了此操作：

```
 Dim Command As New SqlCommand(_
            "insert into hilmarc_cem_items " & _
            "(CEMID, " & _
            "ItemCode, " & _
            "UnitPrice, " & _
            "Quantity, " & _
            "UOM) "     

    Dim ItemCodes() As String = Request.Form.GetValues("ItemCode")
    Dim UnitPrices() As String = Request.Form.GetValues("UnitPrice")
    Dim Quantities() As String = Request.Form.GetValues("Quantity")
    Dim UOMs() As String = Request.Form.GetValues("UOM")

    For Counter = 0 To ItemCodes.Length - 1
        Command.CommandText &= "select @CEMID, @ItemCode" & Counter & ", @UnitPrice" & Counter & ", @Quantity" & Counter & ", @UOM" & Counter & " "
        Command.Parameters.Add("@ItemCode" & Counter, Data.SqlDbType.NVarChar).Value = ItemCodes(Counter)
        Command.Parameters.Add("@Quantity" & Counter, Data.SqlDbType.Decimal).Value = Quantities(Counter)
        Command.Parameters.Add("@UOM" & Counter, Data.SqlDbType.NVarChar).Value = UOMs(Counter)
        Command.Parameters.Add("@UnitPrice" & Counter, Data.SqlDbType.Decimal).Value = UnitPrices(Counter)
        If Not Counter = ItemCodes.Length - 1 Then
            Command.CommandText &= "union all "
        Else
            Command.CommandText &= ";"
        End If
    Next 
```

这个想法是有一个单一的查询，从数组中获取所有数据并将它们作为参数添加到 sqlCommand 中。查询将是这样的：

```
 insert into myTable 
        (CEMID, 
        ItemCode,
        UnitPrice,
        Quantity, 
        UOM) 
    select @CEMID, @ItemCode0, @UnitPrice0, @Quantity0, @UOM0
    union all
    select @CEMID, @ItemCode1, @UnitPrice1, @Quantity1, @UOM1
    union all
    select @CEMID, @ItemCode1, @UnitPrice1, @Quantity1, @UOM1
    union all 
```

我不确定这在 MySQL 中是否有效，只需将代码转换为 MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:22:35.970

尝试生成批量插入语句。语句的长度应小于`max_allowed_packet`一个数据包或任何生成/中间字符串的最大大小。

如果可能 - 暂时禁用或删除表中的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T02:29:39.183

您可以按照Pascal MARTIN[的帖子尝试此操作：](https://stackoverflow.com/questions/5529529/mysql-bulk-insert)

```
insert into your_table (field1, field2, field3)
values 
  (value1_1, value1_2, value1_3), 
  (value2_1, value2_2, value2_3), 
  (value3_1, value3_2, value3_3) 
```

# boolean - 异或关联性布尔代数证明

> ID：12811108
> 
> 赞同：0
> 
> 时间：2012-10-10T02:25:40.150
> 
> 标签：boolean, xor, algebra

`(A ⊕ B) ⊕ C = A ⊕ (B ⊕ C)`使用布尔代数证明。我制作了真值表并找到了产品的总和，但不知道如何显示它们的相等。

然后我试着做

```
(a xor b) xor c  (a' - is NOT(A)/inverse)
(a'b + ab') ⊕ C
c' (a'b + ab') + c[(a'b + ab')'] 
```

不能从那里走，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:58:52.463

`A^B`=`(AB'+A'B)`

`(AB)'`=`(A'+B')`

* * *

`(A^B)^C`

=`(AB'+A'B)C' + (AB'+A'B)'C`

=`(AB'C'+A'BC')+((AB')'(A'B)')C`

=`(AB'C'+A'BC')+(A'+B)(A+B')C`

=`(AB'C'+A'BC')+(A'(A+B')+B(A+B'))C`

=`(AB'C'+A'BC')+(A'B' + AB)C`

=`(AB'C'+A'BC'+A'B'C + ABC)`

=`A(B'C'+BC)+A'(BC'+B'C)`

= `A(B'C'+BC)+A'(B^C)` (1)

`(B^C)'`

=`(BC'+B'C)'`

=`(BC')'(B'C)'`

=`(B'+C)(B+C')`

= `(B'C'+BC)`(2)

从`(2)`, `(1)`= `A(BC'+B'C)' + A'(B^C)`= `A(B^C)' + A'(B^C)`= `A^(B^C)`#

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:37:20.620

首先定义`XOR`和`XNOR`：

```
 A^B   = AB' + A'B     ... (1)
 (A^B)' = AB  + A'B'    ... (2) 
```

现在`(A^B)C`使用 (1) 和 (2) 展开：

```
 (A^B)C = (A^B)C' + (A^B)'C
        = (AB' + A'B)C' + (AB + A'B')C
        = AB'C' + A'BC' + ABC + A'B'C 
```

收集术语并简化：

```
 = A(B'C' + BC) + A'(BC' + B'C)
        = A(B^C)' + A'(B^C)
        = A^(B^C) 
```

量子点

# c# - 编写一个移位数字模式

> ID：12811113
> 
> 赞同：1
> 
> 时间：2012-10-10T02:26:48.347
> 
> 标签：c#, numbers, design-patterns

> **可能重复：**
> [生成集合的排列（最有效）](https://stackoverflow.com/questions/11208446/generating-permutations-of-a-set-most-efficiently)

我正在研究一个古老的编程挑战，并试图想出一个解决方案。挑战已经过时了，而且已经有好几年了，我这样做只是为了培养技能。

我需要按以下模式生成数字：

*   123456789
*   123456798
*   123456879
*   123456897
*   123456978
*   123456987

继续前进，始终使用相同的 9 个数字，从不重复它们，并始终抓住下一个数字。

在过去的 2 个小时里，我一直在绞尽脑汁，想不出一个好的编程模式来解决这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:51:40.487

作为解决方案如何：

```
var numerals = Enumerable.Range(1, 9).ToArray();

var query =
    from n1 in numerals
    from n2 in numerals.Except(new [] { n1, })
    from n3 in numerals.Except(new [] { n1, n2, })
    from n4 in numerals.Except(new [] { n1, n2, n3, })
    from n5 in numerals.Except(new [] { n1, n2, n3, n4, })
    from n6 in numerals.Except(new [] { n1, n2, n3, n4, n5, })
    from n7 in numerals.Except(new [] { n1, n2, n3, n4, n5, n6, })
    from n8 in numerals.Except(new [] { n1, n2, n3, n4, n5, n6, n7, })
    from n9 in numerals.Except(new [] { n1, n2, n3, n4, n5, n6, n7, n8, })
    select n1 * 100000000
        + n2 * 10000000
        + n3 * 1000000
        + n4 * 100000
        + n5 * 10000
        + n6 * 1000
        + n7 * 100
        + n8 * 10
        + n9; 
```

事实证明，这在我的计算机上在 864 毫秒内生成所有结果的速度非常快。

以下是前 10 个结果：

```
123456789 
123456798 
123456879 
123456897 
123456978 
123456987 
123457689 
123457698 
123457869 
123457896 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:28:12.977

我确实提出了两个解决方案：

**缓慢的方式**

```
private static void GetAnswerByLoopingNumbers(Stopwatch timer) 
{
    int _counter = 1;
    for (int number = 123456789; number <= 987654321; number += 9)
    {
        string numToCheck = number.ToString();
        if (ContainsZero(numToCheck) || ContainsDuplicates(numToCheck))
            continue;
        _counter++;
        if (_counter != 100000)
            continue;
        timer.Stop();
        CheckAnswer(numToCheck, timer);
        break;
    } }

private static bool ContainsDuplicates(IEnumerable<char> numToCheck)
{
    IEnumerable<char> check = numToCheck as char[] ?? numToCheck.ToArray();
    foreach (char number in check)
    {
        int count = 0;
        foreach (char c in check)
        {
            if (c == number)
                count++;
        }
        if (count > 1)
            return true;
    }
    return false;
}

private static bool ContainsZero(IEnumerable<char> numToCheck)
{
    foreach (char number in numToCheck)
    {
        if (number == '0')
            return true;
    }
    return false;
} 
```

**快速的方法**

```
private static void GetAnswerByCreatingPermutations(Stopwatch timer)
{
    int _counter = 1;
    int[] baseNumberSet = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
    while (_counter < 100000)
    {
        int firstSwapNumber = GetFirstNumberToSwap(baseNumberSet);
        int secondSwapNumber = GetSecondSwapNumber(firstSwapNumber, baseNumberSet);
        if (baseNumberSet[firstSwapNumber] >= baseNumberSet[secondSwapNumber])
            continue;
        SwapNumbers(firstSwapNumber, secondSwapNumber, baseNumberSet);
        ReverseSequenceOfNumbersAfterFirstSwapNumber(firstSwapNumber, baseNumberSet);
        _counter++;
    }
}

private static int GetFirstNumberToSwap(int[] baseNumberSet)
{
    int largestIndex = 0;

    // Check first 8 numbers
    for (int index = 0; index < 8; index++)
    {
        // Check to see if current number, is less than the next number
        if (baseNumberSet[index] < baseNumberSet[index + 1])
            largestIndex = index;
    }
    // Return the last number in sequence, to be smaller than the next number in the sequence
    return largestIndex;
}

private static int GetSecondSwapNumber(int firstSwapNumber, int[] baseNumberSet)
{
    int secondLargestIndex = 0;

    // Check all nine numbers
    for (int index = 0; index < 9; index++)
    {
        // Check to see if number is bigger than first swap number
        if (baseNumberSet[firstSwapNumber] < baseNumberSet[index])
            secondLargestIndex = index;
    }
    // Return last number in sequence that is larger than the first swap number
    return secondLargestIndex;
}

private static void ReverseSequenceOfNumbersAfterFirstSwapNumber(int firstSwapNumber, int[] baseNumberSet)
{
    if (firstSwapNumber >= 7)
        return;
    int lengthOfSequenceToSwap = 8 - firstSwapNumber;
    if (lengthOfSequenceToSwap <= 1)
        return;
    Array.Reverse(baseNumberSet, firstSwapNumber + 1, lengthOfSequenceToSwap);
}

private static void SwapNumbers(int firstSwapNumber, int secondSwapNumber, int[] baseNumberSet)
{
    baseNumberSet[firstSwapNumber] ^= baseNumberSet[secondSwapNumber];
    baseNumberSet[secondSwapNumber] ^= baseNumberSet[firstSwapNumber];
    baseNumberSet[firstSwapNumber] ^= baseNumberSet[secondSwapNumber];
} 
```

# crystal-reports - Crystal 报表分层组缩进仅用于一个字段

> ID：12811115
> 
> 赞同：5
> 
> 时间：2012-10-10T02:26:51.640
> 
> 标签：crystal-reports

如何在水晶报表中为层次组只设置一个字段的缩进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:26:46.330

1.  在 Report 菜单中选择 Hierarchical Grouping Options，将 Group Indent 设置为 0。

2.  右键单击组标题字段并选择大小和位置

3.  单击 X 位置值字段旁边的条件公式按钮。

4.  这是您将使用的公式

    HierarchyLevel(GroupingLevel({[Hierarchy Name]节点ID}))*200

在这里您可以看到有关[Crystal Reports 中层次结构的更多详细信息](http://wiki.sdn.sap.com/wiki/display/BOBJ/BW+Hierarchies+in+Crystal+Reports)

# macos - 为什么 Mac OS X 不能将重复的 USB 消息传递给应用程序？

> ID：12811119
> 
> 赞同：1
> 
> 时间：2012-10-10T02:27:07.983
> 
> 标签：macos, usb, messages, hid

我们观察到，将设备连接到 Windows 时，所有 USB 消息都按预期来来去去。但是在 Mac OS X 下，返回与最后一条消息相同数据的设备将被“吞下”，不会传递给调用应用程序。在我们的设备上，我们已经对我们发回的每条消息进行了一些切换，以确保操作系统不会立即删除这些重复的消息。该设备不是鼠标/键盘，而是使用 HID。

*   其他人有类似的经历吗？
*   为什么 Mac OS X 会这样做？
*   Mac OS X 应用程序有没有办法关闭这个“重复数据删除功能”？

# matlab - 无法在 Matlab 中求解非线性方程

> ID：12811120
> 
> 赞同：1
> 
> 时间：2012-10-10T02:27:10.923
> 
> 标签：matlab, symbolic-math

我正在使用带有**求解功能的****Matlab Symbolic Toolbox**并尝试求解 4 个方程的非线性系统，

 **有 4 个变量：

```
x1 y1 x2 y2 
```

和 4 个参数

```
 delta1 delta2 alpha beta 
```

下图描述了这些方程： ![非线性方程](../Images/2ff6a52c6cec3c3fbbf3fcdca7cc4edc.png)

这是 Matlab 代码：

```
syms x1 x2 y1 y2 alpha beta delta1 delta2

[x1,y1,x2,y2] = solve('delta1 * x1^alpha * y1^(1 - alpha) = (1 - x2)^alpha * (1 - y2)^(1-alpha)',...
    'delta2 * x2^alpha * y2^(1 - alpha) = (1 - x1)^beta* (1 - y1)^(1-beta)',...
    'alpha / (1-alpha) * (1 - y2) / (1 - x2) = beta / (1 - beta) * y2/x2',...
    'alpha / (1-alpha) * y1 / x1 = beta / (1 - beta) * (1 - y1) / (1 - x1)','x1','y1','x2','y2') 
```

Matlab 返回：

> 警告：找不到明确的解决方案。
> 
> > 在 81 处解决

但是，如果我尝试将两者都`alpha`替换`beta`为`0.5`.

```
[x1,y1,x2,y2] = solve('delta1 * x1^0.5 * y1^ 0.5 = (1 - x2)^0.5* (1 - y2)^0.5',...
    'delta2 * x2^0.5 * y2^0.5 = (1 - x1)^0.5* (1 - y1)^0.5',...
    '(1 - y2) / (1 - x2) = y2/x2',...
    'y1 / x1 = (1 - y1) / (1 - x1)','x1','y1','x2','y2') 
```

然后Matlab会给出结果。

所以我想知道：

1.  方程真的无解吗？

2.  如果可以解决，我是否以错误的方式使用 Matlab Symbolic Toolbox？Matlab其实可以解决的。

3.  如果Matlab没有足够的能力来解决它，还有其他工具可以解决非线性方程组吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:56:34.353

几乎可以肯定，不，这些不是分析可解的。除非 alpha 和 beta 是 1 或 0（或者显然是 1/2），否则这些方程将等价于解析解的阶数太高，尽管如果不仔细观察我无法确定这一点。但是对于一般的真实阿尔法，这做的太多了。

是的，我知道计算机体积大、速度快、功能强大。他们可以做任何事，对吧？但是看看当你尝试解决这样的联立多项式方程时会发生什么。

例如，当您消除其中一个未知数时，两个未知数中的两个二次方程将简化为四阶方程。具有非常数系数的四阶多项式方程是可解的。但是你有四个方程，每个方程本质上都是二次的。（每个方程中都有变量的乘积。）因此，如果您尝试符号求解，其中 4 个将等效于八阶多项式。它将具有一般的非常数系数。而且我们知道，5 阶或更高阶的多项式通常没有解析解。因此，尽管您可能很幸运，但也许对于 alpha 和 beta 的某些特殊值，几乎可以肯定，没有这样的分析解决方案。

而对于一般的真实阿尔法，情况更糟。根本不存在解决方案的期望。当您尝试时，它失败的事实支持了这一点。但是，嘿，一台更大的计算机可能会找到答案。对不起，但不是真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:18:02.067

你应该试试 Matlab 的`mupad`命令。它打开了一个类似于 Maple 的符号编程环境，比符号库强大得多。如果你的方程有解（即使是一些虚构的，或者如果它们有解是非常具体的情况），那么符号环境肯定会找到它们。

试试看！

**编辑：** 看到@woodchips 的答案（这似乎比我知道的多得多！）您也可以尝试求解已知 alpha beta 范围的方程。您可以假设它们将具有什么值并从一个范围内迭代。我只是不知道它是否会起作用，这正是我在你的情况下会尝试做的。

仍然不要放弃尝试`mupad`，它可能会起作用（如果您做出假设，则在空间上，例如：`assume alpha real`命令类型。只需查看帮助）**

# ruby-on-rails - 想要获取acts_as_tree的所有id的列表

> ID：12811123
> 
> 赞同：0
> 
> 时间：2012-10-10T02:27:43.553
> 
> 标签：ruby-on-rails, acts-as-tree

我有一个可以有页眉的类别，它是acts_as_tree。结构可能是这样的：

```
class Category < ActiveRecord::Base
  has_many :headers
end

class Header < ActiveRecord::Base
  belongs_to :category
  acts_as_tree :order => :position
end

Category:
  Header
  Header
    Header
      Header
      Header
  Header 
```

我想提取一个类别的所有标题的 id。

有什么是自动为我完成的吗？或者有没有简单的遍历方式？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:33:15.430

首先检索您需要的类别，例如：

```
@category = Category.find(params[:id]) 
```

然后

```
ids = @category.headers.map(&:id) 
```

此行将返回特殊类别的标头 ID 数组

# android - Android 中基于 SSH 的 X-Applications

> ID：12811124
> 
> 赞同：26
> 
> 时间：2012-10-10T02:27:47.347
> 
> 标签：android, ssh, xserver

我想问一下关于通过 SSH 运行 X 应用程序的问题，如下所示。

我有使用 Gnome 2x 运行 SL6.3 的 Linux 桌面。在运行 CM9 的 Android 平板电脑上，我有适用于 Android 的 Connectbot 和 X-Server。我可以通过 SSH 成功使用 Connectbot 登录 Linux 机器。

我在 Linuxbox 上的 /etc/ssh/sshd_config 中设置了 X-forwarding 的选项。（X11Forwarding 是）。

现在，当我使用 -X 选项 ssh -X username@hostname:port 时，即使我提供了正确的密码，Connectbot 也会重复询问密码，并说 - '身份验证方法'密码'失败。

如何在平板电脑中通过 SSH 成功运行 X 应用程序？环境是家庭无线网络。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-26T23:51:42.593

我知道这个线程很旧......但是，我想确保我在 paulsm4 的回答中澄清了一些误导性的东西......

X 是倒退的……您没有连接到 X 服务器。您在本地机器上运行服务器（他所说的客户端实际上是服务器）。当您连接到安装了 X 库的远程 Nix 机器，并将 -X 开关添加到 SSH 命令时，ssh 会将 X 请求转发给您。在另一端运行的程序（Gnome、Chrome、PyCharm 等）将成为您的 X 客户端，并且它将被上游返回到包含 X 服务器的桌面。这是一个序列图：

```
User                                         Remote
-----------------------------------------------------------------------
User Inits SSH -X Session -----------------> SSH Server Auth User
                                                      |
                                                      V
SSH Session is established <---------------- SSH User is Authenticated
             |
             V
User Initiates App on server --------------> App Starts Running
                                                      |
                                                      V
                                             App Writes output to X Server
                                                      |
                                                      V
Xorg receives write commands <-------------- SSH Tunnels that back to User
             |
             V
Writing occurs on desktop
----------------------------------------------------------------------- 
```

大多数时候，X 服务器和 X 客户端是相同的（就像在本地桌面上发生的那样）。因此，一旦客户端写入 X，本地 X 服务器就会写入屏幕。显示过程实际上是在用户的计算机上完成的，无论它在哪里，您的计算机都会成为服务器。疯了吧？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T19:59:07.940

您可以在您的 android 盒子上安装以下 X11Server

[https://github.com/nwrkbiz/android-xserver](https://github.com/nwrkbiz/android-xserver)

并遵循以下几个步骤：

1.  启动 android-xserver
2.  启动像 ConnectBot 这样的 ssh 客户端（远程机器应该有`ForwardX11 yes`）
3.  运行 xclock, xterm ... 任何其他 X11 实用程序

请注意，因为 android-xserver，X11 实现它不是一个完整的。

# javascript - 通过 JavaScript 在 Zurb's Foundation 中更改选择框的值

> ID：12811126
> 
> 赞同：12
> 
> 时间：2012-10-10T02:28:32.887
> 
> 标签：javascript, zurb-foundation

我很难更改 Zurb 基础中选择框的值。我正在使用自定义表单，它只是隐藏实际的选择框并使用无序列表作为选择框。我的问题是更改选择框值的常用方法不起作用：

```
$('#selectboxID').val('something') 
```

上面的代码假设选择框中每个选项的值与文本相同：

```
<option value="1">1</option> 
```

我也试过：

```
$($('.dropdown ul li')[1]).addClass('current') 

$($('.dropdown ul li')[0]).removeClass('current') //remove current class from the other one 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-15T12:31:20.770

There's also alternative use case when you're binding on change event yourself, you might not want to trigger it. Code to just force a refresh on select:

```
Foundation.libs.forms.refresh_custom_select(@jQueryElement, true) 
```

where @jQueryElement is a original hidden select.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T02:41:07.870

您必须在更改所选索引后触发“更改”事件。

例子：

```
// Change selected option
$('#selectboxID').val('something');
// Or use selectedIndex: $("#selectboxID")[0].selectedIndex = 0;

// Fire change event
$('#selectboxID').trigger('change'); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-22T05:50:40.603

最近在 Foundation 代码中对更改事件的处理方式进行了一些修改。

你仍然可以使用 trigger() 方法实现你想要的，但你必须添加一个“强制刷新”标志：

```
$('#selectboxID').trigger('change', true); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-20T12:57:33.617

# 如果您使用的是 Foundation 3：

更新到最新的 Foundation 3 版本。

设置`selectedIndex`，使用 JQuery`val()`或任何触发`change`事件的东西都是开箱即用的。

# 如果您使用的是 Foundation 4：

这似乎是一种回归。作为 -*希望是临时*的- 解决方法，您可以使用该方法强制更新自定义选择`refresh_custom_selection`，例如：

```
Foundation.libs.forms.refresh_custom_selection($('select')) 
```

**注意：**是`refresh_custom_selection`，不是`refresh_custom_select`！

没有必要使用后者（或`trigger('change', true)`），因为它们都**完全重建**了自定义选择，即它们重新复制了您的选择选项，这涉及大量的 DOM 操作，并且会大大减慢速度。（取决于您选择的选项和其他代码的大小）

另一方面`refresh_custom_selection`，只是更新显示的值，这是一个更轻量级的操作。

PS：代替`refresh_custom_selection`你也可以使用

```
$('a.current', $select.next()).text($('option:selected', $select).text()); 
```

但是该代码对生成的 HTML 进行了假设，因此最好坚持使用提供实用程序方法

# c++ - 使用多重映射

> ID：12811127
> 
> 赞同：2
> 
> 时间：2012-10-10T02:28:38.537
> 
> 标签：c++, multimap

嘿伙计们，我的程序有问题，我正在尝试使用多重映射读取将多个右手规则放入左手规则的语法。问题是，假设规则是：a -> al be ze 它映射 [a, al] 并忽略其余部分。不考虑密钥，我想为该密钥赋予不同的属性。想知道你们是否能发现我似乎找不到的错误。我是否错误地使用了多重映射？谢谢你。

```
map<string, string> rule;   // global var  
void righthandside(){       // get rhs of grammar rule

        char c;
    skipSpace();
    c = getchar();
    if(isalpha(c)){
        checkforE = false;  // rule not epsilon
        while(isalnum(c)){
            righths += c;
            c = getchar();
        }
        righths += '\0';
        rule.insert(pair<string, string>(LHS[lhs], righths)); 
        righths.clear();
        righthandside();
    }
    else if(c == '#'){
        if(checkforE == true)
            rule.insert(pair<string, string>(LHS[lhs], epsilon));  // rule states NT goes to epsilon
        skipSpace();
        c = getchar();

        if(c == '#'){           //end of file
                cout << "end of file \n";
        }

        else{                   // end of rule 
            ungetc(c, stdin);
            lhs++;
            readGR();
        }
    }
    else{ 
        errorcode(0); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:37:10.487

如果您想要一个具有多个值的唯一键，您可以将`std::map`容器与值一起使用，例如：

```
std::map<std::string, std::vector<std::string> > rule; 
```

如果您想要每个具有一个值的重复键，则可以`std::multimap`这样使用：

```
std::multimap<std::string, std::string> rule; 
```

这将允许`rule`包含对`[a,al]`, `[a,be]`,`[a,ze]`

# python - 在 Python 类中，使用 self 语法创建变量和不使用 语法创建变量有什么区别？

> ID：12811129
> 
> 赞同：-1
> 
> 时间：2012-10-10T02:29:10.213
> 
> 标签：python

使用 self.variable 语法创建变量和不创建变量有什么区别？

我正在对其进行测试，我仍然可以从一个实例访问两者：

```
class TestClass(object):
    j = 10
    def __init__(self):
        self.i = 20

if __name__ == '__main__':
    testInstance = TestClass()
    print testInstance.i
    print testInstance.j 
```

但是，如果我交换 的位置`self`，则会导致错误。

```
class TestClass(object):
    self.j = 10
    def __init__(self):
        i = 20

if __name__ == '__main__':
    testInstance = TestClass()
    print testInstance.i
    print testInstance.j  

>>NameError: name 'self' is not defined 
```

所以我认为 self 在初始化中具有特殊的作用。但是，我只是不太明白它是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T02:30:32.773

`self`指类的当前*实例*。如果你在函数体之外声明一个变量，你指的是类本身，而不是一个实例，因此类的所有实例将共享该属性的相同值。

此外，声明为类的一部分（而不是实例的一部分）的变量可以作为类本身的一部分进行访问：

```
class Foo(object):
    a = 1

one = Foo()
two = Foo()

Foo.a = 3 
```

由于这个值是类范围的，你不仅可以直接从类中读取它：

```
print Foo.a # prints 3 
```

但它也会改变类的每个实例的值：

```
print one.a # prints 3
print two.a # prints 3 
```

但是请注意，只有当您不使用实例变量覆盖类变量时才会出现这种情况。例如，如果您创建了以下内容：

```
class Bar(object)
    a = 1
    def __init__(self):
        self.a = 2 
```

然后做了以下事情：

```
one = Bar()
two = Bar()
two.a = 3 
```

然后你会得到以下结果：

```
print Bar.a # prints "1"
print one.a # prints "2"
print two.a # prints "3" 
```

如评论中所述，分配 to`two.a`在该实例上创建一个实例本地条目，该条目覆盖`a`from `Bar`，因此为什么`Bar.a`仍然是 1 但`two.a`为 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:56:06.197

`j`是 Amber 所指向的类变量。现在，如果您来自 C++ 背景，`self`则类似于`this`指针。虽然 python 不处理指针，`self`但它起着引用类当前实例的类似作用。

在 python 方式中，`explicit is better than implicit`. `this`在 C++ 中，通常假定每个类的可用性 。另一方面，Python 将`self`作为第一个参数显式传递给每个实例方法。

因此`self`，仅在您的实例方法范围内可用，使其`undefined`适用于您尝试使用它的地方。

由于您必须显式传递`self`给实例方法，因此如果您愿意，也可以将其称为其他名称 -

```
>>> class Foo:
...     b = 20
...     def __init__(them):
...             them.beep = "weee"
... 
>>> f = Foo()
>>> f.beep
'weee' 
```

# perl - perl-DBI / perl-DBD-oracle 安装

> ID：12811131
> 
> 赞同：0
> 
> 时间：2012-10-10T02:29:15.923
> 
> 标签：perl, oracle

我想要做的是通过 perl 从 oracle 数据库连接和检索数据。

我所做的（作为 oracle 帐户）如下所示......

```
$ rpm -qa|grep DBI
perl-DBI-1.52-2.el5

$ wget http://search.cpan.org/CPAN/authors/id/P/PY/PYTHIAN/DBD-Oracle-1.17.tar.gz
$ tar -zxf DBD-Oracle-1.17.tar.gz
$ cd DBD-Oracle-1.17
$ perl Makefile.PL
Using DBI 1.52 (for perl 5.008008 on x86_64-linux-thread-multi) installed in /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI/

Configuring DBD::Oracle for perl 5.008008 on linux (x86_64-linux-thread-multi)

Remember to actually *READ* the README file! Especially if you have any problems.

Using Oracle in /sw/oracle/app/oracle/product/102
DEFINE _SQLPLUS_RELEASE = "1002000500" (CHAR)
Oracle version 10.2.0.5 (10.2)
Found /sw/oracle/app/oracle/product/102/rdbms/demo/demo_rdbms.mk
Using /sw/oracle/app/oracle/product/102/rdbms/demo/demo_rdbms.mk
Your LD_LIBRARY_PATH env var is set to '/sw/oracle/app/oracle/product/102/lib:/usr/lib:/sw/oracle/app/oracle/product/102/lib32:.'
Reading /sw/oracle/app/oracle/product/102/rdbms/demo/demo_rdbms.mk
Reading /sw/oracle/app/oracle/product/102/rdbms/lib/env_rdbms.mk

Attempting to discover Oracle OCI build rules
gcc    -c -o DBD_ORA_OBJ.o DBD_ORA_OBJ.c
by executing: [make -f /sw/oracle/app/oracle/product/102/rdbms/demo/demo_rdbms.mk build ECHODO=echo ECHO=echo GENCLNTSH='echo genclntsh' CC=true OPTIMIZE= CCFLAGS= EXE=DBD_ORA_EXE OBJS=DBD_ORA_OBJ.o]
Oracle oci build command:
    [true -L/sw/oracle/app/oracle/product/102/lib/ -L/sw/oracle/app/oracle/product/102/rdbms/lib/ -o DBD_ORA_EXE DBD_ORA_OBJ.o -lclntsh   `cat /sw/oracle/app/oracle/product/102/lib/sysliblist` -ldl -lm  -lpthread]

Found header files in /sw/oracle/app/oracle/product/102/rdbms/public.

Checking for functioning wait.ph
Constant subroutine __USE_POSIX undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 8.
Constant subroutine __USE_POSIX2 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 9.
Constant subroutine __USE_POSIX199309 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 10.
Constant subroutine __USE_POSIX199506 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 11.
Constant subroutine __USE_XOPEN undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 12.
Constant subroutine __USE_XOPEN_EXTENDED undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 13.
Constant subroutine __USE_UNIX98 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 14.
Constant subroutine __USE_LARGEFILE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 16.
Constant subroutine __USE_LARGEFILE64 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 17.
Constant subroutine __USE_FILE_OFFSET64 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 18.
Constant subroutine __USE_BSD undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 19.
Constant subroutine __USE_SVID undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 20.
Constant subroutine __USE_MISC undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 21.
Constant subroutine __USE_GNU undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 23.
Constant subroutine __USE_REENTRANT undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 24.
Constant subroutine _POSIX_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 49.
Constant subroutine _POSIX_C_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 51.
Constant subroutine _XOPEN_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 53.
Constant subroutine _XOPEN_SOURCE_EXTENDED undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 55.
Constant subroutine _LARGEFILE64_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 57.
Constant subroutine _LARGEFILE_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 104.
Constant subroutine __USE_ISOC99 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 108.
Constant subroutine __GNU_LIBRARY__ undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 156.
Operator or semicolon missing before &__inline at (eval 167) line 1.
Ambiguous use of & resolved as operator & at (eval 167) line 1.
Constant subroutine __need_size_t undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/stddef.ph line 148.
Scalar found where operator expected at (eval 241) line 1, near "'int'  $__val"
    (Missing operator before   $__val?)
Number found where operator expected at (eval 245) line 1, near ") 0"
    (Missing operator before 0?)
Number found where operator expected at (eval 246) line 1, near ") 1"
    (Missing operator before 1?)
Number found where operator expected at (eval 247) line 1, near ") 2"
    (Missing operator before 2?)
Constant subroutine __need_timespec undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/time.ph line 49.
Hexadecimal number > 0xffffffff non-portable at (eval 447) line 1.
Hexadecimal number > 0xffffffff non-portable at (eval 448) line 1.
Constant subroutine __need_timeval undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/bits/time.ph line 23.

System: perl5.008008 linux builder10.centos.org 2.6.18-53.el5 #1 smp mon nov 12 02:14:55 est 2007 x86_64 x86_64 x86_64 gnulinux 
Compiler:   gcc -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm
Linker:     /usr/bin/ld
Sysliblist: -ldl -lm -lpthread -lnsl -lirc 
Oracle makefiles would have used these definitions but we override them:
  CC:       $(COMPDIR)/bin/gcc
  CFLAGS:   $(GFLAG) $(OPTIMIZE) $(CDEBUG) $(CCFLAGS) $(PFLAGS)\
    $(SHARED_CFLAG) $(USRFLAGS)
           [$(GFLAG) -O3 $(CDEBUG) -m32 -trigraphs -fPIC -I/sw/oracle/app/oracle/product/102/rdbms/demo -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/plsql/public -I/sw/oracle/app/oracle/product/102/network/public -DLINUX -D_GNU_SOURCE -D_LARGEFILE64_SOURCE=1 -D_LARGEFILE_SOURCE=1 -DSLTS_ENABLE -DSLMXMX_ENABLE -D_REENTRANT -DNS_THREADS -fno-strict-aliasing $(LPFLAGS) $(USRFLAGS)]
  LDFLAGS:  $(LDFLAGS32)
           [-m32 -o $@ -L/sw/oracle/app/oracle/product/102/rdbms//lib32/ -L/sw/oracle/app/oracle/product/102/lib32/ -L/sw/oracle/app/oracle/product/102/lib32/stubs/]
Linking with OTHERLDFLAGS = -L/sw/oracle/app/oracle/product/102/lib/ -L/sw/oracle/app/oracle/product/102/rdbms/lib/   -lclntsh   `cat /sw/oracle/app/oracle/product/102/lib/sysliblist` -ldl -lm  -lpthread [from 'build' rule]

Checking if your kit is complete...
Looks good
LD_RUN_PATH=/sw/oracle/app/oracle/product/102/lib:/sw/oracle/app/oracle/product/102/rdbms/lib
Using DBD::Oracle 1.17.
Using DBD::Oracle 1.17.
Using DBI 1.52 (for perl 5.008008 on x86_64-linux-thread-multi) installed in /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI/
Writing Makefile for DBD::Oracle

***  If you have problems...
     read all the log printed above, and the README and README.help.txt files.
     (Of course, you have read README by now anyway, haven't you?)

$ make
cp Oracle.pm blib/lib/DBD/Oracle.pm
cp oraperl.ph blib/lib/oraperl.ph
cp dbdimp.h blib/arch/auto/DBD/Oracle/dbdimp.h
cp ocitrace.h blib/arch/auto/DBD/Oracle/ocitrace.h
cp Oraperl.pm blib/lib/Oraperl.pm
cp Oracle.h blib/arch/auto/DBD/Oracle/Oracle.h
cp lib/DBD/Oracle/GetInfo.pm blib/lib/DBD/Oracle/GetInfo.pm
cp mk.pm blib/arch/auto/DBD/Oracle/mk.pm
/usr/bin/perl -p -e "s/~DRIVER~/Oracle/g" /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI/Driver.xst > Oracle.xsi
/usr/bin/perl /usr/lib/perl5/5.8.8/ExtUtils/xsubpp  -typemap /usr/lib/perl5/5.8.8/ExtUtils/typemap -typemap typemap  Oracle.xs > Oracle.xsc && mv Oracle.xsc Oracle.c
gcc -c  -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/rdbms/demo -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/plsql/public -I/sw/oracle/app/oracle/product/102/network/public -I/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic   -DVERSION=\"1.17\" -DXS_VERSION=\"1.17\" -fPIC "-I/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE"  -Wall -Wno-comment -DUTF8_SUPPORT -DNEW_OCI_INIT -DORA_OCI_VERSION=\"10.2.0.5\" Oracle.c
Oracle.c: In function 'XS_DBD__Oracle__db_ora_lob_append':
Oracle.xs:201: warning: unused variable 'startp'
gcc -c  -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/rdbms/demo -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/plsql/public -I/sw/oracle/app/oracle/product/102/network/public -I/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic   -DVERSION=\"1.17\" -DXS_VERSION=\"1.17\" -fPIC "-I/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE"  -Wall -Wno-comment -DUTF8_SUPPORT -DNEW_OCI_INIT -DORA_OCI_VERSION=\"10.2.0.5\" dbdimp.c
dbdimp.c: In function 'ora_db_login6':
dbdimp.c:652: warning: value computed is not used
dbdimp.c: In function 'dbd_rebind_ph_char':
dbdimp.c:1052: warning: value computed is not used
gcc -c  -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/rdbms/demo -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/plsql/public -I/sw/oracle/app/oracle/product/102/network/public -I/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic   -DVERSION=\"1.17\" -DXS_VERSION=\"1.17\" -fPIC "-I/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE"  -Wall -Wno-comment -DUTF8_SUPPORT -DNEW_OCI_INIT -DORA_OCI_VERSION=\"10.2.0.5\" oci8.c
oci8.c: In function 'fetch_func_rset':
oci8.c:626: warning: value computed is not used
oci8.c: In function 'dbd_rebind_ph_lob':
oci8.c:711: warning: value computed is not used
oci8.c: In function 'ora_blob_read_mb_piece':
oci8.c:778: warning: comparison is always false due to limited range of data type
oci8.c: In function 'ora_describe':
oci8.c:1267: warning: comparison is always false due to limited range of data type
oci8.c: In function 'post_execute_lobs':
oci8.c:2118: warning: value computed is not used
oci8.c: At top level:
oci8.c:563: warning: 'fetch_func_nty' defined but not used
Running Mkbootstrap for DBD::Oracle ()
chmod 644 Oracle.bs
rm -f blib/arch/auto/DBD/Oracle/Oracle.so
gcc  -shared -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic Oracle.o dbdimp.o oci8.o -L/sw/oracle/app/oracle/product/102/lib/ -L/sw/oracle/app/oracle/product/102/rdbms/lib/   -lclntsh   `cat /sw/oracle/app/oracle/product/102/lib/sysliblist` -ldl -lm  -lpthread -o blib/arch/auto/DBD/Oracle/Oracle.so    \
            \

chmod 755 blib/arch/auto/DBD/Oracle/Oracle.so
cp Oracle.bs blib/arch/auto/DBD/Oracle/Oracle.bs
chmod 644 blib/arch/auto/DBD/Oracle/Oracle.bs
/usr/bin/perl "-Iblib/arch" "-Iblib/lib" ora_explain.PL ora_explain
Extracted ora_explain from ora_explain.PL with variable substitutions.
cp ora_explain blib/script/ora_explain
/usr/bin/perl "-MExtUtils::MY" -e "MY->fixin(shift)" blib/script/ora_explain
Manifying blib/man1/ora_explain.1
Manifying blib/man3/DBD::Oracle.3pm
Manifying blib/man3/DBD::Oraperl.3pm

$ make install

Warning: You do not have permissions to install into /usr/share/man/man1 at /usr/lib/perl5/5.8.8/ExtUtils/Install.pm line 114.
Files found in blib/arch: installing files in blib/lib into architecture dependent library tree
Writing /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/Oracle/.packlist
Appending installation info to /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/perllocal.pod

$ sudo - chmod 777 /usr/share/man

Warning: You do not have permissions to install into /usr/bin at /usr/lib/perl5/5.8.8/ExtUtils/Install.pm line 114.
Files found in blib/arch: installing files in blib/lib into architecture dependent library tree
Writing /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/Oracle/.packlist
Appending installation info to /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/perllocal.pod

$ sudo - chmod 777 /usr/bin

Files found in blib/arch: installing files in blib/lib into architecture dependent library tree
Writing /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/Oracle/.packlist
Appending installation info to /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/perllocal.pod

$ perl -e 'use DBD::Oracle'
install_driver(Oracle) failed: Can't load '/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/Oracle/Oracle.so' for module DBD::Oracle: /sw/oracle/app/oracle/product/102/lib/libnnz10.so:  cannot restore segment prot after reloc: Permission denied at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/DynaLoader.pm line 230.
 at (eval 3) line 3
Compilation failed in require at (eval 3) line 3.
Perhaps a required shared library or dll isn't installed where expected
 at ./ora_dump.pl line 7 
```

我已经检查了 /sw/oracle/app/oracle/product/102/lib/libnnz10.so 的权限。
我的机器在 CentOS 5.5 版和 10g 企业版 10.2.0.5.0 版上......我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:02:37.573

听起来像是 SELinux 的问题。尝试禁用它，看看这是否能解决您的问题： [http ://www.crypt.gen.nz/selinux/disable_selinux.html](http://www.crypt.gen.nz/selinux/disable_selinux.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:55:18.460

我不知道你错过了什么以及你哪里出错了。但我总是遵循下面的方法，它对我来说是 100% 的。试试这个方法，如果它不起作用，那么我绝对可以让它为你工作....

我在您的帖子中注意到的一件事是您遇到了权限问题。尝试以 root 身份运行这些步骤。

我的环境：Oracle 11G 在远程机器上运行

我的桌面：ubunt/fedora/RHEL/CenOS

我已经在以上 4 种 Linux 风格上实现了这一点，它们都运行良好。

**以下是步骤（按照给定的顺序进行操作）：**

安装 Perl DBI 模块

[从http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html](http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html)为 oracle 即时客户端安装低于 3 rpm

```
oracle-instantclient11.2-basic-11.2.0.3.0-1 
oracle-instantclient11.2-devel-11.2.0.3.0-1 
oracle-instantclient11.2-sqlplus-11.2.0.3.0-1 
```

我使用的是 64 位 linux 机器，因此请相应地选择您的 RPM。

设置以下变量：

```
LD_LIBRARY_PATH=/usr/lib/oracle/11.2/client64/lib 
ORACLE_HOME=/usr/lib/oracle/11.2/client64 
```

也添加`ORACLE_HOME`到你的`PATH`变量

`DBD::Oracle ver 1.44`从 CPAN下载。解压模块并按给定顺序运行以下命令：

```
perl Makefile.PL 
make make 
install 
```

完毕 ！！！

# asp.net-mvc-4 - 在 MVC4 中具有可能嵌套 DropDownList 的 DropDownList

> ID：12811136
> 
> 赞同：2
> 
> 时间：2012-10-10T02:29:42.997
> 
> 标签：asp.net-mvc-4

我有一组问题可供用户选择，其中一些问题有一个可供选择的辅助选项列表。我的目标是有一个下拉列表，如果您选择其中一个在其 SecondaryChoiceList 中有项目的选项，那么第二个列表将出现在初始下拉列表下方，所有这些都将被强输入并在提交时绑定到模型。

我可以通过说：

```
@Html.DropDownListFor( x => x.SelectedChoiceId, new SelectList(Model.Choices, "Id", "Name")) 
```

但这与二级列表没有挂钩，我完全不知道如何将二级列表与提交表单时返回的模型联系起来。

这是我的视图模型：

```
public class ExampleViewModel
{
    public List<Choice> ChoiceList { get; set; }
    public int SelectedChoiceId { get; set; }
    public int SelectedAffiliateId { get; set; }
} 
```

这是一个选择的样子：

```
public class Choice
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IEnumerable<SecondaryChoice> SecondaryChoiceList { get; set; }

    public Choice()
    {
        SecondaryChoiceList = new List<SecondaryChoice>();
    }
} 
```

这是我的 SecondaryChoice 对象：

```
public class EligibleAffiliate
{
    public int Id { get; set; }
    public int EligibilityChoiceId { get; set; }
    public string Name { get; set; }
} 
```

如果有什么我可以澄清的，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T15:07:33.377

我试图让它尽可能简单。

**因此，下面给出了一个示例模型：**

```
namespace StackOverflow.Models
{
    public class Choice
    {
        public int Id { get; set; }
        public string Name { get; set; }

        public Choice()
        {
            Id = 0;
        }

        public Choice(int id, string name)
        {
            Id = id;
            Name = name;
        }
    }
}

namespace StackOverflow.Models
{
    public class ExampleViewModel
    {
        public List<Choice> PrimaryChoiceList { get; set; }
        public List<Choice> SecondaryChoiceList { get; set; }
        public int SelectedChoiceId { get; set; }
        public int SelectedAffiliateId { get; set; }

        public ExampleViewModel()
        {
            SelectedChoiceId = 0;
            SelectedAffiliateId = 0;

            PrimaryChoiceList = new List<Choice>()
            {
                new Choice(1, "How are you?"),
                new Choice(2, "How is the weahter?"),
                new Choice(3, "What have you been doing so far?"),
                new Choice(4, "What's up man?"),
                new Choice(5, "Any news?"),
                new Choice(5, "Bla bla bla")
            };

            SecondaryChoiceList = new List<Choice>()
            {
                new Choice(1, "How are you dear?"),
                new Choice(2, "How is the weahter?"),
                new Choice(3, "What have you been doing so far dear?"),
                new Choice(4, "What's up man?"),
                new Choice(5, "Any romantic news?")
            };
        }
    }
} 
```

**样品控制器：**

```
namespace StackOverFlow.Controllers
{
    public class SOController : Controller
    {
        public static ExampleViewModel evm = new ExampleViewModel();

        public ActionResult Index()
        {
            return View(evm);
        }

        public ActionResult SetSelection(int id)
        {
            evm.SelectedChoiceId = id;

            if (evm.PrimaryChoiceList.Count() > 0)
            {
                Choice selection = evm.PrimaryChoiceList.ElementAt(id-1);
                Choice affiliate = (Choice)evm.SecondaryChoiceList.FirstOrDefault(x => x.Name == selection.Name);
                if (affiliate != null)
                {
                    return Content("show");
                }
                else
                {
                    return Content("hide");
                }
            }
            else
            {
                return Content("hide");
            }
        }
    }
} 
```

**和网页：**

```
@using StackOverflow2.Models;
@model ExampleViewModel

<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>

@{
    ViewBag.Title = "Stackoverflow Sample";
}

<h2>Index</h2>

<script type="text/javascript">

    // Get the selection and make Ajax Request to the controller, action: SetSelection,
    // which in turn may decide whetger you must show or hide the control
    function updateSeconadryQuestion(id) {
        var xmlhttp;
        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                if (xmlhttp.responseText == 'show')
                    $('#SecondaryQuestionDropBoxId').show();
                else
                    $('#SecondaryQuestionDropBoxId').hide();
            }
        }
        xmlhttp.open("GET", "/SO/SetSelection?id=" + id, true);
        xmlhttp.send();
    }

</script>

@Html.DropDownListFor(x => x.SelectedChoiceId, new SelectList(Model.PrimaryChoiceList, "Id", "Name", "Value"), new { id = "PrimaryQuestionDropBoxId", onchange = "updateSeconadryQuestion(value);" })

<div id="SeconadryQuestionDivId">
@Html.DropDownListFor(x => x.SelectedAffiliateId, new SelectList(Model.SecondaryChoiceList, "Id", "Name"), new { id = "SecondaryQuestionDropBoxId" })
</div> 
```

# javascript - 如何触发下载对话框而不是自动播放视频/查看图像

> ID：12811138
> 
> 赞同：0
> 
> 时间：2012-10-10T02:30:22.973
> 
> 标签：javascript

我希望用户单击视频文件的链接，然后打开一个对话框供他们保存到文件。我不希望浏览器打开 quicktime 或任何其他插件来处理视频。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:01:16.713

您不能仅使用 JavaScript 来做到这一点。您的服务器应将`Content-Disposition`标头设置为`attachment`. 例如，在 php 中，您可以执行类似的操作`header("Content-Disposition:attachment;");`

# jquery - 如何在 dynatree 中使用 jquery-ui 图标

> ID：12811139
> 
> 赞同：1
> 
> 时间：2012-10-10T02:30:24.473
> 
> 标签：jquery, css, jquery-ui, icons, dynatree

我想在 jquery dynatree 插件中嵌入 jquery-ui 图标。

[http://jquery-ui.googlecode.com/svn/tags/1.6rc5/tests/static/icons.html](http://jquery-ui.googlecode.com/svn/tags/1.6rc5/tests/static/icons.html)

这里有一个基于 icons.gif 的解决方案。 [如何自定义 dynatree 图像？](https://stackoverflow.com/questions/10447483/how-to-customise-dynatree-image)

但是我可以使用 jquery-ui 图标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T10:05:35.143

Dynatree ( [Fancytree](https://github.com/mar10/fancytree) ) 的继任者允许这样做：

```
<li data-iconclass="ui-icon ui-icon-heart">'iconclass' is directly added to the image &lt;span>, so jQuery stock icons may be used 
```

在这里查看[演示](http://wwwendt.de/tech/fancytree/demo/sample-theming.html)

# ios - 如何在 ios 4.3 中使用 TextView 的“setMarkedText:selectedRange:”方法？

> ID：12811144
> 
> 赞同：2
> 
> 时间：2012-10-10T02:30:59.777
> 
> 标签：ios

在4.3中，没有这样的方法，只有“setSelectedRange”方法，

"setMarkedText:selectedRange:" 仅在 ios 5.0 及更高版本中。

这对我来说真的是个问题。

# jquery-ui - 如何使内容在 jQuery 选项卡容器的全高？

> ID：12811145
> 
> 赞同：2
> 
> 时间：2012-10-10T02:31:10.870
> 
> 标签：jquery-ui, tabs

我有一个 jQuery 选项卡 ctrl，每个选项卡都有一个文本区域。我想最大化其父 div 中的选项卡，所以我通过 css 将选项卡 div 设置为 100% 宽度/高度，它可以工作。但是我怎样才能最大化其中的文本区域呢？

Objective: tabs 填满父 div，textarea 填满父 tab，当父 div 调整大小时，tabs 和 textarea 也会调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T10:58:47.963

```
var $tabs = $('tabsSelector');
var $parentPane = $('parentSelector')
var newHeight = $parentPane.height() - 10;
$tabs.height(newHeight);
var navHeight = $tabs.find(".ui-tabs-nav:first").height();
$tabs.children(".ui-tabs-panel").height(newHeight - navHeight); 
```

# c++ - c++图像数组类型

> ID：12811147
> 
> 赞同：2
> 
> 时间：2012-10-10T02:31:30.023
> 
> 标签：c++, image, casting

我正在使用 C++ 处理适合的图像。这种格式可以保存 8/16/32 位整数和 32/64 位浮点数组。像素大小（变量类型）由标头标志给出。当我使用 cfitsio 库 [http://heasarc.gsfc.nasa.gov/fitsio/] 读取其中一张图像时，我得到一个包含图像所有像素的 char 数组：

```
char* array = new char[npix*bytepix]; // bytepix is the number of bytes per pixel
fits_read_img(infptr, datatype, first, npix, &nulval, lArray, &anynul, &status); 
```

然后我可以通过类型转换获得像素的“真实”值。IE 来获取 32 位整数的第 i 个像素的值，我会这样做：

```
int32_t pixelValue = ((int32_t*) lArray)[i]; 
```

我想知道一般来说最紧凑的处理方式是什么，因为我不知道编写代码时像素类型是什么。

我目前做的是这样的：

```
switch(bytepix){
    case 1:{
      int8_t *vecVal = ((int8_t*) array );
    }
      break;
    case 2:{
      int16_t *vecVal = ((int16_t*) array );
    }
      break;
    case 4:{
      int32_t *vecVal = ((int32_t*) array );
    }
      break;
    case 8:{
      int64_t *vecVal = ((int64_t*) array );
    }
      break;
    default:
      cout << "error\n";
      break;
  }
} 
```

这显然是丑陋的，而且不是很灵活。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:55:54.263

您正在尝试做的事情称为*泛型编程*。这是一个基本概念，将算法和它所操作的类型分开。C++ 支持*模板函数*和*模板类*，整个 C++ 标准模板库都基于它。

基本上，独立于 FITS 像素大小实现您的处理功能：

```
template<typename Pixel>
void ProcessImage(Pixel *array, const int arr_length) {
  ...
} 
```

然后用相应的像素大小调用它：

```
...
case 1:
  ProcessImage<int8_t>(reinterpret_cast<int8_t *>(array), arr_length);
  break;
case 2:
  ProcessImage<int16_t>(reinterpret_cast<int16_t *>(array), arr_length);
  break;
... 
```

几个想法：

1.  您使用 C++，但编写 C 风格的代码。我建议你熟悉 C++ STL、容器和算法，它们正是图像处理所需要的。
2.  有一个 C++ [CCfits](http://heasarc.gsfc.nasa.gov/docs/software/fitsio/ccfits/)替代 cfitsio 库可能更适合您。
3.  [Boost::GIL](http://www.boost.org/doc/libs/1_51_0/libs/gil/doc/index.html)等库实现了很多图像处理算法。它们在很大程度上基于模板，并提供完整的功能和良好的学习材料。

# css - CSS中的点是什么意思？

> ID：12811149
> 
> 赞同：54
> 
> 时间：2012-10-10T02:31:54.423
> 
> 标签：css, css-selectors

有人可以解释这两个 CSS 选择器的区别吗？

```
.work-container . h3 {
font-size: 14px;
margin-top: 0px;
font-weight: 600;
height: 27px;
} 
```

上定义中多余的点是什么？

```
.work-container h3 {
font-size: 14px;
margin-top: 0px;
font-weight: 600;
height: 27px;
} 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2016-07-22T05:53:17.627

案例

*   选择器以点开头

`.class_name`表示类名

*   两个用空格分隔的点状选择器

`.outside` `.inside`

表示具有`.inside`类的元素源自具有类的元素`.outside`

*   两个没有分隔的点选择器

`.name1.name2`

表示同时具有类`name1`和`name2` 例如的元素：`class="name1 name2"`

相关问题：

*   [What does a space mean in a CSS selector? i.e. What is the difference between .classA.classB and .classA .classB?](https://stackoverflow.com/questions/1126338/what-does-a-space-mean-in-a-css-selector-i-e-what-is-the-difference-between-c)
*   [What's the difference between CSS classes .foo.bar (without space) and .foo .bar (with space)](https://stackoverflow.com/questions/10036156/whats-the-difference-between-css-classes-foo-bar-without-space-and-foo-bar)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-10-10T02:36:15.500

前缀通常代表一个`.`类选择器，但如果它后面紧跟空格，那么它是一个语法错误。

如果我冒险猜测，那么作者很可能是想说`.work-container > h3`，但在他即将键入`>`字符（[子组合](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules/3225905#3225905)符）时错过了 Shift 键。

您的第二个选择器 ，`.work-container h3`仅表示`h3`包含在具有名为 的类的元素中的任何内容`work-container`。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-10T02:38:18.557

`.`在 CSS 中意味着它是一个类，它可以应用于许多元素。

`#`在 CSS 中意味着它是一个 ID，它可以应用于每个页面的一个元素。

没有任何一个，它是一个标签，针对具有标签名称的所有元素。

在您的语法中，`.work-container . h3`实际上是错误的。`.`应该是`,`或者正如[BoltClock](https://stackoverflow.com/users/106224/boltclock)所说的那样`>`，它表示 CSS 中的直接后代运算符。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-10T02:36:34.607

`.`说它的类

`#`意味着它的一个ID

如果除了选择器之外什么都没有，那么它就是一个标签

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-10T12:19:03.453

`.`在 CSS 中意味着它是一个类，它可以应用于许多在类之间使用空间的元素

例如：

```
<h3 class="class1 class2 class2">Heading</h3> 
```

`#`在 CSS 中意味着它是一个 ID，它可以应用于每个页面的一个元素。

例如

```
<h3 id="idname1">Heading</h3> 
```

# python - 如何在 Tkinter 中使用 curselection 选择什么都不说

> ID：12811151
> 
> 赞同：1
> 
> 时间：2012-10-10T02:31:57.710
> 
> 标签：python, tkinter

我有一个使用的代码`Listbox.curselection()`：

```
self.index = int(self._Listbox.curselection()[0]) 
```

当列表框中没有选择任何内容时，我想引发一个错误窗口。

对于任何反馈，我们都表示感谢。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:55:03.237

我不是 100% 确定问题是什么。如果没有选择任何项目，则`self._Listbox.curselection()`应该返回一个空列表。既然你然后抓取索引 0，它应该抛出一个`IndexError`.

演示代码：

```
from Tkinter import *

master = Tk()

listbox = Listbox(master)
listbox.pack()

listbox.insert(END, "a list entry")

for item in ["one", "two", "three", "four"]:
    listbox.insert(END, item)

def callback():
    items = map(int, listbox.curselection())
    if(len(items) == 0):
        print "No items"
    else:
        print items

button = Button(master,text="press",command=callback)
button.pack()
mainloop() 
```

根据上面代码的行为（没有选择返回一个空列表），当你没有选择任何东西时，你的代码*应该抛出一个 IndexError ......现在你只需要处理异常：*

```
try:
    self.index = int(self._Listbox.curselection()[0])
except IndexError:
    tkMessageBox.showwarning("Oops","Need to select something") 
```

最后，我想我会留下一些关于标准 Tkinter 对话框（模块）的文档的[链接](http://effbot.org/tkinterbook/tkinter-standard-dialogs.htm)`tkMessageBox`

# algorithm - 方程中地板的含义

> ID：12811153
> 
> 赞同：1
> 
> 时间：2012-10-10T02:32:06.820
> 
> 标签：algorithm, math, analysis, floor

通过阅读标题，这听起来像是一个愚蠢的问题，但我明天有一个数据结构考试，我需要知道的一些算法分析公式被读作 . *地板*是什么意思？`(n – **floor**(log (n + 1))`

 *谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:35:16.157

`floor(x)`是不大于 的最大整数`x`。[例如，您可以在](http://en.wikipedia.org/wiki/Floor_and_ceiling_functions)Web 上轻松找到此信息。

例如

```
floor(1.12) = 1  
floor(0.53) = 0
floor(-3.4) = -4 
```

可能使人们感到困惑的一件事是负值的下限。有些人可能最初认为这`floor(-3.4)`是`-3`实际上它是`-4`根据 的定义`floor(x)`。

* * *

作为注释，`floor(x)`通常写为![在此处输入图像描述](../Images/bc4d487db589edac2a73b8608d5686b9.png).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T02:34:03.293

向下舍入到最接近的整数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:45:12.833

对于正数：删除小数部分。例如。楼层（3.4）：3

对于负数：删除小数部分并减一。例如。地板（-3.4）：-3 - 1 = -4

希望这可以帮助。！*

# mysql - 如果数据库中的用户在表中有某个值

> ID：12811159
> 
> 赞同：1
> 
> 时间：2012-10-10T02:33:06.623
> 
> 标签：mysql, database, vb.net

我想做的是一些基本的权限。

所以这就是我现在所处的位置：我有一个包含用户的数据库，但我有一个说明他们是什么的数字（管理员、Mod、用户......等等，例如 1= 用户 2= Mod 和 3=行政）。所以我想发表一个`If`声明，说明当前用户是否已登录（或当他们单击“登录”按钮时）将确定该用户在下一个表单上将拥有哪些权限。我想从数据库中获取它，因为它作为值存储在表中。

所以更像：

```
If
    This Database Value for the current logged in user = 3 then
         AdminForm.Show()
End If 
```

这`This Database Value for the current logged in user = 3 then`部分是我完全不知道该怎么做的部分。

这可能看起来令人困惑，但是，我只想这样做以获得权限，我真的不知道如何开始这样做。

# svn - 覆盖 .svn 文件，如何撤消

> ID：12811160
> 
> 赞同：0
> 
> 时间：2012-10-10T02:33:11.817
> 
> 标签：svn

我想在我的 SVN 存储库的某个子目录中更改目录中所有出现的字符串及其子目录。我使用命令行中的 perl 来替换文件中匹配的所有`file . - type f`. 我确实`svn diff`看看有什么变化，但 svn 并没有告诉我有什么不同。我意识到这是因为历史记录存储在 .svn 目录中（我是 git 用户，没有想到这一点......），我的`perl`命令也替换了 .svn 历史记录中的所有事件（我是无论如何猜测）。

在不丢失更改的情况下获取正确的 .svn 目录（也适用于子目录）的最简单/最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:55:47.287

我会将目录导出（使用 svn）到安全的地方 - 然后返回并删除损坏目录的内容（包括 .svn 目录）。然后 svn->update 在父节点上，这应该把最后提交的版本放回你的机器上。将目录的导出（即最新）版本复制回原始目录并替换文件（即，将较新的文件放回旧文件上）。

在你这样做之前 - 在一些不重要的东西上测试它:)

# css - 浏览器的jquery屏幕（位置）

> ID：12811170
> 
> 赞同：1
> 
> 时间：2012-10-10T00:40:04.647
> 
> 标签：css, jquery

我正在为图片创建缩放效果

```
 <table>
     <tr>
      <td><img class='source-img' src='a.png' ></td>
         20 more same TDs
     </tr>
       20 more TRs
    </table>

<div id="magnifier" style="position:absolute;"></div> 
```

1- 缩放成功 2- 放大镜的顶部/左侧有一个问题，我将放大镜定位在 source-img 的右侧

```
 $("source-img").mousenter(function(){
   $("#magnifier").css({
     top: $(this).top,
     left:$(this).offset().left()+$(this).width()+5//to improve left value
   });
 }); 
```

问题：如果 source-img 在浏览器的最左侧，那么我想在 source-img 的右侧显示放大镜，反之亦然，bcz 现在显示最左侧的 source-img 放大镜但看不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:15:09.763

您将需要测试放大镜元素的位置及其宽度与窗口宽度，并相应地调整左侧位置。下面的示例伪代码应该可以帮助您。

```
$(".source-img").mouseenter(function(e) {
    var w = $(window),
        elWidth = $(this).width(),
        offset = $(this).offset(),
        left;

    if (elWidth + e.pageX > w.width() + w.scrollLeft()) {
        left = e.pageX - elWidth;
    } else {
        left = e.pageX;
    }

    $("#magnifier").css({
        top: offset.top,
        left: left
    });
}); 
```

如果需要，可以应用其他设置来设置放大镜的预定边距，以使其远离窗口边缘。

# drupal - Drupal 7 - 是否可以将现有文件附加到新创建的节点？

> ID：12811172
> 
> 赞同：2
> 
> 时间：2012-10-10T02:35:15.930
> 
> 标签：drupal, drupal-7

试图在 Drupal-7 中创建一个节点并附加一个现有的罚款。

我花了很多时间将服务器端的现有文件附加到新创建的节点。我用谷歌搜索了很多，几乎所有的例子都有文件上传/保存然后附加到一个节点。没有得到任何说明如何将现有文件附加到新创建的节点的文档。

在高层次上，我的代码如下。

```
 $node = new stdClass();
 $node->type = resume' ;  // a new content type created
 node_object_prepare($node);
 $node->title = My title';
 $node->language = 'en'; 
 $node->uid = 1; 
 $file_obj = file_load($fid); 
 $node->field_resume[$node->language][0] = (array)$file_obj; //field_resume is the   machine name for file field
 node_save($node); 
```

有人可以让我知道我在这里缺少什么吗？新节点已创建，没有附件。如何将文件附加到节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:20:14.520

通常这应该有效，请尝试添加以下行并告诉我它是否有效

```
$node = new stdClass();
$node->is_new = TRUE; // This is the line I added.
// Your code continues as is... 
```

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:53:40.307

我自己没有这样做，但找到了一个[链接](https://drupal.stackexchange.com/questions/29416/programmatically-setting-an-image-field-from-hook-node-insert-drupal-7)，其中完成了以下操作：

```
$node->field_resume[$node->language][0]['fid'] = $fid; 
```

与您的代码不同的是，上面的代码只是设置了 $fid。不确定它是否有效，但你可以试一试。

此外，您可能希望调用[file_usage_add()](http://api.drupal.org/api/drupal/includes!file.inc/function/file_usage_add/7)让 Drupal 知道该节点现在保留对该文件的引用。

# selenium - Selenium IDE - 单击命令不断加载，不会进入下一步

> ID：12811173
> 
> 赞同：1
> 
> 时间：2012-10-10T02:35:17.553
> 
> 标签：selenium

我想点击这个按钮：

```
html:
onclick="javascript:return  scForm.postEvent(this,event,'contentlink:externallink(id=FIELD8547822616)')"  class="scContentButton" href="#">Insert External Link 
```

单击按钮后，将打开一个新窗口。

我尝试了几个命令，例如单击，触发事件-单击。他们都将打开新窗口，但不会进入下一步。“点击”行将以黄色突出显示（表示它仍在进行中）。

为什么点击后没有执行下一步？

我的代码：嗨，这是我在 selenium ide 中的代码

```
<tr>
    <td>click</td>
    <td>//div[@id='EditorPanel']/div[3]/div/table[5]/tbody/tr/td/table[4]/tbody/tr/td[2]/div/a[3]</td>
    <td></td>
</tr>
<tr>
    <td>selectWindow</td>
    <td>Sitecore</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=Url</td>
    <td>http://bookofbetterways.com</td>
</tr>
<tr>
    <td>click</td>
    <td>id=OK</td>
    <td></td>
</tr>
<tr>
    <td>selectWindow</td>
    <td></td>
    <td></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-10T12:03:27.667

在命令 selectWindow 之前将以下命令添加到您的代码中，因此脚本将等待，在选择它之前加载要加载的窗口。

```
<tr>
    <td>waitForPopUp</td>
    <td></td>
    <td></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:54:29.473

基于您的下一步是在打开的窗口上执行的假设，可能会出现在打开新窗口时单击后您没有选择打开的窗口的情况。

# devexpress - 使用 devexpress 的简单消息应用程序？

> ID：12811176
> 
> 赞同：0
> 
> 时间：2012-10-10T02:36:02.530
> 
> 标签：devexpress

我有一个使用`vb.net 2010 / SQl server 2008r2 / Devexpress 2011.2` 此应用程序创建的应用程序，该应用程序由网络中的多个用户使用，并且数据库位于服务器上。现在我正在考虑在这个应用程序中创建一个发送/接收消息系统。
这是一个简单的想法：数据库中有一个保存消息的表。一个用户在该表中创建一条消息，其他用户每隔一段时间查询该表，如果有新消息，他们可以从该表中读取新记录并读取该消息。我知道我该怎么做，但我不知道 devexpress 上是否有一个控件可以帮助我像在电子邮件程序中一样显示消息。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:42:55.047

我能想到的最好的方法是使用 ASPxGridview（带有详细信息行）并定期刷新它的客户端。就像上面的示例一样，您需要三列（1 个图像用于读取状态，1 个用于标题，1 个用于发送者），在详细信息行中您可以显示消息。

它应该是这样的：

```
 <dx:ASPxGridView runat="server" ID="grid" DataSourceID="datasource" KeyFieldName="Id">
        <Columns>
            <dx:GridViewDataImageColumn FieldName="ImageUrl" Caption="&nbsp" Width="30px">
               ...
            </dx:GridViewDataColumn>
            <dx:GridViewDataTextColumn FieldName="Title"/>
            <dx:GridViewDataTextColumn FieldName="Sender"/>
        </Columns>
        <Templates>
            <DetailRow>
                ...
            </DetailRow>
        </Templates>
    </dx:ASPxGridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:45:05.580

**不**，devexpress 上没有预先创建的控件可以帮助您像在电子邮件程序中一样显示消息。但是您可以借助这些控件创建程序，即使在 DevExpress XtraNavBar Demo 中也有此类演示应用程序，可以帮助您创建您想要的此类应用程序。

检查此演示屏幕： ![在此处输入图像描述](../Images/7734f893f998413376ed8dacc8656451.png)

# jquery - JQuery UI 自动完成：如何使它不可编辑？

> ID：12811177
> 
> 赞同：0
> 
> 时间：2012-10-10T02:36:02.670
> 
> 标签：jquery, jquery-ui

这个给定的代码实际上是我的项目所需要的：http: [//jqueryui.com/autocomplete/#multiple](http://jqueryui.com/autocomplete/#multiple)但我需要更多地使用它。

如何使选定的值成为用户不可编辑的？因为如果您键入“j”，它会显示“jquery”，但在您提交到服务器之前，您仍然可以使用其他内容编辑所选值“jquery”。例如'jqqqq'，你可以提交到服务器。

从服务器的角度来看，这将导致问题。那么如何让用户让他们别无选择地编辑该值但仍然可以删除它。就像这个 StackOverflow 中的 'TAGS' 输入。谢谢。

# c# - ServiceStack 如何从代码中调用我的服务

> ID：12811182
> 
> 赞同：18
> 
> 时间：2012-10-10T02:36:59.173
> 
> 标签：c#, .net, servicestack

我如何调用我自己的服务？

我有一项使用其他服务来编写信息的服务。

我想在此服务的代码中调用其他服务。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-10T02:38:13.183

有一个名为的基本方法`base.ResolveService<TMyService>()`，它只是从 IOC 解析您的自动装配服务并注入当前请求上下文

所以只需调用：

```
using (var service = base.ResolveService<MyService>()) { 
    service.Post(new MyRequest()); 
} 
```

您还可以仅使用请求 DTO 调用服务，该服务还将执行服务全局请求过滤器：

```
base.ExecuteRequest(new MyRequest()); 
```

这只是 ServiceController 的一个包装器，可以静态调用：

```
HostContext.ServiceController.Execute(new MyRequest(), base.Request) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-07T16:14:27.167

有点晚了，因为这突然出现在搜索引擎上。关于 ServiceStack v4.5 的新方法是使用[ServiceGateway](http://docs.servicestack.net/service-gateway)。每个 SS`Service`现在都有一个`Gateway`可以针对以下执行的属性：

```
var response = this.Gateway.Send(new MyRequest()); 
```

# c - 在函数 C 中访问数组

> ID：12811184
> 
> 赞同：1
> 
> 时间：2012-10-10T02:37:16.350
> 
> 标签：c, arrays, function, parameter-passing

我有一个 typedef 结构数组。

它是这样声明的：

```
vertex vertexArray[numberVertices]; 
```

然后我在我的主要代码中有这个：

```
 for(i=0;i<numberVertices;i++)
        {
                if(vertexArray[i].source == 5)
                {
                        source = vertexArray[i].number;
                        walk(vertexArray, vertexArray[i], source, headMaxPairList );
                }
        } 
```

希望进行步行：

```
 void walk(vertex *vertexArray, vertex v, int source, maxPairing *head)
{
    int i;
    adjEdge *traverse;
    int moveVertex;
    int sink;

            moveVertex = vertexArray[v.number-1].number;
            if(vertexArray[moveVertex-1].color != 5 && vertexArray[moveVertex-1].sink == 5)
            {
                    sink = vertexArray[moveVertex-1].number;
                    vertexArray[moveVertex-1].color = 5;
                    addMaxPair(head, source, sink);
            }
            else
            {
                    walk(vertexArray, vertexArray[moveVertex-1], source, head);
            } 
```

}

但是，我在函数上遇到了段错误：

```
in walk (vertexArray=Cannot access memory at address 0x7fffff3fefe8 
```

我相信这与我传递 vertexArray 的方式有关。

我的理解是数组实际上是指针，因此`vertex *vertexArray`然后一个单独的成员只是一个顶点，而不是一个指针`vertex v`。

如果有人可以帮助我正确通过，我将不胜感激。

旁注，如果有人能判断我的步行是否能正常工作，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:06:01.170

数组与指针不同。

阅读以下链接以进行澄清：

问：那么 C 中的“指针和数组等价”是什么意思？

[http://c-faq.com/aryptr/aryptrequiv.html](http://c-faq.com/aryptr/aryptrequiv.html)

问：但是我听说 char a[] 和 char *a 是一样的。

[http://c-faq.com/aryptr/aryptr2.html](http://c-faq.com/aryptr/aryptr2.html)

为避免 Seg-Fault，请在 walk() 函数中添加以下检查：

```
void walk(vertex *vertexArray, vertex v, int source, maxPairing *head)
{
    int i;
    adjEdge *traverse;
    int moveVertex;
    int sink;

    /* Add this Check to Avoid Seg Fault, you need to make the value of  
      'numberVertices'available to this function as this is your array size */

    if ((((v.number-1)<0)||((v.number-1)>numberVertices))
    {
       return;
    }
    /* Check Ends */

            moveVertex = vertexArray[v.number-1].number;

    /* Another Check */
    if((moveVertex-1<0)||(moveVertex-1>numberVertices))
    {
       return;
    }
    /* Check Ends */

            if(vertexArray[moveVertex-1].color != 5 && vertexArray[moveVertex-1].sink == 5)
            {
                sink = vertexArray[moveVertex-1].number;
                vertexArray[moveVertex-1].color = 5;
                addMaxPair(head, source, sink);
            }

            else
            {
                    walk(vertexArray, vertexArray[moveVertex-1], source, head);
            } 
```

# jquery - jquery能否捕获动态dom事件并执行动作

> ID：12811185
> 
> 赞同：1
> 
> 时间：2012-10-10T02:37:27.070
> 
> 标签：jquery, ajax, javascript-events

我只是想知道这样的事情是否可行。

Jquery 应该对某些自定义事件触发一些操作。

就像每当将新行动态添加到 dom 到表中时，我都会执行某些操作，例如将背景颜色更改为红色。

这应该适用于整个网站。

像`Event listeners`在`Doctrine2`或`Signals in Django`

编辑：

基本上我想要一些东西，比如我可以在哪里创建自定义事件

`$.AddnewEvent(newRowAdded);`

然后我可以用我自己的函数来定制那个事件，比如

`$.newRowAdded(function(){ blah blah });`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:59:31.083

正如您所说 ---**自定义**事件，我相信您必须编写自己的自定义触发器。

```
$('<tr><td>new row</td></tr>').appendTo('#my_table').animate({backgroundColor: '#f00'}); 
```

彩色动画需要[jQuery Color 插件](https://github.com/jquery/jquery-color)。

# 更新

不确定**在整个站点上有效的自定义事件**是什么意思？

由于每次要添加新行时都必须**手动将新元素附加到表中，因此只需在附加后添加动画即可。**我不认为有一个内置的事件监听器会自动为你做这件事。

你可以写一个小函数

```
$.fn.colorRow = function() {
    $(this).animate({backgroundColor: '#f00'}, function() {
        $(this).animate({backgroundColor: '#fff'});
    });
}; 
```

并在插入新行后附加此函数。

```
$('<tr><td>new row</td></tr>').appendTo('#my_table').colorRow(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:42:40.537

There are a lot of event listener in jQuery, I'll name a few

```
$(selector).click(function(){/*some function*/}) will fire when that element selected is clicked
$(selector).submit(function(){/*some function*/}) will fire when a form is being submitted 
```

In your base, if you want to change color when it's red, you might want to do the background color change function whenever the add button is clicked

Hope this helps.

# jquery - JQuery“on”没有捕捉事件

> ID：12811190
> 
> 赞同：3
> 
> 时间：2012-10-10T02:37:53.623
> 
> 标签：jquery, events

jQuery 'on' 函数应该捕获将来创建的元素的事件，但在我的代码中，除非该项目已经创建，否则它似乎不起作用。这是失败的代码：

```
<!doctype html>
<html>
<head>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(function () {
    $('#div1').on('click', function(e) { 
        $('#div2').html('<div id="div3">Now Click Me!</div>'); 
    });
    $('#div3').on('click', function(e) { alert('OLA!'); });
});
</script>
</head>
<body>
<div id='div1' style='border:black 1px solid; background:yellow'>CLICK ME</div>
<div id='div2' />
</body>
</html> 
```

单击“div2”会创建“div3”，但随后单击“div3”不会执行任何操作。另一方面，如果我将 javascript 代码更改为如下所示：

```
$(function () {
    $('#div1').on('click', function(e) { 
          $('#div2').html('<div id="div3">Now Click Me!</div>'); 
          $('#div3').on('click', function(e) { alert('OLA!'); });
    });
}); 
```

它有效，但它有效，因为在添加 div3 元素之后没有声明“div3”的事件处理程序。也许我误解了“on”应该如何工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:39:54.650

试试这个...

```
$('body').on('click', '#div3', function(e) { alert('OLA!'); }); 
```

第一个选择器必须是事件将冒泡到的公共祖先元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T02:40:32.903

您应该从元素或文档对象的静态父对象之一委托事件：

```
$('#div2').on('click', '#div3', function(e) {
     alert('OLA!'); 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T02:41:25.747

你需要以这种方式给予：

```
$('#div2').on('click','#div3', function(event) {
  alert('OLA!');
}); 
```

### 小提琴：http: [//jsfiddle.net/BRWVq/](http://jsfiddle.net/BRWVq/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T02:41:48.627

那么不同的东西`:)` [http://jsfiddle.net/VYgpM/1/](http://jsfiddle.net/VYgpM/1/)

希望它适合原因`:)`

**代码**

```
$(function() {
    $('#div1').on('click', function(e) {
        $('#div2').html('<div id="div3">Now Click Me!</div>');
        init_div3();
    });

    function init_div3(){
        $('#div3').on('click', function(e) {
        alert('OLA!');
    });
    }
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T02:40:35.337

试试这个

```
$('#div2').on('click','#div3', function(e) { 
    alert('OLA!'); 
}); 
```

您需要委托事件，因为您正在动态创建元素..

您的代码将如下所示

```
$(function() {
    $('#div1').on('click', function(e) {
        $('#div2').html('<div id="div3">Now Click Me!</div>');

    });

    $('#div2').on('click', '#div3', function(e) {
        alert('OLA!');
    });
});​ 
```

**[检查演示](http://jsfiddle.net/sushanth009/5rEzE/)**

# c++ - 这是不好的风格吗？

> ID：12811192
> 
> 赞同：2
> 
> 时间：2012-10-10T02:38:06.537
> 
> 标签：c++, syntax, coding-style, constructor, call

我最终写了一些代码：

```
Asteroid *a = new Asteroid( asteroidCollection ) ; 
```

事实证明我不需要变量`a`，因为在`Asteroid`构造函数中，`new Asteroid`最终将自己添加到`asteroidCollection`.

所以我最终能够写：

```
new Asteroid( asteroidCollection ) ; 
```

考虑到我什至不需要退货，这是不好的风格吗？我应该做到吗

```
asteroidCollection->createNew() ; 
```

或者

```
asteroidCollection->add( new Asteroid() ) ; 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T02:43:29.243

I'd say it's bad style because it's confusing when you read the code. The first thing that springs to mind is that you have a memory leak. The confusion evaporates only after looking inside of the constructor and figuring out that the object adds itself to some list to be removed later.

Also think of possible exception scenarios. It would be better to store the allocated object in a smart pointer of some sort and then add it to the collection.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T02:58:01.020

对于你的问题，我更喜欢

```
asteroidCollection->add( new Asteroid() ) ; 
```

比其他两种风格。

它比第一个好，因为`new Asteroid( asteroidCollection ) ;`不比类似的好

```
Foo( barCollection ); 
```

其中 Foo 是一个类，你`new`在它的构造函数中是一个 Bar 对象并将它添加到一个集合中，它太晦涩以至于不知道发生了什么。

它也比第二个更好，因为 IMO`asteroidCollection`不应该关心如何**创建**一个`Asteroid`，它是一个集合，所以做集合的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T02:58:48.860

风格问题总是有点主观。所以在某些方面我有点喜欢回答他们。这是我的2美分...

考虑一下您希望能够创建派生自的对象`Asteroid`并将它们添加到您的集合中。如果该`add()`方法碰巧调用`Asteroid`了可能是（或使用）虚函数的任何函数，那么您就有可能访问尚未完全构造的对象。

我认为，在构造函数中执行类似这样的操作并让用户了解正在发生的事情是令人困惑的。

我宁愿只做一个简单的功能。它甚至不必是课程的一部分......

```
Asteroid *CreateAsteroid( AsteroidCollection *coll )
{
    Asteroid * a = new Asteroid();
    coll->add(a);
    return a;
} 
```

如果您确实想继续使用构造方法，您至少可以将您的原始代码行放在这个函数中，并用非常清晰的描述来注释它正在发生的事情。

基本上，尽量不要在幕后做有趣的事情。如果这是不可避免的（或在某种程度上是可取的），请尽量不要强迫编码人员理解奇怪之处，无论该编码人员是您还是其他人。

至少在这种情况下，它并不是那么*奇怪*。情况可能会更糟！=)

举你最后两个例子......

1.  `asteroidCollection->createNew();`

2.  `asteroidCollection->add( new Asteroid() );`

如果您知道它始终是一种`Asteroid`被创建的类型，并且您不希望您班级的用户担心它，我认为数字 1 很好。如果`Asteroid`不能跨集合共享，那么这样做是有意义的。这类似于我建议的功能，但有点使集合类提供了可能不应该的支持代码。

`Asteroid`如果您可以存储派生类型，或者如果您想在将小行星添加到集合之前对其进行特殊处理，则数字 2 很有用。它是所有三种方法中最灵活的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T02:58:07.567

这看起来真的很成问题，谁来管理小行星的寿命？

它是否真正在小行星的用户和集合之间共享，如果是这样，您可能应该对小行星有一个 shared_ptr，以便最后一个拥有它的人清理它。

如果不将小行星放入小行星集合就不可能创建小行星，则集合拥有生命周期。

如果你在堆栈上创建一个小行星会发生什么？如果我将小行星放在 unique_ptr 或 shared_ptr 中而不是直接调用 new 会发生什么，例如：

```
auto asteroid = std::make_shared(asteroidCollection) 
```

它会被删除两次吗？

如果您不希望任何人对小行星做任何事情，那么小行星集合上的方法 createAsteroid 或 addAsteroid 可能更合适。简单地调用方法 createNew 听起来你正在创建一个新的 AsteroidCollection，我认为这不是你想要的。

# google-app-engine - 是否可以在 GAE 之外运行基于 protopc 的服务？

> ID：12811196
> 
> 赞同：0
> 
> 时间：2012-10-10T02:38:56.840
> 
> 标签：google-app-engine, protorpc

是否可以在 GAE 之外运行基于 protopc 的服务？我看到有一个项目托管在[http://code.google.com/p/google-protorpc/](http://code.google.com/p/google-protorpc/)但它似乎取决于 GAE。文档在这一点上非常模糊，有人有明确的答案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:44:53.077

Yes. The source code available at [http://code.google.com/p/google-protorpc/source/browse/](http://code.google.com/p/google-protorpc/source/browse/) includes all of the necessary libraries (minus protobufs itself, which you can download from the Google Developers site), and contains examples both for AppEngine and for a generic WSGI server.

The protorpc library itself is server-agnostic.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:09:13.783

在搞砸了这一点之后，我确定 ProtoRPC 目前依赖于谷歌应用引擎。可以从 sdk 中提取您需要的库，但您必须将 protorpc 源更改为不从相对路径导入。总而言之，不值得麻烦，要么使用GAE，要么不要使用protorpc，直到它可以独立运行。

谢谢。

# common-lisp - 我可以懒惰地加载 swank 吗？

> ID：12811198
> 
> 赞同：1
> 
> 时间：2012-10-10T02:39:10.767
> 
> 标签：common-lisp, swank

以下代码有效，但无论我是否需要，我都必须加载 swank。

```
(ql:quickload :swank)
(defun swank ()
    (swank:create-server :port 4005 :donot-close t)) 
```

如果我将“(ql:quickload :swank)”移动到函数 swank 中，则 CL 将找不到包 swank。

真挚地！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T03:48:54.483

请记住，阅读是 CL 中的一个单独阶段。首先读取一个表单，然后执行它。当读者阅读 DEFUN 表单时，它无法识别 SWANK:CREATE-SERVER 符号，因为此时 QL:QUICKLOAD 尚未执行。解决方案是使用 INTERN。

```
(defun swank ()
  (ql:quickload :swank)  
  (funcall (intern (string '#:create-server) :swank) :port 4005 :dont-close t)) 
```

# ibm-mq - 如何在集群中设置队列管理器默认值

> ID：12811202
> 
> 赞同：5
> 
> 时间：2012-10-10T02:39:31.130
> 
> 标签：ibm-mq

我有一个名为 inventory 的集群，其中包含 4 个队列管理器，分别定义为 london、paris、newyork、tokyo。如果 london 和 paris 是获取消息的默认队列管理器，我如何使 newyork 和 tokyo 作为默认接收并且不允许客户端将消息放在 london 和 paris 上，但它们仍然应该在集群中。这可以通过工作负载管理来实现吗？

如果还有其他解决方案，请告诉我。所有这些都应该在客户端不做任何更改的情况下完成。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:13:09.573

在此处添加 T.Rob 的建议是您可以查看的几个选项：

1.  `london`在和中禁用放置集群队列实例`paris`。因此消息将在`newyork`和之间分发`tokyo`。

2.  编写一个集群工作负载平衡出口，该出口将跳过将消息放入 和 中的集群队列，`london`而仅将消息放入和`paris`中的集群队列实例。`newyork``tokyo`

请参阅MQ 7 文档中的[编写和编译集群工作负载出口](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp?topic=%2Fcom.ibm.mq.doc%2Fqc10950_.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T10:07:51.977

重要的是要记住，WebSphere MQ 集群提供了一个上下文来告诉队列管理器如何在它们之间进行对话。另一方面，客户端完全不知道集群。必须明确告知客户端要连接到哪个队列管理器。

在您的情况下，在配置客户端时为他们提供`newyork`和`tokoyo`QMgrs 的连接详细信息，他们不会连接到`london`or `paris`。假设所有这些 QMgrs 都在一个 WebSphere MQ 集群中，来自客户端的消息将能够解析到驻留在`london`和上的集群队列`paris`。

# matlab - 如何在相机校准matlab工具箱中进行透视校正

> ID：12811204
> 
> 赞同：1
> 
> 时间：2012-10-10T02:39:43.230
> 
> 标签：matlab, perspective

我正在使用 matlab 相机校准工具箱进行相机失真和透视校正。在工具箱下，我插入了另一张ckeckerboard的图像（未用于校准），程序可以计算出该图像的外部参数R_ext和T_ext。我想使用这些旋转矩阵和平移矩阵对该图像进行透视校正。但我总是失败，我无法弄清楚问题所在。我只是使用图像网格 x_kk(1:1280*1:960) 和方程 inv(R_ext)*(x_kk-T_ext) 来获取世界坐标系，然后使用 matlab 中的 triscatterinterp 函数将图像与计算物体位置。在我的学费中，我应该得到透视校正的棋盘（没有倾斜，没有旋转，没有扭曲），但结果是错误的。

我刚开始使用机器版本，所以有人可以帮助我吗？

# algorithm - 对于给定的商品 X 和购物记录数组，编写代码以找出购买商品 X 的顾客主要购买的其他商品（商品 Y）

> ID：12811206
> 
> 赞同：1
> 
> 时间：2012-10-10T02:39:51.983
> 
> 标签：algorithm

我们有一个代表客户购物记录的数组。例如，它是一个这样的数组：

```
custA, item1,
custB, item1,
custA, item2,
custB, item3,
custC, item1,
custC, item3,
custD, item2, 
```

该数组表示客户 A 购买了商品 1，客户 B 购买了商品 1，客户 A 购买了商品 2，客户 B 购买了商品 3，等等。对于给定的商品 X 和购物记录数组，编写代码找出还有什么（商品Y) 主要由购买商品 X 的客户购买。例如，在上面的示例中，如果 X 是商品 1，那么 Y 应该是商品 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:21:29.907

一种方法可以遍历二维数组并找到购买 item1 的人的列表（或映射以进行有效查找）。
然后通过在此循环中再次迭代数组来创建 itemName 和 purchaseCount 的映射，将条目放入映射中以供出现在 item1 买家列表中的人使用。
现在再次遍历地图并找到所需的项目。
对于 N*2 数组，这种方法需要 3N 次迭代，并且需要高达 3N 的空间（N 用于买家列表，N*2 用于项目计数图，加上地图会消耗额外的空间）

# ruby-on-rails - 日期与 ActiveSupport::TimeWithZone 的比较失败

> ID：12811207
> 
> 赞同：18
> 
> 时间：2012-10-10T02:39:53.043
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, unit-testing, rspec

我的模型上有一个`age`方法`Waiver`，如下所示：

```
 def age(date = nil)

    if date.nil?
      date = Date.today
    end
    age = 0
    unless date_of_birth.nil?
      age = date.year - date_of_birth.year
      age -= 1 if date < date_of_birth + age.years #for days before birthday
    end
    return age
  end 
```

然后我有一个看起来像这样的规范：

```
it "calculates the proper age" do
 waiver = FactoryGirl.create(:waiver, date_of_birth: 12.years.ago)
 waiver.age.should == 12
end 
```

当我运行这个规范时，我得到`comparison of Date with ActiveSupport::TimeWithZone failed`. 我究竟做错了什么？

```
Failures:

  1) Waiver calculates the proper age
     Failure/Error: waiver.age.should == 12
     ArgumentError:
       comparison of Date with ActiveSupport::TimeWithZone failed
     # ./app/models/waiver.rb:132:in `<'
     # ./app/models/waiver.rb:132:in `age'
     # ./spec/models/waiver_spec.rb:23:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-10T03:04:12.330

您正在将一个实例`Date`与`ActiveSupport::TimeWithZone`表达式中的一个实例进行比较`date < date_of_birth + age.years`；[根据文档](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)， ActiveSupport::TimeWithZone 是一个类似时间的类，可以表示任何时区的时间。如果不执行某种转换，您根本无法比较`Date`和对象。在控制台上`Time`尝试；`Date.today < Time.now`你会看到一个类似的错误。

像`12.years.ago`典型的 ActiveRecord 时间戳这样的表达式是 ActiveSupport::TimeWithZone 的实例。您最好确保您只处理`Time`对象或`Date`对象，而不是在此方法中同时处理两者。为了使您的比较是最新的，表达式可以改为：

```
age -= 1 if date < (date_of_birth + age.years).to_date 
```

# python - Django PDF：如何在浏览器中显示进度？

> ID：12811210
> 
> 赞同：0
> 
> 时间：2012-10-10T02:40:06.350
> 
> 标签：python, django, http, pdf, reportlab

在加载整个文件之前，该文件不会显示。如何在浏览器中显示进度？

```
from io import BytesIO
from reportlab.pdfgen import canvas
from django.http import HttpResponse

def some_view(request):
     # Create the HttpResponse object with the appropriate PDF headers.
     response = HttpResponse(mimetype='application/pdf')
     response['Content-Disposition'] = 'attachment; filename="somefilename.pdf"'

     buffer = BytesIO()

     # Create the PDF object, using the BytesIO object as its "file."
     p = canvas.Canvas(buffer)

     p.drawString(**, **, "Hello world.") # draw pdf, size > 10M

     # Close the PDF object cleanly.
     p.showPage()
     p.save()

     # Get the value of the BytesIO buffer and write it to the response.
     pdf = buffer.getvalue()
     buffer.close()
     response.write(pdf)
     return response 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:33:55.537

好吧，在您的示例中，我认为这将非常简单（并且几乎是瞬时的）。您只需打印/返回 、 等的进度指示器`drawString`。`showPage`假设您生成的实际 PDF 涉及更多，您可以使用该类的`setProgressCallBack`方法`BaseDocTemplate`。当然，这需要您使用 reportlab platypus 引擎。

有一些注意的方法/属性（请参阅注释），假设您有一个自定义模板类，它覆盖`BaseDocTemplate`：

```
from reportlab.platypus import BaseDocTemplate

class MyDocTemplate(BaseDocTemplate):
    """Override BaseDocTemplate for "progress bar" information"""

    def __init__(self, *args, **kwargs):
        BaseDocTemplate.__init__(self, *args, **kwargs)
        # BaseDocTemplate keeps a "progress" dictionary for its own
        # internal use, which is updated as various drawings are done.
        # This directs reportlab to use your own custom method
        # as the "callback" function when updates are made.
        # Notice the use of the __ prefix for the method, which ensures
        # that it calls *your* custom class's method, and not the default.
        # Should match the signature of the original callback: (self, type, value)
        self.setProgressCallBack(self.__onProgress)

    def __onProgress(self, prog_type, value):
        """Progress monitoring"""

        # One example "progress type" is the "PAGE" key. Which indicates
        # which page reportlab is working on.
        if prog_type == "PAGE":
            print "Drawing page: %s" % value
        elif prog_type == "FINISHED":
            print "Drawing complete!" 
```

这里还有一些值（您可以在 中查看代码`reportlab.platypus.doctemplate`）：

```
def progressCB(typ, value):
    """Example prototype for progress monitoring.

    This aims to provide info about what is going on
    during a big job.  It should enable, for example, a reasonably
    smooth progress bar to be drawn.  We design the argument
    signature to be predictable and conducive to programming in
    other (type safe) languages.  If set, this will be called
    repeatedly with pairs of values.  The first is a string
    indicating the type of call; the second is a numeric value.

    typ 'STARTING', value = 0
    typ 'SIZE_EST', value = numeric estimate of job size
    typ 'PASS', value = number of this rendering pass
    typ 'PROGRESS', value = number between 0 and SIZE_EST
    typ 'PAGE', value = page number of page
    type 'FINISHED', value = 0

    The sequence is
        STARTING - always called once
        SIZE_EST - always called once
        PROGRESS - called often
        PAGE - called often when page is emitted
        FINISHED - called when really, really finished

    some juggling is needed to accurately estimate numbers of
    pages in pageDrawing mode.

    NOTE: the SIZE_EST is a guess.  It is possible that the
    PROGRESS value may slightly exceed it, or may even step
    back a little on rare occasions.  The only way to be
    really accurate would be to do two passes, and I don't
    want to take that performance hit.
    """
    print 'PROGRESS MONITOR:  %-10s   %d' % (typ, value) 
```

# regex - 如何从 url 重定向到这个 url .htaccess 的一部分

> ID：12811212
> 
> 赞同：-1
> 
> 时间：2012-10-10T02:40:17.440
> 
> 标签：regex, apache, .htaccess, mod-rewrite

请您告诉如何使用 apache .htaccess 进行重定向：

**从** `http://www.domain1.com/products/?http://www.domain2.com/sdssds?%dfdf`

**到** `http://www.domain2.com/sdssds?%dfdf`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:32:49.173

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+products/\?([^\s]+) [NC]
RewriteRule ^ %1 [L,R=302,NE] 
```

# algorithm - 修改后的最短路径 - 没有 2 个具有相同颜色的连续边

> ID：12811215
> 
> 赞同：1
> 
> 时间：2012-10-10T02:40:33.580
> 
> 标签：algorithm

实际上，我已经考虑这个分配的问题有一段时间了，但我无处可去……我知道 Bellman-Ford、Dijkstra 和 Floyd Warshall。

几乎这是一个标准的最短路径问题，有 V 个顶点和 E 个边，每个边的长度为 L，颜色为 C。它们是双向的。

唯一的限制是您应该找到最短路径的长度，而不要使用相同颜色的 2 个连续边。

如果 V 较小，Floyd-warshall 可以工作，但 V 以 (3, 50000) 为界。

有什么帮助吗？想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:41:17.687

尝试类似 Dijkstra 的方法，但要跟踪到每个顶点*以特定颜色结束的最短路径。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:22:11.167

[http://paginas.matem.unam.mx/publicaciones/phocadownloadpap/Preliminares-DF/879.pdf](http://paginas.matem.unam.mx/publicaciones/phocadownloadpap/Preliminares-DF/879.pdf)上的论文，弧色有向图中的最短 H 限制路径，似乎使用了一种非常标准的寻路算法，但是为每个顶点的每种颜色保留单独的信息。它适用于有向图，但我想您可以从无向图构造有向图。

# php - 如何在php中以正确的方式将图像从url放入文件夹？

> ID：12811217
> 
> 赞同：0
> 
> 时间：2012-10-10T02:40:54.430
> 
> 标签：php

```
 <?php
$img = 'http://ecx.images-amazon.com/images/I/41pg1dHauUL._SL75_.jpg';
$target_path = 'product-images/';
$target_path= $target_path.basename($img);

if(move_uploaded_file($img,$target_path)){
    echo '<br>Success.';
}
else {
    echo '<br>Error.';
}
?> 
```

我不知道出了什么问题，我认为我的路径是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:10:56.223

这可能会帮助你。

```
 <?php
    $img = 'http://ecx.images-amazon.com/images/I/41pg1dHauUL._SL75_.jpg';
    $target_path = 'CHANGEYOURPATH/CHANGEYOURIMAGENAME.CHANGEYOUREXTENSION';

if (file_put_contents($target_path, file_get_contents($img)))
{
    echo "Success";
}

else
{
    echo "Error!";
}

 // EXAMPLE

    $img = 'http://ecx.images-amazon.com/images/I/41pg1dHauUL._SL75_.jpg';
        $target_path = 'C:\TEST\image.jpg';
        file_put_contents($target_path, file_get_contents($img));
        ?> 
```

# javascript - 在多个li的html中搜索一个字符串

> ID：12811222
> 
> 赞同：3
> 
> 时间：2012-10-10T02:41:37.790
> 
> 标签：javascript

我有一个单页网站，我正在尝试向其中添加搜索功能。使用纯 javascript（无 jquery）我想在搜索框中输入任何单词/短语，并搜索不同 li 的内容/HTML。我猜我将不得不使用innerHTML 和.indexOf 的某种组合，但我不确定。这是我所指的网站的链接[http://www.executiveinsurance.com/](http://www.executiveinsurance.com/)任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:47:36.527

你可以做这样的事情

```
var searchKeyword = "sampleSearch";   
var allLis = document.getElementsByTagName("li");
var searchResults = [];
for(var i=0;i<allLis.length;i++){
if(allLis[i].innerHtml.indexOf(searchKeyword)>-1){
searchResults.push(allLis[i]);
} 
```

searchResults 数组应包含其中包含 searchKeyword 的元素。我没有测试过这个，但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T02:54:44.663

刚开始，您可以在此基础上进行构建

```
function search()
{
    var lis = document.getElementsByTagName("li");
    var searchText = document.getElementById("searchBox").value;

    for(var i=0;i<lis.length;i++)
    {
        if(lis[i].innerHTML.indexOf(searchText) > -1)
           lis[i].style.color = 'red';
    }
}​ 
```

**只是如果您想突出显示特定的单词**

```
lis[i].innerHTML = lis[i].innerHTML.replace(searchText,'<span style="color:red">'+searchText+'</span>'); 
```

[**在此处查看 JsFiddle 演示**](http://jsfiddle.net/fCKfX/)

# c++ - C++ 从字符数组返回类型 T 的指针

> ID：12811223
> 
> 赞同：1
> 
> 时间：2012-10-10T02:41:37.393
> 
> 标签：c++, arrays, templates, pointers, typedef

我们正在开展一个项目，该项目需要我们用 C++ 制作和管理堆。我们正在使用一个字符数组来存储我们的内存（在项目中没有使用“new”）。我们有一个分配函数，它需要返回一个类型为 T 的指针。我们有几个类型定义和一个模板来帮助我们

```
template <typename T>
typedef T    value_type;
typedef value_type*  pointer; 
```

所以我们需要返回一个“指针”。问题：

**我们如何返回一个指向字符数组中某个索引的“指针”？**

假设分配的块的开头指向地址 5，并且类型名 T 是 int。我们如何创建一个指向数组索引 5 的 int 指针（使用我们的“指针”）？

我们尝试使用`reinterpret_cast <pointer> (a[index])`将数组索引转换为指针。此外，我们尝试`reinterpret_cast <pointer> (a + index)`获取数组指针，将其按索引向上移动，并将其转换为我们的类型指针。每次，指针都指向“0xfffffffffff”之类的东西或一堆f，后面可能跟着一个0c或一些随机值，因此一旦我们稍后在程序中取消引用它（例如在构造函数中），就会导致分段错误。

谢谢！

编辑数组“a”是我们的字符数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:10:22.203

我想我们想通了。我们有：

`reinterpret_cast <pointer> (a[index])`

这会给我们数组索引的指针（基本上是**一个值的指针，****而**不是一个值的指针）。

我们将其更改为

`reinterpret_cast <pointer> (&a[index])`

这会给我们一个指向数组索引的指针（基本上是指向**值**的指针，而不是值**的**指针）。对不起，如果这种巧妙地使用“of”和“to”并没有起到作用。我想这之间的区别

`int a = 5`

`int* k = &a`

对比

`int* k = a //even though this wouldnt compile`

# jquery - 是否可以将对象从 jquery 发布到 bottle.py？

> ID：12811231
> 
> 赞同：2
> 
> 时间：2012-10-10T02:42:42.087
> 
> 标签：jquery, python, bottle

这是jQuery

```
$.ajax({
    type: "POST",
    url: "/posthere",
    dataType: "json",
    data: {myDict:{'1':'1', '2':'2'}},
    success: function(data){
        //do code
    }
}); 
```

这是蟒蛇

```
@route("/posthere", method="POST")
def postResource(myDict):
    #do code
    return "something" 
```

看起来支持 int、float、path 和 re 的 url 格式......我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T05:06:26.597

线上只有字节。要发送一个对象，您需要使用某种数据格式对其进行序列化，例如[json](https://stackoverflow.com/a/6323528/4279)：

```
$.ajax({
    type: "POST",
    url: "/posthere",
    data: JSON.stringify({myDict: {'1':'1', '2':'2'}}),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data){
        alert(data);
    },
    failure: function(err) {
        alert(err);
    }
}); 
```

在接收端，您需要将 json 文本解析为 Python 对象：

```
from bottle import request, route

@route("/posthere", method="POST")
def postResource():
    #do code
    myDict = request.json['myDict']
    return {"result": "something"} 
```

返回的字典会自动转换为 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:01:37.767

它可能不那么相关，但简而言之，答案是“否”和“是”。如果您使用的是 jquery 的 data 属性。它实际上会将您的对象转换为字段。像这样的东西：

```
{
  friend: [1,2,3]
} 
```

可以这样发送到服务器：

```
friend[0]=1&friend[1]=2&friend[2]=3 
```

也就是说，HTTP 实际上并没有定义任何“正确”的方式来向服务器发送数据。jQuery 这样做是为了让它像客户端发布表单一样工作。所以它正在序列化像formdata这样的数据。

但这还不是全部！因为您可以随心所欲地发送数据。你可以做一些不同的事情。我不确定是否可以使用 jQuery 发送原始数据。

您可能想尝试一下：

```
$.ajax({
  url: ...,
  data: myObject.toJSON(),
  ...
}) 
```

由于您发送的字符串没有任何定义的字段。您必须在服务器上检查原始数据。将`JSON`字符串转换为 dict 就可以了。

要将 json 发送到您的服务器，有一个很棒的东西叫做 jsonrpc。

[http://www.jsonrpc.org/](http://www.jsonrpc.org/)

不幸的是，我的知识`bottle.py`接近于 0，所以我对如何获取数据无能为力。

**tldr**

将 json 发送到服务器，然后将其解析回 dict，只要您知道如何将其解析回另一端，您就可以发送任何其他内容。（xml、json、消息包...）

# view - How to set the first view in the ViewPager?

> ID：12811234
> 
> 赞同：1
> 
> 时间：2012-10-10T02:43:15.107
> 
> 标签：view, android-viewpager

I use ViewPager to switch several views.

public class MainA extends ActivityGroup {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ViewPager pager = (ViewPager)findViewById(R.id.viewpager);
    ViewPager pager = (ViewPager)findViewById(R.id.viewpager);
    View view1 = inflater.inflate(R.layout.viewa,null );
    View view2 = inflater.inflate(R.layout.viewp, null);
    ImageView imageView = new ImageView(getApplicationContext());
    imageView.setImageResource(R.drawable.ic_action_search);
    views.add(imageView);
    views.add(view1);
    views.add(view2);}} 
```

ViewPager will set imageView as first view. When I turn left,there is no view. When I turn right , view1 will come out. Now I have one question. I want to set view1 as first view. When I turn left, imageView will come out. When I turn right, view2 will come out. How to do that ???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:37:45.643

如果您有多个视图，那么最好使用 PagerAdapter 添加所有这些视图。然后像这样设置第一个视图选择

```
 ViewPagerAdapter adapter = new ViewPagerAdapter(this, imageArra);
 ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
 myPager.setAdapter(adapter);
 myPager.setCurrentItem(0);` 
```

# java - Using Dot Operator(JSTL) in Java

> ID：12811237
> 
> 赞同：1
> 
> 时间：2012-10-10T02:43:44.323
> 
> 标签：java, jstl, apache-commons-beanutils

I have a requirement where I need to traverse a hierarchy of Java beans and the hierarchy is different based on the starting point. What would be ideal is if I would be able to use the "dot operator" from JSTL in my Java class.

Then I can have a static map of Strings to describe my hierarchy..something like:

```
clazz1=attribute1.attribute2
clazz2=attribute3.attribute4 
```

I look up which class and which attributes I need to drill down and go to the root object.

I am coding for it anyway, just checking if BeanUtils etc had such a facility already since seems to me like it can be an useful feature.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:07:11.730

您可以在 groovy 中编写一些代码 - 它编译为 java 字节码，因此可以完美地互操作。

# android - Android 上的 pcsc-lite 和 ccid

> ID：12811241
> 
> 赞同：3
> 
> 时间：2012-10-10T02:44:59.050
> 
> 标签：android, linux, pcsc

有人有将 pcsc-lite/ccid 移植到 Android 的经验吗？我不需要从应用程序层访问智能卡/读卡器，只需从外壳。所以，只要我能让 pcscd 守护进程运行，就可以了。

由于 pcsc-lite 需要，我是否还必须将 libusb/libhal 移植到 Android？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:32:52.367

它已经完成并且可以工作，但是不确定当前补丁支持的 Android 版本。查看 SEEK 站点及其邮件列表以获取更多信息：[https](https://seek-for-android.github.io/) ://seek-for-android.github.io/ 。

# c++ - OpenGL project returns with undefined references

> ID：12811244
> 
> 赞同：3
> 
> 时间：2012-10-10T02:45:13.223
> 
> 标签：c++, windows, opengl

I am following a tutorial for OpenGL from this [site](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-1-opening-a-window/). I have downloaded and installed (hopefully correctly) the OpenGL libraries that are used. (GLEW, GLFW, GLM). However, when I compile the code from the site, I find a lot of errors with undefined references.

Code:

```
#include <stdio.h>
#include <stdlib.h>

#include <GL/glew.h>

#include <GL/glfw.h>

#include <glm/glm.hpp>
using namespace glm;

int main( void )
{
    // Initialize GLFW
    if( !glfwInit() )
    {
        fprintf( stderr, "Failed to initialize GLFW\n" );
        return -1;
    }

    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4);
    glfwOpenWindowHint(GLFW_WINDOW_NO_RESIZE,GL_TRUE);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    // Open a window and create its OpenGL context
    if( !glfwOpenWindow( 1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW ) )
    {
        fprintf( stderr, "Failed to open GLFW window. If you have an Intel GPU, they are not 3.3 compatible. Try the 2.1 version of the tutorials.\n" );
        glfwTerminate();
        return -1;
    }

    // Initialize GLEW
    if (glewInit() != GLEW_OK) {
        fprintf(stderr, "Failed to initialize GLEW\n");
        return -1;
    }

    glfwSetWindowTitle( "Playground" );

    // Ensure we can capture the escape key being pressed below
    glfwEnable( GLFW_STICKY_KEYS );

    // Dark blue background
    glClearColor(0.0f, 0.0f, 0.3f, 0.0f);

    do{
        // Draw nothing, see you in tutorial 2 !

        // Swap buffers
        glfwSwapBuffers();

    } // Check if the ESC key was pressed or the window was closed
    while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
           glfwGetWindowParam( GLFW_OPENED ) );

    // Close OpenGL window and terminate GLFW
    glfwTerminate();

    return 0;
} 
```

Errors:

```
"make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/cygdrive/c/Users/jared/Documents/NetBeansProjects/opengl_1'
"make"  -f nbproject/Makefile-Debug.mk dist/Debug/MinGW-Windows/opengl_1.exe
make[2]: Entering directory `/cygdrive/c/Users/jared/Documents/NetBeansProjects/opengl_1'
mkdir -p dist/Debug/MinGW-Windows
g++.exe     -o dist/Debug/MinGW-Windows/opengl_1 build/Debug/MinGW-Windows/main.o  
build/Debug/MinGW-Windows/main.o: In function `main':
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:21: undefined reference to `glfwInit'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:27: undefined reference to `glfwOpenWindowHint'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:28: undefined reference to `glfwOpenWindowHint'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:29: undefined reference to `glfwOpenWindowHint'
nbproject/Makefile-Debug.mk:62: recipe for target `dist/Debug/MinGW-Windows/opengl_1.exe' failed
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:30: undefined reference to `glfwOpenWindowHint'
make[2]: Leaving directory `/cygdrive/c/Users/jared/Documents/NetBeansProjects/opengl_1'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:31: undefined reference to `glfwOpenWindowHint'
nbproject/Makefile-Debug.mk:59: recipe for target `.build-conf' failed
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:34: undefined reference to `glfwOpenWindow'
make[1]: Leaving directory `/cygdrive/c/Users/jared/Documents/NetBeansProjects/opengl_1'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:37: undefined reference to `glfwTerminate'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:42: undefined reference to `_imp__glewInit@0'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:47: undefined reference to `glfwSetWindowTitle'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:50: undefined reference to `glfwEnable'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:53: undefined reference to `glClearColor@16'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:59: undefined reference to `glfwSwapBuffers'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:62: undefined reference to `glfwGetKey'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:63: undefined reference to `glfwGetWindowParam'
C:\Users\jared\Documents\NetBeansProjects\opengl_1/main.cpp:66: undefined reference to `glfwTerminate'
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/MinGW-Windows/opengl_1.exe] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 875ms) 
```

Note: I'm using Netbeans (with C++ plugin) as an IDE.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:05:22.813

重新阅读 makefile 输出，我发现您实际上并没有链接到 GL 库。您需要修改项目设置以包含库。

# cakephp - CakeDC 搜索插件产生重复条件

> ID：12811246
> 
> 赞同：0
> 
> 时间：2012-10-10T02:45:30.993
> 
> 标签：cakephp, cakephp-2.2, cakedc

所以我正在使用（非常棒的）Cake DC Search 插件。除其他外，我想要一个“最小”和“最大”输入，并搜索“数量”在“最小”和“最大”范围内的记录，如果两者都设置了，或者大于/小于最小/max 如果只设置了一个。

我已经让它工作了——唯一的问题是条件在 SQL 查询中被包含两次。很明显为什么......这是我的模型代码：

```
public $filterArgs = array(
    'range_min' => array('type' => 'query', 'method' => 'findByAmountRange'),
    'range_max' => array('type' => 'query', 'method' => 'findByAmountRange'),
    // Other rules go here
);

public function findByAmountRange($data = array()) {
    // Returns a condition something like 'Model.amount BETWEEN 1 and 100'
} 
```

因此，因为 $filterArgs 的 'range_min' 和 'range_max' 键都使用相同的方法（findByAmountRange），所以条件被包含两次。

所以，有三种解决方案：

1.  别担心，让条件出现两次

2.  在模型中创建一个实例变量，比如findByAmountRangeHasBeenCalled，并在方法第一次调用时设置为true，这样以后我们就知道不要再调用了

3.  找到更优雅的解决方案。搜索插件有什么办法解决这个问题吗？您可以将其设置为使两个字段共享一个共同的 filterArgs 方法，以便它只被调用一次吗？

提前致谢。

PS - 我知道搜索插件的测试用例包括一个“生成范围条件”示例，但这不是我想要的 - 我想要两个字段，用户可以输入它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:09:53.943

OK, so it doesn't look like I'll get a proper answer. So, I've gone for option 1 - just leaving the duplicate condition in the query. Apparently MySQL will run a query optimiser prior to executing, and remove the duplicate condition, and so it won't affect speed in any significant way.

# objective-c - iOS：使用 Core Data 插入数据库

> ID：12811247
> 
> 赞同：0
> 
> 时间：2012-10-10T02:45:31.450
> 
> 标签：objective-c, ios, database, networking, core-data

使用核心数据时，我将如何将值插入数据库，甚至与数据库交互。有没有一个很好的教程？我已经阅读了 Core Data 教程，但大多数文件都是在本地完成的。

**更新**
我上一个问题中的某个人回答了这个这
`"Core Data can use a database to accomplish this, but that's it's business, not yours. When you use Core Data, it is a black box. You tell it to save the data and then step out of the way."`
是否意味着它会自动为我做数据库方面的工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:53:05.833

核心数据是一个黑盒子，因为它是一个面向对象的 API，用于与设备（和 iCloud）上的 SQLite 数据库进行交互。如果您要推送到具有 SQL 数据库后端的 Web 服务......好吧，我已经为提供休息接口的 Web 服务使用了 php 控制器。然后我从我的设备获取数据并点击其余控制器方法，在 http 帖子中传递任何适合作为参数的数据。不确定这是一般做法还是最佳做法，但根据我的经验，我们就是这样做的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:23:32.873

Core Data 不是数据库管理器，它不仅仅与您的数据库交互。至少，您应该将 Core Data 视为 ORM。或许，理解 Core Data 的最佳方式是将其视为图形管理员。您将通过上下文 ( `NSManagedObjectContext`) 与核心数据进行交互，这将允许您从中获取对象，并插入、编辑和删除它们。对象是 的子类`NSManagedObject`。要关心的一件重要事情是线程。`NSManagedObject`不是线程安全的，你不应该在线程之间传递它们。采用`NSManagedObjectsID`s 代替。重要的是，你不需要关心核心数据如何存储东西，你可以设置存储的格式，但仅此而已（在这方面，你在选择存储时确实需要考虑一些事情，比如性能，以及是否需要在运行之间持久化数据，但让 Core Data 处理细节）。

如果你想了解更多，[Marcus Zarra 的书非常棒](http://pragprog.com/book/mzcd/core-data)

# c - 带链表的冒泡排序

> ID：12811249
> 
> 赞同：1
> 
> 时间：2012-10-10T02:46:13.700
> 
> 标签：c, linked-list, bubble-sort

我正在编写一个冒泡排序函数来对双向链表中的节点进行排序。我的功能非常接近工作，但我错过了一些简单的东西，我无法弄清楚。

```
void sort (struct lnode** head, void (*swapPtr) (struct lnode** head, struct lnode* n1, struct lnode* n2),
                            int(*comparePtr) (void* v1, void* v2)) {

struct lnode* next;
struct lnode* temp = *head;
int comp;
struct lnode* temp2;
int count = 0;

while (temp != NULL) {
    temp2 = nodeGetNext(temp);
    temp = temp2;
    count++;

}

temp = *head;
for(int i = 0; i < count; i++) {
    next = nodeGetNext(temp);

    comp = comparePtr(temp,next);
    if (comp == 1)
        swapPtr(head, temp, next);
    else if (comp == -1)
        swapPtr(head, next, temp);

    temp = nodeGetNext(next);
}

} 
```

当我运行该函数时，它只交换前两个节点。我猜我在`for`循环结束时没有正确设置温度。我尝试了一些不同的事情，但没有任何成功。我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:50:46.277

看起来你只在列表中传递了一次。您需要继续循环遍历列表并继续交换，直到没有可交换的内容。查看此[答案](https://stackoverflow.com/a/3732610/362938)以获取示例，并查看[Wikipedia](http://en.wikipedia.org/wiki/Bubble_sort)以获取详细的算法描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:57:35.067

我使用嵌套循环完成了此操作，因为您遍历列表的次数等于节点数减 1，这是最坏的情况。当没有从上一次传递中完成交换时，传递的循环将停止（感谢失谐）。

```
hasSwap = 1; /* enable the first pass to execute */
for(i=0; i<len-1 && hasSwap == 1; i++)
{
    hasSwap = 0; /* initially, there is no swap in this pass */
    for(j=0; j<len-1; j++)
    {
       if(l[j] > l[j+1])
       {
            t = l[j];
            l[j] = l[j+1];
            l[j+1] = t; 
            hasSwap = 1; /* the pass has at least 1 swap, if not set, there will be no other pass */
       } 
    }

    printf("Pass %d: ", i);
    for(k=0; k<len; k++)
    {
       printf("%d", l[k]);
    }
    printf("\n");
} 
```

**示例 1：**最坏的情况，列表按降序排序。

5、4、3

*第一关：*

i = 0, j = 0, hasSwap = 1 -> [5], [4], 3

i = 0, j = 1, hasSwap = 1 -> 4, [5], [3]

有前一次通过的掉期吗？是的，继续。

*第二关：*

i = 1, j = 0, hasSwap = 1 -> [4], [3], 5

i = 1, j = 1, hasSwap = 1 -> 3, [4], [5]

有前一次通过的掉期吗？没有，但达到了最大通过次数。

**示例 2：**这已经排序。

3、4、5

*第一关：*

i = 0, j = 0, hasSwap = 0 -> 3, 4, 5

i = 0, j = 1, hasSwap = 0 -> 3, 4, 5

有前一次通过的掉期吗？没有，停下。

# java - 访谈：找出两个整数范围之间的整个立方体

> ID：12811251
> 
> 赞同：3
> 
> 时间：2012-10-10T02:46:43.237
> 
> 标签：java

我刚刚接受了关于 codility 的编码面试

我被要求实施以下内容，但我无法在 20 分钟内完成，现在我来这里是为了从这个社区获得想法

编写一个函数`public int whole_cubes_count ( int A,int B )`，它应该返回范围内的整个立方体

例如，如果 A=8 和 B=65，范围内所有可能的立方体是 2^3 =8 、 3^3 =27 和 4^3=64，所以函数应该返回计数 3

我无法弄清楚如何将一个数字识别为整个立方体。我该如何解决这个问题？

A 和 B 的范围可以从 [-20000 到 20000]

这是我尝试过的

```
import java.util.Scanner;
class Solution1 {
  public int whole_cubes_count ( int A,int B ) {
      int count =0;

    while(A<=B)
    {
        double v = Math.pow(A, 1 / 3); // << What goes here?
        System.out.println(v);
        if (v<=B)
            {
            count=count+1;
            }
        A =A +1;
    }
    return count ;
  }

  public static void main(String[] args) 
  {
    System.out.println("Enter 1st Number");
    Scanner scan = new Scanner(System.in);
    int s1 = scan.nextInt();
    System.out.println("Enter 2nd Number");
    //Scanner scan = new Scanner(System.in);
    int s2 = scan.nextInt();
    Solution1 n = new Solution1();
     System.out.println(n.whole_cubes_count (s1,s2));
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T02:51:35.070

对于正立方体：

```
i = 1
while i^3 < max
    ++i 
```

对于负立方体也是如此，但在比较中具有绝对值。

为了使这更普遍，您需要找到`i`where的值，`i^3 >= min`如果`min`和`max`都是正数。如果两者都为负`min`，则类似的解决方案有效。`max`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T02:52:20.267

**肮脏和肮脏，这就是我所说的。**

如果你只有 20 分钟，那么他们不应该期望超级优化的代码。所以不要尝试。发挥系统的限制条件，即只有 +20,000 到 -20,000 作为范围。您知道立方体值必须在 27 以内，因为 27 * 27 * 27 = 19683。

```
public int whole_cubes_count(int a, int b) {
    int count = 0;
    int cube;
    for (int x = -27; x <= 27; x++) {
        cube = x * x * x;
        if ((cube >= a) && (cube <= b))
            count++;
    }
    return count;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-16T20:46:24.283

好吧，它可以用 O(1) 复杂度计算，我们需要找到适合该范围的最大立方体和最小的立方体。所有介于两者之间的人显然也会在里面。

```
def n_cubes(A, B):
    a_cr = int(math.ceil(cube_root(A)))
    b_cr = int(math.floor(cube_root(B)))

    if b_cr >= a_cr:
        return b_cr - a_cr + 1
    return 0 
```

只需确保您的 cube_root 返回实际立方体的整数即可。完整的解决方案作为要点[https://gist.github.com/tymofij/9035744](https://gist.github.com/tymofij/9035744)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-04T11:47:54.253

```
int countNoOfCubes(int a, int b) {
        int count = 0;
        for (int startsCube = (int) Math.ceil(Math.cbrt(a)); Math.pow(
                startsCube, 3.0) <= b; startsCube++) {
            count++;
        }
        return count;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-26T07:24:23.880

@Tim 建议的解决方案比 @Erick 提供的解决方案更快，尤其是当 A...B 范围增加时。让我在这里引用 github 的基础：“人们可以注意到 x³ > y³ 对于任何 x > y。（这称为单调函数）因此对于位于 ∛A ≤ x ≤ ∛B 中的任何 x，立方体将适合：A ≤ x³ ≤ B

因此，要获得位于 A..B 内的立方体数，您可以简单地计算 ∛A 和 ∛B 之间的整数个数。两个数字之间的整数个数就是它们的差。”

这似乎完全正确，不是吗？它适用于任何电源，不仅适用于立方体。这是我的用于 java 的 cube_root 方法的端口：

```
/*
 * make sure your cube_root returns integers for actual cubes
 */
static double cubeRoot(int x) {
    //negative number cannot be raised to a fractional power
    double res = Math.copySign(Math.pow(Math.abs(x), (1.0d/3)) , x);
    long rounded_res = symmetricRound(res);
    if (rounded_res * rounded_res * rounded_res == x)
        return rounded_res;
    else
        return res;
}

private static long symmetricRound( double d ) {
    return d < 0 ? - Math.round( -d ) : Math.round( d );
} 
```

我知道 java 中的 Math.cbrt 但是使用 Math.pow 方法很容易将解决方案推广到其他指数。

# javascript - How to implement Javascript ECMA 5's array.map() for sparse array?

> ID：12811254
> 
> 赞同：6
> 
> 时间：2012-10-10T02:47:11.383
> 
> 标签：javascript

It should be quite easy to implement `array.map()` that is [defined in ECMA-262](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.19), which takes a function and this function will be called by 3 arguments: element value, index, the array.

But what about for sparse array? Obviously we don't want to iterate from index 0 to 100,000 if only index 0, 1, 2, and 100,000 has an element and otherwise is sparse from index 3 to 99,999\. I can think of using `arr.slice(0)` or `arr.concat()` to clone the array, and then put in the replaced values, but what if we don't use `slice` or `concat`, is there another way to do it?

The solution I came up with using `slice()` is:

```
Array.prototype.collect = Array.prototype.collect || function(fn) {
    var result = this.slice(0);

    for (var i in this) {
      if (this.hasOwnProperty(i))
        result[i] = fn(this[i], i, this);  // 3 arguments according to ECMA specs
    }
    return result;
}; 
```

(`collect` is used to try out the code, as that's another name for `map` in some language)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:00:45.370

这应该很容易，但有一些特殊的地方。

允许回调函数修改相关数组。它添加或删除的任何元素都不会被访问。因此，我们似乎应该使用 Object.keys 之类的东西来确定要访问的元素。

此外，结果被定义为一个新数组，“好像由”数组构造函数使用旧数组的长度“创建”一样，所以我们不妨使用该构造函数来创建它。

这是一个考虑到这些事情的实现，但可能缺少其他一些细微之处：

```
function map(callbackfn, thisArg) {
  var keys = Object.keys(this),
    result = new Array(this.length);

  keys.forEach(function(key) {
    if (key >= 0 && this.hasOwnProperty(key)) {
      result[key] = callbackfn.call(thisArg, this[key], key, this);
    }
  }, this);

  return result;
} 
```

我假设 Object.keys 按数字顺序返回数组的键，我认为这是实现定义的。如果没有，您可以对它们进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:30:54.300

你不需要使用`this.slice(0)`. 您可以创建`result`一个数组并将值分配给任何索引：

```
Array.prototype.collect = Array.prototype.collect || function(fn) { 
  var result = [];
  for(var i in this) {
    if (this.hasOwnProperty(i)) { 
      result[i] = fn(this[i]);
    }
  }
  return result;
} 
```

# javascript - how to get the data from serial port (RS-232) on client side

> ID：12811256
> 
> 赞同：0
> 
> 时间：2012-10-10T02:47:17.443
> 
> 标签：javascript, html, jsp, com, serial-port

My project i'm doing now is getting the weigh from the scale that use RS-232 port and post it into the website then press submit and the data will be saved into the server. I also study how to get the value from these port using the java API called javax.comm. However, I think it just work on the server, and could be work for one computer. that's the problem. therefore, I want to make a website that the client computer can access to the website and weigh the scale then save it into the server. So, how can we do it? Does javascript work on it?

thanks :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:59:36.693

当然，您可以使用浏览器插件来执行此操作，但这将使应用程序浏览器特定。相反，您可以创建一个简单的桌面代理（Windows 服务、任务栏应用程序），该代理将安装在客户端计算机本身上。

现在，此代理应该响应来自您网页的指向 http://[localhost]:[port] 的 HTTP 请求。这可能需要在代理中嵌入一个简单的 HTTP 服务器。您必须处理的另一个复杂性是跨域请求。您可以使用 JSONp 或 CORS 来处理它。

# android - Android - 从 Spinner 项填充文本视图

> ID：12811260
> 
> 赞同：1
> 
> 时间：2012-10-10T02:47:55.233
> 
> 标签：android, textview, spinner

我想让我的应用程序使用用户从微调器中选择的值填充一个空的文本视图。目前它似乎工作，但它只填充了我猜是整个光标的文本视图：（android.database.sqlite.SQLiteCursor@4120dd08）。有人可以帮我找出问题所在吗？如有必要，我可以发布更多代码。

```
 // Set spinner listener to populate the description field onclick.
    mContext = this;
    commonDescSpin.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id){

            String stringItem = parent.getItemAtPosition(position).toString();
            mDescriptionText.setText(stringItem);

        }
        public void onNothingSelected(AdapterView<?> parent) {}
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:15:03.187

试试这个：

```
 // Set spinner listener to populate the description field onclick. 
    mContext = this; 
    commonDescSpin.setOnItemSelectedListener(new OnItemSelectedListener() { 
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id){ 
              TextView objTextView = (TextView) commonDescSpin.getSelectedView();
            String stringItem = objTextView.getText().toString();
            mDescriptionText.setText(stringItem); 

        } 
        public void onNothingSelected(AdapterView<?> parent) {} 
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:02:10.910

toString() 方法通常具有与识别对象实例相关的其他实现。如果您知道微调器中的项目无疑是一个字符串，您可以考虑执行显式转换：

```
String stringItem = (String)(spinner1.getItemAtPosition(2));
textViewStatus.setText(stringItem); 
```

# html - 菜单切换元素

> ID：12811261
> 
> 赞同：0
> 
> 时间：2012-10-10T02:48:16.263
> 
> 标签：html, css

我正在修改 WHMCS 菜单，使其具有响应性和触感。一切都很好，除了一件事。我无法获得正确的元素来正确显示/切换。

jQuery 脚本所做的是将“打开”类添加到父元素 onclick。所以

```
<div id="menu-icon"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Menu</a></div> 
```

变成：

```
<div id="menu-icon" class="open"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Menu</a></div> 
```

单击“菜单”链接时。

默认情况下，我需要“#nav”到“display:none”，单击“菜单”时需要“display:block”。我无法通过 CSS 完全捕获它。

我的 HTML

```
<nav id="nav-wrap">
<div id="menu-icon"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Menu</a></div>
<ul id="nav"> 
```

我的 CSS

```
#nav-wrap #nav {
    display: none;
}
#nav-wrap #menu-icon.open #nav {
    display: block;
} 
```

使用上面的代码，我可以默认隐藏#nav，仅此而已。有关如何捕获#nav 的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:54:22.403

老板，你犯了一个根本性的错误。

你已经给出了这个代码：

```
<nav id="nav-wrap">
    <div id="menu-icon">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Menu</a>
    </div>
    <ul id="nav">​ 
```

看，`#nav`不属于`#menu-icon`。将代码更改为：

```
<nav id="nav-wrap">
    <div id="menu-icon">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Menu</a>
        <ul id="nav">​
    </div> 
```

它有效！

### Demo here: [http://jsfiddle.net/qqbUY/](http://jsfiddle.net/qqbUY/)

### Screenshot

![enter image description here](../Images/0d621db5bb165dac8d2a7db1fcd01001.png)

# scheme - Remove element off list

> ID：12811262
> 
> 赞同：0
> 
> 时间：2012-10-10T02:48:29.330
> 
> 标签：scheme, racket

Someone tell me what is wrong with this code. I thought I mastered a few scheme skills to solve a friend's problem but it ended up messing my head. I am trying to remove all similar elements off the list. Earlier it was removing only the first element I want to remove, but now its removing the car and the first element f what I want to remove. I am looking for an output like: `(delete 3 (list 2 3 4 3 5 3))`, returns (2 4 5).

```
(define (delete n lst)
    (cond 
         ((null? lst) null)
         ((equal? n (car lst)) (cdr lst))
         (else
             (remove n (cdr lst))))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T03:10:58.900

这是因为这个条件：

```
((equal? n (car lst)) (cdr lst)) 
```

这一行的作用是检查`n`与列表中的第一个元素是否相同。如果是，则返回列表的其余部分。由于您的目标元素是列表的第二个元素，因此它会返回列表的其余部分，从第三个元素开始。列表中的第一个元素被完全删除。您没有跟踪到目前为止检查过的 OK 元素。

从您的代码中，您似乎想要遍历列表的元素，如果找到目标值，请调用`remove`. 如果您想以这种方式实现它，您还需要跟踪您检查和验证的不是您的目标值的值。所以你的函数需要三个参数：`n`, 你的目标; `lst`剩下的号码要检查；和`clean`（或任何你想称之为的）保存已检查的数字。

这是您的算法的工作版本：

```
(define (delete n lst clean)
  (cond
    ((empty? lst) clean)
    ((equal? n (car lst)) (delete n (cdr lst) clean))
    (else
      (delete n (cdr lst) (append clean (list (car lst))))))) 
```

你会这样称呼它：`(delete 3 (list 2 3 4 3 5 3) '())`

首先，它会检查您是否还有要检查的号码。如果你不这样做，它会返回你的干净列表。

然后它检查第一个元素是否与您的目标元素匹配。如果是这样，那么它会再次调用 delete，有效地删除第一个元素`lst`（注意它不会将其附加到干净数字列表中）。

如果第一个元素*不是*目标数字，则到达 else ，将第一个值附加`lst`到末尾`clean`并再次调用 delete 。

（请注意，此代码使用**尾递归**，这是一种编写递归方法的方法，用于跟踪每次递归调用的中间值，而不是在最后进行计算的“常规”递归。下面 Samrat 的答案是常规的递归解决方案。关于尾递归的讨论[可以在这里找到](https://stackoverflow.com/questions/33923/what-is-tail-recursion)。）

从您的帖子中，听起来您想删除目标编号的所有实例。而不是使用这个`remove`函数——它只删除目标编号的第一个实例——你应该看看使用这个`remove*`函数，它会删除所有实例。这将大大简化您的功能。因此，要从列表中删除 3 的所有实例，这就足够了：

```
(remove* '(3) (list 2 3 4 3 5 3)) 
```

如果你想把它包装在一个函数中：

```
(define (delete n lst)
  (remove* (list n) lst)) 
```

一般来说，您应该阅读[地图功能](http://docs.racket-lang.org/reference/pairs.html)，因为它们几乎可以满足您的需求。`filter-map`（他们对列表中的所有元素应用一个过程；如果你有一个更复杂的过程，上面也可以用 a 来实现。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:27:44.363

这是我想出的：

```
(define (delete n lst)
  (cond ((empty? lst) lst)
        ((= (car lst) n) (delete n (cdr lst)))
        (else (append (list (car lst)) (delete n (cdr lst)))))) 
```

# windows - Need cURL on Windows PC- Only found 2 versions that are not possible

> ID：12811263
> 
> 赞同：0
> 
> 时间：2012-10-10T02:48:34.273
> 
> 标签：windows, http, curl, httpwebrequest

I need a Windows XP/Windows 7 version of cURL. I only have been able to find 2 versions which one has 1) not for windows XP or above and the other I found 2) Must use Microsoft Visual Studio to install it(not possible on the PC I am left to use). Is there any other way to get cURL on the Windows PC I have?

# c# - How to read a huge log file while remaining performant?

> ID：12811264
> 
> 赞同：0
> 
> 时间：2012-10-10T02:48:40.507
> 
> 标签：c#

I'm reading a 500MB+ log file, I was wondering which would be faster in terms of speed.

I want to be able to scroll through the ~1mil entries, but shouldn't be slow because of the virtual mode(hopefully). It loads successfully, however scrolling is a bit lagged.

Currently I'm using a listview in virtual mode.
QUESTION - virtual-retrieval-item function -

1.  list storing each entry of log info, and the retrieve item call to display the specific indexes displayed of the list such as list[e.getindex]
2.  store the beginning of each log info (position in the log file) to an list, then calling a read function to read from the position to the escape character (gets one log entry). For example first entry would read 0 - escape character, say the second entry would read 16-43, third, 43-60 (the size of the log entries all vary)

There are pros and cons of both, but I am curious to see what others think in terms of speed.

On one hand, (1) reads all the data of a 1mil entries into a list, then reads them from memory because virtual mode helps display only the items that is viewable at the time (approx 10). However the overhead is that all the data is in memory

With (2) there is no storage of actual log entries into memory, however it has to make a call to file to scan through the file, and start reading at a specific line. It has to make this call for each item.

Is there an alternate? These are the fastest ways in which were researched.

# python - Django order by key in another table that does not exist

> ID：12811266
> 
> 赞同：0
> 
> 时间：2012-10-10T02:48:46.507
> 
> 标签：python, mysql, django

Using Django, I have 2 models.

```
Model1 -> User
          -> ID
          -> Some properties

Model2 -> Activeness
          -> UserId (Foreign Key to User)
          ->rating 
```

This is a simplified case. I am trying to get a list of users sorted by their rating in the activeness table. User.objects.all().order_by('activeness__rating')

This works ok.

However, I have some situations where the activeness object for new users has not been created yet. This will result in those new users appearing at the top of the list obtained. I want them to appear at the bottom of the list instead.

I can't resort in python because I am using paging and retrieving 1 page at a time.

Can anyone advise. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:26:42.063

您是否尝试过使用[注释](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)？它可能会有所帮助

使用注释，你可以做这样的事情

```
User.objects.all().annotate(num_rating=Count('activeness__rating')).order_by('num_rating') 
```

我希望它有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:20:03.220

**TLDR：**过滤掉`activeness`为空的用户对象，稍后再添加。

长版：给定一些模型，例如

```
class MyUser(models.Model):
    activeness = models.ForeignKey('Activeness', null=True)
    name = models.CharField(max_length=50)

    def __unicode__(self):
        return "{}: {}".format(self.name, self.activeness.rating if self.activeness else "no rating")

class Activeness(models.Model):
    rating = models.FloatField() 
```

和一些像这样的样本数据

```
<MyUser: Bob: 3.62810036125>,
<MyUser: Tim: no rating>,
<MyUser: Jim: 2.41014167534>,
<MyUser: Rod: 1.35651839383>] 
```

您可以排除没有评分的用户，如下所示：

```
>>> MyUser.objects.filter(activeness__rating__isnull=False).order_by('activeness__rating')
[<MyUser: Rod: 1.35651839383>, <MyUser: Jim: 2.41014167534>, <MyUser: Bob: 3.62810036125>] 
```

然后将它们附加到末尾，您可以使用以下命令提高效率[`chain() from itertools`](http://docs.python.org/release/3.2.3/library/itertools.html#itertools.chain)：

```
>>> from itertools import chain
>>> chain(MyUser.objects.filter(activeness__rating__isnull=False).order_by('activeness__rating'), MyUser.objects.filter(activeness__rating__isnull=True))
[<MyUser: Rod: 1.35651839383>,
 <MyUser: Jim: 2.41014167534>,
 <MyUser: Bob: 3.62810036125>,
 <MyUser: Tim: no rating>] 
```

例如，如果我们进行调试，我们可以看到这可以防止查询集被毫无意义地评估。

```
>>> from django.db import connection
>>> import pprint
>>> connection.queries = []
>>> for u in chain(MyUser.objects.filter(activeness__rating__isnull=False).order_by('activeness__rating').select_related('activeness'), MyUser.objects.filter(activeness__rating__isnull=True)):
>>>     print "At {u} we've done {count} SQL queries".format(u=u, count=len(connection.queries))
At Rod: 1.35651839383 we've done 1 SQL queries
At Jim: 2.41014167534 we've done 1 SQL queries
At Bob: 3.62810036125 we've done 1 SQL queries
At Tim: no rating we've done 2 SQL queries 
```

当然，你仍然需要做更多的工作才能让它与[Django paginator](https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs#paginator-objects)一起工作，但这超出了这个问题的范围。

# php - SQL 提交 0 而不是实际值。还删除 @ 和 . 在电子邮件地址中

> ID：12811267
> 
> 赞同：0
> 
> 时间：2012-10-10T02:48:53.903
> 
> 标签：php, mysql, forms, submit

下面的代码是我用来提交表单数据的代码。表单提交得很好并且重定向没有问题。

当我查看数据库中的行数据时，我注意到 companyname、firstname 和 lastname 被插入为 0。我还注意到，在将电子邮件地址插入数据库时​​，它正在删除 @ 和 . 从地址。

任何帮助，将不胜感激。

```
<?php
include("inc/conf.inc.php"); // Includes the db and form info.
if (!isset($_POST['submit'])) { // If the form has not been submitted.

} else { // The form has been submitted.
    $companyname = form($_POST['companyname']);
    $firstname = form($_POST['firstname']);
    $lastname = form($_POST['lastname']);
    $username = form($_POST['emailaddress']);
    $password1 = md5($_POST['password1']); // Encrypts the password.
    $password2 = md5($_POST['password2']);

    if (($companyname == "") || ($firstname == "") || ($lastname == "") || ($username == "") || ($password1 == "") || ($password2 == "")) { // Checks for blanks.
        exit("There was a field missing, please correct the form.");
    }

    $q = mysql_query("SELECT * FROM `users` WHERE emailaddress = '$username'") or die (mysql_error()); // mySQL Query
    $r = mysql_num_rows($q); // Checks to see if anything is in the db.

    if ($r > 0) { // If there are users with the same username/email.
        exit("That email address is already in use!");
    } else {
        mysql_query("INSERT INTO `users` (companyname,firstname,lastname,emailaddress,password) VALUES ('$companyname','$firstname','$lastname','$username','$password1')") or die (mysql_error()); // Inserts the user.
    header("Location: thankyou.php"); // Back to login.
    }
}
mysql_close($db_connect); // Closes the connection.
?>

   <?php
$db_user = ""; // Username
$db_pass = ""; // Password
$db_database = ""; // Database Name
$db_host = "localhost"; // Server Hostname
$db_connect = mysql_connect ($db_host, $db_user, $db_pass); // Connects to the database.
$db_select = mysql_select_db ($db_database); // Selects the database.

function form($data) { // Prevents SQL Injection
   global $db_connect;
   $data = preg_replace('/[^A-Za-z0-9_]/', '', $data);
   $data = mysql_real_escape_string(trim($data), $db_connect);
   return stripslashes($data);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:58:13.757

如果您注意到，您提到的字段由函数 form() 处理。您可能希望打印它们以检查 form() 函数的返回值。

此外，代替支票，

```
 ($companyname == "") 
```

采用 ：

```
 empty($companyname) 
```

它检查的内容不仅仅是空字符串。

> 以下内容被认为是空的：
> 
> ""（一个空字符串）
> 
> 0（0 为整数）
> 
> 0.0（0 作为浮点数）
> 
> "0" (0 作为字符串)
> 
> 空值
> 
> 错误的
> 
> array() （一个空数组）
> 
> $var; （声明的变量，但没有值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:46:03.963

> 任何帮助，将不胜感激

所以让我从这个开始:) 对不起，但你的代码非常无组织......

假设您的新配置（或 lib）文件与此类似：

文件：`config.php`

```
<?php

/**
 * 
 * @param string $host Mysql host
 * @param string $user Mysql username
 * @param string $passw Mysql password
 * @param string $db Mysql database to work with 
 * @return TRUE if could connect and select given database
 */
function connect($host ='ur host', $user='ur username', $passw='ur passw', $db='ur dbname'){
  if ( !mysql_pconnect($host, $user, $passw) ){
     die("Can't connect to SQL server");
   }

  if ( mysql_select_db($db) ){
   die("Can't select database");
  }

 return true;
}

/**
 * Determine whether user has been registered before
 * @param string $email
 * @return boolean
 */
function userAlreadyExists($username){
   if ( connect() ) { //ensure we are connected
      #Prevent injection right here:
      $username = mysql_real_escape_string($username); 

      $result = mysql_query("SELECT * FROM `users` WHERE emailaddress = '$username' LIMIT 1");

      if ( mysql_num_rows($result) > 0){
         # True means that user exists
         return true;
       } else {
         #False means that user do not exists: 
        return false;
       }
   }

  /**
   * 
   * @return boolean
   * TRUE if could insert new row
   * FALSE if this row already exists or error in sql server
   */
  function addNewUser($companyname, $firstname, $lastname, $username, $password1){

  $companyname = mysql_real_escape_string($companyname);
  $firstname = mysql_real_escape_string($firstname);
  $lastname = mysql_real_escape_string($lastname);
  $username = mysql_real_escape_string($username);
  $password1 = md5($password1);

    if ( connect() ){
      return mysql_query("INSERT INTO `users`   (`companyname`,`firstname`,`lastname`,`emailaddress`,`password`) VALUES ('$companyname','$firstname','$lastname','$username','$password1')");

   }

  }

  /**
   * Function that compare password that makes sure
   * if they're the same
   */
  function pass_compare($pass1, $pass2){

    if ($pass1 !== $pass2){
       die("Passwords are not the same");
    }
    return true;
  } 
```

文件`handler.php`

```
<?php

if ( !empty($_POST) ){ //This code runs when form has been submitted 

 //Maybe we should check if some value is missing, before we connect SQL //server!? 

  #Check if some field is missing:
  foreach ($_POST as $key => $val){

    if ( empty($key) ){
      sprintf('The field %s is missing', $key);
       die();
    }
  }

  #connect mysql server
  connect();

  if (userAlreadyExists($_POST['email'])){

    die(printf('The <b>%s</b> is already in use', $_POST['email']));

  } else {

   if ( pass_compare($_POST['password'], $_POST['password_confirm']) ){  

   addNewUser($_POST['companyname'], $_POST['firstname'], $_POST['lastname'], $_POST['username'], $_POST['password']);
    }
  }

} 
```

这对你有用

# hibernate - How to get Hibernate to ignore @OneToMany on merge?

> ID：12811268
> 
> 赞同：2
> 
> 时间：2012-10-10T02:49:08.493
> 
> 标签：hibernate, ejb-3.0

```
public class Application{
   @Id
   private Long id;

   @OneToMany(mappedBy = "application")
   private List<Licence> licences = new ArrayList<Licence>();
   ...
}

public class Licence{
   @Id
   private Long id;

   @ManyToOne(fetch = FetchType.LAZY)
   @JoinColumn(name = "ID", nullable = false)
   private Application application;
   ...
} 
```

How do I get hibernate to leave licences in application object readonly and not try to persist Licence when I go em.merge(application);

I'm not trying to save Licence with Cascade in Application. Licences have a lot business rules to run before they actually get persisted so I will be calling persist on each licence individually. How do I do this ? This works fine on persist but not on merge.

On merge I keep getting

```
org.hibernate.TransientObjectException: object is an unsaved transient 
     instance - save the transient instance before merging: com.cmr.Licence 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T03:17:00.280

使用`insertable = false, updatable = false`. 更新这个

```
 @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "ID", nullable = false)
  private Application application; 
```

至

```
 @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "ID", nullable = false, insertable = false, updatable = false)
  private Application application; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:37:02.310

它从许可证到应用程序的单向关系。你需要改变的事情

1.  取出 Application 上的 OneToMany 关系
2.  在许可证方面，

    ```
     @Column(nullable = false, insertable = false, updatable = false)
     private Long application_id;

     @ManyToOne(optional = false)
     @JoinColumn(name = "application_id")
     private Application application;

     Test:
     em.persist(application) -- should be ok. 
     em.persist(licence) - not null voilation

     licence.setApplication(application)
     em.persist(licence) - should be ok 
    ```

有了上述内容，您可以在没有任何许可证的情况下保存应用程序。但是如果没有应用程序，您将无法保存许可证。测试，工作..

-麦迪

# bash - Is there a bash equivalent for ruby %{} quoting?

> ID：12811270
> 
> 赞同：1
> 
> 时间：2012-10-10T02:49:50.627
> 
> 标签：bash, quote

What is the easiest way to quote bash command arguments that contain single quotes and double quotes without variable interpolation?

In Ruby you can quote strings using %{}, %[] etc. In that case single quotes and double quotes will be treated as characters.

My question was not really complete here is further explanation:

The reason I am asking that is because I often run ruby and perl code at the command line. Since those languages are using extensively single quotes and double quotes and global variables like $1 $_ etc. I get conflicts with bash.

example:

```
ls -lat | ruby -p -e '$_ =~ /(\S+)\s+(\S+)\s+(\S+)/; $_ = "'\''" + ($3 || "") + "'\''" + "\n"' 
```

I was looking for something similar to the % quoting in ruby:

```
ls -lat | ruby -p -e %{$_ =~ /(\S+)\s+(\S+)\s+(\S+)/; $_ = "'" + ($3 || "") + "'" + "\n"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T02:57:47.300

使用heredoc可能最简单：

```
read -r arg << \EOF
A string "with" 'quotes'
EOF 
```

将 $arg 设置为 heredoc 的未插值内容。这不允许在变量中嵌入换行符。如果你想要一个多行值：

```
unset var; while read -r v; do var="$var${var+
}$v; done << \EOF
A multi-line "" string
with different 'quotes'
EOF 
```

不幸的是，Ormaaj 使用 IFS 的评论无法捕获换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:11:03.847

由于您不需要变量插值，因此可以使用`$'...'`引号（尽管您仍然需要转义单引号，因此这可能不符合您的要求）：

```
x=$'String containing \' and "' 
```

# c# - 按字段降序排列

> ID：12811271
> 
> 赞同：0
> 
> 时间：2012-10-10T02:49:53.870
> 
> 标签：c#

我以这种方式实现了这一点

```
UnUsedServices = UnUsedServices.OrderBy(si => si.utility).ToList(); //order it ascendingly
UnUsedServices.Reverse();//reverse it 
```

我只是想知道有没有办法直接按**降序**反转它而不是分成两个阶段（升序和倒序）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:54:11.263

您可以使用[OrderByDescending](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending.aspx)

```
UnUsedServices = UnUsedServices.OrderByDescending(si => si.utility).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T02:54:12.370

尽量不要踢自己：[OrderByDescending](http://msdn.microsoft.com/en-us/library/bb534855.aspx) :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T02:55:18.867

如果您希望使用 OrderByDescending 按降序排列，您可以一次性完成此操作

```
UnUsedServices.OrderByDescending(si => si.utility).ToList(); 
```

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending.aspx)

# ruby - 哈希中重复键的周转/解决方案

> ID：12811272
> 
> 赞同：0
> 
> 时间：2012-10-10T02:50:07.490
> 
> 标签：ruby

> **可能重复：**
> [带有重复键的 Ruby 哈希？](https://stackoverflow.com/questions/6808801/ruby-hash-with-duplicate-keys)

我定义了一个哈希：

```
sorted_words = Hash.new(0)
words.each { |word| sorted_words[word]=word.downcase.chars.sort{ |a, b| a.casecmp(b) }.join 
```

哈希不允许重复键，所以如果我有像`cream`, `scream`,之类的键`scream`，它只考虑前两个。但我还希望将第三个键以其适当的值保存在我的 Hash 中。

这是一个字谜。在上面的代码之后，我创建了另一个散列，并且根据代码中的值，我创建了多个数组，每个数组都有一个字谜字符串。

这种情况有什么解决办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:06:49.057

根据您正在寻找字谜制造者的评论，这是这种野兽的基础：

```
require 'pp'
require 'set'

words = %w[cream scream scream creams]

hash = Hash.new{ |h,k| h[k] = Set.new }

words.each do |w|
  hash[w.downcase.split('').sort] << w.downcase
end

pp hash

=> {["a", "c", "e", "m", "r"]=>#<Set: {"cream"}>,
 ["a", "c", "e", "m", "r", "s"]=>#<Set: {"scream", "creams"}>} 
```

给定一组单词，这将创建一个散列，其中每个键是单词中字母的排序列表。与该键关联的值是一组具有相同字母的单词。

因为该值是一个集合，所以只存储唯一的单词。

填充该哈希后，您将拥有一个字典，可用于快速查找其他单词。取一个词，以与分解键相同的方式分解它，并将其用作查找中的键：

```
puts hash['creams'.downcase.split('').sort].to_a.join(', ') 
```

输出：

```
scream, creams 
```

* * *

如果需要重复（和冗余）单词：

```
require 'pp'
require 'set'

words = %w[cream creams scream scream]

hash = Hash.new{ |h,k| h[k] = [] }

words.each do |w|
  hash[w.downcase.split('').sort] << w.downcase
end

pp hash

=> {["a", "c", "e", "m", "r"]=>["cream"],
 ["a", "c", "e", "m", "r", "s"]=>["creams", "scream", "scream"]}

puts hash['creams'.downcase.split('').sort].to_a.sort.join(', ')

=> creams, scream, scream 
```

# vb.net - VB .net 应用程序是否绝对需要 .net 框架才能运行？

> ID：12811274
> 
> 赞同：0
> 
> 时间：2012-10-10T02:50:40.833
> 
> 标签：vb.net

> **可能重复：**
> [即使是单行 VB.Net 也需要 .Net 框架吗？](https://stackoverflow.com/questions/3767309/is-the-net-framework-required-for-even-a-single-line-of-vb-net)

我通过设计一个简单的 vb .net 程序来从闪存驱动器运行实用程序和安装程序，从而使我的编程变得更加困难。我在编码和设计方面取得了不错的进展，但是当我去炫耀我在安装了全新 XP 的系统上的工作时，当我启动 exe 时出现“无效的 win32 应用程序”错误时，我感到很惊讶。其实挺尴尬的。

安装 .net 框架对于加载用 vb .net 编码的 .exe 是否必不可少？如果是这种情况，是否是尝试将代码调整为 vbs 脚本或类似内容的唯一替代方法？除了在目标系统上安装 .net 之外，还有其他合理的解决方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:55:14.903

是的。

`.Net`正是出于这个原因，它被命名为 VB 。:)

使代码适应 VB6（需要在目标机器上安装不同系列的 DLL）或 VBScript 可能是最快的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:55:21.183

是的，VB.Net 确实需要 .Net 框架。然而，Windows XP 现在已经过时了，最近根据某些指标，安装基数降至 25% 以下。Windows 7 附带开箱即用的 .Net 2.0，并且 Windows 7 sp1 还具有至少在机器上可用的 .Net 3.5。

# c++ - 检查垃圾收集器是否已声明变量

> ID：12811277
> 
> 赞同：-1
> 
> 时间：2012-10-10T02:51:21.420
> 
> 标签：c++, c, garbage-collection

有没有办法检查垃圾收集器是否已声明变量`C`，`C++`即检查它是否已被释放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:06:20.270

C 中没有垃圾收集。尽管标准在少数地方提到这种实现是可能的。不过，我不知道是否存在任何这样的实现。

在 C/C++ 中，无法知道对象是否已被删除。这是问题和错误的持续来源。然而，我们必须忍受这一点。

这个设计决定的主要原因 - 指针的简单性。它应该只是一个地址，没有别的。否则需要额外的开销。C++ 中的内存被使用和重用。一段时间后，可能会有一个大物体代替两个小物体，覆盖这两个小物体的整个空间。这意味着没有办法在每个物体前面放置一些东西来进行检查。简单和速度——这些是 C/C++ 的重要目标。释放/未释放/不确定指针的问题是良好性能的代价。

# windows-phone-7 - 在 PanningLayer 中使用视图框

> ID：12811278
> 
> 赞同：2
> 
> 时间：2012-10-10T02:51:27.083
> 
> 标签：windows-phone-7, xaml, silverlight-4.0

我正在为 windows phone 7 开发一个全景应用程序。我有一个视图框，我想将它延伸到全景应用程序的 PanningLayer。我已删除 PanningTitleLayer。一切正常，但有一个问题。当我在模拟器中运行应用程序时，视图框会部分显示，您必须滑动它才能看到视图框的隐藏部分。当我滑动视图框时，它会完全滑动，直到它回到开头。我想要的是，当我滑动视图框时，它应该部分滑动并停止，以便用户可以看到隐藏的视图框部分。我该怎么做？

# mysql - MySQL 时区

> ID：12811283
> 
> 赞同：0
> 
> 时间：2012-10-10T02:51:49.413
> 
> 标签：mysql, database

我是数据库开发的新手，目前正在使用 MySQL。我有一列包含美国的所有时区。我希望能够获取每行中每个时区的当前时间（只有时间，没有日期）。

时区数据如下所示：+05:00、-03:00 等等等等

这就是我尝试过的方式。我有两张桌子，一个国家，一个城市。时区位于“城市”表中。我尝试使用函数 sys date() 但它返回我系统上的完整日期和当前时间，而不是基于时区。谁能帮我吗？非常感谢

```
 select TimeZone, Country, sysdate() as "Current Time"  
 from city, country 
 where Country='USA' and city.CountryId= country.CountryId; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:22:07.397

您应该能够使用[convert_tz](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_convert-tz)函数：

```
SELECT CONVERT_TZ(NOW(),'-07:00', city.TimeZone) AS Time, city.Name
    FROM city, country 
    WHERE country.Name='USA' and city.CountryId= country.CountryId; 
```

假设您的服务器位于 -07:00 时区。

# iphone - 如何使tableview的内容显示在透明导航栏下？

> ID：12811290
> 
> 赞同：1
> 
> 时间：2012-10-10T02:52:20.723
> 
> 标签：iphone, cocoa-touch, uinavigationbar

如何使tableview的内容显示在透明导航栏下？

像这样：在“照片”应用中，相册显示在导航栏下。

特别感谢

![在此处输入图像描述](../Images/b33fe935329fe80bd85ada6ac495a049.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:35:44.040

如果你使用 _rootNavigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent; 然后设置正确的tableview框架就是这样。如果您在 xib 中，请不要忘记模拟半透明导航栏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:25:05.407

我发现实现此目的的一种方法是将您的 tableview 的 superview 向上移动，使其原点位于 {0, 0}。然而，在研究了更多之后，有人说改变超级视图（UIViewControllerWrapperView）是一个坏主意。但是，我也没有找到任何关于为什么仅仅改变框架会产生问题的信息。我现在正在转移superview，还没有发现任何与之相关的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:14:31.403

可能你可以这样设置：

```
[navigationBar setAlpha:0.5f]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T04:19:57.377

要单独使导航栏透明，您可以查看这篇文章，[如何使导航栏透明并像 iPhone 中的照片应用程序一样淡出](https://stackoverflow.com/questions/3106025/how-to-make-a-navigation-bar-transparent-and-fade-out-like-in-the-photo-app-in-t)

另请检查[如何使用 MonoTouch 设置工具栏和导航栏的透明度颜色？](https://stackoverflow.com/questions/5593761/how-to-set-the-transparency-color-for-toolbar-and-navigation-bar-using-monotouch)

我不确定您是否可以在导航栏后面添加表格视图。您可能必须将其添加为`self.parentViewController.view`.

另一种方法是隐藏导航栏并使用透明工具栏代替它。这可以添加到当前视图的顶部。唯一的问题是返回按钮。您可能必须为此使用自定义按钮。

# php - 来自 linux(debian) 的 Web 服务器将数据发送到网络中的 Ip

> ID：12811291
> 
> 赞同：-1
> 
> 时间：2012-10-10T02:52:48.660
> 
> 标签：php, c, linux, sockets

![在此处输入图像描述](../Images/c69dec98bb9a57f2f3d9b9a6bec09a59.png)

你好，

从上图中，我有一个网络服务器，一个 linux 机器和客户端/设备。现在我需要这 3 个进行通信。网络服务器根据网页上按下的按钮将数据发送到 IP 地址（客户端/设备）。但是在发送数据之前，数据必须首先访问linux机器，机器然后将数据发送到设备，然后设备读取数据并根据发送的命令进行操作..然后设备将数据发送回linux 机器，然后 linux 机器将其发送到网络服务器进行确认。这意味着设备可以毫无问题地接收数据。

1.  PHP 用于网络服务器。现在php将如何将数据发送到IP地址。

2.  linux机器处理所有请求并将所有内容发送到设备，当设备获得数据时，它将向linux机器发送数据，然后机器向网络服务器发送一个ok，表明数据成功到达。（我阅读了socket编程和我想创建一个读取请求的应用程序。）或者如果您知道我该怎么做？

3.  设备如何读取网络服务器发送的数据？...

谢谢，

**编辑：**该设备未连接到 linux 机器。该设备仅通过以太网电缆连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:36:00.670

我们称最上面的机器为“Server”，中间的机器为“Controller”，最下面的机器为“Device”。设备是外围设备（例如 USB 或串行设备）还是计算机都没有关系。

第一个任务是让控制器查询设备。做到这一点的最佳方法实际上取决于设备。如果您考虑 USB 音频/视频设备之类的设备，则需要对其进行调整，然后它们会发送连续的数据流。诸如温度或湿度传感器之类的东西被告知要进行测量，然后它们会用数据做出响应。

通常您将所需的函数写入一个小型库，并使用命令行工具验证它是否有效。在某些情况下，库可能不是必需的，例如，如果控制器中的内核已经支持设备，并且信息很容易获得。（例如，考虑硬盘驱动器中的温度传感器：如果设备是硬盘，那么控制器可以简单地使用命令`hddtemp /dev/sda`来获取`/dev/sda`（第一个 SATA/ATA/SCSI 硬盘）的温度。我希望最终用户能够选择她感兴趣的硬盘，因此选择必须从服务器流向控制器。）

接下来，您编写一个将在 Controller 上运行的服务。该服务将包含已经编写和测试的库函数，因此可以轻松访问设备。（这样你就*知道*控制器-设备通信是有效的，并且不需要担心它。一次一件事。）

该服务有许多不同的设计，从普通的 TCP/IP 或 UDP/IP 套接字到远程过程调用 (RPC)，再到 HTTP 等高级协议。近年来，使用 HTTP 的最后一种方法变得越来越普遍，响应是 XML、纯文本或二进制媒体（通常是图像）。这个想法是让服务基本上只是另一个可以直接访问设备的 Web 服务器。安全性更简单，因为它不需要是世界可访问的：它可以很好地只响应来自服务器的请求。我使用基本的 shell 脚本 (Bash)、PHP（PHP-CGI 和命令行 PHP、PHP-CLI）和 C 等语言编写了此类服务。最好的选择取决于细节，真的。我个人更喜欢简单的基于文本的 TCP/IP 套接字或 HTTP。

在服务器上，您可以编写一个 PHP 页面，该页面连接到 Controller，请求它想要请求的任何内容（通常取决于用户数据，当然首先要检查完整性和安全性）。PHP 具有简单的内置功能，可用于执行 HTTP 请求和使用原始 TCP/IP 进行连接，因此它非常适合此功能。如果启用了 HTTP 协议包装器，那么它只是`$handle = fopen("http://192.168.x.x/myservice?param1=" . urlencode($param1) . "&param2=" . urlencode($param2), "r+b");`. 要获得套接字连接，请改用该`fsockopen()`函数。（有关详细信息，请参阅[`fopen()`](http://www.php.net/manual/en/function.fopen.php)http [wrappers](http://www.php.net/manual/en/wrappers.http.php)和[www.php.net](http://www.php.net/)[`fsockopen()`](http://www.php.net/manual/en/function.fsockopen.php)上的[PHP 函数参考](http://www.php.net/manual/en/funcref.php)。）

在实践中，PHP 页面代码首先创建到控制器的连接。然后它发送一个请求，其中包含从最终用户收到的相关净化命令/参数。然后它等待控制器响应结果（通过简单地读取响应），然后关闭连接。响应应该包含所有需要的数据，因此 PHP 页面可以自由地为最终用户构建页面。

这些都不是真的很难，但还有很多事情要做。我发现控制器-设备通信需要最多的工作；完成之后，其余的一直很简单。

如果您可以提供更多详细信息，控制器-设备连接是什么，设备提供什么样的数据（文本？数字？图像？大量二进制数据？），以及什么样的参数/命令（只是“一个结果，请？”、“向上移动”、“你在哪里？”等基本命令）您是否希望您需要发送到控制器/设备，我可能会更具体。

此外，您是否仅限于 PHP，或者您是否愿意使用 C 编写 Controller 服务？我自己发现这是一个非常好的组合。

* * *

编辑添加：

简而言之，这三点可以回答如下：

1.  `fopen("http://ip.add.re.ss:port/", "r+b");`如果使用 HTTP 协议并且 PHP 配置为允许 http 包装器（它们通常是），则使用，或者使用`fsockopen()`. 有关详细信息，请参阅上面链接的 PHP 文档。

2.  对于 IP 连接的设备，控制器基本上是一个继电器或转换器。通常这意味着在 Controller 上运行的守护程序，管理来自服务器（或服务器）的传入请求，以及来自设备（或设备）的响应。当有不同数量的设备和/或需要多个接口时，这种情况更为常见。在实践中，控制器就像上面描述的那样运行一个守护进程，除了协议可能是标准的或足够简单的，因此不需要编写库。

3.  在服务器上运行的 PHP 必须包含对控制器的请求详细信息（正是所需的）。控制器必须将它们传递给设备。如果控制器为服务器上连接的 PHP 提供一个 http URL，它可以解析查询参数，并将它们转换为设备可以理解的格式。实践中的一个特殊问题是处理并发访问。从 Controller 到 Device 通常只有一个连接，但多个 PHP 可能同时连接到 Controller。因此，涉及到一些簿记。在某些情况下，设备向控制器提供连续的数据流（或定期更新的数据），而控制器只是对其进行监视。当服务器上运行的 PHP 从 Controller 查询某些内容时，控制器只是查找最新数据（根本不联系设备，只是正常接收数据），并用它来响应。在这里，通常在从控制器到服务器的响应中包含时间戳，或者更好的是，数据的年龄。

你真的应该为你的问题添加一些细节。（我怀疑否决票是由于缺乏细节。）您不需要告诉我们设备的确切品牌和型号，只需告诉我们它是接收器（电视？收音机？气象站？）还是传感器集群或门锁，如果您知道有关通信协议的任何详细信息（哪些）？到目前为止，我们只知道它使用 IP。这根本没有帮助，现在几乎*所有东西都*使用IP。这也是我的回答如此含糊的原因；我想更准确一点，但你没有提供足够的信息让我这样做。

# eclipse - 使用 Eclipse 和 Tomcat 6 的 Servlet 出现 404 错误

> ID：12811292
> 
> 赞同：0
> 
> 时间：2012-10-10T02:52:56.897
> 
> 标签：eclipse, jakarta-ee, tomcat, servlets, tomcat6

我已经查看了关于这个问题的所有其他问题（并且有很多问题），它们最终都是地址错字，或者错误配置的 servlet 映射，或类似的。我已经尝试了所有这些东西，但每当我尝试从我的 servlet 访问页面时，我仍然会返回 404 错误。

这是 servlet 代码（来自 mkyong 网站的基本 hello world 示例）

```
/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<body>");
        out.println("<h1>Hello World!</h1>");
        out.println("</body>");
        out.println("</html>"); 
} 
```

这是我在部署描述符中的 servlet 定义和映射

```
<servlet>
  <description></description>
  <display-name>TestServlet</display-name>
  <servlet-name>TestServlet</servlet-name>
  <servlet-class>com.TestServlet</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>TestServlet</servlet-name>
  <url-pattern>/testservlet</url-pattern>
</servlet-mapping> 
```

这是我得到的错误

```
HTTP Status 404 - /testserver/testservlet
type Status report
message /testserver/testservlet
description The requested resource (/testserver/testservlet) is not available.
Apache Tomcat/6.0.33 
```

有人知道可能是什么原因造成的吗？

编辑：我刚刚测试了这里给出的 JSP 和 Servlet hello world

[http://www.ibm.com/developerworks/opensource/library/os-eclipse-tomcat/](http://www.ibm.com/developerworks/opensource/library/os-eclipse-tomcat/)

它运行良好，所以我认为问题出在我的 servlet 上。有人知道它可能有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:57:30.867

您需要指定战争文件的名称。如果你有一个名为“testme.war”的战争文件，你必须像这样访问它。

本地主机：8080/ **testme/testservlet**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:29:50.280

根据您的映射，您应该通过以下方式访问它：`http://localhost:8080/testservlet`

“测试服务器”来自哪里？你有任何理由使用它吗？

# php - 将 BLOB 图像转换为二进制值

> ID：12811294
> 
> 赞同：1
> 
> 时间：2012-10-10T02:53:03.283
> 
> 标签：php, sql, binary, phpmyadmin

我将 phpadmin 数据库中的图像上传到 blob 类型的列图像中。因此我想选择图像的二进制代码，所以我这样做

```
SELECT CONVERT( `image` 
USING binary ) AS image
FROM `license` 
WHERE `l_name` = 'lamen'
LIMIT 0 , 30 
```

结果与我正在寻找的结果相似，但我认为我没有得到纯二进制，因为它返回了这个。

�PNG\r\n\Z\n\0\0\0\rIHDR\0\0\0h\0\0\0f\b\0\0\0�tC�\0\0\0sRGB\0� ��\0\0\0gAMA\0\0�� UT+M�TQ�K�+�k(�\r�\0\0\0\0IEND�B`�</p>

就是一堆乱七八糟的。我删除了很多行，因为它只是这个类似的代码。

然而。如果我说 `SELECT CONVERT(`图像 `USING binary) as image from`许可证`where`l_name`='lamen'`

它返回图像并在其下 [BLOB-413 字节]

如果我点击它，我会得到

`SELECT * FROM`许可证 `WHERE CONVERT(`图像 `USING utf8 ) = CAST( 0x89504e470d0a1a0a0000000d4948445200000068000000660802000000a8744386000000017352474200aece1ce90000000467414d410000b18f0bfc6105000000097048597300000ec300000ec301c76fa8640000013249444154785eedd7310ec2401443c15c823b736ce8e956cf2b218d441b1796e7273cefe7e577d0c073f08c47be0d28ee109ce21477f7585b9cc559dc5fbcb551451555540f15284e7177cf87c5599cc5fd34e03bee9085e21477f79e589cc5599cefb843058a53dcddf36171166771fe725577c007f0e13d519ce2ee1e628bb3388bab5e7cd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c545145754aac0a471555542b4dd31c5451bd4bf5032b956b28b9120d8b0000000049454e44ae426082 AS BINARY ) ;`

我怀疑这是我想要的……但是……即使我说，我也无法让我的选择语句返回该代码 `select CONVERT(image USING utf8 )`

谢谢你的帮助

PS.我知道将图像上传到文件并保存路径更容易。并且已经知道如何做到这一点。然而，我正在尝试一些东西并想使用这种方式。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:00:34.023

假设您将图像作为字符串，您根本不需要实际转换它，或者担心字符集。看起来你把它复杂化了。

使用其中一种 BLOB 类型作为字段类型（BLOB / MEDIUMBLOB 等），并确保在插入数据库时​​转义字符串。这些字段类型不依赖于字符集，而是“BINARY”类型。

如果您使用旧的 mysql_() 函数，请使用 mysql_real_escape_string() 转义该值，但如果您使用 PDO 或 mysqli_() 则用户准备好的语句，因为这会为您转义（又好又容易）。

当你选择时，也不需要做任何事情——它应该可以工作。

# perl - wget 与 Perl 的 lwp 有何不同？

> ID：12811296
> 
> 赞同：7
> 
> 时间：2012-10-10T02:53:04.670
> 
> 标签：perl, wget, lwp

我需要使用 wget，因为它能够像爬虫一样为我的项目开发一个爬虫。但是在谷歌搜索中，我看到人们推荐使用 LWP 而不是 Wget。你们能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T03:23:23.960

如果您正在编写 Perl 并且需要发出 HTTP 请求，您通常应该使用 LWP。花钱去做一些在 Perl 进程中很容易支持的事情是很愚蠢的。

如果你想做一些更复杂的事情，比如递归网络爬虫，你可能想看看 CPAN 提供的`WWW::Mechanize`或`Mojolicious`模块。但到那时，利用已经具有递归网络爬取功能的外部工具可能是合理的。

如果您正在编写 shell 脚本而不是 Perl 程序，那么您别无选择，只能使用外部工具。`wget`、`curl`和 LWP 脚本（`lwp-request`、等）之间的选择`GET`实际上归结为最适合您的用例。它们都具有大致相同的功能，但在一个工具中有些事情比其他工具更容易。使用您的系统随时可用的东西；通常有不止一个选项，在这种情况下，您应该尝试一下 - 阅读文档，尝试一些用例，看看您喜欢哪一个。

# javascript - 为什么我不能覆盖`Array`的原型（`Array.prototype`）？

> ID：12811299
> 
> 赞同：5
> 
> 时间：2012-10-10T02:53:24.000
> 
> 标签：javascript

我将原型设置`Array`为的实例**`my`**，我认为`book.aa`会显示`"aa"`，但它显示`"undefined"`，为什么？谢谢！

```
 <html>
    <head>
        <title>Array Properties</title>
        <h2>Array Properties</h2>
        <script type="text/javascript">
            function my() {
                this.aa = 'aa';
            }
            Array.prototype = new my();
            Array.prototype.bb = "bb";
            var book = new Array();  
            book[0] = "War and Peace";  

        </script>
    </head>
    <body bgcolor="lightblue">
        <script type="text/javascript">
            document.write(book.aa+book.bb);
        </script>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T02:56:17.603

您不能分配给，`Array.prototype`因为`prototype`它是 的只读属性`Array`。

所以当你写

```
Array.prototype = new my(); 
```

没发生什么事。要了解原因，请尝试

```
JSON.stringify(Object.getOwnPropertyDescriptor(Array, "prototype")) 
```

结果是

```
"{"value":[],"writable":false,"enumerable":false,"configurable":false}" 
```

除非您处于严格模式，否则分配会静默失败。

这就是为什么——如果你执行，请参见[http://jsfiddle.net/5Ysub/](http://jsfiddle.net/5Ysub/)

```
function my() {
    this.aa = 'aa';
}
Array.prototype = new my();
Array.prototype.bb = "bb";
var book = new Array();
book[0] = "War and Peace";
document.write(book.aa+book.bb); 
```

你得到

```
undefinedbb 
```

之所以有效，是因为您在创建和设置属性时`bb`已分配给*真实。* `Array.prototype``bb`

`Array.prototype`恕我直言，这是一件不能被击垮的好事。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:32:56.017

即使您*可以*像这样直接覆盖 Array.prototype，您也将无法访问所有内置方法，例如 splice、slice、push、shift、pop、unshift、sort、reverse 等等......所以它会是糟糕的编码实践。但它不像Ray指出的那样工作，因为它是只读的。

这个小代码片段将证明 Array.prototype 不能被覆盖，因为该`sort`方法仍将执行：

```
<script type="text/javascript">
Array.prototype={};
var a=new Array(1,4,5,7,8);
a.sort();
alert(a.join(","));
</script> 
```

如果你想覆盖 Array.prototype 的原型属性，你必须一次一个地这样做： `Array.prototype.aa='aa';`

如果你想对 Array.prototype 应用大量的属性，那么通过一个循环来应用它。这是我为您编写的一些代码，它们应该可以完成您正在尝试做的事情：

```
<script type="text/javascript">
function my()
{
    this.aa = 'aa';
}
my.prototype.bb = "bb";
var instance = new my();
for(var j in instance)
{
    if(instance.hasOwnProperty(j) || j in my.prototype)
    {
        Array.prototype[j]=instance[j];
    }
}

var book=new Array();
book[0]="War and Peace";
alert(book.aa);//alerts "aa"
alert(book.bb);//alerts "bb"
</script> 
```

# python - 如何使用 python 2.7.3 处理诸如 max、min、std、pdf、cdf 之类的统计数据？

> ID：12811300
> 
> 赞同：0
> 
> 时间：2012-10-10T02:53:23.357
> 
> 标签：python, python-2.7

我有一堆大文件（比如 20,000 行和 4 列），我想用它们计算平均值、最大值、最小值、标准偏差（std）、概率分布函数（pdf）、直方图等。我有一个文本文件，我想使用它来获取文本文件第四列中值的平均值、最大值、最小值、标准、pdf 和直方图！

文本文件的第一列是模型名称，第二列是年份，第三列是日，第四列是值。每列用逗号分隔。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:58:43.267

[这个页面](http://wiki.python.org/moin/NumericAndScientific)有一个python统计包的列表，每个包都有简短的描述，你应该能够找到一个可以满足你所有需要的包。我建议检查 numpy 或 scipy，并使用 matplotlib 进行任何您需要的绘图。

# php - PHP 联系表单随机提交

> ID：12811303
> 
> 赞同：1
> 
> 时间：2012-10-10T02:53:54.337
> 
> 标签：php, contact-form

我希望我在这里遗漏了一些非常基本的东西，但是：一个空表单被随机提交，有时一天 3-8 次，然后几天没有提交，等等。

空提交总是以“[网站联系表]”为主题的电子邮件。尽管我的 php 中没有验证，但在 html 代码中，主题是从下拉菜单中选择的，默认为“General Enquiry”。请注意，在下面的 php 代码中，人类无法提交带有上述主题行的空表单，也就是说，如果我在不输入任何内容的情况下按提交，它将始终是“[网站联系表单]General Enquiry”。

我有contact.html调用这个contact.php文件：

```
<?
   $email = 'info@mail.com';
   $mailadd = $_POST['email'];
   $headers = 'From: ' . $_POST['email'] . "\r\n";
   $name = $_POST['name'];
   $subject = '[Website Contact Form] ' . $_POST['subject'];
   $message = 'Message sent from: ' . $name . '. Email: ' . $mailadd . '. Organization: ' . $_POST['company'] . '. Phone: ' . $_POST['phone'] . '. ';
   $message .= 'Message: ';
   $message .= $_POST['message'];

   if (mail($email,$subject,$message, $headers)) {
    echo "<p>Thank You! We'll get back to you shortly.</p>";
   }
   else {
    echo "<p>Error...</p>";
   }
?> 
```

我将此代码用于许多网站，但从未遇到过此问题。这段代码有什么明显的错误，我错过了吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:01:23.007

我怀疑您在发送电子邮件之前可能没有检查这些变量是否已设置。直接请求contact.php（没有任何表单数据）的人可能会产生您描述的结果。如果是这种情况，下面的代码应该像一个魅力一样工作：

```
<?php
    if (isset($_POST['submit']) {
        // form code
    }
    else {
        // The form was not submitted, do nothing
    }
?> 
```

即使不是那种情况，这种简单的检查总是很好的做法。

此外，您应该始终将验证任何用户输入作为一个好习惯。您不希望您的服务器用电子邮件淹没您的收件箱。我建议使用正则表达式来验证提供的输入，并可能使用验证码服务（例如 ReCaptcha）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:13:17.260

如果您一直在使用此代码并且工作正常，那么我会检查您在这种情况下更改了哪些变量，例如您的提交表单。

用所有常见的可能性尝试你的表格，看看它是否有效。空的主题将为您的表单提供主题“[网站联系表]”。检查您的脚本是否实际获取了 post 变量，并且您的表单提交了正确的变量。您的下拉菜单可能有一个值为“”的选项和 innerHTML“一般查询”。该值将被提交。

在服务器端检查输入也很好

```
<?php 
      if(isset($_POST['subject'],$_POST['email'])){

      }
?> 
```

# php - 未读邮件时收件箱加粗

> ID：12811307
> 
> 赞同：-3
> 
> 时间：2012-10-10T02:54:15.053
> 
> 标签：php, if-statement

我正在尝试根据以下内容在我的网站上有条件地设置用户对用户消息的样式：

如果用户尚未访问该消息，则它保持粗体（“未读”）。
如果用户点击链接并访问它，它会从粗体变为非粗体（“阅读”）

（参考：这是多少个电子邮件收件箱有效）

问题：我如何检查用户是否单击了链接以查看他们的新消息，或者如果他们没有？如，我将如何存储这些信息并表明它已被“读取”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:12:53.080

在数据库中添加一个**读取**列（默认为 0），一旦他们点击链接，将其设置为 1，使用它来决定如何格式化（粗体与否）链接。

可选，可能值得添加一个日期字段以了解第一次阅读的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:13:30.107

*   在您的数据库中，创建 1 列“读取”
*   创建 message.php （也许？？）
*   代码会将读取列更新为 1（如已读取），因此读取的默认值为 0

希望这可以帮助 ：）

# layout - 在 Windows 商店应用程序的滚动查看器中保持项目稳定以防止滚动

> ID：12811313
> 
> 赞同：1
> 
> 时间：2012-10-10T02:54:49.733
> 
> 标签：layout, windows-runtime, scrollviewer, windows-store-apps

我想在 Windows 商店应用程序的 ScrollViewer 顶部保持一个部分标签稳定，而该部分尚未滚动。例如，当您向右滚动时，Windows 天气应用程序会使用左上角的部分标签来执行此操作。

目前，我想要保持稳定的控件嵌套在 ScrollViewer 控件中。我有一个中间解决方案，它通过更新控件的渲染偏移量以响应 ViewChanged 事件来使其保持稳定。但是，当我滚动时，仍然有一些非常明显的口吃。我还考虑过“假装”控件在滚动查看器中，而实际上它在它之外，但这会破坏很多封装。

当滚动到逻辑内部的控件时，如何完美地保持部分标签静止不动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:21:10.153

如果将`ScrollViewer`和标签放入网格中，则可以将标签保持在同一位置：

```
 <Grid>
         <Label/>
         <ScrollViewer>...</ScrollViewer>
     </Grid> 
```

# android - 大文本搜索优化

> ID：12811318
> 
> 赞同：3
> 
> 时间：2012-10-10T02:55:16.990
> 
> 标签：android, sqlite

实际上，我正在创建一个电子书应用程序。它使用一个表格作为一本书的内容，每行一页。当我搜索一个单词时，它应该返回一些部分结果列表，例如：

> 第 14 页：
> {some text}**关键字**{some text3 again}

* * *

> 第 17 页：
> {some text2}**关键字**{some text2 again}

当然，我可以通过在 Java 端处理我的文本结果来做到这一点，但我正在寻找更好的解决方案，可能使用 SQLite 或其他方法。

就 CPU 和内存使用而言，哪种技术是最佳的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:17:57.633

查看 SQLite 的 FTS 模块。

*   [Sqlite FTS 文档](http://www.sqlite.org/fts3.html)；该[`snippet`功能](http://www.sqlite.org/fts3.html#section_4_2)完全符合您的要求
*   [包含 FTS 和 Android 演练的博客](http://blog.andresteingress.com/2011/09/30/android-quick-tip-using-sqlite-fts-tables/)

# xpath - SOAPUI xpath 断言，其中 id 在标签内更改

> ID：12811324
> 
> 赞同：0
> 
> 时间：2012-10-10T02:56:05.617
> 
> 标签：xpath, soapui

我返回了一条错误消息，我想使用 xpath 断言对其进行确认。问题是事务 ID 更改（系统生成），而 iongt:faultstring 中的其余信息保持不变。

有没有一种简单的方法来做这个断言？

```
<iongt:retrieveSystemInformationFault xmlns:iongt="http://www.testing.com/xml/TestingIONGT">
      <iongt:faultcode>TestError012</iongt:faultcode>
      <iongt:faultstring>Transaction Id: 8781991797:
Testing error message here</iongt:faultstring>
    </iongt:retrieveCustomerInformationFault> 
```

使用“*”不起作用：

```
<iongt:retrieveSystemInformationFault xmlns:iongt="http://www.testing.com/xml/TestingIONGT">
      <iongt:faultcode>TestError012</iongt:faultcode>
      <iongt:faultstring>Transaction Id: *:
Testing error message here</iongt:faultstring>
    </iongt:retrieveCustomerInformationFault> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:13:59.247

我怀疑 SoapUI XPath 匹配预期结果通配符必须匹配整个文本节点，而不是一个的一部分。

当然，您可以通过对预期结果中的整个文本内容使用星号来在不太精确的级别上断言（正如您提到的那样有效）：

```
<iongt:faultstring>*</iongt:faultstring> 
```

但如果您需要更精确，您也可以修改您的 XPath 表达式，如下所示。而不仅仅是

```
//iongt:retrieveSystemInformationFault 
```

例如，您可以使用以下 XPath 表达式：

```
//iongt:retrieveSystemInformationFault/iongt:faultcode 
```

预期结果为

```
<iongt:faultcode xmlns:iongt="http://www.testing.com/xml/TestingIONGT">TestError012</iongt:faultcode> 
```

和另一个带有 XPath 表达式的断言

```
//iongt:retrieveSystemInformationFault/iongt:faultstring[starts-with(., 'Transaction Id: ') and
   contains(., 'Testing error message here')] 
```

我在`contains()`这里建议是因为 XPath 1.0 没有`ends-with()`. 如果您真的需要精确，而不仅仅是`contains()`，您可以用等价物代替`ends-with()`and `string-length()`，`substring()`但我怀疑这种努力是必要的。

以上的预期结果将只是

```
<iongt:faultstring xmlns:iongt="http://www.testing.com/xml/TestingIONGT">*</iongt:faultstring> 
```

或者您可以将两者合并为一个断言......如果您想查看一个示例，请告诉我。

# javascript - Javascript在textarea的内容时编辑iframe

> ID：12811327
> 
> 赞同：0
> 
> 时间：2012-10-10T02:56:18.123
> 
> 标签：javascript, html, editor, live

```
<script type="text/javascript">
function change() {
document.getElementById('target').getElementsByTagName('html').getElementsByTagName('body').innerHTML = document.getElementById('src').value;
}
</script>

<textarea id="src" onchange="change();"></textarea><br/>
<iframe id="target"></iframe> 
```

这是我的代码，我不明白为什么它不起作用。请不要使用 jQuery。我知道存在这样的事情，例如[htmledit squarefree](http://htmledit.squarefree.com/)我尝试过 frame 而不是 iframe，但也没有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:20:46.617

这是[你](http://jsfiddle.net/aNQ24/2/)要找的吗？首先我`onkeyup`在 textarea 上使用，我认为 textarea 没有`onchange`事件。然后我根据浏览器使用两种不同的方法抓取 iframe，然后用 textarea 中的文本填充 iframe。

```
<script type="text/javascript">
function change() {
  var iFrame =  document.getElementById('target');
   var iFrameBody;
   if ( iFrame.contentDocument ) 
   { // FF
     iFrameBody = iFrame.contentDocument.getElementsByTagName('body')[0];
   }
   else if ( iFrame.contentWindow ) 
   { // IE
     iFrameBody = iFrame.contentWindow.document.getElementsByTagName('body')[0];
   }
    iFrameBody.innerHTML = document.getElementById('src').value;
}
</script>

<textarea id="src" onkeyup="change();"></textarea><br/>
<iframe id="target"></iframe>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:04:34.513

```
<script>
// Tested on Chrome 24 onchange is if you use backspace etc. use keyup for text
// It replaces \n with <br/> if you don't want that wrap the content in a <pre> tag
    document.getElementById("src").onchange=document.getElementById("src").onkeyup=function(){
        document.getElementById('target').contentDocument.getElementsByTagName('body')[0].innerHTML = this.value.replace('\n','<br/>');
    }
</script> 
```

# javascript - regex.test()：它从何而来？

> ID：12811329
> 
> 赞同：1
> 
> 时间：2012-10-10T02:56:54.890
> 
> 标签：javascript

我很好奇下面名为*test*的函数（第 3 行）的使用：

```
var pattern = /[1-9][1-9]{5}/;
var str = 'this is 248760!';
alert(pattern.test(str)); 
```

我在一本书中看到了这个脚本，并没有定义`test(str)`函数。

为什么它会发出警报`true`而不是给出错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T02:59:13.960

`pattern`变量实际上是正则表达式对象（因为之前和之后的字符`/`），并且正则表达式具有`test(...)`作为 JavaScript 一部分内置的成员函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T02:59:18.940

`pattern`是一个正则表达式对象

```
/[1-9][1-9]{5}/.test("foo"); // valid javascript 
```

正则表达式对象提供了许多成员函数，例如`test(...)`， `toString()`仅举几例......

```
/[1-9][1-9]{5}/.toString(); // "/[1-9][1-9]{5}/" 
```

`/`开头和结尾的's 是以下内容的简写：

```
new RegExp("[1-9][1-9]{5}"); // /[1-9][1-9]{5}/ 
```

# c++ - 模板内的 C++ 编译时偏移量

> ID：12811330
> 
> 赞同：18
> 
> 时间：2012-10-10T02:56:56.910
> 
> 标签：c++, c++11, typetraits, offsetof

我需要使用带有成员选择器的`offsetof`from a 。`template`我想出了一个方法，如果你能原谅笨拙的语法：

```
template <typename T,
          typename R,
          R T::*M
         >
constexpr std::size_t offset_of()
{
    return reinterpret_cast<std::size_t>(&(((T*)0)->*M));
}; 
```

用法并不完美（充其量是烦人）：

```
struct S
{
    int x;
    int y;
};

static_assert(offset_of<S, int, &S::x>() == 0, "");
static_assert(offset_of<S, int, &S::y>() == sizeof(int), ""); 
```

非`constexpr`形式更容易使用：

```
template <typename T, typename R>
std::size_t offset_of(R T::*M)
{
    return reinterpret_cast<std::size_t>(&(((T*)0)->*M));
}; 
```

明显的缺点是它不是在编译时完成的（但更容易使用）：

```
int main()
{
    std::cout << offset_of(&S::x) << std::endl;
    std::cout << offset_of(&S::y) << std::endl;
} 
```

我正在寻找的是非多样性的语法*，*但`constexpr`仍然是完全编译时的；但是，我想不出它的语法。我也会对一个`offset_of<&S::x>::value`（就像其他类型特征一样）感到满意，但无法弄清楚它的语法魔法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-10T05:00:38.450

以下应该有效（学分转到[这个问题的答案](https://stackoverflow.com/questions/8866194/getting-the-type-of-a-member)的想法）：

```
#include <cstddef>

template <typename T, typename M> M get_member_type(M T::*);
template <typename T, typename M> T get_class_type(M T::*);

template <typename T,
          typename R,
          R T::*M
         >
constexpr std::size_t offset_of()
{
    return reinterpret_cast<std::size_t>(&(((T*)0)->*M));
}

#define OFFSET_OF(m) offset_of<decltype(get_class_type(m)), \
                     decltype(get_member_type(m)), m>()

struct S
{
    int x;
    int y;
};

static_assert(OFFSET_OF(&S::x) == 0, ""); 
```

请注意，在 gcc 中，`offsetof`宏扩展为可在编译时使用的内置扩展（见下文）。此外，您的代码调用 UB，它取消引用空指针，因此即使它可能在实践中工作，也不能保证。

```
#define offsetof(TYPE, MEMBER) __builtin_offsetof (TYPE, MEMBER) 
```

正如 Luc Danton 所指出的，`reinterpret_cast`根据 C++11 标准，常量表达式不能涉及 a 尽管目前 gcc 接受代码（请参阅[此处的错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=49171)）。此外，我还发现了[缺陷报告 1384](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1384)，其中谈到了降低规则的严格性，因此将来可能会改变。

# javascript - 用 JS 预加载正确的@font-face 字体

> ID：12811333
> 
> 赞同：0
> 
> 时间：2012-10-10T02:57:34.653
> 
> 标签：javascript, font-face

是否可以预加载 @font-face 文件以供以后使用？

理想情况下，我想：

*   检测浏览器的正确字体文件（woff、eot、ttf 等）并预加载
*   检测字体何时加载，触发更多事件

这将构成[预加载器](https://github.com/nandastone/precook-backbone)工具的一部分，该工具将计算进度并阻止页面交互。这通常排除了基于浏览器的解决方案，例如预取。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T16:29:56.827

您可以动态地将样式元素添加到头部，并在其中声明您的字体。

然后，您可以动态地将类添加到任何元素，您可以将字体系列值应用于您的字体。

无需玩预加载。

# php - Ajax 心跳直到并发 ajax 请求完成才完成？

> ID：12811335
> 
> 赞同：1
> 
> 时间：2012-10-10T02:57:39.017
> 
> 标签：php, jquery, ajax

我的负载均衡器在 60 秒后关闭空闲连接，有时运行需要超过 60 秒`download_files.php`。

我想通过每 45 秒发送一次心跳来解决此问题，以确保连接保持活动状态

```
var heartbeatTimer = 0;
heartbeatTimer = setInterval(function () {      
    var heartbeatXhr = new XMLHttpRequest();
    heartbeatXhr.open('GET', 'heartbeat.php', true);
    heartbeatXhr.send();

}, 45*1000);        

$.ajax({
    url: "download_files.php"
});

clearInterval(heartbeatTimer); 
```

问题是所有心跳每 45 秒开始一次，但直到`download_files.php`脚本完成才结束。

![在此处输入图像描述](../Images/fd0742c115c77865ab2e26af6123305d.png)

如何确保在发出请求后立即完成心跳（我正在使用 mod_php）？

另外，如何确保第一次心跳在 45 秒后开始？在上面的示例中，它从 0 秒开始，例如，如果运行需要 30 秒，`download_files.php`我希望心跳不运行一次。

# delphi - 如何将二进制数据写入注册表？

> ID：12811340
> 
> 赞同：-3
> 
> 时间：2012-10-10T02:58:14.967
> 
> 标签：delphi, binary, registry

在 Win7 RegEdit 中编辑或查看二进制文件，就像 1A 2B 3C 4D 现在我得到一个字符串

```
str := '1A,2B,3C,4D'; 
```

如何将 str 写入 Registry ，并在 Win7 RegEdit 中显示 1A 2B 3C 4D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T03:50:23.843

```
var
  Data: array of Byte; // or whatever binary container you want to use
  Reg: TRegistry;
begin
  ...
  SetLength(Data, 4);
  Data[0] := $1A;
  Data[1] := $2B;
  Data[2] := $3C;
  Data[3] := $4D; 

  Reg := TRegistry.Create(KEY_SET_VALUE);
  try
    Reg.RootKey := ...;
    if Reg.OpenKey('...', True) then
    begin
      Reg.WriteBinaryData('Value', Data[0], 4);
      Reg.CloseKey;
    end;
  finally
    Reg.Free;
  end;
  ...
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:40:46.280

您可以使用`TRegistry.WriteBinaryData`. 如果要编写二进制`$1A,$2B,$3C,$4D`而不是字符串数据`'1A,2B,3C,4D'`，请尝试将其更改为`#$1A#$2B#$3C#$4D`.

```
str := #$1A#$2B#$3C#$4D; 
```

并用于`WriteBinaryData`编写注册表：

```
Reg.WriteBinaryData('KeyName', str, Length(str) * SizeOf(Byte)); 
```

# python - 如何让函数在 Python 中作为子进程运行？

> ID：12811349
> 
> 赞同：1
> 
> 时间：2012-10-10T02:59:37.213
> 
> 标签：python, subprocess

我希望我的 Python 脚本能够将其功能之一作为子进程运行。我该怎么做？

这是我的意图的模拟脚本：

```
#!/urs/bin/env python

def print_mynumber(foo):
    """This function is obviously more complicated in my script.
    It should be run as a subprocess."""
    print(foo)

for foo in [1,2,3]:
    print_mynumber(foo) # Each call of this function should span a new process.
    # subprocess(print_mynumber(foo)) 
```

谢谢你的建议。对我来说，正确地表述问题并因此进行适当的网络搜索有点困难。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T03:04:00.877

使用[多处理模块](http://docs.python.org/library/multiprocessing.html)：

```
import multiprocessing as mp

def print_mynumber(foo):
    """This function is obviously more complicated in my script.
    It should be run as a subprocess."""
    print(foo)

if __name__ == '__main__':
    for foo in [1,2,3]:
        proc = mp.Process(target = print_mynumber, args = (foo, ))
        proc.start() 
```

* * *

您可能不想为每次调用创建一个进程`print_mynumber`，尤其是在列表`foo`迭代很长的情况下。在这种情况下，更好的方法是使用多处理池：

```
import multiprocessing as mp

def print_mynumber(foo):
    """This function is obviously more complicated in my script.
    It should be run as a subprocess."""
    print(foo)

if __name__ == '__main__':
    pool = mp.Pool()
    pool.map(print_mynumber, [1,2,3]) 
```

The pool, be default, will create N worker processes, where `N` is the number of cpus (or cores) the machine possesses. `pool.map` behaves much like the Python builtin `map` command, except that it farms out tasks to the pool of workers.

# c++ - WMI：监视注册表更改

> ID：12811351
> 
> 赞同：1
> 
> 时间：2012-10-10T02:59:52.587
> 
> 标签：c++, wmi

在我的项目中，我想监控我系统中的软件安装和卸载，所以我使用了WMI事件机制，但是现在我遇到了一个问题并且有一个问题。

问题：

我想监控 HKLM'SOFTWARE\Microsoft\Windows\currentversion\unistall'，但代码 [1] 工作错误（ExecNotificationQueryAnsync 失败，=0x80041058）。而代码 [2] 工作正常，有什么问题？

[1]

```
hres = pSvc->ExecNotificationQueryAsync(
    _bstr_t("WQL"), 
    _bstr_t("SELECT * FROM RegistryTreeChangeEvent WITHIN 1 " "WHERE Hive='HKEY_LOCAL_MACHINE'" "AND RootPath='software\\Microsoft\\Windows\\currentversion\\unistall'"
    ), 
    WBEM_FLAG_SEND_STATUS, 
    NULL,   
    pStubSink);
[2]

hres = pSvc->ExecNotificationQueryAsync(
    _bstr_t("WQL"), 
    _bstr_t("SELECT * FROM RegistryTreeChangeEvent WITHIN 1 " "WHERE Hive='HKEY_LOCAL_MACHINE'" "AND RootPath='software'"
    ), 
    WBEM_FLAG_SEND_STATUS, 
    NULL,   
    pStubSink); 
```

问题：在我的事件消费者中，我想获取软件的名称，我该怎么做？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T05:46:00.660

只需使用

```
SELECT * FROM RegistryTreeChangeEvent WITHIN 1 " "WHERE Hive='HKEY_LOCAL_MACHINE'" "AND RootPath='software\\\\Microsoft\\\\Windows\\\\currentversion\\\\unistall'" 
```

# c++ - 为什么我使用 STL sort() 进行二次时间排序？

> ID：12811352
> 
> 赞同：2
> 
> 时间：2012-10-10T02:59:57.393
> 
> 标签：c++, sorting, stl, quadratic

我试图使用 STL sort() 函数按存储在地图中的值对对象向量进行排序。令我大吃一惊的是，我的算法是在二次时间中运行的。我尽可能地简化了它，试图找出一个明显的错误，但无济于事。这是简化版：

```
#include <map>
#include <vector>
#include <algorithm>

using namespace std;

struct a{
  map<a*,float> vals;
  bool operator()(a* a1, a* a2){return (vals[a1]>vals[a2]);}
  void asort();
};

void a::asort(){
  vector<a*> v;
  map<a*,float>::iterator it = vals.begin();
  for(;it!=vals.end();it++){v.push_back((*it).first);}
  sort(v.begin(),v.end(),*this);
}

int main(){
  a a0;
  int imax=8000;
  for(int i=0;i<imax;i++){a0.vals[new a]=rand();}
  a0.asort();
} 
```

当我运行 imax=2000、4000、8000 时，分别需要大约 1s、4s、18s。这怎么可能？为什么我没有得到预期的 imax*log(imax) 依赖？我对C ++的经验有限，请帮助！谢谢！

**更新：**感谢 Xeo、Rick 和所有回复的人。正如 Xeo 和 Rick 解释的那样，问题在于比较器（在我的情况下`struct a`是包含值的映射）在每次比较时都被复制，因此计算复杂度`O(imax^2 log(imax))`。我可以看到的一种解决方法（因此对我的代码的更改是最小的）是使用指向地图的指针，即`map<a*,float>* vals`，而不是`map<a*,float> vals`. 然后避免了地图复制，复杂度又回到`O(imax log(imax))`. 非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T03:07:19.217

[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)*按值*取谓词，意义

```
sort(v.begin(),v.end(),*this);
//                     ^^^^^ 
```

将复制包含的地图。

接下来，您将在比较期间进行两次地图查找，即`O(log N)`，而预计这`pred(a,b)`是一个恒定操作。

您可以通过为 (C++11) 定义单独的比较器`std::sort`并使用`std::unordered_map`(C++11) 来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:05:33.633

地图已经排序。`std::sort`可能基于 Quicksort，其最坏情况下的性能是在输入预排序时。

# java - 创建泛型类型的 Java 列表

> ID：12811353
> 
> 赞同：2
> 
> 时间：2012-10-10T03:00:04.880
> 
> 标签：java, list

我创建了一个 Java 类 MyObject：

```
public class MyObject
{
    public final String s; 
    public final int i; 
    public final int j;
    ...
} 
```

我想创建一个这种类型的列表，但我收到“无法实例化类型列表”错误

```
private java.util.List<MyObject> myObjectss = new java.util.List<MyObject>(); 
```

我尝试了这个问题的解决方案（4 票答案），但我得到一个“类型列表不是通用的；它不能用参数参数化”错误......

[Java Linked List 如何创建一个包含字符串和 int 的节点？](https://stackoverflow.com/questions/6246997/java-linked-list-how-to-create-a-node-that-holds-a-string-and-an-int)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T03:01:26.673

[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)是一个*接口*，因此无法实例化。你可以试试：

```
private java.util.List<MyObject> myObjectss = new java.util.ArrayList<MyObject>(); 
```

[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)是一个实现`List`接口的类。

* * *

**编辑**刚刚看到你需要一个[`LinkedList`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)，试试这个：

```
private java.util.List<MyObject> myObjectss = new java.util.LinkedList<MyObject>(); 
```

# recursion - 将排序列表合并到新列表中

> ID：12811354
> 
> 赞同：0
> 
> 时间：2012-10-10T03:00:06.603
> 
> 标签：recursion, pseudocode, sortedlist

所以我需要编写一个程序，将两个排序列表合并到一个新的第三个排序列表中，我只能使用 ADT 排序列表的操作。

与我的所有其他任务一样，我从伪代码开始，但今晚我很害怕，无法为此使用一些伪代码。

我已经写了一些指针：创建一个新的排序列表；当两个列表不为空时，删除并比较它们，将其中一个或另一个添加到新列表中。当列表为空时停止（但请考虑当一个列表先为空时会发生什么！）。

非常感谢任何和所有帮助

编辑：让你知道我只是在寻找伪代码帮助而不是实际代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:08:17.510

```
function merge (lista, listb) {

    toReturn = your 'third list'

    while lista and listb both still have elements {
        if lista's smallest element < listb's smallest element {
            add lista's smallest element to toReturn
            remove lista's smallest element
        } else {
            add listb's smallest element to toReturn
            remove listb's smallest element
        }
    }

    // if lista has no elements, this loop is skipped
    while lista still has elements { 
        add them to toReturn
    }

    // if listb has no elements, this loop is skipped
    while listb still has elements { 
        add them to toReturn
    }

    return toReturn

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T13:27:57.793

这可以通过使用合并排序的合并过程来完成这是我的 cde，我已经从 main 函数传递了所有 3 个列表

```
public static void merge(int A[],int A1[],int B1[],int n1,int n2)
{

        int a[]=new int[n1+1];
        int b[]=new int[n2+1];
        for(int k=0;k<n1;k++){
        a[k]=A1[k];

        }
        for(int k=0;k<n2;k++){
        b[k]=B1[k];
        }
        int i=0,j=0;
        a[n1]=Integer.MAX_VALUE;
        b[n2]=Integer.MAX_VALUE;
        for(int k=0;k<A.length;k++){
            if(a[i]>b[j]){
                A[k]=b[j];
                j++;
            }
            else{
                A[k]=a[i];
                  i++;      
            }
        }

    } 
```

# c# - 在 ASP.NET MVC 视图中在没有特殊字符（？）的 IFrame 中呈现 html

> ID：12811355
> 
> 赞同：0
> 
> 时间：2012-10-10T03:00:07.300
> 
> 标签：c#, asp.net-mvc, iframe

我必须在 ASP.NET MVC 视图的 IFrame 中呈现 html。我将视图中 iframe 的“源”设置为“控制器操作”。但是，我没有看到嵌入在我的视图中的实际 html，而是看到了 html 源代码和 html 文本中的一些特殊字符。我在这里有一个相同的屏幕截图：https: [//plus.google.com/photos/117026675016318325824/albums/5797507243229043425?banner=pwa&gpsrc=pwrd1#photos](https://plus.google.com/photos/117026675016318325824/albums/5797507243229043425?banner=pwa&gpsrc=pwrd1#photos/117026675016318325824/albums/5797507243229043425?banner=pwa&gpsrc=pwrd1) /117026675016318325824/albums/5797507243229042wrdbannerp2 还想要&gpsrc=wrdbanner2补充一点，一个 pdf 文档和一个文本文档使用相同的代码渲染得很好，只有渲染 html 文档是一个问题。

如何使视图以正确的格式显示 html？

控制器：

```
public BinaryNonBinaryActionResult GetAgreement(string id)
{
    string agreementText = "<FONT color=deepskyblue><STRONG> test text</STRONG></FONT>";
    return new BinaryNonBinaryActionResult(GetBytes(agreementText), "text/html");
}
 static byte[] GetBytes(string str)
    {
        byte[] bytes = new byte[str.Length * sizeof(char)];
        Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
        return bytes;
    }

public class BinaryNonBinaryActionResult : ActionResult
{
    private byte[] bytes;
    private string contentType ;
    public BinaryNonBinaryActionResult(byte[] bytes, string contentType)
    {
        this.bytes =bytes;
        this.contentType = contentType;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
            throw new ArgumentNullException("context");

        var response = context.HttpContext.Response;
        response.ContentType = contentType;
        var imageStream = new MemoryStream(bytes);
        var buffer = new byte[4096];
        while (true)
        {
            var read = imageStream.Read(buffer, 0, buffer.Length);
            if (read == 0)
                break;
            response.OutputStream.Write(buffer, 0, read);
        }
        response.End();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:20:32.607

您可能需要将视图提取为 HTML 字符串。请试试这个。

```
[HandleError]
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewData["Message"] = "Welcome to ASP.NET MVC!";

        return View();
    }

    public ActionResult About()
    {
        return View();
    }

    public BinaryNonBinaryActionResult GetAgreement(string id) 
    { 
        string agreementText = "<FONT color=deepskyblue><STRONG> test text</STRONG></FONT>"; 
        return new BinaryNonBinaryActionResult(GetBytes(agreementText), "text/html"); 
    }

    public byte[] GetBytes(string input)
    {

        string myString = this.RenderViewToString("About", this.ViewData);
        return Encoding.ASCII.GetBytes(myString);
    }

} 
```

* * *

```
public static class RenderExtended
{
    public static string RenderViewToString(this Controller controller, string viewName, object viewData)
    {
        //Create memory writer     
        var sb = new StringBuilder();
        var memWriter = new StringWriter(sb);
        //Create fake http context to render the view     
        var fakeResponse = new HttpResponse(memWriter);
        var fakeContext = new HttpContext(HttpContext.Current.Request, fakeResponse);
        var fakeControllerContext = new ControllerContext(new HttpContextWrapper(fakeContext), controller.ControllerContext.RouteData, controller.ControllerContext.Controller);
        var oldContext = HttpContext.Current;
        HttpContext.Current = fakeContext;

        //Use HtmlHelper to render partial view to fake context     
        var html = new HtmlHelper(new ViewContext(fakeControllerContext, new FakeView(), new ViewDataDictionary(), new TempDataDictionary(), memWriter), new ViewPage());
        html.RenderPartial(viewName, viewData);
        //Restore context     
        HttpContext.Current = oldContext;
        //Flush memory and return output     
        memWriter.Flush();
        return sb.ToString();
    }
    public class FakeView : IView
    {
        public void Render(ViewContext viewContext, System.IO.TextWriter writer)
        {
            throw new NotImplementedException();
        }
    }
} 
```

# asp.net - jquery ajax 方法总是返回错误？

> ID：12811357
> 
> 赞同：1
> 
> 时间：2012-10-10T03:00:42.637
> 
> 标签：asp.net, ajax, jquery, asp.net-ajax

我有以下 ajax 调用，每次调用它总是会触发**错误回调函数。**处理程序中的代码在错误发生后仍然运行，但从未执行**成功**回调。我做错了什么？

```
 $.ajax({
        type: "POST",
        url: "Handlers/TheHandler.ashx",
        data: {
            control1: $('[id*=control1]').val(),
            control2: $('[id*=control2]').val(),
            control3: $('[id*=control3]').val(),
            control4: $('#control4').val(),
            control5: $('[id*=control5]').val(),
            control6: $('[id*=control6]').val()
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert(jqXHR.readyState);
            alert(textStatus);
            alert(errorThrown);
        },
        success: function (returnedValue) {
            alert("Got Here");
            alert(returnedValue);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:22:45.243

调用处理程序或使用服务器端代码时可能会出现错误。对于这类场景，像 firebug 这样的工具会很有用。通过导航到 Net-->XHR 选项卡，我们可以看到异步操作的结果。当然，我们也可以在 Visual Studio 中设置断点并进行调试，但是这样可以快速找到服务器响应，甚至可以快速找到请求是否到达服务器，而无需附加调试器。通常，检查数据变量的处理程序路径和属性名称，它必须与服务器端方法的参数匹配。它确保服务器端代码被调用。

# javascript - 复制脚本并递增 id 名称以动态添加输入内容

> ID：12811358
> 
> 赞同：1
> 
> 时间：2012-10-10T03:00:45.317
> 
> 标签：javascript, jquery, animation, if-statement

我目前正在一个网站上使用 jquery 轻松修改 css 属性和动画。然后该页面将输出代码供用户复制并粘贴到他们的工作中。

我想动态添加输入字段，以便用户可以在动画的“关键帧”中输入自己的参数。

我想知道是否有办法让按钮创建新元素和 jquery 让它运行。目前我已经尝试设置一个变量值以使用按钮递增然后有一个“for”循环来创建新的关键帧元素。

有没有办法用新的关键帧附加以前的关键帧

这是我在为输入字段创建 DOM 节点时需要设置的示例，但我遇到的主要问题是增加“i”的值并仅复制一次代码。

/////////顶部文本输入///////////

```
 var newTop = document.createElement('input')

    newTop.type = "text"
    newTop.id ="animation_" + i + "_top" // i = 1
    newTop.size="10" 
    newTop.value="100" 
    newTop.name="animation_" + i +"_top" // i = 1
    newTop.textContent = "top";

    var refTopSibling = document.getElementById('frame_1')
    var refTopParent = refTopSibling.parentNode

    refTopParent.appendChild(newTop) 
```

/////////顶部文本输入///////////

```
 var newLeft = document.createElement('input')

    newLeft.type = "text"
    newLeft.id ="animation_" + i + "_left" // i = 2
    newLeft.size="10" 
    newLeft.value="100" 
    newLeft.name="animation_" + i +"_left" // i = 2
    newLeft.textContent = "left";

    var refTopSibling = document.getElementById("animation_" + i + "_top")
    var refTopParent = refTopSibling.parentNode

    refTopParent.appendChild(newLeft) 
```

问候，

安德鲁

编辑 - - - - - - - - - - - - -

感谢您的回复。不幸的是，它对于 JS fiddle 来说有点大。我只是一个菜鸟，所以这可能不是最优雅的方法，但我使用 if 语句在每次按下时增加变量的当前值......不幸的是它不是动态的，但我有足够的选项来允许 11 个关键帧可以动态添加到 DOM 的动画。

函数 addFrame(){

```
var n;

if (document.getElementById('frame_1')){n=2};
if (document.getElementById('frame_2')){n=3};
if (document.getElementById('frame_3')){n=4};
if (document.getElementById('frame_4')){n=5};
if (document.getElementById('frame_5')){n=6};
if (document.getElementById('frame_6')){n=7};
if (document.getElementById('frame_7')){n=8};
if (document.getElementById('frame_8')){n=9};
if (document.getElementById('frame_9')){n=10};
if (document.getElementById('frame_10')){n=11}; 
```

//这里剩下的代码

}

现在想办法动态绘制 svg 并使用用户输入对其进行动画处理；-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:35:33.557

这不一定是最好的实现，但我相信它符合您的要求。

```
function SampleObject(position, i)
{
    this.posString = "new" + position;
    $(this[this.posString] = document.createElement("input"))
            .css({  type: "text",
                    id: "animation_" + i + "_" + position,
                    size: "10" ,
                    value: "100" ,
                    name: "animation_" + i +"_" + position,
                    textContent: position
                });

    $("#frame_1").parent().append(el);
}

//Public methods
SampleObject.prototype.getInput = function()
{
    return this[this.posString];
}
//Static members
SampleObject.set = [];

//Static methods
SampleObject.new = function(position);
{
    this.set.push(new SampleObject(position, this.set.length + 1));
}

//Quick test
SampleObject.new("top"); 
```

jQuery rewrite 除了这三个动作之外，尽管最后一个可能超出要求。

1）对象的构造函数不是为每个位置编写一个新函数，而是采用一个位置字符串（任何字符串都可以，但对于您的目标位置似乎很合适）。将字符串追加到“new”后形成“new”，用于创建一个对象成员，按照帖子中当前的多功能方法命名，存储新的输入对象-个人认为成员命名是多余的但我不知道这个项目。该对象具有用于返回输入表单的 get 方法。

2) 使用静态“Sample.new”方法（采用位置参数）一个新的 SampleObject，其索引值为 1 +（静态成员）SampleObject.set，set 变量用于按原样存储新对象创建的。这可能不是必需的，但我想您稍后会想要与它们交互或附加事件。

至于“frame_”if 语句

```
$("[id^=frame_]").length() + 1 
```

假设帧总是以迭代方式创建，这将返回适当的 n 值。

# c++ - 编译后的程序如何与操作系统交互？

> ID：12811359
> 
> 赞同：26
> 
> 时间：2012-10-10T03:00:47.483
> 
> 标签：c++, operating-system

当一个程序被编译时，它被转换为机器可以“理解”的机器代码。该机器代码如何与操作系统交互以执行诸如从键盘获取输入之类的操作？对我来说，机器代码似乎应该在比操作系统更低的级别运行，因此，我无法理解操作系统如何充当已编译应用程序和硬件之间的中介。

PS：我刚开始 C++ 编程，我想了解 cin 和 cout 是如何工作的

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-10T03:10:03.717

这是一个很好的问题（比你知道的要好），还有很多东西要学。很多。

我会尽量保持简短。操作系统充当软件和硬件之间的抽象层：

```
 Software
       .
      /|\    
       |   communicates with
      \|/
       '
Operating System
       .
      /|\    
       |   communicates with
      \|/
       '
   Hardware 
```

操作系统通过称为**驱动程序**（广泛使用的术语）的程序与硬件通信，操作系统通过称为**系统调用**的程序（不那么广泛使用的术语）与软件通信。

本质上，当您进行系统调用时，您将离开您的程序并输入操作系统的代码。系统调用是允许程序员与资源进行通信的唯一方式。

* * *

现在我会停在那里，但你也说：

> 对我来说，机器代码似乎应该在比操作系统更低的级别运行，因此，我无法理解操作系统如何充当已编译应用程序和硬件之间的中介。

这很棘手，但是一旦您了解了一些基础知识，就很简单了。

首先，所有代码只是在 CPU 上运行的机器代码。没有代码比其他代码更高或更低（某些只能在特权内核模式下运行的命令除外）。所以问题是，即使操作系统将 CPU 的控制权交给了用户，它又怎么可能处于控制之中呢？

当代码在 CPU 上运行时，有一个称为**中断**的概念。**这是一个发送到 CPU 的信号，它会导致当前运行的代码停止并被另一段代码（称为中断处理程序**）切换出来。

中断的例子包括键盘、鼠标，最重要的是时钟。

定期引发时钟中断会导致操作系统的时钟中断处理程序运行。在这个时钟中断处理程序中是操作系统的代码，它检查当前正在运行的代码确定接下来需要运行的代码。这可以是更多的操作系统代码或更多的用户代码。

因为时钟*总是在*滴答作响，并且因为操作系统*总是*有这个周期性的机会在 CPU 上运行，所以它能够协调计算机内的一切，即使它使用与任何普通程序相同的 CPU 命令集运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T03:08:13.470

操作系统提供[系统调用](http://en.wikipedia.org/wiki/System_call)，程序可以调用这些系统调用来访问较低级别的服务。

请注意，系统调用与`system()`您可能用于执行外部程序的函数不同。

系统调用用于执行访问文件、通过网络通信、请求堆内存等操作。

# html - 在 iOS 6 中使用 getUserMedia/Stream API

> ID：12811361
> 
> 赞同：5
> 
> 时间：2012-10-10T03:01:13.157
> 
> 标签：html, ios6

我正在尝试构建一个网络应用程序，允许用户使用 iPad 上的内置摄像头拍摄自己的照片或视频，然后将其发布到 Facebook。到目前为止，我`getUserMedia()`在 Safari for iOS 6 或 Chrome 应用程序中进行测试时运气不佳。

此信息图显示 Safari 不支持 iOS 6，但它应该适用于 Chrome，不是吗？

[http://caniuse.com/stream](http://caniuse.com/stream)

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:36:37.047

目前，移动 Safari 从相机（或照片卷）获取图像的唯一方法是使用输入元素。这很简单：

```
<input id="image-picker" type="file" accept="image/*" /> 
```

然后在js中：

```
$("#image-picker").change( function (event) {
  var files = event.target.files;
  if (files.length>0) {
    // Do something with files[0]
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:15:14.187

iOS 版 Chrome 使用相同的方法/视图来显示和解释 HTML，除了一些 Safari 特定的优化。如果 Safari 不支持`getUserMedia()`，那么 Chrome 也无法支持它，除非他们为 iOS 构建自己的 WebKit 端口，即便如此，它也可能是一个延伸。您所追求的功能可以通过其他方式获得，但不能使用`getUserMedia()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T01:52:21.467

现在 Safari 从 IOS 11 和 Safari 11 开始支持它。命名空间发生了一些变化，因为它现在以 mediaDevices 为前缀。检查[https://caniuse.com/?search=mediaDevices](https://caniuse.com/?search=mediaDevices)

# ios - UiManagedDocument 在模拟器中运行良好，但在 iPhone 上出现 UIDocumentStateSavingError

> ID：12811362
> 
> 赞同：0
> 
> 时间：2012-10-10T03:01:14.630
> 
> 标签：ios, uimanageddocument

我在这里建议使用 uiManagedDocument 单例：http: [//adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html](http://adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html)

该文档由 fetchedResultsController 访问并显示在 tableViewController 中。

```
+ (DocumentHandler *)sharedDocumentHandler
    {
    static dispatch_once_t once;
    dispatch_once(&once, ^{
        _sharedInstance = [[self alloc] init];
    });
    return _sharedInstance;
}

- (id)init
{
    self = [super init];
    if (self) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];

        url = [url URLByAppendingPathComponent:@"ElphiDB"];
        self.document = [[UIManagedDocument alloc] initWithFileURL:url];
        [self.logger log:@"DocumentHandler Initializing document"];
        // Set our document up for automatic migrations
        NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                 [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
        self.document.persistentStoreOptions = options;

     }
     return self;
}

- (void)performWithDocument:(OnDocumentReady)onDocumentReady
{

    void (^OnDocumentDidLoad)(BOOL) = ^(BOOL success) { 
         onDocumentReady(self.document);
        [self.logger log:[NSString stringWithFormat:@"performWithDocument success=%d",success]];
        };

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.document.fileURL path]]) {
        [self.document saveToURL:self.document.fileURL forSaveOperation:UIDocumentSaveForCreating     completionHandler:OnDocumentDidLoad];
    } else if (self.document.documentState == UIDocumentStateClosed) {
        [self.document openWithCompletionHandler:OnDocumentDidLoad];

        NSLog(@"DocumentHandler performWithDocument Open:%@",[self.document description]);        
    } else if (self.document.documentState == UIDocumentStateNormal) {
        OnDocumentDidLoad(YES);
        NSLog(@"DocumentHandler performWithDocument state normal");
    }
   if (self.document.documentState != UIDocumentStateNormal) {
       [self.logger log:[NSString stringWithFormat: @"DocumentHandler problem-%@",[self.document description]]];
      } 
```

}

//在tableViewController中

```
 - (void)viewWillAppear:(BOOL)animated{ 
    [super viewWillAppear:animated];
     RootNavigationController *rootNC=(RootNavigationController*)self.navigationController;
         if (!self.plugDocument) {
             [[DocumentHandler sharedDocumentHandler] performWithDocument:^(UIManagedDocument *document) {
                [self.logger log:[NSString stringWithFormat:@"PlugsTVC VWA - call documentHandler doc=%@",document]];
                self.plugDocument=document;
                self.plugFetcher.document=document;
                [self setupFetchedResultsController];
                [self fetchPlugDataIntoDocument:document];
            }];
         }else{
            [self.logger log:[NSString stringWithFormat:@"PlugsTVC VWA  doc=%@ does exist",self.plugDocument]];
            [self fetchPlugDataIntoDocument:self.plugDocument];
        }
} 
```

该应用程序在 6.0 模拟器上运行良好，但在设备上，表格是空白的，并且文档显示一个问题，即 UIDocumentStateSavingError 或 UIDocumentStateEditingDisabled。我不知道是什么导致它在手机和模拟器上的运行方式不同

# python - Python：通过读取标准输出来关闭 for 循环

> ID：12811374
> 
> 赞同：1
> 
> 时间：2012-10-10T03:02:04.897
> 
> 标签：python, while-loop

```
import os

dictionaryfile = "/root/john.txt"
pgpencryptedfile = "helloworld.txt.gpg"

array = open(dictionaryfile).readlines()

for x in array:
    x = x.rstrip('\n')
    newstring = "echo " + x + " | gpg --passphrase-fd 0 " + pgpencryptedfile
    os.popen(newstring) 
```

我需要在 for 循环中创建一些东西来读取 gpg 的输出。当 gpg 输出这个字符串`gpg: WARNING: message was not integrity protected`时，我需要关闭循环并打印成功！

我该怎么做，背后的原因是什么？

感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:10:42.113

使用[subprocess.check_output](http://docs.python.org/library/subprocess.html#subprocess.check_output)`gpg`根据其输出调用和中断循环。

像这样的东西（未经测试，因为我什么都不知道`gpg`）：

```
import subprocess

dictionaryfile = "/root/john.txt"
pgpencryptedfile = "helloworld.txt.gpg"

with open(dictionaryfile, 'r') as f:
    for line in f:
        x = line.rstrip('\n')
        cmd = ["echo " + x + " | gpg --passphrase-fd 0 " + pgpencryptedfile]
        output = subprocess.check_output(cmd, shell=True)
        if 'gpg: WARNING: message was not integrity protected' in output:
            break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:31:16.177

```
import subprocess

def check_file(dictfile, pgpfile):
    # Command to run, constructed as a list to prevent shell-escaping accidents
    cmd = ["gpg", "--passphrase-fd", "0", pgpfile]

    # Launch process, with stdin/stdout wired up to `p.stdout` and `p.stdin`
    p = subprocess.Popen(cmd, stdin = subprocess.PIPE, stdout = subprocess.PIPE)

    # Read dictfile, and send contents to stdin
    passphrase = open(dictfile).read()
    p.stdin.write(passphrase)

    # Read stdout and check for message
    stdout, stderr = p.communicate()
    for line in stdout.splitlines():
        if line.strip() == "gpg: WARNING: message was not integrity protected":
            # Relevant line was found
            return True

    # Line not found
    return False 
```

然后使用：

```
not_integrity_protected = check_file("/root/john.txt", "helloworld.txt.gpg")
if not_integrity_protected:
    print "Success!" 
```

如果“gpg: WARNING:”消息实际上是打开的`stderr`（我怀疑是这样），请将`subprocess.Popen`行更改为：

```
p = subprocess.Popen(cmd, stdin = subprocess.PIPE, stderr = subprocess.PIPE) 
```

..和 for 循环 from `stdout`to `stderr`，像这样：

```
for line in stderr.splitlines(): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T03:10:53.030

您可以使用允许您使用的[子流程模块：](http://docs.python.org/library/subprocess.html)

```
subprocess.call(args, *, stdin, stdout, stderr, shell) 
```

（有关如何使用参数，请参阅[Python 文档。）](http://ss64.com/bash/grep.html)

这很好，因为您可以轻松读取您调用的任何程序的退出代码。

例如，如果您将“newstring”更改为：

```
"echo " + x + " | gpg --passphrase-fd 0 " + pgpencryptedfile | grep 'gpg: WARNING: message was not integrity protected' 
```

如果有匹配项，grep 将返回 0，如果没有找到匹配项，则返回 1。（[来源](http://ss64.com/bash/grep.html)）

grep 的退出代码将从 subprocess.call() 函数返回，您可以轻松地将其存储在变量中并使用 if 语句。

编辑：正如 Matthew Adams 在下面提到的，您还可以阅读 gpg 本身的退出代码。

# java - JFrame（全屏）背景颜色不变

> ID：12811377
> 
> 赞同：1
> 
> 时间：2012-10-10T03:02:41.810
> 
> 标签：java, swing, colors, background, jframe

我正在使用

```
getContentPane().setBackground(Color.PINK); 
```

将 JFrame 的背景设置为粉红色。此 JFrame 正在使用 GraphicsDevice 进行全屏显示。背景的颜色没有改变。有什么帮助吗？

全屏代码：

```
public static void main(String... args) {
     DisplayMode dMode = new DisplayMode(800, 600, 16, DisplayMode.REFRESH_RATE_UNKNOWN);
     GameMain game = new GameMain();
     game.run(dMode);

 }

 public void run(DisplayMode dMode) {
     getContentPane().setBackground(Color.PINK);
     setForeground(Color.WHITE);
     setFont(new Font("Arial", Font.PLAIN, 24));

     Screen s = new Screen();
     try {
         s.setFullScreen(dMode, this);
         try {
             Thread.sleep(5000);
         } catch(Exception e) { }
     } finally {
         s.restoreScreen();
     } 
```

## }

```
 public void setFullScreen(DisplayMode dMode, JFrame window) {
    window.setUndecorated(true);
    window.setResizable(false);
    gDevice.setFullScreenWindow(window);

    if(dMode != null && gDevice.isDisplayChangeSupported()) {
        try {
            gDevice.setDisplayMode(dMode);
        } catch(Exception e) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:12:55.067

这对我来说很好......

```
public class TestFullScreen {

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                FullFrame frame = new FullFrame();
                frame.setUndecorated(true);
                frame.getContentPane().setBackground(Color.PINK);

                GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
                GraphicsDevice[] gs = ge.getScreenDevices();

                gs[0].setFullScreenWindow(frame);

            }
        });

    }

    public static class FullFrame extends JFrame {

        public FullFrame() {
            super();

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    System.exit(0);
                }
            });

        }
    }
} 
```

我什至在`setBackground`通话后设置了移动`setFullScreenWindow`通话。

确保内容窗格上没有任何可能占用完整空间的内容，并且内容窗格未更改。

# c# - 直接降序排序

> ID：12811382
> 
> 赞同：4
> 
> 时间：2012-10-10T03:03:38.453
> 
> 标签：c#, sorting

我有

```
List<string> strs;
double[] values; 
```

其中 values 数组包含 strs 列表中每个字符串的值

说`strs={"abc","def","ghi"}` ，`values={3,1,2}` 这意味着“abc”的值为 3，依此类推。

我希望对按值排序的 strs 和值进行排序，使其变为

```
strs={"def","ghi","abc"}
values={3,2,1} 
```

我在用

```
string[] strsArr = strs.ToArray();
Array.Sort(values, strsArr);//1\. sort it ascendingly
strs = strsArr.ToList();
Array.Reverse(strs);//2\. reverse it 
```

有没有一种方法可以直接按降序对它进行排序而无需 2 个阶段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:18:24.443

您可以使用 Dictionary 和 Linq 来解决这个问题。

```
var dict = new Dictionary<string, double>() 
{ 
           {"abc",3}, 
           {"def",1}, 
           {"ghi",2} 
};
var sorted = dict.OrderByDescending(g => g.Value)
                 .Select(g => g.Key)
                 .ToArray(); 
```

请注意，除非您最后有一个 ToArray()，否则排序将推迟到稍后枚举，并且可能会意外地被枚举多次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:18:26.603

这个怎么样：

```
var strs = new [] { "abc", "def", "ghi", };
var values = new [] { 3, 1, 2, };

strs =
    strs
        .Zip(values, (s, v) => new { s, v })
        .OrderByDescending(sv => sv.v)
        .Select(sv => sv.s)
        .ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T03:13:02.033

尝试使用字典：

```
Dictionary<string, double> dictionary = new Dictionary<string, double>();
dictionary.Add("abc", 3);
dictionary.Add("def", 1);
dictionary.Add("ghi", 2);

var sortedDict = dictionary.OrderByDescending(x => x.Value);
double[] values = sortedDict.Select(x => x.Value).ToArray();
List<string> strs = sortedDict.Select(x => x.Key).ToList(); 
```

# networking - 两个无线移动节点之间的距离

> ID：12811383
> 
> 赞同：0
> 
> 时间：2012-10-10T03:03:38.717
> 
> 标签：networking, mobile, distance, wireless, adhoc

我目前正在尝试找到计算两个无线移动节点之间距离的方法或机制。

假设有 2 个节点（节点 B 和 C）与节点 A 进行通信。节点 A 如何知道节点 B 或节点 C 是否比另一个更近？

是否可以通过使用 RSSI 找到它？还是有任何其他机制来计算距离？

我将不胜感激您的任何回答或评论。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:48:00.610

使用 GPS 怎么样？如今，大多数移动设备都支持内部 GPS。RSSI 会给你一些距离指示，但信号可能已经反弹并穿透了几堵墙，所以更强的信号并不一定意味着它们更近。另一种选择是使用 WiFi 地理定位，假设该地区还有其他几个 WiFi 接入点，它的效果非常好。我使用 SkyHook，效果很好： [http ://www.skyhookwireless.com/location-technology/sdk.php](http://www.skyhookwireless.com/location-technology/sdk.php)

# c++ - 捕捉窗口调整大小

> ID：12811384
> 
> 赞同：5
> 
> 时间：2012-10-10T03:03:48.157
> 
> 标签：c++, windows, winapi, events, window

我正在尝试在调整窗口大小时调整图形设备缓冲区的大小，但我无法检测到该事件。

这是 C++ Windows 编程。我试过：

```
 while(WM_QUIT != msg.message){
                if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE)){
                    switch(msg.message){
                    case WM_SIZE:
                        return; //<-- If the program closes because of this return, then I know I found the right statements.
                    }
                    //TranslateMessage(&msg);
                    //DispatchMessage(&msg);
                }else{
                    poly.setConstantBuffer(space.getCamera());
                    poly.draw(iSize);

                    graphics.render();
                }
            } 
```

它没有返回，所以这意味着这是不正确的。捕捉调整大小事件的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:55:35.120

`WM_SIZE`不是在调整大小期间发送到窗口的唯一消息。您需要取消注释调用`TranslateMessage()`，`DispatchMessage()`以便处理其他消息。并且您的窗口的 mssage 调度过程需要将未处理的消息传递`DefWindowProc()`给默认处理。你在做这一切吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T04:00:33.967

您应该在窗口过程中处理消息，而不是在消息循环中。`PeekMessage`不返回已发送消息，`WM_SIZE`是已发送消息。

# ios - xcode 在子类中使用视图

> ID：12811389
> 
> 赞同：1
> 
> 时间：2012-10-10T03:04:11.797
> 
> 标签：ios, xcode, subclassing

我正在学习为 iphone 编程，我想做一些绘图。我遵循了一些示例代码并将视图控制器子类化，它工作正常。现在，当我想扩展程序时，我遇到了一个设计问题，我可以使用一些帮助。

我用 mynewview 子类化 myviewcontroller。如果我在 myviewcontroller 中有任何代码，我如何在 mynewview 中调用或引用它，反之亦然？我不确定我是否在问这个问题，但我试图了解类和子类之间的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:38:24.003

Objective-C 中的消息传递系统是动态的。每个对象都包含`struct`运行时用于自省的 with 信息。在这里，运行时将找到对象能够响应的方法列表。因此，假设您向这样的实例发送消息：

```
[mynewview someMethod]; 
```

运行时将首先检查对象信息以尝试找到一些能够响应消息的方法。如果没有找到，则查询超类，以此类推。实际上，运行时要复杂得多，并且会给任何对象更多响应的机会（这是动态部分。例如，`mynewview`可能没有调用任何方法`someMethod`，但可能能够满足调用，但这是你可能会做的事情现在不想担心）。

从子类中，您可以使用键盘调用给定方法的超类实现`super`，因此如果`mynewview`是子类，`myviewcontroller`您可以使用以下方法调用`myviewcontroller`实现`mynewview`：

```
[super someMethod]; 
```

如果in和 in`someMethod`都存在，则运行时将自动仅调用子实现，您必须从子实现调用父实现（如果必须）。`myviewcontroller``mynewview`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:12:01.340

Objective-C 对象受益于继承。所有类都是 NSObject 的子类，因此您可以在任何对象上调用 init。如果您创建了一个自定义类并为它提供了一个方法 doSomethingAwesome，那么您可以自由地在自定义类的任何子类中实现 doSomethingAwesome。但是，在子类中声明方法不会将该方法添加到超类中。顺便说一句，我很少发现自己的子类唱我自己的自定义类。我相信鼓励维护所谓的浅对象层次结构。通常我将股票可可类子类化，根据我的需要进行定制，如果我需要在多个子类中自定义方法，我将在超类上声明一个类别，而不是依靠继承来提供我的自定义行为

# java - 具有 maven 依赖项的 Java ClassNotFoundException

> ID：12811392
> 
> 赞同：45
> 
> 时间：2012-10-10T03:05:02.230
> 
> 标签：java, maven, noclassdeffounderror, classnotfoundexception

当我尝试使用 Maven 定义的依赖项运行我的应用程序时，我遇到了`ClassNotFoundException`异常。`NoClassDefFoundError`

`pom.xml`我使用以下声明将相关 jar 的 maven 依赖项添加到我的文件中：

```
<dependency>
    <groupId>spy</groupId>
    <artifactId>spymemcached</artifactId>
    <version>2.8.4</version>
    <scope>provided</scope>
</dependency> 
```

这会将相关的 JAR 文件添加到我在 Eclipse 中的 Maven Dependencies 文件夹中。我可以在代码中访问这些类，但是一旦我运行应用程序就会得到上述异常。

在 Maven 依赖项下的 Java 构建路径中引用了该 jar：

![Java 构建路径](../Images/329671bd1ce52a4869f4f4c6578c8134.png)

我的本地 Maven 存储库已添加到我的类路径中：

![截屏](../Images/da727e4aad6e47a5a3db557a3973a1ef.png)

当我尝试运行应用程序时，出现以下两个异常：

```
java.lang.NoClassDefFoundError: Lnet/spy/memcached/MemcachedClient;

java.lang.ClassNotFoundException: net.spy.memcached.MemcachedClient 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-10T03:08:14.833

更改`provided`为`compile`

**假如**

> 这很像 compile，但表明您希望 JDK 或容器在运行时提供依赖项。例如，在为 Java Enterprise Edition 构建 Web 应用程序时，您可以将 Servlet API 和相关 Java EE API 的依赖设置为提供的范围，因为 Web 容器提供了这些类。此范围仅在编译和测试类路径上可用，并且不可传递。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T03:08:34.460

```
<scope>provided</scope> 
```

“提供”范围意味着依赖项应该仅在编译阶段可用，并且它们将在运行时在其他地方可用，并且 Maven 不应将它们与当前应用程序的其余 jar 和类一起打包。

您的依赖似乎不在“提供”范围内。从您的依赖定义中删除该范围，jar 将出现在您打包的 jar/war/ear 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-21T10:52:27.923

我遇到了同样的问题，但我没有在我的 POM 上定义标签，它一直工作正常，直到有一天突然开始在我的本地机器上无缘无故地给我这个错误，依赖关系已正确设置在 POM 中，并且 jar 存在于本地 maven 存储库中。

我尝试清理项目并更新 maven 项目，但没有任何效果，其他帖子中建议的其他解决方案也没有对我有用。

我终于能够通过转到服务器选项卡->右键单击Tomcat v8.0->浏览部署位置来解决它

这应该会引导您进入一个临时文件夹，例如

.metadata.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps

然后你浏览到你的项目文件夹 - > WEB-INF - > lib - > 在这里我发现库中给出错误的 jar 丢失了，所以我只是从 .m2\repository 复制它

重新启动服务器，它又开始像往常一样工作。

我希望这可以帮助一些面临同样问题的机构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T13:57:23.310

回答与您的问题有些相关，但仍然可以帮助其他人。
在我的情况下，添加`<scope>compile</scope>`依赖项是不够的。我还必须添加`<packaging>jar</packaging>`到目标模块的 pom.xml 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-14T15:25:23.207

我也遇到了同样的问题，在尝试了各种解决方案后，通过以下步骤解决了问题......

1.  单击服务器>打开启动配置>参数（复制“LocalPath\temp0\wtpwebapps”路径）。

2.  转到“LocalPath\temp0\wtpwebapps\ProjectName\WEB-INF\lib”。

3.  从 .m2 复制 JAR（导致 ClassNotFoundException）并将其放在“LocalPath\temp0\wtpwebapps\ProjectName\WEB-INF\lib”路径中。

# c# - 如何配置 WPF 应用程序 GUI？

> ID：12811395
> 
> 赞同：0
> 
> 时间：2012-10-10T03:05:40.697
> 
> 标签：c#

我在 MainWindow 上有一个带有 GUI 的 WPF 应用程序。我想根据一些用户操作在一段时间后处理这个窗口。但我希望应用程序继续在后台运行。我知道Window可以设置为隐藏，但它仍然使用内存。如何在不退出WPF应用程序的情况下销毁MainWindow？另外我想知道是否可以在处理 MainWindow 后重新启动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:11:35.760

```
this.Close(); //Will close the window but keep the application running.

var mw = new MainWindow();
mw.Show(); //Will open a new MainWindow and show it.
mw.Close(); //Close this one too. 
```

也就是说隐藏它是最好的选择，它使用的内存量应该是无关紧要的。这就是内存的用途。

# forms - Magento 联系表 - 收到我自己的电子邮件

> ID：12811398
> 
> 赞同：1
> 
> 时间：2012-10-10T03:06:07.813
> 
> 标签：forms, email, magento, contact

出于某种原因，当客户提交联系表格时，我的 gmail 中显示该电子邮件是我自己发送的，而不是我的客户发送的。请查看图片，以便您知道我在说什么。

[http://i.stack.imgur.com/QsACc.jpg](http://i.stack.imgur.com/QsACc.jpg) *这张图片显示电子邮件来自我自己*

[http://i.stack.imgur.com/nghG2.jpg](http://i.stack.imgur.com/nghG2.jpg) *看箭头，这是我看到的每封来自联系人的电子邮件。同名，同名。*

这真的很烦人，因为当很多人使用它时，我无法分辨哪个是哪个。

这是我的联系页面：meome.vn/lien-he 可能有一些我不知道的代码要放入电子邮件模板中。无论如何，如果有人知道如何解决这个问题，请帮助我。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:19:17.290

[从技术上讲，这是发送给发件人的 magento 联系表单电子邮件的更改“发件人”字段的](https://stackoverflow.com/questions/6188855)副本，但我在这里给出了完整而彻底的答案。一个简单的核心破解是那里提供的一个答案。

我决心不破解核心文件，所以我通过制作自定义控制器解决了这个问题。我读了一遍，这似乎很容易......而且市场上没有任何扩展可以提供我设定要实现的目标：1）在发件人上有客户电子邮件和姓名；2) 用于反垃圾邮件的简单人工输入；3) 几个自定义字段，其中 3 个实际上是产品属性。

完成此操作的文件是：

```
$ find -type f
./Cycleworks/Cycleworks_ContactExtended.xml
./Cycleworks/ContactExtended/controllers/IndexController.php
./Cycleworks/ContactExtended/Helper/Data.php
./Cycleworks/ContactExtended/etc/config.xml 
```

* * *

现在对于文件本身... 第一个 XML 文件告诉 Magento 您的自定义覆盖。

```
// copy this to app/etc/modules/
./Cycleworks/Cycleworks_ContactExtended.xml
<?xml version="1.0"?>
<config>
    <modules>
        <Cycleworks_ContactExtended>
            <active>true</active>
            <codePool>local</codePool>
        </Cycleworks_ContactExtended>
    </modules>
</config> 
```

* * *

其余文件进入`app/code/local/`. 下面，我从原始控制器中复制了该`postAction()`功能，然后在顶部添加了我的代码，然后在`->sendTransactional()`

```
./Cycleworks/ContactExtended/controllers/IndexController.php
<?php
require_once 'Mage/Contacts/controllers/IndexController.php';
class Cycleworks_ContactExtended_IndexController extends Mage_Contacts_IndexController
{
    public function postAction()
    {
    $post = $this->getRequest()->getPost();
    if ( $post ) {
        if( stripos( $post["people"],"tires") ===FALSE ){
            Mage::getSingleton('customer/session')->addError("Please correctly answer the question to confirm you are human.<br>\"".$this->getRequest()->getPost("people")."\" is not correct.");
                $this->_redirect('*/*/');
                return;         
        }
        $extras=Array( "bike_year","bike_make","bike_model","bike_model_ext" );
        foreach($extras as $field) {
            if( $post[$field] == "empty" )
                $post[$field]= "----";
        }
        $comment = $post['comment']."\nMage::getStoreConfig(self::XML_PATH_EMAIL_SENDER)=\n'".Mage::getStoreConfig(self::XML_PATH_EMAIL_SENDER)."'";
        $post['comment']= nl2br($comment);

        $translate = Mage::getSingleton('core/translate');
        /* @var $translate Mage_Core_Model_Translate */
        $translate->setTranslateInline(false);
        try {
            ...
            ...
            ...
            $mailTemplate->setDesignConfig(array('area' => 'frontend'))
                ->setReplyTo($post['email'])
                ->sendTransactional(
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_TEMPLATE),
                    array( 'name'=>$post['name'],'email'=> $post['email'] ),        // Mage::getStoreConfig(self::XML_PATH_EMAIL_SENDER), //
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_RECIPIENT),
                    null,
                    array('data' => $postObject)
                );
            ...
            ...
            ...
    }
} 
```

* * *

漂亮的空壳。是的，这些都有开始`<?php`标签但没有结束标签？

```
./Cycleworks/ContactExtended/Helper/Data.php
<?php
class Cycleworks_ContactExtended_Helper_Data extends Mage_Core_Helper_Abstract
{

} 
```

* * *

以及自定义模块中的 XML：

```
./Cycleworks/ContactExtended/etc/config.xml
<?xml version="1.0"?>
<config>
    <modules>
        <Cycleworks_ContactExtended>
            <version>0.0.01</version>
        </Cycleworks_ContactExtended>
    </modules>
    <frontend>
        <routers>
            <contacts>
                <args>
                    <modules>
                        <Cycleworks_ContactExtended before="Mage_Contacts">Cycleworks_ContactExtended</Cycleworks_ContactExtended>
                    </modules>
                </args>
            </contacts>
        </routers>
    </frontend>
    <global>
        <helpers>
            <contactextended>
                <class>Cycleworks_ContactExtended_Helper</class>
            </contactextended>
        </helpers>        
    </global>
</config> 
```

* * *

这就是所有的后端。至于表单本身，我将此代码添加到 form.phtml 的注释块下方和结束`</ul>`标记上方。对于大多数人来说，此文件位于`app/code/design/frontend/default/default/template/contacts`. 因为我有一个购买的 TM 模板，所以我的在`default/a034/template/contacts`

```
<?php
$confirm_people_question="Motorcycles have two of these and rhymes with plires";    // CKCK form anti-spam
?>
<li>
    <label for="people" class="required"><em>*</em><?php echo $confirm_people_question ?></label>
    <div class="input-box">
        <input name="people" id="people" title="Please confirm you are people" value="" class="required-entry input-text" type="text" />
    </div>
</li>
<?php
// from http://www.sharpdotinc.com/mdost/2009/04/06/magento-getting-product-attributes-values-and-labels/
$wanted=Array("make","model","engine_size");    // note that each attribute needs to be searchable
$attributes = Mage::getModel('catalogsearch/advanced')->getAttributes();    // $productAttrs = Mage::getResourceModel('catalog/product_attribute_collection');
$attributeArray=array();
foreach($attributes as $a){
    if(  in_array( $a->getAttributeCode(), $wanted) ){
        foreach($a->getSource()->getAllOptions(false) as $option){
            $attributeArray[$a->getAttributeCode()][$option['value']] = $option['label'];
        }
    }
}

?>
<li>
    <div class="ymm">
    <label for="bike_year">Year</label><br>
        <select id="year" name="bike_year">
            <option value="empty"></option>
            <?  for( $idx=date("Y"); $idx >= 1985; $idx-- ) 
                    echo "                      <option value=\"$idx\">$idx</option>\n";
            ?>
        </select>
    </div>
    <div class="ymm">
    <label for="bike_make">Make</label><br>
        <select id="make" name="bike_make">
            <option value="empty"></option>
            <?  foreach( $attributeArray['make'] as $id => $brand ) 
                    echo "                      <option value=\"$brand\">$brand</option>\n";
            ?>
        </select>
    </div>
    <div class="ymm">
    <label for="bike_model">Model</label><br>
        <select id="model" name="bike_model">
            <option value="empty"></option>
            <?  foreach( $attributeArray['model'] as $id => $model )    
                    echo "                      <option value=\"$model\">$model</option>\n";
            ?>
        </select>
    </div>
    <div class="ymm">
        <label for="bike_model_ext">More</label>
        <div class="input-box">
            <input type="text" size="15" value="" id="model_ext" name="bike_model_ext" class="input-text">
        </div>
    </div>
</li> 
```

* * *

我差点忘了，最后一个解谜的关键是管理区的邮件模板：`System - Transactional Emails`. 找到您的 HTML 联系人模板（或创建一个新模板，不要将其转换为纯文本），这就是我所拥有的：

```
<body style="background:#F6F6F6; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; margin:0; padding:0;">
<div style="background:#F6F6F6; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; margin:0; padding:0;">
<table>
<tr><td>Name</td><td>{{var data.name}}</td></tr>
<tr><td>E-mail</td><td>{{var data.email}}</td></tr>
<tr><td>Telephone</td><td>{{var data.telephone}}</td></tr>
</table>
<P>
<fieldset><legend>Subject: &nbsp; {{var data.subject}}</legend>
{{var data.comment}}
</fieldset>
Bike info: {{var data.bike_year}} {{var data.bike_make}} {{var data.bike_model}} {{var data.bike_model_ext}}
</div>
</body> 
```

* * *

我从没想过我会制作自己的自定义模块，但我按照我在这里和其他地方找到的食谱把它放在一起。当验证码失败时，它也会正确运行。我确实尝试研究如何通过他们自己的联系人向客户提供 CC 选项，但我找不到任何东西。

后来，我尝试制作一个自定义模块，以允许新订单的备用管理员通知电子邮件模板，但我从上面学到的知识还不够。:P 所以我对 Magento 的了解和舒适度可能高于“危险黑客”，但我还有很长的路要走。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:26:11.257

您是否在后端检查了您的电子邮件配置。管理员 -> 系统 -> 配置 -> 存储电子邮件地址和管理员 -> 系统 -> 配置 -> 联系人 -> 电子邮件选项

# matlab - matlab中相位和角度命令的区别

> ID：12811401
> 
> 赞同：3
> 
> 时间：2012-10-10T03:06:17.933
> 
> 标签：matlab

Matlab中的相位和角度命令有什么区别？他们似乎对相同的输入给出不同的结果

参考：

相位的 Matlab 帮助

```
PHASE  Computes the phase of a complex vector

    PHI=phase(G)

    G is a complex-valued row vector and PHI is returned as its
    phase (in radians), with an effort made to keep it continuous
    over the pi-borders. 
```

Matlab的角度帮助

```
ANGLE  Phase angle.
    ANGLE(H) returns the phase angles, in radians, of a matrix with
    complex elements.  

    Class support for input X:
       float: double, single 
```

另外，能否请您简单解释一下 uwrap 命令的具体用途是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T06:30:32.140

最初，ANGLE 命令来自 MATLAB 核心，PHASE 来自系统识别工具箱。

ANGLE 命令总是在 [-pi, pi] 范围内给出结果。

PHASE 命令更复杂。例如，如果输入向量中有两个相邻点的相位接近 pi

```
X=[-1+0.1i -1-0.1i] 
```

phase(X) 命令将为第二个值提供大于 pi 的答案（相位值之间的差异应小于 pi）。

此时，angle(X) 命令将为第二个参数提供接近 -pi 的值（将值包装到范围 [-pi, pi] 中）。例如

```
phase(X(2)) = angle(X(2)) + 2*pi 
```

# html - 在引导 css 中垂直对齐缩略图？

> ID：12811403
> 
> 赞同：3
> 
> 时间：2012-10-10T03:06:26.300
> 
> 标签：html, css, asp.net-mvc, twitter-bootstrap

我认为这应该很简单，但我无法让它工作。在 ASP.NET MVC 中，我有一个这样的项目列表：

```
<div id="FilmListContent" class="row">
    <div class="span12">
        <ul class="thumbnails">
            @foreach (var film in Model.Films)
            {
                <li class="span4">
                    <div class="thumbnail">
                        <a href="@Url.Action("Details", "Films", new { id = film.ID })">
                            <img src="@(String.Format("../../Content/Uploads/{0}.jpg", new object[] { FileUpload.CheckImageExists(Server.MapPath("~/Content/Uploads/"), film.ID) ? "Image_Film_" + film.ID : "NoImage" }))" alt="@film.Title image" />
                            <span>
                                @film.Title (@film.Year, @film.MediaType_Name) </span></a>
                    </div>
                </li>
            }
        </ul>
    </div>
</div> 
```

生成一个每行 3 个项目的漂亮列表，但是当`@film.Title`等内容换行到下一行时，我在下一行得到一个空位置。像这样：

![在此处输入图像描述](../Images/c6095522b219f64bb60e11a2c8eb2f45.png)

我试过 display:`table-cell`等`vertical align text-bottom`，但我无法让它工作。目前我已经删除了缩略图上的所有 CSS。无论大小如何，我都可以使用什么 css 每行获取 3 个项目？还是我需要修正尺寸？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T15:49:54.020

这是由于缩略图的高度不同造成的。clear:left / clear:both 会起作用，但盒子的高度仍然不同（这是一个小细节）。

此外，如果做响应式布局，每三个缩略图后加上一个清除会搞砸。

另一种解决方案是确保缩略图内内容的高度。有很多方法可以做到这一点。在这个例子中：

1）要么有一个溢出：隐藏与文本溢出：省略号和一个可选的标题属性跨度与全文。2）在变体文本上设置一个高度，允许两行（或更多）文本换行（即使这样很可能溢出：隐藏）

基本上，您需要自己管理高度并确保每个框的高度相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:18:53.920

假设您正在使用`float: left`布局项目，您可以`clear: both`在每组三个项目之后插入一个元素，以确保每行完全位于前一行之下。

# c# - Socket Server 无法获取客户端 IP

> ID：12811406
> 
> 赞同：0
> 
> 时间：2012-10-10T03:06:57.120
> 
> 标签：c#, sockets, ip

我有一个套接字服务器来捕获来自客户端的 HTTP 请求。我想获取客户的 IP，所以我使用了这些代码：

```
var sIp = (socket.RemoteEndPoint.ToString().Split(':'))[0];
IPAddress rIp = IPAddress.Parse(sIp);
string clientIp = rIp.ToString(); 
```

但是返回的 Ip 是错误的，并且有一个异常：''rIp' 抛出了一个类型为 'System.Net.Sockets.SocketException' 的异常

有人对此案有解决方案吗？太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:17:31.367

MSDN 在 socket.RemoteEndpoint 上有此信息：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.socket.remoteendpoint.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.remoteendpoint.aspx)

关键部分是“在检索任何信息之前，您必须将此 EndPoint 转换为 IPEndPoint。”

所以代码可以重写为：

```
IPEndPoint remoteIP = (IPEndpoint)socket.RemoteEndPoint();
IPAddress rIp = (IpAddress)remoteIP.Address;
string clientIP = rIp.ToString() 
```

但是不需要 rIp，您可以这样做：

```
IPEndPoint remoteIP = (IPEndpoint)socket.RemoteEndPoint();
string clientIP = remoteIP.Address.ToString(); 
```

# javascript - 使用 Web Cryptography API 验证 JavaScript 中的 Browserid 断言

> ID：12811407
> 
> 赞同：0
> 
> 时间：2012-10-10T03:07:03.300
> 
> 标签：javascript, security, cryptography, webcrypto-api, browserid

[Web Cryptography API](http://www.w3.org/2012/webcrypto/WebCryptoAPI/)中提议的对 Web 浏览器中 JavaScript 运行时环境的添加是否允许我们使用 JavaScript 安全地验证浏览器中的[browserid 断言](https://developer.mozilla.org/en-US/docs/Persona)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:26:32.620

您已经可以在 Javascript 中验证客户端的 BrowserID 断言，但问题是您不能信任客户端。

例如，用户可以通过代理服务器运行您的代码，该代理服务器会更改 Javascript 以始终​​声称断言是有效的。除非您正在执行服务器端验证，否则您的服务器代码将容易受到声称一切正常的客户端的攻击，而实际上断言是虚假的。

没有浏览器 API 会改变这样一个事实：就服务器而言，您不能依赖客户端做正确的事情。服务器需要自己进行验证。

# php - 我可以为 MySql 表值指定字符串吗？

> ID：12811414
> 
> 赞同：1
> 
> 时间：2012-10-10T03:07:46.977
> 
> 标签：php, mysql, phpmyadmin

我有一个 MySql 表，它存储来自州和城市列表的用户州和城市。我专门将每个州编码为两个字母的缩写版本（如华盛顿的 WA 和加利福尼亚的 CA），每个城市都有两个字母的缩写，城市名称的格式如下：科罗拉多州博尔德`CO-boulder`和犹他州盐湖城`UT-salt-lake-city`避免使用相同城市名称的不同州。`UT-salt-lake-city`PHP在列下插入值（ ） `City`，但是当我通过PHP调用变量时，它显示如下：`Your location is: UT-salt-lake-city, Utah.` 为了解决这个问题，我一直在制作这个变量列表

```
 if ($city == "AL-auburn") { $city = "Auburn"; }
    else if ($city == "AL-birmingham") { $city = "Birmingham"; }
    else if ($city == "GA-columbus") { $city = "Columbus"; $state = "Georgia"; }
    else if ($city == "AL-dothan") { $city = "Dothan"; }
    else if ($city == "AL-florence") { $city = "Forence"; }
    else if ($city == "AL-muscle-shoals") { $city = "Muscle Shoals"; }
    else if ($city == "AL-gadsden-anniston") { $city = "Gadsden Anniston"; }
    else if ($city == "AL-huntsville") { $city = "Huntsville"; }
    else if ($city == "AL-decatur") { $city = "Decatur"; }
    else if ($city == "AL-mobile") { $city = "Mobile"; }
    else if ($city == "AL-montgomery") { $city = "Montgomery"; }
    else if ($city == "AL-tuscaloosa") { $city = "Tuscaloosa"; } 
```

有没有办法可以缩短这个过程，或者至少从一个单独的文件中调用它，这样我就不必每次想调用该位置时都复制/粘贴？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:18:39.833

怎么样的东西

```
$name = 'UL-salt-lake-city';
ucwords(str_replace("-"," ",substr($name, 3))); 
```

转换为“盐湖城”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:38:55.217

你在这里需要一个哈希图，你可以在 PHP 中将它作为一个数组来实现：

```
$cities = array(
    "AL-auburn"     => array("Auburn"),
    "AL-birmingham" => array("Birmingham"),
    "GA-columbus"   => array("Columbus", "Georgia"),
    ...
);

if (isset($cities[$city])) {
    list($city, $state) = $cities[$city] + array(null, null);
} 
```

然后您还可以存储城市数组。

* * *

或者，您可以利用现有信息：

```
list($state, $city) = explode('-', $city, 2);

$city = ucwords(strtr($city, '-', ' ')); 
```

然后，您可以再次将带有 hashmap 的状态 2 字母代码映射到它们的长名称：

```
$states = array(
    'AL' => 'Alabama',
    'GA' => 'Georgia',
    ...
);

if (isset($states[$state])) {
    $state = $states[$state];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T03:29:13.617

如果您需要的名称与其代码不直接对应，则可以使用关联数组：

```
$city_names = array(
    'CO-boulder' => 'Boulder, Colorado',
    'GA-columbus' => 'Columbus, Georgia',
    // ...
);
$name = $city_names[$city]; 
```

# regex - 正则表达式删除多行匹配查询

> ID：12811417
> 
> 赞同：0
> 
> 时间：2012-10-10T03:08:10.980
> 
> 标签：regex, notepad++, replace

我有这些行，我需要删除以“/index.html”结尾的行（从“< a”标签开始（前面两行），并保留所有其他行。

例子：

```
<a href="http://site.com/dir/file.html">
/dir/file.html</a>: 
../../../index.html<br>
<a href="http://site.com/dir/file2.html">
/dir/file2.html</a>: 
../../../page.html<br>
<a href="http://site.com/dir/name.html">
/dir/name.html</a>: 
../../../index.html<br>
<a href="http://site.com/dir/any-link_.html">
/dir/any-link_.html</a>: 
../../../file-name.html<br> 
```

输出：

```
<a href="http://site.com/dir/file2.html">
/dir/file2.html</a>: 
../../../page.html<br>
<a href="http://site.com/dir/any-link_.html">
/dir/any-link_.html</a>: 
../../../file-name.html<br> 
```

因此，正则表达式应该删除“/index.html”之前的所有内容，直到 < a（它之前的两行），并将其他行留在后面。

我正在尝试类似：记事本++中的^./index.html，但它只删除具有“/index.html”的行，我不知道如何从它之前的<a开始删除2行.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:36:22.967

```
<a href="http://site\.com([^"]*\.html)">\s*\1</a>:\s*.*index.html<br>\s* 
```

匹配`<a href="http:site.com`字面，后跟路径名，然后是标记的结尾和所有空格（包括新行），直到文件名的重复（`\1`），然后是结束标记、冒号、更多空格（再次，包括换行符），然后是任意数量的字符（换行符除外），然后`index.html<br>`是下一行之前的所有空格（再次包括换行符）

可能会缩短为

```
.*\n.*\n.*index.html<br>\n 
```

但要小心 .* ，它是意想不到的副作用。正则表达式应始终尽可能具体，尤其是在使用它们进行删除时。

# node.js - 如何在 node.js TCP 服务器中处理 CONTROL+C

> ID：12811422
> 
> 赞同：3
> 
> 时间：2012-10-10T03:09:01.433
> 
> 标签：node.js, input, tcp

如何处理`CONTROL+C`node.js TCP 服务器中的输入？

```
var server = net.createServer(function(c) {
    c.on('end', function() {
        console.log('Client disconnected');
    });
    c.on('data', function(data) {
        if (data == "CONTROL+C") { // Here is the check
            c.destroy();
        }
    });
}).listen(8124); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:30:58.587

Control-C 是一个单字节，0x03（使用 ASCII 图表有点帮助）。

但是，无论何时处理套接字连接，您都必须记住，您将以“分块”方式接收数据，并且分块不一定与数据发送的方式相对应；您*不能*假设客户端的一个发送调用对应于服务器端的单个块。因此，您不能假设如果客户端发送 Control-C，它将是您在数据事件中收到的唯一内容。一些其他数据可能在它之前，一些其他数据可能在它之后，所有这些都在同一个事件中。您将不得不在您的数据中寻找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T14:06:10.620

从埃博尔曼的回答。这行得通。

```
c.on('data', function(data) {
    if (data.toString().charCodeAt(0) === 3) {
        c.destroy();
    }
}); 
```

# cocoa-touch - Core-Plot 没有调用 `plotWasSelectedAtRecordIndex` - 修订

> ID：12811423
> 
> 赞同：0
> 
> 时间：2012-10-10T03:09:03.890
> 
> 标签：cocoa-touch, core-plot

我想在我的 iPhone 应用程序中为图表添加触摸功能。但是，我似乎无法`plotWasSelectedAtRecordIndex`注册电话。在经历了一堆其他相关问题和其他地方的教程之后，我似乎无法弄清楚我错过了什么。

我*已经*能够注册`plotSpace`对`shouldHandlePointingDeviceCancelledEvent`.

模拟器上应用程序性能最显着的变化是我可以拖动我的绘图空间，这实际上并不是我想要的。

我尝试将`<CPTScatterPlotDelegate>`和`<CPTPlotSpaceDelegate>`单独和一起添加到我的控制器标题中，并在我的实现中包含这些方法以及为图形、`plotSpace`图形和各种组合设置代表。

我已经查看了 PlotGallery 示例中的 GradientScatterPlot 以及 CPTestApp。

显然，我走错了路。所以，我的问题是：获得回复的关键要素是`plotWasSelectedAtRecordIndex`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:06:28.813

1.  确保委托类（通常是拥有图的视图控制器）实现`<CPTScatterPlotDelegate>`协议。

2.  在散点图委托类中实现以下方法之一：

    ```
    -scatterPlot:plotSymbolWasSelectedAtRecordIndex:
    -scatterPlot:plotSymbolWasSelectedAtRecordIndex:withEvent: 
    ```

3.  将`delegate`散点图的 设置为您的委托对象。

4.  将 设置`plotSymbolMarginForHitDetection`为“合理”的值，通常是绘图符号的大小。

5.  在绘图空间上设置`allowsUserInteraction`为 NO 以禁用滚动和缩放。情节委托仍然有效。

# iphone - 使用 NSURL 下载文件

> ID：12811425
> 
> 赞同：0
> 
> 时间：2012-10-10T03:09:20.197
> 
> 标签：iphone, objective-c, ios, ftp, nsurl

我正在尝试使用以下命令从**ftp**服务器下载文件列表：

```
NSURL *ftpUrl = [NSURL URLWithString:@"ftp://xxx:yyy@mzzz.com"]; 
```

我必须使用**ftp**，所以请不要推荐替代方案。我想知道如何从根目录获取文件列表并在文件夹内导航（**ftp**服务器）。

PS：我认为完成如此简单的任务不需要外部库，但如果必须，任何建议都将不胜感激。

谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:32:15.207

我使用[Blackracoon](https://github.com/lloydsargent/BlackRaccoon)取得了很好的成功。它是您可以添加到项目中的一小组类，它们使 FTP 访问变得容易。您可以列出文件、上传和下载文件、创建目录等。

# c++ - std::async 似乎没有使用 std::launch::async 产生线程

> ID：12811426
> 
> 赞同：1
> 
> 时间：2012-10-10T03:09:30.697
> 
> 标签：c++, multithreading, stdasync

我正在编写一个 DCPU-16 仿真器，并且通过在单独的线程中启动一个调用函数 getRealTimeCPUClock() 的线程来计算 CPU 的实时时钟速度。问题是未来对象的“有效”属性似乎是真的，即使它没有返回值。因此，当调用 futureObj.get() 时，它会等待 getRealTimeCPUClock() 返回。

使用异步启动策略（与延迟相反）是否应该将函数启动到后台，然后在返回时将有效属性设置为 true？

这是错误的用法吗？

```
int getRealTimeCPUClock() {
    int cyclesBeforeTimer = totalCycles;
    sleep(1);

    return totalCycles - cyclesBeforeTimer;
}

void startExecutionOfProgram(char *programFileName)
{
    size_t lengthOfProgramInWords = loadProgramIntoRAM(programFileName);
    auto futureRealTimeClockSpeed = std::async(std::launch::async, getRealTimeCPUClock);

    while(programCounter < lengthOfProgramInWords) {

        if(futureRealTimeClockSpeed.valid()) {
            realTimeClockSpeed = futureRealTimeClockSpeed.get();
            futureRealTimeClockSpeed = std::async(std::launch::async, getRealTimeCPUClock);
        }
        step(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:16:41.420

`valid()`不是您认为的那样（尽管[cppreference](http://en.cppreference.com/w/cpp/thread/future)中的条目另有说明）。

这是标准所说的`valid()`：

> (§ 30.6.6/18) bool valid() const noexcept;
> 
> 返回：仅当 *this 指的是共享状态时才为真。

只要对象与有效的共享状态相关联，返回的值`valid()`就会一直存在，通常是在使用启动它之后和检索结果之前（使用）。当您使用该方法创建. 这些都与您尝试做的事情无关，即检查结果是否可用。`true``future``std::async``get()``future``share()``shared_future`

判断a的结果是否`future`准备好，我建议使用`wait_for()`延迟为0的函数：

```
if (futureRealTimeClockSpeed.wait_for(std::chrono::seconds(0))
          == std::future_status::ready)
   /*...*/ 
```

# c# - 在表单标记中设置操作会生成错误“视图状态 MAC 验证失败...”

> ID：12811431
> 
> 赞同：1
> 
> 时间：2012-10-10T03:10:21.040
> 
> 标签：c#, asp.net, .net

我`action`在`form`标签中设置并收到以下错误：

*视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。*

我尝试了以下事情：

1.  在 web.config 中设置机器配置键。
2.  在页面中设置 EnableViewStateMac="false"
3.  设置 ViewStateEncryptionMode="从不"
4.  设置 EnableEventValidation="false"

但没有运气。

请提供任何指导。

感谢您的帮助和分享。

**编辑：**

这是我的页面的标记。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default"
EnableViewStateMac="false" ViewStateEncryptionMode="Never" EnableEventValidation="false" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="aspnetForm" method="post" action="Test.aspx" runat="server">
    <div>
        <asp:TextBox runat="server" ID="txt1"></asp:TextBox><br />
        <asp:TextBox runat="server" ID="txt2"></asp:TextBox><br />
        <asp:Button runat="server" ID="btn" Text="Click" />
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:27:05.153

如果更改按钮的表单标签和标记，则可以完成跨页发布。

脚步：

*   从表单中删除“操作”
*   将“PostbackUrl”添加到按钮

==================================================== =======

MSDN：**ASP.NET 中的跨页发布**

概述： http: [//msdn.microsoft.com/en-us/library/ms178139 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178139(v=vs.100).aspx)

操作方法：http: [//msdn.microsoft.com/en-us/library/ms178140 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178140(v=vs.100).aspx)

==================================================== =======

```
<form id="aspnetForm" method="post" runat="server">
<div>
    <asp:TextBox runat="server" ID="txt1"></asp:TextBox><br />
    <asp:TextBox runat="server" ID="txt2"></asp:TextBox><br />
    <asp:Button runat="server" ID="btn" Text="Click" PostBackUrl="~/Test.aspx" />
</div>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:27:34.433

我建议您覆盖页面的渲染事件，将加密视图状态和事件验证的隐藏字段放置在表单顶部。这将确保在任何可以提交表单的内容之前写出这些内容。

```
protected override void Render(System.Web.UI.HtmlTextWriter writer)
{
  System.IO.StringWriter stringWriter = 
      new System.IO.StringWriter();
  HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter);
  base.Render(htmlWriter);
  string html = stringWriter.ToString();
  string[] aspnet_formelems = new string[5];
  aspnet_formelems[0] = "__EVENTTARGET";
  aspnet_formelems[1] = "__EVENTARGUMENT";
  aspnet_formelems[2] = "__VIEWSTATE";
  aspnet_formelems[3] = "__EVENTVALIDATION";
  aspnet_formelems[4] = "__VIEWSTATEENCRYPTED";
  foreach (string elem in aspnet_formelems)
  {
    //Response.Write("input type=""hidden"" name=""" & abc.ToString & """")
    int StartPoint = html.IndexOf("<input type=\"hidden\" name=\"" + 
      elem.ToString() + "\"");
    if (StartPoint >= 0)
    {
      //does __VIEWSTATE exist?
      int EndPoint = html.IndexOf("/>", StartPoint) + 2;
      string ViewStateInput = html.Substring(StartPoint, 
        EndPoint - StartPoint);
      html = html.Remove(StartPoint, EndPoint - StartPoint);
      int FormStart = html.IndexOf("<form");
      int EndForm = html.IndexOf(">", FormStart) + 1;
      if (EndForm >= 0)
        html = html.Insert(EndForm, ViewStateInput);
    }
  }

  writer.Write(html);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T03:38:39.147

在“Test.Aspx”中添加以下标签，然后重试

EnableViewStateMac="false" ViewStateEncryptionMode="Never" EnableEventValidation="false"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T03:39:25.807

当作为 POST 请求的一部分发送的 ViewState 与控件集合不匹配时，您会收到此错误。

收到您请求的页面是`Test.aspx`

开始 `EnableViewStateMac="false"`，`Test.aspx`你的问题应该得到解决。

# php - 处理 php 中 $_FILES 数组中的 trigger.io 文件上传键

> ID：12811439
> 
> 赞同：1
> 
> 时间：2012-10-10T03:11:05.340
> 
> 标签：php, file-upload, trigger.io

我正在尝试将图片从 trigger.io 上传到我的网络应用程序。一切都很好，但是根据源的不同，$_FILES 数组中文件的键是不同的。在 Android 上从图库中选择时，它似乎是 $_FILES[0]，在 iOS 上拍摄新照片时，它似乎是 $_FILES[file_name_ext]（用 _ 替换 . 作为文件扩展名）...

有没有办法设置密钥是什么，或者我是否需要向服务器端添加逻辑来查找$_FILES 数组中的*任何内容？*

谢谢

PS-在PhoneGap上，您传递了一个名为“fileKey”的参数...我正在Trigger.io中寻找等效参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:17:59.107

您可以在文件对象上设置“名称”属性，我们将在 POST 正文中使用它，例如

```
forge.file.getImage({width: 200, source: "gallery"}, function (file) {
    file.name = "my_file_name";
    forge.request.ajax({
        url: "http://httpbin.org/post",
        files: [file],
        success: function (resp) {
            forge.logging.info(resp);
        }
    });
}); 
```

请参阅[http://docs.trigger.io/en/v1.4/modules/request.html#ajax](http://docs.trigger.io/en/v1.4/modules/request.html#ajax)。

# ruby-on-rails - 检查字符串是否为浮点数，消除 0.0

> ID：12811444
> 
> 赞同：0
> 
> 时间：2012-10-10T03:12:27.470
> 
> 标签：ruby-on-rails

我有一个使用谷歌地图地理编码器自动获取纬度和经度的应用程序。我想为它编写一个自定义验证以与其他字段验证相结合。下面是我的代码：

```
# lib/ext/string.rb
class String
  def valid_float?
    # The double negation turns this into an actual boolean true - if you're 
    # okay with "truthy" values (like 0.0), you can remove it.
    !!Float(self) rescue false
  end
end

# config/application.rb
require 'ext/string'

# post.rb
validate :check_point

def check_point
  if !(lat || lng).valid_float?
    ...
  end
end 
```

在我的`Post`表单中，我使用 firebug 输入`asdf`字段`:lat`，它返回了`valid_float?`找不到方法的错误。

然后我尝试一些调试：

`abort(lat.to_s.valid_float?) # 0.0 true`

似乎除了在`:lat`字段中输入的数字之外的任何字符都会变成`0.0`当我输入的`to_s`时候。但这`to_s`是获得`valid_float?`工作的唯一方法。为什么`to_s`将所有文本转换为`0.0`?

我也做`rails c`了测试：

```
"1.234234".valid_float? # true
"asdf".valid_float? # false
"0.0".valid_float? # true 
```

我必须怎么做才能让它工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:42:05.657

```
def check_point
  if !(lat || lng).valid_float?
    ...
  end
end 
```

这不像你想象的那样工作。首先计算括号之间的表达式，然后`valid_float?`在结果上调用。在 ruby​​ 中，如果 lat 不为 nil，则 lat 的结果`lat || lng`将是 lat，如果 lat 为 nil，则为 lng，因此您正在评估 lat 或 lng 中的一个是否可以转换为浮点数。

我会把它写成

```
def check_point
  if !lat.valid_float? || !lng.valid_float?
    ...
  end
end 
```

我认为它比逻辑上等价的 !(a && b) 形式更能揭示意图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:29:22.633

如果 Post.lat 和 Post.long 字段具有浮点类型，当您从表单输入中分配字符串值时，Rails 会将它们转换为 Float。
这些是您可以进行的一些更改：
- 在分配值之前验证控制器中的表单输入；
- 将数据类型更改为 String 并提供获取 Float 值的方法；
- 更改 lat= 和 lng= 方法来验证输入

# android - 我想使用 SimpleXML 在 Android 中导出/导入 SQLite 数据库

> ID：12811450
> 
> 赞同：1
> 
> 时间：2012-10-10T03:13:07.737
> 
> 标签：android, xml, sqlite, simple-framework

所以我的应用程序使用内容提供程序和 SQLite 数据库，类似于 Google 记事本示例。我找到了 SimpleXML，并想用它来导入/导出数据库，以便它可以在设备之间传输。我发现的唯一例子就是这个[例子。](http://robertmassaioli.wordpress.com/2011/04/21/simple-xml-in-android-1-5-and-up/) 我希望不必编写一些中间类来传入/传出数据库。有没有人找到一种简单的方法，甚至可以在没有 simplexml 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:31:24.910

您需要导入/导出整个数据库还是仅部分数据库。对于应传输完整数据库的情况，您可能只需复制通常存储在 /data/data/YOUR_APP/databases 中的数据库文件本身

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:33:25.690

```
public class DataXmlExporter extends DataBaseDemoActivity {

   static final String DATASUBDIRECTORY = "bookwormdata";

  // private final SQLiteDatabase db;
   private XmlBuilder xmlBuilder;
   Button butt;

  /* public DataXmlExporter(final SQLiteDatabase db) {
      this.db = db;

   }*/

   public void onCreate(Bundle savedInstanceState)  {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main7);

  butt=(Button)findViewById(R.id.exportxml);
  String exportFileNamePrefix=exportxml;
    // public void export(final String dbName, final String exportFileNamePrefix) throws IOException {
      Log.i(Constants._COUNT, "exporting database - " + dbname + " exportFileNamePrefix=" + exportFileNamePrefix);

      try {
        xmlBuilder = new XmlBuilder();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      xmlBuilder.start(dbname);

      // get the tables
      String sql = "select * from dept";
      Cursor c = db.rawQuery(sql, new String[0]);

      if (c.moveToFirst()) {

          //while (c.moveToNext()) {
            String tableName ="dept";//c.getString(c.getColumnIndex("dep_id"));

            // skip metadata, sequence, and uidx (unique indexes)
            if (!tableName.equals("android_metadata") && !tableName.equals("sqlite_sequence")
                     && !tableName.startsWith("uidx")) {
               try {
                exportTable(tableName);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            }
         // }
        }
      String xmlString = null;
    try {
        xmlString = xmlBuilder.end();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      try {
        writeToFile(xmlString, exportFileNamePrefix + ".xml");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      Log.i(Constants._COUNT, "exporting database complete");
      Toast.makeText(DataXmlExporter.this, "DB xml backup Successfully", 2000).show();

      butt.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(DataXmlExporter.this, DataBaseDemoActivity.class);
                startActivity(intent);
                        }
        });
   }

   private void exportTable(final String tableName) throws IOException {
      xmlBuilder.openTable(tableName);
      String sql = "select * from " + tableName;
      Cursor c = db.rawQuery(sql, new String[0]);
      if (c.moveToFirst()) {
         int cols = c.getColumnCount();
         do {
            xmlBuilder.openRow();
            for (int i = 0; i < cols; i++) {
                /*if(i==6)
                {
                    //String id = c.getString( c.getColumnIndex("photo"));
                    String str = new String(image);
                    xmlBuilder.addColumn(c.getColumnName(i), str);
                }*/
               xmlBuilder.addColumn(c.getColumnName(i), c.getString(i));
            }
            xmlBuilder.closeRow();
         } while (c.moveToNext());
      }
      c.close();
      xmlBuilder.closeTable();
   }

   private void writeToFile(final String xmlString, final String exportFileName) throws IOException {
      File dir = new File(Environment.getExternalStorageDirectory(), DataXmlExporter.DATASUBDIRECTORY);
      if (!dir.exists()) {
         dir.mkdirs();
      }
      File file = new File(dir, exportFileName);
      file.createNewFile();

      ByteBuffer buff = ByteBuffer.wrap(xmlString.getBytes());
      FileChannel channel = new FileOutputStream(file).getChannel();
      try {
         channel.write(buff);
      } finally {
         if (channel != null) {
            channel.close();
         }
      }
   }

   /**
    * XmlBuilder is used to write XML tags (open and close, and a few attributes)
    * to a StringBuilder. Here we have nothing to do with IO or SQL, just a fancy StringBuilder. 
    * 
    * @author ccollins
    *
    */
   static class XmlBuilder {
      private static final String OPEN_XML_STANZA = "<?xml version=\"1.0\" encoding=\"utf-8\"?>";
      private static final String CLOSE_WITH_TICK = "'>";
      private static final String DB_OPEN = "<database name='";
      private static final String DB_CLOSE = "</database>";
      private static final String TABLE_OPEN = "<table name='";
      private static final String TABLE_CLOSE = "</table>";
      private static final String ROW_OPEN = "<row>";
      private static final String ROW_CLOSE = "</row>";
      private static final String COL_OPEN = "<col name='";
      private static final String COL_CLOSE = "</col>";

      private final StringBuilder sb;

      public XmlBuilder() throws IOException {
         sb = new StringBuilder();
      }

      void start(final String dbName) {
         sb.append(XmlBuilder.OPEN_XML_STANZA);
         sb.append(XmlBuilder.DB_OPEN + dbName + XmlBuilder.CLOSE_WITH_TICK);
      }

      String end() throws IOException {
         sb.append(XmlBuilder.DB_CLOSE);
         return sb.toString();
      }

      void openTable(final String tableName) {
         sb.append(XmlBuilder.TABLE_OPEN + tableName + XmlBuilder.CLOSE_WITH_TICK);
      }

      void closeTable() {
         sb.append(XmlBuilder.TABLE_CLOSE);
      }

      void openRow() {
         sb.append(XmlBuilder.ROW_OPEN);
      }

      void closeRow() {
         sb.append(XmlBuilder.ROW_CLOSE);
      }

      void addColumn(final String name, final String val) throws IOException {
         sb.append(XmlBuilder.COL_OPEN + name + XmlBuilder.CLOSE_WITH_TICK + val + XmlBuilder.COL_CLOSE);
      }
   }

} 
```

尝试这个。这对我有用。

# ruby-on-rails - 在表单中选择第三个下拉菜单时自动重定向？

> ID：12811453
> 
> 赞同：-1
> 
> 时间：2012-10-10T03:13:18.283
> 
> 标签：ruby-on-rails, ruby, drop-down-menu, twitter-bootstrap, typeahead

我有 3 个预先输入字段：

它们如下：

国家： | ***_* __ *_* __ *_* ____** |

状态：| ***_* __ *_* __ *_* ____** |

城市： | ***_* __ *_* __ *_* ____** |

这是第二个 typeahead 字段的代码（其余类似）：

```
<input type="text" class="span3" style="margin: 0 auto;"
data-provide="typeahead"  data-items="4"
data-source="["Alabama","Alaska",
               <many more US states>
              ,"Wyoming"]"> 
```

现在......我需要两个预先输入的字段看起来像下拉菜单，可以按照这里的说明来实现......没问题。

*   [https://github.com/danielfarrell/bootstrap-combobox](https://github.com/danielfarrell/bootstrap-combobox)
*   [http://dl.dropbox.com/u/21368/bootstrap-combobox/index.html](http://dl.dropbox.com/u/21368/bootstrap-combobox/index.html)

我要问的问题与下面的“最后一个选项”有关：注意：我在 Rails 中构建它，所以 ruby​​ 代码会很好......

**占位符案例：**

我需要每个下拉列表都有一个默认的占位符文本，它是灰色的。

例如：

国家： | **_*美国*__ *_* __ *_* _** |

状态：| **_*爱荷华州*__ *_* __ *_*** |

城市： | **_*得梅因*____** |

**缺失值案例：**

如果用户键入自动完成中不存在的 City 值，我想向他们显示一个带有链接的下拉列表..

例如：用户在城市字段中输入“yahoo”。这应该会导致输出“那个城市不存在，点击这里搜索它”

点击上面的文字应该会将我重定向到 Google.com

**错误案例：**

如果在第一个字段（国家）中未选择任何内容。第二个字段应在下拉列表中具有默认值：“请选择一个国家开始”

**最后一个选项：**

成功选择城市后，例如：旧金山...我想重定向到一个新的 html 文件，例如“mysite.com/datastore/calsan.html”（每个选择的前三个字母以小写字母附加在一起）

这个最终的 html 文件将预先生成，并将包含有关“旧金山”城市的相关统计数据和有趣的事实……我还将在数据存储文件夹中预先生成其他城市的有趣事实。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T06:52:14.400

请参阅下面的我的片段

**占位符案例**

```
<script type="text/javascript">
  $(document).ready(function(){
    $('.combobox').combobox({placeholder: "Type Something.."});
  });
</script> 
```

**最后一个选项**

```
<script type="text/javascript">
    $('.combobox').change(function(){
      if($(this).val().length > 0){
        var fileName = $(this).val().substr(0,3); // this is for getting the first 3 characters, apply the same logic wherever necessary
        window.location("/datastrore/" + fileName + ".html");
      }   
    })
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T09:38:41.417

**最后一个选项**

似乎有一种简单的方法可以使用内联 javascript 和选项值来做到这一点。我想我会使用这种更简单的方式..

[http://webdesign.about.com/od/javascript/f/blfaqddredirect.htm](http://webdesign.about.com/od/javascript/f/blfaqddredirect.htm)

**占位符案例和所有其他案例**

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

上面的库解决了我所有的问题，非常强大！它不适用于引导程序，但我不介意引导程序具有可比较的选项。

# opencv - 使用 OpenCV 进行网格检测

> ID：12811455
> 
> 赞同：1
> 
> 时间：2012-10-10T03:14:07.227
> 
> 标签：opencv, opencvsharp

OpenCV 或任何其他图像处理工具中是否存在可用于在棋盘视频流上进行网格视图的现有功能？我最终想要跟踪每个棋块，看看玩家做了什么。我似乎无法在谷歌上找到确切的链接，但我已经看到它发生了，所以它是可能的。感谢回复。

# javascript - 在表单中输入数字时出现按钮

> ID：12811456
> 
> 赞同：2
> 
> 时间：2012-10-10T03:14:07.667
> 
> 标签：javascript, html, css

从这个主题：[如何使不可见的文本输入框在悬停时可见？](https://stackoverflow.com/questions/11869805/)

我读了这个问题，它对我有很大帮助，我得到了这段代码：

HTML：

```
<div id="box1">
    <form action="">
    <input type="string" name="amount" />
    </form>
</div> 
```

CSS：

```
#box1 {
    width:100px;
    height:30px;
}

#box1:hover input {
    display:block;
    padding:3px;
}

#input {
    display:none;
} 
```

我的问题是，一旦我输入金额，我希望显示确认按钮。这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T03:29:08.640

这应该完成你所追求的：

```
<!-- In the head of your document: -->
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#submit').hide();
        $('#amount').keyup(function() {
            if ($(this).val() == '') {
                $('#submit').hide();
            }
            else {
                $('#submit').show();
            }
        });
    });
</script>

<!-- For your form in the body: -->
<div id="box1">
    <form action="">
        <input type="string" name="amount" id="amount" />
        <input type="submit" name="submit" id="submit" />
    </form>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:49:56.740

根据您的问题，我猜您希望在文本框中按下一个键后立即显示确认按钮。JQuery 是一个非常有用的处理浏览器事件的库，您应该考虑使用它。

html:

```
<div id="box1">
   <input type="text"  id="txtAmount" />
   <input type="button" id="btnConfirm"  value="Confirm"/>
</div>

​ 
```

javascript/jquery：

```
//self invoking javascript function
$(function() {

    //hide the button on page load
    $('#btnConfirm').hide();

    //listen for a keypress event
    $('#txtAmount').on('keypress', function() {
        $('#btnConfirm').show();
    });
});​ 
```

如果您想尝试一下，这里是 jsfiddle [http://jsfiddle.net/49Dhc/5/](http://jsfiddle.net/49Dhc/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T03:27:28.303

实际制作“确认”按钮。

```
<div id="box1">
     <form action="">
         <input type="string" name="amount" />
         <input type="submit" value="confirm" id="submit" style="display:none"/>
     </form>
</div> 
```

每当名称为“amount”的元素发生更改或按下键（退格键为onchange）时，如果值不是“”或什么都没有，那么它将使用内联css显示提交按钮。

```
<script>
amount.onchange=amount.onkeyup=function(){
   document.getElementById("submit").style.display=this.value==""?"none":"block";
}
</script> 
```

# media - 媒体查询从更高分辨率的样式表加载样式 - 为什么？

> ID：12811458
> 
> 赞同：1
> 
> 时间：2012-10-10T03:14:47.913
> 
> 标签：media, responsive-design

请有人指出我正确的方向！我无法让查询按预期工作。

所以，我有例如：

```
<link rel="stylesheet" href="/480.css" type="text/css" media="screen and (max-width:480px)" />
<link rel="stylesheet" href="/768.css" type="text/css" media="screen and (max-width:768px)" />
<link rel="stylesheet" href="/960.css" type="text/css" media="screen and (min-width:960px)" /> 
```

在 480 样式表中：

```
#box{width:100px;height:100px;} 
```

在 960 样式表中：

```
#box{width:200px;height:200px;} 
```

当我将浏览器的大小调整为 480 像素或更少时，960 样式将覆盖 480 样式。我已经尝试在一个样式表中加载所有查询，并且我尝试使用单独的样式表来实现不同的分辨率，但仍然无法正常工作。在 Chrome 或 FF Aurora 中对其进行测试时，没有区别。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:38:40.457

非常适合我： http: [//felixebert.de/so-12811458/](http://felixebert.de/so-12811458/)

*   css文件的路径是否正确？
*   HTML Doctype 是否正确 ( `<!DOCTYPE html>`)？
*   您是否将 id-reference 与 class-reference 混合在一起？(#box = `<div id="box" />`, .box = `<div class="box" />`)
*   768.css 中有什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:22:20.290

尝试这个：

```
<style>
@media screen and (max-device-width: 480px),
screen and (max-width: 960px) {
#box{width:100px;height:100px;outline:1px solid red;}
}
/* Still small! (but scaling up) */
@media screen and (min-width: 960px) {
#box{width:200px;height:200px;outline:1px solid red;}
}
</style> 
```

[http://jsfiddle.net/sthAngels/EecJD/](http://jsfiddle.net/sthAngels/EecJD/)

# android - 在android上使用viewpager ONLOAD加载声音

> ID：12811462
> 
> 赞同：2
> 
> 时间：2012-10-10T03:15:22.840
> 
> 标签：android, audio, android-viewpager

所以基本上，当第一个视图加载到我的 viewpager 中时，我想要一个开始的声音效果。我可以使用 setOnPageChangeListener 获取其他页面的声音。

所以我再次问，我如何在加载时将声音放入我的 viewpager 中？

我当前的浏览器代码是这样的

```
mAdapter = new MyPagerAdapter(getSupportFragmentManager());
mViewPager = (ViewPager) findViewById(R.id.pager);
mViewPager.setAdapter(mAdapter);
mViewPager.setOnPageChangeListener(new OnPageChangeListener(){

        @Override
        public void onPageSelected(int position) {
            mSoundManager.playSound(position + 1);
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {

        }

        @Override
        public void onPageScrollStateChanged(int arg0) {

        }
    }); 
```

编辑：解决

我找到了一个解决方案，我不知道它是目前最好的还是正确的解决方案，但这就是我所做的。

我使用 SoundPool 作为我的音效，所以我简单地使用了

```
mSoundManager.mSoundPool.setOnLoadCompleteListener(new OnLoadCompleteListener(){
        @Override
        public void onLoadComplete(SoundPool arg0, int arg1, int arg2) {

            if(!firstSound){
                mSoundManager.playSound(1);
                System.out.println("FLASHCARD onLoadSound");
                firstSound=true;
            }
        }
    }); 
```

我有一个布尔 firstSound 的原因是产生的声音被发射了 3 次，所以我所做的是，如果发出声音，我将 firstSound 标记为真。

# c++ - 先前关闭的文件句柄上 fclose() 的双重释放错误

> ID：12811464
> 
> 赞同：0
> 
> 时间：2012-10-10T03:15:41.453
> 
> 标签：c++, file-io, null

我有一个包含`fHandle`指向打开文件的文件句柄的类。现在，它可以被多个例程中的任何一个关闭，并且基于程序的动态运行。

为确保文件确实已关闭，我将简单的代码段放入我的析构函数中：`if(fHandle!=NULL) fclose(fHandle);`. 事实证明，如果其中一个例程之前关闭了这个文件，那么运行析构函数片段会导致双重释放操作，我会收到`**glib detected**`错误消息。

如何确保不关闭先前已关闭的文件句柄（除了放置`NULL`检查）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:27:21.450

fclose 不会将 fhandle 设置为 NULL。因此，如果您将 fhandle 显式设置为 NULL，则在调用 fclose 后，它应该可以解决您的问题。

您的代码应如下所示：

```
if(NULL != fhandle)
{
   fclose(fhandle);
   fhandle = NULL;
} 
```

注意：如果您的调用 close 的函数是从多个线程调用的，则此解决方案将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:27:33.373

你说你试过：

```
if(fHandle!=NULL) fclose(fHandle); 
```

为避免出现 double `fclose()`，只需将其设置`fHandle`为`NULL`您可以`fclose`在该句柄上调用的任何其他位置，因此析构函数中的上述代码不会通过条件测试......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T03:23:12.280

这具体是 C 还是 C++。后一个问题的一个简单解决方法是使用单独的标志来检查文件是否关闭？像这样的东西

```
void CloseFile(){
  if(flag ==0){
    fclose(fHandle);
      flag =1;
  }
} 
```

如果这是针对 c++ 的，您可以将文件句柄封装在一个类中，并使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)通过在类的析构函数中添加该调用来自动调用一次关闭。如果您想这样做，您也可以（不推荐）不做 RAII 并且仅将标志封装在同一个类中，然后`close`手动调用。

# php - 使用 simplexml 解析特殊字符 xml 文件

> ID：12811475
> 
> 赞同：3
> 
> 时间：2012-10-10T03:18:24.983
> 
> 标签：php, xml, parsing, simplexml, special-characters

抱歉，如果有一个明显的答案（我知道大约有 1000 个类似的问题） - 但我花了两天时间试图攻击这个但没有成功。我似乎无法破解为什么我得到一个空响应......

简短的背景：以下工作正常

```
$xurl= new SimpleXMLElement('https://gptxsw.appspot.com/view/submissionList?formId=GP_v7&numEntries=1', NULL,    TRUE);
$keyname = $xurl->idList->id[0];
echo $keyname; 
```

这提供了一个响应：像 uuid:d0721391-6953-4d0b-b981-26e38f05d2e5 这样的唯一键

但是我尝试了一个类似的请求（最终将基于第一个请求）并失败了。我已将代码简化如下...

```
$xdurl= new SimpleXMLElement('https://gptxsw.appspot.com/view/downloadSubmission?formId=GP_v7[@version=null%20and%20@uiVersion=null]/GP_v7[@key=uuid:d0721391-6953-4d0b-b981-26e38f05d2e5]', NULL, TRUE);
$keyname2 = $xdurl->data->GP_v7->SDD_ID_N[0];
echo $keyname2; 
```

这提供了空值。如果我尝试类似 echo $xdurl->asXML(); 我从网站（不是来自 PHP）收到错误响应。

我是否需要从 SimpleXMLElement 中弹出第二个请求？我已经阅读了有关使用 XPath 和定义命名空间的信息，但我不确定是否需要其中任何一个：第二个文件确实有两个命名空间，但其中一个未使用，另一个没有元素前缀。另外，我已经尝试了这些变体 - 足以认为我的问题/错误本质上更具全球性（或由于缺乏经验而导致疏忽）。

出于此请求的目的，我无法控制任一 XML 文件的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:55:52.437

我们开始吧：*SimpleXMLElement*似乎重新转义（或以某种方式错误地处理）已经 url 转义的字符，如空格。尝试：

```
$xdurl= new SimpleXMLElement('https://gptxsw.appspot.com/view/downloadSubmission?formId=GP_v7[@version=null and @uiVersion=null]/GP_v7[@key=uuid:d0721391-6953-4d0b-b981-26e38f05d2e5]', NULL, TRUE);
$keyname2 = $xdurl->data->GP_v7->SDD_ID_N[0];
echo $keyname2; 
```

你应该没事。

（仅供参考：我通过手动创建名为“foo.xml”的 XML 请求结果的本地副本进行了调试，该副本运行良好。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:38:57.273

感谢@Matze 让我走上正轨。问题是 URL 具有 SimpleXMLElement 在没有帮助的情况下无法解析的特殊字符。

解决方案：添加 urlencode() 命令，如下所示

```
$fixurl = urlencode('https://gptxsw.appspot.com/view/downloadSubmission?formId=GP_v7[@version=null and     @uiVersion=null]/GP_v7[@key=uuid:d0721391-6953-4d0b-b981-26e38f05d2e5]');
$xdurl= new SimpleXMLElement($fixurl, NULL, TRUE);
$keyname2 = $xdurl->data->GP_v7->SDD_ID_N[0];
echo $keyname2; 
```

这提供了答案（在本例中为 958）

# linux - imageMagick 在 Linux 中从文件夹转换为另一个命令？

> ID：12811477
> 
> 赞同：4
> 
> 时间：2012-10-10T03:18:28.703
> 
> 标签：linux, imagemagick

我在同一级别的目录文件夹 1 和文件夹 2 下有两个文件夹，现在我尝试将文件夹 1 中的所有图像转换为文件夹 2 并具有相同的文件名。这是我现在拥有的：

```
 for f in folder1/*.jpg
 do 
       convert $f  -resize 80%X80% +profile "*" -quality 85 folder2/$f
 done 
```

它从它尝试转换的每个文件中抛出以下消息：转换：无法打开图像`folder1/folder2/st-3474827-1.jpg'：没有这样的文件或目录@ blob.c/OpenBlob/2440。

我知道它的目录问题，但谷歌两天已经不知道如何解决它。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T04:30:59.517

有两种方法可以处理它。

1.  使用`mogrify`：

    ```
    mogrify -path folder2 -thumbnail 50x50 folder1/*.jpg 
    ```

2.  使用`basename`：

    ```
    for filename in folder1/*.jpg; do
        basename="$(basename "$filename" .jpg)"
        convert "folder1/$basename.jpg" -thumbnail 50x50 "folder2/$basename.jpg"
    done 
    ```

前一个选项可能更好，但后者可能更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:10:17.123

我发布了几个错误的答案。抱歉，我只是假设 mogrify 或 convert 在输出到不同路径时表现良好。不应该假设。我不知道 Imagemagick 是否可以输出到不同的目录。您可能只需要将输出（此处没有建议）移动到新目录。我试过这个（我试图尽可能简单，没有任何循环......

```
convert -resize 500x500 * ../test2/ #output was 2 files named -0 -1 in the new dir
mogrify -resize 200x150 ~/Pictures/rome/test/*.jpg -path  ~/Pictures/rome/test2/ # gotta *.jpg in new dir YAY!
mogrify -resize 200x150 -path ~/Pictures/rome/test2/*.jpg ~/Pictures/rome/test/*.jpg # blob error 
```

手册页没有提到输出到新目录，我搜索了一下。ImageMagick 的异常代码在[这里](http://www.imagemagick.org/script/exception.php)祝你好运，对错误的凿孔感到抱歉。如果我发现任何新内容，我会进行编辑。

# entity-framework - 具有多对多关系的 ASP.net MVC4 多选列表框

> ID：12811479
> 
> 赞同：4
> 
> 时间：2012-10-10T03:18:39.363
> 
> 标签：entity-framework, data-binding, razor, asp.net-mvc-4

我是 ASP.net、MVC4 和 EF 的新手，在从相对简单的样本到更复杂的东西（只是稍微）的飞跃方面遇到了麻烦。我已经为这里的问题简化了我的模型，因此请考虑以下内容。如果我有一些不正确的术语，请原谅我。

我有一个 Employee 对象和一个 Division 对象。一个员工可以属于多个部门，一个部门可以有多个员工。

```
public class Employee
{
    public int EmployeeId { get; set; }
    public String FirstName { get; set; }
    public String LastName { get; set; }

    public virtual ICollection<Division> Divisions { get; set; }
}

public class Division
{
    public int DivisionId { get; set; }
    public String DivisionName { get; set; }

    public virtual ICollection<Employee> Employees { get; set; }
} 
```

我通过以下方式将这些映射到上下文文件中：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        modelBuilder.Entity<Employee>()
                .HasMany(e => e.Divisions)
                .WithMany(d => d.Employees)
                .Map(m =>
                {
                    m.ToTable("EmployeesDivisionsId");
                    m.MapLeftKey("EmployeeId");
                    m.MapRightKey("DivisionId");
                });      
    } 
```

对于我的视图控制器，我有以下内容。我已经为多对一关系使用了 ViewBag（多么好的名字）并且它们运行良好，所以我正在尝试修改它以与这里的多对多一起使用：

```
 public ActionResult Index()
    {
        return View(db.Employees).ToList());
    }

    //
    // GET: /Employees/Details/5

    public ActionResult Details(int id = 0)
    {
        Employee employee = db.Employees.Find(id);
        if (employee == null)
        {
            return HttpNotFound();
        }
        return View(employee);
    }

    //
    // GET: /Employees/Create

    public ActionResult Create()
    {
        ViewBag.Divisions = new MultiSelectList(db.Divisions, "DivisionId", "DivisionName");

        return View();
    }

    //
    // POST: /Employees/Create

    [HttpPost]
    public ActionResult Create(Employee employee)
    {
        ViewBag.Divisions = new MultiSelectList(db.Divisions, "DivisionId", "DivisionName");

        if (ModelState.IsValid)
        {
            db.Employees.Add(employee);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(employee);
    } 
```

最后在编辑视图中，我有以下代码。再次对于多对一关系，一个简单的 DropDownList 可以与控制器中的 ViewBag 一起正常工作，并且使用这种多对多多选/ListBox 方法，“Divisions”会显示在视图中，但是当点击 Save 按钮时，验证'1, 2' is not valid 显示。

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Divisions)
    </div>
    <div class="editor-field">
        @Html.ListBox("Divisions")
        @Html.ValidationMessageFor(model => model.Divisions)
    </div> 
```

据我了解，“部门”列表正在从数据库中正确获取并在视图中正确选择，但是当保存到数据库时，没有通过映射关系进行关联。

所以我的问题是：如何使这项工作在我保存时将正确的“部门”保存给员工？

另外，我听说人们不喜欢使用 ViewBags，有没有（更好的？）替代方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:54:34.487

这个答案可能有点晚了。但是，这里有一两件事可能有助于其他人发现这个问题。

您正在使用 ListBox() 而不是 ListBoxFor() 因此数据不会自动绑定到您的模型。因此，在您的控制器中，您需要：

```
[HttpPost]
public ActionResult Create(Employee employee, string[] Divisions)
{
    // iterate through Divisions and apply to your model
    ...
} 
```

# php - 是否可以从 PHP cli 界面加载扩展而不修改 ini 文件？

> ID：12811482
> 
> 赞同：15
> 
> 时间：2012-10-10T03:18:49.343
> 
> 标签：php

我检查`man php`并输出了`php -h`，但我似乎没有找到这样的东西。

但我记得在某处看到它，你可以做一些`php -Xabc.so script.php`临时加载扩展之类的事情。

有人知道吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-10T03:25:34.223

通过 CLI 加载常规扩展是通过以下方式完成的：

```
php -dextension=abc.so myfile.php 
```

如果您的扩展不在默认路径中，您也可以提供绝对路径：

```
php -dextension=/path/to/abc.so myfile.php 
```

要加载 Zend 扩展，建议始终传递绝对路径：

```
php -dzend_extension=/path/to/abc.so myfile.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:23:10.773

[http://php.net/manual/en/features.commandline.options.php](http://php.net/manual/en/features.commandline.options.php)

```
 -z <file>        Load Zend extension <file>. 
```

通过谷歌搜索“php cli load extension”找到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T18:07:45.357

要默认禁用所有（通过忽略`php.ini`）并指定特定的 PHP 扩展，请尝试：

```
php -n $(for e in curl ctype json iconv; { echo -dextension=$e.so; } | xargs) -m 
```

要运行脚本，请更改`-m`为文件名。

# c++ - sendto 的原始套接字错误：没有错误代码 [是：sendto 的原始套接字错误：没有这样的设备]

> ID：12811487
> 
> 赞同：2
> 
> 时间：2012-10-10T03:19:33.803
> 
> 标签：c++, linux, raw-sockets

我坚持发送原始以太网帧。

[编辑]
我发现了一些错误。
1\. 在套接字调用中它必须是 AF_PACKET。
2\. AF_PACKET 没有 SOCK_PACKET 选项，但是 SOCK_DGRAM 和 SOCK_RAW

使用 SOCK_DGRAM，wireshark 捕获格式错误的 LLC 数据包。
但是使用 SOCK_RAW 没有错误消息，也没有捕获数据包。

我没有发现真正出了什么问题。
[/编辑]

编码：

```
if ((ethernet_socket = socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL))) == -1)
    cout << "Ethernet Socket: "<< strerror(errno) << endl;

struct sockaddr_ll socket_address;
socket_address.sll_family   = PF_PACKET;
socket_address.sll_protocol = htons(ETH_P_IP);
socket_address.sll_ifindex=if_nametoindex("eth0");
socket_address.sll_hatype   = 1; // ARPHRD_ETHER
socket_address.sll_pkttype  = PACKET_OTHERHOST;
socket_address.sll_halen    = ETH_ALEN;
memcpy(socket_address.sll_addr,dest_mac_addr,ETH_ALEN);

int send_result = 0;

char *opt=(char*)malloc(4*sizeof(char));
strcpy(opt,"eth0");

if(setsockopt(ethernet_socket, SOL_SOCKET, SO_BINDTODEVICE, opt, 4)==-1)
    cout << "Could not bind socket to device: " << strerror(errno) << endl;

if ((send_result  
= sendto(ethernet_socket, &buffer, sizeof(buffer), 0,  
    (struct sockaddr*)&socket_address, sizeof(socket_address)))==-1){
        cout << "sendto error: "<< strerror(errno) << endl;
        return send_result;
} 
```

关于CK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:13:34.547

我找到了解决方案这是如何工作的。我看了一下 Linux 程序 PackEth 的源代码。

以下代码对我有用。

```
if ((ethernet_socket = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL))) == -1)
    cout << "Ethernet Socket: "<< strerror(errno) << endl;  //errorhandling

memset(&ifr, 0, sizeof(ifr));
strncpy (ifr.ifr_name, "eth0", sizeof(ifr.ifr_name) - 1);
ifr.ifr_name[sizeof(ifr.ifr_name)-1] = '\0';

if (ioctl(ethernet_socket, SIOCGIFINDEX, &ifr) == -1) {
    cout << "No such interface:"<< strerror(errno) << endl;
    close(ethernet_socket);
}

ioctl(ethernet_socket, SIOCGIFFLAGS, &ifr);
if ( (ifr.ifr_flags & 0x1) == 0) {
    cout << "Interface is down: "<< strerror(errno) << endl;
    close(ethernet_socket);
}

ioctl(ethernet_socket, SIOCGIFINDEX, &ifr);

memset(&socket_address, 0, sizeof (socket_address));
socket_address.sll_family    = AF_PACKET;
socket_address.sll_ifindex   = ifr.ifr_ifindex;
socket_address.sll_protocol  = htons(ETH_P_ALL);

if ((raw_send = sendto(ethernet_socket, buffer, size_payload+14,0,(struct     sockaddr*)     
                           &socket_address, sizeof(socket_address)))==-1){
    cout << "sendto error: "<< strerror(errno) << endl;
    return raw_send;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:02:05.633

```
$ man 7 packet 
```

“SOCK_RAW 数据包传入和传出设备驱动程序**，数据包数据没有任何变化**。接收数据包时，地址仍会被解析并以标准 sockaddr_ll 地址结构传递。 **传输数据包时，用户提供的缓冲区应包含物理层标头**。然后，该数据包未经修改地排队到由目标地址定义的接口的网络驱动程序中。一些设备驱动程序总是添加其他标头。

SOCK_DGRAM 在稍高的级别上运行。在将数据包传递给用户之前，物理头被删除。**通过 SOCK_DGRAM 数据包套接字发送的数据包在排队之前会根据 sockaddr_ll 目标地址中的信息获得合适的物理层标头**。”

# ruby - 在 mac 上安装 mysql2 gem rails

> ID：12811489
> 
> 赞同：2
> 
> 时间：2012-10-10T03:19:49.297
> 
> 标签：ruby, rubygems, mysql2

我正在尝试执行 mysql2 的 gem install，但看起来它没有找到 mysql 的安装位置。我在我的 Mac 上使用 XAMPP 堆栈安装了 mysql。我阅读了其他帖子，但没有产生任何结果。

```
sudo  gem install mysql2 -- --with-mysql-config=/Applications/XAMPP/xamppfiles/bin/mysql_config 
Building native extensions.  This could take a while...
ERROR:  Error installing mysql2:
    ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb --with-mysql-config=/Applications/XAMPP/xamppfiles/bin/mysql_config
checking for rb_thread_blocking_region()... no
checking for rb_wait_for_single_fd()... no
checking for mysql.h... no
checking for mysql/mysql.h... no
-----
mysql.h is missing.  please check your installation of mysql and try again.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    --with-mysql-config

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11 for inspe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:26:43.360

在构建本机扩展时，`gem`正在寻找 mysql 标头。这些可能在`/Application/XAMPP/...`其中，您可以通过以下参数指向它们`gem`-

```
--with-mysql-dir=/path/to/mysql \
--with-mysql-include=/path/to/mysql/headers \
--with-mysql-lib=/path/to/lib \
--with-mysql-config=/path/to/configs 
```

或者，如果不需要使用 XAMPP 的 mysql，您可以通过[自制软件](http://mxcl.github.com/homebrew/)获取 mysql ，然后 -

```
brew install mysql 
gem install mysql2 
```

我更喜欢第二种方式。它更干净，更不容易混淆，因为我不知道 XAMPP 对其捆绑的 mysql 做了什么更改；）

Later if you need to setup such gems on a linux vps, and encounter similar issues, remember to install the `-dev` packages. E.g. `libmysqlclient-dev` for mysql.

# linux - 如果我禁用抢占和中断，udelay 是确定性的吗？

> ID：12811490
> 
> 赞同：3
> 
> 时间：2012-10-10T03:20:09.153
> 
> 标签：linux, linux-kernel, linux-device-driver

我使用 udelay 来控制 GPIO 信号切换时间。我使用 preempt_disable 和 local_irq_disable 禁用了抢占和中断。但是测试不时显示udelay造成的延迟比我预期的要长。我在双核 ARM 系统上运行。只要我禁用抢占和中断，我可以知道 udelay 时间在所有系统条件下是否是确定性和准确的吗？如果没有，有什么建议吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:42:32.933

udelay（和 mdelay）通过旋转（忙等待）工作，并使用 bogomips 值来确定旋转计数。考虑到现代处理器不会确定性地执行指令，因为缓存未命中、管道、分支预测未命中、可变内存延迟等，我假设 udelay 不会是确定性的，即使您禁用硬件中断也是如此。

如果您的平台有某种高性能计时器（例如英特尔 CPU 上的时间戳计数器），您也许可以让它为您工作。

# android - 从另一个片段中的按钮开始片段

> ID：12811496
> 
> 赞同：3
> 
> 时间：2012-10-10T03:21:29.177
> 
> 标签：android, listview, android-fragments

好的，我有一个使用片段在操作栏中实现选项卡的应用程序。每个选项卡都有自己的视图，每个视图中都有按钮。我希望能够从这些按钮启动一个活动或另一个片段视图来执行各种其他操作。我正在尝试做的一个例子如下。我的主要活动如下所示：

```
 public class MainActivity extends SherlockFragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
    bar.setDisplayHomeAsUpEnabled(true);
    bar.setDisplayShowTitleEnabled(true);
    bar.setTitle("Newalla Church of Christ");

    bar.addTab(bar.newTab()
            .setText("Home")
            .setTabListener(new TabListener<HomeFragment>(
                    this, "Home", HomeFragment.class, null)));

    bar.addTab(bar.newTab()
            .setText("Feeds")
            .setTabListener(new TabListener<FeedsFragment>(
                    this, "Feeds", FeedsFragment.class, null)));

    bar.addTab(bar.newTab()
            .setText("Leadership")
            .setTabListener(new TabListener<LeadershipFragment>(
                    this, "Leadership", LeadershipFragment.class, null)));

    bar.addTab(bar.newTab()
            .setText("Bulletin")
            .setTabListener(new TabListener<BulletinFragment>(
                    this, "Bulletin", BulletinFragment.class, null)));

    bar.addTab(bar.newTab()
            .setText("Directory")
            .setTabListener(new TabListener<DirectoryFragment>(
                    this, "Directory", DirectoryFragment.class, null)));

if (savedInstanceState != null) {

        bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
    }

}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // app icon in action bar clicked; go home
                    Intent intent = new Intent(this, MainActivity.class);
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                    return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getSupportActionBar()
            .getSelectedNavigationIndex());
}

public class TabListener<T extends Fragment> implements
        ActionBar.TabListener {
    private final FragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;
    private final Bundle mArgs;
    private Fragment mFragment;

    public TabListener(FragmentActivity activity, String tag, Class<T> clz,
            Bundle args) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
        mArgs = args;
        FragmentTransaction ft = mActivity.getSupportFragmentManager()
                .beginTransaction();

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state. If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        mFragment = mActivity.getSupportFragmentManager()
                .findFragmentByTag(mTag);
        if (mFragment != null && !mFragment.isDetached()) {
            ft.detach(mFragment);
        }
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft = mActivity.getSupportFragmentManager()
                .beginTransaction();

        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName(),
                    mArgs);
            ft.add(android.R.id.content, mFragment, mTag);
            ft.commit();
        } else {
            ft.attach(mFragment);
            ft.commit();
        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft = mActivity.getSupportFragmentManager()
                .beginTransaction();

        if (mFragment != null) {
            ft.detach(mFragment);
            ft.commitAllowingStateLoss();
        }

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
}
 } 
```

其中一个标签是领导力。在此选项卡中，我需要从按钮加载三个不同的列表视图。这是我制作的列表视图和查看器的示例。

列出活动

```
 public class EldersListActivity extends SherlockFragmentActivity implements EldersListFragment.ListItemSelectedListener {

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.listview);
 }

 @Override
 public void onListItemSelected(int index) {
EldersListFragment imageViewer = (EldersListFragment) getSupportFragmentManager()
    .findFragmentById(R.id.viewer_fragment);

 if (imageViewer == null || !imageViewer.isInLayout()) {
Intent showImage = new Intent(getApplicationContext(),
        ViewerActivity.class);
showImage.putExtra("index", index);
startActivity(showImage);
 } 
}

 } 
```

列出片段

```
 public class EldersListFragment extends SherlockListFragment{
private int index = 0;
private ListItemSelectedListener selectedListener;

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    index = position;
    selectedListener.onListItemSelected(position);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setListAdapter(ArrayAdapter.createFromResource(getActivity(),
            R.array.elders, android.R.layout.simple_list_item_1));

    if (savedInstanceState != null) {
        index = savedInstanceState.getInt("index", 0);
        selectedListener.onListItemSelected(index);
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("index", index);
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        selectedListener = (ListItemSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement ListItemSelectedListener in Activity");
    }
}

public interface ListItemSelectedListener {
    public void onListItemSelected(int index);
}
 } 
```

观众活动

```
 public class ViewerActivity extends SherlockFragmentActivity {
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            finish();
            return;
        }

        setContentView(R.layout.viewer_activity);
        Intent launchingIntent = getIntent();
        int index = launchingIntent.getIntExtra("index", 0);
        ViewerFragment viewer = (ViewerFragment) getSupportFragmentManager()
                .findFragmentById(R.id.viewer_fragment);
        viewer.update(index);
    }
} 
```

查看器片段

```
 public class ViewerFragment extends SherlockFragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.viewer_fragment, container, false);
}

public void update(int index) {
    TextView title = (TextView) getView().findViewById(R.id.title);
    ImageView image = (ImageView) getView().findViewById(R.id.image);

    String[] imageTitles = getResources().getStringArray(R.array.elders);
    String[] imageLocations = getResources().getStringArray(R.array.elder_images);

    title.setText(imageTitles[index]);
    InputStream is;
    try {
        is = getActivity().getAssets().open(imageLocations[index]);
        Bitmap bitmap = BitmapFactory.decodeStream(is);
        image.setImageBitmap(bitmap);
    } catch (IOException e) {
        Log.e("ViewerFragment", "Failed to decode image");
    }
}
 } 
```

最后是视图中具有三个按钮的领导选项卡。每个按钮都需要调用不同的列表视图。这是这些的代码和xml文件。

领导碎片

```
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.view.ViewGroup;
 import android.widget.Button;

 import com.actionbarsherlock.app.SherlockFragment;

 public class LeadershipFragment extends SherlockFragment {

Button mButton8;
Button mButton9;
Button mButton10;

public View onCreateView(LayoutInflater inflater, ViewGroup container,

        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.tab_leadership_layout, container, false);
    return view;

}
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //get the button view
        mButton8 = (Button) getView().findViewById(R.id.button8);
        //set a onclick listener for when the button gets clicked
        mButton8.setOnClickListener(new OnClickListener() {
            //Start new list activity
            @Override
            public void onClick(View v) {
                Intent mainIntent = new Intent(getActivity(), EldersListActivity.class);
                startActivity(mainIntent);
            }
        });

    }

} 
```

领导 XML 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<RelativeLayout 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background" >

<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="31dp"
    android:src="@drawable/lead" 
    android:contentDescription="@string/lead"/>

<Button
    android:id="@+id/button8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@drawable/ministers" />

<Button
    android:id="@+id/button10"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginLeft="30dp"
    android:layout_toRightOf="@+id/button8"
    android:background="@drawable/deacons" />

<Button
    android:id="@+id/button9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginRight="30dp"
    android:layout_toLeftOf="@+id/button8"
    android:background="@drawable/elders" />

 </RelativeLayout>
 </LinearLayout> 
```

LOG CAT 强制关闭

```
 10-18 23:39:34.196: E/AndroidRuntime(9601): FATAL EXCEPTION: main
 10-18 23:39:34.196: E/AndroidRuntime(9601): java.lang.NullPointerException
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at com.threesixteenapps.newalla.LeadershipFragment.onCreate(LeadershipFragment.java:31)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:835)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.os.Handler.handleCallback(Handler.java:587)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.os.Handler.dispatchMessage(Handler.java:92)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.os.Looper.loop(Looper.java:150)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at android.app.ActivityThread.main(ActivityThread.java:4263)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at java.lang.reflect.Method.invokeNative(Native Method)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at java.lang.reflect.Method.invoke(Method.java:507)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 10-18 23:39:34.196: E/AndroidRuntime(9601):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T04:55:24.890

好吧，那应该很简单。我假设您的选项卡和选项卡片段都正常工作。您想要做的是从每个按钮启动一个新活动（而不是片段）。如果你想在标签片段旁边显示列表视图，你会使用片段，但是因为你想要一个新屏幕，所以你使用一个活动。

因此，在您的按钮 onClick Listener 中，您只需要创建一个新意图并启动它。下面是一些示例代码：

```
public class LeaderShipFragment extends Fragment {
Button mButton8;
Button mButton9;
Button mButton10;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ViewGroup root = (ViewGroup) inflater.inflate(R.layout.leadership_fragment, null);
    return root;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //get the button view
    mButton8 = getView().findViewById(R.id.button8);
    //set a onclick listener for when the button gets clicked
    mButton8.setOnClickListener(new OnClickListener() {
        //Start new list activity
        @Override
        public void onClick(View v) {
            Intent mainIntent = new Intent(getActivity(), Button8ListActivity.class);
            startActivity(mainIntent);
        }
    });
    //get the button view
    mButton9 = getView().findViewById(R.id.button9);
    //set a onclick listener for when the button gets clicked
    mButton9.setOnClickListener(new OnClickListener() {
        //Start new list activity
        @Override
        public void onClick(View v) {
            Intent mainIntent = new Intent(getActivity(), Button9ListActivity.class);
            startActivity(mainIntent);
        }
    });
    //get the button view
    mButton10 = getView().findViewById(R.id.button10);
    //set a onclick listener for when the button gets clicked
    mButton10.setOnClickListener(new OnClickListener() {
        //Start new list activity
        @Override
        public void onClick(View v) {
            Intent mainIntent = new Intent(getActivity(), Button10ListActivity.class);
            startActivity(mainIntent);
        }
    });

} 
```

}

希望那是你想要的。Android 将处理所有的 backstack 和活动生命周期的东西，所以它真的很简单。

# visual-studio-2010 - 无法打开 Visual Studio Ultimate 2010 项目的部分内容

> ID：12811500
> 
> 赞同：0
> 
> 时间：2012-10-10T03:22:08.983
> 
> 标签：visual-studio-2010

最近，似乎不是因为我所做的任何更改，我现在无法在 VSU2010 中正确加载项目的一部分。有关在测试列表编辑器中打开测试时遇到的错误，请参见下文：

![在此处输入图像描述](../Images/ffc14d8f5a59ed12bee0e9b39e7801aa.png)

但是，如果我从解决方案资源管理器中打开同一个，我会得到：

![在此处输入图像描述](../Images/56e70f172e34a3174a9a256bc0e54ed2.png)

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:34:47.217

您可以检查您是否引用了一个程序集，该程序集又引用了旧版本的`LoadTestPackage`

您可以使用 FuseLogVw 来查找谁在加载旧程序集，您可以定义日志路径并运行您的解决方案。

链接：http: [//msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx)

注意：清理解决方案中的 Debug 和 Release 文件夹，然后删除并添加 LoadTestPackage 引用

# wpf - 在应用程序内动态存储密钥

> ID：12811509
> 
> 赞同：1
> 
> 时间：2012-10-10T03:23:24.480
> 
> 标签：wpf, c#-4.0, cryptography, polymorphism, embedded-resource

场景是这样的，我有两个应用程序。应用程序 A 是加密文件的加密应用程序。应用程序 B 是一个解密应用程序，它将解密由 A 加密的文件。

密钥是随机生成的。现在的问题是密钥是随机生成的，我不想将密钥存储在文本文件中。我想存储嵌入在应用程序 b 中的密钥，这需要应用程序 a 修改 b 的类值或修改我无法找到方法的资源。

任何人都可以帮我解决这个问题吗？

谢谢

# javascript - KineticJS中可拖动舞台上的可拖动形状

> ID：12811511
> 
> 赞同：0
> 
> 时间：2012-10-10T03:23:32.670
> 
> 标签：javascript, html, canvas, kineticjs

离开教程，我正在检查 KineticJS 的拖动功能。[它指出](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-the-stage-with-kineticjs/)形状、线条、图层甚至舞台本身都可以拖动：

> 要使用 KineticJS 拖放整个舞台（平移），我们可以在舞台实例化时将 config 对象的 draggable 属性设置为 true，也可以使用 setDraggable() 方法。与其他节点（例如形状、组和图层）的拖放不同，我们可以通过拖动舞台的任何部分来拖动整个舞台。

最后一行，“与其他节点的拖放不同......我们可以通过拖动舞台的任何部分来拖动整个舞台”我觉得模棱两可。我不知道它是指整个舞台上的任何地方，还是没有被形状遮挡的任何地方。

我在[这里](http://jsfiddle.net/pukster/wF7AA/)设置了一个 jsfiddle 示例，我想要的是能够在我拖动他们的圆圈时移动小 Vaders/yodas，并在我拖动他们圆圈之外的任何地方时移动整个舞台。KinectJS 有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:58:10.140

你可以做的一件事是...

你的圈子的“mouseover touchstart”方法的第一行，停止拖动舞台......

`stage.setDraggable(false);`

然后在你的“mouseout touchend”中，重置舞台的拖动......

`stage.setDraggable(true);`

我没有太多使用 Kinetic，所以我不太确定功能和方法的复杂性，可能有更好的方法，但这应该可行。

# c# - 如何从 Windows 服务运行 jar 文件

> ID：12811516
> 
> 赞同：1
> 
> 时间：2012-10-10T03:24:34.993
> 
> 标签：c#, java, windows, jar, windows-services

我已经编写了一个 WPF 应用程序，我可以在其中输入我的 dos 命令并使用 C# 获得一个带有响应的消息框，并且它工作得很好。现在我想编写一个服务，它可以每隔一段时间执行一个命令“ *java -jar myfile.jar* ”。jar 文件正在访问 weblogic 队列并返回由下面的函数读取的结果。问题是服务没有工作，尽管下面的功能在 WFP 中成功运行。

**如何让这个功能在 Windows 服务中工作？**

```
 /// <summary>
    /// Executes a shell command synchronously.
    /// </summary>
    /// <param name="command">string command</param>
    /// <returns>string, as output of the command.</returns>
    public void ExecuteCommandSync(object command)
    {
     try
     {
         // create the ProcessStartInfo using "cmd" as the program to be run,
         // and "/c " as the parameters.
         // Incidentally, /c tells cmd that we want it to execute the command that follows,
         // and then exit.
    System.Diagnostics.ProcessStartInfo procStartInfo =
        new System.Diagnostics.ProcessStartInfo("cmd", "/c " + command);

    // The following commands are needed to redirect the standard output.
    // This means that it will be redirected to the Process.StandardOutput StreamReader.
    procStartInfo.RedirectStandardOutput = true;
    procStartInfo.UseShellExecute = false;
    // Do not create the black window.
    procStartInfo.CreateNoWindow = true;
    // Now we create a process, assign its ProcessStartInfo and start it
    System.Diagnostics.Process proc = new System.Diagnostics.Process();
    proc.StartInfo = procStartInfo;
    proc.Start();
    // Get the output into a string
    string result = proc.StandardOutput.ReadToEnd();
    // Display the command output.
    Console.WriteLine(result);
      }
      catch (Exception objException)
      {
      // Log the exception
      }
} 
```

从[codeproject.com获得的代码](http://www.codeproject.com/Articles/25983/How-to-Execute-a-Command-in-C)

# iphone - iOS：在 iOS 中处理数据库的最佳方式是什么？

> ID：12811517
> 
> 赞同：0
> 
> 时间：2012-10-10T03:24:46.473
> 
> 标签：iphone, objective-c, ios, database

您好，我想知道在服务器上处理外部数据库的最佳方法是什么，例如 apache 上的本地数据库。或者当你使用 MYSQL 时类似。我想我很困惑如何在 iOS 上进行数据库工作。

谢谢，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:39:01.890

Parse.com 在这方面提供了一些有趣的选项——你可以上传一个 csv 并用它创建一个关系数据库，然后通过他们的 SDK 在你的应用程序中访问它，只需几行代码。

我不为他们工作，但绝对值得一试作为解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:59:07.270

正如 Tom Jowett 之前指出的，如果您不确定自己真正需要什么，请从 Parse 开始。

如果您需要在本地（即在手机上）持久化数据，那么 Core Data 非常好。Core Data 不是严格意义上的 ORM，而是图形管理器，但它会为您在本地存储数据（您不必担心实际的 db）。您也可以直接使用 SQLite，但不应该这样做（除非您有充分的理由这样做）。

另一方面，如果您只是从服务器消费数据，那么看看 parse.com，如果不符合您的需求，您可以随时编写自己的 RESTful 服务器，并使用您选择的数据库.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T04:07:36.147

你不能在 iOS 中直接访问 MYSQL，尽管你可以做到。Apple 不会批准您的应用程序。

所以我们使用[Web Service](http://developer.apple.com/library/mac/#documentation/Networking/Conceptual/UsingWebservices/Introduction/Introduction.html)来访问数据。这意味着您通过特定的 URL 和参数请求您的 Web 服务器。并让您的网络服务器查询您的数据库，并最终以`plaintext`,`XML`或`JSON`格式输出。当你得到结果时，你可以`parse`把它变成一个像`NSDictionary`or的对象`NSArray`。

我相信最常见的方法是使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)和[SBJson](http://stig.github.com/json-framework/)框架。它快速可靠。（虽然 ASIHTTPRequest 已经停止）

假设您在 apache 服务器上使用 PHP。

# 对于 php - api.php：

```
$mysqlArray = mysql_query($query);
$resultObjs = array();
while($mysqlObj = mysql_fetch_object($mysqlArray)){
    array_push($resultObjs,$mysqlObj);
}

echo json_encode($mysqlObj); 
```

# 使用 ASIHTTPRequest 获取数据

```
NSURL *api = [NSURL URLWithString:@"http://YOURSERVER.com/api.php"];
ASIHTTPRequest *request = [[ASIHTTPRequest alloc] initWithURL:api];
NSString *resultString = [request responseString];
[request release]; 
```

# 使用将其解析为对象`SBJson`

```
SBJsonParser *parser = [[SBJsonParser alloc] init];
NSArray *resultObjs = (NSArray*)[parser objectWithString:resultString];
[parser release]; 
```

这是一个基本概念，请在他们的主页上阅读更多示例，并在谷歌上搜索更多示例。希望对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T03:28:55.680

只需在您的服务器上使用 PHP 页面，并使用 GET 变量通过`NSURLConnection`. 您可以使用 API，但此解决方案要简单得多。

如果您需要从服务器获取信息，您可以简单地执行以下操作：

```
NSString* returnedInfo = [NSString stringWithContentsOfURL:[NSURL urlWithString:@"http://www.myserver.com/myaccessorpage.php?a=sdf&s=dfg"]]; 
```

您也可以在后台线程上运行它以避免应用程序挂起。

这可能不是实现您正在做的事情的最有效方法，但它绝对是最简单的方法。

希望这可以帮助您入门。

# php - 在 PHP IMAP 中将电子邮件标记为未读

> ID：12811520
> 
> 赞同：7
> 
> 时间：2012-10-10T03:25:27.630
> 
> 标签：php, imap

是否有任何[PHP IMAP](http://php.net/manual/en/book.imap.php)函数可用于将电子邮件标记为未读？我正在使用一些 IMAP 函数检查邮件，这些函数将消息返回为已读，但我想让它们未读。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-14T09:59:49.007

要将电子邮件标记为未读，您应该取消设置该`\\Seen`邮件上的标志。
您可以使用该[`imap_clearflag_full`](http://php.net/manual/en/function.imap-clearflag-full.php)功能清除消息标志。

```
// Unset desired flag
imap_clearflag_full($imap_connection, $message_number, "\\Seen");
// Confirm changes
imap_close($imap_connection, CL_EXPUNGE); 
```

**笔记：**

> “我正在使用一些将邮件返回为已读的 IMAP 功能检查邮件”

您可以`FT_PEEK`在阅读消息时设置`\\Seen`标志，如果尚未设置，则不会设置标志。

```
// This will not mark a message as seen
$body = imap_body($imap_stream, $msg_number, FT_PEEK); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-21T05:49:13.850

尝试[imap_clearflag_full](http://php.net/manual/en/function.imap-clearflag-full.php)，

```
imap_clearflag_full($mailbox, $email_number, "\\Seen"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T04:26:04.603

试试 imap_setflag_full， [http: //www.php.net/manual/en/function.imap-setflag-full.php](http://www.php.net/manual/en/function.imap-setflag-full.php)

# iphone - 如何在 cocos2d 中隐藏或禁用 CCMenuItemImage？

> ID：12811522
> 
> 赞同：1
> 
> 时间：2012-10-10T03:25:38.323
> 
> 标签：iphone, ios5, cocos2d-iphone

我在文件中有一个`CCMenuItem`声明`.h`

```
CCMenuItemImage* button2 ; 
```

我在`.m`文件的 init 语句中实现了它

```
 button2 = [CCMenuItemImage itemFromNormalImage:@"Levels.png" selectedImage:@"Levels.png" target:self selector:@selector(switchScenelevels)];
        levelbutton = [CCMenu menuWithItems:button2,  nil];
        levelbutton.position = levelstartpostion;
        [self addChild:levelbutton z:depthScore]; 
```

当我的应用程序发生某些事情时，我需要隐藏此按钮。

我做了以下隐藏`button2`：

```
-(void)resetgameee
{
    [button2 setVisible:NO];

} 
```

但没有运气；它仍然在屏幕上可见。我也这样做：

```
-(void)resetgameee
{
    [button2.isEnabled:NO];

} 
```

这没有用

如何禁用或隐藏此按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:11:23.383

你可以试试这个： `+ (id) itemFromNormalImage: (NSString *) value selectedImage: (NSString *) value2 disabledImage: (NSString *) value3 target: (id) r selector: (SEL) s` 如果你想让按钮消失，你可以在 disabledImage 中放置一个透明图像，现在 `[button2.isEnabled:NO];` 可以工作并将 disabledImage 放在屏幕上

# python - django 全局变量

> ID：12811523
> 
> 赞同：19
> 
> 时间：2012-10-10T03:25:44.313
> 
> 标签：python, django, django-views

在views.py

当我尝试这个从其他访问全局变量时`def`：

```
def start(request):
    global num
    num=5
    return HttpResponse("num= %d" %num) # returns 5 no problem....

def other(request):
    num=num+1
    return HttpResponse("num= %d" %num) 
```

`def other` 不返回 6，但应该是 6 对吗？如何在我的视图中全局访问变量？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-10T04:01:13.633

使用[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)。这正是它们的设计目的。

```
def foo(request):
   num = request.session.get('num')
   if num is None:
      num = 1
   request.session['num'] = num
   return render(request,'foo.html')

def anotherfoo(request):
   num = request.session.get('num')
   # and so on, and so on 
```

如果会话已过期，或会话`num`中不存在（未设置），`request.session.get('num')`则将返回`None`. 如果你想给`num`一个默认值，那么你可以这样做`request.session.get('num',5)`- 现在如果`num`没有在会话中设置，它将默认为`5`. 当然，当你这样做时，你不需要`if num is None`检查。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T03:26:59.407

您可以在其中一个函数之外声明 num 。

```
num = 0
GLOBAL_Entry = None

def start(request):
    global num, GLOBAL_Entry
    num = 5
    GLOBAL_Entry = Entry.objects.filter(id = 3)
    return HttpResponse("num= %d" %num) # returns 5 no problem....

def other(request):
    global num
    num = num + 1
    // do something with GLOBAL_Entry
    return HttpResponse("num= %d" %num) 
```

如果您分配给一个变量，您只需要使用 global 关键字，这就是您不需要`global GLOBAL_Entry`在第二个函数中的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-24T09:18:05.643

您可以打开 settings.py 并添加您的变量和值。在您的源代码中，只需添加这些行

```
from django.conf import settings
print settings.mysetting_here 
```

现在您可以为所有项目全局访问您的变量。试试这个，它对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-11T03:23:17.803

您也可以通过在**other()**方法中使用**global**关键字来执行此操作，如下所示：

 **```
def other(request):
   global num
   num = num+1
   return HttpResponse("num= %d" %num) 
```

现在它会返回 6。这意味着无论你想在哪里使用全局变量，你都应该使用**global**关键字来使用它。**

# pyrocms - 我的 PyroCMS 版本是多少？

> ID：12811533
> 
> 赞同：0
> 
> 时间：2012-10-10T03:26:46.700
> 
> 标签：pyrocms

我怎样才能知道我在服务器上安装了哪个版本的 PyroCMS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:33:45.383

转到您的管理面板并查看底部，如屏幕截图所示 -

![在此处输入图像描述](../Images/c81f5150e377deb40e186db9bf634cea.png)

**编辑**

检查**README.md**文件并查看版本——

```
# PyroCMS Community Edition

* [Website](http://pyrocms.com/)
* [Documentation](http://pyrocms.com/docs)
* [License](http://pyrocms.com/legal/license)
* [Forums](http://pyrocms.com/forums)
* Version: 2.0.1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-10T08:41:56.303

查看 system/{cms|pyrocms|whatever}/config/constants.php 应该在那里定义一个版本常量

稀有

# jsf-2 - 使用 JBoss 4.x 实现 JSF 2.0

> ID：12811535
> 
> 赞同：2
> 
> 时间：2012-10-10T03:27:16.120
> 
> 标签：jsf-2, jboss, jsf-1.2

我目前正在为部署在 JBoss 4.3.0 中的应用程序将 JSF 版本从 1.2 升级到 2.0。我对 JBoss 还是很陌生，遇到了这个问题。我已经下载了 JSF jars（impl 和 api）并将其放在 jboss-web.deployer/jsf-libs 下。我还将richfaces-impl jar 放在C:\Program Files\Java\richfaces-ui-3.3.3.Final\lib 中。

当我启动服务器时，我在控制台中没有收到任何错误，但我无法浏览该站点。Internet Explorer 给出错误提示“Mojarra 未定义”。在将版本的输出 .html 文件与 jsf 2.0 jar 和 1.2 进行比较时，我注意到 onclick 属性中的函数对于 JSF 2.0 具有 'mojarra.jsfcljs(document.getElementById' 而对于 1.2 它具有 'var b=function (){if(typeof jsfcljs == 'function'){jsfcljs(document.getElementById'.

这个输出文件是如何生成的？如果我能让输出文件具有相同的功能，它会起作用吗？如果没有，那么我该如何解决“mojarra 未定义”问题？我正在开发 MyEclipse Enterprise Workbench 8.0 版。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:40:56.227

JSF 2.0 在 Jboss 4.x 甚至在 Jboss 5.x 中都不能工作 你需要将你的 Jboss 升级到 6.x 或更高版本。你可以参考这个[链接](https://community.jboss.org/message/595333#595333)。也就是说，可以通过将 jars 放在 Jboss lib 文件夹中，使 JSF 2.x 在 Jboss 较低版本（如 5.x）上运行。但是，不建议这样做，也不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:49:59.770

我在 Jboss 4.2.2 上使用 JSF 2 的 Mojarra 实现。

您需要在 web.xml 中指定：

```
<context-param>
  <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
  <param-value>true</param-value>
</context-param> 
```

您还需要在您的战争 jsf 库中提供您要使用的内容。让我知道在 Jboss 4.3.0 上是否可以

# google-maps - 如何请求 Google 地图中的功能？

> ID：12811538
> 
> 赞同：1
> 
> 时间：2012-10-10T03:27:28.977
> 
> 标签：google-maps

[除了http://code.google.com/p/gmaps-api-issues/](http://code.google.com/p/gmaps-api-issues/)之外，我还没有找到任何（例如）错误数据库，我想他们希望我先在这里提问。所以：这是我想要的功能；我应该告诉谁？

我希望能够将一些文本与 Google 地图上的星标相关联——这样我就可以注意到我*为什么*要费心为某个地方加星标。（典型的原因是：我阅读了这家餐厅的精彩评论，这是它的 URL；这是我们上次入住的酒店；等等）。我有很多明星，经常忘记我为什么给他们加星。

我意识到我可以通过创建自己的地图并将地点添加到其中来实现这一点；但是使用“我的地图”既尴尬又乏味；我希望这些信息一直出现在我面前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:23:53.480

发布我的评论作为答案，以便可以关闭此评论：

StackOverflow 不是向 Google 报告增强请求的地方。使用谷歌地图右下角的“报告问题”功能。在“所有其他问题”下，您会找到“所有其他评论、关于 Google 地图的反馈”。您在问题中发布的链接是另一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:36:24.623

正如 Gady P. 评论的：使用谷歌地图右下角的“报告问题”功能。在“所有其他问题”下，您会找到“所有其他评论、关于 Google 地图的反馈”。您在问题中发布的链接是另一种方式。

# android - 在右侧添加另一个滑动抽屉失败

> ID：12811542
> 
> 赞同：1
> 
> 时间：2012-10-10T03:27:44.980
> 
> 标签：android, slidingdrawer

我想在另一个滑动抽屉旁边添加滑动抽屉，目前我的输出是：

![在此处输入图像描述](../Images/03f0a5d9ef0b51ba3ee798df4a2abdf9.png)

箭头＃1应该是我的第一个滑动抽屉

箭头 #2 是我的第二个滑动抽屉应该在的位置

我有以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <SlidingDrawer
        android:id="@+id/asof"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/drop_shadow"
        android:content="@+id/right_content_a"
        android:gravity="center_horizontal"
        android:handle="@+id/right_handle"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/right_handle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/tab"
            android:text="" />

        <FrameLayout
            android:id="@+id/right_content_a"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:tag="eacomm" >
        </FrameLayout>
    </SlidingDrawer>

    <SlidingDrawer
        android:id="@+id/field_ex"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/drop_shadow"
        android:content="@+id/right_content_a"
        android:gravity="center_horizontal"
        android:handle="@+id/right_handle2"
        android:orientation="horizontal" >

        <RelativeLayout
            android:id="@+id/right_handle2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="bottom" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/tab" />
        </RelativeLayout>

        <FrameLayout
            android:id="@+id/right_content_a"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:tag="eacomm2" >
        </FrameLayout>

    </SlidingDrawer>

</LinearLayout> 
```

有任何想法吗？蒂亚！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:06:02.900

滑块抽屉将捕获布局的完整行。因此，您将无法放置另一个滑块抽屉或任何其他需要捕获点击或焦点的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:33:46.090

我已经通过创建两个滑动抽屉 XML 文件并将其绑定到主容器/布局来解决它。谢谢...

# parsing - 这个迷你语言的 AST

> ID：12811543
> 
> 赞同：1
> 
> 时间：2012-10-10T03:27:58.307
> 
> 标签：parsing, data-structures, compiler-construction, abstract-syntax-tree, bnf

我很难弄清楚，决定抽象语法树将如何产生内存，它是每个语句的树森林？还是单根二叉树？

样本来源：

```
P: 10
if A < 15:
    P: 9 
```

这是 BNF 语法：

```
<Prog>       ::= <Stmts>
<Stmts>      ::= <Stmt> | <Stmt> <Stmt>
<Stmt>       ::= <IfStmt> NL | <AssignStmt> NL
<AssignStmt> ::= <Id> : <Aexp> | <Indents> <AssignStmt>
<IfStmt>     ::= if <Lexp> : NL <Stmts> | <Indents> <IfStmt>
<Aexp>       ::= <Id> | <Int> | <Aexp> <AOP> <Aexp>
<Lexp>       ::= <Aexp> <LOP> <Aexp>
<LOP>        ::= < | > | & 
<AOP>        ::= + | - | * | /
<Int>        ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | <Int> <Int>
<Id>         ::= A | B | C | D | E | F | P
<Indents>    ::= SPC | SPC <Indents> 
```

其中`SPC`表示空格和`NL`换行符。是的，它只允许 7 个标识符。和正整数。

它很容易进行词法分析，但是我已经搜索了很多，但大多数 AST 示例只使用易于掌握的数学表达式。如果您发现我的语法不正确，请说出来。另请注意，该语法是受 Python 启发的，我已经阅读了[Lexical Analysis](http://docs.python.org/reference/lexical_analysis.html)文档，但它甚至没有提到单词树。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:45:40.933

鉴于程序中和每个“if 语句”下可能有多个“语句”，您可以将语句排列为内存中的列表/数组。如果你真的想使用树，你可以这样做，但是这些树只是形式上的树，因为它们会退化并且看起来和功能都像列表。想想看，除了它们出现和执行的顺序之外，每条语句实际上与其相邻的语句没有任何关系。它们不形成递归结构。`P: 10`并且`if A < 15:`彼此之间没有任何递归关系。

使用树来表示语句似乎没有充分的理由或明显的优势。但是，您可以选择使用树来拥有单一统一的数据结构。

至于表达式，它们非常适合树的概念，因为许多运算符都是二元的，它们接受一两个输入并产生一个输出，而输出又可以用作其他运算符的输入。这里有一个明确的递归。

我认为将整个程序安排为子列表（用于语句）和树（用于表达式）的列表是可行的。但是您可以使用退化树而不是（子）列表。

# ibm-mq - 对 WMQ 的属性 MAXCHANNELS 功能感到困惑

> ID：12811544
> 
> 赞同：1
> 
> 时间：2012-10-10T03:28:31.483
> 
> 标签：ibm-mq, mq

我使用**`MAXCHANNELS`**QMGR 的 qm.ini 中的 MQ 属性进行了测试，但得到了我不明白的结果，请参阅我的 WMQ 环境详细信息，如下所示：

操作系统：Windows 7 MQ：7.0.1.3

MaxChannels 配置： ![在此处输入图像描述](../Images/1280d8959940965788c98215723228bb.png)

MQSC`dis chs(*)`总数为**5** ![在此处输入图像描述](../Images/d2b2c3246dbd6178530bc40d3fd92e2f.png)

这就是我的困惑。根据 MQ inforcenter 的描述，**MAXCHANNELS**是指可以是当前的最大通道数（包括连接客户端的服务器连接通道）。但是，我的配置值为**1**，而当前活动的数量已经是 5。顺便说一句，我在值重置后重新启动了 qmgr。为什么会这样？从我的角度来看，一些错误（如达到最大数量）应该显示在 error.log 中。但我什么也没看到。一切似乎都很好。

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:21:19.907

这没有生效的一种可能性是您可能在错误的位置更新配置。

在 MQ 7.0.1.x 中，队列管理器配置可以改为保存在 qm.ini 文件中，例如，如果它配置为多实例。从 MQ 7.1 开始，qm.ini 是所有分布式队列管理器保存其配置数据的位置。

如果队列管理器正在使用 ini 文件，则应将以下节添加到 qm.ini，它可以在队列管理器数据目录中找到；

```
Channels:
    MaxChannels=1 
```

谢谢，乔恩

# virtual - Moq - 具有虚拟属性的对象不能写入外部

> ID：12811545
> 
> 赞同：0
> 
> 时间：2012-10-10T03:28:31.047
> 
> 标签：virtual, moq

像这样的课

```
public abstract class TT
{
    public virtual int ID { get; set; }
}
public class X
{
    public void F(TT t)
    {
        t.ID = 100;
    }
} 
```

函数 XF 使用 TT 做某事。我什么测试 F 。

所以

```
[TestMethod]
public void T()
{
    var t = new Mock<TT>();
    new X().F(t.Object);
    Assert.AreEqual(100, t.Object.ID);
} 
```

但 t.Object.ID 始终为“0”。当我将 ID 设置为非虚拟时，它就通过了。

那么，为什么会这样呢？以及如何使虚拟属性可以写入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:45:26.370

问题在于 Moq 如何实际构建模拟。由于在这种情况下，它通过扩展您的类和覆盖来实现，因此标记为虚拟的属性将由 Moq 处理。

所以我相信你的实现中缺少的是属性的设置：

```
t.SetupProperty(f => f.ID); 
```

您还可以让 Moq 使用以下方法设置您的所有属性：

```
t.SetupAllProperties(); 
```

在这里可以找到很多有用的示例：[http ://code.google.com/p/moq/wiki/QuickStart](http://code.google.com/p/moq/wiki/QuickStart)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:57:58.627

因为 TT 是一个具有虚拟方法（而不是接口）的类，所以这是另一种选择。

正如 Pablo 的回答中提到的，Moq 扩展了你的类，覆盖了虚拟财产。但是，有一个选项**CallBase**，它告诉 Moq 使用未定义设置的原始（覆盖）版本。

如果在 mock 上将 CallBase 设置为 true，则将调用原始属性，无需显式设置属性。

```
[TestMethod]
public void T() {
    var t = new Mock<TT>() { CallBase = true };
    new X().F(t.Object);
    Assert.AreEqual(100, t.Object.ID);
} 
```

这不是比使用 SetupUpAllProperties() 更好的答案，但在人们只想将设置用于某些功能的情况下非常有用。

# c# - 暂停/恢复树视图滚动条的绘制

> ID：12811548
> 
> 赞同：1
> 
> 时间：2012-10-10T03:28:52.617
> 
> 标签：c#, treeview, repaint, scrollbars, redraw

我试图在重绘树视图时阻止树视图的垂直滚动条闪烁。我已经有一个自定义树视图控件，它可以使用 WndProc 禁用绘画，它对树视图本身工作正常，但不会阻止树视图的滚动条在我清除/创建树视图中的节点时重新绘画和闪烁。

有什么解决办法吗？这是自定义树视图中的代码：

```
 private bool enablePaint = true;
    protected override void WndProc(ref Message m)
    {
        switch (m.Msg)
        {
            case WM_PAINT:
                if (enablePaint)
                    base.WndProc(ref m);
                break;
            case WM_ERASEBKGND:
                break;
            default:
                base.WndProc(ref m);
                break;
        }
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-10T03:56:45.100

我找到了解决方案，使用 LockWindowUpdate：

```
 [DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);
    [DllImport("user32.dll")]
    private static extern bool LockWindowUpdate(IntPtr hWndLock);
    public new void BeginUpdate()
    {
        SendMessage(this.Handle, WM_SETREDRAW, (IntPtr)0, IntPtr.Zero);
        LockWindowUpdate(this.Handle);
    }
    public new void EndUpdate()
    {
        LockWindowUpdate(IntPtr.Zero);
        SendMessage(this.Handle, WM_SETREDRAW, (IntPtr)1, IntPtr.Zero);
    } 
```

# scheme - 长度的 2 个尾递归函数 [球拍]

> ID：12811556
> 
> 赞同：1
> 
> 时间：2012-10-10T03:30:53.350
> 
> 标签：scheme, racket

我正在尝试编写两个单独的尾递归函数来计算列表的长度，并且我有这些限制：

1.  编写一个版本，`lengtht`即尾递归并根据需要使用外部（非嵌套）辅助函数

2.  编写第二个版本，`lengtht2`它不使用额外的顶级函数。该函数应该仍然是尾递归的，并且可以使用您想要的任何本地绑定

我是球拍新手，这就是我理解的尾递归的一般形式：

```
(define (func x)
    (cond (end-test-1 end-value-1)
          (end-test-2 end-value-2)
          (else (func reduced-x)))) 
```

我只是对如何做到这一点有点困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:45:29.433

本质上，尾递归函数会不断调用自身，直到达到其结束条件。然而，与“常规”递归不同，它会将中间答案传递给自身，直到到达终点。

一个例子是这样的：

```
(define (find-length i lst)
  (if
    (null? lst) i
    (find-length (+ i 1) (cdr lst)))) 
```

该函数有两个值：`i`，它跟踪到目前为止列表的长度，以及`lst`我们正在计算元素的列表。`i`，出于所有意图和目的，是我们对列表中元素的运行计数。所以如果我们调用这个方法，我们会希望调用它时`i`初始化为 0。

首先我们检查列表是否为空。( `null?`) 如果列表为空，我们可以假设我们已经计算了所有元素，所以我们只需返回`i`，这是我们的运行计数。这是我们的最终条件。

否则，我们`find-length`再次调用。然而，这一次，我们增加`i`了 1 并从 list 中删除了第一个元素`(cdr lst)`。

例如，假设我们这样调用函数：

```
(find-length 0 (list 2 3 4 3 5 3)) 
```

正如我们评估的那样，该程序将递归调用：

```
(find-length 1 '(3 4 3 5 3))
(find-length 2 '(4 3 5 3))
(find-length 3 '(3 5 3))
(find-length 4 '(5 3))
(find-length 5 '(3))
(find-length 6 '()) ; end condition, return 6 
```

[这个问题](https://stackoverflow.com/questions/33923/what-is-tail-recursion)通常是尾递归的一个很好的参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:46:22.527

这看起来像家庭作业，所以我会给你一些提示，为你指明正确的方向，你可以填空。第一个问题试试这个：

```
(define (loop lst acc)              ; receives a list and an accumulator
  (cond ((null? lst) <???>)         ; if the list is empty return the accumulator
        (else (loop <???> <???>)))) ; advance the recursion, +1 to accumulator

(define (length1 lst)
  (loop <???> <???>))               ; how should we initialize the iteration? 
```

试试这个第二个问题：

```
(define (length2 lst)
  (letrec ((loop <???>)) ; lambda with the same procedure as the previous `loop`
    (loop <???> <???>))) ; start the recursion exactly the same as in `length1` 
```

无论如何，想一想：空（null）列表的长度是多少？答案将向您展示如何初始化迭代。对于这两种解决方案，我们都使用了一个额外的参数`acc`来跟踪到目前为止的答案，并将它与列表一起传递给循环尾递归过程。

# objective-c - 如何在项目深处找到一个Png文件

> ID：12811557
> 
> 赞同：1
> 
> 时间：2012-10-10T03:31:00.393
> 
> 标签：objective-c, png, xcode4.5

![在此处输入图像描述](../Images/cd3cc62786fef8a720fd46c5eea863dd.png)

我可以找到的图标列表中列出了一个名为 icon-searchfield.png 的文件。

它在一个项目的深处。

我想找到他们。然而，我不知道在哪里。我想摆脱对该图像的引用，因为新图像已经存在。

我浏览打开项目导航器中的所有组，但找不到它。

我打开 project.pbxproj 文件，但找不到 icon-searchfield.png。那么它到底是如何显示在下拉框中的呢？

我应该为图片使用同名的文件，而现有的同名文件似乎会妨碍我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T03:35:11.233

转到 Xcode 左侧的项目导航器并尝试在 Xcode 的左下角搜索此图像名称。如果它出现在项目中的任何位置，它将自动打开该组并显示在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:37:56.080

由于我对 XCode 不是很深入，所以我会从终端检查以获取线索。例如，从您的项目目录中 -

```
~/Code/ios-samples/NavBar/ $ grep -r "Default.png" .
./NavBar.xcodeproj/project.pbxproj: 182B3A8511D17401003EE100 /* Default.png */ = {isa = PBXFileReference; lastKnownFileType = image.png; path = Default.png; sourceTree = "<group>"; };
./NavBar.xcodeproj/project.pbxproj: 182B3A8511D17401003EE100 /* Default.png */,
...
$ 
```

注意`path = Default.png`那里。如果您的项目正在引用项目目录之外的路径，则此类`grep`调用可能会给您提示。`-r`递归`grep`搜索文件。

# c - 传递给函数时更改数组指针的值

> ID：12811563
> 
> 赞同：0
> 
> 时间：2012-10-10T03:32:32.913
> 
> 标签：c, arrays, parameter-passing, pass-by-reference

> **可能重复：**
> [C：按值传递的更改指针](https://stackoverflow.com/questions/5531765/c-change-pointer-passed-by-value)

我有一个函数可以同时接收数组和数组的特定实例。我尝试通过访问其成员之一“颜色”来更改数组的特定实例，但它实际上并没有改变它，正如调试所见（在函数在主程序中运行后检查颜色的值）。

我希望有人可以帮助我访问该成员并进行更改。本质上，如果没有别的，我需要我指定的数组实例通过引用传递，但我希望有一种更简单的方法来完成我正在尝试做的事情。

这是结构：

```
typedef struct adjEdge{
        int vertex;
        struct adjEdge *next;
} adjEdge;

typedef struct vertex{
        int sink;
        int source;
        int color;                                                              //0 will be white, 1 will be grey, 5 will be black
        int number;
        adjEdge *nextVertex;
} vertex; 
```

这是功能：

```
 void walk(vertex *vertexArray, vertex *v, int source, maxPairing *head)
{
        int i;
        adjEdge *traverse;
        int moveVertex;
        int sink;
        int correctedNumber = v->number;
        traverse = vertexArray[v->number-1].nextVertex;
        if(v->color != 5 && v->sink == 5)
        {
                sink = v->number;
                v->color = 5;
                addMaxPair(head, source, sink);
        }
        else
        {
                walk(vertexArray, vertexArray[traverse->vertex-1], source, head);
        }

} 
```

特别是`v.color`需要更改为 5，这样在递归之后 if 条件会阻塞它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:43:13.300

您通过*副本*获取参数，因此函数内部的任何更改都不会反映在外部。您需要接受`v`as `vertex*`。

# javascript - 在给定的 Json 中，根据键搜索特定的给定字符串，如果找到则返回 true，否则返回 false 使用 jQuery/Javascript

> ID：12811564
> 
> 赞同：-1
> 
> 时间：2012-10-10T03:32:44.707
> 
> 标签：javascript, jquery, logic, business-logic

给定 JSON 字符串/对象

```
{
    "selectAll": false,
    "include": {
        "country_197": {
            "id": "197",
            "data_type": "country",
            "name": "Singapore",
            "desc": "",
            "parent_key_id": "all_all",
            "status": ""
        },
        "country_100": {
            "id": "100",
            "data_type": "country",
            "name": "India",
            "desc": "",
            "parent_key_id": "all_all",
            "status": ""
        }
    },
    "exclude": {
        "state_2": {
            "id": "2",
            "data_type": "state",
            "name": "Andhra Pradesh",
            "desc": "",
            "parent_key_id": "country_100",
            "status": ""
        }
    }
} 
```

给定的搜索字符串是：`country_100`

必需：必须`country_100`在给定的 JSON 字符串/对象中按键`parent_key_id` 搜索 例如：`country_100`找到搜索：

```
{
    "selectAll": false,
    "include": {
        "country_197": {
            "id": "197",
            "data_type": "country",
            "name": "Singapore",
            "desc": "",
            "parent_key_id": "all_all",
            "status": ""
        },
        "country_100": {
            "id": "100",
            "data_type": "country",
            "name": "India",
            "desc": "",
            "parent_key_id": "all_all",
            "status": ""
        }
    },
    "exclude": {
        "state_2": {
            "id": "2",
            "data_type": "state",
            "name": "Andhra Pradesh",
            "desc": "",
            "parent_key_id": "**country_100**",
            "status": ""
        }
    }
} 
```

所以返回真，否则返回假。
这是我到目前为止所拥有的

```
var id = 'country_100', found = false;
for (var i=0; i<data.length; i++) { 
    console.log(data[i].exclude['state_2'].parent_key_id); 
    if (data[i].exclude['state_2'].parent_key_id == id) { 
        found = true; 
        break; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:15:04.360

很高兴看到你格式化了对象:)

```
var id = 'country_100', found = false; 
if(data['exclude']['state_2']['parent_key_id'] === id) {
    found = true;
} 
```

你为什么使用循环？除非你的对象像

```
data = {
    1: {"selectAll":false, "include":..., "exclude": ...},
    2: {"selectAll":false, "include":..., "exclude": ...},
    3: {"selectAll":false, "include":..., "exclude": ...}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:21:30.777

给你！ [http://jsfiddle.net/8p9KF/](http://jsfiddle.net/8p9KF/)

```
<script type="text/javascript">
onerror=function(a,b,c){alert([a,b,c])};
</script>
<script type="text/javascript">
var myJSON={
  "selectAll":false,
  "include":
  {
    "country_197":{"id":"197","data_type":"country","name":"Singapore","parent_key_id":"all_all"},
    "country_100":{"id":"100","data_type":"country","name":"India","parent_key_id":"all_all"}
  },
  "exclude":
  {"state_2":
    {"id":"2","data_type":"state","name":"Andhra Pradesh","parent_key_id":"country_100"}
  }
};

//alert(myJSON.include["country_100"].data_type=="country");

function countryIsIncluded(country)
{
    var keyExists=(country in myJSON.include);
    if(!keyExists)return false;
    return (myJSON.include[country].data_type=="country");
}

function countryIsExcluded(country)
{
    var keyExists=(country in myJSON.exclude);
    if(!keyExists)return false;
    return myJSON.exclude[country].data_type=="country";
}

function stateIsIncluded(state)
{
    var keyExists=(state in myJSON.include);
    if(!keyExists)return false;
    return myJSON.include[state].data_type=="state";
}

function stateIsExcluded(state)
{
    var keyExists=(state in myJSON.exclude);
    if(!keyExists)return false;
    return myJSON.exclude[state].data_type=="state";
}

countryIdMap={};
stateIdMap={};
for(var j in myJSON.include){
 if(!myJSON.include.hasOwnProperty(j))continue;
 if(myJSON.include[j].data_type=="country")countryIdMap[myJSON.include[j].name]=myJSON.include[j].id;
 else if(myJSON.include[j].data_type=="state")stateIdMap[myJSON.include[j].name]=myJSON.include[j].id;
}
for(var j in myJSON.exclude){
 if(!myJSON.exclude.hasOwnProperty(j))continue;
 if(myJSON.exclude[j].data_type=="country")countryIdMap[myJSON.exclude[j].name]=myJSON.exclude[j].id;
 else if(myJSON.exclude[j].data_type=="state")stateIdMap[myJSON.exclude[j].name]=myJSON.exclude[j].id;
}

function lookUpCountry(countryName)
{
    var c=(countryName in countryIdMap)?"country_"+countryIdMap[countryName]:countryName;
    return {included:countryIsIncluded(c),excluded:countryIsExcluded(c)};
}

function lookUpState(stateName)
{
    var s=(stateName in stateIdMap)?"state_"+stateIdMap[stateName]:stateName;
    return {included:stateIsIncluded(s),excluded:stateIsExcluded(s)};
}

var india=lookUpCountry("India");
alert("India is:\nincluded: "+(india.included?"Y":"N")+"\nexcluded: "+(india.excluded?"Y":"N"));

var country_100=lookUpCountry("country_100");
alert("country_100 is:\nincluded: "+(country_100.included?"Y":"N")+"\nexcluded: "+(country_100.excluded?"Y":"N"));

var country_197=lookUpCountry("country_197");
alert("country_197 is:\nincluded: "+(country_197.included?"Y":"N")+"\nexcluded: "+(country_197.excluded?"Y":"N"));

var country_349999=lookUpCountry("country_349999");
alert("country_349999 is:\nincluded: "+(country_349999.included?"Y":"N")+"\nexcluded: "+(country_349999.excluded?"Y":"N"));

var state_2=lookUpState("state_2");
alert("state_2 is:\nincluded: "+(state_2.included?"Y":"N")+"\nexcluded: "+(state_2.excluded?"Y":"N"));

var andhraPradesh=lookUpState("Andhra Pradesh");
alert("Andhra Pradesh is:\nincluded: "+(andhraPradesh.included?"Y":"N")+"\nexcluded: "+(andhraPradesh.excluded?"Y":"N"));

var state_2999=lookUpState("state_2999");
alert("state_2999 is:\nincluded: "+(state_2999.included?"Y":"N")+"\nexcluded: "+(state_2999.excluded?"Y":"N"));
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:51:40.737

我想知道什么是动态的？state_2？你的意思是你不知道它是 state_2 还是 state_3，或者其他任何东西。那么你可以这样做：

```
for(var p in data[i].exclude){
    data[i].exclude[p];//here p is what you want
} 
```

# php - 在 HTML/PHP 中生成唯一的 5 个字母数字 ID

> ID：12811568
> 
> 赞同：-1
> 
> 时间：2012-10-10T03:33:22.227
> 
> 标签：php, html, alphanumeric

> **可能重复：**
> [生成 v4 UUID 的 PHP 函数](https://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid)

我可以知道生成 5 个字母数字随机化器 ID 的最简单的 HTML/PHP 代码如何或什么是最简单的？我看到了与我所问的类似的其他问题，但这不是我一直在寻找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:34:59.900

使用 Uniqid 功能[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

# android - 在Android中使用sax解析器解析多个孩子

> ID：12811574
> 
> 赞同：1
> 
> 时间：2012-10-10T03:34:12.367
> 
> 标签：android, xml, sax

我可以使用 sax 解析器解析 xml 文件，但是当我需要在属性下添加子属性时，我该如何获取该值？我的 xml 文件在这里：

```
<?xml version="1.0" encoding="UTF-8"?>
<marketlist>
  <market>
      <name restricted="yes">boss</name>
      <motorway>M6</motorway>
      <junction>J3</junction>
      <petrol_hour>
          <mon>7am - 8pm</mon>
          <tues>7am - 8pm</tues>

      </petrol_hour>
</market> 
```

我想解析并获取 mon 和 tues 值。有什么建议吗？我用于解析的android代码在这里：

```
public void endElement(String uri, String localName, String qName)
            throws SAXException {

        elementOn = false;

        /** 
         * Sets the values after retrieving the values from the XML tags
         * */ 
        if (localName.equalsIgnoreCase("name"))
            data.setMarketName(elementValue);
        else if (localName.equalsIgnoreCase("motorway"))
            data.setMotorway(elementValue);
        else if (localName.equalsIgnoreCase("junction"))
            data.setJunction(elementValue); 
```

# api - 检索公共供稿时出现“登录密码不能用于此 API”的错误消息

> ID：12811584
> 
> 赞同：1
> 
> 时间：2012-10-10T03:36:03.387
> 
> 标签：api, facebook-graph-api

我在使用我的应用身份验证令牌检索公共页面提要时遇到问题。

它之前已经工作了大约 2 个月，但今天我收到报告说它不再工作了。

基本上我所做的是：

*   [对https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=) {clientId}&client_secret={clientSecret}执行 GET 请求以检索访问令牌
*   [对https://graph.facebook.com/](https://graph.facebook.com/) {pageId}/feed?access_token={accessToken}的公共页面提要执行 GET 请求

但是，在执行页面提要请求时，现在它返回 190 OAuth 错误，并显示“登录密码不能用于此 API”消息。

关于解决这个问题的任何想法？

# c - 无法访问的代码可以安全删除吗？(-Wunreachable-code)

> ID：12811586
> 
> 赞同：3
> 
> 时间：2012-10-10T03:36:05.967
> 
> 标签：c

我有一个旧程序，它是通过 CFLAGS="-Wunreachable-code" 用 clang 构建的，它在某个 switch() 上显示一些警告，在休息时；它在哪里说它“永远不会被执行”，简单地删除无法访问的代码是否安全，或者本质上是 -Wunreachable-code beta？

具体来说，它对一些函数发出警告，即：在前一次返回后返回 -1，并在 switch() 内部中断

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T04:30:33.227

阅读代码，理解它，如果标记为无法访问的代码确实无法访问，并且不是因为逻辑错误而无法访问，那么您可以将其删除。如果您还没有阅读并理解代码，那么无论编译器怎么说，修改它都是不安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:46:15.270

我刚刚找到以下链接：

[http://old.nabble.com/gcc--Wunreachable-code-option-td31698329.html](http://old.nabble.com/gcc--Wunreachable-code-option-td31698329.html)

该选项已被删除，因为它不稳定。检查邮件线程以获取详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T03:45:43.140

我很确定警告是保守的，即除非编译器确定它是无法访问的代码，否则不会给出警告。

# php - 我的一个 HTML 脚本在 IE 中不起作用

> ID：12811587
> 
> 赞同：0
> 
> 时间：2012-10-10T03:36:08.527
> 
> 标签：php, batch-file

出于某种原因，当我在 IE 中运行它时，它只显示除嵌入式 php 代码之外的所有内容，有人知道我应该做什么吗？这是我的代码：

```
//Server stats display code:
// The page must be refreshed to get most recent checks.
<b>
Server Stats: |Runs every 10 minutes.|
<?php
check:
exec('C:\Users\<name>\Desktop\serverstats.bat');
include("C:\Users\<name>\Desktop\serverstats.txt");
sleep(600);
goto check;
?>
</b>
//.bat contents: |Just embed this somewhere in your site and set the directories.|
//@echo off
//ping 192.168.0.11 > C:\Users\<name>\Desktop\serverstats.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:46:11.867

PHP 是一种服务器端语言。它没有任何浏览器依赖性。如果您 100% 确定它可以在其他浏览器中运行，而不是在 IE 中，那么问题将出在周围的 HTML 代码上。您提供的代码块没有任何此类依赖于浏览器的 HTML。

既然您说“它只显示嵌入的 php 代码以外的所有内容”，那么您的服务器必须安装和配置 PHP。

您没有看到任何 PHP 内容，因为您的 PHP 正在生成一些错误，并且您的 PHP 设置正在掩盖错误。首先要做的是，通过将以下内容添加到您的 PHP 代码来打开 error_reporting：

```
 error_reporting(E_ALL); 
```

这会给你错误在哪里。

检查包含文件的路径。这是一种可能。

# java - 在android上将图像转换为二进制

> ID：12811589
> 
> 赞同：0
> 
> 时间：2012-10-10T03:36:16.517
> 
> 标签：java, android, bitmap, binary

如何将图像转换为二进制并显示结果`Text view`？

我试过这个源代码，但我不能继续，我是新手。

```
protected void onActivityResult(int codeA, int resl, Intent data){
    if(codeA == HASIL_LOAD_PICT && resl == RESULT_OK && null !=data){
        Uri choosepict = data.getData();
        String[] filepath = {MediaStore.Images.Media.DATA};
        Cursor cr = getContentResolver().query(choosepict, filepath, null, null, null);
        cr.moveToFirst();

        int colIndex = cr.getColumnIndex(filepath[0]);
        String filepathme = cr.getString(colIndex);
        cr.close();

        ImageView iv = (ImageView) findViewById(R.id.imgView);
        iv.setImageBitmap(BitmapFactory.decodeFile(filepathme));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:09:42.983

尝试以下图像：

```
 bmImage.setImageBitmap(BitmapFactory.decodeByteArray(byteImage2, 0, byteImage2.length)); 
```

# c++ - 多线程应用程序，我做对了吗？

> ID：12811594
> 
> 赞同：-1
> 
> 时间：2012-10-10T03:37:01.687
> 
> 标签：c++, arrays, multithreading

这是在一个数组上执行 4 个线程，然后将该数组分配给累积计数吗？我相信是的。我知道 rand() 不是线程安全的，一旦我知道逻辑是正确的，我就会改变它。

[这是一些关于通过引用线程传递数组](https://stackoverflow.com/questions/12801862/problems-passing-array-by-reference-to-threads) 然后 是[c++多线程数组](https://stackoverflow.com/questions/12810472/c-multithread-array)的问题的一些建议的集合

我知道这不是在练习最佳实践方法，但我只是试图让它启动并运行。

我想我让它运行正确，不得不将一个 for 计数器变量从 x 更改为 p，不知道为什么......还将 fHolder 移出 for 循环。

我的 fholder 总是结果为 0，我不知道为什么。我检查了计数器的值...

```
#include <process.h>
#include <windows.h>
#include <iostream>
#include <fstream>
#include <time.h>
//#include <thread>

using namespace std;

void myThread0 (void *dummy );
void myThread1 (void *dummy );
void myThread2 (void *dummy );
void myThread3 (void *dummy );

//only needed for shared variables
//CRITICAL_SECTION cs1,cs2,cs3,cs4; // global

int main()
{

    //InitializeCriticalSection(&cs1);
    //InitializeCriticalSection(&cs2);
    //InitializeCriticalSection(&cs3);
    //InitializeCriticalSection(&cs4);

    ofstream myfile;
    myfile.open ("coinToss.csv");

    int rNum;

    long numRuns;
    long count = 0;
    int divisor = 1;
    float fHolder = 0;
    long counter = 0;
    float percent = 0.0;

    //?
    unsigned threadID;

    //HANDLE hThread;
    HANDLE hThread[4];

    const int size = 100000;

    int array[size];

    srand ( time(NULL) );

    printf ("Runs (uses multiple of 100,000) ");
    cin >> numRuns;

    for (int a = 0; a < numRuns; a++)
     {

            hThread[0] = (HANDLE)_beginthread( myThread0, 0, (void*)(array) );
            hThread[1] = (HANDLE)_beginthread( myThread1, 0, (void*)(array) );
            hThread[2] = (HANDLE)_beginthread( myThread2, 0, (void*)(array) );
            hThread[3] = (HANDLE)_beginthread( myThread3, 0, (void*)(array) );

            //waits for threads to finish before continuing
            WaitForMultipleObjects(4, hThread, TRUE, INFINITE);

            //closes handles I guess?
            CloseHandle( hThread[0] );
            CloseHandle( hThread[1] );
            CloseHandle( hThread[2] );
            CloseHandle( hThread[3] );

        //dump array into calculations
        //average array into fHolder

            for (int p = 0; p < size; p++)
             {
                counter += array[p] == 2 ? 1 : -1;
                //cout << counter << endl;
                //cout << count << endl;
                //cout << p << endl;
                counter = count + counter;

                //divide into an exportable value
                //divides by 1,000,000, because each thread handles 250,000
                //cout << "Value " << x << ": " << array[x] << endl;
            }
            fHolder = counter / size;

        cout << "Final Count: " << counter << endl;
        cout << "fHolder: " << fHolder << endl;
        myfile << fHolder << endl;

    }

}
void myThread0 (void *param)
{
    //EnterCriticalSection(&cs1); //aquire the critical section object

    int *i = (int *)param;

    for (int x = 0; x < 25000; x++)
    {
        i[x] = rand() % 2 + 1;
        //cout << i[x] << endl;
    }
    //LeaveCriticalSection(&cs1); // release the critical section object

}

void myThread1 (void *param)
{
    //EnterCriticalSection(&cs2); //aquire the critical section object

    int *i = (int *)param;

    for (int x = 25000; x < 50000; x++)
    {
        //param[x] = rand() % 2 + 1;
        i[x] = rand() % 2 + 1;
        //cout << i[x] << endl;
    }
    //LeaveCriticalSection(&cs2); // release the critical section object

}

void myThread2 (void *param)
{
    //EnterCriticalSection(&cs3); //aquire the critical section object

    int *i = (int *)param;

    for (int x = 50000; x < 75000; x++)
    {
        i[x] = rand() % 2 + 1;
        //cout << i[x] << endl;
    }
    //LeaveCriticalSection(&cs3); // release the critical section object

}

void myThread3 (void *param)
{
    //EnterCriticalSection(&cs4); //aquire the critical section object

    int *i = (int *)param;

    for (int x = 75000; x < 100000; x++)
    {
        i[x] = rand() % 2 + 1;
        //cout << i[x] << endl;
    }
    //LeaveCriticalSection(&cs4); // release the critical section object

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:43:19.657

1.  有问题`_beginthread`，您应该`_beginthreadex`改用 。阅读这个新功能的文档以了解如何使用它。
2.  hThread 是 4 个句柄的数组，因此在调用时`WaitForMultipleObjects`应该有 4 个而不是 1，并且应该有四个调用`CloseHandle`来关闭所有四个句柄。
3.  考虑重命名该变量 ahThread（a 表示数组）或 rghThread（rg 表示范围）。
4.  所有四个线程都在对自己的数据进行操作。而且您的代码在实际使用这些数据之前故意等待所有四个线程完成。这意味着您不需要四个关键部分中的任何一个。不存在两个线程同时读取和写入某些数据的危险。
5.  那些关键部分用错了。在代码中只输入一个临界区是没有意义的，因为 CS 的目的是防止在 CS 下的当前代码执行时执行其他一些代码。代码中只有一处使用了 CS1，只有一处使用了 CS2，以此类推。只需删除它们，因为如 (4) 中所述，您实际上并不需要它们。
6.  标准输出是受其自己的内部临界区保护的单一资源，并在所有四个线程中使用。因此，所有四个线程都被迫在线同步`cout << i[x] << endl;`，因此运行速度比必要的慢。
7.  line 的问题`cout << i[x] << endl;`在于它不是原子操作，它由四个线程并发运行。`i[x]`一个线程可能会在另一个线程的写入和写入之间写入整行`endl`，这将产生不希望的结果。我会`cout`完全从线程中删除。
8.  在问题的当前修订版（修订版 3）中存在一个错误，for 循环在 CloseHandle 之后过早结束。该循环应包含进行计数的内部循环。
9.  与线程无关，但考虑这行代码而不是当前存在的九行代码：`counter += array[x] == 2 ? 1 : -1;`. `count`这里不需要变量。
10.  所有四个线程都运行相当相似的代码。考虑将参数`param`用作指向为此线程指定的数组部分开头的指针。这将允许您只有一个由四个线程运行的函数，所有四个线程的参数值都不同。

# javascript - jQuery 缩略图滚动条溢出

> ID：12811596
> 
> 赞同：1
> 
> 时间：2012-10-10T03:37:08.833
> 
> 标签：javascript, jquery

我正在尝试使用[jQuery thumbnail scroller](http://manos.malihu.gr/jquery-thumbnail-scroller)，但是一旦图像的宽度超过容器宽度，而不是滚动，溢出就会位于滚动器下方。鉴于我刚刚开始学习 JavaScript，我一直在对其进行一些调整，但到目前为止还没有运气。该网站的地址是[http://stolenrecord.com/reviews.php?page=1](http://stolenrecord.com/reviews.php?page=1)。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:13:27.977

您的 thumbnailScroller.js 脚本未加载到提供的页面上。

改变你`jquery.thumbnailScroller.js`喜欢`js/jquery.thumbnailScroller.js`其他的

# c - 汇编中参数的 GDB 字符集

> ID：12811597
> 
> 赞同：0
> 
> 时间：2012-10-10T03:37:09.030
> 
> 标签：c, assembly, gdb

我已经在 GDB 和 sscanf 函数内部进行了反汇编，我得到：

```
 at vfscanf.c:603
_IO_vsscanf (string=string@entry=0x804b760 "1 \\233 200", 
    format=format@entry=0x804a21e "%d %c %d", 
    args=args@entry=0xbffff0a8 "\304\360\377\277\277\360\377\277\300\360\377\277\224\361\377\277\310\360\377\277\201\222\004\\\351") at iovsscanf.c:47 
```

我正在尝试获取 args 中的信息，但我不确定如何将该字符串转换为可读的内容。我真正想要得到的是 sscanf 保存到的地址。我假设这些地址在这个字符串中表示。这是我在查找字符集时得到的：

```
(gdb) show charset
The host character set is "auto; currently ANSI_X3.4-1968".
The target character set is "auto; currently ANSI_X3.4-1968".
The target wide character set is "auto; currently UTF-32". 
```

我正在使用 Linux，IA-32。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:53:56.177

`args`可能是一个[`va_list`](http://www.cplusplus.com/reference/clibrary/cstdarg/va_list/)（或一个`_IO_va_list`？）。它是一种不透明的类型，因此让 gcc 告诉您其中的内容可能是一个技巧。您可能可以调用它的访问器来找出 args 是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:59:05.457

```
echo $'\304\360\377\277\277\360\377\277\300\360\377\277\224\361\377\277\310\360\377\277\201\222\004\\\351'|od -t x4  

0000000 bffff0c4 bffff0bf bffff0c0 bffff194
0000020 bffff0c8 5c049281 00000ae9
0000032 
```

然后您可以通过以下方式检查内容：

```
print *(int*)(0xbffff0c4) 
```

或使用 gdb 的内部 printf 命令

```
printf "%s\n", 0xbffff0bf 
```

甚至通过在调试下的程序中调用 printf（如果已链接）

```
call printf("%8.3f\n",*(float*)(0xbffff194)) 
```

同样，直接使用字符串（我将使用 argv[0]）：

```
print argv[0]
"/home/asu..."
// assuming "/hom" was a proper address...
print **(int**)(argv[0]+0)
// assuming "e/as" was a proper address...
print **(int**)(argv[0]+4) 
```

# php - 在 DOMDocument::saveXML 中删除和标记

> ID：12811604
> 
> 赞同：3
> 
> 时间：2012-10-10T03:38:12.330
> 
> 标签：php, dom

我有一部分 html 结构不完整。例子：

```
<div id='notrequired'>
    <div>
        <h3>Some examples :-)</h3>
        STL is a library, not a framework.
    </div> 
    </p>
    </a>
    <a target='_blank' href='http://en.wikipedia.org/wiki/Library_%28computing%29'>Read more</a>;
</div>
<a target='_blank' href='http://en.wikipedia.org/wiki/Library_%28computing%29'>Read more</a>"; 
```

正如你在这里看到的，我有意想不到`</p>`的`</a>`标签。

我尝试了一段代码来删除它`<div id='notrequired'>`并且它可以工作，但无法精确处理它。

这是片段代码：

```
function DOMRemove(DOMNode $from) {
            $from->parentNode->removeChild($from);
        }

        $dom = new DOMDocument();
        @$dom->loadHTML($text); //$text contains the above mentioned HTML

        $selection = $dom->getElementById('notrequired');
        if($selection == NULL){
            $text = $dom->saveXML();
        }else{
            $refine = DOMRemove($selection);
            $text = $dom->saveXML($refine);
        } 
```

问题是`$dom->saveXML`另存为 HTML 内容：

```
 <?xml version="1.0" standalone="yes"?>
        <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
        <html>

<body>
            <a target="_blank" href="http://en.wikipedia.org/wiki/Library_%28computing%29">Read more</a>

    </body>    
    </html> 
```

我只需要：

```
<a target='_blank' href='http://en.wikipedia.org/wiki/Library_%28computing%29'>Read more</a> 
```

而不是`<HTML>`and`<BODY>`标签。

我错过了什么？还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:55:30.613

好的..我想我想出了一个解决方案。方法可能不正确，但是，它确实有效！

正如[Hakre](https://stackoverflow.com/questions/12811604/remove-html-and-head-tags-at-domdocumentsavexml#comment17327292_12811604)指出的那样，它与[PHP 的 DomDocument 中的 innerHTML 完全相同？](https://stackoverflow.com/questions/2087103/innerhtml-in-phps-domdocument), 它不是完全重复的，但它给了我使用这个想法的提示。感谢您的建议。

它帮助我在下面制定了一个解决方案：

```
function DOMRemove(DOMNode $from) {
    $from->parentNode->removeChild($from);
}

function DOMinnerHTML($element) 
{ echo "Ashwin";
    $innerHTML = ""; 
    $children = $element->childNodes; 
    foreach ($children as $child) 
    { 
        $tmp_dom = new DOMDocument(); 
        $tmp_dom->appendChild($tmp_dom->importNode($child, true)); 
        $innerHTML.=trim($tmp_dom->saveHTML()); 
    }
    return $innerHTML; 
}

$dom = new DOMDocument();
$dom->preserveWhiteSpace = false; 
@$dom->loadHTML($test);

$a = $dom->getElementById('step');

$b = DOMRemove($a);
$c = $dom->saveXML($b);

$domTable = $dom->getElementsByTagName("body"); 

foreach ($domTable as $tables) 
{ 
    $x = DOMinnerHTML($tables); 
    echo $x; 
} 
```

如果输入是：

```
<div id='step'>
    <div >
        <h3>Some examples :-(</h3>
        Blah blah blah...
    </div> </p>
    </a>
    <a target='_blank' href='#'>Read more</a>;
</div>
<div id='step2'>
    <div>
        <h3>Some examples :-) :-D</h3>
        Blah2 blah2 blah2...
    </div> </p> </a>
</div>
<a target='_blank' href='#'>Read more</a>
<a target='_blank' href='#'>Read more</a>
<a target='_blank' href='#'>Read more</a> 
```

正如预期的那样，输出是：

```
<div id="step2">
    <div>
        <h3>Some examples :-) :-D</h3>
        Blah2 blah2 blah2...
    </div> 
</div>
<a target="_blank" href="#">Read more</a>
<a target="_blank" href="#">Read more</a>
<a target="_blank" href="#">Read more</a> 
```

该解决方案有效，但可能不是最佳的。**有什么想法吗？**

# php - 获取同一id的最高分，然后与其他id比较

> ID：12811606
> 
> 赞同：-1
> 
> 时间：2012-10-10T03:38:17.593
> 
> 标签：php, mysql

桌子 ：

```
========================================
|id| document_id | sentence_id | score |
========================================
|1 |   3         |     1       | 0.324 |
|2 |   3         |     2       | 0.201 |
|3 |   5         |     1       | 0.181 |
|4 |   5         |     2       | 0.402 |
======================================== 
```

我想在每个中获得最高分，`document_id`然后将结果与其他结果进行比较`document_id`。我的目标是获得序列`document_id. so from the example, the result must be 5 3`

```
$q = mysql_query("SELECT document_id, MAX(score) as max_score FROM `tb_score` GROUP BY document_id ");
while ($row = mysql_fetch_array($q)) {
   $min = $row['max_score'];
} 
```

我仍然得到错误的结果。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:41:35.727

您似乎描述的 SQL 是：

```
SELECT document_id
        , MAX(score) as max_score
    FROM tb_score
    GROUP BY document_id
    ORDER BY MAX(score) DESC --or max_score, I'm not sure which MySQL will accept. 
```

这有帮助吗？

另外： [MySQL](http://php.net/manual/en/function.mysql-query.php)扩展在 PHP 中已弃用，您应该使用[MySQL 改进](http://www.php.net/manual/en/book.mysqli.php)或[PHP 数据对象](http://www.php.net/manual/en/ref.pdo-mysql.php)来完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:16:50.817

[您不能](http://dev.mysql.com/doc/refman/5.5/en/order-by-optimization.html) [在`ORDER BY`](http://www.geeksww.com/tutorials/database_management_systems/mysql/tips_and_tricks/mysql_dateformat_function_and_order_by.php). 所以你必须使用`MAX(score)`in `ORDER BY`。像这样：

```
SELECT document_id ,MAX(score) as Highscore
FROM tb_score
GROUP BY document_id
ORDER BY MAX(score) DESC; 
```

或者使用子查询你可以做同样的事情。

```
SELECT * FROM
(
SELECT document_id ,MAX(score) as Highscore
FROM tb_score
GROUP BY document_id
) A
ORDER BY Highscore DESC; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/f8171/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T03:52:24.667

SQL必须是这样的。

```
SELECT document_id, MAX(score) as max_score 
FROM `tb_score` GROUP BY document_id
ORDER BY max_score DESC 
```

# vba - 298 _IsPressed 或 HotKeySet 在服务中调用不工作

> ID：12811612
> 
> 赞同：0
> 
> 时间：2012-10-10T03:39:01.977
> 
> 标签：vba, autoit

我很困惑为什么任何形式的键盘按下在服务中都不起作用，谁能帮我找出我做错的地方？

```
HotKeySet("^+!d", "Func1") ;crl-Shift-Alt-d
...
While $ServiceRunning

   ;Or --->  If _IsPressed('76') Then
               Func1()  
   Sleep(1000)
WEnd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:44:40.800

我不太确定，但我假设，如果您的脚本真的作为服务运行，那么它使用的帐户（例如本地系统）比实际登录的用户要多。服务/进程应该不可能用户 x 的会话来获取用户 y 的会话的密钥（甚至其他信息）。

您可以尝试使用与您尝试获取密钥的用户相同的帐户运行服务，或者只是让服务为收集密钥的相应用户会话启动一个进程。

# grails - 将值从 gsp 传递给控制器

> ID：12811614
> 
> 赞同：2
> 
> 时间：2012-10-10T03:39:38.960
> 
> 标签：grails, export

我正在为我的 grails 应用程序使用导出插件。如何将列表实例传递给控制器​​？我的 gsp 中有这个：

```
 <g:set var="fruitInstanceList" name="fruitInstanceList" value="${fruitInstanceList}"/>
    <export:formats formats="['csv', 'excel', 'ods', 'pdf', 'rtf', 'xml']"/> 
```

在我的控制器中：

```
 if(params?.format && params.format != "html"){
    response.contentType = grailsApplication.config.grails.mime.types[params.format]
    response.setHeader("Content-disposition", "attachment; filename=books.${params.extension}")
        exportService.export(params.format, response.outputStream,params.fruitInstanceList, [:], [:])
    } 
```

该代码不起作用，因为fruitInstanceList 没有传递给控制器​​。我怎样才能做到这一点？使用上面的代码将值从 gsp 传递到控制器？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T14:11:55.200

您不必将报告数据一直传递回控制器。您从控制器获得了这些数据（此处为“fruitInstanceList”），可能基于某些过滤器选项。您需要做的就是再次向控制器发布过滤器选项，然后控制器将获取相同的数据（即“fruitInstanceList”），然后将其导出为您想要的格式。骨架代码如下所示：

**报告过滤器.gsp**

```
<form name="fruitsFilterForm" action="fruitsReport" controller="report">
    <input type="text" name="search" value="${params.search}" />
    <input type="submit" value="Show Report" />
</form> 
```

**水果报告.gsp**

```
<form name="reportExportForm" action="exportFruitsReport" controller="report">
    <input type="text" name="search" value="${params.search}" />
    <input type="hidden" name="format" value="${defaultFormat}" />
    <input type="submit" value="Export" />
</form> 
```

**报告控制器.groovy**

```
def reportService
def fruitsReport() {
    def fruitInstanceList = reportService.fetchFruitsList(params);
    [fruitInstanceList: fruitInstanceList, params: params, defaultFormat: "excel"]
}

def exportFruitsReport() {
    def fruitInstanceList = reportService.fetchFruitsList(params);

    /** All your code to export the fetched fruitInstanceList **/        
} 
```

**报告服务.groovy**

```
def fetchFruitsList(params) {
    return Fruit.findAll(/* your query based on the params */)
} 
```

**笔记**

如果您仍然坚持将数据从 gsp 传递到控制器，那么您仍然可以通过使用 ajax 调用发布您的列表来做到这一点。（但这将是一种肮脏的方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:21:25.903

您不能将列表作为参数从视图传递。由于参数将作为 get 转到控制器，因此参数将连接到 URL，并将转换为字符串。

所以你想要做的是，你需要在你使用导出代码的那个动作中执行逻辑。

即，您如何在控制器中获取列表并将其发送到视图？同样的方式，在这里你必须做一些业务逻辑并获取列表，然后将其发送到导出插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:33:14.320

此变量仅对页面可用。您可以使用参数传递它

```
 <export:formats formats ="[]", params ="[fruitInstanceList:${fruitInstance}]"/> 
```

# java - Eclipse：手动选择可执行jar文件的主类

> ID：12811618
> 
> 赞同：8
> 
> 时间：2012-10-10T03:40:59.550
> 
> 标签：java, eclipse, executable-jar

我有 java 项目，以及许多具有 main 方法的类（仅用于测试目的）。当我通过 Eclipse 创建可执行 jar 文件时，Eclipse 会自动选择哪个文件是主类。（而且经常是错误的）。

还有另一种方法是在 Jar 文件中更改清单文件中的主类。但是，它太方便了。所以，我的问题是：如何在创建 Jar 文件时手动选择它。

谢谢 ：）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T03:42:37.247

Eclipse 将设置您告诉它设置的类。该向导有一个用于执行此操作的按钮。
菜单：

*   出口
*   Java、JAR 文件
*   下一步（选择要包含的类）
*   输入 jar 的名称和路径
*   下一个（**未**完成）
*   下一个
*   浏览主类。

或者，如果您改为创建“可运行 JAR”

*   出口
*   Java，可运行的 JAR 文件
*   启动配置——在这里选择你的主类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:43:14.427

如果导出 Runnable Jar，则可以指定启动配置。然后，此启动配置可以指定一个可执行的主类。

# mercurial - 如何从 Kiln 中删除新忽略的文件？

> ID：12811625
> 
> 赞同：0
> 
> 时间：2012-10-10T03:42:24.863
> 
> 标签：mercurial, kiln

我想知道为什么我的推送花了这么长时间才到 Kiln，但是当我意识到我正在上传不必要的构建工件时，为时已晚。推送完成。我在本地存储库上创建了一个忽略文件并使用了“hg purge”。我再次提交并将其推送到 Kiln，但被忽略的文件仍然存在。如何永久删除它们，包括所有历史记录，这样我就不会在 Kiln 上拥有这个巨大的 repo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:51:10.500

如果我有这个问题，我会从 Kiln 中删除整个存储库（如果你有烫发它），并从本地新克隆它，以防你在本地拥有整个存储库。但是我对Kiln了解不多，所以可能会有一些限制。

# iphone - 权限被拒绝-iPhone 冻结-iOS6

> ID：12811626
> 
> 赞同：0
> 
> 时间：2012-10-10T03:42:28.597
> 
> 标签：iphone, ios, ios6

我已经将我的应用程序下载到 iPhone 上，现在它说权限被拒绝，我的 iPhone 也冻结了！

有什么方法可以让我的 iPhone 恢复工作吗？为什么出现权限被拒绝消息，有什么想法吗？即使我无法关闭我的 iPhone？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:46:13.273

您可以在 Apple 的网站上找到对冻结的 iPhone 进行故障排除的说明：[冻结或无响应的 iPhone](http://www.apple.com/support/iphone/assistant/phone/)

基本上，按住主页和电源按钮至少十秒钟。

如果您需要帮助解决它，您需要提供有关“权限被拒绝”错误的更多详细信息。

# django - django模板 - 在字符串变量中解析变量

> ID：12811629
> 
> 赞同：4
> 
> 时间：2012-10-10T03:42:33.993
> 
> 标签：django, templates, filter, render, templatetag

我正在将动态内容（从数据库）拉到模板中。您可以将其视为一些简单的 CMS 系统。内容字符串包含一个模板变量。像这个（简化案例）：

```
vars['current_city'] = "London"
vars['content'] = 'the current city is: {{current_city}}'  #this string comes from db
return render_template(request, 'about_me.html',vars) 
```

然后在模板中：

```
{{content}} 
```

输出明显：
当前城市是：{{current_city}}
预期：
当前城市是：伦敦

我的问题 - 有没有办法在另一个变量中呈现变量名？使用自定义模板标签/过滤器似乎是一个好主意，但我试图创建一个没有成功......有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T04:13:05.897

拥有一个自定义标签可能可以解决这个问题，但是它可能会变得有点复杂，因为这样就有可能在一个模板中拥有一个完整的模板，因为没有什么限制你将所有模板保存在 db 中（可能包括其他模板标签）。我认为最简单的解决方案是从数据库手动渲染模板字符串，然后将其作为变量传递给主模板。

```
from django.template import Template, Context
...
context = {
    'current_city': 'London'
}
db_template = Template('the current city is: {{current_city}}') # get from db
context['content'] = db_template.render(Context(context))
return render_template(request, 'about_me.html', context) 
```

笔记：

如果您确实遵循这条路，这可能不是很有效，因为每次执行视图时，都必须编译 db 模板。因此，您可能想要缓存 db 的编译版本，然后将适当的上下文传递给它。下面是很简单的缓存：

```
simple_cache = {}

def fooview(request):
    context = {
        'current_city': 'London'
    }
    db_template_string = 'the current city is: {{current_city}}'
    if simple_cache.has_key(db_template_string):
        db_template = simple_cache.get(db_template_string)
    else:
        simple_cache[db_template_string] = Template(db_template_string)
    context['content'] = db_template.render(Context(context))
    return render_template(request, 'about_me.html', context) 
```

# python - Numpy 2D数组按行减法

> ID：12811631
> 
> 赞同：5
> 
> 时间：2012-10-10T03:42:52.037
> 
> 标签：python, numpy

我正在努力矢量化以下操作。我有一组 x,y,z 距离，我需要找到每个向量之间的差异。

```
temp_result = np.array([[0.8, 0., 1.], [0., -0.6, 1.],[0.8, 0., 1.]]) 
```

我打算做的是减去而不使用 for 循环迭代。

```
 temp_result[0] - temp_result[0]
 temp_result[0] - temp_result[1]
 temp_result[0] - temp_result[2]
 temp_result[1] - temp_result[0]
 temp_result[1] - temp_result[1]
 temp_result[1] - temp_result[2]
 temp_result[2] - temp_result[0]
 temp_result[2] - temp_result[1]
 temp_result[2] - temp_result[2] 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:49:55.983

这是一个很好的基于重塑的技巧：

```
arr = temp_result
diffs = arr[:,None,:] - arr[None,:,:] 
```

然后在中找到`arr[i]`和之间的向量差。`arr[j]``diffs[i,j]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:56:55.340

查看 scipy.spatial.distance，你有所有距离和所有距离的函数。

# javascript - 如何编写一个正则表达式来删除Javascript中字符串中的第一个数字和后面的所有内容

> ID：12811637
> 
> 赞同：-2
> 
> 时间：2012-10-10T03:44:07.497
> 
> 标签：javascript, regex

如何编写一个正则表达式来删除Javascript中字符串中的第一个数字和后面的所有内容？

例子：

John.Doe12@somewhere.net

至

约翰·多伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:46:00.863

你可以`.replace()`这样使用：

```
var result = str.replace(/\d+.*$/, ""); 
```

工作示例：http: [//jsfiddle.net/jfriend00/97kMW/](http://jsfiddle.net/jfriend00/97kMW/)

# forms - TForm 上的 Align 和 Anchor 属性有什么用？

> ID：12811640
> 
> 赞同：6
> 
> 时间：2012-10-10T03:45:14.420
> 
> 标签：forms, delphi, alignment

可以在 TForm 上设置对齐方式，例如将一个表单设置为 alTop，将另一个表单设置为 alClient - 这两种表单以明显的方式占据了整个屏幕区域。这是在应用程序中做的明智之举吗？

我还注意到锚点暴露在表单上——但我想不出它们有什么用处（分辨率变化？MDI 应用程序？）有什么想法吗？

编辑：我制作了一个[关于这篇文章的视频，](http://youtu.be/Jdf5JVAXb0Q)以使事情更清楚。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T05:06:13.020

你可以通过设置它的属性来使用一个`TForm`像普通控件一样的控件：`Parent`

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  frmEmbed:= TForm.Create(Self);
  frmEmbed.Parent:= Self;
  frmEmbed.Width:= 50;
  frmEmbed.Height:= 50;
  frmEmbed.Align:= alRight;
  frmEmbed.Anchors:= [akLeft, akBottom];
  frmEmbed.Visible:= True;
end; 
```

您应该注释`frmEmbed.Align:= alRight;`行以查看`Anchors`属性如何工作。

* * *

如果您对使用上述内容感兴趣：没有标题栏的父表单是`TFrame`; 框架在早期的 Delphi 版本中不可用，因此使用了父窗体。您可以在遗留代码中找到它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T06:57:41.667

您可以将一个表单放在另一个表单中。不知道这会有多好。在 Delphi1 时代，有特殊的 3rd-party 控件来路由事件。今天，除了模态对话框之外，它似乎或多或少是开箱即用的。试试这样：

```
procedure TMainForm.Button1Click(...);
begin
  with TForm.Create(Self) do begin
       Caption := 'Internal one';
       Parent := Self;
       Visible := True;
  end;    
end; 
```

也许锚点和对齐在这个设置中是有意义的。毕竟，这似乎是如何实现新的“单窗口”IDE 布局的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T17:33:25.220

一个简单的例子是无标题的表单（例如 win-8 metropolis 样式），您可以将退出按钮锚定在右上角。

但最好的用途是简化制作响应大小变化的复杂表单...使用 akLeft 和 akRight，您可以使水平控件水平填充空间。使用所有 4 个锚点类似于将客户端设置为 alclient，只是不需要用其他面板包围它。

你可以用锚做的大部分事情也可以用许多面板来完成，但是随着表单变得越来越复杂，它会变得很乱，有时需要面板上的几个级别的面板。

当然，使用面板和锚点的组合通常是最好的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T09:15:23.070

您可以将表单放置在任何其他容器组件中。

这对于停靠很有用，您可以将表单停靠在页面控件选项卡或任何地方。

作为 TFrame 的替代品，这也很有用：如果您将框架设计为 TForm 而不是 TFrame，则它在设计时将不可嵌入，因此无法被设计时编辑器编辑/破坏。

嵌入式 TFrame 可以以它们嵌入的形式重新定义它们的属性或事件，这并不总是可取的或实用的，尤其是当您希望框架易于升级或重构时。更改的嵌入框架属性最终出现在 DFM 中，而不是 PAS 中，因此在编译时看不到，并且重构/重命名/等并不简单。

# javascript - onMouseover 自动解析内容的自定义字典应用工具提示？

> ID：12811646
> 
> 赞同：0
> 
> 时间：2012-10-10T03:45:48.350
> 
> 标签：javascript, jquery, ruby-on-rails-3, jquery-plugins, coffeescript

我有一个网站使用不“常见”的术语，有时需要澄清。我考虑过创建一个 JavsScript 解决方案，该解决方案将从字典文件中读取术语，解析每个页面，然后应用突出显示和`onMouseover`工具提示，以便用户轻松阅读术语定义。

***是否有已经存在的库来完成此任务？*** 我见过一些半生不熟的选择，但就我正在寻找的东西而言，没有什么是非常干净和全面的。

举一个示例场景，我希望解决方案具有类似的功能：我将提供一个数据/定义文件，例如：

```
"some term 1", "the definition will be explained over here in verbose terms"
"some term 2", "the definition will be explained over here in verbose terms"
"some term 3", "the definition will be explained over here in verbose terms" 
```

然后 JavaScript 在页面加载时会解析这个定义文件。然后它会解析 dom 的内容并隔离每个术语 ( `some term 1`, `some term 2`, `etc.`)，用适当的定义文本填充术语的工具提示。显然，它的优雅之处在于它只需要更新定义文件，并且所有站点内容都会有一个方便的字典供读者使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:39:01.713

我会为此使用 jQuery UI...

[http://jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)

至于字典部分，我将创建一个脚本，在每个页面上加载并查找特定单词的存在并根据 JSON 文件检查它们。你要代码吗？还是概念足够好？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:49:45.297

您可以使用[Tipsy](http://onehackoranother.com/projects/jquery/tipsy/)并将 添加`clarification`到元素`title`中。
这是一个`tooltip`显示在`hover`.

# linux - 如果网络出现故障，socket 会发生什么

> ID：12811653
> 
> 赞同：3
> 
> 时间：2012-10-10T03:46:34.933
> 
> 标签：linux, sockets, network-programming, keep-alive

假设一个简单的网络模型：A 已经成功地创建了一个到 B 的 TCP 连接，并且他们正在像这样相互通信

`A <----------> B`

我知道如果 A 上的程序死掉（例如核心转储），那将导致向 B 发送 RST 数据包。因此，对 B 的任何读取尝试都会导致 EOF，而对 B 的任何写入尝试都会导致 SIGPIPE。我对吗？

但是，如果假设 A 上的网络出现故障（例如电缆/路由器故障），那么 B 的读/写尝试会发生什么情况？在我的情况下，所有套接字都设置为非阻塞。结果，我无法检测到网络错误吗？

顺便说一句，我注意到`SO_KEEPALIVE`套接字中有一个选项可能对我有用[http://tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/](http://tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/)。但我想知道如果我将探测间隔设置为 2~3 秒（默认为 75 秒），成本会是多少？似乎间隔配置是全局配置，那么这会影响机器上的所有套接字吗？

最后一个问题......假设网络已经崩溃，任何写入尝试都会在一段时间后导致 EPIPE。但是，如果我不尝试写入，而是将此套接字放入 epoll 设备，那么会发生什么？epoll_wait 会返回 EPOLLHUP 或 EPOLLERR 事件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T05:54:08.747

TCP 连接还有许多其他方式可以在未被检测到的情况下失效

> *   有人拔出中间的网线。
> *   另一端的电脑被核弹了。
> *   中间的 nat 网关静默断开连接
> *   另一端的操作系统严重崩溃。
> *   FIN 数据包丢失。
> *   不可检测的错误：端点之间的路由器可能会丢弃数据包。（包括控制数据包） [ref](https://stackoverflow.com/questions/2428804/tcp-socket-closed?answertab=active#tab-top)

在所有情况下，当您尝试通过程序中的 SIGPIPE 错误在套接字上**写入**并终止它时，您都可以知道它。

通过 read() 无法知道对方是否存活。为什么 SO_KEEPALIVE 有用。Keepalive 是非侵入性的，在大多数情况下，如果您有疑问，可以将其打开，而不会有做错事的风险。但请记住，它会产生额外的网络流量，这可能会对路由器和防火墙产生影响。

这也会影响您机器上的所有套接字！（您是对的）。并且因为 SO_KEEPALIVE 增加了流量并消耗了 CPU。最好设置 SIGPIPE 句柄，如果应用程序有机会写入断开的连接。

> 还要在应用程序的合理位置使用 SO_KEEPALIVE。在整个连接期间使用它是很糟糕的（即当服务器在客户端查询上长时间工作时使用 so_keepalive）。
> 
> 设置探测间隔取决于您的应用程序或应用层协议。

尽管启用了 TCP keepalive，但您最终会检测到它——至少在几个小时内。

**假设网络发生故障，但是，不是尝试写入，而是将套接字放入某个 epoll 设备中：**

epoll 中的第二个参数：

```
 n = epoll_wait (efd, events, MAXEVENTS, -1); 
```

使用正确的事件相关代码设置，良好的做法是仔细检查此代码，
如下所示。

```
n = epoll_wait (efd, events, MAXEVENTS, -1);  
for (i = 0; i < n; i++)  
{   
    if ((events[i].events & EPOLLERR) ||
          (events[i].events & EPOLLHUP) ||
          (!(events[i].events & EPOLLIN)))
    {
          /* An error has occured on this fd, or the socket is not
             ready for reading (why were we notified then?) */
      fprintf (stderr, "epoll error\n");
      close (events[i].data.fd);
      continue;
    }

    else if (sfd == events[i].data.fd)
    {
          /* We have a notification on the listening socket, which
         means one or more incoming connections. */

         // Do what you wants
     }
} 
```

其中**EPOLLRDHUP** 的意思是：
Stream socket peer 关闭连接，或者关闭写入一半的连接。（此标志对于编写简单代码以在使用边缘触发监视时检测对等关闭特别有用。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T03:56:21.760

> 我知道如果 A 上的程序死掉（例如核心转储），那将导致向 B 发送 RST 数据包。因此，对 B 的任何读取尝试都会导致 EOF，而对 B 的任何写入尝试都会导致 SIGPIPE。我对吗？

部分。RST 在读取时会导致 ECONNRESET，而不是 EOF，在写入时会导致 EPIPE。

> 但是，如果假设 A 上的网络出现故障（例如电缆/路由器故障），那么 B 的读/写尝试会发生什么情况？在我的情况下，所有套接字都设置为非阻塞。结果，我无法检测到网络错误吗？

单独读取是不可能的，除非您使用读取超时，例如通过 select()，并将超时视为失败，但它可能不是。在写入时，您最终会得到一个 EPIPE，但由于缓冲和重试，可能需要一些时间和多次尝试。

# css - 如何使用 CSS 强制执行绝对定位和行高？

> ID：12811657
> 
> 赞同：5
> 
> 时间：2012-10-10T03:46:47.930
> 
> 标签：css, jquery, positioning

我创建了一个运行良好的 jQuery Sliding Drilldown 插件，除了一个部分：箭头的定位。如果我更改它们包含的元素的字体大小/行高，它们就会移动，这对我来说没有意义。谁能告诉我为什么？line-height 实际上会影响元素中 0,0 的位置吗？还是我错过了其他事情？

**而且 - 这是真正的问题 - 我可以用CSS**做我想做的事情吗？我知道我可以使用 JavaScript 动态定位它们，但我试图避免这种情况。

这是一个非常简单的页面上的插件：

[http://thomporter.github.com/jquery-sliding-ajax-drilldown/demos/basic-plain.html](http://thomporter.github.com/jquery-sliding-ajax-drilldown/demos/basic-plain.html)

如果您愿意，还可以查看我用来生成 CSS的[Sass ，它位于 repo 中：](http://sass-lang.com/)

[https://github.com/thomporter/jquery-sliding-ajax-drilldown/blob/master/src/lib/css/jquery.sliding-ajax-drilldown.scss](https://github.com/thomporter/jquery-sliding-ajax-drilldown/blob/master/src/lib/css/jquery.sliding-ajax-drilldown.scss)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:59:16.380

刚刚做了一些测试，这是因为您使用 em 到绝对位置。例如，如果将其更改为 px，并修复同样基于 em 的 padding-left，则在更改字体大小时箭头会停止移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:13:30.763

您的问题在于您设置`font-size`了`<a>`标签，这些标签都设置为`display:block`并容纳了您需要的其他元素。

`em`当您增加`<a>`元素中的字体大小时，会展开。由于您的箭头图像也嵌套在您的`<a>`元素中并且是绝对定位的，因此如果容器框改变大小，箭头的位置也会改变。无论您用于大小、边距、填充等的单位类型如何，都会发生这种情况。

尝试将文本包含在它自己的元素中。将你的 CSS 分成排版样式和定位样式，将每一行的文本包装在一个 span 元素中。

```
<li>
    <a href="#" data-id="BMW">
        <span>BMW</span>
        <span></span>
    </a>
</li> 
```

然后将您的单独字体样式应用到此范围：

```
.ajaxdrilldown ul li a span:first-child {
    display:inline-block; /* IE7 will need a hack for this */
    position:relative;
    left:0.3em;
    font-size:1.4em;
    ...
} 
```

这将允许文本在其自身元素的范围内自由扩展，而不会影响其他项目的布局。

您还需要在第 98 行更改此样式：

```
.ajaxdrilldown div ul li a span 
```

沿着这些思路

```
.ajaxdrilldown div ul li a span:last-child 
```

阻止跨度污染彼此不同的风格

附带说明一下，您不需要在 display:block; 元素上设置 width:100%。完全删除宽度声明，因为它是不必要的，并且可能会给其他样式的人带来麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:19:58.863

据我了解，我创建了 jsfiddle。请看一下，让我这是您要寻找的东西或其他东西。

**演示**

[http://jsfiddle.net/saorabhkr/Xbydb/](http://jsfiddle.net/saorabhkr/Xbydb/)

用行高更新了 jsfiddle。我想建议将相同的行高放在内容高度上。请看一下新的jsfiddle。

[http://jsfiddle.net/saorabhkr/Xbydb/2/](http://jsfiddle.net/saorabhkr/Xbydb/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:34:41.593

对于使用 CSS 的绝对位置，您必须为其设置此样式

```
position:absolute;
left:0px;
z-index:10; 
```

并且您必须为其父级设置此样式

```
position:relative; 
```

最好的祝福

# javascript - Android Phonegap 导航和保持加载功能跨页面运行

> ID：12811658
> 
> 赞同：1
> 
> 时间：2012-10-10T03:47:50.800
> 
> 标签：javascript, android, html, cordova, html-frames

好的，所以我环顾四周，希望有人可以帮助我解决这个问题。我正在开发一个管理一堆小应用程序的应用程序。与返回 JSON 信息的服务交互的应用程序之一。问题是，当有人刷新以重新获取信息时，该服务需要大约一分钟的时间来处理然后返回。假设用户会一直在那个屏幕上等待是愚蠢的。

我的问题：如何让用户点击该页面上的刷新按钮并在该呼叫仍在处理时浏览应用程序的其余部分，并且用户可以随时返回到它/她想要的。我研究了框架，我认为这可能是我最终的目标，但我对它们知之甚少，所以我的研究非常不成熟。

有没有人处理过这个问题，可以给我一些不同/正确方向的信息或指示？

# javascript - 带有html5和JS的子窗口？

> ID：12811659
> 
> 赞同：4
> 
> 时间：2012-10-10T03:47:57.317
> 
> 标签：javascript, html

在 Silverlight 中，可以通过单击按钮在您的应用程序中创建一个子窗口。所以我只是想知道....是否有可能在 html5 中使用 javascrip？

子窗口只是一个可以移动的窗口，它可以显示诸如说........与另一个在线用户的文本聊天之类的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T15:37:31.913

当然，`window.open`。 [https://developer.mozilla.org/en-US/docs/Web/API/Window.open](https://developer.mozilla.org/en-US/docs/Web/API/Window.open)

**例子：**

```
var windowObjectReference;
var strWindowFeatures = "menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes";

function openRequestedPopup() {
  windowObjectReference = window.open("http://www.cnn.com/", "CNN_WindowName", strWindowFeatures);
} 
```

请记住，某些浏览器会阻止此操作。

# actionscript-3 - 全屏 OSMF 视频播放器

> ID：12811661
> 
> 赞同：0
> 
> 时间：2012-10-10T03:48:06.120
> 
> 标签：actionscript-3, air, osmf

我正在使用 OSMF 框架开发 Air 视频播放器——主要是遵循这里的代码——http: [//cookbooks.adobe.com/post_HTTP_Streaming_in_OSMF-17636.html](http://cookbooks.adobe.com/post_HTTP_Streaming_in_OSMF-17636.html)。

我正在努力寻找一种让视频全屏显示的方法。我应该使用哪些参数让视频适合整个屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:47:22.707

尝试这个;

```
stage.displayState=StageDisplayState.FULL_SCREEN;

container.width = stage.stageWidth;
container.height = stage.stageHeight; 
```

# c# - 在 ASP.NET Facebook 应用程序中将照片上传到 Facebook

> ID：12811662
> 
> 赞同：0
> 
> 时间：2012-10-10T03:48:12.333
> 
> 标签：c#, asp.net, facebook, facebook-apps, photo-upload

我一直在为此绞尽脑汁，阅读所有我能找到的可用文档，但仍然找不到解决方案，所以我在这里发帖。

首先，我从这里开始，通过 Graph API 发布照片的官方 Facebook 指南。

[https://developers.facebook.com/blog/post/498/](https://developers.facebook.com/blog/post/498/)

因为它是用 PHP 编写的，所以我用 ASP.NET C# 重写了它。该代码的工作原理是照片已成功上传，并且我得到了带有照片 ID 的 JSON 响应。

我需要一种方法来读回这个 ID，所以我想我必须从服务器端上传。但是，这意味着用户需要先上传到我的服务器，然后我的代码会将其发送到 Facebook 的 API。

我的问题是：有没有办法在不先将文件保存到服务器磁盘的情况下做到这一点？由于此时我已经上传了文件的数据缓冲区，我可以以某种方式将其发送到 Graph API 吗？我发现先保存文件然后再次上传是相当多余的。

我想过使用 Javascript/AJAX 来做这件事，但似乎也没有办法。Facebook 的 Javascript API 不提供此功能。

我还尝试查看[诸如此类](http://csharpsdk.org "适用于 Facebook 的 C-Sharp SDK")的各种库，但文档相当缺乏。我也看过[这篇文章](http://facebooksdk.blogspot.sg/2011/04/facebook-album.html)，但它假设我已经有一个文件要上传。

这里的专家可以发布一些示例代码（如果可能的话）或者为我指出我需要的正确方向。在我们讨论这个问题时，有没有办法触发 Facebook 的照片上传对话框，还是我必须从头开始构建自己的？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:10:47.333

好的，经过一番修补后，我想我找到了解决方案。

在 aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="upload.aspx.cs" Inherits="photocontest_upload" %>
<!DOCTYPE HTML>
<html lang="en">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        File: <asp:FileUpload ID="fileUpload" runat="server" /><br />
        Caption: <asp:TextBox ID="caption" runat="server"></asp:TextBox><br />
        <asp:Button id="btnSubmit" runat="server" onclick="btnSubmit_Click"  text="Upload" />
    </div>
    </form>
    <asp:Literal ID="msg" runat="server"></asp:Literal>
</body>
</html> 
```

代码隐藏（身份验证部分是从 Facebook 提供的示例 PHP 代码转换而来的。）尚无错误处理

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using Facebook;

public partial class photocontest_upload : System.Web.UI.Page
{
    protected string access_token = "";
    protected string form_url = "";

    protected void Page_Load(object sender, EventArgs e)
    {
        string app_id = "your_app_id";
        string app_secret = "your_app_secret";
        string post_login_url = "your_post_login_url";

        string code = Request["code"] ?? "";

        if (code == "")
        {
            string dialog_url = "http://www.facebook.com/dialog/oauth?" + "client_id=" + app_id + "&redirect_uri=" + Server.UrlEncode(post_login_url) + "&scope=publish_stream";
            Response.Redirect(dialog_url);
        }
        else
        {
            string token_url = "https://graph.facebook.com/oauth/access_token?client_id=" + app_id + "&redirect_uri=" + Server.UrlEncode(post_login_url) + "&client_secret=" + app_secret + "&code=" + code;
            string response = InstaSharp.HttpClient.GET(token_url);
            access_token = HttpUtility.ParseQueryString(response).Get("access_token");
            form_url = "https://graph.facebook.com/me/photos?access_token=" + access_token;
        }
    }
    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        if (fileUpload.HasFile)
        {
            FacebookClient facebookClient = new FacebookClient(access_token);
            FacebookMediaObject mediaObject = new FacebookMediaObject
            {
                FileName = "file.jpg",
                ContentType = "image/jpeg"
            };

            mediaObject.SetValue(fileUpload.FileBytes);

            IDictionary<string, object> upload = new Dictionary<string, object>();
            upload.Add("name", caption.Text);
            upload.Add("@file.jpg", mediaObject);

            dynamic res = facebookClient.Post("/me/photos", upload) as JsonObject;
            form1.Visible = false;

            msg.Text = "<p>Photo uploaded successfully. " +
                "<a href=\"https://www.facebook.com/photo.php?fbid=" + res.id + "\">View on facebook</a><p>" +
                "<p><a href=\"upload.aspx\">Back</a>";
        }

    }
} 
```

这似乎可行，但我仍然没有关于 FacebookMediaObject 和 facebookClient() 参数应该是什么的详细信息。有谁知道我在哪里可以获得 Facebook C# SDK 的完整文档？谢谢！

# java - android Class.forName 抛出异常

> ID：12811664
> 
> 赞同：-5
> 
> 时间：2012-10-10T03:48:29.210
> 
> 标签：java, android, class, reflection

我在一个 Android 项目中使用 Java 反射。

**源代码：**

```
Log.d("LOG", "begin");
try {
    final android.view.View.OnSystemUiVisibilityChangeListener unusedVar = new android.view.View.OnSystemUiVisibilityChangeListener() {

        @Override
        public void onSystemUiVisibilityChange(int visibility) {
            // TODO Auto-generated method stub

        }
    };
    Log.d("LOG", "unusedVar is null = " + (unusedVar == null? "Yes": "No"));
    Class newClass = Class.forName("android.view.View.OnSystemUiVisibilityChangeListener");
    Log.d("LOG", "newClass created");
} catch (Exception ex) {
    Log.d("LOG", "Failed to create newClass", ex);
}
Log.d("LOG", "end"); 
```

*   上面的代码在我活动的 onCreate() 中。
*   该项目的构建目标是 Android 4.0。
*   我在装有 Android 4.0.4 的设备上运行它。

**结果：** 变量`unusedVar`为 NOT `null`，但`Class.forName`抛出`ClassNotFoundException`.

**日志：**

```
D/LOG(13205): begin
D/LOG(13205): unusedVar is null = No
D/LOG(13205): Failed to create newClass
D/LOG(13205): java.lang.ClassNotFoundException: android.view.View.OnSystemUiVisibilityChangeListener
D/LOG(13205):   at java.lang.Class.classForName(Native Method)
D/LOG(13205):   at java.lang.Class.forName(Class.java:217)
D/LOG(13205):   at java.lang.Class.forName(Class.java:172)
D/LOG(13205):   at com.MyActivity.onCreate(VideoPlayerActivity.java:100)
D/LOG(13205):   at android.app.Activity.performCreate(Activity.java:4465)
D/LOG(13205):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
D/LOG(13205):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
D/LOG(13205):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
D/LOG(13205):   at android.app.ActivityThread.access$600(ActivityThread.java:123)
D/LOG(13205):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
D/LOG(13205):   at android.os.Handler.dispatchMessage(Handler.java:99)
D/LOG(13205):   at android.os.Looper.loop(Looper.java:137)
D/LOG(13205):   at android.app.ActivityThread.main(ActivityThread.java:4424)
D/LOG(13205):   at java.lang.reflect.Method.invokeNative(Native Method)
D/LOG(13205):   at java.lang.reflect.Method.invoke(Method.java:511)
D/LOG(13205):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
D/LOG(13205):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
D/LOG(13205):   at dalvik.system.NativeStart.main(Native Method)
D/LOG(13205): Caused by: java.lang.NoClassDefFoundError: android/view/View/OnSystemUiVisibilityChangeListener
D/LOG(13205):   ... 18 more
D/LOG(13205): Caused by: java.lang.ClassNotFoundException: android.view.View.OnSystemUiVisibilityChangeListener
D/LOG(13205):   at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
D/LOG(13205):   at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
D/LOG(13205):   at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
D/LOG(13205):   ... 18 more
D/LOG(13205): end 
```

这是为什么？是因为`android.view.View.OnSystemUiVisibilityChangeListener`是*接口*而不是*类*吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:01:16.557

接口`OnSystemUiVisibilityChangeListener`嵌套在 class 中`View`，所以我相信你必须这样做`Class.forName("android.view.View$OnSystemUiVisibilityChangeListener");`（注意'$'）。

参考：

*   [http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)
*   [http://developer.android.com/reference/android/view/View.OnSystemUiVisibilityChangeListener.html](http://developer.android.com/reference/android/view/View.OnSystemUiVisibilityChangeListener.html)

# c# - 按下按钮/使用数据网格选择更改后从数据网格中获取值

> ID：12811666
> 
> 赞同：0
> 
> 时间：2012-10-10T03:48:42.627
> 
> 标签：c#, wpf, wpf-controls, wpfdatagrid

我有一个从我的数据库加载数据的数据网格。在我的数据网格中，我还包括了 ，以便我可以选中或取消选中该行。

这是图片。 ![在此处输入图像描述](../Images/1a1559e49489cb4f24f3d022fafd6588.png)

这是我的xaml。

```
<DataGrid AutoGenerateColumns="False" Height="258" HorizontalAlignment="Left" Margin="12,0,0,12" 
              Name="dataGrid1" VerticalAlignment="Bottom" Width="479" ItemsSource="{Binding data}" 
              AlternatingRowBackground="#FFC4B0B0">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding nCateogryID}" Header="No." IsReadOnly="True" Width="30" />
            <DataGridTextColumn Binding="{Binding sCategoryDesc}" Header="Nama Kategori" IsReadOnly="True" Width="160" />
            <DataGridTextColumn Binding="{Binding sCategoryItems}" Header="Keterangan Kategori" IsReadOnly="True" Width="170" />
            <DataGridCheckBoxColumn Header="Checked?" />
        </DataGrid.Columns>
    </DataGrid> 
```

可能的问题是：当我点击“按钮”时，我怎么知道哪些数据已经检查过？我也在谷歌上搜索，但一无所获。

我是这样想的。每当我单击“按钮”时，我都会开始检查每一行。我该怎么做？有什么样品吗？

我还想找到另一个解决方案，使用事件处理程序怎么样？这意味着每当我单击该行并选中时，我都会触发该事件并检查它是否已选中。我该怎么做？

对我来说，使用事件处理程序更容易实现，因为它要快得多，而我必须检查并按下按钮。假设我只有 10 行，那不是大问题。如果我有 1000 行呢？如果我一个一个检查，那会很麻烦。浪费很多时间。任何的想法？谢谢。

或者也许使用 datagrid_selectionchanged。如何检查复选框是否已选中？

因为如果我们等到用户按下按钮，然后我们检查是否检查，我认为这是一个缓慢的过程。你必须检查每一行。如果我的行只有 10 行，也许没关系。如果我有 1000 行需要检查呢？谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:47:20.047

```
for(int i=0;i<DataGrid.items.count-1;i++)
{
     CheckBox chkBx = (CheckBox)DataGrid.items[i].Cells[3].FindControl("EmpId") ;
     if( chkBx !=null && chkBx.Checked )
      {
        Response.Write(DataGrid.items[i].Cells[1].Text.ToString() );
      }
} 
```

这里“EmpId”是复选框名称（控件名称），我正在使用第一个单元格的值进行写入。您可以根据需要更改单元格索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:36:21.317

在数据库中，您有一个 Checked 字段？如果没有，您应该为您的项目扩展类对象并添加一个新属性，例如名为 IsChecked，然后通过绑定您可以检查/取消选中项目。在您的情况下，“数据”是一些自定义对象的集合。扩展该自定义对象并向其添加新属性。在此之后，您可以枚举数据网格的源集合，您可以找到检查了哪些。像这样的东西：

```
var checkedItems = data.Where(x => x.IsChecked == true).ToList(); 
```

# wcf - WCF 客户端错误“X.509 证书中不存在私钥”

> ID：12811668
> 
> 赞同：1
> 
> 时间：2012-10-10T03:49:05.510
> 
> 标签：wcf, certificate, x509

我一直试图让 WCF 客户端使用 TransportWithMessageCredential 与 IIS 托管 WCF 服务进行通信。

在这种情况下，我们将有大约 20 个客户端都在运行客户端应用程序。计划他们都将使用相同的证书与我们的服务器进行通信以提供加密（识别单独处理）。我们的服务器根网站已经配置了证书。WCF 服务将从子站点运行，我希望使用相同的证书来保护从我们的客户端应用程序访问服务的安全。

如果我在客户端上安装 PFX 证书，一切都很好。但我不想从我们的服务器导出私钥 - 这不是安全问题吗？

如果我安装 CER 证书文件，运行我的客户端应用程序，我会收到错误 - “X.509 证书中不存在私钥” - 听起来很合理，因为我没有导出一个

也许我错过了一些东西；我已经用谷歌搜索了很多，大多数解决方案都表示导出私钥。

有没有办法在不从我们的服务器导出私钥的情况下使用 CER 证书文件？或者什么被认为是最佳实践。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:28:38.293

我需要一个完全相同的问题的答案...

用 128 位密钥对事物进行加密，费尽千辛万苦地处理一堆难以辨认的首字母缩略词，并使用与我的信用卡余额一样大的质数等等，这似乎很可笑……毕竟你会去和将您的私钥导出到每台客户端计算机，仅受证书文件上的（可能不安全的）密码保护。疯狂的事情。无意义。

要记住的一件事是服务器和客户端都需要解密消息，而解密显然需要私钥。

因此，我认为避免将服务器的私钥发送给所有人的唯一方法是拥有 2 个不相关的证书，一个用于服务器，一个用于客户端。

当消息从客户端发送到服务器时，客户端仅使用服务器的公钥进行加密。然后服务器使用其私钥解密。

当从服务器向客户端发送消息（或更类似于回复）时，服务器使用客户端的公钥加密，客户端使用自己的私钥解密。瞧？

至少这样服务器的私钥永远不会在服务器之外发布。然而，客户端私钥仍然随处可见。

我认为它可以归结为 4 种情况，它们以不同程度的满意度处理 -

**1) 从客户端发送到服务器**的消息 - 使用服务器的公钥加密的消息。服务器证书必须在客户端可用。服务器私钥不必存在。由于服务器的公钥很容易访问，因此对于 rouge 客户端来说，加密并向服务器发送消息相对容易。

**2) 在服务器上收到消息**- 使用服务器的私钥解密消息。此私钥仅驻留在服务器上，因此非常安全（物理安全？）。除非您将副本放在公共 FTP 文件夹中，或启用远程访问，否则其他人不应访问包含私钥的服务器证书。即使有人获得了服务器证书，他们仍然需要猜出您的出色密码，对吗？顺便说一句，我不知道受密码保护的证书文件可以被“破解”。

**3) 从服务器发送到客户端的回复**- msg 使用客户端的公钥加密。所以服务器需要客户端证书（不需要私钥）。客户端公钥再次在任何地方都很容易获得，因此很容易拦截从客户端到服务器的原始消息，忽略其内容（因为没有服务器的私钥就无法解密它），并发送某种加密响应回到客户端只是为了看看客户端如何解释它。乐趣。

**4) 客户端收到的来自服务器的回复**- 使用客户端的私钥解密的 msg。此私钥位于证书文件中的所有客户端计算机上，仅受密码保护……因此相对不安全。

当然，如果您不太担心安全性，另一种选择是将服务器证书发送到任何地方（包括服务器私钥）并将其用作服务器和客户端证书。我相信很多人都会这样做。

这个答案包含相当多的猜测和点连接，因为我找不到明确的解释。我很想知道我是否接近了。

==================================================== ================================

更新：到达那里 - [http://msdn.microsoft.com/en-us/library/ms733102.aspx](http://msdn.microsoft.com/en-us/library/ms733102.aspx)

# python - Python字符串项不可调用/数学

> ID：12811669
> 
> 赞同：0
> 
> 时间：2012-10-10T03:49:17.120
> 
> 标签：python, error-handling, callable

我必须编写一个程序，给定下面的数字 s，在较大的数字中找到给定长度的连续数字的最大乘积。我有代码的框架，但是在三个“#”前面的行中，si 不断收到一个错误，即使我将它变成一个整数，我也不能调用 string 's'。我有点明白为什么，但我不太确定。另外，如果从数学上讲有更好的方法来做那条线，那会是什么？非常感谢你的帮忙！

```
 s=""\
    "73167176531330624919225119674426574742355349194934"\
    "96983520312774506326239578318016984801869478851843"\
    "858615670789112949495459501737958331952853208805511"\
    "12540698747158523863050715693290963295227443043557"\
    "66896648950445244523161731856403098711121722383113"\
    "62229893423380308135336276614282806444486645238749"\
    "30358907296290491560440772390713810515859307960866"\
    "70172427121883998797908792274921901699720888093776"\
    "65727333001053367881220235421809751254540594752243"\
    "52584907711670556013604839586446706324415722155397"\
    "53697817977846174064955149290862569321978468622482"\
    "83972241375657056057490261407972968652414535100474"\
    "82166370484403199890008895243450658541227588666881"\
    "16427171479924442928230863465674813919123162824586"\
    "17866458359124566529476545682848912883142607690042"\
    "24219022671055626321111109370544217506941658960408"\
    "07198403850962455444362981230987879927244284909188"\
    "84580156166097919133875499200524063689912560717606"\
    "05886116467109405077541002256983155200055935729725"\
    "71636269561882670428252483600823257530420752963450"

    def findMaxProduct(n):
        """
        >>> findMaxProduct(1)
        9
        >>> findMaxProduct(2)
        81
        >>> findMaxProduct(22)
        3556892570112000
        >>> findMaxProduct(60)
        130883609235662685781298144870400000000
        >>> findMaxProduct(70)
        2412446685431734624320887406251212800000000
        >>> findMaxProduct(80)
        2412446685431734624320887406251212800000000
        """
        largest = 0
        for digit in range(len(s)-n):
                    product = 1
            for k in range (n):
             ###product = product * int(s(digit + k))
                if product > largest:
                    largest = product
        return largest 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:24:47.897

您`s(...)`尝试调用名为`s`. 相反，您想要的是`s[...]`它将索引到字符串并返回它的子集。

# swing - Jframe 窗口无法使用我的可执行 jar 打开

> ID：12811670
> 
> 赞同：1
> 
> 时间：2012-10-10T03:49:31.283
> 
> 标签：swing, jframe, java

我刚刚在netbeans中制作了一个基本的计算器项目，当我在那里运行该项目时，代码工作得很好，当我转到docs> netbeans项目>dist>calculator.jar，并在那里运行它时它可以工作但是当我拖动它时到桌面并尝试在那里运行它 JFrame 不会打开

这是下面唯一的类：

```
package calculator;

/**
 *
 * @author David
 */
public class ui extends javax.swing.JFrame {

    /**
     * Creates new form ui
     */
    public ui() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        jScrollBar1 = new javax.swing.JScrollBar();
        jLabel1 = new javax.swing.JLabel();
        addBut = new javax.swing.JRadioButton();
        subBut = new javax.swing.JRadioButton();
        mulBut = new javax.swing.JRadioButton();
        divBut = new javax.swing.JRadioButton();
        intOneText = new javax.swing.JTextField();
        intTwoText = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        result = new javax.swing.JLabel();
        goButton = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout()); // error here

        jLabel1.setText("Calculator");
        getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 60, -1, -1));

        buttonGroup1.add(addBut);
        addBut.setText("Add");
        getContentPane().add(addBut, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 110, -1, -1));

        buttonGroup1.add(subBut);
        subBut.setText("Subtract");
        getContentPane().add(subBut, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 110, -1, -1));

        buttonGroup1.add(mulBut);
        mulBut.setText("Multiply");
        getContentPane().add(mulBut, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 140, -1, -1));

        buttonGroup1.add(divBut);
        divBut.setText("Divide");
        getContentPane().add(divBut, new org.netbeans.lib.awtextra.AbsoluteConstraints(280, 140, -1, -1));
        getContentPane().add(intOneText, new org.netbeans.lib.awtextra.AbsoluteConstraints(89, 131, 83, -1));
        getContentPane().add(intTwoText, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 180, 83, -1));

        jLabel2.setText("Integer 1:");
        getContentPane().add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 134, -1, -1));

        jLabel3.setText("Integer 2:");
        getContentPane().add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 180, -1, -1));

        result.setText("Solution Will Appear Here");
        getContentPane().add(result, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 220, -1, -1));

        goButton.setText("Calculate");
        goButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                goButtonMouseClicked(evt);
            }
        });
        getContentPane().add(goButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(59, 218, -1, -1));

        pack();
    }// </editor-fold>                        

    private void goButtonMouseClicked(java.awt.event.MouseEvent evt) {                                      

        if(intOneText.getText().equals("")){
             result.setText("Something is missing here...");
         }
         if(intTwoText.getText().equals("")){
             result.setText("Something is missing here...");
         }

        String intOne = intOneText.getText();
        float numOne = Float.parseFloat(intOne);
        String intTwo = intTwoText.getText();
        float numTwo = Float.parseFloat(intTwo);
        float answer = 0;

        boolean addTrue = false;
        boolean subTrue = false;
        boolean mulTrue = false;
        boolean divTrue = false;

        if(addBut.isSelected()){
            addTrue = true;
            subTrue = false;
            mulTrue = false;
            divTrue = false;
        }

        if(subBut.isSelected()){
            addTrue = false;
            subTrue = true;
            mulTrue = false;
            divTrue = false;
        }

        if(mulBut.isSelected()){
            addTrue = false;
            subTrue = false;
            mulTrue = true;
            divTrue = false;
        }

        if(divBut.isSelected()){
            addTrue = false;
            subTrue = false;
            mulTrue = false;
            divTrue = true;
        }

        if(addTrue == false){
            if(subTrue == false){
                if(mulTrue == false){
                    if(divTrue == false){
                         result.setText("Something is missing here...");
                    }
                }
            }
        }

       if(addTrue == true){
           answer = numOne + numTwo;
       }
       if(subTrue == true){
           answer = numOne - numTwo;
       }
       if(mulTrue == true){
           answer = numOne * numTwo;
       }
       if(divTrue == true){
           answer = numOne / numTwo;
       }

       result.setText(Float.toString(answer));

    }                                     

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ui.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ui.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ui.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ui.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new ui().setVisible(true);

            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JRadioButton addBut;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JRadioButton divBut;
    private javax.swing.JButton goButton;
    private javax.swing.JTextField intOneText;
    private javax.swing.JTextField intTwoText;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JScrollBar jScrollBar1;
    private javax.swing.JRadioButton mulBut;
    private javax.swing.JLabel result;
    private javax.swing.JRadioButton subBut;
    // End of variables declaration                   
} 
```

我在命令行中得到的错误是：

线程“AWT-EventQueue-0”中的异常 java.Lang.NoClassDefFoundError: org/netbeans/lib/awtExtra/AbsoluteLayout

在第 44 行...（上面评论）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:59:26.210

您是否尝试双击 JAR 文件？因为那行不通。

你必须打开一个 cmd 并输入：java -jarcalculator.jar

我认为它区分大小写，所以 CALCULATOR.JAR 不起作用。您需要 .jar 扩展名。

有一种方法可以通过双击使其可执行，但这需要额外的步骤。

祝你好运！

# java - 将我的 C++ Base64 代码翻译成 Java 不起作用

> ID：12811671
> 
> 赞同：0
> 
> 时间：2012-10-10T03:49:40.387
> 
> 标签：java, c++

我正在尝试将我的 C++ 代码移植到 Java，但我遇到了困难。Java 部分不起作用，但 C++ 部分起作用。

我得到：

> 线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：6 在 java.lang.AbstractStringBuilder.substring(AbstractStringBuilder.java:870) 在 java.lang.StringBuilder.substring(StringBuilder.java:72) 在Foo.Main.main(Main.java:9) 处的 Foo.Encryption.EncodeB64(Encryption.java:57) Java 结果：1

那条线指向：`System.out.println(Base64Chars.charAt(BinToDecStr(Binaries.substring(0, 6))));`

C++ 代码（100% 有效）：

```
#include <iostream>
#include <sstream>
#include <cstdio>
#include <cstdlib>
#include <windows.h>
#include <cmath>

const std::string Base64Chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

std::string DecToBinStr(int Num, int Padding)
{
    int Bin = 0, Pos = 1;
    std::stringstream SS;
    while (Num > 0)
    {
        Bin += (Num % 2) * Pos;
        Num /= 2;
        Pos *= 10;
    }
    SS.fill('0');
    SS.width(Padding);
    SS << Bin;
    return SS.str();
}

int BinToDecStr(std::string BinNumber)
{
    int Dec = 0;
    int Bin = strtol(BinNumber.c_str(), NULL, 10);

    for (int I = 0; Bin > 0; I++)
    {
        if(Bin % 10 == 1)
        {
            Dec += (1 << I);
        }
        Bin /= 10;
    }
    return Dec;
}

std::string EncodeB64X(std::string StringToEncode)
{
    std::string Binaries, Result;
    std::size_t STE_Size = StringToEncode.size();
    if(STE_Size)
    {
        for (std::size_t I = 0; I < STE_Size; I++)
            Binaries += DecToBinStr(int(StringToEncode[I]), 8);

        while(Binaries.size())
        {
            Result += Base64Chars[BinToDecStr(Binaries.substr(0, 6))];
            Binaries.erase(0, 6);
        }
    }
    return Result;
}

std::string DecodeB64X(std::string StringToEncode)
{
    std::string Binaries, Result;
    std::size_t STE_Size = StringToEncode.size();
    if(STE_Size)
    {
        for (std::size_t I = 0; I < STE_Size - 1; I++)
            Binaries += DecToBinStr(Base64Chars.find(StringToEncode[I]), 6);
        Binaries += DecToBinStr(Base64Chars.find(StringToEncode[STE_Size - 1]), 8 - ((STE_Size - 1) * 6) % 8);

        while(Binaries.size())
        {
            Result += char(BinToDecStr(Binaries.substr(0, 8)));
            Binaries.erase(0, 8);
        }
    }
    return Result;
}

int main()
{
    std::string F = EncodeB64X("Just Testing");
    std::cout<<F;
} 
```

现在我试图把它翻译成java，但它不起作用：S。这是java代码：

```
public class BaseEncoder
{
    private static final String Base64Chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    boolean IsBase64(byte C) {
        return (Character.isDigit(C) || (C == '+') || (C == '/') || Character.isAlphabetic(C));
    }

    private String PadLeft(String s, int n) {
        StringBuilder SBuff = new StringBuilder();
        for (int I = n - s.length(); I > 0; --I) {
            SBuff.append('0');
        }
        SBuff.append(s);
        return SBuff.toString();
    }

    private int BinToDecStr(String BinNumber) {
        int Dec = 0;
        int Bin = Integer.parseInt(BinNumber);

        for (int I = 0; Bin > 0; ++I) {
            if(Bin % 10 == 1) {
                Dec += (1 << I);
            }
            Bin /= 10;
        }
        return Dec;
    }

    private String DecToBinStr(int Num, int Padding) {
        int Bin = 0, Pos = 1;
        String SS = new String();
        while (Num > 0) {
            Bin += (Num % 2) * Pos;
            Num /= 2;
            Pos *= 10;
        }
        SS = PadLeft(SS, Padding);
        SS += Bin;
        return SS;
    }

    String EncodeB64(String StringToEncode)
    {
        String Result = new String();
        StringBuilder Binaries = new StringBuilder();
        int STE_Size = StringToEncode.length();
        if (STE_Size > 0) {
            for (int I = 0; I < STE_Size; ++I) {
                Binaries.append(DecToBinStr(StringToEncode.charAt(I), 8));
            }

            while(Binaries.length() > 0) {
                System.out.println(Base64Chars.charAt(BinToDecStr(Binaries.substring(0, 6))));
                Result += Base64Chars.charAt(BinToDecStr(Binaries.substring(0, 6)));
                Binaries.delete(0, 6);
            }
        }
        return Result;
    }

    String DecodeB64(String StringToEncode)
    {
        String Result = new String();
        StringBuilder Binaries = new StringBuilder();
        int STE_Size = StringToEncode.length();
        if(STE_Size > 0) {
            for (int I = 0; I < STE_Size - 1; I++) {
                Binaries.append(DecToBinStr(Base64Chars.indexOf(StringToEncode.charAt(I)), 6));
            }
            Binaries.append(DecToBinStr(Base64Chars.indexOf(StringToEncode.charAt(STE_Size - 1)), 8 - ((STE_Size - 1) * 6) % 8));

            while(Binaries.length() > 0) {
                Result += (char)BinToDecStr(Binaries.substring(0, 8));
                Binaries.delete(0, 8);
            }
        }
        return Result;
    }
} 
```

知道我在 Java 中做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:57:58.450

`substr(0,n)`如果大于字符串的长度，in`std::string`将返回小于字符。在 Java 中，在这种情况下会引发异常。您需要确保不长于字符串的长度（类似于）。`n``n``substring``n``str.substring(0, Math.min(6, str.length())`

# ruby-on-rails - Rails Oracle 增强型适配器

> ID：12811674
> 
> 赞同：0
> 
> 时间：2012-10-10T03:49:45.710
> 
> 标签：ruby-on-rails, oracle

我在从 ROR 3.2 连接到 Oracle 数据库时遇到问题。

```
irb(main):001:0> gem 'ruby-oci8', "~>2.1.0"
=> true
irb(main):002:0> gem 'activerecord-oracle_enhanced-adapter', '~> 1.4.1'
=> true
irb(main):003:0> exit

rails console
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require': 
Please install the oracle_enhanced adapter: `gem install activerecord-o
racle_enhanced-adapter` (cannot load such file -- active_record/connection_adapters/oracle_enhanced_adapter) (LoadError) 
```

我在网上搜索，它说我应该创建一个位于 [https://github.com/rsim/oracle-enhanced/blob/master/Gemfile](https://github.com/rsim/oracle-enhanced/blob/master/Gemfile)的 gems 文件，然后进行捆绑安装。但我是 Rails 新手，不知道该怎么做。

C:\kerbapp>bundle show activerecord-oracle_enhanced-adapter C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-oracle_enhanced-adapter-1.4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:42:07.270

从 3.0 开始的 Rails 应用程序集成了名为 bundler 的 gem 包管理（我建议[在此处阅读更多内容](http://gembundler.com/)）。任何应用程序都只会看到其包列表中包含的 gem。

您的项目应该有一个`Gemfile`文件 - 在`gem 'activerecord-oracle_enhanced-adapter', '~> 1.4.1'`那里添加该行，`bundle`从项目根目录运行命令，它应该很好。

请记住，在使用 rails（以及任何大型 ruby​​ 项目）时，您应该以这种方式添加所有 gem。

# android - 如何使用 android 在 Titanium 中创建注册表单并将数据传递到另一个表单？

> ID：12811678
> 
> 赞同：0
> 
> 时间：2012-10-10T03:50:05.887
> 
> 标签：android, titanium

请告诉我如何在钛中创建一个注册表并将填写该表格的注册数据传递到另一个表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:13:00.070

以下是注册示例代码。我在资源文件夹中创建了一个附加文件“success.js”，显示了第二个窗口。请尝试以下代码

在 app.js 文件中写入这些行

```
var win1 = Ti.UI.createWindow({
 width : 'auto',
 height: 'auto',
 backgroundColor : '#FFFFFF'
});

var txtName = Ti.UI.createTextField({
 top   : '25%',
 width : '75%',
 height: '35',
 hintText : 'Name'
});

win1.add(txtName);

var txtAddress = Ti.UI.createTextField({
 top   : '35%',
 width : '75%',
 height: '40',
 hintText : 'Address'
});

win1.add(txtAddress);

var btnRegister = Ti.UI.createButton({
 top : '55%',
 width : '50%',
 height : '35',
 title  : 'Register'
});

 win1.add(btnRegister);

 win1.open();
 btnRegister.addEventListener('click', function(){

 var win2 = Ti.UI.createWindow({
  width : 'auto',
  height: 'auto',
  backgroundColor : '#FFFFFF',
  url  : 'success.js'
});

 win2.name = txtName.value;
 win2.address = txtAddress.value; 
 win2.open();
}); 
```

// 在 success.js 文件中写入以下行

```
var win2 = Ti.UI.currentWindow;

var name = win2.name;
var address = win2.address;
var lblName = Ti.UI.createLabel({
  top  : '30%',
  width : '75%',
  height : 'auto',
  color  : 'yellow',
  backgroundColor : 'blue',
  text : name,
  textAlign : 'center'
 });

var lblAddress = Ti.UI.createLabel({
  top  : '40%',
  width : '75%',
  height : 'auto',
  color  : 'yellow',
  backgroundColor : 'blue',
  text : address,
  textAlign : 'center'
 });

 win2.add(lblName);
 win2.add(lblAddress); 
```

现在编译代码并运行。它对我有用。尝试一下

# javascript - AngularJS：从自定义指令中调用自定义指令似乎不起作用

> ID：12811682
> 
> 赞同：0
> 
> 时间：2012-10-10T03:50:46.827
> 
> 标签：javascript, angularjs, directive

我[这里有一个 plunker 可以演示它](http://plnkr.co/edit/MvBUBR)。

我可以创建两个指令。在这种情况下，一个名为 zMonthSelect，另一个名为 zTest，它引用 zMonthSelect。如果它们是嵌套的，Angular 似乎不喜欢。这是为什么？我能做些什么来修复它？

这是代码：

```
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
});

app.directive('zMonthSelect', function () {
    return {
        restrict: 'E',
        priority: 1000,
        scope: {
            month: '=month'
        },
        template: '<select ng-model="month">' +
            '<option value="1">Jan</option>' +
            '<option value="2">Feb</option>' +
            '<option value="3">Mar</option>' +
            '<option value="4">Apr</option>' +
            '<option value="5">May</option>' +
            '<option value="6">Jun</option>' +
            '<option value="7">Jul</option>' +
            '<option value="8">Aug</option>' +
            '<option value="9">Sep</option>' +
            '<option value="10">Oct</option>' +
            '<option value="11">Nov</option>' +
            '<option value="12">Dec</option>' +
            '</select>',
        controller: function($scope) {
        }
    };
});

app.directive('zTest', function(){ 
  return { 
    restrict: 'E',
    priority: 1,
    scope: {},
    template: 'Test: <z-month-list month="1"></z-month-list>',
    controller: function($scope) {
    }
  };
}); 
```

和 HTML：

```
<body ng-controller="MainCtrl">
  zTest: <z-test></z-test><br/>
  zMonthSelect: <z-month-select></z-month-select><br/>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T04:04:34.567

您的指令名称不匹配。在`zTest`您尝试使用`<z-month-list>`的指令中，但您的指令名为`zMonthSelect`. 只需更改您`zTest`对我们的指示`<z-month-select>`。见[http://plnkr.co/edit/x2i8lv?p=preview](http://plnkr.co/edit/x2i8lv?p=preview)

或者您可以将您的内部指令重命名为`zMonthList`. 见[http://plnkr.co/edit/aQlSqK?p=preview](http://plnkr.co/edit/aQlSqK?p=preview)

# ios - 将 JSOn 绘制到 UITableviewCell 中时出错

> ID：12811683
> 
> 赞同：0
> 
> 时间：2012-10-10T03:51:00.800
> 
> 标签：ios, objective-c, json, nsarray, nsdictionary

我有这样的json（有字典和数组）。我想将所有 json 绘制到 UItableviewcell 中，但它不在那里绘制

```
{   data: [
      {

        featured: true,
        price: {
                    currency: "IDR",
                    amount: 5557679,
                    formatted: "Rp5.558.000"
      },
] } 
```

这是我的 viewcontroller.h 文件

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController{
IBOutlet UITableView *mainTableView;
    NSURL *URL;
    NSDictionary *Deals;
    NSArray *Deals_array;
    NSMutableData *data;
}

@end 
```

这是我的 .m 文件

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title=@"SOme Apps";
    [UIApplication sharedApplication].networkActivityIndicatorVisible=YES;
    URL = [NSURL URLWithString:[NSString stringWithFormat:@"http://someurl.com"]];
    NSURLRequest *request=[NSURLRequest requestWithURL:URL];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];

    /*dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: URL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    });*/
}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{

    data=[[NSMutableData alloc] init];
    NSLog(@"%@",data);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [data appendData:theData];

}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSError* error;
    Deals= [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    Deals_array = [Deals objectForKey:@"data"]; //2
    NSDictionary* loan = [Deals_array objectAtIndex:0];
    NSString *test=[loan objectForKey:@"featured"];
    NSLog(@"%@",test);
    [mainTableView reloadData];

}
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    NSLog(@"Error");
}

////set minimum section oftableview
-(int)numberOfTableviewSection : (UITableView *) tableView
{
    return 1;
}

////set length uitableview
-(int) tableView :(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [Deals_array count];
}

///declaring uitableview
-(UITableViewCell *)tableView :(UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:@"MainCell"];
    if (cell==nil){
        cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MainCell"];
    }
    cell.textLabel.text=[[Deals_array objectAtIndex:indexPath.row] objectForKey:@"featured"];
    return  cell;
}
 @end 
```

但它没有绘制对象键@test，有人可以帮我为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:57:54.770

尝试做分配

```
Deals_array = [[NSArray alloc] initWithArray:[Deals objectForKey:@"data"]]; 
```

# kernel - GPU 中的内存绑定内核和计算绑定内核

> ID：12811684
> 
> 赞同：5
> 
> 时间：2012-10-10T03:51:17.107
> 
> 标签：kernel, gpu, nvidia

什么是*“GPU 中的内存绑定内核和计算绑定内核”*？

这与GPU的性能有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T09:13:35.710

通俗地说，如果内核的大部分时间都花在执行内存指令上，那么内核就是内存受限的。相反，如果大多数操作都是 ALU-FPU 指令，则内核是计算密集型的。GPU 具有很高的内存和计算带宽，可以同时适用于这两个类别。这些术语用于分类并指示哪些优化技术可以显着提高应用程序的性能。

每个类别的工作负载都有不同的优化技巧。

例如，对于内存绑定的工作负载：

*   利用共享内存
*   内存访问合并
*   记忆露营。

对于计算密集型工作负载：

*   减少分支分歧
*   ALU-FPU 和 SFU 之间的交错计算
*   提供足够的独立指令来利用 ILP。

# android - 安卓 nfcee_access.xml

> ID：12811690
> 
> 赞同：1
> 
> 时间：2012-10-10T03:51:40.720
> 
> 标签：android, nfc

我正在尝试运行需要安全元素访问[的 android-se-access](https://github.com/nelenkov/android-se-access)，我必须将证书包含到 nfcee_access.xml

我运行命令

```
keytool -exportcert -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android|xxd -p -|tr -d '\n' 
```

并将它们包含在文件中。但是将 eclipse 中的 apk 安装到 google nexus 7 上仍然会导致强制关闭。

我是否错误地生成了证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:37:30.210

另一种了解您的签名是否正确的方法是`<debug />`在与签名相同的级别添加标签，您将在 logcat 中获得被拒绝应用程序签名的十六进制转储，因此您唯一需要做的就是将其复制并粘贴到`nfcee_access.xml`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:59:56.930

检查 logcat 输出，如果它说“拒绝访问包 xxx”之类的内容，则可能有问题。如果您指定了`<pacakge/>`标签，请确保它是正确的。修改后还需要重启设备`nfcee_access.xml`。

顺便说一句，我还没有在 N7 上尝试过这个（也许我应该），但它应该可以工作。

# c++ - sizeof（值）与 sizeof（类型）？

> ID：12811696
> 
> 赞同：8
> 
> 时间：2012-10-10T03:52:48.910
> 
> 标签：c++, runtime, sizeof, compile-time

考虑：

```
double data; 
double array[10]; 
std::vector<int> vec(4, 100); 
MyClass myclass; 
```

有没有区别：

```
sizeof(double);
sizeof(double[10]);
sizeof(std::vector<int>);
sizeof(MyClass); 
```

和

```
sizeof(data);
sizeof(array);
sizeof(vec);
sizeof(myclass); 
```

这两种语法是不同的还是严格等效的？所有这些都是在编译时评估的吗？如果不是，在运行时评估哪一个？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T04:07:55.367

唯一的区别在于语法和便利性。

从语法上讲，您可以在一种情况下省略括号，但不能在另一种情况下：

```
double d;

sizeof(double); // compiles
sizeof(d);      // compiles
sizeof d;       // compiles
sizeof double;  // does NOT compile 
```

就方便而言，请考虑以下内容：

```
float a;

x = sizeof(float);

y = sizeof(a); 
```

例如，如果您最终`a`从 a更改`float`为 double，则还需要更改`sizeof(float)`为`sizeof(double)`以匹配。如果您`sizeof(a)`始终使用，当您`a`从 a更改为`float`a时`double`，您的所有用法`sizeof`也会自动更改，无需任何编辑。后者在 C 中比在 C++ 中更经常出现问题，例如在调用 malloc 时：

```
float *a = malloc(10 * sizeof(float)); 
```

对比

```
float *a = malloc(10 * sizeof(*a)); 
```

在第一种情况下，将第一个更改`float`为`double`将生成可编译但缓冲区溢出的代码。在第二种情况下，将 (only) 更改`float`为`double`可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T04:21:50.590

无论何时使用`sizeof(<whatever>)`，它总是在编译时进行评估。它是所`sizeof`关注的参数的数据类型。

但是，您可以传递值，甚至表达式作为参数。但是 sizeof 函数只会考虑传递参数的数据类型。

您也可以将表达式作为`sizeof(x = x+1);`. 说`x`是int。在这种情况下，这`sizeof`将返回`4`（就像在我的机器上一样）并且 x 的值将保持不变。这是因为`sizeof`总是在编译时进行评估。

您提供的两组语法将返回相同的结果，但您不能说它们是等效的。但是，是的，后者是根据前者定义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T04:04:59.597

后者是根据前者定义的。给定一个表达式，它返回表达式类型的大小。所以`sizeof(vec)`翻译为`sizeof(std::vector<int>)`.

两者都在编译时进行评估；唯一的运行时`sizeof`是 C，而不是 C++，具有可变长度数组。操作数`sizeof`未计算，因此表达式本身不可能生成任何代码。

我更喜欢使用表达式而不是类型，因为很可能会以某种方式说明类型是多余的。

# python - 按 GPS 位置排序数据库查询

> ID：12811698
> 
> 赞同：0
> 
> 时间：2012-10-10T03:53:16.930
> 
> 标签：python, google-app-engine, gps, coordinates, geocoding

我正在用 Python 在 Google App Engine 上编写一个网站，并且我有一个 Location 数据存储实体，它有一个包含 GPS 坐标的字符串属性。我想让用户通过 GPS 坐标进行搜索，并且我想返回纬度或经度 +/- 10 点内的所有位置。基本上我想做的是在下面的代码中，但我不能以这种方式对 GPS 进行排序，一个是因为它是一个字符串，另一个是因为它是相同的属性。

```
 inputlocation = self.request.get("userlocation")

        g = geocoders.Google()
        try:
            place, (lat, lng) = g.geocode(inputlocation)
        except ValueError:
            geocodespot = g.geocode(inputlocation, exactly_one=False)
            place, (lat, lng) = geocodespot[0]
         GPSlocation = "("+str(lat)+", "+str(lng)+")"
         GPSlocation = float(GPSlocation)

         bound = 10
         upper = GPSlocation + bound
         lower = GPSlocation - bound
         left = GPSlocation + bound
         right = GPSlocation - bound

        if GPSlocation:
            locations = db.GqlQuery("select * from Location where GPSlocation>:1 and where GPSlocation>:2 and where GPSlocation <:3 and where GPSlocation <:4 order by created desc limit 20", upper, lower, left, right)
#example GPSlocation in the datastore = "(37.7699298, -93.4469157)" 
```

你能想出任何方法来基本上做到这一点，而不必改变我的数据存储的设置方式吗？有没有什么方法可以获取这些信息，而不仅仅是制作两个属性，一个用于纬度，一个用于经度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:58:18.470

看起来 Google GAE 有一些工具可以做你想做的事情：

*   [https://developers.google.com/maps/articles/geospatial](https://developers.google.com/maps/articles/geospatial)
*   [http://code.google.com/p/geomodel/](http://code.google.com/p/geomodel/)

该proximity_fetch 看起来像你需要的

```
def proximity_fetch(query, center, max_results=10, max_distance=0): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:34:35.557

也许您想添加一个计算属性：

[https://developers.google.com/appengine/docs/python/ndb/properties#computed](https://developers.google.com/appengine/docs/python/ndb/properties#computed)

> 计算属性 (ComputedProperty) 是只读属性，其值由应用程序提供的函数根据其他属性值计算得出。计算的值被写入Datastore，以便在Datastore查看器中查询和显示，但是当从Datastore读回实体时，存储的值会被忽略；相反，每当请求该值时，都会通过调用该函数来重新计算该值。

```
class SomeEntity(ndb.Model):
  name = ndb.StringProperty()
  name_lower = ndb.ComputedProperty(lambda self: self.name.lower())

x = SomeEntity(name='Nick') 
```

因此，您需要某种函数而不是上面的 lower()，它计算然后更新模型中的新 LatFloat、LongFloat。因此，您可以将数据保存为两个浮点数和一个字符串。我相信您可以添加它并且您现有的数据不会受到影响，而是当您尝试读取或搜索该数据时，它将被计算并返回。

# java - 在椭圆上画弦

> ID：12811701
> 
> 赞同：0
> 
> 时间：2012-10-10T03:53:45.693
> 
> 标签：java, swing, awt, ellipse, drawstring

但是，我对时钟的输出感到满意-我不确定如何正确对齐`drawString`时钟上每个刻度线尖端应显示的数字。我希望有人能够为此展示正确的方法/公式。

```
 private void drawTickMarks(Graphics2D g2)
    {
     double radius = this.faceRadius;

     for (int secs = 0; secs <= 60; secs++)
     {
         double tickStart;

         if (secs % 5 == 0)
             tickStart = radius - 15;
          else
             tickStart = radius - 5;

         tick = drawRadii(secs / 60.0, tickStart, radius);

         if (secs % 5 == 0)
            {
             g2.setStroke(new BasicStroke(3));

                g2.drawString(""+(secs/5),(int)tick.getX1()+(int)(tick.getX1()-tick.getX2()),
                                                  (int)tick.getY1()+(int)(tick.getY1()-tick.getY2()));
            }
         else
             g2.setStroke(new BasicStroke(1));

         g2.setColor(Color.WHITE);
         g2.draw(tick);
     }
    } 
```

感谢 Thinhbk 提供了有效且正确的代码解决方案，感谢 Jon W 提供了找到解决方案的正确步骤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T04:12:52.197

如果您想象将字符串包含在一个框内，则传入的 x 和 y 值`drawString`指定框的左下角。

我会这样修改该`drawString`行：

```
String number = ""+(secs/5);
int xLocation = (int)tick.getX1()+(int)(tick.getX1()-tick.getX2());
int yLocation = (int)tick.getY1()+(int)(tick.getY1()-tick.getY2());
int offsetX = /*Insert some value here to shift the position of all the strings
                along the x-axis. Make this an expression that contains number.length(),
                so that two-digit numbers are shifted more than one digit numbers. */
int offsetY = /*Insert some value here to shift the position of all the strings along
                the y-axis.*/
g2.drawString(number, xLocation + offsetX, yLocation + offsetY); 
```

您必须使用特定的值`offsetX`来`offsetY`使它看起来不错。

如果你想变得更漂亮，让它`drawString`根据使用的字体自动调整位置，看看[这个](http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html)和`FontMetrics`类。您需要根据正在绘制的字符的宽度和高度以及诸如此类的东西来制作`offsetX`和改变。`offsetY`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T04:59:34.633

作为 Jon W 提供的解决方案的补充，我创建了一个计算偏移量的方法，IMO 看起来不错。（@Jon W：很抱歉没有在您的解决方案中添加评论，因为它很长。）

```
 /**
     * Calculate the offset     * 
     * @param i
     * @return array: 
     * 0: x offset
     * 1: y offset
     */
    private int[] calculateOffSet(int i) {
        int[] val = new int[2];
        int deflt = -12;
        if(i == 12) {
            val[0] = -15;
            val[1] = 9;
        }else if (i > 6) {
            val[0] = deflt + i - 6 ;
            val[1] = i ;
        }else {
            val[0] = deflt + i ;
            val[1] = i + 6;         
        }
        return val;
    } 
```

在您的代码中，只需调用以下代码：

```
int xLocation = (int)tick.getX1()+(int)(tick.getX1()-tick.getX2());
int yLocation = (int)tick.getY1()+(int)(tick.getY1()-tick.getY2());
int[] offset = calculateOffSet((secs / 5));
g2.drawString(number, xLocation + offset[0], yLocation + offset[1]); 
```

# c# - 在类中调用时缺少 Cookie

> ID：12811703
> 
> 赞同：1
> 
> 时间：2012-10-10T03:54:16.037
> 
> 标签：c#, asp.net

再会..！在类中调用时，我在获取 cookie 的值时遇到了一些问题。

这是我的 default.aspx 中的代码。我可以在 aspx 页面内的 when 上检索值

```
 HttpCookie myCookie = new HttpCookie("SAMPLE");
  myCookie["value"] = HttpUtility.UrlEncode(value);
  myCookie.Expires = DateTime.Now.AddDays(1d);
  Response.Cookies.Add(myCookie);

  if (Request.Cookies["SAMPLE"] != null)
        {
            string userSettings;
            if (Request.Cookies["SAMPLE"]["value"] != null)
            { userSettings = Request.Cookies["SAMPLE"]["value"]; }
 } 
```

但是，当我使用此代码 HttpUtility.UrlDecode(HttpContext.Current.Request.Cookies["SAMPLE"]["value"]) 在类中调用 cookie 时，它​​没有任何价值..任何想法..？希望早日收到你的消息..

问候，

关联

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:22:19.203

您可以替换为`Response`

```
 ....
 Response.Cookies.Add(myCookie);

if (Response.Cookies["SAMPLE"] != null)
{
...
} 
```

# java - 如果 Google Drive 中不存在文件夹，请创建该文件夹

> ID：12811705
> 
> 赞同：9
> 
> 时间：2012-10-10T03:54:36.280
> 
> 标签：java, google-drive-api

我的应用程序适用于 Google Drive Java API。

只有当它不存在时，我才想在 Google Drive 的根目录中创建文件夹。我正在使用下面的代码来创建文件夹。

```
 file = service.files().insert(body).execute(); 
```

如何检查根文件夹中的文件夹是否存在。我只有文件夹名称“Myapp”，没有实例 ID。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T07:55:58.063

```
Files.List request = service.files().list().setQ(
       "mimeType='application/vnd.google-apps.folder' and trashed=false");
FileList files = request.execute(); 
```

您现在可以浏览“文件”中的所有文件夹并检查是否有任何文件夹具有搜索的标题。

不要忘记遍历所有页面：

```
request.setPageToken(files.getNextPageToken()); 
```

**编辑：**

也许你可以看看 [这个网站](https://developers.google.com/drive/search-parameters)。您可以在搜索条件中添加标题，这样您就不必检索所有文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-13T13:34:35.240

```
Files.List request=service().files().list().setQ(
                   "mimeType='application/vnd.google-apps.folder' and trashed=false and name='"+folderName+"'");
        FileList files = request.execute(); 
```

上面的代码行用于获取具有给定名称的所有文件/文件夹的列表。如果文件为空，则表示文件或具有给定名称的文件夹不存在，您可以使用下面提到的代码行创建一个新文件夹：

```
File fileMetadata = new File();
        fileMetadata.setName(folderName);
        fileMetadata.setMimeType("application/vnd.google-apps.folder");

        File file = service().files().create(fileMetadata)
            .setFields("id")
            .execute(); 
```

# c - 输出不会立即出现

> ID：12811711
> 
> 赞同：0
> 
> 时间：2012-10-10T03:55:48.813
> 
> 标签：c

```
/* Written by: Tai Ngo
   Date: 10/03/2012
   Description: This program allows the users to print numbers
   in the desired orders.
   Problem B
*/

#include <stdio.h>

int main (void)

{   //Global declaration
    int num1;
    int num2;
    int num3;
    int num4;
    int num5;
    int num6;
    int num7;
    int num8;
    int num9;
    int num10;

    //Statements
    printf("Enter 10 integers, separated by spaces:");
    scanf("%5d %5d %5d %5d %5d %5d %5d %5d %5d %5d ", &num1, &num2, &num3, &num4, &num5, &num6, &num7, &num8, &num9, &num10 );

    printf("%5d    %5d\n", num1, num10);
    printf("%5d    %5d\n", num2, num9);
    printf("%5d    %5d\n", num3, num8);
    printf("%5d    %5d\n", num4, num7);
    printf("%5d    %5d\n", num5, num6);

    return 0;
} //main 
```

为什么我必须输入一些字母才能在输入整数后出现输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:09:46.147

如果你想要用空格*分隔*的数字，那么你不应该在最后一个数字之后要求空格。我会去掉你 scanf 格式中的所有空格；它们不是必需的。

此外，最好`fflush(stdout)`在 printf 和 scanf 调用之间放置，否则无法保证用户会在 scanf 尝试读取之前看到打印输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:23:37.827

scanf 格式中的空格 ( `) 告诉 scanf 读取并丢弃空白字符（空格、制表符和换行符），直到它获得一个非空白字符并将该非空白字符留在输入上（因此它是下一个读取的字符） . 由于您的格式字符串以空格结尾，这就是 scanf 在读取您要求的 10 个整数后将执行的操作。`

 `如果你去掉那个空格，那么 scanf 将在它读取第 10 个数字后立即返回，并且不会尝试在它之后读取任何内容，因此你不必键入另一行（除了空格之外的其他内容）来获取程序继续。

由于`%d`说明符还会在它读取的数字之前跳过输入中的任何空格，因此 scanf 格式中的所有其余空格都是多余的（并且不需要），但它们实际上不会造成任何伤害——它们只会减慢以微不足道的不可估量的数量打电话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:25:49.707

请记住，当您在 scanf 中添加 %5d 时，这意味着您要求用户输入每个整数以具有 5 位数字

例如：11111 22222 33333 44444 55555 66666 77777 88888 99999 12345

如果您不想将用户限制为 5 位数字，只需将 %5d 替换为 %d.... 甚至例如：1 2 3 12345 1223 123 122 333 444 11 22`

# java - 在 Clojure 中模拟析构函数

> ID：12811712
> 
> 赞同：4
> 
> 时间：2012-10-10T03:55:54.617
> 
> 标签：java, clojure

## 问题陈述

我有两台机器 A 和 B，它们都运行 Clojure。

B有一些内存数据结构。

A 持有一个对象 A_P，它是 B 内存中某个对象 B_O 的引用/指针。

现在，只要 A_P 没有被 A GC-ed，我不希望 B_O 被 B GC-ed。

但是，一旦 A_P 已被 A GC-ed（并且 A 中的其他任何内容都没有引用 B_O，B 中的其他任何内容都没有引用 B_O），那么我希望 B_O 可以被 GC-ed。

## 带有析构函数的语言解决方案

在 C++ 中，这很容易——我使用析构函数。当 A_P 被 GC-ed 时，A 向 B 发送一个 msg 以减少对 B_O 的外部引用的数量，当它为 0 并且对 B_0 的内部引用也为 0 时，B_O 被 GC-ed。

## Java/Clojure 中的解决方案？

现在，我知道 Java 没有析构函数。但是，我想知道 Clojure 是否有办法解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:28:02.987

如果没有真正的分布式垃圾收集器，就不存在好的解决方案。即使在 C++ 中，你也不能安全地做到这一点，因为你实现了引用计数并假装它是一个真正的垃圾收集器；但是如果两个对象跨机器分界指向彼此，并且都在本地未引用，则它们仍然具有非零引用计数并且无法被收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:24:20.753

不，由于 JVM 的自动内存管理模型，Clojure（基于 JVM，CLR）没有“C++ 类型析构函数”。有诸如终结器之类的东西，但建议不要使用它们。相反，您应该基于消息传递机制而不是 A 机器对 B 中的数据进行“指针/引用”来建模您的解决方案。我知道这个答案非常高级，因为您没有在问题中提供任何具体的问题细节。如果您需要有关如何解决特定问题的更多详细信息，请提供完整的上下文，我相信有人能够帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:35:33.247

这是一个本质上很难解决的问题：分布式垃圾问题即使不是不可能解决也非常困难。

`finalize()`但是，您可能只能使用 Java 终结器并覆盖该方法使其工作。然后，您可以实现一种类似于您为 C++ 描述的消息传递技术。

这在更一般的情况下会出现问题（它不会帮助您在机器之间进行循环引用，正如 amalloy 指出的那样）并且还有一些其他的怪癖需要注意（主要是因为您无法准确控制终结器何时被调用) 但你也许可以让它在你的特定情况下工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T04:55:12.023

假设您使用 ref 或 atom 之类的数据结构在其中的某处保存数据结构 A，您可以使用侦听器来监视该结构的状态以删除 A，并且这些侦听器可以向 B 发送适当的消息。 `clojure.data/diff`可能是对于查找已删除的结构非常有用。

另一种选择是在 A 结构被取消引用后立即让负责这样做的函数发送消息。不过，作为其中的一部分，请确保该代码实际上负责删除 A，而不是其他一些更新。

# c# - 高效的临时数据集

> ID：12811713
> 
> 赞同：1
> 
> 时间：2012-10-10T03:55:55.247
> 
> 标签：c#, performance, class

我在 C# 中有一个类，它将信息存储在堆栈上，以供以后应用程序的其他部分使用。该信息当前存储在一个类中（没有任何方法），由一些整数、短裤、浮点数和几个布尔值组成。我每秒可以处理 10-40 个这样的数据包——可能更多——当程序的另一部分需要时，堆栈上的信息将被删除；但是，这不能保证在任何确定的时间间隔内发生。该信息也有可能不完整（我正在处理来自网络连接的数据包）。目前我有这样的表示：

```
public class PackInfo
{
    public boolean active;
    public float f1;
    public float f2;
    public int i1;
    public int i2;
    public int i3;
    public int i4;
    public short s1;
    public short s2;
} 
```

有没有更好的方式来表示这些信息？堆栈不可能变得太大（如果它开始变得太大，大部分信息将被清除）但我担心在创建如此多的类实例以执行操作时会产生不必要的内存开销只不过是这些信息的容器。尽管这既不是一项计算复杂或消耗内存的任务，但我认为它的扩展性也不会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T04:21:11.380

这听起来像使用通用[队列](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)来存储这些是个好主意。我假设您正在按顺序处理这些“消息”。

至于实例化这些类的开销，我认为每秒实例化 10-40 不会对性能产生任何明显的影响，您之后进行的实际处理可能比实例化成本更适合优化。

另外，我建议仅在您可以实际测量应用程序的性能时进行优化，否则您可能会浪费时间进行过早的优化。

# c - C语言保龄球得分计算器

> ID：12811715
> 
> 赞同：1
> 
> 时间：2012-10-10T03:56:23.353
> 
> 标签：c, arrays

这是一个家庭作业问题。我目前正在编写一个计算保龄球得分的程序。我的逻辑是使用多维数组，其中 9 帧作为行，2 个抛出作为列。我将在最后考虑第 10 帧，因为它具有可能多达三卷的独特性质。增加罢工和备件也使问题复杂化，所以我觉得我需要使用阵列来跟踪过去和未来的滚动。我知道这不是必需的，但我想不出其他方法。

到目前为止，这是我的代码：

```
for (i=0; i<9; i++)
{
    for (j=0; j<2; j++)
    {
        scanf("%d", &score[i][j]);
        tempTotal += score[i][j];
    }   
}
printf("temporary: %d\n", tempTotal);
//strike
for (i=0; i<9; i++)
{
    for (j=0; j<2; j++)
    {
        if(score[i][0] == 10 && score[i][1] == 0)
        {
            total = tempTotal + score[i+1][0] + score[i+1][1];
        }
//spare
        else if ((score[i][0] + score[i][1]) == 10)
        {   
            total = tempTotal + score[i+1][0];
        }
        else
        {
            total = tempTotal;
        }
    }
}
printf("result: %d\n", total); 
```

这是我的进度更新。根据评论，我首先使用 scanf 来填充我的多维数组。然后我查看了阵列以说明罢工和备件的情况。该代码一直有效，直到有连续的罢工和/或备用。如何计算连续备件和/或罢工的累积？我是否应该在我的罢工和备用条件中添加额外的条件语句来解释如果 score[i+1][0] 是另一个罢工，在这种情况下我必须考虑额外的 10 分加上接下来的三个投掷？我怎样才能做出这样一个全面搜索整个数组的条件语句？任何想法，将不胜感激。谢谢你。

# asp.net - 开始结束用户会话

> ID：12811723
> 
> 赞同：0
> 
> 时间：2012-10-10T03:57:04.587
> 
> 标签：asp.net, vb.net, session, session-state

我对用户会话管理感到困惑，我使用的是 2010 express 和 VB。

我有一个函数将用户名和密码发送到我的数据库和一个存储过程，如果用户有效则返回布尔值。

我的问题是用户是否有效，您如何开始会话。根据 msdn 文档，我将 cookie 设置为 auto 和 session inproc。

因此，如果我的函数返回 true，我该如何开始会话？

那么我调用的 .net 类和方法是什么。我假设大多数人都在使用预建的 MS 登录解决方案，这就是为什么我很难得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:08:28.257

一旦您在 web.config 文件中配置了会话（我假设您已经这样做了），会话就会在 ASP.NET 中自动启动。转到项目中的 Global.asax 文件（或添加一个）以在创建会话后运行额外的代码。（注意：这并不意味着有登录。会话是自动创建的。）

在非常原始的基础上，您可以将登录信息存储在 Session 对象中：

```
' check login credentials
Public Sub Login(user As String, pwd As String)
    Dim authenticated As Boolean = False
    ' db authentication check here
    If authenticated Then
        HttpContext.Current.Session("authenticated") = True
    Else
        Throw New Exception("not authenticated!")
    End If
End Sub

' logout user
Public Sub Logout()
    HttpContext.Current.Session("authenticated") = False
End Sub

' check if user is logged in
Public Function IsAuthenticated() As Boolean
    Return HttpContext.Current.Session("authenticated") = True
End Function 
```

但如前所述，这是非常简单的。您最好使用一些会话管理技术，例如[本示例](http://www.codeproject.com/Articles/416137/Understanding-Session-Management-Techniques-in-ASP)中的技术。

# security - 将我当前的网站更改为安全网站

> ID：12811725
> 
> 赞同：0
> 
> 时间：2012-10-10T03:57:14.093
> 
> 标签：security, web, subdomain

我怎样才能把我的网站变成一个安全的网站。我希望它在安全网页上运行，例如 Facebook，大多数应用程序都在安全页面上运行。

我想知道我是否必须购买新域名，或者我可以使用我的同一个域名，或者是否有一些设置可以这样做？

我从未使用过安全网络。

或者，如果有一些好的安全提供商等，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:05:20.770

您可以查看 SSL 证书的[Apache 教程](http://onlamp.com/onlamp/2008/03/04/step-by-step-configuring-ssl-under-apache.html)。在本地设置 Apache，您可以了解证书（免费生成自己的证书）并尝试部署一个。

可以在线部署所谓的自签名 SSL 证书，但会提醒用户它不受信任。您所支付的是证书颁发机构的信任，而证书颁发机构又支付了网络浏览器的费用以信任它们。“信任链”。

实际上，一些 ISP 缺乏对 SSL(!) 的支持，因此最好事先建立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:08:20.813

获取 SSL 证书。[http://www.digicert.com/](http://www.digicert.com/)

如果您使用 IIS，请安装证书以指向将保存您的网页的目录。如果您更新所有指向 https:\ 的链接，这将使用户方向更快。不需要不同的域名。

当查看者访问您的站点时，浏览器将重定向到 ssl。

我对 apache 或任何其他 linux 变体无能为力。

# django - 覆盖 Django 配置文件的 profile_detail 视图

> ID：12811726
> 
> 赞同：0
> 
> 时间：2012-10-10T03:57:18.880
> 
> 标签：django, django-profiles

我安装了 django 配置文件/注册，一切似乎都很好。当用户注册时，他们的个人资料也会被创建。现在我要做的是根据用户的用户 ID 查询另一个公司模型。我不想更改 django-profiles 视图，而是在 url 上添加额外字段以匹配和查询公司模型。当我对 url 进行硬编码时（例如：输入 userprofile 的 id 号，就像 userprofile=1 一样，它可以工作。）。因此，当用户登录并转到配置文件详细信息页面时，分配给他们的公司会根据他们的 user.id 进行查询。

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    #email = models.CharField(max_length=200, blank=True, null=True)
    # Other fields here
    #company = models.ForeignKey(Company,blank=True,null=True)    
    #office = models.CharField(max_length=200, blank=True, null=True)    
    def __unicode__(self):
        return self.user.username

class Company(models.Model):
    userprofile = models.ForeignKey(UserProfile, null=True, blank=True)
    comp_name = models.CharField(max_length=200,blank=True,null=True)
    comp_address = models.CharField(max_length=200,blank=True, null=True)
    comp_email = models.CharField(max_length=200,blank=True, null=True)
    comp_zip = models.IntegerField(blank=True, null=True)
    comp_phone = models.IntegerField(blank=True, null=True)
    comp_city = models.CharField(max_length=200,blank=True, null=True)
    #comp_state = models.USStateField(blank=True, null=True
    comp_state = models.CharField(blank=True, max_length=2)
    compwebsite = models.URLField(max_length=200, blank=True, null=True)
    twitterurl = models.URLField(max_length=200, blank=True, null=True)
    facebookurl = models.URLField(max_length=200, blank=True, null=True)
    def __unicode__(self):
        return self.comp_name

url(r'^profiles/(?P<username>\w+)/$', 'profiles.views.profile_detail', {'extra_context':{'queryset':Company.objects.filter(userprofile=request.user.id)}},), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:51:23.067

您可能想从视图内部调用它

```
from *** import profile_detail

def my_view(request, username):
    extra_context = {}
    return profile_detail(request, queryset=Company.objects.filter(userprofile=request.user.id),
                       template_name="my_template.html",
                       paginate_by=20,
                       extra_context=extra_context) 
```

# php - 在 Asterisk 拨号方案中将单词转换为数字

> ID：12811727
> 
> 赞同：3
> 
> 时间：2012-10-10T03:57:37.097
> 
> 标签：php, perl, asterisk, agi

我花了最后 3 周的时间试图让它发挥作用。我想使用 github 上提供的 googletts.agi 脚本从星号进行语音拨号。它可以工作，但问题是 googletts 有时会在“话语”变量中返回一个单词而不是一个数字，例如 18004633339 可能会返回为“180046 tree tree tree nite”或“1800 force 6 tree tree 339”等。

[https://github.com/zaf/asterisk-googletts](https://github.com/zaf/asterisk-googletts) https://github.com/zaf/asterisk-speech-recog

下面的链接有一个将单词转换为数字的脚本

[http://www.karlrixon.co.uk/writing/convert-numbers-to-words-with-php](http://www.karlrixon.co.uk/writing/convert-numbers-to-words-with-php)

**这是我的拨号方案**

```
exten => 2255,1,Answer()
exten => 2255,n,Wait(1)
;exten => 2255,n,flite("Say the number you wish to call. Then press the pound key.")
exten => 2255,n,Espeak("Say the number you wish to call. Then press the pound key.")
exten => 2255,n(record),agi(speech-recog.agi,en-US)
exten => 2255,n,Noop(= Script returned: ${status} , ${id} , ${confidence},            ${utterance} =)
exten => 2256,6,Set(NUM2CALL=${utterance}) 
```

**此处需要代码，该代码将采用 ${utterance} 或 NUM2CALL 变量，如果其中有单词，则将其修复为星号可以拨打的正确号码**

```
exten => 2255,n,SayDigits("${NUM2CALL2}")
exten => 2255,n,Background(vm-star-cancel)
exten => 2255,n,Background(vm-tocallnum)
exten => 2255,n,Read(PROCEED,beep,1)                                        
exten => 2255,n,GotoIf($["foo${PROCEED}" = "foo1"]?15:16)
exten => 2255,15,Goto(outbound-allroutes,${NUM2CALL2},1)
exten => 2255,16,hangup 
```

我在想，如果我可以添加到字典数组中，我最终将拥有一个非常准确的语音拨号器。我花了 4 天时间测试 tropo ASR，它对于个位数来说非常准确，但多位数的准确度会很快下降。提前感谢您的任何帮助。我会将完成的脚本作为项目发布在 github 上。我也尝试使用pocketphinx 使用TIDIGITS 语法和模型，但这比pocketsphinx 默认字典更糟糕，它给出了类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:10:59.997

使用[AGI](http://www.voip-info.org/wiki/view/Asterisk+AGI+php)，[PHP-AGI](http://phpagi.sourceforge.net/)你可以调用一个函数，即。`convert_word_to_number`并[设置一个变量](http://www.voip-info.org/wiki/view/set+variable)，您可以在执行 AGI 脚本后在拨号盘中使用该变量。

在拨号方案中

```
exten => 2256,6,Set(NUM2CALL=${utterance})
exten => 2256,n,AGI(/home/asterisk/agi-bin/words_agi.php); 
```

和 AGI 脚本：

```
#!/usr/bin/php -q
<?php
set_time_limit(30);
require_once 'phpagi.php';

// replace this function with yours
function convert_word_to_number($word) {
   $words = array(
     'tree',
     'too',
      // ...
    );
    $numbers = array(3,2)
   // replace words with numbers - example only
   $num = str_replace($words, $numbers, $word);
   return $num;
}

$agi = new AGI();
$word = $agi->get_variable("NUM2CALL"); 
$spokenNumber = convert_word_to_number($word);
$agi->set_variable("NUM2CALL", $spokenNumber); 
```

你只需要实现一个更准确的版本`convert_word_to_number`来用数字替换单词，用你的函数替换它。

# json - 在 vb.net 代码后面的 JSON 反序列化

> ID：12811730
> 
> 赞同：0
> 
> 时间：2012-10-10T03:57:50.757
> 
> 标签：json

我是一名 java 开发人员，我第一次在 .net 上工作。我在 YUI 中使用过 JSON，但这是我第一次使用 JQUERY。我已经使用将 Java 脚本对象转换为 JSON 字符串，`JSON.stringify()`并且在后面的代码中得到了相同的 JSON 字符串，但是当我尝试反序列化为 .net 对象时，我得到的属性值是整数，但我没有得到字符串对象的值。

// 客户端

```
$("#ButtonSave").click(function () {

    //convert gridview to JSON
    var jsonData = new Array();
    $.map($("table[id*=Gridview1] tr"), function (item, index) {
        if ($(item).find("input[type=text]").length > 0) {
            jsonData[index] = new Object();
            jsonData[index].charge = $(item).find("input[type=text][id*=txtCharge]").val();
            jsonData[index].produce = $(item).find("input[type=text][id*=txtProduce]").val();         
            jsonData[index].weight = $(item).find("input[type=text][id*=txtWeight]").val();
            jsonData[index].feet = $(item).find("input[type=text][id*=txtFeet]").val();
            jsonData[index].orderNumber = $(item).find("input[type=text][id*=txtOrderNumber]").val(); 
            jsonData[index].comments = $(item).find("input[type=text][id*=txtComments]").val();
        }
    });

    var jsonStringData = JSON.stringify(jsonData);

    var jqxhr = $.ajax({
        url: "Correction.aspx",
        type: "POST",
        timeout: 10000,
        data: "jsonData=" + jsonStringData
    })
    .error(function () {
        alert('Error');
    })
    .success(function (data) {
        alert('Success');
    });
}); 
```

//代码后面

```
 If Request.Form("jsonData") IsNot Nothing Then

        Dim cita As New TurnDetailVO
        Dim ser As New JavaScriptSerializer()
        Dim items As List(Of TurnDetailVO) = ser.Deserialize(Of List(Of TurnDetailVO))(Request.Form("jsonData"))

        items.RemoveAt(0)

        For Each cita In items
            Console.WriteLine(cita.CHARGE_ID, cita.PROD_ID)
        Next

 End If 
```

// 值对象

```
Imports Microsoft.VisualBasic
Imports System.Runtime.Serialization

Public Class TurnDetailVO

Private _CHARGE As String
Private _PROD As String
Private _WEIGHT As Integer
Private _FEET As Integer
Private _ORDER_NUMBER As String    
Private _COMMENTS As String

Public Sub New()

    _CHARGE = " "
    _PROD = " "
    _WEIGHT = 0 
    _FEET = 0
    _ORDER_NUMBER = " "
    _COMMENTS = " "

End Sub

Public Property CHARGE() As String
    Get
        Return _CHARGE
    End Get
    Set(ByVal value As String)
        _CHARGE = value
    End Set
End Property

Public Property PROD() As String
    Get
        Return _PROD
    End Get
    Set(ByVal value As String)
        _PROD = value
    End Set
End Property

Public Property WEIGHT() As Integer
    Get
        Return _WEIGHT
    End Get
    Set(ByVal value As Integer)
        _WEIGHT = value
    End Set
End Property

Public Property FEET() As Integer
    Get
        Return _FEET
    End Get
    Set(ByVal value As Integer)
        _FEET = value
    End Set
End Property

Public Property ORDER_NUMBER() As String
    Get
        Return _ORDER_NUMBER
    End Get
    Set(ByVal value As String)
        _ORDER_NUMBER = value
    End Set
End Property

Public Property COMMENTS() As String
    Get
        Return _COMMENTS
    End Get
    Set(ByVal value As String)
        _COMMENTS = value
    End Set
End Property

Public Function Clone() As TurnDetailVO
    Return DirectCast(Me.MemberwiseClone(), TurnDetailVO)
End Function

End Class 
```

// JSON 字符串

```
"[null,
{"charge":"T860243","produce":"S877020","weight":"13188","feet":"2898","orderNumber":"AN46270","comments":""},
{"charge":"T860243","produce":"S877021","weight":"13538","feet":"2978","orderNumber":"AN46270","comments":""},
{"charge":"T860243","produce":"S877022","weight":"30118","feet":"6618","orderNumber":"AN46270","comments":""},
{"charge":"T860243","produce":"S877023","weight":"23455","feet":"3345","orderNumber":"AN46270","comments":""}]" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:50:35.117

由于您的两个字段名称不同，因此反序列化的行为似乎不如预期。

如果我将属性名称更改`PROD`为`PRODUCE`和`ORDER_NUMBER`，`ORDERNUMBER`我可以让它工作。请注意，您可以保留私有字段名称，只是需要更改的属性名称。

# c# - 运行命令提示符的输出

> ID：12811733
> 
> 赞同：0
> 
> 时间：2012-10-10T03:42:21.520
> 
> 标签：c#

在下面的代码中，每当我发送任何命令（如 dir 或任何其他命令）时，此函数都会卡在 while 循环中。我希望每次发送命令时都输出命令提示符以在执行命令后不关闭进程的情况下执行。

```
public void shell(String cmd)
{
        ProcessStartInfo PSI = new ProcessStartInfo();
        PSI.FileName = "c:\\windows\\system32\\cmd.exe";
        PSI.RedirectStandardInput = true;
        PSI.RedirectStandardOutput = true;
        PSI.RedirectStandardError = true;
        PSI.UseShellExecute = false;
        Process p = Process.Start(PSI);
        StreamWriter CSW = p.StandardInput;
        StreamReader CSR = p.StandardOutput;
        CSW.WriteLine(cmd);
        CSW.Flush();
        while(!(CSR.EndOfStream))
        {
            Console.WriteLine(CSR.ReadLine());
        }

        CSR.Close();

} 
```

以下是完整的代码：-

```
 namespace ConsoleApplication8
 {

     class Program
     {
         public static void shell(String cmd)
         {

             ProcessStartInfo PSI = new ProcessStartInfo();
             PSI.FileName = "c:\\windows\\system32\\cmd.exe";
             PSI.RedirectStandardInput = true;
             PSI.RedirectStandardOutput = true;
             PSI.RedirectStandardError = true;
             PSI.UseShellExecute = false;
             Process p = Process.Start(PSI);
             StreamWriter CSW = p.StandardInput;
             StreamReader CSR = p.StandardOutput;
             CSW.WriteLine(cmd);
             CSW.Flush();
             while (!(CSR.EndOfStream))
             {
                 Console.WriteLine(CSR.ReadLine());
             }

             CSR.Close();

         }
         static void Main(string[] args)
         {
             string cmd="";
             while (cmd != "exit")
             {
            cmd=Console.ReadLine();
            shell(cmd);
             }
         }
     }
 } 
```

目的 --> 我想创建一个程序，让用户可以执行命令提示符的命令。上面的程序每次发送一些命令时都会创建 cmd.exe 进程。但这不是一个大问题。我可以轻松解决这个问题。主要问题是每次我发送命令时程序都会卡在 while (!(CSR.EndOfStream))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:15:55.670

您可以尝试使用此代码

```
 ProcessStartInfo PSI = new ProcessStartInfo();
         PSI.FileName = "c:\\windows\\system32\\cmd.exe";
         //PSI.RedirectStandardInput = true;
         PSI.RedirectStandardOutput = true;
         PSI.RedirectStandardError = true;
         PSI.UseShellExecute = false;
         Process p = Process.Start(PSI);
         StreamWriter CSW = p.StandardInput;

         string output = p.StandardOutput.ReadToEnd(); 

         Console.WriteLine(output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:15:08.533

直接写入输入流时，我能够复制您的 cmd.exe 挂起问题。当您像这样运行程序时，.NET 无法判断输出流何时完成，因此当您调用 ReadToEnd() 时它会无限期挂起（或者如果您使用一段时间直到流结束）。你最好的办法是做这样的事情，你用一个作为参数提供的命令来启动 cmd.exe。然后它将知道在执行完命令后关闭输出流，将控制权返回给调用者。

这是一个例子。

```
static void Main()
{
    while (true)
    {
        Console.Write("> ");
        string input = Console.ReadLine();
        string output = RunCommand(input);
        Console.WriteLine(output);
    }
}

static string RunCommand(string command)
{
    Process p = Process.Start(new ProcessStartInfo()  {
        FileName = "cmd",
        Arguments = "/c \"" + command + "\"",
        RedirectStandardError = true,
        RedirectStandardInput = true,
        RedirectStandardOutput = true,
        UseShellExecute = false
    });

    string output = p.StandardOutput.ReadToEnd();
    string error = p.StandardError.ReadToEnd();
    p.WaitForExit();
    return output + error;
} 
```

这是将产生的输出示例，

```
> echo hello, world
hello, world

> ping google.com

Pinging google.com [74.125.225.199] with 32 bytes of data:
Reply from 74.125.225.199: bytes=32 time=63ms TTL=49
Reply from 74.125.225.199: bytes=32 time=61ms TTL=49
Reply from 74.125.225.199: bytes=32 time=61ms TTL=49
Reply from 74.125.225.199: bytes=32 time=61ms TTL=49

Ping statistics for 74.125.225.199:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 61ms, Maximum = 63ms, Average = 61ms

> 
```

# java - HTTP 状态 500 错误。Eclipse+Tomcat+MS SQL 2005

> ID：12811737
> 
> 赞同：0
> 
> 时间：2012-10-10T03:58:30.233
> 
> 标签：java, sql-server-2005, jsp

我正在尝试此代码，以便了解如何将 MS SQL 2005 连接到 Eclipse 和 Tomcat 7 作为我的服务器。我是制作 Java Web 应用程序的新手，所以请多多包涵。在下面的错误中，我如何追踪错误的原因在哪里？该项目有2个jsp和3个类文件。`index.jsp`, `result.jsp`,和. `SQLConnection.java`_`Items.java``ItemController.java`

**错误是这样的，**

```
type Exception report

message 

description The server encountered an internal error () that prevented it from    fulfilling this request.

exception 

org.apache.jasper.JasperException: java.lang.NullPointerException
      org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.NullPointerException
connection.SQLConnection.execSelectQuery(SQLConnection.java:35)
model.Item.lastItems(Item.java:10)
org.apache.jsp.index_jsp._jspService(index_jsp.java:83)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

SQLConnection.java 和 index.jsp 的代码如下；

SQLConnection.java

```
 package connection;
    import java.sql.*;
    public class SQLConnection {
    protected Connection con=null;
    protected ResultSet rs=null;

    public SQLConnection(String address)
    {
        try
    {
    String conString = "jdbc:sqlserver://localhost:1433;databaseName=Chingdb;    integratedSecurity=true;";
con = DriverManager.getConnection(conString);
}catch(SQLException sqlError){
//ERROR MANAGEMENT HERE
}
}
public boolean execQuery(String sql)
{
boolean result = false;
try
{
Statement stmt = con.createStatement();
stmt.execute(sql);
result = true;
}catch(SQLException sqlError){
//ERROR MANAGEMENT HERE
result = false;
}
return result;
}
public void execSelectQuery(String sql)
{
try
{
Statement stmt = con.createStatement();
this.rs = stmt.executeQuery(sql);
}catch(SQLException sqlError){
//ERROR MANAGEMENT HERE
}
}
public void disconnect()
{
try
{
con.close();
}catch(SQLException sqlError){
//ERROR MANAGEMENT HERE
}

}
} 
```

索引.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org    /TR/html4/loose.dtd">
<%@page import="model.Item"%><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Todo-List App</title>
</head>
<body>
<h2>Add a new item</h2>
<form action="addItem" method="post">
<table>
<tr>
<td><input type="text" value="I have to..." onClick="this.value('')" name="todo"/></td>
<td><input type="submit" value="Send" name="send"/> </td>
</tr>
</table>
</form>
<h2>Todo-List</h2>
<%
Item item = new Item();
String[] lastest = item.lastItems();
for(int i=0;i<lastest.length;i++)
{%>
<%=lastest[i] %> <br>
<%}item.disconnect();
%>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:28:01.157

错误堆栈跟踪表明您正在进入`NullPointerException`的方法`SQLConnection.java`，`execSelectQuery`并且当您从 调用此方法时遇到此异常 `Item.java`。

```
java.lang.NullPointerException
connection.SQLConnection.execSelectQuery(SQLConnection.java:35) 
```

将调试点放置`Item.java`在 中`model.Item.lastItems(Item.java:10)`，然后放置在`Statement stmt = con.createStatement();`

我怀疑你`Connection`可能是NULL。

# php - Uncaught ReferenceError: tinyMCE is not defined , joomla 2.5.7 error on Chrome

> ID：12811739
> 
> 赞同：3
> 
> 时间：2012-10-10T03:59:04.397
> 
> 标签：php, joomla2.5, joomla-article

我正在使用 Joomla 2.5.7，尝试添加或修改文章时出现此错误：

> 未捕获的 SyntaxError：输入意外结束

但这仅发生在 Chrome 上，如果我尝试使用 FireFox 创建文章，那么它就可以了。

你们中有人以前有过这个错误吗？

似乎 Chrome 无法正确加载 tiny_mce.js:1 文件并获得：

> 未捕获的 SyntaxError：输入意外结束

在得到之前

> 未捕获的 SyntaxError：输入意外结束

，我再次上传了文件，但仍然出现错误，并且仍然只能在 FF 上使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T09:31:50.603

当没有编辑器在 joomla 管理员中工作时，您只会看到一个 textarea 并且在 javascript 控制台中存在未定义的错误，这可能是您没有在 configuration.php 中设置 live_site 参数。它应该是 joomla 索引的绝对 URL，例如：

> 公共 $live_site = ' [http://www.example.com/example](http://www.example.com/example) ';

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T22:08:33.797

使用常见 Joomla 编辑器解决此问题和其他问题的最简单方法是迁移到 JCE（Joomla 内容编辑器），可从以下网址下载： http: [//www.joomlacontenteditor.net/](http://www.joomlacontenteditor.net/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-04T13:12:54.720

我遇到了和你一样的问题。

在 chrome 中，清除所有浏览数据，然后重新启动 chrome。

问题将得到解决。

# struct - 使用 GNU Assembler 动态创建一个结构并返回一个指向它的指针

> ID：12811742
> 
> 赞同：0
> 
> 时间：2012-10-10T03:59:08.147
> 
> 标签：struct, gnu-assembler

使用 GNU 汇编器我试图调用 malloc 来创建一个 C 结构，将值插入该结构并返回一个指向该结构的指针。下面是结构：

```
struct node {
    void     *next;     
    void     *last; 
    char     *name;     
    int      id;        
    uint8_t  number;
    uint8_t  numberTwo;
    uint8_t  numberThree;
    uint8_t  numberFour;
} 
```

下面是我正在使用的 GNU 程序集：

```
 push %ebp
    movl %esp, %ebp
    subl $0x1c, %esp
    #movl $20, (%esp)   #I've tried this but it doesn't seem to help
    push $20            #Struct is 20 bytes
    call malloc     
    test %eax, %eax
    jz allocateFailed
    jmp allocateOK

allocateFailed:
    leave
    ret

allocateOK:
    movl 8(%ebp), %edx
    movl %edx, 8(%eax)
    movl 12(%ebp), %edx
    movl %edx, 12(%eax)
    leave
    ret 
```

我已经更新了代码以远离使用 %ebx 寄存器，并查看了汇编程序如何处理此函数的 Objdump。

我得到的参数很好，但是当我尝试将它们放入新创建的结构中时，我得到了一个段错误。下面是核心转储。

程序以信号 6 终止，Aborted。
0 0xb7727424 在 __kernel_vsyscall ()

下面是我在 gdb 中运行回溯得到的结果：

```
0  allocateOK () at new_student.s:25
1  0x00000014 in ?? ()      #Not sure what this is coming from
2  0xb7fc5a20 in ?? () from /lib/i386-linux-gnu/libc.so.6
3  0x080485ed in test ()    #function that calls and passes in the parameters
4  0x080487b4 in main () 
```

我还用 C 语言编写了这个函数，并使用 --gstabs 和 -o 进行编译，并使用 objdump 来查看它。我似乎很接近我的，但我似乎无法弄清楚。

```
sub    $0x1c,%esp
movl   $0x14,(%esp)
call   8048350 <malloc@plt>
mov    0x20(%esp),%edx
mov    %edx,0xc(%eax)
mov    0x24(%esp),%edx
mov    %edx,0x8(%eax) 
```

任何帮助是极大的赞赏。我从未使用程序集（仅 C）来创建和使用结构。我做了一些研究并尝试了一些事情，但我似乎明白了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:14:35.670

最佳猜测：由于您在使用`%ebx`时没有保存和恢复它，因此您正在破坏调用者在其中的某些内容，从而在您的例程返回后导致问题。此外，您只是设置新分配的结构的`name`and`id`字段；其余的将包含未初始化的垃圾。使用调试器获取中止发生位置的堆栈跟踪。

# javascript - 如何从 CoffeeScript 脚本中启动 CoffeeScript repl？

> ID：12811744
> 
> 赞同：4
> 
> 时间：2012-10-10T03:59:15.200
> 
> 标签：javascript, node.js, coffeescript, read-eval-print-loop

如果我做

```
repl = require 'repl'

repl.start {useGlobal: true} 
```

它启动一个节点 repl。如何改为启动 CoffeeScript repl？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:12:51.380

Nesh 是一个尝试让它变得更容易和可扩展的项目：

[http://danielgtaylor.github.com/nesh/](http://danielgtaylor.github.com/nesh/)

它提供了一种嵌入 REPL 的方法，支持多种语言，如 CoffeeScript 以及提供异步插件架构，支持在启动时在 REPL 的上下文中执行代码等。例如：

```
nesh = require 'nesh'

nesh.loadLanguage 'coffee'

nesh.start (err, repl) ->
    nesh.log.error err if err 
```

它还支持一系列带有默认插件的选项，并公开了一些内置的便利功能：

```
opts =
    welcome: 'Welcome to my interpreter!'
    prompt: '> '
    evalData: CoffeeScript.compile 'hello = (name="world") -> "Hello, #{world}!"', {bare: true}

nesh.start opts, (err, repl) ->
    nesh.log.error err if err 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T06:24:34.400

我认为该`coffee-script`模块不会像 Node`repl`模块那样导出要以编程方式使用的 REPL 功能。但是 CoffeeScript 有一个[`repl.coffee`](https://github.com/jashkenas/coffee-script/blob/master/src/repl.coffee)可以使用的文件，即使它没有在主`coffee-script`模块中导出。从（运行命令时执行的文件）[得到提示，`command.coffee`](https://github.com/jashkenas/coffee-script/blob/ace4837365447c665c56975ae7080029cbd78d53/src/command.coffee#L75)`coffee`我们可以看到 REPL 仅通过请求`repl`文件即可工作。所以，运行这个脚本应该会启动一个 CoffeeScript REPL：

```
require 'coffee-script/lib/coffee-script/repl' 
```

然而，这种方法是*相当 hacky*的。最重要的缺陷是它在很大程度上取决于`coffee-script`模块内部的工作方式和组织方式。没有什么可以阻止`repl.coffee`文件从 中移出`coffee-script/lib/coffee-script`或更改其工作方式。

一种更好的方法可能是`coffee`不带参数调用命令，就像从命令行从 Node 执行的操作一样：

```
{spawn} = require 'child_process'
spawn 'coffee', [], stdio: 'inherit' 
```

该[`stdio: 'inherit'`选项](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)使生成的命令从标准输入读取并写入当前进程的标准输出。

# javascript - 除非在开发模式下，否则 AngularJS 小胡子不会在 IE9 中加载

> ID：12811745
> 
> 赞同：1
> 
> 时间：2012-10-10T03:59:19.947
> 
> 标签：javascript, angularjs

我有一个奇怪的错误，AngularJS 似乎没有解析/编译小胡子并将其绑定到第一次加载站点时的变量（参见屏幕截图）。如果我进入开发模式并刷新页面，问题就会消失；因此很难调试，因为我看不到错误。

![在此处输入图像描述](../Images/da2ed4be0d05d570c3ee06e287726b68.png)

[在http://www.notable.ac](http://www.notable.ac)上有一个现场版本的网站

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T13:05:49.200

如果是控制台问题...

只需在 JS 的根目录中添加一个存根：

```
//make sure console.log exists in ie.
window.console = window.console || {};
window.console.log = window.console.log || function(){}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:02:36.730

控制台在禁用开发工具的 IE 中不可用，您可以测试：

```
if(console && console.log) { 
  console.log('ok');
} 
```

# php - 覆盖模型返回的值

> ID：12811751
> 
> 赞同：-2
> 
> 时间：2012-10-10T04:00:45.153
> 
> 标签：php, zend-framework

是否可以覆盖 Model->fetchAll() 中的值，使其全局工作。我试图在模型中覆盖它，但不起作用：

```
class Application_Model_DbTable_OdbcPush extends Zend_Db_Table_Abstract
{

    public function __get(string $col)
    {
        $res = parent::__get($col);
        if ($col == "lastrun") {
            $res = ($res == "1912-12-12 00:00:00+07" ? NULL : $res);
        }
        return $res;
    }
    //...
} 
```

在控制器中：

```
 $odbcModel = new Application_Model_DbTable_OdbcPush();
    $rs = $odbcModel->fetchAll( $select ); 
```

当 col 名称为“lastrun”时，我想覆盖从 fetchAll()、find() 等返回的值；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:59:47.597

你这样做的方式是行不通的。`__get`用于从`protected`或`private`属性中获取数据，通常与 getter 一起使用。

例如，如果您在课堂上实现`__get()`，您`Application_Model_DbTable_OdbcPush`可以执行以下操作：

```
$model = new Application_Model_DbTable_OdbcPush();
//echo out the _primary property (primary key of the table)
echo $model->primary; 
```

并期望它起作用。因为`_primary`作为属性存在于`Zend_Db_Table_Abstract`.

要执行您想要执行的操作，您需要在返回结果集后执行此操作（除非您想要重写整个 Zend Db 组件）。只需通过 a 运行结果集`foreach`并将值更改为`lastrun`您想要的任何值。

我试图找到一个地方来覆盖 Zend Db 组件来做你想做的事，但它会涉及到许多类。

请记住，当使用 DbTable 类时，它们只与一个表交互。您需要为要影响的每个表复制代码，或者您需要扩展某种基类。

您始终可以选择直接使用 Sql 来构建您可以提出的任何查询。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:39:34.150

找到了答案，我在这里分享的社区：D [http://framework.zend.com/manual/1.12/en/zend.db.table.row.html](http://framework.zend.com/manual/1.12/en/zend.db.table.row.html)

所以我们必须重载 Zend_Db_Table_Row 并将其分配给 model/dbtable：

```
class Application_Model_DbTable_Row_OdbcPush  extends  Zend_Db_Table_Row_Abstract
{

     // do some override here

}

class Application_Model_DbTable_OdbcPush extends Zend_Db_Table_Abstract
{

    protected    $_name = 'odbcpush';
    protected    $_primary = 'id';
    private      $_global = null;
    protected    $_rowClass = "Application_Model_DbTable_Row_OdbcPush";

    // etc

} 
```

# java - 向 Java 类添加多个方法

> ID：12811755
> 
> 赞同：1
> 
> 时间：2012-10-10T04:01:44.500
> 
> 标签：java, c++, macros, swig

我需要为 C++ 端的某些类添加一个方法。例如，我在 c++ 端有类 ABCD，在 java 端有类 ABCD，由 swig 生成，在 D 类（java 端）中，我需要添加 3 个方法，如下所示：

```
public abstract class D {
    public abstract void do(A a);
    public abstract void do(B b);
    public abstract void do(C c);
} 
```

我写了一个 swig 宏来做到这一点

%define MYMACRO(CLASSTYPE)

```
%typemap(javacode) D %{
  public void do(CLASSTYPE item);
%}
%enddef

MYMACRO(A);
MYMACRO(B);
MYMACRO(C); 
```

但它只适用于最后一个宏，我尝试了 **%typemap(javabody)** 并且它也不起作用。请帮我

# android - 如何创建xml

> ID：12811756
> 
> 赞同：-2
> 
> 时间：2012-10-10T04:01:45.657
> 
> 标签：android, xml, json

> **可能重复：**
> [JSON 到 XML 转换的 Java 实现](https://stackoverflow.com/questions/559296/java-implementation-of-json-to-xml-conversion)
> [将 Json 转换为 Xml 的最简单方法](https://stackoverflow.com/questions/6742705/simplest-method-to-convert-json-to-xml)

我想将其更改`json`为`xml`，我不知道如何创建`xml`相同的，请有人告诉我一些代码如何将其更改`json`为`xml`：-- `json`代码为：-

```
 {
     "pizza": [{
         "title": "Pizza Item 1",
         "description": "Lorem ipsum dolor sit amet, consectetur adipisicing elit",
         "cost": "$0.00",
         "imageUri": "http://www.pizzahut.com.au/images/menu/Pizza-Lge-BBQ_Meatlovers.png"
     }, {
         "title": "Pizza Item 2",
         "description": "Lorem ipsum dolor sit amet, consectetur adipisicing elit",
         "cost": "$0.00",
         "imageUri": "http://www.pizzahut.com.au/images/menu/Pizza-Lge-BBQ_Meatlovers.png"
     }],
     "cake": [{
         "title": "Cake Item 1",
         "description": "Lorem ipsum dolor sit amet, consectetur adipisicing elit",
         "cost": "$0.00",
         "imageUri": "http://www.allindiaflorist.com/imgs/cake4.jpg"
     }, {
         "title": "Cake Item 2",
         "description": "Lorem ipsum dolor sit amet, consectetur adipisicing elit",
         "cost": "$0.00",
         "imageUri": "http://www.allindiaflorist.com/imgs/cake4.jpg"
     }, {
         "title": "Cake Item 3",
         "description": "Lorem ipsum dolor sit amet, consectetur adipisicing elit",
         "cost": "$0.00",
         "imageUri": "http://www.allindiaflorist.com/imgs/cake4.jpg"
     }]
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:20:54.323

我通过谷歌找到了这个在线转换器。希望能帮助到你

[http://jsontoxml.utilities-online.info/](http://jsontoxml.utilities-online.info/)

转换后，在开头添加 doc，在末尾添加 /doc，并用括号括起来。

在第二行包括某种类型的 .css 格式来显示 xml 和 presto :)

# linux - 编写一个 awk 命令来打印包含至少一个字段的每一行

> ID：12811757
> 
> 赞同：0
> 
> 时间：2012-10-10T04:01:53.040
> 
> 标签：linux, unix, ubuntu

如何编写只打印至少包含一个字段的行的 awk 命令

```
awk '{if (NF>0) print }' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:05:05.163

您的命令有效，并打印带有一个或多个字段的行。但是`awk`默认打印，所以你可以简化它：

```
awk 'NF > 0' file.txt 
```

# wpf - WPF 列表框分组

> ID：12811760
> 
> 赞同：3
> 
> 时间：2012-10-10T04:02:37.627
> 
> 标签：wpf, listbox, grouping

我需要在下面的列表框中显示。场景是它将有多个组，然后是水平对齐的项目。

```
 GroupA
      GroupA Description
    GroupB
      GroupB Description
    Items Available
     ItemA ItemB ITemC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:08:12.120

您可以尝试使用此代码

```
<Style x:Key="ContainerStyle" TargetType="{x:Type GroupItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Expander Header="{Binding ....}" IsExpanded="True">
                            <ItemsPresenter />
                        </Expander>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
</Style>

<ListBox x:Name="lbPersonList" Margin="19,17,162,25" AlternationCount="2">
            <ListBox.GroupStyle>
                <GroupStyle ContainerStyle="{StaticResource ContainerStyle}"/>
            </ListBox.GroupStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding ...}"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
</ListBox> 
```

注意：调整您对代码的绑定

# javascript - 可以用javascript调用方法继承原型吗？

> ID：12811761
> 
> 赞同：0
> 
> 时间：2012-10-10T04:02:43.633
> 
> 标签：javascript, prototype

我知道你可以让一个 javascript 实例化对象继承另一个构造函数的原型`constructer.prototype.__proto__ = otherConstructer.prototype`，但是你可以使用这样的`call`方法来做同样的事情吗？：

```
function constructor () {
  otherConstructor.call(this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:50:10.343

不，原型不能被替换，除非引用对象本身并直接用 __proto__ 属性替换它，这在所有实现中都不存在。看这个示例代码：

```
function B() {
    this.someValue = "BBB";
}
B.prototype.testfunc = function() {
    console.log("Called from B: someValue =" + this.someValue);
}

function A() {
  this.someValue = "AAA";
  return B.call(this);
}
A.prototype.testfunc = function() {
    console.log("Called from A: someValue =" + this.someValue);
}

var test = new A();
test.testfunc();

// Will output "Called from A: someValue =BBB" 
```

如您所见，B 构造函数**被**正确调用，对象设置来自 B 而不是 A，但对象的原型仍然来自 A。当然，您可以替换单个函数：

```
test.testfunc = B.prototype.testfunc;
test.testfunc();

// Will output "Called from A: someValue =BBB" 
```

如果您想很好地解释为什么会这样，请查看[此问题](https://stackoverflow.com/questions/7015693/how-to-set-the-prototype-of-a-javascript-object-that-has-already-been-instantiat)的已接受答案。

**编辑**：创建 A 对象时，与 B.prototype 没有关联。如果你修改了代码使得 A.prototype.testfunc 没有被定义，那么即使 A 构造函数调用了 B，调用 test.testfunc() 也会导致一个未定义的异常。

# c++ - Windows 8 中的 Dev C：gcc 内部错误

> ID：12811762
> 
> 赞同：16
> 
> 时间：2012-10-10T04:02:54.817
> 
> 标签：c++, c, gcc, compiler-construction, dev-c++

我是一个C编程课的助教，导师使用Dev C++作为该课的编译器。我个人会使用不同的，但这里不是我的选择。最近我安装了 Windows 8 Professional 64 位，虽然我的大学在 Dreamspark 上可用，所以我可以从一些竞赛的地铁应用程序开发开始。不幸的是，Dev C++ 已经停止编译。它以前在 Windows 7 64 位上运行良好。

编译该报告时出现错误：

```
Compiler: Default compiler
Executing  gcc.exe...
gcc.exe "C:\Users\James\Documents\Homework\TA_CPRE_185\counter.c" -o "C:\Users\James\Documents\Homework\TA_CPRE_185\counter.exe"    -I"C:\Dev-Cpp\include"   -L"C:\Dev-Cpp\lib" 
gcc.exe: Internal error: Aborted (program collect2)
Please submit a full bug report.
See <URL:http://www.mingw.org/bugs.shtml> for instructions.

Execution terminated
Compilation successful 
```

它说编译成功但事实并非如此，因此没有生成可执行文件。我想知道是否有人知道什么可以让 Dev C++ 在这个版本的 Windows 上工作，所以我不必在虚拟机中运行 Dev C++？我需要它工作，所以我可以做课堂演示。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T22:19:19.427

请告诉你的老师更新 Dev-C++：

[http://sourceforge.net/projects/orwelldevcpp/?source=directory](http://sourceforge.net/projects/orwelldevcpp/?source=directory)

这个附带了一个工作的 MinGW 4.7 或一个 TDM-GCC 4.6.1 (x64) 编译器，修复了无数的错误，并且也是可移植的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T05:35:55.450

我相信 Dev-C++ 带有一个非常旧的 MinGW 版本（如果我没记错的话，是 3.4.x）。4.2.2 之前的 MinGW 版本在 Windows Vista 及更高版本上编译程序时会出现问题，除非它们位于 PATH 上。

因此，您可以更新您的 MinGW 版本（正如您在已经完成的评论中提到的那样），或者您可以将 MinGW\bin 目录添加到系统路径。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-28T08:15:50.023

如果您无法更改您的 MINGW 版本，您可以尝试重命名以下文件：MinGW\libexec\gcc\mingw32\3.4.2\collect2.exe 到 collect2.exe.old

（此解决方案在从 W7 迁移到 W10 后有效）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T00:52:27.643

我收到了同样的错误，但能够通过执行以下操作来解决它。

1.  使用添加/删除程序删除应用程序
2.  禁用用户访问控制
3.  重启
4.  下载 Dev-Cpp 5.4.0 TDM-GCC x64 4.7.1 Setup.exe
5.  右键单击下载的文件并将所有用户更改为“win7兼容模式”并选择“以管理员身份运行”并单击“确定”。
6.  右键单击下载的文件并选择“以管理员身份运行”（注意：这不是必需的，但它是 Windows，因此可以覆盖您的基础）
7.  选择所有默认值，但在最后一个屏幕上，取消选择“立即运行 Dev C++”，然后选择“完成”
8.  打开 Windows 资源管理器并浏览到安装目录 C:\Program Files (x86)\Dev-Cpp 并找到“devcpp.exe”；右键单击并为所有用户选择“win7 兼容模式”，然后选择“以管理员身份运行”并单击“确定”（同样，这可能没有必要，但也不会造成任何伤害）。
9.  双击应用程序并固定到任务栏以方便使用。
10.  打开一个新项目并对其进行测试，它应该可以正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-26T18:10:19.977

我使用[MinGW Installation Manager](https://sourceforge.net/projects/mingw/?source=typ_redirect)下载了最新版本的 C 编译器（此时为 5.3.0-3），并将文件复制到 Dev-Cpp 文件夹中。现在，它在我的 Windows 10 中完美运行。

# ios - iOS：垃圾收集

> ID：12811767
> 
> 赞同：17
> 
> 时间：2012-10-10T04:03:54.527
> 
> 标签：ios, objective-c, automatic-ref-counting

我知道 iOS 自动引用计数，它是基于编译器的功能。但是，我浏览了很多网站，并且对 iOS 程序开发中是否也存在垃圾收集感到困惑？我知道，ARC 和 GC 是不同的。一些链接说，GC 可用于 iOS，一些链接说 GC 仅可用于 Mac OS X 开发。但是，我无法得出结论说 GC 在 iOS 开发中是否存在？请指导我正确的路径或链接，以便我了解它并尝试编程。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T04:10:20.790

iOS 没有垃圾回收的方法。即便如此，当使用 ARC 时，垃圾收集是完全没有必要的（出于所有实际目的）。ARC 在编译时发挥它的魔力，为您进行引用计数，从而使使用任何其他类型的内存管理变得不必要（实际上是不允许的）。

**编辑：**

澄清一下，OS X 目前确实支持垃圾收集，但从 OS X Mountain Lion 开始，它已被弃用（直到几分钟前我才知道）。iOS 从来没有也永远不会支持垃圾回收。与 ARC 相比，垃圾收集的任何优势都没有实际意义，Apple 已经采取行动（有力地）推动我们朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T04:08:32.607

iOS 没有垃圾回收

# php - 对文件的ajax调用第一次通过，第二次得到404错误

> ID：12811768
> 
> 赞同：0
> 
> 时间：2012-10-10T04:04:19.100
> 
> 标签：php, javascript, jquery, ajax, wordpress

我在使用 jQuery post 的函数时遇到了一些问题。该函数应该自己运行几次然后停止，过去它已经成功地完成了。现在发生的情况是，它第一次运行该函数时，php 脚本执行得很好。当它再次尝试自行运行时，我收到 404 错误。这是javascript函数：

```
function ajax_call(senddata){
    $.post("/script.php", senddata,
        function(data) {
            if(data.pointer != "done"){
                setTimeout(ajax_call(data), 100);
            }
        }, "json");
} 
```

php文件的输出是：

```
{"pointer": "1234"} 
```

该错误发生在我正在编写的 wordpress 插件中并显示为：POST [http://xxxxx.local/script.php](http://xxxxx.local/script.php) 404 (Not Found) - load-scripts.php

正如我所说，它第一次起作用。php 文件运行没有错误，因此该文件存在，并且我在函数中正确调用它。它在过去一直有效，我已将两个脚本恢复到我知道它有效的程度。如果有人对导致这种情况的原因有任何想法，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:09:52.093

我不认为你的 JS 有什么问题。我要做的是在 IE 中使用 firebug 或 F12 来查看网络上发生的事情（网络选项卡）。检查请求和响应的详细信息，确保一切都有意义。

之后，我会检查服务器日志，看看您是否可以看到有关该 404 请求的任何信息。

# python - 在 pyglet 中使用 pygame 操纵杆

> ID：12811773
> 
> 赞同：0
> 
> 时间：2012-10-10T04:04:43.447
> 
> 标签：python, pygame, pyglet, joystick, gamepad

我正在尝试使用 pyglet 编写一个简单的游戏，但使用 pygame 进行游戏手柄输入。以下代码成功地将轴值打印到命令行，但除了导入 pyglet 之外，实际上并没有显示 pyglet 窗口：

```
import pygame
import math
import sys
import pyglet

pygame.init()
pygame.joystick.init()    
js = pygame.joystick.Joystick(0)
js.init()

while True:
    pygame.event.get()
    jx = js.get_axis(0)    
    print('axis 0: ' + str(jx)) 
```

我不确定 pygame.event.get() 扮演什么角色，但没有它，返回的轴值总是为零。

所以现在当我尝试在我的 pyglet 事件中使用操纵杆时，我总是得到零作为值（即使我将操纵杆保持在适当的位置并移动窗口以触发绘图事件）：

```
import pygame
import math
import sys
import pyglet

pygame.init()
pygame.joystick.init()    
js = pygame.joystick.Joystick(0)
js.init()

window = pyglet.window.Window()

@window.event
def on_draw():
    jx = js.get_axis(0)    
    print('axis 0: ' + str(jx))
    window.clear()

pyglet.app.run() 
```

如果我将 pygame.event.get() 扔到 on_draw() 中，我会得到一个空白的白色窗口，我无法在没有控制台输出的情况下拖动它（直到我按下 esc，关闭窗口并退出，此时有几个轴值打印出来，全为零）。event.get() 卡住了吗？

因此，尽管[https://groups.google.com/forum/?fromgroups=#!msg/psychopy-users/GWNE4RvGbRE/TNRKM1L2PBwJ](https://groups.google.com/forum/?fromgroups=#!msg/psychopy-users/GWNE4RvGbRE/TNRKM1L2PBwJ)建议了什么，使用 pygame 操纵杆似乎不仅仅涉及导入和初始化。

也许如果我使用 pygame 的事件处理它会起作用，但是当使用 pyglet 从 pygame 偶数处理程序进行绘制时，它可能会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:07:53.920

好吧，我将通过使用包含操纵杆支持的 Pyglet 1.21alpha 来回避这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T19:01:53.063

我认为你的问题是你没有把它放在一个while循环中。这样它就不会只打印一次，所以例如你的函数（我没有测试过）但应该可以工作，看起来像这样。

```
def on_draw():
 while True:
  jx = js.get_axis(0)
  print('axis 0: '+ str(jx))
  window.clear() 
```

# haskell - 与 fileAFormOpt 等效的 IForm 是什么？

> ID：12811776
> 
> 赞同：1
> 
> 时间：2012-10-10T04:05:02.337
> 
> 标签：haskell, file-upload, yesod

我想在带有文件输入标签的现有表单上使用 runInputPost。AForms 存在 fileAFormOpt，但由于没有 fileField 类型，我如何对 IForm 执行相同操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:08:41.603

我建议使用[`lookupFile`](http://hackage.haskell.org/packages/archive/yesod-core/1.1.2.1/doc/html/Yesod-Request.html#v%3alookupFile)该用例。

# matlab - 如何在matlab中绘制平滑图

> ID：12811778
> 
> 赞同：1
> 
> 时间：2012-10-10T04:05:21.760
> 
> 标签：matlab, interpolation

我有大约 100 个数据点，它们大多满足某个功能（但有些点已关闭）。我想将所有这些点绘制成一条平滑的曲线，但问题是这些点分布不均匀。无论如何，这是为了获得平滑的曲线吗？我正在考虑在两者之间插入一些点，但我想到的唯一方法是在两个数据点之间线性插入一些人造点。但这会显示出一个非常奇怪的形状（比如一些尖角）。那么有更好的主意吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:44:17.920

如果您或多或少知道实际曲线应该是什么，您可以尝试将该曲线拟合到您的点（例如使用`polyfit`）。根据偏离的点数和距离，您可以使用最小二乘回归（这很容易开始工作）。如果您有太多异常值（或者它们太大/太小），您还可以使用该`robustfit`函数尝试稳健回归（例如最小绝对偏差拟合）。

如果您可以手动确定异常值，您还可以通过其他点拟合曲线以获得更好的结果，甚至可以`interp1`在这些点上使用插值方法（例如在 MATLAB 中）以获得更平滑的曲线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:54:10.417

如果您知道哪个函数描述了您的数据，那么稳健拟合（例如使用[ROBUSTFIT](http://www.mathworks.com/help/stats/robustfit.html)或带有选项的新的便捷函数[LINEARMODEL](http://www.mathworks.com/help/stats/linearmodel.fit.html)和[NONLINEARMODEL](http://www.mathworks.com/help/stats/nonlinearmodel.fit.html)`robust`）是一个好方法，如果您的数据中有异常值。

如果您不知道描述数据的函数，但想要一条不受异常值影响的平滑趋势线，那么根据我的经验，来自 File Exchange 的[SMOOTHN](http://www.mathworks.com/matlabcentral/fileexchange/25634-robust-spline-smoothing-for-1-d-to-n-d-data)做得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:42:32.160

你看过平滑样条曲线的使用吗？类似于插值样条，但选择的节点和系数是为了最小化最小二乘误差函数。[Matlab 中心](http://www.mathworks.co.uk/matlabcentral/fileexchange/13812-splinefit)提供了一个很好的实现，我已经成功使用它。

# android - Eclipse IDE 中的新 Android 应用程序不会出现按钮

> ID：12811780
> 
> 赞同：0
> 
> 时间：2012-10-10T04:06:06.150
> 
> 标签：android, eclipse

我是新手，我想开始为 android 开发应用程序并为 Web 开发人员安装 Android SDK 和 Eclipse java 7u7 Java EE IDE，除了在 eclipse 中安装 android 插件但再次在按钮上的任务栏中我没有得到制作一个新的 Android 应用程序，我希望保存程序失败或显示为以前或我选择开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:51:30.350

```
file->new->project->android->new android application 
```

再次发布，以便问题不会浮在未回答的部分！

# php - php输出json

> ID：12811781
> 
> 赞同：0
> 
> 时间：2012-10-10T04:06:40.547
> 
> 标签：php, mysql, json

我试图让我可以轻松地使用来自 php/mysql 的 jquery 请求 json 输出。现在我正在使用下面的。谁能推荐一个更好的方法？？

/do.php?username=bob

```
<?php
    $str = $_SERVER['QUERY_STRING'];
    if($str != ''){
        if(preg_match("/username/",$str)){
            parse_str($str);
            $json = json_encode(checkUserName($username));
            echo $json;
        }
    }
    function checkUserName($v){
        $db = new DB();
        $db->connectDB();

        $findUsername = mysql_query("SELECT COUNT(*) FROM user WHERE username = '$v'");
        $countUser = mysql_fetch_row($findUsername);
        if($countUser[0] < 1){
            return array('username' => 'false');
        }else{
            return array('username' => 'true');
        }

        $db->disconnectDB();
    }
?> 
```

我得到了一个干净的 {'username':'false'} 或 {'username':'true'} ，它可以满足我的需要；但是PHP中有更好的方法来做到这一点吗？

哇 - 惊人的答案！我转储了我的旧数据库类并将其替换为：

```
<?php
  function db_connect(){
    $dbh = new PDO("mysql:host=localhost;dbname=thisdb", "dbuser", "dbpass");
    return ($dbh);
  }
?> 
```

然后在我的 do.php 脚本中我做了这个改变：

```
<?php
  if(isset($_GET['username'])){
    header('content-type: application/json; charset=UTF-8');
    echo json_encode(checkUserName($_GET['username']));
  }

  function checkUserName($v){
    $dbh = db_connect();
    $sql = sprintf("SELECT COUNT(*) FROM user WHERE username = '%s'", addslashes($v));
    if($count = $dbh->query($sql)){
      if($count->fetchColumn() > 0){
        return array('username'=>true);
      }else{
        return array('username'=>false);
      }
    }
  }
?> 
```

我的jQuery是：

```
function checkUserName(str){
  $.getJSON('actions/do.php?username=' + str, function(data){
    var json = data;
    if(json.username == true){
      // allowed to save username
    }else{
      // not allowed to save username
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:15:40.130

```
$str = $_SERVER['QUERY_STRING'];
if($str != ''){
    if(preg_match("/username/",$str)){
        parse_str($str);
        $json = json_encode(checkUserName($username));
        echo $json;
    }
} 
```

使用`$_GET`超全局可以更容易地编写它：

```
if (isset($_GET['username'])) {
    echo json_encode(checkUserName($_GET['username']));
} 
```

内部`checkUserName()`：

```
$findUsername = mysql_query("SELECT COUNT(*) FROM user WHERE username = '$v'"); 
```

您应该正确逃脱`$v`：

```
$sql = sprintf("SELECT COUNT(*) FROM user WHERE username = '%s'", mysql_real_escape_string($v));
$findUsername = mysql_query($sql); 
```

更好的是，学习 PDO / mysqli 并使用准备好的语句。

```
$db->disconnectDB(); 
```

除非您使用持久连接，否则您不需要此语句。如果这样做，则应首先将返回值保留在变量中，并且仅在断开连接后才返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:16:26.790

我不知道你的数据库类是什么，但这看起来更漂亮。

```
<?php

function checkUserName($v){
    $db = new DB();
    $db->connectDB();

    $findUsername = mysql_query("SELECT COUNT(*) FROM user WHERE username = '$v'");
    $countUser = mysql_fetch_row($findUsername);
    $db->disconnectDB(); // no code after "return" will do effect

    return ($countUser[0] != 0); // returning a BOOL true is better than a string "true"
}

// use addslashes to prevent sql injection, and use isset to handle $_GET variables.
$username = isset($_GET['username']) ? addslashes($_GET['username']) : '';

// the above line is equal to:
//  if(isset($_GET['username'])){
//      $username = addslashes($_GET['username']);
//  }else{
//      $username = '';
//  }

echo json_encode(checkUserName($username));

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:27:06.970

顺便说一句，如果你想处理 json 数据，`jquery`你可以这样做

```
$.ajax({
            type:"POST",
            data:'username=bob',
            url: "do.php",
            success: function(jsonData){
                var jsonArray = eval('(' + jsonData + ')');

                if(jsonArray.username == 'true'){
                    // some action here
                }else if((jsonArray.username == 'false')){
                    // someother action hera
                }

            }
        },"json"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T04:16:27.323

如果您想要修复，只需将您的 checkUsername 函数替换为以下函数：

```
function checkUserName($v){
  $db = new DB();
  $db->connectDB();  

  $findUsername = mysql_query("SELECT username FROM user WHERE username = '$v' LIMIT 1");

  if(mysql_num_rows($findUsername))
    return array('username' => mysql_result($findUsername,0));
  else
    return array('username' => 'false');

} 
```

或者更简单的方法：

```
if(isset($_GET['username'])){

     $db = new DB();
     $db->connectDB();

     $query = mysql_query(sprintf("SELECT username FROM user 
                            WHERE username='%s'",
                            mysql_real_escape_string($_GET['username'])
                         );

     if(mysql_num_rows($query))
        $json = array('username'=>mysql_result($query,0));
     else
        $json = array('username'=>false);

     header('content-type:application/json');
     echo json_encode($json);
  } 
```

# visual-studio-2012 - 使用 VS2012 构建时，Orchard 模块不起作用

> ID：12811792
> 
> 赞同：2
> 
> 时间：2012-10-10T04:08:43.757
> 
> 标签：visual-studio-2012, orchardcms

我按照本教程[http://docs.orchardproject.net/Documentation/Building-a-hello-world-module为果园制作了一个 hello world 模块](http://docs.orchardproject.net/Documentation/Building-a-hello-world-module)

我在 VS2012 中打开了 csproj 并将项目类型 guid 更改为 MVC [https://stackoverflow.com/a/12811015/828859](https://stackoverflow.com/a/12811015/828859)

当我在 MVC 果园中构建模块时，使用已发布的 DLL。当我尝试去 /helloworld 路线时，我得到`404 resource cannot be found`

当我保存文件并让果园中的动态编译完成时，它可以正常工作。

我希望能够使用 DLL 进行部署，所以有人对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:04:01.010

好的，有两件事。

首先 - 您将无法将您的模块部署为单个 DLL。有很多东西没有编译到 DLL 中，例如。Module.txt 清单。它必须在`/Modules/<YourModuleName>`（以及模块的`.csproj`文件、`.cshtml`文件等）下。否则，Orchard 将无法找到您的模块。

所以**模块的源代码必须在那里**，尽管如果你构建它并且模块的 DLL 在`/Modules/<YourModuleName>/bin`文件夹中，动态编译将不会启动。

第二 -**模块开发应该使用完整的源代码**- 而不是下载的部署包。请[在此处](http://docs.orchardproject.net/Documentation/Setting-up-a-source-enlistment)阅读如何获取完整的源代码。

# ruby-on-rails - Rails 让生产环境在本地机器上使用 SSL

> ID：12811793
> 
> 赞同：2
> 
> 时间：2012-10-10T04:08:44.013
> 
> 标签：ruby-on-rails, ssl

我的网站在使用预编译资产时遇到了问题，这与我的网站在移动中提供的资产完全不同。所以我想，我应该在生产中尝试一下。

这是问题所在，当我这样做时，我得到：

`!! Invalid request`

在我的终端日志和浏览器中，我看到

`Error 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL protocol error.`

平面设计师对现在的混乱情况并不感到好笑，我希望能够重现这个问题。关于如何解决这个 SSL 问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:57:26.993

我曾经能够让网站在生产模式下在我的开发机器上工作的唯一方法是在我的 Rails 服务器（Webrick 或其他）前面设置 Apache。这是一种痛苦的设置，但它的工作原理。您应该能够通过快速搜索找到有关如何使用您的确切配置进行设置的指南。另一种选择是通过配置文件而不是环境启用 SSL，因此无论当前环境如何，您都可以简单地禁用它。这是假设其他所有内容实际上都是正确的并且可以正常工作...

# java - 使 JFrame 标题栏不计入像素

> ID：12811794
> 
> 赞同：1
> 
> 时间：2012-10-10T04:08:46.913
> 
> 标签：java, swing, jframe

我正在用 Java 制作游戏，以此来教我更多关于 Java 和一般游戏编程的知识。但是，我有一个问题。我的 JFrame 上的标题栏占据了 29 个 Y 像素的空间。因此，我的客厅比我计划的要少。有没有办法让 JFrame Canvas 的角是点 (0,0) 而不是 (0, 29)？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T04:13:03.867

答案很简单：不要在 JFrame 中绘制`paint(...)`方法中绘制，而是在 JPanel 的`paintComponent(...)`方法中绘制，然后将 JPanel 设为 JFrame 的 contentPane。这个解决方案在[Swing 教程绘画部分](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)中有很好的描述，这样做有几个原因，包括：

*   您不会冒险绘制不应绘制的内容，包括边框和标题栏。
*   您将获得 Swing 的默认双缓冲的优势，如果您执行任何动画，它可以带来巨大的改进。

# android - 如何使用 ORMLite 为 FTS3 创建虚拟表

> ID：12811795
> 
> 赞同：1
> 
> 时间：2012-10-10T04:08:51.220
> 
> 标签：android, sqlite, ormlite, fts3

我找不到将[FTS3](http://www.sqlite.org/fts3.html)与 ormlite 一起使用的方法，因为我在创建虚拟表时遇到了问题。我需要在原生 sqlite 中运行这样的东西：

```
CREATE VIRTUAL TABLE enrondata1 USING fts3(content TEXT); 
```

但是 ORMLite 调用下面的方法来创建一个简单的表

[`TableUtils.createTable(ConnectionSource connectionSource, Class<T> dataClass);`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableUtils.html#createTable%28com.j256.ormlite.support.ConnectionSource,%20java.lang.Class%29)

在这个问题的答案中：[FTS3 在 ORMLite 中搜索？](https://stackoverflow.com/questions/10904558/fts3-searches-in-ormlite)，写的是使用 ORMLite 的[原始查询](http://ormlite.com/docs/raw-queries)接口，不幸的是，我找不到用它创建表的方法。

如何将 FTS3 与 ormlite 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:07:04.573

该`queryRaw`功能仅用于`SELECT`查询。要执行其他命令，请使用[原始执行语句](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_2.html#SEC28)。

例如：

```
dao.executeRaw("CREATE VIRTUAL TABLE enrondata1 USING fts3(content TEXT);"); 
```

# jquery - jquery ajax:Uncaught SyntaxError: Unexpected token :

> ID：12811797
> 
> 赞同：0
> 
> 时间：2012-10-10T04:08:54.570
> 
> 标签：jquery, ajax, cross-domain

我使用 jquery ajax 做一个跨域请求工作：

```
$.ajax({
    type: 'get',
    url: 'http://someurl',
    dataType : "jsonp",
    jsonp: 'callback',
    success: function (data) {

    }
}) 
```

但出现错误：`Uncaught SyntaxError: Unexpected token :`

我的请求 json 数据就像：

```
{
    "status": "ok", 
    "info": {
        "book_count": 54, 
        "title": "recommended"
    }, 
    "books": [
        {
            "iap_price": "", 
            "book_category": "yippee_education", 
            "book_category_desc": "\u4e50\u8c5a\u65e9\u6559", 
        }
    ]
} 
```

那么我的代码有什么问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:57:55.340

如果此 JSON 已验证，我会收到错误消息：

```
{
    "status": "ok", 
    "info": {
        "book_count": 54, 
        "title": "recommended"
    }, 
    "books": [
        {
            "iap_price": "", 
            "book_category": "yippee_education", 
            "book_category_desc": "\u4e50\u8c5a\u65e9\u6559", 
        }
    ]
} 
```

### 错误：

```
Parse error on line 11:
...                   }    ]}
----------------------^
Expecting 'STRING' 
```

`,`结尾不要加逗号`"book_category_desc": "\u4e50\u8c5a\u65e9\u6559",`。那应该解决。

# c - C 中的宏扩展——检索无符号 32 位字

> ID：12811798
> 
> 赞同：1
> 
> 时间：2012-10-10T04:09:18.360
> 
> 标签：c, types, macros, struct, buffer

以下代码段如何工作？什么是IN？Eclipse 说 IN 代表“宏扩展”：

```
 UWORD32 (*get_u32)(IN UWORD8 *buffer_ptr);    /* Gets unsigned 32bit word   */
                                           /* from the buffer */ 
```

上面的代码是结构的一部分。并且是这样使用的。

```
struct my struct s;
UWORD8* buf;

s->get_u32(buf); 
```

它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:13:41.443

我猜这`IN`是`#define`d 某处`const`：

```
#define IN const    // input parameters are const 
```

`get_u32`只是一个函数指针 - 该函数接受一个参数（指向 a 的指针`UWORD8`）并返回 a `UWORD32`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:24:34.833

您甚至可以将 IN 声明为“无”

```
#define IN
#define OUT 
```

在这种情况下，它只会使您的代码更具可读性:)

```
void func ( IN param_t param1,         /* INPUT PARAM */
            IN param_t param2,         /* INPUT PARAM */
            OUT param_t *param3);      /* OUTPUT PARAM */ 
```

# svn - 两个 svn 命令是否相同？

> ID：12811805
> 
> 赞同：0
> 
> 时间：2012-10-10T04:10:09.077
> 
> 标签：svn, merge, branch, trunk

我为 myApp 创建了一个分支，例如 myApp1.0 在修订版 100，主干上的下一个修订版是 101。我的 svn 代码结构是：

```
/trunk/myApp
/branches/myApp1.0 
```

在做了一些工作之后`trunk/myApp`，我想将trunk上`branches/myApp1.0`的工作合并到，两个svn命令是一样的吗？

1.  `svn merge https://my.svn.server/branches/myApp1.0@100 https://my.svn.server/trunk/@HEAD`

2.  `cd to work directory of myApp1.0`
    `svn merge -r101:HEAD https://my.svn.server/trunk/myApp`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:01:41.383

> 两个svn命令一样吗？

在*某种程度上*：合并**合并**主干和分支，它们是单个合并命令的不同形式（'catch-up'合并与'2-URL-merge'（1）与'cherry-pick'合并（2））和2-URL-merge 推荐为“不得已的工具”

> svn帮助合并

...

> 仅当其他变体不适用于您的情况时，您才应该使用此合并变体，因为掌握此变体可能非常复杂。

顺便说一句，在您的追赶合并用例中，您可以（？TBT）消除 URLS 中的 PEG 修订，因为 SVN >= 1.6 合并信息将被正确使用

并注意使用的 2-URL-merge

> 指定了两个源 URL，以及两个修订版 N 和 M。在指定修订版处比较两个源，并将差异应用于 TARGET_WCPATH，它是**另一个分支的工作副本的**路径。

# html - 如何将页脚部分一直填充到底部

> ID：12811808
> 
> 赞同：0
> 
> 时间：2012-10-10T04:10:19.610
> 
> 标签：html, css, footer

我想把我的页脚放在 http://quaaoutlodge.com/drupal-7.14/test 的底部，[也](http://quaaoutlodge.com/drupal-7.14/test)放在[http://quaaoutlodge.com/drupal-7.14/](http://quaaoutlodge.com/drupal-7.14/)上（它应该保持原样，在这里）所以我点击了这个链接[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)在[如何获得母版页上的“页脚”内容以在主要内容时下推现在不填满页面](https://stackoverflow.com/questions/298449/how-do-i-get-footer-content-on-a-master-page-to-push-down-when-main-content-do) 问题是，如果我将位置设置为绝对位置并将底部设置为 0px，页脚始终保持在该位置，但我只希望内容太少以至于它会将页脚从底部。任何帮助表示赞赏！谢谢！罗恩

任何人？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:28:13.983

您应该为页脚设置这种样式

```
position:fixed;
bottom:0;
left:0;
z-index:10; 
```

对于父元素集

```
position:relative; 
```

此致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:12:58.777

这就是我如何完成在我能想到的每个浏览器中都可以使用的“粘滞页脚”：[http ://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

希望这可以帮助！

# android - 同一页面上的多个按钮活动 - android eclipse

> ID：12811811
> 
> 赞同：1
> 
> 时间：2012-10-10T04:11:59.843
> 
> 标签：android, button, android-activity, forceclose

我已经尝试搜索在同一页面上使用多个按钮的许多方法。我可以让第一个按钮工作，但第二个和第三个按钮强制关闭。有谁知道为什么会这样？我认为这可能是语法 - 但我可能是错的，因为我是新手。提前致谢。

主要Java：

```
package com.pangolin.rollin.ts;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class TeamSupport extends Activity {

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_team_support);
          Button wireless=(Button)findViewById(R.id.button_wireless);
          Button tools=(Button)findViewById(R.id.button_tools);
          Button about=(Button)findViewById(R.id.button_about);
          wireless.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent myintent1 = new Intent(TeamSupport.this,Wireless.class);
                startActivity(myintent1);

            }
        });
          tools.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    Intent myintent2 = new Intent(TeamSupport.this,Tools.class);
                    startActivity(myintent2);

                }
            });
          about.setOnClickListener(new View.OnClickListener() {

              public void onClick(View v) {
                  Intent myintent3 = new Intent(TeamSupport.this,About.class);
                  startActivity(myintent3);
              }
          });
    }
} 
```

主要 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/make_selection"
        android:textColor="#3F9BBF" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView3"
        android:layout_centerHorizontal="true"
        android:text="@string/beta_notice"
        android:textColor="#3F9BBF" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="@string/credits"
        android:textColor="#3F9BBF" />

    <Button
        android:id="@+id/button_wireless"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:text="@string/button_wireless"
        android:textColor="#3F9BBF" />

    <Button
        android:id="@+id/button_tools"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/button_wireless"
        android:text="@string/button_tools"
        android:textColor="#3F9BBF" />

    <Button 
        android:id="@+id/button_about"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/button_tools"
        android:text="@string/button_about"
        android:textColor="#3F9BBF" />

</RelativeLayout> 
```

安卓清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pangolin.rollin.ts"
    android:installLocation="auto"
    android:versionCode="1"
    android:versionName="Beta 0.1" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".TeamSupport"
            android:label="@string/title_activity_team_support" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Wireless"
            android:label="@string/title_activity_wireless"
            android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            </intent-filter>
        </activity>
        <activity
            android:name=".About"
            android:label="@string/title_activity_about"
            android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Tools"
            android:label="@string/title_activity_tools"
            android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:32:51.033

您只需实现 OnClickListener。

```
now tools.setOnClickListener(this);

   @Override
public void onClick(View v) {
switch (v.getId()) {
case R.id.R.id.button_wireless:
    Intent myintent1 = new Intent(TeamSupport.this,Wireless.class);
            startActivity(myintent1);
    break; 
```

}

请试试这个效果更好，占用内存更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:26:22.633

删除以下代码

```
<intent-filter>
   <action android:name="android.intent.action.MAIN" />
</intent-filter> 
```

来自 manifest.xml

无线、关于和工具活动标签

# android - R.layout 仅显示 Android 默认模板建议。

> ID：12811812
> 
> 赞同：0
> 
> 时间：2012-10-10T04:12:16.410
> 
> 标签：android, android-resources, r.java-file

我的布局文件夹中有几个 xml 文件，但是当我在课堂上使用它们时，模板建议不会显示我的布局文件，而是显示 android 默认建议。我的任何文件似乎都没有错误。我尝试删除 R.java 文件并重建并重新启动 Eclipse，但似乎没有任何效果。请帮忙。我需要尽快完成这件事:(

谢谢，索米亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:25:09.893

这可能是因为，当您尝试使用`xml`布局时，会导入默认的 android R 文件。

```
import com.android.R 
```

检查那个。如果存在，请删除该导入并导入`R file`以您的包名称开头的正确内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:19:51.200

首先看看你设置xml名称是否很好

例如

你有 your.xml 然后在 onCreate

```
super.onCreate(savedInstanceState);
setContentView(R.layout.your); 
```

然后清理你的项目。如果您设计了多个具有相同名称的 xml，那么您必须使用 hdpi 等将它们放在适当的文件夹中 [更多详细信息可在此处获得](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T17:39:45.933

或者你可以写

```
import.R.layout 
```

它肯定会起作用

# java - 将表单数据从 jsp 发送到 Web 服务客户端 (SOAP)

> ID：12811813
> 
> 赞同：0
> 
> 时间：2012-10-10T04:12:18.090
> 
> 标签：java, jsp, soap, netbeans-7, webservice-client

基本上我有一个连接到数据库的网络服务，它有一个插入方法。我在 jsp 中创建了一个注册表单，我需要将用户插入到 registration.jsp 表单中的数据发送到我的 Web 服务。因此，当单击提交按钮时，我使用 Web 服务客户端调用作为registration.jsp 的操作。

我不知道如何获取用户在表单中输入的数据并将其传递给 Web 客户端，后者又将其插入我的 Web 服务数据库。

这是我的代码：

```
 <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title> Registration</title>
    </head>
    <body>
        <h1> Welcome</h1>

        <form name="test" action="Wclient2.jsp" method="POST" enctype="multipart/formdata">

                   <table border="0">
                <thead>
                    <tr>
                        <th>Register Here</th>
                      <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>First Name:</td>
                        <td><input type="text" name="fname" value="" size="50" /></td>
                    </tr>
                    <tr>
                        <td>Last Name:</td>
                        <td><input type="text" name="lname" value="" size="50" /></td>
                    </tr>
                    <tr>
                        <td>Email:</td>
                        <td><input type="text" name="email" value="" size="50" /></td>
                    </tr>
                    <tr>
                        <td>Password:</td>
                        <td><input type="password" name="password" value="" size="50"/>      </td>
                    </tr>

                    <tr>
                        <td></td>
                        <td> <input type="submit" value="submit" name="submit" /> </td>
                    </tr>
                </tbody>
            </table>

        </form>
    </body>
</html> 
```

这是网络客户端点击提交按钮后的代码

> 注册（动作=“Wclient2.jsp”方法=“POST”）

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title> Enroll</title>
    </head>
    <body>
        <h1> Welcome</h1>

        <form name="test"<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>

           <%-- start web service invocation --%><hr/>
        <%        

            try {
                mypack.Bioweb_Service service = new mypack.Bioweb_Service();
                mypack.Bioweb port = service.getBiowebPort();
                // TODO initialize WS operation arguments here

                java.lang.String fname = "";
                java.lang.String lname = "";
                java.lang.String email = "";
                java.lang.String password = "";

                // TODO process result here

                java.lang.String result = port.insert(fname, lname, email, password);
                out.println("Result = " + result);

            } catch (Exception ex) {
                // TODO handle custom exceptions here
            }
        %>
        <%-- end web service invocation --%><hr/>

    </body>
</html> 
```

我不知道如何从registration.jsp 中获取fname 的参数以放入Web 客户端。当我写：

> java.lang.String fname = request.getParameter("fname");

要将文本字段 fname 的值获取到我的 Web 服务中，在我的数据库中创建了一行，但插入了 NULL 而不是我的用户在表单中输入的值。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:00:08.460

如果您使用 request.getParameter("fname") 只要您向 FirstName 提供输入，我看不到您的客户端代码（html/jsp）有任何问题。要隔离问题，请在 jsp 中打印 fname 的值

```
String fname =request.getParameter("fname") ;
System.out.println("Value of first name " +fname) // this will print your console
java.lang.String result = port.insert(fname, lname, email, password); 
```

如果这可以正确打印您的输入，您将需要查看服务实现以检查它是否正确读取并处理输入。如果是 fname is null ，那么我们可以回到 HTML/JSP 再看一遍。

更新：要详细查看请求，您可以使用以下代码

```
Enumeration reqParams= request.getParameterNames();
while (reqParams.hasMoreElements()) {
    String key= (String) reqParams.nextElement();
    String val = request.getParameter(element);
    System.out.println(" Key ==> "+key+" , Value ==> "+val);

} 
```

试试这个，让我们看看您是否获得了您在 html 表单中输入的任何输入的值。

萨西什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:41:59.573

这不是我真正的专业领域，但不是调用 action="Wclient2.jsp" 你可以调用 action="pass.php" 然后创建一个 php 文件来获取变量并重定向到 Wclient2.jsp 传递你的变量一个查询字符串。

例如在 pass.php 文件中：

```
$fname = $_POST['fname'];
$lname = $_POST['lname'];

header( 'Location: http://www.yoursite.com/path/Wclient2.jsp?fname=' .fname. '&lname=' .lname ); 
```

这可能是一种非常奇怪（或新手）的方式来完成它，但我确实知道它有效。希望其他人会有更合适的答案，但如果没有人足够快地回复，我希望这会有所帮助:)

# mysql - MySQL 不使用索引进行 BETWEEN 查询。我究竟做错了什么？

> ID：12811822
> 
> 赞同：1
> 
> 时间：2012-10-10T04:13:29.350
> 
> 标签：mysql, percona

我已经尝试过这个查询的不同变体，但我无法让它使用时间戳索引。我究竟做错了什么？

任何帮助将不胜感激 ：）

* * *

```
MariaDB [alienvault]> explain extended SELECT * FROM alienvault_siem.acid_event WHERE (timestamp BETWEEN '2012-10-09 11:20:17' AND '2012-10-10 03:20:17');
+------+-------------+------------+------+---------------+------+---------+------+---------+----------+-------------+
| id   | select_type | table      | type | possible_keys | key  | key_len | ref  | rows    | filtered | Extra       |
+------+-------------+------------+------+---------------+------+---------+------+---------+----------+-------------+
|    1 | SIMPLE      | acid_event | ALL  | timestamp     | NULL | NULL    | NULL | 4481579 |    50.00 | Using where |
+------+-------------+------------+------+---------------+------+---------+------+---------+----------+-------------+
1 row in set, 1 warning (0.01 sec) 
```

表结构：

```
CREATE TABLE IF NOT EXISTS `acid_event` (
  (...)
  `timestamp` datetime NOT NULL,
  (...)
  PRIMARY KEY (`id`),
  (...)
  KEY `timestamp` (`timestamp`),
  (...)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

软件：Percona 服务器

软件版本：5.5.27-28.1 - Percona Server (GPL)，28.1 版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:43:26.370

可能是由以下原因引起的： - 索引的选择性不够，mysql 认为全扫描会更快 - mysql 的索引统计信息不正确

您可以检查“SHOW INDEX FROM alienvault_siem.acid_event;”的输出 您也可以尝试强制使用索引（但如果全扫描更快，则可能会很糟糕）：

```
SELECT * FROM alienvault_siem.acid_event FORCE INDEX (`timestamp`) WHERE (timestamp BETWEEN '2012-10-09 11:20:17' AND '2012-10-10 03:20:17'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:00:59.140

问题是您将日期文字作为字符串提供。

如果您使用如下`str_to_date()`功能

```
WHERE timestamp 
  BETWEEN str_to_date('2012-10-09 11:20:17','%Y-%m-%d %H:%i:%s') 
      AND str_to_date('2012-10-10 03:20:17','%Y-%m-%d %H:%i:%s') 
```

那么MySQL就可以使用索引了。

# ruby-on-rails - 使用 rake db:create 命令时出错（Ruby on Rails）

> ID：12811835
> 
> 赞同：1
> 
> 时间：2012-10-10T04:15:41.380
> 
> 标签：ruby-on-rails, ruby, sqlite, rake

我刚刚开始使用 ruby​​ on rails，制作了一个新的 rails 项目文件夹。现在我正在尝试使用 rake db:create 命令，但出现以下错误。请帮忙。

```
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /home/samsung/ruby/blog/config/../vendor/rails/railties/lib/rails/gem_dependency.rb:21.
NOTE: Gem::SourceIndex#initialize is deprecated with no replacement. It will be removed on or after 2011-11-01.
Gem::SourceIndex#initialize called from /home/samsung/ruby/blog/config/../vendor/rails/railties/lib/rails/vendor_gem_source_index.rb:100.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#add_spec called from /usr/lib/ruby/vendor_ruby/1.8/rubygems/source_index.rb:91.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#add_spec called from /usr/lib/ruby/vendor_ruby/1.8/rubygems/source_index.rb:91.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#add_spec called from /usr/lib/ruby/vendor_ruby/1.8/rubygems/source_index.rb:91.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#add_spec called from /usr/lib/ruby/vendor_ruby/1.8/rubygems/source_index.rb:91.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#add_spec called from /usr/lib/ruby/vendor_ruby/1.8/rubygems/source_index.rb:91.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#add_spec called from /usr/lib/ruby/vendor_ruby/1.8/rubygems/source_index.rb:91.
WARNING: 'require 'rake/rdoctask'' is deprecated.  Please use 'require 'rdoc/task' (in RDoc 2.4.2+)' instead.
    at /usr/lib/ruby/vendor_ruby/rake/rdoctask.rb
Please install RDoc 2.4.2+ to generate documentation.
rake aborted!
no such file to load -- sqlite3

Tasks: TOP => db:create
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:16:25.573

错误出现在输出的最后一行：

```
no such file to load -- sqlite3 
```

它表明它无法找到该`sqlite3`文件。这可能是因为`sqlite3`未安装 gem。尝试使用以下命令找到它：

```
gem list sqlite3 
```

如果没有出现，请使用以下命令安装它：

```
gem install sqlite3 
```

* * *

我想你可能也安装了旧版本的 Ruby。我建议使用 RVM 并安装更新版本的 Ruby，例如 1.9，而不是 1.8。有关如何执行此操作的信息，请参阅[此页面。](https://rvm.io/rvm/install)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:03:10.540

您需要确保将要使用的 gem 添加到 gemfile 中：

```
gem 'sqlite3' 
```

然后，从应用根目录中的命令行安装 gems：

```
bundle install 
```

这将导致它们被自动需要，从而修复以下错误：

```
no such file to load -- sqlite3 
```

# java - Java double 并使用非常小的值

> ID：12811839
> 
> 赞同：10
> 
> 时间：2012-10-10T04:16:05.653
> 
> 标签：java, double, probability

我必须存储几个非常低的概率值的乘积（例如，1E-80）。由于下溢，使用原始 java double 将导致零。我不希望该值变为零，因为稍后会有一个更大的数字（例如，1E100）将使值在双精度可以处理的范围内。

因此，我自己创建了一个不同的类（MyDouble），用于保存基础部分和指数部分。在进行计算时，例如乘法，我将基本部分相乘，然后加上指数。

该程序使用原始的 double 类型速度很快。但是，当我使用自己的课程（MyDouble）时，程序真的很慢。我认为这是因为我每次都必须创建新对象来创建简单的操作，而当不再需要这些对象时，垃圾收集器必须做很多工作。

我的问题是，您认为有没有更好的方法可以解决这个问题？如果没有，有没有办法让我可以用我自己的课程（MyDouble）加速程序？

[注意：取日志然后取指数并不能解决我的问题]

MyDouble 类：

```
public class MyDouble {
    public MyDouble(double base, int power){
    this.base = base;
    this.power = power;
    }

    public static MyDouble multiply(double... values) {
    MyDouble returnMyDouble = new MyDouble(0);
    double prodBase = 1;
    int prodPower = 0;
    for( double val : values) {
            MyDouble ad = new MyDouble(val);
            prodBase *= ad.base;
            prodPower += ad.power;
        }   
        String newBaseString = "" + prodBase;
        String[] splitted = newBaseString.split("E");   
        double newBase = 0; int newPower = 0;
        if(splitted.length == 2) {
            newBase = Double.parseDouble(splitted[0]);
            newPower = Integer.parseInt(splitted[1]);
        } else {
            newBase = Double.parseDouble(splitted[0]);
            newPower = 0;
        }
        returnMyDouble.base = newBase;
        returnMyDouble.power = newPower + prodPower;        
        return returnMyDouble;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:21:30.247

解决这个问题的方法是在日志空间中工作——它使问题变得微不足道。当您说它不起作用时，您能否详细说明原因？概率下溢是概率模型中的一个常见问题，我认为我不知道它以任何其他方式解决了问题。

回想一下 log(a*b) 就是 log(a) + log(b)。类似地，log(a/b) 是 log(a) - log(b)。我假设因为您正在处理导致下溢问题的乘法和除法概率；日志空间的缺点是您需要使用特殊的例程来计算 log(a+b)，如果这是您的问题，我可以指导您。

所以简单的答案是，在日志空间中工作，并在最后重新取幂以获得人类可读的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T04:40:22.860

每次进行乘法运算时，您都试图解析字符串。您为什么不将所有值计算为某种结构，例如实数和指数部分作为预计算步骤，然后为乘法、加法、细分、幂等创建算法。

您也可以为大/小数字添加标志。我认为你不会在一次计算中同时使用 1e100 和 1e-100（这样你可以简化一些计算），你可以改善不同对（大，大），（小，小），（大，小）的计算时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T05:42:05.177

您可以使用

```
BigDecimal bd = BigDecimal.ONE.scaleByPowerOfTen(-309)
        .multiply(BigDecimal.ONE.scaleByPowerOfTen(-300))
        .multiply(BigDecimal.ONE.scaleByPowerOfTen(300));
System.out.println(bd); 
```

印刷

```
1E-309 
```

或者，如果您使用 log10 比例

```
double d = -309 + -300 + 300;
System.out.println("1E"+d); 
```

印刷

```
1E-309.0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T04:29:30.643

我确信这会比双倍慢很多，但可能一个很大的影响因素是字符串操作。你能摆脱它并通过算术计算功率吗？即使是递归或迭代算术也可能比转换为 String 来获取数字位更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T04:29:50.627

在性能要求很高的应用程序中，您希望找到一种将基本信息存储在原语中的方法。在这种情况下，也许您可​​以拆分 long 或其他变量的字节，以便固定部分是基数。

然后，您可以创建自定义方法乘长或长，就好像它们是双精度。您抓取代表基数和 exp 的位，并相应地截断。

从某种意义上说，您在这里重新发明了轮子，因为您需要能够有效执行您正在寻找的操作的字节码。

编辑：

如果你想坚持使用两个变量，你可以修改你的代码来简单地接受一个数组，这将比对象轻得多。此外，您需要删除对任何字符串解析函数的调用。那些非常慢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T05:04:36.957

缓慢可能是因为在拆分和字符串连接中创建的中间字符串对象。

试试这个：

```
/**
 * value = base * 10 ^ power.
 */

public class MyDouble {

    // Threshold values to determine whether given double is too small or not. 
private static final double SMALL_EPSILON = 1e-8;
private static final double SMALL_EPSILON_MULTIPLIER = 1e8;
private static final int    SMALL_EPSILON_POWER = 8;

private double myBase;
private int    myPower;

public MyDouble(double base, int power){
    myBase  = base;
    myPower = power;
}

public MyDouble(double base) 
{
    myBase  = base;
    myPower = 0;
    adjustPower();
}

/**
 * If base value is too small, increase the base by multiplying with some number and 
 * decrease the power accordingly. 
 * <p> E.g 0.000 000 000 001 * 10^1  => 0.0001 * 10^8  
 */
private void adjustPower()
{
    // Increase the base & decrease the power 
    // if given double value is less than threshold.
    if (myBase < SMALL_EPSILON) {
        myBase = myBase * SMALL_EPSILON_MULTIPLIER;
        myPower -= SMALL_EPSILON_POWER;
    }
}

/**
 * This method multiplies given double and updates this object.
 */
public void multiply(MyDouble d)
{
    myBase  *= d.myBase;
    myPower += d.myPower;
    adjustPower();
}

/**
 * This method multiplies given primitive double value with this object and update the 
 * base and power.
 */
public void multiply(double d)
{
    multiply(new MyDouble(d));
}

@Override
public String toString()
{
    return "Base:" + myBase + ", Power=" + myPower;
}

/**
 * This method multiplies given double values and returns MyDouble object.
 * It make sure that too small double values do not zero out the multiplication result. 
 */
public static MyDouble multiply(double...values) 
{
    MyDouble result = new MyDouble(1);
    for (int i=0; i<values.length; i++) {
        result.multiply(values[i]);
    }
    return result;
}

public static void main(String[] args) {
    MyDouble r = MyDouble.multiply(1e-80, 1e100);
    System.out.println(r);
} 
```

}

如果这对于您的目的仍然很慢，您可以修改 multiply() 方法以直接对原始 double 进行操作，而不是创建 MyDouble 对象。

# django - 获取模型 Django 中的出现次数列表+计数？

> ID：12811841
> 
> 赞同：11
> 
> 时间：2012-10-10T04:16:24.070
> 
> 标签：django

想象一下我有以下模型：

```
class Person(models.Model):
    ...other stuff...
    optional_first_name= models.CharField(max_length=50, blank=True) 
```

我将如何编写一个请求，该请求返回一个最受欢迎的名称数组，按出现的降序排列，它们的计数，同时忽略空名称？

即对于包含 13 个 Leslies、8 个 Andys、3 个 Aprils、1 个 Ron 和 18 个未指定姓名的人的数据库，输出将是：

[('leslie', 13), ('andy', 8), ('april', 3), ('ron', 1)]

我能得到的最接近的是通过执行以下操作：

```
q= Person.objects.all()
q.query.group_by=['optional_first_name']
q.query.add_count_column()
q.values_list('optional_first_name', flat= True) 
```

但这仍然不是我想要的。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-10T04:23:13.227

经过一番挖掘，终于发现：

```
Person.objects.values('optional_first_name').annotate(c=Count('optional_first_name')).order_by('-c') 
```

# javascript - javascript函数中的“this”

> ID：12811847
> 
> 赞同：2
> 
> 时间：2012-10-10T04:17:00.160
> 
> 标签：javascript

这是一个新手查询。我经历了几篇类似的帖子，但它们对我的帮助还不够。这篇文章有 2 个查询，但因为它们的根似乎相同，所以将它们放在一起。

我遇到了以下代码片段：

```
var Server = module.exports.Server = function Server(listener) {
  if (!(this instanceof Server)) return new Server(listener);
  //other code
}

module.exports.createServer = function(listener) {
  return new Server(listener);
}; 
```

我无法理解 `if (!(this instanceof Server)) ;`this 什么时候不能在这里指向 Server 的使用？

我尝试对此进行快速测试：

```
var createTest = function(){
    console.log(this.toString());
    return new Test();
};

var Test = function Test(){
    console.log(this instanceof Test);
    console.log(this.toString());
    if (!(this instanceof Test)) 
    {
        return new Test();
    }
}

var tester = createTest(); 
```

输出：

```
[object global]
true
[object Object] 
```

这进一步让我困惑为什么 this.toString 打印 [object Object] - 它不应该是 [object Test] 吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T04:22:20.063

这是一个用来使`new`可选的成语。例如：

```
function TraditionalTest() {
}
function IdiomaticTest() {
    if(!(this instanceof IdiomaticTest)) return new IdiomaticTest();
}

console.log(new TraditionalTest());  // [object Object]
console.log(TraditionalTest());      // undefined
console.log(new IdiomaticTest());    // [object Object]
console.log(IdiomaticTest());        // [object Object] 
```

* * *

至于为什么是`[object Object]`而不是`[object Test]`，我不知道为什么它是这样定义的，但这[就是它的定义方式](http://es5.github.com/#x15.2.4.2)：

> 调用该`toString`方法时，将执行以下步骤：
> 
> 1.  如果`this`值为`undefined`，则返回“ `[object Undefined]`”。
> 2.  如果`this`值为`null`，则返回“ `[object Null]`”。
> 3.  令 O 为调用 ToObject 并将`this`值作为参数传递的结果。
> 4.  令*class*为*O*的 [[Class]] 内部属性的值。
> 5.  `[object`返回作为连接三个字符串“ ”、“*类*”和“ ”的结果的字符串值`]`。

[[Class]] 在规范中被多次引用，但它只表示内置类型：

*   `Arguments`
*   `Array`
*   `Boolean`
*   `Date`
*   `Error`
*   `Function`
*   `JSON`
*   `Math`
*   `Number`
*   `Object`
*   `RegExp`
*   `String`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:22:15.497

该测试确保为这两种用途创建了一个新的服务器实例：

```
new module.exports.Server() 
```

并为：

```
module.exports.Server() 
```

在第二个中，`this`指针将是全局对象，因此不会是一个 instanceof Test。在这种情况下，代码意识到构造函数只是被直接调用而`new`没有创建新对象。由于这不是构造函数的预期用途，因此它`new`通过调用 a 并返回结果来强制使用 a。

# iphone - 子视图阻止父视图 TouchesBegan？

> ID：12811848
> 
> 赞同：3
> 
> 时间：2012-10-10T04:17:03.540
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我有一个具有`UITableView`as a的视图`subview`，它完全覆盖了父视图。当我尝试`touchesBegan`为父视图实现时，我注意到根本没有调用该方法。有没有办法覆盖这种行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T06:46:18.767

实际上有一种方法可以覆盖这种行为。您需要扩展阻塞父视图和覆盖`touchesBegan`方法的每个子对象，如下所示：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   [super touchesBegan:touches withEvent:event];
   [self.nextResponder touchesBegan:touches withEvent:event];
} 
```

例如，如果您在 UIView 内部的 UIScrollView 中有一个 UIButton，那么您需要创建两个自定义类。一个扩展 UIButton 和另一个扩展 UIScrollView。在这些自定义类中的每一个中，您都需要添加上述方法定义。在这些更改之后，您将能够`touchesBegan`在父 UIView 中接收事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T04:21:17.237

该`touchesBegan`方法与父视图的框架有关。如果框架对父视图不可见并且完全被 包围`subviews`，则父视图将不会收到触摸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:54:14.233

您还可以设置：

```
[theViewThatIsCoveringParent setUserInteractionEnabled:NO]; 
```

这样所有的触摸都会被父级捕获。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:52:38.623

这样做：[为什么我的 UIViewController 不在其视图的响应者链中？](https://stackoverflow.com/questions/1390986/why-isnt-my-uiviewcontroller-in-the-responder-chain-for-its-view/11921597#11921597)

简而言之：

*   将您的视图链接到您的控制器。
*   在正在接触的视图中添加一个名为`nextResponderPlusSomething`（已经有一个）的属性`nextResponder`
*   在`viewdidload`将此属性设置为控制器（自我）
*   在里面`touchesBegan`添加一个调用`nextResponderPlusSomething:touchesBegan`
*   在控制器上实现此事件，将事件发送到您要调用的视图。

# c# - 将文件的 ACL 设置为继承

> ID：12811850
> 
> 赞同：13
> 
> 时间：2012-10-10T04:17:27.687
> 
> 标签：c#, acl

我正在 C# 中寻找一种方法来重置从父级继承的文件权限，就好像文件是创建或复制到该目录一样。

*从文件*的角度来看，我似乎找不到任何东西（我找到了目录的一两个参考，但由于某种原因我无法将它们转换为文件）。[例如， C# - Windows ACL - 应用继承的权限](https://stackoverflow.com/questions/1411743/c-sharp-windows-acl-applying-inherited-permissions)。但我不确定`LOGON_USER_NAME`应该是什么值，据我所知，得到一个`System.ArgumentExcpetion`“不能设置标志”

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-10T14:27:51.797

I finally found the answer over here. [File.Move does not inherit permissions from target directory?](https://stackoverflow.com/a/2930969/486660)

```
var fs = File.GetAccessControl(destination);
fs.SetAccessRuleProtection(false, false);
File.SetAccessControl(destination, fs); 
```

* * *

## Update

While the code snip above does add in the inherited permissions, it **does not** remove any *existing explicit* permissions. My final code looks more like this.

```
string destination = @"<my file>";
FileInfo fileInfo;
FileSecurity fileSecurity;
FileSystemAccessRule fileRule;
AuthorizationRuleCollection fileRules;

fileInfo = new FileInfo(destination);
fileSecurity = fileInfo.GetAccessControl();
fileSecurity.SetAccessRuleProtection(false, false);
/*
 * Only fetch the explicit rules since I want to keep the inherited ones. Not 
 * sure if the target type matters in this case since I am not examining the
 * IdentityReference.
 */
fileRules = fileSecurity.GetAccessRules(includeExplicit: true, 
                         includeInherited: false, targetType: typeof(NTAccount));
/*
 * fileRules is a AuthorizationRuleCollection object, which can contain objects 
 * other than FileSystemAccessRule (in theory), but GetAccessRules should only 
 * ever return a collection of FileSystemAccessRules, so we will just declare 
 * rule explicitly as a FileSystemAccessRule.
 */
foreach (FileSystemAccessRule rule in fileRules)
{
    /*
     * Remove any explicit permissions so we are just left with inherited ones.
     */
    fileSecurity.RemoveAccessRule(rule);
}
fileInfo.SetAccessControl(fileSecurity); 
```

* * *

## Update 2

Or, simply use TGasdf's more concise 3 line solution that is elsewhere on this page...

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-10-10T12:27:39.067

删除显式权限的公认答案对我来说有点太复杂了，所以我尝试创建一个新的 FileSecurity。以下似乎有效，并且生成的权限仅使用继承的权限：

```
var fs = new System.Security.AccessControl.FileSecurity();
fs.SetAccessRuleProtection(false, false);
File.SetAccessControl(destination, fs); 
```

# c# - 设置配置部分“defaultProxy”的权限不足

> ID：12811853
> 
> 赞同：1
> 
> 时间：2012-10-10T04:17:44.717
> 
> 标签：c#, .net-2.0

我正在尝试从共享文件夹访问 Windows 应用程序（使用 .NET 2.0 框架）。应用程序连接到 Web 服务。

应用程序和 Web 服务（在远程计算机或本地计算机上）之间没有代理。

当应用程序尝试访问任何 Web 方法时，我收到以下错误：

> 设置配置部分“defaultProxy”的权限不足。

我听说微软有一个热修复，但在网站上没有找到任何东西。

请建议如何解决问题。

# process - 我们可以在 MPI 中将进程设置为主/根进程吗？

> ID：12811854
> 
> 赞同：2
> 
> 时间：2012-10-10T04:17:48.203
> 
> 标签：process, mpi, scanf

MPI 似乎自动将 0 指定为主进程。但我希望能够指定另一个进程（例如排名为 10 的进程）作为主进程。

此外，该功能`scanf`仅在主进程中起作用：其他进程简单地忽略它并转到下一条语句。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:22:07.617

是和不是。

您可以使用或创建一个单独的*通信*器世界子组。`MPI_Comm_create``MPI_Comm_split`

至于`scanf`，我认为，如果你运行它们，比如说，在不同的等级上，它会输出那个等级过程。说，如果您在该等级上有一个单独的终端，但您的终端很可能在等级 0 上，因此您只看到那里的输出，但是您没有在其他等级上运行程序，所以我认为它不会工作。

要从您需要使用的单独节点打印`sprintf`，并将结果存储在内存中，然后将其发送回等级 0 到`printf`您的终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:54:43.457

当`mpiexec`启动 MPI 进程时，其中只有一个会收到`stdin`. 其余的不会打开那个描述符，所以从它读取只会返回一个错误。如果您检查它的返回值，`scanf`它可能是`EOF`. 从技术上讲，可能有一个实现可以复制所有进程的内容`stdin`并将其转发给所有进程，但我认为任何 MPI 都不会这样做。

`stdout`另一方面，通常由启动器从所有进程中收集，并打印在终端上，但打印的顺序几乎无法控制。常见的解决方案是手动收集一级数据并让它打印所有内容，正如 pyCthon 建议的那样。

最后，OpenMPI`mpiexec`可以完成您要求的事情：指定将获得的排名`stdin`，甚至在单独的`xterm`. 这可能对调试很有用，但我不会依赖这些特性来实现核心功能：有一天您可能希望将代码与不同的 MPI 实现一起使用。此外，假设你在一个大型集群上运行——你真的想要打开一千个终端吗？:)

# ruby-on-rails - Rails 资产已预编译，但生产环境正在 /assets 中寻找它们

> ID：12811856
> 
> 赞同：1
> 
> 时间：2012-10-10T04:17:50.720
> 
> 标签：ruby-on-rails

我在生产环境中运行 Rails 服务器，并且预编译了我的资产，但由于某种原因，请求将转到 /assets 目录而不是 /public。

我有默认的 production.rb 文件。这可能是什么原因造成的？

```
# config/environments/production.rb

config.cache_classes = true
config.consider_all_requests_local       = false
config.action_controller.perform_caching = true
config.serve_static_assets = false
config.assets.compress = true
config.assets.compile = false
config.assets.digest = true
config.force_ssl = true
config.i18n.fallbacks = true
config.active_support.deprecation = :notify 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:20:01.797

请求将发送到`/assets`，`public`由应该位于 Rails 应用程序前面的网络服务器从目录中提供。

因为你已经`config.serve_static_assets`准备好`false`了`config/environments/production.rb`，Rails 甚至不会尝试为这些资产提供服务。

我建议在 Rails 前面放置一个运行[Passenger](http://www.modrails.com/)的 Apache 或 Nginx 服务器，以便 Apache 或 Nginx 为您的应用程序提供资产和代理请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:01:04.573

您还可以更改：

```
config.serve_static_assets = true 
```

然后您的资产将从 /public/assets 提供，而无需使用 Apache 或 Nginx。

对于开发，只需删除 /public/assets 目录，然后它们将自动编译并从 /assets 提供。

# mysql - 如何通过jdbc获取CANDIDATE Keys的列名？

> ID：12811858
> 
> 赞同：-1
> 
> 时间：2012-10-10T04:18:18.463
> 
> 标签：mysql, jdbc, foreign-keys, unique-constraint, notnull

我需要找到一个表的候选键。至于作为候选键的列，它必须是 (1) NOT NULL 和 (2) UNIQUE。所以我正在做的是：

```
 for(i=1;i<colcount; i++){
       if( (resultset.getmetadata().isnullable(i)==0) && (UNIQUE_COND) ){
            // IS A CANDIDATE KEY
       }
   } 
```

如何检查 UNIQUE 条件？我正在通过 JDBC 使用 mysql db。还有另一种获取候选键的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:42:03.423

您需要使用`DatabaseMetaData`，而不是结果集的元数据。具体你需要看看：

*   [获取主键](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getPrimaryKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29)
*   参数`unique`设置为 true 的[getIndexInfo 。](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getIndexInfo%28java.lang.String,%20java.lang.String,%20java.lang.String,%20boolean,%20boolean%29)

# silverlight - 如何为 Microsoft 平滑流制作复合清单

> ID：12811859
> 
> 赞同：30
> 
> 时间：2012-10-10T04:19:14.573
> 
> 标签：silverlight, iis, manifest, composite, smooth-streaming

我是 Microsoft Smooth Streaming 的新手，对合成清单的制作有疑问。
按照[这里的指导。](http://blogs.iis.net/vsood/archive/2010/01/22/composite-manifest-support-for-rough-cut-editing-scenarios-in-ssme.aspx)

我能够制作在 Silverlight 播放器中播放的单个剪辑元素的复合清单。
但是，当我尝试从其他视频添加更多剪辑时，播放器停止工作并且没有给出错误信息。

而且我都是手工完成的。当我尝试使用 Expression Encoder 4 Pro 创建这样的视频时，我得到的是普通`.ismc`文件而不是`.csm`文件。

**我的问题是：**

制作包含来自不同视频的剪辑的复合清单的最佳方法是什么？编码这些视频时是否有任何规范？还是复合清单的支持对视频格式有任何限制？

最后一个是：有没有一种简单的方法来调试它（比如验证我的 .csm 文件）？

**编辑我自己的解决方案**：

看起来没人关心这个，但既然我终于解决了这个问题，我把它写在这里是为了节省别人的时间。

为了调试复合清单，我在 Visual Studio 中构建了一个简单的 Silverlight 应用程序，并添加了一个简单的函数来报告错误：

MainPage.xaml.cs：

```
public MainPage()
{
    InitializeComponent();
    this.SmoothPlayer.SmoothStreamingErrorOccurred += new EventHandler<SmoothStreamingErrorEventArgs>(SmoothPlayer_SmoothStreamingErrorOccurred);
}

public void SmoothPlayer_SmoothStreamingErrorOccurred(object sender,
                         SmoothStreamingErrorEventArgs e)
{
    MessageBox.Show("Error: " + e.ErrorCode + "; " + e.ErrorMessage);
} 
```

我发现[这个](http://blogs.southworks.net/ejadib/2010/02/05/common-mistakes-issues-when-creating-and-using-composite-stream-manifests-csm/)网页很有用。

你需要使用：

```
<c t="", d""> 
```

代替

```
<c d=""> 
```

您必须正确计算`ClipBegin`和`ClipEnd`值。

下面是在 python 中将 a 转换为 a 的示例代码`.ismc`（`.csm`假设下面的 ism 是清单 xml 内容的 xml.etree.ElementTree 对象表示）：

```
def ism2csm(url, ism):
    if ism is None: return csm

    csm = xml.Element('SmoothStreamingMedia', {'MajorVersion':'2', 'MinorVersion':'1', 'Duration':ism.attrib.get('Duration')})
    clip = xml.Element('Clip', {'Url':url, 'ClipBegin':'0','ClipEnd':'0'})
    csm.append(clip) 
    for stream_index in ism.iter('StreamIndex'):
        clip.append(stream_index)

    for stream_index in clip.iter('StreamIndex'):
        t = 0
        last_c = None
        for c in stream_index.iter('c'):
            c.attrib['t'] = str(t)
            t += int(c.attrib.get('d'))
            if last_c is not None: del last_c.attrib['d']
            last_c = c
        if clip.attrib.get('ClipEnd') == '0':
            clip.attrib['ClipEnd'] = str(t)

    return csm 
```

# iphone - 弹出子视图

> ID：12811860
> 
> 赞同：-3
> 
> 时间：2012-10-10T04:19:28.300
> 
> 标签：iphone, ios

如何仅动画帧即。子视图而不是整个视图以及如何在该子视图中添加分段控制按钮？我希望在单击按钮时弹出子视图，但是子视图应该是半透明的，以使后面的父视图可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:29:44.760

首先你让你`subview`透明：

```
[subview setAlpha:0.5f]; 
```

然后在该`addSubView`行之前添加此代码：

```
CATransition *animation = [CATransition animation];
[animation setType:kCATransitionMoveIn];          // you can try carious options here
[animation setSubtype:kCATransitionFromRight];    // here too
[animation setDuration:0.3];
[animation setValue:@"Throb" forKey:@"MyAnimationType"];
[subview.layer addAnimation:animation forKey:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:32:34.833

如果要添加和删除它，请使用 UIView 全局，并在此视图中添加子视图

```
 UIView *tempView=[[UIView alloc]initWithFrame:sel.view.frame];
        /////== Add your subviews in this tempView
        tempView.transform = CGAffineTransformMakeScale(1.3, 1.3);
        tempView.alpha = 0;
        [UIView animateWithDuration:.35 animations:^{
            tempView.alpha = 0.94;
            tempView.transform = CGAffineTransformMakeScale(1, 1);
        }];
       tempView.frame=CGRectMake(0, 0, 320, 480);
        [self.view addSubview:tempView]; 
```

**更新 ：**

首先在您的 .h 文件中获取 UIView 的对象，例如

```
UIView *tempView;
BOOL isOpen; 
```

在`viewWillDidLoad:`方法中定义这个

```
isOpen = NO; 
```

并在使用此代码后

```
-(IBAction)btnSetting_Clicked:(id)sender
{
    if (isOpen) {
        isOpen = NO;
         [tempView removeFromSuperview];
    }
    else {
        isOpen = YES;
        tempView=[[UIView alloc]initWithFrame:self.view.frame];
        /////== Add your subviews in this tempView
        [tempView addSubview:yourSegControl];
        tempView.transform = CGAffineTransformMakeScale(1.3, 1.3);
        tempView.alpha = 0;
        [UIView animateWithDuration:.35 animations:^{
            tempView.alpha = 0.94;
            tempView.transform = CGAffineTransformMakeScale(1, 1);
        }];
        tempView.frame=CGRectMake(0, 0, 320, 480);
        [self.view addSubview:tempView];

    }
} 
```

我希望这对你有帮助..

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:29:16.953

您可以将子视图添加到主视图

```
CGRect frame = CGRectMake(x, y, width, height); // Replacing with your dimensions
UIView *subView = [[UIView alloc] initWithFrame:frame];
[self.view addSubview:subView]; 
```

您可以使用使其透明

```
[subView setAlpha:0.2]; 
```

您可以将任何 UI 控件添加到此视图。

希望这会帮助你。

# solr - 如何在 apache solr lucene 中使用 json 文档在 schema.xml 中建立索引

> ID：12811861
> 
> 赞同：2
> 
> 时间：2012-10-10T04:19:28.187
> 
> 标签：solr

下面是我导入到 solr 的 JSON 示例，logDetails 字段包含整个 json。如何在 schema.xml 中写入索引，因为括号内的括号我不知道

```
{ "id" : "978-0641723445", 
  "author":"Rick Riordan",
  "logDetails":{            
      "tphon_num_txt":"No Number",   
      "brch_cd":"C4" 
  } 
}, 
{ "id" : "978-1423103349",
  "author" : "Rick Riordan",
  "logDetails":{  
      "tphon_num_txt":"No Number", 
      "brch_cd":"C4" 
  }  
} 
```

# objective-c - 用小数准确地将 NSString 转换为 NSNumber

> ID：12811862
> 
> 赞同：0
> 
> 时间：2012-10-10T04:19:35.667
> 
> 标签：objective-c, ios, ios5, ios4, ios6

可以说我的字符串值在将其转换为 NSNumber 后如下 12345.12 它作为 12345.1223122 但我想要字符串中的准确数字有没有办法实现它。我现在正在使用的代码

```
NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
    [f setNumberStyle:NSNumberFormatterCurrencyStyle];
    NSNumber * myNumber = [f numberFromString:aString];
    [f release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:34:14.910

如果您正在处理货币类型的数字（只是您使用货币样式格式化程序的猜测），您可能想要使用[`NSDecimalNumber`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDecimalNumber). 与标准浮点类型不同，十进制数使用以 10 为底的指数，因此在处理货币问题时，您总是能获得预期的准确度——即它们与使用整数然后在以 10 为底的移动小数点相同表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:25:33.590

做这个：

```
NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
[f setMaximumFractionDigits:2];
NSNumber * myNumber = [f numberFromString:aString];
[f release];
NSLog(@"%@",myNumber); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T04:47:00.447

试试这样...

```
 NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterCurrencyStyle];
NSNumber * myNumber=[NSNumber numberWithFloat:[[f numberFromString:aString] floatValue]]; 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-04T20:13:29.823

这是几年，但这有效：

```
double d = [@"123.45" doubleValue];
NSNumber* n = [NSNumber numberWithDouble:d]; 
```

# ruby - 在Ruby中用equals定义方法

> ID：12811865
> 
> 赞同：11
> 
> 时间：2012-10-10T04:19:45.343
> 
> 标签：ruby, syntax

作为 Ruby 的新手，我很难*向自己解释*Ruby 中方法定义的行为。

该示例如下所示...

```
class Foo
  def do_something(action)
    action.inspect
  end
  def do_something_else=action 
    action.inspect
  end
end

?> f.do_something("drive")
=> "\"drive\""

?> f.do_something_else=("drive")
=> "drive" 
```

第一个例子是不言自明的。我试图理解的是第二个例子的行为。除了看起来是一个产生字符串文字而另一个不是，实际发生了什么？为什么我要使用其中一个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T04:31:04.147

一般来说，`do_something`是一个getter，并且`do_something=`是一个setter。

```
class Foo
  attr_accessor :bar
end 
```

相当于

```
class Foo
  def bar
    @bar
  end

  def bar=(value)
    @bar = value
  end
end 
```

为了回答您关于行为差异的问题，以结尾的方法`=`始终返回表达式的右侧。在这种情况下返回`action`，不是`action.inspect`。

```
class Foo
  def do_something=(action)
    "stop"
  end
end

?> f = Foo.new
?> f.do_something=("drive")
=> "drive" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T04:41:46.443

您的两个方法实际上都被定义并称为*方法*。Ruby 中的很多东西都可以定义为方法，甚至包括、`+`和等运算符。Ruby 允许方法具有三个特殊的*符号后缀*。这句话是我自己编出来的。我所说的*符号后缀*的意思是方法末尾的东西将指示该方法*应该*如何工作。`-``*``/`

 ***## 砰!

第一个*符号后缀*是`!`. 这表明该方法应该是*破坏性*的，这意味着它修改了调用它的对象。比较这两个脚本的输出：

```
a = [1, 2, 3]
a.map { |x| x * x }
a 
```

和：

```
a = [1, 2, 3]
a.map! { |x| x * x }
a 
```

两个脚本之间有一个字符差异，但它们的操作方式不同！第一个仍将遍历数组中的每个元素并在块内执行操作，但其中的对象`a`仍将与`[1,2,3]`您开始时相同。

然而，在第二个示例中，`a`最后的 将改为`[1, 4, 9]`因为`map!`修改了对象！

## 询问

第二个*符号后缀*是`?`, 表示方法用于查询对象的某事，并表示该方法应该返回`true`，`false`或者在某些[极端情况下](https://github.com/rails/rails/pull/5329)，`nil`。

现在，请注意该方法*不必*返回`true`或`false`......只是如果它这样做会非常好！

证明：

```
def a?
  true
end

def b?
  "moo"
end 
```

调用`a?`会返回`true`，调用`b?`会返回“moo”。这就是查询方法。*应该*返回`true`或但有时可以返回其他东西的方法，`false`因为一些开发人员不喜欢其他开发人员。

## 二传手！

**现在**我们进入您（转述）问题的核心：方法结束是*什么`=`意思？*

这通常表明一个方法将设置一个特定的值，正如[Erik](https://stackoverflow.com/a/12811965/15245)在我写完这篇答案之前已经概述的那样。

但是，它*可能不会*设置一个，就像查询方法*可能不会*返回`true`or一样`false`。这只是惯例。

您也可以像这样调用该 setter 方法：

```
foo.something_else="value" 
```

或者（我最喜欢的）：

```
foo.something_else = "value" 
```

理论上，您实际上可以忽略传入的值，就像您可以完全忽略传递给任何方法的任何参数一样：

```
def foo?(*args)
  "moo"
end

>> foo?(:please, :oh, :please, :why, :"won't", :you, :use, :these, :arguments, :i, :got, :just, :for, :you, :question_mark?)
=> "moo" 
```

Ruby 支持 setter 方法的所有三种语法，尽管很少见到您使用的那种！

好吧，我希望这个答案大致具有教育意义，并且您现在了解更多关于 Ruby 的知识。享受！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T04:32:14.320

您不能为赋值方法定义返回值。返回值始终与传入的值相同，因此分配链 ( `x = y = z = 3`) 将始终有效。

通常，您在调用该方法时会省略括号，以便它的行为类似于属性：

```
my_value = f.do_something= "drive" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T04:34:54.697

```
def do_something_else=action 
  action.inspect
end 
```

这定义了一个 setter 方法，所以 do_something_else 看起来好像我们正在初始化一个属性。所以直接传入初始化的值，***

# java - 使用 JOGL 创建库以绘制 3D 对象

> ID：12811871
> 
> 赞同：0
> 
> 时间：2012-10-10T04:20:14.547
> 
> 标签：java, jogl

所以我遇到了一点泡菜。我正在编写一个使用 JOGL 的库，以在 GLCanvas 上显示 3D 模型（以及因此，2D 模型）。好吧，直到我决定将 Strixa3DElement 的各个多边形的绘制方法调用到一个线程中以加快速度之前，一切都运行得很顺利。以前，一切都完美地绘制在屏幕上，但非常缓慢。现在，就速度而言，它再好不过了。但它没有画任何东西。除了 draw 方法处理的内容之外，忽略所有内容，是否有任何理由

[https://github.com/NicholasRoge/StrixaGL/blob/master/src/com/strixa/gl/Strixa3DElement.java](https://github.com/NicholasRoge/StrixaGL/blob/master/src/com/strixa/gl/Strixa3DElement.java)

不应该工作？

编辑：另外，为了避免线程中的并发问题，假设任何给定元素的多边形不超过 100000 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:31:54.000

现在最好将渲染任务留在 gl 线程中。

*   你甚至不使用显示列表。当然，它会很慢。
*   即使在那之后，渲染也不是速度问题：您可以准备数据以在另一个线程中渲染，从而使渲染循环干净而快速。（移出 this._performGameLogic 等）
*   您可以使用 VBO、着色器（将数据和渲染逻辑从 CPU 移动到 GPU）、屏幕外缓冲区等来提高性能。

如果你要继续，你应该

*   在编写代码时检查 GLArrayDataServer 类是否与 VBO、单元测试和演示一起使用。
*   不传递 GL2 作为参数： GLContext.getCurrentGL().getGL2();
*   应该尝试 GL2ES2：不推荐使用固定功能，允许在移动平台上使用。
*   加入jabber会议

关于 JOGL&threads 的一些答案：[Resources: Parallelism in Java for OpenGL realtime applications](https://stackoverflow.com/questions/12737933/resources-parallelism-in-java-for-opengl-realtime-applications)

# android - Android NDK 构建：找不到文件错误

> ID：12811874
> 
> 赞同：0
> 
> 时间：2012-10-10T04:20:56.073
> 
> 标签：android, android-ndk

需要您的指导，我正在借助本机代码在 android 中编写一个应用程序，它将与 CAN（控制器局域网）端口进行通信；为此，在我的 C 代码中，我使用了 linux/can.h 头文件。我正在关注“http://mobilepearls.com/labs/ndk-builder-in-eclipse/”这个链接来构建我的应用程序。但是我在eclipse控制台框中设置了我得到的所有东西

```
Compile thumb : can_port <= cansend.c
jni/cansend.c:14:23: fatal error: linux/can.h: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs/can_port/cansend.o] Error 1 
```

还有一件事，我正在研究windows环境。但我不认为这可能是原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:59:14.433

It is correct that it is not a Windows/Linux problem. The simple problem is that compiler is unable to find the file **can.h**. Now, for your info, when the compiler starts compiling, it searches for its header files in the folder

> C:\(path to NDK folder)\platforms\(android-version)\(arch)\usr\include\linux

Now, if there isn't a **can.h** there, the compiler will flag an error. So the best way is

1.  Either copy can.h to the above path (not tested)
2.  Modify your Makefile to path to the correct directory where this header file is kept

Hope this helps!

# mysql - select语句中的MYSQL计数

> ID：12811875
> 
> 赞同：3
> 
> 时间：2012-10-10T04:21:09.693
> 
> 标签：mysql, sql, database

我在数据库中有这样的数据

```
身份类别性别
1个自动对焦
2 高炉
凌晨3点
4 自动对焦
上午05时
6 英磅
7 自动对焦

```

从这些数据中，我想做出选择语句来生成这样的报告

```
_________________________
        性别
MF 类总计
_________________________
一个 2 3 5
乙 1 1 2
_________________________
总计 3 4 7

```

我怎样才能做出选择声明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T04:27:43.290

看看下面的例子

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/aaaec/6/0)

```
SELECT class,
      SUM(CASE WHEN gender = 'M' THEN 1 ELSE 0 END) `M`,
      SUM(CASE WHEN gender = 'F' THEN 1 ELSE 0 END) `F`,
      COUNT(1) Total
FROM Table1
GROUP BY class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T04:28:45.710

要获得每种性别的总数：

```
SELECT class, gender, COUNT(*) as gender_count
FROM Gender
GROUP BY class, gender; 
```

要获得总数：

```
SELECT class, COUNT(*) as total_count
FROM Gender
GROUP BY class; 
```

# amazon-ec2 - aws ec2 createInstance 策略实施

> ID：12811877
> 
> 赞同：0
> 
> 时间：2012-10-10T04:21:17.003
> 
> 标签：amazon-ec2, amazon-web-services, createinstance

我必须为特定用户分配策略，以便他能够在特定区域中仅创建特定类型的 ec2 实例。假设开发人员 x 可以仅在高内存实例类型上执行 us -east 区域的 ec2 服务中的所有操作。他不应该能够在任何其他实例类型上创建或执行操作。

如果有办法分配此类政策，请告诉我。提前致谢。

感谢和问候马努米斯拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:53:11.493

不幸的是，没有 - ec2 的策略仅在操作级别。您不能将它们限制为特定实例或实例类型。我什至认为您不能将它们限制在一个区域内。

# perl - Perl 使用 XML Path Context 提取数据

> ID：12811902
> 
> 赞同：3
> 
> 时间：2012-10-10T04:24:52.163
> 
> 标签：perl, xml-parsing, xml-libxml

我有以下xml

```
<?xml version="1.0" encoding="utf-8"?>
<Response>
   <Function Name="GetSomethingById">
      <something idSome="1" Code="1" Description="TEST01" LEFT="0" RIGHT="750" />
   </Function>
</Response> 
```

我想要节点的属性`<something>`作为哈希。我尝试如下

```
my $xpc = XML::LibXML::XPathContext->new(
    XML::LibXML->new()->parse_string($xml)   # $xml is containing the above xml
);
my @nodes = $xpc->findnodes('/Response/Function/something'); 
```

我期待有类似的东西`$nodes[0]->getAttributes`，有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T05:09:48.527

```
my %attributes = map { $_->name => $_->value } $node->attributes(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T04:36:42.217

您的 XPATH 查询似乎是错误的 - 您正在搜索`'/WSApiResponse/Function/something'`XML 的根节点是否`Response`存在`WSApiResponse`

从[`XML::LibXML::Node`](http://search.cpan.org/~phish/XML-LibXML-1.53/lib/XML/LibXML/Node.pod)（预期返回的那种东西`findnodes()`）的文档中，您应该寻找`my $attrs = $nodes[0]->attributes()`而不是`$nodes[0]->getAttributes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:38:12.893

我[`XML::Simple`](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm)用于这种类型的东西。所以如果 XML 文件是`data.xml`

```
use strict;
use XML::Simple();
use Data::Dumper();

my $xml = XML::Simple::XMLin( "data.xml" );
print Data::Dumper::Dumper($xml);
my $href = $xml->{Function}->{something};
print Data::Dumper::Dumper($href); 
```

注意：使用 XML::Simple，根标签映射到结果哈希本身。因此没有`$xml->{Response}`

# c# - 类变量和方法对其他类不可用

> ID：12811903
> 
> 赞同：0
> 
> 时间：2012-10-10T04:25:06.273
> 
> 标签：c#, .net, class, variables, methods

我遇到了这个问题。我在 Windows 窗体应用程序 - WFA 中创建了一个类。它有一个命名空间作为 XmlParsing。它有两个类，一个是公开的，一个是部分的。一个类被命名为 myWindow；这也是公开的部分课程。另一个是 MemberFunction 类；这只是公开的。它有很少的字符串和简单的 get n set 方法。现在的问题是 myWindow 类中没有显示任何变量和 get n set 方法。

请帮忙。这就是我做事的方式：

```
namespace XmlParsing
{
    MemberFunction Class is here

    myWindow Class is Here
} 
```

两者是完全分开的。我没有得到超出我的极限的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:27:28.737

`public`确保您的属性/变量在您的类中定义。例如

```
class myWindow 
{
     public string MyProperty { get; set; }
     public int Field1;
     public static int StaticField;
} 
```

此外，如果它们是非静态成员，那么您必须创建类的对象才能访问它们。

```
myWindow objMyWindow = new myWindow();
objMyWindow.MyProperty = "Some string";
objMyWindow.Field1 = 10; 
```

如果您已将字段定义为静态字段，您也可以根据类名访问它，例如：

```
myWindow.StaticField = 100; //accessing static field 
```

您可以考虑重命名您的类并使用[Pascal 大小写](http://msdn.microsoft.com/en-us/library/x2dbyw72%28v=vs.71%29.aspx)作为类名。

# android - 如何在动作栏 Sherlock 中停止活动娱乐

> ID：12811904
> 
> 赞同：0
> 
> 时间：2012-10-10T04:25:08.257
> 
> 标签：android, actionbarsherlock

当我使用 sherlock 库来扩展应用程序的 sherlock 片段活动时，我想在屏幕方向改变时停止活动重新创建。

# iphone - isAvailableForServiceType 总是返回 true？

> ID：12811906
> 
> 赞同：10
> 
> 时间：2012-10-10T04:25:19.597
> 
> 标签：iphone, ios, ios6, slcomposeviewcontroller

简单的代码行：

```
NSLog(@"Checking on Facebook: %d -- Checking on Twitter: %d",[SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook], [SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]); 
```

问题是两个 BOOL 都得到 1。这是一个问题，因为 Twitter 和 Facebook 都没有设置帐户。这是在模拟器上，所以想知道人们是否经历过这种情况也在设备上发生？

文档说，只有当服务可用并且至少设置了一个帐户时，它才应该返回 true。但即使没有帐户设置，我也会变得真实。我想使用这些值来隐藏一些社交发布按钮，所以希望它能够工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T09:08:08.700

你在模拟器中运行了吗？

它似乎`isAvailableForServiceType`总是`1`在模拟器中返回。

也许你可以用IOS6在ipad上测试一下。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T12:41:17.170

根据我的经验，我可以确认这是 iOS Simulator 6.0 中的一个错误。对于 iOS 模拟器上的任何服务类型，该`isAvailableForServiceType`方法始终返回 TRUE。

在运行当前 iOS 6.0 的实际设备上，它按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-21T12:42:27.527

您也可以`isAvailableForServiceType:`使用与模拟器一起工作的 iOS 7.1 进行测试。

这里我检查了什么

```
NSLog(@"Facebook Enabled : %d",[SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]; 
```

请检查这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T01:01:33.107

我还可以确认它在模拟器（Xcode 4.5.1，iOS 6.0）中已损坏[即，为所有三个服务返回 True]——但它可以在设备上正常运行（iPhone 4S，运行 iOS 6.0）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T05:17:21.200

`isAvailableForServiceType``true`在 iPhone 和 iPad 模拟器中总是返回。

相同的代码在 iOS 6 iPhone 和 iPad 上运行良好。

# python - 从 tkinter 中的另一个类更新列表框

> ID：12811915
> 
> 赞同：1
> 
> 时间：2012-10-10T04:25:53.627
> 
> 标签：python, tkinter

我想要做的是在控制器类的 onopen 函数中，我试图在 View 类中运行 update_listbox 函数，该函数将更新列表框。这给了我错误 update_listbox() must be called with View instance 作为第一个参数。我不完全理解我在做什么，所以如果有人可以向我解释我在这里做错了什么以及如何正确地做这将非常有帮助。

干杯乍得维克

```
from Tkinter import *
import tkMessageBox
import tkFileDialog
from tkFileDialog import askopenfilename
from tkMessageBox import askokcancel

class Controller(object):
    def __init__(self, master=None):

        self._master = master
        #filemenubar
        self.menu()
        #listbox
        self.listboxFrame = View(master)
        self.listboxFrame.pack(fill=BOTH, expand=YES)
        #entry widget
        self.EntryFrame = Other(master)
        self.EntryFrame.pack(fill = X)

    def menu(self):

        menubar = Menu(self._master)
        self._master.config(menu=menubar)

        fileMenubar = Menu(menubar)
        fileMenubar.add_command(label="Open Products File", command=self.onopen)
        fileMenubar.add_command(label="Save Products File", command=self.onsave)
        fileMenubar.add_command(label="exit", command=self.onExit)
        menubar.add_cascade(label="File", menu=fileMenubar)

    def onopen(self):
        fname = askopenfilename()
        products.load_items(fname)
        View.update_listbox() #
        #this gives me error stating that it needs View instance as first argument
        #and adding self here only gives it the controller instance

class View(Frame):
    def __init__(self, master):
        Frame.__init__(self, master)
        self.list = Listbox(self, selectmode=EXTENDED)
        self.list.pack(fill=BOTH, expand=YES)
        self.current = None
        self.update_listbox()

    def update_listbox(self):   
        temp=products.get_keys()
        for i in temp:
            self.list.insert(END, str(products.get_item(i))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:07:30.390

您需要实例化一个`View`对象。例如：

```
def onopen(self):
    fname = askopenfilename()
    products.load_items(fname)

    myview = View(self._master)   # Instantiate the object
    myview.update_listbox()       # Now call update_listbox() 
```

这是因为成员变量（例如：）的内存`self.list`在对象被实例化之前不会被分配。或者另一种说法`self.list`是直到被调用才创建，这发生在您从类定义`View.__init__()`创建对象时。`View``View`

# asp.net - 全局变量并将其存储在 Session 中

> ID：12811921
> 
> 赞同：3
> 
> 时间：2012-10-10T04:26:23.823
> 
> 标签：asp.net

在win应用程序中，我们可以声明一个以所有当前形式访问它的变量（如下代码）

我想在页面加载中填充一个数据集并保留数据集`Session`并稍后使用它

这种方式的内存有什么问题吗？（意味着如果同时有 100 个用户来到站点，我应该在 Session 中保留 100 个数据集）

```
namespace Store
{
    DataSet ds; // Global DataSet
    public partial class frmLoading : Form
    {
    //... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:33:53.697

您可以使用`Cache class`以共享您的数据`(Global Cache)`

因此，使用 Cache，您可以只使用一个 DataSet。

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.caching.cache.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.caching.cache.aspx)

会话专用于每个连接的用户

# .net - .NET Windows Forms 应用程序的多线程控制

> ID：12811924
> 
> 赞同：0
> 
> 时间：2012-10-10T04:27:04.073
> 
> 标签：.net, winforms, multithreading

我正在使用[Visual Studio 2010 开发](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010).NET Windows Forms 应用程序。

在这个应用程序中，我需要四个后台线程来进行底层数据传输。当所有四个线程都完成后，将再次使用四个线程开始另一轮四个底层数据传输。

表单 UI 需要始终响应。我的问题是：如何控制四个线程的运行？比如：我怎么知道所有线程都完成了？使用不稳定的全局计数器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:47:55.490

.NET 4 友好地提供了类*[Task](https://msdn.microsoft.com/en-us/library/system.threading.tasks.task(v=vs.110).aspx)*和相关的统一高级异步 API。因此，您可以安全地从基于 BackgroundWorker 的设计切换到基于 Task 的设计，然后您会看到等到所有 Task 都使用`Task.Factory.ContinueWhenAll`.

请参阅*[异步任务 - 使用任务简化异步编程](http://msdn.microsoft.com/en-us/magazine/ff959203.aspx)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:14:02.633

为了回答你关于使用**四个线程**的问题，下面是一个使用 BackgroundWorker 的速写。这里的想法是设置四个任务，跟踪正在运行的任务的数量，并在它们全部完成时重新启动。有关 volatile 与 interlocked 的讨论，请参阅 Stack Overflow 问题*[Volatile vs. Interlocked vs. lock](https://stackoverflow.com/questions/154551)*。

这将为您提供您所要求的（四个线程，响应式 UI），但没有错误处理，并且可能存在其他问题。有没有可能一个 BackgroundWorker 会挂起（也许你的“数据传输”出了问题），在这种情况下你最终会处于糟糕的状态？

```
public partial class Form1 : Form  {
    private int workersRunning = 0;
    private List<BackgroundWorker> workers = new List<BackgroundWorker>();

    public Form1()  {
        InitializeComponent();
        for (int i = 0; i < 4; i++)  {
            BackgroundWorker worker = new BackgroundWorker();
            worker.DoWork += new DoWorkEventHandler(this.worker_DoWork);
            worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(this.worker_RunWorkerCompleted);
            workers.Add(worker);
        }
    }

    private void button1_Click(object sender, EventArgs e) {
        this.StartWork();
    }

    private void StartWork() {
        workers.ForEach(worker => worker.RunWorkerAsync());
    }

    void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e){
        Interlocked.Decrement(ref workersRunning);
        Console.WriteLine("Worker reported completion from thread id " + e.Result);
        if(this.workersRunning == 0) {
            Console.WriteLine("All workers are done. Start again");
            this.StartWork();
        }  else  {
            Console.WriteLine(this.workersRunning + " workers are still running.");
        }
    }

    void worker_DoWork(object sender, DoWorkEventArgs e) {
        Interlocked.Increment(ref workersRunning);
        int threadId = System.Threading.Thread.CurrentThread.ManagedThreadId;
        Console.WriteLine("Doing work on thread #" + threadId);

        Thread.Sleep(new Random().Next(2000, 5000));

        e.Result = "Work done on thread id " + threadId;
    }
} 
```

# google-bigquery - group by 中的 where 子句

> ID：12811927
> 
> 赞同：0
> 
> 时间：2012-10-10T04:27:29.830
> 
> 标签：google-bigquery

以下查询按预期工作。

```
select month, day, count(*) as cnt from publicdata:samples.natality
group by month,day 
order by cnt desc; 
```

但是，只要我添加**where year > 1990** ，我只会得到部分结果。所有结果都与 day = 0 匹配，但其他日期（1 到 31）未在结果中列出。查询是否正确？

我还想知道我是为样本公共数据付费还是免费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:45:30.440

实际上，似乎 1989 年之后的所有数据都没有其他天数设置为 0，因此您得到的结果是正确的。

# asp.net - EF 代码优先：当 IDENTITY_INSERT 设置为 OFF 时，无法在表“myTable”中插入标识列的显式值

> ID：12811931
> 
> 赞同：4
> 
> 时间：2012-10-10T04:27:42.400
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, entity-framework-4, ef-code-first

将主键设置为数据库中的身份（SQL Server）

使用 EF 插入数据时出现错误

> 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“myTable”中插入标识列的显式值

对于这个特定的实体，尽管我使用与其他实体相同的方法来插入数据并且它们没有出错。

```
 public class MyTable 
    {
    [Key/*,DatabaseGenerated(DatabaseGeneratedOption.Identity)*/]
    public int ID{get;set;}
    public string name {get;set;}
    public string type {get;set;}
    public string status {get;set;}
    public int country {get;set;}
    public DateTime start_date {get;set;}
    public DateTime due_date {get;set;}
    }` 
```

询问

```
 MyTable check= new MyTable();
            check.name = checkName;
            check.type = "DB";
            check.status = "New";
            check.country = country;
            check.start_date = DateTime.Now;
            check.due_date = dueDate;
            db.myTables.Add(check);
            db.SaveChanges(); 
```

**更新**：

取消注释上述行后

```
(DatabaseGenerated(DatabaseGeneratedOption.Identity)) 
```

它抛出异常

> ReferentialConstraint 中的依赖属性映射到存储生成的列。列：'ID'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T05:01:15.240

试试这个：

```
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public int Id { get; set; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T04:48:23.473

我不确定它是否也适用于您的情况....但是第二个错误说..您在某些关系中使用主键作为外键，这仅对具有 DatabaseGeneratedOption.None 的属性有效。

因此，要将主键用作身份，您可以使用 DatabaseGeneratedOption.Identity 对其进行装饰
，在这种情况下，它将引发异常，因为您不能将身份用于关系（使用 DatabaseGeneratedOption.None 代替）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T07:27:20.867

试试这个：

```
objDBEntities.MyTable.AddObject(
    new tblEmployee
    {
        check.name = checkName,
        check.type = "DB",
        check.status = "New",
        check.country = country,
        check.start_date = DateTime.Now,
        check.due_date = dueDate
    }
);

objDBEntities.SaveChanges(); 
```

有关更多详细信息：[实体框架：如何添加支持标识列的行数据](http://social.msdn.microsoft.com/Forums/en-US/cf69c201-5445-493d-ac6f-3bf596d446f4/entity-framework-how-to-add-row-data-with-supporting-to-identity-column-on)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T19:21:46.947

当 IDENTITY_INSERT 设置为 OFF 时，无法在表“myTable”中插入标识列的显式值

ReferentialConstraint 中的依赖属性映射到存储生成的列。列：'ID'

看起来您没有正确定义 1....1 表关系。如果您的 pk 是 fk，请确保您使用了“[Key,ForeignKey("Caller")]”。我讨厌 EF 抛出异常的方式。需要衰减来找出根本原因。:(

如果没有解决您的问题，则两个表都是相关的。或者对于根本原因，将相关表移动到一个简单的解决方案并在那里进行测试总是更好，这样你就可以消除其他事实。同时也让自己更加熟悉约定、流利的api和数据注释。

# c# - 使用Session存储Datatable

> ID：12811932
> 
> 赞同：4
> 
> 时间：2012-10-10T04:27:54.543
> 
> 标签：c#, asp.net, session, memory

目前我们正在使用 Sessions 在我们的页面中存储数据表，这样我们就不必一次又一次地访问数据库来获取相同的数据表。但我担心的是它正在使用服务器内存，如果有一天大量用户登录，服务器的响应会变慢，我们的应用程序也可能会崩溃。

请告诉我将数据表存储到 Sessions 中是个好主意，还是我们应该每次都从数据库中获取数据表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T04:36:39.580

作为一般经验法则，我会说不要使用会话。我已经很长时间没有使用会话了。一旦您进入网络农场情景会话，要么变得慢很多，要么变得更复杂，或者两者兼而有之。

您是否会侥幸成功取决于您在会话中存储了多少数据，以及在会话超时期限内将有多少用户处于活动状态。

今天有很多可用的缓存和内存数据库选项可能是更好的选择。最后，虽然所描述的解决方案听起来有问题，但在您实际测量问题之前，我不会优化现有解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T04:42:50.893

这取决于数据表中存储的内容。无论如何，出于以下原因，我会使用[ASP.NET 缓存来存储这些数据表。](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

*   缓存有过期时间，这意味着您可以根据滑动或绝对过期时间值自动删除它

*   如果进程内存“压力”太高，缓存将自动删除。

*   您可以使缓存项特定于一个用户，或根据其键对所有用户全局

例如：

```
// personalized cache item
string personalCacheKey = string.Format("MyDataTable_{0}", (int)Session["UserID"]);
DataTable myPersonalDataTable = (DataTable)Cache[personalCacheKey];

if (myPersonalDataTable == null)
{
    myPersonalDataTable = database.dosomething();
    Cache.Insert(personalCacheKey, myPersonalDataTable, null, Cache.NoAbsoluteExpiration, new TimeSpan(0, 30, 0)); // 30 minutes
}

// global (non user specific) cached item
string globalCacheKey = "MyDataTable";
DataTable globalDataTable = (DataTable)Cache[globalCacheKey];

if (globalDataTable == null)
{
    globalDataTable = database.dosomething();
    Cache.Insert(globalCacheKey, globalDataTable, null, Cache.NoAbsoluteExpiration, new TimeSpan(0, 30, 0)); // 30 minutes (again)
} 
```

但是，您现在遇到的问题是基础数据是否得到更新，以及您的应用程序是否可以接受呈现“旧”缓存数据。如果不可接受，您将不得不从缓存中强制删除项目，有一些机制可以做到这一点。

您可以设置一个*SqlCacheDependency*（我从未亲自使用过），或者您可以自己使用`Cache.Remove(cachekey)`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T04:37:38.130

最好将“常用”数据存储在内存中；这是很好的逻辑。但是，“会话”意味着它在该会话的生命周期中存在，因此在该用户的生命周期中存在。其次，正如您已经说过的，等待用户“会话”的生命，这可能会消耗服务器端的宝贵资源。

您可能要考虑使用的是“缓存”对象，因为它与“过期”具有相同的目的。

```
DataTable users = new DataTable();

if (Cache["users"] == null)
{
    // users = getUsers(customer);
   Cache.Add(“users”, users, null, System.Web.Caching.Cache.NoAbsoluteExpiration, new TimeSpan(0, 60, 0), System.Web.Caching.CacheItemPriority.Default, null);
}
 else
{
    sers = (DataTable)Cache["users"];
} 
```

.NET中重用内存的方法有很多(1) ViewState (2) Cache (3) Session (4) Cookies

但我会选择“缓存”对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T04:38:09.533

如果您无法增加 Web 服务器上的内存，那么显而易见的答案是不要将其存储在会话状态中并每次都从数据库中获取它。

问题是它会对您的数据库产生什么影响？您只是将问题从 Web 服务器转移到数据库服务器吗？

扩展 Web 服务器比扩展/扩展数据库要容易得多（如果您使用 SQL Server 之类的东西，通常会更便宜）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T14:20:39.323

如果您的数据表的记录数量较少并且不包含敏感数据，那么您也可以使用 ViewState 但数据应该更小，因为这种方法会将数据序列化并将其存储在客户端，然后从客户端获取数据进行存储在服务器端。

# android - 应用程序未安装在 android 4.0 ICS 中

> ID：12811933
> 
> 赞同：0
> 
> 时间：2012-10-10T04:27:58.253
> 
> 标签：android, android-4.0-ice-cream-sandwich

当我尝试在 Android 4.0.3 操作系统上安装我的应用程序时，我收到以下错误：

```
09-19 12:31:56.331: W/ActivityManager(107): No content provider found for permission revoke: file:///data/local/tmp/Sample.apk
09-19 12:31:56.340: W/ActivityManager(107): No content provider found for permission revoke: file:///data/local/tmp/Sample.apk
09-19 12:31:56.780: I/PackageManager(107): Running dexopt on: com.src.sample
09-19 12:31:57.060: I/ActivityManager(107): Force stopping package com.src.sample uid=10040 
```

我也在真实设备上尝试过，但应用程序无法启动。

我的应用程序没有启动器图标。

AndroidManifest.xml 代码：

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name" >
<activity
    android:name=".SettingsScreen"
    android:label="@string/setting_screen"
    android:excludeFromRecents="true"
  >
   <intent-filter>
        <action android:name="android.intent.action.MAIN" />
    </intent-filter>
 </activity> 
```

但是这个应用程序在 OS 版本 2.3.3 模拟器和真实设备上成功启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:51:18.633

很多人都遇到过类似的问题，下面有一些提示

*   [Android“未找到可撤销权限的内容提供者”](https://stackoverflow.com/questions/11550798/android-no-content-provider-found-for-permission-revoke)
*   [安装时的 Android 错误消息“未找到内容提供程序”](https://stackoverflow.com/questions/11073358/android-error-message-on-install-no-content-provider-found)
*   [无法通过 Eclipse 在 Android 设备上安装 APK](https://stackoverflow.com/questions/8639873/cannot-install-apk-on-android-device-through-eclipse)
*   [Android - 下载应用程序](https://stackoverflow.com/questions/10918150/android-download-app)

请浏览它们并找出解决方案。

# java - Junit 没有捕获文件未找到异常

> ID：12811935
> 
> 赞同：0
> 
> 时间：2012-10-10T04:28:01.123
> 
> 标签：java, junit

```
@Test(expected=FileNotFoundException.class)
public void downloadExcelTest() {
    stub(mockRoomService.getRoomByCode("ICU5")).toReturn(ICU5);
    stub(mockRS.makeExcel(anyInt(), any(Room.class))).toReturn("FILE_DOES_NOT_EXIST.xls");
    rc.downloadExcel(mockHTTP, 1, "ICU5", mockM);
} 
```

所以我试图做一个junit测试来检查异常，但它似乎没有捕捉到异常。当我运行测试时，它说没有发生预期的异常，但控制台中出现以下错误。

```
java.io.FileNotFoundException: FILE_DOES_NOT_EXIST.xls (The system cannot find the file specified) 
```

我的语法错误还是其他原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:51:25.873

如果在方法中捕获异常，Junit 不会检测到异常。您需要从 downloadExcel 中抛出异常，或者找到另一种方法来通知调用方法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T20:14:36.890

```
public void downloadExcel() throws IOException {
    try{
        ...
    }
    catch (NullPointerException e) { 
        throw new NullPointerException("Null exception"); 
    }
} 
```

# java - Java，布尔值的二维数组&&比较

> ID：12811937
> 
> 赞同：0
> 
> 时间：2012-10-10T04:28:07.287
> 
> 标签：java

这又回到了 Java 101 的开头，但我这里有这段代码：

```
 if ((d==3)&&(City.walls[x--][y])){
        System.out.println ("Fourth Condition true");
        System.out.println (City.walls[x--][y]);
        return false;
    } 
```

即使`City.walls[x--][y]`) 是假的，并`System.out.println`通过打印出假来确认这一点，它仍然会进入 if 语句，无论如何。我在比较中做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:31:58.473

您正在使用 x--，它会更改 x 的值。首先它返回值，然后递减值：

```
int x = 5;
System.out.println(x--); //outputs 5
System.out.println(x);   //outputs 4 
```

你可能想说 x-1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T04:32:17.333

`if`当您的代码在条件下执行，然后`if`在您在控制台中打印的条件下执行时，这些值会有所不同。

您正在减少 if 条件中的 x 值。因此，当您在条件内打印它时，您将获得递减的值。

# java - 为什么 java Locale 是最终的？

> ID：12811940
> 
> 赞同：0
> 
> 时间：2012-10-10T04:28:28.877
> 
> 标签：java, internationalization, locale

我想使用 Java 语言环境进行俄语国际化，但语言环境只定义了少量常量，俄语不是其中之一。我应该使用什么样的解决方法？

```
public final class Locale implements Cloneable, Serializable {

/** Useful constant for language.
 */
static public final Locale ENGLISH = createConstant("en", ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:34:15.333

查看俄语的iso-639代码 [http://www.w3.org/WAI/ER/IG/ert/iso639.htm](http://www.w3.org/WAI/ER/IG/ert/iso639.htm)

您可以在创建语言环境时尝试使用它吗？

```
public Locale(String language, String country) 
```

从语言、国家/地区构建语言环境。注意：ISO 639 不是一个稳定的标准；它定义的一些语言代码（特别是 iw、ji 和 in）已经改变。此构造函数接受旧代码（iw、ji 和 in）和新代码（he、yi 和 id），但 Locale 上的所有其他 API 将仅返回旧代码。（从javadoc复制）

[http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html#Locale%28java.lang.String,%20java.lang.String,%20java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html#Locale%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:36:19.510

常量只是为了方便。

[Locale 类](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html)对国家代码使用 ISO 3166 标准，对语言代码使用 ISO 639 标准。

对于俄罗斯联邦的俄语，以下调用就足够了：

```
Locale ru_loc = new Locale("ru", "RU"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:36:17.830

这是如何创建语言环境的教程。 [http://docs.oracle.com/javase/tutorial/i18n/locale/create.html](http://docs.oracle.com/javase/tutorial/i18n/locale/create.html)

# javascript - 包含未正确执行的间隔的 onmouseover 和 onmouseout 函数

> ID：12811942
> 
> 赞同：2
> 
> 时间：2012-10-10T04:28:42.670
> 
> 标签：javascript, intervals, onmouseover, onmouseout

我正在用 JavaScript 做一些实验，我有一个水平显示的 4 个项目的列表，每个列表项都分配了一个`onmouseover`和`onmouseout`事件。

每个项目的`onmouseover`事件执行一个函数，该函数使用间隔随着时间的推移增加项目的高度。

每个项目的`outmouseover`事件执行一个函数，然后使用另一个间隔随着时间的推移将项目的高度降低到其默认值。

它在以下情况下工作：当我触发`onmouseover`列表项时，高度按预期增加，当我将鼠标从列表项上移开时，高度然后按预期减小。

但是，问题是，它似乎在以下情况下不起作用：当我`onmouseover`为列表项触发时，高度会按预期增加，但是如果我`onmouseover`在另一个列表项返回到其原始大小*之前*触发另一个事件，`onmouseout`上一个列表项的函数没有完成执行。

对不起，如果我缺少任何细节，显然我在解释事情方面非常糟糕......所以我有一个指向源代码的链接和一个你可以测试代码以查看发生了什么的网站。

也许我对 javascript 的了解没有我想象的那么多，所以虽然解决方案或修复会很棒，但我也很乐意接受任何关于为什么会发生这种情况的建议或某种解释。

我最初认为多个间隔计时器不能同时执行，直到经过一些研究我发现它们可以。所以现在我在想这是否是`onmouseover`和`onmouseout`事件之间的冲突。

任何建议、指导或解决方案将不胜感激！

来源： [https](https://docs.google.com/open?id=0B6XLOOGyKVdWVkpSUklmMVI5QUk)
://docs.google.com/open?id=0B6XLOOGyKVdWVkpSUklmMVI5QUk 测试站点： [http](http://www.play-hookey.com/htmltest/)
://www.play-hookey.com/htmltest/ （只需复制该google文档的内容并粘贴到html文本区域在网站上看看我在说什么）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:17:41.713

你的代码：

```
icon.onmouseover = function(){ enlarge(this, icon.ID); };
icon.onmouseout = function(){ reduce(this, icon.ID); }; 
```

正确代码：

```
icon.onmouseover = function(){ enlarge(this, this.ID); };
icon.onmouseout = function(){ reduce(this, this.ID); }; 
```

发生了什么：您将一个事件与一个函数绑定并将变量传递给它。在每个 for 循环之后，您重新定义了该函数变量（所以最后，您的 icon.ID=3）。这意味着所有事件都调用了使用相同 icon.ID=3 的函数。

我希望这是有道理的...

# android - 如何发送 Intent Extra？

> ID：12811944
> 
> 赞同：0
> 
> 时间：2012-10-10T04:28:49.800
> 
> 标签：android

我是安卓初学者。我想将结果从 FirstActivity 传递给 SecondActivity，如下所示。如何删除意图额外的结果？或者以任何方式将结果传递给 SecondActivity 并显示在 TextView 上？（我犯了一个错误并替换，我的主要问题是如何删除结果，因为我想在其中设置另一个新结果。）

**第一活动.java**

```
 public class FirstActivity extends Activity {   
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //code...
        try {     
            myDbHelper.createDatabase();
        } 
        catch (IOException ioe) {
        Log.d("Error","Error while createing Database");
        ioe.printStackTrace();
        throw new Error("Unable to create database");
        }   
        try {     
            myDbHelper.openDataBase();     
        }
        catch(SQLException sqle){
            Log.d("Error","Error while Opening Database");
            sqle.printStackTrace();
            throw sqle;     
        }
        send.setOnClickListener( new View.OnClickListener() {  
        public void onClick(View v) {  
        showResult();  
    }  
    });             
    }
    private void showResult() {  
        //...code       
        //checking for slection 
        results = queryData(table, type);               
        Intent intent = new Intent(this,SecondActivity.class);      
        intent.putExtra("results", results);  
        startActivity(intent);
    }
    public String queryData(String table, String type){
        //...
        //do somthing to get result
        return result;
    }
    } 
```

**SecondActivity.java**

```
 public class SecondActivity extends Activity {      
        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);                    
        setContentView(R.layout.result_item);        
        TextView tv;        
        tv = (TextView)findViewById(R.id.tv);       
        Bundle extras=getIntent().getExtras();
        String value1=extras.getString("results");      
        tv.setText("Result\n" + value1);
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:35:24.043

更改`startActivityForResult(intent, 0)`为`startActivity(intent);`

像这样

```
private void showResult() {  
    results = queryData(table, type);               
    Intent intent = new Intent(firstActivity.this,SecondActivity.class);      
    intent.putExtra("results", results);  
    startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:38:24.660

做出新的意图并通过

```
Intent intent = new Intent(FirstActivity.this,SecondActivity.class);      
intent.putExtra("results", results);  
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:39:50.953

您已经完成了将数据传递给下一个的方法`Activity`是正确的。但是，您在开始活动时犯了一个错误。在您的代码中开始一个`Activity`应该如下所示 -

```
private void showResult() {  
    //...code       
    //checking for slection 
    results = queryData(table, type);               
    Intent intent = new Intent(this,SecondActivity.class);      
    intent.putExtra("results", results);  
    startActivity(intent);  // This is the way to start a new Activity which is in seperate class
} 
```

而且，看看下面 -

1.  [如何在 Android 应用程序的活动之间传递数据？](https://stackoverflow.com/q/2091465/940096)

2.  [在 Android 中的活动之间传递数据](https://stackoverflow.com/q/2965109/940096)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T04:43:16.653

**您可以通过 2 种方式进行操作：**

**1.**您可以使用Activity A`startActivityForResult()`中`onActivityResult()`的 ，将数据传递给 Activity B，然后经过一些计算，将结果传递回 Activity A。

**2.**现在如果你只想将一些数据从Activity A发送到Activity B，然后在TextView中显示，然后使用`putExtra()`and `getExtras()`...

**从活动 A 发送到 B：**

```
Intent i = new Intent(Activity_A.this, Activity_B.class);
i.putExtra("name",Name);
startActivity(i); 
```

**接收活动 B 的值：**

```
Intent i = getIntent();
String n = i.getExtras().getString("name"); 
```

# angularjs - AngularJS ng-repeat完成后如何执行js

> ID：12811946
> 
> 赞同：2
> 
> 时间：2012-10-10T04:28:59.923
> 
> 标签：angularjs, directive

我是 AngularJS 的新手。我想用来`ng-repeat`呈现数据列表。

每个数据`<abbr class="timeago" title="2012-10-10 05:47:21"></abbr>`在渲染后都应该有一个相似的。然后我可以使用 jquery 插件`timeago`把它变成人类友好的文本`about 1 hour ago`。

我的代码如下。但它没有任何效果。请帮忙。

**编辑：我的问题是，我可以得到正确的 html 呈现。但是代码在`directive`不运行。**

的HTML：

```
<div ng-app='weiboApp' ng-controller="WeiboListCtrl">
<table><tbody>
<tr ng-repeat='w in weibo' weiboLister='w'>
  <td>{{ w.text }}></td>
  <td><abbr class="timeago" title="{{ w.created }}"></abbr></td>
</tr>
</tbody></table>
</div> 
```

js：

```
var module = angular
            .module('weiboApp', [])
            .directive('weiboLister', function () {
              return {
                restrict: 'A',
                link: function (scope, element, attr) {
                  scope.watch('w', function (val) {
                    console.log(element); //this never run
                    element.find("abbr.timeago").timeago(); //this never run
                  }, true);
                }
              }
            });

function WeiboListCtrl($scope, $http) {
  $http.get('/api/weibo/list').success(function(data) {
    $scope.weibo = data;
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:57:25.380

问题原来是：**应该用 camel-case 定义指令`weiboLister`并在 html 中使用它和 snake-case `weibo-lister`。**感谢@tosh shimayama。

正确的代码如下：（我添加了一个`remove`功能，以防您正在寻找相同的东西。）

的HTML：

```
<div ng-app='weiboApp' ng-controller="WeiboListCtrl">
<table><tbody>
<tr ng-repeat='w in weibo' weibo-lister='w'> <!--important to be snake-case here-->
  <td>{{ w.text }}></td>
  <td><abbr class="timeago" title="{{ w.created }}"></abbr></td>
  <td><a ng-click='remove(w)'>&times;</a></td>
</tr>
</tbody></table>
</div> 
```

js：

```
var module = angular
        .module('weiboApp', [])
        .directive('weiboLister', function () {
          function delete(id, s_function, f_function) {
            //...
            if success { s_function(); }
            else { f_function(); }
          }
          return {
            restrict: 'A',
            link: function (scope, element, attr) {
              scope.$watch('w', function (val) {
                element.find("abbr.timeago").timeago();
              }
              scope.destroy = function(callback) {
                deletenews(scope.w.id, function () {
                  //s_function, things you want to do when delete with success
                  element.fadeOut(400, function () {
                    //this callback will splice the element in model
                    if (callback) callback.apply(scope);
                  })
                }, function () {
                  //f_function, when delete with failure
                });
              };
            }
          }
        });

function WeiboListCtrl($scope, $http) {
  $http.get('/api/weibo/list').success(function(data) {
    $scope.weibo = data;
  });

  $scope.removeWeibo = function(w) {
    var idx = $scope.weibo.indexOf(w);
    if (idx !== -1) {
      this.destroy(function() {
        $scope.weibo.splice(idx, 1);
      });
    }
  };
} 
```

# java - 将日语密码与 KeyStore.load() 一起使用会导致 java.io.IOException: Keystore was tampered with or password is wrong

> ID：12811950
> 
> 赞同：3
> 
> 时间：2012-10-10T04:29:40.563
> 
> 标签：java, unicode, keystore

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:16:52.390

好吧，根据描述，我猜控制台没有按预期处理 unicode 字符。您可以尝试使用 PowerShell 或尝试通过执行`chcp 65001`命令将 cmd.exe 的代码页更改为 UTF-8（请注意，这会扭曲控制台显示行为，但它会正确接受输入）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T05:19:05.793

此问题的根本原因是 keytool 实用程序无法正确解码在提示符下输入的非 ascii 密码。

这是一个已知问题，可在[http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=53546691146578386c644cb554976?bug_id=6433238](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=53546691146578386c644cb554976?bug_id=6433238)

因此，解决方案是创建一个未在提示时输入密码的密钥库。这可以通过以下方式完成：

keytool -genkey -keystore myKeyStore -alias myAlias -storepass すてきなパスワード</p>

# sql-server - 为什么我们可以在存储过程中编写大部分代码而使用数据层？

> ID：12811953
> 
> 赞同：-2
> 
> 时间：2012-10-10T04:30:09.393
> 
> 标签：sql-server, database-design, stored-procedures, three-tier

为什么我们可以在存储过程本身中编写大部分代码时使用数据层？它的优点和缺点是什么？ `Data layer`是 中的一个重要层`3 tier architecture`，它处理所有与数据库相关的任务。我的问题是，在大多数情况下，我们是否可以使用存储过程本身来实现这一点？在这种情况下，使用该层的主要优势是什么？

编辑：

问题只是为了清楚地了解数据层和数据库存储过程的使用。我在下面得到了一个答案，这对我有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:31:33.053

3 层方法适用于您可能希望使用不同的数据库引擎类型的情况。

从[多层架构](http://en.wikipedia.org/wiki/Multitier_architecture)

> **数据层**
> 
> 该层由数据库服务器组成。在这里存储和检索信息。该层保持数据中立，独立于应用服务器或业务逻辑。在自己的层上提供数据还可以提高可伸缩性和性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T04:39:02.653

在存储过程中执行查询逻辑，在数据访问层中连接数据库引擎

[MSDN](http://msdn.microsoft.com/en-us/library/ms973829.aspx) , [N-Tier-Architecture-and-Tips](http://www.codeproject.com/Articles/430014/N-Tier-Architecture-and-Tips)对 n 层架构有很好的洞察力

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:33:49.177

你不能很容易地对存储过程进行单元测试，因为你不能轻易地模拟数据库中的数据

# c# - C#中的checkedlistbox操作

> ID：12811954
> 
> 赞同：0
> 
> 时间：2012-10-10T04:30:21.673
> 
> 标签：c#, .net, checkedlistbox

我正在开发一个使用 CheckedListBox 的 C# 应用程序。

CheckedListBox 包含科目名称，如：会计、OC、物理、经济学、数学等...

我有一个数据库表，其中费用与特定科目相关：

例如表名费用：

```
Subject      |     Fee

Accounting         2000
Economics          3000
OC                 2000 
```

我想构建应用程序，以便当用户单击 CheckedListBox 中的主题时，它的费用应该自动添加到总数中。

为此，我尝试了不同的 CheckedListBox 事件：`Click`、、、`SelectedIndexChanged`等`ItemCheck`...

但是当我对 CheckedListBox 进行第一次检查时，我没有得到正确的行为。

对于测试，我在 CheckedListBox 中添加了以下科目：会计、经济学和数学。

这就是我的事件处理程序中的内容：

```
for(int i=0; i<chlstbox.CheckedItems.Count; i++)
{
    messagebox.show(chklstbox.CheckedItems[i].ToString());
} 
```

当我检查第一个主题会计时，它没有显示任何消息框。但是当我点击经济学时，它会显示账户，然后是经济学。

在这种情况下，当我第一次单击“会计”时，它应该显示“会计”。当我取消选中主题时没有回复。

我该怎么办？我应该使用任何与之相关的特定事件或技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:54:34.637

如果您查看[ItemChecketEventArgs](http://msdn.microsoft.com/en-us/library/dt06shbb%28v=vs.100%29.aspx)，您将看到正在选择的项目的 CurrentValue、OldValue 和索引。所以尝试这样的事情。[ItemCheck](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.itemcheck%28v=vs.100%29.aspx)事件让您在实际更改之前了解正在更改的内容。

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
{
    if (e.NewValue == CheckState.Checked)
    {
        MessageBox.Show(checkedListBox1.Items[e.Index].ToString());
    }
} 
```

# xcode - 用于开发和分发的 Xcode 私钥

> ID：12811960
> 
> 赞同：1
> 
> 时间：2012-10-10T04:30:56.913
> 
> 标签：xcode, provisioning

我知道这个问题是我在 SOF 上发现的一些其他类似问题的部分重复，但我没有找到确切的结论性答案。

我可以在我的 Xcode 上创建开发版本，但不能在分发版本上创建。它在 Xcode 的管理器中为我的分发配置文件显示“未找到有效的签名身份”。在 Keychain -> (login) Certificates 中，它显示开发人员证书的显示内容三角形，但不显示分发证书。我再次下载了分发证书，但没有帮助。

这里有什么问题？我的印象是，如果我有私钥，它应该适用于两个证书。这个假设是错误的吗？我需要什么来解决这个问题？

提前致谢 ：）

# jquery - Jquery sortable：如果输入A在第一个列表中，则用输入B的值替换输入A的值文本

> ID：12811961
> 
> 赞同：0
> 
> 时间：2012-10-10T04:30:56.990
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在使用可排序的 Jquery。

*   我有一个不在两个列表中的第一个输入调用“Iwanttogetavalue”。*   我有两个可以在彼此之间拖动的列表。*   输入是项目*   在第一个列表中只有一个项目（输入）是可拖动的。

    如果可拖动输入（项目）（具有名为“giveavalue”的类）在第一个列表（sortable1）中，我希望输入“Iwanttogetavalue”从此输入中获取值。

    这是我的代码：

    ```
    <input type="text" id="Iwanttogetavalue">

    <ul id="sortable1" class="connectedsortables">
    </ul>

    <ul id="sortable2" class="connectedsortables">
       <li><input type="text" class="giveavalue"></li>
       <li><input type="text" class="giveavalue"></li>
    </ul>

    <script>
    $(function() {
    $("#sortable1").sortable({
        connectWith: '.connectedsortables',
        receive: function(event, ui) {
            if ($(this).children().length > 1) {
                //ui.sender: will cancel the change.
                //Useful in the 'receive' callback.
                $(ui.sender).sortable('cancel');
            }
        }
    })
    $("#sortable2").sortable({
        connectWith: '.connectedsortables',
        receive: function(event, ui) {
            if ($(this).children().length > 10) {
                //ui.sender: will cancel the change.
                //Useful in the 'receive' callback.
                $(ui.sender).sortable('cancel');
            }
        }
    }).disableSelection();
    });
    </script> 
    ```

    谢谢你 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:02:19.157

您可能希望将其放入接收函数中，以便每次排序时都会调用它...

```
$('li .general_title').each(function () {
   var this_input = $(this);
   var id = this_input.attr('id');
   var value = this_input.val()
   if (id == "inputA") {
      $('#inputB').val(id);
   }
} 
```

如果您有任何问题，请告诉我。

# c++ - 将对象转换为 char 然后“将其取消转换”

> ID：12811964
> 
> 赞同：0
> 
> 时间：2012-10-10T04:31:00.480
> 
> 标签：c++, casting, char

如果你有一个对象

```
struct Packet P; 
```

其中包括

```
struct Packet {
    struct Packet_header header;
    unsigned char data[MAXIMUM_BUFFER_LENGTH];
}; 
```

标题包括

```
struct Packet_header {
    unsigned int checksum;
    unsigned int seq;
    unsigned int ack;
    unsigned int data_length;
}; 
```

如果我尝试投射数据包

```
(unsigned char*) &P 
```

无论如何我可以“取消”返回以获取我的原始数据包P吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:35:09.793

最简单的方法是使用`reinterpret_cast<Packet>(*(reinterpret_cast<Packet*>(pUC)))`，。`pUC``unsigned char*`

**正确**的方法是在 in 中拥有`Packet_header`一个转换构造函数和一个强制转换运算符（或类似强制转换的方法）：

```
struct Packet_header {
    Packet_header(unsigned char*);  //construct object form unsigned char*
    operator unsigned char*();      //cast it back
    const unsigned char* getUC();   //or get an unsigned char*

    unsigned int checksum;
    unsigned int seq;
    unsigned int ack;
    unsigned int data_length;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:34:41.010

```
unsigned char *p = (unsigned char*) &P;
Packet *pPacket = (Packet *)p; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:35:19.437

是的，理论上你可以做到这一点。
由于`Packet*`和`unsigned char*`都是指向数据类型的指针，因此不会发生信息丢失（如果其中一个是函数指针，那么信息可能会丢失）。

有几点需要注意：

*   首先避免这种类型转换
*   为了通用性，最好进行类型转换`void*`；在向您投射时`void*`不必使用类型转换
*   用于`reinterpret_cast<>`向读者表明正在发生“肮脏”的事情

# c# - 实体框架循环参考

> ID：12811975
> 
> 赞同：12
> 
> 时间：2012-10-10T04:32:16.913
> 
> 标签：c#, entity-framework, code-first

再次尝试这个问题，因为我的第一次尝试几乎没有连贯性：p

所以我非常困惑并首先使用实体​​框架代码

我有森林课。

我有一个树类。

每个森林可以有很多树

当我尝试序列化时，我得到了循环引用

```
public class Forest
{

    public Guid ID { get; set; }  
    public virtual List<Tree> Trees { get; set; }
}
public class Tree
{
    public Guid ID { get; set; }
    public Guid? ForestId {get;set;}

    [ForeignKey("ForestId")]
    public virtual Forest Forest {get;set;}
 } 
```

每个森林都有树，但并非每棵树都在森林中。我在做时遇到多重性错误

```
@(Html.Raw(Json.Encode(Model))) 
```

模型是森林的地方

如果我做`ForestId`a`Guid`而不是 a`Guid?`我得到循环参考错误。

我也试过受保护的覆盖无效

```
OnModelCreating(System.Data.Entity.ModelConfiguration.ModelBuilder modelBuilder) 
{ 
  modelBuilder.Entity<Forest>() 
  .HasMany(x => x.Tree) 
  .WithOptional() 
   .HasForeignKey(y => y.ForestId); 
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-10T04:39:20.510

最好的方法是您应该使用 DTO 仅将您想要的数据传输到客户端。DTO 应该只有简单的属性，因此不会产生循环引用错误。目前森林拥有，树木中的`List<Trees> Trees` 每个人都拥有，而那又拥有`Tree``Forest``Forest``List<Trees>`

**或者**

您可以使用您不希望 Json.Encode 序列化的属性来装饰您的属性`ScriptIgnore`，然后不会将其发送回客户端。

[http://msdn.microsoft.com/en-us/library/system.web.script.serialization.scriptignoreattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.scriptignoreattribute.aspx)

例如：

```
public class Forest
{    
    public Guid ID { get; set; }  
    public virtual List<Tree> Trees { get; set; }
}
public class Tree
{
    public Guid ID { get; set; }
    public Guid? ForestId {get;set;}

    [ForeignKey("ForestId")]
    [ScriptIgnore]
    public virtual Forest Forest {get;set;}
 } 
```

**编辑：**

与`ScriptIgnore`您一起还应该`virtual`从`Forest`and中删除`Trees`，这将起作用。我已经测试过了。但是，我不建议这样做，因为虚拟关键字是延迟加载的原因。因此，正如我所说，您需要基于这些模型创建 DTO，并且只将 DTO 发送给客户端。

# android - 设置警报对话框的标题背景颜色而不制作自定义对话框

> ID：12811977
> 
> 赞同：0
> 
> 时间：2012-10-10T04:32:18.067
> 
> 标签：android, android-alertdialog

我正在使用警报对话框生成器，我想更改默认的警报对话框标题背景颜色。我已经对其进行了搜索（但找不到我想要的）。问题是我不想创建自定义对话框并扩展它，因为我想使用警报对话框的现有功能（设置项目列表..等）。

无论如何我可以设置标题背景颜色而不必创建自定义对话框/添加视图.etc？

非常感谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T06:16:09.940

您可以使用**setCustomTitle(view)设置自定义标题**

```
LayoutInflater inflater = getLayoutInflater();
View view=inflater.inflate(R.layout.custom_view, null);
alert.setCustomTitle(view); 
```

# python - 将python矩阵切成象限

> ID：12811981
> 
> 赞同：4
> 
> 时间：2012-10-10T04:32:59.847
> 
> 标签：python, arrays, matrix

假设我在 python 中有以下矩阵：

`[[1,2,3,4], [5,6,7,8], [9,10,11,12], [13,14,15,16]]`

我想将其切成以下矩阵（或象限/角）：

```
[[1,2], [5,6]]

[[3,4], [7,8]]

[[9,10], [13,14]]

[[11,12], [15,16]] 
```

python中的标准切片运算符是否支持这一点，或者是否有必要使用像numpy这样的扩展库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T04:37:58.827

如果您总是使用 4x4 矩阵：

```
a = [[1 ,2 , 3, 4],
     [5 ,6 , 7, 8],
     [9 ,10,11,12],
     [13,14,15,16]]

top_left =  [a[0][:2], a[1][:2]]
top_right = [a[0][2:], a[1][2:]]
bot_left =  [a[2][:2], a[3][:2]]
bot_right = [a[2][2:], a[3][2:]] 
```

您也可以对任意大小的矩阵执行相同的操作：

```
h = len(a)
w = len(a[1])
top_left =  [a[i][:w // 2] for i in range(h // 2)]
top_right = [a[i][w // 2:] for i in range(h // 2)]
bot_left =  [a[i][:w // 2] for i in range(h // 2, h)]
bot_right = [a[i][w // 2:] for i in range(h // 2, h)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:56:32.557

```
>>> a = [[1,2,3,4], [5,6,7,8], [9,10,11,12], [13,14,15,16]]
>>> x = map(lambda x:x[:2], a)
>>> x
[[1, 2], [5, 6], [9, 10], [13, 14]]
>>> y = map(lambda x: x[2:], a)
>>> y
[[3, 4], [7, 8], [11, 12], [15, 16]]
>>> x[:2] + y[:2] + x[2:] + y[2:]
[[1, 2], [5, 6], [3, 4], [7, 8], [9, 10], [13, 14], [11, 12], [15, 16]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-18T17:09:00.740

这个问题已经回答了，但我认为这个解决方案更通用。它也可以通过`numpy.split`以下方式使用和列表理解：

```
import numpy as np
A = np.array([[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]])
B = [M for SubA in np.split(A,2, axis = 0) for M in np.split(SubA,2, axis = 1)] 
```

得到：

```
>>>[array([[1, 2],[5, 6]]), 
array([[3, 4],[7, 8]]), 
array([[ 9, 10],[13, 14]]),
array([[11, 12],[15, 16]])] 
```

现在，如果您想将它们分配给不同的变量，只需：

```
C1,C2,C3,C4 = B 
```

看看[numpy.split doc](https://docs.scipy.org/doc/numpy/reference/generated/numpy.split.html)。更改参数`indices_or_sections`可以获得更多的拆分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-27T11:34:37.383

尽管答案可以提供所需的解决方案。这些**不适**用于不同大小的数组。如果您有一个大小为 (6x7) 的 NumPy 数组，那么这些方法将无法创建解决方案。我已经为自己准备了一个解决方案，并想在这里分享。

注意：在我的解决方案中，由于轴尺寸不同，会有重叠。我创建了这个解决方案来将天文图像分成四个象限。然后，我使用这些象限来计算环的平均值和中位数。

```
import numpy as np
def quadrant_split2d(array):
    """Example function for identifiying the elements of quadrants in an array.
    array: 
        A 2D NumPy array.
    Returns:
        The quadrants. True for the members of the quadrants, False otherwise.
    """
    Ysize = array.shape[0]
    Xsize = array.shape[1]
    y, x = np.indices((Ysize,Xsize))
    if not (Xsize==Ysize)&(Xsize % 2 == 0): print ('There will be overlaps')
    sector1=(x<Xsize/2)&(y<Ysize/2)
    sector2=(x>Xsize/2-1)&(y<Ysize/2)
    sector3=(x<Xsize/2)&(y>Ysize/2-1)
    sector4=(x>Xsize/2-1)&(y>Ysize/2-1)
    sectors=(sector1,sector2,sector3,sector4)
    return sectors 
```

您可以使用不同类型的数组测试该函数。例如：

```
test = np.arange(42).reshape(6,7)
print ('Original array:\n', test)
sectors = quadrant_split2d(test)
print ('Sectors:')
for ss in sectors: print (test[ss]) 
```

这将为我们提供以下部门：

```
[ 0  1  2  3  7  8  9 10 14 15 16 17]
[ 3  4  5  6 10 11 12 13 17 18 19 20]
[21 22 23 24 28 29 30 31 35 36 37 38]
[24 25 26 27 31 32 33 34 38 39 40 41] 
```

# c# - 在 C# 中从格式“01 Oct 2012 23:59:59:000”的日期时间转换为“01-10-2012 23:59:59”

> ID：12811985
> 
> 赞同：-3
> 
> 时间：2012-10-10T04:33:54.900
> 
> 标签：c#, asp.net

**我的数据库包含"2012-10-01 23:59:59.000"**形式的 "From Date"，同时将值作为**"01 Oct 2012 23:59:59:000"**的前端。那么我怎样才能得到没有“Oct”格式的日期。

我也试过这个

```
 foreach (DataRow dr in _dt.Rows)
    {
        dr["FromDt"] = String.Format("{0:dd-MM-yyyy hh:mm tt zzz}", dr["FromDt"]);
        dr["ToDt"] = String.Format("{0:dd-MM-yyyy}", dr["ToDt"]);  
    } 
```

但是没办法。。

我将stackoverflow中的所有这些查询都参考了我的最佳知识。请提出一些方法。提前致谢

我也使用了以下这些trils-

```
 DateTime dt = DateTime.Parse(dr["FromDt"].ToString());
        dr["FromDt"] = String.Format("{0:dd-MM-yyyy hh:mm tt zzz}", dr["FromDt"]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:36:54.110

**tl; dr***该*代码适用于 a `DateTime`or`DateTimeOffset`值。但是，在这种情况下，对象的*类型不是*DateTime*或*`dr["FromDt"]`DateTimeOffset值。

 *“按预期工作”：

```
string.Format("{0:yyyy-MM-dd}",DateTime.Now) // -> 2012-10-09 
```

观察到的行为；"foo" 是一个字符串，格式修饰符被忽略：

```
string.Format("{0:junk}","foo") // -> foo 
```

如果该值恰好是一个字符串（希望它在从数据库读取时*意外*转换 - 显示的值看起来很可疑`someDateTime.ToString()`- 并且在数据库中不是这样），那么：

1.  修复/删除转换（正确）或，
2.  首先将其转换回 DateTime (hack) :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:59:34.320

试试这个

将字段转换为 DateTime dt 然后应用格式这应该可以工作

```
DateTime dt = DateTime.Parse(dr["FromDt"];
String.Format("{0:dd MMM yyyy hh:mm:ss tt zzz}", dt) 
```

如果您不想要时区，那么您应该将其用作

```
String.Format("{0:dd MMM yyyy hh:mm:ss}", dt) 
```

如果您想从下面的示例中使用任何格式，您可以使用任何格式

```
 // create date time 2008-03-09 16:05:07.123
    DateTime dt = new DateTime(2008, 3, 9, 16, 5, 7, 123);

    String.Format("{0:y yy yyy yyyy}", dt);  // "8 08 008 2008"   year
    String.Format("{0:M MM MMM MMMM}", dt);  // "3 03 Mar March"  month
    String.Format("{0:d dd ddd dddd}", dt);  // "9 09 Sun Sunday" day
    String.Format("{0:h hh H HH}",     dt);  // "4 04 16 16"      hour 12/24
    String.Format("{0:m mm}",          dt);  // "5 05"            minute
    String.Format("{0:s ss}",          dt);  // "7 07"            second
    String.Format("{0:f ff fff ffff}", dt);  // "1 12 123 1230"   sec.fraction
    String.Format("{0:F FF FFF FFFF}", dt);  // "1 12 123 123"    without zeroes
    String.Format("{0:t tt}",          dt);  // "P PM"            A.M. or P.M.
    String.Format("{0:z zz zzz}",      dt);  // "-6 -06 -06:00"   time zone

// date separator in german culture is "." (so "/" changes to ".")
String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9/3/2008 16:05:07" - english (en-US)
String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9.3.2008 16:05:07" - german (de-DE)

// month/day numbers without/with leading zeroes
String.Format("{0:M/d/yyyy}", dt);            // "3/9/2008"
String.Format("{0:MM/dd/yyyy}", dt);          // "03/09/2008"

// day/month names
String.Format("{0:ddd, MMM d, yyyy}", dt);    // "Sun, Mar 9, 2008"
String.Format("{0:dddd, MMMM d, yyyy}", dt);  // "Sunday, March 9, 2008"

// two/four digit year
String.Format("{0:MM/dd/yy}", dt);            // "03/09/08"
String.Format("{0:MM/dd/yyyy}", dt);          // "03/09/2008"

String.Format("{0:t}", dt);  // "4:05 PM"                         ShortTime
String.Format("{0:d}", dt);  // "3/9/2008"                        ShortDate
String.Format("{0:T}", dt);  // "4:05:07 PM"                      LongTime
String.Format("{0:D}", dt);  // "Sunday, March 09, 2008"          LongDate
String.Format("{0:f}", dt);  // "Sunday, March 09, 2008 4:05 PM"  LongDate+ShortTime
String.Format("{0:F}", dt);  // "Sunday, March 09, 2008 4:05:07 PM" FullDateTime
String.Format("{0:g}", dt);  // "3/9/2008 4:05 PM"                ShortDate+ShortTime
String.Format("{0:G}", dt);  // "3/9/2008 4:05:07 PM"             ShortDate+LongTime
String.Format("{0:m}", dt);  // "March 09"                        MonthDay
String.Format("{0:y}", dt);  // "March, 2008"                     YearMonth
String.Format("{0:r}", dt);  // "Sun, 09 Mar 2008 16:05:07 GMT"   RFC1123
String.Format("{0:s}", dt);  // "2008-03-09T16:05:07"             SortableDateTime
String.Format("{0:u}", dt);  // "2008-03-09 16:05:07Z"            UniversalSortabl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:08:06.020

怎么样：

```
var dt = DateTime.ParseExact(dr["FromDt"].ToString(), "dd MMM yyyy HH:mm:ss:fff", enUS, DateTimeStyles.None);
var output = dt.ToString("dd-MM-yyyy HH:mm:ss.fff"); 
```

编辑：更改为使用 ParseExact，以适应输入字符串的稍微奇怪的格式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T04:45:38.083

如果您使用的是 datetimepicker，那么只需进入它的属性，然后将格式属性设置为短。然后在显示日期时，您应该将其显示为>>

```
dtpFrmDate.Value.Date.ToShortDateString(); 
```

我认为它会给你想要的结果。*

# macos - 安装 osx 凭证助手后 Git 挂起

> ID：12811986
> 
> 赞同：2
> 
> 时间：2012-10-10T04:34:06.703
> 
> 标签：macos, git, keychain

我和这个线程有同样的问题：[Git 无限期挂起 - 我认为与 osx credential helper 中断](https://stackoverflow.com/questions/12613315/git-hangs-indefinitely-broke-with-osx-credential-helper-i-think)

基本上 - 一直运行`git`没有问题，然后安装`credential-osxkeychain`并`git`开始在任何命令后无限期挂起。例如，运行`git init`会导致提示挂起，并且任何输入都会产生错误：`bad input`

我尝试按照建议删除 git，`usr/bin/git`但现在它无法识别任何内容。我尝试重新安装`git`，但现在它似乎无法识别它。

我跑了`which git`，它返回：`/usr/local/git/bin/git`

我对此有点陌生，没有胆量开始运行`sudo`命令并在`/usr/bin`目录中移动东西。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:41:32.373

我遇到了同样的问题并因此解决了它：

1.  通过安装附带的*uninstall.sh*卸载git
2.  通过安装程序重新安装 git
3.  运行*which git*和*cd*到包含 git 的文件夹（例如*cd /usr/local/git/bin/*）
4.  运行*curl -O [http://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain](http://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain)*
5.  运行*chmod u+x git-credential-osxkeychain*
6.  运行*git config --global credential.helper osxkeychain*

固定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:47:33.377

仍然不完全确定我实际上做了什么来解决这个问题，但重置终端最终让它工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:19:51.223

我有同样的问题。

我没有安装 git 1.7.10 或更高版本。把一切都搞砸了。

为了解决这个问题，我不得不删除 git 并安装更新的版本。

删除后，我使用自制软件安装。

又开始工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:01:23.883

为了解决这个问题，我重新安装了 git `http://git-scm.com/download/mac` ，然后添加`/usr/local/git/bin`到文件的顶部`/etc/paths`

# c++ - OpenCV - 薄板样条翘曲的合适实现

> ID：12811997
> 
> 赞同：6
> 
> 时间：2012-10-10T04:34:54.210
> 
> 标签：c++, opencv

我有一张脸的形状以及那张脸的重建，我想对初始形状的相应图像进行建模。

基本上，我想将点从原始形状移动到重建面部所指示的位置。我试图通过使用薄板样条翘曲来做到这一点，它的实现：http: [//ipwithopencv.blogspot.ro/2010/01/thin-plate-spline-example.html](http://ipwithopencv.blogspot.ro/2010/01/thin-plate-spline-example.html)。

但是，它并没有像我想要的那样工作。我想固定图像的角，只是移动定义面部的相应点。我可以用两张图片来说明这一点。在第一张图片中，我有原始脸的形状和重建的形状。 ![在此处输入图像描述](../Images/f9b0a3e035cc1742a7580a7ddd41bb79.png)

在这里，我有我想要修改的图片和使用上述链接中的代码生成的图片。绿色点标记原始面部点，蓝色点标记它们的新位置以及我想要重新定位它们并伸展我的脸的位置。

![在此处输入图像描述](../Images/89b5b60e8960a179d9412bd957563cc5.png)

我想要的只是将绿点移动到蓝点，使其看起来变形。您知道您测试过的任何方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:09:35.857

固定角落非常容易。只需为四个图像角添加四个额外的对应关系。就你的例子而言：

```
iP.push_back(cv::Point(0, 0));
iiP.push_back(cv::Point(0, 0));
iP.push_back(cv::Point(0, height-1));
iiP.push_back(cv::Point(0, height-1));
iP.push_back(cv::Point(width-1, 0));
iiP.push_back(cv::Point(width-1, 0));
iP.push_back(cv::Point(width-1, height-1));
iiP.push_back(cv::Point(width-1, height-1)); 
```

当然， *宽度*是图像宽度，*高度*是图像高度