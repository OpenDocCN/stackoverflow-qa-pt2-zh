# StackOverflow 问答 13824000-13824999

# android - 如何在 Android 中调整没有纵横比的位图大小

> ID：13824006
> 
> 赞同：0
> 
> 时间：2012-12-11T16:14:09.890
> 
> 标签：android, android-layout

我是位图新手。我知道如何在 android 中调整或缩放位图。但问题是假设我的图像是 100x500 或任何高度和宽度。现在我想调整它的大小，如 100x100。怎么可能

请帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T16:20:47.813

对于这种简单的情况，最合理的做法是将源图像向下平移到中间，然后在新的 Canvas 上再次绘制位图。这种类型的调整大小在 Android中称为[中心裁剪。](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)中心裁剪的想法是产生填充整个边界的最大图像，并且不改变纵横比。

您可以自己实现这一点，以及其他类型的调整大小和缩放。基本上，您使用[矩阵](http://developer.android.com/reference/android/graphics/Matrix.html)来发布您的更改，例如缩放和移动（平移），然后在考虑矩阵的[画布上绘制您的原始位图。](http://developer.android.com/reference/android/graphics/Canvas.html)

这是我从另一个答案here中采用的一种方法（找不到原始帖子以正确给予信用）：

```
public static Bitmap scaleCenterCrop(Bitmap source, int newHeight, int newWidth)
{
    int sourceWidth = source.getWidth();
    int sourceHeight = source.getHeight();
    float xScale = (float) newWidth / sourceWidth;
    float yScale = (float) newHeight / sourceHeight;
    float scale = Math.max(xScale, yScale);

    //get the resulting size after scaling
    float scaledWidth = scale * sourceWidth;
    float scaledHeight = scale * sourceHeight;

    //figure out where we should translate to
    float dx = (newWidth - scaledWidth) / 2;
    float dy = (newHeight - scaledHeight) / 2;

    Bitmap dest = Bitmap.createBitmap(newWidth, newHeight, source.getConfig());
    Canvas canvas = new Canvas(dest);
    Matrix matrix = new Matrix();
    matrix.postScale(scale, scale);
    matrix.postTranslate(dx, dy);
    canvas.drawBitmap(source, matrix, null);
    return dest;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:26:13.740

```
int dstWidth = 100;
int dstHeight = 100;
boolean doFilter = true;
Bitmap scaledBitmap = Bitmap.createScaledBitmap(src, dstWidth, dstHeight, doFilter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-27T03:32:20.557

对 wsanville 的代码进行了一些修改..它对我有用 请注意，我使用的是最小比例（取最小比例，以便整个位图可以在屏幕上呈现..如果我取最大值，那么它可能会超出屏幕

```
 int sourceWidth = mBitmap.getWidth();
        int sourceHeight = mBitmap.getHeight();
        float xScale = (float) newWidth / sourceWidth;
        float yScale = (float) newHeight / sourceHeight;

        float scale = Math.min(xScale, yScale);

        //get the resulting size after scaling
        float scaledWidth = scale * sourceWidth;
        float scaledHeight = scale * sourceHeight;

        //figure out where we should translate to
        float dx = (newWidth - scaledWidth) / 2;
        float dy = (newHeight - scaledHeight) / 2;

        Matrix defToScreenMatrix = new Matrix();

        defToScreenMatrix.postScale(scale, scale);
        defToScreenMatrix.postTranslate(dx, dy);

        mBitmap = Bitmap.createBitmap(mBitmap, 0, 0, sourceWidth, sourceHeight, defToScreenMatrix, false); 
```

# c++ - 虚函数、函数重载、继承

> ID：13824007
> 
> 赞同：1
> 
> 时间：2012-12-11T16:14:11.393
> 
> 标签：c++, virtual

为什么它不打印'doub'？求详细解释。谢谢你的时间！

```
#include<iostream.h>
using namespace std;

class B{
 public:
 virtual  int ft(int i) { cout <<"int"; return 0;}
};
class D: public B {
 public:
  double ft(double i){cout << "doub"; return 0.0;}
  int ft(int i) { cout <<"intdoub"; return 0;}
};

int main(){
 B *pB = new D;
 pB->ft(2.3);
} 
```

o/p 是 'intdoub'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:16:58.113

变量`pB`是类型的`B*`，不知道函数`double D::ft(double)`，只是`virtual int B::ft(int)`。尽管您应该收到编译器警告，但`double`值`2.3`的转换会自动发生。`int`

尝试：

```
dynamic_cast<D*>(pB)->ft(2.3);
dynamic_cast<D*>(pB)->B::ft(2.3); 
```

# java - 使用 Maven 使用 Ant 脚本生成 Java 源代码

> ID：13824009
> 
> 赞同：0
> 
> 时间：2012-12-11T16:14:15.760
> 
> 标签：java, maven

我需要生成一些 Java 源代码，然后由 Maven 编译。问题是生成这些源代码的遗留代码是用 Java 编写的。使用的解决方案（解决方法）是：

*   带有生成 Java 源代码的项目 A
*   项目 B 依赖于项目 A 并在 Maven 中调用 antrun 来执行项目 A 中的类

当你构建项目 B 时，Maven 会：

*   编译项目 A（生成源代码的代码）并执行项目 A 的 pom.xml 告诉它执行的任何其他操作。
*   antrun 这些类（根据项目 B 的 pom.xml 的要求） - 因此将生成源并将其添加到项目 B
*   编译项目 B 源

这是因为 Antrun 要求项目 A 中的类在执行时已经被编译。然而，这是一个丑陋的解决方案，项目 A 和 B 实际上应该只是一个项目。我知道我应该使用：

```
<phase>generate-sources</phase> 
```

我看到了一个 Groovy 的例子（http://blog.retep.org/2009/11/07/using-groovy-to-generate-java-sources-in-maven/），但我想知道是否有任何更简单的方法来做到这一点，同时将所有东西都放在一个项目中，而不必将代码生成从 Java 更改为 groovy 或其他东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:17:29.953

我在这种情况下使用 Groovy，但如果您不想这样做，那么拥有两个单独的项目是正确的做法。

而且我不会从另一个项目中编译一个项目，我只会将它们作为单独的项目。通常，代码生成器项目不会像“真实”项目那样经常更改，因此无需一直构建它。

# typo3 - Formhandler 主题动态字段

> ID：13824011
> 
> 赞同：3
> 
> 时间：2012-12-11T16:14:27.257
> 
> 标签：typo3

我对 TYPO3 扩展名“Formhandler”有疑问。我安装了扩展程序，添加了验证码，一切正常。

这是 HTML 模板：

```
<!-- ###TEMPLATE_FORM1### begin -->
<form action="###REL_URL###" name="projektform" id="projektform" method="post" class="formhandler">
  <br />  
  <div id="sender_name">
    <label for="sender_name"><span style="color:red;">*</span>Name:</label>
    <br />
    <input type="text" name="formhandler[sender_name]" id="sender_name"
    value="###value_sender_name###" />
    ###error_sender_name###
  </div>
 <br />
 <div id="sender_email">
    <label for="sender_email"><span style="color:red;">*</span>Email:</label>
    <br />
    <input type="text" name="formhandler[sender_email]" id="sender_email"
    value="###value_sender_email###" />
    ###error_sender_email###
  </div>
  <br />
  <div id="sender_message">
    <label for="message"><span style="color:red;">*</span>Message:</label>
    <br />
    <textarea name="formhandler[message]" id="message">###value_message###</textarea>
    ###error_message###
  </div>
  <br />
  <!--###CAPTCHA_INSERT### this subpart is removed if CAPTCHA is not enabled! -->
  <div id="captcha">
    <label for="freecapfield"><span style="color:red;">*</span>###SR_FREECAP_NOTICE###</label>
    <br />
    ###SR_FREECAP_CANT_READ###
    <br />
    <div class="cap-img">
      ###SR_FREECAP_IMAGE###
    </div>
    <br />
    <input type="text" id="freecapfield" name="formhandler[freecapfield]" title="###SR_FREECAP_NOTICE###" value="">
    <br />
    ###error_freecapfield###
  </div>
  <!--###CAPTCHA_INSERT###-->  
  <br />
  <input type="submit" value="Submit" ###submit_nextStep### />
</form>
<!-- ###TEMPLATE_FORM1### end -->

<!-- ###TEMPLATE_SUBMITTEDOK### begin -->
<p>The following message has been sent:</p>
<p>###value_message###</p>
<!-- ###TEMPLATE_SUBMITTEDOK### end -->

<!-- ###TEMPLATE_EMAIL_ADMIN_PLAIN### begin -->
The following contact form has been sent to you:
Sender: ###value_sender_name### ###value_sender_email###
Text:
###value_message###
<!-- ###TEMPLATE_EMAIL_ADMIN_PLAIN### end --> 
```

这是错字脚本：

```
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/contactform/1-contactform.ts">
plugin.Tx_Formhandler.settings {  
  debug = 1
  templateFile = fileadmin/contactform/1-contactform.html  
  formValuesPrefix = formhandler   
  finishers {    
    1 {      
      class = Tx_Formhandler_Finisher_Mail
    }    
    2 {      
      class = Tx_Formhandler_Finisher_SubmittedOK      
      config.returns = 1    
    }  
  }
  # Rules for the validation
  validators.1.class = Validator_Default
  validators.1.disabled = 0
  validators.1.config.fieldConf {
    message.errorCheck.1 = required
    message.errorCheck.2 = minLength
    message.errorCheck.2.value = 5
    sender_name.errorCheck.1 = required
    sender_email.errorCheck.1 = required
    sender_email.errorCheck.2 = email
    freecapfield.errorCheck.1 = srFreecap
  }
  # Layout if the error message
  singleErrorTemplate {
    totalWrap = |
    singleWrap = <span style="color: red;">|</span>
  }
} 
```

所以我所拥有的是姓名、电子邮件、消息和验证码字段，它们工作得很好。但是后来我想在表单中添加一个“主题”字段，这样当有人从在线联系表单发送电子邮件时，他就可以设置该电子邮件的主题。我添加了一个额外的输入字段：

```
 <div id="subject">
      <label for="subject">Subject:</label>
    <br />
    <input type="text" name="formhandler[subject]" id="subject" value="###value_subject###"/>
  </div> 
```

在 HTML 模板中添加输入后，我输入了值“SUBJECT”。结果是我能够在 formhandler 调试器中看到该值：

```
The current GET/POST params are:
sender_name     NAME
sender_email    EMAIL@MAIL.COM
subject     SUBJECT
message     MESSAGE
freecapfield    kdlxp
step-2-next     1
submitted   1
randomID    5fab4cc19017c5c48dafb6a05ed7687b
removeFile  
removeFileField     
submitField 
```

然后我需要做的就是将该值“分配”给“管理主题”字段。我做了很多研究，我能够找到以下代码：

```
plugin.Tx_Formhandler.settings.predef.myformname {
  finishers {
    1.class = Tx_Formhandler_Finisher_Mail
    1.config {
      limitMailsToUser = 5
      admin {
        subject = TEXT
        subject.data = GPvar:formhandler|title 
      }
    }
  }
} 
```

所以我把代码放在我的错字脚本中，用我的表单名称“projektform”替换“myformname”，用我的输入字段名称“subject”替换标题，但是当我发送电子邮件时，没有主题。我做了很多搜索，尝试了很多例子，但结果是一样的。你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T14:24:08.157

不推荐使用 GPvar，请改用 GP：

```
subject.data = GP:formhandler|subject 
```

可以在此操作指南中找到更多信息：[如何在 TypoScript 中访问 Formhandler 值](http://www.typo3-formhandler.com/blog/howtos/how-to-access-formhandler-values/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T17:37:12.283

链接有一点机会[http://www.typo3-formhandler.com/en/blog/howtos/how-to-access-formhandler-values/](http://www.typo3-formhandler.com/en/blog/howtos/how-to-access-formhandler-values/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T12:05:44.563

或者您可以使用旨在为您执行此操作的机制：

在您的模板中，您通过 name="formhandler[subject]" 指定了字段名。这意味着您的值将存储在“主题”键下。大多数（如果不是全部）完成者能够像这样处理这个键/值对：

```
plugin.Tx_Formhandler.settings {
  finishers {
    1 {
        class = Tx_Formhandler_Finisher_Mail
        config.admin.subject = subject
    }
  }
} 
```

您的代码可能无法正常工作的另一个原因是您没有指定表单以使用 predef 并将其大部分配置在 predef 之外。但是您找到的主题的配置使用 predef。仅更改 predef 名称是不够的，请将配置与您的表单相关联。它必须与您的其他配置处于同一级别。这也可能起作用：

```
plugin.Tx_Formhandler.settings {
  finishers {
    1.class = Tx_Formhandler_Finisher_Mail
    1.config {
      limitMailsToUser = 5
      admin {
        subject = TEXT
        subject.data = GP:formhandler|subject 
      }
    }
  }
} 
```

旁注：即使不使用 predef 是可以的（因为您不需要多种不同的形式），但不推荐，您应该考虑将配置更改为使用 predefs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T08:56:43.013

假设您的表单确实基于带有键“projektform”的预定义表单：

```
plugin.Tx_Formhandler.settings.predef.projektform {
    finishers {
        1.class = Tx_Formhandler_Finisher_Mail
        1.config {
            limitMailsToUser = 5
            admin {
                subject = TEXT
                subject.data = GP:formhandler|subject
                subject.sanitize = 1
            }
        }
    }
} 
```

如果您使用“TEXT”之类的 cObject 访问 GET/POST 参数，则应始终添加“sanitize=1”。Formhandler 挂钩到 stdWrap 并将提交的表单数据添加到 GET/POST 数组。

更好的方法是@denvercoder 建议只使用输入字段的名称：

```
plugin.Tx_Formhandler.settings.predef.projektform {
    finishers {
        1.class = Tx_Formhandler_Finisher_Mail
        1.config {
            limitMailsToUser = 5
            admin {
                subject = subject
            }
        }
    }
} 
```

# facebook - 发送附件收件箱

> ID：13824014
> 
> 赞同：0
> 
> 时间：2012-12-11T16:14:35.477
> 
> 标签：facebook, facebook-graph-api

我想在 facebook 上发送带有附件的收件箱消息。那可能吗？

参考：[https ://developers.facebook.com/docs/reference/api/message/](https://developers.facebook.com/docs/reference/api/message/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:29:54.210

Facebook 不允许使用 Graph API（避免垃圾邮件）向用户发送消息，但有 1 个例外，作为一个页面，您可以回复用户的消息。

发送此类消息的唯一方法是使用[Chat API (XMPP)](https://developers.facebook.com/docs/chat/)，但它更复杂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:20:03.837

不是新的 Graph API，而是 PHP-SDK；您可以在此处的 Peter Bailey 的回答中看到它：

[Facebook 发帖 API 问题](https://stackoverflow.com/questions/3354291/facebook-posting-api-question)

# c# - WCF RIA 编辑服务器端（DomainServiceClass）

> ID：13824017
> 
> 赞同：0
> 
> 时间：2012-12-11T16:14:50.623
> 
> 标签：c#, entity-framework, wcf-ria-services

可以在服务器端进行编辑吗？

我有一个表，其中的值是以编程方式组成的，值一直在变化，所以我想要一个“更新”来重新计算表的值并提交更改。我不需要将任何数据传回客户端。

我在更改相关记录后尝试了该`ObjectContext.SaveChanges()`方法`DomainServiceClass`，但它不会更改数据库值。

我错过了什么？可能吗？

服务器端，DomainServiceClass 方法：

```
public IQueryable<POINT> UpdateDB()
{
     var Points =  ObjectContext.POINTS.Include("Readings").Include("Items").Include("LatestStatus");
     List<POINT> itemsChanged = new List<POINT>();

        foreach (Point point in Points)
        {
            int status = CalculateStatus(point)
            if (point.LatestStatus.FirstOrDefault().Status != status)
                point.LatestStatus.FirstOrDefault().Status = new status
        }

        ObjectContext.SaveChanges();

        /*try
        {
            // Try to save changes, which may cause a conflict. 
            int num = ObjectContext.SaveChanges();
            Console.WriteLine("No conflicts. " +
                num.ToString() + " updates saved.");
        }
        catch (OptimisticConcurrencyException)
        {
            // Resolve the concurrency conflict by refreshing the  
            // object context before re-saving changes. 
            ObjectContext.Refresh(RefreshMode.ClientWins, inspectionPoints);

            // Save changes.
            ObjectContext.SaveChanges();
            Console.WriteLine("OptimisticConcurrencyException "
            + "handled and changes saved");
        }*/

        return itemsChanged.AsQueryable();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:49:24.317

由于您尝试进行的更改不是传统的 CRUD 操作，因此您需要使用 invoke 属性标记您的方法。此外，对 POINT 对象的更新也需要使用 ObjectContext ，否则您只是在更改内存集合。

```
[Invoke]
public IQueryable<POINT> UpdateDB()
{
  var Points =  ObjectContext.POINTS.Include("Readings").Include("Items").Include("LatestStatus");
  var itemsChanged = new List<POINT>();

  foreach (Point point in Points)
  {
    int status = CalculateStatus(point);
    if (point.LatestStatus.FirstOrDefault().Status != status) // Where does this status come from?
    {
      ObjectContext.POINTS.FirstOrDefault( p => p.ID == point.ID).LatestStatus.FirstOrDefault().Status = new status //  Pseudo code?
      //point.LatestStatus.FirstOrDefault().Status = new status
    }
  }

  ObjectContext.SaveChanges();
} 
```

然后你可以调用这个方法：

```
var ctx = new YourDomainContext();

ctx.UpdateDB( (op) =>
{
  if (op.HasError)
    // Handle errors.
  else
  {
    // Do stuff.
  }
}); 
```

# knockout.js - ko.mapping.fromJS 与 JayData 对象数组

> ID：13824022
> 
> 赞同：0
> 
> 时间：2012-12-11T16:15:21.610
> 
> 标签：knockout.js, knockout-mapping-plugin, ko.observablearray, jaydata

当我使用一组自定义 jaydata 对象时，结果很奇怪。

```
var arr = [];
arr.push(new Northwind.Employee());
arr.push(new Northwind.Employee());

var newarr = ko.mapping.fromJS(arr); 
```

如果观察到调试，则变量 newarr 看起来像一个可观察数组。如果您尝试打开包装以公开底层数组：

```
newarr() 
```

你得到“发生了一个未指定的错误”。

为了让事情变得更奇怪，如果你更进一步：

```
newarr()[0] 
```

你很幸运拥有数组的第一个元素。敲除绑定按预期运行，我只是无法执行数组操作（长度、推送、弹出），这很关键。

我真的需要mapping.fromJS，因为我正在处理大型对象树，我对如何从这里开始感到困惑。映射与 POJO 对象的行为正常，但 jaydata 也是我的难题的关键部分。谁能帮我看看我做错了什么？

这是我正在讨论的问题。我无法让它工作，但它至少提供了完整的上下文。 [http://jsfiddle.net/jpirok/AAeuM/](http://jsfiddle.net/jpirok/AAEuM/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T15:01:22.910

这最终成为一个非问题。感谢您的帮助，很抱歉我花了一段时间才关闭它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:24:00.283

我为 JayData 工作。JayData 支持 knockoutjs，我们这里有很多示例：http: [//jaydata.org/examples/index.html](http://jaydata.org/examples/index.html)

你是否包含了 jaydatamodules/knockout.js？

# javascript - 需要从 tbar 菜单中删除水平边框

> ID：13824026
> 
> 赞同：1
> 
> 时间：2012-12-11T16:15:45.980
> 
> 标签：javascript, extjs, extjs4.1, tbar

我有一堆以新行显示的 tbar 项目。它工作正常。但我遇到的唯一问题是在每个 tbar 之间显示水平边框。我怎样才能删除它？

```
 items: [
                {
                    xtype: 'panel',
                    id: 'navi',
                    region: 'west',
                    collapsible: false,
                    title: 'Navigation',
                    bodyStyle: 'background-color: #BFCBD5',
                    width: 155,
                    animCollapse: true,
                    minHeight: 600,
                    items: [

                        {
                            border:0,

                            tbar: [

                                {
                                    xtype: 'button',
                                    text: 'Home',
                                    textAlign:'left',
                                    width: 140,
                                    align:'left',

                                    //bodyStyle: 'background-color:#BFCBD5;',
                                    handler: function() {
                                        document.location.href = BasePath; 
                                    }
                                }

                            ]
                        },

                        {
                            border:0,
                            tbar: [
                                {
                                    xtype: 'button',
                                    text: 'Dashboard',
                                    textAlign:'left',
                                    width: 140,                                     
                                    handler: function() {
                                        document.location.href="http://www.dtvdashboard.com";
                                    }
                                }                                   

                            ]
                        },  

                    {
                        xtype: 'text',
                        padding: '64 0 0 0',    
                        text: "Logged in as:",
                        textAlign:'left',
                        style : "color:#3E546B;font-style:italic;font-size: 11px;",
                        width: 140,
                        handler: function() {
                            document.location.href="";
                        }
                    },  

                    ]

                }
            ] 
```

编辑：我添加了 bodyBorder:false，这有点删除了边界线。但我仍然看到较浅的边框阴影

![在此处输入图像描述](../Images/30a6ad62d1738934391b664c95bc0c19.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:54:16.200

有很多可能性可以删除该边界。

*   您可以删除 tbar 并仅使用按钮（例如：http: [//jsfiddle.net/kKjuC/1/](http://jsfiddle.net/kKjuC/1/)）
*   您可以将链接呈现为纯 html 并将点击处理程序附加到每个链接或容器，或者只是简单地添加`href`到链接（例如：http: [//jsfiddle.net/YeyET/1/](http://jsfiddle.net/YeyET/1/)）
*   你可以使用数据视图

# sql - 无法在表中插入新列

> ID：13824027
> 
> 赞同：4
> 
> 时间：2012-12-11T16:15:46.087
> 
> 标签：sql, database, sql-server-2008

我有一个`Product`表，我想在其中创建一个新列`Modified_By`和 `Modified_Date_Time`. 这些列不允许空值。

但是，由于数据库已经有数据，为了创建这个列，我必须定义为“允许空值”。然后，我运行一个更新新列的进程。最后一步是取消选中“允许空值”属性，但是当我尝试保存表更改时，出现以下错误：

> “Product_Details”表 - 无法修改表。
> 无法将值 NULL 插入到列“Modified_Date_Time”、表“供应商 Products.dbo.Tmp_Product_Details”中；列不允许空值。插入失败。该语句已终止。

所有行都已成功更新为“Modified_By”和“Modified_Date_Time”列中的正确值，所以我不知道为什么会出现此错误...无论如何，SQL 创建了一个新的“临时”表Server 2008，因为我没有任何名为“Tmp_Orders”的表

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:18:24.487

```
ALTER TABLE {TABLENAME} 
    ADD {COLUMNNAME} {TYPE} {NOT NULL} 
    CONSTRAINT {CONSTRAINT_NAME} DEFAULT {DEFAULT_VALUE} 
```

您必须设置一个默认值。

```
ALTER TABLE Product ADD Modified_By datetime DEFAULT (GETDATE()) 
```

默认值将设置为今天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:23:00.893

我发现交互设计不是很擅长这种事情。最好手动添加约束

```
 ALTER TABLE Table_Name ALTER COLUMN Column_Name DataType NOT NULL 
```

例如

```
 ALTER TABLE MyTable ALTER COLUMN A_Column Int NOT NULL; 
```

# java - 键是否具有映射到内存位置的哈希表？

> ID：13824032
> 
> 赞同：0
> 
> 时间：2012-12-11T16:16:12.220
> 
> 标签：java, hash, dictionary

当您在哈希中插入项目时，密钥是否被编码到物理内存空间，因此查找时间非常快？即恒定的查找时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:18:32.920

`Entry`通过使用引用数组，它具有几乎恒定的查找时间（假设您有少量的冲突） 。

Java 不直接操作地址位置，因为这些位置可以随时由[GC](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:20:06.313

哈希表的想法是将项目存储在一个数组中，索引从键计算得非常快（在java中，键`Hashtable`的`hashcode()`方法被调用并用于获取索引（以表的长度为模） ）。

当表不是太满时，此索引处的此表中​​的元素（链接）很少。查找元素只是将它们的键与传递的键进行比较。

因此，对于几乎空的桌子来说，这是恒定的时间，但当桌子满了时，时间会更长一些，因为冲突意味着你需要进行更多的比较。

# asp.net-mvc-3 - 使用局部视图来表示表格行

> ID：13824040
> 
> 赞同：12
> 
> 时间：2012-12-11T16:16:51.553
> 
> 标签：asp.net-mvc-3, razor, partial-views

我正在尝试使用部分视图来表示项目中的表行。我目前有

```
 <table> 
    <thead>
        <tr>
            <th >
                Column 1
            </th>
            <th >
                 Column 2
            </th>
            <th >
                 Column 3
            </th>
        </tr>
    </thead>
    <tbody>
         @foreach(var item in Model.Items)
         {
         @Html.Action("ItemCalculatedView", new { Id = item.Id}) 
         }
     </tbody>
     </table> 
```

在我的部分观点中，我有这个

```
@using (Ajax.BeginForm("SaveStuff", "Whatever",
    new { id = @Model.Id }, new AjaxOptions()
    {
        HttpMethod = "Post",
        OnSuccess = "Success"
    }))
   {
   @Html.HiddenFor(m => m.Id)
    <tr>
       <td>
          @Html.Label("Col1", Model.Col1)
       </td>
       <td>
          @Html.TextBox("Number", Model.Number)
       </td>
       <td>
          <input type="submit" id='submit-@Model.Id'/>
       </td>
     </tr>           
     } 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T18:07:04.867

您可以将表单放在表格*单元格*内，但不能将表单放在*tbody*元素内，也不能跨越多列。所以有三种选择：

1.  使用 CSS 布局而不是表格，或使用[CSS 显示设置为 "table"](https://developer.mozilla.org/en-US/docs/CSS/display)的 div 。（[例如](http://jsfiddle.net/yZMxE/1/)）
2.  将整个表单（文本框和提交）放在一个`td`
3.  `td`在元素内放置另一个表格

我推荐#1——使用 CSS 布局来构建表格，因为很难设置`table`标签样式：

**主要的**

```
<div class="table"> 
    <div class="header-row">
        <div class="header-cell">Column 1</th>
        <div class="header-cell">Column 2</th>
        <div class="header-cell">Column 3</th>
    </div>

     @foreach(var item in Model.Items)
     {
         @Html.Action("ItemCalculatedView", new { Id = item.Id}) 
     }
</div> 
```

**部分的**

```
@using (Ajax.BeginForm(
  actionName: "SaveStuff", 
  controllerName: "Whatever",
  routeValues: new { id = @Model.Id }, 
  ajaxOptions: new AjaxOptions
  {
      HttpMethod = "Post",
      OnSuccess = "Success"
  },
  htmlAttributes: new { @class = "row" }
 ))
 {
   <div class="cell">
       @Html.HiddenFor(m => m.Id)
   </div>
   <div class="cell">
      @Html.Label("Col1", Model.Col1)
   </div>
   <div class="cell">
      @Html.TextBox("Number", Model.Number)
   </div>
   <div class="cell">
      <input type="submit" id='submit-@Model.Id'/>
   </div>
 } 
```

**CSS**

```
.table { display: table; }
.header-row, row { display: table-row; }
.header-cell, cell { display: table-cell; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T02:15:25.753

你在这里有几个问题。首先，正如 dbaseman 所提到的，您不能将表单放置在表格结构中并使其成为合法的 HTML。它可能有效，也可能无效，即使有效，您也不能保证它会继续有效。

相反，我会将您的表格包装在表格中，然后在帖子中根据其值和/或索引确定按下了哪个按钮。

我强烈建议不要将 css 表用于表格数据。它只是在语义上不正确。

另一种可能的解决方案是，不使用 Ajax.BeginForm，而是使用 jQuery $.ajax，然后您可以在 javascript 中选择一行数据发布到服务器。

# c++ - 在 C++ 中对对象进行排序

> ID：13824041
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:16:54.093
> 
> 标签：c++, class, sorting

当我尝试使用 C++ 中的比较方法对对象进行排序时，我遇到了一个非常奇怪的错误

```
required from 'void std::__final_insertion_sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Album*, std::vector<Album> >; _Compare = bool (*)(const Album*, const Album*)]' 
```

这似乎不是标准错误，但我看不出我的代码有什么问题。是比较方法的问题，还是排序本身的问题。任何帮助将不胜感激。

我附上了相关代码：

[专辑.cpp： http](http://pastebin.com/0tNrbdrT) ://pastebin.com/0tNrbdrT

[专辑.h： http](http://pastebin.com/iY2Yy7qM) ://pastebin.com/iY2Yy7qM

AlbumCollection.cpp：[http ://pastebin.com/gWj0nS8S](http://pastebin.com/gWj0nS8S)

AlbumCollection.h：[http ://pastebin.com/bFrxme5n](http://pastebin.com/bFrxme5n)

专辑收藏排序：

```
void AlbumCollection::sortAlbums(){
   std::sort(albums.begin(), albums.end(), compareAlbums);
} 
```

专辑比较方法：

```
bool Album::compareAlbums(const Album* a1,const Album* a2)
{
    if (a1->getArtist() == a2->getArtist()){
        return (a1->getTitle() < a2->getTitle());
    }else{
        return a1->getArtist() < a2->getArtist()
    }
} 
```

错误是： http: [//pastebin.com/PeXk0FUT](http://pastebin.com/PeXk0FUT)

我不确定有多少是相关的，我对 C++ 很陌生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:23:02.780

这里有两个错误。首先， compareAlbums 函数需要是一个自由函数，而不是 Album 类的成员函数。其次， compareAlbums 函数必须对 Album 对象进行 const 引用，因为这是您存储在向量中的内容。所以，这应该解决它：

```
bool compareAlbums(const Album& a1,const Album& a2)
{
    if (a1.getArtist() == a2.getArtist()){
        return (a1.getTitle() < a2.getTitle());
    } else {
        return a1.getArtist() < a2.getArtist()
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:22:00.780

您尝试`std::vector`使用将指针作为参数的函数对 a 进行排序。比较函数被赋予对其参数的引用，而不是指针。

直接的问题应该简单地通过比较函数和调整它来解决

```
bool compare(const Album*, const Album*) 
```

到

```
bool compare(Album const &, Album const &) 
```

# facebook - Facebook 没有在页面上请求 signed_request

> ID：13824043
> 
> 赞同：0
> 
> 时间：2012-12-11T16:16:56.927
> 
> 标签：facebook, facebook-graph-api, facebook-page

这是我在 facebook 页面上的应用程序。 [https://www.facebook.com/SlcChallenge/app_439780382750381](https://www.facebook.com/SlcChallenge/app_439780382750381) 这是我的问题。Facebook 为某些用户发送 signed_request 并且不从某些用户返回。因此，当 facebook 不发送签名请求时，我的页面会出错。我的页面标签网址是[https://tippll.com/pagetab.php/](https://tippll.com/pagetab.php/)

请帮助我找到解决方案。在此先感谢克里希纳·卡尔基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:36:45.553

如果在画布加载时您收到的是 a`code`而不是 a `signed_request`，这意味着 Facebook 无法验证用户身份（并检索`access_token`, 并且已经退回到发送代码让您交换`access_token`.

在您的 Facebook 应用程序中仔细检查您的画布 URL 设置。如果您通过对 SSL 域的 URL 重写非 SSL 请求（或者甚至只是一般的 url 重写），有时会发生这种情况。

# join - 加入图像和音频以生成视频

> ID：13824045
> 
> 赞同：10
> 
> 时间：2012-12-11T16:16:58.863
> 
> 标签：join, audio, video, ffmpeg, command

我有很多不同大小的图像（即 1024x768 和 900x942）和一个 30 秒的音频文件（audio.mp3），我需要从中创建一个视频。

我现在正在尝试：result%d.png (1 to 4) 和 audio.mp3

```
ffmpeg -y -i result%d.png -i audio.mp3 -r 30 -b 2500k -vframes 900
-acodec libvo_aacenc -ab 160k video.mp4 
```

视频**video.mp4**有 30 秒，但当最后一张图像保留到音频结束时，前 3 张图像显示得非常快。

每个图像都需要在相同的时间内显示，直到音频结束。有谁知道该怎么做？

图像的数量有时会有所不同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-12-06T12:26:18.937

FFMPEG 版本：3.2.1-1

Ubuntu 16.04.1

想象一下，您有一个名为 wow.mp3 的 mp3 音频文件，在这种情况下，以下命令将获取 mp3 的持续时间（以秒为单位）。

```
ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 wow.mp3 
```

一旦你有了以秒为单位的持续时间（想象一下我得到了 11.36 秒）。现在因为我有 3 张图片，我想为 (11.36/3 = 3.79) 运行每个图片，然后请使用以下内容：

```
ffmpeg -y -framerate 1/3.79 -start_number 1 -i ./swissGenevaLake_%d.jpg -i ./akib.mp3 -c:v libx264 -r 25 -pix_fmt yuv420p -c:a aac -strict experimental -shortest output.mp4 
```

这里的图像是 ./swissGenevaLake_1.jpg、./swissGenevaLake_2.jpg 和 ./swissGenevaLake_3.jpg。

-framerate 1/3.784 表示，每张图像运行 3.784 秒。

-start_number 1 表示，从第一张图片开始，意思是 ./swissGenevaLake_1.jpg

-c:v libx264：视频编解码器 H.264

-r 25：输出视频帧率25

-pix_fmt yuv420p：输出视频像素格式。

-c:a aac：使用 aac 对音频进行编码

-最短：音频完成后立即结束视频。

output.mp4：输出文件名

免责声明：我没有测试合并多种尺寸的图像。

参考：

[https://trac.ffmpeg.org/wiki/Create%20a%20video%20slideshow%20from%20images](https://trac.ffmpeg.org/wiki/Create%20a%20video%20slideshow%20from%20images)

[https://trac.ffmpeg.org/wiki/Encode/AAC](https://trac.ffmpeg.org/wiki/Encode/AAC)

[http://trac.ffmpeg.org/wiki/FFprobeTips](http://trac.ffmpeg.org/wiki/FFprobeTips)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T05:31:09.863

用于创建视频= n 个图像 + 音频

**步骤1）**

您将创建这些图像的视频，如

```
Process proc = Runtime.getRuntime().exec(ffmpeg + " -y -r "+duration +" -i " + imagePath + " -c:v libx264 -r 15 -pix_fmt yuv420p -vf fps=90 " + imageVideoPath);  
            InputStream stderr = proc.getErrorStream();  
            InputStreamReader isr = new InputStreamReader(stderr);  
            BufferedReader br = new BufferedReader(isr);
            String line = null;  
            while ((line = br.readLine()) != null)  
            {       
                //System.out.println(line);  
            }  
            int exitVal = proc.waitFor();  
            proc.destroy(); 
```

其中持续时间=图像数量/音频持续时间，即在 1 秒内你想要多少图像

**第2步）**

```
 Process proc4VideoAudio = Runtime.getRuntime().exec(ffmpeg +" -i " + imageVideoPath + " -i "+ audioPath + " -map 0:0 -map 1:0 " + videoPath);  
                InputStream stderr1 = proc4VideoAudio.getErrorStream();  
                InputStreamReader isr1 = new InputStreamReader(stderr1);  
                BufferedReader br1 = new BufferedReader(isr1);  
                String line1 = null;  
                while ((line1 = br1.readLine()) != null)  
                {     
                    //System.out.println(line1);
                }  
                int exitVal1 = proc4VideoAudio.waitFor();    
                proc4VideoAudio.destroy(); 
```

步骤 1 和步骤 2 现在可以依次运行。如果你想手动做，那么只有`run Runtime.getTime.exec(..)`

它下面的代码是为了让它同步。

** 另请注意 FFMPEG 的声明，即从图像和音频一步创建视频，给您带来与您提到的相同的问题，如果不是，解决方案将是静态的，用于固定给定音频文件的图像数量。

这些 imagePath、VideoPath、audioPath 都是 Strings

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T09:29:58.787

这应该会有所帮助： http: [//ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images)

使用`-r`，您可以设置希望每张图像出现的秒数。

# jsoup - Does Jsoup use the base tag of an html document to automatically resolve relative path

> ID：13824048
> 
> 赞同：1
> 
> 时间：2012-12-11T16:17:02.527
> 
> 标签：jsoup

From my understanding, the jsoup parser allows to work with relative links, as long as a base URI is specified when instanciating the parser.

Let's assume now that the document defines a base tag with an URI which is different from the URI of the page. This URI cannot be known a priori.

What is the behaviour of the parser? Does it detect automatically the tag and apply it to the whole document? Or do we have to parse the document a first time to detect the base tag, and then re-parse it with the detected value as base uri?

Thanks in advance Koj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:48:03.490

Jsoup will detect the `<base>` tag and apply it throughout the document. When resolving relative links, a base-tag URI takes precedence over the URI supplied to the parser. You don't need to parse the document twice. As an example:

```
Document doc = Jsoup.parse(
    "<a href='/one/'>One</a>" +
    "<base href='http://example.com/' />" +
    "<a href='/two/'>Two</a>");
Elements els = doc.select("a");
for (Element e: els) {
    System.out.println(e.attr("abs:href"));
} 
```

gives:

```
http://example.com/one/
http://example.com/two/ 
```

# j - 在 J 中打开具有自定义填充值的框

> ID：13824049
> 
> 赞同：2
> 
> 时间：2012-12-11T16:17:09.847
> 
> 标签：j

拆箱或打开不同大小的盒子会导致数字填充 0 和文字填充空格：

```
v=.1 4 8 ; 2 6 4 ; 6 8 4 5; 7 8 9; 6 3 7 4 9

>v
1 4 8 0 0
2 6 4 0 0
6 8 4 5 0
7 8 9 0 0
6 3 7 4 9 
```

fit ( `!.`) 连词通常用于这些事情，但是

```
>!. _1 v 
```

不受支持并引发域错误。

我有这个，但是对于非常大的数组，它不是很快：

```
(>./ # every y) {.!. _1 every y 
```

有没有一种有效的方法来定义打开盒子的填充值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:35:36.667

我的猜测是，直接进行填充将是提高效率的途径，特别是如果需要仅限于特定的数据结构（如您的示例所建议的那样）。此解决方案尚未经过性能分析，但它显示了一个自己做填充的方法。

在这里，我假设该任务始终涉及从盒装列表到表格，并且数据始终是数字的。额外`assert.`的陈述可能值得添加，以证明正确的论点符合预期。

```
 v=.1 4 8 ; 2 6 4 ; 6 8 4 5; 7 8 9; 6 3 7 4 9   NB. example data

paddedOpen=: dyad define
 assert. 0 = # $ x
 Lengths=. #&> y
 PadTo=. >./ Lengths
 Padding=. x #~&.> PadTo - Lengths
 y ,&> Padding
)

   _1 paddedOpen v
1 4 8 _1 _1
2 6 4 _1 _1
6 8 4  5 _1
7 8 9 _1 _1
6 3 7  4  9 
```

只有当默认值不能作为中介时，才需要先填充自定义值。如果默认值可以传递使用，那么让默认填充发生然后用首选值替换所有默认值会更快。从您的问题的性质来看，我假设默认值在主域中具有意义，因此简单的替换将不起作用。

请留下评论，告知我们不同技术的相对性能，或者至少一种技术是否足以满足您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:49:26.323

环境

```
f =: 3 :'(>./ # every y) {.!. _1 every y'
g =: _1&paddedOpen 
```

和（与您的精神相同`f`）：

```
h =: 3 : '((>./# &> y)&($!._1))@> y' 
```

我得到以下时间和空间的表现：

```
(100&(6!:2) ,: 7!:2) &.> 'f L';'g L';'h L'
┌─────────┬─────────┬─────────┐
│ 0.045602│0.0832403│0.0388146│
│4.72538e6│1.76356e7│4.72538e6│
└─────────┴─────────┴─────────┘ 
```

其中 L 是一个大数组：

```
L =. (<@(+i.)/)"1 ? 50000 2 $ 10 
```

`f`您可以通过使其简洁来稍微改进；例如：

```
f =: ] {.!._1&>~ >./@:(#&>) 
```

我认为没有太大的改进空间。

# cordova - Phonegap - 在网站上使用它

> ID：13824051
> 
> 赞同：0
> 
> 时间：2012-12-11T16:17:14.190
> 
> 标签：cordova

我正在开发一个主要用于自学目的的小型应用程序，我决定用 HTML / JS 编写应用程序并使用 phonegap 将其转换为“本机”应用程序。

这一切都很好，我已经成功地在我的手机上安装了一个 HelloWorld 应用程序。

除了作为本机应用程序之外，我还希望使用浏览器在 Internet 上提供我的项目。这样我的用户就可以在他们的浏览器中访问该网址或下载并安装该应用程序。

因此我的问题：

是否可以在标准网站上在线使用 Phonegap 及其 API？这意味着我可以使用 phonegaps 功能来访问例如地理位置。

否则我将不得不更改我的 javascript 代码，而不是在网站上使用 phonegap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:17:08.950

对不起，我不相信这会奏效。相反，您可以尝试将您对 phonegap 的所有呼叫包装起来，并检查您是在手机上还是在浏览器中，并据此进行切换。这将迫使您将代码与 phonegap 分离并创建良好的边界。

我使用了这个，它并不完美（特别是如果用户在他们的移动浏览器中访问您的网站），但这是一个开始：

```
 //jquery - for working in browser
  $(document).ready(function() {
    if (!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
      console.log("we are in a browser");
    }
  });

  //phonegap - for working in app
  function onDeviceReady() {
    console.log("we are an app");
  }

  function onBodyLoad() {   
    document.addEventListener("deviceready", onDeviceReady, false);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:13:55.643

PhoneGap/Cordova API 与设备上可用的功能相关联，因此无法通过“普通”网站获得。

但是，在您使用的示例中，Geolocation**不是**PhoneGap/Cordova 特定的，它是 W3C 规范，可在大多数现代浏览器上使用，因此您可以使用该规范。

# c# - Treenode 文本不同颜色的单词

> ID：13824052
> 
> 赞同：2
> 
> 时间：2012-12-11T16:17:14.603
> 
> 标签：c#, winforms, colors, treeview, treenode

我有一个`TreeView`，每个`Node.Text`都有两个词。第一个词和第二个词应该有不同的颜色。我已经用`DrawMode`属性和`DrawNode`事件改变了文本的颜色，但我不知道如何将它们分成`Node.Text`两种不同的颜色。有人指出我可以使用`TextRenderer.MeasureText`，但我不知道如何/在哪里使用它。

有人有想法吗？

* * *

**代码 ：**

```
formload()
{
  treeView1.DrawMode = TreeViewDrawMode.OwnerDrawText;
}

private void treeView1_DrawNode(object sender, DrawTreeNodeEventArgs e) 
{
Color nodeColor = Color.Red;
if ((e.State & TreeNodeStates.Selected) != 0)
  nodeColor = SystemColors.HighlightText;

 TextRenderer.DrawText(e.Graphics,
                    e.Node.Text,
                    e.Node.NodeFont,
                    e.Bounds,
                    nodeColor,
                    Color.Empty,
                    TextFormatFlags.VerticalCenter);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:35:50.040

试试这个：

```
 private void treeView1_DrawNode(object sender, DrawTreeNodeEventArgs e)
    {
        string[] texts = e.Node.Text.Split();
        using (Font font = new Font(this.Font, FontStyle.Regular))
        {
            using (Brush brush = new SolidBrush(Color.Red))
            {
                e.Graphics.DrawString(texts[0], font, brush, e.Bounds.Left, e.Bounds.Top);
            }

            using (Brush brush = new SolidBrush(Color.Blue))
            {
                SizeF s = e.Graphics.MeasureString(texts[0], font);
                e.Graphics.DrawString(texts[1], font, brush, e.Bounds.Left + (int)s.Width, e.Bounds.Top);
            }
        }
    } 
```

您必须管理`State`节点以执行适当的操作。

**更新**

抱歉，我的错误请参见更新版本。没有必要测量空间大小，因为它已经包含在`texts[0]`.

# jquery - 列表样式未应用于 Ajax Jquery 列表

> ID：13824054
> 
> 赞同：0
> 
> 时间：2012-12-11T16:17:22.887
> 
> 标签：jquery, css, ajax

我一直在尝试动态创建从 XML 到 JQuery 移动页面的无序列表。我可以让项目显示在页面上，但样式永远不会按应有的方式出现......使用普通的蓝色链接纯文本，仅此而已。还有另一种样式列表的方法吗？

```
<ul id="events-holder" data-role="listview" data-inset="true" data-theme="c"> 
```

```
$(document).ready(function(){
    $.ajax({
        type: "GET",
        url: "event_list.php",
        dataType: "xml",
        success: function(xml) {
            $(xml).find('event').each(function() {
                var title = $(this).find('title').text();
                var date = $(this).find('date').text();
                var url = $(this).find('url').text();

                $('<li></li>')
                    .html('<li><a href="'+url+ '" rel="external" data-transition="slide">'+ title +'</a></li>')
                    .appendTo('#events-holder')
                    .trigger('create'); 
            });
        }
    });
}); 
```

![样式有问题。。](../Images/ed7493c66097582d51127e7eecac86ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T08:02:26.823

您应该致电：

```
jQuery("#events-holder").listview('refresh'); 
```

你已经准备好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:25:55.193

这取决于你的 css，但我怀疑问题是你动态创建`<li>`的 s 加倍了。您正在创建一个`<li>`with `$('<li></li>')`，然后在调用中在其中添加**另一个。** `<li>``.html()`

尝试从字符串中删除`<li>`标签`.html()`

# android - 自定义适配器中的空光标？

> ID：13824055
> 
> 赞同：0
> 
> 时间：2012-12-11T16:17:25.273
> 
> 标签：android, android-spinner, android-adapter, android-cursorloader

我遇到了一个问题，我似乎无法追查其原因。这可能只是因为我对装载机不熟悉......

我有一个自定义适配器，用于在“关闭”位置（单行显示）设置微调器的提示，直到做出第一个选择。我以前用过这个并取得了很大的成功，但这次它不起作用。唯一的区别是现在我使用的是装载机。

当适配器尝试在我的重写`getView`方法中访问游标时，游标为空，当然我会因空指针异常而强制关闭。我不明白光标如何在那里为空，因为显然该`getDropDownView`方法（我没有覆盖）在填充下拉列表时可以访问光标......

我所能想到的是，由于某种原因，该`getView`方法保留了作为占位符传入的原始空值，而加载器正在工作。我认为当我使用`changeCursor`该引用时也会发生变化，但似乎并非如此。

**主要活动适配器调用**

```
adapter = new CursorAdapter_SpinnerPrompt(this,
    R.layout.rowlayout_black, null, new String[] { ThreadMillDB.THREADMILL_THREAD }, new int[] { R.id.ListItem });
mThreadChooser.setAdapter(adapter); 
```

**相关加载程序代码**

```
@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    adapter.changeCursor(cursor);
} 
```

**适配器代码**

```
public class CursorAdapter_SpinnerPrompt extends SimpleCursorAdapter {
    private Context context;
    private int layout;
    private Cursor c;
    private String[] from;
    private int[] to;
    public static boolean spinnerFlag = false;

    public CursorAdapter_SpinnerPrompt(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
        this.context = context;
        this.layout = layout;
        this.c = c;
        this.from = from;
        this.to = to;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null)
            convertView = View.inflate(context, layout, null);
        if (spinnerFlag != false) {
            c.moveToPosition(position);          // cursor is null here... why?  How to fix?
            TextView tv = (TextView) convertView;
            tv.setText(c.getString(c.getColumnIndex(ThreadMillDB.THREADMILL_THREAD)));
        } else {
            TextView tv = (TextView) convertView;
            tv.setText("Choose a thread");
            tv.setTextColor(Color.parseColor("#778899"));
        }
        return convertView;
    }
} 
```

**更新**

当然，在打字时，我想出了*一个*解决方案。我将适配器的创建从我的活动中移出`onCreate`并将`onLoadFinished`光标放入调用中。但是，这似乎比我尝试这样做的方式更混乱。我可以对我的原始方法（如上所示）进行任何修改以使其工作而无需将适配器实例化移动到该`onLoadFinished`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:25:51.193

你的怀疑是正确的。

您在构造函数中记住的游标引用与您传递的不同`chageCursor(Cursor c)`。在 CursorAdapter 上获取光标的正确方法是调用`getCursor()`而不是获取对传递的光标的引用`changeCursor(Cursor c)`。

# python - str 没有附加属性错误

> ID：13824056
> 
> 赞同：0
> 
> 时间：2012-12-11T16:17:30.010
> 
> 标签：python, loops, error-handling

我有一个类似的文件：

```
1 a  
1 a  
1 b  
3 s  
3 p  
3 s  
3 y  
5 b  
... 
```

我将其放入字典中，其中键是第 0 列，值是第 1 列。我正在使用循环，所以当我**再次看到键时，***如果*新值不在现有键中，我会附加新值，因此我的字典看起来像：

test_dict = {'1': [1,b], '3': [s,p,y]...}

我的代码如下所示：

```
test_dict = {}  
with open('file.txt') as f:  
        for line in f:  
                column = line.split()  
                if column[0] not in test_dict:  
                        test_dict[column[0]] = column[3]  
                elif column[3] not in test_dict[column[0]]:  
                        test_dict[column[0]].append(column[3])  
                else:  
                        break 
```

我`str has no attribute append error`在附加行上得到了一个。我知道这些列被视为一个字符串，我该如何在我的代码中更正它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:19:03.710

您不能附加到字符串。你要么想做，要么做列表`+=`的元素`test_dict`。您也可以将 dict 值设置`set`为 s 并摆脱重复检查，尽管您的列表将不再按首次出现顺序排序。

```
from collections import defaultdict

test_dict = defaultdict(set)
with open('file.txt') as f:
    for line in f:
        columns = line.split()
        test_dict[columns[0]].add(columns[3]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:19:02.263

`column[3]`是一个字符串，`test_dict[column[0]]`将是一个字符串。你的意思是把它列成一个清单吗？

```
test_dict[column[0]] = [column[3]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:24:07.637

您还可以使用[groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)获得类似的结果，然后使用[set](http://docs.python.org/2/tutorial/datastructures.html#sets)删除重复项

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> {k: list(set(e for _,e in v))
        for k,v in groupby((e.split() for e in foo),
               key = itemgetter(0))}
{'1': ['a', 'b'], '3': ['y', 'p', 's'], '5': ['b']} 
```

# php - 我的第一个日历在一个月内循环了 30 多次

> ID：13824061
> 
> 赞同：0
> 
> 时间：2012-12-11T16:17:39.773
> 
> 标签：php, loops, for-loop, foreach, calendar

我正在尝试为我的画廊创建一个自己的日历，但我无法让它像我想要的那样工作。我添加了一个 SQL 查询，以便我可以获取我的照片拍摄时间并确定要链接的日期。为每张照片链接正确的日期在这里没有任何问题。这就是它如何循环每个月的日子。

这是我现在正在使用的代码：

```
echo '<table width="100%" cellpadding="0" cellspacing="0">';

$months = Array(1 => 'Januari',
                2 => 'Februari',
                3 => 'Mars',
                4 => 'April',
                5 => 'Maj',
                6 => 'Juni',
                7 => 'Juli',
                8 => 'Augusti',
                9 => 'September',
                10 => 'Oktober',
                11 => 'November',
                12 => 'December');

foreach($months AS $month_n => $month) {

    # DATABAS: photos (hämta)
    $get_photosdate = "SELECT photo_exif_taken FROM photos";

    echo '<tr>';
        echo '<td align="right" class="calendar-month" width="50">';
            echo '<a href="'.url('sortby/date/2012/'.($month_n < 10 ? '0'.$month_n : $month_n)).'" title="Sortera fotografierna efter den här månaden">';
                echo '<b>'.$month.'</b>';
            echo '</a>';
        echo '</td>';

        echo '<td align="left" class="calendar-day">';
            foreach($sql->query($get_photosdate) AS $date) {
                for($i = 1; $i < 32; $i++) {
                    if(date('Y-m-d', strtotime($date['photo_exif_taken'])) == '2012-'.$month_n.'-'.$i) {
                        echo '<a href="'.url('sortby/date/2012/'.($month_n < 10 ? '0'.$month_n : $month_n).'/'.($i < 10 ? '0'.$i : $i)).'" class="calendar-link" title="Sortera fotografierna efter den här dagen">';
                            echo $i < 10 ? '<span style="color: #a16e74;">0</span>'.$i : $i;
                        echo '</a>';
                    } else {
                        echo '<span style="padding: 2px 3px;">';
                            echo $i < 10 ? '<span style="color: #a2a1a1;">0</span>'.$i : $i;
                        echo '</span>';
                    }

                    if($i == 11 OR $i == 22) {
                        echo '<br>';
                    }
                }
            }
        echo '</td>';
    echo '</tr>';

}

echo '</table>'; 
```

它应该像这样打印日期：`01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16`等等。但它会打印`01 02 03 04 05 06 ... 25 26 27 28 29 30 31 01 02 03 04 05 06`50 次左右，直到它改变月份。

怎么了？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:24:32.030

最外层的 foreach 循环遍历月份，第二个循环遍历查询结果，最内层的 for 循环从 1 到 31。

因此，如果您的查询给出例如 5 个结果，则循环

12（月）* 5（结果计数）* 31 次。

您可能应该通过逐步思考您想要的东西来调整您处理日期的方式。例如：如果您想在日历上显示图像，您可以将日历构建为多维数组，然后将图像放在正确的索引上。

编辑：如果你想做一个真正的日历，你还应该考虑使用 php 内置功能，这样你就可以得到一个月中正确的天数。mktime ( [http://php.net/manual/de/function.mktime.php](http://php.net/manual/de/function.mktime.php) ) 或 php DateTime ( [http://php.net/manual/de/class.datetime.php](http://php.net/manual/de/class.datetime.php) ) 对象可能对你有帮助.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:24:02.713

您正在为照片数组的每个元素重复日期列表。我希望您的数据库中有 50 张左右的照片，它们会导致额外的循环。

重新设计查询循环，使其不会根据照片数量工作。

# java - 在更改 JTabbedPane 的选项卡时关闭在另一个 JInternalFrame 中打开的 Opened JInternalFrame

> ID：13824065
> 
> 赞同：2
> 
> 时间：2012-12-11T16:17:57.990
> 
> 标签：java, swing, jtabbedpane, jinternalframe

我创建了一个应用程序，其中有两个名为**Tabbedpane 1**和**Tabbedpane 2**的选项卡。在一个选项卡正文中， **Tabbedpane 1**包含一个`JInternalFrame`其中有一个搜索按钮的选项卡。单击按钮时，另一个`JInternalFrame`在 main 中打开`JInternalFrame`。

谁能告诉我如何在单击标题为**Tabbedpane 2**`JInternalFrame`的第二个选项卡时关闭上述打开的搜索`JInternalFrame`

 **我已经尝试过`.setClosed(true)`，并且`.setVisible(true)`在更改属性时仍然对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:45:40.957

使用状态更改[`ChangeListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/ChangeListener.html)时会收到通知`JTabbedPane`（即标签切换）：

```
final JTabbedPane tabbedPane = new JTabbedPane();

tabbedPane.addChangeListener(new ChangeListener() {
    public void stateChanged(ChangeEvent e) {
       //tab has been changed
    }
}); 
```

问题是我们需要一种方法来监控前一个选项卡，即我们在更改之前所在的选项卡，这可以通过以下方式完成：

```
tabbedPane.addChangeListener(new ChangeListener() {
    int prev_index = 0;
    int curr_index = 0;

    public void stateChanged(ChangeEvent e) {
        prev_index = curr_index;
        curr_index = tabbedPane.getSelectedIndex();

        System.out.println("Tab (Current): " + curr_index);
        System.out.println("Tab (Previous): " + prev_index);
    }
}); 
```

**更新 1：**

要关闭`JInternalFrame`，我建议调用`dispose()`它的实例

**更新 2：**

这是您的固定代码，基本上为`Search`类添加了一个 getter，因此`JIFrame1`有一个`getSearch()`方法允许我们访问在 中创建的搜索类当前实例`JIFrame1`，在`changedState(..)`我调用中`jiFrame1.getSearch().dispose()`，这将确保我们处理已经创建的实例：

```
import java.awt.Container;
import java.awt.event.MouseListener;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Sample extends javax.swing.JFrame {

    JIFrame1 jiframe1 = new JIFrame1();

    public Sample() {
        initComponents();

        Container jiframe1cont = tab1;
        for (MouseListener listener : ((javax.swing.plaf.basic.BasicInternalFrameUI) jiframe1.getUI()).getNorthPane().getMouseListeners()) {
            ((javax.swing.plaf.basic.BasicInternalFrameUI) jiframe1.getUI()).getNorthPane().removeMouseListener(listener);
        }
        jiframe1.setLocation(10, 10);
        jiframe1cont.add(jiframe1);
        jiframe1.setVisible(true);

        JIFrame2 jiframe2 = new JIFrame2();
        Container jiframe2cont = tab2;
        for (MouseListener listener : ((javax.swing.plaf.basic.BasicInternalFrameUI) jiframe2.getUI()).getNorthPane().getMouseListeners()) {
            ((javax.swing.plaf.basic.BasicInternalFrameUI) jiframe2.getUI()).getNorthPane().removeMouseListener(listener);
        }
        jiframe2.setLocation(10, 10);
        jiframe2cont.add(jiframe2);
        jiframe2.setVisible(true);
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        tab1 = new javax.swing.JDesktopPane();
        tab2 = new javax.swing.JDesktopPane();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        tabbedPane.setTabPlacement(javax.swing.JTabbedPane.LEFT);
        tabbedPane.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                tabbedPaneStateChanged(evt);
            }
        });

        tab1.setBackground(new java.awt.Color(240, 240, 240));
        tabbedPane.addTab("Tabbedpane 1", tab1);

        tab2.setBackground(javax.swing.UIManager.getDefaults().getColor("Button.background"));
        tabbedPane.addTab("Tabbedpane 2", tab2);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(tabbedPane, javax.swing.GroupLayout.DEFAULT_SIZE, 731, Short.MAX_VALUE));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(tabbedPane, javax.swing.GroupLayout.DEFAULT_SIZE, 503, Short.MAX_VALUE));

        pack();
    }// </editor-fold>

    private void tabbedPaneStateChanged(javax.swing.event.ChangeEvent evt) {
        try {
            jiframe1.getSearch().dispose();
        } catch (Exception ex) {
            Logger.getLogger(Sample.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Sample().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JDesktopPane tab1;
    private javax.swing.JDesktopPane tab2;
    private final javax.swing.JTabbedPane tabbedPane = new javax.swing.JTabbedPane();
    // End of variables declaration
}

class Search extends javax.swing.JInternalFrame {

    public Search() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jTextField1 = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jButton1 = new javax.swing.JButton();

        jTextField1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.LOWERED));

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
                new Object[][]{
                    {null, null, null, null},
                    {null, null, null, null},
                    {null, null, null, null},
                    {null, null, null, null}
                },
                new String[]{
                    "Title 1", "Title 2", "Title 3", "Title 4"
                }));
        jScrollPane1.setViewportView(jTable1);

        jButton1.setText("CLOSE");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 385, Short.MAX_VALUE)
                .addContainerGap())
                .addGroup(layout.createSequentialGroup()
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 190, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(205, Short.MAX_VALUE))))
                .addGroup(layout.createSequentialGroup()
                .addGap(158, 158, 158)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(172, Short.MAX_VALUE)));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addGap(22, 22, 22)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 141, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jButton1)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        this.dispose();
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration
}

class JIFrame1 extends javax.swing.JInternalFrame {

    public JIFrame1() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        pane = new javax.swing.JDesktopPane();
        jButton1 = new javax.swing.JButton();

        pane.setBackground(new java.awt.Color(240, 240, 240));

        jButton1.setText("SEARCH");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jButton1.setBounds(170, 60, 90, 23);
        pane.add(jButton1, javax.swing.JLayeredPane.DEFAULT_LAYER);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(pane, javax.swing.GroupLayout.DEFAULT_SIZE, 567, Short.MAX_VALUE));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(pane, javax.swing.GroupLayout.DEFAULT_SIZE, 322, Short.MAX_VALUE));

        pack();
    }// </editor-fold>
    private Search search;

    public Search getSearch() {
        return search;
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        search = new Search();
        Container searchcont = pane;
        for (MouseListener listener : ((javax.swing.plaf.basic.BasicInternalFrameUI) search.getUI()).getNorthPane().getMouseListeners()) {
            ((javax.swing.plaf.basic.BasicInternalFrameUI) search.getUI()).getNorthPane().removeMouseListener(listener);
        }
        search.setLocation(10, 10);
        searchcont.add(search);
        search.setVisible(true);
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JDesktopPane pane;
    // End of variables declaration
}

class JIFrame2 extends javax.swing.JInternalFrame {

    public JIFrame2() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();

        jLabel1.setText("JIFrame2..............");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addGap(100, 100, 100)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(137, Short.MAX_VALUE)));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addGap(86, 86, 86)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 47, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(145, Short.MAX_VALUE)));

        pack();
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    // End of variables declaration
} 
```

**更新 3：**

NPE的原因在这里：

```
private void tabbedPaneStateChanged(javax.swing.event.ChangeEvent evt) {
        try {
            jiframe1.getSearch().dispose();
        } catch (Exception ex) {
            Logger.getLogger(Sample.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

改为：

```
private void tabbedPaneStateChanged(javax.swing.event.ChangeEvent evt) {
    try {
        Search s=jiframe1.getSearch();
        if(s!=null)
        s.dispose();
    } catch (Exception ex) {
        Logger.getLogger(Sample.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```**

# wcf - server 2008 证书私钥权限

> ID：13824067
> 
> 赞同：0
> 
> 时间：2012-12-11T16:18:04.320
> 
> 标签：wcf, iis-7, windows-server-2008, x509certificate, mmc

我遇到了一个奇怪的问题，我用谷歌搜索并搜索了没有结果。我正在尝试为 windows server 2008 R2 上的 wcf 服务应用程序设置证书。我已将证书导入 localmachine 个人商店，我感到很害怕

```
"Keyset does not exist...the certificate ... must have a private key that is capable of key exchange. The process must have access rights for the private keys." 
```

我尝试使用 mmc 中的“管理私钥”选项设置私钥的权限，还尝试手动设置位于 C:\programdata\microsoft\crypto\rsa\machinekeys 中的私钥文件的权限. 我验证我正在使用 findprivatekeys 工具修改正确的文件，并且还尝试使用 WSE X.509 证书工具。为了理智起见，我什至授予文件上“每个人”的读取权限，但仍然无法正常工作。

我在这里缺少什么吗？我正在使用 IIS7，我通常会授予对 IIS_IUSRS 组文件的访问权限。所有这些在 VM 上的其他测试中都运行良好。我什至在其他机器上使用了完全相同的证书，它们在那里工作......

我迷路了......我注意到的一件事是，如果我在“管理私钥”对话框中编辑权限，当我查看文件的权限时，安全设置更改不会反映，反之亦然反之亦然。文件还能在哪里？无论如何，我没有运气就从这两个地方授予了最大权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:11:23.260

不知道这里发生了什么，但在测试过程中，MachineKeys 文件夹的权限被彻底修改 - 所以我删除了除管理员组之外列出的所有用户的权限，删除了问题证书（通过 mmc）并重新-再次导入它。然后，我只为那个私钥添加了 IIS_IUSRS 读取和执行权限，我似乎已经备份了。

在相关说明中，我正在使用 aspnet_regiis -pi 为其他内容导入密钥对，该密钥对因“安全句柄已关闭”而失败。修复 MachineKeys 文件夹的权限也修复了这个问题......

# java - 每当我们按下注销以及会话被破坏时，如何从浏览器中删除 Cookie？

> ID：13824070
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:18:20.010
> 
> 标签：java, javascript, spring, jquery-mobile, spring-security

我使用 Jquery Mobile、Spring MVC 和 Spring Security 开发了一个移动应用程序。

每当我登录应用程序时，都会生成 Cookie 并将其存储在浏览器中。

每当我注销应用程序时，会话就会被破坏，但 Cookie 存在于浏览器中。

我的问题是，如果浏览器中有 Cookie，则应用程序未在运行 IOS 6.0.1 的 iPad 上运行。

当我按下注销以及销毁会话时，如何从浏览器中删除 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:26:58.167

您可能希望`delete-cookies`在注销处理程序中使用该属性进行[会话管理。](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-session-mgmt)我从文档中引用：

```
<http>
    <!-- ... -->
    <logout delete-cookies="JSESSIONID" />
</http> 
```

您可以使用昏迷指定多个厨师。但是文档中也有警告：

> 不幸的是，这不能保证适用于每个 servlet 容器，因此您需要在您的环境中对其进行测试

另外，考虑代理：

> 如果您在代理后面运行应用程序，您还可以通过配置代理服务器来删除会话 cookie。例如，使用 Apache HTTPD 的 mod_headers，以下指令将通过在对注销请求的响应中使 JSESSIONID cookie 过期来删除它（假设应用程序部署在路径 /tutorial 下）：

```
 <LocationMatch "/tutorial/j_spring_security_logout">
  Header always set Set-Cookie "JSESSIONID=;Path=/tutorial;Expires=Thu, 01 Jan 1970 00:00:00 GMT"
 </LocationMatch> 
```

# iphone - UIButton IBAction 方法只在屏幕上绘制一次？

> ID：13824072
> 
> 赞同：1
> 
> 时间：2012-12-11T16:18:31.903
> 
> 标签：iphone, objective-c, cocoa-touch, uibutton

我对我只是为了好玩而尝试的事情有点困惑。我编写了一个小方法`animateBars_V1`，它使用 UIImageViews 数组并更改每个 UIImageView 的高度以显示一组不断变化的彩色条。

![在此处输入图像描述](../Images/5a6c3c1b94778fe3a03784c1f2d8f0c8.png)

```
- (void)animateBars_V1 {
    srandom(time(NULL));
    for(UIImageView *eachImageView in [self barArray]) {
        NSUInteger randomAmount = kBarHeightDefault + (random() % 100);

        CGRect newRect;
        CGRect barRect = [eachImageView frame];

        newRect.size.height = randomAmount;
        newRect.size.width = barRect.size.width;
        newRect.origin.x = barRect.origin.x;
        newRect.origin.y = barRect.origin.y - (randomAmount - barRect.size.height);
        [eachImageView setFrame:newRect];
    }
} 
```

这很好用，然后我添加了一个带有 UIAction 的 UIButton 用于按下按钮时。每次按下按钮时，`animateBars_V1`都会调用该按钮并更新彩条。

```
- (IBAction)buttonPressed {
    for(int counter = 0; counter<5; counter++) {
        [self animateBars_V1];
        NSLog(@"COUNTER: %d", counter);
    }
} 
```

我的问题只是为了好玩，我决定每次按下按钮我都会调用`animateBars_V1`5 次。发生的情况是，直到循环退出之后，条形才会改变。这导致：

```
Screen as per storyboard
COUNTER: 0
COUNTER: 1
COUNTER: 2
COUNTER: 3
COUNTER: 4
Screen Updates 
```

这是正确的行为吗？我不需要修复或解决方法，因为这只是为了好玩，我更好奇发生了什么以供将来参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:22:52.563

如果您`animateBars_V1`在循环中多次调用，则条形的帧会被设置多次，但在它们可以被渲染之前，`animateBars_V1`再次被调用，并且帧被设置为新的位置/大小。

`drawRect:`直到循环完成后才会调用渲染（和相关方法） - 因为它是一个 IBAction，所以必须在主线程中调用它，这意味着所有渲染都被阻塞，直到代码完成。

当然，有几种解决方案。做多动画的一个简单方法是`UIView animateWithDuration:animations:completion:`按以下方式使用：

```
- (IBAction)buttonPressed {
    [self animateBarsWithCount:5];
}

- (void)animateBarsWithCount:(int)count
{
    [UIView animateWithDuration:.25f animations:^{
        [self animateBars_V1];
    }completion:^(BOOL finished){
        [self animateBarsWithCount:count - 1];
    }];
}

//animateBars_V1 not repeated 
```

当然，如果你只是想运行一次动画，（但实际上是动画）你应该这样做：

```
- (IBAction)buttonPressed {
    [UIView animateWithDuration:.25f animations:^{
        [self animateBars_V1];
    } completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:31:59.630

CrimsonDiego 是对的

您可以尝试通过以下方式延迟每次通话：

```
- (IBAction)buttonPressed {
    for(int counter = 0; counter<5; counter++) {
        float ii = 1.0 * counter / 10;
        [self performSelector:@selector(animateBars_V1) withObject:nil afterDelay:ii];
        //  [self animateBars_V1];
        NSLog(@"COUNTER: %d", counter);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:29:16.653

问题就在这里

```
for(int counter = 0; counter<5; counter++) {
    [self animateBars_V1];
    NSLog(@"COUNTER: %d", counter);
} 
```

这个 for 循环在纳秒内执行，您的眼睛无法赶上这种变化，因为眼睛只能检测到 1/16 秒。用于测试什么可以在运行五次的计时器中运行此代码。

**编辑** 删除了睡眠调用，因为它将使主线程睡眠并且一切都将停止。所以在这里使用 Timer

# google-maps - 显示所有打开的信息窗口

> ID：13824077
> 
> 赞同：2
> 
> 时间：2012-12-11T16:18:43.557
> 
> 标签：google-maps, google-maps-api-3

我试图让自定义信息窗口浮动在标记上方，但是我注意到任何时候只能打开一个标记。有解决方法吗？

这是我目前生成的代码：

```
downloadUrl("AllActivityxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("id");
        var address = markers[i].getAttribute("id");
        var type = markers[i].getAttribute("venue_type");
        var point = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("lat")),
            parseFloat(markers[i].getAttribute("lng"))
        );

        var infowindow = new google.maps.InfoWindow();
        var html = "<b>" + point + "</b>hello <br/>" + type;
        var icon = customIcons[type] || {};
        var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow,
            zIndex: Math.round(latlng.lat()*-100000)<<5
        });

        markersArray.push(marker);
        bindInfoWindow(marker, map, infoWindow, html);        

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(html); 
            infowindow.open(map,marker);
        });
    }
}); 
```

当您查看[此地图](http://nightlifebratislava.com/demos/NewMaps/Map.php)时，请注意我一次无法打开超过 2 个信息窗口。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:01:40.650

Google Maps API v3 没有隐含的限制，即一次只能使用一个 InfowWindow。您需要编写代码来做到这一点。如果您想为每个标记创建一个信息窗口，请制作一个。

类似的东西（未测试）：

```
function createMarker(latlng, html) {
   var contentString = html;
    var infowindow = new google.maps.InfoWindow();
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });
} 
```

# java - 使用 javafx 将子窗口面板放入画布场景

> ID：13824079
> 
> 赞同：1
> 
> 时间：2012-12-11T16:18:51.500
> 
> 标签：java, scala, javafx-2, javafx, java-canvas

我们与其他工程师一起创建了一个软件 (www.openmole.org)，以在计算机网格上创建和运行复杂的工作流程。使用 gui，您可以创建和修改一些复杂的拖放工作流程，如下所示：

![在此处输入图像描述](../Images/16e7b4b7425b1806dc0063de0f1b9823.png)

您还可以在这里观看视频：[http ://www.openmole.org/files/crazyCoconut.webm](http://www.openmole.org/files/crazyCoconut.webm)

如您所见，可以将每个任务拖放并相互连接以形成复杂的工作流程。当任务移动时，箭头移动以跟随鼠标移动。单击任务时，会打开一个新面板，因此您可以选择一些选项来配置每个任务。

实际上，我们使用 Netbean 库在一个独特的场景上绘制所有这些，但将来我们希望使用 javafx api/object 制作同样的东西。

那么，您认为是否可以`Nodes`使用场景和 api 打开新的 Javafx 子窗口`Canvas`，就像在这个简单的用例中一样，代表我们的用例？

如果没有，您是否知道其他一些库可以使这成为可能？

![在此处输入图像描述](../Images/f8706daea16019d3fb8ffec6818efeb2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:13:16.697

您不能在[Canvas](http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html)中放置节点，因为它不是[Parent](http://docs.oracle.com/javafx/2/api/javafx/scene/Parent.html)，因此它是叶[节点](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)并且不能有子节点。

您可以将画布放在一个[组](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)中，然后将其他节点添加到该组以覆盖画布。或者您可以拍摄节点的[快照](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#snapshot%28javafx.scene.SnapshotParameters,%20javafx.scene.image.WritableImage%29)图像并将快照放置在画布中。尽管在标准场景图中而不是画布中渲染 UI 可能会更好。

* * *

以下是使用标准场景图构建的相似但不同的 UI 的一些简单示例：[拖放连接节点](https://gist.github.com/1441960)和[动态添加可拖动和调整大小的子项](https://gist.github.com/2724651)。

[yWorks](http://www.yworks.com/en/index.html)为其出色的图表工具创建了 JavaFX 原型，因此请考虑与他们联系并获得许可，而不是自己构建。

另请参阅有助于数据可视化 UI 构建的[Dex JavaFX 可视化框架。](http://www.javainc.com/projects/dex/Dex.html)

# silverlight - 问题在 WP7 中调整地图小部件的大小

> ID：13824080
> 
> 赞同：1
> 
> 时间：2012-12-11T16:18:58.787
> 
> 标签：silverlight, windows-phone-7, map

我在 Grid 中有一个简单的 Map ，它填充了其中的一行。当用户点击地图时，我希望它填满整个屏幕尺寸（可能带有动画）。

这是带有地图小部件的网格：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <Grid x:Name="stackPanel">
        <Grid.RowDefinitions>
            <RowDefinition Height="200"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Maps:Map x:Name="storesMap" Grid.Row="0" Center="{Binding MapCenter, Mode=TwoWay}" ScaleVisibility="Visible" CopyrightVisibility="Collapsed" LogoVisibility="Visible" Visibility="Collapsed" Tap="storesMap_Tap" VerticalAlignment="Top" ZoomBarVisibility="Collapsed" Margin="9,0,12,12" CredentialsProvider="AgKbZTg6fSdp1j_edOa7hCUc6mUoj6duKABt8hMu_PHEG7JjaAJBWqkdODjctYDG">
            <Maps:Map.RenderTransform>
                <CompositeTransform/>
            </Maps:Map.RenderTransform>
            <Maps:MapLayer x:Name="myPushpinLayer">
                <Maps:MapItemsControl x:Name="storePin" ItemsSource="{Binding StoresPinList}" />
            </Maps:MapLayer>
        </Maps:Map>

        <StackPanel x:Name="WaitingControls" Grid.Row="1" VerticalAlignment="Center" Margin="0,24,0,0">

      ..... 
```

这是重新调整地图大小并将 PageTitle 和 ApplicationTitle 调暗为 0 的动画（其中的一部分）。

```
 <VisualState x:Name="FullscreenMap">
            <Storyboard Duration="00:00:0.3">
                <DoubleAnimation To="0" Duration="00:00:0.3" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PageTitle" d:IsOptimized="True"/>
                <DoubleAnimation To="0" Duration="00:00:0.3" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ApplicationTitle" d:IsOptimized="True"/>
                <DoubleAnimation From="188" To="800" Duration="00:00:0.3" Storyboard.TargetProperty="Height" Storyboard.TargetName="storesMap"/>
                <DoubleAnimation From="435" To="480" Duration="00:00:0.3" Storyboard.TargetProperty="Width" Storyboard.TargetName="storesMap"/>
                <DoubleAnimation From="0" Duration="00:00:0.3" To="-161" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="storesMap" d:IsOptimized="True"/>
                <DoubleAnimation From="0" Duration="00:00:0.3" To="-21" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="storesMap" d:IsOptimized="True"/>

             ..... 
```

问题是地图确实可以很好地重新调整大小以填充屏幕（并且它是 0,0 移动到右上角），但我不能拖动它（实际地图）！如果我在屏幕顶部的大小与原始大小匹配的区域（动画之前）开始拖动，我只能拖动它。就像有一种视图（负责接收触摸/拖动事件的视图）没有沿整个地图重新调整大小。

甚至它上面的图钉层也会被“剪切”。如果图钉超出顶部的原始可视尺寸，它会被剪切（就像超出屏幕一样），即使地图仍然正常显示到屏幕底部。

知道为什么吗？

阿涅洛

# wpf - 将画笔填充为矩形形状时角落中的空白区域

> ID：13824083
> 
> 赞同：1
> 
> 时间：2012-12-11T16:19:03.240
> 
> 标签：wpf, resourcedictionary, rectangles, brush

无论我如何尝试，当我尝试填充创建于`ResourceDictionary`. 我累了`Stretch = Fill`，`Uniform`和`UniformToFill`。他们都没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:21:06.410

我猜您在代码中使用了变换旋转。如果要填充矩形区域。您必须使用矩形刷而不是菱形或矩形以外的任何其他刷子。PS：旋转的矩形画笔可能会填充椭圆，但会为多边形等其他形状留下一些空白。

# ruby-on-rails-3 - 嵌套表单的 show#controller 中的“堆栈级别太深”错误

> ID：13824086
> 
> 赞同：2
> 
> 时间：2012-12-11T16:19:07.660
> 
> 标签：ruby-on-rails-3, activerecord

我得到一个

> SystemStackError in Admin::ChecklistsController#show
> 
> 堆栈级别太深

控制器动作：

```
# GET /admin/checklists/1
# GET /admin/checklists/1.json
def show
  @admin_checklist = Admin::Checklist.find(params[:id])

  respond_to do |format|
    format.html #show.html.erb
    format.json { render json: @admin_checklist }
  end
end 
```

和模型

```
class Admin::Checklist < ActiveRecord::Base
  attr_accessible :description, :name, :usable, :categories_attributes
  has_many :categories, :dependent => :destroy
  validates_presence_of :name,:description

  accepts_nested_attributes_for :categories, :allow_destroy => true

end

class Admin::Category < ActiveRecord::Base
  attr_accessible :export_head, :export_position, :export_text, :frontend_head, :frontend_position, :frontend_text
  belongs_to :checklist
  validates_presence_of :frontend_head, :frontend_text

end 
```

我已经玩了一下attributes_accessible。如果我将 :categories_attributes 替换为 :categories

然后我松开了无限循环错误，但正如预期的那样，我不能再批量分配任何类别属性

任何人都知道如何解决这两个错误。

**编辑：**

> 在 2012-12-12 10:12:41 +0100 开始 GET "/admin/checklists/4" for 192.168.4.191 +0100 由 Admin::ChecklistsController#show 作为 HTML 参数处理：{"id"=>"4"} Admin ::Checklist Load (0.2ms) SELECT "admin_checklists".* FROM "admin_checklists
> " WHERE "admin_checklists"."id" = ? LIMIT 1 [["id", "4"]] CACHE (0.0ms) SELECT "admin_checklists".* FROM "admin_checklists" WHERE "
> admin_checklists"."id" = ? LIMIT 1 [["id", "4"]] 在 240 毫秒内完成 500 内部服务器错误
> 
> SystemStackError（堆栈级别太深）：actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:70
> 
> 渲染 /var/lib/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middlew are/templates/rescues/_trace.erb (1.5ms) 渲染 /var/lib/gems/1.9.1/ gems/actionpack-3.2.9/lib/action_dispatch/middlew are/templates/rescues/_request_and_response.erb (1.3ms) 渲染/var/lib/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/救援/布局中的中间件是/templates/rescues/diagnostics.erb (10.7ms)

对于每个 Page 请求，我得到这个 SQL-Staement 大约 100 次。这似乎是活动记录中的一些错误或我对嵌套模型的活动记录的误用.....

**编辑2：**

> irb(main):001:0> Admin::Checklist.find('4') Admin::Checklist Load (0.2ms) SELECT "admin_checklists".* FROM "admin_checklists
> " WHERE "admin_checklists"."id" = ? LIMIT 1 [["id", "4"]] => # BrummliBrummliBrummliBrummliBrummliBrummliBr..."，可用：false，created_at："20 12-12-11 13:43:23"，updated_at:"2012-12-11 13:43:23">

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:52:40.650

有趣的事实是它现在可以工作了，我不太确定是什么真正修复了它，因为我什么也没做。我刚休息完回来。在控制台上找到了。再次在模板中检查它，我收到一条属于格式错误的循环的不同错误消息，因为我再次删除了它，我通过再次粘贴删除的部分来修复它。

```
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @admin_checklist.name %>
</p>

<p>
  <b>Description:</b>
  <%= @admin_checklist.description %>
</p>

<p>
  <b>Usable:</b>
  <%= @admin_checklist.usable %>
</p>

<p>
    <ul>
        <% @admin_checklist.categories.each do |category|%>
            <li>
                <h3><%= category.frontend_head %></h3>
                <p><%= category.frontend_text %></p>
            </li>
        <% end %>
    </ul>
</p>

<%= link_to 'Edit', edit_admin_checklist_path(@admin_checklist) %> |
<%= link_to 'Back', admin_checklists_path %> 
```

很抱歉，我无法回答为什么会发生这种情况。

# dynamic-data - 在动态数据中，我如何获得动态过滤器的结果计数？

> ID：13824088
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:19:08.360
> 
> 标签：dynamic-data, asp.net-dynamic-data

我有一个动态数据应用程序，其中包含可以按国家/地区过滤的 List.aspx 主页列表数据。country 表用作 DynamicFilter，因为它是主表的外键。

当我选择一个状态时，DynamicFilter_FilterChanged 方法会触发并正确过滤主表，但我试图弄清楚如何获得过滤产生的总行数。

我在这里看过以前的帖子，但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:35:10.093

list.aspx页面上的Gridview被选中的时候可以统计

```
protected void GridDataSource_Selected(object sender, LinqDataSourceStatusEventArgs e)
{
    if (e.TotalRowCount > 0)
    {
        lblCount.Text = e.TotalRowCount.ToString() + ((e.TotalRowCount == 1) ? " item found." : " items found.");
    }
} 
```

# mysql - 在数据库中存储大量电子邮件（包括正文）？

> ID：13824090
> 
> 赞同：1
> 
> 时间：2012-12-11T16:19:12.960
> 
> 标签：mysql, database, email, nosql

我每天需要存储 1000 封电子邮件，这些电子邮件需要属于特定用户，但每个人都可以搜索。

MySQL可以做到这一点吗？会不会太慢？我需要使用 noSQL 吗？还是两者兼而有之？这样做的正确方法是什么？如果可能的话，我宁愿只使用 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:58:59.630

> MySQL可以做到这一点吗

是的，MySQL 可以做到这一点。

> 会不会太慢？

这取决于多少是太多，以及你将如何设置。

> 我需要使用 noSQL 吗？还是两者兼而有之？

无需使用 NoSQL 或两者的组合。

> 这样做的正确方法是什么？如果可能的话，我宁愿只使用 MySQL。

正确的方法取决于您的所有要求和专业知识。但是很可能使用 MySQL 来做到这一点。

# java - 打印文件来源的文件夹名称

> ID：13824091
> 
> 赞同：0
> 
> 时间：2012-12-11T16:19:18.487
> 
> 标签：java, substring

我正在尝试打印存储文件的文件夹名称。

示例：我将文件 picture.jpg 存储在路径 C:\Users\Desktop\Foldername\picture.jpg

是否可以打印“文件夹名”。我已经尝试了一个子字符串，但这似乎依赖于我对字符数进行硬编码。例如：

```
System.out.println(path.substring(33, 38)); 
```

如果要发布我的程序，并且用户有不同的文件路径 - 这将抵消子字符串。

要选择文件，我的程序有以下代码

```
chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File(computerUsername+"\\Desktop\\Foldername"));
        chooser.setDialogTitle(choosertitle);
        chooser.setAcceptAllFileFilterUsed(true); 
```

因此，下面的代码打印出 nullpointexpection 错误。选择器.getPath().getName();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:21:43.440

你需要的是[`java.io.File`](http://docs.oracle.com/javase/6/docs/api/index.html?java/io/File.html). 它具有转换路径的方法。

```
System.out.println(new File(path).getParentFile().getName()); 
```

如果您没有，“手动”执行此操作的方法是查找路径分隔符 ( `\`) 并围绕它们进行拆分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:23:24.747

```
File file = new File("C:\\Users\\Desktop\\Foldername\\picture.jpg");
String parentFolderName = file.getParentFile().getName(); 
```

# charts - D3js中分组条形图的交互式排序

> ID：13824093
> 
> 赞同：4
> 
> 时间：2012-12-11T16:19:23.303
> 
> 标签：charts, d3.js, interactive

我根据D3js.org 示例存储库中提供的[示例](http://bl.ocks.org/3887051)生成了一个组条形图。现在我正在尝试基于D3js 示例集中的另一个[示例引入交互式排序选项。](http://bl.ocks.org/3885705)我为每个州分组了三个变量。我希望提供交互，读者可以根据 - 1\. 任何一个变量（但整个组应该移动）进行排序（降序） 3\. 每个变量一个三个不同的排序选项（复杂且不太重要）

我是 javascript 和 D3js 的新手，所以我不确定前进的方向。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T15:37:00.210

没有看到你的代码，我只能提供一个非常模糊的方向：

每次查看器更改排序选项时，您可能需要一个被调用的函数。在函数内部，您需要指定不同的访问器：

```
var update = function(_value){
  data.sort(function(a, b) { return b._value - a._value; })

  // add transition with the newly sorted data
} 
```

# javascript - 迭代数组与对象

> ID：13824095
> 
> 赞同：0
> 
> 时间：2012-12-11T16:19:34.553
> 
> 标签：javascript, arrays, object

哪个更快：迭代数组或对象。当我需要执行诸如从中间删除任何元素之类的操作时会发生什么？

```
var a = {"A1":1, "B1":2, "C1":3}; 
```

或者

```
var a = ["A1", "B1", "C1"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:26:35.063

迭代数组应该比迭代对象更快，但这取决于：

1.  对象/数组的大小
2.  您的密钥是否连续
3.  各种其他优化器废话

在较旧的浏览器上，从数组中删除元素曾经非常昂贵（因为它需要更改每个后续元素的键），但在现代浏览器上这不是问题。

说真的，只使用最适合您项目的表示，然后担心以后*如果*它成为问题的优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:25:40.730

> 哪个更快 - 遍历数组或对象？

数组的存储效率可能更高，而且它的索引也是可预测的（不需要查找）。它应该更快，但您不会注意到小型集的差异。

> 当我需要执行诸如从中间删除任何元素之类的操作时会发生什么？

使用对象很容易；你只要打电话`delete a.A1;`。这是一个`O(1)`手术。

使用数组，使用`a.splice(1,1);`，需要对所有项目进行重命名，如果经常发生，这会相当慢（`O(n)`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:23:29.303

一个并不比另一个快或慢。使用对您的项目最有意义的任何一个。

至于删除，对于数组看[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)，对于对象尝试[`delete`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)。

# php - 将 Google 图表另存为图片

> ID：13824096
> 
> 赞同：6
> 
> 时间：2012-12-11T16:19:34.773
> 
> 标签：php, image, charts

因此，经过数小时的网络搜索、谷歌搜索和溢出，我找不到解决问题的方法。

我从谷歌图表中得到了一个折线图。我想将其转换为 PNG，将其保存在服务器上，然后将其插入 MySQL 数据库。

听起来很简单，但我无法让它工作。该网站的脚本不再工作（至少不在此处）[http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html](http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html) -> 不工作。

第二个选项是旧选项：

```
$imageData =     file_get_contents('http://chart.apis.google.com/chart... etc'); 
```

我不能使用它，因为它不再受支持并且无法从中获得一些不错的质量。

这里有没有人可以为我的问题提供一个很好的教程或帮助？

编辑：

我使用了 Battlehorse 的代码和 EriC 的代码。

所以现在我开始将图表显示为 DIV 中的图像我想将此图像保存在服务器上并更新 mysql 以在将来使用它以在 PDF 文件中使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:40:01.430

当您访问该站点时，将其粘贴到控制台中（覆盖故障功能）。

```
 function getImgData(chartContainer) {
    var chartArea = chartContainer.getElementsByTagName('svg')[0].parentNode;
    var svg = chartArea.innerHTML;
    var doc = chartContainer.ownerDocument;
    var canvas = doc.createElement('canvas');
    canvas.setAttribute('width', chartArea.offsetWidth);
    canvas.setAttribute('height', chartArea.offsetHeight);

    canvas.setAttribute(
        'style',
        'position: absolute; ' +
        'top: ' + (-chartArea.offsetHeight * 2) + 'px;' +
        'left: ' + (-chartArea.offsetWidth * 2) + 'px;');
    doc.body.appendChild(canvas);
    canvg(canvas, svg);
    var imgData = canvas.toDataURL("image/png");
    canvas.parentNode.removeChild(canvas);
    return imgData;
  } 
```

在 JS 中，它正在搜索 iframe bla bla 来获取 svg。

要自动保存图像，您可以让该方法以编程方式被调用。

```
document.body.addEventListener("load", function() {

        saveAsImg( document.getElementById("pie_div")); // or your ID

    }, false ); 
```

为了在服务器端保存图像，这篇文章可能有助于[在服务器端保存 PNG 图像](https://stackoverflow.com/questions/11511511/how-to-save-a-png-image-server-side-from-a-base64-data-string#answer-11511552)

**更新**
将图像发布到 PHP (index.js)

```
function saveToPHP( imgdata ) {

    var script = document.createElement("SCRIPT");

    script.setAttribute( 'type', 'text/javascript' );
    script.setAttribute( 'src', 'save.php?data=' + imgdata );

    document.head.appendChild( script );
}

function save() {

    var canvas = document.getElementById("canvas"), // Get your canvas
        imgdata = canvas.toDataURL();

    saveToPHP( imgdata );
}

function drawOnCanvas() {

    var canvas = document.getElementById("canvas"), // Get your canvas
        ctx = canvas.getContext("2d");

    ctx.strokeStyle = "#000000";
    ctx.fillStyle = "#FFFF00";
    ctx.beginPath();
    ctx.arc(100,99,50,0,Math.PI*2,true);
    ctx.closePath();
    ctx.stroke();
    ctx.fill();
}

drawOnCanvas(); // Test
save(); 
```

保存.php

```
<?php
    // Get the request
    $data = $_GET['data'];

    // Save to your DB.
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T21:57:45.840

你可以使用`grChartImg`图书馆。它是一个跨浏览器解决方案，甚至支持旧版本的 IE（8 及更早版本）。它具有许多功能，例如下载图像、上传到服务器、在对话框中显示图像等。

有关更多信息，请查看[http://www.chartstoimage.eu](http://www.chartstoimage.eu)。

我希望能帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T14:34:54.573

这不是一个真正的答案，但将来可能是一个答案，如果您只是想要恢复该功能，这是必要的。以下 URL 显示了可视化 API 的所有当前问题和功能请求。

[https://code.google.com/p/google-visualization-api-issues/issues/list?can=2&q=&sort=-stars+id&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary%20Stars](https://code.google.com/p/google-visualization-api-issues/issues/list?can=2&q=&sort=-stars+id&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary%20Stars)

此功能请求获得的星数/投票越多，他们查看它的机会就越高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T08:23:24.327

我有同样的问题 - 将 Google 图表另存为服务器上的图像。这里没有一个答案对我有用。最后我得到了解决方案，但有一些错误（仅在 Chrome 浏览器中工作）。作为基础，我使用了这里的脚本[https://gist.github.com/mpetherb/7085315](https://gist.github.com/mpetherb/7085315)我为我的项目做了一些更改。我使用 jquery 将生成的图形图像导入到我的服务器。这是我想转换为图像并保存[谷歌图表示例 id="ex0"的图表](http://jsfiddle.net/api/post/library/pure/)

转换为图像并导入服务器的脚本

```
<script>
function getImgData(chartContainer) {
var chartArea = chartContainer.getElementsByTagName('svg')[0].parentNode;
var svg = chartArea.innerHTML;
var doc = chartContainer.ownerDocument;
var canvas = doc.createElement('canvas');
canvas.setAttribute('width', chartArea.offsetWidth);
canvas.setAttribute('height', chartArea.offsetHeight);
canvas.setAttribute(
'style',
'position: absolute; ' +
'top: ' + (-chartArea.offsetHeight * 2) + 'px;' +
'left: ' + (-chartArea.offsetWidth * 2) + 'px;');
doc.body.appendChild(canvas);
canvg(canvas, svg);
var imgData = canvas.toDataURL("image/png");
canvas.parentNode.removeChild(canvas);
return imgData;
}

function toImg(chartContainer, imgContainer) {
var doc = chartContainer.ownerDocument;
var img = doc.createElement('img');
var myimg=img.src = getImgData(chartContainer);
//Here I am using jquery for importing decoded image to hidden.php on my server 
$.ajax({
    method: "POST",
    url: "hidden.php",
    data: { name: myimg } });
while (imgContainer.firstChild) {
imgContainer.removeChild(imgContainer.firstChild);
}
imgContainer.appendChild(img);
}
</script>

<button onclick="toImg(document.getElementById('ex0'), document.getElementById('ex0'));" 
type="button" <Convert to image and upload on server></button>
// ex0 - div id of this type of google graph. If you using another type of google graph - you should change it
```

不要忘记在您的代码中包含 jquery。

和 php 隐藏脚本，用于从 jquery 方法 POST 接收数据并将其保存在服务器上

隐藏的.php 文件

```
<?php
 if(isset($_POST['name']))
  {   
    $data = $_POST['name'];

    list($type, $data) = explode(';', $data);
	list(, $data)      = explode(',', $data);
	file_put_contents('graph_temp.png', base64_decode($data));
```

我会再次注意到 - 仅适用于 Chrome 浏览器。Firefox 也在服务器上创建图像文件，但没有任何内容（看起来 Firefox 不支持 base64 编码数据）

# asp.net - ASP.NET MVC 中的完全自定义身份验证：丢失 HttpContext.User

> ID：13824097
> 
> 赞同：6
> 
> 时间：2012-12-11T16:19:39.607
> 
> 标签：asp.net, security

我有自己的身份验证系统 ( [https://bitbucket.org/anton_gogolev/octalforty-structural](https://bitbucket.org/anton_gogolev/octalforty-structural) )，它不使用任何标准的 ASP.NET 东西 ( `<authentication mode="None" />`)。

它使用 plain `IHttpModule`s 来完成它的工作：`BeginRequest`检查传入的 cookie 和设置`HttpContext.Current.User`，并`Thread.CurrentPrincipal`在成功验证后

```
Thread.CurrentPrincipal = HttpContext.Current.User = 
    new GenericPrincipal(tokenIdentity,new string[] { }); 
```

而`EndRequest`为经过身份验证的用户发出所有必需的 cookie。

*这几个月来一直运行良好，但在某些系统上（我真的无法判断它们与实际运行*的系统有何不同）ASP.NET 似乎正在失去 的值`HttpContext.Current.User`，用任何默认值替换它（`GenericPrincipal`聚合`GenericIdentity`设置`IsAuthenticated`为`false`等）。

所以问题是：如何以及为什么会`HttpContext.Current.User`迷路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:14:42.570

听起来好像有另一个模块在 BeginRequest 之后修改 HttpContext.Current.User。我建议在 PostAuthenticateRequest 中设置它。

在启用 RoleManager 模块的 ASP.NET 之前，我遇到过这个问题。将以下内容添加到 web.config 的 system.web 部分修复了它。

```
<httpModules>
     <remove name="RoleManager"/>
</httpModules> 
```

以下是有关我为解决此问题所做的一些详细信息：

1）找出其他模块正在运行。这是[一篇文章](http://abhijitjana.net/2010/06/08/how-to-get-list-of-all-active-httpmodules-in-asp-net/)，提供了一些执行此操作的代码。

2) 确保将 HttpContext.Current.User 设置在正确的位置。BeginRequest 不是一个好地方。 PostAuthenticateRequest 通常是最好的（并且推荐）。如果另一个模块也在使用 PostAuthenticateRequest 并且它恰好在你的模块之后运行，这不会阻止问题，但在许多情况下它会解决问题（使用上面的 web.config 片段）。

3) 有选择地禁用每个已安装的模块并测试您的应用程序，直到您的自定义 Principal 对象未被覆盖。

# bash - 搜索并用 sed 替换 $ 符号

> ID：13824101
> 
> 赞同：3
> 
> 时间：2012-12-11T16:20:05.320
> 
> 标签：bash, unix, sed, replace

我想使用 sed 用变量的内容替换像这样 $$placeholder$$ 编写的文件占位符。

甚至可能吗？

这是我尝试过的：

```
sed -i "" -e 's/\$\$placeholder\$\$/$o/g' test.txt 
```

工作一半，将 $$placeholder$$ 替换为 $o 而不是 $o 变量的内容

`sed -i "" -e "s/\$\$placeholder\$\$/$o/g" test.txt`

不匹配我的文本中的任何 $$placeholder$$

提前谢谢。

西里尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:32:44.537

双重逃避美元：

```
sed -i "s/\\$\\$placeholder\\$\\$/$o/g" test.txt 
```

如果您的变量包含您的分隔符，您可以先对其进行一些字符串替换：

```
sed -i "s/\\$\\$placeholder\\$\\$/${o//\//\\/}/g" test.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:36:55.337

您可以使用：

```
sed 's/\$\$placeholder\$\$/'"$o"'/g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:28:27.143

您可以在周围添加简单的引号`$o`：

```
sed -i "" -e 's/\$\$placeholder\$\$/'$o'/g' test.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:33:38.003

sed 是用于在单行上进行简单替换的好工具，但对于其他任何事情（包括在替换中使用变量）只需使用 awk：

```
$ cat file
foo $$placeholder$$ bar

$ o="hello
world"

$ sed 's/\$\$placeholder\$\$/'"$o"'/g' file
sed: -e expression #1, char 27: unterminated `s' command

$ awk -v o="$o" '{gsub(/\$\$placeholder\$\$/,o)}1' file
foo hello
world bar 
```

这样，您就不必担心 sed 认为“特殊”的任何字符，或者通过仔细引用脚本的各个部分来在命令行上跳回以及在 sed 和 shell 之间搞乱。

# ember.js - 在加载和渲染 connectOutlet 之后做一些事情

> ID：13824104
> 
> 赞同：1
> 
> 时间：2012-12-11T16:20:08.740
> 
> 标签：ember.js

`connectOutlet("blog")`在加载数据 ( `blogController.isLoaded`) 并完成渲染 ( `view.afterRender`/ )后，我想做一些事情（加载广告、做一些统计等`childViews.afterRender`）。

有什么像`connectOutlet("blogs").isEverythingReady().then("Hurray, the user probably sees all the posts in his browser right now!")`吗？

有希望吗？任何计划？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:24:18.783

我通过观察`isLoaded`我需要的控制器解决了这个问题。当它们`isLoaded`为真时，我在 a 中执行我的广告、统计信息等`setTimeout(250)`，假设 250 毫秒足以让浏览器在数据从服务器返回后呈现我的“页面”。

# php - 在 PHP 中获取上个月的最后一天

> ID：13824107
> 
> 赞同：0
> 
> 时间：2012-12-11T16:20:10.033
> 
> 标签：php, date, datetime, time

> **可能重复：**
> [PHP 本月的最后一天](https://stackoverflow.com/questions/1686724/php-last-day-of-the-month)

在 PHP 中，我试图得到上个月的最后一天。例如，今天是 2012 年 12 月 11 日。所以我试图抓住的日期是 11 月 30 日。

这就是我目前正在尝试做的事情：

```
 //this grabs the last daye of this month
        $current_month = date('Y-m-t',strtotime('today'));

        //this should grab November 30th.
        $last_month = date("F, Y",strtotime($current_month." -1 month ") 
```

它没有抓住 11 月 30 日，而是抓住了 12 月 1 日。似乎“-1 个月”只是减去 30 天。

我如何正确抓住上个月的最后一天？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:21:29.240

```
$datetime = new DateTime('last day of this month');
echo $datetime->format('F jS'); 
```

或者

```
$datetime = new DateTime();
echo $datetime->format('Y-m-t'); 
```

第一个允许您以任何方式格式化输出。如果您想使用不是当前月份的月份，您可以向 DateTime 构造函数传递一个[有效的日期格式](http://us3.php.net/manual/en/datetime.formats.php)，然后代码将完成其余的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T16:22:51.643

cal_days_in_month() 是你想要的。最后一天与总天数相同。

```
cal_days_in_month (int $calendar,int $month,int $year) 
```

$calendar 通常是 CAL_GREGORIAN

将 $month - 1 发送到函数以获得所需的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T16:26:34.487

您可以使用当前月份/年份和日期调用[mktime()](http://php.net/mktime)`0`：

```
$last_day_of_last_month = mktime(0, 0, 0, date('n'), 0, date('Y')); 
```

它记录在案：

> **day** [...] 小于 1 的值（包括负值）参考上个月的天数，因此 0 是上个月的最后一天，-1 是前一天，等等。值大于相关月份的日期参考下个月的适当日期。

# c++ - 如何在 Windows 上使用 C++ 模拟 Ctrl+C 组合

> ID：13824108
> 
> 赞同：0
> 
> 时间：2012-12-11T16:20:11.157
> 
> 标签：c++, simulate, ctrl

> **可能重复：**
> [我可以将 ctrl-C (SIGINT) 发送到 Windows 上的应用程序吗？](https://stackoverflow.com/questions/813086/can-i-send-a-ctrl-c-sigint-to-an-application-on-windows)
> [如何有效地杀死 C++ (Win32) 中的进程？](https://stackoverflow.com/questions/1916574/how-to-effectively-kill-a-process-in-c-win32)
> [C++ 在 Windows 中发送一个简单的信号](https://stackoverflow.com/questions/5289549/c-sending-a-simple-signal-in-windows)

我有一个 java 控制台应用程序，当我按下 时，这个应用程序开始关闭`CTRL``C`。你能告诉我，`CTRL``C`如果我只知道**pid**并且有进程**句柄**，我如何从我的 C++ 应用程序中模拟按下？

据我了解，我必须向`SIGINT`进程发送信号，我该怎么做？

ps SO上的解决方案不起作用！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:23:37.010

在posix上使用

```
kill(pid, SIGINT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:23:46.830

您可以为此使用[kill](http://linux.die.net/man/3/kill)。`pid`您需要您的 java 应用程序的进程 id ( )

```
pid_t java_app;
kill(java_app, SIGINT); 
```

# python - 如何正确编写模块？

> ID：13824109
> 
> 赞同：3
> 
> 时间：2012-12-11T16:20:14.617
> 
> 标签：python, python-3.x

我有以下目录结构

![在此处输入图像描述](../Images/1d600f294515162091100fa8e6913400.png)

RawRepo 包含一个简单的类：

```
class RawRepo:
    pass 
```

**初始化**.py 包含：

```
__all__ = ["RawRepo"] 
```

yap-analysis.py，我的“主文件”，使用以下任何一种，但它不起作用：

```
from yap import RawRepo
from yap import * 
```

当我尝试实例化它时，说：

> TypeError：“模块”对象不可调用

如何让它真正发挥作用？我想`yap`成为模块，并且`RawRepo`只是它的类之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:36:39.407

将类导入`yap/init.py`：

```
from .RawRepo import RawRepo 
```

然后你可以`yap-analysis.py`像这样导入它：

```
from yap import RawRepo 
```

请注意，您可以在模块中对多个类进行分组。您还应该考虑将模块重命名为 raw_repo 以符合[PEP8](http://www.python.org/dev/peps/pep-0008/#package-and-module-names)，“模块应该有简短的全小写名称。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:23:00.487

使用您拥有的导入，该类被称为`RawRepo.RawRepo`，而不是`RawRepo`（后者是模块）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:23:12.307

`RawRepo`是模块。`RawRepo.RawRepo`是类，你应该实例化什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:30:00.610

在`__init__.py`

```
from RawRepo import * 
```

然后做`yap-analysis.py`

```
from yap import *

r = RawRepo() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T16:32:32.900

关键是 Python 编译器知道**.py**文件是一个**模块**。

您将 python 模块文件和 Class 的名称都命名为 RawRepo。这个成语基本上来自Java世界，不是很Pythonic ...

您可以更改`__init__`文件以导入模块的**内容**..

# asp.net - 键入检查 WebControl

> ID：13824111
> 
> 赞同：0
> 
> 时间：2012-12-11T16:20:31.210
> 
> 标签：asp.net, vb.net

我知道在 VBA 中如何对控件类型进行 Select..Case 比较，例如：

```
Select Case TypeName(ctrl)
  case is = "ListBox"
    ...
  case is = "ComboBox"
    ...
  ...
End Select 
```

在 VB.Net 中，我可以使用上面的通用值，还是必须在文本中使用命名空间限定符？

目前实施：

```
public function Validate(byref ctrl as WebControl) as boolean
  select case TypeName(ctrl)
    case is = "TextBox"
      ....
    case is = "Label"
      ....
    ...
  End select
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:24:44.863

您不需要类型的“名称”，您可以直接使用类型：

```
 Select Case True
        Case TypeOf c Is TextBox
            ' its a Textbox
        Case TypeOf c Is Label
            ' its a label
        Case Else
            'foo
    End Select 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:24:26.813

我想你期待这样的事情你可以使用[TypeOf 运算符](http://msdn.microsoft.com/en-us/library/0ec5kw18%28v=vs.80%29.aspx)

```
Dim ctrl As Control
        For Each ctrl Me.Controls
            If (TypeOf ctrl Is TextBox) Then
                ''do something
            End If
            If (TypeOf ctrl Is Label) Then
                ''do something
            End If
        Next ctrl 
```

**更新**

使用`case`

```
 select case True
    case  TypeOf ctrl Is TextBox
      ....
    case TypeOf ctrl Is Label
      ....
    ...
  End select 
```

# javascript - 从 A 点到 B 点的图像过渡

> ID：13824113
> 
> 赞同：0
> 
> 时间：2012-12-11T16:20:34.460
> 
> 标签：javascript, jquery, css

我正在开发一个单页网站，并且正在尝试在滚动时制作动态背景动画。假设我的网站有 4 个不同的部分。对于每个不同的部分，我都有不同的背景。

使用 jQuery，我能够检索正在使用的滚动百分比。所以假设我的每个部分都有 25% 的间隔（不完全正确，但这只是为了描绘我想要实现的目标......）。所以在 0-25% backgroundA，在 25-50% backgroundB，在 50-75% backgroundC 和 75-100%，backgroundD。

背景相似，但它们会在网站的每一侧反弹，类似于乒乓球。图标也会发生变化，例如我的第一个背景可能是左侧 100 像素 x 100 像素的房屋图像，而第二个背景可能是右侧的放大镜图像，仍然是 100 像素 x 100 像素。

现在，我想做的是在背景之间制造某种“流动性”，所以看起来好像背景A正在逐渐转变为背景B。

我在某些网站上看到过这种行为，所以我很确定这是可能的……但是，不太确定该怎么做。

如果您需要更多说明，请告诉我。

谢谢 ！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:36:04.250

捕获滚动​​事件，然后根据它转换任何元素：

```
$(window).scroll(function(){
    var doc_h = $('body').height()-window.innerHeight;
    var scroll_y = window.scrollY;
    var sc_p = scroll_y/doc_h;

    $('#some-element').css({'bottom':50+sc_p*20+'px'});
}); 
```

实际功能取决于您真正想要做什么，但基本上只是计算滚动条的位置，然后更改某些元素的属性。

您示例中的功能区只是一组 4 个宽度 = 0 的 div，当页面滚动时会增长，最后一个 div 会随着高度增长。你只需要捕捉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:42:35.160

使用提供给您的 OP 的示例，您可能正在寻找的方法是稍微垂直重叠背景图像（线条似乎相互缠绕）并基于 scrollTop 位置，每个触发“步进”功能这些背景中的动画宽度（检查页面上名为 bg.js 的脚本）。在每个“步骤”中，这些函数根据一些数学公式改变背景图像的宽度——比如 (scrollTop * (heightCurrentBg - currentWidth)。所有这些都在前端，使它看起来好像是一个流体管线来回移动/弹跳。

**编辑**——就使用滚动位置与页面上的元素进行交互而言，这是我刚刚为顶部导航浮动元素制作的一个示例——http: [//jsfiddle.net/jmsessink/MyL6Y/2/](http://jsfiddle.net/jmsessink/MyL6Y/2/)

请注意，所有的魔法都发生在数学中——

```
page.$window.scrollTop() / (page.bodyHeight - page.windowHeight) * (page.navWidth - page.navDivWidth); 
```

希望这可以为您的项目提供一个良好的开端。

**编辑#2——**这是我如何编写你想要做的事情的一个例子（只需用斜线的背景图像替换背景颜色） [——http://jsfiddle.net/jmsessink/MyL6Y/3/](http://jsfiddle.net/jmsessink/MyL6Y/3/)

# php - 订单确认电子邮件 {{payment_html}} 块

> ID：13824115
> 
> 赞同：0
> 
> 时间：2012-12-11T16:20:42.890
> 
> 标签：php, magento

我正在尝试编辑 Magento 的一些交易电子邮件（订单确认邮件）。我的目标是更改订单总计的顺序，使“税”出现在“小计”之前（我们的小计已经包括税）。我发现总数是`app\design\frontend\base\default\template\sales\order\totals.phtml`通过[这个循环](http://paste2.org/p/2590320)生成的。

有一个条件表明：

```
<?php if ($_total->getStrong()):?>
    <strong><?php echo $_total->getLabel()?></strong>
<?php else:?>
    <?php echo $_total->getLabel()?>
<?php endif?> 
```

我的主要问题是：

1.  在做什么`->getStrong()`，它在哪里定义，因为即使在使用 grep 搜索代码库之后我也无法在任何地方找到它。
2.  标签（例如“Subtotal”、“Tax”、“Grand Total”等）是否存储在 Magento 后端的任何位置？
3.  关于如何更改字段顺序的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:25:31.993

看一看 @

1）看看/app/code/core/Mage/Sales/Block/Order/Totals.php

```
$this->_totals['grand_total'] = new Varien_Object(array(
    ..
    'strong'=> true,
    'value' => $source->getGrandTotal(),
    'label' => $this->__('Grand Total')
)); 
```

2) app/locale/en_US/Mage_Sales.csv

见[http://www.magentocommerce.com/boards/viewthread/29444/](http://www.magentocommerce.com/boards/viewthread/29444/)

3) Admin -> System -> Config -> Sales -> Sales -> Checkout Totals Sort Order

# jasper-reports - Jasper 文档没有页面

> ID：13824125
> 
> 赞同：0
> 
> 时间：2012-12-11T16:21:02.900
> 
> 标签：jasper-reports, netbeans-7

我正在尝试使用 NetBeans 的 jasper 报告插件。我创建了我的连接（测试没问题） 我创建了 jrxml 并尝试预览它。

它是自动编译的（.jasper 出现），我有一条消息说：“文档没有页面”。

我读到的问题可能是数据源为空，但事实并非如此。所以我决定制作一个非常简单的 jrxml（静态：只有文本，不引用数据库的任何字段）

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE jasperReport PUBLIC "-//JasperReports//DTD JasperReport//EN"   "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">

    <jasperReport name="report name" pageWidth="595" pageHeight="1500" columnWidth="535"  leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
        <background>
            <band/>
        </background>
        <title>
            <band height="79"/>
        </title>
        <pageHeader>
            <band height="35"/>
        </pageHeader>
        <columnHeader>
            <band height="61"/>
        </columnHeader>
        <detail>
          <band height="696">
            <textField isBlankWhenNull="false">
                <reportElement key="textField-23" x="0" y="274" width="449" height="134"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Justified">
                    <font size="11" pdfFontName="Tiffy.ttf" isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Vous avez reçu il y a quelques mois une attestation de la Caisse Primaire d'Assurance Maladie destinée à réduire le coût de votre adhésion à une complémentaire santé.\n\n"+
"Si vous rencontrez des difficultés dans vos démarches d'accès aux droits et aux soins, le Service social de l'Assurance Maladie est à votre disposition pour vous informer, vous conseiller et vous accompagner.\n\n" + 
"Aussi, je propose de vous rencontrer à votre domicile le : "]]>
                </textFieldExpression>
            </textField>
        </band>
      </detail>
    <columnFooter>
        <band height="45"/>
    </columnFooter>
    <pageFooter>
        <band height="54"/>
    </pageFooter>
    <summary>
        <band height="42"/>
    </summary>
</jasperReport> 
```

同样认为它可以编译，但我有消息

* * *

所以我添加了这两行：

```
<noData>no Data</noData>
<queryString>select * from dual</queryString> 
```

什么都没有明显显示，但相同的消息..所以连接似乎没问题，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:38:49.327

即使报表正文中只有静态文本，如果报表的 sql 为空，jasper 默认不显示任何内容。尝试添加“select 1 as dummy”作为您的查询，看看是否可以解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:15:54.907

尝试空查询并查看结果。从这个[CodeRanch 论坛帖子](http://www.coderanch.com/t/62787/open-source/Jasper-Reports-empty-report)中，我提取了以下内容：

> 当您的查询没有结果时，JR 提供了 3 个选项供您使用：(a) 生成空报告 (PDF)，即没有页面 (b) 生成单个空白页面报告 (c)生成显示所有部分的报告，除了详细信息部分
> 
> 这可以通过为元素 jasperReport 设置属性 [B}whenNoDataType[/B] 的值来完成。3 个可接受的值是：(a) NoPages (b) BlankPage (c) AllSectionsNoDetail

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T03:00:26.003

要验证数据源是否没有问题，您可以`No Data`在报告的部分中放置静态文本。然后在报告的属性中

```
When No Data : No Data Section 
```

如果报表中显示静态文本，那么数据源就是您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-16T05:16:51.897

这个错误是因为报表已经被编译到编译它点击编译报表造成的。

# printing - 打印的图像在单点触控中占据了整个页面

> ID：13824126
> 
> 赞同：0
> 
> 时间：2012-12-11T16:21:02.917
> 
> 标签：printing, xamarin.ios

我正在使用以下代码在 monotouch 中打印图像（png 文件）：

```
 void Print ()
        {
            UIImage image = myImgView.Image;
            NSMutableData data = new NSMutableData();
            UIGraphics.BeginPDFContext(data, new RectangleF(new PointF(0,0), image.Size), null);

            image.Draw(new RectangleF(0, 0, image.Size.Width, image.Size.Height));
            UIGraphics.EndPDFContent();

            var printInfo = UIPrintInfo.PrintInfo;

            printInfo.JobName = "Test: PDF Print";

            var printer = UIPrintInteractionController.SharedPrintController;

            printer.PrintInfo = printInfo;
            printer.PrintingItem = image; //url;
            printer.ShowsPageRange = true;

            printer.Present (true, (handler, completed, err) => {
                if (!completed && err != null){
                    Console.WriteLine ("error");
                }
            } );
} 
```

图像打印出来，但占据了整个页面。如何使其将图像限制为实际大小？（大约为 200 像素 x 200 像素）

编辑：

将我的代码更改为此，但结果仍然相同：

```
void Print ()
        {
            UIImage image = myImgView.Image;

            NSData data = new NSData();

//          var imageRect = new RectangleF (){
//              Height = image.Size.Height,
//              Width = image.Size.Width,
//              Size = image.Size
//
//          } ;

            var printInfo = UIPrintInfo.PrintInfo;

            printInfo.JobName = "Test";

            var printer = UIPrintInteractionController.SharedPrintController;

            printer.PrintInfo = printInfo;
            printer.PrintingItem = data;
            printer.PrintFormatter = new UIPrintFormatter(){
                MaximumContentWidth = image.Size.Width
            } ;

            printer.ShowsPageRange = true;

            printer.Present (true, (handler, completed, err) => {
                if (!completed && err != null) {
                    Console.WriteLine ("error");
                }
            } );
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:35:33.620

我最终使用了自定义 UIPrintPageRenderer 类，如[https://github.com/xamarin/monotouch-samples/blob/master/RecipesAndPrinting/RecipePrintPageRenderer.cs所示](https://github.com/xamarin/monotouch-samples/blob/master/RecipesAndPrinting/RecipePrintPageRenderer.cs)

# c# - 为什么分页会重置网格数据源（EntityDataSource）？

> ID：13824128
> 
> 赞同：1
> 
> 时间：2012-12-11T16:21:11.140
> 
> 标签：c#, asp.net, entity-framework, entity-framework-4, entitydatasource

我有一个 Gridview，其数据源是 EntityDataSource。AllowPaging 设置为 true（参见代码）。在页面上还有一个 DropDownList。当页面最初加载时，网格会填充相关数据源中的所有数据 [未过滤]。当/如果用户从 DropDownList 中选择一个项目，Gridview 中的数据会被相应地过滤。

问题是当我从新过滤的列表中选择一个页面时，过滤器会以某种方式被带走，所以我没有获取过滤列表的下一页，而是获取所有数据的下一页。我该如何纠正？

------开放网格声明--

```
<asp:GridView ID="gvAthleteInfo" runat="server" DataKeyNames="AthleteUid" DataSourceID="dsAthleteInfo"
    HeaderStyle-CssClass="dl-grid-heading" AutoGenerateColumns="false" OnRowCommand="gvAthleteInfo_RowCommand"
    AllowPaging="true" AllowSorting="true">
.
.
.
</asp:GridView> 
```

---------绑定到网格的数据源----------

```
<asp:EntityDataSource ID="dsAthleteInfo" runat="server" ConnectionString="name=MBSCEntities"
    DefaultContainerName="MBSCEntities"
    EnableFlattening="False" EntitySetName="utathleteinfoes" AutoPage="true">
</asp:EntityDataSource> 
```

-----------改变DropDownList选择时对网格数据的“过滤”-----

```
protected void ddlTeams_IndexChanged(object sender, EventArgs e)
{
    if (ddlTeams.SelectedIndex > 0)
        dsAthleteInfo.Where = "it.SportUid = " + ddlTeams.SelectedIndex.ToString();
    else
        dsAthleteInfo.Where = "it.SportUid >= 0";

    dsAthleteInfo.DataBind();
} 
```

# android - Utils.bitmapToMat 崩溃的应用程序

> ID：13824131
> 
> 赞同：4
> 
> 时间：2012-12-11T16:21:18.707
> 
> 标签：android, opencv

我正在尝试将 bmp 文件转换为 Mat，然后将其转换为灰度。但我无法让它工作。这是我所拥有的：

```
String filename = "/mnt/sdcard/DCIM/01.bmp";    
Bitmap bmp = BitmapFactory.decodeFile(filename);
Mat imgToProcess = null;

Utils.bitmapToMat(bmp, imgToProcess); 
```

但是每当使用最后一行时，应用程序就会崩溃（其余时间它会继续正常运行）。

其余的代码将是：

```
Imgproc.cvtColor(imgToProcess, imgToProcess, Imgproc.COLOR_BGR2GRAY);
Imgproc.cvtColor(imgToProcess, imgToProcess, Imgproc.COLOR_GRAY2RGBA, 4);
Utils.matToBitmap(imgToProcess, bmp); 
```

我不知道这是否有效，因为我无法从代码的早期部分将文件转换为 Mat 。查看 Utils 的文档（在[此处](http://docs.opencv.org/java/org/opencv/android/Utils.html)找到）我正在正确使用它，但它仍然无法正常工作。

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:27:00.507

换线：

```
Mat imgToProcess = null; 
```

对此：

```
Mat imgToProcess = new Mat(); 
```

或这个：

```
 Mat imgToProcess = new Mat(bmp.getHeight(), bmp.getHeight(), CvType.CV_8UC4); 
```

* * *

你为什么不直接使用[`Highgui.imread`](http://docs.opencv.org/java/org/opencv/highgui/Highgui.html#imread%28java.lang.String%29)呢？

```
Mat imgToProcess = Highgui.imread(filename); 
```

# django - 使用自定义用户登录时出现“未知密码哈希算法”

> ID：13824132
> 
> 赞同：2
> 
> 时间：2012-12-11T16:21:23.243
> 
> 标签：django

我通过继承创建了一个自定义用户模型`django.contrib.auth.models.User`，并将其添加到我的管理员中。`MyUser`当我从管理员创建实例时，我有两个（相关）问题：

1-在管理员中，普通密码（未加密）显示在`password`字段中

2-当我尝试使用实例登录我的管理员时`MyUser`，我得到

```
Unknown password hashing algorithm '<mypassword>'. Did you specify it in the PASSWORD_HASHERS setting 
```

这是一个错误吗？我该如何解决？（我正在使用 Django 1.4.2）

**模型.py**

```
from django.contrib.auth.models import User

class MyUser(User):
    number = models.IntegerField() 
```

**管理员.py**

```
class MyUserAdmin(admin.ModelAdmin):
    pass

admin.site.register(MyUser, MyUserAdmin) 
```

**编辑**

使用以下密码设置正确，但是当我想`MyUser`从管理员修改某些实例时，密码被清除，我必须再次设置它：

```
class MyUserAdminForm(forms.ModelForm):

    class Meta:
        model = MyUser

    def __init__(self, *args, **kwargs):
        super(MyUserAdminForm, self).__init__(*args, **kwargs)
        self.fields['password'].widget = forms.PasswordInput()

    def save(self, commit=True):
        user = super(MyUserAdminForm, self).save(commit=False)
        user.set_password(self.cleaned_data["password"])
        if commit:
            user.save()
        return user

class MyUserAdmin(admin.ModelAdmin):
    form = MyUserAdminForm

admin.site.register(MyUser, MyUserAdmin) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:10:24.947

发生这种情况是因为您没有在表单上正确设置密码。

应使用`set_password()`方法[https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.set_password设置 Django auth 用户密码](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.set_password)

通常，用户管理表单上的保存方法会处理此问题，但由于您已经创建了自己的表单，因此您必须自己执行此操作。这是您在管理表单上需要的保存方法的示例：

```
def save(self, commit=True):
    user = super(UserCreationForm, self).save(commit=False)
    user.set_password(self.cleaned_data["password"])
    if commit:
        user.save()
    return user 
```

编辑：虽然这是您遇到此错误的原因，但我同意史蒂夫的观点，即您应该使用用户配置文件和此处的说明：[https ://docs.djangoproject.com/en/1.4/topics/auth/#storing-关于用户的附加信息](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)

或者，如果您可以等到 django 1.5 出来，它有一个可配置的用户模型：[https ://docs.djangoproject.com/en/dev/releases/1.5-beta-1/#configurable-user-model](https://docs.djangoproject.com/en/dev/releases/1.5-beta-1/#configurable-user-model)

编辑 2：这正是您需要使用正确密码保存的内容：

**表格.py**

```
class MyUserAdminForm(forms.ModelForm):
    password1 = forms.CharField(widget=forms.PasswordInput)

    class Meta:
        model = MyUser

    def save(self, commit=True):
        user = super(MyUserAdminForm, self).save(commit=False)
        user.set_password(self.cleaned_data["password"])
        if commit:
            user.save()
        return user 
```

**管理员.py**

```
class MyUserAdmin(admin.ModelAdmin):
    form = MyUserAdminForm

admin.site.register(MyUser, MyUserAdmin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:03:57.223

我建议您采用稍微不同的方法来扩展 User 类。

Django`User Profiles`用作一种简单的方法来存储有关用户的附加信息。

你可以在你的新类中做一个一对一的字段，这将允许信息只链接到一个用户。

```
class MyUser(User):
    user = models.OneToOneField(User)

    #additional fields
    number = models.IntegerField() 
```

文档可以在[这里](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)找到- 让您也可以在管理部分使用它

# php - 时间戳到 yyyymmdd hhmm 但只保留 hhmm

> ID：13824138
> 
> 赞同：0
> 
> 时间：2012-12-11T16:21:37.507
> 
> 标签：php, date, format, timestamp, string-formatting

我在数据库中有一个时间戳。使用以下代码，我可以将其格式化为正确的日期：

```
 $datefrom=mysql_real_escape_string($record['projectdatefrom']);
    $date1 = date("Y/m/d", $datefrom); 
```

然后我给输入字段`value="$date1`.

现在我有另一个字段`H:i`，所以我想让它们彼此分开。

我可以剪掉的`Y/m/d`并且`$date1`只返回`H:i`吗？

正在尝试做这样的事情： `$datetest = date("H:i", $datefrom);`但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:25:07.470

`$datefrom`将需要是 UNIX 时间戳。`strtotime()`可用于生成纯文本或 MySQL 样式的日期字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:26:49.870

从数据库返回后，无需对字符串进行转义。

所以：

```
$date = date("Y/m/d", strtotime($record['projectdatefrom']));
$time = date("H:i", strtotime($record['projectdatefrom'])); 
```

或使用`DateTime`：

```
$dt = new DateTime($record['projectdatefrom']);
$date = $dt->format('Y/m/d');
$time = $dt->format('H:i'); 
```

# java - Eclipse中Java工作集和Resource工作集的区别

> ID：13824141
> 
> 赞同：35
> 
> 时间：2012-12-11T16:21:43.030
> 
> 标签：java, eclipse

Eclipse 中的*Java 工作集*和*Resource 工作集*有什么区别？

*Resource 工作集*更通用，它不仅可以包括 Java 应用程序/项目，但让我这样说：

让我们假设 Java 开发人员的日常生活。您是否建议他/她使用*资源工作集*而不是*Java 工作集？*是否有任何特定情况下您更喜欢其中一种？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T20:35:37.447

听起来这应该回答了这个问题：

*   [http://www.avajava.com/tutorials/lessons/what-is-a-working-set-and-how-do-i-use-it.html](http://www.avajava.com/tutorials/lessons/what-is-a-working-set-and-how-do-i-use-it.html)

> 工作集是 Eclipse 项目的子集。您可以创建不同的工作集，然后选择要在导航器视图中显示的工作集。

具体来说：

1.  “工作集”（在此特定上下文中）是“Eclipse 事物”

2.  Eclipse 工作集的目的是帮助组织您的项目

3.  一个项目由“东西”组成：源代码、位图图形文件、WSDL、CSS 样式表——几乎任何可以想象的东西。

4.  因此，Eclipse 项目被组织（例如，看看我的 J2EE 透视图）成“src”、“WebContent”、“Services”等小节。项目本身可以是许多不同类型之一：“Java 项目”、“Java Swing 设计项目”和“动态 Web 项目”等等。

5.  类似地，Eclipse 工作集可以是以下几种不同类型之一：“Java 工作集”、“断点工作集……和“资源工作集”。

6.  与 Eclipse“视图”和“透视图”一样，您通常可以随时访问所需的任何项目资源。选择一个或另一个透视图只会使对象（例如“问题窗格”或“构建列表”）更容易获得.

7.  你选择哪种“工作集”——或者你是否使用工作集——很大程度上只是个人喜好和方便的问题。

如果您还有其他问题，请告诉我们。

PS：附加链接：

> [https://www.ibm.com/developerworks/library/os-eclipse-visualstudio/](https://www.ibm.com/developerworks/library/os-eclipse-visualstudio/)
> 
> 如前所述，许多开发人员将他们所有的项目加载到一个 Eclipse 工作区中。这很方便，但有时会造成太多混乱。除了关闭不必要的项目之外，您还可以定义工作集：元素组（项目、文件夹、类等）。Eclipse 可以在不同的视图（如包资源管理器）和操作（如搜索）中使用工作集。

...和：

[help.eclipse.org：工作集](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcworkset.htm)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-21T16:03:16.817

eclipse 上下文中的工作集是相关项目的逻辑分组，以简化 IDE 中的搜索和组织视图。

资源工作集可以捕获所有类型的资源——可能是 java 源代码、html、xml、javascript、图像——工作集中包含的项目范围内存在的任何东西。

Java 工作集是一个不同的工作集（它不是资源工作集的子集！），它只捕获那些属于源文件夹并被编译到类路径中的 java 文件，或者那些属于构建路径中的模块（库）。因此，它可以让您查找类路径中的 java“类”。请注意，您项目中的所有 java 文件可能不一定都构建到类路径中（例如，当您排除 java 源文件时，它不再被构建）。但是资源工作集仍然可以检测到未包含在类路径中的 java 源文件（您会注意到包含的 java 源文件的图标是实心 J，而对于排除的 java 源，它是空心的J)。

示例：假设您有两个项目 p1 和 p2，其中 p1 属于工作集，但 p2 不属于。所以：

MyClass.java（属于 p1 并包含在构建路径中）- 显示在 java 类型搜索 (Ctrl + T) 和资源搜索 (Ctrl + R) 中。

MyOtherClass.java（属于 p2 并包含在构建路径中） - 不会出现在 java 类型搜索或资源搜索中。

MyExcludedClass.java（属于 p1 并从构建路径中排除） - 不显示在 java 类型搜索中，但显示在资源搜索中。

MyExcludedClass.class（属于 p1 的构建路径中的依赖 jar） - 显示在 java 类型搜索中，但不显示在资源搜索中。

MyWebPage.html（属于 p1） - 不显示在 java 工作集中，但显示在资源工作集中。

MyOtherWebPage.html（属于 p2） - 不显示在 java 类型搜索或资源搜索中。

MyConfig.xml（属于 p1） - 不显示在 java 类型搜索中，但显示在资源搜索中。

因此，在 Java 开发人员使用的上下文中：我使用 Java 工作集来查找在 Java 中定义的类型/类，而资源工作集来查找所有不同的类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T09:36:21.047

工作集是工作区的子集，是组织所有项目的一种方式。对于不同类型的工作集，您还可以使用[此处描述](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/cworkset.htm)的不同类型的编辑向导。

**编辑向导**

对于 java 项目，Java 工作集是一种更舒适的工作方式。假设您在一个 java 工作集中有一堆 java 项目，并且您刚刚打开了 Java 工作集的编辑向导：

首先，您可以在右表中看到当前工作集中的所有内容。如果您现在想要包含另一个项目，您只需选择项目并按`CTRL`+即可`a`。要删除项目，您可以按`CTRL`+`r`

在资源工作集的属性中，您不知道工作集中有什么，直到您滚动到树视图的底部。对于工作空间中拥有 300 多个项目的人来说，这是不可能的。

**结构**

拥有两种类型的工作集的一个好处是*结构*。在日常工作流程中，有不同类型的工作集很有用，因为它们有不同的图标。如果你有像配置文件这样的资源，你可以创建一个名为“配置文件”的资源工作集并将所有文件放在那里。

之后，您可以打开文件搜索并在配置文件中进行搜索。这是可能的，因为您可以将工作集定义为搜索范围。

![在此处输入图像描述](../Images/4d563a94f40c909fd6e51ac11f7299ec.png)

在 Eclipse 中有几个部分，您可以使用[Select working set 对话框](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/wrkAdv_workingsets.htm)来选择您的工作集。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-16T18:37:57.323

工作集之间的一个区别是它们提供了不同的编辑向导（如此处所述：http: //help.eclipse.org/helios/index.jsp?topic= [%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcworkset .htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcworkset.htm)）。如果您分别编辑资源工作集和 java 工作集，您将看到它们使用不同的屏幕来选择包含哪些资源/项目。

除此之外，我没有发现任何其他区别。您可以以任何方式选择哪些资源似乎也没有什么不同。因此，要回答您的问题，我会回答“没关系”，因为它们的行为方式相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-10T13:32:27.747

我将尝试从插件开发人员的角度回答。从[API](https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2FIWorkingSet.html)：

> 工作集旨在对元素进行分组以呈现给用户或对一组元素进行操作。

这可以是任何类型的元素，而不必是一个项目。工作集由插件提供，插件可以决定可以添加什么样的元素，并提供添加元素的向导以及可以执行的操作。

对于它所在的工作集的项目来说并不重要。如果Java项目在资源工作集中，它仍然是Java项目。它只影响过滤某些类型的工作集的某些视图、对话框和操作。

除了*Java*和*Resource*工作集之外，还有*Breakpoint*、*Task*、*Plugin*和*C/C++*工作集（当然取决于您的 Eclipse 设置）。一些视图只显示某些类型的工作集，而其他视图似乎没有过滤它们。例如，“打开类型”和“打开资源”对话框似乎显示了所有类型的工作集。“打开任务”对话框仅显示任务工作集。

那么 Java 和 Resource 工作集之间的实际区别是什么？我还没有看到任何功能差异。所有标准视图和对话框要么似乎处理这两种工作集类型，要么都不处理。大多数插件似乎根本不关心区别 - 但这并不意味着某些插件*可以*不同地处理这两种类型。

另一方面，资源工作集似乎是任何类型项目的包罗万象，因此大多数插件在这里没有区别是有道理的。例如，如果我要创建一个插件来提供分析 Java 项目的选项，我会将该操作添加到 Java 工作集的上下文菜单中，但肯定不会添加到 C/C++ 工作集。但是有些人可能会使用资源工作集，因为他们在同一个工作集中同时拥有 Java 和 C 项目。因此，我也必须将特定于 Java 的操作添加到资源工作集的上下文菜单中。

# java - 什么是抽象类和抽象方法？

> ID：13824142
> 
> 赞同：42
> 
> 时间：2012-12-11T16:21:48.277
> 
> 标签：java, oop

> **可能重复：**
> [Java 中的抽象类](https://stackoverflow.com/questions/1320745/abstract-class-in-java)

我得到了几个解释，但到目前为止我无法理解 Java 中的抽象类和方法是什么。

一些人说它必须与程序的安全性有关，另一些人说它不是那样的。

即使从迪特尔和迪特尔的书中，我也没有明白它的目的。我们何时、何地以及为什么使用它？

请像教初学者一样解释它，我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-11T16:38:06.263

**-** `Abstract class`是一个**不能被实例化**的，即**它** `object` **不能被创建。**

**-** `Abstract method`是**没有定义的方法声明**。

**-** A`Non-abstract class`只能**有非抽象方法。**

**-** An`Abstract class`可以**同时具有非抽象和抽象方法。**

**- 如果**有`Class`那么`Abstract method` **类也必须是抽象的。**

**-****必须由第一个非抽象子类实现**。`Abstract method`

 ****-** `Abstract class` in`Design patterns`用于**封装不断变化的行为。**

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-12-11T16:24:39.367

抽象类是不能实例化的类。它的唯一目的是扩展其他类。

抽象方法是抽象类中的方法（必须声明为抽象），这意味着扩展的具体类必须覆盖它们，因为它们没有主体。

抽象类的主要目的是如果您有在子类中使用的通用代码，但抽象类不应该有自己的实例。

您可以在此处阅读有关它的更多信息：[抽象方法和类](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-11T16:28:42.677

抽象方法是没有主体的方法签名声明。例如：

```
public abstract class Shape {
    . . .

    public abstract double getArea();
    public abstract double getPerimeter();
} 
```

方法`getArea()`和`getPerimeter()`是抽象的。因为`Shape`该类有一个抽象方法，所以也*必须*声明它`abstract`。也可以在`abstract`没有任何抽象方法的情况下声明一个类。当一个类是抽象类时，不能创建它的实例；只能创建（具体）子类的实例。具体类是未声明为抽象的类（因此没有抽象方法并实现所有继承的抽象方法）。例如：

```
public class Circle extends Shape {
    public double radius;
    . . .

    public double getArea() {
        return Math.PI * radius * radius;
    }

    public double getPerimeter() {
        return 2.0 * Math.PI * radius;
    }
} 
```

这样做的原因有很多。一种方法是编写一种对所有形状都相同但取决于该`Shape`级别未知的形状特定行为的方法。例如，可以编写以下方法：

```
public abstract class Shape {
    . . .

    public void printArea(PrintStream out) {
        out.println("The area is " + getArea());
    }
} 
```

诚然，这是一个人为的例子，但它显示了基本思想：根据未指定的行为定义具体行为。

拥有抽象类的另一个原因是您可以部分实现接口。接口中声明的所有方法都作为抽象方法被任何实现该接口的类继承。有时您想在类中提供接口的部分实现，并将细节留给子类；部分实现必须声明为抽象的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-11T16:33:34.993

**抽象方法**没有主体。定义明确的方法不能声明为抽象的。

具有**抽象方法**的**类**必须**声明为 abstract**。

 ******抽象类不能被实例化。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T16:26:56.190

抽象类是不能从中创建对象的类，因此它主要用于继承。（我不确定您是否可以在其中包含静态方法）

抽象方法是子类必须重写的方法，它没有主体，被标记为抽象，只有抽象类才能拥有这些方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T16:27:42.380

使用抽象类，您可以为其他类扩展某种骨架。

你不能实例化它们，但你可以放置一些通用的实现，你可以在扩展它们的类中使用它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T16:29:26.593

一旦你了解了抽象在 Java 中的含义，你会问：他们为什么把它放进去？Java 可以在没有抽象的东西的情况下工作，但它构成了某种 OO 风格或词汇的一部分。确实存在抽象类或方法是表达程序作者意图的优雅方式的情况。大多数情况下，您正在编写将被其他人使用的框架或库。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-12-11T16:25:29.653

[抽象类和抽象方法完整描述通过它](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

抽象方法没有主体。定义明确的方法不能声明为抽象的。

具有抽象方法的类必须声明为抽象。

抽象类不能被实例化。******

# windows-8 - windows8开始屏幕的（-）按钮代码

> ID：13824147
> 
> 赞同：0
> 
> 时间：2012-12-11T16:22:00.303
> 
> 标签：windows-8, startup

单击@“-”符号出现在图像突出显示的部分上出现@ [http://www.freeimagehosting.net/2qjtc](http://www.freeimagehosting.net/2qjtc)

屏幕变为图像@ [http://www.freeimagehosting.net/8311b](http://www.freeimagehosting.net/8311b)

我想在我的应用程序中使用相同的功能。

谁能告诉我 2 如何使用此功能。

sry fr 提供图片的网址，[由于声誉较低，我无法发布图片]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:31:59.987

这是语义缩放。

您需要为您的应用程序创建两个不同的视图，并将它们插入`<SemanticZoom>`到 XAML 的标记中。

您的应用程序的现有视图是放大视图。

```
<SemanticZoom>

<SemanticZoom.ZoomedOutView>
    <!-- Put the GridView for the zoomed out view here. -->   
</SemanticZoom.ZoomedOutView>

<SemanticZoom.ZoomedInView>
    <!-- Put the GridView for the zoomed in view here. -->       
</SemanticZoom.ZoomedInView> 
```

# php - PHP 约定 - 条件赋值

> ID：13824149
> 
> 赞同：0
> 
> 时间：2012-12-11T16:22:03.777
> 
> 标签：php, coding-style

我一直在寻找正确的 PHP 约定用于条件分配。

```
<?php
if(false !== ($var = something())) {
  ...
}

// or

if(($var = something()) !== false) {
  ...
} 
```

通常我将第一个解决方案用于我不想用太多代码弄乱的小方法，但我的一些同事以另一种方式使用它。什么是正确的使用，为什么？

我知道在功能上它根本不重要，我只是要求对约定进行启发。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:23:51.737

按照代码库的方式进行。不要成为那种将自己的偏好注入与规范相冲突的集体的人。

# asp.net-mvc - 将 ASP.NET MVC 应用程序与 OpenAM 集成

> ID：13824150
> 
> 赞同：3
> 
> 时间：2012-12-11T16:22:03.653
> 
> 标签：asp.net-mvc, openam

是否有人拥有或知道任何将**ASP.NET MVC**应用程序与**OpenAM**集成的示例？我有一个使用**ASP.NET MVC 2**部署的应用程序，其中使用表单身份验证执行身份验证，我需要通过 OpenAM使用**单点登录更改为身份验证。**我一直在寻找来自 .NET 的 OpenAM 集成的代码示例，但到目前为止我几乎一无所获。一个代码示例将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:38:32.117

如果你想通过 SAML 协议来完成这个场景，那么它是没有问题的。您必须在 Tomcat Appache 服务器上下载并安装 OpenAM。配置它。然后在[.Net Fedlet](http://openam.forgerock.org/openam-documentation/openam-doc-source/doc/dev-guide/index/chap-fedlet-dotnet.html)页上，您可以找到有关 .Net Fedlet 的详细信息。那是在 .Net 上编写的库集和应用程序示例，如何调整您的 asp.net 应用程序以定位 OpenAM 服务器。该库支持您的 Web 应用程序中的 SAMLP。

我正在寻找但尚未找到的是相同的场景，但通过 WS-Federation 并使用 WIF。如果我发现我会在这里写它。

# php - 根据发布请求选择选择列表

> ID：13824151
> 
> 赞同：0
> 
> 时间：2012-12-11T16:22:09.250
> 
> 标签：php, html

拜托，我对 php 有点陌生，请多多包涵。我有一个选择框...

```
<select name="criteria">
        <option value="1">Student ID</option>
        <option value="2">Firstname </option>
        <option value="3">Lastname</option>
        <option value="6">All</option>
    </select>

    <input name="searchvalue" type="text">
    <input name="search" type="submit" value="Search"> 
```

当我使用特定选项搜索时，在发布请求之后，所选选项通常默认为学生 ID。但我希望它仍然是我搜索的选项。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:32:22.140

老实说，我会稍微调整您的选择代码，以便进行更多动态编辑。

```
<?php 
$options = array('1'=>'Student ID', '2'=>'Firstname', '3'=>'Lastname', '6'=>'All');     
?>

<select name="criteria">

<?php 
foreach($options as $key=>$value){
    $addtItem = '';
    if(isset($_POST['criteria']) && $_POST['criteria']==$key){
        $addtItem = 'selected="selected"';
    }
    echo('<option '.addtItem.' value="'.key.'">'.$value.'</option>');
}

?>

</select> 
```

通过这种方式，您可以快速添加更多值，而无需大量重复代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:25:15.280

```
<select name="criteria">
    <option value="1" <?php if ($_POST["criteria"] == 1) echo "SELECTED"; ?>>Student ID</option>
    <option value="2" <?php if ($_POST["criteria"] == 2) echo "SELECTED"; ?>>Firstname </option>
    <option value="3" <?php if ($_POST["criteria"] == 3) echo "SELECTED"; ?>>Lastname</option>
    <option value="6" <?php if ($_POST["criteria"] == 6) echo "SELECTED"; ?>>All</option>
</select> 
```

真的很丑，但那行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:26:07.790

需要检查`$_POST`数组并选择对应的select项

```
<?php 
$criteria = isset($_POST['criteria']) ? $_POST['criteria']: 0; 
?>
<select name="criteria">
    <option value="1" <?php echo ($criteria == '1') ? 'selected="selected"': ''; ?>>Student ID</option>
    <option value="2" <?php echo ($criteria == '2') ? 'selected="selected"': ''; ?>>Firstname </option>
    <option value="3" <?php echo ($criteria == '3') ? 'selected="selected"': ''; ?>>Lastname</option>
    <option value="6" <?php echo ($criteria == '6') ? 'selected="selected"': ''; ?>>All</option>
</select> 
```

# jquery - 动态加载的文本不在 div 内

> ID：13824152
> 
> 赞同：0
> 
> 时间：2012-12-11T16:22:14.950
> 
> 标签：jquery, css, dynamic, append

我有很多动态加载的内容，出于某种原因，图像做得很好，但链接和文本却不是。

这是一个有问题的 JSFiddle：http: [//jsfiddle.net/HRs3u/1/](http://jsfiddle.net/HRs3u/1/)

我猜它与文本缓存或不缓存有关？

这是代码的附加部分：

```
function findpost(timestamp, blog){
    //console.log(blog);
    var length = blog.length;
    for(var e=0; e<length; e++){
        var type = blog[e+1];
        if(timestamp === blog[e]){
            if(type === 0){
                $("#content").append("\
                    <div class='post photo'>\
                    <img src='"+blog[e+2]+"' width='400px'/>\
                    </div>"
                );
            } else if(type === 1){
                $("#content").append("\
                    <div class='post video'>\
                    "+blog[e+2]+"<br>\
                    "+blog[e+3]+"\
                    </div>"
                );
                console.log("Video");
            } else if(type === 2){
                $("#content").append("\
                    <div class='post link' />\
                    <a href='"+blog[e+2]+"' target='_blank'>"+blog[e+3]+"</a>\
                    </div>\
                ");
                console.log("Link!");
            } else if(type === 3){
                var title = blog[e+3];
                var text = blog[e+2];
                $("#content").append("\
                    <div class='post text' />\
                    <h2>"+title+"</h2>\
                    "+text+"\
                    </div>\
                ");
                console.log("Text!");
            } else if(type === 4){
                $("#content").append("\
                    <div class='post tweet' />\
                    "+blog[e+2]+"\
                    </div>\
                ");
                console.log("Tweet!");
            } else {
                console.warn("ERROR!");
            }
        }
    }
} 
```

和CSS：

```
/*___Post Divs*/
.post{
    display     : inline-block;
    float       : left;
    line-height : 0;
    margin      : 5px;
    overflow    : hidden;

    border      : 1px solid #000;

    width       : 400px;
    height      : 400px;

}

.post.photo{
    background-color: #ccc;
}

.post.video{
    background-color: #0f1;
}

.post.link{
    background-color: #ff4;
}

.post.text{
    background-color: #c0f;
}

.post.tweet{
    background-color: #f44;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:24:01.190

这是因为在某些 append 方法中，您预先关闭了 div。检查 type 等于 2、3 和 4 的脚本。

```
function findpost(timestamp, blog){
    //console.log(blog);
    var length = blog.length;
    for(var e=0; e<length; e++){
        var type = blog[e+1];
        if(timestamp === blog[e]){
            if(type === 0){
                $("#content").append("\
                    <div id='post' class='photo'>\
                    <img src='"+blog[e+2]+"' width='400px'/>\
                    </div>"
                );
            } else if(type === 1){
                $("#content").append("\
                    <div id='post' class='video'>\
                    "+blog[e+2]+"<br>\
                    "+blog[e+3]+"\
                    </div>"
                );
                console.log("Video");
            } else if(type === 2){
                $("#content").append("\
                    <div id='post' class='link'>\ 
                    <a href='"+blog[e+2]+"' target='_blank'>"+blog[e+3]+"</a>\
                    </div>\
                ");
                console.log("Link!");
            } else if(type === 3){
                var title = blog[e+3];
                var text = blog[e+2];
                $("#content").append("\
                    <div id='post' class='text'>\
                    <h2>"+title+"</h2>\
                    "+text+"\
                    </div>\
                ");
                console.log("Text!");
            } else if(type === 4){
                $("#content").append("\
                    <div id='post' class='tweet'>\
                    "+blog[e+2]+"\
                    </div>\
                ");
                console.log("Tweet!");
            } else {
                console.warn("ERROR!");
            }
        }
    }
}​ 
```

# css - 子元素继承宽度问题

> ID：13824154
> 
> 赞同：-2
> 
> 时间：2012-12-11T16:22:19.550
> 
> 标签：css, margin

所以我遇到了这个奇怪的问题，我在容器中有一个元素，它从容器继承了宽度。

为了尝试解决这个问题，我只需将 CSS 宽度属性设置为我想要的任何值。当我在浏览器中预览时，它已经正确调整了宽度，但它现在已经扩展了右边距以填充容器。

我试图通过执行诸如 margin-right: 0; 之类的事情来抵消这一点。或使用负值，但没有任何效果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:38:33.387

孩子的宽度永远不会从父母那里继承（父母指定的确切值）！但是，它**取决于**父级的宽度。如果您在父级上指定宽度并有一个块级子级，它将始终扩展为父级宽度的 100%。这是完全正常的行为。

如果您在子元素上设置显式宽度，则必须注意，它的*填充和边框*不计入总宽度（使用标准框模型）。你有两个选择：

*   考虑填充
*   改变盒子模型

的CSS：

```
#parent{
   width:100px;
}
#child{
   padding:10px;
   width:100px;   /* child will be 20px too wide */
}
/*method 1*/
#child{
   padding:10px;
   width:80px;   /* child will fit perfectly: 80px +10px + 10px */
}
/* method 2*/
#child{
   padding:10px;
   width:100px;
   box-sizing:border-box;      /* child will fit perfectly
                               width now includes content and padding */
   -moz-box-sizing:border-box; /* for compatibility*/
   -webkit-box-sizing:border-box;
} 
```

但是请注意，这`box-sizing`是一个较新的 css 属性，并不是每个浏览器都可以处理它。

# magento - Magento 1.7 : 在发票 pdf 上设置实时

> ID：13824155
> 
> 赞同：1
> 
> 时间：2012-12-11T16:22:23.293
> 
> 标签：magento, pdf-generation, magento-1.7

我需要在 pdf 发票上插入实时。我尝试修改 app/code/core/Mage/Sales/Model/Order/Pdf 文件，但我没有成功

目前只显示日/月，我需要显示日/月---小时：分钟

对不起我的英语。

# forms - Rails 回形针，编辑表单 file_field 未分配

> ID：13824156
> 
> 赞同：8
> 
> 时间：2012-12-11T16:22:23.687
> 
> 标签：forms, ruby-on-rails-3.1, paperclip-validation

在我的模型中，我使用回形针将头像附加到我的用户身上：

```
has_attached_file :avatar, 
    :styles => {square_tiny: '50x50#', square_small: '100x100#', square: '200x200#'} 
```

我有一个表格

```
<%= form_for(@user_profile, 
        :url => { :controller => :user_profiles, :action => :update_general_info, :id => @user_profile.id }, 
            :html => {  :multipart => true, 
                :class=> "form-horizontal" }) do |f| %>

            <div class="control-group">
              <%= f.label :avatar, :class => "control-label" %>
                <div class="controls">
                    <%= f.file_field :avatar  %>
                </div>
            </div>

....

<% end %> 
```

上传完美，但我回来编辑我的用户，文件字段显示“未选择文件”。而且由于我正在验证该头像的存在，因此每次用户编辑他的详细信息时，他都必须再次上传他的头像......

我该如何解决这个问题？

我认为这`:multipart => true`会有所帮助，但它没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:59:24.823

页面绝对没有为文件字段设置值的好方法，这是出于安全原因。

如果浏览器允许页面或 JS 脚本为文件字段设置值，这将允许恶意页面使用某些系统或密码文件预设文件字段值。这将是一个巨大的安全漏洞。

在这种情况下，我所做的是将已保存的文件显示为用户可以单击下载的链接。然后，您可以提供要删除的少量 AJAX 链接（使用 AJAX 调用删除文件并将链接替换为新的文件输入）和替换（将链接替换为文件输入）。

您的最后一个选择是使用 AJAX 上传文件。如果您使用 AJAX 进行文件上传，您将 POST 到隐藏框架，因此文件输入将保持其选定的值。无论哪种方式，请记住，对文件字段值的任何更改都必须由用户发起。

# google-apps-script - 如何使 SubmitButton 的样式与 Google App Script UI 中的 Button 样式一致？

> ID：13824158
> 
> 赞同：0
> 
> 时间：2012-12-11T16:22:27.807
> 
> 标签：google-apps-script

我正在通过代码构建一个 UI 表单（不使用 UI Builder），我注意到 SubmitButton 类的样式与 Button 类的外观不一致。您是否知道任何方法来调整 Button 类或 SubmitButton 类的外观以使它们相似。

我注意到 Button 有一个调用 setStylePrimaryName、setStyleName 等......但文档含糊不清 - 说：“这对调试很有用”！！！

有什么建议吗？

请参见下面的屏幕截图，第一个按钮是 Button 类，第二个按钮是 SubmitButton。你可以看到他们甚至没有对齐。

![屏幕截图](../Images/15a134ad4557018a4b476bf466062d5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:35:06.157

您可以按照您想要的方式设置（按钮）`setStyleAttribute`

```
var _btn= {
    "background-color":"none",
    "background":"none",
    "width":"80px",
    "height":"24px",
    "border":"None",
    "font-family":"hobo std",
    "font-size":"0.9em",
    "color":"3f3f3f",
    "opacity":"1",
}
....
....
  var closeb = app.createButton("Submit");
  library.applyCSS(submit,_btn);
....
.... 
```

在你的图书馆里你有这个功能（[詹姆斯费雷拉](https://sites.google.com/site/scriptsexamples/gs-interactive)的学分）

```
function applyCSS(element, style){
  for (var key in style){
    element.setStyleAttribute(key, style[key]); 
  }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T02:39:48.907

我通过在同一个表单中使用多个提交按钮解决了这个外观难题。我尝试了 CSS sans 的成功；提交和重置按钮是按钮小部件世界中的两个独特的野兽。 [这是一些工作代码](http://pastebin.com/pX5P1NcA) ，演示了一个多页表单，其中每个页面使用三个`submitButton's`来来回移动执行多个`doPost()'s`.

```
// Muliple page form using Google Apps Script

function doGet(eventInfo)  {return GUI(eventInfo)};
function doPost(eventInfo) {return GUI(eventInfo)};

function GUI (eventInfo) {
  var n = (eventInfo.parameter.state == void(0) ? 0 : parseInt(eventInfo.parameter.state));
  var ui = ((n == 0)? UiApp.createApplication() : UiApp.getActiveApplication());
  var Form;
  switch(n){
    case 0: {
      Form = getForm(eventInfo,n); // Use identical forms for demo purpose only
    } break;
    case 1: {
      Form = getForm(eventInfo,n); // In reality, each form would differ but...
    } break;
    default: {
      Form = getForm(eventInfo,n) // each form must abide by (implement) the hidden state variable
    } break;
  }
  return ui.add(Form);
};

function getForm(eventInfo,n) {
  var ui = UiApp.getActiveApplication();

  // Increment the ID stored in a hidden text-box
  var state = ui.createTextBox().setId('state').setName('state').setValue(1+n).setVisible(true).setEnabled(false);
  var H1 = ui.createHTML("<H1>Form "+n+"</H1>");
  var H2 = ui.createHTML(
    "<h2>"+(eventInfo.parameter.formId==void(0)?"":"Created by submission of form "+eventInfo.parameter.formId)+"</h2>");

  // Add three submit buttons to go forward, backward and to validate the form
  var Next = ui.createSubmitButton("Next").setEnabled(true).setVisible(true);
  var Back = ui.createSubmitButton("Back").setEnabled(n>1).setVisible(true);
  var Validate = ui.createSubmitButton("Validate").setEnabled(n>0).setVisible(true);
  var Buttons = ui.createHorizontalPanel().add(Back).add(Validate).add(Next);
  var Body = ui.createVerticalPanel().add(H1).add(H2).add(state).add(Buttons).add(getParameters(eventInfo));
  var Form = ui.createFormPanel().setId((n>0?'doPost[':'doGet[')+n+']').add(Body);

  // Add client handlers using setText() to adjust state prior to form submission
  // NB: Use of the .setValue(val) and .setValue(val,bool) methods give runtime errors!
  var onClickValidateHandler = ui.createClientHandler().forTargets(state).setText(''+(parseInt(n)));
  var onClickBackHandler = ui.createClientHandler().forTargets(state).setText(''+(parseInt(n)-1));
  Validate.addClickHandler(onClickValidateHandler);
  Back.addClickHandler(onClickBackHandler);

  // Add a client handler executed prior to form submission
  var onFormSubmit = ui.createClientHandler()
  .forTargets(state).setEnabled(true) // Enable so value gets included in post parameters
  .forTargets(Body).setStyleAttribute("backgroundColor","#EEE");    
  Form.addSubmitHandler(onFormSubmit);

  return Form;
}

function getParameters(eventInfo) {
  var ui = UiApp.getActiveApplication();
  var panel = ui.createVerticalPanel().add(ui.createLabel("Parameters: "));
  for( p in eventInfo.parameter)
    panel.add(ui.createLabel(" - " + p + " = " + eventInfo.parameter[p]));
  return panel;
} 
```

该代码使用单个“隐藏”状态（此处以 a 可视化`TextBox`）和多个`SubmitButton`'s 来允许用户在表单序列中前进和后退，以及验证表单的内容。两个额外`SubmitButton`的 ' 使用`ClientHandler`' 重新连接，在表单提交之前简单地修改隐藏状态。

**笔记**

*   请注意`.setText(value)`在客户端处理程序中使用该方法。使用 Chrome 浏览器，如果我切换到`TextBox`'s`.setValue(value)`或`.setValue(value, fireEvents)`方法中的任何一个，我会收到奇怪的运行时错误。

*   `Script Property`我尝试（未成功）使用 a而不是隐藏的 TextBox来实现此逻辑。这需要使用服务器处理程序而不是客户端处理程序。行为不稳定，向我暗示异步服务器端事件是在表单提交事件之后发生的。

# asp.net-mvc-3 - 从 url 解析动态参数

> ID：13824159
> 
> 赞同：0
> 
> 时间：2012-12-11T16:22:31.470
> 
> 标签：asp.net-mvc-3, design-patterns, model-binding, specifications

在测试项目中，我尝试学习规范模式以及如何在在线商店中使用它。产品规格按类别分组，例如：颜色（蓝色、有色等）、高度（100 厘米、200 厘米等）。根据产品中选择的类别添加到产品中的规格。在我读过的所有文章中，动作中的规范被称为参数。但是，如果在我的测试项目中动态添加了规范，我不知道如何节省它。例如，我有这个控制器动作：

```
 public ActionResult Products(string category, 
        string[] specificationNameValuePairs, int page = 1, int pageSize = 9, 
        string order = "Position, Name", string ordertype = "asc")
    {
    ...
    } 
```

如何在此操作中绑定规范名称值对？或者我必须重新设计我的项目并使用静态规范并为每个规范类别创建绑定模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:16:32.597

您必须了解 Url.Action 方法。请检查以下链接，它可能会有所帮助。

[网址操作](https://stackoverflow.com/questions/1759189/how-does-url-action-work-asp-net-mvc)

# gcc - Makefile：Windows 上用于 gnu 工具链的 realpath 函数（yagarto）

> ID：13824161
> 
> 赞同：1
> 
> 时间：2012-12-11T16:22:34.510
> 
> 标签：gcc, makefile, gnu-make, toolchain

我正在尝试在 windows 上为 arm gnu 工具链编写一些 makefile。(yagarto.de)

但对于

```
MY_LIBC_PATH = $(realpath D:/temp//_latest//../) 
```

我明白了

```
D:/privat/stm32/eclipse-juno_workspace/yagarto_test/D:/temp 
```

我的目标是只获得第二部分（D:/temp），第一部分（D:/privat/stm32/eclipse-juno_workspace/yagarto_test/）是我的工作目录..

在这种情况下，我认为 realpath 是一个 make 函数......知道如何只获得**D:/temp**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:11:03.770

这是 GNU make 中的一个已知问题。例如，请参阅列表中的[这篇文章](http://lists.gnu.org/archive/html/make-w32/2008-02/msg00004.html)`make-w32`。该帖子还提出了一种解决方法。

# cuda - CUDA 中的二维有限差分时域 (FDTD)

> ID：13824162
> 
> 赞同：3
> 
> 时间：2012-12-11T16:22:35.230
> 
> 标签：cuda

我想用 CUDA 语言编写一个电磁二维有限差分时域 (FDTD) 代码。更新磁场的C代码如下

```
// --- Update for Hy and Hx
for(int i=n1; i<=n2; i++)
   for(int j=n11; j<=n21; j++){
      Hy[i*ydim+j]=A[i*ydim+j]*Hy[i*ydim+j]+B[i*ydim+j]*(Ezx[(i+1)*ydim+j]-Ezx[i*ydim+j]+Ezy[(i+1)*ydim+j]-Ezy[i*ydim+j]);
  Hx[i*ydim+j]=G[i*ydim+j]*Hx[i*ydim+j]-H[i*ydim+j]*(Ezx[i*ydim+j+1]-Ezx[i*ydim+j]+Ezy[i*ydim+j+1]-Ezy[i*ydim+j]);
   }
} 
```

我的第一次并行化尝试是以下内核：

```
__global__ void H_update_kernel(double* Hx_h, double* Hy_h, double* Ezx_h, double* Ezy_h, double* A_h, double* B_h,double* G_h, double* H_h, int n1, int n2, int n11, int n21)
{
   int idx = blockIdx.x*BLOCK_SIZE_X + threadIdx.x;
   int idy = blockIdx.y*BLOCK_SIZE_Y + threadIdx.y;

   if ((idx <= n2 && idx >= n1)&&(idy <= n21 && idy >= n11)) {
      Hy_h[idx*ydim+idy]=A_h[idx*ydim+idy]*Hy_h[idx*ydim+idy]+B_h[idx*ydim+idy]*(Ezx_h[(idx+1)*ydim+idy]-Ezx_h[idx*ydim+idy]+Ezy_h[(idx+1)*ydim+idy]-Ezy_h[idx*ydim+idy]);
  Hx_h[idx*ydim+idy]=G_h[idx*ydim+idy]*Hx_h[idx*ydim+idy]-H_h[idx*ydim+idy]*(Ezx_h[idx*ydim+idy+1]-Ezx_h[idx*ydim+idy]+Ezy_h[idx*ydim+idy+1]-Ezy_h[idx*ydim+idy]); }

} 
```

但是，通过也使用 Visual Profiler，我对这个解决方案不满意，原因有两个：1）内存访问的合并很差；2) 未使用共享内存。

然后我决定使用以下解决方案

```
__global__ void H_update_kernel(double* Hx_h, double* Hy_h, double* Ezx_h, double* Ezy_h, double* A_h, double* B_h,double* G_h, double* H_h, int n1, int n2, int n11, int n21)
{
    int i       = threadIdx.x;
int j       = threadIdx.y;
int idx     = blockIdx.x*BLOCK_SIZE_X + threadIdx.x;
int idy     = blockIdx.y*BLOCK_SIZE_Y + threadIdx.y;

int index1  = j*BLOCK_SIZE_Y+i;

int i1      = (index1)%(BLOCK_SIZE_X+1);
int j1      = (index1)/(BLOCK_SIZE_Y+1);

int i2      = (BLOCK_SIZE_X*BLOCK_SIZE_Y+index1)%(BLOCK_SIZE_X+1);
int j2      = (BLOCK_SIZE_X*BLOCK_SIZE_Y+index1)/(BLOCK_SIZE_Y+1);

__shared__ double Ezx_h_shared[BLOCK_SIZE_X+1][BLOCK_SIZE_Y+1];     
__shared__ double Ezy_h_shared[BLOCK_SIZE_X+1][BLOCK_SIZE_Y+1];     

if (((blockIdx.x*BLOCK_SIZE_X+i1)<xdim)&&((blockIdx.y*BLOCK_SIZE_Y+j1)<ydim))
    Ezx_h_shared[i1][j1]=Ezx_h[(blockIdx.x*BLOCK_SIZE_X+i1)*ydim+(blockIdx.y*BLOCK_SIZE_Y+j1)];

if (((i2<(BLOCK_SIZE_X+1))&&(j2<(BLOCK_SIZE_Y+1)))&&(((blockIdx.x*BLOCK_SIZE_X+i2)<xdim)&&((blockIdx.y*BLOCK_SIZE_Y+j2)<ydim)))
    Ezx_h_shared[i2][j2]=Ezx_h[(blockIdx.x*BLOCK_SIZE_X+i2)*xdim+(blockIdx.y*BLOCK_SIZE_Y+j2)];

__syncthreads();

if ((idx <= n2 && idx >= n1)&&(idy <= n21 && idy >= n11)) {
    Hy_h[idx*ydim+idy]=A_h[idx*ydim+idy]*Hy_h[idx*ydim+idy]+B_h[idx*ydim+idy]*(Ezx_h_shared[i+1][j]-Ezx_h_shared[i][j]+Ezy_h[(idx+1)*ydim+idy]-Ezy_h[idx*ydim+idy]);
    Hx_h[idx*ydim+idy]=G_h[idx*ydim+idy]*Hx_h[idx*ydim+idy]-H_h[idx*ydim+idy]*(Ezx_h_shared[i][j+1]-Ezx_h_shared[i][j]+Ezy_h[idx*ydim+idy+1]-Ezy_h[idx*ydim+idy]); }

    } 
```

需要索引技巧来使 BS_x * BS_y 线程块将 (BS_x+1)*(BS_y+1) 全局内存位置读取到共享内存。我相信这个选择比前一个更好，由于使用了共享内存，虽然并不是所有的访问都真正合并，见

[分析我的 CUDA 内核的内存访问合并](https://stackoverflow.com/questions/13771538/moving-a-bs-x1bs-y1-global-memory-matrix-by-bs-xbs-y-threads)

我的问题是，如果你们中的任何人都可以在合并内存访问方面向我提出更好的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:14:10.937

感谢您提供分析信息。

您的第二种算法更好，因为您获得了更高的 IPC。尽管如此，在 CC 2.0 上，最大 IPC 为 2.0，因此您在第二个解决方案中的平均值 1.018 意味着仅使用了一半的可用计算能力。通常，这意味着您的算法受内存限制，但我不确定您的情况，因为内核中的几乎所有代码都在`if`条件语句内。大量的经线发散会影响性能，但我没有检查未使用结果的指令是否计入 IPC。

您可能想研究通过纹理缓存进行读取。纹理针对 2D 空间局部性进行了优化，并更好地支持半随机 2D 访问。它可能有助于您的`[i][j]`类型访问。

在当前解决方案中，确保 Y 位置 ( `[j]`) 在具有相邻线程 ID 的两个线程之间变化最小（以保持内存访问尽可能连续）。

可能是编译器已经为你优化了这个，但是你重新计算`idx*ydim+idy`了很多次。尝试计算一次并重复使用结果。如果您的算法受计算限制，那将有更大的改进潜力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:31:30.977

我相信在这种情况下，您的第一个并行解决方案会更好，因为每个线程只读取每个全局内存数组元素一次。因此，将这些数组存储在共享内存中不会给您带来预期的改进。

由于在共享内存中存储数据期间可以更好地合并访问全局内存，它可以加快您的程序，但是恕我直言，如果您使用的是 Compute Capability 2.x，并且共享内存的使用也可以降级，那么这可以通过缓存全局内存访问来平衡银行冲突。

# c# - 是否可以忽略接近设备消息

> ID：13824163
> 
> 赞同：2
> 
> 时间：2012-12-11T16:22:35.333
> 
> 标签：c#, silverlight, nfc, windows-phone-8, ndef

我必须创建一个小应用程序来记录 NDEF 标签，一切都很顺利，但有一件事让我抓狂。当我将标签放在手机附近时，会出现一条消息，类似于“接收内容？有些人正在与您分享相同的内容”。例如，是否可以仅针对主页忽略此类消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:31:24.777

不，我认为这不可能。扫描标签时总是会出现这样的消息，无论正在运行什么应用程序。

# windows - 用于 Windows 分页的 Git

> ID：13824165
> 
> 赞同：4
> 
> 时间：2012-12-11T16:22:45.090
> 
> 标签：windows, git, version-control

每当我执行`git log`命令时，它都无法终止。如果我执行 Ctrl + C 它会退出分页环境，但如果我开始输入任何内容，它会`git log`再次启动命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:43:04.977

如前所述，`git log -X`会将您的输出限制为最后 X 次提交。

Git log 和其他 git 命令调用该`less`命令。这是寻呼机。要获得寻呼机的帮助，请键入？或查看输出时的 h。您现在将看到该`less`命令的帮助。少退出很容易，只需键入`q`。

如果您不希望 log 使用寻呼机实用程序，您可以指示 git 不要将其用于：

```
git --no-pager log 
```

Git log 有很多选择。为了快速了解发生的事情，我使用

```
git log --graph --oneline --decorate --all 
```

可以通过配置将装饰设置为默认启用，因此您不必发出它。

如果您认为在命令行上写的内容很多，那么您是对的！Bash 对此有一个快速的补救措施：`CTRL-R`. 按它并开始输入“图表”。您应该获得最后一次键入该长命令的时间。这是我不关心 git 别名的原因之一；搜索从会话到会话持续存在的命令历史记录很容易。

此外，您可以将输出限制为`git log`特定作者或特定日期范围等。

玩得开心探索并坚持使用命令行。这就是 git 的用途。您还将了解许多出色的 bash 技术，这些技术将在您进一步使用 git 时为您提供大量帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:41:05.313

您可以限制要显示的提交数量：

```
 git log -n 10 
```

仅限于最后 10 次提交。

您还可以为 git 使用某种图形界面，例如 gitk 或[tig](http://jonas.nitro.dk/tig/)或[git-cola](http://git-cola.github.com/)。[在此处](http://git-scm.com/downloads/guis)检查其他 gui 客户端。

# collections - 如何将 ArrayCollection 持久化到 mysql？

> ID：13824168
> 
> 赞同：1
> 
> 时间：2012-12-11T16:22:47.727
> 
> 标签：collections, symfony-2.1, persist

问题如下： 说到收音机，我有节目，每个节目都必须有广告，所以每个节目都有一个或多个广告提及。

小米实体程序：

```
<?php

namespace MediterraneoFM\MediterraneoFMBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * MediterraneoFM\MediterraneoFMBundle\Entity\Programas
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Programas
{
/**
 * @var integer $id_programa
 *
 * @ORM\Column(name="id_programa", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id_programa;

/**
 * @var string $nombre
 *
 * @ORM\Column(name="nombre", type="string", length=40)
 */
private $nombre;

/**
 * @var string $id_mencion_programa
 *
 * @ORM\Column(name="id_mencion_programa", type="string")
 * 
 * @ORM\ManyToOne(targetEntity="MencionPrograma", inversedBy="Programas")
 * 
 */
private $id_mencion_programa;

/**
 * @var \DateTime $duracion_desde
 *
 * @ORM\Column(name="duracion_desde", type="time")
 */
private $duracion_desde;

/**
 * @var \DateTime $duracion_hasta
 *
 * @ORM\Column(name="duracion_hasta", type="time")
 */
private $duracion_hasta;

 /**
 * Get id_programa
 *
 * @return integer 
 */
public function getIdPrograma()
{
    return $this->id_programa;
}

/**
 * Set nombre
 *
 * @param string $nombre
 * @return Programas
 */
public function setNombre($nombre)
{
    $this->nombre = $nombre;

    return $this;
}

/**
 * Get nombre
 *
 * @return string 
 */
public function getNombre()
{
    return $this->nombre;
}

/**
 * Set id_mencion_programa
 *
 * @param MencionPrograma $idMencionPrograma
 * 
 * @return Programas
 */
public function setIdMencionPrograma(MencionPrograma $idMencionPrograma)
{
    $this->id_mencion_programa = $idMencionPrograma;

    return $this;
}

/**
 * Get id_mencion_programa
 *
 * @return string
 */
public function getIdMencionPrograma()
{
    return $this->id_mencion_programa;
}

/**
 * Set duracion_desde
 *
 * @param \DateTime $duracionDesde
 * @return Programas
 */
public function setDuracionDesde($duracionDesde)
{
    $this->duracion_desde = $duracionDesde;

    return $this;
}

/**
 * Get duracion_desde
 *
 * @return \DateTime 
 */
public function getDuracionDesde()
{
    return $this->duracion_desde;
}

/**
 * Set duracion_hasta
 *
 * @param \DateTime $duracionHasta
 * @return Programas
 */
public function setDuracionHasta($duracionHasta)
{
    $this->duracion_hasta = $duracionHasta;

    return $this;
}

/**
 * Get duracion_hasta
 *
 * @return \DateTime 
 */
public function getDuracionHasta()
{
    return $this->duracion_hasta;
}
} 
```

小米实体提到：

```
<?php

namespace MediterraneoFM\MediterraneoFMBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * MediterraneoFM\MediterraneoFMBundle\Entity\MencionPrograma
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class MencionPrograma
{
/**
 * @var integer $id_mencion_programa
 *
 * @ORM\Column(name="id_mencion_programa", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 * @ORM\OneToMany(targetEntity="Programas", mappedBy="MencionPrograma")
 * 
 */
private $id_mencion_programa;

/**
 * @var string $nombre
 *
 * @ORM\Column(name="nombre", type="string", length=33)
 */
private $nombre;

/**
 * @var integer $id_emision_programa
 *
 * @ORM\Column(name="id_emision_programa", type="integer")
 */
private $id_emision_programa;

/**
 * @var string $nro_menciones
 *
 * @ORM\Column(name="nro_menciones", type="string", length=11)
 */
private $nro_menciones;

public function __construct() {
    $this->id_mencion_programa = new ArrayCollection();
}

/**
 * Get id_mencion_programa
 *
 * @return integer 
 */
public function getIdMencionPrograma()
{
    return $this->id_mencion_programa;
}

/**
 * Set id_emision_programa
 *
 * @param integer $idEmisionPrograma
 * @return MencionPrograma
 */
public function setIdEmisionPrograma($idEmisionPrograma)
{
    $this->id_emision_programa = $idEmisionPrograma;

    return $this;
}

/**
 * Get id_emision_programa
 *
 * @return integer 
 */
public function getIdEmisionPrograma()
{
    return $this->id_emision_programa;
}

/**
 * Set nro_menciones
 *
 * @param string $nroMenciones
 * @return MencionPrograma
 */
public function setNroMenciones($nroMenciones)
{
    $this->nro_menciones = $nroMenciones;

    return $this;
}

/**
 * Get nro_menciones
 *
 * @return string 
 */
public function getNroMenciones()
{
    return $this->nro_menciones;
}

/**
 * Set nombre
 *
 * @param string $nombre
 * @return MencionPrograma
 */
public function setNombre($nombre)
{
    $this->nombre = $nombre;

    return $this;
}

/**
 * Get nombre
 *
 * @return string 
 */
public function getNombre()
{
    return $this->nombre;
}
} 
```

我的控制器：

```
<?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

namespace MediterraneoFM\MediterraneoFMBundle\Controller;

# Funciones del kernel de Symfony
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Doctrine\ORM\EntityRepository;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Doctrine\Common\Collections\ArrayCollection;
# Paginador
use MakerLabs\PagerBundle\Pager;
use MakerLabs\PagerBundle\Adapter\ArrayAdapter;
use MakerLabs\PagerBundle\Adapter\DoctrineOrmAdapter;
# Entities
use MediterraneoFM\MediterraneoFMBundle\Entity\Programas;
# Types
use MediterraneoFM\MediterraneoFMBundle\Form\InsertProgramasType;

class ProgramasController extends Controller {

# Alta de Clientes, insert en tabla Clientes.
public function insertAction() {
    $programas = new Programas();
    $formType = new InsertProgramasType();
    $form = $this->createForm($formType, $programas);

    return $this->render('MediterraneoFMBundle::insertProgramas.html.twig', array('form' => $form->createView()));
}

public function insertSuccessAction(Request $request) {
    # Objeto que modifico
    $programas = new Programas();
    # Formulario que modifico
    $formType = new InsertProgramasType();
    $form = $this->createForm($formType, $programas);

    if ($request->getMethod() == 'POST'):
        $form->bind($request);
        $data = $form->getData();
        if ($form->isValid()):
            $em = $this->getDoctrine()->getManager();
            $em->persist($programas);
            $em->flush();

            return $this->redirect($this->generateUrl('insertProgramas'));
        endif;
    endif;
}

/**
 *
 * @Route("/programas/show/{limit}/{page}", defaults={"page"=1}, name="showProgramas")
 * 
 */
public function showAction($page, $limit) {
    $programas = $this->getDoctrine()
            ->getRepository('MediterraneoFMBundle:Programas')
            ->findAll();

    if (!$programas):
        throw $this->createNotFoundException('No emisoras found for id ');
    endif;

    $adapter = new ArrayAdapter($programas);

    $pager = new Pager($adapter, array('page' => $page, 'limit' => $limit));

    return $this->render('MediterraneoFMBundle::showProgramas.html.twig', array('emisoras' => $programas, 'pager' => $pager));
}
}
?> 
```

我的表单类型：

```
<?php

namespace MediterraneoFM\MediterraneoFMBundle\Form;

use Doctrine\ORM\EntityRepository;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class InsertProgramasType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('nombre')
        ->add('id_mencion_programa', 'entity', array(
            'class' => 'MediterraneoFM\MediterraneoFMBundle\Entity\MencionPrograma',
                'property' => 'nombre',
                'query_builder' => function(EntityRepository $er) {
                    return $er->createQueryBuilder('c');
                },
                'label' => 'Mencion',
                'multiple' => true,
                'expanded' => true,
                'required' => false,
            ))
        ->add('duracion_desde', 'time', array(
            'with_seconds' => true
        ))
        ->add('duracion_hasta', 'time', array(
            'with_seconds' => true
        ))
    ;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'MediterraneoFM\MediterraneoFMBundle\Entity\Programas',
        'csrf_protection' => false,
        'csrf_field_name' => '_token',
        // a unique key to help generate the secret token
        'intention'       => 'task_item',
    ));
}

public function getName()
{
    return 'mediterraneofm_mediterraneofmbundle_insertprogramastype';
}
} 
```

因此，当我将数据保存到数据库时，它会保存：

```
O:58:"MediterraneoFM\MediterraneoFMBundle\Entity\MencionPrograma":4:         {s:79:"�MediterraneoFM\MediterraneoFMBundle\Entity    \MencionPrograma�id_mencion_programa";i:2;s:66:"�MediterraneoFM\MediterraneoFMBundle\Entity\MencionPrograma�nombre";s:3:"8-1";s:79:"�MediterraneoFM\MediterraneoFMBundle\Entity\MencionPrograma�id_emision_programa";i:2;s:73:"�MediterraneoFM\MediterraneoFMBundle\Entity\MencionPrograma�nro_menciones";s:1:"1";} 
```

或像这样：

```
Doctrine\Common\Collections\ArrayCollection@0000000037e77446000000008ebafd04 
```

我究竟做错了什么？对不起我的英语不好！

# sql-server - SSAS VS 2005 中的计算错误

> ID：13824172
> 
> 赞同：1
> 
> 时间：2012-12-11T16:22:55.900
> 
> 标签：sql-server, visual-studio, sql-server-2005, mdx

我目前正在使用带有 Visual Studio 2005 的 SQL Server 2005。我已经建立了一个数据仓库，它为 Microsoft 和 SAP 用户拉取许可费（以欧元计）除以 QTR。

我创建了一个将欧元成本转换为美元的计算。各个季度计算正确，但 SUM 是从列出的三个度量中计算的总和，而 Quater 总和会产生不准确的 SUM。

我已经验证所有表格数据都是正确的，并且我将错误追溯到计算。我只是不知道我缺少什么来更正 SUM 并让它仅对 QTR 的字段进行求和，而不是对事实表和可见总计中的每个列出的度量进行求和。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:37:27.857

如果错误的类型为：1.01 + 1.02 + 1.03 = 3.0600001，那么这是浮点计算的预期行为。这是因为许多有限分数不能用二进制的有限位数表示——就像 1/3 不能用以十为底的有限位数表示一样。

（在谷歌电子表格中，例如 507.05 - 511.44 产生 -4.38999）

这可以在许多语言中通过使用变量类型“货币”来规避，这可以通过在内部以整数美分表示所有值并仅在显示结果时放置小数点来模拟。

# c# - system.net.mail.smtpException : 无法连接到远程服务器？

> ID：13824176
> 
> 赞同：0
> 
> 时间：2012-12-11T16:23:02.093
> 
> 标签：c#, windows-7

我正在尝试使用 Kinghost SMTP 发送电子邮件，但出现以下错误：

`system.net.mail.smtpException : failure sending mail`

任何想法为什么？

```
 private bool SendEmail( string sendto, string sendfrom, string subject, string body )
        {
            bool status = false;
            try
            {
                msg.To.Clear();
                clint.Host = "smtp.kinghost.net";
                clint.Port = 25;
                clint.UseDefaultCredentials = false;
                clint.Credentials = smtpCrede;
                clint.EnableSsl = true;
                MailAddress to = new MailAddress(sendto);
                MailAddress from = new MailAddress(sendfrom);
                msg.Subject = subject;
                msg.Body = body;
                msg.From = from;
                msg.To.Add(to);
                clint.Send(msg);
                status = true;
            }
            catch ( Exception ex )
            {
                MessageBox.Show(ex.ToString());
            }
            return status;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:24:03.357

您的 ISP 可能阻止了端口 25 上的出站连接。

尝试端口 587。

# iphone - AFNetworking 检查图像是否被缓存

> ID：13824197
> 
> 赞同：1
> 
> 时间：2012-12-11T16:23:51.517
> 
> 标签：iphone, ios, ipad, caching, afnetworking

我有这种方法，`UIImageView`当单击单元格时，它会下载全尺寸图像。

```
- (void)configureView
{
    NSURLRequest *URLRequest = [[NSURLRequest alloc] initWithURL:self.imageURL];

    AFImageRequestOperation *operation = [[AFImageRequestOperation alloc] initWithRequest:URLRequest];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

            [SVProgressHUD showSuccessWithStatus:@"Done!"];

        [self.imageView setImage:responseObject];
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);
    }];

    [operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
        float percentage = (totalBytesRead / (totalBytesExpectedToRead * 1.0f) * 100);
        NSLog(@"Percentage: %f", percentage);
        if (percentage != 100.0)
        {
            [SVProgressHUD showWithStatus:[NSString stringWithFormat:@"Downloading... %0.0f%%", percentage]];
        }
    }];

    [operation start];
} 
```

所以当下载完成时，`[SVProgressHUD showSuccessWithStatus:@"Done!"];`被调用。但是当您返回`tableViewController`并单击同一单元格时，`[SVProgressHUD showSuccessWithStatus:@"Done!"];`即使图像已缓存，也会再次调用。如何检查图像是否已缓存并且仅`[SVProgressHUD showSuccessWithStatus:@"Done!"];`在未缓存时调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:27:24.550

AFImageRequestOperation 不缓存图像。我认为您将 AFNetworking 的类别“UIImageView+AFNetworking”与“AFImageRequestOperation”混淆了。类别会缓存图像，AFImageRequestOperation 不会。

# c# - AutomaticInputSessionShutdown 自定义会话关闭处理程序

> ID：13824206
> 
> 赞同：1
> 
> 时间：2012-12-11T16:24:03.703
> 
> 标签：c#, .net, wcf, service, host

从[这篇 MSDN 文章中](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.dispatchruntime.automaticinputsessionshutdown.aspx)，我看到它说以下内容：

> 如果将 AutomaticInputSessionShutdown 属性设置为 false，则通道必须由其他机制关闭。在这种情况下，您必须将自定义会话关闭处理程序添加到 InputSessionShutdownHandlers 属性。

如果您不将自定义会话关闭处理程序添加到 InputSessionShutdownHandlers 属性并将 AutomaticInputSessionShutdown 属性设置为 false，会有什么后果？我有两个 WCF 服务，它们只能相互连接，受证书保护，我不希望它们的会话终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:50:38.907

亚历山德鲁，

的全部目的`InputSessionShutdown`是允许服务对客户端做出最终响应，指示客户端可以关闭它的连接。

根据您的描述，这种情况下的“客户”是您的另一项服务。只要双工会话终止时“客户端”服务可以正常关闭，不提供自定义`InputSessionShutdownHandler`.

# regex - 有效地查找作为其他单词子串的单词

> ID：13824208
> 
> 赞同：1
> 
> 时间：2012-12-11T16:24:04.700
> 
> 标签：regex, perl

我有一个英语单词的 Ispell 列表（近 50 000 个单词），我在 Perl 中的作业是快速（比如不到一分钟）获得所有字符串的列表，这些字符串是其他单词的子字符串。我已经尝试使用两个 foreach 循环比较所有单词的解决方案，但即使进行了一些优化，它仍然太慢。我认为，正确的解决方案可能是在单词数组上巧妙地使用正则表达式。你知道如何快速解决这个问题（在 Perl 中）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:36:52.783

我找到了快速的解决方案，它可以在我的计算机上大约 15 秒内找到所有这些子字符串，只使用一个线程。基本上，对于每个单词，我创建了每个可能的子字符串的数组（消除仅在“s”或“'s”结尾不同的子字符串）：

```
#take word and return list of all valid substrings
sub split_to_all_valid_subwords {
    my $word = $_[0];
    my @split_list;
    my ($i, $j);
    for ($i = 0; $i < length($word); ++$i){
        for ($j = 1; $j <= length($word) - $i; ++$j){
            unless
                (
                    ($j == length($word)) or
                    ($word =~ m/s$/ and $i == 0 and $j == length($word) - 1) or
                    ($word =~ m/\'s$/ and $i == 0 and $j == length($word) - 2)
                )
                {
                push(@split_list, substr($word, $i, $j));
            }
        }
    }
    return @split_list;
} 
```

然后我只是为子字符串创建所有候选者的列表并与单词相交：

```
my @substring_candidates;

foreach my $word (@words) {
    push( @substring_candidates, split_to_all_valid_subwords($word));
}

#make intersection between substring candidates and words
my %substring_candidates=map{$_ =>1} @substring_candidates;
my %words=map{$_=>1} @words;
my @substrings = grep( $substring_candidates{$_}, @words ); 
```

现在在子字符串中，我有所有单词的数组，它们是其他单词的子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:38:42.800

Perl 正则表达式将优化模式，如`foo|bar|baz`Aho-Corasick 匹配 - 达到总编译正则表达式长度的某个限制。你的 50000 字可能会超过这个长度，但可以分成更小的组。（实际上，您可能希望将它们按长度分解，并且只检查长度为 N 的单词是否包含长度为 1 到 N-1 的单词。）

或者，您可以在您的 perl 代码中实现 Aho-Corasick - 这很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T06:01:05.893

### 更新

Ondra 在他的回答中提供了一个很好的解决方案；我把我的帖子留在这里作为过度思考问题和优化技术失败的例子。

我最糟糕的情况是出现在输入中与任何其他单词都不匹配的单词。在这种情况下，它是二次的。这`OPT_PRESORT`是试图宣传大多数单词的最坏情况。这`OPT_CONSECUTIVE`是一个线性复杂性过滤器，它减少了算法主要部分的项目总数，但在考虑复杂性时它只是一个常数因素。然而，它仍然对 Ondras 算法有用并且节省了几秒钟，因为构建他的拆分列表比比较两个连续的单词更昂贵。

我更新了下面的代码以选择 ondras 算法作为可能的优化。与零线程和预排序优化相结合，它可以产生最大的性能。

* * *

我想分享一个我编写的解决方案。给定一个输入文件，它会输出作为同一输入文件中任何其他单词的子字符串的所有单词。因此，它计算的与 ysth 的想法相反，但我从他的回答中采用了优化 #2 的想法。如果需要，可以禁用以下三个主要优化。

1.  多线程
    问题*“单词 A 在列表 L 中吗？单词 B 在 L 中吗？”* 可以很容易地并行化。
2.  对所有单词的长度进行预排序
    我创建了一个数组，该数组指向所有可能长度超过某个长度的单词的列表。对于长单词，这可以显着减少可能单词的数量，但它会占用大量空间，因为长度为*n的单词出现在从长度为 1 到长度为**n*的所有列表中。
3.  测试连续单词
    在我的`/usr/share/dict/words`中，大多数连续行看起来非常相似：

    ```
    Abby
    Abby's 
    ```

    例如。由于每个匹配第一个单词的单词也匹配第二个单词，我立即将第一个单词添加到匹配单词列表中，只保留第二个单词以供进一步测试。这在我的测试用例中节省了大约 30% 的单词。因为我在优化 2 之前就这样做了，所以这也节省了很多空间。另一个权衡是输出不会被排序。

脚本本身大约 120 行长；我在展示之前解释了每个子。

### 头

这只是多线程的标准脚本头。哦，你需要 perl 5.10 或更高版本才能运行它。配置常量定义优化行为。在该字段中添加您机器的处理器数量。该`OPT_MAX`变量可以采用您要处理的单词数，但是这是在优化发生*后*评估的，因此优化已经捕获了简单的单词`OPT_CONSECUTIVE`。在那里添加任何东西都会使脚本看起来更慢。`$|++`确保立即显示状态更新。我`exit`在`main`被执行后。

```
#!/usr/bin/perl

use strict; use warnings; use feature qw(say); use threads;
$|=1;

use constant PROCESSORS => 0;   # (false, n) number of threads
use constant OPT_MAX    => 0;    # (false, n) number of words to check
use constant OPT_PRESORT     => 0;  # (true / false) sorts words by length
use constant OPT_CONSECUTIVE => 1;  # (true / false) prefilter data while loading
use constant OPT_ONDRA       => 1;  # select the awesome Ondra algorithm
use constant BLABBER_AT => 10;  # (false, n) print progress at n percent

die q(The optimisations Ondra and Presort are mutually exclusive.)
    if OPT_PRESORT and OPT_ONDRA;

exit main(); 
```

### `main`

封装主逻辑，做多线程。如果输入已排序，则 的输出`n words will be matched`将大大小于输入单词的数量。在我选择了所有匹配的单词后，我将它们打印到 STDOUT。所有状态更新等都打印到 STDERR，这样它们就不会干扰输出。

```
sub main {
    my @matching;                       # the matching words.
    my @words = load_words(\@matching); # the words to be searched
    say STDERR 0+@words . " words to be matched";

    my $prepared_words = prepare_words(@words);

    # do the matching, possibly multithreading
    if (PROCESSORS) {
        my @threads =
            map {threads->new(
                    \&test_range,
                    $prepared_words,
                    @words[$$_[0] .. $$_[1]] )
                } divide(PROCESSORS, OPT_MAX || 0+@words);
        push @matching, $_->join for @threads;
    } else {
        push @matching, test_range(
                            $prepared_words,
                            @words[0 .. (OPT_MAX || 0+@words)-1]);
    }

    say STDERR 0+@matching . " words matched";

    say for @matching; # print out the matching words.

    0;
} 
```

### `load_words`

这将从作为命令行参数提供的输入文件中读取所有单词。在这里进行`OPT_CONSECUTIVE`优化。该`$last`单词要么被放入匹配单词列表中，要么被放入稍后要匹配的单词列表中。`-1 != index($a, $b)`决定单词是否是 word的`$b`子字符串`$a`。

```
sub load_words {
    my $matching = shift;
    my @words;
    if (OPT_CONSECUTIVE) {
        my $last;
        while (<>) {
            chomp;
            if (defined $last) {
                push @{-1 != index($_, $last) ? $matching : \@words}, $last;
            }
            $last = $_;
        }
        push @words, $last // ();
    } else {
        @words = map {chomp; $_} <>;
    }
    @words;
} 
```

### `prepare_words`

这会“炸毁”输入单词，将它们按照长度排序到每个槽中，这些槽具有更大或相等长度的单词。因此，槽 1 将包含所有单词。如果取消选择此优化，则它是空操作并直接通过输入列表。

```
sub prepare_words {
    if (OPT_ONDRA) {
       my $ondra_split = sub { # evil: using $_ as implicit argument
           my @split_list;
           for my $i (0 .. length $_) {
               for my $j (1 .. length($_) - ($i || 1)) {
                   push @split_list, substr $_, $i, $j;
               }
           }
           @split_list;
       };
       return +{map {$_ => 1} map &$ondra_split(), @_};
    } elsif (OPT_PRESORT) {
        my @prepared = ([]);
        for my $w (@_) {
            push @{$prepared[$_]}, $w for 1 .. length $w;
        }
        return \@prepared;
    } else {
        return [@_];
    }
} 
```

### `test`

这将测试该单词`$w`是否是任何其他单词中的子字符串。`$wbl`指向由前一个子创建的数据结构：一个扁平的单词列表，或者按长度排序的单词。然后选择适当的算法。几乎所有的运行时间都花在了这个循环中。使用比使用正则表达式`index`快得多*。*

```
sub test {
    my ($w, $wbl) = @_;
    my $l = length $w;
    if (OPT_PRESORT) {
        for my $try (@{$$wbl[$l + 1]}) {
            return 1 if -1 != index $try, $w;
        }
    } else {
        for my $try (@$wbl) {
            return 1 if $w ne $try and -1 != index $try, $w;
        }
    }
    return 0;
} 
```

### `divide`

这只是封装了一种算法，可确保将`$items`项目公平分配到`$parcels`存储桶中。它输出一系列项目的边界。

```
sub divide {
    my ($parcels, $items) = @_;
    say STDERR "dividing $items items into $parcels parcels.";
    my ($min_size, $rest) = (int($items / $parcels), $items % $parcels);
    my @distributions =
        map [
            $_       * $min_size + ($_ < $rest ? $_ : $rest),
            ($_ + 1) * $min_size + ($_ < $rest ? $_ : $rest - 1)
        ], 0 .. $parcels - 1;
    say STDERR "range division: @$_" for @distributions;
    return @distributions;
} 
```

### `test_range`

这要求`test`输入列表中的每个单词，并且是多线程的子。`grep`选择输入列表中代码（作为第一个参数给出）返回 true 的所有元素。它还定期输出一条状态消息，这样`thread 2 at 10%`可以更轻松地等待完成。这是一种心理优化；-)。

```
sub test_range {
    my $wbl = shift;
    if (BLABBER_AT) {
        my $range = @_;
        my $step = int($range / 100 * BLABBER_AT) || 1;
        my $i = 0;
        return
            grep {
                if (0 == ++$i % $step) {
                    printf STDERR "... thread %d at %2d%%\n",
                        threads->tid,
                        $i / $step * BLABBER_AT;
                }
                OPT_ONDRA ? $wbl->{$_} : test($_, $wbl)
            } @_;
    } else {
        return grep {OPT_ONDRA ? $wbl->{$_} : test($_, $wbl)} @_;
    }
} 
```

### 调用

使用 bash，我调用了类似的脚本

```
$ time (head -n 1000 /usr/share/dict/words | perl script.pl >/dev/null) 
```

`1000`我要输入的行数在哪里，`dict/words`是我使用的单词列表，`/dev/null`是我要存储输出列表的地方，在这种情况下，将输出扔掉。如果应该读取整个文件，则可以将其作为参数传递，例如

```
$ perl script.pl input-file >output-file 
```

`time`只是告诉我们脚本运行了多长时间。使用 2 个慢速处理器和 50000 个字，在我的情况下它只用了两分钟多的时间就执行了，这实际上相当不错。

更新：现在更像是 6-7 秒，使用 Ondra + Presort 优化，没有线程。

### 进一步优化

更新：通过更好的算法克服。本节不再完全有效。

多线程是可怕的。它分配了相当多的内存，而且速度并不快。考虑到数据量，这并不奇怪。我考虑过使用 a `Thread::Queue`，但那东西很慢，比如 $@*! 因此是完全不可行的。如果内部循环 in`test`是用较低级别的语言编码的，则可能会获得一些性能，因为`index`不必调用内置函数。如果您可以编写 C 代码，请查看该`Inline::C`模块。如果整个脚本是用低等语言编写的，那么数组访问也会更快。像 Java 这样的语言也会让多线程变得不那么痛苦（而且成本更低）。

# java - Android 前置摄像头 Android 4.0.3 ICS 启动失败

> ID：13824211
> 
> 赞同：3
> 
> 时间：2012-12-11T16:24:09.747
> 
> 标签：java, android, camera, android-4.0-ice-cream-sandwich, recorder

我正在尝试创建一个从前置摄像头录制视频的 Android 应用程序。预览工作正常，但一旦我开始录制应用程序崩溃并出现错误“java.lang.RuntimeException：启动失败”。我用后置摄像头尝试了同样的方法，但它有同样的问题。我正在使用运行 Android ICS 4.0.3 的三星 Tab 2 P5110。

这是我的 Activity 类，它显示预览并且应该开始录制。

> ```
>  import java.io.IOException;
>     import java.lang.reflect.Method;
>     import java.lang.reflect.InvocationTargetException;
>     import java.lang.reflect.Field;
> 
>     import android.app.Activity;
>     import android.content.Intent;
>     import android.hardware.Camera;
>     import android.media.CamcorderProfile;
>     import android.media.MediaRecorder;
>     import android.os.Bundle;
>     import android.os.CountDownTimer;
>     import android.util.Log;
>     import android.view.SurfaceHolder;
>     import android.view.SurfaceView;
>     import android.view.View;
>     import android.view.Window;
>     import android.view.WindowManager;
>     import android.view.View.OnClickListener;
>     import android.widget.ProgressBar;
>     import android.widget.TextView;
>     import android.widget.FrameLayout;
> 
>     public class VideoActivity extends Activity implements OnClickListener,
>     SurfaceHolder.Callback, MediaRecorder.OnInfoListener {
> 
>       MediaRecorder recorder;
>       SurfaceHolder holder;
>       Camera camera;
> 
>       boolean recording = false;
>       public static final String TAG = "VIDEOCAPTURE";
>       private int show_id;
>       private CamcorderProfile mProfile;
>       private CountDownTimer cdt = null;
> 
>       private static final int max_length_in_ms = 30000;
> 
>       @Override 
>       public void onCreate(Bundle savedInstanceState) 
>       {
>           super.onCreate(savedInstanceState);
> 
>           requestWindowFeature( Window.FEATURE_NO_TITLE );
>           getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN );
> 
>           show_id = getIntent().getIntExtra(Database.SHOW_ID, -1);
> 
>           camera = this.openFrontFacingCamera(); // frontfacing camera
> 
>                   camera = camera.open(); //rearfacing
> 
>           recorder = new MediaRecorder();
>           recorder.setCamera(camera);
> 
>           setContentView(R.layout.video);
> 
>           FrameLayout cameraView = (FrameLayout) findViewById(R.id.CameraView);
> 
>           CameraSurfaceView cameraSurface = new CameraSurfaceView(getBaseContext(), camera);
>           cameraView.addView(cameraSurface);
> 
>           holder = cameraSurface.getHolder();
> 
>           cameraView.setClickable(true);
>           findViewById(R.id.recBtn).setOnClickListener(this);
>       }
> 
>       private void initRecorder() {
>           recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
>           recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
> 
>           recorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_LOW));
> 
>           recorder.setOutputFile("/sdcard/videotemp.mp4");
>           recorder.setMaxDuration(VideoActivity.max_length_in_ms); 
>           recorder.setMaxFileSize(50000000); // Approximately 50 megabytes
>       }
> 
>       private void prepareRecorder() {
>           recorder.setPreviewDisplay(holder.getSurface());
> 
>           try {
>               recorder.prepare();
>           } catch (IllegalStateException e) {
>               e.printStackTrace();
>               finish();
>           } catch (IOException e) {
>               e.printStackTrace();
>               finish();
>           }
>       }
> 
>       public void onClick(View v) {
>           if (recording) {
>               recorder.stop(); 
>               recorder.release();
>               recording = false;
>               camera.release();
>               Log.v(TAG, "Recording Stopped");
>               // Let's initRecorder so we can record again
>               Intent intent = new Intent(this, UploadActivity.class);
>               intent.putExtra(Database.SHOW_ID, show_id);
>               intent.putExtra(Database.FILENAME, "/sdcard/videotemp.mp4");
>               intent.putExtra(Database.EXTENTION, ".mp4");
>               startActivity(intent);
>               finish();
>           } else {
>               recording = true;
> 
>               initRecorder();
> 
>               prepareRecorder();
> 
>               recorder.start(); 
> 
>               ProgressBar pb = (ProgressBar) findViewById(R.id.videoProgress);
>               pb.setMax(VideoActivity.max_length_in_ms);
> 
>               this.cdt = new CountDownTimer(VideoActivity.max_length_in_ms, 50) {
> 
>                    public void onTick(long millisUntilFinished) {  
>                        ProgressBar pb = (ProgressBar) findViewById(R.id.videoProgress);
> 
>                        pb.setProgress( VideoActivity.max_length_in_ms - (int)((millisUntilFinished) )); 
>                    }
> 
>                    public void onFinish() {
>                        ProgressBar pb = (ProgressBar) findViewById(R.id.videoProgress);
>                        pb.setProgress(100);
>                    }
>                 };
>                 this.cdt.start();
> 
>               Log.v(TAG, "Recording Started");
>           }
>       }
> 
>       private Camera openFrontFacingCamera() {
>             Camera camera = null;
> 
>             // Look for front-facing camera, using the Gingerbread API.
>             // Java reflection is used for backwards compatibility with
>             // pre-Gingerbread APIs.
>             try {
>                 Class<?> cameraClass = Class.forName("android.hardware.Camera");
>                 Object cameraInfo = null;
>                 Field field = null;
>                 int cameraCount = 0;
>                 Method getNumberOfCamerasMethod = cameraClass
>                         .getMethod("getNumberOfCameras");
>                 if (getNumberOfCamerasMethod != null) {
>                     cameraCount = (Integer) getNumberOfCamerasMethod.invoke(null,
>                             (Object[]) null);
>                 }
>                 Class<?> cameraInfoClass = Class
>                         .forName("android.hardware.Camera$CameraInfo");
>                 if (cameraInfoClass != null) {
>                     cameraInfo = cameraInfoClass.newInstance();
>                 }
>                 if (cameraInfo != null) {
>                     field = cameraInfo.getClass().getField("facing");
>                 }
>                 Method getCameraInfoMethod = cameraClass.getMethod("getCameraInfo",
>                         Integer.TYPE, cameraInfoClass);
>                 if (getCameraInfoMethod != null && cameraInfoClass != null
>                         && field != null) {
>                     for (int camIdx = 0; camIdx < cameraCount; camIdx++) {
>                         getCameraInfoMethod.invoke(null, camIdx, cameraInfo);
>                         int facing = field.getInt(cameraInfo);
>                         if (facing == 1) { // Camera.CameraInfo.CAMERA_FACING_FRONT
>                             try {
>                                 Method cameraOpenMethod = cameraClass.getMethod(
>                                         "open", Integer.TYPE);
>                                 if (cameraOpenMethod != null) {
>                                     camera = (Camera) cameraOpenMethod.invoke(null,
>                                             camIdx);
>                                     mProfile = CamcorderProfile
>                                             .get(camIdx, CamcorderProfile.QUALITY_LOW);
>                                 }
>                             } catch (RuntimeException e) {
>                                 Log.e(TAG,
>                                         "Camera failed to open: "
>                                                 + e.getLocalizedMessage());
>                             }
>                         }
>                     }
>                 }
>             }
>             // Ignore the bevy of checked exceptions the Java Reflection API throws
>             // - if it fails, who cares.
>             catch (ClassNotFoundException e) {
>                 Log.e(TAG, "ClassNotFoundException" + e.getLocalizedMessage());
>             } catch (NoSuchMethodException e) {
>                 Log.e(TAG, "NoSuchMethodException" + e.getLocalizedMessage());
>             } catch (NoSuchFieldException e) {
>                 Log.e(TAG, "NoSuchFieldException" + e.getLocalizedMessage());
>             } catch (IllegalAccessException e) {
>                 Log.e(TAG, "IllegalAccessException" + e.getLocalizedMessage());
>             } catch (InstantiationException e) {
>                 Log.e(TAG, "InstantiationException" + e.getLocalizedMessage());
>             } catch (SecurityException e) {
>                 Log.e(TAG, "SecurityException" + e.getLocalizedMessage());
>             } catch (IllegalArgumentException e) {
>               // TODO Auto-generated catch block
>               e.printStackTrace();
>           } catch (InvocationTargetException e) {
>               // TODO Auto-generated catch block
>               e.printStackTrace();
>           }
> 
>             if (camera == null) {
>                 // Try using the pre-Gingerbread APIs to open the camera.
>                 try {
>                     camera = Camera.open();
>                 } catch (RuntimeException e) {
>                     Log.e(TAG, "Camera failed to open: " + e.getLocalizedMessage());
>                 }
>             }
> 
>             return camera;
>         }
> 
>     } 
> ```

对于预览，我正在使用 SurfaceView 的扩展版本

> ```
>  package nl.raakict.android.VideoCapture;
>     import java.io.IOException;
> 
>     import android.content.Context;
>     import android.hardware.Camera;
>     import android.util.Log;
>     import android.view.SurfaceHolder;
>     import android.view.SurfaceView;
> 
>     public class CameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback {
>         private SurfaceHolder mHolder;
>         private Camera mCamera;
> 
>         public CameraSurfaceView(Context context, Camera camera) {
>             super(context);
>             mCamera = camera;
> 
>             // Install a SurfaceHolder.Callback so we get notified when the
>             // underlying surface is created and destroyed.
>             mHolder = getHolder();
>             mHolder.addCallback(this);
>             // deprecated setting, but required on Android versions prior to 3.0
>             mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
>         }
> 
>         public void surfaceCreated(SurfaceHolder holder) {
>             // The Surface has been created, now tell the camera where to draw the preview.
>             try {
>                 mCamera.setPreviewDisplay(holder);
>                 mCamera.startPreview();
>             } catch (IOException e) {
>                 Log.d("DEBUG", "Error setting camera preview: " + e.getMessage());
>             }
> 
>         }
> 
>         public void surfaceDestroyed(SurfaceHolder holder) {
> 
>         }
> 
>         public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
>             // If your preview can change or rotate, take care of those events here.
>             // Make sure to stop the preview before resizing or reformatting it.
> 
>             if (mHolder.getSurface() == null){
>               // preview surface does not exist
>               return;
>             }
> 
>             // stop preview before making changes
>             try {
>                 mCamera.stopPreview();
>             } catch (Exception e){
>               // ignore: tried to stop a non-existent preview
>             }
> 
>             // set preview size and make any resize, rotate or
>             // reformatting changes here
> 
>             // start preview with new settings
>             try {
>                 mCamera.setPreviewDisplay(mHolder);
>                 mCamera.startPreview();
> 
>             } catch (Exception e){
>                 Log.d("DEBUG", "Error starting camera preview: " + e.getMessage());
>             }
>         }
>     } 
> ```

任何帮助将不胜感激。

# c# - 列表 复杂排序

> ID：13824212
> 
> 赞同：11
> 
> 时间：2012-12-11T16:24:16.683
> 
> 标签：c#, linq, sorting, lambda, arraylist

我有`List<string>`多种尺码，比如 XS、S、M、L、XL、XXL、UK 10、UK 12 等

我想要的是强制顺序为上述顺序，无论列表中项目的顺序如何，我认为我需要一个 IComparable 运算符但不确定。

理想情况下，我希望有另一个具有正确顺序的列表，它可以引用它在列表中的“位置”并重新排序，如果它不存在，它将默认为 AZ

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-11T16:31:19.843

按照您希望它们的顺序创建一个尺寸数组，然后按衬衫尺寸在该数组中的位置对衬衫进行排序：

```
string[] sizes = new [] {"XS", "S", "M", "L", "XL", "XXL", "UK 10", "UK 12"};

var shirtsInOrder = shirts
                        .OrderBy(s=>sizes.Contains(s) ? "0" : "1")  // put unmatched sizes at the end
                        .ThenBy(s=>Array.IndexOf(sizes,s))  // sort matches by size
                        .ThenBy(s=>s); // sort rest A-Z 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:31:00.913

```
var order = new string[] { "XS", "S", "M", "L", "XL", "XXL", "UK10", "UK12" };

var orderDict = order.Select((c, i) => new { sze = c, ord = i })
            .ToDictionary(o => o.sze, o => o.ord);

var list = new List<string> { "S", "L", "XL", "L", "L", "XS", "XL" };
var result = list.OrderBy(item => orderDict[item]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:28:58.390

您可以直接使用`OrderByDescending`+ `ThenByDescending`：

```
sizes.OrderByDescending(s => s == "XS")
     .ThenByDescending( s => s == "S")
     .ThenByDescending( s => s == "M")
     .ThenByDescending( s => s == "L")
     .ThenByDescending( s => s == "XL")
     .ThenByDescending( s => s == "XXL")
     .ThenByDescending( s => s == "UK 10")
     .ThenByDescending( s => s == "UK 12")
     .ThenBy(s => s); 
```

我使用是`...Descending`因为 a`true`类似于 1 而 a`false`是 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T16:52:14.953

你也可以这样做：

```
public class ShirtComparer : IComparer<string>
{
    private static readonly string[] Order = new[] { "XS", "S", "M", "L", "XL", "XXL", "UK10", "UK12" };

    public int Compare(string x, string y)
    {
        var xIndex = Array.IndexOf(Order, x);
        var yIndex = Array.IndexOf(Order, y);

        if (xIndex == -1 || yIndex == -1) 
            return string.Compare(x, y, StringComparison.Ordinal);

        return xIndex - yIndex;
    }
} 
```

用法：

```
var list = new List<string> { "S", "L", "XL", "L", "L", "XS", "XL", "XXXL", "XMLS", "XXL", "AM19" };
var result = list.OrderBy(size => size, new ShirtComparer()); 
```

对于不在列表中的值，它也应该默认为 AZ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T16:31:55.363

您还可以创建其他列表，并使用委托与排序一起使用，如果 size1 的索引 > size2 的索引，则返回。

# android - 尝试使用 ListView 实现 AsyncTask

> ID：13824216
> 
> 赞同：0
> 
> 时间：2012-12-11T16:24:28.717
> 
> 标签：android, listview, android-asynctask

所以我试图在我的 NewsParser 上实现 AsyncTask，我以为我明白了，但我无法运行该活动，我在 LogCat 上收到以下错误：

```
12-11 16:15:24.572: E/AndroidRuntime(992): FATAL EXCEPTION: main
12-11 16:15:24.572: E/AndroidRuntime(992): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.igestao/com.example.igestao.Noticias}: java.lang.NullPointerException
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.os.Looper.loop(Looper.java:137)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-11 16:15:24.572: E/AndroidRuntime(992):  at java.lang.reflect.Method.invokeNative(Native Method)
12-11 16:15:24.572: E/AndroidRuntime(992):  at java.lang.reflect.Method.invoke(Method.java:511)
12-11 16:15:24.572: E/AndroidRuntime(992):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-11 16:15:24.572: E/AndroidRuntime(992):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-11 16:15:24.572: E/AndroidRuntime(992):  at dalvik.system.NativeStart.main(Native Method)
12-11 16:15:24.572: E/AndroidRuntime(992): Caused by: java.lang.NullPointerException
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:142)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.AlertDialog.<init>(AlertDialog.java:98)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ProgressDialog.<init>(ProgressDialog.java:77)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ProgressDialog.show(ProgressDialog.java:110)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ProgressDialog.show(ProgressDialog.java:99)
12-11 16:15:24.572: E/AndroidRuntime(992):  at com.example.igestao.Noticias$DownloadFilesTask.onPreExecute(Noticias.java:73)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.os.AsyncTask.execute(AsyncTask.java:511)
12-11 16:15:24.572: E/AndroidRuntime(992):  at com.example.igestao.Noticias.onCreate(Noticias.java:58)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.Activity.performCreate(Activity.java:4465)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-11 16:15:24.572: E/AndroidRuntime(992):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
12-11 16:15:24.572: E/AndroidRuntime(992):  ... 11 more 
```

这是我在 MainActivity 上得到的：

```
public class Noticias extends ListActivity {

static final String URL = "http://loc.grupolusofona.pt/index.php/?format=feed";
static final String KEY_ITEM = "item"; // parent node
static final String KEY_TITLE = "title";
static final String KEY_DESC = "description";
static final String KEY_LINK = "link";
static final String KEY_PUBDATE = "pubDate";
ProgressDialog progressDialog;
ArrayList<HashMap<String, Spanned>> menuItems = new ArrayList<HashMap<String, Spanned>>();
private DownloadFilesTask download;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_noticias);

    download = new DownloadFilesTask(null);
    download.execute();
}

private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    private Context context;
    public DownloadFilesTask (Context context){
        this.context = context;
    }

    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(context, "Loading1", "Loading2", true);
    }

    protected Long doInBackground(URL... urls) {

        XMLParser parser = new XMLParser(); 
        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml); 
        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        String data[] = new String[nl.getLength()];
        for (int i = 0; i < nl.getLength(); i++) {

            HashMap<String, Spanned> map = new HashMap<String, Spanned>();
            Element e = (Element) nl.item(i);
            data[i] = getTagValue("pubDate", e);

            SimpleDateFormat sdf = new SimpleDateFormat("EE, dd MMM yyyy HH:mm:ss z", Locale.UK);
            Date date = null;

            try {
                date = sdf.parse(data[i]); 
                String timeOfDay = new SimpleDateFormat("HH:mm").format(date); 
                java.sql.Timestamp timeStampDate = new Timestamp(date.getTime());
                java.sql.Timestamp timeStampNow = new Timestamp((new java.util.Date()).getTime());  

                long secondDiff = timeStampNow.getTime() / 1000 - timeStampDate.getTime() / 1000;
                int minuteDiff = (int) (secondDiff / 60);
                int hourDiff = (int) (secondDiff / 3600);
                int dayDiff = daysBetween(date, new Date());
                if (dayDiff > 0) {
                    System.out.println("Há " + dayDiff + " dia(s), às " + timeOfDay); 
                    data[i] = ("Há " + dayDiff + " dia(s), às " + timeOfDay);

                } else if (hourDiff > 0) {
                    System.out.println("Há " + hourDiff + " hora(s), às " + timeOfDay);
                    data[i] = ("Há " + hourDiff + " hora(s), às " + timeOfDay);

                } else if (minuteDiff > 0) {
                    System.out.println("Há " + minuteDiff + " minuto(s), às " + timeOfDay);
                    data[i] = ("Há " + minuteDiff + " minuto(s), às " + timeOfDay);

                } else if (secondDiff > 0) {
                    System.out.println("Há " + secondDiff + " segundo(s), às " + timeOfDay);
                    data[i] = ("Há " + secondDiff + " segundo(s), às " + timeOfDay);

                }
            } catch (ParseException e1) {
                e1.printStackTrace();
            } catch (java.text.ParseException e1) {
                e1.printStackTrace();
            }

            map.put(KEY_TITLE, Html.fromHtml(parser.getValue(e, KEY_TITLE)));
            map.put(KEY_DESC, Html.fromHtml(parser.getValue(e, KEY_DESC)));
            map.put(KEY_PUBDATE, Html.fromHtml(data[i]));
            map.put(KEY_LINK, Html.fromHtml(parser.getValue(e, KEY_LINK)));

            menuItems.add(map);

        }//endFOR
        return null;

    }

    protected void onPostExecute(Long result) {
        progressDialog.dismiss();
        adapter_listview();

        //onClick gets URL from ListView and opens it
        ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            String link = ((TextView) view.findViewById(R.id.link)).getText().toString();
            Intent in = new Intent(Intent.ACTION_VIEW);
            in.setData(Uri.parse(link));
            startActivity(in);

        }
    });

    }
}

private static String getTagValue(String sTag, Element e) { 

    NodeList nlList = e.getElementsByTagName(sTag).item(0).getChildNodes();

    Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();

}

public static int daysBetween(Date startDate, Date endDate) { 

    int daysBetween = 0;
    while (startDate.before(endDate)) {
        startDate.setTime(startDate.getTime() + 86400000);
        daysBetween++;
    }
    return daysBetween;

}

public void adapter_listview(){

    ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.linhafeed, 
            new String[] { KEY_TITLE, KEY_DESC, KEY_PUBDATE, KEY_LINK },
            new int[] { R.id.title, R.id.desc, R.id.pub, R.id.link });

    setListAdapter(adapter);

}
} 
```

有人可以告诉我我做错了什么吗？我已经阅读了有关 AsyncTask 的教程，但在这里没有任何效果。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:26:39.823

您将`null`作为上下文传递给 AsyncTask。而是通过`getBaseContext()`or `this`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:37:37.183

```
download = new DownloadFilesTask(null);
    download.execute();// this wrong method you pass null 
```

而不是使用这个

```
download = new DownloadFilesTask();
        download.execute(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:42:13.850

`download = new DownloadFilesTask(null);`

在上面的代码行中，您**传递的是 null**，**不应该这样做。**

**-**通过`Activity_Name.this`而不是`null`。

**例如：**

```
download = new DownloadFilesTask(Noticias.this);
download.execute(); 
```

# javascript - `_.forEach` 和 `$.each` 的区别

> ID：13824221
> 
> 赞同：20
> 
> 时间：2012-12-11T16:24:36.473
> 
> 标签：javascript, jquery, loops, foreach, underscore.js

这两个函数 `_.forEach`和`$.each`分别取自`underscore`和`jQuery`似乎做同样的事情。

偏好一种实现而不是另一种实现的可能原因是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T16:25:22.340

`_.forEach`并且`$.each`传递给回调的参数不同。

如果使用`_.forEach`，传递给回调的第一个参数是值，而不是键。
因此，如果您根本不关心您应该使用的密钥`_.forEach`。

其他区别：

1.  `_.forEach`它会更快一些，因为它`Arrray.prototype.forEach`在现代浏览器中使用本机。
2.  这个值也不同。jQuery 的行为不遵循标准，下划线的行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T16:27:08.217

它们都主要为IE8 中不可用的[forEach](http://documentcloud.github.com/underscore/docs/underscore.html#section-12)功能提供替代品。

如果您遍历数组，它们不会增加太多。

除了回调参数的顺序之外，主要区别在于，在 jQuery 中，该值也可用作回调调用的上下文（这就是为什么值不太重要，只是提供的第二个参数的原因）。除非您真的想避免将参数传递给函数，否则这并不是喜欢它的主要原因：

```
var product = 1;
$.each([1, 2, 3], function(){ product *= this }); 
```

大多数情况下，您不使用这两个库，因此您只需使用您拥有的库提供的迭代函数。

如果您碰巧同时导入了这两个库，我建议您使用下划线函数作为

*   它与数组上的标准 ECMAScript 函数最相似，因此您可以更轻松地在 IE8 死掉的那一天进行迁移
*   它更有效，因为它在可用时使用本机功能：

[见源](http://documentcloud.github.com/underscore/docs/underscore.html#section-12)：

```
...
if (nativeForEach && obj.forEach === nativeForEach) {
     obj.forEach(iterator, context);
... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-11T16:32:20.643

**jQuery**看起来像：

```
something.each( function(index, Element) ) 
```

**下划线**看起来像：

```
_.each(list, function(Element, index, list), [context])
// or
_(list).each(function(Element, index, list), [context]) 
```

**本机 array.forEach**看起来像：

```
array.forEach(function(Element, index, list), [context]) 
```

所以：

*   下划线保持与本机相同的参数顺序`forEach`
*   JQuery 和 Underscore 的实现有两个区别：
    *   JQuery 设置`this`为`Element`、native 和 Underscore 允许您提供自己的上下文
    *   Native 和 underscore 还提供列表本身作为回调的第三个参数。

* * *

编辑：为什么能够设置上下文很有用？

考虑一下你有某种对象：

```
var worker = new FooWorker();
worker.process(something);
worker.process(somethingElse); 
```

假设您想对数组中的每个值调用该方法。
使用 context 参数，您可以简单地说：

```
myArray.forEach(worker.process, worker); 
```

如果没有它，您需要更详细（并且每个元素再调用一次函数）：

```
// native
myArray.forEach( function(i, e) {worker.process(e);} );
// jquery
$(myArray).each( function() {worker.process(this); } ); 
```

这是 JQuery 的 foreaching 约定使事情变得不那么方便的一种情况。

# mysql - MySQL 查询通常很快，有时很慢（在我的网站上运行时）

> ID：13824222
> 
> 赞同：0
> 
> 时间：2012-12-11T16:24:36.303
> 
> 标签：mysql

我在我的 MySQL 数据库上有一个查询，用于在用户在自由格式的文本框中执行搜索后返回产品（在电子商务网站上）。

直到最近，用户搜索一直在快速运行。但是，在过去的几天里，搜索周期性地非常缓慢。这种情况每天大约持续 3 或 4 小时（全天随机分布）。

我还以为我的服务器有问题。但是现在我已经搬到另一台服务器上，同样的事情仍然发生。

我怀疑我使用的查询效率很低，也许这就是原因。但我不明白为什么通常查询可以运行得很快，而在其他时候却很慢。我会假设一个低效的查询总是很慢。

查询在两个表上运行。如果搜索“蓝色牛仔裤”，则查询将如下所示：

```
SELECT I.itemURL, I.itemTitle, I.itemPrice, I.itemReduced, I.itemFileName, I.itemBrand, I.itemStore, I.itemID, I.itemColour, I.itemSizes, I.itemBrandEn
FROM Item AS I, Search AS S
    WHERE I.itemID = S.itemID
        AND (S.searchStringTEXT LIKE '% blue %' OR S.searchStringTEXT LIKE 'blue %' OR S.searchStringTEXT LIKE '% blue')
            AND (S.searchStringTEXT LIKE '% jeans %' OR S.searchStringTEXT LIKE 'jeans %' OR S.searchStringTEXT LIKE '% jeans') 
```

项目是包含网站上所有产品的表格。它有大约 100,000 行。

搜索是一个包含产品 ID 以及与每个产品 ID 关联的标签的表。标签位于“searchStringTEXT”列中，并用空格分隔。例如，此列中的条目可能类似于“牛仔裤蓝色 calvin klein small”。

上面的搜索将找到所有带有标签“牛仔裤”和“蓝色”的商品。

理论上，Search 应该和 Item 有相同的行数；但是，由于我还没有解决一个问题，它的行数减少了大约 500 行，因此这些项目实际上被排除在搜索之外。

两个表的创建表详细信息如下：

```
CREATE TABLE `Search` (
  `itemID` int(11) NOT NULL,
  `searchStringTEXT` varchar(255) DEFAULT NULL,
  `searchStringVARCHAR` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`itemID`),
  KEY `indexSearch_837` (`itemID`) USING BTREE,
  KEY `indexSearch_837_text` (`searchStringTEXT`)
) ENGINE=InnoDB DEFAULT CHARSET=latin5 
```

和

```
CREATE TABLE `Item_8372` (
  `itemID` int(11) NOT NULL AUTO_INCREMENT,
  `itemURL` varchar(2000) DEFAULT NULL,
  `itemTitle` varchar(500) DEFAULT NULL,
  `itemFileName` varchar(200) DEFAULT NULL,
  `itemPictureURL` varchar(2000) DEFAULT NULL,
  `itemReduced` int(11) DEFAULT NULL,
  `itemPrice` int(11) DEFAULT NULL,
  `itemStore` varchar(500) DEFAULT NULL,
  `itemBrand` varchar(500) CHARACTER SET latin1 DEFAULT NULL,
  `itemShopCat` varchar(500) DEFAULT NULL,
  `itemTimestamp` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `itemCat` varchar(200) DEFAULT NULL,
  `itemSubCat` varchar(200) DEFAULT NULL,
  `itemSubSubCat` varchar(200) DEFAULT NULL,
  `itemSubSubSubCat` varchar(200) DEFAULT NULL,
  `itemColour` varchar(200) DEFAULT NULL,
  `itemSizes` varchar(200) DEFAULT NULL,
  `itemBrandEn` varchar(500) DEFAULT NULL,
  `itemReduction` float DEFAULT NULL,
  `ItemPopularity` int(6) DEFAULT NULL,
  PRIMARY KEY (`itemID`),
  KEY `indexItem_8372_ts` (`itemTimestamp`) USING BTREE,
  KEY `indexItem_8372_pop` (`ItemPopularity`),
  KEY `indexItem_8372_red` (`itemReduction`),
  KEY `indexItem_8372_price` (`itemReduced`)
) ENGINE=InnoDB AUTO_INCREMENT=970846 DEFAULT CHARSET=latin5 
```

在问题的标题中我说“（在我的网站上运行时）”，因为我发现在本地运行时查询的速度是一致的。但也许这只是因为我没有在本地测试它。

我正在考虑更改搜索表，使其成为 MyISAM 表，然后我可以使用全文搜索而不是“LIKE”。但是我仍然想弄清楚为什么我会遇到当前设置所遇到的情况。

非常感谢任何想法/建议，安德鲁

编辑：

这是 SELECT 语句的 EXPLAIN 结果：

```
id  select_type table   type    possible_keys   key key_len ref rows         Extra
1   SIMPLE  I   ALL PRIMARY NULL    NULL    NULL    81558   
1   SIMPLE  S   eq_ref  PRIMARY,indexSearch_837,indexSearch_837_text    PRIMARY 4       I.itemID    1   Using where 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:29:23.533

使用`LIKE`会导致查询缓慢，尤其是您拥有它的次数。这是因为`LIKE`扫描表中的所有行，即使有几百行也会导致问题（再加上您使用`LIKE`不同文本变体匹配的次数）。

只需要几个人同时加载运行此查询的页面即可真正减慢您的网站速度。此外，查询可能会在您的服务器上以较早的后台线程运行多次，从而导致您看到的长期减速。

如果您要定期执行文本搜索，请考虑为您的搜索使用基于 RAM 的索引解决方案，例如 Sphinx。您可以在那里执行文本搜索（与 MySQL 相比它将非常快），然后从 MySQL 表中检索所需的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:46:26.197

您可能想尝试使用`REGEXP`（[参考](https://stackoverflow.com/a/4808757/679449)）。停止使用隐式连接也是更好的做法。

```
SELECT I.itemurl, 
       I.itemtitle, 
       I.itemprice, 
       I.itemreduced, 
       I.itemfilename, 
       I.itembrand, 
       I.itemstore, 
       I.itemid, 
       I.itemcolour, 
       I.itemsizes, 
       I.itembranden 
FROM   item AS I 
       INNER JOIN search AS S 
               ON I.itemid = S.itemid 
WHERE  S.searchstringtext REGEXP ' blue | blue|blue ' 
       AND S.searchstringtext REGEXP ' jeans | jeans|jeans ' 
```

# c# - 如何存储数据库密码

> ID：13824227
> 
> 赞同：6
> 
> 时间：2012-12-11T16:24:52.330
> 
> 标签：c#, passwords

我相信已经有很多讨论了，但是如何在应用程序中存储密码？（我的意思不是存储在数据库表中的用户密码，而是建立连接字符串的密码）

我已经看到了一些建议，例如将其加密存储在诸如 xml 文件之类的平面文件中，然后在运行时读取它+解密它。如果这个应用程序在服务器上运行，这是一个很好的选择，但是如果应用程序将被部署到最终用户的电脑上呢？即平面文件将被复制到用户的电脑。这仍然是一个好习惯吗？（我的直觉是“不”）

我知道 SecurityString 的存在，但是我也在一篇文章中读到 SecurityString 也可以很容易地被破解。

使用 Windows 7 附带的 Password Vault 是个好主意吗？有没有以编程方式使用它的好例子？我在 msdn 中看到过一个示例，但首先它被标记为“windows 8”，其次当我下载文件并在 Visual Studio 2012 EXPRESS 中打开解决方案时，它无法打开。

欢迎任何建议......非常感谢。

- 更新 -

假设该应用程序将在 Windows 域内的几台 PC 上运行。(1) 在启动时，应用程序将执行 LDAP 身份验证（活动目录）。只有在认证成功后，应用程序才会继续执行，并且（2）应用程序在后台可以连接数据库，接受用户输入来查询数据库，这就是 db passwd 发挥作用来建立连接字符串的地方（不，这不是 SQL SERVER 数据库，所以我认为使用 Windows 身份验证的选项不可行，除非使用商业插件）。

db 位于同一个域中，并且已设置为允许特定范围的 IP 地址，并且启用了 SSL。简而言之，从这个意义上说是相当安全的。唯一不安全的是如何存储应用程序的 db passwd。

引起我注意的是 Mysql Workbench。它将保存数据库连接，包括存储在密码库中的密码。那是mysql自己实现的密码库，我很好奇它是怎么做的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:33:31.320

没有办法向您的用户提供密码并期望它保持安全。即使它隐藏在您编译的应用程序中并使用单向哈希进行哈希处理，确定的人也会将其恢复。

相反，您应该考虑您的安全架构。

如果您正在提供应用程序连接的服务，那么您应该考虑提供某种更强大的身份验证作为公共 API 的一部分。

如果连接字符串用于连接到分布式软件的另一部分，那么您应该使最终用户可配置密码并将其存储在密钥环或其他加密存储中。

- 更新 -

看起来这可能是您正在寻找的；

[http://www.microsoft.com/indonesia/msdn/credmgmt.aspx](http://www.microsoft.com/indonesia/msdn/credmgmt.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T16:31:22.770

如果应用程序将部署在您无法或很少控制系统安全的地方，即外部用户 pc，那么创建用户登录可能是值得的。针对此登录对用户进行身份验证，然后从相对安全的服务器使用您提供数据所需的任何凭据。

这并不能保证安全性，但如果您将来需要更改密码，或者个别用户受到威胁，维护起来会更容易。

# python - gmail IMAP 克隆邮箱：发出具有相同 UID 的重复电子邮件

> ID：13824230
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:24:59.243
> 
> 标签：python, email, imap, google-apps

我正在尝试将 Google Apps 邮箱复制到另一个 Google 帐户。我在 Python 中使用 IMAP 库。

我能够为每个邮箱获取一个唯一的 UID。我可以使用您的 UID 从每个邮箱下载每条消息。

问题是唯一的 UID 是每个邮箱，而不是每个帐户。例如，一封电子邮件可能位于两个邮箱中，或者有两个标签。它将显示为两个单独的 UID。如果我两次下载电子邮件，它们就不再是同一个电子邮件。当一个被删除时，另一个将保留，等等。

Gmail 有一个[X-GM-MSGID](https://developers.google.com/google-apps/gmail/imap_extensions#access_to_the_gmail_unique_message_id_x-gm-msgid)，它为每个帐户提供一个唯一 ID。

目前，我知道获取此 X-GM-MSGID 的唯一方法是首先获取 UID 并请求它是 X-GM-MSGID。如果收件箱有 10,000 封电子邮件，这将成为很多请求。是否有另一种方法可以获取收件箱中所有电子邮件的 X-GM-MSGID，或者甚至更好，所有邮箱？

我相信一旦我有了每封电子邮件的唯一 ID，我就可以获取每封电子邮件的标志、时间和内容，并将其附加到新服务器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:32:49.387

您可以使用批量获取获取多个 X-GM-MSGID：

```
FETCH 1:* X-GM-MSGID 
```

但是，有更好的方法。
完全在 All Mail 文件夹中操作（`\AllMail`来自 XLIST），并为每封邮件获取和存储 X-GM-LABELS。

# c - 当 TCP keep-alive 中断连接时，我会得到什么套接字错误？

> ID：13824231
> 
> 赞同：9
> 
> 时间：2012-12-11T16:25:01.473
> 
> 标签：c, linux, sockets, tcp

我有一组保持活动状态的 TCP 套接字（间隔 1 分钟），由[`select(2)`](http://linux.die.net/man/2/select) 循环控制（选择读取）。

*   `select(2)`如果 set 中的一个套接字发生 keep-alive 超时，是否会返回错误？
*   哪个错误会`read(2)`返回？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:43:30.747

*   `select()`如果为它选择的套接字之一发出错误信号，它本身不会返回错误。[事实上，API 不能以这种方式指示每个套接字的错误，因为两个不同的套接字可能在一次调用`select()`. 哪个会`select()`回来？】
*   在循环的每次迭代之后，您改为使用 FD_ISSET 宏在每个标记为可读的套接字上`select()`尝试 a 。`read()`
*   任何时候套接字设置了挂起的错误，它的读取事件（和写入事件）都会发出信号并`select()`返回，允许您立即获取由于保持活动而导致的超时错误。请注意，选择将套接字标记为读取并不表示有数据要读取，只是表示尝试读取不会阻塞。如果套接字有待检索的未决错误，则读取不会阻塞。在尝试处理任何数据之前，两者都`read(2)`首先检索套接字上的任何未决错误。`write(2)`

    > 当对带有 O_NONBLOCK 清除的输入函数的调用不会阻塞时，无论该函数是否会成功传输数据，都应认为描述符已准备好读取。（该函数可能返回数据、文件结束指示或指示它被阻塞的错误以外的错误，并且在每种情况下，描述符应被视为已准备好读取。） [ [POSIX:select()](http://pubs.opengroup.org/onlinepubs/9699919799/) ]

*   最后返回什么错误？至关重要的是，这取决于 keepalive 是如何失败的。`ETIMEDOUT`如果另一端完全消失，你会得到。如果发生数据包传递错误，您将通过它来代替（因此，如果保持活动数据包收到 ICMP 错误回复，例如“主机不可达”，您将已经`EHOSTUNREACH`交付）。[有关这些情况的更多详细信息，请参阅 Stevens，“Unix Network Programming, vol 1”。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:11:59.130

`select()`在 中设置一个位`FDSET` ，指示哪个套接字已触发。使用[FD_ISSET](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=/com.ibm.ztpf-ztpfdf.doc_put.cur/gtpc2/cpp_fd_isset.html)宏来确定哪个套接字请求服务。

# ajax - Ajax 未将变量发布到 php 文件

> ID：13824232
> 
> 赞同：0
> 
> 时间：2012-12-11T16:25:01.143
> 
> 标签：ajax, post, drag-and-drop, jquery-ui-draggable

我正在尝试在“index.php”中使用拖放功能并将变量“元素”发布到“store.php”，在最终版本中它应该更新数据库。

'store.php' 被调用并运行，但变量没有被传递。我在下面附上了一个缩短版本的“store.php”，并带有一个陷阱来捕捉这个，所以在这个版本中，我得到了“未设置元素值”的响应。

索引.PHP：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
<script src="scripts/jquery-1.3.2.min.js"></script>
<script src="scripts/jquery-ui-1.7.1.custom.min.js"></script>
<link rel="stylesheet" href="style.css">

<div class="content_box" id="content_box_drag" onMouseOver="drag();">
    Drag label
    <?php for($i=0; $i<5;$i++) {
        echo "<p class='dragelement' id='dragelement_$i'>Ferrari_$i</p>";
    } ?>
</div>

<div class="content_holder_box" id="content_box_drop">
    Drop here
    <p class="dropper"></p>
</div>

<div style="clear:both;"></div>
    <br/><br/>
<div id="search_result"></div> 

<script>
    //initialize the drag and drop functions.
   function drag(){

    $( "#content_box_drag p" ).draggable({
        appendTo: "body",
        helper: "clone",
        revert: "invalid"

     });

    $( "#content_box_drop p" ).droppable({
        activeClass: "dropper_hover",
        hoverClass: "dropper_hover",
        accept: ":not(.ui-sortable-helper)",
        drop: function( event, ui ) {
             var ele = ui.draggable.text();
                $.ajax({
                url: "store.php",
                method: "POST",
                data: "element=" + ele,
                success: function(result) {
                    alert(result);
                }
           });
        }
    });
   }
</script> 
```

STORE.PHP（缩短）：

```
<?php

if(isset($_POST['element'])){
    $element=$_POST['element'];
} else {
    echo "Element value not set";
    exit;
}

?> 
```

任何想法为什么没有设置变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:57:20.707

参数`method`不存在，改为`type: "POST"`

将您的数据设置为 JSON 映射，更改`data: "element=" + ele`为`data: {element : ele}`

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)（搜索`type`说明）

```
$( "#content_box_drop p" ).droppable({
    activeClass: "dropper_hover",
    hoverClass: "dropper_hover",
    accept: ":not(.ui-sortable-helper)",
    drop: function( event, ui ) {
         var ele = ui.draggable.text();
            $.ajax({
            url: "store.php",
            type: "POST",
            data: {element : ele},
            success: function(result) {
                alert(result);
            }
       });
    }
}); 
```

# android - 如何列出按时间排序的SD卡上的图像

> ID：13824233
> 
> 赞同：0
> 
> 时间：2012-12-11T16:25:04.210
> 
> 标签：android, image, android-sdcard

我可以使用以下方法获取 sd 卡中的图像列表

但这些没有排序

我怎样才能让它们按名称或时间排序

提前致谢

```
String ExternalStorageDirectoryPath = Environment
                    .getExternalStorageDirectory().getAbsolutePath();

            String targetPath = ExternalStorageDirectoryPath + "/somedirectoryname/";

            File targetDirectory = new File(targetPath);

            File[] files = targetDirectory.listFiles();`
for (File file : files1) {
                    list.add(file.getAbsolutePath().toString());
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:31:12.727

**-**使用`lastModified()`File 的方法来获取文件被修改的时间。

**-**`Collection`将它们存储在`ArrayList<File>`.

**-**用于根据**时间和名称**`java.util.Comparator<T>`进行**比较和排序**。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:41:19.277

如果您使用内置的内容提供程序，可能会更容易

```
 MediaStore.Images.Media.query(cr, uri, projection, where, orderBy) 
```

像这样的东西：

```
 String[] projection = {MediaColumns._ID, MediaColumns.DISPLAY_NAME, MediaColumns.DATE_ADDED};
    Cursor c = MediaStore.Images.Media.query(getContentResolver(), MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null, MediaColumns.DATE_ADDED); 
```

然后你可以循环光标来做你需要的任何事情。**

# jquery - 选择一个 li 项目，然后启用一个输入按钮

> ID：13824235
> 
> 赞同：0
> 
> 时间：2012-12-11T16:25:08.417
> 
> 标签：jquery

我创建了一个列表，当我选择突出显示时，我只希望一次突出显示一个项目 - 同样，当项目突出显示时，我需要启用按钮 - 示例如下：

```
 $('#sn-list li a').click(function () {
        $(this).parent('li').toggleClass('highlight');

        if (!currentPage.parent().hasClass('highlight')) {
            $('#tabulation_button').removeProp("disabled");
            alert('hello');
        }
        else {
            $('#tabulation_button').prop("disabled", "disabled");
        }
    }); 
```

[http://jsfiddle.net/zidski/rEH5L/](http://jsfiddle.net/zidski/rEH5L/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:27:03.673

代替

```
$(this).parent('li').toggleClass('highlight'); 
```

和

```
$(this).parent('li').addClass('highlight').siblings().removeClass('highlight'); 
```

其次，我看不到这个变量是在哪里声明的`currentPage`

这在当前上下文中没有任何意义，因为这些没有在您提到的代码中定义..

```
if (!currentPage.parent().hasClass('highlight')) { 
```

**[检查小提琴](http://jsfiddle.net/rEH5L/1/)**

# python - 保存for循环的每次迭代

> ID：13824236
> 
> 赞同：0
> 
> 时间：2012-12-11T16:25:13.440
> 
> 标签：python, django

我正在发出一个返回序列化数据的请求。我并遍历数据并检查它是否存在于数据库中。如果存在则忽略，如果不存在则保存。我遇到的问题是 for 循环只保存第一条记录，即使它遍历数据的所有键并将其与数据库中的内容进行比较。我的代码如下：

```
b = MyModel()
data #The serialized data
existingData = Off.object.filter(...)

for key in data:
    if existingData.filter(id_str=key['id_str']).exists():
        pass #If I place a print key['id_str'] here, all skipped items are printed.
    else:
        b.x = key['x']
        b.y = key['y']
        b.save() 
```

每次函数运行时，计数器都会在`b.save()`计数器增加后放置在 else 语句的底部，但只有通过检查的第一条记录被保存，数据中的其余项目不保存。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:44:26.120

首先，您可能会**覆盖同一个** `b`对象，而不是**创建一个新**对象；我的意思是你检查带有 some 的对象`id_str`不存在，但你只是覆盖`b`'s`x`和`y`属性。也许你需要做的是：

```
for item in data:
    if not existingData.filter(id_str=item.get('id_str')).exists():
        MyModel.objects.create(id_str=item.get('id_str'),
                               x=item.get('x'),
                               y=item.get('y')) 
```

希望这可以帮助 ：）

干杯!

# php - 通过 ajax 到 php 脚本将 JSON 数组打印到屏幕

> ID：13824244
> 
> 赞同：0
> 
> 时间：2012-12-11T16:25:32.800
> 
> 标签：php, jquery, html, ajax, json

我一直在将我的代码与网络上的其他示例进行比较，但仍然找不到我的错误。当我加载页面并单击提交时，屏幕上没有任何反应。但是，在 Firebug 中，我收到`POST 200 OK`了 POST 响应选项卡中应该显示的 PHP 脚本。

由于 Firebug 做出了适当的响应，我对哪里出了问题感到困惑。

基本 HTML 表单

```
<form id="form" action="" method="post">
    <input type="submit" name="submit" id="submit" value="submit"/>
</form>
<div id="results"></div> 
```

jQuery 创建一个 JS 对象。对象通过`JSON.stringify`和发送`JSON.parse`。提交事件处理程序触发`$.ajax`. JSON 数据被传递到`ok.php`，理论上它应该返回脚本中调用的 PHP 信息。

```
var addIt = new Object();

addIt.one = "one";
addIt.two = 2;
addIt.three = addIt.one +" + "+ addIt.two +" = "+ "three";

$jsonAddIt = JSON.stringify(addIt);
$jsonAddIt = JSON.parse($jsonAddIt);

$('#submit').click(function(e){
    e.preventDefault();

    $.ajax({
        type: 'POST',
        url: 'ok.php',
        dataType:'json',
        data: ({ json:$jsonAddIt }),
        success:function(data) {
            $("#results").html(data);
        }
    });
}); 
```

PHP

```
<?php
    $ajaxInfo = $_POST["json"];
    if ($ajaxInfo !="")
    {
        echo "info transfered"; 
    }
    else 
        echo "nothing";
?> 

<div id="returned">
    <?php print_r($ajaxInfo); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:31:39.363

将 dataType 设置为 JSON 将使 jQuery ajax 请求自动将其解析为 Javascript 对象。您在这里有两个解决方案。要么更改 ajax 请求的 dataType：

```
$.ajax({
                     type:'POST',
                        url: 'ok.php',
                        dataType:'text',
                        data: ({json:$jsonAddIt}),
                        success:function(data){
                             $("#results").html(data);
                            }
}); 
```

或者你可以使用[这个](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)库来字符串化对象：

```
$.ajax({
                     type:'POST',
                        url: 'ok.php',
                        dataType:'json',
                        data: ({json:$jsonAddIt}),
                        success:function(data){
                             $("#results").html(JSON.stringify(data));
                            }
}); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:34:44.350

这两行不需要，第二行撤消第一行。只需将它们都删除。

```
$jsonAddIt = JSON.stringify(addIt);
$jsonAddIt = JSON.parse($jsonAddIt); 
```

如果 ajax 请求成功，此行应该`[object Object]`在您的 div 中为您提供，否则它将什么也不做（这是您当前的结果）。

```
$("#results").html(data) 
```

目前，您的 ajax 请求实际上失败了，因为它没有返回预期的 JSON 数据类型。如果您将 dataType 更改为“html”，它将起作用。

```
$.ajax({
    type:'POST',
    url: 'ok.php',
    dataType:'html',
    data: {json:addIt},
    success:function(data){
        $("#results").html(data);
    }
}); 
```

还，

```
var addIt = new Object(); 
```

应该

```
var addIt = {}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:37:16.977

我认为问题出在你的`dataType`. 通过说`json`，您是在告诉 jQuery 您期望返回的内容是`json`. php 可能在标头中将内容类型设置为 html。您应该能够删除它，jQuery 会自动从响应的标题中找出它。

# wpf - 尝试打开 CD 上的 xaml 文件会在某些计算机而不是其他计算机上引发 IOException

> ID：13824246
> 
> 赞同：0
> 
> 时间：2012-12-11T16:25:44.193
> 
> 标签：wpf, xaml

我有一个 WPF 应用程序，它显示位于 CD 或 DVD 上的松散 XAML FlowDocuments（带框架）。这在过去工作得很好，但现在突然程序在特定的计算机上崩溃了。非常奇怪的是，这台计算机与其他可以正常工作的计算机 100% 相同（它们的硬盘驱动器甚至是从同一个硬盘驱动器映像中成像的）。

不仅我的应用程序崩溃，而且当我尝试使用 Internet Explorer 查看这些松散的 xaml 文件时，它也无法显示它们（它们在其他计算机上的 IE 中显示正常）。单击 IE 中的更多信息按钮显示我：

System.IO.IOException：媒体被写保护。

我假设这是我的应用程序遇到的相同异常，尽管我实际上无法告诉我的程序遇到的实际异常，因为在我调用的 Frame.Navigate 函数周围放置了一个 try-catch 以显示 xaml文件实际上并没有捕捉到这个异常（奖励问题：为什么会这样？），程序只是崩溃（而且我在这台计算机上没有 VS 或远程处理功能，所以我无法运行调试器）。

更奇怪的是例外情况，如果我只想读取媒体，那么媒体是否写保护又有什么关系呢？

# javascript - 如何在 Javascript 中创建新的对象元素？

> ID：13824249
> 
> 赞同：2
> 
> 时间：2012-12-11T16:25:59.493
> 
> 标签：javascript, jquery, object, element

我很难理解我在这里做错了什么。

我有一个空对象：

```
if ( doc._attachments === undefined ){
    doc._attachments = {};
}
var attmtid = 123; 
```

我试图这样填充：

```
doc._attachments[attmtid].revpos = "abc"; 
```

但是我不断收到来自 Firebug 的未定义错误：

```
doc._attachments[attmtid] is undefined 
```

并且无法真正理解它。

**问题：**
有人可以告诉我我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:27:56.437

为什么不这样做：

```
doc._attachments[attmtid] = {
    revpos: "abc"
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T16:28:48.247

`doc._attachments[attmtid]`是未定义的，这意味着您需要将其定义为某物。一个数组、一个对象、一个字符串等。例如，您可以将其设为另一个对象：

```
doc._attachments[attmtid] = {}; 
```

然后能够在该对象上设置属性：

```
doc._attachments[attmtid].revpos = "abc"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:32:12.197

`doc._attachments[attmtid]`未初始化为对象，因此您无法动态分配 revpos 属性。

这应该解决它：

```
doc._attachments[attmtid] = {};
doc._attachments[attmtid].revpos = "abc"; 
```

注意：这是基于您想要一个`doc._attachments.123`属性（这是问题中的示例代码将创建的）而不是`doc._attachments.attmid`属性的期望。

# python - 在 PyDev 中连接字符串和整数不会引发错误

> ID：13824259
> 
> 赞同：0
> 
> 时间：2012-12-11T16:26:35.673
> 
> 标签：python, exception, python-2.7, pydev

```
import sys
class test1:
    def __init__(self) :
        print"intialized"

    def yrt(self):
        try:
            name="gokl"
            age="24"
            address="hjk"
            pincode=516101
            #print "My name is %s,and my age is %s, my address is %s and my pincode is " %(name,age,address)
            **print name+pincode**
        except Exception, hj:
            sys.exit(1)

if __name__ == "__main__":
    gh=test1()
    try:
        gh.yrt()
    except Exception, ex :
        sys.exit(1)
    sys.exit(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:36:52.543

您已经明确捕获并消除了错误。如果你想让它被扔掉，你不应该抓住它。

# node.js - 玉节点js中具有动态数据的连接字符串

> ID：13824263
> 
> 赞同：0
> 
> 时间：2012-12-11T16:26:47.390
> 
> 标签：node.js, express, pug

任何人都知道如何将字符串与动态数据连接起来以将其传递到表单模板中？

我的控制器是：

```
exports.edit = function(req, res) {
    var id = req.params.id;
    Product.findOne({id: id}, function(err, doc){
        if (err) {
            res.send("There is no product with this " + id + "!")
        } else {
            res.partial('products/edit', {title: "Edit", product: doc});
        }
    });
}; 
```

我的 products/edit.jade 文件是：

```
-if (product != null)
    h2 Edit
    form.form-edit(method="post", action="products/#{product.id}", name="form-edit")
        !=partial("inc/form-edit", { type: "Edit", image: "../img/" + #{product.image}})
                                                  // Doesn't work, i can pass only strings to my form template 
```

我的 inc/form-edit.jade 文件是：

```
.....
    input#bt-prod-edit.btn.btn-primary(type="button", value="Parcourir")
    img(src="#{image}")
    div.align-center
      input.bt-cancel.btn(type="button", name="bt-cancel", value="Annuler")
      input#bt-prod-edit.btn.btn-primary(type="submit", name="bt-prod-edit", value="#{type}") 
```

所以如果我这样做

```
!=partial("inc/form-edit", { type: "Edit", image: "image_path"}) 
```

工作正常，但如果我尝试传递任何动态数据，我会收到一条错误消息：Unexpected token ILLEGAL

有谁知道为什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:33:52.597

代替：

```
!=partial("inc/form-edit", { type: "Edit", image: "../img/" + #{product.image}}) 
```

尝试：

```
!=partial("inc/form-edit", { type: "Edit", image: "../img/" + product.image}) 
```

# django - Django 自定义小部件将 IntegerField 拆分为模型表单中的小时和秒字段

> ID：13824266
> 
> 赞同：2
> 
> 时间：2012-12-11T16:26:54.130
> 
> 标签：django, custom-widgets

我将持续时间作为分钟存储在 IntegerField 中。在我的前端表单（模型表单）中，我想将输入拆分为一个字段（分钟）和一个字段（小时）。我也希望能够使用 InLineFormset。这可以以一种好的方式完成吗？我可以使用 javascript，但这对我来说似乎不是一个好的解决方案，或者是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:31:23.407

您想使用[MultiWidget](https://docs.djangoproject.com/en/1.4/ref/forms/widgets/#django.forms.MultiWidget)。我建议您覆盖该字段本身。查看[用于创建自定义字段的文档](https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/)。

[如果可以的话，将数据存储为代表python timedelta](http://docs.python.org/2/library/datetime.html#timedelta-objects)的浮点可能是值得的。您可能希望向您的字段添加一些自定义方法。如果您想对您的字段进行任何计算，使用 timedelta 将很有用。

您可能还想阅读一些有关[表单验证](https://docs.djangoproject.com/en/1.4/ref/forms/validation/)的内容。

我已经在 Django 1.4 上使用基于浮点的自定义字段测试了以下小时、分钟、秒 multiwidget -

```
from datetime import timedelta
from django import forms
from django.db import models
from django.core import exceptions, validators

def validate_timedelta(value):
    if not isinstance(value, timedelta):
        raise exceptions.ValidationError('A valid time period is required')

class SplitHoursMinsWidget(forms.widgets.MultiWidget):

    def __init__(self, *args, **kwargs):
        widgets = (
            forms.TextInput(),
            forms.TextInput(),
            forms.TextInput(),
        )
        super(SplitHoursMinsWidget, self).__init__(widgets, *args, **kwargs)

    def decompress(self, value):
        if value:
            return [value.seconds // 3600, (value.seconds // 60) % 60,
                    value.seconds % 60]
        return [None, None, None]

    def format_output(self, rendered_widgets):
        return ("HH:MM:SS " + rendered_widgets[0] + ":" + rendered_widgets[1] +
                 ":" + rendered_widgets[2])

    def value_from_datadict(self, data, files, name):
        hours_mins_secs = [
            widget.value_from_datadict(data, files, name + '_%s' % i)
            for i, widget in enumerate(self.widgets)]
        try:
            time_delta = (timedelta(hours=float(hours_mins_secs[0])) +
                          timedelta(minutes=float(hours_mins_secs[1])) +
                          timedelta(seconds=float(hours_mins_secs[2])))
        except ValueError:
            return None
        else:
            return time_delta

class TimeDeltaFormField(forms.Field):

    widget = SplitHoursMinsWidget

class TimeDeltaField(models.Field):

    __metaclass__ = models.SubfieldBase

    description = "Field to hold a python timedelta object"

    default_validators = [validate_timedelta, ]

    def to_python(self, value):
        if value in validators.EMPTY_VALUES or isinstance(value, timedelta):
            return value
        try:
            return timedelta(seconds=float(value))
        except:
            raise exceptions.ValidationError('A valid time period is required')

    def get_prep_value(self, value):
        return float(value.days * 86400 + value.seconds)

    def get_internal_type(self):
        return 'FloatField'

    def formfield(self, **kwargs):
        defaults = {'form_class': TimeDeltaFormField}
        defaults.update(kwargs)
        return super(TimeDeltaField, self).formfield(**defaults) 
```

值得注意的是，这并没有提供任何有用的输入级别验证（在分钟和秒输入元素中都可以输入超过 60 个）。也许这最好用javascript来解决。

# excel - Excel 查询（也许是 VLookUp？）

> ID：13824270
> 
> 赞同：0
> 
> 时间：2012-12-11T16:26:59.370
> 
> 标签：excel, null, vlookup

这是场景：

我有两列。一列包含 1638 行（上周出现在系统中的客户）。第二列包含 1488 行（本周系统中的客户）。这不仅仅是两个数字的差异，因为一些客户已经增加，一些客户已经丢失。例如，我知道系统中的客户（1638-1488）少了 150 个，但有可能增加了 50 个客户而丢失了 200 个。
我的同事让我做一个Vlookup，从上周到本周没有匹配的地方，我会看到#null。我可以使用数据透视表来计算#null 的总和。

你的想法是什么？提前致谢

另外，我希望我很清楚。如果您需要更多信息，我很乐意提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:34:06.930

使用条件格式是另一种选择 - 无需占用已占用的单元格。

`ColumnA`使用 `=ISNA(MATCH(A1,B:B,0)`和`ColumnB`with格式化`=ISNA(MATCH(B1,A:A,0)`并应用到适合的范围。

（假设这两个列表位于前两列。）

![SO13827174 示例](../Images/e6ad49903a892f10289583d87d55409f.png)

可以通过按颜色过滤来提取收益和/或损失列表，并且也可以通过这种方式提供计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:10:18.447

MATCH 可能是比 VLOOKUP 更好的选择，因为您需要结合 IF 语句和 ISNA。我将假设上周的客户列表在 A 列中，而本周的在 B 列中。

```
=IF(ISNA(MATCH(B2, A:A, 0)), "New Customer", "Old Customer") 
```

此代码从单元格 B2 中获取值并在 A 列中查找它。如果找到，则返回“旧客户”，否则返回“新客户”。您可以更改 IF 语句的输出以满足您的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:58:34.817

最后 2 个步骤不是必需的，但有利于格式化：

*   添加标题，thisWeek 和 lastWeek 然后旋转结果。
*   将 thisWeek 和 lastWeek 添加到 Row Labels 区域。
*   设计功能区 >> 报告布局 >> 以表格格式显示
*   在枢轴右键单击小计并删除。

现在您只需过滤空白即可查看不可用的客户。您还可以将标签拖到“值”框中以获取计数（如果需要）。

# connection - 在“切换手机网络”（F8）或飞行模式后将 adb 重新连接到 Android 模拟器？

> ID：13824279
> 
> 赞同：2
> 
> 时间：2012-12-11T16:27:23.520
> 
> 标签：connection, adb

如果我在 Android 模拟器获得键盘焦点时不小心按了 F8 键，它会失去 Internet 连接，因为这是“切换单元网络”键盘快捷键。没关系，再次按 F8，模拟器中的 Internet 再次启动，但它与 adb 的连接丢失。恢复的唯一方法是关闭模拟器并重新启动它。如果我在模拟器中选择“飞行模式”，然后退出飞行模式，也会发生同样的事情。

我很容易意外按下 F8，因为它是我使用的 IntelliJ Idea 环境中的“跳过”调试器键。我知道我可以在想法中更改键盘快捷键，所以不要给我发这个答案...使用 F8 或飞行模式开/关的另一个原因是有时 Internet 连接在模拟器中中断，并且切换飞行模式会恢复它 -但是 adb 连接已死...

如果我们找不到好的解决方法，我们将不胜感激这方面的任何帮助，或者帮助向 Google 开发人员记录错误以解决此问题。

格雷格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:32:33.850

我想我找到了答案。再次按F8在模拟器中重新启用上网后，执行如下：

adb 杀死服务器

在我的电脑上，然后使用 adb start-server 或任何其他 adb 命令，它会恢复与模拟器的连接。伟大的！

最好将模拟器中的 F8 键更改为其他键以避免与 IntelliJ Idea 环境冲突，或完全禁用它。

格雷格

# c++ - 可以做些什么来优化离开方法和清空局部变量堆栈所需的时间？

> ID：13824281
> 
> 赞同：2
> 
> 时间：2012-12-11T16:27:27.327
> 
> 标签：c++, optimization, stack

我有一种方法负责获取 openGl 三角形网格并将其转换为 3ds 文件。这种方法称为`exportShape()`. 要执行此转换`exportShape()`，会创建一堆非常大的向量和 hash_map。目前，从调用的最后一行`exportShape()`代码到下一行代码`exportShape()`最多可能需要 5 分钟。我确信所有这些时间都花在了清空非常大的局部变量堆栈上，因为如果我将所有局部向量和 hash_maps 移动到全局范围，该方法会立即存在，正如我所期望的那样。

为什么我能够在几秒钟内填充所有这些本地数据结构，而将它们从堆栈中弹出需要几分钟？如何优化离开`exportShape()`和清除堆栈的过程？

**编辑：**

被删除的对象只包含字符串、双精度和整数——没有自定义析构函数。

我几乎解决了我自己的问题。在发布模式下运行是一个*巨大*的性能提升（~20 倍）。尽管如此，该过程仍会挂起几秒钟。还有什么可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:59:12.250

第一个实例的问题是您正在使用调试分配器，它用位模式（例如`0xfdfdfdfd`）标记释放的内存，以帮助检测对释放内存的访问。这显然需要时间，因为它必须遍历所有释放的内存。

为了进一步加快速度，您可以使用范围分配器，例如[Boost Pool Library](http://www.boost.org/doc/libs/1_47_0/libs/pool/doc/index.html)；另请参阅[创建范围内的自定义内存池/分配器？](https://stackoverflow.com/questions/3670828/creating-a-scoped-custom-memory-pool-allocator)

# jquery - 意外地 jquery 验证只显示第一个必需的消息

> ID：13824288
> 
> 赞同：0
> 
> 时间：2012-12-11T16:27:51.987
> 
> 标签：jquery, validation

我在项目中不像 $(sth)validate{} 那样做某事，它的工作方式与我预期的一样，但在另一个项目中，我只能看到一个验证错误消息，第一个，然后我填写它，然后单击提交按钮，它不检查其他输入：

我自己的功能如下，我可以在输入“名字”的值后看到“这里”，但如果我不输入中间名和姓氏，我需要错误消息。

```
function assembleAndSaveContact(){

if($("form#form_validation_reg_generate_contact").valid()){
console.log('here');
}
} 
```

xhtml代码：

```
<!-- validation -->
<script src='#{applicationBean.resourcePath}/admin/lib/validation/jquery.validate.min.js'></script>
<!-- sticky messages -->
<script src='#{applicationBean.resourcePath}/admin/lib/sticky/sticky.min.js'></script>
<script src="#{applicationBean.resourcePath}/admin/bootstrap/js/bootstrap.min.js"></script>
<li><a onclick="assembleAndSaveContact();" class="btn-mini" href="#" style="float: left;"><i class="splashy-mail_light_new_2"></i>Save and Close </a></li>
<fieldset>
    <form id="form_validation_reg_generate_contact">
         Profile
        <div style="clear: both; height: 1px; background: #CCCCCC;margin-bottom: 6px; margin-top: 6px">
        </div>
        <div class="control-group" style="margin-bottom: 6px">
            <div class="span4" style="margin: 0px">
                <label class="control_label_compose"><a data-toggle="modal" href="#adrBook">First Name</a></label>
            </div>
            <div class="span8" style="margin: 0px">
                <input class="span12 required" type="text" id="firstName"/>
            </div>
        </div>
        <div class="control-group" style="margin-bottom: 6px">
            <div class="span4" style="margin: 0px">
                <label class="control_label_compose"><a data-toggle="modal" href="#adrBook">Middle Name</a></label>
            </div>
            <div class="span8" style="margin: 0px">
                <input class="required span12" type="text" id="middleName"/>
            </div>
        </div>
        <div class="control-group" style="margin-bottom: 6px">
            <div class="span4" style="margin: 0px">
                <label class="control_label_compose"><a data-toggle="modal" href="#adrBook">Last Name</a></label>
            </div>
            <div class="span8" style="margin: 0px">
                <input class="span12 required" type="text" id="lastName"/>
            </div>
        </div>
    </form>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:46:40.670

为了使验证插件工作，每个输入都必须有一个`name`属性。如果你`name`为每个表单元素添加一个唯一的属性，一切都会开始工作。

即改变你的表单元素看起来像这样：

```
<input class="span12 required" type="text" name="firstName" id="firstName"/>
<input class="required span12" type="text" name="middleName" id="middleName"/>
<input class="span12 required" type="text" name="lastName" id="lastName"/> 
```

看到它在这里工作：http: [//jsfiddle.net/ryleyb/B78Wt/](http://jsfiddle.net/ryleyb/B78Wt/)

# git - 在 git-clone 期间使用主动模式 FTP 而不是被动模式？

> ID：13824289
> 
> 赞同：3
> 
> 时间：2012-12-11T16:27:52.630
> 
> 标签：git, curl, ftp, git-clone

我在远程服务器上有一个 GIT 存储库，我想通过 FTP 访问它。由于某些不幸的原因，服务器只允许主动模式 FTP 而不是被动模式。即，如果我使用 curl（与使用的相同客户端`git clone`）直接下载文件，则以下命令有效：

```
curl -P - ftp://user:pass@server/file 
```

但是`-P -`取出会导致 curl 挂起直到超时。

问题是我不知道如何告诉`git clone`FTP 使用活动模式。当我设置`GIT_CURL_VERBOSE=1`并执行 a`git clone ftp://user:pass@server/repo`时，我注意到它正在发送`PASV`而不是像没有开关`PORT`的 curl 一样挂起。`-P -`我怎么告诉它不这样做？我阅读了一些有关该`_netrc`文件的信息，但找不到通过它设置活动模式的示例。

对于任何好奇的人，这里是详细的 curl 输出（与不指定选项`git clone`的运行几乎相同。）`curl``-P -`

```
* About to connect() to server.com port 21 (#0)
*   Trying {server ip}... * 0x98d548 is at send pipe head!
* Connected to server.com ({server ip}) port 21 (#0)
< 220 Microsoft FTP Service
> USER User
< 331 Password required for User.
> PASS {pass}
< 230 User User logged in.
> PWD
< 257 "/User" is current directory.
* Entry path is '/User'
> CWD repo.git
< 250 CWD command successful.
> CWD info
< 250 CWD command successful.
> EPSV
* Connect data stream passively
< 500 'EPSV': command not understood
* disabling EPSV usage
> PASV
< 227 Entering Passive Mode ({server ip},10,137).
*   Trying {server ip}... * Connecting to {server ip} ({server ip}) port 2697
/* server hangs from here until time-out */ 
```

使用`-P -`为 curl 指定的选项，`PORT`将使用 command 代替`PASV`，因此从该`EPSV`行开始，以下命令将被发送到服务器：

```
> EPRT |1|{client ip}|13375|
< 500 'EPRT |1|{client public ip}|36093|': command not understood
* disabling EPRT usage
> PORT {client ip},52,64
< 200 PORT command successful.
* Connect data stream actively
> TYPE I
< 200 Type set to I.
> SIZE file
< 213 213
> RETR file
< 150 Opening BINARY mode data connection for file(213 bytes).
/* and the file just downloads from here. */ 
```

我的配置：msysgit，MS-FTP 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:32:02.460

Git 实际上[弃用了 FTP](http://www.git-scm.com/docs/git-clone#URLS)，可能是因为这样的困难：

> Git 支持 ssh、git、http 和 https 协议（此外，ftp 和 ftps 可用于获取，rsync 可用于获取和推送，但这些协议效率低下且已弃用；请勿使用）。

您最好的选择是将远程 repo 从 FTP 服务器同步到本地裸克隆，然后将其重新克隆到工作副本。

# version-control - TFS 中每个促销权衡的分支

> ID：13824291
> 
> 赞同：2
> 
> 时间：2012-12-11T16:27:54.393
> 
> 标签：version-control, tfs, branch, branching-and-merging

假设我们有一个包含三个分支的大型 TFS 2010 项目：MAIN、TST 和 PRD。

策略是：每当 Sprint 完成时，MAIN 都会被复制/合并到 TST。只要 TST 被认为是稳定的，它就会被复制/合并到 PRD 中。只要 TST 或 PRD 有修复，它们就会合并回 MAIN，或 MAIN 和 TST。（别问我为什么，这个我控制不了，也不是特别喜欢。）

据我了解，在每个促销步骤中，可以：

1.  删除目标分支并再次分支 - 这需要立即访问该分支的历史记录（它总是可以恢复，对吗？）；
2.  *与acceptTheirs*合并和解决- 这需要丢失可能尚未从目标合并回源的更改。

对于合并回来说，拥有祖先信息很重要。与 1\. 我希望保留祖先信息。有2。我不确定。

所以，两个问题：

1.  这两种是在分支机构之间推广软件的可能/理想方式吗？
2.  哪些情况下没有保留祖先信息？

可能与大型存储库相关的任何额外权衡的额外积分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:55:40.687

> 1.这两种是在分支机构之间推广软件的可能/理想方式吗？

如果 MAIN 有一个子分支 TST，它有一个子分支 PRD，那么在不诉诸无根据的合并的情况下，这些是唯一可能促进分支之间更改的合并。

如果这是一个理想的分支策略，则取决于许多因素，例如发布了多少并行版本和团队规模。一个很好的参考指南是 TFS Rangers [http://vsarbranchingguide.codeplex.com/](http://vsarbranchingguide.codeplex.com/)的分支指南，您似乎正在使用的版本是基本双分支计划的变体（您称之为 main，他们称之为 dev并且您的生产分支不是唯一标记的）。如果只有一个版本在生产中，并且发布应该始终包含所有制作的内容，那么这种分支策略效果最好。

> 2.哪些情况下不保存血统信息？

如果文件被复制或分支被破坏。但是，如果您需要一直删除和/或重新创建分支和/或需要连续使用acceptTheirs，则通常表明：分支策略不足，TFS 训练不足，或测试和补丁策略存在问题（生产和开发中发现的错误同时发现并修复，导致合并冲突）。

# android - Android：getApplicationContext() 在 View 子类中不起作用

> ID：13824293
> 
> 赞同：1
> 
> 时间：2012-12-11T16:27:57.687
> 
> 标签：android, android-view, android-context

所以我创建了一个扩展 View 的类 DrawView 并且我想在该类中绘制一些图形，并将我存储为 int 数组的点在[如何声明全局变量的帮助下使这个数组成为一种公共变量](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables) 所以当我想**在 Activity 中**与 MyApp 连接并更改我的数组，我只需使用

```
MyApp appState = ((MyApp)getApplicationContext()); 
```

但问题是，当我在**DrawView.java**类中调用它时，这将不起作用。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:34:45.700

我真的不知道为什么这个答案如此受欢迎，因为它不是一个好的解决方案。Application 对象是运行应用程序，而不是存储数据，你可以用一个简单的 Singleton 对象更容易地解决这个问题，试试这个：

```
 public Class MyData{

        private int[] data;
        private static MyData me;

        public int[] getData(){
           return data;
        }

        private MyData(){} // private constructor

        public MyData get() {}
            if(me==null) me = new MyData();
            return me;
        }
    } 
```

比您可以调用的任何对象：

```
 int[] data = MyData.get().getData() 
```

并随意扩展到不仅仅是 int[] ...放置您希望全局访问的任何其他对象。但请记住，不要保留对上下文的引用！

# sql - 有没有办法查看 case 语句中创建的最后一个条目？

> ID：13824294
> 
> 赞同：1
> 
> 时间：2012-12-11T16:27:59.180
> 
> 标签：sql, increment, teradata, sequences

我有两列，`last_usage`并且`previous_last_usage`.

我想创建第三列，`seq_index`，每次`last_usage <> previous_last_usage`满足条件时递增 1。

这可能吗？

例子：

```
LAST_USAGE PREVIOUS_LAST_USAGE SEQ_INDEX
1 1 0
0 1 1
0 0 1
0 0 1
1 0 2
1 1 2
0 1 3
0 0 3
0 0 3
```

# windows - Windows 8 上的 MinGW

> ID：13824296
> 
> 赞同：0
> 
> 时间：2012-12-11T16:28:02.677
> 
> 标签：windows, gcc, mingw

我的操作系统是 Windows 8，我使用的是 MinGW 版本 4.6.1。当我使用`gcc`它编译时，它编译得很好。但是在运行时会引发以下错误：

> 此版本的 C:\Users\danish\Documents\a.exe 与您正在运行的 Windows 版本不兼容。检查您计算机的系统信息，然后联系软件发行商。

是否有适用于 Windows 8 的稳定版本？或任何其他替代品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:31:32.100

The earliest version of gcc I have available for testing is 4.6.3\. It works just fine for me on 64-bit Windows 8.

```
// -*- compile-command: "gcc -o test.exe test.cpp"; -*-
#include <stdio.h>
int main ()
{
  puts ("Hello, World!");
} 
```

Output: "Hello, World!".

Perhaps you are using a gcc that targets 64-bit Windows, then running the program on 32-bit Windows. What does `gcc -v 2>&1 | find "Target:"` output? What does `systeminfo | find "System Type"` output?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:27:36.250

使用*mingw32-gcc.exe而不是**gcc.exe*来编译你的源代码。我不知道它是否有效，因为我没有 Windows 8，但无论如何你都可以尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T10:42:41.487

@Jatin，我遇到了和你一样的问题。我所做的是，我在 notepad++ 中编写了一个程序，然后将其保存为 cpp 文件。因此，它被分配了一个默认扩展名“.h”。现在，每当我使用 g++ 编译它时，都会创建一个 32 位 exe，它会引发您上面提到的相同错误。我为克服上述问题所做的是，我手动将文件的扩展名更改为“.cpp”，然后编译它。在这种情况下，创建了一个成功运行的 64 位 exe 文件，从而显示正确的输出。

我同意这并不能解决问题，但它确实提供了一种解决方法。希望这可以帮助！:)

# serial-port - 115,200 或更高的实际波特率是否可能？

> ID：13824300
> 
> 赞同：4
> 
> 时间：2012-12-11T16:28:16.933
> 
> 标签：serial-port, benchmarking

在使用 FT232R USBtoRS232 芯片运行一些测试时，它应该能够管理高达 3 Mbaud 的速度，但我的实际速度只有 38 kbaud 或 3.8 KB/s 左右。

我在网上搜索过，但找不到任何可比较的数据来证明或反驳这种限制。

虽然我正在进一步研究这一点，但我想知道这里是否有人有可比数据。

我在这里用我自己的代码和这个工具进行了测试：

[http://www.aggsoft.com/com-port-stress-test.htm](http://www.aggsoft.com/com-port-stress-test.htm)

设置为 115,200、8N1 和 64 字节数据包。

我会期待这样的结果：

在 115200 波特 -> 有效 11,520 字节/秒或 11,52 KB/秒

在 921600 波特 -> 92,16 KB/s

我需要确认 11,2 KB/s 的最低速度，更好的速度约为 15-60 KB/s。

根据数据表，这应该没问题 - 根据现实，我至少现在被困在 3,8 KB/s。

* * *

哦，天哪，找到了一个很好的提示——我的传输速率很大程度上取决于数据包的大小。因此，在使用 64 字节数据包时，我最终得到 3,8 KB/s，使用 180 字节数据包时，它的平均速度大约为 11,26 KB/s - 当我检查 1 字节的速度时，主灯亮了数据包 -> 大约 64 字节/秒！

添加一些数学运算 -> 11,52 KB/s 除以 180 等于 64 字节/秒。所以基本上速度与字节大小成比例。这是正确的吗？为什么是这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T20:36:39.297

您观察到的结果是由于 USB 串行的工作方式。这是一个 USB 1.1 芯片。USB确实使用数据包而不是连续流（例如串行）进行传输。

因此，您的设备将获得一个时间切片窗口，并由驱动程序有效利用此窗口。当您将数据包大小设置为 1 时，每个 USB 数据包只能传输一个字节。要传输下一个字节，您必须再次等待轮到您。

通常，USB 设备在设备端有一个缓冲区，它可以在传输之间缓冲数据，从而保持输出速率恒定。当您将数据包大小设置得太低时，您的缓冲区不足。USB 1.1 上的时间片为 10 毫秒，每秒只能在所有设备之间共享 100 次传输。

当您进行“发送”呼叫时，您的所有数据将在一次传输中发送出去，以保持交互式应用程序正常工作。最好使用最大传输大小来实现 USB 设备的最佳性能。如果您有交互式应用程序，这并不总是可能的，但当您有一个数据传输应用程序时，这通常是可能的。

# php - SQL 查询 LIKE 语句

> ID：13824302
> 
> 赞同：1
> 
> 时间：2012-12-11T16:28:21.367
> 
> 标签：php, mysql, select, sql-like

> **可能重复：**
> [想要使用多个术语时查询中 LIKE 子句的顺序](https://stackoverflow.com/questions/7910362/order-of-like-clause-in-query-when-wanting-to-use-multiple-terms)

我正在尝试在我的网站上创建搜索功能。我想搜索多个领域。

例如：

```
$sql=mysql_query("select * from inventory WHERE MATCH (pn, description, location, notes) AGAINST ('{$q}')  ORDER BY {$sort} {$direction}") or die(mysql_error()); 
```

以上搜索pn、description、location和notes。但它只搜索完全匹配。所以我想使用：

```
$sql=mysql_query("select * from inventory where pn like '%{$q}%'") or die(mysql_error()); 
```

但是像上面那样搜索多个字段。我该怎么做呢？

# gwt - GWT 展开/折叠框？

> ID：13824303
> 
> 赞同：1
> 
> 时间：2012-12-11T16:28:23.053
> 
> 标签：gwt, uibinder

我希望使用 GWT-UiBinder 方法创建类似图像（ [https://www.dropbox.com/s/i2h1813c13v12y0/samp.jpg ）的东西。](https://www.dropbox.com/s/i2h1813c13v12y0/samp.jpg)我不能使用树，因为我需要折叠视图具有 - 标题、单个字段值、类似于状态符号的图标。展开后的视图包含标题和折叠后的图标，但会详细显示值 + 附加值。

请让我知道你的想法！例子会很棒！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:00:02.883

你在找[`DisclosurePanel`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/DisclosurePanel.html)吗？（带有自定义[标题小部件](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/DisclosurePanel.html#setHeader%28com.google.gwt.user.client.ui.Widget%29)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:17:09.610

这看起来像是[DeckLayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/DeckLayoutPanel.html)的用例。

然后，您应该在每个“Deck”的每个容器中嵌入任何小部件 Image/Input/CellTable/DataGrid。

您可能在这里有一些很好的例子 - [http://www.slideshare.net/martyhall/gwt-tutorial-laying-out-windows-with-panels-part-ii-composite-panels#btnNext](http://www.slideshare.net/martyhall/gwt-tutorial-laying-out-windows-with-panels-part-ii-composite-panels#btnNext)

**编辑**- 我可能没有正确理解要求。查看这些演示。

[http://examples.roughian.com/index.htm#Panels~DeckPanel](http://examples.roughian.com/index.htm#Panels~DeckPanel) http://examples.roughian.com/index.htm#Panels~StackPanel

T Broyers 建议 - [http://examples.roughian.com/index.htm#Panels~DisclosurePanel](http://examples.roughian.com/index.htm#Panels~DisclosurePanel)

# tridion - 无法重新发布页面 - Tridion 2011 SP1

> ID：13824311
> 
> 赞同：2
> 
> 时间：2012-12-11T16:28:47.687
> 
> 标签：tridion, tridion-2011

重新发布同一页面时，我们遇到了一些奇怪的错误。该页面第一次发布成功，我们可以从演示服务器看到该页面。当我们尝试再次发布它（页面没有更改）时，它失败并出现以下错误（见下文）。该页面在模板生成器中运行正常，我们得到了正确的 html 输出，但在最后提交部署步骤中失败（准备传输、传输、准备部署和部署都成功）。一旦第二次发布失败，总是发布失败，我们也无法取消发布。此外，当我们复制失败页面并创建新页面时，我们可以第一次发布新页面，然后新页面第二次发布失败，并出现同样的错误。

有谁知道什么会导致这个错误？

这是错误消息：

`Committing Deployment Failed Phase: Deployment Prepare Commit Phase failed, Unable to prepare transaction: tcm:0-4210-66560, For input string: "", For input string: "", Unable to prepare transaction: tcm:0-4210-66560, For input string: "", For input string: ""`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:47:57.833

你有多个部署者吗？有时它是由于配置了多个部署程序而其中一个未按应有配置而发生的。第一次你的页面可能会被正确的部署者拾取，然后被错误的部署者拾取。

正如坦率的建议，共享传输和部署日志文件，以便我或其他人可以在正确的方向上为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:55:51.497

您可以在第一次成功发布而不是在后续尝试（包括取消发布）时成功发布这一事实可能表明存在锁定问题（当然，我在推测，但这与您的症状一致。

已知会导致文件锁定问题的一件事是防病毒软件。通常建议将您的站点和数据目录排除在防病毒扫描程序的覆盖范围之外。

同样，存储在数据库中的已部署资源也可能存在锁定问题。您的数据库服务器是否给出错误或警告？例如，在事务中征用资源是否存在问题？

# playframework - netty 如何在使用 ChunkedWriteHandler 发生写入后接收回调

> ID：13824312
> 
> 赞同：0
> 
> 时间：2012-12-11T16:28:49.477
> 
> 标签：playframework, netty

我们正在尝试让 playframework 中的 tcp 流控制自动传递，因此备份客户端只需将备份通过我们的服务器向下传递，而不使用我们服务器上的资源。不过，要做到这一点，我们需要一个 WriteCallback 以便我们知道何时使用 netty 编写一个块，并告知我们何时实际写入了该块。如果没有写入，则不会调用回调，这会占用一点内存，但在写入发生之前我们不会再读取任何请求。

所以在 playframework 中，我看到在 Netty ChunkedWriteHandler 上调用了它

chunkedWriteHandler.resumeTransfer();

我们真正需要的是向它传递一个回调，以便我们知道写入何时完成。有没有其他方法或任何方法可以轻松实现这一目标？也许，我可以暂时分叉 netty 并以某种方式添加回调，尽管这看起来很复杂。任何想法都非常受欢迎。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:32:17.417

我不太了解 playframework，但是在 netty 中，调用 write(..) 时会返回 ChannelFuture。然后，您可以将 ChannelFutureListener 添加到 ChannelFuture 以在写入完成后获得通知。

# ms-access - 将逗号分隔的字段解析为单独的字段 (MS ACCESS VBA 2003)

> ID：13824313
> 
> 赞同：5
> 
> 时间：2012-12-11T16:28:50.917
> 
> 标签：ms-access, vba, comma, csv

我继承了一个数据库，其中用户输入字段存储为逗号分隔的字符串。我知道。瘸。我想要一种在 SELECT 查询中解析这些字段的方法，其中有三个不同数量的字符段。与我将字段插入新表或创建存储过程来执行此操作的所有建议相反，这就是我想出的。我想知道是否有人认为这样做有任何缺陷作为选择查询（我可以轻松地从字符串转换为已解析并根据需要再次返回）。

```
Field_A
5,25,89 
```

所以要得到最简单的左段：

```
Field_1: Left$([Field_A],InStr([Field_A],",")-1) 
```

要获得最右边的部分：

```
Field_3: Right$([Field_A],Len([Field_A])-InStrRev([Field_A],",")) 
```

中间部分是最棘手的：

```
Field_2: Mid([Field_A],InStr([Field_A],",")+1,InStrRev([Field_A],",")-InStr([Field_A],",")-1) 
```

所以结果是：

```
Field_1   Field_2   Field_3
5           25        89 
```

有没有同意的意见？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T21:18:55.703

好吧，如果你坚持走这条路……这可能会更容易，更适应。在模块中创建一个函数：

```
Public Function GetValueFromDelimString(sPackedValue As String, nPos As Long, 
                                        Optional sDelim As String = ",")

Dim sElements() As String

sElements() = Split(sPackedValue, sDelim)
If UBound(sElements) < nPos Then
    GetValueFromDelimString = ""
Else
    GetValueFromDelimString = sElements(nPos)
End If

End Function 
```

现在，在您的查询中，您可以获得字符串中的任何字段，如下所示：GetValueFromDelimString([MultiValueField],0) AS FirstElement、GetValueFromDelimString([MultiValueField],1) AS SecondElement 等。

我觉得我在为未成年人买啤酒，鼓励这种行为:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:41:47.193

听起来您不是在询问有关*如何*将逗号分隔的字段解析为不同字段的信息，而是在寻找支持您决定这样做的人，是吗？

事实上，正如您已经发现的那样，您确实可以通过在 SQL 字段定义中巧妙地应用函数来做到这一点。但这并不意味着您*应该*这样做。

从短期来看，这是实现您作为数据管理员的目标的简单方法，我会同意的。但作为一个长期的解决方案，它只是为看起来设计不佳的数据库增加了另一层复杂性（我知道后者不是你的错——我也继承了我的“蹩脚”数据库份额）。

所以我现在就“完成工作”为你鼓掌，但建议你听听“将字段插入新表的所有建议”——它们是很好的建议。这将需要更多的计划和努力，但从长远来看，您将拥有一个更好的数据库。这将使您使用它所做的一切变得更容易、更快、更可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-19T23:52:29.037

这是一个旧线程，但有人可能会搜索它。您也可以执行与更新查询相同的策略。这样，您可以保留原始 CSV 并拥有 3 个新的目标字段，可以根据您的应用程序目的进行计算和重新计算。

# node.js - req.user undefined - node + express + passport-facebook

> ID：13824314
> 
> 赞同：14
> 
> 时间：2012-12-11T16:28:57.110
> 
> 标签：node.js, express, passport.js

我正在尝试让护照与我的节点快递服务器一起使用。我可以使用 Facebook 登录并在我的数据库中找到正确的用户；但是，当我重定向时`req.user`总是未定义。这是我的服务器代码：

```
var express = require('express'),
path = require('path'),
http = require('http'),
passport = require('passport'),
FacebookStrategy = require('passport-facebook').Strategy,
user = require('./routes/users');

var app = express();

passport.use(new FacebookStrategy({
    clientID: "HIDDEN",
    clientSecret: "HIDDEN",
    callbackURL: "http://MYURL.com/auth/facebook/callback",
    passReqToCallback: true
 },
  function(req, accessToken, refreshToken, profile, done) {
    user.findOrCreate(profile, function(err, user) {      
      if (err) { return done(err); }      
      done(null, user);
    });    
  }
));

passport.serializeUser(function(user, done) {  
  done(null, user._id);
});

passport.deserializeUser(function(id, done) {
  user.findById(id, function(err, user) {
    done(err, user);
  });
});

app.configure(function () {    
app.set('port', process.env.PORT || 3000);
    app.use(express.static(path.join(__dirname, 'public')));
    app.use(express.logger('dev')); /* 'default', 'short', 'tiny', 'dev' */
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({ secret: 'foobar' }));   
    app.use(passport.initialize());
    app.use(passport.session()); 
    app.use(app.router);    
});

app.get('/auth/user', function (req, res) {
    console.log(req);
});

app.get('/auth/facebook', passport.authenticate('facebook'));
app.get('/auth/facebook/callback', 
  passport.authenticate('facebook', { successRedirect: '/',
                                      failureRedirect: '/login' }));

http.createServer(app).listen(app.get('port'), function () {
    console.log("Express server listening on port " + app.get('port'));
}); 
```

我去 /auth/facebook，它会找到正确的用户并将我重定向到 /。但是后来我转到 /auth/user 并且`req.user`未定义，我的会话显示了这一点：

```
cookies: { 'connect.sid': 's:JFdQkihKQQyR4q70q7h2zWFt.VS+te0pT0z/Gtwg7w5B33naCvA/ckKMk60SFenObxUU' },
  signedCookies: {},
  url: '/auth/user',
  method: 'GET',
  sessionStore:
   { sessions:
      { '5sk3Txa2vs5sYhvtdYwGaUZx': '{"cookie":{"originalMaxAge":null,"expires":null,"httpOnly":true,"path":"/"},"passport":{"user":"50c527c9c6cb41860b000001"}}',
        'Au6m0hAj/3warKOGNSWw0yu2': '{"cookie":{"originalMaxAge":null,"expires":null,"httpOnly":true,"path":"/"},"passport":{}}',
        JFdQkihKQQyR4q70q7h2zWFt: '{"cookie":{"originalMaxAge":null,"expires":null,"httpOnly":true,"path":"/"},"passport":{}}' },
     generate: [Function],
     _events: { disconnect: [Function], connect: [Function] } },
  sessionID: 'JFdQkihKQQyR4q70q7h2zWFt', 
```

它是否与我的 sessionID 与设置护照用户的会话不匹配有关？

**更新**

所以我确定 sessionID 不匹配是因为我在 c9.io 上运行我的代码，它实际上有两个 URL。当我使用正确的 URL 并转到 /auth/user 时，我的 sessionID 与带有护照用户集的会话匹配，我可以在日志中看到我的 deserializeUser 找到了正确的用户对象。但是，`req.user`在此之后仍然未定义。

```
Trying to find user with id: 50c527c9c6cb41860b000001
{ sessions:
   { yoOUOxyXZ0SmutA0t5xUr6nI: '{"cookie":{"originalMaxAge":null,"expires":null,"httpOnly":true,"path":"/"},"passport":{"user":"50c527c9c6cb41860b000001"}}',
     goZpmK3y3tOfn660hRbz2hSa: '{"cookie":{"originalMaxAge":null,"expires":null,"httpOnly":true,"path":"/"},"passport":{}}',
     'O5Sz1GuZqUO8aOw4Vm/hriuC': '{"cookie":{"originalMaxAge":null,"expires":null,"httpOnly":true,"path":"/"},"passport":{}}' },
  generate: [Function],
  _events: { disconnect: [Function], connect: [Function] } }
sessionID: yoOUOxyXZ0SmutA0t5xUr6nI
req.user: undefined
{ cookie:
   { path: '/',
     _expires: null,
     originalMaxAge: null,
     httpOnly: true },
  passport: {} } 
```

**更新2**

我解决了这个问题。它在我的 user.findByID 函数中：

```
exports.findById = function(id, callback) {    
    console.log('Trying to find user with id: ' + id);
    db.collection('users').findOne({'_id':id}, function(err, user) {           
            callback(err, user);
    });
}; 
```

变成：

```
exports.findById = function(id, callback) {    
    console.log('Trying to find user with id: ' + id);
    db.collection('users').findOne({'_id':new BSON.ObjectID(id)}, function(err, user) {           
            callback(err, user);
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T10:56:54.850

正如您在更新中所说，这是 user._id 变量的格式不正确。为了避免这种情况，并且以后在其他请求和方法中必须处理这种格式，我建议您在注册时生成一个新的用户 ID。

您可以使用此模块：

[节点uuid](https://npmjs.org/package/node-uuid "节点uuid")

```
var uuid = require('node-uuid');

function findOrCreate(profile, callback) {
  // save new profile
  profile.uid = uuid.v1().replace(/\-/g, '');
} 
```

# facebook-graph-api - facebook实时更新不起作用

> ID：13824320
> 
> 赞同：1
> 
> 时间：2012-12-11T16:29:12.410
> 
> 标签：facebook-graph-api, callback, user-permissions, real-time-updates

我已将我的应用程序配置为“监听”用户对象上的事件 - 用户名称的更改。此外，我已将其配置为“监听”权限对象上的事件 - 用户权限的更改。

我成功订阅成功 - 已验证。所以 GET 操作效果很好，但是 POST 操作似乎不起作用。请注意，我能够成功使用 GET 和 POST 使用回调服务器，但 Facebook 实时更新似乎不起作用。

还有其他人遇到这个问题吗？配置回调服务器有什么特别之处吗？

我在这个问题上找到了几个评论，但我仍然不明白更新是因为我的错误还是因为 Facebook 更新不起作用。

例如，此链接描述了相同的问题： [Not received realtime updates at all from Facebook](http://facebook.stackoverflow.com/questions/11724241/not-receiving-realtime-updates-at-all-from-facebook)

此外，这里报告了一个关于这个问题的开放错误：但我再次不确定这是否是我的错： http: [//developers.facebook.com/bugs/267220196722379 ?browse=search_501c8eb30d8239e58192973](http://developers.facebook.com/bugs/267220196722379?browse=search_501c8eb30d8239e58192973)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:17:27.800

看来这是我这边的问题。我正在使用 RESTful WCF 作为回调服务器，但我在 application/json 内容类型方面遇到了一些困难。我实际上是从 Facebook 服务器收到消息，但 WCF 拒绝了请求，因为应用程序/json 内容类型问题。

因此，Facebook 更新没有任何问题。

# actionscript-3 - 移动 MovieClip 及其包含的所有内容

> ID：13824328
> 
> 赞同：0
> 
> 时间：2012-12-11T16:29:27.573
> 
> 标签：actionscript-3, flash

我有一个名为 navbar 的 MovieClip，上面有按钮。如何将按钮连接到 MovieClip，以便在移动 MovieClip 时按钮随之移动？我已经能够使导航栏可拖动，但按钮没有被拖动。

我尝试了以下方法：

```
navbar.addChild(button1); 
```

这只是使按钮消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:53:26.760

您的方法是正确的：将按钮作为子项添加到 MovieClip 将允许它们全部作为一个项目移动。

按钮消失可能有多种原因，例如 x 和 y 现在相对于新父级（即现在将按钮 y 设置为 600 距离导航栏向下 600 像素，而不是从舞台或旧父级向下）。

尝试注释掉您在按钮上设置的任何属性，看看是否能解决问题，从那里您可以确定是哪个属性导致按钮消失。

所以你基本上应该有这样的东西：

```
var button1:Button = new Button();
navbar.addChild(button1); 
```

如果即使使用最少的代码也不会导致按钮显示在导航栏上，您需要发布更多代码，以便我们可以看到问题发生在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:53:57.933

如您所想，如果您希望`navbar`和 按钮像一个独特的元素一样，您需要将按钮放在里面，`navbar`而不仅仅是在它上面。

按钮消失的原因是因为它已在 Designer 中放置在舞台上，因此，当您将其添加到 时`navbar`，会将其放入两个不同的显示堆栈中，这是不允许的。

您应该将按钮放在`navbar`Designer 中，或者将它们导出为 AS，然后动态实例化它们，如下所示：

```
var btn:Button1 = new Button1()
navbar.addChild(btn) 
```

类名在库的*MovieClip 属性*窗口中的*Export for ActionScript*`Button1`下分配。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:59:00.343

您可以计算从 Movieclip 的 X、Y 到按钮的距离，您可以编写如下代码：

```
var diff1:int = navbar.x - example_button1.x;
    stage.addEventListener(Event.ENTER_FRAME, function(event:Event):void{
example_button1.x=navbar.x-diff1;
    }); 
```

您可以复制 example_buttons 和 diff 变量。

或者您可以`startDrag()`同时使用相同的事件侦听器，

```
navbar.addEventListener(someEvent.some, function(event:someEvent):void{
MovieClip(root).navbar.startDrag();
MovieClip(root).example_button1.startDrag();
}); 
```

`MovieClip(root)`允许您影响主舞台。例如，使用此属性，您可以从导航栏内部影响对象。**

# c# - 如何使用 WCF 使用客户端证书配置传输安全性？

> ID：13824334
> 
> 赞同：1
> 
> 时间：2012-12-11T16:29:36.843
> 
> 标签：c#, wcf, iis, ssl, certificate

我们想为我们的 WCF 服务 (basicHttpBinding) 配置带有客户端证书的传输安全 (SSL)，该服务仅由 X 公司用作我们服务的客户端。

从我们这边来看，我们有 2 台负载平衡的服务器，而从他们这边来看，只有 1 台服务器。

在刚才提到的 3 台服务器上，我们安装了相同的根证书颁发机构，用于颁发其他证书。

关于如何使用 WCF 配置它以及在哪里安装哪些证书有很多困惑？

1）我们应该颁发多少其他证书并安装在哪里？X公司也应该出具证明吗？哪些证书应该安装在我们的 2 台服务器上，哪些证书应该安装在他们的服务器上？

我们应该信任他们的服务器，所以我猜我们会要求他们安装客户端证书，对吧？该证书将由谁以及从何处颁发？从服务端，如何配置 WCF 在收到时信任此客户端证书？

他们应该信任我们的两台服务器，这是如何工作的？

2) 目的是什么

```
<serviceCertificate> 
```

我们应该将它添加到我们的配置中吗？X公司是否应该将其添加到他们的末尾？

我读过的目的是“向客户端验证/识别服务”。我猜这意味着我们只需要在我们的服务器上安装这些证书，它们不应该安装在客户端的服务器上。

意思是和ssl一样吗？

我们在 IIS 上托管了 WCF 服务，我们还通过 IIS 配置了 SSL。这是否意味着我们不必添加

```
<serviceCertificate> 
```

那么在我们的 WCF 配置上呢？

3)

```
<clientCertificate> 
```

我读过的目的是识别服务的客户端，因此我猜它肯定应该安装在客户端的机器上。

谁将颁发此证书？我们服务器或他们的服务器上的根证书颁发机构？

这个证书也应该安装在我们的两台服务器上吗？还是站在他们这边？

从我们的服务端，我们将如何信任这个客户端证书？任何 web.config 设置或？

非常感谢，

# database-design - 指向许多项目

> ID：13824341
> 
> 赞同：2
> 
> 时间：2012-12-11T16:30:04.707
> 
> 标签：database-design

我有一个显示许多仓库位置的点文件。但是我想扩展这个库存来显示每个仓库存储和销售的许多物品。这些项目分为四类：电气、硬件、木材和管道。

为了链接点形状文件的 id 号，我最初想创建一个包含四个类别的查找表。但从那时起，我还需要将该查找表链接到属于每个类别的数百个项目的列表。

将点文件链接到类别查找表，然后链接到属于这些类别的产品列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:10:03.633

看起来你需要一个类似于这样的数据库模型：

![在此处输入图像描述](../Images/b359ff784df7db90f34c8b9025f3efcc.png)

*（为简洁起见，省略了非关键属性。）*

仓库和项目之间存在多对多的关系（通过连接表 WAREHOUSE_ITEM 实现）。类别和项目之间也存在一对多的关系。

# jsf - Jboss can't start web app and no errors in log

> ID：13824347
> 
> 赞同：0
> 
> 时间：2012-12-11T16:30:31.670
> 
> 标签：jsf, jboss, jsf-1.2

I'm trying to get a web app up and running on jboss 5 in eclipse and i'm not getting any errors in the log and when i hit `http://localhost:8080/WebDataViewer`, i just get the default http 404 error page.

When i hit `http://localhost:8080/` i get the default jboss page with some links on it.

I've not worked with jboss before, but can anyone help figure out how i can access my app or how i can troubleshoot this?

```
10:07:39,706 INFO  [ServerImpl] Starting JBoss (Microcontainer)...
10:07:39,707 INFO  [ServerImpl] Release ID: JBoss [The Oracle] 5.1.0.GA (build: SVNTag=JBoss_5_1_0_GA date=200905221634)
10:07:39,707 INFO  [ServerImpl] Bootstrap URL: null
10:07:39,707 INFO  [ServerImpl] Home Dir: C:\jboss-5.1.0.GA
10:07:39,708 INFO  [ServerImpl] Home URL: file:/C:/jboss-5.1.0.GA/
10:07:39,708 INFO  [ServerImpl] Library URL: file:/C:/jboss-5.1.0.GA/lib/
10:07:39,708 INFO  [ServerImpl] Patch URL: null
10:07:39,708 INFO  [ServerImpl] Common Base URL: file:/C:/jboss-5.1.0.GA/common/
10:07:39,708 INFO  [ServerImpl] Common Library URL: file:/C:/jboss-5.1.0.GA/common/lib/
10:07:39,709 INFO  [ServerImpl] Server Name: default
10:07:39,709 INFO  [ServerImpl] Server Base Dir: C:\jboss-5.1.0.GA\server
10:07:39,709 INFO  [ServerImpl] Server Base URL: file:/C:/jboss-5.1.0.GA/server/
10:07:39,709 INFO  [ServerImpl] Server Config URL: file:/C:/jboss-5.1.0.GA/server/default/conf/
10:07:39,709 INFO  [ServerImpl] Server Home Dir: C:\jboss-5.1.0.GA\server\default
10:07:39,709 INFO  [ServerImpl] Server Home URL: file:/C:/jboss-5.1.0.GA/server/default/
10:07:39,709 INFO  [ServerImpl] Server Data Dir: C:\jboss-5.1.0.GA\server\default\data
10:07:39,709 INFO  [ServerImpl] Server Library URL: file:/C:/jboss-5.1.0.GA/server/default/lib/
10:07:39,710 INFO  [ServerImpl] Server Log Dir: C:\jboss-5.1.0.GA\server\default\log
10:07:39,710 INFO  [ServerImpl] Server Native Dir: C:\jboss-5.1.0.GA\server\default\tmp\native
10:07:39,710 INFO  [ServerImpl] Server Temp Dir: C:\jboss-5.1.0.GA\server\default\tmp
10:07:39,710 INFO  [ServerImpl] Server Temp Deploy Dir: C:\jboss-5.1.0.GA\server\default\tmp\deploy
10:07:40,279 INFO  [ServerImpl] Starting Microcontainer, bootstrapURL=file:/C:/jboss-5.1.0.GA/server/default/conf/bootstrap.xml
10:07:40,898 INFO  [VFSCacheFactory] Initializing VFSCache [org.jboss.virtual.plugins.cache.CombinedVFSCache]
10:07:40,900 INFO  [VFSCacheFactory] Using VFSCache [CombinedVFSCache[real-cache: null]]
10:07:41,132 INFO  [CopyMechanism] VFS temp dir: C:\jboss-5.1.0.GA\server\default\tmp
10:07:41,133 INFO  [ZipEntryContext] VFS force nested jars copy-mode is enabled.
10:07:42,399 INFO  [ServerInfo] Java version: 1.6.0_35,Sun Microsystems Inc.
10:07:42,399 INFO  [ServerInfo] Java Runtime: Java(TM) SE Runtime Environment (build 1.6.0_35-b10)
10:07:42,399 INFO  [ServerInfo] Java VM: Java HotSpot(TM) 64-Bit Server VM 20.10-b01,Sun Microsystems Inc.
10:07:42,399 INFO  [ServerInfo] OS-System: Windows 7 6.1,amd64
10:07:42,399 INFO  [ServerInfo] VM arguments: -Dprogram.name=run.bat -Xms128m -Xmx512m -XX:MaxPermSize=256m -Dfile.encoding=Cp1252 
10:07:42,425 INFO  [JMXKernel] Legacy JMX core initialized
10:07:44,183 INFO  [ProfileServiceBootstrap] Loading profile: ProfileKey@2ee634bf[domain=default, server=default, name=default]
10:07:45,435 INFO  [WebService] Using RMI server codebase: http://127.0.0.1:8083/
10:07:50,839 INFO  [NativeServerConfig] JBoss Web Services - Stack Native Core
10:07:50,839 INFO  [NativeServerConfig] 3.1.2.GA
10:07:51,473 INFO  [AttributeCallbackItem] Owner callback not implemented.
10:07:52,334 INFO  [LogNotificationListener] Adding notification listener for logging mbean "jboss.system:service=Logging,type=Log4jService" to server org.jboss.mx.server.MBeanServerImpl@5de82b72[ defaultDomain='jboss' ]
10:08:06,536 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@1493227242{vfsfile:/C:/jboss-5.1.0.GA/server/default/deploy/profileservice-secured.jar/}
10:08:06,536 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@1493227242{vfsfile:/C:/jboss-5.1.0.GA/server/default/deploy/profileservice-secured.jar/}
10:08:06,537 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@1493227242{vfsfile:/C:/jboss-5.1.0.GA/server/default/deploy/profileservice-secured.jar/}
10:08:06,537 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@1493227242{vfsfile:/C:/jboss-5.1.0.GA/server/default/deploy/profileservice-secured.jar/}
10:08:08,928 INFO  [JMXConnectorServerService] JMX Connector server: service:jmx:rmi://127.0.0.1/jndi/rmi://127.0.0.1:1090/jmxconnector
10:08:09,029 INFO  [MailService] Mail Service bound to java:/Mail
10:08:11,006 WARN  [JBossASSecurityMetadataStore] WARNING! POTENTIAL SECURITY RISK. It has been detected that the MessageSucker component which sucks messages from one node to another has not had its password changed from the installation default. Please see the JBoss Messaging user guide for instructions on how to do this.
10:08:11,020 WARN  [AnnotationCreator] No ClassLoader provided, using TCCL: org.jboss.managed.api.annotation.ManagementComponent
10:08:11,073 WARN  [AnnotationCreator] No ClassLoader provided, using TCCL: org.jboss.managed.api.annotation.ManagementComponent
10:08:11,111 INFO  [TransactionManagerService] JBossTS Transaction Service (JTA version - tag:JBOSSTS_4_6_1_GA) - JBoss Inc.
10:08:11,111 INFO  [TransactionManagerService] Setting up property manager MBean and JMX layer
10:08:11,312 INFO  [TransactionManagerService] Initializing recovery manager
10:08:11,436 INFO  [TransactionManagerService] Recovery manager configured
10:08:11,436 INFO  [TransactionManagerService] Binding TransactionManager JNDI Reference
10:08:11,457 INFO  [TransactionManagerService] Starting transaction recovery manager
10:08:12,016 INFO  [AprLifecycleListener] The Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.6.0_35\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jdk1.6.0_35/bin/../jre/bin/server;C:/Program Files/Java/jdk1.6.0_35/bin/../jre/bin;C:/Program Files/Java/jdk1.6.0_35/bin/../jre/lib/amd64;c:\program files\apache-maven-3.0.x\bin;C:\Ruby192\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\sybase15_0_7\OCS-15_0\bin;C:\sybase15_0_7\OCS-15_0\dll;C:\sybase15_0_7\OCS-15_0\lib3p;C:\sybase15_0_7\DataAccess\ADONET\dll;C:\sybase15_0_7\DataAccess\ODBC\dll;C:\sybase15_0_7\DataAccess\OLEDB\dll;C:\WINDOWS\system32\WindowsPowerShell\v1.0;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files\MySQL\MySQL Server 5.5\bin;c:\Program Files\Stellent\IBPM;C:\PROGRA~2\IBM\SQLLIB\BIN;C:\PROGRA~2\IBM\SQLLIB\FUNCTION;C:\PROGRA~2\IBM\SQLLIB\bin;%JAVA_HOME%\bin;C:\Program Files\apache-maven-3.0.4\bin;C:\Oracle_Instant_Client(32bit)\instantclient_11_2;C:\Program Files (x86)\Git\cmd;C:\Program Files\TortoiseSVN\bin;C:\Program Files\eclipse;;.
10:08:12,087 INFO  [Http11Protocol] Initializing Coyote HTTP/1.1 on http-127.0.0.1-8080
10:08:12,089 INFO  [AjpProtocol] Initializing Coyote AJP/1.3 on ajp-127.0.0.1-8009
10:08:12,122 INFO  [StandardService] Starting service jboss.web
10:08:12,130 INFO  [StandardEngine] Starting Servlet Engine: JBoss Web/2.1.3.GA
10:08:12,235 INFO  [Catalina] Server startup in 145 ms
10:08:12,258 INFO  [TomcatDeployment] deploy, ctxPath=/web-console
10:08:12,993 INFO  [TomcatDeployment] deploy, ctxPath=/jbossws
10:08:13,068 INFO  [TomcatDeployment] deploy, ctxPath=/invoker
10:08:13,242 INFO  [RARDeployment] Required license terms exist, view vfszip:/C:/jboss-5.1.0.GA/server/default/deploy/jboss-local-jdbc.rar/META-INF/ra.xml
10:08:13,285 INFO  [RARDeployment] Required license terms exist, view vfszip:/C:/jboss-5.1.0.GA/server/default/deploy/jboss-xa-jdbc.rar/META-INF/ra.xml
10:08:13,310 INFO  [RARDeployment] Required license terms exist, view vfszip:/C:/jboss-5.1.0.GA/server/default/deploy/jms-ra.rar/META-INF/ra.xml
10:08:13,324 INFO  [RARDeployment] Required license terms exist, view vfszip:/C:/jboss-5.1.0.GA/server/default/deploy/mail-ra.rar/META-INF/ra.xml
10:08:13,353 INFO  [RARDeployment] Required license terms exist, view vfszip:/C:/jboss-5.1.0.GA/server/default/deploy/quartz-ra.rar/META-INF/ra.xml
10:08:13,422 INFO  [SimpleThreadPool] Job execution threads will use class loader of thread: main
10:08:13,442 INFO  [QuartzScheduler] Quartz Scheduler v.1.5.2 created.
10:08:13,445 INFO  [RAMJobStore] RAMJobStore initialized.
10:08:13,446 INFO  [StdSchedulerFactory] Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
10:08:13,446 INFO  [StdSchedulerFactory] Quartz scheduler version: 1.5.2
10:08:13,446 INFO  [QuartzScheduler] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
10:08:13,769 INFO  [ConnectionFactoryBindingService] Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=DefaultDS' to JNDI name 'java:DefaultDS'
10:08:14,145 INFO  [ServerPeer] JBoss Messaging 1.4.3.GA server [0] started
10:08:14,220 INFO  [QueueService] Queue[/queue/ExpiryQueue] started, fullSize=200000, pageSize=2000, downCacheSize=2000
10:08:14,269 INFO  [ConnectionFactory] Connector bisocket://127.0.0.1:4457 has leasing enabled, lease period 10000 milliseconds
10:08:14,269 INFO  [ConnectionFactory] org.jboss.jms.server.connectionfactory.ConnectionFactory@4bb8e77c started
10:08:14,271 INFO  [QueueService] Queue[/queue/DLQ] started, fullSize=200000, pageSize=2000, downCacheSize=2000
10:08:14,272 INFO  [ConnectionFactory] Connector bisocket://127.0.0.1:4457 has leasing enabled, lease period 10000 milliseconds
10:08:14,272 INFO  [ConnectionFactory] org.jboss.jms.server.connectionfactory.ConnectionFactory@28062593 started
10:08:14,272 INFO  [ConnectionFactoryJNDIMapper] supportsFailover attribute is true on connection factory: jboss.messaging.connectionfactory:service=ClusteredConnectionFactory but post office is non clustered. So connection factory will *not* support failover
10:08:14,282 INFO  [ConnectionFactoryJNDIMapper] supportsLoadBalancing attribute is true on connection factory: jboss.messaging.connectionfactory:service=ClusteredConnectionFactory but post office is non clustered. So connection factory will *not* support load balancing
10:08:14,283 INFO  [ConnectionFactory] Connector bisocket://127.0.0.1:4457 has leasing enabled, lease period 10000 milliseconds
10:08:14,283 INFO  [ConnectionFactory] org.jboss.jms.server.connectionfactory.ConnectionFactory@30726eca started
10:08:14,419 INFO  [ConnectionFactoryBindingService] Bound ConnectionManager 'jboss.jca:service=ConnectionFactoryBinding,name=JmsXA' to JNDI name 'java:JmsXA'
10:08:14,705 INFO  [JBossASKernel] Created KernelDeployment for: profileservice-secured.jar
10:08:14,712 INFO  [JBossASKernel] installing bean: jboss.j2ee:jar=profileservice-secured.jar,name=SecureProfileService,service=EJB3
10:08:14,712 INFO  [JBossASKernel]   with dependencies:
10:08:14,712 INFO  [JBossASKernel]   and demands:
10:08:14,712 INFO  [JBossASKernel]  jndi:SecureManagementView/remote-org.jboss.deployers.spi.management.ManagementView
10:08:14,712 INFO  [JBossASKernel]  jboss.ejb:service=EJBTimerService
10:08:14,713 INFO  [JBossASKernel]   and supplies:
10:08:14,713 INFO  [JBossASKernel]  Class:org.jboss.profileservice.spi.ProfileService
10:08:14,713 INFO  [JBossASKernel]  jndi:SecureProfileService/remote
10:08:14,713 INFO  [JBossASKernel]  jndi:SecureProfileService/remote-org.jboss.profileservice.spi.ProfileService
10:08:14,713 INFO  [JBossASKernel] Added bean(jboss.j2ee:jar=profileservice-secured.jar,name=SecureProfileService,service=EJB3) to KernelDeployment of: profileservice-secured.jar
10:08:14,714 INFO  [JBossASKernel] installing bean: jboss.j2ee:jar=profileservice-secured.jar,name=SecureDeploymentManager,service=EJB3
10:08:14,714 INFO  [JBossASKernel]   with dependencies:
10:08:14,714 INFO  [JBossASKernel]   and demands:
10:08:14,714 INFO  [JBossASKernel]  jboss.ejb:service=EJBTimerService
10:08:14,714 INFO  [JBossASKernel]   and supplies:
10:08:14,714 INFO  [JBossASKernel]  jndi:SecureDeploymentManager/remote-org.jboss.deployers.spi.management.deploy.DeploymentManager
10:08:14,714 INFO  [JBossASKernel]  Class:org.jboss.deployers.spi.management.deploy.DeploymentManager
10:08:14,714 INFO  [JBossASKernel]  jndi:SecureDeploymentManager/remote
10:08:14,714 INFO  [JBossASKernel] Added bean(jboss.j2ee:jar=profileservice-secured.jar,name=SecureDeploymentManager,service=EJB3) to KernelDeployment of: profileservice-secured.jar
10:08:14,715 INFO  [JBossASKernel] installing bean: jboss.j2ee:jar=profileservice-secured.jar,name=SecureManagementView,service=EJB3
10:08:14,715 INFO  [JBossASKernel]   with dependencies:
10:08:14,715 INFO  [JBossASKernel]   and demands:
10:08:14,715 INFO  [JBossASKernel]  jboss.ejb:service=EJBTimerService
10:08:14,715 INFO  [JBossASKernel]   and supplies:
10:08:14,715 INFO  [JBossASKernel]  jndi:SecureManagementView/remote-org.jboss.deployers.spi.management.ManagementView
10:08:14,715 INFO  [JBossASKernel]  Class:org.jboss.deployers.spi.management.ManagementView
10:08:14,715 INFO  [JBossASKernel]  jndi:SecureManagementView/remote
10:08:14,715 INFO  [JBossASKernel] Added bean(jboss.j2ee:jar=profileservice-secured.jar,name=SecureManagementView,service=EJB3) to KernelDeployment of: profileservice-secured.jar
10:08:14,722 INFO  [EJB3EndpointDeployer] Deploy AbstractBeanMetaData@6cdc5f76{name=jboss.j2ee:jar=profileservice-secured.jar,name=SecureProfileService,service=EJB3_endpoint bean=org.jboss.ejb3.endpoint.deployers.impl.EndpointImpl properties=[container] constructor=null autowireCandidate=true}
10:08:14,723 INFO  [EJB3EndpointDeployer] Deploy AbstractBeanMetaData@240c5895{name=jboss.j2ee:jar=profileservice-secured.jar,name=SecureDeploymentManager,service=EJB3_endpoint bean=org.jboss.ejb3.endpoint.deployers.impl.EndpointImpl properties=[container] constructor=null autowireCandidate=true}
10:08:14,723 INFO  [EJB3EndpointDeployer] Deploy AbstractBeanMetaData@1cfd0695{name=jboss.j2ee:jar=profileservice-secured.jar,name=SecureManagementView,service=EJB3_endpoint bean=org.jboss.ejb3.endpoint.deployers.impl.EndpointImpl properties=[container] constructor=null autowireCandidate=true}
10:08:14,877 INFO  [SessionSpecContainer] Starting jboss.j2ee:jar=profileservice-secured.jar,name=SecureDeploymentManager,service=EJB3
10:08:14,887 INFO  [EJBContainer] STARTED EJB: org.jboss.profileservice.ejb.SecureDeploymentManager ejbName: SecureDeploymentManager
10:08:15,010 INFO  [JndiSessionRegistrarBase] Binding the following Entries in Global JNDI:

    SecureDeploymentManager/remote - EJB3.x Default Remote Business Interface
    SecureDeploymentManager/remote-org.jboss.deployers.spi.management.deploy.DeploymentManager - EJB3.x Remote Business Interface

10:08:15,055 INFO  [SessionSpecContainer] Starting jboss.j2ee:jar=profileservice-secured.jar,name=SecureManagementView,service=EJB3
10:08:15,056 INFO  [EJBContainer] STARTED EJB: org.jboss.profileservice.ejb.SecureManagementView ejbName: SecureManagementView
10:08:15,064 INFO  [JndiSessionRegistrarBase] Binding the following Entries in Global JNDI:

    SecureManagementView/remote - EJB3.x Default Remote Business Interface
    SecureManagementView/remote-org.jboss.deployers.spi.management.ManagementView - EJB3.x Remote Business Interface

10:08:15,107 INFO  [SessionSpecContainer] Starting jboss.j2ee:jar=profileservice-secured.jar,name=SecureProfileService,service=EJB3
10:08:15,108 INFO  [EJBContainer] STARTED EJB: org.jboss.profileservice.ejb.SecureProfileServiceBean ejbName: SecureProfileService
10:08:15,150 INFO  [JndiSessionRegistrarBase] Binding the following Entries in Global JNDI:

    SecureProfileService/remote - EJB3.x Default Remote Business Interface
    SecureProfileService/remote-org.jboss.profileservice.spi.ProfileService - EJB3.x Remote Business Interface

10:08:15,778 INFO  [TomcatDeployment] deploy, ctxPath=/admin-console
10:08:15,930 INFO  [config] Initializing Mojarra (1.2_12-b01-FCS) for context '/admin-console'
10:08:19,678 INFO  [TomcatDeployment] deploy, ctxPath=/
10:08:23,577 INFO  [TomcatDeployment] deploy, ctxPath=/WebDataViewer
10:08:23,825 INFO  [config] Initializing Mojarra (1.2_12-b01-FCS) for context '/WebDataViewer'
10:08:24,812 INFO  [TomcatDeployment] deploy, ctxPath=/jmx-console
10:08:25,069 INFO  [Http11Protocol] Starting Coyote HTTP/1.1 on http-127.0.0.1-8080
10:08:25,093 INFO  [AjpProtocol] Starting Coyote AJP/1.3 on ajp-127.0.0.1-8009
10:08:25,099 INFO  [ServerImpl] JBoss (Microcontainer) [5.1.0.GA (build: SVNTag=JBoss_5_1_0_GA date=200905221634)] Started in 45s:387ms 
```

Snippet from web.xml

```
 <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:42:55.927

The address `http://localhost:8080/WebDataViewer` just points to the context root of the application, so it will just work if you've a default page defined (such as index.jsp). If you've no default resource for the context root WebDataViewer, you'll have to especify a resource name (a resource can be a servlet, a jsp, jsf ...), for example: `http://localhost:8080/WebDataViewer/myservlet.`

Usually you can look at the resources defined for your application in the WEB-INF/web.xml of your application, for example:

```
<servlet-mapping>
 <servlet-name>MyServlet</servlet-name>
 <url-pattern>/myservlet</url-pattern>
</servlet-mapping> 
```

In your case, according to your web.xml, it seems you're using JSF. So I guess that you should have some xhtml files in the root of your war (or at least in any subdirectory). For example if your war is like:

```
WebDataViewer.war
    |
    |--page.xhtml
    |
    |--WEB-INF
    |     |
    |     |- web.xml
    |     |- ...
    |- ... 
```

A valid address would be: `http://localhost:8080/WebDataViewer/page.xhtml`.

# groovy - Gradle 任务定义继承

> ID：13824349
> 
> 赞同：10
> 
> 时间：2012-12-11T16:30:34.263
> 
> 标签：groovy, gradle

是否可以从另一个任务定义继承一个任务定义？我想要做的是创建一些测试配置文件，所以我有默认测试 -

```
test {

    include 'com/something/something/**'
    exclude 'com/something/else/**'

    maxParallelForks 5

    testLogging{
        exceptionFormat "full"
        showStackTraces = false
    }

    jvmArgs '-Xms128m', '-Xmx512m', '-XX:MaxPermSize=128m'
} 
```

以及其他一些带有覆盖的“include”或“maxParallelForks”部分等的测试。

是否可以不创建新的 Task 类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T20:30:24.677

您可以使用以下构造一次性配置所有这些任务，前提是它们的类型相同：

```
tasks.withType(Test) {
  include 'com/something/something/**
  ...
} 
```

这可以一次性配置所有“测试”类型的任务。之后，您可以覆盖配置。

或者，如果您不想设置所有任务，或者其中一些任务具有不同的类型，您可以像下面的代码片段一样枚举它们。

```
["test","anotherTestTask"].each { name ->
  task "$name" {
    include ...
  }
} 
```

请记住，您拥有 Groovy 的完整脚本功能，因此这里有很多选项...

# php - shell_exec 语法错误。直接在终端运行就可以了

> ID：13824350
> 
> 赞同：3
> 
> 时间：2012-12-11T16:30:35.827
> 
> 标签：php, bash

有这个命令：

```
 $command = "diff -bBdH --ignore-all-space <(echo 'hi') <(echo 'hi1')";
    echo $command;
    $result = shell_exec($command); 
```

在屏幕上我看到：

```
 sh: 1: Syntax error: "(" unexpected
    diff -bBdH --ignore-all-space <(echo 'hi') <(echo 'hi1') 
```

如果我将控制台输出中的第二行复制粘贴到终端中，结果将是正确的。（也在另一台机器上复制）。

我在这里遗漏了一些简单的东西，看不到它是什么。

* * *

此外，为什么我的输出反转了？
我清楚地在执行命令之前回显了命令，因此 shell 的语法错误应该出现在`shell_exec`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:54:38.867

您的语法对 Bash 很好，但对`sh`. 在 Bash 中显式运行它，或者将 Bashisms 转换为经典的 Bourne shell（有点挑战性，可能需要一个临时文件）。

我不知道 PHP 是否提供了一种方法来指定要在哪个 shell 中使用`shell_exec`，但您至少可以为您`sh`运行`bash`。不过，嵌套引用有点棘手。

```
shell_exec("bash -c 'diff -bBdH --ignore-all-space <(echo \"hi\") <(echo \"hi1\")'"); 
```

标准输出和标准错误之间的输出顺序是任意的；输出缓冲可能会导致在常规打印之前打印错误消息，尽管它们以不同的顺序执行。在单个流中，您当然可以依赖有序输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:35:18.340

您是否尝试过引用变量并在回显字符串周围加上引号？

```
$command = "diff -bBdH --ignore-all-space <(echo '" . $str1 ."') <(echo '" . $str2 . "')";
echo $command; 
```

我相信引用变量总是好的做法。它使其易于阅读并有助于解决烦人的错误。

# emacs - Texinfo，如何处理不可能的下一个/上一个？

> ID：13824353
> 
> 赞同：1
> 
> 时间：2012-12-11T16:30:44.330
> 
> 标签：emacs, texinfo

我正在尝试以 Texinfo 格式编写文档（我猜必须是 Emacs 的传统格式）。这是一场噩梦......无论如何，我可以直截了当地说，当我开始时，源代码给我的错误更少，但这些错误无法理解并因此修复。

所有错误都归结为“坏”的下一个/上一个/上节点。它们都发生在没有“下一个”、没有“上一个”和没有“上”节点的地方。即列表中的最后一个节点没有下一个节点，同样，第一个节点也不能有前一个，顶层也不能有“上”。节点。这些是我收到的确切消息：

> ./i-iterate/info/i-iterate.texi:385：节点“dot-product|join|distinct”的下一个字段未指向（可能是不正确的切片？）。
> 
> ./i-iterate/info/i-iterate.texi:392: 这个节点（返回）有坏的 Prev。
> 
> ./i-iterate/info/i-iterate.texi:199：节点“最初”的下一个字段未指向（可能是不正确的切片？）。
> 
> ./i-iterate/info/i-iterate.texi:120: 这个节点 (for) 有坏的 Prev。
> 
> ./i-iterate/info/i-iterate.texi:29：节点“Top”的下一个字段未指向（可能是不正确的切片？）。
> 
> ./i-iterate/info/i-iterate.texi:120: 这个节点 (for) 有坏的 Prev。

我的文本文件结构如下：

```
- Top
|- menu-0
|  |- menu-2
|- menu-1
<list of nodes> 
```

即 中提到的节点`menu-2`应该有它们的顶部节点`menu-0`，并且是和`Top`中的节点的顶部节点。`menu-0``menu-1`

`for`node 是 中的第一个节点`menu-0`，`return`node 是 中的第一个节点`menu-1`，`dot-product|join|distinct`是 中的最后一个节点`menu-2`，`initially`是 中的最后一个节点`menu-0`。

顶部节点不能有上一个/下一个/上一个节点......原因很明显。

根据要求，违规节点：

```
@node for, with, , Top
@node return, collect, , Top
@node dot-product|join|distinct, , permutations, for
@node initially, , finally, Top 
```

更多信息。我实际上可以通过将`return`节点指定为 的下一个节点`initially`和`initially`作为`return`. 但这不是想要的效果，因为它们两个属于不同的节点集。

此外，这就是整个菜单的样子：

```
@menu 
* for::       A multi-purpose driver for doing variety of things.
* with::      A driver for variable declaration.
* generate::  A general purpose generator driver.
* repeat::    A simple driver for performing iteration N number of itmes.
* finally::   A driver that runs when the iteration finishes normally.
* initially:: A driver that runs before any code in the iteration.
@end menu

@strong{Keywords}

@menu
* return::   Returns the control flow to the form outside the loop.
* collect::  Generates a list with the cells being the experssion given.
* hash::     Generates a hash-table with the provided keys and values.
* skip::     Skips the execution of the rest of the loop body.
* previous:: Gives the value of the variable from the previous iteration.
* next::     Gives the value of the variable from the next iteration.
* output::   Prints the variable to the dedicated stream.
* insert::   Generates a vector and inserts elements into it.
* minimize:: Finds the minimum value of the variable.
* maximize:: Finds the maximum value of the variable.
* count::    Counts the number ot times this expression was executed.
* sum::      Sums the values of this variable.
* multiply:: Multiplies the values of this variable.
* reduce::   General purpose accumulation handler.
@end menu

@node for, with, , Top
@chapter Multi-purpose driver

... description of what for node is ...

@strong{For continuations}

@menu
* in|on::                     Iterates over lists.
* upfrom|from|downfrom::      Iterates numberically.
* across|reverse|binary::     Iterates over arrays.
* depth-first|breadth-first:: Iterates over trees.
* keys|values|pairs::         Iterates over hash-tables.
* random::                    Produces unique random each iteration.
* chars|words|lines::         Iterates over entities in buffer.
* permutations::              Generates permutation of an array.
* dot-product|join|distinct:: Iterates over sets.
@end menu 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:14:03.047

只需使用`@node for`and`@node return`没有额外的参数。`@chapter`然后，Texinfo 将根据和其他切片命令自动找出 prev/next/up 链接。

# jquery - 如何更改 jQuery UI Datepicker Z-Index 值？

> ID：13824355
> 
> 赞同：8
> 
> 时间：2012-12-11T16:30:46.343
> 
> 标签：jquery, css, jquery-ui, jquery-ui-datepicker, jquery-ui-timepicker

我被迫使用 1.8.10 的旧版本的 jquery ui。此版本中的日期选择器在 z-index 设置中有一个错误，有时会使其出现在其他控件下。我只是想调整 dp 的 z-index 以便它出现在其他控件的顶部。我试图将 z-index 更改为 .js 文件，但失败了。我读过你必须在 aftershow 事件上设置这个值，因为如果它更早，该值将被覆盖（不确定这是否属实）。这是我如何创建 dp 实例的示例...我还将时间选择器附加到日期选择器。

```
 $(function () {
        $("input[id$='txtPreviousCutOff']").datetimepicker({
            timeFormat: "hh:mm tt",
            stepMinute: 5
        });
        $("#dpimage6").click(function () {
            $("input[id$='txtPreviousCutOff']").datepicker("show")
        });
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:32:11.300

```
.ui-datepicker-div { z-index: 999999; } 
```

或者用js：

```
$(function () {
    $("input[id$='txtPreviousCutOff']").datetimepicker({
        timeFormat: "hh:mm tt",
        stepMinute: 5
     });
     $("#dpimage6").click(function () {
        $("input[id$='txtPreviousCutOff']").datepicker("show")
    });
    $('.ui-datepicker-div').css('zIndex', 999999);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T16:34:59.520

您需要将样式应用于`ui-widget-content` 课程

```
.ui-widget-content
{
    z-index: 100; 
} 
```

确保添加的类具有**更好的特异性**，以便它覆盖`UI styles`

```
#datepicker.ui-widget-content {} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-20T14:39:13.013

这段代码对我有用。假设我有日期选择器 div 名称“ui-datepicker-div”并且应用类是“ui-datepicker”。所以我给 css as ，它为我工作。

```
#ui-datepicker-div ,.ui-datepicker { z-index: 99999 !important; } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-10T02:47:13.407

看起来 datepicker 复制了原始输入元素具有的任何 z-index 值。我可以想到两种方法来解决这个问题：

**非 JS** 只需添加`z-index:1051;`到您的输入元素的样式属性。这是基于 bootstrap`.modal`类使用 1050 的 z-index 的观察结果。

**使用 JS 的动态解决方案** 在声明日期选择器时，添加一个 beforeShow 处理程序，该处理程序检索 z-index 并将 datepicker 的 z-index`.modal`设置为高于该值的 1：

```
datepicker({beforeShow: function(inputElem, inst) {
          var zi = Number($(inputElem).closest('.modal').css('z-index'));
          $(inputElem).css('z-index',zi+1);
          }}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T16:37:53.253

使用它来设置您的 datepicker z-index：（未经测试，但应该可以工作）

```
$("input[id$='txtPreviousCutOff']").datetimepicker({
            timeFormat: "hh:mm tt",
            stepMinute: 5,
            beforeShow: function() {$('#ui-datepicker-div').css('z-index',++$.ui.dialog.maxZ); }
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-21T07:32:09.590

只需更改 CSS：

像以前一样这样做：

```
/* Original */
.ui-datepicker { width: 17em; padding: .2em .2em 0 }
/* Modify */
.ui-datepicker { width: 17em; padding: .2em .2em 0; z-index:9999 !important; } 
```

不要忘记添加`!Important`。

这会覆盖任何由`javascript`.

希望这会工作:)

快乐编码

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-28T02:59:17.527

当用户单击用于控制日期选择器的文本框时，我调用了此函数

```
function textboxWhenClicked(){
  $("#textboxid").datepicker();
  $("#ui-datepicker-div").css("z-index", 999999);
} 
```

工作得很好

-M

# c# - XNA 屏幕截图显示的是预渲染，而不是最终渲染

> ID：13824359
> 
> 赞同：3
> 
> 时间：2012-12-11T16:30:57.343
> 
> 标签：c#, xna, screenshot, spritebatch, bloom

我有一个使用 Reach 图形设置用 C# XNA 4.0 编码的 Windows 平台游戏。我的项目基于 GameStateManagement 示例，但后来我添加了 Bloom 和 spriteSheet/spriteBatch 功能。

我希望保存最终屏幕输出的屏幕截图。但是，当我保存我的屏幕截图时，它只显示了在应用 Bloom 之前和显示我的 HUD 文本之前的渲染（我在 Bloom 之后绘制）。在这两个过程之后，我在 Draw 方法结束时保存了我的屏幕截图。

我尝试过各种各样的事情。安德鲁在这里的回答[Take screen shot in XNA](https://stackoverflow.com/questions/1775196/take-screen-shot-in-xna)很有帮助，并且确实保存了图像；但是，它并没有保存最终渲染。

我觉得它与绽放过程或精灵批次有关。

这是我的代码：

```
 example {
    public override void Draw(GameTime gameTime)
    {
        ScreenManager.GraphicsDevice.SetRenderTarget(sceneRenderTarget);
        // Clear the screen to black
        ScreenManager.GraphicsDevice.Clear(ClearOptions.Target,
                                           Color.Black, 0, 0);
        SpriteBatch spriteBatch = ScreenManager.SpriteBatch;
        spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend);

    // then i draw all my game stuff

        spriteBatch.End();

        #region Post-Processing & Bloom
        ScreenManager.GraphicsDevice.SamplerStates[1] = SamplerState.LinearClamp;

        // Pass 1: draw the scene into rendertarget 1, using a
        // shader that extracts only the brightest parts of the image.
        bloomExtractEffect.Parameters["BloomThreshold"].SetValue(
            Settings.BloomThreshold);

        DrawFullscreenQuad(sceneRenderTarget, renderTarget1,
                           bloomExtractEffect,
                           IntermediateBuffer.PreBloom);

        // Pass 2: draw from rendertarget 1 into rendertarget 2,
        // using a shader to apply a horizontal gaussian blur filter.
        SetBlurEffectParameters(1.0f / (float)renderTarget1.Width, 0);

        DrawFullscreenQuad(renderTarget1, renderTarget2,
                           gaussianBlurEffect,
                           IntermediateBuffer.BlurredHorizontally);

        // Pass 3: draw from rendertarget 2 back into rendertarget 1,
        // using a shader to apply a vertical gaussian blur filter.
        SetBlurEffectParameters(0, 1.0f / (float)renderTarget1.Height);

        DrawFullscreenQuad(renderTarget2, renderTarget1,
                           gaussianBlurEffect,
                           IntermediateBuffer.BlurredBothWays);

        // Pass 4: draw both rendertarget 1 and the original scene
        // image back into the main backbuffer, using a shader that
        // combines them to produce the final bloomed result.
        ScreenManager.GraphicsDevice.SetRenderTarget(null);

        EffectParameterCollection parameters = bloomCombineEffect.Parameters;

        parameters["BloomIntensity"].SetValue(Settings.BloomIntensity);
        parameters["BaseIntensity"].SetValue(Settings.BaseIntensity);
        parameters["BloomSaturation"].SetValue(Settings.BloomSaturation);
        parameters["BaseSaturation"].SetValue(Settings.BaseSaturation);

        ScreenManager.GraphicsDevice.Textures[1] = sceneRenderTarget;

        Viewport viewport = ScreenManager.GraphicsDevice.Viewport;

        DrawFullscreenQuad(renderTarget1,
                           viewport.Width, viewport.Height,
                           bloomCombineEffect,
                           IntermediateBuffer.FinalResult);

        #endregion

        spriteBatch.Begin();
        // Draw HUD
        spriteBatch.End();

        if (screenShotTake)
        {
            using (FileStream fs = File.Open(@"screenshot" + (screenshotNumber) + @".png", FileMode.OpenOrCreate))
            {
                // Right here I try to save out the screen shot Texture2D
                sceneRenderTarget.SaveAsPng(fs, (int)viewportSize.X, (int)viewportSize.Y); // save render target to disk
            }
        }
    }

    #region PostProcess & Bloom
    void DrawFullscreenQuad(Texture2D texture, RenderTarget2D renderTarget,
                            Effect effect, IntermediateBuffer currentBuffer)
    {
        ScreenManager.GraphicsDevice.SetRenderTarget(renderTarget);

        DrawFullscreenQuad(texture,
                           renderTarget.Width, renderTarget.Height,
                           effect, currentBuffer);

    }

    void DrawFullscreenQuad(Texture2D texture, int width, int height,
                            Effect effect, IntermediateBuffer currentBuffer)
    {
        if (showBuffer < currentBuffer)
        {
            effect = null;
        }

        spriteBatch.Begin(0, BlendState.Opaque, null, null, null, effect);
        spriteBatch.Draw(texture, new Rectangle(0, 0, width, height), Color.White);
        spriteBatch.End();
    } 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T18:45:55.093

问题在这里：

```
ScreenManager.GraphicsDevice.SetRenderTarget(null); 
```

由于这条线，您将效果绘制到后台缓冲区，但您保存的渲染目标将被单独留下。您可以看到效果的结果，因为它是直接绘制的，但您保存的不是您绘制到后台缓冲区的内容。要解决此问题，请将效果绘制到另一个 RenderTarget，然后将其作为单个纹理绘制到后台缓冲区。显然，这是对进程的另一个绘制调用，但它的成本最低。通过这样做，您可以从新的 RenderTarget 中获取纹理并根据需要保存它。

# c++ - WinAPI中使用Unicode的奇怪字符而不是国家字母

> ID：13824363
> 
> 赞同：2
> 
> 时间：2012-12-11T16:31:04.953
> 
> 标签：c++, winapi, unicode

我的程序从文件中读取文本并将其放入组合框中。
当文件包含带有英文字符的文本时，一切正常。
当它包含一些波兰字母时，它们被替换为奇怪的字符。
文件编码为 UTF-8（无 BOM）。

```
myCombo = CreateWindowExW(WS_EX_CLIENTEDGE, (LPCWSTR)L"COMBOBOX", NULL,
                             WS_CHILD | WS_VISIBLE | CBS_DROPDOWNLIST,
                             a, b, c, d,
                             hwnd, (HMENU)ID_COMBO, hThisInstance, NULL);

wstring foo;
wifstream bar("theTextFile.txt");
getline(bar, foo);
SendMessageW(myCombo, CB_ADDSTRING, (WPARAM)0, (LPARAM)(foo.c_str())); 
```

我该怎么做才能让我的程序显示正确的国家字母？

PS。对不起我的英语不好:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:41:49.000

`wifstream`默认情况下不会在 Windows 上读取 UTF-8 文本。流语言环境中的`codecvt`facet 是将文件中的字节`wchar_t`转换为`wchar_t`.

像这样的东西：

```
#include <fstream>
#include <string>

#include <locale>  // std::locale
#include <codecvt> // std::codecvt_utf8_utf16
#include <memory>  // std::unique_ptr

#include <Windows.h> // WriteConsoleW

int main(int argc, const char * argv[])
{
    std::wstring foo;
    std::wifstream bar("theTextFile.txt");

    typedef std::codecvt_utf8_utf16<wchar_t, 0x10FFFF, std::consume_header> codecvt;
    std::unique_ptr<codecvt> ptr(new codecvt);
    std::locale utf8_locale((std::locale()), ptr.get());
    ptr.release();
    bar.imbue(utf8_locale);

    std::getline(bar, foo);

    DWORD n;
    WriteConsoleW(GetStdHandle(STD_OUTPUT_HANDLE), foo.c_str(), foo.size(), &n, NULL);
} 
```

# excel - 分组/取消分组似乎链接到隐藏/取消隐藏功能

> ID：13824367
> 
> 赞同：1
> 
> 时间：2012-12-11T16:31:14.300
> 
> 标签：excel, vba

如果过去有人问过这个问题，我很抱歉。但是，我无法找到解决方案。

我在工作表中有几个模块。我的数据使用 excel 大纲功能组织成组。我有4个级别。我还有对数据进行排序并有选择地隐藏行的代码。所有这一切都很好。问题是我的最后一行，如下：

```
ActiveSheet.Outline.ShowLevels RowLevels:=3 
```

执行此行会“取消隐藏”我刚刚隐藏的所有行。

不包括这一行 - 宏工作并且行被正确隐藏。

如果该行位于宏的开头，宏仍会“取消组合”到级别 4 以执行。

谁能解释可能导致这种行为的原因？

谢谢你。

# crystal-reports - 如果两个字段中的任何一个字段中有“是”，则创建一个公式以显示“Y”

> ID：13824370
> 
> 赞同：1
> 
> 时间：2012-12-11T16:31:21.290
> 
> 标签：crystal-reports, crystal-reports-xi

如果两个字段之一的值为 YES，我已经尝试了 2 个公式来在我的报告中获得“Y”，但我无法让公式起作用。

公式 1：如果 ({Print.RetailRx} = "YES") 或 ({Print.MailRx} = "YES") 那么 "Y" Else ""

公式 2： if ({Print.RetailRx} = "YES") then "Y" else if ({Print.MailRx} = "YES") then "Y"

如果retailRx 的值为“YES”，我会得到“Y”，但它不适用于MailRx。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:48:40.160

在哪些情况下会失败？它在做什么？

第一个可能是最简单的解决方案：

```
if {Print.RetailRx} = "YES" or {Print.MailRx} = "YES" then 
 "Y" 
else 
 "" 
```

您可能只需将公式编辑器顶部的下拉列表更改为：空值的默认值（而不是空值的异常）。

# objective-c - 呈现模态视图控制器时出现异常：NSInternalInconsistencyException

> ID：13824372
> 
> 赞同：0
> 
> 时间：2012-12-11T16:31:23.440
> 
> 标签：objective-c, ios, ios5, ios6, ios5.1

当我尝试呈现模态视图控制器时，会发生异常：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
reason: 'Attempting to begin a modal transition from <UINavigationController: 0x1d906060>
to <UINavigationController: 0x1da7a6d0> while a transition is already in progress. Wait
for viewDidAppear/viewDidDisappear to know the current transition has completed' 
```

现在，我读到了类似的问题，他们只是稍微延迟打开了模态视图，比如

```
[NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(openModalController) userInfo:nil repeats:NO]; 
```

演示文稿如下所示：

```
- (void)openImage:(ImageModel *)imageModel{
FullscreenImageViewController_iPhone * controller = [[FullscreenImageViewController_iPhone alloc] init];
controller.imageModel = imageModel;
UINavigationController * navController = [[UINavigationController alloc] initWithRootViewController:controller];
UIViewController * visibleController = [[AppDelegate_iPhone app] visibleViewController];
[visibleController presentViewController:navController animated:YES completion:^{

}];
} 
```

这不可能是真正的解决方案，对吗？我如何检查我的应用程序中是否正在进行某些转换，并在当前转换完成后立即打开新的模态视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T14:22:03.470

这对我有用。如果您使用 UIViewController 的 isBeingPresented 和 isBeingDismissed 方法来测试是否正在进行演示或关闭，请稍等片刻再试一次：

```
- (void) presentVC {    
    if (presentingVC.isBeingPresented || presentingVC.isBeingDismissed) {
         double delayInSeconds = 0.3;
         dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
         dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
               [self presentVC];
         });
    }
    else {
        [presentingVC presentViewController:presentedVC animated:NO completion:nil];
    }
} 
```

# c++ - C++ 中可扩展的自动类注册

> ID：13824375
> 
> 赞同：6
> 
> 时间：2012-12-11T16:31:27.780
> 
> 标签：c++, templates, macros, c-preprocessor

C++ 中的自动类注册是一项常见任务，也是 StackOverflow 上的一个常见问题：

[在对象工厂中注册对象创建者](https://stackoverflow.com/questions/1310214/register-an-object-creator-in-object-factory)

[以某种方式在列表中注册我的课程](https://stackoverflow.com/questions/1691473/somehow-register-my-classes-in-a-list)

[使用宏自动注册对象创建函数](https://stackoverflow.com/questions/6137706/automatic-registration-of-object-creator-function-with-a-macro)

[c++派生类型的自动工厂注册](https://stackoverflow.com/questions/9975672/c-automatic-factory-registration-of-derived-types)

基本目标是向某个注册表或工厂自动注册类，以便以后可以对每个类进行一些工作。

这是一种成熟的技术，被库（例如）Google Test ( [http://code.google.com/p/googletest](http://code.google.com/p/googletest) ) 使用，它自动注册 Test 类的子类，以便可以自动实例化每个测试并在测试执行期间运行。

注册可以通过实例化其构造函数进行注册的静态 Registrar 类来完成，或者通过巧妙地使用 CRTP 并将注册代码放入基类构造函数中，或者您喜欢的任何内容（上面的链接提供了几种不同的可能技术）。

然而，当我实现这些技术中的任何一种时，我发现它们的扩展性非常差。如果我在 Google Test 中有 10,000 个 TEST 宏调用，编译和链接就会停​​止（MSVC 2010）并且二进制文件大小会爆炸。如果我以另一种方式实现这一点，使用 10,000 个具有静态注册器的子类，我会看到相同的行为。

例如，考虑简化的示例：

```
#include <iostream>
#include <string>

class Base {

    public:

        Base( const std::string& Name_ ) : Name( Name_ ) { ; }
       ~Base() { ; }

        virtual std::string GetName() const { return Name; }
        virtual void DoSomething() = 0;

    private:

        std::string Name;

};

class Registry {

    public:

        static Registry& GetInstance() {
            static Registry* Instance = new Registry();
            return *Instance;
        }

        void Register( const Base* b ) {
            std::cout << "Registered class " << b->GetName() << std::endl;
        }

    private:

        Registry()  { ; }
       ~Registry()  { ; }

};

class Registrar {

    public:

        Registrar( const Base* b ) {
            Registry::GetInstance().Register( b );
        }

       ~Registrar() { }

};

#define  REGISTER( CLASS )                                          \
    class CLASS : public Base {                                     \
        public:                                                     \
            CLASS( const std::string& Name ) : Base( Name ) { ; }   \
            virtual void DoSomething();                             \
        private:                                                    \
            static Registrar m_Registrar;                           \
    };                                                              \
    Registrar CLASS::m_Registrar( new CLASS( #CLASS ) );            \
    void CLASS::DoSomething()

int main( int argc, char** argv )
{
    return 0;
}

REGISTER( Class1 )
{
    std::cout << "Doing something in Class1" << std::endl;
}

REGISTER( Class2 )
{
    std::cout << "Doing something in Class2" << std::endl;
}

[...] 
```

总共有 10000 个自动生成的 REGISTER 调用。

这是否有一个根本原因不能很好地扩展？编译器会阻塞 10000 个类吗？在 MSVC 2010 下，在相当快的机器上编译上述代码需要将近两分钟，并生成大小超过 5 MB 的二进制文件。如果我对 Google Test 进行类似操作，我会看到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:43:37.940

用 C++ 编写 Java 代码很少能奏效。所有这些堆分配可能会扼杀性能（就像在 Java 中那样，但 Java 启动太慢以至于没有人注意到）。使用静态对象，不要将`Registrar`对象放入每个生成的类中；那只是浪费时间和空间。

# sql - Sum 和 distinct 不会改变结果？

> ID：13824377
> 
> 赞同：2
> 
> 时间：2012-12-11T16:31:42.467
> 
> 标签：sql, sum, distinct

我是一个新手试图在这里解决这个问题，到目前为止没有运气，非常感谢任何帮助！！！

```
Select Distinct
   (AB.agency_no || '-' || ab.branch_no) AS "AGENCY-BRANCH",
   count (AB.agency_no || '-' || ab.branch_no) AS Occurences,
   A.AGY_NAME AS AGENCY,
   Sum(AB.annual_premium) as Premium
 From Agency_Book_View AB, Agency A, Branch B
 Where AB.agency_no = A.Agency_No
   AND B.EXPIRATION_DATE = TO_DATE('12-31-2078', 'MM-DD-YYYY')
   AND B.EFFECTIVE_DATE <= sysdate and b.effective_date >=sysdate - 364
 Group by AB.agency_no || '-' || ab.branch_no, A.Agy_Name, ab.annual_premium
 Order by AB.agency_no || '-' || ab.branch_no 
```

因此，我试图返回每个“代理分支机构”的年度总保费，并且我得到了多次出现的代理分支机构。我正在尝试为每个代理分支机构设置一条线路。我希望这很清楚。我试图包含结果集，但不允许在我的帖子中包含图片。

非常感谢！

布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:36:46.543

我认为您需要从 group by 子句中删除 ab.annual_premium 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:38:29.837

试试这个 ：

```
SELECT (AB.agency_no || '-' || AB.branch_no) AS "AGENCY-BRANCH",
    COUNT(AB.agency_no || '-' || AB.branch_no) AS Occurences,
    A.AGY_NAME AS AGENCY,
    SUM(AB.annual_premium) AS Premium
FROM Agency_Book_View AB, Agency A, Branch B
WHERE AB.agency_no = A.Agency_No AND AB.branch_no = B.branch_no
  AND B.EXPIRATION_DATE = TO_DATE('12-31-2078', 'MM-DD-YYYY')
  AND B.EFFECTIVE_DATE <= SYSDATE AND B.effective_date >= SYSDATE - 364
GROUP BY AB.agency_no || '-' || AB.branch_no, A.Agy_Name
ORDER BY AB.agency_no || '-' || AB.branch_no 
```

我加入了 B 表和 AB 表，删除了 DISTINCT 和 GROUPed BY ab.annual_premium。

# c++ - Eclipse CDT 添加现有源而不复制

> ID：13824381
> 
> 赞同：8
> 
> 时间：2012-12-11T16:31:56.077
> 
> 标签：c++, eclipse

我有一个 C++ 项目 proj1，其中包含一些源文件，但是我也想使用我在另一个项目 proj2 中的一些源文件。proj1 和 proj2 都是目录 my_projects 的子目录。我不想让 eclipse 复制文件，因为我想确保我只有一个副本可以编辑。这就像 MS Visual Studio 的“添加现有项目”选项。

我的目标是能够为 proj1 和 proj2 创建 makefile，将两个目录压缩在一起并将它们发送给同事，这样他们就可以使用 make 自己构建两个项目。

这在 Eclipse 中可能吗？我已经搜索并没有找到解决方案。

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-31T22:40:22.310

我一直在寻找解决方案，我终于找到了。右键单击项目并选择构建设置。在左侧的构建标题下单击“设置”。然后在“工具设置”选项卡下单击编译器标题下的“目录”。然后点击顶部的添加按钮。如果所需文件位于同一工作区的另一个项目中，请单击工作区按钮，然后导航到文件所在的确切文件夹。一旦你完成了这个瞧！您应该能够构建项目！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:59:39.180

如果您在 Eclipse 中打开了 proj2，请右键单击该项目并选择*Import...*，然后选择*General > FileSystem*并点击下一步。在顶部窗口中选择 proj1 中包含要链接的资源的目录。在顶部窗口中选择要链接的文件后，点击高级按钮打开子菜单并选择*在工作区中创建链接，*如下图所示： ![在此处输入图像描述](../Images/559718b63325450bf2f75c8d5515f97a.png)

这个问题解决了使用相对路径而不是绝对路径设置 Makefile：[Getting Eclipse CDT to use relative include paths in generated Makefiles](https://stackoverflow.com/questions/3997152/getting-eclipse-cdt-to-use-relative-include-paths-in-generated-makefiles)

# ruby-on-rails - 我编辑的客户的出生日期不起作用

> ID：13824384
> 
> 赞同：1
> 
> 时间：2012-12-11T16:32:01.063
> 
> 标签：ruby-on-rails, date

嗨，我在 Rails 上使用 ruby​​，当我输入出生日期时，年份只是从 2007 年到 2012 年，我的 _form，html.erb 上有这个命令（这是在视图上），当我编辑客户端时是我想要 ge 出生的那一天只是给我 2007 年到 2012 年。

```
 <div class="field">
     <%= f.label "Fecha de nacimiento:" %>
     <%= f.date_select :fecha_nacimiento %>
   </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:41:10.283

您可以使用参数来指定您`start_year`的`end_year`选择。例子：

```
<div class="field">
  <%= f.label "Fecha de nacimiento:" %>
  <%= f.date_select :fecha_nacimiento, :start_year => 1950, :end_year => (Time.now.year - 10) %>
</div> 
```

看`:end_year`，我使用了，`Time.now.year - 10`因为我假设注册的最低年龄是 10 岁。

蟒蛇排序 =]

参考：[http ://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)

# java - 从字符串创建特定数量的字节

> ID：13824385
> 
> 赞同：0
> 
> 时间：2012-12-11T16:32:01.253
> 
> 标签：java, serial-port

我想知道是否有办法从字符串创建特定数量的字节。我正在尝试对我的代码的某些部分进行单元测试，它可以采用字节数组或字符串。但是我得到的数据将正好包含 132 个字节（其中每个数据点是两个字节有符号整数，使用 2 的补码）。

我正在检索的数据将由上述字节中的多个数据点组成，其中每个数据点为 2 个字节。

我打算对我的代码进行单元测试。所以我想创建一个字符串并转换为字节数组并传递它，以便我可以再次交叉检查我的数据点。

还有任何工具可以让我通过 com 端口发送二进制数据。我在看 eltima 软件串行端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:57:27.700

我正在做这种方式，但正在寻找更简单的方法......

```
final String MACID = new Character((char) 48).toString();
final String STX = new Character((char) 2).toString();
final String str = MACID + STX;
final byte[] utf8Bytes = str.getBytes("UTF-8"); 
```

这肯定只需要 2 个字节。

# c# - EF5 和 Lamba/Linq - 如何仅包含相关表的某些列

> ID：13824391
> 
> 赞同：2
> 
> 时间：2012-12-11T16:32:15.987
> 
> 标签：c#, linq, entity-framework, lambda

我的存储库中有一个方法来检索项目的所有记录

```
public IQueryable<Item> GetAll()
        {
            //The following causes a circular reference if you attempt to serialize it via an API call.
            IQueryable<Item> items = context.Items.Include(c => c.UserProfile).Include(c => c.UserProfile1).AsQueryable();
            return items;
        } 
```

这会导致 Kendo Grid 和序列化出现问题，因为我两次包含外部表用户配置文件以便能够获取创建和修改项目记录的用户的全名。

有`Include(c => c.UserProfile)`没有办法只包含该`UserProfile.FullName`列？

今天我在我的 ViewModel 中处理这个并创建一个新的子类（这个例子是针对 Locations，而不是 Items）：

```
public class LocationsListViewModel
    {
        public IEnumerable<LocationsGrid> Locations { get; set; }
        public IEnumerable<Facility> Facilities { get; set; }
        public IEnumerable<string> AreaOptions { get; set; }
        public int LocationCount { get; set; }

        public class LocationsGrid
        {
            public int Id { get; set; }
            public string DisplayLocation { get; set; }
            public string Area { get; set; }
            public string Zone { get; set; }
            public string Aisle { get; set; }
            public string Bay { get; set; }
            public string Level { get; set; }
            public string Position { get; set; }
            public string Barcode { get; set; }

        }
    } 
```

然后必须在我的任务或应用服务层（位于控制器和存储库之间）中填充它，如下所示：

```
viewModel.Locations = from l in locations.ToList()
select new LocationsListViewModel.LocationsGrid
{
   Id = l.Id,
   DisplayLocation = l.DisplayLocation,
   Area = l.Area,
   Zone = l.Zone,
   Aisle = l.Aisle,
   Bay = l.Bay,
   Level = l.Level,
   Position = l.Position,
   Barcode = l.BarcodeValue
}; 
```

对于每个实体，这似乎需要大量额外的代码和维护。我确信有一种更有效的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:44:39.007

我通常使用数据传输对象（基本上只是一个具有您正在寻找的确切数据的类，然后从您的数据访问方法返回该类型的对象。

```
 public IQueryable<ItemSummary> GetAll()
    {
        IQueryable<ItemSummary> items = context.Items
            .Select(c => new ItemSummary {
                   FirstProfileName = c.UserProfile.FullName,
                   SecondProfileName = c.UserProfile1.FullName,
                   ScalarProp1 = c.ScalarProp1,
                   ...
                })
            .AsQueryable();
        return items;
    } 
```

我不确定这是否会按照您想要的方式工作，因为我不熟悉 Kendo Grid 等，但它可能有用。

# objective-c - 等待条件继续

> ID：13824394
> 
> 赞同：0
> 
> 时间：2012-12-11T16:32:21.217
> 
> 标签：objective-c, cocoa, grand-central-dispatch, wait, nsrunloop

我有一个方法，我添加到我创建的 GCD 队列中（所以它是一个串行队列），然后异步运行它。从该代码块中，我向主队列进行调度，当调度到主队列的代码块完成时，我将 BOOL 标志设置为 YES，以便我在代码中进一步检查此条件是否为 YES然后我可以继续下一个方法。这是简短的代码：

```
dispatch_queue_t queue = dispatch_queue_create("ProcessSerialQueue", 0);

dispatch_async(queue, ^{

        Singleton *s = [Singleton sharedInstance];

        dispatch_sync(dispatch_get_main_queue(), ^{
            [s processWithCompletionBlock:^{

                // Process is complete
                processComplete = YES;
            }];
        });
});

while (!processComplete) {

        NSLog(@"Waiting");
}

NSLog(@"Ready for next step"); 
```

但是这不起作用，因为 dispatch_sync 永远无法在主队列上运行代码。这是因为我在主队列上运行了一个 while 循环（使其忙碌）？

但是，如果我将 while 循环的实现更改为：

```
while (!processComplete) {

        NSLog(@"Waiting")
        NSDate *date = [NSDate distantFuture];
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:date];
} 
```

它可以正常工作。对于这种情况，这是一个可接受的解决方案吗？我可以用其他首选方式吗？有什么神奇的东西可以`NSRunLoop`做？我需要更好地理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:22:52.763

主线程的 NSRunLoop 作业的一部分是运行在主线程上排队的任何块。通过在 while 循环中旋转，您可以阻止 runloop 继续进行，因此除非您自己明确地让循环运行，否则排队的块永远不会运行。

Runloops 是 Cocoa 的基本组成部分，[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)非常好，所以我建议阅读它。

作为一项规则，我会避免像您那样手动调用运行循环。如果您有多个手动调用在彼此之上运行，您将浪费内存并使事情变得非常复杂。

但是，有一种更好的方法可以做到这一点。将您的方法拆分为 -process 和 -didProcess 方法。使用您的 -process 方法启动异步操作，完成后，从完成块调用 -didProcess。如果您需要将变量从一种方法传递给另一种方法，您可以将它们作为参数传递给您的 -didProcess 方法。

例如：

```
dispatch_queue_t queue = dispatch_queue_create("ProcessSerialQueue", 0);

dispatch_async(queue, ^{
        Singleton *s = [Singleton sharedInstance];

        dispatch_sync(dispatch_get_main_queue(), ^{
            [s processWithCompletionBlock:^{
                [self didProcess];
            }];
        });
}); 
```

你也可以考虑让你的单例拥有调度队列并让它负责处理 dispatch_async 的东西，因为如果你总是异步使用它，它会节省所有那些讨厌的嵌入块。

例如：

```
[[Singleton sharedInstance] processAyncWithCompletionBlock:^{
   NSLog(@"Ready for next step...");
   [self didProcess];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:35:45.997

做类似你发布的事情很可能会冻结用户界面。与其冻结所有内容，不如在完成块中调用您的“下一步”代码。

**例子：**

```
dispatch_queue_t queue = dispatch_queue_create("ProcessSerialQueue", 0);
dispatch_queue_t main = dispatch_get_main_queue();

dispatch_async(queue, ^{

        Singleton *s = [Singleton sharedInstance];

        dispatch_async(dispatch_get_main_queue(), ^{
            [s processWithCompletionBlock:^{
                // Next step code
            }];
        });
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-11T16:52:57.090

不要像在块内等待值那样创建循环，块中的变量是只读的，而是从块内调用您的完成代码。

```
dispatch_async(queue, ^{
    Singleton *s = [Singelton sharedInstance];
    [s processWithCompletionBlock:^{
        //process is complete
        dispatch_sync(dispatch_get_main_queue(), ^{
            //do something on main queue....
            NSLog(@"Ready for next step");
        });
    }];
});
NSLog(@"waiting"); 
```

# ruby-on-rails - 瘦工头停止工作

> ID：13824396
> 
> 赞同：0
> 
> 时间：2012-12-11T16:32:22.730
> 
> 标签：ruby-on-rails, thin, foreman

我在 iMac 上使用带有 RoR 的 Thin webserver。我用 $ foreman start 开始

它工作正常，但现在我在控制台中得到了这个：

```
09:27:10 web.1     | => Booting Thin
09:27:10 web.1     | => Rails 3.1.3 application starting in development on     http://0.0.0.0:5000
09:27:10 web.1     | => Call with -d to detach
09:27:10 web.1     | => Ctrl-C to shutdown server
09:27:10 web.1     | >> Thin web server (v1.3.1 codename Triple Espresso)
09:27:10 web.1     | >> Maximum connections set to 1024
09:27:10 web.1     | >> Listening on 0.0.0.0:5000, CTRL+C to stop
09:27:10 web.1     | Exiting
09:27:11 web.1     | process terminated
09:27:11 system    | sending SIGTERM to all processes 
```

并且 $ 提示出现 - 所以网络服务器没有运行。

有任何想法吗？

我刚刚运行 $ thin start 并得到：

> > 使用机架适配器 /Users/burtondav/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.0.22/lib/bundler/runtime.rb:31:in `block in setup'：您已经激活机架 1.4.1，但您的 Gemfile 需要机架 1.3.6。使用 bundle exec 可以解决这个问题。（宝石::加载错误）

我应该尝试什么 bundle exec 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:20:33.087

`gem 'thin'`在您的应用程序中添加`Gemfile`并执行`bundle exec thin start`以解决版本冲突问题。

# sugarcrm - 如何在 SUGARCRM 中更改法语中的“添加 Dashlets”

> ID：13824400
> 
> 赞同：0
> 
> 时间：2012-12-11T16:32:37.190
> 
> 标签：sugarcrm

我正在开发sugarCRM CE 6.5 版本。我用法语在主屏幕上更改了整个应用程序接受 1 按钮。请任何人都可以帮助我。我想更改位于主屏幕右侧角落的“添加 DASHLETS”按钮。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:18:42.273

在 include/language/fr_fr.lang.php 中更改标签 LBL_ADD_DASHLETS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:48:00.373

您使用哪种语言包将 SugarCRM 翻译成法语？如果您将使用这个 www.sugarforge.org/projects/francais/ 我认为这将在没有任何改变的情况下工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:25:36.833

检查标签

```
LBL_ADD_DASHLETS 
```

目录

```
/include/language/fr_fr.lang.php 
```

如果您对页眉、页脚进行 css 自定义，请检查您的 .tpl 文件

目录之类的

```
/custom/themes/Sugar5/tpls 
```

# ms-access - 如何在后台更新 Access 表中的字段？

> ID：13824404
> 
> 赞同：1
> 
> 时间：2012-12-11T16:32:44.240
> 
> 标签：ms-access, vba

我有一个公式`a_form`，它有一个数据绑定到我的表`my_table`。如果用户单击一个按钮，我想将我的字段更新`txt_mytext`为`"Hello"``"Hello World!"`

如何在不发生写入冲突的情况下更新此字段：

```
This record has been changed by another user since you started editing it. If you save the       record, you will overwrite the changes the other user made. Copying the changed to the clipboard will let you look at the values the other user entered, and then paste your changes back in if you decide to make changes. 
```

我尝试了以下方法：

*   使用 SQL 语句（很明显，我使用这种方法遇到了写冲突，因为我使用数据绑定和 sql 语句访问我的表
*   使用`a_form!txt_mytext = "Hello World!"`. 我不清楚为什么我会使用这种方法得到写入冲突。

有没有第三种方法或者我必须调用`Me!Requery`, `Me!Refresh`, `Me!Dirty`... 以避免写冲突？

我的代码`frm_a_form`是：

```
Private Sub btn_calculate_Click()
         Forms!a_form!txt_mytext = "Hello World!"
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:46:28.343

我不明白你为什么会遇到写冲突。但是，在您自己的回答中，您报告了此方法：

```
Forms!a_form!txt_mytext = "Hello World!" 
```

既然这样有效，请从该表单上命令按钮的单击事件中执行相同的操作：

```
Private Sub btn_calculate_Click()
    Me!txt_mytext = "Hello World!"
End Sub 
```

如果您想立即保存该更改，请将其添加到 click 事件过程：

```
Me.Dirty = False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:50:25.963

这似乎有效：

```
Forms!a_form!txt_mytext = "Hello World!"
DoCmd.DoMenuItem acFormBar, acRecordsMenu, acSaveRecord, , acMenuVer70 
```

我通过谷歌搜索随机发现了这一点，例如[http://www.tek-tips.com/viewthread.cfm?qid=446217](http://www.tek-tips.com/viewthread.cfm?qid=446217)

请随时解释此解决方案或添加您自己的答案。

# javascript - Javascript不是每两分钟更新一次函数

> ID：13824407
> 
> 赞同：0
> 
> 时间：2012-12-11T16:32:53.470
> 
> 标签：javascript

嗨，我有一段 javascript 代码，我想每两分钟调用一次，但是我似乎无法让它工作，当页面第一次加载时它工作正常，但之后它不会更新。

请看下面的代码：

```
 function position(){
 var a=setTimeout(position,60000);
 }

if(navigator.geolocation)
{
navigator.geolocation.getCurrentPosition(function(position)
{
  var lat = position.coords.latitude;
  var lon = position.coords.longitude;
   var xmlHttp = new XMLHttpRequest();  //not the cross browser way of doing it
   xmlHttp.open("GET", "locator/test1.php?lat=" + lat + "&lon=" + lon, true); 
   xmlHttp.send(null);

   });
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:36:39.507

代码运行一次，因为它不在函数中，但再也不会运行，因为您永远不会启动超时。我想你想这样重组：

```
function position() {
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var lat = position.coords.latitude;
      var lon = position.coords.longitude;
      var xmlHttp = new XMLHttpRequest();  //not the cross browser way of doing it
      xmlHttp.open("GET", "locator/test1.php?lat=" + lat + "&lon=" + lon, true); 
      xmlHttp.send(null);    
    });
  }

  // fire again in 120000ms (2 minutes)
  setTimeout(position, 120000);
}

// fire the initial call
position()  ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:36:12.573

```
var intervalId = setInterval(function() {
  position();
}, 12e5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:36:48.430

在您发布的代码中，地理位置功能实际上并不是位置功能的一部分

并且位置永远不会被调用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:36:53.017

setTimeout 只会在指定时间过后运行一次该函数。如果要重复该功能，请使用 setInterval。

有关详细信息，请参阅[“setInterval”与“setTimeout”](https://stackoverflow.com/questions/2696692/setinterval-vs-settimeout)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T16:40:42.097

```
function position(){

  if(navigator.geolocation)
  {
      navigator.geolocation.getCurrentPosition(function(position)
  {
   var lat = position.coords.latitude;
   var lon = position.coords.longitude;
   var xmlHttp = new XMLHttpRequest();  //not the cross browser way of doing it
   xmlHttp.open("GET", "locator/test1.php?lat=" + lat + "&lon=" + lon, true); 
   xmlHttp.send(null);
}

var a=setInterval(position,120000); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T16:44:57.807

你可以尝试 setInterval 来做[https://developer.mozilla.org/en-US/docs/DOM/window.setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

但如果您更喜欢使用 setTimeout，则需要递归调用您的函数。

```
if(navigator.geolocation){
 function doSomethingWithPosition(){
  navigator.geolocation.getCurrentPosition(function(position){
    var lat = position.coords.latitude;
    var lon = position.coords.longitude;
    var xmlHttp = new XMLHttpRequest();  //not the cross browser way of doing it
    xmlHttp.open("GET", "locator/test1.php?lat=" + lat + "&lon=" + lon, true); 
    xmlHttp.send(null);
  });
  //RECURSIVE CALL
  setTimeout(doSomethingWithPosition, 60000);
 }

 //FIRST CALL
 doSomethingWithPosition();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T16:58:11.883

我也有一个建议。

我想你想这样做 - 我使用 jQuery 因为更好的 Ajax 回调功能

```
if(navigator.geolocation) {
  getLoc();
}
function getLoc() {
  navigator.geolocation.getCurrentPosition(function(position) {
    var lat = position.coords.latitude;
    var lon = position.coords.longitude;
    $.get("locator/test1.php?lat=" + lat + "&lon=" + lon, 
      function(data){ 
        // do something with data returned
        setTimeout(getLoc,120000); // call again in 2 minutes
      }
    ); 
  });
} 
```

假设它第一次成功调用它，它将每 2 分钟调用一次定位器

# opengl - GLSL中法线映射的法线模型矩阵计算

> ID：13824410
> 
> 赞同：2
> 
> 时间：2012-12-11T16:32:57.630
> 
> 标签：opengl, matrix, glsl

我需要计算一个法线模型矩阵以在 GLSL 着色器中进行法线映射。我想确保我是对的：当我将视图（相机模型）矩阵与几何模型矩阵相乘时，视图矩阵是否应该已经倒置？[从此处](http://ogldev.atspace.co.uk/www/tutorial26/tutorial26.html)和[此处](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/)找到的在线示例中不清楚。此外，我看到在某些情况下人们也会转置结果矩阵。为什么？那么在 OpenGL 中构建法线模型矩阵的正确方法是什么？

目前我这样做：

```
glm::mat4 view = inverse(GetCameraModel());
glm::mat3 normalModelMatr= glm::mat3(view * mesh.GetModel()); 
```

这是要走的路吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:42:54.553

正确的法线矩阵是模型视图矩阵的逆转置。如果您不进行任何非均匀缩放，即按不同量缩放轴，则矩阵的逆矩阵等于它的转置，因为它是[正交](http://en.wikipedia.org/wiki/Orthogonal_matrix)的。因此，这两个操作抵消了，它只是原始矩阵。

如果你做非均匀比例，矩阵不是正交的，你必须做逆转置。

你取顶部的 3x3 矩阵，因为你只需要旋转和缩放法线，而不是平移。

因此，只要您不采用非均匀缩放，您的法线矩阵就是正确的。

# loops - 批处理脚本 FTP 通过主机列表循环

> ID：13824414
> 
> 赞同：0
> 
> 时间：2012-12-11T16:33:05.037
> 
> 标签：loops, batch-file, ftp, dos

我有以下批处理脚本到 FTP 并从主机拉回文件。(ftpscript.bat)

```
@echo off
@ftp -i -s:"%~f0"&GOTO:EOF

open host1
username
password
cd apples
bin
hash
get fileName.txt fileName.host1
disconnect 
```

我有以下包含主机列表的文本文件。(hosts.txt)

```
 host1
     host2
     host3
     host4 
```

如何遍历文件中的每个主机，文件的每一行，并在其中运行带有主机变量的脚本？

这是我希望它在运行时的样子的示例：

```
@echo off
@ftp -i -s:"%~f0"&GOTO:EOF

open host1
username
password
cd apples
bin
hash
get fileName.txt fileName.host1
disconnect

open host2
username
password
cd apples
bin
hash
get fileName.txt fileName.host2
disconnect

open host3
username
password
cd apples
bin
hash
get fileName.txt fileName.host3
disconnect

open host4
username
password
cd apples
bin
hash
get fileName.txt fileName.host4
disconnect 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:51:00.670

如果您想将您在现有脚本中的所有主机附加`hosts.txt`到现有`ftpscript.bat`脚本中，那么这应该可以工作

```
for /f %%a in (hosts.txt) do (
echo open %%a
echo username
echo password
echo cd apples
echo bin
echo hash
echo get fileName.txt fileName.%%a
echo disconnect
echo.
) >>ftpscript.bat 
```

# javascript - Safari中浮动元素父容器的宽度

> ID：13824415
> 
> 赞同：4
> 
> 时间：2012-12-11T16:33:09.990
> 
> 标签：javascript, html, css, safari, mobile-safari

我在 safari 中包含 2 个浮动元素的 div 的宽度存在问题。

浮动 div 之一的宽度设置为 0，并在单击事件上使用 jquery 展开。safari 中的父容器保留两个 div 的宽度，即使宽度设置为 0。

这里有一个例子，可以在除 Safari 之外的所有地方工作。 [http://jsfiddle.net/XUR7R/6/](http://jsfiddle.net/XUR7R/6/)

HTML：

```
<div class="item-list">
    <ul>
        <li class="article">
              <div class="column">
                  Column 1<br/>
                  <a href="#" class="expand">toggle</a><br/>
              </div>
              <div class="column expandableColumn">
                  Column 2 content
              </div>
        </li>                        
    </ul>
</div> 
```

​ CSS

```
.item-list{
overflow:hidden;            
}

.article{
float:left;
overflow:hidden;
background:#555;
padding:5px;    
}

.column{
float:left;
height:100px;
width:100px;
background:red;    
}

.expandableColumn{
width:0;        
}​ 
```

Javascript

```
$(document).ready(function() {

$('.expand').click(function() {
    if ($(this).hasClass('.expanded')) {
        $('.expandableColumn').animate({
            'width': '0px'
        });
    }
    else {
        $('.expandableColumn').animate({
            'width': '100px'
        });
    }
    $(this).toggleClass('.expanded')
});

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:06:33.087

我不知道这是否是您想要做的事情，但在视觉上它是有效的。

HTML

```
<div class="item-list">
    <ul>
        <li class="article">
              <div class="column">
                  Column 1<br/>
                  <a href="#" class="expand">toggle</a><br/>
              </div>
              <div class="column expandableColumn">
                  <p>Column 2 content</p>
              </div>
        </li>                        
    </ul>
</div>
​ 
```

JS

```
$(document).ready(function() {
            $('.expandableColumn p').hide();

    $('.expand').click(function() {
        if ($(this).hasClass('.expanded')) {
            $('.expandableColumn').animate({
                'width': '0px'
            });
            $('.expandableColumn p').hide();
        }
        else {
            $('.expandableColumn').animate({
                'width': '100px'
            });
            $('.expandableColumn p').show();
        }
        $(this).toggleClass('.expanded')

    })

});​ 
```

我用 a 包裹了第 2 列文本`<p>`，然后添加了一个 hide() 和 show() （你可以做切换或其他任何快速完成的操作），以便在你更改另一个 div 的宽度时触发。

似乎可以在 Safari 中以您想要的方式工作。

这是[小提琴](http://jsfiddle.net/rtHpP/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:16:00.727

我能够通过同时展开和折叠 li 包装器来使其工作：

```
$(document).ready(function() {

$('.expand').click(function() {
    if ($(this).hasClass('.expanded')) {
         $('.article').animate({
            'width': '100px'
        });
         $('.expandableColumn').animate({
            'width': '0px'
        });
    }
    else {
         $('.article').animate({
            'width': '200px'
        });
         $('.expandableColumn').animate({
            'width': '100px'
        });
    }
    $(this).toggleClass('.expanded')

}) 
```

});​</p>

这是小提琴[http://jsfiddle.net/AnjXH/](http://jsfiddle.net/AnjXH/)

# php - 如何在 PHP 中使用 NuSOAP 处理超时？

> ID：13824422
> 
> 赞同：2
> 
> 时间：2012-12-11T16:33:41.460
> 
> 标签：php, web-services, timeout, nusoap

我正在使用 NuSOAP 为支付网关使用 Web 服务，但是，此网关的文档要求：

*   如果 doPayment() 方法耗时超过 300 秒，则应立即执行 getStatus() 方法至少 3 次，以尝试获得成功响应。

问题是，我不知道如何使用 PHP 和 NuSOAP 处理超时。NuSOAP 是否在超时时返回任何特定响应？我现在怎么办它实际上超时了？

这是 NuSOAP 调用的一段代码：

```
$client = new nusoap_client( 'http://webserviceurl?wsdl...' , 'wsdl');

$err = $client->getError();
if ($err)
    die('Constructor error: ' . $err);

$proxy = $client->getProxy();

$payTrans = $proxy->doPayment(array('someparams' => 'somevalues'));

// if doPayment() timed out, then run the getStatus() method 
```

任何投入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T16:55:08.537

我自己回答以供将来参考。首先，您需要扩展 nusoap_client 类的超时值。然后只需在您要测试的方法之前启动一个计时器，并将其与结束时间进行比较：

```
// Extending the timeout value to 300 seconds
$client = new nusoap_client( 'http://webserviceurl?wsdl...' , 'wsdl' , false, false, false, false, 0, 300)

$err = $client->getError();
if ($err)
    die('Constructor error: ' . $err);

$proxy = $client->getProxy();

$start = time(); // starting the timer
$payTrans = $proxy->doPayment(array('someparams' => 'somevalues'));
$timing = time() - $start; // calculating the transaction time

if($timing > 90 && $timing < 310)
    // It timed out: send an email, run another method, etc 
```

# ruby-on-rails-3 - 如何在 Rails 3 上使用 active_scaffold gem 创建漂亮的表单

> ID：13824423
> 
> 赞同：0
> 
> 时间：2012-12-11T16:33:48.590
> 
> 标签：ruby-on-rails-3, forms, activescaffold

1.  如何覆盖日期或时间的活动脚手架表单字段？（datepicker 和 calendar_date_select 对我不起作用，可能是因为我正在使用 activescaffold gem）
2.  如何覆盖 Active Scaffold 表单以从数据库中的资源列表中进行选择？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:34:32.953

我一直在努力解决这个问题，直到我弄清楚了。这是一个例子：

```
class Player < ActiveRecord::Base
  belongs_to :game
  attr_accessible :name
end

class Game < ActiveRecord::Base
  has_many :players 
  attr_accessible :thedate, :thetime, :winnername
end

class GamesController < ApplicationController
  active_scaffold :game do |conf|
    # do nothing in this example
  end
end

module GamesHelper

  # date select
  def game_thedate_form_column (record, options)
    date_select :record, :thedate, options
  end

  # time select
  def game_thetime_form_column (record, options)
    time_select :record, :thetime, options
  end

  # select from database resources
  def game_winnername_form_column (record, options)
    select_tag :winnername, options_for_select(get_players_names_arr(record)), options
  end

  def get_players_names_arr(game)
    names = []
    game.players.each do |player|
      names << player.name
    end
    names 
  end

end 
```

# java - 自动具有多个级别的多个日志文件

> ID：13824427
> 
> 赞同：2
> 
> 时间：2012-12-11T16:33:55.670
> 
> 标签：java, logging, log4j

我在网上搜索了一个解决方案，但没有找到任何东西。

我的问题是：

有很多房间的游戏。每个房间里面都有一个聊天室。我需要使用 LOG4J 在不同文件中创建这些房间的 LOG。

我不想为每个已创建的房间创建一个附加程序。我需要一种自动方法来为每个房间创建一个日志文件。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:51:38.620

Log4J 可以只使用 log4j 配置文件为不同的类创建不同的日志文件。如果房间是一个或多个类的实例，则必须通过代码处理它。一种可能性是在构造函数中创建一个记录器并将其指向一个唯一的临时文件，以便构建的每个房间都有自己的日志文件。我不知道您如何轻松识别带有文件的房间，而不是强制输出作为第一行。这可能有效，但仍然很难仅通过名称来识别正确的文件。如果房间有一些独特之处，您可以尝试将其用作日志文件名，但如果没有您提供的代码，我会猜测您如何做到这一点。

# c# - 如何使用以下代码发布到其他人的个人资料

> ID：13824428
> 
> 赞同：0
> 
> 时间：2012-12-11T16:33:56.430
> 
> 标签：c#, facebook, entity-framework-4.1

我有以下代码：

```
 public void CheckAuthorization()
    {

        string app_id = "";//Your id here
        string app_secret = "";//your secret key
        string scope = "publish_stream, manage_pages";

        if (Request["code"] == null)
        {

            Response.Redirect(string.Format("https://graph.facebook.com/oauth/authorize?client_id={0}&redirect_uri={1}&scope={2}",
               app_id, Request.Url.AbsoluteUri, scope));

        }
        else
        {
            Dictionary<string, string> tokens = new Dictionary<string, string>();
            string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&scope={2}&code={3}&client_secret={4}",
                app_id, Request.Url.AbsoluteUri, scope, Request["code"].ToString(), app_secret);

            HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {

                StreamReader reader = new StreamReader(response.GetResponseStream());
                string vals = reader.ReadToEnd();
                foreach (string token in vals.Split('&'))
                {

                    tokens.Add(token.Substring(0, token.IndexOf("=")), token.Substring(token.IndexOf("=") + 1, token.Length - token.IndexOf("=")-1));

                }
            }

            string access_token=tokens["access_token"];
            var client = new FacebookClient(access_token);
            client.Post("me/feed", new { message="Hi"});

        }

    } 
```

使用此代码，我可以使用该行发布到我的个人资料

```
 client.Post("me/feed", new { message="Hi"}); 
```

我如何才能在其他个人资料上发帖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:40:49.940

尝试这个：

```
client.Post("/PROFILE_ID/feed", new { message="Hi"}); 
```

更多信息：[https ://developers.facebook.com/docs/reference/api/#publishing](https://developers.facebook.com/docs/reference/api/#publishing)

# php - PHP内存不足，最后一次机会函数调用？

> ID：13824433
> 
> 赞同：7
> 
> 时间：2012-12-11T16:34:19.753
> 
> 标签：php

> **可能重复：**
> [PHP 致命错误：内存不足（已分配 80740352）（试图分配 12352 字节）](https://stackoverflow.com/questions/6314733/php-fatal-error-out-of-memory-allocated-80740352-tried-to-allocate-12352-byt)

我们都知道这个错误：

```
Fatal error: Out of memory (allocated 32016932) (tried to allocate 25152 bytes) 
```

有没有办法处理这个错误？也许是执行的函数调用？这不是真正的堆栈溢出，而是系统强加的限制。人们会认为这里会有一点灵活性。我在内存中本地缓存了很多数据进行处理，但是我有一个垃圾收集功能。我已经有功能设置来检查内存使用情况并在超过一定限制时释放内存，但有时我会错过。如果我可以在这个“致命”错误上调用我的函数......好吧，在理想的世界中，程序应该能够恢复。

我的 php.ini 设置为 memory_limit = 500M。

有什么想法吗？

* * *

非常感谢所有对此发表评论的人，但还要特别感谢 @Wrikken 的出色建议。

这就是我最终做的事情：

```
declare(ticks=1);
register_tick_function('TickFunction');
function TickFunction() {
    if(memory_get_usage()>220000000) // 220M
    {
        GlobalDataStore::CheckMemory(); // my garbage collection function   
    }
} 
```

我将 php.ini 内存限制设置得比我实际希望它运行的要高得多，并且 tick 函数负责内存监控并根据需要释放内存。

# facebook - 让 Facebook 应用在页面上可见

> ID：13824434
> 
> 赞同：4
> 
> 时间：2012-12-11T16:34:21.597
> 
> 标签：facebook

作为 facebook 上画布应用程序的创建者，我已经能够将该应用程序添加到我的一个页面中。但是，公众无法在我的页面上看到它，并且其他页面所有者在提供链接 ( `https://www.facebook.com/dialog/pagetab?app_id=112111718948734&display=popup&next=https://dry-savannah-3512.herokuapp.com/`) 以将其添加到他们的页面时会遇到错误消息。

该应用程序的状态是：

“应用程序详细信息页面状态：实时您的应用程序详细信息页面现已上线，并将显示在搜索中。应用程序中心列表状态：未列出您的应用程序未列出，因为它没有足够高的评分和用户参与度，无法在应用程序中心列出这次。请参阅您应用的洞察页面以查看您的应用的用户评分和参与度指标，并查看我们的应用中心指南以获取更多信息。”

如果我链接一群人使用该应用程序，此错误会消失吗？那需要多少？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:39:14.557

您确定该应用程序未处于沙盒模式吗？这是迄今为止页面选项卡对页面管理员可见但对其他用户不可见的最可能原因。

接下来很可能是运行受年龄或位置限制的页面选项卡的应用程序；即使管理员不符合限制条件，他们仍会查看

# javascript - 我可以在 Documents 目录中创建一个 html 文件来访问应用程序包中的 jquery 和 cordova 吗？

> ID：13824436
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:34:30.003
> 
> 标签：javascript, jquery, ios, cordova, nsfilemanager

我正在构建一个 html 文件，该文件存储在

```
[[PROJ UserDirectory] stringByAppendingPathComponent:@"tmp_Form_File.html"] 
```

在文件“tmp_FOrm_File.html”内部，它是动态构建的。正文显示正确，但 JS 不会执行。

我试图做：

```
NSString * cordova_path = [[NSBundle mainBundle] oathForResource:@"cordova-2.2.0" ofType:@"js" inDirectory:@"html"]
NSString = [[@"<script type=\"text/javascript\" src=\"" stringByAppendingString:cordova_path] stringByAppendingString:@"\"></script>"]; 
```

对于 jquery 也是如此。

我的问题是我不认为当我将 htmlfile 加载到 webView 中时，它会相应地获取数据。

我测试了琴弦，它们看起来不错：

```
<script type="text/javascript" src="/var/mobile/Applications/[DATA]/PROJ.app/html/cordova-2.2.0.js"></script><script type="text/javascript" src="/var/mobile/Applications/[DATA]/PROJ.app/html/jquery-1.7.2.min.js"></script><script type="text/javascript">$(function(){ alert("test"); });</script> 
```

1）我做错了吗？如果是这样，我该如何解决这个问题？

2）通过ios将bundle中的html目录复制到Documents会更好吗？如果是这样，怎么做？

**编辑：暂时删除了 jquery 引用，jquery 和 cordova。只是使用纯javascript，它会正确提醒。所以这意味着捆绑包中的 src 有问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:55:44.200

发生这种情况是因为您的引用不起作用。当您希望您的 HTML 在 webview 中呈现并在其中包含一些相对路径时，您可以像使用“为添加的文件夹创建文件夹引用”选项一样添加它。

如果此 html 页面不会获取和存储任何数据，则将其保存在 bundle 中，否则将它们复制到 Appdelegate 中的 Library 或文档文件夹。

希望这可以帮助！

![像这样](../Images/310b53c045995635d5cfdb5fe2cfa4b7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:57:15.240

我无法在 atm 中引用它，但我以这种方式解决了它： - 我将 [BUNDLE]/html 的内容复制到 Documents....

```
 NSString * sourcePath = [[[NSBundle mainBundle] pathForResource:@"cordova-2.2.0" ofType:@"js" inDirectory:@"html"] stringByDeletingLastPathComponent];
    NSString * documentDirectory = [AssetInspectorFileManager UsersDirectory]; 
```

*   调整了javascript的src。

    <脚本类型=\"text/javascript\" src=\"cordova-2.2.0.js\">

    <脚本类型=\"text/javascript\" src=\"jquery-1.7.2.min.js\">

*   关闭缺少的括号

    " $(\"div.container\").css(\"z-index\",1;"

变成了

```
 "   $(\"div.container\").css(\"z-index\",1);" 
```

*   Coomenting 不适合这样做，因为当您写出数据时，例如：

    $(this).click(function(){//[THIS IS A COMMENT] alert("hi");});

因此，您必须针对此类问题进行调整。

# php - php preg_replace 特定 html 注释标签之间的所有内容

> ID：13824438
> 
> 赞同：3
> 
> 时间：2012-12-11T16:34:34.630
> 
> 标签：php, regex, preg-replace

我检查了其他答案，但似乎无法执行以下操作。请帮助某人:)

我想删除介于两者之间的所有内容，包括特定的 html 注释

**HTML：**

```
Some HTML that must stay
<!-- START IF USER_ID -->
some html that must go
<!-- END IF USER_ID -->
Some more HTML that's gotta stay
<!-- START IF USER_ID -->
this also needs to go
<!-- END IF USER_ID --> 
```

因此，介于两者之间的所有内容`<!-- START IF USER_ID -->`以及`<!-- END IF USER_ID -->`评论本身都需要删除

**我的 preg_replace 模式**（这显然是错误的）：

```
"/<!-- START IF USER_ID -->.*?<!-- END IF USER_ID -->/" 
```

**结果应该是**

```
Some HTML that must stay
Some more HTML that's gotta stay 
```

感谢您提前检查并提供答案:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:43:38.283

谢谢@mlwacosmos - 使用您提供的链接。

通过以下方式实现：

```
$startPoint = '<!-- START IF USER_ID -->';
$endPoint = '<!-- END IF USER_ID -->';
$result = preg_replace('#('.preg_quote($startPoint).')(.*)('.preg_quote($endPoint).')#siU', '', $html); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:43:53.470

那个正则表达式看起来不错。使用`m`修饰符使点匹配换行符：

```
"/<!-- START IF USER_ID -->.*?<!-- END IF USER_ID -->/m" 
```

或者，您可以`[\s\S]`用作替代品：

```
"/<!-- START IF USER_ID -->[\s\S]*?<!-- END IF USER_ID -->/" 
```

# mysqldump - api.cloudfoundry.com 上的 cloudfoundry 隧道 mysqldump 非常慢

> ID：13824443
> 
> 赞同：0
> 
> 时间：2012-12-11T16:34:49.367
> 
> 标签：mysqldump, cloud-foundry

我正在尝试在 cloudfoundry 应用程序上备份 mysql 数据库。通过 caldecott 隧道连接的数据库，我可以使用 mysql 连接。

到目前为止，我的数据库是 40k，当我使用 mysqldump 需要很长时间，即 10 分钟后转储 30% - 60% 的数据库（取决于运行），它会因错误而停止`Lost connection to MySQL server during query (2013)`

任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:57:18.700

棘手的一个，我想如果你到 Cloud Foundry 的路线有点慢，你可以依次转储每张桌子。您可以通过在创建隧道时选择无客户端来执行此操作，然后自己为各个表发出 mysqldump 命令。

如果做不到这一点，您可以尝试使用 Internet 上不同节点的 VMC 来查看连接是否更快。

# ruby - 比较ruby中的两个字符串

> ID：13824444
> 
> 赞同：45
> 
> 时间：2012-12-11T16:34:50.200
> 
> 标签：ruby

我刚刚开始学习 ruby​​，这可能很容易解决。如何在 Ruby 中比较两个字符串？

我尝试了以下方法：

```
puts var1 == var2 //false, should be true (I think)
puts var1.eql?(var2) //false, should be true (I think) 
```

当我尝试将它们回显到控制台以便可以直观地比较值时，我会这样做：

```
puts var1 //prints "test content" without quotes
puts var2 //prints ["test content"] with quotes and braces 
```

最终这些不同类型的字符串我该如何比较这两者？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-12-11T16:45:04.267

这里有一些：

```
"Ali".eql? "Ali"
=> true 
```

spaceship ( `<=>`) 方法可用于比较两个字符串的字母顺序。如果字符串相同，<=> 方法返回 0，如果左侧字符串小于右侧字符串，则返回 -1，如果大于右侧字符串，则返回 1：

```
"Apples" <=> "Apples"
=> 0

"Apples" <=> "Pears"
=> -1

"Pears" <=> "Apples"
=> 1 
```

可以使用 casecmp 方法执行不区分大小写的比较，该方法返回与上述 <=> 方法相同的值：

```
"Apples".casecmp "apples"
=> 0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T16:36:16.990

从您打印的内容来看，它似乎`var2`是一个包含一个字符串的数组。或者实际上，它似乎保存了`.inspect`在包含一个字符串的数组上运行的结果。展示您如何初始化它们会很有帮助。

```
irb(main):005:0* v1 = "test"
=> "test"
irb(main):006:0> v2 = ["test"]
=> ["test"]
irb(main):007:0> v3 = v2.inspect
=> "[\"test\"]"
irb(main):008:0> puts v1,v2,v3
test
test
["test"] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-11T16:36:28.227

`var1`是一个常规字符串，而`var2`是一个数组，这是你应该比较的方式（在这种情况下）：

```
puts var1 == var2[0] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-11T16:36:41.450

在 Ruby 中比较字符串非常简单：

```
v1 = "string1"
v2 = "string2"
puts v1 == v2 # prints false
puts "hello"=="there" # prints false
v1 = "string2"
puts v1 == v2 # prints true 
```

确保您的 var2 不是数组（看起来像）

# node.js - 在 Mongoose 中更新时如何允许空字段？

> ID：13824452
> 
> 赞同：1
> 
> 时间：2012-12-11T16:35:09.417
> 
> 标签：node.js, mongodb, mongoose

```
Venue.update({_id : venue.id},                         
    {
      name : venue.name,
      'contact.phone' : venue.contact.formattedPhone                      
    }, {upsert: true}).exec() 
```

在此代码中，如果场地没有电话，则不进行 Upsert 操作。我怎样才能避免这种情况？如果该字段不为空，我想更新该字段，但如果为空，则不要包含该字段。

编辑：

```
 Venue.update({_id : venue.id}, 
{
    name : venue.name,
    'contact.phone' : ((!venue.contact.formattedPhone)? 
                      '' : venue.contact.formattedPhone)                           
}, {upsert: true, safe:false}).exec() 
```

此代码工作正常，但这次，“电话”字段是“”。我想要的是，如果该字段未定义，则隐藏该字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:51:32.790

`update`以编程方式构建您的对象以`'contact.phone'`在未提供时不包含：

```
var update = {
    name : venue.name
};
if (venue.contact.formattedPhone) {
    update['contact.phone'] = venue.contact.formattedPhone;
}
Venue.update({_id : venue.id}, update, {upsert: true, safe:false}).exec(); 
```

# gis - 如何订购路线的状态列表

> ID：13824456
> 
> 赞同：0
> 
> 时间：2012-12-11T16:35:18.920
> 
> 标签：gis

我正在尝试按字母顺序列出我目前获得的状态列表，并按路线顺序对它们进行排序。

举个例子：一条路线从科罗拉多州开始，到华盛顿结束，我知道它经过俄勒冈州、爱达荷州、犹他州和怀俄明州（例如[http://goo.gl/maps/j6tyu](http://goo.gl/maps/j6tyu)）

按字母顺序，路线为（CO、ID、OR、UT、WA、WY），路线顺序为（CO、WY、UT、ID、OR、WA）

是否可以仅通过知道哪些州触及其他州，或者我需要哪些其他信息来计算路线顺序？是否有建议的阅读链接可以帮助我

如果有帮助的话，我实际上也有在每个州旅行的里程。（CO = 90，ID = 275，OR = 372，UT = 149，WA = 8，WY = 368）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:53:24.753

由于这是一个有趣的问题，我写了一个小的 JS 脚本只是为了好玩：http: [//jsfiddle.net/Ufbbt/](http://jsfiddle.net/Ufbbt/)

```
var from = 'CO';
var to = 'WY';
var thru = ['ID', 'OR', 'UT', 'WA'];

var globalCount = 0;

var doStuff = function(currState, states, str) {

    if (states.length == 0) {
        if (inArray(to, statesDesc[currState])) {
            console.log(str + '->' + to);
            globalCount++;
        }
        return;
    }

    for (var i = 0, len = states.length; i < len; i++) {
        if (inArray(states[i], statesDesc[currState])) {
            var newStates = states.slice(0); // clone original array
            var newCurrState = newStates.splice(i, 1)[0];
            doStuff(newCurrState, newStates, str + '->' + newCurrState);
        }
    }
}

var inArray = function(what, where) {
    for (var i = 0, len = where.length; i < len; i++) {
        if (what == where[i]) 
            return true;
    }
    return false;   
}

// Now, initial execute
doStuff(from, thru, from);
console.log(globalCount + ' route(s) found');

var statesDesc = {
    AK: ['WA'],
    AL: ['TN','GA','FL','MS'],
    AR: ['MO','TN','MS','LA','TX','OK'],
    AZ: ['UT','CO','NM','CA','NV'],
    CA: ['OR','NV','AZ','HI'],
    CO: ['WY','NE','KS','OK','NM','AZ','UT'],
    CT: ['MA','RI','NY'],
    DC: ['MD','VA'],
    DE: ['PA','NJ','MD'],
    FL: ['GA','AL'],
    GA: ['NC','SC','FL','AL','TN'],
    HI: ['CA'],
    IA: ['MN','WI','IL','MO','NE','SD'],
    ID: ['MT','WY','UT','NV','OR','WA'],
    IL: ['WI','IN','KY','MO','IA'],
    IN: ['MI','OH','KY','IL'],
    KS: ['NE','MO','OK','CO'],
    KY: ['OH','WV','VA','TN','MO','IL','IN'],
    LA: ['AR','MS','TX'],
    MA: ['NH','RI','CT','NY','VT'],
    MD: ['PA','DE','DC','VA','WV'],
    ME: ['NH'],
    MI: ['OH','IN','WI'],
    MN: ['WI','IA','SD','ND'],
    MO: ['IA','IL','KY','TN','AR','OK','KS','NE'],
    MS: ['TN','AL','LA','AR'],
    MT: ['ND','SD','WY','ID'],
    NC: ['VA','SC','GA','TN'],
    ND: ['MN','SD','MT'],
    NE: ['SD','IA','MO','KS','CO','WY'],
    NH: ['ME','MA','VT'],
    NJ: ['NY','DE','PA'],
    NM: ['CO','OK','TX','AZ','UT'],
    NV: ['ID','UT','AZ','CA','OR'],
    NY: ['VT','MA','CT','NJ','PA'],
    OH: ['PA','WV','KY','IN','MI'],
    OK: ['KS','MO','AR','TX','NM','CO'],
    OR: ['WA','ID','NV','CA'],
    PA: ['NY','NJ','DE','MD','WV','OH'],
    RI: ['MA','CT'],
    SC: ['NC','GA'],
    SD: ['ND','MN','IA','NE','WY','MT'],
    TN: ['KY','VA','NC','GA','AL','MS','AR','MO'],
    TX: ['OK','AR','LA','NM'],
    UT: ['ID','WY','CO','NM','AZ','NV'],
    VA: ['MD','DC','NC','TN','KY','WV'],
    VT: ['NH','MA','NY'],
    WA: ['AK','ID','OR'],
    WI: ['MI','IL','IA','MN'],
    WV: ['PA','MD','VA','KY','OH'],
    WY: ['MT','SD','NE','CO','UT','ID']
} 
```

# mysql - MYSQL IF 字段包含 THIS 使其他字段 THAT

> ID：13824457
> 
> 赞同：3
> 
> 时间：2012-12-11T16:35:30.237
> 
> 标签：mysql, if-statement, concatenation, case

`ITEM`我的table1 中有一个字段。如果`ITEM`包含`%USED-%`(USED-) 那么我想将其制作`TIER1` **`Used Restaurant Equipment`**成相应的分组。

`IF`这是我目前的陈述，我怎样才能用or实现上述目标`CASE`？

```
select 
    CT.TIER1, CT.TIER2
from
    trx.table1 MT
        LEFT JOIN
    trx.table2 CT1 ON MT.ITEM = CT1.ITEM
        LEFT JOIN
    trx.table3 CT ON CT1.WEB_NUM = CT.WEBNUMBER
GROUP BY CT.TIER1
LIMIT 0 , 15 
```

电流输出：

```
TIER1                   TIER2
NULL                    NULL
Business Type           Ice Cream Equipment
Chinese Food Equipment  Ricers
Concession Equipment    Concession Accessories
Cooking Equipment       Fryers
Food Preparation        Food Preparation Supplies
Food Storage            Storage Racks
Food Warming Equipment  Hot Food Wells 
```

我希望仍然有一些`NULL`Tier1 和 Tier2，但我希望它也将 TIER1 显示为“使用过的餐厅设备”，类似于以下内容：

```
TIER1                      TIER2
NULL                       NULL
Used Restaurant Equipment  NULL
Business Type              Ice Cream Equipment
Chinese Food Equipment     Ricers
Concession Equipment       Concession 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T17:13:44.477

这应该是您正在寻找的：

```
 SELECT
       IF (MT.ITEM LIKE '%USED-%', 'Used Restaurant Equipment', CT.TIER1) AS TIER1,
       CT.TIER2
   FROM
       trx.table1 MT
           LEFT JOIN
       trx.table2 CT1 ON MT.ITEM = CT1.ITEM
           LEFT JOIN
       trx.table3 CT ON CT1.WEB_NUM = CT.WEBNUMBER
   GROUP BY
       IF (MT.ITEM LIKE '%USED-%', 'Used Restaurant Equipment', CT.TIER1)
   LIMIT 0 , 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:07:36.910

如果您不尝试重新定义 tier1，而是创建一个新列，该列从 tier1 或您的常量“使用的餐厅设备”中获取其值，则这很容易实现。然后，您可以根据用于创建新列的相同条件进行分组，因为 group by 子句可以是完整的表达式。

# visual-studio-2010 - 为 mdev 更新“操作超时”下载软件包时出错

> ID：13824458
> 
> 赞同：1
> 
> 时间：2012-12-11T16:35:31.563
> 
> 标签：visual-studio-2010, timeout, updates, marmalade

在过去的几个月里，我一直在使用带有 VS2010 的 Marmalade SDK 来开发 IOS 应用程序。

昨天我尝试构建我的项目（自上次构建以来没有更改任何内容）并开始收到以下错误：

```
Executing: 'c:\marmalade\6.1\s3e\bin\mdev.bat update'
Downloading: http://source.madewithmarmalade.com/packages/6.1/Packages
error: error downloading url: http://source.madewithmarmalade.com/packages/6.1/P
ackages (<urlopen error (10060, 'Operation timed out')>)
c:/Users/Paddy/Desktop/Speedoku/Speedoku.mkb(17) : error: Executing 'c:\marmalad
e\6.1\s3e\bin\mdev.bat update' failed. (return code 1)
FAILED (error code=3) 
```

我将 Marmalade 更新到了最新版本，但问题仍然存在。我已经转到错误中的链接，可以看到文件在那里，所以似乎不是问题。

我一直在 Marmalade 论坛上寻找解决方案，但问同样问题的一两个人几乎没有反应。希望这里有人能够帮助弄清楚如何解决这个问题。

谢谢，稻田

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:25:20.050

原来它是 chrome 中的代理阻止它下载。

# mysql - 根据给定的词群自动构建来自 OCR 错误的可能词的输出列表

> ID：13824461
> 
> 赞同：3
> 
> 时间：2012-12-11T16:35:37.380
> 
> 标签：mysql, perl, ocr, fuzzy-search

我想知道在 Perl/MySQL 中是否可以根据给定的单词构建一个变体单词列表，该单词可能会发生常见的 OCR 错误（即 8 而不是 b）？换句话说，如果我有一个单词列表，并且该列表中有单词“Alphabet”，那么有没有办法扩展或构建一个新列表以包含我的原始单词以及“Alphabet”的 OCR 错误变体？所以在我的输出中，我可能对 Alphabet 有以下变体：

```
Alphabet
A1phabet
Alpha8et
A1pha8et 
```

当然，为 OCR 文本中出现的大多数（如果不是全部）常见错误编码将很有用。比如 8 代替 b，或 1 代替 l。我不想修复错误，因为在我的数据本身中我可能有 OCR 错误，但想根据我作为输入提供的单词列表创建一个单词的变体列表作为我的输出。所以在我的数据中，我可能有 Alpha8et，但如果我对 Alphabet 进行简单搜索，它不会发现这个明显的错误。

我快速而肮脏的 MySQL 方法

```
Select * from   
(SELECT Word
FROM words
union all
-- Rule 1 (8 instead of b)
SELECT 
case
    when Word regexp 'b|B' = 1 
        then replace(replace(Word, 'B','8'),'b','8')
    end as Word
FROM words
union all
-- Rule 2 (1 instead of l)
SELECT 
case
    when Word regexp 'l|L' = 1 
        then replace(replace(Word, 'L','1'),'l','1')
    end as Word
FROM words) qry
where qry.Word is not null
order by qry.Word; 
```

我认为必须有一种更自动化和更清洁的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:58:00.727

实现此目的的一种有效方法是使用[bitap 算法](https://en.wikipedia.org/wiki/Bitap)。Perl 有[re::engine::TRE](https://metacpan.org/module/re%3a%3aengine%3a%3aTRE)，一个与[libtre](http://laurikari.net/tre/about/)的绑定，它实现了正则表达式中的模糊字符串匹配：

```
use strict;
use warnings qw(all);
use re::engine::TRE max_cost => 1;

# match "Perl"
if ("A pearl is a hard object produced..." =~ /\(Perl\)/i) {
    say $1; # find "pearl"
} 
```

另外，还有一个[agrep](http://linux.die.net/man/1/agrep)工具，它允许您从命令行使用 libtre：

```
$ agrep -i -E 1 peArl *
fork.pl:#!/usr/bin/env perl
geo.pl:#!/usr/bin/env perl
leak.pl:#!/usr/local/bin/perl 
```

当您需要将多个单词与 OCR 化文本进行匹配时，有两种不同的方法。

如果足够小，您可以简单地使用整个字典构建一个正则表达式：

```
/(Arakanese|Nelumbium|additionary|archarios|corbeil|golee|layer|reinstill\)/ 
```

可以通过构建三元索引来优化大型字典查询。Perl 有一个[String::Trigram](https://metacpan.org/module/String%3a%3aTrigram)用于在内存中执行此操作。一些 RDBMS 也有 trigram 索引扩展。PostgreSQL 风格的[pg_trgm](http://www.postgresql.org/docs/current/static/pgtrgm.html)允许您编写这样的查询，即使对于非常大的字典也足够快：

```
SELECT DISTINCT street, similarity(street, word)
    FROM address_street
    JOIN (
        SELECT UNNEST(ARRAY['higienopolis','lapa','morumbi']) AS word
    ) AS t0 ON street % word; 
```

（这个在一个有~150K行的表上花了~70ms）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:15:37.510

如果您有扫描文本的示例，其中包含扫描（原始）版本和更正版本，则生成字符更正列表应该相对简单。从足够多的文本中收集这些数据，然后按频率对其进行排序。决定一个更正必须有多频繁才能成为“常见”，然后在列表中只留下常见的更正。

将列表变成以正确字母为键的地图；该值是该字母的常见错误扫描数组。使用递归函数获取一个单词并生成其所有变体。

这个例子，在 Ruby 中，展示了递归函数。收集可能的错误扫描取决于您：

```
VARIATIONS = {
  'l' => ['1'],
  'b' => ['8'],
}

def variations(word)
  return [''] if word.empty?
  first_character = word[0..0]
  remainder = word[1..-1]
  possible_first_characters =
    [first_character] | VARIATIONS.fetch(first_character, [])
  possible_remainders = variations(remainder)
  possible_first_characters.product(possible_remainders).map(&:join)
end

p variations('Alphabet')
# => ["Alphabet", "Alpha8et", "A1phabet", "A1pha8et"] 
```

原始单词包含在变体列表中。如果您*只*想要可能的错误扫描，请删除原始单词：

```
def misscans(word)
  variations(word) - [word]
end

p misscans('Alphabet') 
# => ["Alpha8et", "A1phabet", "A1pha8et"] 
```

* * *

一个快速而肮脏（且未经测试）的命令行程序版本会将上述函数与这个“主”函数结合起来：

```
input_path, output_path = ARGV
File.open(input_path, 'r') do |infile|
  File.open(output_path, 'w') do |outfile|
    while word = infile.gets
      outfile.puts misscans(word)  
    end
  end
end 
```

# p2p - 如何在防火墙后面连接两个客户端（其中一个是浏览器）

> ID：13824468
> 
> 赞同：1
> 
> 时间：2012-12-11T16:36:09.230
> 
> 标签：p2p, nat, upnp, portforwarding

我知道像 Skype 这样的 p2p 软件正在为此使用 UDP 打孔。但是，如果其中一个客户端是需要从另一个客户端（TCP 连接而不是 UDP）下载文件的 Web 浏览器怎么办？这种情况有什么技术吗？

我可以拥有一个可以与客户端结婚的中间公共服务器，但我无法承受这些客户端之间的所有流量都通过该服务器。公共服务器只能建立客户端之间的连接，就像 Skype 一样，仅此而已。这必须通过 TCP（更准确地说，HTTP）来让下载客户端成为 Web 浏览器。

不得要求两个客户端在其路由器中设置任何东西或类似的东西。

我打算用 C/C++ 编写这个代码，但我想知道这个想法是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:46:59.570

我之前写了一个关于 P2P 大致如何工作的非常综合的粗略答案，并讨论了各种协议和相应的开源库。你可以在[这里](https://stackoverflow.com/a/8524609/104458)阅读。

P2P 的可靠性最终取决于您从客户端编码角度和服务配置（即信令服务器和中继）两个方面投资多少。您可以在没有防火墙支持的情况下满足 UDP 的简单 NAT 穿越。也许再努力一点，您就会获得 TCP 连接。而且您可以“一路走来”并拥有具有 HTTPS 侦听器的中继，以供最难穿越的防火墙后面的客户端使用。

至于你关于防火墙的问题的答案。取决于防火墙的配置方式。许多防火墙只是具有安全性的美化 NAT，可将流量限制到某些端口并阻止未经请求的传入连接。其他的则非常严格，只允许通过代理进行 HTTP/HTTPS 流量。

如果无法直接连接，视频会议应用程序最终将退回到通过 PC 配置的代理服务器模拟 HTTPS 连接到远程中继服务器的端口 443（或 80）。（在某些情况下，远程客户端会尝试监听端口 80 或端口 443，以便直接连接）。

您完全正确地假设让所有客户端都通过中继将是昂贵的维护。如果您的目标是 100% 连接，无论客户端使用哪种类型的防火墙，都必须存在一些中继解决方案。如果您不支持中继解决方案，您可以投入大量资金让直接连接可靠地工作，并且只阻止一小部分客户端。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-16T23:08:58.350

[PeerConnection是](http://dev.w3.org/2011/webrtc/editor/webrtc.html#rtcpeerconnection-interface)[WebRTC](http://www.webrtc.org/)的一部分，它在现代浏览器中解决了这个问题。

在引擎盖下，它使用[ICE](http://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)，它是用于 NAT 打孔的[RFC 。](https://www.rfc-editor.org/rfc/rfc5245)

对于较旧的浏览器，可以使用 Flash 中的 P2P 支持。

# mod-rewrite - mod_rewrite old URL with query to new URL path

> ID：13824474
> 
> 赞同：1
> 
> 时间：2012-12-11T16:36:19.750
> 
> 标签：mod-rewrite

我已经更改了我的网站，为了向后兼容，我需要将一组带有查询参数的旧 URL 重写为不带参数的特定新 URL 路径。

旧 URL 的格式如下：

```
www.mysite.com/portfolio.php?pid=x 
```

'x' 是某个数字。在第一个参数之后可能会有更多参数，但我只需要匹配第一个参数。

我想将这些中的每一个映射到表单的 URL：

```
www.mysite.com/custom/item/some-item-name 
```

我对此无能为力。我试过了，例如：

```
RewriteCond %{QUERY_STRING} pid=13(.*)$ [NC]
RewriteRule ^/portfolio\.php$ /custom/item/some\-item\-name [NC,L] 
```

...但它永远不会匹配。我已经浏览了很多示例，所有示例的语法都略有不同。非常感谢知道这些东西的人的帮助！

# performance - NodeJS的对象列表或保存在Redis中的列表？

> ID：13824476
> 
> 赞同：1
> 
> 时间：2012-12-11T16:36:28.290
> 
> 标签：performance, node.js, redis

我正在开发一个带有在线用户列表的应用程序。现在我在nodejs中定义了全局变量

```
var onlineUsers = {} 
```

其中包含用户对象

```
var userObj = {
username: 'johndoe',
fullname: 'John Doe',
user_id: 234242
} 
```

在线。

我的问题是，考虑到可能有数百万在线用户的潜在场景，将在线用户对象放在 Redis 中会更好还是保持原样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:44:50.187

当您的潜在场景是数百万并发在线用户时，您将需要运行多个网络服务器来处理该负载。每个网络服务器都需要记录谁在共享数据存储中登录和注销，在你的情况下是 Redis。

性能方面，将其存储在本地内存中将是最快的，但根本不可扩展。

如果您刚开始开发此站点，那么内存中的解决方案可能是可以接受的，因此您可以专注于实现产品功能并在以后执行可扩展的 Redis 解决方案。特别是如果您只需要 Redis 来实现这个单一功能。

# php - 迭代 PHP 数组以使用 PHP foreach 创建 Javascript 数组

> ID：13824490
> 
> 赞同：0
> 
> 时间：2012-12-11T16:36:56.770
> 
> 标签：php, javascript, arrays, iteration

在迭代 PHP 数组以生成 Javascript 数组的过程中，我遇到了一个恼人的“，”。本质上，我所拥有的是：

```
<?php
  $array = array(StdObject,StdObject,StdObject);
?>

//later that page...in JavaScript

var list = [
<?php foreach($array as $value):?>
  '<?=$value->some_letter_field?>',
<?endforeach;?>
]; 
```

不幸的是，这段代码的作用是产生如下所示的输出：

```
var list = ['a','b','c',]; 
```

注意到 JavaScript 数组中多余的逗号了吗？这导致了一些问题。我将如何重新编写这个 PHP 代码片段，以便不会打印额外的逗号，从而生成格式正确的 JavaScript 数组？

预期的输出应该是：

```
var list = ['a','b','c']; 
```

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T16:38:03.043

您不需要自己执行此操作，PHP 有一个名为的函数可以满足[`json_encode`](http://www.php.net/json_encode)您的需求。如果由于某种原因您没有 PHP 5.2.0，那么该页面的评论中有很多实现可以解决这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T16:39:12.310

使用 implode() 粘合数组元素。它将注意逗号

```
//later that page..in JavaScript

var list = ['<?=implode("', '", $array)?>']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:40:06.610

您可以使用它来生成 json 数组：

```
$list = json_encode($array); 
```

然后用 Javascript 阅读它：

```
var list = <?=$list?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T16:55:42.240

这可以解决问题：

```
<?php 
$filtered = array();
foreach($array as $value) {
    $filtered[] = $value->some_letter_field;
}
echo 'var list = ' . json_encode($filtered);
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T16:43:15.187

如何将数组转换为有效的 JSON 对象？

```
var list = JSON.parse("<?php echo json_encode($array); ?>"); 
```

无论如何，你真的需要动态生成 JS 代码吗？没有其他方法可以完成您的任务吗？JS 生成通常被认为是一种 hack，在许多情况下可以轻松避免。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-11T16:58:16.993

如果您出于某种原因坚持保留当前代码，只需：

```
var list = [
<?php foreach($array as $value): ?>
  $output[] = "'".$value->some_letter_field."'";
<?php endforeach; ?>
  echo implode(',', $output);
]; 
```

# java - java.lang.RuntimeException：无法启动活动

> ID：13824506
> 
> 赞同：0
> 
> 时间：2012-12-11T16:37:54.680
> 
> 标签：java, android, android-activity

下载我的应用程序的人之一通过谷歌播放向我发送了崩溃。我发现它在崩溃和 anr 内。但我不知道它有什么问题。对我来说它总是有效，所以我不知道这里有什么问题。这是日志：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.laurenswuyts.find.it/com.laurenswuyts.find.it.MainKeyboard}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at java.util.Arrays$ArrayList.<init>(Arrays.java:38)
at java.util.Arrays.asList(Arrays.java:154)
at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:128)
at com.laurenswuyts.find.it.MainKeyboard.onCreate(MainKeyboard.java:102)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
... 11 more 
```

这是我的代码：

```
package com.laurenswuyts.find.it;

import java.util.Locale;

import com.laurenswuyts.find.it.R;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.Window;
import android.view.inputmethod.EditorInfo;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.ImageButton;
import android.widget.TextView;

public class MainKeyboard extends Activity {
public String[] taal;
String[] StringDA = Languages.StringDA;
String[] StringDE = Languages.StringDE;
String[] StringFR = Languages2.StringFR;
String[] StringNL = Languages.StringNL;
String[] StringEN = Languages.StringEN;
String[] StringPT = Languages2.StringPT;
String[] StringSV = Languages.StringSV;
String[] StringES = Languages2.StringES;
String[] StringNO = Languages2.StringNO;

public ImageButton Search;

public AutoCompleteTextView AutoCompleteTextView;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       this.requestWindowFeature(Window.FEATURE_NO_TITLE);
       setContentView(R.layout.mainkeyboard);

       Search =  (ImageButton) findViewById(R.id.imageButtonSearch);         

       final AutoCompleteTextView AutoCompleteTextView = (AutoCompleteTextView)
                findViewById(R.id.autoCompleteTextView1);
       if (Locale.getDefault().getLanguage().equals("da")) {
           taal = StringDA;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("de")) {
           taal = StringDE;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("fr")) {
           taal = StringFR;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("nl")) {
           taal = StringNL;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("no")) {
           taal = StringNO;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("pt")) {
           taal = StringPT;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("es")) {
           taal = StringES;
       } 
       else{}
       if (Locale.getDefault().getLanguage().equals("sv")) {
           taal = StringSV;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("en")) {
           taal = StringEN;
       }
       else{

       }

       Search.setOnClickListener(new View.OnClickListener() {
              public void onClick(View v) {
                  Intent intent = new Intent(MainKeyboard.this,MainActivity.class);
               intent.putExtra("thetext",AutoCompleteTextView.getText().toString());
               startActivity(intent);
              }
          });

       ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.suggest, taal);

       AutoCompleteTextView acTextView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
       acTextView.setThreshold(1);
       acTextView.setAdapter(adapter);
       acTextView.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
               Intent intent = new Intent(MainKeyboard.this,MainActivity.class);
               intent.putExtra("thetext",AutoCompleteTextView.getText().toString());
               startActivity(intent);
           }
       });
                AutoCompleteTextView.setOnEditorActionListener(new TextView.OnEditorActionListener() {
                        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                            if (actionId == EditorInfo.IME_ACTION_SEARCH) {
                                Intent intent = new Intent(MainKeyboard.this,MainActivity.class);
                                intent.putExtra("thetext",AutoCompleteTextView.getText().toString());
                                startActivity(intent);
                                return true;
                            }
                            return false;
                        }
                    });

   }

   @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.twitter:     Uri uri = Uri.parse("http://twitter.com/finditwurens");
         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
         startActivity(intent);
         break;
      case R.id.facebook:     Uri uri2 = Uri.parse("http://www.facebook.com/AppFindIt");
         Intent intent2 = new Intent(Intent.ACTION_VIEW, uri2);
         startActivity(intent2);
         break;
      case R.id.googleplus: Uri uri3 = Uri.parse("http://plus.google.com/105389501412708876212/posts");
         Intent intent3 = new Intent(Intent.ACTION_VIEW, uri3);
         startActivity(intent3);
         break;
      case R.id.addgoogle: Uri uri4 = Uri.parse("http://www.google.com/places/");
         Intent intent4 = new Intent(Intent.ACTION_VIEW, uri4);
         startActivity(intent4);    
         break;
        }
        return true;
    }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:40:49.440

看来您`String[] taal;`是`null;`（没有一个 if/else 可以满足，打印并通过记录查看您的设备使用哪种语言`Locale.getDefault().getLanguage()`，这可能会提供一些线索，为什么没有一个 if/else 满足）

由时间控制到达

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.suggest, taal); 
```

这导致`java.lang.NullPointerException`

确保`taal`不是**null**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:44:29.047

替换以下代码：

```
if (Locale.getDefault().getLanguage().equals("en")) {
    taal = StringEN;
}
else{
} 
```

有了这个：

```
if (taal == null) {
    taal = StringEN;
} 
```

如果您不支持用户特定的语言，那么英语将被设置为默认语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:45:47.040

您的条件都不成立，我建议您在 else 语句中设置默认语言：

```
if (Locale.getDefault().getLanguage().equals("da")) {
           taal = StringDA;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("de")) {
           taal = StringDE;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("fr")) {
           taal = StringFR;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("nl")) {
           taal = StringNL;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("no")) {
           taal = StringNO;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("pt")) {
           taal = StringPT;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("es")) {
           taal = StringES;
       } 
       else{}
       if (Locale.getDefault().getLanguage().equals("sv")) {
           taal = StringSV;
       }
       else{}
       if (Locale.getDefault().getLanguage().equals("en")) {
           taal = StringEN;
       }
       else{
           taal = StringEN; //or whatever default language
       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:43:19.440

问题是设备的语言与您正在考虑的语言不同。

尝试将您的变量初始化`taal`为默认语言`String []`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T16:45:40.733

**-**您**实际上从未初始化过 Array**，`public String[] taal;`

**-**其次，我会要求您使用`ArrayList<String>`而不是`Array`，因为`Collections`它比`Arrays`.

# c# - 使用 Fluent NHibernate 和 AsList() 时指定主键

> ID：13824507
> 
> 赞同：0
> 
> 时间：2012-12-11T16:38:01.340
> 
> 标签：c#, .net, nhibernate, orm, fluent-nhibernate

我有一个场景，其中一个用户实体有一个国家 ID 列表，作为 IList 保存。

```
public virtual IList<int> TradeCountries { get; protected set; } 
```

目前这被映射为

```
HasMany(x => x.TradeCountries).Element("TradeCountryId").AsList(x => x.Column("TradeCountryIndex")); 
```

结果表是这样定义的

```
create table TradeCountries (
    User_id INT not null,
   TradeCountryId INT null,
   TradeCountryIndex INT not null,
   primary key (User_id, TradeCountryIndex)
) 
```

这一切都很好 - 但是我想让 TradeCountries 上的 PK 成为 User_id，TradeCountryId。使用 AsList() 映射时，我似乎找不到这样做的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:42:36.453

Fluent NHibernate 中使用的集合的转换是这样进行的[（如此处所述）](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)：

```
// <set>
public virtual ISet<Child> Children { get; set; }    
HasMany(x => x.Children); // <set />

// <bag>
public virtual IList<Child> Children { get; set; }    
HasMany(x => x.Children); // <bag />

// <list>
public virtual IList<Child> Children { get; set; }    
HasMany(x => x.Children).AsList(...; // <list /> 
```

这些映射的本质/区别在文档[Understanding Collection performance](http://nhforge.org/doc/nh/en/index.html#performance-collections-taxonomy)和[Ayende的帖子中有详细描述`<list>`：)](http://ayende.com/blog/4043/nhibernate-mapping-list)。**提取物**：

> ...while`<set/>`是唯一元素的无序集合，a`<list/>` 是元素的集合，其中顺序很重要，并且允许重复元素...

换句话说，在使用时，您必须在**key**和**index**`<list>`列上保留 PK ，因为可能存在重复。

 ****在您的情况下，仅`<bag>`映射（没有显式`.AsList()`调用）可能足够有效，您可以删除索引列，并将 PK 移动到**键**和**元素**（User_id，TradeCountryId）。

*注意：C# IList 仍然允许有更多“相同”的元素，你应该在业务层检查它*****

# jquery - 用于建议列表的 Jquery POST

> ID：13824510
> 
> 赞同：1
> 
> 时间：2012-12-11T16:38:06.193
> 
> 标签：jquery, post

我有下一个代码，它运行良好，问题是当用户写完单词时，脚本会不断创建帖子调用并不断更改建议列表。

我想做一些事情，如果用户继续写一个单词，脚本会停止所有的 post 调用，只做最后一个。

```
$("#inputString").keydown(function() {
lookup($(this).val());
//alert('a');
});

function lookup(inputString) {
if(inputString.length == 0) {
    $('#suggestions').fadeOut(); // Hide the suggestions box
} else {
    $.post("../jsonshow.php", {q: ""+inputString+""}, function(data) { // Do an AJAX call
        $('#suggestions').fadeIn(); // Show the suggestions box
        $('#suggestions').html(data); // Fill the suggestions box
    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:52:21.300

您可以使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)设置击键之间的特定时间，以允许在帖子发生之前。[- 然后在每次击键时使用clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)清除计时器

```
var action;
$('#inputString').keydown(function(){
    clearTimeout(action);     
    var $el = $(this);   
    action = setTimeout(function(){
        lookup($el.val());
    },1000); // <-- amount of time in ms before your post will run
});​ 
```

[http://jsfiddle.net/gunuW/](http://jsfiddle.net/gunuW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:45:42.783

像这样的东西应该工作：

```
function lookup(inputString) {
   if (...
   else if (!$("#suggestions").data('blocking')) {
       $("#suggestions").data('blocking', true);
       $.post(...function (data) {
          ...
          $("#suggestions").data('blocking', false);
       });
   }
} 
```

`$("#suggestions").data('blocking')`这将仅在设置的互斥锁为 false时执行 ajax 请求；它在请求之前设置为 true，在请求完成后设置为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:47:56.860

输入后查找。请检查以下示例：[http ://www.openjs.com/scripts/events/check_after_typing.php](http://www.openjs.com/scripts/events/check_after_typing.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:43:38.150

我建议在 keydown 事件上发送 AJAX 请求，即：

```
$("#searchBox").keydown(function() {
    lookup($(this).val());
}); 
```

这只会在用户键入内容时发送 AJAX 请求。

**编辑：**
我做了一个JSFiddle，这样做我意识到它必须`keyup`代替`keydown`（使用keydown你不会得到输入然后输入的字符）。

这是小提琴：http: [//jsfiddle.net/11684/sjCTZ/1/](http://jsfiddle.net/11684/sjCTZ/1/)

# requirejs - 缩小 TypeScript 模块的最佳实践

> ID：13824511
> 
> 赞同：0
> 
> 时间：2012-12-11T16:38:10.227
> 
> 标签：requirejs, typescript

我正在为我的 TypeScript 项目使用 requirejs 和 AMD 模块，目前有大约 20 个不同的源文件，并且可能会大幅增长。所有这些都有效，但是加载所有 20 个文件非常慢，因此最好将它们缩小。但由于 requirejs 想要加载所有内容，*似乎*需要我将模块保存在单独的文件中 - 我认为我不能只获取生成的 module1.js 和 module2.js 文件并将它们缩小为一个文件，然后让 requirejs 在不更改某些代码的情况下加载这些文件。（我可能错了。）

我看到的另一种方法是使用 requirejs 提供的 r.js 文件以仍然让 requirejs 满意的方式将所有不同的文件合并在一起。但是 r.js 需要 node.js，如果有任何其他方法可以做到这一点，我宁愿不要在我的构建过程中将其作为依赖项引入。

因此，在我深入研究并尝试六种不同的解决方案之前——其他人是如何通过大型项目来解决这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:24:06.580

您可以做的是实现一个瘦 RequireJS shim 以在缩小的构建中使用。取决于你想使用多少 RequireJS API，你可以用很少的东西来解决问题。为简单起见，您还可以使用[命名模块](http://www.requirejs.org/docs/api.html#modulename)。

比如说，在开发过程中，您使用 RequireJS 来加载您的模块。当您想要进行缩小构建时，您可以简单地在缩小文件中包含一个简单的加载程序。

如果您有文件 app.js、foo.js 和 bar.js，如下所示：

```
//from app.js  
define("app", ["foo", "bar"], function(foo, bar) { 
    return {
        run: function() { alert(foo + bar); }
    }
});

//from foo.js
define("foo", [], function() { 
    return "Hello ";
});

//from bar.js
define("bar", [], function() { 
    return "World!";
}); 
```

假设您将所有这些文件一起缩小。在文件的顶部，您包含以下 shim：

```
//from your-require-shim.js
(function(exports) {

    var modules = {};

    var define  = function(name, dependencies, func) { 
        modules[name] = {
            name:name,
            dependencies:dependencies,
            func:func,
            result:undefined
        };
    };

    var require = function(name) {

        var module = modules[name];

        //if we have cached result -> return
        if(module.result) { return module.result; }

        var deps = [];
        //resolve all dependencies
        for(var i=0,len=module.dependencies.length;i<len;i++) { 
            var depName = module.dependencies[i];
            var dep = modules[depName];
            if(!dep.result) { 
                //resolve dependency
                require(depName);
            }
            deps.push(dep.result);
        }

        module.result = module.func.apply(this, deps );

        return module.result;
    };
    exports.require = require;
    exports.define = define;
}(window)); 
```

并执行 app.js 中定义的模块

```
require("app").run(); 
```

就像在[这个小提琴](http://jsfiddle.net/qXYPZ/)中一样。

当然，这是一个粗略的 PoC，但我相信你明白其中的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:21:04.257

如果您使用的是 ASP.NET MVC 4，则可以制作一个捆绑包，当您在一组文件或文件夹中部署到生产环境时，它会缩小所有内容。您可以在[此处找到有关捆绑包的](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)更多信息。

# c# - Silverlight 身份验证 Cookie 过期检测

> ID：13824521
> 
> 赞同：0
> 
> 时间：2012-12-11T16:38:52.543
> 
> 标签：c#, web-services, silverlight

我有一个 silverlight LOB 应用程序，它`FormsAuthentication`在调用服务层时需要一个有效的 cookie。如果用户闲置时间过长，该 cookie 就会过期，他们将需要重新登录。

我是否可以在全局级别（在 Silverlight 中）以可靠的方式检测/检查登录 cookie 的过期并强制注销，或者我可以从一个地方全局挂钩所有服务调用（目前有数百个调用跨数百个文件）以控制一个计时器，该计时器旨在检测在超过 cookie 过期长度的时间段内何时没有对服务器进行调用？

我也对其他想法持开放态度，我不确定还有什么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:42:15.370

前段时间我在博客上写过：

[http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html](http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:36:45.137

最终我们实现了一个简单的定时保活调用，相对于它的有效性，它在工作方面的影响似乎最小。

# java - LibGDX scene2d 舞台不显示按钮

> ID：13824523
> 
> 赞同：1
> 
> 时间：2012-12-11T16:39:03.870
> 
> 标签：java, libgdx, scene2d

我有一个场景 2d 阶段，它应该显示按钮和触摸板，但它没有。它只是显示一个黑屏。这就是我正在做的事情：

***皮肤.json***

```
{
    "com.badlogic.gdx.scenes.scene2d.ui.ImageButton$ImageButtonStyle": {
        "buttonA": { "down": "buttonA", "up": "buttonA" },
        "buttonB": { "down": "buttonB", "up": "buttonB" },
        "buttonX": { "down": "buttonX", "up": "buttonX" },
        "buttonY": { "down": "buttonY", "up": "buttonY" },
    },
    "com.badlogic.gdx.scenes.scene2d.ui.Touchpad$TouchpadStyle": {
        "touchpad": {"background": "touchpadBG", "knob": "touchpadKnob"}
    }
} 
```

***控制器.java***

```
package com.letigames.ananse.ui;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.TextureAtlas;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.scenes.scene2d.InputEvent;
import com.badlogic.gdx.scenes.scene2d.InputListener;
import com.badlogic.gdx.scenes.scene2d.Stage;
import com.badlogic.gdx.scenes.scene2d.ui.ImageButton;
import com.badlogic.gdx.scenes.scene2d.ui.ImageButton.ImageButtonStyle;
import com.badlogic.gdx.scenes.scene2d.ui.Skin;
import com.badlogic.gdx.scenes.scene2d.ui.Touchpad;
import com.badlogic.gdx.scenes.scene2d.ui.Touchpad.TouchpadStyle;
import com.letigames.ananse.entity.Player;
import com.letigames.ananse.entity.util.Position;
import com.letigames.ananse.entity.util.Size;
import com.letigames.ananse.entity.util.TouchpadDirectional;
import com.letigames.ananse.weaponsSystem.util.Direction;

public class Controller {

    public Controller(Stage stage, Player player,Size size){
        this.stage = stage;
        this.playerDirectional = new TouchpadDirectional(false, false, false, false);
        this.screenSize = size;
        this.MapButtons();
        this.GenerateAtlas();
        this.StyleButtons();
        this.PlaceButtons();
        this.AddButtonsToStage();
        this.AssignActions(player);
        System.out.println("* controller setup *");
    }

    private void MapButtons(){
        this.buttonBStagePosition = new Position(this.screenSize.GetWidth() - (Controller.separator + (Controller.separator/4)), 
                this.screenSize.GetHeight() - (this.screenSize.GetHeight() - (Controller.separator/4))); 
        this.buttonYStagePosition = new Position(this.screenSize.GetWidth() - ((Controller.separator/4) + Controller.separator), 
                this.screenSize.GetHeight() - (this.screenSize.GetHeight() - ((Controller.separator/4) + Controller.separator + (Controller.separator/2)))); 
        this.buttonAStagePosition = new Position(this.screenSize.GetWidth() - (((Controller.separator  * 2)+ (Controller.separator/4)  + (Controller.separator/2))), 
                this.screenSize.GetHeight() - (this.screenSize.GetHeight() - (Controller.separator/4))); 
        this.buttonXStagePosition = new Position(this.screenSize.GetWidth() - (((Controller.separator  * 2)+ (Controller.separator/4)  + (Controller.separator/2))), 
                this.screenSize.GetHeight() - (this.screenSize.GetHeight() - ((Controller.separator/4) + Controller.separator + (Controller.separator/2)))); 
        this.touchpadStagePosition = new Position((Controller.separator/4), (Controller.separator/4));

        this.buttonXRegionPosition = new Position(90, 100);
        this.buttonYRegionPosition = new Position(90, 100);
        this.buttonARegionPosition= new Position(90, 100); 
        this.buttonBRegionPosition = new Position(90, 100);
        this.touchpadRegionPosition = new Position(90, 50);

        System.out.println("* mapped buttons to their positions *");
    }

    private void GenerateAtlas(){
        this.controllerAtlas = new TextureAtlas();
        this.controllerTexture = new Texture(Gdx.files.internal("data/fishes.jpeg"));
        this.controllerAtlas.addRegion("buttonA", new TextureRegion(this.controllerTexture, this.buttonARegionPosition.GetX(), 
                this.buttonARegionPosition.GetY(), Controller.size.GetWidth(), Controller.size.GetHeight()));
        this.controllerAtlas.addRegion("buttonB", new TextureRegion(this.controllerTexture, this.buttonBRegionPosition.GetX(), 
                this.buttonBRegionPosition.GetY(), Controller.size.GetWidth(), Controller.size.GetHeight()));
        this.controllerAtlas.addRegion("buttonX", new TextureRegion(this.controllerTexture, this.buttonXRegionPosition.GetX(), 
                this.buttonXRegionPosition.GetY(), Controller.size.GetWidth(), Controller.size.GetHeight()));
        this.controllerAtlas.addRegion("buttonY", new TextureRegion(this.controllerTexture, this.buttonYRegionPosition.GetX(), 
                this.buttonYRegionPosition.GetY(), Controller.size.GetWidth(), Controller.size.GetHeight()));
        this.controllerAtlas.addRegion("touchpadBG", new TextureRegion(this.controllerTexture, this.touchpadRegionPosition.GetX(), 
                this.touchpadRegionPosition.GetY(), (Controller.size.GetWidth() * 2), (Controller.size.GetHeight() * 2)));
        this.controllerAtlas.addRegion("touchpadKnob", new TextureRegion(this.controllerTexture, this.touchpadRegionPosition.GetX(), 
                this.touchpadRegionPosition.GetY(), (Controller.size.GetWidth()/2), (Controller.size.GetHeight()/2)));

        System.out.println("* generated texture atlas*");
    }

    private void StyleButtons(){
        this.skin = new Skin(Gdx.files.internal("data/skins.json"), this.controllerAtlas);
        ImageButtonStyle buttonAStyle = this.skin.get("buttonA", ImageButtonStyle.class);
        ImageButtonStyle buttonBStyle = this.skin.get("buttonB", ImageButtonStyle.class);
        ImageButtonStyle buttonXStyle = this.skin.get("buttonX", ImageButtonStyle.class);
        ImageButtonStyle buttonYStyle = this.skin.get("buttonY", ImageButtonStyle.class);
        this.buttonA = new ImageButton(buttonAStyle);
        this.buttonB = new ImageButton(buttonBStyle);
        this.buttonX = new ImageButton(buttonXStyle);
        this.buttonY = new ImageButton(buttonYStyle);
        TouchpadStyle touchpadStyle = this.skin.get("touchpad", TouchpadStyle.class);
        this.touchPad = new Touchpad(10f, touchpadStyle);
        System.out.println("* styled buttons *");
    }

    private void PlaceButtons(){
        this.buttonA.setX(this.buttonAStagePosition.GetX());
        this.buttonB.setX(this.buttonBStagePosition.GetX());
        this.buttonX.setX(this.buttonXStagePosition.GetX());
        this.buttonY.setX(this.buttonYStagePosition.GetX());
        this.touchPad.setX(this.touchpadStagePosition.GetX());
        this.buttonA.setY(this.buttonAStagePosition.GetY()); 
        this.buttonB.setY(this.buttonBStagePosition.GetY());
        this.buttonX.setY(this.buttonXStagePosition.GetY());
        this.buttonY.setY(this.buttonYStagePosition.GetY());
        this.touchPad.setY(this.touchpadStagePosition.GetY());

        System.out.println("* placed buttons on the stage *");
    }

    private void AddButtonsToStage(){
        this.stage.addActor(this.buttonA);
        this.stage.addActor(this.buttonB);
        this.stage.addActor(this.buttonX);
        this.stage.addActor(this.buttonY);
        this.stage.addActor(this.touchPad);
        System.out.println("* added buttons to the stage *");
    }

    private void AssignActions(final Player player){
        this.buttonA.addListener(new InputListener(){
            public boolean touchDown(InputEvent event, float x, float y, int pointer, int button) { return true;}});

        this.buttonB.addListener(new InputListener(){
            public boolean touchDown(InputEvent event, float x, float y, int pointer, int button) { return true; }});

        this.buttonX.addListener(new InputListener(){
            public boolean touchDown(InputEvent event, float x, float y, int pointer, int button) { return true; }});

        this.buttonY.addListener(new InputListener(){
            public boolean touchDown(InputEvent event, float x, float y, int pointer, int button) { return true; }});
        System.out.println("* assigned actions *");
    }

    public void DetermineDirection(){
        if(this.touchPad.isTouched()){
            boolean moveLeft = false;
            boolean moveRight = false;
            boolean moveUp = false;
            boolean moveDown = false;
            float xPercent = this.touchPad.getKnobPercentX();
            float yPercent = this.touchPad.getKnobPercentY();
            if((xPercent > 0) && (yPercent > 0) && (xPercent > yPercent)){ moveRight = true; }
            if((xPercent > 0) && (yPercent < 0) && (xPercent > Math.abs(yPercent))){ moveRight = true; }

            if((yPercent > 0) && (xPercent > 0) && (yPercent > xPercent)){ moveUp = true; }
            if((yPercent > 0) && (xPercent < 0) && (yPercent > Math.abs(xPercent))){ moveUp = true; }

            if((xPercent < 0) && (yPercent > 0) && (Math.abs(xPercent) > yPercent)){ moveLeft = true; }
            if((xPercent < 0) && (yPercent < 0) && (Math.abs(xPercent) > Math.abs(yPercent))){ moveLeft = true; }

            if((yPercent < 0) && (xPercent > 0) && (Math.abs(yPercent) > xPercent)){ moveDown = true; }
            if((yPercent < 0) && (xPercent < 0) && (Math.abs(yPercent) > Math.abs(xPercent))){ moveDown = true; }

            this.playerDirectional.SetDirections(moveLeft, moveRight, moveUp, moveDown);
        }
        else{ this.playerDirectional.SetDirections(Controller.defaultDirectional.moveLeft, Controller.defaultDirectional.moveRight, 
                Controller.defaultDirectional.moveUp, Controller.defaultDirectional.moveDown); }
    }

    public void UpdateMove(Player player){
        /* D-Pad */
        //System.out.println("move left ->" + this.playerDirectional.moveLeft);
        //System.out.println("move right ->" + this.playerDirectional.moveRight);
        //System.out.println("move up ->" + this.playerDirectional.moveUp);
        //System.out.println("move down ->" + this.playerDirectional.moveDown);
        if(this.playerDirectional.moveLeft){
            if(player.GetCanWalk()) { 
                if(!player.GetJumped()){  player.Walk(Direction.LEFT); }
                if(player.GetJumped() && player.GetWebStringReady()){ player.MoveInAir(Direction.LEFT); }
                player.SetIsFacingLeft(true);
            }
            if(!player.GetWebStringReady() && player.GetJumped()){ player.Swing(Direction.LEFT); player.SetIsFacingLeft(true); }
        }
        if(this.playerDirectional.moveRight){
            if(player.GetCanWalk()) { 
                if(!player.GetJumped()) { player.Walk(Direction.RIGHT); }
                if(player.GetJumped() && player.GetWebStringReady()){ player.MoveInAir(Direction.RIGHT); }
                player.SetIsFacingLeft(false);
            }
            if(!player.GetWebStringReady() && player.GetJumped()){ player.Swing(Direction.RIGHT); player.SetIsFacingLeft(false); }
        }
        if(this.playerDirectional.moveUp){
            if(player.GetStickToWallState()){ 
                player.GetBody().applyLinearImpulse(player.GetCrawlImpulse(), 
                player.GetBody().getWorldCenter()); 
                player.SetIsFacingDown(false); 
            }
            if(this.buttonA.isPressed() && player.GetWebStringReady() && (!player.GetCanJump())){ player.TryAttachString(true); }
            if(!player.GetWebStringReady()){ player.UpdateAttachedString(true); }
        }
        if(this.playerDirectional.moveDown){
            if(player.GetStickToWallState()){
                player.GetBody().applyLinearImpulse(player.GetCrawlImpulse().cpy().mul(-1), player.GetBody().getWorldCenter()); 
                player.SetIsFacingDown(true); 
            }
            if(!player.GetWebStringReady()){ player.UpdateAttachedString(false); }
        } 

        /* four  buttons */
        if(this.buttonB.isPressed()){
            if(this.playerDirectional.moveLeft || this.playerDirectional.moveRight){  
                if(this.playerDirectional.moveLeft){ player.Throw(Direction.LEFT); }
                else if(this.playerDirectional.moveLeft){ player.Throw(Direction.RIGHT); }
            }
            else { player.Throw(Direction.NONE); }
         }
         if(this.buttonA.isPressed()){
             if(player.GetCanJump()){ 
                 player.Jump();
                 player.SetCanJump(false);
             }
         }
         if(this.buttonX.isPressed()){
             if(!player.GetWebStringReady()){ player.TryDetachString(true); }
             if(player.GetStickToWallState()){ player.DetachFromWall(); }
         }
         if(this.buttonY.isPressed()){  player.Punch(); }
    }

    private Touchpad touchPad;
    public ImageButton buttonA;
    public ImageButton buttonB;
    public ImageButton buttonX;
    public ImageButton buttonY;
    public ImageButton dPadLeft;
    public ImageButton dPadRight;
    public ImageButton dPadUp;
    public ImageButton dPadDown;
    private TextureAtlas controllerAtlas;
    private Texture controllerTexture;
    private Skin skin;
    private Size screenSize;
    private Stage stage;

    private Position buttonARegionPosition;
    private Position buttonBRegionPosition;
    private Position buttonXRegionPosition;
    private Position buttonYRegionPosition;
    private Position touchpadRegionPosition;
    private Position touchpadStagePosition;
    private Position buttonAStagePosition; 
    private Position buttonBStagePosition;
    private Position buttonXStagePosition; 
    private Position buttonYStagePosition;
    public TouchpadDirectional playerDirectional;
    private static final int separator = 100;
    private static final TouchpadDirectional defaultDirectional = new TouchpadDirectional(false, false, false, false);
    private static final Size size = new Size(100, 100); /* set the default size here for all the buttons */
} 
```

***应用监听类***

```
package com.letigames.ananse;

import com.badlogic.gdx.ApplicationListener;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.Box2DDebugRenderer;
import com.badlogic.gdx.physics.box2d.World;
import com.badlogic.gdx.scenes.scene2d.Stage;
import com.letigames.ananse.entity.util.Size;
import com.letigames.ananse.ui.Controller;

public class Ananse implements ApplicationListener {
    @Override
    public void create() {      
        this.screenWidth = Gdx.graphics.getWidth();
        this.screenHeight = Gdx.graphics.getHeight();   
        this.doSleep = true;
        this.gravity = new Vector2(0f, -10f);
        this.UIStage = new Stage();
        //Gdx.input.setInputProcessor(this.UIStage);
        this.world = new World(this.gravity, this.doSleep);
        this.camera = new OrthographicCamera(this.screenWidth, this.screenHeight);
        this.debugRenderer = new Box2DDebugRenderer();
        this.level = new Level(this.world);
        this.controller = new Controller(this.UIStage, this.level.GetPlayer(), new Size((int)this.screenWidth, (int)this.screenHeight));
        this.world.setContactListener(level.GetEntityContactListener());

        //batch = new SpriteBatch();
        //texture = new Texture(Gdx.files.internal("data/libgdx.png"));
        //texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);
        //TextureRegion region = new TextureRegion(texture, 0, 0, 512, 275);
        //sprite = new Sprite(region);
        //sprite.setSize(0.9f, 0.9f * sprite.getHeight() / sprite.getWidth());
        //sprite.setOrigin(sprite.getWidth()/2, sprite.getHeight()/2);
        //sprite.setPosition(-sprite.getWidth()/2, -sprite.getHeight()/2);
    }

    @Override
    public void dispose() {
        level.DestroyLevel(false);
        this.UIStage.dispose();

        //batch.dispose();
        //texture.dispose();
    }

    @Override
    public void render() {      
        Gdx.gl.glClearColor(1, 1, 1, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        debugRenderer.render(world, camera.combined);

        //batch.setProjectionMatrix(camera.combined);
        //batch.begin();
        //sprite.draw(batch);
        //batch.end();

        level.UpdateLevel();
        world.step(1/20f, 6, 2);
        this.controller.DetermineDirection();
        this.controller.UpdateMove(this.level.player);
        this.camera.position.set(level.GetPlayer().GetBody().getWorldCenter().x, level.GetPlayer().GetBody().getWorldCenter().y, 0);
        this.camera.zoom = 0.1f;
        this.camera.update();
        this.UIStage.act(Gdx.graphics.getDeltaTime());
        this.UIStage.draw();
    }

    @Override
    public void resize(int width, int height) { this.UIStage.setViewport(width, height, true); }

    @Override
    public void pause() {
    }

    @Override
    public void resume() {
    }

    private OrthographicCamera camera;
    private World world;
    private Stage UIStage;
    private Controller controller;
    private Vector2 gravity;
    private boolean doSleep;
    private float screenWidth; 
    private float screenHeight;
    Box2DDebugRenderer debugRenderer;
    //private SpriteBatch batch;
    //private Texture texture;
    //private Sprite sprite;
    private Level level;
} 
```

我正在使用 LibGDX v 0.9.7。这段代码几天前工作得很好，由于某种原因它不再工作并且不会生成错误消息。代码中引用的文件都存在：在 LibGDX 资产文件夹中的数据文件夹中。想法？

# iphone - 使用构建框架中的 dispatch_async

> ID：13824530
> 
> 赞同：1
> 
> 时间：2012-12-11T16:39:21.373
> 
> 标签：iphone, ios, multithreading, queue, dispatch-async

我面临着一个奇怪的问题`dispatch_async`

我有两个独立的项目：一个用于构建框架，另一个用于将框架用于某些目的。

我正在尝试执行非常简单的代码（甚至没有任何额外的代码）：

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    dispatch_async(dispatch_get_main_queue(), ^{

    });
}); 
```

所以如果我把它`dispatch_async`放到我的项目中，它就完美了，
但是如果把它放到我的框架项目的某个方法中并构建它
，然后从使用该框架的项目中调用该方法，那么我在堆栈的第一行
收到`EXC_BAD_ACCESS`错误`dispatch_async``objc_retainAutoreleasedReturnValue`

虽然这`dispatch_async`仅适用于`dispatch_get_main_queue()`队列

我尝试创建具有不同优先级的不同队列，我尝试了静态队列，
它们实际上是创建的，但`dispatch_async`每次都崩溃

我相信这是与我的框架项目中构建设置中的一些标志相关的问题，
但不幸的是我找不到任何可以帮助的东西

更新：
我忘了说，这完全适用于模拟器，但不适用于设备

这是我的代码示例：

```
[[SingleTonOfFramework sharedInstance] executeRequest:@"SomeRequest"
                                              success:^(id response) {
                                                  NSLog(@"works");
                                              }]; 
```

SingleTonOfFramework - 是我框架中的一个类，
它的作用是：

```
- (void) executeRequest:(id) request success:(void (^)(id response))success {

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        dispatch_async(dispatch_get_main_queue(), ^{

            success(@"COOL!");

        });

    });
} 
```

# jquery-ui - _setOption 的 _super 用法似乎与文档不一致？

> ID：13824532
> 
> 赞同：0
> 
> 时间：2012-12-11T16:39:28.770
> 
> 标签：jquery-ui, jquery-ui-widget-factory

我相信我在`_super`jQuery UI 1.9.x 的新方法中发现了一个错误，但在我报告它之前想先由你们运行它。我认为这将是一个轻松的投票给那里的人。

这是我要提交的票。它详细说明了该错误：

> 根据文档， _super() 没有参数。但是，当在 _setOption() 中使用时，这不能按预期工作：http: [//jsfiddle.net/grinn/8jKk8/1/](http://jsfiddle.net/grinn/8jKk8/1/)
> 
> [正如您通过单击更改文本按钮所看到的那样，根据http://api.jqueryui.com/jQuery.widget/#method-_super](http://api.jqueryui.com/jQuery.widget/#method-_super)上的文档，即使正确调用了 _super，文本选项的值也不会更新
> 
> 但是，如果您将键和值传递给 _super，它确实可以正常工作：http: [//jsfiddle.net/grinn/8jKk8/2/](http://jsfiddle.net/grinn/8jKk8/2/)
> 
> 通过查看 jQuery UI 代码本身中 _super 的使用，我发现了这个变通方法。
> 
> 我将此作为错误而不是文档问题提交，因为它似乎 _super 预计将按照文档所述工作。
> 
> 在 Firefox 17、Chrome 23 和 IE 9 中测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:06:29.253

我决定不报告这个问题。从他们在下面描述的 jQuery UI 内部使用它的事实来看，我认为文档有点模糊。对于那些遇到同样问题的人，使用 _super 的正确方法似乎是通过您的参数，例如：

```
 _setOption: function (key, value) {
        // Your code goes here...
        this._super(key, value);
    } 
```

...或更笼统地说：

```
 _setOption: function (key, value) {
        // Your code goes here...
        this._superApply(arguments);
    } 
```

# vba - 等待表单在 MS Access VBA 中完成更新

> ID：13824533
> 
> 赞同：3
> 
> 时间：2012-12-11T16:39:32.913
> 
> 标签：vba, ms-access

我正在开发一个 Access 应用程序，在该应用程序中运行一个将一堆文本文件导入 Access 的进程，并且我想为此进程显示一个进度表。

我已经构建了一个简单的进度条：我有一个包含五个矩形和一个文本框的表单。当五分之一的文本文件完成导入时，文本框会显示“导入的文件的百分之二十”，并且其中一个矩形变得可见。当第二个五分之一完成时，它会再次更新，依此类推。

我遇到的问题是表单仅在 60% 和 100% 时更新。其他增量的代码有效，但表单未更新。我怀疑当我运行 VBA 语句时

```
Forms("ImportingData")!Box1.Visible = True 
```

该脚本实际上不会暂停，直到该框在屏幕上可见，然后继续运行。它只是在内部更改属性或其他内容。我试图通过让它暂停 1 秒来解决这个问题

```
Public Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Sub UpdateStatusForm(fifth As Integer)

    If fifth = 1 Then
        Forms("ImportingData")!PctComp.Caption = "20 percent of txt files imported"
        Forms("ImportingData")!Box1.Visible = True
    ElseIf fifth = 2 Then ...
    Sleep(1000)
End Sub 
```

但它没有奏效。还有其他建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:45:38.823

看看 DoEvents。如果您想在进程运行时更新 GUI，这是一个不错的选择

# c# - Linq To Twitter 错误 - “远程服务器返回错误：(400) 错误请求”

> ID：13824535
> 
> 赞同：1
> 
> 时间：2012-12-11T16:39:41.897
> 
> 标签：c#, asp.net, linq, twitter, linq-to-twitter

我只是想简单地获取 Twitter 帐户的 3 条最新推文：

```
List<string> tweets = new List<string>();
var twitterCtx = new TwitterContext();

statusTweets =
    tweet in twitterCtx.Status
    where tweet.Type == StatusType.User &&
        tweet.Count == 3 &&
        tweet.ID == "shanselman"
    select tweet;

foreach (var statusTweet in statusTweets)
{
    tweets.Add(statusTweet.Text);
} 
```

但是当我到达`foreach`循环线时出现此错误：

> 远程服务器返回错误：(400) 错误请求。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Net.WebException：远程服务器返回错误：（400）错误请求。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:19:56.697

LINQ to Twitter 支持 Twitter API v1.1，它要求对每个请求进行 OAuth 身份验证。我知道错误消息 400 Bad Request 有点令人困惑，因为 401 Unauthorized 让您知道您遇到了授权问题。也许 400 是因为如果您根本不尝试进行身份验证，则请求没有正确构建。无论如何，我确定您的问题是您需要使用 OAuth 完成授权过程。我在 LINQ to Twitter[保护您的应用程序](http://linqtotwitter.codeplex.com/wikipage?title=Securing%20Your%20Applications&referringTitle=Documentation)页面上写了一些 OAuth 文档。

可下载的源代码有示例，并且网站上有一个[示例页面](http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20Samples&referringTitle=Home)。

开始使用 OAuth 后，您可能会遇到一些 401 Unauthorized 错误，并希望查看[LINQ to Twitter FAQ](http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation)。

乔

# amazon-s3 - 如果头像 URL 有空格，则更新用户模型时出现错误 URI（不是 URI？）

> ID：13824546
> 
> 赞同：1
> 
> 时间：2012-12-11T16:40:14.223
> 
> 标签：amazon-s3, ruby-on-rails-3.2, carrierwave, image-uploading

我正在使用carrierwave将图像上传到s3作为用户的头像，图像已正确上传，但是当我尝试更新用户模型时，如果上传的图像的url有空格，则会出现错误：

```
URI::InvalidURIError
bad URI(is not URI?): https://files.s3.amazonaws.com/avatar/110/111134a0-25d6-0130-f023-60eb69762222/photo copy.jpg 
```

解决这个问题的更好方法是什么？我正在使用carrierwave、fog、carrierwave_direct 和rmagick 来上传图片。

[更新：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：： :::::]

阅读此“ [carrierwave 无法加载某些 url](https://github.com/jnicklas/carrierwave/issues/764) ”后，我添加了`AvatarUploader < CarrierWave::Uploader::Base`：

```
def process_uri(uri) 
  URI.parse(URI.escape(URI.unescape(uri))) 
end 
```

但是没有用，似乎这种方法是正确的，但是一直在数据库中保存带有空格而不是“％20”的url图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:40:14.317

在验证 URL 之前，使用 URI.escape 清理 URL。

```
1.9.3p327 > URI.escape "https://files.s3.amazonaws.com/avatar/110/111134a0-25d6-0130-f023-60eb69762222/photo copy.jpg"
 => "https://files.s3.amazonaws.com/avatar/110/111134a0-25d6-0130-f023-60eb69762222/photo%20copy.jpg" 
```

# c++ - 共享引用计数的相关智能指针

> ID：13824547
> 
> 赞同：3
> 
> 时间：2012-12-11T16:40:14.797
> 
> 标签：c++, smart-pointers

我有一段 C++`Qt`代码接收网络消息并将其解码为由智能指针管理的 Google protobuf。该函数对 protobuf 进行一些最小的结构解析，以查看是否存在可选消息字段，如果存在某些消息片段，则调度信号。

目前，这些信号包含包含整个消息的智能指针的副本，利用引用计数。但是，我想将智能指针分派到消息的特定部分，以便下游处理程序不需要重新解析整个 protobuf。我不能简单地创建一个指向相关消息部分的新智能指针，因为当新指针超出范围时，它将尝试释放该部分。

试图说明这一点，省略一些安全检查：

```
void Interface::processProtobuf(QByteArray const & networkData) {

    QSharedPointer<proto_message> msg(new proto_message);

    msg->ParseFromArray(networkData.data(), networkData.length());

    if (msg->has_configuration()) {

        // This will eventually attempt to free, thus causing corruption
        // of msg.
        QSharedPointer<config_message> cfg(msg->mutable_configuration());
        emit configurationChanged(cfg);

        // I resorted to this, which forces the receiver to re-parse
        // the data structure (which might be expensive for a deeply-nested
        // message) to get the desired 'configuration' pointer.
        emit configurationChanged(msg);
    }
} 
```

这样做，我真的需要一种方法来创建一个“相关”子指针，该子指针继承（并增加）父指针上的引用计数，以便在所有子和父都用完之前不会调用数据析构函数范围。此功能在标准智能指针实现之一中可用，还是我创建了不必要的特殊情况？我发现最接近的是`Qt`'s `QSharedDataPointer<>`，但我认为它在创建子指针的情况下没有帮助。

`Qt`解决方案不是必需的。这更像是一个学术问题，因为我的解决方法适用于我目前的情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:45:39.350

`std::shared_ptr`（或者`boost::shared_ptr`如果你没有 C++11）有一个构造函数，它接受一个共享指针`r`和一个指针`p`。构造的共享指针将指向`*p`，但与*共享所有权*`r`。这应该是你需要的。

构造函数的签名是

```
template<class Y> shared_ptr(const shared_ptr<Y>& r, T *p) noexcept; 
```

# android - 如何在用户开始输入搜索之前显示建议下拉列表？

> ID：13824552
> 
> 赞同：4
> 
> 时间：2012-12-11T16:40:23.723
> 
> 标签：android

我创建了一个可以正常工作的内容提供程序和搜索配置。当用户键入时，它会查询我的 sqlite 数据库并完全按照我的预期显示建议。

到目前为止，一切都很好。

我的问题/问题是我希望系统在进入搜索模式后立即调用内容提供者上的 query() 函数，而不是等待用户开始输入。这是因为我想在进入搜索模式后立即显示自定义建议列表（就像 Google Play 应用程序一样）。

我正在使用 Action Bar Sherlock 并注意到 query() 函数完全按照我的意愿在 ICS 之前的设备上调用，但在 ICS+ 设备上没有调用。

有什么猜测或建议吗？

谢谢！

# angularjs - AngularJS 中可观察对象的刷新

> ID：13824564
> 
> 赞同：1
> 
> 时间：2012-12-11T16:40:56.680
> 
> 标签：angularjs

我正在使用 AngularJS，但找不到解决此问题的方法：

我的控制器有一部分：

```
$scope.$on('showMoreNotifications', function (event) {
    $.ajax({
        url: '/notifications',
        data: {
            notificationCount: 30
        },
        success: function (e) {
            $scope.notifications = e.Messages;
        }
    });
}); 
```

这是使用此控制器的html：

```
<div class="widget" id="widget-notifications" ng-controller="NotificationsCtrl">
    <span class="title" ng-click="$parent.$broadcast('showMoreNotifications')">@*showMoreNotifications()*@
        Notifikace
    </span>
    <div class="messages">
        <div ng-repeat="item in notifications" class="message-item type-{{item.Entity}}" data-id="{{item.AuditLogId}}">
            <span class="type"></span>
            <div class="description">
                <span class="date">{{item.Date}}</span> / {{item.Message}}
            </div>
        </div>
    </div>
</div> 
```

如果我单击顶部的 span 类标题，控制器将正确调用服务器并接收 JSON 数据。不幸的是，不要刷新与之关联的 html。当我第二次单击时，html 会从第一个请求中刷新数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:06:17.547

您的**模板没有更新，因为您正在使用 jQuery 进行 xhr 调用**。这些调用被认为是“AngularJS 之外”的世界，因此 AngularJS 不知道它们，也不知道它应该启动它的自动刷新周期。

**[使用来自 AngularJS 的优秀$http 服务](http://docs.angularjs.org/api/ng.$http)**来进行xhr调用**会更好。**你会写这样的东西：

```
$http('/notifications', {params : {
            notificationCount: 30
        }}).success(function (e) {
            $scope.notifications = e.Messages;
        }); 
```

有一个类似的问题，答案有助于从 jQuery 的 $.ajax 迁移到 AngularJS $http：[https ://stackoverflow.com/a/12131912/1418796](https://stackoverflow.com/a/12131912/1418796)

接下来，一些不直接相关的东西，但你真的不必广播事件来对事件做出反应`click`。写下就足够了：

```
<span class="title" ng-click="myClickHandler()">
@*showMoreNotifications()*@
        Notifikace
</span> 
```

然后在你的控制器中：

```
$scope.myClickHandler = function(){
  //call $http here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:59:06.663

现在我解决了我的问题......它需要适用于范围

像这样：

```
$.ajax({
    url: Escudo.UrlHelper.baseUrl + 'Widgets/Notifications/GetLastNotifications',
    data: {
        notificationCount: 30
    },
    success: function (e) {
        $scope.$apply(function () {
            $scope.notifications = e.Messages;
        });
    }
}); 
```

# list - 关于 Prolog 统一的愚蠢细节查询

> ID：13824568
> 
> 赞同：1
> 
> 时间：2012-12-11T16:41:15.103
> 
> 标签：list, prolog, unification, cons

在 Prolog 中：

```
?-P=[A|B], P=[1,_].
P = [1, _G1091],
A = 1,
B = [_G1091] 
```

B 显示为 [_G1091] 表明它是一个未实例化的变量。但是，如果我稍微改变...

```
?-P=[A|B], P=[1|_].
P = [1,B],
A = 1, 
```

突然之间，它对向我展示 B 未实例化但仍然是一个准备好与任何东西统一的变量不感兴趣.. 怎么会？（有时我喜欢关注奇怪的细节：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:46:10.847

在第一种情况下：

```
?-P=[A|B], P=[1,_]. 
```

您说的`P`是一个包含两个元素的列表，第一个元素是数字 1（统一到变量 A）。因此，`B`必须是一个包含一个元素的列表（一个未命名的变量）。

另一方面，在第二种情况下：

```
?-P=[A|B], P=[1|_]. 
```

您说的`P`是一个至少包含一个元素的列表（1 再次统一到`A`），但您没有说明其他任何内容。`B`可以是空列表，也可以是包含任意数量元素的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:53:27.467

Prolog 语法的精确细节有时非常微妙。要习惯它，请使用`write_canonical/1`它以功能表示法向您显示该术语：

```
?- write_canonical([A|B]).
'.'(_1,_2)
true.

?- write_canonical([1,_]).
'.'(1,'.'(_1,[]))
true. 
```

我可以推荐一个“练习”练习来习惯 Prolog 的列表符号：

拿一些类似的清单`[[1,2],3]`，现在试着用你能想象到的尽可能多的变体写下来。

```
?- [[1,2],3] == [[1,2],3|[]].
true. 
```

等等

在许多 Prologs 中，顶层允许您获取最后一个输入（通常：光标向上），以便您可以快速重新编辑右侧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:49:42.350

如果您查看每个查询的第二部分，则第一部分相当于

P=.(1,.(_,[]))

而第二个相当于

P=.(1,_)

首先，B 绑定到 .(_,[]); 即包含未实例化变量的列表

在第二种情况下，B 绑定到一个未实例化的变量

当一个变量只是绑定到一个未实例化的变量时，显示它是没有意义的；在第一个示例中，它绑定到具有一些额外结构的东西，所以展示它是有道理的。

# django - MongoEngine _types 和 _cls 字段

> ID：13824569
> 
> 赞同：7
> 
> 时间：2012-12-11T16:41:17.290
> 
> 标签：django, mongoengine

为什么 mongoengine为集合的每个文档添加**_types**和**_cls字段。**
它们都是（键，值）对，并且都包含文档模型类的名称。唯一的区别是**_types**值是一个列表，如果涉及一些继承，我假设它可以有多个模型类名称。

但是问题是：当所有文档的两个字段都具有相同的值时，为什么我需要它们存在于集合中的每个文档中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T10:31:21.303

Mongoengine 允许文档继承。在定义一个类时，使用元属性`allow_inheritance`来允许对这个特定类进行子类化。和字段用于标识对象属于哪个类 `_cls`。`_types`

考虑一个名为`User`用于存储用户信息的文档：

```
class User(Document):
    meta = {'allow_inheritance': True}
    # stores information regarding a user 
```

现在考虑一个名为 的文档`StackOverFlowUser`：该文档继承自该`User`文档，并为用户保存了一些 StackOverflow 相关信息：

```
class StackOverFlowUser(User):
    # stores StackOverflow information of a user 
```

对于这两个文档类，mongoengine 将使用同一个名为`user`. 无论您创建哪个文档对象，它都将作为文档存储在此集合中。

为了区分对象属于哪个类，`_cls`将`_types`使用字段。

对于一个`User`对象：

```
{
    ...
    '_cls' = 'User',
    '_types' = ['User', 'User.StackOverFlowUser']
} 
```

对于一个`StackOverFlowUser`对象：

```
{
    ...
    '_cls' = 'User.StackOverFlowUser',
    '_types' = ['User', 'User.StackOverFlowUser']
} 
```

如果您确定一个文档不会有子类文档，那么设置`allow_inheritance`为`False`mongoengine 将不会保存该文档`_cls`的`_types`字段。

# c# - 非泛型类上的 C# 泛型方法归结为什么？

> ID：13824570
> 
> 赞同：11
> 
> 时间：2012-12-11T16:41:17.530
> 
> 标签：c#, generics, reification

如果我有这样的课程：-

```
static class Foo {
   public static void Bar<T>(T item) { Console.WriteLine(item.ToString(); }
} 
```

我知道在这个例子中没有必要使用 T 因为所有类型都有 ToString() 等等 - 这只是一个人为的例子。我更感兴趣的是引擎盖下发生的以下情况：-

```
Foo.Bar("Hello");
Foo.Bar(123);
Foo.Bar(new Employee("Isaac")); 
```

我广泛地（认为！）我理解具体化，即如果你制作不同类型的泛型类，例如

```
List<Int32>
List<String>
List<Employee> 
```

等等然后在编译时（或运行时？）我们最终得到三种实际的具体类型，一种用于指定的每个通用参数。这是否同样适用于我的第一个示例中的方法调用，即我们是否仍然有一个类 Foo 但三个具体化的 Bar 方法，一个用于 String、Int32 和 Employee？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:54:43.950

这就是 C++ 模板和 C# 泛型之间的区别发挥作用的地方。

在 C++ 中，模板会为使用它的每种类型生成一个新方法。然而，在 C# 中，方法中的代码只创建一次。无论您使用 、 或 type 参数调用它，都会运行相同`int`的`string`代码`object`。

因为 C# 泛型在编译时仍然是泛型的，所以它们可以在编译后的库中公开，而无需重新编译。在 C++ 中，您需要在使用代码中包含原始模板，以便可以编译新的副本。

简而言之，**每个泛型方法只能获得一个编译方法。**

# delphi - 如何在关闭行选择的情况下为 DBGrid 中的整行着色？

> ID：13824573
> 
> 赞同：1
> 
> 时间：2012-12-11T16:41:19.963
> 
> 标签：delphi, tdbgrid

RowSelect 破坏了 OnCellClick 的功能，所以我需要关闭 RowSelect。那么如何通过突出显示当前行的所有单元格来模拟行选择的外观呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:52:34.607

使用`TDBGrid.OnDrawColumnCell`事件，并设置`State`以指示该行被选中。

```
procedure TfrmPrimaryCare.dbGrdPCClaimsDrawColumnCell(Sender: TObject;
  const Rect: TRect; DataCol: Integer; Column: TColumn; State: TGridDrawState);
var
  NewState: TGridDrawState;
  RowSelected: Boolean;
begin
  NewState := State;
  RowSelected := (Sender as TDBGrid).SelectedRows.CurrentRowSelected;
  if (RowSelected) then
    NewState := NewState + [gdSelected];
  TDBGrid(Sender).DefaultDrawColumnCell(Rect, DataCol, Column, NewState);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T17:03:28.063

这对我有用（`dgRowSelect=False`和`dgMultiSelect=False`）：为和访问受保护的方法和两个变量
声明黑客类型`DBGrid``GridDataLink`

```
type
  THackGrid = class(TDBGrid);
  THackDataLink = class(TGridDataLink);
var
  HackGrid: THackGrid;
  HackDataLink: THackDataLink; 
```

在`OnFormCreate`分配变量以使它们在绘图时可用：

```
procedure TMyForm.FormCreate(Sender: TObject);
begin
  HackGrid := THackGrid(MainGrid);
  HackDataLink := THackDataLink(HackGrid.DataLink);
end; 
```

并使用以下方法测试选定的行`TGridDataLink.GetActiveRecord`：

```
procedure TMyForm.MainGridDrawColumnCell(Sender: TObject;
  const Rect: TRect; DataCol: Integer; Column: TColumn;
  State: TGridDrawState);
begin
  if Not (gdSelected in State) and (HackGrid.Row = HackDataLink.GetActiveRecord + 1) then
    MainGrid.Canvas.Brush.Color := clInfoBk;

  MainGrid.DefaultDrawColumnCell(Rect, DataCol, Column, State);
end; 
```

# for-loop - for 循环 Arduino/C

> ID：13824574
> 
> 赞同：2
> 
> 时间：2012-12-11T16:41:22.897
> 
> 标签：for-loop, iteration, arduino, flow

我的目标是创建一个遍历数字的 for 循环，一旦达到最大值，它就会停止打印。到目前为止，我设法创建了一段代码，它停止打印 x 但它一直打印零。一旦迭代达到最大值，如何停止执行 Serial.print() 函数？

```
int x;
boolean f = false;

void setup(){
  Serial.begin(9600);
}

void loop(){
  for(x=0;x<8;x++){
    Serial.println(x);
    delay(300);
    if(x==7){
      f = true;
    }
    if(f){
      break;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:14:02.420

像下面这样的东西应该服务。顺便说一句，我喜欢给我的 vars 命名一些有意义的东西，以避免潜在的混淆并使代码更易于理解。

（一般来说，您最好将问题发布到[Arduino 论坛](http://arduino.cc/forum/)。更多的流量和更多知识渊博/乐于助人的人 == 更有可能得到答案。）

```
int current;
int limit;
boolean complete;

void setup(){
  Serial.begin(9600);

  current = 0;
  limit = 8;
  complete = false;
}

void loop(){

  if (!complete){
    while (true){
      Serial.println(current);
      current++;
      if (current >= limit){
        complete = true;
        break;
      }
      delay(300);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:31:25.857

关键是这个词`loop`——那个函数被重复调用了！

如果您希望某件事发生一次，请在 中执行`setup()`，或者（如另一个答案所建议的那样），有一个标志来跟踪您已经完成它的事实。

另一种方式（因为`x`是全球性的）是：

```
void loop() {
  if (x < 8) { 
     Serial.println(x);
     x++;
   }
} 
```

或者，摆脱全局变量：

```
void loop() {
  static int x = 0;
  if (x < 8) { 
     Serial.println(x);
     x++;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:39:15.820

```
int x;
boolean f = false;

void setup(){
  Serial.begin(9600);
} 
```

与您的代码非常相似，只需将 print 语句放在 if 语句中即可。

```
void loop(){
  for(x=0;x<8;x++){
    if(!f) {
      Serial.println(x);
    }
    delay(300);
    if(x==7){
      f = true;
    }
  }
} 
```

# ruby-on-rails - 在 AJAX 请求后设计退出

> ID：13824577
> 
> 赞同：0
> 
> 时间：2012-12-11T16:41:25.330
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, devise

我正在执行一些 AJAX 请求来添加或删除一些对象。像这样的东西：

**javascript**

```
jQuery.getJSON("/apps/remove_screenshot/' + screenshot_id, function(result) {
    if (result.status == 'ok') {
        screenshot_container.remove() 
    }
}); 
```

**控制器**

```
class AppsController < ApplicationController
  load_and_authorize_resource
  check_authorization

  # ...

  def remove_screenshot
    # ...
  end
end 
```

**配置/初始化程序/devise.rb**

```
config.http_authenticatable = true
# config.http_authenticatable_on_xhr = true
config.navigational_formats = [:html, :json] 
```

问题是，请求已成功执行。但是当我重新加载执行请求的页面时，我得到了*拒绝访问*错误。

不过，我需要在执行`remove_screenshot`操作时检查身份验证。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:22:20.120

用这组代码修复（并用类似的代码重写所有非 jQuery AJAX 请求）：

```
$(function(){
    $.ajaxSetup({
        beforeSend: function( xhr ) {
            var token = $('meta[name="csrf-token"]').attr('content');
            if (token) xhr.setRequestHeader('X-CSRF-Token', token);
        }
    });
}); 
```

我的一些 jQuery 插件在不发送 CSRF 令牌的情况下发送 AJAX 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:01:51.910

你很可能搞砸了一些小事。你只需要找出你做了什么，这里有几个地方可以看；

确保您`application.html.erb`具有以下内容；

```
<%= csrf_meta_tag %> 
```

进而;

```
<%= javascript_include_tag "application" %> 
```

并确保`application.js`（在您的`/app/assets/javascripts`文件夹中）有；

```
//= require jquery
//= require jquery_ujs 
```

# ruby - capistrano 的 Ruby 替代品

> ID：13824578
> 
> 赞同：0
> 
> 时间：2012-12-11T16:41:26.267
> 
> 标签：ruby, capistrano

Capistrano 有一些粗糙的边缘。我应该考虑哪些其他软件包？

如果您好奇，我正在使用 Capistrano 进行非 Web 相关控制，以自动化一些涉及在一堆（虚拟）机器上执行命令的测试。

我的一项任务是关闭虚拟机：

```
desc "Shut down a VM"
task :turn_off_vm do
  sudo 'shutdown -h now'
end 
```

问题是，一旦命令执行，cap 会保持 ssh 连接打开，然后在它消失时抛出错误，这意味着我的 8 台机器中有 2 台没有关闭。

此外，sudo 不能按我期望的方式工作（fabric 的 sudo 可以），以下命令：

```
sudo 'echo 3 > /proc/sys/vm/drop_caches' 
```

失败，因为只有“echo”以root身份运行，而不是运行命令的shell，所以写入文件是像我一样完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:00:25.240

`Puppet`可能相当于`Capistrano`

[http://www.agileweboperations.com/puppet-vs-capistrano-short-comparison](http://www.agileweboperations.com/puppet-vs-capistrano-short-comparison)

# android - Android不同的可绘制屏幕分辨率

> ID：13824580
> 
> 赞同：13
> 
> 时间：2012-12-11T16:41:33.630
> 
> 标签：android, image, screen, drawable, resolution

我对应该为不同的可绘制文件夹保存图像的分辨率有点困惑。它有一个通用的公式吗？例如，如果我希望图像占据屏幕高度和整个宽度的 10%，我将如何计算我应该将图像保存在哪些不同的分辨率？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-11T16:46:30.527

这是 android 的图标指南。显然，并非所有可绘制对象都是图标，但也许这可以帮助您入门。

*   36x36 用于低密度
*   48x48 用于中等密度
*   72x72 用于高密度
*   96x96 用于超高密度

![在此处输入图像描述](../Images/3637c75e684213a90ea7a650e7ac7047.png)

从这里：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T10:22:32.537

根据这里的android文档

[http://developer.android.com/guide/practices/screens_support.html#range](http://developer.android.com/guide/practices/screens_support.html#range)

在 mdpi（基线密度）1px = 1dp

并且在主题“支持的屏幕范围”下，dp 中正常尺寸屏幕（基线尺寸）的最低分辨率是

470dp X 320dp，因为基线密度 1px = 1dp，所以基线屏幕尺寸（以像素为单位）为

470 像素 X 320 像素

现在对于基线屏幕尺寸和密度，470px 的 10% 将是 47px，全宽是 320px，因此您的基线可绘制对象将具有以下像素大小

47 像素 X 320 像素

对于 ldpi:mdpi:hdpi:xhdpi，替代可绘制对象的缩放比例为 3:4:6:8

这意味着您的图形的上述基线分辨率为 4。现在要获得其他密度的图形分辨率，我们需要将 mdpi 图形分辨率除以 4 以获得单位值

高度单位 = 47/4 = 11.75

宽度单位 = 320/4 = 80

现在可以通过将单位值与相应的缩放比率相乘来计算其他密度的重新计算

低密度脂蛋白

11.75 X 3 = 35.25 像素

80 X 3 = 240 像素

mdpi（上面已经计算过了，为了清楚起见在这里再做一次）

11.75 X 4 = 47 像素

80 X 4 = 320 像素

hdpi

11.75 X 6 = 70.5 像素

80 X 6 = 480 像素

xhdpi

11.75 X 8 = 94 像素

80 X 8 = 640 像素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:00:22.273

Android 开发者网站上有关于如何管理图像大小和分辨率以支持多个屏幕的不同指南。

请参阅此[如何为不同的屏幕开发一个 android 应用程序？](https://stackoverflow.com/questions/7036369/how-to-develope-one-android-application-for-different-screens)

# database - 在查询之前找到粗略时间的算法

> ID：13824582
> 
> 赞同：1
> 
> 时间：2012-12-11T16:41:40.467
> 
> 标签：database, oracle

是否有任何`knows or think`脚本或`tool`会告诉`rough estimate`“*执行查询需要多长时间”*，就像我们将 Windows 中的文件复制到某个外部设备时，它给出了大致估计的时间，复制所需的时间. `algorithm`任何人都可以考虑根据解释计划创建任何内容吗？我不知道这是否是提出此类问题的正确论坛。但是这个问题出现在我的脑海中，所以我问了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:45:31.363

查询计划的`TIME`列已经为您提供了优化器对经过时间的估计

```
SQL> select *
  2    from table( dbms_xplan.display );

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 3956160932

--------------------------------------------------------------------------
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |      |    14 |   546 |     3   (0)| 00:00:01 |
|   1 |  TABLE ACCESS FULL| EMP  |    14 |   546 |     3   (0)| 00:00:01 |
--------------------------------------------------------------------------

8 rows selected. 
```

显然，优化器的估计肯定是不正确的。但这通常意味着对象的统计数据在某些方面是不正确的。假设您的算法将使用相同的统计数据，您的估计似乎不太可能更准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:40:14.543

Oracle 有 v$session_longops 视图，可以估计某些查询的完成时间。Longops 包含以下信息：表扫描；索引快速全扫描；哈希连接；排序/合并；排序输出；回滚；收集表的索引统计信息。[但不是嵌套循环]

例如可以查询如下：

```
select to_char(sysdate,'DD-MON-YYYY hh24:MI:SS') date_measured
, sql_id
, elapsed
, remaining 
, ROUND(sofar/totalwork*100, 2) progress_pct
, username
, sql_text
, inst_id, sid, serial#
, logon_time
, OSUSER
, terminal
, machine
, program
, last_call_et
from
(
SELECT s.inst_id
       ,s.sid
       ,s.serial#
       ,s.username
       ,s.OSUSER
       ,s.machine
       ,s.sql_id
       ,TRUNC(sl.elapsed_seconds/60) || ':' || MOD(sl.elapsed_seconds,60) elapsed
       ,TRUNC(sl.time_remaining/60) || ':' || MOD(sl.time_remaining,60) remaining
       , sl.sofar
       , sl.totalwork
       ,s.logon_time
       ,s.terminal
       ,s.program
       ,s.last_call_et
       ,sa.sql_text
FROM   gv$session s
       ,gv$session_longops sl
       ,gv$sqlarea sa
WHERE  s.inst_id = sl.inst_id
  AND  s.sid     = sl.sid
  AND  s.serial# = sl.serial#
  and s.sql_id = sa.sql_id 
  and s.inst_id = sa.inst_id 
) a
where remaining not in ('0:0',':')
; 
```

同样，longops 中没有所有查询，但它为满足其包含标准的长时间运行的查询提供了有趣的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:45:37.840

这其中有很多因素。

本文可能会让您深入了解您正在寻找的内容：ftp: [//ftp.research.microsoft.com/users/autoadmin/progress.pdf](ftp://ftp.research.microsoft.com/users/autoadmin/progress.pdf)

# ruby-on-rails - git错误是什么意思“pathspec不匹配任何文件”

> ID：13824590
> 
> 赞同：3
> 
> 时间：2012-12-11T16:42:21.783
> 
> 标签：ruby-on-rails, git, github

在 Rails 应用程序中，我意识到我已将敏感文件 config/credentials.yml 提交到 git repo。

为了整理东西，我遵循了[GitHub 上的建议](https://help.github.com/articles/remove-sensitive-data)并运行

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch config/credentials.yml' --prune-empty --tag-name-filter cat -- --all 
```

然后添加到 gitignore

```
echo "config/credentials.yml" >> .gitignore 
```

当我尝试提交这些更改时

```
git add .gitignore
git commit -m "ignored credentials.yml" 
```

我收到一条消息

```
error: pathspec 'adds credentials.yml to gitignore' did not match any file(s) known to git. 
```

我该如何解决这个错误？或者，我怎样才能撤消我的更改并安全地恢复到遥控器上的 git 历史记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:49:18.577

我想你可能忘记了步骤

```
$ git add .gitignore 
```

在尝试提交之前，或者你打错了，当你应该给予的时候

```
$ git commit -m "Add credentials.yml to .gitignore" 
```

建议的过程非常危险[对于回购内容]，因此必须非常小心地详细执行所有步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-07T10:06:10.057

只需在将文件添加到**git add**命令时提供文件路径，它对我有用

$ git add mainFolder/.../file.extension

注意： mainFolder 将是您的仓库中的文件夹

# iphone - 在 iPad 中部署为 iPhone

> ID：13824594
> 
> 赞同：0
> 
> 时间：2012-12-11T16:42:38.423
> 
> 标签：iphone, ios, xcode, ipad, cydia

我正在为 iPad 和 iPhone 开发一个应用程序。问题是我只有一台 iPad。我需要在物理设备中进行开发，因为我在项目中有一些仅适用于设备的库。有什么方法可以在我的 iPad 中部署为 iPhone 来检查应用程序代码是否工作正常？我有一个越狱设备。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:49:29.717

在 Xcode 中选择您的目标，然后选择 Summary 选项卡。将设备值从通用更改为 iPhone。现在在您的 iPad 上构建并运行您的应用程序。它将在 iPad 上以 iPhone 兼容模式运行。

在将应用程序发送到 Apple 之前，不要忘记将该选项放回 Universal。

一个限制是您无法测试您的应用是否适用于 4" 设备。iPhone 兼容模式仅适用于 3.5" 模式。

# iphone - 确定使用了我的 iOS 应用程序中的哪些功能

> ID：13824596
> 
> 赞同：0
> 
> 时间：2012-12-11T16:42:55.130
> 
> 标签：iphone, ios, tracking, user-interaction

我在 App Store 上有几个 iPhone/iPad 应用程序。我想在我的应用程序中添加可以识别用户行为的代码片段。例如，应用程序中的哪些功能使用最多或最少。是否有人对如何在我的应用程序中实现此类功能有一个好主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:44:46.363

将[http://www.flurry.com](http://www.flurry.com)集成到您的应用程序中，并为您想了解的应用程序的所有部分设置自定义事件。该报告将为您提供每个会话的使用量，您可以直接识别正在使用的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:48:20.633

[在Google Analytics](https://developers.google.com/analytics/devguides/collection/ios/)中使用事件跟踪。

对于您要跟踪的每个用户事件，您可以执行以下操作：

```
[tracker trackEventWithCategory:@"uiAction"
                 withAction:@"buttonPress"
                  withLabel:buttonName
                  withValue:[NSNumber numberWithInt:100]]; 
```

这样，您可以在分析中生成报告以查看正在使用的内容。有关更多详细信息，请参阅他们的[事件跟踪](https://developers.google.com/analytics/devguides/collection/ios/v2/events)文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:31:30.223

我在所有应用程序中都使用 Flurry，它运行良好。各种有用的（对合适的人）数据。您可以提交事件，例如“用户赢得 608 级”，并以字典的形式将数据附加到它们。

最终结果：我推荐 Flurry。

www.flurry.com

# c# - XML 更新属性：在末尾添加字符并失败

> ID：13824600
> 
> 赞同：0
> 
> 时间：2012-12-11T16:43:02.337
> 
> 标签：c#, asp.net, xml, xml-parsing

我正在尝试更新 xml 的属性。我的问题是，当我更新并稍后阅读我的 xml 时出现异常。我一直在寻找问题，但我不知道如何，但在 xml 的末尾出现了我的一般关闭标记的最后一个字符。有时三个或两个字符最后或只有字符`>`。这个问题并不总是发生。有时是第二次，有些是第四次，有些是第十次……我在下面放了一个片段。非常感谢，对不起我的英语。

PD：我不使用 Linq

我的 XML

```
// At the end of xml file appears this fragment
<?xml version="1.0"?>
<MYPRINCIPALTAG>
    <TAG DATE="01/01/01"></TAG>
</MYPRINCIPALTAG>AG> 
```

更多代码;-)

```
// Read XML
System.IO.FileStream fs = new System.IO.FileStream (path, System.IO.FileMode.Open, System.IO.FileAccess.Read);
XmlTextReader reader = new XmlTextReader (fs);
while (reader.Read ()) {
switch (reader.NodeType) {
   case XmlNodeType.Element:
      switch (reader.Name) {
        case 'TAG':
            string pubdate = reader.GetAttribute (0);
            break;
        }
        break;
    }
fs.Close(); 

public static XmlNode OpenXmlNode(string path, ref System.IO.FileStream fs, ref XmlDocument doc) {
     fs = new System.IO.FileStream (path, System.IO.FileMode.Open, System.IO.FileAccess.ReadWrite);
     doc = new XmlDocument ();
     doc.Load (fs);
     fs.Flush ();
     fs.Close ();
     return doc.DocumentElement;
}

public static void CloseXmlNode(string path, ref System.IO.FileStream fs, ref XmlDocument doc) {
    fs = new System.IO.FileStream (path, System.IO.FileMode.Open, System.IO.FileAccess.ReadWrite);
    doc.Save (fs);
    fs.Flush ();
    fs.Close ();
}

 public static Boolean UpdateXML(string path, string id_tag) {
     try {
        System.IO.FileStream fs = null;
        XmlDocument doc = new XmlDocument ();
        XmlNode element = OpenXmlNode (path, ref fs, ref doc);
        // Change Date
        element.ChildNodes[0].Attributes.GetNamedItem ("date").Value = DateTime.Now.ToString ("dd/MM/yy");
        for (int count = 1; count < doc.DocumentElement.ChildNodes.Count; count++) {
           if ((doc.DocumentElement.ChildNodes[count].Attributes.GetNamedItem ("ID").Value).Equals (id_tag)) {
              for (int i = 0; i < doc.DocumentElement.ChildNodes[count].ChildNodes[0].ChildNodes.Count; i++) {
                doc.DocumentElement.ChildNodes[count].ChildNodes[0].ChildNodes[i].Attributes.GetNamedItem ("STATE").Value = "ok";
              }
              break;
           }
        }
        CloseXmlNode (path, ref fs, ref doc);
        return true;
     } catch (Exception e) {
        return false;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:07:28.440

尝试做一个 fs.flush(); 在 fs.Close() 之前；像这样

```
doc.Save(fs);
fs.Flush();
fs.Close(); 
```

更好的是。您编写代码的方式（使用静态函数），您似乎没有从使用文件流（IMO）中受益。我将更改函数 OpenXmlNode() 和 CloseXmlNode() 如下：

```
public static XmlNode OpenXmlNode(string path, ref XmlDocument doc) 
{
     doc = new XmlDocument (); 
     doc.Load (path); 
     return doc.DocumentElement; 
} 
public static void CloseXmlNode(string path, ref XmlDocument doc) 
{ 
    doc.Save (path); 
} 
```

# sql-server-2008 - 对数据库之间的查询使用“Union All”

> ID：13824609
> 
> 赞同：2
> 
> 时间：2012-12-11T16:43:22.943
> 
> 标签：sql-server-2008, multiple-databases, union-all

我有一个有趣的情况，我想看看是否有解决方案...我在同一台服务器上的 4 个数据库中有 4 个表，所有表都具有相同的结构：

Pnl_IL_2012 数据库中的 dbo.IL_Membership Pnl_NM_2012 数据库中的 dbo.NM_Membership

我想将每个表中的聚合数据集组合成一个数据集，但我试图利用 (USE [Pnl_IL_2012] --> Go) 构造来尝试获取每个聚合查询的数据。

```
select * from 
(USE [Pnl_IL_2012]
GO
select 'IL' as PlanID, sum(Contracts_Hlth) as PROD_Contracts_Hlth from dbo.IL_Membership where [month] between '2012-09-01' and '2012-10-31') Q1 
```

联合所有

```
select * from
(USE [Pnl_NM_2012]
GO
select 'NM' as PlanID, sum(Contracts_Hlth) as PROD_Contracts_Hlth from dbo.NM_Membership where [month] between '2012-09-01' and '2012-10-31') Q2 
```

我收到这些错误：

```
Msg 156, Level 15, State 1, Line 2
Incorrect syntax near the keyword 'USE'.
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near ')'.
Msg 156, Level 15, State 1, Line 5
Incorrect syntax near the keyword 'USE'.
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near ')'. 
```

任何人都有办法让 union all 跨数据库工作？我不需要加入只是一个工会...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:45:17.897

`GO`表示批处理结束，因此不能在查询中间使用。

相反，使用[三部分名称](http://msdn.microsoft.com/en-us/library/ms187879%28v=sql.105%29.aspx)引用表：

```
Pnl_IL_2012.dbo.IL_Membership 
```

给你以下查询：

```
select 'IL' as PlanID, sum(Contracts_Hlth) as PROD_Contracts_Hlth 
from Pnl_IL_2012.dbo.IL_Membership 
where [month] between '2012-09-01' and '2012-10-31'

union all

select 'NM' as PlanID, sum(Contracts_Hlth) as PROD_Contracts_Hlth 
from Pnl_NM_2012.dbo.IL_Membership 
where [month] between '2012-09-01' and '2012-10-31' 
```

# command-line - 如何循环这个命令？

> ID：13824612
> 
> 赞同：1
> 
> 时间：2012-12-11T16:43:32.603
> 
> 标签：command-line, command, cmd

我是这个社区的新手，也是编码新手。我试图弄清楚是否有办法重复这样的命令

```
CMD /k Taskkill /IM A.exe /F 
CMD /k Taskkill /IM B.exe /F 
CMD /k Taskkill /IM C.exe /F 
CMD /k Taskkill /IM D.exe /F 
CMD /k Taskkill /IM E.exe /F 
```

我目前正在使用此代码做同样的事情

```
:A
Taskkill /IM A.exe /F
Taskkill /IM B.exe /F
Taskkill /IM C.exe /F
Taskkill /IM D.exe /F
Taskkill /IM E.exe /F

Goto A 
```

虽然我使用的代码可能有问题，因为批处理程序不会同时执行。我需要帮助寻找一种方法来批量或任何其他类型的语言同时执行命令。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:45:33.090

使用循环，无论是 a`for`还是`while`. 我能想到的任何*现代*`goto`语言都不再使用for 循环了！这种迭代用于汇编程序或非常原始的脚本/编程语言中。在过去的 20 年左右，您没有编写过任何代码吗？:P

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:48:32.000

**-** `while` **或** `for`循环将完成工作。

**例如：**

```
while(true){  // Its a infinite loop

dosomething...
dosomething....

} 
```

**或者**

```
for(;;){  // Its a infinite loop

    dosomething...
    dosomething....

    } 
```*

# blackberry - 如何以编程方式检测 Bis-B 是通过运营商还是 Wi-Fi？

> ID：13824618
> 
> 赞同：0
> 
> 时间：2012-12-11T16:43:46.357
> 
> 标签：blackberry

我们如何以编程方式检测 BIS 数据流量是通过运营商网络还是 Wi-Fi 路由。看BB标志点，我们可以看到，如果数据通过Wi-Fi路由，它将在Wi-Fi指示灯附近，如果数据通过运营商数据网络路由，它将在运营商信号指示灯附近。

有没有办法以编程方式检测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:44:28.497

您可以使用 API 来确定特定服务是否能够承载 BIS-B 或 BES 流量。由于 BIS-B 和 BES 是通过最便宜的方式自动路由的，如果 Wi-Fi 能够承载它，BIS-B 将通过 Wi-Fi 进行。

史密斯先生评论中的[知识库文章](http://www.blackberry.com/btsc/KB13368)指定 BIS-B 访问可用于符合条件的数据计划（AKA BlackBerry 数据计划、BlackBerry bolt on 等）

> “要通过 Wi-Fi 连接到 BlackBerry 数据服务以进行 PIN 消息传递和 BlackBerry Internet Service 连接，BlackBerry 智能手机需要无线服务提供商提供的 BlackBerry 数据计划......”

）。鉴于符合条件的数据计划 BlackBerry Internet Service (BIS) 在图表中指定的所有条件下均可用。如果 Wi-Fi 连接支持与 ROC 处的 BlackBerry 路由器的连接，则 BIS 将通过该连接传输，除非有更好的选择。一种更好的选择也称为“无线旁路”。当黑莓（通过 USB 或蓝牙）连接到安装了 Internet 访问和桌面管理器的 PC 时，黑莓将使用 PC 的 Internet 连接。

知识库文章还提到了 BES。将 BIS/BIS-B 视为托管在 RIM 运营中心的 BES 功能的子集通常会有所帮助。BES 和 BIS/BIS-B 都使用了 BlackBerry 路由器功能。黑莓将自动寻找与黑莓路由器 BES 或 BIS/BIS-B 连接的明显成本最低的方法。优先顺序是：无线旁路；无线上网; 无线运营商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:07:50.827

To detect whether BIS is going through Wi-Fi, use

```
if (CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_BIS_B)) { 

       if (CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_BIS_B, RadioInfo.WAF_WLAN, false))
       {
             //BIS-B going through wifi 
       }
       else
       {
            //BIS-B going through carrier
       }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:57:46.890

尝试禁用 Wi-Fi：

```
Radio.deactivateWAFs(RadioInfo.WAF_WLAN); 
```

也许您还可以检测 Wi-Fi 是否正在通话`RadioInfo.getActiveWAFs`，但是您如何知道使用该连接的应用程序是否是您的应用程序？

# c++ - 排序插入到链表中

> ID：13824619
> 
> 赞同：0
> 
> 时间：2012-12-11T16:43:48.637
> 
> 标签：c++, linked-list

自周日以来，我一直在使用这个迭代函数，但没有成功，我想为排序插入创建迭代函数，但经过一小时的节点绘图，我想我需要一些关于该函数的帮助：

结构声明：

```
 typedef struct E_Type * List;

  struct E_Type
  {
      int data;
      struct E_Type* next;
  }; 
```

功能：

```
bool insert(List & l, int data) {
    while (l != 0) {
        for (List p = l; p; p = p->next) {
            if (p->data == data)
                return false;
        }

        if (l->data > data) {
            List new_list = new E_Type;
            new_list->data = data;
            new_list->next = l;
            l = new_list;
            return true;
        } else if (l->data < data) {

            List new_list = new E_Type;
            new_list->data = data;
            l->next = new_list;
            l = new_list;
            return true;
        }
    }

    if (l == 0) {
        List new_list = new E_Type;
        new_list->data = data;
        new_list->next = l;
        l = new_list;
        return true;
    }
} 
```

顺便说一句：这个功能甚至可能......关于这个插入的所有教程、信息等都带有对下一个数据的递归调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:00:51.727

```
//find the closest Node that is not > data and return it
List* find(List* l, int data) {
    // l != NULL
    List* current = l;
    List* previous = NULL;

    while(current != NULL && current->data > data) {
        previous = current;
        current = current->next;
    }

    return previous;
}

List* insert(List* l, int data) {
    //l != NULL
    List* current = new List();
    current->data = data;

    if(l->data > data) {
        List* insert_position = find(l, data);
        current->next = insert_position->next;
        insert_position->next = current;
    } else {
        current->next = l;
        return current;
    }
    return l;
} 
```

* * *

```
struct List
{
    int data;
    List* next;
}; 
```

您实际上并不需要`typedef`or `struct`关键字。

上面的示例应该与您要查找的内容接近。正如您所指出的，您的内容存在一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:06:42.710

结构看起来不错。我试图让`insert`'s 的结构尽可能接近你的结构。我希望评论可以帮助您了解您做错了什么。

```
bool insert( List & l, int data ) {
    // We have to look sequentially at all members in the *ordered* list
    while ( l != 0 ) {
         // We already have this data, we exit
         if ( l->data == data ) return false;
         // If this element's data is bigger we shift it by one spot
         // so we can insert the new one
         else if ( l->data > data ) {
              List new_element = new E_Type;
              // Save current element in the new one ( that will shift )
              new_element->data = l->data;
              new_element->next = l->next;
              // "Insert" our new element
              l->data = data;
              l->next = new_element;
              return true;
         }
         // If we didn't return before, we skip to the next element
         // but only if it's not the end
         if ( l->next )
             l = l->next;
         else
             break;
    }
    if ( l ) {
        // If we are here it means that all elements are lower than the new data.
        // l currently holds the last element of the list, so we only need to add
        // a new element to the list
        List new_element = new E_Type;
        new_element->data = data;
        new_element->next = 0;
        l->next = new_element;
        return true;
   }
   else {
        // If we are here it means that there was no list to begin with.
        // Thus, we have to create a first element.
        l = new E_Type;
        l->data = data;
        l->next = 0;
        return true;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:57:15.487

有很多错误：

```
l->next = new_list; 
```

这一行擦除了指针的先前值`l->next`。

没有代码可以寻找合适的元素在之前或之后插入新元素。

您的 while 没有任何意义，因为您的`l`指针不会随着迭代而变化。

你最好只在纸上写下你的函数应该做的基本步骤，并且只有在用 C++ 对它们进行编码之后。

（或者只是使用来自邻居答案的工作样本;-)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T17:08:31.807

我可以看到你是如何陷入困境的。您的`insert`函数尝试执行多项任务（检查重复项，找到插入新元素的位置并进行实际插入），并且每个任务所需的步骤都变得混乱。

我最好的建议是退后一步，编写三个函数：

1.  制作检查元素是否已经存在的函数（让我们调用它`bool find_element(List l, int data)`）。
2.  创建一个函数，在现有列表的前面插入一个新元素并返回新列表 ( `List insert_front(List l, int data)`)。该函数可以利用 a 的每个元素`List`也可以被视为列表的头部这一事实。
3.  创建一个函数来确定在哪里插入一个新元素 ( `List locate_insertion_point(List l, int data)`)。
4.  根据三个新函数编写你`insert`的函数。

    ```
    bool insert(List& l, int data)
    {
        if (find_element(l, data))
            return false;

        List insert = locate_insertion_point(l, data);
        if (insert == NULL)
        { /* Can't insert after any point. Insert at the front */
            List new_list = new E_Type;
            new_list->data = data;
            new_list->next = l;
            l = new_list;
        }
        else
        { /* insert after insert */
            List next = insert->next;
            insert->next = insert_front(next, data);
        }
        return true;
    } 
    ```

# opencv - 使用 cascade.load() 在 Opencv 中加载级联分类器时出错！

> ID：13824620
> 
> 赞同：1
> 
> 时间：2012-12-11T16:43:49.483
> 
> 标签：opencv, opencvdotnet

我正在使用 opencv 示例中给出的 facedetect.cpp 代码。但是在构建和运行之后会出现错误，因为`cascade.load(cascadeName)`给定错误即返回零。几天前它还在工作。突然，这个错误开始出现。我也是XML文件的完整路径，但它不起作用！此命令用于运行代码的可执行文件：

```
`objectDetect --cascade="Full path to haarcascade_frontalface_alt.xml" --scale=1.3 %1` 
```

XML文件的路径是正确的！！[请检查此快照](http://i.stack.imgur.com/XYuPo.jpg)

```
#include <opencv2\objdetect\objdetect.hpp>
#include <opencv2\highgui\highgui.hpp>
#include <opencv2\imgproc\imgproc.hpp>
#include <cv.h>
#include <highgui.h>
#include <iostream>

using namespace std;
using namespace cv;

int main(int argc, char* argv[]) {
string xmlArray[] = {
"D:/Visual Studio 2010/Projects/loadClassifierTest/haarcascades/haarcascade_eye.xml",
"D:/Visual Studio 2010/Projects/loadClassifierTest/haarcascades/haarcascade_eye_tree_eyeglasses.xml",
"D:/Visual Studio 2010/Projects/loadClassifierTest/haarcascades/haarcascade_frontalface_alt.xml",
"D:/Visual Studio 2010/Projects/loadClassifierTest/haarcascades/haarcascade_frontalface_alt2.xml",
"D:/Visual Studio 2010/Projects/loadClassifierTest/haarcascades/haarcascade_frontalface_alt_tree.xml",
"D:/Visual Studio 2010/Projects/loadClassifierTest/haarcascades/haarcascade_frontalface_default.xml",
"D:/Visual Studio 2010/Projects/loadClassifierTest/haarcascades/haarcascade_fullbody.xml"
};
CascadeClassifier cascade;
for (int i = 0; i < 6; ++i) {
    if (!cascade.load(xmlArray[i]))
        cerr << "Could not load " << xmlArray[i] << " !" << endl;
    else
        cout << xmlArray[i] << " has been loaded!" << endl;
}
return 0;
} 
```

所有的 xml 文件都在同一个文件夹中....即使在给出完整路径之后....它们没有加载...！我认为没有任何权限问题...

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:55:27.690

您是否尝试过以这种方式传递绝对路径：

```
 String xmlFilePath = "c:/.../haarcascade_frontalface_alt.xml"; 
```

您的文件是否在具有读取权限的文件夹中？

它应该可以工作，否则问题出在代码的另一个地方..

# r - 用于选择性行替换的 Data.frame 合并使用

> ID：13824624
> 
> 赞同：1
> 
> 时间：2012-12-11T16:43:58.140
> 
> 标签：r

> **可能重复：**
> [如何使用 merge() 更新 R 中的表](https://stackoverflow.com/questions/3190118/how-to-use-merge-to-update-a-table-in-r)

对于 R 中的这种操作，合并的正确用途是什么？见下文。

```
older <- data.frame(Member=c("first","second","third","fourth"),
                       VAL=c(NA,NA,NA,NA))
newer <- data.frame(Member=c("third","first"),
                       VAL=c(2125,4587))

# 
merge.data.frame(older,newer,all=T)
  Member  VAL
  1  first 4587
  2  first   NA
  3 fourth   NA
  4 second   NA
  5  third 2125
  6  third   NA 
```

以上不是我所期望的，我想用新条目替换旧条目，而不是添加另一行。如下所示。我失败了 merge.data.frame。

```
my.merge.fu(older,newer)
  Member  VAL
  1  first 4587
  2 second   NA
  3  third 2125
  4 fourth   NA 
```

一种选择性行替换，其中较新的成员优先，并且不能包含除较旧成员之外的其他成员。

这种 R 操作是否有适当的英文术语，是否有预建功能？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:36:45.160

你已经有效地回答了你自己的问题。

如果你想处理 Matthew Ploude 的观点，你可以使用

```
older$VAL[match(newer[newer$Member %in% older$Member, ]$Member, older$Member)
          ]  <- newer[newer$Member %in% older$Member, ]$VAL 
```

这也是 where 有多个新值的效果，例如`newer`，它是最新的`older`

```
older <- data.frame(Member=c("first","second","third","fourth"),
                       VAL=c(1234,NA,NA,5678))
newer <- data.frame(Member=c("third","first","fifth","first"),
                       VAL=c(2125,4587,2233,9876))

older$VAL[match(newer[newer$Member %in% older$Member,]$Member, older$Member)
          ]  <- newer[newer$Member %in% older$Member,]$VAL 
```

给

```
> older
  Member  VAL
1  first 9876
2 second   NA
3  third 2125
4 fourth 5678 
```

# javascript - Ext.grid.Panel - 如何访问行数据

> ID：13824627
> 
> 赞同：0
> 
> 时间：2012-12-11T16:44:06.127
> 
> 标签：javascript, extjs

我有一个带有 dblclick 侦听器的 Ext.grid.Panel。它看起来像这样：

```
listeners: {
    dblclick: {
        fn : function() {

               console.log("double click event processed");
        },
        element: 'el'
    }                
} 
```

双击一行时，我想在新页面中打开一个 URL。为了确定 URL，我需要访问行数据 - 或者访问我的 JSON 中用作面板存储的“行”。我将如何访问这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:03:57.443

好吧，事件是 itemdblclick（没有 dblclick）。并且该行作为参数传递给处理程序。

例如，在下面的示例中，当您双击一行时，您会看到一个警报弹出窗口，其中显示了选定的 Simpson 名称：

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    listeners: {
        itemdblclick: {
           fn : function(grid, record) {
               alert(record.get('name'));
           }
        }
    },                

    renderTo: Ext.getBody()
});​ 
```

你也可以看到它在这里工作：http: [//jsfiddle.net/lontivero/utjyd/1/](http://jsfiddle.net/lontivero/utjyd/1/)

祝你好运！

# html - 将提交按钮附加到输入

> ID：13824628
> 
> 赞同：1
> 
> 时间：2012-12-11T16:44:07.213
> 
> 标签：html, css

我有一个输入类型按钮，用于验证表单输入类型文本。

例如，我已经看到，引导程序允许您将一些值附加到输入。我想知道如何将这个类型按钮的输入附加到我的文本类型输入中。

我已经添加了我的想法的屏幕截图，但我不确定我会选择哪种 CSS 策略。

谢谢

![在此处输入图像描述](../Images/813f26b1baecb41e07c93f7847979fbe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:49:32.273

它只是一个带有文本字段的提交按钮

[**演示**](http://jsfiddle.net/NSA2e/)

HTML

```
<div class="wrap">
   <input type="text" />
   <input type="button" value="Demo" />
</div> 
```

CSS

```
.wrap {
    display: inline-block;
    position: relative;
}

input[type=text] {
    padding: 10px;
    width: 300px;
    padding-right: 60px;
}

input[type=button] {
    padding: 2px;
    position: absolute;
    right: 5px;
    top: 5px;
} 
```

# javascript - 切换复选框的热键相反

> ID：13824629
> 
> 赞同：1
> 
> 时间：2012-12-11T16:44:09.010
> 
> 标签：javascript, jquery

在这个[jsFiddle](http://jsfiddle.net/4PZyN/)中，我在第一列中有一个带有复选框的表格。表头中的主复选框按预期工作，在单击时切换表中所有复选框的状态。

我为`Shift`+设置了一个热键`X`来切换主复选框。使用热键时所需的行为是：

1.  主复选框已切换
2.  每个子复选框都将其选中状态设置为与主复选框匹配

但实际发生的事情恰恰相反……

1.  每个子复选框都将其选中状态设置为与主复选框匹配
2.  主复选框已切换

这是相关代码

```
$(".master-select").click(function(){
    $(this).closest("table").find("tbody .row-select").prop('checked', this.checked);
});

function tickAllCheckboxes() {
  var master = $(".master-select").click();
}

//using jquery.hotkeys.js to assign hotkey
$(document).bind('keydown', 'shift+x', tickAllCheckboxes); 
```

这导致子复选框具有与主复选框相反的选中状态。为什么会这样？修复会很好，但我真的很想解释一下，所以我可以理解发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:46:39.877

尝试这个

```
$(".master-select").click(function(){
    var checked = true;
    if(this.checked){
        checked = false;
    }
    $(this).closest("table").find("tbody .row-select").prop('checked', checked);
}); 
```

问题是你实际上不是`clicking the checkbox`，而是`triggering it`。因此，无论您在何处触发复选框，复选框的状态都将处于**先前的状态**..

您需要**明确处理触发器和手动单击**的逻辑..

试试这个代码

```
$(".master-select").click(function(e) {
    var checked;
    if (e.isTrigger) { // Logic when click is triggered
        checked = true;
        if (this.checked) {
            checked = false;
        }
    }
    else {  // Explicit click 
       checked = this.checked;
    }

    $(this).closest("table").find("tbody .row-select").prop('checked', checked);
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/4PZyN/1/)**

# javascript - jScrollPane 暂时禁用键盘支持，然后重新启用它

> ID：13824631
> 
> 赞同：0
> 
> 时间：2012-12-11T16:44:15.613
> 
> 标签：javascript, jquery, jscrollpane, jquery-jscrollpane

# 解决了

我将以下代码行添加到 jScrollPane 插件，现在我可以调用 jScrollPane 并启用/禁用键盘导航支持

```
disableKeyboard: function()
{
    removeKeyboardNav();
},
enableKeyboard: function()
{
    initKeyboardNav();
} 
```

好的，所以我正在使用带有自定义下拉替换器的 jQuery 滚动窗格。自定义下拉替换支持向上和向下箭头键的键盘使用，但 jScrollPane 已经具有这些绑定。那么我想做的是当下拉菜单打开以禁用 jScrollPane 键盘支持时？或者即使我可以暂时更改 jScrollPane 正在寻找的键也可以。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:06:15.007

# 解决了

通过将这些行添加到 jScrollPane 插件，我现在可以调用该插件并告诉它启用或禁用键盘导航。

```
disableKeyboard: function()
{
    removeKeyboardNav();
},
enableKeyboard: function()
{
    initKeyboardNav();
} 
```

# jsf - 如何使用 JSF 获取 windows 用户名？

> ID：13824632
> 
> 赞同：1
> 
> 时间：2012-12-11T16:44:18.133
> 
> 标签：jsf, ntlm

出于身份验证的目的，我想在我的用户访问索引页面时获取他们的 Windows 用户名。我将使用这个 windows 用户名来检查数据库，如果这个用户是已知的，那么他将被记录，否则我会将他重定向到一个身份验证表单。

我发现了这个（[http://www.rgagnon.com/javadetails/java-0441.html](http://www.rgagnon.com/javadetails/java-0441.html)），其中 JSP 页面使用 NTML 协议来获取 Windows 用户名。它有效（仅在 IE 上）。但...

...我想做同样的事情，但使用 JSF 2.0 技术（在服务器端拥有这些信息并将其用于身份验证）。

你认为有可能吗？

我使用带有 JDBCRealm 和 FORM 身份验证方法的 Tomcat 7。

# ruby-on-rails - 独角兽未能在 USR2 信号上产生工人

> ID：13824634
> 
> 赞同：6
> 
> 时间：2012-12-11T16:44:28.277
> 
> 标签：ruby-on-rails, unicorn

我正在向主进程发送一个 USR2 信号，以便使用独角兽实现零停机部署。老主人死后，我收到以下错误：

```
adding listener failed addr=/path/to/unix_socket (in use)

unicorn-4.3.1/lib/unicorn/socket_helper.rb:140:in `initialize':
Address already in use - /path/to/unix_socket (Errno::EADDRINUSE) 
```

老主人在`before_fork`unicorn.rb 配置文件的块中被杀死。该进程通过不带守护程序 (-D) 选项的 upstart 启动。关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:01:18.747

好吧，事实证明，如果您希望能够进行零停机部署，则必须以守护模式 (-D) 运行。我在我的新贵脚本中更改了一些东西，现在它工作正常：

```
setuid username
pre-start exec unicorn_rails -E production -c /path/to/app/config/unicorn.rb -D
post-stop exec kill cat `/path/to/app/tmp/pids/unicorn.pid`
respawn 
```

# c# - 如何在 C# 中使用标准 JSON-serializer 处理 dbnull 值？

> ID：13824636
> 
> 赞同：0
> 
> 时间：2012-12-11T16:44:31.480
> 
> 标签：c#, json, wcf

我刚刚创建了一个带有 WebserviceHost 的 REST-ful 网络服务。如果用户发出 GET 请求，我有几种方法可以将 JSON 对象返回给用户。

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json, 
    UriTemplate = "appliances/{username}")]
List<object[]> GetAvailableAppliances(string username); 
```

此方法从数据库返回值。对象数组中有一些 dbnull 值，但标准 JSON 序列化器无法处理它。如果用户发出请求，则重置连接，但前提是列表中有 dbnull 值。

如何处理这些 dbnull 值？在序列化列表之前我是否必须更改值，或者是否有不同的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:48:12.483

就我个人而言，我永远不会让`DBNull`（最终是实现细节）超出数据访问代码；所以是的，我会在原产地对它们进行消毒。`null`通常是`DBNull`数据访问代码之外的理想替代品（尽管我个人认为它`DBNull` [甚至不应该存在](https://stackoverflow.com/a/9632050/23354)）。将所有内容视为`object`更清晰 - 如果可能的话，一些类型良好的对象也会有很长的路要走。

# umbraco - 使用 Media.makeNew 创建媒体文件夹时出错

> ID：13824637
> 
> 赞同：0
> 
> 时间：2012-12-11T16:44:34.093
> 
> 标签：umbraco

当我创建一个新的内容项时，我已经将我的 umbraco 升级到 4.7.1.1，我将它写在我的数据库中，我有一个任务调用一个相应地创建一个媒体文件夹的 web 服务

这适用于我计算机中的 WS（使用生产数据库），但是当我从生产服务器运行 WS 时，我在 media.createNew(name, new MediaType(1031), new User(0), parentId 上收到此错误):

节点：在控件集合中找不到与 DataEditorId cccd4ae9-f399-4ed2-8038-2e88d19e810c 匹配的 IDataType 控件。要更正此问题，请检查开发人员部分中的数据类型定义或确保正确安装了包/控件。====== at umbraco.cms.businesslogic.datatype.controls.Factory.GetNewObject(Guid DataEditorId) at umbraco .cms.businesslogic.property.Property.MakeNew(PropertyType pt, Content c, Guid versionId) 在 umbraco.cms.businesslogic.Content.createNewVersion() 在 umbraco.cms.businesslogic.Content.CreateContent(ContentType ct) 在 umbraco.cms .businesslogic.media.Media.MakeNew(String Name, MediaType dct, User u, Int32 ParentId) 在 Netcraft.Utilities.Common.MediaHandler.CreateNode(String name, Int32 parentId, Int32 contentId) 在 C:..\Common\MediaHandler .cs：Netcraft 的第 29 行。

dll 和配置是相同的，我知道他正在寻找文件夹控件.. 有什么问题？

代码完成后，会创建一个新文件夹，但是当我单击它时，我得到：

值不能为空。参数名称：无法为标签页内容上的文档 21741 检索内容类型文件夹上的属性内容 (27)。要解决此问题，请删除该属性并重新创建它。

更新：我查找了控件 ID（cccd4ae9-f399-4ed2-8038-2e88d19e810c），它是 MediaFolder，听起来像标准控件（？）

我应该在哪里检查它是否已安装？

我能够手动创建一个媒体文件夹，并从我的本地环境（我的计算机上指向产品数据库的网络服务）中创建一个媒体文件夹，在生产环境中创建一个媒体文件夹。这是什么意思？

我是 umbraco 新手 :)

谢谢！

伊格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:24:49.287

想通了..我正在使用的网络服务有一个没有媒体文件夹权限的应用程序池。解决了它！

# java - 我不能在构造函数之外使用数据库连接，为什么？

> ID：13824640
> 
> 赞同：1
> 
> 时间：2012-12-11T16:44:45.453
> 
> 标签：java, mysql, netbeans

为什么我不能在构造函数之外执行查询？我不能使用我在构造函数中声明的变量。为什么不？我是否必须将数据库连接放在带参数的方法中？

```
public class main extends javax.swing.JFrame
{
    DefaultListModel model = new DefaultListModel();

    public main()
    {
        initComponents();
        try
        {
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost/project", "root", "password");
            Statement stat = con.createStatement();
            ResultSet resultaat = stat.executeQuery(query);

            while (resultaat.next())
            {
                model.addElement(resultaat.getString(2));
            }
        }
        catch (Exception ex)
        {
            System.out.println(ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:46:31.360

> 我不能使用我在构造函数中声明的变量。为什么不？

因为，当它们在构造函数中声明时，它们被**限制在那个范围内**。您无法在构造函数之外访问它们。如果您想在构造函数之外使用它们，请将它们作为您应该首先做的**实例变量。**

你的班级应该是这样的：

```
public class DBConnection {
  Connection con=null;
  public DBConnection() {
    initComponents();
    try {
      conn = DriverManager.getConnection("jdbc:mysql://localhost/project","root","password");
    }
    catch(SQLException ex) {
    }
  }

  public void doDBOps() {
    String yourQuey="whatever";
    PreparedStatement stmnt = this.conn.preparedStatement(yourQuery);
    ResultSet rs = stmnt.executeQuery();
    //rest of your code 
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:47:36.017

con 在你的构造函数范围内。利用

`Connection con;`

作为类变量和构造函数

```
con = DriverManager.getConnection("jdbc:mysql://localhost/project","root","password"); 
```

只用这个。对所需变量执行相同操作。您需要在整个课程中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:53:36.900

看来您总体上正在寻找的是数据库的单例类。您可以在其他类中使用该类来访问现有的连接，而不是`DriverManager`每次都使用工厂来获取新的连接对象。

下面的样本是无耻地从[这里偷来的](http://www.coderanch.com/t/298222/JDBC/databases/Database-Connection-Singleton)

```
public class DBConnectionSingleton
{
  private static DBConnectionSingleton instance = null;
  private static Connection conn;
  private DBConnectionSingleton()
  {
    String dbDriver = ..
    String url = ..
    String username= ..
    String password = ..
    try
    {
      Class.forName(dbDriver);
      conn = DriverManager.getConnection(url, username, password);
    }
    catch (ClassNotFoundException cnfErr)
    {
      cnfErr.printStackTrace();
    }
    catch (SQLException err)
    {
      err.printStackTrace();
    }
  }

  public static DBConnectionSingleton getInstance()
  {
    if (instance == null)
      return new DBConnectionSingleton();
    else
      return instance;
  }
  public static Connection getConnection()
  {
    return conn;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:48:37.413

在方法或构造函数中定义的变量仅限于该范围。如果你想初始化一个变量并在你的类中使用它，你必须将它变成一个类字段（因此，将其范围扩大到类本身），并且按照惯例，定义一个`get`和/或`set`方法。

# python - 从python的列表中删除''

> ID：13824642
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:44:47.030
> 
> 标签：python, list, text

我有以下文本：[sherlock.txt](http://www.spoj.com/content/pdawyndt:sherlock.txt) 我想为其中的每个单词创建一个列表（标点符号是单词的一部分，因此不是单独的元素，例如：'glad.'）。我所做的是：

```
>>> def wordlist(text):
...    input= open(text,'r')
...    data= input.read()
...    input.close()
...    data=data.replace('\n',' ')
...    data=data.replace(chr(13),' ')
...    data=data.replace(chr(9),' ')
...    data=data.split(' ')
...    while '' in data:
...        data.remove('')
...    return data 
```

问题是它返回一个单词列表，但它需要大约。7秒这样做。有没有更快的方法来做到这一点？我知道 while 循环是这里的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T16:47:46.630

这不是在做吗？不带参数调用`split`会在所有空白字符上拆分字符串，从而消除那些`''`在它们被视为数据的一部分之前给您带来问题的字符。由于您将麻烦地将那些其他空白字符更改为`' '`，因此您不妨使用内置的默认行为免费获得相同的效果。

```
def wordlist(text):
    with open(text, "r") as fp:
        data = fp.read().split()
    return data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:07:00.040

为了论证的缘故，我们假设您无法从输入中获取空白字符串。显然，如果你能做到这一点，这是首选的方法。列表推导可以以其他方式删除它们：

```
data = [word for word in data if word] 
```

该`if`部分已简化，因为空字符串的计算结果为`False`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:48:45.083

是的，您可以只拆分字符串。

```
data.split() 
```

它将在空白处拆分并返回一个数组。

[拆分文档。](http://docs.python.org/2/library/stdtypes.html#str.split)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:51:30.707

我相信以下内容可以满足您的需求：

```
words = list(itertools.chain(*map(str.split, open('sherlock.txt')))) 
```

在我的机器上，这需要 16.5 毫秒。

通过删除对 的调用`list()`，可以将其转换为生成器，该生成器将在读取单词时返回单词，而不是将所有单词存储在内存中。

以下更简单，更快，但内存效率较低（这可能对较大的输入文件很重要）：

```
words = open('sherlock.txt').read().split() 
```

这大约需要 6.7 毫秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T16:52:07.747

尝试使用`split()`没有任何参数的函数。您不需要先做任何`replace`-ing，因为它会在**任何**空白处拆分。

```
def wordlist(text):
...    input= open(text,'r')
...    data= input.read().split()
...    input.close()
...    return data 
```

# c# - 如何从字符串中删除字符，列表中的字符除外

> ID：13824649
> 
> 赞同：1
> 
> 时间：2012-12-11T16:45:05.437
> 
> 标签：c#, regex, list, replace, character

这是我的字符串值：

```
string str = "32 ab d32"; 
```

这个列表是我允许的字符：

```
var allowedCharacters = new List<string> { "a", "b", "c", "2", " " }; 
```

我希望它变成：

```
str == " 2 ab   2"; 
```

我想用空格替换不在允许字符列表中的任何字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:48:16.327

没有正则表达式：

```
IEnumerable<Char> allowed = srVariable
    .Select(c => lstAllowedCharacters.Contains(c.ToString()) ? c : ' ');
string result = new string(allowed.ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:49:07.890

尝试这个：

```
string srVariable = "32 ab d32";
List<string> lstAllowedCharacters = new List<string> { "a", "b", "c", "2", " " };

srVariable = Regex.Replace(srVariable, "[^" + Regex.Escape(string.Join("", lstAllowedCharacters) + "]"), delegate(Match m)
{
    if (!m.Success) { return m.Value; }
    return " ";
});

Console.WriteLine(srVariable); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:51:38.573

正则表达式？正则表达式对于您要完成的工作可能有点矫枉过正。

这是没有正则表达式的另一种变体（将您修改`lstAllowedCharacters`为实际上是可枚举的**字符**而不是字符串[正如变量名称所暗示的那样]）：

```
String original = "32 ab d32";
Char replacementChar = ' ';
IEnumerable<Char> allowedChars = new[]{ 'a', 'b', 'c', '2', ' ' };

String result = new String(
  original.Select(x => !allowedChars.Contains(x) ? replacementChar : x).ToArray()
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T16:49:04.193

你为什么不使用[String.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T16:58:21.113

这是一个简单但高效的 foreach 解决方案：

```
Hashset<char> lstAllowedCharacters = new Hashset<char>{'a','b','c','2',' '};

var resultStrBuilder = new StringBuilder(srVariable.Length);

foreach (char c in srVariable) 
{
    if (lstAllowedCharacters.Contains(c))
    {
        resultStrBuilder.Append(c);
    }
    else
    {
        resultStrBuilder.Append(" ");
    }
}

srVariable = resultStrBuilder.ToString(); 
```

# routes - 如何定义一个catch all路由来处理can js中的404？

> ID：13824665
> 
> 赞同：1
> 
> 时间：2012-12-11T16:45:58.753
> 
> 标签：routes, canjs, canjs-routing

在 can.js 中定义处理 404 的全部路由的正确方法是什么，以便首先检查所有正确的路由？如果不匹配，这条路线将捕获它，我可以显示 404 消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:55:24.160

这些只是我深入研究源代码并进行一些测试所学到的一些东西......

如果我用单个参数定义了一个根，例如 can.route(":section") 并在地址栏中输入一个看起来像 "!#toronto/something/feasf" 的片段并且没有其他路由匹配它，目前可以将其视为上述路线并将其转换为“！#toronto%23something%23else”，根据为该路线生成的测试是正确的。

防止这种行为的方法是使用尾部斜杠定义路由， can.route(":section/") 在针对错误路由进行测试时，应将其重写为第一个匹配项“toronto”。如果您在控件中定义路由，这同样适用。

您必须在路由处理程序中捕获无效参数，或者如果将其提供给模型，则可以在回调中处理错误。但我认为从一开始就很清楚。

如果您出于某种原因仍想捕获不正确的路线，我已经进行了以下测试以捕获无效路线。我不建议这样做，因为它确实会在您的应用程序中产生不必要的开销。

```
can.route.bind('change', function(ev, newVal) {
    if (newVal === 'route') {
        var valid = false;
        $.each(can.route.routes, function(k,v) {
            if (new RegExp(v.test).test(window.location.hash)){
                valid = true;
                return; //exit loop
            }
        })

        if (!valid) {
            //handle the false route here
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T00:37:27.543

您可以在所有路线之后注册通配符

```
// Catch 404
router.register('.*', 'controller#action'); 
```

# email-attachments - sendgrid 是否支持使用 sendgrid Web API (xml) 和 C# HTTPWebRequest 发送带有“多个”附件的电子邮件？

> ID：13824668
> 
> 赞同：3
> 
> 时间：2012-12-11T16:46:16.600
> 
> 标签：email-attachments, sendgrid

当我尝试仅发送一个附件时，它可以正常工作，但是当我尝试发送多个附件时，它不起作用。

# syntax - 你如何用 Markdown 语法编写一个包含右括号的链接？

> ID：13824669
> 
> 赞同：24
> 
> 时间：2012-12-11T16:46:19.737
> 
> 标签：syntax, markdown

链接的 Markdown 语法非常简单：

```
[Example](http://example.com/) 
```

产生：

> [例子](http://example.com/)

但是如果链接本身包含一个右括号呢？

```
[Syntax](http://en.wikipedia.org/wiki/Syntax_(programming_languages)) 
```

产生：

> [语法](http://en.wikipedia.org/wiki/Syntax_%28programming_languages)）

这显然是坏的。

**编辑**

将网址放在引号中不起作用

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-10-16T23:05:55.230

有时您需要使用 %29 对 ) 进行编码。

```
[Syntax](http://en.wikipedia.org/wiki/Syntax_(programming_languages%29) 
```

例如：这是我能找到的在 Atom 编辑器中获得正确 Markdown 预览的唯一方法。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-11T16:49:42.947

您可以尝试转义字符：

```
[Syntax](http://en.wikipedia.org/wiki/Syntax_\(programming_languages\)) 
```

您还可以对字符进行编码

```
[Syntax](http://en.wikipedia.org/wiki/Syntax_%28programming_languages%29) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-15T21:17:06.153

我发现最可靠的方法是使用引用样式链接而不是内联链接。

```
Here is the wikipedia article on [Syntax][1]

[1]: http://en.wikipedia.org/wiki/Syntax_(programming_languages) 
```

正确呈现为

> 这是关于[语法的维基百科文章](http://en.wikipedia.org/wiki/Syntax_(programming_languages))

我发现对于某些网站，百分比转义括号会破坏 URL，尤其是锚点。例如，至少在我的 Firefox 版本中，这个 Android 文档链接不会直接将我带到[使用 percent encoding](https://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)的方法。但是这个带有[参考样式链接的链接](https://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface(java.lang.Object,%20java.lang.String))可以。

```
For example, at least in my version of Firefox, this Android documentation link
doesn't take me directly to the method [with percent encoding](https://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29). 
But this one with a [reference-style link][2] does. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-07T21:29:32.023

我发现在 url`<`周围使用`>`似乎可以解决问题。
在我们使用的两个内部系统中，使用降价。
您的里程可能会因其他系统而异。

```
[Test](<https://en.wikipedia.org/wiki/Slowloris_(computer_security)>) 
```

[测试](https://en.wikipedia.org/wiki/Slowloris_(computer_security))

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-23T23:18:10.427

你根本不必逃避它。

在 GitHub 上，我刚刚完成了以下操作，没有任何问题：

```
[Slowloris](https://en.wikipedia.org/wiki/Slowloris_(computer_security)) 
```

实际上，即使在这里您也可以直接使用它，如您[在此处](https://en.wikipedia.org/wiki/Slowloris_(computer_security))看到的那样。

# sql - 存储过程选择

> ID：13824677
> 
> 赞同：2
> 
> 时间：2012-12-11T16:46:36.533
> 
> 标签：sql, database, oracle

好吧，我一直在尝试构建一个 SP，以帮助我从名为 TIKEt 的表中获取所有字段，这是我的表 TIKET：

```
表票：
IDTIKET 类型编号
名词类型 VARCHAR2
社论类型 VARCHAR2
AUTOR 类型 VARCHAR2
EDICION 类型 VARCHAR2
PRECIO 型号
候选人类型号码，
FECHA TYPE DATE 默认 sysdate
NOMBRE_USER 类型 VARCHAR2
```

这是我的 SP 代码：

```
`create or replace procedure get_tiket
(
 idtiket_ out number,
 nombres_ out varchar2,
 editorial_ out varchar2,
 autor_ out varchar2,
 edicion_ out varchar2,
 precio_ out number,
 cantidad_ out number,
 fecha_ out date,
 nombre_user_ in varchar2
)
is 
begin
select idtiket, nombre, editorial, autor, edicion, precio, cantidad, fecha into idtiket_, nombres_, editorial_, autor_, edicion_, precio_, cantidad_, fecha_ from tiket
where nombre_user=nombre_user_;
end; 
```

/`

当我在 SQLPLus 中运行此代码时说：“程序已创建”，我认为这意味着没关系？但是当我调用这个 Sp 时： exec get_tiket('ale'); 它给了我这个错误：

```
call get_tiket('ale'); 
```

> 第 1 行的错误：
> 
> ORA-06553: PLS-306: 调用“GET_TIKET”时参数的数量或类型错误

我想要的是根据我需要的用户从表 TIKET 中获取所有字段！请感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:58:06.507

你在存储过程中有一堆输出参数，你也必须传递它们：

```
DECLARE idtiket number;
-- other variables
BEGIN
  EXEC get_tiket(idtiket, ..... 'ale');
END; 
```

另外，我猜在这种情况下，函数会比过程更好......

# android - 如何将音频文件与新的视频文件合并？在 android 中可以吗？

> ID：13824679
> 
> 赞同：4
> 
> 时间：2012-12-11T16:46:47.397
> 
> 标签：android, audio, video, javacv, xuggler

我在android中使用javacv成功地从图像序列中获取了视频。现在我遇到的问题是如何将音频合并到新创建的视频中。在android或javacv集成中是否可能？

```
Here is my code,

            String path ="/mnt/sdcard/Video_images"; 

    File folder = new File(path);

    File[]    listOfFiles = folder.listFiles();  
        if(listOfFiles.length>0)
        {

      iplimage = new opencv_core.IplImage[listOfFiles.length];

       for (int j = 0; j < listOfFiles.length; j++) {

         String files="";       

       if (listOfFiles[j].isFile()) 
       {
       files = listOfFiles[j].getName();
       System.out.println(" j " +j   + listOfFiles[j]);
         }   

        String[] tokens = files.split("\\.(?=[^\\.]+$)");
       String name=tokens[0]; 

    Toast.makeText(getBaseContext(), "size"+listOfFiles.length, Toast.LENGTH_SHORT).show();    

      iplimage[j]=cvLoadImage("/mnt/sdcard/Video_images/"+name+".jpg");

       }

    } 

//         

                                 FFmpegFrameRecorder recorder = new    
                    FFmpegFrameRecorder("/mnt/sdcard/Video_images      

                   /output"+System.currentTimeMillis()+".mp4",200,150);                                                                                      

         try {
             recorder.setVideoCodec(a); //CODEC_ID_MPEG4 //CODEC_ID_MPEG1VIDEO

             recorder.setFrameRate(24);                     
             recorder.setPixelFormat(PIX_FMT_YUV420P); //PIX_FMT_YUV420P

             recorder.start();

            for (int i=0;i<iplimage.length;i++)

               {

                 recorder.record(iplimage[i]);

                }
             recorder.stop();
            }
         catch (Exception e){
             e.printStackTrace();
           } 
```

在这段代码中，如何合并我的音频文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:17:56.743

Android 中没有用于合并视频文件的功能。如果您需要在设备上执行此操作，您将需要找到一些可以为您处理的 Java JAR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:27:48.987

使用最新版本的 javacv 应该是可能的，可以从[这里](https://code.google.com/p/javacv/downloads/detail?name=javacv-0.5-bin.zip&can=2&q=)下载。

如果您想在创建 mp4 时将音频与视频合并，以下是您的代码的想法：

```
 FFmpegFrameGrabber grabber1 = new FFmpegFrameGrabber("song.mp3");   
    grabber1.start(); 
    FFmpegFrameRecorder recorder = new    
    FFmpegFrameRecorder("/mnt/sdcard/Video_images/output"+System.currentTimeMillis()+".mp4",200,150, grabber1.getAudioChannels());   

    try {
        recorder.setVideoCodec(a); //CODEC_ID_MPEG4 //CODEC_ID_MPEG1VIDEO
        recorder.setFrameRate(24);                     
        recorder.setPixelFormat(PIX_FMT_YUV420P); //PIX_FMT_YUV420P            
        recorder.start();

        com.googlecode.javacv.Frame frame1 = new com.googlecode.javacv.Frame();
        for (int i=0;i<iplimage.length;i++)
        {
            frame1 = grabber1.grabFrame();
            recorder.record(frame1);
            recorder.record(iplimage[i]);
        }
        recorder.stop();
        grabber1.stop(); 
```

这可能不是 100% 正确，但应该是一个很好的起点。当然，在尝试记录之前，您要确保 frame1 不为空。

# java - 在位置 0 处插入字节并右移剩余的数据位

> ID：13824680
> 
> 赞同：3
> 
> 时间：2012-12-11T16:46:54.300
> 
> 标签：java, bit-manipulation, iso8583

我真的很难完成这篇文章，任何想法或指示都会对我有很大帮助。这是我的问题：

1.  我正在研究[ISO 8583](http://en.wikipedia.org/wiki/ISO_8583)层，数据元素 32 定义为 n ..11，这意味着该元素是数字、可变长度，最大大小为 11。

2.  这需要以二进制格式（不是 ASCII）发送。

3.  我们需要显示 LLNN，ex ISO 二进制原始文件应如下所示：11 06 01 04 00 00 00

到现在为止，我能够用 BCD(06 01 04 00 00 00) 填充大小为 6 的 (11/2)+(11%2) 字节 [] 数组。我得到了计算为 11 的字段的总长度，现在我需要在 byte[0] 处插入它，其中 11 不是 0B 即 0001 0001 打包到一个字节`byte[]`为 11 ，当我给出 nBytes=1 时，我的逻辑如下所示（BCD ISO 中的前 255 个字符）它将长度字段值插入为 0b 01 04 00 00 00，或者如果我将 nBytes 作为 2 传递，则它给出 00 0b 04 00 00 00。正确的移位逻辑出了点问题。 .

有人可以帮助我并更正以下逻辑以使结果为 11 06 01 04 00 00 00

```
int nBytes=1;
for (int i = nBytes - 1; i >= 0; i--) {
    buf[i] = (byte)(length & 0xFF);
    length >>= 8;
}
outstream.write(buf); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:38:42.867

我认为[这个函数](http://ideone.com/2A0cCB)执行你正在寻找的 BCD 转换：

```
class T {
    public static byte toBCD(int n)
    {
        // a*10 + b -> a*16 + b;
        byte a = (byte)(n / 10);
        byte b = (byte)(n % 10);

        return (byte) (a * 0x10 + b);
    }

    public static void main(String[] args)
    {
        assert(toBCD(11) == 0x11);
        assert(toBCD(28) == 0x28);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:30:28.140

我终于使用了两个字节数组对象。一个持有原始请求并以十进制计算字段的长度并将其放在第一个位置，即辅助字节数组的 0 索引并将原始字节数组附加到此位置。

# ruby-on-rails - Form_For 未定义的方法路径

> ID：13824682
> 
> 赞同：2
> 
> 时间：2012-12-11T16:46:58.690
> 
> 标签：ruby-on-rails, nested-routes, nested-form-for

我正在尝试嵌套资源：

我的路线：

```
 resources :conversations do
    resources :replies do
      resources :comments
    end
  end 
```

我能够获得用于对话的回复表单，但现在我增加了获取评论以处理回复的额外复杂性。

整个表格都在对话显示路径下。

```
<%= form_for([@conversation, @reply]) do |f| %>
    <%= render 'shared/response_form', f: f %>
    <%= f.submit "Reply", class: "btn btn-large btn-primary" %>
<% end %> 
```

上面的回复表单可以正常工作并且没有错误，下面的评论表单会出错：

未定义的方法“reply_comments_path”

```
<%= form_for([@reply, @comment]) do |f| %>
    <%= render 'shared/response_form', f: f %>
    <%= f.submit "Comment", class: "btn btn-large btn-primary" %>
<% end %> 
```

这是我的对话控制器，这是我认为问题所在：

```
 def show
    @conversation = Conversation.find(params[:id])
    @replies = @conversation.replies
    @reply = current_user.replies.build
    #If I change the above line to @conversations.replies.build 
    #it breaks the ability to show replies above the form.

    @comments = @reply.comments
    @comment = @reply.comments.build    
  end 
```

但是，其他人建议这样做：

```
<%= form_for([@conversation, @reply, @comment]) do |f| %>
    <%= render 'shared/response_form', f: f %>
    <%= f.submit "Comment", class: "btn btn-large btn-primary" %>
<% end %> 
```

但它只是以一个路由错误结束：

```
No route matches {:controller=>"comments", :format=>nil, :conversation_id=>#<Conversation id: 3, content: "Goes here.", user_id: 1, created_at: "2012-12-10 21:20:01", updated_at: "2012-12-10 21:20:01", subject: "Another conversation">, :reply_id=>#<Reply id: nil, content: nil, user_id: 1, created_at: nil, updated_at: nil, conversation_id: nil>} 
```

当我尝试制作新表单时，我总是会遇到这个未定义的方法路径错误，而且我总是设法忘记我做错了什么。答案似乎从来都不是路线。

编辑：

在控制器的创建部分下，我有：

```
@replies = @conversation.replies
@reply = current_user.replies.build
#If I change the above line to @conversations.replies.build 
#it breaks the ability to show replies above the form. 
```

我不知道为什么 @reply = @conversation.replies.build 会破坏显示现有回复的能力。我收到一条错误消息，说它无法将 nil 转换为数字，并且看不到 reply.created_at 或 reply.content。无论是什么原因，这都可能是我为什么会遇到这个问题的线索。但是，在我正在使用的回复控制器中

```
@reply = conversation.replies.build(content: params[:reply][:content], user_id: current_user.id) 
```

编辑：

补充一下，Stackoverflow 的功能与我在这里想要实现的非常相似，只是您可以对问题和答案发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:58:15.017

查看错误的结尾：

```
... :reply_id=>#<Reply id: nil, content: nil, user_id: 1, created_at: nil, updated_at: nil, conversation_id: nil>} 
```

`@comment`如果`@reply`未保存，您无法创建表单。您需要`@reply`在创建之前坚持下去`@comment`。

如果您尚未验证回复模型，请尝试对显示操作进行此简单测试：

```
# @reply = current_user.replies.build
@reply = current_user.replies.create 
```

答案见评论。

# asp.net - 相同的 MSBuild 文件，本地机器和 CCNet 上的不同结果

> ID：13824683
> 
> 赞同：1
> 
> 时间：2012-12-11T16:47:03.150
> 
> 标签：asp.net, iis, msbuild, cruisecontrol.net, ccnet-config

## 背景

我正在使用以下内容：

*   对比 2012
*   .NET 4.5 应用程序，包括 MVC4 应用程序、C# 域应用程序和 NUnit 项目。
*   自定义 MSBuild 文件
*   CruiseControl.NET 在构建服务器上运行

我有以下构建目标：

*   Clean：删除 buildartifacts 目录
*   Init：创建一个空白的 buildartifacts 目录
*   编译：编译解决方案
*   测试：运行 NUnit 测试
*   包：创建一个用于部署的 ZIP 包
*   部署：将包部署到远程 IIS 服务器

## 问题

*   当我从本地机器运行构建时，它会完美地打包和部署。
*   当 CCNet 运行相同的构建目标时，文件似乎已部署

## 尝试的解决方案/潜在的潜在客户

*   我在两台机器上都在 PowerShell 中运行了相同的目标，并且都没有看到任何错误或警告。
*   因为我告诉 CCNEt 覆盖框架以将其指向我已复制到构建服务器的 .NET 4.5 文件，所以我在运行 MSBuild 时使本地计算机指向相同的文件，但我的本地构建仍然可以工作和部署。
*   在 Visual Studio 中，我确保所有内容文件都标有“内容”的构建操作和“始终复制”的复制到输出设置。

## 编码

*   可在[https://gist.github.com/53ef2a63931d190593f6的要点中获得](https://gist.github.com/53ef2a63931d190593f6)
*   （文件已被清理，应用名称和凭据已被替换等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:02:15.060

事实证明，这是一个完全不相关的问题。

在对两个构建日志进行了比较之后，我注意到构建服务器工作副本包含不再存在的旧文件。这使我发现问题最终是存储库没有被更新。

CCNet 收到一个未注册为错误的 subversion 错误 结果，我从未获得过最新版本的存储库，因此所有文件都损坏了。

该错误与[此 StackOverflow 问题](https://stackoverflow.com/questions/11697446/permissions-and-svn-updates-on-windows-server-2008-same-folder-svn-account-d)有关，涉及尝试使用 tortoisesvn 更新时的 sqlite 错误。我的解决方案是简单地删除构建服务器的工作副本，重新创建文件夹，然后执行 svn 签出。

# android - Android Activity 堆栈 onCreate 顺序

> ID：13824686
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:47:09.963
> 
> 标签：android, android-activity

我有一个带有 2 个主要活动的 Android 应用程序。当应用程序从头开始时，两个活动都可以正常启动和运行。类似于：A -> B。活动 A 完成了 A 和 B 所需的所有初始化。我在真实硬件和模拟器上进行的所有本地测试，A 总是在创建 B 之前创建（onCreate）。

但是，在我的应用程序的崩溃报告中，我看到了一个异常，只能通过 B 在没有或之前启动 A 来解释。这可能吗？Android 会在不为我的应用程序创建其他活动的情况下创建一个内部活动（B 没有 A）吗？Activity 创建的顺序是否有保证（A 然后 B）？我将如何使用模拟器或真实硬件重新创建这些场景中的任何一个？

无论首先启动哪个 Activity，我都可以轻松地移动我的初始化代码来工作，但是我想在进行更改之前学习如何重现和测试。我浏览了文档，但它并没有真正帮助。

这是当用户按下“播放”按钮时启动任务 B 的代码：

```
private void handlePlayTouch()
{
    Intent intent = new Intent(getApplicationContext(), PlayActivity.class);
    startActivity(intent);      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:48:52.327

启动 Activity B 后，您按下主页按钮并将您的应用程序置于后台。如果可用内存非常低，系统会终止您的应用程序。如果您在应用程序终止后尝试切换到您的应用程序，系统将尝试恢复您的应用程序和活动 B，而无需先创建 A。

您可以使用 DDMMS 的设备视图手动停止您的应用程序，有一个红色的“停止进程”按钮。确保您应该在后台创建您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:52:49.380

就您而言，我建议您使用单个活动。在创建时，您可以准备好一切，然后做您需要的事情。如果您想确保某些内容只有在其他内容完成后才会执行，请使用 AsyncTasks。

在 doInBackground => 中进行初始化和 onPostExecute，然后执行您必须执行的操作。

只有在 doInBackground 完成后才会执行 onPostExecute。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

编辑：

您的结构不尊重 Android 中的良好编程习惯，但如果您必须保持这种结构，您至少应该为活动 A 使用“无法杀死”的服务。这将使您的代码更难作为一个简单的活动被破坏当您的应用程序将被置于后台，但仍有机会被销毁时。

要了解您的问题，请参阅 android 活动生命周期：

![在此处输入图像描述](../Images/7853d3190a84c519349cf5e047a86c03.png)

有关使用的服务，请参阅：

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

[http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/](http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/)

# java - 如何从 SVG 路径创建 BufferedImage？

> ID：13824691
> 
> 赞同：3
> 
> 时间：2012-12-11T16:47:25.487
> 
> 标签：java, svg

我试图找到这个答案（在谷歌和 Stackoverflow 上）但没有成功，但我确信之前一定有人问过这个答案，所以如果它存在，请随时向我指出答案。

目前，我有一个 Java servlet，它将一个 PNG 从磁盘加载到一个 BufferedImage 中，在其上写入文本，然后将 byte[] 流回客户端。

我的愿望是用渲染的 SVG 路径替换来自磁盘的 PNG，来自我在线获取的图标路径集合（例如*“M21.871,9.814 15.684,16.001 21.871,22.188 18.335,25.725 8.612,16.001 18.335,6.276z”*和*“M22.727,18.242L4.792,27.208l8.966-8.966l-4.483-4.484l17.933-8.966l-8.966,8.966L22.727,18.242z”*）。

我遇到了[Batik](http://xmlgraphics.apache.org/batik/)和[SVG Salamander](http://svgsalamander.java.net/)，但我很难理解如何使用它们中的任何一个来完成上述任务，最具体地说，如何将 SVG 路径渲染到 BufferedImage 中。我需要能够指定（a）图像的尺寸，（b）填充颜色和（c）&（d）笔画宽度和颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:52:02.863

[这](http://www.mail-archive.com/batik-users@xml.apache.org/msg00775.html)是一个基本上使用[Transcoder API](http://xmlgraphics.apache.org/batik/using/transcoder.html)的示例。

# bash - 为什么我的 bash 脚本中的 grep 结果没有按预期更新？

> ID：13824693
> 
> 赞同：1
> 
> 时间：2012-12-11T16:47:36.813
> 
> 标签：bash

我的操作系统是 CentOS 6.3。我有一个 bash 脚本，它获取 mysql 从属状态并为用户菜单提供一些操作。执行操作时，它会自行刷新。这是一个简化的示例：

```
#!/bin/sh
server_status_detect () { 
  rm -f /root/slave.status
  mysql -u${MYSQL_USER} -p${MYSQL_PASS} -e 'show slave status \G' 2>&1 1>/root/slave.status
  #some parsing of the file to see if threads are running and so on, done like this
  Slave_IO_Running=$(grep '\sSlave_IO_Running:' /root/slave.status | awk '{ print $2 }');
}
themenu () {
  clear
  server_status_detect
  echo -e "Slave running? "$Slave_IO_Running;
  echo "Available actions:"
  #print actions
}

while true
 do
   themenu
   read answer
  case $answer in
        e)  menu_network_pick;;
        d)  menu_mount_pick;;
        m)  menu_master_pick;;
        p)  menu_repair_replication_pick;;
        t)  menu_restart_replication_pick;;
        r)  menu_reboot_pick;;
        s)  menu_shutdown_pick;;
        *) continue;;
   esac
done 
```

一切都按预期工作，每次迭代都会重新创建状态文件，它包含实际数据。但是，脚本显示拳头解析数据！似乎它不会每次迭代都解析文件，它只是第一次解析，之后只显示它记住的结果。怎么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:24:05.363

我试图通过使用您的脚本来复制该问题，但我没有遇到您面临的问题。

你可以尝试更换

```
mysql -u${MYSQL_USER} -p${MYSQL_PASS} -e 'show slave status \G' 2>&1 1>/root/slave.status
Slave_IO_Running=$(grep '\sSlave_IO_Running:' /root/slave.status | awk '{ print $2 }'); 
```

和

```
date > /root/slave.status 
Slave_IO_Running=$(grep 'Dec' /root/slave.status | awk '{ print $4 }'); 
```

看看脚本是否显示刷新时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:23:50.663

真丢人！我犯了一个愚蠢的错误！

就在 grepping 之前，我有一个`if`which 在第二次和并发迭代中变为 false，因此 greps 甚至没有执行，因此变量保持不变。问题已关闭，bash 并不疯狂，一切都是关于人的 :)

# c# - 使用正则表达式在 Google 源代码中查找链接

> ID：13824695
> 
> 赞同：-2
> 
> 时间：2012-12-11T16:47:48.527
> 
> 标签：c#, html, regex

当您使用正则表达式搜索某些内容时，我正在尝试获取 Google 在首页上生成的 10 个网站的链接。我对正则表达式很陌生，并且在让它工作时遇到了很多麻烦：

```
MatchCollection links = Regex.Matches(indexPage, @"<h3 class=""r""><a href=""\s*(.+?)\s*"" class=l", RegexOptions.Multiline); 
```

一旦我在集合中获得链接，我将它们添加到此处的列表中：

```
foreach (Match link in links) {
    string result = link.Groups[1].Value;
    results.Add(result);
} 
```

它没有找到任何链接，任何帮助将非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:52:45.997

这会找到所有网址：

```
 "#^((?#
    the scheme:
    )(?:https?://)(?#
    second level domains and beyond:
    )(?:[\S]+\.)+((?#
top level domains:
)MUSEUM|TRAVEL|AERO|ARPA|ASIA|EDU|GOV|MIL|MOBI|(?#
)COOP|INFO|NAME|BIZ|CAT|COM|INT|JOBS|NET|ORG|PRO|TEL|(?#
)A[CDEFGILMNOQRSTUWXZ]|B[ABDEFGHIJLMNORSTVWYZ]|(?#
)C[ACDFGHIKLMNORUVXYZ]|D[EJKMOZ]|(?#
)E[CEGHRSTU]|F[IJKMOR]|G[ABDEFGHILMNPQRSTUWY]|(?#
)H[KMNRTU]|I[DELMNOQRST]|J[EMOP]|(?#
)K[EGHIMNPRWYZ]|L[ABCIKRSTUVY]|M[ACDEFGHKLMNOPQRSTUVWXYZ]|(?#
)N[ACEFGILOPRUZ]|OM|P[AEFGHKLMNRSTWY]|QA|R[EOSUW]|(?#
)S[ABCDEGHIJKLMNORTUVYZ]|T[CDFGHJKLMNOPRTVWZ]|(?#
)U[AGKMSYZ]|V[ACEGINU]|W[FS]|Y[ETU]|Z[AMW])(?#
the path, can be there or not:
)(/[a-z0-9\._/~%\-\+&\#\?!=\(\)@]*)?)$#i" 
```

# .net - 对 .NET 的 Karvonite NoSQL 文档数据库/持久性存储有任何经验吗？

> ID：13824700
> 
> 赞同：0
> 
> 时间：2012-12-11T16:48:07.647
> 
> 标签：.net, nosql, object-persistence

有没有人使用[Karvonite](http://www.karvonite.com/)作为 .NET 桌面应用程序的持久存储？我看到他们刚刚在 2012 年 11 月推出了新版本 5。

看起来很有希望：

*   数据模型的映射看起来很简单
*   非常轻量级的部署
*   与 .NET 生态系统的良好集成

似乎它可能是嵌入式 RavenDB 的轻量级替代品。

我认为它可能是 SQLite 的 NoSQL 等价物。

但是网络上的信息很少，这让我很担心。

你有什么经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T20:04:16.980

我在生产应用程序中使用了 Karvonite 4 版本，我对此非常满意。我需要在某种形式的持久存储中存储少量应用程序配置数据以及大约 10 到 100 条数据记录。

我在使用 SQL Compact Edition 和 Karvonite 之间进行了辩论。SQL Compact 很好，运行良好，但在升级和回滚数据库方面似乎更难处理。在我看来，它还在我的应用程序代码和持久存储机制之间建立了更紧密的耦合。

另一方面，Karvonite 让我几乎可以将我的应用程序代码与后端存储机制完全分开。我能够快速轻松地定义数据库以及升级和降级的迁移路径。当我有空闲时间利用一些新功能时，我期待升级到 Karvonite 5。

# python - 作为 Windows 服务运行时，python ssh/rsync 挂起

> ID：13824704
> 
> 赞同：0
> 
> 时间：2012-12-11T16:48:15.157
> 
> 标签：python, windows, service, ssh, rsync

我有一个脚本，它应该使用 rsync 将文件从 Linux 机器拉到我的 Windows 机器。我将它设计为 Windows 服务，并且该位似乎工作正常。rsync 和 ssh 可执行文件启动，连接到 Linux 机器，使用密钥进行身份验证，但不复制任何文件。这是脚本的核心，不包括大多数 Windows 服务内容。

```
import subprocess
RSYNCPULL = '''"C:\\Program Files\\cwRsync\\bin\\rsync.exe" --remove-source-files
           --no-motd -e "\'C:\\Program Files\\cwRsync\\bin\\ssh.exe\'"
           user@IP:/var/log/* /cygdrive/c/logs/'''

class LogCopy( win32serviceutil.ServiceFramework ):
   #various functions for starting/stopping the service
    def sleep( self, sec ):
        win32api.Sleep( sec*1000, True )
    def start( self ):
        self.runflag = True
        while self.runflag:
            subprocess.call( RSYNCPULL )
            self.sleep( 10 )  

if __name__ == "__main__":
    qin32serviceutil.HandleCommandLine( LogCopy ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:45:03.077

"*" 字符可能会被 Windows shell 解释并扩展。尝试：

*   在你的“*”之前加一个反斜杠。这样 rsync 将在连接的另一端为您扩展它
*   删除“*”，然后使用 rsync 的 -r 选项对目录进行递归复制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:45:56.740

发现它是什么。我正在作为系统运行任务。我在管理员帐户下设置了 ssh 密钥，但不是系统。所以 ssh 在提示时挂起以保存密钥。

# java - Tomcat/IntelliJ 运行失败

> ID：13824706
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:48:17.320
> 
> 标签：java, spring, tomcat, intellij-idea

使用 Intellij 和 Tomcat7，我正在尝试运行我的`war exploded`应用程序，但遇到错误。

使用 ANT（在 Intelij 之外）编译的相同应用程序工作正常，没有错误。

它失败并显示以下日志：

```
"C:\Program Files\Java\jdk1.7.0_07\bin\java" -Dcatalina.base=C:\Users\myname\.IntelliJIdea11\system\tomcat\Unnamed_my_portal_2 "-Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 7.0" "-Djava.io.tmpdir=C:\Program Files\Apache Software Foundation\Tomcat 7.0\temp" -cp "C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin\bootstrap.jar;C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin\tomcat-juli.jar" org.apache.catalina.startup.Bootstrap start
Dec 11, 2012 6:27:07 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0_07\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 11.1.3\bin\..\.\bin;C:\Program Files (x86)\IBM\RationalSDLC\common;C:\Program Files (x86)\IBM\RationalSDLC\Clearquest\cqcli\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\mycompany\Endpoint Security Agent\Endpoint Common\bin;C:\Program Files (x86)\Common Files\Check Point\UIFramework 3.0\Bin\;C:\Program Files (x86)\mycompany\Endpoint Security\Endpoint Common\bin;x:\Bin;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files (x86)\CVSNT\;c:\program files (x86)\jetbrains\intellij idea 11.1.3\jre\jre\bin;.
Dec 11, 2012 6:27:08 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Dec 11, 2012 6:27:08 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Dec 11, 2012 6:27:08 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1018 ms
Dec 11, 2012 6:27:08 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Dec 11, 2012 6:27:08 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.30
Dec 11, 2012 6:27:08 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Users\myname\.IntelliJIdea11\system\tomcat\Unnamed_my_portal_2\conf\Catalina\localhost\ROOT.xml
Dec 11, 2012 6:27:10 PM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
    at java.lang.Class.getDeclaredFields(Class.java:1760)
    at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:87)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationListenerAnnotations(WebAnnotationSet.java:90)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:65)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContext
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 25 more

Dec 11, 2012 6:27:10 PM org.apache.catalina.startup.HostConfig deployDescriptor
SEVERE: Error deploying configuration descriptor C:\Users\myname\.IntelliJIdea11\system\tomcat\Unnamed_my_portal_2\conf\Catalina\localhost\ROOT.xml
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Dec 11, 2012 6:27:10 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Dec 11, 2012 6:27:10 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Dec 11, 2012 6:27:10 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1930 ms
Connected to server 
```

我做错了什么？我需要做什么来解决这个问题？将来我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:52:43.703

使用行家？看起来您的部署配置中没有包含 Maven 依赖项。

在 applicationContext 上找不到一个类，这意味着您的部署环境找不到 spring jar。

在 intellij 中，确保在项目结构中正确添加库。

# c# - Fiddler 使 HttpWebRequest/HttpClient 行为出乎意料

> ID：13824717
> 
> 赞同：1
> 
> 时间：2012-12-11T16:48:46.207
> 
> 标签：c#, .net, httpwebrequest, fiddler

只是想问一下在启动 Fiddler 时尝试将某些文件上传到服务器时是否有人遇到了使用 HttpWebRequest 类（甚至是新的 HttpClient）的问题。

我遇到了这个bug，即启动fiddler时**HttpWebRequest类的****AllowWriteStreamBuffering**属性不起作用，所以上传进度根本不起作用。即使我将 AllowWriteStreamBuffering 设置为 true，字节也不会立即发送而是缓冲，因此我无法跟踪上传进度。未启动提琴手时可以正常工作。

 **此外，如果我在我的应用程序上传某些文件时关闭 fiddler，它也会崩溃并抛出 WebException，上面写着“*底层连接已关闭：接收时发生意外错误*。”

**新的 .net 4.5 HttpClient**类也发生了同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:04:17.170

对困惑感到抱歉; Fiddler 目前只支持*响应*流，不支持*请求*。

出于性能或功能（例如病毒扫描、断点调试）的原因，一些代理（如 Fiddler）或其他中介会在将请求发送到服务器之前完全缓冲请求。

[http://www.fiddler2.com/fiddler/help/streaming.asp](http://www.fiddler2.com/fiddler/help/streaming.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:12:47.160

好的，这引起了我的兴趣，看来 AllowWriteSteamBuffering 工作服务器必须支持[Chunked transfer encoding](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。这让我看到了这个关于代理和前面提到的分块编码的论坛帖子：[https](https://groups.google.com/forum/?fromgroups=#!topic/httpfiddler/UkOiK96kg_k) ://groups.google.com/forum/?fromgroups=#!topic/httpfiddler/UkOiK96kg_k 。

从我在这里读到的内容看来，使用代理时，您可能会或可能不会获得分块编码等，因此是您的问题。

我还发现这似乎是一篇关于上传反馈的很好的详细文章，这可能会有所帮助？

[http://blogs.msdn.com/b/delay/archive/2009/09/08/when-framework-designers-outsmart-themselves-how-to-perform-streaming-http-uploads-with-net.aspx](http://blogs.msdn.com/b/delay/archive/2009/09/08/when-framework-designers-outsmart-themselves-how-to-perform-streaming-http-uploads-with-net.aspx)**

# ibm-connections - 查找 URL 语法以从 IBM Connections 获取授权代码

> ID：13824719
> 
> 赞同：0
> 
> 时间：2012-12-11T16:48:48.793
> 
> 标签：ibm-connections, ibm-sbt

从提供的示例中，我得到了这个 URL，它应该为提供回调 URL 提供授权代码

https:// **CONNECTIONSHOSTNAME** /oauth2/endpoint/connectionsProvider/authorize?response_type=code&client_id=SocialDMS&callback_uri=http%3A%2F%2F_DEVELOPMENTHOSTNAME_%3A_DEVELOPMENTPORT_%2F_DEVELOPMENTServletPath_

socialdms 已注册为应用程序，但没有任何反应。callback_uri 可以从连接机器访问。

我可以在 Connections Server 上打开哪些日志记录来解决此问题？

callback_uri 应该启用 SSL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:41:14.123

该 URL 应将授权表单返回给最终用户。

callback_uri 是否与向 Connections 注册应用程序时提供的值匹配？

请为 com.ibm.ws.security.oauth20.*=all 启用日志记录并检查 trace.log 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:41:11.093

是的.. callback_uri 应该启用 SSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T04:59:28.730

回调 url 应该启用 SSL。

为此，您可能必须向连接服务器重新注册您的应用程序。这可能会有所帮助： [http ://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+documentation#action=openDocument&res_title=Registering_an_OAuth_client_with_a_provider_ic40&content=pdcontent](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+documentation#action=openDocument&res_title=Registering_an_OAuth_client_with_a_provider_ic40&content=pdcontent)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:01:48.337

回调 uri 中的 HTTPS 似乎可以解决问题

# java - MessageFormat 与 StringBuffer

> ID：13824720
> 
> 赞同：1
> 
> 时间：2012-12-11T16:48:50.170
> 
> 标签：java, string

我明白了，在 Java 中你可以用

*   `MessageFormat`和一个字符串`"You said {0} just now"`
*   `StringBuffer`和一个像

    ```
    StringBuffer mail = new StringBuffer("Dear ");
    mail.append(user.name);
    mail.append(",\nCongratulations!");
    .... 
    ```

*   可能还有其他不错的选择，字符串连接不是其中之一

那么，我应该使用哪种方法？我的想法是：我有 5-6 个标准文本，我必须在其中动态替换一些内容。我认为将文本作为常量放在某处（带有常量或属性文件的类）并在需要时进行快速替换会更好。否则，我的源代码中间会有可能有一天会更改的字符串，例如`StringBuffer("Dear ")`.

我有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:06:47.750

```
 String str = new StringBuffer().append("Hello").append("World").toString();
    System.out.println(str);

            //print Hello World 

             it contain into package import java.text.MessageFormat;
             "When you using Message format"
              Object[] values = { "123456", "asdfjk" };

    String output = MessageFormat.format("Value 1 equals: {0} and Value 2 equals{1}", values);
    System.out.println(output);
    // prints:
    // The value of value 1 is: 123456 The value of value 2 is: asdfjk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:15:54.907

你应该相信最简单最清楚的。我个人会使用

```
String mail = "Dear " + user.name + ",\nCongratulations!"; 
```

它比使用 StringBuffer 或 MessageFormat 更短、更高效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:51:08.533

如果是您想要生成的电子邮件，我不推荐这两种方法。我宁愿看到一个 Velocity 模板，用于在其上下文中映射来自 Java 对象的值的信件或电子邮件正文。这将更容易理解和维护。模板可以从您的代码外部化，因此更改更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-12T08:51:56.417

正如各种评论`StringBuilder`中所建议的那样，字符串连接的最快实现。`MessageFormat`内部使用`StringBuilder`正则表达式开销。

# c# - 如何在我的 windows phone 7 应用程序的项目中填充文件的列表框

> ID：13824721
> 
> 赞同：1
> 
> 时间：2012-12-11T16:48:50.563
> 
> 标签：c#, windows-phone-7.1

我想在我的 wp7 应用程序中使用一个列表框，我想在其中显示特定目录中存在的所有文件的名称。我已经在我的项目本身中添加了包含所有文件的文件夹。我想填充该文件夹中的所有文件名。我怎样才能访问它？我正在使用它来绑定列表

```
string[] files = Directory.GetFiles("C:\\Users\\sony\\Documents\\Visual Studio 2010\\Projects\\MyChristmas\\MyChristmas\\recipe");
          foreach (string f in files)
            {
                string entry1 = System.IO.Path.GetFullPath(f);
                string entry = System.IO.Path.GetFileName(f);
                listBox1.Items.Add(entry);
} 
```

这可能是非常基本的，但我是一名学生，我自己学习这一切，所以请帮忙。

# java - 是否有任何带有表函数的 .NET 和 Java 库？

> ID：13824726
> 
> 赞同：3
> 
> 时间：2012-12-11T16:49:09.187
> 
> 标签：java, .net

是否有任何带有表函数的 java 或 .net 库？

“表函数”是指以表作为输入和输出参数的函数，例如：

`T3 = f(T1, T2)``T1`, where`T2`和`T3`是表。

我们从线性代数中知道的矩阵乘法例如是一个矩阵函数：

```
M3 = M1 x M2 = f(M1, M2). 
```

同样，会计或财务规划中经常使用的分布函数是典型的表函数。例如，将每个部门的成本进一步分配给团队。

```
CostTable = costs(department, year), KeyTable = DitsributionRatio(department, team) --> DistributedCostTable = DistributionFunc(CostTable, KeyTable). 
```

例如，SAP 的业务计划工具提供了诸如分配/分配之类的标准表格功能。SAP FOX 公式也是具有用户定义公式的表函数。

这些是高级函数，用于捕获财务规划等应用程序中的一般计算模式，或金融服务中的费用计算。无需任何数据库或任何其他类型的编程，只需为可用的表函数设置参数（即通过配置），就可以完成整个计算。这就是表函数背后的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:54:04.600

如果您的表格只包含数字，那么它们可以表示为矩阵。我发现了这个库：

[http://code.google.com/p/efficient-java-matrix-library/](http://code.google.com/p/efficient-java-matrix-library/)

看起来正是您需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:53:01.807

您的主要选择是：

*   [贾马](http://math.nist.gov/javanumerics/jama/)

*   [阿帕奇公地](http://commons.apache.org/math/userguide/linear.html)

*   [EJML](http://code.google.com/p/efficient-java-matrix-library/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:32:54.140

```
Department No 
           D1,D2,D3....DN----finance array of N Objects[N]
           D4,D5.D6....DM----accounting array of M Objects[M]
           D7,D8,D9 ...DK-----marketing array of K Objects[K]
For each department cost per year shown in monthly basis 
 (  departemtn) finance D1= C1  C2  C3  C4      
                            C5  C6  C7  C8
                            C9 C10 C11 C12
    .
    .
    .
 (  departemtn) finance   DN=   C1  C2  C3  C4
                                C5  C6  C7  C8
                                C9 C10 C11 C12

 (  departemtn) accounting D4= C1  C2  C3  C4      
                               C5  C6  C7  C8
                               C9 C10 C11 C12
    .
    .
    .
 (  departemtn) accounting     DM=   C1  C2  C3  C4
                                     C5  C6  C7  C8
                                     C9 C10 C11 C12

(  departemtn) marketing D7=   C1  C2  C3  C4      
                               C5  C6  C7  C8
                               C9 C10 C11 C12
    .
    .
    .
 (  departemtn) marketing    DK=   C1  C2  C3  C4
                                   C5  C6  C7  C8
                                   C9 C10 C11 C12

I exactly donot know what urs clear requirement is .But,you can start this way.But,its better to use arraylist of you have different variation of objects . 
```

# vb6 - 如何在 Visual Basic 6 中使用滚动条？

> ID：13824730
> 
> 赞同：2
> 
> 时间：2012-12-11T16:49:19.200
> 
> 标签：vb6, scrollbar, windows-applications

我在 VB 6 中的 Windows 应用程序有一个包含大量控件的表单。如果客户端环境的屏幕尺寸较小，则大多数控件都不会出现。我想做的是为用户提供一个垂直和水平滚动条，以便用户可以滚动所有控件。任何人都知道如何实现这一点？

PS请不要提供仅显示标签以显示滚动值的示例:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:49:08.680

我喜欢大卫的回答，但如果你想用滚动条做到这一点，首先，你需要将所有控件放入适合它们的框架中。您想要移动 1 个控件，而不是“大量控件的地狱”。其次，将滚动条放入表单中，并在**Form_Resize**事件中添加一些代码来调整滚动条的大小。调整滚动条的大小后，您需要做一些数学运算来设置**Max**、**SmallChange**和**LargeChange**属性。我展示**Min**属性只是为了让您知道它永远不会改变，只需在设计器中设置它即可。此示例仅使用水平滚动条，因为我也懒得包含垂直滚动条。最后，将代码添加到滚动条 Change 事件以移动框架。

```
Private Sub Form_Resize()

    HScroll1.Move 0, Me.ScaleHeight - HScroll1.Height, Me.ScaleWidth
    HScroll1.Min = 0
    HScroll1.Max = Frame1.Width - Me.ScaleWidth
    HScroll1.SmallChange = HScroll1.Max / 100
    HScroll1.LargeChange = HScroll1.Max / 10

End Sub

Private Sub HScroll1_Change()

    Frame1.Left = -HScroll1.Value
    DoEvents ' this is not strictly necessary, but smooths the scolling some

End Sub 
```

您还需要错误处理代码。我是一个懒惰的示例编码器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T17:12:03.913

一种方法是使用 Windows API 调用打开表单的滚动条。这与使用 ScrollBar 控件不同；例如，打开表单自己的滚动条可以防止滚动条干扰标签顺序。

这是一个很好的页面，解释了如何做到这一点，以及一个帮助类：

[http://www.vbaccelerator.com/home/VB/Code/Libraries/Subclassing/Adding_Scroll_Bars_To_Forms__P​​ictureBoxes_and_UserControls/article.asp](http://www.vbaccelerator.com/home/VB/Code/Libraries/Subclassing/Adding_Scroll_Bars_To_Forms__PictureBoxes_and_UserControls/article.asp)

# python - 如何在 wx.GridBagSizer 中实现 wx.TextCtrl？

> ID：13824731
> 
> 赞同：0
> 
> 时间：2012-12-11T16:49:23.337
> 
> 标签：python, wxpython

这是我的代码： http: [//pastebin.com/WwZri3e3](http://pastebin.com/WwZri3e3)

我想知道如何在每个标签名字姓氏和用户名的右侧实现一个文本框。

wxpython 文档很差，我尽我所能来获得更好的 wxpython 学习体验，而此刻我只是在空中摇摆。

我发现学习其他代码比阅读文档更有帮助。

谁能提供一些见解？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:43:40.723

我通常只使用 GridBagSizer 和一些定位变量来保持灵活性。

暂存器版本如下所示：

```
self.gbs = wx.GridBagSizer(hgap=5, vgap=5)
lbl_name_first = wx.StaticText(self.panel, label = "First Name :" )
txt_name_first = wx.TextCtrl(self.panel,size=(200,-1))
self.gbs.Add(lbl_name_first, pos=(1, 1))
self.gbs.Add(txt_name_first, pos=(1, 2)) 
```

如果您为水平定位定义一些“常量”并为垂直定位定义一个行数，事情开始看起来像下面的代码。当需要在某处创建一点额外空间时，命名列和跨度真的很方便。

```
# all caps mark 'constants'
COL_LEFT_LABEL = 2
COL_LEFT_FIELD = 3
SPAN_FULL_WIDTH = 4
nRowPosition = 1

lbl_name_first = wx.StaticText(self.panel, label = "First Name :" )
txt_name_first = wx.TextCtrl(self.panel,size=(200,-1))
self.gbs.Add(lbl_name_first, pos=(nRowPosition, COL_LEFT_LABEL))
self.gbs.Add(txt_name_first, pos=(nRowPosition, COL_LEFT_FIELD), flag=wx.EXPAND, span=(1, SPAN_FULL_WIDTH))
nRowPosition += 1 
```

您可以（并且应该）进一步完善它，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:16:46.510

我通常做一个水平 boxsizer

```
def addWithLabel(parent,label,wxCtrl):
       sz_h1 = wx.BoxSizer(wx.HORIZONTAL)
       txt = wx.StaticText(parent,-1,label)
       sz_h1.Add(txt)
       sz_h1.Add(wxCtrl)
       return sz_h1

my_vertical_sizer.Add(addWithLabel(my_parent,"Some Label:",wx.TextCtrl(my_parent,-1))) 
```

或者，您可以将 gridbagsizer 添加到 boxsizer 中，而不是相反...

# php - 不需要的页面爬行

> ID：13824738
> 
> 赞同：2
> 
> 时间：2012-12-11T16:50:04.990
> 
> 标签：php

> **可能重复：**
> [如何检测假用户（爬虫）和 cURL](https://stackoverflow.com/questions/12257584/how-to-detect-fake-users-crawlers-and-curl)

我网站的某些页面被不受欢迎的抓取。

说像这样的页面

abc.com/smarty/templates/1.html

abc.com/smarty/templates/2.html

abc.com/images/1.jpg

abc.com/images

*   我想避免将这些页面编入索引
*   还想从谷歌索引中删除这些页面。

我知道使用 apache 设置来做到这一点。但是由于我使用的是共享网络，所以我无法访问这些网络。

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:55:03.500

您可以使用文本文件 robots.txt，搜索引擎会找到该文件并告诉他们可以和不可以在您的网站中索引哪些页面。

这是一篇关于如何编写此文件的好文章： [Robots.txt：它是什么，为什么使用它以及如何编写它](http://seoroi.com/seo-faq/robotstxt-what-it-is-why-its-used-and-how-to-write-it/)

* * *

[此处](https://stackoverflow.com/questions/2710665/remove-deleted-page-from-google-search-results)讨论了从 Google 中删除页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:01:57.673

在 robots.txt 添加规则，如

```
User-agent:    *
Disallow:   /smarty/*
Disallow:   /images/* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:06:25.377

www.google.com/webmasters/tools/

![站长工具图片！](../Images/b7419e33bde5517a18c79af6b679f5cb.png)

您可以以 google 的身份获取页面您可以从 google 的索引中删除页面，您可以上传您的站点地图等等。我认为这正是您正在寻找的。

# php - 多个 MySQL 数据库的事件调度程序

> ID：13824739
> 
> 赞同：0
> 
> 时间：2012-12-11T16:50:18.397
> 
> 标签：php, mysql

我试图弄清楚是否有可能让 EVENT SCHEDULER 从一个数据库中获取数据并将其更新到另一个数据库。我检查了 mysql 网站和谷歌，但没有任何信息。我知道如何创建事件并了解流程。我正在考虑使用 php 和 mysql，但不确定这是否可行。

**为什么我需要这个：**

数据库 A - 获得大量流量 数据库 B - 获得少量流量

我想运行某些查询（主要计数）每天从数据库 A 运行一次。然后将结果存储在数据库 B 中。这样，当一些加载必须进行计数的页面时，它不会运行计数查询，而只是SELECT * FROM database B. 使其加载速度更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:56:32.863

我认为您需要做的是复制您的数据库！

例如，您可以将数据库“A”指定为发布者，将数据库“B”指定为订阅者。互联网上有很多关于复制 MySQL 数据库的文章。谷歌并找出答案。[无论如何，请在每天特定时间的 MySQL Event Scheduler 上](https://stackoverflow.com/q/3070277/1187031)查看这个问题。这可能会让您对要实现的目标有所了解。

# java - 读取一行文本文件，拆分为数组

> ID：13824742
> 
> 赞同：7
> 
> 时间：2012-12-11T16:50:29.967
> 
> 标签：java, arrays, file, text, split

我正在从一个看起来完全像这样的文本文件中读取一长串信息：

`Sebastien 5000\\Loic 5000\\Shubhashisshh 5000\\Thibaullt 5000\\Caroo 5000\\Blabla 5000\\Okayyy 5000\\SebCed 5000\\abusee 5000\\omg 5000\\`

它应该是用户名的高分。当我打印出该行时，它看起来完全像它应该的那样，但是当我在 using 之后打印出数组时`split("\\\\")`，它看起来像这样：

`[Sebastien 5000, , Loic 5000, , Shubhashisshh 5000, , Thibaullt 5000, , Caroo 5000, , Blabla 5000, , Okayyy 5000, , SebCed 5000, , abusee 5000, , omg 5000]`

问题是这`Array[0]`很好但是`Array[1]`是空的，就像`Array[3]`,`Array[5]`等等一样。

这是我的代码。它出什么问题了？

```
 BufferedReader in = null;
    try {
        in = new BufferedReader(new FileReader(path));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    String line = null;
    try {
        line = in.readLine();
    } catch (IOException e) {
        e.printStackTrace();
    }
    System.out.println("LINE = "+line);

    String[] scores = line.split("\\\\");

    System.out.println("Mode = "+mode+Arrays.toString(scores)); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T16:57:55.963

那是因为`"\\\\"`is 被解析为`\\`并且[split 方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)使用了正则表达式，所以`\\`become `\`，然后`Sebastien 5000\\Loic 5000`会导致`[Sebastien 5000,,Loic 5000]`

改为这样做：`"\\\\\\\\"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T17:24:43.270

只是为了好玩，除了 José Roberto 解决方案之外，您还可以使用一些替代表达方式（以及许多其他表达方式）：

两个连续的反斜杠（与 José 相同，但使用量词）：

```
String[] scores = line.split("\\\\{2}"); 
```

两个连续的非单词字符：

```
String[] scores = line.split("\\W{2}"); 
```

两个连续的标点字符：

```
String[] scores = line.split("\\p{Punct}{2}"); 
```

它们都产生所需的输出。

有关 Java 中的正则表达式的更多信息：

*   [类模式 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)
*   [Java 正则表达式教程](http://docs.oracle.com/javase/tutorial/essential/regex/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:10:57.640

我会比尼克更进一步：

`line.split("\\\");`

此视图假定您尝试在出现双反斜杠的每个点拆分行 - 似乎您的代码在每个备用双斜杠处拆分，这将解释每个名称之间的双逗号；因此，在每个拆分部分之间（即逗号之间的每个部分，都有两个条目而不是一个，因此一个条目只是一个逗号）。看看这是否有效 - 祝你好运！

M。

# javascript - 在 web 应用程序（如天气应用程序）上模仿 iPhone 滑动视图

> ID：13824750
> 
> 赞同：1
> 
> 时间：2012-12-11T16:51:00.353
> 
> 标签：javascript, iphone, css, html, web-applications

我正在尝试找到一个 Javascript 片段，我可以使用 Javascript 和 CSS3 归档 iOS 的 UIScrollView + UIPageControl 效果。

将页面控件生成到每个视图的一个点并进行切换非常容易，但复杂的部分是进行弹性移动。

![UIPageControl](../Images/3c8d235205ff1280c916d25aecb87ae4.png)

我想自己做这件事，但对我来说似乎有很多工作，比如工作时间，尝试谷歌搜索，但我什么也没找到。我不喜欢 JQuery，但移动框架似乎没有这样做。

![UIScrollView UIPageControl](../Images/6166468dce24f3a833c5d3bd180a381d.png)

如果我必须自己做，你们有什么建议的方法吗？我正在考虑使用父 div，每个视图都有一堆 div。使用带有溢出的父级：隐藏；并将事件附加到父视图并监听拖动并绑定到水平滚动偏移量。这会是个好方法吗？或者使用带有或 translate-x 的 css 过渡`left`会更流畅？

编辑：这是我尝试过的（不是很好）：[JSFIDDLE](http://jsfiddle.net/Victornpb/pUa75/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:25:14.523

是的，

我不确定触摸滑动，尽管我认为“激活”或“触摸启动”处理程序可能有用。使用 CSS3 过渡来实现弹性移动非常平滑，只需更改内部 div 的 left 或 right 样式属性，transfom 就会从当前位置移动到您需要的位置。这不是世界上最好的例子，但看看这里

Villasanrafael.eu/Gallery.php

# hover - 这种效果如何被称为（悬停 1 项 antoherone 变化）。我不知道如何谷歌它

> ID：13824753
> 
> 赞同：0
> 
> 时间：2012-12-11T16:51:12.863
> 
> 标签：hover, effect

我相信你能帮助我。

例如：在[此站点上](http://brandarena.de/)- 当您点击“团队”时 - 您可以将鼠标悬停在图像上，名称会显示在顶部。（ja，这是闪光，我知道；））

所以，我想在 wordpress 的后缩略图网格中执行此操作。

伪代码：将鼠标悬停在 div1 中的帖子缩略图（ID）上-> 在 div2 中显示帖子标题

我不需要一个准确描述的演练。

只是一些关键字，想法等。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:09:13.713

我猜即使该示例在 Flash 中，您也不想要 Flash 中的“操作方法”。您正在寻找的可能是**jquery**，如果您正在寻找应该在谷歌上搜索的内容，请尝试使用 jquery hover tutorial 或 jquery onClick()。

尝试类似[http://bavotasan.com/2009/a-simple-mouseover-hover-effect-with-jquery/](http://bavotasan.com/2009/a-simple-mouseover-hover-effect-with-jquery/)并调整悬停结果以符合您的标准。

# asp.net - 利用特定于浏览器和浏览器版本的 ASP.NET 主题

> ID：13824755
> 
> 赞同：0
> 
> 时间：2012-12-11T16:51:22.630
> 
> 标签：asp.net, internet-explorer, css, cross-browser

我的团队正在开发一个 ASP.NET Web 应用程序，我们正试图在几个主要浏览器（IE、Chrome、Firefox）的浏览器类型和版本上保持一致的外观和感觉。如果可能，我们还希望允许主题化，以便用户可以选择颜色、字体大小等。但是，由于目前有一些 CSS3 规则，我在实现与 IE 8 和 9 的兼容性方面遇到了严重问题。特别是，这里使用的阴影渐变`div`会造成麻烦，因为 IE 8 或 9 不支持它们：

```
#logos
{
    width:1024px;
    height:100px;
    border-radius:15px;
    color: -moz-linear-gradient(bottom, #297381, #FFFFFF);
    color: -ms-linear-gradient(bottom, #297381, #FFFFFF);
    color: -webkit-linear-gradient(bottom, #297381,#FFFFFF);
    background:-moz-linear-gradient(bottom, #297381,#FFFFFF);
    background:-ms-linear-gradient(bottom, #297381,#FFFFFF);
    background:-webkit-linear-gradient(bottom, #297381,#FFFFFF);

} 
```

我相信（如果我错了，请纠正我）我可以通过添加以下规则来实现 IE9 中的渐变：

```
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorStr='#297381', EndColorStr='#FFFFFF')";
filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=’#297381’, EndColorStr='#FFFFFF'); 
```

但我认为 IE8 中没有任何相应的选项，我也不相信它支持`border-radius`。我希望有一个单独的主题或规则，使用静态图像作为背景`div`。有什么方法可以检测 css 中的浏览器版本并应用正确的规则或主题？还是必须在后面的代码中完成并从那里相应地设置主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:04:09.283

试试 CSS PIE - [http://css3pie.com/](http://css3pie.com/)。这是一个通过 .htc 文件中的行为在 IE6-8 中启用 CSS3 功能的库。

# python - 如何格式化日期时间，例如“2012-12-11 12:00:00”

> ID：13824760
> 
> 赞同：3
> 
> 时间：2012-12-11T16:51:33.550
> 
> 标签：python, datetime

现在我有像 mintt 这样的日期时间

```
In [134]: mintt
Out[134]: datetime.datetime(2012, 5, 9, 23, 21, 10, 548382, tzinfo=<matplotlib.dates._UTC object at 0x2f805d0>) 
```

我像这样改变它：

```
In [131]: mintt.isoformat(" ").split(".")[0]
Out[131]: '2012-05-09 23:21:10' 
```

如何删除分钟和秒，让它变成“2012-05-09 23:00:00”？

PS：一开始我使用以下方法：

```
In [135]: mintt.strftime('%Y-%m-%d %H:00:00')
Out[135]: '2012-05-09 23:00:00' 
```

但它会引发一个异常，例如' year=1601 is before 1900; datetime strftime() 方法需要 year >= 1900'

所以我使用isoformat方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:59:34.037

使用`datetime.replace()`方法。

```
>>> import datetime
>>> t = datetime.datetime(2012, 5, 9, 23, 21, 10, 548382)
>>> t.replace(minute=0, second=0, microsecond=0).isoformat(' ')
'2012-05-09 23:00:00' 
```

这不会改变`t`，它会创建一个新对象。

```
>>> t
datetime.datetime(2012, 5, 9, 23, 21, 10, 548382) # still has same value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:59:12.040

您可以从原始时间中减去秒和分钟...

```
nominsec = mintt - datetime.timedelta(minutes=mintt.minute, seconds=mintt.second) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:03:58.830

如果它是一个`datetime`对象，也许是这个？：

```
>>> dt = datetime.datetime.strptime('2012-05-09 23:00:00','%Y-%m-%d %H:%M:%S')
>>> dt
datetime.datetime(2012, 5, 9, 23, 0)
>>> "{} {}:00:00".format(dt.date(),dt.hour)
'2012-05-09 23:00:00' 
```

# ruby-on-rails-3.2 - 无法批量分配受保护的属性：配置文件，

> ID：13824762
> 
> 赞同：6
> 
> 时间：2012-12-11T16:51:35.323
> 
> 标签：ruby-on-rails-3.2, nested-forms, nested-attributes, mass-assignment

我阅读了很多相关的帖子，但找不到为什么它对我不起作用。我仍然有一个“无法批量分配受保护的属性：配置文件”......我做错了什么？

我有一个用户模型和一个具有一对一关系的相关配置文件模型。这里是**用户模型（简化）**

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :profile_attributes, :profile_id
  has_secure_password

  has_one :profile

  accepts_nested_attributes_for :profile
end 
```

**轮廓模型**

```
class Profile < ActiveRecord::Base
attr_accessible :bio, :dob, :firstname, :gender, :lastname, :user_id

belongs_to :user
end 
```

我的**用户控制器**

```
def new
@user = User.new 
  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @user }
  end
end

def create
@user = User.new(params[:user])
@user.build_profile

respond_to do |format|
  if @user.save

    format.html { redirect_to @user, flash: {success: 'User was successfully created. Welcome !'} }
    format.json { render json: @user, status: :created, location: @user }
  else
    format.html { render action: "new" }
    format.json { render json: @user.errors, status: :unprocessable_entity }
  end
end
end 
```

如果它可以提供任何帮助，那么 User 和 Profile 都已经搭建好了。

我也尝试在用户 attr_accessible 中使用 ':profiles_attributes' 而不是 'profile_attributes'，同样的问题......

也尝试过，在用户控制器中使用“@user.profiles.build”而不是“@user.build_profile”......结果相同......

任何解释的帮助都会很棒（我是个菜鸟，所以请原谅我）

**编辑我使用的简单形式**

```
<%= simple_form_for(@user) do |f| %>
<%= f.error_notification %>

<%= f.simple_fields_for :profiles do |p| %>
    <div class="nested-form-inputs">
      <%= p.input :lastname %>
      <%= p.input :firstname %>
    </div>
<% end %>

<div class="form-inputs">
  <%= f.input :email %>
  <%= f.input :password %>
  <%= f.input :password_confirmation %>
</div>

<div class="form-actions">
  <%= f.button :submit %>
</div>

<% end %> 
```

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T23:23:50.150

您引用的错误消息说`can't mass-assign protected attributes: profiles`。我相信你需要一个`attr_accessible :profiles` （或可能`:profile`）

我有一个应用程序

```
accepts_nested_attributes_for :order_items
attr_accessible :order_item 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T07:36:41.547

问题出在rails类缓存上，我已经重新启动了服务器，一切都运行良好..，

# android - 如何在没有 startActivityForResult() 的情况下从另一个 Activity 调用 Activity 中的方法？

> ID：13824766
> 
> 赞同：0
> 
> 时间：2012-12-11T16:51:42.003
> 
> 标签：android

我有两个活动。Activity1 包含带有 HTML 链接的 TextView。当用户单击任何链接时 - 它会启动 Activity2（所以我不能使用 startActivityForResult()）。然后用户在 Activity2 中进行一些操作，单击“返回”按钮并返回到 Activity1。此时我需要使用来自 Activity2 的信息调用 Activity1 中的方法。但是怎么做呢？我需要使用广播接收器吗？

为了启动 Activity2 我使用这个：

显现：

```
<activity android:name=".Activity2" >
    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.VIEW" />
        <data android:scheme="myapp" />
    </intent-filter>
</activity> 
```

我的 TextView 中的所有链接都以“myapp://”开头。

# php - 哈希密码不匹配

> ID：13824767
> 
> 赞同：1
> 
> 时间：2012-12-11T16:51:45.920
> 
> 标签：php

我创建了一个注册和一个登录脚本，它用完全相同的方式用盐对密码进行哈希处理，但是当用户尝试使用他们的密码登录时，哈希登录密码和存储在数据库中的密码不同，它工作了几天以前，我没有更改登录和注册脚本中的任何内容。

这是存储的凭据

数据库邮箱：`jd@gmail.com`

数据库密码： `addb18f27b6970082727069aa5853116223c5ab46f46a7b07340757804670aef61311ff0254ec45ea78d9ea6d8afb2cefdf3afd6bd4947f6fc558f46703fac1c`

以下是用户插入的凭据：

电子邮件：`jd@gmail.com`

密码：`4123363f30664825356a238fe7a568910315e6f6aa8a57d0264844c641e856ab207200f4c75a532b2ebecdbd062bff31da101d973ab0f83eaefd2323a39a4a88`

它们使用以下方法进行散列：

```
$salt   = "salinger";
$hashed = hash_hmac("sha512", $password, $salt); 
```

完整的注册功能（我知道它很乱，但它可以工作（直到现在）：

```
function registerUser($firstname, $surname, $email, $password, $secretQ, $secretA,    $address, $city, $postcode) {
    $flag = array();
    $validEmail = validateEmail($email);
    if (($validEmail) == true) {
         //Do not flag
    } else {
        array_push($flag, 1);
    }
    if ((textOnly("First name", $firstname) == true) || ((textOnly("Surname", $surname)) == true) || ((textOnly("City", $city)) == true)) {
        array_push($flag, 1);
    }
    if ((emptyField($firstname)) || (emptyField($surname)) || (emptyField($email)) || (emptyField($password)) || (emptyField($secretA)) || (emptyField($address)) || (emptyField($city)) || (emptyField($postcode))) {
        array_push($flag, 1);
    }
    if (validPostcode($postcode) == false) {
        array_push($flag, 1);
    }
    if (duplicateEmail($email) == true) {
        array_push($flag, 1);
    }
    if (validatePassword($password) == false) {
        array_push($flag, 1);
    } else {
        $password = validatePassword($password);
    }
    switch ($secretQ) {
        case 1:
            $secretQ = "Your mothers maiden name?";
            break;
        case 2:
            $secretQ = "Name of your first pet?";
            break;
        case 3:
            $secretQ = "The name of your high school?";
            break;
        case 4:
            $secretQ = "Your favourite instrument?";
            break;
    }

    $salt   = "salinger";
    $hashed = hash_hmac("sha512", $password, $salt);

    if (!empty($flag)) {
        echo "There are errors with your registration, go back and ammend it. <br /> <a href=\"register.php\">&lt;&lt; Back</a>";
    } else {
        if ((isset($firstname)) && (isset($surname)) && (isset($email)) && (isset($password)) && (isset($secretQ)) && (isset($secretA)) && (isset($address)) && (isset($city)) && (isset($postcode))) {
            $sql = "INSERT INTO customer (forename, surname, email, password, secretQ, secretA, address_street, address_city, address_postcode, member_type) VALUES ('$firstname', '$surname', '$email', '$hashed', '$secretQ', '$secretA', '$address', '$city', '$postcode', 'User');";
            header("Location: index.php");
        } else {
            array_push($flag, 1);
        }
    }
    $result = mysql_query($sql);
    if (!$result) {
        die(mysql_error());
    }
} 
```

登录功能：

```
function loginUser($email, $password) {
    if (validateEmail($email) == true) {
        $sql    = "SELECT customerid, forename, email, password, secretA, member_type FROM customer WHERE email = '$email'";

        $result = mysql_query($sql);

        while ($record = mysql_fetch_array($result)) {
            $DBid       = $record['customerid'];
            $DBemail    = $record['email'];
            $DBpassword = $record['password'];
            $DBforename = $record['forename'];
            $DBsecretA  = $record['secretA'];
            $DBmember   = $record['member_type'];
        }

        if (!$result) {
            die(mysql_error());
        }

        $salt   = "salinger";
        $hashed = hash_hmac("sha512", $password, $salt);

        echo "DBEMAIL: $DBemail   DBPASSWORD: $DBpassword <br/>";
        echo "UEMAIL: $email  UPASSWORD: $hashed <br/>";

        if (($email == $DBemail) && ($hashed == $DBpassword)) {
            $match = true;
        } else {
            $match = false;
        }

        if ($match == true) {
            session_start();
            $_SESSION['userid']   = $DBid;
            $_SESSION['Active']   = true;
            $_SESSION['forename'] = $DBforename;
            $_SESSION['type']     = $DBmember;
            header("Location: member.php");
        } else {
            echo "Incorrect credentials.";
        }
    } else {
        echo "Invalid email address!";
    }
return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:06:44.790

在 registerUser 中，我会仔细研究一下：

```
...
if (validatePassword($password) == false) {
    array_push($flag, 1);
} else {
    $password = validatePassword($password);
}
... 
```

`$password` will be overwritten, it appears, if it is a valid password. If all the passwords are the same in the database, then it's likely that $password is being set to `true`, and that's the value that's salted. Depending on how you use validatePassword, you may be able to remove the else-clause, leaving this:

```
...
if (validatePassword($password) == false) {
    array_push($flag, 1);
}
... 
```

# c# - 将 readline 语句居中

> ID：13824769
> 
> 赞同：1
> 
> 时间：2012-12-11T16:52:01.303
> 
> 标签：c#, console, console-application, center, readline

我即将开始一个项目，这是我目前的欢迎屏幕。

```
string[] welcome = new string[4] 
{ 
    "Welcome", 
    "Choose A Option Bellow By Inputing The Number And Clicking Enter.", 
    "1\. View C:\\Windows\\ File directory", 
    "2\. View Your Own Custom Directory" 
};

string userChoice;
for (int x = 0; x < 4; x++)
{
    Console.WriteLine(
        "{0," + ((Console.WindowWidth / 2) + welcome[x].Length / 2) + "}", welcome[x]);
} 
```

我如何使我的阅读线居中？这样当用户选择时，他们的选择也会居中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:56:05.333

`CursorLeft`您可以使用和`CursorTop`属性移动光标。
所以，在你的情况下，你会做这样的事情：

```
Console.CursorLeft = Console.WindowWidth / 2;
// maybe -1 to center the typed number correctly 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:06:13.400

我相信您应该像以前一样使用 .Write() 和格式。然后，在后面添加一个 Readline/ReadKey：

```
 string[] welcome = new string[4] { "Welcome", "Choose A Option Bellow By Inputing The Number And Clicking Enter.", "1\. View C:\\Windows\\ File directory", "2\. View Your Own Custom Directory" };
        String userChoice;
        for (int x = 0; x < 4; x++)
        {
            Console.WriteLine("{0," + ((Console.WindowWidth / 2) + welcome[x].Length / 2) + "}", welcome[x]);
        }
        var cprompt = "Choice:";
        Console.Write(string.Format("{0," + ((Console.WindowWidth / 2) + (cprompt.Length/2)) + "}", cprompt ));
        Console.ReadLine(); 
```

# python - 如何在范围内打印？

> ID：13824771
> 
> 赞同：-4
> 
> 时间：2012-12-11T16:52:04.673
> 
> 标签：python

我将如何在 python 中打印类似的东西？

![在此处输入图像描述](../Images/063823c3b26901baa17ece7544288897.png)

这是我到目前为止可以做的：

```
for i in range(24):
    print("("+str(i)+", "+str(i)+"):",i, end="") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:58:56.907

以下：

```
i = 0
for y in range(0, 500, 125):
   for x in range(0, 750, 125):
      print('(%3d, %3d): %3d    ' % (x, y, i), end='')
      i += 1
   print() 
```

生产

```
(  0,   0):   0     (125,   0):   1     (250,   0):   2     (375,   0):   3     (500,   0):   4     (625,   0):   5    
(  0, 125):   6     (125, 125):   7     (250, 125):   8     (375, 125):   9     (500, 125):  10     (625, 125):  11    
(  0, 250):  12     (125, 250):  13     (250, 250):  14     (375, 250):  15     (500, 250):  16     (625, 250):  17    
(  0, 375):  18     (125, 375):  19     (250, 375):  20     (375, 375):  21     (500, 375):  22     (625, 375):  23 
```

或者，使用单个循环：

```
for i in range(24):
   print('(%3d, %3d): %3d    ' % (i % 6 * 125, i // 6 * 125, i), end='')
   if (i + 1) % 6 == 0:
      print() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:03:04.290

```
from __future__ import print_function
from itertools import count
counter = count()
for i in range(4):
    for j in range(6):
        print ((j*125,i*125),':',next(counter),end='\t')
    print() 
```

您可以使用字符串格式来获得所需的文本对齐方式。

# r - 我怎样才能使矩阵和向量的处理有规律（例如，在 Matlab 中）

> ID：13824774
> 
> 赞同：3
> 
> 时间：2012-12-11T16:52:14.250
> 
> 标签：r, vector, matrix

假设我有一个函数，它接受维度为 1 或 2 的参数 x。我想做类似的事情

```
x[1, i] 
```

无论我得到一个向量还是一个矩阵（或一个或两个变量的表）。

例如：

```
x = 1:5
x[1,2] # this won't work... 
```

当然，我可以检查哪个类作为参数给出，或者强制参数为矩阵，但我宁愿不这样做。例如，在 Matlab 中，向量*是*除了一个维度之外的所有维度为 1 的矩阵（并且可以被视为行或列等）。这使代码变得漂亮而有规律。

另外，有没有人知道为什么在 R 向量（或一般一维对象）中不是矩阵（或多维对象）的特殊情况？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:15:14.920

在 R 中，情况正好相反；*矩阵是向量*。类似矩阵的行为来自对象的原子向量部分顶部的一些额外属性。

要获得您想要的行为，您需要通过使用`dim()`或显式强制在向量上设置维度来使向量成为矩阵。

```
> vm <- 1:5
> dim(vm) <- c(1,5)
> vm
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
> class(vm)
[1] "matrix" 
```

接下来，您需要在子集时保持尺寸；默认情况下，R 将删除空维度，在`vm`上面的情况下是行维度。您可以`drop = FALSE`在调用`'['()`. 默认情况下的行为是`drop = TRUE`：

```
> vm[, 2:4]
[1] 2 3 4
> vm[, 2:4, drop = FALSE]
     [,1] [,2] [,3]
[1,]    2    3    4 
```

您可以在矩阵中添加一个类，并`[`为该类编写方法，其中参数默认`drop`设置为`FALSE`

```
class(vm) <- c("foo", class(vm))
`[.foo` <- function(x, i, j, ..., drop = FALSE) {
  clx <- class(x)
  class(x) <- clx[clx != "foo"]
  x[i, j, ..., drop = drop]
} 
```

在使用中给出：

```
> vm[, 2:4]
     [,1] [,2] [,3]
[1,]    2    3    4 
```

即保持空维度。

使这个万无一失和普及将需要更多的努力，但以上将让你开始。

# sql-server - oracle数据库中等效的sql server文件流

> ID：13824776
> 
> 赞同：2
> 
> 时间：2012-12-11T16:52:28.803
> 
> 标签：sql-server, oracle, filestream

我想将数据从 SQL Server 2008 R2 数据库传输到 Oracle 11g 数据库，这是一个非常简单的 ETL 操作。但是在 SQL Server 中，数据库使用 Filestream 功能来存储某些视频和图像，但据我所知，Oracle 数据库没有此功能。有没有人之前遇到过这种情况？你应用的解决方案是什么？只是将二进制文件存储在单独的服务器中，还是简单地使用 BLOB 类型来存储文件？提前致谢....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:05:59.623

听起来您正在寻找[`BFILE`type](http://docs.oracle.com/cd/E11882_01/appdev.112/e18294/adlob_bfile_ops.htm)。这是一种 Oracle 数据类型，允许您使用存储在数据库外部文件系统上的二进制数据。

# rdf - 用于 wgs84 rdf 的 Sparql 查询

> ID：13824778
> 
> 赞同：2
> 
> 时间：2012-12-11T16:52:36.090
> 
> 标签：rdf, sparql

我有这个 RDF 文件，我喜欢查询以选择单个标记，但我不能。请有人帮我

```
<rdf:RDF xmlns="http://www.w3.org/2003/01/geo/wgs84_pos#"
     xml:base="http://www.w3.org/2003/01/geo/wgs84_pos"
     xmlns:dc="http://purl.org/dc/elements/1.1/"
     xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
     xmlns:foaf="http://xmlns.com/foaf/0.1/"
     xmlns:owl="http://www.w3.org/2002/07/owl#"
     xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> 

<owl:NamedIndividual rdf:about="http://www.co-ode.org/ontologies/ont.owl#mark">
        <lat rdf:datatype="&xsd;double">121231.0</lat>
        <alt rdf:datatype="&xsd;double">2131.0</alt>
</owl:NamedIndividual> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:14:08.800

您尝试选择的值具有数据类型，因此您必须将其包含在查询中，即

```
PREFIX : <http://www.w3.org/2003/01/geo/wgs84_pos>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
SELECT ?x
WHERE
{
  ?x :lat "121231.0"^^xsd:double
} 
```

否则条款不匹配，不会选择任何内容

# node.js - 如何在 MongoDB 中建立友谊模型？

> ID：13824780
> 
> 赞同：1
> 
> 时间：2012-12-11T16:52:39.113
> 
> 标签：node.js, mongodb, mongoose

我想在我的项目中使用 MongoDB 和 Node.js。我需要的是，为友谊关系建模数据库（用户 1 跟随用户 2）。在关系数据库中这很容易，但我不知道如何用 MongoDB 做到这一点。我还将使用 REST API，所以我应该能够通过 REST api 建立关系

编辑：

这是一个好方法吗？

```
following: [[{ type: Schema.Types.ObjectId, ref: 'User' }]] 
```

如果我这样做，我应该保存关注者和关注者吗？我收到太多递归错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:54:45.327

你能不能只维护每个用户的 FollowedBy 和 Follow 用户 ID 列表，并在添加新关系时更新这些列表？

实际上，由于缺乏关系支持，您正在对数据进行非规范化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:56:02.067

你想用它做什么所有的操作？

您可能想 [使用 MongoDB 检查类似 Twitter 的应用程序](https://stackoverflow.com/questions/4042917/twitter-like-app-using-mongodb)

# asp.net-mvc - 使用超类型/子类型数据库优先模型插入到 MVC 中的多个外键表

> ID：13824786
> 
> 赞同：0
> 
> 时间：2012-12-11T16:53:09.363
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我有两个超类型“实体”的子类型，即“家庭”和“相关主体”。

我已经在我的数据库中对它们进行了如下所示的建模，并且它们自动生成到 EF 模型中（再次如下所示）。

**数据库** ![在此处输入图像描述](../Images/51924051211f6ca5977b1390a5d21958.png)

**edmx 模型** ![在此处输入图像描述](../Images/a638d88a0d686cd87065a711d3adbf19.png)

使用 MVC 的默认脚手架，我可以毫无问题地添加新的家庭。但是，当我尝试添加一个新的参与主体时，我在尝试添加实体类型时遇到了错误。

两种子类型之间唯一相关的（据我所知）区别在于，家庭的实体类型被硬编码为“家庭”，而参与主体的实体类型可以是除“家庭”之外的任何实体类型——这个由用户从列表中选择。

相关主体的 HTTP POST 上的创建操作会引发与 tEntity 和 tEntityType 之间的外键相关的错误，其中 tEntityType 为空。代码如下：

```
[HttpPost]
public ActionResult Create([Bind(Exclude = "entityID")]tEntity tentity            
                                                        , tInvolvedBody tinvolvedbody
                                                        , tAddress taddress
                                                        , tAddressEntity taddressentity
                                                        //, tEntityType tentitytype
                                                        , int entityTypeID
                                                        )
{

    #region entity type
    //find entity type from id
    var tentitytype = db.tEntityTypes.Find(entityTypeID);                     

    #endregion

    #region address
    //assume start date of involved body not needed for reporting
    taddressentity.startDate = DateTime.Now.Date;

    #endregion

    if (ModelState.IsValid)
    {

        db.tEntities.Add(tentity);
        db.tInvolvedBodies.Add(tinvolvedbody);
        db.tAddresses.Add(taddress);
        db.tAddressEntities.Add(taddressentity);

        db.SaveChanges();
        return RedirectToAction("Index");
    }

    //recreate viewbag for entityType dropdown
    var q = (
            from e in db.tEntityTypes
            where e.entityType != "Household"
            select e
        );

    ViewBag.entityTypeID = new SelectList(q, "entityTypeID", "entityType");
    return View(tinvolvedbody);
} 
```

我尝试将 tEntityType 添加到创建的参数列表中，但这会导致 ModelState.IsValid 返回 false，因为 entityType 在所有对象上都为空。

我还尝试使用以下方法主动将实体类型链接到其他每个对象：

```
tentity.tEntityType = tentitytype;
tinvolvedbody.tEntity.tEntityType = tentitytype;
taddressentity.tEntity.tEntityType = tentitytype; 
```

上面的内容最终起作用，但它为每个其他对象创建了一个新实体，即我在 tEntity 表中获得了三个新行，一个是实体，一个是指向 tInvolvedBody 的链接，一个是指向 tAddressEntities 的链接。这没有意义...

如何插入一个新的 InvolvedBody 来创建一个实体，选择实体类型，然后链接到 AddressEntity 联结表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:51:04.087

终于解决了这个问题。不确定从开发人员的角度来看答案是否“完美”，但它确实有效。

经过大量调试后，我意识到所涉及的正文和地址实体的导航属性都在寻找我认为将由实体对象提供的 entitytypeID。

如果我使用显示的代码直接传递这些：

```
tinvolvedbody.tEntity.tEntityType = tentitytype;
taddressentity.tEntity.tEntityType = tentitytype; 
```

...我最终得到了三个新实体，并且所有 {实体、涉及的主体、地址}之间不存在任何关系数据

有效的代码删除了新实体的显式添加，并依赖 EF 从相关主体创建实体。然后我使用新创建的 entityID 通过 addressentity 映射地址，如下所示：

```
[HttpPost]
public ActionResult Create([Bind(Exclude="entityID")]tEntity tentity
                                                    ,tInvolvedBody tinvolvedbody
                                                    ,tAddress taddress
                                                    ,tAddressEntity taddressentity
                                                    ,int entityTypeID
                                                    )
{

    #region entity type
    var t =
            (
                from e in db.tEntityTypes
                where (e.entityTypeID == entityTypeID)
                select e
            );

    tinvolvedbody.tEntity.tEntityType = t.First();
    #endregion

    #region address
    //assume start date of involved body not needed for reporting
    taddressentity.startDate = DateTime.Now.Date;

    #endregion

    if (ModelState.IsValid)
    {
        db.tInvolvedBodies.Add(tinvolvedbody);                
        db.tAddresses.Add(taddress);

        taddressentity.tEntity = db.tEntities.Find(tinvolvedbody.bodyID);

        db.tAddressEntities.Add(taddressentity);
        db.SaveChanges();
        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:48:54.420

您是否尝试过专门设置 typeID ？另外，根据我从您的模型中收集到的信息，taddress 是 taddressentity 的子代？因此，不应该先插入它以获取外键吗？

```
if (ModelState.IsValid)
    {
        tentity.entityTypeID = entityTypeID;
        db.tEntities.Add(tentity);

        tinvolvebody.bodyID= tentity.entityID
        db.tInvolvedBodies.Add(tinvolvedbody);

        taddressentity.entityID = tentity.entityID;
        db.tAddressEntities.Add(taddressentity);

        taddress.UPRN = taddressentity.UPRN;
        db.tAddresses.Add(taddress);

        db.SaveChanges();
        return RedirectToAction("Index");
    } 
```

# perl - 如何在其他东西中使用 given(){ }？

> ID：13824791
> 
> 赞同：3
> 
> 时间：2012-12-11T16:53:33.097
> 
> 标签：perl

我正在尝试以动态方式传递参数。我想使用 Perl 函数`given(){}`，但由于某种原因，我不能在其他任何东西中使用它。这就是我所拥有的。

```
print(given ($parity) {
   when (/^None$/) {'N'}
   when (/^Even$/) {'E'}
   when (/^Odd$/)  {'O'}
}); 
```

现在我知道我可以在此之前声明一个变量并在函数内部使用它`print()`，但我试图让我的代码更简洁。同样的原因我不使用复合`if-then-else`语句。如果它有帮助，这是错误

```
syntax error at C:\Documents and Settings\ericfoss\My Documents\Slick\Perl\tests\New_test.pl line 22, near "print(given"
Execution of C:\Documents and Settings\ericfoss\My Documents\Slick\Perl\tests\New_test.pl aborted due to compilation errors. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:58:58.467

您不能将语句放在表达式中。

```
print( foreach (@a) { ... } );  # Fail
print( given (...) { ... } );   # Fail
print( $a=1; $b=2; );           # Fail 
```

虽然`do`可以帮助您实现这一目标。

```
print( do { foreach (@a) { ... } } );  # ok, though nonsense
print( do { given (...) { ... } } );   # ok
print( do { $a=1; $b=2; } );           # ok 
```

但说真的，你想要一个哈希。

```
my %lookup = (
   None => 'N',
   Even => 'E',
   Odd  => 'O',
);

print($lookup{$parity}); 
```

甚至

```
print(substr($parity, 0, 1)); 
```

# .net - 从字符串中删除除空格以外的特殊字符

> ID：13824792
> 
> 赞同：-2
> 
> 时间：2012-12-11T16:53:34.453
> 
> 标签：.net, vb.net, visual-studio

我想使用脚本从字符串中删除除空格外的特殊字符。例如，`ALBAÃ‘IL`应该输出为，`Albaail`但这只是一个示例。它可以是一个或多个 CSV 文件中的任何其他名称或单词。我正在使用 Visual Studio 将 CSV 数据处理到 SQL Server 表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:15:35.147

这是一个 Javascript 解决方案：http: [//lehelk.com/2011/05/06/script-to-remove-diacritics/](http://lehelk.com/2011/05/06/script-to-remove-diacritics/)

它基本上使用正则表达式来强制将各种变音字符转换为标准 ASCII。

它也可以处理小写和大写字母，因此您的示例将转换为“ALBAAIL”。

正如其他人所提到的，Javascript 不是 Visual Studio 或 .net，所以我真的不知道您真正在寻找什么样的解决方案。

**编辑：**

好的，根据您的评论，您正在使用 VB 进行编码。这很酷，因为我在 VB 中编写代码并且已经将链接到的代码转换为 VB：

```
Public Function ParseTo819Internal(ByVal sendString As String, replaceChar As Char) As String
    Static x As Dictionary(Of String, String)
    If x Is Nothing Then
        x = New Dictionary(Of String, String)

        x.Add("A", "[\u0041\u24B6\uFF21\u1EA6\u1EA4\u1EAA\u1EA8\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u01DE\u1EA2\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]")
        x.Add("AA", "[\uA732]")
        x.Add("AE", "[\u01FC\u01E2]")
        x.Add("AO", "[\uA734]")
        x.Add("AU", "[\uA736]")
        x.Add("AV", "[\uA738\uA73A]")
        x.Add("AY", "[\uA73C]")
        x.Add("B", "[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]")
        x.Add("C", "[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u1E08\u0187\u023B\uA73E]")
        x.Add("D", "[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]")
        x.Add("DZ", "[\u01F1\u01C4]")
        x.Add("Dz", "[\u01F2\u01C5]")
        x.Add("E", "[\u0045\u24BA\uFF25\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]")
        x.Add("F", "[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]")
        x.Add("G", "[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]")
        x.Add("H", "[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]")
        x.Add("I", "[\u0049\u24BE\uFF29\u0128\u012A\u012C\u0130\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]")
        x.Add("J", "[\u004A\u24BF\uFF2A\u0134\u0248]")
        x.Add("K", "[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]")
        x.Add("L", "[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]")
        x.Add("LJ", "[\u01C7]")
        x.Add("Lj", "[\u01C8]")
        x.Add("M", "[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]")
        x.Add("N", "[\u004E\u24C3\uFF2E\u01F8\u0143\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]")
        x.Add("NJ", "[\u01CA]")
        x.Add("Nj", "[\u01CB]")
        x.Add("O", "[\u004F\u24C4\uFF2F\u1ED2\u1ED0\u1ED6\u1ED4\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u01FE\u0186\u019F\uA74A\uA74C]")
        x.Add("OI", "[\u01A2]")
        x.Add("OO", "[\uA74E]")
        x.Add("OU", "[\u0222]")
        x.Add("P", "[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]")
        x.Add("Q", "[\u0051\u24C6\uFF31\uA756\uA758\u024A]")
        x.Add("R", "[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]")
        x.Add("S", "[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]")
        x.Add("T", "[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]")
        x.Add("TZ", "[\uA728]")
        x.Add("U", "[\u0055\u24CA\uFF35\u0168\u1E78\u016A\u1E7A\u016C\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]")
        x.Add("V", "[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]")
        x.Add("VY", "[\uA760]")
        x.Add("W", "[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]")
        x.Add("X", "[\u0058\u24CD\uFF38\u1E8A\u1E8C]")
        x.Add("Y", "[\u0059\u24CE\uFF39\u1EF2\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]")
        x.Add("Z", "[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]")
        x.Add("a", "[\u0061\u24D0\uFF41\u1E9A\u1EA7\u1EA5\u1EAB\u1EA9\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u01DF\u1EA3\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]")
        x.Add("aa", "[\uA733]")
        x.Add("ae", "[\u01FD\u01E3]")
        x.Add("ao", "[\uA735]")
        x.Add("au", "[\uA737]")
        x.Add("av", "[\uA739\uA73B]")
        x.Add("ay", "[\uA73D]")
        x.Add("b", "[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]")
        x.Add("c", "[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u1E09\u0188\u023C\uA73F\u2184]")
        x.Add("d", "[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]")
        x.Add("dz", "[\u01F3\u01C6]")
        x.Add("e", "[\u0065\u24D4\uFF45\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]")
        x.Add("f", "[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]")
        x.Add("g", "[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]")
        x.Add("h", "[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]")
        x.Add("hv", "[\u0195]")
        x.Add("i", "[\u0069\u24D8\uFF49\u0129\u012B\u012D\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]")
        x.Add("j", "[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]")
        x.Add("k", "[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]")
        x.Add("l", "[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]")
        x.Add("lj", "[\u01C9]")
        x.Add("m", "[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]")
        x.Add("n", "[\u006E\u24DD\uFF4E\u01F9\u0144\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]")
        x.Add("nj", "[\u01CC]")
        x.Add("o", "[\u006F\u24DE\uFF4F\u1ED3\u1ED1\u1ED7\u1ED5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u01FF\u0254\uA74B\uA74D\u0275]")
        x.Add("oi", "[\u01A3]")
        x.Add("ou", "[\u0223]")
        x.Add("oo", "[\uA74F]")
        x.Add("p", "[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]")
        x.Add("q", "[\u0071\u24E0\uFF51\u024B\uA757\uA759]")
        x.Add("r", "[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]")
        x.Add("s", "[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]")
        x.Add("t", "[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]")
        x.Add("tz", "[\uA729]")
        x.Add("u", "[\u0075\u24E4\uFF55\u0169\u1E79\u016B\u1E7B\u016D\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]")
        x.Add("v", "[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]")
        x.Add("vy", "[\uA761]")
        x.Add("w", "[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]")
        x.Add("x", "[\u0078\u24E7\uFF58\u1E8B\u1E8D]")
        x.Add("y", "[\u0079\u24E8\uFF59\u1EF3\u0177\u1EF9\u0233\u1E8F\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]")
        x.Add("z", "[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]")
    End If
    For Each keyIn In x.Keys
        sendString = Regex.Replace(sendString, x(keyIn), keyIn)
    Next

    'Having replaced all recognised diacritical characters with plain letters, replace all remaining non-IBM819 characters with question marks
    sendString = Regex.Replace(sendString, "[^0-9a-zA-Z !""#$%&'()*+,-./:;<=>?@\[\\\]^_`{|}~¡¢£¤¥¦§¨©ª«¬®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\s]", replaceChar)

    Return sendString
End Function 
```

这是一个将我们的输入清理为数据库的[IBM819](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)格式的功能，因此除了去除所有重音字符之外，它还检查任何剩余的不兼容字符并用`replaceChar`变量替换它们。老实说，我对正则表达式不太熟悉，但我认为如果你使用 for 的值，`String.Empty`它`replaceChar`只会删除所有剩余的无法识别的字符。

如果要转换为直接 ASCII 或转换为与 IBM819 不同的代码页，则需要对最终的正则表达式进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:07:09.200

您如何使用 asp.net 代码隐藏方法来处理来自 CSV 的转换，而不是尝试在 Javascript 中进行转换？使用 .net，您可以根据需要使用工厂类模式添加不同的验证和清理规则。

# php - 监视身份验证后的网页以获取文本

> ID：13824794
> 
> 赞同：6
> 
> 时间：2012-12-11T16:53:42.753
> 
> 标签：php, authentication, curl, automation, do-while

这是交易。我需要监视某些受密码保护的网页的更改，并在页面大小与我所知道的不同（即已修改）时播放声音警报。这是我想出的代码块。

```
<?php

$e = curl_init();
curl_setopt($e, CURLOPT_URL, 'http://example.com/Account/LogOn');
curl_setopt($e, CURLOPT_POST, 1);
curl_setopt($e, CURLOPT_POSTFIELDS, 'UserName=xxx@example.com&Password=password');
curl_setopt($e, CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($e, CURLOPT_REFERER, 'http://example.com');
curl_setopt($e, CURLOPT_RETURNTRANSFER, 1);
curl_exec($e);

$sizevalue = 2399;

do {
     curl_setopt($e, CURLOPT_URL, 'http://example.com/panel.php');
     $content = curl_exec($e);
     $numberofchars = strlen($content);
     sleep(15);
} while ($numberofchars = $sizevalue);

curl_close($e); 
echo '
      <audio controls="controls" autoplay="autoplay">
          <source src="/path/to/your/audio.mp3" type="audio/mp3">
          <source src="/path/to/your/audio.ogg" type="audio/ogg">
          <embed src="/path/to/your/audio.mp3">
      </audio>';
php?> 
```

**问题 1**。如果我错了，请纠正我，但据我了解，不是连接服务器，而是只发布一次用户名和密码，让连接保持活动状态并使用该身份验证密钥`cookie.txt`进行后续操作，它会不断将用户名和密码发送到登录表单周期的转折。我该如何解决？

**问题 2**。我需要脚本给我一些临时状态，因为目前如果不满足某些条件，它基本上会变成无限循环，并且托管脚本的服务器会给我超时错误。

**问题 3**。实现声音警报的最简单方法是什么？OGG文件播放？Youtube 重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:23:58.920

**问题 1**：`curl_multi_exec`在您的情况下并不是真正需要的。保持卷曲手柄打开就足够了。

**问题2**：`sleep()`或`usleep()`为此目的效果很好

**问题 3**：您可以只输出 html 标记。另一种选择是嵌入自动播放警报声音的 Flash 文件或视频。取决于它在哪里运行以及用于什么目的。

请注意，这样的脚本最好不要在浏览器中运行。最好设置一个 cron 脚本，以设定的时间间隔检查 url，并且不使用`do while`循环或`sleep`.

这是您使用这些更正和一些示例编写的代码。

```
<?php
set_time_limit(0); // this script will now run forever. but a safer value might be something like X hours or X number of minutes. 
$e = curl_init();
curl_setopt($e, CURLOPT_URL, 'http://example.com/Account/LogOn');
curl_setopt($e, CURLOPT_POST, true);
curl_setopt($e, CURLOPT_POSTFIELDS, 'UserName=xxx@example.com&Password=password');
// you'll need both CURLOPT_COOKIEJAR and CURLOPT_COOKIEFILE if you plan on NOT using curl's internal cookie handling
curl_setopt($e, CURLOPT_COOKIEJAR, 'cookie.txt'); // this is where we write the cookie data
curl_setopt($e, CURLOPT_COOKIEFILE, 'cookie.txt'); // this is where we read the cookie data to use
curl_setopt($e, CURLOPT_REFERER, 'http://example.com/');
curl_setopt($e, CURLOPT_RETURNTRANSFER, true);
// you can omit the next two lines if you think they won't be needed
curl_setopt($e, CURLOPT_FOLLOWLOCATION, true); // in case the remote server does some kind of http redirection, like a 301 redirect
curl_setopt($e, CURLOPT_MAXREDIRS, 3); // The maximum amount of HTTP redirections to follow, in case the remote server is badly configured and has an endless redirection loop
curl_exec($e);

$sizevalue = 2399;
$maximum_checks = 30; // I've added this as a cap for the loop, so that you only run it this many times.
$checks = 0;
$seconds = 15;

do {
     $checks++;
     curl_setopt($e, CURLOPT_URL, 'http://example.com/panel.php');
     $content = curl_exec($e);

     $numberofchars = strlen($content);

     // optionally... instead of the strlen method above you could also use 
     // http://php.net/manual/en/function.curl-getinfo.php
     if (!curl_errno($e)) {
        $info = curl_getinfo($e);
        echo 'content-length of download, read from Content-Length: field :' . $info['download_content_length']."<br>\n";
        $numberofchars = $info['download_content_length'];
     }
     if ($checks === $maximum_checks) {
        exit('No changes after '.($seconds * $maximum_checks).' seconds<br>'.PHP_EOL);
     }
     sleep($seconds); // wait for 15 seconds

} while ($numberofchars != $sizevalue); // fix up your TRUTH expression, don't forget it is != for proper comparison in your case. Without it you go into an infinite loop.

curl_close($e); 

// if our php script got this far then 
echo '
<audio controls="controls" autoplay="autoplay">
  <source src="/path/to/your/audio.mp3" type="audio/mp3">
  <source src="/path/to/your/audio.ogg" type="audio/ogg">
  <embed src="/path/to/your/audio.mp3">
</audio>';

?> 
```

# mysql - Mysql查询除了

> ID：13824800
> 
> 赞同：0
> 
> 时间：2012-12-11T16:54:14.717
> 
> 标签：mysql, sql

我需要进行这样的查询：

```
SELECT DISTINCT Carta_ID
FROM Carta_Alarme
INNER JOIN Alarme ON Carta_Alarme.Alarme_ID = Alarme.ID
WHERE (
YEAR( Alarme.dtOcorrencia ) = 2011
) NOT
IN (

SELECT DISTINCT Carta_ID
FROM Carta_Alarme
INNER JOIN Alarme ON Carta_Alarme.Alarme_ID = Alarme.ID
WHERE (
YEAR( Alarme.dtOcorrencia ) = 2012
)
) 
```

第一个 Select 的结果是 (1, 5, 6)。“NOT IN”之后的另一个选择的结果是（1,2,3,4,5），但总查询的结果是（1,2,3,4,5），我只需要（6）。

所以我需要的是这个选择之间的一个 EXCEPT，而我得到的是一个 INTERSECT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:57:22.883

```
SELECT DISTINCT Carta_ID
FROM Carta_Alarme
INNER JOIN Alarme ON Carta_Alarme.Alarme_ID = Alarme.ID
WHERE (
YEAR( Alarme.dtOcorrencia ) = 2011
) AND Carta_ID NOT
IN (

SELECT DISTINCT Carta_ID
FROM Carta_Alarme
INNER JOIN Alarme ON Carta_Alarme.Alarme_ID = Alarme.ID
WHERE (
YEAR( Alarme.dtOcorrencia ) = 2012
)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:57:05.483

```
SELECT Carta_ID
FROM Carta_Alarme
INNER JOIN Alarme ON Carta_Alarme.Alarme_ID = Alarme.ID
GROUP BY Carta_ID
HAVING sum(YEAR(Alarme.dtOcorrencia) = 2011) > 0 
   and sum(YEAR(Alarme.dtOcorrencia) = 2012) = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:20:47.313

[SQL小提琴](http://www.sqlfiddle.com/#!2/4acc9/5/0)

这实际上是一个[减集操作](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29#EXCEPT_operator)

```
SELECT DISTINCT ca.Carta_ID
FROM Carta_Alarme ca
INNER JOIN Alarme a ON ca.Alarme_ID = a.ID
left join (SELECT DISTINCT Carta_ID
           FROM Carta_Alarme
           INNER JOIN Alarme ON Carta_Alarme.Alarme_ID = Alarme.ID
           WHERE YEAR( Alarme.dtOcorrencia ) = 2012) ca2 on ca2.Carta_id = ca.Carta_id
WHERE YEAR( a.dtOcorrencia ) = 2011
      and ca2.Carta_id is null 
```

# java - 当文件为 DIR 时，文件 isDirectory() 为 false

> ID：13824804
> 
> 赞同：1
> 
> 时间：2012-12-11T16:54:18.333
> 
> 标签：java, android, file

在我的片段中，我有文件和文件夹的列表，还有一个用于文件位置的 onclick 侦听器。我试图只打开目录而不是文件，但即使文件是目录，我的方法 isDirectory() 总是给我 false。

我的代码

```
void fileList(String s) {
    currentPath = s;
    items = new ArrayList<String>();
    path = new ArrayList<String>();
    File f = new File(s);
    File[] files = f.listFiles();

    for(int i = 0; i < files.length; i++) {
        File file = files[i];

            if(!file.isHidden() && file.canRead()) {
            path.add(file.getPath());

            if(file.isDirectory()) {
                items.add(file.getName() + "/");
            }

            else {
                items.add(file.getName());
            }
        }
    }
    MyAdapter adapter = new MyAdapter(getActivity(), R.layout.row, items);
    ListView myList = (ListView) view.findViewById(R.id.list);
    myList.setAdapter(adapter);
    myList.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            File f = new File(items.get(arg2));
            if(f.isDirectory()) { // <-its always give me false here;
                fileList(path.get(arg2));
            }
            else {
                return;
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:00:50.083

```
File f = new File(items.get(arg2));
if(f.isDirectory()) { // <-always false because it is a new File... 
```

使用完整路径创建文件，而不仅仅是名称，或者它正在使用目录名称在您的位置创建一个新的空文件，而不是指向目录...

```
File f = new File(path.get(arg2) + "/" + items.get(arg2));
if(f.isDirectory()) { // <-now it will perform the check; 
```

检查您是否需要额外的 Slash，它未经测试。

# c# - 如何在不阻塞 UI 线程的情况下依次调用多个 WCF 方法？

> ID：13824805
> 
> 赞同：0
> 
> 时间：2012-12-11T16:54:31.250
> 
> 标签：c#, wcf, asynchronous, synchronization

我必须在不阻塞 UI 线程的情况下依次调用多个 WCF 方法。

每个方法都必须在调用下一个方法之前完成。

我已经使用 svcutil 设置了我的 WCF 服务，因此我有一个可用的同步方法的异步版本。

如果我调用异步版本，这些方法将同时执行，这是我想要避免的。

如果我调用同步版本，UI 线程被阻塞，所以我的 UI 没有响应，这是我想要避免的。

如何调用异步版本并在下一次调用之前等待每个调用完成，而不阻塞 UI 线程？

假设我必须循环每次出现要由 WCF 方法处理的对象：

```
foreach (MyObject obj in SomeCollection)
{
    myWCFProxy.TreatObject(obj); // This is a duplex service and I am handling its callback in a separate method.
    // I would like to wait here (without blocking the UI thread) until the method returns.
} 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:16:12.333

您不能在异步方法中包装一系列同步 WCF 调用吗？这可以防止代码在您的 UI 线程上执行，但以线性方式执行您的 WCF 调用。

另一种选择是在前一个 WCF 方法的回调中调用后续 WCF 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:07:36.567

根据您的描述，最简单的解决方案可能是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)同步执行 WCF 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:30:41.883

如果可以选择，我建议修改 WCF 服务以`MyObject`一次获取多个 s 并根据需要处理它们。然后您在客户端上的代码变为：

```
myWCFProxy.TreatObjects(SomeCollection); //be sure to handle the callback 
```

在 WCF 方面：

```
foreach (var obj in SomeCollection)
    TreatObject(obj); //it's synchronous, so it waits! 
```

# c# - 将同步方法内联到异步方法的巨大性能损失

> ID：13824809
> 
> 赞同：0
> 
> 时间：2012-12-11T16:54:49.003
> 
> 标签：c#, .net, async-await

我有一个简单的性能测试，间接调用`WriteAsync`了很多次。只要`WriteAsync`执行如下所示，它就可以合理地执行。但是，当我内联`WriteByte`到时`WriteAsync`，性能会下降大约 7 倍。

（要明确：我所做的**唯一**更改是将包含`WriteByte`调用的语句替换为`WriteByte`.）

谁能解释为什么会这样？我已经查看了使用 Reflector 生成的代码的差异，但没有什么比它可以解释巨大的性能命中更让我印象深刻的了。

```
public sealed override async Task WriteAsync(
    byte[] buffer, int offset, int count, CancellationToken cancellationToken)
{
    var writeBuffer = this.WriteBuffer;
    var pastEnd = offset + count;

    while ((offset < pastEnd) && ((writeBuffer.Count < writeBuffer.Capacity) ||
        await writeBuffer.FlushAsync(cancellationToken)))
    {
        offset = WriteByte(buffer, offset, writeBuffer);
    }

    this.TotalCount += count;
} 
```

```
private int WriteByte(byte[] buffer, int offset, WriteBuffer writeBuffer)
{
    var currentByte = buffer[offset];

    if (this.previousWasEscapeByte)
    {
        this.previousWasEscapeByte = false;
        this.crc = Crc.AddCrcCcitt(this.crc, currentByte);
        currentByte = (byte)(currentByte ^ Frame.EscapeXor);
        ++offset;
    }
    else
    {
        if (currentByte < Frame.InvalidStart)
        {
            this.crc = Crc.AddCrcCcitt(this.crc, currentByte);
            ++offset;
        }
        else
        {
            currentByte = Frame.EscapeByte;
            this.previousWasEscapeByte = true;
        }
    }

    writeBuffer[writeBuffer.Count++] = currentByte;
    return offset;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:25:01.010

`async`编译器将方法重写为巨大的状态机，与使用`yield return`. 您所有的本地人都成为状态机类中的字段。编译器目前根本不会尝试对此进行优化，因此任何优化都取决于编码器。

每个本来可以愉快地坐在寄存器中的本地人现在正在被读取和写入内存。*将同步代码从*方法中重构`async`到同步方法中是一种非常有效的性能优化——你只是在做相反的事情！

# asp.net-mvc - 登录到 MVC ASP.Net 应用程序后重定向到 returnurl 的正确方法是什么？

> ID：13824810
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:54:50.657
> 
> 标签：asp.net-mvc, authentication, asp.net-mvc-routing

这是我的登录控制器

```
 // POST: /Account/Login

    [AllowAnonymous]
    [HttpPost]

    public ActionResult Login(LoginModel model, string ReturnUrl)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                if (Url.IsLocalUrl(ReturnUrl))
                {
                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    return RedirectToAction("Login", "Login");
                }
            }
            else
            {
                ModelState.AddModelError("invalid", "The user name or password provided is incorrect.");

            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

当我开始调试时，这是登录页面上的 url：

```
http://localhost:8085/MobileApprover/Login/Login?ReturnUrl=%2fMobileApprover%2f&AspxAutoDetectCookieSupport=1 
```

这是我用来发布的表格

```
<form class="form" action="/MobileApprover/Login/Login?ReturnUrl=<%=Request.QueryString["ReturnUrl"]%>" method="post">

<input type="text" class="span12" name="UserName" placeholder="User Name" />
<input type="password" class="span12" name="Password" class="" placeholder="Password"/>

<label class="checkbox"> 
    <input type="checkbox" name="RememberMe" class="" /> 
Remember Me? 
</label>                   
<button type="submit"">Login</button>        
       <%:
          Html.ValidationSummary()   
       %> 
```

登录后我在这个网址：

```
 http://localhost:8085/MobileApprover/Login/Login?ReturnUrl=%2fMobileApprover%2f&AspxAutoDetectCookieSupport=1#/MobileApprover/Login/Login?ReturnUrl=/MobileApprover/ 
```

我想在这个 url http:localhost:8085/MobileApprover 因为当我输入那个 url（调试时）家庭控制器正确地显示视图。

我在这一点上做错了什么？我相信这个问题与返回 url 以及我如何处理它有关，但我已经尝试过

```
return Redirect(ReturnURL) 
```

但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T12:02:52.250

我最终稍微清理了我的代码并且能够得到

```
Redirect(ReturnUrl); 
```

工作，或者你可以使用

```
 Session.Clear();
        FormsAuthentication.SignOut();
        return RedirectToAction("Index", "Home"); 
```

对于注销功能

# java - 用Java压缩加密文件

> ID：13824811
> 
> 赞同：4
> 
> 时间：2012-12-11T16:54:53.640
> 
> 标签：java, file, encryption, zip

压缩文件时遇到问题。我正在制作的应用程序允许您向一组文件添加密码，然后使用 DES 加密这些文件（在更改为 AES 的过程中），然后保存到文件夹中。但是在它们被加密和密码保护之后如何压缩它们呢？我已经指定了加密开始使其更容易的位置。

```
package gui;
    import java.awt.BorderLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.awt.event.MouseAdapter;
    import java.awt.event.MouseEvent;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.security.AlgorithmParameters;
    import java.security.spec.KeySpec;

    import javax.crypto.Cipher;
    import javax.crypto.CipherInputStream;
    import javax.crypto.CipherOutputStream;
    import javax.crypto.SecretKey;
    import javax.crypto.SecretKeyFactory;
    import javax.crypto.spec.IvParameterSpec;
    import javax.crypto.spec.PBEKeySpec;
    import javax.crypto.spec.SecretKeySpec;
    import javax.swing.ImageIcon;
    import javax.swing.JFileChooser;
    import javax.swing.JMenuItem;
    import javax.swing.JOptionPane;
    import javax.swing.JPanel;
    import javax.swing.JPopupMenu;
    import javax.swing.JScrollPane;
    import javax.swing.JTable;
    import javax.swing.table.DefaultTableModel;

    public class FileTable extends JPanel {

        /**
         * 
         */
        private static final long serialVersionUID = 1L;
        private JTable table;
        private DefaultTableModel tableModel = new DefaultTableModel(new String[] {"File", "Size", "Status" }, 0);
        private File dir;
        private File temp;
        private JPopupMenu popup;
        private String key;
        private PasswordStorage passwordStorage;
        private JFileChooser fileChooser;
        private static String salt = "loquetdeliciouslysalty";
        private static byte[] IV;

        public FileTable() {

            // Set Layout Manager
            setLayout(new BorderLayout());

            // Create Swing Components
            table = new JTable();
            table.setModel(tableModel);
            table.setDropTarget(new TableDnD(table));
            table.setShowGrid(false);
            table.setFillsViewportHeight(true);
            table.getColumnModel().getColumn(0).setPreferredWidth(250);

            passwordStorage = new PasswordStorage();
            fileChooser = new JFileChooser();
            popup = new JPopupMenu();

            JMenuItem removeItem = new JMenuItem("Remove");
            removeItem.setIcon(new ImageIcon("removeMenu.png"));
            popup.add(removeItem);

            // Add Components to pane
            add(new JScrollPane(table), BorderLayout.CENTER);

            table.addMouseListener(new MouseAdapter() {
                public void mousePressed(MouseEvent e) {
                    int row = table.rowAtPoint(e.getPoint());
                    table.getSelectionModel().setSelectionInterval(row, row);

                    if(e.getButton() == MouseEvent.BUTTON3) {
                        popup.show(table, e.getX(), e.getY());
                    }
                }
            });

            removeItem.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                    int row = table.getSelectedRow();
                    if(row > -1) {
                        tableModel.removeRow(table.getSelectedRow());
                    }
                }
            });
        }

        public boolean isTableEmpty() {

            if(tableModel.getRowCount() == 0) {
                return true;
            }
            else {
                return false;
            }
        }

        public void addFile(File file) {
            tableModel.addRow(new Object[]{file, file.length() + " kb","Not Processed"});
        }

        public void removeFile() {
            int[] rows = table.getSelectedRows();

            for(int i = 0; i < rows.length; i++) {
                tableModel.removeRow(rows[i]-i);
            }
        }

        public void clearTable()
        {
            int rowCount = tableModel.getRowCount();

            for(int i = 0; i < rowCount; i++) {
                tableModel.removeRow(0);
            }

            table.removeAll();
        }

        public void encrypt() {

            if(!isTableEmpty()) {
                try {
                    do {
                        key = JOptionPane.showInputDialog(this, 
                                "Enter password", "Password", 
                                JOptionPane.OK_OPTION|JOptionPane.PLAIN_MESSAGE);   // key needs to be at least 8 characters for DES

                        if(key == null) break;
                    } while(key.length() < 8);

                    // If OK and length of password >= 8 encrypt files
                    if(key != null) {

                        // Store password
                        passwordStorage.write(key);

                        // Custom Folder for encrypted files
                        fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);

                        if(fileChooser.showSaveDialog(this) == JFileChooser.APPROVE_OPTION) {
                            dir = fileChooser.getSelectedFile();
                        }

                        else {
                            // Default Folder for decrypted files
                            dir = new File("encrypted"); 
                            dir.mkdir();
                        }

                        for(int i = 0; i < tableModel.getRowCount(); i++) {
                            temp = (File) tableModel.getValueAt(i, 0);

                            FileInputStream fis2 = new FileInputStream(temp);
                            FileOutputStream fos2 = new FileOutputStream(dir + "\\" + (temp.getName()));

                            encrypt(key, fis2, fos2);
                        }

                        for(int i = 0; i < tableModel.getRowCount(); i++) {
                            File toDelete = (File) tableModel.getValueAt(i, 0);
                            toDelete.delete();
                        }

                        // Encryption complete message
                        JOptionPane.showMessageDialog(this, "Files encrypted succesfully!");

                        // CLEAR LIST
                        table.removeAll();
                        clearTable();
                    }
                } catch (Throwable te) { te.printStackTrace(); }
            }
        }

        public void decrypt() {

            if(!isTableEmpty()) {
                try {

                    key = JOptionPane.showInputDialog(this, 
                            "Enter password", "Password", 
                            JOptionPane.OK_OPTION|JOptionPane.PLAIN_MESSAGE);

                    while(!passwordStorage.isPassword(key)) {
                        key = JOptionPane.showInputDialog(this, 
                                "Enter password", "Wrong Password!", 
                                JOptionPane.OK_OPTION|JOptionPane.ERROR_MESSAGE);   
                    }

                    // If OK and length of password >= 8 decrypt files
                    if(key != null) {

                        // Custom Folder for decrypted files
                        fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);

                        if(fileChooser.showSaveDialog(this) == JFileChooser.APPROVE_OPTION) {
                            dir = fileChooser.getSelectedFile();
                        }

                        else {
                            // Default Folder for decrypted files
                            dir = new File("decrypted"); 
                            dir.mkdir();
                        }

                        for(int i = 0; i < tableModel.getRowCount(); i++) {
                            temp = (File) tableModel.getValueAt(i, 0);

                            FileInputStream fis2 = new FileInputStream(temp);
                            FileOutputStream fos2 = new FileOutputStream(dir + "\\" + (temp.getName()));

                            decrypt(key, fis2, fos2);
                        }

                        for(int i = 0; i < tableModel.getRowCount(); i++) {
                            File toDelete = (File) tableModel.getValueAt(i, 0);
                            toDelete.delete();
                        }

                        // Encryption complete message
                        JOptionPane.showMessageDialog(this, "Files decrypted succesfully!");

                        // CLEAR LIST
                        table.removeAll();
                        clearTable();   
                    }
                } catch (Throwable te) { te.printStackTrace(); }
            }
        }

        /*************************************************************************************************************
         *      ENCRYPTION METHODS ***********************************************************************************
         *************************************************************************************************************/
        public static void encrypt(String key, InputStream is, OutputStream os) throws Throwable {
            encryptOrDecrypt(key, Cipher.ENCRYPT_MODE, is, os);
        }

        public static void decrypt(String key, InputStream is, OutputStream os) throws Throwable {
            encryptOrDecrypt(key, Cipher.DECRYPT_MODE, is, os);
        }

        public static void encryptOrDecrypt(String key, int mode, InputStream is, OutputStream os) throws Throwable {

            char[] kgen = key.toCharArray();
            byte[] ksalt = salt.getBytes();

            SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
            KeySpec spec = new PBEKeySpec(kgen, ksalt, 65536, 256);
            SecretKey tmp = factory.generateSecret(spec);
            SecretKey aesKey = new SecretKeySpec(tmp.getEncoded(), "AES");
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

            /*DESKeySpec dks = new DESKeySpec((salt + key).getBytes());
            SecretKeyFactory skf = SecretKeyFactory.getInstance("DES");
            SecretKey desKey = skf.generateSecret(dks);
            Cipher cipher = Cipher.getInstance("DES"); // DES/ECB/PKCS5Padding for SunJCE*/

            if (mode == Cipher.ENCRYPT_MODE) {
                cipher.init(Cipher.ENCRYPT_MODE, aesKey);
                CipherInputStream cis = new CipherInputStream(is, cipher);
                AlgorithmParameters params = cipher.getParameters();
                byte[] iv = params.getParameterSpec(IvParameterSpec.class).getIV();
                saveIv(iv);
                doCopy(cis, os);
            } else if (mode == Cipher.DECRYPT_MODE) {
                cipher.init(Cipher.DECRYPT_MODE, aesKey, new IvParameterSpec(getIv()));
                CipherOutputStream cos = new CipherOutputStream(os, cipher);
                doCopy(is, cos);
            }
        }

        public static void saveIv(byte[] iv) {
            IV = iv;
        }

        public static byte[] getIv() {
            return IV;
        }

        public static void doCopy(InputStream is, OutputStream os) throws IOException {

            byte[] bytes = new byte[1024];
            int numBytes;

            while ((numBytes = is.read(bytes)) > 0) {
                os.write(bytes, 0, numBytes);
            }

            os.flush();
            os.close();
            is.close();
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:36:18.893

一句话，我没有看到`invokeLater`在事件处理后进行加密。

1.  首先压缩（如果需要），GZipOutputStream 将 .txt 文件转换为 .txt.gz 文件。
2.  加密
3.  Zip 有一个文件，ZipOutputStream，没有压缩，由`setMethod(ZipOutputStream.STORED)`

代替

```
 for(int i = 0; i < tableModel.getRowCount(); i++) {
                    temp = (File) tableModel.getValueAt(i, 0);
                    FileInputStream fis2 = new FileInputStream(temp);
                    FileOutputStream fos2 = new FileOutputStream(dir + "\\"
                            + (temp.getName()));
                    encrypt(key, fis2, fos2);
                } 
```

经过

```
 // Zip
                ZipOutputStream zipOut = ...
                zipOut.setMethod(ZipOutputStream.STORED); // No compression.

                for(int i = 0; i < tableModel.getRowCount(); i++) {
                    // Single file
                    File originalFile = (File) tableModel.getValueAt(i, 0);
                    FileInputStream originalStream = new FileInputStream(originalFile);

                    // GZipped single file:
                    GZipOutputStream gzipOut = ...; ...

                    // Input of the gzipped thing
                    InputStream gzipResultIn = ...

                    // Make a new ZipEntry:
                    ZipEntry zipEntry = new ZipEntry(originalFile.getName()
                            + ".gz.enc");
                    zipOut.putNextEntry(zipEntry);
                    encrypt(key, gzipResultIn, zipOut); // Should not close the input
                    zipOut.closeEntry();
                }

                zipOut.close(); 
```

对 gzip 压缩的中间结果使用**管道**（连接输入和输出、PipedInputStream、PipedOutputStream）会更好。但是你可以先试试 ByteArrayOutputStream、ByteArrayInputStream，或者像你做一个临时文件一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:49:01.767

几乎没有理由在加密后执行压缩，因为压缩要求输入数据包含可以压缩的模式。另一方面，加密将产生与随机无法区分的密文。因此，无法压缩此数据的可能性非常高。您应该在加密之前压缩数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:15:59.047

只需实例化您的文件流并使用：

[http://docs.oracle.com/javase/6/docs/api/java/util/zip/GZIPOutputStream.html](http://docs.oracle.com/javase/6/docs/api/java/util/zip/GZIPOutputStream.html)

# sql - 相关子查询

> ID：13824819
> 
> 赞同：0
> 
> 时间：2012-12-11T16:55:38.700
> 
> 标签：sql, oracle, oracle11g, correlated-subquery

```
Create Table NEW AS (
SELECT
"60+ DAYS",
"30-60 DAYS",
"7-30 DAYS",
( select ("60+ DAYS"+"30-60 DAYS"+"7-30 DAYS")
  from Schema.Table
  Where Schema.Table.Column1 like '%X%'
    and (Schema.Table.Column2 like '%Y%' or Schema.Table.Column2 like '%Y%')
) as "TOTAL",
"ROLE OWNERS NAME",
"ROLE OWNERS EMAIL",
 FROM Schema.Table
Where Schema.Table.Column1 like '%X%'
  and (Schema.Table.Column2 like '%Y%' or Schema.Table.Column2 like '%Y%' )
ORDER BY "60+ DAYS",
         "30-60 DAYS",
         "7-30 DAYS" desc; 
```

有人可以建议我如何关联我的子查询，

“60+ 天”、“30-60 天”、“7-30 天”、“角色所有者姓名”、“角色所有者电子邮件”、X、Y

是同一个表中的所有列，我需要将每行前三列的值相加，并将它们作为 TOTAL 附加到查询结果中。任何帮助表示赞赏，使用 SQL Plus，11g 机架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:04:26.600

不确定我是否理解您要执行的操作，但是删除子查询呢？

```
SELECT
  "60+ DAYS",
  "30-60 DAYS",
  "7-30 DAYS",
  ("60+ DAYS" + "30-60 DAYS" + "7-30 DAYS") as "TOTAL",
  ... 
```

# html - 响应式网站 - 大小问题？

> ID：13824828
> 
> 赞同：0
> 
> 时间：2012-12-11T16:56:06.720
> 
> 标签：html, css, mobile

我目前正在为自己创建一个通用的响应式模板，因为到目前为止我还没有真正接触到设计的这一面。

将大小调整到大约 600 像素时，我的“Content Div”出现问题（当问题所在的分辨率正确时，会出现红色边框）。即使我设置了 2300px 的静态高度，我的内容 div 也不会再展开，所以内容只是漂浮在外面，内容 div 不会展开。

```
 @media only screen   
and (max-width : 603px) {  

/* Styles */  
#column_wrapper img {margin-left:25.33%;padding-right: 20%;}
#column1_content{height:500px;}
#column2_content{height:500px;}
#column3_content{height:500px;}
#column_wrapper{border:1px solid red;height:300px;float: left;}
#content{height:2300px;margin-top: 100px;margin-bottom: 20%;}

} 
```

该网站可以在[响应模板中找到](http://www.jn-design.co.uk/Responsive)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:21:09.167

当浮动元素位于容器框内时会出现问题，该元素不会自动强制容器的高度调整为浮动元素。当一个元素浮动时，其父元素不再包含它，因为浮动已从流中移除。

您不需要为 div#content 使用 clearfix 指定高度。这将解决它;）

```
.clearfix:after {
content: ".";
display: block;
clear: both;
visibility: hidden;
line-height: 0;
height: 0;
}

.clearfix {
display: inline-block;
}

 html[xmlns] .clearfix {
display: block;
}

* html .clearfix {
height: 1%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:14:45.513

不要在 div#content 中使用静态高度，只使用溢出：隐藏；并删除#column1_content、#column2_content 和#column3_content 中的静态高度

相关：[http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:16:52.463

这是因为**里面**的元素是浮动的。当您浮动一个元素时，它会将该元素从内容流中取出。这意味着这些元素不会推出 div 并使用内容扩展它。

# ios - iOS - 无法显示下载的图像

> ID：13824831
> 
> 赞同：0
> 
> 时间：2012-12-11T16:56:17.573
> 
> 标签：ios, uiimage, nsdata

我使用下面的代码下载了图像，但每当我尝试显示它们时，什么都没有出现。我已经测试了从应用程序（在模拟器中）将图像下载到我的桌​​面，并且所有图像都创建得很好。所以我知道它们被保存到应用程序的 Documents 目录中。

关于我做错了什么的任何想法？

下载图像代码：

```
-(void)saveThumbnails:(NSMutableArray *)thumbnails{
    for(NSNumber *videoID in thumbnails){
        // Get an image from the URL below
        NSURL *thumbnailURL = [self generateThumbnailURL:[videoID intValue]];
        UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:thumbnailURL]];

        NSLog(@"%f,%f",image.size.width,image.size.height);

        // Let's save the file into Document folder.
        // You can also change this to your desktop for testing. (e.g. /Users/kiichi/Desktop/)
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);//Find Application's Document Directory
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"DownloadedThumbnails"];
//        NSString *dataPath = @"/Users/macminidemo/Desktop/gt";//DEBUG SAVING IMAGE BY SAVING TO DESKTOP FOLDER

        //Check if Sub-directory exists, if not, try to create it
        if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath]){
            NSError* error;
            if([[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error]){
                NSLog(@"New Folder Created!");
            }
            else
            {
                NSLog(@"[%@] ERROR: attempting to write create new directory", [self class]);
                NSAssert( FALSE, @"Failed to create directory maybe out of disk space?");
            }
        }
        NSArray *splitFilename = [[self generateThumbnailFilename:[videoID intValue]] componentsSeparatedByString:@"."];//Break Filename Extension Off (not always PNGs)
        NSString *subString = [splitFilename objectAtIndex:0];
        NSString *formattedFilename = [NSString stringWithFormat:@"%@~ipad.png",subString];
        NSString *localFilePath = [dataPath stringByAppendingPathComponent:formattedFilename];
        NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(image)];
        [imageData writeToFile:localFilePath atomically:YES];
        NSLog(@"Image: %@ Saved!",formattedFilename);
    }
} 
```

显示图像代码：

```
if(currentVideo.thumbnail!=(id)[NSNull null] || ![currentVideo.thumbnail isEqualToString:@"missing_image.png"]){
    NSArray *splitFilename = [currentVideo.thumbnail componentsSeparatedByString:@"."];//Break Filename Extension Off (not always PNGs)
    NSString *subString = [splitFilename objectAtIndex:0];
    NSString *formattedFilename = [NSString stringWithFormat:@"%@~ipad.png",subString];

    UIImage *thumbnailImage = [UIImage imageNamed:formattedFilename];

    NSLog(@"Image Name: %@",formattedFilename);
    [videoThumbnail setImage:thumbnailImage];
    [buttonVideo addSubview:videoThumbnail];
}else{
    UIImage *thumbnailImage = [UIImage imageNamed:@"video-details-thumbnail"];
    [videoThumbnail setImage:thumbnailImage];
    [buttonVideo addSubview:videoThumbnail];
} 
```

*并且显示 buttonVideo 或类似的东西没有问题。我已经测试了只是设置了一个测试图像，并且一个显示很好（即单独运行时的“else”语句使用默认缩略图就可以正常工作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:17:05.107

的文档`imageNamed`说它适用于应用程序 main **bundle**中的文件。这表明它仅适用于作为应用内资源提供的图像。尝试`imageWithContentsOfFile:`获取文档目录的内容。

# android - Android : 了解 GCM 的一些问题

> ID：13824833
> 
> 赞同：0
> 
> 时间：2012-12-11T16:56:25.373
> 
> 标签：android, google-cloud-messaging

我正在尝试获取并推送通知（通知设备连接到数据源，因为它已更改/更新）

我阅读了很多关于它的教程，并试图在我的案例中应用它来帮助我，但实际上我在**理解 GCM 如何工作时遇到了一些问题**

我已在[https://code.google.com/apis/console](https://code.google.com/apis/console)注册并获取**SENDER ID**和**APIKEY**

现在我有一些问题：

1.  您是在每次我们启动应用程序时将设备注册到服务还是仅第一次？

2.  我们将 GCM 用于（仅通知设备发生某事）还是（通知并获取有关什么是变化的信息）？

3.  为什么这个操作需要（客户端和服务器）我的意思是（客户端）没关系因为他会收到推送通知，但是（**服务器**在这里意味着什么）:(，因为我认为这里的服务器将是谷歌它自己通知设备

4.  在这种情况下，当我们使用**APIKEY**

* * *

想法是：

我的网站上有 SQL Server 数据库，并且有两个用户需要的小型 android 应用程序（处理它），当任何用户向数据库添加一条记录时通知另一个用户

提前致谢 ，，

问候 ：）

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:52:31.983

1) 仅在需要时才向 GCM 注册。例如当你打电话时

```
GCMRegistrar.getRegistrationId(appContext); 
```

它返回一个空白字符串。这通常会在您第一次启动应用程序时发生。

2) 这取决于您要尝试的数据是什么以及它是否适合 4K 有效负载限制。查看[Send-to-Sync vs. Messages with Payload](http://developer.android.com/google/gcm/adv.html#collapsible) Google 帮助主题。

3) 您的服务器是将消息发送到 GCM 服务器的服务器。然后 GCM 服务器将消息向下发送到应用程序。看看我为我帮助创建的服务写的这篇博客文章：http: [//blog.andromo.com/2012/how-does-airbop-push-messaging-work/](http://blog.andromo.com/2012/how-does-airbop-push-messaging-work/)它应该有助于解释它是如何工作的。在说明中，您可以用您自己的服务器替换我们的服务器。

4) 您将 API 密钥作为消息的一部分发送到 GCM 服务器，详情如下：http: [//developer.android.com/google/gcm/gcm.html#request](http://developer.android.com/google/gcm/gcm.html#request)

所以在以下请求中：

```
Content-Type:application/json
Authorization:key=AIzaSyB-1uEai2WiUapxCs2Q0GZYzPu7Udno5aA

{
  "registration_ids" : ["APA91bHun4MxP5egoKMwt2KZFBaFUH-1RYqx..."],
  "data" : {
    ...
  },
} 
```

授权：key=YOUR_API_KEY

# java - Java 7 是否支持触控板同时水平和垂直滚动？

> ID：13824838
> 
> 赞同：1
> 
> 时间：2012-12-11T16:57:09.810
> 
> 标签：java

## 可能的相关资料：

我正在使用 Ubuntu 12.10。垂直和水平滚动都可以在我的 Firefox 窗口中使用（因此，问题不在于内核/OSX）。

## 问题

在 Java7 中，我想让水平和垂直滚动同时在我的 awt/swing 应用程序中工作。

如果我使用 MouseWheelListener，我只会得到垂直事件。（我没有得到代表水平滚动的“移位”事件。）

如果我使用 ScrollPane，则只有垂直滚动有效。我不能水平滚动。

## 问题：

我需要做什么才能使水平+垂直滚动同时在 Java 7 中工作？

注意：“无法完成不是可接受的答案。” 我正在寻找有关在必要时重新编译 JVM 的说明，或者如果这更容易获得原始触控板事件。

# oracle-sqldeveloper - sql developer 无法启动

> ID：13824839
> 
> 赞同：0
> 
> 时间：2012-12-11T16:57:09.020
> 
> 标签：oracle-sqldeveloper

我遇到了一个相当奇怪的场景，不知道有没有人看到它。直到今天早上，我安装了一个 sql developer version 3.xx 并且多年来一直正常工作......当我试图将 300K+ 记录的视图导出到一个 excel 文件时。然后我离开了 sql developer，但是当我回来时，我无法再启动应用程序。没有错误，但什么也没发生。我进入应用程序内的 sqldeveloper 文件夹并使用 cmd.com 启动应用程序，这是错误（虽然不确定我是否应该从命令提示符运行它）

```
Microsoft Windows [Version 6.2.9200]
(c) 2012 Microsoft Corporation. All rights reserved.

C:\sqldeveloper\sqldeveloper\bin>sqldeveloper
java.awt.AWTError: Assistive Technology not found: com.sun.java.accessibility.Ac
cessBridge
        at java.awt.Toolkit.loadAssistiveTechnologies(Toolkit.java:773)
        at java.awt.Toolkit.getDefaultToolkit(Toolkit.java:872)
        at java.awt.Window.getToolkit(Window.java:1174)
        at java.awt.Window.init(Window.java:396)
        at java.awt.Window.<init>(Window.java:434)
        at java.awt.Frame.<init>(Frame.java:403)
        at javax.swing.JFrame.<init>(JFrame.java:202)
        at oracle.ide.IdeCore$StartupWindow.<init>(IdeCore.java:1960)
        at oracle.ide.IdeCore.startupImpl(IdeCore.java:1148)
        at oracle.ide.Ide.startup(Ide.java:703)
        at oracle.ideimpl.DefaultIdeStarter.startIde(DefaultIdeStarter.java:35)
        at oracle.ideimpl.Main.start(Main.java:184)
        at oracle.ideimpl.Main.main(Main.java:146)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at oracle.ide.boot.PCLMain.callMain(PCLMain.java:62)
        at oracle.ide.boot.PCLMain.main(PCLMain.java:54)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at oracle.classloader.util.MainClass.invoke(MainClass.java:128)
        at oracle.ide.boot.IdeLauncher.bootClassLoadersAndMain(IdeLauncher.java:
189)
        at oracle.ide.boot.IdeLauncher.launchImpl(IdeLauncher.java:89)
        at oracle.ide.boot.IdeLauncher.launch(IdeLauncher.java:65)
        at oracle.ide.boot.IdeLauncher.main(IdeLauncher.java:54)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at oracle.ide.boot.Launcher.invokeMain(Launcher.java:713)
        at oracle.ide.boot.Launcher.launchImpl(Launcher.java:115)
        at oracle.ide.boot.Launcher.launch(Launcher.java:68)
        at oracle.ide.boot.Launcher.main(Launcher.java:57) 
```

有人知道发生了什么吗？我试图从 Oracle 站点删除并获取另一个 sqldeveloper 副本，但情况并没有改善。有什么我忽略的吗？我相信导出对应用程序做了一些事情，但我不够聪明，无法弄清楚是什么。非常感谢您的提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-23T18:19:47.793

try running the batch file to start it

It's probably in the same folder as the sqldeveloper.exe. It may be a Java level mismatch in which case you will be warned and asked if you want to proceed, or you can install a compatible version.

# python - pandas read_csv中的转义引号

> ID：13824840
> 
> 赞同：16
> 
> 时间：2012-12-11T16:57:10.727
> 
> 标签：python, pandas, csv

我无法创建在使用时已转义引号的数据框[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)。
（注意：R`read.csv`按预期工作。）

### 我的代码：

```
import pandas as pd
pd.read_csv('data.csv')
#error!
CParserError: Error tokenizing data. C error: Expected 2 fields in line 4, saw 3 
```

### 数据.csv

```
SEARCH_TERM,ACTUAL_URL
"bra tv bord","http://www.ikea.com/se/sv/catalog/categories/departments/living_room/10475/?se%7cps%7cnonbranded%7cvardagsrum%7cgoogle%7ctv_bord"
"tv på hjul","http://www.ikea.com/se/sv/catalog/categories/departments/living_room/10475/?se%7cps%7cnonbranded%7cvardagsrum%7cgoogle%7ctv_bord"
"SLAGBORD, \"Bergslagen\", IKEA:s 1700-tals serie","http://www.ikea.com/se/sv/catalog/categories/departments/living_room/10475/?se%7cps%7cnonbranded%7cvardagsrum%7cgoogle%7ctv_bord" 
```

如何阅读此 csv 并避免此错误？

*我的猜测是 pandas 正在使用一些正则表达式，这些表达式无法处理第三行的歧义和行程，或者更具体地说：`\"Bergslagen\"`.*

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-11T17:21:01.427

它确实有效，但您必须为嵌入的引号指明转义字符：

```
In [1]: data = '''SEARCH_TERM,ACTUAL_URL
"bra tv bord","http://www.ikea.com/se/sv/catalog/categories/departments/living_room/10475/?se%7cps%7cnonbranded%7cvardagsrum%7cgoogle%7ctv_bord"
"tv p\xc3\xa5 hjul","http://www.ikea.com/se/sv/catalog/categories/departments/living_room/10475/?se%7cps%7cnonbranded%7cvardagsrum%7cgoogle%7ctv_bord"
"SLAGBORD, \\"Bergslagen\\", IKEA:s 1700-tals serie","http://www.ikea.com/se/sv/catalog/categories/departments/living_room/10475/?se%7cps%7cnonbranded%7cvardagsrum%7cgoogle%7ctv_bord"'''

In [2]: df = read_csv(StringIO(data), escapechar='\\', encoding='utf-8')

In [3]: df
Out[3]: 
                                      SEARCH_TERM                                         ACTUAL_URL
0                                     bra tv bord  http://www.ikea.com/se/sv/catalog/categories/d...
1                                      tv på hjul  http://www.ikea.com/se/sv/catalog/categories/d...
2  SLAGBORD, "Bergslagen", IKEA:s 1700-tals serie  http://www.ikea.com/se/sv/catalog/categories/d... 
```

*看到这个[要点](https://gist.github.com/4260416)。*

# numbers - 如何检查一个数字是否可以表示为一些给定数字的总和

> ID：13824843
> 
> 赞同：1
> 
> 时间：2012-12-11T16:57:15.367
> 
> 标签：numbers, sum

我有一些整数的列表，例如`[1, 2, 3, 4, 5, 10]` 我还有另一个整数 ( `N`)。例如，`N = 19`。

我想检查我的整数是否可以表示为列表中任意数量的数字的总和：

```
19 = 10 + 5 + 4 
```

或者

```
19 = 10 + 4 + 3 + 2 
```

列表中的每个数字只能使用一次。`N`最多可以筹集到2000或更多。列表的大小可以达到 200 个整数。

有没有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-30T00:46:33.390

蛮力方法需要生成 2^(array_size)-1 个子集以求和并与 target 进行比较`N`。

只需将问题一分为二，就可以显着提高运行时间。以集合的形式存储数组的一半和另一半的所有可能总和。现在可以通过检查一组中的每个数字来确定`n`补码是否存在于另一组中`N`。`n`

这种优化将复杂性降低到大约：`2^(array_size/2)-1+2^(array_size/2)-1=2^(array_size/2 + 1)-2` 原来的一半。

这是一个使用这个想法的 c++ 实现。

```
#include <bits/stdc++.h>
using namespace std; 
bool sum_search(vector<int> myarray, int N) {
        //values for splitting the array in two
        int right=myarray.size()-1,middle=(myarray.size()-1)/2;

        set<int> all_possible_sums1,all_possible_sums2;

        //iterate over the first half of the array
        for(int i=0;i<middle;i++) {
            //buffer set that will hold new possible sums
            set<int> buffer_set;

            //every value currently in the set is used to make new possible sums
            for(set<int>::iterator set_iterator=all_possible_sums1.begin();set_iterator!=all_possible_sums1.end();set_iterator++) 
                buffer_set.insert(myarray[i]+*set_iterator);

            all_possible_sums1.insert(myarray[i]);

            //transfer buffer into the main set
            for(set<int>::iterator set_iterator=buffer_set.begin();set_iterator!=buffer_set.end();set_iterator++) 
                all_possible_sums1.insert(*set_iterator);
        } 

        //iterator over the second half of the array
        for(int i=middle;i<right+1;i++) {
            set<int> buffer_set;    

            for(set<int>::iterator set_iterator=all_possible_sums2.begin();set_iterator!=all_possible_sums2.end();set_iterator++)   
                buffer_set.insert(myarray[i]+*set_iterator);

            all_possible_sums2.insert(myarray[i]);

            for(set<int>::iterator set_iterator=buffer_set.begin();set_iterator!=buffer_set.end();set_iterator++) 
                all_possible_sums2.insert(*set_iterator);
        }

        //for every element in the first set, check if the the second set has the complemenent to make N
        for(set<int>::iterator set_iterator=all_possible_sums1.begin();set_iterator!=all_possible_sums1.end();set_iterator++)  
            if(all_possible_sums2.find(N-*set_iterator)!=all_possible_sums2.end()) 
                return true;                                       
        return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-31T17:23:33.480

4 年半之后，乔纳森[回答了这个问题。](https://stackoverflow.com/a/45395355/1895283)我想在 Python 中发布两个实现（bruteforce 和 Jonathan 的）及其性能比较。

```
def check_sum_bruteforce(numbers, n):
    # This bruteforce approach can be improved (for some cases) by
    # returning True as soon as the needed sum is found;

    sums = []

    for number in numbers:
        for sum_ in sums[:]:
            sums.append(sum_ + number)

        sums.append(number)

    return n in sums

def check_sum_optimized(numbers, n):
    sums1, sums2 = [], []
    numbers1 = numbers[:len(numbers) // 2]
    numbers2 = numbers[len(numbers) // 2:]

    for sums, numbers_ in ((sums1, numbers1), (sums2, numbers2)):
        for number in numbers_:
            for sum_ in sums[:]:
                sums.append(sum_ + number)

            sums.append(number)

    for sum_ in sums1:
        if n - sum_ in sums2:
            return True

    return False

assert check_sum_bruteforce([1, 2, 3, 4, 5, 10], 19)
assert check_sum_optimized([1, 2, 3, 4, 5, 10], 19)

import timeit

print(
    "Bruteforce approach (10000 times):",
    timeit.timeit(
        'check_sum_bruteforce([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 200)',
        number=10000,
        globals=globals()
    )
)

print(
    "Optimized approach by Jonathan (10000 times):",
    timeit.timeit(
        'check_sum_optimized([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 200)',
        number=10000,
        globals=globals()
    )
) 
```

输出（浮点数是秒）：

```
Bruteforce approach (10000 times): 1.830944365834205
Optimized approach by Jonathan (10000 times): 0.34162875449254027 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:57:37.893

丑陋和蛮力的做法：

```
 a = [1, 2, 3, 4, 5, 10]
 b = []
 a.size.times do |c|
    b << a.combination(c).select{|d| d.reduce(&:+) == 19 }
 end
 puts b.flatten(1).inspect 
```

# java - 最终静态方法考试

> ID：13824846
> 
> 赞同：10
> 
> 时间：2012-12-11T16:57:22.890
> 
> 标签：java, static-methods

我一直在学习我的软件开发课程，并从一个示例中遇到了这个问题：

*“为什么在 Java 方法前同时使用 static 和 final 修饰符没有意义？”*

我进行了一些研究，无论我走到哪里，它都说这是不错的做法，并且有充分的理由这样做 - 例如，这个stackoverflow问题： [声明最终静态方法是个坏主意吗？](https://stackoverflow.com/questions/1932399/is-it-a-bad-idea-to-declare-a-final-static-method)

那么，这个问题本身是荒谬的，还是对这个问题有合理的答案？

（此样本文件没有给出的解决方案）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:59:26.873

`static`方法不能被覆盖，因为它们不是与类的实例相关联，而是与类本身相关联。例如，这是您通常调用`static`方法的方式：

```
 MyClass.myStaticMethod() 
```

这就是调用实例方法的方式：

```
 new MyClass().myInstanceMethod() 
```

`final`修饰符与方法一起使用以禁止在扩展类中覆盖它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T17:00:27.483

因为`static` **方法**不能被覆盖。因此，标记它没有意义`final`。

但是请注意，`static final` **变量**（奇怪的是，它们不是变量，因为它们不能更改）非常有用，因为它们的值可以由编译器内联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:32:46.717

静态方法可以被覆盖（尽管这不是技术术语），因为它在运行时被解析，在类链中向上搜索直到找到它。但是这个“功能”可能是一个错误；人们不使用它，人们不知道它，我们应该假装它不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T17:05:29.030

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.2)：

> 类方法总是在不引用特定对象的情况下被调用。尝试使用关键字 this 或关键字 super 引用当前对象是编译时错误。

因此，您不能覆盖静态方法，因为它不属于实例。因此，关键字`this`和`super`不可用，您不能使用[虚拟方法调用](http://en.wikipedia.org/wiki/Virtual_function)。如果你不能使用虚方法调用，那么 final 关键字就没有用了。

我喜欢认为编译器会看到这样的方法声明：

```
public class SomeClass{

    // public static classMethod() becomes
    public static [final] void classMethod(){
        //...
    }

    // and public void instanceMethod() becomes
    public void instanceMethod(SomeClass this, Object super){
        //....
    }

}

public class SomeOtherClass extends SomeClass{

    // overrides
    @Override
    public void instanceMethod(SomeOtherClass this, SomeClass super){
        //...
    }
} 
```

然后你调用`SomeClass instance = new SomeOtherClass().instanceMethod();`它称为`instanceMethod()`of `SomeOtherClass`。

所以编译器不需要复制方法体，只需将引用传递给线程中的当前对象。因此，当您使用虚方法调用时，实际上您是在`instanceMethod`使用对当前对象 ( `this`) 的引用来调用 ，而调用的是当前类的主体方法。

# maven - 在 Archiva 中添加人工制品而不是通过其界面

> ID：13824850
> 
> 赞同：0
> 
> 时间：2012-12-11T16:57:31.547
> 
> 标签：maven, archiva

如何不通过其 Web 界面在[档案中插入人工制品。](http://archiva.apache.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:56:25.707

可以使用 maven 上传工件。

有关详细信息，请参阅 Archiva 用户指南部分`Deploying to Repository`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:23:36.737

可以使用以下方法：

*   通过用户界面上传（我想这是您所说的网络界面）
*   通过任何 WebDAV 客户端连接`http://localhost:8080/archiva/repository/repo-name`（根据您的配置进行调整）
*   使用带有基本身份验证的 HTTP PUT 到与 WebDAV URL 相同的位置（这是 Maven、Ivy 等其他工具会使用的方法）
*   将文件放到文件系统中的正确位置，然后等待 Archiva 的扫描仪拾取更改的工件

正如 Torsten 的回答所表明的那样，使用 Maven 的部署阶段或`deploy:deploy-file`目标（或来自另一个构建工具的等效项）上传可能是您想要的，因为它将负责为工件构建正确的路径并推送任何相关的元数据，假设您使用 Archiva 作为一个 Maven 人工制品存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:16:36.693

您有一个上传屏幕 tru web ui。请参阅[http://www.youtube.com/watch?v=LSXe26inf0Y](http://www.youtube.com/watch?v=LSXe26inf0Y)

# jquery - 如何不断地为盒子设置动画？

> ID：13824851
> 
> 赞同：0
> 
> 时间：2012-12-11T16:57:31.773
> 
> 标签：jquery, jquery-animate

我有两个关于 jquery 的问题：

首先，如何制作一个向右 -> 底部 -> 左 -> 顶部 -> 右......重复移动的框？

当鼠标悬停在 div 容器上时，必须隐藏框...

这是我的来源：

```
$(".container").ready(function(){
    $(".box").animate({left:"100px"}, "slow")
           .animate({top:"100px"}, "slow")
           .animate({left:0},"slow")
           .animate({top:0}, "slow");

});​ 
```

[http://jsfiddle.net/TTstW](http://jsfiddle.net/TTstW)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:59:59.950

[http://jsfiddle.net/TTstW/1/](http://jsfiddle.net/TTstW/1/)

```
(function loop(){
    $(".box").animate({left:"100px"}, "slow")
           .animate({top:"100px"}, "slow")
           .animate({left:0},"slow")
           .animate({top:0}, "slow", loop);

 })(); 
```

您可以使用 CSS 隐藏悬停框：

```
.container:hover .box{
    display:none;
} 
```

[http://jsfiddle.net/TTstW/2/](http://jsfiddle.net/TTstW/2/)

# jquery - 相同的 jQuery 代码返回两个不同的结果——提交按钮文本

> ID：13824852
> 
> 赞同：1
> 
> 时间：2012-12-11T16:57:36.297
> 
> 标签：jquery

我有两个`jQuery`代码 - [http://jsfiddle.net/Lijo/CXGX7/7/](http://jsfiddle.net/Lijo/CXGX7/7/)和[http://jsfiddle.net/Lijo/CXGX7/8/](http://jsfiddle.net/Lijo/CXGX7/8/)。第一个代码返回`undefined`，而第二个代码返回按钮的文本。

**问题**

1.  造成这种结果差异的原因是什么？
2.  为什么第一个代码没有返回按钮的预期文本？

注意：我验证了两者都使用相同`version`的 jQuery（通过 jQuery 的警报）

```
alert($.fn.jquery); 
```

**代码**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.1.js"></script>

<script type="text/javascript">

    alert($('.myButton').attr("value"));

</script>

</head>
<body>

<form method="post" action="Test.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE0MDM4MzYxMjNkZMycQvsYQ+GPFsQHoQ8j/8vEo2vQbqkhfgPc60kxXaQO" />
</div>

<div class="aspNetHidden">

<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWAwKqxqqrCgLi/JazDQKM54rGBqgaroRQTXJkD1LyUlVxAmLRCNfTGVe73swQBMemBtvN" />
</div>
<div>

    <input name="txtEmpName" type="text" id="txtEmpName" />

    <input type="submit" name="Button1" value="Submit" id="Button1" class="myButton" />
</div>
</form>
</body>
</html> 
```

参考

1.  [使用 jQuery 检索 Button 值](https://stackoverflow.com/questions/487056/retrieve-button-value-with-jquery)
2.  [如何确定和打印 jQuery 版本？](https://stackoverflow.com/questions/3240296/how-to-determine-and-print-jquery-version)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:01:45.813

这是因为在第一个版本中，当您的脚本执行时，按钮可能尚未加载到 DOM 中。

在[这个](http://jsfiddle.net/Lijo/CXGX7/7/)版本中，您是`alert`直接在 html 页面中编写的。因此，当页面的该部分加载到浏览器中时，它将立即执行。此时，您的页面的其余部分尚未加载，因此您的`$('.myButton')`选择器将不会返回任何内容（您可以通过 进行检查`$('.myButton').length`）。

在[这个](http://jsfiddle.net/Lijo/CXGX7/8/)版本中，您正在`JavaScript`JsFiddle 的面板中编写此代码。您在此处编写的 JS 代码在`onload`事件处理程序中运行，该处理程序可确保在执行其中的任何 JS 代码之前已加载所有 html。

所以，在第一个版本中，你的代码被转换成这样的东西 -

```
$(document).ready(function () {
    alert($.fn.jquery);
}); 
```

对于第二个版本 -

```
$(document).ready(function () {
    alert($('.myButton').attr("value"));
    alert($.fn.jquery);
}); 
```

**编辑**

`$(document).ready()`只要 DOM 在浏览器中完全加载，就会调用该函数。您将回调函数作为参数传递给该函数，该函数将在发生时调用。通常，你想用 jQuery 做的任何事情，都在回调中完成。这是了解 jQuery 的第一件事。[您可以在此处](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)获得有关它的官方教程。

此方法有点类似于[window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)，不同之处在于它会在您的 HTML 文档加载后立即触发，并`window.onload`在页面的所有内容（包括图像和其他资源）完全加载后调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:03:35.773

因为

```
<script type="text/javascript">
   // some code to run as soon as possible
</script> 
```

不像

```
<script type="text/javascript">
     $(document).ready(function(){
         // some code to run when all page is ready
     }):
</script> 
```

这就是[JQuery 的工作原理](http://docs.jquery.com/Tutorials%3aHow_jQuery_Works)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:03:44.490

当您调用`alert()`第一个示例时，您的按钮未添加到 DOM 中。使用`ready()`回调函数：

```
$(function(){alert($('.myButton').attr("value"));}); 
```

# java - 为什么在 Windows 和 Linux 中从 UTF-8 到 ISO-8859-1 的转换不一样？

> ID：13824859
> 
> 赞同：2
> 
> 时间：2012-12-11T16:58:03.003
> 
> 标签：java, utf-8, iso-8859-1

我在 jar 文件中将以下代码从 UTF-8 转换为 ISO-8859-1，当我在 Windows 中执行此 jar 时，我得到一个结果，而在 CentOS 中我得到另一个结果。可能有人知道为什么吗？

```
public static void main(String[] args) {

  try {

    String x = "Ã„, Ã¤, Ã‰, Ã©, Ã–, Ã¶, Ãœ, Ã¼, ÃŸ, Â«, Â»";

    Charset utf8charset = Charset.forName("UTF-8");
    Charset iso88591charset = Charset.forName("ISO-8859-1");

    ByteBuffer inputBuffer = ByteBuffer.wrap(x.getBytes());
    CharBuffer data = utf8charset.decode(inputBuffer);

    ByteBuffer outputBuffer = iso88591charset.encode(data);
    byte[] outputData = outputBuffer.array();

    String z = new String(outputData);

    System.out.println(z);
  }
  catch(Exception e) {
    System.out.println(e.getMessage());
  }
} 
```

在 Windows 中，java -jar test.jar > test.txt 创建一个文件，其中包含：Ä, ä, É, é, Ö, ö, Ü, ü, ß, «, »

但在 CentOS 中我得到：�?, ä, �?, é, �?, ö, �?, ü, �?, «, »

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:02:14.133

这两行

```
x.getBytes());

String z = new String(outputData); 
```

是平台和默认编码特定的。

* * *

通过避免特定于平台的转换，这可以在 Windows 和 Linux 上按预期运行。

```
String x = "Ä, ä, É, é, Ö, ö, Ü, ü, ß, «, »";

Charset utf8charset = Charset.forName("UTF-8");
Charset iso88591charset = Charset.forName("ISO-8859-1");

ByteBuffer inputBuffer = ByteBuffer.wrap(x.getBytes(utf8charset));
CharBuffer data = utf8charset.decode(inputBuffer);

ByteBuffer outputBuffer = iso88591charset.encode(data);
byte[] outputData = outputBuffer.array();

String z = new String(outputData, iso88591charset);

System.out.println(z); 
```

印刷

```
Ä, ä, É, é, Ö, ö, Ü, ü, ß, «, » 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:07:21.930

在考虑输出之前，您首先应该在 java 中以正确的内部表示形式获取字符串。IE应该是这样的：

```
z.equals("Ä, ä, É, é, Ö, ö, Ü, ü, ß, «, »") == true 
```

上面的内容可以在没有任何输出编码问题的情况下进行验证，因为它只是打印`true`或`false`.

在 Windows 中，您已经通过

```
ByteBuffer inputBuffer = ByteBuffer.wrap(x.getBytes());
CharBuffer data = utf8charset.decode(inputBuffer); 
```

因为您需要从`"Ã„, Ã¤, Ã‰, Ã©, Ã–, Ã¶, Ãœ, Ã¼, ÃŸ, Â«, Â»"`到`"Ä, ä, É, é, Ö, ö, Ü, ü, ß, «, »"`是：

```
ByteBuffer inputBuffer = ByteBuffer.wrap(x.getBytes( windows1252/*explicit windows1252 works on CentOS too*/));
CharBuffer data = utf8charset.decode(inputBuffer); 
```

在这之后，你用 ISO-8859-1 做一些事情，这是徒劳的，因为你的原始字符串中只有一半的字符可以用 ISO-8859-1 表示，更不用说你已经按照上面的方法完成了。之后可以删除代码`utf8charset.decode(inputBuffer)`

所以现在您的代码可能如下所示：

```
String x = "Ã„, Ã¤, Ã‰, Ã©, Ã–, Ã¶, Ãœ, Ã¼, ÃŸ, Â«, Â»";

Charset windows1252 = Charset.forName("Windows-1252");
Charset utf8charset = Charset.forName("UTF-8");

byte[] bytes = x.getBytes(windows1252);
String z = new String(bytes, utf8charset);

                                //Still wondering why you didn't just have this literal to begin with
                                //Check that the strings are internally equal so you know at least that
                                //the code is working

System.out.println(z.equals( "Ä, ä, É, é, Ö, ö, Ü, ü, ß, «, »")); 
System.out.println(z); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:00:30.183

脑海中浮现出三种可能性：

*   您*实际*用于源代码的编码可能因平台而异
*   编译器默认*期望*的编码可能因平台而异（您可以在命令行中指定）
*   调用时使用的平台默认编码`x.getBytes()`可能因平台而异

目前尚不清楚您尝试以何种方式从 UTF-8 转换为 ISO-8859-1 - 因为您的*原始*数据实际上只是一个`String`. 您将调用的结果`x.getBytes()` *视为*UTF-8 编码的数据，但这只是平台默认值......

同样，当你写：

```
String z = new String(outputData); 
```

...这是使用平台默认编码。不要那样做。

您根本不需要字节缓冲区的东西：只需使用编码`text.getBytes(encoding)`和使用解码`new String(data, encoding)`。

# java - ToolTipManager 中的 setDissmissDelay() 方法未设置其值

> ID：13824860
> 
> 赞同：0
> 
> 时间：2012-12-11T16:58:05.220
> 
> 标签：java, swing, timer, awt

问候，

我想`setDissmissDelay()`多次设置方法。但我无法一次又一次地将其设置为特定值。我还尝试使用无限循环，尝试覆盖（ToolTipManager 构造函数在默认修饰符上）。我确定代码工作正常，因为我可以看到它`e.getsource()`在控制台中打印。我试图解决某人提出的这个问题（[这个问题](https://stackoverflow.com/questions/13750104/how-keep-visible-tooltip-while-mouse-is-over-it/13750186#13750186)），在解决这个问题的同时，我在这一点上遇到了困难。这背后的原因是什么？如果我可以设置值怎么办？有没有其他方法可以实现这一目标？

这是我的代码片段：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.*;

public class Hello {
    static JButton button;

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("HelloWorldSwing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        button = new JButton("Hello World");
        button.setToolTipText("Its a tool tip Experiment!");
        frame.getContentPane().add(button);
        button.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseEntered(MouseEvent e) {

                if (e.getSource() == button) {
                    ActionListener tt = new ActionListener() {
                        @Override
                        public void actionPerformed(ActionEvent e) {
                            ToolTipManager.sharedInstance().setDismissDelay(
                                    1000);
                            System.out.println(e.getSource());
                        }
                    };
                    new Timer(100, tt).start();
                }
            }
        });
        frame.pack();
        frame.setVisible(true);

    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

请指导我完成这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:43:41.417

Calling`setDismissDelay()`是一个全局设置，用于指示 Tooltip 在移除之前应在显示屏上保留多长时间。在删除当前工具提示之前，它不会重置时间。正如您在链接问题中所建议的那样，一劳永逸地设置解雇延迟`Integer.MAX_VALUE`应该可以解决问题。

# c# - 看不到命令 行结果

> ID：13824865
> 
> 赞同：0
> 
> 时间：2012-12-11T16:58:15.783
> 
> 标签：c#, command-line, io, prompt

以前有人问过如何在 Visual Studio 中用 C# 运行命令行命令，下面就是答案。
我尝试了同样的方法来调用一个`cccc`可以在命令行上运行的工具。但是当我运行下面的代码时，我没有得到任何结果，也没有任何错误。
概括说明我们如何从 C# 运行与在命令行中相同的命令并获得相同的结果。假设我在命令行上调用一个程序（它可以是任何能够在命令行上运行的程序，例如 cccc、ccm 等）并得到一些结果。如何调用命令行并提供参数，以便它轮流调用 cccc 或其他任何东西，并执行与没有 C# 时相同的操作。

```
string strCmdText;
strCmdText = "/C d: cd D:\\Exercises\\npp52\\PowerEditor\\src && dir /s /b | cccc - --outdir=d:\\myfolder";
System.Diagnostics.Process.Start("CMD.exe", strCmdText); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:07:08.517

在命令末尾添加“暂停”：

```
string strCmdText;
strCmdText = "/C d: cd D:\\Exercises\\npp52\\PowerEditor\\src && dir /s /b | cccc - --outdir=d:\\myfolder & pause";
System.Diagnostics.Process.Start("CMD.exe", strCmdText); 
```

或将控制台标准输出重定向到流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:28:44.640

这里需要更多的魔法与***[OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived%28v=vs.100%29.aspx)***处理程序

```
void Main()
{
    System.Diagnostics.Process proc = new System.Diagnostics.Process();                     
                        proc.StartInfo.FileName="cmd.exe";
                        proc.StartInfo.Arguments = "/c ping 127.0.0.1";
                        proc.StartInfo.UseShellExecute = false;
                        proc.OutputDataReceived += new DataReceivedEventHandler(SortOutputHandler);
                        proc.StartInfo.RedirectStandardOutput = true;   
                        proc.Start();                               
                        proc.BeginOutputReadLine();                     
                        proc.WaitForExit();                             
                        proc.Close();
}

private void SortOutputHandler(object sendingProcess, 
            DataReceivedEventArgs outLine)
        {
            if (!String.IsNullOrEmpty(outLine.Data))
            {
             // Do what You need with out
             Console.WriteLine(outLine.Data);
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:12:11.107

另一个问题是您没有使用`RedirectStandardOutput`，因此输出被丢弃。看看[这个答案](https://stackoverflow.com/a/1040730/22437)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T17:08:14.753

您可以利用[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/bfbyhds5%28v=vs.100%29.aspx)类来更好地定义您的参数，而不是尝试将所有内容都放在字符串中

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = "CMD.EXE";
psi.WorkingDirectory = "D:\\Exercises\\npp52\\PowerEditor\\src ";
psi.Arguments = "/C dir /s /b | cccc - --outdir=d:\\myfolder"";
psi.WindowStyle = ProcessWindowStyle.Normal;
Process.Start(psi); 
```

同样在打开命令窗口的情况下，您可以查看命令中是否存在语法错误

# field - Big-Endian (SPARC) 处理器上的位域排序

> ID：13824870
> 
> 赞同：3
> 
> 时间：2012-12-11T16:58:44.590
> 
> 标签：field, bit, sparc

考虑下面的代码：

```
#include <stdio.h>
#include <stdlib.h>

#define FORCE_CAST(var, type) *(type*)&var

struct processor_status_register
{
unsigned int cwp:5;
unsigned int et:1;
unsigned int ps:1;
unsigned int s:1;
unsigned int pil:4;
unsigned int ef:1;
unsigned int ec:1;
unsigned int reserved:6;

unsigned int c:1;
unsigned int v:1;
unsigned int z:1;
unsigned int n:1;

unsigned int ver:4;
unsigned int impl:4;
}__attribute__ ((__packed__));

struct registers
{
       unsigned long* registerSet;
       unsigned long* globalRegisters;
       unsigned long* cwptr;
       unsigned long wim, tbr, y, pc, npc;
       unsigned short registerWindows;

       /* Though Intel x86 architecture allows un-aligned memory access, SPARC mandates memory accesses to be 8 byte aligned. Without __attribute__ ((aligned (8))) or a preceding dummy byte e.g. unsigned short dummyByte, the code below crashes with a dreaded Bus error and Core dump. For more details, follow the links below:

        http://blog.jgc.org/2007/04/debugging-solaris-bus-error-caused-by.html
        https://groups.google.com/forum/?fromgroups=#!topic/comp.unix.solaris/8SgFiMudGL4
*/

       struct processor_status_register __attribute__ ((aligned (8))) psr;
}__attribute__ ((__packed__));

int getBit(unsigned long bitStream, int position)
{
int bit;
bit = (bitStream & (1 << position)) >> position;
return bit;
}

char* showBits(unsigned long bitStream, int startPosition, int endPosition)
{
// Allocate one extra byte for NULL character
char* bits = (char*)malloc(endPosition - startPosition + 2);
int bitIndex;
for(bitIndex = 0; bitIndex <= endPosition; bitIndex++)
bits[bitIndex] = (getBit(bitStream, endPosition - bitIndex)) ? '1' : '0';
bits[bitIndex] = '\0';
return bits;
}

int main()
{
struct registers sparcRegisters; short isLittleEndian;

// Check for Endianness
        unsigned long checkEndian = 0x00000001;
        if(*((char*)(&checkEndian)))
            {printf("Little Endian\n"); isLittleEndian = 1;} // Little
Endian architecture detected
        else
            {printf("Big Endian\n"); isLittleEndian = 0;} // Big
Endian architecture detected

unsigned long registerValue = 0xF30010A7;

unsigned long swappedRegisterValue = isLittleEndian ? registerValue :
__builtin_bswap32(registerValue);

sparcRegisters.psr = FORCE_CAST(swappedRegisterValue, struct
processor_status_register);
registerValue = isLittleEndian ? FORCE_CAST (sparcRegisters.psr,
unsigned long) : __builtin_bswap32(FORCE_CAST (sparcRegisters.psr,
unsigned long));
printf("\nPSR=0x%0X, IMPL=%u, VER=%u, CWP=%u\n", registerValue,
sparcRegisters.psr.impl, sparcRegisters.psr.ver,
sparcRegisters.psr.cwp);
printf("PSR=%s\n",showBits(registerValue, 0, 31));

sparcRegisters.psr.cwp = 7;
sparcRegisters.psr.et = 1;
sparcRegisters.psr.ps = 0;
sparcRegisters.psr.s = 1;
sparcRegisters.psr.pil = 0;
sparcRegisters.psr.ef = 0;
sparcRegisters.psr.ec = 0;
sparcRegisters.psr.reserved = 0;
sparcRegisters.psr.c = 0;
sparcRegisters.psr.v = 0;
sparcRegisters.psr.z = 0;
sparcRegisters.psr.n = 0;
sparcRegisters.psr.ver = 3;
sparcRegisters.psr.impl = 0xF;

registerValue = isLittleEndian ? FORCE_CAST (sparcRegisters.psr,
unsigned long) : __builtin_bswap32(FORCE_CAST (sparcRegisters.psr,
unsigned long));

printf("\nPSR=0x%0X, IMPL=%u, VER=%u, CWP=%u\n", registerValue,
sparcRegisters.psr.impl, sparcRegisters.psr.ver,
sparcRegisters.psr.cwp);

printf("PSR=%s\n\n",showBits(registerValue, 0, 31));

return 0;
} 
```

我在 SPARC 上的 Solaris 10 上使用 gcc-4.7.2 来编译以下代码以生成 Big-Endian 输出：

```
Big Endian

PSR=0xF30010A7, IMPL=3, VER=15, CWP=20
PSR=11110011000000000001000010100111

PSR=0x3F00003D, IMPL=15, VER=3, CWP=7
PSR=00111111000000000000000000111101 
```

我在 Intel-x86 上的 Ubuntu-10.04 上使用 gcc-4.4 来编译以下代码以生成 Little-Endian 输出：

```
Little Endian

PSR=0xF30010A7, IMPL=15, VER=3, CWP=7
PSR=11110011000000000001000010100111

PSR=0xF30000A7, IMPL=15, VER=3, CWP=7
PSR=11110011000000000000000010100111 
```

虽然后一个符合预期，但谁能解释一下 Big-Endian 对应的内容？考虑到 showBits() 方法是正确的，PSR=0x3F00003D 如何产生 IMPL=15、VER=3、CWP=7 值？在 Big-Endian 系统的内存中，位域是如何排列和解释的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:57:59.653

> ... PSR=0x3F00003D 产生 IMPL=15、VER=3、CWP=7 值？

它不能。我不知道您为什么要调用 __builtin_bswap32 但 0x3F00003D 并不代表您初始化 sparcRegisters 结构的内存。

让我们检查一下这段代码：

```
sparcRegisters.psr.cwp = 7;
sparcRegisters.psr.et = 1;
sparcRegisters.psr.ps = 0;
sparcRegisters.psr.s = 1;
sparcRegisters.psr.pil = 0;
sparcRegisters.psr.ef = 0;
sparcRegisters.psr.ec = 0;
sparcRegisters.psr.reserved = 0;
sparcRegisters.psr.c = 0;
sparcRegisters.psr.v = 0;
sparcRegisters.psr.z = 0;
sparcRegisters.psr.n = 0;
sparcRegisters.psr.ver = 3;
sparcRegisters.psr.impl = 0xF; 
```

个别译文如下：

```
7 => 00111
1 => 1
0 => 0
1 => 1
0 => 0000
0 => 0
0 => 0
0 => 000000
0 => 0
0 => 0
0 => 0
0 => 0
3 => 0011
F => 1111 
```

因此，内存中的结构变为 00111101000000000000000000111111，即大端序中的 0x3D00003F。

您可以使用此代码进行确认（在 solaris 中使用 CC 测试）：

```
#include <stdio.h>
#include <string.h>

struct processor_status_register
{
   unsigned int cwp:5;
   unsigned int et:1;
   unsigned int ps:1;
   unsigned int s:1;
   unsigned int pil:4;
   unsigned int ef:1;
   unsigned int ec:1;
   unsigned int reserved:6;

   unsigned int c:1;
   unsigned int v:1;
   unsigned int z:1;
   unsigned int n:1;

   unsigned int ver:4;
   unsigned int impl:4;
}__attribute__ ((__packed__));

int getBit(unsigned long bitStream, int position)
{
   int bit;
   bit = (bitStream & (1 << position)) >> position;
   return bit;
}

char* showBits(unsigned long bitStream, int startPosition, int endPosition)
{
   // Allocate one extra byte for NULL character
   static char bits[33];
   memset(bits, 0, 33);
   int bitIndex;
   for(bitIndex = 0; bitIndex <= endPosition; bitIndex++)
   {
      bits[bitIndex] = (getBit(bitStream, endPosition - bitIndex)) ? '1' : '0';
   }
   return bits;
}

int main()
{
   processor_status_register psr;
   psr.cwp = 7;
   psr.et = 1;
   psr.ps = 0;
   psr.s = 1;
   psr.pil = 0;
   psr.ef = 0;
   psr.ec = 0;
   psr.reserved = 0;
   psr.c = 0;
   psr.v = 0;
   psr.z = 0;
   psr.n = 0;
   psr.ver = 3;
   psr.impl = 0xF;

   unsigned long registerValue = 0;

   memcpy(&registerValue, &psr, sizeof(registerValue));
   printf("\nPSR=0x%0X, IMPL=%u, VER=%u, CWP=%u\n", registerValue,
      psr.impl, psr.ver,
      psr.cwp);

   printf("PSR=%s\n\n",showBits(registerValue, 0, 31)); 

   return 0;
} 
```

这个的输出是：

```
PSR=0x3D00003F, IMPL=15, VER=3, CWP=7
PSR=00111101000000000000000000111111 
```

# c - 使用子字符串来计算一个单词出现的次数

> ID：13824871
> 
> 赞同：1
> 
> 时间：2012-12-11T16:58:47.843
> 
> 标签：c

我想使用子字符串来计算输入特定单词的次数。我一直在玩我的代码，看看我是否可以让它工作，但我就是不明白！

我的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>

int main(int argc, char *argv[])
{

int i=0;

char buf[1026]={'\0'};
char *p="#EOF\n";
char *t;

while (strcmp(buf, p) != 0)
{
    fgets(buf, 1025, stdin);
    t=strtok(buf," , - \n");
    while(t != NULL)
    {
        if(strncmp(t, argv[1], strlen(argv[1])) == 0)
    {
        i++;
    }
    }
}

printf("%d\n", i);

return 0;
} 
```

没有错误，但值`i`始终为0。我不知道如何确保它在找到单词一次后继续计数。我试过`sizeof(t) < j`了，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:08:33.543

如果您要查找多个令牌实例，则需要多次调用 strtok。在随后的调用中，传入 NULL 作为第一个参数。请参阅[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/strtok.3.html)

此外，sizeof(t) 是一个常数，可能是 4 或 8。t 是一个 char 指针，它占用一些字节。如果您想查看 strtok 是否返回了您想要与 NULL 进行比较的内容。从手册页：

> 返回值
> 
> ```
>  The strtok() and strtok_r() functions return a pointer 
>    to the next token, or  NULL  if there are no more tokens. 
> ```

NULL 是您要检查以确定该行上没有更多标记的内容。

另请注意，如果令牌桥接两次读取，您将不会得到它。例如第 1 行以“,”结尾，下一个准备就绪以“-\n”开头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:08:24.317

```
while(sizeof(t) > j) 
```

[`sizeof`](http://en.wikipedia.org/wiki/Sizeof)告诉您类型的大小，因此在您的情况下，它是`sizeof(char*)`，它只是您平台上指针的大小。很可能它总是 4 或 8。将其替换为[`strlen`](http://www.cplusplus.com/reference/cstring/strlen/)，它旨在告诉您字符串的大小。

# vba - 在 Excel 中编写宏以删除 HTML TAG

> ID：13824872
> 
> 赞同：0
> 
> 时间：2012-12-11T16:58:49.133
> 
> 标签：vba, excel

我正在尝试写入一个从 excel 数据中删除 html 标签的宏。我只想搜索 <*> 这个模式并将它们替换为空白。还需要删除像'“'这样的特殊字符和像 if(typeof(dstb)!= "undefined"){ dstb();} 这样的标签。

到目前为止，我编写的代码要求我在宏中硬编码文件名，这是我不想要的。

代码 ：

```
 Sub UnescapeCharacters()
 sheetname = "2011 Publications" 'file name goes here

Dim sheet As Worksheet
Set sheet = Me.Worksheets(sheetname)

For Row = 1 To sheet.UsedRange.Rows.Count
    For Column = 1 To sheet.UsedRange.Columns.Count
        Dim cell As Range
        Set cell = sheet.Cells(Row, Column)

        ReplaceCharacter cell, "&quot;", """" 
        ReplaceCharacter cell, "&#44;", ""
        ReplaceCharacter cell, "&nbsp;", ""
        ReplaceCharacter cell, "&bull;", ""

        ReplaceCharacter cell, "</ul>", ""
        ReplaceCharacter cell, "<ul>", ""

        ReplaceCharacter cell, "<b>", ""
        ReplaceCharacter cell, "</b>", ""

        ReplaceCharacter cell, "<i>", ""
        ReplaceCharacter cell, "</i>", ""

        ReplaceCharacter cell, "</li>", ""
        ReplaceCharacter cell, "<li>", ""

        ReplaceCharacter cell, "</br>", ""
        ReplaceCharacter cell, "<br />", ""

        ReplaceCharacter cell, "</p>", ""
        ReplaceCharacter cell, "<p>", ""

    Next Column
Next Row

End Sub

Sub ReplaceCharacter(ByRef cell As Range, ByVal find As String, ByVal replacement As     String)

Dim result As String
cell.Value = Replace(cell.Text, find, replacement, 1, -1)

End Sub 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:48:01.963

我更喜欢用这种方法来做。如果 HTML 不是真正的网站，您可以将 HTML 保存为文件，然后 IE.navigate 该文件路径。

```
 Sub testing()
    Dim IE As Object
    Dim stringWithOutTags As String
    Set IE = CreateObject("InternetExplorer.Application")
        ' HardCode the URL address in
        IE.navigate "http://stackoverflow.com/questions/13824872/writing-macro-in-excel-to-remove-html-code"
        Do While IE.Busy
        Loop
        Do While IE.readyState <> 4
        Loop

        stringWithOutTags = IE.document.DocumentElement.innerText

        IE.Quit
    End Sub 
```

# c++ - pthread 与参数通信

> ID：13824873
> 
> 赞同：0
> 
> 时间：2012-12-11T16:58:50.253
> 
> 标签：c++, void-pointers

**TLDR**：我使用 void * 类型的变量来保存字符串指针，如何修改字符串的值？

**背景** 使用 IPC 的家庭作业已经出现。
我有两个流程，厨师和服务员，服务员向厨师提供一些输入（派对就座，餐桌订单，准备退房等），然后厨师将信息发送回相关服务员（显然并非所有服务员都是同时为所有桌子服务）。

我的（诚然笨拙）解决方案：
1\. Chef 打开 'chef' FIFO 文件以读取
2\. Waiter 打开 'chef' 以写入并写入服务员的名称，并打开具有该名称的 FIFO 以读取。
3\. Chef 读取服务员的名字并打开 FIFO 进行写入。
3.a. （与我遇到的问题无关）服务员通过“厨师”发送输入，直到厨师关闭系统。
4\. 服务员输入过程中，偶尔会有厨师发回信息。当厨师输入输出时，会进行检查以确定要写入哪个输出 FIFO。

**问题** 我有两个 pthread，需要发回一个字符串。我已经传递了一个字符串指针作为给定的一个参数（在这种情况下称为 void *arg），然后当我需要发回一些信息时，我试图将字符串放入我传递的指针中但还没有找到无论如何要做到这一点。所以我的问题是，我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:47:59.933

我最终使用了以下内容：

```
string* temp = static_cast<string*>(arg); 
```

然后修改刚刚修改的温度。由于 arg 将字符串的位置保留在主线程中，因此 temp 将其取出，然后我可以将字符串放入 temp 中。这样就建立了线程间通信，我能够继续实现我糟糕的设计。

# javascript - 如何在 javascript 文件中存储包含 á ö ő í 等字母的字符串的数组？

> ID：13824874
> 
> 赞同：3
> 
> 时间：2012-12-11T16:58:52.757
> 
> 标签：javascript, encoding, utf-8, ansi

我在一个 javascript 文件中有一个数组，其中包含带有特殊字母的匈牙利名字，例如：`ö ő ó á í`。

```
var names = ["Aba", "Abád", "Abbás", "Abdiás", "Abdon", "Ábel", "Abelárd"]; 
```

*（以上只是一个缩短的数组，整个长度大约是 3000 项长）*

当我想在 HTML 文档中输出“名称”的内容时，我得到了非 ASCII 字符的模糊字母。

**如果我直接在输出它的 UTF-8 编码 HTML 中定义数组，我会得到一个清晰的输出列表。**就好像我在 JavaScript 文件中定义数组一样，我得到了一个模糊的内容。看画面：[http ://screencast.com/t/YJ83K9Mgm](http://screencast.com/t/YJ83K9Mgm)

我检测到（Notepad++）JavaScript 文件采用 ANSI 编码。

**问题：**如何存储名称数组（或一般包含此特殊字母的代码），以便可以在浏览器中正确输出。

（其实我是用 MS Studio Express 2012 进行编码的。我找不到可以设置某些文件编码类型的地方。）

这是在 HTML 标题中定义的数组宽度的简化代码：

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Name List Trial</title>
    <script src="nevekdata.js"></script>
    <script>
        // These are Hungarian first names just a few of them, the whole array is around 1400 long
        // including letters like ö ő ó á stb.
        // !!!!!!!!
        // if I difine  the "names" Array here, the array list is written out in the browser width the
        // special letter seen correctly.        
        var names = ["Aba", "Abád", "Abbás", "Abdiás", "Abdon", "Abdullah", "Ábel", "Abelárd"];
        // if I put it into a javascript file "nevekdata.js" I get muffled chars instead of the correct letters
        function writeOutNames() {
            outputnames.innerHTML = names.toString();
        }
    </script>
</head>
<body>
    <button onclick="writeOutNames()">Write Out names</button>
    <p></p>
    <p id="outputnames"></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:20:35.687

您自己已经说过，该文件以 ANSI 保存，但随后您将其作为 UTF-8 提供。这会导致浏览器将您的 ANSI 编码文件视为 UTF-8。

字符集参数和标头只是向浏览器提示文件的编码方式，它实际上对文件的“物理”字节没有任何作用。为了使这一切正常工作，您需要 charset 参数和标头并将您的文件物理编码为 UTF-8 字节。

您需要将文件编码为 UTF-8 .. 在 notepad++ 中，将文件另存为`UTF-8 without BOM`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:06:09.890

HTML 转义特殊字符。

nevekdata.js

```
var names = ["Aba", "Ab&#225;d", "Abb&#225;s", "Abdi&#225;s", "Abdon", "Abdullah", "&#193;bel", "Abel&#225;rd"];
function writeOutNames() {
    outputnames.innerHTML = names.toString();
} 
```

# c# - 绑定更改时，重载 UI 线程上的进度对话框不会更新

> ID：13824877
> 
> 赞同：1
> 
> 时间：2012-12-11T16:58:57.897
> 
> 标签：c#, wpf, multithreading, binding

在维护旧的 MFC 应用程序的同时，我们在 WPF 中实现了一个新的进度对话框栏。该应用程序当前的 UI 线程忙于处理大量业务操作，但更改它超出了范围。

当字符串属性更改其值（绑定到 TextBox 的文本）时，进度对话框不会刷新（仅当线程不那么忙时）。

据我所知，属性的更新是从 UI 线程完成的，线程应该能够更新对话框并在继续下一步之前重新绘制它，所以我不明白为什么它没有被更新以及如何修复它。

有任何想法吗？

**编辑**：这个解决方案的缺点是什么，我已经尝试过了，似乎工作正常：

```
private static Action EmptyDelegate = delegate() { };

public static void Refresh(this UIElement uiElement)
{
   uiElement.Dispatcher.Invoke(DispatcherPriority.Render, EmptyDelegate);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:03:23.243

我在这里找到了解决方案：

[http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/)

然后我用进度对话框创建了一个新线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:06:19.203

> 应用程序当前的 UI 线程忙于处理大量业务操作

嗯，有你的问题。你不应该那样做。您应该在非 UI 线程中执行长时间运行的操作。这就是为什么直到长时间运行的操作完成后才对 UI 进行更新的原因。

在执行长时间运行的任务时，您可以使用 a`BackgroundWorker`来帮助简化与 UI 的交互，因为它将处理对 UI 线程的封送处理，以处理进度更新和完成的事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:45:01.173

首先，我同意@Servy，你不应该在 UI 线程中做繁重的工作。但是，如果您不能在另一个线程中完成这项工作，您可以考虑为您的对话框生成另一个线程。我不知道你是如何调用 wpf 窗口的，但是[这个链接](https://stackoverflow.com/questions/13381967/show-wpf-window-from-test-unit/13382721#13382721)可能会给你一些关于如何在 C# 中完成的线索。

# redis - 如何使用 Redis MQ 从死信队列重新发送？

> ID：13824879
> 
> 赞同：6
> 
> 时间：2012-12-11T16:59:01.390
> 
> 标签：redis, servicestack

我刚刚花了几个小时研究 Redis 和 Redis MQ。

慢慢掌握 Redis 的窍门，想知道如何重新发送死信队列中的消息？

此外，确定消息在进入死信队列之前重试多少次的配置选项在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-27T01:02:43.770

**目前，没有办法在ServiceStack**的死信队列中自动重发消息。但是，您可以相对轻松地手动执行此操作：

使用以下命令从死信队列重新加载消息：

```
 public class AppHost {

      public override Configure(){

           // create the hostMq ...
           var hostMq = new RedisMqHost( clients, retryCount = 2 );

           // with retryCount = 2, 3 total attempts are made. 1st + 2 retries

           // before starting hostMq
           RecoverDLQMessages<TheMessage>(hostMq);

           // add handlers
           hostMq.RegisterHandler<TheMessage>( m => 
                     this.ServiceController.ExecuteMessage( m ) );

           // start hostMq
           hostMq.Start();
      }
  } 
```

最终使用以下内容来恢复（重新排队）消息：

```
 private void RecoverDLQMessages<T>( RedisMqHost hostMq )
    {
        var client = hostMq.CreateMessageQueueClient();

        var errorQueue = QueueNames<T>.Dlq;
        log.Info( "Recovering Dead Messages from: {0}", errorQueue );
        var recovered = 0;

        byte[] msgBytes;
        while( (msgBytes = client.Get( errorQueue, TimeSpan.FromSeconds(1) )) != null )
        {
            var msg = msgBytes.ToMessage<T>();
            msg.RetryAttempts = 0;
            client.Publish( msg );
            recovered++;
        }

        log.Info( "Recovered {0} from {1}", recovered, errorQueue );
    } 
```

# 笔记

在撰写本文时，**ServiceStack**可能会丢失消息。[请在此处查看问题 229](https://github.com/ServiceStack/ServiceStack/issues/229)，因此，不要在进程将消息从 DLQ（死信队列）移回输入队列时终止该进程。在后台，**ServiceStack**正在从 Redis 中弹出消息。

# android - How to extend ImageView in an Android-Scala app?

> ID：13824884
> 
> 赞同：11
> 
> 时间：2012-12-11T16:59:13.660
> 
> 标签：android, scala, inheritance, multiple-constructors

I have tried many solutions found in google by the keywords: multiple constructors, scala, inheritance, subclasses.

None seems to work for this occasion. `ImageView` has three constructors:

```
ImageView(context)
ImageView(context,attribute set)
ImageView(context,attribute set, style) 
```

In scala you can only extend one of them. And the solution of using the more complete constructor (`ImageView(context,attribute set, style)`) and passing default values does not work either because the constructor `ImageView(context)` does something completely different than the other two constructors.

Some solutions of using a trait or a companion object does not seem to work because the CustomView must be a class! I mean I am not the only one who uses this class (so I could write the scala code any way I wanted) there is also the android-sdk who uses this class and yes it must be a class.

target is to have a CustomView which extends ImageView and all of these work:

```
new CustomView(context)
new CustomView(context,attribute set)
new CustomView(context,attribute set, style) 
```

Please let me know if you need any further clarification on this tricky matter!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T16:27:32.087

According to Martin Odersky (the creator of Scala), that is not possible.

In [http://scala-programming-language.1934581.n4.nabble.com/scala-calling-different-super-constructors-td1994456.html](http://scala-programming-language.1934581.n4.nabble.com/scala-calling-different-super-constructors-td1994456.html):

> "is there a way to call different super-constructors within different class-constructors - or does all have to go up to the main-constructor and only one super-constructor is supported?
> 
> No, it has to go through the main constructor. That's one detail where Scala is more restrictive than Java."

I think your best approach is to implement your views in Java.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T17:53:18.667

It sounds like you may just be better off writing the subclass in Java. Otherwise, if your assumption about the SDK using the three argument constructor is correct, then you could use a trait and a class with a companion object. The SDK would use the three argument constructor of `CustomView` which also implements a trait containing any additional behavior you need:

```
trait TCustomView {
  // additional behavior here
}

final class CustomView(context: Context, attributes: AttributeSet, style: Int)
  extends ImageView(context, attributes, style) with TCustomView 
```

In the application code, you could use the one, two or three argument version in this way:

```
object CustomView {
  def apply(c: Context, a: AttributeSet, s: Int) =
    new ImageView(c, a, s) with TCustomView
  def apply(context: Context, attributes: AttributeSet) =
    new ImageView(context, attributes) with TCustomView
  def apply(context: Context) = new ImageView(context) with TCustomView
}

CustomView(context)
CustomView(context, attributes)
CustomView(context, attributes, style) 
```

Seems like a lot of work. Depending on your goals, you might be able to add additional behavior with implicits:

```
implicit def imageViewToCustomView(view: ImageView) = new {
  def foo = ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:52:51.030

This question lead me to several design considerations which I would like to share with you.

My first consideration is that if a Java class has been correctly designed the availability of multiple constructors should be a sign of the fact that some class properties might have **default** value.

Scala provides **default values** as a **language feature**, so that you do not have to bother about providing multiple constructors at all, you can simply provide default value for some arguments of your constructor. This approach leads to a **much cleaner API** than three different constructors which produce this kind of behaviour as you are making clear why you do not need to specify all the parameters.

My second consideration is that this is not always applicable in case you are extending classes of a third-party library. However:

*   if you are extending a class of an open source library and the class is correctly designed, you can simply investigate the default values of the constructor argument
*   if you are extending a class which is not correctly designed (i.e. where overloaded constructors are not an API to default some parameters) or where you have no access to the source, **you can replace inheritance with composition** and provide an implicit conversion.

    ```
    class CustomView(c: Context, a: Option[AttributeSet]=None, s: Option[Int]=None){

       private val underlyingView:ImageView = if(a.isDefined)
                                                if (s.isDefined)
                                                    new ImageView(c,a.get,s.get)
                                                else
                                                    new ImageView(c,a.get)
                                            else
                                                new ImageView(c)
    }

    object CustomView {
        implicit def asImageView(customView:CustomView):ImageView = customView.underlyingView
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-04T20:02:05.713

According to the [Android `View` documentation](http://developer.android.com/reference/android/view/View.html) `View(Context)` is used when constructed from code and `View(Context, AttributeSet)` and `View(Context, AttributeSet, int)` (and since API level 21 `View(Context, AttributeSet, int, int)`) are used when the `View` is inflated from XML.

The XML constructor all just call the same constructor, the one with the most arguments which is the only one with any real implementation, so we can use default arguments in Scala. The "code constructor" on the other hand may have another implementation, so it is better to actually call in from Scala as well.

The following implementation may be a solution:

```
private trait MyViewTrait extends View {
  // implementation
} 

class MyView(context: Context, attrs: AttributeSet, defStyle: Int = 0)
    extends View(context, attrs, defStyle) with MyViewTrait {}

object MyView {
  def apply(context: Context) = new View(context) with MyViewTrait
} 
```

The "code constructor" may then be used like:

```
var myView = MyView(context) 
```

(not a real constructor).

And the other once like:

```
var myView2 = new MyView(context, attrs)
var myView3 = new MyView(context, attrs, defStyle) 
```

which is the way the SDK expects them.

Analogously for API level 21 and higher the `class` can be defined as:

```
class MyView(context: Context, attrs: AttributeSet, defStyle: Int = 0, defStyleRes: Int = 0)
    extends View(context, attrs, defStyle, defStyleRes) with MyViewTrait {} 
```

and the forth constructor can be used like:

```
var myView4 = new MyView(context, attrs, defStyle, defStyleRes) 
```

**Update:**

It gets a bit more complicated if you try to call a `protected` method in `View`, like `setMeasuredDimension(int, int)` from the `trait`. [Java protected methods cannot be called from traits.](https://stackoverflow.com/questions/17557057/how-to-solve-implementation-restriction-trait-accesses-protected-method) A workaround is to implement an accessor in the `class` and `object` implementations:

```
private trait MyViewTrait extends View {
  protected def setMeasuredDimensionAccessor(w: Int, h: Int): Unit
  def callingSetMeasuredDimensionAccessor(): Unit = {
    setMeasuredDimensionAccessor(1, 2)
  }
} 

class MyView(context: Context, attrs: AttributeSet, defStyle: Int = 0)
    extends View(context, attrs, defStyle) with MyViewTrait {
  override protected def setMeasuredDimensionAccessor(w: Int, h: Int) =
    setMeasuredDimension(w, h)
}

object MyView {
  def apply(context: Context) = new View(context) with MyViewTrait {
    override protected def setMeasuredDimensionAccessor(w: Int, h: Int) =
      setMeasuredDimension(w, h)
  }
} 
```

# wcf - PowerShell 和 Web 服务 - 添加标头

> ID：13824888
> 
> 赞同：1
> 
> 时间：2012-12-11T16:59:30.907
> 
> 标签：wcf, web-services, powershell, soap

我使用 PowerShell New-WebServiceProxy commandlet 来获得与 WebService(WCF/SOAP) 的连接。可以连接到 WebService，但是当我想执行一个方法时，我被拒绝访问。拒绝访问是因为 WebService 需要自定义消息头。但这对于 New-WebServiceProxy 是不可能的。

**问题：**连接/使用 WebService 并添加消息头的最简单方法是什么？是否有 PowerShell 示例脚本？（在这种情况下，我首选的语言是 PowerShell）

顺便说一句：是的，我知道有一个问题与我的非常相似：[使用 New-WebServiceProxy 在 PowerShell 中添加自定义 SOAP 标头](https://stackoverflow.com/questions/4763616/add-custom-soap-header-in-powershell-using-new-webserviceproxy)

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:39:08.837

这更像是一种解决方法，但也许它对您有用。不使用 cmdlet，而是创建一个 C# 或 VB.NET 项目，添加 WCF 服务引用，因为它打算被使用。然后创建一个类，该类为您要调用的每个服务方法提供一个方法，并公开您需要在 PowerShell 中使用的参数。

```
class MyProxy
{
    public string Url { get; set; }
    public string SomeParameterForTheHeader { get; set; }

    public string CallSomeMethod(string input1, string input2)
    {
        // create WCF context using this.Url
        // create MessageHeader using this.SomeParameterForTheHeader and add it to the context
        // call SomeMethod on the context using input1 and input2
    }
} 
```

编译它并在 PowerShell 脚本中使用程序集和类。

```
[System.Reflection.Assembly]::LoadWithPartialName("MyAssembly") > $null
$ref = New-Object MyNamespace.MyProxy()
$ref.Url = "http://..."
$ref.SomeParameterForTheHeader = "your value here"
$ref.CallSomeMethod("input1", "input2") 
```

# c++ - CDaoRecordSet 从列中选择所有

> ID：13824893
> 
> 赞同：0
> 
> 时间：2012-12-11T16:59:46.523
> 
> 标签：c++, mfc

如何将列的所有记录存储在一个`CDaoRecordSet`？我已经尝试过了，但只会返回该列的第一条记录：

```
rs.Open(dbOpenSnapshot, "SELECT Numar_inmatriculare FROM Masini");
short nFields = rs.GetFieldCount();//returns 1 
```

如果我创建一个`"SELECT count(*) AS Numar_inmatriculare FROM Masini"`并使用`rs.GetFieldValue(0)`它返回我 13，正确的记录数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:50:40.170

`GetFieldCount`返回结果集中的列数。

要遍历记录 (=rows)，您必须调用`MoveNext`until`IsEOF()`返回 true。

```
rs.Open(dbOpenSnapshot, "SELECT Numar_inmatriculare FROM Masini");

while(!rs.IsEOF())
{
    // do something
    rs.MoveNext();
} 
```

# angularjs - 获取当前元素

> ID：13824894
> 
> 赞同：7
> 
> 时间：2012-12-11T16:59:54.693
> 
> 标签：angularjs

`ng-click`可以通过使用`$event`属性在类似的处理程序中拦截当前事件对象。

但是是否有可能获取调用该方法的元素？

例如：

```
<div ng-controller='myController'>
  <div>{{distortThatDiv($element)}}</div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T17:18:50.850

如果你要操作 DOM，你真的应该使用指令。但是，如果您有`$event`，则可以轻松[获取触发事件的原始元素](http://api.jquery.com/category/events/event-object/)：

```
$scope.clickHandler = function($event) {
   var element = $event.target;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T09:32:14.433

使用角度指令可以轻松访问元素。只需使用**链接**功能：

```
angular.module('myModule', [], function ($compileProvider) {
    $compileProvider.directive('distortThatDiv', function distortThatDivDirective() {
        return {
            restrict: 'A',
            link : function (scope, element, attrs) {
               element.on('click', function () {
                 // do something
               });
            } 
        };
    });
}); 
```

您的 html 将是：

```
<div ng-controller='myController'>
  <a distort-that-div>My link</a>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-21T15:34:10.800

这是另一种选择（但不确定这是否是一个好习惯）：

在您的模板中：

```
<div data-ng-click="foo()">Lorem ipsum</div> 
```

在您的控制器中：

```
angular.module('fooApp')
.controller('FooController', ['$scope', '$window', '$log', function FooController ($scope, $window, $log) {
    $scope.foo = function foo () {
        $log.info($window.currentTarget.innerHTML); // Outputs 'Lorem Ipsum';
    }
}]); 
```

# php - uploadify 显示上传成功，文件夹中没有文件

> ID：13824901
> 
> 赞同：1
> 
> 时间：2012-12-11T17:00:17.760
> 
> 标签：php, jquery, file-upload

我已经阅读了之前关于uploadify 的所有帖子，说明上传成功但没有上传文件，没有一个解决方案有效。有人可以看一下代码，看看我是否遗漏了什么。我还运行了一个 phpinfo()，它说我的文件上传已打开。我正在使用uploadify 3.1。

```
<!DOCTYPE html>
<html>
<head>
    <title>My Uploadify Implementation</title>
    <link rel="stylesheet" type="text/css" href="uploadify.css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery.uploadify-3.1.min.js"></script>
    <script type="text/javascript">
    $(function() {
        $('#file_upload').uploadify({
            'swf'      : 'uploadify.swf',
            'uploader' : 'uploadify.php'
            // Your options here
        });
    });
    </script>
</head>
<body>
<input type="file" name="file_upload" id="file_upload" />
</body>
</html> 
```

> ```
> // Define a destination
> $targetFolder = '/uploads'; // Relative to the root
> 
> if (!empty($_FILES)) {
>   $tempFile = $_FILES['Filedata']['tmp_name'];
>   $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
>   $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];
> 
>   // Validate the file type
>   $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
>   $fileParts = pathinfo($_FILES['Filedata']['name']);
> 
>   if (in_array($fileParts['extension'],$fileTypes)) {
>       move_uploaded_file($tempFile,$targetFile);
>       echo '1';
>   } else {
>       echo 'Invalid file type.';
>   }
> }
> ?> 
> ```

# jquery - jQuery Datepicker：向用户显示一种日期格式，在后台使用另一种日期格式

> ID：13824907
> 
> 赞同：4
> 
> 时间：2012-12-11T17:00:29.327
> 
> 标签：jquery, datepicker, date-format

我有一个使用 jQuery 的 datepicker 工具的输入。现在我知道我可以设置日期选择器使用的日期格式。问题是：我想以德语格式向用户显示日期，同时对数据库使用英语格式（dd-mm-yy 到 yy-mm-dd）。

我现在在这里有以下内容：

```
$(".date").datepicker({
    dateFormat: "dd-mm-yy",
    onSelect: function(dateText, inst) {
        $("#test").html($.inst.formatDate('yy-mm-dd', dateText); // What exactly do I have to do, to get the date from dd-mm-yy to yy-mm-dd
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:36:24.117

可能您最好的选择是使用日期选择器的`altField`和`altFormat`属性，正是出于这个原因：[API Docs](http://api.jqueryui.com/datepicker/#option-altField)。

如果将 altField 设置为隐藏的输入字段，则可以在上传到数据库时从那里获取数据，或者其他任何需要备用日期格式的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:45:59.187

我将它用于表单字段：

```
echo 'Set next action date: <input type="text" id="next_action" name="next_action" value="' . $next_action . '" />'; 
```

在 datepicker 的 scipt 设置中，我包含了这个选项：

```
dateFormat: 'yy-mm-dd', 
```

这给了我正确的 MySQL 日期格式来在表中插入/更新。但它对访问者不是特别友好，所以我在页面顶部设置了我的首选格式：

```
if ($s['next_action'] >= "1") {
    $next_action = date($date_style,strtotime($s['next_action']));
} else {
    $next_action = '';
} 
```

这取决于我的主包含文件中的一个变量：

```
$date_style = "F d, Y"; 
```

如果我选择一个日期，datepicker 会在提交时为我提供一个数据库的好日期，尽管它在提交之前会显示 yyyy-mm-dd 格式。提交后，它使用漂亮的显示。

范

# php - 如果在提取期间连接丢失，mysql_fetch_array 会失败吗？

> ID：13824908
> 
> 赞同：2
> 
> 时间：2012-12-11T17:00:31.587
> 
> 标签：php, mysql

我想通过我的查询结果循环多次，我有两种方法：

```
1-        
while($data = mysql_fetch_array($res ,  MYSQL_ASSOC)
{
array_push($new_arr , $data);
}
foreach($sites as $s){
  foreach($new_arr as $d)
  {
  //some code
  }
}

2-
foreach($sites as $s){
  while($data = mysql_fetch_array($res ,  MYSQL_ASSOC)
  {
  //some code
  }
mysql_data_seek($res,0);//set the pointer 
} 
```

我的问题：我认为选项 2 更有效，但如果我在 mysql_fetch_array（选项 2）期间失去与 db 的连接怎么办？我得到了分配的结果；这大约需要 10-20 分钟。这会影响查询结果（$res）还是安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:07:15.033

当您执行 mysql_query() 时，数据被映射到 mysql 客户端分配的缓冲区，因此失去连接是无关紧要的。您引用的第一种方法将创建数据的进一步副本作为 PHP 数组 - 这不是很有效。

另外，WTF 是嵌套循环（$sites）在做什么？看起来您的数据没有规范化，或者您的算法非常糟糕。

# matlab - Matlab gui文件在一个包中？

> ID：13824909
> 
> 赞同：9
> 
> 时间：2012-12-11T17:00:35.690
> 
> 标签：matlab, user-interface, figure

我正在尝试将一些`.fig`及其相应的`.m`文件放入包中。

我有：

```
 +ui/mainWindow.fig
 +ui/mainWindow.m 
```

但是当我尝试运行`mainWindow.fig`Matlab 时，会从 GUIDE 打印一个错误：

```
 Error using feval
  Undefined function or variable mainWindow 
```

有趣的是，如果我用它的完全限定名称调用：

```
 ui.mainWindow 
```

窗口正常显示（但所有回调都不起作用）。

`import ui.*` 我在运行它之前尝试过。

请注意，我想以`namespace`. 我不想让我的整个应用程序在 Matlab 的全球范围内。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T02:28:30.100

**解释**

根本问题是*MATLAB GUIDE*不知道包。通常，它会自动管理回调名称，保持*.m*和*.fig*文件同步，每个人都很高兴。当图形在包中时，它无法正确更新*.fig*属性中的回调 - 这些仍然指向非限定名称*mainWindow*而不是正确的*ui.mainWindow*。随后，所有回调都失败。

**解决方法**

解决这个问题的两种方法：

*   导出你的图：`Guide -> File -> Export`. 将此文件放在您的*+ui*文件夹中。打开文件，然后用*@(hObject,eventdata)ui.mainWindow**替换**@(hObject,eventdata)mainWindow*的所有实例。

**   或者，您可以直接在*GUIDE*本身内手动更新引用，而无需导出。对于每个按钮和元素，`Right Click -> Property Inspector`然后编辑“回调”字段，将*mainWindow*替换为*ui.mainWindow*。* 

 *就个人而言，我更喜欢第一种解决方案，因为您可以用一个*find-replace*命令替换所有出现的地方。*

# android - 指定的孩子已经有一个父母安卓

> ID：13824910
> 
> 赞同：0
> 
> 时间：2012-12-11T17:00:40.357
> 
> 标签：android, layout, baseadapter

早上好！，我不知道，如何填充动态自定义基本适配器？这是我的代码示例：

```
public class Row{
private Context context;
private CheckBox checkbox;
private String kind;

    public Row(Context context, String kind){
        this.context = context;
this.kind=kind;

    }

public start(){
  checkbox = new CheckBox(context);
}

public View getView(){
  View ch=getCheckbox();
  return ch;
}

public CheckBox getCheckbox(){
   return checkbox;
}

public String getKind(){
return kind;
}
}

public class Adapterd extends baseAdapter{
private Context context;
private ArrayList<Line> info;

  public Adapterd(Context context, ArrayList info){
 this.info=info;
 this.context=context;

 }

public View getView(int position, View convertView, ViewGroup parent) {
   View vi = convertView;

        inflater = (LayoutInflater) this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if(info.get(position).getKind().equalsIgnoreCase("text")){
            vi = inflater.inflate(R.layout.adaptador_blank, null);
        }else{vi = inflater.inflate(R.layout.adaptador_checkbox, null);

checkLayout = (RelativeLayout) vi.findViewById(R.id.checkLayout);
checkLayout.addView(info.get(position).getCheckbox());
            }
   }
return vi;
}
}

public class Start{
private ListView content;

public void process(){
   ArrayList<Line> l = new ArrayList<Line>();
   l.add(new Line(this, "checkbox"));
  l.add(new Line(this, "text"));

  Adapterd adapt = new Adapterd(this, l);
content = (ListView) findViewById(R.id.layout2);
content.setAdapter(adapt);

}
} 
```

有时当我添加很多复选框时，当它们位于屏幕视图下方时，值被删除，字段正在切换和重复，我得到指定的孩子已经有一个父级：checkLayout.addView(info.get(position). getCheckbox()); 我猜。

我想在我的 baseAdapter 中管理多个不同的布局。

# c++ - wchar_t 与 unsigned short 冲突

> ID：13824912
> 
> 赞同：4
> 
> 时间：2012-12-11T17:00:48.707
> 
> 标签：c++

我正在将我们的库更新到较新的版本并遇到编译错误：

```
ClassName &ReturnClass::FuncName(wchar_t *,size_t)' : member function already defined or declared 
```

然而，它以前被定义为：

```
ClassName &ReturnClass::FuncName(unsigned short *,size_t)' 
```

我们有`wchar_t`一个似乎是导致问题的原因`typedef`。`unsigned short`

我尝试使用编译器选项`wchar_t`，但是当它看到`typedef`.

我正在使用 nmake 在 Windows 和 MSDEV 中构建代码作为代码编辑器。

有没有人见过这种东西？你是怎么解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:39:30.183

好的，问题已解决。所需的编译器选项`/Zc:wchar_t`不仅仅是“wchar_t”，尽管这确实解决了最初的问题。

我的印象是“/Zc”位是 MS 特定的，直接使用 clr 编译器时不需要 - DOH！

# html - 如何像表格一样设置我的无序列表的样式？

> ID：13824918
> 
> 赞同：8
> 
> 时间：2012-12-11T17:01:11.400
> 
> 标签：html, css

我只有一个`<UL>`，下面我们有一组`<LI>`

```
 <ul>
   <li>1<li>
   <li>2<li>

   <li>3</li>
   <li>4<li>

 </ul> 
```

现在我想将它们显示为 TABLE，请帮助我使用 CSS，我们如何以下表格式显示以上 UL/LI 的 TABLE，在一个 TR（两个 TD）中设置 2 个 LI 等等....

![在此处输入图像描述](../Images/e7d2962bd56fe9457db54906d8c5e49d.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T17:31:38.153

好吧，这是一种可能的解决方案：

```
ul {
    width: 450px;           /* change it to whatever you like */
    position: relative;

    /* these should be probably already set up by `reset.css` */ 
    list-style-type: none;
    margin: 0;
    padding: 0;
}

ul:before, ul:after {
    text-align: center;
    display: block;
    border: 1px solid black;
    border-bottom: 0;
    width: 48%;
}

ul:before {
    content: 'col1';
    border-right: 0;    
}

ul:after {
    content: 'col2';
    position: absolute;
    top: 0;
    left: 48%;
    margin-left: 1px;    
}

li {
    text-align: right;
    width: 48%;
    float: left;
    border: 1px solid black;
    margin-bottom: -1px;
}

li:nth-child(even) {
    margin-left: -1px;
} 
```

它可以工作（[JSFiddle](http://jsfiddle.net/Unwh6/1/)；在 Chrome、Firefox 和 Opera 中测试；`nth-child(even)`选择器在 IE8 中显然失败，所以你必须用类或其他方式模拟它；但除此之外它仍然是可靠的），但我承认我对此感到内疚。)

PS如果你想为“单元格”内容添加填充，不要忘记改变它们的宽度，就像[这里](http://jsfiddle.net/Unwh6/2/)：

```
li {
    width: 47%;
    padding-right: 1%;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-11T10:27:32.080

这是一个非常晚的答案，但我认为这是一个常见的话题。[这是我制作的代码笔](http://codepen.io/stratboy/pen/CxgiH)。

显然，这只是一个起点。它还提供了一些示例，说明如何添加背景或边框等样式。例如，如果“单元格”包含一些任意内容，则必须调整尺寸。我将这种代码用于缩略图画廊，例如，您不必担心边框或 bgs 并且它是非常基本的代码（该示例适用于 2x3 表格，请参阅 codepen）：

```
ul{
  list-style:none;
}

ul li{
  float:left;
  padding:10px;
  border-bottom:1px solid #000;
  border-right:1px solid #000;
}

ul li:nth-child(3n){
  background-color:#888;
}

ul li:nth-child(3n+1){
  clear:both;
  border-left:1px solid #000;
  background-color:#ccc;
}

ul li:nth-child(-n+3){
  border-top:1px solid #000;
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T17:29:51.927

您不能通过`display: table`属性将单个列表（包含超过 2 个项目）转换为 2 列，因为您需要一些元素来充当表格行。如果没有一个元素充当表格行，则所有设置为的相邻元素都`display: table-cell`将包含在无法以任何方式修改或设置样式的匿名表格行元素中。

您唯一的选择是更改标记（使用表格或列表列表）或对 CSS 使用不同的方法：在`li`s 上使用floats/inline-block 或`columns`在`ul`.

# java - 查找并将行（字符串）组合在一起

> ID：13824919
> 
> 赞同：-3
> 
> 时间：2012-12-11T17:01:16.387
> 
> 标签：java

所以我有一个字符串/txt 文件： `All purchases: blabla : 1 derp : 20 blabla : 1 herp : 30`

这只是一个示例，将根据用户输入生成一个真实的文件

所以我需要做的是将具有相似名称的相似字符串（第一部分）组合在一起，使它们看起来像这样：`(name) : (number) x(amount of same strings)`

例如，让我们获取我们拥有的文件： `All purchases: blabla : 1 derp : 20 blabla : 1 herp : 30`

解析后它必须如下所示：`All purchases: blabla : 1 x2 derp : 20 herp : 30`

我已经尝试将最后一个值写到一个变量中并用下一个值检查它，但是如果这些值的顺序不同怎么办？这就是我卡住的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:09:48.820

由于每个条目都包含三个组件：

[name] : [number] 你可以在这里做一些事情。类似于以下内容：

```
Scanner s = new Scanner(new File("YourFileHere.txt"));
ArrayList<String> entries = new ArrayList<String>();
while(s.hasNext())
{
    entries.add(s.next() + " " + s.next() + " " s.next());
} 
```

您当然必须删除前导的“所有购买：”，但现在所有内容都在数组列表中，格式为 [name] : [number]
您只需确定每个有多少。从这里您可以对它们进行排序，然后对其进行计数。

# linq - Devart Oracle 交叉应用异常

> ID：13824925
> 
> 赞同：1
> 
> 时间：2012-12-11T17:01:43.337
> 
> 标签：linq, oracle, entity-framework, devart, cross-apply

我遇到了一个问题，在一台机器上代码可以工作，而另一台机器不行。显然，我们正在使用相同的 Devart dotConnect for Oracle 版本（6.80.325.0）。问题是当我们在 LINQ 中有一个子查询并且我们得到 Oracle 不支持交叉应用时。

```
public IQueryable<GE_MENUAPLICACAO> RetornaMenusNegadosParaUsuario2(int seqUsuario, int nroEmpresa)
    {
        return from usuarioPerm in entidadesConsinco.GE_USUARIOPERMISSAO
               from menu in usuarioPerm.GE_ITENSAPP.GE_APLICACAO.GE_MENUAPLICACAOs
               select menu;
    } 
```

我读了很多关于它和子查询的文章，但我真的不明白为什么它在某些机器上可以，而在另一些机器上不行。我错过了安装中的一些修复吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:57:54.263

是否有可能某些机器具有 .NET Framework 4 而其他机器具有 .NET Framework 4.5？

# python - 如何编写基于omniORBpy的文件传输程序

> ID：13824926
> 
> 赞同：1
> 
> 时间：2012-12-11T17:01:42.913
> 
> 标签：python, corba, omniorb

我现在正在编写一个 Corba 项目来在客户端和服务器之间进行文件传输。但是当我想将文件从客户端上传到服务器时，我遇到了麻烦。

我定义的 IDL 是：

```
interface SecretMessage
{
    string send_file(in string file_name, in string file_obj);
}; 
```

我在客户端代码中实现了上传功能：

```
f = open('SB.docx', 'rb')
data = ''
for piece in read_in_chunks(f):
    data += piece

result = mo.send_file('2.docx', data) 
```

如果文件是纯txt文件，没有问题。但如果文件是 jpg、doc 或除 txt 之外的其他文件，那么它确实有效。它给了我错误：

```
omniORB.CORBA.BAD_PARAM: CORBA.BAD_PARAM(omniORB.BAD_PARAM_WrongPythonType, CORBA.COMPLETED_NO) 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:08:03.977

我认为这是因为默认情况下，omniORB 希望查看字符串的 ASCII 数据。尝试将您的 IDL 更改为此

```
interface SecretMessage
{
    typedef sequence<octet> OctetSequence;
    string send_file(in string file_name, in OctetSequence file_obj);
}; 
```

您可以保持您的 Python 客户端代码相同，因为在 IDL 到 Python 的映射中，八位字节序列映射到 Python 字符串。

# jquery - JQuery 无法返回 xml 值

> ID：13824935
> 
> 赞同：0
> 
> 时间：2012-12-11T17:02:30.527
> 
> 标签：jquery, xml

我有这个简单的 xml

```
<?xml version="1.0"?>
<library>
    <item name="box_shelf">
        <imageback src="images/box_shelf_color.png"/>
        <outline src="images/box_shelf_outline.png"/>
        <sku>
            <wh sku="4696424171" />
            <ch sku="4696424179" />
            <choc sku="4696425863" />
            <ma sku="4696424175" />
        </sku>
    </item>
</library> 
```

加载xml很好。然后我有一个函数来解析某些节点。

```
function parseImageXml(mainNode,targetNode) {
            $(libraryXML).find('item').each(function() {

                if($(this).attr('name') == mainNode) {
                     var $temp = $(this).find(targetNode).attr('src');
                     console.log("******"+$temp);
                    return $temp;
                }

            });
} 
```

控制台日志很好

```
******images/box_shelf_outline.png
******images/box_shelf_color.png 
```

但是当我尝试将值返回到变量中时，我得到了未定义。

```
var image_outline = parseImageXml("box_shelf","outline");
var image_back = parseImageXml("box_shelf","imageback");
console.log(image_outline+":"+image_back);

undefined:undefined 
```

任何见解都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:05:23.477

您正在`each`回调内部返回值，因此外部函数的返回值仍然是`undefined`. 创建一个数组，在回调中将值推入其中，在外部返回数组`each`。

```
function parseImageXml(mainNode, targetNode) {
    var targets = [];
    $(libraryXML).find('item').each(function() {

        if ($(this).attr('name') == mainNode) {
            var $temp = $(this).find(targetNode).attr('src');
            console.log("******" + $temp);
            targets.push($temp);
        }

    });
    return targets;
}

var image_outline = parseImageXml("box_shelf","outline")[0];
var image_back = parseImageXml("box_shelf","imageback")[0];
console.log(image_outline+":"+image_back); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:23:50.500

您没有从 parseImageXml 函数返回任何内容。尝试更改为以下内容：

```
 function parseImageXml(mainNode,targetNode) {
          var $temp; //Declare your scope variable.      
          $(libraryXML).find('item').each(function() {

            if($(this).attr('name') == mainNode) {
                 $temp = $(this).find(targetNode).attr('src');// Assign to the scoped variable
                 console.log("******"+$temp);
                return false;  //Exit your for each loop
            }

        });
        return $temp;
       } 
```

# java - 仅创建依赖项才能进行单元测试

> ID：13824936
> 
> 赞同：4
> 
> 时间：2012-12-11T17:02:38.150
> 
> 标签：java, dependency-injection, junit4, dependency-management

我刚刚创建了一个`Manager`处理`SuperClass`在整个代码库中扩展并使用某种`SuperClassManager`( `SCM`) 注册的 a。

现在我想测试我`Manager`只知道`SuperClass`. 但是，我试图创建一个具体`SCM`的依赖于第三方库的库，因此在我的 jUnit 测试中没有做到这一点。现在的选项是模拟 this 的所有实例`SCM`。

到目前为止一切都很好，但是，当我`Manager`处理 时`SCM`，它会返回`SuperClass`我`Manager`不知道或不关心的子项。然而，这些孩子的身份对我的测试（平等等）**至关重要。**

由于我不能使用具体的`SCM`，我必须模拟调用适当函数的结果`SCM`，然而，这意味着我的测试和（间接）我`Manager`需要了解和关心`SuperClass`.

检查代码库，我的测试似乎没有更合适的位置（已经维护了适当的实际依赖项）。

**为了单元测试而引入不必要的依赖**是否值得？****

 *** * *

**2012 年 12 月 18 日更新**

* * *

这是我的问题的简化版本：

```
package some.package.declaration;

import some.open.source.framework.TopComponent;
import some.open.source.framework.WindowManager;

/**
 * Own source code.
 * Knows WindowManager and TopComponent; but no
 * direct child of TopComponent.
 */
class TopComponentManager{

  /**
   *
   */
  void efficientlyDoOperationsOnCurrentTopComponents(){
    Set<TopComponent> currentTopComponents = get all current TopComponents from WindowManager;
    Set<TopComponent> getNeededTopComponents(currentTopComponents);
    do some operations on the current TopComponents;
    ...
    ...
  }

  void Set<TopComponent> getNeededTopComponents(Set<TopComponent> givenTopComponents){
    Set<TopComponent> neededTopComponents = new HashSet<TopComponent>(givenTopComponents);
    disregard and keep some TopComponents based on controls;
    return neededTopComponents;
  }

}

package some.package.declaration.test;   // same project as TopComponentManager

import jmockit;
import some.open.source.framework.TopComponent;
import some.open.source.framework.WindowManager;

import own.source.code.childrenOfTopComponent.ChildTopComponent;  // Don't want to; need to introduce package dependencies
import own.source.code.childrenOfTopComponent.AnotherChildTopComponent;  // Don't want to; need to introduce package dependencies

class TopComponentManagerTest{

  @Tested
  TopComponentManager _topComponentManager;
  @Mocked
  WindowManager _windowManager;
  @Mocked
  ChildTopComponent _childTopComponent1;  //extends TopComponent; unknown to both TopComponentManager and TopComponentManagerTest
  @Mocked
  AnotherChildTopComponent _childTopComponent2;  //extends TopComponent; unknown to both TopComponentManager and TopComponentManagerTest

  Set<TopComponent> _currentTopComponents = new HashSet<TopComponent>();

  @Before
  void setUp() throws Exception {
    _currentTopComponents.add(_childTopComponent1);
    _currentTopComponents.add(_childTopComponent2);
  }

  void testgetNeededTopComponents(){

    Deencapsulation.invoke(_topComponentManager, "getNeededTopComponents", _currentTopComponents);

    new Verifications(){{
      verify that only _childTopComponent2 is returned;
    }};

  }

} 
```

可以看出，在测试 TopComponentManager 时，我必须验证已确定的必要元素，这些元素在此包中是未知的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:32:15.933

为什么不直接模拟`TopComponent`呢？

例子：

```
@Mocked
TopComponent _childTopComponent1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:22:24.517

不确定这是否是您正在寻找的，但[Mockito 提供了一种在调用模拟方法时返回](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#RETURNS_MOCKS)模拟的方法：

```
SCM scmMock = Mockito.mock(SCM.class, Mockito.RETURNS_MOCKS);
// scmMock.someMethod() will return a mock 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:04:50.207

也许如果您可以使用一些代码，那么给您答案会更容易。

另外，你怎么称呼`SuperClassManager`什么时候`Manager`才知道`SuperClass`？它是内部的依赖项`SuperClass`吗？如果是这种情况，则说明`SuperClass`存在错误的依赖关系，您应该考虑将其从`SuperClass`.

但是，如果您的经理不知道`SCM`，而只知道`SuperClass`，那么您应该模拟 ，`SuperClass`因为 的测试`Manager`不能依赖于其他组件的代码，并且您不应该创建不必要的依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T04:53:18.063

我最终通过创建一个只包含我的测试类的新项目来解决这个问题。这个测试类依赖于散布在代码库中的`TopComponentManager`所有 child 。`TopComponent`但是，依赖关系不是问题。

使用这种方法，可以在该项目中实现更多测试，而不会对生产代码产生任何额外的依赖。**

# jquery - 对远程 Web 服务的 JQuery Ajax POST 请求

> ID：13824941
> 
> 赞同：1
> 
> 时间：2012-12-11T17:02:57.567
> 
> 标签：jquery, ajax, web-services, post

我有点想不通，情况如下：

我在不在同一台机器上的 Web 服务上调用一个方法，并在我的脚本中使用以下 JS 片段：

```
$.ajax({
            type: "POST",
            url: "http://" + gServer + "/xawebservice/xawebservice.asmx/" + webMethod,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            async: false,
            data: WSParameters,
            success: function callFunction(result) { processResults(result, pType, pParam1); },
            error: function (xhr, status, error) {
                alert(error.toString());
                //alert(xhr.toString());                    
        }
        }); 
```

参数很好，经过测试，web方法也正确。

作为错误消息，我得到了这个：

*   Firefox：[异常...“失败”nsresult：“0x80004005（NS_ERROR_FAILURE）”位置：“JS 框架 :: http:// `localhost`:7515/jquery-1.8.3.js :: :: line 8434”数据：否]
*   Chrome：错误：NETWORK_ERR：XMLHttpRequest 异常 101
*   IE8：无传输

如果我在同一台机器上运行的 Web 服务上使用相同的代码段，则没有问题。如果我通过 Web 界面使用远程 Web 服务，它也可以正常工作。

PS：我google了一下，有些页面推荐了一些跨域参数，这也不起作用。不幸的是，我猜使用相对路径是行不通的。

感谢您提前做出的任何努力。

溴 vm370

更新：好吧，我更新了我的代码以根据我现有的请求执行 CORS 请求，但我收到错误 500，直接在服务器上执行请求工作正常，并且在服务器上激活了 CORS。

```
function xenappRequest(pType, pParam1) {

// CORS request    
var url = "http://" + gServer + "/webservice/webservice.asmx/webMethod";
var params = { "appName": pParam1 };
var xhr = createCORSRequest("POST", url);
if (!xhr) {
    alert('CORS not supported');
} else {
    // Do the request
    // Response handlers.
    xhr.onload = function () {
        //var text = xhr.responseText;
        alert('Response from CORS request to ' + url + ': ' + xhr.response);
    };
    xhr.onerror = function () {
        alert('Woops, there was an error making the request.');
    };
    xhr.send(JSON.stringify(params));
} 
```

}

```
function createCORSRequest(method, url) {
var xhr = new XMLHttpRequest();
if ("withCredentials" in xhr) {
    // Check if the XMLHttpRequest object has a "withCredentials" property.
    // "withCredentials" only exists on XMLHTTPRequest2 objects.
    xhr.open(method, url, true);
} else if (typeof XDomainRequest != "undefined") {
    // Otherwise, check if XDomainRequest.
    // XDomainRequest only exists in IE, and is IE's way of making CORS requests.
    xhr = new XDomainRequest();
    xhr.open(method, url);
} else {
    // Otherwise, CORS is not supported by the browser.
    xhr = null;
}
return xhr; 
```

}

从FF我得到错误500，在IE8中请求落在xhr.onerror子句中......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:26:07.827

[同源政策](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)在这里发挥作用。您无法与另一个域进行通信。这是为了保护您的隐私，因此某些网页无法与您的电子邮件、银行帐户等进行通信。

如果其他域支持[CORS](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，只要浏览器支持，您就可以发出该类型的请求。如果不支持 CORS，则必须使用本地代理或 JSONP 请求 [服务器也必须支持 JSONP。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T13:37:00.823

我做了一点头发拉过这个，这对我有用。

```
// js/jquery /////////

// post method call 
function  myajaxcall_post(){     
    $.ajax({ 
            url: 'http://' + url_path_on_remote_server,
            cache: false,
            type : "POST",            
            data: {request_param1: 'something1', request_param2: 'something2' },
            dataType: 'json',
            success: function(response)
            {
                console.log(response); 
            }            
      });
}

// get method call
function  myajaxcall_get(){     
$.ajax({ 
        url: 'http://' + url_path_on_remote_server + '?callback=?',
        cache: false,            
        type : "GET",            
        data: {request_param1: 'something1', request_param2: 'something2'},
        dataType: 'json',
        success: function(response)
        {
            console.log(response);    
        }
  });
} 
```

注意额外**的'?callback=?'** get 方法调用的 url 中的查询字符串参数。

现在在服务器端脚本上有一些权限设置可以用于远程 ajax 调用。我不确定这些设置有多安全。

get 方法调用的响应准备略有不同。它需要将您的 json 响应包装在传递给服务器的回调函数名称中。Jquery 会自动在查询字符串**'?callback=somethingfromjquery'**中放置一个值。所以我们使用 $_GET['callback'] 来获取回调函数的名称。

```
<?php  
// server side php script ////////////////

// Allow from any origin
if (isset($_SERVER['HTTP_ORIGIN'])) {
    header("Access-Control-Allow-Origin: {$_SERVER['HTTP_ORIGIN']}");
}

// Access-Control headers are received during OPTIONS requests
if ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {

    if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_METHOD'])){
        header("Access-Control-Allow-Methods: GET, POST, OPTIONS");
    }         

    if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS'])){
        header("Access-Control-Allow-Headers:        {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}");
    }
}

// Send some response //////////////
//print_r($_POST);
//print_r($_GET);

$response = array();
$response['message'] = 'Response from '.$_SERVER['HTTP_HOST'];

if(isset($_POST)){ 
    echo json_encode($response);
}
elseif(isset($_GET)){
   echo $_GET['callback'].'('.json_encode($response).')';
}    

?> 
```

如果您需要从表单上传文件，则无法使用 ajax get 方法调用来完成，因为表单序列化不包含文件。您可以使用 FormData() 提供的 ajax post 方法调用。

```
// js/jquery - for forms with file uploading 

function myajaxcall_submitform(){

     // put your form id 
    fdata = new FormData( document.getElementById('form1') ); 

    // add additional fields to form if any to post with
    fdata.append('upload_file_flag', 1);    

    $.ajax({ 
        url: 'http://' + url_path_on_remote_server,
        cache: false,
        type: "POST",            
        data: fdata,
        processData: false, // need this for FormData 
        contentType: false, // need this for FormData 
        dataType: 'json',
        success: function(response)
        {
                console.log(response);  
        }             
     });    
  } 
```

# java - 两个 JComboBoxes。第一个不会改变第二个

> ID：13824944
> 
> 赞同：0
> 
> 时间：2012-12-11T17:03:05.680
> 
> 标签：java, xml, swing, jcombobox

我希望我的应用程序能够选择 1000 个预设。

所以我想到了将 1000 个预置分为 10 个库，每库 100 个预置。

我想使用两个 JComboboxes，第一个是银行列表（选择 1 of 10）。第二个将有 100 个预设。

在第一个库中选择一个库后，它不会刷新第二个库中的预设列表。

**GetXML.setBankFromBankCombo()**方法正在更改变量**bank**。（GetXML 是一个读取 XML 文件的类）。通过打印System.out.println()可以看出，但是不知道为什么JCombo中的presets没有变化。

为了使其代码更清晰，我将库和预设的数量限制为 3 个项目。

[截图](http://zapodaj.net/images/4f10afdaa6750.jpg "截屏") [1 截图2](http://zapodaj.net/images/881d0d24f6505.jpg)

类**FrameCombo**：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.event.*;

public class FrameCombo extends JPanel {

    private Presets comboPresets;
    private JComboBox comboBank;
    private int activeBank;

    public FrameCombo() {

        activeBank = 1;
        setPreferredSize(new Dimension(410, 200));

        /**
         * Bank Combo
         *
         */
        String[] banks = {
            "Bank 0",
            "Bank 1",
            "Bank 2"
        };

        comboBank = new JComboBox(banks);
        comboBank.setEditable(true);
        comboBank.setPreferredSize(new Dimension(180, 30));
        comboBank.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                JComboBox cb = (JComboBox) e.getSource();
                activeBank = cb.getSelectedIndex();
                comboPresets.setBank(activeBank);
                System.out.println("FrameCombo.activeBank = " + activeBank);

            }
        });
        JPanel bankPanel = new JPanel();
        bankPanel.setPreferredSize(new Dimension(180, 100));
        bankPanel.add(new JLabel("Banks"));
        bankPanel.add(comboBank);
        add(bankPanel);

        /**
         * Presets Combo
         *
         */
        comboPresets = new Presets();
        comboPresets.addChangeListener(new ChangeListener() {
            public void stateChanged(ChangeEvent e) {
                //presets do something
            }
        });

        JPanel presetPanel = new JPanel();
        presetPanel.setPreferredSize(new Dimension(180, 110));
        presetPanel.add(new JLabel("Presets"));
        presetPanel.add(comboPresets);
        add(presetPanel);
    }

    public void setBank(int value) {
        activeBank = value;
    }

    public int getBank() {
        return activeBank;
    }

    public static void main(String[] args) {
        final String title = " Frame Combo";
        System.out.println(title);
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame frame = new JFrame(title);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.getContentPane().add(new FrameCombo());

                frame.setResizable(false);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

类**预设**：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

public class Presets extends JPanel
        implements ActionListener {

    private int bank;
    private int value;
    private int[] ctrlIdx = new int[3];
    private int controller;
    private ChangeEvent changeEvent = null;
    private EventListenerList listenerList = new EventListenerList();
    private GetXMLPresets dane;
    private String[][] patern;
    private String[] itemName;
    public MainWindow model = new MainWindow();
    JComboBox item;

    public Presets() {

        dane = new GetXML(bank);
        patern = dane.ct; // controllers
        itemName = dane.lb; // name
        System.out.println("Presets() " + bank);
        JComboBox item = new JComboBox(itemName);
        item.setSelectedIndex(0);
        item.addActionListener(this);
        item.setPreferredSize(new Dimension(180, 30));
        add(item);
        setPreferredSize(new Dimension(210, 40));
    }

    public void setValue(int c, int v) {
        controller = c;
        value = v;
        ctrlIdx[controller] = value;
        repaint();
        fireChangeEvent();
    }

    public int getController() {
        return controller;
    }

    public int getValue(int c) {
        int w = (int) ctrlIdx[c];
        return (int) w;
    }

    public void setBank(int value) {
        bank = value;
        dane.setBankFromBankCombo(bank);
        repaint();
        fireChangeEvent();
    }

    public int getBank() {
        return bank;
    }

    public void actionPerformed(ActionEvent e) {
        JComboBox cb = (JComboBox) e.getSource();
        String item = (String) cb.getSelectedItem();
        int indeks = cb.getSelectedIndex();

        for (int i = 0; i < itemName.length; i++) {
            for (int j = 0; j < patern[i].length; j++) {
                model.setController(j, Integer.parseInt(patern[indeks][j]));
                setValue(j, Integer.parseInt(patern[indeks][j]));
            }
        }

    }

    public void addChangeListener(ChangeListener cl) {
        listenerList.add(ChangeListener.class, cl);
    }

    public void removeChangeListener(ChangeListener cl) {
        listenerList.remove(ChangeListener.class, cl);
    }

    protected void fireChangeEvent() {

        Object[] listeners = listenerList.getListenerList();

        for (int i = listeners.length - 2; i >= 0; i -= 2) {
            if (listeners[i] == ChangeListener.class) {

                if (changeEvent == null) {
                    changeEvent = new ChangeEvent(this);
                }
                ((ChangeListener) listeners[i + 1]).stateChanged(changeEvent);
            }
        }
    }
} 
```

类**GetXML**：

```
import java.io.*;
import javax.swing.*;
import javax.xml.xpath.*;
import org.w3c.dom.*;
import org.xml.sax.InputSource;

public class GetXML extends JPanel {

    private int numpresets;
    public String[] lb = new String[3];
    public String[][] ct = new String[3][3];
    private int bank;

    public GetXML(int a) {

        bank = a;
        try {

            XPathFactory factory = XPathFactory.newInstance();
            XPath xPath = factory.newXPath();

            NodeList patches = (NodeList) xPath.evaluate("/bank/patch",
                    new InputSource(new FileReader(new File("patches/presets" + bank + ".xml").getAbsolutePath())),
                    XPathConstants.NODESET);
            setNumPresets(patches.getLength());
            String[] labels = new String[numpresets];
            String[][] ctrl = new String[numpresets][3];

            for (int i = 0; i < numpresets; i++) {
                Element patch = (Element) patches.item(i);
                String controllerName = xPath.evaluate("controllers/name/text()", patch);

                for (int j = 0; j < 3; j++) {
                    ctrl[i][j] = xPath.evaluate("controllers/c" + Integer.toString(j + 1) + "/text()", patch);
                    ct[i][j] = ctrl[i][j];
                }
                labels[i] = controllerName;
                lb[i] = labels[i];
            }
        } catch (FileNotFoundException fnfe) {
            System.out.println("FileNotFoundException " + fnfe);
            fnfe.printStackTrace();
        } catch (IOException ioe) {
            System.out.println("IOException " + ioe);
        } catch (Exception eio) {
            System.out.println("eio " + eio);
        }

    }

    public void setBank(String[] b) {
        lb = b;
    }

    public String[] getBank() {
        return lb;
    }

    public void setPreset(String[][] c) {
        ct = c;
    }

    public String[][] getPreset() {
        return ct;
    }

    public void setNumPresets(int a) {
        numpresets = a;
    }

    public int getNumPresets() {
        return numpresets;
    }

    public void setBankFromBankCombo(int id) {
        System.out.println("GetXMLPresets.setIDFromBankCombo() " + id);
        bank = id;

    }
} 
```

和一个 XML 文件**Presets0.xml的示例**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<bank bid="0">
    <patch pid="1">
        <controllers>
            <name>bank 0: preset 1</name>
            <c1>55</c1>
            <c2>3</c2>
            <c3>24</c3>
        </controllers>
    </patch>
    <patch pid="2">
        <controllers>
            <name>bank 0: preset 2</name>
            <c1>33</c1>
            <c2>1</c2>
            <c3>45</c3>
        </controllers>
    </patch>
    <patch pid="3">
        <controllers>
            <name>bank 0: preset 3</name>
            <c1>43</c1>
            <c2>23</c2>
            <c3>39</c3>   
        </controllers>
    </patch>
</bank> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:40:27.863

很简单，你并没有改变`Preset`'s 组合框的内容，这意味着虽然数据已经加载，但它还没有应用于组合框模型，所以组合框不知道它有新数据显示。

查看[如何使用梳状盒](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)了解更多详情

# java - PrimeFaces 3.2 简单 FileUpload ，在上传前获取所选文件信息，如文件名

> ID：13824948
> 
> 赞同：3
> 
> 时间：2012-12-11T17:03:26.070
> 
> 标签：java, file-upload, primefaces

我正在使用（Java Server Faces 2.2）Primefaces 3.2 简单文件上传控制器。我需要在上传之前访问文件信息。选择文件时我可以使用什么侦听器以及如何`ManagedBean`在开始上传之前获取文件信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:22:51.010

该标签不支持任何 ajax 行为事件，因此您唯一能做的就是在上传开始之前调用一个方法，使用上传开始时触发的*“onstart”*属性。使用远程命令，您可以执行以下操作：

```
<p:remoteCommand name="beforeUpdate" partialSubmit="true" process="@this" 
                                 actionListener="#{myBean.doBefore}" value="" /> 
```

将远程命令调用添加到文件上传

```
<p:fileUpload fileUploadListener="#{itemImportDialogController.uploadListener}" 
         mode="advanced" multiple="true" onstart="beforeUpdate()"
         styleClass="importItems" update=":itemImportView:fileForm" style="margin: 10px 0"/> 
```

并在bean中添加这样的方法

```
public void doBefore() {
     //DO SOME WORK
} 
```

关于文件名，您只能在文件上传时检索它

```
public void uploadListener(FileUploadEvent event) {

    UploadedFile file = event.getFile();
    //DO SOMETHING
} 
```

因为在此之前，组件和服务器之间没有可能的 ajax 交互。所以我很抱歉，但这是不可能的。

顺便说一句，您可以尝试通过 jQuery 捕捉事件来管理它，例如

```
$('input[type=file]').change(function() { 
    //GET THE FILE AND SUBMIT IT TO THE SERVER WITH AJAX CALL 
}); 
```

# java - 使用java在xml中搜索结束排除

> ID：13824950
> 
> 赞同：1
> 
> 时间：2012-12-11T17:03:28.613
> 
> 标签：java, xml, xpath

我正在尝试在 xml 文件中搜索这些事件：

```
<xml>  
<corpus>  
<body>  
<nonterminals>  
<graph>  
<s>  
<nt id="s9_509" cat="fcl"></nt>  

<nt id="s9_501" cat="pp">  
                <edge label="H" idref="s9_1"/>  
                <edge label="DP" idref="s9_502"/>  
                <edge label="STA" idref="s9_509"/>  
                <edge label="P" idref="s9_19"/>  
                <edge label="S" idref="s9_510"/>  
                <edge label="PU" idref="s9_25"/>  
            </nt>  
</nonterminals>  
</graph>  
</s>  
</body>  
</corpus>  
</xml> 
```

我的代码是：

```
XPath xpath = XPathFactory.newInstance().newXPath();    
String path = "//xml//corpus//build//s//graph//nonterminals//nt";  
XPathExpression expr = xpath.compile(path);    
System.out.println("Query1: "+path);  
Object result = expr.evaluate(document, XPathConstants.NODESET);    
NodeList nodes = (NodeList) result;    
System.out.println("Number of nodes: "+nodes.getLength());  
for (int i = 0; i < nodes.getLength(); i++) {    
    System.out.println(nodes.item(i).getAttributes().getNamedItem("id").getNodeValue()); 
```

这个查询正确吗？是否存在另一种尝试方式？如何删除节点发现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:33:25.887

如果这是您的 XML 的整个结构并且`<xml>`是您的根节点，我会说您的 XPath 应该是：

```
/xml/corpus/build/s/graph/非终端/nt
```

如果您想匹配**每个** `nt`节点，无论它出现在文档中的哪个位置，您都可以使用：

```
//nt
```

有一些有用的免费工具可以查看 XPath 查询的结果，而无需预先编写 java：

[http://xml-copy-editor.sourceforge.net/](http://xml-copy-editor.sourceforge.net/)

[http://www.xpathtester.com/](http://www.xpathtester.com/)

# scala - maven 无法创建原型 org.fusesource.scalate.tooling:scalate-archetype-jersey

> ID：13824952
> 
> 赞同：0
> 
> 时间：2012-12-11T17:03:34.537
> 
> 标签：scala, maven, scalate

使用 Maven 3.0.1 的全新安装：

```
> mvn archetype:generate

Choose a number or apply filter: 
  461: remote -> org.fusesource.scalate.tooling:scalate-archetype-jersey (An archetype which creates an empty Scalate web application)

Choose org.fusesource.scalate.tooling:scalate-archetype-jersey version: 
   11: 1.5.3-scala_2.8.2

> mvn clean install

[ERROR] Plugin org.fusesource.scalate:maven-scalate-plugin:1.5.3-scala_2.8.2 or one of its dependencies could not be resolved: Could not find artifact org.fusesource.scalate:maven-scalate-plugin:jar:1.5.3-scala_2.8.2 in central (http://repo1.maven.org/maven2) -> [Help 1] 
```

为什么会这样？我需要存储库还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:51:04.730

从那时起，原型似乎已经更新，现在有以下两个：

477：远程 -> org.fusesource.scalate.tooling:scalate-archetype-jersey_2.10（创建空 Scalate Web 应用程序的原型） 478：远程 -> org.fusesource.scalate.tooling:scalate-archetype-jersey_2。 9（创建一个空的 Scalate Web 应用程序的原型）

我尝试使用 scalate-archetype-jersey_2.9，它通过了“mvn clean install”命令。

# regex - 在 Perl 中，如何加快正则表达式修改一个非常大的字符串？

> ID：13824953
> 
> 赞同：2
> 
> 时间：2012-12-11T17:03:32.963
> 
> 标签：regex, string, perl

我有一个由 3 亿个碱基组成的字符串；

```
$str = "ATCGTAGCTAGXCTAGCTAGCTGATXXXXATCGTAGCTAGCTGXTGCTAGCXXXXA...A"; 
```

我想将字符串中不是[ATGC]的字符替换为其他字符，比如说“A”，同时获取已替换字符的位置；

我试过这个：

```
while ($str=~/[^ATGC]/ig)
{
  $pos = pos($str);
  substr($str, $pos-1,1) = "A";
} 
```

但是速度不好。

有谁知道更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:05:52.150

正则表达式也可以替换和匹配。

```
$str =~ s/X/A/g; 
```

如果你只做一个字符，你甚至可以使用`tr`操作符。

```
$str =~ tr/X/A/g; 
```

这甚至可能更快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T17:05:13.260

您可以使用[搜索和替换直接使用正则表达式执行替换](http://perldoc.perl.org/perlrequick.html#Search-and-replace)：

```
$str =~ s/X/A/ig; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T17:36:25.173

如有疑问，[基准](http://search.cpan.org/perldoc?Benchmark)

```
use strict;
use warnings;
use v5.14;

use Benchmark qw(cmpthese);

my @l = qw(A T G C X);
my $BAR;
$BAR .= $l[rand(@l)] for 1..10000;

cmpthese(-1, {
    substr          => sub { my $str = $BAR; 
                         while ($str=~/X/ig) {
                             my $pos = pos($str);
                             substr($str, $pos-1,1) = "A";
                         } return $str; },
    substitution    => sub { my $str = $BAR; $str =~ s/X/A/ig;  return $str; },
    transliteration => sub { my $str = $BAR; $str =~ tr/xX/aA/; return $str; }}); 
```

**结果：**

```
 Rate          substr    substitution transliteration
substr           55.1/s              --            -98%           -100%
substitution     2496/s           4433%              --            -93%
transliteration 35134/s          63719%           1308%              -- 
```

正如我们从结果中看到的那样，对于这个特定的字符串和正则表达式，substr 方法确实非常慢，每秒 55 次。使用替换的速度大约快 45 倍，但这与快 600 倍的音译相比相形见绌。

因此，在这种情况下，音译似乎是最快的。这是有道理的，因为它是迄今为止最简单的潜艇。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T17:58:57.113

如果您只想替换输入字符串中的“X”字符，音译是可行的方法，它将显着提高您的速度。

记录替换字符的位置有点麻烦。我建议如下：

```
my $huge_string = "GATTACAXX.......";
my $length = length($huge_string);
my $i = 0;

my $output_string;
my @x_positions;

while ($i < $length) {
    my $curr_char = substr($huge_string, $i, 1);
    if ($curr_char eq "X") {
        push (@x_positions, $i);
        $output_string .= "A"; # or G, C, T, etc.
    } else {
        $output_string .= $curr_char;
    }
    $i++;
}

# do something with $output_string and @x_positions... 
```

我在超过 1,000,000 个字符的测试字符串上运行它，它在不到一秒的时间内完成，而原始代码片段的运行时间约为 3 分钟。

希望有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T17:09:04.360

如果您只是用另一个字符替换一个字符（**不是**逐个字符串或逐个字符串！！！），音译会更快：`$str =~ tr/X/A/;` 如果您需要复杂的正则表达式模式，请考虑使用[re::engine::RE2](https://metacpan.org/module/re%3a%3aengine%3a%3aRE2)，一个 Perl为[Google RE2 引擎](http://code.google.com/p/re2/)绑定。请注意，这仅对于*复杂*的正则表达式更快。

# php - phpunit 在 netbeans 7.2.1 中不起作用

> ID：13824955
> 
> 赞同：1
> 
> 时间：2012-12-11T17:03:40.730
> 
> 标签：php, netbeans, yii, phpunit

我环顾四周，找不到任何相关的东西......

我正在使用带有最新 PEAR PHPUnit 的 netbeans 7.2.1。

我不断收到此错误：“无法识别的选项--skeleton-test”

我遵循了本指南：[http ://www.yiiframework.com/forum/index.php/topic/4717-netbeans-68-phpunit-and-yii/](http://www.yiiframework.com/forum/index.php/topic/4717-netbeans-68-phpunit-and-yii/)

和： http: [//netbeans.org/kb/docs/php/phpunit.html](http://netbeans.org/kb/docs/php/phpunit.html)

但无法克服这个错误......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:01:15.790

经过多次搜索后，我编写了以下教程，希望对其他人有所帮助：

```
*** phpunit via PEAR: ***
----------------
SELENIUM FOR FUNCTION TESTING (not mendatory)
A. pear install --force phpunit/PHPUnit_Selenium
B. http://www.phpunit.de/manual/3.1/en/selenium.html

PHPUnit + Selenium: (http://amiworks.co.in/talk/installing-pear-and-phpunit-on-wamp-and-windows-7/)
A. pear upgrade pear
B. pear channel-discover components.ez.no 
C. pear channel-discover pear.phpunit.de
D. pear channel-discover pear.symfony.com //+ pear channel-discover pear.symfony-project.com
E. pear install --alldeps pear.phpunit.de/PHPUnit
F. pear install phpunit/PHPUnit_SkeletonGenerator
G. pear install phpunit/PHPUnit_Selenium

In NETBEANS:

    A. Tools --> Options --> PHP --> Unit Test --> Add PHPUnit + Skeleton
    B. Right click on the project --> properties --> PHPUnit --> 
        B1\. Browse to bootstrap + XML and Genereate to tests folder
        B2\. update the generated bootstrap with Yii (from original bootstrap)

*** UPDATE bootstrap: (PHPUnit >3.6):
    add "require_once( Yii::getPathOfAlias('system.test.CTestCase').'.php' );" after "require_once($yiit);"
*** UPDATE Yii Framework CTestCase.php (PHPUnit >3.6):
    require_once('PHPUnit/Runner/Version.php');
    require_once('PHPUnit/Autoload.php');

*** In case of errors make sure php.ini under php folder is not missing configuration (should have the same as php.ini under Apache in WAMP) 
```

问候，丹尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:37:49.730

好吧。如果你能找到 phpunit.xml，我会检查这个[链接](https://stackoverflow.com/questions/7608615/phpunit-integration-into-netbeans-7)是否有同样的问题与解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:54:24.227

不用说，您的设置不正确。首先检查并确保您可以在终端/命令提示符下运行 phpunit，以确保您首先正确设置了 phpunit。[一旦确认，我会说您应该参考 netbeans 文档以在 netbeans http://netbeans.org/kb/docs/php/phpunit.html](http://netbeans.org/kb/docs/php/phpunit.html)中设置和使用 phpunit

# extjs - 仅约束顶部

> ID：13824956
> 
> 赞同：1
> 
> 时间：2012-12-11T17:03:41.390
> 
> 标签：extjs, drag-and-drop

没有任何限制，我有以下问题：如果用户将标题拖动到窗口顶部上方，则用户将无法拖动。

像这样：

```
 ________
  |header|
__|______|_____
| |      |    |
| |______|    |
|             |
|             |
|_____________| 
```

constrain:true 对我的用途来说太有限了，因为需要从侧面和底部拖动的能力。这也适用于受约束的，因为窗口将无法从侧面拖出。

有没有办法防止只拖到页面顶部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:18:23.663

尝试使用约束头配置。看看这是不是你需要的。 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-constrainHeader](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-constrainHeader)

否则，您需要自行扩展它以适合您的用例。

# facebook - 无法检索用于在 FB 病毒式点击时打开移动应用程序的完整 facebook url

> ID：13824961
> 
> 赞同：1
> 
> 时间：2012-12-11T17:04:01.447
> 
> 标签：facebook, trigger.io, url-scheme, deep-linking

我目前正在尝试使用 urlhandler 设置，以便了解来自 FB 应用程序时使用哪个原始 URL 打开我的应用程序。[（请参阅文档](https://developers.facebook.com/docs/mobile/android/deep_linking/#deeplink)中的深层链接部分）

我在我的 Forge 应用程序中尝试了任何 url 方案（我的包名称、活动类和路径、http url）但没有任何成功。我的本机应用程序中的 urlhandler 侦听器永远不会被触发。

谁能引导我正确使用[urlhandler forge](http://docs.trigger.io/en/v1.4/modules/urlhandler.html)模块？

* * *

编辑：我设法使 urlhandler 事件侦听器在初始应用程序启动期间被触发......但有一个例外：

```
 Native call "urlhandler.urlLoaded" with task.params: {}
    [   INFO] W/Forge   (23672): Error while executing API method: urlhandler.urlLoaded
    [   INFO] D/Forge   (23672): Returning: {"content":{"type":"UNEXPECTED_FAILURE",
"message":"Forge Java error: NullPointerException: null",
"full_error":"java.lang.NullPointerException\n\tat io.trigger.forge.android.modules.urlhandler.API.urlLoaded(API.java:14)\n\tat java.lang.reflect.Method.invokeNative(Native Method)\n\tat java.lang.reflect.Method.invoke(Method.java:511)\n\tat io.trigger.forge.android.core.ForgeApp.callJavaFromJavaScript(ForgeApp.java:194)\n\tat io.trigger.forge.android.core.ForgeJSBridge.callJavaFromJavaScript(ForgeJSBridge.java:8)\n\tat android.webkit.JWebCoreJavaBridge.sharedTimerFired(Native Method)\n\tat android.webkit.JWebCoreJavaBridge.sharedTimerFired(Native Method)\n\tat android.webkit.JWebCoreJavaBridge.fireSharedTimer(JWebCoreJavaBridge.java:92)\n\tat android.webkit.JWebCoreJavaBridge.handleMessage(JWebCoreJavaBridge.java:108)\n\tat android.os.Handler.dispatchMessage(Handler.java:99)\n\tat android.os.Looper.loop(Looper.java:137)\n\tat android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:1057)\n\tat java.lang.Thread.run(Thread.java:856)\n"},"status":"error","callid":"BDEEEAE6-1A7A-4608-A75F-CE53F2DB2677"} 
```

这是我为得到这个错误而输入的 urlscheme：`content://<package_name>`

当我的应用程序已经打开、暂停然后从 Facebook 病毒式传播中恢复时，我仍然无法触发任何事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:35:03.667

编辑： NullPointerException 的修复进入平台版本 v1.4.34 - 请参阅[http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-34](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-34)。

未编辑问题的答案如下：

* * *

来自我们的一个测试应用程序的示例：在 App Config 中，我们将 urlhandler 模块配置为侦听`forgetest`方案：

```
"urlhandler": {
  "scheme": "forgetest"
} 
```

然后，打开一个类似的链接`<a href="forgetest://a/b/c">`，您的 urlhandler 回调将`"forgetest://a/b/c"`作为其参数被调用。

# neo4j - Neo4j - Cypher vs Gremlin 查询语言

> ID：13824962
> 
> 赞同：110
> 
> 时间：2012-12-11T17:04:02.417
> 
> 标签：neo4j, graph-databases, cypher, gremlin

我开始使用 REST API 使用 Neo4j 进行开发。我看到执行复杂查询有两种选择——Cypher（Neo4j 的查询语言）和 Gremlin（通用图形查询/遍历语言）。

这就是我想知道的 - 是否有任何查询或操作可以使用 Gremlin 完成而不能使用 Cypher 完成？或相反亦然？

Cypher 对我来说似乎比 Gremlin 清楚得多，而且总的来说，Neo4j 中的人似乎都在使用 Cypher。但是 - 如果 Cypher 与 Gremlin 相比是有限的 - 我真的很想提前知道这一点。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-12T09:26:47.033

对于一般查询，Cypher 就足够了，而且可能更快。Gremlin 相对于 Cypher 的优势在于您可以进行高级遍历。在 Gremlin 中，您可以更好地定义准确的遍历模式（或您自己的算法），而在 Cypher 中，引擎会尝试自行找到最佳遍历解决方案。

我个人使用 Cypher 是因为它的简单性，并且迄今为止，我还没有遇到任何必须使用 Gremlin 的情况（除了使用 Gremlin graphML 导入/导出函数）。然而，我希望即使我需要使用 Gremlin，我也会为我在网上找到的特定查询这样做，并且永远不会再回来。

你总是可以很快（在几天内）学习 Cypher，然后继续学习（长期）通用 Gremlin。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-03-22T14:43:59.653

我们必须在查询中遍历数千个节点。Cypher 很慢。Neo4j 团队告诉我们，直接针对 Java API 实现我们的算法将快 100-200 倍。我们这样做了，并且轻松地从中获得了 60 倍的收益。由于缺乏信心，到目前为止，我们的系统中没有单个 Cypher 查询。Easy Cypher 查询很容易用 Java 编写，复杂的查询不会执行。问题是当您的查询中有多个条件时，Cypher 无法判断执行遍历的顺序。因此，您的密码查询可能首先会以错误的方向进入图表。我对 Gremlin 所做的不多，但我可以想象你使用 Gremlin 可以获得更多的执行控制。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-01-04T16:20:57.227

Neo4j 团队在 Cypher 上的努力确实令人印象深刻，而且已经取得了长足的进步。Neo 团队通常会推动人们走向它，随着 Cypher 的成熟，Gremlin 可能会受到较少的关注。Cypher 是一个不错的长期选择。

也就是说——Gremlin 是一个 Groovy DSL。通过其 Neo4j REST 端点使用它可以完全、不受限制地访问底层 Neo4j Java API。它（以及同类别的其他脚本插件）在低级功率方面无法匹敌。另外，您可以[从 Gremlin 插件中运行 Cypher](https://github.com/scholrly/neo4django/blob/master/neo4django/gremlin/library.groovy#L19)。

无论哪种方式，都有一个明智的升级路径，您可以同时学习两者。我会选择能让你更快地启动和运行的那个。在[我的](https://github.com/scholrly/neo4django) [项目](http://scholr.ly/)中，我通常使用 Gremlin，然后在需要表格结果或表达模式匹配时调用 Cypher（无论是否在 Gremlin 内部）——这两者都是 Gremlin DSL 的痛点。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-12-11T19:03:26.453

我最初开始使用 Gremlin。但是，当时 REST 接口有点不稳定，所以我切换到了 Cypher。它对 Neo4j 有更好的支持。但是，有些类型的查询根本无法使用 Cypher，或者 Cypher 无法完全优化您使用 Gremlin 的方式。

Gremlin 是基于 Groovy 构建的，因此您实际上可以将它用作让 Neo4j 执行“Java”代码并从服务器执行各种任务的通用方式，而无需从 REST 接口获取 HTTP 命中。其中，Gremlin 将允许您修改数据。

但是，当我只想查询数据时，我会选择 Cypher，因为它更具可读性且更易于维护。Gremlin 是达到限制时的后备方案。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-04-11T07:39:59.847

Gremlin 查询可以通过编程方式生成。（请参阅[http://docs.sqlalchemy.org/en/rel_0_7/core/tutorial.html#intro-to-generation-selects](http://docs.sqlalchemy.org/en/rel_0_7/core/tutorial.html#intro-to-generative-selects)了解我的意思。）这对于 Cypher 来说似乎有点棘手。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-04-10T00:03:13.927

Cypher 仅适用于简单查询。当您开始将复杂的业务逻辑整合到您的图遍历中时，它会变得异常缓慢或完全停止工作。

Neo4J 清楚地知道 Cypher 并没有削减它，因为它们还提供了 APOC 程序，其中包括备用路径扩展器（`apoc.path.expand`,`apoc.path.subgraphAll`等）。

Gremlin 更难学习，但比 Cypher 和 APOC 更强大。您可以在 Gremlin 中实现您能想到的任何逻辑。

我真的希望 Neo4J 附带一个可切换的 Gremlin 服务器（通过阅读，这曾经是这种情况）。你可以让 Gremlin 在一个实时的 Neo4J 实例上运行，但它需要跳过很多圈。我的希望是，既然 Neo4J 的竞争对手允许 Gremlin 作为选项，Neo4J 也会效仿。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-02-20T07:34:30.173

Cypher 是一种用于查询图形数据库的声明式查询语言。声明式这个术语很重要，因为它是一种不同于命令式编程范式的编程方式。

在像 Cypher 和 SQL 这样的声明式查询语言中，我们告诉底层引擎我们想要获取什么数据，并且我们没有指定我们希望如何获取数据。

在 Cypher 中，用户在 MATCH 子句中定义了一个感兴趣的子图。然后底层引擎运行模式匹配算法来搜索图数据库中子图的相似出现。

Gremlin 既是声明性的又是命令式的特性。它是一种图形遍历语言，用户必须明确说明如何导航图形。

在这种情况下，这些语言之间的区别在于，在 Cypher 中，我们可以使用 Kleene 星号运算符来查找图形数据库中任意两个给定节点之间的路径。然而，在 Gremlin 中，我们必须明确定义所有此类路径。但是我们可以在 Gremlin 中使用重复运算符来查找图形数据库中此类显式路径的多次出现。但是，在 Cypher 中不可能对显式结构进行迭代。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-10-26T10:51:47.823

如果你使用 gremlin，那么它可以让你迁移到不同的图数据库，由于大多数图数据库都支持 gremlin 遍历，所以选择 gremlin 是个好主意。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-03-20T18:36:29.280

长答案短：使用 cypher 进行查询，使用 gremlin 进行遍历。您将自己看到响应时间。

# python - 在 SublimeText2 中，如何选择要构建的 .py 文件而不是打开的文件？

> ID：13824970
> 
> 赞同：1
> 
> 时间：2012-12-11T17:04:32.793
> 
> 标签：python, sublimetext2

我经常在 SublimeText2 的多个选项卡中打开许多文件。假设我有 2 个文件，main.py 和 helper.py。在编辑 helper.py 时，如何在不将选项卡切换到要构建的文件的情况下构建 main.py？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:14:09.643

@Hlung 所说的会起作用，但我认为如果您创建一个特定于项目的构建系统（存储在项目配置中）会更好。这样，您的始终执行主文件构建系统仅在您打开该项目时才处于活动状态。如果您只是编辑要执行的单个脚本，则不必手动切换构建系统来运行它们。

这是我使用的文件示例，`*.sublime-project`其中包含特定于项目的构建系统：

```
{
    "folders":
    [
        {
            "path": "app",
            "file_exclude_patterns": ["*.sublime-*"],
            "folder_exclude_patterns": ["__pycache__"]
        }
    ],
    "settings":
    {
        "tab_size": 4,
        "translate_tabs_to_spaces": true
    },
    "build_systems":
    [
        {
            "name": "app",
            "cmd": ["python", "-u", "${project_path}/main.py"],
            "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
            "selector": "source.python",
            "shell": true
        }
    ]
} 
```

[您可以在此处](http://docs.sublimetext.info/en/latest/reference/build_systems.html)找到有关构建系统的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:04:32.793

创建一个新的构建系统并将**$file**替换为您的**"main.py"**。

在**“工具 > 构建系统 > 新构建系统...”**中，将此代码放入：

```
{
    "cmd": ["python", "-u", "main.py"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

用某个名称保存它，例如**"Python(main.py).sublime-build"**。现在**Python(main.py)**将出现在您的构建系统列表中。选择它并按 cmd+B 进行构建，现在您将始终使用“main.py”进行构建:)

# python - 如何以一致的方式从 Pandas DataFrame 中检索具有相同索引标签的行？

> ID：13824973
> 
> 赞同：0
> 
> 时间：2012-12-11T17:04:36.333
> 
> 标签：python, pandas

我知道可以使用`df.xs(lbl)`所有索引 equal 来访问 DataFrame 的行`lbl`，但是，我有以下问题：

我希望能够遍历时间序列（ s 的`T`简单序列），如下所示：`list``datetime`

where`dfA`是由 all 索引的数据帧`T`，并且`dfB`是具有多个（一些重复）索引的数据帧`T`，但不是全部`T`

```
for t in T:
    for r in dfB.xs(t).iterrows():
        # do something with r on values in dfA @ t
    # do something else with values in dfA @ t 
```

我遇到的问题是：

1.  如果`t`不在 中`df`，`KeyError`则引发 a。
2.  `t`如果in仅有一个条目`df`，则生成一个`Series`对象
3.  如果 中 有多个`t`，则`df`产生一个`DataFrame`对象

正如你所看到的，这会为一些应该相当直接的东西编写相当丑陋的代码。我确信必须有一种更*熊猫*的方式来做到这一点，但这对我来说并不明显。

**更新：**

转储`T`如下`dfB`：

注意：我已将`T`原始代码更改为 a `DatetimeIndex`，但这不应更改原始前提。

```
In [26]: T
Out[26]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2000-03-15 00:00:00, ..., 2012-12-26 00:00:00]
Length: 3191, Freq: None, Timezone: None

In [27]: orders #equivalent to dfB
Out[27]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 15322 entries, 2000-03-15 00:00:00 to 2012-12-27 00:00:00
Data columns:
Symbol    15322  non-null values
Type      15322  non-null values
Number    15322  non-null values
dtypes: int64(1), object(2) 
```

`pandas`如果行为符合我的预期/希望，这足以使原始代码片段正常工作。

此外，要显示在`dfB`位置包含多个相同值的索引：

```
In [30]: orders.xs(t) #equivalent to dfB.xs(t)
Out[30]: 
             Symbol Type  Number
Date                            
2012-12-26  0596.HK  Buy    1000
2012-12-26  0387.HK  Buy    1000
2012-12-26  0342.HK  Buy    1000
2012-12-26  0343.HK  Buy    1000
2012-12-26  0491.HK  Buy    1000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:19:48.387

你能用`dfB.reindex(T).iterrows()`吗？

# pca - 有没有好的图书馆可以快速做 NMF？

> ID：13824975
> 
> 赞同：0
> 
> 时间：2012-12-11T06:38:53.077
> 
> 标签：pca, factor-analysis, matrix, dimensionality-reduction

我有一个稀疏矩阵，其形状为**570000*3000**。我试过[nima](http://nimfa.biolab.si/)做 NMF（使用默认的 nmf 方法，并设置`max_iter`为 65）。但是，我发现 nimfa 非常慢。有没有人使用更快的库（可以被 Python/R 使用）或软件来做 NMF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T08:30:41.343

这个问题（[Sparse matrix factorization with Nimfa is very slow with implicit zeros](https://stackoverflow.com/questions/16749356/sparse-matrix-factorization-with-nimfa-is-very-slow-with-implicit-zeros)）表明您可能想尝试代码的 .todense() 版本？

# c - 为什么这不会进入while循环？

> ID：13824976
> 
> 赞同：-2
> 
> 时间：2012-12-11T17:04:49.107
> 
> 标签：c, while-loop

我一直在努力弄清楚为什么它不会打印出测试消息并进入`while`循环。有任何想法吗？

```
void getInput(char * string)
{
  char * tempString;
  int maxLength = 1026; // Accounts for NULL and \n.
  tempString = malloc(maxLength * sizeof(char));  

  fgets(tempString, maxLength, stdin);
  size_t len = strlen(tempString);

  while ((int)len > maxLength)
  {  
    printf("Test");
    if (tempString[len-1] == '\n')
    {
      tempString[len-1] = '\0';
      len = strlen(tempString); 
    } // if
  } // while 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:08:01.170

`fgets(tempString, maxLength, stdin);`最多读取`maxLength-1`字节。有关详细信息，请参见 fgets[手册页](http://www.manpagez.com/man/3/fgets/)。

这意味着`strlen(tempString)`必须始终小于`maxLength`。

你的意思是`<`用作你的循环测试吗？

```
 while ((int)len < maxLength) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:39:18.247

由于没有其他人这样做，让我向您介绍手册页。如果您没有基于 Linux 的操作系统，只需在 Google 中输入 man 和函数名称，您就会得到该函数如何工作的描述。

[这是 fgets() 的手册页](http://linux.die.net/man/3/fgets)：

> char *fgets(char *s, int size, FILE *stream);
> fgets() 从流中最多读入**一个小于 size**的字符，并将它们存储到 s 指向的缓冲区中。

所以在你的代码中：

```
fgets(tempString, maxLength, stdin); // size is maxLength 
```

您将永远不会阅读更多内容`maxLength-1`，这就是该功能的工作原理。

# git - 带有 linux 命令的 Git 别名

> ID：13824978
> 
> 赞同：0
> 
> 时间：2012-12-11T17:04:59.897
> 
> 标签：git

基本上我想将当前分支中的本地文件与远程文件进行比较，但我也想知道是否有办法将 Git 别名与 Linux 命令混合。

我创建的脚本如下所示：

```
git show origin/$(git rev-parse --abbrev-ref HEAD):$1 > /tmp/xxx <br/>
git diff /tmp/xxx $1 
```

有没有办法作为 Git 别名而不是创建脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:02:41.570

`!`如果值以字符开头，则别名将传递给 shell 以执行 。所以可以定义一个别名来做你想做的事。

```
[alias]
    diff-remote = "!f() { git show origin/$(git rev-parse --abbrev-ref HEAD):$GIT_PREFIX$1 > /tmp/xxx; git diff /tmp/xxx $GIT_PREFIX$1; }; f" 
```

别名总是从存储库的顶级目录运行，从那里到原始目录的路径存储在`$GIT_PREFIX`. 因此，有必要将其添加到文件名中，以便别名可以在存储库中的其他目录中工作。

但是，要做到这一点，有必要将实际代码放入函数中。否则，无法将该变量直接插入到第一个参数之前。

因此，这个别名定义定义了一个`f`带有所需命令的 shell 函数（名为 ），然后立即运行它。无需清理临时函数，因为该 shell 将在函数完成后立即退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:17:11.140

在 shell 中执行，而不是 git 本身。编写脚本并将其保存在路径中，或将其编写为 shell 函数：

```
function diff-remote()
{
    git show "origin/$(git rev-parse --abbrev-ref HEAD):$1" > /tmp/diff-remote.$$
    git diff /tmp/diff-remote.$$ "$1"
    rm /tmp/diff-remote.$$
} 
```

您可以在命令行上键入它，将其保存到文件并获取它，或者直接将其添加到您的`.bashrc`.

只需键入`diff-remote myfile`即可使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:22:23.513

由于`git`别名不能带参数（例如`$1`），因此可能无法直接使用别名来执行此操作。不过，还有其他几种选择：

1.  创建一个脚本`some_script`并设置一个`git`调用该脚本的别名，或者
2.  命名脚本`git-something`，确保它在你的`PATH`，然后你可以将它用作`git something`，或者
3.  只需在`git`.

但是，在这种情况下，我认为您应该能够`git diff origin/master:file master:file`. 这跳过了`rev-parse`一点，因此它不会自动排序要使用哪个远程分支，因此需要更多的精力来了解当前本地分支的上游是什么，但在大多数情况下，这不应该是费力的...

# php - 试图从 SQL 查询的结果中存储会话变量

> ID：13824980
> 
> 赞同：4
> 
> 时间：2012-12-11T17:05:06.147
> 
> 标签：php, mysql, session, session-storage

我已经尝试了从将查询存储为变量和使用 fetch_array 的所有方法，但是当我尝试打印 $_SESSION['permission'] 时，它一直只给我输出“Array”。我不知道该怎么做请帮忙。

```
<?php
session_start(); 
mysql_connect("localhost","",""); 
mysql_select_db("a"); 
if(isset($_SESSION['loggedin']))
{
    header("Location: http://www.mywebsite.com/whatever");
} 
if($_POST['submit'])
{
   $name = mysql_real_escape_string($_POST['username']); 
   $pass = mysql_real_escape_string($_POST['password']); 
   $mysql = mysql_query("SELECT * FROM users WHERE name = '{$name}' AND password = '{$pass}'"); 
   $result = mysql_query("SELECT permission FROM users WHERE name = '{$name}' AND password = '{$pass}'");
   $permission = mysql_fetch_array($result);
   if(mysql_num_rows($mysql) < 1)
   {
     die("Password was incorrect!");
   } 
   $_SESSION['loggedin'] = "YES"; 
   $_SESSION['name'] = $name; 
   $_SESSION['permission'] = $permission;

   header ("Location: http://www.mywebsite.com/whatever"); 
}  
echo "<form type='login.php' method='POST'>
Username: <br>
<input type='text' name='username'><br>
Password: <br>
<input type='password' name='password'><br>
<input type='submit' name='submit' value='Login'>
</form>"; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:15:54.460

刚刚编辑了代码的 POST 部分。请记住，您必须获取结果并使用关联数组来获取特定列的值：

```
if($_POST['submit'])
{
   $name = mysql_real_escape_string($_POST['username']); 
   $pass = mysql_real_escape_string($_POST['password']); 
   $result = mysql_query("SELECT * FROM users WHERE name = '{$name}' AND password = {$pass}'");

   if(!$row = mysql_fetch_array($result))
   {
      die("Password was incorrect!");
   }

   $_SESSION['loggedin'] = "YES"; 
   $_SESSION['name'] = $name; 
   $_SESSION['permission'] = $row['permission'];
   header ("Location: "); 
} 
```

无需运行两次查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T19:58:03.237

您正在将行数组分配给`$_SESSION['permission']`变量，因此当您打印它时，您会得到数组。尝试在该数组上使用 print_r ，您将看到其中的内容。示例：`print_r($_SESSION['permission']);` Print 无法打印数组。当您再次看到这种情况时，使用`print_r`或`var_dump`找出发生了什么。

*   [http://php.net/manual/en/function.var-dump.php](http://php.net/manual/en/function.var-dump.php)
*   [http://php.net/manual/en/function.print-r.php](http://php.net/manual/en/function.print-r.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:07:42.023

您需要使用循环遍历结果集，

```
while($row = mysql_fetch_array($result)) {
//use each row value($row) as per your need
} 
```

所以，我相信，你想要实现这样的目标，

```
if(isset($_POST['submit']))
{
$name = mysql_real_escape_string($_POST['username']); 
$pass = mysql_real_escape_string($_POST['password']); 
$result = mysql_query("SELECT permission FROM users WHERE name = '{$name}' AND password                                 = {$pass}'"); 
$permission = mysql_fetch_array($result);
$mysql = mysql_query("SELECT * FROM users WHERE name = '{$name}' AND password =     '{$pass}'"); 
if(mysql_num_rows($mysql) < 1)
{    
 die("Password was incorrect!");
} 

$_SESSION['loggedin'] = "YES"; 
$_SESSION['name'] = $name; 
$i = 0;
while($row = mysql_fetch_array($result)) {    
$_SESSION['permission' . $i] = $row;
$i++;
}
  header ("Location: "); 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T17:10:41.083

如果`$row`是查询的结果，您需要指定一列，例如`$_SESSION['permission'] = $row[column_name];`

# installation - WIX：防止在卸载过程中删除预先存在的文件

> ID：13824982
> 
> 赞同：3
> 
> 时间：2012-12-11T17:05:11.077
> 
> 标签：installation, wix, uninstallation, wix3.6

我正在编写的 WIX 安装程序需要在系统文件夹中安装几个操作系统文件。我正在为其编写此安装程序的程序是一个旧程序......可能有 10 年了。我不希望它替换用户机器上任何预先存在的操作系统文件。为了解决这个问题，我想我可以使用“NeverOverwrite="yes"

我的问题是在卸载过程中。我希望安装程序只卸载它添加的文件。我不希望它卸载用户已经拥有的任何预先存在的操作系统文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:24:46.070

安装程序不应该删除它没有安装的文件（正如 Natalie 评论的那样），除非你特别告诉它。

也就是说，当我需要将文件直接安装到系统文件夹时，我将它们标记为永久，因此它们永远不会被卸载。通常它是一个 Mircrosoft 控件或一些我没有单独的可再发行安装程序的操作系统文件，但如果我有我也不会卸载。

# pdf - itext 签名 pdf

> ID：13824984
> 
> 赞同：3
> 
> 时间：2012-12-11T17:05:12.727
> 
> 标签：pdf, itext, sign, digital-certificate, pdfstamper

我目前正在开发一个使用 iText 创建和签署 PDF 文件的 ERP 应用程序。这个想法是该应用程序可以生成带有账单的 PDF 文件，然后使用 PdfStamper 或任何其他类使用数字签名对其进行签名。这是我的代码：

**创建和编辑账单**

```
File f1 = null;
f1 = new File("myFilePath");
f1.delete();
if ((f1 != null) && (f1.createNewFile()))
{
    //Here I call the procedure that creates the bill
    Document document = new Document();
    PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(f1));
    PdfFormField field = PdfFormField.createSignature(writer);

    PdfSigner pdfSigner = new PdfSigner();
    pdfSigner.setFileIn(f1.getAbsolutePath());
    pdfSigner.setFileKey("myKeyPath.pfx");
    pdfSigner.setFileKeyPassword("myPassword");
    pdfSigner.setFileOut("myOutputPath");

    if (pdfGenerator.factura(writer, pdfSigner, document))
    {   
        //Here I show the File to the user
    }
}
else
{
    //Here I show an error
} 
```

**程序“事实”**

```
public boolean factura (PdfWriter writer, PdfSigner signer, Document document) throws NullPointerException
{
    try
    {
        //Here I set a PdfPageEvent before attaching it to the PdfWriter
        writer.setPageEvent(myPdfPageEvent);
        document.open();
        //Here I manipulate the Document to generate the bill
        signer.signPdf();
        document.close();
        return true;
    }
    //catch 4 or 5 different types of exceptions and return false if needed
} 
```

**类 PdfSigner**

```
public class PdfSigner
{

private String fileKey = null;
private String fileKeyPassword = null;
private String fileIn = null;
private String fileOut = null;

public PdfSigner() {}

public boolean signPdf() throws IOException, DocumentException, Exception
{

    if (fileKey == null || fileKeyPassword == null || fileIn == null || fileOut == null) return false;

    try
    {
        KeyStore ks = KeyStore.getInstance("pkcs12");
        ks.load(new FileInputStream(fileKey), fileKeyPassword.toCharArray());
        String alias = (String) ks.aliases().nextElement();
        PrivateKey key = (PrivateKey) ks.getKey(alias, fileKeyPassword.toCharArray());
        Certificate[] chain = ks.getCertificateChain(alias);
        //BOOOOOM!
        PdfReader pdfReader = new PdfReader((new File(fileIn)).getAbsolutePath());
        FileOutputStream outputFile = new FileOutputStream(fileOut);
        PdfStamper pdfStamper = PdfStamper.createSignature(pdfReader, outputFile, '?');
        PdfSignatureAppearance sap = pdfStamper.getSignatureAppearance();
        sap.setCrypto(key, chain, null, PdfSignatureAppearance.SELF_SIGNED);
        sap.setVisibleSignature(new Rectangle(10, 10, 50, 30), 1, "sign_rbl");
        pdfStamper.close();
        return true;
    }
    catch (Exception key)
    {
        throw new Exception(key);
    }
}

//getters and setters

} 
```

好吧，这是错误的，但我不知道它在哪里失败。如果我尝试运行它，它通常会在设置 PdfReader 之前在我用“BOOOOM！”标记的行中抛出异常。但是，如果我尝试在程序“factura”之外对其进行签名，则在关闭文档后，当我关闭 PdfStamper 时，通常几乎在最后一行抛出异常。在这两种情况下，原因总是相同的：“找不到 PDF 标头签名”。

有人知道发生了什么吗？我 99% 确定我给程序的路径是正确的，数字签名和密码也是正确的......

谢谢

PS：我发誓我已尝试在此页面中的多个答案中找到解决方案，但事实证明它们对我没有任何用处

# windows - win-bash 中预期的二元运算符

> ID：13824989
> 
> 赞同：2
> 
> 时间：2012-12-11T17:05:24.040
> 
> 标签：windows, macos, bash

我正在尝试通过在 Windows 端使用[win-bash](http://win-bash.sourceforge.net/)来编写一个在 Mac 和 Windows 上运行的 bash 脚本，因为它不必安装。但是，Mac 和 Windows 似乎对语法有不同的看法。

例如，到目前为止，我有以下脚本：

```
echo "Setup..."
shopt -s expand_aliases #make sure aliases work
if [ "$(uname)" == "Darwin" ]; then
    alias p4cli=./bin/p4
else
    alias p4cli=p4  
fi

echo "Checking login status..."
p4cli groups > .trash
if [ $? -ne 0 ]; then
    p4cli login
fi
echo "Done!" 
```

这失败了：

```
[: ==: binary operator expected 
```

在 Windows（win-bash）上，但在 Mac 上工作得很好（我将假设它是更正确的......因为它实际上是 Unix）。

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:37:19.173

尝试 single`=`而不是 double `==`：

```
if [ "$(uname)" = "Darwin" ]; then 
```

它们都表示测试中的字符串相等性检查，但是用于比较的单个等号是 POSIX 兼容的，而双等号不是 - 它仅适用于当前的 bash / ksh 作为语法糖以提高可读性（将失败旧壳也是如此）。

# c++ - 顺序独立散列

> ID：13824992
> 
> 赞同：3
> 
> 时间：2012-12-11T17:05:43.167
> 
> 标签：c++, hash, crypto++

我正在为键值数据创建键，方法是获取几条 (<10) 标识数据的信息并从它们组合中生成一个哈希。为此，我一直在使用 CryptoPP 的`SHA256::Update`功能，它可以让您一次添加片段：

```
#include "sha.h"
...
byte outputBuf[CryptoPP::SHA256::DIGESTSIZE];
CryptoPP::SHA256 hash;
hash.Update(pData1, lenData1); // pData* can point to int, double or std::string
hash.Update(pData2, lenData2);
...
hash.Final(outputBuf); 
```

我注意到调用的顺序很`Update`重要（即，如果您更改两个`Update`语句的顺序，您将得到不同的哈希）。我希望这与订单无关。所以：

*   CryptoPP 是否提供了一种方法来做到这一点？
*   如果没有，你能建议一种替代方法吗？到目前为止，我认为使用`xor`组合参数会起作用。一个问题是，如果两条数据相同，它们就会相互抵消。你能预见到这方面的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-07T14:24:36.743

`{1, 2}`如果您考虑和`{2, 1}`是*不同的*输入，则评论说 xor 会增加碰撞次数是正确的。我想，你不需要，否则你不会想要一个与顺序无关的哈希。`h({1, 2}) = h({2, 1})`当您提供*相同的输入*时，也不会发生冲突。

最简单的解决方案是排序，而不是使用您最喜欢的哈希函数。它与您的哈希函数一样*安全*（如果您愿意，请在 crypto.stackexchange.com 上确认）。

异或哈希绝对是一个坏主意，因为两个相等的元素抵消了。添加它们要好得多，但是对于两个相等的元素，最低有效位将为零（对于四个这样的元素，两位将为零，等等）。这可能是可以接受的。

请注意，任何此类方法都非常不安全，因为它可以更快地发现冲突（根据要求提供证明）。您可能需要也可能不需要安全性，但不要试图发明一种安全的方法，因为这实际上是不可能的（每个众所周知的散列函数背后都有许多人工月的分析）。

# python - virtualenv 中的 py2app：“NoneType”对象没有属性“__getitem__”

> ID：13824993
> 
> 赞同：0
> 
> 时间：2012-12-11T17:05:46.723
> 
> 标签：python, build, py2app

我正在尝试使用虚拟 python 环境使用 py2app 构建应用程序。我有 python 2.7.3。我可以使用 python 2.6（我有 py2app）很好地构建应用程序，但不能使用我的 2.7.3 virtualenv（因为我无法在我的 2.7.3 系统范围安装中安装 py2app）。

这是我得到的错误：

```
running py2app
creating /Users/student/Desktop/Coding Projects/MCManager/build/bdist.macosx-10.6-intel/python2.7-standalone/app
creating /Users/student/Desktop/Coding Projects/MCManager/build/bdist.macosx-10.6-intel/python2.7-standalone/app/collect
creating /Users/student/Desktop/Coding Projects/MCManager/build/bdist.macosx-10.6-intel/python2.7-standalone/app/temp
creating build/bdist.macosx-10.6-intel/python2.7-standalone/app/lib-dynload
creating build/bdist.macosx-10.6-intel/python2.7-standalone/app/Frameworks
Traceback (most recent call last):
  File "AppSpec.py", line 21, in <module>
    app = ['ScriptUnix.py']
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/Users/student/Desktop/VE/MyVirtEnv/lib/python2.7/site-packages/py2app/build_app.py", line 520, in run
    self._run()
  File "/Users/student/Desktop/VE/MyVirtEnv/lib/python2.7/site-packages/py2app/build_app.py", line 708, in _run
    self.run_normal()
  File "/Users/student/Desktop/VE/MyVirtEnv/lib/python2.7/site-packages/py2app/build_app.py", line 779, in run_normal
    mf = self.get_modulefinder()
  File "/Users/student/Desktop/VE/MyVirtEnv/lib/python2.7/site-packages/py2app/build_app.py", line 658, in get_modulefinder
    debug=debug,
  File "/Users/student/Desktop/VE/MyVirtEnv/lib/python2.7/site-packages/modulegraph/find_modules.py", line 271, in find_modules
    find_needed_modules(mf, scripts, includes, packages)
  File "/Users/student/Desktop/VE/MyVirtEnv/lib/python2.7/site-packages/modulegraph/find_modules.py", line 196, in find_needed_modules
    path = m.packagepath[0]
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

我在 py2app 安装文件的目录中，使用`~/Desktop/VE/MyVirtEnv/bin/python AppSpec.py py2app`. 如果我用 运行相同的东西`python26 AppSpec.py py2app`，它工作正常。

# paypal - 拥有多个贝宝供应商的平台

> ID：13824999
> 
> 赞同：0
> 
> 时间：2012-12-11T17:06:01.730
> 
> 标签：paypal

我正在为希望合并贝宝的客户建立一个 Elance 风格的网站，以便工作海报可以支付工作获胜者。

每个工作获胜者是否需要去 Paypal，获取为他们创建“Pay with Paypal”按钮的独特 Paypal HTML，然后在我们的平台上输入？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:16:29.357

有多种方法可以做到这一点。

[您可以使用Button Manager API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ButtonMgrAPIIntro)为人们生成按钮。

您还可以将[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)与[Permissions API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_PermissionsAbout)一起使用，这样您就可以拥有一个适用于所有相关人员的单一结账系统。

您可以根据需要以多种不同方式使用[自适应付款。](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro)

确实需要更多关于您的总体目标是提供更好推荐的详细信息，但是，是的，这些将是比让工作获胜者创建自己的按钮更好的选择。