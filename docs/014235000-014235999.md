# StackOverflow 问答 14235000-14235999

# java - Hibernate 原生 SQL 查询

> ID：14235003
> 
> 赞同：0
> 
> 时间：2013-01-09T12:15:46.017
> 
> 标签：java, spring, hibernate

我有这样的 Native SQL 语句：

SQL查询：

```
select Name ,Id,COUNT(ID) from Employee; 
```

员工 HBM 文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="edu.model.Master" table="test_prefixmaster">
        <id name="empcode" column="EMPCODE" length="10" ></id>

        <property name="empname">
            <column name="NAME" length="30" />
        </property>
    </class>
    <sql-query name="SQLQuery" callable="true">
    <return alias="emp" class="edu.model.Employee">
        <return-property name="empid" column="EMPID" />
        <return-property name="empname" column="EMPNAME" />
        </return>
        </sql-query>
</hibernate-mapping> 
```

在 MyTest 类中：

```
 Query query = session.getNamedQuery("SQLQuery");
    List emp=new ArrayList();
    for (int i = 0; i < emp.size(); i++) {                  
    Employee emp = (Employee) emp.get(i);
    System.out.println("Employee Id:::" + emp.getEmpId());
   System.out.println("Employee Name:::" + emp.getEmpname());
//I want to get here System.out.println("Employee Count");
} 
```

如何在循环中映射和打印员工人数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:21:32.443

```
 Query query = session.getNamedQuery("SQLQuery");
    List empList=new ArrayList();
    for (int i = 0; i < empList.size(); i++) {                  
    Employee emp = (Employee) empList.get(i);
    System.out.println("Employee Code:::" + emp.getEmpcode());
   System.out.println("Employee Name:::" + emp.getEmpname());

//I want to get here System.out.println("Employee Count");
   System.out.println("Employee Count:::" + empList.size());
} 
```

对于不同的员工

更改您的查询

```
select Name ,distinct (Id) from Employee ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T09:44:35.600

您选择的最佳答案正确地符合您的目的。但是，如果您想要查询中的 ID 计数，则需要在实体类中添加另一个属性作为 empIdCount 并将计数值映射到它。这将满足您的目的。您可以直接获取 EmpIds 的计数。

# c++ - 返回指向引用的指针

> ID：14235007
> 
> 赞同：2
> 
> 时间：2013-01-09T12:16:08.203
> 
> 标签：c++, pointers, reference

当我在函数中返回指向引用类型的指针时，出现编译器错误`initial value of reference to non-const must be an lvalue`。功能是这样的

```
Testing& copy(Testing test)
{
    x = test.x;
    return this;
} 
```

但是当我更改为`this`时`*this`，错误消失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:23:17.707

在 C++ 中，`this`特殊变量保存**指向**类实例的指针。

您正在创建一个函数，该函数返回对实例的**引用**，即同一内存位置的另一个名称。

当您使用时，`*this`您正在取消引用`this`指针，到达保存当前实例的真实内存位置并返回一个别名。

它确实有效！如果您需要多态性，请注意[对象切片问题](http://en.wikipedia.org/wiki/Object_slicing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:17:54.753

指针和引用不是一回事。`this`是*指向*当前类实例的指针，而`*this`是作为值的实际实例（更具体地说，当用作返回值时，是左值）。

# c# - 字段初始值设定项不能引用非静态字段、方法或属性？.1

> ID：14235011
> 
> 赞同：0
> 
> 时间：2013-01-09T12:16:29.590
> 
> 标签：c#, xna-4.0

好的，问题是我得到了 2 个代码，一个来自我正在阅读的书，一个我写的同样相同让我们从有效的书中的代码开始

```
public class Game1 : Microsoft.Xna.Framework.Game
{        
         SpriteFont font;
         GraphicsDeviceManager graphics;
         SpriteBatch spriteBatch;
         DateTime nowDateTime = DateTime.Now;
         string nowString = nowDateTime.ToString();
    ` 
```

这没有给出任何错误......现在对于我从书上写下来的代码

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    SpriteFont font;
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    DateTime nowDateTime = DateTime.Now;
    string nowString = nowDateTime.ToString(); 
```

完全一样吧？还是我在这里遗漏了一些重要的东西？我根本不明白，我得到的错误在主题中。

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;
namespace WindowsGame4
{
     /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        SpriteFont font;
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        DateTime nowDateTime = DateTime.Now;
        string nowString = nowDateTime.ToString();

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);
            font = Content.Load<SpriteFont>("Spritefont1");
            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);
            DateTime nowDatetime = DateTime.Now;

            // TODO: Add your drawing code here

            base.Draw(gameTime);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:28:33.890

您可以将初始化代码移动到构造函数中，以使其对实例字段有效：

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    SpriteFont font;
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    DateTime nowDateTime;
    string nowString;

    public Game1()
    {
        nowDateTime = DateTime.Now;
        nowString = nowDateTime.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:22:04.373

```
string nowString = nowDateTime.ToString(); 
```

您正在`nowString`使用非静态方法进行初始化。这将是编译器错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:22:20.680

为了使它起作用，您必须将其声明`nowDateTime`为`static`：

```
static DateTime nowDateTime = DateTime.Now;
string nowString = nowDateTime.ToString(); 
```

# c++ - 错误 LNK1112：模块机器类型“x64”与目标机器类型“X86”冲突

> ID：14235014
> 
> 赞同：1
> 
> 时间：2013-01-09T12:16:37.970
> 
> 标签：c++, visual-studio-2005, 64-bit, linker-errors

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:25:49.433

It seems you are compiling your project for x64 and your project does use a library which target machine is x86\. If you want your project compile for x64 machines, try reconfigure the library for x64 instead of x64\. Otherwise, compile your project for x86.

# asp.net - 正则表达式允许选择范围不起作用

> ID：14235015
> 
> 赞同：0
> 
> 时间：2013-01-09T12:16:40.683
> 
> 标签：asp.net, regex, validation

我将以下正则表达式与 .net 验证器一起使用。

```
^100|150|200|250|300|350|400|450|500|550|600|650|700|750|800|850|900|950|1000$ 
```

目的是允许列表中的 1 个值。

然而，虽然它适用于大多数情况，但输入“1000”会产生错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:19:00.533

您需要限制交替的范围：

```
^(100|150|200|250|300|350|400|450|500|550|600|650|700|750|800|850|900|950|1000)$ 
```

当然，您可以优化您的正则表达式：

```
^([1-9][05]0|1000)$ 
```

# sugarcrm - 如何组合模块中的字段？

> ID：14235017
> 
> 赞同：0
> 
> 时间：2013-01-09T12:16:43.787
> 
> 标签：sugarcrm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:57:19.327

您可以利用 Sugar Logic 或使用这样的技术......

[http://developers.sugarcrm.com/wordpress/2012/03/13/howto-grab-fields-from-a-related-record-without-sugar-logic/](http://developers.sugarcrm.com/wordpress/2012/03/13/howto-grab-fields-from-a-related-record-without-sugar-logic/)

# playframework-2.0 - 如何在会话中获取键的值？

> ID：14235018
> 
> 赞同：1
> 
> 时间：2013-01-09T12:16:49.997
> 
> 标签：playframework-2.0

我正在尝试直接从 Cookie 请求标头中挖掘到我之前通过以下方式存储在 Play 会话中的值

```
Http.Context.current().session().put("my-fancy-key", "some-interesting-value"); 
```

我只能访问 play.mvc.Http.Request ，从中我可以访问 play.mvc.Http.Cookie ...但从那里我绊倒了。

这个片段不起作用......提示？

注意：我完全愿意使用不在 Play 框架中的对象。我看到 Netty 有 cookie r/w 函数，并且正在研究那些……也许是直接在 javax 中的东西？

```
String playSessionCookieName = Configuration.root().getString("session.cookieName", "PLAY_SESSION");

Http.Cookie playSessionCookie = r.cookie(playSessionCookieName);

if (playSessionCookie != null) {
   // FIXME: What to do here to get my value?

   Logger.debug("Found the cookie! Serialized value: " + playSessionCookie.value());
   try {
      ObjectInputStream objIn = new ObjectInputStream(new ByteArrayInputStream(playSessionCookie.value().getBytes()));
      Http.Session session = (Http.Session) objIn.readObject();

      // Here's the goal
      Logger.debug("Found my value: " + session.get("my-fancy-key"));

   } catch (Exception e) {
      Logger.warn("Couldn't deserialize the value.", e);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:51:45.240

我不知道为什么你不使用 simple`session(key)`来获取会话值，但是如果你需要从会话 cookie 中获取会话值，你可以使用类似的东西（玩 2.0）。

```
String cookieVal = request().cookies().get("PLAY_SESSION").value();
cookieVal = cookieVal.substring(cookieVal.indexOf("-")+1);
for(String a: cookieVal.split("%00")) {
    String[] k = a.split("%3A");
    // k[0] - session key; k[1] - session value
    Logger.info(k[0] + " = " + k[1]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:49:40.783

Cookie 有一个方法 value()。我不知道它是否符合您的要求，但我会从那里开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T12:53:44.900

如果您有权访问结果，则迭代存储在结果中的会话而不是 cookie 可能更容易：

```
Session resultSession = play.test.Helpers.session(result);

for (Entry<String, String> entry : resultSession.entrySet()) {
    System.out.println("key:" + entry.getKey() + " value:" + entry.getValue());
} 
```

# android - 使用网络提供商进行位置更新

> ID：14235019
> 
> 赞同：0
> 
> 时间：2013-01-09T12:16:58.030
> 
> 标签：android, networking, provider, locationmanager

我的要求是每 90 秒获取一次位置更新。我为此使用网络提供商。

我这样做如下所示：

```
locationManager.requestLocationUpdates(
        LocationManager.NETWORK_PROVIDER, 
        MINIMUM_TIME_BETWEEN_UPDATES, 
        MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
        new MyLocationListener()); 
```

在这里，在这个方法中，我传递`90000`了 as`MINIMUM_TIME_BETWEEN_UPDATES`和`0`as `MINIMUM_DISTANCE_CHANGE_FOR_UPDATES`，所以预期的结果是`onLocationChanged()`应该每秒钟调用一次侦听器方法`90`。

但结果是该`onLocationChanged()`方法首先在几秒钟内被调用`75`，然后在`105`几秒钟内被调用，然后是`75`, `105`, ... 等等。

我的要求是每秒更新*一次* `90`位置，而不是不同的持续时间/周期。如果找不到给定更新的位置，我想获取最后一个已知位置。

请建议我解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:46:13.217

1.  将 MINIMUM_DISTANCE_CHANGE_FOR_UPDATES 的值设置为 500 或其他值，但不为零。

2.  如果您想要您的最后一个已知位置，请使用

`Location loc = LocationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:01:54.353

```
if (mNetworkEnabled) {
    mLocationMgr.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 0, 0,
            locationListenerNetwork);
} 
```

在我的应用程序中，我正在使用这样的位置管理器。在这里看到同样的问题： [Android：requestLocationUpdates 最多每 45 秒更新一次位置](https://stackoverflow.com/questions/9507557/android-requestlocationupdates-updates-location-at-most-every-45-seconds)

# php - preg_replace 上的 PHP E_ERROR：正则表达式代码没有调试信息

> ID：14235022
> 
> 赞同：2
> 
> 时间：2013-01-09T12:17:08.030
> 
> 标签：php, regex

我无法弄清楚为什么在使用调试器运行脚本时会记录 E_ERROR - 因为当脚本正常运行时它不会出现在我的错误日志中，我会假设它是由调试器生成的。这是 E_ERROR：

```
source.php(1594) : regexp code  File /path/to/file(1594) : regexp code has no debug-info. Debugging is not possible.    E_ERROR 
```

这些是第 1593 和 1594 行：

```
$encoded = preg_replace('/([\000-\011\013\014\016-\037\075\077\137\177-\377])/e',
          "'='.sprintf('%02X', ord('\\1'))", $encoded); 
```

感谢您的任何建议 - 我想目前我可以让这个无人看管，但试图确保。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T09:32:07.997

使用 preg_replace_callback()

```
$out = preg_replace_callback(
  '((?P<char>[\000-\011\013\014\016-\037\075\077\137\177-\377]))',
  function ($match) {
    return sprintf('=%02X', ord($match['char']));
  },
  $in
); 
```

# php - 无法在 PHP 目录中看到文件

> ID：14235023
> 
> 赞同：1
> 
> 时间：2013-01-09T12:17:10.880
> 
> 标签：php, wordpress, file-handling

我通过这样的文件处理将文件保存在我的服务器上

```
$my_file = $_SERVER['DOCUMENT_ROOT'].'/wp-content/themes/mythemev2.0/'.$name.'.php';
echo $my_file;
$handle = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file);

fwrite($handle, $res->name); 
```

`$my_file perfectly`显示文件的完整路径。但是当我转到特定目录时，我看不到该文件。可能是什么错误？我还能做些什么来调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:12:47.717

确保在 fwrite() 之后调用 fclose()

# ios - CALayer 内容越界 - iOS

> ID：14235032
> 
> 赞同：9
> 
> 时间：2013-01-09T12:17:49.073
> 
> 标签：ios, transform, calayer, scale

我正在尝试使用`CGAffinetransform`. 变换很好，但是当我将其缩放到更大的尺寸时，它会超出我分配给`AVCaptureVideoPreviewLayer`. 我尝试将`masksToBounds`属性设置为`YES`但没有帮助。

我可以将它包含在它的框架内吗？

**编辑：**
我想要的是我可以为相机预览图层指定一个特定区域，如果我对其应用缩放变换（即预览图层的框架被扩展），指定区域之外的图层部分会被剪裁.

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-09T15:10:18.720

您应该将要缩放的图层放在另一图层内，并改为遮盖该图层（超级图层）。同样的事情也适用于视图。

即您有两个视图/层：`clippingView`scalingView`scalingView`是 clippingView 的子视图，而 clippingView 是实际剪辑到其边界的视图。

```
[clippingView addSubview:scalingView];
clippingView.clipsToBounds = YES; 
```

或使用图层

```
[clippingLayer addSublayer:scalingLayer];
clippingLayer.masksToBounds = YES; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-22T00:32:22.640

我发现你们都是对的，但我想澄清一下。

假设我们通过 AVCaptureVideoPreviewLayer 添加到视图中`[self.view.layer addSublayer:previewLayer]`

1.  [self clipsToBounds] 在你告诉它的主层屏蔽边界之前什么都不做。`[self.view.layer masksToBounds];`

2.  仅仅因为你的视图有一个框架，它的层也有，并不意味着它有边界。如果它没有界限，那么就没有什么可以掩盖的了。所以这样做`self.view.layer.bounds = self.view.frame`;

所以这一切都在一起..请记住，我是在我自己的 UIView 类中完成的，所以我不需要调用 self.view。

```
previewLayer.bounds = self.frame;
self.layer.bounds = self.frame;

self.layer.masksToBounds = YES;
previewLayer.masksToBounds = YES;

[self setBounds:self.frame];
[self clipsToBounds]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:59:05.230

`clipsToBounds`我要添加图层的视图的属性应该设置为`YES`.

# python - 尝试运行 pyexiv2

> ID：14235034
> 
> 赞同：0
> 
> 时间：2013-01-09T12:17:57.680
> 
> 标签：python, pyexiv2

我正在尝试运行一个简单的代码来测试我是否在我的计算机中正确安装了 pyexiv2。我正在使用 python 2.6.6。在 Windows 7 64 位

所以我运行这个简单的代码：

```
import pyexiv2
print pyexiv2.exiv2_version_info 
```

我得到这个错误：

```
Traceback (most recent call last):
File "C:/Users/Usuario/Desktop/pyexiv2/pyexiv2.py", line 1, in <module>
import pyexiv2
File "C:\Users\Usuario\Desktop\pyexiv2\pyexiv2.py", line 3, in <module>
print pyexiv2.version_info
AttributeError: 'module' object has no attribute 'version_info' 
```

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:31:24.407

您也命名了自己的文件`pyexiv2.py`；重命名或删除它，因为它正在被导入而不是已安装的模块。

# google-chrome - 仅在 Chrome 上的 CSS3 转换（翻译）后文本变得模糊

> ID：14235035
> 
> 赞同：3
> 
> 时间：2013-01-09T12:18:00.097
> 
> 标签：google-chrome, css

我对由 jQuery.css 触发的常见转换（翻译）转换有一个奇怪的行为

这是工作演示：

[http://www2.madeinweb.com.br/jobs/adc/](http://www2.madeinweb.com.br/jobs/adc/)

我一直在阅读有关 css3 过渡的一些信息，但无法修复此调整。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:29:20.730

问题在于文章大小。我不知道为什么，但是用 box-sizing 修复溢出可以解决它。

# python - 如何制作通用 PySide 单发插槽

> ID：14235036
> 
> 赞同：2
> 
> 时间：2013-01-09T12:18:00.047
> 
> 标签：python, pyside

我正在尝试编写通用单发插槽包装器。这是我现在拥有的：

```
def single_shot_connect(signal, slot):
  signaled = [False]
  def single_shot_slot(*args, **kwargs):
    if signaled[0]: return
    signaled[0] = True
    signal.disconnect(single_shot_slot)
    slot(*args, **kwargs)

  signal.connect(single_shot_slot)

def foo(): pass

class Bar(QtCore.QObject): sig = QtCore.Signal([int])

bar1 = Bar()
bar1.sig.connect(foo)
bar1.sig.emit(1)  # (1)

bar2 = Bar()
single_shot_connect(bar2.sig, foo)
bar2.sig.emit(1)  # (2) 
```

问题是标记`(2)`的代码不起作用，因为它在正常工作时尝试`foo()`使用一个参数进行调用`(1)`。

我怎样才能`single_shot_connect()`工作？

**编辑：** `single_shot_connect()`可以针对这种特殊情况进行修复，如下所示：

```
def single_shot_connect(signal, slot):
  signaled = [False]
  def single_shot_slot(): # Note absence of *args, **kwargs
    if signaled[0]: return
    signaled[0] = True
    signal.disconnect(single_shot_slot)
    slot() # Note absence of *args, **kwargs

  signal.connect(single_shot_slot) 
```

但这对我来说并不有趣，因为我想要`single_shot_connect()`通用且可用于任何类型的信号和插槽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T05:33:48.420

由于 Qt[保证](http://qt-project.org/doc/qt-4.8/signalsandslots.html#signals)调用的槽的顺序将是`connect`语句的顺序，您可以简单地这样做：

```
def single_shot_connect(signal, slot):
    def disconnect(*args, **kwargs):
        signal.disconnect(slot)
        signal.disconnect(disconnect)
    signal.connect(slot)
    signal.connect(disconnect) 
```

`signal`发出后，`slot`将被调用。它后面跟着一个`disconnect`调用，它删除了`slot`and 本身。因此，它们不会被调用以进行后续发射。

完整使用示例：

```
import sys
from PySide import QtCore

class Foo(QtCore.QObject):
    sig = QtCore.Signal(int)

def bar():
    print 'running bar'

def single_shot_connect(signal, slot):
    def disconnect(*args, **kwargs):
        signal.disconnect(slot)
        signal.disconnect(disconnect)
    signal.connect(slot)
    signal.connect(disconnect)

if __name__ == '__main__':
    app = QtCore.QCoreApplication(sys.argv)

    foo = Foo()
    single_shot_connect(foo.sig, bar)

    foo.sig.emit(1)
    foo.sig.emit(2)

    QtCore.QTimer.singleShot(1000, app.exit)

    sys.exit(app.exec_()) 
```

# python - django中的管理员问题

> ID：14235041
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:18:24.697
> 
> 标签：python, django, django-admin, mezzanine, cartridge

我正在使用夹层和墨盒制作购物车。

在我的订单模型中，有一个名为 status 的字段，可以选择未处理和已处理。下订单后，管理员可以更改其状态。每当管理员更新状态时，我想向用户发送电子邮件。

我已经对其进行了一些研发，但我没有找到任何可以告诉我如何发送关于状态更改的电子邮件的信息。

**我的模型：**

```
class Order(models.Model):
    ...
    ....
    ........
    status = models.IntegerField(_("Status"),
                            choices=settings.SHOP_ORDER_STATUS_CHOICES,
                            default=settings.SHOP_ORDER_STATUS_CHOICES[0][0])

    objects = managers.OrderManager()

    # These are fields that are stored in the session. They're copied to
    # the order in setup() and removed from the session in complete().
    session_fields = ("shipping_type", "shipping_total", "discount_total")

    class Meta:
        verbose_name = _("Order")
        verbose_name_plural = _("Orders")
        ordering = ("-id",)

    def __unicode__(self):
        return "#%s %s %s" % (self.id, self.billing_name(), self.time)

    def billing_name(self):
        return "%s %s" % (self.billing_detail_first_name,
                          self.billing_detail_last_name)

    def setup(self, request):

        self.key = request.session.session_key
        self.user_id = request.user.id
        for field in self.session_fields:
            if field in request.session:
                setattr(self, field, request.session[field])
        self.total = self.item_total = request.cart.total_price()
        if self.shipping_total is not None:
            self.shipping_total = Decimal(str(self.shipping_total))
            self.total += self.shipping_total
        if self.discount_total is not None:
            self.total -= self.discount_total
        self.save()  # We need an ID before we can add related items.
        for item in request.cart:
            product_fields = [f.name for f in SelectedProduct._meta.fields]
            item = dict([(f, getattr(item, f)) for f in product_fields])
            self.items.create(**item)

    def complete(self, request):

        self.save()  # Save the transaction ID.
        for field in self.session_fields:
            if field in request.session:
                del request.session[field]
        del request.session["order"]
        for item in request.cart:
            try:
                variation = ProductVariation.objects.get(sku=item.sku)
            except ProductVariation.DoesNotExist:
                pass
            else:
                variation.update_stock(item.quantity * -1)
                variation.product.actions.purchased()
        code = request.session.get('discount_code')
        if code:
            DiscountCode.objects.active().filter(code=code).update(
                uses_remaining=F('uses_remaining') - 1)
        request.cart.delete()

    def details_as_dict(self):

        context = {}
        for fieldset in ("billing_detail", "shipping_detail"):
            fields = [(f.verbose_name, getattr(self, f.name)) for f in
                self._meta.fields if f.name.startswith(fieldset)]
            context["order_%s_fields" % fieldset] = fields
        return context 
```

**行政：**

```
class OrderAdmin(admin.ModelAdmin):
    ordering = ("status", "-id")
    list_display = ("id", "billing_name", "total", "time", "status",
                    "transaction_id", "invoice")
    list_editable = ("status",)
    list_filter = ("status", "time")
    list_display_links = ("id", "billing_name",)
    search_fields = (["id", "status", "transaction_id"] +
                     billing_fields + shipping_fields)
    date_hierarchy = "time"
    radio_fields = {"status": admin.HORIZONTAL}
    inlines = (OrderItemInline,)
    formfield_overrides = {MoneyField: {"widget": MoneyWidget}}
    fieldsets = (
        (_("Billing details"), {"fields": (tuple(billing_fields),)}),
        (_("Shipping details"), {"fields": (tuple(shipping_fields),)}),
        (None, {"fields": ("additional_instructions", ("shipping_total",
            "shipping_type"), ("discount_total", "discount_code"),
            "item_total", ("total", "status"), "transaction_id")}),
    )
admin.site.register(Order, OrderAdmin) 
```

谁能告诉我如何发送这封电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:30:55.347

您需要在模型的[`post_save`信号](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)上添加一个侦听器。您的侦听器（这是一种标准的 Python 方法）将检查哪些字段已更改，然后将电子邮件发送给用户。

# apache - Apache mod_rewrite ~userdir 到子域

> ID：14235057
> 
> 赞同：2
> 
> 时间：2013-01-09T12:19:03.340
> 
> 标签：apache, mod-rewrite, subdomain

我找不到如何重定向

`(optional: www.)domain.pl/~userdir/(optional)page.html`至

`www.userdir.domain.pl/(optional)page.html`

在 Apache .htaccess 中。

例子：

```
domain.pl/~userdir -> www.userdir.domain.pl/
domain.pl/~userdir/page.html -> www.userdir.domain.pl/page.html
www.domain.pl/~userdir -> www.userdir.domain.pl/
www.domain.pl/~userdir/page.html -> www.userdir.domain.pl/page.html 
```

有人会告诉我该怎么做吗？

# javascript - HTML 中的“软链接”元素

> ID：14235061
> 
> 赞同：1
> 
> 时间：2013-01-09T12:19:18.610
> 
> 标签：javascript, html, dom, web

假设有一个给定的 HTML 子树，它在我的代码中的多个点上重复：

```
<div class='content'>
    ...
    <p>This is repeated many times</p>
    ....
    <p>This is repeated many times</p>
    ...
    <p>This is repeated many times</p>
</div> 
```

有没有办法为第一个创建一种“软链接”，`<p>`以便每次重复都可以指向它？或者对于这类问题有更好的选择？

# 更新

看来我的问题还不清楚，所以我将尝试通过举一个想象的解决方案的例子来澄清它。假设 HTML 提供了一个`<alias>`，它的作用类似于指向另一个元素的指针。因此，我可以做这样的事情，而不是一遍又一遍地重复相同的元素：

```
<div class='content'>
    ...
    <p id='repeat'>This is repeated many times</p>
    ....
    <alias from='repeat'/>
    ...
    <alias from='repeat'/>
</div> 
```

并且 HTML 将以相同的方式呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:22:09.880

试试这个：

```
<div class='content'>
    ...
    <p id='firstP'>This is repeated many times</p>
    ...
    <p>This is repeated many times</p>
    ...
    <p>This is repeated many times</p>
</div>
<a href='#firstP'>Link to the first &lt;p&gt; tag.</a> 
```

**[例子](http://fiddle.jshell.net/H32Wz/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:22:38.317

`<alias>`因此，正如@Cerbrus 和@bfavaretto 所评论的那样，不幸的是，答案是否定的，如果不求助于 JavaScript ，就无法使用诸如 an 之类的东西。由于搜索引擎忽略 JavaScript，他们会忽略页面的一部分，这对整个网站来说真的很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T03:56:39.437

如果我理解了这个问题。和其他人一样：不能在 HTML 中做到这一点。因为 HTML 没有别名标签！但我认为这可能与链接“js”和“html events”有关。你必须写一座桥。例如：为您的 tagS 设置 id。并为您的别名标签设置“更改类似事件”！并将桥接js函数写入您的ID。

# regex - 正则表达式从行内容中提取文件名

> ID：14235063
> 
> 赞同：0
> 
> 时间：2013-01-09T12:19:31.907
> 
> 标签：regex

我对正则表达式很陌生。我想提取以下字符串“109_Admin_RegistrationResponse_20130103.txt”

从此文件内容中，每行选择内容：
01-10-13 10:44AM 47 107_Admin_RegistrationDetail_20130111.txt
01-10-13 10:40AM 11 107_Admin_RegistrationResponse_20130111.txt

正则表达式不应该选择第二行，只有第一行应该返回 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:21:58.983

你的正则表达式有很多不同的错误......

1.  您的行没有以您所需的文件名开头，但您放在`^`那里
2.  `+`在您的字符组中丢失`[a-zA-Z]`，因此只能匹配单个字符
3.  不包含`_`在您的角色组中，因此不匹配`Admin_RegistrationResponse`
4.  丢失`\`并且`d{2}`只会匹配`dd`。
5.  根据 M42 的回答（我忽略了），您还需要转义点`.`，否则它也会匹配`123_abc_12345678atxt`（注意`a`之前的`txt`）

你的正则表达式应该是

`\d+_[a-zA-Z_]+_\d{4}\d{2}\d{2}\.txt$`

可以简化为

`\d+_[a-zA-Z_]+_\d{8}\.txt$`

看起来`\d{2}\d{2}`真的是多余的——除非你想捕获组，否则你会这样做：

`\d+_[a-zA-Z_]+_(\d{4})(\d{2})(\d{2})\.txt$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:24:50.573

Remove the anchors and escape the dot:

```
\d+[a-zA-Z_]+\d{8}\.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:27:05.390

我是 php 的新手，但我认为您可以使用`explode()`php 中的函数或您的语言中的任何等效函数。

```
$string = "01-09-13 10:17AM 11 109_Admin_RegistrationResponse_20130103.txt";
$pieces = explode("_", $string);

$stringout = "";
foreach($i = 0;$i<count($pieces);i++){
 $stringout = $stringout.$pieces[$i];
} 
```

# android - Android：如何从一组图像制作视频

> ID：14235070
> 
> 赞同：1
> 
> 时间：2013-01-09T12:20:03.553
> 
> 标签：android, video, android-camera

我正在android中创建一个应用程序。在这个应用程序中，我必须从存储在设备 SD 卡中的图像创建一个视频文件（mp4、3gp）。在android中是否有任何解决方案，或者我们必须为此使用任何其他api。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:00:15.237

Android 不提供任何允许从单帧创建视频文件的内置 API。考虑改用 Sony Vegas 或 Adob​​e After Effects。

但是，您可以模拟视频效果`ImageView`（确实不是一个可行的解决方案，但在一些简单的情况下会这样做）。为此，您需要创建一个包含帧的数组，并使用 a`CountDownTimer`或类似方法循环遍历该数组。将下一帧设置`ImageView`为 40 毫秒的滴答速率将对应于 25 FPS 的帧速率。[您还可以使用MediaPlayer](https://developer.android.com/reference/android/media/MediaPlayer)或[SoundPool](https://developer.android.com/reference/android/media/SoundPool)提供背景声音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T05:06:10.953

您可以使用[MJPEGgenerator.java](https://code.google.com/p/javadrone/source/browse/src/com/codeminders/ardrone/util/MJPEGGenerator.java)从一组 jpg 图像创建 AVI

# linux - 我们如何在 Fedora 3 上将旧的 GCC 3.4 升级到 GCC 4.1？

> ID：14235073
> 
> 赞同：0
> 
> 时间：2013-01-09T12:20:17.660
> 
> 标签：linux, gcc, atomic, built-in, operation

如何在 Fedora 3（版本为 2.6.10）上将旧的 GCC 从 3.4 版本升级到 4.1（即从 GCC 3.4 到 GCC 4.1 或更高版本）？

更多信息：我们正在开发一个将在 Fedora 3 上运行的应用程序，但该应用程序需要一些原子内置函数`__sync_val_compare_and_swap`,`__sync_fetch_and_add`等，这些仅在 GCC 4.1 或更高版本上可用。所以我认为我们可以在 Fedora 3 上定义它们或将 gcc 升级到新的，但现在我们都不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:35:03.797

如果您仍想坚持使用 GCC 3.4，您可以使用其他提供相同原语的库。例如[atomic_ops](http://www.hpl.hp.com/research/linux/atomic_ops/) ( [atomic_ops @ github](https://github.com/ivmai/libatomic_ops) )

# android - 动态更改 Webview 高度

> ID：14235074
> 
> 赞同：0
> 
> 时间：2013-01-09T12:20:20.977
> 
> 标签：android, webview

我正在尝试动态更改 webview 高度，这是我的代码，

```
 WebView answerHtml = new WebView(this);
            answerHtml.setId(i);
            answerHtml.setOnTouchListener(AnswerListener);
            answerHtml.setBackgroundColor(0);
            answerHtml.setBackgroundResource(R.drawable.ans_back);
            answerHtml.getSettings().setJavaScriptEnabled(true);
            answerHtml.loadDataWithBaseURL(null, a.getText(), "text/html",
                    "utf-8", null);
            ansCellLayout.setTag(OPTION_LAYOUT_TAG);
            ansCellLayout.addView(answerHtml); 
```

这是在，`for loop`但高度只有这么大

* * *

* * *

我希望它有更高的高度我尝试设置最小高度，缩放但不工作请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:22:53.540

在将 WebView 添加到布局时尝试此代码。

```
ansCellLayout.addView(answerHtml, new LinearLayout.LayoutParams(100, 100)); 
```

希望`ansCellLayout`就是这样`LinearLayout`，WebView 将以 100 宽度和 100 高度创建。

# postgresql - 如何从父表中删除列并将其传播到所有子表

> ID：14235076
> 
> 赞同：2
> 
> 时间：2013-01-09T12:20:37.630
> 
> 标签：postgresql

有人可以帮我弄这个吗？我有一组从单个父表继承的表（现在所有这些表都包含数据）。

我需要从父表中删除特定列，并且应该自动删除所有继承表中的同一列。这可能吗？

当我尝试这个时，只删除了父表列。我也在alter表中尝试了级联选项，但没有结果。

我正在使用 postgreSql 8.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-10T14:50:48.723

我刚刚在 Postgres 9.3 中遇到了同样的问题。该问题似乎仅在以下情况下存在：

1)

```
create table parent_table(a int);
create table child_table(a int) inherits (parent_table); 
```

2)

```
create table parent_table(a int);
create table child_table(a int);
alter table child_table INHERIT parent_table; 
```

场景 2) 比 1) 更有可能，因为在 1) 中，您可以改为：

```
create table parent_table(a int);
create table child_table() inherits (parent_table); 
```

并在两个表中获得相同的列。

然而，在场景 2) 中，child_table 必须具有 parent_table 的所有列及其约束。根据 Postgres[文档](http://www.postgresql.org/docs/9.1/static/sql-altertable.html)：

> 继承父表
> 
> 此表单将目标表添加为指定父表的新子表。随后，针对父表的查询将包括目标表的记录。要作为子表添加，目标表必须已经包含与父表相同的所有列（它也可以有其他列）。这些列必须具有匹配的数据类型，并且如果它们在父级中具有 NOT NULL 约束，那么它们在子级中也必须具有 NOT NULL 约束。
> 
> 对于父级的所有 CHECK 约束，还必须有匹配的子表约束。目前不考虑 UNIQUE、PRIMARY KEY 和 FOREIGN KEY 约束，但将来可能会改变。

这样做的结果是，如果您在事后向表添加了继承，然后在父表中删除了一个列，那么即使您使用 DROP CASCADE，该列也不会从子表中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-30T11:19:01.813

当我们通过循环遍历所有继承表来添加列时，然后从主表中删除列并不会从每个继承表中删除，它会从每个继承表中删除，只有当我们通过将列添加到主表来添加列时。也没有'CASCADE; 是必须的。（用 PostgreSQl 检查）

```
ALTER TABLE 'Table_Name' ADD COLUMN IF NOT EXISTS 'Col_Name' 'type'
ALTER TABLE 'Table_Name' DROP COLUMN IF EXISTS 'Col_Name' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:52:35.547

当一列被删除到父表中时，它也应该被删除到继承的表中。[手册](http://www.postgresql.org/docs/8.3/static/ddl-inherit.html)说：

> ALTER TABLE 将传播列数据定义中的任何更改并检查继承层次结构中的约束。同样，只有在使用 CASCADE 选项时才能删除父表上的列或约束。ALTER TABLE 遵循与 CREATE TABLE 期间应用的重复列合并和拒绝相同的规则。

尝试这个：

```
create table parent_table(a int, b int);
create table child_table(c int) inherits (parent_table); 
```

结果：

```
# \d child_table
  表“public.child_table”
 专栏 | 类型 | 修饰符
--------+----------+------------
 一个 | 整数 |
 乙 | 整数 |
 c | 整数 |
继承：父表

```

现在让我们在中删除一列`parent_table`：

```
alter table parent_table drop column a cascade; 
```

结果：

```
\d 子表
  表“public.child_table”
 专栏 | 类型 | 修饰符
--------+----------+------------
 乙 | 整数 |
 c | 整数 |
继承：父表

```

DROP COLUMN 已按预期传播到子表。

如果您的表定义得到不同的结果，您应该在问题以及 drop SQL 语句中包含这些定义。

# excel - Excel VBA尝试将单元格值设置为另一个单元格的日期

> ID：14235077
> 
> 赞同：0
> 
> 时间：2013-01-09T12:20:39.667
> 
> 标签：excel, vba, date-format

我有一个电子表格，要求我们的组织每周为员工提交疾病信息。电子表格一年中的每一周都有一个选项卡，我已经有一个宏可以将员工详细信息从一周复制到下一周。

我正在尝试在下面的代码中构建，它会挑选仍在休病假的员工，并将病假的开始日期复制到下一周。该代码通过在循环中选取一个员工编号作为字符串来工作，然后为开始日期创建一个对象。

由于模板上的布局和其他信息，我不能简单地从一周到下一周复制和粘贴整张工作表。

**已修订** 下面的修订代码现在将第一个`SicknessStart`日期复制到`NextWeek`. 但是，它仅适用于第一个日期，并且由于某种原因不会从后续行中复制信息。日期格式也在以美国格式复制，但我正在调查。

```
Sub CopyDate

 Dim I As Integer, CopyDate As Boolean
 I = 6
 CopyDate = False

 'Use the Employee Number column (C) to perform the check on the sickness dates
 Do While CurrentWeek.Cells(I, 3) <> ""

'Check if there is a sickness start date in column R
If CurrentWeek.Cells(I, 18) <> "" Then
'Check if they have entered 'Still Away' or left the cell blank in column S
    If CurrentWeek.Cells(I, 19) = "Still Away" Or CurrentWeek.Cells(I, 19) = "" Then

        Dim EmployeeNumber As String
        Dim SicknessStart As String
            EmployeeNumber = Cells(I, 3)
            SicknessStart = Cells(I, 18)

        NextWeek.Select

'Find the employee number string on the following week's tab and enter sickness start date   
        Columns(3).Find(What:=EmployeeNumber, LookIn:=xlValues, LookAt:= _
        xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False _
        , SearchFormat:=False).Offset(0, 15) = SicknessStart

End If
End If

I = I + 1
Loop
CopySickness = True
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:51:46.117

您没有显示`CurrentWeek`或如何`NextWeek`声明或设置。我假设它们是在其他地方设置的全局`worksheet`变量（顺便说一句，它们应该是传递给 this 的参数`sub`）。

* * *

然后用一个或另一个限定*所有* `cell`引用。

```
 EmployeeNumber = CurrentWeek.Cells(I, 3)
        SicknessStart = CurrentWeek.Cells(I, 18) 
```

* * *

这条线是你的问题的原因（删除它）
为什么？因为第二次通过不合格`EmployeeNumber = Cells(I, 3)`等参考表`NextWeek`

```
NextWeek.Select 
```

* * *

`Find`使用`Range`变量设置员工编号

```
Dim rStartDate as Range

' replace your Columns(3).Find(... code with this
Set rStartDate = NextWeek.Columns(3).Find( _
  What:=EmployeeNumber, _
  LookIn:=xlValues, _
  LookAt:=xlWhole, _
  SearchOrder:=xlByRows, _
  SearchDirection:=xlNext, _
  MatchCase:=False, _
  SearchFormat:=False)
If Not rStartDate Is Nothing Then
    rStartDate.Offset(0, 15) = SicknessStart
Else
    ' EmployeeNumber is not found in NextWeek.Column(3)
End If 
```

# jquery - 使用基于百分比的图像垂直居中 div

> ID：14235080
> 
> 赞同：0
> 
> 时间：2013-01-09T12:20:43.560
> 
> 标签：jquery, css, html, percentage, centering

我目前正在编写我的新网络作品集。到目前为止，一切都很好。我决定让它完全基于 %，我正在努力解决最后一个细节：

我必须在也是基于 % 的 div 框中垂直居中基于 % 的图像。

这是小提琴：http: [//jsfiddle.net/PX4tF/4/](http://jsfiddle.net/PX4tF/4/)

这是不像我想要的那样工作的代码：

```
$(document).ready(function(){

         $(window).resize(function(){

          $('.vertical_center').css({
           position:'relative',
           left: ($(window).width() 
             - $('.vertical_center').outerWidth())/2,
           top: ($(window).height() 
             - $('.vertical_center').outerHeight())/2
          });

         });

         // To initially run the function:
         $(window).resize();

        }); 
```

我当前使用的脚本只有在我调整窗口大小时才开始正常工作。在此之前，它会使图像居中但不正确。此外，我有多个 div 框，例如页面上的那个，目前我必须复制脚本以在浏览器调整大小后正确居中。有没有办法让这更容易？

这是测试版网站的链接：[http ://www.zeiteffekt.de/relaunch](http://www.zeiteffekt.de/relaunch)

我不是那种编程的人，所以我希望你们能帮助我。

干杯，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:32:55.590

尝试这样的事情

```
function alignImage()
{
    $('.vertical_center').css({
        position:'relative',
        left: ($(window).width() - $('.vertical_center').outerWidth())/2,
        top: ($(window).height() - $('.vertical_center').outerHeight())/2
    });
}
$(window).load(function() {
    alignImage();
});
$(window).resize(function() {
    alignImage();
}); 
```

调用 $(document).ready 时，图像还没有准备好。改用负载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:59:20.793

尝试这个：

```
 $(window).resize(function(){
        $( ".img-swap").each(function() {
            $(this).css({
               position:'relative',
               marginTop: ($(this).parent().outerHeight() 
                - ($(this).outerHeight()+15))/2
             });
         });
}); 
```

[jsfiddle](http://jsfiddle.net/vusan/PX4tF/6/)
我替换`marginTop`而不是`top`因为`marginTop`将有助于在仅推送图像时将文本推送到图像下方`top`。

# php - 使用 $data['firstname'] = $this->firstname 时无法将动态数据从控制器传递到视图

> ID：14235082
> 
> 赞同：1
> 
> 时间：2013-01-09T12:20:56.683
> 
> 标签：php, codeigniter, view

我对 CodeIgniter 很陌生。几个小时以来，我一直面临着一个非常恼人的问题。这是代码

```
 <?php
    class Hello extends CI_Controller
    {
     var $firstname;
 var $lastname;

    function _construct()
{
  parent::_construct();
  $this->firstname='Ashutosh';
  $this->lastname='Bajpay';

}

function you()
{ 
  $data['firstname'] = $this->firstname;
  $data['lastname'] = $this->lastname;
  $this->load->view('ashu',$data);
}
   }
   ?> 
```

并且视图文件 ashu.php 是-

```
 Hello, <?php echo $firstname;?> <?php echo $lastname;?>! This is your second     CodeIgniter program. 
```

输出是-

> 您好！这是您的第二个 CodeIgniter 程序。

但是当我写作的时候——

```
 function you()
{ 
  $data['firstname'] = 'Ashutosh';
  $data['lastname'] = 'Bajpay';
  $this->load->view('ashu',$data);
} 
```

然后输出是想要的-

> 您好，Ashutosh Bajpay！这是您的第二个 CodeIgniter 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:24:17.843

change

```
 var $firstname;
     var $lastname; 
```

to

```
 private  $firstname;
    private  $lastname; 
```

# java - 隐藏开源应用程序中使用的 API 密钥

> ID：14235088
> 
> 赞同：4
> 
> 时间：2013-01-09T12:21:10.227
> 
> 标签：java, open-source, obfuscation, api-key

我目前正在开发一个基于 3rd 方 Web API 的桌面应用程序，并且已经注册了他们的程序并获得了两个访问密钥作为回报。

但是，如果将这些键作为字符串粘贴到源代码中，那么任何人都可以拉回 repo 的内容并轻松找到它们。

到目前为止，我如何防止这种情况的最佳想法是将它们单独编译成一个类文件，对其进行混淆，然后使用它，这样它们至少在源代码中不是纯文本。但是有没有更好，更被接受或常用的方式我错过了？我并不追求完全和绝对的安全性，但至少希望在开源环境下尽可能地使提取密钥变得困难。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T12:28:23.450

您可能希望将访问密钥作为一个单独的文件插入到源代码中，这样您就可以避免推送到公共存储库（或者在删除实际密钥的情况下推送，这样想要使用您的应用程序的人就需要插入在他们自己的钥匙）。*这样，除了*您的私钥本身之外，一切都是开源的。

TL;DR：真正避免发布密钥的唯一方法是不要让它们成为公共源代码库的一部分。其他任何东西都意味着它们很容易被其他人提取。

# java - ApacheFOP - 错误“在 java.lang.ClassLoader$1{urls=[], parent=null} 中找不到 org.apache.xerces.jaxp.SAXParserFactoryImpl”

> ID：14235093
> 
> 赞同：0
> 
> 时间：2013-01-09T12:21:18.177
> 
> 标签：java, .net, apache, apache-fop, altova

我正在开发一个项目，该项目使用 Altova Stylevision/Apache FOP 上的 .NET 包装器来使用 WCF Web 服务创建 PDF。

它在 .net 3.5 下工作，但升级到 .net 4，我收到以下错误：

javax.xml.transform.TransformerException：http: [//xml.org/sax/handlers/LexicalHandler](http://xml.org/sax/handlers/LexicalHandler)

Stacktrace：在 org.apache.xalan.transformer.TransformerIdentityImpl.transform(Source source, Result outputTarget) at... 自己的 .net 代码行。

来源：fop-0.93

没有内部异常，所以我尝试打开尽可能多的调试功能。唯一的额外信息在堆栈跟踪中：

"{"在 java.lang.ClassLoader$1{urls=[], parent=null}"} 中找不到 org.apache.xerces.jaxp.SAXParserFactoryImpl

有谁知道问题是什么/如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:38:36.627

看起来有点米老鼠，但我花了几个小时试图让它工作，所以我想我会在这里写一些东西以防它帮助其他人。

对于这个特定的错误，我只是将它放置了几个小时，然后回来并且它起作用了。也许这是一个缓存问题，或者是包装器缓存问题。

不完全确定原因，但现在已解决。

# r - 基于多个分类变量的数据汇总

> ID：14235096
> 
> 赞同：0
> 
> 时间：2013-01-09T12:21:23.537
> 
> 标签：r, summary

我正在尝试根据包含以下列的数据创建摘要：

```
 Trx_Date   Brand   Cust_Num   Item_Qty   Item_Price 
```

我正在尝试根据一年中的每周为不同的品牌（角色对象类）创建 Item_Qty 和 Item_Amt 的摘要。我设法通过以下方式创建 Wk_Num：

```
 Wk_Num <- as.character(strftime(as.POSIXlt(Trx_Date), format="%W")) 
```

我想要做的是获得 Item_Qty 的总和以及每个 Wk_Num+Brand 组合的 Item_Price 的平均值。我设法通过以下方式获得我想要的东西：

```
 tblsum <- summary(Item_Price + Item_Qty ~ Wk_Num + Brand, data=tblorig, FUN = function(x) { c(m = mean(x), s= sum(x))}) 
```

我想要做的是创建另一个列，计算每个特定 Wk_Num+Brand 组合的所有总买家（即渗透率）的买家百分比。我也可以修改上面的代码来计算长度（以获得每个组合的“买家”数量），即

```
 tblsum <- summary(Item_Price + Item_Qty ~ Wk_Num + Brand, data=tblorig, FUN = function(x) { c(m = mean(x), s= sum(x), l=length(x))}) 
```

然而，这也是有缺陷的，因为客户实际上可能在一周内购买了多次，并且他们将被重复计算。

我仍处于**R**之旅的早期阶段，并试图优雅地编写代码。有没有一种好方法可以组合我从第一个代码构建的数据摘要，以及计算每个 Wk_Num+Brand 组合的唯一 Cust_Num 占唯一 Cust_Num 总数的百分比？

代码的任何改进也将不胜感激。

**更新：**

样本数据：

```
 Wk_Num   Brand      Cust_Num   Item_Qty   Item_Price
 11       AAA           001          1          2.1
 11       BBB           001          1          1.4
 11       AAA           002          2          2.1
 12       CCC           003          1          1.5
 12       BBB           001          3          1.4
 12       BBB           001          2          1.4
 12       BBB           004          1          1.5
 12       CCC           004          1          1.5
 13       AAA           002          2          2.2
 13       AAA           001          3          2.1
 13       AAA           003          1          2.2
 13       AAA           004          2          2.1 
```

理想的输出是：

```
 Wk_Num   Brand     Total Item  Avg Item Price   Penetration
 11       AAA             3        2.10              50%         # 2 out of 4
 11       BBB             1        1.40              25%         # 1 out of 4
 12       BBB             6        1.43              50%         # 2 out of 4 (Cust 001 bought twice in that week)
 12       CCC             1        1.50              25%         # 1 out of 4
 13       AAA             8        2.15             100%         # 4 out of 4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:51:15.260

您可以使用包中的`ddply`功能`plyr`：

（假设数据框被调用`dat`。）

```
library(plyr)
ddply(dat, .(Wk_Num, Brand), summarise, 
      Total_Item = sum(Item_Qty), 
      Avg_Item_Price = mean(Item_Price),
      Penetration = length(unique(Cust_Num))/length(unique(dat$Cust_Num))) 
```

结果：

```
 Wk_Num Brand Total_Item Avg_Item_Price Penetration
1     11   AAA          3       2.100000        0.50
2     11   BBB          1       1.400000        0.25
3     12   BBB          6       1.433333        0.50
4     12   CCC          2       1.500000        0.50
5     13   AAA          8       2.150000        1.00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:01:34.700

使用`data.table`：

```
require(data.table)
x.dt <- data.table(dat)
yy <- x.dt[, list(Total_Item = sum(Item_Qty), Avg_Item_Price = mean(Item_Price),
            Penetration = length(unique(Cust_Num))/length(unique(x.dt$Cust_Num))), 
            by="Wk_Num,Brand"] 
```

# ios - ViewController 可以包含多个父（即包含）控制器吗？

> ID：14235099
> 
> 赞同：0
> 
> 时间：2013-01-09T12:21:27.183
> 
> 标签：ios, objective-c, ios5, uiviewcontroller, uinavigationcontroller

标题很清楚地说明了这个问题。但这里有一些上下文可能会使事情更清楚：

我正在开发一个电子邮件客户端[应用程序](https://github.com/abbood/remailPOP3)，该应用程序将 UINavigationController 作为根 VC 附加到主窗口（您可以在 UI 工作原理下查看 UI[层次](http://code.google.com/p/remail-iphone/)*结构*）：

```
 HomeViewController *homeController = [[HomeViewController alloc] initWithNibName:@"HomeView" bundle:nil];
    UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:homeController];
    [self.window addSubview:navController.view]; 
```

稍后它将视图控制器推送到导航控制器，即文件夹视图->邮箱视图->邮件视图等：

```
[self.navigationController pushViewController:someController animated:YES]; 
```

我想在邮件视图上实现[滑动视图控制器效果。](https://github.com/edgecase/ECSlidingViewController)

问题是滑动视图控制器效果是作为[自定义容器视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)实现的。假设您通过启动包含视图控制器（我们称之为它`ECSlidingViewController`）来启动应用程序，它是窗口根视图控制器。然后您将顶部视图控制器（即显示的第一个视图控制器）添加到它：

```
ECSlidingViewController *slidingViewController = (ECSlidingViewController *)self.window.rootViewController;

slidingViewController.topViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"FirstTop"]; 
```

然后附加应该出现在顶视图控制器下的视图控制器（`slidingViewController`在本例中是并且始终是唯一包含的控制器）：

```
- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];

  if (![self.slidingViewController.underLeftViewController isKindOfClass:[MenuViewController class]]) {
    self.slidingViewController.underLeftViewController  = [self.storyboard instantiateViewControllerWithIdentifier:@"Menu"];
  }

  [self.view addGestureRecognizer:self.slidingViewController.panGesture];
  [self.slidingViewController setAnchorRightRevealAmount:280.0f];
} 
```

我想弄清楚的是..鉴于我的邮件视图在技术上是一个子视图控制器`UINavigationController`，它也可以是这个所谓的子视图`ECSlidingViewController`吗？b/c 我希望它包含在由导航控制器作为父/控制的导航控制器中，并且我希望它上下滑动......这意味着它必须*也是*`ECSlidingViewController`.

此外，假设 VC 可以有多个父级.. 在上述示例的上下文中.. 我应该在视图层次结构中的哪个位置添加该父级？我应该将它添加为 UINavigationController 的子项吗？这是否与最佳实践一致（假设有一些）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:47:56.340

**简短的回答**

不..一个视图控制器不能包含多个父控制器..这在 UIView 类参考[insertSubview:aboveSubview](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/insertSubview%3aaboveSubview%3a)的描述中几乎明确提到： `Views can have only one superview. If view already has a superview and that view is not the receiver, this method removes the previous superview before making the receiver its new superview.` 由于每个视图控制器都与一个视图直接关联，因此从上面可以看出视图控制器不能具有多个父控制器。

**长答案**

经过大量研究并使用代码..事实证明我看错了问题..长话短说..自定义容器视图控制器遵循适用于 UINavigation 等预构建容器控制器的相同规则和 UITab .. 并且在任何时候都可以将自定义容器作为另一个控制器的子级包含在内，反之亦然.. 最好[在这里](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html#//apple_ref/doc/uid/TP40007457-CH112-SW17)总结这一点：

`A container controller can be both a parent to other controllers and a child of another container. Ultimately, this combination of controllers establishes a view controller hierarchy.`

因此，如果您想知道是否应该将两个父级附加到同一个视图控制器..那么您可能应该重新考虑您的视图层次结构.. b/c 这种情况不应该发生。在上述问题的上下文中..我应该让 UINavigationController 成为我的自定义包含控制器的子级..因为我在孩子和父母之间以及兄弟姐妹之间可以[灵活地交流](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)..我只能让 UINavigation 上下滑动选择 Mailview 时。

# java - 在终端中编译 java 应用程序

> ID：14235101
> 
> 赞同：0
> 
> 时间：2013-01-09T12:21:34.260
> 
> 标签：java, jar, compiler-errors, classpath, javac

我在linux上，`testjavaapp`在目录中创建了一个文件夹，然后`/home/Downloads`将三个文件`MyApp.java`和文件添加到该文件夹​​中。`MyLib.java``hppc-0.4.1.jar`

`MyLib.java`以。。开始：

```
import java.util.ArrayList;
import com.carrotsearch.hppc.IntArrayList;

public final class MyLib {
... 
```

而`MyApp.java`开始于：

```
import static MyLib.*;
import com.carrotsearch.hppc.IntArrayList;
import java.util.Date;

public class MyApp {

    public static void main(String[] args) {
... 
```

当我执行时：

```
[myself@laptop ~]$ cd Downloads/testjavaapp/
[myself@laptop testjavaapp]$ javac -cp '.:/home/myself/Downloads/testjavaapp/hppc-0.4.1.jar' MyLib.java 
```

java编译器创建`MyLib.class`没有任何问题。但是当我执行时：

```
[myself@laptop testjavaapp]$ javac -cp '.:/home/myself/Downloads/testjavaapp/hppc-0.4.1.jar' MyApp.java 
```

它吠叫：

```
MyApp.java:1: error: cannot find symbol
import static MyLib.*;
              ^
  symbol: class MyLib 
```

看起来我正确地添加了`.jar`库，但不正确地添加了本地静态库。

你能帮我修一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:25:21.183

好吧，这似乎很明显，所以我可能遗漏了一些东西

> javac -cp '.:/home/myself/Downloads/testjavaapp/hppc-0.4.1.jar' *.java

**编辑**

是的，我错过的明显是静态导入不适用于默认包。[这个错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4989710)讨论了为什么 Java 会以这种方式运行，最终它被关闭为“不是缺陷”——这是 Java 设计的行为方式。默认包只是有一些意想不到的行为，这也是鼓励程序员永远不要使用默认包的原因之一。

# java - 使用带注释的 JPA 对象（Hibernate JPA 提供程序）时，如何在列中插入 MySQL 表的默认日期时间值？

> ID：14235106
> 
> 赞同：0
> 
> 时间：2013-01-09T12:21:47.623
> 
> 标签：java, mysql, hibernate, jpa

我有一个 MySQL 数据库（旧版），我正在为其编写 JPA 层。我使用 Hibernate 作为 JPA 提供程序，并已将我的数据库表映射到带注释的 Java 类。

数据库中的一列包含时间戳并具有默认值（全为零，即 0000-00-00 00:00:00，但无论此默认值是否为其他值，问题都是相同的）：

```
releasedate TIMESTAMP DEFAULT '0000-00-00 00:00:00' 
```

注释如下：

```
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "releasedate", nullable = false, length = 19)
public Date getReleasedate() {
    return this.releasedate;
} 
```

通常，我在创建新条目时需要默认值，因此在持久保存它之前我不会在我的 Java 对象中设置日期（它为空）。

但是，这会导致将日期设置为现在，而不是默认值。

我可以将“可插入”注释元素设置为“false”，但这是不可取的，因为有时我确实想在创建时设置自定义日期。

我还尝试在注释中提供列定义（如此[处](https://stackoverflow.com/questions/197045/setting-default-values-for-columns-in-jpa)所述），但无济于事。

我确实在读取全零日期时间值时遇到了问题（如此[处](https://stackoverflow.com/questions/782823/handling-datetime-values-0000-00-00-000000-in-jdbc)所述），并通过将 JDBC 属性“zeroDateTimeBehavior”设置为“convertToNull”解决了这个问题。这解决了阅读的问题，但写作的问题仍然存在。

有人对在这种情况下该怎么做有任何想法吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:15:39.380

通常空值会触发数据库使用字段的默认时间戳。

我不确定如果您的会话是无状态的，实体可能会在 java 字段中保留空值。

# css - flexslider 滑块在主题中生成空间

> ID：14235118
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:22:32.787
> 
> 标签：css

我在我的 wordpress 主题中集成了 flexslider，

```
<div id="home-slider" class="flexslider">
<div class="shadow-top"></div>
<ul class="slides">
<li class="flex-active-slide" 
```

我需要访问 flex-active-slide，如何使用 css 进行访问？谢谢

```
<div id="menu-home">
<div class="menu-about-us-container">
<ul id="menu-about-us" class="menu"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:29:02.190

只需选择班级

```
.flex-active-slide{
} 
```

Flexslider 按顺序将该类分配给每张幻灯片。

如果你有多个滑块，你可能需要用它的父级来限定它，那个类也将在 li 上。

# iphone - 当用户锁定/解锁 iPhone5 设备时，如何识别特定事件？

> ID：14235120
> 
> 赞同：1
> 
> 时间：2013-01-09T12:22:38.257
> 
> 标签：iphone, objective-c, ipad, ios5, ios5.1

我已经经历了很多问题，但并没有确切地知道我将如何获得 iOS 5 及更高版本的锁定/解锁事件。

从各种帖子中，我了解到当用户在 iOS 5 iPhone 中锁定屏幕时，套接字连接会丢失，为此我们需要在后台方法中处理网络连接部分`beginBackgroundTaskWithExpirationHandler`。

但是有没有一种确切的方法来专门处理 iOS 上的锁定/解锁事件？因为`applicationWillResignActive`屏幕锁定/解锁和其他事件调用方法，例如通过按主页按钮退出应用程序或启动另一个应用程序。

是否有任何特定的委托方法**仅**在 iPhone 屏幕被锁定/解锁时调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:42:41.753

不，通常无法区分您的应用程序转换到后台的原因。有一些方法可以检测到电话（`CTCallCenter`在 Core Telephony 框架中），但无法判断设备是否已被专门锁定。

# asp.net - 如何在 https 中使用 urlrouting

> ID：14235121
> 
> 赞同：0
> 
> 时间：2013-01-09T12:22:38.877
> 
> 标签：asp.net, url-routing, webforms

我正在为我的最新项目使用 url 路由 - 它是 Web 表单而不是 MVC。

我注意到物理页面的所有路径都是虚拟的，那么我如何定向到 https 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:30:28.600

有几种方法可以重定向到 HTTPS。请参阅[此 SO question](https://stackoverflow.com/questions/47089/best-way-in-asp-net-to-force-https-for-an-entire-site)的答案。

您可以将[UrlRewrite](http://www.iis.net/downloads/microsoft/url-rewrite)规则添加到 IIS（或直接添加到 web.config，如下所示）：

```
<rewrite>
        <rules>
            <rule name="Redirect HTTP to HTTPS" stopProcessing="true">
                <match url="(.*)"/>
                <conditions>
                    <add input="{HTTPS}" pattern="^OFF$"/>
                </conditions>
                <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="SeeOther"/>
            </rule>
        </rules>
    </rewrite> 
```

# android - 在Android中检索模拟器上的最后位置？

> ID：14235128
> 
> 赞同：0
> 
> 时间：2013-01-09T12:23:11.600
> 
> 标签：android, gps, eclipse-adt

我正在尝试获取最后一个位置，但它总是失败，这是我的代码：

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/tv1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="hello" />
</LinearLayout> 
```

MainActivity.java

```
package com.example.gps;

import android.app.Activity;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity {

    LocationManager mLocationManager;
    TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView) findViewById(R.id.tv1);
        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        String locationprovider = mLocationManager.getBestProvider(criteria, true);
        Location mLocation = mLocationManager.getLastKnownLocation(locationprovider);
        tv.setText("Last location lat:" + mLocation.getLatitude() + " long:" + mLocation.getLongitude());
    }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.gps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.gps.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我已经通过 DDMS/模拟器控制窗口发送了坐标，如下图所示： ![&](../Images/637b3880c445738c0fcb5087b5573feb.png)

`hw.gps`正如您在 AVD 详细信息 ( ) 中所见，我的 AVD 启用了 GPS 硬件：![在此处输入图像描述](../Images/b6e7e933297f6f47ccd43d8922cb8cc8.png)

如您所见，在模拟器中启用了位置访问： ![在此处输入图像描述](../Images/40633543d05944e569397215f07f898c.png)

我还尝试使用命令通过 telnet 发送坐标：

```
telnet localhost 5556 
geo fix 13.24 52.31 
```

**但不幸的是，`getLastKnownLocation()`方法总是返回`null`！
如何解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:26:57.633

像这样更改您的代码

```
if(locationprovider!=null)
{
 Location mLocation = mLocationManager.getLastKnownLocation(locationprovider);
}
else
{
locationprovider =LocationManager.GPS_PROVIDER;
 Location mLocation = mLocationManager.getLastKnownLocation(locationprovider);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:10:21.100

对于那些有兴趣的人，我找到了问题和解决方案:)
这是因为模拟器之前从未检索过位置，所以最后一个位置始终为空！
为避免这种情况，我们必须使用以下代码至少获取一次位置：

```
public class MainActivity extends Activity implements LocationListener {
    LocationManager mLocationManager;
    TextView tv;
    Location mLocation;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView) findViewById(R.id.tv1);
        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        String locationprovider = mLocationManager.getBestProvider(criteria, true);
        mLocationManager.requestLocationUpdates(locationprovider, 5000, (float) 2.0, this);
    }

    @Override
    public void onLocationChanged(Location location) {
        mLocation = location;
        showupdate();
    }

    public void onProviderDisabled(String arg0) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String a, int b, Bundle c) {
    }

    public void showupdate() {
        tv.setText("Last location lat:" + mLocation.getLatitude() + " long:" + mLocation.getLongitude());
    }
} 
```

然后，每当运行问题中发布的初始代码时，它都会正确执行:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:11:10.473

在模拟器中，您不会对 GPS 有任何支持 .. 如果我们通过坐标，它将很容易工作.. 就是这样。在模拟器中我们可以模拟假gps位置来测试它。我们不能指望最后的位置..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:26:32.800

我猜你缺少互联网权限：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

并且似乎您正在使用默认的 android 模拟器，但您应该首先使用 Google API 并为您的 Geopoint 设置一些坐标。

# java - java.security.cert.CertificateExpiredException: NotAfter

> ID：14235133
> 
> 赞同：8
> 
> 时间：2013-01-09T12:23:30.137
> 
> 标签：java, certificate, exchangewebservices, ewsjavaapi

我正在使用 EWSJavaAPI 1.1.5 连接到 Exchange Server 2010。

直到今天，在尝试连接到服务器时一切正常，但出现以下异常：

```
microsoft.exchange.webservices.data.ServiceRequestException: The request failed. java.security.cert.CertificateExpiredException: NotAfter: Fri Dec 28 01:26:27 GMT+02:00 2012
    at microsoft.exchange.webservices.data.ServiceRequestBase.validateAndEmitRequest(Unknown Source)
    at microsoft.exchange.webservices.data.SimpleServiceRequestBase.internalExecute(Unknown Source)
    at microsoft.exchange.webservices.data.MultiResponseServiceRequest.execute(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.bindToFolder(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.bindToFolder(Unknown Source)
    at microsoft.exchange.webservices.data.Folder.bind(Unknown Source)
    at microsoft.exchange.webservices.data.Folder.bind(Unknown Source)
    at com.xeno.phonesuite.web.Mail.Mail.authenticate(Mail.java:100)
    at org.apache.jsp.mailandcalendar.dologin_jsp._jspService(dologin_jsp.java:121)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateExpiredException: NotAfter: Fri Dec 28 01:26:27 GMT+02:00 2012
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1649)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:241)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:235)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1206)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:893)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:632)
    at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:506)
    at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2114)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
    at microsoft.exchange.webservices.data.HttpClientWebRequest.executeRequest(Unknown Source)
    at microsoft.exchange.webservices.data.ServiceRequestBase.emit(Unknown Source)
    ... 31 more
Caused by: java.security.cert.CertificateExpiredException: NotAfter: Fri Dec 28 01:26:27 GMT+02:00 2012
    at sun.security.x509.CertificateValidity.valid(CertificateValidity.java:256)
    at sun.security.x509.X509CertImpl.checkValidity(X509CertImpl.java:570)
    at sun.security.x509.X509CertImpl.checkValidity(X509CertImpl.java:543)
    at microsoft.exchange.webservices.data.EwsX509TrustManager.checkServerTrusted(Unknown Source)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1198)
    ... 49 more 
```

请告知我为什么会收到此异常以及如何解决它，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:48:20.197

Exchange 服务器证书已过期，因此我将其删除并创建了一个新证书。

# google-app-engine - oauth_signature in OAuth google api

> ID：14235144
> 
> 赞同：0
> 
> 时间：2013-01-09T12:24:17.240
> 
> 标签：google-app-engine, oauth, 2-legged

Hi i am trying to implement OAuth1.0 following this [tutorial](https://developers.google.com/accounts/docs/OAuth_ref) in this tutorial there is a heading OAuthGetRequestToken

in which for getting request token we have to send a post request to URL

www.google.com/accounts/OAuthGetRequestToken

i am sending a post request in my code in google app engine my code is:

```
 package org.ritesh;

    import java.io.BufferedInputStream;
    import java.io.BufferedReader;
    import java.io.DataInputStream;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.io.OutputStreamWriter;
    import java.net.HttpURLConnection;
    import java.net.URL;
    import java.net.URLEncoder;
    import java.security.KeyFactory;
    import java.security.NoSuchAlgorithmException;
    import java.security.PrivateKey;
    import java.security.spec.EncodedKeySpec;
    import java.security.spec.InvalidKeySpecException;
    import java.security.spec.PKCS8EncodedKeySpec;
    import java.util.Iterator;
    import java.util.Map;
    import java.util.Set;
    import java.util.TreeMap;

    import com.google.gdata.client.authn.oauth.*;
    import com.google.gdata.util.common.util.Base64;
    import com.google.gdata.util.common.util.Base64DecoderException;
    import com.sun.org.apache.xerces.internal.util.URI;

    import javax.servlet.ServletContext;
    import javax.servlet.http.*;

    @SuppressWarnings("serial")
    public class HelloWorldServlet extends HttpServlet {
        @SuppressWarnings({ "unchecked", "unchecked" })
        public void doGet(HttpServletRequest req, HttpServletResponse resp)
                throws IOException {

        String myrsakey=    "MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBALwVoQ3Ksd9gwZY3"
            +"a7Flz5bf1oCiYe8XSn6vlkaPiA0jBcPJAmACjI023/Z+8KgDbyhlRumTtcateXNZ"
            +"FVb7q/BKTQWgxK1Fj2XGUkWQz6Nsp/sk54M+R4n3XkTp6W7HhFERE81Iobgy+KtM"
            +"vr5f/tJbCtLspKSaq2totveKMvMDAgMBAAECgYBIeTke3FzfyyOtI1vO9oEgDM5V"
            +"sLx16Y6d9EC+na36CeW9xGWy4yiPfXadP9qxkukxMp05gd5IWS30QX5UjxN4ER9j"
            +"tEDCfDePnrOoi6aUpLXuHoOQbhVIBMTEsFzw9v837a2GOnU0YMgUnGTzC8Ql/3Aw"
            +"kFPNFqVEG57ItzZYGQJBAO8K8qXiDfUeMUjGLwqbRk5NgM7GVlPI80f3/V2o7EtP"
            +"T6kr6nvob7ZfgQ9R1STuIPjF+0GartfHZ5x+7tdcZ7cCQQDJbUV6Y41zzQ/Pg/cl"
            +"VIbZ8Lx9GdtYBaDFeIhGHXDq7Q0I17ztMILJfvx5kKQWGix8ktb0COGX7LxKIwFu"
            +"GxcVAkEAhoDWf9humhnfCV/aYFF2geDCNZcMRCCyIzC689R1APsji8EWM5paIXgj"
            +"moclM556FwDvm7552xhsiHYz1iI8iQJANcCMRvHkIJ/7dSRBQtwAtI4yrqvExgOS"
            +"eMAGlbdrl7W0wcRYrW9Bp6XUmFhKAX/wmTnSVQM9uH47bQlUa16dVQJBAKnnjcgW"
            +"AmoCYM+YYmi6+fytPYn9W61RNdl1f9rtccDBhsWomgS6O204qJoLX+U/aCkjpPxK"
            +"IyilkfsZBNupdzA=";

            resp.setContentType("text/html");

 resp.getWriter().println("<html><head> <meta name=\"google-site-verification\" content=\"OBFeK6hFEbTkNdcYc-SQNH9tCTpcht-HkUdj6IgCaLg\" </head>");

            resp.getWriter().println("<body>Hello, world");

      TreeMap<String,String> tree=new TreeMap<String,String>();
      tree.put("oauth_version","1.0");
      tree.put("oauth_nonce", System.currentTimeMillis()+"");
      tree.put("oauth_timestamp",System.currentTimeMillis()/1000+"");
      tree.put("oauth_consumer_key", "imehandirattaritesh.appspot.com");
      tree.put("oauth_signature_method", "RSA-SHA1");
      tree.put("oauth_signature", myrsakey);
      tree.put("oauth_callback", "https://imehandirattaritesh.appspot.com/authsub");
      tree.put("scope", "http://www.google.com/calendar/feeds");
      Set set = tree.entrySet(); 

      Iterator<Map.Entry<String, String>> i = set.iterator(); 
      String datastring="";
      Map.Entry me=(Map.Entry)i.next();
     datastring=me.getKey()+"=";
     datastring+=me.getValue();

     while(i.hasNext()) { 
          me = (Map.Entry)i.next(); 
          datastring+="&"+me.getKey()+"="; 
          datastring+=(me.getValue()); 
          } 

    URL url=new URL("https://www.google.com/accounts/OAuthGetRequestToken?"+datastring); 
                    resp.getWriter().println(""+datastring);
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

            urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

            urlConnection.setRequestProperty("Authorization", "OAuth");

            urlConnection.setRequestMethod("POST");

            urlConnection.setDoOutput(true);

            BufferedReader in = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));

              resp.getWriter().println( urlConnection.getResponseCode());

               String xx="";

               String xx1="";

               while((xx1=in.readLine()) != null)

               {
                   xx+=xx1;

               }
               resp.getWriter().println(xx);
               resp.getWriter().println("</body></html>");

        }

} 
```

i am hosting my app on domain imehandirattaritesh.appspot.com and i think probably i am putting all my parameters correct.may be in tutorial link signature is a very small string but in my case it is a very big string i am putting the content of my .pk8 file which is generated from certificate .pem file .i am expecting my input as like this

```
oauth_token=ab3cd9j4ks73hf7g&oauth_token_secret=ZXhhbXBsZS5jb20&oauth_callback_confirmed=true 
```

but in place of this i am getting response of sending post request as

```
signature_invalidbase_string:POST&https%3A%2F%2Fwww.google.com%2Faccounts%2FOAuthGetRequestToken&oauth_callback%3Dhttps%253A%252F%252Fimehandirattaritesh.appspot.com%252Fauthsub%26oauth_consumer_key%3Dimehandirattaritesh.appspot.com%26oauth_nonce%3D1357733037248%26oauth_signature_method%3DRSA-SHA1%26oauth_timestamp%3D1357733037%26oauth_version%3D1.0%26scope%3Dhttp%253A%252F%252Fwww.google.com%252Fcalendar%252Ffeeds 
```

my oauth_callback is [https://imehandirattaritesh.appspot.com/authsub](https://imehandirattaritesh.appspot.com/authsub)

i am trying to remove this error like hell but failed every time can any one please help how to remove this error or resource or link from which i will get any help.please dont suggest me using java client for OAuth1.0 .i have to use google prediction api and call then from my application and in java client library there is no functionality related to calling google prediction api.please help me how to remove this error and get right output

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:38:31.630

它清楚地表明签名无效。您的 RSA 密钥不是您的签名。请参考同一教程的签名请求以创建有效签名。[https://developers.google.com/accounts/docs/OAuth_ref#SigningOAuth](https://developers.google.com/accounts/docs/OAuth_ref#SigningOAuth)。

[以及http://oauth.net/core/1.0/#signing_process](http://oauth.net/core/1.0/#signing_process)的第 9.3 节

# android - How to decrypt ts files given in a m3u8 file?

> ID：14235148
> 
> 赞同：0
> 
> 时间：2013-01-09T12:24:21.963
> 
> 标签：android, m3u8

I have a url for a m3u8 file which has the list of ts files.All those files are encrypted by AES-128 method.Along with ts files m3u8 file also contains URI for keys.

First I want to download the ts files & then decrypt them.After decryption I want to play those files.

Url for my m3u8 file is like `https://example.com/myxml/myclips/250/prog_index.m3u8`

My m3u8 file looks like this.

```
#EXTM3U
#EXT-X-TARGETDURATION:10
#EXT-X-VERSION:2
#EXT-X-MEDIA-SEQUENCE:0
#EXTINF:10, 
#EXT-X-KEY:METHOD=AES-128,URI="https://my.server.com/myxml/myclips/keys/250/crypt_480x272_250_0.key",IV=0x8da4a2d80b88785f7931874bf1e0914b
fileSequence0.ts
#EXTINF:10, 
fileSequence1.ts
#EXTINF:10, 
fileSequence2.ts
#EXTINF:10, 
fileSequence3.ts
#EXTINF:10, 
fileSequence4.ts
#EXTINF:10, 
fileSequence5.ts
#EXTINF:10, 
fileSequence6.ts
#EXTINF:10, 
fileSequence7.ts
#EXTINF:10, 
fileSequence8.ts
#EXTINF:10, 
fileSequence9.ts
#EXTINF:10, 
fileSequence10.ts
#EXTINF:10, 
fileSequence11.ts
#EXTINF:10, 
#EXT-X-KEY:METHOD=AES-128,URI="https://my.server.com/myxml/myclips/keys/250/crypt_480x272_250_1.key",IV=0x8e2d35559338d21f2586e79d6cd5c606
fileSequence12.ts
#EXTINF:10, 
fileSequence13.ts
#EXTINF:10, 
fileSequence14.ts
#EXTINF:10, 
fileSequence15.ts
#EXTINF:10, 
fileSequence16.ts
#EXTINF:10, 
fileSequence17.ts
#EXTINF:10, 
fileSequence18.ts
#EXTINF:10, 
fileSequence19.ts
#EXTINF:2,  
fileSequence20.ts
#EXT-X-ENDLIST 
```

I am not getting any clue how can I do this.Please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:47:13.090

正如我在评论中提到的，AES-128 解密是由媒体框架在 Android 3.x 和 4.x 设备上自动完成的。

但是，您的 m3u8 中有错误。请颠倒#EXTINF 和#EXT-X-KEY 的顺序。#EXTINF 要求在下一行中包含 TS URI。

[下面是HLS 草案](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-02#section-4)的引述

> EXTINF 是一个记录标记，用于描述由其后面的 URI 标识的媒体文件。每个媒体文件 URI 必须以一个 EXTINF 标记开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-07T15:46:17.490

不久前我也做了几乎一样的事情。我在这里写过： [https ://andreasvolkmann.github.io//m3u8-and-ts-segments/](https://andreasvolkmann.github.io//m3u8-and-ts-segments/)

基本上采用带有加密 ts 段的 m3u8 播放列表并将其转换为一个 mp3 文件。

但是我不在Android上。以下代码对我有用（Kotlin）：

```
fun getCipher(data: EncryptionData): Cipher {
    val bytes = URL(data.uri).readBytes()
    val chainmode = "CBC"
    val method = when (data.method) {
        EncryptionMethod.AES -> "AES/$chainmode/NoPadding"
        else -> data.method.name
    }
    val keySpec = SecretKeySpec(bytes, data.method.name)
    logger.trace("Decrypting using method ${data.method} ($method)")
    return Cipher
        .getInstance(method)
        .apply { init(Cipher.DECRYPT_MODE, keySpec, IvParameterSpec(ByteArray(16))) }
} 
```

# scroll - S40 容器的 LWUIT 中的自动滚动

> ID：14235151
> 
> 赞同：0
> 
> 时间：2013-01-09T12:24:30.410
> 
> 标签：scroll, lwuit, autoscroll

这是我的代码。我希望第 20 个标签是可见的，任何人都知道如何完成它。

[LWUIT Container 中的](https://stackoverflow.com/questions/9877168/auto-scrolling-in-lwuit-container)另一篇文章Auto Scrolling说 componentOfLastContainer.requestFocus(); centerBigContainer.repaint(); 会工作，但它似乎不适合我。我需要你的帮助，谢谢

```
public class TestView extends Form{
private TextArea inputText;
private Container chatScreen = new Container(new BoxLayout(BoxLayout.Y_AXIS));

public TestView () {
    super("test", null);
    setupUI();
        }

void setupUI() {
    setLayout(new BorderLayout());
    setScrollable(false);
    chatScreen.setScrollableY(true);
    addComponent(BorderLayout.CENTER, chatScreen);
    inputText = new TextArea(2, this);
    inputText.setGrowByContent(true);
    inputText.setMaxSize(1000);
    Container sendContainer = new Container(new BorderLayout());
    sendContainer.addComponent(BorderLayout.CENTER, inputText);
    addComponent(BorderLayout.SOUTH, sendContainer);

    for (int i = 0; i < 20; i++) {
        Label l = new Label("sdjfksjfksjd" + i);
        c = new Container();
        c.addComponent(l );
        chatScreen.addComponent(c);
    }

  c.requestFocus();

  chatScreen.repaint();

    Display.getInstance().callSerially(new Runnable(){

            public void run() {
                  c.requestFocus();

                 chatScreen.repaint();
            }
        });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:37:34.637

我猜如果请求焦点对你不起作用，它与你在那里的文本区域有关。我对诺基亚叉子帮不上什么忙，但这应该适用于[Codename One](http://www.codenameone.com/)。

# opengl - 使用 OpenGL 在多维数据集中绘制 3D 点网格的最便宜方法

> ID：14235152
> 
> 赞同：0
> 
> 时间：2013-01-09T12:24:30.840
> 
> 标签：opengl, grid, shader, cube, points

我正在寻找在 OpenGL 中绘制 3D 点网格的最便宜的方法（例如 256x256x256 --> 16.000.000 点）。目前我将我的顶点存储在 VBO 中并将其传递给我的顶点着色器。有没有更好的方法将所有这些值存储在一个巨大的一维数组中，因为它们应该位于规则网格上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:33:48.747

我认为最好的方法是将所有值存储在一个向量中并使用 VBO 来渲染它们。

使用向量的优点是它们有足够的空间来存储任意数量的浮点数，并且可以很容易地随时操作单个点。使用向量时，内存也不是问题。

VBO 也是一个不错的选择，因为数据存储在显卡上而不是存储卡上，从而为您提供更高的性能。

# iphone - Sending image data from iPhone/iPad to Windows PC over wifi

> ID：14235153
> 
> 赞同：5
> 
> 时间：2013-01-09T12:24:33.753
> 
> 标签：iphone, tcp, bluetooth, wifi

I'm writing an iPhone/iPad program where I can capture an image, draw something on the image(e.g a line), and send it to a PC (e.g WinXP) in real time. To send the image data to a PC, I'm considering bluetooth and wifi but here's what I found:

1.  Bluetooth - IMPOSSIBLE, no API
2.  Wifi TCP/IP - (i) [Bonjour NSStream(XCode) and GCDAsyncSocket(C++)](https://stackoverflow.com/questions/7809848/asycnsocket-not-connecting-to-tcp-serial-port-over-wifi?rq=1) (ii) [Bonjour NSStream(XCode) and Bonjour Windows (C++)](https://stackoverflow.com/questions/2010123/access-iphone-from-windows?rq=1)
3.  Wifi UDP - [Bonjour NSStream(XCode) and MFC's CAsyncSocket(C++)](http://www.codeproject.com/Articles/16581/Sending-Receiving-UDP-Datagrams-with-MFC-s-CAsyncS)

Is the above correct?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T19:46:04.390

恕我直言：在您的 PC 上使用 TCP 服务器和 TCP 客户端应用程序（FastSocket [https://github.com/dreese/fast-socket](https://github.com/dreese/fast-socket)）并通过 WiFi（LAN 或 WLAN），您应该能够通过网络。另外，请参阅本教程[http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

# design-patterns - Design pattern for a parent/master/host application controlling many sub-applications

> ID：14235163
> 
> 赞同：2
> 
> 时间：2013-01-09T12:25:12.053
> 
> 标签：design-patterns, architecture, language-agnostic, ooad

QUESTION:

"Is there some architectural design-pattern where many independent applications are controlled by a parent (master, host) application, containing common information?"

* * *

BACKGROUND:

We are designing a medical application with the following architecture:

*   There will be a host application where patient data will be centralized in a single database;
*   There will be many (two to eight, more or less) applications, which are responsible for different types of diagnostic examinations for a given patient;
*   Typically, workflow involves:
    1.  Opening the master application;
    2.  Navigating to a patient's record;
    3.  Opening a new task for that patient in some sub-application;
    4.  From here forwards, working exclusively "inside" this sub-application, which "takes control" untill the user finishes it (returning to the parent application), while state of master application is available for context.
*   There should be a single Parent-Child interface for common tasks, so that Child Applications would be polymorphic regarding these common tasks. Then, the Parent would be unaware of encapsulated specifics of each child application.
*   It would be desireable that each sub-application could be deployed as standalone, with a minimal, dedicated front-end.

* * *

CONSIDERATIONS/CANDIDATES:

*   The Mediator pattern would "provide a unified interface to a set of interfaces in a subsystem", but it seems more oriented towards mediating communication between Colleagues, while in my use-case I need to mediate between Parent and Child applications, where children are unaware of each other;
*   The template method pattern "defines the program skeleton of an algorithm in a method, called template method, which defers some steps to subclasses". This could induce the formulation of a "common clinical diagnostic workflow", composed by, say, data capture, processing, display, interpretation and reporting.

* * *

Thanks for reading, any insight will be much appreciated!

# android - Android. Getting link to the video stream from GoogleDrive

> ID：14235165
> 
> 赞同：3
> 
> 时间：2013-01-09T12:25:17.127
> 
> 标签：android, video-streaming, google-drive-api

I want to build my own android application that will show my videos on the device. I'd like to use Google Drive as a video storage for my application.

My question: Is there any way to get the link to the direct video stream for the video saved to my Google Drive? I'm considering two options here:

*   the link is some constant so I'm able to store it in my database and give it to my android device to get the video from;

*   the link is changing from time to time so having some video_id (I don't know if it exists), I can somehow get the link to the video stream and give it to my device.

I'll appreciate any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:18:01.450

您可以通过get认证后获取Google Drive中的文件，花点时间在这里API参考| [https://developers.google.com/drive/v2/reference/#Files](https://developers.google.com/drive/v2/reference/#Files)

# c - 为什么 char a=-1 与 unsigned char b=-1 不同，在 C 编程中

> ID：14235170
> 
> 赞同：1
> 
> 时间：2013-01-09T12:25:28.343
> 
> 标签：c

我在下面写了一个小程序。

```
#include <stdio.h>
main(){
    char a=-1;
    unsigned char b=-1;
    printf("%d %d\n",a,b);
    printf("%x %x\n",a,b);
    if(a==b) printf("equal\n");
    else printf("not equal\n");
} 
```

prog的输出是：

```
-1 255
ffffffff ff
not equal 
```

由于 char 只有一个字节，而 -1 以 2 的补码形式表示，我认为 0xff 将存储在 a 和 b 中，因此两者应该相等。谁能让我知道它们为什么不同以及为什么 a 的十六进制表示是 0xffffffff 而不是 0xff。我得到了一个相关链接[http://embeddedgurus.com/stack-overflow/2009/08/a-tutorial-on-signed-and-unsigned-integers/](http://embeddedgurus.com/stack-overflow/2009/08/a-tutorial-on-signed-and-unsigned-integers/)但我无法得到答案。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T12:30:51.377

他们是一样的。或者更确切地说，它们的底层表示是相同的（假设您的编译器使用二补码形式）。

另一方面，它们代表的值是 -1 和 255。

当您打印它们时，它们会*扩展*到数据类型`int`。`unsigned char`是零扩展的，而有符号字符是符号扩展的，这说明了您看到的差异。

比较两个值时会发生相同的扩展。`a == b`不要比较底层表示，而是将两个值都扩展为，`int`因此它将 255 与 -1 进行比较，这不相等。

请注意，plain`char`可以是已签名或未签名的。在您的环境中，它显然已签名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:26:43.767

该`char`类型有点异常，因为它与`signed char`or`unsigned char`不同（与其他整数类型不同 - `short`, `int`,`long`等 - 除非明确声明，否则它们是隐式签名的`unsigned`）。是否`char`实际签名取决于实现，一些编译器甚至允许您通过命令行开关指定签名。

底线：永远不要假设它`char`是有符号或无符号的 - 如果您实际上需要有符号或无符号的 8 位数量，则使用`signed char`or`unsigned char`显式，或者更好的是，使用`int8_t`or `uint8_t`from `<stdint.h>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T12:39:48.773

A`signed int`有符号，an`unsigned int`无符号。如果使用just `int`，则暗示`signed int`。`short`,`long`或也是如此`long long`。然而它不是真的`char`。A`signed char`是有符号的，an`unsigned char`是无符号的，但`char`可以是有符号的或无符号的。数据类型 char 应该包含一个“字符”，因此是名称，因此它不是“真正的”整数类型来保存要用于计算的整数。当然，字符实际上是某种整数，但哪种整数取决于实现（C 标准不强制任何特定类型）。因此，如果您想将 char 类型用于整数值（也用于计算），请始终使用`signed char`or`unsigned char`显式并且仅使用`char`当您真正处理字符时，或者如果 char 是有符号或无符号的，它对您的代码完全没有影响。

比较失败，因为您的实现定义`char`为 in fact `signed char`，因此您在最终语句中将 a 与 a`signed char`进行比较。每当您比较两个不同类型的整数时，编译器都会在实际执行比较之前[根据 C 标准的规则将这两个值转换为相同类型。](http://en.wikipedia.org/wiki/Type_conversion)在您的情况下，这意味着 C 编译器实际上执行以下操作：`unsigned char``if`

```
if((int)a==(int)b) printf("equal\n");
    else printf("not equal\n");
} 
```

现在应该很明显为什么这两个值不匹配了。`(int)a`的值为`-1`，但`(int)b`值为`255`，并且这两个值不相等。

根据*类型提升*的规则，`char`（在你的情况下签名）被提升为`int`并且`unsigned char`也被提升为`int`。ISO C 2011 标准说：

> 如果 int 可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为 int；否则，它将转换为无符号整数。这些被称为整数提升。）所有其他类型都不受整数提升的影响。
> 
> 整数促销保留价值，包括符号。如前所述，''plain'' char 是否被视为有符号是实现定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:48:06.347

虽然在普通的“char”周围存在一些歧义（请参阅[Is char signed or unsigned by default?](https://stackoverflow.com/q/2054939/1955371)），但我认为这并不是唯一发生的事情。

文字 -1 是一个整数，它不会（sizeof(int)>sizeof(char)，为了参数）“适合”到一个字符中。双补码位模式 0xffff（为了参数，32 位 int）是在这里截断并复制。

当您调用 printf() 时，参数被提升为整数类型，有符号类型是“符号扩展”，但无符号“b”不是，并且填充了零。当您将“==”与两种不同的类型一起使用时，会执行类似（但不一定相同）的类型转换（也称为“通常的算术转换”）。

另请参阅[C 函数调用中的默认参数提升](https://stackoverflow.com/q/1255775/1955371)和有[符号和无符号，以及位扩展如何在 C](https://stackoverflow.com/q/2706588/1955371)中工作。

# delphi - 向 TreeNT 组件添加 Unicode 支持

> ID：14235171
> 
> 赞同：0
> 
> 时间：2013-01-09T12:25:29.140
> 
> 标签：delphi, unicode, components, delphi-xe2

我在我的应用程序中使用[TreeNT](http://www.lischke-online.de/index.php/controls/treent)组件。我正在将应用程序迁移到 XE2。我已经在 XE2 中重新编译了组件。运行时它不会在窗口中显示节点标题。

您能给我一些提示以手动将第三方组件迁移到 XE2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:02:56.143

Delphi中有很多关于Unicode的文章组件的移植与移植应用程序没有什么不同。找到并阅读它们。真的会。

你会被 PChar -> PAnsiChar/PWideChar 模糊性击中，特别是如果你在 {$T-} 模式下工作。检查编译时是否键入了指针。

`move`如果在分配缓冲区或在我的过程中移动原始数据时没有在 Sizeof(char) 上进行乘法运算，就会受到打击。

您最好搜索模棱两可的类型 - char、pchar、string - 并删除它们，根据上下文将它们显式替换为 WideChar/PWideChar/UnicodeString 或 AnsiChar/PAnsiChar/AnsiString。因此，您既可以了解类型转换可能发生的位置，也可以让编译器为您进行类型检查。ShortStirng 类型（`string[255]`由 TreeNT 使用）根据定义是非 Unicode。当您访问它时，请注意每个地方。

如果您从 Windows DLL 直接导入并在 Windows 函数名称处指定“A”，您会受到打击。这很容易导致 ANSI 函数获取意外的 UTF-16 数据。

尝试搜索是否有人已经这样做了。例如[http://code.google.com/p/keynote-nf/source/browse/trunk/3rd_party/treent/TreeNT.pas](http://code.google.com/p/keynote-nf/source/browse/trunk/3rd_party/treent/TreeNT.pas) - 但这在 2007 年结束，在 Delphi RTL 中的 Unicode 之前。

# cakephp - CakePHP Internationalization locale codes

> ID：14235174
> 
> 赞同：1
> 
> 时间：2013-01-09T12:25:38.613
> 
> 标签：cakephp, localization, internationalization, multilingual

I have some troubles with locale codes in CakePHP 1.3 (but also applicable for 2.0)

I am using the 3 letter codes for the languages but some codes are not available. For example I would like to setup `aus` for Australia. As the documentation says

> The three-character locale codes conform to the ISO 639-2 standard, although if you create regional locales (en_US, en_GB, etc.) cake will use them if appropriate.

And `aus` exists in `ISO 639-2` but does not work with CakePHP. It saves the i18n record but when displaying the content it takes the english version. Just the same happens when putting code that is not available in the ISO standard. Also I have tried with the location based code `en_AU` and the result is the same.

Am I able to make any code to work, no matter if it is according the ISO standard. This is because in the site administrator has access to the languages in the site and I would like to allow him to use any combination of letters to use as a code for the language.

Also how to get setup code for Australia

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:22:55.737

您需要告诉 cake 您使用什么语言进行翻译。您可以使用通用的 3 字母代码（如 eng）或更多特定于位置的代码（如 en-US）。

在你的情况下：

```
Configure::write('Config.language', 'en-au') 
```

注意破折号（[https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/I18n/L10n.php](https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/I18n/L10n.php)）。

然后该文件夹将是“en_au”`/APP/Locale/`

# c++ - 为什么 C++ 'new' 运算符的这种实现有效？

> ID：14235180
> 
> 赞同：3
> 
> 时间：2013-01-09T12:26:08.223
> 
> 标签：c++, memory, malloc, avr, libc

我发现 AVR uCs 的 C++ 编译器不支持`new`and`delete`运算符，但也有一个快速修复：

```
void * operator new(size_t size) 
{ 
  return malloc(size); 
} 

void operator delete(void * ptr) 
{ 
  free(ptr); 
} 
```

我假设现在可以调用`new ClassName(args);`.

但是，我不确定这是如何工作的。例如，`size_t`这里实际返回的是什么？我认为构造函数不返回任何东西......

难道`new`现在应该以不同的方式使用（与 结合`sizeof()`）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T12:34:27.757

`new T(args);`大致相当于以下。

```
void* storage = operator new(sizeof(T)); // obtain raw storage
call_constructor<T>(storage, args); // make an object in it 
```

（这里`call_constructor`应该调用构造函数^† of `T`making`storage`是该`this`构造函数中的指针。）

该`operator new`部分获得请求的原始存储量，而构造函数调用是通过调用构造函数实际生成对象的部分。

问题中的代码只替换了`operator new`部分，即存储的检索。当`sizeof`您使用`new T(args)`.

* * *

† 该语言有一种方法可以表达这种直接的构造函数调用，称为“放置`new`”，但为了清楚起见，我省略了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:37:25.350

从编译器名称（uC）来看，我认为它是用于嵌入式控制器的。这是有道理的，因为您很少需要使用嵌入式设备进行动态内存管理，但可能会从“C with classes”中受益。希望它支持'placement new'，这样你就可以实际使用 C++。

如果您的编译器不支持 new 和 delete，那么它就不是 C++ 编译器了！

我认为关键字“新”有效地转换为：

```
Object* pointer = (Object *)new(sizeof Object);
pointer->Object_Constructor(args); 
```

# c - 为什么我在 C 中找不到 EOF 的值？

> ID：14235183
> 
> 赞同：7
> 
> 时间：2013-01-09T12:26:22.827
> 
> 标签：c

我正在阅读“The C Programming Language”一书，并且有一个练习要求验证表达式`getchar() != EOF`是否返回 1 或 0。现在，在我被要求这样做之前的原始代码是：

```
int main()
{
    int c;
    c = getchar();

    while (c != EOF)
    {
        putchar(c);
        c = getchar();
    }  
} 
```

所以我想把它改成：

```
int main()
{
    int c;
    c = getchar();

    while (c != EOF)
    {
        printf("the value of EOF is: %d", c);
        printf(", and the char you typed was: ");

        putchar(c);
        c = getchar();
    }
} 
```

而书中的答案是：

```
int main()
{
  printf("Press a key\n\n");
  printf("The expression getchar() != EOF evaluates to %d\n", getchar() != EOF);
} 
```

你能解释一下为什么我的方法不起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T12:32:05.617

因为 if `c`is `EOF`，`while`循环终止（或者甚至不会开始，如果它已经`EOF`在输入的第一个字符上）。运行另一个循环迭代的条件`c`是**NOT** `EOF`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T12:34:52.690

显示 EOF 的值

```
#include <stdio.h>
int main()
{
   printf("EOF on my system is %d\n", EOF);
   return 0;
} 
```

EOF 在 stdio.h 中通常定义为 -1

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-10T12:18:33.777

EOF 可以通过键盘触发，在 Unix 中按 ctrl+d，在 Windows 中按 ctrl+c。

示例代码：

```
 void main()
    {
           printf(" value of getchar() != eof is %d ",(getchar() != EOF));
           printf("value of eof %d", EOF);
    } 
```

输出：

```
[root@aricent prac]# ./a.out 
a
 value of  getchar() != eof is 1 value of eof -1
[root@aricent prac]# ./a.out 
Press    ctrl+d
 value of   getchar() !=  eof is 0 value of eof -1[root@aricent prac]# 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-19T05:00:28.973

```
Here is my one,
i went through the same problem and same answer but i finally found what every body want to say.
System specification :: Ubuntu 14.04 lts
Software :: gcc

yes the value of EOF is -1 based on this statement
printf("%i",EOF);

but if your code contain like this statement
while((char c=getchar)!=EOF);;
and you are trying to end this loop using -1 value, it could not work.

But instead of -1 you press Ctrl+D your while loop will terminate and you will get your output. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-01T02:16:04.490

改为 c!=EOF。因为您要打印表达式的结果而不是字符。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-09T12:45:12.367

在您的程序中，您正在从 std 输入中读取字符 c = getchar();

这样你就可以获得按键的 ascii 值，它永远不会等于 EOF。

因为EOF是文件结束。

最好尝试打开任何现有文件并从文件中读取，所以当它到达文件结束（EOF）时，它将退出while循环。

好吧，书中的答案是：

```
int main()
{
  printf("Press a key\n\n");
  printf("The expression getchar() != EOF evaluates to %d\n", getchar() != EOF);
} 
```

尝试理解程序，它得到一个不等于 EOF 的键，所以它应该总是打印“表达式 getchar() ！= EOF 计算为 0”。

希望能帮助到你.......

# c# - 在哪里下载 .net 1.0 DLL

> ID：14235184
> 
> 赞同：7
> 
> 时间：2013-01-09T12:26:24.453
> 
> 标签：c#, .net, telerik, decompiling

我需要使用 Telerik JustDecompile 反编译旧的类库。我的问题是该库引用了 System.Web.dll 版本 1.0.5000.0 之类的东西，如果我没记错的话，它就是 .NET 1.0 版本。

我可以访问的所有 PC 都运行 Windows 7，所以我不能简单地安装 1.0 框架。所以，我需要以其他方式接触图书馆。

如果我在不解析引用的情况下反编译库，则会发生奇怪的事情，例如库中的所有 webmethods 都被空的 [SoapDocumentMethod(,)]、[[SoapHeader(,)]] 等注释反编译。

我还需要解析 mscorlib.dll、System.Data.dll 和 System.Web，但是如果我在反编译后手动添加对较新版本的引用似乎并不重要。似乎只是 System.Web.Services 有问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T12:41:27.957

1.  下载[Microsoft .NET Framework Redistributable 1.0](http://www.microsoft.com/en-us/download/details.aspx?id=96) (dotnetredist.exe)
2.  通过 7-zip（或任何其他工具）-> (dotnetfx.exe)从**dotnetredist.exe**中提取所有文件
3.  通过 7-zip（或任何其他工具）-> (netfx.cab)从**dotnetfx.exe**中提取所有文件
4.  **通过 7-zip（或任何其他工具）从netfx.cab**中提取所有文件-> (System.Web_dll_5____X86.3643236F_FC70_11D3_A536_0090278A1BB8)
5.  **将 System.Web_dll_5_____X86.3643236F_FC70_11D3_A536_0090278A1BB8重命名**为 System.Web.dll
6.  利润！！！

# android - 设置首选项屏幕的文本颜色

> ID：14235185
> 
> 赞同：1
> 
> 时间：2013-01-09T12:26:25.727
> 
> 标签：android, radio-group, textcolor, preferencescreen

朋友们，我创建了一个 listpreferences 屏幕，它工作正常，但我想更改出现在列表和 RadioGroup 项目上的文本颜色。所以任何人都可以帮助我。

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
        <ListPreference      
         android:entries="@array/gametype"
         android:entryValues="@array/gametype"
         android:key="listpref"
         android:summary=""
         android:title="Set Game Level" />
</PreferenceScreen> 
```

这是我的首选项屏幕。单击 listpreferences 项后，它会显示一个对话框，其中包含三个选项，因此我想更改该单选按钮文本和列表项文本的颜色。

这是java代码：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
        SharedPreferences sp=getPreferenceScreen().getSharedPreferences();
        Preference pref=findPreference("listpref");
        ListPreference lp=(ListPreference)pref;
        pref.setSummary(lp.getValue());
        sp.registerOnSharedPreferenceChangeListener(this);

    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
            String key) {
        Preference pref=findPreference(key);
        ListPreference lp=(ListPreference)pref;
        pref.setSummary(lp.getValue());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:05:11.370

```
public void setcolor(int position){
for(int i=0;i<4;i++)
{
    if(i==position)
    {
        list.getChildAt(i).setBackgroundColor(Color.rgb(238, 180,    180));
    }
    else{
        list.getChildAt(i).setBackgroundColor(Color.WHITE);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:37:35.547

试试这样；

```
RadioGroup.setTextColor(Color.GREEN); 
```

这是一个很好的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:39:03.790

如果您想在整个应用程序中保持一致的配色方案，我建议您学习添加主题或样式。这应该让你开始[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T22:03:00.513

使用 Html.fromHtml 设置文本样式。

```
mPodFolderPref.setTitle(Html.fromHtml("<font color='red'>" +  mPodFolderPref.getTitle() + "</font>"));
mPodFolderPref.setSummary(Html.fromHtml("<font color='red'>" +  mPodFolderPref.getSummary() + "</font>")); 
```

Html.fromHtml 可以为您做很多事情。

马尔

# cakephp - Cakephp致命错误渲染问题

> ID：14235186
> 
> 赞同：1
> 
> 时间：2013-01-09T12:26:30.593
> 
> 标签：cakephp

我使用的是 Cakephp 2.2.4 版，它无法呈现致命错误消息（它显示奇怪的字符）。当我从核心文件中删除行 'handler' => 'ErrorHandler::handleError' 时，PHP 会正确显示致命错误。

[这是我看到的屏幕截图的链接](http://i.imgur.com/qv3Hs.png)

这是我的核心文件的内容（与错误相关）： Configure::write('debug', 2);

```
Configure::write('Exception', array(
    'handler' => 'ErrorHandler::handleException',
    'renderer' => 'ExceptionRenderer',
    'log' => true
));
Configure::write('Error', array(
    'handler' => 'ErrorHandler::handleError',
     'level' => E_ALL & ~E_DEPRECATED & ~E_STRICT,
    'trace' => true
)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:20:27.543

更新到最近发布的 CakePHP 版本 2.2.5，它显然修复了 ExceptionHandler 中的一些问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-29T09:59:17.290

我刚刚检查并发现我引用了一个我没有加载的模型。加载模型（实际上是通过当前模型引用它）为我解决了这个问题。

# android - 如何将数据库更改更新到已安装的应用程序

> ID：14235188
> 
> 赞同：1
> 
> 时间：2013-01-09T12:26:36.117
> 
> 标签：android, android-sqlite

如果我对数据库进行任何更改，例如在我的 android 应用程序中添加新列。如果我已经在手机上安装了它。当我在移动设备上重新安装/更新该应用程序时，它不会更新数据库更改。

我的数据库代码是：

```
package com.screenmagic.smsmagicmobileapp;

import java.text.SimpleDateFormat;
import java.util.Date;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHandler extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "Test";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}
@Override
public void onCreate(SQLiteDatabase db) {
    Log.d(TAG, "onCreate OF DatabaseHandler");

    db.execSQL("DROP TABLE IF EXISTS history");
    String CREATE_SMS_HISTORY_TABLE = "CREATE TABLE  history("+
    "id INTEGER PRIMARY KEY AUTOINCREMENT, mobileNumber TEXT, smsText TEXT)";
    Log.d("Insert: ", "Table create query:: "+ CREATE_SMS_HISTORY_TABLE);
    db.execSQL(CREATE_SMS_HISTORY_TABLE);
    Log.d("Insert: ", "Table created ..");

}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS sms_history");
    onCreate(db);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:29:40.567

只需使用 onUpgrade（作为替代）方法，您就可以将数据库升级放在那里。这样，当应用程序已经安装时，现有数据都不会被吹走。

并确保您不会像目前正在做的那样丢弃桌子：

```
db.execSQL("DROP TABLE IF EXISTS sms_history"); 
```

请参阅此处的方法参考[以及](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)有关如何在[此处实现它的视频](http://www.youtube.com/watch?v=Yp0DTwrh1vQ)

# jquery - 如何在点击每个按钮时发送帖子？

> ID：14235191
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:26:47.900
> 
> 标签：jquery, html, jquery-mobile

我在 jquery mobile 中有五个按钮（我正在使用 get 进入页面），我想单击该按钮将帖子发送到具有按下按钮值的同一页面

```
 <div class="ui-grid-b">
            <div data-role="button" id="attack" value="attack" >Attack</div>
            <div data-role="button" id="intercept" value="intercept" >Intercept</div>
            <div data-role="button" id="follow" value="follow">Follow</div>
            <div data-role="button" id="go" value="go">Go</div>
            <div data-role="button" id="send_backup" value="send_backup">Send Backup</div>
        </div> 
```

我试图把它放在表单中，并且每个按钮都有 type="submit" 但它不起作用。如何在点击每个按钮时发送帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:14:43.243

代码将如下所示：

```
$('*[data-role="button"]').on('click',function(){

  var dataForm = $('form').serializeArray(); // if you need to send form data
  dataForm.push({name: 'action', value:$(this).attr('id')}); //add your button value

  $.ajax({
    type: "POST",
    url: window.location.pathname,
    data: dataForm
  })
  .success(function() { alert("success"); })
  .error(function() { alert("error"); });
}); 
```

[您可以在此处](http://jsfiddle.net/49dA9/1/)查看工作示例

因此，您必须使用 "[data-role="button"]" 选择器，然后发送带有按钮 ID 的 ajax 请求。

要获取表单数据，您可以使用[serializeArray()](http://api.jquery.com/serializeArray/)然后添加刚刚单击按钮的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:11:25.673

我认为解决您的问题的最佳方法是绑定一个函数以在按钮上运行，然后处理按下的按钮。像这样的东西：

```
$('.ui-grid-b div[data-role="button"]').click(function() {  
    var button_clicked = $(this).attr('id');
}); 
```

`button_clicked`然后将包含刚刚单击的按钮的 ID，以便您可以随意使用它...

# linux - 在 x86 ubuntu 上为 ARM 交叉编译 linux 内核模块

> ID：14235198
> 
> 赞同：5
> 
> 时间：2013-01-09T12:27:18.760
> 
> 标签：linux, makefile, arm

我想在我的 x86 ubuntu linux 上交叉编译一个 ARM 内核模块。我已经下载了内核源代码（linux 2.6.26，因为目标 ARM 机器正在运行这个 linux 版本）。我很容易得到手臂交叉编译器。如你看到的。

```
root@declspec-desktop:/var/www/module_test# arm-linux-gnueabi-
arm-linux-gnueabi-addr2line  arm-linux-gnueabi-cpp-4.5
arm-linux-gnueabi-gcov-4.5   arm-linux-gnueabi-ld.gold
arm-linux-gnueabi-ranlib     arm-linux-gnueabi-strip
arm-linux-gnueabi-ar         arm-linux-gnueabi-elfedit
arm-linux-gnueabi-gprof      arm-linux-gnueabi-nm
arm-linux-gnueabi-readelf    arm-linux-gnueabi-as
arm-linux-gnueabi-gcc        arm-linux-gnueabi-ld
arm-linux-gnueabi-objcopy    arm-linux-gnueabi-size       
arm-linux-gnueabi-c++filt    arm-linux-gnueabi-gcc-4.5
arm-linux-gnueabi-ld.bfd     arm-linux-gnueabi-objdump
arm-linux-gnueabi-strings 
```

以下是我的内核模块（hello_module.ko）编译（对于我的 x86 机器）的 Makefile，它工作正常。

```
obj-m += hello_module.o
KDIR := /lib/modules/$(shell uname -r)/build
#PWD:=$(shell pwd)

all:
        $(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules

clean:
        rm -rf *.o *.ko *.mod.* .c* .t* 
```

现在，为了交叉编译适用于 ARM 的 linux 2.6.26 的内核模块，我必须在原始工作 Makefile 中进行哪些更改？

linux源和linux头源有什么区别？每次我编译一些内核的东西时，我都会看到这些，但我仍然不明白。

我用谷歌搜索了一些文章，但它不会帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:52:53.303

我建议您在使用 hello_module 之前构建内核源代码。这将确认您的 arm 交叉编译器安装成功。

很多时候，工具链问题可以追溯到需要这些：

```
export CROSS_COMPILE=arm-linux-gnueabi- 

export ARCH=arm 
```

跨工具链安装时还需要更新 PATH，因此可以从执行的 make 中找到工具。CodeSourcery 安装可以为您做到这一点，但 PATH 更新仅在注销/登录后生效。

我不清楚你是如何得到上面的控制台输出的。如果问题仍然存在，我建议做类似的事情，并将结果作为评论发布。

```
printenv | grep PATH

whereis arm-linux-gnueabi-gcc

which arm-linux-gnueabi-gcc 
```

# django - 用于通用关系的 Django 表单。如何包括它们？

> ID：14235199
> 
> 赞同：4
> 
> 时间：2013-01-09T12:27:18.180
> 
> 标签：django, forms, django-forms, django-generic-views

我有一个电话模型，许多不同的模型经常将其用作通用关系。我不知道如何将它包含在这些模型的创建/更新表单中……在 forms.ModelForm 子类中包含额外字段的想法是好是坏……有点像这样：

```
###### models.py

class UpstreamContactModel(models.Model):
    client = models.ForeignKey(UpstreamClientModel,
            related_name='contacts')
    contact_type = models.CharField(max_length=50, default='Main', 
            blank=True, null=True)
    name = models.CharField(max_length=100, unique=True)
    job_title = models.CharField(max_length=50, blank=True, null=True)
    email = models.EmailField(blank=True, null=True)
    skype_id = models.CharField(max_length=30, blank=True, null=True)
    phones = generic.GenericRelation(Phone)
    notes = models.TextField(blank=True, null=True)

    def __unicode__(self):
        return self.name

    class Meta:
        verbose_name = 'Contact'

class Phone(models.Model):
    info = models.CharField('Eg. Office, Personal, etc', 
            max_length=15, blank=True)
    number = models.CharField('Phone numbes', max_length=20)
    # generic relationships so I can attach to other objects later on
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

    def __unicode__(self):
        return self.number

##### forms.py

class ContactForm(forms.ModelForm,  BaseValidationForm):
    info = forms.CharField(max_length=15)
    number = forms.CharField(max_length=20)

    class Meta:
        model = UpstreamContactModel

    def clean(self):
        ???

    def save(self):
        ??? 
```

我一直试图找出人们在涉及通用关系时如何处理 CRUD，但到目前为止我还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:48:09.610

如果您使用模型表单，您可以看到他们使用什么样的表单元素。

对于 content_type，它通常使用带有 ContentType.objects.all() 作为查询集的 ModelChoiceField，而 object_id 将是一个寻找正整数的 TextInput。如果您使用模型表单，我认为实际的通用访问器不会出现在表单中。

如果您想要一个比这更优雅的解决方案，我会考虑编写一个自定义表单字段或小部件来处理它。

我认为向 ModelForm 添加其他字段并不是一个不好的做法，事实上我认为这是一个很好的途径。覆盖 save 方法可能会给你你想要的功能。

# c# - 如何使用 c# 将字符串值存储到文本框中

> ID：14235200
> 
> 赞同：-3
> 
> 时间：2013-01-09T12:27:23.697
> 
> 标签：c#, .net, if-statement, textbox

这是我的代码，我不知道如何将性别值存储在`textbox.text`

```
string gender;
if (radio_male.Checked)
{
    gender = "Male";
}
if (radio_female.Checked)
{
    gender = "Female";
}
txtfirstname.Text = gender; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:33:02.423

`gender`未初始化。您可以使用[`?:`](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)运算符来减少代码。

```
string gender = radio_female.Checked ? "Female" : (radio_male.Checked ? "Male" : string.Empty);
txtfirstname.Text = gender; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T12:29:44.540

我猜你得到一个编译器错误，`gender`可能是未初始化的。您可以通过将空字符串设置为默认值来解决它：

```
string gender;
if (radio_male.Checked)
{
    gender = "Male";
}
else if (radio_female.Checked)
{
    gender = "Female";
}
else
{
    gender = ""; // or gender = string.Empty;
}
txtfirstname.Text = gender; 
```

你填写`txtfirstname`正确。（除了它应该是`txtGender`，不是吗？）

实际的问题是不同的：你不能在不给它赋值的情况下使用局部变量。C# 编译器不允许这样做（例如，据我所知，与 C 不同）以防止您在运行时遇到奇怪的错误。

`null`默认情况下，字段使用（具有默认值的值类型）初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:53:56.193

```
string gender = radio_male.Checked? "Male" : "Female";
txtGender.Text = gender 
```

我猜那是你的文本框名称..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:32:26.077

```
string gender = "";
if (radio_male.Checked)
{
    gender = "Male";
}
else if (radio_female.Checked)
{
    gender = "Female";
}
txtfirstname.Text = gender; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T12:32:14.453

将变量gender初始化为string.Empty后尝试。

# ios5 - Phonegap/Cordova 不显示相机

> ID：14235206
> 
> 赞同：3
> 
> 时间：2013-01-09T12:27:45.477
> 
> 标签：ios5, cordova, camera

我的第一个 ios 的 phonegap/cordova 应用程序有一个奇怪的问题

[我从http://docs.phonegap.com/en/2.3.0/cordova_camera_camera.md.html#camera.getPicture](http://docs.phonegap.com/en/2.3.0/cordova_camera_camera.md.html#camera.getPicture)复制粘贴了示例

和

[http://docs.phonegap.com/en/2.3.0/cordova_media_capture_capture.md.html#capture.captureImage](http://docs.phonegap.com/en/2.3.0/cordova_media_capture_capture.md.html#capture.captureImage)

但是当我按下任何按钮时，什么都没有发生，除非我之后双击 iPhone 上的“主页”按钮。

这是我的 index.html：

```
 <script src="assets/js/cordova.ios.js"></script>

    <script type="text/javascript" charset="utf-8">
    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 

    // Wait for Cordova to connect with the device
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready to be used!
    function onDeviceReady() {
        pictureSource = navigator.camera.PictureSourceType;
        destinationType = navigator.camera.DestinationType;
    }

    // Called when a photo is successfully retrieved
    function onPhotoDataSuccess(imageData) {
        // Uncomment to view the base64 encoded image data
        // console.log(imageData);

        // Get image handle
        var smallImage = document.getElementById('smallImage');

        // Unhide image elements
        smallImage.style.display = 'block';

        // Show the captured photo
        // The inline CSS rules are used to resize the image
        smallImage.src = "data:image/jpeg;base64," + imageData;
    }

    // Called when a photo is successfully retrieved
    function onPhotoURISuccess(imageURI) {
        // Uncomment to view the image file URI 
        // console.log(imageURI);

        // Get image handle
        var largeImage = document.getElementById('largeImage');

        // Unhide image elements
        largeImage.style.display = 'block';

        // Show the captured photo
        // The inline CSS rules are used to resize the image
        largeImage.src = imageURI;
    }

    // A button will call this function
    function capturePhoto() {
        // Take picture using device camera and retrieve image as base64-encoded string
        navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
            quality: 50,
            destinationType: destinationType.DATA_URL
        });
    }

    // A button will call this function
    function capturePhotoEdit() {
        // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
        navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
            quality: 20, allowEdit: true,
            destinationType: destinationType.DATA_URL
        });
    }

    // A button will call this function
    function getPhoto(source) {
        // Retrieve image file location from specified source
        navigator.camera.getPicture(onPhotoURISuccess, onFail, {
            quality: 50,
            destinationType: destinationType.FILE_URI,
            sourceType: source
        });
    }

    // Called if something bad happens.
    function onFail(message) {
        alert('Failed because: ' + message);
    }
    </script>
    <button onclick="capturePhoto();">Capture Photo</button>  
    <button onclick="capturePhotoEdit();">Capture Editable Photo</button>  
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button>  
    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button>  
    <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />  
    <img style="display:none;" id="largeImage" src="" />  

    <script type="text/javascript" charset="utf-8">

    // Called when capture operation is finished
    function captureSuccess(mediaFiles) {
        //var i, len;
        //for (i = 0, len = mediaFiles.length; i < len; i += 1) {
        //    //uploadFile(mediaFiles[i]);
        //}
        //navigator.notification.alert('Weee', null, 'Great success!');
    }

    // Called if something bad happens.
    function captureError(error) {
        //var msg = 'An error occurred during capture: ' + error.code;
        //navigator.notification.alert(msg, null, 'Uh oh!');
    }

    // A button will call this function
        function captureImage() {
        // Launch device camera application, 
        // allowing user to capture up to 2 images
        navigator.device.capture.captureImage(captureSuccess, captureError, { limit: 2     });
    }

    // Upload files to server
    function uploadFile(mediaFile) {
        var ft = new FileTransfer(),
            path = mediaFile.fullPath,
            name = mediaFile.name;

        ft.upload(path,
            "http://my.domain.com/upload.php",
            function (result) {
                console.log('Upload success: ' + result.responseCode);
                console.log(result.bytesSent + ' bytes sent');
            },
            function (error) {
                console.log('Error uploading file ' + path + ': ' + error.code);
            },
            { fileName: name });
    }
    </script>

    <button onclick="captureImage();">Capture Image</button> 
```

这是我的 config.xml：

```
 <name>yadda</name>

    <description>
        blabla
    </description>

    <author href="http://blabla.github.com"
    email="blabla@gmail.com">
        BlaBla
    </author>

    <icon src="icon.png" gap:role="default" />

    <feature name="http://api.phonegap.com/1.0/geolocation"/>
    <feature name="http://api.phonegap.com/1.0/network"/>
    <feature name="http://api.phonegap.com/1.0/file"/>
    <feature name="http://api.phonegap.com/1.0/camera"/>
    <feature name="http://api.phonegap.com/1.0/media"/>
    <feature name="http://api.phonegap.com/1.0/device"/>

    <preference name="orientation" value="portrait" />
    <preference name="webviewbounce" value="false" />
    <preference name="prerendered-icon" value="true" />

    <plugin name="Capture" value="CDVCapture" />
    <plugin name="Camera" value="CDVCamera" /> 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:48:18.070

是的！我终于让它工作了，我从 phonegap 2.3.0 降级到 2.0.0

对于任何有同样问题的人，这是我的最终代码：

索引.html

```
 <script src="assets/js/cordova-2.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">

        // Called when capture operation is finished
        //
        function captureSuccess(mediaFiles) {
            //var i, len;
            //for (i = 0, len = mediaFiles.length; i < len; i += 1) {
            //    //uploadFile(mediaFiles[i]);
            //}
            //navigator.notification.alert('Weee', null, 'Great success!');
        }

        // Called if something bad happens.
        // 
        function captureError(error) {
            //var msg = 'An error occurred during capture: ' + error.code;
            //navigator.notification.alert(msg, null, 'Uh oh!');
        }

        // A button will call this function
        //
        function captureImage() {
            // Launch device camera application, 
            // allowing user to capture up to 2 images
            navigator.device.capture.captureImage(captureSuccess, captureError, { limit: 2 });
        }

        // Upload files to server
        function uploadFile(mediaFile) {
            var ft = new FileTransfer(),
                path = mediaFile.fullPath,
                name = mediaFile.name;

            ft.upload(path,
                "http://my.domain.com/upload.php",
                function (result) {
                    console.log('Upload success: ' + result.responseCode);
                    console.log(result.bytesSent + ' bytes sent');
                },
                function (error) {
                    console.log('Error uploading file ' + path + ': ' + error.code);
                },
                { fileName: name });
        }
    </script>

    <script type="text/javascript" charset="utf-8">

        var pictureSource;   // picture source
        var destinationType; // sets the format of returned value 

        // Wait for Cordova to connect with the device
        //
        function onLoad() { document.addEventListener("deviceready", onDeviceReady, false); }

        // Cordova is ready to be used!
        //
        function onDeviceReady() {
            pictureSource = navigator.camera.PictureSourceType;
            destinationType = navigator.camera.DestinationType;
            alert("device is ready");
        }

        // Called when a photo is successfully retrieved
        //
        function onPhotoDataSuccess(imageData) {
            // Uncomment to view the base64 encoded image data
            // console.log(imageData);

            // Get image handle
            //
            var smallImage = document.getElementById('smallImage');

            // Unhide image elements
            //
            smallImage.style.display = 'block';

            // Show the captured photo
            // The inline CSS rules are used to resize the image
            //
            smallImage.src = "data:image/jpeg;base64," + imageData;
        }

        // Called when a photo is successfully retrieved
        //
        function onPhotoURISuccess(imageURI) {
            // Uncomment to view the image file URI 
            // console.log(imageURI);

            // Get image handle
            //
            var largeImage = document.getElementById('largeImage');

            // Unhide image elements
            //
            largeImage.style.display = 'block';

            // Show the captured photo
            // The inline CSS rules are used to resize the image
            //
            largeImage.src = imageURI;
        }

        // A button will call this function
        //
        function capturePhoto() {
            // Take picture using device camera and retrieve image as base64-encoded string
            navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
                quality: 50,
                destinationType: destinationType.DATA_URL
            });
        }

        // A button will call this function
        //
        function capturePhotoEdit() {
            // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
            navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
                quality: 20, allowEdit: true,
                destinationType: destinationType.DATA_URL
            });
        }

        // A button will call this function
        //
        function getPhoto(source) {
            // Retrieve image file location from specified source
            navigator.camera.getPicture(onPhotoURISuccess, onFail, {
                quality: 50,
                destinationType: destinationType.FILE_URI,
                sourceType: source
            });
        }

        // Called if something bad happens.
        // 
        function onFail(message) {
            alert('Failed because: ' + message);
        }

    </script>
</head>
<body onLoad="onLoad()">
    <button onclick="capturePhoto();">Capture Photo</button> <br><br>
    <button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br><br>
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br><br>
    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br><br>
    <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
    <img style="display:none;" id="largeImage" src="" />
    <br><button onclick="captureImage();">Capture Image</button> <br> 
```

配置文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<widget xmlns       = "http://www.w3.org/ns/widgets"
xmlns:gap   = "http://phonegap.com/ns/1.0"
id      = "com.phonegap.getting.started"
version     = "1.0.0">

<name>bla</name>

<description>
    bla
</description>

<author href="http://bla.github.com"
    email="bla@gmail.com">
    bla
</author>

<icon src="icon.png" gap:role="default" />

<feature name="http://api.phonegap.com/1.0/geolocation"/>
<feature name="http://api.phonegap.com/1.0/network"/>
  <feature name="http://api.phonegap.com/1.0/file"/>
  <feature name="http://api.phonegap.com/1.0/camera"/>
  <feature name="http://api.phonegap.com/1.0/media"/>
  <feature name="http://api.phonegap.com/1.0/device"/>

  <feature name="http://api.phonegap.com/1.0/notification"/>
  <feature name="http://api.phonegap.com/1.0/battery"/>

<preference name="orientation" value="portrait" />
<preference name="webviewbounce" value="false" />
<preference name="prerendered-icon" value="true" />
  <preference name="phonegap-version" value="2.0.0" />

  <preference name="fullscreen" value="false" />
  <preference name="stay-in-webview" value="false" />
  <preference name="ios-statusbarstyle" value="default" />
  <preference name="android-minSdkVersion" value="7" />
  <preference name="android-installLocation" value="internalOnly" />
  <preference name="target-device" value="universal" />
  <preference name="autohide-splashscreen" value="true" />
  <preference name="load-url-timeout" value="60000" />
  <preference name="show-splashscreen-spinner" value="true" />
  <preference name="show-splash-screen-spinner" value="true" />
  <preference name="allow-inline-media-playback" value="false" />
  <preference name="launch-mode" value="standard" />

  <plugin name="Capture" value="CDVCapture" />
  <plugin name="Camera" value="CDVCamera" />
</widget> 
```

谢谢！给所有帮助过的人:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:40:33.320

我对ios没有任何经验，但我认为你最好做一个简单的代码来打开相机之类的东西

```
 navigator.camera.getPicture(onSuccess, onFail, { quality: 50, 
        destinationType: Camera.DestinationType.FILE_URI }); 

    function onSuccess(imageURI) {
        var image = document.getElementById('myImage');
        image.src = imageURI;
    }

    function onFail(message) {
        alert('Failed because: ' + message);
    } 

```

如果这工作正常，请逐步添加您的更多代码。

这些是在 xml 中使用的首选项

 `````
 <preference name="orientation" value="landscape" />
    <preference name="fullscreen" value="false" />
    <preference name="phonegap-version" value="2.0.0" />
    <preference name="webviewbounce" value="false" />
    <preference name="stay-in-webview" value="false" />
    <preference name="ios-statusbarstyle" value="default" />
    <preference name="android-minSdkVersion" value="7" />
    <preference name="android-installLocation" value="internalOnly" />
    <preference name="prerendered-icon" value="false" />
    <preference name="target-device" value="universal" />
    <preference name="autohide-splashscreen" value="false" />
    <preference name="load-url-timeout" value="60000" />
    <preference name="show-splashscreen-spinner" value="true" />
    <preference name="show-splash-screen-spinner" value="true" />
    <preference name="allow-inline-media-playback" value="false" />
    <preference name="launch-mode" value="standard" />

    <plugin name="Camera" value="CDVCamera" />
    <feature name="http://api.phonegap.com/1.0/camera"/>
    <feature name="http://api.phonegap.com/1.0/file"/>
    <feature name="http://api.phonegap.com/1.0/media"/>
    <feature name="http://api.phonegap.com/1.0/notification"/>
    <feature name="http://api.phonegap.com/1.0/battery"/>
    <feature name="http://api.phonegap.com/1.0/device"/> 
````  `* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T12:02:27.173

这可能是由于PhoneGap 下载版本与Camera 示例代码不匹配所致。您可以在 Phonegap.com 的右上角查看相机示例代码版本，如下图所示。

![在此处输入图像描述](../Images/3eb74a69e03e177cd32a520718b36a23.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T18:32:51.330

尝试在您的文档中添加一个正文标签，例如：

```
<body onLoad="onLoad()"> 
```

然后将设备就绪侦听器添加到 onLoad 函数中：

```
function onLoad() { document.addEventListener("deviceready", onDeviceReady, false); } 
```

这是因为您要确保在检查 deviceready 状态之前加载所有 DOM 元素。``

# linux - getifaddrs 仅解析来自以太网接口 (eth) 或 wlan 接口的 IP

> ID：14235208
> 
> 赞同：1
> 
> 时间：2013-01-09T12:27:50.840
> 
> 标签：linux, ip-address, ipconfig

我使用了以下链接 [http://www.linuxhowtos.org/manpages/3/getifaddrs.htm](http://www.linuxhowtos.org/manpages/3/getifaddrs.htm)中的程序。

但它会打印所有 IP，如 loopback、eth0、eth1 lo 等

现在我只需要获取活动的 ip，excpet loopback ip ex

$iffconfig eth6 Link encap:Ethernet HWaddr 08:00:27:47:99:da
inet addr:10.0.2.15 Bcast:10.0.2.255 Mask:255.255.255.0 inet6 addr:fe80::a00:27ff:fe47:99da/64 Scope:Link 作为 ifconfig 提供活动接口和相应的 IP

必须在此代码中进行哪些更改才能使上述内容正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:48:26.950

改变

```
 if (ifa->ifa_addr == NULL)
        continue;

    family = ifa->ifa_addr->sa_family; 
```

和

```
 if (ifa->ifa_addr == NULL)
        continue;

    if ((strcmp("lo", ifa->ifa_name) == 0) ||
        !(ifa->ifa_flags & (IFF_RUNNING)))
        continue;

    family = ifa->ifa_addr->sa_family; 
```

并在其他包含之后添加此行

```
#include <net/if.h> 
```

添加的行只是检查“lo”接口名称，包含在`ifa->ifa_name`中，并检查接口的标志。测试 IFF_RUNNING 位（查看`net/if.h`更多定义）将只返回正在运行的接口。

如果您想检查接口的其他功能，只需检查此标志（取自`net/if.h`）

*   IFF_UP 接口正在运行。
*   IFF_BROADCAST 有效的广播地址集。
*   IFF_DEBUG 内部调试标志。
*   IFF_LOOPBACK 接口是一个环回接口。
*   IFF_POINTOPOINT 接口是点对点链接。
*   IFF_RUNNING 分配的资源。
*   IFF_NOARP 无 arp 协议，未设置 L2 目标地址。
*   IFF_PROMISC 接口处于混杂模式。
*   IFF_NOTRAILERS 避免使用拖车。
*   IFF_ALLMULTI 接收所有多播数据包。
*   IFF_MASTER 负载平衡包的主控。
*   IFF_SLAVE 负载平衡包的从站。
*   IFF_MULTICAST 支持多播
*   IFF_PORTSEL 能够通过 ifmap 选择媒体类型。
*   IFF_AUTOMEDIA 自动媒体选择激活。
*   IFF_DYNAMIC 接口关闭时地址丢失。
*   IFF_LOWER_UP 驱动程序向 L1 发出信号（自 Linux 2.6.17 起）
*   IFF_DORMANT 驱动程序信号休眠（自 Linux 2.6.17 起）
*   IFF_ECHO Echo 发送数据包（Linux 2.6.25 起）

**编辑**

如果您需要区分 IPV6 GUA 和 ULA 地址，请使用此宏

```
#ifndef IN6_IS_ADDR_GLOBAL
#define IN6_IS_ADDR_GLOBAL(a) \
        ((((__const uint32_t *) (a))[0] & htonl(0x70000000)) \
        == htonl (0x20000000))
#endif /* IS ADDR GLOBAL */

#ifndef IN6_IS_ADDR_ULA
#define IN6_IS_ADDR_ULA(a) \
        ((((__const uint32_t *) (a))[0] & htonl(0xfe000000)) \
        == htonl (0xfc000000))
#endif /* IS ADDR ULA */ 
```

参数必须取自`((sockaddr_in6 *)ifa->ifa_addr)->sin6_addr;`

# android - 对话框使 Android 服务崩溃

> ID：14235210
> 
> 赞同：1
> 
> 时间：2013-01-09T12:27:53.313
> 
> 标签：android, service, popup

**代码**

```
 this.getApplicationContext().getContentResolver().registerContentObserver(
              android.provider.Settings.System.CONTENT_URI, 
              true, new ContentObserver(new Handler()) {
                public void onChange(boolean selfChange) {
                  Toast.makeText(audioServices.this, "Working..", Toast.LENGTH_SHORT).show();
                  //dispVC();
                  dialog = new Dialog(audioServices.this);
                    dialog.setContentView(R.layout.vc);

                    // set the custom dialog components - text, image and button
                    Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
                    // if button is clicked, close the custom dialog
                    dialogButton.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                            dialog.dismiss();
                        }
                    });
                      dialog.show();
                  //System.out.println("Works!");
                }
            }); 
```

这是[logcat](http://pastebin.com/ZLmpMzGF)。笔记 -`01-09 17:54:43.137: E/AndroidRuntime(7210): at com.torcellite.popupvc.audioServices$1.onChange(audioServices.java:59)`

第 59 行是`dialog.show();`

**- -编辑 - -**

所以，我把代码改成了这个。

```
Intent dialogIntent = new Intent(audioServices.this, vcDialog.class);
                    dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    audioServices.this.startActivity(dialogIntent); 
```

我的应用程序仍然崩溃。这是[logcat](http://pastebin.com/3p1Z9HvY)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:31:42.000

服务没有任何 UI 元素，因此无法显示对话框。只能从 Activity 上下文添加对话框。您可以调用具有 UI 的活动，如果您愿意，可以使用对话框主题，或者最好创建一个通知，这是 Android 警报的首选选项。

**编辑**

根据您的新代码，您的意图很好。而是将以下内容添加到应用程序标记中的清单中：

```
<activity android:name=".vcDialog" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:34:11.000

使用活动上下文而不是服务上下文。也可以使用 DialogFragments 代替对话框。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T12:31:25.707

```
dialogIntent.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
dialogIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

把这些行代替

```
dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

行并尝试像这样调用活动

```
this.getApplicationContext().startActivity(dialogIntent) 
```

# c# - 通过 WCF 中的 OperationContract 发送 DbConnection

> ID：14235213
> 
> 赞同：0
> 
> 时间：2013-01-09T12:27:59.957
> 
> 标签：c#, .net, wcf, dbconnection, operationcontract

是否有可能将 DbConnection 作为 WCF 中 OperationConstract 的参数发送？因为我收到异常“Type System.Data.SqlClient.SqlConnection with data contract name SqlConnection:http://schemas.datacontract.org/2004/07/System.Data.SqlClient. is not expected.考虑使用DataContractResolver或添加任何已知类型列表中静态未知的类型 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T12:31:20.940

不，那永远行不通。A`SqlConnection`是一个本地连接的包装器，它只在`AppDomain`那个机器上、在那个进程中、在那个机器上才有意义。充其量您可以发送连接字符串，但这并不能保证其他用户*可以*连接（到服务器/防火墙的视线、帐户身份等）。

坦率地说，我会发现*想*要这样做是有问题的。服务应该公开*数据*，而不是像内部连接这样的内部机制。

# linux - 如何识别文件夹然后决定是否在bash中移动它

> ID：14235218
> 
> 赞同：3
> 
> 时间：2013-01-09T12:28:15.130
> 
> 标签：linux, bash

我有一个 linux 问题，我需要一些帮助...

我有一个为我创建目录的应用程序。我想编写一个查看这些目录的脚本，检查目录是否以某个字符串开头，如果是，请不要理会它，如果不是，则移动它...

所以，从逻辑的角度来看：

如果 directoryname 以“ABC”开头，那么什么都不做
将
文件夹移动到 sharedrive

这个脚本将进入 cron.hourly 文件夹，因此它会自动为我运行。

任何帮助是极大的赞赏！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:58:56.420

```
find . -mindepth 1 -maxdepth 1 -type d ! -name 'ABC*' -exec mv -i {} ./dest \; 
```

如果您可以为不想移动的目录确定一个简单的模式，您甚至可以使用 bash 的 extglob 设置：

```
shopt -s extglob
mv !(ABC)*/ ./dest/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:44:24.873

对于这样一个简单的模式，只需使用`find`,

```
find * -type d ! -name "ABC*" | while read f; do mv $f /tmp/test2; done 
```

您也可以使用类似的东西，但由于 find 的递归方式可能会出现问题。

```
find * -type d ! -name "ABC*" -exec mv {} /tmp/test2 \; 
```

因此，您可以改为将目录列表输出到文件，*然后*移动它们。

# objective-c - 在 Objective-C 中暂停和恢复下载

> ID：14235221
> 
> 赞同：2
> 
> 时间：2013-01-09T12:28:22.510
> 
> 标签：objective-c

除了暂停/恢复功能外，一切似乎都运行良好。我的问题是，当下载尝试从中断的地方继续时，设置标题范围但无法正常工作。当我下载 zip 文件并解压时，解压后的文件扩展名为 download.zip.cpgz。请解决我的问题。

我的代码：

```
 **UIWebView* webView = [[UIWebView alloc] initWithFrame:CGRectZero];
    NSString* secretAgent = [webView stringByEvaluatingJavaScriptFromString:@"navigator.userAgent"];
     NSLog(@"user aggent %@",secretAgent);
    if([[NSFileManager defaultManager] fileExistsAtPath:_path]){
        NSDictionary *fileDictionary = [[NSFileManager defaultManager] fileAttributesAtPath:_path traverseLink:YES];
        unsigned long long int h = [fileDictionary fileSize];
        _textField.text = self.textField.text;
        //[self performSelectorInBackground:@selector(downloadZipfile) withObject:nil];
//        NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:_textField.text]
//                                  
//                                                  cachePolicy:NSURLRequestUseProtocolCachePolicy
//                                  
//                                              timeoutInterval:60.0];
        //NSFileSize *fileSize = [NSFileSize]
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:self.textField.text]];
        NSString *range = @"bytes=";
        range = [range stringByAppendingString:[[NSNumber numberWithInt:h] stringValue]];
        range = [range stringByAppendingString:@"-"];
        [request setHTTPMethod:@"GET"];
        [request setValue:@"keep-live"      forHTTPHeaderField:@"Connection"];
        [request setValue:range     forHTTPHeaderField:@"Keep-Alive"];
        [request setValue:secretAgent       forHTTPHeaderField:@"User-Agent"];
        [request setValue:range forHTTPHeaderField:@"Range"];
                NSLog(@"range set %@",range);

        // create the connection with the request

        // and start loading the data
       _downloadConeection=[[NSURLConnection alloc] initWithRequest:request delegate:self];** 
```

# .net - Azure 网站中的缓存策略

> ID：14235227
> 
> 赞同：3
> 
> 时间：2013-01-09T12:28:45.427
> 
> 标签：.net, asp.net-mvc, azure, azure-web-app-service

我有一个想要发布到 Azure 网站的简单项目。我需要对一些值进行一些基本的缓存以加快速度。

在这种情况下缓存数据的正确策略是什么？我想只要我保持免费或保留状态，我就可以使用简单的标准网络缓存，因为它是一台机器，但是如果我想使用共享的多个实例会发生什么？分布式缓存真的可用于网站吗？对于简单的缓存，我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:43:44.990

据此[，](https://stackoverflow.com/a/11083495/304832)您似乎无法使用共享/分布式缓存。那改变了吗？你有一个链接说 Azure 支持他们的 2 个网站缓存方案中的任何一个吗？

只要你只有1个实例，你是对的，使用正常的 outputCache 应该没问题。如果您向外扩展至 2 个或更多实例，您可能必须从网站迁移到托管服务才能使用其他 2 种缓存策略中的任何一种。Azure 没有为网站提供与托管服务一样的全套功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T20:09:29.237

这是我的 2 美分，基于 Dan 的回答下的简短讨论。截至 2013 年 7 月，我刚刚将我的网站/Web 应用程序部署到 Azure。这是一种足球（我们的美国朋友的足球:-)）预测游戏。它使用缓存的方式在缓存中存储大量 POCO 对象（如匹配列表、玩家列表等）。这不是一个全新的应用程序，我们在本地硬件上运行了 2 个赛季（一个农场中的 2 个服务器，恕我直言有点矫枉过正，SQL db）。现在我们正在以共享模式在单个实例上运行。新一季将于下周开始，如果我们发现单个实例还不够，我们准备扩大规模。

所以我终于要缓存了。我们选择了共享缓存。如何设置它是有据可查的，虽然我个人的感觉是文档跟不上 Azure 发展的速度。

将项目放入和取出共享缓存非常简单，以及如何在 web.config 中配置它。我们不得不付出一些努力来找到一种方法，如何在您需要时从您的应用程序中清除整个缓存 - 据我所知，没有办法枚举已经在缓存中的项目。最后，我们最终得到了一个非常简单的解决方案，每当您将任何内容放入缓存时，您只需将密钥记在一边，当您需要清除整个缓存时，您就可以使用它。

现在，我不得不说我不是为这个 Azure 托管支付账单的人，我没有在 Azure 门户上看到当前的账单，但我显然担心整体价格。我不太清楚的是使用共享缓存的成本。尽管我不完全确定它是否真的适用，但我花了一些时间才找到一些定价表。我无法在 Azure 价格计算器中看到这一点。

回到我在 Dan 的回答下的评论 - 我确实相信有很多开发人员在中小型网站上工作，他们使用标准 HttpCache 作为放置 POCO 对象以加快访问速度的地方。在此类示例中，整体缓存大小可能高达 50 MB（显然取决于您使用缓存的方式）。这样的网站在单个实例上可能没问题，但是嘿 - 2 个或更多实例很糟糕，我希望在需要扩大规模时做好准备。对于这种情况，我缺少关于选择哪种缓存以及成本多少的明确指导。

# java - GregorianCalendar 上的内存泄漏

> ID：14235228
> 
> 赞同：0
> 
> 时间：2013-01-09T12:28:48.343
> 
> 标签：java, jsp, tomcat

我们遇到此错误，JSP 页面变为空白（白色）：

> minimumDaysInFirstWeek=1,ERA=1,YEAR=2013,MONTH=0,WEEK_OF_YEAR=2,WEEK_OF_MONTH=2,DAY_OF_MONTH=7,DAY_OF_YEAR=7,DAY_OF_WEEK=2,DAY_OF_WEEK_IN_MONTH=1,AM_PM=1,HOUR=2,HOUR_OF_DAY= 14,MINUTE=58,SECOND=48,MILLISECOND=420,ZONE_OFFSET=36000000,DST_OFFSET=3600000]]) 但在 Web 应用程序停止时无法将其删除。这很可能造成内存泄漏。

建议的解决方案是：

*   每次`Calendar`需要 a 时使用新实例或

*   检查一些钩子`ResultSet.close`是否足以调用`ThreadLocal.remove()`

但是，在我们的例子中，我们需要重现错误，因此可以测试修复，而无需无限期地等待错误再次发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:32:49.080

给定的消息不是您的问题的原因。

Tomcat 只是通知可能存在内存泄漏（这一定不是真的）。每次关机时都会出现这个错误（试试看）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:36:48.960

除了@Uwe Plonus 给出的答案，我可以说这是在应用程序停止时发生的。因此，除非您在不重新启动 Tomcat 的情况下多次停止和启动您的应用程序，否则这并不是那么有趣。如果这种情况发生在 Tomcat 在关闭期间关闭应用程序时，则此内存泄漏无关紧要：tomcat 本身将立即死亡。

# java - 如何进行轮询并获取数据库中的传入消息

> ID：14235229
> 
> 赞同：0
> 
> 时间：2013-01-09T12:28:49.203
> 
> 标签：java, object, methods, plsql, polling

传入的数据必须反馈到轮询方法中，并且还应该为另一个类进一步处理。

```
public List<KAAMessage> fullPoll() throws Exception {

    Statement st = dbConnection.createStatement();      
    ResultSet rs = st.executeQuery("select * from msg_new_to_bde where ACTION = 804 order by SEQ DESC");    
    List<KpiMessage> pojoCol = new ArrayList<KpiMessage>();
    while (rs.next()) {
        KpiMessage filedClass = convertRecordsetToPojo(rs);
        pojoCol.add(filedClass);
    }
        return pojoCol;
}

/**
 * Converts a provided record-set to a {@link KpiMessage}.
 * 
 * The following attributes are copied from record-set to pojo:
 * 
 * <ul>
 * <li>SEQ</li>
 * <li>TABLENAME</li>
 * <li>ENTRYTIME</li>
 * <li>STATUS</li>
 * </ul>
 * 
 * @param rs
 *            the record-set to convert
 * @return the converted pojo class object
 * @throws SQLException
 *             if an sql error occurs during processing of recordset
 */
private KpiMessage convertRecordsetToPojo(ResultSet rs) throws SQLException {

    KpiMessage msg = new KpiMessage();
    int sequence = rs.getInt("SEQ");
    msg.setSequence(sequence);
    int action = rs.getInt("ACTION");
    msg.setAction(action);
    String tablename = rs.getString("TABLENAME");
    msg.setTableName(tablename);
    Timestamp entrytime = rs.getTimestamp("ENTRYTIME");
    Date entryTime = new Date(entrytime.getTime());
    msg.setEntryTime(entryTime);
    Timestamp processingtime = rs.getTimestamp("PROCESSINGTIME");
    if (processingtime != null) {
        Date processingTime = new Date(processingtime.getTime());
        msg.setProcessingTime(processingTime);
    }
    String keyInfo1 = rs.getString("KEYINFO1");
    msg.setKeyInfo1(keyInfo1);
    String keyInfo2 = rs.getString("KEYINFO2");
    msg.setKeyInfo2(keyInfo2);
    return msg;
} 
```

此类具有从数据库读取消息的 Poll() 方法。在数据库中，我将 SequeceID 作为唯一编号，并且它会不断增加新数据，但是如何获取这些新消息并将其反馈给轮询？

PS：如果您拒绝投票或关闭我的帖子，请发表评论，因为我是新来的，我想知道详细信息。

这是为 Poll() 方法运行线程的控制器类。

```
public class RunnableController {

/** Here This Queue initializes the DB and have the collection of incoming message
 * 
 */
private static Collection<KaMessage> incomingQueue = new ArrayList<KAMessage>();
private Connection dbConncetion;
private ExecutorService threadExecutor;

private void initializeDb()
{
    //catching exception must be adapted - generic type Exception prohibited
    DBhandler con = new DBhandler();
    try {
        dbConncetion = con.initializeDB();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private void initialiseThreads()
{       
    try {

        threadExecutor = Executors.newFixedThreadPool(10);
             PollingSynchronizer read = new PollingSynchronizer(incomingQueue, 
dbConncetion);
        threadExecutor.submit(read);

    }catch (Exception e){
    e.printStackTrace();
    }

}

private void shutDownThreads()
{       
    try {
        threadExecutor.shutdown();
        dbConncetion.close();

    }catch (Exception e){
    e.printStackTrace();
    }

}

/** Here This Queue passes the messages and have the collection of outgoing message
 * 
 */

  //    private Collection<KpiMessage> outgingQueue = new ArrayList<KpiMessage>();

/**
 * Main
 * 
 * @param args
 * @throws InterruptedException 
 */
public static void main(String[] args) throws InterruptedException {
    RunnableController controller = new RunnableController();

    System.out.println(incomingQueue.size());

    controller.initializeDb();
    controller.initialiseThreads();
            System.out.println("Repetetive polling for each 6 seconds");
        KpiProcessor kp = new KpiProcessor();
    try {
    } catch (Exception e) {
        e.printStackTrace();
    }
    }

     } 
```

# batch-file - 从文件的每一行中删除一些分隔符

> ID：14235236
> 
> 赞同：0
> 
> 时间：2013-01-09T12:29:21.963
> 
> 标签：batch-file

我有一个需要加载到数据库中的文件。它有一个管道 ( `|`) 分隔符，但是每行包含不同数量的管道。使用批处理脚本，如何从每行中删除管道，以便每行上有相同数量的管道？

文件示例：

```
1|2|3||||||  
4|5|6|||  
7|8|||||| 
```

假设我只希望每行有 5 个管道，所以它看起来像：

```
1|2|3|||  
4|5|6|||  
7|8|||| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:43:28.363

**更新** 请参阅第二个解决方案和限制更新。

* * *

示例 file.txt 内容

```
A|B|C|D|E|F|G
1|2|3|4|5|6|7
!|@|#|$|%|^|&
]1|]2|]3|]4|]5|]6|]7

|Two||Four||||Eight

!@$%^&%^*(){}|[]';/.,<>/|
Lonely||||||||||||||||||
Sep|er|ate| From| Th|e |W||orld | | 
```

* * *

**第一个解决方案**

这是一种简单的方法来做你想做的事。特殊字符应该没有任何问题。

限制

1.  它目前只支持最多~~24~~ 25 列。`%%A to %%Y`
2.  ~~第一个值可能不以 开头`]`。~~替换`for /F "tokens=1,* delims=]" %%Y in ('type file.txt ^| find /v /n ""') do (`为`for /F "delims=" %%Z in ('type file.txt') do (`。
3.  “空”字段只能出现在每行的末尾。**见第二个解决方案。**
4.  不保留文件中的空行。（如果需要，可以修复此问题。）

只需指定要保留的列数和列。例如`tokens=3-5,12,48-50`将仅选择列 3、4、5、12、48、49、50。确保添加或删除变量以匹配所需的输出。`echo %%A^|%%B^|%%D^|%%C^|%%G^|%%E^|%%F`. 请注意，列也可以在 echo 语句中重新排序。

```
@echo off
setlocal DisableDelayedExpansion
for /F "delims=" %%Z in ('type file.txt') do (
    for /F "tokens=1-5 delims=|" %%A in ("%%Z") do (
        echo %%A^|%%B^|%%C^|%%D^|%%E
    )
)
endlocal
pause >nul 
```

您可以将 .bat 文件的输出重定向到新文件`Script.bat>output.txt`，或者通过附加`>>output.txt`到 echo 行将 echo 命令输出到文件。

示例输出：

```
A|B|C|D|E
1|2|3|4|5
!|@|#|$|%
]1|]2|]3|]4|]5
Two|Four|Eight||                  <-- Note that this line exhibits limit 3.
!@$%^&%^*(){}|[]';/.,<>/|||
Lonely||||
Sep|er|ate| From| Th 
```

* * *

**第二种解决方案**

仅共享限制**1**和**4**。目前在现有空白列中添加空格以保留所有列。它们可以通过进一步的代码更改来删除，但除非 OP 需要，否则不会添加。

```
@echo off
setlocal EnableExtensions DisableDelayedExpansion
for /F "delims=" %%Z in ('type file.txt') do (
    set "xLine=|%%Z"
    call :Parse xLine
)
endlocal
pause >nul
goto :eof

:Parse
call set "xLine=%%%~1:||=| |%%"
for /F "tokens=1-5 delims=|" %%A in ("%xLine%") do (
    echo %%A^|%%B^|%%C^|%%D^|%%E
)
goto :eof 
```

示例输出：

```
A|B|C|D|E
1|2|3|4|5
!|@|#|$|%
]1|]2|]3|]4|]5
 |Two| |Four|
!@$%^&%^*(){}|[]';/.,<>/|||
Lonely| | | |
Sep|er|ate| From| Th 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T23:06:07.787

没有直接的方法来实现这个过程，所以必须修改每个字符以便计算每行中的管道数。它工作，但它有点慢。

```
@echo off
setlocal EnableDelayedExpansion
rem Number of desired pipes
set limit=5
for /F "delims=" %%a in (input.txt) do (
   set "line=%%a"
   rem Get position of last character
   set last=0
   for /L %%b in (12,-1,0) do (
      set /A "last|=1<<%%b"
      for %%c in (!last!) do if "!line:~%%c,1!" equ "" set /A "last&=~1<<%%b"
   )
   rem Copy each character to result, but just %limit% number of pipes
   set pipes=0
   set result=
   for /L %%c in (0,1,!last!) do (
      if "!line:~%%c,1!" neq "|" (
         set "result=!result!!line:~%%c,1!"
      ) else (
         set /A pipes+=1
         if !pipes! leq %limit% set "result=!result!|"
      )
   )
   echo !result!
) 
```

如果输入行包含感叹号，以前的程序将失败。

输出：

```
1|2|3|||
4|5|6|||
7|8|||| 
```

安东尼奥

# android - 如何使用上下文菜单获取 Edittext 数据？

> ID：14235243
> 
> 赞同：1
> 
> 时间：2013-01-09T12:29:42.263
> 
> 标签：android, android-intent, contextmenu, android-edittext

我想通过单击“编辑”使用上下文菜单选项获取 EditText 值。我的代码：

这是我创建的上下文菜单选项，代码：

```
case R.id.Edit_Note:

                 Intent intent2 = new Intent(this, Add_Task.class);
                 Cursor cursor = (Cursor) this.getListAdapter().getItem((int) info.id);
                 cursor.moveToPosition(itemPosition);
                 int content = cursor.getInt(0);
                 intent2.putExtra("content", content );
                 startActivity(intent2);

                break; 
```

这是我得到意图的地方：

```
 title = (TextView) findViewById(R.id.Listname);
    Title_Edit = (EditText)findViewById(R.id.title_Edit);

    content = (TextView) findViewById(R.id.content);
    Content_Edit = (EditText)findViewById(R.id.content_Edit);

    duedate = (Button)findViewById(R.id.duedate);

    duedatetext = (TextView)findViewById(R.id.duedatetext);

    title = (TextView) findViewById(R.id.Listname);
    title_Edit = (EditText)findViewById(R.id.title_Edit);

    content = (TextView) findViewById(R.id.content);
    content_Edit = (EditText)findViewById(R.id.content_Edit);

    duedate = (Button)findViewById(R.id.duedate);

    duedatetext = (TextView)findViewById(R.id.duedatetext);

    Intent intent2 = getIntent();
    int allcontent = intent2.getIntExtra("Content", 0);

    System.out.println(allcontent + "Intent ID");

    Database_Notepad db = new Database_Notepad(Add_Task.this);

     Cursor c = db.GetNote(allcontent);

     title_Edit.setText(c.getString(0));
     content_Edit.setText(c.getString(1));
     duedatetext.setText(c.getShort(2)); 
```

我收到错误`cursorIndexoutofbound`：：

```
Index 0 requested with a size of 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:30:53.427

采用

```
 int allcontent = intent2.getIntExtra("content", 0); 
```

代替

```
 int allcontent = intent2.getIntExtra("Content", 0); 
```

因为您正在使用`content`键在 Intent 中发送值，但尝试使用它`Content`

# rest - 使用 JSONP 连接 REST 和 GWT 时出错

> ID：14235245
> 
> 赞同：0
> 
> 时间：2013-01-09T12:29:44.633
> 
> 标签：rest, gwt, jsonp

我创建了一个 REST Web 服务，然后尝试使用 JSNOP 通过 GWT 访问它。我没有得到结果字符串。

我得到了铬的回应。以下是我通过单击检查元素-> 网络-> 获取-> 标头从 chrome 获得的

```
Request URL:http://localhost:8080/RestWeb/webresources/generic/get?callback=__gwt_jsonp__.P0.onSuccess
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:JSESSIONID=f2976e5c04000cb9b46eb992128f
Host:localhost:8080
Referer:http://127.0.0.1:8888/Mygwtclientapplication.html?gwt.codesvr=127.0.0.1:9997
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Query String Parametersview URL encoded
callback:__gwt_jsonp__.P0.onSuccess
Response Headersview source
Content-Type:application/json
Date:Wed, 09 Jan 2013 12:00:40 GMT
Server:GlassFish Server Open Source Edition 3.1.2.2
Transfer-Encoding:chunked
X-Powered-By:Servlet/3.0 JSP/2.2 (GlassFish Server Open Source Edition 3.1.2.2 Java/Sun Microsystems Inc./1.6) 
```

单击 Inspect Element->Console 后，出现以下错误

未捕获的 SyntaxError：意外的标识符获取：1

通过单击 Inspect Element-> Network->get->Response 我得到了以下数据

```
content from get method 
```

下面给出了 REST 服务中的资源类。

```
@Path("generic")
@WebService
public class GenericResource {

@Context
private UriInfo context;
@Context
private HttpServletResponse response;
private String content = "content";

/**
 * Creates a new instance of GenericResource
 */
public GenericResource() {
}

/**
 * Retrieves representation of an instance of
 * com.mycompany.resource.GenericResource
 *
 * @return an instance of java.lang.String
 */
@GET

@Path("/get")
@Produces("application/json,text/plain")
public String getXml() {
    System.out.println("GET");
    //response.addHeader(content, content);

    return this.content + " from get method";

} 
```

以下是我的 GWT 入口点类

```
public class Mygwtclientapplication implements EntryPoint {

    public void onModuleLoad() {

        JsonpRequestBuilder jsonpRequestBuilder=new JsonpRequestBuilder();
        System.out.println(jsonpRequestBuilder.getCallbackParam());
        jsonpRequestBuilder.requestString("http://localhost:8080/RestWeb/webresources/generic/get", new AsyncCallback<String>() {

            @Override
            public void onFailure(Throwable caught) {

                System.out.println(caught.getMessage());

            }

            @Override
            public void onSuccess(String result) {

                System.out.println(result);

            }
        });

    }
} 
```

执行后，我在 Eclipse 控制台中得到以下信息

```
Timeout while calling http://localhost:8080/RestWeb/webresources/generic/get 
```

# css - CSS在一行中创建3个div块，div结构

> ID：14235246
> 
> 赞同：2
> 
> 时间：2013-01-09T12:29:45.973
> 
> 标签：css, html

![在此处输入图像描述](../Images/23ead2bad78d6825cb468ff92a300d9a.png)

也许任何人都可以帮助我处理代表上图的 div 结构，以及是否有任何特殊的持有者 div 的 css 参数，或者其他添加它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T12:37:50.953

有很多方法可以做到这一点，其中一种是相对浮动

```
<div style="position:relative">
    <div style="float:left; width: 50px; height:100px; background-color:red;">Block1
    </div>
    <div style="float:left; width: 50px; height:100px; background-color:blue;">Block2
    </div>
    <div style="float:left; width: 50px; height:100px; background-color:green;">Block3
    </div>
</div> 
```

这会产生类似的东西

![演示](../Images/94d61ca62fe2456720c589626889d66f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T12:36:43.250

怎么样：

```
<div>a</div>
<div>b</div>
<div>c</div> 
```

使用 CSS：

```
div {
  width: 33%;
  border: 1px solid red;
  float: left;
} 
```

?

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T12:31:44.907

如果您要求 html 代码来完成问题中所示的视觉效果，这是**[http://csslayoutgenerator.com/](http://csslayoutgenerator.com/)**的地方，您可以在其中生成 html 布局。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T12:31:49.483

[***工作小提琴***](http://jsfiddle.net/hcQfp/)

CSS：

```
.div {
display:inline-block;
width:150px;
height:400px;
margin:0;
}
#one {
background:green;
}
#two {
background:red;
}
#three {
background:blue;
} 
```

HTML：

```
<div class="div" id="one"></div>
<div class="div" id="two"></div>
<div class="div" id="three"></div> 
```

您可以使用 CSS`display`属性。并指定`inline-block`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T12:31:52.643

三个 div ：

```
<div></div><div></div><div></div> 
```

与 css ：

```
div {
 display: inline-block;
} 
```

将您想要的所有内容放入这些 div 中。

您还可以使用 float:left 代替 display 属性。

如果你想要一个流动的布局（第一个和最后一个 div 有一个固定的宽度，中间一个占据所有需要的空间），你可以：

```
.firstDiv {
  float: left;
  width: 200px;
}

.lastDiv {
  float: right;
  width: 200px;
}

.middleDiv {
  margin-left: 200px;
  margin-right: 200px;
} 
```

您还可以使用绝对定位：

```
body {
  position: relative;
}

.firstDiv {
  position: absolute;
  top: 0px;
  bottom: 0px;
  left: 0px;
  width: 200px;
}

.lastDiv {
  position: absolute;
  top: 0px;
  bottom: 0px;
  left: 200px;
  right: 200px;
}

.middleDiv {
  position: absolute;
  top: 0px;
  bottom: 0px;
  right: 0px;
  width: 200px;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T12:36:11.440

看看[这个](http://jsfiddle.net/MPJ72/)JS Fiddle 代码：

```
<div class="_1">Red</div>
<div class="_2">Green</div>
<div class="_3">Blue</div>

div {
    display:inline-block;
    width:100px;
    height:200px;
}

._1 {
    background-color:red;
}

._2 {
    background-color:green;
}

._3 {
    background-color:blue;
} 
```

# css - Css 媒体对象源顺序

> ID：14235247
> 
> 赞同：0
> 
> 时间：2013-01-09T12:29:51.587
> 
> 标签：css, oocss

我喜欢这里描述的使用媒体对象模块背后的想法：

[http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/](http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/)

它是可以应用于许多 HTML 模式的 css，并且具有很大的优势，即无论图像有多大或包含模块的容器有多大都无关紧要。

问题是它依赖于像这样在源中首先出现的媒体（例如图像）

```
 IMAGE
    STARTCONTENTDIV
    ENDCONTENTDIV 
```

当在该内容 div 中您可能有这样的标题时，这将成为一个语义问题：

```
 IMAGE
    STARTCONTENTDIV
      H1
      DESCRIPTION
    ENDCONTENTDIV 
```

这样 h1 就在图像之后，即使它应该在图像之前，所以文档大纲是有意义的。它应该是这样的：

```
 STARTCONTENTDIV
      H1
      DESCRIPTION
    ENDCONTENTDIV
    IMAGE 
```

当我们不知道图像或内容 div 的宽度时，有没有人知道如何在液体布局容器中执行此操作？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:26:50.463

Flexbox 允许您在不知道元素有多宽的情况下重新排列内容。缺点是对它的支持很差（IE10+、Opera、Chrome；当前的 Firefox 遵循较旧的规范，但可以做这种布局）。

```
<div class="container">
  <div class="child">
    <h1>Title Here</h1>

    <p>Paragraph o' text</p>
  </div>

  <img class="child" />
</div>

.container {
  display: flex;
}

div.child {
  flex: 1 1 auto;
  order: 2;
}

img.child {
  flex: 0 0 auto;
  order: 1;
} 
```

[http://jsfiddle.net/CNWGn/](http://jsfiddle.net/CNWGn/)（不包括前缀）

# php - Yii 查找查询结果 - 没有表结构

> ID：14235249
> 
> 赞同：1
> 
> 时间：2013-01-09T12:29:54.793
> 
> 标签：php, yii

我正在对模型使用以下查询

```
$criteria = new CDbCriteria; 
$criteria->condition='brand_id=3';
$model=Models::model()->find($criteria); 
```

它给出了表结构和关系表结构的结果，如下所示

```
Models Object ( [_md:CActiveRecord:private] => CActiveRecordMetaData Object ( [tableSchema] => CMysqlTableSchema Object ( [schemaName] => [name] => models [rawName] => `models` [primaryKey] => model_id [sequenceName] => [foreignKeys] => Array ( [brand_id] => Array ( [0]
=> brands [1] => brand_id ) ) [columns] => Array ( [model_id] => CMysqlColumnSchema Object ( [name] => model_id [rawName] => `model_id` [allowNull] => [dbType] => int(11) [type] => integer [defaultValue] => [size] => 11 [precision] => 11 [scale] => [isPrimaryKey] => 1 [isForeignKey] => [autoIncrement] => 1 [_e:CComponent:private] => [_m:CComponent:private] => ) [model_name] => CMysqlColumnSchema Object ( [name] => model_name [rawName] => `model_name` [allowNull] => [dbType] => varchar(255) [type] => string [defaultValue] => [size] => 255 [precision] => 255 [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:CComponent:private] => [_m:CComponent:private]
=> ) [brand_id] => CMysqlColumnSchema Object ( [name] => brand_id [rawName] => `brand_id` [allowNull] => [dbType] => int(11) [type] => integer [defaultValue] => [size] => 11 [precision] => 11 [scale] => [isPrimaryKey] => [isForeignKey] => 1 [autoIncrement] => [_e:CComponent:private] => [_m:CComponent:private] => ) ) [_e:CComponent:private] => [_m:CComponent:private] => ) [columns] => Array ( [model_id] => CMysqlColumnSchema Object ( [name] => model_id [rawName] => `model_id` [allowNull] => [dbType] => int(11) [type] => integer [defaultValue] => [size] => 11 [precision] => 11 [scale] => [isPrimaryKey] => 1 [isForeignKey] => [autoIncrement] => 1 [_e:CComponent:private] => [_m:CComponent:private] => ) [model_name]
=> CMysqlColumnSchema Object ( [name] => model_name [rawName] => `model_name` [allowNull] => [dbType] => varchar(255) [type] => string [defaultValue] => [size] => 255 [precision] => 255 [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:CComponent:private] => [_m:CComponent:private] => ) [brand_id] => CMysqlColumnSchema Object ( [name] => brand_id [rawName] => `brand_id` [allowNull] => [dbType] => int(11) [type] => integer [defaultValue] => [size] => 11 [precision] => 11 [scale] => [isPrimaryKey] => [isForeignKey] => 1 [autoIncrement] => [_e:CComponent:private] => [_m:CComponent:private] => ) ) [relations] => Array ( [brand] => CBelongsToRelation Object ( [joinType] => LEFT OUTER JOIN [on] => [alias] => [with] => Array ( ) [together] => [scopes] => [name] => brand [className] => Brands [foreignKey] => brand_id [select] => * [condition] => [params] => Array ( ) [group] => [join] => [having] => [order] => [_e:CComponent:private] => [_m:CComponent:private] => ) ) [attributeDefaults] => Array ( ) [_model:CActiveRecordMetaData:private] => Models Object ( [_md:CActiveRecord:private] => CActiveRecordMetaData Object
*RECURSION* [_new:CActiveRecord:private] => [_attributes:CActiveRecord:private] => Array ( ) [_related:CActiveRecord:private] => Array ( ) [_c:CActiveRecord:private] => [_pk:CActiveRecord:private] => [_alias:CActiveRecord:private] => t [_errors:CModel:private] => Array ( ) [_validators:CModel:private] => [_scenario:CModel:private] => [_e:CComponent:private] => [_m:CComponent:private] => ) ) [_new:CActiveRecord:private] => [_attributes:CActiveRecord:private] => Array ( [model_id] => 3 [model_name] => NANO [brand_id] => 3 ) [_related:CActiveRecord:private] => Array ( ) [_c:CActiveRecord:private] => [_pk:CActiveRecord:private] => 3 [_alias:CActiveRecord:private] => t [_errors:CModel:private] => Array ( ) [_validators:CModel:private] => [_scenario:CModel:private] => update [_e:CComponent:private] => [_m:CComponent:private] => ) 
```

如何仅在 yii 查询中获取表数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:07:06.097

返回的数据是一个 CActiveRecord 对象。返回的数据有这样的复杂性是正常的。如果你只想获取 DB 值，你应该使用来自 Yii 的 DAO 功能或 Query Builder 功能！

*   [Yii 中的 DAO 指南](http://www.yiiframework.com/doc/guide/1.1/en/database.dao)
*   [yii 指南中的查询生成器](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)

使用查询生成器的示例：

```
$model = Yii::app()->db->createCommand()
    ->select('*')
    ->from('your_table t')
    ->where('brand_id=:id', array(':id'=>3))
    ->queryRow(); 
```

使用 DAO 的示例：

```
$connection=Yii::app()->db;
$command=$connection->createCommand('SELECT * FROM your_table WHERE id =:id');
$command->bindParam(":id", 3, PDO::PARAM_INT);
$row=$command->queryRow(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T15:46:25.970

我不确定你到底想要什么。但是你可以看看我的样品来得到它。

```
$words = Word::model()->findAll();
$data=array_map(create_function('$m','return $m->getAttributes();'),$words);
var_dump($data); 
```

我使用 ActiveRecord 从我的表词中获取所有记录，当然，您可以应用您的标准而不是“findAll”并根据您的需要进行不同的设置。这是我的结果。

```
array (size=3)
  0 => 
    array (size=9)
      'word_id' => string '1' (length=1)
      'name' => string 'a' (length=1)
      'sound_file' => null
      'length' => string '1' (length=1)
      'type' => null
      'meaning' => null
      'priority' => string '1' (length=1)
      'first_char' => string 'a' (length=1)
      'word_count' => string '1' (length=1)
  1 => 
    array (size=9)
      'word_id' => string '2' (length=1)
      'name' => string 'b' (length=1)
      'sound_file' => null
      'length' => string '1' (length=1)
      'type' => null
      'meaning' => null
      'priority' => string '1' (length=1)
      'first_char' => string 'b' (length=1)
      'word_count' => string '1' (length=1)
  2 => 
    array (size=9)
      'word_id' => string '3' (length=1)
      'name' => string 'c' (length=1)
      'sound_file' => null
      'length' => string '1' (length=1)
      'type' => null
      'meaning' => null
      'priority' => string '1' (length=1)
      'first_char' => string 'c' (length=1)
      'word_count' => string '1' (length=1) 
```

# javascript - 获取网页上的视频帧

> ID：14235250
> 
> 赞同：0
> 
> 时间：2013-01-09T12:29:56.307
> 
> 标签：javascript, iis, video, canvas

有一个钻石的视频表示为一系列图像。这是链接：[http](http://beta.jamesallen.com/#!/loose-diamonds/Round-cut/0.70-carat-K-color-SI1-clarity-Very-Good-cut-sku-163685) ://beta.jamesallen.com/#!/loose-diamonds/Round-cut/0.70-carat-K-color-SI1-clarity-Very-Good-cut-sku-163685 。如果询问凭据，您可以使用`fsgs2k@gmail.com`/`hello`作为登录名/密码。

视频`canvas`通过一些棘手的 JS 显示在元素内。我没有足够的经验来通过这个控制 JS。我想要的是：

*   了解此视频的显示帧速率。是25帧吗？
*   获取底层图像序列。

我需要你的帮助来完成这些任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:27:18.537

您在`<canvas>`元素中显示了资源文件夹：

```
<canvas id="diamond_s1" class="diamondCanvas" style="display: block;" 
setfolder="Sets/Diamond/$number/sets/" width="473" height="375"></canvas> 
```

您必须获取该文件夹路径，然后您应该能够向您可以在包含先前目录并[以 set[number].txt结尾的 Chrome 网络选项卡中看到的 URL 发出请求](http://cdn2.jamesallen.com/Sets/Diamond/163685/sets/set1.txt)

这些 url 逐帧返回整个视频，编码为 bsae64 数据图像。您将获得大量`data:image/jpeg;base64,`的 base64 图像。这就是您必须通过简单的 base64 解码在 jpeg 中获取和转换的图像帧

您必须弄清楚它们的顺序，但 json 为您提供了一些关于它的见解

# php - 如何按2个值对php中的多维数组进行排序

> ID：14235251
> 
> 赞同：1
> 
> 时间：2013-01-09T12:29:58.373
> 
> 标签：php, multidimensional-array, sorting

我一直在使用 array_multisort 函数，但我正在努力让它与我拥有的数组一起工作。

这是我要排序的多维数组的 var 转储：

```
array(2) { 
[1]=> array(6) { 
    ["totalprice"]=> float(103.32)
    ["itemsprice"]=> float(83.33) 
    ["deliveryprice"]=> float(19.99)
    ["qualityscore"]=> int(100)
    ["reliabilityscore"]=> int(100)
    ["itemtemplates"]=> array(4) {
         [1]=> array(3) { 
            ["price"]=> float(374)
            ["qty"]=> int(200)
            ["name"]=> string(17) "English A2 Poster"
        }
        [3]=> array(3) { 
            ["price"]=> float(374)
            ["qty"]=> int(500)
            ["name"]=> NULL
        }
        [6]=> array(3) {
            ["price"]=> float(83.333333333333)
            ["qty"]=> int(100)
            ["name"]=> string(16) "French A3 Poster"
        }
        [5]=> array(3) {
            ["price"]=> float(83.333333333333)
            ["qty"]=> int(5000) ["name"]=> NULL
        }
    }
}
[2]=> array(6) { 
    ["totalprice"]=> float(103.32)
    ["itemsprice"]=> float(83.33) 
    ["deliveryprice"]=> float(19.99)
    ["qualityscore"]=> int(80)
    ["reliabilityscore"]=> int(100)
    ["itemtemplates"]=> array(4) {
         [1]=> array(3) { 
            ["price"]=> float(374)
            ["qty"]=> int(200)
            ["name"]=> string(17) "English A2 Poster"
        }
        [3]=> array(3) { 
            ["price"]=> float(374)
            ["qty"]=> int(500)
            ["name"]=> NULL
        }
        [6]=> array(3) {
            ["price"]=> float(83.333333333333)
            ["qty"]=> int(100)
            ["name"]=> string(16) "French A3 Poster"
        }
        [5]=> array(3) {
            ["price"]=> float(83.333333333333)
            ["qty"]=> int(5000) ["name"]=> NULL
        }
    }
}
[3]=> array(6) { 
    ["totalprice"]=> float(83.32)
    ["itemsprice"]=> float(63.33) 
    ["deliveryprice"]=> float(19.99)
    ["qualityscore"]=> int(60)
    ["reliabilityscore"]=> int(40)
    ["itemtemplates"]=> array(4) {
         [1]=> array(3) { 
            ["price"]=> float(374)
            ["qty"]=> int(200)
            ["name"]=> string(17) "English A2 Poster"
        }
        [3]=> array(3) { 
            ["price"]=> float(374)
            ["qty"]=> int(500)
            ["name"]=> NULL
        }
        [6]=> array(3) {
            ["price"]=> float(83.333333333333)
            ["qty"]=> int(100)
            ["name"]=> string(16) "French A3 Poster"
        }
        [5]=> array(3) {
            ["price"]=> float(83.333333333333)
            ["qty"]=> int(5000) ["name"]=> NULL
        }
    }
} 
```

}

我需要按总价格 ASC 排序，然后按质量得分 DESC 排序。

我尝试了以下方法：

```
$sorted = array_multisort($array['totalprice'], SORT_ASC, SORT_NUMERIC,
    $array['qualityscore'], SORT_NUMERIC, SORT_DESC); 
```

不幸的是，这不起作用。有没有人更精通这个功能并且可能知道我哪里出错了？或者如果有一个简单的替代这个功能？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:32:24.867

使用该[`usort()`](http://php.net/manual/en/function.usort.php)功能。

您显然需要为它编写自己的排序函数。将该函数传入`usort()`以按您需要的任何标准进行排序。

有关如何定义排序功能的信息，请参阅上面链接的手册页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:45:10.050

试试下面的代码：

```
$totalprices = array();
$qualityscores = array();
foreach ($array as $value) {
    $totalprices[] = $value['totalprice'];
    $qualityscores[] = $value['qualityscore'];
}

array_multisort($totalprices, SORT_ASC, $qualityscores, SORT_DESC, $array); 
```

RTM [http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php) :)

# c++ - 具有多级继承的 C++ 构造函数

> ID：14235253
> 
> 赞同：2
> 
> 时间：2013-01-09T12:30:00.087
> 
> 标签：c++, inheritance, constructor

我正在尝试进行多级继承并调用基本构造函数，但是编译器找不到我的基本构造函数..

`no overloaded function takes 8 arguments`

我的代码哪里出错了？

我的基类构造函数的 .cpp 将 10 个成员变量 int 默认为 0

```
Baseclass::Baseclass(void) : m_1(0),m_2(0),
                                   m_3(0),m_4(0),
                                   m_x(0),m_y(0),
                                   m_5(0),m_5(0),
                                   m_7(0), m_8(0)
{
}

Baseclass::Baseclass(int _1,int _2,int _3, int _4, int _5,int _6, int _7, int _8)
                                 : m_1(_1),m_2(_2),
                                   m_3(_3),m_4(_4),
                                   m_x(0),m_y(0),
                                   m_5(_5),m_6(_6),
                                   m_7(_7), m_8(_8)
{
} 
```

在我的第一个子类标题中，我有

```
class SubclassA:
    public Baseclass
{
public:
    SubclassA(void);
    using Baseclass::Baseclass;
    ~SubclassA(void); 
```

其次是第二个子类：

```
class SubclassB:
    public SubclassA
{
public:
    SubclassB(void);
    using Baseclass::Baseclass;
    ~SubclassB(void); 
```

然后我会尝试用以下方法初始化这个类的一个新实例：

```
 SubclassB(Id,0,100,100,10,100,1,1) 
```

我不确定 `using SubclassA::SubclassA;`for 在 SubclassB 中是否有效，但无论如何它并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:59:51.273

如果您不提供任何参数，则会隐式调用超类默认构造函数。要传递参数，您必须像这样创建子类的显式参数化构造函数 -

```
SubclassA::SubclassA(int a, int b, int c, int d, int e, int f, int g, int h) 
: Baseclass(a,b,c,d,e,f,g,h)
{} 
```

在同一行上，`SubclassB`使用 的构造函数为类创建另一个构造函数`subclassA`。您不能`Baseclass`像在中那样使用对的引用，`SubclassB`因为您只能引用层次结构中的直接超类。

所有这一切都必须发生，因为在 C++03 标准中，构造函数不会被 C++ 中的子类继承。在支持该标准或更早的编译器中，它们必须由子类的构造函数显式调用。由于您的编译器似乎不支持 C++11，因此您现在必须解决这个问题。

**（更新）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:00:08.643

从您的错误消息中，我猜您正在使用 Visual Studio？它不支持继承构造函数。

请参阅：[http ://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport](http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport)

似乎 Gcc 4.8 是目前唯一支持此功能的编译器。

# c++ - 从向量创建最长可能的字符串

> ID：14235256
> 
> 赞同：0
> 
> 时间：2013-01-09T12:30:12.743
> 
> 标签：c++, vector, iterator

我以 . 形式接收数据`vector<char>`，我需要从中创建`string`. 向量可能包含 utf-16 字符（即空字节）并且是固定大小的。实际数据用空字节填充到这个固定大小。因此，例如，我可以有以下向量：

```
\0 a \0 b \0 c \0 d \0 \0 \0 \0 
```

固定大小为 12，向量包含 utf-16 字符串“abcd”，用 4 个空字符填充以调整大小。

从这里，我需要实际提取这个字符串。我已经有了从 utf-16 转换为 的代码，`string`让我感到困惑的是在没有填充的向量中找到字符（字节）的数量。在上面的示例中，数字是 8。

我开始做类似的事情：

```
std::string CrmxFile::StringFromBytes(std::vector<char> data, int fixedsize) {

    std::vector<char>iterator it = data.rbegin();
    while(it != data.rend() && *it == '\0') {
        it++;
    }

    return std::string(&data[0], fixedsize - (it - data.rbegin());
} 
```

然而，在完整的上下文中，向量包含大量数据，我只需要对它的指定部分进行上述操作。例如，向量可能包含 1000 个元素，我需要获取从位置 30 开始并且最多包含 12 个字符的字符串。当然，我可以在应用上述逻辑之前创建另一个向量并将所需的 21 个字符复制到其中，但我觉得我应该可以直接在给定的向量上做一些事情。然而，我无法掌握我正在与什么进行比较的迭代器。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:49:41.763

现在，这很尴尬：`vector<char>::iterator`显然是一个随机访问迭代器，因此我可以递减它。因此我的方法现在看起来像这样：

```
std::string CrmxFile::StringFromBytes(std::vector<char> data, int fixedsize) {
    std::vector<char>::iterator begin = data.begin() + start;
    std::vector<char>::iterator end = start + length - 1;
    while(it >= begin  && *it == '\0') {
        it--;
    }

    if(it >= begin) {
        int len = it - begin + 1;
        if(IsUtf8Heuristic(begin, begin + len) {
            return std::string(begin, begin + len);
        }
        else {  //(heuristically this is utf-16)
            len = ((len + 1) >> 1) << 1;
            std::string res;
            ConvertUtf16To8(begin, begin + len, std::back_inserter(res));
            return res;
        }
    }
    else {
        return "";
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T20:09:53.127

据我了解这个问题，您想从中提取 max 的一部分`fixedsize`，`data`并擦除所有尾随零。从您想要最佳解决方案的评论中。

对我来说，如果数据始终采用数组形式，那么您的代码就过于复杂了。使用索引，它们更能自我描述。

```
std::vector<char> data = ...;
int fixedsize = ...;
int start = ...;

int i = start + fixedsize - 1; // last character that can be in the string
while(i >= start && data[i] == 0) i--; // 'remove' the trailing zeroes
std::string result(&data[start], i - start + 1); 
```

这是最优算法，没有“更优”的算法（有一个微优化，包括用`int`s 而不是`char`s 进行测试，即`char`连续 4 s）。

# web-services - WCF Webservice慢，发现瓶颈

> ID：14235266
> 
> 赞同：0
> 
> 时间：2013-01-09T12:31:05.453
> 
> 标签：web-services, wcf, profiling

我对 SvctraceViewer 很熟悉，但我不确定这是否是正确的工具。问题是，我正在尝试使用一个不是我设计或开发的相当大的 WCF 应用程序。此外，它的记录很差。

有些观点运行缓慢，但是 - 我不知道为什么。

有没有什么程序可以用来找出瓶颈在哪里？
一个任务需要多少毫秒才能完成等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:39:44.083

只需使用任何分析器。需要特殊工具的 WCF 服务没有什么神奇之处。

我使用了 Visual Studio 中的内置分析器和 Jetbrains 的 dotTrace 产品来完成此任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:10:07.720

+1 给 John Saunders - 分析器是诊断问题的方法。[Ants Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)也很出色。我认为您可以获得 15 天的免费试用 - 可能足以确定您的问题

# oauth - 在使用 Google+API 之前必须使用 OAuth

> ID：14235269
> 
> 赞同：0
> 
> 时间：2013-01-09T12:31:21.520
> 
> 标签：oauth, google-plus

我正在尝试将 get 和 list 方法与 google plus 评论一起使用。在官方网站上它说（所有 API 调用都需要 OAuth 2.0 令牌或 API 密钥。）并且我尝试在没有 OAuth 步骤的情况下发送 GET 请求，它可以返回 json 格式的数据。我的问题是在使用 google+ API 之前必须要求 OAuth？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:35:37.577

能否做到这一点的简短回答是，您可以在没有 OAuth 的情况下从 Google+ 获得评论。

至于您将如何执行此操作，我不确定您使用哪种语言执行此操作，但以下代码显示了如何在 JavaScript 中执行此操作。

此处使用的 API 调用可以在 API 资源管理器中进行试验：

*   [上市活动](https://developers.google.com/apis-explorer/#p/plus/v1/plus.activities.list)
*   [上市评论](https://developers.google.com/apis-explorer/#p/plus/v1/plus.comments.list)

此代码的[演示在这里](http://gusclass.com/commenttest.html)。

您将需要一个 API 密钥（简单密钥），用于使用来自[Google API 控制台](https://code.google.com/apis/console)的 Google+ API 的项目。设置项目时，您只需从服务部分启用 Google+ API。

首先，使用公共数据 API 抓取活动：

```
// Gets the activities for a profile
function getActivities(profileID){
  var activities = null;      
  var URL        = "https://www.googleapis.com/plus/v1/people/" + profileID +         "/activities/public?alt=json&key=" + key;
  var request = new XMLHttpRequest();
  request.open('GET', URL, false);
  request.send(); // because of "false" above, will block until the request is done 
                  // and status is available. Not recommended, however it works for simple cases.

  if (request.status === 200) {
    if (debug) console.log("retrieved activities \n\n");
    var activities = jQuery.parseJSON(request.responseText).items;
    console.log("Discovered " + activities.length + " activities");
  }else{
    handleRequestIssue(request);
  }

  return activities;
} 
```

以下代码循环遍历活动

```
for (var i=0; i < activities.length; i++) {
        console.log("trying to do something with an activity: " + i);
        var activity = activities[i];

        console.log(activity.id);
} 
```

接下来，您可以使用活动 ID 来检索每个活动的评论：

```
function getCommentsForActivity(activityID){
  var comments = "";      
  var URL        = "https://www.googleapis.com/plus/v1/activities/" + activityID + "/comments?alt=json&key=" + key;
  var request = new XMLHttpRequest();
  request.open('GET', URL, false);
  request.send(); // because of "false" above, will block until the request is done 
              // and status is available. Not recommended, however it works for simple cases.

  if (request.status === 200) {
    if (debug) console.log(request.responseText);
    var comments  = jQuery.parseJSON(request.responseText).items;

    if (debug){
      for (comment in comments){
        console.log(comment);
      }
    } 

  }else{
    handleRequestIssue(request);
  }

  return comments;
}

function manualTrigger(){
  var activities = getActivities("109716647623830091721");
} 
```

以下代码将所有内容组合在一起并检索特定帖子的活动和评论：

```
$(document).ready(function () {

  var renderMe = "";
  var activities = getActivities("109716647623830091721");

  console.log("activities retrieved: " + activities.length);

  for (var i=0; i < activities.length; i++) {
    console.log("trying to do something with an activity: " + i);
    var activity = activities[i];

    renderMe += "<br/><div class=\"article\"><p>" + activity.title + "</p>";
    console.log(activity.id);

    // get comments
    var comments = getCommentsForActivity(activity.id);
    for (var j=0; j<comments.length; j++){
      renderMe += "<br/><div class=\"comment\">" + comments[j].object.content + "</div>";
    }
    renderMe += "</div>";
  }
  console.log("I'm done");

  document.getElementById("ac").innerHTML = renderMe;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:59:51.413

这取决于您要获取的数据。

[https://developers.google.com/+/api/oauth](https://developers.google.com/+/api/oauth)记录了使用 OAuth 的好处，但一般来说，如果您想获取私人个人资料数据，或者如果您希望使用 /me/ URL 快捷方式，您将需要使用 OAuth，如果您愿意，还可以使用 App Key。如果您只对公共数据感兴趣，则可以使用 App Key。

# c# - outputcache 随机删除项目？

> ID：14235283
> 
> 赞同：0
> 
> 时间：2013-01-09T12:32:05.357
> 
> 标签：c#, asp.net-mvc-3, .net-4.0

我目前正在对一个操作使用 OutputCacheAttribute（在 System.Web.Mvc 中）：

```
[ChildActionOnly]
[OutputCache(Duration = 24 * 60 * 60)] // Cache for 24 hours
public ContentResult Render(string json, string pagePublished)
{ 
```

在第一个页面加载后，它会缓存输出并保存它。它有时会缓存几个小时，有时是几分钟。

我在多个页面上使用此操作，所以首先我认为它可能与此有关。但我试图只缓存一页，看看它是否存在，它没有。我试图缓存很多页面，它有时会保留几个小时。

有人知道可能出了什么问题吗？

编辑：

w3wp 进程使用大量 RAM（这是设计使然，不是问题），仍有空闲 RAM（约 5gb）可供分配。我已经构建了另一个获取 httpcontext 缓存当前大小的操作。这相当于大约 1350000 字节。所以内存应该没有问题。

我也有一个 MemoryCache 的问题，它也会随机驱逐项目（大约 8530000 字节。）

编辑2：

似乎它将操作的输出保存在 MemoryCache 和 httpcontext 缓存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:44:44.840

无法保证内容将在您指定的时间内缓存。当内存资源变低时，缓存会自动开始逐出内容。

# android - 避免位图内存不足错误的建议

> ID：14235287
> 
> 赞同：37
> 
> 时间：2013-01-09T12:32:25.010
> 
> 标签：android, bitmap, out-of-memory, heap-memory

我正在开发一个安卓应用程序。该应用程序有一个包含大量图像的视图。我有一个错误，我会尽量提供尽可能多的信息，希望有人能给我一些建议。

该应用程序在所有本地测试中运行良好。但是，我收到了很多来自用户的崩溃：`java.lang.OutOfMemoryError: bitmap size exceeds VM budget`

这是堆栈跟踪

```
0       java.lang.OutOfMemoryError: bitmap size exceeds VM budget
1   at  android.graphics.Bitmap.nativeCreate(Native Method)
2   at  android.graphics.Bitmap.createBitmap(Bitmap.java:507)
3   at  android.graphics.Bitmap.createBitmap(Bitmap.java:474)
4   at  android.graphics.Bitmap.createScaledBitmap(Bitmap.java:379)
5   at  android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
6   at  android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
7   at  android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
8   at  android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:359)
9   at  android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:385) 
```

我最大的问题是即使在旧设备上我也无法在本地重现该问题。

我已经实施了很多事情来尝试解决这个问题：

1.  **没有内存泄漏**：我确保根本没有内存泄漏。当我不需要视图时，我删除了它们。我还回收了所有位图并确保垃圾收集器正常工作。我在`onDestroy()`方法中实现了所有必要的步骤
2.  **正确缩放图像大小**：在获取图像之前，我得到它的尺寸并计算`inSampleSize`.
3.  **堆大小**：我还在获取图像之前检测最大堆大小并确保有足够的空间。如果不够，我会相应地重新缩放图像。

**计算正确 inSampleSize 的代码**

```
public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight)
   {
      // Raw height and width of image
      final int height = options.outHeight;
      final int width = options.outWidth;
      int inSampleSize = 1;

      if(height > reqHeight || width > reqWidth)
      {
         if(width > height)
         {
            inSampleSize = Math.round((float) height / (float) reqHeight);
         }
         else
         {
            inSampleSize = Math.round((float) width / (float) reqWidth);
         }
      }
      return inSampleSize;
   } 
```

**获取位图的代码**

```
 // decodes image and scales it to reduce memory consumption
   private static Bitmap decodeFile(File file, int newWidth, int newHeight)
   {// target size
      try
      {

         Bitmap bmp = MediaStore.Images.Media.getBitmap(getContext().getContentResolver(), Uri.fromFile(file));
         if(bmp == null)
         {
            // avoid concurrence
            // Decode image size
            BitmapFactory.Options option = new BitmapFactory.Options();

            // option = getBitmapOutput(file);

            option.inDensity = res.getDisplayMetrics().densityDpi < DisplayMetrics.DENSITY_HIGH ? 120 : 240;
            option.inTargetDensity = res.getDisplayMetrics().densityDpi;

            if(newHeight > 0 && newWidth > 0) 
                option.inSampleSize = calculateInSampleSize(option, newWidth, newWidth);

            option.inJustDecodeBounds = false;
            byte[] decodeBuffer = new byte[12 * 1024];
            option.inTempStorage = decodeBuffer;
            option.inPurgeable = true;
            option.inInputShareable = true;
            option.inScaled = true;

            bmp = BitmapFactory.decodeStream(new FileInputStream(file), null, option);
            if(bmp == null)
            {
               return null;
            }

         }
         else
         {
            int inDensity = res.getDisplayMetrics().densityDpi < DisplayMetrics.DENSITY_HIGH ? 120 : 240;
            int inTargetDensity = res.getDisplayMetrics().densityDpi;
            if(inDensity != inTargetDensity)
            {
               int newBmpWidth = (bmp.getWidth() * inTargetDensity) / inDensity;
               int newBmpHeight = (bmp.getHeight() * inTargetDensity) / inDensity;
               bmp = Bitmap.createScaledBitmap(bmp, newBmpWidth, newBmpHeight, true);
            }
         }

         return bmp;
      }
      catch(Exception e)
      {
         Log.e("Error calling Application.decodeFile Method params: " + Arrays.toString(new Object[]{file }), e);
      }
      return null;
   } 
```

**根据旧设备的堆大小计算图像大小的代码**

```
private void calculateImagesSize()
   {
      // only for android older than HoneyComb that does not support large heap
      if(Build.VERSION.SDK_INT < Constants.HONEYCOMB)
      {
         long maxHeapSize = Runtime.getRuntime().maxMemory();
         long maxImageHeap = maxHeapSize - 10485760;
         if(Application.getResource().getDisplayMetrics().densityDpi >= DisplayMetrics.DENSITY_XHIGH)
         {
            maxImageHeap -= 12 * 1048576;
         }
         if(maxImageHeap < (30 * 1048576))
         {
            int screenHeight = Math.min(Application.getResource().getDisplayMetrics().heightPixels, Application.getResource()
               .getDisplayMetrics().widthPixels);
            long maxImageSize = maxImageHeap / 100;
            long maxPixels = maxImageSize / 4;
            long maxHeight = (long) Math.sqrt(maxPixels / 1.5);
            if(maxHeight < screenHeight)
            {
               drawableHeight = (int) maxHeight;
               drawableWidth = (int) (drawableHeight * 1.5);
            }
         }
      }
   } 
```

我认为问题出在堆上，也许有时操作系统不允许应用程序使用 maxheapsize。另外我最大的问题是我无法重现该问题，因此当我尝试修复时，我必须稍等片刻，看看用户是否仍然收到错误。

我还可以尝试避免内存不足问题吗？任何建议将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T12:35:24.997

只需使用此功能解码...这是您错误的完美解决方案..因为我也遇到同样的错误并且我得到了这个解决方案..

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
     try {
         //Decode image size
         BitmapFactory.Options o = new BitmapFactory.Options();
         o.inJustDecodeBounds = true;
         BitmapFactory.decodeStream(new FileInputStream(f),null,o);

         //The new size we want to scale to
         final int REQUIRED_WIDTH=WIDTH;
         final int REQUIRED_HIGHT=HIGHT;
         //Find the correct scale value. It should be the power of 2.
         int scale=1;
         while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
             scale*=2;

         //Decode with inSampleSize
         BitmapFactory.Options o2 = new BitmapFactory.Options();
         o2.inSampleSize=scale;
         return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
     } catch (FileNotFoundException e) {}
     return null;
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T12:41:07.723

通过减少/缩放图像的大小，您可以摆脱内存不足异常，试试这个

```
 BitmapFactory.Options options = new BitmapFactory.Options();
  options.inSampleSize = 6; 
  Bitmap receipt = BitmapFactory.decodeFile(photo.toString(),options);  //From File You can customise on your needs. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T12:47:07.870

嗨，你必须解码文件。为此尝试以下方法。

```
 public static Bitmap new_decode(File f) {

        // decode image size

        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        o.inDither = false; // Disable Dithering mode

        o.inPurgeable = true; // Tell to gc that whether it needs free memory,
                                // the Bitmap can be cleared

        o.inInputShareable = true; // Which kind of reference will be used to
                                    // recover the Bitmap data after being
                                    // clear, when it will be used in the future
        try {
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 300;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 1.5 < REQUIRED_SIZE && height_tmp / 1.5 < REQUIRED_SIZE)
                break;
            width_tmp /= 1.5;
            height_tmp /= 1.5;
            scale *= 1.5;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        // o2.inSampleSize=scale;
        o.inDither = false; // Disable Dithering mode

        o.inPurgeable = true; // Tell to gc that whether it needs free memory,
                                // the Bitmap can be cleared

        o.inInputShareable = true; // Which kind of reference will be used to
                                    // recover the Bitmap data after being
                                    // clear, when it will be used in the future
        // return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        try {

//          return BitmapFactory.decodeStream(new FileInputStream(f), null,
//                  null);
            Bitmap bitmap= BitmapFactory.decodeStream(new FileInputStream(f), null, null);
            System.out.println(" IW " + width_tmp);
            System.out.println("IHH " + height_tmp);           
               int iW = width_tmp;
                int iH = height_tmp;

               return Bitmap.createScaledBitmap(bitmap, iW, iH, true);

        } catch (OutOfMemoryError e) {
            // TODO: handle exception
            e.printStackTrace();
            // clearCache();

            // System.out.println("bitmap creating success");
            System.gc();
            return null;
            // System.runFinalization();
            // Runtime.getRuntime().gc();
            // System.gc();
            // decodeFile(f);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T18:30:26.900

我在另一个 StackOverFlow 问题中写了一个建议摘要：[Android: BitmapFactory.decodeStream() out of memory with a 400KB file with 2MB free heap](https://stackoverflow.com/questions/11820266/android-bitmapfactory-decodestream-out-of-memory-with-a-400kb-file-with-2mb-f/16528487#16528487)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-16T12:10:03.753

如果你想避免 OOM，你可以捕捉 OOM 并增加 sampleSize 直到图像可以被解析：

```
private Bitmap getBitmapSafely(Resources res, int id, int sampleSize) {
// res = context.getResources(), id = R.drawable.yourimageid
    Bitmap bitmap = null;
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inPurgeable = true;
    options.inSampleSize = sampleSize;
    try {
          bitmap = BitmapFactory.decodeResource(res,
                      id, options);
    } catch (OutOfMemoryError oom) {
        Log.w("ImageView", "OOM with sampleSize " + sampleSize, oom);
        System.gc();
        bitmap = getBitmapSafely(res, id, sampleSize + 1);
    }

    return bitmap;
} 
```

希望能帮助到你。

**不适合捕获错误，只是一种解决方法。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-10T07:52:24.543

实际上问题出在开发操作系统上。在与 iOS 不同的 android 中，谷歌人基于相机分辨率开发了这个。位图占用大量内存，特别是对于照片等丰富的图像。不同的相机捕获具有不同像素的图像（不同的手机具有不同的相机像素容量）。在基于该像素的android中，只有捕获的图像才会占用内存。所以很明显，低像素容量的手机不会上传高分辨率图像。在 android 操作系统中，每个应用程序最多分配 16MB。如果上传的图像超过此值，则会发生 java.lang.OutofMemoryError: bitmap size超出 VM budget 并且应用程序崩溃。参考这个 [http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# ms-access - 在子表单中显示带有变量字段的交叉表查询

> ID：14235290
> 
> 赞同：1
> 
> 时间：2013-01-09T12:32:27.383
> 
> 标签：ms-access, report, parent-child, crosstab, subform

Microsoft Access 2010 在这里。使用报告（和表格）。

我有一个交叉表查询，它可以转换（w/UNION ALL，谢谢 Bluefeet！）并旋转另一个“源查询”，目的是使结果对读者更加连贯。源查询的字段不会更改，但行会更改，因为源查询仅选择过去 30 天的结果；后续交叉表查询的字段在重新查询时不会保持不变，因为行已成为字段，反之亦然。我想知道的是如何按原样在子表单中显示这样的交叉表查询；即作为没有记录依赖性的简单参考。

交叉表查询中的变量字段示例：

```
Criteria     | 11/26/2012 | 11/27/2012 | 11/29/2012 | 12/6/2012 ...
# Insp       | 7          | 8          | 8          | 9
# Passed     | 5          | 4          | 5          | 7
# Failed     | 2          | 4          | 3          | 2
% Acceptance | 71%        | 50%        | 63%        | 78% 
```

我已成功地将交叉表查询绑定到子表单“子”以通过其“源对象”属性进行显示，并实现了所需的最终结果，但存在不希望参考的记录选择栏，以及显示选项通常在表单/子表单上找到的它在子表单“child”上消失了。

这让我想知道是否有另一种方法可以在子表单中显示交叉表查询，或者我是否正在寻找完全错误的方向来完成任务。该报告包括一个基于源查询的图表，下面是交叉表查询，显示仅供参考。感谢您的帮助！

# excel - 通过数据管道在 PowerBuiler 中导入 Excel 表

> ID：14235292
> 
> 赞同：0
> 
> 时间：2013-01-09T12:32:37.670
> 
> 标签：excel, powerbuilder

尝试在 ODBC 配置文件中查看表数据时会发生此错误。

```
 SQLSTATE = 37000
    [Microsoft][ODBC Excel Driver] Syntax error in FROM clause.
    SELECT categoryid, categoryname, description FROM sheet$northwind__modded__for_sync_via_ms_access_#accdb 
```

'#' 符号有问题吗？我有必要使用数据管道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:49:32.107

在 Powerbuilder 中创建数据库配置文件时尝试`DelimiterIdentifier = 'Yes'`在 DBParm 中进行设置。

[关联](http://www.sybase.co.uk/detail?id=44462)

# jquery - 在 Codeigniter 上滚动时加载

> ID：14235293
> 
> 赞同：1
> 
> 时间：2013-01-09T12:32:39.597
> 
> 标签：jquery, scroll

编辑：我已经消除了我必须向控制器指示 URL 并使用 url 本身的变量 var path，现在路径错误消失了，但我没有得到任何数据。文件通信中的某些内容没有被传递。

我想要做的是在滚动时，让页面从服务器加载数据。为此，我使用了一个单独的 jquery 文件、一个视图、控制器和模型。

查询文件。你会看到它非常简单：

```
 $(document).ready(function() {

    var pageLoaded = 1; //this basically says that we are on page 1 of the results

      $(window).scroll(function()
       {

        if($(window).scrollTop() == $(document).height() - $(window).height())
        {
         pageLoaded = pageLoaded+1; //when this condition has met, increase the pageLoaded so that I can tell php to load in data for page 2/3/4/5, etc, etc

/*// below I send the data to the controller named Home its function loadData gets a variable named id_load with value = to pageLoaded*/

         $.get('home/loadData', {'id_load':pageLoaded}, 
            function(data)
            {
                if (data != "")
                {
                 $('#submissions').append(data);
                }
             }
         );
         //alert(pageLoaded);
        }
       }
      );

    }); 
```

控制器：

```
<?php if (! defined('BASEPATH')) exit ('No direct script access allowed');

class Home extends CI_Controller 
{
    function __construct()
    {

        parent::__construct();

        $this->load->model('load_model');
        $this->output->enable_profiler(TRUE);

    }

    public function loadData ()
    {
        $pageNumber = $this->input->get('id_load'); 
        $this->load_model->loadPage($pageNumber);

    }

    public function index()  
    {
      $data = array('title' =>'homepage', 'main_content' =>'home_v');
      $this->load->view('template', $data); 

    }

} 
```

当你滚动时，模型应该显示内容，因为它获得了新的值：

```
<?php

class Load_model extends CI_Model {

    public function loadPage ($pagenumber )

    {

        $sql = $this->db->where('id_load', $pagenumber)->get('data');

        $cadena = "";

        foreach($sql->result_array() as $reg)
        {
        $cadena =   $reg['content'];    

        }

        echo $cadena;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T02:43:48.683

我认为这里的问题是您没有定义或包含 URL。执行此操作的最佳做​​法是在标题部分定义或包含基本 URL。将以下行放在标题中

var base_url=;

所以然后在你想要的任何软件中使用这个 base_url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:47:42.653

试试这个..

在您的标题中，在顶部`<head>`放置一个 javascript 变量。`base_url()`

这里

**html**

```
<head>
  <script>
     var base_url=<?php echo base_url()?>;
  </script>
 ....
</head> 
```

**jQuery**

```
var path = base_url + 'index.php'; 
```

# php - 使用 PHP，如何在一个非常大的 .txt 文件的末尾有效地插入一行

> ID：14235300
> 
> 赞同：0
> 
> 时间：2013-01-09T12:33:28.653
> 
> 标签：php, text

.txt 文件大约 500M，当我使用 fopen 时，我的电脑无法工作，所以我想要任何其他方式来完成任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:36:17.080

尝试

```
 $fp = fopen( "file.txt", 'a' );
 fwrite( $fp, "\n" );
 fclose( $fp ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:36:29.207

如果你在 Linux 上运行 PHP 脚本，你可以这样做：

```
$newLine  = 'some text';
$filename = 'large.txt';
system('echo "' . $newLine . '" >> ' . $filename); 
```

# android - 根据印度时间在 SQLIte DB 中添加 TIMESTAMP 字段

> ID：14235302
> 
> 赞同：0
> 
> 时间：2013-01-09T12:33:36.357
> 
> 标签：android, sqlite, timestamp

我想在 SQLite DB 中保存当前时间。我正在使用以下代码语法 -

```
private static final String CREATE_GROUP_MESSAGES_TABLE = "create table if not exists "
        + TABLE_GROUP_MESSAGE
        + "( "
        + GROUP_NAME
        + " VARCHAR NOT NULL, "
        + ENTRY_FROM
        + " VARCHAR NOT NULL, "
        + COLUMN_GROUPTEXT
        + " TEXT NOT NULL, "
        + COLUMN_ISSENDMESSAGE
        + " VARCHAR NOT NULL, "
        + COLUMN_GROUPIMAGEPATH
        + " TEXT NOT NULL, "
        + GROUP_COLUMN_TYPE
        + " INTEGER NOT NULL, "
        + GROUP_COLUMN_KEY
        + " INTEGER primary key autoincrement, "
        + GROUP_COLUMN_TIMESTAMP
        + " DATETIME DEFAULT CURRENT_TIMESTAMP);"; 
```

但以上是根据格林威治标准时间给我的时间。如何根据 GMT+5 或其他任何方式获取/存储时间。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:48:27.290

做就是了：

```
GROUP_COLUMN_TIMESTAMP DATETIME DEFAULT (datetime('now','localtime')) 
```

它将默认为用户的本地时间，而不是 GMT

# grails - 服务回调的 grails 约束 - 属性需要大写首字母

> ID：14235304
> 
> 赞同：0
> 
> 时间：2013-01-09T12:33:44.347
> 
> 标签：grails

我已经升级了一个 grails 项目 1.3.9 -> 2.2，现在我收到一个关于回调到具有大写首字母的外部服务的约束的错误。我已经删除了此属性的约束要求，但想找到一种方法来保留约束功能，但我需要一个带有大写字母的属性。我不控制发送回大写参数的外部 API。

回调闭包如下所示：

```
class CallbackCommand{                                                                                                                                                       
   String token                                                                                                                                                                    
   String ID                                                                                                                                                                  

   static constraints = {                                                                                                                                                          
      token nullable: false                                                                                                                                                        
      //ID nullable: false                                                                                                                                                    
   }                                                                                                                                                                               
} 
```

我已经评论了 ID 约束，因为它由于首字母大写而失败。如何强制执行此约束但保持参数命名与外部 API 一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:57:32.090

为属性定义一个自定义验证器，`ID`如下所示：

```
@grails.validation.Validateable
CallbackCommand{                                                                                                                                                       
    String token                                                                                                                                                                    
    String ID                                                                                                                                                                  

    static constraints = {                                                                                                                                                          
        token nullable: false 

        ID(validator:{val,obj->
            return(obj.ID != null)
        })
    }
} 
```

# android - Android：如何引用 EditText 视图

> ID：14235305
> 
> 赞同：0
> 
> 时间：2013-01-09T12:33:47.177
> 
> 标签：android, view, android-edittext, textview

我有以下布局：

```
<TextView 
    android:id = "@+id/HRNoninTextBox"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_below="@+id/exitbtn" 
    android:text="Heart Rate"
    android:textSize = "20sp"/>
<EditText 
    android:id="@+id/labelNoninHeartRate" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="00" 
    android:layout_alignParentRight="true">                         
</EditText> 
```

从代码中，我以这种方式引用这些视图，形成我的活动：

```
TextView tvHr= (TextView)findViewById(R.id.HRNoninTextBox);

EditText etHr = (EditText)findViewById(R.id.labelNoninHeartRate); 
```

第一个不会产生任何错误，而第二个语句会产生以下错误：

```
 01-09 13:24:57.599: W/dalvikvm(28816): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
01-09 13:24:57.619: E/AndroidRuntime(28816): FATAL EXCEPTION: main
01-09 13:24:57.619: E/AndroidRuntime(28816): java.lang.RuntimeException: Unable to start activity ComponentInfo{aid.assistant233/aid.assistant233.AidAssistant233Activity}: java.lang.ClassCastException: android.widget.TextView
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.os.Looper.loop(Looper.java:130)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.app.ActivityThread.main(ActivityThread.java:3691)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at java.lang.reflect.Method.invokeNative(Native Method)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at java.lang.reflect.Method.invoke(Method.java:507)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at dalvik.system.NativeStart.main(Native Method)
01-09 13:24:57.619: E/AndroidRuntime(28816): Caused by: java.lang.ClassCastException: android.widget.TextView
01-09 13:24:57.619: E/AndroidRuntime(28816):    at aid.assistant233.AidAssistant233Activity.onCreate(AidAssistant233Activity.java:331)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-09 13:24:57.619: E/AndroidRuntime(28816):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
01-09 13:24:57.619: E/AndroidRuntime(28816):    ... 11 more 
```

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:57:44.680

**Step1：**你可以像大家说的那样清理/构建你的项目。但是如果您没有通过 clean/build 解决您的问题，请检查我的第 2 步。

**步骤：2：** 我不确定，但你能再检查一下你的 xml 文件吗？

如果您有两个具有相同 ID 的元素，也可能发生这种情况：

```
<TextView android:text="Hello Ahmedabad:" 
    android:id="@+id/txtahmedabad" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content">
</TextView>

<EditText android:layout_height="wrap_content"
    android:layout_width="fill_parent" 
    android:id="@+id/txtahmedabad" 
    android:text="">
</EditText> 
```

如果是这样，那么给他们不同的 ID - 它可以选择第一个（`TextView`）显然不能转换为`EditText`.

希望它会对你有所帮助。

# ruby-on-rails - Rails：可选的查找字段

> ID：14235306
> 
> 赞同：0
> 
> 时间：2013-01-09T12:33:48.270
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我使用**collection_select**为用户提供有效选择的列表。我只存储了查找表中的**id 。****然后我在显示**视图中调用查找的类以检索 id 的实际值。

在编辑中：

```
= f.collection_select :language_id, Language.find(:all, :conditions => ["supported = 't'"]), :id, :language, include_blank: false, :prompt => "Language" 
```

在节目中：

```
%p
  %b Language:
  = Language.find(@article.language_id).language_code 
```

除非没有选择，否则一切正常。如果**@article.language_id**字段为空，则无法加载视图，因为**查找**失败。关于如何忽略空值并将该字段留空的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:40:41.680

using`find_by_id`将是一个选项，因为如果找不到 id，它不会引发错误。

不过，这会发出对数据库的调用。

所以我会检查 langunge_id 并提供默认值

```
= @article.language_id.nil? ? default : Language.find_by_id(@article.language_id) 
```

这也可以移动到模型或助手中，这样它就不会弄乱您的视图代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:49:20.070

这是一个常见的问题。只需使用`try`保留 nil 值：

```
 if @article.try(:language_id) != nil
      @code = Language.find(@article.language_id).language_code
    else
      //default nil
      @code = nil
  end 
```

# c# - 设置构建服务器以运行 NUnit Selenium 自动化测试

> ID：14235312
> 
> 赞同：0
> 
> 时间：2013-01-09T12:34:05.383
> 
> 标签：c#, selenium, build, nunit, build-automation

我被分配了一项任务，即在构建代理完成构建后设置构建服务器 (jenkins) 并运行自动化测试。

我们使用 NUnit 和 selenium 来运行自动化测试。

主要问题是等待时间。假设几个用户签入他们的源代码，运行构建并随后运行自动化测试（可能有数百个）。最好的设置方法是什么，这样每个用户都不必在队列中等待测试结果。另外，我要考虑测试结果报告等。

我从哪里开始？我什至谷歌什么？

我对这些东西很陌生，任何有关这样做的信息都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:35:12.267

您要做的第一件事是将单元测试与集成测试分开。

单元测试应该很快。由于您正在与外部组件进行交互，因此集成测试显然会变慢。

至于配置您的环境，要正确地做您想做的事情，您需要研究在主/多从配置中使用 Jenkins。这不是非常复杂，但可能需要一些时间来设置。

您最终可能要做的是在 Selenium 中设置许多作业来处理构建过程的每个部分。即，一项进行编译的工作，至少一项运行单元测试的工作，以及至少一项运行集成测试的工作（然后可能是打包或部署工作，具体取决于您想要完成的程度......）。

根据您的整体构建过程有多慢，您可以轻松地为每个组件的集成测试制定一项工作，并在不同的从机上同时运行这些工作。然后，父作业可以汇总结果并确定是否通过了签到。

对于报告，您需要安装[HTML Publisher Plugin](https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin)和[NUnit Plugin](http://wiki.jenkins-ci.org/display/JENKINS/NUnit+Plugin)。这些插件将允许您将生成的报告与其他构建工件捆绑在一起。

为了向您的团队提供反馈，您还需要查看[Wall Display Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Wall+Display+Plugin)以显示作业的状态。

# model-view-controller - 地址栏中的 MVC 链接文本

> ID：14235313
> 
> 赞同：0
> 
> 时间：2013-01-09T12:34:05.683
> 
> 标签：model-view-controller, asp.net-mvc-routing, url-routing

我用 MVC 创建了一个网站，但在路由上遇到了一点问题：地址栏中的链接地址出现了一些奇怪的参数，例如：

```
http://localhost:1413/Account/LogOn?ReturnUrl=%2f 
```

代替

```
http://localhost:1413/Account/LogOn 
```

我应该怎么做才能有自定义地址。

我不使用任何参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:39:16.553

`?ReturnUrl=%2f`当用户被自动重定向到登录页面时，ASP.NET 会添加 URL的一部分。添加它是为了在用户登录后，他们可以被重定向到他们的原始页面。

在这种情况下，`%2f`表示`/`用户尝试访问登录页面并随后被重定向到登录页面的含义。成功登录后，他们将被重定向到登录页面。

您仍然可以使用`http://localhost:1413/Account/LogOn`

# ruby-on-rails - 在 Ruby On Rails 应用程序中创建视频？

> ID：14235315
> 
> 赞同：1
> 
> 时间：2013-01-09T12:34:11.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, youtube

我正在寻找一种从我的应用程序中获取音频资产和 jpeg 的方法，这些音频资产和 jpeg 都存储在 Amazon S3 上，并将它们合并为 Youtube 接受的格式的视频。基本上，歌曲的持续时间是静态专辑插图。

我看过这篇文章提到 Ming-Ruby 以[编程方式创建视频？](https://stackoverflow.com/questions/8502353/create-videos-programatically)但我想知道 Gem 是否处于活动状态并得到维护，或者是否有其他人有做类似事情的经验并且可以提供一些提示或替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:29:19.177

您可以考虑使用 ffmpeg。下面是一些创建图像视频幻灯片的示例。[http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images)我相信你可以找到关于如何添加音频的信息。那时你应该只需要找到一个 ffmpeg gem 来包装你需要进行的调用或通过系统调用直接使用它（不过要小心）。

# angularjs - 当监听器是 Date() 函数时，角度观察器不起作用

> ID：14235317
> 
> 赞同：2
> 
> 时间：2013-01-09T12:34:12.363
> 
> 标签：angularjs

我知道我在问一个答案非常简单的问题（我是 Angular 新手，在这里提出这个问题确实需要很大的勇气；）。我有一个指令显示这样的时间：

```
Application.Directives
.directive('theClock', function(){
    return {
        retrict: 'EA',
        templateUrl: 'partials/partial.clock.html',
        link: function(scope, elem, attrs) {

            scope.dTime = Date();
            scope.$watch( function(scp){ return Date(); }, function(newVal){ 

                    scope.dTime = newVal;
                }
            );
        }
    };
}); 
```

我希望时间会更新每个 $digest 周期，但事实并非如此。我知道使用`setInterval`ot`$timeout`是另一种方法，但我真的不想要时钟，我想了解为什么更新不会发生。顺便说一句，我`$apply()`在检查后确实打电话`$$phase`- 没有帮助

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:15:45.493

$watch 函数默认按引用比较对象，这对于字符串/数字值更快更好，但不适用于像 Date 这样的复杂对象 - Date 可能会更改，但它始终是相同的 Date 对象，所以引用没有改变。

这是为了避免对巨大数组进行大量的相等测试。

现在，虽然这可能有效（注意 $watch 函数的第三个参数设置为 true）：

```
scope.dTime = new Date();
scope.$watch( function(scp){ return new Date(); }, function(newVal){ 

  scope.dTime = newVal;
  }, true
); 
```

它可能会在每次轮询 $watch 函数时触发更改事件（意味着每个应用程序周期）

如果您想每秒触发一次，请从 Date() 返回秒数，例如 return Math.floor(new Date().valueOf()/1000)。然后根据需要设置 dTime。

**更新**

虽然 Angular 的检查可以使用`return Date()`，但问题是由于 Angular 的脏检查系统 - 它只会在模型（意味着在 $scope 中定义的模型）触发更改时检查 $watch 函数。

这个从 Valentyn [Shybanov](http://plnkr.co/edit/pDZcJrGZMWG4YbXjPCvu?p=preview)分叉出来的 Plnkr 可以作为一个例子 - 时钟函数触发模型的更改，并且该更改触发 $watch 函数。

**另外**，请注意[这个版本](http://plnkr.co/edit/PwI1QmBmfMD24eA9wita?p=preview)，它使用了 window.setTimeout。它只能使用 $apply 方法来通知 angularJS 发生了变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T17:49:34.433

> “我想了解为什么没有更新。”

我认为这张图片（来自[概念概述页面](http://docs.angularjs.org/guide/concepts)）最好地解释了它：

![角事件循环](../Images/cb987e9ff9280fed888d5ef287560605.png)

除非调用 $apply()，否则不会检查 $watch 列表。$apply 是我们进入“$digest 循环”的方式。许多（全部？）Angular 内置指令会自动调用 $apply（所以我们不必这样做）。例如，正如@Tiago 已经提到的，更改绑定的 $scope 属性（在 Angular 内部）将导致 $apply 被调用。我们也可以自己显式调用$apply（例如，从我们定义的第三方库回调函数内部——如果我们不在这里调用$apply，我们就不会进入$digest 循环）。

底线：除非我们进入蓝色框（“Angular 执行上下文”），否则不会检查 $watch 列表——因此不会执行脏检查。

# c# - ZedGraph - 定时器还是线程？

> ID：14235318
> 
> 赞同：0
> 
> 时间：2013-01-09T12:34:13.813
> 
> 标签：c#, multithreading, timer, zedgraph

目前，我正在使用线程来自动填充`zedgraph chart`. 问题是它非常慢，不利于生产。

知道：
1\. 有一个`Thread`运行后台从远程服务器获取新数据并将它们存储在本地文本文件中。
2\. 有另一个线程访问本地文件并读取数据并刷新zedgraph图表。

*我个人认为这会使应用程序运行非常缓慢。*
`Timer`组件可能更好地处理这种东西。
有人在 ZedGraph 实时数据方面有经验吗？
或者任何建议都会受到欢迎。

**编辑：更新用户界面**
另外我想知道如何在线程中更新 UI，这样用户就不必关闭和打开表单来查看图表。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:41:25.253

我将采取的方法如下：

您创建一个保存数据的类（这也可以是您已经拥有的同一个类），我将称之为示例`InformationHolder`。

```
class InformationHolder {
    private static InformationHolder singleton = null;
    public List<float> graphData; //Can be any kind of variable (List<GraphInfo>, GraphInfo[]), whatever you like best.

    public static InformationHolder Instance() {
        if (singleton == null) {
            singleton = new InformationHolder();
        }

        return singleton;
    }
} 
```

现在您需要一个类，它将在后台获取您的信息，对其进行解析并将其插入到上述类中。

示例`Thread.Sleep()`：

```
class InformationGartherer {
    private Thread garthererThread;

    public InformationGartherer() {
        garthererThread = new Thread(new ThreadStart(GartherData));
    }

    private void GartherData() {
        while (true) {
            List<float> gartheredInfo = new List<float>();

            //Do your garthering and parsing here (and put it in the gartheredInfo variable)

            InformationHolder.Instance().graphData = gartheredInfo;

            graphForm.Invoke(new MethodInvoker( //you need to have a reference to the form
                   delegate {
                       graphForm.Invalidate(); //or another method that redraws the graph
                   }));

            Thread.Sleep(100); //Time in ms
        }
    }
} 
```

示例`Timer`：

```
class InformationGartherer {
    private Thread garthererThread;
    private Timer gartherTimer;

    public InformationGartherer() {
        //calling the GartherData method manually to get the first info asap.
        garthererThread = new Thread(new ThreadStart(GartherData));

        gartherTimer = new Timer(100); // time in ms
        gartherTimer.Elapsed += new ElapsedEventHandler(TimerCallback);
        gartherTimer.Start();
    }

    private void TimerCallback(object source, ElapsedEventArgs e) {
        gartherThread = new Thread(new ThreadStart(GartherData));
    }

    private void GartherData() {
        List<float> gartheredInfo = new List<float>();

        //Do your garthering and parsing here (and put it in the gartheredInfo variable)

        InformationHolder.Instance().graphData = gartheredInfo;

        graphForm.Invoke(new MethodInvoker( //you need to have a reference to the form
                delegate {
                    graphForm.Invalidate(); //or another method that redraws the graph
                }));
    }
} 
```

要获得对表单的引用，您可以使用与 InformationHolder 相同的技巧：使用单例。当您想使用信息时，只需从以下位置获取信息`InformationHolder`：

```
InformationHolder.Instance().graphData; 
```

正如我所说，这就是我个人将如何解决这个问题。可能有更好的解决方案我不知道。如果您有任何问题，可以在下面发布。

# jenkins - 詹金斯的 ssh 错误 127

> ID：14235321
> 
> 赞同：1
> 
> 时间：2013-01-09T12:34:30.087
> 
> 标签：jenkins, jenkins-plugins

在 Jenkins 上运行作业时，我得到以下控制台输出：

**在工作空间/home/admin/.jenkins/jobs/ramdisk/workspace
[SSH] 执行预构建脚本：
./build_script.sh
[SSH] 退出状态：127
[SSH] 执行构建后脚本：
[ SSH] 退出-状态：0
完成：成功**

当我在终端上手动运行上述脚本时，没问题。你能指导一下这里可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:14:01.250

首先，当您在终端上手动运行脚本时，您也可能会获得退出状态 127，但由于您没有检查终端上的退出状态，因此您不会注意到它。

Jenkins 假设只有退出代码 0 表示成功。任何其他退出代码都意味着失败。如果你的 build_script.sh 以非标准方式使用退出代码，它会让 Jenkins 认为它​​失败了。

直接在机器上执行以下操作：

```
./build_script.sh
echo $? 
```

确保在脚本命令之后立即执行 echo 命令，而不执行任何其他操作。这将在命令行上打印退出代码。在这里回答你得到什么。

其次，在文本编辑器（vim、nano，无论你使用什么）中打开 build_script.sh 并搜索`exit 127`. 如果找到它，请查看它从哪个块退出。如果您在阅读脚本时遇到问题，请将脚本的内容（或只是您找到的块`exit 127`）粘贴到此处，我们可以告诉您为什么脚本认为它需要退出。

# drupal - 如何向每个用户发送关于他们在 Drupal 中的内容的自动电子邮件

> ID：14235322
> 
> 赞同：3
> 
> 时间：2013-01-09T12:34:35.170
> 
> 标签：drupal, drupal-7

我有一个 Drupal 站点，它允许用户创建一个帐户并发布他们自己的内容。但是，我已经尝试了几个小时，但没有运气尝试设置一个电子邮件服务，例如每周向所有用户发送一封包含内容的电子邮件。该电子邮件将向他们显示他们的内容获得了多少页面点击量。任何帮助都感激不尽！干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:44:39.207

我和我的同事找到了解决方案。我们首先创建了一个规则，它将在 cron 作业上运行以执行下面的自定义 php。

```
$type = '<node_type>';

$articles = db_select('node')
->fields('node', array('nid', 'title'))
->condition('type', $type, '=')
->execute()
->fetchAllKeyed();

$nodes = array();
foreach ($articles as $nid => $title) {
    $nodes[] = node_load($nid);
}

$checked = array();

foreach($nodes as $node) {
    if(!in_array($node->nid, $checked)) {
        $statistics = statistics_get($node->nid);
        $email = $node->field_email['und'][0]['email'];
        $subject = 'Content view update';
        $headers = 'From: you@domain.com' . "\r\n" .
        'Reply-To: you@domain.com' . "\r\n" .
        'X-Mailer: PHP/' . phpversion();

        $message =   'Hi,
        Your content has been viewed ' . $statistics . ' times';

        global $language;
        $params['subject'] = t($subject);
        $params['body']    = array(t($message));

        drupal_mail('smtp', 'smtp-test', $email, $language, $params);
        $checked[] = $node->nid;

    }
} 
```

php 脚本循环遍历所有具有类型的自定义内容节点`$type`并检索标题、电子邮件和统计信息，然后将信息通过电子邮件发送给内容所有者。

如果有人有更好的解决方案，请您发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:42:59.763

我认为在这种情况下，您必须使用[drupal 规则](http://drupal.org/project/rules)模块。

# git - git clone 失败，git gc

> ID：14235323
> 
> 赞同：3
> 
> 时间：2013-01-09T12:34:43.330
> 
> 标签：git

尝试克隆一个裸存储库并收到以下错误消息。存储库相当大，总大小为 3GB。我要克隆到的客户端是 MacOSX。

```
remote: Counting objects: 20118, done.
remote: Compressing objects: 100% (16577/16577), done.
error: pack-objects died of signal 9 3.49 MiB | 745 KiB/s     
error: git upload-pack: git-pack-objects died with error.
fatal: git upload-pack: aborting due to possible repository corruption on the remote side.
remote: aborting due to possible repository corruption on the remote side.
fatal: early EOF
fatal: index-pack failed 
```

我一开始也有这个问题，并用

```
git config pack.windowMemory 5m
git config pack.packSizeLimit 10m 
```

[就像这篇](https://stackoverflow.com/questions/4826639/repack-of-git-repository-fails)文章中提到的

git repack 在远程主机上工作，没有错误。git gc 不工作，但以以下错误消息结束。

```
Counting objects: 20118, done.
Delta compression using up to 2 threads.
error: failed to run repack6551/16577) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-26T01:46:07.510

我有同样的问题。设置以下参数：

```
[core]  
  packedGitLimit = 10m  
  packedGitWindowSize = 10m  

[pack]  
  deltaCacheSize = 10m  
  packSizeLimit = 10m  
  windowMemory = 10m 
```

然后重新包装：

> > git 重新打包

最后使用 --aggressive 参数运行 git gc ：

> > git gc -- 激进的

它为我解决了这个问题。如果没有 --aggressive 参数，它对我不起作用。请注意，我可以控制服务器，并且我在服务器上的 repo 中运行了这些命令（在 Debian 机器上的 Gitlab 服务器实例上，以 root 身份，使用 sudo -u git ...，以避免弄乱文件所有权和权限）。如果您无权访问远程存储库，则该方法可能不适合。我的 git 版本是 1.8.3。

# javascript - jQuery zClip 复制到剪贴板，用于引导下拉列表中的多个链接？

> ID：14235324
> 
> 赞同：0
> 
> 时间：2013-01-09T12:34:44.517
> 
> 标签：javascript, jquery, jsfiddle, clipboard-interaction

**如果这不能用于跨浏览器，那么任何评论将不胜感激。**

我想要实现的是我的页面上的多个“复制到剪贴板”链接，例如......

```
<a href="#" data-copy="<?php echo $original[0]; ?>" class="copy">Copy Original Link</a>
<a href="#" data-copy="<?php echo $medium[0]; ?>" class="copy">Copy Medium Link</a>
<a href="#" data-copy="<?php echo $web[0]; ?>" class="copy">Copy Web Link</a> 
```

只是没有太多的运气让任何东西工作。

我正在使用[zClip](http://www.steamdev.com/zclip/)，并尝试使用 jQuery onClick 和数据属性来触发，如下所示。

但就是无法让它发挥作用。[见小提琴](http://jsfiddle.net/Vr4Ky/5/)。

```
var copyText = 0;

$("a.copy").on('click', function () {

  var copyText = $(this).attr('data-copy');
  return false;

}).each(function () {

  $(this).zclip({

    path: 'http://zeroclipboard.googlecode.com/svn-history/r10/trunk/ZeroClipboard.swf',
    copy: copyText,
    beforeCopy: function () {

    },
    afterCopy: function () {

      alert(copyText + " has been copied!");

    }

  });

}); 
```

请在此处使用[zClip](http://www.steamdev.com/zclip/) jquery 插件查看我的新小提琴。

[http://jsfiddle.net/Vr4Ky/5/](http://jsfiddle.net/Vr4Ky/5/)

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:16:16.733

这是一个[更新的演示](http://jsfiddle.net/Vr4Ky/180/)，可以执行您尝试执行的操作：

使用这个（相同的）HTML：

```
<a href="#" data-copy="http://test.one.com/" class="copy">Copy Original Link</a>
<br />
<a href="#" data-copy="http://test.two.com/" class="copy">Copy Medium Link</a>
<br />
<a href="#" data-copy="http://test.three.com/" class="copy">Copy Web Link</a> 
```

该脚本应该可以工作：

```
$("a.copy").on('click', function (e) {
  e.preventDefault();
}).each(function () {
  $(this).zclip({
    path: 'http://www.steamdev.com/zclip/js/ZeroClipboard.swf',
    copy: function() {
      return $(this).data('copy');
    }
  });
}); 
```

这就是我所做的。首先`alert`，您添加的 via`afterCopy`实际上是默认设置，因此您无需为此添加额外的代码。属性也`data-copy`应该通过 jQuery 的[`data`函数](http://api.jquery.com/jQuery.data/)访问。最后，我将 SWF 引用与 JavaScript 放在同一主机上（根据 SWF 中的安全代码，这可能不是必需的，但似乎有必要让 jsfiddle 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:32:21.253

使用[Jason Sperske](https://stackoverflow.com/users/16959/jason-sperske)解决方案，我找到了一种解决方法来解决在引导程序中使用时的问题。

这是如何让函数与引导下拉菜单一起使用。

```
$('.btn-group').addClass('open');
$("a.copy").on('click', function (e) {
  e.preventDefault();
}).each(function () {
  $(this).zclip({
    path: 'http://www.steamdev.com/zclip/js/ZeroClipboard.swf',
    copy: function() {
      return $(this).data('copy');
    }
  });
});
$('.btn-group').removeClass('open'); 
```

那么这个css也需要添加，停止flash文件绝对div定位在list元素之外。

```
.dropdown-menu li {
    position: relative;
} 
```

见工作小提琴。[http://jsfiddle.net/Vr4Ky/27/](http://jsfiddle.net/Vr4Ky/27/)

# php - 获取推荐人

> ID：14235328
> 
> 赞同：1
> 
> 时间：2013-01-09T12:34:52.533
> 
> 标签：php, codeigniter, xml-rpc

我正在运行一个`xml-rpc`服务器来共享我网站的**api**方法。

我想记录所有请求，以找出哪些站点实际上正在向我的`xml-rpc`服务器发出请求。

*有没有办法做到这一点？*

我所尝试的只是研究`$_SERVER`和`$request`变量——它们里面什么都没有。
谢谢。

CI v 2.1.3 内置 xmlrpcs 库

# node.js - Node.js 和 ACL

> ID：14235335
> 
> 赞同：22
> 
> 时间：2013-01-09T12:35:37.177
> 
> 标签：node.js, express, mongoose, acl

我为我的项目选择了**Node.js+Express+Mongoose**。到目前为止，我不需要使用**ACL**，但是在项目的这个阶段我需要实现它。

NPM 包含几个模块，但该选择哪一个？

请告诉我您使用 ACL (Node.js+Express+Mongoose) 的经验。如果您知道任何教程，那就太好了 :)，但它不是那么需要，我确切需要知道 Node.js 程序员使用什么 ACL。

最后一种可能性是编写自己的 acl 中间件，这对我来说可能是有趣的经历。我想 ：）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-09T17:54:51.243

[https://npmjs.org/package/acl](https://npmjs.org/package/acl)

最常用的 ACL 模块。它也有用于保护资源和 mongo 支持的 Express 中间件。

**9.2020**更新：****

 ***   acl 包 2 年未更新
*   有一个最近更改的分支：[https ://github.com/flash-oss/node_acl](https://github.com/flash-oss/node_acl)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-03-06T21:14:58.253

acl 包在过去 2 年没有更新。我是 CASL 的作者 - JavaScript 的同构权限管理 - [https://github.com/stalniy/casl](https://github.com/stalniy/casl)

根据 npm 趋势，它是当今最常用的库 - [https://www.npmtrends.com/acl-vs-@casl/ability](https://www.npmtrends.com/acl-vs-@casl/ability)

顺便说一句，它使与 MongoDB 和 mongoose 的集成非常容易！**

# android - Android Maps API v2 - 标记旋转的方法？

> ID：14235336
> 
> 赞同：4
> 
> 时间：2013-01-09T12:35:52.657
> 
> 标签：android, google-maps

我们正在将应用程序从 v1 Maps API 移植到 v2 API，并且遇到了标记问题。

我们需要指向特定地理方向的标记。在 V1 中，我们可以在绘制时构建指向正确方向的位图，但在 V2 中，标记位图不能更改。

我不确定最好的方法是在地图旋转时销毁并重新构建所有标记（这听起来像是性能问题），还是尝试自己绘制它们。这可以通过 TileOverlay 或通过我们坐在地图顶部的我们自己的视图。

我真的不喜欢这些方法中的任何一种。有人试过吗？

更新：

我已经尝试通过我们自己的视图进行绘图，但是在拖动地图时这太滞后了。

我现在正在销毁并重新创建标记，但这（正如预期的那样）是一个性能问题，需要大约 2000 毫秒来更新 60 个标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-30T14:10:34.677

大家好消息！Google 为 Maps API 添加了轮换功能，因此我们不必再推出自己的实现了。

他们还添加了平面标记，我想这与原始问题更相关。扁平标记将始终保持其最初在地图上绘制的方向：[https ://developers.google.com/maps/documentation/android/marker#flatten_a_marker](https://developers.google.com/maps/documentation/android/marker#flatten_a_marker)

唯一的要求是您参考最新版本的 Google Play 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:55:52.967

你不能用`addMarker(new MarkerOptions())`方法吗？

如果您需要自定义标记，您可以创建一个实现`InfoWindowAdapter` 并使用该实现，例如 `mMap.setInfoWindowAdapter(new CustomInfoWindowAdapter());`

这是[InfoWindowAdapter的文档](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T14:56:01.107

我有一个类似的问题，我有需要旋转的标记。我的解决方案是让标记所代表的对象负责生成标记。我在对象中有一些方法，如下所示：

```
protected Marker getMarker(GoogleMap map) {
    if (this.marker == null) {
        marker = map.addMarker(new MarkerOptions().position(location).
            icon(BitmapDescriptorFactory.fromBitmap(BusMarkerImageFactory.
            getMarkerIcon(heading))));
    }
    return marker;
}

protected void updateMarker(GoogleMap map) {
    if (marker != null) {
        rotateIcon();
        marker.setPosition(location);
    } else {
        getMarker(map);
    }

private void rotateIcon() {
    marker.setIcon(BitmapDescriptorFactory.
        fromBitmap(BusMarkerImageFactory.getMarkerIcon(heading)));
} 
```

这是来自一个绘制公共汽车的系统，其标记指向它们前进的方向，所以当然，您的代码会有所不同，但概念非常相似。与其重建整个标记，不如在某处保留对它的引用，然后简单地重置图标。

当然，为微小的更改绘制所有这些位图会消耗内存。我在（错误命名的）BusMarkerImageFactory 中使用了享元模式来为 16 个可能的航向范围保留 16 个图像。它是一个静态类，只接受标题并返回我映射到该范围的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:03:46.187

我还在为新 API 重写我的应用程序（Runbot），并且必须弄清楚如何创建代表里程碑的自定义标记（如 1 公里、2 公里、...）以及如何根据缩放显示或不显示所有里程碑等级。我有一个用于 v1 API 的自定义可绘制对象，我现在渲染标记的工作就是关于这个（`Position`是我自己的一个类，它保存位置和更多信息；这里需要的只是它的`LatLng`属性）：

```
private void addMarker(Position p, MilestoneDrawable milestone) {
    if (mMarkers.containsKey(p)) {
        mMarkers.get(p).setVisible(true);
    } else {
        Marker m = mMap.addMarker(new MarkerOptions()
            .position(p.latLng)
            .icon(BitmapDescriptorFactory.fromBitmap(Util.drawableToBitmap(milestone)))
            .anchor(0.5f, 1.0f) // bottom center
            );
        mMarkers.put(p, m);
    }
} 
```

除了创建和添加自定义标记外，您看到的是我将标记保存在 a 中`HashMap`，因此我不必一直销毁和创建它们。当涉及到缩放和决定显示哪些标记时，我首先将所有标记设置为不可见，然后调用`addMarker()`我想要显示的标记，以及我已经在其中的标记`HashMap`再次显示。

我希望这对你有所帮助。我对新的 API 有点复杂的感觉......

# c#-4.0 - 在调用匿名委托之前和/或在它们运行时是否持有锁？

> ID：14235338
> 
> 赞同：1
> 
> 时间：2013-01-09T12:35:59.280
> 
> 标签：c#-4.0, locking, anonymous-methods

如果我有：

```
lock(myLockObject)
{
    mySharedBuffer.Modfiy();
    something.BeginDoStuff(new Action(delegate()
        {
            mySharedBuffer.Modify();
        }));
} 
```

并且提供给 BeginDoStuff() 的回调在另一个线程上被回调 - 最终运行回调时是否持有/重新获得锁？（我认为锁丢失了，我需要再次锁定，但找不到这样说的文档）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:38:29.300

> 最终运行回调时是否持有/重新获得锁？

不——没有魔法发生！

`BeginXXX`立即返回，控制退出`lock`块并释放锁。

如果您想在回调中再次获得锁，您将需要另一个`lock`块。

与所有锁定一样，这意味着您必须`mySharedBuffer`在释放锁定时使对象保持一致状态。`BeginXXX`此外，在您释放锁之后和您的回调再次获得锁的时间之间，该对象可能被另一个线程修改。

* * *

如果 的实现`BeginXXX`可以同步执行回调，那么调用栈就会像正常的顺序代码一样，仍然会持有锁。在这种情况下，如果你尝试在回调中再次获取锁，它会立即获取，因为`Monitor`允许在同一个线程上递归获取锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:39:59.847

不可以。匿名代表不属于`lock`地区。

通常 BeginXXX 方法执行异步操作，并立即返回。相应的 EndXXX 方法也在那里等待操作完成。

如果要锁定匿名委托，则需要使用嵌套锁定。

```
lock(myLockObject)
{
    mySharedBuffer.Modfiy();
    something.BeginDoStuff(new Action(delegate()
        {
            lock (myLockObject) // nested locking here
            {
               mySharedBuffer.Modify();
            }
       }));
} 
```

# c# - 在 c# 中将日期转换为刻度（用于表存储查询）

> ID：14235345
> 
> 赞同：3
> 
> 时间：2013-01-09T12:36:30.170
> 
> 标签：c#, date, azure, azure-table-storage

我有一个表存储，其中分区键是每秒生成的 DateTime 滴答声。

我想通过查询当时生成的分区键来检索某个日期的记录。

我想我需要一种方法来提供日期并将其转换为刻度。还是有更好的查询方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:44:08.990

听起来您需要在`.Ticks`日期时间使用该属性：

[http://msdn.microsoft.com/en-gb/library/system.datetime.ticks.aspx](http://msdn.microsoft.com/en-gb/library/system.datetime.ticks.aspx)

如果没有真正了解您的数据结构，您可能需要某种查询之间的查询来获取您需要的所有记录，可能提供两个日期。

请注意，如果刻度键不是通过 C# 生成的，那么您可能需要使用生成刻度的任何机制来获得具有相同精度级别的键，请参见下面的 t-sql 示例链接：

[T-sql，滴答声，时间戳](https://stackoverflow.com/questions/5080127/t-sql-ticks-timestamp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:17:22.563

实际上，它不仅仅是使用 .Ticks。前段时间我在博客上写过：[NuGet package for create and querying Table Storage entity in (reverse) chronological order](http://fabriccontroller.net/blog/posts/nuget-package-for-storing-table-storage-entities-in-reverse-chronological-order/)。NuGet 包（同时支持新旧表存储 SDK）允许您根据当前时间创建实体，还允许您查询它们（甚至支持日期范围）。

**创建实体**（查看`RowKey.CreateChronological`）

```
foreach (var blogPost in BlogReader.Read())
{
    table.Execute(TableOperation.Insert(new Model.BlogPostEntity()
    {
        Author = blogPost.Author,
        PartitionKey = "WindowsAzure",
        PublishedOn = blogPost.PublishedOn,
        Title = blogPost.Title,
        RowKey = RowKey.CreateChronological(blogPost.PublishedOn)
    }));
} 
```

**查询实体**（查看`QueryDateReverseChronologicalComparisons.After`）

```
var ctx = new Microsoft.WindowsAzure.Storage.Table.DataServices.TableServiceContext(table.ServiceClient);
var query = ctx.CreateQuery<BlogPostTableServiceEntity>("ChronoTableStorageSample")
               .Where(QueryDateReverseChronologicalComparisons.After, 
                        DateTime.Parse("2012-12-10 00:00:00"));

foreach (var blogPost in query)
{
    Console.WriteLine("{0:yyyy-MM-dd}: {1}", blogPost.PublishedOn, blogPost.Title);
} 
```

# webdriver - 远程 webdriver：元素当前不可见，因此可能无法与之交互

> ID：14235348
> 
> 赞同：2
> 
> 时间：2013-01-09T12:36:40.397
> 
> 标签：webdriver, thucydides

我使用**JAVA** + **WebDriver** (Thucydides) 和**Maven**。

我正在尝试自动上传文件。如果我从 IDE 手动启动测试，它会通过，但是当我在 Remote WebDriver 上使用 Maven 启动它时，测试会中途失败并出现错误：

```
net.thucydides.core.webdriver.WebdriverAssertionError: Element is not currently visible and so may   not be interacted with 
```

浏览器是火狐。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:50:30.910

查看修昔底德报告中的屏幕截图。看来您的元素确实不可见。

# java - JDK 6 的 LinkedBlockingQueue 替代方案

> ID：14235354
> 
> 赞同：2
> 
> 时间：2013-01-09T12:37:19.740
> 
> 标签：java, threadpoolexecutor

我正在为我的线程池使用[LinkedBlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html)

```
new ThreadPoolExecutor(20, 
                       21, 
                       10,
                       TimeUnit.SECONDS, 
                       new LinkedBlockingQueue<Runnable>()) 
```

而且我遇到了内存泄漏[错误](http://bugs.sun.com/view_bug.do?bug_id=6805775)（内存中充满了 LinkedBlockingQueue 节点，逐渐变慢），这在 JDK 7 中已修复。

我现在不想更改运行时环境或我的 JDK。

与 BlockingQueue 接口的其他实现不同，LinkedBlockingQueue 没有大小限制。你能建议任何替代队列吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:39:13.507

您链接到的修复 bug-id 也已向后移植到 Java 6。自 Java 6 Update 19 以来，它已在 Java 6 中得到修复，请参阅[http://bugs.sun.com/view_bug.do?bug_id=2186685](http://bugs.sun.com/view_bug.do?bug_id=2186685)（这个顺便说一句，与您提到的错误有关）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:38:33.840

`ArrayBlockingQueue`它由固定大小的数组支持。

`PriorityBlockingQueue`- 这是一个无界阻塞，这里优先级队列的元素根据它们的自然顺序排序，或者由队列构建时提供的比较器排序。

# jsf - PrimeFaces p:calendar with readonlyInput="true" 重置按钮导致没有 AJAX 请求

> ID：14235357
> 
> 赞同：1
> 
> 时间：2013-01-09T12:37:26.857
> 
> 标签：jsf, jquery, primefaces, calendar

由于 (readonlyInput="true") 没有属性/选项`<p:calendar>`将值重置为 null，因此目前最好的解决方案是使用一些客户端 JS 来重置值，如下所示：

[https://stackoverflow.com/a/12325640/396732](https://stackoverflow.com/a/12325640/396732)

但是，*只要清除按钮控制 AJAX 按钮*，就不会提交新的日历值。

我尝试处理结束日期按钮，例如：

```
 <p:calendar id="end-date"
                            widgetVar="myEntityEndDate"
                            value="#{myEntityManager.selectedEndDate}"
                            readonlyInput="true"
                            showOn="button">
                    <!-- update dependent "begin" calendar component: -->
                    <p:ajax event="dateSelect" process="@this" update="begin-date" />
                </p:calendar>
                <p:commandButton icon="ui-icon ui-icon-close"
                                 onclick="myEntityEndDate.setDate(null);"
                                 process="end-date"
                                 update="begin-date end-date" /> 
```

然而它不起作用......

**问：**

如何为**AJAXed** p:calendar 组件实现重置按钮？

附录：

在这里提出了同样的问题：http: [//forum.primefaces.org/viewtopic.php?f=](http://forum.primefaces.org/viewtopic.php?f=3&t=27821) 3&t=27821 。看起来 jQuery 可能是“有罪党”。无论如何，它应该是解决/可解决恕我直言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:20:04.373

如果您希望重置将反映在服务器上，您应该`action`使用 `p:commandButton`

```
<p:commandButton icon="ui-icon ui-icon-close"
    action="#{myEntityManager.resetDate}"
    process="end-date"
    update="begin-date end-date" />

public void resetDate(){
    selectedEndDate = null;
} 
```

# iphone - 当我在 ios 6.0 的设备日历中添加事件时日期为空，但它在 ios 4.x 和 5.x 中工作正常

> ID：14235360
> 
> 赞同：1
> 
> 时间：2013-01-09T12:37:40.140
> 
> 标签：iphone, objective-c, xcode, ios6, xcode4.5

我的应用程序是一个通用应用程序，在我的应用程序的一部分中，我必须在日历中添加事件我的代码在 iOS 4.x 和 5.x 中运行良好，但在 i 6.0 中，当我使用日期格式化程序将字符串转换为日期时，它返回下面的 iOS 6.0 中的 null 是代码：-

```
-(IBAction) addToPlanBttnClick:(id) sender
{
    addToPlanBttn.tag =1;
    EKEventEditViewController *addController = [[EKEventEditViewController alloc] initWithNibName:nil bundle:nil];
    EKEvent *newEvent = [EKEvent eventWithEventStore:eventStore];

    // set event title start date and end date
    NSString *str = conference.SeminarDate;
    str = [[str stringByAppendingString:@" "] stringByAppendingString:conference.StartTime];
    NSLog(@"%@",str);
    newEvent.title = conference.Subject;

    //NSString *pointDate = [[[NSString alloc] initWithString:dateLbl.text]  stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    // You can use current date or any other
    //NSString *str1 = [[NSString alloc] initWithString:[[pointDate stringByAppendingString:@", 2012 "]stringByAppendingString:[str substringWithRange:NSMakeRange(0, 5)]]];
    //NSLog(@"stri date----%@", str1);
    NSTimeZone *currentTimeZone = [NSTimeZone localTimeZone];
    NSDateFormatter* df = [[NSDateFormatter alloc]init];
    [df setDateFormat:@"EEEE dd MMMM yyyy HH:mm"];

    NSDate* startDate = [df dateFromString:str];

    //[NSDate date];
    NSLog(@"stri date----%@", startDate);
    newEvent.startDate = startDate;
    [newEvent setNotes:conference.BriefDescription];

    NSString *str1 = conference.SeminarDate;
    str1 = [[str1 stringByAppendingString:@" "] stringByAppendingString:conference.EndTime];
    NSLog(@"%@",str1);

    NSDate *endDate = [df dateFromString:str1];
    NSLog(@"stri date----%@", endDate);

    newEvent.endDate = endDate;
    addController.eventStore = self.eventStore;
    addController.event = newEvent;
    addController.editViewDelegate = self;
    [self presentViewController:addController animated:YES completion:nil];
} 
```

我的日期字符串是 2013 年 2 月 12 日星期二 10:00，日期格式化程序`[df setDateFormat:@"EEEE dd MMMM yyyy HH:mm"];`如代码所示，字符串生成的日期为：-2013-02-12 04:30:00 +0000 在模拟器和 iPad 中

但它在 iOS 6.0 上为空请建议我哪里错了。

# mysql - Mac使用终端安装和打开mysql

> ID：14235362
> 
> 赞同：81
> 
> 时间：2013-01-09T12:37:49.027
> 
> 标签：mysql, macos, installation, terminal

我下载了 mysql dmg 文件并通过向导运行。完毕。我还在系统偏好设置下启动了 mysql 服务器。

我这样做的目的是完成我的 SQL 教科书的练习。终端命令对我来说是新的，但我认为一旦我可以真正开始，完成练习就可以了。

通过研究网络，各种博客告诉我导航到终端中的 mysql 文件夹：

```
/usr/local/mysql 
```

美好的。然后它变得不太清楚，因为几乎每篇文章都有一套不同的关于如何进行的说明。昨天我在摆弄它并被提示输入密码 - 默认的 mysql 密码是什么？

有人可以给我通过终端启动和运行 mysql 的步骤吗？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2013-01-09T12:48:19.553

*（2017 年更新）*

当您安装 MySQL 时，它会为 root 用户生成一个密码。您可以使用连接

```
/usr/local/mysql/bin/mysql -u root -p 
```

并输入生成的密码。

以前，`root`MySQL 中的用户过去没有密码，只能从 localhost 连接。所以你会使用

```
/usr/local/mysql/bin/mysql -u root 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2016-07-15T05:46:44.150

打开终端并输入

```
sudo sh -c 'echo /usr/local/mysql/bin > /etc/paths.d/mysql' 
```

然后关闭终端并打开一个新终端并输入

```
mysql -u root -p 
```

点击回车，它会要求你输入密码

我在[https://teamtreehouse.com/community/says-mysql-command-not-found上找到了这个解决方案](https://teamtreehouse.com/community/says-mysql-command-not-found)

现在设置新密码类型

```
ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass'; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-06-21T04:38:59.367

在终端中，我输入：

```
/usr/local/mysql/bin/mysql -u root -p 
```

然后提示我输入安装完成后给我的临时密码。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-02-24T06:19:47.267

在 MacOS 中，Mysql 的可执行文件位于`/usr/local/mysql/bin/mysql`，您可以使用以下命令轻松登录：

```
/usr/local/mysql/bin/mysql -u USERNAME -p 
```

但这是一个很长的命令，很无聊，所以你可以将 mysql 路径添加到 Os 的环境变量中，访问它会更容易。

**为`macOS Catalina`及以后**

从 macOS Catalina 开始，Mac 设备`zsh`用作默认登录 shell 和交互式 shell，您必须更新`.zprofile`主目录中的文件。

```
echo 'export PATH="$PATH:/usr/local/mysql/bin"' >> ~/.zprofile
source ~/.zprofile
mysql -u USERNAME -p 
```

**对于`macOS Mojave`和更早**

虽然您始终可以切换到`zsh`,`bash`是 macOS Mojave 及更早版本中的默认外壳，`bash`但您必须更新`.bash_profile`文件。

```
echo 'export PATH="$PATH:/usr/local/mysql/bin"' >> ~/.bash_profile
source ~/.bash_profile
mysql -u USERNAME -p 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-06-24T17:27:58.150

这个命令对我有用：

```
./mysql -u root -p 
```

*（PS：我正在通过终端在mac上工作）*

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-01-18T18:33:19.193

1.  通过终端安装自制软件

2.  `brew install mysql`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-05-06T11:08:58.867

对于 Mac 操作系统`Catalina`：

```
/usr/local/mysql/bin/mysql -uroot -p 
```

这将提示您输入密码`mysql`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-09T12:42:09.110

如果您的 MySQL 服务器已启动并正在运行，那么您只需要一个客户端连接到它并开始练习。一个是`mysql-client`，它是一个命令行工具，或者您可以使用`phpMyAdmin`，它是一个基于 Web 的工具。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-09-07T10:20:47.700

在终端

```
sudo sh -c 'echo /usr/local/mysql/bin > /etc/paths.d/mysql' 
```

关闭它并打开新终端

```
mysql -u root -p 
```

给你的密码

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-05-22T05:48:10.033

这个命令对我有用：

命令：

```
mysql --host=localhost -uroot -proot 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-07-18T08:41:47.057

尝试使用以下 2 个命令中的任何一个

`/usr/local/mysql/bin/mysql -uroot`
- 或者 -
`/usr/local/Cellar/mysql/<version>/bin/mysql -uroot`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-06-01T20:33:27.903

您可以简单地输入终端

```
brew services start mysql 
```

如果您在 Mac 上通过 brew 安装了 mysql

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-12-17T09:56:21.680

您可以使用连接到本地实例

```
/usr/local/mysql/bin/mysql -u root -p 
```

然后它将提示您输入密码。在 ~/.zshrc（或 bash）中添加以下内容以直接使用`mysql`

```
echo 'export PATH="$PATH:/usr/local/mysql/bin"' >> ~/.zshrc 
```

# ios - 来自发布请求的 AFNetworking 不适用于 IOS 5.1

> ID：14235365
> 
> 赞同：0
> 
> 时间：2013-01-09T12:37:58.473
> 
> 标签：ios, ios5, afnetworking

我进行了很多搜索，但无法找到解决问题的方法，

我试图使用 afnetworking 库使用 json 数据发出表单发布请求，在 ios 6 中一切正常。

当我在 ios 5.1 版本中测试它时，没有触发表单发布请求，或者发生了错误

下面是我的请求将如下所示：

```
 id paramString;
        if(![data isKindOfClass:[NSString class]])
        paramString = [Helper objectToJsonString:data AND:0]; // converts nsdictionary to        string
        else
            paramString = data;

        NSLog(@"Param String => %@ \n",paramString);

        AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL     URLWithString:urlString]];
        [httpClient setParameterEncoding:AFFormURLParameterEncoding];

        NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:nil parameters:paramString];
        [request setCachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData];
        [request setTimeoutInterval:30];

        [self makeJsonRequest:requestedView withSelector:callBackFunction AND:request];

     AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc]     initWithRequest:request];
            [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation,     id responseObject) {
 NSLog(@" response data => %@",json);
    }

      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
     NSLog(@" error=> %@",error);
}]; 
```

**对于 ios 6，以下是我的回复：Json Response => { Details = "process created!"; 响应 = 成功；}**

**但是对于 ios 5 ，我的响应看起来像 Json Response => { }**

如果它不是有效的表单发布请求或请求正文不包含任何内容，则意味着我们的服务器将返回 emtpy 响应

注意事项：在 ios 6 上一切正常

我是否在此代码中使用与 ios 6 相关的任何功能

谁能帮我解决这个问题！

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:49:52.217

嗨，我自己发现了问题，实际上，问题 NSUUID 是 ios 6 的一个功能，我尝试在 ios 5 中使用它，所以为 null，因为在我们的服务中找不到所需的参数，所以我收到了 {} 作为响应。

# silverlight - Silverlight 4中Datagrid中的多选组合框

> ID：14235367
> 
> 赞同：0
> 
> 时间：2013-01-09T12:38:18.543
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0

我想在数据网格的一列中实现一个多选组合框。

我在谷歌上搜索过，但没有找到合适的解决方案。所以你能帮我解决这个问题吗？

并且多选组合框应该与数据库绑定，并且选择值应该从数据网格保存在数据库中。

如果您有任何解决方案，请帮助我。

提前致谢。

拉杰比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:05:49.147

看看多选示例[http://www.codeproject.com/Articles/42133/Multiple-Selection-ComboBox-for-Silverlight](http://www.codeproject.com/Articles/42133/Multiple-Selection-ComboBox-for-Silverlight)这应该给你一个好主意。以下网址还为您提供了有关如何在数据网格中绑定组合框的分步说明[http://blog.digitaltools.com/post/2011/05/06/Binding-a-Datagride28099s-ComboBox.aspx](http://blog.digitaltools.com/post/2011/05/06/Binding-a-Datagride28099s-ComboBox.aspx)希望您知道如何使用 ecf/ria 服务从服务器获取数据并通过视图模型将数据绑定到视图。

# c# - 一类中的通用类型和定义类型

> ID：14235368
> 
> 赞同：1
> 
> 时间：2013-01-09T12:38:23.793
> 
> 标签：c#, class, generics

一个类中是否可以有泛型类型和非泛型类型？

我有一个类，我必须在其中管理不同的类型，但我不知道我将收到什么，我虽然想使用泛型，但我还没有找到这样做的方法。

这就是我想要做的

```
int commandCode;
<T> arg1;
<T> arg2;
<T> arg3; 
```

我必须从文本文件中读取 4 个字符串行，并尝试将这些行解析为

1.  整数
2.  漂浮
3.  布尔值
4.  将其保留为字符串

（首先尝试将其解析为 1，如果不可能解析为 2，如果不可能解析为 3，如果不可能解析为 4。）

在知道每个参数是什么类型之后，用各自的类型定义每个变量

例如，使用文本文件

*   命令代码=2
*   arg1=真
*   arg2=256
*   arg3=不要

我会有一个对象

*   int 命令代码
*   <布尔> arg1
*   <int> arg2
*   <字符串> arg3

arg1 到 arg3 的任何可能组合都会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:03:07.297

如果我理解正确，您只能在运行时确定实际类型。因为 csae 泛型对你没有多大帮助，因为任何类型参数都需要在编译时解析，因此你需要以某种方式使用反射。下面是一个可以扩展以满足您的需求的工厂。您可能需要也可能不需要 16 种不同的方法，具体取决于您在现实中拥有多少子类（您需要使用以下方法为每个子类提供一个）您也可以跳过 Create 方法并直接选择适当的类/构造函数

```
public class Command {

   public static Command Create(string[] textLines) {
     var args = textLines.Select(l => parseLine(l));
     var argTypes = args.Select(a => a.GetType().ToArray();
     return (Command)typeof(Command).GetMethod("Create",argTypes).Invoke(null,args);
   }

   public static Command Create(int commandType,
                                bool IsSponk,
                                int count, 
                                string description){
       return new CommandType1(commandType,
                               IsSponk,
                               count,
                               description);
   }
   private class CommandType1 : Command {
       public CommandType1(int commandType, bool IsSponk, int count, string description){
            ....
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:16:45.387

如果您的变量类型取决于您读取的数据（例如在您的情况下），那么使用泛型没有多大意义。即使您采用@Spontifixus 方法，您也无法将所有创建的元素放在一个中`List<T>`，原因是每个对象中使用的类型不同，您需要自己的每个组合`List<T>`。此外，如果您稍后在代码中喜欢使用所有参数，则需要查询每个泛型类型以了解如何从当前实例中读取所需的值。

如果您仍然认为需要泛型类型（在这种情况下），您可以通过使用泛型类、创建者方法和普通接口来帮助自己：

```
public interface ICommand
{
    int CommandCode { get; set; }
    object Argument1 { get; }
    object Argument2 { get; }
    object Argument3 { get; }
}

public static class Command
{
    public static Command<T1, T2, T3> Create<T1, T2, T3>(int code, T1 arg1, T2 arg2, T3 arg3)
    {
        return new Command<T1, T2, T3>(code, arg1, arg2, arg3);
    }
}

public class Command<T1, T2, T3> : ICommand
{
    public Command(int code, T1 arg1, T2 arg2, T3 arg3)
    {
        CommandCode = code;
        Argument1 = arg1;
        Argument2 = arg2;
        Argument3 = arg3;
    }

    public int CommandCode { get; set; }
    public T1 Argument1 { get; set; }
    public T2 Argument2 { get; set; }
    public T3 Argument3 { get; set; }

    object ICommand.Argument1
    {
        get { return Argument1; }
    }

    object ICommand.Argument2
    {
        get { return Argument2; }
    }

    object ICommand.Argument3
    {
        get { return Argument3; }
    }
} 
```

通过使用这种方法，您可以通过调用 creator 方法通过类型推断创建一个实例，并将它们全部放在一个列表中：

```
var commands = new List<ICommand>();
var myCommand = Command.Create(3, 4f, true, "hello world");
var commands.Add(myCommand); 
```

现在您将通用对象放在一个列表中，但是如何使用此列表？最后，您将一直使用`ICommand`接口并坚持使用`object`，从而使泛型变得无用。但也许你不这么认为，这种方法可能会有所帮助。

# python - 具有多个条件的 Python While 循环

> ID：14235369
> 
> 赞同：0
> 
> 时间：2013-01-09T12:38:26.623
> 
> 标签：python, while-loop

谁能帮忙解释为什么我的while循环不起作用？它迫使用户选择 1、2 或 3，而不是让他们继续，但是无论你输入 1、2 还是 3，它总是说你输入了不同的数字，所以说“请选择1、2 或 3 级"

```
level = input("Enter your level by typing 1, 2 or 3\n")
int(level)

levelSelect = 1
while levelSelect == 1:
   if level != int(1) or level != 2 or level != 3:
      level = input("Please choose level 1, 2 or 3\n")
      int(level)
   else:
      print("You have selected level", level)
      levelSelect = 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:40:11.737

这条线`int(level)`没有做你认为它做的事情。它从字符串创建一个整数并*返回*它。它不在原地运行。因此，当您进入`if`语句时，您将字符串与始终不相等的整数进行比较。

你可能想要：

```
level = int(level) 
```

* * *

作为旁注，条件也可以使用`in`运算符编写：

```
if level in (1,2,3):
   print("level is ...")
else:
   print("pick again!")
   #other code ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:44:33.293

请参阅 mgilson 关于将级别分配为整数的答案，但您确定“级别”是否合法的逻辑也是错误的。

改变：

```
if level != int(1) or level != 2 or level != 3: 
```

为了：

```
if level not in (1,2,3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:45:09.217

我认为这就是您想要的（与 Inbar Rose 一起使用的道具）

```
def get_level():
    while True:
        level = int(input("Enter your level by typing 1, 2 or 3\n"))
            if level in [1, 2, 3]:
                return level 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:47:30.410

mgilson 在这里指出了核心问题，但是我会提出改进您的代码的建议。

```
while True:
    level = input('Enter level: ')
    if level not in ('1','2','3'):
        print('Try again!\n')
    else:
        print('You chose level ', level)
        break 
```

# php - Apache 是否保存会话

> ID：14235375
> 
> 赞同：0
> 
> 时间：2013-01-09T12:38:35.337
> 
> 标签：php, apache, session

我正在开发一个基于 PHP MySQL 的 Web 应用程序。现在我想要的是基于会话监控网络日志。

有什么方法可以自定义 Apache 日志文件以便捕获 PHP 会话？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:42:38.630

默认`session.save_path`设置为`""`。您可以通过以下方式找到当前路径

[session_save_path() — 获取和/或设置当前会话保存路径](http://de.php.net/manual/en/function.session-save-path.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:34:24.457

您还可以编写自己的会话处理程序：http: [//php.net/manual/de/function.session-set-save-handler.php](http://php.net/manual/de/function.session-set-save-handler.php)

# jquery - jquery更改所有先前标签的文本

> ID：14235376
> 
> 赞同：1
> 
> 时间：2013-01-09T12:38:36.460
> 
> 标签：jquery

这是我的 HTML

```
<div class="main_holder">
  <div class="input_holder">
    <label for="something">Some Label</label><br/>
        <input type="text" maxlength="255" class="cat_textbox" id="field_input" name="somename" /> 
  </div>
  <a href="#" class="add">Add+</a>

  <div class="input_holder">
    <label for="something">Some Label</label><br/>
        <input type="text" maxlength="255" class="cat_textbox" id="field_input" name="somename" /> 
  </div>
  <a href="#" class="add">Add+</a>

  <div class="input_holder">
    <label for="something">Some Label</label><br/>
        <input type="text" maxlength="255" class="cat_textbox" id="field_input" name="somename" /> 
  </div>
  <a href="#" class="add">Add+</a>
</div> 
```

这是我的jQuery

```
var increment=1;
$('a.add').click(function() {
  increment++;

  $(this).prev('input_holder').clone().insertBefore(this).prevAll('label').text(increment);

  return false;
}); 
```

我的想法是当我克隆一个字段时，我希望该字段显示它到底是哪个（是 1、2、3 等）。问题是我无法抓住我点击的按钮之前的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:01:59.533

我会将输入块封装到另一个 div 中。这使您有机会编写一些更简单的 javascript 代码。

HTML

```
<div class="main_holder">
  <div class="block_holder">
    <div class="input_holder">
      <label for="something">Some Label</label>
      <br/>
      <input type="text" maxlength="255" class="cat_textbox" id="field_input"
      name="somename" />
    </div> <a href="#" class="add">Add+</a>

  </div>
  <div class="block_holder">
    <div class="input_holder">
      <label for="something">Some Label</label>
      <br/>
      <input type="text" maxlength="255" class="cat_textbox" id="field_input"
      name="somename" />
    </div> <a href="#" class="add">Add+</a>

  </div>
  <div class="block_holder">
    <div class="input_holder">
      <label for="something">Some Label</label>
      <br/>
      <input type="text" maxlength="255" class="cat_textbox" id="field_input"
      name="somename" />
    </div> <a href="#" class="add">Add+</a>

  </div>
</div> 
```

JS

```
$(".main_holder").on("click", "a.add", function () {
    var count = $(this).closest(".block_holder").find("label").length;
    $(this).prev(".input_holder").clone().insertBefore($(this)).find("label").html(count);
    return false;
}); 
```

示例见这里：http: [//jsfiddle.net/StJwC/](http://jsfiddle.net/StJwC/)

顺便说一句，您应该改变输入字段的名称，并为有效的 HTML 代码使用不同的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:01:00.483

看到这个：http: [//jsfiddle.net/GpT2x/](http://jsfiddle.net/GpT2x/)

```
$('a.add').click(function() {
  var val = $(this).prev('.input_holder').find('label:last').text();
  val = val == "Some Label" ? 1 : (parseInt(val) + 1);
     $(this).prev('.input_holder').clone().insertBefore(this).closest('.input_holder').find('label').text(val);

  return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:48:55.310

您可以使用`closest()`代替来做到这一点`prevAll()`，如下所示：

```
var increment=0;
$('a.add').click(function() {
  increment++;

  $(this).prev('.input_holder').clone().insertBefore(this).closest('.input_holder').find('label').text(increment);

  return false;
}); 
```

查看工作[**演示**](http://jsfiddle.net/8nmMp/)

**更新：**
这是一个新版本，在每个属性上放置一个属性`.input_holder`以保持其增量：

```
$('a.add').click(function() {

   prevholder = $(this).prev('.input_holder');
   increment = prevholder.attr('data-increment');
   increment++;
   prevholder.attr('data-increment', increment);
   prevholder.clone().insertBefore(this).closest('.input_holder').find('label').text(increment);

   return false;
}); 
```

查看工作[**演示**](http://jsfiddle.net/8nmMp/1/)

# bookmarks - Http 引用和书签

> ID：14235377
> 
> 赞同：1
> 
> 时间：2013-01-09T12:38:39.187
> 
> 标签：bookmarks, http-referer

我正在访问一个网站，很快我在浏览器中单击了一个书签。新网站打开。我的问题是：推荐人数据（提交到新网站）是否仅包含书签信息，还是我上次访问的网站也在数据中？

我真的不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:39:41.600

仅当用户从具有 URL 的资源（通常是另一个网页）到达时，才会发送 HTTP 引荐来源网址。键入 URL、单击桌面电子邮件程序、word 文档等中的链接或打开书签都不会发送引荐来源网址，因为这些来源没有自己的 URL。

> 为了服务器的利益，Referer[sic] request-header 字段允许客户端指定获取 Request-URI 的资源的地址 (URI)（“referrer”，尽管头字段拼写错误。） Referer 请求标头允许服务器生成指向资源的反向链接列表，以用于兴趣、日​​志记录、优化缓存等。它还允许跟踪过时或输入错误的链接以进行维护。如果 Request-URI 是从没有自己的 URI 的源获得的，则不得发送 Referer 字段，例如来自用户键盘的输入。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

*请注意，即使来源确实*有 URL ，也不能保证一定会发送引荐来源网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:55:22.790

使用 Google Chrome 和[Fiddler](http://www.fiddler2.com/fiddler2/)`Referer`进行的测试表明，Chrome在单击书签后获取页面时不会发送标头。

# objective-c - 在 NSTimer 滴答的每 n 次迭代中触发一些代码

> ID：14235378
> 
> 赞同：0
> 
> 时间：2013-01-09T12:38:40.297
> 
> 标签：objective-c, loops, iteration, modulo, modulus

我对编码比较陌生，想知道是否有一种传统的方法可以在循环的每 n 次迭代中执行一些代码（在这种情况下，是一个 NSTimer 滴答作响）。

我正在使用 a`CADisplayLink`并且它每秒更新很多次，40、50 等等。如果我想在每个循环中执行一些代码，比如 500 个循环，有没有标准的方法可以做到这一点？我想我可以将一些东西与`modulo`operator 和 an放在一起`integer`，但是有没有更好/更规范的方式让新编码员知道？

额外的清晰度（尽管我确信这是一件相当常见的事情..）：我有一个每秒滴答 60 次的计时器，但我只想在每 10 次迭代时做一些事情。我已经知道我可以使用模数和整数来做到这一点，但我想知道是否有任何其他约定来处理这种情况。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:53:22.563

为正确的间隔建立一个专用计时器。

无论您是否使用`NSTimer`或`CADisplayLink`，如果时间过长，定时器调用都可以合并和抵消。如果您有一个需要 20 帧运行的显示链接，它每秒只被调用三次（假设刷新间隔为每秒 60 帧）。而且，如果您将计时器设置为每秒运行一次，而在一个实例中运行时间超过两秒半，那么它将“吃掉”下一次迭代，并且将在半秒后运行下一次迭代。

因此，如果您只计算计时器调用，您的计时器可能会不同步。要在某个时间间隔内重复做某事，将计时器设置为该时间间隔是绝对最佳的近似值。

拥有这样的第二个计时器不是性能问题，除非你做了很多计时器，在这种情况下，你应该标准化一个滴答计时器并为特定时间点安排事件（这仍然与计算以前的迭代不同） .

# big-o - 大O复杂度，多个for循环

> ID：14235379
> 
> 赞同：2
> 
> 时间：2013-01-09T12:38:40.720
> 
> 标签：big-o

我编写了一个简单的算法来重新排序列表中的项目，只要用户拖放它们。此外，如果一个项目被删除或添加一个现在的项目，列表将被重新排序。该算法包含三个分离的线性 for 循环（每个循环都是 O(n) ）并有两个嵌套循环（ O(n^2) ）。总复杂度是O(n+n+n+n^2)=O(3n+n^2)吗？

我如何计算总的大 O ？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:45:07.390

`O(3n + n^2)`和 是一样的`O(n^2)`。

[大 O](http://en.wikipedia.org/wiki/Big_O_notation)表示法仅描述限制行为，并且两个函数具有相同的限制行为——将`n`它们加倍四倍。（随着`n`走向无穷大，`3n`组件相对于组件变得越来越小`n^2`。在极限处，它完全支配它。）

# layout - 在 Enterprise Architect 中组织图表

> ID：14235381
> 
> 赞同：2
> 
> 时间：2013-01-09T12:38:48.603
> 
> 标签：layout, diagram, enterprise-architect

是否可以在 Enterprise Architect 中以某种方式组织我的图表？我们开始有太多的图表，每个图表都包含许多元素。为每个图表创建一个单独的文件夹是使模型更易于查看的唯一解决方案，还是有更优雅的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:44:05.530

首先，[模型视图将帮助您创建从不同角度代表您的实体的不同视点](http://www.sparxsystems.com/enterprise_architect_user_guide/navigate_search_and_trace/model_views.html)。

如果您坚持[松散耦合](http://en.wikipedia.org/wiki/Loose_coupling)和[模块化](http://en.wikipedia.org/wiki/Modular_programming)的架构原则，您应该能够将非常大的图表拆分成更小的图表。毕竟，它们的作用是让您了解事物是如何耦合和协同工作的，而且还可以从给定图表上下文中不真正相关的事物中抽象出来。图表并不意味着仅仅在一张大图中可视化*所有元素。*

您可以创建非常复杂的包结构，然后使用模型搜索。您还可以放置[超链接元素，以便在图表之间导航](http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_languages/hyperlinks_between_diagrams.html)。

如果您必须将元素拆分为不同的图表（然后进入不同的包），EA 将保留它们的关系，您可以随时使用[可追溯性视图查看](http://www.sparxsystems.com/enterprise_architect_user_guide/navigate_search_and_trace/hierarchy.html)它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T21:07:54.260

我还想看看[复合图](http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_languages/compositeelements.html)的 EA 选项。这应该可以帮助您将单个系统重新组织成多个复合子系统。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-04T22:00:27.263

要开始对应用程序架构进行建模，您可以使用基于透视的方法或视图建模透视方法来描述您的系统。例如，使用基于[4+1](https://stackoverflow.com/users/1746685/observer)视图的方法来收集您的逻辑、开发、非功能和需求透视图。根据提到的维度组织它或按应用程序模块分解每个维度，并拥有一个概念视图以拥有系统的全局视图。

从企业架构模型开始，例如使用 togaf 维度或 zachman 框架层和维度

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T09:26:26.190

您可以使用多个包对您的内容进行分类。我用来在顶层制作一个包图，它根据底层包（只需拖放包图中的包）动态更新其内容，并且条目或最终等内容（例如活动图）可以保存在一个*公共*包裹。

不幸的是，还没有可能（版本 10 构建 1004）自定义包，例如使用颜色。这样一个*普通*的包装就可以有不同的颜色。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-26T12:09:48.043

为了使项目浏览器更有条理，我要做的是创建一个名为“图表元素”的包并将所有图表元素拖到那里。 ![在此处输入图像描述](../Images/99fd909452a81e07b26b57605014a43d.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-17T04:07:28.347

在 Sparx Systems（EA 发行商）网站上的[这个博客](http://community.sparxsystems.com/white-papers/622-94project-documentation-with-enterprise-architect)中有一些很好的建议。

# android - 安卓分享应用

> ID：14235383
> 
> 赞同：0
> 
> 时间：2013-01-09T12:38:50.877
> 
> 标签：android, facebook, photo, sharing

我的 android 应用程序有一些问题。我想分享一些文字和照片到 fb 和 twitter。第一个问题是我无法将文本从我的文本字段复制到 fb 消息...我的意思是我有一个文本字段，其中包含您要共享的文本和 2 个按钮（fb、twitter），而 twitter 端正在工作很好，但我无法将文本附加到 fb 消息（按下按钮时窗口出现，但它是空白的）。这是我在 Facebook 上分享的代码：

```
Intent shareIntent = new Intent(
                    android.content.Intent.ACTION_SEND);
            shareIntent.setType("text/plain");
            shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    txt.getText());
            shareIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                    txt.getText());
            PackageManager pm = v.getContext().getPackageManager();
            List<ResolveInfo> activityList = pm.queryIntentActivities(
                    shareIntent, 0);
            for (final ResolveInfo app : activityList) {
                if ((app.activityInfo.name).contains("facebook")) {
                    final ActivityInfo activity = app.activityInfo;
                    final ComponentName name = new ComponentName(
                            activity.applicationInfo.packageName,
                            activity.name);
                    shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
                    shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                            | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
                    shareIntent.setComponent(name);
                    v.getContext().startActivity(shareIntent);
                    break;
                }
            } 
```

我的另一个问题是我的照片浏览器给了我这样的文件路径：“external/images/media/photo”，尽管问题是我也必须复制扩展名（.jpg 等）但是不是这个。如果我使用直接路径：“/mnt/sdcard/DCIM/01.jpg”它工作正常。有人可以帮助我如何找到照片的直接路径，或者我如何修改我的代码以使其适用于第一个：

```
private void share(String nameApp, String imagePath, String text) {
    try {
        List<Intent> targetedShareIntents = new ArrayList<Intent>();
        Intent share = new Intent(android.content.Intent.ACTION_SEND);
        share.setType("image/jpeg");
        List<ResolveInfo> resInfo = getPackageManager()
                .queryIntentActivities(share, 0);
        if (!resInfo.isEmpty()) {
            for (ResolveInfo info : resInfo) {
                Intent targetedShare = new Intent(
                        android.content.Intent.ACTION_SEND);
                targetedShare.setType("image/jpeg");
                if (info.activityInfo.packageName.toLowerCase().contains(
                        nameApp)
                        || info.activityInfo.name.toLowerCase().contains(
                                nameApp)) {
                    targetedShare.putExtra(Intent.EXTRA_SUBJECT, text);
                    targetedShare.putExtra(Intent.EXTRA_TEXT, text);
                    targetedShare.putExtra(Intent.EXTRA_STREAM,
                            Uri.fromFile(new File(imagePath)));
                    targetedShare.setPackage(info.activityInfo.packageName);
                    targetedShareIntents.add(targetedShare);
                }
            }
            Intent chooserIntent = Intent.createChooser(
                    targetedShareIntents.remove(0), "Select app to share");
            chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS,
                    targetedShareIntents.toArray(new Parcelable[] {}));
            startActivity(chooserIntent);
        }
    } catch (Exception e) {
    }
} 
```

Thx 预计...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:55:32.357

你可以得到你的图像的确切路径，如下所示，我已经按照你分享的方式在 FB 和 Twitter 上分享了照片和文字，它对我来说也很好用。希望这会帮助你。

**编辑：**

> ```
>  public void onActivityResult(int requestCode, int resultCode, Intent data) {
>     if (resultCode == RESULT_OK) {
>         if (requestCode == SELECT_PICTURE) {
>             Uri selectedImageUri = data.getData();
>             selectedImagePath = getPath(selectedImageUri);
>         }
>     }
> }
> public String getPath(Uri uri) {
>     String[] projection = { MediaStore.Images.Media.DATA };
>     Cursor cursor = managedQuery(uri, projection, null, null, null);
>     int column_index = cursor
>             .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
>     cursor.moveToFirst();
>     return cursor.getString(column_index);
> } 
> ```

# java - 扫描仪取 1 -3 个字

> ID：14235390
> 
> 赞同：0
> 
> 时间：2013-01-09T12:39:07.287
> 
> 标签：java, arrays, algorithm, multidimensional-array, java.util.scanner

所以我做了这个扫描仪，我希望它可以接收 1 到 3 个字符串。1 是它可以使用的最小字符串数，3 是最大字符串数。到目前为止，我的输出是：

```
You can search 1 - 3 words only : 3
Type a name: word1 
Type a name: word2
Type a name: word3 
```

相反，有没有办法可以将这些单词放在多个数组中，因为我的程序将执行多个字符串搜索。

```
public static void main(String[]args) throws IOException{

    int nnames;
    String[] stringSearch;

    System.out.print("You can search 1 - 3 words only : ");
    Scanner in = new Scanner(System.in);
    nnames = Integer.parseInt(in.nextLine().trim());

    stringSearch = new String[nnames];
    for (int i = 0; i < stringSearch.length; i++){
            System.out.print("Type a name: ");
            stringSearch[i] = in.nextLine();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:09:38.830

像这样的东西？

```
 public static void main(String[]args) throws IOException{
        int nnames;
        int ind = 0;
        int maxSearch = 10000;//this is max times we can do searching
        String[][] stringSearch = new String[maxSearch][];

        System.out.print("You can search 1 - 3 words only(else means stop search) : ");
        Scanner in = new Scanner(System.in);
        nnames = Integer.parseInt(in.nextLine().trim());

        while(nnames>=1 && nnames<=3){
            stringSearch[ind] = new String[nnames];
            for (int i = 0; i < stringSearch.length; i++){
                System.out.print("Type a name: ");
                stringSearch[ind][i] = in.nextLine();
            }
            ind++;
            nnames = Integer.parseInt(in.nextLine().trim());
        }
    } 
```

# ruby - 我可以使用 Ruby 读取网页数据吗？

> ID：14235393
> 
> 赞同：1
> 
> 时间：2013-01-09T12:39:16.587
> 
> 标签：ruby

我正在寻找一种自动化测试、网页数据填充的方法，并且还想提取网页数据并将它们永久存储到我们的数据库中。有没有办法使用 Ruby 来满足这样的要求？如果是这样，请指导我了解哪些 Ruby 模块可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:40:33.290

首先，您需要一个合适的操作系统，使用 Linux 或 BSD 或 MacOS。

Windows 适合某些人，但不适合作为 ruby​​ 开发人员的您，太多的库需要 c 扩展，在 cygwin 下编译很麻烦。

我建议，安装一个 Ruby 版本管理器，这样你就可以尝试不同的 ruby​​ 版本，我更喜欢 RVM，即 Ruby 版本管理器。

安装 Ruby 1.9.3 它是当今的标准。

通过 ruby​​gems 安装 gem mechanize，为您需要的网站提供几乎所有自动化。它是 Perl 的 LWP::Mechanize 的继承者。

Nokogiri 对于解析 XML 数据（如 (X)HTML）也很有用，但请记住，您应该在系统上安装先前的 libxml 库。

啊，根据你的问题：

是的，您可以使用 ruby​​ 阅读网站，例如阅读此网页：

```
http = HTTPClient.new
http.get "http://stackoverflow.com/questions/14235393/can-i-read-webpage-data-using-ruby" 
```

完毕

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:55:40.343

由于某些网页可能不是有效的 XML，您还可以使用正则表达式从网页中获取所需的数据。有时 XMLReader 方法会失败。

样本：

```
require 'open-uri'
page_content = open("http://your_page.com").read
page_body = page_content.scan(/<body>(.*)<\/body>/i).first
# do whatever you want with it 
```

正如 VBSlover 所说，水豚对于处理浏览相关的东西很有用。

使用whengem 也可以每隔n 分钟或类似的时间自动执行此操作。

对于处理数据库存储，有很多非常好的宝石。

最终答案：现在没有什么是你不能用 Ruby 做的。好吧，也许除了写一些真正（！）高性能代码/3D引擎。

**编辑：** 如果你能说出你到底想做什么，我可能会建议你一些匹配的宝石。通常“有一颗宝石”是一句好话。您可以浏览 ruby​​gems.org 以获取您需要的一些关键字，或者查看[https://www.ruby-toolbox.com/](https://www.ruby-toolbox.com/)以获取针对您的问题的一些分类/排名建议。:)

**编辑 2：** 看看[http://watir.com/](http://watir.com/) 也许只是在一些无痛的小脚本中玩弄它来感受它，如果它是你的解决方案。

> Watir 以与人们相同的方式驱动浏览器。它点击链接，填写表格，按下按钮。Watir 还会检查结果，例如页面上是否出现预期的文本。

一旦你点击了所有内容，只需使用一些 XML 解析器（nokogiri 将是一个不错的选择）或一些正则表达式从网页中抓取结果（或任何你需要的东西）。

然后将数据填充到数据库中。为此想到了 Activerecord，但它可能会也可能不会过大。根据您的数据库，选择您喜欢的任何适配器/连接 gem（同样：有很多）。

如果您想每隔一小时或类似的时间执行此操作，只需使用whenge gem（为您管理一个cronjob），或者如果您愿意，只需在其中编写一个带有sleep(x) 的无限循环。有不止一种方法可以做到这一点。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:45:38.803

是的，您可以使用 Ruby 和一些 gem 来完成所有这些任务。
我建议您查看`Nokogiri gem`数据提取： [https](https://github.com/sparklemotion/nokogiri)
://github.com/sparklemotion/nokogiri 以及表单 和`Capybara gem`内容的测试和自动化：
[https ://github.com/jnicklas/capybara](https://github.com/jnicklas/capybara)

PS：Capybara gem 的作用远不止于此，但它也可以应用于您的案例。

# android - 与安卓的蓝牙连接

> ID：14235394
> 
> 赞同：4
> 
> 时间：2013-01-09T12:39:19.217
> 
> 标签：android, bluetooth, bluetooth-lowenergy

在我的应用程序中，我需要将智能手机与 4.0 低功耗蓝牙模块连接。然后模块向手机发送频繁的数据。

*   你知道一些与 Android 编程蓝牙连接的好教程吗？
*   你能给我一些解释蓝牙基础知识的链接吗？（如果可能的话，德语）
*   我该如何测试它？（我也必须对蓝牙设备进行编程，它还没有完成喷射）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T00:27:09.323

Google 不明白，有时他们必须自己实际创建和驱动某些东西，而不仅仅是捎带开源的东西并将其作为自己的东西进行营销。

不幸的是，没有标准化的 BT 4.0。适用于 Android 的低能耗 API。也许谷歌只是决定只为谷歌钱包或其他东西使用 NFC，然后让 BLE 死掉。（我们真的需要两者！）

Broadcom 试图创建一个开源 API，但不知何故（也许 Broadcom 想要从他们那里赚钱？）没有手机在他们的 Android 版本中包含“.so”文件，所以这个 API 没用。

TI 和摩托罗拉为在旧的 Android 2.3.3 或其他版本上运行的 RAZR 系列制作了另一个 API。这确实有效，但摩托罗拉从他们的网站上删除了文档和源代码。

据 HTC 称，HTC ONE X+ 和更新的 HTC 手机将“很快”支持带有特殊 HTC 库的新 API。（至少看起来他们正在做某事）

三星 Galaxy S3 有一些“秘密”API，一些人可以使用这些 API 来发现设备、扫描服务和特征（谷歌播放中有一个应用程序“semilink 蓝牙智能扫描仪”在 Galaxy S3 上可以做这些事情）。

Google 要求 Broadcom 在 Android 4.2 中替换 Bluez。不幸的是，这个版本破坏了很多功能和外围兼容性。可能是因为 Wifi/GPS/Bluetooth Classic/Bluetooth Low Energy 中的一个或多个共享相同的硬件资源，但驱动程序处理得不是很好。很多人在使用最新的 Android 蓝牙功能时遇到了问题。

所以我希望博通专注于解决这个问题，然后谷歌继续添加蓝牙 4.0。低能量。谷歌曾说过“低能耗是我们将整合的下一件大事”。至少晚了1年。

就我个人而言，我必须购买 iPhone4S 和 iPad 视网膜才能获得支持低能耗的平台。有了这些，我们就可以完成 BLE 外设软件并让协议正常工作。现在我们正在等待谷歌和博通收拾残局。希望具有一些向后兼容性，以便所有具有 BT4.0 的旧手机。功能强大的芯片组也将打开钮扣电池驱动外围设备的美妙世界；-)（做梦吧）。

实际上，我们必须等待 HTC 发布他们的 API，并等待 Google 选择/驱动标准 API。

Windows Phone 8 应该获得 BLE，但它已被推迟更新。（Lumia 920 已通过认证但没有 API（再次！！）我们的开发人员很无奈）

Windows 8 和 MAC “OS”x 都有很好的 GATT API。

您真的应该投资购买 TI BLE 开发套件，它的价格约为 50 至 100 美元，用于 BLE 嗅探的加密狗。当您开发 BLE 外设软件时，它会派上用场。

# c++ - 在不丢失数据的情况下更改帧类型

> ID：14235395
> 
> 赞同：1
> 
> 时间：2013-01-09T12:39:19.640
> 
> 标签：c++, opencv

我正在使用 Opencv，我有两个框架：cv::frame1 和 cv::frame2，当我检查它们的类型时，我得到：

```
 frame1.type()  is 16 
frame2.type() is 21 
```

我的问题是如何在不丢失数据的情况下将 frame2 的类型更改为 16？我试过 frame2.convertTo() 它没用。

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:18:17.757

据我了解，您希望将 CV_32FC3（3 通道浮点）类型的图像转换为 CV_8UC3（3 通道无符号字符）。这不能在不丢失一些信息的情况下完成：在第一种情况下，每个像素有 4 个字节，而在第二种情况下，每个像素有 1 个字节，所以你知道会有一些损失。

此代码用于转换为不同的类型，对我来说效果很好：

```
cv::Mat A = cv::Mat(480, 640, CV_32FC3, CV_RGB(1.0,1.0,1.0));
cv::Mat B;
A.convertTo(B, CV_8UC3); 
```

# perl - 如何使用 Perl 更改目录（和子目录）中所有文件中出现的所有字符

> ID：14235397
> 
> 赞同：1
> 
> 时间：2013-01-09T12:39:23.203
> 
> 标签：perl, awk, replace

*** 我有一个标有“ ** *”的后续问题**

我被要求编写 Perl 代码，用每次`{`替换`{function(<counter>)`，每次替换时，计数器应该变大 1。例如，第一次替换`{`will be `{function(0)` ，第二次替换`{`will be`{function(1)`等。假设在文件夹中的每个`*.c`和`*.h`文件中进行替换包括子文件夹。

我写了这段代码：

```
#!/usr/bin/perl
use Tie::File;
use File::Find;
$counter = 0;
$flag = 1;

@directories_to_search = 'd:\testing perl';
@newString = '{ function('.$counter.')';
$refChar = "{";
finddepth(\&fileMode, @directories_to_search);

sub fileMode 
{
 my @files = <*[ch]>;   # get all files ending in .c or .h
 foreach $file (@files) # go through all the .c and .h flies in the directory  
{
    if (-f $file)  # check if it is a file or dir
    {
    my @lines;
# copy each line from the text file to the string @lines and add a function call after every     '{' '
    tie @lines, 'Tie::File', $file or die "Can't read file: $!\n";
    foreach ( @lines )
    {
        if (s/{/@newString/g)
        {
            $counter++;
            @newString = '{function('.$counter.')';
        }
        untie @lines; # free @lines
    }
    }
}   
} 
```

代码搜索目录`d:\testing Perl`并进行替换，但 `{function(<number>)`我没有得到 `{function(number1) function(number3) function(number5) function(number7)`例如我得到的第一个替换 `{function(0) function(2) function(4) function(6)`，我想得到`{function(0)`

我真的不知道我的代码有什么问题。

awk 解决方案或任何其他 Perl 解决方案也会很棒！

* * *

*** 我有一个后续问题。现在我希望我的 perl 程序在所有文件中执行相同的替换，除了同一行中有“{”
和“}”的行。所以我以这种方式修改了代码。

```
#!/usr/bin/perl

use strict;
use warnings;
use Tie::File;
use File::Find;

my $dir = "C:/test dir";   

# fill up our argument list with file names:
find(sub { if (-f && /\.[hc]$/) { push @ARGV, $File::Find::name } }, $dir);

$^I = ".bak";   # supply backup string to enable in-place edit 

my $counter = 0; 

# now process our files
#foreach $filename (@ARGV) 
while (<>) 
{
    my @lines;
    # copy each line from the text file to the string @lines and add a function call after every '{' '
    tie @lines, 'Tie::File', $ARGV or die "Can't read file: $!\n";
    #$_='{function(' . $counter++ . ')';

    foreach  (@lines) 
    {   
        if   (!( index (@lines,'}')!= -1 )) # if there is a '}' in the same line don't add the     macro
            {
                s/{/'{function(' . $counter++ . ')'/ge;
                print;
            }

    }
    untie @lines; # free @lines
} 
```

我试图做的是遍历我在我的目录和子目录中找到的@ARGV 中的所有文件，对于每个 *.c 或 *.h 文件，我想逐行检查并检查此行是否包含'{ '。如果是，程序将不会检查是否有'{'并且不会进行替换，如果没有，程序将用'{function();'替换'{'

不幸的是，这段代码不起作用。我很惭愧地说，我试图让它工作一整天，但仍然没有成功。我真的很感激一些帮助。

谢谢你！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:16:40.313

这是将查找方法与就地编辑相结合的简单问题。您可以使用`Tie::File`，但它实际上是相同的最终结果。此外，不用说，在进行此类编辑时，您应该始终保留原始文件的备份，因为更改是不可逆的。

因此，如果您不需要递归，您的任务在 Unix/Linux 风格中非常简单：

```
perl -pi -we 's/{/"{ function(" . $i++ . ")"/ge' *.h *.c 
```

当然，由于您似乎使用的是 Windows，`cmd`shell 不会全局化我们的参数，因此我们需要手动执行此操作。我们需要改变引号。而且，我们需要为`-i`（就地编辑）开关提供一个备份参数。

```
perl -pi.bak -we "BEGIN { @ARGV = map glob, @ARGV }; s/{/'{ function(' . $i++ . ')'/ge" *.h *.c 
```

这几乎足以制作一个脚本。

如果你确实需要递归，你会使用[`File::Find`](http://search.cpan.org/perldoc?File%3a%3aFind). 请注意，此代码在功能上与上述代码几乎相同。

```
use strict;
use warnings;
use File::Find;

my $dir = "d:/testing perl";   # use forward slashes in paths

# fill up our argument list with file names:
find(sub { if (-f && /\.[hc]$/) { push @ARGV, $File::Find::name } }, $dir);

$^I = ".bak";   # supply backup string to enable in-place edit 

my $counter = 0; 

# now process our files
while (<>) {
    s/{/'{ function(' . $counter++ . ')'/ge;
    print;
} 
```

不要被备份选项迷惑成错误的安全感：如果您连续两次运行此脚本，这些备份将被覆盖，因此请记住这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:08:18.847

```
$ perl -pi -e 's| (?<={) | q#function(# . ($i++) . q#)# |gex' *.c *.h 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:51:27.077

使用`awk '/{/{gsub(/{/,"{function("i++")");print;next}{print}'`和您的代码作为输入：

```
$ awk '/{/{gsub(/{/,"{function("i++")");print;next}{print}' file
sub fileMode 
{function(0)
 my @files = <*[ch]>;   # get all files ending in .c or .h
 foreach $file (@files) # go through all the .c and .h flies in the directory  
{function(1)
    if (-f $file)  # check if it is a file or dir
    {function(2)
    my @lines;
# copy each line from the text file to the string @lines and add a function call after every     '{function(3)' '
    tie @lines, 'Tie::File', $file or die "Can't read file: $!\n";
    foreach ( @lines )
    {function(4)
        if (s/{function(5)/@newString/g)
        {function(6)
            $counter++;
            @newString = '{function(7)function('.$counter.')';
        }
        untie @lines; # free @lines
    }
    }
}   
} 
```

注意：内联嵌套的函数编号不会增加`{`。

```
$ echo -e '{ { \n{\n-\n{' | awk '/{/{gsub(/{/,"{function("i++")");print;next}1'
{function(0) {function(0) 
{function(1)
-
{function(2) 
```

解释：

```
/{/                               # For any lines that contain {
gsub( /{/ , "{function("i++")" )  # replace { with function(i++)
print;next # print the line where the replacement happened and skip to the next
print                             # print all the lines 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T13:21:02.807

它可以在一行中完成，如下所示：

```
perl -pi -e 's/({)/"{function(".++$a.")"/ge;' your_file 
```

我刚刚获取了一个示例输入文件并进行了测试。

```
> cat temp
line-1 {    {    {   {
line-2 {    {   {
line-3 {    {
line-4 { 
```

现在执行：

```
> perl -pi -e 's/({)/"{function(".++$a.")"/ge;' temp
> cat temp
line-1 {function(1)    {function(2)    {function(3)   {function(4)
line-2 {function(5)    {function(6)   {function(7)
line-3 {function(8)    {function(9)
line-4 {function(10) 
```

# xquery - 在 DbXML 中排序时确定数据的优先级

> ID：14235399
> 
> 赞同：1
> 
> 时间：2013-01-09T12:39:30.020
> 
> 标签：xquery, berkeley-db-xml

在 DBXML 中使用 XQuery 我想根据设置为特定值的多个节点确定某些元素的优先级。

我希望能够在顶部显示其中的三个元素，而在下面显示其余元素。

```
<properties>
   <property>
       <zip_code>5550</zip_code>
       <agency>ABC</agency>
   </property>
   <property>
       <zip_code>5550</zip_code>
       <agency>DEF</agency>
   </property>
   <property>
       <zip_code>5550</zip_code>
       <agency>DEF</agency>
   </property>
   <property>
       <zip_code>XYZ</zip_code>
       <agency>ABC</agency>
   </property>
</properties> 
```

我们在属性搜索页面中获取此 XML。真正的搜索结果将有数百条记录，但我们只将前 10 条记录显示在第一页上。在这里，我们需要应用一个排序顺序，该顺序将显示“ABC”机构的属性，然后始终在顶部显示邮政编码“XYZ”。如果整个结果集没有这些机构，我们可以按正常排序顺序显示它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:40:11.683

XQuery 的 flwor-expressions know `order by`，它可以按任意值排序，也可以计算。使用一个表达式来确定某个产品是否是“顶级产品”（产生布尔值）。

然后拆分结果序列以仅突出显示一些结果并限制为总结果。

```
let $highlighted := 3
let $total := 10
let $sorted := 
  for $p in //property
  (: order by highlighting predicate :)
  order by $p/agency eq "ABC" and $p/zip_code eq "XYZ" descending
  return $p
return (
  (: first $highlighted elements as defined by predicates above :)
  $sorted[ position() = (1 to $highlighted) ],
  (: the other elements, `/.` forces sorting back to document order :)
  $sorted[ position() = ($highlighted + 1 to $total) ]/.
) 
```

布尔表达式可以变得任意复杂，以便在顶级产品上更精确，例如限制电视或定义一些最低价格。

# bash - 观察字符串的命令行

> ID：14235406
> 
> 赞同：4
> 
> 时间：2013-01-09T12:40:00.457
> 
> 标签：bash, shell, command-line

（在 bash 中）是否可以观察命令行程序的输出并在出现特定字符串时进行标记？

基本上我的问题是我们有大量的构建脚本会产生大量的控制台输出。我想看控制台说出“错误”这个词，然后以某种方式提醒我。

然后我知道去观看其余的过程/取消它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T12:50:55.293

您可以`grep`使用字符串，但您需要存储 make 的原始输出，这可以使用`tee`. 一出现错误就使用mplayer播放声音文件的例子：

```
make 2>&1 | tee make.log | grep -lq ERROR && mplayer alert.wav 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T12:47:29.317

从命令行尝试这样：

```
<YOUR_BUILD_CMD> | grep ERROR 
```

输出时它只会打印出错误`<YOUR_BUILD_CMD>`。`|`是[管道](http://www.linfo.org/pipes.html)运算符，这里是[grep](http://www.gnu.org/software/grep/manual/grep.html)命令的手册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:20:19.690

我会通过一个while循环来检查每一行输出。例如

```
cmd &| while read line;do if [[ ${line} =~ ErrorRegex ]];then echo Error Detected: $line; else echo $line; fi;done 
```

将其分解为“&|” 将 stderr 和 stdout 重定向到一个 while 循环，该循环一次读取 1 行输入并将其放入 line 变量中。然后一个简单的正则表达式比较会查找错误字符串，您可以突出显示该行或将其记录在任何您喜欢的地方。如果它与错误不匹配，它将正常打印输出。

# java - 无法捕获 SCALA 类引发的 JAVA 类中错误 URL 的异常

> ID：14235407
> 
> 赞同：1
> 
> 时间：2013-01-09T12:40:02.187
> 
> 标签：java, xml, scala, url, exception

我正在编写一个应该从在线 XML 文件中读取数据的程序。计算由用 Scala 编写的类完成，如果捕获到任何异常，则必须将其抛出到将处理异常的 Java 类。出于某种原因，我收到异常类型的错误。尝试访问错误的 URL 或任何类似问题（没有互联网连接？）时应该抛出的正确异常是什么。谢谢！

主类（Scala）

```
object test 
{
  def main(args:Array[String])
  {
    val  x:A =  new A()
  }

} 
```

解析 XML 文件并尝试访问 URL 的类

```
import java.net.{URL, URLConnection}
import xml.{XML, Elem}
import java.lang.NullPointerException
import java.io.IOException

class XMLparser {
  @throws(classOf[Exception])
  private val connectionXMLURL = "http://www.boi.org.il/currency.xml1"
  private var urlConnection:URLConnection = null
  private var url:URL = null
  private var doc:Elem = null
  private val currencies = new java.util.LinkedHashMap[String,java.lang.Double]()

  try
  {
    url = new URL(connectionXMLURL)
    urlConnection = url.openConnection
    doc = XML.load(urlConnection.getInputStream)
  }
  catch
    {
      case ex: org.xml.sax.SAXParseException => //is caught!!! and thrown!
      {
        throw  ex
      }
      case e: IOException =>
      {
        throw e
        //add error log!!
      }

      case e: NullPointerException =>
      {
        throw e
        //add error log!!
      }
      case e: Exception =>
      {
        throw e
      }      
    }

} 
```

应该捕获异常的类（Java）

```
public class A 
{
    private XMLparser x;
    public A()
    {
        try
        {
            x  = new XMLparser();
        }
        catch(org.xml.sax.SAXParseException e) //Cannot catch it!!??
        {

        }
     /*   catch (Exception e)
        {
             e.printStackTrace();
        } */
    }

} 
```

编辑：这是我尝试捕获异常时收到的错误消息：

```
scala: warning: [options] bootstrap class path not set in conjunction with -source 1.6
scala: C:\Users\home\Dropbox\Exchange Currency\src\il\hit\currencyExchange\CurrencyExchangeGUI.java:138: error: exception SAXParseException is never thrown in body of corresponding try statement
scala:       catch (org.xml.sax.SAXParseException ex) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:54:20.330

问题是您需要声明您的构造方法（默认方法）会抛出一个已检查的 java 异常。我看到您已经在`@throws(classOf[Exception])`代码中添加了注释，但是出于您的目的，它稍微放错了位置。检查此链接 [https://issues.scala-lang.org/browse/SI-1420](https://issues.scala-lang.org/browse/SI-1420)

它应该看起来像

```
class XMLparser @throws(classOf[Exception]) {

      private val connectionXMLURL = "http://www.boi.org.il/currency.xml1"
      ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:03:41.113

对于`URLConnection`，它可以`SocketTimeoutException`用于连接和输入流超时。它也可以是`IOException`一个不可用的网站。您可以在[javadoc 中找到它`URLConnection`](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#connect%28%29)

# typescript - 在 TypeScript 中声明字符串索引类型的变量 - 有快捷方式吗？

> ID：14235408
> 
> 赞同：4
> 
> 时间：2013-01-09T12:40:04.700
> 
> 标签：typescript

我的 TypeScript 应用程序经常使用一种模式，其中我有一组数据（一个对象）存储在字符串索引（另一个对象）中，以便按键快速查找。在 TypeScript 中实现这一点很容易，但需要两个接口定义（用于数据对象和字符串索引器对象）。我发现我的代码中充斥着这些字符串索引器接口，这些接口并没有增加太多价值，并且正在寻找一种方法来获得更具可读性/可维护性的代码。

有没有一种方法可以内联声明字符串索引器类型的变量，就像我们可以使用数组（数字索引器）一样？这是我正在做的事情以及我想做的事情的一个例子：

```
interface MyObject {
    foo: string;
    bar: string;
}

// is there a way to not have to define this interface?
interface MyObjectByKey {
    [index: string]: MyObject;
}

class Foo {
    // this works: inline declaration of variable of type numeric indexer
    myObjectsByIndex: MyObject[] = [];

    // this works: variable of type string indexer, but requires extra interface
    myObjectsByKey: MyObjectByKey = {};

    // wish I could do something like this ... (can I?)
    myObjectsByKeyWish: MyObject[index: string] = {};
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T12:48:00.047

就在这里：

```
class Foo {
    myObjectsByKey: { [index: string]: MyObject; } = {};
} 
```

这基本上是一个接口的内联声明。

# java - ImageIO 在最大速度下比 GZIPStream 快

> ID：14235411
> 
> 赞同：0
> 
> 时间：2013-01-09T12:40:14.263
> 
> 标签：java, image, bytebuffer

我正在寻找将图像从 GPU 下载到文件的最快方法，以便稍后在同一个应用程序中加载（因此不一定是 PNG，例如）。

但是我注意到，当我直接使用 DeflaterStream 时，它比带有 DeflaterStream 的 ImageIO 慢得多（因此使用 ImageIO.write(deflaterstream) ）。

难道我做错了什么？还是 ImageIO 只是经过高度优化/比最快的 GZIP 压缩更好？

```
 glBindTexture(GL_TEXTURE_2D, textureId);

        int bpp = 4; // Assuming a 32-bit display with a byte each for red, green, blue, and alpha.
        ByteBuffer buffer = BufferUtils.createByteBuffer(SAVE_WIDTH * SAVE_HEIGHT * bpp);
        glGetTexImage(GL_TEXTURE_2D, 0, GL_RGBA8, GL_UNSIGNED_BYTE, buffer );

//        File file = new File("saves/s-" + layer + ".png"); // The file to save to.
        String format = "png"; // Example: "PNG" or "JPG"
//        BufferedImage image = new BufferedImage(SAVE_WIDTH, SAVE_HEIGHT, BufferedImage.TYPE_INT_ARGB);

        try {
            FileOutputStream bOut = new FileOutputStream("saves/p-"+ layer + ".gz");
            DeflaterOutputStream  gzipOut = new DeflaterOutputStream (bOut, new Deflater(Deflater.BEST_SPEED));
            //buffer.flip();
            System.out.println("Bytes remaining " + buffer.remaining());
            while (buffer.hasRemaining()) gzipOut.write(buffer.get());
            gzipOut.close();
            bOut.close();
        } catch (IOException ex) {
            Logger.getLogger(SaveStateManager.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:27:10.493

压缩总是很昂贵，但你可以通过

```
OutputStream bOut = new BufferedOutputStream(new FileOutputStream("saves/p-" + layer + ".gz"));
DeflaterOutputStream defOut = new DeflaterOutputStream(bOut, new Deflater(Deflater.BEST_SPEED));
//buffer.flip();
byte[] bytes = new byte[1024];
while (buffer.hasRemaining()) {
    int len = Math.min(buffer.remaining(), bytes.length);
    buffer.get(bytes, 0, len);
    defOut.write(bytes, 0, len);
}
defOut.close(); 
```

# java - 使用标记器从字符串中剪切 ':' && ""

> ID：14235413
> 
> 赞同：1
> 
> 时间：2013-01-09T12:40:21.807
> 
> 标签：java, eclipse

现在我有点困惑。我想用分词器操作这个字符串：

```
Bob:23456:12345 Carl:09876:54321 
```

但是，我使用 Tokenizer，但是当我尝试时：

> ```
>  String signature1 = tok.nextToken(":");             
>       tok.nextToken(" ") 
> ```

我得到：

> 12345 卡尔

但是我想将第一个 int 和第二个 int 放入一个 var 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:44:46.283

你有两种不同的模式，也许你应该分开处理。

拳头你应该拆分空格分隔的值。只使用字符串`split(" ")`。这将返回一个`String[]`.

然后为每次`String`使用分词器。

我相信会奏效。

代码：

```
String input = "Bob:23456:12345 Carl:09876:54321";
String[] words = input.split(" ")

for (String word : words) {
  String[] token = each.split(":");

  String name = token[0];
  int value0 = Integer.parseInt(token[1]);
  int value1 = Integer.parseInt(token[2]);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:47:56.633

以下代码应该这样做：

```
String input = "Bob:23456:12345 Carl:09876:54321";
StringTokenizer st = new StringTokenizer(input, ": ");

while(st.hasMoreTokens())
{
    String name = st.nextToken();
    String val1 = st.nextToken();
    String val2 = st.nextToken();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:48:54.677

鉴于您有多种模式，您无法仅使用一个标记器来处理它们。

您需要先根据 拆分它`whitespace`，然后根据 拆分`colon`。

这样的事情应该会有所帮助：

```
String[] s = "Bob:23456:12345 Carl:09876:54321".split(" ");

System.out.println(Arrays.toString(s ));

String[] so = s[0].split(":", 2);

System.out.println(Arrays.toString(so)); 
```

你会得到这个：

```
[Bob:23456:12345, Carl:09876:54321]
[Bob, 23456:12345] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:49:09.810

如果您必须使用标记器，那么我认为您需要使用它两次

```
String str = "Bob:23456:12345 Carl:09876:54321";
StringTokenizer spaceTokenizer = new StringTokenizer(str, " ");
while (spaceTokenizer.hasMoreTokens()) {
    StringTokenizer colonTokenizer = new StringTokenizer(spaceTokenizer.nextToken(), ":");
    colonTokenizer.nextToken();//to igore Bob and Carl
    while (colonTokenizer.hasMoreTokens()) {
         System.out.println(colonTokenizer.nextToken());
    }
} 
```

输出

```
23456 
12345
09876
54321 
```

就个人而言，虽然我不会在这里使用标记器并使用 Claudio 的答案来拆分字符串。

# c# - 检索和使用 OAuth 2.0 凭据新手指南

> ID：14235414
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:40:29.000
> 
> 标签：c#, .net, google-drive-api

这将是一个愚蠢的问题，有些人肯定会对此表示反对。但我是一个视觉和动手学习者。这就是为什么我依赖示例而不是文档。以及google drive sdk 文档中的[此](https://developers.google.com/drive/credentials) 代码。我不知道我应该放入哪个部分

```
 static void Main(string[] args)
    {
       // This is the initiatation process

    } 
```

谷歌举了一个例子。但我无法运行它。而且我还不知道asp.net。我真的不知道我应该放哪个部分。那么有人可以告诉我吗？只是能够启动代码的部分。如果我只能运行它，也许我可以弄清楚我可以对其他功能做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:57:26.520

这是使用此[示例驱动器应用程序的热门示例：DrEdit for .NET](https://developers.google.com/drive/examples/dotnet)。如果它不起作用，请提供一些调试输出或错误。

# php - 检查字符串中是否存在数组元素的最有效方法

> ID：14235419
> 
> 赞同：0
> 
> 时间：2013-01-09T12:40:43.293
> 
> 标签：php, string, function

我一直在寻找一种方法来检查字符串中是否存在任何值数组，但似乎 PHP 没有这样做的本机方法，所以我想出了下面的方法。

我的问题 - 有没有更好的方法来做到这一点，因为这似乎效率很低？谢谢。

```
$match_found = false;
$referer = wp_get_referer();
$valid_referers = array(
    'dd-options',
    'dd-options-footer',
    'dd-options-offices'
);

/** Loop through all referers looking for a match */
foreach($valid_referers as $string) :

    $referer_valid = strstr($referer, $string);
    if($referer_valid !== false) :
        $match_found = true;
        continue;
    endif;

endforeach;

/** If there were no matches, exit the function */
if(!$match_found) :
    return false;
endif; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:46:55.007

尝试以下功能：

```
function contains($input, array $referers)
{
    foreach($referers as $referer) {
        if (stripos($input,$referer) !== false) {
            return true;
        }
    }
    return false;
}

if ( contains($referer, $valid_referers) ) {
  // contains
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:48:15.073

那这个呢：

```
$exists = true;
array_walk($my_array, function($item, $key) {
    $exists &= (strpos($my_string, $item) !== FALSE);
});
var_dump($exists); 
```

这将检查字符串中是否存在任何数组值。如果只有一个缺失，您会收到`false`回复。如果您需要找出字符串中不存在的字符串，请尝试以下操作：

```
$exists = true;
$not_present = array();
array_walk($my_array, function($item, $key) {
    if(strpos($my_string, $item) === FALSE) {
        $not_present[] = $item;
        $exists &= false;
    } else {
        $exists &= true;
    }
});
var_dump($exists);
var_dump($not_present); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:53:26.507

首先，替代语法很好用，但历史上它在模板文件中使用。因为它的结构在耦合/解耦 PHP 解释器以插入 HTML 数据时易于阅读。

其次，如果您的所有代码所做的只是检查某些内容，如果满足该条件，则立即返回通常是明智的：

```
$match_found = false;
$referer = wp_get_referer();
$valid_referers = array(
    'dd-options',
    'dd-options-footer',
    'dd-options-offices'
);

/** Loop through all referers looking for a match */
foreach($valid_referers as $string) :

    $referer_valid = strstr($referer, $string);
    if($referer_valid !== false) :
        $match_found = true;
        break; // break here. You already know other values will not change the outcome
    endif;

endforeach;

/** If there were no matches, exit the function */
if(!$match_found) :
    return false;
endif;

// if you don't do anything after this return, it's identical to doing return $match_found 
```

现在正如此线程中的其他一些帖子所指定的那样。PHP 有许多可以提供帮助的函数。这里还有几个：

```
in_array($referer, $valid_referers);// returns true/false on match

$valid_referers = array(
    'dd-options' => true,
    'dd-options-footer' => true,
    'dd-options-offices' => true
);// remapped to a dictionary instead of a standard array
isset($valid_referers[$referer]);// returns true/false on match 
```

询问您是否有任何问题。

# javascript - 我如何在 xml 中删除 http://webservices.rki.dk

> ID：14235421
> 
> 赞同：0
> 
> 时间：2013-01-09T12:40:46.557
> 
> 标签：javascript, xml, xml-namespaces

我想删除 xml 中的命名空间。您能否在 javascript 中为以下两个字符串编写正则表达式。我想要这两个字符串在我的整个 xml 中。

```
xmlns="http://webservices.rki.dk"  
xmlns="http://webservices.rki.dk/" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:56:14.240

你想用来`string.replace()`摆脱那些。[见这里](http://www.w3schools.com/jsref/jsref_replace.asp)。

**在字符串中全局替换的示例（您需要转义一些字符才能使其工作）：**

```
var str1 = 'xmlns="http://webservices.rki.dk" hello xmlns="http://webservices.rki.dk"'
var str1Fixed = str1.replace(/xmlns=\"http:\/\/webservices.rki.dk\"/g,"");
alert(str1Fixed); 
```

# serialization - 如果不发送日历 obj，它会正常工作。那么如何将日历对象从一个活动传递到另一个活动？

> ID：14235422
> 
> 赞同：0
> 
> 时间：2013-01-09T12:40:50.587
> 
> 标签：serialization, android-intent, calendar, android-activity, parcelable

我们可以将字符串传递为

```
Intent returnIntent = new Intent(); 
returnIntent.putExtra("SelectedRadio", selectedRadio); 
```

但是如果我想传递 Calendar 对象，那么如何将它从一个活动传递到另一个活动？

提前致谢。

这是我的第一个活动：

```
public class MyCalendar extends Activity {
public Calendar myCal;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_my_calendar);
    goCal= (ImageButton)findViewById(R.id.imageButton1);
myCal = Calendar.getInstance(); 
goCal.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent i = new Intent(MyCalendar.this, MainActivity.class);
            i.putExtra("calendar", myCal);
startActivity(i);

    });     
} 
```

}

这是我的第二个活动：

```
public class MainActivity extends Activity {

Intent myIntent;
Calendar today = (Calendar) myIntent.getExtras().getSerializable("calendar");
...
} 
```

我有什么错。为什么当我单击 goCal 按钮时我的应用程序关闭。请帮助我..我是新人..

我的日志猫：

```
 01-09 18:55:50.338: W/dalvikvm(4252): threadid=1: thread exiting with uncaught exception (group=0xb5f41288)
01-09 18:55:50.338: E/AndroidRuntime(4252): FATAL EXCEPTION: main
01-09 18:55:50.338: E/AndroidRuntime(4252): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.mycalendar/com.example.mycalendar.MainActivity}: java.lang.NullPointerException
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.os.Looper.loop(Looper.java:137)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at java.lang.reflect.Method.invokeNative(Native Method)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at java.lang.reflect.Method.invoke(Method.java:511)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at dalvik.system.NativeStart.main(Native Method)
01-09 18:55:50.338: E/AndroidRuntime(4252): Caused by: java.lang.NullPointerException
01-09 18:55:50.338: E/AndroidRuntime(4252):     at com.example.mycalendar.MainActivity.<init>(MainActivity.java:44)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at java.lang.Class.newInstanceImpl(Native Method)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at java.lang.Class.newInstance(Class.java:1319)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
01-09 18:55:50.338: E/AndroidRuntime(4252):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
01-09 18:55:50.338: E/AndroidRuntime(4252):     ... 11 more 
```

如果不发送日历 obj，它会正常工作。那么如何将日历对象从一个活动传递到另一个活动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:49:15.750

我们知道 Calander 实现了 Serializable 接口，因此您可以将其作为额外的 Intent 发送。

```
Intent i=new Intent(context,Home.class);
                Calendar c=Calendar.getInstance();
                i.putExtra("calobject", c);
                startActivity(i); 
```

您可以使用此代码获取它

```
 Calendar cal=(Calendar) getIntent().getSerializableExtra("calobject"); 
```

这是调试代码的屏幕截图，它运行顺利，没有任何异常![在此处输入图像描述](../Images/f839582a53044c9bfadd548947c14b76.png) ，希望对您有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T12:46:17.553

由于[Calendar](http://developer.android.com/reference/java/util/Calendar.html)实现了[Serializable](http://developer.android.com/reference/java/io/Serializable.html)您可以简单地执行以下操作：

```
Calendar cal;
<calendar initialization>
intent.putExtra("calendar", cal); 
```

然后用于检索：

```
Calendar cal;

cal = (Calendar) intent.getSerializableExtra("calendar"); 
```

# perl - Perl 拆分函数限制参数的最佳实践值

> ID：14235424
> 
> 赞同：0
> 
> 时间：2013-01-09T12:41:05.993
> 
> 标签：perl, split, limit

我在一个子例程中解析一个字符串，它指定了固定数量的参数和两个可选参数。注意我还指定了正在使用的参数字符串。

此参数字符串的格式为：

```
local_fs_name rem_fs_name timeout diff_limit hi hihi (rem_hi) (rem_hihi) 
```

所以绝对有六个参数和两个可选参数，最多八个。

上限应该设置为参数的最大数量还是比最大值多一个，即八个或九个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:51:16.607

我能想到的限制返回字段数量的唯一原因`split`是出于效率目的（并且您的子例程必须被调用*很多*，并且参数比这重要的要多得多），或者如果您*真的**想*保留最后一个字段中的分隔符。

您不应该使用`split`来验证参数的数量。*将它们全部*提取到一个数组中，然后验证数组的内容。像这样的东西：

```
my $params = 'local_fs_name rem_fs_name timeout diff_limit hi hihi rem_hi rem_hihi';
my @params = split ' ', $params;

if (@params < 6 or @params > 8) {
  die "Usage: mysub local_fs_name rem_fs_name timeout diff_limit hi hihi [rem_hi [rem_hihi]]\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:48:15.693

这不是一个风格（最佳实践）问题。

```
split ' ', $_ 
```

和

```
split ' ', $_, 6 
```

当提供 7+ args 时会产生不同的结果。

```
>perl -E"say +( split ' ', 'a b c d e f g'    )[5]"
f

>perl -E"say +( split ' ', 'a b c d e f g', 6 )[5]"
f g 
```

我最好的猜测是不想限制。

然后是您是否要保留尾随字段的问题。

```
>perl -E"@a=split(' ', 'a b c d e '    ); say 0+@a;"
5

>perl -E"@a=split(' ', 'a b c d e ', -1); say 0+@a;"
6 
```

我最好的猜测是尾随空格并不重要。

# windows - SpeedFan 4.47 的热键

> ID：14235426
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:41:18.350
> 
> 标签：windows, controls, gpu

有没有办法控制 SpeedFan 主窗口上用于控制 CPU 和 GPU 速度的按钮？我有这样的东西

![http://i.imgur.com/3L245.png](../Images/34f6750f3b691adde9545eec904b8208.png).

很想访问上/下按钮来控制我的 GPU 速度。网上有类似的吗？最好放一些键盘热键来控制该速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:52:21.037

为此，您可以使用[AutoHotKey 。](http://www.autohotkey.com/)

# iphone - presentmodalviewcontroller 隐藏 UITabBar

> ID：14235428
> 
> 赞同：0
> 
> 时间：2013-01-09T12:41:35.220
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller, presentmodalviewcontroller

我有一个基本的疑问。我需要推`viewController`到另一个`viewController`。我正在尝试代码

`Display1 *ac =[[Display1 alloc]init];`

`[[self navigationController]pushViewController:ac animated:YES];`

这提供了导航到上一个堆栈的选项。我没有选择继续上一个堆栈。因此我尝试了`presentModalViewController`

`Display1 *ac =[[Display1 alloc]init];`

`[self presentModalViewController:ac animated:YES];`

但这很好用，这个没有给我选项，但是**presentModalViewController 隐藏了我的 UITabBarController**

.无论如何，用presentModalViewController显示UITabBarController。或使用 pushViewController 不显示以前的堆栈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:24:54.610

Darshana 是对的，如果您不想使用返回选项

```
self.navigationItem.hidesBackButton = YES; 
```

前

```
[[self navigationController]pushViewController:ac animated:YES]; 
```

但是，如果您希望 UITabBar 在新的 UIViewController 上，则必须像这样添加该控制器：

```
NextViewController *nextViewController=[[NextViewController alloc]initWithNibName:@"NextViewController" bundle:nil];
UINavigationController *navBar=[[UINavigationController alloc]initWithRootViewController:nextViewController];
[self.navigationController presentModalViewController:navBar animated:YES]; 
```

我从[PresentModalViewController 中获取了这个，在下一个视图中没有显示导航栏](https://stackoverflow.com/questions/6056726/presentmodalviewcontroller-not-showing-navigation-bar-on-next-view)

但首先决定你想使用什么 PUSH 或 MODAL。
这两者都有不同的目的。

# linux - 用于查找字符串并在字符串前添加几行的 linux shell 脚本

> ID：14235432
> 
> 赞同：1
> 
> 时间：2013-01-09T12:42:14.513
> 
> 标签：linux, string, shell, sed

我是新手，只是想知道是否有人可以提供帮助:)

我有一个这样的文件：

```
start1  
12.3  
13.2  
15.3  
end1 
```

我如何找到字符串 end1 并在字符串之前添加几行，所以它看起来像：

```
start1  
12.3  
13.2  
15.3  
NaN  
NaN  
end1 
```

但是添加的行数必须取决于特定的数字，比如 5。如果它在 start1 和 end1 之间只有 3 个条目，则添加的行数是 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:17:24.863

你可以很容易地做到这一点`awk(1)`：

```
awk '/start1/ {start=NR} /end1/ && start {for (i=NR-start;i<=5;++i) {print "NaN"}} 1' 
```

这将记录 string`start1`所在的行，当它看到 string 的行时`end1`，它将输出最多 5 行 NaN，具体取决于相距多远`start1`和`end1`距离。将 5 更改为您需要的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:14:06.450

```
awk -vt=5 '/start1/{print;next;}/end1/{for(x=1;x<=t-i;x++)print "NaN";}++i' file 
```

您只需替换上面单行中的 5 即可获得不同数量的“NaN”:)

编辑：开始可能不在第一行。

```
awk -vt=5 '/start1/{i=0;print;next;}/end1/{for(x=1;x<=t-i;x++)print "NaN";}++i' file 
```

测试

```
kent$  cat t
Empty lines followed

foo
foo1
start1  
12.3  
13.2  
15.3  
end1
bar
bar2

kent$  awk -vt=5 '/start1/{i=0;print;next;}/end1/{for(x=1;x<=t-i;x++)print "NaN";}++i' t
Empty lines followed

foo
foo1
start1  
12.3  
13.2  
15.3  
NaN
NaN
end1
bar
bar2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:50:27.677

真的不清楚你提到的那个数字是你从文件内容中得出的还是你可能编程的东西，但试试这个：

```
awk '
/start/ { c=0 }
/end/   { for (i=1; i<c; i++) print "NaN" }
{ print; ++c }
' file 
```

并让我们知道任何问题。

编辑：如果存在少于 5 行，则添加 c 行：

```
awk '
/start/ { c=0 }
/end/ && c<5  { for (i=1; i<c; i++) print "NaN" }
{ print; ++c }
' file 
```

或最多填充 5 行：

```
awk '
/start/ { c=0 }
/end/   { for (i=c; i<=5; i++) print "NaN" }
{ print; ++c }
' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T16:04:56.167

这可能对您有用（GNU sed）：

```
sed -r '/^start/!b;n;:a;/\nend/bb;$!{N;ba};:b;/(\n[^\n]*){5}/!s/$/\nNaN/;tb;s/(\nend[^\n]*)(.*)/\2\1/' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T13:12:10.290

这更适合`awk`设置`c`为您需要的数字：

```
$ awk -vc=5 '/start/{n=0}/end/{for(i=0;i++<c+1-n;)print"NaN"}++n' file
start1  
12.3  
13.2  
15.3  
NaN
NaN
end1

$ awk -vc=8 '/start/{n=0}/end/{for(i=0;i++<c+1-n;)print"NaN"}++n' file
start1  
12.3  
13.2  
15.3  
NaN
NaN
NaN
NaN
NaN
end1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T13:03:13.443

我承认我不知道用 Sed 做你想做的事情的简单方法。有人可能会发布一个 Awk 答案，这很好，但如果有人不介意启动 Perl 解释器的运行时成本，这也可以：

```
perl -we 'print until eof() or ($_ = <>) =~ /^start1\s*$/; exit if eof(); print; my $i = 5; --$i, print until eof() or ($_ = <>) =~ /^end1\s*$/; --$i, print "NaN\n" until $i <= 0; print; print <>;' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T12:48:39.390

你可以用`sed`做这样的事情：

```
`sed /end1/lineToAdd0\nlineToAdd1\netc\nend1/g < file` 
```

我不确定`\n`，我不记得它是否`sed`以一种特殊的方式解释它。

# iphone - 如何查找/删除 UITableViewCell 的自定义行详细信息

> ID：14235433
> 
> 赞同：2
> 
> 时间：2013-01-09T12:42:15.493
> 
> 标签：iphone, objective-c, uitableview, ios6

这个问题与我之前的问题有点相关

我是 iPhone 应用程序的新手，正在尝试`UITableView`使用`JSON`. 我跟着[`this video`](http://www.youtube.com/watch?v=RJZcD3hfs3k)学习。

我使用 Storyboard 创建了相同的示例，还添加了可以添加数据的新屏幕。现在我试图删除数据。所以我所做的不是下面的方法，而是在每一行上添加按钮，然后单击该按钮，我将删除数据。

`- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath`

但我不知道如何获取行详细信息以及如何删除。

任何帮助/建议将不胜感激。

下面是我的屏幕的样子。

![在此处输入图像描述](../Images/e14f2fd4838d3d923f6b4fa0955abec6.png)

## 笔记：

**`UITableViewCell`是自定义类型。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:56:23.880

使用以下代码根据编辑操作删除更新数据模型。

此波纹管代码只是从数组和表中热删除或删除对象的示例..有关更多信息，请查看我在下面发布链接的教程..

```
- (void)tableView:(UITableView *)aTableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

     if (editingStyle == UITableViewCellEditingStyleDelete) {

         [arryData removeObjectAtIndex:indexPath.row];

        [tblSimpleTable reloadData];

     } 
} 
```

或者也使用此波纹管逻辑与单元格的自定义按钮...

```
- (IBAction)deleteCustomCellWithUIButton:(id)sender
{
  NSIndexPath *indexPath = [yourTableView indexPathForCell:(UITableViewCell *)[[[sender superview] superview] superview]];
  NSUInteger row = [indexPath row];
  [yourTableView removeObjectAtIndex:row];
  [yourTableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]  withRowAnimation:UITableViewRowAnimationFade];
} 
```

有关更多信息，请参阅这些教程...

1.  [iphone-sdk-tutorial-add-delete-reorder-UITableView-row](http://adeem.me/blog/2009/05/29/iphone-sdk-tutorial-add-delete-reorder-uitableview-row/)

2.  [多行选择和编辑](http://www.cocoawithlove.com/2009/01/multiple-row-selection-and-editing-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:47:50.647

您可以在每一行上添加一个按钮并将其设置`button.tag`为方法`indexPath.row`中的`cellForRowAtIndex:`。`Array`然后在您的按钮方法中，您可以从用于填充的条目中删除`UITableView`然后`reloadData`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:57:06.113

您有很多方法来获取单元格或单元格的 indexPath：

*   (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath
*   (NSIndexPath *)indexPathForCell:(UITableViewCell *)cell
*   (NSIndexPath *)indexPathForRowAtPoint:(CGPoint)point
*   (NSArray *)indexPathsForRowsInRect:(CGRect)rect
*   (NSArray *)visibleCells
*   (NSArray *)indexPathsForVisibleRows

如果你想处理 UIButton 的 IBAction 而不是像这样使用 indexPathForRowAtPoint ：

```
-(IBAction)myAction:(id)sender
{

CGPoint location            = [sender convertPoint:CGPointZero toView:self.tableView];
NSIndexPath *indexPath      = [self.tableView indexPathForRowAtPoint:location];
UITableViewCell *swipeCell  = [self.tableView cellForRowAtIndexPath:indexPath];

NSLog(@"Selected row: %d", indexPath.row);
//......

} 
```

或 indexPathForCell

```
- (void)buttonPressedAction:(id)sender
{
   UIButton *button = (UIButton *)sender;
   // Get the UITableViewCell which is the superview of the UITableViewCellContentView which is the superview of the UIButton
   (UITableViewCell*)cell = [[button superview] superview];
   int row = [myTable indexPathForCell:cell].row;
} 
```

我从以下代码中获取了代码： [Detecting which UIButton was pressed in a UITableView](https://stackoverflow.com/questions/1802707/detecting-which-uibutton-was-pressed-in-a-uitableview)

[自定义 UITableViewCell 按钮操作？](https://stackoverflow.com/questions/7399119/custom-uitableviewcell-button-action)

# javascript - 更改下拉菜单的样式

> ID：14235436
> 
> 赞同：1
> 
> 时间：2013-01-09T12:42:26.647
> 
> 标签：javascript, jquery, css

我有一个基于每个下拉值的 4 个下拉列表，另一个下拉列表将更改我尝试使用 CSS、jquery 和 javascript 更改下拉列表的样式。我几乎得到了下拉菜单的样式，并且功能也可以正常工作，但是我卡住的地方是在 jquery 中所做的是

```
$(document).ready(function(){
  $("select").each(function(){
    $(this).wrap('<div class="selectbox"/>');
    $(this).after("<span class='selecttext'></span><span class='select-arrow'></span>");
    var val = $(this).children("option:selected").text();
    $(this).next(".selecttext").text(val);
    $(this).change(function(){
      var val = $(this).children("option:selected").text();
      $(this).next(".selecttext").text(val);
    });
  });
}); 
```

因此，对于所有选择，它会自动用 div 包装，然后放置 2 个跨度。因此，当我第一次更改第 1 个下拉列表的值时，第 2 个下拉列表的值会更改。当我再次更改 1 下拉列表的值时，2 下拉列表值不会重置为默认值。因为跨度保持先前选择的值的值..我该如何克服这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:03:13.287

你有没有试过这样：

```
$(document).ready(function(){
  $("select").each(function(){
    $(this).wrap('<div class="selectbox"/>');
    $(this).after("<span class='selecttext'></span><span class='select-arrow'></span>");
    var val = $(this).children("option:selected").text();
    $(this).next(".selecttext").text(val);
  });
    $("select").change(function(){
      var val = $(this).children("option:selected").text();
      $(this).next(".selecttext").text(val);
    });
}); 
```

# c# - 在vs 2005的rdlc中添加多个数据集

> ID：14235438
> 
> 赞同：0
> 
> 时间：2013-01-09T12:42:32.063
> 
> 标签：c#, visual-studio, visual-studio-2005, rdlc

我正在尝试在 vs 2005 中向我的 rdlc 添加多个数据集。在 vs 2010 中，我们有一个名为“报告数据”窗口的选项，我们可以从那里添加多个数据集。但是，在 vs 2005 中，我没有找到那个选项。请建议我，我如何添加多个数据集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:50:14.223

在 Visual Studio 2005 中，当“编辑”报表时，报表设计器上方有三个选项卡。最左边的选项卡是管理数据源，最右边的选项卡显示报表预览。

切换到最左侧的选项卡并使用那里的控件添加新数据源。

![在此处输入图像描述](../Images/0fcea6d6bab6068c2e7f18c9d688917d.png)

# c# - 从 asp.net 读取配置文件

> ID：14235447
> 
> 赞同：1
> 
> 时间：2013-01-09T12:42:48.540
> 
> 标签：c#, asp.net, .net, config, configurationmanager

我正在创建一个 Web 应用程序，它调用一个 DLL 来运行单元测试，我还有另一个 DLL(DataAccessLayer)，它执行连接并执行对引用主 DLL 的 SQL 的查询。两个 DLL 使用相同的配置文件来读取设置。

从 VS 运行应用程序时，应用程序运行良好。但是，当 Web 应用程序部署到 IIS 时，DLL 似乎无法从配置文件中读取设置。

经过一番研究，我发现我可能必须在 web.config 文件中明确定义配置元素，但是我不知道如何实现这一点。有人可以指出我正确的方向吗？

我实际上是使用带有以下代码的 ConfigurationManager 检索设置：-

```
 public string GetValue(string key)
   {
       var appConfig = ConfigurationManager.OpenExeConfiguration("path to dll");
       strKeyValue = appConfig.AppSettings.Settings[key].Value;

       return strKeyValue;
   } 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:45:40.427

用于`WebConfigurationManager.AppSettings["HelloWorldKey"];`从 web.config 读取 AppSettings。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:14:42.580

使用以下代码访问连接字符串

```
string filePath= WebConfigurationManager.AppSettings["Pathfile"].ToString(); 
```

网络配置文件

```
<configuration>
       ....
     <appSettings>
       <add key="Pathfile" value="Path to dll"/>
     </appSettings>
    ....
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:10:07.410

只需在部署应用程序之前直接在 web.config 中设置您提到的 DLL 使用的所有 appSettings 值。您不需要在运行时修改它（无论如何也不应该，因为对 web.config 的任何修改都会导致应用程序重新启动）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:20:14.233

`connectionstring`将 app.config 中使用的或`AppSetting`或添加`ApplicationSettings`到 web.config 中，我知道这是一项手动任务，但这是配置读取设置的唯一方式。

# python - 要列出的 CSV 文件

> ID：14235448
> 
> 赞同：0
> 
> 时间：2013-01-09T12:42:59.127
> 
> 标签：python, list, text, csv

我有一个 CSV 文件，它由第一列中的单词组成。（每行 1 个字）

我需要打印这些单词的列表，即

CSV 文件：

```
a
and
because
have 
```

想要的输出：

```
"a","and","because","have" 
```

我正在使用python，到目前为止我有以下代码；

```
text=open('/Users/jessieinchauspe/Dropbox/Smesh/TMT/zipf.csv')
text1 = ''.join(ch for ch in text)
for word in text1:
    print  '"' + word + '"' +',' 
```

这是返回：

```
"a",
"",
"a",
"n",
... 
```

而我需要一行一行的所有内容，而不是按字符而是按单词。谢谢您的帮助！

编辑：这是 CSV 文件预览的屏幕截图 ![CSV 文件的预览](../Images/16728b00f537fd40b769f60960de9def.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:45:40.337

直接循环文件：

```
with open('/Users/jessieinchauspe/Dropbox/Smesh/TMT/zipf.csv') as text:
    print ','.join('"{0}"'.format(word.strip()) for word in text) 
```

上面的代码：

*   循环文件；这会给你一行（包括换行符`\n`）。
*   用于`.strip()`删除单词周围的空格（包括换行符）。
*   用于`.format()`将单词放在引号中（`'word'`变成`'"word"'`）
*   用于`','.join()`将所有引用的单词连接到一个列表中，中间用逗号分隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:56:01.977

您还可以使用 CSV 模块：

```
import csv

input_f = '/Users/jessieinchauspe/Dropbox/Smesh/TMT/zipf.csv'
output_f = '/Users/jessieinchauspe/Dropbox/Smesh/TMT/output.csv'

with open(input_f, 'r') as input_handle, open(output_f, 'w') as output_handle:
    writer = csv.writer(output_handle)
    writer.writerow(list(input_handle)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:50:03.503

当你这样做时： text=open('/Users/jessieinchauspe/Dropbox/Smesh/TMT/zipf.csv') 基本上返回一个迭代器，每行作为一个元素。如果您想要一个列表，并且您确定每行只有一个单词，那么您需要做的就是

```
 result=list(text)
  print result 
```

否则，您只能像这样得到第一个单词：

```
 result = list(x.split(',')[0] for x in text)
 print result 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:51:33.507

`print ','.join('"%s"' % line.strip() for line in open('/tmp/test'))`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T12:46:56.307

如果您在 print 语句的末尾放置一个逗号，它会抑制换行符。

```
print  '"' + word + '"' +',', 
```

将在一行上为您提供输出。

# c# - 检测上传文本文件的编码 (ASP.NET MVC)

> ID：14235451
> 
> 赞同：0
> 
> 时间：2013-01-09T12:43:10.787
> 
> 标签：c#, asp.net-mvc, encoding

> **可能重复：**
> [如何检测文本文件的编码/代码页](https://stackoverflow.com/questions/90838/how-can-i-detect-the-encoding-codepage-of-a-text-file)

我有一个 ASP.NET MVC 应用程序。在我看来，我上传了一个文本文件并使用具有此签名的控制器方法对其进行处理

```
[HttpPost]
public ActionResult FromCSV(HttpPostedFileBase file, string platform) 
```

我从上传的文件中获取一个流，`file.InputStream`并使用标准 StreamReader 读取它

```
using (var sr = new StreamReader(file.InputStream))
{
    ...
} 
```

问题是，这只适用于 UTF 文本文件。当我在 Windows-1250 中有一个文本文件时，字符会变得混乱。当我明确指定编码时，我可以使用 Windows-1250 编码的文本文件

```
using (var sr = new StreamReader(file.InputStream, Encoding.GetEncoding(1250)))
{
    ...
} 
```

我的问题是，我需要同时支持 UTF 和 Windows-1250 编码文件，所以我需要一种方法来检测提交文件的编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:50:38.987

尝试将在 Windows-1250 中编码为 UTF-8 的文件解码极有可能导致异常（或者如果不是，该文件仅使用 ASCII 子集，因此使用什么编码来解码并不重要）异常回退，所以你可以做这样的事情：

```
Encoding[] encodings = new Encoding[]{
    Encoding.GetEncoding("UTF-8", new EncoderExceptionFallback(), new DecoderExceptionFallback()),
    Encoding.GetEncoding(1250, new EncoderExceptionFallback(), new DecoderExceptionFallback())
};

String result = null;

foreach( Encoding enc in encodings ) {

    try {
        result = enc.GetString( fileAsByteArray );
        break;
    }

    catch( DecoderFallbackException e ) {

    }

} 
```

# iphone - 如何在 UISearchBar 变为活动状态时展开它

> ID：14235452
> 
> 赞同：1
> 
> 时间：2013-01-09T12:43:11.910
> 
> 标签：iphone, ios, objective-c, uisearchbar

我有一个 UISearchBar 需要压缩（见屏幕截图），然后在触摸或 isActive 时扩展为更大的尺寸。

我该怎么做呢？目前我的搜索栏通过 IB 放置在视图中。

谢谢

![UISearchBar 截图](../Images/b2003901307ad9cd808e2b9d0ce8bf3e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:52:25.410

使用搜索栏的这个代表：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{

  [self setTheSearchBarWithRect:newRect];//newRect is CGRect;
}

-(void)setTheSearchBarWithRect:(CGRect)frame{

   [UIView animateWithDuration:(1.5f)
                      delay:0
                    options: UIViewAnimationOptionCurveEaseInOut
                 animations:^{

                     yourSearchBar.frame   =   frame;

                 }
                 completion:^(BOOL finished){

                 }];
} 
```

并在下面的委托中使用其原始框架调用上述函数。

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar;

- (void)searchBarCancelButtonClicked:(UISearchBar *) searchBar; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:52:12.533

我建议为键盘显示/隐藏通知添加一个 NSNotifcation 侦听器，并基于此调整 UISearchBar 框架：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc addObserver:self selector:@selector(adjustFrame:) name:UIKeyboardWillShowNotification object:nil];
    [nc addObserver:self selector:@selector(adjustFrame:) name:UIKeyboardWillHideNotification object:nil];
} 
```

当视图将要消失时，我们需要移除监听器：

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];

    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc removeObserver:self name:UIKeyboardWillShowNotification object:nil];
    [nc removeObserver:self name:UIKeyboardWillHideNotification object:nil];
} 
```

现在我们需要 2 个自定义函数来调整框架：

```
- (void)adjustFrame:(NSNotification *) notification {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    [UIView setAnimationBeginsFromCurrentState:YES];

    if ([[notification name] isEqual:UIKeyboardWillHideNotification]) {
        // revert back to the normal state.
        self.searchBar.frame = CGRectMake (100,50,100,self.searchBar.frame.size.Height);
    } 
    else  {
        //resize search bar
        self.searchBar.frame = CGRectMake (10,50,200,self.searchBar.frame.size.Height);    
}

    [UIView commitAnimations];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:55:02.957

您应该在编辑开始和结束时更改搜索栏框架（位置和大小）。

例如：开始时

```
sbar.frame = CGRectMake(sbar.frame.origin.x - 100., sbar.frame.origin.y, sbar.frame.size.x + 100., sbar.frame.size.y); 
```

在编辑端只是回到原来的地方控制：

```
sbar.frame = CGRectMake(sbar.frame.origin.x + 100., sbar.frame.origin.y, sbar.frame.size.x - 100., sbar.frame.size.y); 
```

# javascript - jQuery图像旋转器：功能未定义

> ID：14235454
> 
> 赞同：0
> 
> 时间：2013-01-09T12:43:16.743
> 
> 标签：javascript, jquery

通过使用本教程从头开始构建旋转器脚本，我将自定义图像标题转换为图像旋转器：http: [//fearlessflyer.com/2012/12/how-to-create-a-jquery-image-rotator](http://fearlessflyer.com/2012/12/how-to-create-a-jquery-image-rotator)。我通过教程一步一步地输入代码，但是当我尝试运行时，Firebug 控制台给出了这个错误：

> ReferenceError：rotateImages 未定义
> 
> xx = setInterval('rotateImages()', 4000);

考虑到我可能打错了一行代码，我从工作演示中复制了脚本，我收到了同样的错误。

我在 .js 文件中运行此脚本：

```
(function($) {
$(document).ready(function() {

    //loop through pictures
    $('.headerpic_inner').each(function(e) {
        if(e == 0) {
            $(this).addClass('current');
        }

        $(this).attr('id', 'handle' + e);

    });

    //loop through tags
    $('.tabs li').each(function(e) {
        if(e == 0) {
            $(this).addClass('current');
        }

        $(this).wrapInner('<a class="title"></a>');
        $(this).append('<a><img /></a>');
        $(this).children('a').attr('href', '#handle' + e);
        y = $('#handle' + e + ' img').attr('src');
        $(this).find('img').attr('src', y);
        t = $(this).children('a').text();
        $('#handle' + e).append('<h2>' + t + '</h2>');

    });

    //change image on click
    $('.tabs li a').click(function() {

        c = $(this).attr('href');
        if($(c).hasClass('current')) {
            return false;
        } else {
            showImage($(c), 20);
            $('.tabs li').removeClass('current');
            $(this).parent().addClass('current');
            return false;
        }

    });

    //call to rotate images
    runRotateImages();
    $('#headerpic').hover(function() {
        clearTimeout(xx);
    },
    function() {
        runRotateImages();
    });

}); //end of $(document).ready function

//showImage function
function showImage(img, duration) {
    $('.headerpic_inner').removeClass('current').css({
        'opacity' : 0.0,
        'zIndex' : 2,
    });

    img.animate({opacity:1.0}, duration, function() {
        $(this).addClass('current').css({zIndex:1});

    });

}

//rotateImages function
function rotateImages() {
    var curPhoto = $('div.current');
    var nxtPhoto = curPhoto.next();
    var curTab = $('.tabs li.current');
    var nxtTab = curTab.next();

    if(nxtPhoto.length == 0) {
        nxtPhoto = $('#headerpic div:first');
        nxtTab = $('.tabs li:first-child');
    }

    curTab.removeClass('current');
    nxtTab.addClass('current');
    showImage(nxtPhoto, 300);

}

//runRotateImages function
function runRotateImages() {
    xx = setInterval('rotateImages()', 4000);
}

})(jQuery); 
```

谁能告诉我为什么会说 rotateImages() 没有定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:56:49.237

其他答案提供了修复，但他们没有解释为什么您的代码不起作用。我要刺一下：

`setInterval()`实际上可以将带引号的参数作为字符串，您的原始代码实际上在语法上是正确的：

```
xx = setInterval('rotateImages()', 4000); 
```

那么为什么它不起作用呢？当您使用引号传递参数时，`setInterval()`调用将在函数的全局范围内查找`rotateImages()`。问题是，您的函数`rotateImages()`是在闭包中定义的。您的整个代码使用以下方法包装：

```
(function($) {
    $(document).ready(function() {

    });
})(jQuery); 
```

建议的修复`setInterval(rotateImages, 4000)`有效，因为当您传递不带引号和不带括号的函数名称时，`setInterval()`将首先在函数的本地范围内查找函数并可以调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:44:25.697

```
var xx = setInterval(rotateImages, 4000); 
```

你必须像上面那样设置间隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:46:11.670

只需从它周围删除单引号，它应该可以工作。

试试这样：

```
xx = setInterval(rotateImages, 4000);

```

# iphone - 我可以使用实时 api 游戏中心创建回合制吗？

> ID：14235455
> 
> 赞同：0
> 
> 时间：2013-01-09T12:43:19.067
> 
> 标签：iphone, ios, game-center

我正在开发基于回合的纸牌游戏，我想实现实时游戏 api 游戏中心只是出于某种原因，因为每次我的 iphone 找到其他 iphone 时使用该 api，并且基于回合，它会从 5 次尝试中找到它。

是否有任何 Apple 遗产或其他原因我不应该这样做或我可以这样做？

# vb.net - vb.net如何做一个dos风格的树

> ID：14235457
> 
> 赞同：2
> 
> 时间：2013-01-09T12:43:31.957
> 
> 标签：vb.net, tree, directory, dos, screensaver

大家好，我正在尝试创建一个基本的屏幕保护程序，将屏幕分成两部分，左侧类似于 dos 命令树，其中列出了所有文件和文件夹，右侧是显示文件内容的位置. 因此，当应用程序启动时，左侧的树被填充，然后应用程序开始逐个浏览所有文件，打开它们并在可能的情况下滚动浏览它们。

所以这就是我卡住的地方，我似乎无法弄清楚如何将目录树打印到屏幕上。

我知道这似乎是一个微不足道的问题，但我一生都找不到像 dos 命令一样优雅的解决方案。

一如既往，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:55:03.363

您可以使用 TreeView 控件来显示文件夹和文件。只需使用文件夹内容填充它，如有必要，递归。

# asp-classic - asp经典命令对象错误

> ID：14235458
> 
> 赞同：0
> 
> 时间：2013-01-09T12:43:41.810
> 
> 标签：asp-classic, command, adodb

我正在将一些代码从构造字符串转换为参数化查询，遇到命令对象问题。

```
if (session("pafWebService") = true) then

Dim adoCMD 
Dim adoRS 
Dim strSQL 
Dim lRecordsAffected 

strSQL =  "insert into job values  (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,)" 

Set adoCMD = Server.CreateObject("ADODB.Command")
With adoCMD
.ActiveConnection = conn
.CommandText = strSQL
.CommandType = adCmdText
.parameters.Append .CreateParameter("account", adVarChar, adParamInput, 16 , cCustcode)
.parameters.Append .CreateParameter("reference", adVarChar, adParamInput, 40 , cReference)
.parameters.Append .CreateParameter("priority", adVarChar, adParamInput, 3 , cPriority)
.parameters.Append .CreateParameter("colldate", adVarChar, adParamInput, 8 , cCollDate)
.parameters.Append .CreateParameter("deldate", adVarChar, adParamInput, 8 , cDelDate)
.parameters.Append .CreateParameter("onby", adInterger, adParamInput, 4 , nOnby)
.parameters.Append .CreateParameter("timestart", adVarChar, adParamInput, 4 , cTimestart)
.parameters.Append .CreateParameter("timeend", adVarChar, adParamInput, 4 , cTimeend)
.parameters.Append .CreateParameter("delname", adVarChar, adParamInput, 40 , cDelname)
.parameters.Append .CreateParameter("deladd1", adVarChar, adParamInput, 40 , cAdd1)
.parameters.Append .CreateParameter("deladd2", adVarChar, adParamInput, 40 , cAdd2)
.parameters.Append .CreateParameter("deladd3", adVarChar, adParamInput, 40 , cAdd3)
.parameters.Append .CreateParameter("deltown", adVarChar, adParamInput, 40 , cAdd4)
.parameters.Append .CreateParameter("delcounty", adVarChar, adParamInput, 40 , cAdd5)
.parameters.Append .CreateParameter("delpostcode", adVarChar, adParamInput, 10 , cPostcode)
.parameters.Append .CreateParameter("goods", adVarChar, adParamInput, 40 , cGoods)
.parameters.Append .CreateParameter("wgt", adInteger, adParamInput, 4 , nWgt)
.parameters.Append .CreateParameter("qty", adInteger, adParamInput, 4 , nQty)
.parameters.Append .CreateParameter("plt", adInteger, adParamInput, 4 , nPlt)
.parameters.Append .CreateParameter("vol", adInteger, adParamInput, 4 , nVol)
.parameters.Append .CreateParameter("haz", adInteger, adParamInput, 4 , nHaz)
.parameters.Append .CreateParameter("adr", adVarChar, adParamInput, 10 , cadr)
.parameters.Append .CreateParameter("adrpack", adVarchar, adParamInput, 10 , cAdrpack)
.parameters.Append .CreateParameter("taillift", adInteger, adParamInput, 4 , nTl)
.parameters.Append .CreateParameter("rigid", adInteger, adParamInput, 4 , nRi)
.parameters.Append .CreateParameter("ringforbook", adInteger, adParamInput, 4 , nBook)
.parameters.Append .CreateParameter("notes", adVarChar, adParamInput, 250 , cNotes)
.parameters.Append .CreateParameter("phoneno", adVarChar, adParamInput, 30 , cPhoneNo)
.parameters.Append .CreateParameter("userid", adInteger, adParamInput, 4 , session("userid"))
.parameters.Append .CreateParameter("confirmed", adInteger, adParamInput, 4 ,0)
.parameters.Append .CreateParameter("processed", adInteger, adParamInput, 4 ,0)
.parameters.Append .CreateParameter("adrname", adVarchar, adParamInput, 30 ,cAdrname)
.parameters.Append .CreateParameter("adrchem", adVarchar, adParamInput, 10 ,cAdrchem)
.parameters.Append .CreateParameter("timestartc", adVarchar, adParamInput, 4 ,ctimestartcol)
.parameters.Append .CreateParameter("timeendc", adVarchar, adParamInput, 4 ,ctimeendcol)
.parameters.Append .CreateParameter("confno", adInteger, adParamInput, 4 ,0)
.parameters.Append .CreateParameter("jobno", adInteger, adParamInput, 4 ,0)
.parameters.Append .CreateParameter("fplt", adInteger, adParamInput, 4 , nfPlt)
.parameters.Append .CreateParameter("hplt", adInteger, adParamInput, 4 , nhPlt)
.parameters.Append .CreateParameter("qplt", adInteger, adParamInput, 4 , nqPlt)
.parameters.Append .CreateParameter("coll1", adVarChar, adParamInput, 30 ,cColl1)
.parameters.Append .CreateParameter("coll2", adVarChar, adParamInput, 30 ,cColl2)
.parameters.Append .CreateParameter("coll3", adVarChar, adParamInput, 30 ,cColl3)
.parameters.Append .CreateParameter("coll4", adVarChar, adParamInput, 30 ,cColl4)
.parameters.Append .CreateParameter("coll5", adVarChar, adParamInput, 30 ,cColl5)
.parameters.Append .CreateParameter("collp", adVarChar, adParamInput, 30 ,cCollp)
.parameters.Append .CreateParameter("colname", adVarChar, adParamInput, 30 ,cColname)
.parameters.Append .CreateParameter("printed", adBoolean, adParamInput, 1 ,false)
.parameters.Append .CreateParameter("cheps", adInteger, adParamInput, 4 ,nCheps)
.parameters.Append .CreateParameter("countryd", adVarChar, adParamInput, 30 ,ccountryd)
.parameters.Append .CreateParameter("countryc", adVarChar, adParamInput, 30 ,ccountryc)
.parameters.Append .CreateParameter("uniqueid", adVarChar, adParamInput, 30 ,cUniqueId)
.parameters.Append .CreateParameter("co2", adInteger, adParamInput, 10 , request.form("cC02"))
.parameters.Append .CreateParameter("carbon", adInteger, adParamInput, 10 , request.form("cCarbon"))
.parameters.Append .CreateParameter("am", adInteger, adParamInput, 4 ,nAM)
.parameters.Append .CreateParameter("pm", adInteger, adParamInput, 4 ,nPM)
.parameters.Append .CreateParameter("instructs", adVarChar, adParamInput, 50 ,cSpecialInstruct)
.parameters.Append .CreateParameter("quote", adVarChar, adParamInput, 59 , trim(cQuoteId))
.parameters.Append .CreateParameter("validdel", adBoolean, adParamInput, 1 , lValidDel)
.parameters.Append .CreateParameter("validcol", adBoolean, adParamInput, 1 , lValidcol)
Set adoRS = .Execute(lRecordsAffected)

  end with 
```

错误信息：ADODB.Command 错误 '800a0bb9'

参数类型错误、超出可接受范围或相互冲突。（指向 .CommandType = adCmdText 行）任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:29:30.300

this occurs when an value is empty (vbscript datatype)-

you have to make sure that e.g. an integer value is definitly NULL and not empty... (or 0,1,2...)

you could write a function to "parse" vbscript values to their correct datatype like so:

```
function parse(value, alternative)
    dim val
    val = trim(value & "")
    parse = alternative
    if val = "" then exit function
    on error resume next
    select case varType(parse)
        case 2, 3 'integer, long
            parse = cLng(val)
        case 4, 5 'single, double
            parse = cdbl(val)
        case 6  'currency
            parse = ccur(val)
        case 7 'date
            parse = cDate(val)
        case 11 'bool
            parse = cBool(val)
        case 8 'string
            parse = value & ""
        case else
            on error goto 0
            err.raise 1024, "parse(value, alternative)", "Type is not supported. val:" & value & " alt:" & alternative)
    end select
    on error goto 0
end function

' call of parse function:
cCustcode = parse(cCustcode, "")
'or for an integer:
nWgt = parse(nWgt, 0) 
```

# crystal-reports - 使用水晶 repot 从我自己的项目中弹出一个 .aspx 页面

> ID：14235461
> 
> 赞同：0
> 
> 时间：2013-01-09T12:43:45.653
> 
> 标签：crystal-reports

我想使用水晶 repot 对象从我自己的项目中弹出一个 .aspx 页面

例如，水晶报表VIEW ATTACHMENTS上有一个文本对象，如果用户点击这个，应该会弹出一个.aspx页面显示一些附件等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:09:50.040

右键单击文本对象，单击格式编辑器，然后转到超链接选项卡。在“超链接类型：”区域中选择“Internet 上的网站”。将超链接添加到“超链接信息：”区域。如果您需要基于不同标准的多个超链接，则需要设置一个公式。

# python - PyParsing - nestedExpr 和匹配标记

> ID：14235462
> 
> 赞同：1
> 
> 时间：2013-01-09T12:43:51.313
> 
> 标签：python, xml-parsing, pyparsing

我今天早些时候发布了一个关于同一问题的问题，但由于解决方案是切换库，而我现在遇到了另一个库的问题，所以我想打开另一个问题......希望没关系。

所以我不想匹配以下标记：

```
<text link="no">
    ...
</text> 
```

我不在乎文本中的内容是什么，文本具有链接属性。

我现在使用 pyparsing 如下：

```
def content_must_not_be_empty_string(tokens):
    if tokens[0]=="":
        raise ParseException("content cannot be empty")

text_start = Regex('<text[^<]*>')
text_no_start = Regex('<text[^<]*link="no"[^<]*>')
text_no_end = Regex('</text>[ \t\n\r\xa0]*')
text_no_content = SkipTo(text_no_start | text_no_end | text_start)
text_no_content.setParseAction(content_must_not_be_empty_string)
text_no = nestedExpr(text_no_start,text_no_end,text_no_content)
text_no.setParseAction(somemethod) 
```

起初，整个事情因为空令牌而循环，这就是我添加 content_must_not_be_empty 的原因。

现在它不再循环，但某些方法也没有执行。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:47:32.800

严格来说，pyparsing 不是一个 XML 解析库，但它确实包含一些用于从 XML 和 HTML 中提取数据的内置支持，而不是解析整个文档。我并不是说您可以在 Regex 元素中嵌入正则表达式。相反，看看使用 makeXMLTags 或 makeHTMLTags：

```
>>> sample = """<text link="no"> lskdjflskdjf </text>"""
>>> text_start,text_end = makeXMLTags("text")
>>> text_start_no = text_start.copy().setParseAction(withAttribute(link="no"))
>>> expr1 = text_start_no + SkipTo(text_end)('body') + text_end
>>> print expr1.parseString(sample)
['text', ['link', 'no'], False, 'lskdjflskdjf ', '</text>']
>>> print expr1.parseString(sample).dump()
['text', ['link', 'no'], False, 'lskdjflskdjf ', '</text>']
- body: lskdjflskdjf 
- empty: False
- endText: </text>
- link: no
- startText: ['text', ['link', 'no'], False]
  - empty: False
  - link: no 
```

在从 XML 或 HTML 中提取数据时，这将使您避开各种意外情况。

现在，如果您确实有嵌套标签，那么您将需要开始深入研究 nestedExpr 区域。

```
>>> sample2 = """<text link="no"> lskdjflskdjf<text>more</text> </text>""" 
```

但我仍然鼓励您使用 makeXMLTags 或 makeHTMLTags 构建您的标签结构，而不是使用 Regex 来伪造它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:28:19.380

这是我现在正在工作的代码：

```
def content_must_not_be_empty_string(tokens):
    if tokens[0]=="":
        raise ParseException("content cannot be empty")

text_no_start = Regex('<text[^<]*link="no"[^<]*>')
text_no_end = Regex('</text>[ \t\n\r\xa0]*')
text_no_content = SkipTo(text_no_start | text_no_end)
text_no_content.setParseAction(content_must_not_be_empty_string)
text_no = originalTextFor(nestedExpr(text_no_start,text_no_end,text_no_content), asString="False")
text_no.setParseAction(somemethod) 
```

# node.js - 节点/expressjs mvc CRUD

> ID：14235464
> 
> 赞同：0
> 
> 时间：2013-01-09T12:43:58.333
> 
> 标签：node.js, express

在 Node 的上下文中（或更好的 expressjs！）

是否有任何框架/工具可以为流行的 RDBMS（或 mongo）中的给定表模式生成模型、视图、控制器以用于基本的 crud 操作 + 验证（如非空、已定义、isEmail、Gender 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-04T17:28:32.793

未来的注意事项：到目前为止，在 node 中进行类似 rails 的开发的最佳解决方案是[**sails.js**](http://sailsjs.org)。它基于 express，社区规模庞大且仍在增长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:27:11.347

你可以试试[railwayJS](http://compoundjs.com/docs.html)，但我更喜欢expressJS，它带有特定于DB的模型和用于客户端框架的[angularJS](http://angularjs.org/)

# java - 生成的pdf文件保存在项目文件夹中

> ID：14235466
> 
> 赞同：1
> 
> 时间：2013-01-09T12:44:00.863
> 
> 标签：java, javascript, jsp, jsp-tags, jspinclude

我想使用此代码将生成的 pdf 文件保存在我的项目文件夹中。我已经成功生成它并想将它保存在我的项目文件夹中，其中存在 jsp 文件，下面是我的代码

```
 <%@ page import="java.servlet.*,
        javax.servlet.http.*,
        java.io.*,
        java.util.*,
        com.itextpdf.text.pdf.*,
        com.itextpdf.text.*,java.sql.*" %><%

response.setContentType("application/pdf"); Document document = new
Document(); try{
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();
    PdfWriter.getInstance(document, buffer);
    document.open();

    PdfPTable table = new PdfPTable(2);
    table.addCell("1");
    table.addCell("2");
    table.addCell("3");
    table.addCell("4");
    table.addCell("5");
    table.addCell("6");       

    document.add(table);       
    document.close();

    DataOutput dataOutput = new DataOutputStream(response.getOutputStream());
    byte[] bytes = buffer.toByteArray();
    response.setContentLength(bytes.length);
    for(int i = 0; i < bytes.length; i++)
    {
        dataOutput.writeByte(bytes[i]);
    }
    }catch(DocumentException e){
    e.printStackTrace(); }

  %> 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:56:01.987

使用 getServletContext().getRealPath(..)

# c# - 数字 TextEdit 控件 +/- 符号

> ID：14235468
> 
> 赞同：0
> 
> 时间：2013-01-09T12:44:07.213
> 
> 标签：c#, .net, devexpress, mask, textedit

我`Devexpress TextEdit control`在我的对话框表单中使用，我想要实现的是，如果键入的值大于 0，则给 + 号。当前的 EditMask 值设置为 n2。

> 例如 ：
> 
> 如果用户键入 5.00，则控件必须显示**+5.00**。

用户还可以输入负值。是否有一些我应该使用的掩码或正则表达式模式？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:14:09.613

试试';' 用于分隔正值和负值的掩码的字符：

```
textEdit1.Properties.Mask.EditMask = "+#0.00;-#0.00";
textEdit1.Properties.Mask.MaskType = DevExpress.XtraEditors.Mask.MaskType.Numeric;
textEdit1.Properties.Mask.UseMaskAsDisplayFormat = true; 
```

相关链接：[掩码类型：数字](http://documentation.devexpress.com/#WindowsForms/CustomDocument1498/Custom)

# yii - 如何设置 Yii::app()->user->name

> ID：14235472
> 
> 赞同：6
> 
> 时间：2013-01-09T12:44:10.193
> 
> 标签：yii

我试过

```
public function getName()
{
    return 'TEST';
} 
```

在 UserIdentity.php 但它似乎没有改变 Yii::app()->user->name 的值

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T12:58:27.893

在您定义的类`UserIdentity`中，您需要使用`setState(name, value)`方法设置新状态。

例如在方法中`authenticate`如果用户是好的：

```
//if the user is good (good login and good password)
$this->_id=$record->id;
$this->setState('name', $record->name);
$this->errorCode=self::ERROR_NONE; 
```

然后你就可以打电话了`Yii::app()->user->name`

*   [Yii 指南中的完整示例](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#defining-identity-class)
*   [setState() 文档](http://www.yiiframework.com/doc/api/1.1/CBaseUserIdentity#setState-detail)

# javascript - 如何生成完全动态的 UI？MVC 或 WebForms

> ID：14235473
> 
> 赞同：0
> 
> 时间：2013-01-09T12:44:12.437
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, webforms

我需要完全动态地创建一个 UI。要求是页面上有大约 100 个控件（可能更多），并且当您填写表单时，表单本身会发生变化。比如你填年龄的时候，如果年龄超过30岁不到50岁，接下来的3道题就会不一样——如果你超过50岁，就只有2道题，而且完全不一样。页面将继续像这样动态流动，仅与您相关的控件应该只在您回答问题时出现 - 显然 - 因为它们可能与您无关，因此我们必须将它们隐藏到最后片刻。

我可以使用 ASP.NET WebForms 或 MVC。我意识到 MVC 没有服务器控件的概念，这需要使用 JS 来完成。我愿意使用任何一种技术，但我应该注意，这将是第一次开发 MVC 应用程序。我还可以访问我想要的任何第 3 方 UI API——Telerik、Component Art、Dev Express——我只需要让它工作并让它变得漂亮。

你会采取什么样的方法来动态生成这个 UI？是否已经有我可以查看的设计模式/方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:15:46.103

您可以做的是，创建每组动态元素并将它们放在 div 中。根据现在的答案，您可以将这些 div 注入，或者已经排列好但隐藏起来，让它们在正确答案中可见。所有这些逻辑都将进入您的控制器，您只需要有一个起始视图，其中包含一个具有`ID`.

```
document.getElementById(elementID)

if ((correctAnswer)&&(element.style.display=='none'))
   element.style.display="block" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:22:54.250

您的 index.html 可以具有以下结构，

```
<html>
  <head.......
  ............
  ............
  </head>
  <body>
    <form>
      <div id='staticFields1'>.....</div>
      <div id='staticFields2'>.....</div>
      <div id='dynamicFields21' display='none'>.....</div>
      <div id='dynamicFields22' display='none'>.....</div>
      <div id='staticFields3'>.....</div>
    </form>
  </body>
</html> 
```

所以根据你的逻辑 make display='block'

# sugarcrm - 在 SugarCrm 中自定义潜在客户列表的潜在客户导出

> ID：14235474
> 
> 赞同：0
> 
> 时间：2013-01-09T12:44:17.070
> 
> 标签：sugarcrm, syntactic-sugar

我使用 SugarCRM，当我导出潜在客户时，我可以获得所有字段，包括我添加的自定义字段。但是当我尝试从潜在客户列表中下载潜在客户时，只有几个字段从数据库中导出。我需要获取所有字段，例如潜在客户下载

我了解 Prospect_list.php 文件包含用于导出此文件的代码，我更改了此文件，但发生数据库故障，请帮我完成此文件。

```
$prospects_query = "SELECT p.id AS id, 'Prospects' AS related_type, '' AS \"name\", p.first_name AS first_name, p.last_name AS last_name,p.title AS title, p.salutation AS salutation, 
                p.primary_address_street AS primary_address_street,p.primary_address_city AS primary_address_city, p.primary_address_state AS primary_address_state,  p.primary_address_postalcode AS primary_address_postalcode, p.primary_address_country AS primary_address_country,
                p.account_name AS account_name,
                ea.email_address AS email_address, ea.invalid_email AS invalid_email, ea.opt_out AS opt_out, ea.deleted AS ea_deleted, ear.deleted AS ear_deleted, ear.primary_address AS primary_address,
                p.do_not_call AS do_not_call, p.phone_fax AS phone_fax, p.phone_other AS phone_other, p.phone_home AS phone_home, p.phone_mobile AS phone_mobile, p.phone_work AS phone_work , p.description As Description
                FROM prospect_lists_prospects plp
                INNER JOIN prospects p ON plp.related_id=p.id
                LEFT JOIN email_addr_bean_rel ear ON  ear.bean_id=p.id AND ear.deleted=0
                LEFT JOIN email_addresses ea ON ear.email_address_id=ea.id
                WHERE plp.prospect_list_id = $record_id  AND plp.deleted=0 
                AND p.deleted=0
                AND (ear.deleted=0 OR ear.deleted IS NULL)"; 
```

糖团队在这里指定了要导出的字段，但我需要获取表中的所有字段[前景]如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:55:00.070

尝试将查询更改为此...

```
$prospects_query = "SELECT p.id AS id, 'Prospects' AS related_type, '' AS 'name', p.first_name AS first_name, p.last_name AS last_name,p.title AS title, p.salutation AS salutation, 
            p.primary_address_street AS primary_address_street,p.primary_address_city AS primary_address_city, p.primary_address_state AS primary_address_state,  p.primary_address_postalcode AS primary_address_postalcode, p.primary_address_country AS primary_address_country,
            p.account_name AS account_name,
            ea.email_address AS email_address, ea.invalid_email AS invalid_email, ea.opt_out AS opt_out, ea.deleted AS ea_deleted, ear.deleted AS ear_deleted, ear.primary_address AS primary_address,
            p.do_not_call AS do_not_call, p.phone_fax AS phone_fax, p.phone_other AS phone_other, p.phone_home AS phone_home, p.phone_mobile AS phone_mobile, p.phone_work AS phone_work , p.description As Description
            FROM prospect_lists_prospects plp
            INNER JOIN prospects p ON plp.related_id=p.id
            LEFT JOIN email_addr_bean_rel ear ON  ear.bean_id=p.id AND ear.deleted=0
            LEFT JOIN email_addresses ea ON ear.email_address_id=ea.id
            WHERE plp.prospect_list_id = '$record_id'  AND plp.deleted=0 
            AND p.deleted=0
            AND (ear.deleted=0 OR ear.deleted IS NULL)"; 
```

# c++ - 使用 boost 的多线程一读一写

> ID：14235475
> 
> 赞同：0
> 
> 时间：2013-01-09T12:44:16.650
> 
> 标签：c++, multithreading, boost

我在 Linux 上用 C++ 编程。当一个线程读取和写入共享数据结构时，我的程序使用两个线程。数据结构来自类型 - Boost::bimaps::unordered_set_of 。所以我的问题是我是否需要担心任何同步问题。IE，我是否需要用锁（或类似的东西）保护数据结构的读写？或者也许我会在不使用互斥锁的情况下工作得很好？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:12:10.400

您应该使用 boost 提供的互斥锁

[http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_concepts](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_concepts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:58:54.867

与标准容器一样，Boost.Bimap 不提供线程同步。您必须自己提供。

# google-maps - 在谷歌地图 api v3 中获取方向不适用于韩语

> ID：14235479
> 
> 赞同：2
> 
> 时间：2013-01-09T12:44:41.283
> 
> 标签：google-maps, google-maps-api-3

我有一个获取英语方向的功能。相同的功能不适用于韩语。

```
<script src="//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places></script> 
```

这是变化，其余一切都很好。

```
<script src="//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places&language=ko"></script> 
```

在获取两个地址之间的方向时，响应随之而来

`status="ZERO_RESULT"`

是因为韩文字符吗？因为它在谷歌地图中工作但不使用 API。使用不同语言工作时需要注意的任何其他事项。

# c++ - MS Detours Express 3.0 未正确挂钩 CreateFile win32 API 函数

> ID：14235482
> 
> 赞同：0
> 
> 时间：2013-01-09T12:44:46.023
> 
> 标签：c++, winapi, hook, createfile, detours

我正在尝试使用 MS Detours 挂钩 win32 API 函数“CreateFile”，但是当我通过使用 MS Word 打开 *.doc 文件对其进行测试时，MS Word 加载的 DLL 和字体文件和目录的 CreateFile 调用被重定向到我的 detour函数，但不适用于该 *.doc 文件，但是当我使用记事本打开 *.txt 文件时，该 *.txt 文件的 CreateFile 调用出现在我的迂回函数中。

我正在使用以下代码来挂钩 CreateFile：

```
static HANDLE (WINAPI *Real_CreateFile)(LPCWSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile) = CreateFile;

HANDLE WINAPI Routed_CreateFile(LPCWSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile)
{
OutputDebugString(lpFileName);
return Real_CreateFile(lpFileName, dwDesiredAccess, dwShareMode, lpSecurityAttributes, dwCreationDisposition, dwFlagsAndAttributes, hTemplateFile);
}

BOOL APIENTRY DllMain( HMODULE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved )
{
LONG Error;
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:

    OutputDebugString(L"Attaching MyDLL.dll");
    OutputDebugString(strInfo);
    DetourRestoreAfterWith();
    DetourTransactionBegin();
    DetourUpdateThread(GetCurrentThread());
    DetourAttach(&(PVOID&)Real_CreateFile, Routed_CreateFile);
    Error = DetourTransactionCommit();

    if (Error == NO_ERROR)
        OutputDebugString(L"Hooked Success");
    else
        OutputDebugString(L"Hook Error");

    break;
case DLL_THREAD_ATTACH:
case DLL_THREAD_DETACH:
case DLL_PROCESS_DETACH:
    OutputDebugString(L"De-Attaching MyDLL.dll");
    DetourTransactionBegin();
    DetourUpdateThread(GetCurrentThread());
    DetourDetach(&(PVOID&)Real_CreateFile, Routed_CreateFile);
    Error = DetourTransactionCommit();

    if (Error == NO_ERROR)
        OutputDebugString(L"Un-Hooked Success");
    else
        OutputDebugString(L"Un-Hook Error");

    break;
}
return TRUE;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:47:35.413

我认为您`break`在此之后缺少一个：

```
case DLL_THREAD_ATTACH:
case DLL_THREAD_DETACH:
    break;  // Not interested in thread messages
case DLL_PROCESS_DETACH: 
```

你只是在它被调用之前分离弯路吗？也许打开 a`.doc`创建一个新线程但 a`.txt`没有，触发此代码路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:06:45.447

看起来您没有正确初始化 Real_CreateFile 函数指针。我猜您正在将其设置为模块的 CreateFile 导入表条目。

相反，将其初始化为`GetProcAddress(GetModuleHandle("kernel32"),"CreateFileW");`

# winmerge - WinMerge：如何比较具有相同内容但不同编码的文件？

> ID：14235484
> 
> 赞同：17
> 
> 时间：2013-01-09T12:44:51.423
> 
> 标签：winmerge

**动机：** 我正在重写一个文档——稍后处理的文本文件。新来源现在使用 UTF-8。大部分来源是相同的。我需要找出差异。

**详细信息：**旧文档源使用 cp1250 编码，新源使用 UTF-8。新旧资源都使用相同的行尾 (CR+LF)。我正在使用 Unicode 版本的 WinMerge 应用程序 (WinMergeU.exe)，版本 2.12.4.0。

它几乎可以工作，但是......当线条不同时，它们最初被深黄色标记为块，而不同的部分则使用较浅的颜色标记。将红色块光标移动到那里时，下面的窗格会显示不同的部分。

但是，在文本（的 Unicode 表示）相同的情况下，文本块也用深黄色标记。红色块也移动到文件的那些部分。在这种情况下，下面的两个窗格（显示差异）包含相同的文本，并且没有任何内容被标记为不同。见下图：

![不应有所不同的行示例。](../Images/687f985bfb59520989424b95e018e668.png)

第一行不同——这没关系。但是第二行在视觉上具有相同的内容。ASCII 范围之外的唯一字符就在`Ú`那里。它在编码源中具有不同的表示形式。这会导致该行被标记为不同，但下面的窗格并未将该行的任何内容标记为不同。

另请参阅以下完全相同的段落（仅源中的编码不同，使用相同的行尾）。

看起来好像最初的比较是基于行的二进制表示。是否有任何设置告诉 WinMerge 比较（我的意思是块标记）应该基于 Unicode 内容？

我很努力，但还没有运气。

**更新：**上述问题适用于最新的稳定版 2.12.4。测试版 2.13.22 非常适合我。请参阅[下面的答案](https://stackoverflow.com/a/14606297/1346705)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T20:03:11.103

这并不能真正回答您关于 WinMerge 的问题，但您是否考虑过使用另一个 diff 程序？我的最爱之一是 kdiff - [http://kdiff3.sourceforge.net/](http://kdiff3.sourceforge.net/)

当我使用一个 UTF8 文件和另一个 Unicode 文件对 KDiff 进行比较时，我得到以下信息：![KDiff 比较警告](../Images/fdc5cb569561cb8d250faa6968e179cc.png)

这是比较屏幕 - 请注意，文件上的编码是不同的，但从文本的角度来看，这些文件被认为是相同的：

![KDiff 比较结果](../Images/b86943abbca42aa33b85c5894ea3ff15.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T15:07:25.370

我认为允许合并以不同编码存储的文件确实不应该是合并工具的任务。

编码是将字节（存储在磁盘或内存中）映射到字符（显示在屏幕上）的函数。不幸的是，默认情况下，文件的编码不与文件一起存储。因此，任何想要打开文件并显示其内容的程序都需要猜测编码。虽然这有时有效，但它也是一个容易出错的过程。

现在，不同编码的字符集一般不会重叠。那么，如果您将编码 X 的文件 A 中的字符 C 合并到编码 Y 的文件 B 中，如果字符 C 不是编码 Y 的字符集的一部分，那么合并工具应该做什么？

因此，我认为合并工具的任务应该是合并二进制内容。其他任何事情都是肮脏的黑客行为，并且在某种程度上注定要失败。（合并工具制造商可能决定提供字符级合并，这在大多数情况下也可能有效。但涉及一些猜测。）

因此，我还建议您先将旧文件转换为 UTF-8，然后将它们与新版本合并。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T14:24:07.907

仅供您参考。问题是针对最新的稳定版 2.12.4。我已经尝试过 2.13.22 测试版，它对我来说非常完美。查看完全相同文件的差异——仅删除了文件中的第一行。（非常感谢作者。）

![在此处输入图像描述](../Images/a5589e589a1b5e5b0de184dc97c4c0de.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-14T09:37:33.720

1.  编辑 -> 选项
2.  从左侧的类别窗格中选择“比较”。
3.  复选框“忽略回车差异”（UNIX、Windows、Mac）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T14:10:01.153

我建议在区分之前将文件转换为相同的编码。

如果您使用的是版本控制系统，我建议您使用以下方法：

1.  创建文件的全新签出
2.  将所有文件转换为 UTF-8
3.  提交文件
4.  复制你的新文件
5.  使用 WinMerge

这样，您最终会在历史记录中进行两次提交 - 一次用于编码更改，另一次用于内容更改，WinMerge 将按预期工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T14:51:23.923

`File -> File Encoding...`WinMerge 中的选项呢？它允许独立设置文件的编码。

# python - 如何在pandas中做一系列系列

> ID：14235487
> 
> 赞同：1
> 
> 时间：2013-01-09T12:45:02.407
> 
> 标签：python, pandas

假设我有两个系列：a 和 b，

```
a = Series(None, index=['a','b','c'])
b = Series('lol', index=['j','k','l']) 
```

我想将 b 存储为 a 的元素之一，

```
a['a'] = b 
```

但我明白了

`ValueError: setting an array element with a sequence.`

是否可以将熊猫系列存储在熊猫系列中？我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:58:03.620

`dtype`您可以使用以下方法重铸[`astype`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.astype.html)：

```
In [11]: a = a.astype(object)

In [12]: a['a'] = b

In [13]: a
Out[13]: 
a    [lol, lol, lol]
b                NaN
c                NaN 
```

或者（使用`astype`）在构建时`a`您可以强制`dtype`成为对象：

```
In [14]: a = Series(None, index=['a','b','c'], dtype=object) 
```

您收到此错误的原因是因为`float64`, 不允许 a`Series`并且同样它不允许字符串 - 尝试设置`a['a'] = 'lol'`，您将得到 a `ValueError`。

```
In [21]: a = Series(None, index=['a','b','c'])

In [22]: a.dtype
Out[22]: dtype('float64') 
```

*[您可以在 docs](http://pandas.pydata.org/pandas-docs/stable/basics.html#copying)中阅读有关类型转换的更多信息。*

# ios6 - 从第一个视图（飞溅）到第一个 viewController 的旋转问题

> ID：14235494
> 
> 赞同：0
> 
> 时间：2013-01-09T12:45:19.300
> 
> 标签：ios6, uiinterfaceorientation, uistoryboardsegue, screen-rotation, uiimageorientation

我在 Xcode 4.5.2 中工作，针对 iPad 应用程序的 iOS6，使用情节提要和 segues。序言：我的根控制器（由应用程序委托加载）是一个启动屏幕，只有一个图像、一个升级按钮和一个打开按钮。应用程序需要几秒钟才能加载。我的三个全屏控制器中都有 shouldAutorotate 和 supportedInterfaceOrientations。对于旋转通知，我在根视图控制器中使用以下两种方法：

```
- (void)awakeFromNib
{
    [UIDevice.currentDevice beginGeneratingDeviceOrientationNotifications];
    [NSNotificationCenter.defaultCenter addObserver:self
                                       selector:@selector(orientationChanged:)
                                           name:UIDeviceOrientationDidChangeNotification
                                         object:nil];
}

- (void)orientationChanged:(NSNotification *)notification
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (UIDeviceOrientationIsLandscape(deviceOrientation))
    {
        // Landscape
        CGRect rect = _libraryViewController.libraryTableBorder.frame;
        _libraryViewController.libraryTableBorder.frame = rect;
        _libraryViewController.libraryTableBorder.image = [UIImage imageNamed:@"LibraryBorder_L.png"];
    }
    else if (UIDeviceOrientationIsPortrait(deviceOrientation))
    {
        // Portrait
        CGRect rect = _libraryViewController.libraryTableBorder.frame;
        _libraryViewController.libraryTableBorder.frame = rect;
        _libraryViewController.libraryTableBorder.image = [UIImage imageNamed:@"LibraryBorder_P.png"];
    }
} 
```

我在 LibraryViewController 中有这些完全相同的方法，而且效果很好。我有另一个主视图控制器 (entryView)，它具有相同的方法，而无需调用 libraryTableBorder。无论设备来自或进入条目视图的旋转方式，表格边框都会正确换出。而且，当从库到 entryView 或启动时，视图是正确的。

问题是从横向的飞溅视图到图书馆。在 Potrait 中去图书馆工作正常，显示的边框是肖像边框。但是，在横向中，它也显示纵向边框。当从根视图处于横向时，如何使库边框以横向显示？

任何帮助解决这个难题将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:09:22.860

我已经找到了这个问题的解决方案... viewWillLayoutSubviews

另一个线程提示我，它指向 iOS6 的发行说明。我向其中添加了 UIDeviceOrientation 和 if/else 语句。现在边框正确旋转，无论我去或来自哪个视图！

```
- (void)viewWillLayoutSubviews
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (UIDeviceOrientationIsLandscape(deviceOrientation))
    {
        // Landscape
        CGRect rect = _libraryTableBorder.frame;
        _libraryTableBorder.frame = rect;
        _libraryTableBorder.image = [UIImage imageNamed:@"LibraryBorder_L.png"];
    }
    else if (UIDeviceOrientationIsPortrait(deviceOrientation))
    {
        // Portrait
        CGRect rect = _libraryTableBorder.frame;
        _libraryTableBorder.frame = rect;
        _libraryTableBorder.image = [UIImage imageNamed:@"LibraryBorder_P.png"];
    }
} 
```

这对我来说肯定是一个令人沮丧的问题。希望这对其他人有帮助！

# php - 通过PHP动态创建Mysql表？

> ID：14235495
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:45:24.963
> 
> 标签：php, jquery, mysql

这就是 Siva，我这里讨论的是动态创建 Mysql 表，字段名称为 HTML。

在这里您可以看到示例 HTML 代码....

```
 <div id='container'>
            <h1 id="form-name" style="background-color: rgb(255, 255, 255); box-shadow: none; border: none; margin: 8px 15px;">New Form</h1>
            <form action="saveData.php" method="post" id="preview_form" novalidate="novalidate">
        <div class="row" style="display: block;">
    <label class="field" for="how_to_use_it?">How To Use It?</label><span class="radioButton" data="" id="how_to_use_it?">
    <label class="option" for="how_to_use_it?_option_1">
    <input class="radio" type="radio" name="how_to_use_it?" id="dialog_box_how_to_use_it?_option_1" value="Option 1" data="{&quot;validate&quot;:{&quot;required&quot;:false,&quot;messages&quot;:{}}}">Option 1</label><label class="option" for="how_to_use_it?_option_2">
    <input class="radio" type="radio" name="how_to_use_it?" id="how_to_use_it?_option_2" value="Option 2">Option 2</label>
<label class="option" for="how_to_use_it?_option_3"><input class="radio" type="radio" name="how_to_use_it?" id="how_to_use_it?_option_3" value="Option 3">Option 3</label></span></div>
<input type="submit" class="button blue" value="Submit" id="submit-form"><input type='hidden' id='tname' name='tname' value='surveyForm_6' />
</form>
</div> <!--container--> 
```

这是我需要的输出表：

```
id(pk) how_to_use_it?
1      Option1 
```

这`how_to_use_it?`将是字段的名称，它可能是文本框、收音机、复选框等，以及元素的名称以及它可能有也可能没有特殊字符的名称.....

这是我尝试过的：

```
<?php 
require_once"../session.php";
$selFname =$dbHandle->execQuery("SELECT file_name,max(survey_form_id) as id FROM master_survey_forms WHERE survey_form_id=(SELECT max(survey_form_id) FROM master_survey_forms)");
$fetFname =$dbHandle->fetchObjectQuery($selFname);
$last_saved_on =date("Y-m-d H:i:s");
if($fetFname->file_name != '')
{
    $tmpName =explode("_",$fetFname->file_name);
    $tname =$tmpName[0].'_'.($fetFname->id);
}
else
{
    $tname ='surveyForm_1';
}
if (isset($_POST)) {
    $values="'$fetFname->id' ,'$userId','$last_saved_on',";

    foreach ($_POST as $key => $val) {
        $sqlin .= " ".strtolower($key)." VARCHAR(255) , ";
        if($key != 'tname')
        {
            $fldNamein .=strtolower($key).',';
        }
        $tmpVals="";
        if(is_array($val)){

            if(!empty($val) && $key != 'tname') {
                foreach($val as $vls) {
                    if($key != 'tname')
                    {
                        $tmpVals .=$vls.',';
                    }
                }
                $tmpVals =substr($tmpVals,0,strlen($tmpVals)-1);
            }
            else
            {
                 $tmpVals ="";
            }
        }
        else
        {
            if($key != 'tname')
            {
                $tmpVals =$val;
            }
        }
        if($key != 'tname')
        {
            $values .=" '$tmpVals'".' ,';
        }
        $tsname =$_POST['tname'];
    }
    if($tsname != '')
    {
        $tname =$tsname;
    }
    else
    {
        $tname =$tname;
    }
    echo $sqlin.'sdf';
    $fldName='INSERT INTO '.$tname.'(survey_form_id ,submitted_by,submitted_on, '.$fldNamein;
    $sql = 'CREATE TABLE IF NOT EXISTS ';
    $sql .= $tname.'('.$tname.'_id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY('.$tname.'_id), survey_form_id  varchar(255) ,submitted_by  varchar(15) ,submitted_on  timestamp , '.$sqlin;
    $sql = preg_replace('/, $/', '', $sql);
    $sql .= ')';
    echo $sql;
    if($tsname == '')
    {
        $dbHandle->execQuery($sql);
    }
    else
    {
        $insVal =substr($fldName,0,strlen($fldName)-1).') VALUES ('.substr($values,0,strlen($values)-1).' )';
        $dbHandle->execQuery($insVal);
    }
    //header("Location:index.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:49:58.723

你这样做的方法是生成一个`CREATE TABLE`查询，基于迭代`$_POST`.

请注意，如果您这样做，则需要转义列名（因为您有空格、特殊字符等）。

MySQL 转义字符是```.

编辑：根据您的代码，我猜这是您的问题，如上所述：

```
$sqlin .= " ".strtolower($key)." VARCHAR(255) , ";
// ..
$fldNamein .=strtolower($key).','; 
```

只需转义您的字段名称：

```
$sqlin .= " `".strtolower($key)."` VARCHAR(255) , ";
// ..
$fldNamein .= '`' . strtolower($key) . '`,'; 
```

*（如果这不起作用，请提供 的值`$sql`和任何结果`MySQL_error()`）*

# django - 仅当一个查询中存在关系时才过滤 ManyToManyField

> ID：14235497
> 
> 赞同：0
> 
> 时间：2013-01-09T12:45:26.497
> 
> 标签：django, many-to-many, django-queryset

我正在尝试将以下`visible`函数中的两个计数查询合并为一个查询。如果没有关系或存在关系并且某些特定过滤为真，则函数应返回 True。

```
class OtherModel(models.Model):
    starts = models.DateField()
    ends = models.DateField()

class MyModel(models.Model):

    m2m = models.ManyToManyField('OtherModel', blank=True, )

    def visible(self):
        # Should always return True if no relations to OtherModel are present.

        if self.m2m.exists(): 
            # If relations to OtherModel are present check for starts and ends.
            # The reason for the first check is that if there are no relations
            # and the below query returns 0 the function will return False 
            today = datetime.date.today()
            return self.m2m.filter(starts__lte=today, ends__gte=today).exists()
        return True 
```

**编辑**：更多代码和注释，用存在替换计数。

m2m 关系用于日期限制，但如果没有可用的日期限制，则该函数应返回 True（如果完全没有限制，则对象可见，但如果存在限制但不匹配当前日期，则不可见）。

示例代码只是一个简化的示例，我需要这样做并实际返回查询集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:13:04.247

用 Q 和聚合解决了它，感谢 Aamir 的存在（）：

```
def visible(self):
    today = datetime.date.today()
    return MyModel.objects.annotate(num_m2m=Count('m2m')).filter(
            Q(pk=self.pk) &
            (
                Q(m2m__starts__lte=today) &
                Q(m2m__ends__gte=today) |
                Q(num_m2m=0)
            )
    ).exists() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:29:41.237

不确定您的实际要求到底是什么，但我认为您想避免`self.m2m.count() > 0`额外检查并希望从函数返回一个布尔值（如果它存在或不存在），那么您需要[.exists](https://docs.djangoproject.com/en/dev/ref/models/querysets/#exists)`True` ，如果 QuerySet 包含任何结果，它将返回，`False`如果不包含任何结果：

```
def visible(self):
    # return True or False
    return self.m2m.filter(some_filter=some_value).exists() 
```

# android - 异步任务无法正常工作

> ID：14235498
> 
> 赞同：-8
> 
> 时间：2013-01-09T12:45:26.493
> 
> 标签：android, android-intent, android-asynctask, android-progressbar

当用户按下按钮“b”时，我使用异步任务发送邮件，但它显示错误，错误是“ `Error while executing doInBackground`”和“ `First Activity has leaked a Window`”

```
 public class FirstActivity extends Activity implements OnClickListener
    {
    Button b;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b=(Button)findViewById(R.id.button);
        b.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;

    }

    @Override
    public void onClick(View v) {

        ProgressDialog progress = new ProgressDialog(this);
          progress.setMessage("Loading...");
          new MyTask(progress).execute();

        Intent i=new Intent(this,newclass.class);
        startActivity(i);
            }

        // TODO Auto-generated method stub

    public class MyTask extends AsyncTask<Void, Void, Void> {
          private ProgressDialog progress;

        public MyTask(ProgressDialog progress) 
        {
            this.progress = progress;

        }
          public void onPreExecute()
          {

              super.onPreExecute();
              progress.show();

          }

          public Void doInBackground(Void... unused)
          {

              String detail="sending mmail";
              new MainActivity(detail);
            return null;
          }

          public void onPostExecute(Void unused) 
          {
            progress.dismiss();

          }
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:01:31.973

尝试在 doInBackground 中使用此方法...

```
 public Void doInBackground(Void... unused)
      {
                   runOnUiThread(new Runnable()
            {

                public void run() 
                                    {
                    // TODO Auto-generated method stub

          String detail="sending mmail";
          new MainActivity(detail);
        return null;
                }
            });

      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:51:15.753

该错误是因为您在启动进度对话框后立即开始一个新活动（对话框失去其上下文）。您需要将其移至 onPostExecute()。

```
public void onPostExecute(Void unused){
    progress.dismiss();
    Intent i = new Intent(this,newclass.class);
    startActivity(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:51:44.307

您正在尝试导航到新的`Activity`, `MainActivity`，而 ,`ProgressDialog`仍然打开。这导致内存泄漏。

# c# - c#使用通过LDAP对Active Directory进行身份验证的登录单击事件

> ID：14235501
> 
> 赞同：1
> 
> 时间：2013-01-09T12:45:29.357
> 
> 标签：c#, winforms, authentication, active-directory

我对 c# 和 LDAP 很陌生，我正在做这个项目，以便我可以通过更多的动手方法来了解它们。

我要创建的是一个登录表单，它有一个登录点击事件，在用户使用 LDAP 通过活动目录输入用户名和密码后，该事件将验证用户名和密码。

我已经阅读[了 .NET Framework 3.5 中的管理目录安全主体，](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)以便能够更好地理解这个主题，并且我在这里也经历了类似的主题，这个主题涉及验证本身（[c# - Validate a username and password against Active Directory?](https://stackoverflow.com/questions/290548/validate-a-username-and-password-against-active-directory)）和这个验证用户名（[c#针对通过LDAP的Active Directory](https://stackoverflow.com/questions/469588/c-sharp-against-active-directory-over-ldap)）

从第一个链接的主题中，我了解到以下代码应该可以解决用户名和密码的身份验证问题：

```
 using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, "LDAP://example.string.com/OU=Users, Dc=example, Dc= string, DC=com"))
        {
            bool isValid = pc.ValidateCredentials(User, Password);
        } 
```

因此，我将其合并到点击事件的方法如下：

```
using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, "LDAP://example.string.com/OU=Users, Dc=example, Dc= string, DC=com"))

            bool isValid = pc.ValidateCredentials(User, Password);

             if(isValid)
             {
                 Main m = new Main();
                 this.Close();
                 m.Show();
             }
             else
             {
                 MessageBox.Show("Invalid Username and/or Password","Error!");
                 textBox1.Clear();
                 textBox2.Clear();
                 textBox1.Focus();

             } 
```

这给了我嵌入式语句的布尔错误。我尝试了从第二篇文章中读到的另一种方法，即使用仅验证用户名的代码：

```
 PrincipalContext pc = new PrincipalContext(ContextType.Domain, "LDAP://example.com/OU=Computers,OU=Users,dc=example,dc=com");

        UserPrincipal user = UserPrincipal.FindByIdentity(pc, "username");

        bool userExists = (user != null); 
```

但我发现我无法使用此方法验证密码，因为**UserPrincipal.FindByPassword**不存在。

我也尝试过这种方式，但是**.Password**不存在：

```
 PrincipalContext pc = new PrincipalContext(ContextType.Domain,"LDAP://....");

        UserPrincipal qbeUser = new UserPrincipal(pc);
        qbeUser.EmployeeId = User;

        //.Password does not exist
        UserPrincipal qbePassword = new UserPrincipal(pc);
        qbePassword.Password = Password;

        // create your principal searcher passing in the QBE principal    
        PrincipalSearcher srchUser = new PrincipalSearcher(qbeUser);
         PrincipalSearcher srchPass = new PrincipalSearcher(qbePassword);
        // try to find that user and password
        UserPrincipal founduser = srchUser.FindOne() as UserPrincipal;
        UserPrincipal foundpass = srchPass.FindOne() as UserPrincipal;

        if (founduser != null)
        {
            if (foundpass != null)
            {
                Main m = new Main();
                this.Close();
                m.Show();
            }
            else
            {
                MessageBox.Show("Password Not Valid.");
                textBox2.Clear();
                textBox2.Focus();
            }
        }

        else
        {
            MessageBox.Show("Username Not Valid.");
            textBox1.Clear();
            textBox1.Focus();
        } 
```

有人可以请指导我如何正确处理这个问题。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-30T19:47:01.247

我已经这样做了，但没有使用 PrincipalContext。相反，我发现很多人都在努力使用该对象。

我的实现是一个 winforms 表单，提交按钮调用一个执行下面代码的 4 las 行的方法。

我针对这个宏伟的[免费测试 LDAP 服务器进行了测试](https://www.forumsys.com/tutorials/integration-how-to/ldap/online-ldap-test-server/#comment-6953)

```
var path = "LDAP://ldap.forumsys.com:389/dc=example,dc=com";
var user = $@"uid={username},dc=example,dc=com";
var pass = "password";

var directoryEntry = new DirectoryEntry(path, user, pass, AuthenticationTypes.None);

var searcher = new DirectorySearcher(directoryEntry);
searcher.PropertiesToLoad.Add("*");
var searchResult = searcher.FindOne(); 
```

我不完全理解所有这些行的作用。

**重要提示**

在路径上，“LDAP://”字符串应该在块 mayus 上。

在用户中，根据您使用“cn=username-admin”验证管理员的测试服务器，请务必将身份验证类型也设置为 ServerBind。

# c# - LINQ 的问题：从数据库中读取对象，获取异常

> ID：14235513
> 
> 赞同：2
> 
> 时间：2013-01-09T12:46:14.793
> 
> 标签：c#, .net, linq-to-sql

我对 LINQ 很陌生，我遇到了一些问题。我已经尝试了一段时间的谷歌搜索，但我仍然没有找到任何确切的答案来解决我的问题，所以我也会问。

我在 Microsoft SQL Server 上建立了一个测试数据库，其中包含两个表“Person2”和“Department2”。Person2 与 Department2 具有多对一的关系。许多人只属于一个部门。

Person2 具有以下属性：

*   id (int, 主键)
*   名称 (nchar(50))
*   电话号码 (nchar(10))
*   DepartmentID（int，外键名称：“fk_Department2_DepartmentID”）

Department2 具有以下属性：

*   部门 ID（整数，主键）
*   DepartmentDesc (nchar(50))

C# 代码由两个项目文件中的四个类组成：一个是 Person、Department 和 Program（运行测试），另一个是 TabellTest。这是我试图运行的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data.Linq;
using System.Data.Linq.Mapping;

namespace DBTest
{
    [Database]
    public class TableTest : DataContext 
    {
        public Table<Person> persons;
        public Table<Department> departments;

        public TabellTest(String ConnectionString):
            base(ConnectionString){}

    }

}

using System;
using System.Collections;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Data.Linq;
using System.Data.Linq.Mapping;

namespace DBTest
{
    [Table(Name = "Person2")]
    public class Person
    {

        public Person() { }

        [Column(IsPrimaryKey = true)]
        private int id;
        public int Id
        {
            get { return this.id; }
            set { this.id = value; }
        }

        [Column]
        private string name;
        public string Name
        {
            get { return this.name; }
            set { this.name = value; }
        }

        [Column]
        private string phoneNumber;
        public string PhoneNumber
        {
            get { return this.phoneNumber;}
            set { this.phoneNumber = value;}
        }

        [Column (Name="DepartmentID")]
        private int? personDepartmentID;
        public int? PersonDepartmentID
        {
            get { return this.personDepartmentID; }
            set { this.personDepartmentID = value; }
        }

        [Association(Name = "FK_Person_PersonDepartment",
        IsForeignKey = true, Storage = "_department", ThisKey = "personDepartmentID")]
        private EntityRef<Department> _department;
        public Department Department
        {
            get { return _department.Entity; }
            set { _department.Entity = value; }
        }

    }

    [Table (Name = "Department2")]
    public class Department {

        public Department() { }

        public Department(int departmentID, string departmentDesc)
        {
            this.departmentID = deparmentID;
            this.departmentDesc = departmentDesc;
        }

        [Column(IsPrimaryKey = true)]
        private int departmentID;
        public int DepartmentID
        {
            get {return this.departmentID; }
            set {this.departmentID = value; }
        }

        [Column]
        private string departmentDesc;
        public string DepartmentDesc
        {
            get { return this.departmentDesc; }
            set { this.departmentDesc = value; }
        }

        private EntitySet<Person> _person = new EntitySet<Person>();
        [Association(Name = "FK_Person_PersonDepartment",
        IsForeignKey = true, Storage = "_person", ThisKey = "departmentID", OtherKey="personDepartmentID")]
        public EntitySet<Person> person
        {
            get { return _person; }
            set { _person = value; } 
        }

    }

    class Program
    {
        static void Main(string[] args)
        {
            TableTest Test = new TableTest("REMOVED FOR STACKOVERFLOW.COM, JUST ASSUME IT WORKS");

            foreach (Person pers in Test.persons)
            {
                Console.WriteLine(pers.Name + " " + pers.Id + " " + pers.PhoneNumber + " " + pers.Department.DepartmentID + " " + pers.Department.DepartmentDesc);
            }

            Console.WriteLine("\n\n");
            foreach (Department dep in Test.department)
            {
                Console.WriteLine(dep.DepartmentID + " " + dep.DepartmentDesc);
                foreach (Person pers in dep.person)
                {
                    Console.WriteLine(pers.Name + " " + pers.Id + " " + pers.PhoneNumber);
                }
            }

        }
    }
} 
```

问题的核心是Person类中的这段代码：

```
 [Association(Name = "FK_Person_PersonDepartment", IsForeignKey = true, 
    Storage = "_department", ThisKey = "personDepartmentID")]
    private EntityRef<Department> _department;
    public Department Department
    {
        get { return _department.Entity; }
        set { _department.Entity = value; }
    } 
```

每当我尝试运行该程序时，都会出现以下异常：

> 未处理的异常：System.InvalidOperationException：ThisKey 列的数量与类型“Person”中的关联属性“_department”的 OtherKey 列的数量不同......等等等等

我在谷歌搜索问题时发现的一个解决方案建议我将 OtherKey 属性添加到关联中，在这种情况下，关联代码变成这样：

```
[Association(Name = "FK_Person_PersonDepartment", IsForeignKey = true, 
Storage = "_department", ThisKey = "personDepartmentID", OtherKey = "departmentID")] 
```

（我也尝试过使用大写 D：OtherKey = "DepartmentID"）]

当我这样做时，我得到了这个异常：

> 未处理的异常：System.InvalidOperationException：找不到类型“EntityRef 1”上键“departmentID”的键成员“departmentID”`1´. The key may be wrong or the field or property on ´EntityRef`已更改名称。在……等等等等等等

具有讽刺意味的是，使用 EntitySet 操作的 Department 的关联段同时使用了这两个键（刚刚打开了 ThisKey 和 OtherKey），并且可以正常工作。换句话说：我无法从 Person 类的数据库中获取 Department 对象，而它可以在 Department 代码中获取 Person 对象集。

现在，亲爱的读者和程序员，你建议我做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:37:42.390

看起来它可能只是命令 - 您正在修改私人成员而不是公众；你试过这个吗？

```
private EntityRef<Department> _department;
[Association(Name = "FK_Person_PersonDepartment", IsForeignKey = true,
   Storage = "_department", ThisKey = "personDepartmentID", OtherKey = "departmentID")]
public Department Department
{
  get { return _department.Entity; }
  set { _department.Entity = value; }
} 
```

# windows - vtk 未解析的外部符号 vtkdatasetreader

> ID：14235514
> 
> 赞同：1
> 
> 时间：2013-01-09T12:46:16.603
> 
> 标签：windows, visual-studio-2008, x86, windows-xp, vtk

很长一段时间以来，我一直被与 MFC 相关的问题所困扰。我已经阅读了许多论坛、VTK-Users 帖子等，但没有任何运气。

我的基本问题是**vtkMFC.lib**没有构建；无论我如何构建我的项目或配置它。

这些是我遵循的步骤：

1.  使用 CMake 2.8.9生成**VTK.sln**，其中 VTK_USE_GUISUPPORT、BUILD_SHARED_LIBS、VTK_USE_MFC、BUILD_EXAMPLES 已打开，VTK_USE_VIDEO_FOR_WINDOWS 已关闭。
2.  在 VS-2008 上打开 VTK.sln 并仅构建**vtkMFC.sln**。
3.  构建整个解决方案。{我也尝试过将第 2 点和第 3 点互换，但没有结果}
4.  有6个错误；**其中 3 个与vtkMFC.lib**不存在的事实有关（对于示例。显然）。其余的是关于几个已解析的外部符号，

错误 LNK2019：未解析的外部符号“__declspec（dllimport）公共：静态类**vtkDataSetReader** * _ *cdecl vtkDataSetReader::New(void)”（* _imp_?New@vtkDataSetReader@@SAPAV1@XZ）在函数“受保护：__thiscall CSampleDoc::CSampleDoc (void)" (??0CSampleDoc@@IAE@XZ) 在 SampleDoc.obj

错误 LNK2019：未解析的外部符号“__declspec(dllimport) public: class **vtkDataSet** * _ *thiscall vtkDataSetReader::GetOutput(void)”(* _imp_?GetOutput@vtkDataSetReader@@QAEPAVvtkDataSet@@XZ) 在函数“public: virtual int __thiscall CSampleDoc: SampleDoc.obj 中的 :OnOpenDocument(char const *)" (?OnOpenDocument@CSampleDoc@@UAEHPBD@Z)

**在vtkMFC**解决方案的Debug/bin 中生成的文件是 vtkMFC。**dll**，vtkMFC。**idb**，vtkMFC。**同类**，vtkMFC。**数据库**。

我还将**vtkIO.lib**添加到生成错误的项目中，并且相同的错误继续以及另一个说未找到 vtkIO.lib。

在这方面的任何帮助将不胜感激。

最好的，萨塔克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T15:22:20.320

截至 2013 年 2 月的回答：

事实证明，**VTK 5.10.1**存在一些问题。使用**5.8.0**解决了这个问题。

从 CMake 构建 VTK 时要记住的一些事项：

如果`BUILD_SHARED_LIBS`选中（即，您希望生成 DLL），则确保所有标志都设置为`/MD`. 如果`BUILD_SHARED_LIBS`未选中（即，您不希望生成 DLL 并通过静态库链接），则确保所有标志都设置为`/MT`.

# postgresql - 如何在 PostgreSQL 中对字符串进行 XML 编码？

> ID：14235519
> 
> 赞同：3
> 
> 时间：2013-01-09T12:46:34.647
> 
> 标签：postgresql, plpgsql, postgresql-9.1, postgresql-9.2

问题：我可以像这样在 Postgres 中创建一个 XML 编码的字符串：

```
SELECT xmlelement(name name, 'AT&T', null ) 
```

现在我想获取xml编码的值，也就是说`AT&amp;T`。

但如果我这样做：

```
SELECT unnest(xpath('/name/text()', xmlelement(name name, 'AT&T', null ))) 
```

然后我明白了`AT&T`，没有`AT&amp;T`。

如何获取 XML 编码的值？

此外，是否可以为 xmlelement 提供一个空名称，然后将其转换为 varchar？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-02-03T07:09:09.823

我建议使用一个简单的功能。

```
create or replace function xml_escape(s text) returns text as
$$
  select replace(replace(replace(s, '&', '&amp;'), '>', '&gt;'), '<', '&lt;');
$$
language sql immutable strict; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:14:21.613

如果您正在写入 HTML 客户端，那么您必须对其进行 HTML 转义以显示原始 HTML。

如我所见，您主要是 C# 开发人员，那么静态方法`HttpUtility.HtmlEncode()`就可以了。

# vim - 如何在 C/C++ 模式下为 vim 着色添加单词？

> ID：14235523
> 
> 赞同：1
> 
> 时间：2013-01-09T12:44:39.533
> 
> 标签：vim

我注意到在 C/C++ 模式下，诸如`TODO` `XXX`和之类的注释`FIXME`会得到特殊的颜色标记。

*如何将单词添加`HACK`到要以相同方式标记的单词列表中？*

我尝试将以下内容添加到我的`~/.vimrc`中，但没有奏效：

```
syn keyword cTodo   contained TODO FIXME XXX HACK 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:06:02.847

我建议不要直接修改原始语法文件；然后，每当原始版本更改时（例如，在 Vim 升级后），您都必须维护您的版本。对于这些小的语法增强，该位置在文件中*，*`~/.vim/after/syntax/c.vim`该文件源自原始语法。该行将是

 *```
syn keyword cTodo   contained HACK 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T12:57:27.750

您需要修改语法文件。通常，它位于 中`/usr/share/vim/vim72/syntax`，而您想要的文件是`c.vim`and `cpp.vim`。您将看到一行`syn keyword cTodo contained`后面跟着一个单词列表，这些单词在 Todo 标签下被考虑用于着色。您可以在那里添加您的单词，或制作您自己的关键字，但添加您自己的关键字也意味着将您的关键字添加到着色文件中。

对于仅限用户的更改，请创建一个目录`~/.vim/syntax`。将 c.vim 和 cpp.vim 文件复制到那里，并根据需要进行编辑。

第二次编辑：决定进一步看，看来您可以添加到当前的语法文件中，但我还没有尝试过。将您添加到 .vimrc 的一行添加到文件中`~/.vim/after/syntax`*

# logging - Quickfix 文件日志工厂

> ID：14235524
> 
> 赞同：1
> 
> 时间：2013-01-09T12:46:44.697
> 
> 标签：logging, quickfix

在使用 QuickFix dll 和 QuickFix 界面时，我正在使用 QuiCkFix 文件存储工厂和日志工厂创建一个新会话。是否有一种方法或过程可以在某个时间点清除这些日志文件？

我尝试了以下但似乎不起作用：

```
DirectCast(QFInterface.LogFactory, QuickFix.Log).Clear() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T13:01:51.820

LogFactory 和 Log 没有继承关系，所以 DirectCast 不起作用。只需在 Log 实例上调用 clear 即可。

# asp.net - DevExpress GridView 通过单击行编辑行

> ID：14235530
> 
> 赞同：2
> 
> 时间：2013-01-09T12:46:58.463
> 
> 标签：asp.net

我想通过单击“编辑”按钮/链接以及单击行中的任意位置来编辑`GridView`（不是 inLine 而是）中的一行数据。`EditFormAndDisplayRow`

任何帮助深表感谢。我正在使用 DevExpress 控件。

谢谢，

瑞奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T18:32:48.360

安德鲁的回答很接近，但对我来说并不奏效。我对 ClientSideEvents-RowClick 属性进行了小修改以使其工作：

```
<dx:ASPxGridView ID="grid" runat="server" KeyFieldName="ID">
    <Columns>
        <dx:GridViewDataColumn FieldName="ID"></dx:GridViewDataColumn>
        <dx:GridViewDataColumn FieldName="Text"></dx:GridViewDataColumn>
    </Columns>
    <ClientSideEvents RowClick="function(s,e) { s.StartEditRow(e.visibleIndex); }" />
</dx:ASPxGridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:10:00.687

要解决您的问题：

```
 <dx:ASPxGridView ID="grid" runat="server" KeyFieldName="ID">
        <Columns>
            <dx:GridViewDataColumn FieldName="ID"></dx:GridViewDataColumn>
            <dx:GridViewDataColumn FieldName="Text"></dx:GridViewDataColumn>
        </Columns>
        <ClientSideEvents RowClick="s.StartEditRow(e.visibleIndex)" />
    </dx:ASPxGridView> 
```

# asp.net - 在控件的模式弹出扩展器上显示消息框

> ID：14235533
> 
> 赞同：1
> 
> 时间：2013-01-09T12:47:08.117
> 
> 标签：asp.net, controls, ajaxcontroltoolkit, messagebox, modalpopupextender

我在具有以下模式弹出扩展器的页面中有一个控件：

```
<asp:Panel ID="pnl_Completed" runat="server">
    <asp:Image ID="exit_Completed" runat="server" ImageUrl="" />
    <h3 style="text-align:center;">Completed</h3>
    <asp:Panel ID="pnl_inner" runat="server">
    <table style="width:100%;height:100%" cellpadding="5px"> 
        <tr style="height:40px;">
            <td valign="top">Comment: </td>
            <td>
            <telerik:RadTextBox ID="txt_CompletedComment" runat="server" TextMode="MultiLine" Rows="6" Width="400" Height="100"></telerik:RadTextBox>        
            </td>
        </tr>
        <tr style="height:40px;">
        <td colspan="2" align="center"><asp:Button id="btn_SaveCompleted" runat="server" Text="Complete" OnClick="btn_SaveCompleted_Click" /></td>
        </tr>
    </table> 
    </asp:Panel>

</asp:Panel>
<cc1:ModalPopupExtender ID="ModalPopupExtender_Completed" runat="server"  PopupControlID="pnl_Completed" CancelControlID="exit_Completed" TargetControlID="dummy_btn_Completed" >
</cc1:ModalPopupExtender>

<asp:Button id="dummy_btn_Completed" runat="server" CssClass="display_none" /> 
```

当文本框为空时，我想在 btn_SaveCompleted_Click 事件上显示一个消息框我试过这个：

```
 If txt_CompletedComment.Text.Trim().Length = 0 Then
            ScriptManager.RegisterStartupScript(Me, Me.GetType, "key", "alert('Please enter a comment.');", True)
 End If 
```

但这不起作用，它只是隐藏了模态弹出扩展器，没有错误。我做错了吗？有没有其他的方式来展示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:16:31.367

只需使用`JavaScript`，这里有很多方法可以做到这一点，例如：

```
<asp:Button id="btn_SaveCompleted" runat="server" Text="Complete"  
   OnClientClick="return ValidateTheTextbox();"OnClick="btn_SaveCompleted_Click" />

<script>
     function ValidateTheTextbox()
     {
          var txtbox = document.getElementById('<%= txt_CompletedComment.ClientID %>');
          if(txtbox.value=="")
          {
              alert('Please enter a comment.');
              return false; //suppress the submit button
          }
          return true; //let the form submit
     }
</script> 
```

# asp.net - Ajax Modelpop 不工作

> ID：14235535
> 
> 赞同：0
> 
> 时间：2013-01-09T12:47:16.347
> 
> 标签：asp.net, ajax

我在gridview中有ajax modelpop：

```
<asp:GridView ID="grdInbox" runat="server" CellPadding="0"
       AutoGenerateColumns="False" Width="100%">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Button CssClass="blueButton" ID="btnReply" Text="Reply" style="background-color:#FFA600;" runat="server"/>
                    <cc1:ModalPopupExtender
                        ID="modlpopupReply" runat="server" TargetControlID="btnReply" PopupControlID="pnlReply" CancelControlID="btnCancelReply" DropShadow="true" Enabled="True" X="100" Y="100">
                    </cc1:ModalPopupExtender>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>    

<asp:Panel ClientIDMode="Static" ID="pnlReply" runat="server">
    <div>
        <div style="font-size:20px;">Reply Message</div>
        <asp:Button ID="btnSend" runat="server" Text="Send" ClientIDMode="Static"    CssClass="blueButton" />
        <asp:Button ID="btnCancelReply" runat="server" ClientIDMode="Static" Text="Cancel" CssClass="blueButton" style="background-color:#FFA600;"/>
    </div>
</asp:Panel> 
```

问题是：

*   它没有出现在屏幕上。
*   以及如何在弹出窗口中传递gridview的其他列值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:29:18.957

你可能想看看[这个](http://www.aspsnippets.com/Articles/Add-Edit-Update-Records-in-GridView-using-Modal-Popup-in-ASP.Net.aspx)和[这个](http://mattberseth.com/blog/2007/07/modalpopupextender_example_for.html)

# php - 打印屏幕 > ckeditor > CakePHP CakeEmail

> ID：14235536
> 
> 赞同：0
> 
> 时间：2013-01-09T12:47:21.857
> 
> 标签：php, image, email, cakephp, ckeditor

我有一个 CKEditor 3.6.5（修订版 7647）字段（在 CakePHP 2.2.1 站点上），用户可以在其中粘贴打印屏幕图像（仅适用于 Firefox）。粘贴生成的 html（从 word 中粘贴按钮）是这样的：

```
<img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO 9TXL0Y4OHwAAAABJRU5ErkJggg==" /> 
```

在某个时候，我必须通过电子邮件发送这些字段上的 html，其中应该包括图像。

阅读 [base64-encoded-images-in-email-signatures][1] 和 [how-to-embed-images-in-email][2] 我认为电子邮件应该带有图像的附件。

我的问题是如何转换文件上图像的 src？这样我打算在发送之前转换 HTML。

我已成功尝试附加文件：

```
$data = base64_decode('iVBORw0KGgoAAAANSUhEUgAAAAUA AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO 9TXL0Y4OHwAAAABJRU5ErkJggg==');//file_get_contents('http://' . env('HTTP_HOST') . $fileInfo['url'] . '/disable-auth-key:' . Configure::read('Security.salt') . '.' . $fileInfo['ext']);
$handle = fopen(TMP . 'print_screen.png', 'w+');
fwrite($handle, $data);
fclose($handle);

$email = new CakeEmail(array(
    'log' => true,
    'config' => 'smtp',
    'returnPath' => 'return@mydomain.pt',
    'from' => array('app@mydomain.pt' => 'APP'),
    'to'  => array('name@domain.pt' => 'Name'),
    'emailFormat' => 'html',
    'subject' => 'image test',
    'domain' => '@uab.pt',
    'attachments' => array(
        'print_screen.png' => array(
            'file' => TMP . 'print_screen.png',
            'mimetype' => 'image/png',
            'contentId' => 'Print-Screen-01'
        )
    )
));

$email->send('test|<img src="cid:print_screen.png@Print-Screen-01">|'); 
```

在 GMail 上，我可以访问附件文件，但在正文上没有图像。源头在哪里

```
<div id=":85x">test|<img>|</div> 
```

在 Outlook 上，没有附件，来源是

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">test|<img src="cid:print_screen.png@Print-Screen-01"> 
```

我也对达到相同结果的其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:42:47.170

在图像标签的 src 属性上，cid 值应该是我使用的@。

正确的代码行

```
$email->send('test|<img src="cid:Print-Screen-01">|'); 
```

# java - 将复合组件与 WebFlow 一起使用时的渲染顺序

> ID：14235541
> 
> 赞同：0
> 
> 时间：2013-01-09T12:47:32.077
> 
> 标签：java, spring, spring-webflow, composite-component

将 Web Flow (2.3.1.RELEASE) 与 JSF 结合使用时，在使用任何类型的复合组件时出现渲染问题，例如`<h:outputLabel />`单击`<h:commandLink />`. 复合组件的内容始终显示在页面底部！刷新页面时，渲染又好了……

我可以很容易地使用以下代码重现这一点：

我的小脸：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:test="http://java.sun.com/jsf/composite/components">

<h:body>
<h:form id="form">

<h:commandLink id="link" value="link" /><br/>
<test:testComponent id="test" />
<h:outputLabel value="label" id="label" />

</h:form>
</h:body>
</html> 
```

复合组件：

```
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface>
</composite:interface>

<composite:implementation>
<h:outputText value="hello world" />
</composite:implementation>

</ui:composition> 
```

我的怀疑是，当 Web Flow 在恢复流程后恢复视图时，组件的顺序会混乱。在简单的 JSF facelet（不使用 Web Flow）中使用上述代码时，一切正常。

我已经通过 Mojarra 和 Web Flow 的内部进行了调试，可以看到在使用 Web Flow 而不是使用普通 JSF 时，FaceletViewHandlingStrategy 的 buildView(FacesContext ctx, UIViewRoot view) 方法中的顺序混合在一起。

我已经在 Spring 论坛和 Spring JIRA 上发布了同样的问题，但没有很多回复。

我要提前感谢任何看到这个问题的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:36:32.227

SpringSource 团队解决了这个问题：

> 这个问题的主要原因似乎是 com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.adjustIndexOfDynamicChildren()。添加条件断点（在 UIForm 的父实例上）显示子顺序如何更改。com.sun.faces.context.StateContext 似乎正在通过 SystemEventListener 内部类跟踪动态变化。最初调用 startTrackViewModifications 时，侦听器被添加到 UIViewRoot。收到第一个回发时使用的侦听器与重定向后使用的侦听器之间似乎不匹配：收到回发 JSF 视图已恢复并 startTrackViewModifications 开始 事件已处理 发出重定向 收到重定向 GET 已恢复 JSF 视图，但之前的 StateContext$AddRemoveListerner 似乎已附加 现在有两个 StateContext 在播放，一个新的被添加并且通过 AddRemoveListerner 引用的前一个调用 startTrackViewModifications 现在只更新较新的 StateContext 为了解决这个问题，我们需要确保在重定向之前调用 StateContext.release() 方法。此方法将触发 UIViewRoot 上的 unsubscribeFromViewEvent。似乎 StateContext.release() 只能通过 StateManagerImpl.saveView 调用。由于 Spring Web Flow 有自己的状态管理，这个方法目前并不总是被调用。

由[菲尔·韦伯提供](https://jira.springsource.org/browse/SWF-1577?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:14:01.577

您是否尝试过将其添加到 MVC servlet 上下文 XML 中？

```
 <webflow:flow-executor id="flowExecutor" flow-registry="flowRegistry" >
            <webflow:flow-execution-attributes>
                <webflow:redirect-in-same-state value="false"/>
            </webflow:flow-execution-attributes>

    ....
    </webflow:flow-executor> 
```

# sql - 列 'QM_Analysis.DefectLocation' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中

> ID：14235544
> 
> 赞同：1
> 
> 时间：2013-01-09T12:47:37.103
> 
> 标签：sql, sql-server, sql-server-2008, procedure

我正在尝试创建此存储过程，问题是当我将 count() 放在 SELECT 列表中时，它返回错误：“列 'QM_Analysis.DefectLocation' 在选择列表中无效，因为它不包含在任何一个聚合函数或 GROUP BY 子句。”

我已经尝试了很多东西，但仍然返回相同的错误。

有人有小费吗？

提前致谢

```
USE [JEMS]
GO
/****** Object:  StoredProcedure [dbo].[up_RE_Rpt_Defect_new]    Script Date: 01/08/2013 11:35:38 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER OFF
GO

/*
[up_RE_Rpt_Defect_new] 
@Factory ="",
@Customer_ID ='25',
@Manuf_Area = null,--'136',
@Route =null,--361,
@Step = null,--1848,
@DateFrom ='2012-10-25  00:00:00.000',
@DateTo ='2012-10-25  09:00:00.000',
@hrFrom = '06:00',
@hrTo = '14:00',
@language = 9,
@family = null
*/

ALTER  PROCEDURE [dbo].[up_RE_Rpt_Defect_new]

-- Plant> Customer> Manufacturing Area> Route> Step> DateFrom> DateTo> TopNvalues;

@Factory as varchar(20)= null,
@Customer_ID as varchar(50)= null,
@Manuf_Area as varchar(50)= null,
@Route as varchar(400) = null,
@Step as varchar(400)= null,
@DateFrom as datetime= null,
@DateTo datetime = null,
@hrFrom as varchar(5) = null,
@hrTo as varchar(5) = null,
@TopN as varchar(20)= null,
@language as int = null,
@family as varchar(5) = null

AS

--declare @Factory as varchar(20),
--@Customer_ID as varchar(20),
--@Manuf_Area as varchar(20),
--@Route as varchar(50) ,
--@Step as varchar(20),
--@DateFrom as smalldatetime,
--@DateFrom2 as smalldatetime,
--@hrFrom as varchar(5) ,
--@hrTo as varchar(5) ,
--@DateTo smalldatetime ,
--@DateTo2 varchar(20) ,
--@TopN as varchar(20)

--SET @Customer_ID = 25
--SET @Factory = 7
--SET @Manuf_Area = 136
--SET @DateFrom  = '2012-10-23  05:00:00.000' -- CONVERT(varchar(12),@DateFrom,103)
--SET @DateTo  = '2012-10-23  09:00:00.000'
--SET @hrFrom = '08:00'
--SET @hrTo = '09:00'
--SET @language = 9

IF @Factory = ""
    BEGIN SET @Factory = null 
END

IF @Manuf_Area= ""
    BEGIN SET @Manuf_Area = null 
END

IF @Route = ""
    BEGIN SET @Route = null 
END

IF @Step = ""
    BEGIN SET @Step = null 
END

IF @family  = ""
    BEGIN SET @family = null 
END

DECLARE @Select as varchar(7000)
DECLARE @Where as varchar(7000)

SET @Select = 
'SELECT TOP 10 
    COUNT(qman.DefectLocation) as cont,
    qman.DefectLocation
FROM QM_Analysis qman WITH(NOLOCK)
    INNER JOIN QM_TestData td           WITH(NOLOCK) on qman.Wip_ID = td.Wip_ID AND qman.Process_ID = td.Process_ID
    INNER JOIN QM_Fixture qf            WITH(NOLOCK) on td.Fixture_ID = qf.Fixture_ID
    INNER JOIN QM_Defects def           WITH(NOLOCK) on qman.Defect_ID = def.Defect_ID
    INNER JOIN CR_Text defText          WITH(NOLOCK) on def.Defect = defText.Text_ID
    INNER JOIN CT_FeederTrayTrack ftt   WITH(NOLOCK) on qman.FeederTrayTrack_ID = ftt.FeederTrayTrack_ID
    INNER JOIN QM_DataAnalysis da       WITH(NOLOCK) on qman.Analysis_ID = da.Analysis_ID 
    INNER JOIN CR_Text ansText1         WITH(NOLOCK) on ansText1.Language_ID = 0 AND da.AnalysisStatus = ansText1.Translation
    INNER JOIN QM_AnalysisStatus ans    WITH(NOLOCK) on ansText1.Text_ID = ans.AnalysisStatus
    INNER JOIN CR_Text ansText2         WITH(NOLOCK) on ans.Descr = ansText2.Text_ID AND ansText2.Language_ID = defText.Language_ID
    INNER JOIN WP_Wip w                 WITH(NOLOCK) on td.Wip_ID = w.Wip_ID
    INNER JOIN CR_Materials m           WITH(NOLOCK) on qman.Material_ID = m.Material_ID
    INNER JOIN CR_Assemblies a          WITH(NOLOCK) on td.Assembly_ID = a.Assembly_ID
    INNER JOIN CR_Families fam          WITH(NOLOCK) on a.Family_ID = fam.Family_ID
    INNER JOIN CR_Text famText          WITH(NOLOCK) on fam.Family = famText.Text_ID AND famText.Language_ID = defText.Language_ID
    INNER JOIN CR_Customers c           WITH(NOLOCK) on a.Customer_ID = c.Customer_ID
    INNER JOIN CR_Text cText            WITH(NOLOCK) on c.Customer = cText.Text_ID AND cText.Language_ID = defText.Language_ID
    INNER JOIN CR_Text dText            WITH(NOLOCK) on c.Division = dText.Text_ID AND dText.Language_ID = defText.Language_ID
    INNER JOIN CR_Text eText            WITH(NOLOCK) on qf.Fixture = eText.Text_ID AND eText.Language_ID = defText.Language_ID
    LEFT JOIN CT_EquipmentSETup es      WITH(NOLOCK) on qman.EquipmentOrRouteStep_ID = es.EquipmentSETup_ID AND qman.IsEquipment = 1
    LEFT JOIN CR_Equipment_V e          WITH(NOLOCK) on es.Equipment_ID = e.Equipment_ID
    LEFT JOIN CR_FMRS4_V fmrs1          WITH(NOLOCK) on es.RouteStep_ID = fmrs1.RouteStep_ID AND fmrs1.Language_ID = defText.Language_ID
    LEFT JOIN CT_RouteStepSETup rss     WITH(NOLOCK) on qman.EquipmentOrRouteStep_ID = rss.RouteStepSETup_ID AND qman.IsEquipment = 0
    LEFT JOIN CR_FMRS4_V fmrs2          WITH(NOLOCK) on rss.RouteStep_ID = fmrs2.RouteStep_ID AND fmrs2.Language_ID = defText.Language_ID
    LEFT JOIN CR_Equipment_V e3         WITH(NOLOCK) on td.Equipment_ID = e3.Equipment_ID
    INNER JOIN CR_FMRS4_V fmrs3         WITH(NOLOCK) on td.RouteStep_ID = fmrs3.RouteStep_ID AND fmrs3.Language_ID = defText.Language_ID 
    --- separeted
    JOIN CR_FMRS4_V fmrs4               WITH(NOLOCK) on qman.RouteStep_ID = fmrs4.RouteStep_ID AND fmrs4.Language_ID = defText.Language_ID
    INNER JOIN SC_Users ut              WITH(NOLOCK) on td.OperatorID_ID = ut.UserID_ID
    INNER JOIN SC_Users ua              WITH(NOLOCK) on qman.AnalysisBy_ID = ua.UserID_ID
    LEFT JOIN QM_DataRec dr             WITH(NOLOCK) on da.Data_ID = dr.Data_ID AND da.Wip_ID = dr.Wip_ID AND da.Process_ID = dr.Process_ID'

SET @Where = ' WHERE ' +        
'C.Customer_ID = ' + CONVERT(varchar(8),@Customer_ID ) +
' AND defText.Language_ID = ' + CAST(@language as varchar(3)) +
' AND da.AssociatedDefectFlag = '+'''F''' + -- AND a.Assembly_ID = '10587' --P266-8446100
' AND a.Active=1 AND def.defect_ID = 126 ' 

IF @Factory IS NOT NULL 
    BEGIN
    SET @Where = @Where + ' AND (fmrs2.Factory_ID = ' + CAST(@Factory as varchar(10)) + ' or fmrs4.Factory_ID = ' + 
    CAST(@Factory as varchar(2)) + ')'  -- AND fmrs3.Factory_ID = @Factory AND fmrs4.Factory_ID = @Factory 
END

IF @Manuf_Area IS NOT NULL
    BEGIN
    SET @Where = @Where + ' AND fmrs3.FactoryMA_ID = ' + CAST(@Manuf_Area as varchar(5)) 
END

IF @family IS NOT NULL
    BEGIN
    SET @Where = @Where + ' AND fam.Family_ID = ' + CAST(@family AS VARCHAR(5)) 
END

IF @Route IS NOT NULL
    BEGIN
    SET @Where = @Where + ' AND fmrs3.FactoryMARoute_ID in(' + CAST(@Route as varchar(10)) + ') ' +
                          ' AND fmrs4.FactoryMARoute_ID in(' + CAST(@Route as varchar(10)) + ') '
END

IF @Step IS NOT NULL
    BEGIN
    SET @Where = @Where + ' AND (fmrs3.RouteStep_ID in(' + CAST(@Step as varchar(50)) + ') or fmrs4.RouteStep_ID in (' + 
    CAST(@Step as varchar(50)) + '))'
END

SET @Where = @Where + 'AND CONVERT(varchar(5),td.LastUpdated,114) between ''' + @hrFrom + ''' AND ''' + @hrTo + '''' + 
'AND td.LastUpdated between ''' + CONVERT(varchar(12),@DateFrom,111) + ' ' + @hrFrom + ':00.000' + ''' AND ''' + 
CONVERT(varchar(12),@DateTo,111) + ' ' + @hrTo + ':00.000'''

SET @Where = @Where + 'GROUP BY qman.DefectLocation ORDER BY count(qman.DefectLocation) DESC'

PRINT (@select + @Where)
EXEC  (@select + @Where) 
```

# vb.net - VB.NET 如何访问对象（从 JSON 反序列化）

> ID：14235545
> 
> 赞同：0
> 
> 时间：2013-01-09T12:47:38.163
> 
> 标签：vb.net

如果有人能帮助我将突出显示的行放入变量中，我将非常感激。

我尝试了以下方法：

```
Dim Fromid = FBrequest.data(0)(3)("from")(2) 
```

但它说密钥不存在于数组中。

图片位于 imageshack.us

/img33/1491/wtfjsondeserialized.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:52:08.113

我建议做一个 foreach 来查看数组中存在哪些键。例子：

```
For Each entry As String In FBrequest.data(0)(3)
        Console.WriteLine(entry) 
```

假设“来自”是缺少的关键。此外，我还建议在此行设置断点并添加 watch 语句。检查您的`FBRequest.data`变量以查看内容是什么。

# php - 触发器不起作用

> ID：14235553
> 
> 赞同：0
> 
> 时间：2013-01-09T12:48:05.697
> 
> 标签：php, mysql

我正在尝试在 My sql 中创建触发器，但是当我编写以下代码时，页面继续加载并且没有显示输出。我的代码是：-

```
DELIMITER$$ 
CREATE TRIGGER `tutorial`.`before_delete_books`  
    BEFORE DELETE ON `books` FOR EACH ROW  
    BEGIN  
        SELECT * FROM role;
    END $$
DELIMITER; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:02:01.313

是的，最后我为自己的问题找到了解决方案............在执行触发器之前实际上有几个标准要查看。1、你正在执行的数据表必须是引擎Innodb的。如果它不是 innodb 通过编写此查询来更改它。

```
ALTER TABLE table_name ENGINE = InnoDB; 
```

检查语法，正确的语法是

```
create trigger trigname after insert on lib_db.books
for each row
insert into role(role_id,role) values(5,'sometext');
end; 
```

确保将分隔符更改为某个符号，例如 $$。因为默认分隔符是 ;

# magento - Magento 1.7 - 带有可配置产品信息的订单项加入

> ID：14235555
> 
> 赞同：0
> 
> 时间：2013-01-09T12:48:08.507
> 
> 标签：magento, magento-1.7

我有一个显示订单项目的网格。我想显示每个项目的产品详细信息。但有些是`simple`，有些是`configurable`。

网格中的集合是`sales/order_item_collection`.

在`_prepareCollection()`我有这些连接：

```
 $collection->getSelect()->join( 
           array('orders_alias' => $resource->getTableName('sales/order'))
           , 'main_table.order_id = orders_alias.entity_id'
           , array('orders_alias.increment_id', 'order_date' => 'orders_alias.created_at')
           , null);

    $collection->getSelect()->join( 
           array('p' => $resource->getTableName('catalog/product'))
           , 'main_table.product_id = p.entity_id
           , array('product_sku' => 'p.sku')
           , null); 
```

对于具有可配置产品的订单项目，我看到一个额外的行。
例如，如果有人购买了 XXL 码的衬衫，我会看到 2 行的订单商品。

我想我只需要展示可见的产品。我该怎么做？

如果我从订单中取出并展示商品，我可以这样做：

```
 // get order items
    $items = $order->getAllVisibleItems(); 
```

但我需要从一个项目中检查它是否可见。

看着`\app\code\core\Mage\Sales\Model\Order.php`我看到：

```
 public function getAllVisibleItems()
{
    $items = array();
    foreach ($this->getItemsCollection() as $item) {
        if (!$item->isDeleted() && !$item->getParentItemId()) {
            $items[] =  $item;
        }
    }
    return $items;
} 
```

所以如果我添加这个过滤器：

```
$collection->addAttributeToFilter('parent_item_id', array('is' => new Zend_Db_Expr('null'))); 
```

它似乎显示了正确的订单项目。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:32:47.270

目前我使用这个解决方案：

```
$collection->addAttributeToFilter('parent_item_id', array('is' => new Zend_Db_Expr('null'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:48:54.320

在哪里添加这一行？

$collection->addAttributeToFilter('parent_item_id', array('is' => new Zend_Db_Expr('null')));

我看到两个项目，一个是 0，另一个是实际产品

[http://i.stack.imgur.com/fx1bd.jpg](http://i.stack.imgur.com/fx1bd.jpg)

# .net - 当 IE 安全设 置为 HIGH 时，浏览器提示添加接受的 url

> ID：14235556
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:48:08.520
> 
> 标签：.net, internet-explorer, iis-7

我有一个运行良好且跨不同浏览器的 Web 应用程序（.net Web 应用程序）。但这是当浏览器安全设置设置为中或低时。

我提出了一个问题，当我的客户运行 IE 并将隐私设置设置为 HIGH 时，浏览器会要求他们在接受的 url 列表中设置网站。

这非常令人不安。任何人都可以帮助我了解我应该对我的网站或 IIS 进行哪些更改，以便我可以绕过 IE 高安全性设置。

我也在这个问题上搜索了很多，但没有找到有用的答案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:54:55.413

任何绕过安全过滤系统的方法对我来说听起来都非常像**恶意软件**。

如果用户（或者更有可能是他们的 IT 部门）坚持将安全设置设置为**Neurotic**，那么这就是他们的决定。当他们在线访问 CNN 或 Google 时，他们会看到相同的警告。

# bash - 使用 bash 脚本到 heroku 的终端登录凭据？

> ID：14235564
> 
> 赞同：1
> 
> 时间：2013-01-09T12:48:40.003
> 
> 标签：bash, shell, command-line, heroku, terminal

我正在尝试编写一个 bash 脚本来登录并在 Heroku 上创建一些东西。现在我每次都必须提供用户名和密码。是否可以通过一些 bash-magic 或使用登录函数传递变量来自动执行此操作？

PS 我最感兴趣的是提供电子邮件地址，而不是密码。

这是它的样子：

```
 $ heroku auth:login
 Enter your Heroku credentials:
 Email: email@example.com
 Password (typing will be hidden):
 Authentication successful. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:58:30.010

我会考虑在这里使用 Heroku API 而不是 CLI。例如，如果您对使用 Ruby 感到满意，Heroku.rb 可能是一个好的开始。

[https://github.com/heroku/heroku.rb](https://github.com/heroku/heroku.rb)

通过将其编写为 Ruby 脚本，您可以将其包装在 bash 或其他任何内容中。

# c# - LINQ 问题

> ID：14235575
> 
> 赞同：0
> 
> 时间：2013-01-09T12:49:12.577
> 
> 标签：c#, linq, c#-4.0

[我创建了mod10](http://en.wikipedia.org/wiki/Luhn_algorithm)算法的 LINQ 实现。

源代码：

```
string number = "7992739871";
int mod10sum = number.Reverse()
    .Select((c, i) => (c - '0') << ((i + 1) & 1)) // Double every other digit and sum the digits of the products (e.g., 10: 1 + 0 = 1, 14: 1 + 4 = 5) 
    .Sum(c => c - '0') % 10;                      // together with the undoubled digits from the original number

string checkDigit = (mod10sum == 0 ? 0 : 10 - mod10sum).ToString("0");
Console.WriteLine(checkDigit); 
```

根据[示例](http://en.wikipedia.org/wiki/Luhn_algorithm)，`7992739871`数字应具有校验位`3`；但是，我得到的是`15`.

我做错了什么？我确信错误很小但找不到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T12:50:55.053

问题出在`Select`方法上。为了总结所有数字（如算法中所述），您需要返回`1`and`0`而不是`10`，`1`而`4`不是`14`（如您的示例中所示）。

最**简单**（**但不一定是最佳**）的方法是将数字从(14 -> "14")`Select`转换为`string`(14 -> "14")，然后使用`SelectMany`.

因此，您的代码应如下所示：

```
int mod10sum = number.Reverse()
    .SelectMany((c, i) => ((c - '0') << ((i + 1) & 1)).ToString())
    .Sum(c => c - '0') % 10;

checkDigit = (mod10sum == 0 ? 0 : 10 - mod10sum).ToString("0");
Console.WriteLine(checkDigit); 
```

**一点理论**

LINQ [SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)返回`IEnumerable<>`. 当您返回`string`（即 IEnumerable）时，这就是为什么`SelectMany`将返回的字符串“拆分”为字符的原因。

Microsoft 有非常好的页面（[101 LINQ Samples](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)），其中包含不同的 LINQ 示例，应该可以帮助您。

**编辑**

我还建议进行从`int`到的转换`string`。昨天我正在从事类似的项目，就我而言，从性能的角度来看，转换有点问题，因为我们将这种方法称为数百万次。如果您必须计算大量 mod10，那么它可能不是最佳解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:00:43.983

我会改变`Sum`.

此时，您没有字符序列，而是每个原始数字的单倍或双倍值。

因此，您不需要减去`0`，您需要计算每个整数的数字总和，并且（因为您知道它们会很小）您可以简单地执行此操作

```
.Sum(i => (i % 10) + (i / 10)) 
```

给予

```
string number = "7992739871";
int mod10sum = number.Reverse()
    .Select((c, i) => (c - '0') << ((i + 1) & 1)) 
    .Sum(i => (i % 10) + (i / 10)) % 10; 
```

这应该比调用`ToString()`和迭代结果更有效。

# jpa - 如何执行级联 JPA/toplink 批量更新

> ID：14235577
> 
> 赞同：0
> 
> 时间：2013-01-09T12:49:14.107
> 
> 标签：jpa, weblogic, jpql, toplink

**背景**

我对需要实施的 JPA 级联批处理更新有疑问。更新将获取大约 10000 个对象，并立即将它们合并到数据库中。对象的平均深度为 5 个对象，平均大小约为 3 kb 持久性提供程序是 Oracle Toplink

这会占用大量内存并需要几分钟才能完成。

**我环顾四周，发现了 3 种可能性：**

循环通过标准 JPA 合并语句并以特定间隔刷新

使用 JPQL

使用 Toplink 自己的 API（我没有任何经验）

**所以我有几个问题**

我会通过使用 JPQL 来减少标准合并的开销吗？如果我理解正确，合并会导致整个对象树在被调用之前被克隆。它实际上更快吗？有什么技巧可以加快这个过程吗？

如何使用 Toplink API 进行批量合并？

我知道这是主观的，但是：有没有人有在 JPA/Toplink 中进行大型级联批量更新的最佳实践？也许我没有考虑到什么？

**相关问题**

[JPA 中的批量更新（Toplink）](https://stackoverflow.com/questions/7365325/batch-updates-in-jpa-toplink)

[使用 JPA/Toplink 进行批量插入](https://stackoverflow.com/questions/64781/batch-insert-using-jpa-toplink)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:35:00.670

不确定使用 JPQL 是什么意思？如果您可以用 JPQL 更新语句来表达您的更新逻辑，那么这样做会更有效率。

绝对将您的工作分成几批。还要确保您使用的是批量写入和序列预分配。

看，

[http://java-persistence-performance.blogspot.com/2011/06/how-to-improve-jpa-performance-by-1825.html](http://java-persistence-performance.blogspot.com/2011/06/how-to-improve-jpa-performance-by-1825.html)

# php - 仅针对特定用户的 Joomla 聊天

> ID：14235579
> 
> 赞同：0
> 
> 时间：2013-01-09T12:49:16.840
> 
> 标签：php, joomla

我想要一个 joomla 聊天组件/模块，只有当该用户在线时，访问者才能与该用户聊天。我发现了许多聊天扩展程序，但它们不适用于特定用户。我只找到聊天室。

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:42:36.767

这可以通过“BoWoB Chat”插件来完成：[http ://extensions.joomla.org/extensions/communication/chat-hosted/12803](http://extensions.joomla.org/extensions/communication/chat-hosted/12803)

使用“仅限朋友聊天”功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:53:13.857

There used to be a free extension for this which I tested about a year ago. It was average with a few bugs but they developers have constantly updated it since then and it's now commercial:

[http://extensions.joomla.org/extensions/communication/chat/19758](http://extensions.joomla.org/extensions/communication/chat/19758)

You may also want to take a look at the following:

[http://extensions.joomla.org/extensions/communication/chat/17600](http://extensions.joomla.org/extensions/communication/chat/17600)

Both are based on the Facebook Chat style, however both are also commercial. If you're looking for a non-commercial solution, then [FreiChat](http://extensions.joomla.org/extensions/communication/chat/13106) may suit your needs. I have never tested it but the ratings and reviews are good.

# css - 具有可变高度的表格单元格内的绝对定位元素

> ID：14235580
> 
> 赞同：3
> 
> 时间：2013-01-09T12:49:17.387
> 
> 标签：css, html-table, css-position

关于 TD 内部的绝对定位，stackexchange 上有很多问题，但我没有找到针对我的具体问题的解决方案：

我需要实现以下布局 ![TD内部的元素布局](../Images/2d50ec04052967a8f064357cfe90d285.png)

此单元格是表格中表格数据表示的一部分。

单元格的内容是文本数据。

文本可以是多行的，并且必须垂直和水平居中对齐。**单元格的高度可能会有所不同**，因为表格行高可能会被其他单元格的内容拉伸，但单元格文本应始终保持垂直对齐（目前通过 实现`vertical-align: middle`）

绝对定位元素应始终位于单元格的右上角。

我知道将相对 div 放置在 TD 中，然后将绝对定位元素放置在 div 中的技术，但由于单元格高度可变和垂直对齐单元格文本的要求，这似乎不是一个选项。

解决方案需要兼容 IE8+、Chrome 21+ 和 FF 15+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:36:27.333

在关闭按钮周围插入一个 div：

```
<table>
    <tr>
       <td>
          <div class="wrapper">
              <div class="close">X</div>
          </div>
          My vertically aligned text.
       </td>
    </tr>
</table> 
```

然后定位您的关闭按钮：

```
table td div.wrapper {
    position: relative;
}

table td div.close {
    position: absolute;
    right: 0;
    top: 0;
} 
```

# ios - 如何区分通知的两个调用者？

> ID：14235581
> 
> 赞同：0
> 
> 时间：2013-01-09T12:49:18.587
> 
> 标签：ios, uitextfield, uitextview

我在这里描述了同样的问题[How to add text field to inputAccessoryView and make the textView first responder](https://stackoverflow.com/questions/7334563/how-to-add-text-field-to-inputaccessoryview-and-make-the-textview-first-responde)和 Tom 发布的解决方案运行良好。现在我的新问题是 UITextField 和 UITextView 使用相同的 inputAccessoryView 并且还没有找到区分哪个是调用者的方法。

这是一个小代码：

```
@property (unsafe_unretained, nonatomic) IBOutlet UITextField *titleField;
@property (unsafe_unretained, nonatomic) IBOutlet UITextView *reviewField; 
```

在 viewDidLoad 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.titleField.inputAccessoryView = self.accessorView;
    self.reviewField.inputAccessoryView = self.accessorView;
    self.accessorView.delegate = self;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(changeFirstResponder:)
                                                 name:UIKeyboardDidShowNotification
                                               object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(fillAccessorView:)
                                                 name:UIKeyboardWillShowNotification
                                               object:nil];
} 
```

和两个处理程序

```
- (void) fillAccessorView:(NSNotification *) notification
{
    self.accessorView.titleLabel.text = @"MY Title";
}

- (void) changeFirstResponder:(NSNotification *) notification
{
    [self.accessorView.textInputField becomeFirstResponder];

} 
```

我已经尝试过这样

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(changeFirstResponder:)
                                             name:UIKeyboardDidShowNotification
                                           object:self.titleField];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(fillAccessorView:)
                                             name:UIKeyboardWillShowNotification
                                           object:self.titleField];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(changeFirstResponder:)
                                             name:UIKeyboardDidShowNotification
                                           object:self.reviewField];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(fillAccessorView:)
                                             name:UIKeyboardWillShowNotification
                                           object:self.reviewField]; 
```

这样处理程序从未调用过：/

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:50:46.897

不幸的是，这些通知有一个 nil 对象参数，所以这就是为什么您尝试使用对象参数没有奏效的原因。除了使用这些通知之外，您还可以使用文本字段和文本视图委托方法（textFieldShouldBeginEditing 或 textFieldDidBeginEditing，以及它们的文本视图等效项）。这两个委托方法都在收到键盘通知之前调用。请记住让您的班级成为文本字段和文本视图的代表。

# model-view-controller - 从控制器中选择 Kendo ui 网格行

> ID：14235585
> 
> 赞同：0
> 
> 时间：2013-01-09T12:49:27.340
> 
> 标签：model-view-controller, kendo-ui, radio-button, kendo-grid

我的第一个问题是：我在单选模式下使用剑道网格，我需要在第一次加载视图时选择第一行，换句话说，我想以编程方式选择第一个剑道网格行。此外，其他问题是我在该网格中插入单选按钮列，并且我想将单选按钮选择与行选择同步，换句话说，我希望当用户选择行时，它会导致它的单选按钮被选中请帮助我 tnx 这是代码：

```
 @(Html.Kendo().Grid<CommonData.Domain.LegalEntityPhone>()
.Name("SMSGrid")
.HtmlAttributes(new { style = "width:800px;" })
.Selectable(selectable =>
             selectable.Mode(GridSelectionMode.Single).Type(GridSelectionType.Row))

.Columns(columns =>
    {
       columns.Bound(c => c.Id)
    .Title(" ")
    .ClientTemplate(" <input type='radio' id='Approve' name='chkApprove' />");

       columns.Bound(c => c.Number)
    .Title("Destination")
    .HeaderHtmlAttributes(new { style = "text-align: center;" })
    .HtmlAttributes(new { style = "text-align: center; });

       columns.Bound(c => c.CityCode)
    .Title("City Code")
    .Width(30)
    .HeaderHtmlAttributes(new { style = "text-align: center" })
    .HtmlAttributes(new { style = "text-align:center;width:30px" });

        columns.Command(command => { command.Edit(); }).Width(150);
        })

.Editable(editable => editable.Mode(GridEditMode.InLine))
    .Events(events => events.Change("OnChange"))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model =>
        {
                       model.Id(p => p.Id);
                       model.Field(p => p.Id).Editable(false);
        })
    .Read(read => read.Action("LegalEntityPhoneInfo_Read", "Message"))
    .Update(update => update.Action("LegalEntityPhoneInfo_Update", "Message"))
                    )
                ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:19:17.133

没有在控制器中选择行这样的事情，因为 Grid 都是在客户端上创建的。您可以使用**[dataBound](http://docs.kendoui.com/api/web/grid#databound)**事件来选择第一行。

例如

```
$(function(){
     $('#GridName').data().kendoGrid.bind('dataBound',function(e){
          this.select(this.tbody.find('>tr:first'));
     }) 
}) 
```

或者使用**one**而不是**bind**仅在页面加载时选择行，而不是每次重新加载 Grid - 排序、过滤等。查看[文档](http://docs.kendoui.com/api/framework/widget#one)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:12:59.150

如果您不熟悉 jQuery，我强烈建议您从 [http://jqueryair.com/](http://jqueryair.com/)获取在线免费教程。假设您的项目在您的 _Layout 页面中引用 jQuery 脚本，您所要做的就是将 Databound 的事件处理程序添加到网格中：

```
.Events(events => events.DataBound("Grid_Databound")) 
```

然后只需将此脚本粘贴到页面上：

```
<script> 

function Grid_Databound() {

var grid = $("#MyGridName").data("kendoGrid");
row = grid.tbody.find(">tr:not(.k-grouping-row)").eq(0);
grid.select(row);
        }
</script> 
```

我确信 zeinad 添加的相同脚本也会起作用，而且总是不止一种给猫剥皮的方法。至于如果选择了行则显示单选按钮，我想如果你看过我提到的教程，你应该能够弄清楚。如果您需要更多帮助，请回复。

# c# - C# 自定义控件属性：无法设置 DefaultValue 字段

> ID：14235590
> 
> 赞同：4
> 
> 时间：2013-01-09T12:49:55.197
> 
> 标签：c#, default-value, custom-properties

我正在尝试设置自定义 C# 控件属性。

这是我的代码：

```
/* Cancel's button text */
[Category("ComboTouch"),
Description("Text to display in cancel button"),
DefaultValue("Cancel")]
public String ct_cancelButtonText { get; set; } 
```

当我在其他项目中使用自定义控件时，我可以获得该属性（如图所示）；但配置参数`DefaultValue`似乎不起作用。

有人可以帮助我吗？非常感谢你。

![自定义控件属性](../Images/9f63eb96602efa91f04baf655f23c29c.png)

**2013 年 1 月 10 日**更新。非常感谢您的回答，您解决了我的问题。

我想分享一下我最终如何自动设置默认值：

```
 private String m_cancelButtonText="Cancel";

    /* Cancel's button text */
    [Category("ComboTouch"),
    Description("Text to display in cancel button"),
    DefaultValue("Cancel")]
    public String ct_cancelButtonText
    {
        get
        {
            return m_cancelButtonText;
        }
        set
        {
            m_cancelButtonText = value;
        }
    } 
```

一个好奇心：请检查“取消”文本的格式。如果我设置 DefaultValue 类型；它看起来像普通文本。但如果我不这样做，它看起来像**粗体文本**。我知道这很愚蠢；但我想知道为什么会这样。谢谢你。

![在此处输入图像描述](../Images/2f24d4379f330f9e5858d86adb86e0e6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:52:53.610

如[文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute.aspx)中所述：

> DefaultValueAttribute 不会导致成员使用属性值自动初始化。您必须在代码中设置初始值。

# python - Python 列表理解的性能：在“if”部分重建 lambda？

> ID：14235594
> 
> 赞同：4
> 
> 时间：2013-01-09T12:50:03.387
> 
> 标签：python, performance, list-comprehension

在比较 Python 中的各种等效形式时`filter(xs, lambda x: x != el)`，我偶然发现了一些令我惊讶的东西。考虑以下形式：

```
def method1(xs, el):
    p = lambda x: x != el
    return [x for x in xs if p(x)]

def method2(xs, el):
    return [x for x in xs if (lambda y: y != el)(x)] 
```

我希望 Python 只构建一次 lambda，然后将其存储在一个临时变量中，这样两种形式的性能都差不多。`method1`由于名称查找，甚至可能表现更差。

但是当我对它们进行基准测试时，结果发现它们的`method2`表现始终比`method1`. 为什么是这样？是否为每次迭代重建 lambda？

* * *

我的基准脚本（在一个单独的模块中，并期望`methods`包含`method1`and `method2`）如下：

```
import math, timeit

def bench(n,rho,z):
    pre = """\
import random
from methods import %(method)s

x = [(random.randint(0,%(domain)i)) for r in xrange(%(size)i)]
el = x[0]\
"""

    def testMethod(m):
        mod = pre % { 'method': m, 'domain': int(math.ceil(n / rho)), 'size': n }
        return timeit.timeit("%s(x, el)" % m, mod, number = z)/(z * n)

    print "Testing", n, rho, z
    return tuple(testMethod(m) for m in ("method1", "method2"))

n = 31

min_size, max_size = 10.0**1, 10.0**4
size_base = math.pow(max_size / min_size, 1.0/(n-1))
# size_default = 10**3

#min_sel, max_sel = 0.001, 1.0
#sel_base = math.pow(max_sel / min_sel, 1.0/(n-1))
sel_default = 0.001

tests = [bench(int(min_size*size_base**x), sel_default, 100) for x in xrange(n)]
#tests = [bench(size_default, min_sel*sel_base**x, 100) for x in xrange(n)]

def median(x):
    x = list(sorted(x))
    mi = int(len(x)/2)
    if n % 2 == 0:
        return x[mi]
    else:
        return (x[mi] + x[mi+1])/2

def madAndMedian(x):
    meh = median(x)
    return meh, median([abs(xx - meh) for xx in x])

for z in zip(*tests):
    print madAndMedian(z) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:52:35.737

是的，它在每个循环上重建 lambda；它需要重新评估整个表达式。

要看到这一点，请使用[`dis`模块](http://docs.python.org/2/library/dis.html)：

```
>>> dis.dis(method1)
  2           0 LOAD_CLOSURE             0 (el)
              3 BUILD_TUPLE              1
              6 LOAD_CONST               1 (<code object <lambda> at 0x102000230, file "<stdin>", line 2>)
              9 MAKE_CLOSURE             0
             12 STORE_FAST               2 (p)

  3          15 BUILD_LIST               0
             18 LOAD_FAST                0 (xs)
             21 GET_ITER            
        >>   22 FOR_ITER                24 (to 49)
             25 STORE_FAST               3 (x)
             28 LOAD_FAST                2 (p)
             31 LOAD_FAST                3 (x)
             34 CALL_FUNCTION            1
             37 POP_JUMP_IF_FALSE       22
             40 LOAD_FAST                3 (x)
             43 LIST_APPEND              2
             46 JUMP_ABSOLUTE           22
        >>   49 RETURN_VALUE        
>>> dis.dis(method2)
  2           0 BUILD_LIST               0
              3 LOAD_FAST                0 (xs)
              6 GET_ITER            
        >>    7 FOR_ITER                33 (to 43)
             10 STORE_FAST               2 (x)
             13 LOAD_CLOSURE             0 (el)
             16 BUILD_TUPLE              1
             19 LOAD_CONST               1 (<code object <lambda> at 0x101fd37b0, file "<stdin>", line 2>)
             22 MAKE_CLOSURE             0
             25 LOAD_FAST                2 (x)
             28 CALL_FUNCTION            1
             31 POP_JUMP_IF_FALSE        7
             34 LOAD_FAST                2 (x)
             37 LIST_APPEND              2
             40 JUMP_ABSOLUTE            7
        >>   43 RETURN_VALUE 
```

操作码加载 lambda 主体的`LOAD_CONST`编译代码；`MAKE_CLOSURE`从中创建 lambda。For `method1`this 发生一次，而 for `method2`this 在循环的每次迭代中重复（从`FOR_ITER`操作码到`JUMP_ABSOLUTE`操作码）；请注意`LOAD_FAST`变量的操作码，`p`其中`method1`它指的是局部变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:57:05.103

Python 只构建 lambda 的*代码*一次。但它会在循环的每一次传递中构建一个新的*函数*对象（指代代码和包含`el`变量的封闭环境）。这通常是一个特性，因为每个函数对象都可以通过`__setitem__`.

在这种情况下，函数对象不会存储在任何地方，也不会泄漏到范围之外，因此将其创建移到循环之外是安全的，但是 Python 的编译器还不够聪明，无法执行这样的优化。

# javascript - AJAX：提交表单而不刷新页面

> ID：14235596
> 
> 赞同：7
> 
> 时间：2013-01-09T12:50:16.717
> 
> 标签：javascript, jquery, ajax

我有一个类似于以下的表格：

```
<form method="post" action="mail.php" id="myForm">
   <input type="text" name="fname">
   <input type="text" name="lname">
   <input type="text" name="email">
    <input type="submit">
</form> 
```

我是 AJAX 新手，我想要完成的是当用户单击提交按钮时，我希望`mail.php`脚本在不刷新页面的情况下在幕后运行。

我尝试了类似下面的代码，但是，它似乎仍然像以前一样提交表单，而不是像我需要的那样（在幕后）：

```
$.post('mail.php', $('#myForm').serialize()); 
```

如果可能的话，我想获得使用 AJAX 实现此功能的帮助，

提前谢谢了

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T12:53:42.243

您需要阻止默认操作（实际提交）。

```
$(function() {
    $('form#myForm').on('submit', function(e) {
        $.post('mail.php', $(this).serialize(), function (data) {
            // This is executed when the call to mail.php was succesful.
            // 'data' contains the response from the request
        }).error(function() {
            // This is executed when the call to mail.php failed.
        });
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T12:52:45.370

您还没有提供完整的代码，但听起来问题是因为您正在执行`$.post()`表单的提交，但没有停止默认行为。试试这个：

```
$('#myForm').submit(function(e) {
    e.preventDefault();
    $.post('mail.php', $('#myForm').serialize());
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T13:12:42.680

```
/**
 * it's better to always use the .on(event, context, callback) instead of the .submit(callback) or .click(callback)
 * for explanation why, try googling event delegation.
 */

//$("#myForm").on('submit', callback) catches the submit event of the #myForm element and triggers the callbackfunction
$("#myForm").on('submit', function(event, optionalData){
    /*
     * do ajax logic  -> $.post is a shortcut for the basic $.ajax function which would automatically set the method used to being post
     * $.get(), $.load(), $.post() are all variations of the basic $.ajax function with parameters predefined like 'method' used in the ajax call (get or post)
     * i mostly use the $.ajax function so i'm not to sure extending the $.post example with an addition .error() (as Kristof Claes mentions) function is allowed
     */
    //example using post method
    $.post('mail.php', $("#myForm").serialize(), function(response){
        alert("hey, my ajax call has been complete using the post function and i got the following response:" + response);
    })
    //example using ajax method
    $.ajax({
        url:'mail.php',
        type:'POST',
        data: $("#myForm").serialize(),
        dataType: 'json', //expects response to be json format, if it wouldn't be, error function will get triggered
        success: function(response){
            alert("hey, my ajax call has been complete using the ajax function and i got the following response in json format:" + response);
        },
        error: function(response){
            //as far as i know, this function will only get triggered if there are some request errors (f.e: 404) or if the response is not in the expected format provided by the dataType parameter
            alert("something went wrong");
        }
    })
    //preventing the default behavior when the form is submit by
    return false;
    //or
    event.preventDefault();
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T13:00:30.510

试试这个：

```
$(function () {
    $('form').submit(function () {
        if ($(this).valid()) {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {
                    $('#result').html(result);
                }
            });
        }
        return false;
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-29T08:49:01.187

执行此操作的现代方法（也不需要 jquery）是使用[fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)。较旧的浏览器[将不支持它](http://caniuse.com/#search=fetch)，但如果这是一个问题，则有一个[polyfill](https://www.npmjs.com/package/whatwg-fetch)。例如：

```
var form = document.getElementById('myForm');
var params = {
  method: 'post',
  body: new FormData(form),
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
  }
};

form.addEventListener('submit', function (e) {
  window.fetch('mail.php', params).then(function (response) {
    console.log(response.text());
  });
  e.preventDefault();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T12:53:14.823

试试这个..

```
<form method="post" action="mail.php" id="myForm" onsubmit="return false;"> 
```

**或者**

添加

`e.preventDefault();`在你的`click`功能中

```
 $(#yourselector).click(function(e){
      $.post('mail.php', $(this).serialize());
      e.preventDefault();
 }) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-29T08:45:51.913

如果您将输入类型用作 submit ，则需要防止默认操作`<input type="submit" name="submit" value="Submit">`。

通过将`$("form").submit(...)`您附加提交处理程序，这将提交表单（这是默认操作）。

如果不想要这个默认操作使用`preventDefault()`方法。

如果您使用的不是提交，则无需阻止默认值。

```
 $("form").submit(function(e) {
    e.preventDefault();
    $.ajax({
      type: 'POST',
      url: 'save.asmx/saveData',
      dataType: 'json',
      contentType:"application/json;charset=utf-8",
      data: $('form').serialize(),
      async:false,
      success: function() {
        alert("success");
      }
      error: function(request,error) {
        console.log("error");
      } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-09T12:57:10.033

查看[JQuery Post](http://api.jquery.com/jQuery.post/)文档。它应该可以帮助你。

# php - PHP测试图像是否交错

> ID：14235600
> 
> 赞同：3
> 
> 时间：2013-01-09T12:50:37.417
> 
> 标签：php, image, png

我有一个包含数百个 PNG 文件的文件夹，我想编写一个脚本让它们全部交错。现在，随着时间的推移，图像将被添加到该文件夹​​中，并且处理文件夹中的所有图像（无论是隔行扫描还是逐行扫描）似乎有点愚蠢。

所以我想知道，有没有办法使用 PHP 来检测图像是否是交错的，我可以选择是否处理它。

多谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T15:00:01.137

您还可以采用低级方法 - 无需加载完整图像，或使用额外的工具或库。如果我们查看[规范](http://www.w3.org/TR/PNG-Chunks.html)，我们会看到“隔行扫描”标志只是 iHDR 块的第 13 个字节，所以我们必须[从签名中跳过 8 个字节](http://www.w3.org/TR/PNG/#5PNG-file-signature)，加上 iHDR 块标识符+长度的 8 个字节，再加上 12 个字节块的...这给出了要跳过的 28 个字节，如果下一个字节为 0，则图像不是隔行扫描的。

该实现只需要 4 行代码：

```
function isInterlaced( $filename ) {
   $handle = fopen($filename, "r");
   $contents = fread($handle, 32);
   fclose($handle);
   return( ord($contents[28]) != 0 );
} 
```

顺便说一句，您确定要使用隔行扫描 PNG 吗？（参见[例如](https://stackoverflow.com/questions/13449314/when-to-interlace-an-image/13456044#13456044)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:29:49.053

我认为 ImageMagick 可以解决您的问题。

[http://php.net/manual/en/imagick.identifyimage.php](http://php.net/manual/en/imagick.identifyimage.php)

不知道是否返回了所有属性，但是如果您查看 ImageMagick 工具文档，您会发现它们可以发现图像是否是隔行扫描的。

[http://www.imagemagick.org/script/identify.php](http://www.imagemagick.org/script/identify.php)

如果没有安装 ImageMagick 扩展，您可以通过 PHP 运行 ImageMagick 命令并解析“Interlace”参数的输出。

# sencha-touch - 为什么我的列表没有显示在 ST2 的浮动容器中

> ID：14235602
> 
> 赞同：0
> 
> 时间：2013-01-09T12:50:39.777
> 
> 标签：sencha-touch, sencha-touch-2

我正在编写一些测试代码，并希望在浮动容器中显示一个列表。测试代码不起作用。任何人都可以看看我是否缺少任何东西：

```
var p = Ext.create('Ext.form.Panel', {
    xtype: 'panel',
    scrollable: true,
    centered: true,
    width: 300,
    height: 300,
    items: [
    {
        xtype:"container",
        layout: {
           type: 'vbox'
        },
        items: [            
            {
                xtype: "list",
                itemTpl: '{title},{author}',
                flex: 1,
                store: {
                    autoLoad: true,
                    fields : ['title', 'author'],
                    proxy: {
                        type: 'jsonp',
                        url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://feeds.feedburner.com/SenchaBlog',
                        reader: {
                            type: 'json',
                            rootProperty: 'responseData.feed.entries'
                        }
                    }
                }
            }
        ]
    }   
    ]
});
Ext.Viewport.add(p); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:59:52.327

这仅仅是因为您试图在 FormPanel 中放置一个列表。尝试使用容器，此外，如果您只需要在其中放置一个列表，请不要使用“vbox”布局，而是使用合适的布局。

```
var p = Ext.create('Ext.Container', {
    centered: true,
    width: 300,
    height: 300,
    layout: 'fit',
    items: [            
        {
            xtype: "list",
            ... 
```

# visual-studio-2012 - 缺少：将解决方案添加到源代码管理

> ID：14235603
> 
> 赞同：16
> 
> 时间：2013-01-09T12:50:49.980
> 
> 标签：visual-studio-2012

我已成功安装并连接到我的 Team Foundation 2012 服务器。但是我无法将我的解决方案添加到它，当我右键单击解决方案时我错过了它，见下图。

![缺少将解决方案添加到源代码管理](../Images/b4fdbb5452b7024a4a5ecf292f80d729.png)

如果我尝试创建一个新的解决方案，我可以将它添加到我的源代码管理中。

很久以前，我在 Team Foundation server 2010 上拥有代码，但是当试用期结束时，我不得不停止使用该源代码控制。不确定这是否与此有关。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-05-29T13:12:32.933

当项目已经具有先前的绑定时会发生这种情况。做就是了：

**文件->源代码管理->高级->更改源代码管理**

您应该会看到带有无效绑定的项目。

**取消绑定**项目，现在您将再次看到“将项目添加到源代码管理”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:12:24.830

文件 -> 源代码管理 -> 高级 -> 工作区...

在那里我必须编辑我的工作区并定义一个本地本地文件夹和一个源控制文件夹。

右键单击解决方案并单击联机，然后我能够将解决方案添加到源代码控制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-13T13:07:58.030

我有同样的问题。

在 TFS 服务器中创建一个项目并使用 Visual Studio 中的 Team Explorer 连接到它后，我按照以下步骤操作：

1.  我关闭了 VS 并在记事本中打开了 .sln 文件并删除了下面的部分。

    GlobalSection(SubversionScc) = preSolution Svn-Managed = True Manager = AnkhSVN - Visual Studio EndGlobalSection 的 Subversion 支持

2.  我在VS中打开了.sln文件，在工具->选项->源代码管理页面中选择了“Visual Studio Team Foundation Server”。当我右键单击解决方案文件“添加到源代码管理”时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-12T16:40:16.860

*   我的`File menu -> Add to source control`选项在 VS 2013 中丢失了。打开`Team explorer`选项卡后（选项卡旁边`solution explorer`），它又出现了。

*   还要确保您选择了正确的插件：`Tools -> Options -> Source control -> plugin-selection -> select Git`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-15T05:48:40.603

我遇到了同样的问题。

我发现我的解决方案中有两个项目，一个在源代码控制之下，另一个不在。对我有用的是撤消已经在源代码控制下的项目。在我撤消所有更改后，当我右键单击解决方案时，我终于找到了“源代码管理”选项。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-06-19T09:42:24.193

如果您的 Datatable 标头响应问题，请使用它

```
$('a[data-toggle="tab"]').on('shown.bs.tab', function(e){
    $($.fn.dataTable.tables(true)).DataTable()
       .columns.adjust()
       .responsive.recalc();
 }); 
```

# javascript - jQuery UI 不能从 JSON 自动完成

> ID：14235613
> 
> 赞同：0
> 
> 时间：2013-01-09T12:51:17.343
> 
> 标签：javascript, jquery, json, jquery-ui-autocomplete

当我查看 Chrome 开发人员工具的响应时，我看到：

```
[{
"summary": "foo",
"key": "myKey"
}] 
```

我的javascript（更新）：

```
jquery183(function() { 
jquery183( "#city" ).autocomplete({
    source: function( request, response ) {
        jquery183.ajax({
            url: '/servlet/ajax/',
            dataType: "jsonp",
            data: {
                featureClass: "P",
                style: "full",
                maxRows: 12,
                name_startsWith: request.term
            },
            success: function( data ) {
                response( jquery183.map( data, function( issue ) {
                    return {
                        label: issue.summary + ", " + issue.key,
                        value: issue.summary
                    }
                }));
            }
        });
    },
    minLength: 2,
    open: function() {
        jquery183( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
        jquery183( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
}); 
```

});

HTML：

```
 <div class="ui-widget">
    <label for="city">Your city: </label>
    <input id="city" />
    Powered by <a href="http://geonames.org">geonames.org</a>
 </div> 
```

我认为这应该可行，但它不建议任何自动完成项目。有什么建议么？

如果需要更多代码，请随时询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:02:13.690

如上所示：http: [//jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)

您忘记复制/粘贴 ajax 调用来检索您的数据。

```
$( "#city" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
          url: "http://ws.geonames.org/searchJSON",
          dataType: "jsonp",
          success: function( data ) {
            response( $.map( data.geonames, function( item ) {
              return {
                label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                value: item.name
              }
            }));
          }
        });
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:57:15.140

我不确定，但`<input id="city" />`. 应该是`<input id="city" type="text"/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:23:04.033

从这里找到答案：

[Ajax 成功事件不起作用](https://stackoverflow.com/questions/1969476/ajax-success-event-not-working)

> 结果可能不是 JSON 格式，所以当 jQuery 尝试解析它时，它会失败。您可以使用 error: 回调函数来捕获错误。
> 
> 无论如何，您似乎不需要在该函数中使用 JSON，因此您也可以取出 dataType: 'json' 行。

# javascript - 从 document.ready ie8 设置 iFrame 高度

> ID：14235615
> 
> 赞同：1
> 
> 时间：2013-01-09T12:51:25.897
> 
> 标签：javascript, jquery, html, css, iframe

在 jQueryUI 对话框中，我有一个 iFrame，它为我提供了文件上传功能。这个上传 iframe 应该是对话框高度的 50%（使用`$(window).height()`）。

在`$(document).ready(function(){ ... });`对话框文件中，我正在设置 iFrame 的高度。然后在 iframe 中使用相同的结构来设置其中 div 的高度，以正确覆盖对话框的 50% 高度（iframe 的 100% 高度）。在 iframe 中，我使用 $(window).height() 来设置高度。

这适用于所有浏览器，包括 IE9，但不适用于 IE8。

问题似乎是在加载对话框时呈现 iframe 内容。iframe 获得的高度是实际 iframe 内容所需的高度，在我的例子中是 150px。

我已经尝试了很多事情来完成我想要的：

1.  将代码放在对话框中的 $(document).ready() 之外
2.  将调整 iframe 大小的代码放在对话框源的末尾
3.  在 iframe 中使用 $(parent.document).ready()
4.  几个非 jQuery 表示法/语法试图影响高度。

不幸的是，他们都没有成功。关于如何告诉 IE8 父/对话框窗口 50% 的高度有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:11:38.310

不确定这是否符合您的需求，但应该可以：

**HTML**

```
<iframe id="myiframe" onload="parent.resizeIframe(this.id)" src="..." frameborder="0" allowtransparency="true"></iframe> 
```

**js**

```
function resizeIframe(iframeId)
{               
    $('#'+iframeId)
        .width(parseInt($(window).width(),10))
        .height(parseInt($(window).height()/2,10));
} 
```

# python - Python- help('modules') 意外行为

> ID：14235617
> 
> 赞同：1
> 
> 时间：2013-01-09T12:51:32.973
> 
> 标签：python, pyside

我一直在使用 PySide 玩 QT 和 python。我刚刚完成了其中一个基本[教程](http://qt-project.org/wiki/PySideTutorials_Clickable_button)。我已经关闭了 python 并重新启动了另一个会话，现在每当我尝试使用`help('modules')`按钮教程列出模块时都会运行。如果我关闭窗口 python 崩溃。错误消息的顶部是

```
Process:         Python [2005]
Path:            /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
Identifier:      org.python.python
Version:         2.7.3 (2.7.3)
Code Type:       X86-64 (Native)
Parent Process:  bash [1967]

Date/Time:       2013-01-09 12:38:53.307 +0000
OS Version:      Mac OS X 10.6.8 (10K549)
Report Version:  6

Interval Since Last Report:          486115 sec
Crashes Since Last Report:           12
Per-App Interval Since Last Report:  23989 sec
Per-App Crashes Since Last Report:   7
Anonymous UUID:                      93C97407-5F4D-4A25-83BC-C0116B028ECE

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Application Specific Information:
abort() called
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:    '-[QNSApplication _setup:]: unrecognized selector sent to instance 0x116b2fe00'
*** Call stack at first throw: 
```

我最近的操作是安装“PIP”并下载一些软件包。有谁知道是什么原因造成的或如何解决？

**编辑 1**

我注意到更改目录意味着 PySide 教程不会运行。它现在像以前一样打印出可用的模块，但它也从任何目录加载一个 TK 窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:10:16.923

在我开始遇到这个问题之前，我已经安装了 PyOpenGL。卸载后问题也消失了

# ios - Clang LLVM 1.0 错误

> ID：14235622
> 
> 赞同：0
> 
> 时间：2013-01-09T12:52:05.577
> 
> 标签：ios, objective-c, macos, clang

试图添加一个新类别，现在我收到此错误

```
ProcessPCH /Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/PrecompiledHeaders/tutorial-Prefix-azwowysritanixcinyybieddtusa/tutorial-Prefix.pch.pth tutorial/tutorial-Prefix.pch normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/Home/Developer/tutorial
setenv LANG en_US.US-ASCII
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch x86_64 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wshorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.8 -g -Wno-sign-conversion "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -iquote /Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/tutorial.build/Debug/tutorial.build/tutorial-generated-files.hmap -I/Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/tutorial.build/Debug/tutorial.build/tutorial-own-target-headers.hmap -I/Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/tutorial.build/Debug/tutorial.build/tutorial-all-target-headers.hmap -iquote /Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/tutorial.build/Debug/tutorial.build/tutorial-project-headers.hmap -I/Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Products/Debug/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/tutorial.build/Debug/tutorial.build/DerivedSources/x86_64 -I/Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/tutorial.build/Debug/tutorial.build/DerivedSources -F/Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Products/Debug --serialize-diagnostics /Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/PrecompiledHeaders/tutorial-Prefix-azwowysritanixcinyybieddtusa/tutorial-Prefix.pch.dia -c /Users/Home/Developer/tutorial/tutorial/tutorial-Prefix.pch -o /Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/PrecompiledHeaders/tutorial-Prefix-azwowysritanixcinyybieddtusa/tutorial-Prefix.pch.pth -MMD -MT dependencies -MF /Users/Home/Library/Developer/Xcode/DerivedData/tutorial-dmhshuqgvfykctbdzxopvinwcvpd/Build/Intermediates/PrecompiledHeaders/tutorial-Prefix-azwowysritanixcinyybieddtusa/tutorial-Prefix.pch.d

clang: error: no such file or directory: '/Users/Home/Developer/tutorial/tutorial/tutorial-Prefix.pch'
clang: error: no input files
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:06:19.460

您的目标似乎是空的，并且您已经错误地删除了前缀文件。

选择您的项目目标（左侧组层次结构顶部的天蓝色图标），选择“目标”下的目标（等于项目名称），然后选择构建阶段标签并将文件添加到编译源。

至于前缀文件，您可能需要重新创建它，它的名称为“YourProjectName-Prefix.pch”。这是我的前缀文件的内容：

```
#ifdef __OBJC__
    #import <Cocoa/Cocoa.h>
#endif 
```

尝试一下，并考虑如果出现问题并且您没有时间修复它，您可能总是想从头开始构建一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:12:46.457

您可以执行@Ramy 的建议，也可以简单地`Prefix Header`从目标构建设置中删除。只需删除该字段的内容，您无法删除实际字段。

![目标构建设置](../Images/c7b20461bfddabc0d5d4ddbbd05691c7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T17:44:41.927

我收到此错误是因为我不小心给了源文件 -m 标志而不是 -w 标志。这是胖手指。

# jquery - Jquery 数据表：如何仅搜索 html 选择字段中的选定选项

> ID：14235626
> 
> 赞同：1
> 
> 时间：2013-01-09T12:52:15.290
> 
> 标签：jquery, datatables

`multi select field`我在 jquery 数据表（[http://datatables.net](http://datatables.net) ）的一列中有一个 html ，我想搜索（从其默认搜索框）只在选择字段中选择选项而不是未选择的选项。它目前正在搜索选择字段内的所有文本。

我需要的是从搜索中删除未选择的选项。

谁能建议怎么做？
谢谢。

**编辑：**我已经创建了自定义`sType`并`$.fn.dataTableExt.ofnSearch`为它定义了。如“基于类型的列过滤”中的（ [http://datatables.net/development/filtering](http://datatables.net/development/filtering) ）所指定。代码如下： -

```
$.fn.dataTableExt.aTypes.push(
    function ( sData )
    {
        var ishtml=sData.match(/<select(?:.)*?>.*<\/select>/gm);

        if (ishtml)
        {
            return 'comments';
        }
        return null;
    }
);

$.fn.dataTableExt.ofnSearch['comments'] = function ( sData ) {
   return sData.replace(/<select(?:.)*?>.*<\/select>/gm, "");
} 
```

并添加`stype`到 .dataTable( { } ) 中的 columndef

```
"aoColumnDefs": [{ "sType": "comments", "aTargets": [ 8 ] }], 
```

它将从搜索中删除完整的选择元素文本（已选择和未选择）。然后我将使用 jquery 将选定的选项添加到 select 之外的隐藏 div 以让它们在搜索中可用。但这仍在考虑在搜索中选择字段文本。

有任何想法吗？请让我知道是否有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:27:25.550

您可以使用 fnFilter 来搜索复选框是否包含已选中的术语。此处描述了如何使用 fnFilter：[jQuery DataTables - Filter column by exact match](https://stackoverflow.com/questions/8609577/jquery-datatables-filter-column-by-exact-match)

> oTable.fnFilter("^"+TERM+"$", COLUMN , true); //Term, Column #, RegExp 过滤器

因此，在您的表格中，您可以过滤：

```
//all unchecked boxes
table.fnFilter('^((?!checked).)*$', COLUMN, true);    
//all checked boxes       
table.fnFilter('checked', COLUMN, true); 
```

（COLUMN 用于复选框所在的列；）），true 用于启用正则表达式搜索（必须启用搜索未选中的框，选中的选项，因为我们在这里没有使用正则表达式）。

PS：我不确定这是最好的方法，但它肯定有效

# c#-3.0 - 使用 c# 如何在 textbox.text 中存储字符串值

> ID：14235629
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:52:24.210
> 
> 标签：c#-3.0

我正在等待尽快帮助我我有文本框和两个单选框如果我选择了一个单选框并单击按钮该单选框的值应显示在文本框中我该怎么做我正在尝试使用此代码但是我无法平静

纠正这个

```
string gender;
if (radio_male.Checked)
{
    gender = "Male";  
}
if (radio_female.Checked)
{
    gender = "Female";
}
textbox.Text = gender; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:00:09.870

首先，说“纠正这个”，不是堆栈溢出的目的，也不是真正邀请我们回答你的问题。

另外，下一次，请提供更多信息（您尝试了什么？生成的错误是什么？什么不能正常工作），这样更容易回答，

但无论如何，答案。我猜你得到了错误“使用未初始化的变量”，因为你不一定要初始化`gender`，这是 C# 所必需的。

替换应该可以解决问题`string gender;`。`string gender = "";`

# java - 警告找不到记录器的附加程序（org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager）

> ID：14235633
> 
> 赞同：5
> 
> 时间：2013-01-09T12:52:42.037
> 
> 标签：java, log4j

我的**log4j 属性文件**

```
log4j.logger.devpinoyLogger=DEBUG, dest1,
log4j.appender.dest1=org.apache.log4j.RollingFileAppender
log4j.appender.dest1.maxFileSize=5000KB
log4j.appender.dest1.maxBackupIndex=3
log4j.appender.dest1.layout=org.apache.log4j.PatternLayout
log4j.appender.dest1.layout.ConversionPattern=%d{dd/MM/yyyy HH:mm:ss} %c %m%n
log4j.appender.dest1.File=C:\\Selenium\\eclipse-jee-juno-SR1-win32\\eclipse\\Workspace\\Core_Hybrid\\src\\com\\logs\\Application.log
log4j.appender.dest1.Append=false 
```

我收到如下所述的**错误消息**：

```
log4j:WARN No appenders could be found for logger (org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager).
log4j:WARN Please initialize the log4j system properly. 
```

我已将我的属性文件放在 src 文件夹中，并将 log4j.jar 导入构建路径中。

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:47:02.440

我记得该`log4j.properties`文件必须在`root-directory`执行并添加到classPath中。所以这意味着该文件必须与该文件夹位于同一级别，`src-Folder`而不是在此文件夹中。或者您必须将执行的根目录更改为您的 src 文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:39:32.463

你的配置文件有错别字。删除第一行中的最后一个“，”：

```
 log4j.logger.devpinoyLogger=DEBUG, dest1 
```

您应该定义一个根记录器以避免此类“无附加程序”警告。

```
 log4j.rootLogger=DEBUG, dest1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T07:39:42.967

可能会有所帮助：

```
org.apache.log4j.PropertyConfigurator.configure(log4j.propertiesLocation); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T13:32:18.310

您可以添加包 URL 的添加部分，所有子包都将打印到日志中：

这是一个例子：

log4j.logger.org.apache=调试，标准输出

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T08:30:05.730

问题：-- log4j:WARN 请正确初始化 log4j 系统。回答你应该在主方法类中添加下面的行它的工作

PropertyConfigurator.configure("src/main/java/com/nsettle/config/log4j.properties");

# python - python按指定的次数拆分

> ID：14235638
> 
> 赞同：4
> 
> 时间：2013-01-09T12:52:50.423
> 
> 标签：python

在以下字符串中，我如何以以下方式拆分字符串

```
str1="hi\thello\thow\tare\tyou"
str1.split("\t")
n=1
Output=["hi"]

 n=2 
output:["hi","hello"] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T12:55:02.303

```
str1.split('\t', n)[:-1] 
```

[`str.split`](http://docs.python.org/2/library/stdtypes.html#str.split)有一个可选的第二个参数，它是拆分的次数。我们用切片删除列表中的最后一项（剩余的）。

例如：

```
a = 'foo,bar,baz,hello,world'
print(a.split(',', 2))
# ['foo', 'bar', 'baz,hello,world']  #only splits string twice
print(a.split(',', 2)[:-1])  #removes last element (leftover)
# ['foo', 'bar'] 
```

# php - 使用 vimeo 视频上传 api 在 vi meo 上上传视频

> ID：14235640
> 
> 赞同：0
> 
> 时间：2013-01-09T12:52:57.127
> 
> 标签：php, video, upload, vimeo

[http://vimeo.com/oauth/confirmed](http://vimeo.com/oauth/confirmed)

> 授权成功您已成功授权“我的应用”访问您的账户。要开始使用“我的应用程序”，请返回应用程序并输入以下代码
> 
> ```
> toys-ve14o 
> ```

我可以在哪里添加此代码？

# azure - 使用 blob 存储配置和观察 log4net

> ID：14235646
> 
> 赞同：13
> 
> 时间：2013-01-09T12:53:23.037
> 
> 标签：azure, log4net, azure-blob-storage, log4net-configuration

我们正在使用带有自定义附加程序的 log4net 将我们的东西从 azure 机器记录到表存储，并且效果很好。我们现在需要的是使用 blob-store 在一个地方为我们的所有实例配置日志记录，并能够在运行时对其进行修改，只需修改 blob 存储中的配置文件，稍后我的所有机器都应该知道这一点改变。

简单地说我需要的是：

```
XmlConfigurator.Configure(Uri blobStoreUri, bool watch=true) 
```

甚至更好：

```
XmlConfigurator.ConfigureAndWatch(string blobStoreUrl, TimeSpan refreshInterval) 
```

我用谷歌搜索了一下，但找不到类似的东西。实现这个的最好方法是什么，或者你知道任何类似的实现吗？

谢谢阿尔米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T12:23:38.317

这是我们实施的解决方案

[https://gist.github.com/kaza/9207832](https://gist.github.com/kaza/9207832)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:45:20.690

我找不到配置 log4net 以查找存储在 blob 中的文件的方法，但是 windows azure 诊断提供了一种方法来指定存储在 blob 中的日志文件中的配置信息。 [http://msdn.microsoft.com/en-us/library/windowsazure/hh411551.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh411551.aspx)

# google-drive-api - 使用 Google Drive PHP API 读写 Google Doc 表

> ID：14235647
> 
> 赞同：0
> 
> 时间：2013-01-09T12:53:23.460
> 
> 标签：google-drive-api, google-spreadsheet-api

我正在考虑以下场景：

我的 PHP 应用程序将一些整数推送到一个 google doc 表中，该表用这个计算并将这个操作的结果保存在表的末尾。我的 php 应用程序最终读取结果并将其显示在网站上。

这可以通过 Google Drive PHP API 实现吗？

我发现以下内容： [http](http://code.google.com/p/google-api-php-client/) ://code.google.com/p/google-api-php-client/ https://developers.google.com/drive/ [https://developers.google.com/drive/examples /php#setting_up_this_sample_application](https://developers.google.com/drive/examples/php#setting_up_this_sample_application)

但我不确定这是否可能？是否有任何示例应用程序或脚本可以读取和写入谷歌文档表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:36:18.173

您可以使用电子表格 API 以编程方式读取和写入 Google 电子表格：

[https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

# memory - cpu 是否知道正在运行的级别（ring0 或 ring3）？

> ID：14235649
> 
> 赞同：1
> 
> 时间：2013-01-09T12:53:28.957
> 
> 标签：memory, windows-7, kernel, cpu, xen

我正在研究 xen 管理程序。因为在操作系统下工作。我能看到的东西是物理设备，如cpu和内存。来宾操作系统是HVM（windows 7）。我需要复制它的内核空间内存（0x80000000以上）。复制时它工作正常低于 0x80000000。但是当我从 0x80000000 上面复制时，win7 哎呀。我认为复制时cpu在ring3上运行。但是我需要知道Guest OS的vcpu在哪个级别（ring0或ring3）上运行。（我在win7的上下文中使用hvm_copy_from_guest_phys（）进行复制操作）

# haskell - 函数组合在 let 中的工作方式不同吗？

> ID：14235653
> 
> 赞同：1
> 
> 时间：2013-01-09T12:53:40.717
> 
> 标签：haskell, function-composition

要从 GHCi 中的列表中删除最后一项，我可以反转列表，取出尾部，然后再次反转它。例如，

```
reverse(tail(reverse([1,2,3,4]))) 
```

由于那里有很多括号，我想我会改变它以使用函数组合。但是，当我尝试此操作时，出现以下错误。

```
Prelude> reverse . tail. reverse [1,2,3,4]

<interactive>:2:17:
    Couldn't match expected type `a0 -> [a1]' with actual type `[a2]'
    In the return type of a call of `reverse'
    Probable cause: `reverse' is applied to too many arguments
    In the second argument of `(.)', namely `reverse [1, 2, 3, 4]'
    In the second argument of `(.)', namely
      `tail . reverse [1, 2, 3, 4]' 
```

我认为这意味着它不喜欢 compose `reverse [1,2,3,4]`，所以我尝试在它周围加上括号，但它给了我同样的错误。

```
Prelude> reverse . tail. (reverse [1,2,3,4])

<interactive>:3:18:
    Couldn't match expected type `a0 -> [a1]' with actual type `[a2]'
    In the return type of a call of `reverse'
    Probable cause: `reverse' is applied to too many arguments
    In the second argument of `(.)', namely `(reverse [1, 2, 3, 4])'
    In the second argument of `(.)', namely
      `tail . (reverse [1, 2, 3, 4])' 
```

但是，如果我执行以下操作，它可以正常工作。

```
Prelude> let f = reverse . tail . reverse
Prelude> f [1,2,3,4]
[1,2,3] 
```

是什么导致了这个错误，为什么 let 绑定阻止了这个错误的发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T13:05:58.807

当您看到 type of 时，`.`您会注意到它希望其两个操作数都是函数（具有合适的类型，以便可以组合它们）

```
Prelude> :i (.)
(.) :: (b -> c) -> (a -> b) -> a -> c   -- Defined in `GHC.Base'
infixr 9 . 
```

现在函数应用程序的优先级高于任何中缀运算符，所以

```
Prelude> reverse . tail . reverse [1,2,3,4] 
```

变成

```
Prelude> reverse . tail . (reverse [1,2,3,4]) 
```

当您尝试应用组合时，它的类型错误。为了使组合正确，您必须明确赋予组合比函数应用更高的优先级，您可以通过提供显式括号来做到这一点。

```
Prelude> (reverse . tail . reverse) [1,2,3,4] 
```

此解决方案有效，但haskellers 讨厌使用括号。这是另一个运算符`$`，它可以将您保存在这些地方，并使您的代码比使用括号更具可读性。当你看到类型`$`

```
Prelude> :i ($)
($) :: (a -> b) -> a -> b       -- Defined in `GHC.Base'
infixr 0 $ 
```

您可以清楚地看到它的优先级 (0) 小于 compostion (9) 的优先级，这给了您想要的效果。您可以降低最后一个函数应用的优先级或将函数组合替换为`$`.

```
Prelude> reverse . tail . reverse $ [1,2,3,4]
Prelude> reverse . tail $ reverse [1,2,3,4]
Prelude> reverse $ tail $ reverse [1,2,3,4] 
```

这很好，因为第一个操作数`$`是一个函数，而其他只是一个正确类型的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T13:02:59.430

在`let`函数组合的情况下`.`，然后给出一个列表作为函数组合结果的参数：

```
(reverse . tail . reverse) [1,2,3,4] 
```

在另一种情况下，列表作为参数给出，`reverse`并尝试将其结果与其他一些函数组合：

```
reverse . tail . (reverse [1,2,3,4]) 
```

由于返回的反向列表`reverse [1,2,3,4]`不是函数，因此将其用作 for 的参数`.`会导致类型错误。

# asp.net - Accordionpane 独立隐藏个别内容

> ID：14235660
> 
> 赞同：0
> 
> 时间：2013-01-09T12:54:02.150
> 
> 标签：asp.net, vb.net, master-pages, accordion

我有一个名为 library 和 sub menus 的 Accordion 窗格作为图书预订、请求和审阅，如下所示

```
 <asp:AccordionPane ID="Library" runat="server">

      <Header><div  >Library </div> </Header>
        <Content><div >Book Reserve</a></div>
                 <div >Book Request</a></div>
                 <div >Book Review</a></div>

        </Content>
     </asp:AccordionPane> 
```

从后面的代码中，我可以使用隐藏整个窗格

```
 Dim accpane As AccordionPane
    accpane = Master.FindControl("Library") 
```

但是有没有办法隐藏子菜单项，即。保留，请求，独立审查，例如`accpane("Book Request").visible = false`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:00:45.127

您必须将 DIV 元素更改为：

```
<div id="X" runat="server">Book Request</a></div> 
```

并在手风琴窗格上使用 FindControl 来获取对它的引用，并将 Visible 设置为 false。我忘记了返回的确切控制类型；它可能是 HtmlGenericControl... 不是 100% 确定的。

# iphone - 如何查找在 Interface Builder 中设置的 UILabel 的文本？

> ID：14235666
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:54:14.760
> 
> 标签：iphone, ios, uilabel

我有`UILabel *lblTest`。我将此标签的文本设置为`Interface Builder`.

现在我通过代码将 lblTest 文本设置为“新测试”。

所以现在我又想获得我已经设置的“测试”文本`Interface Builder`。

有没有办法巧妙地做到这一点？

**注意：**我对行代码数不感兴趣....期待单行解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:03:47.713

我猜您想要类似“撤消”功能的东西。没有特殊的方法可以做你描述的事情。您可以做的一件事是：

1.  在将标签文本设置为“新测试”之前，将第一个字符串存储在 NSString 变量中

    ```
    NSString *oldString = lblTest.text; 
    ```

2.  更改代码中的文本。

    ```
    self.lblTest.text = @"new test"; 
    ```

3.  需要时，将其更改回旧字符串。

    ```
    self.lblTest.text = oldString; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:04:46.677

您必须了解，您的**Interface Builder**中的值将被您自己编写的代码覆盖。

因此，一旦您的代码更改了标签，您就可以恢复**Interface Builder**的值，例如：

```
NSString* lblTestString = lblTestString.text;

//now set your value from the code
[lblTest setText:@"new Test"];

//and revert it to what was already in the interface builder
[lblTest setText:lblTestString]; 
```

还是真的没什么意思。。

# html - 在 IE8 中分配底部属性时定位固定问题

> ID：14235667
> 
> 赞同：0
> 
> 时间：2013-01-09T12:54:17.003
> 
> 标签：html, css, cross-browser

我创建了一个聊天应用程序，我将与聊天应用程序相关的父 div 保留为`position:fixed`. 这是摘录代码：

```
#chat-outline
{
    background-color: gray;
    width: 16%;
    height: 45%;
    min-height: 300px;
    min-width: 200px;
    max-height: 450px;
    max-width: 300px;
    position: fixed;
    bottom: 25px;  //even tried by giving 'em', no use
    right: 10px;
    padding: 2px;
} 
```

问题是在 IE8 中，我需要赋予`bottom`属性更多的价值以使其完全可见（下面的部分正在减少）。如果我这样做，在 chrome 中，聊天应用程序会比平时更受欢迎。

有什么解决办法吗？

我在 asp.net 中执行此操作，因此无需担心 doctype。（因为它提供了模板）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

编辑：

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
  <title></title>
   <script src="Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
   <script src="JSfiles/file.js" type="text/javascript"></script>
   <link href="Styles/style.css" rel="stylesheet" type="text/css" />
   <!--[if lte IE 8 ]><html class="ie_8"><![endif]-->
     <!--[if (gt IE 8)|(!IE)]><!-->
        <html>
    <!--<![endif]-->
</head>
<body>
    <div id="#chat-outline"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:57:56.627

为 IE8 添加条件 HTML 类。将您的`<html>`标签更改为此

```
<!--[if lte IE 8 ]><html class="ie_8"><![endif]-->
<!--[if (gt IE 8)|(!IE)]><!-->
<html>
<!--<![endif]--> 
```

然后在你的CSS中有这个

```
.ie_8 #chat-outline {
    bottom: 25px  //OR whatever it needs to be
} 
```

这将意味着增加的底部不会影响任何其他浏览器：

请参阅此处了解更多信息：[链接](https://stackoverflow.com/questions/7358716/ie-conditional-comments-need-explaination)

**编辑**

您的 html 无效：

试试这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lte IE 8 ]>
    <html xmlns="http://www.w3.org/1999/xhtml" class="ie_8">
<![endif]-->
<!--[if (gt IE 8)|(!IE)]><!-->
    <html xmlns="http://www.w3.org/1999/xhtml">
<!--<![endif]-->
<head id="Head1" runat="server">
  <title></title>
   <script src="Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
   <script src="JSfiles/file.js" type="text/javascript"></script>
   <link href="Styles/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="#chat-outline"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:55:46.650

您是否尝试过重置文档的填充和边距？

CSS：

```
html, body {
   margin: 0;
   padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:58:18.617

```
<!--[if gt IE 7]>
    <style>
    div {
       bottom: /* as you want */;
    }
    </style>
<![endif]--> 
```

# javascript - AngularJS - 指令渲染完成后如何查询 DOM

> ID：14235669
> 
> 赞同：2
> 
> 时间：2013-01-09T12:54:20.347
> 
> 标签：javascript, web, widget, components, angularjs

我正在尝试使用 AngularJS 指令实现自定义滚动窗格组件。在下面的[jsfiddle 示例](http://jsfiddle.net/neuTA/134/)中，我有一个基本原型的示例。

这是我的想法的架构： ![在此处输入图像描述](../Images/453630e27a42c2e1a45c5907fde96543.png)

这是指令代码：

```
 myApp.directive('lpScrollPane', function factory() {
    return {
        restrict: 'A',
        replace: true,
        transclude: true,
        template: '<div class="scrollPaneWrapper"><div class="scrollPane" ng-transclude></div><div class="thumbTrack" ></div></div>',
        compile: function (tElement, tAttrs) {
            var minHeight = 30;
            return function (scope, iElement, iAttrs) {
                var thumbTrack = angular.element(iElement.children()[1]);

                scope.onScrollHeight = function () {
                    console.log(iElement.children()[0].scrollHeight);

                    var H1 = iElement[0].offsetHeight;
                    var H2 = iElement.children()[0].scrollHeight;
                    if (H2 > H1) {
                        var trackHeight = Math.round(minHeight + (H1 - minHeight) * (1 - Math.pow((H2 - H1) / H2, 0.8)));
                        thumbTrack.css({
                            display: "block",
                            height: trackHeight + "px"
                        });
                        console.log(H2, H1, trackHeight);
                    } else {
                        thumbTrack.css({
                            display: "none"
                        });
                    }
                };

                scope.$watch(function () {
                    scope.onScrollHeight();
                    //setTimeout(scope.onScrollHeight, 100)
                });

            }
        }
    };
}); 
```

基本上有 2 次潜水，1 次隐藏溢出，1 次带有溢出滚动，另一个 div 模仿拇指跟踪器。

我的目标是监视 scrollHeight 属性，然后相应地更改跟踪器高度。问题是 $watch 在渲染 DOM 之前被触发，因此在显示和计算跟踪器时会出现延迟。现在我在 watch 函数上使用了 setTimeout 并且它工作正常（取消注释第 35 行和注释 34 以查看它的运行情况）。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T17:37:22.710

看看[Angular JS 指令是否有渲染后回调？](https://stackoverflow.com/questions/11125078/is-there-a-post-render-callback-for-angular-js-directive)

不幸的是，无法确定渲染何时完成（例如，没有事件）。使用 $timeout 似乎是最好的解决方法。

在上面的链接中，@Nik 在评论中提到他正在检查`$('tr').length > 3`他的特定场景，以确定渲染何时完成。也许您可以定期检查 DOM 中的某些内容以确定渲染是否完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T13:20:59.107

两个观察：

*   你不需要恕我`compile`直言，但`link`功能
*   你应该等到**元素准备好**，而不是使用超时

所以：

```
myApp.directive('lpScrollPane', function factory() {
  return {
    restrict: 'A',
    replace: true,
    transclude: true,
    template: '<div class="scrollPaneWrapper"><div class="scrollPane" ng-transclude></div><div class="thumbTrack" ></div></div>',
    link: function (scope, iElement, iAttrs) {
      var minHeight = 30;
      var thumbTrack = angular.element(iElement.children()[1]);

      scope.onScrollHeight = function () {
        console.log(iElement.children()[0].scrollHeight);

        var H1 = iElement[0].offsetHeight;
        var H2 = iElement.children()[0].scrollHeight;
        if (H2 > H1) {
          var trackHeight = Math.round(minHeight + (H1 - minHeight) * (1 - Math.pow((H2 - H1) / H2, 0.8)));
          thumbTrack.css({
            display: "block",
            height: trackHeight + "px"
          });
          console.log(H2, H1, trackHeight);
        } else {
          thumbTrack.css({
            display: "none"
          });
        }
      };

      iElement.ready(function () {  
         scope.$watch(function () {
           scope.onScrollHeight();
         });
      });        
    }
  };
}); 
```

请参阅[jsFiddle](http://jsfiddle.net/asgoth/wvApH/)。

**编辑：**

因为2张图说1000多字，这里有两张截图： ![最后一个仍然可见的元素被插入](../Images/8b17f7ffaa8d76f8ddb1cc50793369eb.png) ![第一个不可见的元素被插入](../Images/d21ecd710931f129417287b4dcb81dc0.png)

# opengl - gluUnProject 在某些情况下返回不准确的 z 坐标

> ID：14235670
> 
> 赞同：1
> 
> 时间：2013-01-09T12:54:21.153
> 
> 标签：opengl, rotation, coordinate-systems, depth, glu

我在使用 gluUnProject 时遇到了一些麻烦，因为我正在检索不准确的 Z 坐标。

所涉及的程序本质上是一个 3d 查看器。我实现了一个小功能，允许用户单击加载的模型并检索两点之间的距离。

这是代码：

```
//  Declare variables for viewport, modelview and projection matrix
int viewport[] = new int[4];
float modelview[] = new float[16];
float projection[] = new float[16];
//  GL y-coordinate position
int realY;
//  Returned [wx, wy, wz, 1] coordinates
float worldCoordinates[] = new float[4];

gl2.glGetIntegerv(GL2.GL_VIEWPORT, viewport, 0);
gl2.glGetFloatv(GL2.GL_MODELVIEW_MATRIX, modelview, 0);
gl2.glGetFloatv(GL2.GL_PROJECTION_MATRIX, projection, 0);

//  Retrive the Y coordinate, note viewport[3] is height of window in pixels
realY = viewport[3] - click.y - 1;

//  Allocate a buffer to store the result
FloatBuffer fb = FloatBuffer.allocate(1);

//  Retrieve the Z coordinate, read a block of pixels from the frame buffer
gl2.glReadPixels(click.x, realY, 1, 1, GL2.GL_DEPTH_COMPONENT, GL2.GL_FLOAT, fb);

System.out.println("Depth: "+fb.get(0));

//  Avoid centering if the click is on nothing
if (fb.get(0) == 1.0f) {
    return null;
}
//  Map window coordinates to object coordinates, retrieve the world coordinates
glu.gluUnProject(click.x, realY, fb.get(0), modelview, 0, projection, 0,
            viewport, 0, worldCoordinates, 0); 
```

当我测量位于垂直于用户的表面上的两点之间的距离时，一切正常。如果我们想象一个 3 轴系统，z 指向用户，y 指向顶部，这两个点位于 XY 平面上。无论围绕 Z 旋转如何，它都可以工作。

![在此处输入图像描述](../Images/4d4b772484fa559290453dc562088b56.png)

例如，在这里我创建了一个小正方形平面，两个点的高度相同（一个被标签遮挡）：

世界坐标 P1: (0.019062456, 0.03357359, 0.08333321, 1)

世界坐标P2：(0.025983132, 0.028048635, 0.08333321, 1)

但是，如果我在全局 X 轴上旋转整个场景，则检索到的 Z 坐标会发生变化：

![在此处输入图像描述](../Images/8e75c2ef3e911ffcf89910383bb270ca.png)

X 和 Y 坐标无关紧要，重要的是 Z 坐标。它不再是 0.08333321。

世界坐标 P1: (0.026863147, 0.027185505, 0.0831252, 1)

世界坐标 P2: (0.020072304, 0.034560144, 0.08312501, 1)

此外，在全局 X 上旋转后，缩放也会影响点的 Z 坐标。

Ps：我正在使用JOGL。通过放大/缩小 glOrtho 平行六面体来执行放大和缩小。glReadPixels 生成的 Z 深度 fb.get(0) 包含在 [0, 1] 中。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:53:08.687

您是否希望在您的平面上看到该点的确切坐标？你不会以这种方式得到它。

当您渲染您的正方形时，坐标被转换为 3D，并且原始栅格化（即转换为 2D 和插值），生成屏幕 X、Y 和（通常）24 位深度值。这是相当大的精度损失（甚至不是线性的），所以如果你阅读它并反转变换，你只会得到原始值的近似值。

如果您的多边形恰好垂直于视图方向，则插值将至少在整个表面上提供一致的 z 值（因为所有转换后的 Z 值都相同），尽管它不一定是*正确*的z 值. 因此，深度的任何变化都会导致误差变化，如果你的平面不垂直，它甚至会在多边形上保持一致。

深度基本上足以在没有太多错误的情况下进行绘制（即使如此，并非总是如此），但对于重建精确的几何图形却不是​​。

如果您想要更好的结果，您可以将实际模型空间 X、Y、Z 光栅化为带有着色器的（浮动）FBO，然后将其读回。或者，在软件中将射线与您的几何体相交。

# unicode - 在将 UNICODE 字符转换为 UTF-8 多字节字符时感到困惑

> ID：14235673
> 
> 赞同：1
> 
> 时间：2013-01-09T12:54:31.417
> 
> 标签：unicode

我必须在我的应用程序中加载一个“dll”文件，该文件位于包含“UNICODE”字符的路径中。当我得到 wchar_t* 中的路径并将其传递给 LoadLibrary() 时，按预期工作。

但我以另一种方式 1\. 将宽字符数组转换为 UTF-8 多字节数组。2\. 再次将 UTF-8 多字节数组转换为宽字符数组。3\. 现在使用转换后的宽字符数组作为库的路径。LoadLibrary() 失败，GetLastError() 给出 216（未找到模块错误）。

我尝试了上述步骤，认为第一步的输入将是第二步的输出，但它不是...... :-(

这是有关我要执行的操作的代码详细信息...

```
wchar_t* path = L".\\..\\libs\\여성해방운동\\mylib.dll";

//STEP 1:
int creq = WideCharToMultiByte(CP_UTF8,0,path,-1,NULL,0,NULL,NULL);
char* cpath = (char*)malloc(sizeof(char)*creq);
memset(cpath,0,creq);
WideCharToMultiByte(CP_UTF8,0,path,-1,cpath,creq,NULL,NULL);

//STEP:2
int wreq = MultiByteToWideChar(CP_ACP,0,cpath,-1,NULL,0);
wchar_t* wpath = (wchar_t*)malloc(sizeof(wchar_t)*wreq);
memset(wpath,0,sizeof(wchar_t)*wreq);
MultiByteToWideChar(CP_ACP,0,cpath,-1,wpath,wreq);

//STEP:3
if( LoadLibrary(wpath) == NULL )
    printf("Loading failed %d \n",GetLastError());
else
    printf("Loading is success \n"); 
```

我尝试使用 cpath（STEP 1 的输出）使用“LoadLibraryA”API 加载库，但它也失败了。

在我的应用程序中，我必须将宽字符数组转换为多字节数组并在另一个 API 中将其反转。因此，如果有人知道这一点，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:54:05.333

在第 1 步中，您使用 CP_UTF8 进行了转换。所以在第 2 步中，还需`MultiByteToWideChar()`要用 CP_UTF8 调用。

我预计`LoadLibraryA(cpath, ...)`会失败，因为它假定 cpath 位于 CP_ACP 中——无论您的计算机碰巧设置为哪个系统代码页。

# jquery - socket.io 链接本地 jQuery 给出 404

> ID：14235675
> 
> 赞同：2
> 
> 时间：2013-01-09T12:54:43.670
> 
> 标签：jquery, node.js, socket.io

我想在我的 socket.io 应用程序上使用本地版本的 jQuery，该应用程序在端口 8000 上运行

当我尝试链接它时，我得到 404。我尝试了以下所有方法：

```
<script src=" js/vendor/jquery-1.8.3.min.js"></script>
<script src=" http://localhost/js/vendor/jquery-1.8.3.min.js"></script>
<script src=" http://localhost:8000/js/vendor/jquery-1.8.3.min.js"></script> 
```

我不想使用谷歌 CDN。我如何链接它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:02:25.083

它应该看起来像

```
var express = require('express'),
    http = require('http');

var app = express();

app.configure ( function () {
    app.use('/js', express.static(__dirname + '/js'));
});

var server = http.createServer(app).listen(8000);

var io = require('socket.io').listen(server);  // Your app passed to socket.io

io.sockets.on('connection', function (socket) { console.log('socket connected') }); 
```

并将您的 jquery 文件放在您的 app/js/vendor 目录中；）

# java - 如何以编程方式打开 SearchView？

> ID：14235677
> 
> 赞同：110
> 
> 时间：2013-01-09T12:54:44.043
> 
> 标签：java, android, android-actionbar

ActionBar 有一个名为“SearchView”的小部件。不使用时，它看起来像这样：

![在此处输入图像描述](../Images/c6ad3040c321870098319e45fc4ce157.png)

而在使用时，它看起来是这样的：

![在此处输入图像描述](../Images/23507c4d55e992b9fb06adc45d9a1351.png)

我想（当然以编程方式）打开搜索视图（使其“正在使用”）。

我尝试了几个功能，例如：

```
SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setOnQueryTextListener(this);

    searchView.performClick();
    searchView.requestFocus(); 
```

但这些都没有奏效......

XML 中的 SearchView：

```
<item android:id="@+id/menu_search"
      android:title="Search"
      android:icon="@drawable/ic_action_search"
      android:showAsAction="ifRoom|collapseActionView"
      android:actionViewClass="android.widget.SearchView" /> 
```

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2013-01-09T13:12:47.707

展开`SearchView`_

```
searchView.setIconified(false); 
```

并用

```
searchView.setIconified(true); 
```

您需要将`android:showAsAction`from的值更改`ifRoom|collapseActionView`为`always`。的`SearchView`属性`android:iconifiedByDefault`应该是`true`，这是默认值，否则用户无法在`SearchView`以编程方式展开后折叠。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-09-21T13:03:42.067

尝试调用`expandActionView()`MenuItem，而不是 ActionView 上的 onActionViewExpanded()。

这个对我有用。

```
MenuItem searchMenuItem = menu.findItem(R.id.menu_search);
searchView = (SearchView) searchMenuItem.getActionView();
searchMenuItem.expandActionView(); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-06-17T22:05:29.097

如果您只想在必要时使用支持库，请执行此操作

```
 MenuItem searchMenuItem = menu.findItem(R.id.action_search);
    if (Utils.hasIceCreamSandwich())
        searchMenuItem.expandActionView();
    else MenuItemCompat.expandActionView(searchMenuItem); 
```

否则只需执行此操作

```
 MenuItem searchMenuItem = menu.findItem(R.id.action_search);
    MenuItemCompat.expandActionView(searchMenuItem); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-10T22:26:32.797

我知道这已经晚了，但是

尝试调用 expandActionView() 打开它并调用 collapseActionView() 关闭它。您可以通过 getActionView() 在实际操作视图上调用 requestFocus() 以赋予搜索视图焦点:)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-10-29T10:15:55.447

对于`androidx.appcompat.widget.SearchView`,

```
searchView.setIconifiedByDefault(true)   // didn't work

searchMenuItem.expandActionView()  // didn't work

MenuItemCompat.expandActionView(searchMenuItem) // didn't work

searchView.onActionViewExpanded()  // didn't work 
```

以下对我有用，

```
searchView.findViewById<View>(R.id.search_button).performClick() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-08T22:49:16.597

扩展 Matthias Robberts 的答案：

我想要一个列表片段来保留它的搜索值并在用户从其他片段返回后设置它。

```
if (myViewModel.filterTextSaved.isNotEmpty()) { // Kotlin, storing state in ViewModel
    searchItem.expandActionView() // needs to come first, otherwise empty text
    theTextArea.setText(courseViewModel.filterTextOnClick)
} 
```

对于我保留的菜单`always|collapseActionView`，否则当用户删除文本时它会保持打开状态。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-16T18:55:07.497

要打开一个`searchView`保持`close_button`最终使用它`onCreate`： -

```
searchView.findViewById(R.id.search_button).performClick(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-25T12:51:51.970

我正在寻找一种以编程方式展开 SearchView 的解决方案，因为我需要恢复展开状态。没有一种解决方案适合我。除了使用 Handler().post()。我知道使用 post() 不是一个好习惯。但我正在处理遗留项目，这种解决方法对我来说是可以接受的。

初始化变量块

```
val searchMenuItem = menu.findItem(R.id.menu_search_item)
val searchView = searchMenuItem.actionView as SearchView 
```

如何展开 SearchView：

```
Handler().post {
   searchMenuItem.expandActionView()
} 
```

post() 有帮助的原因：如果你的应用程序写得不好，它可能在 UI 线程上做太多的工作。post() 确保您的代码块将在 UI 线程可用于执行时执行。这意味着如果您使用此解决方法，您会注意到 SearchView 扩展之间的小延迟

# c++ - C++：可以一次添加多个对象的多态容器

> ID：14235678
> 
> 赞同：1
> 
> 时间：2013-01-09T12:54:48.707
> 
> 标签：c++, polymorphism, containers

试图重构一些基础设施代码，我决定使用继承来实现多个类之间的多态行为。下一步是将它们放入容器中，遍历它们并 DoSomething();

我目前的容器结构很笨拙。即使我为容器使用这个[优雅](https://stackoverflow.com/questions/41045/can-i-have-polymorphic-containers-with-value-semantics-in-c)的解决方案，构造仍然是一团糟。

```
vector<unique_ptr<Parent>> vec;

vec.push_back(unique_ptr<Parent>(new ChildA(var1, var2)));
vec.push_back(unique_ptr<Parent>(new ChildB(var3, var4)));
vec.push_back(unique_ptr<Parent>(new ChildC(var5, var6))); 
```

ChildA、ChildB 和 ChildC 都是相互多态的。Var1 ... var6 可能来自不同的类型，并且是构建子对象所必需的。

我想在几个地方创建这个向量以供使用。问题是孩子的数量可能会有所不同，因此孩子需要构建的数据。尝试走 stdarg.h 的路径失败，因为不支持：

```
if     !defined(_WIN32)
#error ERROR: Only Win32 target supported!
#endif 
```

您将如何实现构造此数组的工厂方法？

更新，所需的解决方案：

```
vec = CreatePolyVec(var1, var2, typeInfo1, var3, var4, typeInfo2, var5, var6 typeInfo3);
vec = CreatePolyVec(var1, var2, typeInfo1, var3, var4, typeInfo2); 
```

第 1 行将创建与上面相同的数组。第 2 行将重用相同的代码来创建一个相似的向量，但对象更少。Typeinfo 保存创建对象所需的信息。

这是一个基本的解决方案，更高级的解决方案将在编译时强制执行参数列表。例如，以下对该函数的调用没有意义：

```
vec = CreatePolyVec(var1, var2,typeinfo1, var3, var4, typeinfo2, var5); 
```

没有足够的参数来创建最后一个子对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:47:19.047

这里有两个问题，1.如何决定每个孩子将是什么类型，2.如何创建多个孩子。

## 决定创建哪个孩子

这可以在编译时或运行时完成。要在编译时执行此操作，您需要模板。

```
template<class Child, class Arg1, class Arg2>
vector<unique_ptr<Parent>> CreateVec(Arg1&& arg1, Arg2&& arg2)
{
    vector<unique_ptr<Parent>> result;
    result.push_back(unique_ptr<Child>(
        new Child(std::forward<Arg1>(arg1), std::forward<Arg2>(arg2))));
    return result;
} 
```

调用如下`CreateVec<MyChild>(myArg1, myArg2)`。

如果您需要在运行时决定，您可以使用由运行时变量索引的工厂函数映射。或者，您可以使用指向工厂对象的指针作为运行时变量。

## 创建多个孩子

在这里，您可以在链式函数和可变参数模板之间进行选择。

### 链式函数

这基本上就是 iostreams 所做的。让创建向​​量并添加单个子项的函数返回一个对象，该对象允许您添加第二个子项，并返回自身允许您继续。

这里的问题是你希望函数返回向量，所以它不能也返回另一个对象。您可以使用转换运算符来获取向量或显式函数，但可能最简单的方法是首先创建向量，然后使用函数添加子项。

```
class AddChildren
{
    vector<unique_ptr<Parent>>& m_vector;
public:
    explicit AddChildren(vector<unique_ptr<Parent>>& theVector)
        : m_vector(theVector) {}

    template<class Child, class Arg1, class Arg2>
    AddChildren& add(Arg1&& arg1, Arg2&& arg2)
    {
        m_vector.push_back(unique_ptr<Child>(
            new Child(std::forward<Arg1>(arg1), std::forward<Arg2>(arg2))));
        return *this;
    }
}; 
```

使用如下：

```
vector<unique_ptr<Parent>> myvector;
AddChildren(myvector)
    .add<ChildA>(var1, var2)
    .add<ChildB>(var3, var4)
    .add<ChildC>(var5, var6); 
```

如果您正在使用运行时方法来选择您可以使用的类型`operator()`并让它看起来像这样：

```
vector<unique_ptr<Parent>> myvector;
AddChildren(myvector)
    (childAType, var1, var2)(childBType, var3, var4)(childCType, var5, var6); 
```

（这也可以通过使用每个子类型的特定类型选择器类型的虚拟对象作为参数来在编译时选择类型来完成。）

### 使用可变参数模板

使用可变参数模板一次剥离三个参数，并添加一个子对象。

```
void addChildren(vector<unique_ptr<Parent>>& theVector)
{}

template<class FirstChild, class FirstArg1, class FirstArg2, class... Rest>
void addChildren(vector<unique_ptr<Parent>>& theVector,
    FirstChild childtype, FirstArg1&& arg1, FirstArg2&& arg2, Rest&&... rest)
{
    addChild(theVector, childtype,
        std::forward<Arg1>(arg1), std::forward<Arg2>(arg2));
    addChildren(theVector, std::forward<Rest>(rest)...);
}

template<class... Args>
vector<unique_ptr<Parent>> CreateVec(Args&&... args)
{
    vector<unique_ptr<Parent>> result;
    addChildren(result, std::forward<Args>(args)...);
    return result;

} 
```

我在这里假设存在一个函数，该函数`addChild`可以在给定其类型（作为参数）及其参数的情况下添加一个子项。

主要问题是 VS2012 没有可变参数模板。有两种方法可以模拟可变参数模板。1\. 编写一个函数，该函数采用您可能需要的最大参数数量，并将它们中的大多数默认为某种已知类型，您可以将其视为“不存在”。2\. 写出你认为需要的尽可能多的重载。

如果你知道你永远不需要超过十个子对象，那么第二个选项实际上是完全可行的——你只需要编写一次它们，它可能少于 150 行代码。或者，您可以使用 Boost.Preprocessor 生成函数，但这是一个全新的复杂程度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:37:50.017

随着 2012 年 11 月的编译器更新，VS 2012 支持可变参数模板，因此以下应该可以工作（这不是您所追求的语法，但我认为它非常接近）：

```
struct VectorCreator
{
  explicit VectorCreator(std::vector<Parent> &vec)
    : vec_(vec)
  {}

  template <typename Type, typename... ArgType>
  VectorCreator& create(ArgType&&... arg)
  {
    vec_.push_back(std::unique_ptr<Parent>(new Type(std::forward<ArgType>(arg)...));
    return *this;
  }

private:
  std::vector<Parent> &vec_;
}; 
```

像这样使用：

```
std::vector<Parent> vec;
VectorCreator(vec).create<ChildA>(var1, var2).create<ChildB>(var3, var4).create<ChildC>(var5, var6); 
```

# java - PHP 服务器的可行性

> ID：14235679
> 
> 赞同：0
> 
> 时间：2013-01-09T12:54:50.293
> 
> 标签：java, php, client-server

我正在制作一个基于回合的在线多人游戏（比赛是 1v1），其中需要每 5-10 秒将信息推送给客户端。现在，根据我的经验和阅读，最好的方法是通过我使用 Java 构建的服务器程序并在专用服务器上运行。唯一的问题是因为我还年轻 (17) 我没有钱来支持这样的事情。我的客户端是 Java，我的服务器是 PHP，位于 Linux-Apache 网络服务器上。

从这里我应该使用长轮询与客户端通信还是应该尝试使用套接字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:09:15.000

我可能会使用套接字，但您应该记住，这些仅在现代浏览器中可用，因此旧版本 IE 的用户可能会有点卡住。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:06:52.653

它是开源的还是私有的？

如果它是开源的，只需发布​​服务器代码，让人们运行自己的服务器。

如果它是私人的，使用服务器收费，如果你的金额正确，服务器没有钱的问题应该会消失。

在短期内，虽然没有太多的流量，但使用像亚马逊这样相对便宜的云服务。如果您需要真正的力量，这不会持续很长时间，但足以让您入门。您将无法避免至少一些前期财务支出，但这样做应该尽可能便宜。

# c++ - OpenCV findFundamentalMat 奇怪的行为

> ID：14235684
> 
> 赞同：3
> 
> 时间：2013-01-09T12:55:02.793
> 
> 标签：c++, opencv

我正在尝试使用 openCV 找到 findFundamentalMat() 来获取两个匹配点集的基本矩阵。图像失真，然后我检测关键点并匹配它们。我认为使用 undistortPoints 可以为基本矩阵提供更好的结果（我知道相机的内在参数），但是在 undistortPoints 之后，findFundamentalMat 给出了奇怪的结果。首先，在生成的掩码数组中，所有点都被视为内点。二是误差很大。我这样计算错误：

```
 vector<Point2f> points1Raw; //Raw points from Keypoints
        vector<Point2f> points1; //Undistorted points
        vector<Point2f> points2Raw;
        vector<Point2f> points2;
        for(int k=0; k<matches.size(); k++) {
            points1Raw.push_back(keypoints1[matches[k].queryIdx].pt);
            points2Raw.push_back(keypoints2[matches[k].trainIdx].pt);
        };

        undistortPoints(points1Raw, points1, cameraMatrixm, distCoeffsm);
        undistortPoints(points2Raw, points2, cameraMatrixm, distCoeffsm);

        vector<uchar> states;

        Mat f = findFundamentalMat(points1, points2, FM_RANSAC, 3, 0.99, states);

            //For all k matches
            Mat p1(3, 1, CV_64F);
            p1.at<double>(0, 0) = points1[k].x;
            p1.at<double>(1, 0) = points1[k].y;
            p1.at<double>(2, 0) = 1;
            Mat p2(1, 3, CV_64F);
            p2.at<double>(0, 0) = points2[k].x;
            p2.at<double>(0, 1) = points2[k].y;
            p2.at<double>(0, 2) = 1;

            Mat res = abs(p2 * f * p1); // f computed matrix

            if((bool)states[k]) //if match considered inlier (in my strange case all)
                err = err + res.at<double>(0, 0); //accumulate errors 
```

产生的总误差大约是 100 到 1000 甚至更多。但是通过在计算基本矩阵之前手动检查匹配，它们中的大多数看起来都是正确的。我究竟做错了什么？：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:41:20.457

你有多少分？要算作内点，最多允许（在您的情况下）3 个像素的错误，......所以如果您有几百个点，很明显累积的错误很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T12:15:46.030

在 undistortPoints 之后，坐标不再以像素为单位，因此*3*没有多大意义。您可以尝试使用：

```
0.006 * maxVal 
```

如： http: [//www.learningace.com/doc/568776/daa602b585fb296681f344b08bc808f0/snavely_ijcv07](http://www.learningace.com/doc/568776/daa602b585fb296681f344b08bc808f0/snavely_ijcv07)第 4.1 节

```
double minVal, maxVal;
cv::minMaxIdx(points1, &minVal, &maxVal); 
```

# android - OnCameraChangeListener 响应不够快 - 还有其他方法吗？

> ID：14235686
> 
> 赞同：3
> 
> 时间：2013-01-09T12:55:12.493
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在将 v1 地图中的图层移植到 v2。该图层在地图上绘制了一个自定义控件，并且随着地图的移动，它必须保持在其当前地理位置（使用正确的比例）上。

有人建议我使用它`onCameraChange`来与我的图层（地图顶部的自定义视图）交流相机正在平移或缩放并适当地更新图层。

我的问题是仅在相机移动后才调用 - 而不是在移动期间***调用***`onCameraChange`。因此反应不够灵敏。还有另一种方法可以实现这一目标吗？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:42:20.170

尝试将 MapFragment（或 MapView）包装在继承自 RelativeLayout 之类的自定义类中。然后，您可以在该自定义布局中覆盖 onInterceptTouchEvent 或 dispatchTouchEvent 并从那里移动您的自定义视图。我自己试过了，它肯定会给你比 onCameraChange 更多的回调。

您还可以在这里查看我的答案：
[Google Maps Android API v2 - Interactive InfoWindow（就像在原始的 android google maps 中一样）](https://stackoverflow.com/questions/14123243/google-maps-api-v2-custom-infowindow-like-in-original-android-google-maps/15040761#15040761)
我正在处理一些不同的事情（我试图避免在地图上移动自定义视图，但我只需要infoWindow 上的一些按钮），但我也在那里使用了这种包装布局。*

# java - 我们可以在发生异常的 try 块中获取 LineNumber 和 ColumnNumber

> ID：14235687
> 
> 赞同：9
> 
> 时间：2013-01-09T12:55:19.393
> 
> 标签：java, exception, exception-handling, try-catch, catch-block

我有下面的代码，我可以使用它打印发生错误的完整类名、类名、方法名。

另外，我可以打印行号，但打印的行号是初始化变量“行号”的行。

如何在发生错误的 try 块中打印确切的 LineNumber 和 ColumnNumber？

```
try
{
    SQL Query
}
catch(Exception e)
{
   String fullClassName = Thread.currentThread().getStackTrace()[1].getClassName();              
   String className = fullClassName.substring(fullClassName.lastIndexOf(".") + 1);  
   String methodName = Thread.currentThread().getStackTrace()[1].getMethodName();  
   int lineNumber = Thread.currentThread().getStackTrace()[1].getLineNumber();  

     JOptionPane.showMessageDialog(null,fullClassName+"--"+className+"--"+methodName+"--"+lineNumber,"Error In Moving data from table1 to table2",JOptionPane.ERROR_MESSAGE);                         

} 
```

输出：

```
 IPM.Shifting--Shifting--ConfirmTransfer_BActionPerformed--1138 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-13T10:21:33.517

```
public class ExceptionHandler {

    /**
     * @param args
     */
    public static void main(String[] args) {

        try {
            String str = getString();
            if(str.isEmpty()){
                System.out.println("error");
            }
        } catch (Exception e) {
            StackTraceElement[] elements = e.getStackTrace();  
            for (int iterator=1; iterator<=elements.length; iterator++)  
                   System.out.println("Class Name:"+elements[iterator-1].getClassName()+" Method Name:"+elements[iterator-1].getMethodName()+" Line Number:"+elements[iterator-1].getLineNumber());
        }
    }

    private static String getString() {
        jhgfjkhgjh();
        return null;
    }

    private static void jhgfjkhgjh() {
        gfdhdfghdg();
    }

    private static void gfdhdfghdg() {
        sdfytusdgsfd();
    }

    private static void sdfytusdgsfd() {
        throw null;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T18:15:15.193

```
} catch (Exception e) {            
        StackTraceElement[] stackTrace = e.getStackTrace();             
        String fullClassName = stackTrace[stackTrace.length - 1].getClassName();
        String className = fullClassName.substring(fullClassName
                .lastIndexOf(".") + 1);
        String methodName = stackTrace[stackTrace.length - 1].getMethodName();
        int lineNumber = stackTrace[stackTrace.length - 1].getLineNumber();
        JOptionPane.showMessageDialog(null, fullClassName + "--" + className + "--" + methodName + "--" + lineNumber, "Error In Moving data from table1 to table2", JOptionPane.ERROR_MESSAGE);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T12:59:39.003

```
StackTraceElement[] stackTrace = Thread.currentThread()
                    .getStackTrace();
String fullClassName = stackTrace[stackTrace.length-1].getClassName();
String className = fullClassName.substring(fullClassName
        .lastIndexOf(".") + 1);
String methodName = stackTrace[stackTrace.length-1].getMethodName();
int lineNumber = stackTrace[stackTrace.length-1].getLineNumber(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T13:08:03.363

你也可以试试

```
JOptionPane.showMessageDialog(null, ""+Thread.currentThread().getStackTrace()[1]); 
```

例如

```
System.out.println(Thread.currentThread().getStackTrace()[1]); 
```

印刷

```
Main.main(Main.java:32) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-22T11:59:09.297

在这里，我提出了一个解决方案，希望对你有所帮助。

```
public class TestApp{

    public static void main(String...strings){
        try{
             int num1=30, num2=0;
             int output=num1/num2;
             System.out.println ("Result: "+output);
          }
          catch(Exception e){

              ExceptionHandleCenter.throwException(e,
                      Thread.currentThread().getStackTrace()[1].getClassName(),
                      Thread.currentThread().getStackTrace()[1].getMethodName(),
                      e.getStackTrace()[0].getLineNumber());
          }
    }
}

class ExceptionHandleCenter {

    public static void throwException(Exception e, String fullClassName, String methodName,int lineNumber){

        String info = fullClassName+" method "+methodName+" at line "+lineNumber;

        if(e.getClass().equals(ArithmeticException.class)){
             System.err.println("Airthmetic exception. occurred In "+info);
         }
        if(e.getClass().equals(IllegalArgumentException.class)){
             System.err.println("Provided Argument is illegal.occurred In "+info);
         }
        if(e.getClass().equals(NumberFormatException.class)){
             System.err.println("Number Format Exception. occurred In "+info);
         }
    }
} 
```

# java - 如何断言表达式无法编译

> ID：14235690
> 
> 赞同：7
> 
> 时间：2013-01-09T12:55:27.537
> 
> 标签：java, junit

我编写了一个框架，增加了对其接口进行类型安全调用的可能性。现在，在编写 JUnit 测试时，我想表明编译器现在会检查先前导致运行时错误的特定表达式。

```
// this does not compile, because nameProp is of type Property<String>
Integer name = interface.getProperty(nameProp); 
```

可能最好简单地注释掉该代码并保持原样。我只是想知道是否可以使用一些测试框架来编写类似的东西

```
assertCompilationError() {
     Integer name = interface.getProperty(nameProp);
} 
```

我明确不想自己使用自定义类路径来调用 javac。如果有可能将通用解决方案提取到框架代码中（并捐赠给 JUnit 或 TestNG），那么这样的解决方案也将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:17:17.783

在 JUnit 编译完成之前您不能运行 JUnit，这对于此检查来说为时已晚。

您不能使用库来允许无法编译的代码进行编译，以便您可以检查它是否无法编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:26:36.203

我很好奇你是否可以通过一些 java 脚本语言来实现这一点，我会详细检查 beanshell 和 groovy，也许它们提供了一些你可以使用的东西。

因为据我了解，您可以从您的 java 程序中调用他们的脚本（在您的情况下为 JUnit 测试）。

然而，最重要的问题是：

*   它们是否支持完整的 java 语法/您对场景感兴趣的部分？
*   有没有办法将当前类路径传播到执行的脚本？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:01:25.127

其实你可以：

```
public static void assertCompilationError() {
    try {
          Integer name = (Integer)(Object)interface.getProperty(nameProp);
    } catch (Exception e) {
          //...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:01:09.057

一段时间后，我发现了以下软件：

[http://docs.codehaus.org/display/JANINO/Home](http://docs.codehaus.org/display/JANINO/Home)

看起来应该可以进行某种破解，以便只编译有问题的块。现在，无论如何，我的示例不起作用，因为它还不支持泛型。

# c# - Lucene.Net 无法在空字符串列表上使用 RavenDB 'IN' 运算符解析查询

> ID：14235692
> 
> 赞同：2
> 
> 时间：2013-01-09T12:55:32.170
> 
> 标签：c#, lucene.net, ravendb, iqueryable

我已迁移到 RavenDB 2.0 并正在使用`IN`解析查询时产生错误的运算符编写查询。

我正在使用 an`EmbeddableDocumentStore`来隔离单元测试中的问题。我目前正在运行 RavenDB Embedded 2.0.2230。我已经尝试对 RavenDB.Embedded 1.2.2033-Unstable 运行相同的测试，并且没有报告错误。

被查询的对象是直截了当的：

```
public class Company
{
    public string Name { get; set; }
    public string Country { get; set; }
} 
```

我的设置和查询如下：

```
var documentStore = new EmbeddableDocumentStore { RunInMemory = true };
documentStore.Initialize();

using (var session = documentStore.OpenSession())
{
    var list = new[] { "", "", "" };

    var query = from c in session.Query<Company>()
                where c.Country.In(list)
                select c;

    var companies = query.ToList();
} 
```

查询编译，但在运行时解析查询时收到以下错误：

```
Lucene.Net.QueryParsers.ParseException :
Could not parse modified query:
'@in<Country>:("EMPTY_STRING","EMPTY_STRING",[[EMPTY_STRING]]) '
original was:
'@in<Country>:([[EMPTY_STRING]],[[EMPTY_STRING]],[[EMPTY_STRING]]) ' 
```

如您所见，集合中的最后一项与前面的项的解析方式不同。这似乎是导致问题的原因。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:22:26.743

这似乎是 RavenDB 中的一个错误。实际上有两个错误，一个与您在列表中有多个空字符串时遇到的翻译异常有关，另一个即使只有一个空字符串，`.In()`也不会检索带有空字符串的项目。

Raven 索引空字符串，`[[EMPTY_STRING]]`而不是`""`因为 Lucene 不会接受它。它适用于`.Where(x == "")`，但似乎不适用于`.Where(x.In(new[]{""}))`

我将向他们的错误跟踪器提交问题。谢谢。

**更新** 这已从 RavenDB 2.0.2236-Unstable 开始修复

# python - 如何腌制 scipy.stats 分布（不能腌制 instancemethod 对象）

> ID：14235693
> 
> 赞同：4
> 
> 时间：2013-01-09T12:55:34.677
> 
> 标签：python, scipy, pickle

如何保存 scipy.stats 分布？

例如：

```
a = [scipy.stats.norm(0,1), scipy.stats.norm(0,2)]
with open("distro.pickle", 'w') as f:
    pickle.dump(a, f) 
```

这样做我得到一个`TypeError: can't pickle instancemethod objects`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T13:11:07.297

他们不支持酸洗。“解决”问题的更简单方法是腌制参数，并在取消腌制时创建一个新对象：

```
>>> from collections import namedtuple
>>> Norm = namedtuple('Norm', 'mu variance')
>>> def pickle_norm(n):
...     return pickle.dumps(Norm(*n.args))
... 
>>> def unpickle_norm(s):
...     return scipy.stats.norm(*pickle.loads(s))
... 
>>> s = pickle_norm(scipy.stats.norm(5, 10))
>>> d = unpickle_norm(s) 
```

# c# - 如何在 windows phone7 应用程序中使用 wcf 服务？

> ID：14235695
> 
> 赞同：0
> 
> 时间：2013-01-09T12:55:42.437
> 
> 标签：c#, wcf, windows-phone-7, wcf-binding, wcf-security

我在服务器端使用了这段代码，

```
[OperationContract]        
        [WebInvoke(Method = "POST", UriTemplate = "/UploadData?Name={Name}&Email={Email}&ContactNumber={ContactNumber}&DeviceModel={DeviceModel}&Problem={Problem}&Besttimetocontact={Besttimetocontact}",        
            BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml)]
        NewClsMessage UploadData(string Name, string Email, string ContactNumber, string DeviceModel, string Problem, string Besttimetocontact);

 public NewClsMessage UploadData(string Name, string Email, string ContactNumber, string DeviceModel, string Problem, string Besttimetocontact)
{
            NewClsMessage ObjNewClsMessage = new NewClsMessage();
            try
            {
  str_value = "insert into Estimate(Name,Email,ContactNumber,DeviceModel,Problem,Besttimetocontact) values('" + Name + "','" + Email + "','" + ContactNumber + "','" + DeviceModel + "','" + Problem + "', '" + Besttimetocontact + "')";                 

                OpenConnection();
                sqlCmd.CommandType = CommandType.Text;
                sqlCmd.CommandText = str_value;
                value = sqlCmd.ExecuteNonQuery();
                if (value > 0)
                {
                    ObjNewClsMessage = new NewClsMessage();
                    ObjNewClsMessage.Result = "1";
                    ObjNewClsMessage.Message = "send Successfully";
                }
                else
                {
                    ObjNewClsMessage = new NewClsMessage();
                    ObjNewClsMessage.Result = "0";
                    ObjNewClsMessage.Message = "Free Estimate not send Successfully";
                }
}

 catch (Exception ex)
            {
            }
            return ObjNewClsMessage; 
```

客户端代码是，

```
WebClient webClient = new WebClient();
            webClient.Headers[HttpRequestHeader.ContentType] = "application/xml";
            //  var uri = new Uri("localhost:55666/WcfPostMethod/Service.svc/UploadXml");
            var uri = new Uri("http://localhost:50546/Service1.svc/UploadData");
            StringBuilder postData = new StringBuilder();
            postData.AppendFormat("?{0}={1}", "Name", HttpUtility.UrlEncode("hi"));
            postData.AppendFormat("&{0}={1}", "Email", HttpUtility.UrlEncode("hi@gmail.com"));
            postData.AppendFormat("&{0}={1}", "ContactNumber", HttpUtility.UrlEncode("56898"));
            postData.AppendFormat("&{0}={1}", "DeviceModel", HttpUtility.UrlEncode("E4376"));
            postData.AppendFormat("&{0}={1}", "Problem", HttpUtility.UrlEncode("Repair"));
            postData.AppendFormat("&{0}={1}", "Besttimetocontact", HttpUtility.UrlEncode("9am"));            
            webClient.Headers[HttpRequestHeader.ContentLength] = postData.Length.ToString();
            webClient.UploadStringCompleted += new UploadStringCompletedEventHandler(webClient_UploadStringCompleted);
            webClient.UploadStringAsync(uri, "POST", postData.ToString()); 
```

在这里，我在服务器端收到错误..在客户端应用程序中发布数据意味着，在服务器端数据获取空（null）值。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:32:55.463

你能告诉我们你的 wcf 服务在没有你的客户端的情况下是否可以工作？

这是一个不错的工具（Storm 或 WCF Storm）

[风暴](http://storm.codeplex.com/)

你甚至可以找到一个样本：

[使用 Windows Phone 7 应用程序使用 WCF 服务](http://beyondrelational.com/modules/12/tutorials/382/tutorials/7684/getting-started-with-windows-phone-7-part-6-consume-wcf-service-with-windows-phone-7-application.aspx)

# ios - 苹果是否对基于用户身份验证的应用程序收费

> ID：14235696
> 
> 赞同：-3
> 
> 时间：2013-01-09T12:55:45.533
> 
> 标签：ios, app-store, app-store-connect

我们正在 appstore 提交过程中，最近收到了来自苹果的以下评论。该应用程序是基于*免费*身份验证的，即用户需要输入用户名和密码。

审查是……

> **我们已开始审核您的应用，但无法继续，因为我们需要有关您的应用的更多信息。请尽早查看以下问题并提供尽可能详细的信息作为回应。您可以提前提供的信息越多，我们就能越早完成您的审核。
> 
> 1）用户如何获取账号？与帐户相关的费用是多少？
> 
> 2) 它是基于订阅的吗？还是一次性一次性付款？
> 
> 3）这在其他平台上可用吗？
> 
> 4) 用户是按设备付费还是按用户付费？
> 
> 5) 移动访问是否需要额外收费？**

所以我有几个疑问，因为这是我们的新版本，之前上传到应用商店的应用的 UI 更改很少，但是苹果在第一次提交应用商店时没有询问这些信息......

1.  我们是否需要向他们提供所有费用/用户订阅相关信息？
2.  苹果是否对所有基于用户身份验证的应用程序都进行了这样的处理？苹果询问此类业务相关信息的目的是什么？
3.  我们是否需要向苹果付款，以便我们的客户可以使用我们的服务......？

问候

帕吉伊123

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:02:35.903

如果您不向用户收费，只需说明这一点，Apple 可能会很高兴。我猜苹果会问这个，因为他们希望看到你使用他们的应用内购买系统（如果你使用付费订阅）。我的一个（完全免费）应用程序包括用户身份验证，他们所要求的只是一个演示帐户来测试功能。回答标题问题：不，Apple 不对基于用户身份验证的应用程序收费。

关于第一个问题（“用户如何获得账户？”）：如果您的 App 不提供此类功能，您应该提供指向处理此任务的网站的链接。

一般来说：SO 可能不是问这个问题的最佳地点，但 Apple 支持肯定是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:06:18.627

> 1.  我们是否需要向他们提供所有费用/用户订阅相关信息？

是的。您必须遵守应用商店规则。

> 1.  苹果是否对所有基于用户身份验证的应用程序都进行了这样的处理？苹果询问此类业务相关信息的目的是什么？

是的，他们对所有基于身份验证的应用程序都这样做。您必须提供一种从应用程序创建帐户的方法。

> 1.  我们是否需要向苹果付款，以便我们的客户可以使用我们的服务......？

不

# ajax - 如何停止循环，直到响应进入 jquery？

> ID：14235701
> 
> 赞同：0
> 
> 时间：2013-01-09T12:55:48.793
> 
> 标签：ajax, jquery

我有这样的代码。循环长度大于 100。

```
$('.check_box_ping:checked').each(function(i, obj) {
    $.post(
        "mass_ping.php",
        "ping", 
        function(response) {
        }
    );
}); 
```

现在`$.post()`同时发生 100 个呼叫。我想在从服务器`$.post()`获得前一个响应后依次执行每个。`$.post()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:16:14.227

使用 a`deferred object`你可以链接所有的 ajax 调用，在一些链接`pipe()`的方法中返回一个 Promise（参见下面的控制台输出）

**标记和js**

```
<body>
    <input type="checkbox" checked />
    <input type="checkbox" checked />
    <input type="checkbox" checked />
    <input type="checkbox" checked />  
</body>

<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script>
function doRequest() {
    return $.post("script.php").done(function(response) {
       console.log('Loaded in %d seconds', response);
    });
}

$(document).ready(function(){

    var dfd   = $.Deferred(),
        chain = dfd;

    $('input:checked').each(function() {
        chain = chain.pipe(function() {
            return doRequest().promise();
        });
    });

    chain.done(function() { 
       console.log('done')
    });

    return dfd.resolve();
});
</script> 
```

**脚本.php**

```
<?php
   $seconds = rand(2, 5); 
   sleep($seconds);
   header("Content-type: text/html");
   echo($seconds);
?> 
```

* * *

`Sleep()`仅用于模拟响应的随机延迟。在 javascript 控制台上，您应该会看到如下内容：

![输出](../Images/bc4910a8e6186168074139d68574fc35.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:20:34.793

暂停每个循环的唯一方法是使帖子同步，这通常是一种非常糟糕的用户体验（它会挂起浏览器）。

相反，我建议您重组循环，以便在完成上一篇文章后进行下一次迭代：

```
(function() {

    var checked = $('.check_box_ping:checked');
    var index = 0;

    function next() {
        if (index < checked.length ) {
            var item = checked.eq(index++);
            // use item here for your post
            $.post({...}, function(response) {
                // do your normal handling of the response here
                ...
                // now kick off the next iteration of the loop
                next();
            });
        }
    }
    next();

})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:57:56.427

你可以做两件事

1.  更改您的代码，以便`post`从您的第一篇文章的返回函数中调用下一个。这将需要在您当前的循环中进行一些更改，但会保持一切顺利运行
2.  更快，但很脏，是使帖子同步。您可以在这个问题中了解如何：[如何使 jquery "$.post" 请求同步](https://stackoverflow.com/questions/5821380/how-to-make-a-jquery-post-request-synchronous)。我建议不要这样做，因为它会在加载期间削弱您的页面。

# iphone - uiwebview 显示 html 真的很小...？

> ID：14235705
> 
> 赞同：0
> 
> 时间：2013-01-09T12:56:07.110
> 
> 标签：iphone, html, uiwebview

我在我的 iPhone 应用程序中使用 uiwebview。我将它与本地 html 文件绑定，但它不能正确显示我。我的 html 文件代码

```
<html>
<head>
    <title></title>
    <style type="text/css">
        h1 {font-family:arabic-indic;font-size:14px;font-weight:bold}       </style>
</head>
<body>
    <table align="center" border="0" width="100%">
        <tbody>
            <tr>
                <td>
                    <h1>
                        First Name</h1>
                </td>
                <td>
                    <h1>
                        9898337874</h1>
                </td>
            </tr>
            <tr>
                <td>
                    <h1>
                        Last Name</h1>
                </td>
                <td>
                    <h1>
                        mjain@jkvsolutions.com</h1>
                </td>
            </tr>
            <tr>
                <td>
                    <h1>
                        Image</h1>
                </td>
                <td>
                    <img alt="" src="http://wac.450f.edgecastcdn.net/80450F/929jackfm.com/files/2013/01/some-ecards-2.jpg" style="width: 90px; height: 90px; " /></td>
            </tr>
        </tbody>
    </table>
</body> 
```

当我在本地 PC 浏览器中打开相同的文件时，它会在 locla 浏览器中正确显示。但使用 iphone uiwebview ![在此处输入图像描述](../Images/7d4476ad0bec83238ae2a584ef0711e3.png)

我在应用程序中加载它的代码

```
 [tblwebview loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle]
                                                                      pathForResource:@"htmlfile" ofType:@"htm"]isDirectory:NO]]];
for (id subview in tblwebview.subviews)
    if ([[subview class] isSubclassOfClass: [UIScrollView class]])
        ((UIScrollView *)subview).bounces = NO; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T05:35:27.230

如果您设置了属性“缩放页面以适合”，请取消选中它，然后重试。它对我的工作帮助很大，但是，我确实必须花费大量时间完善“杀手级”CSS 才能完全按照我的需要显示内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T05:49:22.980

在标题中添加以下元标记。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0"> 
```

# javascript - 使用 javascript 在表单值周围加上引号

> ID：14235712
> 
> 赞同：0
> 
> 时间：2013-01-09T12:56:35.350
> 
> 标签：javascript, json

我想传递这个 JavaScript 变量：

```
var dateString =  $('input[name="date"]').val()  ; 
```

在下面的 JSON 上获取代码：

```
$.getJSON('DisplayMap.php', {runDate1 : dateString},  function(data) {
  for (var i in data.b) {
    output.push(new google.maps.LatLng(data.b[i].Ya, data.b[i].Za));
  }
  alert(output);
}); 
```

似乎 json 会接受这个：`{runDate1 : '2013-01-06'}`

但不是当它通过这样的变量时`{runDate1 : dateString}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:00:22.327

尝试

```
var dateString =  $('input[name="date"]').val().toString(); 
```

# ios - 将用户位置传递给 MKMapItem

> ID：14235717
> 
> 赞同：1
> 
> 时间：2013-01-09T12:56:52.017
> 
> 标签：ios, objective-c, xcode, facebook-graph-api, mkmapitem

我已经显示了用户位置，我想在`MKMApItem`. 我知道在中显示的方式`MKMapItem`..但是我不能将这些获取的位置传递给 MapItem 类..你能帮我传递这些值吗

```
FBRequest *friendRequest = [FBRequest requestForGraphPath:@"me/friends?field=name,location,hometown"];
[ friendRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error){
    NSArray *data = [result objectForKey:@"data"];

    for (FBGraphObject<FBGraphUser> *friend in data) {
        NSLog(@"%@:%@", [friend name ],[friend.location objectForKey:@"name"]); 
```

我的输出是：

```
2013-01-09 17:47:57.096 istb[296:1a03] Athish:Cochin, Kerala
2013-01-09 17:47:57.096 istb[296:1a03] Anges:Mumbai
.
.
.
.
2013-01-09 17:47:57.097 istb[296:1a03] Raja:Delhi
2013-01-09 17:47:57.097 istb[296:1a03] Rajesh:Canada 
```

我应该如何将这些位置传递给`MKMapItem`课堂

```
- (IBAction)onClick:(id)sender {
Class mapItemClass=[MKMapItem class];

if(mapItemClass &&[mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
{...}} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:13:25.097

我回答了如何执行多个地理编码请求以回应您的其他[问题](https://stackoverflow.com/questions/14195706/multiple-locations-in-google-map-mkmapitem/14198584#14198584)，因此我将避免在此重复该叙述。

底线，我只是建议你尝试：

```
FBRequest *friendRequest = [FBRequest requestForGraphPath:@"me/friends?field=name,location,hometown"];
[friendRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSArray *friends = [result objectForKey:@"data"];
    [self geocodeFriendRequestResponse:friends];
}]; 
```

然后您可以调整[地图上的多个位置中提供的答案（使用 MKMapItem 和 CLGeocoder）](https://stackoverflow.com/questions/14195706/multiple-locations-in-google-map-mkmapitem/14198584#14198584)：

```
- (void)geocodeFriendRequestResponse:(NSArray *)friends
{
    CLGeocoder *geocoder = [[CLGeocoder alloc]init];
    NSMutableArray *mapItems = [NSMutableArray array];

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    NSOperation *finalCompletionOperation = [NSBlockOperation blockOperationWithBlock:^{
        [MKMapItem openMapsWithItems:mapItems launchOptions:nil];
    }];

    NSOperation *previousCompletionHandler = nil;

    for (FBGraphObject<FBGraphUser> *friend in friends)
    {
        NSString *address = [friend.location objectForKey:@"name"];

        // create a block for the geocode request itself

        NSBlockOperation *geocodeRequest = [[NSBlockOperation alloc] init];

        // make this geo request dependent upon the completion of the prior geocode request completion block

        if (previousCompletionHandler) [geocodeRequest addDependency:previousCompletionHandler];

        // create a block for the geocode request completion block

        NSBlockOperation *geocodeCompletionHandler = [[NSBlockOperation alloc] init];

        // The final `openMapsWithItems` is contingent on the completion of this geocode request completion block

        [finalCompletionOperation addDependency:geocodeCompletionHandler];

        // let's initiate the geocode request

        [geocodeRequest addExecutionBlock:^{
            [geocoder geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {

                // upon completion, we'll initiate the geocode request completion block

                [geocodeCompletionHandler addExecutionBlock:^{
                    if (error)
                        NSLog(@"%@", error);
                    else if ([placemarks count] > 0)
                    {
                        CLPlacemark *geocodedPlacemark = [placemarks objectAtIndex:0];
                        MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:geocodedPlacemark.location.coordinate
                                                                       addressDictionary:geocodedPlacemark.addressDictionary];
                        MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
                        [mapItem setName:geocodedPlacemark.name];

                        [mapItems addObject:mapItem];
                    }
                }];

                [queue addOperation:geocodeCompletionHandler];
            }];
        }];

        [queue addOperation:geocodeRequest];

        previousCompletionHandler = geocodeCompletionHandler;
    }

    [queue addOperation:finalCompletionOperation];
} 
```

此例程是确保多个地理编码请求不会同时发生的复杂方法。这背后的逻辑更详细地解释了[地图上的多个位置（使用 MKMapItem 和 CLGeocoder）](https://stackoverflow.com/questions/14195706/multiple-locations-in-google-map-mkmapitem/14198584#14198584)。

# silverlight - MVVM 按钮禁用

> ID：14235720
> 
> 赞同：0
> 
> 时间：2013-01-09T12:57:04.573
> 
> 标签：silverlight

我正在使用 SIlverLight RelayCommand 来启用和禁用按钮。根据某些情况我想禁用一个按钮，请建议我如何禁用一个按钮

以下对于初始加载工作正常，

```
 public RelayCommand BackClickCommand
    {
        get
        {
            if (_backClickCommand == null)
            {
                _backClickCommand = new RelayCommand(() =>
                {
                    step--;
                    if(step<1)
                   // code need to diable this button
                }, () => this.CanExecute());
            }

            return _backClickCommand;

        }
    }
    int step=2;

    public bool CanExecute()
    {
        if(step>0)
        return enabled;
        else false;
    } 
```

在我的代码中我正在做的一些地方

```
 enabled = false; 
```

请建议我如何禁用我的按钮

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:00:18.957

假设您要像这样绑定 Xaml：

```
<Button Command="{Binding BackClickCommand}" /> 
```

您需要做的就是提醒 UI 再次检查绑定：

```
enabled = false;
PropertyChanged(this, new PropertyChangedEventArgs("BackClickCommand")); 
```

这将使 UI`BackClickCommand`再次检查并查看它是否已更改，从而禁用该按钮。

有关完整代码示例，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.95%29.aspx)。

编辑：这可能是一段代码：

```
int step = 2;

public RelayCommand BackClickCommand
{
    get
    {
        if (_backClickCommand == null)
        {
            _backClickCommand = new RelayCommand(() =>
            {
                step--;
                PropertyChanged(this, new PropertyChangedEventArgs("BackClickCommand")); 
            }, () => this.CanExecute());
        }

        return _backClickCommand;

    }
}

public bool CanExecute()
{
    return this.step > 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:24:50.780

每当步长值更改时，您必须通知命令已更改，以便再次评估 CanExecute。

正如您所说，启用将在代码中的某处进行评估。

您的代码可能更不一样：

```
int step=2;

public RelayCommand BackClickCommand
{
    get
    {
        if (_backClickCommand == null)
        {
            _backClickCommand = new RelayCommand(() =>
            {
                step--; // Your logic
                OnPropertyChanged("BackClickCommand"); // Notify the change!
            }, () => this.CanExecute());
        }

        return _backClickCommand;
    }
}

public bool CanExecute()
{
    return enabled;
} 
```

# android - 在多点触控中检测左手和右手

> ID：14235723
> 
> 赞同：0
> 
> 时间：2013-01-09T12:57:08.093
> 
> 标签：android, math, touch, multiscreen

我的程序处理多点触控。我应该区分我的右手和左手。

要将 x,y 接触点保存在我有的数组中

```
public boolean onTouchEvent(MotionEvent event) 
{
int pointerCount = event.getPointerCount();

if (pointerCount > MAX_TOUCHPOINTS)
{
    pointerCount = MAX_TOUCHPOINTS;
}

xval = new int[pointerCount];
yval = new int[pointerCount];

for (int i = 0; i < pointerCount; i++)
{
    xval[i]= (int) event.getX(i);
    yval[i]= (int) event.getY(i);
}

Canvas c = getHolder().lockCanvas();
.....
.....

} 
```

为了确定左手和右手，我有

```
private String DetermineTouch()
{
String message="" ;
int xcount1=0,ycount=0,xcount2=0;
int ylargest=yval[0];
int xlargest=xval[0];
int xlowest=xval[0];

// The thumb has the highest y
for(int i=0;i<yval.length;i++)
{
 if(yval[i]> ylargest)
 {
     ylargest=yval[i];
     ycount=i;
 }

 // if the thumb is of my left hand x is the largest among the points
 for(int j=0;j<xval.length;j++)
 {
     if(xval[j]> xlargest)
     {
         xlargest=xval[j];
         xcount1=j;
     }
 }

// X is the smallest if the thumb is of my right hand

 for(int k=0;k<xval.length;k++)
 {
     if(xval[k]< xlowest)
     {
         xlowest=xval[k];
         xcount2=k;
     }
 }

 //determining left or right hand

 if(xval[ycount]==xval[xcount1]){
     message="left";
 }
 else if (xval[ycount]==xval[xcount2]){
     message="right";
 }
}

return message;
} 
```

如果我将手正常放在屏幕上（所有五个手指），这将起作用。但是，如果我尝试将手放在任何角度，程序就会失败。（例如让我的手更向右或更向左倾斜）有没有更好的方法来检测左右手之间的关系？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:17:37.187

我并没有真正了解您将在哪里使用该代码段，但我只需获取 X1,Y1 和 X2,Y2 并检查 X1 > X2 是否；然后采取相应的行动。

请记住，Android 不使用屏幕中心的 0,0 正常笛卡尔轴。

**编辑：**检查手指的大小？ [Android：通过手指触摸屏幕测量/检测覆盖区域（不仅仅是触摸坐标）](https://stackoverflow.com/questions/3422400/android-measure-detect-covered-area-by-a-finger-touch-on-screen-not-only-touch)

我不知道您的应用程序应该做什么，但我会要求用户“保存”左手和右手的手部配置，并将每个手指的大小保存在某处；然后，每当他触摸屏幕时，您就可以轻松地（通过大小和顺序）分辨出哪只手和哪只手指。

# java - Junit4 单元测试在 Eclipse 中运行，使用 java.util.logging - 看不到日志输出

> ID：14235726
> 
> 赞同：5
> 
> 时间：2013-01-09T12:57:10.890
> 
> 标签：java, eclipse, maven-3, junit4, java.util.logging

在eclipse下使用Maven构建系统。

我刚刚按项目从使用 Apache Commons Logging 切换到 Java Utils Logging，因为它必须生活在 Java Utils Logging 是主要记录器（Google App Engine）的环境中，而我使用的其他库已经使用它（Restlet） . 我在 Eclipse 中喜欢的功能之一是能够右键单击标有 @test 的函数并选择“Run as Junit Test”。当我现在这样做时，我看不到任何日志记录输出。我创建了一个文件

src/test/java/resources/logging.properties

```
handlers = java.util.logging.ConsoleHandler

.level=INFO
my.great.package.level=FINE
java.util.logging.ConsoleHandler.level = FINE 
```

但是在 Eclipse 中运行测试时我仍然什么也没看到。以前它可以与公共日志记录和 log4j 完美配合。我究竟做错了什么？

提前致谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:07:32.187

我不确定 Java Logging 是否可以像这样自动检测配置文件`log4j`。

您是否尝试过为测试运行程序指定配置文件的位置，例如：

```
-Djava.util.logging.config.file=path/to/logging.properties 
```

您可以通过 Eclipse Run Configurations 对话框中的 VM Arguments 文本框将此添加到系统属性中。

您还可以`maven-surefire-plugin`使用相同的系统属性配置 ，以便在构建期间获取日志记录 - 如果需要。

# breeze - Breeze 不会扩展多个导航属性路径？

> ID：14235727
> 
> 赞同：9
> 
> 时间：2013-01-09T12:57:13.667
> 
> 标签：breeze

如果我使用 NorthindModel 运行以下查询，则来自微风示例的 NorthwindDataContext 仅扩展第一个导航属性。所有其他返回 null：

```
 var query = EntityQuery.from("OrderDetails")
        .where("OrderID", "==", 11069)
        .expand("Order.Customer", "Order.Employee");
    manager.executeQuery(query).then(querySucceeded).fail(queryFailed);

    function querySucceeded(data){
         var customer = data.results[0].Order().Customer();
         var employee = data.results[0].Order().Employee(); // returns null!!!!!
    } 
```

如果我更改扩展参数列表中的顺序，则将客户设置为空：

```
 var query = EntityQuery.from("OrderDetails")
        .where("OrderID", "==", 11069)
        .expand("Order.Employee", "Order.Customer");
    manager.executeQuery(query).then(querySucceeded).fail(queryFailed);

    function querySucceeded(data){
         var customer = data.results[0].Order().Customer(); // returns null!!!!!
         var employee = data.results[0].Order().Employee();         } 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T18:43:05.357

'expand' 方法采用单个参数，该参数可以是数组或逗号分隔的字符串。你给了它两个论据。因此，请尝试以下操作。

var query = EntityQuery.from("OrderDetails") .where("OrderID", "==", 11069) ***.expand(["Order.Customer", "Order.Employee"]);***

注意 []。

# php - 在windows上安装php扩展geoip

> ID：14235729
> 
> 赞同：2
> 
> 时间：2013-01-09T12:57:17.293
> 
> 标签：php, pear, pecl, geoip

当我尝试通过 PECL 安装 geoip ext 时，我得到了这个：

```
C:\Users\admin>pecl install geoip
No releases available for package "pear.php.net/geoip"
install failed 
```

怎么做才对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-01T04:38:57.153

预编译的 DLL 可在[http://windows.php.net/downloads/pecl/releases/geoip/](http://windows.php.net/downloads/pecl/releases/geoip/)

这些 DLL 涵盖 PHP 版本 5.3、5.4 和 5.5，包括线程安全 (TS) 和非线程安全 (NTS)。PHP 5.3 和 5.4 是针对 x86 上的 VC9 编译的，而 PHP 5.5 对 x86 和 x64 都使用 VC11。`phpinfo`您可以确定在 PHP 的输出中使用哪个。

dll 应该放在 PHP 的扩展目录中 - 这取决于安装。在 phpinfo 的输出中查找“扩展名”，告诉您从哪个目录扩展名加载。最后，在 php.ini 中，通过`extension=php_geoip.dll`

geoip 数据库可通过 Maxmind 的网站获得。geolite 的免费版本可在[http://dev.maxmind.com/geoip/legacy/geolite/ 获得](http://dev.maxmind.com/geoip/legacy/geolite/)- 请务必将 dat 放在 apache 的 bin 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:29:28.117

[Windows 的PECL geoip 扩展](http://windows.php.net/downloads/pecl/releases/geoip/1.0.8/)解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:29:51.153

Windows PHP 网站指出：

“Windows 的 PECL 扩展正在开发中。pecl 网站上的界面很可能会更新为直接从该网站提供 Windows DLL 下载。与此同时，可以在此处找到一些扩展。”

[您可以在http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)下找到扩展名

# c# - 使用 ref 参数通过委托传递变量

> ID：14235730
> 
> 赞同：0
> 
> 时间：2013-01-09T12:57:24.943
> 
> 标签：c#, events, delegates, invoke

有这样的代表：

```
public delegate void GraphInit(ref DataMedia media);
public delegate void GraphStop(ref DataMedia media); 
```

我想这样使用：

```
 void VideoRenderProcess(object sender, VideoRenderingArgs r_args)
    {
        DataMedia obj_mdata = sender as DataMedia;

        switch (obj_mdata.state)
        {
            case GraphState.Running:
                this.Dispatcher.Invoke(new GraphStop(ref obj_mdata));
                break;
            ......
        }
    } 
```

`VideoRenderingArgs`自行设计的类在哪里：

```
public class VideoRenderingArgs
{
    public string uri { get; set; }
}
// it's just one string, of course I'm planning to add many other details
// which relate to video, but it's other story 
```

`GraphStop()`方法是：

```
 void GraphStop(ref DataMedia media)
    {
        if (media.mre_demux_conf != null) media.mre_demux_conf.WaitOne(2000);

        lock (this)
        {
            if (media.i_main_control != null)
            {   
                media.i_main_control.Stop();
                media.state = GraphState.Stopped;
            }
        }

        GraphClean();
    } 
```

我收到错误：

> 'obj_mdata' 是一个“变量”，但在使用 `ref`和不使用时都像“方法”一样使用。

如何在 C# 中做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:03:02.333

不要使用 new 创建委托。只需将您想要的方法分配给委托变量。

如果你尝试这个会发生什么：

```
this.Dispatcher.Invoke(() => GraphStop(ref obj_mdata)) 
```

此外，如果您的委托与同一范围内的方法具有相同的名称，您将遇到麻烦！

[编辑] 不幸的是，以上仅适用于 .Net 4.5 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:20:45.730

已找到解决方案：

```
 public delegate void DGraphInit(ref DataMedia media);
        ...
        if (obj_mdata.state == GraphState.Running)
        {
            object[] data = { obj_mdata };
            DGraphInit delegate2call = new DGraphInit(GraphInit);
            this.Dispatcher.Invoke(delegate2call, data);
        } 
```

# javascript - 循环javascript多选表单元素

> ID：14235732
> 
> 赞同：0
> 
> 时间：2013-01-09T12:57:28.763
> 
> 标签：javascript, forms, loops, post

我正在尝试循环多选复选框的值，以便我可以拆分数组并将它们作为一个字符串发布。在 PHP 中，你可以说：

```
implode(",", $_POST['usage']) 
```

得到一个逗号分隔的字符串。我如何在 javascript 中或使用 jquery 获得相同的源代码。

```
<input type="checkbox" name="usage[]" id="usage-ContentManagement" value="Content Management">
<input type="checkbox" name="usage[]" id="usage-Personal" value="Personal">
<input type="checkbox" name="usage[]" id="usage-Business" value="Business">
<input type="checkbox" name="usage[]" id="usage-SmallBusiness" value="Small Business"> 
```

我已经尝试过`$('[name="usage[]"]').val()`，但即使未选中复选框，它也会始终提供“内容管理”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:59:08.440

遍历复选框并将它们的值存储在一个数组中。然后“内爆”这个数组。

```
var arr = [];
$('[name="usage[]"]:checked').each(function(){
    arr.push(this.value);
});
alert(arr.join(',')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:05:33.577

试试[`$.serializeArray()`](http://api.jquery.com/serializeArray/)。

```
var values = $('[name="usage[]"]').serializeArray().map(function(kvp) {
    // kvp has the form {name:..., value:...}
    return kvp.value;
}).join(','); 
```

优点是您可以将它用于任何表单元素：复选框、单选框、选择、文本输入……`$.serializeArray`确保检索到适当的值。

# ios - 无法让 CALayer 在 UIView 中显示

> ID：14235733
> 
> 赞同：0
> 
> 时间：2013-01-09T12:57:28.833
> 
> 标签：ios, uiview, core-animation, calayer, caanimation

我有一个简单的单视图应用程序，由于某种原因，我无法`CALayer`在应用程序的`UIView`. 视图的背景颜色是正确的，但其中的图像`CALayer`不可见。我已经在调试器中逐步完成了代码，并且确定图像正在正确加载。如果`CALayer`我不使用 a而不是使用 a ，那么`UIImageView`一切都按您的预期工作。

这是我的`UIViewController`子类中的代码。你看到我做错了吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor darkGrayColor];

    CALayer* cardLayer = [self layerForCard];

    [self.view.layer addSublayer:cardLayer];
}

- (CALayer *)layerForCard
{
    UIImage* cardImage = [UIImage imageNamed:@"card1.jpg"];
    CGSize cardSize    = cardImage.size;
    CGRect cardRect    = CGRectMake(.0, .0, cardSize.width, cardSize.height);

    // Container Layer
    CALayer *containerLayer = [CALayer layer];
    containerLayer.bounds   = cardRect;
    containerLayer.opacity  = 1.0;

    // Image Layer
    CALayer *imageLayer = [CALayer layer];
    imageLayer.bounds = cardRect;
    imageLayer.contentsGravity = kCAGravityResizeAspectFill;
    imageLayer.contents = CFBridgingRelease(cardImage.CGImage);

    [containerLayer addSublayer:imageLayer];

    return containerLayer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:43:06.660

要么设置正确的锚点，要么使用

```
containerLayer.frame = cardRect;
..
imageLayer.frame = cardRect; 
```

代替

```
containerLayer.bounds = cardRect;
..
imageLayer.bounds = cardRect; 
```

# android - 如何为 Android WebView 设置最小高度？

> ID：14235734
> 
> 赞同：2
> 
> 时间：2013-01-09T12:57:32.747
> 
> 标签：android, android-layout, android-webview, android-view

我正在使用多个 Web 视图并将其添加到布局中，我的结构是这样的

线性布局
|
|----------------|
   网页浏览
|----------------|
   网页浏览
|----------------|
   网页浏览
|----------------|

我想为 weview 设置最小高度，以便所有单元格看起来都相似。

我试过了

```
setMinimumHeight(int minHeight) 
```

但它不起作用。我也检查过

```
cellLayout.addView(mWebview, new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 80)); 
```

它工作得很好，但它的值限制为 80。

如果 HTML 内容大于大小，那么它将显示滚动。

所以我正在寻找最小高度，所以如果内容超过最小高度，它会自动扭曲内容。

如何设置 WebView 的最小高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:03:00.823

您可以使用以下代码进行尝试。您可以将以下内容放在`onPageFinished`WebView 的事件中，它为我完成了在加载 html 内容后修复对话框高度的工作。

```
public void onPageFinished(WebView view, String url) {
    ....
    webView.setOnTouchListener(new View.OnTouchListener() {
      @Override
      public boolean onTouch(View v, MotionEvent event) {
        if (webView.getHeight() < currentHeight) {
          currentHeight = webView.getHeight();
        }
        final LayoutParams params = webView.getLayoutParams();
        params.height = currentHeight;
        webView.setLayoutParams(params);
        return false;
      }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T07:31:48.303

```
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int height = getMeasuredHeight();
    int parentHeight = 0;
    if (getParent() != null && getParent() instanceof ViewGroup) {
        parentHeight = ((ViewGroup) getParent()).getHeight();
    }
    if (height < parentHeight) {
        setMeasuredDimension(getMeasuredWidth(), parentHeight);
    }
} 
```

我和你遇到了同样的问题，我就这样解决了。希望它可以帮助你。您只需要在 WebView 中覆盖 onMeasure 函数并将 parentHeight 替换为您需要的最小高度。

# oracle - 使用分隔符 oracle 进行分组

> ID：14235745
> 
> 赞同：0
> 
> 时间：2013-01-09T12:58:11.047
> 
> 标签：oracle, stringtokenizer

我有格式的数据

数据

```
column1 column2
abcd    ~123~abd~ 
```

第 2 列中的数据由 ~ 分隔

输出应采用两行格式

```
column1 column2
abcd    123
abcd    abd 
```

可以请一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:54:48.120

Oracle 没有内置的字符串分词器，但构建我们自己的很容易。有几种不同的解决方案（在 SO 和更广泛的互联网上），但我将使用一个函数，`string_tokenizer()`我在[另一个答案](https://stackoverflow.com/a/3142795/146325)中发布了一些。

```
with data as ( select column1
                      , trim(both '~' from column2) as column2
                from your_table )
select data.column1
       , t.column_value
from data
     , table ( string_tokenizer (data.column2, '~'))t; 
```

* * *

顺便说一下，TRIM() 调用是删除前导和尾随实例所必需的`~`（尽管也许标记器函数可以处理它。嗯......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:55:00.673

样本数据为

```
SQL> select * from your_table;

COLUMN1              COLUMN2
-------------------- --------------------
abcd                 ~123~abd~
foo                  ~test~test2~
foo2                 ~test~ 
```

示范条款（10g+）：

```
SQL> with foo as (select rownum id, column1, column2, length(regexp_replace(column2, '[^~]', ''))-1 elem_cnt
  2                 from your_table)
  3  select column1, elem
  4    from (select column1, elem, f
  5            from foo
  6           model partition by(id)
  7                 dimension by(0 as f)
  8                 measures(column1, column2, elem_cnt,
  9                          cast('' as varchar2(4000)) elem)
 10                 rules (elem [for f from 0 to elem_cnt[0]-1  increment 1]
 11                               = substr(column2[0], instr(column2[0], '~', 1, cv(f)+1) + 1,
 12                                        instr(column2[0], '~', 1, cv(f)+2) - instr(column2[0], '~', 1, cv(f)+1) - 1),
 13                        column1[any]  =  column1[0]))
 14   order by f;

COLUMN1              ELEM
-------------------- --------------------
abcd                 123
abcd                 abd
foo                  test
foo                  test2
foo2                 test 
```

或 11g 递归子查询分解：

```
SQL> with data (id, column1, column2, elem, elem_cnt, curr_elem)
  2  as (select rownum id, column1, column2,
  3             substr(column2, instr(column2, '~') + 1,
  4                    instr(column2, '~', 1, 2) - instr(column2, '~') - 1)  elem,
  5             length(regexp_replace(column2, '[^~]', ''))-1 elem_cnt,
  6             1 as curr_elem
  7        from your_table
  8      union all
  9      select rownum id, column1, column2,
 10             substr(column2, instr(column2, '~', 1, elem_cnt) + 1,
 11                    instr(column2, '~', 1, elem_cnt+1) - instr(column2, '~', 1, elem_cnt) - 1)  elem,
 12             length(regexp_replace(column2, '[^~]', ''))-1 elem_cnt,
 13             curr_elem + 1
 14        from data
 15       where curr_elem < elem_cnt)
 16  select column1, elem
 17    from data
 18   order by column1, curr_elem;

COLUMN1              ELEM
-------------------- --------------------
abcd                 123
abcd                 abd
foo                  test
foo                  test2
foo2                 test 
```

# ios - 应用内自动更新订阅演练

> ID：14235747
> 
> 赞同：3
> 
> 时间：2013-01-09T12:58:14.993
> 
> 标签：ios, objective-c, in-app-purchase, auto-renewing

我正在努力制定 iOS 上自动更新订阅的工作流程。甚至不清楚我是否需​​要服务器来执行此操作。我只有一种产品 - 每月订阅。让这个工作的步骤是什么？哪里有步行道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:45:08.393

第一件事。如果您的应用程序不像杂志那样是期刊，那么您应该远离 ARS（自动更新订阅）。Apple 可能会拒绝它并坚持您使用 NRS（非续订订阅）。

为了回答您的问题，我的两个最佳资源是[Apple 的验证应用内购买收据](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html#//apple_ref/doc/uid/TP40008267-CH4-SW2)和本指南[使用 PHP 和 cURL 从您的服务器验证收据](http://phpriot.com/articles/verifying-app-store-receipts-php-curl)。

基本上，如果您使用 NRS，您将需要自己的服务器。但是，如果您正在执行您所询问的 ARS，则不必*使用*自己的服务器。只是为了更好的安全性而推荐。如果您不使用自己的服务器并且直接从应用程序进行验证，则必须将您`shared secret`的应用程序包含在可能会被嗅出的应用程序中。此外，您更容易受到黑客网络通信的攻击，以欺骗您的应用程序认为用户购买了订阅。

# list - 升序中的连续子列表

> ID：14235750
> 
> 赞同：5
> 
> 时间：2013-01-09T12:58:27.413
> 
> 标签：list, haskell, sequence

给定

`xs = [1,2,3,4,6,7,9,10,11]`

我的目标是返回

`[[1,2,3,4],[6,7],[9,10,11]]`

我以为我可以这样做：

`groupBy (\x y -> succ x == y) xs`

但这会返回：

`[[1,2],[3,4],[6,7],[9,10],[11]]`

一点点搜索从 Haskell Data.List 建议[页面](http://www.haskell.org/haskellwiki/List_function_suggestions#Generalize_groupBy_and_friends)返回以下内容。

```
groupBy                 :: (a -> a -> Bool) -> [a] -> [[a]]
 groupBy rel []          =  []
 groupBy rel (x:xs)      =  (x:ys) : groupBy rel zs
   where (ys,zs) = groupByAux x xs
         groupByAux x0 (x:xs) | rel x0 x = (x:ys, zs)
           where (ys,zs) = groupByAux x xs
         groupByAux y xs = ([], xs) 
```

他们给出的例子之一正是我正在寻找的：

```
groupBy (\a b -> a+1 == b) [1,2,3,4,6]
[[1,2,3,4],[6]] 
```

所以我的问题......有没有另一种方法来解决这个问题，而不是重新定义`groupBy`，因为它看起来有点戏剧化？

编辑...

我决定按如下方式实施：

```
pattern :: (Enum a, Eq a) => (a -> a) -> [a] -> [[a]]
pattern f = foldr g []
  where g a [] = [[a]]
        g a xs | f a == head (head xs) = (a : head xs): tail xs
               | otherwise = [a]:xs 
```

这允许这样的事情：

```
*Main Map> pattern succ "thisabcdeisxyz"
["t","hi","s","abcde","i","s","xyz"]
*Main Map> pattern (+ 3) [3,6,9,12,1,2,3,2,5,8,23,24,25]
[[3,6,9,12],[1],[2],[3],[2,5,8],[23],[24],[25]] 
```

或完全像`group`- 没有任何理由：

```
*Main Map> let xs = [1,1,1,2,3,4,5,6,6,6,5]
*Main Map> group xs == pattern id xs
True 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:13:43.097

有很多方法可以做到这一点。一种方法是使用 foldr

```
f = foldr g []
  where g a [] = [[a]]
        g a xs@(x:xs') | a+1 == head x = (a : x): xs'
                       | otherwise = [a]:xs 
```

现在尝试这个

```
*Main> f [1,2,3,4,6,7,9,10,11]
[[1,2,3,4],[6,7],[9,10,11]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:49:19.607

如果`xs`是严格增加那么

```
 myGrouping = map (map snd) . groupBy (\(u, v) (x, y) -> u - v == x - y) . zip [0..] 
```

解决你的问题。

```
Prelude> myGrouping [1,2,3,4,6,7,9,10,11]
[[1,2,3,4],[6,7],[9,10,11]] 
```

# jquery - val() 不返回我用 val() 设置的值

> ID：14235752
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:58:29.290
> 
> 标签：jquery

我有一个功能：

```
$("#action_box").val("uptodate");
var myVal = $("#action_box").val();
alert(myVal); 
```

警报的输出为 0。你能指出我的错误吗？

编辑：很抱歉没有提及有关 action_box 元素的任何内容。

```
<select name="action_box" id="action_box" style="vertical-align:top;">
    <option value="0">{{$l.opt1}}</option>
    <option value="1">{{$l.opt2}}</option>
    ...
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:14:18.363

您正在尝试将`<select>`元素的选定选项设置为不存在的选项（不存在的值为`uptodate`）。

因此`val("uptodate")`被有效地忽略，`val()`返回与之前相同的值。

如果你这样做了`$("#action_box").val("1");`，你会取得更大的成功。

假设您正在尝试选择文本上下文为“最新”的元素，前提是您没有使用可以使用的[`label`属性](https://developer.mozilla.org/en-US/docs/HTML/Element/option)；

```
$('#action_box').find('option[label="uptodate"]').prop('selected', true); 
```

但是，如果您正在使用`label`，则可以使用该`filter()`方法，如评论中所述；

```
$(this).find('option').filter(function () {
    return $(this).text() === "uptodate";   
}).prop('selected', true); 
```

# c++ - 在 C++ 中调用复制构造函数

> ID：14235754
> 
> 赞同：1
> 
> 时间：2013-01-09T12:58:40.183
> 
> 标签：c++, constructor, copy-constructor

我有两个指向全局声明的 A 类的指针

```
A* a;
A* b;

int main(){
     a = new A(...);           
} 
```

我应该如何调用复制构造函数以使 b 作为 a 的 BY VALUE 复制。A 类没有任何指针作为字段。

我确实声明了一个构造函数，但我可以删除它以免覆盖默认构造函数。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:07:22.240

您的代码有两个问题，需要在回答问题之前修复。

1.  事实上，这些全局指针是全局的——在全局命名空间中有一些全局的东西，这是糟糕设计的标志（如果你的老师提倡它——因为它看起来有点像家庭作业——那么就打他的脸）。
2.  这些全局指针是原始指针的事实——你要么想要将所有权保留在它们的位置，而不是传递所有权——那么你将使用`unique_ptr`或者只是使用普通对象（除非该对象应该比 寿命更长`main()`，但那是一个奇怪的案例）。

因此，在更正代码后，它看起来像这样：

```
int main()
{
    A a;
    A b(a);      
} 
```

如果您需要从代码的其他部分访问这些对象，而不是显式地传递它们，请将它们放在明智的命名中`namespace`：

```
// in header
namespace a_and_b // this is *wrong* name for it, of course
{
    extern A a;
    extern A b;
}

// in one of TUs - also possible to wrap this in namespace ... { ... }
A a_and_b::a;
A a_and_b::b(a_and_b::a); 
```

当然，如果您只是询问语法，答案将是：

```
A * b = new A(*a); 
```

所以只需取消引用指针即可`A`退出`A *`. 但是请永远不要这样做——即使在独立环境中，您也可以轻松实现自己的智能指针以理智的方式包装它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:01:07.653

只需使用 new 调用复制构造函数：

```
b = new A(*a); 
```

不过我得问...为什么不保留两个静态对象呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:06:55.107

如果你不声明一个，你总是会得到一个隐式构造函数、复制构造函数和析构函数，你可以像 StoryTeller 所说的那样调用它们；

```
b = new A(*a); 
```

如果你想在复制构造函数中做任何事情，你需要编写一个，这里有一些关于你如何做到这一点：[http ://www.cplusplus.com/articles/y8hv0pDG/](http://www.cplusplus.com/articles/y8hv0pDG/)

# c++ - 分配 C++ 引用的意外行为

> ID：14235757
> 
> 赞同：0
> 
> 时间：2013-01-09T12:59:02.993
> 
> 标签：c++, reference

今天我在使用参考资料时看到了非常奇怪的事情。

只是一个简单的例子：

```
#include <iostream>

struct Base {
  enum Type {
    FOO = 0,
    BAR = 1
  };
  virtual ~Base() {}
  virtual Type type() const = 0;
  int value_;
};

struct Foo : Base { 
    Foo() { value_ = 33; }
    virtual Type type() const { return FOO; }
};

struct Bar : Base { 
    Bar() { value_ = 44; }
    virtual Type type() const { return BAR; }
};

int main() {
    Foo foo;
    Bar bar;
    Base & b = foo;
    std::cout << b.type() << ", " << b.value_ << "\n";
    b = bar;
    std::cout << b.type() << ", " << b.value_ << "\n";
    return 0;
} 
```

你认为输出会是什么？看到的时候真的很惊喜：

```
0, 33
0, 44 
```

在 VS 2010、mingw 4.6、gcc 4.3 上测试。那么，可能知道这个魔法的秘密吗？

[Ideone 链接示例](http://ideone.com/ULGqjW)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T13:04:12.183

引用就像 C++ 中的指针，有两个重要的例外（除了语法）：

*   它们不能分配给 null
*   他们不能被重新分配

因此，当您调用 时`b = bar`，您不会重新分配引用；您正在将 的值分配给;`bar`引用的对象 `b`在这种情况下，您正在分配`bar`to的值`foo`。因此，在第二行中，您将有一个带有 a的`Foo`对象。正是你的输出所说的。`value_``44`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:04:12.777

`=`in`Base & b = foo;`和`b = bar;`是不同的操作。

`Base & b = foo;`将引用分配给`foo`

`b = bar;`尝试对 的默认成员分配`Base`。`b`仍指`foo`。其成员已被重新分配。它仍然是 type `Foo`。

典型的编码标准（[例如 Google 的](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Copy_Constructors)）通常要求您通过将其设为私有来撤销默认的复制构造函数和赋值。

# php - 如何序列化在属性内具有闭包的对象？

> ID：14235760
> 
> 赞同：3
> 
> 时间：2013-01-09T12:59:05.837
> 
> 标签：php, string, serialization, closures

如果我这样做`serialize($obj)`，我会得到：

> 不允许序列化“闭包”

序列化时有什么办法可以忽略这些闭包？当我反序列化字符串时，我不需要它们（这些属性的值可以是 null 或其他）。

我的课看起来像这样：

```
Class Node{

  protected $attrs = array();

} 
```

`$attrs`是一个关联数组，可以包含一些闭包元素，例如 `$attrs['validator'] = function(){...}`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T13:05:37.897

很简单：你不能。闭包是不可序列化的。如果你想创建“类似的东西”，你可以使用实现类的对象[`__invoke()`](http://php.net/oop5.magic#object.invoke)而不是闭包。

如果您不需要闭包（或者您可以在反序列化时自己重新创建它们），您可以实现[`Serializable`](http://php.net/serializable)并且在序列化时不要考虑闭包。这个接口（实现`serialize()`and `unserialize()`）应该优先于`__sleep()`/ `__wakeup()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-06T17:25:56.493

我编写了一个允许任何`Exception`序列化的函数。这是通过展平回溯中的复杂值来完成的。

### 资源：

[https://gist.github.com/Thinkscape/805ba8b91cdce6bcaf7c](https://gist.github.com/Thinkscape/805ba8b91cdce6bcaf7c)

### 用法：

```
<?php
try {
    // exception gets thrown here, i.e.
    // throw new Exception(); 
} catch (Exception $exception) {
    flattenExceptionBacktrace($exception);
    $serialized = serialize($exception);

    $unserialized = unserialize($serialized);
    print_r($unserialized->getTraceAsString());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T13:01:08.700

提供您自己的[_ *sleep()*](http://php.net/manual/en/language.oop5.magic.php#object.sleep)*实现和*[_唤醒](http://php.net/manual/en/language.oop5.magic.php#object.sleep)方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-04T08:19:37.743

在忽略闭包的同时序列化对象的属性：

```
$properties = array_map(function ($property) {
    try {
        return serialize($property);
    } catch (\Exception $e) {
        return null;
    }
}, get_object_vars($this)); 
```

# jboss - 如何在 jboss 中使用 saml picketlink 进行身份验证？

> ID：14235767
> 
> 赞同：2
> 
> 时间：2013-01-09T12:59:27.703
> 
> 标签：jboss, single-sign-on, saml-2.0

我是 saml 和 xacml 的新手。我想使用 saml 实现身份验证。有人告诉我 jboss 中的 picketlink。任何人都可以提供示例程序以及如何使用 picketlink 配置 jboss。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T11:32:38.867

从此链接查找文档

[http://docs.jboss.org/picketlink/2/latest/reference/pdf/](http://docs.jboss.org/picketlink/2/latest/reference/pdf/)

我也是 Picketlink 的新手。它于 2013 年 8 月 20 日更新，我认为这是一个很好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:54:46.670

[PicketLink 快速入门](https://docs.jboss.org/author/display/PLINK/PicketLink+Quickstarts)提供了一些使用 PicketLink 联合的有用示例。

有 3 个基本应用程序可针对多种场景进行定制（例如加密、签名）：

*   **idp** - 身份提供者 (IdP)
*   **sales** - 使用 HTTP POST 绑定的服务提供者
*   **员工**- 使用 HTTP REDIRECT 绑定的服务提供者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T10:29:43.330

有关官方[github](https://github.com/picketlink2/picketlink-quickstarts)的更多最新信息。那里有工作示例和现成的应用程序。

# wpf - DotNet 4.5 升级后 ObservableCollection 损坏

> ID：14235770
> 
> 赞同：0
> 
> 时间：2013-01-09T12:59:42.820
> 
> 标签：wpf, c#-4.0, .net-4.5

Dotnet 4.5 已推广到我们的组织。升级后我的一个 WPF 工具坏了（一个网格不显示任何东西）。

该应用程序有一些绑定到不同来源的数据网格。除了数据类型之外，每个源都是相同的。

所有其他来源都在 100% 工作。

我可以看到包含数据的集合根本没有更新数据网格。我已将网格换成标准 ListBox 并且没有任何变化。

似乎用整个集合替换值是行不通的。如果我迭代并将项目添加到现有列表中，那么它可以工作。

**编辑 1：** 为什么此 ObservableCollection 上的 CollectionChanged 事件为空？！？

所有数据源的结构如下。

**数据绑定：**

```
{Binding Sprints, Source={x:Static ViewModels:CoreViewModel.Instance}} 
```

**属性（数据源）：**

```
private ObservableCollection<SprintEntity> _sprintsField;
public static ObservableCollection<SprintEntity> Sprints
{
  get
  {
    return Instance._sprintsField;
  }
  set
  {
    if (Instance._sprintsField != value)
    {
      Instance._sprintsField = value;
      Instance.RaisePropertyChanged("Sprints");
    }
  }
} 
```

**获取数据的代码（正确获取数据）：**

```
public static void GetSprints(int workspaceID, Action<bool, string> callback)
{
  var proxy = new NotificationServiceClient();
  proxy.GetSprintsCompleted += (sender, e) =>
  {
    if (e.Error == null)
    {
      Sprints = e.Result;
      callback(true, null);
    }
    else
    {
      callback(false, e.Error.Message);
      throw e.Error;
    }
  };
  proxy.GetSprintsAsync(workspaceID);
} 
```

# facebook-apps - 尽管沙盒已禁用，但 Facebook 应用程序在我的（管理员）帐户的情况下工作

> ID：14235775
> 
> 赞同：0
> 
> 时间：2013-01-09T12:59:57.397
> 
> 标签：facebook-apps

我开发了一个将图像发布到用户帐户的 facebook 应用程序。我已经注册了那些应用程序。当我运行我的代码时，它应该将图像发布到登录的用户墙上。它只在我的帐户登录时工作。如果其他人登录并运行我的 PHP 脚本，则没有发现错误，但实际上图像没有发布到那个用户的墙上。我也禁用了沙箱。其他原因可能是什么？

如果您需要我的源代码，请告诉我。

```
<?php

include("facebook.php");
$filename ="50ed5eb3b33d0.png";

$facebook = new Facebook(array(
  'appId'  => 'XXXXXXXXXXXXXXXXXX',
  'secret' => 'XXXXXXXXXXXXXXXXXXXXXXXX',
  'cookie' => TRUE,
  ));

// Get User ID
$user = $facebook->getUser();

if(!$user)
{
    $url = $facebook->getLoginUrl(array(
        'canvas' => 1,
        'fbconnect' => 0,
        'req_perms' => 'publish_stream, user_photos, read_stream, read_friendlists'
        ));

     echo "<script type='text/javascript'>top.location.href = '$url';</script>";

}
else
{

        try {

                $uid = $facebook->getUser();

                $facebook->setFileUploadSupport( true );
                $parameters = array(
                    'access_token' => $facebook->getAccessToken(),
                    'message' => 'PHOTO_CAPTION',
                    'image' => '@' . realpath( './images/'.$filename ) 
                );

                $post_id = $facebook->api('/'.$uid.'/photos', 'POST', $parameters);

                if(isset($post_id))
                {
                    echo "Thank you for posting" .$uid;
                    unlink('./images/'.$filename);  
                }

        }//end try getUser 
        catch (FacebookApiException $e) {

        echo "Error:" . print_r($e, true);

        }//end of catch getUser 
}//end of else user

?> 
```

# c++ - 代码重构后前向声明导致错误

> ID：14235780
> 
> 赞同：5
> 
> 时间：2013-01-09T13:00:09.830
> 
> 标签：c++, namespaces, refactoring, forward-declaration, using-directives

我原来的类结构类似于：

```
//def.h
namespace A
{
   struct X {};
} 
```

并在需要时转发声明：

```
//file that needs forward declarations
namespace A { struct X; } 
```

经过一些重构，`X`被移动到不同的命名空间，但为了保持旧代码“工作”`using`指令被使用：

```
//def.h
namespace B
{
   struct X {};
}
namespace A
{
   using ::B::X;
} 
```

现在我们可以访问保持旧语法的同一个类`A::X`，但是前向声明会导致错误。第二个问题是我收到的错误消息没有指向前向声明的位置，并且查找/替换前向声明非常耗时。

现在我解决了这个问题（困难的方式）。

处理这种情况的最佳方法是什么？

IMO，根本不应该存在，并且应该重构`using`所有使用的代码以适应新的命名空间（这是一种解决方案），但不幸的是，这不是一个选项。`X`

实际代码要复杂得多，这是一个简化的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:28:05.480

我意识到这更多是关于新代码而不是重构现有代码，但我喜欢使用`X_fwd.hpp`针对这种情况的特殊标头。

```
// X_def.hpp
namespace B
{
   struct X {};
}
namespace A
{
   // NOT: using namespace B; // does not participate in ADL!      
   typedef ::B::X X;  // OR: using ::B::X;
}

// X_fwd.hpp
namespace A { struct X; }

// some file needing declaration of X
#include <X_fwd.hpp> 
```

这使得查找前向声明以及事后更改它们变得更加容易，因为更改仅在一个地方隔离（DRY ...）。

**注意1**`typedef` ：AFAIK，使用 Peter Wood 的 a 答案和您的`using`声明之间没有技术区别。请注意，`using`指令`using namespace B;`可能会导致麻烦，因为**Argument-Dependent-Lookup**会忽略这些指令。更糟糕的是，您的某些代码甚至可能会**默默地调用错误的函数重载**，因为您不再拉入新的命名空间`B`！

**注意2 ：在问题的评论中，给出了一个[Ideone](http://ideone.com/CxhctQ)**示例**。这很好地说明了名称空间内名称查找的一个微妙之处：引用[标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)草案，第**3.4.3.2 节命名空间成员 [namespace.qual]**，第 2节**

 **> 对于命名空间 X 和名称 m，命名空间限定查找集 S(X, m) 定义如下： 令 S'(X, m) 是 X 中所有 m 声明的集合和 X 的内联命名空间集(7.3.1)。如果 S'(X, m) 不为空，则 S(X, m) 为 S'(X, m)；否则，S(X, m) 是 S(Ni, m) 的并集，用于通过 X 中的 using 指令指定的所有命名空间 Ni 及其内联命名空间集。

这解释了以下棘手的歧义

```
namespace A
{
    struct X1{};
    struct X2{};
}

namespace B
{
    using A::X1;    // OK: lookup-set is both namespace A and B, and a single unique name is found (at this point!)
    struct X1;      // OK: lookup-set is namespace B, and a single unique name is found

    struct X2;      // OK: lookup-set is namespace B, and a single unique name is found
    using A::X2;    // error: lookup-set is both namespace A and B, and no unique name is found (at this point!)
} 
```

因此，在命名空间内同时具有直接声明和具有相同名称的 using 声明的有效性取决于顺序。因此，在 fwd 头文件中进行单个声明很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:06:12.637

最好的方法是修复代码。

您可以分两步完成：

1.  修复所有前向声明
2.  消除`using ::B::X;`**

# asp.net-mvc - 来自 EF 映射对象的不兼容数据读取器异常

> ID：14235783
> 
> 赞同：25
> 
> 时间：2013-01-09T13:00:18.423
> 
> 标签：asp.net-mvc, entity-framework, model, mapping

我正在使用实体框架并更新了一个表及其存储过程，但在调用存储过程时出现以下错误。

> 数据读取器与指定的“FormValueModel.Valuation”不兼容。类型的成员“ValuationId”在数据读取器中没有同名的对应列。

ValuationId 是我想要自动递增的主键。

我可以执行从 SQL 管理工作室找到的存储过程，当我运行我的应用程序时，它会写入数据库，但随后会出现错误消息。

我不熟悉实体框架，只有基础知识，我认为这可能是 model.edmx 的映射问题。

在模型中重新创建和映射表和存储过程的正确过程是什么？

* * *

存储过程。

```
 ALTER PROCEDURE [dbo].[ValuationCreate]
    @TrackingNumber varchar(100),
    @FormMobiValuationId varchar(100),
    @ValuationPropertyId int,
    @ValuationFileName varchar(50)

AS   

SET NOCOUNT ON
SET XACT_ABORT ON

DECLARE @ErrorMessage varchar(1000)

BEGIN TRANSACTION

    --Insert to Valuation
    INSERT INTO [Valuation]
    (
        TrackingNumber,
        FormMobiValuationId,
        ValuationPropertyId, -- new
        ValuationFileName,
        Date,
        ValuationStatus,
        IsActive
    )
    VALUES
    (
        @TrackingNumber,
        @FormMobiValuationId,
        @ValuationPropertyId,--new
        @ValuationFileName,
        GETDATE(),
        1, --Created
        1
    )

IF @@ERROR > 0
BEGIN
    SET @ErrorMessage = 'Valuation Insert failed'
    GOTO ErrorHandler
END
ELSE
BEGIN
    COMMIT TRANSACTION
    RETURN
END

ErrorHandler:

RAISERROR(@ErrorMessage,16,1);
ROLLBACK TRANSACTION
RETURN -1 
```

* * *

发生错误的 C# 调用，错误消息出现在最后一行。

```
 public ObjectResult<Valuation> ValuationCreate(global::System.String trackingNumber, global::System.String formMobiValuationId, Nullable<global::System.Int32> valuationPropertyId, global::System.String valuationFileName)
        {
            ObjectParameter trackingNumberParameter;
            if (trackingNumber != null)
            {
                trackingNumberParameter = new ObjectParameter("TrackingNumber", trackingNumber);
            }
            else
            {
                trackingNumberParameter = new ObjectParameter("TrackingNumber", typeof(global::System.String));
            }

            ObjectParameter formMobiValuationIdParameter;
            if (formMobiValuationId != null)
            {
                formMobiValuationIdParameter = new ObjectParameter("FormMobiValuationId", formMobiValuationId);
            }
            else
            {
                formMobiValuationIdParameter = new ObjectParameter("FormMobiValuationId", typeof(global::System.String));
            }

            ObjectParameter valuationPropertyIdParameter;
            if (valuationPropertyId.HasValue)
            {
                valuationPropertyIdParameter = new ObjectParameter("ValuationPropertyId", valuationPropertyId);
            }
            else
            {
                valuationPropertyIdParameter = new ObjectParameter("ValuationPropertyId", typeof(global::System.Int32));
            }

            ObjectParameter valuationFileNameParameter;
            if (valuationFileName != null)
            {
                valuationFileNameParameter = new ObjectParameter("ValuationFileName", valuationFileName);
            }
            else
            {
                valuationFileNameParameter = new ObjectParameter("ValuationFileName", typeof(global::System.String));
            }

            return base.ExecuteFunction<Valuation>("ValuationCreate", trackingNumberParameter, formMobiValuationIdParameter, valuationPropertyIdParameter, valuationFileNameParameter);
        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T13:02:24.737

该消息意味着存储过程的结果不包含名为 的列`ValudationId`。仔细检查您的`select`语句并在 SSMS 中运行它，以确保您恢复了该列。

**编辑：**您的程序不包含`select`语句。您需要选择插入的标识值（`scope_identity()`例如使用函数），以便 EF 可以将其映射回实体。

例如，

```
insert into Table
(
    Col1,
    Col2
)
values
(
    1,
    2
)

select scope_identity() as IdentityColName 
```

另外，顺便说一句，您的插入语句中不需要所有的交易业务；您只有一个正在修改数据的语句（您的插入）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-27T15:29:20.500

对于那些仍然遇到相同错误的人，请确保您指向/连接到正确的数据库。花了几个小时后，我发现我正在处理活动数据库而不是测试数据库。当然，我对测试数据库中的存储过程所做的更改在活动数据库中没有等效性。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-09T20:37:32.233

在我的情况下，它返回数据，但未*提供*列名，由于`CAST`没有列名别名的语句，导致它变为*空白*。缺少列名错误最终导致 EF 生成报告的映射失败。

通过在 SSMS 中进行实际调用并查看结果，实际结果显示了这个*现在*明显的错误：

[![在此处输入图像描述](../Images/98b26a1e85faa80fe1c61bf85a89b0f4.png)](https://i.stack.imgur.com/oLcT0.png)

将 SQL 中的列命名为 EF 预期的内容可解决此问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-19T04:34:31.770

Avinash，很好地调用 ExecuteSQLCommand 和“非查询”。但是，Pornster 指的是 ExecuteFunction 调用一个 SP 并返回结果。要解决此问题，**请从您的 SP 中删除“return”语句，**它将起作用。当您使用 return 语句时，SP 将返回一个 int 而不是您的 select 查询。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-15T16:34:50.673

Strange, I solved this by adding the [GO](http://msdn.microsoft.com/en-us/library/ms188037.aspx) command to the end of by stored procedure.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-27T17:44:07.037

我修复了这个问题的版本，通过在 VS 中浏览模型，在函数导入下找到存储过程并将函数的返回类型更改为无

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-11T07:10:05.110

如果您正在插入/删除/更新（这些被 EF 视为“非查询”），并且可以由我们的代码使用

```
context.Database.ExecuteSqlCommand(insert into Table (Col1,Col2) values (1,2)); 
```

但是，如果正在对原始 SQL 语句进行选择查询，则使用

```
context.DbSet<Table_name>.SqlQuery(select * from table_name).ToList(); 
```

或 context.Database.SqlQuery(select * from table_name).ToList();

EF 中的 SqlQuery() 函数，由于奇怪的原因，抛出异常插入/删除/更新操作。（抛出的异常是“类型的成员，在数据读取器中没有对应的同名列。”）但是如果您打开Sql Management Studio并检查条目，它实际上已经执行了操作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-25T22:54:27.003

重要的场景之一是通过不同的条件返回不同的结果。例如，当您使用 IF 命令时，可能会从每个分支返回不同的结果集。由于 EF 在导入 SP 时设置了返回集合，因此期望 [type one] 集合但获取 [type 2] 集合然后引发错误，在数据读取器中没有相应的列。因此，任何具有返回结果集的 SP 都必须从其上的每个部分返回相同的集合（作为列名和计数），如下所示：

```
IF (Condition 1)
BEGIN
  SELECT [column1], [column2], [column3], ... FROM [...]
END
ELSE
BEGIN
  SELECT [column1], [column2], [column3], ... FROM [...]
END 
```

这在同一问题上对我有用，希望对我有所帮助。

**更新：**

另一次，当我在`Function Imports`. 真的，我没想到 Typed 或一些 Collection 值，也许只需要一个整数作为 Out 参数，但我忘了设置`Returns a Collection Of`为`None`. 因此，如果您不希望有任何返回结果，请转到您的模型并在`Model Browser`>`Function Imports`中右键单击 SP 有问题并单击编辑，然后检查该`Returns a Collection Of`部分并将其设置为`None`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-28T14:05:22.877

还要注意模型的 EDMX 文件将数据库列名称重新映射到与相应类对象不同的名称的情况。

就我而言，存储过程返回的列名称中包含空格`[Monthly Bill Rate]`。为了处理这个问题，列名在模型中被重新映射。

在某些时候，SP 返回列已重命名为`[MonthlyBillRate]`，但模型未更新为对应。当我搜索代码时`MonthlyBillRate`，它在`Designer.cs`文件中为`MonthlyBillRate`. 我不明白为什么我得到了例外。经过仔细检查，我在 EDMX 中发现了重新映射的名称。

## 模型.edmx

重新映射通过属性发生在`ScalarProperty`标签中。`ColumnName`

```
 <FunctionImportMapping FunctionImportName="BillingReport" FunctionName="Model.Store.BillingReport">
  <ResultMapping>
    <ComplexTypeMapping TypeName="Model.BillData">
      <ScalarProperty Name="MonthlyBillRate" ColumnName="Monthly Bill Rate" />
    </ComplexTypeMapping>
  </ResultMapping> 
```

## 模型设计器.cs

```
 [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public Nullable<global::System.Decimal> MonthlyBillRate
    {
      ... etc ...
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-12-09T11:06:01.267

就我而言，正如 Brett Jones 建议的那样，解决方案是**从我的存储过程中删除“RETURN”语句**，只留下“SELECT”部分。我花了好几个小时尝试在网上找到的各种解决方案，但就是这么简单。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-20T01:15:00.703

当心存储过程末尾的“select *”！在那条黑暗的道路上只有废墟。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-10T11:15:04.073

这不适用于这种特殊情况，但是我遇到了类似的问题，即引发了相同的错误，但指定的成员类型是我的选择中的一列，后缀为 1 ....这是由于我返回相同的在我的选择中列两次....示例：-

```
SELECT
    CustomerId,
    FirstName,
    LastName,
    CustomerId
FROM
    Customers 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-08-13T11:35:20.983

可能是您在使用 select 时没有给出列的别名。

# macos - Mac 上使用 socat 的 USB 串行端口

> ID：14235786
> 
> 赞同：4
> 
> 时间：2013-01-09T13:00:29.323
> 
> 标签：macos, serial-port, usb, tty, socat

我有一个通过 Prolific Serial 到 USB 电缆连接的硬件，我需要使用 socat 向/从这个和 TCP 端口发送/接收流量。到目前为止，它已安装并与 minicom 一起使用：

`minicom -D /dev/tty.usbserial -b 9600`

Socat 使用以下方式向 TCP 端口单向工作：

`socat /dev/tty.usbserial,clocal=1,nonblock=1,cread=1,cs8,ixon=1,ixoff=1 TCP4:localhost:8080`

我如何让它以两种方式工作？我经常看到重复的字符或双行，这表明串行设置不正确，对吗？

谢谢！克里斯

编辑：一些示例代码（实际上并不以双向方式工作）。

```
Chris-MacBookAir:~ chrisbridges$ socat -d -d - /dev/tty.usbserial,clocal=1,nonblock=1,cs8,ixon=1,ixoff=1,ispeed=9600,ospeed=9600,icanon=1
2013/01/09 13:13:34 socat[8501] N reading from and writing to stdio
2013/01/09 13:13:34 socat[8501] N opening character device "/dev/tty.usbserial" for reading and writing
2013/01/09 13:13:34 socat[8501] N starting data transfer loop with FDs [0,1] and [3,3] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:06:11.870

谢谢您的帮助。我现在已经解决了，可以正常沟通了。Socat 确实是一个复杂的工具。这是我的最终设置：

```
sudo socat -U -d -d -d /dev/tty.usbserial,clocal=1,cs8,nonblock=1,ixoff=0,ixon=0,ispeed=9600,ospeed=9600,raw,echo=0,crtscts=0 FILE:tnc-start.hex 
```

其中 'ixon' 启用 XON/XOFF 流控制，'ixoff' 启用发送开始/停止字符，有趣的是，'echo' 不会打印到控制台，但会回显在发送者处传回的任何内容......奇怪！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T00:40:32.000

我很可能会告诉你很多你已经知道的东西，但是调试这种情况通常会带来完整的画面。

## 问题1：经典串行通信（纯RS-232）

来自维基百科的[串口](http://en.wikipedia.org/wiki/Serial_port)：

> 在计算中，串行端口是一种串行通信物理接口，信息通过它一次传入或传出**一位**（与并行端口相比）（...）术语“串行端口”通常表示硬件*或多或少*兼容符合 RS-232 标准，**旨在与调制解调器**或类似的通信设备连接。(...)

[来自RS-232 的](http://en.wikipedia.org/wiki/RS-232)维基百科：

> 在电信领域，RS-232 是一系列标准的传统名称，用于连接 DTE（数据终端设备）和 DCE（数据电路终端设备）之间的串行二进制单端**数据**和**控制****信号****(** ... )

 ******因此，DTE 是您的 Mac，而 DCE 是“硬件”。要设置串行连接，您需要设置以下参数：

*   baudrate - 可以达到的最大数据发送速度
*   数据位 - 许多位将组成一个字符
*   停止位 - 流同步
*   奇偶校验 - 错误检查

例如，某些 POS 外围设备的常用值是 9600/8/1/none，但唯一相关的是**DCE**和 DTE**必须**对这些参数具有**相同**的值才能按预期运行。Mac/PC 可以使用任何预定义的值，因此您需要查看“硬件”的手册以查看要选择的值。

如果这两种设备中的一个具有更大的波特率设置，您将在另一侧看到垃圾数据。此外，接收到的垃圾数据的大小将小于原始发送的数据大小。如果数据位设置不同，您还*应该*看到垃圾数据但大小相同。我不确定如果停止位或奇偶校验不同会发生什么。

最重要的是——你需要知道你的硬件的协议——可能是详细的——以使其按预期运行。一般来说，RS-232 通信是指 DCE 和 DTE 都处理一些数据，然后通过串行电缆发送一些数据（双向通信）。

然而，虽然我们现在习惯于在 DTE 端进行[多任务处理](http://en.wikipedia.org/wiki/Computer_multitasking)，但在 DCE 端可能并非如此——您的“硬件”可能在处理数据时无法在其串行端口上侦听，反之亦然。这意味着，如果您在它忙于处理其他数据时尝试向它发送一些数据 - 它不会收到它。

由于 RS-232 比多任务处理更老 - 考虑到它们广泛使用的时间，它更老 -*正确的方法*是使用 RS-232[同步机制](http://en.wikipedia.org/wiki/Serial_port#Pinouts)。让我们将双向通信分解为两个方向：

*   DTE (Mac) => DCE（一块硬件）：DTE 激活 RTS（请求发送）线，并等待直到 DCE 激活 CTS（清除发送）线。然后它发送数据。

*   DCE (piece of hw) => DTE (Mac)：DCE 激活 DSR（数据集就绪）线，并等待直到 DTE 激活 DTR（数据终端就绪）线。然后它发送数据。

从您的设置（[minicom](http://en.wikipedia.org/wiki/Minicom)，[socat](http://www.dest-unreach.org/socat/doc/socat.html)）判断，您可能正在使用某种外壳管道/重定向，所以我不知道您如何从外壳读取电线的状态（尽管，它*必须*是可能的）。对于像我这样的 shell/OS 架构外行来说，这是一个非常好的问题，但不幸的是我没有 DCE 可以尝试：(

使用像[Java 简单串行连接器](http://code.google.com/p/java-simple-serial-connector/wiki/jSSC_examples)这样的程序库，它变得像读取布尔变量的值一样简单。

## 问题 2：适配的串行通信（RS-232 转 USB）

我看到了其中两个（不同的供应商） ，带有 RS-232 和 USB 连接器[的](http://www.google.com/imgres?hl=hr&tbo=d&biw=1440&bih=715&tbm=isch&tbnid=j5rYmCAdj4P5nM%3a&imgrefurl=http://fab.cba.mit.edu/content/tools/file/microcontrollers/connecting.html&docid=SYar6tYZ7LHZxM&imgurl=http://fab.cba.mit.edu/content/tools/file/microcontrollers/prolific.jpg&w=400&h=327&ei=4AfuUN71JoWM4gSAhoDABw&zoom=1&iact=hc&vpx=297&vpy=122&dur=5916&hovh=203&hovw=248&tx=142&ty=82&sig=109079491195639727657&page=1&tbnh=139&tbnw=172&start=0&ndsp=29&ved=1t:429,r:2,s:0,i:87)电缆和一个硬件适配器，通常在串行连接器端。除了“serial-to-usb”短语外，他们没有任何手册，也没有任何行为声明。其中一个没有按预期工作，例如它没有正确传输电线的状态，尽管它是“串行到USB”。在这种情况下没什么可做的，但要获得一个有效的。

## 结论

一旦字节到达 TCP 端口，它们将被正确传输。由于 socat 是一个非常复杂的程序，您可能错误地配置了它。重复的行和字符比串行连接错误配置更能说明问题。但是，由于您说 TCP 端口的“硬件”有效，这也可能意味着来自 TCP 端口的数据配置错误。

但是，首先您必须确保您知道与您的“硬件”通信的协议，因此我建议尝试模拟来自 TCP 端口的数据并将其直接发送到串行端口。例如，编写一个带有一些基本命令的 shell 脚本或程序，这些命令可以直接通过串行端口与您的“硬件”进行通信。如果这被证明符合预期，那么您就知道问题出在 socat 中，或者更有可能是来自 TCP 端口的数据。我希望你有一本关于你的“硬件”的手册:)

请反馈。******

# magento-1.4 - Magento 在电子邮件模板中发送错误的付款信息块

> ID：14235794
> 
> 赞同：0
> 
> 时间：2013-01-09T13:00:49.933
> 
> 标签：magento-1.4, magento

我遇到了支付模块（librepag）的问题，女巫如下：

该模块有 2 个模板“信息块”（带有付款详细信息的块）：

1.  用于后端（app/design/ **adminhtml** /base/default/template/librepag/info/ cartao.phtml） - 它有一些客户不应该看到的操作按钮
2.  用于电子邮件模板（app/design/ **frontend** /base/default/template/librepag/info/ cartao.phtml）

当客户下订单时，会发送正确的模板 (#2)。但是当我们在后端订单视图并单击**发送电子邮件**按钮时，将发送 #1。

我注意到在模块模型中有

```
protected $_formBlockType = 'librepag/form_cartao';
protected $_infoBlockType = 'librepag/info_cartao'; 
```

女巫对应于这个特定的块

```
class Weblibre_Librepag_Block_Info_Cartao extends Mage_Payment_Block_Info_Ccsave
{
protected function _construct()
{
    parent::_construct();
    $this->setTemplate('librepag/info/cartao.phtml');
}
... 
```

**为什么系统会为同一个 sendNewOrderEmail 方法发送不同的信息块？** 我看到了一个[**类似的线程**](https://stackoverflow.com/questions/6875784/editing-magento-sales-e-mail-payment-block)，但没有弄清楚如何在此模块的电子邮件模板上简单地指定另一个信息块。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:09:56.933

当您在后端选择发送邮件功能时，每个操作的区域`admin`都不是`frontend`，因为它在商店前端。

这就是为什么相对路径`librepag/info/cartao.phtml`被解释为`adminhtml/default/default/librepag/info/cartao.phtml`

要解决这个问题，您可以在构造函数中调用`$this->setArea('frontend');`before `setTemplate()`。

# ios - 如何在 ios 中使用谷歌地图而不是默认地图？

> ID：14235796
> 
> 赞同：2
> 
> 时间：2013-01-09T13:00:53.493
> 
> 标签：ios, google-maps, ios6, mkmapview

我想在我的本机应用程序中使用谷歌地图，而不是在 ios 6 中使用默认的 mapkit 地图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:04:55.540

您将需要使用 Google Maps SDK：[https ://developers.google.com/maps/documentation/ios/](https://developers.google.com/maps/documentation/ios/)

# icons - 为 cmake-cpack 应用程序指定图标和菜单项

> ID：14235798
> 
> 赞同：2
> 
> 时间：2013-01-09T13:01:00.423
> 
> 标签：icons, installation, cmake, cpack, freedesktop.org

我正在尝试使用 CMake 和 CPack 为我正在开发的应用程序创建和安装包（.deb 和 .rpm）。包创建得很好，但是在运行 dpkg -i mypackage.deb 后我没有在 KDE 菜单中获得条目。

以下是我正在执行的步骤：

摘自 CMakeLists.txt：

```
SET(CMAKE_INSTALL_PREFIX /opt/ddm)
SET(DDM_DESKTOP_DIR     ${CMAKE_INSTALL_PREFIX}/${DDM_DATA_SUBDIR}/applications/)
SET(DDM_PIXMAPS_DIR     ${CMAKE_INSTALL_PREFIX}/${DDM_DATA_SUBDIR}/pixmaps/)

INSTALL (FILES share/ddm.desktop DESTINATION ${DDM_DESKTOP_DIR})
INSTALL (FILES share/ddm.xml DESTINATION ${DDM_DESKTOP_DIR})

# Copy the ddm pixmap
INSTALL (FILES share/ddm.png DESTINATION ${DDM_PIXMAPS_DIR})

# try to set up the menu system
find_program(XDG-MIME_EXECUTABLE xdg-mime)
find_program(XDG-DESKTOP-MENU_EXECUTABLE xdg-desktop-menu)

INSTALL(CODE "
  execute_process(COMMAND ${XDG-MIME_EXECUTABLE} install --novendor ${DDM_DESKTOP_DIR}/ddm.xml)
  execute_process(COMMAND ${XDG-DESKTOP-MENU_EXECUTABLE} install --novendor ${DDM_DESKTOP_DIR}/ddm.desktop)
  execute_process(COMMAND ${XDG-MIME_EXECUTABLE} default ${DDM_DESKTOP_DIR}/ddm.desktop application/x-ddm-item)
  "
)
# Debian packages
INCLUDE (${CMAKE_MODULE_PATH}/DpkgBuild.cmake)
IF(DPKG_FOUND AND NOT WIN32)
    SET(CPACK_GENERATOR "DEB")
    SET(CPACK_DEBIAN_PACKAGE_NAME ${CPACK_PACKAGE_NAME})
    SET(CPACK_DEBIAN_PACKAGE_VERSION ${CPACK_PACKAGE_VERSION})
    SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION ${CPACK_PACKAGE_DESCRIPTION_SUMMARY})
    SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "${CPACK_PACKAGE_VENDOR} <${CPACK_PACKAGE_CONTACT}>")
    SET(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
    SET(CPACK_DEBIAN_PACKAGE_DEBUG ON)
    SET(CPACK_DEBIAN_PACKAGE_DEPENDS ${PACKAGE_REQUIRES})
    SET(CPACK_DEBIAN_PACKAGE_DEPENDS "libqt4-gui ( >= 4.6 ), libqt4-xml ( >= 4.6 ), libqt4-sql-mysql, libmysqlclient18, libqt4-dbus, libqt4-network, libqt4-sql, libqt4-sql-mysql, libqt4-xml, libqtcore4, libqtgui4, libqtwebkit4") # Specify dependencies here
    SET(CPACK_SET_DESTDIR TRUE)
ENDIF(DPKG_FOUND AND NOT WIN32)

SET(CPACK_PACKAGE_EXECUTABLES "ddm" "DDM")
INCLUDE(CPack) 
```

ddm.desktop 看起来像：

```
[Desktop Entry]
Version=0.1
Name=Database Deployment Manager
Comment=Database Deployment manager
Exec=/opt/ddm/bin/ddm %U
Icon=ddm
Terminal=false
Type=Application
Categories=Qt;Development
MimeType=application/x-ddm-item;
GenericName=Database Deployment Manager 
```

ddm.xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<mime-info xmlns="http://www.freedesktop.org/standards/shared-mime-info">
 <mime-type type="application/x-ddm-item">
    <sub-class-of type="text/xml"/>
    <sub-class-of type="application/xml"/>
    <comment>Database Deployment Manager solution file</comment>
    <icon>ddm</icon>
    <glob pattern=".dmx" weight="50" />
    <magic priority="90">
          <match type="string" offset="2" value="!DOCTYPE DBM"/>
    </magic>
    <root-XML localName="ddm" />
  </mime-type>
 </mime-info> 
```

现在发生的事情是，当我运行`sudo make install`应用程序时，应用程序会自行安装在菜单中（但没有图标），但是当我运行`dpk -i package.deb`应用程序时，应用程序会自行安装，但不会创建任何 kde 菜单条目......

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:36:15.460

问题已解决：KDE 正在以下位置寻找图标和 .desktop 文件。

```
SET(DDM_DESKTOP_DIR     "/usr/share/applications/")
SET(DDM_PIXMAPS_DIR     "/usr/share/icons/") 
```

这确实解决了问题。

# firefox - 如何使用 Java 在 Selenium WebDriver 中设置自动检测代理设置

> ID：14235802
> 
> 赞同：2
> 
> 时间：2013-01-09T13:01:10.343
> 
> 标签：firefox, proxy, selenium-webdriver, autoproxy

嗨，我正在编写 Selenium WebDriver Java 代码/脚本。

```
public static WebDriver dr =null;
public static EventFiringWebDriver driver=null;

dr = new FirefoxDriver();

driver = new EventFiringWebDriver(dr);
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS); 
```

因此 Firefox 浏览器正在打开，但代理设置正在停止。

如果它是手动的，我去了工具->选项-设置->那里我已经为此网络提供了自动检测代理设置
它正在工作。

但是每当我通过脚本打开时，我认为新的配置文件正在打开。这就是为什么我使用脚本将此网络的自动检测代理设置设置为 true 的原因。

那么你能帮我怎么做吗？

谢谢拉朱

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:34:13.840

这是一个很好的解决方案：

```
import org.openqa.selenium.Proxy.ProxyType;` 

public static WebDriver dr = null;
org.openqa.selenium.Proxy proxy = new org.openqa.selenium.Proxy(); 
proxy.setSslProxy("proxyurl"+":"+8080); 
proxy.setFtpProxy("proxy url"+":"+8080); 
proxy.setSocksUsername("SSSLL277"); 
proxy.setSocksPassword("password"); 

DesiredCapabilities dc = DesiredCapabilities.firefox();
dc.setCapability(CapabilityType.PROXY, proxy); 
dr = new FirefoxDriver(dc); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:03:31.710

您至少可以在运行时使用 firefox 驱动程序设置配置文件的首选项。尝试以下方法：

```
FirefoxProfile ff = new FirefoxProfile();
ff.setPreference("network.proxy.type", ProxyType.AUTODETECT.ordinal());
FirefoxDriver ffD = new FirefoxDriver(ff); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T16:39:24.417

这是对我有用的解决方案，是前两者的组合，并且足够简单。不需要做个人用户认证。

```
import org.openqa.selenium.Proxy.ProxyType;
import org.openqa.selenium.firefox.FirefoxProfile;

FirefoxProfile profile = new FirefoxProfile();
profile.setPreference("network.proxy.type", 1);
profile.setPreference("network.proxy.http", "proxy.something.com");
profile.setPreference("network.proxy.http_port", 8080);
profile.setPreference("network.proxy.ssl", "proxy.something.com");
profile.setPreference("network.proxy.ssl_port", 8080);

WebDriver driver = new FirefoxDriver(profile); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T13:01:58.293

这就是我设置自动检测的方法：

```
FirefoxProfile profile = new FirefoxProfile();
Proxy proxy = new Proxy();
proxy.IsAutoDetect=true;
profile.SetProxyPreferences(proxy);
driver = new FirefoxDriver(profile); 
```

# iphone - 如何停止 UIScrollView 调用 drawRect: 在进入/离开可见区域的子层上？

> ID：14235804
> 
> 赞同：1
> 
> 时间：2013-01-09T13:01:16.203
> 
> 标签：iphone, ios, objective-c, ipad, animation

我有一个有点滞后的动画，我把它缩小到这个：

作为动画的一部分， a`UIScrollView`会自动滚动。即使子视图似乎已加载，但如果它们在滚动视图边界之外，则将`drawRect:`在这些视图上调用它们，因为它们被动画化回可见区域（我在`drawRect:`这些视图中的每一个上实现我自己的）。这就是让我的动画卡顿的原因。

对于滚动视图的每个子视图，我都将 shouldRasterize 设置为 true，没有区别。`UIScrollView`即使超出滚动视图的范围，我如何强制将每个视图保留在内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:56:03.367

将您的绘图代码从绘图矩形移到其他方法中。而不是渲染到视图的上下文中，而是渲染到图像上下文中。将此方法添加到绘图代码的开头以创建图像上下文：

```
UIGraphicsBeginImageContextWithOptions(
   CGSize size,
   BOOL opaque,
   CGFloat scale
); 
```

像这样使用它：

```
UIGraphicsBeginImageContextWithOptions(
   self.bounds.size,
   NO,       //if you are doing rounded corners or anything, else YES
   0.0       //Scales automatically for retina displays
);

//Need a reference to the context you just made?
CGContextRef ctx = UIGraphicsGetCurrentContext(); 
```

您的 CG 绘图代码正常工作。然后将上下文渲染为图像

```
UIImage * renderedImage = UIGraphicsGetImageFromCurrentImageContext(); 
```

别忘了

```
UIGraphicsEndImageContext(); 
```

从只需要绘制一次的地方调用这个绘图代码。这些是您可以覆盖的一些候选方法：

```
- (void)willMoveToSuperview:(UIView *)newSuperview //called when adding to a view
- (void)layoutSubviews  //called when first displayed, on frame change and after setNeedsLayout has been called. 
```

然后在视图上设置这些图像。如果你有按钮，你应该有 UIButton 的子类。您现在可以`- (void)setImage:(UIImage *)image forState:(UIControlState)state`Et 瞧，表演！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:08:08.793

我认为你这样做是错误的。而不是让 UIScrollView 告诉它的子视图绘制或不绘制不是要走的路。Apple 通过创建排队系统确实解决了 UITableViews 的这个问题。如果没有可重用的子视图，则将子视图排入队列。

大约一年前，我写了自己的收藏视图，这就是我必须走的路。它还可以节省内存，因为您正在重用子视图而不是创建新视图。

我知道它涉及更多，但它肯定会解决您的问题。

从 Apple 查看这段代码，他们使用类似的东西。

[https://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010080](https://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010080)

# wordpress - Wordpress 管理面板停止更新选项？

> ID：14235805
> 
> 赞同：0
> 
> 时间：2013-01-09T13:01:24.820
> 
> 标签：wordpress

晚上好，

我在 wordpress 网站[http://browsewire.net](http://browsewire.net)上工作，几天前运行良好，但现在我面临以下问题：

1.  尝试更新帖子、小部件并将图像上传到媒体目录，但该过程停止在空白页面而不更新任何内容。

2.  小部件的拖放正在工作，但在选项表中不做任何保存。

我已将我的 wordpress 安装更新到最新版本。请指导我如何修复它，因为我检查了我的控制台并没有发现任何类似错误的东西。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:59:53.993

你可以在function.php中试试这个

```
 add_action( 'init', create_function( '$a', "remove_action( 'init', 'wp_version_check' );" ), 2 );
 add_filter( 'pre_option_update_core', create_function( '$a', "return null;" ) ); 
```

# xml - Oracle xml_dom.writeToClob 返回错误的字符集

> ID：14235809
> 
> 赞同：1
> 
> 时间：2013-01-09T13:01:36.890
> 
> 标签：xml, oracle, encoding

我正在尝试将 XML 转换为 CLOB 并将其保存在表中。DB 版本为 Oracle 9.2.0.8。这就是我创建 XML 的方式。

```
DECLARE    
    p               dbms_xmlparser.parser;
    xml_doc         dbms_xmldom.domdocument;
BEGIN

    p := dbms_xmlparser.newParser;
    dbms_xmlparser..parseBuffer(p, '<?xml version="1.0" encoding="'||codepage||'"?><elm/>');
    d := dbms_xmlparser.getDocument(p);
    ...
END; 
```

但是在将 XML 转换为 CLOB 之后，变量 v_xml_clob 中的西里尔字符变得不可读：

```
v_xml_clob    clob;
DBMS_LOB.createtemporary (v_xml_clob, TRUE);
dbms_xmldom.writeToClob(xml_doc , v_xml_clob); 
```

但是当我将 XML 写入文件时，一切正常：`dbms_xmldom.writeToFile(xml_doc , PATH);` 这是文本变得错误的示例：

```
Сберегательные депозиты резидентов - национальная валюта
is becoming
бсх№хурђхыќэћх фхяючшђћ №хчшфхэђют - эрішюэрыќэрџ трыўђр 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:48:13.327

以这种方式解决它：

```
v_xml_clob := convert(v_xml_clob,'CL8ISO8859P5','CL8MSWIN1251'); 
```

# linux - SystemTap 脚本如何确定当前线程数？

> ID：14235815
> 
> 赞同：1
> 
> 时间：2013-01-09T13:01:57.217
> 
> 标签：linux, systemtap

我想编写一个 SystemTap 脚本，它可以确定探测调用中当前 PID 的实际线程数。此时数字应该与 */proc/4711/status*的输出中显示的相同。

我的第一种方法是计算*kprocess.create*和*kprocess.exit*事件的发生次数，但这显然只给你线程数的相对增加/减少。

SystemTap 脚本如何使用给定的 API 函数之一来确定这个数字？也许脚本可以以某种方式读取与用于 proc 文件系统输出相同的内核信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:04:30.063

在任何一种情况下，您都将受到竞争条件的影响 - stap 探针无法锁定内核结构，这需要保证任务列表在计数时不会更改。对于一般的 systemtap 探测上下文尤其如此，例如在 kprobe 的中间。

对于第一种方法，您可以添加任务列表的“probe begin {}”时间迭代，以从一些嵌入式 C 代码中初始化初始线程计数。一个挑战是从嵌入式 C 代码设置 systemtap 脚本全局变量（没有记录的 API），但是如果您查看翻译器生成的内容（stap -p3），它应该是可行的。

第二种方法是进行相同的迭代，但由于上述锁定原因，这通常不安全。

# javascript - 简单的javascript正则表达式提取以字母开头和结尾的部分

> ID：14235819
> 
> 赞同：1
> 
> 时间：2013-01-09T13:02:22.597
> 
> 标签：javascript, regex

我试图让这个正则表达式返回，并且只返回`"flies a"`

```
s = 'test <!-- flies are little birds --> end';
alert(s.match(/f(.*)a/)); 
```

为什么会返回

```
flies a
lies 
```

我怎样才能使 f 和一个强制性的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:06:49.177

`.match`返回一个数组。第一个元素是整个匹配的文本，其他元素是捕获组的内容。您有一个捕获组，因此第二个元素是它捕获的文本。

删除组或忽略数组中的其他元素。在任何情况下，您都必须访问第一个：

```
var match = s.match(/f(.*)a/)[0]; // or /f.*a/ 
```

* * *

PS：`alert`是个不好的调试工具，用`console.log`or`console.dir`来代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:06:42.823

不要放在括号里。

```
alert(s.match(/f.*a/)); 
```

方括号创建一个捕获组，让您可以指定您对匹配的特定部分感兴趣。在这种情况下，您对整个事物感兴趣，因此您不需要任何括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:08:02.263

只需删除括号或将整个表达式放入额外的括号中：

`s.match(/f.*a/)[0];` 或者 `s.match(/(f(.*)a)/)[1];`

# winforms - 我似乎无法让我的“Form.TopMost = true”工作

> ID：14235824
> 
> 赞同：0
> 
> 时间：2013-01-09T13:02:31.950
> 
> 标签：winforms

我正在尝试连接一个复选框来更改“Form.TopMost”。
每次我使用 Form.TopMost 我都会收到以下错误：

```
An object reference is required for the non-static field, method, or property 
'System.Windows.Forms.Form.TopMost.get' 
N:\VisualStudio\Projects\SpriteProject\YoutubeOverlay\Browser.cs    23  13  
YoutubeOverlay 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:05:50.890

如果要更改表单后面代码中的属性，则应使用：

```
this.TopMost = true; 
```

# ios - 如何在 iOS 中将命令行参数传递给 FFMpeg

> ID：14235827
> 
> 赞同：3
> 
> 时间：2013-01-09T13:02:38.060
> 
> 标签：ios, ffmpeg

这是一个初学者的问题，因为我是iOS新手（我今天开始），所以请原谅我的无知和缺乏iOS知识。

在为 Android 构建并成功使用 FFMpeg 之后，我想为 iOS 做同样的事情。[所以我按照这个链接](https://github.com/lajos/iFrameExtractor)成功地为 iOS 构建了 FFMpeg ，但是在经历了那么多痛苦之后，我对如何在 iOS 中使用 FFMpeg 感到困惑，我的意思是如何将命令行参数传递给`libffmpeg.a`文件？

我假设必须有一种方法可以将 .a 文件作为可执行文件运行，然后传递命令行参数并希望 FFMpeg 发挥作用，我在 Android 中也这样做了，而且效果很好。

我也知道我可以使用 ffmpeg.c 类并使用它的 main 方法，但问题仍然存在；如何传递这些命令行参数？

这里有什么我应该注意的吗，我现在正在做的事情是正确的，还是我的方法不够完善？

我想混合两个音频文件，所以这样做的命令是`ffmpeg -i firstSound.wav -i secondSound.wav -filter_complex amix=inputs=2:duration=longest finalOutput.wav`，我如何在 iOS 中做同样的事情？

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:17:19.593

您不会将参数传递给 .a 文件，因为它是一个库文件。它是您构建应用程序的工具，可让您访问 ffmpeg 库提供的功能。我不确定 Android 的运行状况如何，但很可能它正在生成一个命令行可执行文件。

查看 ffmpeg 文档，可能有一种方法可以使用该库执行您想要的操作，但是不太可能将 ffmpeg 作为独立的、传入参数的二进制文件构建和运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:20:07.733

你可以在你的`main.c`，当然你不会硬编码 args 这些只是为了说明

我假设您使用`ffmpeg`播放 ，因为您正在使用`iframeextractor`，实际上是您尝试做的事情的目标。

```
/* Called from the main */
int main(int argc, char **argv)

int flags, i;
/*
argv[1] = "-fs";
argv[2] = "-skipframe";
argv[3] = "30";
argv[4] = "-fast";
argv[5] = "-sync";
argv[6] = "video";
argv[7] = "-drp";
argv[8] = "-skipidct";
argv[9] = "10";
argv[10] = "-skiploop";
argv[11] = "50";
argv[12] = "-threads";
argv[13] = "5";
//argv[14] = "-an";
argv[15] = "http://172.16.1.33:63478/hulu-f4fa0821-767a-490a-8cb5-f03788760e31/1-hulu-f4fa0821-767a-490a-8cb5-f03788760e31.mpg";
argc += 14;
*/

/* register all codecs, demux and protocols */
avcodec_register_all();
avdevice_register_all();
av_register_all();

parse_options(argc, argv, options, opt_input_file);

. .. mo
} 
```

# css - 在 ie6 的 css 中旋转图像

> ID：14235838
> 
> 赞同：0
> 
> 时间：2013-01-09T13:03:30.320
> 
> 标签：css, internet-explorer, internet-explorer-6

我需要在 ie6 的 css 中旋转图像

有没有可能

我尝试了下面的代码但下面的代码都不起作用

```
.image-box

{ 

-filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);  /* IE6,IE7 */

-filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);  /* IE6,IE7 */

 ms-filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=2); /* IE8 */

 -ms-filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=2); /* IE8 */

 transform: rotate(180deg);

-moz-transform: rotate(180deg);

-webkit-transform: rotate(180deg);

-ms-transform: rotate(180deg);

  -sand-transform:  <rotate(180deg)>;

 } 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:07:19.663

您不应该在非供应商特定的 CSS 属性之前使用连字符。从 中删除连字符`-filter: ...`：

```
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);  /* IE6,IE7 */ 
```

此外，您可能需要`hasLayout`通过添加`overflow:auto`或`zoom:1`到您的 CSS 来触发。[这](http://jsfiddle.net/xvbFG/)是一个演示（我已经在 IE7 中使用 browserlabs 对此进行了测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:08:33.463

IE6 的支持有限，即使来自 MS。您可能应该使用 IE 条件注释来为 IE6 提供不同的图像或标记。这是关于这些[http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)

# mysql - MySql 5.5中@@Error（在MS SQL中）的替代品是什么

> ID：14235840
> 
> 赞同：0
> 
> 时间：2013-01-09T13:03:34.540
> 
> 标签：mysql, database, stored-procedures, error-handling

我正在 MySql 中编写一个存储过程，它只有一个插入命令。我想输出`'Success'`还是`'Failed'`基于命令执行成功与否。

在 SQL Server 中，我`@@Error`为此使用了系统变量。但是在 MySql 中找不到类似的东西，它会让我知道任何命令是否成功执行。

# android - 如何在 dalvikVM 中启用特定于垃圾收集器的日志

> ID：14235842
> 
> 赞同：2
> 
> 时间：2013-01-09T13:03:36.800
> 
> 标签：android, garbage-collection, dalvik

如前所述，我正在尝试在 dalvik virtual machine 中启用 GC 特定日志。我怎样才能做到这一点 ？

当我说 GC 特定日志时，我想监视 GC 中发生的所有函数调用（不仅仅是 logcat 中的 gc fiter，它只导致 GC_EXPLIIT 和 GC_CONCURRENT 和 GC_FOR_ALLOC），以便我可以制作流程图（哪个过程称为 GC，哪个算法gc 基于启发式等被调用）。

我尝试使用`adb shell dalvikvm [options] .`

Dalvik 虚拟机中是否有类似 -XX:+PrintGCDetails(of jvm) 的选项？

android框架代码库中是否有任何标志，如果设置将一直打印gc日志？

dalvikvm 的以下选项有什么作用？（一个好的在线参考会起作用）

-Xgc:[no]precise -Xgc:[no]preverify -Xgc:[no]postverify -Xgc:[no]concurrent -Xgc:[no]verifycardtable -XX:+DisableExplicitGC 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T02:02:29.000

我没有找到这些选项的详细文档。

查看源代码后，这些选项是：

*   精确：VM 线程堆栈中的每个项目可能只是整数或内部值或对象指针。并且为了注册这些信息，堆栈线程有一个寄存器映射来标记项目的状态。如果它是打开的，只有对象会被标记，这被称为精确/无小心 GC
*   xxx-verify：用于 vm GC 验证步骤
*   concurrent: 打开/关闭 GC 并发标记扫描步骤
*   ExplicitGC：打开/关闭 java API Runtime.gc() 或信号 GC。

以下是详细信息：

在 dalvik 源代码中，这些选项用于配置 dalvikvm GC：

```
} else if (strncmp(argv[i], "-Xgc:", 5) == 0) {
    //In VM thread, there is a register map for marking each stack item's status whether it is an object or internal value. And In GC step, only object item will be marked. If this value is OFF, all stack will be marked even if the item is only an integer.
    if (strcmp(argv[i] + 5, "precise") == 0)
        gDvm.preciseGc = true;
    else if (strcmp(argv[i] + 5, "noprecise") == 0)
        gDvm.preciseGc = false;
    //Only for GC verify check
    else if (strcmp(argv[i] + 5, "preverify") == 0)
        gDvm.preVerify = true;
    else if (strcmp(argv[i] + 5, "nopreverify") == 0)
        gDvm.preVerify = false;
    else if (strcmp(argv[i] + 5, "postverify") == 0)
        gDvm.postVerify = true;
    else if (strcmp(argv[i] + 5, "nopostverify") == 0)
        gDvm.postVerify = false;
    //Open/Close Dalvik vm GC markseep is concurrent or not
    else if (strcmp(argv[i] + 5, "concurrent") == 0)
        gDvm.concurrentMarkSweep = true;
    else if (strcmp(argv[i] + 5, "noconcurrent") == 0)
        gDvm.concurrentMarkSweep = false;
    //Only for GC verify cardtable which is used for marking the concurrent marksweep dirty field
    else if (strcmp(argv[i] + 5, "verifycardtable") == 0)
        gDvm.verifyCardTable = true;
    else if (strcmp(argv[i] + 5, "noverifycardtable") == 0)
        gDvm.verifyCardTable = false; 
    else {
        dvmFprintf(stderr, "Bad value for -Xgc");
        return -1;
    }
    ALOGV("Precise GC configured %s", gDvm.preciseGc ? "ON" : "OFF");
} 
```

PS：

要获取 Android dalvikvm 命令选项，您可以输入命令`adb shell dalvikvm -h`以获取详细信息。

Android 4.3(yakju-user 4.3 JWR66Y 776638 release-keys) 中的结果是

```
dalvikvm: [options] class [argument ...]
dalvikvm: [options] -jar file.jar [argument ...]

The following standard options are recognized:
  -classpath classpath
  -Dproperty=value
  -verbose:tag  ('gc', 'jni', or 'class')
  -ea[:<package name>... |:<class name>]
  -da[:<package name>... |:<class name>]
   (-enableassertions, -disableassertions)
  -esa
  -dsa
   (-enablesystemassertions, -disablesystemassertions)
  -showversion
  -help

The following extended options are recognized:
  -Xrunjdwp:<options>
  -Xbootclasspath:bootclasspath
  -Xcheck:tag  (e.g. 'jni')
  -XmsN  (min heap, must be multiple of 1K, >= 1MB)
  -XmxN  (max heap, must be multiple of 1K, >= 2MB)
  -XssN  (stack size, >= 1KB, <= 256KB)
  -Xverify:{none,remote,all}
  -Xrs
  -Xint  (extended to accept ':portable', ':fast' and ':jit')

These are unique to Dalvik:
  -Xzygote
  -Xdexopt:{none,verified,all,full}
  -Xnoquithandler
  -Xjnigreflimit:N  (must be multiple of 100, >= 200)
  -Xjniopts:{warnonly,forcecopy}
  -Xjnitrace:substring (eg NativeClass or nativeMethod)
  -Xstacktracefile:<filename>
  -Xgc:[no]precise
  -Xgc:[no]preverify
  -Xgc:[no]postverify
  -Xgc:[no]concurrent
  -Xgc:[no]verifycardtable
  -XX:+DisableExplicitGC
  -X[no]genregmap
  -Xverifyopt:[no]checkmon
  -Xcheckdexsum
  -Xincludeselectedop
  -Xjitop:hexopvalue[-endvalue][,hexopvalue[-endvalue]]*
  -Xincludeselectedmethod
  -Xjitthreshold:decimalvalue
  -Xjitblocking
  -Xjitmethod:signature[,signature]* (eg Ljava/lang/String\;replace)
  -Xjitclass:classname[,classname]*
  -Xjitoffset:offset[,offset]
  -Xjitconfig:filename
  -Xjitcheckcg
  -Xjitverbose
  -Xjitprofile
  -Xjitdisableopt
  -Xjitsuspendpoll

Configured with: debugger profiler hprof jit(armv7-a-neon) smp show_exception=1 
```

# php - 带有过滤参数的分页产品

> ID：14235845
> 
> 赞同：0
> 
> 时间：2013-01-09T13:03:42.340
> 
> 标签：php, sorting, pagination

我已经有一段时间没有使用 PHP 了，现在我必须解决一个关于带有分页和过滤的产品声明的问题（按价格，按最新产品等）。

这是我的 url 示例：`web.com/category-name`- 当我想对产品进行分页时，我为此使用`$_GET`变量，例如：`web.com/category-name?p=2`。

现在对于这个基本的分页，我需要添加过滤参数。我的第一个想法是将表单发送`post`和发送的数据进行排序保存到`SESSIONS`并始终检查，如果过滤参数在`SESSION`并且如果它们是，那么我将过滤产品。

但我不太确定这个解决方案是否干净......我不想`GET`用于过滤器参数，因为有很多可能的参数......

请问各位大神，遇到这种情况怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:23:29.900

我更喜欢使用 POST 并将参数信息保存在隐藏的输入中，SESSION 的问题在于，如果用户关闭浏览器/选项卡并返回，它将回到原来的位置而不是开始。

此外，如果您在网站的另一个模块（如 page=6）中使用相同的参数，它可能会在第 6 页显示另一个结果，而不是第一个结果。

# mongodb - Mongodb - 使用'$ or'查询没有结果

> ID：14235847
> 
> 赞同：0
> 
> 时间：2013-01-09T13:03:53.687
> 
> 标签：mongodb, mongodb-query

我的数据库上发生了非常奇怪的事情。我有一个查询：

`db.Tag.find({"word":"foo"})`

这东西匹配一个对象。这真好。

现在，有第二个查询

`db.Tag.find({$or: [{"word":"foo"}]})`

第二个没有给出任何结果。

我显然不明白某种魔法:(第二个查询有什么问题？

理论上，`$or`需要两个或更多参数，所以我可以用以下方法伪造它：

`db.Tag.find({$or: [{"word":"foo"},{"word":"foo"}]})`

但仍然没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:17:38.390

您的第二个查询非常好，它应该可以工作。尽管文档说，`$or`它对两个或多个表达式的数组执行逻辑运算，但它也适用于单个表达式。

这是一个示例，您可以查看并尝试使其正常工作：-

```
> db.col.insert({"foo": "Rohit"})
> db.col.insert({"foo": "Aman", "bar": "Rohit"})
>
> db.col.find({"foo": "Rohit"})
{ "_id" : ObjectId("50ed6bb1a401d9b4576417f7"), "foo" : "Rohit" }
> db.col.find({$or: [{"foo": "Rohit"}]})
{ "_id" : ObjectId("50ed6bb1a401d9b4576417f7"), "foo" : "Rohit" } 
```

因此，如您所见，您的查询在用于我的收藏时都可以正常工作。所以，其他地方肯定有问题。您确定您的收藏中有数据吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:36:45.170

好的，服务器管理员从 debian repo 安装了 mongodb。Debian repo 有 1.4.4 版本的 mongodb，aandd 看起来`$or`根本不支持：P

# c# - WCF，为什么让它变得更复杂？

> ID：14235850
> 
> 赞同：9
> 
> 时间：2013-01-09T13:04:19.040
> 
> 标签：c#, wcf

今天我有一个关于 WCF 通信风格的问题。

我有时会拒绝一点，所以以编程方式使用东西（想要控制自己）而且我不喜欢巨大的东西。有时需要两个程序部分之间的通信，有时在同一台机器上，有时在网络上。

所以我尝试以编程方式使用 WCF，而不是使用配置文件、svcutil 等。

如果我使用以下内容：

a) 定义合同

```
[ServiceContract]
    public interface IMyContract
    {
        [OperationContract]
        bool DoSomething(string something_in);
    } 
```

b) 编写一些代码

```
public class MySomething: IMyContract
        {
            public bool DoSomething(string something_in)
            {
                if(String.IsNullOrEmpty(something_in)
                      return false;
                return true;
            }
} 
```

然后以编程方式托管它

```
Uri baseAddress = new Uri("net.tcp://localhost:48080/MySimpleService");

            using (ServiceHost host = new ServiceHost(typeof(MyContract), baseAddress))
            {
                host.AddServiceEndpoint(typeof(IMyContract), new NetTcpBinding(), "");
                host.Open();

                Console.WriteLine("<Enter> to stop the service.");
                Console.ReadLine();

                host.Close(); 
```

然后从另一个程序中使用它：

```
var binding = new NetTcpBinding();
            var endpoint = new EndpointAddress("net.tcp://localhost:48080/MySimpleService");
            var channelFactory = new ChannelFactory<IMyContract>(binding, endpoint);

            IMyContract client = null;

            try
            {
                client = channelFactory.CreateChannel();
                bool test = client.DoSomething();
                ((ICommunicationObject)client).Close();
            }
            catch (Exception ex)
            {
                if (client != null)
                {
                    ((ICommunicationObject)client).Abort();
                }
            } 
```

有什么缺点？

不是更容易理解吗？

这样的事情会引起其他问题吗？

（我对此最感兴趣，因为我认为使用 svcutil 非常烦人，所以一个只是因为类更改，如果 wcf 服务仅用于自己程序的 cumminication，则可以简单地手动处理）那又如何我失踪了吗？

手动处理大型未读 XML 文件只是一种糟糕的风格吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:22:42.037

您的问题可以分为多个部分：

> 硬编码地址可以吗？

不。同样，我们不会硬编码连接字符串，我们也不会硬编码资源或服务的路径（至少不是绝对路径）。您永远不知道何时出于任何原因需要更改它 - 例如测试服务的新版本。如果您不想使用完整的端点配置，请至少使用简单的应用程序设置。

> 硬编码绑定和配置可以吗？

如果您不希望经常更改它，并且如果您对每次更改它时重新编译和重新部署服务器和客户端感到满意，您可以对其进行硬编码。API 提供了这一点，因为它是有效的用例。

> 在客户端和服务器之间共享服务合同和数据合同可以吗？

同样，这取决于您期望应用程序如何增长以及您期望部署的复杂性如何。如果您可以完全控制客户端和服务器代码，则共享程序集是有效的用例，但您必须记住它会在服务器和客户端应用程序之间引入紧密耦合。Svcutil 是一种工具，可帮助您从您无法控制的 SOAP 服务（您没有它们的代码或它们不是用 .NET 编写）或您希望与服务器进行松散耦合的客户端生成客户端。

我自己经常将配置与共享合同程序集一起使用 = 没有 svcutil。

编辑：

无论如何，与 XML 配置相比，编码配置没有技术缺陷（某些高级配置甚至在 XML 中不可用）。如果开发人员了解 WCF，他将同时了解 XML 和代码。如果开发人员不了解 WCF，他可能会对代码更满意，因为 XML 配置可能暂时对他隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:13:10.007

以编程方式执行此操作应该可以正常工作。当您想要更改某些内容或最终用户需要更改某些内容时，就会出现主要问题。如果端点地址或其他配置发生变化，则不必重新编译代码会容易得多。

我会说使用配置文件会更好，这样设置会保存在单独的位置，并且在需要时很容易找到。

如果您有充分的理由想要对用户隐藏它（例如，您不希望他们看到它/弄乱它），我只会选择硬编码配置。

# c# - Windows Phone 7 Webbrowser Bing（打开 javascript）

> ID：14235851
> 
> 赞同：1
> 
> 时间：2013-01-09T13:04:34.767
> 
> 标签：c#, visual-studio-2010, windows-phone-7, webbrowser-control

我正在创建一个 windows phone 7 应用程序，并且我在其中设置了一个网络浏览器，用于 bing 搜索站点。虽然在模拟器中尝试它时它说打开 javascript 以在移动设备上进行 bing 以获得更好的体验。

如何删除此消息并激活它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:38:13.000

在浏览器控件上设置`IsScriptEnabled`属性，例如在 XAML 中：

```
<phone:WebBrowser IsScriptEnabled="true" /> 
```

请注意，这必须在加载页面之前设置。

# iphone - 定义允许方向的方法在哪里？

> ID：14235855
> 
> 赞同：0
> 
> 时间：2013-01-09T13:04:51.327
> 
> 标签：iphone, ios, ipad, cocoa-touch, uiinterfaceorientation

我已经在我的应用程序上工作了一段时间，它也已经在 appStore 中出现了一段时间，但我现在想添加对横向方向的支持。我以为我刚刚取消选中目标摘要页面中的方向图标以仅启用纵向，但是当我现在检查它们时，什么也没有发生！已经添加了很多存储，但我找不到任何应该禁用景观的方法。那会是什么方法？我也没有在 appDelegate 中找到任何东西.. 我什至不知道从哪里开始寻找.. 在 xcode 中打开一个空项目时，它们的方向很好，根本没有任何方法..

在情节提要中，当单击视图并转到检查器时，它会显示方向：推断。所以问题不在这里。我使用 tabBar，并且 viewControllers 中的所有视图都设置为`Autoresize subviews`，因为类似的问题得到了回答。

**编辑**

使用目标属性摘要中的按钮为 iPhone 启用横向时，允许 iPhone 横向，但在为 iPad 启用时，没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:10:13.443

我通过为 UITabBarController 创建一个类并将 shouldAutorotate... 设置为 YES 解决了这个问题。尽管我的 iPad 故事板覆盖了摘要页面，但我觉得很奇怪。

**编辑**

这让我很难处理其他所有事情..设备现在可以正确旋转，但有时在横向启动时，它认为它是纵向的..仍在试图弄清楚这一点。即使当我询问应用程序设备状态栏的方向时，即使它真的是横向的，它也会返回纵向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:17:14.730

您可以在 info.plist 中添加或删除支持的方向

![在此处输入图像描述](../Images/73ef9c82f4e821ee1902bc6f35e1d2c5.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:06:27.820

`shouldAutorotate`在 iOS6 和`shouldAutorotateToInterfaceOrientation`以前的版本中。请注意，方向主要由 ViewController 定义。

# facebook - 如何在页面上实现 facebook，并测试用户是否喜欢它

> ID：14235857
> 
> 赞同：0
> 
> 时间：2013-01-09T13:04:55.367
> 
> 标签：facebook, facebook-like

```
<div class="like-button">

            <div class="fb-like-box" data-href="https://www.facebook.com/pages/Annupurnas-Cooking/526672940684211?ref=hl" data-width="292" data-show-faces="true" data-stream="true" data-header="true"></div>

            <div id="fb-root"></div>
            <script type="text/javascript">
                <!--
                var fbAsyncInit = function() {

                    var APP_ID   = '324859924285629';
                    var PAGE_ID  = '526672940684211';

                    FB.init({
                        appId  : APP_ID,
                        status : true, // check login status
                        cookie : true, // enable cookies to allow the server to access the session
                        xfbml  : true  // parse XFBML
                    });

                    FB.Event.subscribe('auth.sessionChange', function(response) {
                        if(response.session){
                            //check to see if user is a fan of the page
                            var query = FB.Data.query( 'select page_id from page_fan where uid='+response.session.uid+' and page_id ='+PAGE_ID);
                            query.wait( function(rows) {
                                if(rows.length){
                                    //user already likes your page
                                }else{
                                    //user has not yet liked your page
                                }
                            });
                        }else{
                            //user has not yet logged in
                        }
                    });

                    FB.Event.subscribe('edge.create', function(response) {
                        //user just clicked "like" on your page
                    });

                    FB.Event.subscribe('edge.remove', function(response) {
                        //user just clicked "unlike" on your page
                    });
                };

                (function() {
                    var e = document.createElement('script');
                    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
                    e.async = true;
                    document.getElementById('fb-root').appendChild(e);
                }());
                //-->
            </script>

        </div> 
```

我想实现我的facebook页面的like按钮。我想检查当前用户是否喜欢我们。有人可以告诉我我们如何做到这一点。

在代码中，我输入了我的 appId 和 facebook 页面 ID。我尝试使用它，但它错误地告诉我“必须使用活动访问令牌来查询有关当前用户的信息。”。

有人知道我如何将访问令牌放入此。我是否需要将 accesstoken 用于类似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:02:38.203

在这里检查： [API -> 用户](https://developers.facebook.com/docs/reference/api/user/)

> 您可以通过向 /PROFILE_ID/likes/PAGE_ID 发出 HTTP GET 来检查用户是否喜欢特定页面。这需要 user_likes（当前用户）或 friends_likes（当前用户的朋友）权限。

当您拥有 user_likes 权限时，您可以轻松地检查图表 api： [https ://graph.facebook.com/me/likes/PAGE_ID&access_token=xxxxxxxxx](https://graph.facebook.com/me/likes/PAGE_ID&access_token=xxxxxxxxx)

# c++ - 在 Windows x64 中检查内存泄漏的免费应用程序？

> ID：14235858
> 
> 赞同：15
> 
> 时间：2013-01-09T13:04:57.653
> 
> 标签：c++, c, memory-leaks

我的老板已分配我检查 API 的内存泄漏。该应用程序是用 C 和 C++ 创建的。所以有可能使用 malloc & new 分配内存。我想在 64 位 Windows 7 的调试器模式下检查 Visual Studio 2010 中的内存泄漏。任务管理器的问题是它没有显示稳定的读数（内存增加和减少少量）。API运行前后的差异也很小。所以我不能肯定地说每个周期都有 x 量的内存泄漏。

我在互联网上搜索并发现 linux 有一个很好的工具。但是我想要一个可靠的工具来满足我的要求（Windows 7）。我遇到过这些：

[http://winleak.sourceforge.net/](http://winleak.sourceforge.net/)

[http://sourceforge.net/projects/duma/?source=recommended](http://sourceforge.net/projects/duma/?source=recommended)

正如这里提到的：

[检查 Windows 中的内存泄漏](https://stackoverflow.com/questions/4720890/check-memory-leaks-in-windows)

工具

[http://technet.microsoft.com/en-us/library/bb457063.aspx](http://technet.microsoft.com/en-us/library/bb457063.aspx)

对我的要求没有用。如果您能推荐一个好的工具，那将对你们非常有帮助，因为提出这个要求的客户对我们公司来说非常重要。谢谢你！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T13:55:36.077

我建议使用[视觉检漏仪](http://vld.codeplex.com/)，因为它多次为我服务。您也可以尝试在 windows 上使用 valgrind（尽管我在这方面收效甚微）。[记忆博士](http://www.drmemory.org/)也帮助了我几次。

编辑：也看看[这里](https://stackoverflow.com/questions/6825376/how-to-detect-memory-leaks-in-qtcreator-on-windows)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-18T21:06:22.903

CRT 库有自己的内存泄漏检测机制。输出没有 Visual Leak Detector 提供的那么详细，但它比 VLD 快很多（在程序退出后轻松运行数十分钟）。

要启用 CRT 内存泄漏检测，请将​​以下内容放在开头`stdafx.h`（或其他合适的位置）：

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h> 
```

在程序的退出点之前添加以下内容：

```
_CrtDumpMemoryLeaks(); 
```

当`_CrtDumpMemoryLeaks()`被调用时，它将所有泄漏的内存打印到输出窗口。

有关[MSDN](http://msdn.microsoft.com/en-us/library/x98tx3cf.aspx)的更多信息。

**注意：**当我使用它时，我只得到了没有行号的不太详细的输出，尽管我`_CRTDBG_MAP_ALLOC`在`stdafx.h`.

# c# - 如何加快数据包处理？

> ID：14235861
> 
> 赞同：0
> 
> 时间：2013-01-09T13:05:21.843
> 
> 标签：c#, dump

我正在使用`pcap.net`库在 C#.net 中开发通话录音应用程序。对于数据包捕获，我使用的是 Wireshark 的`Dumpcap.exe`. 数据包文件在 5 秒内创建。要读取每个数据包文件，我所做的是

```
 OfflinePacketDevice selectedDevice = new OfflinePacketDevice(filename);
            using (PacketCommunicator communicator =
           selectedDevice.Open(65536,                                  // portion of the packet to capture
                // 65536 guarantees that the whole packet will be captured on all the link layers
                               PacketDeviceOpenAttributes.Promiscuous, // promiscuous mode
                               0))                                  // read timeout
            {

                communicator.ReceivePackets(0, DispatcherHandler); 
```

在**DispatcherHandler**方法中，我正在处理每个数据包。**DispatcherHandler**调用每个文件需要 0 秒。

**以相同**的方法处理 RTP 数据包数据包时出现延迟..

为了识别 rtp 数据包，我使用了键为 as 的**有序字典**`ipadrress+portnumber`。所以我需要在每个rtp数据包到来时检查这个键是否存在于字典中。此任务在处理每个转储文件时变慢。

```
if (objPortIPDict.Contains(ip.Source.ToString().Replace(".", "") + port))
{
 // here i write the rtp payload to a file
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:09:00.150

我读到了一些奇怪的东西：

1）为什么`Contains`在[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)中使用？

```
objPortIPDict.Contains(ip.Source.ToString().Replace(".", "") + port) 
```

如果`objPortIPDict`是字典使用[ContainsKey](http://msdn.microsoft.com/en-us/library/kw5aaea4.aspx)

2) 从第一个派生。如果这是一个[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)，它的[ContainsKey](http://msdn.microsoft.com/en-us/library/kw5aaea4.aspx)的执行时间为**O(1)**，因此不受字典本身数据量的影响。

是的，它可能会受到影响，如果数据量变得*如此之*大，整个应用程序会变慢，但就当前应用程序状态域而言，选择时间将始终保持不变。

# java - 如何让 Ant 在 javac 中使用 JAXB 2.2.x 而不是 Java 6 SE JAXB 类？

> ID：14235862
> 
> 赞同：2
> 
> 时间：2013-01-09T13:05:21.157
> 
> 标签：java, ant, jaxb, classpath

我正在更新旧版应用程序以使用 Java 6 SE 而不是 Java 5 SE。该应用程序使用 JAXB，在 Java 5 SE 下，它在类路径上有 JAXB 参考实现 jar。当我迁移到 Java 6 SE（更新 38）时，我遇到了一些问题（请参阅[链接的 Stackoverflow 问题](https://stackoverflow.com/questions/14223852/jaxb-date-conversions-fail-after-moving-from-java-5-se-to-java-6-se)），我在一些帮助下解决了这些问题。

所以接下来引起麻烦的是项目 Ant 构建脚本。当 Ant 编译任务执行时，它会选择 Java 6 SE 附带的 JAXB 的嵌入式版本，而不是我在类路径中包含的 jar 中的版本（JAXB 2.2.6 版本）。我相信 Java 6 SE 包括 JAXB 2.1.x。这会导致编译时错误，如下所示：

```
[javac] location: @interface javax.xml.bind.annotation.XmlElementRef
[javac]     @XmlElementRef(name = "abbrev", type = JAXBElement.class, required = false) 
```

在这种情况下，JAXB 2.1.x 中的 @XmlElementRef 不存在“必需”属性，但在 2.2.x 中存在。

**如何更改我的 Ant 构建脚本，以便它从构建类路径中获取 JAXB 2.2.6 jar，而不是从 Java 6 SE JDK 中打包的类？**

* * *

**更新：**基于彼得答案的解决方案

```
<target name="compile" depends="clean">
    <javac deprecation="on" 
            classpathref="prj.classpath" 
            srcdir="${src}" 
            destdir="${build.dir}" 
            debug="on" 
            debuglevel="lines,vars,source" 
            source="1.6">
        <compilerarg value="-Djava.endorsed.dirs=${lib.ext.dir}/jaxb"/>
    </javac>
</target> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:10:07.430

我相信认可库文件夹的概念是你的朋友。

即开关：

```
<compilerarg value="-Djava.endorsed.dirs=/some/path/lib/endorsed"/> 
```

认可中存在的那些罐子将被视为优先于任何其他加载的类（我相信）。

有关更完整的示例，请参阅正确答案：[如何让 Ant 更喜欢链接 JAR 中的类而不是 JDK 类？](https://stackoverflow.com/questions/1388441/how-to-make-ant-prefer-classes-from-a-linked-jar-over-jdk-classes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:30:09.547

只需将 jaxb 2.2 实现（例如 jaxb-impl.2.2.5）添加到编译器的类路径

```
<compilerarg value="-cp path_to_jaxb2_jar"/> 
```

这已经足够了，JAXB 将通过来自 jar 的 META-INF/services/ 的信息自动发现新的 JAXB 提供程序，并使用它而不是默认的内部提供程序。请参阅 JAXBContext.newInstance API“发现 JAXB 实现”

# mysql - 无法安装 MySql Workbench

> ID：14235864
> 
> 赞同：1
> 
> 时间：2013-01-09T13:05:26.367
> 
> 标签：mysql, linux, fedora, mysql-workbench, mysql-gui-tools

当我尝试使用 yum 命令安装[MySql Workbench时：](http://wb.mysql.com/)

```
yum install mysql-workbench-gpl-5.2.45-1fc17.i686.rpm 
```

我收到这些错误：

```
Error: Package: mysql-workbench-gpl-5.2.45-1fc17.i686 (/mysql-workbench-gpl-5.2.45-1fc17.i686)
       Requires: /bin/python
Error: Package: mysql-workbench-gpl-5.2.45-1fc17.i686 (/mysql-workbench-gpl-5.2.45-1fc17.i686)
       Requires: libzip.so.2
Error: Package: mysql-workbench-gpl-5.2.45-1fc17.i686 (/mysql-workbench-gpl-5.2.45-1fc17.i686)
       Requires: libctemplate.so.2
You could try using --skip-broken to work around the problem
You could try running: rpm -Va --nofiles --nodigest 
```

*这些错误是什么？我该怎么做才能安装这个`MySql`GUI 工具？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:55:47.873

因为您正在安装`RedHat 6`操作系统基础 RPM。您必须先升级或安装所需的依赖项。在您的情况下升级/安装`python` `libzip` `ctemplate`RPM 包。

注意：`libzip/ctemplate`不是 RedHat 6 操作系统的一部分。您必须从第三方来源下载。

# java - Java中TreeMap的迭代器返回错误

> ID：14235867
> 
> 赞同：0
> 
> 时间：2013-01-09T13:05:35.263
> 
> 标签：java, map, iterator, treemap, sortedmap

我有一个 TreeMap 定义如下：

```
final TreeMap<ArrayList<String>,String> mymap = new TreeMap<ArrayList<String>,String>(comparator); 
```

当我尝试像这样迭代它时：

```
Iterator iter = (Iterator) mymap.entrySet().iterator();
    while (iter.hasNext()) {
        Map.Entry entry = (Map.Entry) iter.next();
    } 
```

我收到错误消息，例如**The method hasNext() is undefined for the type ObjToIntMap.Iterator** on the 2nd line and **Multiple markers at this line - Map.Entry 是原始类型。对泛型类型 Map.Entry 的引用应**在第 3 行参数化。

此错误的根源是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:08:29.720

也许你导入了错误的`Iterator`类？你确定你已经`java.util.Iterator`从另一个名为的包中导入并且没有其他类`Iterator`吗？

如果您导入了正确的`Iterator`类，您可以删除类型转换并将泛型类型添加到迭代器：

```
Iterator<Map.Entry<ArrayList<String>, String>> iter = mymap.entrySet().iterator() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:15:03.507

您知道，一旦添加了密钥，您就无法更改它，并且它的具体类型无关紧要（或理想地使用）

```
final Map<List<String>,String> mymap = new TreeMap<>(comparator);
for (Map.Entry<List<String>, String> entry : mymap.entrySet()) {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:14:48.507

您可以使用 for-each 循环遍历地图：

```
for(Map.Entry<List<String>,String> entry : mymap.entrySet()) {
    List<String> key = entry.getKey();
    String value = entry.getValue();

    // Do something useful with the key and value
} 
```

`mymap.keySet()`或者，您可以使用或值遍历键`mymap.calues()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T13:11:16.367

尝试

```
 Iterator<Entry<ArrayList<String>, String>> iter = mymap.entrySet().iterator();
    while(iter.hasNext()) {
        Entry<ArrayList<String>, String> entry = iter.next();
    } 
```

# php - 缺少临时文件夹

> ID：14235871
> 
> 赞同：3
> 
> 时间：2013-01-09T13:05:41.467
> 
> 标签：php, apache, localhost

我正在使用内置的 apache 服务器和 php/mysql 在 moodle 2.4 上开发 mac OSX 10.8

我遇到的问题是为什么我尝试上传任何内容我收到错误消息 PHP 缺少临时文件夹。

然后我将 Live Copy 下载到我的笔记本电脑上，因为我知道这可以正常工作，但在我的本地主机上仍然出现相同的错误。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T13:11:56.510

打开您的 php.ini 文件，查看值`upload_tmp_dir`并仔细检查该路径是否存在。显然，那个 apache 也有对它的写访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-09T18:15:36.633

补充一点，在 Windows 上，请参考 php.ini 文件中相同的 upload_tmp_dir 设置，并确保 IUSR 帐户对该目录具有完全控制/写入权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-17T07:14:08.477

作为解决方案，我建议问题可能出在`open_base_dir` **php.ini**常量上。如果这个常数有一些价值。

## 可能的解决方案 1

你可以删除`open_basedir`参数。或许，这一举措可以解决问题。

## 可能的解决方案 2

在某些情况下，上述解决方案可能很危险。如果出现，我建议追加`:/tmp`而不是删除 open_basedir `open_basedir`。**可以通过在冒号后添加PHP**临时目录来完成此移动`open_basedir`：

```
open_basedir = "old-path:/tmp" 
```

然后，用终端命令重启 php7.2-fpm

```
sudo service php7.2-fpm restart 
```

或者你的**PHP**版本。

```
sudo service php7.x-fpm restart 
```

通常，可以通过调用 phpinfo() 和导航 `ini_path`块来检测 php.ini 路径。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-11-22T18:34:34.507

更改 /tmp 文件夹的权限 chmod 777 /tmp

# bash - 展开 java 清单文件 fin bash

> ID：14235872
> 
> 赞同：1
> 
> 时间：2013-01-09T13:05:41.907
> 
> 标签：bash, manifest.mf

在 Java 中，META-INF/MANIFEST.MF 文件具有最大行长度。除此之外，会插入一个自动换行符，并在下一行的开头用空格表示，如下所示：

```
Manifest-Version: 1.0
Export-Package: com.google.common.net;uses:="com.google.common.base,ja
 vax.annotation[file continues]
Bundle-Name: Guava: Google Core Libraries for Java 
```

`grep`不幸的是，这使得`sed`bash 变得很痛苦。

您将如何使用 bash 将其解包到其中？

```
Manifest-Version: 1.0
Export-Package: com.google.common.net;uses:="com.google.common.base,javax.annotation[file continues]
Bundle-Name: Guava: Google Core Libraries for Java 
```

我会尝试`sed`，但它只能在每行的基础上工作，而且我也无法`tr`正常工作。

谢谢！

编辑：[相关问题](https://stackoverflow.com/questions/10318189/sed-with-newlines-and)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:24:00.323

试试这个 Perl 单行：

```
$ perl -0777 -wpe 's/\n //g' MANIFEST.MF 
```

它删除每个换行符的实例，后跟一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-25T15:23:58.920

使用 -z 以空行分隔，-i 就地编辑

```
sed -i -z 's:\n ::g' MANIFEST.MF 
```

我的清单有 CR，所以

```
sed -i -z -r 's:\r?\n ::g' MANIFEST.MF 
```

# javascript - Indesign 脚本：如何为对话框添加颜色 staticTexts

> ID：14235873
> 
> 赞同：2
> 
> 时间：2013-01-09T13:05:42.283
> 
> 标签：javascript, dom-events, adobe-indesign

目前正在使用 JavaScript 为 Indesign CS6 开发脚本。我正在寻找一种在对话框 UI 中为标签添加颜色的方法。示例代码如下：

```
var myDialog = app.dialogs.add({name:"User Interface Example Script", canCancel:true});
with(myDialog){
    //Add a dialog column.
    with(dialogColumns.add()){
        //Create a border panel.

        with(borderPanels.add()){

            with(dialogColumns.add()){
                //The following line shows how to set a property as you create an object.
                staticTexts.add({staticLabel:"Message:"}); 
```

我想知道如何使该标签 Message 成为自定义颜色。

我找到了使用 JavaScript API 中的其他类的部分解决方案，但是我仍然想知道上述是否可行。

```
 var w = new Window("dialog");
var s = w.add ("statictext", undefined, "Static");
var e = w.add ("edittext", undefined, "Edit");
var b = w.add ("button", undefined, "Button");

// The window's backround
w.graphics.backgroundColor = w.graphics.newBrush (w.graphics.BrushType.SOLID_COLOR, [0.5, 0.0, 0.0]);
// Font and its colour for the first item, statictext
s.graphics.font = ScriptUI.newFont ("Helvetica", "Bold", 30);
s.graphics.foregroundColor = s.graphics.newPen (w.graphics.PenType.SOLID_COLOR, [0.7, 0.7, 0.7], 1);
// Font and colours for the second item, edittext
e.graphics.font = ScriptUI.newFont ("Letter Gothic Std", "Bold", 30);
e.graphics.foregroundColor = e.graphics.newPen (e.graphics.PenType.SOLID_COLOR, [1, 0, 0], 1);
e.graphics.backgroundColor = e.graphics.newBrush (e.graphics.BrushType.SOLID_COLOR, [0.5, 0.5, 0.5]);
// Font for the tird control, a button. Can't set colours in buttons
b.graphics.font = ScriptUI.newFont ("Minion Pro", "Italic", 30);
w.show (); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:36:35.860

如果您查看[API](http://jongware.mit.edu/idcs5/inxx.html)，静态文本有两个单独的类（`StaticText (SUI)`和`StaticText`）。看起来第一个类[StaticText (SUI)](http://jongware.mit.edu/idcs5/pc_StaticText%20%28SUI%29.html)提供了为静态文本着色的能力，而第二个[StaticText](http://jongware.mit.edu/idcs5/pc_StaticText.html)没有。

在您的问题中，您显示的第一个代码片段正在使用`StaticText`该类，因此它无法使用图形选项（颜色）。第二个代码示例正在使用`StaticText (SUI)`该类，这就是您能够为它着色的原因。

[我在这里](http://forums.adobe.com/docs/DOC-1025)找到了一个很好的概述，您可能会对 UI API 之间的区别感兴趣。

因此，要回答您的问题，为了给对话框添加颜色，您必须使用窗口和脚本 UI 类 (SUI) 创建自己的对话框，而不是使用“内置”对话框类。

# java - 对动态表使用标准 API

> ID：14235874
> 
> 赞同：0
> 
> 时间：2013-01-09T13:05:48.363
> 
> 标签：java, database, jpa, criteria-api, persistence.xml

我使用criteria-api对数据库进行sql查询，它工作得很好。但是现在我需要使用动态表，其中可以创建或销毁一些表，并且可以添加或删除一些列。

我想在apache的dynamicBean中管理这个实体，然后我可以创建bean并编辑列。

如果bean不在文件persistence.xml中并且它是动态bean，我如何使用criteria-api制作一个sql语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:31:25.537

不确定动态 bean，但您可能希望调查 EclipseLink 的动态实体支持，

[http://www.eclipse.org/eclipselink/documentation/2.4/solutions/softwareasaservice002.htm#BABFJDCF](http://www.eclipse.org/eclipselink/documentation/2.4/solutions/softwareasaservice002.htm#BABFJDCF)

# php - 预订系统 - 可用表

> ID：14235878
> 
> 赞同：1
> 
> 时间：2013-01-09T13:06:01.980
> 
> 标签：php, mysql, sql

我已经为此工作了几天，但我无法弄清楚。我希望你能帮助我。

我正在开发预订系统，我想检查 DATE 和 TIME 是否有可用的桌子。这就是我的数据库的样子。

![在此处输入图像描述](../Images/100d5511c6fa239bd619f4e2497f1523.png)

我想将可用表放入选择下拉菜单中，因此在网站上它只显示可用表。

如果我使用以下查询，我可以获得储备表

```
SELECT res.reserveringsnr, datum, begintijd, eindtijd, tafr.tafelnr FROM reserveringen AS res
INNER JOIN tafels_regel AS tafr
ON res.reserveringsnr = tafr.reserveringsnr
WHERE (res.datum = "2013/12/18" AND (res.begintijd BETWEEN "12:00:00" and "14:00:00")) 
```

因此，该查询将保留表排除在外，但这就是我卡住的地方。我不知道如何检查某个表是否在 DATE 和 TIME 上保留。

（注意：日期和时间将由变量填写，但对于示例我只使用文本）

## 编辑：处理@sebt 他的解决方案

首先，回答你的问题

1.  预订总是在同一天
2.  预订有固定的时间，总是 2 小时。

我已经编辑了 sebt 对我的价值观的查询：

```
 SELECT t.* FROM
    tafels t
LEFT JOIN
    (SELECT tafelnr FROM
          tafels_regel tf
    INNER JOIN
          reserveringen res
    ON tf.reserveringsnr=res.reserveringsnr
    WHERE
    res.datum="2012/01/12" AND
    res.begintijd<"19:00:00" AND
    res.eindtijd>"21:00:00" 
    )
ReservationsAtThisTime
ON t.tafelnr=ReservationsAtThisTime.tafelnr
WHERE ReservationsAtThisTime.tafelnr IS NULL 
```

此查询输出以下结果 ![在此处输入图像描述](../Images/4f2976775bacc5a1276e84f6edfe8760.png)

如您所见，查询结果显示所有 tafels (12)。

我还将表 reserveringen、tafels_regel 和 tafels 导出到 .csv（请参阅下面的已编辑 .csv）

## 编辑2：

好吧，我再次编辑了我的查询，它适用于一部分。这是查询（[截图](http://s9.postimage.org/i35e5bin3/querryryryreyry.png)）

```
 SELECT t.* FROM
    tafels t
LEFT JOIN
    (SELECT tafelnr FROM
          tafels_regel tf
    INNER JOIN
          reserveringen res
    ON tf.reserveringsnr=res.reserveringsnr
    WHERE
    res.datum="2013/01/12" AND
    res.begintijd <= "19:00:00" AND
    res.eindtijd >= "21:00:00" 
    )
ReservationsAtThisTime
ON t.tafelnr=ReservationsAtThisTime.tafelnr
WHERE ReservationsAtThisTime.tafelnr IS NULL 
```

2013/01/12 有 2 个预订。（[下载](http://nivali.com/reserverings_systeem.csv)编辑的.csv）

预约1：tafel 1 19:00-21:00

预订2：tafel 11 和 tafel 12 20:00 至 22:00

当我运行上面的查询时，唯一没有显示的 tafel 是 tafel 1，因为 tafel 1 是从 19:00 到 21:00 保留的。但是，从 20:00 到 22:00 tafel 11 和 12 也保留。

在查询结果中可以看到，只有 tafel 1 是 reserverd。但是，当我从 19:00 到 21:00 进行另一次预订时，我正在检查可用的 tafel，然后 tafel 11 和 tafel 12 仍然显示。

tafel 19:00 是免费的，没错，但因为我们总是坐 2 个小时，所以我们不能坐在那里。

再次感谢@sebt 的输入，希望您能通过此查询进一步帮助我！

## 问题解决了

感谢大家的帮助，这是最后的查询

```
SELECT t.* FROM
    tafels t
LEFT JOIN
    (SELECT tafelnr FROM
          tafels_regel tf
    INNER JOIN
          reserveringen res
    ON tf.reserveringsnr=res.reserveringsnr
    WHERE
    res.datum="2013/01/12" AND
    res.eindtijd > "19:00:00" AND
    res.begintijd < "21:00:00" 
    )
ReservationsAtThisTime
ON t.tafelnr=ReservationsAtThisTime.tafelnr
WHERE ReservationsAtThisTime.tafelnr IS NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:09:17.347

我认为您的问题措辞有点令人困惑，因为 SQL“表”（数据库表）与数据库中的一个对象（我猜）是餐厅表之间的歧义，在荷兰语中称为“tafel” ?

（让我们继续称它们为“tafel”，因为这样可以消除歧义）

要仅选择未保留的 tafels *，*您可以将所有 tafels 加入到 [desired time] 当前的保留集，并仅返回没有此类保留的 tafels：

```
SELECT t.* FROM
    Tafels t
LEFT JOIN
    (SELECT tafelnr FROM
          Tafels_regel tf
    INNER JOIN
          Reserveringen res
    ON tf.reserveringnr=res.reserveringnr
    WHERE
    res.Datum=[desired date] AND
    res.begintijd<[desired time] AND
    res.eindtijd>[desired time]
    ) ReservationsAtThisTime
ON t.tafelnr=ReservationsAtThisTIme.tafelnr
WHERE ReservationsAtThisTime.tafelNR IS NULL 
```

这可能仍需要一些调整，例如：

1.  跨天的预订（即盯着某一天并在另一天结束）将无法正确处理。（但也许你不需要这个）
2.  一张桌子将在 10/01/2012 12:30 显示为可用，而实际上它是从 2012 年 1 月 1 日 12:45 开始保留的（也许没有人对至少在 10/01/2012 不免费的桌子感兴趣X 分钟 - 1 小时？ - 在他们想要的开始时间之后？）。

**编辑（在下面回答 OP 的评论）：**

查看您的数据，我可以看到您在 2013 年 1 月 12 日的 19:00 到 21:00 预订了 Tafel 1。我明白为什么您没有得到预期的结果（即不应显示 Tafel 1，因为它不是免费的）：

1.  您在查询中使用的日期是 2012 年而不是 2013 年。（这可能源于我的示例，我使用 2012 年）
2.  我将示例设计为使用单个时间点“期望时间”。我的想法是，“所需时间”将是一个点（例如 19:30） - 因此从（例如）19:00 开始到 20:00 结束的预订将使这个所需时间不可用。因为您使用的“期望时间”是一个范围（19:00 到 21:00），并且恰好与预订的范围*完全*一样，所以查询中的“<”和“>”是由于与“期望时间”冲突（“<=”和“>=”会解决此问题），因此未能获取此保留。

但是，由于您说所有预订都是 2 小时，因此仅使用所需的开始时间来指定“冲突预订”会更容易，如下所示：“冲突预订”是指在 2 小时内占用任何时间的预订所需的开始时间：

一个。res.Datum = [期望日期]；和 b。res.eindtijd>[期望的开始时间]；和 c。res.begintijd<[期望的开始时间 + 2 小时]

我不完全确定代码将如何工作以增加 2 小时（我的专长是 MS-SQL 而不是 MySQL，日期/时间操作可能有点特定于 SQL 的版本）。

**EDIT2（回答 OP 重新编辑的问题）：**

为了让事情更清楚，我将定义这些术语：

*现有*预订：数据库中已存在。有 TafelNr、Date、StartTime (begintijd) 和 EndTime (eindtijd)

*建议的*的预订：用户想要进行的预订 - 自然它在数据库中尚不存在，或者有 TafelNr。有日期、开始时间、结束时间。

（您已经使用 StartTime 和 EndTime 为 Proposed booking 实现了查询。我建议只使用 StartTime，然后使用 [StartTime+2 hours]。但是您使用的哪种方式对我们正在谈论的问题）

你是对的，如果查询工作正常，不应该显示 tafels 11 和 12。您在 19:00 至 21:00 期间提出的预订应与 20:00 至 22:00 的现有预订发生冲突。但正如您所发现的，这种冲突并没有按应有的方式检测到。

原因是您的开始/结束时间比较略有错误。你编码的方式：

```
res.begintijd <= [Proposed Start time] AND
res.eindtijd >= [Proposed End time] 
```

只会发现现有预订有冲突，如果它**跨越**提议的预订，则只会发现它存在冲突：完全相同的时间，或在提议的预订之前和/或之后延长。

将两个预订（现有的和提议的）想象成平行的乐高积木沿相邻线滑动是有帮助的。他们根本无法联系（好）；或者只是联系（一个人的结束=另一个人的开始：好，没有冲突 - 只是！）；或者一个的结束可以延伸到另一个的开始（冲突）；或者一个可以跨越另一个，同时开始或在另一个之前开始，并与另一个同时或稍后结束（冲突）。

这是我多年前在使用预订系统时发现的一个技巧。找到冲突的正确比较（如我上面之前的编辑）是：

```
ExistingBookingEndTime>ProposedBookingStartTime AND
ExistingBOokingStartTime<ProposedBookingEndTime 
```

或者，使用您的对象名称：

```
res.eindtijd>"19:00:00" AND
res.begintijd<"21:00:00" 
```

起初这可能没有意义，但如果您考虑乐高积木，它就会有意义。

**请注意**：

**1.**我使用 < 和 >，而不是 <= 和 >=，因为我假设预订可以相互延伸并“接触”，只要它们不重叠；

**2.**比较日期和时间时要小心——如果只是比较它们，就好像它们是数字或字符串一样，它可能会给出奇怪的结果。我不知道 MySQL 是如何处理这个问题的，但这是我一直很小心/偏执的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:38:23.797

好吧，我不太了解您的数据库结构。但是为了让你走上正轨：

1.  您可以简单地查询所有表
2.  从结果集中排除反转表

就像是：

```
SELECT tafelnaam FROM Tafels WHERE tafelnr NOT IN (SELECT tafelnr *OF YOUR RESEVED TABLES*) 
```

# codeigniter - Codeigniter 捕获数据库错误

> ID：14235886
> 
> 赞同：3
> 
> 时间：2013-01-09T13:06:29.680
> 
> 标签：codeigniter, codeigniter-2

我正在寻找一种方法来捕获所有数据库错误（如果以及何时发生）并向我的电子邮件发送错误报告。对于常规 php 错误，我扩展了`CI_Exceptions`类并添加了除了日志记录之外的电子邮件发送代码。但是数据库错误并没有消失`CI_Exceptions`，而是直接记录下来`CI_DB_Driver->query()`，我不想修改系统文件夹中的任何文件。

此外，我不想围绕应用程序执行的每个查询编写日志记录代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T00:25:31.487

我很想扩展 CI_Exceptions show_error 方法来捕获通过“error_db”模板传递的任何错误，而不是通过 db 驱动程序进行搜索。

由于您已经使用电子邮件代码扩展了 CI_Exceptions，这似乎是最佳实践。

```
function show_error($heading, $message, $template = 'error_general', $status_code = 500)
{
    set_status_header($status_code);

    $message = '<p>'.implode('</p><p>', ( ! is_array($message)) ? array($message) : $message).'</p>';

    if ($template == 'error_db')
    {
        // do email send here with $message
    }

    if (ob_get_level() > $this->ob_level + 1)
    {
        ob_end_flush();
    }
    ob_start();
    include(APPPATH.'errors/'.$template.'.php');
    $buffer = ob_get_contents();
    ob_end_clean();
    return $buffer;
} 
```

# ruby - 如何在 CentOS 5.5 中安装 RVM？

> ID：14235887
> 
> 赞同：0
> 
> 时间：2013-01-09T13:06:33.033
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, rvm

我按照此链接安装 RVM [https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

然后发出命令`\curl -L https://get.rvm.io | bash -s stable`

我收到以下错误：

```
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
 100   185  100   185    0     0    105      0  0:00:01  0:00:01 --:--:--     0
 curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:
 error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
 More details here: http://curl.haxx.se/docs/sslcerts.html

 curl performs SSL certificate verification by default, using a "bundle"
 of Certificate Authority (CA) public keys (CA certs). The default
 bundle is named curl-ca-bundle.crt; you can specify an alternate file
 using the --cacert option.If this HTTPS server uses a certificate signed 
 by a CA represented in  the bundle, the certificate verification probably
 failed due to a  problem with the certificate (it might be expired, 
 or the name might not match the domain name in the URL).
 If you'd like to turn off curl's verification of the certificate, use
 the -k (or --insecure) option. 
```

我该如何解决这个问题？在 CentOS 5.5 中安装 RVM 是否有更好的安装手册？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:53:14.923

跑：

```
sudo curl -L http://curl.haxx.se/ca/cacert.pem -o /etc/pki/tls/certs/ca-bundle.crt 
```

它会更新你的证书（我已经在 centos 5.6 上测试过）。

# ajax - 未调用 JSF2 Richfaces 4.1 动态选择 valuechange 事件 - 在另一个表单内

> ID：14235888
> 
> 赞同：1
> 
> 时间：2013-01-09T13:06:37.800
> 
> 标签：ajax, jsf, select

我正在从一种形式调用弹出窗口。该弹出窗口有另一种形式。弹出窗口显示，但弹出窗口内有一个选择框未按预期工作。如果选择框中的值是从支持 bean 动态填充的，则不会为这些值调用值更改事件。该事件仅针对硬编码调用`<selectItem />`。请参阅下面的示例代码，因此仅用于`itemLabel="1"`调用`itemLabel="2"`该`fBean.onChange`方法。

动态选择项值更改的生命周期阶段不完整：以下是第一次阶段：

开始阶段 RESTORE_VIEW 1
结束阶段 RESTORE_VIEW 1
开始阶段 RENDER_RESPONSE 6
结束阶段 RENDER_RESPONSE 6

下次以后，中间还会添加以下阶段：

START PHASE APPLY_REQUEST_VALUES 2
END PHASE APPLY_REQUEST_VALUES 2
START PHASE PROCESS_VALIDATIONS 3
END PHASE PROCESS_VALIDATIONS 3

我试过`<a4j:log />, <h:messages />`了，浏览了 http 帖子，但不知道为什么会这样。将不胜感激任何帮助。谢谢

```
<h:form id="aForm">
    <a4j:outputPanel>
        <a4j:commandLink value="show" actionListener="#{aBean.onClick}"
            limitRender="true" render=":fForm"
            oncomplete="#rich:component('fModalPanel')}.show();"/>  
    </a4j:outputPanel>    
</h:form>

<ui:include src="fPopup.xhtml"/>

<!-- Contents of fPopup.xhtml --> 

<rich:popupPanel id="fModalPanel" ...>
    <h:form id="fForm">
        <h:selectOneMenu value="#{fBean.selected}">
            <f:selectItems value="#{fBean.selectItems"/>
            <f:selectItem itemLabel="1" itemValue="1"/>
            <f:selectItem itemLabel="2" itemValue="2" />
            <a4j:ajax event="valueChange" 
                execute="@this" render="fSubPnl"
                limitRender="true"
                listener="#{fBean.onChange}"/>
        </h:selectOneMenu>

        <rich:panel id="fSubPnl">
            <h:outputText value="#{fBean.selected}" />
        </rich:panel>

    </h:form>

</rich:popupPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-19T03:26:56.190

jsf复杂，移到Angularjs

# c# - Extjs Ajax 文件下载请求 C# MVC

> ID：14235896
> 
> 赞同：6
> 
> 时间：2013-01-09T13:06:50.450
> 
> 标签：c#, ajax, extjs, get, download

我希望客户端在单击按钮时下载存储在我的数据库中的文件。我发送这个 ajax 请求并从服务器端获取它。

EXTJS：

```
downloadFile: function (a, b, c) {
    var feed_id =this.getMyfeedwindow().down('form').getComponent('FeedId').text;
    Ext.Ajax.request({
        url: '/Feed/Download',
        method: 'GET',
        params: {
            fileID: feed_id, //this.form.getComponent('file').value,
        },
        failure: function (response) {
            alert('failed  !');
        },
        success: function (response) {
            alert('success!');
        },
    });
}, 
```

然后使用此代码块满足要求。

C＃：

```
 public void Download(string fileID){
    Response.ContentType = "application/force-download";
    Response.AddHeader("Content-Disposition", "attachment; Filename=\"Logo1.jpg\"");
    Response.BinaryWrite(data);
    Response.End();
 } 
```

当我用 firebug 检查网络时，似乎我的请求使用这些参数成功返回。

```
Cache-Control   private
Content-Disposition attachment; filename="Logo1.jpg"
Content-Type    application/force-download
Date    Wed, 09 Jan 2013 12:51:54 GMT
Server  Microsoft-IIS/8.0
Transfer-Encoding   chunked
X-AspNet-Version    4.0.30319
X-AspNetMvc-Version 4.0
X-Powered-By    ASP.NET
X-SourceFiles   =?UTF-8?B?RTpcVXRrdUNhblxQcm9qZWN0c1xURlNcQlRPTVxCVE9NXEZlZWRcRG93bmxvYWQ=?= 
```

虽然返回成功，但下载并没有开始。我阅读了很多问题和文章，但大多数答案都说添加 force-download 标头可以解决问题。我错过了哪一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:33:06.020

要处理下载，您应该使用提供的帮助程序之一

*   System.Web.MVC.FilePathResult
*   System.Web.MVC.FileStreamResult
*   System.Web.MVC.FileContentResult

大多数时候我都在使用`System.Web.MVC.FileStreamResult`自我。像这样使用它

```
FileStreamResult result = new FileStreamResult(stream, contentType);
result.FileDownloadName = filename; // name of the downloaded file 
```

***根据您的编辑***更新一些信息****

 ***您无法使用 XHR 请求开始下载。但是至少有两种方法可以做到：

*   如果文件路径是固定的，并且您知道它`top.location.href = "YourPath";`是在 ajax 调用的成功处理程序中设置的。[关于**[top.location.href](https://stackoverflow.com/questions/3332756/difference-between-window-location-href-and-top-location-href)**的信息]
*   如果您动态创建文件并想要返回它，您应该创建一个隐藏的 iframe 并在其中注入一个表单，然后执行请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:34:25.110

经过一番搜索，我发现它`location.href`做同样的事情并打开一个下载对话框。应将相同的标头添加到来自服务器的响应中。但是，我仍然不知道为什么其他方法不起作用。

```
var feed_id = this.getMyfeedwindow().down('form').getComponent('FeedId').text;
location.href = '/Feed/Download?fileID=' + feed_id; 
```

这解决了我的问题。***

# css - 在 vb.net 中编辑 html 文件

> ID：14235900
> 
> 赞同：0
> 
> 时间：2013-01-09T13:06:54.367
> 
> 标签：css, vb.net, html

我创建了一个 html 页面，它由 body 标记中的 div 部分组成。

如何根据 vb.net winform 中的另一个事件更改内部 div 的内容（例如：按下按钮时）？

```
 <div id="magazine">   
    <div style="background-image:url(pages/01.jpg);"></div>
    <div style="background-image:url(pages/02.jpg);"></div>
    <div style="background-image:url(pages/03.jpg);"></div>
    <div style="background-image:url(pages/04.jpg);"></div>
    <div style="background-image:url(pages/05.jpg);"></div>
    <div style="background-image:url(pages/06.jpg);"></div>
    <div style="background-image:url(pages/07.jpg);"></div>
    <div style="background-image:url(pages/08.jpg);"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:27:08.310

给每个 DIV 一个 ID 和 runat="server" 属性。然后，您应该能够从服务器端代码中引用每一个。

# ios - UIView 动画无法正常工作

> ID：14235905
> 
> 赞同：2
> 
> 时间：2013-01-09T13:07:21.717
> 
> 标签：ios, animation, subview

我在使用 UIView 子视图动画时遇到了一些问题。我想要做的是，当您按下主视图时，子视图将从顶部向下滑动，并且在下一次点击时它将向上滑动并被移除。但在当前状态下，它只执行第一次点击命令，在第二次点击时，它显示一个 nslog，但视图和动画的删除不起作用。

下面是事件处理函数中的代码：

```
- (void)tapGestureHandler: (UITapGestureRecognizer *)recognizer
{
NSLog(@"tap");

CGRect frame = CGRectMake(0.0f, -41.0f, self.view.frame.size.width, 41.0f);
UIView *topBar = [[UIView alloc] initWithFrame:frame];
UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"topbar.png"]];
topBar.backgroundColor = background;

if (topBarState == 0) {
     [self.view addSubview:topBar];
    [UIView animateWithDuration:0.5 animations:^{topBar.frame = CGRectMake(0.0f, 0.0f, self.view.frame.size.width, 41.0f);}];
    topBarState = 1;
} else if (topBarState == 1){
    [UIView animateWithDuration:0.5 animations:^{topBar.frame = CGRectMake(0.0f, -41.0f, self.view.frame.size.width, 41.0f);} completion:^(BOOL finished){[topBar removeFromSuperview];}];

    NSLog(@"removed");
    topBarState = 0;
}

} 
```

如何使子视图动画并正确删除？

最好的祝福

自由宁静

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:17:23.400

您总是将 topBar 框架设置为 y = -41，因此对于 topBarState = 1，动画适用于`y=-41 to y=-41`并且似乎不起作用

```
CGRect frame = CGRectMake(0.0f, -41.0f, self.view.frame.size.width, 41.0f);
UIView *topBar = [[UIView alloc] initWithFrame:frame]; 
```

每次创建视图 topBar 时。
在 .h 中声明 topBar 并在 viewDidLoad 中分配 init。

```
- (void)viewDidLoad {
    CGRect frame = CGRectMake(0.0f, -41.0f, self.view.frame.size.width, 41.0f);
    topBar = [[UIView alloc] initWithFrame:frame];
    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"topbar.png"]];
    topBar.backgroundColor = background;
        [self.view addSubview:topBar];
    topBarState = 0;
}

- (void)tapGestureHandler: (UITapGestureRecognizer *)recognizer
{
    if (topBarState == 0) {
            [UIView animateWithDuration:0.5 animations:^{topBar.frame = CGRectMake(0.0f, 0.0f, self.view.frame.size.width, 41.0f);}];
            topBarState = 1;
    } else if (topBarState == 1){
        [UIView animateWithDuration:0.5 animations:^{topBar.frame = CGRectMake(0.0f, -41.0f, self.view.frame.size.width, 41.0f);} completion:^(BOOL finished){[topBar removeFromSuperview];}];
        topBarState = 0;
    }
} 
```

# php - 使用标头重定向不起作用

> ID：14235911
> 
> 赞同：0
> 
> 时间：2013-01-09T13:07:57.787
> 
> 标签：php, redirect

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我不知道为什么如果我单独调用这个文件它可以工作，但如果我在我的网站内调用它它不会......但如果我使用

```
echo "<br /><a href='".$url."'>Login with your Twitter account</a>" 
```

代替

```
header("Location: ".$url.""); 
```

它有效......我想自动化这个过程，而不是每次都要求与 twitter 连接。

编码：

```
<?php
session_start();
require_once('twitteroauth/twitteroauth.php');
require_once('config.php');
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET);
$request_token = $connection->getRequestToken(OAUTH_CALLBACK);
$_SESSION['oauth_token'] = $token = $request_token['oauth_token'];
$_SESSION['oauth_token_secret'] = $request_token['oauth_token_secret'];
switch ($connection->http_code) {
case 200:
$url = $connection->getAuthorizeURL($token);
//echo "<br /><a href='".$url."'>Login with your Twitter account</a>";
header("Location: ".$url."");
break;
default:
echo 'Could not connect to Twitter. Refresh the page or try again later.';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:10:47.200

`<?php`确保删除开始标记之前的所有空格。

# symfony - 选择框架

> ID：14235912
> 
> 赞同：2
> 
> 时间：2013-01-09T13:08:01.093
> 
> 标签：symfony, frameworks, yii, eclipselink

我正在考虑用一个框架开始一个网站项目，这对我来说也是一个学习项目。更准确地说，一个生物学家网站有点过滤器，还有一个问题是我是否应该使用单独的数据库或平面文件来翻译不同的物种名称（该网站也必须是国际的，但只有 3-4语言）。我在认真考虑要走哪条路……所以我要求提供一些建设性的意见！

*   由于它的简单性，我想到了 yii，我尝试了它，它似乎运行顺利。
*   我正在考虑 symfony2，因为它似乎更先进，并且用它构建了一些很棒的网站，如果我没记错的话，drupal8 也是用它构建的......即使它更难使用，如果它值得我付出努力的话做。
*   我在考虑 spark，一个 java mini 框架或 Eclipse Link，因为稍后我计划制作这个网页的离线版本，我希望将它移植为独立的 java 应用程序并不难。但是我是 java 新手，讨厌一直充满缩写词的 java 文档，并假设我知道那些被经验丰富的 java 程序员认为是不言而喻的基本步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:58:10.780

就我个人而言，我喜欢 Yii，从未使用过其他的 :) 出于这个确切原因，我已将其标记为不具建设性而关闭它。这个问题没有正确答案。

我会在每个项目中启动一个项目，尝试完成一些常见任务，然后再决定。最终，您将能够在所有这些框架中实现一切。决定因素将是*您*使用框架的速度和舒适程度，而不是其他人如何使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:18:27.713

Yii 很容易支持多个数据库；想想这个；

您所要做的就是创建数据库，剩下的很简单......

只需创建一个简单的博客应用程序，看看哪个是开发时最简单和最快的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:45:59.433

我认为您的问题没有正确答案。选择一个框架是一个哲学问题和个人喜好。有些人会认为 Yii 更容易使用，而另一些人会对 symfony 的功能感到惊讶。

如果您知道一个框架，我会建议您坚持使用这个框架，如果您不检查每个框架的基础并选择最适合您需要的框架。

但最后，如果您选择一个流行的框架（Yii、Symfony、Laravel ......），您将能够实现您的目标。

# c - 我怎么知道 fgets 正在读取的单词是否在新行中？

> ID：14235922
> 
> 赞同：0
> 
> 时间：2013-01-09T13:08:26.047
> 
> 标签：c, file, fgets

我正在阅读 C 中的程序，我想找到新行，但我不知道如何。

我正在阅读这样的文本文件：

```
 while(!feof(fp)){
         fgets(buffer, 4, fp);
    } 
```

我的文本文件是这样的：

```
C01 RDA ALB NAC EDF
C02 MCA EDF SLF ADG 
```

我怎么知道 fgets 正在读取的单词是否在新行中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:10:37.077

你不应该`feof()`在做 I/O 之前打电话，这根本不是它的工作原理。

如果您对每个换行符的位置感兴趣，请使用`fgetc()`. 然后将字符流解析为单词。当换行符出现时，这将变得微不足道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T13:12:12.503

你真的想一次得到三个字符（这是你得到的`size`4 个字符，因为`fgets`读取的字符比`size`字符少一个），从而得到碎片

`C01` ` RD` `A A` `LB ` `NAC` ` ED` `F¶` `C02` ` MC` `A E` `DF ` `SLF` ` AD` `G¶`

（`¶`表示换行符）？我不这么认为，而是您一次需要四个字符并修剪单词分隔符。

```
char buffer[5];
char newline = 1;
while (fgets(buffer, sizeof buffer, fp))
{
    if (newline) puts("new line:");
    newline = buffer[3] == '\n';
    buffer[3] = '\0';
    puts(buffer);
} 
```

# gnuplot - Gnuplot：未定义/缺失的数据点和“带图像”的绘图样式

> ID：14235928
> 
> 赞同：4
> 
> 时间：2013-01-09T13:08:47.777
> 
> 标签：gnuplot

我必须创建一个颜色图，而“带图像”的绘图样式正是我想要的。（在 x,y 位置绘制 z 的确切值，所以使用 pm3d 对我来说不是一个选项）

问题是，我的数据文件中有未定义的点。例如，该函数表示质量比，因此负 z 值没有物理意义，我想省略它们。或者某些 z 值甚至是“NaN”。

示例数据文件：

```
1.0   1.0    1.5
1.0   2.0    1.7
1.0   3.0    1.9
2.0   1.0    1.6
2.0   2.0    1.8
2.0   3.0    2.0
3.0   1.0    1.7
3.0   2.0    1.9
3.0   3.0   -1.0 
```

所以我不想在 (3,3) 位置绘制值 -1，但将 (3,3) 处的像素留空。

我试过这个：

```
plot './test.dat' u 1:2:($3>0 ? $3 : 1/0) with image 
```

但它不起作用。它说：

> 警告：像素数不能分解为匹配网格的整数。N = 8 K = 3

```
set datafile missing "NaN" 
```

在 -1.0 被“NaN”替换的情况下也不起作用。

我发现的唯一选择是：

```
set pointsize 10
plot './test.dat' u 1:2:($3>0 ? $3 : 1/0) palette pt 5 
```

但随后我必须手动调整每个绘图的点大小、x 和 y 范围以及绘图大小，以便数据点没有空格或重叠。（见[这个问题](https://stackoverflow.com/q/13282302/1275653)。）

所以长话短说：有没有办法使用带有未定义/缺失数据点的“带图像”绘图样式并将这些点留白？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:31:07.463

在这种情况下，我还没有找到让 gnuplot 很好地处理 NaN 的方法。它对我来说将它设置为 1，这看起来很奇怪，但可能是“plot ... with image”如何处理丢失数据的一个特点。

如果您只想消除负数，可以使用一种技巧：

```
#!/usr/bin/env gnuplot

set terminal png 
set output 'test.png'

filter(x) = (x > 0) ? x : 1/0 
philter(x) = (x > 0) ? x : 0 

# just in case
set zero 1e-20

# make points set to zero be white
set palette defined (0 1.0 1.0 1.0, \
                 1e-19 0.0 0.0 1.0, \
                     1 1.0 0.0 0.0)

# get min/max for setting color range
stats 'test.dat' u (filter($3)) nooutput

# set color range so minimum value is not plotted as white
set cbrange [STATS_min*(1-1e-6):STATS_max]

plot './test.dat' u 1:2:(philter($3)) with image 
```

在您的数据文件中，它会生成此图： ![在此处输入图像描述](../Images/f9e9ac34fb61c4813423901749c41032.png)

这不是很理想，因为颜色条底部有那个白色位并且它不处理 NaN。无法摆脱白色位的原因是，在设置调色板时，使用的数字只是自动缩放以适应颜色条，并且调色板中有离散数量的插槽（256？）。因此，调色板中的第一个插槽将始终显示调色板开始的值（白色），无论调色板中的下一个颜色是否显示在刻度的 1e-19 处。

# sql - 根据没有 JOIN 的第二个表从一个表中选择

> ID：14235930
> 
> 赞同：2
> 
> 时间：2013-01-09T13:09:00.283
> 
> 标签：sql

我有两个表，我可以完美地单独查询。

`table1`店铺范围：

```
SELECT range_id, range_from, range_to FROM table1; 
```

`table2`商店 ID：

```
SELECT MAX(id) FROM table2 WHERE id BETWEEN <x> AND <y>; 
```

我需要一个查询，它为每个元组 ( `range_id`, `from`, `to`) from选择`table1`介于from 和 to 之间的 from ：`MAX(id)``table2``MAX(id)`

```
range_id    max(id)
--------    -------
foo         3
bar         17
snafu       823467 
```

我不知道如何做到这一点，因为这里没有什么可以加入的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:10:22.370

```
select  *
,       (
        select  max(t2.id)
        from    table2 t2
        where   t2.id between t1.range_from and t1.range_to
        ) as max_id_in_range
from    table1 t1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:13:29.193

试试这个

```
 SELECT t1.range_id ,t2.MAX(id)
   FROM  table1 t1
   INNER JOIN table2 t2
   ON  t1.range_ID = t2.ID
    WHERE t2.id BETWEEN <x> AND <y> 
```

# ruby - 如何区分 first_or_create 搜索或创建

> ID：14235934
> 
> 赞同：3
> 
> 时间：2013-01-09T13:09:32.400
> 
> 标签：ruby, activerecord, ruby-on-rails-3.2

我想区分由 first_or_create 搜索或创建的。

```
record = MasterRecord.where(:name=>'test_data').firest_or_create

# and i want differentiate searched or created like this.
# but there is no created_record? method
if record.created_record?
    render :status=>200, :json => record.to_json
else
    render :status=>409, :json => record.to_json
end 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:42:52.820

一种解决方法是使用`first_or_initialize`，`first_or_create`然后使用`new_record?`如下：

```
record = MasterRecord.where(:name=>'test_data').first_or_initialize

created_record = record.new_record?
record.save! if record.new_record?

if created_record
    render :status=>200, :json => record.to_json
else
    render :status=>409, :json => record.to_json
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:38:36.027

如果找不到记录会返回`[]`，所以你可以玩`tap`。像这样的东西：

```
created = false
record = MasterRecord.where(:name=>'test_data').tap {|x| created = true if x.empty?}.first_or_create
if created
  ... 
```

# gridview - jqgrid - 组标题复选框以多选组项目

> ID：14235945
> 
> 赞同：1
> 
> 时间：2013-01-09T13:10:20.833
> 
> 标签：gridview, jqgrid, grouping, multi-select

目前我正在使用 jqgrid 来绑定数据。我有 2 个问题：1）当 Multiselect 为真时，我们在标题行中有一个复选框，它选择所有行而不考虑分组。

我想要实现的是在组标题级别有一个复选框。因此，每个组将有一个多选复选框，选中该复选框时，仅检查该特定组中的所有行，其余组保持原样。

如果组标题上的复选框选项是不可能的，我们可以点击组标题，以便我们可以检查该组中的所有行吗？[我在点击这里](http://www.sencha.com/forum/showthread.php?105831-Grid-GroupingView-with-Checkbox&highlight=grid%20group%20header%20checkbox/ "点击这里")发现了一个类似的问题，但他们没有使用 jqgrid。

2) 我的下一个问题是我们可以将 .gif、.jpg 图像作为数据的一部分嵌入到 jqgrid 的列中吗？

由于我是新用户，很抱歉我无法添加快照。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-07T07:49:03.413

演示是[**JSFIDDLE DEMO**](http://jsfiddle.net/Suninsky/564RP/12/)

正如@david 建议的那样，通过 groupText 属性为组标题添加了复选框 HTML。*并为复选框单击/更改*事件编写处理程序。

如果父 jqgrid 表的**id**是`grid`，组标题行`tr`是 with `class ="gridghead_0"`，嵌套组标题的**类**将跟随`gridghead_1 to gridghead_n`。

1.  ### 复选框单击/更改处理程序（JS DOM Ready 功能）

    ```
    $("table tbody").on("change", "input[type=checkbox]", function (e) {        
        var currentCB = $(this);
        var grid = jQuery('#grid');
        var isChecked = this.checked;
        if (currentCB.is(".groupHeader")) { //if group header is checked, to check all child checkboxes                     
            var checkboxes = currentCB.closest('tr').nextUntil('tr.gridghead_0').find('.cbox[type="checkbox"]');
            checkboxes.each(function(){
                if (!this.checked || !isChecked)                   
                    grid.setSelection($(this).closest('tr').attr('id'), true); 
            });
        } else {  //when child checkbox is checked
            var allCbs = currentCB.closest('tr').prevAll("tr.gridghead_0:first").nextUntil('tr.gridghead_0').andSelf().find('[type="checkbox"]');
            var allSlaves = allCbs.filter('.cbox');
            var headerCB = allCbs.filter(".groupHeader");
            var allChecked = !isChecked ? false : allSlaves.filter(":checked").length === allSlaves.length;
            headerCB.prop("checked", allChecked);
        }
    }); 
    ```

2.  ### “多选”和“分组”的设置/选项

    ```
    ...
    multiselect: true,
    grouping:true,
    groupingView : {
        groupField : ['name'],
        groupText : ['<input type="checkbox" class="groupHeader"/> <b>  {0}  </b>'],
        groupColumnShow : [false],
    },
    ... 
    ```

3.  **选中全选**时，检查组标题复选框

    ```
    onSelectAll: function(rowIds, allChecked) {
        $("input.groupHeader").attr('checked', allChecked);
    }, 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:07:42.113

可以在组标题中有一个复选框，但在 jqGrid 中没有内置功能。

`groupText`您可以通过属性添加 HTML 。然后，您可以在 jqGrid 配置之外为该输入编写单击侦听器。你可以在你的 jqGrid 配置中有这样的东西：

```
groupingView: { 
  groupField: [ <fill in your values> ],
  groupOrder: [ <fill in your values> ],        
  groupText: ['<span class="groupText">{0} - {1} Records(s)</span>' + 
    '<span class="group-span">' + 
    '<input type="checkbox" class="grouping">' + 
    '<label class="grouping-label">Select this group</label>' + 
    '</span>'],         
  groupColumnShow: [true],
  groupCollapse: true
} 
```

现在您必须使用 jQuery`on`方法对侦听器进行编码，因为复选框在 dom 就绪时将不存在。

# java - Roboguice 正在注入不同的上下文

> ID：14235950
> 
> 赞同：0
> 
> 时间：2013-01-09T13:10:48.870
> 
> 标签：java, android, dependency-injection, android-fragments, roboguice

我在 Android 应用程序上使用自定义上下文，并且我使用 Roboguice 进行注入（我使用 ActionBarSherlock，所以我使用的是 robosherlock）

此自定义上下文使用了一些在调用 onCreate 时初始化的字段。

接下来，我有一个片段，其签名如下所示：

```
public class CustomFragment extends RoboSherlockListFragment 
```

我尝试注入我的自定义上下文：

```
@Inject
private CustomContext mContext; 
```

当我尝试使用 getPrivateField() 方法访问在 CustomApplication 的上下文中初始化的私有字段时，如果上下文是新的并且不重用旧的，我会得到 null。

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T21:35:46.763

我不知道你的 this`CustomContext`到底是如何工作的，但是当 RoboGuice 遇到一个`@Inject`没有特定绑定规则的注释（`bind(CustomContext.class)`模块中的一行）时，它只会使用默认构造函数创建一个新对象。

您可能应该创建一个自定义提供程序，其中包含获取此特定 CustomContext 的逻辑。

# django - 从自定义小部件访问 ModelChoiceField 查询集

> ID：14235955
> 
> 赞同：1
> 
> 时间：2013-01-09T13:11:04.597
> 
> 标签：django, django-widget

我有一个具有 ModelChoiceField 的表单。我创建了一个用于处理 ModelChoiceFields 的自定义小部件，该小部件扩展了 forms.TextInput，因此：

```
class SelectWidget(forms.TextInput):

    def __init__(self, attrs):
        super(SelectWidget, self).__init__(attrs)

    def render(self, name, value, attrs=None):
        value = "" if value is None else value

        # html stuff here

        return html_stuff 
```

并在表格上：

```
class Form(forms.ModelForm)
    address = forms.ModelChoiceField(queryset=models.Address.objects.all(),
                                     widget=SelectWidget(attrs={})) 
```

我知道，当我提交表单时，它将根据提供给 ModelChoiceField 的查询集验证在 SelectWidget 文本输入中输入的内容，这是我想要的。

我的问题是：在我覆盖渲染方法的 SelectWidget 中，如何访问传递给 ModelChoiceField 的任何查询集，以便根据小部件的“值”属性（如果有）检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:24:15.977

您可以在作为对象`self.choices`的自定义选择小部件中访问`ModelChoiceIterator`

# msbuild - 未从 TeamCity 部署 MSBuild 的 WebDeploy

> ID：14235960
> 
> 赞同：10
> 
> 时间：2013-01-09T13:11:13.280
> 
> 标签：msbuild, visual-studio-2012, teamcity, msdeploy, webdeploy

我正在尝试使用 MSDeploy 将 MVC 项目部署到使用 TeamCity 的服务器。当我在 powershell 中的计算机上执行此操作时，使用以下命令：

```
msbuild.exe .\mvc.csproj /p:PublishProfile=DevServer /p:VisualStudioVersion=11.0
/p:DeployOnBuild=True /p:Password=MyPassword /p:AllowUntrustedCertificate=true 
```

它构建项目并将其完美地部署到服务器（在 DevServer 发布配置文件中定义的信息）。输出`MSDeployPublish`最后显示了一个部分，在其中我看到了类似的文本`Starting Web deployment task from source...`，然后用行告诉我更新了哪些文件等。

当我在 TeamCity 上运行它时，使用 MSBuild 构建步骤，在同一个文件上，使用相同的参数（来自同一个工作目录）它构建项目但不发布它。相反，它具有来自构建过程的常规输出（CoreCompile、_CopyFilesMarkedCopyLocal、GetCopyToOutputDirectoryItems、CopyFilesToOutputDirectory），但实际上并没有发布任何内容。

我需要对 TeamCity 中的设置进行哪些更改，以使其以与在我的计算机上使用 MSBuild 相同的方式发布部署？

（TeamCity 7.1、MSBuild 4.0、WebDeploy 3.0、Visual Studio 12、IIS 7。与[我之前的问题](https://stackoverflow.com/q/14230272/51)相关）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T17:56:02.830

我们使用配置如下的 TeamCity MSBuild 步骤执行 WebDeploys：

```
Build File Path:  Server.csproj

Command Line Parameters:
/p:Configuration=%configuration%
/p:DeployOnBuild=True 
/p:DeployTarget=MSDeployPublish
/p:MsDeployServiceUrl=https://%web.deploy.server%:8172/MsDeploy.axd
/p:DeployIisAppPath=%web.deploy.site% 
/p:AllowUntrustedCertificate=True
/p:Username=
/p:AuthType=NTLM 
```

我们使用集成认证；根据需要进行更改以适应您的方案。我认为，它的价值在于它从头开始构建所有东西，而不依赖于预先构建的包。根据您发布的要点，我注意到您进行了一些数据库发布，我们不为此使用 WebDeploy，因此我无法提供任何指导。希望这可以帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-10T02:47:28.347

我使用 MSBuild.exe 打包到 zip，并使用 MSdeploy.exe 分步部署。

在命令行上部署 package.zip 文件：

```
"C:\Program Files\IIS\Microsoft Web Deploy V2\msdeploy.exe" -verb:sync 
     -source:package="C:\Build\MyAppName.Debug.zip" 
     -dest:auto,wmsvc=webservername,username=webdeploy,password=******* 
     -allowUntrusted=true 
```

这个命令也值得详细解释：

-verb:sync ：使网站从源同步到目标

-source:package="C:\Build\MyAppName.Debug.zip" ：源是一个 MSBuild zip 文件包

-dest:auto,wmsvc=webservername ：使用包文件中的设置部署到服务器。用户帐户是具有权限的操作系统级帐户。指定了主机名，但未指定 IIS 网站名称（之前在项目属性的 MSBuild 项目文件中指定）。

您可以根据您的配置修改参数。我喜欢这种方式，因为通过单独的步骤，更容易调试问题。

使用 TeamCity 构建步骤和命令行运行器。

**更新：** 如果您想了解如何使用 MSBuild 构建 ZIP 包的示例，请尝试以下操作：

```
"C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe"
MyWebApp/MyWebApp/MyWebApp.csproj
/T:Package
/P:Configuration=Debug;PackageLocation="C:\Build\MyWebApp.Debug.zip" 
```

这在您的本地 PC 和 CI 服务器上应该是一样的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-10T23:13:06.673

以下是最终对我有用的配置设置：

```
/p:Configuration=CONFIG-NAME
/p:DeployOnBuild=True
/p:DeployTarget=MSDeployPublish
/p:MsDeployServiceUrl=http://SITE-URL/MsDeployAgentService
/p:username="USERNAME"
/p:password=PASSWORD
/p:AllowUntrustedCertificate=True 
/P:CreatePackageOnPublish=True 
/p:DeployIisAppPath=SITE-URL
/p:MSDeployPublishMethod=RemoteAgent
/p:IgnoreDeployManagedRuntimeVersion=True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T05:01:05.857

我有完全相同的问题！我已经发布了我使用过的解决方案：[MsBuild 找不到发布配置文件](https://stackoverflow.com/questions/17840044/msbuild-not-finding-publish-profile)

基础是：

*   在构建服务器上安装 Azure SDK 1.8
*   强制 /P:PublishProfileRootFolder 值以确保 MSBuild 可以找到发布配置文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-19T16:27:34.990

确保`Microsoft Web Developer Tools`为 Visual Studio 安装了该功能。我的构建代理中缺少此功能，但是一旦添加它，TeamCity 构建就可以正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-27T18:22:16.457

当您的 MSBuild 目录中缺少构建目标路径时，可能会发生这种情况。不要试图让这些在每台开发人员机器上排队，而是从[Nuget](https://www.nuget.org/packages/MSBuild.Microsoft.VisualStudio.Web.targets/)安装目标。这样一来，无论他们的机器是如何设置的，每个人都将永远是一样的。

# ruby-on-rails - CarrierWave - 设置图像的宽度和最大高度

> ID：14235963
> 
> 赞同：0
> 
> 时间：2013-01-09T13:11:23.920
> 
> 标签：ruby-on-rails, carrierwave, minimagick

我使用 CarrierWave，我想将图像的大小调整为 220 像素的宽度和 220 像素的最大高度。如果我使用`process :resize_to_fit => [220,220]`它可能是宽度不是 220px。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:23:32.500

如果我正确解释了这个问题：

*   对于肖像图像（例如 480 像素宽，640 像素高），您可能希望将其缩小到 220 像素宽，然后将其裁剪到 220 像素高，从而生成方形图像。

*   对于横向图像，您可能希望将其缩小到 220 像素宽（因此高度将小于 220 像素）。

如果这是正确的，您需要一个两步过程：

1.  调整为 220px 宽，保留纵横比
2.  裁剪到 220px 高（如果是纵向）

`manipulate!`您可以通过使用命令编写自己的处理器来做到这一点（请参阅[CarrierWave 自己的](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/processing/mini_magick.rb)以获得一些灵感）。

我想这大致就是你所追求的

```
process :resize => [220, 220]

protected

def resize(width, height, gravity = 'Center')
  manipulate! do |img|
    img.combine_options do |cmd|
      cmd.resize width.to_s
      if img[:width] < img[:height]
        cmd.gravity gravity
        cmd.background "rgba(255,255,255,0.0)"
        cmd.extent "#{width}x#{height}"
      end
    end
    img = yield(img) if block_given?
    img
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T19:25:30.023

对安迪 H 的回答进行了改进：

```
process :resize => [220, 220]

protected

def resize(width, height, gravity = 'Center')
  manipulate! do |img|
    img.combine_options do |cmd|
      cmd.resize "#{width}"
      if img[:width] < img[:height]
        cmd.gravity gravity
        cmd.background "rgba(255,255,255,0.0)"
        cmd.extent "#{width}x#{height}"
      end
    end
    img = yield(img) if block_given?
    img
  end
end 
```

# c - 我不明白使用 pthread_key_create 的原因，你能说出原因吗？

> ID：14235965
> 
> 赞同：2
> 
> 时间：2013-01-09T13:11:37.070
> 
> 标签：c, pthreads, pthread-key-create

*我们可以在使用 pthread_create /(not key_* )时将参数传递给线程，如果它超过了使用每个线程的值。如果关于使用静态存储，我们使用互斥锁，那么，我们使用 pthread_key_create 是什么意思？举例并强调它为什么诞生（应用和需要它）？我听说它对于迁移单线程应用程序很有用，但它们仍然使用互斥锁。那么，重点是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:21:46.660

`pthread_key_create`用于为一块线程本地存储创建唯一标识符。

然后每个线程可以为每个键存储不同的值。这在迁移最初使用全局变量的代码时很有用，但您希望每个执行线程都有自己独立的全局值版本。您可以使用线程本地存储来代替全局存储。

在访问属于您所在线程的线程本地数据时，您不需要使用互斥锁。

# eclipse - 使用 jboss 工具在一台机器上独立使用多个 jboss 实例

> ID：14235968
> 
> 赞同：0
> 
> 时间：2013-01-09T13:11:46.657
> 
> 标签：eclipse, jboss, multiple-instances, jboss-tools

我想在一台机器上独立运行两个 jboss 实例（4.2.3 版），并在 eclipse 中使用 jboss 工具控制它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:08:29.360

您可以在同一台机器上启动多个 JBoss 实例，为每个实例配置不同的端口绑定（以避免 JBoss 实例之间的端口冲突）。为此，您可以使用 JBoss 绑定服务，您可以在此 JBoss Web 的[“为每个 JBoss AS 实例提供备用端口”](https://community.jboss.org/wiki/ConfiguringMultipleJBossInstancesOnOneMachine)部分中找到有关如何配置它的步骤。

一旦正确配置了两个 JBoss 实例，您只需将它们分别添加到 Eclipse 中（就像使用单个实例一样）。

# javascript - WinJs 导航回到相同的位置

> ID：14235972
> 
> 赞同：2
> 
> 时间：2013-01-09T13:11:57.800
> 
> 标签：javascript, jquery, windows-8, microsoft-metro

我正在开发 Windows 8 商店应用程序（使用 WinJS - html5,js,jquery），我正在尝试使用它；

```
WinJS.Navigation.back(); 
```

此返回功能正常工作，它返回一页。但我想返回我在那里的页面位置......

我是说; 第一页：

ABCDE

```
 ^ I scrolled to right and clicked item on C position 
```

在新页面上：我单击了返回按钮（调用“WinJs.Navigation.back()”）

目前，Navigator 将我移动到页面的顶部，即位置“A”。

所以这就是问题所在。我想返回“C”点。

我不想使用自定义标记样式，例如 ; >[这里](http://www.coderanch.com/t/114166/HTML-CSS-JavaScript/Return-position-page-post)<

我认为应该有默认功能来做到这一点，比如；>[这里](https://stackoverflow.com/questions/11673876/doing-postback-but-returning-to-same-position-on-form)<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:52:13.330

您需要将该滚动位置存储在某处 - 可能在导航堆栈中 - 并在您从导航服务获取导航事件时恢复它，该事件表明您的页面已（重新）呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T04:45:16.803

如果您使用 ListView 对象，请使用 indexOfFirstVisible 方法，因为它“滚动以使具有指定索引的项目是第一个可见项目” - [http://msdn.microsoft.com/en-us/library/windows/apps /hh700691.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700691.aspx)

# ruby-on-rails - Rails：依赖collection_select字段

> ID：14235974
> 
> 赞同：1
> 
> 时间：2013-01-09T13:12:02.173
> 
> 标签：ruby-on-rails

我的 Rails 应用程序中有两个字段：**language**和**word**。单词表非常大，因此我希望通过语言选择过滤选择。下面是**编辑视图中的代码，您可以在第二个****collection_select**中看到我是如何用语言硬编码的。

```
.field
  = f.label :language_id
  = f.collection_select :language_id, Language.find(:all,:conditions => ["supported = 't'"]),:id,:language_code, include_blank: false, :title => 'Language'
.field
  = f.label :word
  = f.collection_select :word_id, Word.find(:all,:conditions => ["language_id = 2"]), :id, :word, include_blank: false, :title => 'Word' 
```

SO上发布了一个类似的问题，但提供的解决方案是使用AJAX。我希望通过在用户可以选择语言后添加标准来减少数据库负载。 [表单中依赖 Rails 的 collection_select 字段](https://stackoverflow.com/questions/5311284/rails-dependent-collection-select-fields-in-form)

Rails 代码是否可以评估**:language_id**的所选值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:17:06.800

假设包含字段的对象是 Article ：

```
= f.select :word_id, Word.where(:language_id => @article.language_id).map {|w| [w.name, w.id]} 
```

# ravendb - 在 ravendb 文档中添加对象

> ID：14235977
> 
> 赞同：3
> 
> 时间：2013-01-09T13:12:11.970
> 
> 标签：ravendb

关于如何从存储在文档中的对象中查询或检索值存在疑问，如下所示在 raven db 中。

```
class User
{
       public String Id { get; set; }
       public AccountType AccountType { get; set; }Servicetax
       public String MainAccountMobileNo { get; set; }
       public UserStatus Status { get; set; }
       public String EmailId { get; set; }
       public String DisplayName { get; set; }
       public Object User { get; set; }
} 
```

在这里，我将三种不同类型的类存储到对象 User 中。说客户、零售商和贸易商。

```
Customer

{
           public String Name{ get; set; }
           public String Address { get; set; }
           public String MobileNo { get; set; }
           public String EmailId { get; set; }
} 
```

零售商

```
{
           public String Name{ get; set; }
           public String Address { get; set; }
           public String MobileNo { get; set; }
           public String EmailId { get; set; }
} 
```

商人

```
{
           public String Name{ get; set; }
           public String Address { get; set; }
           public String MobileNo { get; set; }
           public String EmailId { get; set; }
} 
```

现在是否可以根据客户的班级详细信息检索结果？那就是现在我想根据客户类中的地址检索所有客户，那么我该怎么做呢？如何将查询中的对象用户类型转换为客户类型。谢谢。![我的文档存储的图像](../Images/21cdbc42069da4d82d1b6840b9910801.png)

文档中的用户对象可以存储任何类型的类对象，例如上图中的账户信息交易者。那么我如何从不能确定和变化的对象类型中查询。

`var Result = sess.Query<UserAccountInfo>().Where(x => x.AccountType == usertype && ((AccountInfoCustomer)x.User).Customerstatus == CustomerStatus.Pending);`

> 这是已尝试的查询，这是已捕获的异常 {"Url: \"/indexes/dynamic/UserAccountInfos?query=AccountType%253ADistributor%2520AND%2520User).Customerstatus%253APending&start=0&pageSize=128&aggregation=None\" \r\n\r\nSystem.ArgumentException：字段 ')_Customerstatus' 未编入索引，无法在 Raven.Database.Indexing.Index.IndexQueryOperation.AssertQueryDoesNotContainFieldsThatAreNotIndexes() 处查询未编入索引的字段\r\n

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:02:31.887

这里的问题是 raven db 的构建。在将查询更改为更新版本后，我使用的是旧版本

```
var Result = sess.Query<UserAccountInfo>().Where(x => x.AccountType == usertype && ((AccountInfoCustomer)x.User).Customerstatus == CustomerStatus.Pending); 
```

工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:33:39.917

你的课不是很干。考虑一下：

```
public abstract class Person
{
    public string Name{ get; set; }
    public string Address { get; set; }
    public string MobileNumber { get; set; }
    public string EmailAddress { get; set; }
}

public class Customer : Person {}
public class Retailer : Person {}
public class Trader : Person {} 
```

然后，在您的 User 类中替换

```
public Object User { get; set; } 
```

有了这个：

```
public Person Person { get; set; } 
```

这样，您可以存储 3 种派生类型中的任何一种的实例。`User`考虑到调用了包含类，我不会调用该属性，`User`并且`User.User`可能会让任何必须理解您的代码的人感到困惑。

# java - 在 Java 中显示图像序列

> ID：14235982
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:12:36.267
> 
> 标签：java, video

我正在尝试用 Java 执行 MPEG 解码器。该解码器根据视频的帧速率生成一系列位图图像。我希望它显示在窗口中。我对此完全陌生，我不知道如何开始。

谁能告诉我有哪些选择，我应该如何开始？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:40:10.233

一段时间后，我在[这里](https://stackoverflow.com/questions/3325546/how-to-color-a-pixel)找到了一个示例，它帮助我入门。

谢谢 ！

# python - 将许多小型 DataFrame 导出到单个 Excel 工作表

> ID：14235984
> 
> 赞同：5
> 
> 时间：2013-01-09T13:12:41.850
> 
> 标签：python, excel, export, pandas

使用[此代码](https://stackoverflow.com/questions/14225676/save-list-of-dataframes-to-multisheet-excel-spreadsheet/14225838#14225838)，可以在新的工作表迭代数据框列表中导出每个数据框：

```
def save_xls(list_dfs, xls_path):
    writer = ExcelWriter(xls_path)
    for n, df in enumerate(list_dfs):
        df.to_excel(writer,'sheet_dati%s' % n)
    writer.save()
save_xls(list_dfs, xls_path) 
```

但是可以在一个工作表中导出两个或多个数据框吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-17T17:59:31.847

像这样的东西：？

```
from pandas import ExcelWriter
def dfs2xlsx(list_dfs,xls_path = None):
    #save_xls([df1,df2],'output1.xlsx')
    if xls_path == None :
        xls_path = '~tmp.xlsx'
    writer = ExcelWriter(xls_path)
    i=0
    for n, df in enumerate(list_dfs):
        df.to_excel(writer,'Sheet1',startcol=i,startrow =2)
        i+= len(df.columns) + 2
    writer.save()
    os.system('start excel.exe %s' %(writer.path )) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T13:25:30.103

如果你想`DataFrames`在同一张纸上有多个，你会*如何*组合它们？取而代之的是，预先将它们[**合并、连接或连接**](http://pandas.pydata.org/pandas-docs/dev/merging.html)成一个`DataFrame`，因为 pandas 为您提供了多种方式。然后做你的出口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T13:25:37.263

我认为在导出（通过）**之前**你会更好地执行[`concat`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.tools.merge.concat.html)这些 DataFrames 。那是：**[`to_excel`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel)**

 **```
pd.concat(list_dfs).to_excel(xls_path) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-28T21:46:31.930

+1 for ashkan's answer. This method allows you to write the headers multiple times, and do things like leaving space between the individual dataframes much more easily than inserting blank rows into one larger concat'd dataframe. For instance:

```
writer = pd.ExcelWriter(os.path.join(filepath, filename))
for item in list_of_dataframes:
    item.to_excel(writer, "sheetname", startcol=0, startrow=n)
    n += len(item.index) + 2
writer.save() 
```

This allows you to write multiple (possibly different or unrelated) dataframes into one excel sheet, one after another, leaving a blank line between each as you go down the page.**

# android - 如何访问android设备的根文件夹（/）的数据？

> ID：14235989
> 
> 赞同：1
> 
> 时间：2013-01-09T13:12:49.960
> 
> 标签：android, filesystems

我将数据库文件存储到`/data/data/somefolder/`我的应用程序的路径中。我想从我的系统或设备中的这个文件夹中获取文件，以便我可以查看其中的内容。我可以从模拟器中提取文件，但无法从设备中获取文件。有没有可以做到这一点的应用程序？

PS：以编程方式我可以访问该文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:16:34.453

可以看到[这里](http://developer.android.com/reference/android/os/Environment.html)`getExternalStorageDirectory()`用方法获取“/data/data/somefolder/”目录

在插入和检索路径时，您必须存储完整路径才能解决问题。

**已编辑：** AFAIK 无法访问内部数据，但您可以在外部目录中创建相同的文件夹以供将来使用并在需要时访问它。

如果您想从设备访问它，那么您还可以在路径`"sdcard/YOUR_APPLICATION/XYZ/"`位置创建文件夹，并在数据库中使用完整路径位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-28T10:27:51.777

您可以将文件存储在内部存储中，因此需要从根目录指定路径。只需您可以编写/创建文件，例如： File f= new File("myfile.txt");

并根据需要使用它。并且它不会对其他应用程序可见，因此它最安全。

如果您仍想存储在 micro SDCard 等外部​​存储设备或手机内置存储设备上，请尝试以下操作：

文件根 = 新文件（“/”）；从root获取所有文件夹

String[] 文件夹 = root.list();

并根据需要使用其中之一。

或使用上述方法，如 getExternalStorageDirectory().......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:25:36.657

当设备植根时，这很容易。如果没有，当您的应用程序以调试模式构建时，您仍然可以获取该文件。在你的开发机器上试试

```
adb shell 
```

然后在设备上

```
run-as your.package.name
cd databases
cat your.db.file > /sdcard/your.db.file 
```

然后你可以从你的SD卡复制它。

# c++ - 拥有带计数器的线程本地队列

> ID：14235991
> 
> 赞同：1
> 
> 时间：2013-01-09T13:12:54.160
> 
> 标签：c++, linux, multithreading, scheduling, multitasking

我有四个线程，它们有自己的私有队列和一个私有的“ *int count* ”成员，每当从程序线程产生一个任务时，它应该被排入线程中具有最小“int count”的线程队列。

每当任务被推入队列时，私有“int count”应该增加1每当任务从队列中弹出时，私有“int count”应该减少1

因此，'int count' 会根据任务推送、弹出操作而动态变化，并且**程序线程会将任务分派到具有最低（或找到的第一个零）计数的队列。**

这是程序的底层逻辑。

我在实现多速率同步数据流范例的 linux 多线程库中使用 c++ 编程语言工作。

您能否提供一些实现此逻辑的编码想法。IE。1.初始化所有私有int队列计数器=0

2.counter++ 推送任务时，

3.counter——任务弹出时，

4.Task Disptacher 看到每个线程的私有 int 计数。

5.调度任务到具有最小计数的队列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:26:44.813

> *我有四个线程，它们有自己的私有队列和一个私有的'int* *count'成员，每当从程序线程产生一个任务时，i*t *应该被排入一个线程的队列中，其中具有最小的'int count'* *线程。*
> 
> *每当一个任务被推入队列时，私有“int count”* *应该在任务从队列中弹出时增加1，* *私有“int count”应该减少1*

好的，所以*基本上*你的程序线程是生产者，你有 4 个消费者线程。通过在每个线程中使用队列，您将最大程度地减少主线程与消费者交互所花费的时间。**NB**您需要考虑您的线程是否会被饿死/溢出 - IE 是否单个生产者会以保证 4 个消费者的速度创建“工作”，或者 4 个消费者是否会被淹没。

*天真的方法* 因此您需要同步队列访问/增量，这意味着您需要在修改和`mutex`时停止消费者访问任何内容。最简单的方法是进行同步是有一个方法（EG ）来锁定它。`count``queue``enqueue(Item& item)``mutex`

C++11：互斥体[http://en.cppreference.com/w/cpp/thread/mutex](http://en.cppreference.com/w/cpp/thread/mutex)

此外，如果饥饿是一个问题（或溢出），您将需要使用一些信号来停止相关的线程活动（饥饿 - 停止消费者以避免 CPU 使用，溢出 - 在消费者赶上时停止生产者）。通常这些信号是使用条件变量来实现的。

C++11：条件变量：[http ://en.cppreference.com/w/cpp/thread/condition_variable](http://en.cppreference.com/w/cpp/thread/condition_variable)

> *因此，关于任务* *push、pop 操作，“int count”是动态变化的，并且程序线程会将任务分派到 *具有最低计数（或第一个找到的零）的队列中。*

所以这里的情况有点复杂，因为您要填充的线程将是工作最少的线程。这要求您检查 4`counts`并选择队列。**但是，因为只有一个生产者**，您可能只扫描队列而不锁定。这里的逻辑是消费者不会受到读取的影响，即使消费者在选择期间工作，线程的选择也不会真正不正确。

所以我会有一个线程对象数组，每个对象都有计数和一个用于锁定的互斥锁。

> *1.初始化所有私有int队列计数器=0*

初始化构造函数中的计数 - 确保生产者在初始化期间不工作，同步不会成为问题。

> *2.counter++ 推送任务时，* *3.counter--弹出任务时，*

在线程对象上实现 2 个方法来进行入队/出队，并在每个方法中使用 lock_guard 来锁定互斥锁（RAII 技术）。然后将项目推入/从队列中推入/弹出，并酌情增加/减少。

C++11：lock_guard [http://en.cppreference.com/w/cpp/thread/lock_guard](http://en.cppreference.com/w/cpp/thread/lock_guard)

> *4.Task Disptacher 看到每个线程的私有 int 计数。* *5.将任务分派到具有最小计数的队列*

正如我上面所说，如果只有一个，您可以简单地扫描对象数组并选择（维护索引）计数器（添加`getCount()`方法）最低的线程对象。即使消费者继续工作，它也很可能是最低的。

如果有多个线程产生工作，那么您可能需要考虑如何处理连接到同一线程的 2 个线程（这可能无关紧要）

# php - 数组转换

> ID：14235993
> 
> 赞同：1
> 
> 时间：2013-01-09T13:12:59.573
> 
> 标签：php

```
Array ( 
    [0] => Array ( 
        [0] => uploads/AP02A66_31_upload1_1357736699_SeamTrade.php 
    ) 
    [1] => Array ( 
        [0] => uploads/AP02A66_31_upload1_1357736699_SiteController.php 
    ) 
) 
```

如何将上述数组转换为一个索引数组，以便它以如下形式出现，

```
Array ( 
    [0] => uploads/AP02A66_31_upload1_1357736699_SeamTrade.php  
    [1] => uploads/AP02A66_31_upload1_1357736699_SiteController.php 
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:15:45.823

```
for($i=0;$i<count($yourArray);$i++)
{
    $yourArray[$i] = $yourArray[$i][0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:18:16.053

```
$sourceArray = array( 
    array('uploads/AP02A66_31_upload1_1357736699_SeamTrade.php'),
    array('uploads/AP02A66_31_upload1_1357736699_SiteController.php'),
);
$newArray = array_map(function ($nestedArray) {
    return $nestedArray[0];
}, $sourceArray); 
```

或另一种方式（将就地执行此操作，因此请注意源数组将被更改）：

```
foreach ($sourceArray as &$element) {
    $element = $element[0];
} 
```

或更灵活的方式 - 如果您的嵌套数组可以包含多个元素：

```
$newArray = array();
foreach ($sourceArray as $nestedArray) {
    $newArray = array_merge($newArray, $nestedArray);
} 
```

还有很多其他的方法，但我想上面的应该足够了；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:23:42.183

另一种可能的解决方案，假设您的数组被称为`$input`：

```
$output = array();
array_walk_recursive($input, function($element) use (&$output){
    $output[] = $element;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:14:54.170

扁平化嵌套数组的函数：

```
function flatten_array(array $array) {
    return iterator_to_array(new \RecursiveIteratorIterator(new \RecursiveArrayIterator($array)),false);
} 
```

# mysql - MySQL LEFT JOIN - 除非包含所有列，否则为空结果

> ID：14235997
> 
> 赞同：0
> 
> 时间：2013-01-09T13:13:16.920
> 
> 标签：mysql, left-join

直到新年我都没有遇到过这个问题，所以我认为这是一个 YEARWEEK 问题，但我想我已经确认它不是。

我原来的声明不再有效（返回 0 个结果）：

```
SELECT t1.*, t2.family 
FROM report_tables.roc_test_results as t1 
LEFT JOIN report_tables.roc_capacity_standards as t2 
ON t1.item=t2.part_number 
WHERE YEARWEEK(t1.date_created)='201301' 
    AND t1.operation='TEST' 
    AND t1.result='Passed' 
```

但奇怪的是，这个工作得非常好（返回 22 个结果）：

```
 SELECT t1.*, t2.*
FROM report_tables.roc_test_results as t1 
LEFT JOIN report_tables.roc_capacity_standards as t2 
ON t1.item=t2.part_number 
WHERE YEARWEEK(t1.date_created)='201301' 
    AND t1.operation='TEST' 
    AND t1.result='Passed' 
```

有谁知道为什么这不再起作用？唯一的区别是我在第二个查询中包含了 t2 中的所有列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:35:43.860

而不是使用 Yearweek(date)，您应该使用根据 ISO 标准返回年份和星期的 Yearweek(date,3)。

如果你试试这个：

```
SELECT yearweek('2013-01-01'), yearweek('2013-01-05')
201253; 201253 
```

你会看到这个间隔被认为是 2012 年第 53 周的一部分，而 1 月 6 日被认为是 2013 年的第一周，而根据 ISO 标准，它们是 2013 年第一周的一部分：

```
SELECT yearweek('2013-01-01',3), yearweek('2013-01-06',3)
201301; 201301 
```

我认为这可能是问题所在。另请参阅此对类似问题的[答案。](https://stackoverflow.com/questions/14191216/mysql-get-current-week-spanning-last-year-and-this-year/14191270#14191270)

# html - 使用填充或边距缩小 div

> ID：14235998
> 
> 赞同：4
> 
> 时间：2013-01-09T13:13:23.607
> 
> 标签：html, css

我正在尝试做的是以下内容。

我有一个固定高度的 div，让我们说它的`100px`.
我想要的是这个 100px div 中的一个 div，其高度为`100%`但`10px`顶部和底部更短。
所以结果将是一个具有`100px`高度的包装器 div 和一个包装器 div 内的 div，它`10px`从顶部开始并`10px`从底部结束（即`height:80px`）。
问题是我得到了一个总高度为`120px`.

**注意：只有 html css 解决方案 注意**
**2：包装器内的 div 高度为 100%**

CSS 和 HTML

```
#t{
  height:100px;
  width:5px;
  background: blue;
}

#e{
  height:100%;
  width: 5px;
  padding-top:10px;
  padding-bottom: 10px;
  background: yellow;
}

#s{
  height:100%;
  width: 5px;
  background: gray;
}
```

```
<div id="t">
  <div id="e">
    <div id="s">
    </div>
  </div>
</div>
```

这是我一直在玩的 JSfiddle [http://jsfiddle.net/MWUsM/2/](http://jsfiddle.net/MWUsM/2/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T13:16:58.887

您正在寻找 CSS`box-sizing`属性`border-box`

[box-model](http://www.w3.org/TR/CSS2/box.html)将元素的渲染宽度/高度指定为`specified width/height + padding + border`，并从这个总和中减去填充和边框属性，[CSS3 规范添加`box-sizing`](http://www.w3.org/TR/css3-ui/#box-sizing0)

[更新示例](http://jsfiddle.net/MWUsM/5/)

Chris Coyier 有一篇不错且详细的[文章](http://css-tricks.com/box-sizing/)

对于跨浏览器支持，建议您添加如下前缀：

```
-webkit-box-sizing: border-box;
   -moz-box-sizing: border-box;
        box-sizing: border-box; 
```