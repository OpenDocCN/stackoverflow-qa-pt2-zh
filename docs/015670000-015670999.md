# StackOverflow 问答 15670000-15670999

# python - 如何知道 .f90 文件的安装位置？

> ID：15670001
> 
> 赞同：0
> 
> 时间：2013-03-27T21:36:31.410
> 
> 标签：python, linux, fortran

我用编译安装了一个Linux软件，make install。然后我找不到一个叫aaa.f90的文件，aaa.f90是bbb.py调用的，这两个文件在我的安装目录下。我怎么知道它是从 Makefile 安装到哪里的？我试过'which aaa.f90'，它不起作用。

我尝试阅读 Makefile.am、Makefile.in，但很难理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:41:11.640

`which`搜索可执行文件的路径。为什么不直接使用 find 从命令行中查找呢？例子：

```
find / -name aaa.f90 -print 
```

您可能需要 sudo 以这种方式查找给定文件，但在这种情况下似乎不太可能。

# php - Wordpress：通过 ajax 调用插件 php 文件

> ID：15670004
> 
> 赞同：5
> 
> 时间：2013-03-27T21:36:48.633
> 
> 标签：php, jquery, ajax, wordpress

我写了一个 wordpress 插件，女巫在我的模板中附加了一些评论功能。所有的东西都应该通过 ajax 传输到 wordpress 数据库中。

问题是 - ajax 处理程序需要一个 php 文件来捕获查询

```
if(isset($_POST['name'], $_POST['title'], $_POST['description'])) { 

 // do something with wordpress actions, e.g. get_current_user, $wpdb

} 
```

在用户传输查询时，ajax 处理程序调用 php 文件，如下所示：

```
$('#ajax_form').bind('submit', function() {
    var form = $('#ajax_form');
    var data = form.serialize();
    $.post('../wp-content/plugins/test/getvars.php', data, function(response) {
        alert(response);           
    });
    return false; 
```

getvars.php不知道 wordpress 环境，因为它是直接从用户提交调用的，我认为添加 wordpress 环境类和包含不是好的样式**。**

还有其他方法吗？感谢您的支持。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T21:50:07.207

是的，使用内置的 wordpress ajax 操作：

您的 jquery 将如下所示：

```
$('#ajax_form').bind('submit', function() {
    var form = $('#ajax_form');
    var data = form.serialize();
    data.action = 'MyPlugin_GetVars'
    $.post('/wp-admin/admin-ajax.php', data, function(response) {
        alert(response);           
    });
return false; 
```

您的插件代码类似于：

```
add_action("wp_ajax_MyPlugin_GetVars", "MyPlugin_GetVars");
add_action("wp_ajax_nopriv_MyPlugin_GetVars", "MyPlugin_GetVars");

function MyPlugin_GetVars(){
    global $wpdb;
    // use $wpdb to do your inserting

    //Do your ajax stuff here
    // You could do include('/wp-content/plugins/test/getvars.php') but you should
    // just avoid that and move the code into this function
} 
```

# android - 如何从视频流中捕获/抓取帧？

> ID：15670006
> 
> 赞同：0
> 
> 时间：2013-03-27T21:36:51.020
> 
> 标签：android, video-streaming, packet-capture

就我而言，视频流来自 Android MediaRecorder。[更新] 从网上的一些资料来看，视频流通常可以在函数setOutputFile(FileDescriptor fd)中输入fd。

与捕获帧相关的帖子在这里：“[在录制时逐帧处理Android视频](https://stackoverflow.com/questions/8839109/processing-android-video-frame-by-frame-while-recording?rq=1)”

一个答案是：

> 1.  使用 NDK 打开一个流（可能是 api，取决于实现）
> 2.  修改流的字节 - 每个帧都作为一个单独的数据包发送。您必须从相机中获取每个数据包，并对其进行修改。您可以替换颜色，也可以翻译。您还可以使用 OpenGL 通过添加诸如玻璃效果之类的东西来完全修改图像。
> 3.  ...

但我不知道可以使用哪些 API/库来捕获/抓取视频流中的每一帧。（我已经能够使用 ffmpeg 将帧编码为视频文件）

我阅读了“ [wiki：使用 ffserver 流媒体](http://ffmpeg.org/trac/ffmpeg/wiki/Streaming%20media%20with%20ffserver)”

但我不清楚如何用 C/c++ 制作程序以从视频流中捕获/抓取帧。

带有示例和教程的链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:02:59.310

您可能使用 FFmpeg 命令行工具将帧编码为视频。现在是时候使用 FFmpeg 使用的库了：libavcodec、libavformat、libavutil 等。只需从[FFmpeg 下载页面](http://www.ffmpeg.org/download.html)下载源代码，您就会在目录中找到一些如何使用它们的示例`doc/examples/`。一个很好的例子是[解码和编码](http://ffmpeg.org/doxygen/trunk/decoding__encoding_8c_source.html)的例子。

# c - 静态函数是否需要 C 中原型的 static 关键字？

> ID：15670010
> 
> 赞同：58
> 
> 时间：2013-03-27T21:37:10.077
> 
> 标签：c, static-functions

我的 C 编程书上说，当我想创建一个静态函数时，我需要将 static 关键字放在函数*定义*前面。它没有明确提及原型的任何内容。此外，这些示例不使用原型，只是将静态函数放在文件的顶部（因此它们不需要我假设的原型）。

那么，静态函数是否需要原型的 static 关键字？还是我*只*把它放在定义前面？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-27T21:55:07.747

不可以。如果函数声明（原型甚至定义）`static`出现在同一函数的另一个声明之后，则可以省略关键字`static`。

如果`static`一个函数有一个声明，它的第一个声明必须是`static`.

它在 ISO/IEC 9899:1999, 6.7.1 中定义：

> 如果 [...] 函数的文件范围标识符的声明包含存储类说明符`static`，则该标识符具有内部链接。
> 
> [...]
> 
> 对于在该标识符的先前声明可见的范围内使用存储类说明符`extern`声明的标识符，如果先前声明指定内部或外部链接，则后面声明的标识符的链接与指定的链接相同在事先声明。
> 
> [...]
> 
> 如果函数标识符的声明没有存储类说明符，则它的链接将完全确定，就好像它是使用存储类说明符声明的一样`extern`。
> 
> [...]
> 
> 如果在翻译单元内，相同的标识符同时出现在内部和外部链接中，则行为未定义。

因此，例如这是有效的：

```
static void foo(void);
void foo(void);
static void foo(void) { } 
```

这个也是：

```
static void foo(void) { }
void foo(void);

static void bar(void);
void bar(void) {} 
```

但是这段代码不正确：

```
void foo(void);
static void foo(void) { } 
```

通常，您也会并且应该`static`在原型中使用（因为它们通常首先出现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:38:43.533

是的，是的，您确实需要将 static 放在声明的前面。

将此输入ideone.com

```
int add();
int main(){
    printf("%d",add());
    return 0;
}

static int add(){
    return 1+1;
} 
```

你得到这个结果：http: [//ideone.com/VzZCiE](http://ideone.com/VzZCiE)

现在输入这个

```
static int add();
int main(){
    printf("%d",add());
    return 0;
}

static int add(){
    return 1+1;
} 
```

你得到这个：http: [//ideone.com/sz8HVR](http://ideone.com/sz8HVR)

呸呸呸

# java - 是否可以用另一个类覆盖枚举？

> ID：15670012
> 
> 赞同：0
> 
> 时间：2013-03-27T21:37:13.373
> 
> 标签：java, enums

是否可以用另一个类覆盖/“隐藏”一个枚举类？如果没有我需要做的事情失败，我无法编辑课程，所以我需要用另一个课程覆盖课程本身。看到枚举几乎是最终的并且无法实现/覆盖，我和我无法添加到课程中（基本上我需要做的），我没有很多其他选择。我只需要一个新类，它可以覆盖、覆盖或向枚举类添加东西。甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:40:52.047

您始终可以使用委托。

```
class ExtendedEnumByDelegation
{
   final MyEnum delegate;

   public void enumMethod1 ( )
   {
     delegate.enumMethod1( );
   }

   public void enumMethod2 ( )
   {
     delegate.enumMethod2( );
   }

   public void nonEnumMethod ( )
   {
      // custom stuff
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:58:55.467

您可以尝试[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)

它易于使用，应该适合您。

# php - 根据 PHP 或 Javascript IF 和 ELSE 测试的结果显示 Google Adsense 代码

> ID：15670016
> 
> 赞同：5
> 
> 时间：2013-03-27T21:37:37.387
> 
> 标签：php, if-statement, media-queries, adsense

您知道如何编写检测用户屏幕大小的 PHP 脚本或 Javascript，然后执行 IF 和 else 测试，然后结果将返回特定显示吗？

我在这里要完成的工作：

1.  Javascript 将检测我网站的用户/访问者的分辨率。*（我使用媒体查询得到了这个，我在这部分没有问题）*

2.  然后脚本将执行 IF 和 ELSE 函数。如果用户的分辨率 = <320x480（手机分辨率），PHP 脚本将调用 Google Adsense - 手机的代码。如果没有，那么它将显示 Google Adsense 网站的代码。

2 个 google adsense 代码保存在两个不同的文件中，我们称之为 adsense-Mobile.php 和 adsense-Website.php

这是一个简单的流程图。

![流程图](../Images/c34b83c17b77eb19364d7ebf0577bb4b.png)

这就是我遇到的问题。***许多专家说，在 Jquery 中一个简单的 SHOW-HIDE 元素就可以完成这项工作。*不幸的是，就我而言，它没有。**

我已经这样做了，它不符合我的要求。问题是来自 google 的两个广告同时加载到网站中，并且只显示了 1 个。Google Adsense 只允许显示 3 个广告。如果我执行显示隐藏 jquery，我将失去产生收入的机会，因为其中一个广告是隐藏的。我需要一些不会加载两个代码但只**调用**正确的代码的东西（正确的大小，适用于移动设备或网站）。

我知道 PHP 可以做到这一点，但我不知道从哪里开始，或者我应该开始阅读或研究什么函数。非常需要你的帮助。有任何想法吗？任何 PHP 或 javascript 只能**调用**一个 google adsense 代码，具体取决于分辨率。

这是 google adsense 移动和网站的代码。

**Google Adsense 的代码 - 网站**

```
<script type="text/javascript"><!--
google_ad_client = "ca-pub-6099979626157131";
/* Ben Daggers Leader Board */
google_ad_slot = "8829449662";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

**Google Adsense 的代码 - 移动**

```
<?php

$GLOBALS['google']['client']='ca-mb-pub-6099979626157131';
$GLOBALS['google']['https']=read_global('HTTPS');
$GLOBALS['google']['ip']=read_global('REMOTE_ADDR');
$GLOBALS['google']['markup']='xhtml';
$GLOBALS['google']['output']='xhtml';
$GLOBALS['google']['ref']=read_global('HTTP_REFERER');
$GLOBALS['google']['slotname']='8668582435';
$GLOBALS['google']['url']=read_global('HTTP_HOST') . read_global('REQUEST_URI');
$GLOBALS['google']['useragent']=read_global('HTTP_USER_AGENT');
$google_dt = time();
google_set_screen_res();
google_set_muid();
google_set_via_and_accept();
function read_global($var) {
  return isset($_SERVER[$var]) ? $_SERVER[$var]: '';
}

function google_append_url(&$url, $param, $value) {
  $url .= '&' . $param . '=' . urlencode($value);
}

function google_append_globals(&$url, $param) {
  google_append_url($url, $param, $GLOBALS['google'][$param]);
}

function google_append_color(&$url, $param) {
  global $google_dt;
  $color_array = explode(',', $GLOBALS['google'][$param]);
  google_append_url($url, $param,
                    $color_array[$google_dt % count($color_array)]);
}

function google_set_screen_res() {
  $screen_res = read_global('HTTP_UA_PIXELS');
  if ($screen_res == '') {
    $screen_res = read_global('HTTP_X_UP_DEVCAP_SCREENPIXELS');
  }
  if ($screen_res == '') {
    $screen_res = read_global('HTTP_X_JPHONE_DISPLAY');
  }
  $res_array = preg_split('/[x,*]/', $screen_res);
  if (count($res_array) == 2) {
    $GLOBALS['google']['u_w']=$res_array[0];
    $GLOBALS['google']['u_h']=$res_array[1];
  }
}

function google_set_muid() {
  $muid = read_global('HTTP_X_DCMGUID');
  if ($muid != '') {
    $GLOBALS['google']['muid']=$muid;
     return;
  }
  $muid = read_global('HTTP_X_UP_SUBNO');
  if ($muid != '') {
    $GLOBALS['google']['muid']=$muid;
     return;
  }
  $muid = read_global('HTTP_X_JPHONE_UID');
  if ($muid != '') {
    $GLOBALS['google']['muid']=$muid;
     return;
  }
  $muid = read_global('HTTP_X_EM_UID');
  if ($muid != '') {
    $GLOBALS['google']['muid']=$muid;
     return;
  }
}

function google_set_via_and_accept() {
  $ua = read_global('HTTP_USER_AGENT');
  if ($ua == '') {
    $GLOBALS['google']['via']=read_global('HTTP_VIA');
    $GLOBALS['google']['accept']=read_global('HTTP_ACCEPT');
  }
}

function google_get_ad_url() {
  $google_ad_url = 'http://pagead2.googlesyndication.com/pagead/ads?';
  google_append_url($google_ad_url, 'dt',
                    round(1000 * array_sum(explode(' ', microtime()))));
  foreach ($GLOBALS['google'] as $param => $value) {
    if (strpos($param, 'color_') === 0) {
      google_append_color($google_ad_url, $param);
    } else if (strpos($param, 'url') === 0) {
      $google_scheme = ($GLOBALS['google']['https'] == 'on')
          ? 'https://' : 'http://';
      google_append_url($google_ad_url, $param,
                        $google_scheme . $GLOBALS['google'][$param]);
    } else {
      google_append_globals($google_ad_url, $param);
    }
  }
  return $google_ad_url;
}

$google_ad_handle = @fopen(google_get_ad_url(), 'r');
if ($google_ad_handle) {
  while (!feof($google_ad_handle)) {
    echo fread($google_ad_handle, 8192);
  }
  fclose($google_ad_handle);
}

?> 
```

非常感谢！我希望我能很好地解释我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:49:46.750

如果浏览器[是移动](https://stackoverflow.com/questions/6636306/mobile-browser-detection)的，您可以检查 php并制作：

```
<?php
  if($isMobile){
    include('mobile_file.php');
  }
  else{
    include('website_file.php');
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:14:13.720

我会在 Javascript 中使用媒体查询：

```
<head>
<script>
var mediaQuery = "(max-width:480px)", mediaQueryList = window.matchMedia(mediaQuery), isMobile = mediaQueryList.matches;
</script>
<body>
<!-- Your HTML content, build your page, etc. -->

<script>
if (isMobile) {
    // Mobile adsense code
} else {
    //Desktop adsense code
}
</script>
</body> 
```

Javascript是按顺序执行的，所以当body标签关闭时，`isMobile`已经根据页面的媒体查询设置好了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T12:42:05.673

只需通过 AJAX 加载您的 adsense 代码。首先在您的页面框中准备广告展示位置：

```
<div id="adsense-box"></div> 
```

现在，检查用户浏览器分辨率，并根据结果，对 Ads HTML 执行正确的 AJAX 请求。这个例子展示了如何使用[jQuery](http://jquery.com/)（[.ajax](http://api.jquery.com/jQuery.ajax/)函数）来实现它：

JavaScript：

```
if ( isMobileResolution ) {
 url = "/mobile_adsense.php";
} else {
 url = "/website_adsesne.php";
}

$.ajax({
 url: url 
}).done(function(content) {
  $("#adsense-box").html(content);
}); 
```

**其他解决方案，**没有 PHP：

只需将您的 Adsense 代码发送到 HTML 元素，而是发送到 Javascript 变量，如下所示：

var codemobile = ""; var 代码网站 = "";

比，在分辨率检测之后，您可以将这些代码之一附加到任何 HTML 元素。因为 AdSense 代码不会在文档 DOM HTML 中，所以它不会被 google 加载并被视为“已执行”——这些代码只会在变量中等待。记得升级`"`标志等。

要将这些代码捕获到变量中，您可以使用 $var .= 或用户 PHP 缓冲（ob_start() 等）切换 echo。该解决方案通过 AJAX 为您节省了请求和延迟。

**第三种解决方案 - document.write safe**

Salman A. 指出 AdSense 使用 document.write，因此可能会在现场准备 iframe，在分辨率检测后调整这些 iframe 的大小，并将 src 设置为正确的 .php 文件。

我不知道 adsense 将如何在 iframe 中工作 - 请注意，由于页面 (iframe) 上缺少内容，上下文广告展示位置可能会被破坏。

**另一种解决方案 - 完全安全，但有额外的刷新/空登陆页面**

如果分辨率很小，您可以检查 JavaScript，并为广告选择设置 cookie，如果之前未设置 cookie，则刷新页面。让我们的 PHP 根据 cookie 值生成适当的广告代码。

此解决方案必须有效，但当用户在移动设备上并首次进入页面时，您将进行一次额外的刷新。如果您已经有一些登陆或重定向页面，可以尝试在那里设置 cookie。

如果从移动设备更频繁地查看此页面，您还可以切换到 mobile-ads-default 和仅刷新标准用户的不寻常特征

# jquery - JQUERY 'on' 语句不起作用

> ID：15670017
> 
> 赞同：4
> 
> 时间：2013-03-27T21:37:38.607
> 
> 标签：jquery, jquery-on

我有一个简单的按钮，单击该按钮会更改其类。我有第二个脚本试图检测该类被再次点击。

他们需要能够被点击和关闭。

//// 单击存档按钮有效 //// 单击取消存档按钮无效

## jQuery 1.9

```
//// Archive button clicked
$('a.archive_butt').on("click", function() {

    //// Put the li in as an object
    var li = $(this).parent('li');
    var entry_id = $(li).attr('rel');

    //// Add class to the li            
    $(li).addClass('status_archived');

    //// Swap the Archive button for unarchive
    $(this).addClass('unarchive_butt');
    $(this).removeClass('archive_butt');
    $(this).empty();
    $(this).text('Un-Archive');

    return false;
});

//// Un Archive button clicked
$('a.unarchive_butt').on("click", function() {
    alert('Fire');  
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:42:09.767

调用时会绑定 click 事件，`.on`但调用时不存在该类的元素`unarchive_butt`，因此它永远不会绑定。

你真正想要的是旧的 jQuery`.live()`功能，它已经过时了，取而代之的是下面的代码：

```
$('body').on('click', 'a.archive_butt', function() {
    //do stuff
});

$('body').on('click', 'a.unarchive_butt', function() {
    //do stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:49:30.620

就个人而言，我会这样做：

```
 //// Archive button clicked
$('a.button').on("click", function() {        
    if ($(this).hasClass("archive_butt")){
       $(this).text('Un-Archive');
       //and all other stuff you are doing
    } 
    else{
       $(this).text('Archive');
       //and all the other stuff you are doing...
    }    
    $(this).toggleClass("unarchive_butt").toggleClass("archive_butt");
}); 
```

[http://jsfiddle.net/7n5tz/](http://jsfiddle.net/7n5tz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:18:43.437

改变

```
$('a.unarchive_butt').on("click", function() { 
```

到

```
$('a.unarchive_butt').live("click", function() { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T22:29:38.530

从 1.7 开始，该`.live()`方法已弃用，不应再使用。

[jQuery`.on()`](http://api.jquery.com/on/)

> 从 jQuery 1.7 开始，**.on()**方法提供了附加事件处理程序**所需的所有功能。**
> ...
> `.on( events [, selector ] [, data ], handler(eventObject) )`
> ...
> 如果`selector`省略或为 null，则事件处理程序称为*直接*或*直接绑定*。
> ...
> 当`selector`提供 a 时，事件处理程序被称为**delegated**。
> ...
> **委托事件**的优点是它们*可以处理来自以后添加到文档的后代元素的事件*。

因此，尝试更换：

```
$('a.unarchive_butt').on("click", function() {
    ...
}); 
```

和

```
$().on("click", "a.unarchive_butt", function() {
    ...
}); 
```

这会将您直接绑定的事件转换为委托事件，能够处理类更改和稍后添加到 dom 的对象。

# c# - UploadFile / Webclient - 超时配置

> ID：15670021
> 
> 赞同：2
> 
> 时间：2013-03-27T21:37:50.033
> 
> 标签：c#, timeout, webclient

我有：

```
using (System.Net.WebClient client = new System.Net.WebClient())
           {          
               client.Credentials = new System.Net.NetworkCredential(usuario, senha);
                DirectoryInfo diretorio2 = new DirectoryInfo(@"C:\");
               FileInfo[] Arquivos2 = diretorio2.GetFiles("*.*");
               foreach (FileInfo fileinfo2 in Arquivos2)
               {
               client.UploadFile("ftp://" + ftp + "/" + dir + fileinfo2.Name, @"C:\" + fileinfo2.Name);
               } 
```

我的这段代码有一些问题，也许是防火墙......我需要设置一个超时来显示一个带有问题原因的消息框，在这种情况下我该如何配置超时？

# sencha-touch - Sencha 地图中心不适用于已构建的应用程序

> ID：15670023
> 
> 赞同：0
> 
> 时间：2013-03-27T21:37:58.220
> 
> 标签：sencha-touch, sencha-touch-2, sencha-cmd

我有一个带有地图的 sencha touch 2 应用程序：

```
xtype: "map",
mapOptions: {
    zoom: 11,
    center: new google.maps.LatLng(51.516357, -0.113234),
    navigationControl: true,
    navigationControlOptions: {
        style: google.maps.NavigationControlStyle.DEFAULT
    }
} 
```

这在我使用它时效果很好，但是当我`sencha app build`用于任何类型时，地图将显示它在帕洛阿尔托附近的位置作为中心，而不是我给它的坐标。没有抛出任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:02:24.423

我从 sencha 更新了 map.js。现在它工作正常！（触摸/src/Map.js）

```
/**
 * Wraps a Google Map in an Ext.Component using the [Google Maps API](http://code.google.com/apis/maps/documentation/v3/introduction.html).
 *
 * To use this component you must include an additional JavaScript file from Google:
 *
 *     <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
 *
 * ## Example
 *
 *     Ext.Viewport.add({
 *         xtype: 'map',
 *         useCurrentLocation: true
 *     });
 *
 * @aside example maps
 */
Ext.define('Ext.Map', {
    extend: 'Ext.Container',
    xtype : 'map',
    requires: ['Ext.util.Geolocation'],

    isMap: true,

    config: {
        /**
         * @event maprender
         * Fired when Map initially rendered.
         * @param {Ext.Map} this
         * @param {google.maps.Map} map The rendered google.map.Map instance
         */

        /**
         * @event centerchange
         * Fired when map is panned around.
         * @param {Ext.Map} this
         * @param {google.maps.Map} map The rendered google.map.Map instance
         * @param {google.maps.LatLng} center The current LatLng center of the map
         */

        /**
         * @event typechange
         * Fired when display type of the map changes.
         * @param {Ext.Map} this
         * @param {google.maps.Map} map The rendered google.map.Map instance
         * @param {Number} mapType The current display type of the map
         */

        /**
         * @event zoomchange
         * Fired when map is zoomed.
         * @param {Ext.Map} this
         * @param {google.maps.Map} map The rendered google.map.Map instance
         * @param {Number} zoomLevel The current zoom level of the map
         */

        /**
         * @cfg {String} baseCls
         * The base CSS class to apply to the Map's element
         * @accessor
         */
        baseCls: Ext.baseCSSPrefix + 'map',

        /**
         * @cfg {Boolean/Ext.util.Geolocation} useCurrentLocation
         * Pass in true to center the map based on the geolocation coordinates or pass a
         * {@link Ext.util.Geolocation GeoLocation} config to have more control over your GeoLocation options
         * @accessor
         */
        useCurrentLocation: false,

        /**
         * @cfg {google.maps.Map} map
         * The wrapped map.
         * @accessor
         */
        map: null,

        /**
         * @cfg {Ext.util.Geolocation} geo
         * Geolocation provider for the map.
         * @accessor
         */
        geo: null,

        /**
         * @cfg {Object} mapOptions
         * MapOptions as specified by the Google Documentation:
         * [http://code.google.com/apis/maps/documentation/v3/reference.html](http://code.google.com/apis/maps/documentation/v3/reference.html)
         * @accessor
         */
        mapOptions: {}
    },

    constructor: function() {
        this.callParent(arguments);
        // this.element.setVisibilityMode(Ext.Element.OFFSETS);

        if (!(window.google || {}).maps) {
            this.setHtml('Google Maps API is required');
        }
    },

    initialize: function() {
        this.callParent();
        this.on({
            painted: 'doResize',
            scope: this
        });
        this.innerElement.on('touchstart', 'onTouchStart', this);
    },

    getElementConfig: function() {
        return {
            reference: 'element',
            className: 'x-container',
            children: [{
                reference: 'innerElement',
                className: 'x-inner',
                children: [{
                    reference: 'mapContainer',
                    className: Ext.baseCSSPrefix + 'map-container'
                }]
            }]
        };
    },

    onTouchStart: function(e) {
        e.makeUnpreventable();
    },

    applyMapOptions: function(options) {
        return Ext.merge({}, this.options, options);
    },

    updateMapOptions: function(newOptions) {
        var me = this,
            gm = (window.google || {}).maps,
            map = this.getMap();

        if (gm && map) {
            map.setOptions(newOptions);
        }
        if (newOptions.center && !me.isPainted()) {
            me.un('painted', 'doMapCenter', this);
            me.on('painted', 'doMapCenter', this, { delay: 150, single: true });
        }
    },

    doMapCenter: function() {
        this.setMapCenter(this.getMapOptions().center);
    },

    getMapOptions: function() {
        return Ext.merge({}, this.options || this.getInitialConfig('mapOptions'));
    },

    updateUseCurrentLocation: function(useCurrentLocation) {
        this.setGeo(useCurrentLocation);
        if (!useCurrentLocation) {
            this.setMapCenter();
        }
    },

    applyGeo: function(config) {
        return Ext.factory(config, Ext.util.Geolocation, this.getGeo());
    },

    updateGeo: function(newGeo, oldGeo) {
        var events = {
            locationupdate : 'onGeoUpdate',
            locationerror : 'onGeoError',
            scope : this
        };

        if (oldGeo) {
            oldGeo.un(events);
        }

        if (newGeo) {
            newGeo.on(events);
            newGeo.updateLocation();
        }
    },

    doResize: function() {
        var gm = (window.google || {}).maps,
            map = this.getMap();

        if (gm && map) {
            gm.event.trigger(map, "resize");
        }
    },

    // @private
    renderMap: function() {
        var me = this,
            gm = (window.google || {}).maps,
            element = me.mapContainer,
            mapOptions = me.getMapOptions(),
            map = me.getMap(),
            event;

        if (gm) {
            if (Ext.os.is.iPad) {
                Ext.merge({
                    navigationControlOptions: {
                        style: gm.NavigationControlStyle.ZOOM_PAN
                    }
                }, mapOptions);
            }

            mapOptions.zoom = mapOptions.zoom || 12;
            mapOptions.mapTypeId = mapOptions.mapTypeId || gm.MapTypeId.ROADMAP;

            // This is done separately from the above merge so we don't have to instantiate
            // a new LatLng if we don't need to
            if (!mapOptions.hasOwnProperty('center')) {
                mapOptions.center = new gm.LatLng(37.381592, -122.135672); // Palo Alto
            }

            if (mapOptions.center && mapOptions.center.latitude && !Ext.isFunction(mapOptions.center.lat)) {
                mapOptions.center = new gm.LatLng(mapOptions.center.latitude, mapOptions.center.longitude);
            }

            if (element.dom.firstChild) {
                Ext.fly(element.dom.firstChild).destroy();
            }

            if (map) {
                gm.event.clearInstanceListeners(map);
            }

            me.setMap(new gm.Map(element.dom, mapOptions));
            map = me.getMap();

            //Track zoomLevel and mapType changes
            event = gm.event;
            event.addListener(map, 'zoom_changed', Ext.bind(me.onZoomChange, me));
            event.addListener(map, 'maptypeid_changed', Ext.bind(me.onTypeChange, me));
            event.addListener(map, 'center_changed', Ext.bind(me.onCenterChange, me));
   //         event.addListenerOnce(map, 'tilesloaded', Ext.bind(me.onTilesLoaded, me));

   // the fix for the build issue:
   me.fireEvent('maprender', me, map);
        }
    },

    // @private
    onTilesLoaded: function() {
        this.fireEvent('maprender', this, this.map);
    },

    // @private
    onGeoUpdate: function(geo) {
        if (geo) {
            this.setMapCenter(new google.maps.LatLng(geo.getLatitude(), geo.getLongitude()));
        }
    },

    // @private
    onGeoError: Ext.emptyFn,

    /**
     * Moves the map center to the designated coordinates hash of the form:
     *
     *     { latitude: 37.381592, longitude: -122.135672 }
     *
     * or a google.maps.LatLng object representing to the target location.
     *
     * @param {Object/google.maps.LatLng} coordinates Object representing the desired Latitude and
     * longitude upon which to center the map.
     */
    setMapCenter: function(coordinates) {
        var me = this,
            map = me.getMap(),
            gm = (window.google || {}).maps;

        if (gm) {
            if (!me.isPainted()) {
                me.un('painted', 'doMapCenter', this);
                me.on('painted', 'doMapCenter', this, { delay: 150, single: true });
                return;
            }
            coordinates = coordinates || new gm.LatLng(37.381592, -122.135672);

            if (coordinates && !(coordinates instanceof gm.LatLng) && 'longitude' in coordinates) {
                coordinates = new gm.LatLng(coordinates.latitude, coordinates.longitude);
            }

            if (!map) {
                me.renderMap();
                map = me.getMap();
            }

            if (map && coordinates instanceof gm.LatLng) {
                map.panTo(coordinates);
            }
            else {
                this.options = Ext.apply(this.getMapOptions(), {
                    center: coordinates
                });
            }
        }
    },

    // @private
    onZoomChange : function() {
        var mapOptions = this.getMapOptions(),
            map = this.getMap(),
            zoom;

        zoom = (map && map.getZoom) ? map.getZoom() : mapOptions.zoom || 10;

        this.options = Ext.apply(mapOptions, {
            zoom: zoom
        });

        this.fireEvent('zoomchange', this, map, zoom);
    },

    // @private
    onTypeChange : function() {
        var mapOptions = this.getMapOptions(),
            map = this.getMap(),
            mapTypeId;

        mapTypeId = (map && map.getMapTypeId) ? map.getMapTypeId() : mapOptions.mapTypeId;

        this.options = Ext.apply(mapOptions, {
            mapTypeId: mapTypeId
        });

        this.fireEvent('typechange', this, map, mapTypeId);
    },

    // @private
    onCenterChange: function() {
        var mapOptions = this.getMapOptions(),
            map = this.getMap(),
            center;

        center = (map && map.getCenter) ? map.getCenter() : mapOptions.center;

        this.options = Ext.apply(mapOptions, {
            center: center
        });

        this.fireEvent('centerchange', this, map, center);

    },

    // @private
    destroy: function() {
        Ext.destroy(this.getGeo());
        var map = this.getMap();

        if (map && (window.google || {}).maps) {
            google.maps.event.clearInstanceListeners(map);
        }

        this.callParent();
    }
}, function() {
    //<deprecated product=touch since=2.0>

    /**
     * @cfg {Boolean} maskMap
     * Masks the map
     * @removed 2.0.0 Please mask this components container instead.
     */

    /**
     * @cfg {String} maskMapCls
     * CSS class to add to the map when maskMap is set to true.
     * @removed 2.0.0 Please mask this components container instead.
     */

    /**
     * @method getState
     * Returns the state of the Map.
     * @deprecated 2.0.0 Please use {@link #getMapOptions} instead.
     * @return {Object} mapOptions
     */
    Ext.deprecateClassMethod(this, 'getState', 'getMapOptions');

    /**
     * @method update
     * Moves the map center to the designated coordinates hash of the form:
     *
     *     { latitude: 37.381592, longitude: -122.135672 }
     *
     * or a google.maps.LatLng object representing to the target location.
     *
     * @deprecated 2.0.0 Please use the {@link #setMapCenter}
     * @param {Object/google.maps.LatLng} coordinates Object representing the desired Latitude and
     * longitude upon which to center the map.
     */
    Ext.deprecateClassMethod(this, 'update', 'setMapCenter');

    //</deprecated>
}); 
```

# cloud-foundry - micro cloudfoundry - vmc target FAILED Target拒绝连接

> ID：15670026
> 
> 赞同：1
> 
> 时间：2013-03-27T21:38:12.600
> 
> 标签：cloud-foundry

我无法让 micro cloudfoundry 工作，我可以 ping 它没问题，但是当我尝试运行 vmc target 时......

vmc target api.xxx.cloudfoundry.me 将目标设置为[http://api.xxx.cloudfoundry.me](http://api.xxx.cloudfoundry.me) ... FAILED 目标拒绝连接。

在日志中发现此错误...

/var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:92:in`getaddress' /var/vcap/micro/lib/micro/network.rb:61:in`块查找'/var/vcap/micro/lib/micro/network.rb:73:in`resolv_guard' /var/vcap/micro/lib/micro/network.rb:60:in`查找'/var/vcap /micro/lib/micro/watcher.rb:83:in `check' /var/vcap/micro/lib/micro/watcher.rb:46:in`watch' /var/vcap/micro/lib/micro/watcher.rb:26:in `block in start'

# [725] 错误：观察者被捕获：连接被拒绝 - recvfrom(2)

/var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:747:in `recv' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:747:in`recv_reply' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:641:in `request' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:506:in`block in each_resource' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:1000:in `block (3 levels) in resolv' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:998:in`each' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:998:in `block (2 levels) in resolv' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:997:in`each' /var /vcap/bosh/lib/ruby/1.9.1/resolv.rb:997:in `block in resolv' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:995:in`each' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:995:in `resolv' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:498:in`each_resource' /var/vcap /bosh/lib/ruby/1.9.1/resolv.rb:391:in `each_address' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:115:in`block in each_address' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:114:in `each' /var/vcap/bosh/lib/ruby/1.9.1/resolv.rb:114:in`each_address' /var/vcap /bosh/lib/ruby/1.9.1/resolv.rb:92:in`getaddress' /var/vcap/micro/lib/micro/network.rb:61:in`块查找' /var/vcap/micro/lib/micro/network.rb:73:in`resolv_guard' /var/vcap/micro/lib/micro/network.rb:60:in`查找' /var/vcap/micro/lib /micro/watcher.rb:83:in`check' /var/vcap/micro/lib/micro/watcher.rb:46:in`watch' /var/vcap/micro/lib/micro/watcher.rb:26:in `block in start'

有谁知道可能出了什么问题？

这是我安装的...

vmc 版本 0.5.0 vmware fusion 专业版 5.0.3 (1040386) 微云版：micro-v119-20121113.000224 mac osx 10.0.3

# sql - error Conversion failed when convert the varchar value 'Dog' to data type int The error is on line 40

> ID：15670027
> 
> 赞同：1
> 
> 时间：2013-03-27T21:38:14.120
> 
> 标签：sql

我正在尝试创建动态 SQL 语句，但出现以下错误：

> 将 varchar 值 'Dog' 转换为数据类型 int 时转换失败 错误在第 40 行

这个错误实际上是什么意思，这个错误在我的 StoredProcedure 中在哪里

```
USE exercise

GO

CREATE PROC REPORT

@customerID VARCHAR
AS

SELECT * INTO #temp FROM customer,animal WHERE customer.customerID = @customerID

ALTER TABLE #temp

ADD

Printed SMALLINT

UPDATE #temp

SET Printed = 0

DECLARE @customerName VARCHAR (30)
DECLARE @customerTelephone VARCHAR(30)
DECLARE @animalID INT
DECLARE @animalName VARCHAR (30)
DECLARE @quantity INT
DECLARE @price INT
DECLARE @speciesName VARCHAR(40)
DECLARE @totalPrice INT

SELECT  
        @customerName = customer.customerName,

        @customerTelephone = customer.customerTelephone

        FROM customer 

        WHERE @customerID = customer.customerID

        PRINT 'CustomerID: ' +@customerID
        PRINT 'Customer Name ' +@customerName
        PRINT 'Customer Telephone: ' +@customerTelephone
        PRINT'animalID  animalName  quantity  price  Species  totalPrice'
        WHILE EXISTS (SELECT * FROM #temp WHERE Printed = 0)
        BEGIN
        SELECT @animalID = MIN(animalID) FROM #temp WHERE Printed = 0

        SELECT @animalName = animalName,
                @quantity = animalCustomer.quantity,
                @speciesName = species.specieName
                FROM animal
                 INNER JOIN animalCustomer ON animal.animalID = animalCustomer.animalIdentificater 
                INNER JOIN species ON species.specieName = animal.speciesIdentificater
                WHERE animal.animalID = @animalID
                SET @totalPrice = @price * @quantity            
                PRINT @animalID+'  '+@animalName+'  '+@quantity+'  '+@speciesName+'  '+@totalPrice          
        UPDATE #temp
                SET Printed = 1
                WHERE @animalID = animalID
        END

DROP TABLE #temp
GO 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T21:43:12.367

该错误通常意味着您正在使用`+`符号进行字符串连接。但是一个或多个变量是数字的（在这种情况下是整数）。

据我估计，这是第 40 行：

```
 PRINT 'CustomerID: ' +@customerID 
```

您可以尝试类似：

```
 PRINT 'CustomerID: ' + cast(@customerID as varchar(255)) 
```

您的代码中的其他行也可能会遇到此问题。祝你好运。

# jquery - jQuery Tree Traversing 选择下一个 div

> ID：15670029
> 
> 赞同：2
> 
> 时间：2013-03-27T21:38:16.037
> 
> 标签：jquery, jquery-traversing

寻找一种方法来完成用 jQuery 填充 div，遍历.. 我不擅长。

我的代码有一系列 6 个框，然后是一个内容框。另外 6 个框和一个内容框，如下所示：

```
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='content'></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='box'><img src='x' /></div>
<div class='content'></div> 
```

我正在寻找的是当有人点击图像时 - 它只填充下一个`.content div`。

提前致谢。

=== 对于 Hugo .. 我得到的最接近的，显然填充了所有内容框的是：

```
$(".box img").click(function(){
                $(this).parent().parent().find(".content").html("X");
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:42:36.800

```
$('.box img').click(function(){
   $(this).parent().nextAll('.content').first().text('...');
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:42:14.397

您需要为此使用适当的[遍历函数](http://api.jquery.com/category/traversing/tree-traversal/)。“最佳”版本取决于您的标记及其各个部分的相对稳定性，但现在让我们使用您提供的 HTML。

从 any 开始`<img>`，您要向上移动到其父级`.box`，然后查找下一个`.content`。翻译成 jQuery：

```
$(this).parent().nextAll(".content").first() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:41:26.970

```
$('img').click(function() {
  var $nextdiv = $(this).parent().nextUntil('.content').addBack().last().next();
  // do something with it
}); 
```

[http://jsfiddle.net/mblase75/gRKfa/](http://jsfiddle.net/mblase75/gRKfa/)

[http://api.jquery.com/nextUntil](http://api.jquery.com/nextUntil)

（`.nextAll().first()`虽然不太复杂。）

# sql - Delphi 中的 SQL 验证

> ID：15670036
> 
> 赞同：4
> 
> 时间：2013-03-27T21:38:43.393
> 
> 标签：sql, delphi, validation

我希望能够检查 SQL 是否有效，例如

```
select * from contacts where id = 42 
```

会通过，但

```
select * from contacts where id 42 
```

会失败

有谁知道一个简单的 SQL 验证库 - 最好是免费的（或便宜的）？

我想将此作为某些单元测试的一部分，所以我想检查生成的 SQL 是否有效，但不想在服务器上执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:43:32.773

对“delphi sql parser”的快速 Google 查询返回[了这篇](http://www.felix-colibri.com/papers/db/sql_parser/sql_parser.html)关于在 Delphi 中编写 SQL 解析器的文章，包括底部链接中的源代码。

解析器可以很容易地用作验证器；只需将生成的输出丢弃即可。如果它解析，它是有效的。如果它出错，它不是。

# javascript - 阻止表单将值推送到 url javascript

> ID：15670039
> 
> 赞同：0
> 
> 时间：2013-03-27T21:38:51.567
> 
> 标签：javascript, html, forms

所以我有一个使用 html 和 javascript 制作的网络表单（我不是程序员），我发现了一些 CSS 代码让它看起来很漂亮，但我不得不重新做我的表单并给它不同的标签，即（`<label>, <p> <fieldset>`）这不在我的原始代码中。现在我的所有`document.affiliateForm.afc4.value= somevalue;`语句都不再写入他们的字段，而是推送到 url ( `/index.html?somevalue=x&someothervalue=y`)。有谁知道这可能是什么原因造成的？我很确定这不是由于我的 javascript 造成的，因为在我更改这些标签之前一切正常，并且推送到 url 的值都是正确的。

这里的任何帮助都会很棒

```
<fieldset>
<legend>How much can you make?</legend>
<form name="affiliateForm">
<p>
    <label for="you">How many members will you refer:</label>
    <input class="fixed" type="text" name="you">
</p>
<p>
    <label for="them">How many members will they refer:</label>
    <input class="fixed" type="text" name="them"><br />
</p>
<p class="nolabel">
    <button onClick="calculateAffiliate()">Calculate Affiliate Amount</button>
</p>
<br>
<!-- End Entry Fields -->

<!-- Field Names -->
<p>
<label class="matrix">Levels:</label>
<input type="text" name="cst" value="Customer" value="Level" disabled>
<input type="text" name="com" value="Commission" value="Level" disabled>
<input type="text" name="afc" value="Affiliate Commision" value="Level" disabled>
<input type="text" name="pab" value="Platinum Affiliate Bonus" value="Level" disabled>
</p>
<!-- End Field Names -->
<!-- Start Level 1 -->
<p>
<label class="matrix">Level 1:</label>
<input type="text" name="cst1">
<input type="text" name="com1">
<input type="text" name="afc1">
<input type="text" name="pab1">
</p>
<!-- End Level 1 -->
<!-- Start Level 2 -->
<p>
<label class="matrix">Level 2:</label> 
<input type="text" name="cst2">
<input type="text" name="com2">
<input type="text" name="afc2">
<input type="text" name="pab2">
</p>
<!-- End Level 2 -->
<!-- Start Level 3 -->
<p>
<label class="matrix">Level 3:</label> 
<input type="text" name="cst3">
<input type="text" name="com3">
<input type="text" name="afc3">
<input type="text" name="pab3">
</p>
<!-- End Level 3 -->
<!-- Start Level 4 -->
<p>
<label class="matrix">Level 4:</label> 
<input type="text" name="cst4">
<input type="text" name="com4">
<input type="text" name="afc4">
<input type="text" name="pab4">
</p>
<!-- End Level 4 -->
<!-- Start Level 5 -->
<p>
<label class="matrix">Level 5:</label>  
<input type="text" name="cst5">
<input type="text" name="com5">
<input type="text" name="afc5">
<input type="text" name="pab5">
</p>
<!-- End Level 5 -->
<!-- Start Level 6 -->
<p>
<label class="matrix">Level 6:</label> 
<input type="text" name="cst6">
<input type="text" name="com6">
<input type="text" name="afc6">
<input type="text" name="pab6">
</p>
<!-- End Level 6 -->
<!-- Start Level 7 -->
<p>
<label class="matrix">Level 7:</label> 
<input type="text" name="cst7">
<input type="text" name="com7">
<input type="text" name="afc7">
<input type="text" name="pab7">
</p>
<!-- End Level 7 -->
<!-- Start Level 8 -->
<p>
<label class="matrix">Level 8:</label> 
<input type="text" name="cst8">
<input type="text" name="com8">
<input type="text" name="afc8">
<input type="text" name="pab8">
</p>
<!-- End Level 8 -->
<!-- Start Level 9 -->
<p>
<label class="matrix">Level 9:</label> 
<input type="text" name="cst9">
<input type="text" name="com9">
<input type="text" name="afc9">
<input type="text" name="pab9">
</p>
<!-- End Level 9 -->
<!-- Start Level 10 -->
<p>
    <label class="matrix">Level 10:</label> 
    <input type="text" name="cst10">
    <input type="text" name="com10">
    <input type="text" name="afc10">
    <input type="text" name="pab10">
</p>
<br>
<!-- End Level 10 -->

<!-- Totals -->
<p>
    <label for="total1">Total Affiliate Commission:</label>
    <input class="fixed" type="text" name="total1">
</p>
<p>
    <label for="total2">Total Platinum Affiliate Bonus:</label>
    <input class="fixed" type="text" name="total2">
</p>
<p>
    <label for="total">Total Payout</label>
    <input class="fixed" type="text" name="total">
</p>
<!-- End Totals -->

</fieldset>
</form> 
```

编辑***** ******

我添加了建议的方法 =“POST”，它确实阻止了代码显示在 URL 中，但它仍然从字段中消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:41:33.390

如果您使用`<form name="affiliateForm" method="POST">`这些字段将不再附加。按照`method="GET"`标准，如果您未另行指定，则将字段推送到 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:16:50.467

嘿大家很抱歉，如果有人花时间在这上面。我想通了，当我切换到使用的 css 表单时，我使用的代码版本。

我想正如您所说，根据您是否设置了 get(default) 的帖子，在某处提交这些值。不太确定输入按钮的作用，但它适用于我的代码。

我将把功劳归功于 k_wave，因为我的问题可能没有提供足够的信息让他看到我做了什么不同的事情。谢谢您的帮助！

谢谢，

# xslt - 如何使用 XSLT 进行分组和求和

> ID：15670043
> 
> 赞同：2
> 
> 时间：2013-03-27T21:39:15.883
> 
> 标签：xslt, bpel

如何在**不使用的情况下将 XSLT 用于以下情况`xsl:for-each-group`**

我的要求：如果迭代的 Field1 .. Field6 与组中任何迭代的 Field1 .. Field6 匹配，那么我们需要将数量相加并取组的最低 ID。

***输入***

```
<Shipment>
    <ID>1</ID>
    <Field1>abcd</Field1>
    <Field2>1234</Field2>
    <Field3>efgh</Field4>
    <Field4>5678</Field4>
    <Field5>ijkl</Field5>
    <Field6>90mn</Field6>
    <Amount>200.00</Amount>
</Shipment>
<Shipment>
    <ID>2</ID>
    <Field1>abcd</Field1>
    <Field2>1234</Field2>
    <Field3>efgh</Field4>
    <Field4>5678</Field4>
    <Field5>ijkl</Field5>
    <Field6>90mn</Field6>
    <Amount>600.00</Amount>
</Shipment>
<Shipment>
    <ID>3</ID>
    <Field1>1234</Field1>
    <Field2>abcd</Field2>
    <Field3>efgh</Field4>
    <Field4>5678</Field4>
    <Field5>2345</Field5>
    <Field6>80mn</Field6>
    <Amount>600.00</Amount>
</Shipment> 
```

***预期产出***

```
<Shipment>
    <ID>1</ID>  
    <Field1>abcd</Field1>
    <Field2>1234</Field2>
    <Field3>efgh</Field4>
    <Field4>5678</Field4>
    <Field5>ijkl</Field5>
    <Field6>90mn</Field6>
    <Amount>800.00</Amount> 
</Shipment>
<Shipment>
    <ID>2</ID>
    <Field1>1234</Field1>
    <Field2>abcd</Field2>
    <Field3>efgh</Field4>
    <Field4>5678</Field4>
    <Field5>2345</Field5>
    <Field6>80mn</Field6>
    <Amount>600.00</Amount>
</Shipment> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:58:41.787

**不使用的要求`xsl:for-each-group`清楚地表明 XSLT 2.0 处理器不可用**。

**这是一个 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kAllFields" match="Shipment" use=
 "concat(Field1,'+',Field2,'+',Field3,'+',Field4,'+',Field5,'+',Field6)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "Shipment
     [not(generate-id()
     =
      generate-id(key('kAllFields',
                      concat(Field1,'+',Field2,'+',Field3,'+',Field4,'+',Field5,'+',Field6))[1]))]
 "/>

 <xsl:template match="Shipment">
  <xsl:variable name="vGroup" select=
  "key('kAllFields', concat(Field1,'+',Field2,'+',Field3,'+',Field4,'+',Field5,'+',Field6))"/>

  <Shipment>
    <ID>
      <xsl:call-template name="min">
        <xsl:with-param name="pItems" select="$vGroup/ID"/>
      </xsl:call-template>
    </ID>
    <xsl:apply-templates select="*[starts-with(name(), 'Field')]"/>
    <Amount><xsl:value-of select="sum($vGroup/Amount)"/></Amount>
  </Shipment>
 </xsl:template>

 <xsl:template name="min">
  <xsl:param name="pItems" select="/.."/>
  <xsl:param name="pDataType" select="'number'"/>

  <xsl:for-each select="$pItems">
    <xsl:sort data-type="{$pDataType}"/>
    <xsl:if test="position() =1"><xsl:value-of select="."/></xsl:if>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（提供的严重格式错误的片段 - 已更正并包装到单个顶部元素中以使其成为格式良好的 XML 文档）时：

```
<t>
    <Shipment>
        <ID>1</ID>
        <Field1>abcd</Field1>
        <Field2>1234</Field2>
        <Field3>efgh</Field3>
        <Field4>5678</Field4>
        <Field5>ijkl</Field5>
        <Field6>90mn</Field6>
        <Amount>200.00</Amount>
    </Shipment>
    <Shipment>
        <ID>2</ID>
        <Field1>abcd</Field1>
        <Field2>1234</Field2>
        <Field3>efgh</Field3>
        <Field4>5678</Field4>
        <Field5>ijkl</Field5>
        <Field6>90mn</Field6>
        <Amount>600.00</Amount>
    </Shipment>
    <Shipment>
        <ID>3</ID>
        <Field1>1234</Field1>
        <Field2>abcd</Field2>
        <Field3>efgh</Field3>
        <Field4>5678</Field4>
        <Field5>2345</Field5>
        <Field6>80mn</Field6>
        <Amount>600.00</Amount>
    </Shipment>
</t> 
```

**产生了想要的正确结果**：

```
<t>
   <Shipment>
      <ID>1</ID>
      <Field1>abcd</Field1>
      <Field2>1234</Field2>
      <Field3>efgh</Field3>
      <Field4>5678</Field4>
      <Field5>ijkl</Field5>
      <Field6>90mn</Field6>
      <Amount>800</Amount>
   </Shipment>
   <Shipment>
      <ID>3</ID>
      <Field1>1234</Field1>
      <Field2>abcd</Field2>
      <Field3>efgh</Field3>
      <Field4>5678</Field4>
      <Field5>2345</Field5>
      <Field6>80mn</Field6>
      <Amount>600</Amount>
   </Shipment>
</t> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:56:59.077

您需要选择 Field1 到 Field6 中未使用的分隔符。

```
<xsl:param name="separator" select="'-'"/>
<xsl:template match="/shipments">
    <xsl:for-each-group select="Shipment" group-by="concat(Field1,$separator,Field2,$separator,Field3,$separator,Field4,$separator,Field5,$separator,Field6)">
        <xsl:copy-of select="current-group()[ID=min(current-group()/ID)]"/>
    </xsl:for-each-group>
</xsl:template> 
```

工作[示例](http://xsltransform.net/3Nqn5Y3)

# visual-studio-2010 - 在 Visual 2010 中打开 VS 2005（框架 2.0）解决方案时出错

> ID：15670048
> 
> 赞同：1
> 
> 时间：2013-03-27T21:39:28.573
> 
> 标签：visual-studio-2010, visual-studio-2005, .net-framework-version

我们有一个在框架 2.0 上运行的 2005 解决方案。我正在尝试将其转换为 2010 年。

我在 2010 年打开了它，然后为我的解决方案下的所有项目保留了目标框架版本 2.0。在构建任何项目时，即使我可以看到引用下的所有 DLL，我也会因为缺少 DLL 引用而收到一堆错误。这些 DLL 由我们使用运行时框架 2.0 版创建。

**错误 150 找不到类型或命名空间名称“ABC”（您是否缺少 using 指令或程序集引用？）**

# python - 在 MySQLdb 中转义 %

> ID：15670050
> 
> 赞同：2
> 
> 时间：2013-03-27T21:39:45.260
> 
> 标签：python, mysql, mysql-python

**我在冗长复杂的 SELECT 语句中发现了一个鬼鬼祟祟的逗号**

在 python 脚本中，我有一行像

```
con.execute("SELECT STR_TO_DATE(date_recieved, '%%m/%%d/%%Y') from raw_table") 
```

然而，这让 MySQLdb 不高兴，并抱怨：

```
File "/lib/python2.6/site-packages/MySQL_python-1.2.4-py2.6-linux-x86_64.egg/MySQLdb/cursors.py", 
line 183, in execute
    query = query % db.literal(args)
TypeError: not all arguments converted during string formatting 
```

我不想要任何争论。我想将 '%' 传递给 MySQL（我真的想要 '%m/%d/%Y' 但尝试转义百分比：%%）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:16:04.140

您没有为查询提供任何参数，因此`%`' 被逐字处理。

简单的：

```
con.execute("SELECT STR_TO_DATE(date_recieved, '%m/%d/%Y') from raw_table") 
```

应该管用。

传递一个空的参数元组和转义百分比也应该起作用：

```
con.execute("SELECT STR_TO_DATE(date_recieved, '%%m/%%d/%%Y') from raw_table", ()) 
```

它不是特定于 MySQLdb 的。

这：

```
print "a %s %d" 
```

有效 - 百分号按字面意思解释，而这：

```
print "a %s %d" % () 
```

没有。

# javascript - 特殊字符替换功能

> ID：15670055
> 
> 赞同：1
> 
> 时间：2013-03-27T21:39:54.513
> 
> 标签：javascript, jquery

我有一个用普通字符替换特殊字符的 JavaScript 函数。

当我输入一个句号`.`时，它变为`a`

示例：`info@example.com`更改为`info@exampleacom`

我究竟做错了什么？

```
function retiraAcento(palavra, obj) {
   com_acento = 'áàãâäéèêëíìîïóòõôöúùûüçÁÀÃÂÄÉÈÊËÍÌÎÏÓÒÕÖÔÚÙÛÜÇ';
   sem_acento = 'aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC';
   nova = '';
   for (i = 0; i < palavra.length; i++) {
       if (com_acento.search(palavra.substr(i, 1)) >= 0) {
           nova += sem_acento.substr(com_acento.search(palavra.substr(i, 1)), 1);
       } else {
           nova += palavra.substr(i, 1);
       }
   }
   //obj.value = nova.toUpperCase();
   obj.value = nova
}
$(document).ready(function () {
   $(":input").live('blur', function () {
       retiraAcento(this.value, this);
   });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:52:52.260

[`String.search`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search)接受*正则表达式*作为参数，而不是哑字符串。该字符`.`在正则表达式中具有特殊含义；它的意思是“匹配任何字符”。

因此，当您的代码最终执行`com_acento.search(".")`结果时，总是`0`：点匹配第一个字符。此外，正则表达式中还有其他具有特殊含义的字符也会导致您的代码无法正常工作。

[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)通过使用而不是解决您的问题`search`。

# mysql - 按升序对 MySQL 查询进行排序，EXCEPT FOR 0

> ID：15670057
> 
> 赞同：1
> 
> 时间：2013-03-27T21:40:04.420
> 
> 标签：mysql, sorting, int

我正在制作一个任务管理工具。任务的截止日期以时间戳的形式存储在一个名为`dueTime`INT 类型的 MySQL 列中。如果任务没有截止日期（很多没有），dueTime 列的值为0。任务需要按dueTime**升序**显示，没有截止时间的任务在列表后面显示。

我目前的解决方案是`SELECT * FROM tasks WHERE dueTime > 0 ORDER BY dueTime`，抓取数据，然后运行第二个查询`SELECT * FROM tasks WHERE dueTime = 0`并添加该数据。它工作得很好，但我想只用一个查询来完成这个。我也宁愿不必添加“有时间”的属性，因为这似乎没有必要。

我见过的其他问题涉及使用`GROUP BY`，但我不确定在时间戳上使用它是否是必要的或有效的。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:58:50.513

我认为您至少有3种可能性：

*   不要将 0 用作“没有到期时间”，而是使用 99999，这样您就可以保持自然的“ORDER BY dueTime ASC”。（那不是很干净……）

*   使用您已经提到的两个查询，并将它们与[UNION结合起来](http://dev.mysql.com/doc/refman/5.5/en/union.html "联盟")

*   正如 Randy 已经提到的，在您的 ORDER BY 子句中使用[CASE 。](http://dev.mysql.com/doc/refman/5.1/en/case.html "案子")参见这里：[mysql 自定义排序](https://stackoverflow.com/questions/2175439/mysql-custom-sort)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:38:36.070

你可以试试这个：

```
SELECT * FROM tasks ORDER BY dueDate IS NULL,dueTime 
```

# java - JOptionPane 对话框 - 额外行的问题

> ID：15670058
> 
> 赞同：0
> 
> 时间：2013-03-27T21:40:04.573
> 
> 标签：java, swing, loops, joptionpane

写一些显示 1-1000 之间的素数、1-1000 之间的双素数和 1-10,000 之间的完美数的东西。编写这些方法没有任何问题，但 JOptionPane 对话框现在让我发疯。努力尝试在 1-1000 之间的素数每行显示 10 个数字

```
 if( userChoice == 1 )
        {
            message = String.format( "Prime Numbers between 1-1,000 are:");
            for( number = 3; number <= 1000; number++ )
            {
                if( trueCounter % 10 == 0 )
                    message += "\n";

                prime = isPrime( number );
                if( prime == true )
                {
                    message += " " + number;
                    ++trueCounter;
                }
            }
            JOptionPane.showMessageDialog( null, message );
        } 
```

这就是我所拥有的，它显示所有数字并每行显示 10 个数字....但它还会在其间显示随机数量的额外行，因此对话框高度最终变得太大。它甚至是一组额外的行，这真的让我感到困惑......就像这样

```
{3 5 7 11 13 17 19 23 29 31
(8 new lines)
37 41 43 47 53 59 61 67 71 73
(10 new lines..) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:52:18.290

改变这个：

```
 if( trueCounter % 10 == 0 )
                message += "\n";

            prime = isPrime( number );
            if( prime == true )
            {
                message += " " + number;
                ++trueCounter;
            } 
```

对此：

```
 prime = isPrime( number );
            if( prime == true )
            {
                message += " " + number;
                ++trueCounter;

                if( trueCounter % 10 == 0 )
                    message += "\n";
            } 
```

如果没有，您将在第 0、第 10、第 20、... 元素之后添加很多换行符。

Om，我会考虑使用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:51:05.617

我一直在与这种事情作斗争。我想知道您是否在自动换行和回车方面遇到问题。

要对此进行测试，请将`\n`代码中的 替换为字符，`x`然后查看行为。

如果您仍然得到新行，它们可能是自动换行，而不是`\n`.

只是一个猜测。希望有帮助。

# c - 如何用数字从C中的字符串中分隔单词

> ID：15670061
> 
> 赞同：0
> 
> 时间：2013-03-27T21:40:10.423
> 
> 标签：c, string, scanf

我有一个名为 commands.txt 的文本文件，其中包含一些命令和一些参数。例子：

```
STOP 1 2 4
START 5 2 1 8
MOVE
CUT 0 9 
```

我想从这个文本文件中读取每一行并打印这样的东西

```
STOP: 1 2 3
START: 5 2 1 8
MOVE:
CUT: 0 9 
```

我用 fgets 阅读了每一行，然后我尝试使用 sscanf 但不起作用。

```
char line[100]   // here I put the line
char command[20] // here I put the command
args[10]         // here I put the arguments

 #include<stdio.h>
    int main()
    {
    FILE *f;
char line[100];
char command[20];
int args[10];

f=fopen("commands.txt" ,"rt");
while(!feof(f))
{
fgets(line , 40 , f);
//here i need help
}
fclose(f);
return 0;
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T22:20:35.473

我认为你以错误的方式处理整个事情。如果您想收集与参数分开的命令以对它们执行某些操作，那么您需要使用 ctype.h 进行测试。

但是，对于您想要执行输出的方式，您实际上并不需要保存所有这些缓冲区。只需打印整个内容，在您需要的地方填写您的结肠。

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <ctype.h>

    int main(){

      FILE *f;
      char *buf;
      buf = NULL;
      int i = 0, size;

      f=fopen("commands.txt", "r");
      fseek(f, 0, SEEK_END);
      size = ftell(f);
      fseek(f, 0, SEEK_SET);
      buf = malloc(size + 1);
      fread(buf, 1, size, f);
      fclose(f);

      for(i = 0; i < size ; i++){
        while(isalpha(buf[i])){
          printf("%c", buf[i++]);
        }
        printf(":");
        while(buf[i] == ' ' || isdigit(buf[i])){
          printf("%c", buf[i++]);
        }
        printf("\n");
      }
    return 0;
    } 
```

# hadoop - Hadoop：使用 NLineInputFormat 进行压缩？

> ID：15670062
> 
> 赞同：0
> 
> 时间：2013-03-27T21:40:20.760
> 
> 标签：hadoop, split, compression, streaming

```
$ cat abook.txt | base64 –w 0 >onelinetext.b64
$ hadoop fs –put onelinetext.b64 /input/onelinetext.b64
$ hadoop jar hadoop-streaming.jar  \
    -input /input/onelinetext.b64 \
    -output /output \
    -inputformat org.apache.hadoop.mapred.lib.NLineInputFormat \
    –mapper wc 
```

> Num task：1，输出只有一行：
> 
> 1号线：1 2 202699

这是有道理的，因为每个映射器只有一行。

```
$ bzip2 onelinetext.b64
$ hadoop fs –put onelinetext.b64.bz2  /input/onelinetext.b64.bz2
$ hadoop jar hadoop-streaming.jar \
      -Dmapred.input.compress=true \
      -Dmapred.input.compression.codec=org.apache.hadoop.io.compress.GzipCodec \
      -input /input/onelinetext.b64.gz \
      -output /output \
      -inputformat org.apache.hadoop.mapred.lib.NLineInputFormat \
      –mapper wc 
```

我期待与上述相同的结果，'因为应该在处理单行文本（即 wc）之前进行解压缩，但是，我得到：

> 任务数：397，输出有 397 行：
> 
> 第 1-396 行：0 0 0
> 
> 397线：1 2 202699

知道为什么这么多 mapred.map.tasks <>1 吗？分裂？我故意选择 gzip，因为我相信它是不可拆分的。使用 bzip2 和 lzop 编解码器时，我得到了类似的结果。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:04:57.060

我认为这取决于您使用的 Hadoop 版本。有，例如[HADOOP-4012](https://issues.apache.org/jira/browse/HADOOP-4012) ...</p>

# algorithm - 最近点到点，最近点到线

> ID：15670064
> 
> 赞同：4
> 
> 时间：2013-03-27T21:40:26.790
> 
> 标签：algorithm, geometry, complexity-theory, theory, computational-geometry

`m`想象一下二维平面中的一组点，称为“候选点”。然后是以下两种情况之一：

*   还有一组`n`点（“对象”） - 见图 1

*   还有一组`n`与 X 或 Y 轴共线的线（“对象”） - 参见图 2

我想知道哪个候选对象对具有所有对中最短的笛卡尔距离。

请问，有谁知道这个问题在计算几何中有名称吗？有没有比 O(m*n) 更快的算法？如果对象保持不变，只有候选对象发生变化——通过一些巧妙的预计算，是否有可能比 O(m*n) 更快？

图。1

```
 c      o
       c
                          o         c      o
           o    c
                             c
              c o              
                       c             o
                                          c
               o                 c
          c 
```

图 2

```
 |                      c           |  
-------------+----------------------------------+------  
             |                                  |  
             |              c                   |    c  
             c                                  |  
             |                                  |  
-------------+----------------------------------+------  
             |          c            c          |  
-------------+----------------------------------+------  
             |                            c     | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:15:44.140

这基本上是对所有候选人的最近邻搜索。[您可以使用kd 树](http://en.wikipedia.org/wiki/K-d_tree)索引加速这些类型的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:04:04.437

我不明白您将如何从对象创建线条。为每个对象创建两条线：一条垂直线，一条水平线，是吗？

在任何情况下，假设您有垂直线 v1,v2,..,va 和水平线 h1,h2,...,hb。

根据 x 轴偏移量对垂直线进行排序，根据 y 轴偏移量对水平线进行排序。

对候选集中的每个点进行二分搜索以获得最近的垂直和水平线。现在，如何计算最接近的 (candidate,line) 对是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:04:23.753

您要查找的名称很可能是 NNS（请参阅：[http](http://en.wikipedia.org/wiki/Nearest_neighbor_search) ://en.wikipedia.org/wiki/Nearest_neighbor_search ），是的，给定一些时间和空间来对一组静态“对象”进行预计算，它应该可以执行您的搜索速度比 O(n*m) 快。

即使使用构建二叉搜索树的最简单方法，您也应该能够将单个查找的时间复杂度降低到 O(log n)，从而导致整个问题的 O(m log n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:37:34.187

你有两个一维问题而不是一个二维问题。在 x 和 y 轴上投影所有“候选对象”，然后将垂直“对象”放置在 x 轴上，水平放置在 y 上。

瞧！两个一维问题。

现在在 1d。

将所有“候选”放入排序数组，对于每个“对象”，使用二进制搜索在该数组中查找包含段（两个最接近的“候选”）。

结果 O(n log m + n log n)

# node.js - 猫鼬不从集合中删除对象

> ID：15670067
> 
> 赞同：0
> 
> 时间：2013-03-27T21:40:41.953
> 
> 标签：node.js, mongodb, mongoose

猫鼬表现出一种奇怪的行为。以下代码行首先完全删除一个集合，然后创建一个新对象，最后再次删除该集合。

```
Model.remove().exec();
var obj = new Model({ name: 'my object' });
obj.save();
Model.remove().exec(); 
```

虽然第一次删除有效（每次我启动程序时，集合都被清空），但第二次没有效果（当我查询集合时，对象仍然存在）。我不知道这里发生了什么。

环境：Node.js v0.8.20、MongoDB v1.2.14 和 Mongoose v3.6.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:29:47.800

您需要使用回调来获取串行操作。node.js 中的所有 I/O 都是异步的。这意味着你`.save()`的速度可能比`.remove().exec()`第二次`.remove().exec()`完成，然后保存发生。您需要使用回调函数来进行适当的流量控制。深度嵌套回调（AKA 回调地狱）方式看起来像这样，但使用更多命名函数或像 async.js 这样的流控制库将解决这个问题。

```
Model.remove().exec(function (error) {
    var obj = new Model({ name: 'my object' });
    obj.save(function (error) {
        Model.remove().exec();
    });
}); 
```

也可以随意在那里进行一些错误处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-13T09:52:50.577

我有这段代码在我的测试结束时执行；

`var clearDb = function (){ // Reset collections ProjectModel.remove().exec() .then(function() { console.log('Removed collection: Project'); }); };`

但是，它不会清除集合！它适用于另一个不同模型的测试用例，并且有效！有任何想法吗？我可以看到日志

# angularjs - 如何处理来自不同模块的竞争指令

> ID：15670073
> 
> 赞同：1
> 
> 时间：2013-03-27T21:41:00.280
> 
> 标签：angularjs, angularjs-directive

我有 2 个属性指令（两者的限制都设置为“A”），`dir1`并且`dir2`在两个不同的模块中定义。在一个应用程序（包括这两个模块）中，我们有一个元素可以添加这两个指令之一。我们目前进行了设置，因此这`dir1`是该元素的默认设置，但我们想要一种`dir2`“覆盖”该指令的方法。

我们想要使用的元素是另一个指令模板的一部分`parentDir`，所以我的第一个想法是为函数添加一些`compile`功能`parentDir`。for 的模板`parentDir`将包含在其中`<div class="myElement" dir1="{{data}}"></div>`，然后 compile 函数将如下所示：

```
function(tElement, tAttrs) {
    if ("true" == tAttrs.useDir2)
    {
        var myElement = tElement.find("div.myElement");
        myElement.removeAttr("dir1");
        myElement.attr("dir2", "{{data}}");
    }

    return function (scope, element, attrs) {
    // link stuff
    }
} 
```

where`useDir2`将是`parentDir`指令的一个属性。这可以正常工作，但是 for 的值`useDir2`是一个插值，所以我不会用 . 查看我想要的值`tAttrs.useDir2`。

我考虑过在 2 个指令上设置优先级，但是每个指令都必须知道另一个指令的优先级，以确保它们正确地相互关联。您不希望有人进入一个模块并更改其他内容的优先级，并破坏此功能。由于这两个指令位于不同的模块中，我希望它们彼此完全不知道。

我希望我已经足够清楚地解释了我的问题。我只是不确定如何去做，并且认为我可能错过了一些简单的方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:14:06.687

我相信你需要做一些你提议的事情。如果您需要在运行时定义它（即由控制器），在您的链接函数中，`$observe`属性然后在值更改时更改并重新编译元素内容。像这样的东西：

```
app.directive('parentDir', function($compile) {
  return {
    link: function(scope, element, attr) {
        attr.$observe('parentDir', function(value) {
            var div = angular.element('<div ' + value + '></div>');
            element.find('div').remove();
            element.append(div);
            $compile(div)(scope);
        });
    },
    template: '<input type="checkbox" ng-model="val"/> Use directive 2: ' + 
            '<div></div>'
  };
}); 
```

我做了一个[小提琴](http://jsfiddle.net/CaioToOn/4nrkY/)。

当然，我简化了 parentDir，你可能需要缓存 DOM 的原始状态，这样你就可以安全地重新编译它。

# ios - 如何在 UIView 的 layerClass 实例上使用 CIFilter？

> ID：15670080
> 
> 赞同：4
> 
> 时间：2013-03-27T21:41:32.147
> 
> 标签：ios, core-animation, core-image

我的 UIView 正在为其图层使用 TBPaperLayer 的实例。

```
+(Class)layerClass {
    return [TBPaperLayer class];
} 
```

我想创建一个 CIFilter 来修改该层的外观 - 特别是在其上应用模糊过滤器。如何使用此代码模糊该图层的一部分？（代码来自：[Blur CALayer's Superlayer](https://stackoverflow.com/questions/2821551/blur-calayers-superlayer)）

```
CALayer *blurLayer = [CALayer layer];
CIFilter *blur = [CIFilter filterWithName:@"CIGaussianBlur"];
[blur setDefaults];
blurLayer.backgroundFilters = [NSArray arrayWithObject:blur];
[self.superlayer addSublayer:blurLayer]; 
```

期间没有超层`-init`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T06:43:51.373

这在 iOS 上是不可能的。从[`CALayer`类参考](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/backgroundFilters)：

> **特别注意事项**
> 
> iOS 中的图层不支持此属性。

想必苹果并不觉得当前这一代的 iOS 硬件强大到足以支持实时图像过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T20:15:59.930

对于 iOS 6.1，我想要一个视图来封装标题序列的某些动态图形中使用的向内收缩和去模糊效果。我生成的代码（此处未全部显示）稳步降低拉伸因子（向内缩小文本的水平比例）和模糊量。应用此效果的文本呈现为 UIBezierPath 并存储在 self.myPath 中。计时器触发减少这两个值的方法并调用 setNeedsDisplay。

```
- (void)displayLayer:(CALayer *)layer
{
    UIGraphicsBeginImageContext(self.bounds.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGAffineTransform stretch = CGAffineTransformMakeScale(self.stretchFactor + 1.0, 1.0);
    CGPathRef stretchedPath = CGPathCreateCopyByTransformingPath([self.myPath CGPath], &stretch);
    CGRect newBox = CGPathGetBoundingBox(stretchedPath);
    float deltaX = CGRectGetMidX(self.bounds) - CGRectGetMidX(newBox);
    float deltaY = CGRectGetMidY(self.bounds) - CGRectGetMidY(newBox);
    CGAffineTransform slide = CGAffineTransformMakeTranslation(deltaX, deltaY);
    CGPathRef centeredPath = CGPathCreateCopyByTransformingPath(stretchedPath, &slide);
    CGPathRelease(stretchedPath);
    CGContextAddPath(ctx, centeredPath);
    CGPathRelease(centeredPath);
    CGContextSetFillColorWithColor(ctx, [[UIColor blackColor] CGColor]);
    CGContextFillPath(ctx);
    UIImage *tmpImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    CIImage *inputImage = [CIImage imageWithCGImage:[tmpImage CGImage]];
    CIFilter *gBlurFilter = [CIFilter filterWithName:@"CIGaussianBlur"
                                   keysAndValues:@"inputRadius", [NSNumber numberWithFloat:self.blurFactor],
                                                 @"inputImage", inputImage, nil];
    CIImage *blurredImage = [gBlurFilter outputImage];
    CIContext *context = [CIContext contextWithOptions:nil];
    CGImageRef cgimg = [context createCGImage:blurredImage fromRect:[blurredImage extent]];
    [layer setContents:(__bridge id)cgimg];
    CGImageRelease(cgimg);
}

- (void)drawRect:(CGRect)rect
{
    // empty drawRect: to get the attention of UIKit
} 
```

我还没有检查这个代码是否有泄漏，所以认为它是“伪代码”:-) 如图所示，这可以在 drawRect: 中完成，而不是使用层，但我还有其他事情在这个视图中没有显示精简版。

但由于 CIGaussianBlur 需要大量时间，我正在研究[使用 Accelerate 框架进行图像处理，](http://weblog.invasivecode.com/post/17202028681/ios-image-processing-with-the-accelerate)以了解如何使我的版本更加流畅。

# javascript - $.getJSON parsererror 试图调用 API

> ID：15670082
> 
> 赞同：0
> 
> 时间：2013-03-27T21:41:42.593
> 
> 标签：javascript, json, api, getjson

我正在尝试使用返回 JSON 但遇到一些麻烦的 Clipped API ( [http://clipped.me/api.html )。](http://clipped.me/api.html)我正在使用 getJSON，在 Chrome 的 JS 控制台中，我收到以下错误消息：

> 资源解释为脚本，但使用 MIME 类型 text/html 传输：“ [http://clipped.me/algorithm/clippedapi.php?url=callback=jQuery1910859611126](http://clipped.me/algorithm/clippedapi.php?url=callback=jQuery1910859611126) ...emo-day-2013-still-looking-for-the-next- airbnb 或投递箱/&_=1364420105379”。
> 
> 未捕获的 SyntaxError：意外的标识符
> 
> 请求失败：解析器错误，错误：未调用 jQuery19108596111265942454_1364420105378

这是我的 JS：

```
var clippedAPI = "http://clipped.me/algorithm/clippedapi.php?url=[URL]callback=?";
    $.getJSON(clippedAPI, "http://pandodaily.com/2013/03/26/y-combinator-demo-day-2013-still-looking-for-the-next-airbnb-or-dropbox/" ).done(function(json) {
            console.log("JSON Data: " + json.title );
    }).fail(function(jqxhr, textStatus, error){
            var err = textStatus + ', ' + error;
            console.log("Request Failed: " + err);
    }); 
```

这是我第一次尝试使用 API 或 JSON 制作东西，所以我真的不知道该怎么做。我试过谷歌搜索，但找不到任何东西。我实际发送的数据被我添加 callback=? 时出现的这个 jQuery 通知切断了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:51:41.877

您的参数不会简单地“猜测” [URL] 参数是什么。试试这个：

```
var clippedAPI = "http://clipped.me/algorithm/clippedapi.php";
$.ajax({
url: clippedAPI,
type: "GET",
dataType: "JSONP",
data: {
url: "http://pandodaily.com/2013/03/26/y-combinator-demo-day-2013-still-looking-for- the-next-airbnb-or-dropbox/"}
}).done(function(json) {
        console.log("JSON Data: " + json.title );
}).fail(function(jqxhr, textStatus, error){
        var err = textStatus + ', ' + error;
        console.log("Request Failed: " + err);
}); 
```

但是，即使这样也失败了，因为您的 API 端点似乎不理解/支持 JSONP 并且不提供`Access-Control-Allow-Origin`标头。因此，您有两种选择：

*   您可以在本地反向代理 API 以解决跨域问题并通过标准 JSON
*   你可以……嗯……获得更好的 API？向开发人员提交一张票以对其进行分类。

# installation - z3 安装在 Redhat 平台

> ID：15670083
> 
> 赞同：0
> 
> 时间：2013-03-27T21:41:43.487
> 
> 标签：installation, z3

Redhat linux平台可以安装最新的z3吗？在[https://github.com/Z3Prover/z3中没有提到这个平台](https://github.com/Z3Prover/z3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:49:21.403

正如您所指出的，我们目前不为 RedHat Linux 提供预编译的二进制文件。我们目前仅提供预编译的二进制文件：Ubuntu 和 Debian。我们还定期在 Fedora 上编译 Z3。话虽如此，您应该能够毫无问题地在 RedHat Linux 上编译 Z3。特别是，我们已经设法`unstable`在许多不同的平台上编译（进行中的）分支。请参阅此相关问题：

*   [在没有 python 的 posix 系统上安装 Z3？](https://stackoverflow.com/questions/13642209/installation-of-z3-on-a-posix-system-without-python)

[此链接](http://z3.codeplex.com/wikipage?title=Building%20the%20unstable%20%28working-in-progress%29%20branch&referringTitle=Documentation)包含有关如何在 Linux 上编译 Z3 的说明。

# drupal-7 - drupal 7，多个 FROM 表，需要一个非常示例的示例

> ID：15670088
> 
> 赞同：1
> 
> 时间：2013-03-27T21:42:17.540
> 
> 标签：drupal-7

有人可以给我一个例子，其中有多个“FROM”表？

我不完全理解文档（感谢我糟糕的英语 lvl -_-）。我想使用如下查询： SELECT a.one a.two b.one FROM {table1} a, {table2} b WHERE a.one = b.one

谢谢=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:28:06.253

您可以使用加入： [http ://drupal.org/node/1848348](http://drupal.org/node/1848348)

```
<?php
$query = db_select('table1', 'a');
$query->join('table2', 'b', 'a.one = b.one');
$query->fields('a', array('one', 'two'));
$query->fields('b', array('one'));
$result = $query->execute();
?> 
```

这是询问和回答： [https ://drupal.stackexchange.com/questions/27723/drupal-7-join-two-tables](https://drupal.stackexchange.com/questions/27723/drupal-7-join-two-tables)

更多关于动态查询 [http://drupal.org/node/310075](http://drupal.org/node/310075)

# mysql - MySQL 从 2 个不同的表和列创建视图

> ID：15670093
> 
> 赞同：0
> 
> 时间：2013-03-27T21:42:36.850
> 
> 标签：mysql, sql

我正在尝试创建 2 个表的视图。

目前，我正在使用下面的行，这工作正常，但我得到的信息太多，我需要更有选择性并选择列：

第一张桌子

```
wp_cart66_orders and i need to pull 
bill_first_name_, bill_last_name

status=, new or shipped etc... 
```

第二张桌子

```
wp_cart_66_order_items
description, quantity 
```

我不确定是否需要创建视图或仅使用此查询。

此外，如果是这种情况，我可能需要指出如何创建它的正确方向。

```
select wp_cart66_orders.*, wp_cart66_order_items.*
from wp_cart66_orders, wp_cart66_order_items
where wp_cart66_orders.id=wp_cart66_order_items.order_id
    and wp_cart66_orders.status = 'new'; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:59:45.440

编写您的选择性列，显式连接，并从两个表中重新命名公共列名。

```
 create view OrderItemsVW
as 
select wp_cart66_orders.bill_first_name as Bill_First_Name,   
       wp_cart66_orders.bill_last_name as Bill_Last_Name,  
       wp_cart66_orders.Description as OrdersDescription,          
       wp_cart66_order_items.Description as OrderItemsDescription
from wp_cart66_orders 
inner join wp_cart66_order_items
    on wp_cart66_orders.id=wp_cart66_order_items.order_id
where wp_cart66_orders.status = 'new'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:46:18.427

视图会以某种方式更快并且可以重用。但是，您也可以只使用您的选择查询。

```
select wp_cart66_orders.*, wp_cart66_order_items.* from wp_cart66_orders, wp_cart66_order_items where wp_cart66_orders.id=wp_cart66_order_items.order_id and wp_cart66_orders.status = 'new'; 
```

仅当 wp_cart66_orders 和 wp_cart66_order_items 具有相同的列时，这才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:47:10.720

使用**as**运算符或列出您想要的每一列：

选择 table1.col1 AS mycolname, table2.col4 AS mycolname2...

或者

选择 table1.col1,table2.col4 ...

# python - 用 numpy 加速求解三角线性系统？

> ID：15670094
> 
> 赞同：12
> 
> 时间：2013-03-27T21:42:39.520
> 
> 标签：python, numpy, scipy, linear-algebra

我有一个方阵 S (160 x 160) 和一个巨大的矩阵 X (160 x 250000)。两者都是密集的numpy数组。

我的目标：找到 Q 使得 Q = inv(chol(S)) * X，其中 chol(S) 是 S 的下 Cholesky 分解。

自然，一个简单的解决方案是

```
cholS = scipy.linalg.cholesky( S, lower=True)
scipy.linalg.solve( cholS, X ) 
```

我的问题：这个解决方案在 python 中的速度*明显*比我在 Matlab 中尝试的慢（> 2x）。以下是一些计时实验：

```
timeit np.linalg.solve( cholS, X)
1 loops, best of 3: 1.63 s per loop

timeit scipy.linalg.solve_triangular( cholS, X, lower=True)
1 loops, best of 3: 2.19 s per loop

timeit scipy.linalg.solve( cholS, X)
1 loops, best of 3: 2.81 s per loop

[matlab]
cholS \ X
0.675 s

[matlab using only one thread via -singleCompThread]
cholS \ X
1.26 s 
```

基本上，我想知道：（1）我可以在 python 中达到类似 Matlab 的速度吗？(2) 为什么 scipy 版本这么慢？

求解器应该能够利用 chol(S) 是三角形的事实。然而，使用 numpy.linalg.solve() 比 scipy.linalg.solve_triangular() 更快，即使 numpy 调用根本不使用三角形结构。是什么赋予了？当我的矩阵是三角形时，matlab 求解器似乎会自动检测，但 python 不能。

我很乐意使用对 BLAS/LAPACK 例程的自定义调用来解决三角线性系统，但我真的不想自己编写该代码。

作为参考，我使用的是 scipy 版本 11.0 和 Enthought python 发行版（它使用英特尔的 MKL 库进行矢量化），所以我*认为*我应该能够达到类似 Matlab 的速度。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-06T17:17:13.753

`solve`TL;DR：当你有一个三角系统时，不要使用 numpy 或 scipy `scipy.linalg.solve_triangular`，至少使用`check_finite=False`关键字参数来获得快速和非破坏性的解决方案。

* * *

`numpy.linalg.solve`在偶然发现和`scipy.linalg.solve`（和`scipy's lu_solve`等）之间的一些差异后，我发现了这个线程。我没有 Enthought 的基于 MKL 的 Numpy/Scipy，但我希望我的发现可以在某种程度上对您有所帮助。

使用 Numpy 和 Scipy 的预构建二进制文件（32 位，在 Windows 7 上运行）：

1.  我看到求解向量（即160 x 1）之间`numpy.linalg.solve`和求解向量时存在显着差异。Scipy 运行时是 numpy 的 1.23 倍，我认为这是可观的。`scipy.linalg.solve``X``X`

2.  但是，大部分差异似乎是由于 scipy`solve`检查无效条目所致。当传入`check_finite=False`scipy.linalg.solve 时，scipy 的`solve`运行时间是 1.02x numpy 的。

3.  Scipy 使用破坏性更新的求解，即 with`overwrite_a=True, overwrite_b=True`比 numpy 的求解（非破坏性）稍快。Numpy 的求解运行时是 1.021x 破坏性 scipy.linalg.solve。Scipy 的`check_finite=False`运行时间是破坏性案例的 1.04 倍。总之，破坏性`scipy.linalg.solve`比这两种情况都快得多。

4.  以上是针对向量的`X`。如果我制作`X`一个宽数组，特别是 160 x 10000，则`scipy.linalg.solve`with`check_finite=False`基本上与`check_finite=False, overwrite_a=True, overwrite_b=True`. Scipy 的`solve`（没有任何特殊关键字）运行时是这个“不安全”（`check_finite=False`）调用的 1.09 倍。对于这种数组情况， Numpy 的`solve`运行时间是 scipy 最快的 1.03 倍。`X`

5.  `scipy.linalg.solve_triangular`在这两种情况下都提供了显着的加速，但您必须关闭输入检查，即传入`check_finite=False`. `solve_triangular`对于 vector 和 array ，最快求解的运行时间分别为 5.68x 和 1.76x `X`，其中`check_finite=False`.

6.  `solve_triangular`破坏性计算（`overwrite_b=True`_`check_finite=False``X`

7.  我，无知，以前不知道`solve_triangular`并`scipy.linalg.lu_solve`用作三角求解器，即，而不是`solve_triangular(cholS, X)`做`lu_solve((cholS, numpy.arange(160)), X)`（两者都产生相同的答案）。但是我发现`lu_solve`以这种方式使用`solve_triangular`的向量`X`情况下的运行时间为 1.07 倍不安全，而数组`X`情况下的运行时间为 1.76 倍。我不确定为什么`lu_solve`array`X`比 vector慢得多`X`，但教训是使用`solve_triangular`（没有无限检查）。

8.  将数据复制到 Fortran 格式似乎一点也不重要。转换为`numpy.matrix`.

我不妨将我的非 MKL Python 库与单线程 ( `maxNumCompThreads=1`) Matlab 2013a 进行比较。上面最快的 Python 实现对于向量`X`情况的运行时间延长了 4.5 倍，对于胖矩阵`X`情况的运行时间延长了 6.3 倍。

但是，这是我用来对这些进行基准测试的 Python 脚本，也许有 MKL 加速的 Numpy/Scipy 的人可以发布他们的数字。请注意，我只是注释掉该行`n = 10000`以禁用胖矩阵`X`案例并执行`n=1`向量案例。（对不起。）

```
import scipy.linalg as sla
import numpy.linalg as nla
from numpy.random import RandomState
from timeit import timeit
import numpy as np

RNG = RandomState(69)

m=160
n=1
#n=10000
Ac = RNG.randn(m,m)
if 1:
    Ac = np.triu(Ac)

bc = RNG.randn(m,n)
Af = Ac.copy("F")
bf = bc.copy("F")

if 0: # Save to Matlab format
    import scipy.io as io
    io.savemat("b_%d.mat"%(n,), dict(A=Ac, b=bc))
    import sys
    sys.exit(0)

def lapper(fn, source, **kwargs):
    Alocal = source[0].copy()
    blocal = source[1].copy()
    fn(Alocal, blocal,**kwargs)

laps = (1000 if n<=1 else 100)
def printer(t, s=''):
    print ("%g seconds, %d laps, " % (t/float(laps), laps)) + s
    return t/float(laps)

t=[]
print "C"
t.append(printer(timeit(lambda: lapper(sla.solve, (Ac,bc)), number=laps),
                 "scipy.solve"))
t.append(printer(timeit(lambda: lapper(sla.solve, (Ac,bc), check_finite=False),
                        number=laps), "scipy.solve, infinite-ok"))
t.append(printer(timeit(lambda: lapper(nla.solve, (Ac,bc)), number=laps),
                 "numpy.solve"))

#print "F" # Doesn't seem to matter
#printer(timeit(lambda: lapper(sla.solve, (Af,bf)), number=laps))
#printer(timeit(lambda: lapper(nla.solve, (Af,bf)), number=laps))

print "sla with tweaks"
t.append(printer(timeit(lambda: lapper(sla.solve, (Ac,bc), overwrite_a=True,
                              overwrite_b=True,  check_finite=False),
                        number=laps), "scipy.solve destructive"))

print "Tri"
t.append(printer(timeit(lambda: lapper(sla.solve_triangular, (Ac,bc)),
                        number=laps), "scipy.solve_triangular"))
t.append(printer(timeit(lambda: lapper(sla.solve_triangular, (Ac,bc),
                              check_finite=False), number=laps),
                 "scipy.solve_triangular, inf-ok"))
t.append(printer(timeit(lambda: lapper(sla.solve_triangular, (Ac,bc),
                                       overwrite_b=True, check_finite=False),
                        number=laps), "scipy.solve_triangular destructive"))

print "LU"
piv = np.arange(m)
t.append(printer(timeit(lambda: lapper(
    lambda X,b: sla.lu_solve((X, piv),b,check_finite=False),
    (Ac,bc)), number=laps), "LU"))

print "all times:"
print t 
```

上述向量案例的脚本输出`n=1`：

```
C
0.000739405 seconds, 1000 laps, scipy.solve
0.000624746 seconds, 1000 laps, scipy.solve, infinite-ok
0.000590003 seconds, 1000 laps, numpy.solve
sla with tweaks
0.000608365 seconds, 1000 laps, scipy.solve destructive
Tri
0.000208711 seconds, 1000 laps, scipy.solve_triangular
9.38371e-05 seconds, 1000 laps, scipy.solve_triangular, inf-ok
9.37682e-05 seconds, 1000 laps, scipy.solve_triangular destructive
LU
0.000100215 seconds, 1000 laps, LU
all times:
[0.0007394047886284343, 0.00062474593940593, 0.0005900030818282472, 0.0006083650710913095, 0.00020871054023307778, 9.383710445114923e-05, 9.37682389063692e-05, 0.00010021534750467032] 
```

矩阵案例的上述脚本的输出`n=10000`：

```
C
0.118985 seconds, 100 laps, scipy.solve
0.113687 seconds, 100 laps, scipy.solve, infinite-ok
0.115569 seconds, 100 laps, numpy.solve
sla with tweaks
0.113122 seconds, 100 laps, scipy.solve destructive
Tri
0.0725959 seconds, 100 laps, scipy.solve_triangular
0.0634396 seconds, 100 laps, scipy.solve_triangular, inf-ok
0.0638423 seconds, 100 laps, scipy.solve_triangular destructive
LU
0.1115 seconds, 100 laps, LU
all times:
[0.11898513112988955, 0.11368747217793944, 0.11556863916356903, 0.11312182352918797, 0.07259593807427585, 0.0634396208970783, 0.06384230931663318, 0.11150022257648459] 
```

请注意，上述 Python 脚本可以将其数组保存为 Matlab .MAT 数据文件。这目前被禁用（`if 0`，抱歉），但如果启用，您可以在完全相同的数据上测试 Matlab 的速度。这是 Matlab 的计时脚本：

```
clear
q = load('b_10000.mat');
A=q.A;
b=q.b;
clear q
matrix_time = timeit(@() A\b)

q = load('b_1.mat');
A=q.A;
b=q.b;
clear q
vector_time = timeit(@() A\b) 
```

您需要`timeit`Mathworks File Exchange 中的函数：http: [//www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function](http://www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function)。这会产生以下输出：

```
matrix_time =
    0.0099989
vector_time =
   2.2487e-05 
```

`solve`这个实证分析的结果是，至少在 Python 中，当你有一个三角形系统时，不要使用 numpy 或 scipy `scipy.linalg.solve_triangular`，至少使用`check_finite=False`关键字参数来获得快速和非破坏性的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T00:19:40.813

为什么不直接使用方程：`Q = inv(chol(S)) * X`，这是我的测试：

```
import scipy.linalg
import numpy as np

N = 160
M = 100000
S = np.random.randn(N, N)
B = np.random.randn(N, M)
S = np.dot(S, S.T)

cS = scipy.linalg.cholesky(S, lower=True)
Y1 = scipy.linalg.solve(cS, B)
icS = scipy.linalg.inv(cS)
Y2 = np.dot(icS, B)

np.allclose(Y1, Y2) 
```

输出：

```
True 
```

这是时间测试：

```
%time scipy.linalg.solve(cholS, B)
%time np.linalg.solve(cholS, B)
%time scipy.linalg.solve_triangular(cholS, B, lower=True)
%time ics=scipy.linalg.inv(cS);np.dot(ics, B) 
```

输出：

```
CPU times: user 2.07 s, sys: 0.00 s, total: 2.07 s
Wall time: 2.08 s
CPU times: user 1.93 s, sys: 0.00 s, total: 1.93 s
Wall time: 1.92 s
CPU times: user 1.12 s, sys: 0.00 s, total: 1.12 s
Wall time: 1.13 s
CPU times: user 0.71 s, sys: 0.00 s, total: 0.71 s
Wall time: 0.72 s 
```

我不知道为什么`scipy.linalg.solve_triangular`比`numpy.linalg.solve`你的系统慢，但`inv`版本是最快的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T21:11:36.890

有几件事可以尝试：

*   `X = X.copy('F')` # 使用 fortran-order 数组，以避免复制

*   `Y = solve_triangular(cholS, X, overwrite_b=True)`# 避免另一个副本，但垃圾内容`X`

*   `Y = solve_triangular(cholS, X, check_finite=False)`# Scipy >= 0.12 only --- 但似乎对速度没有太大影响...

有了这两个，它应该几乎等同于直接调用 MKL 而没有缓冲区副本。

我无法用不同的速度重现问题`np.linalg.solve`——`scipy.linalg.solve`使用我拥有的 BLAS + LAPACK 组合，两者的速度似乎相同。

# neo4j - Neo4j“RelationshipRecord[22] 未使用”错误

> ID：15670095
> 
> 赞同：2
> 
> 时间：2013-03-27T21:42:39.867
> 
> 标签：neo4j, relationship, record, cypher

我收到此错误

```
RelationshipRecord[22] not in use 
```

执行这个命令

```
start r=relationship(22)
delete r 
```

当试图删除一个破碎的关系时。关系破裂是指删除的起始节点或目标节点。例如我有这种关系

```
(10)--->(11) 
```

我删除了节点 11。

```
(10)---> 
```

现在我想删除关系，但我收到了上面提到的错误。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T02:53:09.330

Neo4j 不会一直挂起关系 - 所以不会有你有的情况

> (10)--->

该关系可能已经被删除，因此您在尝试再次删除它时会遇到该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:51:48.637

第二天我开始处理问题消失了......可能是网络管理员中的缓存......或类似的东西。

谢谢大家！

# java - 将偶数和奇数添加到数组中

> ID：15670102
> 
> 赞同：1
> 
> 时间：2013-03-27T21:43:12.780
> 
> 标签：java

我试图弄清楚如何对一个数组中的输入列表进行排序，并从中制作两个不同的数组，无论是偶数还是奇数。我似乎无法将整数添加到 if 循环中的数组中。

这是我的代码：

```
 Scanner in = new Scanner (System.in);

System.out.print("Enter a number");
    int number = in.nextInt();

 int [] x = new int[0];
 int [] even = new int [0];
 int [] odd = new int [0];

for (int i = 0; i <x.length; i++)
{

    if (in.nextInt() == 0){
        for (i = 0; i <x.length; i++)
        {
            if (x[i] % 2 == 0)
            {
            even = even + x[i];
            System.out.print("Even numbers = " + even);
            i++;
            }
            if (x[i] % 2 != 0)
            {
            odd = odd + x[i];
            System.out.print("Odd numbers = " + odd);
            i++;
            }
        }
        break;
                }

    else {
        x[i] = number;
        i++;
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:46:07.833

Java中的数组是固定大小的。它们不会动态增长。`ArrayList`如果您想要一个可以增长和缩小的类似数组的容器，请使用。

```
List<Integer> even = new ArrayList<Integer>();
List<Integer> odd  = new ArrayList<Integer>();

if (...)
{
    even.add(number);
}
else
{
    odd.add(number);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:47:28.607

您没有正确使用数组。我假设这是旨在教您如何使用它们的家庭作业。试试这个教程：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:52:57.653

我不会使用三个数组来做到这一点。简单地遍历列表并有两个引用偶数和奇数索引的循环变量。像这样：

```
int evenIndex=0,oddIndex=1;
int evenSum=0,OddSum=0;
int [] x=new int[10];

 while(evenIndex <= x.length && oddIndex <= x.length)
        {
          evenSum+=x[evenIndex];
           oddSum+=x[oddIndex];

             evenIndex+=2;
             oddIndex+=2 

            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T21:53:44.480

两个很好的解决方案：

```
int [] x = new int[0];
LinkedList<Integer> even = new LinkedList<Integer>(),
                     odd = new LinkedList<Integer>();

for(int num: x)
    if (x & 1 == 1)
        odd.add(num);
    else
        even.add(num); 
```

另一种选择是迭代，计算有多少偶数和奇数，分配正确大小的数组，然后将数字放入数组中。这也是一个 O(n) 解决方案。

# python - Python 按钮周围的白色

> ID：15670104
> 
> 赞同：1
> 
> 时间：2013-03-27T21:43:13.720
> 
> 标签：python, button, background, tkinter

我正在使用 python 并添加按钮小部件，即使我将背景设置为灰色，按钮周围仍然有一个白色边框。问题是什么？

```
 self.quitButton = Button(parent, text='Quit', command=exit, bg="grey") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:52:27.403

如果我没记错的话，按钮默认有边框。`bd=0`您应该能够通过在创建按钮时指定为参数之一来摆脱它。

# java - hazelcast 地图放置操作不起作用

> ID：15670114
> 
> 赞同：1
> 
> 时间：2013-03-27T21:43:59.727
> 
> 标签：java, hazelcast

我在集群中使用 hazelcast -2.5。我有一张地图（键：字符串，值：用户定义对象的 ArrayList）。我可以在大多数地方很好地放置/删除，但在我的代码的一个特定部分，放置操作会静默失败（用于放置操作的键字符串是唯一的，并且 ArrayList 也不为空）。不抛出异常。如果涉及到锁，我什至尝试了 tryPut 并且该调用给了我一个真正的返回值。在 put 操作之后，我尝试打印出地图的 keySet 但看不到我刚刚插入的密钥 - 地图的大小也没有改变（但 tryPut 给了我一个真正的返回值，我有理由确定我用于密钥的字符串是唯一的 - 我希望密钥的二进制形式也是唯一的）。如果我的密钥的二进制形式不是唯一的，

```
boolean putVal = testMap.tryPut(this.testObj.UUID, testEntity, timeout, TimeUnit.MILLISECONDS);   //timeout is 2000L or 2 seconds in this case 
```

任何有关解决此问题或弄清楚我的密钥的二进制形式是否导致问题的想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:30:56.113

尝试做一个得到。并查看是否有与该键关联的任何值。如果不是，则看跌期权应该是成功的。

# python - python 2.6中的“ImportError：没有名为_multiprocessing的模块”

> ID：15670116
> 
> 赞同：2
> 
> 时间：2013-03-27T21:44:07.540
> 
> 标签：python, windows, multiprocessing, interix

据我[了解](https://pypi.python.org/pypi/multiprocessing/)，Python 2.6+ 是开箱即用的多处理。但是，我收到`ImportError: No module named _multiprocessing`来自第 83 行的调用`usr/local/lib/python2.6/multiprocessing/__init__.py`。虽然`usr/local/lib/python2.6/`包含多个*`_module`*文件，但`_multiprocessing`不是其中之一。

什么可能导致 python 2.6 上出现此错误？

我在 Windows XP SP3 上通过 Interix3.5 在 gcc3.4.6 上运行 python

# apache-flex - htmlText in air 和 inline 图像

> ID：15670118
> 
> 赞同：0
> 
> 时间：2013-03-27T21:44:16.323
> 
> 标签：apache-flex, flex3, htmltext

我正在尝试将内联图像添加到 htmlText 中，以便它们看起来像聊天对话的笑脸。目前我们使用 TextField 组件的 htmlText 属性，我已经对其进行了足够的研究，他们说如果在 htmlText 属性中给出，Air 框架会忽略 <img 标签。所以，我不能使用它。

有没有办法在 flex 中实现这种功能？有内嵌在文本中的笑脸吗？我们可以更改 htmlText 属性以接受 <img 元素吗？

PS：我们使用所有的 mxml 组件，不能为此使用 sdk 4.6 文本流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T19:29:32.493

我正在为此考虑使用 textFlow。它可以将 htmlText 转换为文本流格式。听起来很有希望。

# java - 进入队列，离开队列

> ID：15670121
> 
> 赞同：0
> 
> 时间：2013-03-27T21:44:22.667
> 
> 标签：java, queue

是否有人参考了 Java 中 Queue 类的 enterQueue() 和 leaveQueue() 的示例？我正在尝试做一个作业来演示 enterQueue() 和 leaveQueue() 的操作，但我似乎在 API 中找不到任何东西。我已经做了 Peek、Poll 和 size。该代码附在此处，即使我认为它并不真正相关。

```
Stack st = new Stack();
       Queue<String> q = new LinkedList<String>();
       String element;

       st.push("A");
       st.push("B");

       System.out.println("\fInitial Stack contents: "+st);

       q.addAll(st);
       st.clear();

       Iterator itr = q.iterator();

       System.out.println("\nInitial Queue size: "+q.size());
       System.out.println("It contains "+q+" while the stack is now "+st+"\n");

       while(itr.hasNext()) {
           String iteratorValue = (String)itr.next();
           System.out.println("Next in queue: "+iteratorValue);
        }

       //Peek : Look at value, don't remove it
       System.out.println("\nQueue Peek: "+q.peek());

       // Poll : Remove first value from queue
       element = q.poll();
       System.out.println("\nQueue Poll: "+element);

       System.out.println("\nQueue Size now: "+q.size());
       System.out.println("Queue remainder: "+q); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:49:46.527

`enterQueue`这是什么方法？
Java 实现 ADT 队列并为方法使用特定名称。
If`enterQueue`是不相关的插入队列的名称。
队列具有特定功能 FIFO，并且没有强制要求在实现中使用特定名称，但通常我们将`add /remove`队列`push/pop`用于`Stack`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:57:49.247

根据您对要实施的方法的陈述，您确定您的讲师不希望您为队列创建添加/删除函数而不使用库中提供的函数吗？至少这对我来说是这样的，因为我也没有听说过这些方法。考虑到您的程序名称是 MyQueue.java 听起来您要创建它而不是从库中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T23:00:26.193

这与 Athabasca 大学的 COMP268 Java 入门课程中的练习相同——如果这是来源，那么最好的答案是“询问你的导师，或者在检查问题是否已经发布后在 Moodle 课程论坛中发布问题在那里问和回答。”

这就是你的导师得到报酬的事情，以及 Moodle 论坛的用途，并且不适合替换 stackoverflow 论坛，因为那时你的导师不知道你有问题，你的同学也不知道问题有而是在这里被问到，并且无法从此处发布的答案中受益。此外，还有“借用”此处或其他在线论坛上发布的代码的诱惑，忘记这不是练习的目的——并且可能会因作弊而受到严厉惩罚。

你的导师也知道这些在线论坛......

# c# - 在 dataGrid WinForms 上绑定刷新

> ID：15670123
> 
> 赞同：0
> 
> 时间：2013-03-27T21:44:28.810
> 
> 标签：c#, winforms, data-binding, inotifypropertychanged, entity-framework-mapping

嘿伙计们，我有绑定和刷新绑定的问题。

我正在使用带有 WindowsForms 的实体框架...

我正在从 Shipping Queue 中检索订单并将它们绑定到网格。

如果我打开另一个表单并将订单 X 移动到不同的队列，我的网格不会反映...

例如，主窗体有两个网格和一个按钮

```
网格 1 = 发货队列中的订单
网格 2 = 新订单队列中的订单
按钮 1 = 管理订单

```

如果我单击“管理订单”按钮并打开运输队列中的订单 X 并将其移动到新订单队列，我希望更改反映在网格中。

我尝试了不同的东西，我想出的最便宜和最好的解决方案是每隔几分钟在网格上调用一次更新，但我觉得必须有更好的方法......

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:29:30.103

确保您绑定的值正确调用 OnPropertyChanged()。

```
public class Class1 : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private int myValue;
    public int MyValue
    {
        get { return myValue; }
        set 
        {
            if (myValue != value)
            {
                myValue = value;
                OnPropertyChanged("MyValue");
            }
        }
    }

    protected virtual void OnPropertyChanged(string property)
    {
        var notify = PropertyChanged;
        if (notify != null)
            notify(this, new PropertyChangedEventArgs(property));
    }
} 
```

# ruby-on-rails - 使用 DelayedJob run_at 限制地理编码请求

> ID：15670125
> 
> 赞同：1
> 
> 时间：2013-03-27T21:44:34.463
> 
> 标签：ruby-on-rails, ruby, delayed-job, rails-geocoder

我正在尝试以一种可以限制使用 DelayedJob 的地理编码 api 调用流的方式在我的 Rails 应用程序中处理地理编码。

我的意图只是对地理编码请求进行排队，因为它们对用户的时间不敏感。此外，我正在使用一个免费的地理编码 API (Nominatim)，它每秒只需要一个请求。

我已经设置了地理编码器 gem，在我的用户模型中，我从用户帐户设置中获取了邮政编码（它不能为空，我已经在验证它）。

我的想法是使用 run_at 开始限制调用，但 run_at 的初始测试显示作业正在排队，但地理编码未保存完成时的值。

```
after_validation :run_geocode, :if => :postcode_changed?

def run_geocode
   self.delay(:run_at => 30.seconds.from_now).geocode
end 
```

我在这里错过了一些非常明显的东西吗？我无法锻炼文档所说的 :geocode 方法的用途。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:51:20.773

如果您不在任何地方调用保存，则可能不会保存地理编码的响应。此外，通常在保存/更新/删除记录后而不是在验证后运行回调。

```
after_save :run_geocode, :if => :postcode_changed?

def run_geocode
  self.delay.geocode! # delayed_job will process geocode! at a later point in time
end

def geocode!
  # do whatever is nescessary to receive geocoded infos
  # assign the results
  # save the record to save the updates
  self.save
end 
```

# wso2 - 如何关闭从 WSO2 GREG 检索 XML 模式的身份验证？

> ID：15670126
> 
> 赞同：1
> 
> 时间：2013-03-27T21:44:46.897
> 
> 标签：wso2, wso2greg

是否可以关闭身份验证，以便用户无需提供用户名/密码来使用 WSO2 GREG 的架构 URL 检索 XML 架构？`everyone`将角色配置为能够列出模式无济于事。

在配置 LDAP 集成之前，我想这样做。现在我必须创建一个我分发的临时用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:26:13.673

您可以使用“wso2.anonymous.role。将该角色添加到资源浏览器中的架构资源。

““wso2.anonymous.role”是一个特殊角色，代表尚未登录 WSO2 Governance Registry Management Console 的用户。为此角色授予对资源的“读取”访问权限意味着您不需要身份验证即可访问资源使用各自的永久链接。“每个人”角色是一个特殊角色，代表已登录到 WSO2 Governance Registry Management Console 的用户

参考[http://docs.wso2.org/wiki/display/Governance460/Managing+Role+Permissions](http://docs.wso2.org/wiki/display/Governance460/Managing+Role+Permissions)

# python - 将python中的行添加到表中

> ID：15670132
> 
> 赞同：0
> 
> 时间：2013-03-27T21:45:15.893
> 
> 标签：python, numpy

我知道在 R 中有一个 rbind 函数：

```
list = c(1,2,3)
blah = NULL
blah = rbind(blah,list) 
```

我将如何在 python 中复制它？我知道你可以写：

```
a = NULL
b= array([1,2,3])
for i in range(100):
 a = np.vstack((a,b)) 
```

但我不确定`a=NULL`当场写什么。我本质上是在循环并向表中添加行。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:16:04.220

在 numpy 中，如果您首先预先分配空间然后循环以填充该空间，那么事情将比动态创建连续更大的数组更有效。例如，如果大小为 500，您将：

```
a = np.empty((500, b.shape[0])) 
```

然后，循环并根据需要输入值：

```
for i in range(500):
    a[i,:] = ... 
```

请注意，如果您真的只想重复 b 500 次，您可以这样做：

```
In [1]: import numpy as np

In [2]: b = np.array([1,2,3])

In [3]: a = np.empty((500, b.shape[0]))

In [4]: a[:] = b

In [5]: a[0,:] == b
Out[5]: array([ True,  True,  True], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:26:07.323

准确回答你的问题

```
a = []
b= np.array([1,2,3])
for i in xrange(100):
  a.append(b)
a = np.vstack( tuple(a) ) 
```

该`tuple`函数将一个可迭代对象（在本例中为一个列表）转换为一个元组对象，并将`np.vstack`一个 numpy 数组的元组作为参数。

# javascript - 更改内联 onkeyup 功能？

> ID：15670133
> 
> 赞同：0
> 
> 时间：2013-03-27T21:45:16.257
> 
> 标签：javascript, jquery, html

我有以下文本区域：

```
<textarea cols="50" rows="4" id="textbox" onkeyup="limitArea(this, 255, '')"></textarea> 
```

我需要它`onkeyup`来代替读取的功能`onkeyup="limitArea(this, 150, '')"`-问题是，我无法直接编辑这部分代码。

我试过这个没有成功：

```
$('textarea[onkeyup="limitArea(this, 255, \'\')"]').attr('onkeyup', 'limitArea(this, 255, \'\')'); 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:50:19.703

您需要实际更改某些内容，而不仅仅是给它相同的值：

```
$(function() {
    $('textarea[onkeyup="limitArea(this, 255, \'\')"]')
                .attr('onkeyup', 'limitArea(this, 150, \'\')');
});                                     //changed ^^^^ 
```

[**小提琴**](http://jsfiddle.net/hPjJS/5/)

由于 ID 是唯一的，因此使用 ID 定位元素会容易得多：

```
$('#textbox') 
```

# javascript - 如何使用 jQuery 从输入字段内的时间戳中提取日期和时间？

> ID：15670134
> 
> 赞同：0
> 
> 时间：2013-03-27T21:45:22.777
> 
> 标签：javascript, jquery, datepicker, jquery-ui-timepicker

好的，我遇到了 jQuery 和 UI 日期选择器的问题。

本质上，我的新事件表单中有 3 个字段：**Date**、**timeFrom**、**timeTo** 我的 SQL 数据库中有 3 个字段：Date(datetime)、timeFrom(time)、timeTo(time)

日期字段，使用 datepicker 选择，提交看起来像这样：3/19/13 timeFrom 和 timeTo 将使用 timepicker 插件选择，看起来像这样：06:20 am AND 07:20 am

在我的 SQL 数据库中，提交的数据如下所示：**2013-03-19**、**06:20:00.0**、**07:20:00.0**

现在这一切都很好，直到我去编辑同一个事件。当我从数据库中调用它并再次填充我的输入时，它们最终看起来像这样：

日期：{ts'2013-03-19 00:00:00'}

时间从：1970-01-01 06:20:00.0

时间到：1970-01-01 07:20:00.0

因此，这意味着日期选择器和时间选择器都没有重新识别这些值。如果您只是再次提交表单，则无需重置日期，我的代码会引发错误。

所以我想我需要使用 jquery 来修改页面加载时的输入字段，以便它们的格式正确，并像这样显示：

```
 $(function() {
        //datefix
        var thisdatevalue = $("input[name='event[eventdate]']").val();
        var day1 = $("input[name='event[eventdate]']").val().getDate();                 
        var month1 = $("input[name='event[eventdate]']").val().getMonth();             
        var year1 = $("input[name='event[eventdate]']").val().getFullYear();
        var fullDate = day1 + "/" + month1 + "/" + year1;

        $("input[name='event[eventdate]']").val(fullDate);

        //timefix
        var thistimefromvalue = $("input[name='event[timefrom]']").val();
        var hour1 = $("input[name='event[timefrom]']").val().getHours();                 
        var minute1 = $("input[name='event[timefrom]']").val().getMinutes();             
        var second1 = $("input[name='event[timefrom]']").val().getSeconds();
        var fullTime = hour1 + ":" + minute1 + ":" + second1;

        $("input[name='event[timefrom]']").val(fullTime) ;

        //timefix
        var thistimetovalue = $("input[name='event[timeto]']").val();
        var hour2 = $("input[name='event[timeto]']").val().getHours();                 
        var minute2 = $("input[name='event[timeto]']").val().getMinutes();             
        var second2 = $("input[name='event[timeto]']").val().getSeconds();
        var fullTime = hour2 + ":" + minute2 + ":" + second2;

        $("input[name='event[timeto]']").val(fullTime) ;

    }); 
```

但是，上面的代码抛出 TypeError: $(...).val(...).getDay is not a function is not a function。

我认为这是一个标准的 javascript 函数，应该可以为我解决问题。

关于我如何做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:49:42.687

`getDay()`函数，因为所有其他同类仅适用于 Date 对象。使用以下语法创建 Date 对象，然后调用所需的方法。

```
dt = new Date('2013-03-27 15:22:33');
result = dt.getFullYear()+'/'+(dt.getUTCMonth()+1)+'/'+dt.getDate()+' '+dt.getUTCHours()+':'+dt.getUTCMinutes()+':'+dt.getUTCSeconds(); 
```

这是jsFiddle 上的[工作示例](http://jsfiddle.net/ffdgL/2/)

# c++ - 为什么 const T*& 不能绑定到 T*？

> ID：15670136
> 
> 赞同：5
> 
> 时间：2013-03-27T21:45:34.693
> 
> 标签：c++

VS2010 显示错误 C2440:`'return' : cannot convert from 'char *' to 'const char *&`在`f3`下面。`char*`为什么返回类型为 时不能返回 a `const char*&`？

```
const char* const& f1()
{
    static char* x = new char[5]();
    return x;
}

char* const& f2()
{
    static char* x = new char[5]();
    return x;
}

const char* & f3()
{
    static char* x = new char[5]();
    return x;    // error C2440
}

char* & f4()
{
    static char* x = new char[5]();
    return x;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:40:17.003

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:51:43.290

出于同样的原因，您不能从`char **`to 转换`const char **`。否则你可以写

```
f3() = "hello"; 
```

随后对 f3 的调用将能够写入字符串文字的内存，别名为静态 local `x`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T22:41:03.533

```
#include <iostream>
void problem( const char*& output, const char* input )
{
  output = input; // legal, const char*& = const char*
}

int main() {
  const char buff[] = "hello";
  char* out = nullptr;
  problem( const_cast<const char*&>(out), &buff[0] );
  out[0] = 'H'; // I just changed a const array's first character
  std::cout << &buff[0] << "\n";
} 
```

这会打印“Hello”，这是我刚刚从事未定义行为的证据。为此，我必须使用`const_cast`. 如果你可以`const char*&`用 a来初始化 a `char*`，我就不必这样做`const_cast`来调用未定义的行为。

“但是”有人可能会说“这与 OP 发布的确切情况不符！”

这是真的。

```
// the "legal" way to do what the OP wants to do, but it leads to undefined
// behavior:
const char*& problem2( char*& c ) { return const_cast<const char*&>(c); }
void problem3( const char*& left, const char* right ) { left = right; }

#include <iostream>
int main() {
  char* c = nullptr;
  char const* buff = "hello undefined behavior";
  problem3( problem2(c), buff );
  c[0] = 'H';
  std::cout << buff << "\n";
} 
```

还打印“你好未定义的行为”。

“但是”，有人可能会说，“你把 a`char*&`变成了`const char*&`，而不是把 a`char*`变成了`const char*&`。

很好：

```
void problem3( const char*& left, const char* right ) { left = right; }
const char*& problem4( char x = 0 ) {
  static char* bob = nullptr;
  if (bob && x)
    bob[0] = x;
  return const_cast<const char*&>(bob);
}
#include <iostream>
int main() {
  char const* buff = "hello problem";
  problem3( problem4(), buff );
  problem4('H');
  std::cout << buff << "\n";
} 
```

再说一次，那个有罪的资本`H`（嗯，实际上，通常是资本的未定义行为`H`）。

# extjs - Sencha CMD - 定义元类定义

> ID：15670139
> 
> 赞同：3
> 
> 时间：2013-03-27T21:45:59.867
> 
> 标签：extjs, extjs4

我有一个工作区项目，其中包括一个 ExtJS 应用程序、Touch 应用程序和一组在两个项目之间共享的文件，像这样设置

```
WorkspaceFolder
    ExtJSAppFolder
    TouchAppFolder
    SharedCodeFolder 
```

我`SharedCodeFolder`在引导加载程序中引用了 ExtJS/Touch 应用程序在浏览器中加载正常

```
bootstrap.js

Ext.Loader.addClassPathMappings({
  "ExtJSApp": "app",
  "Ext": "../ext/src",
  "Ext.rtl.EventObjectImpl": "../ext/src/rtl/EventObject.js",  
  'SharedCode': '../SharedCodeFolder/'
}); 
```

但是当我尝试使用 Sencha Cmd 构建时，它给了我这个错误

```
[ERR] failed to find meta class definition for name 
      ExtJSApp.store.SharedCode.store.StoreFile 
```

如何告诉 Sencha Cmd 不要将 ExtJS 应用程序命名空间附加到 SharedCode 文件的名称？它应该在寻找

```
SharedCode.store.StoreFile 
```

不是

```
ExtJSApp.store.SharedCode.store.StoreFile 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-04T02:50:03.610

您可以将 SharedCodeFolder 路径添加到 WorkspaceFolder/.sencha/workspace/sencha.cfg 文件中的 workspace.classpath：

```
workspace.classpath=${workspace.dir}/SharedCodeFolder 
```

有关更多信息，请参见此处： [http ://docs.sencha.com/ext-js/4-2/#!/guide/command_workspace-section-7](http://docs.sencha.com/ext-js/4-2/#!/guide/command_workspace-section-7)

# svn - 对于 svn，有没有办法显示哪些文件处于旧版本？

> ID：15670147
> 
> 赞同：2
> 
> 时间：2013-03-27T21:46:33.973
> 
> 标签：svn

假设整个项目是修订版 123，现在我`some/path/foo.txt`使用`svn up -r 88 some/path/foo.txt`. 此时，有没有办法显示“不是当前版本”的文件列表？ `svn st`或`svn status`仅显示修改后的文件，而不显示旧版本的文件。

**更新：**命令

```
svn st -v | grep -v 123 
```

当前版本在哪里`123`似乎可以完成这项工作，除了我们需要检查当前版本号，例如`423623`首先然后运行上面的命令......而且，如果这个数字`123`恰好是文件名的一部分，那么会`grep`做不正确的工作，所以如果有更好更快的方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:00:07.923

仔细阅读有关`svn status`选项和输出的信息。对于您的用例（混合工作副本，某些文件处于非 HEAD 修订版中）

```
>svn st -u
        *       24   Hello.fr.txt
        *       21   Hello.de.txt
Status against revision:     37 
```

# c# - 如何使用 Code-First 表示聚合实体？

> ID：15670148
> 
> 赞同：0
> 
> 时间：2013-03-27T21:46:41.583
> 
> 标签：c#, asp.net, database

我最近开始使用 ASP.NET 进行开发，并且正在努力掌握 Code-First。我正在做一个实习项目，除了我上过的一门课外，我几乎没有数据库知识。我绝不要求一个完整的解决方案或懒惰。

几天来，我一直在尝试创建一个可靠的 ER 图，我相当确定下面的图将代表我需要存储的所有信息。如果您看到任何可以改进的方法，请告诉我。

**我正在尝试做的事情：**

对于这个项目，管理员将创建具有下列属性的房间。然后，管理员将分配时间段，代表房间可用的时间和一周中的可用天数之间的时间段。

用户将填写他们的基本信息并填写一份表格，表示他们的可用时间。

在所有用户都注册后，管理员将运行一个调度算法来提出最接近最有效的调度（因为它是 NP 困难的）。

分配关系表示与房间时隙相关的用户时隙，以便生成一个表格，其中列出了哪些用户在什么时间被分配到了哪些房间。

我正在使用 Visual Studio 2012。

**问题**

1.  我将如何使用 Code-First 来表示这些聚合实体？不一定要求这个确切图表的代码，但可能是一个快速示例来帮助我围绕 Code-First 进行思考。
2.  对于这些关系，我的映射看起来正确吗？

非常感谢任何帮助或指出正确方向！谢谢！

下面是代表以下内容的 ER 图：

*   房间（id、号码、建筑、容量）
*   TimeSlot (id, startHour, endHour, dayOfWeek)
*   用户（ID、名字、姓氏、电子邮件）
*   可用（用户 ID、时间 ID）
*   预留（房间ID、时间ID）
*   已分配（reservedID、availableID）

![ER图](../Images/95642d3e1b659cf2993051864daafcbe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:20:40.353

首先在 ER 图中，我希望直接从 Room 到 TimeSlot（右上）和从 User 到 TimeSlot（右下）的链接，但是知道可能会运行的查询，我建议 ERD 应该如下所示。

Room 链接到名为 RoomAvailability 的实体。RoomAvailability 包含房间的所有空闲时间段，因此最初将使用每个房间每天的一条记录（RoomId、Date、StartTime、EndTime）填充到您认为必要的未来几天。

同样，我将有一个实体 UserAvailability（UserId、Date、StartTime、EndTime）链接到用户。

实体 RoomReservation（RoomId、UserId、Date、StartTime、EndTime）链接到 Room 和 User，其中包含所有房间预订（假设只有 1 个用户可以预订房间）。

预订房间时，会添加 RoomReservation 记录，并且单个 RoomAvailability 记录可能会分成 2 个单独的记录（例如，房间全天免费，然后有人在白天预订一个时段，在一天的开始和结束时留下 2 个空闲时段）。

取消预订时，RoomReservation 记录将被删除，并且 2 个 RoomAvailability 记录可能会合并回 1 个（与上述相反）。

我相信可用插槽的拆分和合并是类似系统的工作方式。

# r - 如何在从美国人口普查 HTML 网站上抓取数据时降低因子水平

> ID：15670151
> 
> 赞同：0
> 
> 时间：2013-03-27T21:47:02.570
> 
> 标签：r, scrape, census

预先感谢您的帮助。在美国人口普查网站（下）上，我正在寻找第 4 表第 6 行第 3 列中的元素。

这是我正在编写的代码：

```
complete_URL <- "http://quickfacts.census.gov/qfd/states/01/01011.html"
temp_TBL <- readHTMLTable(complete_URL, which=4)
business_number_vector <- temp_TBL[6,3]
print(business_number_vector) 
```

我得到的是：

```
[1] 417
Levels: 417 
```

我想要的是：

```
[1] 417 
```

再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:46:02.160

它实际上是 R-FAQ 7.10：

您应该能够使用 R-help() 系统查看常见问题解答。在我的机器上，它设置为 html：

```
http://127.0.0.1:23603/doc/manual/R-FAQ.html#How-do-I-convert-factors-to-numeric_003f 
```

> 7.10 如何将因子转换为数值？
> 
> 当将数值数据读入 R 时（通常是读入文件时），它们可能会作为因子出现。如果 f 是这样一个因子对象，您可以使用
> 
> as.numeric(as.character(f)) 来取回数字。更有效但更难记住的是
> 
> as.numeric(levels(f))[as.integer(f)] 在任何情况下，不要为手头的任务直接调用 as.numeric() 或他们的喜欢（as.numeric() 或 unclass() 给内部代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:07:03.953

Arun 和 Dason 提供了以下答案：

阿伦推荐：

```
complete_URL <- "http://quickfacts.census.gov/qfd/states/01/01011.html"
temp_TBL <- readHTMLTable(complete_URL, which=4)
business_number_vector <- as.numeric(as.character(temp_TBL[6,3]))
print(business_number_vector) 
```

见第 3 行，在哪里`as.numeric(as.character())`帮了大忙！

达森推荐：

```
complete_URL <- "http://quickfacts.census.gov/qfd/states/01/01011.html"
temp_TBL <- readHTMLTable(complete_URL, which=4)
business_number_vector <- temp_TBL[6,3]
business_number_vector <- as.numeric(levels(business_number_vector)[business_number_vector])
print(business_number_vector) 
```

请参阅第 4 行，其中`as.numeric(levels(business_number_vector)[business_number_vector])`也有很大帮助！

# javascript - 字母复选框输入类型

> ID：15670153
> 
> 赞同：0
> 
> 时间：2013-03-27T21:47:04.857
> 
> 标签：javascript, jquery, html

我目前有一个包含复选框的表单，但是文本不是按字母顺序排列的。我见过很多列表的例子，而不是复选框的例子。[http://jsfiddle.net/fG9qm/](http://jsfiddle.net/fG9qm/)

```
<form>
    <input type="checkbox" name="vehicle" value="Bike"> Bee
    <input type="checkbox" name="vehicle" value="Car" > Apple
</form> 
```

我设法举了一个例子的片段，但是，如果我尝试更改输入的值，复选框会在没有文本的情况下移动 - 我该如何解决这个问题？

```
var $els = $('input');

var $sorted = $($els.toArray().sort(function(a, b) {
    return a.value > b.value;
}));

$els.each(function(i) {
    $(this).after($sorted.eq(i));
}); 
```

另外，有没有办法使用文本而不是值，例如

```
return a.input.text > b.input.text 
```

任何示例或帮助将不胜感激 - 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:54:07.207

您应该将这些文本节点包装在标签中：

```
<form id="prac">
    <label><input type="checkbox" name="vehicle" value="Bike" /> Apple</label>
    <label><input type="checkbox" name="vehicle" value="Car" /> ABear</label>
</form> 
```

然后对标签进行排序

```
var myform = $('#prac'),
    els    = $('label', myform).get(),
    sorted = els.sort(function(a, b) {
        return $(a).text().toUpperCase()
                   .localeCompare( $(b).text().toUpperCase() );
});

$.each(sorted, function(idx, itm) { 
     myform.append(itm); 
}); 
```

[**小提琴**](http://jsfiddle.net/fG9qm/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:03:16.990

您可以将输入及其各自的标签包装在容器中以方便排序。

```
<form>
    <div class="field-item">
        <input type="checkbox" name="vehicle" id="vehicle-bike" value="Bike" />
        <label for="vehicle-bike">Bee</label>
    </div>
    <div class="field-item">
        <input type="checkbox" name="vehicle" id="vehicle-car" value="Car" />
        <label for="vehicle-car">Apple</label>
    </div>
</form> 
```

然后只需调整您的排序代码以根据标签对这些容器进行排序。

```
var $els = $('.field-item');

var $sorted = $($els.toArray().sort(function(a, b) {
    return $(a).find('label').text() > $(b).find('label').text()
}));

$els.each(function(i) {
    $(this).after($sorted.eq(i));
}); 
```

**[演示](http://jsfiddle.net/JLLp3/1/)**

# android - 由于 setOnKeyListener，Editext 不接受数字输入

> ID：15670156
> 
> 赞同：4
> 
> 时间：2013-03-27T21:47:19.873
> 
> 标签：android, android-edittext

我有一个`EditText`，它接受字母和不同符号的输入，但不是数字。此外，我已将`EditText`on设置为`setOnKeyListener`通过按 Enter 关闭虚拟键盘。观察并发现由于以下代码而无法输入数字

设置虚拟键盘在按下回车后隐藏的代码

```
durOnTreadmill.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) 
    {
        if (keyCode == KeyEvent.KEYCODE_ENTER) 
        { 
                InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(durOnTreadmill.getWindowToken(), 0);
        }
        return true;
    }

}); 
```

我在 XML 中的 EditText

```
 <EditText
        android:id="@+id/durOnTreadmill"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginRight="32dp"
        android:inputType="text"
        android:hint="hh:mm:ss" /> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:25:26.027

在这里复制我的评论：

> 如果您正在处理输入，您应该只从 onKey 返回 true。即，将 return true 移动到 if 块内，否则返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:59:13.163

```
android:imeOptions="actionDone" 
```

在您的 EditText xml 中，当用户按 Enter 键时，您会关闭键盘，并且您说它不会，除了您将输入设置为“文本”的数字

取出这条线：

```
android:inputType="text" 
```

# c++ - sjlj vs dwarf vs seh 有什么区别？

> ID：15670169
> 
> 赞同：164
> 
> 时间：2013-03-27T21:48:15.227
> 
> 标签：c++, compiler-construction, mingw, cpu-architecture, mingw-w64

我找不到足够的信息来决定应该使用哪个编译器来编译我的项目。在不同的计算机上有几个程序模拟一个过程。在 Linux 上，我使用的是 GCC。一切都很好。我可以优化代码，它编译速度快并且使用的内存不多。

我用 MSVC 和 GCC 编译器做我自己的基准测试。后来的一个产生稍微快一点的二进制文件（对于每个子架构）。虽然编译时间远远超过 MSVC。

所以我决定使用MinGW。但是在MinGW中找不到关于异常处理方法及其实现的任何解释。我可以为不同的操作系统和架构使用不同的发行版。

注意事项：

*   编译时间和内存对我的使用并不重要。唯一重要的是运行时优化。我需要我的程序足够快。慢速编译器是可以接受的。
*   操作系统：微软 Windows XP / 7 / 8 / Linux
*   架构：Intel Core i7 / Core2 / 和运行 XP 的非常旧的 i686：P

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-03-28T15:03:34.117

[MinGW-w64 Wiki](https://sourceforge.net/p/mingw-w64/wiki2/Exception%20Handling/)上有一个简短的概述：

> **为什么 mingw-w64 gcc 不支持 Dwarf-2 异常处理？**
> 
> Windows的**Dwarf-2 EH**实现根本不是为在 64 位 Windows 应用程序下工作而设计的。在 win32 模式下，异常展开处理程序无法通过不支持 dw2 的代码传播，这意味着通过任何不支持 dw2 的“外帧”代码的任何异常都会失败，包括 Windows 系统 DLL 和使用 Visual Studio 构建的 DLL。gcc 中的 Dwarf-2 展开代码检查 x86 展开程序集，如果没有其他 dwarf-2 展开信息，则无法继续。
> 
> 异常处理的**SetJump LongJump**方法适用于 win32 和 win64 上的大多数情况，但一般保护错误除外。正在开发 gcc 中的结构化异常处理支持以克服 dw2 和 sjlj 的弱点。在 win64 上，展开信息放置在 xdata-section 中，并且存在 .pdata（函数描述符表）而不是堆栈。对于 win32，处理程序链在堆栈上，需要由实际执行的代码保存/恢复。

[GCC GNU](http://gcc.gnu.org/wiki/WindowsGCCImprovements)关于*异常处理*：

> GCC 支持两种异常处理 (EH) 方法：
> 
> *   **DWARF-2 (DW2) EH**，需要使用 DWARF-2（或 DWARF-3）调试信息。DW-2 EH 可能导致可执行文件略微膨胀，因为大型调用堆栈展开表必须包含在可执行文件中。
> *   一种基于**setjmp/longjmp (SJLJ)**的方法。基于 SJLJ 的 EH 比 DW2 EH 慢得多（即使在没有引发异常时也会惩罚正常执行），但可以跨未使用 GCC 编译或没有调用堆栈展开信息的代码工作。
> 
> *[...]*
> 
> **结构化异常处理 (SEH)**
> 
> Windows 使用自己的异常处理机制，称为结构化异常处理 (SEH)。*[...]* 不幸的是，GCC 还不支持 SEH。*[...]*

也可以看看：

*   [GCC的异常处理模型](https://stackoverflow.com/questions/318383/exception-handling-models-of-gcc)
*   [IA-64 的 C++ 异常处理](http://static.usenix.org/events/osdi2000/wiess2000/full_papers/dinechin/dinechin_html/)
*   [EH 新手指南](http://gcc.gnu.org/ml/gcc/2002-07/msg00391.html)

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-03-27T21:55:02.167

> **SJLJ** (setjmp/longjmp)： – 适用于 32 位和 64 位 – 不是“零成本”：即使没有抛出异常，它也会导致轻微的性能损失（在异常繁重的代码中约为 15%） – 允许异常遍历例如 windows 回调
> 
> **DWARF** (DW2, dwarf-2) – 仅适用于 32 位 – 没有永久的运行时开销 – 需要整个调用堆栈启用 dwarf，这意味着异常不能被抛出，例如 Windows 系统 DLL。
> 
> **SEH**（零开销异常）——将可用于 64 位 GCC 4.8。

*来源：[https ://wiki.qt.io/MinGW-64-bit](https://wiki.qt.io/MinGW-64-bit)*

# objective-c - 目标c中的xml解析访问属性

> ID：15670171
> 
> 赞同：0
> 
> 时间：2013-03-27T21:48:22.837
> 
> 标签：objective-c, xml, parsing

我正在尝试解析 xml 文件，但无法检索其中的所有对象。

我的xml是

```
<exam>
<question s="1" a="2" m="1"  x="1">
    <q>question</q>
    <o p="">question</o>
    <o p="">question</o>
    <o p="">question</o>
    <o p="">question</o>

</question>
<question s="2" a="1,3,5" m="3" p="1.2.jpg" x="1">
    <q>question</q>
    <o p="">question</o>
    <o p="">question</o>
    <o p="">question</o>
    <o p="">question</o>
    <o p="">question</o>
    <o p="">question</o>
</question>
</exam> 
```

如何检索所有数据，例如“s="2"”和“<.op=>question<./o>”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:55:49.307

使用`GDataXML` & 考虑`xmlData`将是 XML 字符串`NSData`表示。

```
GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData error:&error];

NSArray *dataArray = [doc nodesForXPath:@"//exam/question" error:nil];

  for (GDataXMLElement *element in dataArray) {

        NSArray * question = [element elementsForName:@"s"];

        if (question.count > 0) {
            GDataXMLElement *questionElement = (GDataXMLElement *) [question objectAtIndex:0];
            questionString = [questionElement stringValue];
        }
} 
```

[在此处](http://www.cocos2d-iphone.org/forum/topic/28567)查看更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T12:59:08.807

感谢您的帮助。这是我在朋友的帮助下找到的解决方案（抱歉变量名选择不当）：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    currentElement = elementName;
    if([elementName isEqualToString:@"item"])
    {
        qes = [[Qes alloc] init];
        qes.s= [attributeDict objectForKey:@"s"];

    }

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if([currentElement isEqualToString:@"q"])
        [qes.question appendString:string];
    if([currentElement isEqualToString:@"o"])
    {
        [qes.answers addObject:string];
    }

}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"item"])
    {
        [quests addObject:qes];

    }
}
-(void)parserDidEndDocument:(NSXMLParser *)parser
{
    for (Qes *s in quests) {
        NSLog(s.question);
        NSLog(@"s-----");
        NSLog(s.s);

        for (NSString *w in s.answers) {
             NSLog(w);

        }

    }

} 
```

# css - 需要 CSS 3 列布局 fixed-fluid-fluid

> ID：15670172
> 
> 赞同：0
> 
> 时间：2013-03-27T21:48:26.117
> 
> 标签：css, css-float

我在创建带有 3 个 div 的 3 列布局时遇到了困难。左 div 需要是固定宽度。中间和右侧的 div 需要具有流畅的宽度。当浏览器水平调整大小时，中间和右边的 div 需要按比例调整大小。

我已经看到了一些带有其他固定列的 3 列流体布局的示例，但不是针对固定流体流体布局的示例。

复制我的问题的标记如下。CSS 有点冗长，因为我一直在解决这个问题。当我调整浏览器的大小时，右侧的 div 消失在水平线下方。此外，3 列应占#caption_stripe 宽度的 100%，但它们没有。右侧显示了大约 2-3 像素的间隙。

```
<html>
<head>
<style>
.contentMain {
    clear: both;
    overflow: hidden;
    width: 100%;
    max-width: 1024px;
    margin: 0 auto 0 auto;
}
#lessons_wrapper { background-color: blue; }
#caption_stripe {
    position: relative;
    overflow: hidden;
    height: 37px;
    width: 100%;
    max-width: 1024px;
    font-family: Helvetica, Arial, 'DejaVu Sans', 'Liberation Sans', Freesans, sans-serif;
    font-size: 11pt;
    font-weight: bold;
    text-align: center;
    color: white;
    margin: 0;
    padding: 0;
}
#caption_subjects {
    float: left;
    height: 37px;
    background-color: #3c3d3d;
    width: 13%;
    max-width: 138px;
    min-width: 138px;
    margin: 0;
    padding: 0;
}

#caption_topics {
    float: left;
    height: 37px;
    background-color: #707070;
    width: 42%;
    max-width: 422px;
    min-width: 100px;
    margin: 0;
    padding: 0;
}
#caption_modules {
    float: left;
    height: 37px;
    background-color: #989898;
    width: 45%;
    max-width: 464px;
    min-width: 100px;
    margin: 0;
    padding: 0;
}
</style>

</head>
<body>
<div class="contentMain">
    <div id="lessons_wrapper" style="display:block">
        <div id="caption_stripe">
            <div id="caption_subjects">SUBJECTS</div>
            <div id="caption_topics">TOPICS</div>
            <div id="caption_modules">MODULES</div>
        </div>
        <br style="clear:both;" />
    </div>
</div>
</body>
</html> 
```

我还需要使用将出现在此标题下方的 div 以更大规模的方式执行此操作。现在，如果我能得到这个工作的例子，我可能也能让那些工作。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:15:23.900

好的，如果要修复它，不确定为什么在第一列上有 % 宽度。

但要注意的主要事情是，将您的流体 div 放入一个包装 div。然后给你的包装器一个左填充等于你的固定列的宽度。

```
.fluid-wrapper {
    width: 100%;
    height: 100%;
    padding-left: 100px;
} 
```

为此，您需要将[box-sizing](http://css-tricks.com/box-sizing/box-sizing/)应用于包装器。这意味着填充将从包装器的内部宽度中扣除，而不是添加。

在所有元素上使用 box-sizing 是相当安全的，这在创建流体/响应式设计时会有很大帮助。

```
*, *:after, *:before {
    box-sizing:border-box;
    -moz-box-sizing:border-box; /* Firefox */
    -webkit-box-sizing:border-box; /* Safari */
} 
```

这是一个有效的 JSFiddle：http: [//jsfiddle.net/nhwGA/1/](http://jsfiddle.net/nhwGA/1/)

# php - Fedex 网络服务 (SOAP)：取件服务

> ID：15670173
> 
> 赞同：9
> 
> 时间：2013-03-27T21:48:30.937
> 
> 标签：php, soap, fedex

我正在尝试使用取件服务安排取件。首先我发送 Pickup Availability 请求以获取截止时间，然后使用我在 Pickup Request 中获得的结果。但在那之后，我收到错误“截止时间后的就绪时间”，显然是在截止时间之前。在我的示例中，返回的截止时间是 16:00，但我可以安排取件的最晚时间是 11:00。部分取件可用性响应：

```
<v3:ScheduleDay>SAME_DAY</v3:ScheduleDay>
<v3:Available>true</v3:Available>
<v3:PickupDate>2013-04-02</v3:PickupDate>
<v3:CutOffTime>16:00:00</v3:CutOffTime> 
```

产生错误的部分计划取件请求：

```
<ns1:ReadyTimestamp>2013-04-02T13:00:00</ns1:ReadyTimestamp>
<ns1:CompanyCloseTime>20:00:00</ns1:CompanyCloseTime> 
```

这是两个请求的完整请求/响应代码：http: [//pastebin.com/jqtfsRFc](http://pastebin.com/jqtfsRFc)

**UPD**：根据评论中的讨论获得更多详细信息

> 那就是写的关于ReadyTimestamp的时间必须不晚于CutOffTime，可以通过PickupAvailabilityRequest发现。

所以我提出了一个取货可用性请求并查看回复：

```
<v3:ScheduleDay>SAME_DAY</v3:ScheduleDay>
<v3:Available>true</v3:Available>
<v3:PickupDate>2013-04-09</v3:PickupDate>
<v3:CutOffTime>16:00:00</v3:CutOffTime> 
```

文档说，取件可用性的时间戳是根据当地 TZ 使用的（取自邮政编码）。本地 TZ 是 PST，与 UTC 有 -07:00 的偏移量。取件可用性回复中还有一行指示处理我的取件可用性请求的时间。我检查并看到它也在 PST 中，所以这一步看起来工作正常： `<v3:RequestTimestamp>2013-03-26T11:58:37</v3:RequestTimestamp>`

所以我得到了太平洋标准时间 16:00 的截止时间，下一步是使用创建取件请求将实际取件时间安排在不迟于截止时间的时间。对于这个请求`ReadyTimestamp`应该包含 TZ 信息，所以我尝试了不同的日期/时间格式。因此，如果我想为太平洋标准时间 14:00 创建取件，我会尝试`2013-04-09T21:00:00`、`2013-04-09T21:00:00.000Z`、`2013-04-09T21:00:00+00:00`和`2013-04-09T14:00:00-07:00`。在所有这些情况下，我都会得到 error `Ready Time after Cutoff Time`。我尝试了许多不同的值，发现它的最新工作时间是 04:00 PST（与 11:00 UTC 相同）。所以 04:00 给了我`success`，而 04:01 给了我`Ready Time after Cutoff Time`，它适用于任何日期/时间格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:00:24.370

您是否注意到[第 76 页](http://images.fedex.com/us/developer/product/WebServices/MyWebHelp/DeveloperGuide2012.pdf)的`ReadyTimestamp`示例**CreatePickupRequest中的**

```
<q0:ReadyTimestamp>2011-08-02T08:00:18.282Z</q0:ReadyTimestamp>
<q0:CompanyCloseTime>17:00:00</q0:CompanyCloseTime> 
```

与[时区代码](https://en.wikipedia.org/wiki/ISO_8601#UTC)一起给出。

UPD。您可以检查来自 github 的[php fedex api 包装器或来自 phpclasses 的 fedex](https://github.com/JeremyDunn/php-fedex-api-wrapper) [api 包装器](http://www.phpclasses.org/package/7778-PHP-Manage-the-deliveries-of-postal-packages-via-Fedex.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-09T07:38:31.563

createPickup 请求中的 ReadyTimestamp 将时间戳作为值

示例：'ReadyTimestamp'：'1404891463'

这将起作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:30:08.297

如果要在 WebService 请求中传递日期，`DateTime`则 WSDL 的数据类型为

```
class DateTime2 extends DateTime {
    function __toString() { 
        return $this->format("Y-m-d\TH:i:s.000\Z");
    }
}

$date = new DateTime2();

$client = new SoapClient(
    "http://www.myos.it/sp/smartphonelayer.asmx?wsdl", 
    array("trace" => 1)
);

$result = $client->SetReservation(array("RDescription"=>"Giuseppe Silvestri",
                                        "RNumber"=>2,
                                        "RPhoneNumber"=>"3286026817",
                                        "RDate"=>$date.""));

echo "REQUEST:".$client->__getLastRequest()."<br>"; 

print_r($result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-31T20:18:46.633

您必须有以下区别： a- 包裹准备好时 b- 截止时间 c- 公司关闭时间。

因此，如果您的邮政编码的截止时间是 16:00，那么您的包裹必须在该时间之前准备好，并且您的公司必须在几个小时后开放。

我的建议。公司关门时间为 19:00，fedex 最迟取件时间通常为所有邮政编码的 17hs。那两个是因为当您要求取件时，面包车快递员有 2 个小时去那个地方，如果您的公司关闭时间距离取件请求只有 1 小时，您会遇到问题。

希望能帮助到你。

# matlab - 如何一次重命名大量 .asc 文件？使用 MS Office 或 Matlab

> ID：15670174
> 
> 赞同：0
> 
> 时间：2013-03-27T21:48:38.607
> 
> 标签：matlab, ms-office, ascii, file-rename, batch-rename

场景如下：我有一个网格构建器，它可以一次运行大量数据，每次完成通常需要大约 10 个小时。它吐出了我所有最新的 .asc 文件

```
 oak_sabppt_2010_01_01.asc
    oak_sabppt_2010_01_02.asc
    oak_sabppt_2010_01_03.asc 
```

等等等等……当它们应该被命名时：

```
 ppt_2010_01_01.asc
    ppt_2010_01_02.asc
    ppt_2010_01_02.asc 
```

等等等等等等

鉴于我如何获得了价值大约十年的这些文件与前几十年的标题不匹配，我想通过删除它最近标记的“oak_sab”前缀来更改所有名称。

需要解决的问题：关于一次重命名批量.asc文件的最便捷有效的路线有什么建议？我可以使用的唯一工具是 microsoft office 和 matlab，因此这些参数内的建议将是最有价值的！

谢谢，-J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:20:27.100

如果您使用的是 Windows，则可以为此使用 Windows 命令提示符或 PowerShell。例如，要从当前目录中的所有文件中删除“oak_sab”，请在 PowerShell 中尝试以下行：

```
Dir | Rename-Item –NewName { $_.name –replace “oak_sab“,”” } 
```

更多信息在这里： http: [//www.howtogeek.com/111859/how-to-batch-rename-files-in-windows-4-ways-to-rename-multiple-files/](http://www.howtogeek.com/111859/how-to-batch-rename-files-in-windows-4-ways-to-rename-multiple-files/)

# c# - 修改更新数据库记录以创建新数据库记录的方法

> ID：15670183
> 
> 赞同：1
> 
> 时间：2013-03-27T21:49:32.567
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework

我一直在阅读[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/)上的 Contoso 大学教程，特别是第 6 部分 ( [http://www.asp. net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)），其中添加了课程复选框到 Instructor Edit 视图，Instructor 和 Course 数据库表都会相应*更新*。

不幸的是，本教程不包含如何创建新的讲师记录并*插入*到两个数据库表中。

任何人都可以提供指导如何修改编辑方法吗？

**更新**

我是实体框架的新手，但我是否正确地认为`.Add`会同时执行插入或更新？

如果是这样，我想知道我是否只需要改变这一点

```
var instructorToUpdate = db.Instructors
.Include(i => i.OfficeAssignment)
.Include(i => i.Courses)
.Where(i => i.InstructorID == id)
.Single(); 
```

创建一个新的 id 而不是使用现有的 id？

**更新结束**

**Http Post 操作方法**

```
[HttpPost]
public ActionResult Edit(int id, FormCollection formCollection, string[] selectedCourses)
{
var instructorToUpdate = db.Instructors
    .Include(i => i.OfficeAssignment)
    .Include(i => i.Courses)
    .Where(i => i.InstructorID == id)
    .Single();
if (TryUpdateModel(instructorToUpdate, "", null, new string[] { "Courses" }))
{
    try
    {
        if (String.IsNullOrWhiteSpace(instructorToUpdate.OfficeAssignment.Location))
        {
            instructorToUpdate.OfficeAssignment = null;
        }

        UpdateInstructorCourses(selectedCourses, instructorToUpdate);

        db.Entry(instructorToUpdate).State = EntityState.Modified;
        db.SaveChanges();

        return RedirectToAction("Index");
    }
    catch (DataException)
    {
        //Log the error (add a variable name after DataException)
        ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
   }
}
PopulateAssignedCourseData(instructorToUpdate);
return View(instructorToUpdate);
} 
```

**其他方法**

```
private void UpdateInstructorCourses(string[] selectedCourses, Instructor instructorToUpdate)
{
if (selectedCourses == null)
{
    instructorToUpdate.Courses = new List<Course>();
    return;
}

var selectedCoursesHS = new HashSet<string>(selectedCourses);
var instructorCourses = new HashSet<int>
    (instructorToUpdate.Courses.Select(c => c.CourseID));
foreach (var course in db.Courses)
{
    if (selectedCoursesHS.Contains(course.CourseID.ToString()))
    {
        if (!instructorCourses.Contains(course.CourseID))
        {
            instructorToUpdate.Courses.Add(course);
        }
    }
    else
    {
        if (instructorCourses.Contains(course.CourseID))
        {
            instructorToUpdate.Courses.Remove(course);
        }
    }
}
} 
```

...

```
private void PopulateAssignedCourseData(Instructor instructor)
{
var allCourses = db.Courses;
var instructorCourses = new HashSet<int>(instructor.Courses.Select(c => c.CourseID));
var viewModel = new List<AssignedCourseData>();
foreach (var course in allCourses)
{
    viewModel.Add(new AssignedCourseData
    {
        CourseID = course.CourseID,
        Title = course.Title,
        Assigned = instructorCourses.Contains(course.CourseID)
    });
}
ViewBag.Courses = viewModel;
} 
```

**编辑视图**

```
@model ContosoUniversity.Models.Instructor

@{
ViewBag.Title = "Edit";
}

<h2>Edit</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Instructor</legend>

    @Html.HiddenFor(model => model.PersonID)

    <div class="editor-label">
        @Html.LabelFor(model => model.LastName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LastName)
        @Html.ValidationMessageFor(model => model.LastName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.FirstMidName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstMidName)
        @Html.ValidationMessageFor(model => model.FirstMidName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.HireDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.HireDate)
        @Html.ValidationMessageFor(model => model.HireDate)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.OfficeAssignment.Location)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.OfficeAssignment.Location)
        @Html.ValidationMessageFor(model => model.OfficeAssignment.Location)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.OfficeAssignment.Location)
    </div>
    <div class="editor-field">
        <table style="width: 100%">
            <tr>
                @{
                    int cnt = 0;
                    List<ContosoUniversity.ViewModels.AssignedCourseData> courses = ViewBag.Courses;

                    foreach (var course in courses) {
                        if (cnt++ % 3 == 0) {
                            @:  </tr> <tr> 
                        }
                        @: <td> 
                            <input type="checkbox" 
                                   name="selectedCourses" 
                                   value="@course.CourseID" 
                                   @(Html.Raw(course.Assigned ? "checked=\"checked\"" : "")) /> 
                            @course.CourseID @:&nbsp; @course.Title
                        @:</td>
                    }
                    @: </tr>
                }
        </table>
    </div>
    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
}

<div>
@Html.ActionLink("Back to List", "Index")
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:26:04.103

问题已经[在这里回答了](https://stackoverflow.com/questions/11531769/saving-many-to-many-relationship-data-on-mvc-create-view/11593957#11593957)

我想我应该在问这个问题之前更努力地搜索！

# c - 如何对 2001 年 IOCCC 获胜者的 ctk.c 代码进行去混淆处理？

> ID：15670185
> 
> 赞同：6
> 
> 时间：2013-03-27T21:49:35.563
> 
> 标签：c, obfuscation, deobfuscation

我看过[ctk.c](http://www.ioccc.org/2001/ctk.c)混淆代码，但我怎样才能开始去混淆它呢？

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/time.h>
#include <signal.h>
#define m(b)a=b;z=*a;while(*++a){y=*a;*a=z;z=y;}
#define h(u)G=u<<3;printf("\e[%uq",l[u])
#define c(n,s)case n:s;continue
char x[]="((((((((((((((((((((((",w[]=
"\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b";char r[]={92,124,47},l[]={2,3,1
,0};char*T[]={"  |","  |","%\\|/%"," %%%",""};char d=1,p=40,o=40,k=0,*a,y,z,g=
-1,G,X,**P=&T[4],f=0;unsigned int s=0;void u(int i){int n;printf(
"\233;%uH\233L%c\233;%uH%c\233;%uH%s\23322;%uH@\23323;%uH \n",*x-*w,r[d],*x+*w
,r[d],X,*P,p+=k,o);if(abs(p-x[21])>=w[21])exit(0);if(g!=G){struct itimerval t=
{0,0,0,0};g+=((g<G)<<1)-1;t.it_interval.tv_usec=t.it_value.tv_usec=72000/((g>>
3)+1);setitimer(0,&t,0);f&&printf("\e[10;%u]",g+24);}f&&putchar(7);s+=(9-w[21]
)*((g>>3)+1);o=p;m(x);m(w);(n=rand())&255||--*w||++*w;if(!(**P&&P++||n&7936)){
while(abs((X=rand()%76)-*x+2)-*w<6);++X;P=T;}(n=rand()&31)<3&&(d=n);!d&&--*x<=
*w&&(++*x,++d)||d==2&&++*x+*w>79&&(--*x,--d);signal(i,u);}void e(){signal(14,
SIG_IGN);printf("\e[0q\ecScore: %u\n",s);system("stty echo -cbreak");}int main
(int C,char**V){atexit(e);(C<2||*V[1]!=113)&&(f=(C=*(int*)getenv("TERM"))==(
int)0x756E696C||C==(int)0x6C696E75);srand(getpid());system("stty -echo cbreak"
);h(0);u(14);for(;;)switch(getchar()){case 113:return 0;case 91:case 98:c(44,k
=-1);case 32:case 110:c(46,k=0);case 93:case 109:c(47,k=1);c(49,h(0));c(50,h(1
));c(51,h(2));c(52,h(3));}} 
```

[http://www.ioccc.org/2001/ctk.hint](http://www.ioccc.org/2001/ctk.hint)：

> ```
> This is a game based on an Apple ][ Print Shop Companion easter
> egg named 'DRIVER', in which the goal is to drive as fast as
> you can down a long twisty highway without running off the
> road.  Use ',./', '[ ]', or 'bnm' to go left, straight, and
> right respectively. Use '1234' to switch gears. 'q' quits. The
> faster you go and the thinner the road is, the more points you
> get. Most of the obfuscation is in the nonsensical if statements
> among other things. It works best on the Linux console: you
> get engine sound (!) and the * Lock keyboard lights tell you
> what gear you're in (none lit=4th).  The 'q' argument (no
> leading '-') will silence the sound. It won't work on a terminal
> smaller than 80x24, but it works fine with more (try it in an
> XTerm with the "Unreadable" font and the window maximized
> vertically!). 
> ```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T22:37:42.287

## 第一步

使用：

```
sed -e'/#include/d' ctk.c | gcc -E - | sed -e's/;/;\n/g' -e's/}/}\n/g' -e '/^#/d' | indent 
```

我能够生成以下输出，虽然并不完美，但似乎可读性更好：

```
char x[] = "((((((((((((((((((((((", w[] =
  "\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b";
char r[] = { 92, 124, 47 }

, l[] =
{
2, 3, 1, 0}

;
char *T[] = { "  |", "  |", "%\\|/%", " %%%", "" }

;
char d = 1, p = 40, o = 40, k = 0, *a, y, z, g = -1, G, X, **P = &T[4], f = 0;
unsigned int s = 0;
void
u (int i)
{
  int n;
  printf ("\233;
%uH\233L%c\233;
%uH%c\233;
%uH%s\23322;
%uH@\23323;
%uH \n", *x - *w, r[d], *x + *w, r[d], X, *P, p += k, o);
  if (abs (p - x[21]) >= w[21])
    exit (0);
  if (g != G)
    {
      struct itimerval t = { 0, 0, 0, 0 }
      ;
      g += ((g < G) << 1) - 1;
      t.it_interval.tv_usec = t.it_value.tv_usec = 72000 / ((g >> 3) + 1);
      setitimer (0, &t, 0);
      f && printf ("\e[10;
%u]", g + 24);
    }
  f && putchar (7);
  s += (9 - w[21]) * ((g >> 3) + 1);
  o = p;
  a = x;
  z = *a;
  while (*++a)
    {
      y = *a;
      *a = z;
      z = y;
    }
  ;
  a = w;
  z = *a;
  while (*++a)
    {
      y = *a;
      *a = z;
      z = y;
    }
  ;
  (n = rand ()) & 255 || --*w || ++*w;
  if (!(**P && P++ || n & 7936))
    {
      while (abs ((X = rand () % 76) - *x + 2) - *w < 6);
      ++X;
      P = T;
    }
  (n = rand () & 31) < 3 && (d = n);
  !d && --*x <= *w && (++*x, ++d) || d == 2 && ++*x + *w > 79 && (--*x, --d);
  signal (i, u);
}

void
e ()
{
  signal (14, SIG_IGN);
  printf ("\e[0q\ecScore: %u\n", s);
  system ("stty echo -cbreak");
}

int main (int C, char **V)
{
  atexit (e);
  (C < 2 || *V[1] != 113)
    && (f = (C = *(int *) getenv ("TERM")) == (int) 0x756E696C
    || C == (int) 0x6C696E75);
  srand (getpid ());
  system ("stty -echo cbreak");
  G = 0 << 3;
  printf ("\e[%uq", l[0]);
  u (14);
  for (;;)
    switch (getchar ())
      {
      case 113:
    return 0;
      case 91:
      case 98:
      case 44:
    k = -1;
    continue;
      case 32:
      case 110:
      case 46:
    k = 0;
    continue;
      case 93:
      case 109:
      case 47:
    k = 1;
    continue;
      case 49:
    G = 0 << 3;
    printf ("\e[%uq", l[0]);
    continue;
      case 50:
    G = 1 << 3;
    printf ("\e[%uq", l[1]);
    continue;
      case 51:
    G = 2 << 3;
    printf ("\e[%uq", l[2]);
    continue;
      case 52:
    G = 3 << 3;
    printf ("\e[%uq", l[3]);
    continue;
      }
} 
```

## ... 现在？

我认为在这一点上不会有更多的自动化过程能够执行，因为从现在开始，“更多”可读或“更少”可读性可能取决于读者的特定偏好。

可以执行的一个步骤是从字符串中删除转义序列并将它们分开放置。事实证明，整个

```
char l[] = {2, 3, 1, 0} 
```

除了在主循环的转义序列中使用之外没有其他目的：

```
printf ("\e[%uq", l[0]); 
```

等等。查找它们的含义：

```
ESC [ 0 q: clear all LEDs
ESC [ 1 q: set Scroll Lock LED
ESC [ 2 q: set Num Lock LED
ESC [ 3 q: set Caps Lock LED 
```

根据口味，您可能希望将它们与宏或对您更有意义的函数调用等交换`clear_all_LEDs`。

我强烈怀疑机器会同意这是一种简化。事实证明，整个主循环似乎只是在使用用户输入的键，因此可能将数字转换为相应的字符可能会增加可读性，例如替换：

```
case 113:
  return 0;
case 91:
case 98:
case 44:
  k = -1;
// ...
case 49:
  G = 0 << 3;
  printf ("\e[%uq", l[0]); 
```

有类似的东西：

```
case 'q':
  return 0;
case '[':
case 'b':
case ',':
  k = -1;
// ...
case '1':
  G = 0 << 3;
  set_Num_Lock_LED (); 
```

哦 - 虽然我们已经这样做了，但为什么我们不想将这个相当奇怪的名称更改`G`为`gear`. 我再次强烈怀疑自动化过程会发现重命名 from`G`比`gear`将其重命名为`butterfly`. 好吧，也许它甚至不是。

在美化名称的同时，单个引用的这个函数可能`u`是另一个候选者：

```
u (14); 
```

可能有一个更有意义的名字`update`。既然我们已经包含`<signal.h>`了为什么不通过替换`14`为`SIGALRM`这样的代码来进一步去混淆代码：

```
upadate (SIGALRM); 
```

正如你所看到的，这里的“去混淆”需要与之前完全**相反**的步骤。这次用宏替换扩展。机器将如何尝试决定哪个更有用？

另一个我们可能想用其他东西替换裸数字的地方是更新函数中的这个：

```
f && putchar (7); 
```

为什么不替换它`7`，`\a`因为它最终会是一样的。也许我们甚至应该`f`用更“有意义”的东西来改变裸露。

我再次投票`butterfly`，但更愿意称之为`play_sound`：

```
if (play_sound)
   putchar ('\a'); 
```

可能是我们正在寻找的更具可读性的版本。当然，我们不应该忘记在所有其他位置替换 f。我们 main 函数开头的那个是罪魁祸首：

## 神圣的混乱

```
int main (int C, char **V)
{
  atexit (e);
  (C < 2 || *V[1] != 113)
    && (f = (C = *(int *) getenv ("TERM")) == (int) 0x756E696C
    || C == (int) 0x6C696E75); 
```

虽然很高兴地重命名`f`为`play_sound`和`e`- 不，仍然不`butterfly`，但这次我宁愿称之为： -`end`我们发现函数签名在命名约定方面看起来有点奇怪：`argc`代替`C`和`argv`代替在`V`这里看起来更传统. 从而给我们：

```
int main (int argc, char* argv[])
{
  atexit (end);
  (argc < 2 || *argv[1] != 113)
    && (playsound = (argc = *(int *) getenv ("TERM")) == (int) 0x756E696C
    || argc == (int) 0x6C696E75); 
```

由于这仍然不是美，我们问我们的标准人员，他告诉我们可以更换

```
(A || B) && (C) 
```

和

```
if (A || B) { C } 
```

和

```
E = (x=F)==H || x==I 
```

和

```
x = F; 
if (x==H || x==I) 
  A=1; 
else 
  A=0;` 
```

所以也许这应该是整个代码的更具可读性的版本：

```
if (argc < 2 || *argv[1] != 'q') {
   argc = *(int*) getenv ("TERM");
   if (argc == (int) 0x756E69 || argc == (int) 0x6C696E75))
     play_sound = 1;
   /* skip the else brach here as play_sound is alredy initialized to 0 */
} 
```

现在还有另一个人出现并开始告诉我们，如果存储在内存中，根据称为**字节顺序**的东西，看起来奇怪的数字 0x6C696E75 和 0x756E69 （将原始字节值解释为 ASCII 代码时）看起来像`"linu"`or `"unil"`。一种是一种架构类型的“unil”，另一种是“linu”，而另一种架构则相反，具有不同的字节序。

因此，仔细看看这里本质上发生的事情是：

*   我们从 getenv ("TERM") 获得一个指向字符串的指针，我们在取消引用它之前将它键入到指向 int 的指针，从而将存储在字符串位置的位模式作为 int 引导。
*   接下来，我们将此值与存储在该特定位置的“unil”或“linu”执行相同操作时得到的值进行比较。

可能我们只是想检查 TERM 环境变量是否设置为“linux”，因此我们的去混淆版本可能希望在此处执行字符串比较。

另一方面，我们不能确定是否还允许名称以“unil”开头的终端播放声音可能是该软件的一个特殊功能，所以我决定最好保持原样。

## 现在怎么办 ？

在重命名和重新编码变量名称和值时，那些奇怪的 char 数组可能是我们的下一个受害者。以下混乱看起来不太好：

```
char x[] = "((((((((((((((((((((((", w[] =
  "\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b";
char r[] = { 92, 124, 47 }; 
```

所以也许他们可以改为：

```
char x_offset[] = {
  40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
  40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
  40, 40, 0 };

char width[] = {
  8, 8, 8, 8, 8, 8, 8, 8, 8, 8,
  8, 8, 8, 8, 8, 8, 8, 8, 8, 8,
  8, 8, 0 };

const char border[] = "\\|/"; 
```

正如你所看到的，我只是选择了将值的描述方式**切换**`x`为字符串常量到 x 写为数组，因为这种方式存储在这里的值的目的对我来说似乎更清楚了一点。

另一方面，我改变了`r`写下方式的方式正好相反，因为这对我来说似乎更清楚了。

在寻找所有这些 refs 时`x`，时间可以用来重命名`w`和to - 再次抱歉，不 -并且在重命名为时。`r``p``o``butterfly``pos``old_pos``s``score`

改变例如：

```
 s += (9 - w[21]) * ((g >> 3) + 1);
  o = p;
  a = x;
  z = *a;
  while (*++a)
    {
      y = *a;
      *a = z;
      z = y;
    }
  ;
  a = w;
  z = *a;
  while (*++a)
    {
      y = *a;
      *a = z;
      z = y;
    }
  ; 
```

到：

```
 /* update score */
  score += (9 - width[NEXT_LINE]) * ((g >> 3) + 1);
  old_pos = pos;

  /* shift x_offset */
  a = x_offset;
  z = *a;
  while (*++a) {
    y = *a;
    *a = z;
    z = y;
  };

  /* shift width */
  a = width;
  z = *a;
  while (*++a) {
    y = *a;
    *a = z;
    z = y;
  }; 
```

除了将它变成某种其他类型的循环的可能性之外，这两种移位功能都没有太多美化可能，因此添加适当的注释可能是您可以做的最大事情。删除幻数`21`可能是另一个想法`NEXT_LINE`，但这似乎不是最糟糕的选择。

单个字符标记的变量`g`看起来仍然不太好。但是将其重命名为类似的东西`update_interval`也有机会消除另一个奇怪的终端转义序列：

```
 if (g != G)
    {
      struct itimerval t = { 0, 0, 0, 0 }
      ;
      g += ((g < G) << 1) - 1;
      t.it_interval.tv_usec = t.it_value.tv_usec = 72000 / ((g >> 3) + 1);
      setitimer (0, &t, 0);
      f && printf ("\e[10;
%u]", g + 24);
    } 
```

也许看起来比：

```
 /* update simulation speed */
  if (update_interval != gear) {
    struct itimerval t = { 0, 0, 0, 0 }  ;
      update_interval += ((update_interval < gear) << 1) - 1;
      t.it_interval.tv_usec = t.it_value.tv_usec = 72000 / ((update_interval >> 3) + 1);
      setitimer (0, &t, 0);
      if (play_sound)
        change_bell_frequency (update_interval + 24);
  } 
```

## 最后修复

尽管现在代码看起来应该更具可读性，但仍然存在一些令人讨厌的部分：

```
!d && --*x <= *w && (++*x, ++d) || d == 2 && ++*x + *w > 79 && (--*x, --d); 
```

选择另一个（希望是）更有意义的名称`d`并打破运算符优先级，您最终可能会得到类似的结果：

```
 if (curve == CURVE_LEFT) {
    --*x_offset;
    if (*x_offset < *width) {
       ++*x_offset;
       curve = CURVE_NONE;
    }
  }
  else if (curve == CURVE_RIGHT) {
    ++*x_offset;
    if (*x_offset + *width > 79) {
      --*x_offsett;
      curve = CURVE_NONE;
    }
  } 
```

而是为所有这些`CURVE_...`s 添加适当的宏。

现在还有那些`X`，`P`而且`T`周围的名字也可能会改变。因为它的目的在代码中也更清晰可见，所以我决定翻转`T`我重命名的行顺序，`tree`这肯定意味着计算也必须修复。总而言之，它来自：

```
char *T[] = { "  |", "  |", "%\\|/%", " %%%", "" };
char X, **P = &T[4];

// ...

  if (!(**P && P++ || n & 7936))
    {
      while (abs ((X = rand () % 76) - *x + 2) - *w < 6);
      ++X;
      P = T;
    } 
```

类似于：

```
char *tree[] = {
  "",
  " %%%",
  "%\\|/%",
  "  |",
  "  |",
};

char **tree_line = tree;
char tree_position;

// ...

  /* update tree line pointer */
  if (!(**tree_line && tree_line-- || n & 7936)) {
    /* find the right spot to grow */
    while (abs ((tree_position = rand () % 76) - *x_offset + 2) - *width < 6)
      ;
    ++tree_position;
    tree_line = &tree[4];
  } 
```

## 把最好的部分保留到最后

尽管代码对我来说已经看起来更漂亮了，但现在仍然缺少一部分。那就是做所有输出的那个。我说的是这一行：

```
 printf ("\233;%uH\233L%c\233;%uH%c\233;%uH%s\23322;%uH@\23323;%uH \n",
      *x - *w, r[d], *x + *w, r[d], X, *P, p += k, o); 
```

除了看起来很难阅读之外，它甚至被计算机混淆以产生任何可用的结果。

我尝试了在其他终端模拟器中运行的许多不同的东西，更改终端设置和来回切换语言环境而没有成功。

因此，除了这种混淆似乎更加完美，因为它甚至似乎混淆了我的计算机之外，我仍然无法说出作者在这里想要什么技巧。

八进制代码`\233`具有与转义字符 ( ) 相同的位模式，`\033`另外设置了第 8 位，这可能在某种程度上与此处预期的效果有关。不幸的是，正如我已经说过的那样，它对我不起作用。

幸运的是，转义序列似乎仍然很容易猜到，所以我想出了以下替换：

pos += move_x,

```
 /* draw street */
  printf ("\e[1;%uH" "\e[L" "%c"
          "\e[1;%uH" "%c",
          *x_offset - *width, border[curve],
          *x_offset + *width, border[curve]);
  /* draw tree */
  printf ("\e[1;%uH" "%s",
          tree_position, *tree_line);

  /* redraw car */
  printf ("\e[22;%uH" "@"
          "\e[23;%uH" " " "\n",
          pos,
          old_pos); 
```

将绘图分开（希望）使它们更具可读性。实际行和前一行仍然像原始版本一样在此处进行硬编码。也许如下所示从那里提取它们甚至会提高可读性：

```
 /* draw street */
  printf ("\e[1;%uH" "\e[L" "%c"
          "\e[1;%uH" "%c",
          *x_offset - *width, border[curve],
          *x_offset + *width, border[curve]);
  /* draw tree */
  printf ("\e[1;%uH" "%s",
          tree_position, *tree_line);

  /* redraw car */
  printf ("\e[%u;%uH" "@"
          "\e[%u;%uH" " " "\n",
          NEXT_LINE +1, pos,
          NEXT_LINE +2, old_pos); 
```

这终于把我带到了第一个可用的版本，然后我“测试”了很多。虽然可能不是 100% 最先进的，但它似乎仍然很容易上瘾。

## 最后的话

这是我附带的最终未混淆版本。如您所见，我没有实现 LED 设置功能和清屏功能，但不难找到分散在整个混淆版本中所需的转义序列。事实上，我已经在这篇文章中提到了 LED 序列。清除屏幕的是“\e[0q”。快乐的黑客。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/time.h>
#include <signal.h>

#define NEXT_LINE 21

#define CURVE_LEFT 0
#define CURVE_NONE 1
#define CURVE_RIGHT 2

char x_offset[] = {
  40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
  40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
  40, 40, 0 };

char width[] = {
  8, 8, 8, 8, 8, 8, 8, 8, 8, 8,
  8, 8, 8, 8, 8, 8, 8, 8, 8, 8,
  8, 8, 0 };

const char border[] = "\\|/";

void change_bell_frequency () {}
void clear_screen () {}
void clear_all_LEDs () {}
void set_Num_Lock_LED () {}
void set_Scroll_lock_LED () {}
void set_Caps_Lock_LED () {}

char *tree[] = {
  "",
  " %%%",
  "%\\|/%",
  "  |",
  "  |",
};

char **tree_line = tree;
char tree_position;

char curve = CURVE_NONE;
char *a, y, z;

char move_x = 0;
char update_interval = -1;

char pos = 40;
char old_pos = 40;

char play_sound = 0;
char gear;

unsigned int score = 0;

void move (char x, char y) {
  printf ("\e[%u;%uH", x, y);
}

void insert () {
  printf ("\e[L");
}

void update (int i) {
  int n;

  pos += move_x,

  /* draw street */
  printf ("\e[1;%uH" "\e[L" "%c"
          "\e[1;%uH" "%c",
          *x_offset - *width, border[curve],
          *x_offset + *width, border[curve]);
  /* draw tree */
  printf ("\e[1;%uH" "%s",
          tree_position, *tree_line);

  /* redraw car */
  printf ("\e[%u;%uH" "@"
          "\e[%u;%uH" " " "\n",
          NEXT_LINE + 1, pos,
          NEXT_LINE +2, old_pos);

  /* did we leave the road ? */
  if (abs (pos - x_offset[NEXT_LINE]) >= width[NEXT_LINE])
    exit (0);

  /* update simulation speed */
  if (update_interval != gear) {
    struct itimerval t = { 0, 0, 0, 0 }  ;
      update_interval += ((update_interval < gear) << 1) - 1;
      t.it_interval.tv_usec = t.it_value.tv_usec = 72000 / ((update_interval >> 3) + 1);
      setitimer (0, &t, 0);
      if (play_sound)
        change_bell_frequency (update_interval + 24);
  }

  /* play sound */
  if (play_sound)
    putchar ('\a');

  /* update score */
  score += (9 - width[NEXT_LINE]) * ((update_interval >> 3) + 1);
  old_pos = pos;

  /* shift x_offset */
  a = x_offset;
  z = *a;
  while (*++a) {
    y = *a;
    *a = z;
    z = y;
  };

  /* shift width */
  a = width;
  z = *a;
  while (*++a) {
    y = *a;
    *a = z;
    z = y;
  };

  /* generate new road */
  n = rand ();

  if (!(n & 255) && *width > 1)
    --*width;

  /* set tree line pointer */
  if (!(**tree_line && tree_line-- || n & 7936)) {
    /* find the right spot to grow */
    while (abs ((tree_position = rand () % 76) - *x_offset + 2) - *width < 6)
      ;
    ++tree_position;
    tree_line = &tree[4];
  }

  /* new offset */
  n = rand () & 31;
  if (n < 3)
    curve = n;

  if (curve == CURVE_LEFT) {
    --*x_offset;
    if (*x_offset <= *width) {
      ++*x_offset;
      curve = CURVE_NONE;
    }
  }
  else if (curve == CURVE_RIGHT) {
    ++*x_offset;
    if (*x_offset + *width > 79) {
      --*x_offset;
      curve = CURVE_NONE;
    }
  }

  signal (SIGALRM, update);
}

void end () {
  signal (SIGALRM, SIG_IGN);
  clear_all_LEDs ();
  clear_screen ();
  printf ("Score: %u\n", score);
  system ("stty echo -cbreak");
}

int main (int argc, char **argv) {
  atexit (end);

  if (argc < 2 || *argv[1] != 'q') {
    argc = *(int*) getenv ("TERM");
    if (argc == (int) 0x6C696E75 || argc == (int) 0x756E696C)
      play_sound = 1;
  }

  srand (getpid ());
  system ("stty -echo cbreak");
  gear = 0 << 3;

  clear_all_LEDs ();
  update (14);
  for (;;)
    switch (getchar ())
      {
        case 'q':
          return 0;
        case '[':
        case 'b':
        case ',':
          move_x = -1;
          continue;
        case ' ':
        case 'n':
        case '.':
          move_x = 0;
          continue;
        case ']':
        case 'm':
        case '/':
          move_x = 1;
          continue;
        case '1':
          gear = 0 << 3;
          set_Num_Lock_LED ();
          continue;
        case '2':
          gear = 1 << 3;
          set_Caps_Lock_LED ();
          continue;
        case '3':
          gear = 2 << 3;
          set_Scroll_lock_LED ();
          continue;
        case '4':
          gear = 3 << 3;
          clear_all_LEDs ();
          continue;
      }
} 
```

# javascript - 如何在 Javascript 中删除图像的实例

> ID：15670188
> 
> 赞同：0
> 
> 时间：2013-03-27T21:49:46.870
> 
> 标签：javascript, html

在我的程序中，我在画布上多次绘制图像。我的代码看起来像这样：

```
<img id="image1" src="image1.png" width="200" height="100" hidden ="hidden">
<script type ="text/javascript">
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext('2d');
        ctx.drawImage(image1, 50, 50, 200, 100);
        ctx.drawImage(image1, 100, 100, 200, 100);
<script/> 
```

我的问题是，是否可以仅删除此图像的一个实例？例如，只需删除在 100,100 处绘制的图像并将其保留在 50,50 处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:04:10.240

当你在画布上画东西的那一刻，它就不再是一个独立的对象，而是变成了画布上的一堆像素。这些像素一起形成一个更大的对象的信息丢失了。您可以使用 context.clearRect 将其删除，但这也会擦除在同一区域绘制的任何其他内容，因此当图像与其他内容重叠时，它不会执行您想要的操作。

我建议您清除整个画布并在没有图像的情况下再次绘制整个场景。

另一种选择是使用多个画布作为图层，通过使用 CSS 定位将它们放在彼此之上。这样，顶部画布上的任何透明像素都将显示下面画布的内容。这允许您擦除一个画布的部分内容，而不会影响其上方或下方的画布内容。

# c# - 在 LINQ 查询中，如何使用 .Include() 按包含的表列排序？

> ID：15670189
> 
> 赞同：6
> 
> 时间：2013-03-27T21:49:52.500
> 
> 标签：c#, linq, entity-framework, linq-to-entities, sql-order-by

我有这个表结构： ![两个表和一个查找表](../Images/022f80fe74ebdc93fd06e22be0df1c1e.png)

我有这个 LINQ 查询：

```
var query = (from p in context.People.Include("PeopleClub").Include("PeopleClub.Club")
             orderby p.Name
             select p).ToList(); 
```

是否有可能做这样的事情：

```
var query = (from p in context.People
                              .Include("PeopleClub")
                              .Include("PeopleClub.Club")
             orderby p.Name, p.PeopleClub.DisplaySequence
             select p).ToList(); 
```

更新：使用实体框架 4.0

更新2：我放弃了。有关另一种方法，请参阅[此类似问题](https://stackoverflow.com/questions/15683284/sort-inner-repeater-with-linq-query)。我最终在没有 .Include() 的情况下重写了我的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:53:20.550

通过导航属性尝试：

```
using System.Data.Entity;                                  // notice using

var q = from p in context.People
                          .Include(p => p.PeopleClub)      // notice lambda instead of string
                          .Include(p => p.PeopleClub.Club) // you may not need that though
        orderby p.FirstName, p.ClubPerson.DisplaySequence
        select p; 
```

或定期加入：

```
var q = from p in db.People
        join pc in db.PeopleClub on p.PersonID equals pc.PersonID
        join c in db.Clubs on pc.ClubID equals c.ClubID
        orderby p.FirstName, pc.DisplaySequence
        select p; 
```

# r - 如何在数据框的特定命名列上使用`assign()`或`get()`？

> ID：15670193
> 
> 赞同：5
> 
> 时间：2013-03-27T21:50:02.577
> 
> 标签：r, dataframe, assign, named

有没有办法为数据框中的特定列分配值？例如，

```
dat2 = data.frame(c1 = 101:149, VAR1 = 151:200)    
j = "dat2[,"VAR1"]"  ## or, j = "dat2[,2]"
assign(j,1:50) 
```

上面的方法不起作用。这也不是：

```
j = "dat2"
assign(get(j)[,"VAR1"],1:50) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T22:04:35.497

让我们假设我们有一个*有效*的data.frame，每行有 50 行

```
dat2 <- data.frame(c1 = 1:50, VAR1 = 51:100) 
```

1\. 不要使用`assign`，`get`如果可以避免的话。

`"dat2[,"VAR1"]"`在 中无效`R`。

您也可以从帮助页面中注意到这一点`assign`

> assign 不分派赋值方法，因此不能用于设置向量、名称、属性等元素。
> 
> 请注意，分配给附加列表或数据框会更改附加副本而不是原始对象：请参阅附加和与。

data.frame 的一列是列表的一个元素

你正在寻找的是`[[<-`

```
# assign the values from column (named element of the list) `VAR1`
j <- dat2[['VAR1']] 
```

如果您想为`VAR1`within分配新值`dat2`，

```
dat2[['VAR1']] <- 1:50 
```

* * *

## 你的问题的答案......

`get`使用和完全使用字符串进行操作`assign`

```
assign('dat2', `[[<-`(get('dat2'), 'VAR1', value = 2:51)) 
```

* * *

## 其他方法

### 数据表::集

如果您想在`data.frame`or中通过引用进行分配`data.table`（仅替换现有列），`set`则从`data.table`包中有效（即使使用`data.frames`）

```
library(data.table)
set(dat2, j = 'VAR1', value = 5:54) 
```

* * *

### `eval`和`bquote`

```
dat1 <- data.frame(x=1:5)
dat2 <- data.frame(x=2:6)

for(x in sapply(c('dat1','dat2'),as.name)) {
  eval(bquote(.(x)[['VAR1']] <- 2:6))
} 
```

* * *

### `eapply`

或者，如果您使用单独的环境

```
ee <- new.env()
ee$dat1 <- dat1
ee$dat2 <- dat2

# eapply returns a list, so use list2env to assign back to ee
list2env(eapply(ee, `[[<-`, 'y', value =1:5), envir = ee) 
```

* * *

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T23:09:13.950

```
set2 <- function(x,  val) {
   eval.parent(substitute(x <- val))
 }

> dat2 = data.frame(c1 = 101:150, VAR1 = 151:200)
> set2(dat2[["VAR1"]], 1:50)
> str(dat2)
'data.frame':   50 obs. of  2 variables:
 $ c1  : int  101 102 103 104 105 106 107 108 109 110 ...
 $ VAR1: int  1 2 3 4 5 6 7 8 9 10 ... 
```

# python - 如何将两个矩阵作为输入

> ID：15670194
> 
> 赞同：0
> 
> 时间：2013-03-27T21:50:04.517
> 
> 标签：python, matrix, addition

在这段代码中，我想找到矩阵的添加。`A+B`

```
[[x + y for x,y in zip(w,v)] for w,v in zip(A,B)] 
```

当我运行程序并在 python shell 中编写时，`A+B`答案是 [[7, 4], [5, 0], [4, 4], [2, 2], [-3, 3], [- 2, 4]]

答案实际上应该是`[[9,6],[2,3],[2,8]]`

我需要在程序中集成什么，以便调用的 Python 函数`def addition (A,B)`将两个矩阵作为输入并返回两个输入的相加作为结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:52:02.520

或者，如果您不害怕嵌套列表推导式，您可以使用单行代码来做到这一点

```
C = [[x + y for x,y in zip(w,v)] for w,v in zip(A,B)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:11:58.293

如果要重载`+`矩阵的运算符，则必须将二维列表包装到 class 和`def`method`__add__`中。例如（我使用你的加法功能）：

```
>>> class Matrix(object):
    @staticmethod
    def addition (A, B):
        d=[]
        n=0
        while n < len(B):
            c = []
            k = 0
            while k < len (A[0]):
                c.append(A[n][k]+B[n][k])
                k=k+1
            n+=1
            d.append(c)
        return d
    def __init__(self,lst):
        self.lst=lst
    def __add__(self, other):
        return Matrix(Matrix.addition(self.lst, other.lst))
    def __repr__(self):
        return str(self.lst)

>>> A=Matrix([[7,4], [5,0], [4,4]])
>>> B=Matrix([[2,2], [-3,3], [-2, 4]])
>>> A+B
[[9, 6], [2, 3], [2, 8]] 
```

# rvm - rvm env 错误导致连续的“无法识别的命令行标志”错误消息

> ID：15670206
> 
> 赞同：0
> 
> 时间：2013-03-27T21:50:57.910
> 
> 标签：rvm

今天早些时候，在尝试解决问题时，我运行了这个命令。

rvm env --path--

这显然将我的环境变量设置为路径。

现在几乎每个 rvm 命令都会打印出来

无法识别的命令行参数 --path--

我该如何纠正？

我想恢复到 /home/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby，或撤消此更改。

让 rvm 和 openssl 和 PostGres 在这台 Ubuntu 机器上一起工作需要做很多工作，所以我更喜欢一两行修复来重新安装所有东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:57:39.680

尝试：`unset rvm_error; rvm-restart`，还请确保将此错误报告给 RVM => [https://github.com/wayneeseguin/rvm/issues](https://github.com/wayneeseguin/rvm/issues)

# html - 当浏览器不是 100% 大小时，width+borders 的总和！= row2 的宽度

> ID：15670207
> 
> 赞同：0
> 
> 时间：2013-03-27T21:51:00.350
> 
> 标签：html, css, formatting

行以 100% 排列，但在缩放时关闭（IE 是唯一能做到这一点的……看图）

问题再现@ [http://jsfiddle.net/rAQnE/](http://jsfiddle.net/rAQnE/)

```
<div class="col1">one</div><div class="col2">two</div><div class="col2">three</div>
<div class="BoxUnder">under</div> 
```

css

```
.col1, .col2{
    display: inline-block;    
    border: 1px solid #a2a2a2;
    background: #ebebeb;
}
.col1 {
    width: 44px;
}
.col2{
    width: 60px;
}
.BoxUnder { 
    width: 168px;
    border: 1px solid #a2a2a2;
    background: #e5e5e5;
} 
```

我花了太多时间在这上，因为它只是 +/-1 像素。有人对此有解决方案吗？

# c# - LinkLabel 边框颜色

> ID：15670209
> 
> 赞同：2
> 
> 时间：2013-03-27T21:51:13.113
> 
> 标签：c#, winforms

我正在使用`LinkLabel`，并且想将边框设置为红色。我将`BorderStyle`to`FixedSingle` 和 the `ForeColor`to 设置为红色，但只有文本是红色的，边框仍然是黑色的。

如果我对`Label`控制做同样的事情，我会得到边框和文本为红色，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:04:15.537

设置`BorderStyle`并`None`绘制自己的。

```
private void linkLabel1_Paint(object sender, PaintEventArgs e)
{
    if (linkLabel1.ForeColor == Color.Red)
        ControlPaint.DrawBorder(e.Graphics, linkLabel1.DisplayRectangle, linkLabel1.ForeColor, ButtonBorderStyle.Solid);
    else
        ControlPaint.DrawBorder(e.Graphics, linkLabel1.DisplayRectangle, Color.Black, ButtonBorderStyle.Solid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:23:23.967

LinkLabels 并没有真正的边框颜色属性，但您可以挂接到 OnPaint 事件并绘制您自己的边框。[windows-tech.info](http://www.windows-tech.info/3/7e4d3cb98a7b2b1b.php)上有显示如何执行此操作的代码。

正如他们在那里提到的，如果您打算重新使用它，您可以从 LinkLabel 控件派生一个新控件。那时您甚至可以添加“CustomBorderColor”属性并使用它。未设置的颜色显示为空，所以我会选择默认透明的颜色。像这样：

```
using System.Drawing.Color;
private Color m_CustomBorderColor = Color.Transparent;

public Color CustomBorderColor
{
    get { return m_CustomBorderColor; }
    set { m_CustomBorderColor = value; }
} 
```

# php - 如何从多维数组中获取另一个键的对应键？

> ID：15670210
> 
> 赞同：1
> 
> 时间：2013-03-27T21:51:16.770
> 
> 标签：php, arrays, multidimensional-array, foreach

我有一个以下格式的多维数组：

```
$array = array (
  0 => 
    array (
      'date' => '2013-03-25',
      'name' => 'Bob',
      'time' => '11'
    ),
  1 => 
    array (
      'date' => '2013-03-25',
      'name' => 'Brian',
      'time' => '13'
    ),
  2 => 
    array (
      'date' => '2013-03-26',
      'name' => 'Jack',
      'time' => '14'
    ),
  3 => 
    array (
      'date' => '2013-03-26',
      'name' => 'Bob',
      'time' => '14'
    )
); 
```

我正在尝试获取每个日期的名称和相应的时间。我使用以下方法获得了名称：

```
$array2 = array();
    foreach($array as $item) {
    $array2[$item['date']][] = $item['name'];
    } 
```

然后使用：

```
foreach($array2[$date] as $name) 
```

对返回的名称运行查询。但我不确定如何为第二个 foreach 循环中的每个“名称”键获取相应的“时间”键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:55:56.647

为什么您不想同时存储`name`和存储`time`每个`date`密钥？

```
$array2 = array();
foreach ($array as $item) {
  $array2[$item['date']] []= array($item['time'], $item['name']);
} 
```

您可以使用以下代码获取姓名和时间：

```
foreach ($array2 as $row) {
  $name = $row[0];
  $time = $row[1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:57:34.873

你可以试试

```
$list = array();
foreach ( $array as $k => $item ) {
    $list[$item['date']][] = array(
            $item['name'],
            $item['time']
    );
}

foreach ( $list as $date => $data ) {
    echo $date, PHP_EOL;
    foreach ( $data as $var ) {
        list($name, $time) = $var;
        echo $name, " ", $time, PHP_EOL;
    }
    echo PHP_EOL;
} 
```

输出

```
2013-03-25
Bob 11
Brian 13

2013-03-26
Jack 14
Bob 14 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:57:43.013

尝试以下操作：

```
foreach($array as $item) {
   $array2[$item['date'][] = array('name' => $item['name'], 'time' => $item['time']);
}

foreach($array2[$date] as $name) {
   echo $name['name'] . ' => ' . $name['time'] . "\n";
} 
```

# actionscript-3 - 具有多个图像的 as3 动画

> ID：15670214
> 
> 赞同：0
> 
> 时间：2013-03-27T21:51:36.153
> 
> 标签：actionscript-3, animation, flashdevelop

我只有 3 张图像用于为奔跑的动物制作动画：1：动物站立 2：大步/跳跃的动物 3：仰卧的动物死了

目前，我将它们作为精灵嵌入到主类中，并在我想要一个而不是另一个时更改它们的 .alpha 属性 2\. 有没有更好的方法来做我正在做的事情？令人讨厌的事情之一是单独更新每个精灵的属性。拥有一个对象并能够更改对象上的图像将是理想的，因此我只需要更改一个对象的属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:41:40.217

为此，最好在自己的类中处理您的动画！像这样，假设你的动物是一匹马，所以这就是我所说的类

```
package  {

    import flash.display.Sprite;

    public class Horse extends Sprite{

        private var holder:Sprite = new Sprite();

        public function Horse() {

            var img1:Image1 = new Image1();// ur images from library
            var img2:Image2 = new Image2();
            var img3:Image2 = new Image3();

            holder.addChild(img1);
            holder.addChild(img2);
            holder.addChild(img3);

            addChild(holder);
            setImage(0);// set 1st image visible

        }   

        public function setImage(nr:uint):void
        {
            for(var i:int = 0; i < holder.length;i++;)
                holder[i].visible = false;

            holder[nr].visible = true;
        }
    }

} 
```

那么你会像这样使用它！

```
var horse:Horse = new Horse();
addChild(horse);
horse.x = 25; 
horse.y = 25; // move the whole object(all 3 images)
horse.setImage(2);// or to whatever frame you need 
```

使用可见属性而不是 alpha 值。如果你只是将 alpha 设置为 0，它仍然会被渲染并花费 cpu。如果将 visible 设置为 false 则不会呈现！

编辑：
正如 Amy 指出的那样，虽然最快的方法是 BitmapData Frame Assignment，但在这里可以使用 blitting！在这里，您将所有帧作为 BitmapData 保存在 Vector 中，您可以从 SpriteSheet 加载它，并将新的 BitmapData 分配给您的 Bitmap，而不是使用 copyPixels。它比 blitting 更快，并且您仍然可以使用所有内置方法！

# php - 当数组是Javascript更新时如何更新PSQL数据库？

> ID：15670215
> 
> 赞同：0
> 
> 时间：2013-03-27T21:51:39.987
> 
> 标签：php, javascript, database, arrays, psql

我正在尝试结合 PHP 和 Javascript，以便从 psql 中的 db 获取数据。到目前为止，我能够获得我需要的列，并设置一个等于该数据的数组。然后我将 js 数组等同于这个数组。这可以在以下代码中看到：

```
<?php

   // attempt a connection
 $dbh = pg_connect("host=localhost dbname=db user=postgres");
 if (!$dbh) {
     die("Error in connection: " . pg_last_error());
 }       

 // execute query
 $sql = "SELECT * FROM dataset";
 $result = pg_query($dbh, $sql);
 if (!$result) {
     die("Error in SQL query: " . pg_last_error());
 }       

 $arr = pg_fetch_all_columns($result, 1);

 pg_free_result($result);       

 // close connection
 pg_close($dbh);

?> 
```

这是js部分。

```
var data = <?php echo json_encode($arr); ?>; 
```

我有一个函数，它向数组添加一个数据点。我可以将它添加到 js 中的“数据”数组中，但是如何让它反映在数据库中？

提前致谢 ：）

# android - 将android重点放在触摸上？

> ID：15670219
> 
> 赞同：1
> 
> 时间：2013-03-27T21:51:47.493
> 
> 标签：android, keyboard, focus, android-edittext

我有这个问题：在我的应用程序中，当用户点击 EditText 栏时，会弹出键盘。在那之后，就不可能摆脱键盘了。按下后退按钮时，整个应用程序将关闭。我如何确保当用户点击其他对象（不是 EditText）时，键盘将被移除？或者至少，如何通过点击后退按钮来隐藏键盘？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:10:30.417

在 EditText 的 xml 中，当在键盘上按 enter 时，这将使键盘消失

```
 android:imeOptions="actionDone" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:51:57.860

您可以通过在 Activity 中覆盖`onBackPressed`并使用以下代码来简单地隐藏键盘：

```
InputMethodManager inputMethodManager = (InputMethodManager)getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
inputMethodManager.hideSoftInputFromWindow(anyView.getWindowToken(), 0); 
```

请注意，**anyView**可以是附加到当前窗口的任何视图。

*[您可以在我的名为Magic Annotator](https://play.google.com/store/apps/details?id=com.nbempire.android.magicannotator)*的应用程序中看到它正在运行。见方法[hideSoftKeyboard()](https://github.com/barriosnahuel/magicAnnotator/blob/master/src/main/java/com/nbempire/android/magicannotator/util/android/view/ScoreEditorView.java)

# python - 使用 Pool.map 显示函数的进度

> ID：15670224
> 
> 赞同：1
> 
> 时间：2013-03-27T21:52:05.137
> 
> 标签：python

我正在编写一个解析多个日志的脚本。最初它没有使用多处理。在 a 函数中，我让它使用 stdout.write 以百分比显示当前进度。

当我切换到使用 multiprocessing.Pool.map 时，进度就在彼此之上。该脚本本身可以正常工作，它可以完成工作，我需要它正确显示到终端。

```
PROGRESS: 1 of 119          PERCENT: 1%          FILE: file1.txt 
```

所以有时它会显示 file1 有时是 file2 有时是 file3...等等。

我希望它显示

```
PROGRESS: 1 of 119          PERCENT: 1%          FILE: file1
PROGRESS: 1 of 119          PERCENT: 1%          FILE: file2
PROGRESS: 1 of 119          PERCENT: 1%          FILE: file3 
```

这是我的第一篇文章，所以请原谅我缺乏经验。下面是部分代码。

```
 def parseFiles(x):
       try:
           for stuff in stuffs:
              stuff += stuff
           progress = "PROGRESS: %s of %s" %(csvlist[3], getMaxSends(x))
           percent = "PERCENT: {0:.0f}%".format(float(csvlist[3])/float(getMaxSends(x)) * 100)
           curFile = "FILE: %s" %x
           sys.stdout.write("          %s          %s          %s\r" %(progress, percent, curFile))
           sys.stdout.flush()

        except:
           pool.terminate()
    try:
        pool = multiprocessing.Pool(processes=4)
        pool.map(parseFiles, sendfiles)

        pool.terminate()
        os.chdir(args.directory[0])

    except:
        pool.terminate()
        os.chdir(args.directory[0])
        subprocess.call("rm *_send *_recv", shell = True)
        subprocess.call("rm *.csv", shell = True)
        print "\n\nSTATUS: FAILED"
        print "I TOLD YOU THIS WOULD ALL END IN TEARS\n" 
```

希望有人可以提供帮助。谢谢

# java - 用于获取电影持续时间的 Java API 或 3rdparty

> ID：15670226
> 
> 赞同：3
> 
> 时间：2013-03-27T21:52:13.843
> 
> 标签：java, video, xuggler, vlcj

我有很多视频文件。所有类型都不同（mkv、avi、mp4、flv 等）。我想迭代这些文件并获取电影的持续时间。

目前我使用 vlcj 没问题，但是代码让我有点困惑。在获得长度之前，我必须播放媒体。然后停止媒体。这很奇怪，不是吗。

我能以某种方式做得更好吗？我听说过 xuggler，但开发已经停止。我需要一个仍然存在的 API 或 3rdparty 组件。而且我不想在播放之前播放媒体:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T18:00:29.347

最后，我用 Xuggle 解决了这个问题。设置后我必须添加这些行，它工作正常：

```
IContainer container = IContainer.make();
    if (container.open(movie, IContainer.Type.READ, null) < 0) {
        throw new RuntimeException("Cannot open '" + movie + "'");
    }

    logger.info("# Duration (ms): " + ((container.getDuration() == Global.NO_PTS) ? "unknown" : "" + container.getDuration() / 100));
    logger.info("# File size (bytes): " + container.getFileSize());
    logger.info("# Bit rate: " + container.getBitRate()); 
```

顺便说一句，设置很糟糕，但最后......让这个代码工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:10:05.570

> 请参阅 Java 媒体框架。
> 
> [http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html)

在这里您还可以找到其他类似项目的链接[http://en.wikipedia.org/wiki/Java_Media_Framework](http://en.wikipedia.org/wiki/Java_Media_Framework)

# encoding - ASN.1 中的二进制补码未对齐 PER

> ID：15670228
> 
> 赞同：1
> 
> 时间：2013-03-27T21:52:21.747
> 
> 标签：encoding, asn.1

我最近不得不使用 ASN.1 Unaligned PER 编码数据。我在理解数据类型`UPER`中的二进制补码整数编码如何时遇到问题。`SEQUENCE`

它似乎错误地翻转了最重要的位（单词选择不当）。对于正整数，前导位是`1`，对于负整数，它是`0`. 我认为这里有一种疯狂的方法，但经过一天的工作，我似乎无法将其从 ITU-T 标准中挖掘出来，我也无法自己弄清楚。我怀疑这是因为它们`INTEGER's`被包裹在`SEQUENCE`类型中，但我不明白它为什么会这样做。我应该指出，我对 ASN.1 的理解*非常有限*。

一个简单的例子，假设我有以下架构

```
BEGIN
    FooBar ::= SEQUENCE {
      Foo INTEGER (-512..511),
      Bar INTEGER (-512..511)
    }
END 
```

我将以下内容编码为`Unaligned PER`

```
test FooBar ::= 
{
   Foo 10,
   Bar -10 
} 
```

编码为十六进制和二进制字符串的结果以及分别的预期值。

```
HEX:           0x829F60
BIN:           100000101001111101100000

EXPECTED HEX:  0x02BF60
EXPECTED BIN:  000000101011111101100000 
```

关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:51:13.723

“Foo”和“Bar”应该是小写的。

您认为最重要的位被“翻转”的印象源于您在 FooBar 的定义中对 foo 和 bar 的最小和最大允许值的特定选择。

在您上面的定义中，foo 的允许值范围是 -512..511。在PER中，foo的编码占用10位。最小允许值 (-512) 编码为 0（10 位）。下一个允许值 (-511) 编码为 1（10 位）。等等。

如果按以下方式定义 FooBar2

FooBar2 ::= SEQUENCE { foo2 INTEGER (1234..5678), bar2 INTEGER (1234..5678) }

foo2 将被编码为 13 位（刚好足以容纳 0 到 4444=5678-1234 之间的值），值 1234 被编码为 0000000000000，值 1235 被编码为 0000000000001，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T13:32:43.923

如果您遵循 X.691 中的规则，您最终将获得 11.5.6（来自 13.2.2）。这会将这些受约束的整数值编码为与下限的偏移量，因此将其编码为正值。因此，10 被编码为 522，-10 被编码为 502（分别为十进制）。

*编辑*：有人建议对计算进行澄清。你的下限是-512。由于 10 = -512 + 522，为 10 编码的偏移量为 522。类似地，由于 -10 = -512 + 502，为 -10 编码的偏移量为 502。然后使用 10 位对这些偏移量进行编码。因此，您最终得到：

```
value  offset  encoded bits
-----  ------  ------------
   10     522    1000001010 (522 in binary)
  -10     502    0111110110 (502 in binary) 
```

# javascript - 带有 Twitter Bootstrap 的移动 JavaScript 框架

> ID：15670235
> 
> 赞同：3
> 
> 时间：2013-03-27T21:52:54.010
> 
> 标签：javascript, jquery, jquery-mobile, twitter-bootstrap, iui

在我的一个网站中，我使用 Twitter Bootstrap 2.3。我喜欢它的响应式行为，移动设备中的媒体查询。但它缺乏移动功能（尤其是[链接列表视图](http://view.jquerymobile.com/master/demos/widgets/listviews/#list-linked)）所以我需要使用一个框架来处理我的网站的移动版本。

经过一些研究，我发现 jquery mobile、sensa touch、jqtouch、iui、mobilize.js、zepto 是可能的候选者。

您对移动页面的 javascript 框架/插件有什么建议，可以很好地与 twitter bootstrap 配合使用？

可能的相关问题：
[Bootstrap list view like jqm](https://stackoverflow.com/questions/14093345/bootstrap-list-view-like-jqm)
[twitter-bootstrap vs jquery-mobile](https://stackoverflow.com/questions/9242012/twitter-bootstrap-vs-jquery-mobile)
[Using Bootstrap with jQuery Mobile](https://stackoverflow.com/questions/9599110/using-bootstrap-with-jquery-mobile?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T13:17:09.943

另请阅读：[Twitter Bootstrap 导航栏：[左按钮-- 中心文本-- 右按钮]？二](https://stackoverflow.com/questions/17383644/twitter-bootstrap-navbar-left-button-center-text-right-button-ii/17383645)

我认为我应该可以使用 Twitter 的 Bootstrap (3) 构建移动界面。是的，你是对的（链接的）列表视图会错过。也许先检查[http://getbootstrap.com/components/#list-group](http://getbootstrap.com/components/#list-group)。当然，您需要编写一些代码来处理这些操作。

其他需要考虑的要点：导航和页面结构。jQuery mobile 等框架在一个 url 上提供更多页面，请参阅：http: [//jquerymobile.com/demos/1.0a2/#docs/pages/docs-navmodel.html](http://jquerymobile.com/demos/1.0a2/#docs/pages/docs-navmodel.html)而 sencha 使用 MVC 方法。考虑使用[http://getbootstrap.com/javascript/#tabs](http://getbootstrap.com/javascript/#tabs)（或[http://getbootstrap.com/javascript/#scrollspy](http://getbootstrap.com/javascript/#scrollspy)）来模仿这种结构。

其他示例，请参见：[如何使 JS 水平内容从 px 滑动到 % 响应](https://stackoverflow.com/questions/18176776/how-to-make-a-js-horizontal-content-slide-from-px-to-responsive/18177433)一个带有 TB 的漂亮界面，[@boblet](https://stackoverflow.com/users/318704/boblet)现在非常适合移动设备：http: [//bootply.com/73715](http://bootply.com/73715)。[David Panzarella](https://stackoverflow.com/users/1914389/david-panzarella)用图标开始了一个干净的移动导航栏： [Bootstrap 3 RC2 Navbar with Multiple Collapses](https://stackoverflow.com/questions/18269043/bootstrap-3-rc2-navbar-with-multiple-collapses#comment26813758_18269043)可以在这里找到另一种移动导航结构：[使用 Twitter Bootstrap 2.x 在移动设备上切换侧边栏](https://stackoverflow.com/questions/16871718/toggle-sidebar-on-mobile-device-with-twitter-bootstrap-2-x)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:10:22.797

如果你准备好将 Bootstrap 和其他几个框架混在一起，那么请确保你对 jQuery、JavaScript、CSS 有足够的了解。

每个框架都有自己的强制样式等方式，因此如果您要将多个平台组合在一起，您经常会遇到诸如预期框架的预期样式没有被应用的问题。

我建议你坚持使用 jQuery Mobile。jQuery Mobile 1.3 有很多响应式设计概念。在发行说明本身中，他们提到他们正在努力支持响应式设计。[阅读jQuery Mobile 提供](http://view.jquerymobile.com/1.3.0/docs/intro/rwd.php)的官方文档。这会给你一个良好的开端。

免责声明：我只使用了 Twitter Bootstrap 和 jQuery Mobile。但我听说其他移动框架不如 jQuery Mobile 灵活。还要记住 Sencha touch 与 jQuery Mobile 相比非常快，但对于初学者来说有点难上手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:18:38.230

我会推荐 iUI，因为我正在研究它（嗯嗯），因为它或多或少是一块空的画布，你可以“绘制”任何你想要的东西。JQuery Mobile 或 Sencha 很不错，但它们带有几十个按钮和 UI 元素，您可能不需要网站。如果您想在所有内容都预定义的情况下为您的移动网站提供自定义外观，甚至会变得一团糟。

afaik，Zepto 只是一个轻量级的 JQuery，所以这并不能解决你的链接列表视图问题......

请尝试我的 iUI v2 项目 Emy，您可以在这里尝试： [http](http://www.emy-library.org/demos/) ://www.emy-library.org/demos/ 还有一些错误需要修复，但我已经接近初始版本了。与 iUI 相比的最大区别在于 HTML5 语法、自定义动画、完整文档和 WindowsPhone 支持。 [http://www.emy-library.org/documentation/1.0/getting-started.html](http://www.emy-library.org/documentation/1.0/getting-started.html)

干杯!

# wordpress - 防止轻松下载在 mp3 播放器上播放的 mp3？

> ID：15670238
> 
> 赞同：0
> 
> 时间：2013-03-27T21:53:04.030
> 
> 标签：wordpress, mp3

我在我的网站上设置了 mp3 播放器来播放 mp3。目前，用户可以轻松浏览源代码，搜索“mp3”并下载我网站上的所有音乐。我知道完全阻止坚定的用户下载音乐几乎是不可能的，但我想让普通用户更难。有什么方法可以混淆 mp3 的链接？

相关网站：[http ://boyceavenue.com/music](http://boyceavenue.com/music)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:04:26.840

您没有指定您使用的语言。为了扩展 Marc B 所写的内容，我建议使用 PHP[`http_send_file`](http://php.net/manual/en/function.http-send-file.php)命令以及文件的校验和。

要发送文件，请使用以下命令：

```
$filename = "/absolute/or/relative/path/to/file.ext";
$mime_type = "audio/mpeg"; // See note below
http_send_content_disposition($filename, true);
http_send_content_type($mime_type);
http_throttle(0.1, 2048);
http_send_file($filename); 
```

如果您使用 PHP 5.3.0 或更高版本提供多种类型的文件，您可以通过以下方式确定 mimetype：

```
$filename = "/absolute/or/relative/path/to/file.ext";
$finfo = finfo_open(FILEINFO_MIME_TYPE); 
$mime_type = finfo_file($finfo, $filename);
finfo_close($finfo); 
```

计算校验和很简单。只需使用[`md5_file`](http://php.net/manual/en/function.md5-file.php).

那么，你能用校验和做什么呢？

好吧，您可以创建一个相互交叉引用的校验和和文件名数组。也就是说，您将校验和包含在文件的链接中，但有一个小例程来查找校验和并传递 mp3 文件。您也可以在数据库中执行此操作。你也可以像一些应用程序一样，根据它们的校验和（`music/3/3a/song.mp3`校验和为 3a62f6 或其他）将文件存储在目录结构中。

如果您不关心文件名被破坏，您可以使用文件名的校验和保存文件。这可以在上传时（如果您的文件正在上传）或通过批处理脚本（使用 CLI）完成。

您应该做的另一件事是放置一个默认文档（index.php 或其他），告诉人们到别处寻找。同时禁用浏览目录。如果只有极少数人需要访问，您还可以在目录上输入密码，从而需要登录才能访问文件。

# javascript - 如何使用 javascript 正则表达式来验证城市名称？

> ID：15670239
> 
> 赞同：3
> 
> 时间：2013-03-27T21:53:10.760
> 
> 标签：javascript, jquery, regex

`var cityRegex = /^[a-zA-z] ?([a-zA-z]|[a-zA-z] )*[a-zA-z]$/;`是我尝试过的。

但是当您输入像“圣彼得堡”这样的城市时，它会出错。

更新：似乎几乎是一个失败的原因。有太多奇怪名字的城市有数字、破折号、撇号、句号等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:42:02.937

如果评论不够清楚，这不是可以通过正则表达式实际验证的东西。正确的做法是接受将输入一些不良数据并继续前进。如果你真的需要城市存在并且你认为这个[javascript 验证](https://stackoverflow.com/questions/10460711/to-what-extend-should-i-rely-on-client-side-validation)会帮助你，那你就大错特错了。

在回答您的问题时，这里的正确验证是：

`.*`

# iframe - Tumblr 照片集自定义宽度？

> ID：15670240
> 
> 赞同：1
> 
> 时间：2013-03-27T21:53:15.417
> 
> 标签：iframe, size, tumblr

我试图让 Tumblr 的照片集显示为 640 像素宽。

我正在为我的博客[http://assemblyradio.tumblr.com/修改](http://assemblyradio.tumblr.com/)[CATCHING ELEPHANT](http://safe.txmblr.com/theme/preview/7285)

我正在使主题的整个帖子部分更宽。但是，我似乎无法让照片集显示为 640 像素宽。

我希望这些布景能够以 Tumblr 的设计和精美的布局显示出来，因为它们看起来很棒。因此，这个解决方案不是我想要的： [Change default photoset size on tumblr](https://stackoverflow.com/questions/11530132/change-default-photoset-size-on-tumblr)

我从这里尝试过 java 脚本： [Tumblr 主题开发：用于 Photoset 帖子的 Square-75px 照片](https://stackoverflow.com/questions/9513061/tumblr-theme-dev-square-75px-photos-for-photoset-posts)

在这里： [更改 tumblr 上的默认照片集大小](https://stackoverflow.com/questions/11530132/change-default-photoset-size-on-tumblr)

第二个脚本有点工作，但图像被裁剪掉=（

如果我添加一些自定义 CSS，我可以将 iframe 设为 640px 宽，但高度不会相应调整！

每次我想我在 Chrome 的 web 开发人员工具上找到它时，我似乎无法在 Tumblr 的自定义 CSS 中获得正确的代码。我想使用这个选择器小工具 [[如何在 Chrome 中获取 CSS 选择器？](https://stackoverflow.com/questions/4500572/how-can-i-get-the-css-selector-in-chrome]) 可以帮助我准确定位我应该编辑的 CSS（看看是否有帮助），但它不能告诉我元素的路径，可能是因为它是一个 iframe。

有谁知道如何获得自定义照片集宽度？或者如何让 iframe 高度自动调整？或者如何找到一个复杂的类路径？

任何帮助将非常感激。我只想看看我可爱的小猫。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:35:05.390

Tumblr 的局限性也一直困扰着我，所以我编写了一个 jQuery 插件，用于使用 Tumblr 风格的完全响应式 Photoset 布局。它还包括每张照片的 EXIF 和标题数据的额外信息（可以打开/关闭）。

[https://github.com/PixelUnion/Extended-Tumblr-Photoset](https://github.com/PixelUnion/Extended-Tumblr-Photoset)

# ruby - 一次性将具有 has_one 关联的父对象保存到多态子对象会出错

> ID：15670244
> 
> 赞同：3
> 
> 时间：2013-03-27T21:53:35.987
> 
> 标签：ruby, ruby-on-rails-3, activerecord, nested-attributes, polymorphic-associations

我正在尝试一次性保存父对象（报告）和关联的多态子对象（附件） - 关联是“has_one”。

我在 Report 上使用“.create”方法，其中包含子项的嵌套内容的 params 哈希，但出现错误“验证失败：可附加的附件不能为空”。

我所拥有的是（简化）：

父模型：

```
Class Report
  has_one :attachment, as: :attachable, :dependent => :destroy

  attr_accessible :refdate, :link_name, :type_name, :attachment_attributes

  accepts_nested_attributes_for :attachment 
```

儿童型号：

```
Class Attachment
  belongs_to :attachable, polymorphic: true

  attr_accessible :file

  validates_presence_of :attachable
  validates_presence_of :file 
```

控制器：

```
ReportsController
  def create
    @report = Report.create!(params[:report])
  end 
```

查看（哈姆）：

```
= form_for @report, html: { multipart: true } do |f|
  = f.select :type_name
  = f.text_field :link_name
  = f.text_field :refdate
  = f.fields_for :attachment_attributes, html: { multipart: true } do |p|
    = p.file_field :file
  = f.submit 
```

调整控制器我可以实现首先将父级保存到数据库，然后保存附件（这里`attachable`由 Rails 自动填充），但我想避免这个两步保存过程，以确保两者得救了，或者两者都没有。

有人有想法吗？

谢谢！

# arrays - TypeScript 回调数组

> ID：15670245
> 
> 赞同：8
> 
> 时间：2013-03-27T21:53:41.380
> 
> 标签：arrays, callback, typescript

你将如何在 TypeScript 中声明一个回调数组？

单个回调如下所示：

```
var callback:(param:string)=>void = function(param:string) {}; 
```

所以一个回调数组应该是这样的：

```
var callback:(param:string)=>void[] = []; 
```

但是，这会产生歧义，因为我可能指的是回调数组，或者是返回空数组的单个回调。

在 TypeScript 操场上，它认为它是一个空数组。所以，我的下一个想法是将它用括号括起来：

```
var callback:((param:string)=>void)[] = []; 
```

但这也行不通。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T22:30:04.450

您需要使用完整的类型文字语法形式，如下所示：

```
var callback:{(param:string): void;}[] = []; 
```

这有点丑陋；如果你喜欢，你可以先给它起个名字：

```
interface fn {
    (param: string): void;
}
var callback2: fn[] = []; 
```

# javascript - window.opener 是否与 target="_blank" 锚标签一起使用？

> ID：15670252
> 
> 赞同：0
> 
> 时间：2013-03-27T21:54:34.540
> 
> 标签：javascript, html

假设我通过将锚标记的目标设置为“_blank”来为同一域上的网站打开一个新窗口。有没有办法访问打开的 windows DOM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-08T17:40:22.460

我意识到这是一个老问题，但对于任何可能偶然发现它的人来说，似乎在使用 target="_blank" 锚标记时 window.opener 是在某些浏览器中默认定义的，而不是在其他浏览器中定义的（特别是 Safari 和 Firefox 有一个空window.opener）。但是，如果将属性 rel="opener" 添加到锚标记，它将正确填充 window.opener。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-29T16:17:49.997

您可以在阅读这篇*文章时更好地理解 window.open，但我对它的了解有多少，但请记住，taget="_blank" 它是 HTML 的一个属性，而 window.open 它是一个 JavaScript 原型解决方案，您可以在其中使用创建一个函数来为您的站点添加一些功能。

* [https://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)

# php - 单个管理网站的安全性？

> ID：15670253
> 
> 赞同：2
> 
> 时间：2013-03-27T21:54:44.297
> 
> 标签：php, security, admin

几周前，我决定学习 PHP 并从头开始制作博客。大多数功能都已完成，所以现在我正在关注安全性，特别是管理区域。就目前而言，在这个管理区域中，我将管理（数据库）内容。我一直在阅读许多有关安全性的文章，例如：

[基于表单的网站身份验证权威指南](https://stackoverflow.com/questions/549/the-definitive-guide-to-forms-based-website-authentication)

[http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL](http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL)

[http://www.wikihow.com/Create-a-Secure-Session-Managment-System-in-PHP-and-MySQL](http://www.wikihow.com/Create-a-Secure-Session-Managment-System-in-PHP-and-MySQL)

[保护网站管理部分的最佳做法是什么？](https://stackoverflow.com/questions/2848134/what-are-best-practices-for-securing-the-admin-section-of-a-website)

[网站管理部分 - 安全性？](https://stackoverflow.com/questions/3400357/admin-section-for-website-security?rq=1)

[保护访问多个 php 文件的管理页面](https://stackoverflow.com/questions/4965825/securing-my-admin-page-that-accesses-several-php-files)

和一堆关于 SSL 的谷歌文章

基本上，我只是无法准确理解管理登录页面和管理区域需要多少安全性。共识似乎是我应该使用 SSL，但这对我来说似乎有点矫枉过正，因为这是一个最初只有 0 个访问者的全新网站。

此外，我现在开始问为什么我什至需要一个管理区域。如果我是唯一一个运营博客的人，为什么我不能只管理 phpmyadmin 的内容？如果没有管理区域（并且不需要用户注册发表评论），我不应该需要 SSL。不会有任何敏感信息的共享。在这种情况下，甚至没有管理部分不会让我的生活更轻松吗？

因此，为了澄清，我只是想了解对于一个由单个管理员操作网站的全新网站，以及该网站是否有管理员登录页面和管理员登录区域，适当的安全保护级别是多少。显然，我将采取措施防止 SQL 注入和暴力攻击，但保护敏感数据（如管理员密码）的适当措施是什么？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:59:18.813

考虑一下您将使用此安全系统保护哪种信息。接下来想想如果有人突破你会失去什么。另一方面，花时间编写和实现非常好的安全性。问问自己什么更重要？仅此而已 =)

# batch-file - 批处理文件将逗号分隔为固定长度

> ID：15670257
> 
> 赞同：0
> 
> 时间：2013-03-27T21:54:58.307
> 
> 标签：batch-file, text-files

如何将文本文件转换为固定长度文件：

这是我的代码尝试和示例文本文件。

```
del answer.txt

@ECHO on
@setlocal ENABLEDELAYEDEXPANSION
cls
set space=  
set var

:: loop through records
for /f "tokens=1-6 skip=1 delims=," %%a in (comma3.txt) do (
echo tokens %%a %%b %%c %%d %%e %%f
set var=%%a%space%%%b%space%%%c%space%%%d%%e%%f
echo var %var%
echo %var% >> answer.txt
)
endlocal
pause 
```

输入：

```
1116559,P1303251287,20130325225906CD,13013822,1,0000
1104220,P1303250282,20130325070119CD,,1,0000
1064743,P1303251094,20130325191600CD,,0,0000
1100819,P1303250369,20130325091722CD,,0,0000
1101405,P1303250051,20130325010740CD,,0,0000 
```

期望的输出：

```
1116559   P1303251287   20130325225906CD   13013822   1   0000
1104220   P1303250282   20130325070119CD              1   0000
1064743   P1303251094   20130325191600CD              0   0000
1100819   P1303250369   20130325091722CD              0   0000
1101405   P1303250051   20130325010740CD              2   0000 
```

笔记：

该`set var`命令不存储变量。

帮助非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:00:26.763

这是解决您所有问题的单线器。:)

```
>answer.txt powershell "Get-Content comma3.txt | %{'{0,-10}{1,-14}{2,-19}{3,-11}{4,-4}{5}' -f $_.split(',')}" 
```

如果您将其放入批处理脚本中，请务必在该行中替换`%`为。`%%`

**answer.txt 的内容：**

```
1116559   P1303251287   20130325225906CD   13013822   1   0000
1104220   P1303250282   20130325070119CD              1   0000
1064743   P1303251094   20130325191600CD              0   0000
1100819   P1303250369   20130325091722CD              0   0000
1101405   P1303250051   20130325010740CD              0   0000 
```

**无力的解释：**

对 powershell 更熟悉的人可能会比我更好地解释这一点，因为我需要大量的试验和错误来编写该行。但基本上，据我了解，它的含义如下：

*   将 powershell 命令的输出发送到`answer.txt`
*   读`comma3.txt`
*   the`%`是简写`for each line`
*   返回类似于用于字符串参数的`printf "%-10s %-14s %-19s etc."`格式化`line.split(",")`行

可能有一个`Write-Content`用于 powershell 的命令，但是让命令控制台重定向 powershell 的输出更容易。如果您正在处理非常大的 csv 文件并且此命令运行速度太慢，`Write-Content`则可能值得研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:37:58.913

```
@ECHO on
@setlocal ENABLEDELAYEDEXPANSION
cls

:: loop through records
for /f "tokens=1-6 delims=," %%a in (comma3.txt) do (
set var=%%a %%b %%c %%d %%e %%f
REM  The double comma is a problem without a good solution
REM     so if the last token is null, drop it and indent. 
if '%%f' == '' set var=%%a %%b %%c          %%d %%e
REM  !'s should be used with ENABLEDELAYEDEXPANSION
echo !var! >> answer.txt
)
endlocal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:25:20.860

```
@ECHO off
SETLOCAL
set columnsizes=10 14 19 11 4 4
DEL answer.txt 2>nul

:: loop through records
for /f "delims=" %%a in (comma3.txt) do (
SET "result="
SET line=%%a
CALL :process %columnsizes%
)
ECHO.======================================
TYPE answer.txt
ECHO.======================================
PAUSE 
GOTO :eof

:process
REM IF "%1"=="" echo %result%>>answer.txt ECHO %result%&GOTO :eof
IF "%1"=="" echo %result%>>answer.txt&GOTO :eof
SET "column="
:colloop
IF NOT DEFINED line GOTO endcol
SET ch1=%line:~0,1%
SET line=%line:~1%
IF NOT "%ch1%"=="," SET column=%column%%ch1%&GOTO colloop
:endcol
SET column=%column%                           x
CALL SET result=%result%%%column:~0,%1%%
SHIFT
GOTO process 
```

这应该可以解决问题。

循环依次`FOR`分配每一行的内容。`line`该例程`:process`分析一行并逐个字符地构建每一列，直到找到一个逗号。然后它会在行尾添加大量空格 - “x”将在下一个语句中被删除，并且在行上显示尾随空格有点困难（并且一些编辑器会自动将它们丢弃）

该`CALL SET`行使用解析器特性。假设`result`当前是`abcd`并且`column`是`123 ..manyspaces.. x`并且 %1 是 5。解析器通过将任何 %var% 替换为其当前值来处理该行，然后调用它，所以调用的是

```
SET result=abcd  +%+%column:~0,5+% 
```

当然没有 +s - 他们将显示解析器如何查看代码。

这样可以巧妙地去掉不需要的尾随空格和 x in `column`; SHIFT 从提供的参数列表中删除第一个元素，`:process`然后处理下一列，直到全部完成并且没有剩余参数。写出来`result`，我们就完成了...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-02T16:30:18.860

扩展 Rojos 的答案，我创建了一个使用第 1 行列宽的 excel 宏，将文件导出为 csv，调用的 powershell 转换为空格分隔，如下所示：

```
runCommand = "echo Please Wait . . . " 
```

'更改为正确的驱动器和目录：

```
runCommand2 = Left(SaveDirectory, 2) <br>
runCommand3 = "cd " & SaveDirectory<br> 
```

'删除' excel 可能插入的标记

```
 runCommand7 = "powershell ""(get-content '" & SaveDirectory & "\" &     SaveName & ".csv" & "') -replace('""""','') | out-file '" & SaveDirectory & "\" & SaveName & "2.csv'""" 
```

'遍历电子表格第一行的单元格以创建具有正确列宽的 powershell 命令

```
runCommand4 = "powershell ""Get-Content '" & SaveName & "2.csv'" & " | %{'"

x = 1
c = 0

Do Until Cells(1, x) = ""
    runCommand4 = runCommand4 & "{" & c & ",-" & Cells(1, x).Value & "}"
    x = x + 1
    c = c + 1

Loop

runCommand4 = runCommand4 & "' -f $_.split(',')} | Out-File Answer2.txt"""

runCommand5 = "cls"
runCommand6 = "pause" 
```

删除具有列宽的行，以便它们不会被导出：

```
Rows("1:1").Select
Selection.Delete Shift:=xlUp 
```

查找并替换任何逗号和制表符，因为这些可能会导致问题：

```
Cells.Replace What:=",", Replacement:="", LookAt:=xlPart, SearchOrder:= _
    xlByRows, MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False
Cells.Replace What:=Chr(9), Replacement:="", LookAt:=xlPart, SearchOrder:= _
    xlByRows, MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False 
```

将工作簿另存为 CSV：

```
ActiveWorkbook.SaveAs Filename:=SaveDirectory & "\" & SaveName, FileFormat _
    :=xlCSV, CreateBackup:=False 
```

将所有命令传递给 cmd

```
Call Shell("C:\Windows\System32\cmd /c" & runCommand & "&" & runCommand2 & "&" & runCommand3 & "&" & runCommand7 & "&" & runCommand4 & "&" & runCommand6, vbNormalFocus)

ActiveWorkbook.Close 
```

如果您将 csv 导入 excel，这可能是一个方便的解决方案。

# javascript - 如何用 JS 替换 Dom 元素并包含 id 和 JS 函数？

> ID：15670261
> 
> 赞同：2
> 
> 时间：2013-03-27T21:55:11.110
> 
> 标签：javascript, dom

这是对这个问题的跟进：
[如何使用 Javascript 替换 DOM 元素？](https://stackoverflow.com/questions/843680/how-to-replace-dom-element-in-place-using-javascript)

我不是OP，但我面临着类似的情况。最初的问题是“如何`anchor`用使用 Javascript 替换元素`span`。给出的答案（谢谢[Bjorn Tipling](https://stackoverflow.com/users/66475/bjorn-tipling)）是使用`replaceChild()`，以下示例：

```
<html>
<head>
</head>
<body>
  <div>
    <a id="myAnchor" href="http://www.stackoverflow">StackOverflow</a>
  </div>
<script type="text/JavaScript">
  var myAnchor = document.getElementById("myAnchor");
  var mySpan = document.createElement("span");
  mySpan.innerHTML = "replaced anchor!";
  myAnchor.parentNode.replaceChild(mySpan, myAnchor);
</script>
</body>
</html> 
```

我的后续行动是：如何向被替换的 DOM 元素添加/插入一个 id（例如， `"xyz"`）和一个函数（例如， ）？`onmouseout='doWhatever(this)'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:57:50.947

```
mySpan.id = "abcd123";
mySpan.onclick = function () { console.log(this.id + " was clicked"); }; 
```

将 HTML 元素缓存到变量后，您可以继续使用该变量来处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:58:04.213

您可以通过简单地设置来添加 id 属性：

```
mySpan.id = "xyz"; 
```

你可以像这样附加一个事件：

```
mySpan.onmouseout = function() {
    doWhatever(this);
} 
```

我会避免在动态创建 DOM 元素时设置事件属性。以编程方式分配事件处理程序是正确的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:59:50.923

用这个：

```
<script type="text/JavaScript">
  var myAnchor = document.getElementById("myAnchor");
  var mySpan = document.createElement("span");
  mySpan.appendChild(document.createTextNode("replaced anchor!"));
  mySpan.id = "xyz";
  mySpan.onmouseout = function() {
      doWhatever(this);
  };
  myAnchor.parentNode.replaceChild(mySpan, myAnchor);
</script> 
```

# procmail - Procmail 处理转发的电子邮件

> ID：15670262
> 
> 赞同：-1
> 
> 时间：2013-03-27T21:55:14.417
> 
> 标签：procmail

我想处理 procmail 收到的传入转发电子邮件，以获取转发（子）电子邮件的主题和收件人。

例如：

*   用户 A 收到来自用户 B 的电子邮件
*   UserA 将该电子邮件转发到电子邮件服务器
*   电子邮件服务器接收电子邮件并提取用户B的电子邮件地址

是否有执行此任务的方法或配方？还是我必须通过主电子邮件的正文进行正则表达式？

**编辑：**

根据要求，我将提供边界条件。“UserA 组”的电子邮件客户端是 Gmail 和 Outlook。所有用户都用英语发送。'UserB' 是我控制下的自动化代理。

我的一台服务器（“用户 B”）向我的用户（“用户 A”）发送自动电子邮件，这些用户应该将电子邮件转发到第二台服务器进行处理（以确认他们收到了自动电子邮件）。

然后，我假设没有一致的转发标头，并且我需要通过电子邮件正则表达式来提取我需要的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:01:23.650

（这不是一个真正的正确答案，但我不能在评论中使用格式，所以就这样吧。）

取决于您所说的“前锋”是什么意思。如果您的意思是“在健全的电子邮件客户端中使用‘转发’按钮”，它可能会以附件的形式出现（可能带有内容传输编码，需要对其进行解码才能访问它）或原始消息作为文本主体；或者如果您的意思是“在损坏的电子邮件客户端中使用‘转发’按钮，例如来自~~魔多~~Redmond”有许多可能的额外并发症。从技术上讲，一些客户端也可能通过添加“Resent-to:”标头来“转发”，否则只是逐字重新发送原始消息。或者在一些现代客户端中，您可以拖动消息进入新空邮件的撰写窗格，并使其显示为新邮件的附件，可能由用户控制包含邮件的内容类型和编码以及附件的。

假设您最终得到以下内容...

```
From: UserA <usera@such.example.com>
To: server@example.net
Subject: VB: Hi

Hey, here is a message I received.

-- User A

---- Ursprungligt meddelande ----
Från: UserB [mailto:userb@elsewhere.example.org]
Till: UserA
Ämne: Hi
Datum: perjantai 13\. lokakuuta 2012 23:45

Here is the original message

-- User B 
```

....表示确实不适合自动处理。您可以提出启发式方法，例如识别“原始消息”分隔符和分隔符后的第一个（可能是本地化和残缺的）“to：”字段，也许通过要求所有消息来自具有特定客户端的特定版本特定的语言环境设置，但在一般情况下，这无法可靠地解决。

（为了好玩，我从运行芬兰系统设置的瑞典本地化中构建了一个示例；因此来自客户端的标签是瑞典语，但系统的日期是芬兰语。）

如果您可以编辑您的问题以包含转发消息的示例以及一些边界条件（它始终来自同一个用户，她使用的客户端软件的版本和本地化可能不会改变等），我们可以尝试采取从那里开始。

# xml - XSLT 2.0 在模板之间传输数据

> ID：15670263
> 
> 赞同：-2
> 
> 时间：2013-03-27T21:55:16.187
> 
> 标签：xml, templates, xslt

我想知道可以在模板中传输变量并获取值。例如在模板 A 中设置变量并在模板 B 中获取值？我尝试使用调用模板，但我没有得到价值。

```
<xsl:template name="Transf">
  <xsl:param name="T1"/>
  <xsl:value-of select="$T1"/>
</xsl:template>

<xsl:template match='director/filmDirectors'>
   <xsl:if test="filmDirector='Allen Woody'">
      <xsl:call-template name="Transf">
       <xsl:value-of select="@id"/><xsl:with-param name="T1" select="@id"/>
      </xsl:call-template>
   </xsl:if>

</xsl:template>

<xsl:template match='movie/titles'>
 <xsl:call-template name="Transf">
  <xsl:with-param name="T1"><xsl:value-of select="tile[@id=$T1]"/></xsl:with-param>
 </xsl:call-template>
</xsl:template> 
```

XML 文件

```
<list>
 <director>
   <filmDirectors>
    <filmDirector id="steve-s">
     <lname>Spielberg</lname>
     <lfirstname>Steven</lfirstname>
    </filmDirector>

   <filmDirector id="woody-a">
    <lname>Allen<lname>
    <lfirstname>Woody</lfirstname>
   </filmDirector>
 <filmDirectors>
</director>

<movie>
 <titles>
   <title id="steve-s">Jurassic Park</title>
 </titles>
 <titles>
   <title id="woody-a">Small Time Crooks</title>
 </titles>
</movie> 
```

你能给我建议吗？

预先感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:34:46.767

在不了解 XML 结构的情况下很难给出解决方案，但总体思路是使用 apply-templates 而不是 call-templates。解决方案可能如下所示。

```
<xsl:template match='director/filmDirectors'>
   <xsl:apply-templates>
      <xsl:with-param name="filmDirectors" select="." tunnel="yes" />
   </xsl:apply-templates>
</xsl:template>

<xsl:template match='movie/titles'>
  <xsl:param name="filmDirectors" tunnel="yes" />
  <xsl:value-of select="concat('title: ',.,' director: ',$filmDirectors)" />
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:32:43.607

**我认为你的问题在这里**：

```
<xsl:template match='movie/titles'>
 <xsl:call-template name="Transf">
  <xsl:with-param name="T1"><xsl:value-of select="tile[@id=$T1]"/></xsl:with-param>
 </xsl:call-template>
</xsl:template> 
```

您正在引用一个名为 的变量/参数`$T1`，但模板中没有定义这样的变量/参数。

**除非有一个名为的*全局*变量/参数`$T1`，否则上面的代码会导致编译时错误**。

**还有一个严重的错误：**

```
<xsl:template match='director/filmDirectors'>
   <xsl:call-template name="Transf">
     <xsl:if test="filmDirector='Allen Woody'">
      <xsl:value-of select="@id"/><xsl:with-param name="T1" select="@id"/>
     </xsl:if>
  </xsl:call-template>
</xsl:template> 
```

**`xsl:if`不能是“xsl:call-template”的子级**

**我对您的建议是阅读一本关于 XSLT 的介绍性书籍，然后再提出充满错误的问题**。

# lda - 动态主题模型输出 - Blei 格式

> ID：15670266
> 
> 赞同：2
> 
> 时间：2013-03-27T21:55:30.333
> 
> 标签：lda, topic-modeling

我正在使用 Blei 开发的动态主题模型包。我是 LDA 的新手，但我理解它。

我想知道 `lda-seq/topic-000-var-obs.dat`商店名称的输出是什么？

我知道它`lda-seq/topic-001-var-e-log-prob.dat`存储了变分后验的对数，并通过对其应用指数，我得到了主题 001 中单词的概率。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T15:37:50.283

topic-000-var-e-log-prob.dat 存储主题 1 的变分后验的日志。

topic-001-var-e-log-prob.dat 存储主题 2 的变分后验的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T01:21:26.513

我在任何地方都找不到具体的答案。但是，由于文档的`sample.sh`状态

```
The code creates at least the following files:
- topic-???-var-e-log-prob.dat: the e-betas (word distributions) for topic ??? for all times.  
...
- gam.dat 
```

没有提及该`topic-000-var-obs.dat`文件，表明它对于大多数分析来说不是必须的。

### 猜测

`obs`提出意见。在对`example/model_run`结果进行了一些挖掘之后，我使用以下方法绘制了每个单词/标记的跨时代总和：

```
temp = scan("dtm/example/model_run/lda-seq/topic-000-var-obs.dat")
temp.matrix = matrix(temp, ncol = 10, byrow = TRUE) 
plot(rowSums(temp.matrix)) 
```

结果是这样的：

[![行总和](../Images/68749f6b11b2a24ec4c8a37ee8c37439.png)](https://i.stack.imgur.com/HHJTM.png)

非负值的总体趋势是减少，并且许多值被降低（在这种情况下为`-11.00972 = log(1.67e-05)`），这表明这些值是权重或对模型影响的其他一些度量。该模型删除了一些标记，其他标记的影响/重要性在索引上逐渐减小。后面的趋势可能是由创建字典时通过 tf-idf 对令牌进行排序等预处理引起的。

有趣的是，下限标记和具有更多正值的集合的行总和值各不相同：

[![不同的例子](../Images/32d27074f9e83ce7b51db903492b8c8f.png)](https://i.stack.imgur.com/E3TfP.png)

```
temp = scan("~/Documents/Python/inference/project/dtm/example/model_run/lda-seq/topic-009-var-obs.dat")
temp.matrix = matrix(temp, ncol = 10, byrow = TRUE) 
plot(rowSums(temp.matrix)) 
```

# java - 使用 mouseClicked() 时也计算拖动的鼠标坐标？

> ID：15670269
> 
> 赞同：2
> 
> 时间：2013-03-27T21:55:46.883
> 
> 标签：java, swing, jframe, awt, mouseevent

当我使用该方法时，发生了一些非常奇怪的事情：

```
public void mouseClicked(MouseEvent evt) 
```

我计算点击次数，每次点击或两次点击时，我都会抓取 (x,y) 坐标并将该坐标添加到我的列表中。但是当我检查给定的图片时，我看到添加的坐标也是拖动坐标，即用户用鼠标经过但没有点击或双击的位置。

怎么可能 ？

这个问题与我之前关于多边形的问题有关，这个问题似乎是我的问题的原因。

这是图片：关闭多边形

：![在此处输入图像描述](../Images/146605b0c0e1cc1bd747c150c6e952a1.png)

当我开始画别的东西时：

![在此处输入图像描述](../Images/2f41eea2d094a4571364eb0b73cf9111.png)

意思是，这是同一个多边形，只是这次鼠标经过但没有点击/双击的坐标也被计算在内。

这[就是](https://stackoverflow.com/questions/15657010/trying-to-draw-multiple-polygons-results-in-error?lq=1)我之前的问题。

任何想法将问题的根源将不胜感激。

编码 ：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.ArrayList;
import java.util.Iterator;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 * 
 * @author X2
 *
 */
public class Poly
{
    public static void main (String[] args)
    {
     JFrame frame = new JFrame("Draw polygons");
     frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     frame.setContentPane(new DrawingPanel());
     frame.pack();
     frame.setVisible(true);
 }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T23:14:43.650

我不完全确定确切的问题是什么，但您不应该在`paintComponent`.

当`polygonDone`是`true`（顺便说一句，你可以简单地写），你正在为你的模型`if(polygonDone)`添加新的。`Edges`这听起来很糟糕，因为您无法控制何时`paintComponent`调用，也无法控制调用次数。并且由于在`mouseMoved`您调用`repaint()`中，这最终会触发对 的调用`paintComponent`，创建新的边缘等......问题一定出在该代码的某个地方。停止在`paintComponent`.

作为一般规则，您不应该在 期间修改组件状态`paintComponent`，仅在用户输入时（MouseEvent、KeyBoard 事件（通过 KeyBindings））。

# c - xcode 中的程序参数

> ID：15670271
> 
> 赞同：0
> 
> 时间：2013-03-27T21:55:51.787
> 
> 标签：c, xcode, parameters

是否可以让程序参数在 xcode 中工作？我正在为大学做作业，并想使用 xcode 中的调试器来帮助我了解发生了什么。

我知道代码至少是可编译的，因为我能够用 gcc 编译它，但是 xcode 不能识别语法。

我试图在 xcode 中运行的代码是：

```
#include <stdlib.h>
#include <stdio.h> 

int main() {
    int a = 50; 
    int b = 100;

    void P(int *c, void R(int)) {
        void Q(int p) {
            printf("%d\n", p);
            R(p+100);
        }
        if (a == b) R(b);
        else {c = c + 25;
            P(c, Q); 
        }
    }

    void Q(int p) {
        printf("%d\n", p);
    }

    P(&a,Q);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:10:07.610

Xcode`clang`默认使用编译器，[不支持嵌套函数](http://clang.llvm.org/docs/UsersManual.html#gcc-extensions-not-implemented-yet)。要`gcc`在 Xcode 中使用，请转到您的项目设置，选择您的目标并将**Compiler for C/C++/Objective-C**更改为`LLVM GCC 4.2`. 现在如果你编译，`gcc`会抱怨，没有启用嵌套函数。回到你的目标设置，**LLVM GCC 4.2 Language**并在**Other C Flags**下添加`-fnested-functions`. 您的项目现在应该可以编译了。

# c - 使用scanf的C多维数组大小

> ID：15670273
> 
> 赞同：1
> 
> 时间：2013-03-27T21:56:01.623
> 
> 标签：c, arrays, file, scanf, multidimensional-array

我在为程序使用多维数组时遇到了一些麻烦。本质上，该程序使用 scanf 从重定向文件中读取用户 ID 和字符串。文件格式是一个三位数的用户 ID、一个空格和一串字符，表示每行测试中多项选择题的答案，例如。

```
111 dabac
102 dcbdc
251 dbbac 
```

我遇到的问题是我不知道有多少用户，并且我无法多次读取文件数据。我试过使用

```
for (lineNumber = 0; lineNumber != -1; lineNumber++)
{
int result = scanf("%d ", &data);
if (result == EOF)
  break;
for(i = 0; i < numProblems; i++)
{
  scanf("%c", &input);
} 
```

获取文件中的行数，然后设置数组的大小。然后将数组传递给另一个读取数据的函数，使用相同的 for 循环，但使用

```
input = arrayName[numProblems][lineNumber]; 
```

在第二个 for 循环中。我遇到的问题是 scanf 只能从文件中读取一次数据，并且在初始化之前我无法将数据存储在数组中，这需要我知道有多少用户。

按照我的设置方式，程序可以**找到**行数（用户）或将数据存储在数组中（如果我将大小设置为任意数字），但不能同时找到两者。

我必须使用scanf，因为文件名不是恒定的（这也是一个类......教授需要使用scanf），我不知道如何获取文件中的行数和仍然可以读取数据。如果有人知道在不使用 scanf 的情况下查找行数或读取数据两次的解决方法，我将非常感谢一些帮助。如果它有助于发布整个程序，我也可以这样做。

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:16:01.693

幸运的是，scanf() 将一次性将整行解析为多个变量。尝试更多类似的东西

```
scanf( "%d %s", &uid, answers ); 
```

只需计算您能够成功从标准输入解析数据的次数，然后调用您的 lineNumber 计数（如果您甚至需要知道总行数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:02:52.133

有多种方法可以做到这一点。我会推荐一个使用结构的链表，并记录到目前为止已阅读的内容。

如果你真的想继续使用数组，请先使用 malloc 分配数组，然后使用 realloc 重新分配数组。您将对重新分配的数组大小进行计数。

它应该是这样的：

```
POINTER *array = realloc(orig_array_pt, size);
if (array  == NULL)
{
    // realloc failed
}
else
{
    orig_array_pt = array;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:05:49.637

只要输入是实际文件（而不是终端或其他设备），您就可以使用`rewind(stdin);`将 FILE 指针设置回文件的开头...

# javascript - 保持对输入标签的关注

> ID：15670277
> 
> 赞同：9
> 
> 时间：2013-03-27T21:56:13.650
> 
> 标签：javascript, html, input, dom-events

我正在尝试使用以下代码将注意力集中在输入元素上：

```
<input onblur="this.focus()" /> 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T22:23:58.550

如果我们只是`.focus()`在事件上调用right `blur`，它会恢复焦点，但实际上不会有文本光标。为了处理这个问题，我们必须让元素失去焦点，然后在几毫秒内返回它。我们可以`setTimeout()`为此使用。

```
$('#inp').on('blur',function () { 
    var blurEl = $(this); 
    setTimeout(function() {
        blurEl.focus()
    }, 10);
}); 
```

这是[工作示例](http://jsfiddle.net/4RrV5/11/)。小心 - 输入后不能离开文本字段 =)

**编辑**我使用了 jQuery，但没有它也可以轻松完成。
**EDIT2**这是纯 JS 版本的[小提琴](http://jsfiddle.net/4RrV5/14/)

```
<input type="text" id="elemID" />

<script type="text/javascript">
    document.getElementById('elemID').onblur = function (event) { 
        var blurEl = this; 
        setTimeout(function() {
            blurEl.focus()
        }, 10);
    };
</script> 
```

# c# - 什么做大于/小于符号（例如动作 >) 在 C# 中是什么意思？

> ID：15670282
> 
> 赞同：3
> 
> 时间：2013-03-27T21:56:47.877
> 
> 标签：c#, .net, syntax

例子：

```
public event Action<List<WKSProfile>> WorkstationProfileChanged; 
```

我无法理解上述成员。它是否暗示它返回：

```
Action<List<WKSProfile>> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T21:59:04.663

这是指定[泛型类型参数](http://msdn.microsoft.com/en-gb/library/0zk36dx2.aspx)的语法。

> 在泛型类型或方法定义中，类型参数是客户端在实例化泛型类型的变量时指定的特定类型的占位符。泛型类，例如`GenericList<T>`泛型简介（C# 编程指南）中列出的类，不能按原样使用，因为它不是真正的类型；它更像是一种类型的蓝图。要使用`GenericList<T>`，客户端代码必须通过在尖括号内指定类型参数来声明和实例化构造类型。

# asp.net-mvc - 为什么 Visual Studio 2012 为 Web API 项目创建内容文件夹？

> ID：15670289
> 
> 赞同：1
> 
> 时间：2013-03-27T21:57:34.067
> 
> 标签：asp.net-mvc, visual-studio, asp.net-mvc-4, visual-studio-2012, asp.net-web-api

我觉得这很奇怪，因为 Web API 项目实际上应该是一个基于 MVC 4 Web API 的无视图项目。这些项目是否有任何理由默认包含这些文件？我想将它们全部消除（*.js、*.css 等），有什么理由不这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:00:21.770

包含这些文件以构建“普通浏览器”视图，如果您在 url 中没有“/api”调用的情况下导航到主机，这是您看到的页面

如果您不想使用它们的功能，可以删除这些文件。

# vim - 改进 vim 中的“在光标下搜索”（gf）

> ID：15670297
> 
> 赞同：3
> 
> 时间：2013-03-27T21:57:47.217
> 
> 标签：vim

我正在阅读我想打开的 Verilog 代码，`unit1.vs`但代码包含：

```
unit1 unit1_instance {...} 
```

我可以通过添加来做到这一点：

```
includeexpr=substitute(v:fname,'\(.*\)','\1.vs','i') 
```

在 vimrc 中并使用`g``f`.

我现在有另一个`unit2.sdpv`像 unit1 一样实例化的。如何扩展`includeexpr`搜索`file.vs`和`file.sdpv`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:12:33.547

尝试使用`suffixesadd`而不是`includeexpr`：

```
:set suffixesadd=.vs,.sdpv 
```

# javascript - CSS硬件加速宽度？

> ID：15670303
> 
> 赞同：7
> 
> 时间：2013-03-27T21:58:00.587
> 
> 标签：javascript, jquery, css, hardware-acceleration

我正在尝试构建一个 Phonegap 应用程序，该应用程序将允许用户通过移动中间分隔线来更改两列布局的大小。

我能够得到这个工作，但有一个巨大的用户体验问题：它是滞后的。这并不可怕，但在最新的 iPad 上它甚至很明显，这让我很担心。

这是我的 JS 调整大小：

```
$("div").on("touchmove", "#columnResizeIcon", function(e) {
    e.preventDefault();
    var left = e.originalEvent.touches[0].pageX;
    var right = $("#columnContainer").width() - left;

    $("#leftColumn").css({
       "width":left - 1 + "px",
       "right":"auto",
    });
    $("#rightColumn").css({
       "width":right - 1 + "px",
       "left":"auto",
    });
    $("#columnResize").css({
       "-webkit-transform":"translate3d(" + left  + "px" + ", 0, 0)",
       "left":"auto",
    });
    $("#columnResizeIcon").css({
       "-webkit-transform":"translate3d(" + left  + "px" + ", 0, 0)",
       "left":"auto",
    });
}); 
```

您会注意到我利用`translate3d()`更改元素的“左”值，因为这是硬件加速的。我相信延迟是由改变左右列的宽度产生的，这是我需要硬件加速的。

我认为可能可行的一个可能的解决方案是使用`-webkit-transform:translate3d(50%, 0, 0)`将右列推到页面的一半以上，然后只是更改该值，希望它只会延伸到父级。但是，它会继续，并进入页面的 50%，而不是父页面的 50%。

我的 HTML 标记如下所示：

```
<div id="columnContainer">
    <div id="columnResize"></div>
    <div id="columnResizeIcon"></div>

    <div id="leftColumn">
        <div class="header">Left Header</div>
        <div class="content"></div>

    </div>
    <div id="rightColumn">
        <div class="header">Right Header</div>
        <div class="content"></div>
    </div>
</div> 
```

还有我的 CSS：

```
body{
    background-color:#000;
}

#columnContainer{
    position: absolute;
    bottom:0;
    top:0;
    right:0;
    left:0;
    background-color:#000;
}

#leftColumn{
    position: absolute;
    top:0;
    left:0;
    right:50%;
    bottom:0;
    -webkit-overflow-scrolling: touch;
    z-index: 1;
    margin-right: 1px;
}

#rightColumn{
    position: absolute;
    top:0;
    left:50%;
    right:0;
    bottom:0;
    -webkit-overflow-scrolling: touch;
    z-index: 1;
    margin-left: 1px;
}

.header{
    position: absolute;
    left:0;
    right:0;
    height:33px;
    z-index: 5;
    background: -webkit-linear-gradient(top, #f4f5f7 0%,#a7abb7 100%);
    box-shadow:  inset 0 1px 0 #fff, inset 0 -1px 0 #7A8090, 3px 0 2px rgba(0,0,0,.3);
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    font-size: 17px;
    font-family: Helvetica;
    font-weight: bold;
    letter-spacing: .2px;
    text-align: center;
    padding-top:9px;
    color:#71787F;
    text-shadow: 0 1px 0 #E3E5E9;
}

.content{
    position: absolute;
    left:0;
    right: 0;
    top:42px;
    bottom: 0;
}

#leftColumn .content{
    background-color:#F5F5F5;
}

#rightColumn .content{
    background-color:#fff;
}

#columnResize{
    position: absolute;
    width:2px;
    top:0;
    bottom: 0;
    left:50%;
    margin-left:-1px;
    background-color:#000;
    z-index: 2;
}

#columnResizeIcon{
    position: absolute;
    z-index: 3;
    width:10px;
    height:30px;
    top:50%;
    bottom:50%;
    margin-top:-15px;
    left:50%;
    margin-left:-7px;
    border-left:2px solid #000;
    border-right:2px solid #000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:11:02.597

我终于找到了一个比我所拥有的更好的解决方案。基本上，我为容器设置动画，并在调整大小时隐藏内容。然后，当调整大小完成后，我再次显示内容。我使用动画使它在隐藏/显示时看起来很漂亮。该代码将比我更好地解释它：

## 万能的琴

¹ [http://jsfiddle.net/charlescarver/hnQHH/134/](http://jsfiddle.net/charlescarver/hnQHH/134/)

## 我的解释

当点击滑块时，它会通过变换将所有文本元素推离页面`translate3d()`，然后隐藏 div。这是因为如果我在显示元素时尝试更新宽度，则会返回滞后。因此，一旦隐藏了 div，我只需`translate3d()`再次使用变换向左或向右移动列。我可以在不让每个元素的宽度变短的情况下做到这一点，因为我将`left`or`right`值设置为一个永远无法达到的值，因此它扩展到页面之外足够远。这样，我可以简单地移动它，而不必担心它会过早地切断。

## 怪异

其中有些部分可能是多余的，但我会尽快清理它们。您可能还会注意到发生了一些奇怪的事情，例如 (1) `cornerLeft`、 (2) `dummy`、 (3) `shadow`，以及在 JS 中的 (4) `minimum`：

1.  当我调整页面大小时，`dummy`导航栏会扩展左右列的整个宽度，这意味着它会达到宽度的 1000%。这意味着我不能`border-radius`在导航栏上为每列的左侧和右侧设置 a，因为它离屏幕太远以至于不可见。所以，我做了一个简单的角落来遮住窗户的每一侧，让它看起来很漂亮。

2.  我隐藏`.contentLeft`，`.contentRight`当我调整大小时，它会在显示时导致延迟。不过，我不想摆脱导航栏，所以我制作了`dummy`一个始终存在于页面上的导航栏，并且在调整大小即将发生时显示出来。我认为这减少了延迟，因为我不必添加元素，因为它总是在那里。

3.  然而，其中一个问题是，当正常导航覆盖虚拟导航时，`box-shadow`的重叠，导致它在 200 毫秒内变暗。我不喜欢这个。因此，我放置了一个始终位于导航顶部的阴影，无论导航显示什么。

4.  我现在可以轻松设置可拖动列在停止之前可以达到的界限。方便，对吧？

## 代码

HTML：

```
<div id="container">
    <div class="cornerLeft"></div>
    <div class="cornerRight"></div>
    <div class="shadow"></div>
    <div class="left">
        <div class="contentLeft">
            <div class="header"></div>
            <div class="headerbehind"></div>
            <div class="text textLeft">Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui, a porttitor lectus.</div>
        </div>
        <div class="dummy"></div>
        <div class="dummybg"></div>
    </div>
    <div class="divider"></div>
    <div class="right">
        <div class="contentRight">
            <div class="header"></div>
            <div class="headerbehind"></div>
            <div class="text textRight">Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui, a porttitor lectus.</div>
        </div>
        <div class="dummy"></div>
        <div class="dummybg"></div>
    </div>
</div> 
```

CSS：

```
* {
    -webkit-text-size-adjust:none;
}
#container {
    position:fixed;
    left:0;
    right:0;
    bottom:0;
    top:0;
    background-color:#000;
    -webkit-transform: translateZ(0);
    -webkit-perspective: 1000;
}
.left {
    -webkit-transform:translate3d(0, 0, 0);
    position:absolute;
    left:-3000px;
    right:50%;
    top:0;
    bottom:0;
    border-right:1px solid #000;
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
}
.right {
    -webkit-transform:translate3d(0, 0, 0);
    position:absolute;
    left:50%;
    right:-3000px;
    top:0;
    bottom:0;
    border-left:1px solid #000;
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
}
.divider {
    width:24px;
    height:40px;
    border-left:2px solid #000;
    border-right:2px solid #000;
    position:absolute;
    left:50%;
    z-index:3;
    margin-left:-14px;
    margin-top:-20px;
    top:50%;
    -webkit-transform:translate3d(0, 0, 0);
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
}
.contentLeft {
    position:absolute;
    right:0;
    bottom:0;
    top:0;
    -webkit-transform: translateZ(0);
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
}
.contentRight {
    position:absolute;
    left:0;
    bottom:0;
    top:0;
    -webkit-transform: translateZ(0);
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
}
.cornerLeft:after {
    content:"";
    height:5px;
    position:absolute;
    left:0;
    width:5px;
    background: -webkit-linear-gradient(top, #F0F2F4 0%, #EAEBEE 100%);
    z-index:700;
    border-top-left-radius:5px;
    box-shadow:inset 0 1px 0 #fff;
}
.cornerLeft {
    position:absolute;
    z-index:700;
    left:0;
    width:5px;
    height:5px;
    background-color:#000;
}
.cornerRight:after {
    content:"";
    height:5px;
    position:absolute;
    right:0;
    width:5px;
    background: -webkit-linear-gradient(top, #F0F2F4 0%, #EAEBEE 100%);
    z-index:700;
    border-top-right-radius:5px;
    box-shadow:inset 0 1px 0 #fff;
}
.cornerRight {
    position:absolute;
    z-index:700;
    right:0;
    width:5px;
    height:5px;
    background-color:#000;
}
.header, .dummy {
    position: absolute;
    left:0;
    right:0;
    height:35px;
    background: -webkit-linear-gradient(top, #f4f5f7 0%, #a7abb7 100%);
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    font-size: 17px;
    font-family: Helvetica;
    font-weight: bold;
    letter-spacing: .2px;
    text-align: center;
    padding-top:9px;
    color:#71787F;
    text-shadow: 0 1px 0 #E3E5E9;
    word-break: break-all;
    box-shadow:inset 0 1px 0 #fff, inset 0 -1px 0 #7A8090;
}
.shadow {
    height:44px;
    position:absolute;
    left:0;
    right:0;
    box-shadow:0 1px 2px rgba(0, 0, 0, .2);
    z-index:600;
}
.header {
    z-index:500;
}
.dummy {
    z-index:100;
}
.headerbehind {
    position:absolute;
    background-color:#000;
    left:0;
    right:0;
    height:44px;
    z-index:499;
}
.text, .dummybg {
    margin-top:44px;
    background-color:#fff;
    position:absolute;
    top:0;
    right:0;
    left:0;
    bottom:0;
}
.text {
    z-index:2;
    padding:20px 40px;
    -webkit-animation-duration:200ms;
    -webkit-animation-timing-function:ease;
}
.contentLeft, .contentRight {
    z-index:300;
}
.leftOut {
    -webkit-transform:translate3d(-100%, 0, 0);
    -webkit-animation-name:leftOut;
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
}
.leftIn {
    -webkit-transform:translate3d(0, 0, 0);
    -webkit-animation-name:leftIn;
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
}
@-webkit-keyframes leftOut {
    0% {
        -webkit-transform:translate3d(0, 0, 0);
    }
    100% {
        -webkit-transform:translate3d(-100%, 0, 0);
    }
}
@-webkit-keyframes leftIn {
    0% {
        -webkit-transform:translate3d(-100%, 0, 0);
    }
    100% {
        -webkit-transform:translate3d(0, 0, 0);
    }
}
.rightOut {
    -webkit-transform:translate3d(100%, 0, 0);
    -webkit-animation-name:rightOut;
}
.rightIn {
    -webkit-transform:translate3d(0, 0, 0);
    -webkit-animation-name:rightIn;
}
@-webkit-keyframes rightOut {
    0% {
        -webkit-transform:translate3d(0, 0, 0);
    }
    100% {
        -webkit-transform:translate3d(100%, 0, 0);
    }
}
@-webkit-keyframes rightIn {
    0% {
        -webkit-transform:translate3d(100%, 0, 0);
    }
    100% {
        -webkit-transform:translate3d(0, 0, 0);
    }
} 
```

JS：

```
minimum = 100;
$(".contentLeft").css("width", ($("#container").width() / 2) - 1);
$(".contentRight").css("width", ($("#container").width() / 2) - 1);

$("div").on("touchstart", ".divider", function (e) {
    $(".textLeft").removeClass("leftIn");
    $(".textLeft").addClass("leftOut");
    $(".textRight").removeClass("rightIn");
    $(".textRight").addClass("rightOut");
    setTimeout(function () {
        $(".contentLeft, .contentRight").hide();
    }, 200);
});

$("div").on("touchmove", ".divider", function (e) {
    e.preventDefault();
    if ($(".contentLeft").css("display", "none")) {
        var page = $("#container").width();
        var left = e.originalEvent.touches[0].pageX;
        var right = page - left;
        updateWidth(page, left, right);
    }
});

//$(".contentLeft, .contentRight").hide();

$("div").on("touchend", ".divider", function (e) {
    setTimeout(function () {
        $(".textLeft").removeClass("leftOut");
        $(".textLeft").addClass("leftIn");
        $(".textRight").removeClass("rightOut");
        $(".textRight").addClass("rightIn");
        $(".contentLeft, .contentRight").show();
    }, 200);
});

$(window).on('orientationchange', function (e) {
    var page = $("#container").width();
    var leftWidth = $(".contentLeft").width();
    var rightWidth = $(".contentRight").width();
    var previousWidth = (leftWidth + rightWidth);
    if (leftWidth + rightWidth + 2 < page) {
        var left = (page / 2) - (previousWidth / 2) + leftWidth;
    } else if (leftWidth + rightWidth + 2 > page) {
        var left = leftWidth - ((previousWidth / 2) - (page / 2));
    }
    var right = page - left;
    updateWidth(page, left, right);
});

function updateWidth(page, left, right) {
    if (left < minimum) {
        var finalLeft = minimum;
        var finalRight = (-1 * (page - minimum));
        var finalRightWidth = (page - minimum);
    } else if (right < minimum) {
        var finalLeft = (page - minimum);
        var finalRight = (-1 * minimum);
        var finalRightWidth = minimum;
    } else {
        var finalLeft = (left);
        var finalRight = (0 - right);
        var finalRightWidth = (right);
    }
    $(".divider").css({
        "-webkit-transform": "translate3d(" + finalLeft + "px, 0, 0)",
            "left": "auto",
    });
    $(".left").css({
        "-webkit-transform": "translate3d(" + finalLeft + "px, 0, 0)",
            "right": "100%",
    });
    $(".right").css({
        "-webkit-transform": "translate3d(" + finalRight + "px, 0, 0)",
            "left": "100%",
    });
    $(".contentLeft").css("width", finalLeft);
    $(".contentRight").css("width", finalRightWidth);
} 
```

¹ [是的，我尝试了 134 次。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:41:42.937

通过在硬件加速堆栈中对这两个元素提出质疑，我取得了一些成功：

```
#leftColumn,
#rightColumn {
  -webkit-transform: translate3d(0,0,0);
} 
```

似乎调整大小更顺利。并不是改变`width`本身被优化，而是元素本身被更快地重新渲染。

我在这里设置了一个插件：http: [//plnkr.co/edit/5RMtCl1Sql8f3CmQLHFz](http://plnkr.co/edit/5RMtCl1Sql8f3CmQLHFz)

# php - 苹果iOS推送通知的PHP脚本错误

> ID：15670307
> 
> 赞同：0
> 
> 时间：2013-03-27T21:58:17.897
> 
> 标签：php, ios, push-notification

我有一个 iOS 应用程序，当我在我的网站上写新帖子时，我使用苹果推送通知发送通知，所以有 php 脚本有 ssl 证书，当我发送推送通知时它通常会发送，但在我得到的错误日志中这个错误：

> [27-Mar-2013 15:30:44] PHP 致命错误：第 56 行的 /home3/basiphon/public_html/Push.php 中的最大执行时间超过了 30 秒

推送通知（通常）成功发送，但我在错误日志中收到此错误，有时推送通知未发送，我也收到此错误到另一个错误，如下所示：

> [27-Mar-2013 05:45:04] PHP 警告：stream_socket_client() [function.stream-socket-client]：SSL：第 56 行 /home3/basiphon/public_html/Push.php 中的连接超时 [3 月 27 日-2013 05:45:04] PHP 警告：stream_socket_client() [function.stream-socket-client]：无法在第 56 行的 /home3/basiphon/public_html/Push.php 中启用加密 [27-Mar-2013 05： 45:04] PHP 警告：stream_socket_client() [function.stream-socket-client]：无法连接到 /home3/basiphon/public_html/Push 中的 ssl://gateway.push.apple.com:2195（未知错误） .php 在第 56 行

请查看我的 push.php 脚本的代码：

```
`// 打开与 APNS 服务器的连接

 `$fp = stream_socket_client(
        $url, $err,
        $errstr, 2, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);
    if (!$fp)
        exit("Failed to connect: $err $errstr" . PHP_EOL);

    echo 'Connected to APNS' . PHP_EOL;
    // Build the binary notification
    $msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

    // Send it to the server
    $result = fwrite($fp, $msg, strlen($msg));

    if (!$result)
        echo 'Message not delivered' . PHP_EOL;
    else
    {
        echo 'Message successfully delivered111' . PHP_EOL;
        $query_update="update wp_apns_messages set status='delivered',delivery=NOW() where pid='$pid'";
        $res_update=mysql_query($query_update) or die(mysql_error());
    }

    // Close the connection to the server
    fclose($fp);`` 

            回答 #1

赞同：0

时间：2013-03-27T22:19:19.683

在运行 www.raywenderlich.com 上的推送通知教程提供的 PHP 脚本之前，我遇到了同样的错误。

确保您没有运行任何干扰您与 APN 连接的防火墙。  

如果您遵循上述站点的教程，请确保在终端中运行以下命令时收到响应而不是错误：

```
$ openssl s_client -connect gateway.sandbox.push.apple.com:2195 
-cert PushChatCert.pem -key PushChatKey.pem
Enter pass phrase for PushChatKey.pem: 
```

```

# python - Python opencv 返回错误属性

> ID：15670309
> 
> 赞同：2
> 
> 时间：2013-03-27T21:58:18.947
> 
> 标签：python, c, opencv

我有可以工作并返回良好属性的 C 代码：

```
int main(int argc, char** argv) {

    CvCapture *capture = NULL; 
    const char* filename = "foo.mov";

    capture = cvCreateFileCapture(filename);
    int w = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH);
    int h = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT);

    std::cout << "Width:  " << w << std::endl;
    std::cout << "Height: " << h << std::endl; 
```

但 Python 等价物只为所有内容返回 0：

```
import cv2

capture = cv2.VideoCapture('foo.mov')

print capture.get(cv2.cv.CV_CAP_PROP_FRAME_WIDTH) 
```

这返回`0.0`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:10:47.967

1.  [在python](https://stackoverflow.com/questions/10248880/determine-which-version-of-opencv)和[c](https://stackoverflow.com/questions/11030640/how-to-determine-opencv-version)中检查打开的 cv 版本：

    > > > from cv2 导入**版本** **版本**

    并使用`CV_VERSION`宏。

2.  输出是什么 `capture.get(cv2.cv.CV_CAP_PROP_FRAME_HEIGHT)`

3.  python 和 foo.mov 是否位于同一目录中？

# crystal-reports - 链接的子报告循环 10 倍

> ID：15670311
> 
> 赞同：0
> 
> 时间：2013-03-27T21:58:20.370
> 
> 标签：crystal-reports, subreport

我根据四个链接的子报告制作了一份报告。

所有四个报告都像独立报告一样工作。

包含最多数据和图表的链接报表循环 10 倍，所有其他子报表仅出现一次！

我有子报告

GH1a GH1b GH2 射频

有问题的子报告在 GH2 中

谢谢

# java - 如何将 spring (2.5) bean 注入休眠 (3) 实体？

> ID：15670312
> 
> 赞同：0
> 
> 时间：2013-03-27T21:58:21.950
> 
> 标签：java, spring, hibernate, dependency-injection

如何使用 spring 将 bean 注入休眠实体？我正在使用带有休眠 3 的 spring 2.5。

我可以在 spring 3 中看到如何做到这一点，但它可以在 spring 2.5 中完成吗？

在示例中，我想将其`UtillBean`注入`Stuff.stuffUtill`.

```
@Entity
@Table(name = "STUFF")
public class Stuff {
    @Id
    @Column(name = "STUFF_ID")
    private Long stuffID;

    private UtillBean stuffUtill;

}

public class UtillBean {
    ...
} 
```

***更新：**对于这种情况，这是我坚持的设计。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:38:07.440

Try with `@Configurable` annotation (since 2.0).

See [http://blog.springsource.org/2008/01/23/new-improvements-in-domain-object-dependnecy-injection-feature/](http://blog.springsource.org/2008/01/23/new-improvements-in-domain-object-dependnecy-injection-feature/) spring source post for more info.

# ruby-on-rails - 在 Rails 中使用数组解析 JSON

> ID：15670314
> 
> 赞同：6
> 
> 时间：2013-03-27T21:58:37.337
> 
> 标签：ruby-on-rails, ruby, json

我有远程服务器返回的以下 JSON 字符串：

```
{
  "users": [
    {
      "user_id": 1,
      "name": "Chris Rivers",
    },
    {
      "user_id": 3,
      "name": "Peter Curley",
    }
  ]
} 
```

我想迭代用户。

```
ActiveSupport::JSON.decode(response.body)["users"].each do |user|
    puts user["name"]
end 
```

据我了解，问题是：ruby 不能识别`ActiveSupport::JSON.decode(response.body)["users"]`为数组，因此`puts`只返回第一个用户。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T22:06:45.580

您粘贴的不是有效的 JSON。每个后面的逗号`"name"`是一个问题

```
"name": "Chris Rivers", 
```

您将`LoadError`尝试使用`ActiveSupport::JSON.decode`

> MultiJson::LoadError: 399: '{"user_id": 1,"name": "Chris Rivers",},{"user_id": 3,"name": "Peter Curley",}]}'

如果我们把JSON清理一下，把它变成东西`ActiveSupport::JSON.decode`就可以理解了

```
"{\"users\": [{\"user_id\": 1,\"name\": \"Chris Rivers\"},{\"user_id\": 3,\"name\": \"Peter Curley\"}]}" 
```

你会看到迭代每个对象没有问题`"users"`（`x`下面是上面的 JSON 字符串）

```
[8] pry(main)> ActiveSupport::JSON.decode(x)["users"].map { |user| user["name"] }
=> ["Chris Rivers", "Peter Curley"] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T22:07:31.660

您的源数据实际上是否在每个用户名后面都有逗号？我得到一个解析错误，但如果我删除它们，你的代码可以按你的意愿工作：

```
json = '{ "users": [ { "user_id": 1, "name": "Chris Rivers" }, { "user_id": 3, "name": "Peter Curley" } ]}'
ActiveSupport::JSON.decode(json)["users"].each do |user|
   puts user["name"]
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-27T22:06:55.267

`"name"`问题不在于无法识别数组，而在于元素后面的逗号。

删除这些允许 JSON 解析正常进行：

```
pry(main)> ActiveSupport::JSON.decode(s)["users"]
=> [{"user_id" => 1, "name" => "Chris Rivers"},
    {"user_id" => 3, "name" => "Peter Curley"}] 
```

# javascript - 谷歌分析 - 使用 GET 而不是 POST

> ID：15670317
> 
> 赞同：1
> 
> 时间：2013-03-27T21:58:44.333
> 
> 标签：javascript, forms, google-analytics

遇到一个问题，我需要在表单方法上使用 GET 与 POST，但 GATC cookie 数据未正确附加到 URL，因为表单的数据胜过 Google 的 GATC 数据（使用 linkByPost）。

[我已经阅读了此处](https://productforums.google.com/forum/?fromgroups=#!topic/analytics/gVeUbGUVnmc)发布的潜在解决方案，但似乎需要大量工作才能使 GET 正常运行。[我在这里](http://productforums.google.com/forum/#!topic/analytics/hwDtn8dCmaw%5B1-25-true%5D)也偶然发现了另一个解决方案，但是 IE 在 url 的“锚”部分之后不尊重任何内容。

有人有其他想法吗？如果我不能通过 JS 处理这个问题，我将不得不进入处理表单操作的脚本并手动按摩查询字符串（假设 GATC 数据在 $_REQUEST 数组中）。FTR、GATC 数据在使用 get 时无法通过 $_REQUEST 数组获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:43:23.130

为了将来参考，如果有人遇到同样的问题，这是我实施的解决方案。我从这个[SO 帖子的答案中提取了一些代码，并将其与](https://stackoverflow.com/questions/2408043/jquery-create-hidden-form-element-on-the-fly)[这篇帖子](https://productforums.google.com/forum/?fromgroups=#!topic/analytics/gVeUbGUVnmc)背后的想法相结合，它本地化了 GATC 数据，并为每个表单添加了隐藏字段。

结果代码：

```
$(document).ready(function() {
    $('#formId').submit(function(e) {

        try {

            e.preventDefault();

            var form = this;

            if (typeof _gat !== 'undefined') {

                _gaq.push(['_linkByPost', this]);

                var pageTracker = _gat._getTrackerByName();

                var url = pageTracker._getLinkerUrl(form.action);

                var match = url.match(/[^=&?]+\s*=\s*[^&#]*/g);

                for ( var i = match.length; i--; ) {

                    var spl = match[i].split("=");

                    var name = spl[0].replace("[]", "");

                    var value = spl[1];

                    $('<input>').attr({
                        type: 'hidden',
                        name: name,
                        value: value
                    }).appendTo(form);
                }
            }

            setTimeout(function() { form.submit(); }, 400);
        } catch (e) { form.submit(); }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:15:45.957

您可以使用 jQuery 序列化来获取表单的元素，然后`_getLinkerUrl`附加跨域跟踪数据

```
$('#formID').submit(function(e) {
  var pageTracker = _gat._getTrackerByName();
  var url = this.action + '?' + $(this).serialize();
  url = pageTracker._getLinkerUrl(url);
  if (this.target != '_blank') location.href = url;
  else window.open(url);
}); 
```

# jboss - 将包含 MDB 的 .ear 文件部署到 JBoss 时出错

> ID：15670322
> 
> 赞同：21
> 
> 时间：2013-03-27T21:59:01.663
> 
> 标签：jboss, jboss7.x

*将企业归档 jar (.ear)*部署到 JBoss 7时出现以下错误。

有人可以给我指点如何解决这个问题。

JBoss 日志是

```
14:44:30,812 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.deployment.unit."Demo2.jar".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."Demo2.jar".PARSE: Failed to process phase PARSE of deployment "Demo2.jar"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_17]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_17]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_17]
Caused by: org.jboss.msc.service.ServiceNotFoundException: Service service jboss.ejb.default-resource-adapter-name-service not found
    at org.jboss.msc.service.ServiceContainerImpl.getRequiredService(ServiceContainerImpl.java:447) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.as.ejb3.deployment.processors.MessageDrivenComponentDescriptionFactory.getDefaultResourceAdapterName(MessageDrivenComponentDescriptionFactory.java:273)
    at org.jboss.as.ejb3.deployment.processors.MessageDrivenComponentDescriptionFactory.processMessageBeans(MessageDrivenComponentDescriptionFactory.java:153)
    at org.jboss.as.ejb3.deployment.processors.MessageDrivenComponentDescriptionFactory.processAnnotations(MessageDrivenComponentDescriptionFactory.java:81)
    at org.jboss.as.ejb3.deployment.processors.AnnotatedEJBComponentDescriptionDeploymentUnitProcessor.processAnnotations(AnnotatedEJBComponentDescriptionDeploymentUnitProcessor.java:58)
    at org.jboss.as.ejb3.deployment.processors.AbstractDeploymentUnitProcessor.deploy(AbstractDeploymentUnitProcessor.java:81)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-29T00:58:45.943

问题是您正在尝试将具有 MDB 的应用程序部署到未启用消息传递支持的standalone.xml 配置。（缺少消息子系统）

如果您使用standalone-full.xml 运行服务器，它会起作用。

你可以通过运行来做到这一点：

```
./standalone.sh -c standalone-full.xml 
```

在 Linux 或

```
standalone.bat -c standalone-full.xml 
```

在窗户上

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T19:21:07.237

在 Jboss 7.x 中我们需要添加

```
<subsystem xmlns="urn:jboss:domain:ejb3:1.2">
            ...
            <mdb>
                <resource-adapter-ref resource-adapter-name="hornetq-ra"/>
                <bean-instance-pool-ref pool-name="mdb-strict-max-pool"/>
            </mdb>
            ... 
```

并希望它会奏效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-17T06:59:29.623

我有完全相同的问题，发现我失踪了

```
<mdb>  
  <resource-adapter-ref resource-adapter-name="hornetq-ra"/>  
  <bean-instance-pool-ref pool-name="mdb-strict-max-pool"/>  
</mdb> 
```

在下面

```
<subsystem xmlns="urn:jboss:domain:ejb3:1.2"> 
```

在独立/配置/standalone.xml

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-16T06:16:57.307

在 Wildfly 10 上，它是（也在部分）：

```
 <mdb>
        <resource-adapter-ref resource-adapter-name="${ejb.resource-adapter-name:activemq-ra.rar}"/>
        <bean-instance-pool-ref pool-name="mdb-strict-max-pool"/>
    </mdb> 
```

# c# - 如何确定当前登录的用户是否在域中？

> ID：15670325
> 
> 赞同：2
> 
> 时间：2013-03-27T21:59:06.387
> 
> 标签：c#, .net

我试着打这个：

```
Console.WriteLine("Environment.UserDomainName: " + Environment.UserDomainName);
Console.WriteLine("Environment.UserName: " + Environment.UserName); 
```

当您登录到域时`Environment.UserDomainName`确实返回正确的值，但如果没有，它只返回计算机的名称。

那么有没有一种很好的方法来测试当前用户是否登录到域中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:55:09.160

我认为这就是你想要的：

```
 private bool IsUserInDomain()
    {
        var prefix = WindowsIdentity.GetCurrent().Name.Split('\\')[0].ToUpperInvariant();
        if (prefix != Environment.MachineName.ToUpperInvariant())
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

它使用当前计算机名检查当前登录用户的*“域”*。如果用户不是本地用户，它们是不同的。

# iphone - 在矩形上画圆

> ID：15670331
> 
> 赞同：1
> 
> 时间：2013-03-27T21:59:28.337
> 
> 标签：iphone, ios, objective-c, uiview, drawrect

我有 UIView 类，在方法中我想绘制第一个矩形，有时是圆形

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    if ([WhatToDraw isEqual:@"Fields"]) {
        [self DrawField:context];
            }
    if ([WhatToDraw isEqual:@"Ball"]) {
        [self DrawBall:context x:20 y:20];
    }

}

-(void)DrawBall:(CGContextRef)context x:(float) x y:(float) y
{
    UIGraphicsPushContext(context);
    CGRect  rect = CGRectMake(x, y, 25, 25);
    CGContextClearRect(context, rect);
    CGContextFillEllipseInRect(context, rect);
}

-(void)DrawField:(CGContextRef)context 
{

    columns = 6;
    float offset = 5;
    float boardWidth = self.frame.size.width;
    float allOffset = (columns + 2) * offset;
    float currentX = 10;
    float currentWidth = (boardWidth - allOffset) / columns;
    float currentHeight = currentWidth;
    self.fieldsArray = [[NSMutableArray alloc] init];
    //create a new dynamic button board
    for (int columnIndex = 0; columnIndex<columns; columnIndex++) {
        float currentY = offset;
        for (int rowIndex=0; rowIndex<columns; rowIndex++) {
            UIGraphicsPushContext(context);
            //create new field

            CGContextSetRGBFillColor(context, 1.0, 0.0, 0.0, 1.0);
            CGContextBeginPath(context);
            CGRect rect = CGRectMake(currentX, currentY, currentWidth, currentHeight);
            CGContextAddRect(context, rect);
            CGContextFillPath(context);

            currentY = currentY + offset + currentHeight;
        }
        currentX = currentX + offset + currentWidth;
    }  
} 
```

我也有改变绘制内容的方法

```
-(void)Draw:(NSString*)Thing
{
    self.WhatToDraw = Thing;
    [self setNeedsDisplay];
} 
```

绘制矩形（字段）是可以的，但是当我单击按钮绘制圆形时，所有矩形都消失了，只绘制了圆形。如何在现有矩形上画圆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:49:02.440

### 问题

您的问题是，当[UIView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)重绘一个标记为的区域时`setNeedsDisplay`，`setNeedsDisplayInRect`它会在执行您的绘图代码之前完全清除该区域。这意味着除非您在单个绘图操作中同时绘制矩形和圆形，否则您`drawRect`将永远不会在您选择重绘的区域中看到两者都绘制，无论是整个视图边界`setNeedsDisplay`还是特定区域`setNeedsDisplayInRect`。

### 解决方案

没有理由不能每次都在其中绘制矩形和圆形，`drawRect`并通过仅重绘必要的区域来优化绘图性能`setNeedsDisplayInRect`。

或者，您可以使用[CALayers](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)分解内容，将矩形放在一层，圆形放在另一层。这将允许您利用[Core Animation](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514)的动画功能。核心动画提供了一种简单有效的方式来操作屏幕上的图层，其中包含隐式动画，例如移动、调整大小、更改颜色等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:17:45.103

我猜，`CGContextClearRect`你的 DrawBall 方法中的调用是矩形消失的责任......来自 Apple 文档：*如果提供的上下文是窗口或位图上下文，Quartz 有效地清除矩形。*

# jquery - Jquery/Ajax 请求替换 Json 提要中的空数组

> ID：15670335
> 
> 赞同：0
> 
> 时间：2013-03-27T21:59:49.237
> 
> 标签：jquery, ajax, json

我试图在我的 json 中识别一些空数组并放置一个 div 。当脚本看到空数组时，它会停止加载 json。代码是：

```
$.each(data.posts, function (i, item) {
    var newstitle = item.title;
    var newstmbn = item.thumbnail;

    if (data !== undefined && data.posts !== undefined && data.posts.attachments !== undefined) {
        $.each(item.attachments, function (i2, type) {
            $('#news').append('<div>' + item.thumbnail + '</div>');
        });
    } else {
        $.each(item.attachments, function (i2, type) {
            $('#news').append('<div>' + type.images.thumbnail.url + '</div>');
        });
    }
    output.append(news);

}); 
```

我的 json 看起来像：

```
{
    "posts": [
    {
        "id": 914,
        "title": "post1",
        "thumbnail": "\/uploads\/url.jpeg",
        "attachments": [
        {
            "images": {
                "thumbnail": {
                    "url": "\/uploads\/url-150x92.jpeg"
                }
            }
        }
        ]
    },
    {
        "id": 915,
        "title": "post1",
        "thumbnail": "\/uploads\/url.jpeg",
        "attachments": []
    },
    {
        "id": 914,
        "title": "post1",
        "thumbnail": "\/uploads\/url.jpeg",
        "attachments": [
        {
            "images": {
                "thumbnail": {
                    "url": "\/uploads\/url-150x99.jpeg"
                }
            }
        }
        ]
    }
]} 
```

所以你可以看到一些“附件”是空的，我想放置“item.thumbnail”，但它似乎不起作用。你能帮我么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:07:08.520

我认为你的主要问题是这一行：

```
 if (data !== undefined && data.posts !== undefined && data.posts.attachments !== undefined) 
```

这被放置在遍历`data.posts`数组的 .each 循环中。

```
if (data !== undefined && data.posts !== undefined) 
```

应该放在该循环之外，以测试是否可以循环。

```
data.posts.attachments !== undefined 
```

没有任何意义，因为 data.posts 是一个数组，因此没有附件属性。那应该是

```
if(item.attachments !== undefined) 
```

如果这是错误的，即该项目没有附件，则不能像当前那样遍历 item.attachments。另外，你弄错了 if/else，所以替换

```
$.each(item.attachments, function (i2, type) {
    $('#news').append('<div>' + type.images.thumbnail.url + '</div>');
}); 
```

和

```
$('#news').append('<div>' + item.thumbnail + '</div>'); 
```

和

```
$.each(item.attachments, function (i2, type) {
    $('#news').append('<div>' + item.thumbnail + '</div>');
}); 
```

和

```
$.each(item.attachments, function (i2, type) {
    $('#news').append('<div>' + type.images.thumbnail.url + '</div>');
}); 
```

编辑：因为我意识到上面的内容可能很难理解，所以我认为这是正确的代码：

```
if (data !== undefined && data.posts !== undefined) {
    $.each(data.posts, function (i, item) {
        if (item.attachments !== undefined && item.attachments.length > 0) {
            $.each(item.attachments, function (i2, type) {
                $('#news').append('<div>' + type.images.thumbnail.url + '</div>');
            });
        } else {
            $('#news').append('<div>' + item.thumbnail + '</div>');
        }
        output.append(news); //I assume output is a valid jquery object...
    });
} 
```

[http://jsfiddle.net/Jh3hk/](http://jsfiddle.net/Jh3hk/)上的概念证明

# ios - iOS App - 通用或单独的目标？

> ID：15670336
> 
> 赞同：0
> 
> 时间：2013-03-27T21:59:50.813
> 
> 标签：ios, in-app-purchase, icloud, ios-universal-app, universal-binary

我正在尝试决定一个应用程序是否应该是通用的。以下是我的要求和与每个相关的问题：

*   应用内购买。如果您在 iPhone 上下载该应用程序并进行购买，它应该反映在 iPad 版本中。显然你不应该买两次。这是破坏交易吗？有没有办法将应用内购买绑定在单独的二进制文件中？

*   iCloud同步会很好。用户在应用程序中创建内容，如果在 iPhone 上创建的内容出现在 iPad 应用程序中，那就太好了。同样，这是否意味着它必须是通用的？

*   该应用程序很大，包含很多图像。通用应用程序的主要缺点是我的无线下载上限为 50MB，而单个二进制文件意味着 iPhone 可以获取所有 iPad 图像，反之亦然。

*   如果我确实让它们成为了两个独立的应用程序，我是否将我的 Xcode 项目中的所有内容分成两个不同的目标并以这种方式构建？

对这些问题或我应该考虑的其他事情的任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:06:37.047

我认为，更好的选择是 **Universal App**。

> 该应用程序很大，包含很多图像。通用应用程序的主要缺点是我的无线下载上限为 50MB，而单个二进制文件意味着 iPhone 可以获取所有 iPad 图像，反之亦然。

是的。这是我测量的唯一困难。但是，您可以通过单独命名清楚地指定哪些图像应该加载到 iPad 中，哪些应该只加载到 iPhone 中。

如果我是正确的，你可以使用类似的东西`myImage~iPhone.png or myImage~iPad.png`

# java - 尝试将过滤器添加到休眠自引用 OneToMany 连接

> ID：15670339
> 
> 赞同：1
> 
> 时间：2013-03-27T21:59:56.087
> 
> 标签：java, hibernate

我有这个在数据库中构建树的对象。每个节点都指向其父节点，或者为空。我需要这种关系是双向的，所以每个节点也知道它的子节点。当一个节点被删除时，IS_ACTIVE 被设置为 false。如何修改这些注释，以便仅加载 IS_ACTIVE 设置为 true 的子级？

```
@Entity
@Table(name = "node")
public class Node {
  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "PARENT_NODE_ID")
  private Node parentNode;

  @OneToMany(mappedBy = "parentNode", fetch = FetchType.LAZY)
  private Set<Node> childrenNodes;

  @Column(name = "IS_ACTIVE", nullable = false)
  private boolean isActive;

   //other fields that shouldn't matter left out.
} 
```

目前我的单元测试在同一个事务中运行，所以我必须使用 session.refresh(node) 来加载子节点，但每次加载所有子节点时都会忽略我的过滤器和 where 子句。

注释此类的正确方法是什么，以便孩子只加载活跃的孩子？

孩子们是否延迟加载有关系吗？

*请注意，我正在寻找答案。

例如，这个问题似乎是相关的，但解决方案不起作用。我相信它是不同的，因为我的加入是自我引用的......但这可能是由于我缺少其他东西。[用于过滤 @OneToMany 关联结果的注释](https://stackoverflow.com/questions/6919686/annotation-to-filter-results-of-a-onetomany-association)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:03:30.887

当您说“只有将 IS_ACTIVE 设置为 true 的子级才能加载”时，您正在定义一个业务规则，因此您必须指示 Hibernate 以某种方式遵循它。

使用 "session.get(object)" 和 "session.refresh(object)" 您要求 Hibernate 获取一个实体，但是您没有指示 Hibernate 遵循您的业务规则。

简而言之，有两种方法可以解决您的问题：

(1)：让 Hibernate 获取所有“childrenNodes”，随后您可以编写另一个方法来仅返回 IS_ACTIVE = true 的子节点。就像是：

```
public Set<Node> getActiveChildrenNodes(Node n){
   Set<Node> result = new HashSet(); 
   for(Node cn : n.getChildrenNodes()){
        if(cn.isActive)
        result.add(cn);
    }
   return result;
} 
```

如您所见，如果您的数据库中有多条记录，这种方法的性能可能会很差。

(2)：更好的选择是仅加载 IS_ACTIVE = true 的子级。因此，您可以编写如下内容：

```
public List getActiveChildrenNodes(Node n, Session s){
    return = session
        .createQuery("FROM Node WHERE Node.id = :pId AND Node.childrenNodes.isActive : pIsActive")
        .setParameter("pId", n.getId())
        .setParameter("pIsActive", true)
        .list();
} 
```

有几种方法可以做到这一点，我希望这个解释可以帮助你。

干杯，

# php - xmlhttp.responsetext.split while 循环

> ID：15670343
> 
> 赞同：0
> 
> 时间：2013-03-27T22:00:12.253
> 
> 标签：php, javascript, while-loop, xmlhttprequest

我有一些使用 xmlhttp.responsetext 提取一些 mysql 数据的 javascript。我一直在使用它来填充下拉框的表单数据，并且运行良好。但是，我需要在表单中添加第二个下拉菜单，但它无法正常工作。

发生的情况是两个下拉列表都填充了来自 2 个不同表的数据，而每个下拉列表应该只从其各自的表中获取其数据。

可以使用一些帮助解决这个问题，谢谢。

这是javascript代码。

```
<script type="text/javascript">
var counter = 1;
     function addInput(div){
        xmlhttp=new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
         if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
          var newdiv = document.createElement(div);
          newdiv.innerHTML = "<table><tr><td>Line Item " + (++counter) + "</td></tr><tr><td width='190'>Item: <select name='item[]'>" + xmlhttp.responseText.split( "[BRK]" ) + "</select></td><td width='100'>Qty: <input name='quantity[]' type='text' size='2' /></td><td width='500'>Description: <input name='description[]' type='text' size='60' /></td><td width='150'>Amount: <input name='amount[]' type='text' size='6' /></td><td>Tax Rate: <select name='taxrate[]'>" + xmlhttp.responseText.split( "BRK" ) + "</select></td></tr></table><br />";
         }
          document.getElementById(div).appendChild(newdiv);
     }

xmlhttp.open("GET", "dropdownquery.php", false);
xmlhttp.send();

}
</script> 
```

这是php。

```
<?php
include $_SERVER['DOCUMENT_ROOT']."/connect.php";

$result = mysql_query("SELECT * FROM salesitem");
$result2 = mysql_query("SELECT * FROM salestax");

while($row = mysql_fetch_array($result)) {
    echo "<option value=\"".$row['name']."\">".$row['name']."</option>";
}
echo "[BRK]";    

while($row2 = mysql_fetch_array($result2)) {
    echo "<option value=\"".$row2['amount']."\">".$row2['name']."</option>";
}
echo "[BRK]";    

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:04:26.370

拆分字符串时，会得到一个数组。我想你想这样做：

```
var splitResponse = xmlhttp.responseText.split( "[BRK]" );
var firstDropdownContent = splitResponse[0];
var secondDropdownContent = splitResponse[1]; 
```

然后使用这两个新变量来构建您的 HTML。

# python - PyQt ComboBox 结果在 MySQL 中不起作用

> ID：15670344
> 
> 赞同：0
> 
> 时间：2013-03-27T22:00:21.493
> 
> 标签：python, pyqt, mysql-python

我正在编写一个程序，其中从 QCombobBoxes 中选择两个变量，这些变量填充了 MySQL 查询的结果。然后我将这些变量插入到 MySQLdb 语句中，该语句将变量插入到不同的 MySQL 表中。第一个变量工作正常，但是在第二个我得到这个错误，

```
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

两个变量的代码相同，但名称不同

```
name = str(self.item_name.currentText())
cur.execute("SELECT item_id FROM Items WHERE name = '%s';"), name  
db.commit()
results = cur.fetchone()
item_name = results[0]

personnel_name = str(self.purchaser_name.currentText())
cur.execute("SELECT personnel_id FROM Personnel WHERE name = '%s';"), personnel_name  
db.commit()
results = cur.fetchone()
purchaser_id = results[0] 
```

在玩过它之后，它看起来像是`cur.execute("SELECT item_id FROM Items WHERE name = '%s';"), name`在替换的值周围插入了一对额外的引号`%s` 有谁知道它为什么这样做以及如何阻止它？我对两个变量进行了完全相同的编码，并且似乎`name`从 MySQL 获得了一对额外的引号

这是填充 QComboBox 的代码：

```
 #Get list of items currently in the database
    cur = db.cursor()
    cur.execute("SELECT name FROM Items")
    db.commit()
    results = cur.fetchall()
    for name in results:
        self.item_name.addItem(name[0])

    #Get list of purchaser names
    cur.execute("SELECT name FROM Personnel")
    db.commit()
    results = cur.fetchall()
    for name in results:
        self.purchaser_name.addItem(name[0]) 
```

如果我手动插入一个变量，它工作正常。例如：`cur.execute("SELECT item_id FROM Items WHERE name = 'Wire';")` 只有当我使用字符串格式时`%s`才会发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:12:12.920

```
c.execute("SELECT * FROM sometable WHERE some_condition=?","My Condition") 
```

你应该总是使用 ? 这种东西的占位符

[编辑]

试试 1。`cur.execute("SELECT item_id FROM Items WHERE name = '%s';"%(name,))`

或 2。`cur.execute("SELECT item_id FROM Items WHERE name = %s;", (name,))`

从我的简短阅读来看，我认为 mysql 驱动程序会自动引用 %s 参数，我的结论是这`cur.execute("SELECT item_id FROM Items WHERE name = %s;", (name,))`是最正确的方法（避免注入等）。

# html - CSS：圆角 + 不透明度 = 图像在 Firefox 19 中消失

> ID：15670348
> 
> 赞同：5
> 
> 时间：2013-03-27T22:00:28.010
> 
> 标签：html, image, css, firefox

我想使用 CSS 为我的图像添加圆角，并更改鼠标悬停时的不透明度，因为这很可爱。有一个错误：鼠标悬停后，图像消失。

CSS 非常简单：

```
.article img {
  margin-bottom: 5px;
  -moz-border-radius: 15px;  /* for Firefox */
  -webkit-border-radius: 15px; /* for Webkit-Browsers */
  border-radius: 15px; /* regular */
}

.article:hover .img {
  opacity: 0.8;
} 
```

html 也只是为了测试（这是我用谷歌搜索的第一张图片）：

```
<li class="article">
    <div class="img">
        <a href="#">
            <img src="http://i.telegraph.co.uk/multimedia/archive/02371/karen-ann-jones_2371086k.jpg" alt="Url">
        </a>
    </div>
</li> 
```

你可以在 jsfiddle 上看到它：http: [//jsfiddle.net/9DjLT/3/](http://jsfiddle.net/9DjLT/3/)

**浏览器：ff19**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T14:58:51.593

[我最近在尝试在我的网站](http://tracemeek.com/blog/)上实现块级链接时遇到了这个问题，我通过在未悬停的 img 声明中添加以下规则来解决它：

```
border: 0.001em solid transparent; 
```

可以肯定的是，这是一个 hack，但它似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:40:38.390

我认为您在 css 中有问题，因为 li:hover 它占用了 100% 的宽度。所以直到你的鼠标光标在你的图像效果上不透明度。只需尝试以下 CSS 更改

```
.img a:hover{
  opacity: 0.8;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-09T21:46:27.580

FWIW, I hit a similar problem in Chrome 38\. In my case, I had a div with a `border-radius` value, and an image element with a transparency value, and the transparent image was hidden. To fix this, I added a non-1 opacity to the parent element (with the border-radius). Something like this:

```
.round_box {
  border-radius: 5px;
  opacity: 0.999999;
}

.transparent {
  opacity: 0.6;
}

<div class="round_box">
  <div class="transparent">
</div> 
```

... Adding `opacity: 0.999999;` to the parent element made the transparent element display properly. I should note that I also have a lot of other interesting styles going on - drop shadows, column layout - but, maybe a similar hack will work for others.

# android - 如何计算图片内部的特定距离？

> ID：15670351
> 
> 赞同：12
> 
> 时间：2013-03-27T22:00:40.070
> 
> 标签：android, android-camera, augmented-reality, coordinate-systems, coordinate-transformation

对不起，我的英语不好。我有以下问题：

![1](../Images/15fcd7e009d6a4b25694668dd87e434a.png)

假设我的移动设备的相机正在显示这张照片。

在图片中，您可以看到 4 个不同的位置。我知道每个位置（经度，纬度）。

现在我想知道，图片中的特定位置在哪里。例如，我想在前面 20 米和左边 5 米处有一个矩形。我只知道这一点的纬度/经度，但我不知道，我必须将它放在图片（x，y）内的哪个位置。例如，在我看来，POS3 位于 (0,400)。POS4 在 (600,400) 处，依此类推。

我必须将新点放在哪里，即前方 20 米和左侧 5 米？（所以我的输入是：（LatXY，LonXY），我的结果应该是屏幕上的（x，y））

我还得到了相机的高度以及相机的 x、y 和 z 轴的角度。

我可以使用简单的数学运算来解决这个问题吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:53:20.530

我看到了几个问题。

唯一真正的错误是您将投影放大 _canvasWidth/2 等，而不是从主点平移那么远 - 将这些值添加到投影结果中，乘法就像“缩放”到投影那么远。

其次，处理全局笛卡尔坐标空间是一个坏主意。使用您使用的公式，(60.1234, 20.122) 和 (60.1235, 20.122) 之间的差异（即小的纬度差异）会导致所有 3 个轴上的变化幅度相似，这感觉不对。

采用与计算机图形相同的方法更直接：将您的相机设置为“相机空间”的原点，并通过获取相机位置与物体。见这里：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

第三，您的透视投影计算适用于您可能没有的理想针孔相机。这只是一个小的修正，但为了准确起见，您需要弄清楚如何额外应用与相机的内在相机参数相对应的投影。有两种方法可以做到这一点：您可以将其作为您已有方案的后乘法，或者您可以从乘以 3x3 矩阵更改为使用完整的 4x4 相机矩阵：[http ://en.wikipedia.org /wiki/Camera_matrix 里面](http://en.wikipedia.org/wiki/Camera_matrix)有参数。

使用这种方法，透视投影关于原点对称 - 如果您不检查 z 深度，您会将您身后的点投影到屏幕上，就好像它们与您面前的 z 距离相同。

最后，我不确定android API，但请确保您获得的是真正的北向轴承而不是磁北向轴承。某些平台根据参数或配置返回。（如果这就是 API 想要的等等，那么你的度数就是弧度 - 愚蠢的事情，但我已经减少了调试时间:)）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T21:53:27.490

您想要的答案将取决于您需要的结果的准确性。正如 danaid 所指出的，图像传感器的非线性和大气失真等其他因素可能会导致误差，但在不同设备上使用不同的相机等将是难以解决的问题。因此，让我们首先获得一个合理的近似值，当需要更高的精度时可以对其进行调整。

首先，如果您愿意，您可以忽略来自设备的方向信息。如果您有五个位置（POS1 - POS4 和相机，在一组一致的坐标组中，那么您就拥有了所需的一切。事实上，您甚至不需要所有这些点。

关于一致坐标的说明。在他的尺度上，一旦你使用将经纬度转换为米，使用 cos(lat) 作为比例因子，你应该能够从“平坦地球”的角度对待每个人。然后您只需要记住相机的 xy 平面大致是全局 xz 平面。

**概念背景** 下图展示了点在图像平面上的投影。用于透视的 dz 可以直接使用远点和近点之间的视野距离与它们的物理距离的比例得出。在**简单的情况下**，线 POS1 到 POS2 平行于线 POS3 到 POS4，透视因子只是两条线的缩放比例：

```
Scale (POS1, POS2) = pixel distance (pos1, pos2) / Physical distance (POS1, POS2)
Scale (POS3, POS4) = pixel distance (pos3, pos4) / Physical distance (POS3, POS4)
Perspective factor = Scale (POS3, POS4) / Scale (POS1, POS2) 
```

因此，应用于矩形顶点的透视因子将是与线之间顶点的距离的比例。简化：

```
Factor(rect) ~= [(Rect.z - (POS3, POS4).z / ((POS1, POS2).z - (POS3, POS4).z)] * Perspective factor. 
```

**回答**

透视变换相对于焦点在观察方向上的距离是线性的。下图是 X 轴平行于图像平面，Y 轴指向视图方向绘制的。在该坐标系中，对于任意点 P 和距原点任意距离的图像平面，投影点 p 的 X 坐标 px 与 Px/Py 成正比，这些值可以进行线性插值。

在图中，tp 是目标点的期望投影。要获得 tp.x，例如使用距离调整在 pos1.x 和 pos3.x 之间进行插值，如下所示：

```
tp.x = pos1.x + ((pos3.x-pos1.x)*((TP.x/TP.y)-(POS1.x/POS1.y))/((POS3.x/POS3.y)-(POS1.x/POS1.y)) 
```

这种方法的优点是它不需要任何关于每个像素所看到的角度的先验知识，并且对于相机位置和方向的合理错误将是相对稳健的。

**进一步细化**

使用更多数据意味着能够补偿更多错误。在多个视点的情况下，可以使用[Tienstra 方法](http://mesamike.org/geocache/GC1B0Q9/tienstra/)校准相机的位置和方向。可以在[此处](http://www.iri.upc.edu/people/thomas/papers/SURVEYING2009.pdf)找到此方法的简明证明（使用重心坐标） 。

由于所需的变换都是基于齐次坐标的线性变换，因此您可以应用[重心坐标](https://math.stackexchange.com/questions/173711/z-index-of-an-arbitrary-point-on-a-flattened-3-dimensional-triangle/173727#173727)基于任意三个或更多点进行插值，假设它们在齐次 3 空间中的 X、Y、Z、W 坐标和它们的 (x,y) 坐标在图像空间。点越接近目标点，非线性可能越不显着，因此在您的示例中，您将使用 POS 1 和 POS3，因为矩形在左侧，而 POS2 或 POS4 取决于相对距离.

（重心坐标可能是最熟悉的用于在 3D 图形中的三角形（片段）上插入颜色的方法。）

编辑：重心坐标仍然需要 W 齐次坐标因子，这是表示距焦点距离的透视校正的另一种方式。有关更多详细信息，请参阅GameDev 上的[这篇文章](http://www.gamedev.net/topic/593669-perspective-correct-barycentric-coordinates/)。

两个相关的 SO 问题：3d[中纹理坐标的透视校正和](https://stackoverflow.com/questions/5424078/perspective-correction-of-texture-coordinates-in-3d)[重心坐标纹理映射](https://stackoverflow.com/questions/12360023/barycentric-coordinates-texture-mapping)。 ![此图可能有助于解释基于全局坐标的图像坐标插值](../Images/b9a4b09cdce0120785b9bb15f143225a.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T22:21:11.247

如果您知道相机框架中的点和真实世界坐标，一些简单的线性代数就足够了。像 OpenCV 这样的包将具有这种类型的功能，或者您可以自己创建投影矩阵：

[http://en.wikipedia.org/wiki/3D_projection](http://en.wikipedia.org/wiki/3D_projection)

一旦你有了一组点，它就像填充几个向量来求解方程组一样简单。这会给你一个投影矩阵。一旦有了投影矩阵，就可以假设 4 个点是平面的。将任意 3D 坐标相乘以找到对应的 2D 图像平面坐标。

# jquery - TypeError: $(...).on 不是函数

> ID：15670352
> 
> 赞同：37
> 
> 时间：2013-03-27T22:00:45.820
> 
> 标签：jquery, cakephp-1.3, lightbox

我正在使用[jQuery litebox](http://sandbox.tse-webdesign.be/lightbox-print/)。添加 JS 和 CSS 文件后，我收到此错误 TypeError：

```
$(...).on is not a function at this line in js file                                           
 "return  $('body').on('click',       
'a[rel^=lightbox], area[rel^=lightbox]', function(e) {" 
```

有人可以帮我理解这里的问题吗？

我在 CakePHP 1.3 中做这个实现。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-12-19T07:07:39.593

如果您使用的是旧版本的 jQuery，则可能会出现问题。因为旧版本的 jQuery 有 'live' 方法而不是 'on'

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-27T22:06:04.827

造成这种情况的通常原因是您*还*使用了 Prototype、MooTools 或其他一些使用该`$`符号的库，并且您在 jQuery 之后包含了该库，因此该库“获胜”（`$`为自己） . 所以 的返回值`$`不是一个 jQuery 实例，所以它上面没有 jQuery 方法（比如`on`）。

您可以将 jQuery 与其他库一起使用，但如果这样做，则必须使用`jQuery`符号而不是其别名`$`，例如：

```
jQuery('body').on(...); 
```

通常最好在`script`包含 jQuery 的标签之后，在包含另一个库的标签之前添加它：

```
<script>jQuery.noConflict();</script> 
```

...尽管如果您在 jQuery 之后加载另一个库，则*不需要*（如果您先加载另一个库）。

但是，仅就页面重量而言，在同一页面上使用多个全功能 DOM 操作库并不理想。因此，如果您可以只使用 Prototype/MooTools/whatever 或只使用 jQuery，那通常会更好。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-07-16T11:47:42.513

在我的情况下，这个问题通过将我的 jQuery 封装在：

```
(function($) {
//my jquery 
})(jQuery); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-16T13:32:27.977

如果您使用的是旧版本的 jQuery(< 1.7)，那么您可以使用“bind”而不是“on”。这仅适用于您使用旧版本的情况，因为从 jQuery 3.0 开始，“绑定”已被弃用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-16T23:53:47.200

就我而言，这段代码解决了我的错误：

```
(function (window, document, $) {
            'use strict';
             var $html = $('html');
             $('input[name="myiCheck"]').on('ifClicked', function (event) {
             alert("You clicked " + this.value);
             });
})(window, document, jQuery); 
```

你不应该把你的功能放在 $(document).ready

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-17T15:42:38.103

我尝试了奥斯卡（和许多其他人）的解决方案，但对我来说它最终只适用于：

```
jQuery(function($){
   // Your jQuery code here, using the $
}); 
```

请参阅：[https ://learn.jquery.com/using-jquery-core/avoid-conflicts-other-libraries/](https://learn.jquery.com/using-jquery-core/avoid-conflicts-other-libraries/)

# asp.net - 在 aspx 页面中使用条件绑定文本框值

> ID：15670355
> 
> 赞同：0
> 
> 时间：2013-03-27T22:00:56.980
> 
> 标签：asp.net, .net

我正在使用 asp 表单视图。我想根据条件绑定文本框值。

```
<td style="height: 12px; 
            border-right: silver 1px solid; 
            border-top: silver 1px solid;
            border-left: silver 1px solid; 
            border-bottom: silver 1px solid;">

    <asp:TextBox ID="txtHaulZoneCodeLEM" 
            runat="server" 
            CssClass="cagText" 
            Text='<%# Bind("HaulZoneCodeLEM") %>'>
    </asp:TextBox>

</td> 
```

我试过这个：

```
<asp:TextBox 
    ID="txtHaulZoneCodeLEM" 
    runat="server" 
    CssClass="cagText" 
    Text='<%# ((TextBox) Container.DataItem).HaulZoneCodeLEM != 0 ? ((TextBox) Container.DataItem).HaulZoneCodeLEM : string.Empty %>'> 
```

如何解决这个问题？

我搬到后面的代码：

```
 <td style="height: 12px; border-right: silver 1px solid; border-top: silver 1px solid;
                                        border-left: silver 1px solid; width: 339px; border-bottom: silver 1px solid;">

       <asp:TextBox ID="txtHaulZoneCodeLEM" runat="server" CssClass="cagText" Text=ConvertHaulZoneCodeForDisplay('<%# Bind("HaulZoneCodeLEM") %>')>                      
                                        </asp:TextBox>

                                    </td> 
```

在我的页面后面的代码中，我这样写：

```
 Protected Function ConvertHaulZoneCodeForDisplay(ByVal str As String) As String
        If str = 0 Then Return ""
    End Function
End Class 
```

我仍然在aspx页面中遇到错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:44:12.390

您是否可以考虑使用 `event`代替`method`？在那里，您可以检查文本框的值并对其进行修改。更重要的是，如果您要将数据从数据源绑定到文本框，我建议您使用数据绑定事件。更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.ui.control.databinding.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.databinding.aspx)

# c++ - fstream seekg()、seekp() 和 write()

> ID：15670359
> 
> 赞同：24
> 
> 时间：2013-03-27T22:01:19.817
> 
> 标签：c++, file-io, fstream, seekg

我正在寻找有关您何时写入文件的方式`seekg()`和工作方式的一些说明。`seekp()`比如说我有一个像这样的文件：

```
offset 0: 2
offset 4: 4
offset 8: 6
offset 12: 8
offset 16: 10 
```

现在我想打开文件并尝试读取和写入值。

```
fstream file;
file.open("file.txt", fstream::in |fstream::out | fstream::binary);
file.seekp(0, ios::end) // seek to the end of the file
int eofOffset = file.tellp(); // store the offset of the end-of-file, in this case 20

int key = 0;

file.seekg(12, ios::beg); // set the seek cursor to offset 12 from the beginning of the file
file.read((char *) &key, (int)sizeof(int)); // read in the next 4 bytes and assign it to key, in this case 8
file.seekg(8, ios::beg); // set the seek cursor to offset 8 from the beginning of the file
file.read((char *) &key, (int)sizeof(int)); // read in the next 4 bytes and assign it to key, in this case 6 
```

现在我想写到文件的末尾。由于该`seekg()`函数只移动搜索光标，我的`seekp()`光标应该仍然在文件的末尾，对吧？所以：

```
int newKey = 12;
file.write((char *) &newKey, sizeof(int)); 
```

应该使我的文件现在看起来像：

```
offset 0: 2
offset 4: 4
offset 8: 6
offset 12: 8
offset 16: 10
offset 20: 12 
```

现在，如果我选择寻找偏移量并将其值作为偏移量写入刚刚插入的值，我的文件会发生什么情况。例如，我想`offset 8`保留`eofOffset = 20`，因为我们刚刚在那个偏移量处插入了 12。

如果我做：

```
file.seekp(8, ios::beg);
file.write((char *) &eofOffset, sizeof(int)); 
```

它是否正确地将我的文件重写为如下所示：

```
offset 0: 2
offset 4: 4
offset 8: 20
offset 12: 8
offset 16: 10
offset 20: 12 
```

`seekg()`如果我在使用和`seekp()`函数时出现任何错误，请告诉我。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-28T03:02:06.340

类模板`std::basic_filebuf`保存单个文件位置

> § 27.9.1.1
> 
> 1.  basic_filebuf 类将输入序列和输出序列都与文件相关联。
> 2.  读取和写入由类 basic_filebuf 的对象控制的序列的限制与使用标准 C 库 FILE 读取和写入的限制相同。
> 3.  尤其：
>     *   如果文件未打开以进行读取，则无法读取输入序列。
>     *   如果文件未打开以进行写入，则无法写入输出序列。
>     *   **为输入序列和输出序列维护一个联合文件位置。**

这意味着当您使用 a`std::basic_fstream`时，默认情况下使用 a `std::basic_filebuf`，单个文件的位置会同时被`seekp()`和移动`seekg()`；除非您使用单独的变量来存储其中一个位置，以便您随后可以回溯到它，否则您无法单独跟踪 put 和 get 位置。

第 2 点的含义是，在读取和写入之间，`fstream`您必须在从输出更改为输入时刷新缓冲区或查找文件位置，并且您必须在文件末尾或从更改时查找文件位置输入输出。

有关这些限制的详细信息，请参阅 C99 标准的第 7.19.5.3/7 节（“`fopen`函数”）或 C11 的第 7.21.5.3/7 节。

# macos - AppleScript 查找邮件发件人的域并将其添加到规则中

> ID：15670363
> 
> 赞同：2
> 
> 时间：2013-03-27T22:01:34.800
> 
> 标签：macos, email, applescript

这是为了处理垃圾邮件。现在我知道了，每次我们打开垃圾邮件时，垃圾邮件发送者都知道电子邮件 ID 是有效的。将其标记为垃圾邮件或做任何事情都无济于事。

现在我的问题。我正在为我的 Applescript 寻求帮助。

## 这是我运行脚本时要遵循的逻辑

查找发件人电子邮件 id 解析以获取域名（我被困在这里）

## 将域名添加到特定的邮件规则“Addedfilter”作为条件（如果我可以自动化这部分，这是可选的）

我打算通过邮件服务使用它，以便将发件人 ID 的域名收集到我的邮件规则中。

```
tell application "Mail"
   set theSelection to selection
   set theMessage to item 1 of theSelection
   set theSender to sender of theMessage
   --set theDomain to (do shell script "cut -f1 -d'@' $1" & quoted form of theSender)
   set theDomain to (do shell script "awk -F\"@\" '{print $2}'" & quoted form of theSender)

   display dialog theDomain
end tell 
```

PS：标记“垃圾邮件”没有帮助。我也有一些动机来捕获垃圾邮件域 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:46:14.843

试试这个来获取域：

```
set theDomain to (do shell script "echo  " & quoted form of rich text 1 through -2 of theSender & " | awk " & quoted form of "{split($0,a,\"@\"); print a[2]}") 
```

或这个：

```
set theDomain to (do shell script "echo  " & quoted form of rich text 1 through -2 of theSender & " | awk -F \"@\" '{print $2}' $1") 
```

然后，如果要将域条件添加到规则中，请执行以下操作：

```
set r to rule "Addedfilter"
tell r
   make new rule condition at end of rule conditions with properties {expression:theDomain, qualifier:does contain value, rule type:from header}
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T08:30:39.960

另一种获取域名的方法：

```
 set theSelection to selection
    set theMessage to item 1 of theSelection
    set theEmail to extract address from sender of item 1 of theMessage
    set AppleScript's text item delimiters to "@"   
    set theDomain to text item 2 of theEmail 
```

在这里找到它： [https ://forum.keyboardmaestro.com/t/extract-domain-name-from-current-email-and-open-in-safari/2904/5](https://forum.keyboardmaestro.com/t/extract-domain-name-from-current-email-and-open-in-safari/2904/5)

# css - 如何在 span 元素中将省略号显示为文本？

> ID：15670367
> 
> 赞同：-3
> 
> 时间：2013-03-27T22:02:05.753
> 
> 标签：css, html, ellipsis

我有一个要求，我想在其中显示...作为跨度内的文本。由于某种我不知道的原因，似乎没有浏览器将其识别为文本。我在这里缺少什么吗？如果有任何区别，我在页面中包含 jquery 1.8.3。

```
.ellipse{
    float: left;
 }    

var less = '<span class="ellipse less">...</span>';
var div = '<div></div>'

$(div).html(less); 
```

我期待看到

```
<span class="ellipse less>...</span> 
```

在浏览器调试器中。但我看到的是

```
<span class="ellipse less></span> 
```

... 不会在 span 元素内显示为文本。

小提琴链接[http://jsfiddle.net/P4J8u/12/](http://jsfiddle.net/P4J8u/12/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:16:33.250

[小提琴](http://jsfiddle.net/watson/P4J8u/)

这是一个将“...”添加到页面的工作示例。

```
var less = '<span class="ellipse less">...</span>';
$('body').html(less); 
```

在您的问题中，您进行了编辑以包含，，`$(this).html(less);`但是您还有哪些其他代码，因为没有人知道所指`this`的是什么。

# regex - 正则表达式 - 如何匹配非单词字符的边界？

> ID：15670369
> 
> 赞同：2
> 
> 时间：2013-03-27T22:02:06.983
> 
> 标签：regex, preg-replace

我需要匹配以下内容：

```
-foo
foo- 
```

但我不想匹配`foo-bar`。

我不能使用`\b`，因为它与连字符的边界不匹配。我的目标是用空格替换连字符。建议？

**更新1**（更好的例子）：

```
xxx yyy -foo foo- foo-bar zzz 
```

我只对字符串`-foo`和`foo-`. 这个想法是删除那些连字符。连字符是用来连字的。意思是，它的左右应该有一个词。如果没有，则不应出现连字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:15:48.023

具有负前瞻和后视的解决方案：

```
$string = 'xxx yyy -removethis andthis- foo-bar zzz -andalsothis-';
$new_string = preg_replace('/(?<!\w)-(\w+)-(?!\w)|(?<!\w)-(\w+)|(\w+)-(?!\w)/', '$1$2$3', $string);
echo $new_string; // Output: xxx yyy removethis andthis foo-bar zzz andalsothis

/*
   (?<!\w) : Check if there is a \w behind, if there is a \w then don't match.
   (?!\w) : Check if there is a \w ahead, if there is a \w then don't match.
   \w : Any word character (letter, number, underscore)
*/ 
```

[在线演示](http://regex101.com/r/iN9uE0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:57:45.130

我的解决方案：`^-|-$| -|-`

```
Match either the regular expression below (attempting the next alternative only if this one fails) «^-»
   Assert position at the beginning of the string «^»
   Match the character “-” literally «-»
Or match regular expression number 2 below (attempting the next alternative only if this one fails) «-$»
   Match the character “-” literally «-»
   Assert position at the end of the string (or before the line break at the end of the string, if any) «$»
Or match regular expression number 3 below (attempting the next alternative only if this one fails) « -»
   Match the characters “ -” literally « -»
Or match regular expression number 4 below (the entire match attempt fails if this one fails to match) «- »
   Match the characters “- ” literally «- » 
```

# intersystems - 检查 DTL 中字段是否为空的最佳方法

> ID：15670370
> 
> 赞同：0
> 
> 时间：2013-03-27T22:02:12.167
> 
> 标签：intersystems, intersystems-ensemble

对于非重复字段。如何编写仅在字段为空时才执行的 If。

即来源。{PID:19}

我在 if 中尝试了 source.{PID:19} = "" 和 source.{PID:19} '= "" （有真假），但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:21:16.450

我最终使用了`..Length(source.{PID:19})>0`which 工作。以为我以前试过这个。

# ruby - 迭代对象数组并添加到较早的元素...比迭代一小部分更有效吗？

> ID：15670372
> 
> 赞同：0
> 
> 时间：2013-03-27T22:02:16.800
> 
> 标签：ruby

我有一个说 1000 个对象的列表。我想在每个对象中添加一个字段来表示最后 20 个对象的标准偏差。到列表末尾，我将有 980 个滚动标准偏差和 20 个 nil。

如果我遍历列表并找到 stdev，但我之前将它推送到元素 20 个对象，那是什么类型的问题？那是2n的问题吗？

这是我的代码示例：

```
(0...thelist.length-20).each do |n|
       ...do some calculations on n 
       if n == 20:
           ...use the calculations to calculate stdev
           thelist[n-20].push(stdeviation)
       end
end 
```

基本上我想知道如何`[n-20]`影响函数的理论速度。

我也可以做类似下面的事情来计算标准偏差，但我觉得上面的会更快，因为我在每个单独的元素上计算更多，而不是在下面对 20 个元素进行迭代。速度有区别吗？

```
 (0...thelist.length-20).each do |n|
       (n..n+20).each do |m|
            ...calculate stdev
       end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:14:58.823

我不知道理论速度，但是当它成为一个实际问题时，我会使用[each_cons](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_cons)并研究速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:05:44.097

`stddev`是`sqrt(variance)`。总体方差是总体平方和的平均值。您说您希望在 20 个元素的子列表上运行 stddev。因此，您可以先计算前 20 个元素的平方和，然后迭代剩余元素，减去第 n-20 个元素的平方并加上新元素的平方并计算`sqrt(current_sum_of_squares/20.0)`stddev . 这将导致计算量减少约 20 倍，因为在 N-20 个 20 元素子列表上独立计算 stddev。

将 stdev 推到第 n-20 个元素是微不足道的，因为它不涉及对大列表的任何重大突变，只是对那个元素的附加。

我现在得跑去开会，否则我会展示一些代码。如果不清楚的话，也许今晚晚些时候。

# php - DOMDocument 从字符串追加已修复的 html

> ID：15670374
> 
> 赞同：1
> 
> 时间：2013-03-27T22:02:29.893
> 
> 标签：php, domdocument

所以我试图从使用 DOMDocument 的页面中显示快照 html。到目前为止，我拥有的是我从远程位置加载的主页

```
$dom = new DOMDocument('1.0', 'UTF-8');
$dom->loadHTML($remote); 
```

然后我选择两个元素，我的头部区域和主要内容内的一个 div，我将在其中添加我的内容（html 取自字符串变量）

```
$head = $dom->getElementsByTagName('head')->item(0);
$noticia2 = $dom->getElementById('content_home'); 
```

在此之后，我已将内容添加到我的脚本标签

```
$jquery = '$(document).ready(function(){ $("#feed_home").hide()});
      if (window.location.hash) {
        Destino = window.location.hash.replace(\'#!\', \'?\');

             window.location.href = window.location.href.split(\'#\')[0] + Destino;
    }

';    

$script = $dom->createElement('script', $jquery);
$script_type = $dom->createAttribute('type');

$script_type->value = 'application/javascript';
$script->appendChild($script_type);

$head->appendChild($script); 
```

然后我浏览我的数据库并收集一些信息，我将使用 mysql_fetch_array 在一个大的 $​​content 字符串中使用 html 标签进行格式化。现在我的问题....每当我尝试将其附加到我的 $div 节点中时，我都无法将这些内容视为 HTML，因此我在显示这些内容时遇到了问题。

```
$div = $dom->createElement('div', $content);
$div_class = $dom->createAttribute('class');
$div_class->value = 'noticia-ajax';
$div->appendChild($div_class);
$noticia2->appendChild($div);
echo $dom->saveHTML(); 
```

我得到的是一个正常的页面，我的 div “noticia-ajax” 格式良好，然后在这个人里面我有

```
SOME TEXT <BR> AND NO HTML TAG TREATED AS HTML TAG <BR> SOMETHING LIKE THIS 
```

当然，我希望将所有这些标签都读取为 html！对？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:14:30.463

我认为您需要做的是创建一个文档片段：

```
$div = $dom->createElement( 'div'); // No $contents here
$fragment = $dom->createDocumentFragment();
$fragment->appendXML( $content);
$div->appendChild( $fragment); 
```

# ios - ios - 使用 UrbanAirship 库编译代码会出现“发布不可用”错误

> ID：15670375
> 
> 赞同：0
> 
> 时间：2013-03-27T22:02:33.817
> 
> 标签：ios, ios5, ios6, apple-push-notifications, urbanairship.com

`UAPushSettingsAliasViewController.m`我将 UrbanAirship 库添加到我的代码中，并且在编译和`UAInboxMessageListCell.m`一些类似的类时遇到了这些错误。此方法发生错误：

```
- (void)dealloc {

    RELEASE_SAFELY(tableView);
    RELEASE_SAFELY(aliasCell);
    RELEASE_SAFELY(textCell);
    RELEASE_SAFELY(textLabel);
    RELEASE_SAFELY(aliasField);

    [super dealloc];
} 
```

大多数错误是`"release not available: not available in automatic reference counting mode"`

有谁知道为什么会发生这种情况以及我该如何解决这个问题？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:35:38.000

这是因为您正在使用诸如和之类的功能`dealloc`，ARC 中不需要这些功能，因为它会自动管理内存。您可以在构建设置中关闭 ARC，或在不使用 ARC 的文件上添加编译器标志。`release``retain``-fno-objc-arc`

在构建设置中 ![在此处输入图像描述](../Images/cae8cd9da37828100220910cc18245e3.png)

对于`-fno-objc-arc`，在此处添加

![在此处输入图像描述](../Images/cfd547d00527062bc959100b30408987.png)

通过双击编译器标志添加它，并将其添加到包含诸如`retain`、`autorelease`、`release`和`[super dealloc]`.

# javascript - jQuery slideToggle 父母和孩子

> ID：15670377
> 
> 赞同：1
> 
> 时间：2013-03-27T22:02:39.773
> 
> 标签：javascript, jquery

这是我的代码

```
<li class="page_item "><a href="javascript:">A</a>
<ul class="children">
    <li class="page_item"><a href="">1</a></li>
    <li class="page_item"><a href="">2</a></li>
</ul>
</li>
<li class="page_item "><a href="">B</a>
<ul class="children">
    <li class="page_item"><a href="">1</a></li>
    <li class="page_item"><a href="">2</a></li>
    <li class="page_item"><a href="">3</a></li>
    <li class="page_item"><a href="">4</a></li>
</ul>
</li>

<li class="page_item "><a href="">C</a>
<ul class="children">
    <li class="page_item"><a href="">1</a></li>
    <li class="page_item"><a href="">2</a></li>
    <li class="page_item"><a href="">3</a></li>
    <li class="page_item"><a href="">4</a></li>
</ul>
</li>

$('.page_item').click(function(){

    $('ul.children').slideToggle();
 });
ul.children{
  display: none;
} 
```

[在线样本](http://jsfiddle.net/kHLuR/)

我怎么能这样，当我点击A部分时，只是为了打开A部分的孩子，当我点击B时，只显示B的。不开全节开。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:04:36.957

范围滑动切换到当前元素，使用`this`：

```
$('.page_item').click(function(){
  var that = this;
  $('.page_item').each(function(){
   if(that == this)return true;//continue
   $('.children:not(:hidden)',this).slideToggle();
  });
  $('ul.children',this).slideToggle();
}); 
```

编辑关闭其他显示的列表。**[jsFiddle 演示](http://jsfiddle.net/kHLuR/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:05:48.357

像这样：

```
$('.page_item').click(function(){
    $('ul').slideUp();
    $(this).find('ul').slideToggle();

    return false;
 }); 
```

# ios - 使用 Instapaper API 时，为什么我不断收到 401 错误？

> ID：15670378
> 
> 赞同：0
> 
> 时间：2013-03-27T22:02:43.623
> 
> 标签：ios, objective-c, api, afnetworking, instapaper

我正在尝试通过[AFOAuth2Client 库使用](https://github.com/AFNetworking/AFOAuth2Client)[完整的 Instapaper API](http://www.instapaper.com/api/full) ，但我不断收到错误代码 401。我不知道我的代码有什么问题。当我从电子邮件中复制和粘贴它们时，我绝对拥有正确的 ID 和秘密。

```
- (IBAction)loginPressed:(UIButton *)sender {
    NSURL *baseURL = [NSURL URLWithString:@"https://www.instapaper.com/"];

    AFOAuth2Client *OAuthClient = [AFOAuth2Client clientWithBaseURL:baseURL
                                                  clientID:@"fromEmail"
                                                  secret:@"fromEmail"];

    NSDictionary *parameters = @{
        @"x_auth_username:" : self.usernameField.text,
        @"x_auth_password:" : self.passwordField.text,
        @"x_auth_mode:" : @"client_auth"
    };

    [OAuthClient authenticateUsingOAuthWithPath:@"api/1/oauth/access_token"
                 parameters:parameters
                 success:^(AFOAuthCredential *credential) {
                     NSLog(@"I has token! %@", credential.accessToken);
                     // [AFOAuthCredential storeCredential:credential withIdentifier:OAuthClient.serviceProviderIdentifier];
                 }
                 failure:^(NSError *error) {
                     NSLog(@"Sheet. %@", [error localizedDescription]);
                 }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T18:21:23.930

根据[Instapaper 的 API 文档](http://www.instapaper.com/api/full)：

> Instapaper 的 OAuth 实现与您可能习惯的不同：没有请求令牌/授权工作流程。这使它变得简单得多。相反，Instapaper 使用与 Twitter 非常相似的 xAuth 实现。所以你仍然需要签署你的请求，但获取令牌很简单。
> 
> **xAuth 是获取 Instapaper 访问令牌的唯一方法。**

OAuth 2 与 OAuth 1 不同，OAuth 1 本身与 xAuth 不同。

`AFOAuth2Client`不会在这里工作。您可能会遇到[`AFXAuthClient`](https://github.com/romaonthego/AFXAuthClient)或[`AFOAuth1Client`](https://github.com/AFNetworking/AFOAuth1Client)。

# windows - 替换/更新文件共享上的特定文件

> ID：15670384
> 
> 赞同：1
> 
> 时间：2013-03-27T22:03:09.063
> 
> 标签：windows, file, powershell, scripting, powershell-2.0

我正在尝试搜索多个目录并替换`newfile.swf`.

```
$Logfile = "C:\FOLDER\filecopy.log" 
$ServerDir = "\\SERVER\TESTING\DIRECTORY"
$SourceFile = "C:\FOLDER\newfile.swf"
$OldFiles = Get-ChildItem -path $ServerDir -Recurse -Include newfile.swf |
            Sort-Object Name | Format-Table Fullname -Auto

foreach ($O in $OldFiles) {
    if (Test-Path $O) {
        Copy-Item $SourceFile $O -force
    } else {
        Add-Content $logfile "File Copy Failed"
        Add-Content $logfile $error[$error.count-1]
        Add-Content $logfile "==================="
    }
} 
```

下面列出了错误。

```
File Copy Failed System.Management.Automation.ParseException:
Unexpected token 'C:\FOLDER\newfile.swf' in expression or statement.
at System.Management.Automation.Parser.PipelineRule()
at System.Management.Automation.Parser.StatementRule()
at System.Management.Automation.Parser.StatementListRule(Token start)
at System.Management.Automation.Parser.ScriptBlockRule(String name, Boolean requireBrace, Boolean isFilter, ParameterDeclarationNode parameterDeclaration, List`1 functionComments, List`1 parameterComments)
at System.Management.Automation.Parser.ParseScriptBlock(String input, Boolean interactiveInput)
at System.Management.Automation.AutomationEngine.ParseScriptBlock(String script, Boolean interactiveCommand)
at System.Management.Automation.ScriptCommandProcessor..ctor(String script, ExecutionContext context, Boolean isFilter, Boolean useLocalScope, Boolean interactiveCommand, CommandOrigin origin)
at System.Management.Automation.Runspaces.Command.CreateCommandProcessor(ExecutionContext executionContext, CommandFactory commandFactory, Boolean addToHistory)
at System.Management.Automation.Runspaces.LocalPipeline.CreatePipelineProcessor()
at System.Management.Automation.Runspaces.LocalPipeline.InvokeHelper()
at System.Management.Automation.Runspaces.LocalPipeline.InvokeThreadProc()
=================== 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:27:31.803

`Format-Table`不会生成文件对象列表，这是`Copy-Item`预期的输入。试试这个：

```
Get-ChildItem -Path $ServerDir -Recurse -Include newfile.swf | sort Name | % {
  if ( Test-Path -LiteralPath $_.FullName ) {
    Copy-Item $SourceFile $_.FullName -Force
  } else {
    Add-Content $logfile "File Copy Failed"
    Add-Content $logfile $error[$error.count-1]
    Add-Content $logfile "==================="
  }
} 
```

# c++ - 什么算法可以用来设计一个高效的电脑播放器？

> ID：15670385
> 
> 赞同：0
> 
> 时间：2013-03-27T22:03:11.237
> 
> 标签：c++, algorithm

我正在设计一个 SDL 游戏，其中玩家（人类）可以在 N*M 网格上放置网，这样每个网只覆盖网格的单个元素（网格上有 N*M 元素/单元）。现在在游戏的每一轮（游戏目前有 10 轮）中，玩家可以通过购买网在网格上放置网，每个网花费 NetCost（从玩家的得分中减去）以接住落下的球。此外，玩家可以在任何回合开始时将网移动到共享边缘（即上、下、左、右）的单元格/元素。现在球在每一轮中落下（每轮理论上是瞬时的，尽管在游戏的视觉效果中它持续 2 秒）球员的网接住这些球，因此放置在一个单元格的网可以接住所有落在该特定单元格的球。每错过一个球，得分 B 将受到处罚。玩家以固定分数开始。电脑玩家和人类玩家分别玩同一回合，因此人类玩家做出的选择不会影响电脑玩家，反之亦然。
现在我要为单人模式设计一个高效的电脑播放器。电脑播放器也将从与人类玩家相同的分数开始。计算机播放器的目的是使用用户可用的相同网络在相同网格上获得最高分。计算机玩家的这些输入将是在回合 R 开始时在每一回合 R 中落下的球以及它们的网格位置。我怎样才能为这个游戏设计一个高效的电脑播放器？

请注意，每一轮的网格大小是恒定的，为 30x30。两名球员的起始分数固定为 100,000。但是，用户可以在游戏开始时（即第 1 轮之前）选择净成本和落球罚分。这些成本在所有轮次中保持不变。网数可能受到限制让我们说每轮200。我不确定我可以在这里应用什么算法。有人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:36:34.050

听起来你需要一门人工智能课程看看这个游戏来帮助你找出高级人工智能反应：[http ://www.transience.com.au/pearl.html](http://www.transience.com.au/pearl.html)

将随机性和难度融入电脑播放器。让他在理想情况下做出回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:08:46.323

这听起来像是一个回合制游戏。如果是这样，您可能需要使用 alpha-beta 修剪来研究[minimax 搜索](http://en.wikipedia.org/wiki/Minimax)（这是一种搜索空间优化，不会改变 minimax 的结果，但只会加速它 - 在某些情况下显着）。

这需要与一个评估函数配对，该函数确定给定位置对球员的好坏。这部分听起来对于这样的游戏来说相当容易。

# linux - chroot 替代

> ID：15670387
> 
> 赞同：3
> 
> 时间：2013-03-27T22:03:12.020
> 
> 标签：linux, ubuntu, filesystems, chroot

我正在开发一个允许用户运行 Octave 代码（基本上是 Matlab）的 web 应用程序（在 Ubuntu 服务器上运行）。但是，我只希望他们能够读取或修改其指定主文件夹中的文件夹。

我知道`chroot`这是这样做的一种方法，但它不安全，并且您需要 chroot 的 root 权限（理想情况下，应用程序不需要）。

另外，我可以在运行之前读取用户的代码，如果他们尝试写入文件，我会抛出错误，但为此我需要考虑用户可能违反我的规则的每一种方式，以防止它发生。

我看过[Linux-VServer](http://en.wikipedia.org/wiki/Operating_system-level_virtualization#Implementations)但这需要为每个用户单独的虚拟服务器（除非我弄错了）。

*编辑：*我可以建立一个 SSH 连接并监禁连接，但这似乎不必要地贪婪资源。

**有没有一种方法可以在不使用的情况下将用户或进程监禁到特定文件夹`chroot`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-14T05:24:54.020

系统`unshare()`调用在内核 2.6.16+ 中添加到 Linux。

要 chroot 到 rootfs 目录`./target/`并`/bin/bash`以**非 root 用户**身份运行，您可以执行以下操作：

```
unshare -r sh -c 'chroot ./target/ /bin/bash' 
```

它通常比：

```
fakechroot fakeroot chroot ./target/ /bin/bash 
```

甚至更简单，比：

```
LD_LIBRARY_PATH=./target/lib:./target/usr/lib:./target/lib64:./target/lib/x86_64-linux-gnu:./target/usr/lib/x86_64-linux-gnu ./target/bin/bash #or ld-linux.so.2 --library-path ... ./target/bin/bash 
```

PS：但是如果你想与父 rootfs 通信，你必须在 chroot 之前在 ./target 中挂载绑定一些东西。

# actionscript-3 - 根据z位置排序堆叠顺序as3

> ID：15670390
> 
> 赞同：0
> 
> 时间：2013-03-27T22:03:29.483
> 
> 标签：actionscript-3, 3d, indexing, position

我正在尝试根据每个 mc的 z**位置设置**要选择的动画剪辑的堆叠顺序（z **index ）。**

 **我有数百个 mcs，每个 mcs 从我正在检索的外部数据中给出 axyz 位置。除了堆叠顺序之外，所有东西都放置得很好——默认情况下，它被设置为我循环中每个 mc 的出现顺序。

我真的不想追求的一个不舒服的选择是在将 mcs 附加到循环中之前根据 z 位置对数据进行排序。

有没有更快、更优雅的方法来做到这一点？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:07:30.250

您可以使用[`sortOn`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#sortOn%28%29)按属性对 MovieClip 数组进行排序`z`，然后使用您描述的循环将它们全部添加到您的容器中。这可能是最干净和最优雅的方法。

`list`假设您有一个包含 MovieClip的数组：

```
// Sort the list and add the children.
list.sortOn("z", Array.NUMERIC);
for each(var i:DisplayObject in list)
{
    addChild(i);
} 
```

如果顺序错误，只需`list.reverse()`在 for 循环之前添加即可。

对于 1000 个 Sprite，其随机生成的`z`值介于 0 到 1000 之间，这个过程在我的机器上需要 3 毫秒，这是非常特殊的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:54:53.773

如果您的项目都是共同父母的孩子，您可以这样做：

```
function goSort(container:DisplayObjectContainer):void {
    var list:Vector.<DisplayObject> = new Vector.<DisplayObject>();
    var i:int = container.numChildren;
    while(i--){
        list.push(container.getChildAt(i));
    }

    list.sort(sortZ);

    for(var i:int=0;i<list.length;i++){
        container.addChild(list[i]);
    }
}

function sortZ(a:DisplayObject, b:DisplayObject):Number {
    return a.z - b.z;
} 
```

然后调用：

```
goSort(yourContainer); 
```**

# forms - 使用 HtmlService 使用 Google Apps 脚本上传文件

> ID：15670392
> 
> 赞同：9
> 
> 时间：2013-03-27T22:03:38.530
> 
> 标签：forms, google-apps-script, web-applications

如何将文件上传到谷歌驱动器？我想使用谷歌应用脚​​本 - htmlservice 创建一个网络应用。我不知道如何将 html 中的表单指向现有的 google app 脚本。我很难在谷歌文档中找到一个正确的例子。

我发现了数百个使用 UI 的示例，但根据[https://developers.google.com/apps-script/sunset](https://developers.google.com/apps-script/sunset)，它很快就会被弃用。先感谢您！亚努什

```
<html>
<body>
<form>
   <input type="file"/>
   <input type="button">
</form>
</body>
</html> 
```

脚本

```
function doGet() {
  return HtmlService.createHtmlOutputFromFile('myPage');
}

function fileUploadTest()
{
   var fileBlob = e.parameter.upload;
      var adoc = DocsList.createFile(fileBlob);
      return adoc.getUrl();
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T14:51:52.293

让按钮使用 google.script.run 运行服务器端功能，将整个表单作为唯一参数传递。（在按钮的 onClick 内，'this' 是按钮，所以 'this.parentNode' 是表单。）确保为文件输入命名。

```
<html>
<body>
<form>
   <input type="file" name="theFile">
   <input type="hidden" name="anExample">
   <input type="button" onclick="google.script.run.serverFunc(this.parentNode)">
</form>
</body>
</html> 
```

在服务器上，让您的表单处理函数采用一个参数 - 表单本身。来自客户端代码的 HTML 表单将被转换为一个等效的 JavaScript 对象，其中所有命名字段都是字符串属性，除了将是 blob 的文件。

```
function doGet() {
  return HtmlService.createHtmlOutputFromFile('myPage');
}

function serverFunc(theForm) {
   var anExampleText = theForm.anExample;  // This is a string
   var fileBlob = theForm.theFile;         // This is a Blob.
   var adoc = DocsList.createFile(fileBlob);    
   return adoc.getUrl();
} 
```

如果您确实想使用您正在生成和返回的 URL，请确保将成功处理程序添加到 google.script 调用。您可以像这样修改它：

```
// Defined somewhere before the form
function handler(url) {
  // Do something with the url.
}

<input type="button" onclick=
  "google.script.run.withSuccessHandler(handler).serverFunc(this.parentNode)"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:37:02.750

尝试：返回 HtmlService.createTemplateFromFile('myPage').evaluate(); 更多：[html服务参考](https://developers.google.com/apps-script/html_service#CreatingHTML)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:15:03.180

我找到了我的问题的答案。

[使用 Google App Script 的 HtmlService 提交表单](https://stackoverflow.com/questions/11910003/submitting-a-form-in-htmlservice-on-google-app-scripts)

下面的 Google App Script 链接中的代码是：

```
function doGet(e) {
  var template = HtmlService.createTemplateFromFile('Form.html');
  template.action = ScriptApp.getService().getUrl();
  return template.evaluate();
}

function doPost(e) {
  var template = HtmlService.createTemplateFromFile('Thanks.html');
  template.name = e.parameter.name;
  template.comment = e.parameter.comment;
  template.screenshot = e.parameter.screenshot;
  return template.evaluate();
} 
```

[https://script.google.com/d/1i65oG_ymE1lreHtB6WBGaPHi3oLD_-wPd5Ter1nsN7maFAWgUA9DbE4C/edit](https://script.google.com/d/1i65oG_ymE1lreHtB6WBGaPHi3oLD_-wPd5Ter1nsN7maFAWgUA9DbE4C/edit)

谢谢！

# bash - 带空格的 shell glob 扩展

> ID：15670396
> 
> 赞同：2
> 
> 时间：2013-03-27T22:03:50.820
> 
> 标签：bash, shell, glob, sh

我想编写一个 Posix shell 脚本函数，该函数将匹配需要扩展的空格和全局字符（*？）的模式。在 Python 中，*glob.glob('/tmp/hello world*')*将返回正确的列表。我如何在外壳中执行此操作？

```
#!/bin/sh

## this function will list
## all of the files in the /tmp
## directory that match pattern
f() {
  PATTERN="$1"
  ls -1 "/tmp/$PATTERN"
}

touch '/tmp/hello world {1,2,3}.txt'
f 'hello world*' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:07:10.820

您可以将除`*`引号之外的所有内容括起来：

```
ls -l "hello world"*
ls -l "hello world"*".txt" 
```

然后，您可以将带引号的字符串传递给`f()`. 使用里面的字符串`f()`需要`eval`.

```
#!/bin/sh

## this function will list
## all of the files in the /tmp
## directory that match pattern
f() {
  PATTERN=$1
  eval ls -1 "/tmp/$PATTERN"
}

touch '/tmp/hello world {1,2,3}.txt'
f '"hello world"*' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T01:37:29.717

`find`的模式匹配与 shell 的不完全相同，但非常接近，因此您可以利用这一点：

```
f() {
    find . -mindepth 1 -maxdepth 1 -name "$1" | sed 's#^.*/##'
} 
```

（该`sed`命令用于从文件名中删除路径前缀。）

# php - laravel - 使用请求类或输入类

> ID：15670397
> 
> 赞同：6
> 
> 时间：2013-03-27T22:04:02.107
> 
> 标签：php, api, rest, laravel

在一个安静的控制器中，我应该使用哪个类来获取传递的变量？

```
$member->email = Input::get('email');
// or
$member->email = Request::get('email'); 
```

两种选择都对我有用，但有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T23:02:46.763

`Input::get()`只是映射到 Request 类的助手。你使用哪个并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:37:54.557

我相信 Request 在 restful 控制器的上下文中是首选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:58:25.127

对于 Laravel 3，我更喜欢使用：

```
$member->email = Input::get('email'); 
```

但是对于 Laravel 4，我更喜欢使用：

```
$member->email = Request::get('email'); 
```

请查看文章：

[http://net.tutsplus.com/tutorials/php/laravel-4-a-start-at-a-restful-api/](http://net.tutsplus.com/tutorials/php/laravel-4-a-start-at-a-restful-api/)

# php - Magento 1.7 无法发送标头；已经发送的标头

> ID：15670400
> 
> 赞同：1
> 
> 时间：2013-03-27T22:04:12.520
> 
> 标签：php, magento, zend-framework, magento-1.7

**解决** 了我在 Jonathan Hussey 的帮助下解决了这个问题，我改变了这一行：

```
$mModel->getCollection()->load($mId)->getData(); 
```

为了这：

```
$mModel->getCollection()->addFieldToFilter('met_id',$Id)->getSelect(); 
```

**问题**
我创建了自定义模块，该模块将选项卡添加到带有附加文本字段的管理产品页面。当我尝试保存此产品时，我收到此错误：

```
a:5:{i:0;s:140:"Cannot send headers; headers already sent in /home/nano/domains/mydomain/public_html/gw/lib/Varien/Data/Collection/Db.php, line 693";i:1;s:1630:"#0 /home/nano/domains/mydomain/public_html/gw/lib/Zend/Controller/Response/Abstract.php(148): Zend_Controller_Response_Abstract->canSendHeaders(true)... 
```

我看到在 Observer.php 中创建了这个错误：

```
$mId = $collection['m_id'];         
$mModel->getCollection()->load($mId)->getData(); <-- this line give an error

$data['met_id'] = $mId;
$data['product_id'] = $product->getId();
$data['metf1'] = $this->_getRequest()->getPost('f1');
$mModel->setData($data);
$mModel->save(); 
```

你有什么想法如何解决这个问题吗？

**编辑** 管理模板选项卡文件的内容：

```
<?php
$product = Mage::registry('current_product');
$mItem = Mage::getModel('mmodel/mmodel')->getCollection()->
addFilter('product_id',$product->getId())->getFirstItem();

echo '<div class="input-field">
 <label for="f1">File</label>
 <input type="text" class="input-text" name="f1" id="f1" value='.$mItem['f1'].' />
</div>'; 
```

`$mModel->getCollection()->load($mId)->getData();`从 Observer.php 行后调试回溯

```
SELECT `main_table`.* FROM `mmodel` AS `main_table`
    Debug Backtrace:
    File    Line    Function
    /home/nano/domains/mydomain/public_html/gw/app/code/local/GW/MModel/Model/Observer.php  42  printDebugBacktrace
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Core/Model/App.php    1338    saveProductTabData
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Core/Model/App.php    1317    _callObserverMethod
    /home/nano/domains/mydomain/public_html/gw/app/Mage.php 468 dispatchEvent
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Core/Model/Abstract.php   466 dispatchEvent
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Catalog/Model/Product.php 548 _afterSave
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Core/Model/Abstract.php   319 _afterSave
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Adminhtml/controllers/Catalog/ProductController.php   714 save
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Core/Controller/Varien/Action.php 419 saveAction
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php    250 dispatch
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Core/Controller/Varien/Front.php  176 match
    /home/nano/domains/mydomain/public_html/gw/app/code/core/Mage/Core/Model/App.php    354 dispatch
    /home/nano/domains/mydomain/public_html/gw/app/Mage.php 704 run
    /home/nano/domains/mydomain/public_html/gw/index.php    87  run 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:12:30.777

使用集合时，`->load()`如果您希望记录或输出该集合的 SQL，您应该只传递参数。如果您不希望集合返回所有项目，您可以通过这种方式从集合中提取选择对象并使用[标准 Zend 方法](http://framework.zend.com/manual/1.12/en/zend.db.select.html)`->getSelect()`进行过滤。

如果你回溯你的收集命令，你会看到因为你传递了一个参数，它回显了收集 SQL。

```
$mModel->getCollection()->load($mId)->getData(); 
```

根据错误消息查看`lib/Varien/Data/Collection/Db.php`并找到`load()`方法。您将看到它接受两个参数*$printQuery*和*$* logQuery ，您已将参数传递给*$printQuery*。您看到的方法中有几行：

```
$this->printLogQuery($printQuery, $logQuery); 
```

查看该`printLogQuery()`方法，您将看到作为*$printQuery*参数传递的任何计算结果为 true 的内容都会根据错误消息触发第 693 行的回显：

```
echo is_null($sql) ? $this->getSelect()->__toString() : $sql; 
```

这就是在您的情况下发送标头的原因。从中删除参数`->load()`或传递*false*，它应该可以解决您的问题。

# extjs - Ext-JS 4 - 将组合框提交到服务器的奇怪行为

> ID：15670404
> 
> 赞同：1
> 
> 时间：2013-03-27T22:04:20.387
> 
> 标签：extjs, extjs4

我有一个表单中的组合框：

```
{
    xtype: 'combobox',
    fieldLabel: 'Jurisdictions',
    name: 'jurisdiction_id',
    id: 'ComboboxJurisdictions',
    store: Ext.create('App.store.Jurisdictions'),
    queryMode: 'local',
    editable: false,
    displayField: 'name',
    valueField: 'id',
} 
```

数据为：

```
1 => Administrator
2 => User
3 => Guest 
```

现在，如果我在编辑用户时不碰任何东西，在我的组合框的服务器上我会得到“管理员”（displayField），但是当我在组合框中更改某些内容时，我会得到“id”（valueField）。在这两种情况下，我真的只想要“id”。我正在阅读关于`hiddenName`? 是这样吗？

如果您需要更多代码，请随时询问。:)

谢谢！

编辑（更多代码）

1.) 没有默认值。

这是整个视图代码：

```
Ext.define('App.view.Suits.Update', {
    extend: 'Ext.window.Window',
    title: 'Suits',
    width: 250,
    id: 'UpdateWindowSuits',
    defaultType: 'textfield',
    items: [{
        xtype: 'UpdateFormSuits'
    }],
    buttons: [
      { text: 'Save', id: 'submitUpdateFormButtonSuits'},
      { text: 'Cancel', id: 'cancelUpdateFormButtonSuits'},
    ]
});

Ext.define('App.view.Suits.UpdateForm', {
    extend: 'Ext.form.Panel',
    alias: 'widget.UpdateFormSuits',
    layout: 'form',
    id: 'UpdateFormSuits',
    bodyPadding: 5,
    defaultType: 'textfield',
    items: [{
        fieldLabel: 'Id',
        name: 'id',
        hidden: true
    },{
        fieldLabel: 'Name',
        name: 'name',
        allowBlank: false,
    },{
        fieldLabel: 'Status',
        name: 'status',
        allowBlank: false

    },{
        xtype: 'combobox',
        fieldLabel: 'Priority',
        name: 'suit_priority_id',
        id: 'ComboboxSuitPriorities',
        store: Ext.create('App.store.SuitPriorities'),
        editable: false,
        displayField: 'name',
        hiddenName: 'id',
        valueField: 'id'
    },{
        xtype: 'combobox',
        fieldLabel: 'Jurisdictions',
        name: 'jurisdiction_id',
        id: 'ComboboxJurisdictions',
        store: Ext.create('App.store.Jurisdictions'),
        queryMode: 'local',
        editable: false,
        displayField: 'name',
        valueField: 'id',
    }],
}); 
```

这里是商店：

```
Ext.define('App.store.SuitPriorities', {
    extend: 'Ext.data.Store',

    // Where is the Model.
    model: 'App.model.SuitPriority',

    // "id" of the Store.
    storeId: 'SuitPriorities',

    // Autoload all data on creation.
    autoLoad: true,

    // Number of records in one page (for pagination).
    pagesize: 20,

    // Proxy for CRUD.
    proxy: {

        // Type of request.
        type: 'ajax',

        // API for CRUD.
        api: {
            create  : 'php/suitpriorities/update',
            read    : 'php/suitpriorities/read',
            update  : 'php/suitpriorities/update',
            destroy : 'php/suitpriorities/delete'
        },

        // Type of methods.
        actionMethods: {
            create  : 'POST',
            read    : 'POST',
            update  : 'POST',
            destroy : 'POST'
        },

        // Reader.
        reader: {

            // Which type will the reader read.
            type: 'json',

            // Root of the data.
            root: 'suitpriorities',
            rootProperty: 'data',

            // One record.
            record: 'SuitPriority',

            // Message and success property.
            successProperty: 'success',
            messageProperty: 'message'
        },

        // Writer (when sending data).
        writer: {
            type: 'json',
            writeAllFields: true,
            root: 'data',
            encode: true
        },
}); 
```

我很伤心，商店正在获取所有数据，因为当我按下组合框时它已经加载了。这是一个带有“id”和“name”属性的简单 JSON。

EDIT2：我已经为我的司法管辖区尝试过这个，因为我没有在组合框中选择正确的数据。这是在我的控制器内部。

```
onJurisdictionComboRender: function(combobox, eOpts){

        // Getting the selected row.
        var record = this.grid.getSelectionModel().getSelection()[0];

        // Selected jurisdiction.
        var jurisdiction = record.data.jurisdiction_id;

        // Select it in combobox.
        combobox.select(jurisdiction);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:33:02.667

这没有任何意义...如果您以正确的方式读出组合，这意味着让表单完成工作或自己调用 getSubmitValue() 组合将始终返回`valueField`. `hiddenName`用于其他目的。请查看此**[JSFiddle](http://jsfiddle.net/7CMEs/)**的控制台并重新检查您如何获取组合值。

这是工作演示代码

```
// The data store containing the list of states
var roles = Ext.create('Ext.data.Store', {
    fields: ['id', 'name'],
    data : [
        {"id":1, "name":"Administrator"},
        {"id":2, "name":"User"},
        {"id":3, "name":"Guest"}
        //...
    ]
});

// Create the combo box, attached to the states data store
var combo = Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose Role',
    store: roles,
    queryMode: 'local',
    editable: false,
    displayField: 'name',
    valueField: 'id',
    renderTo: Ext.getBody()
});

combo.on('select', function(cb){ console.log(cb.getSubmitValue()); }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:09:23.000

+1 为大家提供帮助，但问题就在这里：

在我的商店中，我已将 autoLoad: false 放入我的组合框中，我已手动放入 store.load() 并且它运行良好。

谢谢你们！:)

# javascript - 用 javascript 编写函数的最佳方法

> ID：15670413
> 
> 赞同：1
> 
> 时间：2013-03-27T22:05:05.037
> 
> 标签：javascript, function

我正在学习关于 Javascript 的代码学院课程。

Code Academy 以两种不同的方式编写函数。哪个更有优势？

在更基础的课程中，他们编写了如下函数：

```
var list = function() {

}; 
```

然后在更高级的课程中，我们编写了如下函数：

```
function list() {

} 
```

# heroku - 我可以向我的应用添加多少个域？

> ID：15670414
> 
> 赞同：0
> 
> 时间：2013-03-27T22:05:10.017
> 
> 标签：heroku

我正在计划应用程序，它需要附加数百个（可能是数千个）域。Heroku可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:29:05.637

据我所知，域的数量没有限制。但是，如果域的数量开始增加到超过 10/20 个域，那么您可以考虑使用[通配符域](https://devcenter.heroku.com/articles/custom-domains#wildcard-domains)并处理应用程序内部的路由逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:24:16.577

您可以通过使用不同的值重复添加命令来将任意数量的域添加到单个应用程序

# objective-c - UIRoundedRectButton 没有响应 UIView 类别方法

> ID：15670416
> 
> 赞同：0
> 
> 时间：2013-03-27T22:05:23.053
> 
> 标签：objective-c, xcode

我有一个 UIView 类别方法来调整 UIView 的框架：

```
-(void)setFrameWidth:(NSInteger)aWidth andHeight:(NSInteger)aHeight
{
    CGRect labelFrame = self.frame;
    labelFrame.size = CGSizeMake(aWidth, aHeight);
    self.frame = labelFrame;
} 
```

但是，当我将它应用于 UIRoundedRectButton 时：

```
//button for options
    optionsButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [optionsButton setTitle:@"Options" forState:UIControlStateNormal];
    [optionsButton addTarget:self action:@selector(goToOptions:) forControlEvents:UIControlEventTouchUpInside];
    [optionsButton setFrameWidth:200 andHeight:50];
    optionsButton.center = CGPointMake(SCREEN_X_LENGTH_HALF, SCREEN_Y_LENGTH_TWO_THIRDS);
    [self.view addSubview:optionsButton]; 
```

它抱怨说'-[UIRoundedRectButton setFrameWidth:andHeight:]: unrecognized selector sent to instance 0x718a600'。

如何让我的类别方法在按钮上工作？

# opencv - 在机器人导航中使用霍夫变换

> ID：15670418
> 
> 赞同：1
> 
> 时间：2013-03-27T22:05:25.530
> 
> 标签：opencv, hough-transform

我的目标是让自主机器人使用摄像头在有围墙的迷宫中导航。摄像头固定在机器人顶部并朝下，以便能够从上方查看墙壁和机器人。 ![在此处输入图像描述](../Images/9efefe06b5589ff56171d60e59f63166.png)

根据我的经验，我采取的最直接的方法是

1.  阈值图像以提取红墙
2.  执行 Canny 边缘检测
3.  使用霍夫变换从边缘检测强线

如下所示，经过一些参数调整 ![在此处输入图像描述](../Images/d07014d2338cd0c09eac119dadd8dd6d.png)

我想让机器人向前移动并避免“撞到”红墙。问题是从霍夫变换中每个墙边缘检测到多条线。我的一个想法是执行 k-means 聚类以对线条进行聚类并找到每个聚类的中心（均值），但我不知道墙边的数量（因此不知道要输入 k-means 算法的聚类数量) 我将随时在迷宫中导航（前面的墙壁、后面的墙壁、多转弯路口等）。

任何帮助找到一个好的方法来获得一致的墙壁位置来比较机器人的位置（在每个图像帧中总是固定的）在任何时候导航迷宫将不胜感激。我也对解决这个问题的任何其他方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:31:06.527

在提取霍夫线之前运行[骨架](http://en.wikipedia.org/wiki/Topological_skeleton)化算法。

# asp.net-mvc - KendoUI 自动完成列表出现在文本框的顶部

> ID：15670421
> 
> 赞同：0
> 
> 时间：2013-03-27T22:05:36.870
> 
> 标签：asp.net-mvc, autocomplete, kendo-ui

我正在使用 KendoUI for MVC 迈出第一步。我有一个非常简单的模型，它从数据库中读取表“产品”并将其作为强类型模型传递给视图。

我正在使用模型将其绑定到自动完成以获取建议的值。这几乎可以正常工作。这是使用以下 Razor 语法完成的：

```
@(Html.Kendo().AutoComplete()
     .Name("productAutoComplete")
     .DataTextField("Name")
     .BindTo(Model)
     .Filter(FilterType.StartsWith)
     .Placeholder("Select the product")
     .Suggest(true)
) 
```

我遇到的问题是包含自动完成建议的下拉列表出现在文本框本身的顶部（而不是在它的正下方）。

请查看下图，不要在自动完成字段中输入任何内容：

![无需在字段中输入任何内容](../Images/5c56b852430a825c14366448daab75a9.png)

并使用自动完成功能： ![开始输入内容后](../Images/10591970776618697f0f3afabe0dc7ad.png)

你有什么建议吗？

提前致谢，

左撇子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:32:15.770

我通过使用最新的 jQuery 库 (1.9.1) 而不是 KendoUI (1.7.1) 附带的库来克服这个问题。

我仍然不确定为什么这不适用于 1.7.1（1.9.0+ 可以）。

无论如何，KendoUI 最新版本（2013 年第一季度）附带 1.9.1 jQuery。不幸的是，这似乎不能作为 KendoUI Complete for ASP.NET MVC 的试用版

我希望这个解决方案可以帮助其他人。

左撇子

# highcharts - 悬停时中心更改的Highcharts圆环图文本

> ID：15670427
> 
> 赞同：5
> 
> 时间：2013-03-27T22:05:53.033
> 
> 标签：highcharts

我正在寻找一种在悬停时更改圆环图中心的文本的方法。没有悬停状态时，中心会显示总金额（这里我代表放假天数，所以可能是15个放假天数）。悬停时，中心的文本需要与悬停的段匹配（可用、请求和休假日），但我不知道如何根据悬停更改中心的文本。有没有人有任何想法？任何帮助是极大的赞赏！！

[http://jsfiddle.net/NVX3S/146/](http://jsfiddle.net/NVX3S/146/)

```
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="container1" style="min-width: 300px; height: 300px; margin: 0 auto"></div>

$(function () {
    var colors = ['#8d62a0', '#ceb3d8', '#d5dddd'];
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container1',
            type: 'pie',
            height: 250,
            width: 250,
            borderRadius: 0
        },
        credits: {
            enabled: false
        },
        title: false,
        tooltip: false,
        plotOptions: {
            pie: {
                borderWidth: 6,
                startAngle: 90,
                innerSize: '55%',
                size: '100%',
                shadow: true,
                // {
                //     color: '#000000',
                //     offsetX: 0,
                //     offsetY: 2,
                //     opacity: 0.7,
                //     width: 3
                // },
                dataLabels: false,
                stickyTracking: false,
                states: {
                    hover: {
                        enabled: true
                    }
                }
            }
        },

        series: [{
            data: [
                {y:65, color: colors[0]},
                {y:15, color: colors[1]},
                {y:20, color: colors[2]}
            ]
            // data: [
            //     ['Firefox',   44.2],
            //     ['IE7',       26.6],
            //     ['IE6',       20],
            //     ['Chrome',    3.1],
            //     ['Other',    5.4]
            // ]
        }]
    },
    function(chart) { // on complete

        var xpos = '50%';
        var ypos = '53%';
        var circleradius = 102;

    // Render the text 
    chart.renderer.text('126.5', 103, 127).css({
            width: circleradius*2,
            color: '#4572A7',
            fontSize: '16px',
            textAlign: 'center'
      }).attr({
            // why doesn't zIndex get the text in front of the chart?
            zIndex: 999
        }).add();
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T16:48:22.050

使用`points.events.mouseOver/mouseOut`，例如：http: [//jsfiddle.net/NVX3S/147/](http://jsfiddle.net/NVX3S/147/)

代码：

```
 point: {
                events: {
                    mouseOver: function(){
                        this.series.chart.innerText.attr({text: this.y});
                    }, 
                    mouseOut: function(){
                        this.series.chart.innerText.attr({text: 112});
                    }
                }
            } 
```

其中 innerText 只是自定义属性，创建如下：

```
chart.innerText = chart.renderer.text('112', 112, 125).css({ ... }).add(); 
```

# c++ - 声明一个对象数组，为什么我不需要在数组内应用 new？

> ID：15670428
> 
> 赞同：0
> 
> 时间：2013-03-27T22:05:55.300
> 
> 标签：c++, arrays, class

**-------------------问题1：------------**

我有一个场景类，我想制作一系列场景，称为......嗯......“场景”：

```
class Scene
{
public:
    int id;
    string title;
    Image backgroundImage;
    Scene( int id, string title, Image backgroundImage );
}; 
```

我在游戏头中的 Game 类中声明了场景数组：

```
Scene scenes[ 2 ]; 
```

然后我开始用我的game.cpp循环de循环中的场景来抽它：

```
scenes[ 0 ] = Scene(); 
```

为什么我可以在不必声明新场景的情况下完成上述操作？例如：

```
scenes[ 0 ] = new Scene(); 
```

是因为我没有将类 Scene 声明为 public 吗？它是作为静态的还是其他东西创建的？我很困惑史酷比！

**- - - - - - - - - - 问题2 - - - - - - - - - - - -**

有没有更好的方法将场景的属性传递给构造函数......例如在javascript中你可以这样做：

```
var Scene = function( properties )
{
    this.id = properties.id;
    this.string = properties.string;
    this.backgroundImage = properties.backgroundImage;
}

var scenes = [
    new Scene( { 
        id:0, 
        string:"a scene", 
        Image: new Image( ... ) 
    } ),        
    new Scene( { 
        id:1, 
        string:"a scene 1", 
        Image: new Image( ... ) 
    } ),
] 
```

然后这成为自我记录.. d'ya 抓到我的漂流布拉？

**- - - - - - 笔记 - - - - - - ：**

我认为您必须将其声明为新的，因为我不知道仅说场景[0] = Scene() 声明了对象的新实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:11:28.947

```
Scene scenes[2]; 
```

`Scene`这将创建一个包含 2 个对象的数组。不是指向对象的指针。对象。每个对象都使用默认构造函数进行初始化。

要创建一个包含由其他构造函数初始化的对象的数组，只需执行以下操作：

```
Scene scenes[2] = {
  Scene(0, "a scene", Image(...)),
  Scene(1, "a scene 1, Image(...)) }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:14:18.933

```
#include <string>
using namespace std;

struct Image {};

class Scene
{
private:
    int id_;
    string title_;
    Image backgroundImage_;
public:
    Scene( int id, string const& title, Image const& backgroundImage )
        : id_( id )
        , title_( title )
        , backgroundImage_( backgroundImage )
    {}
};

#include <iostream>
int main()
{
    Scene scenes[] = {
        Scene( 0, "a scene", Image()  ),
        Scene( 1, "a scene 1", Image()  )
        };
    // Whatever.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T22:15:23.610

1.  在 JavaScript 中，`new`创建一个对象，而在 C++ 中，它返回一个指向该新创建对象的指针。这样做`scenes[0] = Scenes()`是正确的。

2.  也许你可以试试`std::vector`：

    ```
    #include <vector>

    std::vector<Scenes> scenes{
        Scenes{0, "a scene", Image{}},
        Scenes{1, "a scene1", Image{}},
    }; 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T22:10:16.767

你要这个：

```
class Scene
{
    int id;
    string title;
    Image backgroundImage;

public:
    Scene(int id, string const & title, Image const & backgroundImage)
    : id(id)
    , title(title)
    , backgroundImage(backgroundImage)
    { }
};

Scene scenes[2] = { Scene(1, "me", image1), Scene(2, "you", image2) }; 
```

使用现代编译器 (C++11)，您还可以编写：

```
Scene scenes[2] = { {1, "me", image1}, {2, "you", image2} }; 
```

你可能更喜欢`std::array<Scene, 2>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T22:11:42.993

对于你的第一个问题：

```
Scene scenes[ 2 ]; /declares an array of Scene objects
scenes[ 0 ] = Scene();
How comes I can do the above without having to declare a new Scene? for example:

scenes[ 0 ] = new Scene();
Is it because I did not declare the class Scene as public? 
```

`new`运算符创建一个对象，返回一个`pointer`类的对象。如果使用`new`，则需要将数组声明为指向 的指针数组`Scene`。在您的对象数组情况下，如果您不指定调用哪个构造函数来初始化这些对象，它将调用默认构造函数。

# c++ - 我可以对 Boost Phoenix 表达式进行字符串化吗？

> ID：15670429
> 
> 赞同：5
> 
> 时间：2013-03-27T22:05:57.673
> 
> 标签：c++, templates, boost, boost-phoenix, boost-proto

我可以将 Boost Phoenix 表达式转换为具有代表性的 C++ 字符串吗？我本可以有：

```
stringify(_1<_2); 
```

然后可能会生成一个包含以下内容的字符串：

```
template <class T1, class T2>
struct foo {
  auto operator()(T1 x1, T2 x2)
  -> decltype(x1 < x2)
  { return    x1 < x2; }
}; 
```

我很欣赏这个例子有一些粗糙的边缘，但我想知道是否已经尝试过这些方面的任何事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:13:28.510

使用`eval`您可以在[此处](http://www.boost.org/doc/html/proto/users_guide.html#boost_proto.users_guide.back_end.expression_transformation.unpacking_expressions)找到的转换作为“灵感”。

[活生生的例子](http://liveworkspace.org/code/2sAFzf%240)。

```
#include <iostream>
#include <string>
#include <sstream>

#include <boost/phoenix.hpp>
#include <boost/phoenix/core/arity.hpp>
#include <boost/lexical_cast.hpp>

namespace phx=boost::phoenix;
namespace proto=boost::proto;

struct do_print : proto::callable
{
    typedef std::string result_type;

    template <typename NotArgument>
    std::string operator()(NotArgument n)
    {
       return boost::lexical_cast<std::string>(n);
    }

    template <int I>
    std::string operator()(phx::argument<I>)
    {
       return std::string("x")+boost::lexical_cast<std::string>(I-1);
    }

#define UNARY_OP(TAG, OP)                                                       \
    template<typename Arg>                                                      \
    std::string operator()(proto::tag::TAG, Arg arg) const                           \
    {                                                                           \
        return std::string("(") + OP + arg + ")";                                                          \
    }                                                                           \
    /**/

#define BINARY_OP(TAG, OP)                                                      \
    template<typename Left, typename Right>                                     \
    std::string operator()(proto::tag::TAG, Left left, Right right) const            \
    {                                                                           \
        return std::string("(") + left + OP + right + ")";                                                   \
    }                                                                           \
    /**/

    UNARY_OP(negate, "-")
    BINARY_OP(plus, "+")
    BINARY_OP(minus, "-")
    BINARY_OP(multiplies, "*")
    BINARY_OP(divides, "/")
    BINARY_OP(less, "<")
    BINARY_OP(greater, ">")
    /*... others ...*/
};

struct print_expression
  : proto::or_<
        proto::when<proto::terminal<proto::_>, do_print(proto::_value)>
      , proto::otherwise<do_print(proto::tag_of<proto::_>(), print_expression(proto::pack(proto::_))...)>
    >
{};

struct do_get_arity : proto::callable
{
    typedef int result_type;

    template <typename NotArgument>
    int operator()(NotArgument)
    {
       return 0;
    }

    template <int I>
    int operator()(phx::argument<I>)
    {
       return I;
    }

    template<typename Tag, typename Arg>                                                      
    int operator()(Tag, Arg arg) const                           
    {                                                                           
        return arg;                                                         
    }                                                                           
    /**/

    template<typename Tag, typename Left, typename Right>                                    
    int operator()(Tag, Left left, Right right) const           
    {                                                                          
        return std::max(left,right);                                                   \
    }                                                                           

};

struct get_arity
  : proto::or_<
        proto::when<proto::terminal<proto::_>, do_get_arity(proto::_value)>
      , proto::otherwise<do_get_arity(proto::tag_of<proto::_>(),get_arity(proto::pack(proto::_))...)>
    >
{};

template <typename Expr>
std::string stringify(const Expr& expr, const std::string& name="foo")
{
   std::stringstream result;
   int current_arg;
   int arity= get_arity()(expr); 

   result << "template <";

   for(current_arg=0;current_arg<arity-1; ++current_arg)
      result << " typename T" << current_arg << ",";
   result << " typename T" << current_arg;

   result << " >\n";
   result << "struct " << name << " {\n\t";
   result << "auto operator()(";

   for(current_arg=0;current_arg<arity-1; ++current_arg)
      result << " T" << current_arg << " x" << current_arg << ",";
   result << " T" << current_arg << " x" << current_arg;
   result << " )\n\t\t-> typename std::remove_reference< decltype( " << print_expression()(expr) << " ) >::type\n";
   result << "\t{ return " << print_expression()(expr) << "; }\n";
   result << "};\n";

   return result.str();
}

int main()
{
   using phx::placeholders::_1; 
   using phx::placeholders::_2;
   using phx::placeholders::_3;
   std::cout << stringify(-_1) << std::endl;
   std::cout << stringify(_1+_2) << std::endl;
   std::cout << stringify(_1+_2*_3) << std::endl;

   std::cout << stringify((_1+_2)*_3) << std::endl;
   std::cout << stringify(_1>2) << std::endl;
   std::cout << stringify(_1*(-_2)) << std::endl;
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-27T22:18:12.370

字符串化是一种预处理器功能 - 您只能对预处理器可用的标记进行字符串化。类型处理（包括类型和表达式扩展）由在预处理器*之后*运行的编译器完成，因此您无法执行所需的字符串化。

# unit-testing - 在 FluentSecurity 中测试自定义 PolicyViolationHandler

> ID：15670434
> 
> 赞同：2
> 
> 时间：2013-03-27T22:06:10.527
> 
> 标签：unit-testing, fluent-security

我在 FluentSecurity （实现`ISecurityPolicy`）中编写了一个自定义策略，并通过实现一个相应的 PolicyViolationHandler `IPolicyViolationHandler`。一切都与策略和处理程序完美配合，但是我正在通过编写一些单元测试来测试我的`IPolicyViolationHandler.Handle(PolicyViolationException exception)`. *我知道我在执行后正在反向编写测试（入场以避免火焰）。*

**我的问题是**：有没有办法生成一个`PolicyViolationException`对象作为我可以传递给我的测试的模拟？PolicyViolationException 没有任何公共构造函数（所以我不能新建一个对象），也没有抽象基础或模拟接口（使用 Moq）。

我查看了 API，但没有看到任何可以生成的内容。我知道我可以做一些反射魔法来得到一个，但想检查我是否遗漏了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:38:05.773

在 2.0-alpha4 及之前的版本中，这是不可能的。但是，这个问题**将在即将发布**的 FluentSecurity 2.0-beta1 版本中得到解决，其中构造函数将被公开。

[https://github.com/kristofferahl/FluentSecurity/commit/09e9b69ef5a297d242f8a813babbeebd47b54818](https://github.com/kristofferahl/FluentSecurity/commit/09e9b69ef5a297d242f8a813babbeebd47b54818)

感谢您引起我的注意！

# java - 带路径的圆顶角

> ID：15670438
> 
> 赞同：2
> 
> 时间：2013-03-27T22:06:33.080
> 
> 标签：java, android, clipping

我正在尝试在 java 中剪辑 Canvas 的左上角和右上角。我知道你可以只使用`addRoundRect`所有的角落，但我不确定只对顶角做什么。

这是我目前拥有的：

```
@Override
protected void onDraw(Canvas canvas) {
    float radius = 12f;
    Path clipPath = new Path();
    RectF rect = new RectF(0, 0, this.getWidth(), this.getHeight());
    //uh...
    //clipPath.addRoundRect(rect, radius, radius, Path.Direction.CW);

    canvas.clipPath(clipPath);
    super.onDraw(canvas);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-12T07:49:27.167

您可以像这样使用另一个重载方法 addRoundRect() ：

```
int width  = view.getWidth();
int height = view.getHeight();      
float[] radii = {0, 0, 0, 0, 0, 0, 0, 0};
if( mRadiusTop ) {
    radii[0] = mRadius;
    radii[1] = mRadius;
    radii[2] = mRadius;
    radii[3] = mRadius; 
}
if( mRadiusBottom ) {
    radii[4] = mRadius;
    radii[5] = mRadius;
    radii[6] = mRadius;
    radii[7] = mRadius;
}

clipPath.addRoundRect(new RectF(0, 0, width, height), radii, Path.Direction.CW);
canvas.clipPath(clipPath); 
```

我通过上面的代码解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T22:43:22.940

你可以破解它。只需将 RectF 设置为与圆角半径一样多的像素，如下所示：

```
RectF rect = new RectF(0, 0, this.getWidth(), this.getHeight() + 12.0f); // draw a larger rect 
```

我想您必须将油漆颜色设置为完全透明（0x00fffffff）。

# oauth - CAS 是否支持 OAuth 资源所有者密码凭证授予？

> ID：15670440
> 
> 赞同：0
> 
> 时间：2013-03-27T22:06:38.940
> 
> 标签：oauth, cas, jasig

经过一些基本测试后，我让 CAS 与授权代码授予合作。这似乎是[文档](https://wiki.jasig.org/display/CASUM/OAuth+server+support)中提到的唯一授权。CAS 是否支持 OAuth2.0 草案 2-31 第 4.3 节中概述的其他授权？什么是服务端点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:04:44.760

我是 CAS 的 OAuth 服务器支持的创建者，到目前为止，它只支持与 CAS 网络流非常匹配的授权代码授予...

# javascript - 尽管 target="_Self" 的 IE8 本地文件的 href 会打开新窗口

> ID：15670449
> 
> 赞同：1
> 
> 时间：2013-03-27T22:07:18.080
> 
> 标签：javascript, html

我的文件集都在本地服务器上，而不是 http。如果我使用：

```
 <a href="somefile.htm" target="_Self">click here</a> 
```

它在新窗口中打开文件。_Top 也被忽略，我得到一个新窗口。我可以通过使用 window.open() 来解决它，但由于各种原因，我们需要避免使用 javascript。

我很想知道为什么忽略 a href 目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:18:14.043

您想使用`_self`（或完全不使用）：http: [//jsfiddle.net/rsmRA/——](http://jsfiddle.net/rsmRA/)这是一个区分大小写的值。

根据[规范](http://www.w3.org/community/webed/wiki/HTML/Elements/a#HTML_Attributes)，它似乎不*应该*区分大小写，所以我猜这是一个浏览器错误。如果您将其设置为除这些关键字之外的任何内容，则它是“浏览上下文名称”。您可以通过单击同一链接两次来查看此操作；您会注意到它第一次只打开一个新窗口，第二次重新加载该窗口。

# qpid - QPID CPP 0.20 和 Java 客户端 AMQP 1.0 之间的无限连接初始化

> ID：15670450
> 
> 赞同：1
> 
> 时间：2013-03-27T22:07:22.000
> 
> 标签：qpid

我正在运行 Qpid 0.20 CPP 代理（符合 AMQP 1.0）并尝试使用 Java 应用程序发送 JMS 消息。

*   当使用 AMQP 0-10 客户端和`org.apache.qpid.jndi.PropertiesFileInitialContextFactory`类时起作用（参见[第一个 Java 示例](https://svn.apache.org/repos/asf/qpid/trunk/qpid/java/client/example/src/main/java/org/apache/qpid/example/)）

*   当使用 AMQP 1.0 客户端和类时不起作用（参见**第二**[个 Java 示例](https://svn.apache.org/repos/asf/qpid/trunk/qpid/java/amqp-1-0-client-jms/example/src/main/java/org/apache/qpid/amqp_1_0/jms/example/)）：客户端进入无限线程循环并且从未实际发送消息。`org.apache.qpid.amqp_1_0.jms.jndi.PropertiesFileInitialContextFactory`

由于[Windows Azure 文档](http://www.windowsazure.com/en-US/develop/java/how-to-guides/service-bus-amqp/)明确提到了`org.apache.qpid.amqp_1_0.jms.jndi.PropertiesFileInitialContextFactory`该类的使用，是不是 Qpid 0.20 CPP 代理不支持 AMQP 1.0 Java 客户端？鉴于`http://guest:guest@localhost/test?cliendId='test-client'`AMQP 1.0 示例中的连接 url ( ) 无效，我根本不知道代码是否可运行。

有谁知道设置 CPP 代理 - Java AMQP 1.0 客户端是否真的有效？

# sql - “分页”选择 SQL 服务器

> ID：15670459
> 
> 赞同：1
> 
> 时间：2013-03-27T22:08:16.053
> 
> 标签：sql, sql-server, performance, pagination

我有一个包含 100 行的表，并且只想选择其中的一部分（例如从第 20 行到第 30 行），例如“分页”SELECT。

在 SQL Server 2008 R2 中，这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:18:13.213

你可以这样做（假设你的表被称为“tablename”，你的主键是 id，你想要第 10 到 15 行）。

```
select * from 
(select *,row_number() over (order by id) as r from tablename)
t where r >10 and r < 15; 
```

它可能看起来效率低下，但这（有点）它是如何在 linq 内部完成的。

# linux-kernel - Linux CFS 志愿者上下文切换 SCHED_OTHER SCHED_FIFO

> ID：15670460
> 
> 赞同：2
> 
> 时间：2013-03-27T22:08:16.497
> 
> 标签：linux-kernel, scheduling

我正在为我的操作系统类做一些 Linux CFS 分析，并且有一个我无法解释的观察结果。

对于两个在其他方面相同的进程，当它们使用 SCHED_OTHER 策略执行时，我看到的自愿上下文切换比使用 SCHED_FIFO 或 SCHED_RR 策略执行它们时多 50%。

*对于非自愿*切换，这不会让我感到惊讶，因为 SCHED_OTHER 的优先级要低得多，所以它必须放弃 CPU。*但为什么自愿*转换会出现这种情况。为什么 SCHED_OTHER 会比实时进程更频繁地自愿放弃 CPU？这是一个相同的进程，所以它只会在切换到 I/O 时自愿放弃 CPU，对吧？而且我认为策略的选择不会影响 I/O 尝试的频率。

任何Linux人有一个想法？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:00:45.497

首先要了解调度策略只不过是在内核中实现的调度算法。所以SCHED_FIFO、SCHED_RR、SCHED_OTHER是内核中不同的算法。SCHED_FIFO 和 SCHED_RR 属于实时调度算法“类”。SCHED_OTHER不过是系统中正常进程的调度算法，更通俗的说法是CFS(Completely Fair Scheduler)算法。

> SCHED_OTHER 的优先级要低得多

准确地说，它没有“太多”的低优先级，但比实时调度类的优先级低“a”。Linux Scheduler中有三个调度类——Real-Time调度类、Normal Process调度类和Idle Tasks调度类。优先级如下：

1.  实时调度类。
2.  正常任务调度类。
3.  空闲任务调度类。

系统上的任务属于这些类之一。（请注意，在任何时间点，一个任务只能属于一个调度类，尽管它的类可以更改）。Linux 中的调度器首先检查实时类中是否有任务。如果有的话，它会调用 SCHED_FIFO 或 SCHED_RR 算法，具体取决于系统上的配置。如果没有实时任务，则调度程序检查正常任务并根据是否有任何正常任务准备运行来调用 CFS 算法。还

回到主要问题，为什么当您在两个不同的调度类中运行相同的进程时会看到更多的上下文切换。有两种情况：

1.  一般在一个简单的系统上，几乎没有实时任务，大部分任务属于普通任务类。因此，当您在实时类中运行该进程时，您将拥有该进程的所有处理器（因为实时调度类比普通任务调度类具有更高的优先级，并且没有（/非常少的实时）时间共享 CPU 的任务）。当您在普通任务类中运行相同的进程时，该进程必须与其他各种进程共享处理器，从而导致更多的上下文切换。
2.  即使系统中有许多实时任务，所讨论的实时调度算法（FIFO 和 RR）的性质也会导致较低的上下文切换。在 FIFO 中，处理器在当前任务完成之前不会切换到其他任务，并且在 RR 中，有一个固定的时间间隔（时间量子）分配给进程。当您查看 CFS 时，进程获得的时间片与处理器的运行队列中的任务数成正比。它是其权重和处理器运行队列总权重的函数。我假设您精通 FIFO 和 RR，因为您正在学习操作系统课程。有关 CFS 的更多信息，我建议您使用 google 搜索，或者如果您足够勇敢，请查看其源代码。

希望答案是完整的:)

# php - 根据网站可用性进行图像更新/更改

> ID：15670462
> 
> 赞同：0
> 
> 时间：2013-03-27T22:08:21.883
> 
> 标签：php, javascript, html

这是我想要做的。

假设我有一张表格，表格的其中一个部分用于告诉用户列出的网站是否处于活动状态并且正在运行。

我正在尝试做的是根据网站是否处于活动状态进行图像更新。

因此，如果网站处于活动状态，则表格中的图片将为 active.jpg ，或者如果网站已关闭，则图片将为 down.jpg.. 等等。

因此，对于一个整体的基本示例：

这就是我希望有人在连接到我的网站时看到的内容。

```
Website      Active         Link
-------------------------------------------
Google.com   active.jpg     www.google.com

Yahoo.com    down.jpg       www.yahoo.com 
```

这可能吗？并且易于实施？我一直在互联网上寻找解决方案，但找不到任何东西，希望也许这里的某个人有一些东西我至少可以用它来朝着正确的方向开始。

# javascript - Facebook Javascript SDK Cookie

> ID：15670464
> 
> 赞同：2
> 
> 时间：2013-03-27T22:08:32.180
> 
> 标签：javascript, facebook, backbone.js, sdk

我为我的 Node.js Applikation 编写了一个模型（主干），它使用 Facebook Javascript SDK 实现了身份验证。

我的模型代码在这里：

```
define(['jquery','underscore','backbone'], function($,_,Backbone) {
 var facebookUserModel = Backbone.Model.extend({
  initialize: function() {

    console.log('FacebbokUserModel initialized');

    // bind statusChange to this context
    _.bindAll(this, 'statusChange');

    // be notified when the session changes        
    FB.Event.subscribe('auth.authResponseChange', this.statusChange);
  }

  //saves actual status
  ,_loginStatus : null

  //return true/false if user is logged in
  ,isLoggedIn : function() {
    return this._loginStatus === 'connected';
  }

  //check whether user is logged in or not
  //used for firsttime invoke
  ,getLoginStatus : function() {
    _this = this;
    FB.getLoginStatus(function(response) {
      _this.statusChange(response);
    });
  }     

  //log user in
  ,login: function() {
    FB.login(function() {});
  }

  //log user out
  ,logout: function() {
    FB.logout();
  }

  //treat changes on status
  ,statusChange: function(response) {
    console.log('statuschange');
    if(this._loginStatus === response.status) return false;

    var event;

    if(response.status === 'not_authorized') {
      event = 'fb:unauthorized';
    }else if(response.status === 'connected') {
      event = 'fb:connected';     
    }else {
      event = 'fb:disconnected';
    }

    console.log(event);
    // RESPONSE IS SHOWN CORRECTLY EVEN IN FIREFOX
    console.log(response);
    this._loginStatus = response.status;
    this.trigger(event, this, response);  
  }

  ,sync: function(method, model, options) {      
    if(method !== 'read') throw new Error('FacebookUser is a readonly model, cannot perform ' + method);

    var callback = function(response) {
      if(response.error) {
        options.error(response);
      } else {
        options.success(model, response, options);
      }
      return true;
    };

    FB.api('/me', callback);
  },      

});

return facebookUserModel;
}); 
```

初始化函数

```
FB.init({
  appId      : 'myappId', // App ID
  channelUrl : 'channelurl', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true,  // parse XFBML
  oauth      : true
}); 
```

当我执行此代码时，它在 Chrome 和 IE 中运行良好。在服务器端，我可以很容易地验证这个 cookie，但我遇到了 Firefox 的问题。Firefox 正确显示响应（客户端），但它不会创建 fbsr-cookie。有人可以告诉我为什么吗？我该如何处理这个问题？

打招呼

# c# - 阻止 Windows Phone 8 文本框中的自动选择

> ID：15670473
> 
> 赞同：0
> 
> 时间：2013-03-27T22:09:12.817
> 
> 标签：c#, wpf, silverlight, windows-phone-7, windows-phone-8

我在我的 Windows Phone 应用程序中使用只读`TextBox`来显示可复制的文本。现在我想点击`TextBox`一个字符，即用户点击的那个字符。

下面的代码正确地选择了第一个字符，但一秒钟后选择被重置（也就是说，Windows Phone 自动选择了点击位置的整个单词）：

```
private void TextBox_Tap(object sender, System.Windows.Input.GestureEventArgs e) {
    TextBox box = sender as TextBox;
    Dispatcher.BeginInvoke(delegate { box.Select(0, 1); });
    //simplified example: select only the first character.
} 
```

不过，这在 WP7 中运行良好。
关于如何恢复旧行为的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:49:34.170

我不确定这将如何与您拥有的其余代码交互，但您应该能够使用`SelectionChanged`和`GotFocus`上的事件的组合`TextBox`来替换以前使用的`Tap`处理程序来停止选择被重置用户。

**更新** 这不适合这种情况。

从我的设备上的快速播放来看，看起来像[MouseLeftButtonUp](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleftbuttonup%28v=vs.95%29.aspx)之类的其他事件导致了这个，而不是 Tap。尝试将您的代码移至该事件。

# eclipse - cucumber-jvm java不生成步骤骨架

> ID：15670480
> 
> 赞同：1
> 
> 时间：2013-03-27T22:09:27.083
> 
> 标签：eclipse, cucumber-jvm

在 Eclipse Juno 中运行。

```
@RunWith(Cucumber.class)
@Cucumber.Options(format={"pretty", "html:target/cucumber"})
public class RunTests {
} 
```

在控制台窗口中，我看到：

```
Feature: Depositing money

Scenario: Sunny day [90m# deposit.feature:3[0m
Given: I have an Account with a balance of $100
When: I deposit $20
Then: The Account balance should be $120 
```

问题：[90m# 和 3[0m 关于什么？

在 target/cucumber/index.html 中，我看到：

```
Feature: Depositing money
Scenario: Sunny day
Given: I have an Account with a balance of $100 
When: I deposit $20 
Then: The Account balance should be $120 
```

我假设如果我在没有步骤定义的新功能上运行测试，那么 cucumber-jvm 会为我可以从控制台窗口复制到 java 文件中的步骤吐出骨架定义。这不就是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-30T08:54:44.783

如果您使用选项 '--monochrome' 运行，您将不会得到奇怪的格式`[90m# deposit.feature:3[0m`。您可以在 @CucumberOptions 中使用单色 = true 或在命令行中使用`--monochrome`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:56:14.713

Cucumber 应该在控制台窗口中提供步骤定义框架。您是否尝试过从终端运行它们？

> 问题：[90m# 和 3[0m 关于什么？

这些是提供颜色的编码。可能是由于您使用了 PrettyFormatter。

# python - 使用 pandas 从多个文件创建大型数据库

> ID：15670482
> 
> 赞同：0
> 
> 时间：2013-03-27T22:09:42.493
> 
> 标签：python, database, numpy, pandas

我有许多由另一个程序生成的文件（~2,000,000），我需要从中提取数据。这些文件具有不同方法的不同值的共同索引，我不知道如何很好地表达这一点，所以这里是一个三维示例：

```
[x1,y1,z1,method1]
[x1,y1,z1,method2]
[x2,y2,z2,method1]
[x2,y2,z2,method2] 
```

最终我想要的是一个看起来像这样的熊猫数据框：

```
 x   y   z  method1  method2 ... methodn
0  x1  y1  z1     data     data        data
1  x2  y2  z2     data     data        data
2  x3  y3  z3      NaN     data        data
3  x4  y4  z4     data      NaN        data
...
n  xn  yn  zn     data      NaN        NaN 
```

方法会有一些漏洞，数据没有对齐。

下面显示了伪代码：

```
file_list=glob.glob('/scratch/project/*')

method1_list=[]
method2_list=[]
...
methodn_list=[]

#Obtain data in the correct list
for outfile in file_list:
    indices=(#function that obtains indices)
    data=(#function that obtains primary data)

    if method1: method1_list.append([indices,data])
    elif method2: method2_list.append([indices,data])
    ...
    else methodn: methodn_list.append([indices,data])

#Convert list to dataframe
method1_pd=pd.DataFrame(method1_list,columns[indices,method1])
method2_pd=pd.DataFrame(method2_list,columns[indices,method1])
...
methodn_pd=pd.DataFrame(methodn_list,columns[indices,method1])

#Apply multi index
method1=method1.set_index(indices)
method2=method2.set_index(indices)
...
methodn=methodn.set_index(indices)

#Combine data    
out=method1.combine_first(method2)
out=out.combine_first(method3)
...
out=out.combine_first(methodn) 
```

这非常有效，但是随着方法数量的增加，编写起来变得相当乏味，而且看起来相当不合 Python。所以我有以下问题：

*   有没有更好的方法以这种方式创建 DataFrame？for 循环之后的所有内容都已包含在定义中，但在这里没有帮助提高可读性。我仍然必须将每种方法说明三遍。
*   如果我想更新数据集，是否有一种简单的方法可以省略已读取的文件？
*   有没有更好的方法来以这种方式对齐熊猫数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:14:07.300

这样的事情可能会奏效，但这取决于您的数据的实际构造方式。如果您可以提供样品，可能会有所帮助。它假定您的索引是已知的（或随您计算）

```
from collections import defaultdict
file_list = glob.glob('/scratch/project/*')

methods = defaultdict([])
for outfile in file_list:
    #indices = (#function that obtains indices)
    #data    = (#function that obtains primary data)

    methods[method].append([indices,data])

frames = [ DataFrame(method_list,columns[indices,method]) 
         for method, method_list in methods.items() ]

# concat
combine_frame = pd.concat(frames,axis=1)

# set your combined index
result = combine_frame.set_index(indicies) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:39:28.307

也许连接每个文件/帧并从最终的 DataFrame 创建一个数据透视表？

```
df1 = pd.read_csv(StringIO("""\
x,y,z,data
x1,y1,z1,1
x2,y2,z2,1
"""), sep=',')
df2 = pd.read_csv(StringIO("""\
x,y,z,data
x1,y1,z1,2
x2,y2,z2,2
"""), sep=',')
df3 = pd.read_csv(StringIO("""\
x,y,z,data
x3,y2,z2,3
"""), sep=',')
df1['method'] = 'method1'
df2['method'] = 'method2'
df3['method'] = 'method3'
df = pd.concat([df1, df2, df3])

In [17]: df.pivot_table(rows=['x', 'y', 'z'], cols='method', values='data',
...                     aggfunc='first')
Out[17]: 
method    method1  method2  method3
x  y  z                            
x1 y1 z1        1        2      NaN
x2 y2 z2        1        2      NaN
x3 y2 z2      NaN      NaN        3

In [18]: df
Out[18]: 
    x   y   z  data   method
0  x1  y1  z1     1  method1
1  x2  y2  z2     1  method1
0  x1  y1  z1     2  method2
1  x2  y2  z2     2  method2
0  x3  y2  z2     3  method3 
```

# josql - 使用 JoSQL 访问公共静态最终字段

> ID：15670487
> 
> 赞同：0
> 
> 时间：2013-03-27T22:10:06.833
> 
> 标签：josql

我已经使用 JoSQL 好几个月了，今天我遇到了一个我不知道如何解决的问题。我可能可以通过绑定变量/占位符来解决它，但我想在查询中包含这些字段。

SELECT * FROM ...MyObject WHERE getType != com.mypackage.myclass.TYPE_A

这是我的查询。TYPE_A 是“myclass”类中的公共静态最终 int 属性。访问方法（例如 getType）很容易，因为 getType 应该是来自 MyObject 的方法——只是我没有在它后面写圆括号（据我所知，这就是 JoSQL 的工作方式）。

有谁碰巧知道如何访问公共静态最终字段？

JoSQL 使用轻轻的 web-utils；它似乎是某种 Accessor/Getter/Setter 框架。我很想在不必绑定变量的情况下访问该属性，但我无法这样做。

提前感谢您的帮助！对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:29:01.310

我想我已经想通了。首先：无论出于何种原因，似乎都无法访问静态变量。我使用以下方法来解决我的问题：

1.  创建一个方法，该方法获取给定的 JoSQL 语句
2.  通过说“{?FULL_PACKAGE_AND$CONSTANT}”标记要替换的常量
3.  使用反射来确定字段中的列以及列（和值）
4.  迭代地替换语句，直到没有“{?”-values 可用

**示例：**
*JoSQL 语句如下所示：*

```
(isWeapon = TRUE AND getItem.getType2 = {?com.l2jserver.gameserver.model.items.L2Item$TYPE2_WEAPON}) 
```

使用查询对象的方法：

```
final Query query = DataLayer.createJoSqlQuery(joSql); 
```

方法（预处理）处理 JoSQL 语句：

```
final Query query = new Query();

int variableColumn = 0;
while (joSql.indexOf("{?") > -1) {
    variableColumn++;
    final int startIndex = joSql.indexOf("{?");
    final int endIndex = joSql.indexOf("}", startIndex);
    final String value = joSql.substring(startIndex + 2, endIndex);
    try {
        final Object variableValue = Class.forName(value.split("\\$")[0]).getField(value.split("\\$")[1]).get(null);
        query.setVariable(variableColumn, variableValue);
        joSql = joSql.replace("{?" + value + "}", "?");
    }
    catch (...) {
        e.printStackTrace();
    }
}

query.parse(joSql);
return query; 
```

JoSQL 语句预处理方法基本上遍历给定的 JoSQL 语句并查看它是否包含字符串“{?”。如果是这样，它会进行一些复制和粘贴（注意常量名称前面的美元符号）。

最后，它使用类似于准备好的语句“setObject”方法创建对象并设置它们。最后，它只是将 JoSQL 语句中的值替换为问号（“？”），并在新创建的 Query 对象中设置相应的对象，该对象稍后用于检索信息。

# macos - OSX 无法访问 localhost，只能访问 username.local

> ID：15670488
> 
> 赞同：1
> 
> 时间：2013-03-27T22:10:08.480
> 
> 标签：macos, web, localhost, host

我在山狮 10.8.3 中一直面临这个问题，但我似乎找不到答案。问题是我可以使用`username.local`or`http://127.0.0.1/`但不能通过`localhost`. 我正在使用 apache 2.2 和 virtualhostx，现在很好，因为我将每个虚拟主机映射到一个文件夹，但是在 java 中开发时，使用 Tomcat，我无法访问 localhost，我也必须访问`username.local`..

我的主机文件

```
127.0.0.1       localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0     localhost 
```

如果我找不到解决方案，我只能考虑重新安装.. 这会很烦人..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T16:58:03.620

check your httpd.conf for this line

# Virtual hosts

Include /private/etc/apache2/extra/httpd-vhosts.conf

i had the same issue. Then i discovered that the httod-vhosts.conf file was commented out when i upgraded my OS.

# javascript - jquery检测mouseup

> ID：15670490
> 
> 赞同：0
> 
> 时间：2013-03-27T22:10:15.130
> 
> 标签：javascript, jquery

我有个问题。

该代码在 Firefox 中运行良好，但在 Chrome 中却一团糟。

代码相当基本。有一个带背景的 div。在 jquery 在该 div 上的 mousedown 上，我设置了一个函数以间隔运行。mouseup 后，间隔被清除。很简单，对吧？

所以问题是这样的。假设用户在 Chrome 中单击鼠标右键并调出上下文菜单。或者他们拖动 div。mouseup 事件不再注册。

有任何想法吗？

我有一个想法，我可以在哪里获得鼠标按钮的状态。但这似乎是不可能在没有鼠标的情况下完成的。

```
 function mouseD(e){
            mouseE = e;
            timer = setInterval(scroller, 50);
            $(document).mouseup(function(){
                clearInterval(timer);
            });
            //mouseB = e.button;
            //mouseW = e.which;
            //console.log(e.button + " D " + e.which);
        }
imgbox.mousedown(mouseD); 
```

编辑：所以我设法通过禁止此类行为来解决上下文菜单和拖动问题。用户不能再这样做了。但是，如果用户同时单击鼠标右键和左键，则 mouseup 永远不会注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:15:37.497

看看这个网站：它详细介绍了不同浏览器的鼠标事件。 [http://unixpapa.com/js/mouse.html](http://unixpapa.com/js/mouse.html)

# ios - 子类化没有委托方法的缩放 UIScrollView

> ID：15670491
> 
> 赞同：4
> 
> 时间：2013-03-27T22:10:15.873
> 
> 标签：ios, objective-c, cocoa-touch, uiscrollview, delegates

我想实现一个`UIScrollView`子类来呈现一些自定义格式的内容。我只是设置了滚动视图的模型对象属性，它处理所有必需的布局和渲染以显示内容。

这工作正常，但现在我想包括缩放。根据文档，要支持缩放，您必须设置一个委托并实现该`viewForZoomingInScrollView:`方法。我想我可以将委托设置为滚动视图本身并在子类中实现该方法。但是这样做我将失去拥有可以通知滚动事件的外部委托（如封装的 UIViewController）的能力。

假设文档是正确的，并且绝对没有（记录的）方法可以在没有委托的情况下实现缩放，我怎么能仍然保留拥有一个常规的、不相关的委托的可能性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:15:38.387

基于 H2CO3 的建议，即保存一个指向真正代表的隐藏指针并将所有传入消息转发给它，我提出了以下解决方案。

声明一个私有委托变量来存储对传递给`setDelegate:`方法的“真实”委托的引用：

```
@interface BFWaveScrollView ()
@property (nonatomic, weak) id<UIScrollViewDelegate> ownDelegate;
@end 
```

将委托设置为 self 以收到有关滚动事件的通知。使用`super`，所以`setDelegate:`调用的是原始实现，而不是我们修改过的。

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [super setDelegate:self];
    }
    return self;
} 
```

覆盖`setDelegate:`以保存对“真实”委托的引用。

```
- (void)setDelegate:(id<UIScrollViewDelegate>)delegate {
    _ownDelegate = delegate;
} 
```

当*UIScrollView*尝试调用其委托的方法时，它会首先检查委托是否`respondsToSelector:`。如果选择器是`UIScrollViewDelegate`协议的一部分，我们必须将其转发给真正的委托（不要忘记`#import <objc/runtime.h>`）。

```
- (BOOL)selectorIsScrollViewDelegateMethod:(SEL)selector {
    Protocol *protocol = objc_getProtocol("UIScrollViewDelegate");
    struct objc_method_description description = protocol_getMethodDescription(
                                                   protocol, selector, NO, YES);
    return (description.name != NULL);
}

- (BOOL)respondsToSelector:(SEL)selector {
    if ([self selectorIsScrollViewDelegateMethod:selector]) {
        return [_ownDelegate respondsToSelector:selector] ||
               [super respondsToSelector:selector];
    }
    return [super respondsToSelector:selector];
} 
```

最后，将所有未在子类中实现的委托方法转发给真正的委托：

```
- (id)forwardingTargetForSelector:(SEL)selector {
    if ([self selectorIsScrollViewDelegateMethod:selector]) {
        return _ownDelegate;
    }
    return [super forwardingTargetForSelector:selector];
} 
```

不要忘记手动转发那些由子类实现的委托方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:20:29.537

我会滥用我是一个子类的事实（*故意*：P）。所以你可以破解它。真的很糟糕，我应该为提出这个解决方案而感到难过。

```
@interface MyHackishScrollView: UIScrollView {
    id <UIScrollViewDelegate> ownDelegate;
}

@end

@implementation MyHackishScrollView

- (void)setDelegate:(id <UIScrollViewDelegate>)newDel
{
    ownDelegate = newDel;
    [super setDelegate:self];
}

- (UIView *)viewForScrollingInScrollView:(UIScrollView *)sv
{
    return whateverYouWant;
}

// and then implement all the delegate methods
// something like this:
- (void)scrollViewDidScroll:(UIScrollView *)sv
{
    [ownDelegate scrollViewDidScroll:self];
}

// etc.

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T13:07:19.843

也许几周后这更容易阅读和理解:)（用于拦截 locationManager:didUpdateLocations: 在子类中的示例代码）

除了将 self 设置为超类的委托和拦截 setDelegate 以将用户的委托保存到 mDelegate 的相同处理。

编辑：

```
-(BOOL)respondsToSelector:(SEL)selector {
    if (sel_isEqual(selector, @selector(locationManager:didUpdateLocations:)))
        return true;
    return [mDelegate respondsToSelector:selector];
}

- (id)forwardingTargetForSelector:(SEL)selector {
    if (sel_isEqual(selector, @selector(locationManager:didUpdateLocations:)))
        return self;
    return mDelegate;
} 
```

# php - PHP：从选定文件中检索完整路径以将数据导入数据库

> ID：15670495
> 
> 赞同：0
> 
> 时间：2013-03-27T22:10:27.520
> 
> 标签：php, mysql, file-io, pathname

我想允许用户选择一个文件，从中导出数据并将其保存到数据库中。我找到了以下代码来导入数据：

```
$fp = fopen("people.csv", "r");

while ($line = fgets($fp)) {
$char =  split("\t",$line,4); 
 list($name, $age,$height,$date) = $char;
//Split the line by the tab delimiter and store it in our list
$sql = "insert into people(name,age,height,date) values('$name','$age','$height','$date')"; // Generate our sql string
mysql_query($sql) or die(mysql_error()); // Execute the sql
//fclose($line); 
```

我不确定它是否有效，但我还没有走到那一步。我的问题是如何获取所选文件的完整路径名，以便可以将其输入以下命令，而不是对文件名进行硬编码：

```
$fp = fopen("people.csv", "r"); 
```

我花了很多时间研究这个但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:17:02.210

如果你想让用户上传这个文件，你应该实现文件上传。请查看[W3Schools 教程](http://www.w3schools.com/php/php_file_upload.asp)以获取说明。

主要思想是从以下位置获取文件路径`$_FILES["file"]["tmp_name"]`：

```
$fp = fopen($_FILES["file"]["tmp_name"], "r"); 
```

如果您将文件静态存储在 Web 项目文件夹中，则可以使用包含以下内容的路径`DOCUMENT_ROOT`：

```
$path = $_SERVER["DOCUMENT_ROOT"] + 'relative/path/to/your/file/' + 'people.csv'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:31:11.627

可以通过`__DIR__`魔术常量获取当前文件的路径；

[魔术常数](http://www.php.net/manual/en/language.constants.predefined.php)

在你的情况下；

```
echo __DIR__ . 'people.csv'; 
```

此外，您可以考虑使用 PHP 提供的内置 CSV 函数； [http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

如果您想完全跳过通过 PHP 处理文件，MySQL 提供了直接从 CSV 文件导入数据的方法；

[https://dev.mysql.com/doc/refman/5.5/en/load-data.html](https://dev.mysql.com/doc/refman/5.5/en/load-data.html)

# c# - 如何使用 Xml REST 查询中的 Xml 属性填充 ListBox？

> ID：15670496
> 
> 赞同：0
> 
> 时间：2013-03-27T22:10:29.363
> 
> 标签：c#, xml, listbox, datasource, xml-documentation

我正在使用 wiki api 创建一个 C# 程序，用户在其中键入关键字并进行搜索（如果用户搜索数据库，则 XML url 将是：[https ://en.wikipedia.org/w/api.php?action =query&list=allcategories&acmin=10&acprefix=database&acprop=size|hidden&format=xml&aclimit=500](https://en.wikipedia.org/w/api.php?action=query&list=allcategories&acmin=10&acprefix=database&acprop=size|hidden&format=xml&aclimit=500)。下拉框填充内部文本。当用户从下拉框中选择不同的内部文本主题时，列表框应该填满子类别。我不能弄清楚如何填写子类别框。有谁知道我会这样做吗？这是我到目前为止的 cs 代码：

```
 using System;
 using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using System.Xml; //needed for XML processing
using System.Net; //needed for HttpWebRequest processing

public partial class WikiExcercise : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        string URL = "https://en.wikipedia.org/w/api.php?action=query&list=allcategories&acmin=10&acprefix=" + txtKeyword.Text +
            "&acprop=size|hidden&format=xml&aclimit=500";
        //create an xml document and locad it from the web service
        XmlDocument xmlDoc = new XmlDocument();
        //need to indicate a legitimate user againt (not faking from the browser)
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URL);
        request.UserAgent = "My application";
        xmlDoc.Load(request.GetResponse().GetResponseStream());

        XmlNodeList list = xmlDoc.SelectNodes("/api/query/allcategories/c[@subcats>0]");

        //databind the drop down list to the XmlNodeList

        ddlCategories.DataTextField = "InnerText";
        ddlCategories.DataSource = list;
        ddlCategories.DataBind();

    }
    protected void ddlCategories_SelectedIndexChanged(object sender, EventArgs e)
    {
        string URL = "https://en.wikipedia.org/w/api.php?action=query&list=allcategories&acmin=10&acprefix=" + txtKeyword.Text +
           "&acprop=size|hidden&format=xml&aclimit=500";
        //create an xml document and locad it from the web service
        XmlDocument xmlDoc = new XmlDocument();
        //need to indicate a legitimate user againt (not faking from the browser)
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URL);
        request.UserAgent = "My application";
        xmlDoc.Load(request.GetResponse().GetResponseStream());

        XmlNodeList Xn = xmlDoc.SelectNodes("/api/query/allcategories/c[@subcats>0]/@subcats");
        lstSubCategories.DataTextField = "InnerText";
        lstSubCategories.DataSource = Xn;
        lstSubCategories.DataBind();
        foreach (XmlNode xNode in Xn)
        {
            lstSubCategories.Items.Add("boo");
            lstSubCategories.DataTextField = "InnerText";
            //lstSubCategories.Items.Add(xNode.Attributes["subcats"].Value);
        } 

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:10:40.423

我这样做是作为 Windows 窗体应用程序的一部分而不是 ASP.NET 页面的一部分，这对我的设备来说更快。代码不应该有太大的不同。

我不得不调整您的子类别查询以匹配[https://www.mediawiki.org/wiki/API:Categorymembers](https://www.mediawiki.org/wiki/API:Categorymembers)上的规范和您的 XPath 语句。

此代码适用于我显示子类别的列表框。你可以做很多事情，比如在自定义类中保存类别/页面信息，这样你就可以通过它们的 ID 引用 wiki 页面，但我没有这样做。您将在 .Items.Add(...) 调用中实例化这样的对象。

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    string URL = "https://en.wikipedia.org/w/api.php?action=query&list=allcategories&acmin=10&acprefix=" + txtKeyword.Text +
        "&acprop=size|hidden&format=xml&aclimit=500&cmtype=subcat";
    //create an xml document and locad it from the web service
    XmlDocument xmlDoc = new XmlDocument();
    //need to indicate a legitimate user againt (not faking from the browser)
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URL);
    request.UserAgent = "My application";
    xmlDoc.Load(request.GetResponse().GetResponseStream());

    XmlNodeList list = xmlDoc.SelectNodes("/api/query/allcategories/c[@subcats>0]");

    ddlCategories.Items.Clear();
    foreach(XmlNode n in list)
    {
        ddlCategories.Items.Add(n.InnerText);
    }
}

protected void ddlCategories_SelectedIndexChanged(object sender, EventArgs e)
{
    string URL = "https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:" + ddlCategories.SelectedItem + "&format=xml&cmlimit=500";
    //create an xml document and locad it from the web service
    XmlDocument xmlDoc = new XmlDocument();
    //need to indicate a legitimate user againt (not faking from the browser)
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URL);
    request.UserAgent = "My application";
    xmlDoc.Load(request.GetResponse().GetResponseStream());

    XmlNodeList Xn = xmlDoc.SelectNodes("/api/query/categorymembers/cm/@title");

    lstSubCategories.Items.Clear();
    foreach(XmlNode n in Xn)
    {
        lstSubCategories.Items.Add(n.InnerText);
    }
} 
```

# asp-classic - 使用静态记录集作为具有字段更新的临时存储

> ID：15670498
> 
> 赞同：0
> 
> 时间：2013-03-27T22:10:36.463
> 
> 标签：asp-classic, ado

我正在调用存储过程来生成 ADO 记录集，并且我希望能够在输出数据之前更新数据（但不要将这些更新写回数据库）。

这甚至可能吗？如果可以，怎么做？

我尝试了许多游标和锁定类型，但它们要么立即出错，要么在我尝试更新记录集字段时出错。

```
io_oRecordSet.CursorLocation = adUseClient
io_oRecordSet.Open oDataCmd, , adOpenStatic, adLockOptimistic, adCmdStoredProc
... iterate through RS ...
io_oRecordSet("myCol").value = "foo" 
```

这会产生以下错误

> Microsoft 光标引擎错误“80040e21”
> 
> 多步操作产生错误。检查每个状态值。

从我所见，我怀疑 ADO 可能不喜欢数据来自存储过程，因为它不知道如何进行数据库更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:30:05.730

如果您绝对不需要更新数据库，则可以使用[断开连接的 Recordset](http://support.microsoft.com/kb/184397)。只需确保您使用客户端游标并将 Recordset 的`ActiveConnection`属性设置为`Nothing`在您打开它之后。

# javascript - jQuery.fadeOut() - 如何顺序应用到一组元素？

> ID：15670499
> 
> 赞同：-1
> 
> 时间：2013-03-27T22:10:40.847
> 
> 标签：javascript, jquery

我有'n'按钮

我需要

```
$('BUTTON').fadeOut(); 
```

...但我希望看到一个按钮一次消失..

如何 ？

我尝试使用下一个，但以下方式 ALL 瞬间消失

```
$(".genresButton").first().fadeOut().next().fadeOut()  ; 
```

我尝试使用fadeOut 来fadeOut 下一个，但我对按钮总数一无所知。

我尝试使用 $.each() 但没有成功

*编辑：*

这是我选择的工作解决方案：

```
$("body").on('click', '.genresButton',  function(event) {
    $(".genresButton").not($(this)).each(function(index){
        $(this).delay(index * 500).fadeOut(450);
    });

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:12:33.420

您可以[`delay`](http://api.jquery.com/delay)为此使用：

```
$('BUTTON').each(function(index) {
    $(this).delay(index * 500).fadeOut(450);
}); 
```

[实例](http://jsbin.com/exazul/1)| [来源](http://jsbin.com/exazul/1/edit)

这会安排每个按钮在 450 毫秒的过程中以 500 毫秒的间隔淡出。

`delay`非常适合您使用任何效果方法时。如果您需要使用不属于效果套件的东西（例如`hide`，例如）来执行此操作，您必须自己做`setTimeout`：

```
$('BUTTON').each(function(index) {
    var btn = $(this);
    setTimeout(function() {
        btn.hide();
    }, index * 500);
}); 
```

[实例](http://jsbin.com/exazul/2)| [来源](http://jsbin.com/exazul/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:13:28.623

非常基本的示例，您可以链接回调函数：

```
$("#button1").fadeOut(1000, function(){
    $("#button2").fadeOut(1000, function(){
        $("#button3").fadeOut();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:39:01.063

广义级联避免了必须提前安排所有事情，并且可以说更干净：

```
function seqFadeOut(jq, i) {
    jq.eq(i).fadeOut(function() {
        seqFadeOut(jq, i+1);
    });
}
seqFadeOut($(".genresButton"), 0);//start the cascade 
```

这实际上是@AlexOsborn 的方法，但适用于任何大小的集合。

*稍加思考，您甚至可以引入一种机制来在中途停止级联。*

[http://jsfiddle.net/zE6nq/](http://jsfiddle.net/zE6nq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T22:53:38.010

看起来可以为此使用 jQuery 队列。尽管队列通常用于为单个元素顺序执行动画，但似乎可以将一个队列用于多个元素。诀窍是使用 body 元素的队列，如下所示：

```
$('button').each(function() {
    var $button = $(this);
    $('body').queue(function() {
        $button.fadeOut(450, function() { $('body').dequeue(); });
    });
}); 
```

我从@schmunk 对[这个问题](https://stackoverflow.com/questions/1218152/how-can-i-animate-multiple-elements-sequentially-using-jquery)的回答中得到了这种技术。

[现场演示](http://jsfiddle.net/john_s/ZtSwv/)

# javascript - 生成点网格的算法

> ID：15670500
> 
> 赞同：0
> 
> 时间：2013-03-27T22:10:41.497
> 
> 标签：javascript, algorithm

我在以下模式（x，y）中有坐标数组： `array = [[1,2],[1,5],[1,1],[2,2],[2,5],[2,1]]`

我想做一些过程来达到效果：

`array1 = [[[1,2],[1,5],[1,1]],[[2,2],[2,5],[2,1]]]; array2 = [[[2,2],[2,5],[2,1]]]` 和

`array1a = [[[1,2],[2,2]]]; array2a = [[[1,5],[2,5]]]; array3a=[[[1,1],[2,1]]]`

换句话说，我想获得所有平行线和垂直线的坐标。我想出了两个双循环（一个由 x，另一个由 y），但也许还有另一种更快（更好）的方式

-- 伪代码：

> ```
>  for (var i = 0; i < length; i++) {
>               for (var j = 0; j < length2; j++) {
>                   var x = points[i][j][0];
>                   var y = points[i][j][1];
>               };
>           };
>           for (var i = 0; i < length2; i++) {
>               for (var j = 0; j < length; j++) {
>                   var x = points[i][j][0] ;
>                   var y = points[i][j][1] ;
>               };
>           }; 
> ```

**编辑**

好的，情况如下：

![在此处输入图像描述](../Images/e132da66bcbc74174370654265bb1b64.png)

我有这种矩形，我有点坐标（红色标记）作为数组：

`array = [[1,2],[1,5],[1,1],[2,2],[2,5],[2,1]]`

我想制作一个像这样的数组：

`array1 = [[[1,2],[1,5],[1,1]],[[2,2],[2,5],[2,1]]]`

在上面的数组中，有一些点的坐标，即绿线包含的点之一。这些线是与矩形边平行或垂直的线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:32:39.053

如果按 X 坐标对点进行排序，然后按 X 坐标将它们组合在一起，则每组都是垂直线上的一组点。

类似地，如果您按 Y 坐标对点进行排序，然后按 Y 坐标将它们组合在一起，则每个组都是水平线上的一组点。

如果这听起来很简单，我很抱歉。但是您的初始描述和添加的图表以及您的进一步解释使我相信这就是您所要求的。

# iphone - 无法归档 iOS 应用程序？

> ID：15670501
> 
> 赞同：3
> 
> 时间：2013-03-27T22:10:45.300
> 
> 标签：iphone, xcode, archive

我正在尝试归档我的应用以将其提交到 App Store。但是，“存档”按钮是灰色的。我不能提交。我在这里做错了什么？我是 iOS 开发者计划的成员，我相信我拥有所有必要的证书和个人资料，我做错了什么？？我以前存档过这个应用程序，但做了一些更改，所以我想重新存档它。帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T22:13:47.777

请选择方案作为**iOS 设备**而不是模拟器。就是这样。

![在此处输入图像描述](../Images/de612dd03c0675fcc41c3429ad42e382.png)

# .htaccess - htaccess 重写文件夹

> ID：15670503
> 
> 赞同：0
> 
> 时间：2013-03-27T22:10:47.987
> 
> 标签：.htaccess, mod-rewrite

我有一个看起来像这样的 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !static/(.*)\.
RewriteRule ^(.*)$ index.php?controller=$1 [QSA] 
```

它工作正常。/static 文件夹请求保持不变，而其他执行 index.php 文件。但现在我必须添加另一条规则。当用户导航到 /action/something 时，应该执行 /actions/something.php。但是当我添加以下行时

```
RewriteRule ^action/(.*)$ actions/$1.php [QSA] 
```

它会中断对静态文件夹的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:37:01.177

没有理由，为什么它应该打破`static`，除非你在之后写了新规则`RewriteCond`。但是，您应该做什么，重写为绝对 URL

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !static/(.*)\.
RewriteRule ^(.*)$ /index.php?controller=$1 [QSA]
RewriteRule ^action/(.*)$ /actions/$1.php 
```

`RewriteCond`长相不一般。除非有理由重写不带点的静态页面`.`，否则您应该`RewriteCond`将

```
RewriteCond %{REQUEST_URI} !static/ 
```

**更新**：

为了防止无限重写，您必须添加另一个排除条件

```
RewriteCond %{REQUEST_URI} !^/index\.php$ 
```

也`action`必须排除在外

```
RewriteCond %{REQUEST_URI} !/actions?/ 
```

所有放在一起给出

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !/static/
RewriteCond %{REQUEST_URI} !/actions?/
RewriteCond %{REQUEST_URI} !^/index\.php$
RewriteRule ^(.*)$ /index.php?controller=$1 [QSA]
RewriteRule ^action/(.*)$ /actions/$1.php 
```

# python - Emacs 的 Python 模式比较

> ID：15670505
> 
> 赞同：44
> 
> 时间：2013-03-27T22:10:59.217
> 
> 标签：python, emacs

所以我有 Emacs 24.3，它附带了一个相当新的`python.el`文件，提供了 Python 模式进行编辑。

[但我一直读到Launchpad](http://bazaar.launchpad.net/~python-mode-devs/python-mode/python-mode/view/head:/python-mode.el)`python-mode.el`上有一个，比较两个文件，我发现前者不到 4000 行，而后者几乎 20000 行。这表明后者的功能要丰富得多。

而且我找不到任何关于它们的在线特性比较、文档，或者至少是关于它们每个特性的列表。是的，有语法高亮和嵌入式解释器，但是 shell 缓冲区中的完成、源文件缓冲区中的完成、自动缩进、重新缩进等呢？

那么这些模式的重要特点是什么？（或您推荐的 Emacs 的任何其他 Python 模式。）请提供详细答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T01:01:02.247

我曾经是 python-mode.el 的用户，但一年前就停止使用它，因为我觉得它的开发方式组织得不好。这是我当时记下的一份清单。但我需要警告你，从那时起已经过去了将近一年，所以情况可能会改变。

1.  许多复制和粘贴功能。
2.  许多意外工作的代码。例如，不传递变量而是使用隐式绑定。这会产生许多编译错误（如果将其更改为词法范围，则将不起作用）。
3.  粗略的提交粒度。我发送了一个补丁，并提交了不相关的更改。

我喜欢 python-mode.el 的一件事是它带有自动化测试集（尽管我从未运行过它）。python.el 还没有测试集。但我知道 python.el 的作者现在正在编写它。

虽然 python.el 很紧凑，但这并不意味着你的功能很差。它更像是保持核心小，并通过提供简洁的 API 让其他人扩展它。python.el 的同一作者编写了[python-django.el](https://github.com/fgallina/python-django.el)来为 django 项目扩展 python.el。我为 Python 编写了名为[Jedi.el的自动完成插件和名为](https://github.com/tkf/emacs-jedi)[EIN](https://github.com/tkf/emacs-ipython-notebook)的高级 IPython 插件。与 python-mode.el 相比，它们对 python.el 的支持都更好（好吧，那是因为我不使用 python-mode.el）。

我首先从 python-mode.el 中遗漏了一些东西，但它们很快在 python.el 中得到了修复（当然，这可能意味着我没有在 python-mode.el 中使用这么多的功能）。

> shell 缓冲区中的完成、源文件缓冲区中的完成、自动缩进、重新缩进等呢？

*   在 shell 缓冲区中完成：它在 python.el 和 python-mode.el 中都有效。但有时如果 Emacs 版本和 python(-mode).el 版本的组合不好，它就不起作用。所以可能 python.el 以这种方式更安全。但是，如果您想要更好的解决方案，请使用[EIN](https://github.com/tkf/emacs-ipython-notebook) :)

*   在源文件缓冲区中完成：只需使用[Jedi.el](https://github.com/tkf/emacs-jedi) :)

*   autoindent/reindent：我不知道哪一个在性能方面更好。但是，用于返回的键绑定彼此不同。在 python-mode.el 中，如果你输入 RET 你会得到自动缩进。在 python.el 中，RET 不给你缩进，你应该使用 Cj 代替。实际上，换行+缩进的 Cj 是 Emacs 中的通用行为。因此，如果您使用其他语言进行编程，python.el 会更好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T10:01:09.183

去年大量参与开发 python-mode.el，我的评论可能有偏见：建议 Emacs 初学者继续使用 python.el。它的作者也因为一些有用的方法而值得称赞。

python-mode.el 旨在提高编辑效率。它使通过 python2 和 python3 或 IPython shell 并行运行或执行变得容易。

它减少了提供定制命令所需的击键次数。它使编辑更快，通过语音、宏驱动输入等辅助编程。

目前支持 python.el 中未知的 Python 语言功能：

py-up, py-down - 移动嵌套块

避免在获取表单时出现拼写错误，例如一个子句：

```
py-backward-clause
py-copy-clause
py-down-clause 
```

...

测试不同版本时无需自定义：

```
py-execute-clause-python2
py-execute-clause-python3
py-execute-clause-ipython 
```

...

*   更细粒度部分的概念 - `py-expression`,`py-minor-expression`
*   运行版本化和并行化 (I)Python 可执行文件的命令，无需重新定义默认 Python
*   很大程度上消除了对之前标记的活动区域的需求，请参阅`py-execute-line`以及更多

要获得概览，请查看菜单。目录“doc”列出命令。

随着代码质量的提高：比较两种模式的一种方法可能是检查[http://debbugs.gnu.org/](http://debbugs.gnu.org/)中列出的错误。参见例如错误 #15510、#16875；或[http://lists.gnu.org/archive/html/help-gnu-emacs/2014-04/msg00250.html](http://lists.gnu.org/archive/html/help-gnu-emacs/2014-04/msg00250.html)

已经评论了“提交的粗略粒度”：虽然 tkf 基本上是在寻找更小的部分，但有时条件让我离开了规则。相当多的部分不是手工编写的，而是由位于“devel”目录中的程序编写的。他们创建了在开发分支中使用的文件——即 components-python-mode。当开始一个新功能时，如果选择的路径是富有成效的，通常并不明显。经过一百次左右的可能提交后，它仍然可能变得不可能或不那么值得推荐。不是发布所有的曲折，而是在这些情况下将该实验分支保留几天，并在测试通过时签入。

顺便说一句，假设 tkf 不是指编译错误——它会立即被查找——而是编译器警告。不幸的是，Emacs 将有关支持样式偏好的警告与实际错误混合在一起。

# html - WWW::Mechanize::Firefox 如何提取 HTML 元素标签中的文本？

> ID：15670506
> 
> 赞同：1
> 
> 时间：2013-03-27T22:11:09.210
> 
> 标签：html, perl, web-scraping, www-mechanize, www-mechanize-firefox

再会，

如何用 打印`HTML`标签的文本`WWW::Mechanize::Firefox`？

我试过了：

```
 print $_->text, '/n' for $mech->selector('td.dataCell');

    print $_->text(), '/n' for $mech->selector('td.dataCell');

    print $_->{text}, '/n' for $mech->selector('td.dataCell');

    print $_->content, '/n' for $mech->selector('td.dataCell'); 
```

请记住，我不想要`{innerhtml}`，但这确实有效。

```
print $_->{text}, '/n' for $mech->selector('td.dataCell'); 
```

上面的行确实有效，但输出只是多个`/n`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-14T18:05:23.293

```
my $node = $mech->xpath('//td[@class="dataCell"]/text()');

print $node->{nodeValue}; 
```

请注意，如果您要检索散布在其他标签中的文本，例如本例中的“Test_1”和“Test_3”...

```
<html>
  <body>
    <form name="input" action="demo_form_action.asp" method="get">
      <input name="testRadioButton" value="test 1" type="radio">Test_1<br>
      <input name="testRadioButton" value="test 3" type="radio">Test_3<br>
      <input value="Submit" type="submit">
    </form>
  </body>
</html> 
```

您需要通过它们在标签中的位置来引用它们（考虑任何换行符）：

```
$node = $self->{mech}->xpath("//form/text()[2]", single=>1);

print $node->{nodeValue}; 
```

打印“Test_1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:16:05.967

我会做 ：

```
print $mech->xpath('//td[@class="dataCell"]/text()'); 
```

使用[xpath](/questions/tagged/xpath "显示标记为“xpath”的问题")表达式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:28:05.433

我唯一的解决方案是使用：

```
my $element = $mech->selector('td.dataCell');

my $string = $element->{innerHTML}; 
```

然后在每个中格式化html`dataCell`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-12T03:55:48.390

任何一个：

`$element->{textContent};`

或者

`$element->{innerText};`

将工作。

# celery - 在给定时间点执行的 celery 任务数

> ID：15670507
> 
> 赞同：0
> 
> 时间：2013-03-27T22:11:12.883
> 
> 标签：celery, django-celery, celery-task, celeryd, djcelery

我正在尝试动态地异步创建一堆芹菜任务。假设我异步启动了 1000 个任务，而我只有一个 celeryd 进程正在运行来执行任务。celery 会创建多少个线程来处理这些任务？

如果 celery 自动启动多个线程来处理任务队列，我如何限制 celery 在给定时间点仅执行 100 个线程。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:27:49.290

它的启动次数与您使用`CELERYD_OPTS` [并发](http://docs.celeryproject.org/en/latest/tutorials/daemonizing.html#example-configuration)参数指定的一样多。这也在[这里](http://docs.celeryproject.org/en/latest/userguide/workers.html#concurrency)讨论。

# ruby-on-rails - 在 Rails 中使用全局变量与实例变量

> ID：15670511
> 
> 赞同：1
> 
> 时间：2013-03-27T22:11:36.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个 rails 应用程序，我在其中根据日期范围显示一些结果。我正在使用一些全局变量来设置日期。我的代码如下所示：

```
#index.html.erb 

  <td>From: <%= $from %></td>
  <td>To: <%= $to - 1.day%></td>

#controller

if (params[:first] || params[:next] || params[:previous])
    if params[:first]
        $from = Date.today - 7.day
        $to = Date.today + 1.day
    end

    if params[:next]
        $from = $from - 7.day
        $to = $to - 7.day
    end 

    if params[:previous]
        if $to != Date.today + 1.day
             $to = $to + 7.day
             $from = $from + 7.day
        end
    end 
end 
```

这段代码似乎工作正常，但是当我从多台机器访问应用程序时，它会变得一团糟，因为全局变量对于我猜的每个实例都不是唯一的。

所以我尝试使用@variable（实例变量）而不是全局变量。但是，每当我从视图提交页面时，所有变量都会重置为 NULL，并且这些值不会持续存在于控制器中。有人可以给我一些建议来解决这里的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:17:44.510

没有更多上下文，不清楚您的具体问题是什么。那说：

*每个请求*都会实例化控制器：实例变量显然会在请求之间重置。

也许是一个`before_filter`和/或一些实用方法来实例化这些`from`/`to`变量？

此外，每个参数语句的包装`if`似乎是多余的。真的有必要吗？

# c# - C# 编码转换为 UTF-8 - Windows 7 与 Windows Server 2008 R2 上的不同行为？

> ID：15670516
> 
> 赞同：2
> 
> 时间：2013-03-27T22:12:16.507
> 
> 标签：c#, windows-7, encoding, utf-8, windows-server-2008-r2

在将编码转换为 UTF-8 时，我在 Windows 平台之间遇到了一些奇怪的行为。如果我有一个带有“扩展 ASCII”字符的字符串，比如商标符号的字符 0x99，我可以在 Windows 7 上使用以下代码对其进行转换：

```
using System.Text;
...
string DefaultEncodedStr = <<Some string with Extended ASCII chars like 0x99 for TM>>
byte[] DefaultEncodedBytes = Encoding.Default.GetBytes(DefaultEncodedStr);
byte[] UTF8EncodedBytes = Encoding.Convert(Encoding.Default, Encoding.UTF8, DefaultEncodedBytes);
char[] UTF8Chars = new char[Encoding.UTF8.GetCharCount(UTF8EncodedBytes, 0, UTF8EncodedBytes.Length)];
UTF8.GetChars(UTF8EncodedBytes, 0, UTF8EncodedBytes.Length, UTF8Chars, 0);
string UTF8Str = new string(UTF8Chars); 
```

但是，此代码无法在 Windows Server 2008 R2 上转换初始字符串——“扩展 ASCII”字符仍存在于最终字符串中。

但是，此代码确实适用于 Windows Server 2008 R2：

```
using System.Text;
...
string DefaultEncodedStr = <<Some string with Extended ASCII chars like 0x99 for TM>>
byte[] DefaultEncodedBytes = Encoding.Default.GetBytes(DefaultEncodedStr)
string UTF8Str = Encoding.UTF8.GetString(DefaultEncodedBytes); 
```

但是，此代码无法在 Windows 7 上转换字符串！！

是什么赋予了？为什么我看到使用相同内核基础 (Win7) 的桌面类和服务器类操作系统之间的行为不同？我真的需要包含某种平台检测代码来确定如何正确处理编码转换吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:33:03.970

.NET 字符串是 Unicode 字符序列。如果你有一个字符串

```
string s = "™"; 
```

那么字符串由 Unicode U+2122 TRADE MARK SIGN 字符组成。

所以，等效地你可以写

```
string s = "\u2122"; 
```

您可以使用编码将此字符序列转换为字节序列。

一种编码是 UTF-8：

```
byte[] bytes = Encoding.UTF8.GetBytes(s);
// bytes == { 0xE2, 0x84, 0xA2 } 
```

另一种编码是 Windows-1252：

```
byte[] bytes = Encoding.GetEncoding("Windows-1252").GetBytes(s);
// bytes == { 0x99 } 
```

因此，如果您有一个表示 Windows-1252 中的字符串并由字节 0x99 组成的字节序列，则可以将其解码为字符串，如下所示：

```
string result = Encoding.GetEncoding("Windows-1252").GetString(bytes);
// result == "™" 
```

[Encoding.Default](http://msdn.microsoft.com/en-us/library/system.text.encoding.default.aspx)返回操作系统的默认编码。这可能是 Windows-1252，但不是必须的。始终指定要显式使用的编码。

> 不同的计算机可以使用不同的编码作为默认编码，甚至可以在单台计算机上更改默认编码。因此，从一台计算机流式传输到另一台计算机或什至在同一台计算机上的不同时间检索的数据可能会被错误地翻译。

*也可以看看：*

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

# javascript - 如何不发送输入字段 ?

> ID：15670521
> 
> 赞同：11
> 
> 时间：2013-03-27T22:12:40.420
> 
> 标签：javascript, jquery, html, forms

关于我的[最后一个问题](https://stackoverflow.com/questions/15660686/after-resizing-image-using-javascript-how-to-upload-via-php-using-post)。我有一个上传字段，用户可以在其中选择一张图片，它会调整大小（通过 JavaScript 客户端），base64 编码（JavaScript 也是）并通过隐藏字段发送。我这样做是为了节省用户的带宽（例如使用 3G 连接）。

但我不知道如何不在标签`<input type="file" name="file" id="file" class="span4">`内发送用户上传文件。`<form>`显而易见的解决方案是从表单中排除文件上传字段，但这会破坏我的布局。这可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-11-24T08:43:57.600

只需删除`name="file"`属性。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T22:18:26.207

您可以使用 jQuery 执行以下操作来禁用您的输入字段：

```
$('#file').prop('disabled', true); 
```

总而言之，你可能有这个：

```
// domReady handler
$(function() {

    // provide an event for when the form is submitted
    $('#myform').submit(function() {

        // Find the input with id "file" in the context of
        // the form (hence the second "this" parameter) and
        // set it to be disabled
        $('#file', this).prop('disabled', true);

        // return true to allow the form to submit
        return true;
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T22:14:52.010

如果您可以将属性“禁用”添加到输入，它将不会与表单一起提交：

```
<input type="file" name="file" id="file" class="span4" disabled="disabled"> 
```

您可以在 js 脚本中设置此属性...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T12:31:29.967

我需要表单和输入有一个**名称标签**，所以我要做的就是在我的表单上设置一个**方法标签。**这样，我的输入可以启用并具有标签名称。

```
<form name="form" method="post"> 
```

# haskell - 是否可以安装多个 ghc 并更改每个安装的二进制名称？

> ID：15670522
> 
> 赞同：8
> 
> 时间：2013-03-27T22:12:44.870
> 
> 标签：haskell

假设我想使用不同版本的 GHC，每个版本都有不同的二进制名称。

问题 1\. 我可以为每个安装使用 ./configure --prefix=ghc-some-version-dir 并创建符号链接`ghc-7.4.1`，没有问题吗`ghc-7.6.2`？`ghc-head`

也就是说，在从源代码安装和创建二进制文件之后。构建项目及其依赖项仍然需要使用虚拟环境。

问题 2\. 是什么阻止我们将 ghc 上传到 Hackage，其包名`ghc-version`的二进制名称取决于其版本？例如，可以在 ~/.cabal/bin 中`cabal install ghc-version-7.6.2`获取二进制文件`ghc-7.6.2`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T23:31:06.343

你不需要做任何特别的事情。GHC 已经安装了所有带有版本化名称的可执行文件，以及从非版本化名称到最近安装版本的链接，例如从“ghc”到“ghc-7.6.1”的链接或您上次安装的任何内容。当您从存储库构建时，版本号很长，并且包括您构建它的日期。

我不确定为什么 GHC 不在 Hackage 上，但我认为这是因为构建系统非常复杂，并且对它进行阴谋化（和维护阴谋化）会比它的价值更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T23:34:14.683

有几种解决方案

*   只需使用 chroot
*   使用处理同一库/软件的多个版本的包管理器，例如[nix](http://www.nixos.org)
*   已经编写了一些脚本来处理这个问题，例如[https://github.com/spl/multi-ghc](https://github.com/spl/multi-ghc)
*   [按照Brent Yorgey 博客文章](http://byorgey.wordpress.com/about/)中的描述使用 gnu stow 。
*   Ben Millwood 有一个解决方案，他只使用`-w`标志，阅读他的评论： https: [//plus.google.com/u/0/100165496075034135269/posts/VU9FupRvRbU](https://plus.google.com/u/0/100165496075034135269/posts/VU9FupRvRbU)

# click - 在 inno 设置中捕获 wpFinished（非自定义）中的单选按钮状态

> ID：15670523
> 
> 赞同：0
> 
> 时间：2013-03-27T22:12:47.720
> 
> 标签：click, radio, capture

我正在使用我可以下载的最新版本的 Inno Setup V5。我开发了一个非常可靠的安装脚本。我已将 alwaysreboot 设置为 true，但如果用户选择稍后重新启动，我需要向用户显示一个消息框。如何捕获单选按钮状态。我没有时间完全替换这个 wpFinished 页面，我需要快速完成，所以如果这是唯一的方法，那么我会稍后再做，即使他正在重新启动也会发出警告。谢谢您的帮助。

斯科特贝克斯特德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:45:53.013

我认为最好是在用户单击完成时检查 wpFinished 页面上单选按钮的状态：

```
function NextButtonClick(CurPageID: Integer): Boolean;
begin
  if(CurPageID = wpFinished) then
  begin
    // User clicked Finish on Finish page, check state of radio buttons
    if(WizardForm.NoRadio.Checked = True) then
      MsgBox('User selected Reboot Later.', mbInformation, MB_OK);
  end;

  Result := True; // Move to next page
end; 
```

（未经测试，这是我从头开始写的）

如果您想立即对用户操作做出反应，您需要使用 OnClick 事件 (TNotifyEvent)：

编写您的处理程序：

```
procedure ClickEvent(Sender : TObject);
begin
  // Do something here...
end; 
```

分配 Click 事件（在 InitializeWizard() 或任何其他过程中）：

```
WizardForm.YesRadio.OnClick := @ClickEvent; 
or
WizardForm.NoRadio.OnClick := @ClickEvent; 
```

# android - 如何在android上以编程方式将音量调到最大？

> ID：15670524
> 
> 赞同：33
> 
> 时间：2013-03-27T22:12:48.510
> 
> 标签：android, volume, android-music-player

我正在为 android 编写一个应用程序，它可以调高音量并播放一首歌曲 45 秒然后停止。效果很好，但是我只能将音量调到 50%，有没有办法使用 setVolume() 将音量调到 100%？

这是我的代码：

```
final MediaPlayer mp = MediaPlayer.create(context, R.raw.sound_file_1);

//plays eye of the tiger for 45 seconds
if (messages.contains("MUSIC ONLY")){

    //turn up the volume
    mp.setVolume(20, 20);
    mp.start();

    //play ring tone for 45 seconds
    new Timer().schedule(new TimerTask() {
        @Override
        public void run() {
            mp.stop();
        }
    }, 45000);
} 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-27T22:15:19.853

您可以使用以下代码片段，使用[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)：

```
AudioManager am = 
    (AudioManager) getSystemService(Context.AUDIO_SERVICE);

am.setStreamVolume(
    AudioManager.STREAM_MUSIC,
    am.getStreamMaxVolume(AudioManager.STREAM_MUSIC),
    0); 
```

`getStreamMaxVolume()`这会将音量设置为`STREAM_MUSIC`（例如播放的歌曲）的最大音量 ( )。对于其他类型的声音，使用不同的值，例如`STREAM_RING`等。

# python - 如何使用 csr_matrix 初始化 gensim 语料库变量？

> ID：15670525
> 
> 赞同：7
> 
> 时间：2013-03-27T22:12:52.193
> 
> 标签：python, scikit-learn, document-classification, lda, gensim

我有 X 作为我使用 scikit 的 tfidf 矢量化器获得的 csr_matrix，而 y 是一个数组

我的计划是使用 LDA 创建功能，但是，我找不到如何使用 X 作为 csr_matrix 来初始化 gensim 的语料库变量。换句话说，我不想下载 gensim 文档中显示的语料库，也不想将 X 转换为密集矩阵，因为它会消耗大量内存并且计算机可能会挂起。

简而言之，我的问题如下，

1.  鉴于我有一个代表整个语料库的 csr_matrix （稀疏），你如何初始化一个 gensim 语料库？
2.  如何使用 LDA 提取特征？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T23:27:52.110

Gensim 有一个半隐藏的功能，可以为你做这件事：

[http://radimrehurek.com/gensim/matutils.html#gensim.matutils.Sparse2Corpus](http://radimrehurek.com/gensim/matutils.html#gensim.matutils.Sparse2Corpus)

“class gensim.matutils.Sparse2Corpus(sparse, documents_columns=True) 将 scipy.sparse 格式的矩阵转换为流式 gensim 语料库。”

我使用 CountVectorizer 提取的语料库取得了一些成功，然后将其加载到 gensim 中。

# wordpress - 检查小部件是否分配给特定的小部件区域？

> ID：15670528
> 
> 赞同：2
> 
> 时间：2013-03-27T22:13:04.140
> 
> 标签：wordpress

我已经注册了两个侧边栏（小部件区域），“大”和“小”。

我创建了一个显示页面标题、缩略图和摘录的小部件。

如果小部件分配给侧边栏“大”，我希望小部件显示一个大缩略图，如果它分配给侧边栏“小”，我希望它显示一个小缩略图。

例如

```
If (widget_assigned() == 'big-sidebar') {
    echo get_the_post_thumbnail($post->ID, 'big-thumbnail')
}
else {
    echo get_the_post_thumbnail($post->ID, 'small-thumbnail')
}; 
```

是否有像`widget_assigned()`我可以用来实现此目的的 Wordpress 标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:49:38.430

我通过修改“Widget Context”插件解决了类似的问题。

# javascript - 相互连接的曲线

> ID：15670533
> 
> 赞同：5
> 
> 时间：2013-03-27T22:13:30.497
> 
> 标签：javascript, algorithm, drawing

给定一系列 JSON 坐标，通常采用以下格式：

```
{from: {x:0, y:0}, to: {x:0, y:10}, ...} 
```

我想绘制一系列直的虚线路径，这些路径与简单的、固定半径的圆角相连。我一直在查看 Slope Intercept Form 来计算沿直线的点，但我对沿（Bezier？）曲线计算点的方法有点困惑。

例如，我想在 p1 和 p2 以及 p3 和 p4 之间绘制曲线。尽管糟糕的模型可能暗示我很高兴角落是固定半径，例如 10px

![小路](../Images/32a3c241accf8fc256a50b73767a7ea0.png)

我想抽象出绘图逻辑，因此正在寻找一种通用的方法来返回一个 JavaScript 点数组，然后我可以通过多种方式渲染该数组（因此我避免使用 SVG、Canvas 等提供的任何内置函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:50:14.533

你想要的是三次贝塞尔曲线。

[http://www.blackpawn.com/texts/splines/](http://www.blackpawn.com/texts/splines/)

查看此页面上的第一个小程序。如果 A 是 p1，D 是 p2，方向 AB 是线 1 的角度，方向 CD 是线 2 的角度，您可以看到这如何为您提供所需的属性 - 它从角度 1 开始，以角度 2 结束，并与点。

因此，要获得您的点 C 和 D，一种方法是获取线段 1，复制它，将其从 p1 开始放置 - 并说新线的结束位置是 B，与线段 2 类似，并且p2 for D.（你可以做一些事情，比如有一个因子乘以复制的线段的距离，以使曲线或多或少地伸出......等等）

然后做数学:)

[http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B.C3.A9zier_curves](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B.C3.A9zier_curves)

一旦你有了曲线方程，以所需精度的 delta t 逐步通过它（例如，每 t 的 0.1，每 0.01 ......）并将曲线上的每一对点作为线段吐出。

# excel - Excel VBA将图表轴设置为对数

> ID：15670538
> 
> 赞同：2
> 
> 时间：2013-03-27T22:13:49.160
> 
> 标签：excel, charts, scale, vba

## 问题

我正在尝试用线性和对数刻度的数据以编程方式填充图表。出于某种原因，Axis.ScaleType 属性出错了。

## 尝试修复

我尝试将图表类型强制为 xyScatter。枚举`xlLinear = xlScaleLinear`和`xlLogarithmic = xlScaleLogarithmic`. 放置`Axis.ScaleType = xlScaleLogarithmic`有效果，但在 时失败`SeriesCollection.Count = 0`。

有什么建议么？一些谷歌搜索表明这是一个相对常见的问题。

```
Option Explicit
Private Type xySeries
    Name As String
    X As Range
    Y As Range
    Markers As XlMarkerStyle
    Axis As XlAxisGroup
    Color As XlColorIndex
    Weight As Single
End Type

Private Type xyAxis
    NumberFormat As String
    ScaleType As XlScaleType
    Minimum As Double
    Maximum As Double
End Type

'Pass this function the chartsheet name, and and array of data for the series of custom xySeries type
Private Sub ChartData(sCSName As String, asPlots() As xySeries, XAxis As xyAxis, YAxis() As xyAxis)
    Dim cs As Chart, oSeries As Series, iPlot As Integer
    Dim sPlot As String, sAlias As String, iAlias As Integer
    'Dim rgTime As Range, rgValues As Range

    Set cs = ThisWorkbook.Charts(sCSName)

    For Each oSeries In cs.SeriesCollection
        oSeries.Delete
    Next

    cs.PlotVisibleOnly = False
    cs.ChartType = xlXYScatterLines

    With ThisWorkbook.Sheets("LimeData")

        For iPlot = 1 To UBound(asPlots, 1)

            cs.SeriesCollection.NewSeries
            cs.SeriesCollection(iPlot).ChartType = xlXYScatterLines
            cs.SeriesCollection(iPlot).Name = asPlots(iPlot).Name
            cs.SeriesCollection(iPlot).XValues = asPlots(iPlot).X
            cs.SeriesCollection(iPlot).values = asPlots(iPlot).Y
            cs.SeriesCollection(iPlot).MarkerStyle = asPlots(iPlot).Markers
            cs.SeriesCollection(iPlot).AxisGroup = asPlots(iPlot).Axis
            cs.SeriesCollection(iPlot).Format.Line.Weight = asPlots(iPlot).Weight

        Next iPlot

    End With

    With cs
        With .Axes(xlCategory)
            .MinimumScale = RangeNominalExtreme(asPlots(1).X, 0)
            .MaximumScale = RangeNominalExtreme(asPlots(1).X, 1)
            .TickLabels.NumberFormat = XAxis.NumberFormat

'Error occurs on the next line
            .ScaleType = XAxis.ScaleType 
'Run-Time Error '-2147467259' (80004002):
'Method 'ScaleType' of 'Axis' failed

        End With
        .Axes(xlValue, xlPrimary).ScaleType = YAxis(1).ScaleType
        .Axes(xlValue, xlSecondary).ScaleType = YAxis(2).ScaleType
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T17:32:54.860

查看：

```
SetElement(msoElementPrimaryCategoryAxisLogScale) 
```

[http://msdn.microsoft.com/en-us/library/office/ff864118.aspx](http://msdn.microsoft.com/en-us/library/office/ff864118.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T02:49:07.373

问题很可能是由于存在辅助 Y 轴（从您的线猜测`.Axes(xlValue, xlSecondary).ScaleType = YAxis(2).ScaleType`）。如果你能放过它，你可能会继续前进。

阅读 `.ScaleType` 时，请参阅[Excel VBA 图表轴错误：“对象 'Axis' 的方法 'ScaleType' 失败”](https://stackoverflow.com/q/27140463/2707864)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:02:24.223

我在`ScaleType`属性帮助中看到的是它“仅适用于值轴。”。但是您将轴设置为`xlCategory`而不是`xlValue`. 如果没有您拥有的数据，我无法检查它，但这可能是您问题的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:28:29.887

当 时`.SeriesCollection.Count = 0`，唯一的图表元素是图表区域。没有情节区域，没有系列，没有轴，什么都没有。因此，在图表中有数据之前，您不能将轴格式应用于轴。

# asp.net-mvc - ASP.NET Web Api：使用内存托管进行身份验证以进行集成测试

> ID：15670539
> 
> 赞同：3
> 
> 时间：2013-03-27T22:13:53.520
> 
> 标签：asp.net-mvc, asp.net-web-api, asp.net-authentication

我正在尝试使用内存托管来集成测试我们的 web api 项目，但是在使用它时遇到了身份验证问题。我使用默认的 Web Api 模板和它创建的值控制器在一个基本的 Web Api 项目上重新创建了它。

我们正在使用 Autofac，因此也将其包含在测试中。我们还为 web api 使用 windows 身份验证，但出于测试的目的，这并不重要。

问题是测试中的“服务器”总是返回“此请求的授权已被拒绝”。

那么使用内存服务器进行授权的最佳方式是什么？我已经从另一个 stackoverflow 问题中注释掉了一些代码，但这似乎也不起作用。

```
using System;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Web.Http;
using Autofac;
using Autofac.Integration.WebApi;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using WebApiTesting.Controllers;

namespace WebApiTesting.Tests.Controllers
{
    [TestClass]
    public class ValuesControllerTest
    {
        private const string URL = "http://test.testing.com/";
        private const string Username = "user";
        private const string Password = "supersecret";

        [TestMethod]
        public void InMemoryHosting()
        {
            var config = new HttpConfiguration();
            config.Routes.MapHttpRoute(name: "DefaultApi",
                                       routeTemplate: "api/{controller}/{id}",
                                       defaults: new {id = RouteParameter.Optional});
            config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;

            var server = new HttpServer(config);
            var builder = new ContainerBuilder();
            // Register API controllers using assembly scanning.
            builder.RegisterApiControllers(typeof(ValuesController).Assembly);
            var container = builder.Build();
            server.Configuration.DependencyResolver = new AutofacWebApiDependencyResolver(container);

            var client = new HttpClient(server);
            using (var request = CreateRequest("api/values", "application/json", HttpMethod.Get))
            {
                //Act
                using (HttpResponseMessage response = client.SendAsync(request).Result)
                {
                    // Assert
                    Assert.IsNotNull(response.Content);
                    Assert.AreEqual("application/json", response.Content.Headers.ContentType.MediaType);
                    var content = response.Content.ReadAsStringAsync().Result;
                    Assert.AreNotEqual("{\"Message\":\"Authorization has been denied for this request.\"}", content);
                }
            }
        }

        private HttpRequestMessage CreateRequest(string url, string mthv, HttpMethod method)
        {
            var request = new HttpRequestMessage { RequestUri = new Uri(URL + url) };
            /*byte[] toEncodeAsBytes = Encoding.UTF8.GetBytes(string.Format("{0}:{1}", Username, Password));
            request.Headers.Authorization = new AuthenticationHeaderValue("Basic", Convert.ToBase64String(toEncodeAsBytes));*/
            request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mthv));
            request.Method = method;
            return request;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T01:37:59.233

只是为了记录最终的工作原理，我在我的 CreateRequest 方法中添加了以下行

```
Thread.CurrentPrincipal = new ClientRolePrincipal(new HttpListenerBasicIdentity(Username, Password)); 
```

我不确定这是否是处理它的最佳方法，但至少它确实有效。

# php - PHP 将行分隔成变量

> ID：15670542
> 
> 赞同：0
> 
> 时间：2013-03-27T22:14:01.290
> 
> 标签：php, preg-match

我有很多这样的文字：

```
(item (Index Value) (Name Value)(Name2 Value2)(Name3 Value3) (Speciality (Name-a value-a)  (Name-b value-b)) 
```

真实例子：

```
(item(name 256)(Index 1)(Image "Wea001")(Action 1 1)(class weapon sword)(code 1 1 1 1)(country 2)(level 1)(wear 1)   (limit Knight 1)(range 16)(buy 4)(sell 1)(endurance 4)(specialty(aspeed 700)(Attack 3 10)(hit 15))) 
```

现在我想将它们保存在数组 $Items[$Index] 中 -*索引值是行中的 (Index XX)* -

并且在每个值中，新数组都包含其中的值，例如（使用实线）

```
$Items[1]{
$Name => 256,
$Image => 'Wea001',
$Action=> '1 1',
$class => 'weapon sword',
...etc
} 
```

我已经使用爆炸将它们保存在主数组中，但使用默认值 0,1,2,3,..etc 而不是行的索引

```
$items = explode('<br />', $inititemcontent);
for($i = 0; $i < count($items); $i++){
    echo "$items[$i] <br />";
} 
```

PS：索引值永远不会重复，永远不可能有2行具有相同的索引 PPS：通常不会所有的小标签（名称值）都存在，有时全部存在，有时只有一些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:46:44.190

像这样的东西会起作用吗？由于该示例只有一行，因此我没有太多工作要做。

```
<?php
    $string = '(item(name 256)(Index 1)(Image "Wea001")(Action 1 1)(class weapon sword)(code 1 1 1 1)(country 2)(level 1)(wear 1)   (limit Knight 1)(range 16)(buy 4)(sell 1)(endurance 4)(specialty(aspeed 700)(Attack 3 10)(hit 15)))';

    preg_match_all('!\([^()]+\)!s',$string,$parts);

    $items = array();

    foreach($parts as $index=>$temp_array){
        foreach($parts[$index] as $key=>$component){
            $component = preg_replace('![()]!','',$component);
            preg_match_all('!([^ ]+) ([^)]+)!',$component,$component_parts);

            $temp_key = $component_parts[1][0];
            $temp_val = $component_parts[2][0];
            $items[$index][$temp_key]=$temp_val;
        }
    }

    print_r($items);

?> 
```

输出如下所示：

```
Array
(
[0] => Array
    (
        [name] => 256
        [Index] => 1
        [Image] => "Wea001"
        [Action] => 1 1
        [class] => weapon sword
        [code] => 1 1 1 1
        [country] => 2
        [level] => 1
        [wear] => 1
        [limit] => Knight 1
        [range] => 16
        [buy] => 4
        [sell] => 1
        [endurance] => 4
        [aspeed] => 700
        [Attack] => 3 10
        [hit] => 15
    )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:40:36.117

在我写了第一个答案之后，我注意到原始文件的格式类似于 JSON，所以我写了这个：

```
 <?php
    $string = '(item(name 256)(Index 1)(Image "Wea001")(Action 1 1)(class weapon sword)(code 1 1 1 1)(country 2)(level 1)(wear 1)   (limit Knight 1)(range 16)(buy 4)(sell 1)(endurance 4)(specialty(aspeed 700)(Attack 3 10)(hit 15)))';

    $patterns = array(
    '!\(!',
    '!\)!',
    '!\{([^\{}]+)\{!',
    '!\},\},\}!',
    '!\},([^}])!',
    '!\{([^ ]+) ([^}]+)\}!',
    '!"!',
    "!'!",
    "!\}(,)?!",
    "!\},$!",
    );
    $replacements = array(
    "{",
    "},",
    "{\"$1':[\n{'",
    "}]}]}",
    "},\n$1",
    "{'$1':'$2'}",
    '',
    '"',
    "}$1\n",
    "}"
    );

    $string = preg_replace($patterns,$replacements,$string);
    //print $string;
    $items = json_decode($string,true);

    print_r($items);

    ?> 
```

输出源如下所示：

```
Array
    (
        [item] => Array
            (
                [0] => Array
                    (
                        [name] => 256
                    )

                [1] => Array
                    (
                        [Index] => 1
                    )

                [2] => Array
                    (
                        [Image] => Wea001
                    )

                [3] => Array
                    (
                        [Action] => 1 1
                    )

                [4] => Array
                    (
                        [class] => weapon sword
                    )

                [5] => Array
                    (
                        [code] => 1 1 1 1
                    )

                [6] => Array
                    (
                        [country] => 2
                    )

                [7] => Array
                    (
                        [level] => 1
                    )

                [8] => Array
                    (
                        [wear] => 1
                    )

                [9] => Array
                    (
                        [limit] => Knight 1
                    )

                [10] => Array
                    (
                        [range] => 16
                    )

                [11] => Array
                    (
                        [buy] => 4
                    )

                [12] => Array
                    (
                        [sell] => 1
                    )

                [13] => Array
                    (
                        [endurance] => 4
                    )

                [14] => Array
                    (
                        [specialty] => Array
                            (
                                [0] => Array
                                    (
                                        [aspeed] => 700
                                    )

                                [1] => Array
                                    (
                                        [Attack] => 3 10
                                    )

                                [2] => Array
                                    (
                                        [hit] => 15
                                    )

                            )

                    )

            )

    ) 
```

# jquery - Flexslider 在最后一张幻灯片的右侧添加了额外的空间……

> ID：15670543
> 
> 赞同：2
> 
> 时间：2013-03-27T22:14:04.043
> 
> 标签：jquery, flexslider

我遇到了 Flexslider 在最后一张幻灯片后添加额外空白的问题。

我创建了一个 702 像素宽的 div，旨在一次显示两张 342 像素宽的幻灯片，每张幻灯片之间有 18 像素。我已将“itemWidth”设置为“360px”以允许额外的空间，并将“itemMargin”设置为“0”。

```
<script type="text/javascript" charset="utf-8">
    $(window).load(function() {
      $('.flexslider').flexslider({
        animation: "slide",
        animationLoop: true,
        itemWidth: 360,
        itemMargin: 0
      });
    });
</script> 
```

这为我提供了幻灯片之间所需的适当间距，但在最后增加了一个额外的 18 像素，这是我终生无法摆脱的。更烦人的是，当它应该只需要三个时，它将它视为第四个滑动过渡。

这是屏幕截图：http: [//bit.ly/XHJVeU](http://bit.ly/XHJVeU)

注意底部的四个点。它应该只需要三个来显示四张幻灯片。

我已经调整了我能想到的每一点 CSS，但仍然没有运气。即使为图像添加填充/边距也无济于事。令人沮丧。

无论哪种方式。我希望有人以前遇到过这个问题，并且这是一个快速修复。

提前致谢。

更新：包含 HTML 以供参考。

```
<div id="carousel" class="flexslider">
<ul class="slides">
    <li><img src="images/suite-a_01.png" /></li>
    <li><img src="images/suite-a_02.png" /></li>
    <li><img src="images/suite-a_03.png" /></li>
    <li><img src="images/suite-a_04.png" /></li>
</ul>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T12:33:19.697

检查你的 flexslider 的实时输出并检查分页栏（它是一个带有类“flex-control-nav”和“flex-control-paging”的。）我刚刚遇到了同样的问题，我发现它有一个 css 宽度这超出了我的内容，因此在右侧添加了空白。

我希望这很清楚。让我知道我是否可以澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T03:41:16.537

对于遇到此问题的任何人，几年后...

只需确保*Flexslider*中的子元素没有填充或边距导致它们超出预期宽度即可。

这就是导致额外的假想幻灯片的原因，作为补偿。

```
.slide {
    margin: 0 !important;
    padding: 0 !important;
} 
```

# c++ - 链接 qt lib 错误

> ID：15670548
> 
> 赞同：0
> 
> 时间：2013-03-27T22:14:22.833
> 
> 标签：c++, windows, boost, visual-studio-2012, static-libraries

我有一个链接问题。我安装了 Visual Studio 2012，下载了 qt-sourcecode 并为 vc 2012 编译了它，它与 Visual Studio 插件一起工作得很好。然后我下载了Boost并编译了它。

在控制台应用程序上，Boost 一切正常，但如果我创建一个 qt 项目并想在那里使用 Boost (filesystem libary)，我会收到一个链接错误：

```
error LNK2019: Verweis auf nicht aufgelöstes externes Symbol ""void __cdecl boost::filesystem::path_traits::convert(char const *,char const * .......
error LNK2019: Verweis auf nicht aufgelöstes externes Symbol ""public: static class std::codecvt<unsigned short,char,int> const & __cdecl boost::filesystem::path::codecvt(void)......
fatal error LNK1120: 2 nicht aufgelöste Externe 
```

它在英语中的意思是“未解析的外部符号”。

我使用了相同的包含路径和库路径，但我几个小时都无法解决这个问题。即使我使用 mingw 选项编译 Boost

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:47:25.663

好的，我想我找到了解决方案，但效果并不好。

这有点不同，但它浪费了数小时的搜索时间。最后这个链接解决了这个问题：[链接到解决方案](https://stackoverflow.com/questions/6064147/qtboostvisual-studio-2008?rq=1)。这是第一条评论中的链接。我只需要在 Visual Studio 中进行更改：项目属性 -> c/c++ -> 语言 -> 将 wchar_t 视为内置类型：是的。然后程序将正确链接

# php - 返回 JSON MIME 类型的问题

> ID：15670549
> 
> 赞同：0
> 
> 时间：2013-03-27T22:14:28.000
> 
> 标签：php, ios, json, mamp, afnetworking

我有一个返回`JSON`数据的 php API，当我尝试`JSON`从我的应用程序接收数据时，出现以下错误：

```
"Expected content type {(\n    \"text/json\",\n    \"application/json\",\n    \"text/javascript\"\n)}, got text/html"; 
```

您可能会回答说 php API 没有返回有效的 JSON，好吧，我在 Json Lint 上检查了它，它是一个有效的 JSON，而且标头设置为`JSON`

```
 header( 'Content-Type: text/json' );
    echo '{"Response":'.json_encode($arr).'}'; 
```

我还检查了 MAMP`mime.types`文件，它正确地包含了 JSON mime 类型。

我唯一怀疑的是，当我通过浏览器调用 API 时，我得到了预期的 JSON，但是当显示页面的源代码时，它在开头显示为 2 个空行。如下所示。

```
1-   
2-
3-    {"Response":[{"Product ID":"12037","Product Title":"RIng 14K Cloud 9","Product Description":"RIng 14K Cloud 9","Product Wholsale Price":"$255","Product Sale Price":"$460","Category Id":"55","Category Name":"Rings","Product Image":"http:\/\/192.163.1.87:8888\/xxxxxx\/wp-content\/uploads\/2012\/12\/150101.jpg","Product Sub Images":["http:\/\/192.163.1.87:8888\/xxxxx\/wp-content\/uploads\/2012\/12\/150101.jpg"],"SKU":"150101-50","Quantity":"1","Size":"50","Color":"Y","Manufacturer":"xxxxxx"},{"Product ID":"12039","Product Title":"Ring 14K Cloud 9","Product Description":"Ring 14K Cloud 9","Product Wholsale Price":"$255","Product Sale Price":"$460","Category Id":"55","Category Name":"Rings","Product Image":"http:\/\/192.163.1.87:8888\/xxxxx\/wp-content\/uploads\/2012\/12\/150101.jpg","Product Sub Images":["http:\/\/192.163.1.87:8888\/xxxxx\/wp-content\/uploads\/2012\/12\/150101.jpg"],"SKU":"150101-52","Quantity":"1","Size":"52","Color":"Y","Manufacturer":"xxxxxx"}]} 
```

这是否与 php 代码或 MAMP 服务器中的任何内容有关？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:20:49.113

您的输出开头有两个空行。一旦输出了某些内容，您就不能再使用该`header()`函数来更改任何标题。

在某些文件的 php 打开/关闭标签之前或之后，您可能会遇到一些空格问题。确保`<?php`每个文件上的标签是文件中的第一件事；检查文件编码；不要在 php 结束标记后留下尾随空格，甚至`?>`从文件末尾删除所有结束标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:34:35.057

另外，我相信 JSON 的正确标头类型是 application/json：

```
header('Content-Type: application/json'); 
```

如果使用 JSONP，它应该是 application/javascript：

```
header('Content-Type: application/javascript'); 
```

# math - 离散数学递归定义

> ID：15670552
> 
> 赞同：0
> 
> 时间：2013-03-27T22:14:37.477
> 
> 标签：math, recursion, definition

所以我们在课堂上解决了这个问题，对于 f(2)，我得到了相同的答案，但对于 f(3)，我得到了与教授不同的东西。

```
Basis: f(0) = -1 and f(1) = 2
Recursion: f(n) = f(n-2) - f(n-1)

For f(3) I am getting 1
f(3-2) - f(3-1)
=f(1) - f(2)
=2 - f(2-2) - f(2-1)
=2 - -1 - 2
=2+1-2 = 1 
```

但他得到的答案是：

```
5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:17:37.040

```
=2 - -1 - 2 
```

这应该是

```
= 2 - (-1-2) = 2 + 1 + 2 = 5 
```

# vba - 根据日期和其他条件突出显示单元格

> ID：15670553
> 
> 赞同：1
> 
> 时间：2013-03-27T22:14:39.267
> 
> 标签：vba, excel, conditional, highlight

我正在尝试根据某些条件在 VBA 中编写突出显示功能。我可以通过条件格式轻松地做到这一点，但我注意到如果用户剪切/粘贴（除了特殊的）/删除行/等。然后修改条件格式范围。我希望条件格式范围保持固定，而不是映射到实际单元格。如果有人知道如何做到这一点，或者保护条件格式但仍然允许数据操作，那么这段代码将是不必要的。

我发现了两种不同的代码，我一直在尝试，但由于我是 VBA 新手，所以我不太擅长它并遇到问题。我不知道如何使用 Isblank 或 Isempty 功能。

我需要用红色突出显示早于 30 天的日期（包括过去的日期）。我需要用黄色突出显示早于 60 天但超过 30 天的日期。没有数据的单元格和超过 60 天的单元格必须保持不突出显示。

任何帮助是极大的赞赏！

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim icolor As Integer

    If Not Intersect(Target, Range("C3:T65")) Is Nothing Then

        Select Case Target

            Case Is <= Date + 60

                icolor = 6

            Case Is <= Date + 30

                icolor = 3

            Case IsEmpty()

                icolor = 2

        End Select

        Target.Interior.ColorIndex = icolor

    End If

End Sub 
```

其他选项：

```
Sub Highlight()
    Dim cell As Range

    For Each cell In Range("C3:T65")
        If cell.Value <= Date + 60 And cell.Value > Date + 30 Then
            cell.Offset(0, 1).Interior.ColorIndex = 6

        ElseIf cell.Value <= Date + 30 Then
            cell.Offset(0, 1).Interior.ColorIndex = 3

        ElseIf cell.Value IsEmpty() Then
            cell.Offset(0, 1).Interior.ColorIndex = 2

        End If
    Next cell

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:19:06.930

使用 VBNullString 检查单元格是否为空：

```
ElseIf cell.Value = vbNullString Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:21:30.650

您的两个代码几乎都在那里。以下两者的组合应该可以完成这项工作：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim icolor As Integer
    Dim cell As Range

    If Intersect(Target, Range("C3:T65")) Is Nothing Then Exit Sub

    For Each cell In Target
        icolor = 0
        Select Case cell
            Case Is <= Date + 30: icolor = 3
            Case Is <= Date + 60: icolor = 6
            Case "": icolor = 2
        End Select
        If icolor <> 0 Then cell.Interior.ColorIndex = icolor
    Next cell
End Sub 
```

# ios - CoreAudio：Ausampler Unit 复音

> ID：15670554
> 
> 赞同：3
> 
> 时间：2013-03-27T22:14:42.757
> 
> 标签：ios, objective-c, core-audio, audiounit, coremidi

我目前正在尝试有效地使用 Ausampler Unit。我使用了苹果示例中的代码：[https ://developer.apple.com/library/ios/#samplecode/LoadPresetDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011214-Intro-DontLinkElementID_2](https://developer.apple.com/library/ios/#samplecode/LoadPresetDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011214-Intro-DontLinkElementID_2)

不利的一面似乎是，如果再次出现相同的音符，它会立即停止音符/采样。因此，如果我发送加载了长号预设的 midi note 60。然后在拿着这个的同时，我再次发送注释 60。它切断了第一个音符事件。有谁知道是否/如何可以保留每个音符，直到（该特定音符的）音符关闭事件出现？

其他问题：发送后如何更改笔记的音量？例如，我以 100 的力度发送了 60 和 70 的 midi 音符。虽然音符 60 仍在播放，但我想降低音量但保持音符 70 向上。这将被称为 midi 触后。

希望你能帮忙:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:13:26.030

AUSampler ( `kAudioUnitSubType_Sampler`) 是单音的（[参考](https://developer.apple.com/library/mac/#documentation/AudioUnit/Reference/AUComponentServicesReference/Reference/reference.html)和[此处](https://stackoverflow.com/a/12570002/840992)），因此为了同时演奏相同音高的两个音符，您将需要两个“乐器” - 即 AUSampler 的实例。在我的项目中，我发现这并没有增加太多的内存开销，因为声音资源是共享的。

至于触后 - 我还没有探索过，但看起来你想要的属性是`kAUGroupParameterID_KeyPressure_FirstKey`（参考[这里](http://developer.apple.com/library/ios/#documentation/AudioUnit/Reference/AudioUnitParametersReference/Reference/reference.html)，也许[这里](http://lists.apple.com/archives/coreaudio-api/2003/Jul/msg00393.html)）。

```
Supporting the kAUGroupParameterID_KeyPressure parameter indicates to 
hosts that your audio unit supports polyphonic "aftertouch" key pressure.

Each of the 128 MIDI key numbers can have its own value for polyphonic 
aftertouch. To respond to aftertouch for a particular key, your audio 
unit needs to support an additional parameter specifically for that key. 
The aftertouch parameter ID for a given MIDI key is equal to the MIDI
key number plus 256\. For example, the aftertouch parameter ID for MIDI 
key #60 (middle C) is:

60 + kAUGroupParameterID_KeyPressure_FirstKey = 316 
```

如果您进行后期处理，请回发一些示例代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-17T08:49:15.380

接受的答案是错误的。**音色**和**复音**是两个**不同**的东西。单声道音色意味着 MIDI 设备（在本例中为 AUSampler 实例）只能同时播放单个 INSTRUMENT/PATCH，这与它可以为该单个乐器同时播放的**音符**数量无关。另一方面，多音色设备可以同时播放多个乐器/补丁（midi 通道）。在 AUSampler 的 iOS 版本中，复音似乎被限制并硬编码为 2 个音符，而且似乎没有公共 api 可以改变这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-09T11:27:21.457

**我不认为 AUSampler 仅限于两个音符复音。**我只是在为我的项目做研究，这对我来说非常重要。

看看这个[钢琴键盘插件](http://www.binpress.com/app/piano-keyboard-for-ios/1282)，作者提到它是用**AUSampler**制作的，从视频中你可以看到它**很容易演奏四个音符和弦**。

# php - WHERE 语句在 Joomla 中不起作用！3.0.3。php请求

> ID：15670555
> 
> 赞同：2
> 
> 时间：2013-03-27T22:14:50.213
> 
> 标签：php, mysql, joomla

我正在尝试在 Joomla 3.0.3 的简单查询中添加 WHERE 语句。但代码仅在我使用 WHERE 语句注释该行时才有效。你有什么建议吗？非常感谢！

```
<?php

$query = $db->getQuery(true);

$query->select(array('Name','InstrumentFamily'));

$query->from('instrumenttype');

$query->where($db->nameQuote('InstrumentFamily').'='.$db->quote('debt'));

$db->setQuery($query);

$result = $db->loadAssocList();

print_r($result);

?> 
```

PS：请注意，我正在使用 Sourcerer 扩展在 Joomla 的后端键入此类语句！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T02:14:30.360

自从Joomla！1.6.x`nameQuote`在 Joomla! 中已贬值！3.x 它不再可用。您可以在这篇文章“ [Joomla 3.0 和 Joomla Platform 12.1 中潜在的向后兼容性问题](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1)”中找到更多信息

许多这些`JDatabase`（又名`JDatabaseDriver`）更改是为了启用除 MySQL 之外的更多支持数据库。

在 Joomla！3.x 您将需要使用替换`$db->quoteName()`表或列名以及`$db->quote`任何值。

因此，您的`where`元素变为：

```
$query->where($db->quoteName('InstrumentFamily').'='.$db->quote('debt')); 
```

# sql-server - 运行缓慢的 MDX 查询 - 运行总计

> ID：15670558
> 
> 赞同：1
> 
> 时间：2013-03-27T22:14:59.557
> 
> 标签：sql-server, reporting-services, ssas, mdx

我们正在尝试创建一个计算度量来计算另一个度量的运行总计。考虑到数据量并不大，我们怎样才能让这个查询更快呢？

```
 WITH MEMBER [Measures].[X] AS aggregate 
 (
  {Null:[Transaction Date].CurrentMember},
  [Measures].[Transaction Amount]
 )
SELECT
 non empty {
  [Measures].[X]
 } ON columns
 , 
 non empty {
  ([Claim].[Claim Number].children* 
  [Transaction Date].[Hierarchy].[Day].&[2013-02-28T00:00:00]
  )
 } 
 ON rows
 FROM [ClaimsCube] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T01:37:34.190

尝试删除“非空”

```
WITH MEMBER [Measures].[X] AS aggregate 

(
  {Null:[Transaction Date].CurrentMember},
  [Measures].[Transaction Amount]
 )
SELECT
 {
  [Measures].[X]
 } ON columns
 , 
 {
  ([Claim].[Claim Number].children* 
  [Transaction Date].[Hierarchy].[Day].&[2013-02-28T00:00:00])
 } 
 ON rows
 FROM [ClaimsCube] 
```

# python - 我可以使用 requirements.txt 文件来处理本地 python 目录吗？

> ID：15670559
> 
> 赞同：1
> 
> 时间：2013-03-27T22:15:10.953
> 
> 标签：python, python-2.7, pip

我有一个这样的目录结构：

```
src/
--scripts/
----foo/a.py
----bar/b.py
--lib1
--lib2
--lib3 
```

目的是让 scripts/foo/ 和 scripts/bar/ 成为使用 lib1、lib2、lib3 中的模块的可运行 python 脚本的目录。脚本、lib1、lib2 和 lib3 都是处于积极开发中的独立的内部 git 存储库。没有可依赖的静态接口或发布版本。基本上，它们几乎都是由一个小团队同时编写的。

我玩过制作 lib[1-3] 子模块，我真的很讨厌这个工作流程。我想我想要的是能够从 foo/a.py 执行“导入 lib1”并让它使用 lib1 中的当前代码。一旦事情成熟，我们可能会对所有内容进行版本化并努力生产适当的软件包。

做到这一点的一种方法是`sys.path`在每个脚本中明确地查看“../../”或其他内容。我想知道是否有更优雅的东西。我可以`pip install -r requirements.txt`为我做这项工作吗？我不想制作官方的pypi setup.py，我只想获取指向lib[1-3]目录当前内容的指针。我喜欢 requirements.txt 方法的原因是随着库的成熟，我最终会将版本和 git URL 放在那里。

或者，是否有完全不同的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:52:08.160

以通常的方式从 git 存储库安装模块*确实*需要`setup.py`.，但它可以是最低限度的，而不是像 PyPI 模块那样更完整的模块。例如：

```
#!/usr/bin/env python

from distutils.core import setup

setup(
    name="foo",
) 
```

如果您将类似的内容放入每个 lib 存储库中，那么您可以使用`-e git://git.example.com/foo.git#egg=foo`. 如果将它安装到 virtualenv 中，那么它将出现在`src/foo`virtualenv 目录中，并且在`sys.path`从该 virtualenv 运行 Python 时会自动添加到该目录中。

该`-e`选项还接受本地目录作为参数，因此如果您保证在安装时当前工作目录将始终是项目的根目录`requirements.txt`（以便正确解析相对路径），它应该可以很好地编写类似的内容`-e lib1`在那里，然后您仍然可以根据需要将库作为 git 子模块引用。

如果你决定*不*创建一个，`setup.py`那么你的任务就是模拟运行时会发生什么`python setup.py develop`。这个命令做了两件事（至少从 Python 2.7 开始）：

*   它会在您的 virtualenv（或系统范围，如果您没有 virtualenv）的lib 目录中创建一个指向目标源目录的[egg 链接。](http://svn.python.org/projects/sandbox/trunk/setuptools/doc/formats.txt)`site-packages`
*   它在目录中添加了一行`easy-install.pth`，该`site-packages`目录也指向您的目标源目录。

您可以选择通过运行以外的方式执行上述两个操作，`setup.py editable`并为当前版本的 Python 获得相同的效果，但当然，可编辑发行版的实现可能会在较新版本的 Python 中发生变化。

# android - 选项卡指示器大小图像

> ID：15670560
> 
> 赞同：1
> 
> 时间：2013-03-27T22:15:12.307
> 
> 标签：android, android-layout, tabs

我创建了一个 Android 选项卡栏，但在自定义选项卡指示器时遇到了一些麻烦。我想要的是我的指示器（选择器根据状态选择两个图像，图像仅与颜色不同，而不与大小不同）是选项卡的完整大小，而选项卡的其余部分不可见/消失/不是正方形和线条.

这是现在的样子（可怕）：

![在此处输入图像描述](../Images/9585ea7dca057a8c827375c022de094f.png)

我想要的是指标是全宽的并且在侧面连接（我没有创建所有不同的指标，这就是为什么它看起来不会很好地连接）。

所以我真正想要的是我有五个自定义标签，它们没有 android 标签栏的外观，但我确实想要功能。我知道我可以将这些按钮放在每个屏幕的底部，但这与标签栏的处理方式仍然不同。有人有想法吗？

这是我的标签主机：

```
public class MainTabHost  extends TabActivity {

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_tabhost);

            final TabHost tabHost = getTabHost(); 
            addTab(R.drawable.tab_chat, someActivity.class);
            addTab(R.drawable.tab_chat, someActivity.class);
            addTab(R.drawable.tab_chat, someActivity.class);
            addTab(R.drawable.tab_chat, someActivity.class);
            addTab(R.drawable.tab_chat, someActivity.class);

            tabHost.setCurrentTab(0);

        }

        private void addTab(int drawableId, Class<?> c) {
            TabHost tabHost = getTabHost();
            Intent intent = new Intent(this, c);
            TabHost.TabSpec spec = tabHost.newTabSpec("tab");

            spec.setIndicator("", getResources().getDrawable(drawableId));

            spec.setContent(intent);
            tabHost.addTab(spec);
        }

    } 
```

我知道 tabbar 现在已被弃用，但我有我的理由，它只是一个小型的短期项目。

# c++ - 优先队列错误

> ID：15670567
> 
> 赞同：0
> 
> 时间：2013-03-27T22:15:41.850
> 
> 标签：c++, stl, priority-queue

我遇到了麻烦，每当我尝试编译这个程序时，我都会在包含 q.pop 的包含函数中得到一个错误。如果该行被注释掉，它将编译得很好，但它仍然给出错误的值。由于某种原因，它总是错误的。

错误是：
`priority_queue_demo.cpp: In function 'int main()': priority_queue_demo.cpp:54:12: error: invalid conversion from 'int' to 'const char*' [-fpermissive] /usr/lib/gcc/x86_64-redhat-linux/4.6.1/../../../../include/c++/4.6.1/bits/basic_string.tcc:214:5: error: initializing argument 1 of 'std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' [-fpermissive] priority_queue_demo.cpp: In function 'bool contains(const std::priority_queue<T>&, T) [with T = int, typename std::vector<T, std::allocator<_Tp1> >::value_type = int]': priority_queue_demo.cpp:43:47: instantiated from here priority_queue_demo.cpp:27:3: error: passing 'const std::priority_queue<int>' as 'this' argument of 'void std::priority_queue<_Tp, _Sequence, _Compare>::pop() [with _Tp = int, _Sequence = std::vector<int, std::allocator<int> >, _Compare = std::less<int>]' discards qualifiers [-fpermissive]`

```
#include <iostream>
#include <string>
#include <sstream>

#include <queue>

using namespace std;

template <typename T>
ostream &operator <<(ostream &os, priority_queue<T> &q) {
        os << "{";
        while (!q.empty()) {
               os << q.top() << (!q.empty() ? ", " : "");
               q.pop();
        }

        os << "}";

        return os;
}

template <typename T>
bool contains(const priority_queue<T> &q, T val) {
        for (int i = 0; i < q.size(); i++) {
                if (q.top() == val) return true;
                q.pop();
        }

        return false;
}

int main() {
        cout << boolalpha;

        priority_queue<int> qi;

        for (int i = 0; i < 20; i++)
                qi.push(i);

        cout << qi << endl;

        cout << "qi contians 15: " << contains(qi, 15) << endl;
        cout << "qi contians 23: " << contains(qi, 23) << endl;

        const int ARR_SIZE = 4;
        string arr[ARR_SIZE] = {"cat", "dog", "cow", "elephant"};

        cout << endl;

        priority_queue<string> qs;

        for(int i = 0; i < ARR_SIZE; i++)
                qs.push(i);

        cout << qs << endl;

        while(!qs.empty()) {
                qs.pop();
                cout << qs << endl;
        }

        return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:21:12.597

问题是您正在传递`const`对队列的引用，但`pop()`显然不是一个`const`操作，因为它会改变队列。

您应该传递一个非常量引用：

```
bool contains(priority_queue<T>& q, T val) { .... } 
```

如您所见，如果不更改队列，就无法真正检查队列的内容。

下一个错误是您将整数推入队列`std::string`：

```
qi.push(i); 
```

你大概是说

```
qi.push(arr[i]); 
```

**请注意**，您的队列重载会清空队列，因此在打印队列后`ostream& operator<<`使用的任何尝试都将产生错误，无论队列的原始内容如何。`contains``std::cout`

[在此处](http://ideone.com/Cgfz6e)查看演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:29:03.293

您在代码中有几个问题：

```
priority_queue<string> qs;

    for(int i = 0; i < ARR_SIZE; i++)
            qs.push(i);  //<<<<Error, should be arr[i] 
```

`arr[i]`你真的不应该推，`i`因为`i`它期望的是整数`string.`

您将`priority_queue`by 引用传递给重载的`<<`运算符函数，该函数将删除 中的所有元素`priority_queue`，因此您的所有`contains`查询都将变为`false`.

您也可以`const priority_queue<T>&`在`contains`函数中使用，但是，`pop()`函数不是`const`，这会导致编译错误，正如 juanchopanza 所指出的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:35:42.723

我之前发表了评论，但您的代码还有其他问题不适合评论。

**1)** `qs`是 a`priority_queue<string>`但您将`int`s 推向它（在行中`qs.push(i)`）；我猜你想做的是 push `arr[i]`。因此，更换

```
qs.push(i); 
```

和

```
qs.push(arr[i]); 
```

**2)**模板函数`contains`采用`priority_queue<T>`by const 引用。这意味着您不能`const`在`q`. 特别是，您不能调用`q.pop()`，因为`pop()`它是一个非常量方法。（确实，这种方法有望改变队列。）因此，替换

```
template <typename T>
bool contains(const priority_queue<T> &q, T val) { 
```

和

```
template <typename T>
bool contains(priority_queue<T> &q, T val) { 
```

# c++ - 函数调用前的类型声明是什么意思

> ID：15670574
> 
> 赞同：0
> 
> 时间：2013-03-27T22:16:05.973
> 
> 标签：c++

我正在处理一个相当大的项目，我想出了一个我不明白的声明。它看起来像这样：

```
visitor::DFV< Outer > visitor( *this, this->graph(), this->store() ); 
```

我会给你更多的代码，但它真的很大，我不能真正告诉哪些部分与此相关。有趣的是，我什至找不到`visitor`在结构 DFV 或其前身中调用的任何函数，Eclipse 也没有。我很确定我没有理解这个正确的含义，并且我无法找到对此 c++ 语法的任何引用。谁能大致向我解释这样的陈述的含义？

```
Type<SomeClass> foo(x, y); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:18:05.277

不是函数调用，而是变量定义，`(...)`是构造函数参数列表。

会更清楚吗

```
typedef visitor::DFV< Outer > Type;

//...
Type visitor(*this, this->graph(), this->store()); 
```

或者

```
Type visitor(x, y, z); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:19:21.557

对于您的通用示例：

```
Type<SomeClass> foo(x, y); 
```

这是一个变量定义，其中`Type<SomeClass>`是变量的类型，`foo`是它的名称，其余的是传递给类的构造函数的参数。

类模板`Type`将有一些构造函数，可以在其定义中（通常在其头文件中）找到，如下所示：

```
template< typename T >
class Type
{
public:
    Type( int x, int y );
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:43:54.120

如果您不了解此语法，我认为您不会真正了解 C++。

```
visitor::DFV< Outer > visitor( *this, this->graph(), this->store() ); 
```

我会将其解释为一个函数，要么是类访问者中的静态函数，要么是名称空间访问者中的全局函数，这就是我可以用可用代码所说的全部内容。该`<Outer>`部分是函数的模板参数，例如，如果我做了这样的模板

```
template<class T> 
int someFunc<T>(T i, Tx)
{
    //whatever operations in the function
} 
```

然后，当我想调用该函数时，我就这样做

```
int i = someFunc<int>(2, 3);
//alternatively
int x = someFunc<std::string>("Hello", "World"); 
```

`*this`是指向调用函数的类的解除引用的指针，是调用该函数的类`this->graph()`中方法的返回值，与 graph 相同，但返回值为.`graph()``this->store()``store()`

第二位是实例化这样的模板类

```
template<class T>
class Type
{
public:
    Type(T x, T y);
}; 
```

# java - 获取字符串中特定单词之后的字符？

> ID：15670579
> 
> 赞同：0
> 
> 时间：2013-03-27T22:16:35.790
> 
> 标签：java, string

我有一串文本和一个需要在字符串中找到的特定单词。一旦我在字符串中找到下一次出现的单词，我需要以某种方式找到直接跟在该单词后面的字符。我尝试使用扫描仪，但它不包含 nextChar() 方法，而这种方法可以达到我想要做的目的。我还能尝试什么？这是我拥有的代码，但它没有做我想做的事情。

```
public void storeChar(String str)  //used to get the char after the seed and store it in the arraylist of chars
{
    Scanner sc = new Scanner(str);
    seed = wrdSd.getSeed();
    while(sc.hasNext())  //while there are words left to read
    {
        String next = sc.next();

        if(next.equals(seed))  //if the next word of the scanner = the seed
        {
            ch = sc.next().charAt(0);  //gets char at index 0 of the next word
            singleChar.add(ch); //adds the char to the char arraylist
        }   
    }
    sc.close();

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:18:45.470

使用[`String#indexOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)方法确定单词是否在字符串中。如果是，则使用返回的索引，添加单词的长度，然后使用该`charAt`方法将该结果作为字符串的索引。小心不要跑到字符串的末端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:22:01.710

尝试使用该类提供的`IndexOf`方法。`String`

```
int idx = str.IndexOf(seed);
return str.charAt(idx + seed.Length); 
```

这显然不会进行任何检查，因为您的字符串可能会在最后找到并且索引将超出范围。此外，如果字符串不匹配，`-1`将返回索引。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T22:20:59.413

如果您的文本是“Hello World”，并且您想查找“Hell”一词之后的内容，您可以使用正则表达式，例如：“Hell(.)”

然后第一个捕获组将是“o”，这就是您想要的。

如果您不了解 RE，请阅读以下内容： http: [//docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)

然后是捕获组： [http ://docs.oracle.com/javase/tutorial/essential/regex/groups.html](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)

# c++ - freeglut 中的 glutidlefunc() 有什么意义

> ID：15670580
> 
> 赞同：10
> 
> 时间：2013-03-27T22:16:40.760
> 
> 标签：c++, opengl, glew, freeglut

我知道 glutdisplayfunc() 如何使显示循环，并且我在某些地方读到您应该将游戏机制放在 glutidle 而不是显示中；为什么你不能把它们放在一个 while (gameisrunning) 循环中？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-27T22:34:50.900

在事件驱动编程中，就像在交互式 OpenGL 应用程序中一样，主应用程序循环通常会做三件事：

1.  检查当前事件队列，并处理自上次检查以来发生的任何事件（例如，鼠标移动、按键等）
2.  更新应用程序状态——比如玩家和对象位置、游戏物理等——为下一个渲染帧做准备
3.  渲染当前帧。

GLUT`glutMainLoop()`为您隐含地执行这些步骤。您注册的几乎所有 GLUT 回调（例如 、`glutKeyboardFunc()`等`glutReshapeFunc()`）都会处理 1.，并调用您设置为大概执行 2 的函数。

现在，如果您使用 注册一个空闲函数`glutIdleFunc()`，它会在处理完所有当前事件后调用。通常，程序员实现他们的空闲函数只是为了调用他们用于渲染场景的例程（即，他们传入的例程`glutDisplayFunc()`）。如果渲染“需要一段时间”（例如接近所有时间来渲染一帧），这种方法可能会出现问题，因为您可能没有时间完成渲染然后处理下一帧的事件。如果您要插入您提到的 while 循环，您就会这样做，这会绕过 GLUT 的本机事件处理机制。更好地使用 GLUT 的更好方法是实现你的空闲函数只调用`glutPostRedisplay()`，它告诉 GLUT 在处理完所有事件并在调用空闲函数之前安排对显示函数的调用。

# objective-c - 从ios上传到服务器的问题

> ID：15670581
> 
> 赞同：0
> 
> 时间：2013-03-27T22:16:46.703
> 
> 标签：objective-c

我正在尝试为 IOS 应用程序中的图像创建上传功能。但是当我使用下面的代码时 - 什么都没有发生！它适用于文本，但不适用于图像。

我的图像是用相机拍摄的，然后放在 UIImageView 中。

我的问题是；如何将 imageView 中的图像获取到 uploade 脚本中？

```
- (IBAction)sendAnmeldelse:(id)sender {

    NSData *imageData = UIImagePNGRepresentation(imageView.image);

    NSString *filename = [NSString stringWithFormat:@"bild.png"];
    NSString *urlString = @"http://gourmetkongen.dk/data/upload.php";

    // setting up the request object now
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *body = [NSMutableData data];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: image/png\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];

    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    NSLog(@"Sending succes!");
} 
```

这是 UIImageView 中的图像：

```
UIImage *image = info[UIImagePickerControllerOriginalImage];
imageView.image = image; 
```

希望可以有人帮帮我！

// 这里是 PHP 代码：

```
$uploaddir = '';
$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir . $file;

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    echo "OK";
} else {
    echo "ERROR";
} 
```

# java - 在 Java 中克隆不可变对象

> ID：15670583
> 
> 赞同：4
> 
> 时间：2013-03-27T22:16:51.383
> 
> 标签：java, clone, immutability

我有一个不可变对象，其权重为 int，在我的代码中，我需要更新权重，inroder 这样做，我需要制作该对象的副本并使用更新的值设置权重。但是该对象没有 clone() 覆盖，我不知道哪种方式更好，clone() 还是实现 Cloneable 接口？

这是我的课：

```
public class WeightedEdge implements Edge {

    private final WeightedEdgeComparator _weightedEdgeComparator;

    private final Vertex _target;

    private final int _weight;

    WeightedEdge(Bundle bundle, Vertex target, int weight) {
        _weightedEdgeComparator = new EdgeComparator(bundle.getDirection());
        _target = target;
        _weight = weight;
    }

    @Override
    public Vertex target() {
        return _target;
    }

    @Override
    public int weight() {
        return _weight;
    }

        @Override
    public int compareTo(WeightedEdge o) {
        return _EdgeComparator.compare(this, o);
    }

    @Override
    public int hashCode() {...}

    @Override
    public boolean equals(Object obj) { ... }

    @Override
    public String toString() { ... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:19:54.427

如何只返回一个具有新值的新对象：

```
// as mentioned by AndrewBissell, there is no reference to the bundle
// luckily, we only need the direction from the bundle :)
private final int _direction;

WeightedEdge(Bundle bundle, Vertex target, int weight) {
    this(bundle.getDirection(), target, weight);
}

WeightedEdge(int direction, Vertex target, int weight)
{
    _direction = direction;
    _weightedEdgeComparator = new EdgeComparator(_direction);
    _target = target;
    _weight = weight;

}

WeightedEdge updatedObject(int newWeight)
{
    return new WeightedEdge(_direction, _target, newWeight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:32:33.483

而不是`Bundle`仅仅为了使用它们在构造函数中实例化一个`EdgeComparator`而将方向或可能的方向传递给构造函数，只需制作`EdgeComparator`构造函数参数，并将对它的克隆实例的引用存储在字段 on 中`WeightedEdge`：

```
WeightedEdge(EdgeComparator comparator, Vertex target, int weight) {
    _weightedEdgeComparator = comparator.clone();
    _target = target;
    _weight = weight;
} 
```

然后你可以有`WeightedEdge`实现`Cloneable`，你将能够在构造克隆时提供所有必要的参数。这还允许您将有关`EdgeComparator`实现的决定与您的`WeightedEdge`实现分开，这是一种良好的 OO 实践。

此外，您需要确保 的所有实例`Vertex`都是不可变的，否则可以通过将可变对象传递给该类来构造该类的可变实例`target`。`target`或者，您也可以在构造函数中克隆。

如果`EdgeComparator`不可克隆，那么除了提供接受并存储对方向的引用的构造函数之外别无选择，如 Binyamin Sharet 的回答中所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:34:21.727

您可以使用另一个构造函数来克隆您的对象，并仅更新权重部分。

```
WeightedEdge(WeightedEdge wEdge, int weight) {
     //copy all fields of wEdge into THIS object, except weight.  
     //use int weight parameter to set the new weight
} 
```

hth

# css - 莫名其妙的跨浏览器差异

> ID：15670584
> 
> 赞同：0
> 
> 时间：2013-03-27T22:16:52.880
> 
> 标签：css, cross-browser

[我的页面](http://www.mud-kings.com/events/)上有 2 个跨浏览器问题（[http://www.mud-kings.com/events/](http://www.mud-kings.com/events/)），我找不到任何解释：

1）在页面底部的四个黄色方形大图标下，Firefox和IE可以看到“INDIVIDUAL”、“GROUP”、“CHILD”和“FAMILY”，但在Chrome上看不到（A链接为Chrome Firebug 中的灰色，没有明显的原因）

2) 同样单击页脚顶部的启动图标“注册”会显示一个灯箱，右上角有一个关闭的十字图标。在 FF 和 IE 上，此链接的样式 (id = 'exit') 有效，但在 Chrome 上，它们根本没有应用，同样没有明显的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:21:11.977

为什么不使用供应商前缀来解决每个浏览器的个别问题。

-webkit-transition：-moz-transition：-ms-transition：-o-transition：过渡：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:45:36.403

我之前遇到过类似的问题，结果是缓存问题，尝试重新启动 Chrome。

# c++ - 在 C++ 文件 CDT 中包含 Python.h

> ID：15670586
> 
> 赞同：4
> 
> 时间：2013-03-27T22:17:03.260
> 
> 标签：c++, python, eclipse-cdt, embedding

如果这是一个愚蠢的问题，我深表歉意。但我试图用谷歌搜索这个，但我找不到任何可以为我指明正确方向的东西。我只是想了解我需要做什么来“设置”cdt 以“了解”我的 python.h 包含。

错误的说法是这样的：

```
#include <Python.h> 
```

但我也试过

```
#include "Python.h" 
```

CDT 会在旁边显示一个错误标志，说明：

```
Multiple markers at this line
- fatal error: Python.h: No such file or 
 directory
- Unresolved inclusion: <Python.h> 
```

我在 Ubuntu 12.04 上使用 Eclipse CDT Juno。任何指针都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:22:28.383

请参阅如何设置环境以使用 cpython 的路径。

1.  [完整详细的 Linux 教程](http://en.wikibooks.org/wiki/Python_Programming/Extending_with_C)
2.  一个小型[github](https://github.com/zozo123/cpython-module)项目包含在 MAC OSx 上使用的所有相关文件。
3.  使用 python-config 来获取指向`Python.h`和指向 python 静态库的路径，您应该将代码链接到该静态库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T14:09:41.570

找到路径：

```
find / -iname python.h 
```

获得路径后，将其添加到：

```
Project > Properties > GCC C++ Compiler > Includes 
```

如果需要，添加：

```
python2.7 
```

到：

```
GCC C++ Linker > Libraries 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T09:15:21.880

安装后`python-devel`，通过 > 定位到终端（ctrl+shift+t）`locate Python.h`结果是文件，复制路径并按照以下说明将其添加到eclipse。

个人我喜欢了解代码的要点，所以我添加到编译器包括在内。但您也可以添加到链接器，如上所述。

在日食： `Project > Properties > C/C++ Build > Settings > ...Compiler(*) > Includes > Include paths (-l)`

目录：粘贴您在终端中找到的路径。例如`/usr/include/python2.7` 按 OK 看到它已添加到列表中按 OK 。请享用

(*)注意：如果您正在编译 c 项目，请选择“.. GCC Copmiler”下的包含 C++ '..G++ Compiler'

# ios - 背景选项和空中播放

> ID：15670588
> 
> 赞同：0
> 
> 时间：2013-03-27T22:17:15.537
> 
> 标签：ios, cocoa-touch, video, airplay

当设备入睡时，如何让我的视频通过空中播放播放？我正在寻找一些类似的事情要做，但听起来这些事情中的大部分都会让我被禁止进入应用商店[。](https://stackoverflow.com/questions/13206952/is-there-a-way-to-keep-airplay-running-if-the-device-auto-sleeps-auto-locks/14823268#14823268)我只想让我的应用程序的视频在 airplay 上播放，而用户不必确保他们的设备保持唤醒状态。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:22:01.230

如果我理解正确，您希望防止设备进入睡眠状态，这样您就可以不间断地播放视频。您可以让您的应用程序阻止设备“进入睡眠状态”，如下所示：

`[UIApplication sharedApplication].idleTimerDisabled = YES;`

`NO`请记住在播放完视频后将其设置回如下：

`[UIApplication sharedApplication].idleTimerDisabled = NO;`

我不知道您是如何播放视频的，但是尝试一下，您可以在播放视频之前或在播放完之后立即调用这些函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:23:44.287

您可以像这样阻止设备休眠：

```
UIApplication* app = [UIApplication sharedApplication];
[app setIdleTimerDisabled:true]; 
```

完成视频后，别忘了让它再次休眠。

```
[app setIdleTimerDisabled:false]; 
```

# java - 计算满屋不工作的方法

> ID：15670589
> 
> 赞同：0
> 
> 时间：2013-03-27T22:17:17.550
> 
> 标签：java, if-statement, methods

这是我使用 5 个骰子计算满屋的代码。现在有些数字会起作用，比如如果我掷出 1、6、6、6、1。但如果我掷出 4、4、5、5、4。它不会起作用，我也不知道。我知道有很多 if 语句，它本来可以做得更好，但我是一个初学者程序员，这是我觉得很舒服的事情，因为我不能做一个复杂的逻辑算法。谢谢。

```
 Arrays.sort(die);
        int score = 0;

        int d1 = die[0];
        int d2 = die[1];
        int d3 = die[2];
        int d4 = die[3];
        int d5 = die[4];

        if (d1 == 1)
        {
            if (d1 == 1 && d2 == 1)
            {
                if (d3 == 2 && d4 == 2 && d5 == 2)
                {
                    score = 25;
                }
                if (d3 == 3 && d4 == 3 && d5 == 3)
                {
                    score = 25;
                }
                if (d3 == 4 && d4 == 4 && d5 == 4)
                {
                    score = 25;
                }
                if (d3 == 5 && d4 == 5 && d5 == 5)
                {
                    score = 25;
                }
                if (d3 == 6 && d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
            else if (d1 == 1 && d2 == 1 && d3 == 1)
            {
                if (d4 == 2 && d5 == 2)
                {
                    score = 25;
                }
                if (d4 == 3 && d5 == 3)
                {
                    score = 25;
                }
                if (d4 == 4 && d5 == 4)
                {
                    score = 25;
                }
                if (d4 == 5 && d5 == 5)
                {
                    score = 25;
                }
                if (d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
        }
        if (d1 == 2)
        {
            if (d1 == 2 && d2 == 2)
            {
                if (d3 == 3 && d4 == 3 && d5 == 3)
                {
                    score = 25;
                }
                if (d3 == 4 && d4 == 4 && d5 == 4)
                {
                    score = 25;
                }
                if (d3 == 5 && d4 == 5 && d5 == 5)
                {
                    score = 25;
                }
                if (d3 == 6 && d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
            else if (d1 == 2 && d2 == 2 && d3 == 2)
            {
                if (d4 == 3 && d5 == 3)
                {
                    score = 25;
                }
                if (d4 == 4 && d5 == 4)
                {
                    score = 25;
                }
                if (d4 == 5 && d5 == 5)
                {
                    score = 25;
                }
                if (d4 == 6 && d5 == 6)
                {
                    score = 25;
                }   
            }
        }
        if (d1 == 3)
        {
            if (d1 == 3 && d2 == 3)
            {
                if (d3 == 4 && d4 == 4 && d5 == 4)
                {
                    score = 25;
                }
                if (d3 == 5 && d4 == 5 && d5 == 5)
                {
                    score = 25;
                }
                if (d3 == 6 && d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
            else if (d1 == 3 && d2 == 3 && d3 == 3)
            {
                if (d4 == 4 && d5 == 4)
                {
                    score = 25;
                }
                if (d4 == 5 && d5 == 5)
                {
                    score = 25;
                }
                if (d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
        }
        if (d1 == 4)
        {
            if (d1 == 4 && d2 == 4)
            {
                if (d3 == 5 && d4 == 5 && d5 == 5)
                {
                    score = 25;
                }
                if (d3 == 6 && d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
            else if (d1 == 4 && d2 == 4 && d3 == 4)
            {
                if (d4 == 5 && d5 == 5)
                {
                    score = 25;
                }
                if (d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
        }
        if (d1 == 5)
        {
            if (d1 == 5 && d2 == 5)
            {
                if (d3 == 6 && d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
            else if (d1 == 5 && d2 == 5 && d3 == 5)
            {
                if (d4 == 6 && d5 == 6)
                {
                    score = 25;
                }
            }
        }
        return score;
    }
    else
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:38:36.343

首先 - { 4, 4, 4, 5, 5 } 不起作用的原因是这个结构：

```
 if (d1 == 4)
    {
        if (d1 == 4 && d2 == 4)
        {
            // ...
        }
        else if (d1 == 4 && d2 == 4 && d3 == 4)
        {
            // ...
        }
    } 
```

永远不会运行第二个`...`：第二个条件只有在第一个条件已经满足的情况下才会满足。

最小的解决方法是重新排序这两个`if`块。

更好的解决方法是，不要将所有这些骰子与固定值进行比较，而是将它们相互比较。你已经有了`Arrays.sort(die)`，这是个好主意。完成此操作后，您只需编写以下代码即可检测到满屋：

```
if (d1 == d5)
{
     // five of a kind
}
else if ((d1 == d2 && d3 == d5) || (d1 == d3 && d4 == d5))
{
     // full house
} 
```

你明白为什么吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:24:03.830

我会这样解决它：

```
Arrays.sort(die);
Set<Integer> set = new HashSet<>();
for (int i : die) {
    set.add(i);
}
boolean isFullHouse = (set.size() == 2) && (die[0] == die[1]) && (die[3] == die[4]); 
```

`isFullHouse`如果你`true`只有两个不同的数字，并且在排序后的数组中，第一个等于第二个，倒数第二个与最后一个相同。

这避免了你所有的`if`s 并且不是一个复杂的逻辑算法，它是一个简单的逻辑算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:27:57.473

通过像您正在做的那样检查所有骰子值，您几乎肯定会丢失案例。

这是我要做的：

取第一个值并计算有多少骰子等于该值。如果有第二个值，请计算您的骰子中有多少等于该值。如果 2 计数是 2 和 3（或 3 和 2），那么你有满堂彩。

这看起来像 Yahtzee，所以这样的算法可以很容易地修改为三种类型、四种类型和一种 Yahtzee。

# nhibernate - Oracle 中的 NHibernate 关系

> ID：15670593
> 
> 赞同：0
> 
> 时间：2013-03-27T22:17:31.367
> 
> 标签：nhibernate, fluent-nhibernate

经过无数小时的尝试使 Entity Framework 与 Oracle 一起工作，我已经放弃并开始了 NHibernate 的道路。

我有点用术语挣扎，有一个问题。给定以下类，我如何使 NHibernate (Fluent Mappings) 输出类似于下面的 SQL，使用`WriteOffApprovalUser.UserName`作为字段的键`Employee.MailID`。

**C# 类**

```
public class WriteOffApprovalUser : EntityBase<WriteOffApprovalUser>
{
    public virtual string UserName { get; set; }
    public virtual Employee.Employee Employee { get; set; }
}

public class Employee : EntityBase<Employee>
{
    public virtual string EmployeeID { get; set; }
    public virtual string EmployeeStatusCode { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string PreferredName { get; set; }
    public virtual string JobTitle { get; set; }
    public virtual string Division { get; set; }
    public virtual string Department { get; set; }
    public virtual string Location { get; set; }
    public virtual string City { get; set; }
    public virtual string DeskLocation { get; set; }
    public virtual string MailID { get; set; }
    public virtual string Phone { get; set; }
    public virtual string Fax { get; set; }
    public virtual string SecCode { get; set; }
    public virtual string SupervisorID { get; set; }
} 
```

**SQL**

```
SELECT c.user_name,
        a.LAST_NAME
     || ', '
     || DECODE (a.PREFERRED_NAME, ' ', a.FIRST_NAME, a.preferred_name)
        writeoff_approval_name
FROM writeoff_approval_user c, adp_employee a
WHERE c.USER_NAME = a.USER_ID AND c.exp_date IS NULL
ORDER BY 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:06:35.620

在 NHibernate 中，一切都是关于映射正确的方式。如果您使用的是 fluent，您应该在 WriteOffApprovalUser 中定义了对 Employee 实体的引用。[就像在这个基本教程中一样](https://github.com/jagregory/fluent-nhibernate/wiki/Getting-started)

```
public class WriteOffApprovalUserMap : ClassMap<WriteOffApprovalUser> 
{
  public WriteOffApprovalUserMap()
  {
    Id(x => x.UserName);
    References(x => x.Employee);
  }
} 
```

然后你需要做的就是一个简单的查询，比如

```
List<Employee> employees = session.Where(e => e.exp_date == null); 
```

我还没有看到映射任何日期，但我很容易修复。

然后要拥有 DECODE 功能，我建议您做一些 DDD，而不是简单地为 Employee 做一个[贫血的类](http://www.martinfowler.com/bliki/AnemicDomainModel.html "贫血类")，而是创建一个返回组合用户名的属性。

```
class Employee
{
    public string ComposedName
    {
        get {
            return this.LastName + string.IsNullOrEmpty(this.preferedName) ? 
            this.FirstName : this.PreferedName;
         }
     }
} 
```

对我来说，这应该被视为一种计算，不需要在 SQL 查询中进行。作为奖励，此代码可以进行单元测试。

# java - 使用蚂蚁从战争中排除一个阶级

> ID：15670594
> 
> 赞同：0
> 
> 时间：2013-03-27T22:17:31.450
> 
> 标签：java, eclipse, ant

我有一个使用 RMI 的 Web 应用程序，因此它包含 RMI 接口类但不包含它的实现。为了避免在两个地方重复接口定义，我试图将 RMI 服务器代码保留在 Web 应用程序的 Eclipse 项目中；但是 RMI 服务器类必须从 war 文件中排除，因为它有一个 main() 方法。build.xml 中的 jar 任务和 .spec 用于为 RMI 服务器守护进程制作 RPM。

我尝试在战争任务中使用排除子句，然后在课程中，

```
 <war webxml="${web.dir}/WEB-INF/web.xml" destfile="${dist.dir}/${ant.project.name}.war">
    <classes dir="${build}" excludes="**/RMIServer.class" />
        <fileset dir="${web.dir}" />
        <manifest>
            <attribute name="Built-Date" value="${TODAY}" />
            <attribute name="Built-By" value="${user.name}" />
        </manifest>
    </war> 
```

然后在文件集中：

```
 <war webxml="${web.dir}/WEB-INF/web.xml" destfile="${dist.dir}/${ant.project.name}.war">
        <classes dir="${build}" />
        <fileset dir="${web.dir}" >
            <exclude name="**/RMIServer*.class"/>
        </fileset>
        <manifest>
            <attribute name="Built-Date" value="${TODAY}" />
            <attribute name="Built-By" value="${user.name}" />
        </manifest>
    </war> 
```

但我一直无法让它工作 - 服务器类仍在 war/WEB-INF/classes/...

我怎样才能做到这一点？或者，这个单一项目的目标是不明智的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:12:38.400

你的最后一句话呼应了我的想法。如果我有一个 Web 服务器和一个 RMI 服务器，我会将它们放入单独的项目中，即使其中一个调用另一个。我可能会使用 Maven 或类似的东西来帮助我。

现在我会非常惊讶地发现一个项目将两个不同的服务器进程实现放在一个 Eclipse/IDEA/Maven/Ivy/other 项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:29:25.547

`<classes>` *是*你的文件集。对于类文件，您不需要同时使用`<classes>`AND 。`<fileset>`我认为正在发生的事情是，当您将其排除在一个之外时，它就会被另一个包含在内。

# javascript - 使用 ActiveX 从 Javascript 写入 Excel 时，无法识别边框类型和线条样式

> ID：15670595
> 
> 赞同：0
> 
> 时间：2013-03-27T22:17:34.387
> 
> 标签：javascript, excel, activex, export-to-excel, vba

我最近发现，当我通过 ActiveX 从 aspx / html 页面并使用 javascript 写入 excel 文件时，您在 Excel IDE 中看到的宏 / vba 代码不会完全匹配。

例如 - 在 Excel 中，如果您在删除单元格边框时录制宏，您会看到如下内容：

```
Selection.Borders(xlDiagonalDown).LineStyle = xlNone
Selection.Borders(xlDiagonalUp).LineStyle = xlNone
Selection.Borders(xlEdgeLeft).LineStyle = xlNone
Selection.Borders(xlEdgeTop).LineStyle = xlNone
Selection.Borders(xlEdgeBottom).LineStyle = xlNone
Selection.Borders(xlEdgeRight).LineStyle = xlNone
Selection.Borders(xlInsideVertical).LineStyle = xlNone
Selection.Borders(xlInsideHorizontal).LineStyle = xlNone 
```

但是，如果您想通过活动 X 从 JS 执行相同的操作，则无法识别该代码。（下面回答）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:17:34.387

上面的代码会写成这样：

```
ws.Range("A1:Z65536").Borders(5).LineStyle = -4142;
ws.Range("A1:Z65536").Borders(6).LineStyle = -4142;
ws.Range("A1:Z65536").Borders(7).LineStyle = -4142;
ws.Range("A1:Z65536").Borders(8).LineStyle = -4142;
ws.Range("A1:Z65536").Borders(9).LineStyle = -4142;
ws.Range("A1:Z65536").Borders(10).LineStyle = -4142;
ws.Range("A1:Z65536").Borders(11).LineStyle = -4142;
ws.Range("A1:Z65536").Borders(12).LineStyle = -4142; 
```

因为每个位置和 LineStyle 都有数字映射。从[这里](http://nerds-central.blogspot.com/2007/01/setting-excel-borders-from-vbscript-or.html#!/2007/01/setting-excel-borders-from-vbscript-or.html)：

```
These define the style of the border
xlNone = -4142; Note this is the same as xlLineStyleNone
xlContinuous = 1;
xlDash = -4115;
xlDashDot = 4;
xlDashDotDot = 5;
xlDot = -4118;
xlDouble = -4119;
xlSlantDashDot = 13;

These define the weight of the border
xlHairLine = 1;
xlMedium = -4138;
xlThick = 4;
xlThin = 2;

Thise is handy to make borders have the default color index
xlAutomatic = -4105;

These define the placement of border pieces
xlDiagonalDown = 5;
xlDiagonalUp = 6;
xlEdgeLeft = 7;
xlEdgeTop = 8;
xlEdgeBottom = 9;
xlEdgeRight = 10;
xlInsideVertical = 11;
xlInsideHorizontal = 12; 
```

# c# - C# .NET 中字符串 (str) 中新行的正则表达式

> ID：15670597
> 
> 赞同：0
> 
> 时间：2013-03-27T22:17:36.467
> 
> 标签：c#, .net, regex

我已经用尽了我的搜索，需要帮助。我是正则表达式的新手，并且设法从多行字符串中提取单词，但不是整行。我将文本拉入字符串，但我无法找到下一行。

示例字符串有多行（字符串 multipleLines）：

```
 Authentication information
 User information:
 domai n\username
 Paris 
```

我需要在“用户信息”行之后获取文本“域\用户名”。

我尝试了许多正则表达式组合，但无法使其正常工作。例子：

```
 string topLine = "Authentication information";  
 label.Text = Regex.Match(multipleLines, topLine + "(.*)").Groups[1].Value; 
```

我还尝试使用：topLine + "\n" 在获取身份验证信息行后，我应该添加什么来查看整个下一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:28:34.527

[您可以在 Stack Overflow 上](https://stackoverflow.com/questions/1175053/regex-that-matches-a-newline-n-in-c-sharp)的此线程中找到您使用*正则表达式*的目标。您会想要实现，以便您可以使用and来匹配行的开始和结束。`RegexOptions.Multiline``^``$`

*   `^`：取决于是否设置了 MultiLine 选项，匹配行中第一个字符之前的位置，还是字符串中的第一个字符。

*   `$`：取决于是否设置了 MultiLine 选项，匹配行中最后一个字符之后的位置，或字符串中的最后一个字符。

这些将是完成任务的最简单方法。

* * *

**更新：**

一个例子是这样的。

```
const string account = @"Authentication information:" + "\n"
     + "User Information: " + "\n"
     + "Domain Username: "
     + " \n" + "\\Paris";

MatchCollection match = Regex.Matches(account, ^\\.*$, RegexOptions.Multiline); 
```

这将检索该行以及在该行上`\\`进行的所有操作。这是一个例子，希望能指出你正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:39:49.200

尽管 RegEx 可以完成您想要的，但这可能更简单且开销更少。使用此代码取决于您将收到的输入类型。对于您的示例，这将起作用：

```
string domainUsername = inputString.Split('\n').Where(z => z.ToLower().Contains(@"\")).FirstOrDefault();
if (domainUsername != null) {
    Console.WriteLine(domainUsername); // Should spit out the appropriate line.
} else {
    Console.WriteLine("Domain and username not found!"); // Line not found
} 
```

# mercurial - 强制 Mercurial 在拉取之前在远程端自动提交

> ID：15670603
> 
> 赞同：0
> 
> 时间：2013-03-27T22:17:54.480
> 
> 标签：mercurial

我是一名网络开发人员。我有一个远程测试服务器，可供多人（设计师、客户）访问。我想设置一个工作流程，我可以在其中通过 SSH 从测试服务器本地拉取更改，Mercurial 在执行拉取之前自动提交可能远程发生的任何更改。这些更改可能包括通过 CMS 上传的文件或 CMS 生成的样式表。

CMS 也有一个 MySQL 数据库，如果可能的话，我希望远程测试服务器运行一个 mysqldump 并将输出压缩/保存到存储库中，然后再提交和拉取，这样我就可以将它加载到我的本地测试服务器中更新它。

到目前为止，我一直在玩钩子，但找不到符合我需求的钩子。我想知道是否有一种惯用的 Mercurial 方式来解决这个问题，或者我是否应该花一些时间编写一个远程执行 SSH 命令的 shell 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:17:21.037

0 您必须在测试中使用 Mercurial

1.  您必须在测试 ( `hg init`)上有 Mercurial 存储库
2.  您必须将测试中的应用程序转换为服务器存储库的工作目录（`hg add...`+ 编辑 .hgignore + ...）
3.  您必须在测试中有 cron-job（或 sheduler-task），其中 1）测试 wd 的状态，并且，如果找到本地修改，则提交（可能使用转储，由之前相同的作业准备）
4.  毕竟你可以从测试的回购中提取

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T22:30:48.403

您可能想要执行远程命令以在服务器端运行提交。

```
--remotecmd CMD  specify hg command to run on the remote side 
```

# ruby-on-rails - json 需要使用“新”操作吗？

> ID：15670610
> 
> 赞同：1
> 
> 时间：2013-03-27T22:18:18.920
> 
> 标签：ruby-on-rails, json, controller

如果我使用我的 Rails 应用程序主要响应 json，那么在 json 中返回空对象的“新”或“编辑”操作是否仍然必要/有用？例如：

```
def new
  @post = Post.new

  respond_to do |format|
    format.json  { render :json => @post }
  end
end 
```

我觉得我可以通过完全在 html 中构建表单来摆脱服务器调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:28:16.290

在我看来，是的，如果您不需要特殊的默认字段值并且手动组装表单字段，则可以排除该操作。

# speech-to-text - 如何在 cmusphinx 中为土耳其语创建 .dic 文件

> ID：15670615
> 
> 赞同：0
> 
> 时间：2013-03-27T22:18:28.153
> 
> 标签：speech-to-text, cmusphinx

我在 Windows 上安装了“sphinxbase”和“pocketsphinx”，并在 eclipse 和我的手机上运行“PocketSphinxDemo”。接下来我想为这个应用程序创建土耳其语。理解几个单词或句子作为开始就足够了，这样它就很容易了。我在 Voxforge 上找不到现成的土耳其模型。是否有任何其他我可以找到的网站或我可以轻松创建的任何工具。

我使用了 imtool 但 dic 文件的发音是英语。如何为土耳其语创建 dic 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:33:09.820

你首先需要一个单词列表。之后，您可以使用[espeak](http://espeak.sourceforge.net/)规则创建语音词典：

```
espeak -v tr -x
Türkçe 
tYRktS'E 
```

您只需要解析输出并以纯字母格式将其放入字典中。您只需创建一个到纯字母电话集的映射，而不需要到 arpabet 的映射。打开文本板并创建地图：

```
t t
y yy
r rr
k k
e ee
S' sh 
```

所以最后你会得到这样的条目：

```
türkçe t yy rr k t sh ee 
```

而已。不需要使用 ARPABe。有关更多详细信息，请参阅[声学模型训练教程](http://cmusphinx.sourceforge.net/wiki/tutorialam)

# c - 如何停止阻塞？

> ID：15670616
> 
> 赞同：1
> 
> 时间：2013-03-27T22:18:32.313
> 
> 标签：c, function, block

嘿，过去几天我已经问了几次这个问题，但我就是不明白......我基本上希望在后台执行 Beep 命令的 while 循环，而用户可以与可用的案例陈述（只显示一个..还有其他的）....我一直被阻止，每次我想让哔哔声不断发出声音时，我都会阻止我的程序的其余部分...我必须使用哔哔声，所以请不要'不建议任何其他功能..

这是一个示例代码...

```
while( keypress != 'q' || keypress != 'Q')
{   
    x = Beep(x);
    while (x == 1)
       Beep(350,300);

    alarm_t current;
    keypress = _getch();

    switch(keypress){

        case 'h':
            sprintf_s(current.message,"high alarm");
            current.timeOfEvent = time(NULL);
            recordEvent(current);
            break; 
```

现在......我的问题是while循环和Beep命令......这是我对Beep（x）的调用

```
int Beep(int y)
{ 
    return y;
} 
```

所以基本上我试图在我当前的 cpp 文件之外调用一个函数来比较 x 和 y，并返回 y 等价于 x ...我认为这可能会避免阻塞，但它不会...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:31:06.973

您的 while 循环哔哔声将无法正常工作并且`_getch`正在阻塞。所以它只会阻塞，直到有一个字符。

根据您所在的平台，您需要类似的东西`kbhit`（如果您用谷歌搜索，您会找到其他平台的替代品）。即它不是标准的C 功能和特定于平台的。

`kbhit`将根据是否有字符返回 true 或 false。

所以你可以这样做：

```
while(!key_is_quit(ch))
{
  Beep();
  if(kbhit())
  {
    ch = getch();
  // switch....
  }
} 
```

# function - 简化 variable.handler = function {}

> ID：15670618
> 
> 赞同：1
> 
> 时间：2013-03-27T22:18:38.573
> 
> 标签：function, client-side, javascript

我正在复习我的JS，我不知道该怎么问这个，确切地说。

我有这个：

```
text_area.onkeyup = function() {
  var text_length    = this.value.length;
  var text_remaining = text_max - text_length;

  feed_back.innerHTML = "<strong>" + text_remaining + "</strong> charactres remaining";
} 
```

有用。但是，我应该能够使用该功能并将其拉出到这样的地方吗？

```
function countDown() {
  var text_length    = this.value.length;
  var text_remaining = text_max - text_length;

  feed_back.innerHTML = "<strong>" + text_remaining + "</strong> charactres remaining";
} 
```

只需按名称调用该函数？

```
text_area.onkeyup = countDown(); 
```

在多个项目中，这对我来说**从来没有用过。**

应该是？为什么不呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:20:08.083

你必须使用：

```
text_area.onkeyup = countDown; 
```

没有括号。

`countDown`是对实际函数对象的引用`countDown`。它只是一个引用，不会调用或执行该函数。

`countDown()`实际上*调用*该函数，并评估它返回的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T22:19:59.220

它不起作用，因为`()`实际上调用了函数——有效地设置`text_area.onkeyup`为返回值`countDown`而不是函数本身。

试试这个：

```
text_area.onkeyup = countDown; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T22:19:58.110

这不应该是因为您分配的是函数调用的结果而不是函数引用。应该：

```
text_area.onkeyup = countDown; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T22:21:15.037

问题是您在分配期间执行函数，因此函数的返回值附加到事件。相反，您应该附上参考：

```
text_area.onkeyup = countDown 
```

或者，如果 countdown 有您想要传递的参数，那么您可以使用 a`function`来确保它们不会丢失。像这样的东西：

```
text_area.onkeyup = function(){ countDown(paremeter1, paremeter2); } 
```

# r - 使用 data.table 获得内存缓存的好方法

> ID：15670619
> 
> 赞同：6
> 
> 时间：2013-03-27T22:18:41.533
> 
> 标签：r, data.table

假设我在 32 GB 的服务器上有一个 4 GB 的数据集。

我可以将所有这些读入 R，创建一个 data.table 全局变量，并让我的所有函数都使用该全局变量作为一种内存数据库。但是，当我退出 R 并重新启动时，我必须再次从磁盘读取它。即使使用智能磁盘缓存策略（保存/加载或 R.cache），我也有 10 秒左右的延迟来获取数据。复制该数据大约需要 4 秒。

有没有一种好方法可以在 R 会话退出后将其缓存在内存中？

想到了几件事，RServe、redis/Rredis、Memcache、多核...... Shiny-Server 和 Rstudio-Server 似乎也有解决这个问题的方法。

但话又说回来，在我看来，也许 data.table 可以提供此功能，因为它似乎无论如何都会将数据移动到 R 的内存块之外。这将是理想的，因为它不需要任何数据复制、重组等。

更新：

我进行了一些更详细的测试，我同意下面的评论，我可能没有太多可抱怨的。

但这里有一些其他人可能会觉得有用的数字。我有一个 32GB 的服务器。我创建了一个 4GB 大小的 data.table。根据 gc() 并查看顶部，它似乎使用了大约 15GB 的峰值内存，其中包括制作一份数据副本。我觉得这很好。

我用 save() 写入磁盘，删除了对象并使用 load() 重新制作它。这分别花费了 17 秒和 10 秒。

我对 R.cache 包做了同样的事情，这实际上更慢。23 和 14 秒。

然而，这两个重新加载时间都非常快。load() 方法给了我 357 MB/s 的传输速率。相比之下，复制需要 4.6 秒。这是一个虚拟服务器。不确定它有什么样的存储或缓存对读取速度的影响有多大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:52:40.283

非常正确：`data.table`还没有到磁盘表。与此同时，一些选项是：

*   不要退出 R。让它在服务器上运行并使用 svSocket 来`evalServer()`处理它，如`data.table`主页上的视频所示。或您提到的其他类似选项。

*   使用数据库来实现持久性，例如 SQL 或任何其他 noSQL 数据库。

*   如果您有大的分隔文件，那么最近有人报告`fread()`说它比`load()`. 但是用`compress=FALSE`. 此外，我们刚刚推`fwrite`送到最新的开发版本（1.9.7，用于`devtools::install_github("Rdatatable/data.table")`安装），[据报道该版本的写入时间](https://stackoverflow.com/a/36465497/3576984)与 native 相当`save`。

*   包`ff`,`bigmemory`和`sqldf`, 也是。请参阅 HPC 任务视图的“大内存和内存不足数据”部分。

在`data.table`正在使用的企业中，我的猜测是它目前主要是从其他一些持久性数据库中获取数据。这些企业可能：

*   使用 64 位，比如 16GB、64GB 或 128GB 的​​ RAM。这些天 RAM 很便宜。（但我意识到这并没有解决持久性问题。）

编写内部结构时考虑了磁盘表。但不要屏住呼吸！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T08:58:49.670

根据您的数据集的外观，您可能会考虑使用包 ff。如果您将数据集保存为 ffdf，它将存储在磁盘上，但您仍然可以从 R 访问数据。ff 对象具有虚拟部分和物理部分。物理部分是磁盘上的数据，虚拟部分为您提供有关数据的信息。

要在 R 中加载此数据集，您只需加载数据集的虚拟部分，该部分要小得多，可能只有几 Kb，这取决于您是否有大量带有因子的数据。因此，这将在几毫秒而不是几秒内将您的数据加载到 R 中，同时仍然可以访问物理数据来进行处理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T23:40:15.387

如果你真的需要在计算会话之间因为一些奇怪的原因退出 R 并且服务器没有重新启动，那么只需在 RAM 中创建一个 4 GB ramdisk 并将数据存储在那里。与任何 SAS 或 SSD 驱动器相比，将数据从 RAM 加载到 RAM 会快得多:)

这可以在 Linux 上很容易地解决，只需将此行添加到`/etc/fstab`：

```
none  /data  tmpfs  nodev,nosuid,noatime,size=5000M,mode=1777  0  0 
```

# c# - 反序列化可能是不同类型的 xml 元素

> ID：15670629
> 
> 赞同：1
> 
> 时间：2013-03-27T22:19:31.530
> 
> 标签：c#, xml-serialization

我需要在 c# 中反序列化流动的 xml

```
<Show>
   <status>Canceled</status>
</Show>

<Show>
    <status>2</status>
</Show> 
```

我的课是

```
[XmlRoot("Show")]`
public class Show
{
   [XmlElement(ElementName = "status")]
   public object status { get; set; }
} 
```

它可以工作，但我想将其反序列化为一个枚举，在此示例中取消等于 2

```
public enum ShowStatus
{
   [XmlEnum("Canceled")]
   Canceled = 2
} 
```

有没有办法做到这一点而不将`public object status { get; set; }`字符串值解析为枚举

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:41:56.777

如果您想`Deserialize`使用`Enum`名称或整数，您可以装饰`Enum`with`XmlEnum`属性并提供整数。

这会将“已取消”和“2”反序列化为您的枚举。

例子：

```
[XmlRoot("Show")]
public class Show
{
    [XmlElement(ElementName = "status")]
    public ShowStatus status { get; set; }
}

public enum ShowStatus
{
    [XmlEnum("2")]
    Canceled = 2
} 
```

测试xml：

```
<?xml version="1.0"?>
<ArrayOfShow xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Show>
    <status>Canceled</status>
  </Show>
  <Show>
    <status>2</status>
  </Show>
</ArrayOfShow> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:38:38.590

你不能`object`直接使用，XmlSerializer 只是拒绝使用泛型。对象仍然有一个底层类型，当它反序列化时，你不知道那个类型是什么。我在[这里](https://stackoverflow.com/questions/14359520/best-way-to-implement-generic-setting-class-get-set-properties-reflected/14361475#14361475)为它做了一个解决方法，但它不是很漂亮，也不是很有用。

您可以自定义实施`IXmlSerializable`，但这是一个令人头疼的问题。

我假设问题的根源是您将其作为来自另一个来源的输入，并且该字段可以是整数或文本，您希望将其存储为可枚举。您可能最好将其反序列化为字符串，然后稍后再简单地解析它。这可能是最简单的方法。我能找到的其他所有内容要么仅反序列化字符串值，要么仅反序列化整数值，我不知道它们中的任何一个是否可以处理两种形式的数据，但似乎不太可能。

[这个函数](http://msdn.microsoft.com/en-us/library/essfb559.aspx)可能会帮到你很多，看起来它可以处理字符串或数值，但我不认为 XmlSerializer 可以使用它。最好使用可以使用 Parse 函数保存回 Enum 属性的字符串“dummy”。有关虚拟属性的示例，请参阅[此 stackoverflow 问题。](https://stackoverflow.com/questions/506368/how-do-i-serialize-an-enum-value-as-an-int)

**例子**

一般来说，它看起来像这样：

```
[XmlRoot("Show")]`
public class Show
{
   [XmlIgnore()]
   public ShowStatus status { get; set; }

   [XmlElement(ElementName = "status")]
   public string StatusString
   {
       get { return status.ToString(); }
       set { status = Enum.Parse(ShowStatus, value); }
   }
} 
```

# vbscript - 查找在特定日期拍摄的所有照片

> ID：15670630
> 
> 赞同：0
> 
> 时间：2013-03-27T22:19:39.140
> 
> 标签：vbscript, photos

如果有以下 VBScript 用于递归查找一组文件夹中的所有文件。我只是在网上的某个地方找到了这个，不能因此而受到赞扬。

```
fileExtension = ".jpg"
folderPath = "C:\Pictures"
computerName = "."
arrFIL = Array()

If Right(folderPath,1) = "\" Then folderPath = Left(folderPath,Len(folderPath)-1)

Set wmiObject = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & computerName & "\root\cimv2")
Set folderObject = wmiObject.Get("Win32_Directory='" & folderPath & "'")

EnumFolders folderObject, wmiObject, arrFIL
strFIL = UBound(arrFIL) + 1 & " files found with extension '" & fileExtension & "':" & vbCrLf & vbCrLf

For intFIL = 0 To UBound(arrFIL)
    Set objFile = objFSO.GetFile(arrFIL(intFIL))
    strFIL = strFIL & arrFIL(intFIL) & vbCrLf
Next
WScript.Echo strFIL

Sub EnumFolders(folderObject, wmiObject, arrFIL)
    On Error Resume Next
    Dim objSD1
    Dim objSD2
    Dim objFI1
    Dim objFI2
    Set objSD1 = wmiObject.ExecQuery("Associators of {Win32_Directory.Name='" & fold    erObject.Name & "'} Where AssocClass=Win32_SubDirectory ResultRole=PartComponent")

    For Each objSD2 in objSD1
        EnumFolders objSD2, wmiObject, arrFIL
    Next    
    On Error Goto 0

    Set objFI1 = wmiObject.ExecQuery("Associators of {Win32_Directory.Name='" & folderObject.Name & "'} Where ResultClass=CIM_DataFile")
    For Each objFI2 in objFI1
    If Right(objFI2.Name,Len(fileExtension)) = fileExtension Then
        intFIL = UBound(arrFIL) + 1
            ReDim Preserve arrFIL(intFIL)
            arrFIL(intFIL) = objFI2.Name
        End If
    Next
End Sub 
```

我需要做的是针对 C:\Pictures 中的一堆文件夹运行此操作，并让它返回照片的拍摄日期属性为每月 23 日的所有文件。这可能吗？我将如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:57:39.187

我会使用`Shell.Application`对象而不是 WMI：

```
Const Name      =  0
Const DateTaken = 12

folderPath = "C:\Pictures"

Set re = New RegExp
re.Pattern = "[^0-9:./ ]"
re.Global  = True

Traverse CreateObject("Shell.Application").Namespace(folderPath)

Sub Traverse(fldr)
  For Each obj In fldr.Items
    If obj.IsFolder Then
      Traverse obj.GetFolder
    ElseIf LCase(obj.Type) = "jpeg image" Then
      If Day(re.Replace(fldr.GetDetailsOf(obj, DateTaken), "")) = 23 Then
        WScript.Echo fldr.GetDetailsOf(obj, Name)
      End If
    End If
  Next
End Sub 
```

# css - 项目上列出的类的顺序是否会影响 CSS？

> ID：15670631
> 
> 赞同：41
> 
> 时间：2013-03-27T22:19:43.037
> 
> 标签：css, css-selectors

我知道具有最高特异性的 CSS 选择器优先（即`.classname`< `#idname`）。

我也知道，如果事情具有相同的特异性，那么最后一个调用的语句优先：

```
.classname1 { color: red; }
.classname1 { color: blue; } // classname1 color will be blue 
```

DOM 元素上 HTML 类的顺序是否会影响语句优先级？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-28T01:47:08.047

我不得不稍微不同意乔恩和沃森的回答，因为......

## 是的，它*可以*（取决于声明）

你的问题是：

> DOM 元素上 CSS 类的顺序是否会影响语句优先级？

这取决于有问题的陈述。

**HTML 排序通常不重要**

当涉及对类的直接调用（即or ）或组合调用（即or ）时，以下内容*是等效*的：`.class1``.class2``.class1.class2``.class2.class1`

```
<div class="class1 class2"></div>
<div class="class2 class1"></div> 
```

**基于 HTML 顺序影响上述 HTML 语句优先级的情况**

在 HTML 中排序很重要的主要地方是在 CSS 中使用*属性*选择器。

[**示例 1**](http://jsfiddle.net/mzvsR/)使用以下代码寻找*匹配*属性值的 Fiddle 字体颜色不会有任何变化，并且`div`由于类的顺序，每个都会有不同的属性：

```
[class="class1"] {
    color: red;
}

[class="class1 class2"] {
    background-color: yellow;
}

[class="class2 class1"] {
    border: 1px solid blue;
} 
```

[**示例 2 Fiddle**](http://jsfiddle.net/mzvsR/1/)使用以下代码寻求*匹配属性值的开头*将不会对 second 的字体颜色进行任何更改由于类的顺序，`div`每个`div`

```
[class^="class1"] {
    color: red;
}

[class^="class1 class2"] {
    background-color: yellow;
}

[class^="class2 class1"] {
    border: 1px solid blue;
} 
```

[**示例 3 Fiddle**](http://jsfiddle.net/mzvsR/2/)使用以下代码寻求*匹配*属性值的结尾不会对 first 的字体颜色有任何变化由于类的顺序，`div`每个`div`

```
[class$="class1"] {
    color: red;
}

[class$="class1 class2"] {
    background-color: yellow;
}

[class$="class2 class1"] {
    border: 1px solid blue;
} 
```

## 关于“优先”的澄清声明

需要明确的是，在上述情况下，就“语句优先级”而言，受影响的实际上是该语句是否实际*适用*于该元素。但是由于应用与否在某种意义上是基本的优先级，而且由于上述情况是这样的应用实际上是基于HTML Dom 元素上*的类的顺序*（而不是类的存在或不存在），我认为值得添加这个作为答案。

## 类排序的可能有效使用？

根据 BoltClock 的评论，这是我的一个想法。考虑仅使用两个类来根据被认为对不同样式至关重要的任何因素来设置元素样式。这两个类理论上可以使用属性选择器的组合来代替 11 个不同的单独类的使用（实际上，正如稍后将指出的，只有一个类，可能性几乎是无限的，但我稍后会讨论这个问题，因为这帖子是关于多个类的排序）。对于这两个类，我们可以对元素进行不同的样式设置，如下所示：

**假设这些 HTML 组合**

```
<div class="class1">Element 1</div>
<div class="class2">Element 2</div>
<div class="class1 class2">Element 3</div>
<div class="class2 class1">Element 4</div> 
```

**CSS 的可能性**

```
/* simply has the class */
.class1 {} /* affects elements 1, 3, 4 */
.class2 {} /* affects elements 2-4 */
/* has only a single class */
[class="class1"] {} /* affects element 1 only */
[class="class2"] {} /* affects element 2 only */
/* simply has both classes */
.class1.class2 {} /* affects elements 3-4 */
/* has both classes, but in a particular order */
[class="class1 class2"] {} /* affects element 3 only */
[class="class2 class1"] {} /* affects element 4 only */
/* begins with a class */
[class^="class1"] {} /* affects elements 1 & 3 only */
[class^="class2"] {} /* affects elements 2 & 4 only */
/* ends with a class 
   NOTE: that with only two classes, this is the reverse of the above and is somewhat
   superfluous; however, if a third class is introduced, then the beginning and ending 
   class combinations become more relevant.
*/
[class$="class1"] {} /* affects elements 2 & 4 only */
[class$="class2"] {} /* affects elements 1 & 3 only */ 
```

如果我计算正确，3 个类可以提供至少 40 种选择器选项组合。

为了澄清我关于“无限”可能性的注释，给定正确的逻辑，单个类可能已经嵌入了通过`[attr*=value]`语法查找的代码组合。

这一切是否太复杂而无法管理？可能。这可能取决于它是如何实现的逻辑。我要指出的一点是，如果人们想要并为此计划，CSS3 可以使类的顺序变得重要，并且以这种方式利用 CSS 的力量可能不是大错特错*。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T22:22:08.937

不，不是的。W3C 标准的[相关部分](http://www.w3.org/TR/selectors/#specificity)没有提及类的出现顺序。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-27T22:21:26.460

不，它不像你说的那样，如果两条规则具有相同的特异性，那么稍后出现在你的 CSS 中的规则将被应用。

# php - PHP - 使用 ADBDB 同时连接到同一台服务器上的两个数据库

> ID：15670633
> 
> 赞同：2
> 
> 时间：2013-03-27T22:19:51.007
> 
> 标签：php, database-connection, adodb

是否可以使用 PHP 5.3/ADODB5/SQL Server 2008 在同一服务器上打开与两个模式的连接？这是我正在尝试的：

```
//  Connect to users database
$connUsers = NewADOConnection('mssql');
$connUsers-> Connect($server, $user, $password, $dbNameUsers);
$connUsers->SetFetchMode(ADODB_FETCH_ASSOC);    

//  Connect to main database    
$conn = NewADOConnection('mssql');
$conn-> Connect($server, $user, $password, $dbNameMain);
$conn->SetFetchMode(ADODB_FETCH_ASSOC); 
```

任何一个都单独工作，但如果两者同时打开，查询将失败。请注意，除了数据库名称之外，所有内容都相同。

我看过的几个地方说您可以在第二个连接字符串中省略服务器名称，如下所示：

```
$conn-> Connect(false, $user, $password, $dbNameMain); 
```

但这给了我错误（针对 $conn 打开的记录集不是有效对象）。

我可以根据需要打开和关闭不同的连接，但为了可维护性，我肯定想将所有连接设置在脚本的顶部，然后在底部关闭它们。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:08:31.457

这是我制作的一个快速类，它应该允许您使用 adoDB 连接到 3 个数据库：

```
class Data {
    private static $_dbOne = null;
    private static $_dbTwo = null;
    private static $_dbThree = null;

    protected function __construct() {
    }

    /**
     * This function returns the database connection object
     * @return Object Database Connection
     */
    public static function dbOne() {
        include_once(LIBRARY_PATH.'adodb5/adodb.inc.php');
        if (null === self::$_dbOne) {

            $_connOne = 'mysql://username:password@www.server.com/database';

            self::$_dbOne = &ADONewConnection($_connOne);
            if (self::$_dbOne==false) { die('Could not connect to the database.'); }

        }

        return self::$_dbOne;
    }

    /**
     * This function returns the database connection object
     * @return Object Database Connection
     */
    public static function dbTwo() {
        include_once(LIBRARY_PATH.'adodb5/adodb.inc.php');
        if (null === self::$_dbTwo) {

            $_connTwo = 'mysql://username:password@www.server.com/database';

            self::$_dbTwo = &ADONewConnection($_connTwo);
            if (self::$_dbTwo==false) { die('Could not connect to the database.'); }

        }

        return self::$_dbTwo;
    }

}

    /**
     * This function returns the database connection object
     * @return Object Database Connection
     */
    public static function dbThree() {
        include_once(LIBRARY_PATH.'adodb5/adodb.inc.php');
        if (null === self::$_dbThree) {

            $_connThree = 'mysql://username:password@www.server.com/database';

            self::$_dbThree = &ADONewConnection($_connThree);
            if (self::$_dbThree==false) { die('Could not connect to the database.'); }

        }

        return self::$_dbThree;
    }

} 
```

以下是如何使用此类的示例：

```
$sql = "SELECT * FROM *";
$results1 = Data::dbOne()->Execute($sql);
$results2 = Data::dbTwo()->Execute($sql);
$results3 = Data::dbThree()->Execute($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:44:39.737

我找到了这个[http://phplens.com/lens/adodb/docs-adodb.htm#ex6](http://phplens.com/lens/adodb/docs-adodb.htm#ex6)（它们通过引用初始化 AdoConnection）。我希望它应该有所帮助。

# javascript - 用javascript触发（dispatchEvent）'onerror'？

> ID：15670639
> 
> 赞同：1
> 
> 时间：2013-03-27T22:20:17.130
> 
> 标签：javascript, javascript-events

在我的代码中，我做了：`element.onerror = my_function;`

我想知道如何强制触发此事件以便我可以测试它？

有人可以告诉我如何使用 dispatchEvent 流来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:23:19.380

您可以使用[`element.dispatchEvent`](https://developer.mozilla.org/en/docs/DOM/EventTarget.dispatchEvent).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:39:11.843

好的，我想通了！

```
var evt = document.createEvent('HTMLEvents');
evt.initEvent('error', false, false);
element.dispatchEvent(evt); 
```

`onerror`根据谷歌，我发现这是一个“HTMLEvents”。由于事件名称是`error`，所以事件是`error`，而且我知道它`error`不会冒泡，因此`false`在 的第二个参数中是`initEvent`。

# scala - 让scala程序在eclipse中运行

> ID：15670646
> 
> 赞同：-1
> 
> 时间：2013-03-27T22:20:37.410
> 
> 标签：scala, main

我在 eclipse 项目中的 eclipse Philsophers.scala 文件中有以下代码。 [http://www.jakubkorab.net/wp-content/uploads/2011/01/Philosophers.scala](http://www.jakubkorab.net/wp-content/uploads/2011/01/Philosophers.scala)

当我右键单击运行时，eclipse 无法识别此类中的跑步者。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:31:28.940

假设它当前在默认包中：一旦您将其放入正确的包中，它将运行，因为文件本身指定了一个包。最简单的方法是删除：

```
package net.jakubkorab.philosophers 
```

# azure - 直接从浏览器将文件上传到 Azure Blob 存储？

> ID：15670649
> 
> 赞同：29
> 
> 时间：2013-03-27T22:20:47.167
> 
> 标签：azure, azure-storage, azure-blob-storage

是否可以创建一个 html 表单以允许 Web 用户直接将文件上传到 azure blob 存储，而无需使用其他服务器作为中介？S3 和 GAW blobstore 都允许这样做，但我找不到对 azure blob 存储的任何支持。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T02:46:44.423

请查看这些博客文章，以将文件直接从浏览器上传到 Blob 存储：

[http://coderead.wordpress.com/2012/11/21/uploading-files-directly-to-blob-storage-from-the-browser/](http://coderead.wordpress.com/2012/11/21/uploading-files-directly-to-blob-storage-from-the-browser/)

[http://gauravmantri.com/2013/02/16/uploading-large-files-in-windows-azure-blob-storage-using-shared-access-signature-html-and-javascript](http://gauravmantri.com/2013/02/16/uploading-large-files-in-windows-azure-blob-storage-using-shared-access-signature-html-and-javascript)

第二篇文章（由我撰写）使用 HTML 5 File API，因此不适用于所有浏览器。

基本思想是为 blob 容器创建一个`Shared Access Signature (SAS)`。SAS 应该有`Write`权限。由于 Windows Azure Blob 存储尚不支持[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)（Amazon S3 和 Google 都支持），因此您需要将 HTML 页面托管在希望用户上传文件的 Blob 存储中。然后就可以使用 jQuery 的 Ajax 功能了。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-11-02T22:33:42.337

**编辑 2019 年 11 月**

您现在可以参考官方文档：

*   [Blob 操作的 Azure 存储 JavaScript 客户端库示例](https://dmrelease.blob.core.windows.net/azurestoragejssample/samples/sample-blob.html)
*   [适用于 JavaScript 的 Azure 存储客户端库](https://github.com/Azure/azure-sdk-for-js/tree/master/sdk/storage)

**初步答案**

有一个[用于浏览器的新 Azure 存储 JavaScript 客户端库（预览版）](https://azure.microsoft.com/en-us/blog/new-azure-storage-javascript-client-library-for-browsers-preview/)。

（**这篇文章的所有内容都来自上面的原始文章**）

*   Azure 存储的 JavaScript 客户端库支持使用 Blob、表、队列和文件等存储服务的许多 Web 开发方案，并且与现代浏览器兼容
*   用于浏览器的新 JavaScript 客户端库支持最新 REST API 版本 2016-05-31 中可用的所有存储功能，因为它是使用适用于 Node.js 的 Azure 存储客户端库通过 Browserify 构建的

> 我们强烈建议使用[SAS 令牌](https://docs.microsoft.com/en-us/azure/storage/storage-dotnet-shared-access-signature-part-1)对 Azure 存储进行身份验证，因为 JavaScript 客户端库会在浏览器中向用户公开身份验证令牌。强烈建议使用范围和时间有限的 SAS 令牌。在理想的 Web 应用程序中，期望后端应用程序在用户登录时对其进行身份验证，然后向客户端提供 SAS 令牌以授权访问存储帐户。这消除了使用帐户密钥进行身份验证的需要。查看我们的 Github 存储库中的**[Azure 函数示例](https://github.com/Azure-Samples/functions-node-sas-token)**，该示例根据 HTTP POST 请求生成 SAS 令牌。

代码示例：

1.  在您的 HTML 代码中插入以下脚本标记。确保 JavaScript 文件位于同一文件夹中。

    ```
    <script src="azure-storage.common.js"></script/>
    <script src="azure-storage.blob.js"></script/> 
    ```

2.  现在让我们在页面中添加一些项目以启动传输。在 BODY 标签内添加以下标签。请注意，该按钮在单击时会调用 uploadBlobFromText 方法。我们将在下一步中定义此方法。

    ```
    <input type="text" id="text" name="text" value="Hello World!" />
    <button id="upload-button" onclick="uploadBlobFromText()">Upload</button> 
    ```

3.  到目前为止，我们已经包含了客户端库并添加了 HTML 代码，以向用户显示文本输入和启动传输的按钮。当用户点击上传按钮时，uploadBlobFromText 将被调用。现在让我们定义它：

    ```
    <script>
    function uploadBlobFromText() {
        // your account and SAS information
        var sasKey ="....";
        var blobUri = "http://<accountname>.blob.core.windows.net";
        var blobService = AzureStorage.createBlobServiceWithSas(blobUri, sasKey).withFilter(new AzureStorage.ExponentialRetryPolicyFilter());
        var text = document.getElementById('text');
        var btn = document.getElementById("upload-button");
        blobService.createBlockBlobFromText('mycontainer', 'myblob', text.value,  function(error, result, response){
            if (error) {
                alert('Upload filed, open browser console for more detailed info.');
                console.log(error);
            } else {
                alert('Upload successfully!');
            }
        });
    }
    </script> 
    ```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-12T12:07:30.380

现在 Windows Azure 存储服务支持 CORS，您可以执行此操作。您可以在此处查看公告：[Windows Azure 存储版本 - 引入 CORS、JSON、分钟指标等](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/11/27/windows-azure-storage-release-introducing-cors-json-minute-metrics-and-more.aspx)。

我有一个简单的例子来说明这个场景：http: [//www.contentmaster.com/azure/windows-azure-storage-cors/](http://www.contentmaster.com/azure/windows-azure-storage-cors/)

该示例展示了如何使用 jQuery.ajax 从私有 blob 直接上传和下载。此示例仍然需要一个服务器组件来生成共享访问签名：这避免了在客户端代码中公开存储帐户密钥的需要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-16T09:37:28.877

我写了[一篇博客](http://www.dynabyte.se/blog/2013/10/09/uploading-directly-to-windows-azure-blob-storage-f/)文章，其中有一个关于如何做到这一点的示例，[代码位于 GitHub](https://github.com/MartinWa/BlobUploader)

它基于[Gaurav Mantris 帖子](http://gauravmantri.com/2013/02/16/uploading-large-files-in-windows-azure-blob-storage-using-shared-access-signature-html-and-javascript/)，通过在 Blob 存储本身上托管 JavaScript 来工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T22:32:55.067

您可以使用 HTML5 File API、AJAX 和 MVC 3 构建强大的文件上传控件，以安全可靠地将大文件上传到 Windows Azure blob 存储，并提供监控操作进度和操作取消。该解决方案的工作原理如下：

1.  接受和处理用户上传的文件的客户端 JavaScript。
2.  处理由 JavaScript 发送的文件块的服务器端代码。
3.  调用 JavaScript 的客户端 UI。

在此处获取示例代码：[通过 HTML5 控件可靠地上传到 Windows Azure Blob 存储](http://msdn.microsoft.com/en-us/library/windowsazure/hh824678.aspx)

# android - 开始新活动后清除背景

> ID：15670651
> 
> 赞同：0
> 
> 时间：2013-03-27T22:20:50.947
> 
> 标签：android, background, resources

我遇到了内存不足的问题，因此我决定在开始新活动之前清理背景。

它有效，但我有一个不好的副作用，即在开始新活动之前我有一个黑屏。

这是我的代码：

我在这里设置：

```
@Override
protected void onResume() {
    super.onResume();

    bg.setBackgroundDrawable(new BitmapDrawable(decodeSampledBitmapFromResource(getResources(), R.drawable.bg, sizeWigth, sizeHeight)));

} 
```

我在这里清除它：

```
@Override
protected void onPause() {
    super.onPause();
    bg.setBackgroundDrawable(null);
    System.gc();
} 
```

你有什么想法来解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:38:26.920

加载大图像时，请确保遵循以下规则

1.  根据您的屏幕 DPI 加载图像。如果您的屏幕很小，他们没有理由将巨大的图像加载到内存中。

2.  位图采样。阅读[此](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)内容以对大图像进行二次采样

3.  监视您的 HeapSize 并在加载图像后让您有足够的空间进行其他处理。检查此[链接](https://stackoverflow.com/questions/2630158/detect-application-heap-size-in-android)

4.  使用 java 引用加载图像。确保在图像为空时重新加载图像。这将帮助您避免内存不足的问题。

    System.gc();

是对垃圾收集器的提示，并且它们不能保证垃圾收集器在执行此行后会收集垃圾。

将此图像放在 XML 布局上不会帮助您解决内存问题。

# closures - AMD Optimizer (r.js) 不产生任何输出

> ID：15670655
> 
> 赞同：4
> 
> 时间：2013-03-27T22:21:04.133
> 
> 标签：closures, requirejs, rhino, amd, r.js

**免责声明：**我完全是 AMD n00b。

我有一个项目正在尝试转换为 AMD。最初，所有代码都在一个文件中。我能够将功能单元拆分为它们自己的模块，但它们都在同一个文件中。我决定将它们拆分为 AMD 模块，然后使用优化器组合所有内容。一位乐于助人的贡献者已经将我的模块转换为 UMD，因此移动所有内容似乎非常简单。

我的主文件（即我正在编写的库）如下所示：

```
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(factory);
    } else {
        // Browser globals
        root.regula = factory();
    }
}(this, function () {
    define(
        [
            "utils/MapUtils",
            "utils/DOMUtils",
            "service/BindingService",
            "service/ExceptionService",
            "service/ConstraintService",
            "service/ValidationService",
            "service/GroupService"
        ],
        function (MapUtils, DOMUtils, BindingService, ExceptionService, ConstraintService, ValidationService, GroupService) {

            ...
            ...

            return {
                configure: configure,
                bind: bind,
                unbind: unbind,
                validate: validate,
                custom: custom,
                compound: compound,
                override: override,
                Constraint: ConstraintService.Constraint,
                Group: GroupService.Group,
                DateFormat: DateFormat,
                Exception: ExceptionService.Exception
            };
        }
    );
})); 
```

我的目录结构如下：

```
regula
├── amdtest.html
├── dist
│   └── src
└── src
    ├── build.js
    ├── domain
    │   └── CompositionGraph.js
    ├── jquery.regula.js
    ├── lib
    │   ├── closure
    │   │   └── compiler.jar
    │   ├── require
    │   │   ├── require.js
    │   │   └── r.js
    │   └── rhino
    │       └── js.jar
    ├── parser
    │   └── Parser.js
    ├── regula.js
    ├── service
    │   ├── BindingService.js
    │   ├── ConstraintService.js
    │   ├── ExceptionService.js
    │   ├── GroupService.js
    │   └── ValidationService.js
    └── utils
        ├── ArrayUtils.js
        ├── DOMUtils.js
        └── MapUtils.js 
```

我`build.js`的是：

```
({
    appDir: "../",
    baseUrl: "src",
    dir: "../dist",
    modules: [{
        name: "regula"
    }]
}) 
```

我正在使用 Rhino 和 Closure 来运行优化器，如下所示：

```
java -cp lib/rhino/js.jar:lib/closure/compiler.jar org.mozilla.javascript.tools.shell.Main lib/require/r.js build.js 
```

不幸的是，这不会产生任何类型的输出或错误。中引用的所有 Javascript 模块`regula.js`也是 AMD 模块。知道我做错了什么吗？如果有帮助，我可以发布更多信息。我不想做大量的随机信息转储，因为正如我之前提到的，当谈到 AMD 时，我是一个完全的新手，所以我不完全确定什么是相关的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:27:10.520

您忘记传递`-o`标志以`r.js`在优化器模式下运行！更多细节在[官方文档](https://github.com/jrburke/r.js#optimizer)

# jquery - Ajax 动画 JQuery 1.9.2

> ID：15670665
> 
> 赞同：0
> 
> 时间：2013-03-27T22:21:39.630
> 
> 标签：jquery, ajax

我将如何升级此问题中提供的解决方案 [如何使用 jQuery 创建“请稍候，正在加载...”动画？](https://stackoverflow.com/questions/1964839/jquery-please-wait-loading-animation/1964871#1964871)

使用 JQuery 1.9.2？

我似乎无法让它工作。我试过以下 [http://jsfiddle.net/VpDUG/2485/](http://jsfiddle.net/VpDUG/2485/)

```
$(document).ajaxStart(function(){   $("body").addClass("loading"); });
$(document).ajaxStart(function(){   $("body").removeClass("loading"); }); 
```

但这没有用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:25:04.727

我认为您打算这样做（`ajaxStop()`用于第二个）：

```
$(document).ajaxStart(function(){   $("body").addClass("loading"); });
$(document).ajaxStop(function(){   $("body").removeClass("loading"); }); 
```

在这里看到它在你的 jsFiddle 的修改版本上工作：http: [//jsfiddle.net/jfriend00/gk3RL/](http://jsfiddle.net/jfriend00/gk3RL/)

* * *

此外，使用效率更高，`document.body`而不是`"body"`：

```
$(document).ajaxStart(function(){   $(document.body).addClass("loading"); });
$(document).ajaxStop(function(){   $(document.body).removeClass("loading"); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:25:51.893

第二个事件应该是`ajaxComplete`

```
$(document).ajaxComplete(function(){   $("body").removeClass("loading"); }); 
```

# batch-file - 比较批处理文件中的 2 个日期

> ID：15670666
> 
> 赞同：0
> 
> 时间：2013-03-27T22:21:42.917
> 
> 标签：batch-file

我正在使用它来获取文件的修改日期：

```
@echo off
FOR %%? IN ("C:\some.exe") DO (
    ECHO Last-Modified Date   : %%~t?
) 
```

以上返回类似：Last-Modified Date : 26/03/2013 14:43。

如何从上面获取日期部分并将其与另一个名称包含日期的文件进行比较，即：23-Sep-13.exe？

如果名称中包含日期的文件晚于文件修改版本（即安装更新），我需要能够在批处理文件中执行一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:39:36.773

```
@ECHO OFF
SETLOCAL
:: No doubt for international use, this could be retrieved from the registry
SET monthnames=Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
:: get last modified date of target file - your format as specified
:: (I used THIS BATCH FILE)
FOR %%i IN ("%~f0") DO SET target=%%~ti
:: parse the target date
FOR /f "tokens=1-3delims=/ " %%i IN ("%target%") DO SET targetf=%%k%%j%%i
::
:: parse name from 'other file'
SET other=23-Sep-13.exe
FOR /f "tokens=1-3delims=.- " %%i IN ("%other%") DO SET od=%%i&SET omn=%%j&SET oy=%%k
:: Convert monthname to number
:: @ECHO on
SET om=101
FOR %%i IN (%monthnames%) DO (
IF DEFINED omn IF /i %omn%==%%i (SET omn=) ELSE (SET /a om+=1)
)
:: Build date of 'other file' in same format (YYYYMMDD)
SET otherf=20%oy%%om:~-2%%od%
ECHO is %other% later than %target% ?
ECHO IF %otherf% gtr %targetf% GOTO later
ECHO.
::
:: parse name from 'another other file'
SET other=23-Jan-13.exe
FOR /f "tokens=1-3delims=.- " %%i IN ("%other%") DO SET od=%%i&SET omn=%%j&SET oy=%%k
:: Convert monthname to number
SET om=101
FOR %%i IN (%monthnames%) DO (
IF DEFINED omn IF /i %omn%==%%i (SET omn=) ELSE (SET /a om+=1)
)
:: Build date of 'other file' in same format (YYYYMMDD)
SET otherf=20%oy%%om:~-2%%od%
ECHO is %other% later than %target% ?
ECHO IF %otherf% gtr %targetf% GOTO later
ECHO. 
```

代码以（此批次）的日期为目标（您的`'C:\some.exe'`- 更改以适应。

然后将 test 应用于两个不同`filename-is-date+ext`格式的文件名进行测试。

如果需要与 20 世纪日期进行比较，可以轻松调整... :)

# java - 如何获取视图的父片段的实例：

> ID：15670673
> 
> 赞同：3
> 
> 时间：2013-03-27T22:22:29.747
> 
> 标签：java, android, layout, casting, android-fragments

我有一个带有`XML`布局文件的片段。在里面我有一个 2 clickable `ImageView`s。对于每个`ImageView`我设置一个`onClick`方法，例如：android:onClick="commentFragmentRemoveOnClick"。

在 FragmentActivity (The Activity no the Fragment) 我这样定义它：

```
public void commentFragmentRemoveOnClick(View v)
{

} 
```

不，这个 Fragment 是类型`CommentFragment`，它有一种`public void getFragmentTag()`方法来获取我在早期保存的标签。我需要获取单击图像以获取其标签的片段实例。

我试过：

```
((CommentFragment)v).getParentFragment().getFragmentTag(); 
```

和：

```
((CommentFragment)v).getParent().getFragmentTag(); 
```

但是eclipse给了我两个错误，这是如何正确完成的？

为了更清楚，这是我的`CommentFragment`：

```
public class CommentFragment extends Fragment {

private final static String TAG = CommentFragment.class.getSimpleName(); 
private String fragmentTag;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.comment_fragment_layout,
            container, false);

    Bundle bundle = getArguments();
    String text = bundle.getString("comment");
    String fullUser = bundle.getString("user");
    String user = fullUser.substring(0, fullUser.indexOf("@"));
    String at = bundle.getString("at");

    TextView tvCmment = (TextView) rootView.findViewById(R.id.tvComment);
    TextView tvUser = (TextView) rootView.findViewById(R.id.tvUser);
    TextView tvAt = (TextView) rootView.findViewById(R.id.tvDate);

    tvCmment.setText(text);
    tvUser.setText(user);
    tvAt.setText(at);

    return rootView;
}

public void setText(String item) 
{
    TextView view = (TextView) getView().findViewById(R.id.tvComment);
    view.setText(item);
}

public void setFragmentTag(String tag)
{
    this.fragmentTag = tag;
}

public String getFragmentTag()
{
    return this.fragmentTag;
}
 } 
```

和布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llCommentContainer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:background="@drawable/try2">

   <TextView
       android:id="@+id/tvUser"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignLeft="@+id/tvComment"
       android:layout_alignParentTop="true"
       android:background="@color/my_gray"
       android:text="demo"
       android:textStyle="bold"
       android:paddingLeft="5dp"
       android:paddingRight="5dp"    
       android:textColor="@color/my_even_darker_gray" />

   <TextView
       android:id="@+id/tvComment"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentLeft="true"
       android:layout_below="@+id/tvDate"
       android:padding="5dp"
       android:text="This task is described in more details if you click on it."
       android:textColor="@color/my_even_darker_gray" />

   <TextView
       android:id="@+id/tvAt"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentTop="true"
       android:paddingRight="5dp" 
       android:textColor="@color/my_even_darker_gray"
       android:layout_toRightOf="@+id/tvUser"
       android:background="@color/my_gray"
       android:text="at" />

   <TextView
       android:id="@+id/tvDate"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:layout_alignBaseline="@+id/tvAt"
       android:layout_alignBottom="@+id/tvAt"
       android:layout_toRightOf="@+id/tvAt"
       android:background="@color/my_gray"
       android:text="12/02"
       android:textColor="@color/my_even_darker_gray" />

    <ImageView
        android:id="@+id/iEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/tvComment"
        android:layout_marginRight="4dp"
        android:clickable="true"
        android:contentDescription="@drawable/add_comment_button"
        android:onClick="commentFragmentEditOnClick"
        android:src="@drawable/add_comment_button" />

    <ImageView
        android:id="@+id/iRemove"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/iEdit"
        android:layout_toRightOf="@+id/iEdit"
        android:layout_marginRight="4dp"
        android:clickable="true"
        android:contentDescription="@drawable/add_comment_button"
        android:onClick="commentFragmentRemoveOnClick"
        android:src="@drawable/add_comment_button" />

</RelativeLayout> 
```

我很想得到一点帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:25:43.040

v 不是 的实例`Fragment`，这就是 Eclipse 不喜欢您的代码的原因。如果你想要一个片段的实例，你必须使用`FragmentManager`它的 findFragmentByXXX 方法之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T09:01:42.017

我有一个一般性的建议可以解决你的问题并在未来帮助你——

1.  不要在 xml 文件中使用 android:onClick，在代码本身中使用 setOnClickListener - 需要尽可能避免将您的视图与应用程序的其他部分混合。

2.  尽量保持 Fragment 独立于其活动。

如果图像是片段的一部分，为什么侦听器是片段活动的一部分？

在 Fragment 本身中使用 setOnClickListener，您可能可以在应用程序的其他 pats 中使用此 Framgent，而无需依赖 Activity。

它还可以解决您识别单击图像的片段的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:10:28.750

要获取`ImageView`单击的片段实例，我执行了以下操作：

在片段中，我`onClickListeners`为这两个图像设置了两个，如下所示：

```
 iEdit = (ImageView)rootView.findViewById(R.id.iEdit);
    iEdit.setOnClickListener(new View.OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            Log.d(TAG, "pressed edit button");
            ((PicturesAndCommentsActivity) getActivity()).commentFragmentEditOnClick(fragmentTag);
        }
    });

    iRemove = (ImageView)rootView.findViewById(R.id.iRemove);
    iRemove.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            Log.d(TAG, "pressed remove button");
            ((PicturesAndCommentsActivity) getActivity()).commentFragmentRemoveOnClick(fragmentTag);
        }
    }); 
```

在片段活动中，我定义了这两种方法：

```
public void commentFragmentRemoveOnClick (String tag)
{
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.remove(fragmentManager.findFragmentByTag(tag)).commit();
} 
```

用于删除片段，现在我正在编辑片段。

# javascript - webapp中可能存在内存泄漏

> ID：15670678
> 
> 赞同：1
> 
> 时间：2013-03-27T22:23:13.390
> 
> 标签：javascript, jquery, jsp, memory-leaks

在我的 webapp 中，我根据服务器发送的页面片段创建了一些 DOM 元素。任何新片段都是在 jsp 页面中生成的具有唯一 ID 的 div。

我认为使用也作为页面片段的一部分发送的脚本标记在此 div 中的元素上注册事件。

这就是我的页面片段的样子。

```
<script>
$(document).ready(function() {
   var myButton = $("#<unique_tab_id").find(".myButton);
   myButton.click(clickFunction);
   function clickFunction() {
   }
});
</script>

<div id="<unique_tab_id">
  <button class="myButton">
   My Button
  </button>
</div> 
```

随着时间的推移，页面中会添加和删除几个 div。删除是基于一些仅调用 jquery replaceWith 或删除函数的用户操作发生的。

添加了新元素。假设 jquery 会自动注销它们，我不会对事件做任何事情。

我的假设正确吗？这种编码风格可能存在内存泄漏吗？我看到我的页面在一段时间后变慢了。这是由于内存使用量增加所致。我在这里泄漏内存吗？

$(document).ready() 中定义的函数涉及闭包。但我假设一旦相应的 div 被删除，它们将不再处于活动状态。那正确吗？还有什么可能在这里泄漏内存。

如果您想查看更多详细信息，请查看代码： [https ://github.com/C4G/V2V/blob/f4dd780ff5bf1d3b1d456d421602038500769fd9/war/WEB-INF/jsp/donors/addDonorForm.jsp](https://github.com/C4G/V2V/blob/f4dd780ff5bf1d3b1d456d421602038500769fd9/war/WEB-INF/jsp/donors/addDonorForm.jsp)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:34:43.433

简而言之：众所周知，jQuery 的 Cache 对象存在某些垃圾收集问题，其中一些会被开发人员堵塞，其中一些会被忽视。过去发生过几次，例如：

*   取消注册 DOM 节点时未从 jQ 缓存中清除事件
*   缓存被三对象循环引用击败并且不进行垃圾收集

扔一些代码，有人可能会测试它。现在，我能提供的只是泛型。尝试在删除对象之前手动取消注册对象中的所有事件（`off()`如果您知道已绑定哪些事件），并查看泄漏是否仍然存在。

你如何删除你的对象？如果您正在设置`innerHTML=null`，您的对象很可能仍在内存中。

您如何跟踪内存泄漏？可能想在 firebug 中运行 JS 分析器，看看是否真的存在泄漏。

# android - 从 Android 手机获取 GPS 数据

> ID：15670684
> 
> 赞同：2
> 
> 时间：2013-03-27T22:23:25.647
> 
> 标签：android, gps

我尝试获取 gps 数据。但是 gps 数据返回空值。当我查看时，以下“位置”返回 null，因此我无法获取 gps 数据。
位置 = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

我的代码如下；

```
 protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager)           mContext.getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        if (!isGPSEnabled)
        {

        }
        else if (!isGPSEnabled && !isNetworkEnabled) 
        {
                        } 
        else 
        {
            this.canGetLocation = true;

            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {

                        location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            } 
```

我等你的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:27:06.677

您是否在清单中设置了这些？

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:06:39.423

我像下面的代码一样改变了，然后成功地工作了。

```
String bestProvider = locationManager.getBestProvider(criteria, false);

locationManager.requestLocationUpdates(bestProvider, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
    if (locationManager != null) {
        location = locationManager.getLastKnownLocation(bestProvider);
        if (location != null) {
            latitude = location.getLatitude();
            longitude = location.getLongitude();
        }
    }
} 
```

# css - 如何不从父元素继承样式

> ID：15670685
> 
> 赞同：0
> 
> 时间：2013-03-27T22:23:31.967
> 
> 标签：css, opacity

我在背景图片上方有一个不透明的 CSS 元素。在该元素内部有一个图像，它继承了不透明度，因此图像比正常情况要暗一些：

```
<body>
 <div class="trans">
  <img class="not_trans" src="test.png">
 </div>
</body> 
```

CSS：

```
body{
 background:url(stars.gif);
 background-color:black;
}
.trans{
 opacity:0.4;
}
img.not_trans{
 opacity:1.0;
} 
```

但是图像仍然是半透明的。

如何在不移出的情况下获得正常的非透明`img`图像`div`？

如果有很多元素级联了不同的背景颜色，使用
`background-color:rgba(0,0,0,0.4)`而不是`opacity`不是一个简单的选择

我只希望一个`img`元素不继承周围元素的透明度

至少会有一个使用javascript的解决方案：

1.  将 DOM 中的 img 标签移出 div
2.  而是在那里设置一个垫片
3.  定位`img`它所在的位置`position:absolute`

但是有 CSS 的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:24:20.723

`.trans`在你的而不是不透明度上使用 rgba ！像 rgba(0, 0, 0, 0.4); 或任何你有的颜色。

# cassandra - Cassandra 环未显示所有节点

> ID：15670688
> 
> 赞同：2
> 
> 时间：2013-03-27T22:23:46.107
> 
> 标签：cassandra

我创建了三个 Cassandra 节点并为它们生成了 3 个令牌（从 0 开始）。我还在 cassandra.yaml 中设置了种子。

这是我的问题：如果我在 cassandra.yaml 中设置“initial_token”字段，当我执行

```
 nodetool -h localhost ring 
```

但是，如果我不设置它，我可以看到整个环正常工作。知道是什么原因造成的吗？有什么影响？

谢谢！

# sublimetext2 - 如何让 Sublime Text 控制台显示颜色而不是颜色代码

> ID：15670689
> 
> 赞同：3
> 
> 时间：2013-03-27T22:23:52.283
> 
> 标签：sublimetext2

我在控制台中有一个构建系统输出。但是它显示的是颜色代码而不是实际的彩色文本。

```
[37;46;1mTest file: static/tests/casperjs/login/test.js 
```

如何将颜色主题应用于控制台输出？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T11:59:59.993

不幸的是，崇高不支持这一点。我最终编写了一个插件来解析输出并将其转换为彩色版本（对于颜色的子集，我们在测试框架中使用的颜色）。

如果您想对此进行调查，或者将来有人偶然发现此问题，这里有一些提示..

**我使用on_modified**事件侦听器和没有名称的视图（**view.name()** ）检测插件中的输出。这并不能唯一地标识输出窗格，因此您必须做更多的事情，我发现没有其他简单的方法（除非您想挂接到您的构建插件并直接在它生成的视图上操作）。为了改变颜色，我删除了颜色代码（**view.erase() ）并使用****view.add_regions()**为这些代码标记的区域添加颜色**. 我添加的颜色是我手动插入自定义主题的颜色，因为似乎没有其他方法。此外，由于某种原因，您似乎无法添加具有活动主题的确切背景的颜色（它会反转它或其他东西），所以我将颜色的背景设置为不同的东西。**

 **如您所知，这是一个 hacky 的临时解决方案，否则我会在 Github 上发布它。

您还可以查看[SublimeREPL](https://github.com/wuub/SublimeREPL)，它会为控制台文本着色**

# visual-studio-2010 - 如何将命令行代码生成器添加到 Visual Studio？

> ID：15670690
> 
> 赞同：5
> 
> 时间：2013-03-27T22:23:56.737
> 
> 标签：visual-studio-2010, command-line, msbuild, code-generation

我正在开发一个项目，该项目使用代码生成来使用命令行工具从基于文本的描述中生成 C# 类。我们也将开始将这些描述用于 javascript。

目前这些类是生成然后签入的，但是，我希望能够使代码自动生成，以便将任何更改传播到两个版本。

手动运行的步骤是：

```
servicegen.exe -i:MyService.txt -o:MyService.cs 
```

当我构建时，我希望 MSBuild/VS 首先生成 CS 文件然后编译它。可以通过修改`csproj`, 或者使用带有`Exec`, `DependentUpon`&的 MSBuild 任务来做到这一点`AutoGen`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:09:40.303

通常我会建议将预构建命令放在预构建事件中，但由于您的命令行工具将创建编译所需的 C# 类，因此应该在 .csproj 文件[的 BeforeBuild 目标中完成。](http://msdn.microsoft.com/en-us/library/ms366724%28v=vs.100%29.aspx)之所以会这样，是因为MSBuild在整个过程中，在调用BeforeBuild和调用PreBuildEvent之间寻找需要编译的文件（可以在MSBuild使用的Microsoft.Common.targets文件中看到这个流程） .

从 BeforeBuild 目标中调用 Exec 任务以生成文件：

```
<Target Name="BeforeBuild">
  <Exec Command="servicegen.exe -i:MyService.txt -o:MyService.cs" />
</Target> 
```

有关为 Exec 任务指定不同选项的更多详细信息，请参阅[Exec 任务](http://msdn.microsoft.com/en-us/library/x8zx72cd%28v=vs.100%29.aspx)MSDN 文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T22:49:00.893

Antlr 有[一个流程示例](http://www.antlr.org/wiki/display/ANTLR3/Integration+with+Development+Environments)，可用于将生成的代码添加到项目中。这具有显示嵌套在源文件下的文件的优点，尽管添加起来更复杂。

您需要使用要生成的文件添加一个项目组，例如：

```
<ItemGroup>
  <ServiceDescription Include="MyService.txt"/>
</ItemGroup> 
```

然后将要生成的cs文件添加到包含其余源代码的ItemGroup中。

```
<ItemGroup>
  ...
  <Compile Include="Program.cs" />
  <Compile Include="Properties\AssemblyInfo.cs" />
  ...etc..
  <Compile Include="MyService.txt.cs">
    <AutoGen>True</AutoGen>
    <DesignTime>True</DesignTime>
    <DependentUpon>MyService.txt</DependentUpon>  <!--note: this should be the file name of the source file, not the path-->      
  </Compile>
</ItemGroup> 
```

然后最后添加构建目标以执行代码生成（使用 % 对 ItemGroup 中的每个项目执行命令）。这可以放入一个单独的文件中，以便可以从许多项目中包含它。

```
<Target Name="GenerateService">
  <Exec Command="servicegen.exe -i:%(ServiceDescription.Identity) -o:%(ServiceDescription.Identity).cs" />
</Target>
<PropertyGroup>
  <BuildDependsOn>GenerateService;$(BuildDependsOn)</BuildDependsOn>
</PropertyGroup> 
```

# git - git相当于'hg serve'？

> ID：15670692
> 
> 赞同：49
> 
> 时间：2013-03-27T22:24:01.113
> 
> 标签：git, mercurial

是否有某种插件可以用来拥有相当于 Mercurial 的 git

```
hg serve 
```

（'hg serve' 启动一个本地网络服务器，允许您浏览存储库历史/分支等）

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-02T08:23:02.620

对于仅浏览文件和修订`git instaweb`是正确的解决方案。

此外，如果您想设置一个*临时*git 服务器来与一些同事共享工作（推/拉）（这`hg serve`也允许您这样做），您可以使用：

```
git daemon --reuseaddr --base-path=. --export-all --verbose --enable=receive-pack 
```

您的同事将使用它与以下内容：

```
git clone git://<ip-address>/.git project 
```

加法1：

如果您希望能够*推送*到此服务器，则需要添加`--enable=receive-pack`选项（感谢下面的 Dominik）。

补充2：

它只是发生在我身上，所以我将它添加到答案中:-)，如果您使用的是*基于 Redhat 的*Linux 发行版（RHEL、CentOS 等）并且出现错误`"git: 'daemon' is not a git command."`，那么您需要为它安装一个单独的包：

```
sudo yum install git-daemon 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-27T22:37:01.113

我想你要找的是[`git instaweb`](https://www.kernel.org/pub/software/scm/git/docs/git-instaweb.html).

默认情况下它使用`lighttpd`，但任何其他类似的 Web 服务器`webrick`也应该可以工作。

我更喜欢 webrick，因为它非常方便（我已经安装`ruby`了`webrick`gem）

例子：

```
# Starts a web server on port 1234 and opens up a web browser
git instaweb --httpd=webrick

# To stop webrick
git instaweb --httpd=webrick --stop 
```

您应该能够`instaweb`在您的`.git/config`或`~/.gitconfig`仅运行`git instaweb --start`和`git instaweb --stop`控制 instaweb 中配置设置：

```
[instaweb]
    local = true
    httpd = webrick
    port = 1234
    browser = chromium 
```

更新：

[alberthier 在他的回答中提到的git-](https://github.com/alberthier/git-webui) [webui](https://stackoverflow.com/users/1697414/alberthier)实际上是一个比默认更丰富的 UI `instaweb`，安装也非常简单。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-09-23T13:21:40.097

git-webui 是一个 git 扩展，它提供了一个基于 Web 的用户界面以及从其他计算机克隆/拉取的能力

[https://github.com/alberthier/git-webui](https://github.com/alberthier/git-webui)

```
$ cd my_git_repo
$ git webui 
```

其他人可以

```
$ git clone http://<ip-of-your-computer>:8000/ repoclone 
```

或者

```
$ git pull http://<ip-of-your-computer>:8000/ 
```

# php - mysql更新脚本

> ID：15670694
> 
> 赞同：0
> 
> 时间：2013-03-27T22:24:15.113
> 
> 标签：php

谁能指出php新手正确的方向？它不会更新数据库，我无法弄清楚。我得到我要更改的文章并将其放入表单，并使用“update1.php”文件更新数据库。

获取文章：

```
<?php
include ('../db_connect.php');

$getid = $_GET['artikkelID'];

$query = mysql_query('SELECT tittel, ingress, publ, tekst, forfatter, bildetekst, photo FROM hovedartikler WHERE artikkelID = "' . $getid . '"');
$rows = mysql_fetch_assoc($query);

$titteldb = $rows['tittel'];
$ingressdb = $rows['ingress'];
$tekstdb = $rows['tekst'];
$forfatterdb = $rows['forfatter'];
$bildetekstdb = $rows['bildetekst'];
$photodb = $rows['photo'];

echo '<form action="update1.php" method="post" enctype="multipart/form-data">

<span>
ArtikkelID 
<input type="text" name="artikkelID" readonly="readonly" size="3" value="' . $getid . '">
</span>

<span style="margin-left: 20px;">
Artikkelens Tittel ( maks 100 tegn)
<input type="text" name="tittel" cols="80" size="50" value="' . $titteldb . '" /><br />
</span>
<br />

Ingress (maks 255 tegn)<br />
<textarea name="ingress" rows="4" cols="60" />' . $ingressdb . '</textarea><br />

Artikkelens tekst (ingen begrensning på antall tegn)<br />
<textarea id="textarea1" name="tekst" size="100%">' . $tekstdb . '</textarea>
<script language="javascript1.2">
generate_wysiwyg("textarea1");
</script>

Skriv inn artikkelens forfatter (maks 50 tegn)<br />
<input type="text" name="forfatter" size="80" cols="80" value="' . $forfatterdb . '" /><br />

Skriv inn tekst til artikkel-bilde<br />
<textarea name="bildetekst" rows="3" cols="60">' . $bildetekstdb . '</textarea><br />

Last opp bilde til bruk i artikkelen<br />
<input type="hidden" name="MAX_FILE_SIZE" value="2000000">
<input type="file" name="file" size="80" value="' .   $photodb . '" /><br />

<br />
<input type="submit" name="submit" value="Oppdater" />
</form>';   

?> 
```

和更新脚本：

```
<?php

$id = $_POST['artikkelID'];
$tittel = $_POST['tittel'];
$ingress = $_POST['ingress'];
$tekst = $_POST['tekst'];
$forfatter = $_POST['forfatter'];
$bildetekst = $_POST['bildetekst'];
$pic = $_FILES['file']['name'];

include '../db_connect.php';

if(isset($_POST['Oppdater']))

$mysql_query=("UPDATE hovedartikler SET 
tittel='" . $_POST['tittel'] . "', ingress='" . $_POST['ingress'] . "', tekst='" . $_POST['tekst'] . "', forfatter='" . $_POST['forfatter'] . "', bildetekst='" . $_POST['bildetekst'] . "', file='" . $_FILES['pic'] . "' WHERE artikkelID='$id'")
or die (mysql_error());

mysql_query($query);
echo "Artikkelen er oppdatert!<br/><br/>
Du vil n&aring; automatisk bli dirigert til Admin-forsiden.";

print_r($ingress);

mysql_close();
?>
<script type="text/javascript">
setTimeout("window.location.href='http://mss-seil.no/admin/adminIndex.php'", 3000);
</script> 
```

所有帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:30:04.143

```
$mysql_query=("UPDATE hovedartikler SET tittel='" . $_POST['tittel'] . "', ingress='" . $_POST['ingress'] . "', tekst='" . $_POST['tekst'] . "', forfatter='" . $_POST['forfatter'] . "', bildetekst='" . $_POST['bildetekst'] . "', file='" . $_FILES['pic'] . "' WHERE artikkelID='$id'") or die (mysql_error()); 
```

请注意，它是“$mysql_query”而不是“$query”。

```
mysql_query($mysql_query); 
```

也只是一些旁注：

*   现在不应该真正使用 mysql_* 函数。看看[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。
*   在将输入插入数据库之前，您没有对其进行清理。这**不是**一个好主意——你让自己对 SQL 注入攻击敞开了大门。您应该转义字符串并将整数转换为整数。如果您遵循第一个建议并使用 PDO 或 mysqli，请考虑使用准备好的语句。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:30:16.787

请查找 SQL 注入并从 $_POST 中转义您的值，请 :) - 我猜 Javascript 重定向可以替换为带有“标头”的服务器端 PHP 重定向。

```
$mysql_query=("UPDATE hovedartikler SET 
tittel='" . $_POST['tittel'] . "', ingress='" . $_POST['ingress'] . "', tekst='" . $_POST['tekst'] . "', forfatter='" . $_POST['forfatter'] . "', bildetekst='" . $_POST['bildetekst'] . "', file='" . $_FILES['pic'] . "' WHERE artikkelID='$id'")
or die (mysql_error());

mysql_query($query); 
```

你有一个带有更新语句的变量“$mysql_query”。但是您将变量“$query”发送到 mysql_query 函数。您不应该将 $mysql_query 变量发送到 mysql_query 函数吗？也许更好的变量名会有所帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T22:27:40.680

对于开始**停止**使用`mysql_*`函数并开始使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)和带有绑定值的准备好的语句，否则您将面临[SQL 注入攻击](http://php.net/manual/en/security.database.sql-injection.php)。

其次，现在在设置变量时更改`mysql_query($query)`并`mysql_query($mysql_query)`删除实际查询和 die 语句周围的括号。您正在尝试运行保存的查询，`$query`但 UPDATE 查询实际上保存在`$mysql_query`

它应该看起来更像这样：

```
$mysql_query = "UPDATE hovedartikler SET 
tittel='" . $_POST['tittel'] . "', ingress='" . $_POST['ingress'] . "', tekst='" . $_POST['tekst'] . "', forfatter='" . $_POST['forfatter'] . "', bildetekst='" . $_POST['bildetekst'] . "', file='" . $_FILES['pic'] . "' WHERE artikkelID='$id'";

mysql_query($mysql_query); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T22:32:09.483

我不知道这是否是原因，但您在两个文件中使用了不同的引号。

在得到：

```
"' . $getid . '"' 
```

并且在设置中

```
WHERE artikkelID='$id'" 
```

artikkelID 是什么数据类型？

如果它是一个 int，则第一个将作为双引号起作用，它不是字符串引号，而是一个“分组”引号，可用于包含带有保留字名称的列

最后一个不能用作单引号 IS 字符串引号，并且您不能将字符串用于 int 列。

例如

我可以像这样查询一个 int 列

```
WHERE id > "20" 
```

但不是这样

```
WHERE id > '20' 
```

而对于字符串列

```
WHERE name = "Hello World" 
```

将尝试将名称列与 Hello World 列匹配，而不是 Hello World 字符串

# ios - UIButton 没有响应

> ID：15670698
> 
> 赞同：-3
> 
> 时间：2013-03-27T22:24:30.547
> 
> 标签：ios, objective-c, xcode

我以编程方式创建了一个 UIButton 并向其添加了一个功能。它在运行时不响应。

```
 scrollViewFrame = CGRectMake(10, 110, 300, 40);
    loginBut = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    loginBut.frame = scrollViewFrame;
    loginBut.backgroundColor = [UIColor whiteColor];
    loginBut.titleLabel.font = [UIFont fontWithName:@"Trebuchet MS" size:33];
    [loginBut setTitleColor:[UIColor Gray] forState:UIControlStateNormal];
    [loginBut setTitle:@"Login" forState:UIControlStateNormal];
    [loginBut setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft];

    [loginBut addTarget:self
                          action:@selector(checkError)
                forControlEvents:UIControlEventTouchUpInside];
    self.loginBut = loginBut;

    [self.view addSubview:loginBut]; 
```

那个行动：

```
- (void)checkError {
    if ([dispName.text isEqualToString:@""]&&[pw.text isEqualToString:@""]) {
        UIAlertView *alertFailed = [[UIAlertView alloc]initWithTitle:@"\nError" message:@"1\. Display Name missing.\n2\. Password missing." delegate:self cancelButtonTitle:nil otherButtonTitles:nil, nil];
        [alertFailed show];
    }

} 
```

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:28:03.200

> ([dispName.text isEqualToString:@""]&&[pw.text isEqualToString:@""])

也许这些测试只是失败了。例如，也许`dispName.text`是零。这与等于空字符串不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:30:22.747

看看按钮是否响应首先添加

```
NSLog("checkError"); 
```

在方法的 if 语句之前

```
- (void)checkError; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:32:36.460

只需在方法中编写一个 NSLog() 即可 `- (void)checkError` 。如果它打印出来，那么你的情况出了点问题`if`。

否则只是尝试，

```
 [self.view bringSubViewToFront:loginBut];
 loginBut.userIntractionEnabled = YES; 
```

# javascript - 在加载所有内容之前不要显示任何内容

> ID：15670700
> 
> 赞同：0
> 
> 时间：2013-03-27T22:24:59.523
> 
> 标签：javascript, jquery, browser

我正在使用 JS Facebook Graph API 并希望加载带有个人资料图片的朋友列表，如果有很多朋友，这需要几秒钟。我想显示一个加载 div，一旦加载了所有内容，我想隐藏加载 div 并显示最友好的。我正在使用 JQuery 的 $(window).load 函数，但它似乎不起作用，加载 div 不显示，但仍然显示内容渲染。我认为这可能是因为我在页面中间发出 Facebook 请求，所以浏览器可能一开始就认为所有内容都已加载，但不知道如何解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:29:26.580

一旦你收到你从 Facebook 请求的数据，把你的整个页面放在一个`<div style="display:none;">`或简单地设置然后将它更改为 :block （使用 jQuery.show() 将起作用）。`<body style="display:none;">`

# ios - iOS 应用程序在更新后从通知中心消失

> ID：15670701
> 
> 赞同：2
> 
> 时间：2013-03-27T22:25:00.443
> 
> 标签：ios, push-notification, titanium, apple-push-notifications

我有一个使用 Titanium Studio 编写的 iOS 应用程序，通过 Urban Airship 使用推送通知、徽章和声音。在我上次更新后，升级的人在通知中心遇到问题。起初我的应用程序仍然出现在通知中心，但通常出现在应用程序名称下的“徽章、声音、横幅”已经消失。如果您进入通知中心的应用程序设置，则根本不存在更改这些内容的选项。当然，推送通知此时也不起作用。

现在，如果您重新启动手机或重新安装应用程序，通知中心的程序条目将完全消失。我发现在重新安装应用程序并重新启动手机足够多次后，通知中心中的条目将重新出现，并且推送将再次起作用。要求我们所有的用户都这样做当然是一件荒谬的事情。

即使这一切都在发生，我仍然会从手机收到正确的 APID，并且推送消息声称可以正确发送。手机只是不显示它们。

在一个全新的安装中，我已经尝试过一切都很好。

我完全不知道该去哪里。有什么建议么？

编辑1：这是代码的相关部分。我只从以前的版本中更改了一行，并且记录了从以前的版本中更改的唯一且唯一的代码行。

```
var Urbanairship = require("com.0x82.urbanairship");
Urbanairship.options = {
  APP_STORE_OR_AD_HOC_BUILD: true, 
  DEVELOPMENT_APP_KEY: "xxx",
  DEVELOPMENT_APP_SECRET: "xxx",
  PRODUCTION_APP_KEY: "yyy",
  PRODUCTION_APP_SECRET: "yyy",
  LOGGING_ENABLED: true,
  LOG_LEVEL: 5
};

  Ti.Network.registerForPushNotifications({
  types: [
    Ti.Network.NOTIFICATION_TYPE_BADGE,
    Ti.Network.NOTIFICATION_TYPE_ALERT,
    Ti.Network.NOTIFICATION_TYPE_SOUND
  ],
  success: function(e){

    var token = e.deviceToken;
    Urbanairship.autoBadge = true;
    Urbanairship.pushEnabled = true; //Added this line, only line to change
    Urbanairship.registerDevice(token);
    userData.pushID = token; //save pushid
    Ti.App.Properties.setString('userData', JSON.stringify(userData));
  },
  error: function(e){
    alert("The Push Servers appears to be down. Please restart the app and try again");
    if(DEBUG == true){Ti.API.debug("Apple Push Error: "+e.error)}
  },
  callback: function(e){
  pushReceived(e.data.type);
  }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:30:54.957

如果通知设置消失了，则不太可能是代码问题。该代码只能请求通知，不能完全更改设置。

您的更新可能是使用较旧的配置文件构建的，该配置文件未启用推送。在配置文件中找不到“aps-environment”标志，当应用程序尝试注册时，它将在 xcode 控制台中显示此错误： [//support.urbanairship.com/customer/portal/articles/60710- can-t-get-a-device-token-%22no-valid-aps-environment-entitlement-%22-seen-in-console](https://support.urbanairship.com/customer/portal/articles/60710-can-t-get-a-device-token-%22no-valid-aps-environment-entitlement-%22-seen-in-console)

如果这是问题所在，为了安全起见，您可以从 xcode 安装中删除现有的配置文件，然后从门户修改并重新下载配置文件，然后重新构建并重新提交应用程序。

# performance - 我应该将代码分解为尽可能多的功能吗？

> ID：15670708
> 
> 赞同：1
> 
> 时间：2013-03-27T22:25:46.223
> 
> 标签：performance, oop, class, function, design-patterns

假设我有一个以伪代码登录用户的功能

```
def login():
    # find user in db
    # check if user exists
    # check password
    # login user 
```

每个动作都应该是它自己的功能吗？还是应该所有代码都留在那儿？

编辑：我问这个是因为我通常只是把我所有的代码放在一个函数中，但是我的一个朋友把他需要做的所有事情放在多个函数中，然后在他写下的函数中填写空白

前任。他会这样写：

```
def login():
    findUser()
    checkUser()
    checkPass()
    userLoggedin() 
```

然后他会创建这些函数并填充它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:27:56.337

我的建议是：

将其分解为有意义的、可重用的函数。当您的代码库增长时，这将是最有用的维护。

```
# find user in db         => re-usable
# check if user exists    => No. If you find it, it exists. So you don't need that.
                             If you don't find it, it does not. So both should be the same.
# check password          => re-usable
# login user              => re-usable 
```

*注意：有一个 WWDC 2012 会议视频，标题为：*

**基础知识+习惯：让您的软件项目经久不衰**

*你可以看。目标受众主要是 MAC 开发人员，但他们的许多建议也适用于其他面向对象的语言。您需要一个免费的 MAC 开发者帐户才能访问它。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:29:08.083

我会说是的，从 Visual Studio 的角度来看，它们应该被分成单独的项目。

查找用户 - 数据存储库

检查用户是否存在 - 可能是模型或业务层

检查密码、模型或业务层

登录 - 业务层

这里的目的是将代码分组为逻辑关注点。

# computer-science - 二次探测

> ID：15670712
> 
> 赞同：0
> 
> 时间：2013-03-27T22:26:06.403
> 
> 标签：computer-science

在用于解决哈希冲突的二次探测方法中，H(k) =h(k) + c1*i^2 + c2*i。

我需要一些帮助来确定如何确定 c1 和 c2 的值，即如何确保访问哈希表的所有插槽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:37:30.117

令 ht_size = 哈希表槽数。我假设你的意思是

```
h(k) + c1*i^2 + c2*i % ht_size 
```

c1=0 和 c2=1 将起作用；）

c1=0 和 c2 与 ht_size 互素也有效。1 是任意数的互质数。如果 ht_size 不是偶然的相同素数，素数也是很好的候选。

为什么这样的设置会访问所有插槽？如果 c1=0 且 c2 与 ht_size 互质，则 ggt(c2, ht_size) == 1。换句话说，在群（代数群论）中，c2 是一个生成器。这意味着`c2**i`将生成从 0 到 ht_size - 1 的所有数字。`**`我的意思是幂运算符，即应用组的运算符 i 次。群的算子是`+`，因此`c2**i`在群论记法中对应于`c2*i`在正规记法中。

我希望这能让您了解如何开始搜索 c1 和 c2 的组合，其中 c1 != 0。

# c - 使用 gethostbyname

> ID：15670713
> 
> 赞同：2
> 
> 时间：2013-03-27T22:26:23.620
> 
> 标签：c

我刚刚开始使用 C 进行编程。这应该是一个简单的程序，但我遇到了分段错误。我会很感激任何帮助

问候，

胡安

```
#include <string.h>

#include <stdio.h>
#include <stdlib.h>
#include<errno.h>
#include<netdb.h>
#include<sys/socket.h>
#include<netinet/in.h>

int main(int argc, char **argv)
{

  struct hostent *hp;
  struct in_addr **addr_list; 

  if ((hp = gethostbyname("www.yahoo.ca")) == NULL)
  {
    printf("gethostbyname() failed\n");
  }
  else
  {
    printf("Official name = %s\n", hp->h_name);

    addr_list = (struct in_addr **)hp->h_addr_list;

    unsigned int i = 0;
    while (addr_list[i] != NULL)
    {
      printf("%s\n",inet_ntoa(*((struct in_addr *)hp->h_addr)));
      i++;

    }
  }
} 
```

以下是程序的调用方式：

```
administrator@ubuntu:~/Documents$ ./a.out
Official name = any-rc.a01.yahoodns.net
Segmentation fault (core dumped)
administrator@ubuntu:~/Documents$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:28:58.123

而不是`hp->h_addr`你可能想要：

```
printf("%s\n", inet_ntoa(*addr_list[i])); 
```

* * *

作为旁注，[`gethostbyname`](http://pubs.opengroup.org/onlinepubs/009695399/functions/gethostbyname.html)已过时：您应该使用[`getaddrinfo`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getaddrinfo.html). 您会注意到，新版本的标准甚至没有提到`gethostbyname`.

# java - “类型未定义的方法”错误，适用于 upcast - 发生了什么？

> ID：15670715
> 
> 赞同：1
> 
> 时间：2013-03-27T22:26:26.760
> 
> 标签：java, inheritance

这让我很难过 :) 代码正在运行，所以这更像是一个心理挑战。我正在尝试在 GWT TabBar 上设置单个选项卡的样式。这个小部件的设置有点特殊——Tab 类被定义为 TabBar 类内部的一个内部接口，它也由 TabBar 中的一个名为 ClickDelegatePanel 的内部类实现。TabBar 的完整代码在这里

[https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/TabBar.java](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/TabBar.java)

关键位（我认为！）是接口..

```
public interface Tab extends HasAllKeyHandlers, HasClickHandlers, HasWordWrap { 
```

和实施...

```
private class ClickDelegatePanel extends Composite implements Tab { 
```

添加样式的方法是**addStyleName**，它由 Composite 的父 UIObject 提供。如果我从我的 TabBar 获得一个特定的 Tab 并尝试使用此方法，我会在 Eclipse 中得到一个错误（和一个编译错误）。代码是这样的...

```
Tab myTab = tabPanel.getTabBar().getTab(3);
myTab.addStyleName("gwt-TabBarItem-selected"); 
```

但是，如果我向上转换为 UIObject，它会起作用......

```
UIObject myTab = (UIObject) tabPanel.getTabBar().getTab(3);
myTab.addStyleName("gwt-TabBarItem-selected"); 
```

Eclipse 甚至意识到了这一点，并提供了一个快速修复建议，该建议可以进行更临时的向上转换......

```
Tab myTab = tabPanel.getTabBar().getTab(3);
((UIObject) myTab).addStyleName("gwt-TabBarItem-selected"); 
```

我有一个很好的旧谷歌，无法弄清楚发生了什么。完全隐藏超类方法应该是不可能的，对吧？任何关于向上转换的讨论似乎都说它的主要用途是选择重载方法的超类版本 - 但 addStyleName 没有重载。我只能假设它与 Tab 的定义方式有关，因为它是由内部类实现的内部接口，该内部类扩展了我所追求的超类。那么，这里发生了什么？为什么使用接口类型会阻止我从实现类访问超类方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:31:55.027

`Composite`扩展`UIObject`，**不是** `Tab`。您的引用是一个`Tab`对象，而不是 a `ClickDelegatePanel`（这是 a `Composite`，因此是 a `UIObject`）。Tab 接口没有声明 addStyleName，这是 Eclipse 告诉您的。您**碰巧**能够在这里成功地将 Tab 转换为 UIObject，但这并不能由类型层次结构保证——我可以编写一个实现 Tab 的类，它不是 UIObject。在这种情况下，演员阵容将失败。

# java - 如何使用 java 程序停止正在运行的 tomcat？

> ID：15670717
> 
> 赞同：2
> 
> 时间：2013-03-27T22:26:34.547
> 
> 标签：java

我正在编写一个更新程序，它需要停止正在运行的 tomcat。我尝试从 java 调用 net stop SERVICENAME 但它不起作用。它返回错误代码 2 并中止，我猜这是出于安全原因。有人知道我该如何解决这个问题。我可以定义 java 程序以管理员身份运行并因此具有必要的权限，还是有其他方法？

这是我的代码：

```
String command = "cmd.exe /C net stop myservice";
Process p;
p = Runtime.getRuntime().exec(command);
p.waitFor();
log.info("exit value  was "    +p.exitValue()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:34:29.413

使用 SC（服务控制）命令，它为您提供了比启动和停止更多的选项。你甚至可以在远程机器上启动/停止服务。

用法：sc server [命令] [服务名称]

# ruby-on-rails - 运行 rvm 要求时出错

> ID：15670718
> 
> 赞同：8
> 
> 时间：2013-03-27T22:26:46.737
> 
> 标签：ruby-on-rails, ruby, ubuntu, rvm

我按照 [本教程](http://blog.sudobits.com/2012/05/02/how-to-install-ruby-on-rails-in-ubuntu-12-04-lts/) 在运行时在 ubuntu 12.04 上安装 rvm `rvm requirements`，我收到以下消息

```
Installing requirements for ubuntu, might require sudo password.
Running 'apt-get --quiet --yes update' would require sudo.
Cowardly refusing to continue, please read 'rvm autolibs'.
Updating repositories
Missing required packages: libgdbm-dev, libffi-dev.
Cowardly refusing to continue, please read 'rvm autolibs'. 
```

运行时我收到相同的消息`rvm install 1.9.3`

任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T23:38:06.437

有时官方文档比博客更可靠。查看[rvm](https://rvm.io/rvm/install/)文档。博客中安装 rvm 的命令是：

```
curl -L get.rvm.io | bash -s stable 
```

官方文档建议：

```
\curl -L https://get.rvm.io | bash -s stable --autolibs=3 --rails 
```

可能这将解决您使用 autolibs 的问题，例如在[那个问题](https://stackoverflow.com/questions/15643205/problems-installing-ruby-1-9-3-with-rvm)中发生的情况相同。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T00:06:11.520

来自[https://rvm.io/rvm/autolibs](https://rvm.io/rvm/autolibs) - 有两种模式对您有用：

1.  `rvm autolibs read-only`- 它将完成所有步骤，只显示所需的命令/缺少的库
2.  `rvm autolibs enable`- 它会为你安装所有东西，它可能需要 sudo 密码，所以像 capistranos 这样的工具的一个不错的技巧是：

    ```
    rvm autolibs read-only
    sudo rvm --autolibs=enabled requirements ruby-2.0.0
    rvm install ruby-2.0.0 
    ```

关于 autolibs 的文章[https://blog.engineyard.com/2013/rvm-ruby-2-0](https://blog.engineyard.com/2013/rvm-ruby-2-0)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-29T11:30:25.433

我遇到了某种相同的错误：

`Missing required packages: libreadline6, libreadline6-dev, libyaml-dev, libffi-dev. Cowardly refusing to continue, please read 'rvm autolibs'.`

即使 Ubuntu 软件中心显示“libreadline6、libreadline6-dev 等”已安装。

我得到了这个固定的禁用自动库：

`rvm autolibs disable`

ruby install 1.9.X 成功了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T10:50:22.027

下面的解决方案是解决rvm要求错误返回100

如果注释了任何 deb 命令，则`/etc/apt/sources.list`尝试取消注释该命令`/etc/apt/sources.list`

命令是：

```
$sudo vi /etc/apt/sources.list 
```

如果问题没有解决，则`sources.list`用其他 Ubuntu 替换文件`sources.list`

命令是：

```
$mv <file path of sources.list from other Ubuntu machine> /etc/apt/sources.list 
```

**请在执行此操作之前进行备份**

命令是：

```
$cp /etc/apt/sources.list sources_backup.list 
```

*这个时候问题应该解决了，如果不是重新安装Ubuntu。*

注意：如果sources.list 文件损坏，那么安装其他软件包会出现问题。

# twitter-bootstrap - 如何使 twitter bootstrap 扩展超过 1170px？

> ID：15670719
> 
> 赞同：0
> 
> 时间：2013-03-27T22:26:47.370
> 
> 标签：twitter-bootstrap

我有一个 span13 行（我们可以这样做吗？...看起来更好）

我更重要的问题是页面只能缩放到 1200 左右，尽管 twitter 引导页面说

> 添加响应式 CSS 文件后，网格会根据您的视口调整为 724 像素和 1170 像素宽

有没有办法让它适应2000px？还是我坚持使用 1170px 作为我的最大尺寸？

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:37:41.587

计算出您想要的大小，包括列大小和边距，然后使用 Bootstrap 自定义页面创建新的 css 文件以供使用：

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

我建议坚持 12 列，因为这就是 Bootstrap 的工作方式。

# objective-c - NSFilePresenter 方法永远不会被调用

> ID：15670720
> 
> 赞同：7
> 
> 时间：2013-03-27T22:26:49.690
> 
> 标签：objective-c, cocoa, nsfilecoordinator

我正在尝试编写一个简单的（玩具）程序，该程序使用 NSFilePresenter 和 NSFileCoordinator 方法来监视文件的更改。

该程序由一个加载（硬编码）文本文件的文本视图和一个按钮组成，该按钮将保存文件的任何更改。这个想法是我有两个实例正在运行并且保存在一个实例中会导致另一个实例重新加载更改的文件。

加载和保存文件工作正常，但从未调用 NSFilePresenter 方法。它完全基于一个名为 FileManager 的类，它实现了 NSFilePresenter 协议。代码如下：

界面：

```
@interface FileManager : NSObject <NSFilePresenter>
@property (unsafe_unretained) IBOutlet NSTextView *textView;

- (void) saveFile;
- (void) reloadFile;

@end 
```

执行：

```
@implementation FileManager
{
    NSOperationQueue* queue;
    NSURL* fileURL;
}

- (id) init {
    self = [super init];
    if (self) {
        self->queue = [NSOperationQueue new];
        self->fileURL = [NSURL URLWithString:@"/Users/Jonathan/file.txt"];
        [NSFileCoordinator addFilePresenter:self];
    }
    return self;
}

- (NSURL*) presentedItemURL {
    NSLog(@"presentedItemURL");
    return self->fileURL;
}

- (NSOperationQueue*) presentedItemOperationQueue {
    NSLog(@"presentedItemOperationQueue");
    return self->queue;
}

- (void) saveFile {
    NSFileCoordinator* coordinator = [[NSFileCoordinator alloc] initWithFilePresenter:self];
    NSError* error;
    [coordinator coordinateWritingItemAtURL:self->fileURL options:NSFileCoordinatorWritingForMerging error:&error byAccessor:^(NSURL* url) {
        NSString* content = [self.textView string];
        [content writeToFile:[url path] atomically:YES encoding:NSUTF8StringEncoding error:NULL];
    }];
}

- (void) reloadFile {
    NSFileManager* fileManager = [NSFileManager defaultManager];
    NSFileCoordinator* coordinator = [[NSFileCoordinator alloc] initWithFilePresenter:self];
    NSError* error;
    __block NSData* content;
    [coordinator coordinateReadingItemAtURL:self->fileURL options:0 error:&error byAccessor:^(NSURL* url) {
        if ([fileManager fileExistsAtPath:[url path]]) {
            content = [fileManager contentsAtPath:[url path]];
        }
    }];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.textView setString:[[NSString alloc] initWithData:content encoding:NSUTF8StringEncoding]];
    });
}

// After this I implement *every* method in the NSFilePresenter protocol. Each one
// simply logs its method name (so I can see it has been called) and calls reloadFile
// (not the correct implementation for all of them I know, but good enough for now).

@end 
```

`applicationDidFinishLaunching`请注意，每次单击保存按钮时都会调用reloadFile并调用 saveFile （通过应用程序委托）。

唯一被调用（通过日志）的 NSFilePresenter 方法是 presentItemURL （当程序启动并加载文件时调用四次，单击保存时调用三次。在第二个实例中单击保存对第一个例子。

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-13T09:47:29.730

我在这个确切的问题上挣扎了很长一段时间。对我来说，唯一会被调用的方法是`-presentedSubitemDidChangeAtURL:`（我正在监视一个目录而不是一个文件）。我向 Apple 提出了一个技术支持问题，他们的回答是这是一个错误，我们现在唯一能做的就是`-presentedSubitemDidChangeAtURL:`在您监控目录时完成所有工作。不确定监视文件时可以做什么。

我会鼓励遇到此问题的任何人提交错误 ( [https://bugreport.apple.com](https://bugreport.apple.com) )，以鼓励 Apple 尽快解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-15T20:29:51.383

*（我意识到这是一个老问题，但是...... :)）*

首先，我注意到你没有`[NSFileCoordinator removeFilePresenter:self];`任何地方（它应该在`dealloc`）。

其次，你写道：

```
 // After this I implement *every* method in the NSFilePresenter protocol. Each one
    // simply logs its method name (so I can see it has been called) and calls reloadFile
    // (not the correct implementation for all of them I know, but good enough for now). 
```

你是对的：这是不正确的实现！你错了：这还不够好，因为对于像`accommodatePresentedItemDeletionWithCompletionHandler:`将完成块作为参数这样的方法来说，在实现它们时实际调用这个完成块是必不可少的，例如

```
 - (void) savePresentedItemChangesWithCompletionHandler:(void (^)(NSError * _Nullable))completionHandler
    {
        // implement your save routine here, but only if you need to!
        if ( dataHasChanged ) [self save]; // <-- meta code
        //
        NSError * err = nil; // <-- = no error, in this simple implementation
        completionHandler(err); // <-- essential!
    } 
```

我不知道这是否是您的协议方法没有被调用的原因，但这肯定是一个开始的地方。好吧，假设您还没有弄清楚过去三年中出了什么问题！:-)

# mysql - 慢查询日志中的查询，锁定时间太长

> ID：15670729
> 
> 赞同：0
> 
> 时间：2013-03-27T22:27:31.567
> 
> 标签：mysql

我正在查看慢查询日志，发现以下查询花费了太多时间

```
# Query_time: 4875.960250  Lock_time: 4819.281516 Rows_sent: 1  Rows_examined: 1
use mydb;
SET timestamp=1358591898;
SELECT `Currency`.`rate` 
FROM `currencies` AS `Currency`   
WHERE `Currency`.`currency` = 'usd '    
LIMIT 1; 
```

我应该怎么做才能优化查询时间，以及如何最小化锁定时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:01:03.950

您可以尝试一件事，如果表是 MyISAM 类型，则将其更改为 InnoDB，InnoDB 支持在行级别上锁定，这意味着如果您正在更新表，则其他查询不必等到操作完成，如果是不访问同一行。

否则查询看起来很简单，我不希望货币表会经常更改。

如果不是这种情况，请检查缓存是否配置正确，例如使用[https://launchpad.net/mysql-tuning-primer](https://launchpad.net/mysql-tuning-primer)

# ruby - 红宝石。在后台运行脚本，例如在 Node 中使用 Forever

> ID：15670731
> 
> 赞同：0
> 
> 时间：2013-03-27T22:27:33.660
> 
> 标签：ruby, node.js

现在使用守护进程，但我不想编写守护进程代码，只想要一个脚本，在服务器被杀死时重新启动服务器并存储日志。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:08:01.603

我会尝试[上帝](http://godrb.com/)的宝石。

其他可能对您有用的信息：

1.  [上帝在 Github 上](https://github.com/railscasts/130-monitoring-with-god)：

2.  [Railscast](http://railscasts.com/episodes/130-monitoring-with-god)

# c# - 意外的乐观并发异常

> ID：15670732
> 
> 赞同：0
> 
> 时间：2013-03-27T22:27:34.317
> 
> 标签：c#, dataset, optimistic-concurrency

我尝试更新我的对象的一个​​字段，并立即将其保存到数据库中。

```
using (var ctx = new DataModel(_connectionString))
{
    var MyObject it = ctx.MyObjects.Where(someConstraint).ToList()[0];
    try
    {
        //update check time
        ctx.Refresh(RefreshMode.StoreWins, it); //making sure I have it
        ctx.AcceptAllChanges(); // in case something else modified it - seems unnecessary
        it.TimeProperty= DateTime.UtcNow; //Setting the field
        ctx.DetectChanges(); //seems unnecessary
        ctx.SaveChanges(SaveOptions.AcceptAllChangesAfterSave); //no SaveOptions changed the behavior
    }
    catch (OptimisticConcurrencyException)
    {
        _logger.DebugFormat(workerClassName + ": another worker just updated the LastCheckTime");
    }
    //Do some other work and/or sleep
} 
```

当我在具有 2 个或更多实例的 Azure 模拟器中运行它时，我会在这里得到很多 OptimisticConcurrencyExceptions。

我正在尝试刷新对象，更新其中一个字段，然后将这些更改推送到数据库。但是，乐观并发阻止了我。

注意：乐观并发是在我从未接触过的 TimeStamp 字段上设置的。

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:35:49.813

在这个 try 块中可能有多个线程，在它们都从数据库刷新之后但在它们中的任何一个保存更改之前修改它们自己的同一实体的副本。

尝试这个：

```
using (var ctx = new DataModel(_connectionString))
{
    bool saved = false;

    do
    {
        var MyObject it = ctx.MyObjects.Where(someConstraint).ToList()[0];

        try
        {
            it.TimeProperty= DateTime.UtcNow; //Setting the field
            ctx.SaveChanges(SaveOptions.AcceptAllChangesAfterSave); 

            saved = true;
        }
        catch (OptimisticConcurrencyException)
        {
            _logger.DebugFormat(workerClassName + ": another worker just updated the LastCheckTime");

            ctx.Refresh(RefreshMode.StoreWins, it);
            ctx.AcceptAllChanges();
       }
    } while( !saved )
    //Do some other work and/or sleep
} 
```

如果这对您有用，请更改 while 条件以限制尝试次数。

# ruby - 哪个更快，单独的条件，或与 elsif 结合？

> ID：15670736
> 
> 赞同：1
> 
> 时间：2013-03-27T22:27:49.523
> 
> 标签：ruby

在 ruby​​ 中，伪代码之间有什么区别，例如：

```
if n > 2:
   do something to A
end

if n > 4:
   do something to B
end

if n >25:
   do something to C
end 
```

对比

```
if n>2 && n <4:
  do something to A
elif n >4 && n < 25:
  do something to A and do something to B
elif n > 25:
  do something to A and B and C
end 
```

如您所见，它们做同样的事情，但如果您有很多`if then`语句，则更容易阅读和编写。但是，如果多个`if`块占用更多的处理能力，那么以这种方式编写它是不值得的。

因此我想知道两者之间是否有区别？概念性答案很好，我不需要对任何东西进行基准测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:49:13.150

1/它们不等价。

第一条语句相当于

```
if n>2 && n <= 4:
  do something to A
elif n > 4 && n <= 25:
  do something to A
  do something to B
elif n > 25:
  do something to A
  do something to B
  do something to C
end 
```

如果`do something to A`返回`nil`or `false`，您的第二条语句将不会执行`do something to B`。

而且你忘了处理像`n = 4`and之类的极端情况`n = 25`。

2/ 在 99.9% 的情况下，您应该选择更易于阅读/理解/调试的版本。除非此代码每秒运行 1000000 次，否则这无关紧要。正如您所看到的，您已经通过尝试过早地对其进行优化来创建 2 个潜在错误 :)

3/ 在性能方面，简短的回答是：这取决于你的数据。

长答案是：您必须尝试预测`n`大多数情况下的范围。您可以只计算比较次数：

`n < 2`: 语句 1：3 次比较 - 语句 2：3 次比较

`2 < n <= 4`: 语句 1：3 次比较 - 语句 2：2 次比较

`4 < n <= 25`: 语句 1：3 次比较 - 语句 2：4 次比较

`25 < n`: 语句 1：3 次比较 - 语句 2：5 次比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:03:56.203

不，没有区别。这两个程序都将返回语法错误，并且不会运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:34:22.397

假设您无法预测“最常见的路径”（例如，知道绝大多数情况下 n 在 2 和 4 之间），我怀疑第二种方法是否更有效；进行的比较次数将相似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T22:40:14.320

好吧，第一个选择减少了逻辑错误的可能性。在第二个选择中，如果`n == 4`或会发生什么`n == 25`？是的，你可以很容易地解决这个问题，但你必须认识到这种可能性。

我假设“做某事”伪代码块只是方法调用，所以你不会重复你的文本。这是一个很难回答的问题，因为这两种方法都不涉及嵌套的 if-else 子句。if 子句的成本差异很小，我不会考虑这一点，并且“做某事”块中的重复是相同的方式。但是，我可以想象一个更清晰的方法。A、B 和 C 是否都有类似 A.handle(n)、B.handle(n) 和 C.handle(n) 的方法，如果 n <= 2，第一个不执行任何操作，如果 n <= 2，则第二个不执行任何操作n <= 4，如果 n <= 25，第三个什么都不做？

# java - 如何使用 mvn test 识别失败的测试

> ID：15670739
> 
> 赞同：3
> 
> 时间：2013-03-27T22:27:57.253
> 
> 标签：java, maven-surefire-plugin

我已经设置了 maven 和 surefire 来运行单元测试。测试类被配置为并行运行；即类

有时当我运行“mvn test”时，一些测试会因超时而失败。但是，surefire 不会记录超时发生时正在运行的测试。它只记录已完成测试的详细信息。

超时似乎是某种死锁，并不总是重现。

当超时发生时，如何找出哪些测试正在运行？有没有办法改变surefire本身的日志级别，以便在它开始从新类运行测试时转储一些消息？

我正在使用：Java：1.6，Maven：3.0.3，Surefire：2.14

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:49:26.940

在调试模式下执行测试

mvn -X 测试

# autohotkey - 使用 runwait 时的多行命令，%comspec% /c %mycmd% >%Log%

> ID：15670741
> 
> 赞同：0
> 
> 时间：2013-03-27T22:27:57.423
> 
> 标签：autohotkey

我有一个看起来像这样的脚本：

```
tempLog = %temp%\tmp_ahklog.txt
Loc = C:\
mycmd = ver
runwait,%comspec% /c %mycmd% >%tempLog%, %Loc%

IfExist, %tempLog%
    run, Notepad.exe %tempLog% 
```

我该如何做才能输入多行命令？例如，我想运行`ver`and `whoami`，并让两个命令的返回都在文本文件中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:53:37.487

您不能只运行两次命令并将两个结果通过管道传输到同一个 txt 文件中吗？您的 /c 是正确的，因此运行此命令不应保持 CMD 框打开（已验证）。第一个 > 创建一个空白的 %templog% 文件，第二行中的 >> 附加到 %templog% 文件上。我过去执行了 DOS 命令，使用没有 %comspec% 的 runwait，但是这些 DOS 命令存储在一个 .bat 文件中，所以我实际上运行了：`runwait, abc.bat`它会短暂打开一个 CMD 框，并在 .bat 脚本有后立即关闭它完成的。

```
tempLog = C:\Temp\tmp_ahklog.txt
RunWait, %comspec% /c whoami > %tempLog% 
RunWait, %comspec% /c ver >> %tempLog %
IfExist, %tempLog%
    run, Notepad.exe %tempLog% 
```

您甚至可以像这样将两个 DOS 命令组合在一行中：

```
RunWait, %comspec% /c whoami > C:\Temp\Cmd.txt && ver >> C:\Temp\Cmd.txt 
```

# php - 带有 PHP 5.4 和 eval 的 Modx Evo

> ID：15670745
> 
> 赞同：0
> 
> 时间：2013-03-27T22:28:02.160
> 
> 标签：php, content-management-system, eval, modx, modx-evolution

Modx 和最新版本的 PHP 有点问题。

这是 Modx 的一个非常旧的版本（不要问 - 我有完全相同的想法，不在我的控制范围内）。该网站在 PHP 5.2 上运行良好。

问题是网络主机正在升级到 PHP 5.4 - 结果网站完全崩溃了。我无法解决的一个问题是在“evalSnippet()”函数下的 manager/includes/document.parser.class.inc.php 中使用 eval，它调用了贬值的 eval() 函数。

我已经查看了将 Modx 升级到最新版本 1.0.9 的可能性，但是这仍然使用 eval() -> 即使它明确声明此版本支持 PHP 5.4。下面是代码：

```
function evalSnippet($snippet, $params) {
    $etomite= $modx= & $this;

    $modx->event->params= & $params; // store params inside event object
    if (is_array($params)) {
        extract($params, EXTR_SKIP);
    }
    ob_start();
    $snip= eval ($snippet);
    $msg= ob_get_contents();
    ob_end_clean();
    if ((0<$this->config['error_reporting']) && isset($php_errormsg))
    {
        $error_info = error_get_last();
        if($error_info['type']===2048 || $error_info['type']===8192) $error_type = 2;
        else                                                         $error_type = 3;
        if(1<$this->config['error_reporting'] || 2<$error_type)
        {
            extract($error_info);
            if($msg===false) $msg = 'ob_get_contents() error';
            $result = $this->messageQuit('PHP Parse Error', '', true, $type, $file, 'Snippet', $text, $line, $msg);
            if ($this->isBackend())
            {
                $this->event->alert("An error occurred while loading. Please see the event log for more information<p>{$msg}{$snip}</p>");
            }
        }
    }
    unset ($modx->event->params);
    return $msg . $snip;
} 
```

有没有解决的办法？有没有人设法让 Modx Evo 与 PHP 5.4 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:00:09.030

继续对原始帖子的评论...

`session_is_registered()`自 PHP 5.3 起已弃用。您需要检查您的代码片段并找出哪个正在使用此功能，然后将其替换为`isset($_SESSION['name_of_variable'])`.

找到它的最快方法是在 phpMyAdmin 中运行`%LIKE%`搜索`session_is_registered``modx_site_snippets table`

# php - 将上传的文件移动到文件夹中

> ID：15670747
> 
> 赞同：0
> 
> 时间：2013-03-27T22:28:07.690
> 
> 标签：php

我正在尝试将上传的文件移动到文件夹中，但我做不到。有人看到错误了吗？

我的 html 代码有这一行：

```
<form id="form" method="post" action="save_new_article.php" enctype="multipart/form-data"> 
```

这是php代码：

```
include("bd.php");
header('Content-type: text/html; charset=windows-1251');
$category = $_POST['category'];
$name = $_POST['name'];
$description = $_POST['full_description'];
$price = $_POST['price'];

$way = "../galery";
$file = $_FILES['photo']['tmp_name'];
$file_name = $_FILES['photo']['name'];
$file_name = ext($file_name);

$way .= "/".$file_name;
move_uploaded_file($file,$way); 
```

如果有人可以检测到错误，请通知我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:30:48.153

将最后一行更改为：

```
move_uploaded_file($file, $way); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:38:20.433

您需要将最后一行更改为：

```
move_uploaded_file($file, $way); 
```

如果您查看[move_uploaded_file](http://php.net/manual/en/function.move-uploaded-file.php)的文档，您会看到第一个参数是文件当前所在的位置。又名`$_FILES['photo']['tmp_name']`，您已保存为`$file`.

# .net - 任务调度程序类在 XP 中不起作用

> ID：15670748
> 
> 赞同：0
> 
> 时间：2013-03-27T22:28:09.300
> 
> 标签：.net, c#-4.0

嗨，我有一个计划任务的程序。虽然这在 Windows7 机器上运行良好，但它在 XP 上引发错误。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using TaskScheduler;

namespace MyTaskScheduler
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                string STR_DateTimeFormat = "yyyy-MM-dd HH:mm:ss";
                string taskName = "MyTask";
                string taskFolder = "MyTaskFolder";

                Console.WriteLine("Creating task");
                ITaskService taskScheduler = new TaskSchedulerClass();
                taskScheduler.Connect(null, null, null, null);

                ITaskFolder rootFolder = taskScheduler.GetFolder(@"\");
                bool _found = false;
                foreach (ITaskFolder fol in rootFolder.GetFolders(0))
                {
                    if (fol.Name == taskFolder)
                        _found = true;
                }
                if (!_found)
                    rootFolder.CreateFolder(taskFolder, null);
                ITaskFolder folder = rootFolder.GetFolder("\\" + taskFolder);

                _found = false;
                foreach (IRegisteredTask tsk in folder.GetTasks(0))
                {
                    if (tsk.Name == taskName)
                        _found = true;
                }  
                if (_found)
                    folder.DeleteTask(taskName, 0);

                Console.WriteLine("Creating new task");
                ITaskDefinition taskDef = taskScheduler.NewTask(0);
                taskDef.RegistrationInfo.Description = "Opens notepad at the scheduled times";
                taskDef.RegistrationInfo.Author = "Monica";
                taskDef.Settings.Enabled = true;
                taskDef.Settings.Hidden = false;
                taskDef.Settings.DisallowStartIfOnBatteries = false;
                taskDef.Settings.WakeToRun = true;

                IWeeklyTrigger trigger = (IWeeklyTrigger)taskDef.Triggers.Create(_TASK_TRIGGER_TYPE2.TASK_TRIGGER_WEEKLY);
                //if (intWeekDays != 0)
                trigger.DaysOfWeek = (short)10;
                trigger.Id = "MyTimeSet";
                trigger.StartBoundary = DateTime.Now.Date.AddHours(10).AddMinutes(15).AddSeconds(20).ToString(STR_DateTimeFormat.Replace(" ", "T"));

                IExecAction action = (IExecAction)taskDef.Actions.Create(_TASK_ACTION_TYPE.TASK_ACTION_EXEC);
                action.Id = "MyRun";

                string actionFile = "notepad.exe";

                action.Path = String.Concat("\"", actionFile, "\"");

                action.Arguments = String.Format("argus \"{0}\"", "argument1");

                IRegisteredTask regTask = null;

                regTask = folder.RegisterTaskDefinition(taskName, taskDef, (int)_TASK_CREATION.TASK_CREATE_OR_UPDATE, null, null, _TASK_LOGON_TYPE.TASK_LOGON_NONE, "");

                Console.WriteLine("task created");                
            }
            catch (Exception e1)
            {
                Console.WriteLine(e1.ToString());
            }
        }
    }
} 
```

我在 XP 机器上运行这个程序时遇到的错误是：

```
System.Runtime.InteropServices.COMException (0x80040154): Retrieving the COM class     factory for component with CLSID {0F87369F-A4E5-4CFC-BD3E-73E6154572DD} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).   at TaskScheduler.Program.Main(String[] args) 
```

有人可以告诉我这里哪里出错了。

谢谢，莫妮卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:57:54.600

此代码使用的[任务计划程序 2.0](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383600%28v=vs.85%29.aspx)界面仅从 Windows Vista 开始可用。此代码将永远无法在 Windows XP 上运行。

一个后备选项是使用[Task Scheduler 1.0](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383581%28v=vs.85%29.aspx)接口，但由于可用功能存在很大差异，这可能还不够。在这种情况下，您无能为力，因为操作系统根本不提供您需要的服务。

# python - Python中表达式的执行顺序

> ID：15670751
> 
> 赞同：1
> 
> 时间：2013-03-27T22:28:21.757
> 
> 标签：python

我正在学习 python，这是一个我不太明白的代码：

```
text = 'zip is very zipped'
print text.find('zip', text.find('zip') + 1) 
```

现在，我知道这是完成的捷径：

```
text = 'zip is very zipped'
occur_once = text.find('zip')
print text.find('zip', occur_once + 1) 
```

我想知道，怎么做

```
print text.find('zip', text.find('zip') + 1) 
```

有效，Python 以什么顺序评估这些表达式？这种执行“命令”有名称吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:33:06.020

Python 使用[严格（急切）的评估*策略*](http://en.wikipedia.org/wiki/Strict_evaluation)：函数的参数总是在应用函数之前完全评估。评估*顺序*是[从左到右](http://docs.python.org/3.3/reference/expressions.html#evaluation-order)（评估分配时除外）：

不下降到属性查找：

1.  评估`text.find`（我们将结果命名为 F1）
2.  评估`'zip'`→ A1
3.  评估`text.find`→ F2
4.  评估`'zip'`→ A2
5.  调用`F2.__call__(A2)`（我们将调用返回值 R1） ( `text.find('zip')`)
6.  评估`1`→ A3
7.  调用`R1.__add__(A3)`（返回 R2） ( `R1 + 1`)
8.  调用`F1.__call__(A1, R2)`（返回最终结果） ( `text.find('zip', R2)`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:30:11.700

Python 将在函数调用中从左到右评估参数，然后执行函数本身。

[一般评价顺序是从左到右](http://docs.python.org/3.3/reference/expressions.html#evaluation-order)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T20:30:58.933

它被称为[运算符优先级](http://docs.python.org/2/reference/expressions.html#operator-precedence)和[评估顺序](http://docs.python.org/2/reference/expressions.html#evaluation-order)。在表达式中，运算符优先级适用，并且每个表达式都使用评估顺序。

该`text.find()`调用位于`+`加法运算符之前，因为它具有更高的优先级。

对于同等优先级的运算符，评估从左到右进行。在函数调用中，每个参数都是一个单独的表达式，因此它们是从左到右计算的。

# javascript - 将 JSON 结果列表获取到现有的 HTML 选择中？

> ID：15670753
> 
> 赞同：1
> 
> 时间：2013-03-27T22:28:38.770
> 
> 标签：javascript, jquery, html, asp.net-mvc-4

我有这个：

```
@Html.DropDownList("centres", (List<SelectListItem>)ViewData["centres"]) 
```

我需要在程序运行时使用 JQuery 使用 SQL 输入数据库的数据来更新它：

```
jQuery(function ($) {
    jQuery("body").on('click', "#create", function () {
        $.getJSON("/Centres/updateList", function (results1) {
// perform update here using results1 from jsonresult updateList in Controller class
        });
    });
}); 
```

results1 是我的 MVC 控制器类中的一个列表。我希望能够使用这些新结果编辑我现有的 html 下拉列表。目前它显示一个 selectListItems 列表，但在控制器类的 updateList 中，我正在创建一个新列表，基于我刚刚创建的新中心。我的 Controller 类方法如下所示：

```
public JsonResult updateList()
{
    List<SelectListItem> centres = new List<SelectListItem>();
    SqlConnection conn = new SqlConnection(@"Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Users\Michael\Documents\Visual Studio 2012\Projects\OneEightyWebApp\OneEightyWebApp\App_Data\OneHoldings.mdf;Integrated Security=True");
    SqlCommand cmd = new SqlCommand("SELECT Centre.Centre_Name, Count(Shop_No) AS Shop_Count FROM Centre LEFT JOIN Space ON Centre.Centre_Name = Space.Centre_Name GROUP BY Centre.Centre_Name;", conn);
    DataTable dt = new DataTable();
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    conn.Open();
    da.Fill(dt);
    conn.Close();
    for (int i = 0; i < dt.Rows.Count; i++)
    {
        centres.Add(new SelectListItem { Text = dt.Rows[i].ItemArray.GetValue(0).ToString(), Value = dt.Rows[i].ItemArray.GetValue(1).ToString() });
    }
    return Json(centres, JsonRequestBehavior.AllowGet);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:24:53.933

您可以使用 jquery 重建下拉列表

```
$.getJSON("/Centres/updateList", function (results1) {
   //Clear out the old values
   $("#centres").empty();
   //Add the input items back in
   $.each(results1, function (key, val) {
      $("#centres").append($("<option></option>").attr("value", val.Value).text(val.Text));
   });
}); 
```

使用 MVC 的优点之一是它生成的 html 非常简单，并且可以使用简单的 jQuery 命令轻松复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:04:23.477

您可以重复使用 attr 功能，因此您可以通过以下方式预先设置选择

```
if(val.Selected) {
  $("#centres").append($("<option></option>")
      .text(val.Text)
      .attr("value", val.Value)
      .attr("selected", "selected"));
} 
```

# android - android 应用程序登录到使用 facebook 登录的网站

> ID：15670755
> 
> 赞同：2
> 
> 时间：2013-03-27T22:28:53.743
> 
> 标签：android, facebook, facebook-login, android-facebook

我有一个使用 facebook 登录来登录自身的网站。我需要在安卓应用程序中登录我的网站。登录过程很正常：

```
1\. request to /auth/login
2\. redirect to facebook 
3\. response from facebook 
4\. redirect to /auth/login
5\. response from /auth/login has a set-cookie header which basically is all the authentication 
```

如何在应用程序中登录网站？ [例子](https://hisaab.herokuapp.com/auth/user)。使用开发者工具的网络面板来观察这个过程。

# python - Python中的内置函数用于检查文本文件中的标题

> ID：15670760
> 
> 赞同：0
> 
> 时间：2013-03-27T22:29:08.500
> 
> 标签：python, optimization

我希望检查在点（x、y、z 等）的文本文件中是否是***标题（True）***或***不是（False）***。我想知道 Python 中是否有内置函数或更好的方法尊重我自己的函数。

```
def check_header(filename, parse):
    with open(filename) as f:
        first = f.readline()
        line = first.rstrip().split(parse)
        try:
            float(line[0])
            return False
        except ValueError:
            return True 
```

我写了这个函数示例

```
a b c d
449628.46 6244026.59 0.47 1
449628.55 6244033.12 0.30 2 
449628.75 6244046.31 0.37 3 
449628.81 6244049.63 0.44 1 
449628.81 6244049.88 0.39 5 
449628.81 6244050.66 0.30 1 
449628.96 6244060.67 0.38 2 
449629.18 6244075.61 0.39 2 
449629.24 6244078.72 0.47 4 
449629.24 6244078.96 0.41 8 
449629.23 6244079.19 0.34 4 

check_header(filename, " ")
True

449628.46 6244026.59 0.47 1
449628.55 6244033.12 0.30 2 
449628.75 6244046.31 0.37 3 
449628.81 6244049.63 0.44 1 
449628.81 6244049.88 0.39 5 
449628.81 6244050.66 0.30 1 
449628.96 6244060.67 0.38 2 
449629.18 6244075.61 0.39 2 
449629.24 6244078.72 0.47 4 
449629.24 6244078.96 0.41 8 
449629.23 6244079.19 0.34 4

check_header(filename, " ")
False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:45:07.243

纯文本文件实际上并没有传统意义上的标题。这只是一个字符流。

如果这是二进制格式，您可以有一个严格的标题，并且任何读者都必须遵守该格式。我假设这是您创建的自定义格式，如果是这种情况，您已经有了一个很好的解决方案。

如果您想了解有关标头的更多信息，您应该查看 JPEG 标头规范，这很简单。
[http://www.fastgraph.com/help/jpeg_header_format.html](http://www.fastgraph.com/help/jpeg_header_format.html)

有关读取二进制 jpeg 标头的 python 代码示例，请参阅这篇文章。
[Python：检查上传的文件是否为jpg](https://stackoverflow.com/questions/266648/python-check-if-uploaded-file-is-jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:54:09.140

如果您可以将列命名为“3.5”，那么您的代码显然无法工作，所以我假设您不能。

这意味着整个事情有点过于复杂。实际上，您需要做的就是查看第一个字符是否是浮点数的有效浮点起始字符：

```
def check_header(filename):
    with open(filename) as f:
        first = f.read(1)
    return first not in '.-0123456789' 
```

对于空文件，这将返回`True`而不是引发异常，但除此之外，它应该适用于与原始代码完全相同的用例。

我通常不会提到这一点，但是由于您将问题标记为“优化”，我想您很在意：理论上，这段代码比您的代码要快，原因应该很明显，但在现实生活中，它几乎总是不会不同之处。根据`%timeit`我的机器上，`read`/之后的部分`readline`需要 244ns 而不是 2.6us。这比您预期的快 10 倍以上。但是`read`/`readline`部分需要 13.1us 与 13.2us 的文件位于 OS 磁盘缓存中，或者 39.7ms 与 39.7ms 用于远程驱动器上的文件。即使在最好的情况下，从文件中读取块到缓冲区的 I/O 成本也会超过处理它的成本（包括 中的额外处理`readline`和代码中的额外处理）。

# xampp - XAMPP 中的 Apache 无法启动

> ID：15670761
> 
> 赞同：0
> 
> 时间：2013-03-27T22:29:10.167
> 
> 标签：xampp

这是一条线索：当我访问 localhost 时，会出现 IIS7 的屏幕。我该如何禁用它，因为这可以确定在端口 80 上监听的是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:44:17.727

user382738 的另一个回答帖子为我解决了这个问题。控制面板 > 管理工具 > 服务 > 并将“WebClient”和“Web 部署代理服务”服务设置为禁用。然后我将配置更改为侦听端口 1234，因为端口 80 仍然无法正常工作。阿帕奇正在运行。在浏览器中输入“localhost:1234”，一切正常！

# php - strftime 日期错误

> ID：15670763
> 
> 赞同：6
> 
> 时间：2013-03-27T22:29:16.740
> 
> 标签：php, date, strftime

我正在使用 strftime 来显示未来的日期。

但是在使用的时候

```
strftime('%a., %d. %B %Y',time()+60*60*24*4) 
```

今天使用这个时，我得到的是 Mo., 0​​1\. April 2013 而不是 Su., 31\. March 2013。

（Unix 时间戳为 1364423120）

```
strftime('%a., %d. %B %Y',time()+60*60*24*3) 
```

显示正确的 Sa.，2013 年 3 月 30 日

三月的最后一天有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:52:10.863

时间戳表示当地时间 23:25:20。由于夏令时于 3 月 31 日生效，添加 96 小时将使 00:25:20 成为当地时间，因此比预期晚一天。使用 gmstrftime 代替 strftime 可以避免这个问题。

```
<?php

$timestamp = 1364423120;

echo strftime('%a., %d. %B %Y (%c %Z)', $timestamp)."\n";
echo strftime('%a., %d. %B %Y (%c %Z)', $timestamp +60*60*24*4)."\n";
echo gmstrftime('%a., %d. %B %Y (%c %Z)', $timestamp)."\n";
echo gmstrftime('%a., %d. %B %Y (%c %Z)', $timestamp +60*60*24*4)."\n"; 
```

给

```
Wed., 27\. March 2013 (Wed Mar 27 23:25:20 2013 CET)
Mon., 01\. April 2013 (Mon Apr  1 00:25:20 2013 CEST)
Wed., 27\. March 2013 (Wed Mar 27 22:25:20 2013 GMT)
Sun., 31\. March 2013 (Sun Mar 31 22:25:20 2013 GMT) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:44:48.887

检查您的时区。

使用以下代码查看您的代码生成的日期的时间、时间戳和时区。

```
echo strftime('%s %H:%M:%S %z %Z %a., %d. %B %Y',time()+60*60*24*4);
//Output: 1364769859 15:44:19 -0700 PDT Sun., 31\. March 2013 
```

## 编辑：

如果这确实是您所在地区 DST 的问题[北美的变化是几周前]，并且您只对日期的“日”部分感兴趣，那么我建议使用[`date_add()`](http://www.php.net/manual/en/datetime.add.php)而不是简单的算术，因为它需要考虑到 DST 的变化和计时的其他特性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T22:51:55.763

根据说明书

> strftime — 根据区域设置格式化本地时间/日期

如果您在使用它时指定一个语言环境，它会更好，以避免此类问题。

```
setlocale(LC_TIME, "de_DE");
strftime('%a., %d. %B %Y',time()+60*60*24*4) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T22:52:07.073

当我跑

```
echo strftime('%a., %d. %B %Y',time()+60*60*12*7) 
```

我有

```
Sun., 31\. March 2013 
```

所以这一天确实存在:) 我认为它与那天发生的夏令时变化有关。当您使用一整天（24 小时相乘）时，您将跳过时区更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-24T15:24:56.623

[Terje D.](https://stackoverflow.com/users/1577260/terje-d)正确地提到了您对 DST 的困惑。但我也想提一下使用 DateTime 的方法，我个人认为这更容易理解和使用

```
$dt = new DateTime('now', new DateTimeZone('UTC')); // creates a datetime object representing the current time in UTC
$dt->modify('+3 days'); // add 3 days to the datetime object
echo $dt->format('Y-m-d H:i:s')."\n"; // This will give you the time in english independent of the locale settings on your server
echo strftime('%a., %d. %B %Y', $dt->getTimeStamp()); // this will give you the time in your locale, which as mentioned before, will include DST 
```

# javascript - 如何使永久标记在openlayers中显示弹出窗口？

> ID：15670768
> 
> 赞同：2
> 
> 时间：2013-03-27T22:29:37.613
> 
> 标签：javascript, openlayers, openstreetmap

下午好，我正在向 OpenLayers 添加一个带有弹出窗口的书签，但我想让这个标记始终处于活动状态，而不仅仅是隐藏，也不需要点击显示。

```
 // popup successful, but the click event is on
    marker.events.register("click", marker, function(e){
        popup = new OpenLayers.Popup.FramedCloud(data.idunidad,
            marker.lonlat,
            new OpenLayers.Size(200,200),
            '<p>Info HTML</p>',
            null,true);
        mapa.addPopup(popup);
    }); 
```

没有鼠标事件的弹出窗口

```
 // popup without mouse event
    popup = new OpenLayers.Popup.FramedCloud(data.idunidad,
        marker.lonlat,
        new OpenLayers.Size(200,200),
        '<p>Info HTML</p>',
        null,true);
    mapa.addPopup(popup); 
```

在后者中我收到一个错误：未捕获的类型错误：无法读取 null 的属性“x”

我应该怎么做？

# postgresql - 使用 PostgreSQL 上的 IP 查询以获取子网

> ID：15670772
> 
> 赞同：3
> 
> 时间：2013-03-27T22:30:01.527
> 
> 标签：postgresql, networking

我有一个 PostgreSQL 表，其中有一列（文本类型）'ip_port'。此列的值如下：

167.123.24.25:59874

这是IP：端口

我正在尝试编写一个查询来列出这些 IP 中的所有子网以及每个子网中的 IP 计数。在 Postgres 中有一种优雅的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:06:05.343

如果您拥有的唯一信息是 IP 地址，则您无法在 PostgreSQL 或任何其他工具中执行此操作。您还必须知道：

*   网络的广播地址；
*   网络子网掩码或掩码前缀长度；或者
*   正在使用基于预 CIDR 类的地址分配

考虑一个给定的 IP 实际上是多个不断增加的网络的成员。对于*本地*基于以太网的 IP 网络，有一个由子网掩码定义的广播域，但也有一组嵌套的越来越广泛的路由聚合域，其中一些在公共 Internet 上可见，而另一些在公共 Internet 上可见。它们是内部网络专用的。“公共”和“私人”之间的界限可能很模糊；例如，在我的 ISP 网络中，他们的大型网络块被分成更小的块，这些块从外部世界看不到，但对 ISP 的客户可见。

例如，根据使用该`sipcalc`工具的一些快速计算，167.123.24.25 的网络的非详尽列表可能是：

*   `167.123.24.25/32`（主机本身）
*   `167.123.24.25/28`: (一个常见的 ISP 分配): usable `167.123.24.17 - 167.123.24.30`, netmask`255.255.255.240`
*   `167.123.24.25/24`: (一个常见的 LAN 子网大小): usable `167.123.24.1 - 167.123.24.254`, netmask`255.255.255.0`
*   `167.123.24.25/20`:（中级路由聚合）：可用`167.123.16.1 - 167.123.31.254`，网络掩码`255.255.240.0`
*   `167.123.24.25/16`: 根据 whois 对该地址块的顶层 APNIC 分配): usable `167.123.0.1 - 167.123.255.254`, netmask`255.255.0.0`

如果您`traceroute`使用该地址，请考虑这些路由器中的任何一个可能（但也可能不是）成为该地址成为更窄、更具体子网的一部分的点。请参阅Wikipedia 上[的无类域间路由](http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing)。

这一切都在您考虑 NAT（blech）和内部 WAN 路由之前。167.123.24.25 可能是用于 NAT 主机的整个隐藏网络的路由器。这些主机从外部对您来说是不可见的，没有*极其*复杂的被动映射，只有沿着路由路径靠近它们的人才能做到这一点。

要了解有关地址网络的更多信息，您必须进行一些认真的探索，以找出哪些地址可能被视为广播地址。当然，大多数路由器都会过滤来自本地路由域之外的发往广播地址的数据包，因此您可能无法区分“主机不存在”、“是广播地址”和“主机存在但过滤器”之间的区别我用来探测的数据包”。这样的探测速度很慢，而且还会让网络所有者对你发脾气。由于这个网络归美国公共工程部所有，我建议不要让他们脾气暴躁。

# c# - RichTextBox 文本颜色

> ID：15670783
> 
> 赞同：-1
> 
> 时间：2013-03-27T22:30:28.780
> 
> 标签：c#, forms, richtextbox

我创建了 RichTextBox 并添加了以下代码：

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
    {
        //( )
        int selectionStart = richTextBox1.SelectionStart;
        string helpText = richTextBox1.Text;
        int closerPos;

        for (int i = 0; i < helpText.Length; i++)
        {
            if (helpText[i] == '(')
            {
                selectionStart = richTextBox1.SelectionStart;
                closerPos = helpText.Substring(i).IndexOf(')') + i;

                helpText = helpText.Substring(i + 1, closerPos - i - 1);
                richTextBox1.Text = richTextBox1.Text.Remove(i + 1, closerPos - i - 1);

                richTextBox1.Select(i + 1, 0);
                richTextBox1.SelectionColor = Color.Red;
                richTextBox1.SelectedText = helpText;
                richTextBox1.SelectionColor = Color.Black;

                helpText = richTextBox1.Text;
                richTextBox1.SelectionStart = selectionStart;
            }
        }
    } 
```

此代码应为 ( ) 之间的文本着色。例如：

> “嗨（需要着色）文本（sdadsasd）”

( ) 之间的文本需要用红色着色。但只有最后一个文本是彩色的。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:30:56.427

我已经看到了一个潜在的问题，当 helpText 只是一个单变量字符串时，它被用作数组。尝试将整个 helpText 分解为一个 char 数组，然后遍历它以找到您的括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:48:46.167

如果条件，您只会得到第一个括号。

尝试拆分文本`helpText.Split('(');`

然后迭代它并执行您的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:24:03.590

我认为您可以在不逐字节移动的情况下完成此操作。您可以尝试使用 IndexOf 方法来执行此操作。

这是我在想的事情：

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
{
    string rbText = richTextBox1.Text;

    int position = 0;
    int startBrace = rbText.IndexOf('(', position) + 1;

    while (startBrace != -1)
    {
        position = rbText.IndexOf(')', startBrace);

        if (position != -1)
        {
             richTextBox1.Select(startBrace, position - startBrace);
             richTextBox1.SelectionColor = Color.Red;

             startBrace = rbText.IndexOf('(', position) + 1;
        }
        else
             break;
    }
} 
```

请记住，我尚未完全测试此代码。

# matlab - 了解如何计算 FLOP

> ID：15670784
> 
> 赞同：2
> 
> 时间：2013-03-27T22:30:36.953
> 
> 标签：matlab, floating-point, counting, flops

我很难掌握如何计算 FLOP。前一刻我觉得我明白了，下一刻我觉得毫无意义。一些帮助解释这一点将不胜感激。我查看了有关该主题的所有其他帖子，但没有一个完全用我熟悉的编程语言解释（我知道一些 MATLAB 和 FORTRAN）。

这是我的一本书中的一个示例，说明了我正在尝试做的事情。

对于下面的一段代码，触发器的总数可以写成`(n*(n-1)/2)+(n*(n+1)/2)`相当于`n^2 + O(n)`.

```
[m,n]=size(A)
nb=n+1;
Aug=[A b];
x=zeros(n,1);
x(n)=Aug(n,nb)/Aug(n,n);
for i=n-1:-1:1
    x(i) = (Aug(i,nb)-Aug(i,i+1:n)*x(i+1:n))/Aug(i,i);
end 
```

我正在尝试应用上述相同的原理来查找 FLOP 的总数作为`n`以下代码（MATLAB）中方程数量的函数。

```
% e = subdiagonal vector
% f = diagonal vector
% g = superdiagonal vector
% r = right hand side vector
% x = solution vector

n=length(f);

% forward elimination
for k = 2:n
    factor = e(k)/f(k­‐1);
    f(k) = f(k) – factor*g(k‐1);
    r(k) = r(k) – factor*r(k‐1);
end

% back substitution
x(n) = r(n)/f(n);
for k = n‐1:­‐1:1
    x(k) = (r(k)‐g(k)*x(k+1))/f(k);
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:20:48.960

我绝不是 MATLAB 专家，但我会试一试。

我注意到您的代码索引范围内没有任何行。很好，这意味着我之前看到的每个操作都涉及一对数字。所以我认为第一个循环是每次迭代 5 FLOPS，第二个循环是每次迭代 3。然后是中间那个单一的操作。

但是，MATLAB 默认将所有内容存储为双精度值。因此，循环变量 k 本身在每个循环中运行一次，然后每次从中计算索引。所以这是第一个循环的额外 4 和第二个循环的 2。

但是等等——第一个循环有两次“k-1”，所以理论上可以通过计算和存储来优化它，每次迭代减少一个 FLOP 的数量。MATLAB 解释器可能能够为自己发现这种优化。据我所知，它可以计算出 k 实际上可以是一个整数，并且一切都还可以。

因此，您的问题的答案是视情况而定。您是否想知道 CPU 执行的 FLOP 数量，或代码中表示的最小数量（即仅对向量进行的操作数量），或者如果 MATLAB 根本不进行优化，它将执行的 FLOP 的严格数量? MATLAB 曾经有一个 flops() 函数来计算这类事情，但现在已经不存在了。无论如何，我都不是 MATLAB 专家，但我怀疑 flops() 已经消失了，因为解释器变得太聪明并且做了很多优化。

我有点想知道你为什么想知道。我曾经使用 flops() 来计算一个数学运算做了多少次运算，这是一种粗略的方法，可以粗略地估算我需要多少计算量才能使它实时工作，用 C 语言编写。

现在我看看原语本身（例如，有一个 1k 复数 FFT，根据库数据表，在那个 CPU 上将是 7us，有一个 2k 向量乘法，这将是 2.5us，等等）。这有点棘手，因为必须考虑缓存速度、数据集大小等。数学库（例如 fftw）本身实际上是不透明的，因此只能做到这一点。

因此，如果您出于这个原因计算 FLOP，您可能不会得到一个很好的答案。

# javascript - 从链接调用 Tampermonkey 函数

> ID：15670785
> 
> 赞同：4
> 
> 时间：2013-03-27T22:30:42.443
> 
> 标签：javascript, function, hyperlink, call, tampermonkey

如何从链接中调用 Tampermonkey 函数？

这是我尝试过的。使用 Tampermonkey，我可以插入如下链接：

```
var aNode = document.createElement('a'); 
var aText = document.createTextNode('will it run');
aNode.appendChild(aText);
aNode.href = 'javascript:runTest();';
document.body.insertBefore(aNode, document.body.firstChild);

function runTest() {
   alert('it ran!');
}; 
```

调用链接时，应该调用函数 runTest()。它不是。相反，会出现以下错误消息：

> 未捕获的 ReferenceError：未定义 runTest

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:36:56.877

不要那样设置 javascript 处理程序。使用`addEventListener()`，像这样：

```
var aNode   = document.createElement ('a');
var aText   = document.createTextNode ('will it run');
aNode.href  = '#';
aNode.appendChild (aText);
document.body.insertBefore (aNode, document.body.firstChild);

aNode.addEventListener ("click", runTest, false);

function runTest (zEvent) {
    zEvent.preventDefault ();
    zEvent.stopPropagation ();

    alert('it ran!');
}; 
```

# json - Mongoose 查询结果是只读的吗？

> ID：15670792
> 
> 赞同：3
> 
> 时间：2013-03-27T22:31:06.833
> 
> 标签：json, node.js, mongodb, mongoose

如何修改 Mongoose 查询返回的对象？

假设我们有以下架构：

```
var S = new mongoose.Schema( { 'name': String, 'field': String } ); 
```

我对结果进行以下查询和修改：

```
var retrieve = function(name, callback) {
    S.findOne({ name: name }).exec(function (err, obj) {
      if (err) return handleError(err);
      obj['field'] = 'blah';
      callback(obj);
    });
} 
```

将`obj.field`不包含`blah`查询返回的原始值，就好像它是只读的一样。到底是怎么回事？

注意：我的环境是 Node.js、Express、Mongoose 和 MongoDB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:36:21.547

注意：这是一个编辑，我原来的答案是相当不同的

所以这有点令人困惑，但**Mongoose 返回 MongooseDocument 对象而不是普通的 JSON 对象**。因此，使用 obj 上的 .lean() 方法将其转换为 JSON，然后从那里开始根据需要更改它。

感谢泽吉贝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T05:54:25.427

从 mongoose 返回的*doc*对象在某种程度上是只读的。要从中获取可写对象，您必须运行：

```
var writeableObject = doc.toObject()
writeableObject['field'] = 'blah'
res.send(writeableObject) 
```

向下滚动到猫鼬文档中的“转换”以阅读更多信息：[链接](http://mongoosejs.com/docs/api.html#document-js)

# sorting - 是否可以对多对多关系的结果进行排序（order_by）？

> ID：15670793
> 
> 赞同：0
> 
> 时间：2013-03-27T22:31:08.670
> 
> 标签：sorting, many-to-many, laravel, laravel-4

我的数据库中有几个表，它们具有多对多关系。我已经将它们链接到模型中......

```
public function tags()
{
  return $this->belongsToMany('Tag', 'user_tag')->withPivot('otherStuff');
} 
```

我希望结果按字母顺序排序，像这样......

```
public function tags()
{
  return $this->belongsToMany('Tag', 'user_tag')->withPivot('otherStuff')->order_by('name', 'asc');
} 
```

我尝试了该代码，但 Laravel 4 失败并抱怨 order_by 不存在。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:43:53.743

终于找到答案了。正确的方法是 orderBy，而不是 order_by。

# plugins - 声纳插件：如何获取声纳的指标

> ID：15670794
> 
> 赞同：2
> 
> 时间：2013-03-27T22:31:08.933
> 
> 标签：plugins, sonarqube, metric

我正在做一个 Sonar 项目，我必须制作一个插件才能获取指标并计算它们。

为了了解它是如何工作的，我想尝试做以下示例：

*   获取值（复杂度）并将其计算为双精度或浮点值。
*   取复杂度值（MetricsCore.COMPLEXITY），如果超过200，写一条消息说它太复杂了。
*   取注释行数并乘以 10。

我知道在这些示例中我想做的事情是无用的，但它只是为了了解如何获取 Metrics Core 价值并获取它们的价值，并创建新的 Metrics。我没有找到很多文档....

非常感谢你

有关信息，我将使用 Sonar-reference-plugin。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:45:09.520

您可以在此处找到我们的示例插件：[https](https://github.com/SonarSource/sonar-examples/tree/master/plugins) ://github.com/SonarSource/sonar-examples/tree/master/plugins 。“声纳参考插件”应该给你很多信息。

这应该可以帮助您更好地了解事情的运作方式。

# r - 通过内部的数据序列重新排序矩阵的行

> ID：15670799
> 
> 赞同：2
> 
> 时间：2013-03-27T22:31:44.857
> 
> 标签：r, matrix, igraph

问我有一个 erdos.reyni 图。我感染了一个顶点，想看看疾病会遵循什么顶点序列？igraph 具有 get.adjacency()、neighbors 等有用的功能。

这是具有顶点名称而不是 0,1 标志的邻接矩阵，我正试图从中消除传染链。如果某个顶点被感染，就像通过图表的流行病的流/序列一样。我们不用担心这里的感染概率（假设所有命中的顶点都以概率 1 感染）。

所以假设我点击了顶点 1（这里是第 1 行）。我们看到它具有到顶点 4、5、18、22、23、24、25 的传出链接。那么接下来的顶点将是那些连接到 4、5、18...25 的顶点，即 row4、row5、row18、...row25 中的那些值。然后，根据模型，疾病将通过这些等等传播。

我知道我可以传递一个字符串来对矩阵行进行排序。我的问题是，我无法弄清楚如何生成该序列。

矩阵看起来像这样。

```
 > channel
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
 [1,]    4    5   18   22   23   24   25   NA
 [2,]    6   10   11   18   25   NA   NA   NA
 [3,]    7   11   18   20   NA   NA   NA   NA
 [4,]   24   NA   NA   NA   NA   NA   NA   NA
 [5,]    1    3    9   13   14   NA   NA   NA
 [6,]    3    8    9   14   19   23   NA   NA
 [7,]    3    4    8   15   20   22   NA   NA
 [8,]    2    3   25   NA   NA   NA   NA   NA
 [9,]    3    4   11   13   20   NA   NA   NA
[10,]    4    5    8   15   19   20   21   22
[11,]    3   13   15   18   19   23   NA   NA
[12,]   11   13   16   NA   NA   NA   NA   NA
[13,]    4    6   14   15   16   17   19   21
[14,]    2    6   13   NA   NA   NA   NA   NA
[15,]    3   17   20   NA   NA   NA   NA   NA
[16,]    6   15   18   23   NA   NA   NA   NA
[17,]    2   25   NA   NA   NA   NA   NA   NA
[18,]    2    5   NA   NA   NA   NA   NA   NA
[19,]    3   11   NA   NA   NA   NA   NA   NA
[20,]    1    4    7   10   12   21   22   25
[21,]    2    4    6   13   14   16   18   NA
[22,]    1    3    4   15   23   NA   NA   NA
[23,]    1   16   24   NA   NA   NA   NA   NA
[24,]    7    8   19   20   22   NA   NA   NA
[25,]    7   12   13   17   NA   NA   NA   NA 
```

我想根据选择标准重新排序这个矩阵，如下所示：

R 将是最有帮助的（但我对算法感兴趣，所以任何 python、ruby 等都会很棒）。结果向量的长度为 115（8x25=200 - 85 NAs=115）。看起来像这样。如果顶点 1 被感染，这基本上就是疾病的传播方式。

```
4,5,18,22,23,24,25,24,1,3,9,13,14,2,5,1,3,4,15,23,1,16,24,7,8,19,20,22,7,12,13,17,7,8,19,20,22, 4,5,18,22,23,24,25,7,11,18,20... 
```

到目前为止我所知道的：1\. R 有一个包`**igraph**`可以让我计算邻居`(graph, vertex, "out")` 2\. 相同的包也可以生成`get.adjlist(graph...), get.adjacency`

# mysql - 这两个索引 MySQL 表有什么区别？

> ID：15670803
> 
> 赞同：1
> 
> 时间：2013-03-27T22:32:06.503
> 
> 标签：mysql

我正在修改一个旧的 MySQL 数据库，结果证明它的设计不适合它存储的数据类型。我对 SQL 不是很熟悉，所以我使用 SHOW CREATE TABLE 来获取用于旧表（'interaction_old'）的 CREATE 语句并几乎完全复制它，唯一的变化是一些列名和数据类型，创建一个新表（'interaction_new'）。现在一些在旧表中使用索引的查询不再使用新表中的索引，我不知道为什么。

以下是两个表的索引：

```
mysql> SHOW KEYS FROM interaction_old;

+-----------------+------------+---------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+
| Table           | Non_unique | Key_name      | Seq_in_index | Column_name   | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-----------------+------------+---------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+
| interaction_old |          0 | PRIMARY       |            1 | interactionid | A         |   138996006 |     NULL | NULL   |      | BTREE      |         |
| interaction_old |          1 | Complex_pdbid |            1 | Complex_pdbid | A         |        1338 |     NULL | NULL   |      | BTREE      |         |
| interaction_old |          1 | Protein_id    |            1 | Protein_id    | A         |       13737 |     NULL | NULL   |      | BTREE      |         |
| interaction_old |          1 | RNA_id        |            1 | RNA_id        | A         |        2806 |     NULL | NULL   |      | BTREE      |         |
+-----------------+------------+---------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+

mysql> SHOW KEYS FROM interaction_new;

+-----------------+------------+------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+
| Table           | Non_unique | Key_name   | Seq_in_index | Column_name   | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-----------------+------------+------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+
| interaction_new |          0 | PRIMARY    |            1 | interactionid | A         |   152311144 |     NULL | NULL   |      | BTREE      |         |
| interaction_new |          1 | pdbid      |            1 | pdbid         | A         |        2924 |     NULL | NULL   |      | BTREE      |         |
| interaction_new |          1 | pchainname |            1 | pchainname    | A         |         472 |     NULL | NULL   |      | BTREE      |         |
| interaction_new |          1 | rchainname |            1 | rchainname    | A         |         487 |     NULL | NULL   |      | BTREE      |         |
+-----------------+------------+------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

还有一个在两者之间表现不同的示例查询：

```
mysql> EXPLAIN SELECT DISTINCT Complex_pdbid FROM interaction_old;

+----+-------------+-----------------+-------+---------------+---------------+---------+------+------+--------------------------+
| id | select_type | table           | type  | possible_keys | key           | key_len | ref  | rows | Extra                    |
+----+-------------+-----------------+-------+---------------+---------------+---------+------+------+--------------------------+
|  1 | SIMPLE      | interaction_old | range | NULL          | Complex_pdbid | 6       | NULL | 1339 | Using index for group-by |
+----+-------------+-----------------+-------+---------------+---------------+---------+------+------+--------------------------+

mysql> EXPLAIN SELECT DISTINCT pdbid FROM interaction_new;

+----+-------------+-----------------+------+---------------+------+---------+------+-----------+-----------------+
| id | select_type | table           | type | possible_keys | key  | key_len | ref  | rows      | Extra           |
+----+-------------+-----------------+------+---------------+------+---------+------+-----------+-----------------+
|  1 | SIMPLE      | interaction_new | ALL  | NULL          | NULL | NULL    | NULL | 152311144 | Using temporary |
+----+-------------+-----------------+------+---------------+------+---------+------+-----------+-----------------+ 
```

如您所料，interaction_old 上的查询在几分之一秒内完成，而我让interaction_new 上的查询运行了大约 20 分钟，然后将其终止。interaction_old.Complex_pdbid 和interaction_new.pdbid 是相同的数据类型（并且存储几乎完全相同的数据）。USE INDEX 和/或 FORCE INDEX 似乎没有任何效果。是什么导致了不同的行为？

编辑：根据文档，第一个表使用[松散的索引扫描](http://dev.mysql.com/doc/refman/5.6/en/loose-index-scan.html)来提高速度——但是，该页面中的任何内容都没有让我清楚为什么这在第二个表上不起作用。

# c++ - Eclipse CDT 的内容辅助不建议函数指针的预期参数

> ID：15670813
> 
> 赞同：3
> 
> 时间：2013-03-27T22:32:44.397
> 
> 标签：c++, eclipse, eclipse-cdt, content-assist

我正在开发一个项目，该项目有许多函数指针，每个函数指针都有一组不同的参数。内容辅助不适用于此功能指针，它不提供有关此函数指针的预期参数列表的帮助。正因为如此，我必须手动查找函数指针的定义以找出它所期望的。这实在是太浪费时间了！

这是一个错误吗？有解决办法吗？

# vb.net - VS2010：添加引用时调试和发布配置的差异

> ID：15670814
> 
> 赞同：1
> 
> 时间：2013-03-27T22:32:49.570
> 
> 标签：vb.net, visual-studio-2010, com

我有一个引用 3rd 方 DLL 的 VB.Net 项目。当我添加对它的引用时，VS2010 会生成一个互操作。我在调试和发布配置上苦苦挣扎。我为任何平台（任何 CPU）设置了它们。这是发生的事情的要点；

*场景 1* - 将调试模式选择为活动 - 添加对 DLL 的引用（我是通过浏览而不是通过 COM 选项卡进行的） - 保存配置。我注意到在引用选项卡中只引用了 Debug 文件夹 Interop；但是当我检查文件夹时，互操作被复制到调试和发布文件夹，并且配置正确指向各自的互操作 - 使用调试配置作为活动开始调试。程序在 CreateObject 调用（对于引用的 DLL 中的类）失败，并出现错误“无法创建 ActiveX 组件” - 将活动模式更改为发布 - 开始调试，发布配置为活动。程序运行良好 - 从命令提示符执行 Release 文件夹的 exe，我再次收到错误“无法创建 ActiveX 组件”

*场景 2* - 将发布模式选择为活动 - 添加对 DLL 的引用（我是通过浏览而不是通过 COM 选项卡进行的） - 保存配置。我注意到在引用选项卡中只引用了 Release 文件夹 Interop；但是当我检查文件夹时，互操作被复制到调试和发布文件夹，并且配置正确指向各自的互操作 - 以发布配置为活动开始调试。程序在 CreateObject 调用（对于引用的 DLL 中的类）时失败，并出现错误“无法创建 ActiveX 组件” - 将活动模式更改为调试 - 使用调试配置作为活动开始调试。程序运行良好 - 从命令提示符执行 Debug 文件夹的 exe，我再次收到错误“无法创建 ActiveX 组件”

这让我发疯了。Exe 不会从任一文件夹运行。我已经尝试了所有可能的排列，并且您可以看到上述两种情况都是彼此的镜像；由添加参考时的活动配置决定。

任何帮助将不胜感激！

# jsf - JSF h:CommandButton 不适用于 f:ajax？

> ID：15670819
> 
> 赞同：0
> 
> 时间：2013-03-27T22:33:07.390
> 
> 标签：jsf, ajax4jsf

我正在尝试使用以下代码提交表单，但它没有填充 bean 中的字段：

```
//input above
<h:commandButton actionListener="#{transferenciaVagaBean.search()}" value="Search">
  <f:ajax render="@form"/>
</h:commandButton> 
```

尽管如此，如果我将组件更改为：

```
//input above
<a4j:commandButton actionListener="#{transferenciaVagaBean.search()}" 
                   value="Search" 
                   render="@form" /> 
```

它工作完美。我使用 h:commandButton 做错了吗？

我试图从 to 更改为`actionListener`，`action`因为我之前遇到过这个问题，但它对`h:commandButton`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:37:48.973

默认情况下，`f:ajax`将只执行`@this`意味着它只会提交操作按钮，而不是表单中的任何输入值。试试这个：

```
...
<f:ajax execute='@form' render='@form' />
... 
```

请参阅[javadoc的](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)**执行**部分：

> ...如果指定了文字，则 ID 必须以空格分隔。可以在 id 列表中指定任何关键字“@this”、“@form”、“@all”、“@none”。如果未指定，则假定默认值为“@this”。例如，@this clientIdOne clientIdTwo。

# objective-c - 在 NSMenuItem 中设置 NSSlider 的位置/宽度

> ID：15670820
> 
> 赞同：2
> 
> 时间：2013-03-27T22:33:11.520
> 
> 标签：objective-c, macos, cocoa, nsmenu, nsslider

我有一个`NSMenu`附加到一个`NSStatusItem`，并且在里面`NSMenu`我有一个`NSMenuItem`我已经将`view`属性设置为一个`NSSlider`对象。这几乎有效（它让我得到了我想要的东西）。

结果如下所示：

[NSMenu 中的 NSSlider 作为 NSMenuItem.view http://dl.dropbox.com/u/91596/Screenshots/k8tl.png](http://dl.dropbox.com/u/91596/Screenshots/k8tl.png)

问题是我希望滑块与其上方的菜单项对齐，所以它看起来并不那么可怕。

我在苹果文档中找不到任何关于能够设置 an 位置的内容，`NSSlider`所以我认为我将不得不自己绘制它。

这是一个正确的假设吗？如果是这样，有哪些课程参考/建议的阅读链接可以实现该结果？或者，我是不是错了？

当我这样做时 - 我必须将 UI 构建器中的滑块拖动到我想要的所需宽度 - 有没有办法以编程方式设置滑块的宽度，以便它填充菜单内的所需空间？

谢谢，抱歉这些都是菜鸟问题——我对 ObjC 编程很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:20:58.687

首先制作自己的`NSView`. 接下来，把你`NSSlider`放在那个视图中。如果您需要特殊间距，请调整容器视图中的滑块。或者，也许，在 Interface Builder 中玩转。

# android - 如何使用 adb 命令来保存排名靠前的结果？

> ID：15670825
> 
> 赞同：0
> 
> 时间：2013-03-27T22:33:22.393
> 
> 标签：android, grep, adb

我想将“top | grep applicationX”的结果保存到 Windows 中的文件中。我可以使用 adb shell top > C:\top_result.txt 保存排名靠前的结果，但我需要使用 grep。所以，我在做：

adb 外壳顶部 | grep 应用程序X

我在终端中获得了我想要的信息，但我想将它保存到一个文件中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:36:06.723

`adb shell top | grep applicationX > C:\top_result.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:36:37.523

您可以像这样操作输出：

`adb shell top | grep applicationX > /dir/somefile`

# jackrabbit - Jackrabbit 锁定了许多开放的 ACE

> ID：15670828
> 
> 赞同：3
> 
> 时间：2013-03-27T22:34:13.723
> 
> 标签：jackrabbit, aem, crx

我遇到了一个问题，由于一次有 1000 多个访问控制条目处于活动状态，导致许多进程阻塞；这是[Jackrabbit 中的一个已知问题](https://issues.apache.org/jira/browse/JCR-2950)；已确定解决方法并将其推广到 2.4.1，但 CQ 5.5 / CRX 2.3 使用 Jackrabbit 2.4.0。2.4.0 下是否有可用的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:41:21.447

我遇到了一篇提到 CRX 2.2 的文章。 [http://helpx.adobe.com/crx/kb/cacheentrycollector-cache-size-is-too-small.html](http://helpx.adobe.com/crx/kb/cacheentrycollector-cache-size-is-too-small.html)

决议说要安装 CRX hotfixpack 2.2.0.56。这使得 CachingEntryCollector 可配置。通过 JVM 参数：

```
-Dorg.apache.jackrabbit.core.security.authorization.acl.CachingEntryCollector.maxsize=10000 
```

我无法找到修补程序 2.2.0.56，但解决方案显示在 2.2.0.68 中。

之前已经解决了这个问题。问题是，这是否使它成为 CRX 2.3。我仍在挖掘 CQ，寻找 org.apache.jackrabbit.core，看看这个修复是否适用于新版本。

**更新：** 可悲的是，这个变化没有进入 2.3。

# opengl - 在 pyglet 中使用大型 3D 纹理

> ID：15670829
> 
> 赞同：1
> 
> 时间：2013-03-27T22:34:15.743
> 
> 标签：opengl, glsl, textures, pyglet, 3d-texture

我正在尝试使用预先计算的速度矢量场来做一些 GLSL 粒子的东西。这些向量场存储为 ~13 个 1024x170 浮点纹理，每个纹理对应于 z 平面中的不同“切片”。理想情况下，我想将它们加载为尺寸为 1024x170x13 的 3D 纹理，以允许在我的着色器中自动插值，但我的本地实现给出 256 的 GL_MAX_3D_TEXTURE_SIZE，这意味着（如果我理解正确的话）我在*每个维度*中的最大尺寸是256，所以这行不通。

因此，我的下一步是尝试使用 GL_TEXTURE_2D_ARRAY，并在着色器中的平面之间进行插值。不幸的是，pyglet 似乎没有公开这个功能（??）：

```
Traceback (most recent call last):
  File "particle_trace.py", line 67, in <module>
    load_vectortex3d(f, tex)
  File "particle_trace.py", line 56, in load_vectortex3d
    glBindTexture(GL_TEXTURE_2D_ARRAY, tex)
NameError: global name 'GL_TEXTURE_2D_ARRAY' is not defined 
```

我的下一步是分别绑定所有纹理，将它们全部独立地传递给着色器，然后在那里进行计算。但是……我在这里叫错树了吗？当然，必须有更好的方法来做到这一点。

# ruby-on-rails - 在不同的视图中设计表单“nil:NilClass 的未定义方法 `[]'”

> ID：15670843
> 
> 赞同：0
> 
> 时间：2013-03-27T22:35:01.127
> 
> 标签：ruby-on-rails, ruby, devise

所以我试图[在不同的控制器中做与设计表单几乎相同的事情](https://stackoverflow.com/q/4081744/1769385)

完全[在另一个页面上设计登录表单](https://stackoverflow.com/q/14712299/1769385)

我有一个帮助模块

```
def resource_name
  :user
end

def resource
  @resource ||= User.new
end

def devise_mapping
  @devise_mapping ||= Devise.mappings[:user]
end 
```

但我得到**了 nil:NilClass 的未定义方法“[]”**就行了

```
<%= f.email_field :email, :autofocus => true %></div> 
```

我把 <% raise resource.inspect %> 放在views/devise/sessions/new.html.erb

我在 Home#index **#User not initialized中得到了 RuntimeError**

```
<h2>Sign in</h2>

<%= form_for(resource, :as => resource_name, :url => user_session_path(resource_name)) do |f| %>
  <% raise resource.inspect %>
  <div><%= f.label :email %><br />
  <%= f.email_field :email, :autofocus => true %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <% if devise_mapping.rememberable? -%>
  <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
  <% end -%>

  <div><%= f.submit "Sign in" %></div>
<% end %>

<%= render "devise/shared/links" %> 
```

我也试过这个帮助模块

```
def resource_name
  :user
end

def resource
  @resource = User.new
end

def devise_mapping
  @devise_mapping = Devise.mappings[:user]
end 
```

在 Home#index 中，我有以下内容

```
<div class="loginform" id="login">
  <%= render :file => "devise/sessions/new" %>
</div> 
```

如果 views/devise/sessions/new.html.erb 编辑为

```
<%= form_for(:user, :as => @user, :url => user_session_path(@user)) do |f| %> 
```

但是如果把 <% raise resource.inspect %> 放回views/devise/sessions/new.html.erb

仍然会得到#User not initialized>

在用户.rb

```
devise :database_authenticatable, :registerable, :confirmable,
     :recoverable, :rememberable, :trackable, :validatable 
```

在 application_controller.rb

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  helper :all
end 
```

使用“导轨”，“3.2.11”

我不确定为什么辅助模块不能按照它对资源的预期方式工作。谁能帮我理解为什么？为什么会得到“nil:NilClass 的未定义方法 `[]'”？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:09:38.430

我认为这条线

```
<%= form_for(:user, :as => @user, :url => user_session_path(@user)) do |f| %> 
```

应该

```
<%= form_for(@user, :as => :user, :url => user_session_path(@user)) do |f| %> 
```

# angularjs - 如何在 angular.js 中动态创建模板

> ID：15670844
> 
> 赞同：1
> 
> 时间：2013-03-27T22:35:02.607
> 
> 标签：angularjs

angularjs 的新手，所以我不确定如何最好地表达这个问题，所以这可能是重复的。我有一个表格，我想用一个标签和一些复选框来填充。每行代表一个测试指标，带有两个表示“通过”或“失败”的复选框

```
function ListController($scope) {
    $scope.items = [
        {name: 'Feature X', flash: false, html: false},
        {name: 'Feature Y', flash: false, html: false}
    ];
} 
```

我已经正确填充了表格，但我不确定如何动态创建此表格？我希望能够在选择新测试时提交这些数据并创建一个新表。我现在可以看到调用此函数的唯一方法是初始化文档，我看不到如何传入任何附加值以根据测试更改“项目”节点。小提琴下面：

[http://jsfiddle.net/3Lcue/](http://jsfiddle.net/3Lcue/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:06:12.283

您可以使用[`$resource`](http://docs.angularjs.org/api/ngResource.%24resource)从服务器提交/检索数据：

```
app = angular.module("Test", ["ngResource"])

function ListController($scope, $resource) {
    var Test = $resource("/tests/:id", {id: "@id"});
    $scope.items = Test.query()

    $scope.addTest: function() {
        $scope.items.push($scope.newTest)
        $scope.newTest = {}
    }
} 
```

然后在您的视图中`newTest.name`使用.`newTest.flash``newTest.html``ng-model`

# algorithm - Dijkstra 和负边

> ID：15670847
> 
> 赞同：1
> 
> 时间：2013-03-27T22:35:13.330
> 
> 标签：algorithm, recursion, dijkstra

我无法理解为什么 Dijkstra 的算法不适用于具有负边的无环有向图。据我了解，Dijkstra 对图进行了广度优先遍历，并在适当时放松。例如，考虑图表：

```
S->A (3)
S->B (4)
B->A (-2) 
```

其中 S 是源节点。这就是我想象它的工作方式：

1) 距离为 3 的标记 A。距离为 4 的标记 B。

2) 在 A 上递归。由于 A 不指向任何节点，所以什么也不做。

3）在B上递归。由于B指向A，检查B的距离+B->A是否小于A的当前距离。2 < 3，所以用距离2标记A。

然而，显然这不是它的工作原理，因为我使用的这本书给出了这个图表来说明为什么底片不起作用。我无法遵循书上的解释。Dijkstra 将如何处理这个图表，为什么他们不使用我想象的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:41:18.653

问题是，一旦你处理了一个节点，你就不能在之后更新它的距离，因为这需要递归更新并且会抛出整个事情（阅读：违背算法的假设，即节点以单调递增的距离处理到来源；请参阅算法的正确性证明以了解需要的地方）。因此，一旦处理了 A，您以后就不能再更改它的距离，这意味着您不能有负边，因为它们可能会使您与先前处理的节点的距离更短。距离单调增加的假设是为什么在处理完节点后将它们标记为黑色，然后忽略黑色节点。因此，即使在该图中 A 到 S 的距离为 2，Dijkstra'

编辑：这是 Dijkstra 算法的作用：

1）用距离3标记A，将其放入等待处理的节点队列中；将距离标记为 4 的 B，将其放入队列中。

2）从队列中取出A，因为它在前面。由于 A 不指向任何节点，因此不要更新任何距离，也不要向队列中添加任何内容。将 A 标记为已处理。

3) 将 B 从队列中取出。B指向A，但是A被标记为已经处理；忽略边 B->A。由于没有更多来自 B 的出边，我们完成了。

编辑 2：关于 D​​AG，您根本不需要 Dijkstra 的算法。有向无环图总是有一个拓扑排序，可以用 O(|V| + |E|) 计算，并按照拓扑顺序处理顶点，使用`d(w) = min {d(w); d(v) + c(v, w)}`更新距离的规则，其中`d(v)`是顶点`v`到源的距离，`c(v,w)`是边缘的长度`(v,w)`将为您提供正确的距离，同样在 O(|V| + |E|) 中。总共有两个步骤，每个步骤都需要 O(|V| + |E|)，这就是在具有任意边长的 DAG 中计算单源最短路径的总复杂度。

# python - 列表：计数和删除

> ID：15670850
> 
> 赞同：0
> 
> 时间：2013-03-27T22:35:22.217
> 
> 标签：python, python-3.x

给定一个列表，例如 List=["X","X","O","O",'O','O']，我如何计算列表中有多少个“X” ，然后从列表中减去那么多“O”。该列表将始终将所有 X 放在第一位，所有 O 放在最后。我以为我可以做类似...

```
List=["X","X","O","O",'O','O']
ListCount=List.count("X")
del List[-(List2):0] 
```

我认为通过从 -2:0 中删除 O 会产生 ["X","X","O","O"] ，但绝对没有发生任何事情。在蟒蛇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:41:35.963

正如我在评论中指出的那样，另一种数据结构在这里可能更有用，因为您不关心顺序：

```
data = {"X": 2, "O": 4}
data["O"] -= data["X"] 
```

如果您需要实际列表，可以使用快速[生成器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)轻松创建：

```
from itertools import chain, repeat
data_list = list(chain.from_iterable(repeat(key, count) for key, count in data.items())) 
```

或者，换一种方式：

```
from collections import Counter
data = Counter(data_list) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:39:28.043

索引零对应于列表中的第一项，因此您的切片`List[-2:0]`表示从下一个到最后一个到第一个之前。由于这将是一个空范围，因此您不会从切片中得到任何东西（或者更确切地说，您的`del`语句不会删除任何东西）。

相反，省略切片的第二部分。Python 会自动切到列表的末尾。

```
del List[-ListCount:] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:42:09.323

您的方式似乎可行-您不应在示例中使用 List2 bu ListCount 。也许它不是太蟒蛇，它只会在你所说的条件下工作，但它工作:)

```
>>> l = [1,1,1,2,2,2,2]
>>> del l[-l.count(1):]
>>> print l
[1, 1, 1, 2] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T22:38:58.827

假设我理解您的问题，您的切片应如下所示：

```
del List[-ListCount:] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T22:47:58.587

怎么样：

```
List = ["X","X","O","O",'O','O']
xCount = List.count('X')
List = List[:-xCount] 
```

# php - 使用带有 nginx 的伪 php 重写

> ID：15670851
> 
> 赞同：1
> 
> 时间：2013-03-27T22:35:27.717
> 
> 标签：php, url-rewriting, nginx

我目前正在编写一个使用伪 url 重写的脚本。Url like`http://domain.com/index.php/admin`在 Apache 服务器上运行良好，但无法在 nginx 网络服务器上运行。

有没有办法让软件在nginx上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:41:07.197

在你的 server {} 块中试试这个：

```
location / {
    try_files $uri $uri/ /index.php?$uri&$args;
} 
```

编辑：

即使在 URL 中使用 index.php 也不起作用？你用什么将 PHP 脚本传递给 PHP？这就是我使用的，并且此类 URL 对我有用：

```
 location ~ \.php$ {
            try_files $uri =404;
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            # With php5-fpm:
            include fastcgi_params;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass unix:/var/run/php5-fpm.sock;
    } 
```

# c# - 为什么嵌套的公共类比它的父类更难访问？

> ID：15670855
> 
> 赞同：2
> 
> 时间：2013-03-27T22:35:52.247
> 
> 标签：c#, generics, abstract-class, nested-class

我有以下课程：

```
public abstract class Navigator<T> where T : Navigator.Route
{
    public class Route
    {
    }
}

public class P2PNavigator : Navigator<P2PNavigator.Route>
{
    public class Route : Navigator.Route
    {
    }
} 
```

在编译期间，我收到两个错误。

> 可访问性不一致：约束类型“Navigator.Route”比 Navigator<T> 更难访问
> 
> 可访问性不一致：基类“Navigator.Route”的可访问性低于类“P2PNavigator.Route”

一切都有`public`可访问性。我缺少什么来完成这项工作？我意识到我最终可以使它们成为所有命名空间级别的类，但我更喜欢嵌套。

* * *

**编辑：**感谢答案，我发现问题的根本原因是我的部分类没有正确定义。

```
public partial abstract class Navigator<T> where T : Navigator.Route
{
}

partial class Navigator // Different to Navigator<T> and implicitly internal.
{
    public class Route
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:41:03.117

`Navigator.Route`不一样`Navigator<P2PNavigator.Route>.Route`，应该给你其他错误。

指定类型的代码可以正确编译：

```
public abstract class Navigator<T> where T : Navigator<T>.Route
{
    public class Route
    {
    }
}

public class P2PNavigator : Navigator<P2PNavigator.Route>
{
    public class Route : Navigator<P2PNavigator.Route>.Route
    {
    }
} 
```

您可能有一些非泛型`Navigator`类使您的示例与您看到的错误相一致。

# iphone - 如何让 UIPickerview 适应屏幕大小？

> ID：15670858
> 
> 赞同：2
> 
> 时间：2013-03-27T22:36:08.767
> 
> 标签：iphone, ios, ipad

我有一个在我的 iPhone 应用程序中创建的选择器，它运行良好 - 但选择器是叠加层的一部分，因此某些值是硬编码的，以显示叠加层出现在多远的下方和左侧。

因此，当我尝试制作类似的 iPad 版本时，会出现明显的错误。我打开了 iPad 故事板并设置了所有内容，但是当我运行它时，很自然地，我的 uipickerview 出现在巨大的 iPad 屏幕的中间和左侧，远离它应该在的位置。

有没有办法让选择器的覆盖层自动居中并紧贴屏幕底部，无论屏幕尺寸如何，而不是硬编码它的位置？

![iPhone 视图](../Images/a8fab611390517cfdeed24ace4212f21.png) ![iPad 视图](../Images/db1e8cbd0099a4bf6bbe6e4a079a8307.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:48:04.227

看起来您希望选择器位于视图控制器主视图的底部（我假设它是父视图）并且与视图一样宽。试试这个...

```
CGRect viewFrame = self.view.frame;
CGRect pickerHeight = self.picker.frame.size.height;  // assume you have an outlet called picker
CGRect pickerFrame = CGRectMake(0.0, viewFrame.size.height-pickerHeight,
                         viewFrame.size.width, pickerHeight);
self.picker.frame = pickerFrame; 
```

# django - django url 冲突

> ID：15670859
> 
> 赞同：0
> 
> 时间：2013-03-27T22:36:11.100
> 
> 标签：django, collision, url-pattern

我有 django 应用程序，但有一个问题：类别和页面应用程序具有相同的 url：

这是 category.urls.py：

```
urlpatterns += patterns('',
    url('(?P<slug>[0-9A-Za-z-_.]+)/$', Category.as_view(), name='category')
) 
```

这是page.urls.py：

```
urlpatterns += patterns('',
   url(r'^(?P<slug>[0-9A-Za-z-_.]+)$', Page.as_view(), name='page')
) 
```

所以这里有一个问题——你不能用这样的 url 打开页面，所以我需要这个解决方案：

如果此处存在来自 url 的带有 slug 的类别 - 打开类别视图，如果没有具有此类 url 的类别，请转到页面视图。

但我不知道如何在 django 上使用 RIGHT 来执行此操作，而无需创建这样的附加功能：

```
def freeurl(request, slug):
   try:
      Category.objects.get(slug=slug)
      go to Category view
   except Category.DoesNotExists:
       go to Page view 
```

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:56:51.793

这很简单：包括两个`urls.py`不同的前缀。）

主要`urls.py`：

```
urlpatterns = patterns('',
    # ... snip ...
    (r'^category/', include('category.urls')),
    (r'^page/', include('page.urls')),
) 
```

编辑：

你的提议可能看起来像这样：

```
def freeurl(request, slug):
    try:
        cat = Category.objects.get(slug=slug)
    except Category.DoesNotExist:
        try:
            page = Page.objects.get(slug=slug)
        except Page.DoesNotExist:
            raise Http404()
        else:
            return render_to_response('page.html', {'object': page}, context_instance=RequestContext(request))
    else:
        return render_to_response('cat.html', {'object': cat}, context_instance=RequestContext(request)) 
```

**编辑2：**

有一个项目可以解决您的问题，请查看：

[https://github.com/jacobian/django-multiurl](https://github.com/jacobian/django-multiurl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:44:37.167

```
urlpatterns += patterns('',
    url(
        r'^category/(?P<slug>[0-9A-Za-z-_.]+)/$', 
        Category.as_view(), 
        name='category'
    )
)

urlpatterns += patterns('',
   url(
       r'^page/(?P<slug>[0-9A-Za-z-_.]+)/$', 
       Page.as_view(), 
       name='page'
   )
) 
```

# ms-access - 单选按钮更改 Access 2007 VB 上的 OldValue 和 Value 相同

> ID：15670860
> 
> 赞同：1
> 
> 时间：2013-03-27T22:36:11.470
> 
> 标签：ms-access

我有一个访问 2007 前端应用程序。在特定表单上，单选按钮组中有 2 个单选按钮。我试图检测单选按钮组何时更改并捕获旧值和新值，但我的 OldValue 和 Value 属性在保存事件中是 =，即使我已经更改了它。OldValue 等于 New 单选按钮的值，而不是原来的值。

我尝试在表单的 Save 子例程中对此进行编码。目的是将 RB 值与原始数据集值进行比较以强制设置旧值，但它不喜欢“SET”语句

```
If fraResistOption.Value = 1 And (IsNull([Dl_Resisted]) Or UCase([Dl_Resisted]) = "N") Then
        Set fraResistOption.OldValue = 1
        [Dl_Resisted] = "N"
Else
    If fraResistOption.Value = 1 And (Not IsNull([Dl_Resisted]) Or UCase([Dl_Resisted]) = "Y") Then
        Set fraResistOption.OldValue = 2
        [Dl_Resisted] = "N"
    Else
    If fraResistOption.Value = 2 And (IsNull([Dl_Resisted]) Or UCase([Dl_Resisted]) = "N") Then
        Set fraResistOption.OldValue = 1
        [Dl_Resisted] = "Y"
    Else
    If fraResistOption.Value = 1 And (Not IsNull([Dl_Resisted]) Or UCase([Dl_Resisted]) = "Y") Then
        Set fraResistOption.OldValue = 2
        [Dl_Resisted] = "Y"
    End If
    End If
    End If
    End If 
```

有人可以建议一种方法吗？谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:26:44.667

*选项组*（有时称为“框架”）的`.OldValue`属性确实有效。我有一个名为 [optValues] 的表：

 *[ID] - 自动编号
[optValue] - 数字（长整数）

它包含一条记录：

```
ID  optValue
1   3 
```

我的表单`Record Source`是 [optValues] 表。该表单有一个名为“Frame0”的选项组，它`Control Source`是 [optValue] 字段。它包含三个选项按钮

标签：“foo”，值：1
标签：“bar”，值：2
标签：“baz”，值：3

`After Update`Frame0的事件处理程序是：

```
Private Sub Frame0_AfterUpdate()
MsgBox "Old value: " & Me.Frame0.OldValue & ", New value: " & Me.Frame0.Value
End Sub 
```

当我打开表单时，选择了“baz”（因为表中的 [optValue] 为 3）：

![Frame0 初始条件](../Images/7d8269e837fe1d9e499fb6c888956a37.png)

当我单击“foo”时，我会立即看到（正确的）旧值和新值：

![AfterUpdate() 消息框](../Images/bead0e15039e246e978f8f0c0cc3f0de.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:45:13.413

我能想到的检测和捕获对 Option-Group 值的更改的唯一方法是处理 Form_Current 事件（保存 Option Group 值），然后处理 Option-Group After 事件。尽管您可以更改 Option-Group.Value，但 OldValue 可能是受保护的（只读）属性。希望以下内容有所帮助：

```
Dim OldValue As Byte
Dim CurrentValue As Byte

Private Sub Form_Current()
OldValue = Frame0.Value

End Sub

Private Sub Frame0_AfterUpdate()
CurrentValue = Frame0.Value
Debug.Print "AFTER: OldValue=" & OldValue & "' CurrentValue=" & CurrentValue

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T09:07:43.237

我不知道为什么，但 .oldvalue 对我不起作用。

如果你和我在同一条船上，你可以使用 optionGroup 的 BeforeUpdate 事件并设置一个静态变量。然后在 afterUpdate 事件中读取静态变量并将其重置以进行下一次更改。*

# ruby-on-rails - CarrierWave：上传文件到非云服务器

> ID：15670863
> 
> 赞同：2
> 
> 时间：2013-03-27T22:36:36.127
> 
> 标签：ruby-on-rails, ruby, file-upload, carrierwave, fog

我查看了 CarrierWave 的文档，甚至查看了[此处](https://github.com/fog/fog)和[此处](http://fog.io/storage/)的 Fog 文档，但我没有看到任何提及配置带有或不带有 Fog 的 CarrierWave 以便我可以指定非云服务器作为所有上传的目的地。

有任何想法吗？理想情况下，我希望有这样的配置：

```
 connection = Fog::Storage.new({
   :provider   => 'None',
   :root => '/home/media/uploads',
   :host   => 'storage.media.com',
   :username   => 'user',
   :password   => 'password'
 }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:42:28.810

找到[carrierwave-ftp](https://github.com/luan/carrierwave-ftp)。我想这正是我想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:03:03.953

我是 Rackspace Cloud 的 Ruby 开发人员倡导者，我很乐意帮助您解决您在使用我们的云时遇到的任何问题。

Carrierwave gem 旨在使用 Rackspace Cloud Files 等存储服务作为后端。如果您有兴趣使用云服务器来托管您的文件，您可能需要查看回形针。我过去曾用它来将文件保存到我的云服务器，效果很好。它还可以选择在以后切换到云文件。

[https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)

如果您需要更多帮助，请告诉我。

# php - PHP：表单变量未注册

> ID：15670869
> 
> 赞同：1
> 
> 时间：2013-03-27T22:37:07.893
> 
> 标签：php, html, forms

我有一个豪华轿车公司信息的 HTML 表单，有点像这样：

```
<td>
     <input type="text" name="sedan-number-fleet" />
</td>
<td>
     <input type="text" name="sedan-year-range" />
</td> 
```

等等。当我将它们放入 PHP 中时，如下所示：

```
$input_sedan_number_fleet = strip_tags($POST['sedan-number-fleet']);
$input_sedan_year_range = strip_tags($POST['sedan-year-range']); 
```

当我尝试回应它时，它没有结果。跟`strip_tags`功能有关系吗？如果你知道，请告诉我。那太好了！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:37:58.243

您不能通过 , 访问表单提交的数据`$POST`，但是`$_POST`. 将您的代码更改为

```
$input_sedan_number_fleet = strip_tags($_POST['sedan-number-fleet']);
$input_sedan_year_range = strip_tags($_POST['sedan-year-range']); 
```

而且，我希望你做更多的输入验证，而不仅仅是`strip_tags`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:38:08.140

替换`$POST`为`$_POST`. 这应该可以完成这项工作。此外，使用`$_GET`代替`$GET`等等（[在这里](http://www.php.net/manual/en/language.variables.external.php)阅读更多）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T09:16:18.907

我也遇到了麻烦。尝试使用 " 而不是 '。

例如：

```
$input_sedan_number_fleet = strip_tags($_POST["sedan-number-fleet"]);
$input_sedan_year_range = strip_tags($_POST["sedan-year-range"]); 
```

出于某种原因，这对我有用。

# c++ - 在子进程中使用 std::string 时 C++ 内存泄漏

> ID：15670870
> 
> 赞同：3
> 
> 时间：2013-03-27T22:37:21.273
> 
> 标签：c++, string, memory-leaks, fork

我对这段代码有问题，valgrind 检测到 std::basic_string 中的内存泄漏，我不知道我做错了什么。仅当在子进程中使用 std::string 时才会发生泄漏。你能告诉我，问题出在哪里吗？我以前从未在 C++ 中使用过 fork()，所以我没有太多经验。

```
#include <iostream>
#include <string>
#include <cerrno>
#include <cstdio>
#include <cstdlib>
#include <unistd.h>
#include <sys/wait.h>

int main(int argc, char *argv[])
{
    pid_t childPid = fork();
    if (childPid == -1)
    {
      perror("fork");
      return EXIT_FAILURE;
    }
    else if (childPid == 0)
    {
      std::cout << "Child PID: " << getpid() << std::endl;
      std::string str("something");      //valgrind detects mem leak here
      _Exit(EXIT_SUCCESS);
    }
    else
    {
      //std::string str("something");    //but not here
    }

    waitpid(-1, 0, 0);
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T22:42:17.537

`_Exit`不会运行任何析构函数或`atexit`函数，它会立即结束。

显然，这在 RAII 上打了一个大洞，所以不要那样做。

* * *

在保持相同退出策略的同时实施 Don't Do That 的一种方法可能是：

```
template <typename Func, typename... Args>
int wrap_cpp_code(Func&& func, Args&&.. args)
{
    try
    {
        return std::forward<Func>(func)(std::forward<Args>(args)...);
    }
    catch (...)
    {
        return EXIT_FAILURE;
    }
} 
```

在其范围内的所有析构函数都运行之前，它不会产生返回值，给出：

```
int child_main(int argc, char *argv[])
{
    std::cout << "Child PID: " << getpid() << std::endl;
    std::string str("something");

    return EXIT_SUCCESS;
}

int main(int argc, char *argv[])
{
    pid_t childPid = fork();
    if (childPid == -1)
    {
      perror("fork");

      return EXIT_FAILURE;
    }
    else if (childPid == 0)
    {
      int ret = wrap_cpp_code(child_main, argc, argv);
      _Exit(ret);
    }
    else
    {
      /*
      int ret = wrap_cpp_code(xyz, argc, argv);
      */
    }

    waitpid(-1, 0, 0);

    return EXIT_SUCCESS;
} 
```

但这仍然无法解释`atexit`函数或全局析构函数。所以仍然避免这样做。

# facebook - Facebook 在页面选项卡中更改图像

> ID：15670873
> 
> 赞同：1
> 
> 时间：2013-03-27T22:37:33.740
> 
> 标签：facebook, facebook-graph-api

我正在尝试以编程方式更改 facebook 页面选项卡图像。这个想法是当我的应用程序完成安装过程时，它将更改放置它的选项卡的图像。完成该过程并授予应用程序权限后，fb 的响应为“未授权”

```
{"error":{"message":"(#300) Edit failure","type":"OAuthException","code":300}} 
```

我搜索了这个错误，最接近的方法是：[https](https://developers.facebook.com/bugs/255313014574414/) ://developers.facebook.com/bugs/255313014574414/ 。我尝试了错误中描述的相同 CURL 示例并得到了相同的响应。

奇怪的是，当我尝试更改 fb 中的图像时，它也失败了。我认为问题在于应用程序要求在用户页面中安装的权限，并且没有足够的权限。

但我不知道热我chage 授权chage 的pagetab 图像的许可证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T00:39:22.030

```
var fbparams = new Dictionary<string, object>();
          string path = @"c:\test.jpg";
          FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read);
      var picture = new FacebookMediaObject
                {
                        //Tell facebook that we are sending image
                    ContentType = "image/jpeg",
                    //Give name to the image
                    FileName = "test"
                };
                //Create a new byteArray with right length
                var img = tabImageInfo.Media;
                //Convert the image content into bytearray
               fs.Read(img, 0, img.Length);`enter code here`
                 //Close the stream
               fs.Close();
                //Put the bytearray into Picture
                picture.SetValue(img);
                //Add the image into parameters
                fbparams.Add("custom_image", picture);
        fb.Post(tab.id, fbparams); 
```

# java - 一个 Java 文件，但有两个类

> ID：15670878
> 
> 赞同：1
> 
> 时间：2013-03-27T22:37:49.967
> 
> 标签：java, compilation

我的项目中有几门课。编译后，我为每个类找到了两个 java 文件：name.class 和 name$.class。这可能是什么原因？我看不出这些课程有什么特别之处。

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T22:40:01.610

它是一个匿名内部类，例如：

```
new Runnable() { ... } 
```

**编辑：**评论中的一些有效观点：

*   `enum`类型也被编译成单独的类文件（因为这些实际上是类）
*   匿名内部类按顺序编号（`MyClass$1.class`,`MyClass$2.class`等）
*   命名一致的内部类（例如`MyClass$InnerNamedClass.class`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:40:43.930

您的公共类中有一个内部类（匿名或命名）。这种行为是正常的；Java 编译器将为每个类生成一个 .class 文件，无论源文件中定义了多少类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:40:46.740

Java compile 为 .java 文件上定义的每个类创建一个 .class 文件。你应该有一个像这样的匿名内部类：

```
button.addListener(new PressListener() {
    public void onPressed(Event event) {
        System.out.print("test");
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T22:42:34.380

Java 中的内部类被编译为`Class$InnerClass`.

如果您已命名类，则使用类的名称。如果类是匿名的，即你有类似的东西：

```
final ActionListener actionListener = new ActionListener() {

    public void actionPerformed(ActionEvent e) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
}; 
```

然后使用数字，所以这将是`Class$1`。

# ms-access - 在 Access 2010 中构建搜索表单

> ID：15670881
> 
> 赞同：3
> 
> 时间：2013-03-27T22:37:54.650
> 
> 标签：ms-access, vba, ms-access-2010

我正在尝试为访问 2010 制作搜索客户表单。

我喜欢有一个基于查询搜索的选项组。我做了一个搜索查询，寻找名字或姓氏。表单上还有两个文本框来填写查询输入（名字和姓氏）

我需要选项组，以便我可以选择结果名称进行预订。

过去，我使用子表单和复选框间接地做到了这一点。然后在子表单和复选框（重新查询）上加载两个结果，因此用户只需在复选框上进行选择。但是这次我希望选项是查询结果本身！请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T11:15:53.360

这是一个使用列表框的简单示例：

表：客户

ID - 自动编号
姓氏 - 文本 (255)
名字 - 文本 (255)
电子邮件 - 文本 (255)

测试数据：

```
ID  LastName    FirstName       Email
--  ----------  --------------  ------------------
1   Thompson    Gord            gord@example.com
2   Loblaw      Bob             bob@example.com
3   Kingsley    Hank            hank@example.com
4   Thompson    Hunter S.       hunter@example.com
5   Squarepants Spongebob       ss@example.com
6   O'Rourke    P. J.           pj@example.com
7   Aldrin      Edwin "Buzz"    buzz@example.com 
```

表格布局：

![设计视图](../Images/9f408adc0b30521250724337916669ca.png)

此表单的 VBA 模块：

```
Option Compare Database
Option Explicit

Private Sub Form_Load()
Me.lstSearchResults.RowSource = ""
End Sub

Private Sub btnSearch_Click()
Me.lstSearchResults.SetFocus
Me.lstSearchResults.Value = Null
Me.lstSearchResults.RowSource = _
        "SELECT ID, LastName, FirstName FROM Clients " & _
            "WHERE LastName LIKE ""*" & DQ(Me.txtSearchLastName.Value) & _
                "*"" AND FirstName LIKE ""*" & DQ(Me.txtSearchFirstName.Value) & "*"""
End Sub

Private Function DQ(s As Variant) As String
' double-up double quotes for SQL
DQ = Replace(Nz(s, ""), """", """""", 1, -1, vbBinaryCompare)
End Function

Private Sub btnLookupEmail_Click()
If IsNull(Me.lstSearchResults.Value) Then
    Me.txtEmail.Value = ""
Else
    Me.txtEmail.Value = DLookup("Email", "Clients", "ID=" & Me.lstSearchResults.Value)
End If
End Sub 
```

首次打开表单时，一切都是空的。

![首开](../Images/933f7b9ea17b091fbe294b78c046ac63.png)

键入“thompson”（不带引号）并单击`btnSearch`用 clients 填充列表框`WHERE LastName LIKE "*thompson*"`。（如果您查看代码，您会发现如果您提供 FirstName，它也会匹配 FirstName。）

![搜索结果](../Images/631770bac4e309e51de6e338088ba16d.png)

选择列表框中的一项并单击`btnLookupEmail`，电子邮件地址将显示在下面的文本框中。

![电子邮件发现](../Images/cf13e15845ebc0b7d9ba1de46408b45f.png)

# iphone - 函数“setAsPrevious”的隐式声明在 c99 中无效

> ID：15670887
> 
> 赞同：0
> 
> 时间：2013-03-27T22:38:14.513
> 
> 标签：iphone, ios, xcode, methods

出于某种原因，当我尝试调用这些方法中的任何一个时，我不断收到警告“函数'setAsPrevious'的隐式声明在c99中无效”。当我尝试运行 xcode 项目时，此警告会变成错误。

我已经在网上查看了其他问题，并且真的到处都可以找到，但我没有找到问题所在。我相信这很简单，所以如果有人可以节省我几天寻找简单的时间并向我指出，我将非常感激。

```
- (void)setAsPrevious:(UIView*)thisView {
    [previous removeFromSuperview];
    thisView.accessibilityFrame = CGRectMake(0.0, 0.0, 200.0, 100.0);
    previous = thisView;
}

- (void)setAsCurrent:(UIView*)thisView {
    setAsPrevious(current);
    thisView.accessibilityFrame = CGRectMake(250.0, 0.0, 200.0, 100.0);
    current = thisView;
    [self.view addSubview:current];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:39:47.377

您试图将其称为 ac 函数，但它被声明为类方法。

在Objective C中，您需要编写

```
[self setAsPrevious:current]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:41:13.243

打电话`[self setAsPrevious:current];`而不是`setAsPrevious(current);`

# ios - 从objective-c中的两个不同进程写入资源的最佳实践

> ID：15670889
> 
> 赞同：4
> 
> 时间：2013-03-27T22:38:20.183
> 
> 标签：ios, objective-c, design-patterns, asynchronous

我有一个与我试图用我的应用程序解决的问题相关的一般 Objective-c 模式/实践问题。我在这里找不到类似的以客观 c 为重点的问题/答案。

我的应用程序包含一个可变的对象数组，我称之为“记录”。该应用程序收集记录并通过以下两种方式之一将它们放入该数组中：

1.  它从应用程序沙箱中本地可用的 SQLite 数据库读取数据。读取通常非常快。
2.  它从 Web 服务异步请求数据，等待它完成然后解析数据。读取速度可能很快，但通常不是。

有时，应用程序从数据库中读取数据 (1) 并从 Web 服务 (2) 请求数据基本上同时进行。通常情况下，(1) 将在 (2) 完成之前完成，并且将 Records 添加到可变数组不会导致冲突。

我担心在某些时候我的 SQLite 读取过程会花费比预期更长的时间，它会尝试在异步请求完成的同时将对象添加到可变数组并执行相同的操作；或相反亦然。这些是似乎难以测试的边缘情况，但这肯定会使我的应用程序崩溃或至少导致我的记录数组出现问题。

我还应该指出，记录将被合并到可变数组中。例如：如果 (1) 首先运行并返回 10 条记录，然后在 (2) 完成并返回 5 条记录后不久，我的可变数组将包含所有 15 条记录。我正在组合数据而不是覆盖它。

我想知道的是：

*   当（1）或（2）进程完成时，我将对象添加到同一个可变数组实例中是否安全？
*   在objective-c中是否有一个好的模式/实践来实现这种处理？
*   这是否涉及锁定对可变数组的访问，因此当 (1) 向其中添加对象时 (2) 在 (1) 完成之前不能添加任何对象？

我很感激你可以分享的任何信息。

**[编辑#1]**

对于后代，我发现这个 URL 对理解如何使用 NSOperations 和 NSOperationQueue 有很大帮助。它有点过时了，但仍然有效：

[http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

此外，它没有具体谈论我要解决的问题，但它使用的示例实用且易于理解。

**[编辑#2]**

我决定采用 danh 建议的方法，我将在本地阅读，并在本地阅读完成后根据需要访问我的 Web 服务（无论如何应该很快）。Taht 说，我将尝试完全避免同步问题。为什么？因为苹果是这么说的，所以在这里：

[http://developer.apple.com/library/IOS/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html#//apple_ref/doc/uid/10000057i-CH8-SW8](http://developer.apple.com/library/IOS/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html#//apple_ref/doc/uid/10000057i-CH8-SW8)

> **完全避免同步**
> 
> 对于您从事的任何新项目，甚至对于现有项目，设计您的代码和数据结构以避免需要同步是最好的解决方案。尽管锁和其他同步工具很有用，但它们确实会影响任何应用程序的性能。如果整体设计导致特定资源之间的高度争用，您的线程可能会等待更长时间。
> 
> 实现并发的最佳方式是减少并发任务之间的交互和相互依赖。如果每个任务都对自己的私有数据集进行操作，则不需要使用锁来保护该数据。即使在两个任务共享一个公共数据集的情况下，您也可以查看对该数据集进行分区或为每个任务提供其自己的副本的方法。当然，复制数据集也有其成本，因此在做出决定之前，您必须权衡这些成本与同步成本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:48:17.467

> 当（1）或（2）进程完成时，我将对象添加到同一个可变数组实例中是否安全？

绝对不。NSArray 以及其余的集合类[是不同步的](http://developer.apple.com/library/IOS/documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html#//apple_ref/doc/uid/10000057i-CH8-SW8)。当您添加和删除对象时，您可以将它们与某种锁结合使用，但这肯定比仅创建两个数组（每个操作一个）并在它们都完成时合并它们要慢得多。

> 在objective-c中是否有一个好的模式/实践来实现这种处理？

很不幸的是，不行。您能想到的最多的是触发布尔值，或在常见回调中将整数增加到某个数字。要明白我的意思，这里有一些伪代码：

```
- (void)someAsyncOpDidFinish:(NSSomeOperation*)op {
    finshedOperations++;
    if (finshedOperations == 2) {
       finshedOperations = 0;
       //Both are finished, process
    }
} 
```

> 这是否涉及锁定对可变数组的访问，因此当 (1) 向其中添加对象时 (2) 在 (1) 完成之前不能添加任何对象？

是的，见上文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:49:12.300

您应该锁定您的数组修改，或者在主线程中安排您的修改。SQL 提取可能在主线程中运行，因此在您的远程提取代码中，您可以执行以下操作：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [myArray addObject: newThing];
}]; 
```

如果您要添加一堆对象，这会很慢，因为它会在每个记录的调度程序上放置一个新任务。您可以将记录捆绑在线程中的单独数组中，并使用 addObjectsFromArray 添加临时数组：如果是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T22:57:17.310

就个人而言，我倾向于并发`NSOperationQueue`并添加两个检索操作操作，一个用于数据库操作，一个用于网络操作。然后，我将有一个专用的串行队列，用于将记录添加到 中`NSMutableArray`，两个并发检索操作中的每一个都将使用该队列将记录添加到可变数组中。这样，您就有一个用于添加记录的队列，但从另一个并发队列上运行的两个检索操作提供数据。如果您需要知道两个并发检索操作何时完成，我会在该并发队列中添加第三个操作，将其依赖项设置为两个检索操作，这将在两个检索操作完成时自动触发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T23:03:07.797

除了上面的好建议，考虑不要同时启动 GET 和 sql。

```
[self doTheLocalLookupThen:^{
    // update the array and ui
    [self doTheServerGetThen:^{
        // update the array and ui
    }];
}];

- (void)doTheLocalLookupThen:(void (^)(void))completion {

    if ([self skipTheLocalLookup]) return completion();
    // do the local lookup, invoke completion
}

- (void)doTheServerGetThen:(void (^)(void))completion {

    if ([self skipTheServerGet]) return completion();
    // do the server get, invoke completion
} 
```

# sql - 更新查询需要永远

> ID：15670891
> 
> 赞同：1
> 
> 时间：2013-03-27T22:38:22.013
> 
> 标签：sql, postgresql, sql-update, plpgsql, postgresql-9.1

我有一个`my_obj`有两个字段的表`value_a varchar(5)`和`value_b varchar(5)`

事实上，这两个值变化不大，可以成对分组。充其量，最大数量 < 100 对。相反，我有几百万条记录`my_obj`。

所有的查询都会干扰`value_a`并`value_b`花费很长时间。因此，我决定为所有可能的对创建表对，其中包含字段`value_a`和`value_b`. 因此我在表中添加了一个字段 id_pair `my_obj`。

我已经用所有的对填满了桌子对，没关系。所以，现在，我想`my_obj`用这个命令相应地更新表：

```
update my_obj
set id_pair = p.id
from my_obj as o
inner join pair as p on p.value_a = o.value_a and p.value_b = o.value_b; 
```

虽然查询已启动很长时间，但我运行了 a`select count(*) from my_obj where id_pair > 0;`并返回了我`0`

所以我的更新查询有问题。 **编辑/注意**：作为事务单元的 plpgsql 函数在事务结束时执行提交，所以我在表中没有看到任何修改*是完全正常*的，因为我中断了函数。

我用主键上的条件更改了更新查询`my_obj`，以便只`update`对一条记录执行一个。

```
update my_obj
set id_pair = p.id
from my_obj as o
inner join pair as p on p.value_a = o.value_a and p.value_b = o.value_b
where o.id = 1234567;  -- 1234567 being the key of an existing record 
```

令人惊讶的是，当我启动这个应该`update`只有一条记录的查询时，它似乎需要**永远**。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:37:58.527

这对你有什么作用？

```
update my_obj o
set    id_pair = p.id
from   pair p
where  p.value_a = o.value_a and
       p.value_b = o.value_b and
       o.id = 1234567; 
```

# cassandra - 下载 cassansdra jbcd 1.2.3 jar

> ID：15670895
> 
> 赞同：2
> 
> 时间：2013-03-27T22:38:27.983
> 
> 标签：cassandra

谁能给我一个下载 cassandra-jbcd 的链接。**1.2.3** .jar ？

我找到的最新版本是 cassandra-jbcd.1.2.1.jar，我的工作确实需要最新版本的 cassandra。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:20:15.787

由于它不在他们的下载中，您可以使用[依赖](https://code.google.com/a/apache-extras.org/p/cassandra-jdbc/source/browse/pom.xml?name=trunk)项自己构建它。创建一个maven项目添加依赖，编译项目，maven会为你创建jar。

```
<dependency>  
    <groupId>org.apache.cassandra</groupId>
    <artifactId>cassandra-clientutil</artifactId>
    <version>1.2.3</version>
</dependency> 
```

[这](http://dl.dropbox.com/u/24593987/cassandra-jdbc-1.2.3.jar)是一个示例构建，但我认为它会再次过时。

# java - 通过套接字传输文件时 FTP 服务器挂起

> ID：15670898
> 
> 赞同：0
> 
> 时间：2013-03-27T22:38:39.670
> 
> 标签：java, sockets, ftp, stream

我正在用java制作一个简单的FTP服务器。当我在本地测试它（在我自己的机器上运行服务器和客户端）时，我一切正常。但是，当我在两台不同的远程计算机上运行服务器和客户端时，客户端在收到来自服务器的“150 文件状态正常”消息后不久就会挂起。我不明白为什么它在一个地方工作得很好，而在另一个地方却不行。以下是相关代码：

服务器（发送文件）：

```
FileInputStream input = null;
                            try {
                                input = new FileInputStream(filePath);
                            } catch (FileNotFoundException e) {
                                out.writeBytes("550 File not found or access denied.\r\n");
                            }
                            out.writeBytes("150 File status okay.\r\n");

                            // TCP CONNECT
                            DataOutputStream outToClient_d = null;
                            Socket clientSocket1 = null;

                            try {
                                ipAddress = ipAddress.substring(0,
                                        ipAddress.length() - 1);
                                clientSocket1 = new Socket(ipAddress,
                                        portNumber);
                                outToClient_d = new DataOutputStream(
                                        clientSocket1.getOutputStream());
                            }

                            catch (UnknownHostException e) {
                                out.writeBytes("425 Can not open data connection.\r\n");
                            }

                            byte[] buf = new byte[2048];
                            int len;
                            while ((len = input.read(buf)) > 0) {
                                outToClient_d.write(buf, 0, len);
                            }
                            input.close();

                            out.writeBytes("250 Requested file action completed.\r\n");
                            clientSocket1.close();
                            outToClient_d.close(); 
```

客户端（将文件保存到 /retr_files）：

```
InputStream inFromServer_d = null;

    if (welcomeSocket != null) {
        if (!welcomeSocket.isClosed()) {
            welcomeSocket.close();
        }
    }

    try {
        welcomeSocket = new ServerSocket(port);
        System.out.print("PORT " + myIP + "," + num1 + "," + num2 + "\r\n");
        out.writeBytes("PORT " + myIP + "," + num1 + "," + num2 + "\r\n");
        System.out.print(parseReply(getResponse()));
        System.out.print("RETR " + pathname + "\r\n");
        out.writeBytes("RETR " + pathname + "\r\n");
        String reply = parseReply(getResponse());
        if (reply.charAt(10) == '1') {
            System.out.print(reply);
            System.out.print(parseReply(getResponse()));

            try {
                clientSocket_d = welcomeSocket.accept();
            } catch (IOException e) {
                System.out
                        .print("GET failed, FTP-data port not allocated.\r\n");
                System.exit(-1);
            }

            inFromServer_d = clientSocket_d.getInputStream();

            // READ
            InputStream input = inFromServer_d;
            OutputStream output = new FileOutputStream("retr_files/file"
                    + retrCnt);

            byte[] buf = new byte[2048];
            int len;
            while ((len = input.read(buf)) > 0) {
                output.write(buf, 0, len);
            }

            input.close();
            output.close();
            clientSocket_d.close();

        } else {
            System.out.print(reply);
        }
    } catch (IOException e) {
        System.out.print("GET failed, FTP-data port not allocated.\r\n");
        System.exit(-1);
    } 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:44:01.680

我猜客户端和服务器之间有防火墙阻止从服务器到客户端的反向连接。这个问题是人们现在通常使用“被动”转账而不是“主动”转账的原因。

# ios - UIButton翻转动画

> ID：15670901
> 
> 赞同：0
> 
> 时间：2013-03-27T22:38:48.747
> 
> 标签：ios

你们有谁知道我怎么可能添加一个在按下 UIButton 时触发的动画，并且 UIButton 同时转动和放大，而在另一边我可以显示另一个视图？有点像 Mac 上的仪表板，小部件上有信息按钮......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:27:44.900

您可以使用过渡：

```
[UIView transitionWithView:containerView duration:1 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{

    buttonView.hidden = YES;
    otherView1.hidden = NO;
    otherView2.hidden = NO;
    otherViewEtc.hidden = NO;

} completion:nil]; 
```

然后，您将拥有一个`containerView`包含翻转按钮和隐藏的备用视图，并且在转换中，您可以隐藏第一个视图并显示备用视图...

# css - 悬停时 Magento 目录图像更改

> ID：15670904
> 
> 赞同：0
> 
> 时间：2013-03-27T22:39:10.153
> 
> 标签：css, image, magento, hover

在目录/类别页面上，我希望在悬停时更改图像。像[clubmonaco.com](http://www.clubmonaco.com/family/index.jsp?categoryId=19749596&cp=12243590.12266330.19749596&ab=ln_women_features_dressshop)我知道如何在 html/css 上做到这一点，但不知道在 magento 上。有什么帮助吗？![在此处输入图像描述](../Images/2f2aa4a3f58419fb6b84883431e335a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:33:28.230

您可以修改此目录中的文件：

```
app/design/frontend/base/default/template/catalog/product
for example (list/ and list.phtml) 
```

或您的模板，例如：

```
app/design/frontend/default/yourtemplate/template/directory with product files 
```

您可以在以下位置找到 CSS 文件：

```
skin/frontend/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:41:33.100

您还应该考虑存储第二张图像的位置。在这种情况下，您可以使用“CSS-Sprites”——一个包含两张照片的图像文件。缺点是，您必须自定义 magento 显示产品图像的每个页面。

或者，您必须定义确切的订单。第一个图像是前视图，第二个图像始终是后视图。

编程部分并不难。看着

```
app/design/frontend/base/default/template/catalog/product/list.phtml 
```

对于目录视图。如果您有自定义模板，路径可能会有所不同。Magento 后端有一个功能可以显示真实路径（系统->配置->开发工具）。

您可以将 Javascript 直接写入 list.phtml。Magento 还直接在 .phtml 文件中编写 JS 代码。当然它不是很漂亮，但是 Magento 太复杂了；如果其他人使用商店系统，它会更容易找到。

请记住，list.phtml 包含两种布局：网格和列表视图。只是如果您进行更改并想知道，为什么您看不到前端的更改；-)

# mysql - MySQL，选择，合并表

> ID：15670905
> 
> 赞同：0
> 
> 时间：2013-03-27T22:39:10.643
> 
> 标签：mysql, merge

我有一个我无法解决的小问题。这真的很简单，但我只是想不通并搜索了一段时间，但没有找到任何好的答案。

我有两张桌子：

```
Transaction
t_nr (Primary)   a_nr     quantity
 1                1          10
 2                2          10 
Customer
c_nr (PRIMARY)  name        city
 1              Mario       Tokyo
 2              Luigi       Beijing 
```

并希望将上述两个中的值插入另一个表，其中一个查询查找 Account a_nr (primary) c_nr

问题是，当只是制作一个常规的 select-from-statement 时，它会返回：

```
a_nr     c_nr
 1        1
 1        2
 2        1
 2        2 
```

即不只是将它们合并到帐户表中。

```
a_nr     c_nr
 1        1
 2        2 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:02:59.337

a_nr 是否与 c_nr 相关（它们是否相等）？

如果是这样，

```
insert into account (a_nr,c_nr)
SELECT transaction.a_nr, customer.c_nr from transaction, customer
WHERE transaction.a_nr = customer.c_nr 
```

尽管仅插入两个相同的值似乎完全没有意义。

Account 的期望输出是什么？

# foreach - 限制 foreach 结果

> ID：15670906
> 
> 赞同：1
> 
> 时间：2013-03-27T22:39:11.093
> 
> 标签：foreach, limit

我正在开发一个 facebook 应用程序，我尝试通过黄道带获取用户的朋友列表。然而，一些用户在同一个标​​志上有 20 个朋友。其他 50 个等等，我想将结果限制在 10 个。我需要专家的一些建议。

```
foreach($all_friends_profile as $profile)
{
  $frzodie  = star_sign($birthday);
  $frname = $profile->name;
  $frid = $profile->uid;
  $comp = "<div class=\"mod_frm mod_frm_margin clearfix\">
    <div class=\"pic\"><img src=\"https://graph.facebook.com/".$frid."/picture/\"></div>
    <div class=\"meta\">".$frname."</div>
    <div class=\"uiButton uiButtonSpecial\">Share</div></div>";

  if (strpos($frzodie,$randZodie) !== false) 
  { 
    echo $comp;   // **This must be limited to 10.**
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:41:14.027

```
$count = 0;
foreach(...) {
    ...
    $count++;
    if($count >= 10) {
         break;
    }
} 
```

# php - 重定向 PHP

> ID：15670910
> 
> 赞同：4
> 
> 时间：2013-03-27T22:39:46.660
> 
> 标签：php

你将如何从一个 PHP 页面重定向到另一个页面？

```
</head>

<body>
    <!-- Home -->
    <div data-role="page" id="page1">
        <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                        Back
                    </a>
            <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d" class="ui-btn-right">
                     Home  
                    </a>
            <h3>
                Login Process
            </h3>
        </div>
        <div data-role="content">

            <?php
    // takes the variables from action script and assigns them php variables names
    $user = $_POST ['username'];
    $pass = $_POST ['password'];

    // if there is a user name and password
    if ($user && $pass)
    {
        // connect to server
        mysql_connect("localhost", "", "") or die(mysql_error());
        //select database
        mysql_select_db("") or die(mysql_error());

        //Create a query that selects all data from the PATIENT table where the username and password match
        $query = "SELECT * FROM Patient WHERE Username = '$user' AND Password = '$pass'";

        //executes query on the database
        $result = mysql_query ($query) or die ("didn't query");
        //this selects the results as rows

        $num = mysql_num_rows ($result);
        //if there is only 1 result returned than the data is ok 
        if ($num == 1)
        {
            //sends back a data of "Success"
            echo "Successful Login";
            $row=mysql_fetch_array($result);
            $_SESSION['Name'] = $row['Name'];
            $_SESSION['Address'] = $row['Address'];
        }
        else
        {
            //sends back a message of "failed"
            echo "Unsuccessful Login";
        }
    }

    ?>
        </div>
    </div>
</body>

</html> 
```

因此，当用户登录时，它会将他们带到上面显示的页面。我需要它做的是，如果登录成功，我需要它去重定向到另一个 PHP 页面。

* * *

> 登录.php

```
<?php
    // takes the variables from action script and assigns them php variables names
    $user = $_POST ['username'];
    $pass = $_POST ['password'];
    $error = '';

    // if there is a user name and password
    if ($user && $pass)
    {
        // connect to server
        mysql_connect("localhost", "", "") or die(mysql_error());
        //select database
        mysql_select_db("") or die(mysql_error());

        //Create a query that selects all data from the PATIENT table where the username and password match
        $query = "SELECT * FROM Patient WHERE Username = '$user' AND Password = '$pass'";

        //executes query on the database
        $result = mysql_query ($query) or die ("didn't query");
        //this selects the results as rows

        $num = mysql_num_rows ($result);
        //if there is only 1 result returned than the data is ok 
       if ($num == 1)
    {
    header("Location: http://helios.hud.ac.uk/u101010/PHP/details1.php");
    }
            //sends back a data of "Success"
            $return_message =  "Successful Login";
            $row=mysql_fetch_array($result);
            $_SESSION['Name'] = $row['Name'];
            $_SESSION['Address'] = $row['Address'];
        }
        else
        {
            //sends back a message of "failed"
            $return_message = echo "Unsuccessful Login";
        }
    }
    <html>
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <meta name="apple-mobile-web-app-status-bar-style" content="black" />
            <title>
            </title>
            <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
            <link rel="stylesheet" href="my.css" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
            </script>
            <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
            </script>
            <script src="my.js">
            </script>
            <!-- User-generated css -->
            <style>
            </style>
            <!-- User-generated js -->
            <script>
                try {

        $(function() {

        });

      } catch (error) {
        console.error("Your javascript has an error: " + error);
      }
            </script>

    ?>
    </head>

    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
                <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                        Back
                    </a>
                <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d" class="ui-btn-right">
                     Home  
                    </a>
                <h3>
                    Login Process
                </h3>
            </div>
            <div data-role="content">

                <?php echo $return_message; ?>

            </div>
        </div>
    </body>

    </html> 
```

* * *

> 详情1.php

```
<!DOCTYPE html>
<?php
    session_start();
    ?>
    <html>

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" href="my.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
        </script>
        <script src="my.js">
        </script>
        <!-- User-generated css -->
        <style>
        </style>
        <!-- User-generated js -->
        <script>
            try {

                $(function() {

                });

            } catch (error) {
                console.error("Your javascript has an error: " + error);
            }
        </script>
    </head>

    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
                <a data-role="button" data-theme="c" href="menu.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                        Main Menu
                        </a>
                <h3>
                    Your details
                </h3>

            </div>
            <div data-role="content">
                Name:
                <?php echo $_SESSION['Name'];?>
                <br /> Address:
                <?php echo $_SESSION['Address'];?>

            </div>
    </body>

    </html> 
```

* * *

> 详细信息.html

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="my.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
    </script>
    <script src="my.js">
    </script>
    <!-- User-generated css -->
    <style>
    </style>
    <!-- User-generated js -->
    <script>
        try {

            $(function() {

            });

        } catch (error) {
            console.error("Your javascript has an error: " + error);
        }
    </script>
</head>

<body>
    <!-- Home -->
    <div data-role="page" id="page1">
        <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="c" href="menu.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                        Main Menu
                        </a>
            <h3>
                Your details
            </h3>
        </div>
        <form name="form1" method="post" action="details1.php">
            <strong>Details</strong>
            <br />
            <br /> Name: <input type="text" name "Name" />
            <br /> Address: <input type="text" name="Address" />
            <br />
            <input type="submit" name="Submit" value="Book appointment" />
            <br />
            <input type="submit" name="Submit" value="Cancel appointment" />
        </form>

    </div>
</body>

</html> 
```

* * *

> 登录.html

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="my.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
    </script>
    <script src="my.js">
    </script>
    <!-- User-generated css -->
    <style>
    </style>
    <!-- User-generated js -->
    <script>
        try {

            $(function() {

            });

        } catch (error) {
            console.error("Your javascript has an error: " + error);
        }
    </script>
</head>

<body>
    <!-- Home -->
    <div data-role="page" id="page1">
        <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                        Back
                    </a>
            <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d" class="ui-btn-right">
                     Home  
                    </a>
            <h3>
                Login
            </h3>
        </div>
        <div data-role="content">
            <h4>
                Enter login details below:
            </h4>

            <form name="form1" method="post" action="login.php">
                <strong>Patient Login </strong>
                <br />
                <br /> Username: <input name="username" type="text" id="username" />
                <br /> Password: <input name="password" type="password" id="password" />
                <br />
                <br />
                <br />
                <input type="submit" name="Submit" value="Login" />
            </form>
            <br />
            <div data-role="content">
                <h4>
                    Please ensure your username and password are kept secure.
                </h4>

                <br />
            </div>
        </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:40:33.507

尝试使用该[`header()`](http://php.net/manual/en/function.header.php)功能：

```
if ($num == 1)

{

header("Location: http://www.example.com");

} 
```

显然将[http://www.example.com](http://www.example.com)更改为您选择的位置并将其放在页面中的任何 HTML 上方，否则您将收到 headers already set 错误。

考虑到上述情况，您需要重新安排您的代码，如下所示：

```
 <?php

// takes the variables from action script and assigns them php variables names
$user = $_POST ['username'];
$pass = $_POST ['password'];
$error = '';

// if there is a user name and password
if ($user && $pass)
{
    // connect to server
    mysql_connect("localhost", "", "") or die(mysql_error());
    //select database
    mysql_select_db("") or die(mysql_error());

    //Create a query that selects all data from the PATIENT table where the username and password match
    $query = "SELECT * FROM Patient WHERE Username = '$user' AND Password = '$pass'";

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");
    //this selects the results as rows

    $num = mysql_num_rows ($result);
    //if there is only 1 result returned than the data is ok 
    if ($num == 1)
    {
        //sends back a data of "Success"
header("Location: success.php");

    }
    else
    {
        //sends back a message of "failed"
        $error = "Unsuccessful Login";
    }
}

?>

<html>
<head>
</head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Back
                </a>
                <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                 Home  
                </a>
                <h3>
                    Login Process
                </h3>
            </div>
            <div data-role="content">

<?php  echo $error; ?>

            </div>
        </div>
    </body>
</html>` 
```

此外，我会敦促您查看[**PDO**](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDwQFjAB&url=http://php.net/manual/en/book.pdo.php&ei=RHhTUczHHtKS0QX-_4HADw&usg=AFQjCNFIwSE1mNG_k_lj0510AL_SsZs5Vg&sig2=9Z5RdON-fZZ4w1mqkqzm7g&bvm=bv.44442042,d.d2k)或[**mysqli**](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://php.net/manual/en/book.mysqli.php&ei=V3hTUey4G87w0gXi7ICICQ&usg=AFQjCNEqr4MIMr-la3jWWjZ1PQbJFnyFHw&sig2=ZELJJOwLiA_cwl3gnfDNYg&bvm=bv.44442042,d.d2k)并在继续处理此类事情之前准备好带有绑定值的语句，因为您正面临[**SQL 注入攻击**](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&sqi=2&ved=0CD4QFjAB&url=http://php.net/manual/en/security.database.sql-injection.php&ei=enhTUYzHB8LS0QWV8ICIDg&usg=AFQjCNGRclrZn3EfBy4yvkFld-bf5J5Vhw&sig2=HuiK4qDQbUbGdR2LQzoD-g&bvm=bv.44442042,d.d2k)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T23:20:49.873

您所要做的就是更改标题并退出脚本：

```
header("Location: http://www.example.com");
die(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T22:42:48.187

只需使用

```
header("Location: http://www.test.com"); 
```

请注意，如果之前没有发送输出，您只能设置标头重定向。没有一个单词，没有 html 语法，甚至没有一个简单的空格。

更多细节：[标题函数](http://php.net/manual/de/function.header.php "php.net")

因此，您必须将 PHP 部分放在脚本的顶部，并将成功/错误消息存储在变量中，而不是直接“回显”。

示例：请注意 if 子句中的变量“$return_message”。不再有“回声”，但在 HTML 上下文中，您会找到输出的回声。

```
<?php
// takes the variables from action script and assigns them php variables names
$user = $_POST ['username'];
$pass = $_POST ['password'];

// if there is a user name and password
if ($user && $pass)
{
    // connect to server
    mysql_connect("localhost", "", "") or die(mysql_error());
    //select database
    mysql_select_db("") or die(mysql_error());

    //Create a query that selects all data from the PATIENT table where the username and password match
    $query = "SELECT * FROM Patient WHERE Username = '$user' AND Password = '$pass'";

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");
    //this selects the results as rows

    $num = mysql_num_rows ($result);
    //if there is only 1 result returned than the data is ok 
    if ($num == 1)
    {
        //sends back a data of "Success"
        $return_message =  "Successful Login";
        $row=mysql_fetch_array($result);
        $_SESSION['Name'] = $row['Name'];
        $_SESSION['Address'] = $row['Address'];
    }
    else
    {
        //sends back a message of "failed"
        $return_message = echo "Unsuccessful Login";
    }
}

?></head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Back
                </a>
                <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                 Home  
                </a>
                <h3>
                    Login Process
                </h3>
            </div>
            <div data-role="content">

<?php echo $return_message; ?>

            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T22:44:14.713

你可以使用 JavaScript

```
 <script type="text/javascript">window.location = 'PathToYourPage.extension'</script> 
```

# matlab - 在代码运行时更改变量的值

> ID：15670918
> 
> 赞同：0
> 
> 时间：2013-03-27T22:40:09.207
> 
> 标签：matlab, callback, handle

我正在编写一个代码，它将获取光标的位置并输出声音信号。但这里有个问题：后台已经播放了一个 sin 函数，鼠标点击只会改变这个声音的 x 和 y 值。到目前为止，这是我想出的：

```
clear all
clc
k = 1:1200;
 k = k/5000;

 x=1;
 y=1;

while i<10;
    [x,y]=ginput(1)

 vib= 0.5*sin(2*pi*y*k);
 note=sin(pi*x*k*440);
 ses = note+vib;
 sound (ses);
 end 
```

如您所见，我的代码只是播放一个 sin 函数，但它是离散的。有人可以帮帮我吗？我研究了句柄和回调，但我就是想不通。我在网上找到的解释太复杂了，我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:16:41.360

声音（ses）；只需使用变量“ses”并播放。在播放时，您不能以您认为的方式干扰数据。您可以观察下一个 sound() 函数调用的变化。如果您想连续播放波形，可以查看此处：

[Matlab：如何使用回调获取单击时的当前鼠标位置](https://stackoverflow.com/questions/2769249/matlab-how-to-get-the-current-mouse-position-on-a-click-by-using-callbacks)

# sql-server - 选择何时将数据插入标识列

> ID：15670923
> 
> 赞同：1
> 
> 时间：2013-03-27T22:40:40.167
> 
> 标签：sql-server, sql-server-2008, tsql

我正在尝试从select语句中进行批量插入，但有时我想将Table2中的Identity保存到Table1中，但有时我希望Table2中没有数据时自动生成Table中的Identity，那么如何这会实现吗？

```
 INSERT INTO Table (ID,Name) 
 SELECT 
  CASE WHEN Col1 IS NOT NULL THEN Col1 ELSE @@identity END ID,
  Col2 Name,
 FROM Table2 
```

这是可能的还是我必须做 2 个单独的批量导入过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:11:19.567

是的，您需要两个批量插入：

```
SET IDENTITY_INSERT Table ON

INSERT INTO Table (ID,Name) 
SELECT 
Col1
Col2 Name
FROM Table2
WHERE Col1 IS NOT NULL

SET IDENTITY_INSERT Table OFF

INSERT INTO Table (Name) 
SELECT 
Col2 Name
FROM Table2
WHERE Col1 IS NULL 
```

# java - Opencv java - 将图像加载到 GUI

> ID：15670933
> 
> 赞同：20
> 
> 时间：2013-03-27T22:41:07.510
> 
> 标签：java, swing, user-interface, opencv

我正在使用 Java Opencv-2.4.4 和 swing GUI 开发应用程序。问题是我找不到任何解决方案，它显示了如何将处理后的图像（保存在*Mat*对象中）打印到 java swing GUI 的有效方法。此刻，我正在使用这个笨拙的解决方案：

```
javax.swing.JLabel outputImage;
outputImage.setIcon(new javax.swing.ImageIcon("/home/username/Output.png"));

private void sliderStateChanged(javax.swing.event.ChangeEvent evt) { 
       .
       .
  Mat canny; // Here is saved what I want to plot
  String filename = "/home/username/Output.png";
  Highgui.imwrite(filename, canny);  // write to disk
  outputImage.setIcon(new ImageIcon(ImageIO.read(new File(filename)))); //update Icon
       .
       .
} 
```

当用户更改某些值、输入等时，在 GUI 中我必须覆盖磁盘上的*Output.png*并使用磁盘中的新图像更新 jLabel。

有没有更优雅/有效的解决方案？*是否可以将Mat*对象直接绘制或转换为*Canvas*或*Image*或任何可在 swing 中打印为图像的东西？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T11:30:20.893

是的，有更优雅的方式来做到这一点。您可以将 Mat 转换为 BufferedImage 类型，然后使用 swing 加载它。将其转换为缓冲图像的代码是：

```
 Mat image_tmp = your image

    MatOfByte matOfByte = new MatOfByte();

    Highgui.imencode(".jpg", image_tmp, matOfByte); 

    byte[] byteArray = matOfByte.toArray();
    BufferedImage bufImage = null;

    try {

        InputStream in = new ByteArrayInputStream(byteArray);
        bufImage = ImageIO.read(in);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

然后你可以在你的 GUI 对象中绘制它：

```
g.drawImage(bufImage , 0, 0, null); 
```

其中 g 是 Graphics 类型

希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-31T02:30:15.867

jpeg 编码很有趣，但有几个问题：

*   它不是无损格式，压缩时会丢失图像数据
*   这需要相当长的时间（大约比下面建议的时间长 6 到 10 倍）

> ```
> public Image toBufferedImage(Mat m){
>       int type = BufferedImage.TYPE_BYTE_GRAY;
>       if ( m.channels() > 1 ) {
>           type = BufferedImage.TYPE_3BYTE_BGR;
>       }
>       int bufferSize = m.channels()*m.cols()*m.rows();
>       byte [] b = new byte[bufferSize];
>       m.get(0,0,b); // get all the pixels
>       BufferedImage image = new BufferedImage(m.cols(),m.rows(), type);
>       final byte[] targetPixels = ((DataBufferByte) image.getRaster().getDataBuffer()).getData();
>       System.arraycopy(b, 0, targetPixels, 0, b.length);  
>       return image;
> 
>   } 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-18T21:49:42.133

`Imshow()`这是Java OpenCV 中等效的现成解决方案，使用简单。API 将如下所示：

```
Imshow im = new Imshow("Title");
im.showImage(matimage); 
```

访问这里[https://github.com/master-atul/ImShow-Java-OpenCV](https://github.com/master-atul/ImShow-Java-OpenCV)

这是一个更好的解决方案，因为您不需要将图像存储到磁盘中并再次读取。因此，它减少了从磁盘读取的开销，因此速度更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-22T21:13:06.390

使用@andriy 的答案。我想出了这个解决方案。我使用 JFrame 而不是 Graphics。希望这可以帮助。

```
public void imshow(Mat src){
    BufferedImage bufImage = null;
    try {
        MatOfByte matOfByte = new MatOfByte();
        Highgui.imencode(".jpg", src, matOfByte); 
        byte[] byteArray = matOfByte.toArray();
        InputStream in = new ByteArrayInputStream(byteArray);
        bufImage = ImageIO.read(in);

        JFrame frame = new JFrame("Image");
        frame.getContentPane().setLayout(new FlowLayout());
        frame.getContentPane().add(new JLabel(new ImageIcon(bufImage)));
        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# python - Pandas、数据框 set_index 和重新索引

> ID：15670937
> 
> 赞同：3
> 
> 时间：2013-03-27T22:41:24.987
> 
> 标签：python, pandas, reindex

我想读入工作日数据，然后重新索引数据以用周五的数据填充周末。我已经尝试了以下代码，但它不会重新索引数据。Set_index 产生长度错误消息。

```
import pandas as pd

def fill_dataframe(filename):
    dataf = pd.read_csv(filename, header= None, index_col = [0])
return(dataf)

rng = pd.date_range('10/1/2010', periods=61)
date_rng = pd.DataFrame(rng,index = rng)

data_1.reindex(date_rng, method = 'ffill') 
```

读入的数据有 41 行，生成的日期值有 61 行。有什么建议么？

```
data read in by csv (1st 7 rows)
        X0     X1
10/1/2010  71.27
10/4/2010  70.33
10/5/2010  72.94
10/6/2010  74.15
10/7/2010  71.40
10/8/2010  72.58
10/11/2010  72.66

dates generated by rng in the second Data Frame (first 11 rows)
                         0
2010-10-01 2010-10-01 00:00:00
2010-10-02 2010-10-02 00:00:00
2010-10-03 2010-10-03 00:00:00
2010-10-04 2010-10-04 00:00:00
2010-10-05 2010-10-05 00:00:00
2010-10-06 2010-10-06 00:00:00
2010-10-07 2010-10-07 00:00:00
2010-10-08 2010-10-08 00:00:00
2010-10-09 2010-10-09 00:00:00
2010-10-10 2010-10-10 00:00:00
2010-10-11 2010-10-11 00:00:00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:52:37.173

仅按（1D）时间序列或作为一个系列重新索引（在 0.10.1 中）：

```
data_1.reindex(rng, method = 'ffill')
data_1.reindex(Series(rng, index=rng), method = 'ffill') 
```

.

*作为`date_rng`DataFrame，我得到TypeError：无法将时间戳与0进行比较，我怀疑这可能是一个错误，但我不完全确定预期的行为应该是什么......*

# c# - Rijndael 在 C# 中加密文件并在 Delphi 中解密为字符串

> ID：15670942
> 
> 赞同：1
> 
> 时间：2013-03-27T22:41:44.623
> 
> 标签：c#, delphi, encryption, aes, rijndael

我正在尝试在 C# 中加密文件并将 delphi 中的内容解密为字符串。我尝试了几种设置、键/块大小和模式。目前C#端的代码是：

```
private void EncryptFile(string inputFile, string keyCode, string outputFile)
{
    try         {   
        byte[] key = Encoding.Unicode.GetBytes(keyCode);
        byte[] iv = new byte[16];
        Array.Copy(key, iv, 16);

        FileStream fsCrypt = new FileStream(outputFile, FileMode.Create);

        var RMCrypto = new AesManaged();
        RMCrypto.KeySize = 256;
        RMCrypto.BlockSize = 128;
        RMCrypto.Mode = CipherMode.ECB;

        CryptoStream cs = new CryptoStream(fsCrypt,
                                           RMCrypto.CreateEncryptor(key, iv),
                                           CryptoStreamMode.Write);

        FileStream fsIn = new FileStream(inputFile, FileMode.Open);

        int data;
        while ((data = fsIn.ReadByte()) != -1)
            cs.WriteByte((byte)data);

        fsIn.Close();
        cs.Close();
        fsCrypt.Close();
    }
    catch (Exception e)
    {
        MessageBox.Show(e.Message);
    }
} 
```

关键参数是一个 C# 字符串“1234567887654321”。使用 DEC 库的 delphi 中的反向部分如下所示：

```
 procedure TForm1.Button1Click(Sender: TObject);

var
  RCipher: TCipher_Rijndael;
  FileStream: TFileStream;
  StringStream: TStringStream;
  StringBytes: TBytes;
  Key: String;

begin

  Key := '1234567887654321';

  StringBytes := TEncoding.Unicode.GetBytes(Key);

  RCipher := TCipher_Rijndael.Create();
  FileStream := TFileStream.Create('C:\path\to\file.txt', fmOpenRead);

  StringStream := TStringStream.Create('', TEncoding.ANSI);

  RCipher.Init(StringBytes[0], 32, StringBytes[0], 16);
  RCipher.Mode := cmECBx;
  RCipher.DecodeStream(FileStream, StringStream, FileStream.Size);

  Memo1.Text := StringStream.DataString;

  RCipher.Free;
  FileStream.Free;
  StringStream.Free;

end; 
```

但我得到的只是随机字符......问题可能出在哪里？算法是否相互不兼容？

编辑：用“随机字符”替换术语“中文字符”以避免与 unicode 问题混淆。

多亏了 pf1957，解决方案出乎意料但简单。我使用的是 Delphi Encryption Compendium library 5.1，它显然不符合 AEC。在我将代码升级到[DEC 5.2](https://code.google.com/p/delphidec/)库后一切正常。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T09:09:26.033

您正在使用 16 字节（128 位）密钥数据，同时将加密器/解密器设置为使用 256 位密钥。

因此，在您修复 TStringStream 的使用（*切勿*将其用于二进制数据）之后，检查两个库的代码或文档以了解如何处理关键数据 - 很可能它不直接用作密钥，而是用作“密码” ' 用于密钥派生过程。

# php - PDO 和性能

> ID：15670943
> 
> 赞同：0
> 
> 时间：2013-03-27T22:41:46.590
> 
> 标签：php, performance, pdo, performance-testing

有一个大型 php 应用程序使用 PDO api ( [http://php.net/pdo](http://php.net/pdo) ) 从一个或多个数据库存储和检索信息。在应用程序的软件开发生命周期中，您发现大量性能问题是由于 PDO API 调用花费了很长时间。

*   您如何确定每个 PDO API 调用花费了多少时间？我们没有兴趣将 DB 执行时间量与每个 API 调用的时间量区分开来。
*   您的解决方案如何影响应用程序的可维护性？具体来说，如果将新框架添加到应用程序中，您的解决方案将如何在该框架中调用 PDO？
*   您的解决方案可以通过哪些方式改变应用程序的性能特征？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:45:08.787

> 您如何确定每个 PDO API 调用花费了多少时间？我们没有兴趣将 DB 执行时间量与每个 API 调用的时间量区分开来。

我会继承`PDO`我的自定义类并将手表放在那里

> 您的解决方案如何影响应用程序的可维护性？具体来说，如果将新框架添加到应用程序中，您的解决方案将如何在该框架中调用 PDO？

可以与 PDO 一起使用的所有内容也可以与扩展一起使用。LSP原理

> 您的解决方案可以通过哪些方式改变应用程序的性能特征？

不（不包括存储分析结果的小开销，如果需要的话）

# python - Python on-the-fly 函数到脚本的转换

> ID：15670944
> 
> 赞同：0
> 
> 时间：2013-03-27T22:41:50.013
> 
> 标签：python

是否有一种合理自然的方式将 python 函数转换为独立脚本？就像是：

```
def f(): 
    # some long and involved computation

script = function_to_script(f) # now script is some sort of closure, 
                               # which can be run in a separate process
                               # or even shipped over the network to a 
                               # different host 
```

不喜欢：

```
script = open("script.py", "wt")
script.write("#!/usr/bin/env python")
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:48:48.387

您可以通过在其上定义方法将任何“对象”转换为函数`__call__`（请参见[此处](http://docs.python.org/2/reference/datamodel.html#object.__call__)。）因此，如果您想通过计算划分某些状态，只要您从顶部到底部提供的内容可以腌制一个类，然后可以腌制该对象。

```
class MyPickledFunction(object):
    def __init__(self, *state):
        self.__state = state

    def __call__(self, *args, **kwargs):
        #stuff in here 
```

这是最容易的骗子方法。为什么要腌制？任何可以腌制的东西都可以毫无顾忌地发送到另一个进程。通过使用这样的对象，您正在形成一个“穷人的封闭”。

（如果你想真正腌制一个函数，那么[这里](https://stackoverflow.com/questions/1253528/is-there-an-easy-way-to-pickle-a-python-function-or-otherwise-serialize-its-cod)有一篇关于“元帅”库的好帖子。）

# php - PHP 包含慢需要 2.5 秒

> ID：15670950
> 
> 赞同：-1
> 
> 时间：2013-03-27T22:42:28.017
> 
> 标签：php, performance, caching, include

我正在使用 jQuery ajax 显示数据表。我包含一个文件，第一次需要 2.5 秒。有点随意。我不知道为什么会这样。有人有任何线索吗？

**在 windows 7 中的本地 apache 服务器中**运行。是因为我的电脑在做某事还是因为我的硬盘碎片？我已经对我的硬盘进行碎片整理了。碎片是 0%。那么还有什么？有人遇到过这个问题吗？

问题是在我到达那部分代码之前我有很多包含。其中包括永远不会这么慢。我正在使用代码点火器框架。它包括许多文件。我什至放了完整的路径来找出它为什么会产生问题。徒劳无功。

```
$time_start = microtime_float();

include $plugindir."/resources/queries/$queryname".".php";

$time_end = microtime_float();
echo "elapsed seconds1 $time_end  $time_start  : ".($time_end-$time_start). " seconds"; 
```

并非总是如此。主要是第一次。有点怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:51:02.077

您计算的不是实际*包含*时间，而是包含+执行时间。因此，所需的时间很大程度上取决于您在包含文件中所做的事情。您很可能在此文件中有一些长时间运行的数据库查询。
还有一件事。`include $plugindir."/resources/queries/$queryname".".php";`如果您不检查`$queryname`任何可能的注射，使用是非常不安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:58:58.723

如果您使用的是 xdebug，请尝试在 php.ini 中更改此行：

```
xdebug.remote_enable=on 
```

对此：

```
xdebug.remote_enable=off 
```

如果您通过 localhost 连接，请改用 127.0.0.1，这似乎是[Windows 8](http://forum.wampserver.com/read.php?2,91602,page=3)上经常出现的问题，但总是值得一试！

# google-maps - 谷歌地图加载异步问题

> ID：15670952
> 
> 赞同：2
> 
> 时间：2013-03-27T22:42:33.467
> 
> 标签：google-maps, google-maps-api-3, same-origin-policy

我正在尝试让 Google Maps API v3 在我的网站上运行，但遇到了 2 个问题。

1.  我正在使用[yepnope](http://yepnopejs.com/)异步加载 API 脚本，我在控制台中收到“X-Frame-Options 拒绝加载”错误。它说[http://maps.googleapis.com/maps/api/js?sensor=false&callback=init_google_maps&ver=3.0](http://maps.googleapis.com/maps/api/js?sensor=false&callback=init_google_maps&ver=3.0)不允许跨域框架。这对我来说很奇怪，因为我没有在任何类型的框架中加载任何内容。请注意，地图仍在加载，但控制台中的错误与我有关。

2.  地图控件未正确显示。我不认为这与第一个问题有关，因为即使我以传统方式（同步）加载 API 时我也会得到这个，但它可能以某种方式相关。

![在此处输入图像描述](../Images/a75956532ec41df9ac606a95ecb2499a.png)

我不确定这是否重要，但我在我的“localhost”测试服务器上运行它。关于可能导致这些问题的任何想法？

**更新：** 如下所述，X-Frame 问题仅在我通过 yepnope 加载 API 时发生。我不明白为什么使用 yepnope 注入脚本标签会导致错误，而使用更简单的 js 函数却不会。然而，我主要关心的是地图的显示。我在本地服务器上更精简的页面上测试了地图，它显示正确。所以，我目前的假设是我在页面某处声明的样式（或脚本？）干扰了谷歌地图。

**更新2：** 好的，如果最终解决了显示问题。我浏览了我的主要样式表并注释掉了部分，直到我找到了罪魁祸首。为了使我的图像在我的流畅布局中响应，我声明了`img { max-width: 100%; }`. 显然，谷歌地图不喜欢这样。一旦我为地图容器覆盖了该样式，一切都会正常显示。然而，X-Frame 问题仍然让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:41:22.483

关于第一个问题，如果你想异步加载 Maps API，我建议直接使用[API 文档](https://developers.google.com/maps/documentation/javascript/tutorial?hl=no#Loading_the_Maps_API)中描述的技术（一个简单的动态插入`<script>`元素）而不是 yepnope。这样应该可以正常工作。

关于第二个问题，running on`localhost`没问题；这是测试 Maps API 页面的常规方法。`localhost://`（我假设您的意思是使用本地 Web 服务器并从URL 而非URL将页面加载到浏览器中`file://`。）

像这样的一些症状可能是由于地图容器元素在首次创建地图时没有正确调整大小造成的。特别是，尝试使用`height:100%`可能会出现问题。但是如果没有看到一个运行的例子就很难猜到。您可以将代码发布到某处的网页吗？如果没有别的，甚至可能在[JSFiddle中。](http://jsfiddle.net/)

# java - 如何使终端以全屏和自制软件打开并使用 Applescript 编写脚本

> ID：15670953
> 
> 赞同：1
> 
> 时间：2013-03-27T22:42:34.077
> 
> 标签：java, terminal, applescript, homebrew

我正在尝试在 Applescript 中编写一个脚本，以全屏​​和自制风格打开终端，然后让终端执行我编写的 java 程序。然后该程序将在终端（无 GUI）中运行。

到目前为止，这是我的代码。我已经能够让终端全屏并输入命令，但我无法自制

```
tell application "Terminal"
    do script "cd 'desktop/java/Amerika'; javac 'Amerika.java'; java 'Amerika'"
end tell

tell application "Terminal"
tell application "System Events"
        keystroke "f" using {control down, command down}
   end tell
end tell 
```

这是另一个脚本，如果我将它添加到前一个脚本中，只需在自制软件中打开一个新的终端窗口，有时全屏，有时不

```
tell application "System Events"
   tell process "Terminal"
      tell menu item "Homebrew" of menu "New Window" of menu item "New Window" of   menu "Shell" of menu bar item "Shell" of menu bar 1
          click
       end tell
   end tell
end tell 
```

第一个代码也有一些问题，因为它有时会打开一个全屏终端，有时它不会。

有没有办法让终端以全屏和自制风格打开然后执行一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:02:51.320

您还可以更改当前设置属性：

```
tell application "Terminal"
    do script "uptime"
    set current settings of result to settings set "Homebrew"
    activate
end tell
tell application "System Events"
    keystroke "f" using {control down, command down}
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:06:21.590

这应该可以：（有点样板但你肯定可以提取你需要的东西）

请注意，在执行脚本之前，您不能进入全屏模式，因为这不起作用。

```
if my UIscript_check(true) then

    if my do_submenu("Terminal", "Shell", "New Window", "Homebrew") then

        tell application "Terminal"

            -- here your script --
            do script "echo " & quoted form of "this is my script" in window 1

        end tell

        tell application "System Events"
            keystroke "f" using {control down, command down}
        end tell

    else
        beep
    end if

end if

on do_menu(app_name, menu_name, menu_item)
    try
        -- bring the target application to the front
        tell application app_name
            activate
        end tell
        tell application "System Events"
            tell process app_name
                tell menu bar 1
                    tell menu bar item menu_name
                        tell menu menu_name
                            click menu item menu_item
                        end tell
                    end tell
                end tell
            end tell
        end tell
        return true
    on error error_message
        return false
    end try
end do_menu

on do_submenu(app_name, menu_name, menu_item, submenu_item)
    try
        -- bring the target application to the front
        tell application app_name
            activate
        end tell
        tell application "System Events"
            tell process app_name
                tell menu bar 1
                    tell menu bar item menu_name
                        tell menu menu_name
                            tell menu item menu_item
                                tell menu menu_item
                                    click menu item submenu_item
                                end tell
                            end tell
                        end tell
                    end tell
                end tell
            end tell
        end tell
        return true
    on error error_message
        return false
    end try
end do_submenu

on UIscript_check(with_msg)
    -- get the system version
    set the hexData to system attribute "sysv"
    set hexString to {}
    repeat 4 times
        set hexString to ((hexData mod 16) as string) & hexString
        set hexData to hexData div 16
    end repeat
    set the OS_version to the hexString as string
    if the OS_version is less than "1030" then
        display dialog "This script requires the installation of Mac OS X 10.3 or higher." buttons {"Cancel"} default button 1 with icon 2
    end if
    -- check to see if assistive devices is enabled
    tell application "System Events"
        set UI_enabled to UI elements enabled
    end tell
    if UI_enabled is false then
        if (with_msg) then
            tell application "System Preferences"
                activate
                set current pane to pane "com.apple.preference.universalaccess"
                display dialog "This script utilizes the built-in Graphic User Interface Scripting architecture of Mac OS X which is currently disabled." & return & return & "You can activate GUI Scripting by selecting the checkbox \"Enable access for assistive devices\" in the Universal Access preference pane." with icon 1 buttons {"OK"} default button 1
            end tell
        end if
        return false
    else
        return true
    end if
end UIscript_check 
```

# jquery - 没有样式的 AJAX 请求 jQuery 链接

> ID：15670956
> 
> 赞同：0
> 
> 时间：2013-03-27T22:43:03.950
> 
> 标签：jquery, css, ajax, request, href

我有这个代码。它获取请求数据并将其显示在 DIV 中并刷新。

为什么它可以在 DIV 中显示请求的数据，例如“简单文本”，但不能显示例如这一行：

```
<a href="#" data-role="button">Button</a> 
```

应用/渲染 CSS 和 jQuery.mobile 按钮样式？我错过了什么吗？

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css">
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <script>
      function GetData()
      {
        nocache = "&nocache=" + Math.random() * 1000000;
        var request = new XMLHttpRequest();
        request.onreadystatechange = function()
        {
          if (this.readyState == 4) {
            if (this.status == 200) {
              if (this.responseText != null) {
                document.getElementById("buttons").innerHTML = this.responseText;
              }
            }
          }
        }
        request.open("GET", "state" + nocache, true);
        request.send(null);
        setTimeout('GetData()', 1000);
      }
    </script>
  </head>
  <body onload="GetData()">
    <div id="buttons" data-role="content">  
    </div>  
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:45:24.547

将其替换`document.getElementById("buttons").innerHTML = this.responseText;`为

```
$("#buttons").html(this.responseText); 
```

我就是做这个的。

此外，当您使用 jQuery 时，您可以将大部分用于检查就绪状态等的代码替换为`$(function(){ //your code here });`

然后，您也可以取消`<body onload="GetDate()">`并简单地拥有`<body>`.

# python - 在python中对直方图中的值进行排序并绘制它们

> ID：15670957
> 
> 赞同：4
> 
> 时间：2013-03-27T22:43:04.313
> 
> 标签：python, sorting, matplotlib, histogram

所以说我有以下内容：

[1,5,1,1,6,3,3,4,5,5,5,2,5]

计数：1-3 2-1 3-2 4-1 5-5 6-1

现在，我想打印一个在 x 轴上排序的直方图，如下所示：

不是：1 2 3 4 5 6

但按总数排序：2 4 6 3 1 5。

请帮帮我！谢谢...

我当前的绘图代码是：

```
 plt.clf()
    plt.cla()
    plt.xlim(0,1)
    plt.axvline(x=.85, color='r',linewidth=0.1)
    plt.hist(correlation,2000,(0.0,1.0))
    plt.xlabel(index[thecolumn]+' histogram')
    plt.ylabel('X Data')

    savefig(histogramsave,format='pdf') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:52:53.343

使用`collections.Counter`，使用 对项目进行排序`sorted`，传入自定义键函数：

```
>>> from collections import Counter
>>> values = [1,5,1,1,6,3,3,4,5,5,5,2,5]
>>> counts = Counter(values)
>>> for k, count in reversed(counts.most_common()):
>>>     print(k, count * 'x')

2 x
4 x
6 x
3 xx
1 xxx
5 xxxxx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:55:26.947

史蒂文的想法是正确的。馆藏图书馆可以帮您解决问题。

如果您想手动完成这项工作，您可以构建如下内容：

```
data = [1,5,1,1,6,3,3,4,5,5,5,2,5]
counts = {}
for x in data:
    if x not in counts.keys():
        counts[x]=0
    counts[x]+=1

tupleList = []
for k,v in counts.items():
    tupleList.append((k,v))

for x in sorted(tupleList, key=lambda tup: tup[1]):
    print "%s" % x[0],
print 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:56:58.250

您必须对其进行计数和排序，如下例所示：

```
>>> from collections import defaultdict
>>> l = [1,5,1,1,6,3,3,4,5,5,5,2,5]
>>> d = defaultdict(int)
>>> for e in l:
...     d[e] += 1
... 
>>> print sorted(d,key=lambda e:d[e])
[2, 4, 6, 3, 1, 5] 
```

# ruby-on-rails-3 - rails observe_form 和原型：返回 '$A($(form).getElementsByTagName('*'))'

> ID：15670960
> 
> 赞同：1
> 
> 时间：2013-03-27T22:43:19.220
> 
> 标签：ruby-on-rails-3, prototypejs, ruby-on-rails-2, updating, rjs

我在我的视图中有observe_form： `<%= observe_form 'new_lead', :url => { :action => 'update_price' }, :frequency => 0.1 %>` ，_update_price.rjs 部分和控制器中的这个方法：

```
 def update_price
        unless request.xhr?
          redirect_to :controller => 'index'
        else
          set_price_group

          render :partial => "update_price", 
                 :locals  => { :services => params[:service], 
                               :spectr   => params[:spectr]   }
        end
      end 
```

我正在将 rails_2 应用程序升级到 rails_3。在 rails_2 上没有错误，但是当我将项目升级到 rails3 时，prototype.js 的 3484 行出现 javascript 错误：“$(...).getElementsByTagName is not a function”。

```
 getElements: function(form) {
        return $A($(form).getElementsByTagName('*')).inject([],
        function(elements, child) {
          if (Form.Element.Serializers[child.tagName.toLowerCase()])
            elements.push(Element.extend(child));
          return elements;
        }
       );}, 
```

并且“update_price”不会定期调用。我不知道这是与 Rails 升级有关的问题还是只是 JS 的问题 :( 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:37:13.513

Rails 3.1 使用 jQuery 而不是 Prototypejs。[您可以使用https://github.com/rails/prototype-rails](https://github.com/rails/prototype-rails)之类的东西来取回原型功能

相关[如何在 Rails 3.1 中将 jquery 交换为原型](https://stackoverflow.com/questions/7534122/how-to-swap-jquery-for-prototype-in-rails-3-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:43:50.377

比如果有人有错误：

```
 TypeError: document.on is not a function 
```

将prototype.js 1.6.x 更改为1.7 将解决它；）

# graphics - 在中心连接的矩形之间的间隙

> ID：15670963
> 
> 赞同：1
> 
> 时间：2013-03-27T22:43:49.723
> 
> 标签：graphics, geometry, rendering, rectangles, line-segment

我正在尝试一种基于矢量的图形样式，其中对象表示为具有给定宽度的一系列线段（将这些视为矩形可能更容易）。问题是这些段在中心连接并留下间隙（如下所示）。我已经确定覆盖这个间隙的最有效方法是简单地用一个三角形覆盖它，因为我在 OpenGL 中工作，所以我需要的是不与另一个矩形重叠的两个点的点，第三点是连接两条线段（矩形）的中心点。鉴于我拥有两个矩形的所有点，我如何确定三角形需要使用哪些点？

![例子](../Images/c4394c546de154e6c1bebaf419b60b10.png)

编辑：我也会接受替代解决方案，只要它们能弥补这一差距。

编辑2：没关系，我解决了。一旦我有更好的互联网连接，我会发布代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:29:11.583

也许我误解了这个问题......但是如果你放大红色五边形的顶角，你会得到这样的东西，对吗？

![两个多边形边之间的交汇点](../Images/056aa2f4cebbe9b8f6d5cdb2ff1f7323.png)

其中 A 和 B 是 edge1 矩形上的节点， C 和 D 是 edge2 矩形上的节点。你说你已经知道这些坐标了。从你所说的来看，边缘在中心相遇，在A和B之间，也在C和D之间。所以称这个点为X，我猜你可以很容易地计算出它的坐标。

所以你需要做的就是画出缺失的三角形AXC，对吧？因此，一种方法是确定 A 和 C 位于多边形的“外部”（因此需要填充），而 B 和 D 位于“内部”，因此不需要。但是两者都画可能更容易，因为它没有伤害。所以如果你填写 AXC 和 BXD，你会得到：

![在此处输入图像描述](../Images/ce5d6e12449a9dee201e6a5f447c3b42.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:11:07.483

我找到的解决方案假设有 3 种基本情况：

首先，两个矩形的三个唯一中心点向上（正 y 方向），因此间隙位于连接的左侧或右侧。在我的代码中，我将矩形的角点按它们在中心点的左侧或右侧的方向组织，所以如果底部矩形的左点低于顶部矩形的左点，则间隙在左点之间两个矩形，否则间隙在正确的点之间。

其次，三个独特的中心点在大多数中心点的中心都有最大值，因此差距在顶部。然后，间隙位于具有最大 y 值的两个点之间。

第三，三个独特的中心点在大多数中心点的中心都有最小值，因此间隙在底部。然后，间隙位于具有最小 y 值的两个点之间。

[如果需要，我将发布示例案例的图片]

# jasper-reports - Jasper 报告：重叠字段未显示在 Excel 输出中

> ID：15670964
> 
> 赞同：2
> 
> 时间：2013-03-27T22:43:51.667
> 
> 标签：jasper-reports, ireport

举个例子：

我有一个非常宽的列（比如说 150pt），位于 x=0 我有 2 列 25pt，位于 x=100 和 x=125。因此，这些与第一个重叠。

根据某些条件（报告的参数），我打印或不打印 2 个重叠的列。我通过使用“print when expression ...”来做到这一点。

当我使用 PDF 作为输出时，这就像一个魅力，但是当我在 excel 中生成报告时，我没有得到大字段，它只是丢失了。只要我不打印 2 个重叠字段，一切都会正常。

关于如何解决这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-02T23:38:22.820

听起来答案是否定的……希望有更好的答案

[http://community.jaspersoft.com/questions/503288/missing-columns-excel](http://community.jaspersoft.com/questions/503288/missing-columns-excel)

> ...列重叠。而所谓的“网格导出器”，如 HTML、XLS 和 CSV 导出器，不支持重叠元素。后面的元素不打印。
> 
> 我希望这有帮助。特奥多尔

# iphone - 在已发布的 iPhone 应用中构建优化级别的设置

> ID：15670972
> 
> 赞同：2
> 
> 时间：2013-03-27T22:44:29.913
> 
> 标签：iphone, ios, objective-c, xcode

由于某些问题，我的 iPhone 应用提交的 Apple 审核已被拒绝很多次。

当我用我的 iPhone 测试它时，没有任何问题。但苹果审稿人发现了一些错误。

我知道当我想在发布的应用程序中进行测试时，我应该将编辑方案“调试”中的构建配置更改为“发布”，我意识到为什么我的应用程序行为在调试和发布之间的差异是优化级别的构建设置。

在构建设置中，Debug 的优化级别为“None[-O0]”，Release 的优化级别为“Fastest,Smallest[-Os]”。在我将 Release "Fastest,Smallest[-Os]" 的优化级别更改为 "None[-O0]" 后，我认为有些问题已经解决了。

最后我想问这个问题。如果我将我的 iPhone 应用程序提交给 Apple 并优化级别为 Release“None[-O0]”，会发生什么事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T22:49:21.583

该应用程序可能会比以前运行得更慢，并且更大。

您可能应该修复错误，而不是希望它们不再出现。尝试使用静态分析器（在 Xcode 中构建 -> 分析）来查找问题。

如果需要，您可以向 App Reviewers 询问更多详细信息，他们会很乐意为您提供重现步骤、崩溃日志等。

# python - matplotlib路径线宽连接到图形缩放

> ID：15670973
> 
> 赞同：3
> 
> 时间：2013-03-27T22:44:29.993
> 
> 标签：python, python-3.x, matplotlib

是否可以将 matplotlib 路径的线宽与图形缩放/比例级别联系起来？

我正在绘制一张地图，其中 matplotlib 路径（带有贝塞尔曲线）在地图上绘制道路。放大后，我希望放大路径的宽度。

在附加的脚本中，多边形近似可以正确缩放，但路径（红线）不能缩放（宽度）。

是否可以将线宽与某种比例变换联系起来并通过回调重绘？

```
import matplotlib.pyplot as plt
from matplotlib.path import Path
import matplotlib.patches as patches
import numpy as np

def main():
  ax = plt.subplot(111)
  verts = np.array([ (0., 0.), (0.5, .5), (1., 0.8), (0.8, 0.)])
  codes = np.array([Path.MOVETO, Path.CURVE4, Path.CURVE4, Path.LINETO ])

  # Can this curve have zoomable width
  path = Path(verts, codes)
  patch = patches.PathPatch(path, fc='none', color='r', lw=4, zorder=3)
  ax.add_patch(patch)

  ax.plot(verts[:,0], verts[:,1], 'o--', lw=2, color='k', zorder=2)

  # these will be polygonal approx that will have proper zoom
  v=np.array([]).reshape((-1,2))
  c=[]
  for i in range(len(verts)-1):
    vtmp, ctmp = line2poly(verts[[i,i+1],:],0.03)
    v = np.vstack( (v,vtmp) )
    c = np.concatenate( (c,ctmp) )
  path_zoom = Path(v,c)
  patch_zoom =  patches.PathPatch(path_zoom, fc='r', ec='k', zorder=1, alpha=0.4)
  ax.add_patch(patch_zoom)

  ax.set_xlim(-0.1, 1.1)
  ax.set_ylim(-0.1, 1.1)
  plt.show()

def line2poly(line, width):
  dx,dy = np.hstack(np.diff(line,axis=0)).tolist()
  theta = np.arctan2(dy,dx)
  print(np.hstack(np.diff(line,axis=0)).tolist())
  print(np.degrees(theta))
  s = width/2 * np.sin(theta)
  c = width/2 * np.cos(theta)
  trans = np.array([(-s,c),(s,-c),(s,-c),(-s,c)])

  verts = line[[0,0,1,1],:]+trans
  verts = np.vstack((verts, verts[0,:]))
  codes = np.array([Path.MOVETO, Path.LINETO, Path.LINETO, Path.LINETO, Path.CLOSEPOLY])
  return verts,codes

if __name__=='__main__':
  main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T02:33:38.280

据我所知，在 matplotlib 中无法做到这一点，因为线条的笔划宽度不能直接与数据坐标相关联。（正如您所提到的，您可以将回调连接到绘图事件并完成此操作。但这会导致很大的性能损失。）

但是，一个快速的解决方法是`shapely`通过缓冲街道路径来生成多边形。

举个简单的例子：

```
import shapely.geometry
import descartes
import matplotlib.pyplot as plt

lines = ([(0, 0), (1, 0), (0, 1)],
         [(0, 0), (1, 1)],
         [(0.5, 0.5), (1, 0.5)],
         )
lines = shapely.geometry.MultiLineString(lines)
# "0.05" is the _radius_ in data coords, so the width will be 0.1 units.
poly = lines.buffer(0.05)

fig, ax = plt.subplots()
patch = descartes.PolygonPatch(poly, fc='gray', ec='black')
ax.add_artist(patch)

# Rescale things to leave a bit of room around the edges...
ax.margins(0.1)

plt.show() 
```

![在此处输入图像描述](../Images/7ca51f2b43fbfcb26fb0c3ee1e7d6f66.png)

如果您确实想采用回调路由，则可以执行以下操作：

```
import matplotlib.pyplot as plt

def main():
    lines = ([(0, 0), (1, 0), (0, 1)],
             [(0, 0), (1, 1)],
             [(0.5, 0.5), (1, 0.5)],
             )

    fig, ax = plt.subplots()
    artists = []
    for verts in lines:
        x, y = zip(*verts)
        line, = ax.plot(x, y)
        artists.append(line)

    scalar = StrokeScalar(artists, 0.1)
    ax.callbacks.connect('xlim_changed', scalar)
    ax.callbacks.connect('ylim_changed', scalar)

    # Rescale things to leave a bit of room around the edges...
    ax.margins(0.05)

    plt.show()

class StrokeScalar(object):
    def __init__(self, artists, width):
        self.width = width
        self.artists = artists
        # Assume there's only one axes and one figure, for the moment...
        self.ax = artists[0].axes
        self.fig = self.ax.figure

    def __call__(self, event):
        """Intended to be connected to a draw event callback."""
        for artist in self.artists:
            artist.set_linewidth(self.stroke_width)

    @property
    def stroke_width(self):
        positions = [[0, 0], [self.width, self.width]]
        to_inches = self.fig.dpi_scale_trans.inverted().transform
        pixels = self.ax.transData.transform(positions)
        points = to_inches(pixels) * 72
        return points.ptp(axis=0).mean() # Not quite correct...

main() 
```

![在此处输入图像描述](../Images/09b86afb0883f898c984a9fd37b570b0.png)

# c# - 使用 rhino mocks 创建一个测试用例来模拟 webclient 方法

> ID：15670975
> 
> 赞同：0
> 
> 时间：2013-03-27T22:44:41.597
> 
> 标签：c#, rhino-mocks

我是 rhino Mocks 的新手，我需要为以下方法编写一个单元测试用例：

```
public string PutFileInArchive(string fileName, string userId, string mimeType, byte[] fileContents, IocContainer container)
    {
        string archiveId;

        try
        {
            IArchiveService _archiveService = container.Resolve<IArchiveService>();
            archiveId = _archiveService.Archive(fileName, mimeType, userId, fileContents);
        }
        catch (Exception ex)
        {             
            throw;
        }

        return archiveId;
    } 
```

上述方法在内部调用了我需要模拟的 Web 客户端方法。我创建了一个存根，但我不知道如何使用它。我的方法总是调用实际的 webclient 方法。

```
[TestMethod()]
    public void Archive_PutFileInArchive_ShouldPut()
    {
        StreamReader reader = new StreamReader("C:\\File.txt");
        MemoryFile file = new MemoryFile(reader.BaseStream, "string", "File.txt");

        HttpPostedFileBase postedFile = file;

        var fileContents = new byte[file.ContentLength];
            file.InputStream.Read(fileContents, 0, file.ContentLength);

        IFileArchiveService fileArchiveService = MockRepository.GenerateMock<IFileArchiveService>();

        fileArchiveService.Stub(x => x.Archive("File.txt", "text/plain", "webuser1", fileContents)).Repeat.Once().Return("12345");

        Archive archive = new Archive();
        string fileid = archive.PutFileInArchive("File.txt", "webuser1", "text/plain", fileContents, container);

        Assert.AreEqual("12345", fileid);
    } 
```

请让我知道如何在这种情况下使用模拟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:37:03.947

您的方法正在调用实际的 webclient 方法，因为实际的 webclient 在容器中注册为`IFileArchiveService`.

要改用存根，您需要在调用之前 将`fileArchiveService`其`container`作为实现`IFileArchiveService``archive.PutFileInArchive()`

```
container.RegisterInstance<IFileArchiveService>(fileArchiveService);
string fileid = archive.PutFileInArchive("File.txt", "webuser1", "text/plain", fileContents, container); 
```

实际上，我建议使用不同的容器进行测试和应用程序。

# function - plpgsql：函数内奇怪的隐式转换

> ID：15670976
> 
> 赞同：2
> 
> 时间：2013-03-27T22:44:43.400
> 
> 标签：function, postgresql, casting, plpgsql

我正在使用 PostgreSQL 8.1。

我对这个函数中隐式转换的情况感到困惑：

```
CREATE OR REPLACE FUNCTION this_is_weird(v_input TEXT)
RETURNS TEXT AS $$
BEGIN
        IF v_input > 113 THEN
                RETURN 'answer1';
        ELSE
                RETURN 'answer2';
        END IF;
END;
$$ LANGUAGE plpgsql; 
```

输入`'17'`（作为字符串）给出返回值`'answer1'`。但是如果我输入

```
SELECT '17' > 113 
```

在 psql 中，我得到`'f'`.

（我当然可以通过添加明确的演员来解决这个问题，`v_input::integer`.）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:02:21.543

在*词法*比较中，`17` *大于*`113`：

```
regress=> SELECT '17' > '113';
?column? 
----------
 t
(1 row) 
```

如果要进行数字比较，请不要进行文本比较。

因为您正在将文本值与数字进行比较，所以将数字转换为文本并作为文本进行比较。您的代码“有效”（即运行没有错误），因为它依赖于非常旧的 PostgreSQL 版本中的错误功能，在该版本中，服务器会在需要时将操作数隐式转换为文本。事实证明，这可以掩盖应用程序错误，并且可以轻松编写不正确的代码，因此在 8.3 中删除了隐式强制转换。有关该主题的一些信息，请参阅[Peter 的博客条目](http://petereisentraut.blogspot.com.au/2008/03/readding-implicit-casts-in-postgresql.html)。

在 PostgreSQL 8.3 及更高版本中，您的代码会产生错误。

您需要计划升级，从长远来看，出于各种原因，它将为您节省时间和麻烦。删除有`max_fsm_pages`利于自动调整它；能见度图；大大改进了自动真空；...即使您不需要性能改进，升级也有很多好处。阅读每个主要版本（8.2.0、8.3.0 等）的发行说明以获取升级和兼容性建议。

# c - 将 malloc 的结果转换为 char（不是 char*） - 为什么编译器不抱怨？

> ID：15670977
> 
> 赞同：5
> 
> 时间：2013-03-27T22:44:46.367
> 
> 标签：c, casting

```
tmpString = (char*)malloc((strlen(name) + 1) * sizeof(char));
tmpString = (char )malloc((strlen(name) + 1) * sizeof(char)); 
```

这两条线有什么区别？

我的理解是第二行是错误的，但由于某种原因编译器什么也没说。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:50:06.960

第一行将 malloc 返回的 (void) 指针转换为指向 char 的指针，从而保留其指针性。它告诉编译器的只是“位置 X 的内存应该被视为一个字符数组”。

第二次强制转换将 malloc 返回的指针转换为单个字符。这很糟糕，原因有很多：

*   你失去了指针，因为你刚刚把指针变成了完全不同的东西
*   您还丢失了指针的大部分数值，因为字符的大小远小于指针的大小（在很多情况下，指针的大小是 32 或 64 位，但字符只有 8位）和“多余的”位被丢弃。

我认为警告级别足够高的编译器应该警告第二次分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:46:52.807

第二行是错误的（转换为 a`char`会将指针截断为仅一个字节，使数据`tmpString`包含无效地址），但 C 中的所有转换都未经检查，因此您永远不会对它们产生错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T22:47:08.490

是的，第二行有未定义的行为。由于情况是明确的，编译器只是假设您知道自己在做什么。本质上，第二个转换将指针值的第一个字节解释为字符代码。最后一句话只是说明性的——你甚至不能完全相信那会发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T23:33:08.577

假设`tmpString`有 type `char *`，那么第二行*应该*是违反约束的，至少在[最新的标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)下：

> ### 6.5.16.1 简单赋值
> 
> **约束**
> 
> 1 应满足以下条件之一：^(112)) — 左操作数具有原子、合格或不合格算术类型，而右操作数具有算术类型；
> 
> — 左操作数具有与右操作数兼容的结构或联合类型的原子、限定或非限定版本；
> 
> —**左操作数具有原子、限定或非限定指针类型，并且（考虑左操作数在左值转换后将具有的类型）两个操作数都是指向兼容类型的限定或非限定版本的指针，并且 left 指向的类型具有right 指向的类型的所有限定符；**
> 
> —**左操作数具有原子、限定或非限定指针类型，并且（考虑左操作数在左值转换后将具有的类型）一个操作数是指向对象类型的指针，另一个是指向的限定或非限定版本的指针void，并且left指向的类型具有right指向的类型的所有限定符；**
> 
> — 左操作数是原子的、限定的或非限定的指针，右操作数是空指针常量；或
> 
> — 左操作数的类型为 atomic、qualiified 或 unqualiified _Bool，而右操作数是指针。

还是我错过了什么？

# css - chrome中的CSS下拉菜单问题

> ID：15670980
> 
> 赞同：0
> 
> 时间：2013-03-27T22:44:51.737
> 
> 标签：css, google-chrome, twitter-bootstrap, drop-down-menu

它在 FF 中的外观和功能：

![i.imgur.com/AreNVWX.png](../Images/1054a90849c37951c29ef56bc364b6f4.png)

它在 chrome 中的外观：

![i.imgur.com/hT8FGD3.png](../Images/54e201b41d7cb88d404a2e1c0ab65f4b.png)

[http://mindwuehle.de/](http://mindwuehle.de/) - 看看你自己

我在当前项目中遇到了一个奇怪的问题。我正在使用引导程序开发 wordpress 主题。该主题有一个带有菜单和子菜单的顶部导航栏。

但由于某种原因，第二个下拉菜单没有正确显示，部分被隐藏了。任何地方都没有这种大小的 div，而且“检查元素”我也无法弄清楚。

然而，最奇怪的部分是：当您从左侧移至问题链接时，下拉列表会正确显示，如果您从右侧进入，则它已损坏。

我没有更改引导 css 中的任何内容，所以我只会附上我自己的样式表和 html，因为错误很可能在这里的某个地方找到：

```
html, body {
    height: 100%;
}

#wrap {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin: 0 auto -120px;
}

/**
 * Global Styles
 */

a , a:hover, a:visited, a:focus, a:active{
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    -webkit-tap-highlight-color: transparent;
}

body{
    background: #fff;
}

header{
    background: #a31010;
    height: 100px;
    color: white;
    padding-top: 25px;
    padding-bottom: 25px;
    font-size: 24px;
}

p {
    text-align: justify;
}

i.button-overlay {
    position: absolute;
    margin: 8px;
    z-index: 1;
}

.nav-pills>li>a:hover {
    color: #000;
}

.if-ie {
    position: absolute;
    right:5em;
    width: 500px;
}

.close {
    font-size: 40px;
}

.form-search {
    margin: 20px auto;
    margin-bottom: 20px;
    width: 210px;
}

.page-header {
    margin-top:0px;
    border-bottom: 0px; 
    margin-left:0px;
}

.page-header a{
    color: white;
}

.page-header a:hover{
    text-decoration: none;
}

li.widget {
    list-style-type: none;
}

#page-content {
    -webkit-box-shadow: 0px 1px  1px 1 rgba(0,0,0,.5);
    -moz-box-shadow: 0px 1px  1px   rgba(0,0,0,.5);
    box-shadow: 0px 1px  1px   rgba(0,0,0,.5);
    background-color: #fff;
    margin-top: -10px;
    z-index: 3;
}

/**
* Desktop Navigation, issue may be here somewhere
*/
.navbar .nav>li>a.issue{
    color: red;
}

.navbar{
    -webkit-box-shadow: 0px 1px  20px 1 rgba(0,0,0,.5);
    -moz-box-shadow: 0px 1px  20px   rgba(0,0,0,.5);
    box-shadow: 0px 1px  20px   rgba(0,0,0,.5);
}

.nav {
    width: 100%;
}

.navbar ul ul {
    position: absolute;
    top:-99999999px;
    opacity: 0;
    background-color:#f8f8f8;
    color:#000;
    text-align: left;
    box-shadow: 2px 2px 0 #b5b5b5;
    list-style-type: none;
    margin-left: 0;
}

.navbar ul li:hover > ul{
    position: absolute;
    top:100%;
    opacity: 1;
    border-top: 1px solid #a7a7a7;
    z-index: 3;
}

.navbar .navbar-inner {
    padding: 0;
    min-height: 40px;
    padding-left: 20px;
    padding-right: 20px;
    background-color:   #d6d4bb;
    background-image: -moz-linear-gradient(top, ##d6d4bb, ##c3c09c);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(##d6d4bb), to(##c3c09c));
    background-image: -webkit-linear-gradient(top, ##d6d4bb, ##c3c09c);
    background-image: -o-linear-gradient(top, ##d6d4bb, ##c3c09c);
    background-image: linear-gradient(to bottom, ##d6d4bb, ##c3c09c);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='##d6d4bbf', endColorstr='#ff#c3c09c', GradientType=0);
    border: 1px solid #d4d4d4;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
    border-radius: 0;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.065);
    -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.065);
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.065);
}

.navbar ul ul a {
    width: 160px;
    line-height: 40px;
    padding: 0 20px;
    display: block;
}

.sub-menu a {
    border-right:0px;
}

.sub-menu ul.sub-menu{
    margin-left:5px;
}

ul.nav ul.sub-menu li {
    display:block;
    z-index: 3;
}

ul.nav ul.sub-menu li:hover > ul{
    position: absolute;
    top:0px;
    opacity: 1;
    left:197px;
    border-top: 0px;
}

ul.nav ul.sub-menu a{
    text-align: left;
}
.navbar ul li {
    position: relative;
    float:left;
}

.navbar .nav {
    -webkit-margin: 0;
    -moz-margin:-10px 0 0;
}
.navbar .nav li {
    display: table-cell;
    width: 1%;
    float: none;
}
.navbar .nav li a{
    font-weight: bold;
    text-align: center;
    border-left: 1px solid rgba(255,255,255,.75);
    border-right: 1px solid rgba(0,0,0,.1);
}

ul.sub-menu li a {
    color: #777777;
    text-decoration: none;
    text-shadow: 0 1px 0 #ffffff;
}

ul.sub-menu li a:hover {
    color: #a31010;
    text-decoration: none;
    text-shadow: 0 1px 0 #ffffff;
}

.navbar .nav li:first-child a {
    border-left: 0;
}
.navbar .nav li:last-child a {
    border-right: 0;
}

ul.sub-menu li a:hover {
    background-color: #e3e3e3;
}

/******** End of Navigation **********/

.item img{
    width: 100%;
}

.media{
    padding: 15px;
    border-bottom: 3px solid #e5e5e5;
}

.nav-pills>.active>a, .nav-pills>.active>a:hover, .nav-pills>.active>a:focus {
color: #ffffff;
background-color: #a31010;
}

.hero-unit {
        padding:0;
    } 
```

HTML：导航问题 ×</button> 警告！</h4> 您使用的是旧浏览器。要正确查看本网站，请使用较新版本的 Chrome 或 Firefox。</div>

```
 </div>
                    </div>
                </div>
            </div>
        </header>
        <div class="hidden-phone">
            <div class="navbar">
                <div class="navbar-inner">
                    <div class="menu-main-nav-container">
                        <ul id="menu-main-nav" class="nav">
                            <li id="menu-item" class="menu-item menu-item-home">
                                <a href="#">Start</a>
                            </li>
                            <li id="menu-item" class="menu-item"><a class="issue" href="#">Issues here</a>
                                <ul class="sub-menu">
                                    <li id="menu-item" class="menu-item "><a href="#">Link</a></li>
                                    <li id="menu-item" class="menu-item "><a href="#">Link</a></li>
                                    <li id="menu-item" class="menu-item "><a href="#">Link</a></li>
                                </ul>
                            </li>
                            <li id="menu-item" class="menu-item "><a href="#">Link</a>
                                <ul class="sub-menu">
                                    <li id="menu-item" class="menu-item ">
                                        <a href="#">Link</a>
                                    </li>
                                    <li id="menu-item" class="menu-item ">
                                        <a href="#">Link</a>
                                    </li>
                                    <li id="menu-item" class="menu-item "><a href="#">Link</a>
                                        <ul class="sub-menu">
                                            <li id="menu-item" class="menu-item ">
                                                <a href="#">Sub-Link</a>
                                            </li>
                                            <li id="menu-item" class="menu-item">
                                                <a href="#">Sub-Link</a>
                                            </li>
                                            <li id="menu-item" class="menu-item">
                                                <a href="#">Sub-Link</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li id="menu-item" class="menu-item">
                                        <a href="#">Link</a>
                                    </li>
                                </ul>
                            </li>
                            <li id="menu-item" class="menu-item ">
                                <a href="#">Link</a>
                            </li>
                            <li id="menu-item" class="menu-item">
                                <a href="#">Link</a>
                            </li>
                            <li id="menu-item" class="menu-item "><a href="#">Link</a>
                                <ul class="sub-menu">
                                    <li id="menu-item" class="menu-item ">
                                        <a href="#">Link</a>
                                    </li>
                                    <li id="menu-item" class="menu-item">
                                        <a href="#">Link</a>
                                    </li>
                                </ul>
                            </li>
                            <li id="menu-item" class="menu-item">
                                <a href="#">Link</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    <div id="main-content" class="container">

            <div class="row">
                <div class="span8">
                    <div class="textwidget">
                        <div class="hero-unit well">
                            <h4>Call to Action Text</h4> <a href="#/" class="btn btn-success btn-small">more</a>
                        </div>
                    </div>
                </div>
                <div class="span4 randompic">
                        <div class="form-search">
                            <form method="get" class="input-append" id="searchform" action="#">
                                <input type="text" class="field span2" name="s"  id="appendedInputButton"  placeholder="enter text" />
                                <i class="icon-search button-overlay"></i><input type="submit" class="submit btn" name="submit" id="searchsubmit" value="&nbsp;&nbsp;&nbsp;Search" />
                            </form>
                        </div>
                    <h4 class="widgettitle right ">Next events</h4><div class="" id=""><p>There are currently no events to display.</p></div>
                </div>
            </div>

            <div class="row">
                <div class="span8">
                        <h3><a href="#">Lorem ipsum Lorem ipsum</a></h3>
                        <h5>Date: 31\. Mar, 2013 | Category: <a href="#" title="View all articles" rel="category tag">Article</a></h5>
                        <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                </div>
                <div class="span4 sidebar">
                    <ul class="nav nav-pills">
                        <li class="active"><a href="#tab-one" data-toggle="tab">Recent entries</a></li>
                        <li><a href="#tab-two" data-toggle="tab">Articles</a></li>
                        <li><a href="#tab-three" data-toggle="tab">Events</a></li>
                    </ul>
                    <div id="home-tab-container" class="tab-content well">
                        <div class="tab-pane fade active in" id="tab-one">
                            <ul>
                                <li class="crpw-item">
                                    <a  href="#" rel="bookmark" title="Permanent link to Lorem ipsum" class="crpw-title">Lorem ipsum</a>
                                </li>
                                <li class="crpw-item">
                                    <a  href="#" rel="bookmark" title="Permanent link to Hello World!" class="crpw-title">Hello World!</a>
                                </li>
                                <li class="crpw-item">
                                    <a  href="#" rel="bookmark" title="Permanent link to Test number 2" class="crpw-title">Test number 2</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="tab-two">
                                <ul>
                                    <li class="crpw-item">
                                        <a  href="#" rel="bookmark" title="Permanent link to Lorem ipsum Lorem ipsum" class="crpw-title">Lorem ipsum Lorem ipsum</a>        
                                    </li>
                                </ul>
                        </div>
                        <div class="tab-pane fade" id="tab-three">
                                <div class="" id="">
                                    <p>There are currently no events to display.</p>
                                </div>                  
                        </div>
                    </div>      
                </div>
            </div>
    <div id="push"></div>   
    </div>
</div>

<footer>
</footer>

</body>
</html> 
```

如果能以某种方式解决这个问题，我会很高兴，我自己的想法也用完了......提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:29:10.953

我解决了。

问题出在代码上，但仍然只有 Windows Chrome 无法正确显示。

我变了：

```
.navbar ul ul {
    position: absolute;
    top:-99999999px; /*Change here */
    opacity: 0;
    background-color:#f8f8f8;
    color:#000;
    text-align: left;
    box-shadow: 2px 2px 0 #b5b5b5;
    list-style-type: none;
    margin-left: 0;
} 
```

至

```
.navbar ul ul {
position: absolute;
top:-99999px; /*Change here */
opacity: 0;
background-color:#f8f8f8;
color:#000;
text-align: left;
box-shadow: 2px 2px 0 #b5b5b5;
list-style-type: none;
margin-left: 0;
} 
```

由于未知原因，Chrome 无法处理那么远的对象。无论如何，感谢您的帮助。

# java - 在 Windows 中处理文件的多个输入流

> ID：15670986
> 
> 赞同：1
> 
> 时间：2013-03-27T22:45:11.783
> 
> 标签：java, windows, inputstream

在 Windows 中，我可以从单个应用程序打开多个 InputStreams 到同一个文件吗？我现在正在 Linux 中编程，在搞砸整个过程之前我想知道......

基本上我正在解析一个zip文件。我想将解压缩、读取、写入和 md5sum 的任务线程化到 2 个单独的核心，以便我可以继续该过程并继续进行下一个执行相同操作的核心。

我可以在 Linux 上执行此操作，但我担心 Windows，因为它们会锁定文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:48:14.573

windows 不会锁定多个阅读器。那会很好用。

也就是说，很难想象 CPU 是这种情况下的瓶颈。多线程解压缩实际上获得了明显更好的性能吗？似乎 io 更有可能成为瓶颈（在这种情况下，多线程通常无济于事）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:50:53.727

您无需担心这一点 - 除非您创建文件锁，否则文件不会被多个并发读取锁定。但是，如果您同时读取和写入，则需要小心缓冲。

无论如何，我怀疑你会在这里被磁盘绑定，并且不会通过多线程得到任何东西，但我不知道你的具体情况。

# java - 没有合适的读取方法（java.lang.String）

> ID：15670989
> 
> 赞同：0
> 
> 时间：2013-03-27T22:45:28.737
> 
> 标签：java

您好，我正在尝试在 Java 应用程序上显示我在图片中显示的图像。如果有人可以帮助我解决这个问题，我将不胜感激。这是我收到此错误时使用的代码：

```
import java.awt.Image;
import javax.imageio.ImageIO;

public class JPipesCard
{
    Image img = null;

    {
        try {
            img = ImageIO.read("J Pipe's Card.png");
        } catch (IOException e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:47:31.850

您需要按照[文档](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)`java.util.File`中的说明传递 a ：[`ImageIO#read`](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)

```
img = ImageIO.read(new File("J Pipe's Card.png")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T22:47:27.850

`ImageIO`没有`read`接受 a 的方法`String`。由于文件是本地文件，您需要使用接受`File`对象的文件：

```
img = ImageIO.read(new File("J Pipe's Card.png")); 
```

*   [图像IO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)

# java - Java小程序真实性问题

> ID：15670991
> 
> 赞同：1
> 
> 时间：2013-03-27T22:45:38.707
> 
> 标签：java, applet, security, reverse-engineering, japplet

我在 java 中实现了一个小程序，通过使用 MIFARE 卡在我的网站上对用户进行身份验证，一切正常。但是我担心小程序的真实性，换句话说，我如何保证与我的网站通信的是我的小程序？并且不是一个脚本小子，他制作了一个模拟我的小程序行为以侵入我的网站的小程序。

我很难想象一种方法来保证我的小程序对我的网站的真实性，因为这个小程序是用 Java 开发的，并且代码逆向工程是可能的。

此致，

# asp.net-mvc - Kendo UI Grid：使用 MVC 4 在列上形成帖子

> ID：15670992
> 
> 赞同：0
> 
> 时间：2013-03-27T22:45:46.250
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, kendo-ui, kendo-grid

我有一个当前在列中使用**ActionLink**的网格：

```
columns.Bound(p => p.ID)
      .Template(@<text>
                @Html.ActionLink("Edit", "Index", 
                                 "ManageUser", new { id= @item.ID}, null)
                </text>); 
```

我们应用程序中的上述 Action 已更改，现在**只能接收 Posts**。当在列中单击链接时，如何更改上述代码以将**id**发布到**ManageUser控制器？**

我试图在这样的列中放置一个表单，但它不会呈现表单标签：

```
columns.Bound(p => p.ID)
      .Template(@<text>
                @Html.BeginForm("Index", "ManageUser", new {id= @item.ID})
                                {
                                    <a   "javascript to post">@item.ID</a>
                                }
                </text>); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:08:55.053

尝试将您的 Grid 更改为像这样呈现到页面。

来自：$(Html.Kendo().Grid...)

到：

```
 ${
     Html.Kendo().Grid...
      .Render();
  } 
```

并查看表格是否生成。此外，您需要以编程方式提交表单或添加提交按钮。

# javascript - JQueryUI 样式有时会在 Ajax 加载的内容中丢失

> ID：15670996
> 
> 赞同：0
> 
> 时间：2013-03-27T22:46:22.593
> 
> 标签：javascript, jquery, ajax

我正在将一些动态内容加载到`div`容器中，并使用以下方法将 JQueryUI 样式重新应用于我的按钮（如之前在此论坛上讨论过的那样）：

```
$('#menu li a').click(function(){
    $('#main').load('load.php ' + $(this).attr('href'));
    $.ajax({
        success: function(){
            $("#button").button();
        }
    });
    return false;
}); 
```

大多数时候一切都很好。只是偶尔会丢失样式。看起来它与时间有关，这使得它难以复制。可能是因为成功事件还不足以将 jQuery 重新应用于按钮吗？

顺便说一句，只要 php 文件中只有 HTML 内容。像这样：

```
<div id="main">
    <h2>This is a Button</h2>
    <button id="button">My Button</button>
</div> 
```

一旦我开始添加一些 php 代码（容器中的 PHP 函数 OK），样式就会永远丢失。

我犯了一个概念上的错误吗？知道是什么让 jQuery 失效了吗？或任何建议如何正确恢复按钮？

顺便说一句，我并不真正关心按钮的样式，它更基本，因为我计划在`div`未来使用更多的 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:55:52.113

您应该尝试在`.load()`调用的回调中使用它，如下所示：

```
 $('#menu li a').click(function(){
        $('#main').load('load.php ' + $(this).attr('href'), function()
        {
            $("#button").button();
        });
        return false;
    }); 
```

这对我每次都有效。

# javascript - 无法使用 jQuery data() 设置元素属性

> ID：15670997
> 
> 赞同：2
> 
> 时间：2013-03-27T22:46:25.763
> 
> 标签：javascript, jquery, jquery-data

我无法从 JavaScript 更新元素。我的项目相当复杂，但这是其中的一小部分：

```
myWebService(/*...*/)
.done(function (result) {
    var newRows = $(rows).clone();
    $('#drop-placeholder').after(newRows);
    $(newRows).data('test', 'ZZZZZZZZZZZZZZZZZZZZZZZ');
} 
```

使用 Chrome，我可以看到这些语句的执行。但是，`newRows`在监视窗口中，我可以看到该属性永远不会被添加/更新。而且，果然，调用完成后，我的页面上看不到指定的属性。

谁能看到我可能缺少的东西。`rows`（因此`newRows`）表示任意数量的表格行元素。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T22:49:26.047

`.data()`设置纯粹由 jQuery 处理的背景数据 - 它不设置 HTML 属性。

如果您尝试设置属性，例如`data-test`in`<div data-test="stuff"></div>`您需要使用`.attr("data-test", variable)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:50:45.213

`data`通过 jQuery设置`.data()` *不*设置属性，只设置底层数据存储。如果要更改属性，则必须使用`.attr()`.