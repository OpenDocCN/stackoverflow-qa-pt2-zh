# StackOverflow 问答 14993000-14993999

# udp - 最可靠和最有效的udp数据包大小？

> ID：14993000
> 
> 赞同：30
> 
> 时间：2013-02-21T01:17:50.250
> 
> 标签：udp, processing-efficiency, packet-loss

通过 UDP 发送大量小数据包会占用更多资源（cpu、zlib 压缩等）。我[在这里](https://stackoverflow.com/questions/10355626/udp-packet-size-and-packet-losses)读到，通过 UDP 发送一个约 65kBYTE 的大数据包可能会失败，所以我认为发送大量较小的数据包会更频繁地成功，但随之而来的是使用更多处理能力的计算开销（或者至少这就是我我假设）。问题基本上是这样的；发送最大成功数据包并将计算降至最低的最佳方案是什么？是否有在大多数情况下都有效的特定尺寸？我将 Erlang 用于服务器，将 Enet 用于客户端（用 C++ 编写）。也使用 Zlib 压缩，我向每个客户端发送相同的数据包（我猜是广播这个术语）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-21T13:36:41.887

`UDP payload`在大多数情况下，不会导致 ip 碎片的最大大小是

```
MTU size of the host handling the PDU (most of the case it will be 1500) -
size of the IP header (20 bytes) -
size of UDP header (8 bytes)

1500 MTU - 20 IP hdr - 8 UDP hdr  = 1472 bytes 
```

@EJP 谈到了`534`字节，但我会将其修复为`508`. 这是**肯定**不会导致碎片的字节数，因为主机可以设置的最小 MTU 大小是*576*，并且`IP header max size`可以是`60 bytes` *(508 = 576 MTU - 60 IP - 8 UDP)*

顺便说一句，我会尝试使用`1472`字节，因为`1500`它是一个足够标准的值。

如果您正在通过连接，请使用`1492`而不是进行计算。`1500``PPPoE`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-21T10:47:19.400

*通过 UDP 发送大量小数据包会占用更多资源吗？*

是的，一定会的！我刚刚做了一个流媒体应用程序的实验。该应用程序每秒发送 2000 帧数据，时间精确。每帧的数据有效负载为 24 字节。我使用 UDP 和*sendto()*将此数据发送到另一个节点上的侦听器应用程序。

我发现很有趣。这种程度的活动让我发送 CPU 崩溃了！我从大约 64% 的空闲 CPU 时间变成了大约 5%！这对我的应用程序来说是灾难性的，所以我必须解决这个问题。我决定尝试变化。

首先，我简单地注释掉了*sendto()*调用，以查看数据包组装开销是什么样的。CPU 时间减少了大约 1%。不错。好的...必须是*sendto()*调用！

然后，我做了一个快速的 fakeout 测试……我在每 10 次迭代中只调用一次*sendto()* API，但我将数据记录填充到之前长度的 10 倍，以模拟将一组较小记录组合成的效果较大的，发送频率较低。结果相当令人满意：CPU 命中率为 7%，而之前为 59%。看起来，至少在我的*NIX-like 系统上，发送数据包的操作成本很高，只是在进行调用的开销方面。

万一有人怀疑测试是否正常工作，我通过 Wireshark 对实际 UDP 传输的观察验证了所有结果，以确认一切正常。

**结论：它使用更少的 CPU 时间来更少地发送较大的数据包，然后以更频繁的较小数据包的形式发送相同数量的数据。**诚然，我不知道如果 UDP 开始破坏您过大的 UDP 数据报会发生什么……我的意思是，我不知道这会增加多少 CPU 开销。我将尝试找出（我想了解自己）并更新此答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T01:32:58.633

534 字节。这需要在没有分段的情况下传输。当然，它仍然可以完全丢失。由于丢失数据包的重传和网络开销本身造成的开销比任何 CPU 开销都要大几个数量级。

* * *

## 回答 #4

> 赞同：-17
> 
> 时间：2013-02-21T12:09:01.787

**您可能使用了错误的协议。** 对于您关心传输的数据，UDP 几乎总是一个糟糕的选择。你在它上面完成了分层排序、重试和完整性逻辑，然后你就有了 TCP。

# java - 初始化包含数组的类的新对象

> ID：14993001
> 
> 赞同：-1
> 
> 时间：2013-02-21T01:17:56.423
> 
> 标签：java, arrays, class, object

我是java新手，做得不好，需要一些帮助。我有一个名为“RestaurantObject”的类，我试图在我的主目录中从该类创建一个对象。我遇到了问题，因为该对象中的一个变量是一个数组。我真的不知道该放什么。

这是我的主要内容：

```
public class MyRestaurantObject {
     public static void main(String[] args) {

     RestaurantObject mcDonalds = new RestaurantObject("McDonalds", "McDonalds Menu", **WHAT GOES HERE?**); 
```

这是我的班级“RestaurantObjects”中的代码

```
public class RestaurantObject {

private static final Object[] String = null;
private String restaurantName;
private String menu;
private String [] employees;

public RestaurantObject(String name, String menu, String [] employees){
setRestaurantName(name);
setMenu(menu);
setEmployees(employees);
}

//restaurantName
public String getRestaurantName(){
return restaurantName;
}

private void setRestaurantName(String name){
restaurantName = name;
}

//menu
public String getMenu(){
return menu;
}

private void setMenu(String menu){
this.menu = menu;
}

//employees
public String[] getEmployees(){
return employees;

}

private void setEmployees(String [] employees){
this.employees = employees;
}

} 
```

我知道我做的不对。请帮忙！

谢谢！

另外，如果我的任何术语有误，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:22:32.670

只需在第三个参数中传递一个新的字符串数组。

```
RestaurantObject mcDonalds = new RestaurantObject("McDonalds", "McDonalds Menu", new String[] {"Value1", "Value2"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:28:43.567

我猜您还没有学习 Java 可变参数，但这是使用它们的完美案例。那你可以去

```
public RestaurantObject(String name, String menu, String...employees) {
   setRestaurantName(name);
   setMenu(menu);
   setEmployees(employees);
} 
```

然后，

```
RestaurantObject mcDonalds = new RestaurantObject(
        "McDonalds", "McDonalds Menu", "John Doe", "Jane Doe"); 
```

如果您还不能使用或尚未学习可变参数，@fvu 版本 2 是我的首选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:23:32.323

你可以做

```
RestaurantObject mcDonalds = new RestaurantObject(
    "McDonalds", "McDonalds Menu", new String[] {"John Doe", "Jane Doe"}); 
```

或者

```
String[] employees = new String[] {"John Doe", "Jane Doe"};
RestaurantObject mcDonalds = new RestaurantObject(
    "McDonalds", "McDonalds Menu", employees); 
```

或者

```
String[] employees = new String[2];
employees[0] = "John Doe";
employees[1] = "Jane Doe";
RestaurantObject mcDonalds = new RestaurantObject(
    "McDonalds", "McDonalds Menu", employees); 
```

关于后者的注意事项：当您创建这样的数组时，您必须知道它的大小，这有时会很烦人。这就是为什么许多人会更喜欢使用`ArrayList`行为或多或少类似于弹性数组的 s，即当添加 n 项时它会自动扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T01:21:32.660

那么有两种选择：

1 在创建之前创建数组`RestaurantObject`（该类实际上应该被称为`Restaurant`

```
String[] emplArr = new String[]{ "Bob", "Alice", "Fred"};
RestaurantObject mcDonalds;
mcDonalds = new RestaurantObject("McDonalds", "McDonalds Menu", emplArr); 
```

2 在构造函数调用中使用静态初始化器初始化数组`RestaurantObject`

```
RestaurantObject mcDonalds;
mcDonalds = new RestaurantObject("McDonalds", "McDonalds Menu", new String[]{ "Bob", "Alice", "Fred"}); 
```

# ios - 涉及 CLLocationManager 的类实现

> ID：14993005
> 
> 赞同：-1
> 
> 时间：2013-02-21T01:18:32.570
> 
> 标签：ios, objective-c, cllocationmanager

我在实现类位置时遇到了一些问题。当我启动应用程序时，我在 StartApp.m 中调用类 Location，我想打印以测试变量 cidade，但 Cidade2 和 Cidade3 的结果在 NSLog 中为空，我做错了什么？我尝试更改代码，但无法解决问题。我不明白的另一件事是为什么 NSLog Cidade2 打印 nil，变量也是 Location 类。求帮助！

**输出 ：**

```
2013-02-20 21:58:09.648 MPA[484:11603] Cidade 2: (null)
2013-02-20 21:58:09.650 MPA[484:11603] Cidade 3 : (null)
2013-02-20 21:58:09.661 MPA[484:11603] Resolving the Address
2013-02-20 21:58:10.390 MPA[484:11603] Found placemarks: (
    "Apple Store, San Francisco, Apple Store, San Francisco, 1800 Ellis St, San Francisco, CA  94115-4004, United States @ <+37.78584540,-122.40651750> +/- 100.00m, region (identifier <+37.78584545,-122.40652160> radius 18.96) <+37.78584545,-122.40652160> radius 18.96m"
), error: (null)
2013-02-20 21:58:10.391 MPA[484:11603] Cidade : California 
```

**Localizacao.m**

```
#import "Localizacao.h"

@interface Localizacao ()

@end

@implementation Localizacao

@synthesize cidade,estado,latSend,lonSend;

-(void)startLocalizacao
{

    lm = [[CLLocationManager alloc] init];
    lm.delegate = self;
    lm.desiredAccuracy = kCLLocationAccuracyBest;
    lm.distanceFilter = kCLDistanceFilterNone;
    [lm startUpdatingLocation];
    geocoder = [[CLGeocoder alloc]init];

    NSLog(@"Cidade 2: %@", cidade);

}

//Adicionado para pegar a localizacao atual

-(void) locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {

    //Display Latitude
    latSend = newLocation.coordinate.latitude;

    //Display Longitude

    lonSend = newLocation.coordinate.longitude ;

    //Display Accurancy

    NSString *acc = [[ NSString alloc ] initWithFormat:@"%f",
                     newLocation.horizontalAccuracy];

    //Update MAP
    MKCoordinateSpan span;
    span.latitudeDelta = .001;
    span.longitudeDelta= .001;

    MKCoordinateRegion region;
    region.center = newLocation.coordinate;
    region.span = span;

    [acc release];

    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];

            /*NSString *teste = [[NSString alloc ] initWithFormat:@"%@ %@\n%@ %@\n%@\n%@",
             placemark.subThoroughfare,
             placemark.thoroughfare,
             placemark.postalCode,
             placemark.locality,
             placemark.administrativeArea,
             placemark.country];*/

            cidade = placemark.administrativeArea;
            estado = placemark.locality;

            [lm stopUpdatingLocation];

            NSLog(@"Cidade : %@", cidade);

        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ];

}

@end 
```

**启动应用程序.m**

```
#import "StartApp.h"
#import "Localizacao.h"

@interface StartApp ()

@end

@implementation StartApp

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    Localizacao *localizacao = [[Localizacao alloc] init];

    [localizacao startLocalizacao];

    NSLog(@"Cidade3 : %@", localizacao.cidade);

    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

谢谢帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:25:37.693

您创建`Localizacao`实例，然后调用`startLocalizacao`. 该`startLocalizacao`方法设置位置管理器并要求它启动。然后它会记录`Cidade 2`. 此日志发生在位置管理器完成初始化之前以及应用程序接收到第一个位置之前。所有这些初始化都是由位置管理器在后台完成的。

您没有做错任何事情（除了为尚未初始化的数据添加日志语句）。您只需要意识到位置事件是异步的，并且它们在可用时就会出现。

# java - 将与 arquillian 一起使用的示例 domain.xml

> ID：14993007
> 
> 赞同：0
> 
> 时间：2013-02-21T01:18:58.233
> 
> 标签：java, junit4, jboss-arquillian, glassfish-embedded

几个月来，我一直在使用 arquillian 测试我的程序。我最近刚刚在 glassfish 容器中安装了 jenkins 并让它构建我的项目。我有一个问题，即 arquillian 试图使用与托管 jenkins 的 glassfish 容器相同的设置，但它没有通过我的测试。

我尝试使用[https://docs.jboss.org/author/x/zgAO](https://docs.jboss.org/author/x/zgAO)中记录的 domain.xml 。我使用的 domain.xml 是 arquillian 在运行测试时生成的 domain.xml 的示例副本（即 /var/folders/mf/tdymlzl95cj0fvw4vgxzqzj00000gn/T/gfembed5574188909570726432tmp/applications/）

我的示例 arquillian.xml 内容是

```
<container qualifier="glassfish" default="true">
    <configuration>         
        <property name="configurationXml">src/test/setup/domain.xml</property>
        <property name="resourcesXml">src/test/setup/glassfish-resources.xml</property> 
    </configuration>
</container> 
```

它仍然失败。

我想要的只是能够配置 arquillian 将在嵌入式容器中使用的端口，这样它就不会与运行 jenkins 的容器冲突。

提前感谢任何反馈或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:35:31.527

根据您的描述，您似乎遇到了[ARQ-856](https://issues.jboss.org/browse/ARQ-856)。您需要等待 GlassFish 容器适配器的下一个版本（很可能版本为 1.0.0.Final）。没有承诺什么时候会发生，它正在开发中。

在那之前，您可以使用[注释中指定的这种解决方法](https://issues.jboss.org/browse/ARQ-856?focusedCommentId=12682440&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-12682440)（将`bindHttpPort`值指定为与 domain.xml 文件中 HTTP 侦听器的值相同）。

或者，如果您知道如何从源代码构建（a`git clone...`和 a`mvn clean install`应该这样做），您可以构建和使用当前的快照版本。

# vi - 获取当前行号？

> ID：14993012
> 
> 赞同：57
> 
> 时间：2013-02-21T01:19:56.477
> 
> 标签：vi, vim

是否有任何键映射输出正在编辑的行的当前行号？或者，更好的是，我们可以根据键映射的输出来做公式吗？

我想获取行号并添加`1`到当前正在编辑的文本中。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-21T01:27:11.667

`Ctrl`+`G`会告诉你行号，甚至是光标所在的列。如果你的意思是把它作为文本输出到你的文档，那么我不知道。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-02-21T01:31:00.273

“输出”是什么意思？你可以做：

```
:echo line(".") + 1 
```

显示当前行号加 1。您可以用 绑定击键`map`，例如：

```
:noremap <F1> :echo line(".") + 1<cr> 
```

要将数据实际插入缓冲区：

```
:noremap <F1> :execute "normal! i" . ( line(".") + 1 )<cr> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-23T22:07:59.157

@ZyX 在对另一个答案的评论中给出了答案：

> 你有`<C-r>`这种事情的插入模式：
> 
> `nnoremap <F1> i<C-r>=line('.')+1<CR><Esc>`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-12-04T15:37:17.450

## 1\. 使用`:set ruler`。（仅适用于`vim`）[参考](http://vimdoc.sourceforge.net/htmldoc/options.html#'ruler')

它在寡妇的右下角显示当前行和正在编辑的行的列（光标所在的行）。

`1,1 <position>`

1.  如果编辑第一行，则位置为`Top`.
2.  如果最后一行被编辑，位置是`Bot`.
3.  如果没有滚动可用（起始线和结束线都可见），则位置为`All`
4.  如果第一行和最后一行不可见，则位置是可见文档的百分比。

要使其永久化，请添加`set ruler`文件`~/.vimrc`（如果文件不存在，请创建一个）。

## 2\. 使用`:set number`。（适用于`vi`和`vim`）[参考](http://vimdoc.sourceforge.net/htmldoc/options.html#'number')

在每行之前显示行号。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T07:50:29.270

`virtcol('.')`您可以使用;获取当前光标位置的视觉宽度 通过表达式寄存器将其插​​入缓冲区，例如在插入模式下`<C-R>=virtcol('.')<CR>`

请注意，当行包含双角字符`<Tab>`或不可打印字符时，宽度与字符数不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-10T02:23:40.140

与原始问题无关，但对我来说，看到我喜欢使用的行号`:#`，它也会打印出行号和内容

# python - 从列表中创建所有可能的组合

> ID：14993013
> 
> 赞同：0
> 
> 时间：2013-02-21T01:20:16.723
> 
> 标签：python, algorithm, list

我有一个清单

```
[
 [[[u'ANC'], [u'DEN', u'SFO'], [u'CHI', u'CLE', u'DEN', u'EWR', u'HOU', u'WAS'], [u'GSP']]], 
 [[[u'ANC'], [u'PDX', u'SEA'], [u'CHI', u'CLE', u'DEN', u'EWR', u'HOU', u'LAX', u'SFO', u'WAS'], [u'GSP']]]
] 
```

列表已从此文本创建

```
ANC-DEN/SFO-CHI/CLE/DEN/EWR/HOU/WAS-GSP
ANC-PDX/SEA-CHI/CLE/DEN/EWR/HOU/LAX/SFO/WAS-GSP 
```

我需要获取可以使用该列表完成的所有变体：

```
ANC-SFO-EWR-GSP
ANC-SFO-CHI-GSP
ANC-SFO-CLE-GSP
ANC-DEN-EWR-GSP
ANC-PDX-EWR-GSP
ANC-SFO-HOU-GSP
ANC-SEA-LAX-GSP
ANC-SEA-EWR-GSP
ANC-SFO-ORD-GSP
ANC-PDX-LAX-GSP
ANC-PDX-CHI-GSP
ANC-DEN-CHI-GSP
ANC-SEA-SFO-GSP
ANC-PDX-SFO-GSP
ANC-SEA-CHI-GSP
ANC-SFO-DEN-GSP
ANC-PDX-HOU-GSP
ANC-SEA-HOU-GSP
ANC-DEN-HOU-GSP
ANC-DEN-CLE-GSP
ANC-PDX-CLE-GSP
ANC-SEA-CLE-GSP
ANC-DEN-ORD-GSP
ANC-PDX-ORD-GSP
ANC-PDX-DEN-GSP
ANC-SEA-DEN-GSP
ANC-SEA-ORD-GSP 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T01:27:45.820

使用`itertools.product`列表并将其扩展为参数：

```
>>> import itertools
>>> test = [['a'], ['b', 'c'], ['d']]
>>> list(itertools.product(*test))
    [('a', 'b', 'd'), ('a', 'c', 'd')] 
```

在你的情况下，它会是这样的：

```
for row in data:
    for item in itertools.product(*row[0]):
        print '-'.join(item) 
```

# javascript - 附加项目的 JQuery 切换功能

> ID：14993014
> 
> 赞同：1
> 
> 时间：2013-02-21T01:20:19.763
> 
> 标签：javascript, jquery, toggle

我有这个 JQuery 切换/折叠功能，但由于某种原因，我自己添加的“timelineEventWide”不起作用。我是 Javascript 新手，你能用正确的语法给我建议吗？谢谢

```
e(".expandAll").toggle(function() {
      n(e(this).parents(t.timelineContainer).find("dt a", "dl.timelineMinor"), e(this).parents(t.timelineContainer).find(".timelineEvent",".timelineEventWide"));
      e(this).html("- collapse all")
      }, function() {
             r(e(this).parents(t.timelineContainer).find("dl.timelineMinor a"), e(this).parents(t.timelineContainer).find(".timelineEvent", ".timelineEventWide"));
             e(this).html("+ expand all")
      })
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:57:58.730

`.find`只接受一个论点。你可能的意思是使用

```
.find(".timelineEventWide .timelineEvent") 
```

# ms-word - 如何将 BibTex 书目文件转换为 Word 2010 XML？

> ID：14993017
> 
> 赞同：22
> 
> 时间：2013-02-21T01:20:43.480
> 
> 标签：ms-word, bibtex

将 Bibtex .bib 文件转换为可由 MS Word 2010 导入的 XML 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-03T01:20:59.873

Java 应用程序 JabRef 是一个很棒的工具，我已经成功地使用它来将我的 BibTex 条目导出为 XML，并将它们导入 Word 2013，完全没有问题。

请访问：[http ://www.jabref.org/](http://www.jabref.org/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-26T20:22:00.367

这是我找到的解决方案。

[Ubuntu repos 中提供的Bibutils](http://sourceforge.net/p/bibutils/home/Bibutils/)提供了一些将 BibTex 转换为 Word XML 的工具，但是 Word 无法正确导入某些字段存在一些问题。这里有一些 Python 代码可以一次性完成所有操作。到目前为止，我已经为 @article 和 @inproceedings 条目准备好了。

```
#THIS REQUIRES THAT bibutils IS INSTALLED ON YOUR MACHINE

"""
Usage:
./Bib2Word2010XML.py [Input file name] [Output file name]
"""

import sys
import fileinput
import os

if __name__ == '__main__':
  #input a BibTex .bib file
  fnameIN = sys.argv[1]
  fnameOUT = sys.argv[2]

  #run bibutils functions to convert to Word XML
  os.system("bib2xml " + fnameIN + " > TEMPOUT1.xml")
  os.system("xml2wordbib TEMPOUT1.xml > TEMPOUT2.xml")
  os.system("rm TEMPOUT1.xml")

  #clean up for Word 2010 formatting
  f1 = open('TEMPOUT2.xml', 'r')
  f2 = open(fnameOUT, 'w')
  for line in f1:
    line = line.replace("ArticleInAPeriodical", "JournalArticle")
    line = line.replace("PeriodicalName", "JournalName")
    line = line.replace("Proceedings", "ConferenceProceedings")
    f2.write(line)
  f1.close()
  f2.close()
  os.system("rm TEMPOUT2.xml") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-16T06:41:23.597

根据 impala79s 的回答，这个单行代码使用 MS Word 2007 为我工作 **。mybib.bib**是我们要转换为 word 格式的**输入bib 文件，** **word.xml**是我们要保存 wordbib 格式的文件的**输出**名称至。如上所述，您需要安装 bibutils 包。

```
bib2xml mybib.bib | xml2wordbib | sed -e 's/PeriodicalName/PeriodicalTitle/g' -e 's/>Proceedings/>ConferenceProceedings/g' > word.xml 
```

PS。您需要在您的机器上安装 bibutils 软件包，与上述答案类似

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-19T07:26:27.553

使用 bibutils (rbibutils) 的 R 端口，我设法在 Windows 中简单得多。

[https://geobosh.github.io/rbibutils/](https://geobosh.github.io/rbibutils/)

安装

`install.packages("rbibutils")`

那么这只是一个简单的命令：

`rbibutils::bibConvert("myfile.bib", "myfile.xml", informat = "bibtex", outformat = "word")`

请记住包括引号，因为这是 R。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-03T09:03:17.947

免费的参考管理软件 Mendeley 也提供此选项。您可以打开 .bib 文件并导出到 Endnote XML。您可以在[www.mendeley.com/download-desktop-new](https://www.mendeley.com/download-desktop-new/)下载它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-20T00:20:08.227

基于 Andreas Grivas 脚本，我编写并分享了一个多文件 bib 到 xml（字兼容）转换器。您应该在包含 .bib 文件的文件夹中运行：

```
#this script convert a .bib file to xml file and to word xml file.
#this script use bibutils tools.

echo -e "===================\nscript to convert multiple .bib (bibtex)     files to word xml\n==================="

echo -e "Settings\n==================="

mypwd=$(pwd)
output=$(pwd)/output 
echo -e "Path:\n$mypwd"
echo -e "output folder:\n$output"
mkdir -p "${output}"

echo -e "===================\nProcessing"
counter=0
for file in *.bib; 
do
    counter=$((counter+1));
    name=${file%.*};
    echo -e "=================== \n$file"
    bib2xml $name.bib | xml2wordbib | sed -e "$mypwd" -e "$mypwd" > "$output/$name.xml"
done
echo -e "==================="
echo -e "$counter .bib files were found.\nDone!"enter code here 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-10T16:39:18.270

如果论文在[Pubmed](http://www.ncbi.nlm.nih.gov/pubmed)上可用，您可以随时使用：

[http://pubtransformer.com/](http://pubtransformer.com/)

将参考转换为各种格式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-02T16:54:32.843

对于那些使用 Docker 的人，[https://github.com/derlin/docker-bib2word](https://github.com/derlin/docker-bib2word)有一个 Dockerfile 和一个简单的脚本来完成这项工作。

要构建图像：

```
git clone https://github.com/derlin/docker-bib2word
cd docker-bib2word
docker build -t bib2word --rm . 
```

然后，只需运行：

```
docker run --rm -v $(pwd):/app bib2word biblio.tex 
```

转换`biblio.tex`成`biblio.xml`（可以导入word）。

# c# - 如何连接数据库和插入数据

> ID：14993021
> 
> 赞同：0
> 
> 时间：2013-02-21T01:21:19.590
> 
> 标签：c#

我收到一个关于`ExecuteNonquery is not initialized`.

而且我认为可能是连接到数据库错误，因为`MessageBox`在执行系统之前没有出现。

```
//Server Connection
private void ServerConnect()
{

    string ConnString;
    ConnString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=PLAN.accdb";
    TConn = new OleDbConnection(ConnString);
    TConn.Open();
    MessageBox.Show("You Are Connected.");
}

//ADD MEMOS
private void GetMemoList()
{

    string query;
    DataSet ds = new DataSet();
    query = "SELECT MEMOS_ID,DATE,TIME,MEMOS FROM TBLMEMOS ORDER BY DATE ASC";
    OleDbDataAdapter da = new OleDbDataAdapter(query, TConn);
    da.Fill(ds);
    this.dgv1.DataSource = ds.Tables[0];
}

private void AddMemo(string MemoDate, string MemoTime, string Memos)
{

    string acc;
    acc = "INSERT INTO TBLMEMOS (DATE,TIME,MEMOS) VALUES ('" + MemoDate + "','" + MemoTime + "','" + Memos + "')";
    OleDbCommand cmd = new OleDbCommand(); 
    cmd.CommandText = acc;
    cmd.Connection = TConn;
    cmd.ExecuteNonQuery();
}

private void btnAddMemos_Click(object sender, EventArgs e)
{

    AddMemo(this.dtpDate.Value.ToShortDateString(), this.dtpTime.Value.ToShortTimeString(), this.txtInfo.Text.Trim());
    GetMemoList();
    txtInfo.Clear();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:07:29.490

尝试添加这样的参数。

```
cmd.Parameters.Add("p1", OleDbType.Char).Value = MemoDate ; 
```

# knockout.js - 在 knockout.js 中使用多个视图模型

> ID：14993023
> 
> 赞同：0
> 
> 时间：2013-02-21T01:21:26.123
> 
> 标签：knockout.js

我想让我的淘汰赛脚本更有条理，此外，我想避免意外地将 2 个函数命名为相同的东西。所以我想知道我是否可以像这样将视图模型嵌套在同一个函数中（我保持非常简单）：[小提琴](http://jsfiddle.net/likwid_t/KnBrE/)

这是HTML

```
<p>First name: <strong data-bind="text: other.firstName">todo</strong></p>
<p>Last name: <strong data-bind="text: other.lastName">todo</strong></p>
<p>Full name: <strong data-bind="text: other.fullName">todo</strong></p> 
```

和JS：

```
function AppViewModel() {
    var self = this;
    self.other = {
        firstName: ko.observable("Bert"),
        lastName: ko.observable("Bertington"),
        /*fullName: ko.computed(function(){
            return this.firstName + " " + this.lastName;
            }, this)*/

        }
} 
```

这工作正常，但如果我取消注释 ko.computed 它会崩溃。有没有办法以这种方式组织我的淘汰赛，为什么计算会崩溃，有没有办法编写 ko.computed 函数以便它可以工作？

**编辑：问题 #2**

如果我有这样的表格：

```
<form data-bind="submit: other.otherSubmit" data-ajax="false">
    <button type="submit">Submit</button>
</form> 
```

我为提交添加了一个处理程序，如下所示：

```
// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
    function AppViewModel() {
        var self = this;
        self.other = new function(){     
            var self = this;
            self.firstName = ko.observable("Bert");
            self.lastName = ko.observable("Bertington");
            self.fullName = ko.computed(function(){            
                return self.firstName() + " " + self.lastName();
                });
            self.otherSumbit = function(){}
            }
    }

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

为什么错误控制台会返回这个：

*提交绑定的值必须是函数*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:05:30.590

可以试试这个：

```
// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
    function AppViewModel() {
        var self = this;
        self.other = new function(){     
            var self = this;
            self.firstName = ko.observable("Bert");
            self.lastName = ko.observable("Bertington");
            self.fullName = ko.computed(function(){            
                return self.firstName() + " " + self.lastName();
                });        
            }
    }

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:51:07.700

第一种情况的问题是在那种情况下，`this`指的是视图模型。在您的对象字面量中，您的对象还不存在，因此您将无法以这种方式设置您的计算 observable。您必须在创建对象后将其添加到对象中。

要么像这样（这很丑陋）：

```
function AppViewModel() {
    var self = this;
    self.other = {
        firstName: ko.observable('Bert'),
        lastName:  ko.observable('Bertington')
    };
    self.other.fullName = ko.computed(function() {
        return this.firstName() + ' ' + this.lastName();
    }, self.other);
} 
```

或者像这样（就像你在第二个例子中所做的那样）：

```
function AppViewModel() {
    var self = this;
    self.other = new function() {
        this.firstName = ko.observable('Bert');
        this.lastName = ko.observable('Bertington');
        this.fullName = ko.computed(function() {
            return this.firstName() + ' ' + this.lastName();
        }, this);
    };
} 
```

当然，您可以通过其他方式编写上述示例，但您明白我的意思。

* * *

在你的第二个例子中，你只是拼错了你的函数。在视图模型中，它`otherSumbit`在您的视图拥有它时被命名`otherSubmit`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T02:28:10.753

我使用淘汰赛来组织我的虚拟机的一种技术：

```
//load view
    $.get(url, function(view){
        $("#content').html(view);
        ko.applyBindings(new myVM(), $('#content')[0]);
    }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T19:32:40.880

如果有人正在寻找这种解决方案的解决方案，请尝试以下方法

html视图

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <div id="container1">
        <ul>
            <li >Container1 item</li>
            <!-- ko foreach: myItems -->
            <li>Item <span data-bind="text: $data"></span></li>
            <!-- /ko -->
        </ul>
    </div>

    <div id="container2">
        <ul>
            <li >Container2 item</li>
            <!-- ko foreach: myItems -->
                <li>Item <span data-bind="text: $data"></span></li>
            <!-- /ko -->
        </ul>
    </div>

    <script src="js/jquery-1.11.1.js"></script>
    <script src="js/knockout-3.0.0.js"></script>
    <script src="js/DataFunction.js"></script>
    <script src="js/Container1ViewModel.js"></script>
    <script src="js/Container2ViewModel.js"></script>

</body>
</html> 
```

对于这个视图，我在两个单独的 javascript 文件中为 id=container1 和 id=container2 创建了 2 个视图模型。

Container1ViewModel.js

```
function Container1ViewModel()
{
    var self = this;
    self.myItems = ko.observableArray();
    self.myItems.push("ABC");
    self.myItems.push("CDE");

} 
```

Container2ViewModel.js

```
function Container2ViewModel() {
    var self = this;
    self.myItems = ko.observableArray();
    self.myItems.push("XYZ");
    self.myItems.push("PQR");

} 
```

然后在这两个视图模型在 DataFunction.js 中注册为单独的视图模型之后

```
var container1VM;
var container2VM;

$(document).ready(function() {

    if ($.isEmptyObject(container1VM)) {
        container1VM = new Container1ViewModel();
        ko.applyBindings(container1VM, document.getElementById("container1"));
    }

    if ($.isEmptyObject(container2VM)) {
        container2VM = new Container2ViewModel();
        ko.applyBindings(container2VM, document.getElementById("container2"));
    }
}); 
```

像这样，您可以为单独的 div 添加任意数量的视图模型。但请确保不要为已注册 div 中的 div 创建单独的视图模型。

# objective-c - 如何开始这个目标 C 动画？

> ID：14993026
> 
> 赞同：0
> 
> 时间：2013-02-21T01:21:36.293
> 
> 标签：objective-c

刚开始学习iOS编程，有一个非常简单的问题，但无法弄清楚。

```
UIImage *image = [UIImage imageNamed:@"robot.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

/* Write your code below this line */

NSArray *robotImages = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"Robot1.png"],
        [UIImage imageNamed:@"Robot2.png"],
        [UIImage imageNamed:@"Robot3.png"],
        [UIImage imageNamed:@"Robot4.png"], nil];
imageView.animationImages = robotImages;
imageView.animationDuration = 5.0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:30:45.147

现在真的`[imageView startAnimating];`

# javascript - JSXCompressor 用法

> ID：14993029
> 
> 赞同：2
> 
> 时间：2013-02-21T01:22:13.090
> 
> 标签：javascript

我正在尝试使用来自 [http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/的 jsxcompressor](http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)

但在我做任何事情之前，我遇到了问题：

> 未捕获的类型错误：无法读取未定义的属性“0”

我的简单示例代码如下：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="/jsxcompressor.js" type="text/javascript"></script>
    <script type="text/javascript">
        document.write(JXG.decompress("test")); 
    </script>
</head>
<body></body>
</html> 
```

我知道“test”并不完全是一个压缩字符串，只是把它放在那里进行测试。

来自 chrome js 控制台的错误是这样的： ![chrome js控制台错误信息](../Images/f8f6d1839911567654d468f8ba60e65a.png)

任何人都可以帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:18:49.147

JXG.decompress 必须使用 base64 编码的压缩字符串。试试这个：

```
document.write(JXG.decompress("eNrzSM3JyVc1clY1MijPL8pJUTVwBAA8CgXU")); 
```

目前，必须以等于 9 的压缩强度调用 gzip。获取压缩字符串的 PHP 代码如下所示：

```
base64_encode(gzcompress(rawurlencode(file_get_contents($filename)),9)); 
```

在 Python 中，它看起来像这样：

```
base64.b64encode(zlib.compress(urllib.quote(text), 9)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T21:46:50.750

给出的答案是正确的，尽管我想使用 zlib for node.js 贡献我的发现。

在使用 zlib.deflate 发送我的套接字消息时，我遇到了同样的错误，即使字符串是 base64 编码的。显然 deflate 方法将一些 zlib 标头添加到压缩字符串中。相反，使用 zlib.gzip 压缩服务器上的数据，jsxCompress 可以正常工作。

# macos - IntelliJ Idea 12：使用External Build时指定哪个javac

> ID：14993032
> 
> 赞同：1
> 
> 时间：2013-02-21T01:22:35.637
> 
> 标签：macos, ide, intellij-idea, javac

我一直是 Eclipse 的老用户，但在一些同事的建议下，我开始尝试使用 IntelliJ IDEA 12，我喜欢它。虽然我在使用 External Build 选项时遇到了问题，也就是说，它似乎没有使用与我分配给模块的 SDK 相关的 javac，它只是使用了我的 PATH 上的任何内容。

至少这是我目前的假设；我的路径上的 javac 用于我的 JDK7 安装，但我处理一些需要与 JDK6 兼容的代码。如果我将 SDK 和语言级别分别设置为 1.6/6，它会尝试针对 Java 7 进行构建，我会收到 Invalid Source Release: 1.7 错误；即使我从可用的 SDK 中完全删除 1.7 的 SDK，也会发生这种情况。关闭外部构建可解决此问题。

我想利用外部构建，因为它已经过时并且非常快。这是 IDEA 12 中的错误还是我做错了什么？

如果相关的话，我正在使用社区版。

**编辑：如果这很重要，我正在使用 OS X**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:08:29.993

确保在 File | 中将“项目字节码版本”设置为 1.6。设置 | 编译器 | Java 编译器。基于[此](http://youtrack.jetbrains.com/issue/IDEA-89055#comment=27-360161)评论，它最可能在没有外部构建选项的情况下工作，因为“IDEA 在调用编译器时强制将语言级别设置为 jdk 支持的最大级别”。

# html - 事件/回调存储在 DOM 树中的什么位置？

> ID：14993034
> 
> 赞同：1
> 
> 时间：2013-02-21T01:22:38.907
> 
> 标签：html, dom, javascript-events, jquery

我正在构建一个单页 Web 应用程序。我必须动态构建嵌套的 Backbone.View。

通常我会构造一个空的 jQuery，在其中添加 div，完成事件绑定，然后返回那个 jQuery 对象。

我注意到，如果我附加 jQuery 对象而不是附加 object.html()，那么绑定在该对象上的事件将被保留。

我很困惑，这个 jQuery 对象中的事件/回调存储在哪里，以及当我插入一个 jQuery 对象时，这些回调是如何传送到 DOM 树的。

此外，我想知道在什么情况下我必须在 DOM 操作后重新绑定回调。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:25:56.967

作为实现细节，绑定到`$('some-selector')`的事件存储在
`$('some-selector').data('events')`.

并不是说您作为 jQuery 用户需要担心这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:14:44.050

Backbone 事件对象基本上是进行事件绑定的简写。你不能利用它吗？这是一种更标准的方法。您的方法是非标准的，很可能会引起混淆。如果您需要保持动态，您可以使用[Backbone 网站上解释的约定](http://backbonejs.org/#Events)附加事件。

如果您移除 DOM 或将其添加回来，您将需要重新绑定事件。根据视图的工作方式，如果模型更改触发视图刷新，您可能需要重新绑定事件。但是，Backbone 事件哈希处理了这一点。

jQuery 确实将事件附加到一个 DOM 节点，`.data('events')`但是[在 1.8 中它会消失](https://github.com/IanLunn/Sequence/issues/118)（你仍然可以使用它，但它不应该用于调试以外的目的）。您无法正常检查 DOM 中的事件。这使得调试非常困难。如果您使用 jQuery 附加事件，它会使调试更容易，因为您可以使用未缩小的 jQuery 并在它调度事件的位置设置中断。Chrome 也适用于调试事件问题。但理想情况下，您希望在拥有它们之前阻止它们。我希望会有更多的工具出现（比如 PhantomJS 的事件插件，它可以让你监控和调试被测事件）。

# jquery - jQuery滑块不滑动

> ID：14993041
> 
> 赞同：0
> 
> 时间：2013-02-21T01:23:27.467
> 
> 标签：jquery, jquery-slider

[这是jsfiddle中的代码](http://jsfiddle.net/FJTpe/)

我猜幻灯片功能有问题：

```
slide: function( event, ui ) {
          var input = this.next(':input');
          input.val(input.attr('alt') + ui.value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:29:29.847

该`.next()`方法是一个 jQuery 方法，因此您需要在引用 jQuery 对象时使用它。所以只需包裹`this`在一个 jQuery 构造函数中。

```
slide: function (event, ui) {
    var input = $(this).next(':input');
    input.val(input.attr('alt') + ui.value);
} 
```

[jsfiddle](http://jsfiddle.net/wcr9h/)

# ajax - 为什么我的 jquery ajax 表单在第一次提交时提交一次，在第二次提交时提交两次......？

> ID：14993047
> 
> 赞同：4
> 
> 时间：2013-02-21T01:23:58.087
> 
> 标签：ajax, jquery

我有一个简单的 AJAX 表单，当我提交它时它可以正常工作。但是，如果我随后在同一个表单中输入新数据（不刷新页面），那么它会提交两次表单。如果我第三次这样做，那么它会提交三次表单，依此类推。为什么要这样做？这是我的代码：

```
$(document).ready(function(){
    $("#myForm").submit(function() {
        var myField = $('#myID).val();
        $.ajax({
            type: "POST",
            url: 'myFile.php',
            dataType: 'html',
            data: {myData:myField},
            success: function(data){
                alert(data);
            }
        });

        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T17:05:19.593

即使我在开发 AJAX 登录表单时也遇到了同样的问题。经过几个小时的谷歌搜索，我找到了解决方案。我希望这能帮助你。

基本上，在完成 ajax 请求后，您必须**取消绑定表单提交操作的当前实例。****所以在return false**之前添加这一行；

 **```
$("#myform").unbind('submit'); 
```

因此，您的整个代码应该看起来像

```
 $(document).ready(function(){
        $("#myForm").submit(function() {
            var myField = $('#myID).val();
            $.ajax({
                type: "POST",
                url: 'myFile.php',
                dataType: 'html',
                data: {myData:myField},
                success: function(data){
                    alert(data);
                }
            });

            /* Add this line */
            $("#myform").unbind('submit');
            return false;
        });
    }); 

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T23:52:10.543

我有同样的问题。

我在以下位置找到了解决方案： [jquery：提交表单两次](https://stackoverflow.com/questions/9767871/jquery-submitting-a-form-twice)

Basicaly 将 .submit() 添加到 Saurabh Mishra 答案：

```
$('#form1').unbind('submit').submit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T17:40:10.220

取消绑定表单可能会破坏您的 Ajax。我发现只要我先声明表格。

```
$('#my_form').ajaxForm 
```

一切都按预期工作，并遵循标准协议。我刚刚花了一天时间在表单提交中寻找“缺少模板”错误，因为我取消了表单的绑定。**

# c# - 实例化空 IQueryable 以用于 Linq to sql

> ID：14993048
> 
> 赞同：75
> 
> 时间：2013-02-21T01:24:10.837
> 
> 标签：c#, asp.net-mvc, linq, linq-to-sql, iqueryable

我需要能够在 Linq 查询中有一个可选参数，或者如果需要从查询中删除该可选参数，则能够将查询分配给 IF 之类的 var。

如果我在 IF 语句中设置查询 var，那么当我尝试循环遍历它时，它会告诉我该 var 在上下文中不存在。

```
if (whichGroup == "All")
        {
            var listOppLineData = (from o in db.opportunity_vws
                                   where o.fiscal_yr_and_qtr == qtr
                                   select o
                                  );
        }
        else
        {
            var listOppLineData = (from o in db.opportunity_vws
                                   where o.fiscal_yr_and_qtr == qtr && o.Group == whichGroup
                                   select o
                                  );
        }

        foreach (var data in listOppLineData)  //listOppLineData doesn't exist here
        { 
```

我需要在我认为的 IF 语句之前设置 var，但我不知道将其设置为什么。

```
var listOppLineData = ""; // gives me 
Cannot implicitly convert type 'System.Linq.IQueryable<Forecast.Models.opportunity_vw>' to 'string'

IQueryable listOppLineData = new IQueryable(); //gives me
        Cannot create an instance of the abstract class or interface 'System.Linq.IQueryable' 
```

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2015-04-03T10:52:43.987

试试这个。**您可以使用T**创建泛型类型，也可以通过将**T**替换为您的类型名称来创建特定类型。

```
IQueryable listOppLineData = Enumerable.Empty<T>().AsQueryable() 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-21T01:31:04.657

试试这个：

```
IQueryable<opportunity_vw> listOppLineData; 
```

这是定义变量，但您正在等待初始化它。

此外，查看您的查询，您可以一次性完成所有操作，如下所示：

```
var listOppLineData = (from o in db.opportunity_vws
                      where o.fiscal_yr_and_qtr == qtr && (o.Group == whichGroup || whichGroup == "All")
                      select o
                      ); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-21T02:14:39.287

你的问题是当你在 C# 中声明一个变量时，你只在当前范围内声明它。因此，如果您在块中声明变量`listOppLineData`，`if`则只能在该块内使用它，而不能在其他任何地方使用。（您可以在另一个块中定义另一个具有相同名称的变量，但它将是一个完全不同的变量，因此它不会具有您分配给第一个变量的值。）

正如您已经知道的那样，您需要在`if`块之外声明变量。

您的第一次尝试没有奏效，因为编译器看到您没有明确指定变量的类型（就是这样`var`做的）并且您将 a 分配`string`给了变量。所以推断变量的类型是`string`. 而且您不能将不是 a 的东西分配`string`给此类变量。

您的第二次尝试没有成功，因为您无法创建接口的实例。（如果你想创建一个实例，它必须是某种特定的类型，通常是一个类。）即使你修复了它，非泛型`IQueryable`也不知道其中项目的类型，所以`foreach`不会工作好。

但是您不需要为变量分配任何值，因为它是在`if`. 而这里正确的类型是泛型`IQueryable<T>`，`T`withbeing `opportunity_vw`。这意味着正确的代码是：

```
IQueryable<opportunity_vw> listOppLineData;

if (whichGroup == "All")
{
    listOppLineData = …;
}
else
{
    listOppLineData = …;
}

foreach (var data in listOppLineData)
{
    …
} 
```

如果您真的想为变量分配一些值（尽管这里没有理由这样做），您可以使用`null`（表示没有值）：

```
IQueryable<opportunity_vw> listOppLineData = null; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-03T13:24:32.483

对我来说，答案是从现有查询中设置为空，并且能够毫无例外地调用异步，如果它被转换为可枚举：

`query1 = query1.Take(0);`

它用于将来自不同表的 2 个查询合并到一个公共对象中，其中一个在某些验证情况下可能会变为空。如果我将第一个查询从联合移动到 Enumerable，我将得到异常，如果它将使用异步函数（ToListAsync（））调用，当调用联合时：

```
var res = (await query1
    .Select(q1=> new NewClass(q1))
    .ToListAsync())
    .Union(query2
    .Select(q2=> new NewClass(q2)))
    .ToList(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-21T01:29:24.203

尝试添加 .ToList();

```
var listOppLineData = (from o in db.opportunity_vws
                                   where o.fiscal_yr_and_qtr == qtr
                                   select o
                                  ).ToList(); 
```

### 更新

并修复查询。

如果没有 .ToList(); ，您将没有任何可以迭代的内容；

### Head Out of Butt 更新

```
var listOppLineData = (from o in db.opportunity_vws
                      where (whichGroup == "All" || o.Group == whichGroup)
                      && (o.fiscal_yr_and_qtr == qtr)
                      select o); 
```

将您的“短”放在 OR 之前，因此如果不需要，则永远不会评估第二部分。不过，我仍然会使用 .ToList() 。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-09-25T10:09:14.343

您可以使用这样的声明：

```
var listOppLineData = (object)null; 
```

然后将该变量用作：

```
listOppLineData = (from o in db.opportunity_vws
    where o.fiscal_yr_and_qtr == qtr && (o.Group == whichGroup || whichGroup == "All")
    select o
); 
```

# python - 如何将列表的字典格式化为表格

> ID：14993049
> 
> 赞同：4
> 
> 时间：2013-02-21T01:24:22.543
> 
> 标签：python, formatting

我有一个`dict`包含字符串的列表，并且希望将所有内容打印为终端中的表格，格式如下：

```
+----------------------------------------------+
|   key1   |   key2   |   key3    |    key4    |
+----------------------------------------------+
|   val_1  |   val_1  |   val_1   |   val_1    |
|----------|----------|-----------|------------|
|   val_2  |   val_2  |   val_2   |   val_2    |
+----------------------------------------------+ 
```

等等

是否有一个惊人的模块或实现这一目标的简单方法？我有一个列宽列表，通过在每个列表中找到最长的 val 得到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T01:51:47.933

你可以使用[`PrettyTable`](http://code.google.com/p/prettytable/).

*   我对键进行了排序，并对值进行了排序。这会产生可预测的输出。
*   我选择 PrettyTable 是因为它可以通过`apt-get install python-prettytable`.

.

```
#! /usr/bin/env python

from prettytable import PrettyTable

d1 = {
  "key1":["val1_1", "val1_2"],
  "key2":["val2_1", "val2_2"],
  "key3":["val3_1", "val3_2"],
  "key4":["val4_1", "val4_2"],
}

table = PrettyTable()

for key,val in sorted(d1.iteritems()):
  table.add_column(key, sorted(val))

print table 
```

结果是：

```
$ ./t
+--------+--------+--------+--------+
|  key1  |  key2  |  key3  |  key4  |
+--------+--------+--------+--------+
| val1_1 | val2_1 | val3_1 | val4_1 |
| val1_2 | val2_2 | val3_2 | val4_2 |
+--------+--------+--------+--------+ 
```

PrettyTable 还提供 HTML 格式。替换为`print table`：

```
print table.get_html_string(attributes={"size":"100%", "class":"MyTable"}) 
```

你得到：

```
<table border="1" class="MyTable" size="100%">
    <tr>
        <th>key1</th>
        <th>key2</th>
        <th>key3</th>
        <th>key4</th>
    </tr>
    <tr>
        <td>val1_1</td>
        <td>val2_1</td>
        <td>val3_1</td>
        <td>val4_1</td>
    </tr>
    <tr>
        <td>val1_2</td>
        <td>val2_2</td>
        <td>val3_2</td>
        <td>val4_2</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T01:27:31.400

TextTable 工作，可以通过安装

```
pip install texttable 
```

[http://fotaise.org/code/texttable/](http://foutaise.org/code/texttable/)

[https://pypi.python.org/pypi?name=texttable&:action=display](https://pypi.python.org/pypi?name=texttable&:action=display)

地图中的键未排序，因此无法保证特定顺序。

TextTable 只接受行主要的表排序，所以你必须对迭代器有点花哨：

```
import texttable
import itertools

theDict = {"key1": ["val_1", "val_2"],
           "key2": ["val_1", "val_2"],
           "key3": ["val_1", "val_2"],
           "key4": ["val_1", "val_2"]}

theTable = texttable.Texttable()
theIter = itertools.chain(
    iter([theDict.keys()]),
    itertools.imap(lambda *x: list(x), *theDict.itervalues())
    )

theTable.add_rows(theIter)
print theTable.draw() 
```

这使：

```
+-------+-------+-------+-------+
| key3  | key2  | key1  | key4  |
+=======+=======+=======+=======+
| val_1 | val_1 | val_1 | val_1 |
+-------+-------+-------+-------+
| val_2 | val_2 | val_2 | val_2 |
+-------+-------+-------+-------+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T01:48:52.817

key1、key2、key3 等的问题是 key 中的 dicts 没有排序。因此，我觉得很自由，可以将您的 dict 更改为键值元组列表，以便对键进行排序：

然后你可以做这样的事情：

```
d = [ ('Coco', ['verde', 'redondo'] ),
     ('Plátano', ['amarillo', 'doblado'] ),
     ('Fresa', ['rojo', 'redondo chiquito'] ) ]

def makeTable (d):
    widths = [2 + max ( [len (k) ] + [len (v) for v in vs] ) for k, vs in d]
    formats = ['{:^%s}' % width for width in widths]
    values = zip (* ( [k] + vs for k, vs in d) )
    sep = '\n+' + '-' * (sum (widths) + len (d) - 1) + '+\n'
    rows = sep.join ('|{}|'.format ('|'.join (formats [i].format (k) for i, k in enumerate (vs) ) ) for vs in values)
    return sep + rows + sep

print (makeTable (d) ) 
```

要将 dict 转换为元组列表，只需使用`[ (k, v) for k, v in d.items () ]`.

将这两件事放在一起会导致：

```
d = {'Coco': ['verde', 'redondo'],
     'Plátano': ['amarillo', 'doblado'],
     'Fresa': ['rojo', 'redondo chiquito'] }

print (makeTable ( [ (k, v) for k, v in d.items () ] ) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:56:28.667

如果您只需要它以格式良好的方式查看字典的内容，您可以尝试使用[Python dict 格式化程序和查看器](http://www.python-dict-viewer.com)，它似乎正是为此而设计的 - 它可以显示 dict（或dicts）作为表格或树。

# objective-c - 将嵌套的 NSDictionary 映射到自定义模型

> ID：14993051
> 
> 赞同：0
> 
> 时间：2013-02-21T01:24:23.837
> 
> 标签：objective-c, macos, cocoa, model, nsdictionary

我从 xml 文件中读取数据，简化后`NSDictionary`如下所示：

```
{
    Name = "Song Title";
    Album = "Album Title";
    "Album Artist" = "Album Artist Title";
    Artist = "Artist Title";
}, ... 
```

我想做模型`ITSong`，，，，`ITArtist`等等`ITAlbum`。
结构应该很聪明，所以我可以用`ITComposer`, 或其他方式扩展它。

问题是模型是嵌套的。应该保存一个 s 数组，
而an应该保存一个s 数组。`ITArtist``ITAlbum``ITAlbum``ITSong`

这将需要一堆嵌套的 for 循环，检查`NSString`特定键的唯一 s，并且必须为专辑、艺术家、专辑艺术家等重复。这似乎不是一个很好的解决方案。

我不想重新发明轮子，而是想检查是否有一个库可以做到这一点。

如何`NSDictionary`以正确的方式将复杂模型映射到自定义模型？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:41:47.940

RestKit（[http://restkit.org](http://restkit.org)，你还需要[https://github.com/RestKit/RKXMLReaderSerialization](https://github.com/RestKit/RKXMLReaderSerialization)）在将 XML 和 JSON 反序列化为 Objective-C 类方面做得很好。您定义 XML 和类之间的关系，它将自动创建对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:38:55.040

您的父模型对象应该负责初始化子对象。

让我们说 ITArtist

```
-(id)initWithDictionary:(NSDictionary*)artistDictionary {
    self = [super init];
    if (self) {
        self.artistName = [artistDictionary valueForKey:@"name"];
        NSMutableArray *albumObjects = [NSMutableArray new];
        NSArray *albumDicts = [artistDictionary valueForKey:@"albums"];
        for each albumDict {
               ITAlbum *albumModelObject = [[ITAlbum alloc] initWithDictionary:albumDict];//This should take care of initializing the songs
              [albumObjects addObject:albumModelObject];
               [albumModelObject release];
        }
       self.albums =  albumObjects;
       [albumObjects release];
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:41:32.153

我敢打赌，有一个框架可以做到这一点，但是键值编码应该提供开箱即用的一切。我会创建一个基类，比如 ITObject 和一个使用`setAttributesFromDictionary:`

```
- (id)initWithDict:(NSDictionary *)dict {
    if (self = [super init]) {
        [self setAttributesFromDictionary:dict];
    }
    return self;
} 
```

这将照顾你所有的正常财产。如果是嵌套的字典和数组，您只需实现（例如在 ITArtist : ITObject 中）类似

```
- (void)setValue:(id)value forKey:(NSString *)key {
    if ([key isEqualToString:@"albums"]) {
        if ([value isKindOfClass:[NSArray class]]) {
            NSMutableArray *myMembers = [NSMutableArray arrayWithCapacity:[value count]];
            for (id valueMember in value) {
                ITAlbum *album = [[[ITAlbum alloc] initWithDict:valueMember] autorelease];
                [myMembers addObject:album];
            }
            self.albums = myMembers;
        }
    } else {
        [super setValue:value forKey:key];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T02:18:55.523

您为什么不考虑根据您的自定义数据集拥有一个 XML 文件，然后拥有一个 NSDictionary ，请看这里的一个示例... [Simple XML to NSDictionary Converter](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)

# r - 如何确定 R 中 DBSCAN 的距离 / eps？

> ID：14993054
> 
> 赞同：2
> 
> 时间：2013-02-21T01:24:39.473
> 
> 标签：r, distance, dbscan

我有一个点数据集；

```
 lat   |long    | time
 34.53  -126.34  1
 34.52  -126.32  2
 34.51  -126.31  3
 34.54  -126.36  4
 34.59  -126.28  5
 34.63  -126.14  6
 34.70  -126.05  7
 ... 
```

（更大的数据集，但这是一般结构。）

我想根据距离和时间对点进行聚类。DBSCAN 似乎是一个不错的选择，因为我不知道有多少集群。

我目前正在使用分钟/5500（我相信，它大约是 20 米，按比例缩放。）

```
library(fpc)
 results<-dbscan(data,MinPts=3,eps=0.00045,method="raw",scale=FALSE,showplot=1) 
```

由于我有原始数据，因此我无法理解如何确定缩放/距离。我可以猜测缩放或未缩放时的 eps 值，但我不清楚缩放是做什么的，或者正在使用什么距离度量（也许是欧几里德距离？）在某处是否有相关文档？

（这不是要找到一种自动选择方法，（例如[为 DBSCAN (R) 选择 eps 和 minpts？](https://stackoverflow.com/questions/12893492/choosing-eps-and-minpts-for-dbscan-r)），而是关于不同值的含义。说“您首先需要一个距离函数”并不能解释距离函数是什么正在使用的是，或者如何创建一个......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T14:34:15.767

首先计算数据的距离矩阵。然后，`method='row'`您可以使用`method='dist'`. 这样，dbscan 会将您的数据视为距离矩阵，因此无需担心距离函数是如何实现的。请注意，这可能需要更多内存，因为您正在预先计算距离矩阵并将其存储在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:39:20.343

我不使用`R/fpc`但ELKI，所以我不能真正回答你的问题。原因是我发现它比 快得多`fpc`，特别是当您可以使用索引时。当您使用百万点的数据集时，差异是巨大的。

此外，它非常灵活，这似乎是您所需要的：

ELKI 确实有一个使用大圆距离的 LatLng 距离函数。然后我可以很容易地以公里为单位设置 epsilon。

但是，您也有一个`time`属性。您是否有计划将其包含在您的分析中？ELKI 有一个[关于编写自定义距离函数的教程](http://elki.dbs.ifi.lmu.de/wiki/Tutorial/DistanceFunctions)，这可能是你当时需要的。您应该能够重用大圆距离，这是 DBSCAN 为您提供的一个巧妙技巧：

DBSCAN 并不真正需要距离。它需要知道邻居，但距离仅用于与 epsilon 进行比较。因此，通过定义一个距离函数，当两个对象应该相似时为 0，如果应该不同则为 1，再加上 0.5 的 epsilon，您可以进行更复杂的聚类。在您的上下文中，您可以将距离函数定义为：

```
0 if the distance is less than 0.1 km and the time difference is also less than t
1 otherwise 
```

# php - PHP电子邮件标题主题问题

> ID：14993057
> 
> 赞同：0
> 
> 时间：2013-02-21T01:24:57.770
> 
> 标签：php, forms

我一直在尝试在我的联系表单中添加主题行，但我无法让它工作。一定有什么东西不见了，但我就是想不通。当电子邮件到达时，我可以看到用户的姓名和电子邮件，但我无法获得主题。

我相信我的 PHP 脚本有问题：

```
<?php
 $names = $_POST['names'];
 $email = $_POST['email_address'];
 $subject = $_POST['subject'];
 $comment = $_POST['comment'];
 $to ='my-email@hotmail.com';

 $message = "";
 $message .= "Name: " . htmlspecialchars($names, ENT_QUOTES) . "<br>\n";
 $message .= "Email: " . htmlspecialchars($email, ENT_QUOTES) . "<br>\n";
 $message .= "Subject: " . htmlspecialchars($subject, ENT_QUOTES) . "<br>\n";

 $message .= "Comment: " . htmlspecialchars($comment, ENT_QUOTES) . "<br>\n";
 $lowmsg = strtolower($message);

 $headers = "MIME-Version: 1.0\r\nContent-type: text/html; charset=iso-8859-1\r\n";
 $headers .= "From: \"" . $names . "\" <" . $email . ">\r\n";
 $headers .= "Reply-To: " .  $email . "\r\n";
 $message = utf8_decode($message);  mail($to, "Note from the Contact Form", $message, $headers);

 if ($message){
   echo 'sent';
 }else{
    echo 'failed';
 }
?> 
```

# scroll - 三.js滚动

> ID：14993058
> 
> 赞同：2
> 
> 时间：2013-02-21T01:24:58.523
> 
> 标签：scroll, three.js

到目前为止，我创建的每个 three.js 场景都有这个问题，但这里有一个例子（我目前正在处理的那个）。如果你放太多 html 代码，它会在场景下，但我不能向下滚动查看它。我怎样才能允许页面滚动？这是一个页面示例：

```
<!DOCTYPE html>
<html lang="fr" xml:lang="fr" xmlns="http://www.w3.org/1999/xhtml">
<head>

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>        

<script src="lib/Three.js" type="text/javascript"></script>

<script src="lib/Detector.js"></script>
<script src="lib/stats.min.js" type="text/javascript"></script>
<script src="lib/THREEx/THREEx.WindowResize.js"></script>
<script src="lib/THREEx/THREEx.FUllScreen.js"></script>
<script src="lib/TrackballControls.js"></script>

  <style type="text/css">
  body
{
    color: #ffffff;
    text-align:center;
    background-color:  gray;
    margin: 0px;
    overflow: hidden;

}
#center
{
    color: #fff;
    position: absolute;
    top: 50px; width: 100%;
    padding: 5px;
    z-index:100;
}

#center h1
{

    font-size:60px;
}

#container
{
    position:absolute;
    bottom:0;
}

  </style>

</head>

<body>

<div id="container"></div>

 </body>

 <script>
// MAIN

console.log("Main.js");
if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

// global variables

var container, scene, camera, renderer, stats, controls;

// custom variables 

var t = THREE;
var cube;

// to keep track of the mouse position
var projector, INTERSECTED, mouse = { x: 0, y: 0 },

// an array to store our particles in
particles = [];

init();
animate();

function init()
{

    // scene
    scene = new THREE.Scene();

    // camera
    var SCREEN_WIDTH = window.innerWidth, SCREEN_HEIGHT = window.innerHeight;
    var VIEW_ANGLE = 45, ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT, NEAR = 0.1, FAR = 20000;
    camera = new THREE.PerspectiveCamera( VIEW_ANGLE, ASPECT, NEAR, FAR);
    scene.add(camera);
    camera.position.set(0,0,800);
    camera.lookAt(scene.position);

    // renderer
    renderer = new THREE.CanvasRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );

    // container
    container = document.getElementById('container');
    container.appendChild( renderer.domElement );

    // stats
    stats = new Stats();
    stats.domElement.style.position = 'absolute';
    stats.domElement.style.bottom = '0px';
    stats.domElement.style.zIndex = 100;
    container.appendChild( stats.domElement );

    // events 
    THREEx.WindowResize(renderer, camera);
    THREEx.FullScreen.bindKey({ charCode : 'm'.charCodeAt(0) });

    // initialize object to perform world/screen calculations
    projector = new THREE.Projector();

    // CUSTOM

    // Cubes

    x = window.innerWidth / 5;
    y =  window.innerHeight / 10;
    console.log(window.innerWidth);
    console.log(window.innerHeight);
    var geometry = new t.CubeGeometry(125,125,125);
    var material = new t.MeshBasicMaterial({color:0xCCCCCC});
    cube = new t.Mesh(geometry, material);
    cube.name = "cube";

    scene.add(cube);
    cube.position.set(-x,-y,0);

    x = window.innerWidth;
    y =  window.innerHeight / 10;

    var geometry2 = new t.CubeGeometry(125,125,125);
    var material2 = new t.MeshBasicMaterial({color:0xCCCCCC});
    cube2 = new t.Mesh(geometry2, material2);
    scene.add(cube2);

    cube2.name = "cube2";
    cube2.position.set(0,-y,0);

    x = window.innerWidth / 5;
    y =  window.innerHeight / 10;

    var geometry3 = new t.CubeGeometry(125,125,125);
    var material3 = new t.MeshBasicMaterial({color:0xCCCCCC});
    cube3 = new t.Mesh(geometry3, material3);
    cube3.name = "cube3";

    scene.add(cube3);
    cube3.position.set(x,-y,0);

    // particles

    makeParticles(); 

// Mouse events
document.addEventListener( 'mousemove', onMouseMove, false ); 
document.addEventListener( 'mousedown', onMouseDown, false ); 

}

// called when the mouse moves
function onMouseMove( event ) 
{
// store the mouseX and mouseY position 
mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
}

function onMouseDown( event ) 
{
    event.preventDefault();

    var vector = new THREE.Vector3( mouse.x, mouse.y, 1 );
    projector.unprojectVector( vector, camera );
    var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );

    var intersects = ray.intersectObjects( scene.children );

    if ( intersects.length > 0 )
    {
        console.log(INTERSECTED.name);
        if(INTERSECTED.name == "cube")
        {
            page("real");
        }
    }
}

function animate() 
{
    cube.rotation.y +=0.005;
    cube.rotation.x -=0.005;
    cube2.rotation.y +=0.005;
    cube2.rotation.x -=0.005;
    cube3.rotation.y +=0.005;
    cube3.rotation.x -=0.005;
    //textMesh.rotation.y +=0.005;

    requestAnimationFrame( animate );
    render();   
    update();   
}

                // creates a random field of Particle objects

function makeParticles() 
{ 

var particle, material; 

    // we're gonna move from z position -1000 (far away) 
    // to 1000 (where the camera is) and add a random particle at every pos. 
    for ( var zpos= -1000; zpos < 1000; zpos+=20 ) 
    {

    // we make a particle material and pass through the 
    // colour and custom particle render function we defined. 
    material = new THREE.ParticleCanvasMaterial( {  program: particleRender } );
    // make the particle
    particle = new THREE.Particle(material);

    // give it a random x and y position between -500 and 500
    particle.position.x = Math.random() * 1000 - 500;
    particle.position.y = Math.random() * 1000 - 500;

    // set its z position
    particle.position.z = zpos;

    // scale it up a bit
    particle.scale.x = particle.scale.y = 10;

    // add it to the scene
    scene.add( particle );

    // and to the array of particles. 
    particles.push(particle); 
    }
}

// there isn't a built in circle particle renderer 
// so we have to define our own. 

function particleRender( context ) 
{

// we get passed a reference to the canvas context
context.beginPath();
// and we just have to draw our shape at 0,0 - in this
// case an arc from 0 to 2Pi radians or 360º - a full circle!
context.arc( 0, 0, 0.2, 2,  Math.PI * 4, true );
context.fillStyle = "white";
context.fill();
};

    // moves all the particles dependent on mouse position

function updateParticles() 
{ 

    // iterate through every particle
    for(var i=0; i<particles.length; i++) 
    {

    particle = particles[i]; 

    // and move it forward dependent on the mouseY position. 
    particle.position.z +=  250 * 0.02;

    // if the particle is too close move it to the back
    if(particle.position.z>1000) particle.position.z-=2000; 

    }

}

function render()
{
renderer.render( scene, camera );
}

function update()
{
updateParticles();
stats.update();

    // find intersections

    // create a Ray with origin at the mouse position
    //   and direction into the scene (camera direction)
    var vector = new THREE.Vector3( mouse.x, mouse.y, 1 );
    projector.unprojectVector( vector, camera );
    var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );

    // create an array containing all objects in the scene with which the ray intersects
    var intersects = ray.intersectObjects( scene.children );

    // INTERSECTED = the object in the scene currently closest to the camera 
    //      and intersected by the Ray projected from the mouse position    

    // if there is one (or more) intersections
    if ( intersects.length > 0 )
    {
        // if the closest object intersected is not the currently stored intersection object
        if ( intersects[ 0 ].object != INTERSECTED) 
        {
            // restore previous intersection object (if it exists) to its original scale
            if ( INTERSECTED )  
            {
                INTERSECTED.scale.x = INTERSECTED.currentscale.x;
                INTERSECTED.scale.y = INTERSECTED.currentscale.y;
                INTERSECTED.scale.z = INTERSECTED.currentscale.z;
            }
            // store reference to closest object as current intersection object
            INTERSECTED = intersects[ 0 ].object;
            // store scale of closest object (for later restoration)
            scalex = INTERSECTED.scale.x;
            scaley = INTERSECTED.scale.y;
            scalez = INTERSECTED.scale.z;

            INTERSECTED.currentscale = { x : scalex , y : scaley, z : scalez };
            // set a new scale for closest object
            INTERSECTED.scale.x = INTERSECTED.scale.y = INTERSECTED.scale.z = 1.5;

        }
    } 

    else // there are no intersections
    {
        // restore previous intersection object (if it exists) to its original scale
        if ( INTERSECTED ) 
        {
            INTERSECTED.scale.x = INTERSECTED.currentscale.x;
            INTERSECTED.scale.y = INTERSECTED.currentscale.y;
            INTERSECTED.scale.z = INTERSECTED.currentscale.z;
        }

        // remove previous intersection object reference
        //     by setting current intersection object to "nothing"
        INTERSECTED = null;
    }

}

// Pour charger une page dynamiquement
    function page(page){
    $("body").animate({opacity:0},1000, function(){
    $("body").empty();
    $("body").load(page +'.html');
    $("body").animate({opacity:1},1000, function(){

            });
        });
}

 </script>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:52:57.933

你有

```
body { overflow: hidden; } 
```

这至少是您问题的一部分，因为它指定页面内容不应滚动而应被截断。您可能需要更改 CSS 的其他部分以获得所需的布局，但这肯定需要删除。

# arduino - Arduino没有得到认可

> ID：14993061
> 
> 赞同：5
> 
> 时间：2013-02-21T01:25:21.370
> 
> 标签：arduino, arduino-uno

我不确定这是问的正确地方，但我在 stackoverflow 上看到了其他 Arduino 线程，所以我假设它没问题。

我的 arduino uno 兼容板没有得到认可。我在windows 8和windows xp上试过。当我打开设备管理器时，在“端口（COM 和 LPT）”部分下只有一个名为“USB 串行端口”的条目。然而，Arduino 在连接时确实会闪烁。

我尝试卸载 USB 串行端口驱动程序，或更新它们，但两者都不起作用：驱动程序似乎是最新的，当我卸载并重新连接 arduino 时，它们又出现了。

当我尝试上传程序时，我得到

```
avrdude: stk500_getsync(): not in sync: resp=0x00 
```

或者

```
avrdude: usbdev_open(): did not find any USB device "usb" 
```

（当我使用“使用程序员上传”时）。

我希望任何人都可以帮助我解决这个问题，我一直在努力让它工作一段时间。

![我的设备管理器的屏幕截图，与 Arduino Uno 兼容的板已连接并闪烁](../Images/b6287841c574da3305e972dbb8353f21.png)

编辑 2：我在我父母的电脑上尝试了同样的事情，它安装了 windows vista。在那里，该板在“未知设备”下被识别为 USB 串行端口（首先是其他东西，我认为它是一个包含两个大写字母和四个数字的代码，但我不确定，我无法理解重新命名，即使在卸载驱动程序后）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:04:10.950

你安装驱动了吗？请参阅#4 下的 Arduino[安装说明。](http://arduino.cc/en/Guide/Windows)如果您正在尝试使用 Windows 8，则[涉及一些其他步骤](http://www.bryonconnolly.com/windows-8-arduino-driver-install)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T14:34:30.910

我最终使用[Arduino Enchanched Release for Windows](https://code.google.com/p/arduino-erw/)让它工作。这为我安装了正确的驱动程序。然后我不得不选择 Duemilanov 板（而实际的板是“Uno”）。我想我以前试过那个板，但显然当时我没有安装正确的驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-27T20:20:37.763

有一个 Arduino UNO 教学视频展示了如何安装驱动程序。下面的 url 应该从讲师谈到手动安装驱动程序的部分开始。

[http://www.youtube.com/watch?feature=player_detailpage&v=kLd_JyvKV4Y&t=1140](http://www.youtube.com/watch?feature=player_detailpage&v=kLd_JyvKV4Y&t=1140)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-22T15:41:45.450

当您在 Windows 10 和 11 上遇到以下错误“无法识别 USB Arduino”时，您需要执行以下操作：

1.  在 Arduino IDE 上打开一个新的空白草图。
2.  通过连续单击复位按钮 2 次，将电路板置于可编程模式。琥珀色 LED 亮起。
3.  打开首选项并在“显示详细输出”上禁用“编译时”和“上传”。关闭首选项。
4.  将空白草图上传到板上。
5.  将您的代码复制并粘贴到新的空白草图中

如果再次出现相同的错误，则表示您的代码中有错误。例如，在类中的方法上缺少 return 语句，如下例所示：

```
//***********************************************************************
class MString {
  public:
    MString() {
    }

    String replaceChr(String str, String oldChar, String newChar) {
      if (newChar == "\0") {
        // remove occurences of newChar in str
        while (str.indexOf(oldChar) > -1) {
          int pos = str.indexOf(oldChar);
          str.remove(pos, 1);
        }
      } else {
        str.replace(oldChar, newChar);
      }
      // !!!!
    }
};

MString mString = MString(); 
```

在这种情况下，代码验证在 Arduino IDE 1.8.15 上没有抛出任何错误，并且上传成功。为了解决这个问题，我简单地添加了方法的返回语句：`return str;`

USB错误消失了！！！并再次完全工作。

# java - 虽然循环给出空异常指针并且不会进入

> ID：14993064
> 
> 赞同：0
> 
> 时间：2013-02-21T01:25:56.643
> 
> 标签：java, while-loop, boolean

我的问题是函数末尾的 while 循环

```
public void insertInOrder(int i){
    Node temp;
    if(head == null){
        head = new Node(i,null);
    }
    else if (head.getData() > i){
        temp = new Node(i,head);
        head = temp;
    }
    else {
        Node curr = head;
        while (curr.getNext() != null && curr.getNext().getData() <= i);
            while(curr.getNext().getData() <= i)
               curr = curr.getNext();
        temp = new Node(i,curr.getNext());
        curr.setNext(temp) 
```

为了进入while循环，我需要让我的链表中的下一个节点不等于null，并且它必须小于i。这一直有效，直到我发送一个导致列表末尾的值并且我得到一个空指针异常错误，因为第二个语句无法评估。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:38:32.783

我认为你有一个不应该存在的尾随分号：

```
---------------------------------------------------------------v
while (curr.getNext() != null && curr.getNext().getData() <= i);
        while(curr.getNext().getData() <= i)
           curr = curr.getNext(); 
```

在我看来，删除它，你的代码应该可以工作。

这种错误是您应该始终使用花括号的原因之一，即使它们看起来没有必要。所以我会像这样重写while循环：

```
while (curr.getNext() != null && curr.getNext().getData() <= i) {
        while(curr.getNext().getData() <= i) {
           curr = curr.getNext();
        }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:40:36.723

删除语句末尾的分号

`while (curr.getNext() != null && curr.getNext().getData() <= i);`<----

# apache-flex - 从脚本中调用组件

> ID：14993067
> 
> 赞同：0
> 
> 时间：2013-02-21T01:26:25.980
> 
> 标签：apache-flex, custom-component

我有一个组件，我想从脚本部分中调用它。

所以不要像这样得到它：

```
<s:application>
<script>
</script

<ns1:msns includeIn="login" x="482" y="541">
    </ns1:msns>
</s:application> 
```

我想要这样的东西：

```
<s:application>
<script>
protected function mmshakkoutab(event:MouseEvent):void
            {               
var ns1:msns:component = new component();
ns1:msns.x = 5
ns1:msns.x = 5
}
</script

</s:application> 
```

这甚至可能吗？我已经四处搜索，但所有示例都给了我脚本下的组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:23:12.063

如果我理解正确，那么是的，这是可能的。您“调用组件”的术语是非标准的；但我认为您想在 ActionScript 而不是 MXML 中创建组件。用 MXML 可以做的任何事情都可以用 ActionScript 做。

你有正确的想法；你几乎就在那儿了；只有几件事我会改变。首先，在 ActionScript 中，您将导入该类；你不会引用 MXML 命名空间，概念上是这样的：

```
import com.myPackage.msns; 
```

在您的脚本块中。

创建组件时，您希望创建一个指向它的变量。这将对应于 MXML 中的 id 字段。您的语法`ns1:msns:component`可能会导致编译器错误。但是，您可以像这样创建组件：

```
var msns :component = new component() 
```

我将在这里提到通常的约定是将组件名称大写。不过，您对小写字母的使用在语法上并没有错。

然后设置组件的属性，你已经在做：

```
msns.x = 5
msns.x = 5 
```

最后 - 这是您缺少的步骤 - 您必须将新组件添加到容器中。如果您正在处理 Spark 容器，则可以使用[addElement](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Group.html#addElement%28%29)来执行此操作；如果您正在处理 MX 容器，则可以使用[addChild 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#addChild%28%29)因为，在您提供的示例中，您的父容器是 spark 应用程序，所以我将使用 addElement：

```
this.addElement(msns); 
```

因此，您的代码块将像这样重写：

```
protected function mmshakkoutab(event:MouseEvent):void{               
 var msns:component = new component();
 msns.x = 5
 msns.x = 5
 this.addElement(msns);
} 
```

您应该考虑阅读的一件事是[Flex Component LifeCycle](http://help.adobe.com/en_US/flex/using/WS460ee381960520ad-2811830c121e9107ecb-7fff.html)。每个 Flex 组件都经过它；某些事情是为了某种目的而按某种顺序完成的。对于创建子项，您最好扩展 createChildren()，特别是如果您希望将组件创建为应用程序标签初始设置的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:23:25.570

要以编程方式实例化组件而不是声明式实现，请使用`addElement()`将组件添加到显示列表。

例如，要将视觉元素添加到名为`container`.

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               creationComplete="creationCompleteHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.core.UIComponent;
            import mx.events.FlexEvent;

            protected function creationCompleteHandler(event:FlexEvent):void
            {
                var component:UIComponent = new UIComponent();
                component.x = 5;
                component.y = 5;

                container.addElement(component);
            }
        ]]>
    </fx:Script>

    <s:Group id="container" />

</s:Application> 
```

在脚本块中，使用包命名空间而不是 MXML 命名空间。

```
import com.msns.Component;

var component:Component = new Component();
component.x = 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:46:32.880

如果假设您的组件是 ActionScript 即扩展为 sprite，您可以这样做

```
protected function creationCompleteHandler(event:FlexEvent):void
{
    var yourASClassObj:ASClass = new ASClass();

    var component:UIComponent = new UIComponent();
    this.addElement(component);

    component.addChild(yourASClassObj);
} 
```

# c# - 在 asp .net mvc 中，应如何布置发送以查看本地化文本的数据？

> ID：14993077
> 
> 赞同：2
> 
> 时间：2013-02-21T01:27:42.193
> 
> 标签：c#, asp.net-mvc, database, localization, design-patterns

假设我想显示一个包含表单和按钮的字段集。

将有一些 I/O 值的文本框和一些标签：

1.  字段集标题（与值无关）
2.  文本框（标签和验证）
3.  提交按钮（与值无关）

标签将从基于本地化的数据库中提供。

对于案例 2，我想使用 mvc 已经支持的机制（DataAnnotations 属性），所以我找到了以下 2 个解决方案：

*   编写与 DataAnnotations 属性一起使用的数据库资源提供程序 ( [http://msdn.microsoft.com/en-us/library/aa905797.aspx#exaspnet20rpm_topic4](http://msdn.microsoft.com/en-us/library/aa905797.aspx#exaspnet20rpm_topic4) )
*   扩展 DataAnnotations 属性以使用我的数据库上下文并检索本地化文本（[asp.net mvc 输入/模型验证多语言](https://stackoverflow.com/questions/3966680/asp-net-mvc-input-model-validation-multi-language)）

视图模型示例如下所示：

```
Model
{
    fieldset title localized label

    [textbox localized display label]
    [textbox localized validation label]
    textbox value

    button localized label
} 
```

虽然案例 2 的标签被指定为视图模型值的元数据，但考虑到具有大内容的视图，从数据库中为案例 1 和 3 指定本地化文本的优雅且一致的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:45:24.950

一个解决方案，虽然有点过分，但是有一个空模型成员，每个本地化标签都有一个显示属性，并使用自定义助手^([1])来检索纯文本。

[[1]：[在asp.net MVC中不使用LabelFor Helper获取DisplayName属性](https://stackoverflow.com/questions/3885796/get-displayname-attribute-without-using-labelfor-helper-in-asp-net-mvc?answertab=active#tab-top)]

# selenium - 防止 selenium 网格随机关闭远程会话

> ID：14993079
> 
> 赞同：1
> 
> 时间：2013-02-21T01:27:50.447
> 
> 标签：selenium, selenium-webdriver, selenium-grid

我遇到了一个问题，Selenium Grid 随机关闭在我的测试机器上运行的会话。听起来很像以下报告的问题：

[http://code.google.com/p/selenium/issues/detail?id=4156](http://code.google.com/p/selenium/issues/detail?id=4156)

这主要发生在我的测试期间，所以如果我的测试由于某种原因失败并且它没有到达我关闭会话的方法，即“driver.close()”，会话将继续运行。如果我需要修复某些问题并重新启动测试，会话会正常启动，但 Grid 会随机关闭会话，我会在节点控制台中看到以下消息：

```
Executing: [delete session: .... ] at URL: /sesssion/.... 
```

至少可以说真的很烦人，有没有人知道完全关闭会话而无需重新启动节点或网格的方法？

# json - 在 DISpatcherServlet 中找不到映射

> ID：14993087
> 
> 赞同：0
> 
> 时间：2013-02-21T01:28:46.833
> 
> 标签：json, spring, tomcat, spring-mvc

我已经与这条信息抗争了几天，无法弄清楚我有什么问题。

基本上我想做的是用我的服务提供json。我对返回 jsp 不感兴趣。

我请求的网址是

```
localhost/service/products/1 
```

这是错误。

```
WARN - No mapping found for HTTP request with URI [/service/products/1] in DispatcherServlet with name 'cr' 
```

我的 ProductsController 显示如下：

```
package com.cr.controllers;

import com.cr.dao.ProductsDao;
import com.cr.entity.Products;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import javax.servlet.ServletResponse;
import java.io.IOException;

/**
 * User: ChappleZ
 * Date: 2/17/13
 * Time: 8:21 PM
 */
@Controller
@RequestMapping(value = "/service")
public class ProductsController {
    private static final Logger log = LoggerFactory.getLogger(ProductsController.class);
    @Autowired
    private ProductsDao productsDao;

    @RequestMapping(method = RequestMethod.GET)
    public void get(ServletResponse response) throws IOException {
        response.setContentType("text/plain");
        response.getWriter().print("My Products dao: " + productsDao);
    }

    @RequestMapping(value = "/products/{productId}",
            headers="Accept=application/json",
            method = RequestMethod.GET)
    public
    @ResponseBody
    Products findByProductId(@PathVariable Long productId) {
        Products products = productsDao.getProductsById(productId);
        return products;
    }
} 
```

应用环境：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       ">
    <context:annotation-config />
    <jpa:repositories base-package="com.cr" />

    <!--   // JPA specific configuration here: dataSource, persistenceUnitManager exceptionTranslator, entityManagerFactory, SessionFactory, transactionManager - should not be relevant for this problem, tell me if i'm wrong-->

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean id="productsDao" class="com.cr.dao.impl.ProductsDaoImpl"/>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="persistenceUnitName" value="spring-jpa"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true"/>
                <property name="generateDdl" value="true"/>
                <property name="database" value="MYSQL"/>
            </bean>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <tx:annotation-driven/>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/crcart3"/>
        <property name="username" value="root"/>
        <property name="password" value=""/>
    </bean>
</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>cr</display-name>
    <description>cr</description>
    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>classpath:log4j.xml</param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:applicationContext.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>cr</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/conf/spring-controllers.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>cr</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>httpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>httpMethodFilter</filter-name>
        <servlet-name>cr</servlet-name>
    </filter-mapping>

    <session-config>
        <session-timeout>15</session-timeout>
    </session-config>

    <error-page>
        <error-code>401</error-code>
        <location>/error/401</location>
    </error-page>
    <error-page>
        <error-code>404</error-code>
        <location>/error/404</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/error/500</location>
    </error-page>
    <error-page>
        <error-code>504</error-code>
        <location>/error/504</location>
    </error-page>
    <error-page>
        <exception-type>java.lang.Throwable</exception-type>
        <location>/error/500</location>
    </error-page>

</web-app> 
```

Spring-Controllers.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:oxm="http://www.springframework.org/schema/oxm"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd">

    <context:property-placeholder location="classpath:config.properties"/>

    <context:component-scan base-package="com.cr"/>

    <bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
        <property name="supportedMediaTypes" value="application/json"/>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jsonConverter"/>
            </list>
        </property>
    </bean>

    <mvc:resources mapping="/resources/**" location="/resources/"/>

</beans> 
```

此外，如果它有帮助，也会在 404 页面上显示相同的警告。

```
WARN - No mapping found for HTTP request with URI [/service/products/1] in DispatcherServlet with name 'cr'
WARN - No mapping found for HTTP request with URI [/error/404] in DispatcherServlet with name 'cr' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:54:51.877

我看到的三个问题：

1.  在 web.xml 中，您的 DispatcherServlet 应该被映射到，`/*`而不仅仅是`/`. 后者只匹配空路径而不匹配其他任何东西，因此您请求的路径永远不会命中 servlet。
2.  您遗漏`<mvc:annotation-driven/>`了 spring-controller.xml。
3.  可能不相关，但肯定会导致将来出现问题，在您的 spring-controllers.xml 中，您不应该像在 applicationContext.xml 中那样对相同的基本包进行组件扫描。spring-controllers.xml 用于配置 DispatcherServlet，并且应该只包含控制器和 MVC 相关的 bean。applicationContext.xml 是您的服务、DAO 和相关事物应该存在的地方。这与此处描述的问题相同：

[在父上下文与子上下文中声明 Spring Bean](https://stackoverflow.com/questions/7746633/declaring-spring-bean-in-parent-context-vs-child-context/7748108#7748108)

有关在 Spring MVC 中配置 Spring 上下文的正确方法的进一步说明，请参见：

[为什么 DispatcherServlet 创建另一个应用程序上下文？](https://stackoverflow.com/questions/7833767/why-dispatcherservlet-creates-another-application-context/7836031#7836031)

# php - PHP：将一维数组展平为间隔字符串

> ID：14993091
> 
> 赞同：1
> 
> 时间：2013-02-21T01:29:05.720
> 
> 标签：php, arrays

经过大量搜索（并找到了关于多维度的无尽帖子，但没有单一维度），我想我会问这个问题。

我有一个数组

```
$arr = array('foo' => 'bar'); 
```

我正在寻找一个输出

```
$str = 'foo bar'; 
```

这必须是一个单行，没有递归循环等等等等，我认为它必须是某种 lambda。不过，这个数组永远不会有超过一个键和一个值。

我认为它最终会看起来像

```
$arr = array('foo' => 'bar');
echo 'Authorization: '  . array_walk($arr, function ($v, $k) { echo "$k $v"; }); 
```

不幸的是，最终成为`foo barAuthorization: 1`

不知道 1 来自哪里 =P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T01:36:35.807

这应该很容易，因为数组刚刚初始化并且指针位于数组的开头：

```
echo 'Authorization: ' . key($arr) . ' ' . current($arr); 
```

当然，如果您已经从数组中读取了数据，那么`reset()`在执行此操作之前需要执行 a 以将指针返回到数组的开头。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T01:32:50.597

PHP 在处理函数前面的字符串之前处理函数。尝试`echo`用`return`. 我认为 1 来自 array_walk 函数的成功处理。

```
echo 'Authorization: '  . array_walk($arr, function ($v, $k) { return "$k $v"; }); 
```

更新：查看 Example#1 [http://php.net/manual/en/function.key.php](http://php.net/manual/en/function.key.php)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-21T01:36:30.963

“虽然这个数组永远不会有超过一个键和一个值”

```
echo 'Authorization: '  .  array_shift(array_keys($arr)). ' ' . array_shift($arr) ; 
```

# java - 如何声明和实例化一个新的通用数组？

> ID：14993092
> 
> 赞同：1
> 
> 时间：2013-02-21T01:29:10.173
> 
> 标签：java, arrays, generics, data-structures, generic-programming

我正在复习我的数据结构技能。我在网上找到了一本很棒的免费书籍，名为[Open Data Structures in Java。](http://opendatastructures.org/ods-java-screen.pdf)通读后，我尝试使用提供的代码创建所有声明的数据结构，以便将它们灌输到我的记忆中。

我遇到了一个“错误”，我一辈子都想不通：在（第 2.1.2 节）的`resize()`方法中`ArrayStack`，有一行代码 - `T[] b = newArray(Math.max(n*2,1));`。这样做的重点是包含元素的数组既不会太小也不会太大。如果我使用这行代码，我会从 Eclipse 收到以下错误消息：

`The method newArray(int) is undefined for the type ArrayStack<T>.`

所以，我认为它一定是一个“错字”，意思是“新数组”。但是修复它会给我留下来自 Eclipse 的以下错误消息：

`Type mismatch: cannot convert from Array to T[]`.

我不明白我错过了什么或做错了什么。**所以总结一下我的问题，**你如何声明和实例化一个新的通用数组，特别是在固定大小的情况下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:52:06.670

给定 的类`T`，我们称它为`klass`...

对于长度为 的一维数组`n`：

```
T[] arr = (T[]) Array.newInstance(klass, n) 
```

对于长度为 的二维数组`n x m`：

```
T[][] 2dArr = (T[][]) Array.newInstance(klass, n, m) 
```

上面其实是两个不同的函数，一个带`int`参数，第二个带`int...`参数，也可以作为数组传递。两者都返回`Object`你需要未经检查的演员表。

如果你想要一个长度为锯齿状的数组`n`，第二维不确定，你将不得不得到 的类`T[]`，我们称之为它`klass2`，然后做

```
T[][] 2dArr2 = (T[][]) Array.newInstance(klass2, n) 
```

这就是为什么您还需要将类型传递给`collection.toArray(T[] arr)`，否则您会得到一个`Object[]`for vanilla`toArray()`方法，因为它不知道类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:57:03.537

你想要的是：

```
void resize() {
    T[] b = new T[Math.max(n*2,1)];
    for (int i = 0; i < n; i++) {
        b[i] = a[i];
    }
    a = b;
} 
```

但这不起作用，因为 T 在运行时实际上并不知道，而且它必须是。然而，这可以用一个通用安全的构造函数来编写。

```
void resize() {
    T[] b = (T[]) Array.newInstance( a.getClass().getComponentType(),
                                     Math.max(n*2,1) );
    for (int i = 0; i < n; i++) {
        b[i] = a[i];
    }
    a = b;
} 
```

看来作者打算在该类中有一个方法 newArray ：

```
void T[] newArray(int size) {
    return (T[]) Array.newInstance( a.getClass().getComponentType(), size);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:34:50.397

Java 并没有使这成为一件简单的事情。由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)， T 的类在运行时不可用（此时您需要确定要创建的数组类型）。

但是，由于您已经有一个数组 ( `a`)，您可以使用反射来创建该类型的新数组。

它看起来像这样：

```
import java.lang.reflect.Array;

public class Test {

        public static void main(String args[]) throws Exception {
                Object array[] = new Object[5];

                array = resizeArray(array, 10);

                for (Object o : array) {
                        System.out.println(o);
                }
        }

        public static <T>
        T[] resizeArray(T[] a, int newSize) throws Exception {
                T[] b = (T[]) Array.newInstance(a.getClass().getComponentType(),
                                                newSize);

                for (int i = 0; i < a.length; i++) {
                        b[i] = a[i];
                }

                return b;
        }
} 
```

# mongodb - Windows 是否有任何 mongo shell 扩展？

> ID：14993096
> 
> 赞同：2
> 
> 时间：2013-02-21T01:29:33.867
> 
> 标签：mongodb, mongo-shell

我找到了[mongo-hacker](https://github.com/TylerBrock/mongo-hacker)项目，但它不支持 Windows，所以我想知道有人知道类似的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-02T09:52:19.507

```
mongo-hacker确实可以在 Windows 上工作，但需要做一些工作：

----------------------------------
1）制作自己的mongo配置文件（.mongorc.js）
----------------------------------
  这位于您的文档中：
  %USERPROFILE%\.mongorc.js
  例如。C:\Users\Olivier\.mongorc.js

  A) 将 mongo-hacker 中的所有文件制作成一个大 JS 文件。
  ----------------------------------

    A.1。如果你有 cygwin（或一些 unix 仿真工具）：
    可能有更好的方法来实现这一点，但这会奏效。
    解压缩 .zip 文件后，您将位于 \mongo-hacker-master\hacks

        查找 ./ -type f -name "*.js" | xargs 猫 > .mongorc.js

    然后，您可以将此文件移动到您的文档中。

    A2。别的 ：
    或者，如果这里更方便的是我的版本（写作时为 0.0.4）：
    下载：适用于 windows 的 .mongorc.js 示例
    并将此文件复制到您的文档中。

----------------------------------
2）让着色工作：
----------------------------------

  A) 下载: ansicon
  ----------------------------------
  这会处理 Windows 控制台程序的 ANSI 转义序列。

  B）将此添加到您的Windows路径
  ----------------------------------
  到那里 ：
    > 点击开始菜单
    > 右键单击​​计算机
    > 属性
    > 高级系统设置
    > 环境变量
  在那里，在第二部分（系统变量）：
  你会看到变量：
  小路
    > 点击它的值，然后添加 ansicon.exe 程序的路径，例如：
C:\Program Files\ansicon\x64;

  C) 然后
  ----------------------------------
  您现在可以在命令前加上 ansicon 以使着色工作：例如：

    $ ansicon.exe mongodb

```

![您现在可以享受更好的用户界面，即使在 Windows 上也是如此；](../Images/6d9f24b258e0ae5826b41c39b0e7bb97.png)

```
----------------------------------
3）得到一个合适的外壳
----------------------------------
  开箱即用的 Windows shell (cmd.exe)，就是这样，
  我真的建议你得到一个合适的外壳。
  例如：控制台是一个非常好的程序。

  我希望这有帮助 ！

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T14:35:06.290

老实说，我找不到与 Windows 相关的限制，除了：

*   *nix 特定的命令在`Makefile`和`README`
*   [http://docs.mongodb.org/manual/release-notes/2.2/#windows-specific-changes](http://docs.mongodb.org/manual/release-notes/2.2/#windows-specific-changes)（其中指出，WinXP 不支持 2.2）
*   签到`_isWindows()`_`mongo_hacker.js`

我在 *nix 和 Windows 中使用 Mongo DB 已经很长时间了，我面临的唯一区别是`--fork`Win 版本中没有参数。

所以我会尝试做什么（在Win7 fe中）：

*   删除`_isWindows()`线
*   使用命令在一些测试数据库上启动 mongo 终端`--shell`，只是为了玩这个

`mongo localhost/test --shell mongo_hacker_custom.js`

然后，如果一切正常，您可以填充`~/.mongorc.js`内容`mongo_hacker_custom.js`，而无需创建符号链接（顺便说一句，从 Vista Windows 开始也已经支持它们，因此符号链接也是合适的）。

PS现在我不能尝试这个解决方案，我会在几个小时后自己检查建议的解决方案。

**UPD**：是的，它似乎在我的 Windows 7 + MongoDB 2.2.1 上运行良好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T12:56:46.463

该行的唯一原因是由于 ANSI 着色在 windows 终端/cmd 窗口中不起作用（`Esc`字符得到输出而不是解释）。

禁用着色（有几种方法，但清空“常量”或 NOPing 较低级别的调用，所有内容最终都会调用这两个工作）并删除检查窗口以便能够使用它。

您的另一种选择是`screen`在输出颜色至少在那里工作时运行它（但由于某种原因不是提示颜色）。

# github - Github Enterprise - Jenkins 插件

> ID：14993101
> 
> 赞同：4
> 
> 时间：2013-02-21T01:29:55.620
> 
> 标签：github, jenkins, github-enterprise

我正在尝试让 github 企业的提交后挂钩与我们的内部 jenkins 服务器对话。过去几个小时一直在尝试，但无法使其正常工作。

我能做的是获取带有 url 的 github 企业 webhook：

```
http://192.168.10.123:8080/job/Github%20Build%20Test/build 
```

努力开始构建。

我无法使用基本身份验证或 oauth2 身份验证令牌对 github 企业进行身份验证。![身份验证设置](../Images/099f6c96d4ae0ee7b602607764e88689.png)

此外，手动设置似乎也不起作用。有什么想法/帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:38:56.087

我想你可能需要等待 Jenkins [GitHub API 插件的 v1.41](https://wiki.jenkins-ci.org/display/JENKINS/GitHub+API+Plugin)

查看此[拉取请求](https://github.com/janinko/ghprb/pull/52)

# jquery - 如何通过 src 或使用 jQuery 的标题从页面中删除和图像

> ID：14993103
> 
> 赞同：0
> 
> 时间：2013-02-21T01:29:59.450
> 
> 标签：jquery

我有一些带有以下内容的html：

```
<img title="image1" src="../path/image1.jpg" />
<img title="image2" src="../path/image2.jpg" /> 
```

有没有办法只用 jQuery 删除 image1？在检查它是否存在之后（或者我是否关心它是否存在）？我猜我需要匹配标题或src。

我试过：

```
$('img').attr('title', 'image1').remove() 
```

但是 .remove() 在那里不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:31:20.487

使用 jQuery 的[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)。

```
$('img[title="image1"]').remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T01:31:22.810

你最好使用 CSS 选择器

```
$('img[title=image1]').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:34:53.907

在您的代码中，您正在设置所有 img 元素的 title 属性，然后立即删除它们。

给 img 元素一个 ID 并删除它，如下所示。

> ```
> <img id="image1" title="image1" src="../path/image1.jpg" /> 
> ```

然后执行以下脚本。

```
$('#image1').remove(); 
```

# extjs - ExtJS 组合框禁用的属性不起作用

> ID：14993104
> 
> 赞同：0
> 
> 时间：2013-02-21T01:30:04.207
> 
> 标签：extjs, combobox

我尝试使用 disabled 属性禁用组合框组件，但它不起作用。代码如下：

```
xtype: 'bkl.exchange.ExchangeRFCombo',
disabled: true,
fieldLabel: 'Exchange',
id: 'exchMapee',
valueField: 'omsMappingCode',
editable: false 
```

该模式是远程的，而不是本地的。所以组合框显示的值来自数据库。这个问题有解决方案吗？

非常感谢您的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:29:35.393

您可以将其添加到组合框中：

```
listeners: {
             'afterRender': function () {
                 this.disable();
             }
         } 
```

这将在渲染后禁用该框。

# css - 防止 DIV 在窗口调整大小 (CSS) 时移动

> ID：14993108
> 
> 赞同：0
> 
> 时间：2013-02-21T01:30:10.323
> 
> 标签：css, html, css-float

我的网站在这里遇到问题：（已解决）

问题是当我将窗口设置得太小时，内容开始四处移动。我想让它即使在调整窗口大小时也能留在一个地方。

我正在使用它们的wordpress，所以一定有一些东西干扰了我已经尝试过的东西，但我不确定。

我已经尝试对所有内容进行包装，并给它一个最小宽度，它仍然无法工作。我还尝试将这个包装器、主要内容和侧边栏的位置设置为固定，但效果也不是很好。

我有点难过它可能是什么。如果有人可以帮助我，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:38:22.510

它是导致问题的媒体查询。如果没有足够的空间并排放置，您的所有网站都试图放在一列中，但固定的侧边栏却弄乱了它。禁用媒体查询或应用侧边栏样式使其`display: block;`低于设置的宽度，应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:40:29.580

从样式表的 871 开始，有一些媒体查询会根据浏览器窗口的宽度改变页面的样式。您可以删除这些内容，也可以根据需要为平板电脑、手机等重新设置样式……</p>

# r - 在R中绘制矩阵方程

> ID：14993113
> 
> 赞同：3
> 
> 时间：2013-02-21T01:30:29.073
> 
> 标签：r, matrix, plot, parametric-equations

我是 R 新手，我需要绘制二次矩阵方程：

`x^T A x + b^T x + c = 0`

在 R^2 中，A 为 2x2，ba 为 2x1，ca 为常数。该方程适用于定义点类别的边界。我需要为 , 绘制`x0 = -6...6`边界`x1 = -4...6`。我的第一个想法是生成一堆点并查看它们在哪里为零，但这取决于数字之间的增量（很可能我不会猜测哪些点是零）。

有没有比只生成一堆点并查看它在哪里为零或将其相乘更好的方法？任何帮助将非常感激，

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T01:56:51.080

假设你有一个对称矩阵`A`，

例如

```
 # A = | a    b/2 |
 #     | b/2  c   | 
```

你的方程代表一个圆锥截面，你可以使用[`conics`包](http://cran.r-project.org/web/packages/conics/)

你需要的是一个`c(a,b,c,d,e,f)`代表系数的向量

```
a.x^2 + b*x*y + c*y^2 + d*x + e*y + f 
```

在你的情况下，说你有

```
 A <- matrix(c(2,1,1,2))

 B <- c(-20,-28)
 C <- 10

# create the vector
v <- append(c(diag(A),B,C),A[lower.tri(A)]*2), 1)

 conicPlot(v) 
```

![在此处输入图像描述](../Images/cb559b035ebd7ba4a913c506ca1a8518.png)

您可以轻松地将其包装`multiplication out`成一个简单的函数

```
# note this does no checking for symmetry or validity of arguments

expand.conic <- function(A, B, C){
 append(c(diag(A),B,C),A[lower.tri(A)]*2), 1)
} 
```

# database - Django 模型 order_by 速度

> ID：14993123
> 
> 赞同：0
> 
> 时间：2013-02-21T01:31:15.563
> 
> 标签：database, django, database-performance

我正在使用 django 服务器开发博客网站。在我的模型中，我有以下代码：

```
class PopularBlog(Blog):
  class Meta:
    ordering = ["-date_created", "-num_likes"]
    proxy = True 
```

基本上，`date_created`永远不会更改博客。但是，`num_likes`可能会经常更改。

每次`num_likes`更新任何博客时都会修改 PopularBlog 表吗？表现如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:50:33.340

这不是关于 Django 的问题，而是关于数据库的问题。StackOverflow 并不是真正深入了解数据库索引的地方，但您至少应该意识到这*正是*数据库擅长的事情。仅仅更新一个表的一行是没有意义的，即使你在`num_likes`列上定义了一个索引，它也会很快更新，除非你有数百万条记录。

# c - C 编程 K&R 练习 1-11

> ID：14993124
> 
> 赞同：3
> 
> 时间：2013-02-21T01:31:18.853
> 
> 标签：c

我目前正在通过字数统计程序来。我有一个棘手的练习。
我不明白这个练习到底要我做什么。

这里是练习本身
**修改单词计数程序以使用更好的“单词”定义，例如以字母开头的字母、数字和撇号序列**

我无法得到它真正想要的东西。它要我计算符号数字撇号或以太它要我为所有这些符号数字等命名，例如“单词”-将是`A(") word comma(,) A(")` 或有其他东西。

这是计算行数、字符数和换行数的程序

```
#include <stdio.h>

#define YES 1
#define NO 0

main ()
{
    // CTRL+Z will Signal to EOF-End of File 
    int c,nl,nw,nc,inword;  //nl -new line
                            //nw -new word
                            //nc -new chatacter
                            //inword -program in word or not

    inword=NO;
    nl=nw=nc=0;
    while ((c=getchar()) !=EOF)
    {
        ++nc;
        if (c == '\n')
            ++nl;
        if (c == ' ' || c == '\t' || c == '\n')
            inword=NO;
        else if (inword==NO)
        {
            inword=YES;
            ++nw;
        }
    }
    printf("%d %d %d\n", nl,nw,nc);

    getchar(); 
} 
```

你们能向我解释一下练习想要我做什么吗？我不需要已经完整的代码。我想自己完成编码。我只是没有得到我在练习中真正需要做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:49:10.337

您发布的程序将由空格分隔的所有内容视为一个单词。所以这些都是词：`12` `a,b123456` `2-3@!#`。

它要求您使用更好的单词定义来改进程序，并举例说明：“以字母开头的字母、数字和撇号序列”。

所以在这个例子中`John's`and`a123`是一个词，但是`12`, `1a`and `a-b`are not。

# jquery - 使用 jQuery $.Post 发送关联数组

> ID：14993126
> 
> 赞同：0
> 
> 时间：2013-02-21T01:31:21.087
> 
> 标签：jquery, jquery-post

对于所有专家来说，这很可能是一个简单的问题！

我有一个关联数组 EX：

```
var ProfInfo= new Array();
ProfInfo['action'] = 'SaveNewProfile'; 
ProfInfo['other'] = 'moreStuff';
ProfInfo['oth'] = 'More Stuff'; 
```

我需要用 jQuery 帖子发送这个数组。目前我已经尝试了以下方法：

```
$.post("ajax/ProfileMod.php", {
action:'SaveNewProfile',
data:ProfInfo}
, function(data, status) {
if(status == "success") {
// POST AJAX Script succesful
alert (data);

} else {
// POST AJAX Script error
alert ('AJAX POST error : Error saving New profile in ProfileMod.php');
}
});  // End AJAX POST Call 
```

我可以在 php $_POST 中获得“动作”，但不能在关联数组中获得。所以我尝试了以下方法：

```
ProfInfo['action'] = 'SaveNewProfile'; // Add the action type in he array to pass
$.post("ajax/ProfileMod.php", ProfInfo
, function(data, status) {
if(status == "success") {
// POST AJAX Script succesful
    alert (data);
} else {
// POST AJAX Script error
    alert ('AJAX POST error : Error saving New profile in ProfileMod.php');
}
});  // End AJAX POST Call 
```

在这种情况下，我什么也得不到。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:39:07.220

在 JavaScript 中，可以*滥用*[`new Array()`实例](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)并将其视为关联数组（也称为对象），但您*应该*[像这样](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Using_object_initializers)构造：**`ProfInfo`**

 **```
var ProfInfo = {}; 
```**

# jquery - Jquery - 动画在除 IE 之外的所有浏览器中都能正常工作

> ID：14993128
> 
> 赞同：0
> 
> 时间：2013-02-21T01:31:26.597
> 
> 标签：jquery, internet-explorer, jquery-plugins, cross-browser, doctype

我创建了一个使用大量 Jquery 动画和插件的网站。它在所有浏览器上都可以正常工作，除了只有一些 jquery 可以工作的 IE。

如果有人想看这个网站是：[http ://host.pixelframe.net.au/~pptestco/](http://host.pixelframe.net.au/~pptestco/)

当点击大菜单项（产品、制造等）时，会出现几个子菜单。这发生在某些页面上：[http](http://host.pixelframe.net.au/~pptestco/index.php?id=8) ://host.pixelframe.net.au/~pptestco/index.php?id= 8 但不在主页上。

要链接到 slidUp()/slidDown() 动画的错误接缝。

到目前为止，我只在 IE 9 上进行了测试。

在 IE 控制台中查看它说它在我从 Google 库（版本 1.8.2）链接到的 jquery.minl.js 文件中发现了错误

```
ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js 
```

它还说我的 DOCTYPE 有问题，尽管我已经尝试过过渡和严格。

以下是错误：

```
SCRIPT65535: Invalid calling object 
~pptestco, line 1 character 1

SCRIPT65535: Invalid calling object 
jquery.min.js, line 2 character 66373 
```

任何人都可以提出解决此问题的方法吗？

编辑：更新 - 我不知道发生了什么。每次加载 IE 时似乎都会出现不同的结果...

# python - 是否可以取消尚未捕获的异常？

> ID：14993129
> 
> 赞同：1
> 
> 时间：2013-02-21T01:31:26.793
> 
> 标签：python, exception-handling

我有一种情况，我想使用自定义 sys.excepthook。当程序抛出异常时， sys.except 钩子会被调用并做一些事情。

例子：

```
import sys
def ehook(exctype, value, traceback):
    t = 'Keys'
    if exctype == AttributeError and value.args[0].split("'")[1] == t:
        print "t %s" % (t,)
    else:
        sys.__excepthook__(exctype, value, traceback)

sys.excepthook = ehook

class Keys():
    @staticmethod
    def x():
        print "this is Keys.x()"

if __name__ == "__main__":
    Keys.x()
    Keys.noexist()
    print "I want to continue here and beyond..." 
```

有没有办法可以取消异常钩子中的活动异常，这样它就不会导致程序退出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:50:07.377

不。在`sys.excepthook`调用时，异常已经在顶层未被捕获，程序将在`sys.excepthook`完成工作后退出。（请参阅[文档](http://docs.python.org/2/library/sys.html#sys.excepthook)。）通常，Python 中的异常是不可恢复的：您已经在捕获它们的地方处理它们，您不能只从它们发生的地方继续。请参阅[此线程](http://code.activestate.com/lists/python-list/629766/)进行一些讨论。

编辑：根据您的评论，听起来您并没有试图捕获整个程序中的所有异常。您只想在某些对象上捕获未定义的属性查找。如果是这种情况，只需[`__getattr__`](http://docs.python.org/2/reference/datamodel.html#object.__getattr__)在您的类上定义 a 。

# python - python中的多个正则表达式匹配

> ID：14993135
> 
> 赞同：2
> 
> 时间：2013-02-21T01:32:22.967
> 
> 标签：python, regex

我是 python 中的正则表达式的新手，虽然简单的情况很容易，但我在使用从字符串中提取多个单词时遇到了麻烦。字符串如下所示：

lyne = "| 0x008d | 2345| 0xe54b5b42 | 0520 | 0x02 绿色| 4 红色 |"

并访问 | 之间的不同子字符串 | 使用 match.group

有没有办法做到这一点...有人可以帮忙吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:34:32.753

不需要正则表达式：

```
substrs = [x.strip() for x in lyne.split('|') if x] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T01:34:48.583

任何你不能只使用`lyne.split('|')`which'll do it的理由，否则使用`re.split()`相同的东西......

如果你真的想要一个正则表达式（匹配/查找而不是拆分），那么（去掉空格）：

```
>>> re.findall(r'\|?\s*(.*?)\s*\|', lyne)
['0x008d', '2345', '0xe54b5b42', '0520', '0x02 GREEN', '4 RED'] 
```

# c# - 使用 ShellExecuteEx 在资源管理器进程下打开文件属性表，而不是调用进程

> ID：14993136
> 
> 赞同：3
> 
> 时间：2013-02-21T01:32:23.893
> 
> 标签：c#, windows-shell, shellexecute

我的问题是 PropertySheetExtension，但默认文件属性表似乎存在相同的行为。以下代码的问题：

```
// Snippet from http://stackoverflow.com/a/1936957/124721
using System.Runtime.InteropServices;

[DllImport("shell32.dll", CharSet = CharSet.Auto)]
static extern bool ShellExecuteEx(ref SHELLEXECUTEINFO lpExecInfo);

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
public struct SHELLEXECUTEINFO
{
    public int cbSize;
    public uint fMask;
    public IntPtr hwnd;
    [MarshalAs(UnmanagedType.LPTStr)]
    public string lpVerb;
    [MarshalAs(UnmanagedType.LPTStr)]
    public string lpFile;
    [MarshalAs(UnmanagedType.LPTStr)]
    public string lpParameters;
    [MarshalAs(UnmanagedType.LPTStr)]
    public string lpDirectory;
    public int nShow;
    public IntPtr hInstApp;
    public IntPtr lpIDList;
    [MarshalAs(UnmanagedType.LPTStr)]
    public string lpClass;
    public IntPtr hkeyClass;
    public uint dwHotKey;
    public IntPtr hIcon;
    public IntPtr hProcess;
}

private const int SW_SHOW = 5;
private const uint SEE_MASK_INVOKEIDLIST = 12;
public static bool ShowFileProperties(string Filename)
{
    SHELLEXECUTEINFO info = new SHELLEXECUTEINFO();
    info.cbSize = System.Runtime.InteropServices.Marshal.SizeOf(info);
    info.lpVerb = "properties";
    info.lpFile = Filename;
    info.nShow = SW_SHOW;
    info.fMask = SEE_MASK_INVOKEIDLIST;
    return ShellExecuteEx(ref info);        
} 
```

是它在调用应用程序进程下打开文件属性表，而不是 explorer.exe。因此，当应用程序关闭时，属性表会关闭，这不是我需要的行为。当应用程序退出时，我需要工作表保持打开状态。另一个问题是，如果应用程序打开属性表，然后通过资源管理器右键单击文件并单击属性，它将打开第二个重复表。

我尝试使用 ShellExecuteEx 并使用资源管理器的主窗口或 GetShellWindow 设置父窗口句柄，但这没有帮助。

有没有另一种方法可以让这个属性表在 explorer.exe 进程下打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-02T05:48:40.723

您的进程实际上应该一直存在，直到所有 shell 线程结束。

为此，您必须实现一个支持 IUnknown 的免费线程接口，并通过调用[`SHSetInstanceExplorer`](https://msdn.microsoft.com/en-us/library/windows/desktop/bb762248(v=vs.85).aspx).

可以在[此博客文章](https://blogs.msdn.microsoft.com/oldnewthing/20080528-00/?p=22163/)中找到更多信息和 C++ 示例实现。

# php - 谷歌日历事件更改 MySQL 数据库

> ID：14993137
> 
> 赞同：0
> 
> 时间：2013-02-21T01:32:24.317
> 
> 标签：php, mysql, yii

我会直截了当地问我到底想做什么，如果有人可以帮助我，那么很高兴知道我想做的事情是否可行。我在后面使用带有 MySQL 数据库的 Yii 框架。我想在 Google 日历中集成多个不同用户的日历。另外，我想知道是否有可能使用 Google Calendar API、使用 Yii 或 Zend 中的 gData 库（如果我什至可以这样做，因为我已经在使用 Yii 框架）对日历对 MySQL 数据库执行更改。

例如，如果用户将他的约会日历从两小时更改为一小时，则该更改需要反映在存储约会长度的数据库中。

我基本上希望能够在每次添加、删除或编辑约会/事件时对数据库进行更改。

谢谢大家的帮助，我真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:19:02.780

我以前使用过扩展[EgCal](http://www.yiiframework.com/extension/egcal/)来解决这个问题。

# asp.net - asp.net 企业库，所有正在使用的连接（关闭）

> ID：14993138
> 
> 赞同：1
> 
> 时间：2013-02-21T01:32:45.530
> 
> 标签：asp.net

我使用 asp.net 企业库将数据插入和更新到 sql 数据库。

c#代码：

```
Database db = DatabaseFactory.CreateDatabase();
IDbConnection connection = db.GetConnection();
connection.Open();
IDbTransaction transaction = connection.BeginTransaction();
DBCommandWrapper command;

try
{
//insert part
command = db.GetStoredProcCommandWrapper("stored_procedure1");
command.CommandTimeout = 900;
command.AddInParameter("@parameter1", DbType.Int32, 3);
db.ExecuteNonQuery(command, transaction);

//update part
command = db.GetStoredProcCommandWrapper("stored_procedure2");
command.CommandTimeout = 900;
command.AddInParameter("@param1", DbType.Int32, 5);
db.ExecuteNonQuery(command, transaction);

transaction.Commit();
}
catch (SqlException e)
{
  transaction.Rollback();
  throw (new ApplicationException("sql error", e));
}
catch (Exception e)
{
  transaction.Rollback();
  throw (new ApplicationException("error", e));
}
finally
{
connection.Close();
} 
```

代码在一个方法上。该方法执行了很多次，有时我得到错误：“超时已过期。在从池中获取连接之前已经过了超时时间。这可能是因为所有池连接都在使用中并且达到了最大池大小。”

我的问题是：可以像上面那样将插入和更新部分放在一起吗？

将插入和更新部分放在一起会导致此错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:41:03.823

首先，您不会在错误时回滚您的事务。

其次，为了保证调用 finally 块，您需要添加 catch 块。

```
Try {
...
}
Catch {
}
finally {
close connection
} 
```

阅读下面链接的第二段

[http://msdn.microsoft.com/en-us/library/zwc8s4fz(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zwc8s4fz%28v=vs.100%29.aspx)

# mysql - 如何使 MySQL 约束禁止单行的某些列值？

> ID：14993144
> 
> 赞同：1
> 
> 时间：2013-02-21T01:33:07.620
> 
> 标签：mysql, relational-database

我有一张桌子。

```
word      singular_only      plural_only
homework       1                  0       #homework has no plural
dog            0                  0       #dog and dogs are both real words
scissors       0                  1       #scissor is not a valid singular noun 
 x             1                  1       #should not be insertable 
```

我想允许前三行，但不允许第四行。如何为此添加约束。single_only 和plural_only 中的值是布尔值。这些列表示一个词是只有复数形式还是单数形式或两者都有（如果两个布尔值都是假的）。显然，如果某物只能是单数，它就不能是复数。在 MySQL 中对此进行建模的最佳方法是什么。

是在 MySQL 中添加这个约束还是确保上层代码永远不会尝试插入这些值更好。

换句话说

```
singular_only NAND plural_only should also be true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:46:41.363

您不能基于另一列对一列添加约束，除非约束匹配值，您不想这样做。您应该使用单列来设置“单数/复数”状态。有几种解决方案，包括使用整数（0、1、2 表示三种可能的状态）、枚举，甚至是另一个表。我将把选择权留给你，但我更喜欢另一张桌子的灵活性和清晰性。

# c# - 如何从 TFS 检索链接的“版本化项目”

> ID：14993147
> 
> 赞同：2
> 
> 时间：2013-02-21T01:33:35.700
> 
> 标签：c#, api, tfs, hyperlink

我有工作代码（感谢 John Socha-Leialoha），它使用 TFS API 来检索工作项，以及它们所有链接的工作项（下面的代码）。但是，我要做的是访问每个工作项的链接文件的名称（TFS 将其称为“版本化项”）。在 TFS GUI 中，您可以将文件链接到工作项。假设工作项 1234 链接到文件 foo.txt。现在，当我运行此查询以查找链接项目时，该文件不在列表中 - 仅返回其他子 WI 或父 WI。如果我完全在 GUI 中创建和运行查询，结果是一样的。如何找出哪些文件链接到给定的 WI？我现在唯一能做的就是在 TFS GUI 中查看 WI，它会显示在右下角的文件列表中。

也许我只需要做一个普通的平面查询，获取 WI 字段，并且以某种方式链接文件的名称将是该 WI 的字段之一？我不需要下载链接文件，我只需要文件名/位置。

返回所有链接的 WI 的代码在这里：

```
public List<string> GetLinkedItems()
{
    //executes a linked item query, returning work items, as well as the items that are link to them.
    //gets digital asset work item that contains the given part number in the Assoc. Parts field
    var result = new List<string>();
    var tpc = new TfsTeamProjectCollection(new Uri(_tfsUri));
    var workItemStore = (WorkItemStore) tpc.GetService(typeof (WorkItemStore));
    //and [Schilling.TFS.TechPub.AssocParts] CONTAINS '101-4108' 
    var query =
        "SELECT [System.Id], [System.Links.LinkType], [System.TeamProject]," +
        " [System.WorkItemType], [System.Title], [System.AssignedTo]," +
        " [System.State] FROM WorkItemLinks " +
        " WHERE ([Source].[System.TeamProject] = 'Tech Pubs'  AND " +
        " [Source].[System.WorkItemType] = 'DigitalAsset'  AND " +
        " [Source].[System.State] <> '') And " +
        " ([System.Links.LinkType] <> '') And " +
        " ([Target].[System.WorkItemType] <> '') " +
        " ORDER BY [System.Id] mode(MayContain)";
    var treeQuery = new Query(workItemStore, query);
    //Note we need to call RunLinkQuery here, not RunQuery, because we are doing a link item type of query
    var links = treeQuery.RunLinkQuery();

    //// Build the list of work items for which we want to retrieve more information//
    int[] ids = (from WorkItemLinkInfo info in links
                 select info.TargetId).Distinct().ToArray();

    //
    // Next we want to create a new query that will retrieve all the column values from the original query, for
    // each of the work item IDs returned by the original query.
    //
    var detailsWiql = new StringBuilder();
    detailsWiql.AppendLine("SELECT");
    bool first = true;

    foreach (FieldDefinition field in treeQuery.DisplayFieldList)
    {
        detailsWiql.Append("    ");
        if (!first)
            detailsWiql.Append(",");
        detailsWiql.AppendLine("[" + field.ReferenceName + "]");
        first = false;
    }
    detailsWiql.AppendLine("FROM WorkItems");
    //
    // Get the work item details
    //
    var flatQuery = new Query(workItemStore, detailsWiql.ToString(), ids);
    WorkItemCollection details = flatQuery.RunQuery();

    return
        (from WorkItem wi in details
         select wi.Id + ", " + wi.Project.Name + ", " + wi.Title + ", " + wi.State).ToList();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:30:23.367

工作项查询只能显示`WorkItemLinkType`链接。要获取其他类型的链接（即源代码管理中的文件），您需要浏览`WorkItem`对象本身的链接列表。这是一段代码，它将为您提供链接到工作项的文件的工件：

```
TfsTeamProjectCollection tpc = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(
    new Uri("http://<server>:8080/tfs/<collection>"));

WorkItemStore wiStore = tpc.GetService<WorkItemStore>();

VersionControlServer vc = tpc.GetService<VersionControlServer>();

WorkItem task = wiStore.GetWorkItem(<work item with a linked file>);

var externalLinks = task.Links.OfType<ExternalLink>();

foreach (var link in externalLinks)
{
    XmlDocument artifact = vc.ArtifactProvider.GetArtifactDocument(new Uri(link.LinkedArtifactUri));
} 
```

XML 文档包含`VersionControlServer`使用该`GetItem()`方法获取正确文件版本所需的所有必要信息。

# java - 在 Java 中使用布局

> ID：14993149
> 
> 赞同：1
> 
> 时间：2013-02-21T01:33:53.953
> 
> 标签：java, swing, layout, awt, layout-manager

我有一个`JFrame`with layout `BorderLayout`，我添加`JPanel`s 使用`BorderLayout.CENTER` 我有一个`JPanel`（使用 CENTER 添加），用于`GridLayout`放置 4 个按钮。

这些按钮非常大，占据了整个屏幕。或者，我按照以下方式进行操作：

*   我有一个布局为空的 JFrame，我设置了 JPanel 边界并添加了它们。
*   我有一个 JPanel：它设置了自己的边界，因此它占据了屏幕中心的 1/2，并且只有屏幕的 1/8 高。
*   它使用网格布局添加按钮，并产生一排漂亮的按钮。

显然第二个选项看起来更好，但我希望符合规范，并始终使用布局......我如何混合自定义和布局？（或者只是解决我的问题）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:39:41.717

当您向 中添加一个组件时`BorderLayout.CENTER`，它将扩展以填充容器的其他部分未使用的剩余空间`BorderLayout`。此外，您一次只能将一个组件添加到`BorderLayout.CENTER`. 后续添加将替换之前的组件。

至于解决您的确切问题，我建议您首先查看[A Visual Guide to Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。这将使您了解 Swing API 中可用的布局。Oracle 还为每个布局提供了更深入的教程。通过嵌套布局，您可以在利用其强大功能的同时为您的 UI 提供您希望的任何外观，尤其是在调整窗口大小或以其他方式更改时的自动计算。

# ruby-on-rails-2 - 如何创建将更新列的链接

> ID：14993151
> 
> 赞同：0
> 
> 时间：2013-02-21T01:34:25.593
> 
> 标签：ruby-on-rails-2

我正在使用 Rails 2.3.8。

如何创建将更新列的链接？

所以，我在努力`<%= link_to 'stuff', :controller => controller, :action => action, :id => id %>`

该`action`方法只会更新与 关联的行的列`:id`，因此我不希望它重定向到控制器/操作页面。我只想更新列并调用`save`对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:43:41.357

永远不要使用 GET 来更新任何东西，始终使用 POST。含义：链接是不好的做法和安全风险。

# php - 如何将数组值存储到php中的会话变量中

> ID：14993152
> 
> 赞同：0
> 
> 时间：2013-02-21T01:34:28.693
> 
> 标签：php

我想将数组的值存储到会话变量中，并希望在另一个页面中使用该会话变量来打印所有主题名称，但是在打印时我得到了空白页。

```
<?php
session_start();
$colname=array();
$i=0;
while($i<10)
{
$colname[$i]=$i;
$i++;
}
echo"$colname[0]";
echo"$colname[1]";
echo"$colname[2]";
echo"$colname[3]";
echo"$colname[4]";
echo"$colname[5]";
echo"$colname[6]";
echo"$colname[7]";
echo"$colname[8]";
echo"$colname[9]";
$_SESSION['sub1']=$colname[0];
$_SESSION['sub2']=$colname[1];
$_SESSION['sub3']=$colname[2];
$_SESSION['sub4']=$colname[3];
$_SESSION['sub5']=$colname[4];
$_SESSION['sub6']=$colname[5];
$_SESSION['sub7']=$colname[6];
$_SESSION['sub8']=$colname[7];
$_SESSION['sub9']=$colname[8];
$_SESSION['sub10']=$colname[9];
?> 
```

在将上述会话变量用于另一个页面时，没有显示任何内容

# css - CSS高度百分比不缩放图像

> ID：14993156
> 
> 赞同：9
> 
> 时间：2013-02-21T01:34:47.637
> 
> 标签：css

我正在尝试创建网站的顶部以在左侧保存徽标，在右侧保存导航栏。图像很大，因为有人告诉我它可能用于高清电视并希望它能够很好地缩放。我想如果我将徽标和导航栏放在同一个 div 中，我可以只对高度应用一个百分比，因此它始终是屏幕的前 10%，但它不会随我的代码缩放，它只是保持相同的图像大小。任何帮助将非常感激。

```
<body>
<div id="container">
    <div id="top">
    <img src="images/logo.png" alt="logo">
    <ul>
    <li><a href="#" title="1">1</a></li>
    <li><a href="#" title="2">2</a></li>
    <li><a href="#" title="3">3</a></li>
    <li><a href="#" title="4">4</a></li>
    <li><a href="#" title="5">5</a></li>
    </ul>
    </div>
</div> 
```

这是我使用的 CSS

```
#top {
height: 10%;
width: 100%
} 
```

我真的很感激任何人的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:36:17.290

如果您尝试缩放图像本身，则需要在 CSS 中定位图像。

我还建议为您的缩放设置一个最小（也可能是最大）限制。有一点，变小只会看起来很糟糕并且变得无法使用。

```
html, body, #container {
    height: 100%;
    width: 100%;
}

#top {
    height: 10%;
    width: 100%;
    min-height: 23px;
}

#top img {
    height: 100%;
    width: auto;
    min-height: 23px;
    min-width: 136px;
} 
```

[jsfiddle](http://jsfiddle.net/JvgtX/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:40:40.013

您需要为图像提供 10% 的高度，以便它知道随 div 缩放。如果你这样做，我相信它会起作用。

```
#top img {
    height: 10%;
} 
```

编辑：[jsFiddle](http://jsfiddle.net/FZB7C/)

# php - 如何避免 PHPExcel 在模板中重新渲染图形？

> ID：14993163
> 
> 赞同：0
> 
> 时间：2013-02-21T01:35:40.543
> 
> 标签：php, phpexcel

我正在将信息从 MySQL 导出到 Excel2007 文件。该脚本主要读取模板 Excel2007 文件，添加一些数据并将其写入新的 Excel2007 文件中。

模板中有一些图表。问题是它们被重新渲染并且它们略有不同。（轴标题方向改变，grpah 标题方向改变，比例改变......）

有什么方法可以在没有 PHPExcel 的情况下添加数据来解释和编译文件的其余部分？

谢谢！

加布里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:45:53.783

'不要害怕 - PHPExcel 不是文件编辑器。Reader 将文件解析为 PHPExcel 识别的元素，丢弃它无法识别的任何内容。Writer 从 PHPExcel 对象中获取其元素，不知道在最初加载它时可能已经丢弃了元素。

所以它要么完全丢弃图表（除非你将 includeCharts 设置为 TRUE）；或者它会使用一些尚未处理的元素或属性的默认值重新创建图表；在更极端的情况下，一些特征会丢失（辅助轴是一个典型的例子）；而在最极端的情况下，它可能会完全破坏图表（但希望这应该非常罕见）。

*   尚未处理文本方向。
*   比例纯粹设置为默认值（自动缩放）

随着时间的推移，更多的功能将被添加到图表中（处理股票图表是我的下一个目标），但在那之前它仍然是有限的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:26:06.897

我想我在图书馆找到了答案：TinyButStrong - [http://www.tinybutstrong.com/plugins/opentbs/demo/demo.html](http://www.tinybutstrong.com/plugins/opentbs/demo/demo.html)

非常适合模板！让他们与 PHPExcel 联手会很糟糕。

感谢大家花费的时间。

# cocoa - EXEC_BAD_ACCESS（代码=1，地址=0x10）

> ID：14993169
> 
> 赞同：0
> 
> 时间：2013-02-21T01:36:26.167
> 
> 标签：cocoa, debugging

在我的 OS X 应用程序中，我正在尝试保存和检索单选按钮的标签。错误发生在 setPreferenceRotor 中标记为“<-HERE”的行上。有一个有效的标签进来。

```
//  PreferenceController.h
extern NSString * const myCellKey;
extern NSString * const myMatrixChangedNotification;

@interface PreferenceController:NSWindowController
{
  IBOutlet NSMatrix *matrixRotor;
}
- (IBAction)setRotorTag:(id)sender;
+ (NSInteger)preferenceRotorTag;
+ (void)setPreferenceRotor:(NSInteger)matrixTag;
@end

//  PreferenceController.m
NSString * const myMatrixChangedNotification = @"myRotorChanged";
@implementation PreferenceController
- (void)windowDidLoad
  {
    [super windowDidLoad];
    [matrixRotor selectCellWithTag:[PreferenceController preferenceRotorTag]];
  }
+ (NSInteger)preferenceRotorTag
  {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSData *tagAsData = [defaults objectForKey:myCellKey];
    return [NSKeyedUnarchiver unarchiveObjectWithData:tagAsData];
  }
+ (void)setPreferenceRotor:(NSInteger)matrixTag
  {
    //NSInteger mt = matrixTag;
    NSData *tagAsData = [NSKeyedArchiver archivedDataWithRootObject:matrixTag]; **//<-HERE**
   [[NSUserDefaults standardUserDefaults]setObject:tagAsData forKey:myCellKey];
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:11:40.577

`NSInteger`您正在将一个类型为 variable的原始（非对象）值传递`matrixTag`给一个方法，`archivedDataWithRootObject:`该方法需要一个对象引用值。该方法愉快地尝试使用该值（可能是整数 16, `0x10`）作为对象引用，并且 kaboom...

您的想法看起来是正确的，您知道您不能在用户默认值中存储非对象值，因此您必须首先将它们包装为对象。这只是你这样做的方式是错误的。您在这里需要的是`NSNumber`从您的整数创建一个实例。你可以写：

```
NSNumber *tagAsNumber = [NSNumber numberWithInteger:matrixTag];
[[NSUserDefaults standardUserDefaults] setObject:tagAsNumber forKey:myCellKey]; 
```

然而，这种模式很常见，因此提供了一个快捷方式：

```
[[NSUserDefaults standardUserDefaults] setInteger:matrixTag forKey:myCellKey]; 
```

这将为您创建`NSNumber`对象。还有一个相应的`integerForKey:`方法可以在阅读时为您解开整数。

# amazon-web-services - 使用 boto.ec2.autoscale.launchconfig.LaunchConfiguration() 时如何定义 block_device_mappings，

> ID：14993171
> 
> 赞同：2
> 
> 时间：2013-02-21T01:36:30.927
> 
> 标签：amazon-web-services, boto, autoscaling

我正在尝试使用 boto 创建自动缩放的启动配置，但我不知道如何定义 block_device_mappings。

代码快照如下：

```
dev_sdf = boto.ec2.blockdevicemapping.EBSBlockDeviceType(snapshot_id = self.sna_data.id)
bdm = boto.ec2.blockdevicemapping.BlockDeviceMapping()
bdm['/dev/sdf'] = dev_sdf

lc = launchconfig.LaunchConfiguration(connection = self.as_conn,
                                      name = lc_name,
                                      image_id = self.ami.id,
                                      instance_type = self.instance_type,
                                      key_name = AWS_KEY_NAME,
                                      security_groups = self.security_groups,
                                      spot_price = self.price,
                                      block_device_mappings = [bdm])
self.as_conn.create_launch_configuration(lc) 
```

但我得到了：

```
boto.exception.BotoServerError: BotoServerError: 400 Bad Request
<ErrorResponse xmlns="http://autoscaling.amazonaws.com/doc/2011-01-01/">
  <Error>
    <Type>Sender</Type>
    <Code>ValidationError</Code>
    <Message>1 validation error detected: Value null at 'blockDeviceMappings.1.member.deviceName' failed to satisfy constraint: Member must not be null</Message>
  </Error>
  <RequestId>7289473c-7bc1-11e2-a07c-93de372a2cc0</RequestId>
</ErrorResponse> 
```

我应该如何定义 block_device_mappings？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:48:46.687

我不认为加载映射的代码可以工作。

我已经针对应该正确拉动设备映射的 boto 代码创建了拉取请求：

[https://github.com/pasc/boto/tree/bdm_for_autoscaling_groups](https://github.com/pasc/boto/tree/bdm_for_autoscaling_groups)

# spring - Spring+ Hibernate：如何在多个模块中映射单个会话工厂（部署为 jar）

> ID：14993176
> 
> 赞同：0
> 
> 时间：2013-02-21T01:37:16.027
> 
> 标签：spring, hibernate, struts2

我目前正在研究 Spring + Struts2 和 Hibernate，我的要求是：

1.  我有主模块，它将建立数据库连接，由系统中的所有其他模块（部署为 Jar）共享。
2.  所有模块特定的 .hbm 和持久性类都将存在于模块本身因此例如我的主模块将具有 Hibernate 连接文件（通过 spring）将所有 .hbm 映射文件，下面是通过 Spring 建立的 Hibernate 连接的示例。

    ```
    <bean id="dataSourceErik" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
      <property name="driverClassName" value="com.mysql.jdbc.Driver" />
      <property name="testWhileIdle" value="true" />
      <property name="minEvictableIdleTimeMillis" value="120000" />
      <property name="timeBetweenEvictionRunsMillis" value="30000" />
    </bean>
    <bean id="sessionFactoryErik"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
      <property name="dataSource" ref="dataSourceErik" />
      <property name="hibernateProperties">
        <value>
            hibernate.dialect=org.hibernate.dialect.MySQLDialect
            hibernate.generate_statistics=true
            hibernate.show_sql=false
            hibernate.jdbc.batch_size=10
            hibernate.bytecode.use_reflection_optimizer=true
        hibernate.cache.provider_class=org.hibernate.cache.EhCacheProvider                hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory
            hibernate.cache.use_second_level_cache=true
            hibernate.cache.use_query_cache=true
            net.sf.ehcache.configurationResourceName=configuration/ehcache.xml
        </value>
      </property>

      <property name="mappingLocations">
        <list>
            <value>classpath:configuration/hibernate/Abc.hbm.xml</value>
            <value>classpath:configuration/hibernate/Xyz.hbm.xml</value>
       </list>
      </property>        
    </bean>
    <bean id="AbcActionDAO" class="au.com.master.persistance.dao.AbcDbSession">
        <constructor-arg ref="sessionFactoryErik" />
    </bean>
    <bean id="XyzActionTypeDAO"class="au.com.master.persistance.dao.XyzDbSession">
        <constructor-arg ref="sessionFactoryErik" />
    </bean> 
    ```

如果我在上面的 xml 中添加以下代码，我可以访问 '''sessionFactory''' 并可以与数据库连接。当我给出部署的 subModule jar 文件的路径时，请参见下面的代码：

```
<property name="mappingJarLocations">
<list>
   <value>WEB-INF/lib/subModule.jar</value>
</list>
</property> 
```

以上所有 .hbm 和 DAO/DbSession 类都存在于 Master 模块中。现在我想在部署为 jar 的子模块中使用这个 '''sessionFactoryErik'''。所以为此我在子模块中创建了另一个 xml 文件，它将参考上面的 '''sessionFactoryErik''' 并将具有此模块特定的.hbm 和 DAO/DbSession 的映射。参考以下代码：

```
 <bean id="sessionFactoryMonitor" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
     <property name="sessionFactoryErik" ref="sessionFactoryErik" />
     <property name="mappingLocations">
        <list>
            <value>classpath:configuration/hibernate/DDDType.hbm.xml</value>
        </list>
      </property>        
 </bean>

 <bean id="testActionDAO" class="au.com.java.subModule.persistance.dao.DddActionDbSession">
    <constructor-arg ref="sessionFactoryMonitor" />
</bean> 
```

如果我部署了项目并重新启动服务器，我会遇到以下错误。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactoryMonitor' defined in URL [jar:file:/home/developer/Project/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/webapps/erik/WEB-INF/lib/erik-monitor-1.0-SNAPSHOT.jar!/configuration/spring-monitor-dao.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'sessionFactoryErik' of bean class [org.springframework.orm.hibernate4.LocalSessionFactoryBean]: Bean property 'sessionFactoryErik' is not writable or has an invalid setter method. 
```

任何人都可以帮助我。我如何在子模块中获得相同的会话对象，因为只有主模块可以建立连接，因为它不知道其部署（部署为 jar）模块。

谢谢。塔班

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:50:44.490

该类`org.springframework.orm.hibernate4.LocalSessionFactoryBean`没有名为 sessionFactoryErik 的属性。我猜您正在将数据源注入 LocalSessionFactoryBean。如果是这样改变这个

```
<bean id="sessionFactoryMonitor" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
     <property name="sessionFactoryErik" ref="sessionFactoryErik" />
     <property name="mappingLocations">
        <list>
            <value>classpath:configuration/hibernate/DDDType.hbm.xml</value>
        </list>
      </property>        
 </bean> 
```

对此

```
 <bean id="sessionFactoryMonitor" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
     <property name="dataSource" ref="sessionFactoryErik" />
     <property name="mappingLocations">
        <list>
            <value>classpath:configuration/hibernate/DDDType.hbm.xml</value>
        </list>
      </property>        
 </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T17:30:31.863

sessionFactoryErik bean 返回**org.hibernate.internal.SessionFactoryImpl**对象，

所以你应该指定 **org.hibernate.internal.SessionFactoryImpl**或其超类

( **SessionFactory** ) 输入 au.com.master.persistance.dao.XyzDbSession 构造函数

参考。

# vb.net - 将日期转换为字符串，然后添加到

> ID：14993179
> 
> 赞同：-1
> 
> 时间：2013-02-21T01:37:53.530
> 
> 标签：vb.net, winforms, date, datagridview

和不能得到*x*`cmbTS`和y*作为*文本`cmbTA`

 **`datagridview1.item(4,i)`and`datagridview1.item(5,i)`是日期类型。我想将其转换为字符串，以便可以将其`combobox`作为文本放在我的位置上。我`combobox`的是`cmbTS`和`cmbTA`。

```
Private Sub DataGridView1_CellClick(sender As Object, e As DataGridViewCellEventArgs) Handles DataGridView1.CellClick
        btnEdit.Visible = True
        Dim i As Integer
        i = DataGridView1.CurrentRow.Index
        Dim x As String = CStr(DataGridView1.Item(4, i).Value.ToString)
        Dim y As String = CStr(DataGridView1.Item(5, i).Value.ToString)

        MsgBox(x)
        MsgBox(y)

        txtTrainID.Text = DataGridView1.Item(0, i).Value
        txtRouteID.Text = DataGridView1.Item(1, i).Value
        txtLine.Text = DataGridView1.Item(2, i).Value
        cmbLine1.Text = DataGridView1.Item(3, i).Value
        cmbLine2.Text = DataGridView1.Item(3, i).Value
        cmbLine3.Text = DataGridView1.Item(3, i).Value
        cmbTS.Text = x
        cmbTA.Text = y
        txtTrainName.Text = DataGridView1.Item(6, i).Value
        cmbFlag.Text = DataGridView1.Item(7, i).Value

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:01:39.340

要添加到组合框，您需要使用 cmbBox.Items.Add，所以它是

```
cmbTS.items.Add(x)
cmbTA.items.Add(y) 
```

如果组合框中只有一项并且希望它显示，则需要设置 selectedindex 属性，例如：

```
cmbTS.SelectedIndex = 0
cmbTA.SelectedIndex = 0 
```

此外，在声明 X 和 Y 时，您正在将字符串转换为字符串，因此您实际上并不需要 CStr ，因为最后有 .tostring 。

编辑 - 因为只有一个日期，DateTimePicker 不是比 ComboBox 更好的选择吗？**

# css - 为什么边距折叠效果背景图片？

> ID：14993184
> 
> 赞同：0
> 
> 时间：2013-02-21T01:38:24.107
> 
> 标签：css, background, margin

我有如下简单的 HTML 和 CSS。我注意到 .outside box 和 .inside box 之间的底部边距折叠。**我不明白为什么当底部边距折叠时我看不到背景图像，**背景图像应该与边距无关。谢谢 ：）

```
<div class="outside"> 
<div class="inside"> content </div>
</div>

.outside {background:url(http://blurfun.com/temp/images/bottom.png) left bottom no-repeat;    padding-top:1px;}

.inside { background:#00CCFF; margin:0 0 10px 0; padding:0 0 20px 0;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:22:44.613

您正在尝试嵌套 div 之间的垂直边距折叠包括此溢出属性（任何不等于可见的值都可以完成这项工作），它会正常工作

```
 .outside {
       background:#ff0000 url(http://blurfun.com/temp/images/bottom.png) left bottom        no-repeat;    
padding-top:1px;
        overflow:hidden;
    } 
```

添加红色只是为了测试结果。当然可以擦。

**详细评论**

您的外部 div 在其左下角使用一种黄色条带。

您的内部 div 的底部边距为 10 px，因为在此边距和外部 div 底部边距之间没有任何内容。这就是他们崩溃的原因。

您可以防止这种情况发生，包括底部填充甚至是外部 div 的底部边框。但这会改变你的设计意图。

这就是为什么我建议使用溢出属性，它也可以防止垂直边距折叠并且不会干扰您的设计。

在这个[小提琴](http://jsfiddle.net/Fico/sYjSQ/)中，我在内部 div 中添加了左边距，在外部 div 中添加了红色背景。

对于教学 porpouse，我还在内部 div 中加入了透明背景。

**垂直边距折叠**

![垂直边距折叠](../Images/b02f400d3642fc4abed86a7d45d77d41.png)

**防止溢出：隐藏**

![防止溢出：隐藏](../Images/ba91f541c3f7eb6cdbc162e93d889e9a.png)

玩它。删除溢出属性并观察垂直边距折叠。我希望对你来说足够清楚。

祝你有美好的一天，享受你的编码:-)

# javascript - 为什么在使用 QUnit 编写测试时我会使用 expect()？

> ID：14993186
> 
> 赞同：10
> 
> 时间：2013-02-21T01:38:33.853
> 
> 标签：javascript, qunit

我最近开始使用 QUnit 对我的 JavaScript 进行单元测试，但我对文档中的一个功能感到有些困惑：`expect()`.

根据文档，`expect()`旨在：

> [s] 指定在测试中预计运行多少个断言。

这是他们给出的例子：

```
test( "a test", function() {
  expect( 2 );

  function calc( x, operation ) {
    return operation( x );
  }

  var result = calc( 2, function( x ) {
    ok( true, "calc() calls operation function" );
    return x * x;
  });

  equal( result, 4, "2 square equals 4" );
}); 
```

我在这里唯一看到的是维护噩梦。每次向测试添加断言时，都必须更新该数字，否则测试将失败。这种功能有实际应用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T01:52:04.520

> 我在这里看到的唯一一件事就是维护噩梦......这种功能有实际应用吗？

好吧，我认为`expect`应该使用的方式是分组有意义的任务。它对于测试事件或回调很有用，例如：

```
test('trigger an event', function() {
  expect(1);

  $('div')
    .on('click', function() { ok(1) });
    .trigger('click');
}); 
```

如果您将有意义的任务分组在小型测试中，这不会成为一场噩梦，其中只需要 2 或 3 个断言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-11T14:34:20.370

它可以用作一种保障措施，以确保您没有以某种方式编写无法运行的测试。如果你养成了编写预期数量的测试的习惯，如果你曾经以某种方式编写了一个测试套件，其中一个测试由于某种原因对 QUnit 隐藏，QUnit 会在你之前选择它。

# objective-c - UIPageViewController 中带有 TextViews 的 ViewControllers

> ID：14993188
> 
> 赞同：11
> 
> 时间：2013-02-21T01:38:47.430
> 
> 标签：objective-c, uiviewcontroller, ios6, uitextview, uipageviewcontroller

我试图学习`UIPageViewController`s 并遇到了一个我无法解决的问题。这就是我试图做的：

*   脚步：
    1.  我只是在 StoryBoard 中创建了 2 个视图控制器和一个页面视图控制器。
    2.  然后我向 File's Owner 添加了一些代码，`PageViewController`使其表现得像 a`dataSource`和`delegate`自身。
    3.  当我跑步时，一切都很顺利。
    4.  我在第二个视图控制器中添加了一些按钮和文本字段。
    5.  我跑了，效果很好。
    6.  现在我向第二个视图控制器添加了一个文本视图并运行。当我试图在文本视图中写一些东西时，页面控件抖动并移动到第一个视图控制器。

有没有人经历过这种情况？

```
@interface AMPageViewController : UIPageViewController <UIPageViewControllerDataSource, UIPageViewControllerDelegate>

@end 
```

实施：

```
#import "AMPageViewController.h"

@interface AMPageViewController ()
{
    UIViewController *mainController;
    UIViewController* socController;
}
@end

@implementation AMPageViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                             bundle: nil];

    mainController = (UIViewController*)[mainStoryboard instantiateViewControllerWithIdentifier: @"First"];
    socController = (UIViewController*)[mainStoryboard instantiateViewControllerWithIdentifier: @"Second"];
    [self setViewControllers:@[mainController]
                   direction:UIPageViewControllerNavigationDirectionForward
                    animated:NO
                  completion:nil];
    self.dataSource = self;
    self.delegate = self;
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    if (viewController == socController )
        return mainController;
    else return nil;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    if (viewController == mainController )
        return socController;
    else return nil;
}

- (NSInteger)presentationCountForPageViewController:(UIPageViewController *)pageViewController
{
    return 2;
}

- (NSInteger)presentationIndexForPageViewController:(UIPageViewController *)pageViewController
{
    return 0;
}

@end 
```

[如果您想下载并尝试该项目](https://dl.dropbox.com/u/62559842/PageViewcontrollerTest.zip)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-05T21:20:43.887

我已经对这个问题进行了很多调查。这似乎是一个与 UIPageViewController 的内部（私有）UIScrollView 相关的错误。如果你在 StackOverflow 上搜索，你会发现很多关于这个问题的帖子并且没有解决方案......

我似乎 UITextView （这是一个 UIScrollView 并且，AFAIR，有一个内部 UIWebView），向它的超级视图链发送了一些奇怪的消息，这使得 UIPageViewController 的私有 UIScrollView 滚动到左上角。

我会尝试使用方法 swizzling 来阻止此消息，但这对于 AppStore 可能不合适。所以我尝试了其他的东西。

**最终的解决方案非常简单：**只需将 UITextView 嵌入到 UIScrollView 中！

[这是指向您的项目的链接已更新](http://www.lombax.it/documents/Page.zip)

如果你这样做，你将解决问题！

试着让我知道

编辑：

我是如何得出这个解决方案的：

一种直觉。

许多调试和堆栈跟踪让我认为问题与“嵌套 UIScrollView”系统中的错误以及从内部视图发送到其父视图的一些消息有关。

UITextView 继承自 UIScrollView 并在 UIWebDocumentView（私有）内部，它是另一个 UIScrollView。在调试过程中，我看到很多消息（私有方法），如“relayout superview”发送到上层 UIScrollView。所以，出于某种原因，内部滚动视图（UIWebDocumentView？）正在向它的超级视图发送消息/事件。此消息/事件（可能是由于错误）没有停止到外部 UITextView，而是转发到由 UIPageViewController 处理的 UIScrollView。

将 UITextView 嵌入到一个简单的 UIView 中是不够的，因为如果 UIView 无法处理，它会将消息转发到它的超级视图。我想：UIScrollView*可能*不会（否则嵌套 UIScrollView 并不简单），所以我尝试了它并且它起作用了。

这都是假设，因为我停止了检查，本周我将进行更深入的了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T06:05:59.803

构建目标 iOS-7.0。

滚动视图技巧对我不起作用。试图通过故事板和代码将文本视图嵌入到滚动视图中，但没有运气。

只需延迟对 textview 的调用即可。不是很优雅，但这是我迄今为止唯一开始工作的事情。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        [self.textView becomeFirstResponder];
    });
} 
```

经过测试，可在我的 iPhone 5 和超慢速 iPhone4 上运行。尽管完全有可能使文本视图成为响应者的任何实现细节都可能花费比设定时间更长的时间。所以请记住，这并不完全是防弹的。

- 编辑 -

嗯......它在我的 iPhone 4 打浆机上工作，延迟为`0.0000000000000001`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T08:02:50.887

您没有在视图控制器之前和之后设置，并且还查看了 socController 的第一响应者

# javascript - 无法在 Javascript 中解析 JSON

> ID：14993197
> 
> 赞同：-5
> 
> 时间：2013-02-21T01:39:51.323
> 
> 标签：javascript, json

我的 HTML 中有这个脚本

```
$(document).ready(function() { 
    type :'GET',
    url :'MapleLeafs2011.json',
    dataType :'json',
    success :processTeam,
    error :function() {
        alert('error');
    }
});

function processTeam(data) {
    var team = data.name;
    ("#team").html(team);
} 
```

我正在尝试获取以下 JSON，

```
{
    "name": "Toronto Maple Leafs",
    "season": "2011-2012",
    "players": {
      "player": [
        {
          "age": "29",
          "height": "6-2",
          "number": "9",
          "name": "Colby Armstrong",
          "position": "RW",
          "weight": "195"
        },
        {
          "age": "20",
          "height": "6-3",
          "number": "37",
          "name": "Carter Ashton",
          "position": "RW",
          "weight": "215"
        },
        {
          "age": "22",
          "height": "6-5",
          "number": "59",
          "name": "Keith Aulie",
          "position": "D",
          "weight": "217"
        },
        {
          "age": "27",
          "height": "6-0",
          "number": "47",
          "name": "Darryl Boyce",
          "position": "C",
          "weight": "200"
        },
        {
          "age": "25",
          "height": "6-1",
          "number": "42",
          "name": "Tyler Bozak",
          "position": "C",
          "weight": "195"
        },
        {
          "age": "26",
          "height": "5-11",
          "number": "18",
          "name": "Mike Brown",
          "position": "RW",
          "weight": "205"
        },
        {
          "age": "22",
          "height": "6-5",
          "number": "32",
          "name": "Joe Colborne",
          "position": "C",
          "weight": "213"
        },
        {
          "age": "30",
          "height": "6-1",
          "number": "12",
          "name": "Tim Connolly",
          "position": "C",
          "weight": "190"
        },
        {
          "age": "28",
          "height": "6-1",
          "number": "46",
          "name": "Joey Crabb",
          "position": "RW",
          "weight": "190"
        },
        {
          "age": "26",
          "height": "6-0",
          "number": "11",
          "name": "Philippe Dupuis",
          "position": "C",
          "weight": "196"
        },
        {
          "age": "24",
          "height": "6-5",
          "number": "4",
          "name": "Cody Franson",
          "position": "D",
          "weight": "213"
        },
        {
          "age": "24",
          "height": "6-0",
          "number": "39",
          "name": "Matt Frattin",
          "position": "RW",
          "weight": "200"
        },
        {
          "age": "21",
          "height": "6-1",
          "number": "51",
          "name": "Jake Gardiner",
          "position": "D",
          "weight": "173"
        },
        {
          "age": "28",
          "height": "5-11",
          "number": "84",
          "name": "Mikhail Grabovski",
          "position": "C",
          "weight": "183"
        },
        {
          "age": "25",
          "height": "6-2",
          "number": "36",
          "name": "Carl Gunnarsson",
          "position": "D",
          "weight": "196"
        },
        {
          "age": "27",
          "height": "6-3",
          "number": "50",
          "name": "Jonas Gustavsson",
          "position": "G",
          "weight": "192"
        },
        {
          "age": "26",
          "height": "6-2",
          "number": "48",
          "name": "Ryan Hamilton",
          "position": "LW",
          "weight": "219"
        },
        {
          "age": "21",
          "height": "6-0",
          "number": "43",
          "name": "Nazem Kadri",
          "position": "C",
          "weight": "188"
        },
        {
          "age": "24",
          "height": "6-0",
          "number": "81",
          "name": "Phil Kessel",
          "position": "RW",
          "weight": "202"
        },
        {
          "age": "30",
          "height": "6-4",
          "number": "8",
          "name": "Mike Komisarek",
          "position": "D",
          "weight": "243"
        },
        {
          "age": "25",
          "height": "6-1",
          "number": "41",
          "name": "Nikolai Kulemin",
          "position": "LW",
          "weight": "225"
        },
        {
          "age": "31",
          "height": "5-10",
          "number": "24",
          "name": "John-Michael Liles",
          "position": "D",
          "weight": "185"
        },
        {
          "age": "29",
          "height": "5-11",
          "number": "15",
          "name": "Matthew Lombardi",
          "position": "C",
          "weight": "195"
        },
        {
          "age": "28",
          "height": "6-1",
          "number": "19",
          "name": "Joffrey Lupul",
          "position": "RW",
          "weight": "206"
        },
        {
          "age": "26",
          "height": "6-0",
          "number": "16",
          "name": "Clarke MacArthur",
          "position": "LW",
          "weight": "191"
        },
        {
          "age": "29",
          "height": "6-3",
          "number": "28",
          "name": "Colton Orr",
          "position": "RW",
          "weight": "222"
        },
        {
          "age": "26",
          "height": "6-3",
          "number": "3",
          "name": "Dion Phaneuf",
          "position": "D",
          "weight": "214"
        },
        {
          "age": "23",
          "height": "6-2",
          "number": "34",
          "name": "James Reimer",
          "position": "G",
          "weight": "220"
        },
        {
          "age": "26",
          "height": "6-3",
          "number": "38",
          "name": "Jay Rosehill",
          "position": "LW",
          "weight": "215"
        },
        {
          "age": "24",
          "height": "6-5",
          "number": "40",
          "name": "Jussi Rynnas",
          "position": "G",
          "weight": "205"
        },
        {
          "age": "22",
          "height": "6-2",
          "number": "2",
          "name": "Luke Schenn",
          "position": "D",
          "weight": "229"
        },
        {
          "age": "25",
          "height": "6-2",
          "number": "30",
          "name": "Ben Scrivens",
          "position": "G",
          "weight": "192"
        },
        {
          "age": "29",
          "height": "6-5",
          "number": "20",
          "name": "David Steckel",
          "position": "C",
          "weight": "215"
        }
      ]
  }
} 
```

但是 Firefox 说，**SyntaxError: invalid label** on this line，`url: "MapleLeafs2011.json",`

Chrome 说，**Uncaught SyntaxError: Unexpected token :** 在同一行。

什么可能是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:47:44.133

ready() 中函数的语法缺少对 $.get() 或 $.ajax() 的调用；

```
function() { 
    $.ajax({     
          type: 'GET',
          url: 'MapleLeafs2011.json',
          dataType: 'json',
          success: processTeam,
          error: function() {
             alert('error');
          }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:43:12.533

你错过了

```
$.ajax({ 
```

线。您的对象缺少开头`{`，您需要将其传递给 ajax 函数，是吗？

# html - Internet Explorer 中标签内的图像和复选框

> ID：14993198
> 
> 赞同：4
> 
> 时间：2013-02-21T01:39:58.363
> 
> 标签：html, checkbox, internet-explorer-8

我有以下html：

```
<label>
    <img src="..." />
    <input type="checkbox" .../>
</label> 
```

在 Chrome 和 Firefox 中，单击`img`将选中/取消选中该复选框。但是在 IE8 中，点击图片时它没有响应。

我的 html 标签无效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:01:19.700

IE8是..愚蠢的？将同一图像的 CSS更改为`<img>`a 。`<span>``background-image`

# c++ - 从文件中读取字符串到数组

> ID：14993205
> 
> 赞同：-3
> 
> 时间：2013-02-21T01:40:41.533
> 
> 标签：c++, string, multidimensional-array, getline

我有一个以下列方式包含多行和多列的文本文件。

```
 234 567 890 4523
 12  34  
 78  23  432 
```

我想将它们读入一个数组，例如`a[0][0] = 234`, while`a[1][0] = 12`等等。我可以使用 将它们全部放入一维中`input >> a[i]`，但我希望将它们放在二维数组中。我尝试使用`getline()`，但到目前为止还没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:47:07.157

你可以使用`std::vector`.`std::vector`

对于每一行，读入每个数字并使用`push_back`将其复制到相关向量（数组）的末尾。

您可以使用`std::istringstream`.

`std::string`正如您所指出的，您可以通过使用将一行输入读入 a `std::getline`。

* * *

在伪代码中它就像

```
void foo()
{
    std::vector< std::vector< int > > numbers;
    std::string line;
    while( getline( cin, line ) )
    {
        std::istringstream stream( line );
        numbers.push_back( std::vector<int>() );
        std::vector<int>& v = numbers.back();
        int number;
        while( stream >> number )
        {
            v.push_back( number );
        }
    }
} 
```

免责声明：编译器未触及代码，并且省略了所有错误检查等。

# javascript - jQuery触摸事件iOS将不起作用

> ID：14993207
> 
> 赞同：3
> 
> 时间：2013-02-21T01:40:43.843
> 
> 标签：javascript, android, jquery, ios, touch

我在 iOS 中遇到了 jQuery 触摸事件的问题。

这是我所做的：

```
$(document).ready(function(){
        var iX = 0,iY = 0,fX = 0,fY = 0;

        document.addEventListener('touchstart', function(e) {

            var touch = e.touches[0];
            iX = touch.pageX;
            iY = touch.pageY;

        }, false);

        document.addEventListener('touchmove', function(e) {

            var touch = e.touches[0];
            fX = touch.pageX;
            fY = touch.pageY;

        }, false);

        document.addEventListener('touchcancel', function() {

            var dX = fX - iX;
            var dY = fY - iY;

            var tg = dY/dX;
            if(tg < 0) tg = -tg;

            if(tg <= 0.5 && fX > iX) rightSwipe()
            else if(tg <= 0.5 && fX < iX) leftSwipe()

        }, false);

        function rightSwipe(){
            $("#body").removeClass("bg2");
            $("#body").addClass("bg");
        }

        function leftSwipe(){
            $("#body").removeClass("bg");
            $("#body").addClass("bg2");
        }
}); 
```

当您将手指触摸到屏幕上时，它会保存手指位置。当您移动手指并松开它时，它会保存最后一个手指位置。通过简单的几何图形，它会发现您滑动的方向。

此脚本在使用 Google Chrome 和 Android 默认浏览器的 Android 4.1.2 上运行良好。当我使用 Safari 在 iOS 上尝试它时，它不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:46:12.837

我还没有`touchcancel`在 iPad 上的 Mobile Safari 上看到该事件。您是否尝试过使用`touchend`？也许是这样：

```
function upHandler(event) {

    var dX = fX - iX;
    var dY = fY - iY;

    var tg = dY / dX;
    if (tg < 0) tg = -tg;

    if (tg <= 0.5 && fX > iX) rightSwipe()
    else if (tg <= 0.5 && fX < iX) leftSwipe()
}

document.addEventListener('touchcancel', upHandler, false);
document.addEventListener('touchend', upHandler, false); 
```

如果你使用 jQuery，你可以替换这个：

```
document.addEventListener('touchcancel', upHandler, false);
document.addEventListener('touchend', upHandler, false); 
```

和：

```
$(document).on('touchcancel, touchend', upHandler); 
```

# css - 关于 less/css 属性的好奇问题

> ID：14993213
> 
> 赞同：0
> 
> 时间：2013-02-21T01:41:57.393
> 
> 标签：css, twitter-bootstrap, less

我在属性border-botom-color（CSS端）中遇到了一个关于Less（引导程序）的奇怪问题。

我有这个示例，其中出现了活动选项卡（第 1 节）的底线：

[小提琴 1](http://jsfiddle.net/rochasdv/7wrww/)

我有这个例子，其中活动选项卡的底线（第 1 节）没有出现：

[小提琴 2](http://jsfiddle.net/rochasdv/9xbSu/)

唯一的区别在于 CSS 上的第 5365 行，在第一个示例中是`border-bottom-color: transparent;`，在第二个示例中是`border-bottom-color: #FFF;`

我想知道为什么“透明”不起作用但添加颜色（如#FFF）它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:11:13.300

原因是该行是在其他地方生成的。因此，当您放置时，`border-bottom-color:transparent;`您只会看到另一条线。但是当你把它变成白色时，你在它上面画了一条新的白线。

[小提琴显示问题](http://jsfiddle.net/bennett_an/M8gZK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:12:19.977

这是因为`ul.nav-tabs`标签（标签的父级`a`）有彩色边框，长灰色水平边框（参见[jsfiddle1](http://jsfiddle.net/rochasdv/7wrww/)第 5328 行）。您需要将`a`边框底部颜色设置为白色以覆盖它的父边框，因此它看起来是透明的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T02:12:26.063

`transparent`只需在属性定义的边框的顶部添加一个完全透明的边框，`border`因此会显示颜色。`#fff`显示在边框的顶部并阻挡了其他颜色，因此显示了白色。您可以通过分别为每个边框指定颜色来解决此问题。

# drupal - Drupal 6 模板重定向

> ID：14993215
> 
> 赞同：0
> 
> 时间：2013-02-21T01:42:13.220
> 
> 标签：drupal, redirect, drupal-6

如果用户未登录，有一些重定向解决方案。如果我不想重定向到登录页面，而是重定向到主域网页怎么办

所以这很容易，drupal goto 将我们带到域/用户/登录，但我想重定向到域。当然， drupal_goto(''); 导致错误！

```
 global $user;
   if ($user->uid == 0 && arg(0) != 'user' && arg(1) != 'login'){
   drupal_goto('user/login');
 } 
```

（这被放置在函数 phptemplate_preprocess_page(&$vars) 下的主题 template.php 文件中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:40:16.613

那么最简单的方法是将目标参数添加到注销链接。

因此，如果您的链接看起来像`example.com/logout`将其更改为`example.com/logout&destination=node/1`. 注销后，Drupal 会自动将您重定向到目的地。生成链接也很容易，如下所示：

```
 <?php if ($user->uid) : ?>
    <?php print l(t('log out'), 'logout', array('query' => drupal_get_destination())); ?>
    <?php print l($user->name, 'user'); ?>
  <?php else : ?>
    <?php print l(t('log in'), 'user', array('query' => drupal_get_destination())); ?>
  <?php endif; ?> 
```

**12.03.2013 更新**：有关重定向的更多高级选项，您可以安装此模块：[LoginToboggan](http://drupal.org/project/logintoboggan)

# javascript - Javascript 在每个复选框单击时显示相同的内容？

> ID：14993216
> 
> 赞同：0
> 
> 时间：2013-02-21T01:42:17.243
> 
> 标签：javascript

我有多个复选框，我希望它们在单击每个复选框时显示相同的内容。现在，当我单击一个复选框时，会显示内容，但在我取消单击它之前，下一个复选框不会显示任何内容。只要单击复选框，我希望显示所有内容。任何提示。我试过这个：

```
function showTime(days){        
    var showTime = document.getElementById("time_schedules");
    var days = document.getElementById("schedule");
    if (days.checked) {
        showTime.style.display = "Block";
    }
    else{
        showTime.style.display = "none";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:11:18.030

将一些类属性插入所有复选框，以便您可以选择它们，然后捕获单击事件，遍历所有复选框并执行您需要做的任何事情（设置标签等）。

我建议使用一些 javascript 库，例如 jquery，例如：

```
<input type="checkbox" name="cb1" class="cb" />
<label for="cb1" class="cblabel">label1</label>
<input type="checkbox" name="cb2" class="cb" />
<label for="cb2" class="cblabel">label2</label>

$('.cb').bind('click', function() {
    $('.cblabel').each(function(i,v) { v.innerHTML = 'hello'; });
}); 
```

[http://jsfiddle.net/3EMyY/](http://jsfiddle.net/3EMyY/)

# java - 让 GPG 解密在 Java 中工作（Bouncy Castle）

> ID：14993223
> 
> 赞同：15
> 
> 时间：2013-02-21T01:43:17.737
> 
> 标签：java, bouncycastle, openpgp, elgamal

首先让我说我对这一切都非常陌生。我想要做的是在 Java 中使用 gpg 来解密加密文件。

我成功完成的事情：

*   让一位同事使用我的公钥和他的私钥加密文件并成功解密。

*   走了另一条路

*   让另一位同事尝试解密不适合他的文件：失败（如预期）

我的密钥是这样生成的......

（gpg --version 告诉我我使用的是 1.4.5，我使用的是 Bouncy Castle 1.47）

gpg --gen-ley

选择选项“DSA 和 Elgamal（默认）”

填写其他字段并生成密钥。

该文件是使用我的公钥和另一个人的密钥加密的。我想解密它。我编写了以下 Java 代码来完成此操作。我正在使用几种已弃用的方法，但我不知道如何正确实现使用非弃用版本所需的工厂方法，所以如果有人对我应该使用的那些方法的实现有想法，那将是不错的奖金。

```
 Security.addProvider(new BouncyCastleProvider());

        PGPSecretKeyRingCollection secretKeyRing = new PGPSecretKeyRingCollection(new FileInputStream(new File("test-files/secring.gpg")));
        PGPSecretKeyRing pgpSecretKeyRing = (PGPSecretKeyRing) secretKeyRing.getKeyRings().next();
        PGPSecretKey secretKey = pgpSecretKeyRing.getSecretKey();
        PGPPrivateKey privateKey = secretKey.extractPrivateKey("mypassword".toCharArray(), "BC");

        System.out.println(privateKey.getKey().getAlgorithm());
        System.out.println(privateKey.getKey().getFormat());

        PGPObjectFactory pgpF = new PGPObjectFactory(
    new FileInputStream(new File("test-files/test-file.txt.gpg")));
        Object pgpObj = pgpF.nextObject();
        PGPEncryptedDataList encryptedDataList = (PGPEncryptedDataList) pgpObj;

        Iterator objectsIterator = encryptedDataList.getEncryptedDataObjects();

        PGPPublicKeyEncryptedData publicKeyEncryptedData = (PGPPublicKeyEncryptedData) objectsIterator.next();
        InputStream inputStream = publicKeyEncryptedData.getDataStream(privateKey, "BC"); 
```

因此，当我运行此代码时，我了解到我的密钥的算法和格式如下：

算法：DSA 格式：PKCS#8

然后它在最后一行中断：

```
Exception in thread "main" org.bouncycastle.openpgp.PGPException: error setting asymmetric cipher
at org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder.decryptSessionData(Unknown Source)
at org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder.access$000(Unknown Source)
at org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder$2.recoverSessionData(Unknown Source)
at org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)
at org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)
at org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)
at org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)
at TestBouncyCastle.main(TestBouncyCastle.java:74) 
```

原因：java.security.InvalidKeyException：在 org.bouncycastle.jcajce.provider.asymmetric.elgamal.CipherSpi.engineInit(Unknown Source) 在 org.bouncycastle.jcajce.provider.asymmetric.elgamal.CipherSpi 处传递给 ElGamal 的未知密钥类型。 engineInit(Unknown Source) at javax.crypto.Cipher.init(DashoA13*..) at javax.crypto.Cipher.init(DashoA13*..) ... 还有 8 个

我在这里接受很多建议，从“不要使用 gpg，改用 x”到“不要使用充气城堡，改用 x”到介于两者之间的任何建议。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-10-19T13:53:43.750

如果有人有兴趣知道如何使用 bouncy castle openPGP 库加密和解密 gpg 文件，请查看以下 java 代码：

以下是您需要的4种方法：

以下方法将从 .asc 文件中读取并导入您的密钥：

```
public static PGPSecretKey readSecretKeyFromCol(InputStream in, long keyId) throws IOException, PGPException {
    in = PGPUtil.getDecoderStream(in);
    PGPSecretKeyRingCollection pgpSec = new PGPSecretKeyRingCollection(in, new BcKeyFingerprintCalculator());

    PGPSecretKey key = pgpSec.getSecretKey(keyId);

    if (key == null) {
        throw new IllegalArgumentException("Can't find encryption key in key ring.");
    }
    return key;
} 
```

以下方法将从 .asc 文件中读取并导入您的公钥：

```
@SuppressWarnings("rawtypes")
    public static PGPPublicKey readPublicKeyFromCol(InputStream in) throws IOException, PGPException {
        in = PGPUtil.getDecoderStream(in);
        PGPPublicKeyRingCollection pgpPub = new PGPPublicKeyRingCollection(in, new BcKeyFingerprintCalculator());
        PGPPublicKey key = null;
        Iterator rIt = pgpPub.getKeyRings();
        while (key == null && rIt.hasNext()) {
            PGPPublicKeyRing kRing = (PGPPublicKeyRing) rIt.next();
            Iterator kIt = kRing.getPublicKeys();
            while (key == null && kIt.hasNext()) {
                PGPPublicKey k = (PGPPublicKey) kIt.next();
                if (k.isEncryptionKey()) {
                    key = k;
                }
            }
        }
        if (key == null) {
            throw new IllegalArgumentException("Can't find encryption key in key ring.");
        }
        return key;
    } 
```

以下 2 种解密和加密 gpg 文件的方法：

```
public void decryptFile(InputStream in, InputStream secKeyIn, InputStream pubKeyIn, char[] pass) throws IOException, PGPException, InvalidCipherTextException {
        Security.addProvider(new BouncyCastleProvider());

        PGPPublicKey pubKey = readPublicKeyFromCol(pubKeyIn);

        PGPSecretKey secKey = readSecretKeyFromCol(secKeyIn, pubKey.getKeyID());

        in = PGPUtil.getDecoderStream(in);

        JcaPGPObjectFactory pgpFact;

        PGPObjectFactory pgpF = new PGPObjectFactory(in, new BcKeyFingerprintCalculator());

        Object o = pgpF.nextObject();
        PGPEncryptedDataList encList;

        if (o instanceof PGPEncryptedDataList) {

            encList = (PGPEncryptedDataList) o;

        } else {

            encList = (PGPEncryptedDataList) pgpF.nextObject();

        }

        Iterator<PGPPublicKeyEncryptedData> itt = encList.getEncryptedDataObjects();
        PGPPrivateKey sKey = null;
        PGPPublicKeyEncryptedData encP = null;
        while (sKey == null && itt.hasNext()) {
            encP = itt.next();
            secKey = readSecretKeyFromCol(new FileInputStream("PrivateKey.asc"), encP.getKeyID());
            sKey = secKey.extractPrivateKey(new BcPBESecretKeyDecryptorBuilder(new BcPGPDigestCalculatorProvider()).build(pass));
        }
        if (sKey == null) {
            throw new IllegalArgumentException("Secret key for message not found.");
        }

        InputStream clear = encP.getDataStream(new BcPublicKeyDataDecryptorFactory(sKey));

        pgpFact = new JcaPGPObjectFactory(clear);

        PGPCompressedData c1 = (PGPCompressedData) pgpFact.nextObject();

        pgpFact = new JcaPGPObjectFactory(c1.getDataStream());

        PGPLiteralData ld = (PGPLiteralData) pgpFact.nextObject();
        ByteArrayOutputStream bOut = new ByteArrayOutputStream();

        InputStream inLd = ld.getDataStream();

        int ch;
        while ((ch = inLd.read()) >= 0) {
            bOut.write(ch);
        }

        //System.out.println(bOut.toString());

        bOut.writeTo(new FileOutputStream(ld.getFileName()));
        //return bOut;

    }

    public static void encryptFile(OutputStream out, String fileName, PGPPublicKey encKey) throws IOException, NoSuchProviderException, PGPException {
        Security.addProvider(new BouncyCastleProvider());

        ByteArrayOutputStream bOut = new ByteArrayOutputStream();

        PGPCompressedDataGenerator comData = new PGPCompressedDataGenerator(PGPCompressedData.ZIP);

        PGPUtil.writeFileToLiteralData(comData.open(bOut), PGPLiteralData.BINARY, new File(fileName));

        comData.close();

        PGPEncryptedDataGenerator cPk = new PGPEncryptedDataGenerator(new BcPGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.TRIPLE_DES).setSecureRandom(new SecureRandom()));

        cPk.addMethod(new BcPublicKeyKeyEncryptionMethodGenerator(encKey));

        byte[] bytes = bOut.toByteArray();

        OutputStream cOut = cPk.open(out, bytes.length);

        cOut.write(bytes);

        cOut.close();

        out.close();
    } 
```

现在这里是如何调用/运行上面的：

```
try {
             decryptFile(new FileInputStream("encryptedFile.gpg"), new FileInputStream("PrivateKey.asc"), new FileInputStream("PublicKey.asc"), "yourKeyPassword".toCharArray());

            PGPPublicKey pubKey = readPublicKeyFromCol(new FileInputStream("PublicKey.asc"));

            encryptFile(new FileOutputStream("encryptedFileOutput.gpg"), "fileToEncrypt.txt", pubKey);

        } catch (PGPException e) {
            fail("exception: " + e.getMessage(), e.getUnderlyingException());
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-11T13:50:02.107

对于任何寻找替代解决方案的人，请参阅[https://stackoverflow.com/a/42176529/7550201](https://stackoverflow.com/a/42176529/7550201)

```
final InputStream plaintextStream = BouncyGPG
           .decryptAndVerifyStream()
           .withConfig(keyringConfig)
           .andRequireSignatureFromAllKeys("sender@example.com")
           .fromEncryptedInputStream(cipherTextStream) 
```

长话短说：Bouncycastle 的编程通常是大量的[货物崇拜编程](https://en.wikipedia.org/wiki/Cargo_cult_programming)，我编写了一个库来改变这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T14:14:19.867

我决定采用一种截然不同的方法，即完全放弃使用充气城堡，而只使用运行时进程。对我来说，这个解决方案是有效的，并且完全消除了充气城堡周围的复杂性：

```
String[] gpgCommands = new String[] {
        "gpg",
        "--passphrase",
        "password",
        "--decrypt",
        "test-files/accounts.txt.gpg"
};

Process gpgProcess = Runtime.getRuntime().exec(gpgCommands);
BufferedReader gpgOutput = new BufferedReader(new InputStreamReader(gpgProcess.getInputStream()));
BufferedReader gpgError = new BufferedReader(new InputStreamReader(gpgProcess.getErrorStream())); 
```

完成此操作后，您需要记住在进程执行时排空输入流，否则您的程序可能会挂起，具体取决于您的输出量。请参阅我在此线程中的答案（以及让我走上正确道路的 Cameron Skinner 和 Matthew Wilson 的答案）以获得更多上下文：[Calling GnuPG in Java via a Runtime Process to encrypt and decrypt files - Decrypt always hangs](https://stackoverflow.com/questions/4367090/calling-gnupg-in-java-via-a-runtime-process-to-encrypt-and-decrypt-files-decry/15004303#15004303)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T02:35:43.970

[谷歌](https://www.google.com/search?hl=en&q=elgamal+%22error+setting+asymmetric+cipher%22&meta=)的第一个结果是[这个](http://bouncy-castle.1462172.n4.nabble.com/Illegal-key-size-or-default-parameters-exception-td1467431.html)。看起来您正在尝试解密 ElGamal 数据，但您没有传递 ElGamal 密钥。

有两种简单的可能性：

*   您的钥匙圈集合有多个钥匙圈。
*   您的密钥环有子密钥。

您选择了带有 ElGamal 加密的 DSA，所以我怀疑至少是后者：子密钥由主密钥签名；ElGamal 不是一种签名算法（我不知道 DSA 和 ElGamal 是否可以使用相同的密钥，但通常认为将不同的密钥用于不同的目的是一个好主意）。

我认为你想要这样的东西（也`secretKeyRing`可能应该重命名为`secretKeyRingCollection`）：

```
PGPSecretKey secretKey = secretKeyRing.getSecretKey(publicKeyEncryptedData.getKeyID()); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-04-03T15:47:19.813

错误消息很困难，因为它并不完全准确。除了非法的密钥大小或默认参数之外，异常并没有说它可能因为加密权限检查失败而失败。这意味着您没有正确设置 JCE 权限。您需要安装[JCE Unlimited Strength Policy](https://www.oracle.com/java/technologies/javase-jce8-downloads.html)。

您可以通过在 jvm 上设置系统属性来查看调试消息

```
java -Djava.security.debug=access .... 
```

# c++ - 在 C++ 中使用带有多级指针和偏移量的 WriteProcessMemory()？

> ID：14993224
> 
> 赞同：0
> 
> 时间：2013-02-21T01:43:28.563
> 
> 标签：c++, c, winapi, pointers

其中一个参数`WriteProcessMemory()`显然要求指向基地址的指针。但是如果它是一个多级指针呢？例如，假设我必须找到一个指针 3 次才能最终获得静态地址，第一个偏移量是 0，第二个是 57，第三个是 268。现在如果我想写入那个确切的位置，我该怎么做将偏移量包括在`WriteProcessMemory()`函数，我必须包括所有三个偏移量还是只包括最后一个导致我进入静态地址的偏移量？为了澄清事情，我基本上是在 PC 上的第一人称射击游戏中练习操纵记忆。我的目标并不是真正地进行黑客攻击或其他任何事情。我只是想练习将内存写入进程。（例如，我会尝试将新值写入“健康”地址或“弹药”地址。）我主要想知道如何计算多级指针中的偏移量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:50:15.967

地址就是地址。使用多级指针（指向指针的指针）并不重要。

基地址是您要写入的地址。您的多级指针所指向的地址都包含在该参数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:53:21.537

WriteProcessMemory 将绝对数据放入内存。如果您想将多级结构写入内存，例如在元素中有指针，那么您需要根据远程`lpBaseAddress`和正在写入的数据量写入指针值，并且您需要写入的数据是被放置在记忆中。

如果您正在写入的结构中有指针，那么除非您将它们重写为您正在写入的目标数据的一部分，否则它们将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-26T05:44:14.463

您不能在对 WriteProcessMemory() 的调用中“包含”偏移量来遍历指针链。多级指针或指针链是指向指向指针的指针。在大多数情况下，必须在每个指针被取消引用后添加相对偏移量。

WriteProcessMemory 只写入一个地址，它的目的是单一的。

但是您必须取消引用每个指针并添加偏移量。为此，您必须使用 ReadProcessMemory。您可以使用此函数遍历指针链，它将取消引用每个指针并正确添加偏移量：

```
uintptr_t FindDMAAddy(HANDLE hProc, uintptr_t ptr, std::vector<unsigned int> offsets)
{
    for (unsigned int i = 0; i < offsets.size(); ++i)
    {
        ReadProcessMemory(hProc, (BYTE*)ptr, &ptr, sizeof(ptr), 0);
        ptr += offsets[i];
    }
    return ptr;
} 
```

调用该函数的示例如下所示：

```
uintptr_t ammoAddr = FindDMAAddy(hProcess, dynamicPtrBaseAddr, { 0x374, 0x14, 0x0 }); 
```

此函数的结果将是您要读取或写入的变量的地址。剩下要做的就是随后调用 ReadProcessMemory 或 WriteProcessMemory，具体取决于您要执行的操作。

# android - 在 SQLite 中创建第二个表

> ID：14993229
> 
> 赞同：1
> 
> 时间：2013-02-21T01:43:55.803
> 
> 标签：android, database, sqlite

我有一个数据库，其中一个表有两列名称，现在描述我想创建具有两列年龄和性别的新表。我试图找到一些信息来创建另一个表，但似乎很难。我怎样才能做到这一点？这是我的创建数据库方法：

```
public class DataProvider extends SQLiteOpenHelper {

// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "contactsManager";

// Contacts table name
private static final String TABLE = "contacts";

public DataProvider(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Contacts Table Columns names
private static final String KEY_NAME = "name";
private static final String KEY_DECRIBED = "described";

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE + "("
             +KEY_NAME + " TEXT,"
            + KEY_DECRIBED + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS " + TABLE);

    // Create tables again
    onCreate(db);
}

public void addContact(Name contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName()); // Contact Name
    values.put(KEY_DECRIBED, contact.getDescribed()); // Contact Described

    // Inserting Row
    db.insert(TABLE, null, values);
    db.close(); // Closing database connection
}

 // Getting single contact
public Name getContact(int id) {
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE, new String[] {
            KEY_NAME, KEY_DECRIBED },
            null, new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();

    Name contact = new Name(cursor.getString(0),
            cursor.getString(1));
    // return contact
    return contact;
}

public List<Name> getAllContacts() {
    List<Name> contactList = new ArrayList<Name>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Name contact = new Name();

            contact.SetName(cursor.getString(0));
            contact.SetDescribed(cursor.getString(1));
            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }

    // return contact list
    return contactList;
}

// Getting contacts Count
public int getContactsCount() {
    String countQuery = "SELECT  * FROM " + TABLE;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    cursor.close();

    // return count
    return cursor.getCount();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:00:00.367

和第一个一样。只是多了一个 execSQL。试试这个：

```
import android.content.Context;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.provider.BaseColumns; 
```

```
 public class DBHelper extends SQLiteOpenHelper { 
```

```
 public static interface HUMAN extends BaseColumns {
                String TABLE_NAME = "human";
                String NAME = "name";
                String DECRIBED = "described";
            }
    public static interface DESCRIBTION extends BaseColumns {
                String TABLE_NAME = "describtion";
                String AGE = "age";
                String SEX = "sex";
            }
    private static final String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS ";
    private static final String DATABASE_NAME = "contactsManager";
            private static final int DATABASE_VERSION = 1;
    private static final String UNIQUE = "UNIQUE ON CONFLICT ABORT";
    private static final String CREATE_TABLE_HUMAN = CREATE_TABLE + HUMAN.TABLE_NAME + " (" + HUMAN._ID
                    + " INTEGER PRIMARY KEY," + HUMAN.NAME + " TEXT, " + HUMAN.DECRIBED + " TEXT);";
    private static final String CREATE_TABLE_DESCRIBTION = CREATE_TABLE + DESCRIBTION.TABLE_NAME + " (" 
                    + DESCRIBTION._ID + " INTEGER PRIMARY KEY," + DESCRIBTION.AGE + " INTEGER, " + DESCRIBTION.SEX
                    + " TEXT);";
    public DBHelper(Context context) {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }
    @Override
            public void onCreate(SQLiteDatabase db) {
                db.execSQL(CREATE_TABLE_HUMAN);
                db.execSQL(CREATE_TABLE_DESCRIBTION);
            }
    @Override
            public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
                db.execSQL("DROP TABLE IF EXISTS " + HUMAN.TABLE_NAME);
                db.execSQL("DROP TABLE IF EXISTS " + DESCRIBTION.TABLE_NAME);
                onCreate(db);
    }
        } 
```

# django - 美味派迁移

> ID：14993230
> 
> 赞同：0
> 
> 时间：2013-02-21T01:43:58.807
> 
> 标签：django, migration, tastypie, django-south

我收到以下错误

后`python manage.py syncdb`

它说一切都已同步，但后来我看到了

```
Not synced (use migrations):
 - tastypie 
```

如何同步`tastypie`？

我也`South`同步过。显然，这有所作为。

以下SO问题提到了这个问题但没有解决它或者至少我不明白解决方案：[South manages a new app instead of syncdb](https://stackoverflow.com/questions/9367708/south-manages-a-new-app-instead-of-syncdb)

你能帮我解决这个问题吗，谢谢。

请记住，这是我第一次使用 Django

我在网上看到了另一个解决方案，但它需要应用程序名称，我把应用程序名称记下来但它不起作用（或者我可能不知道我的应用程序名称）。你如何找到应用程序名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:16:23.293

```
django-admin.py migrate tastypie 
```

# shell - 如何在 shell 脚本中将 UTC 时间戳（以秒为单位）转换为人类可读的本地时间？

> ID：14993231
> 
> 赞同：3
> 
> 时间：2013-02-21T01:44:15.077
> 
> 标签：shell, date, converter, utc

给定以秒为单位的 UTC 时间戳**1361322102.430**如何在 shell 脚本中将其转换为人类可读的本地时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:44:15.077

**1361322102.430** UTC 秒的同一时刻

以当地时区显示

```
$ date -d @1361322102.430
Tue Feb 19 20:01:42 EST 2013 
```

以 UTC 时区显示

```
$ date -d @1361322102.430 -u
Wed Feb 20 01:01:42 UTC 2013 
```

更多详情 →`$ info coreutils 'date invocation'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:43:46.067

GNU：

```
$ date -d @1361414562.231
Wed Feb 20 18:42:42 PST 2013 
```

大多数 BSD：

```
$ date -r 1361414562.231
Wed Feb 20 18:41:38 PST 2013 
```

# php - 为什么我的登录不起作用？我的哈希方法是否有错误/是否正确？

> ID：14993233
> 
> 赞同：1
> 
> 时间：2013-02-21T01:44:18.200
> 
> 标签：php, php-password-hash

登记：

```
 $hashed_password = password_hash($password, PASSWORD_BCRYPT);

    $query = "INSERT INTO users(username,email,password) VALUES('" . $username . "','" . $email . "','" . $hashed_password . "')";
    mysql_query($query); 
```

确认：

```
 $query = "SELECT id,username,password FROM users WHERE email='" . $email . "'";
   $row = mysql_fetch_assoc(mysql_query($query));

   if (password_verify($password, $row["password"])) { 
```

忽略我使用的即将弃用的方法，我会尽快更改。

为什么这不起作用？它检测到用户名的密码错误。

我正在使用这个库来允许以前版本中的 PHP 5.5 函数：[https ://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

（是的，我可以使用该功能，我使用的是 PHP 5.3.15）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:35:52.353

确保 MySQL 字段足够长以存储整个散列，它们可能会变长，具体取决于函数。如果在您将散列插入数据库时​​它太短，它将被静默截断以适应，这将使您根据散列检查您的密码失败。

# c# - Win Phone App：可以使用在另一个页面上声明的事件吗？

> ID：14993234
> 
> 赞同：0
> 
> 时间：2013-02-21T01:44:24.833
> 
> 标签：c#, silverlight, class, windows-phone-7, events

我的场景很简单，实际上我认为它不会引起任何问题，但确实如此，有人可以帮忙吗？

我的`MainPage`开头是这样的：

```
namespace PhoneApp
{
    public partial class MainPage : PhoneApplicationPage { /* snip */ }
} 
```

页面后面是这个简单的方法：

```
private void MakeSound(object sender, MouseButtonEventArgs e) 
```

好吧，一切都很好。

但`SettingsSample.xaml`我有一个 ListBoxItem 调用方法 MakeSoundvia`SelectionChanged`属性。VS 工作室告诉我“在类 PhoneApp.SettingsSample 上找不到事件处理程序 MakeSoundis”

此页面的代码以：

```
namespace PhoneApp
{
    public partial class SettingsSample : PhoneApplicationPage { /* snip */ }
} 
```

***由于某种原因***，复制方法的代码`SettingsPage.xaml.cs`不起作用，但我觉得应该可以使用描述的方法，特别是因为**它们各自的代码位于相同的命名空间**中。*`MaingePage.xaml.cs`*

 ***我试图添加

```
using PhoneApp; 
```

在 SettingsSample.xaml.cs 上。不是特别聪明，但我没有其他想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:55:50.097

您的事件函数应该读取`EventClickOnMyListBox`并位于页面的代码隐藏中。然后这个函数会调用你的`makeasound`函数（你可以把它放在任何你想要的地方）。它可以被另一个事件或函数调用。

事件本身和事件的作用之间存在语义区别。您的事件*不是* `makeasound`，您的事件*将导致*发出声音，以及其他可能的事情。

如果您想添加一个弹出窗口来添加视觉效果，如果您直接调用该函数，您将被卡住，而在其他场景中`makeasound`您只需要添加一行即可。`EventClickOnMyListBox`

这就是 xaml 以这种方式工作的原因，并允许您仅引用封闭类中的对象（或者如果有一种我不知道/并且从不需要它的方法）。您应该最小化代码隐藏代码（如果您想在这条路上走得更远，这是[MVVM 模式的思维方式）。](http://mvvmlight.codeplex.com/)

* * *

回复您的评论，这里有一些代码可以帮助您入门：

您的事件应该在`SettingSample`页面的代码隐藏中，并且应该调用`makeasound`函数而不是*函数*`makeasound`：

```
private void MenuItem_Click(object sender, MouseButtonEventArgs e)
{
    Whatever.Myclass.MakeASound (blabla); // So typically MakeASound would be static
} 
```

现在在你的主页中也有同样的事情：你不使用你的`private void MakeSound(object sender, MouseButtonEventArgs e)`作为点击事件，而是像上面那样使用事件处理程序。

退后一步，你会发现这很自然：你想要两件事做同样的事情。但是由于与语言相关的原因，一件事不能*与*第一件事完全相同（阅读 C# 和 XAML 以了解原因）。

所以你把你的特性放在第三个组件中，可以从前两个组件中访问。你从他们每个人那里调用这个组件。这样，他们都可以共享对相同功能的访问权限，并且每个人都很高兴。***

# compiler-construction - C++ Builder 2009 - 表单布局在构建时不刷新

> ID：14993235
> 
> 赞同：0
> 
> 时间：2013-02-21T01:44:25.170
> 
> 标签：compiler-construction, c++builder

使用 C++ Builder 2009，Win 7。

我对几个表单进行了表单布局更新，并对项目进行了清理、构建和制作。尽管有这些命令，布局仍然显示旧布局。

我很好奇是否有人遇到过这个问题，以及是否有适当的方法可以从 IDE 中做到这一点。同时，我将手动删除所有 obj 文件等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:25:07.277

我问这个问题已经有一段时间了。我相信问题的根源在于翻译的第三方组件。该组件将提取布局信息，并且只有在您运行其“更新语言”实用程序时才会更新布局。当实用程序运行时，它会更新所有语言的布局。不用说，运行该实用程序会更新布局。

# scripting - 强制 MEL 脚本等待，直到上一个命令完成

> ID：14993236
> 
> 赞同：0
> 
> 时间：2013-02-21T01:44:27.060
> 
> 标签：scripting, mel

我正在尝试编写一个涉及纹理烘焙操作的 Maya MEL 批处理脚本，然后是文件保存操作。这一切都放在一个for循环中。

如果逐行执行，该脚本将起作用。但是在一个循环中，正在发生的事情是，烘焙似乎花费了太长时间，因此预期生成的文件（testComp.000I.iff，其中 I 是帧＃）在文件时不存在保存操作执行。所以脚本实际上不起作用。

在尝试执行下一行之前，如何强制 Maya 等待直到上一个命令完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:16:31.900

MEL 脚本*会*一直等到前一个命令完成。

此规则的唯一例外是当 mel 脚本生成另一个 mel 命令时，如 MEL bake 命令的情况`convertLightmapSetup`。`convertLightmapSetup`在运行时产生一个调用`convertLightmap`，并且*该*调用不会阻塞。

所以你必须`convertLightmap`直接调用，你的脚本才能阻止。

# ios - 如何在 UIStoryBoard 中加载自定义视图？

> ID：14993242
> 
> 赞同：1
> 
> 时间：2013-02-21T01:45:09.890
> 
> 标签：ios, objective-c

我有兴趣编写我的自定义视图，所以我创建了以下 xib 文件：

![在此处输入图像描述](../Images/b01d6459b804375ffc7bd1d81c1c5ac7.png)

这是定义文件：

```
- (void)_baseInit {
    NSLog(@"Unseen View loaded");
    [self addSubview:[self activityIndicator]];
    [self activityIndicator].alpha = 1.0;
    [self activityIndicator].frame = CGRectMake(round(([self imageView].frame.size.width - 25) / 2),
                                                round(([self imageView].frame.size.height - 25) / 2), 25, 25);
    [self activityIndicator].hidesWhenStopped = YES;
    [self showIndicator];

    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
    [self imageView].userInteractionEnabled = YES;
    [panRecognizer setMinimumNumberOfTouches:1];
    [panRecognizer setMaximumNumberOfTouches:1];
    [panRecognizer setDelegate:self];
    [[self imageView] addGestureRecognizer:panRecognizer];

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self _baseInit];
    }
    return self;
}

- (id)initWithCoder:(NSCoder*)coder
{
    if ((self = [super initWithCoder:coder])) {
        [self _baseInit];
    }
    return self;
} 
```

我试图将它连接到我的故事板中：

![X](../Images/7c0c84682bd32bb6c2856f79ab27ad3f.png)

我让我的 MainViewController 在 vi​​ewDidLoad 期间调用它：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.unseenView = [[[NSBundle mainBundle] loadNibNamed:@"UnseenView" owner:self options:nil] objectAtIndex:0];
    self.unseenView.delegate = self; 
```

不幸的是，我的模拟器中**什么也没有显示，甚至文本标签也没有**。 ![在此处输入图像描述](../Images/e9193312af5beae4b1ed4452596dbfe5.png)

但是我看到以下日志消息：

```
2013-02-20 17:37:58.929 Giordano.iPhone[66857:c07] Unseen View loaded
2013-02-20 17:37:58.934 Giordano.iPhone[66857:c07] Unseen View loaded 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:52:17.637

看起来您正在正确准备视图，但您没有将其添加到视图层次结构中。在`viewDidLoad`您需要添加此行的代码中：

```
[self.view addSubview:unseenView]; 
```

# wix - Bundle 可以在安装期间从本地文件夹中引用 MSI 吗？

> ID：14993243
> 
> 赞同：1
> 
> 时间：2013-02-21T01:45:26.433
> 
> 标签：wix, windows-installer, bundle, burn, wix3.7

我通过链接两个 MsiPackages 创建一个 Bundle。Bundle 包含两个 MsiPackages 并创建一个捆绑的 .exe 作为安装程序。是否可以设置 Bundle 以便在安装期间从包含两个 MSI 的本地文件夹中引用 MSI（不嵌入或包含它们）？我希望从本地文件夹中引用这两个 MSI，并且仅在安装期间安装。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:01:15.127

是的。默认情况下，该`Bundle`元素的`Compressed`属性设置为`yes`。默认情况下，要让您的包外部化，请执行以下操作：

```
<Bundle Compressed='no'> 
```

您的所有包现在都将是外部的。现在，如果您只想显式压缩选择包，请将`Compressed='yes'`属性添加到所需`XxxPackage`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:22:46.873

虽然我没有这样做的实际经验，但我认为您可以尝试将[`Payload`](http://wix.sourceforge.net/manual-wix3/wix_xsd_payload.htm)元素用作[`MsiPackage`](http://wix.sourceforge.net/manual-wix3/wix_xsd_msipackage.htm)元素下元素的子[`Chain`](http://wix.sourceforge.net/manual-wix3/wix_xsd_chain.htm)元素来实现这一点。

`Payload`元素可以选择指定要捆绑为`SourceFile`或`DownloadUri`属性的 MSI。有一个选项可以说明您是否需要使用引导程序通过`Compressed`具有`YesNoDefaultType`值的属性来压缩此 MSI。通过这种方式，您可以指定您的源 MSI，而无需嵌入到我希望的包中。

# asp.net-mvc - 通过 HTTP 标头传输结果数据？- ASP.NET MVC

> ID：14993248
> 
> 赞同：0
> 
> 时间：2013-02-21T01:46:13.370
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-ajax

我正在尝试在不刷新页面的情况下上传文件。

为了防止刷新，我得到了 1 个表单、1 个提交、1 个文件输入和 1 个 iframe。

表单通过 iframe 发送数据，所以我的表单具有目标属性。

在我的 c# 函数工作之后，我想返回结果数据，例如 message、issuccess 等。

我不知道如何在不使用 http 标头的情况下返回结果数据。

也许它也不可能使用 http 标头。我不知道。我是来学习如何做的。

通过 http 标头传输结果数据有意义吗？这是更可取的方式吗？

是否出现漏洞？

还有其他建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:00:17.103

通常，如果没有表单发布，很难通过网络获取文件。我经常做的是将不可见的 iframe 用于表单发布，然后让 iframe 在加载时调用父页面中的函数。这假设您不能只使用 jquery 或最新版本的 dojo 来为您处理这个问题。

[http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/](http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/)

如果你可以使用jquery，那就更好了。编辑：这是在 mit 许可证下 [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:16:00.333

为什么不利用 HTML5 File API。这些链接应该为您指明正确的方向。

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

[http://timothypoon.com/blog/2011/05/10/ajax-uploading-with-html5s-file-api/](http://timothypoon.com/blog/2011/05/10/ajax-uploading-with-html5s-file-api/)

# php - 数组没有被函数看到..存储在变量中是不是？

> ID：14993251
> 
> 赞同：0
> 
> 时间：2013-02-21T01:46:53.833
> 
> 标签：php, variables, scope

我用谷歌搜索并没有看到答案。我有一个数组，我存储在一个变量中，我试图传递给一个函数..

```
$myArr = 'array('item1', 'item2')';

require('script.php'); //where actual function is

makeCode($myArr); 
```

当我使用 makeCode(array('item1', 'item2')); 它工作正常.. 我什至尝试添加`global $myArr`到`makeCode`，但这也没有用。

我认为这是一个范围问题，但也许我在滥用字符串。print_r($myArr) 打印正确，只是没有通过或其他什么。

该函数基本上只是比较 $myArr 值，如果它与函数数组中的内容匹配，它会输出正确的 HTML，所以我没有列出它。它有效，只是不是变量.. 谢谢！

```
--makeCode()--
 function makeCode($listArr){
 /* global $myArr; //Tried this */
   $output = '';
   $items = array(
      'item1'        =>  "Code for item1",
      'item2'         =>  "Code for item2"
       )
   /* $myArr = $listArr; //tried this too */
        foreach ($listArr as $val) {
            if(array_key_exists($val, $items)){
                if(strlen($output)>0) $output .="|"; //Add Sytnax
                $output .="$items[$val]";
            }
        }
  } 
```

差不多就是这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:49:44.413

```
$myArr = 'array('item1', 'item2')'; 
```

$myArr 在这里是一个字符串。我不确定这就是你的意思。尝试：

```
$myArr = array('item1', 'item2'); 
```

如果这是你的意思，那么这将与调用不同

```
makeCode(array('item1', 'item2')); 
```

因为这是使用实际数组调用。

# database - 关于创建具有函数依赖关系的最小闭包的几个问题

> ID：14993252
> 
> 赞同：1
> 
> 时间：2013-02-21T01:47:04.020
> 
> 标签：database, functional-dependencies

所以我有以下功能依赖：

```
S -> T
V -> SC
SD -> P
SD -> V 
```

现在我想做的是分离出 FD，这样它们的右侧只有一个元素：

```
S -> T
V -> C
V -> S
SD -> P
SD -> V 
```

接下来我会在左边找到每个元素的闭包：

```
S+ = S, T
V+ = V, C, S, T
SD+ = P, V, C, S, T 
```

现在我感到困惑的部分是我将如何减少冗余并获得最小的关闭？我可以用这些信息摆脱哪些？

# android - 为什么我的应用程序在打开后立即崩溃？

> ID：14993263
> 
> 赞同：0
> 
> 时间：2013-02-21T01:48:16.800
> 
> 标签：android

我正在创建一个 2 玩家反应应用程序，试图学习一些关于 Java/Android 的新东西（如线程），并意识到每当我尝试打开应用程序时，它都会立即黑屏说“你的应用程序很臭哈哈哈它没有响应”（或类似的东西），即使我几乎没有编写任何代码。

我的 MainActivity 类：

```
public class MainActivity extends Activity implements View.OnClickListener {

Button player1, player2;
Random random;
Double color;
Thread timer;
long x, elapsed;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initializeVar();
    game();
}

private void game() {
    color = random.nextDouble();
    x = System.currentTimeMillis();
}

private void initializeVar() {
    Button player1 = (Button) findViewById(R.id.bPlayer1);
    Button player2 = (Button) findViewById(R.id.bPlayer2);
    player1.setOnClickListener(this);
    player2.setOnClickListener(this);
    player1.getBackground().setColorFilter(0xFFFF0000,
            PorterDuff.Mode.MULTIPLY);
    player2.getBackground().setColorFilter(0xFFFF0000,
            PorterDuff.Mode.MULTIPLY);
}

@Override
public void onClick(View v) {
    switch (v.getId()) {

    case R.id.bPlayer1:
        elapsed = System.currentTimeMillis();
        elapsed = elapsed - x;
        if (elapsed < 10) {
        } else {
        }
        break;

    case R.id.bPlayer2:
        elapsed = System.currentTimeMillis();
        elapsed = elapsed - x;
        if (elapsed < 10) {

        } else {

        }
        break;
    }
}

} 
```

活动 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/bPlayer1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="100dp"
    android:src="@drawable/ic_launcher" />

<Button
    android:id="@+id/bPlayer2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="100dp"
    android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.meteorfiber.reaction"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name="com.meteorfiber.reaction.MainActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

我的日志：

```
02-20 20:27:54.803: E/AndroidRuntime(1747): FATAL EXCEPTION: main
02-20 20:27:54.803: E/AndroidRuntime(1747): java.lang.RuntimeException: Unable to start       activity ComponentInfo{com.meteorfiber.reaction/com.meteorfiber.reaction.MainActivity}: java.lang.NullPointerException
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.os.Looper.loop(Looper.java:137)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at java.lang.reflect.Method.invoke(Method.java:511)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at dalvik.system.NativeStart.main(Native Method)
02-20 20:27:54.803: E/AndroidRuntime(1747): Caused by: java.lang.NullPointerException
02-20 20:27:54.803: E/AndroidRuntime(1747):     at com.meteorfiber.reaction.MainActivity.game(MainActivity.java:28)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at com.meteorfiber.reaction.MainActivity.onCreate(MainActivity.java:24)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.app.Activity.performCreate(Activity.java:4465)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-20 20:27:54.803: E/AndroidRuntime(1747):     at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:55:56.187

`random`对象是`null`。初始化它！

```
private void initializeVar() 
{

    random = new Random(); // HERE!
    Button player1 = (Button) findViewById(R.id.bPlayer1);
    Button player2 = (Button) findViewById(R.id.bPlayer2);
    player1.setOnClickListener(this);
    player2.setOnClickListener(this);
    player1.getBackground().setColorFilter(0xFFFF0000,
            PorterDuff.Mode.MULTIPLY);
    player2.getBackground().setColorFilter(0xFFFF0000,
            PorterDuff.Mode.MULTIPLY);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:56:23.927

看起来您没有在使用变量“随机”之前对其进行初始化。

```
Random random = new Random(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:58:45.967

你应该初始化随机对象

`Random random = new Random;`

# objective-c - 找不到 XXX 的协议定义

> ID：14993265
> 
> 赞同：13
> 
> 时间：2013-02-21T01:48:28.237
> 
> 标签：objective-c, protocols

我先声明了一个协议，然后使用它。但我收到警告“找不到 LeveyPopListViewDelegate 的协议定义”。这是代码：

```
@protocol LeveyPopListViewDelegate;

@interface LeveyPopListView : UIView <LeveyPopListViewDelegate,UITableViewDataSource,   UITableViewDelegate,UITextFieldDelegate>

//the content of LeveyPopListView

@end

@protocol LeveyPopListViewDelegate <NSObject>
//the definition for LeveyPopListViewDelegate
@end 
```

如果我`LeveyPopListViewDelegate`首先定义，我不能`LeveyPopListView`在协议中使用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-04-25T21:41:48.580

我最终抑制了该特定行的所有警告，这并不理想但效果很好。

```
// Forward-declare protocols (to avoid circular inclusion)
@protocol YourProtocol;
#pragma clang diagnostic push
// To get rid of 'No protocol definition found' warnings which are not accurate
#pragma clang diagnostic ignored "-Weverything" 

@interface YourClass: NSObject
// <YourProtocol>
#pragma clang diagnostic pop 
```

确保您执行 push & pop，否则您最终会忽略此文件的所有警告！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T16:39:29.153

如果您遵循了这篇文章中的好建议，但仍然遇到问题，请尝试进行清洁。我在它上面挠了一阵子，然后清理解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T01:57:08.170

我总是这样做：

```
@class LeveyPopListView;

@protocol LeveyPopListViewDelegate <NSObject>
//the definition for LeveyPopListViewDelegate
@end

@interface LeveyPopListView : UIView <LeveyPopListViewDelegate,UITableViewDataSource,   UITableViewDelegate,UITextFieldDelegate>

//the content of LeveyPopListView

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-20T08:54:40.523

此外，如果您在不同的文件中声明和定义协议，则必须使用`#import`该文件，在这种情况下，前向声明将无济于事。

顺便提一句。永远不要像某些答案所暗示的那样抑制警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-05T13:50:07.687

在协议定义中使用具体的类名是不寻常的。您应该做的（大多数情况下，可能会出现异常……尽管它们很臭）是使您的类符合协议，并在委托协议定义中使用该类。

一个类需要成为它自己的代表也是一种不好的气味。我会仔细修改设计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-06T18:31:57.487

当我将`Swift`协议导入`Objective C`课堂时，这发生在我身上。对我有帮助的是将`*-Swift.h`文件添加到`Objective C`类文件中：

```
#import "MyApp-Swift.h" 
```

并将协议声明为`@objc`：

```
@objc protocol VerificationGate 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-21T01:58:52.293

您必须先定义协议。尝试如下

```
@protocol LeveyPopListViewDelegate <NSObject>
//the definition for LeveyPopListViewDelegate
@end

@interface LeveyPopListView : UIView <LeveyPopListViewDelegate,UITableViewDataSource,   UITableViewDelegate,UITextFieldDelegate>

//the content of LeveyPopListView

@end 
```

# c# - 文件打开时 Excel 导入数据集中断

> ID：14993267
> 
> 赞同：2
> 
> 时间：2013-02-21T01:48:45.320
> 
> 标签：c#, excel, io, stream, import-from-excel

我有一个用于导入 excel 文件的服务，实现如下所示：

```
[Attributes.ImportFileExtension(Extension=".xls")]
[Attributes.ImportFileExtension(Extension=".xlt")]
[Attributes.ImportFileExtension(Extension=".xlsx")]
public class ExcelImportService:FileImportServiceBase,IFileImportService
{
    public DataSet Import(System.IO.Stream fileStream)
    {
        IExcelDataReader excelReader = null;
        switch (Extension)
        {
            case ".xls":
            case ".xlt":
                excelReader = ExcelReaderFactory.CreateBinaryReader(fileStream);
                break;
            case ".xlsx":
                excelReader = ExcelReaderFactory.CreateOpenXmlReader(fileStream);
                break;
        }
        excelReader.IsFirstRowAsColumnNames = true;
        DataSet dataSet = excelReader.AsDataSet();
        return dataSet;
    }
} 
```

此外，我有以下代码通过正在创建的工厂调用此服务。调用该服务的代码如下所示：

```
 try
        {
            var extension = Path.GetExtension(dialog.FileName);
            var importService = FileImportServiceFactory.Create(extension);
            var stream = dialog.OpenFile();
            var data = importService.Import(stream);
            stream.Close();
            stream.Dispose();

            var result = new FileImportedMessage { Data = data };
            result.Dispatch();
        }
        catch (Exception e)
        {
            MessageDispatcher.Dispatch(new ExceptionMessage(e));
        } 
```

除非文件在导入时打开，否则导入工作会找到。

我有两个问题：

1）处理这种情况的最佳实践/策略是什么？

2）我该怎么做，或者我应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:19:05.197

问题是您以只读模式打开文件，而当加法器程序以读写模式打开它时，它会锁定文件。

你只有两个选择。

1-贪婪的方式以读写模式打开文件，仅为您的程序锁定它。

2-（仅当文件不大时）将完整文件读取到内存流并从那里处理。

# c++ - Lotus Notes C++ API 按 UNID 获取文档

> ID：14993268
> 
> 赞同：0
> 
> 时间：2013-02-21T01:48:49.943
> 
> 标签：c++, lotus-notes, lotus-domino, lotus

我开始使用 Lotus Notes C++ API。我正在尝试获取基于 UNID 的文档。我知道一个特定的 UNID，但我不知道如何将其写入`UNIVERSALNOTEID`.

我正在使用 Lotus Notes 8.5.2、C++ API 8.0.2、Windows 7 64 位、Visual Studio 2008、C++（托管）。

我能够打开一个数据库。

```
 ....
 //Get and open a database.
 LNDatabase   SrcDb;
 Session.GetDatabase( c, &SrcDb, chrServer );
 SrcDb.Open(); 
```

然后我尝试获取文件。

```
 LNDocument ld;
 const UNIVERSALNOTEID u = "00000000000000000000000000000000";
 SrcDb.GetDocument(&u, &ld); 
```

在编译时，我收到错误

```
error C2440: 'initializing' : cannot convert from 'const char [33]' to 'const  
UNIVERSALNOTEID' 
```

在这里我需要学习正确的传递`u`方式`GetDocument`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:30:44.650

LNDatabase::GetDocument 采用 UNID* 参数，而不是 UNIVERSALNOTEID*。

要获取 UNID，请使用 LNUniversalID 类。有一个接受字符串参数的构造函数和一个返回指向 UNID 的指针的 GetUniversalID 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:37:42.427

@Richard Schwartz 提供了创建以下代码所需的有用信息：

```
//Declare document
LNDocument ld;

//Assign to string, convert to const char *, convert to LNString;
std::string strUNID = "F33DD4EA2E8FD32888257B0A0061C063";
const char * chrUNID = strUNID.c_str();
const LNString * lnstrUNID = new LNString(chrUNID);

//Get UNID *
LNUniversalID * lnUNID = new LNUniversalID(*lnstrUNID);
const UNIVERSALNOTEID * unidUNID = lnUNID->GetUniversalID();

//Get document.
LNSTATUS lsGetDocument;
NOTEID ln;
try
{
    lsGetDocument = SrcDb.GetDocument(unidUNID, &ld);
    LNSTATUS lsStatus = ld.Open();
    ln = ld.GetNoteID();
    Console::Write("NOTEID: ");
    Console::WriteLine(ln.ToString());
}
catch (System::Exception ^e)
{
    String^ eMessage = e->Message;
    Console::WriteLine(eMessage);
} 
```

# magento - 如何在 Magento 电子邮件模板中获取条形码

> ID：14993278
> 
> 赞同：0
> 
> 时间：2013-02-21T01:50:33.590
> 
> 标签：magento, barcode

作为 ShipWorks+UPS 集成的一部分，我的运输过程包括在 UPS 中输入订单号。是否有任何实际工作的条形码扩展？我已经尝试过使用 CSS 表格样式的那些，但那些从未出现在电子邮件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:50:33.590

我在网上搜索我最近遇到的所有其他问题时发现了这一点。

Zend 有一个内置的条形码生成类，`Zend_Barcode`. 然后谷歌搜索 php 图像输出，我把我上传到的这个小脚本放在一起`var/export/_barcode.php`：

```
<?php
require_once '../../app/Mage.php';
umask(0);
Mage::app();
Mage::app()->loadArea(Mage_Core_Model_App_Area::AREA_FRONTEND);
if( isset($_GET['ord']) && strlen($_GET['ord']) > 5 ) {
    header('Content-Type: image/jpeg');
    $barcodeOptions = array('text' => $_GET['ord']); 
    $rendererOptions = array(); 
    // Draw the barcode in a new image, 
    $imageResource = Zend_Barcode::draw( 
        'code39', 'image', $barcodeOptions, $rendererOptions 
    ); 
    imagejpeg($imageResource);

} else { echo "<pre><b>Error:</b> required input not found\n"; }
?> 
```

如果您使用标准 GET 访问此脚本的 URL，您将获得一个可扫描的条形码。所以把它放在你的交易电子邮件模板中：

```
<img src="http://yourmagentowebsite.com/var/export/_barcode.php?ord={{var order.increment_id}}" 
    alt="{{var order.increment_id}}" 
    style="margin-bottom:10px;" 
    border="0"/> 
```

这很容易，而且很简单。当与 Magmagician_Adminorderemail 之类的东西结合使用时，您可以使您在内部用于处理订单的模板比您发送给客户的默认订单通知更加紧凑和有用。

由于我们的发票是简单的数字，`code39`所以可以。如果您尝试发送空格或小写字母，请小心，因为代码 3 of 9 非常严格。我没有研究`Zend_Barcode`课堂上的其他选择。

# java - 如何保持文件打开以供阅读

> ID：14993280
> 
> 赞同：2
> 
> 时间：2013-02-21T01:50:35.873
> 
> 标签：java

我希望能够在以后的任何时间打开一个（非常大的）文件并从任意点读取数据，而无需将整个内容保存在内存中。

这可能吗？

我想打开一个文件的句柄，没有其他东西可以读取/写入这个文件，并且能够在稍后从任何给定的偏移量和长度中获取数据，而无需再次在磁盘中搜索文件。

我以为会有某种

```
1, open handle to file
2, create reader
3, skip reader to X
4, read for Y
5, reset reader to 0
6, return to step 3 
```

起初它似乎`BufferedReader.mark`是我所追求的，但文档建议如果我`mark, skip, read, reset`从我标记的地方到我跳过的地方的内容，会被保存在内存中吗？

从文档中，

> 在保留标记的同时限制可以读取的字符数。在读取达到此限制或超过此限制的字符后尝试重置流可能会失败。大于输入缓冲区大小的限制值将导致分配一个大小不小于限制的新缓冲区。因此，应谨慎使用较大的值。

它说“读”，所以也许如果我跳过，它不计入这个限制（这是有道理的），但我可能读了很多，所以看起来这个新分配的输入缓冲区可能会变得非常大。我不希望这样的事情发生...

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T01:53:03.250

您可能正在寻找[`RandomAccessFile`](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)课程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:53:28.957

另外一个选项

如果您使用的是 Java 7，它包括一个新的 ByteChannel [`SeekableByteChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SeekableByteChannel.html)，. 此 Channel 保持当前位置，因此您可以从该位置读取和写入。这允许随机访问位置。

> SeekableByteChannel - **SeekableByteChannel**扩展了 ByteChannel 并允许维护和修改它所连接的底层实体上的当前位置。如果允许，它具有获取基础实体大小或将其截断为给定大小的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:37:07.717

RandomAccessFile.seek(long position) 和 FileChannel.position(long position) 可以设置它们读取/写入数据的文件位置。

# c - qsort 没有对字符串数组进行排序

> ID：14993282
> 
> 赞同：2
> 
> 时间：2013-02-21T01:50:39.370
> 
> 标签：c

我尝试使用 qsort 对字符串数组进行排序。这是我的数组的内容：

```
{"a","orange","apple","mobile","car"} 
```

这就是我使用 qsort 的方式：

```
int myCompare (const void * a, const void * b ) {
  const char *pa = (const char*)a;
  const char *pb = (const char*)b;
  return strcmp(pa,pb);
}

int stringLen = sizeof(input)/sizeof(char *);
qsort(input, stringLen, sizeof (char*), myCompare); 
```

但是，当我打印数组时，什么都没有改变。这有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T02:17:47.190

我已将您的 myCompare 函数更改为 Mitch Wheat 之前发布的函数，并且可以正常工作。这是示例：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

int myCompare (const void * a, const void * b ) {
    const char *pa = *(const char**)a;
    const char *pb = *(const char**)b;

    return strcmp(pa,pb);
}

int main() {
    int i;
    const char *input[] = {"a","orange","apple","mobile","car"};

    int stringLen = sizeof(input) / sizeof(char *);
    qsort(input, stringLen, sizeof(char *), myCompare);

    for (i=0; i<stringLen; ++i)
        printf("%d: %s\n", i, input[i]);
} 
```

这将返回：

```
0: a
1: apple
2: car
3: mobile
4: orange 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-24T09:57:41.590

`qsort(input, stringLen, sizeof (char*), myCompare)` calls `myCompare` to compare strings which are sorted.

`myCompare` gets **pointers to compared values**. In our case we get pointers to strings (`const char**`). So we should compare `*(const char**)a` and `*(const char**)b`, which are strings pointed by `a` and `b`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T02:05:36.043

开始调试：

```
int myCompare (const void * a, const void * b ) {
  const char *pa = (const char*)a;
  const char *pb = (const char*)b;

  printf("Comparing %s vs. %s for result %d\n", pa, pb, strcmp(pa,pb));

  return strcmp(pa,pb);
} 
```

我想不久之后，你就会发现问题所在。:)

# c# - 如何在 asp.net MVC 4 中链接活页夹？

> ID：14993283
> 
> 赞同：1
> 
> 时间：2013-02-21T01:50:46.577
> 
> 标签：c#, asp.net, asp.net-mvc-4, defaultmodelbinder, custom-model-binder

我刚刚在 asp.net MVC 中编写了我的第一个模型绑定器。我从一个纯 HTML 表单开始，其中所有输入的名称都以“fm_”为前缀。

```
public class HuggiesModel
{
    public string fm_firstname { get; set; }
    public DateTime fm_duedate { get; set; }
} 
```

默认的活页夹工作得很好，我认为这是一个很好的节省时间的方法。

然后我决定我想要更简洁的属性名称，所以我改为：

```
[ModelBinder(typeof(HuggiesModelBinder))]
public class HuggiesModel
{
    public string FirstName { get; set; }
    public DateTime? DueDate { get; set; }
} 
```

和模型粘合剂：

```
public class HuggiesModelBinder : IModelBinder
{
    private HttpRequestBase request;

    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        if (bindingContext == null)
            throw new ArgumentNullException("bindingContext");

        this.request = controllerContext.HttpContext.Request;

        var model = new HuggiesModel
        {
            FirstName = GetQueryStringValue("fm_firstname"),
        };

        string dateTimeString = GetQueryStringValue("fm_duedate");
        model.DueDate = string.IsNullOrWhiteSpace(dateTimeString) 
                                    ? default(DateTime?) 
                                    : DateTime.Parse(dateTimeString);

        return model;
    }

    private string GetQueryStringValue(string key)
    {
        if (this.request.HttpMethod.ToUpper() == "POST")
            return this.request.Form[key];
        return this.request.QueryString[key];
    }
} 
```

有没有一种方法可以实现这一点，这样我就不必解析 DateTime 并让默认活页夹为我做这件事？

**备注**：

我意识到我可以更改表单输入名称以匹配我想要的模型名称，但我故意没有这样做以获得编写模型活页夹的经验，这导致了我这个问题。

问题的标题基于我正在尝试做的概念性想法 - 创建一个看起来像这样的链：

```
request
  -> default model binder binds get/post data to first view model
         -> my model binder binds first view model to second view model
               -> controller action method is called with second view model 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:34:23.213

您可以扩展 DefaultModelBinder 而不是实现 IModelBinder。

这是一个示例

```
 public class HuggiesModelBinder:DefaultModelBinder
    {
        protected override void BindProperty( ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor )
        {
            if (propertyDescriptor.PropertyType == typeof(DateTime))
            {

                base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
            }
            // bind the rest of the properties here
        }
    } 
```

但是，如果我们考虑一个更现实的场景，即您的 HuggiesModel 由复杂类型和简单类型组成（就像您现在拥有的那样），您将使用带有简单类型的默认模型绑定（连同命名约定 - 即具有 FirstName 属性fm_firstname)。对于复杂类型，您将为每种类型实现一个自定义模型绑定器。您不一定需要 1 个用于“HuggiesModel”的大型自定义模型绑定器。

# c - 在 C 扩展中分配的 Ruby 对象可以随时获得吗？

> ID：14993287
> 
> 赞同：2
> 
> 时间：2013-02-21T01:50:59.430
> 
> 标签：c, ruby

所以这可能是一个愚蠢的问题，但我不确定 Ruby 扩展的确切 GC 行为。例如，如果我调用`rb_hash_new`一个 C 函数，然后在将值返回给 Ruby 代码之前开始对其进行一些处理，那么逻辑是否会在中途中断并且 Ruby 哈希被 GC 回收？下面的示例代码。

```
VALUE my_function(VALUE rb_self) {
    VALUE hash = rb_hash_new();
    // Do some stuff with hash
    return hash;
} 
```

上面示例中的哈希是否可以在返回之前被释放？如果是这样，那么防止这种情况的唯一方法是确保所有分配的 Ruby 对象都被传递给的函数标记`Data_Wrap_Struct`，即使它们只是暂时使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:56:35.323

是的，如果在该块中创建其他 Ruby 对象，GC 可能会在“ *Do some stuff with hash ”期间运行，例如。*通过`rb_str_new`, `rb_ary_new`, 或者如果您使用 ruby​​ 内存分配函数。

要将对象标记为垃圾收集器的“忙碌”，请使用：

```
rb_gc_register_address(VALUE *var); 
```

要从“忙碌”对象列表中删除对象，请使用：

```
rb_gc_unregister_address(VALUE *var); 
```

# c# - 无法将 ViewModel 中的属性与表单元素绑定

> ID：14993291
> 
> 赞同：0
> 
> 时间：2013-02-21T01:51:28.480
> 
> 标签：c#, asp.net-mvc, binding, viewmodel

我有一个表格，如下：

![在此处输入图像描述](../Images/416b319b378455e3e6123f0d8fcdc905.png)

您看到的填充列表可能会有所不同，具体取决于用户在前一个屏幕中选择的“胶囊大小”。换句话说，如果用户在前一个屏幕中选择“胶囊 0”并单击提交，则此屏幕将显示该胶囊的填充物列表。这一切都很完美。我需要做的是捕获在此表格上选择的填充物。当用户在此表单上单击“创建”时，代码将调用“进程”控制器中的“GetResults”方法：

```
public ActionResult GetResults(ProcessViewModel vm)
{
    List<Results> results = context.GetResults();
    return View(results);
} 
```

这是我的 ViewModel，这个特定的 View 正在运行：

```
public class ProcessViewModel
{
    public audit_session AuditSession { get; set; }

    public int NumberOfCapsules { get; set; }

    public int CapsuleFK { get; set; }

    public audit_ingredient_active Active1 { get; set; }
    public audit_ingredient_active Active2 { get; set; }
    public audit_ingredient_active Active3 { get; set; }
    public audit_ingredient_active Active4 { get; set; }
    public audit_ingredient_active Active5 { get; set; }
    public audit_ingredient_active KeyActive { get; set; }

    public audit_ingredient_filler Filler { get; set; }

    public bool E4M { get; set; }
    public bool K100M { get; set; }

    public List<filler> Fillers { get; set; }
} 
```

我想要做的是捕获选择的填充物并以某种方式将其绑定到我的 ViewModel 中的填充物。我怎样才能做到这一点？其他所有内容都正确绑定（E4M、K100M 以及表单上您看不到的所有其他字段）。

这是我的填充列表的标记的样子——**我怀疑这里有问题，因为我对这个标记不是 100% 有信心**：

```
 <label>Choose Filler:</label><br />
    <fieldset data-role="controlgroup">
        @foreach (var i in Model.Fillers)
        {
            @Html.RadioButtonFor(x => x.Filler, "false", new { name = "radio-choice", id = i.pk });
            <label for="@i.pk">@i.name</label>
        }
    </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:37:39.373

因为您要覆盖单选按钮名称，所以也许您可以尝试`Filler`手动绑定属性，而不是依赖默认的模型绑定器。

您可能需要`string radio_choice`在控制器签名中添加一个额外的参数（或直接使用 捕获它`Request.Form["radio-choice"]`），并将它们分配`Filler`给`vm`.

# sql - 在 SQL 中模拟 EXISTS 的行为

> ID：14993298
> 
> 赞同：0
> 
> 时间：2013-02-21T01:52:18.980
> 
> 标签：sql

我有一个表 Calculators，我想创建一个返回布尔结果的 SQL 查询，当且仅当 Calculators 不为空时为 true，因此我可以将此布尔值返回给我的应用程序并订购更多。

自然的事情是使用

```
EXISTS Calculators 
```

但是对于我的任务，我不允许在任何查询中使用 EXISTS 关键字或 COUNT 关键字（或任何其他基数运算符）。

到目前为止，我在查询中执行此操作的最佳尝试是

```
((SELECT * FROM Calculators) IN ANY (SELECT * FROM Calculators)) 
```

但这只是给出了一个我无法弄清楚的语法错误。

我又做了一次尝试：

```
((SELECT * FROM Calculators) IN Calculators) 
```

但这也给出了语法错误？我真的认为这可以通过某种方式使用 IN 来完成，但我不能完全形成查询。如果 Calculators 不为空，您能帮我从查询中获取一个返回 true 的布尔值吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:01:14.143

我对你的问题感到困惑。如果您的表不为空，您想返回一个布尔结果吗？如果是这样，这样的事情应该可以工作：

```
SELECT DISTINCT 'True' RetVal FROM Calculators 
```

[示例 SQL 小提琴](http://sqlfiddle.com/#!2/000c2/1)

如果存在任何记录，这将返回一个布尔 True 值。如果不存在记录，它不会返回任何内容。不要认为您可以在不使用`COUNT`或其他聚合的情况下返回 false。可能取决于您的 RDBMS。

- 编辑 -

看到您使用的是 Oracle，这里有一个返回 true 或 false 的技巧：

```
SELECT DISTINCT 'True' RetVal
FROM Calculators
UNION 
SELECT 'False' FROM DUAL d
LEFT JOIN Calculators c ON 1=1
WHERE CalculatorId IS NULL 
```

还有更多的[小提琴](http://sqlfiddle.com/#!4/d5927/1)。

# perl - END 块中的 local($?) - 为什么分配给它的值很重要？

> ID：14993301
> 
> 赞同：4
> 
> 时间：2013-02-21T01:52:26.843
> 
> 标签：perl, subroutine

在工作中，我们在对象的析构函数中与子进程交互时遇到了错误，最终追查到$? 在等待调用期间被覆盖的变量。这发生在调用 exit() 之后，所以 $? 另外意味着我们的程序返回给操作系统的代码。

具体来说，perldoc 谈到了这种错误：

> 在 END 子例程 $? 包含将要提供给 exit() 的值。你可以修改 $? 在 END 子例程中更改程序的退出状态。

我们不希望这种情况发生，所以我们`local $?=$?;`在每个 END 块中放置一个内部。但是现在这些程序将成功返回给操作系统，而实际上在给定任务中失败了。

我设法将其分解为两个示例程序。一种按预期工作，另一种失败。这发生在 x86_64-linux-thread-multi 的 v5.8.8 和 v5.10.1 上

程序A：（返回0给操作系统）

```
END{ local $?=$?; }
exit(100); 
```

程序B：（返回100给操作系统）

```
END{ local $?=$?>>8; }
exit(100); 
```

为什么分配给`local $?`最后块的值很重要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T02:00:31.587

看起来像 perl 中的错误。`$?`显然in的自我分配`local`被破坏了：

```
% perl -wle '$? = 123; print "before: $?"; local $? = $?; print "after: $?"'    
before: 123
after: 0 
```

但这个版本工作正常：

```
% perl -wle '$? = 123; print "before: $?"; local $? = $? + 0; print "after: $?"'
before: 123
after: 123 
```

很奇怪。

已[提交](https://rt.perl.org/rt3/Ticket/Display.html?id=116891)错误报告。

# html - HTML数字输入删除小数点？

> ID：14993302
> 
> 赞同：6
> 
> 时间：2013-02-21T01:52:30.897
> 
> 标签：html, input, point

我在表单上输入的数字有问题。当我输入一个数字，比如 88.2 并提交时，没有问题。但是当这个其他人做同样的事情时，如果你从数字输入中回显变量，你可以在 php 代码中看到它已经删除了小数点 ( `.`)。

当他使用逗号时，它不会删除他的小数点，但是，当我使用逗号时，它会为我删除它。有什么办法可以解决这个问题，让它只接受“。” 作为小数点？

这是输入：

```
<input id="version" name="version" step="0.1" min="1.0" max="250.0" type="number" class="input-small" placeholder="87.2"></input> 
```

PHP 代码中没有什么不寻常的地方，只有

```
echo $_POST['version']; 
```

**`input-small css`**：

```
.input-small {
  width: 90px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-26T21:46:53.300

type='number' step='any' 可以解决这个问题。

[http://dev.w3.org/html5/markup/input.number.html](http://dev.w3.org/html5/markup/input.number.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T06:26:47.420

[对 的支持`<input type=number>`](http://caniuse.com/#feat=input-number)仍然非常有限、不完整且有缺陷。

例如，在 IE 10 和 Firefox 19 上不支持。在它们上，元素回退到`<input type=text>`元素，这意味着任何字符串都被接受为输入并按原样传递给服务器，无需检查。

在支持它的浏览器（例如 Chrome）上，行为会有所不同，并且预计会有所不同，因为 HTML5 CR[定义](http://www.w3.org/TR/html5/forms.html#number-state-%28type=number%29)故意将其保持打开状态：浏览器需要以某种方式提供用于数字输入的小部件，并保证数据最终发送到根据元素的属性（在给定范围内等），服务器是正确的。

实际上，实现取决于*浏览器的语言环境*，作为作者，您无法控制它。这意味着浏览器可能接受 88.2，或者它可能接受 88,2（并在内部将其转换为 88.2），或者它可能同时接受两者，或者原则上它可能只接受象形文字中的输入（并在内部将其转换为规范形式）。它甚至可能会解析用户输入，以便丢弃任何额外的字符，这意味着当逗号是小数点分隔符时，88FOO 和 88.2 可能会被截断为 88。

在您的情况下会发生什么很难决定，因为尚未描述浏览器和平台，并且不清楚服务器会得到什么。但重要的是，`<input type=number>`根本不能依赖它。它可以在受控环境中使用，每个人在同一操作系统中使用同一版本的同一浏览器，包括语言版本和区域设置。否则，`<input type=text>`用于数字输入并在服务器端解析输入并可选择在客户端预先检查它，并确保告知用户预期的输入格式（例如十进制逗号与小数点）。

# php - 两个指定时间之间的差异与未知时间的数据快照

> ID：14993308
> 
> 赞同：0
> 
> 时间：2013-02-21T01:53:36.183
> 
> 标签：php, mysql

我希望能够在表格中最接近提供的日期的两行之间进行更改。表中的行存储该特定时间的数据，而不是前一个快照的增量。

我希望能够为查询提供两个可能不包含在表中的日期，并获得该日期范围内两个最近时间段的计数差异。

这是一个简单的表格示例：

```
objectID    snapshotTime            dataCount
1           2013-01-01 13:00:00     40
1           2013-01-02 18:00:00     51
1           2013-01-02 19:00:00     59
1           2013-01-03 01:00:00     70
1           2013-01-04 14:00:00     82
1           2013-01-05 17:00:00     99
1           2013-01-06 20:00:00     107 
```

给定日期`2013-01-01 20:00:00`和`2013-01-06 12:00:00`，查询应返回 48 (99-51)。

我怎样才能编写这样一个可以有效运行的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:59:55.490

尝试两个查询，每个查询都使用 WHERE 将时间保持在给定的约束下，并使用 ASC 确保获得下一条记录。如果您愿意，请使用 LIMIT 1，但没有任何区别。然后使用 PHP 抓取每条记录并减去差异。

# asp.net - 什么是 SNIReadSyncOverAsync，为什么需要很长时间才能完成？

> ID：14993309
> 
> 赞同：30
> 
> 时间：2013-02-21T01:53:47.063
> 
> 标签：asp.net, sql-server

在我们的 ASP.Net 网站上，我们遇到了一些请求超时。AppDynamics 显示 SQL 过程调用在几秒钟内返回，但我们在 SNIReadSyncOverAsync 中花费了 100 多秒。

有谁知道这种方法是/做什么以及为什么要花那么多时间？我们没有使用我能够找到的每个问题/帖子中都引用的 EF。

提前致谢

**更新**

已经有一段时间了，虽然我们从未就为什么所有时间都花在 SNIReadSyncOverAsync 上达成一致，但我有一些想法。

我认为在这种情况下，可能是特定版本的 AppDynamics 报告了在 SQL 调用上花费的时间的方式，但我没有真实的数据来支持它，这只是我观察到的猜测。我们最终不再看到报告为 SNIReadSyncOverAsync 所花费的时间，而是转向查询本身超时。

这仍然没有多大意义，因为相同的查询会立即在 SSMS 中的同一数据库上运行。

最终答案最终与 ARITHABORT 相关，导致我们的应用程序和 SSMS 使用两个不同的执行计划（请参阅[https://dba.stackexchange.com/a/9841](https://dba.stackexchange.com/a/9841)），解释了为什么我们无法使用 SSMS 重现超时。

一旦我们解决了这个问题，我们就能够确定需要调整的过程的几个部分，并且我们没有遇到无法解释的超时或 SNIReadSyncOverAsync 自那以后。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-14T12:33:59.397

不确定您是否已经解决了这个问题，但是：SNI 是 SQL Server 网络接口，并且上述方法存在于大多数等待来自 SQL Server 数据的 ADO.NET 完整调用堆栈中。这与更高级别的实现是 EF、原始 ADO.NET 还是其他无关。

我不确定 AppDynamics 使用哪个指标或信号来捕获存储过程执行的完成，但是如果您的存储过程完成相对较快，您可能会看到这种行为，但是将查询结果从服务器传输到客户端需要一会儿。

如果不了解您的基础架构的更多信息，就很难进一步提供帮助。如果问题仍然存在，我建议在 SQL Server Management Studio 中运行相同的查询，同时打开 SET STATISTICS TIME 并打开“包括客户端统计信息”。也许这些数字会让您了解数据传输是否真的是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-03T13:12:58.083

就我而言，正如 Jouni 所提到的，查询结果的传输速度确实很慢。我使用 Automapper 准备发送给客户端的数据。因此，目前尚不清楚究竟是什么属性导致了负载，但要确保我已经删除了所有不需要在客户端显示的复合属性。（我最初需要一个集合在客户端的网格中显示。）执行变得非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T16:08:53.663

我遇到过类似的问题——事实证明，如果你从大选择中提前中断，SqlDataReader.Dispose 可能会卡住很长时间。

见：[https ://github.com/dotnet/corefx/issues/29181](https://github.com/dotnet/corefx/issues/29181)

# openerp - openerp中编辑文件的方式

> ID：14993310
> 
> 赞同：1
> 
> 时间：2013-02-21T01:54:13.770
> 
> 标签：openerp

我想问一下如何在 OpenERP 中编辑文件，尤其是在 v7 中。

我编辑的 XML 文件（表单、树、搜索）来自 OpenERP 中的前端 XML；我编辑的python文件来自.py文件中OpenERP文件夹的后端；我编辑的 XML 文件（动作）来自数据库（模型）OpenERP，而不是来自 OpenERP 中的前端 XML；等等

问题：我上面提到的方法是编辑它的唯一方法吗？还有其他简单的方法吗？如果我必须从很多地方（XML、.py、数据库（模型）等）编辑文件，我认为这效率不高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:50:13.850

要手动编辑 OpenERP 文件，在 Eclipse IDE 中编辑文件会更容易一些，Eclipse IDE
中的 OpenERP 模板可以帮助您比任何其他编辑器更快地编辑文件。

这是[Eclipse IDE 的 OpenERP 模板](http://code.google.com/p/openerp-eclipse-template/)的链接。如果您遇到任何问题，它包括安装指南

*   [视频 Python](http://www.youtube.com/watch?v=kfMk31VKxrY)
*   [视频xml](http://www.youtube.com/watch?v=LCxYpofncKs)

以上将改善您更快地编辑文件的体验！

# java - 在 Java 中使用 indexOf() 在向量中搜索具有特定变量的对象

> ID：14993313
> 
> 赞同：-1
> 
> 时间：2013-02-21T01:54:16.930
> 
> 标签：java, vector, indexof

我正在尝试使用 indexOf() 找到一个包含在一个向量中的对象，该向量对于对象的变量之一具有特定的整数。我在脑海中想象它是这样的：vector.indexOf(Object.variable=x) 但这不起作用，我不确定你是否可以这样使用 indexOf。如果可能的话，有人可以为我提供正确的格式，如果不能，有人可以指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:21:34.300

如果你使用番石榴，有[Iterables.indexOf](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#indexOf%28java.lang.Iterable,%20com.google.common.base.Predicate%29)：

例如，如果您有`Vector<Employee> employees`, 按员工 ID 查找索引：

```
final int index = Iterables.indexOf(employees, new Predicate<Employee>() {
  public boolean apply(final Employee employee) {
    return employee.getId() == 10;
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:00:08.580

我认为`indexOf()`不足以满足您的需要。你真的应该遍历你的列表。

`for（“对象类型”x：“向量”）{

```
if( x.getIntegerValue() == "some integer" ){
    // do something here
    break;
} 
```

}`

# c++ - zlib - 提取大条目

> ID：14993314
> 
> 赞同：-1
> 
> 时间：2013-02-21T01:54:18.773
> 
> 标签：c++, c, pointers, zlib

我在我的程序代码中使用 zlib 库，首先当我尝试提取文件时，它适用于 zip 存档中的小条目，基本上我调用下面的函数，

```
unzOpenCurrentFile (unzFile file)

unzReadCurrentFile  (unzFile file, voidp buf, unsigned len)

unzCloseCurrentFile (unzFile file) 
```

`buf`是保存该条目数据的内存指针（或字节数组）。但是当遇到大型条目时，我的程序根本无法创建 10000000 大小的数组。我也尝试传递`FILE*`指针而不是常规内存，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:34:09.250

实际上我不正确地使用了这个 unzReadCurrentFile() 函数，它允许在一个小缓冲区中逐部分读取，它返回复制的字节数，我们可以循环直到它返回 > 0

# c++ - 致命错误 LNK1120：1 个未解决的外部问题

> ID：14993316
> 
> 赞同：0
> 
> 时间：2013-02-21T01:54:44.280
> 
> 标签：c++, templates

我正在编译以下代码，但收到错误消息。我想在 boost 中练习模板，但我不知道如何处理这个问题

```
#include <stdafx.h>
#include <iostream>
#include <string>
#include <boost/function.hpp> 
#include <boost/array.hpp>

using namespace std;
template<typename R,typename D> 
class GenericFunction
{
private:
    boost::function<R (D)> f;
protected:
    GenericFunction();
public:
    GenericFunction(const boost::function<R (D)>& myFunction);
    R evaluate(const D& value) const ;
    R operator ()(const D& value) const;
};
template <typename R, typename D, int N>
class ScalarValuedFunction:public GenericFunction<R,boost::array<D, N>>
{
public:
    ScalarValuedFunction(const boost::function<R (const boost::array<D, N>)> &myF);
};

template<typename Numeric, std::size_t N>
Numeric Norm(const boost::array<Numeric , N>& Vec)
{
    Numeric Result=Vec[0]*Vec[0];
    for (std::size_t i=1; i<Vec.size();i++)
    {
        Result+=Vec[i]*Vec[i];
    }
    return Result;
}

 int main ()
 {
    const int N=4;
    boost::array<double, N> arr={0.2,.3,1.1,4};
    ScalarValuedFunction<double, double, N> myfun(Norm<double,N>);
} 
```

并收到以下错误，

```
ConsoleApplication2.obj : error LNK2019: unresolved external symbol "public: __thiscall ScalarValuedFunction<double,double,4>::ScalarValuedFunction<double,double,4>(class boost::function<double __cdecl(class boost::array<double,4>)> const &)" (??0?$ScalarValuedFunction@NN$03@@QAE@ABV?$function@$$A6ANV?$array@N$03@boost@@@Z@boost@@@Z) referenced in function _main
1>c:\users\university\documents\visual studio 2012\Projects\ConsoleApplication2\Debug\ConsoleApplication2.exe : fatal error LNK1120: 1 unresolved externals 
```

请有人告诉我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:57:18.187

您没有为类模板的构造函数提供*定义*，但在类模板的定义中*声明了该构造函数：*`ScalarValuedFunction`

 *```
ScalarValuedFunction(const boost::function<R (const boost::array<D, N>)> &myF); 
```

因此，链接器抱怨无法解析对构造函数的调用。调用发生在`main()`：

```
ScalarValuedFunction<double, double, N> myfun(Norm<double,N>); 
```

要解决您的问题，请为构造函数添加定义。例如：

```
template<typename R, typename D, int N>
ScalarValuedFunction<R, D, N:::ScalarValuedFunction(
    const boost::function<R (const boost::array<D, N>)> &myF
    )
    :
    GenericFunction<R, boost::array<D, N>>::GenericFunction(myMF)
{ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:57:11.007

您尚未为`ScalarValuedFunction`该类定义构造函数，仅声明了它。*

# python - 在 Flask 中捕获 500 服务器错误

> ID：14993318
> 
> 赞同：51
> 
> 时间：2013-02-21T01:54:52.993
> 
> 标签：python, flask

我喜欢 Flask 的错误捕捉。它非常简单：

```
@app.errorhandler(404)
def pageNotFound(error):
    return "page not found" 
```

像魅力一样工作。但它不适用于 500 错误代码。当出现问题时，我想在代码中引发异常时捕获 Python 错误。那可能吗？

我应该注意，如果我`return abort(500)`在视图中明确调用，那么 500 错误处理程序确实可以工作。因此，这明确适用于 Python 代码失败的情况。

这可能吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-21T14:22:19.087

您所描述的是，默认情况下，Flask 是如何工作的。我的假设是您正在调试模式下运行，因此在调试屏幕中会向您显示异常。确保调试模式已关闭，然后重试。这是[直接来自代码本身的评论：](https://github.com/mitsuhiko/flask/blob/2ab91446f608755affba035650c1dd74b825a018/flask/app.py#L1446-L1450)

> 当发生未捕获的异常时启动的默认异常处理。在调试模式下，异常将立即重新引发，否则将被记录并使用 500 内部服务器错误的处理程序。如果不存在这样的处理程序，则会显示默认的 500 内部服务器错误消息。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-21T02:37:46.253

它在我身边工作正常：

```
from flask import Flask ,url_for,render_template,request,abort
from  werkzeug.debug import get_current_traceback
app = Flask(__name__)

@app.route('/')
def index():
    try:
        raise Exception("Can't connect to database")
    except Exception,e:
        track= get_current_traceback(skip=1, show_hidden_frames=True,
            ignore_system_exceptions=False)
        track.log()
        abort(500)
    return "index"

@app.errorhandler(500)
def internal_error(error):

    return "500 error"

@app.errorhandler(404)
def not_found(error):
    return "404 error",404

if __name__== "__main__":
    app.run(debug=True) 
```

Flask 不会为您设置错误代码，因此请确保在返回响应时也提供 HTTP 状态代码。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-02-26T09:13:01.423

这是我的代码片段

```
@app.route('/')
def index():
    raise Exception("Can't connect to database")

@app.errorhandler(Exception)
def exception_handler(error):
    return "!!!!"  + repr(error) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-06-22T13:11:22.613

我对此的解决方案是通过修改配置字典来打开异常的传播：

```
app = Flask(__name__)
...
app.config['PROPAGATE_EXCEPTIONS'] = True 
```

看看这个其他相关问题：[Flask app raises a 500 error with no exception](https://stackoverflow.com/questions/18059937/flask-app-raises-a-500-error-with-no-exception)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-23T20:23:27.857

问题在于，在代码中，并非所有 Exceptions 都是`HTTPException`，但 Flask 默认捕获这些并返回通用的 500 错误响应（可能包括也可能不包括 @Mark Hildreth 描述的原始错误消息）。因此， using`@app.errorhandler(500)`不会捕获这些错误，因为这发生在 Flask 返回通用 500 错误之前。

您需要有一个`errorhandler(Exception)`类似于`except Exception:`python 的泛型，它可以捕获所有内容。[Flask 托盘项目](https://flask.palletsprojects.com/en/1.1.x/errorhandling/)提供了一个很好的解决方案：

```
from werkzeug.exceptions import HTTPException

@app.errorhandler(Exception)
def handle_exception(e):
    # pass through HTTP errors. You wouldn't want to handle these generically.
    if isinstance(e, HTTPException):
        return e

    # now you're handling non-HTTP exceptions only
    return render_template("500_generic.html", e=e), 500 
```

如果您愿意，还可以返回 JSON，如果您处于调试模式，还可以包含原始错误消息。例如

```
from flask import jsonify
from werkzeug.exceptions import HTTPException

debug = True  # global variable setting the debug config

@app.errorhandler(Exception)
def handle_exception(e):
    if isinstance(e, HTTPException):
        return e

    res = {'code': 500,
           'errorType': 'Internal Server Error',
           'errorMessage': "Something went really wrong!"}
    if debug:
        res['errorMessage'] = e.message if hasattr(e, 'message') else f'{e}'

    return jsonify(res), 500 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-07-11T05:23:20.110

此代码捕获 500 状态代码并获取异常错误

```
@app.errorhandler(Exception)
def all_exception_handler(e):
    error = str(traceback.format_exc()) 
```

# sql - 来自不同表的 SQL 计算列

> ID：14993321
> 
> 赞同：1
> 
> 时间：2013-02-21T01:55:20.237
> 
> 标签：sql, sql-server, sql-server-2008

我试图在项目表中创建派生属性可用性，为此我需要创建一个连接吗？

可用性 检查今天的日期是否在 checkoutDate 和 returndate 之间。

这是ER图：

![在此处输入图像描述](../Images/e9e8554a27fc8044829c6130e642c584.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:27:05.067

如果您想将其用作计算列，那么我建议使用 UDF。在您的图表中，您将可用性作为布尔值。SQL Server 没有布尔数据类型，所以我假设你的意思有点。这应该非常接近，但您需要对其进行测试：

```
CREATE FUNCTION dbo.GetValue
(
    @barcode int
)
RETURNS bit
AS
BEGIN
    DECLARE @field bit
     SELECT @field = CASE WHEN GETDATE() 
                BETWEEN L.LastReturnDate AND R.ReturnDate THEN 1 ELSE 0 END
       FROM [Item] I
        JOIN [Load] L ON I.barcode = L.barcode
        JOIN [Return] R ON I.barcode = R.barcode
       WHERE I.barcode = @barcode
      RETURN @field
END
GO 
```

然后将其用作计算列：

```
ALTER TABLE dbo.Item
ADD Availability AS dbo.GetValue(barcode) 
```

话虽如此，这可能更适合视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:11:03.153

是的，您需要加入。

我建议您使用视图将来自不同表的数据放在一起。

# postgresql - postgresql 存储过程返回多个表

> ID：14993327
> 
> 赞同：1
> 
> 时间：2013-02-21T01:55:57.340
> 
> 标签：postgresql, plpgsql

我有一个需要从多个表返回结果的函数。这可以在 Postgresql 中这样做吗（现在是 9.1，计划很快迁移到 9.2）？如果是这样，如何。

例如

```
create or replace function f1()
returns ???
as $body$ begin
    return query select x.*
        from users x;
    return query select x.*
        from user_preferences x join users y using(user_id) ; -- more where clauses
    return query select x.*
        from user_permissions x join users y using(user_id) ; -- more clauses
end; $body$ language 'plpgsql'; 
```

我考虑的替代方案是：（a）对用户和 user_preferences （等）进行笛卡尔积，但这将导致巨大的结果表和真正复杂的代码。(b) 首先对用户进行选择，然后迭代用户列表并根据他们的属性进行额外的迭代，但这会导致太多的数据库调用。而且，我为什么要编写 SQL 如此出色的代码呢？

是否有从 pg 函数中获取多个结果集的简洁方法？我已经搜索了 postgresql 文档，但找不到任何指导。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T04:04:47.047

因为 Pg（在撰写本文时）不支持存储过程，只支持可从 SQL 调用的函数，因此没有直接返回多个结果集的规定。

但是，您可以将函数定义为`RETURNS SETOF refcursor`. 该函数可以创建多个临时表，为每个表打开一个游标并返回游标。

这有点笨拙，但很有效。

# c++ - 当要求打印节点时，模板化链接列表给出错误的输出

> ID：14993331
> 
> 赞同：0
> 
> 时间：2013-02-21T01:56:29.997
> 
> 标签：c++, linked-list

我正在为一个项目的学校记录创建一个数据库。我有一个 Student、Faculty 和 Administrator 类，它们都继承了 Person 类的东西。当我将不同的对象添加到节点时，信息存储在该节点中（我通过调试器看到它​​），但是当我去打印一个节点时，我得到

```
00266A88 
```

代替

```
Full Name: Reed
M Number: 999
Email: 
```

等等。

我只是不确定是什么导致了问题。这是我从列表中打印节点的方法：

```
template <typename T>
void TemplatedList<T>::printSpecific(int m_Number)
{
Node * Current = Head;

//If there is nothing in the list but the dummy head node, then return because there's nothing to print
if(Head->next == NULL)
{
    cout << "Cannot print (M" << m_Number << "), NOT found!" << endl;
    return;
}
else
    Current = Current->next;

// While Current->next isn't equal to NULL, go through the list and see if the M-Numbers match. If they do, print the student and return
while(Current->next != NULL)
{
    if(m_Number == Current->data->getM_Number())
    {
        cout << Current->data;
        return;
    }
    else
    {
        Current = Current->next;
    }
}

if(Current->next == NULL)
{
    if(m_Number == Current->data->getM_Number())
    {
        cout << Current->data;
        return;
    }
    else
    {
        cout << "Cannot print (M" <<m_Number << "), NOT found!" << endl;
        return;
    }
}

} 
```

这是将其中一个对象添加到列表中的函数：

```
template<typename T>
void TemplatedList<T>::addTemplatedList(T newAddition)
{
//Points to current node we're using
Node* Current = Head;
//Points to the node previous in the list to the current
Node* Previous = Head;
//Creates a new Node
Node* newNode = new Node;
//Assigns new Student information to new Node
newNode->data = newAddition;

// Check to see if the Head is only thing in the list. If it is, just place the new Node directly after the Head
if (Head->next == NULL)
{
    Head->next = newNode;
    newNode->next = NULL;
    return;
}

else
{

    while (Current->next != NULL)
    {
        if (newAddition->getM_Number() < Current->next->data->getM_Number())
        {
            newNode->next = Current->next;
            Previous->next = newNode;
            return;
        }

        else if (newAddition->getM_Number() == Current->next->data->getM_Number())
        {
            cout << "Person with M Number " << newAddition->getM_Number() << " not added because they are already in database." << endl;
            delete newNode;
            return;
        }

        Current = Current->next;
        Previous = Previous->next;
    }

    if (Current->next == NULL)
    {
        Current->next = newNode;
        newNode->next = NULL;
    }
}

} 
```

最后是我如何调用 add 函数并创建一个新对象：

```
if (inputArray[0] == "A")
    {
        cout << "Adding Administrator: " << endl <<"\tFull Name:\t" << inputArray[1] << endl;
        cout << "\tM Number:\t" << inputArray[2] << endl << "\tEmail Addr:\t" << inputArray[3] << endl << "\tTitle:\t " << inputArray[4] << endl;
        Administrator *newAdmin = new Administrator;
        istringstream stream (inputArray[2]);
        int number;
        stream >> number;
        newAdmin->setAdmin(inputArray, number);
        templatedList.addTemplatedList(newAdmin);
    } 
```

我真的很感激我能得到帮助，因为我只是不确定发生了什么或者为什么它给了我不正确的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:03:11.353

在这个例子中，它看起来像是`Node::data`一个指针。`Administrator`所以当你这样做时

```
cout << Current->data; 
```

它仅输出指针值。假设你已经`operator<<`为这个`Administrator`类实现了，你需要做的就是取消引用：

```
cout << *Current->data; 
```

# database-design - 使用 UML 和 XMI 导出的数据库建模 - 键？

> ID：14993332
> 
> 赞同：1
> 
> 时间：2013-02-21T01:56:43.033
> 
> 标签：database-design, modeling, uml

我也在使用 Papyrus eclipse 建模创建 UML 类图，并将其导出到 XMI 并在 Erwin 中导入。我确实从导入到 Erwin 的 XMI 文件中获得了类、属性和数据类型以及关系的初始列表。我可以在 Papyrus 中创建一个本地配置文件，并以“PK”、“AK”、“FK”刻板印象显示键 - 但是 Erwin 不会解释这些。我总是需要从头开始标记 Erwin 中的主键、备用键和外键。

什么是标准的 UML/XMI 兼容方式来表示主键、备用键和外键等键 - 所有这些都可以组合在 UML 类图中，以便 XMI 可以包含此信息并且所有建模工具都可以解释此信息。基本上我想知道 - 为数据库进行 UML 建模的推荐方法是什么 - 以及如何显示键。

我一直在研究这个。我相信有各种 RFP 和白皮书，但数据库建模还不是 UML 2.x 的一部分。有一种叫做 Common Warehouse Metamodel CWM UML 的东西，它看起来是特定于数据库的（但是你如何创建一个 CWM 模型？），一个叫做 IMM 的新标准仍然没有被批准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:38:03.707

正如你所说，我不确定在 UML 中是否有一种标准的方式来表达键......这取决于你使用的工具套件，也许 Erwin 已经定义了它自己的方式，但我想你已经检查过了。

# directx-10 - 深度模板和阴影资源为空

> ID：14993341
> 
> 赞同：3
> 
> 时间：2013-02-21T01:57:11.180
> 
> 标签：directx-10, stencil-buffer, shadow-mapping

在花了大约 3 天的时间试图让阴影贴图工作后，我在将阴影贴图传递给着色器时遇到了一些麻烦。

首先我初始化深度模板和资源视图，然后我绘制（我相信）到深度模板。我发现的问题是深度模板从来没有与之关联的任何数据。

Pix 在资源视图或深度模板中没有显示任何数据，我无法将深度模板的图像保存到文件中（我来自非阴影深度模板）。我可以调用 DrawSceneShadow() 并将其渲染到渲染目标并得到我想要的。

感谢您提供任何帮助。

初始化

```
// Create depth stencil texture
D3D10_TEXTURE2D_DESC descDepth;
descDepth.Width = width;
descDepth.Height = height;
descDepth.MipLevels = 1;
descDepth.ArraySize = 1;
descDepth.Format = DXGI_FORMAT_R32_TYPELESS;
descDepth.SampleDesc.Count = 1;
descDepth.SampleDesc.Quality = 0;
descDepth.Usage = D3D10_USAGE_DEFAULT;
descDepth.BindFlags = D3D10_BIND_DEPTH_STENCIL;
descDepth.CPUAccessFlags = 0;
descDepth.MiscFlags = 0;
hr = g_pd3dDevice->CreateTexture2D( &descDepth, NULL, &g_pDepthStencil );

// Create the depth stencil view
D3D10_DEPTH_STENCIL_VIEW_DESC descDSV;
descDSV.Format = DXGI_FORMAT_D32_FLOAT;
descDSV.ViewDimension = D3D10_DSV_DIMENSION_TEXTURE2D;
descDSV.Texture2D.MipSlice = 0;
hr = g_pd3dDevice->CreateDepthStencilView( g_pDepthStencil, &descDSV, &g_pDepthStencilView );

/////////////////////////////

//Shadow Mapping
//create shadow map texture desc
descDepth.Width = width;
descDepth.Height = height;
descDepth.Format = DXGI_FORMAT_R32_TYPELESS;
descDepth.BindFlags = D3D10_BIND_DEPTH_STENCIL | D3D10_BIND_SHADER_RESOURCE;

//create shader resource view desc
D3D10_SHADER_RESOURCE_VIEW_DESC srvDesc;
srvDesc.Format = DXGI_FORMAT_R32_FLOAT;
srvDesc.ViewDimension = D3D10_SRV_DIMENSION_TEXTURE2D;
srvDesc.Texture2D.MipLevels = descDepth.MipLevels;
srvDesc.Texture2D.MostDetailedMip = 0; 
```

渲染场景

```
//Create shadow map
//***************************************************************************
//set render targets
//set render targets and viewport
g_pd3dDevice->OMSetRenderTargets(0, 0, pShadowMapDepthView);
g_pd3dDevice->ClearDepthStencilView( pShadowMapDepthView, D3D10_CLEAR_DEPTH, 1.0f, 0 );

moveCam( lightPos.x, lightPos.y, lightPos.z );
DrawSceneShadow();

//Render final scene
//***************************************************************************

//set render targets
g_pd3dDevice->OMSetRenderTargets(1, &g_pRenderTargetView, g_pDepthStencilView);    
g_pd3dDevice->RSSetViewports(1, &vp);
g_pd3dDevice->ClearRenderTargetView( g_pRenderTargetView, D3DXCOLOR(0.6f,0.6f,0.6f,0) );
g_pd3dDevice->ClearDepthStencilView( g_pDepthStencilView, D3D10_CLEAR_DEPTH, 1.0f, 0 );

//bind shadow map texture
g_pEffect->GetVariableByName("shadowMap")->AsShaderResource()->SetResource( pShadowMapSRView );
ScreenGrab();
resetCam();
lightMatrix();
DrawScene();

//unbind shadow map as SRV and call apply on scene rendering technique
g_pEffect->GetVariableByName("shadowMap")->AsShaderResource()->SetResource( 0 );
g_pRenderShadowMapTechnique->GetPassByIndex(0)->Apply( 0 ); 
```

# python - 如何尝试几种扁平风格的方法？

> ID：14993343
> 
> 赞同：3
> 
> 时间：2013-02-21T01:57:34.300
> 
> 标签：python, coding-style, nested, flat

如果我想尝试多种方法来避免一些错误，我可以写：

```
try:

    try:
        trial_1()
    except some_error:
        try:
            trial_2()
        except some_error:
            try:
                trial_3()
            ...
    print "finally pass"

except some_error:
    print "still fail" 
```

但是太多的试验太多的嵌套，怎么写成扁平的样式呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T02:04:17.573

如果每次都是相同的例外，你可以这样做

```
for task in (trial_1, trial_2, trial_3, ...):
    try:
        task()
        break
    except some_error:
        continue 
```

如果知道它是否成功很重要，那么添加它的最清晰方法可能是

```
successful = False
for task in (trial_1, trial_2, trial_3, ...):
    try:
        task()
        successful = True
        break
    except some_error:
        continue
if successful:
    ...
else:
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:06:46.697

假设 a）每个试验都不同，并且 b）它们都抛出相同的错误（因为这就是您的代码所说明的），并且 c）您知道所有试验函数的名称：

```
for t in (trial_1, trial_2, trial_3, trial_4):
    try:
        t()
        # if we succeed, the trial is over
        break
    except some_error:
        continue 
```

这将遍历每个试验，在出现预期错误的情况下继续，如果试验成功则停止，并抛出任何其他异常。我认为这与您的示例代码的行为相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T02:07:37.217

你可以这样做：

```
def trial1 (): 42 / 0
def trial2 (): [] [42]
def trial3 (): 'yoohoo!'
def trial4 (): 'here be dragons'

for t in [trial1, trial2, trial3, trial4]:
    print ('Trying {}.'.format (t.__name__) )
    try:
        t ()
        print ('Success')
        break
    except Exception as ex:
        print ('Failed due to {}'.format (ex) )
else:
    print ('Epic fail!') 
```

输出是：

```
Trying trial1.
Failed due to division by zero
Trying trial2.
Failed due to list index out of range
Trying trial3.
Success 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T02:47:07.403

如果您需要多次执行此操作，您可以将 Hyperboreus 和其他人给出的答案打包为一个函数：

```
def first_success(*callables):
    for f in callables:
        try:
            return f()
        except Exception as x:
            print('{} failed due to {}'.format(f.__name__, x))
    raise RuntimeError("still fail") 
```

然后，您只需要：

```
first_success(trial_1, trial_2, trial_3, trial_4) 
```

如果您想要`logging.info`异常而不是`print`它们，或者完全忽略它们，或者跟踪它们并将异常列表附加到返回值和/或异常作为属性等，那么如何修改它应该很明显.

如果您想将参数传递给函数，那不是很明显，但仍然很容易。你只需要决定接口应该是什么。也许将一系列可调用对象作为第一个参数，然后是所有可调用对象的参数：

```
first_success((trial_1, trial_2, trial_3, trial_4), 42, spam='spam') 
```

这很容易：

```
def first_success(callables, *args, **kwargs):
    for f in callables:
        try:
            return f(*args, **kwargs)
        except Exception as x:
            print('{} failed due to {}'.format(f.__name__, x))
    else:
        raise RuntimeError("still fail") 
```

* * *

如果你并不总是需要这种模式，但你需要大量不完全一样的东西，你可能想要编写一个函数，将任何函数包装*在*`try`. 我实际上已经构建了六次，然后意识到有一种更pythonic的方式来编写我的代码，这使得这个函数变得不必要，所以我唯一得到的用途是在与 Haskell snobs 的参数中，但是您可能会找到更好的用途：

```
def tried(callable, *args, **kwargs):
    try:
        return (callable(*args, **kwargs), None)
    except Exception as x:
        return (None, x) 
```

现在你可以使用高阶`map`函数`any`如Haskell 程序员讨厌你。`map(tried, (trial_1, trial_2, trial_3, trial_4))``(f(x[0]) if x[1] is None else x for x in tried_sequence)`

# java - 如何比较数字字符串？

> ID：14993348
> 
> 赞同：0
> 
> 时间：2013-02-21T01:58:02.903
> 
> 标签：java, string

我有一个长度为 X 的数字字符串数组（“32”、“49”、“2”、...），我需要找到该数组中的最大数字并返回位置（数组 [3] 是最大的数字）

有没有像 array[0].isLessThan(array[3]) 这样的库？或类似的东西？

到目前为止的程序：

```
int max 0

for(i=1; i<X; i++){

if(array(max).isLessThan(array[i]))
     max = i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:09:38.480

我建议在比较两个值时将值转换为整数。

您将需要跟踪最大值和索引。该解决方案假定所有值都是非负的（因为我将 max 设置为 -1），但您可以轻松地将 max 更改为 int min 或类似的值。

```
int max = -1;
int index = -1;

for (int i = 0; i < array.Length; i++)
{
    int value = Integer.parse(array[i]);
    if (value > max)
    {
        max = value;
        index = i;
    }
} 
```

此时，您拥有数组中最大值的索引。如果有多个最大值，您可以存储一个索引数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:23:39.217

这是我的建议。如果我错了，请纠正我。

```
int max 0

for(i=0; i<X; i++){

     if(array[i]).isLessThan(array[i+1]))
         max = i+1;
     else
         max = i
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T03:54:48.877

为了学术界的兴趣，一个更复杂的解决方案:)：

```
public static void main(String[] args) {

    String[] anArrayOfStrings={"199999","32", "33", 
"10000","45","99999","72987","0","92"};
    Test test=new Test();
    Test.CX cx=test.new CX();
    java.util.Arrays.sort(anArrayOfStrings,cx) ;
    System.out.println("Item="+anArrayOfStrings[(anArrayOfStrings.length-1)]);
}

class CX<String> implements Comparator{

    @Override
    public int compare(Object arg0, Object arg1) {

        if( Integer.parseInt((java.lang.String) arg0) > 
   Integer.parseInt((java.lang.String) arg1)){

            return 1;

        }else if(Integer.parseInt((java.lang.String) arg0) < 
  Integer.parseInt((java.lang.String) arg1)){
            return -1;
        }

        return 0;
    }

} 
```

# android - 在 Android OpenGL 课上工作无法弄清楚我做错了什么

> ID：14993350
> 
> 赞同：2
> 
> 时间：2013-02-21T01:58:25.783
> 
> 标签：android, opengl-es

我正在尝试做这节课
[ht​​tp://developer.android.com/training/graphics/opengl/environment.html](http://developer.android.com/training/graphics/opengl/environment.html)
每次我启动应用程序时它都会崩溃并且eclipse不会告诉我出了什么问题。
这是我的代码

```
package com.example.opengl;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLES20;

public class MyGL20Renderer implements MyGLSurfaceView.Renderer {
    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        // Set the background frame color
        GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
    }

    @Override
    public void onDrawFrame(GL10 gl) {
        // Redraw Background Color
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        GLES20.glViewport(0, 0, width, height);

    }

} 
```

下一节课

```
package com.example.opengl;

import android.content.Context;
import android.opengl.GLSurfaceView;

public class MyGLSurfaceView extends GLSurfaceView {

    public MyGLSurfaceView(Context context) {
        super(context);
        // Set the Renderer for drawing on the GLSurfaceVIew
        setRenderer(new MyGL20Renderer());
        // Create an OpenGL ES 2.0 context
        setEGLContextClientVersion(2);
        // Render the view only when there is a change in the drawing data
        setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
    }

} 
```

最后是 manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.opengl"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
<uses-feature android:glEsVersion="0x00020000" android:required="true" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.opengl.MyGLSurfaceView" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我一直在尝试谷歌来解决这个问题，但是我的谷歌功夫太弱了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:51:31.460

你的主要活动呢？你忘了这个吗？

```
public class MainActivity extends Activity {

    private GLSurfaceView mGLView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Create a GLSurfaceView instance and set it
    // as the ContentView for this Activity.;
    mGLView = new MyGLSurfaceView(this);
    setContentView(mGLView);

    }
} 
```

我也坚持这个例子，虽然我的程序在之后启动得很好，它只显示黑屏而不是声明的内容：

```
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // Set the background frame color
    GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
} 
```

编辑：发现我的错误。我在 MyGL20Renderer 中有错误的导入，它创建了另一个 onSurfaceChanged 方法。

# spring - 当我尝试运行 spring security hello world 示例时，Tomcat 7 服务器无法启动

> ID：14993351
> 
> 赞同：0
> 
> 时间：2013-02-21T01:58:32.497
> 
> 标签：spring, tomcat, spring-security, tomcat7

```
Feb 21, 2013 6:39:08 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: D:\JDK6.0\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;D:/JDK6.0/bin/../jre/bin/client;D:/JDK6.0/bin/../jre/bin;D:/JDK6.0/bin/../jre/lib/i386;D:\oraclexe\app\oracle\product\10.2.0\server\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;D:\JDK6.0\bin;D:\JDK5.0\bin;D:\apache-maven-3.0.4-bin\apache-maven-3.0.4\bin;D:\eclipse-jee-juno-win32\eclipse;
Feb 21, 2013 6:39:08 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:SpringSecurityHelloExample' did not find a matching property.
Feb 21, 2013 6:39:08 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-7070"]
Feb 21, 2013 6:39:08 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Feb 21, 2013 6:39:08 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 635 ms
Feb 21, 2013 6:39:08 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Feb 21, 2013 6:39:08 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.33
Feb 21, 2013 6:39:08 AM org.apache.tomcat.util.digester.Digester endElement
WARNING:   No rules found matching 'Context/Context/Resource'.
Feb 21, 2013 6:39:08 AM org.apache.tomcat.util.digester.Digester endElement
WARNING:   No rules found matching 'Context/Context'.
Feb 21, 2013 6:39:13 AM org.apache.tomcat.util.digester.Digester endElement
WARNING:   No rules found matching 'Context/Context/Resource'.
Feb 21, 2013 6:39:13 AM org.apache.tomcat.util.digester.Digester endElement
WARNING:   No rules found matching 'Context/Context'.
Feb 21, 2013 6:39:15 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/sdnext]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/sdnext]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: Lorg/apache/commons/logging/Log;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredFields(Class.java:1743)
    at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:87)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:140)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:67)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.Log
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:316)
    ... 21 more
Feb 21, 2013 6:39:15 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Feb 21, 2013 6:39:15 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
Feb 21, 2013 6:39:15 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 7005 ms 
```

当我运行其他项目时，服务器运行良好。但是当我尝试运行 spring security hello world 示例时，需要很长时间。. . 我什至增加了服务器时间，但仍然没有开始。这是我得到的错误。. ..

```
Server Tomcat v7.0 Server at localhost was unable to start within 305 seconds. If the server requires more time, try increasing the timeout in the server editor. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:06:30.677

异常说它无法找到类`org.apache.commons.logging.Log`，它是 Apache Commong Logging 库的一部分。

您在类路径中缺少库[commons-logging](http://commons.apache.org/logging/)。[下载](http://apache.techartifact.com/mirror//commons/logging/binaries/commons-logging-1.1.1-bin.zip)zip 文件并将文件添加`commons-logging-1.1.1.jar`到您的类路径中。

# excel - 使用 POI 写入日期（无时间）

> ID：14993355
> 
> 赞同：2
> 
> 时间：2013-02-21T01:59:22.163
> 
> 标签：excel, date, apache-poi

当我使用 POI 写出日期时，我还会在 Excel 中看到时间。（显示的时间是写入单元格时我机器上的时间）。这是我用过的代码

```
XSSFCellStyle dateStyle = wb.createCellStyle();
CreationHelper createHelper = wb.getCreationHelper();
dateStyle.setDataFormat(createHelper.createDataFormat().getFormat("dd-mmm-yyyy"));
Calendar cal = Calendar.getInstance();
cal.set(xx.getYear(), xx.getMonthOfYear(), xx.getDayOfMonth());
cell.setCellStyle(dateStyle);
cell.setCellValue(cal); 
```

单元格中的日期是正确的，即 2013 年 12 月 12 日，但对于该单元格，在公式栏中，时间也会显示。因此单元格显示 2013 年 12 月 12 日，公式栏显示 2013 年 12 月 12 日上午 7:14:39。我在 excel 中检查了单元格的格式，它显示为自定义 dd-mm-yyyy，这是我所期望的。太清楚了 - 单元格本身显示 2012 年 12 月 12 日，但对于公式栏中的该单元格，时间也会显示。我还用日期替换了日历——同样的问题。

添加信息：在 excel 中，我将 col 的格式更改为“常规”-对于 POI 添加的单元格，我看到值是 xxx.xxx，例如 41319.3769490278，而当我只是手动输入日期时，值看起来像 41319。看起来小数点后的数字导致时间显示。当我使用 POI 写出来时，不知道如何避免这种情况

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T00:38:23.007

好的解决了。为遇到相同问题的其他人提供此信息。我查看了 POI 源代码并意识到从日历中计算了一个双精度值，并将单元格值设置为该值。从评论中可以清楚地看出小数点后的数字代表时间。所以我在我的代码中所做的就是截断那个双精度数。更改的行在下面的代码段中进行了注释。

```
XSSFCellStyle dateStyle = wb.createCellStyle();
CreationHelper createHelper = wb.getCreationHelper();
dateStyle.setDataFormat(createHelper.createDataFormat().getFormat("dd-mmm-yyyy"));
Calendar cal = Calendar.getInstance();
cal.set(xx.getYear(), xx.getMonthOfYear(), xx.getDayOfMonth());
cell.setCellStyle(dateStyle);
double d = DateUtil.getExcelDate(cal, false); //get double value f
cell.setCellValue((int)d);  //get int value of the double 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:00:42.933

您没有完全清除从中获取日期的日历实例，这就是时间过去的原因

您还需要将时间值设置为零，因此您的代码看起来像：

```
Calendar cal = Calendar.getInstance();
cal.set(xx.getYear(), xx.getMonthOfYear(), xx.getDayOfMonth());
calendar.set(Calendar.HOUR, 0);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.SECOND, 0);
calendar.set(Calendar.MILLISECOND, 0); 
```

# php - PHP 变量到 Javascript 变量

> ID：14993357
> 
> 赞同：0
> 
> 时间：2013-02-21T01:59:36.263
> 
> 标签：php, javascript

我目前正在制作一个简单的 php 脚本来编辑 JavaScript 游戏的某些方面。尝试使用表单将变量从脚本传递到游戏时，变量数据似乎没有传输。截至目前，该脚本旨在编辑游戏中一名玩家的 RDG 值。代码如下：

脚本.php：

```
<html>
<head>
<title>Form</title>
</head>
<body>

<form method="get" action="tron2.html">

<p>What are your player 1's RGB values:
<input type="text" name="color1r" /> Red 
<input type="text" name="color1g" /> Green 
<input type="text" name="color1b" /> Blue </p>

<input type="submit" value="Submit" />

</form>

</body>
</html> 
```

以及分配变量的javascript代码部分

```
<?php

$color1r = $_POST["color1r"];
$color1g = $_POST["color1g"];
$color1b = $_POST["color1b"];

?>

<HTML>
    <HEAD>
    <TITLE>
        Tron2 
    </TITLE>
    <script>
                    var x = "<?=  $color1r; ?>";
                    var y = "<?=  $color1g; ?>";
        var z = "<?=  $color1b; ?>";
                     //more code for the game 
```

当游戏运行时，玩家的颜色保持黑色，所以 x,y,z 的值必须全部为 0。有没有什么原因导致这些值没有被传递？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T02:01:41.037

```
<form method="get" ...> 
```

和

```
$color1r = $_POST["color1r"]; 
```

不是朋友。

`<form method="post" ...>`并且`$color1r = $_POST["color1r"];`是朋友，并且
`<form method="get" ...>`也是`$color1r = $_GET["color1r"];`朋友。

也`<?= echo`应该报错。使用`<? echo $string`或`<?=$string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:02:32.353

除了切向的 POST/GET 混淆之外，始终用于`json_encode()`在 JS 代码中输出 PHP 变量。

`echo`没有转义或其他转义函数将生成无效和/或不安全的代码。

```
<script>var jsvalue = <?php echo json_encode($phpvalue) ?>;</script> 
```

* * *

在您的具体情况下：

```
<form method="post" action="tron2.html"> 
```

和

```
<script>
    var x = <?= json_encode($color1r) ?>; 
```

# jquery - jQuery del 元素动态

> ID：14993358
> 
> 赞同：-2
> 
> 时间：2013-02-21T01:59:39.897
> 
> 标签：jquery, twitter-bootstrap, dynamic-data

我有一个表，其中包含`<td>`'s 和我从 db 获取数据。我想要的是`<td>`在用户删除数据时删除。我是 jquery n js 的新手。当用户想要删除数据时，我使用 bootstrap n 能够显示模式。但我仍然无法删除`<td>`哪个用户的删除。我知道代码很乱，对不起我的英语。这是脚本：

```
 foreach ($query as $hasil) {
        if($hasil->status_login=='l')
        {
            $status="Terkunci";
        }
        else if($hasil->status_login=="n")
        {
            $status="Non-aktif";
        }
        else
        {
            $status="Aktif";
        }
        echo '<form method="post" action="proses">';
        echo '<input type="hidden" name="update_admin"><input type="hidden" name="id" value="'.$hasil->akun_id.'">';
        echo '<tr>';
        echo '<td>';
        echo $hasil->akun_email;
        echo '</td><td>';
        echo $hasil->akun_tipe;
        echo '</td><td>';
        echo $hasil->admin_create_date;
        echo '</td><td><select name="status"><option>'.$status.'</option><option>Aktif</option><option>Non-aktif</option><option>Terkunci</option><td><a class="btn btn-danger" type="button" data-toggle="modal" href="#myModal'.$i.'" data-backdrop="true">Hapus admin</a></td><td><button type="submit" class="btn btn-primary" href="#">Simpan</button></td>';
        echo '</form>';

        /**
        form buat ngapus
        **/     
        echo '<form id="rm" method="post" action="proses">';
        echo '<input type="hidden" name="id" value="'.$hasil->akun_id.'">';
        echo '<input type="hidden" name="del" value="true"><input type="hidden" name="lvl" value="admin">';
        echo '<div id="myModal'.$i.'" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
  <span><strong>Pesan</strong></span>
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
  </div>
  <div class="modal-body">
    <p>Anda yakin ingin menghapus '.$hasil->akun_email.'</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>
    <button class="btn btn-danger">Hapus saja</button>
  </div>
</div>';
echo '<div id="result"></div>';
        echo '</form>';
        $i++;
    }
    echo '</table>';
    echo "<script>
            $('#rm').submit(function() {
            var value = $('td').val();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serializeArray(),
            success: function(data) {
                $('div[id*=\"myModal\"]').modal('hide');
                $('#result').html(data);
                $('tr').remove(\":contains(value)\");
            }
        })
        return false;
    });";
    echo '</script>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:46:21.723

它是凌乱的代码:(

我认为问题出在这里：

```
$('tr').remove(\":contains(value)\"); 
```

尝试替换为您要删除`value`的实际内容。`td`

祝你好运。

# java - 一元前缀运算符的Java消歧

> ID：14993361
> 
> 赞同：3
> 
> 时间：2013-02-21T01:59:56.627
> 
> 标签：java, tokenize, unary-operator

Java 解析器如何处理模棱两可的一元运算符？

例如，假设您在`int x`某处声明，`+--x`是完全有效的代码。`---x`理论上也是有效的，但是编译器会抛出错误。同样，`+~~~~~~+--x`被接受，但`~~~~~~++--x`即使它们都可以被解析为有效的表达式，也不能接受。

据我所知，语法是模棱两可的，所以必须在标记化过程中处理，但我找不到任何解释它的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:04:02.223

`---x`是模棱两可的，因为它可能意味着`-(--x)`or`--(-x)`或`-(-(-x))`while`+--x`是明确的，因为没有`+-(-x)`可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T02:14:54.277

正如 Stephen P 所暗示的那样，一元运算符在 Java 中从右到左分组，这意味着这些表达式是模棱两可的，因为不同的运算符可以向右分组。有关一元运算符的规则，请参阅[Java 7 规范的第 15.15 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15)

**编辑**

在某种程度上，我认为您已经回答了自己的问题。似乎模棱两可的表达式（例如 ---x）会导致编译错误，因为编译器不知道您想要它做什么。在这些情况下，程序员需要通过使表达式更具体来解决歧义——例如，通过添加括号来消除歧义。

# java - 如何检查对象上的空值，然后如果它为空则继续？

> ID：14993362
> 
> 赞同：1
> 
> 时间：2013-02-21T02:00:07.083
> 
> 标签：java, if-statement, nullpointerexception

在 Java 中，检查对象是否具有值或正在返回的最佳方法是`null`什么？我发现的大多数例子都不是很好。基本上我有这个代码：

```
mDBApi.getSession().setAccessTokenPair(reAuthTokens);
System.out.println(reAuthTokens);
if(reAuthTokens.equals(null)) {
    mDBApi.getSession().startAuthentication(Main.this);
    Log.e(TAG, "Keys not set -- I'm starting authentication");
} 
```

我正在尝试`reAuthTokens`检查价值，如果没有价值，请继续并进行身份验证。但是，我只是`NullPointerException`在 if 语句行上得到一个。有什么我可以做得更好的吗？

****__ *_* __ *_* __ *_* __ *_*** *OnCreate for rcook* ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __****

 **```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    //AccessTokenPair tokens=null;      
    //AccessTokenPair tokens = getStoredKeys();   
    //System.out.println(access + "here I am"); 
    //clearKeys();
    //Log.e(TAG, "keys cleared");

    AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
    AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);
    mDBApi = new DropboxAPI<AndroidAuthSession>(session);
    AccessTokenPair reAuthTokens = new AccessTokenPair(APP_KEY, APP_SECRET);
    mDBApi.getSession().setAccessTokenPair(reAuthTokens);

        System.out.println(reAuthTokens);

    if(reAuthTokens == null) {       
    mDBApi.getSession().startAuthentication(Main.this);
    Log.e(TAG, "Keys not set -- I'm starting authentication");

    }

//

    /*read settings*/
    mSettings = getSharedPreferences(PREFS_NAME, 0);
    boolean hide = mSettings.getBoolean(PREFS_HIDDEN, false);
    boolean thumb = mSettings.getBoolean(PREFS_THUMBNAIL, true);
    int space = mSettings.getInt(PREFS_STORAGE, View.VISIBLE);
    int color = mSettings.getInt(PREFS_COLOR, -1);
    int sort = mSettings.getInt(PREFS_SORT, 3);

    mFileMag = new FileManager();
    mFileMag.setShowHiddenFiles(true);
    mFileMag.setSortType(sort);

    if (savedInstanceState != null)
        mHandler = new EventHandler(Main.this, mFileMag, savedInstanceState.getString("location"));
    else
        mHandler = new EventHandler(Main.this, mFileMag);

    mHandler.setTextColor(color);
    mHandler.setShowThumbnails(thumb);
    mTable = mHandler.new TableRow();

    /*sets the ListAdapter for our ListActivity and
     *gives our EventHandler class the same adapter
     */
    mHandler.setListAdapter(mTable);
    setListAdapter(mTable);

    /* register context menu for our list view */
    registerForContextMenu(getListView());

    mStorageLabel = (TextView)findViewById(R.id.storage_label);
    mDetailLabel = (TextView)findViewById(R.id.detail_label);
    mPathLabel = (TextView)findViewById(R.id.path_label);
    mPathLabel.setText("path: /sdcard");

    updateStorageLabel();
    mStorageLabel.setVisibility(space);

    mHandler.setUpdateLabels(mPathLabel, mDetailLabel);

    /* setup buttons */
    int[] img_button_id = {R.id.help_button, R.id.home_button, 
                           R.id.back_button, R.id.info_button, 
                           R.id.manage_button, R.id.multiselect_button,
                           R.id.dropbox_button
                           };

    int[] button_id = {R.id.hidden_copy, R.id.hidden_attach,
                       R.id.hidden_delete, R.id.hidden_move};

    ImageButton[] bimg = new ImageButton[img_button_id.length];

    Button[] bt = new Button[button_id.length];

    for(int i = 0; i < img_button_id.length; i++) {
        bimg[i] = (ImageButton)findViewById(img_button_id[i]);
        bimg[i].setOnClickListener(mHandler);

        if(i < 4) {
            bt[i] = (Button)findViewById(button_id[i]);
            bt[i].setOnClickListener(mHandler);
        }
    }

    Intent intent = getIntent();

    if(intent.getAction().equals(Intent.ACTION_GET_CONTENT)) {
        bimg[5].setVisibility(View.GONE);
        mReturnIntent = true;

    } else if (intent.getAction().equals(ACTION_WIDGET)) {
        Log.e("MAIN", "Widget action, string = " + intent.getExtras().getString("folder"));
        mHandler.updateDirectory(mFileMag.getNextDir(intent.getExtras().getString("folder"), true));

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T02:01:00.940

改为使用`if (reAuthTokens == null))`。您不是在尝试比较对象的内容；您正在尝试比较参考。“is`reAuthTokens`指向与 相同的地址`null`？”

**编辑**从 OP 更新后：`reAuthTokens`是类型`AccessTokenPair`（我敢打赌，许多读者最初认为这是一个`List`......我知道我做到了）。它在这一行中实例化：

```
AccessTokenPair reAuthTokens = new AccessTokenPair(APP_KEY, APP_SECRET); 
```

这就是为什么以下条件总是错误的：`reAuthTokens == null`。这就是为什么在编码时`if (reAuthTokens == null)`，您会收到“死代码”警告：编译器知道这种情况永远不会为真，因为您`reAuthTokens`在上面实例化了几行代码。

因此，您所追求的比较类型不是关于参考，而是关于内容。您要检查是否`reAuthTokens`为“空”。但这从您引用的代码中没有意义。你怎么实例化对象，然后想检查它是否“空”？

我觉得你的逻辑不对。您应该首先从您期望的位置（会话？）获取访问令牌对，并将结果与`null`​​ . 像这样的东西：

```
AccessTokenPair reAuthTokens = mDBApi.getSession().getAccessTokenPair();

if (reAuthTokens == null) {
    reAuthTokens = new AccessTokenPair(...);
    mDBApi.getSession().setAccessTokenPair(reAuthTokens);
} 
```**

# ruby-on-rails - bootstrap:themed 错误 - 没有生成正确的视图

> ID：14993374
> 
> 赞同：0
> 
> 时间：2013-02-21T02:01:21.340
> 
> 标签：ruby-on-rails, twitter-bootstrap

Rails：3.2.6 twitter-bootstrap-rails（2.2.3、2.1.0）

我做了以下事情：

```
rails generate bootstrap:install static -s 
```

然后我生成了用于认证的脚手架，如下所示：

```
rails generate scaffold certification id:integer user_id:integer name:string description:string location:string status:string --skip-stylesheets -s 
```

然后我尝试生成 twitter 引导视图，如下所示：

```
rails generate bootstrap:themed certifications -f -s 
```

这给了我以下错误：

```
undefined method `fields' for #<Class:0x007fe5e7282060> 
```

并且没有对认证视图进行任何更改。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T06:48:38.760

我有类似的问题，因为我正在使用 mongoid 和活动记录的混合。我猜想在使用生成器时不知何故发生了冲突，它再也找不到 fields 方法了。

我的解决方案是重新安装 twitter-bootstrap-rails gem，其中包含以下内容：

```
gem "twitter-bootstrap-rails", :git => 'https://github.com/seyhunak/twitter-bootstrap-rails.git' 
```

另外，不要忘记运行

```
rake db:migrate 
```

在你之后

```
rails generate scaffold ... 
```

对于那些使用 mongoid 的人，额外的提示：每次我必须为活动记录生成脚手架时，我评论：

```
#gem "mongoid", "~> 3.0"
#gem "composite_primary_keys" 
```

然后，生成，然后取消注释

# java - 我们可以将应用程序上下文类型转换为类吗

> ID：14993377
> 
> 赞同：1
> 
> 时间：2013-02-21T02:01:43.517
> 
> 标签：java, spring

在我的应用程序中，我想加载动态类。我添加了如下代码片段，

```
private static Class clazz; 
```

在实现类的方法中，

```
clazz = (Class) applicationContext.getBean("arrived class name for thirty party"); 
```

在应用程序中获取类的方法是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:05:11.057

如果它的对象重新注册并且您需要该 bean 的类名

```
clazz = applicationContext.getBean("arrived class name for thirty party").getClass(); 
```

如果它的 String 值注册为 bean 并且你需要它的类实例

```
clazz = Class.forName(applicationContext.getBean("arrived class name for thirty party")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:02:30.010

You can use - clazz = applicationContext.getBean("arrived class name for thirty party",.class);

ex- Employee emp = ctx.getBean("arrived class name for thirty party", Employee.class);

# vsto - Outlook 2007 - 如何使用邮件模板和数据表单 DBMS 发送个性化邮件

> ID：14993382
> 
> 赞同：0
> 
> 时间：2013-02-21T02:02:20.807
> 
> 标签：vsto, outlook-addin, mapi

我想使用 vsto Outlook 插件发送电子邮件。

将有来自 DBMS 的多个收件人和有关收件人的数据。在邮件模板中将有一个关键字应替换为个人数据，如姓名、工作职位。并且每封邮件必须只有一个收件人地址，看起来就像我们互相发送邮件一样。

我想给每个人发邮件而不是一起发邮件。我可以取消原始邮件，然后将邮件正文和主题文本逐个发送给每个人。

我注意到“已发送文件夹”中的邮件数量与收件人数量相同。

即使未发送原始邮件，我也希望在“已发送文件夹”中仅看到一封原始邮件（不应发送原始邮件。）

我想我可以在发送所有邮件后从“已发送文件夹”中删除所有邮件并将原始邮件移动到“已发送文件夹”，但未设置标记为“未发送”的原始邮件和提交时间。如何以编程方式使此项目看起来像已发送的邮件。

或者有什么办法可以解决我的问题？

我正在使用 Framework 3.5 开发 Outlook 2007 和 Visual Studio 2010 VSTO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:52:26.243

首先，要在发送后删除消息，请将 MailItem.DeleteAfterSubmit 属性设置为 true。

通常，Outlook 创建的所有邮件都是在未发送状态下创建的，无法更改。在 MAPI 级别，您可以在 PR_MESSAGE_FLAGS 属性中设置 MSGFLAG_UNSENT 位，但 Outlook 不允许您这样做。但是，您可以使用 RDOMail.Sent 属性（读/写）在[Redemption](http://www.dimastr.com/redemption)中设置该属性（同样，在第一次保存消息之前）。此外，您可以使用 RDOMail.CopyTo() 方法并传递另一条消息或文件夹来复制消息数据。

在 OOM 级别上，唯一的方法是创建一个 PostItem 对象（它是在已发送状态下创建的唯一一个），将其 MessageClass 属性重置为“IPM.Note”，保存它，释放它，然后使用它重新打开它Namespace.GetItemFromID 以将其重新打开为处于已发送状态的 MailItem 对象。

在救赎中，您需要做的就是

```
set Session = CreateObject("Redemption.RDOSession")
Session.MAPIOBJECT = Application.Session.MAPIOBJECT
YourOutlookMailItem.Save
set SourceMsg = Session.GetRDOObjectFromOutlookObject(YourOutlookMailItem)
set TargetMsg = Session.GetDefaultFolder(olFolderSentMail).Items.Add("IPM.Note")
TargetMsg.Sent = true
SourceMsg.CopyTo(TargetMsg)
TargetMsg.Save 
```

# java - 遍历整数列表的测试时间

> ID：14993385
> 
> 赞同：0
> 
> 时间：2013-02-21T02:02:37.590
> 
> 标签：java, iterator, linked-list

我想测试时间，看看显示 300 万个数字需要多长时间，但我不知道我该怎么做。任何想法将不胜感激。

```
import java.util.*;

public class LinkedListProgram {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        LinkedList<Integer> list = new LinkedList<Integer>();
        Random randomNumbers = new Random();

        System.out.println("Enter number of integers");
        int number = input.nextInt();
        for (int i=0; i < number; i++){
            list.add(randomNumbers.nextInt(100));
        }

        for (Iterator i = list.iterator(); i.hasNext();) {
            Integer integer = (Integer) i.next();
            System.out.println(integer);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:11:01.617

我通常使用 junit 或 ngunit 来感受运行时。它将告诉您测试在您的 ide 中运行与控制台分开需要多长时间。

或者您可以像这样记录开始时间和结束时间：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
Date date = new Date();
System.out.println(dateFormat.format(date));

doStuff();

date = new Date();
System.out.println(dateFormat.format(date)); 
```

或者您可以记录执行时间：

```
 long start = System.currentTimeMillis();
                    System.out.println("Going to call the method.");

                    doStuff();

System.out.println("Method execution completed.");
                    long elapsedTime = System.currentTimeMillis() - start;
                    System.out.println("Method execution time: " + elapsedTime + " milliseconds."); 
```

如果您想在其他地方（即文件）写入而不是在控制台中将它们全部混合，您可以使用 log4j

```
logger.info(dateFormat.format(date); 
```

如果你想变得更高级，你可以使用 AOP 切入点来记录方法执行的开始和结束时间，例如使用 spring aop。代码来自这里：http: [//veerasundar.com/blog/2010/01/spring-aop-example-profiling-method-execution-time-tutorial/](http://veerasundar.com/blog/2010/01/spring-aop-example-profiling-method-execution-time-tutorial/)

```
@Aspect
public class BusinessProfiler {

        @Pointcut("execution(* com.veerasundar.spring.aop.*.*(..))")
        public void businessMethods() { }

        @Around("businessMethods()")
        public Object profile(ProceedingJoinPoint pjp) throws Throwable {
                long start = System.currentTimeMillis();
                System.out.println("Going to call the method.");
                Object output = pjp.proceed();
                System.out.println("Method execution completed.");
                long elapsedTime = System.currentTimeMillis() - start;
                System.out.println("Method execution time: " + elapsedTime + " milliseconds.");
                return output;
        }

} 
```

打印到控制台可能是一个瓶颈，因为它会阻塞 io - 为什么要在控制台上打印这么多？这个测试有价值吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:35:15.337

如果您有兴趣检查 LinkedList 的性能并可能将其与 ArrayList 或常规数组进行比较，那么您可能需要删除这些`println`语句。输出到显示器所花费的时间比在内存中移动数据要多得多。

```
import java.util.*;

public class LinkedListProgram {

 public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    LinkedList<Integer> list = new LinkedList<Integer>();
    Random randomNumbers = new Random();

    System.out.println("Enter number of integers");
    int number = input.nextInt();
    long start = System.currentTimeMillis();
    for (int i=0; i < number; i++){
        list.add(randomNumbers.nextInt(100));
    }
    long generateTime = System.currentTimeMillis();
    int sum=0;
    for (int x : list) {
        sum += x
    }
    long endTime = System.currentTimeMillis();

    System.out.println("Time to gernerate numbers: " +  (generateTime - start) );
    System.out.println("Time to sum list: " +  (endTime  - generateTime) );
  }
} 
```

# ruby - 使用 sinatra 流 API 的异步请求

> ID：14993386
> 
> 赞同：4
> 
> 时间：2013-02-21T02:02:50.013
> 
> 标签：ruby, sinatra, eventmachine

我使用`async_sinatra`gem 来实现异步路由，但我在某处看到一篇文章说可以使用 Sinatra 的流 API 来代替`async_sinatra`此目的。可以使用流实现与以下相同的功能吗？

```
require 'em-hiredis'
require 'sinatra/async'

class App < Sinatra::Base
  register Sinatra::Async

  def redis
    @redis ||= EM::Hiredis.connect
  end

  aget '/' do
    redis.blpop('abcdef', 15).
      callback {|x| body "x=#{x}"}.
      errback {|e| body "e=#{e}"}
  end

  run! if app_file == $0
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:10:27.323

回答我自己的问题：

```
require 'em-hiredis'
require 'sinatra/base'

class App < Sinatra::Base
  def redis
    @redis ||= EM::Hiredis.connect
  end

  get '/' do
    stream :keep_open do |out|
      redis.blpop('abcdef', 15).callback do |x|
        out << "x=#{x}"
        out.close
      end.errback do |e|
        out << "e=#{e}"
        out.close
      end
    end
  end

  run! if app_file == $0
end 
```

# javascript - javascript检查复选框是否未选中不隐藏div onload

> ID：14993389
> 
> 赞同：0
> 
> 时间：2013-02-21T02:03:25.033
> 
> 标签：javascript, jquery, html, cookies, checkbox

如果选中了复选框，我正在检查页面，如果没有，我想隐藏一个 div。我不确定这是否是由于我的 div 没有内联元素，但无论如何我都不能使用该方法。我还使用 cookie 来记住为每个用户选择的选项。cookie 部分工作正常，只是隐藏 div 不起作用。这是代码：

```
 function setCookie(c_name,value,expiredays) {
    var exdate=new Date()
    exdate.setDate(exdate.getDate()+expiredays)
    document.cookie=c_name+ "=" +escape(value)+((expiredays==null) ? "" : ";expires="+exdate)
}

function getCookie(c_name) {
    if (document.cookie.length>0) {
        c_start=document.cookie.indexOf(c_name + "=")
        if (c_start!=-1) { 
            c_start=c_start + c_name.length+1 
            c_end=document.cookie.indexOf(";",c_start)
            if (c_end==-1) c_end=document.cookie.length
                return unescape(document.cookie.substring(c_start,c_end))
        } 
    }
    return null
}

function checkCookie(){
document.getElementById('john').checked = getCookie('calOption1')==1? true : false;
document.getElementById('steve').checked = getCookie('calOption2')==1? true : false;
$(document).ready(function() {
    if ($('#john').is(':checked')) {
       $('.ms-acal-color2').css('display', 'block');
    }else{
    $('.ms-acal-color2').css('display', 'none');
    }
});

$('#john').change(function() {
if (this.checked) { //if ($(this).is(':checked')) {
      $('.ms-acal-color2').css('display', 'block');
} else {
      $('.ms-acal-color2').css('display', 'none');
};
}); 

}

function set_check(){
setCookie('calOption1', document.getElementById('john').checked? 1 : 0, 100);
setCookie('calOption2', document.getElementById('steve').checked? 1 : 0, 100);
} 
```

编辑：这是html代码

```
<div style="float: left;">
  <div id="myForm">
    <input type="checkbox" onchange="set_check();" id="john"/>
    <label>Show John</label>
      <input type="checkbox" onchange="set_check();" id="steve"/>
      <label>Show Steve</label>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:44:50.290

你的代码是一团糟:)你不应该用jquery加入javascript sintax，只使用其中一个......

您还混淆了一些事情，您正在函数中添加文档就绪侦听器，以及其他事件侦听器......

我清理了你的代码，在这里查看结果：http: [//jsfiddle.net/Hezrm/](http://jsfiddle.net/Hezrm/)
要查看它与 cookie 一起使用：http: [//jsfiddle.net/promatik/Hezrm/show](http://jsfiddle.net/promatik/Hezrm/show)

以下是**Javascript**中的更改：

```
// In the Document Ready listener you are going to check cookies and
// hide "everyone" that is not checked
$(document).ready(function() {
    checkCookie();
    $(".person:not(:checked)").next().hide();
});

// This is a change eventlistener that will hide or show people at runtime
$('#john, #steve').change(function() {
    if( $(this).is(':checked') ) $(this).next().show();
    else $(this).next().hide();
    set_check(); // And save changes to cookies
}); 

function checkCookie(){
    $('#john').attr("checked", getCookie('calOption1') == 1 ? true : false);
    $('#steve').attr("checked", getCookie('calOption2') == 1 ? true : false);
}

function set_check(){
    setCookie('calOption1', $('#john').is(':checked')? 1 : 0, 100);
    setCookie('calOption2', $('#steve').is(':checked')? 1 : 0, 100);
} 
```

我还添加了一个类`.person`，以便更容易隐藏或显示复选框：

```
<input type="checkbox" id="john" class="person"/> 
```

# java - Java 对 for-each 元素做了什么以使它们成为对象类型？

> ID：14993391
> 
> 赞同：0
> 
> 时间：2013-02-21T02:03:39.367
> 
> 标签：java, foreach, hashtable

这个问题是关于如何处理 Java for-each 循环中的元素。我有一个 hashTable，它是一个 LinkedLists 数组。LinkedList 节点的数据部分包含`TableEntry<K,V>`，其中 K 和 V 是键和值类型。

我编写了一个 for 循环来查看 LinkedList 中的每个 TableEntry，检查一个键是否等于 TableEntry 键。语法有点难看，所以我想也许 for-each 循环会更优雅/简单。

确实写起来更简单。但是，当我完成我的 IDE 时抱怨 element.getValue() 是 Object 类型，而不是 V 类型。我在语句前面放了一个类型转换为 V 并且它停止抱怨。我还没有测试过这段代码，但我想知道，首先这是一种可以接受的做法吗？其次，即使元素具有类型 V 的方法，为什么元素最终会成为 Object 类型？

```
@Override
public V getValue(K key)
{
    int index = getHashIndex(key);
    if(hashTable[index] != null)
    {

        //Standard for loop
        for(int i = 0; hashTable[index].get(i) != null; i++)
        {
            if(hashTable[index].get(i).getKey().equals(key))
            {
                return hashTable[index].get(i).getValue();
            }
        }

        //For-each loop should do same thing?
        for(TableEntry element : hashTable[index])
        {
            if(element.getKey().equals(key))
            {
                return (V) element.getValue();
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T02:08:53.313

您在增强的 for 循环中省略了通用参数。因此，您`TableEntry`基本上默认为`TableEntry<Object, Object>`（IDE 将突出显示这种未泛化的使用，并且编译器会警告它。尝试更改您的 enhanced-for 以包含必要的参数：

```
for(TableEntry<K, V> element : hashTable[index]) {
    if(element.getKey().equals(key)) {
        return element.getValue();
    }
} 
```

至于为什么您的“标准”循环有效，您的哈希表必须使用泛型参数声明，以便编译器知道您尝试访问的类型。

# java - 制作我自己的 AsynchronousSocketChannel

> ID：14993394
> 
> 赞同：1
> 
> 时间：2013-02-21T02:03:50.277
> 
> 标签：java, networking, asynchronous, nio, java-7

我正在制作一个需要将加密数据从一台 PC 发送到另一台的程序。我想知道是否可以以某种方式扩展 AsynchronousSocketChannel.write 和 AsynchronousSocketChannel.read 的功能来为我做这件事，而不是每次都显式地加密/解密数据然后使用 AsynchronousSocketChannel 发送数据。不过，似乎 AsynchronousSocketChannel.write 是一种最终方法。有什么方法可以制作我自己的 AsynchronousSocketChannel，或者这是否违反直觉？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:19:08.173

您可以将其包装在您自己的类中：

```
import java.nio.ByteBuffer;
import java.nio.channels.AsynchronousSocketChannel;
import java.util.concurrent.Future;

public class EncryptedAsynchronousSocketChannel {
    private AsynchronousSocketChannel channel;
    public Future<Integer> read(ByteBuffer dst){
        return channel.read(dst);
    }
    public Future<Integer> write(ByteBuffer src){
        return channel.write(src);
    }
} 
```

# jquery - 调整 jQuery BlockUI 插件的默认行为

> ID：14993401
> 
> 赞同：2
> 
> 时间：2013-02-21T02:04:37.937
> 
> 标签：jquery, blockui

我想更改[jQuery BlockUI 插件](http://jquery.malsup.com/block/#overview)的默认行为。我想要：

1.  摆脱出现在非活动内容上方的白框。
2.  避免在`Please Wait...`元素被阻止时默认显示的消息。
3.  显示默认鼠标光标（不是沙漏/请稍候），当它在被阻止的元素上时。

如果无法更改，那么我可以用灰色蒙版在容器 div 上阻止元素的适当方法是什么。

我的 jQuery 代码是：

```
function showResult(response){
    if (response.indexOf("Submission Successful") != -1){
        $("#confirmform").css("display","block");
        $("#middle").block({css: {backgroundColor: '#E0EBEB'}});
        $("#leftside").block({css: {backgroundColor: '#E0EBEB'}});
        $("#rightside").block({css: {backgroundColor: '#E0EBEB'}});
    } else if (response.indexOf("Invalid E-mail") != -1){
        //display error, no blocking
    } else if (response.indexOf("Nothing in Box") != -1){
        //do nothing
    } else {
        //do nothing
    }
} 
```

这是我看到的行为截图：

![在此处输入图像描述](../Images/0be488abbf82c0020caaa1f3488d58ae.png)

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T12:12:18.713

似乎是什么问题？在这里给出的所有问题的答案都在 jQuery BlockUI 页面上。在[常见问题](http://www.malsup.com/jquery/block/#faq)部分中，您可以找到示例，如何更改默认消息：

```
$.blockUI.defaults.message = "Please be patient..."; 
```

或覆盖：

```
// use yellow overlay 
$.blockUI.defaults.overlayCSS.backgroundColor = '#ff0'; 

// make overlay more transparent 
$.blockUI.defaults.overlayCSS.opacity = .2; 
```

以及更多示例。

而[选项](http://www.malsup.com/jquery/block/#options)页面为您提供有关 BlockUI 的每个选项以及如何以及何时覆盖它们的详细信息。

# sql - SQL 在 EAV 模型中，nvarchar 的长度是否重要？

> ID：14993402
> 
> 赞同：-3
> 
> 时间：2013-02-21T02:04:53.500
> 
> 标签：sql, entity-attribute-value, nvarchar

我正在寻找建立一个实体-属性-值表模型，我希望表在其中处理各种数据。我想使用`nvarchar(max)`，但我担心它可能会影响数据库性能（即使大多数数据都在 50 个字符以下）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:15:06.587

然后不要使用`nvarchar(max)`; 它将被视为`TEXT`. 您已经在使用不太理想的模型。有什么理由不能使用`varchar`吗？

在定义的[长度](http://social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/4d9c6504-496e-45ba-a7a3-ed5bed731fcc)与`max`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T02:16:21.983

不，通常定义的 NVARCHAR 列的最大长度不会影响数据库的性能。性能可能会受到*实际*存储在记录中的数据量的影响，但如果列被索引（假设您谈论的是值而不是属性列，则不太可能出现在 EAV 模型中）。

我说“一般”是因为您没有指定您正在使用哪个数据库，并且可以想象一些存储方案，其中定义的长度确实会产生影响。

# php - 如何批量编辑 Wordpress 图片以添加标题和 alt 属性？

> ID：14993408
> 
> 赞同：2
> 
> 时间：2013-02-21T02:05:19.920
> 
> 标签：php, wordpress

我目前正在为客户做 SEO，不幸的是我在看到工作规模之前引用了他，所以现在我被 2,000 多个没有标题/alt 标签的图像条目困住了。

我试过[https://forrst.com/posts/Add_Missing_Alt_tags_to_Images_WordPress_Conte-DMO](https://forrst.com/posts/Add_Missing_Alt_tags_to_Images_WordPress_Conte-DMO)

还有 SEO Friendly Images 插件和其他一些插件都没有成功。

我的问题是有没有办法批量编辑图像？

干杯。

# ruby-on-rails-3 - 如何在 AREL 中将表连接到自身以查找重复项？

> ID：14993410
> 
> 赞同：2
> 
> 时间：2013-02-21T02:05:24.520
> 
> 标签：ruby-on-rails-3, postgresql, activeadmin, arel

我有一个表 ,`transactions`可能包含重复项（对我们来说，重复项是`Transaction`具有相同`account_id`的`date`, 和`amount`）。

我的英语功能要求是“我想查看所有存在超过 1 笔具有相同 account_id、日期和金额的交易的交易”。

暂时放弃 AREL，我在 SQL 中产生了这样的东西：

```
SELECT * FROM transactions t1, transactions t2
    WHERE t1.id != t2.id 
      AND t1.date = t2.date
      AND t1.amount = t2.amount
      AND t1.account_id = t2.account_id 
```

我正在使用 Rails 3.2.x 和 Postgres。

最初，我在 AREL 中尝试过：

`Transaction.group(:account_id, :date, :amount).having("count(id) > 1")`

但这给了我关于聚合函数的 SQL 错误：

```
PG::Error: ERROR:  column "transactions.id" must appear in the GROUP BY clause or be used in an aggregate function 
```

.. 这令人沮丧，因为我*不*希望 group by 子句中的 ID - 重点是我希望在检查欺骗时忽略 ID。

如果有人能指出我需要将其设为范围的 AREL 的正确方向，我将不胜感激——`find_by_sql`当您需要记录时非常好，但我正在尝试创建 ActiveAdmin 范围——它不喜欢数组.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:58:04.333

您可以在 ActiveRecord 事务模型中使用 sql 定义范围，如下所示：

```
scope :duplicate_transactions, where(<<-eosql.strip)
  transactions.id IN (
      SELECT 
          t1.id 
      FROM 
          transactions t1, transactions t2
      WHERE 
          t1.id != t2.id AND
          t1.date = t2.date AND
          t1.amount = t2.amount AND
          t1.account_id = t2.account_id
  )
eosql 
```

但是随后涉及到 id.. 可能不是您想要的，因为这是一个昂贵的查询。至少创建一个非唯一索引

```
date, amount, account_id 
```

对于这张桌子。这应该可以为您节省一些*全表行扫描*......另一种方法是执行类似的操作

```
Transaction.joins(<<eosql.strip)
  LEFT OUTER JOIN transactions t ON 
      transactions.id         != t.id AND
      transactions.date        = t.date AND
      transactions.amount      = t.amount
eosql 
```

两种方式都很昂贵，内存方面。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:15:26.303

如果您愿意将结果以多行形式返回给您，您可以尝试以下操作：

```
select account_id, amount, day, group_concat(id) 
  from purchases 
 group by account_id, amount, day having count(id) > 1; 
```

这将返回一个结果集，其中每行包含给定帐户、日期和金额的重复项。

[http://sqlfiddle.com/#!2/86e43/17](http://sqlfiddle.com/#!2/86e43/17)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T23:55:51.930

也许像

```
def similar
  table = self.class.arel_table
  conditions = %w[ date amount ].map { |field| table[field].eq send(field) }.map &:to_sql
  self.class.where "id != #{ id } AND #{ conditions.join ' AND ' }"
end 
```

# ruby - 如何在 Ruby 中播放 wav 文件？

> ID：14993412
> 
> 赞同：4
> 
> 时间：2013-02-21T02:05:26.377
> 
> 标签：ruby, audio, wav, ruby-1.9.3

什么是从 Ruby 播放 wav 格式的音频文件的好方法？

OSX 或 Ubuntu...

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T02:20:17.940

我已经使用[Gosu](https://github.com/jlnr/gosu)在简单的游戏环境中播放音频，所以我想它对你来说会很好......

```
@tune = Gosu::Song.new(window, "tune.wav")
@tune.play(true) 
```

# jquery - 加载动态树表

> ID：14993416
> 
> 赞同：0
> 
> 时间：2013-02-21T02:05:35.587
> 
> 标签：jquery, dynamic, treetable

我目前正在使用 JQuery TreeTable 插件（[http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/)）。该插件非常棒，除了我的网页依赖于动态内容并且当我将数据附加到表格时，没有格式。它变得几乎像一个普通的表格（表格失去了缩进等格式，展开和折叠节点的能力等）。因此，我的问题是：有什么办法可以解决这个问题，或者是否有另一个 JQuery 插件更适合我所追求的那种动态功能？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:07:49.457

Use appendBranchTo(destination), for dynamic appending of tree nodes.

# ios - UITableViewController 由 UINavigationController 持有

> ID：14993421
> 
> 赞同：0
> 
> 时间：2013-02-21T02:06:00.250
> 
> 标签：ios, uinavigationcontroller, uitableview

我的目标是制作`UITableView`具有一定水平的导航。我将使用的只是表格视图，所以我真的很想使用`UITableViewController`and `UINavigationController`。

我创建了一个子类`UITableViewController`，这里是`xib`文件：

![在此处输入图像描述](../Images/5dab719d0ae441152bf6b5ae50a400bb.png)

它是自动生成的，因为该类是 UITableViewController 子类。获得导航栏是否足够，或者我应该在xib上添加一些东西。

文件中的相关代码`.m`如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITableViewController *tableViewController=[[UITableViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    UINavigationController *navController=[[UINavigationController alloc]initWithRootViewController:tableViewController];
    self.view.window.rootViewController=navController;

    //Create the modal for the UITableView
    array1=[NSArray arrayWithObjects:@"Categorie 1",@"Categorie 2",@"Categorie 3",@"Categorie 4",@"Categorie 5",@"Categorie 6",@"Categorie 7",@"Categorie 8",@"Categorie 9",@"Categorie 10", nil];

} 
```

这就是我得到的：

![在此处输入图像描述](../Images/464d74f12c3cfa8ce3a77a761053a1f2.png)

我正在等待在视图顶部看到一个导航栏。我知道我错过了一些东西，所以请耐心等待并提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:16:37.083

在你的`MainWindow.xib`，你必须拖一个`UINavigationController`，然后一个`UITableViewController`。将类设置`UITableViewController`为您的表视图控制器子类。还要确保表视图控制器设置为导航控制器的根。

# arrays - 随机数组排序

> ID：14993422
> 
> 赞同：-2
> 
> 时间：2013-02-21T02:06:12.927
> 
> 标签：arrays, sorting

是否可以为以下代码对随机生成的整数数组进行排序（升序）？如果，那怎么办？

导入 java.util.Random；

公共类 RandomArraySorter {

```
 public static void main(String args[]){
        Random random = new Random();

        int array[] = new int[10];

        //number of integer spaces within the array:
        for(int i = 0; i < 10; i++){

        //random numbers from 1 to 100:
        array[i] = random.nextInt(100) + 1;

           System.out.print(array[i] + " ");
        }
    } //end of main
} //end of class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:16:10.907

您可以使用以下方式排序：

```
Arrays.sort(array); 
```

# c - 信号队列问题（我认为）

> ID：14993423
> 
> 赞同：1
> 
> 时间：2013-02-21T02:06:25.513
> 
> 标签：c, signals

我对使用信号和处理程序非常陌生。我的任务是创建一个调度程序。当我制作的一些基本程序首次运行时，它会向调度程序发送一个信号，以便将其添加到调度程序的队列中。然后程序自行停止，从现在开始只有调度程序可以启动/停止它。我将 sigqueue 与 SIGRTMIN 一起使用，因为有人告诉我这些允许信号排队。这很重要，因为调度程序必须根据程序请求添加到调度程序列表的顺序为程序分配时间片。我认为我的程序运行良好，除非我同时创建 2 个以上的基本类型程序。我猜测同时向调度程序发送了太多信号，这会导致奇怪的问题（即使信号应该排队......

这是我的调度程序中的一些代码。

```
//setting up sigaction
struct sigaction sigact;
sigemptyset(&sigact.sa_mask);
sigaddset(&sigact.sa_mask, SIGRTMIN);
sigact.sa_flags = SA_SIGINFO;
sigact.sa_sigaction = sigHandler;
sigaction(SIGRTMIN, &sigact, NULL);

//the actual signal handler function
void sigHandler(int sigNum, siginfo_t *info, void *unused)
{
    if (sigNum == SIGRTMIN)
    {
        pid_t nextWorker = info->si_pid;
        insert_pid(&pid_q, nextWorker);
        fprintf(stdout, "PID: %d added to queue.\n", nextWorker);
        fflush(stdout);
    }
} 
```

请帮我看看发生了什么！:)

# iphone - 从 Dropbox 加载文件

> ID：14993424
> 
> 赞同：1
> 
> 时间：2013-02-21T02:06:40.227
> 
> 标签：iphone, ios, xcode, dropbox, dropbox-api

我一直在关注 iOS 平台的 Dropbox[教程](https://www.dropbox.com/developers/core/files#ios)。我遇到了这行代码到`load`一个文件。

```
[[self restClient] loadFile:dropboxPath intoPath:localPath] 
```

在这一行下方，它有一个描述上述代码的小描述框，其中指出：

`Here, srcPath is the path in the user's Dropbox (you probably got this from a metadata object), and destPath is the location on the local device you want the file to be put after it has been downloaded. To find out when the file download either succeeds or fails implement the following DBRestClientDelegate methods:`

1）首先，没有`srcPath`也没有`destPath`. 因此，代码或代码描述已过时/不正确。

2）其次，什么是`dropboxPath`？我假设它是我想从 Dropbox 加载的文件。如果是这样，我如何指定我想要的文件？

3) 如果我从 Dropbox 加载一个 .sqlite 文件，我究竟想将该文件加载到哪里？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:12:53.763

1) DropboxPath 是您的文件存储在相应 Dropbox 帐户中的在线路径。

2) 源路径为 DropboxPath，目标路径为您手机上的路径，即文档目录。所有文件都应下载到文档目录或文档目录的其他目录中。

3) 您的 .sqlite 文件应仅加载到文档目录中。但是项目代码应该使用它的 NSPath 来使用这个文件。

有一个快乐的编码。！享受。！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:23:10.670

dropboxPath 将指示文件*在应用程序的 Dropbox 目录*中的位置。例如，如果您的应用名为 APP01，那么用户的 Dropbox 登录名将有一个 APP01 目录。要从中获取文件，您可以将其指定为 @"/theFile.txt"，Dropbox API 应该从用户帐户中获取 APP01/theFile.txt。当您创建开发 ID 以连接到用户帐户时，Dropbox 会将您对用户帐户的访问权限沙盒化。

localPath 应该在您的应用程序的沙箱中，您可以使用类似

```
+ (NSString*) GetDocumentDirectory
{
    NSArray *paths =
    NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return ((paths != nil) && ([paths count] > 0)) ? [paths objectAtIndex:0] : nil;
} 
```

您可以将本地文件名附加到从 GetDocumentDirectory 返回的内容中。

# asp.net-mvc-3 - 在视图中获取路线 {id} 值？

> ID：14993428
> 
> 赞同：1
> 
> 时间：2013-02-21T02:07:03.223
> 
> 标签：asp.net-mvc-3, asp.net-mvc-viewmodel

我知道我是否有类似`/controller/action/{id}`可以访问 id 作为函数参数的东西。但是我如何在不使用 viewbag 的情况下通过视图访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:02:37.343

您可以将该函数参数作为模型的一部分传递给视图。该模型可以是静态或动态类型的。下面的示例代码演示了如何将值作为属性传递给动态模型。

```
public ActionResult Edit(string id)
{
    dynamic model = new System.Dynamic.ExpandoObject();
    model.Id = id;
    return View(model);

} 
```

您将在视图中访问此值，如下所示：

```
@Model.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:13:05.170

您可以在视图中解析 URL 以获取 ID：

```
var id = Request.Url.LocalPath.SubString(LastIndexOf("/",Request.Url.LocalPath)+1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:11:08.440

它将直接放入`ViewBag.id`或您可以通过 访问它`ViewData["id"]`。嘿，看起来像同一个物体

# django - 如何查找当前的 Django 应用程序名称

> ID：14993431
> 
> 赞同：1
> 
> 时间：2013-02-21T02:08:35.600
> 
> 标签：django

我有一个应用程序。我想我知道这个名字，instamagic，但我明白了**`django.core.exceptions.ImproperlyConfigured: App with label instamagic could not be found`**

当我尝试迁移数据库时

如何找到我的应用名称？

我的文件夹结构

```
instamagic
   __init__.py  (empty file)
   manage.py
   settings.py
   urls.py
   api/
   image/
   templates/
   userprofile/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:18:55.070

您是否在 settings.py 中将“instamagic”添加到您的 INSTALLED_APPS 中？

[编辑]

调用南迁移时，使用：`manage.py schemamigration [migration_name] --auto

# shell - 用于在文件和目录上添加扩展名的 Shell 脚本

> ID：14993433
> 
> 赞同：1
> 
> 时间：2013-02-21T02:08:38.090
> 
> 标签：shell

我需要帮助来编写一个脚本，该脚本将接收当前目录中的目录并浏览该目录的参数。

如果找到，并且它是一个和目录，脚本将添加以下扩展名：`.aaa`

但如果它找到一个文件是`pdf`、 或`zip`或`mp3`，它应该添加以下扩展名：`.bbb`

我们假设这些文件还没有任何扩展名

## 例子：

如果它找到目录 hello 它应该将它重新命名为 hello.aaa 如果它找到一个 pdf 文件名 myfile 它将它重新命名为 myfile.pdf，

不确定是否应该使用`case`...`in`或其他东西：

```
#!/bin/sh
for dir in "$@"; do
    for file in "$dir"/*;
    do    
        if [[ -d $file ]]
        then
            ext=dir
        else
            file *
            if ???????? then ext=pdf; # am not sure how to set the condition so that if teh file found is pdf to add the extension PDF.
            else
                if ???????? ext=zip # same thing if teh file found is zip 
                else
                    if ?????? ext=mp3 # samething if the file found is mp3

    done
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:14:59.180

```
#!/bin/sh
for dir in "$@"; do
    for file in "$dir"/*; do
        # protect against empty dirs - the shell just passes a
        # literal asterisk along in this case
        case $file in
        "$dir/*")
             continue
             ;;
        esac
        if [ -d "$file" ]; then
            ext=aaa
            continue
        fi
        case $(file "$file") in
        "gzip compressed"*)
            ext=gzip
            ;;
        "whatever file(1) says for PDFs")
            ext=pdf
            ;;
        "MP3"*)
            ext=mp3
            ;;
        # et cetera
        esac
    done
done 
```

# android - 在 Facebook onComplete 中调用 setAdapter

> ID：14993439
> 
> 赞同：0
> 
> 时间：2013-02-21T02:09:20.570
> 
> 标签：android, facebook-graph-api

我正在使用 Facebook API，但很难获得`ListView`显示数据。我的代码使用片段并膨胀以 a`ListView`作为根的布局。它`ListView`被包裹在另一个`PullToRefreshListView`中以启用[Pull To Refresh](https://github.com/chrisbanes/Android-PullToRefresh)。我还包装了适配器，以便它可以使用 Mark Murphy 的[Endless Adapter](https://github.com/commonsguy/cwac-endless)。如果我在创建片段之前加载所有 Facebook 数据，一切正常。但是我想创建一个空的片段，`ListView`并在异步获取 Facebook 数据后填充它。

我`onComplete(Response response)`在 Facebook 中使用了回调方法，但由于某种原因`Request`，我似乎无法`setAdapter(adapter)`在该方法之外使用。`onCreateView()`我觉得我只是错过了一些非常简单的东西。这是代码：

```
JSONArray newsFeed;
View view;
ListView feedList;
PullToRefreshListView refreshFeedList;

Request initialFeedRequest = new Request(session, "me/home", null, HttpMethod.GET, new Request.Callback() {

    @Override
    public void onCompleted(Response response) {
        Log.i("NewsFeed", "initial load onComplete");
        Log.i("NewsFeed",response.toString());
        responseObject = response.getGraphObject().getInnerJSONObject();
        try {
            newsFeed = responseObject.getJSONArray("data");
        } catch (JSONException e) {
            e.printStackTrace();
        }
        feedAdapter = new FeedAdapter(getActivity(), Space.newsFeed);
        endlessAdapter = new EndlessFeed(feedAdapter);
        feedList.setAdapter(endlessAdapter);
        refreshFeedList.setOnRefreshListener(refreshListener);
        nextPageRequest = response.getRequestForPagedResults(PagingDirection.NEXT);
        String test = feedAdapter.getItem(0).toString();
        Log.i("NewsFeed", "First Item: " + test);
    }
});

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    view = inflater.inflate(R.layout.news_feed, container, false);
    if(feedAdapter==null){
        Log.i("NewsFeed", "executing Request");
        initialFeedRequest.executeAsync();
    }
    else{
        feedAdapter = new FeedAdapter(getActivity(), Space.newsFeed);
        endlessAdapter = new EndlessFeed(feedAdapter);
        feedList.setAdapter(endlessAdapter);
        refreshFeedList.setOnRefreshListener(refreshListener);
    }
    refreshFeedList = (PullToRefreshListView) view.findViewById(R.id.feedList);
    feedList = refreshFeedList.getRefreshableView();
    feedList.setDividerHeight(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:03:24.937

这是因为

```
refreshFeedList = (PullToRefreshListView) view.findViewById(R.id.feedList);
feedList = refreshFeedList.getRefreshableView();
feedList.setDividerHeight(0); 
```

此代码在之前执行：

```
feedList.setAdapter(endlessAdapter); 
```

在完成。因为你已经调用`initialFeedRequest.executeAsync();`了，这意味着请求在 UI-Thread 旁边的不同线程中执行。你必须执行

```
refreshFeedList = (PullToRefreshListView) view.findViewById(R.id.feedList);
feedList = refreshFeedList.getRefreshableView();
feedList.setDividerHeight(0); 
```

`onComplete`完成工作后

还有一件事，你应该返回一个视图，`onViewCreate()`因为它的返回类型是`View`

**编辑：**

将您`responseObject`的 SharedPreference 放入`onCopmlete`：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getActivity());
SharedPreferences.Editor editor = prefs.edit();
editor.putString("responseObject", responseObject.toString());
editor.commit(); 
```

取回你`responseObject`的其他情况：

```
JSONObject responseObject;
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getActivity());
String responseObjectString = prefs.getString("responseObject");
if(responseObjectString != null) 
    responseObject = new JSONObject(responseObjectString);
newsFeed = responseObject.getJSONArray("data");

feedAdapter = new FeedAdapter(getActivity(), newsFeed); // use the newsFeed we get from SP
endlessAdapter = new EndlessFeed(feedAdapter);
feedList.setAdapter(endlessAdapter);
refreshFeedList.setOnRefreshListener(refreshListener); 
```

如果您想使用应用程序类，请参阅： [应用程序类教程](http://www.helloandroid.com/tutorials/maintaining-global-application-state)

那么你也必须改变你的清单：

```
<application 
   android:label="@string/app_name"
   android:allowBackup="true"
   android:icon="@drawable/ic_launcher"
   android:name=".Your_Application_class_name">
// other components. ....

</application> 
```

# c++ - C++ 继承 - 如何使用指向基类对象的指针访问子方法

> ID：14993441
> 
> 赞同：5
> 
> 时间：2013-02-21T02:09:47.987
> 
> 标签：c++, arrays, pointers, inheritance

我有一个处理继承的任务。

我有一个 Employee() 基类，Manager() 和 Intern() 继承自该基类。

我的导师给了我们以下指示：

在 main() 中声明一个人员指针数组并将它们初始化为以下记录：

```
Manager("IT", 100, "MF1", "ML1")
Manager("HR", 50, "MF2", "ML2")
Intern("SIUE", 0, "IF1", "IL1")
Intern("SLU", 0, "IF2", "IL2") 
```

然后我必须循环并显示数组。他作为示例提供的输出表明，必须调用 Manager() 和 Intern() toString() 方法，因为输出了与子类相关的特定信息。但是，在访问数组时，我得到的是员工指针，而不是指向孩子的指针。我附上了他提供的截图。

![我的输出需要的屏幕截图](../Images/fa6bd390093b2d2ee668db894cc026c2.png)

我不确定我应该如何做到这一点。

这是我的员工数组声明：

```
Employee * staff = new Employee[4]; 
```

我无法存储指向我不认为的 Manager() 对象的指针。除非有某种方式我可以扇动这个：

```
staff[0] = new Manager("IT", 100, "MF1", "ML1"); 
```

看来我唯一的选择是做这样的事情（顺便说一句，我将如何在一行中做到这一点？）：

```
Employee * e = new Manager("IT", 100, "MF1", "ML1");
staff[0] = *e; 
```

但显然现在当我这样做时：

```
cout << staff[0].toString(); 
```

我将获得基类 Employee() toString() 方法，而不是子类。

以下是 Employee() 和 Manager() 的以下两个类定义，以防相关：

```
class Employee{

private:
    int eid;
    string firstName;
    string lastName;

public:
    Employee();
    Employee(int eid, string fname, string lname);
    void setEID(int eid);
    void setFirstName(string fname);
    void setLastName(string lname);
    int getEID();
    string getFirstName();
    string getLastName();
    virtual string toString();
};

class Manager : public Employee, IPayable{

private:
    string department;

public:
    Manager();
    Manager(string dept, int eid, string fname, string lname);
    double pay();
    void setDepartment(string d);
    string getDepartment();
    string toString();
}; 
```

下面是我假设我将如何实现 2 个 toString() 方法，其中 Employee toString() 嵌入在 Manager() toString() 中：

```
string Employee::toString(){
    return "{eid = " + std::to_string(getEID()) + ", firstName = " + getFirstName() + ", lastName = " + getLastName() + "}";  
}

string Manager::toString(){
    return "Manager{" + Employee::toString() + ", department = " + getDepartment() + ", salary = " + std::to_string(pay()) +"}";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:14:38.563

你想要的是一个指针数组：

```
Employee *staff[4]; 
```

现在您可以分配指向 Employee 的指针，从而将指向 Employee 子级的指针分配给它：

```
staff[0] = new Manager("IT", 100, "MF1", "ML1"); 
```

然后你可以调用 Employee 的函数：

```
staff[0]->toString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T02:15:33.390

这是一种方法：

```
Manager manager1("IT", 100, "MF1", "ML1");
Manager manager2("HR", 50, "MF2", "ML2");
Intern intern1("SIUE", 0, "IF1", "IL1")
Intern intern2("SLU", 0, "IF2", "IL2")

Employee *staff[4] = {
  &manager1,&manager2,&intern1,&intern2
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T02:19:51.977

```
typedef std::unique_ptr<Employee> EmployeePtr;
typedef std::array<EmployeePtr,4> Employees;
Employees employees =
{
    new Manager("IT", 100, "MF1", "ML1"),
    new Manager("HR", 50, "MF2", "ML2"),
    new Intern("SIUE", 0, "IF1", "IL1"),
    new Intern("SLU", 0, "IF2", "IL2")
}; 
```

已存储。还有什么？如何访问。

```
employees[0]->toString(); 
```

完毕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T02:16:26.833

> 我无法存储指向`Manager`我不认为的对象的指针

是的你可以。或者至少，您可以拥有一个指向 type`Employee*`对象的指针`Manager`。毕竟，`Manager`s*是* `Employees`（这就是你的继承所说的），所以这是有道理的。

由于您的`toString()`函数被标记为`virtual`并覆盖其实现，因此当通过 type 的指针在 type`Manager`的对象上调用时，将选择的专门实现。`Manager``Employee*``Manager`

另一方面，以下内容不会编译（您正在将对象值分配给指针值）：

```
staff[0] = *e; 
```

所以不要尝试。相反，使用这个：

```
staff[0] = new Manager(...);
...
staff[0]->toString(); 
```

最后一点，当你使用原始指针时，不要`delete`在它们超出范围之前忘记它们，否则你会出现内存泄漏。事实上，您应该考虑使用*智能指针*，它会自动处理对象的生命周期。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T02:26:37.900

看来您的类是继承，而不是数组，所以我将只使用向量..

```
std::vector<Employee*> staff;

staff.push_back(new Manager);
staff.push_back(new Intern); 
```

您现在有一个充满`Employee`指针的数组。的`toString()`方法`Employee`是虚拟的，因此这将调用您分配的每个对象`Manager`的成员方法。`Intern`

```
staff[0]->toString(); // Manager toString()
staff[1]->toString(); // Intern toStrin() 
```

完成后记得释放内存！

# java - 为什么选择 Java PriorityQueue 不强制使用 Comparable Object

> ID：14993442
> 
> 赞同：2
> 
> 时间：2013-02-21T02:10:26.783
> 
> 标签：java, generics, collections, priority-queue

为什么Java中的PriorityQueue定义为，

`PriorityQueue<T>`

而不是，

`PriorityQueue<T extends Comparable<? super T>`

如果不对 Comparable 类型的对象进行排队，它会在运行时给出 ClassCastException。（如果我没有使用自定义比较器）。

为什么不在编译时捕获它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T02:13:10.087

这样做是为了让您仍然可以为未实现该`Comparable`接口的对象使用优先级队列。在这种情况下，您只需提供自己的自定义比较器，一切正常。

这增加了类的可用性，成本最低甚至没有。此行为在[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)中有详细记录。

# asp.net-mvc - AngularJS $routeProvider 和 ASP.NET MVC 中的相对 URL

> ID：14993444
> 
> 赞同：3
> 
> 时间：2013-02-21T02:10:39.497
> 
> 标签：asp.net-mvc, angularjs, hashbang

我对 AngularJS 完全陌生。只是想尝试使用 $routeProvider 的相对 URL。

这是场景：

我有一个“编辑”页面，该页面的 ASP.NET MVC 链接是：

```
http://localhost/Workflow/Edit 
```

所以 ASP.NET MVC 控制器是“WorkflowController”，动作是“编辑”。对于 Partials，我有 Controller 操作，每个操作都返回一个 Partial View，如下所示：

```
 public ActionResult WorkflowTransition()
    {
        return PartialView("WorkflowTransition");
    }

    public ActionResult WorkflowTransitionApprovers()
    {
        return PartialView("WorkflowTransitionApprovers");
    } 
```

以下是 AngularJS 模块配置 - 注意：为每个路由调用 PartialView（如上所述）（这可能不正确）：

```
 $routeProvider.when('Workflow/WorkflowTransition', {
        templateUrl: '/Workflow/WorkflowTransition',
        controller: 'transitionCtrl',
    });
    $routeProvider.when('Workflow/WorkflowTransitionApprovers', {
        templateUrl: '/Workflow/WorkflowTransitionApprovers',
        controller: 'approversCtrl'

    $routeProvider.otherwise({
        redirectTo: '/'
    }); 
```

注意：我**没有**指定以下任何一项：

> $locationProvider.html5Mode(false);

或者

> $locationProvider.html5Mode(false).hashPrefix('!');

href 链接是这样指定的：

```
<a href="#/Workflow/WorkflowTransition">{{workflow.Identifier}}</a> 
```

这会生成这种形式的链接：

```
http://localhost/Workflow/Edit#/Workflow/WorkflowTransition 
```

这显然是错误的（并且单击链接可能没有任何作用，可能是因为浏览器试图导航到哈希），所以我尝试了前导 '/'，但也没有运气：

```
<a href="/#/Workflow/WorkflowTransition">{{workflow.Identifier}}</a> 
```

如果我直接导​​航部分 ie `http://localhost/Workflow/WorkflowTransition`，浏览器会按原样呈现 html（以及 angularjs 花括号 {{}}）。

我的问题是：AngularJS 如何处理 '#' 或 '#!' 在确定相对 URL 时？例如，这条路线是否可行（假设我从锚标记中的 URL 中删除了 /Edit 部分）：

`$routeProvider.when('Workflow/WorkflowTransition',`匹配网址：

`http://localhost/Workflow/#WorkflowTransition`?

它是否从 URL 中删除了“#”，然后根据 $routeProvider.when() 中的 URL 模式对其进行检查？

有人可以为相对 URL 建议正确的路线吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:25:21.830

根据我的观察，匹配路由时必须删除哈希。我有一个链接

```
<a href="#Objects"> 
```

导致网址

```
http://localhost:55033/#/Objects 
```

我的路线设置是

```
$routeProvider.when("/Objects", {
    templateUrl: "objects.html",
    controller: ObjectCtrl
}); 
```

这可以按预期工作，拉入正确的部分。请注意，在这种情况下，我不是通过 ASP.NET MVC 控制器渲染部分。相反，我将 objects.html 作为纯 html 文件放置，并且我在 href 中使用哈希，因此 ASP.NET MVC 路由不会启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-31T13:03:12.723

Routeprovid 应该设置如下。

```
$routeProvider.when('/Workflow/WorkflowTransition', {
    templateUrl: "WorkflowTransition.html",
    controller: WorkflowTransitionCtrl
}); 
```

和 URL 应输入以下格式。

```
http://localhost/#/Workflow/WorkflowTransition ? 
```

# perforce - 您如何设置 perforce 服务器以通过 Internet 工作？

> ID：14993453
> 
> 赞同：0
> 
> 时间：2013-02-21T02:11:30.867
> 
> 标签：perforce

我正在设置一个 Perforce 服务器，只注意到 localhosts 等选项。我正在尝试做的是在一个家庭的台式计算机上设置服务器，然后能够使用 P4V 客户端连接到它，以通过互联网访问来自另一个家庭的文件。我不，我必须转发一些端口和东西，但是我需要什么设置文件来做到这一点？我只能找到所有在同一网络上运行的服务器的信息，例如在企业中运行的服务器或互联网上的任何东西。我已经建立了一个像这样的团队语音服务器，您可以在其中连接并输入 ip 地址和端口，然后连接到服务器，但这并没有这样的选项，无论如何我已经看到了。这将在 Windows 7 64 位机器上完成。台式机上的服务器和客户端将在台式机和笔记本电脑上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:42:53.040

服务器接受 TCP/IP 连接，该连接可以来自任何具有 TCP/IP 连接的客户端机器。Perforce 服务器配置告诉它要监听哪个 IP 地址和端口号是 P4PORT 设置：[http ://www.perforce.com/perforce/r12.2/manuals/cmdref/env.P4PORT.html](http://www.perforce.com/perforce/r12.2/manuals/cmdref/env.P4PORT.html)

由于您在 Windows 机器上，您的服务器可能会作为 Windows 服务运行，因此其 P4PORT 设置将保存在该服务的注册表部分中。您可以使用注册表编辑器（例如 RegEdit）编辑服务的配置，或者更简单地说，您可以使用“p4 set -S Perforce P4PORT=my-host-name:my-port-number”来指定所需的 IP 地址和端口。

然后从服务控制面板重新启动你的 Perforce 服务，你就可以开始了！

# python - 线性回归\梯度下降python实现

> ID：14993454
> 
> 赞同：3
> 
> 时间：2013-02-21T02:11:32.073
> 
> 标签：python, list-comprehension, linear-regression, gradient-descent

为了学习目的，我正在尝试使用梯度下降法从头开始实现线性回归。我的代码的一部分真的让我很烦。出于某种原因，在我运行一行代码后变量`x`正在被更改，我不确定为什么。

变量如下。`x`并且`y`是 numpy 数组，我在这个例子中给了它们随机数。

```
x = np.array([1, 2, 3, 4, ...., n])
y = np.array([1, 2, 3, , ...., n])
theta = [0, 0]
alpha = .01
m = len(x) 
```

代码是：

```
theta[0] = theta[0] - alpha*1/m*sum([((theta[0]+theta[1]*x) - y)**2 for (x,y) in zip(x,y)]) 
```

一旦我运行上面的代码`x`就不再是一个列表了。它仅成为变量 n 或列表中的最后一个元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T02:17:24.033

是的，`x`正在您的列表理解中重新分配。为什么不直接更改那里使用的变量名，以免被覆盖？

```
theta[0] = theta[0] - alpha*1/m*sum([((theta[0]+theta[1]*x_i) - y_i)**2 for x_i, y_i in zip(x,y)]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T02:18:30.590

发生的事情是 python 正在计算 list `zip(x,y)`，然后你的 for 循环的每次迭代都`(x,y)`用 的相应元素覆盖`zip(x,y)`。当您的 for 循环终止时`(x,y)`包含`zip(x,y)[-1]`.

尝试

```
theta[0] = theta[0] - alpha*1/m*sum([((theta[0]+theta[1]*xi) - yi)**2 for (xi,yi) in zip(x,y)]) 
```

# c# - 插入查询上的 MVC3 异步 jQuery 进度条

> ID：14993461
> 
> 赞同：0
> 
> 时间：2013-02-21T02:12:18.303
> 
> 标签：c#, jquery, asp.net-mvc-3, asynchronous, progress

因此，我试图在一个非常慢且长的查询中添加一个异步进度条，该查询将一堆行插入数据库。我的实现基于这个例子：[http ://blog.janjonas.net/2012-01-02/asp_net-mvc_3-async-jquery-progress-indicator-long-running-tasks](http://blog.janjonas.net/2012-01-02/asp_net-mvc_3-async-jquery-progress-indicator-long-running-tasks)

这是进度条的javascript代码

```
function updateMonitor(taskId, status) {
        $("#" + taskId).html("Task [" + taskId + "]: " + status);
    }
//other code
if (doSend == true) {
            $.post("/SendBatch/HandleBatchRequest", {
                //other code
            },
            function (taskId) {

                // Init monitors
                //breakpoint here does not stop it, it never enters this somehow?
                $("#monitors").append($("<p id='" + taskId + "'/>"));
                updateMonitor(taskId, "Started");

                // Periodically update monitors
                var intervalId = setInterval(function () {
                    $.post("SendBatch/Progress", { id: taskId }, function (progress) {
                    if (progress >= 100) {
                        updateMonitor(taskId, "Completed");
                        clearInterval(intervalId);
                    } else {
                        updateMonitor(taskId, progress + "%");
                    }
                });
            }, 100);
        }       
        ,"html"); 
```

然后是网站显示部分的DIV

```
<div id="monitors"></div> 
```

这是控制器的外观

```
public SendBatchController
    //some code
private static IDictionary<Guid, int> tasks = new Dictionary<Guid, int>();

public ActionResult HandleBatchRequest(
        //some code
    )
    {
        var taskId = Guid.NewGuid();
        tasks.Add(taskId, 0);

        var batchId = Guid.NewGuid().ToString("N");
        var costd = cost.ToDecimal();

        IEnumerable<BatchListModel> customers;

        try
        {
            customers = new CustomerService(_customerRepository.Session).GetCustomers(
                //some code
                );
        }
        catch (Exception err)
        {
            return Json(err.Message);
        }
        if (doSend)
        {
            var sent = 0;

            foreach (var c in customers)
            {
                try
                {
                    var usr = _customerRepository.LoadByID(c.ID);

                    var message = new ComLog
                                      {
                                          //insertions to log
                                      };

                    _comLogRepository.Save(message);
                    sent++;

                    //progress bar part inside here that is important comes here:
                    tasks[taskId] = sent;

                }
                catch (Exception e)
                {
                    Log.WriteLine("ERR:" + e);
                }

                tasks.Remove(taskId);

            }
            return Json(taskId);

        }

        return Json(customers.Count() + " customers");
    }

    public ActionResult Progress(Guid id)
    {
        return Json(tasks.Keys.Contains(id) ? tasks[id] : 100);
    } 
```

这不起作用。该过程在后台运行。只有 div 永远不会出现，也不会给出任何指示。我知道这是要阅读的大量代码，但我真的被困住了，并且希望就如何解决这个问题提供一些意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:21:01.090

尝试将您的`updateMonitor`功能更改为：

```
function updateMonitor(taskId, status) {
    $("#monitors").html("Task [" + taskId + "]: " + status);
} 
```

# android - 来自 HTTP Post Request Android 的空响应

> ID：14993471
> 
> 赞同：5
> 
> 时间：2013-02-21T02:13:18.570
> 
> 标签：android, http, login, android-asynctask

我正在尝试向服务器发出对 php 脚本的请求，该脚本将检查用户是否存在于数据库中。目前我只是想确保我收到某种回应。我尝试输出`responseString`用户按下登录按钮但每次返回为`null`. 有谁知道为什么？？

这是我的`MainActivity`

```
public class MainActivity extends Activity {

EditText username;
EditText password;
Button loginBtn;
LinearLayout loginform;
String passwordDetail;
String usernameDetail;
String url = "http://www.mysite.com/example/checklogin.php";

 String responseString = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Hide the Action Bar
    ActionBar ab;
    ab = this.getActionBar();
    ab.hide();

    //Get references to XML
    username = (EditText)findViewById(R.id.username);
    password = (EditText)findViewById(R.id.password);
    loginBtn = (Button)findViewById(R.id.loginBtn);
    loginform = (LinearLayout)findViewById(R.id.loginform);

    //Animation
    final AlphaAnimation fadeIn = new AlphaAnimation(0.0f , 1.0f ); 
    AlphaAnimation fadeOut = new AlphaAnimation( 1.0f , 0.0f ) ; 
    fadeIn.setDuration(1200);
    fadeIn.setFillAfter(true);
    fadeOut.setDuration(1200);
    fadeOut.setFillAfter(true);
    fadeOut.setStartOffset(4200+fadeIn.getStartOffset());

    //Run thread after 2 seconds to start Animation
    Handler handler = new Handler();
    handler.postDelayed(new Runnable(){

        public void run() {
            //display login form
            loginform.startAnimation(fadeIn);
            loginBtn.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    //display();
                    Toast.makeText(getApplicationContext(), "Checking login details...", Toast.LENGTH_SHORT).show();
                    if(checkLoginDetails()){
                        //OPENS NEW ACTIVITY
                        //Close splash screen
                        //finish();
                        //start home screen 
                        Intent intent = new Intent(v.getContext(), SectionsActivity.class);
                        //startActivity(intent);
                        //creates fade in animation between two activities
                        overridePendingTransition(R.anim.fade_in, R.anim.splash_fade_out);
                        Toast.makeText(getApplicationContext(), "Login Successful" + responseString, Toast.LENGTH_SHORT).show();

                    }
                    else{
                        Toast.makeText(getApplicationContext(), "Login Unsuccessful", Toast.LENGTH_SHORT).show();

                    }
                }
            });

        }

    }, 2000);
}

//Check the login details before proceeding.
public boolean checkLoginDetails(){
    usernameDetail = username.getText().toString();
    passwordDetail = password.getText().toString();
    new RequestTask().execute(url, usernameDetail, passwordDetail);
    return true;
} 
```

这是我请求的 php 脚本 - 目前我已经硬编码了我知道存在于 db 中的详细信息，并且只想专注于获取用户存在的响应。

```
 <?php
mysql_connect("xxx.xxx.xxx.xxx", "username", "password") or die("Couldn't select database.");
mysql_select_db("databasename") or die("Couldn't select database.");

//$username = $_POST['username'];
//$password = $_POST['password'];

$pwdMD5 = md5(123);

$sql = "SELECT * FROM membership WHERE Username = 'user1' AND Password = '$pwdMD5' ";
$result = mysql_query($sql) or die(mysql_error());
$numrows = mysql_num_rows($result);
if($numrows > 0)
   {
    echo 'user found';
    return true;
   }
else
   {
    echo 'user not found';
    return false;

}
   ?> 
```

这是我的`AsyncTask`。

```
 class RequestTask extends AsyncTask<String, String, String>{

    @Override
    protected String doInBackground(String... uri) {
        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response;
        responseString = null;
        try {
            response = httpclient.execute(new HttpPost(uri[0]));
            StatusLine statusLine = response.getStatusLine();
            if(statusLine.getStatusCode() == HttpStatus.SC_OK){
                ByteArrayOutputStream out = new ByteArrayOutputStream();
                response.getEntity().writeTo(out);
                out.close();
                responseString = out.toString();
            } else{
                //Closes the connection.
                response.getEntity().getContent().close();
                throw new IOException(statusLine.getReasonPhrase());
            }
        } catch (ClientProtocolException e) {
            //TODO Handle problems..
        } catch (IOException e) {
            //TODO Handle problems..
        }
        return responseString;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T02:27:03.743

它为空，因为您异步执行代码。当 HTTP 请求尚未完成执行 PHP 脚本时，您 Toast 结果。

尝试将 Toast 放入AsyncTask 类中的**onPostExecute(String result)**方法。

```
@Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        //Toast result. 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-09T05:47:24.243

您没有从响应中得到任何东西，而是将其放入其中...使用 ByteArrayInputStream 而不是输出流.....

# c++ - 未定义的引用

> ID：14993473
> 
> 赞同：-2
> 
> 时间：2013-02-21T02:13:40.743
> 
> 标签：c++, undefined

这是我的tripe.cpp代码

```
//tripe.cpp

#include <iostream>
#include <string>
#include <functional>
#include "tripe.h"
#include <sstream>
#include <fstream>

using namespace std;

Tripe::Tripe()
{
    trie = new Trie();
    heap = NULL;
} 
```

这是我的 trie.h：

```
//trie.h

#ifndef TRIE_H
#define TRIE_H

#include <string>
#include "heapNode.h"
#include "trienode.h"

class Trie
{
    Tnode* root_node;
    public:
        Trie();
        ~Trie(); 
```

编译器说：在函数`Tripe::Tripe()': tripe.cpp:(.text+0x20): undefined reference to`Trie::Trie()'

怎么没有明确定义？我包括了标题文件！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:16:39.877

如果您有一个`trie.cpp`文件，它实际上定义了构造函数`Trie()`，那么您需要编译该文件并将其与您的应用程序链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:16:33.260

这是一个链接器错误。你有这个构造函数的定义（[不仅仅是声明）吗？](http://msdn.microsoft.com/en-us/library/0e5kx78b.aspx)

# android - 多次运行 JUnit 测试会给出不同的结果

> ID：14993474
> 
> 赞同：2
> 
> 时间：2013-02-21T02:13:48.200
> 
> 标签：android, debugging, testing

我的应用程序有一个测试用例，它`TextView`在 Activity 中填充 s，然后模拟单击将`Save`数据提交到数据库的按钮。我用不同的数据重复了几次，调用`Instrumentation.waitForIdleSync()`，然后检查插入的数据是否确实在数据库中。我最近连续运行了 3 次这个测试，没有更改或重新编译我的代码。每次的结果都不同：一个测试运行通过，另外两个测试运行报告数据库中缺少不同的数据项。什么可能导致这种行为？是否可能是由于竞争线程之间的某种竞争条件？当每次运行结果都不同时，如何调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:23:17.730

看起来像一个比赛条件。请记住，在线程世界中，没有办法确保运行时顺序。

我不是 android 开发人员，所以我只是在推测，但 UI 通常只在一个事件线程上，所以当你从另一个线程（你的测试）调用方法时，你可能会因为你不在事件线程之外而破坏它.

您可以尝试使用信号量或更可能是对资源的锁定。 [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html) [http://docs.oracle.com/javase/1.5.0/docs/api /java/util/concurrent/Semaphore.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T02:23:14.547

我（终于！）找到了解决这个问题的方法。我现在呼吁`finish()`被测试`Activity`者确保它与数据库的所有连接都已关闭。当我运行断言时，这似乎可以确保数据的一致性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:43:59.240

我建议对数据库数据进行探测，而不是直接断言。我的意思是制作一段代码，它将在一段时间内不断检查数据库，而不是等待 x 秒（或空闲时间）然后检查，我不在合适的计算机上，所以以下只是伪代码

```
public static void assertDatabaseHasData(String message, String dataExpected, long maxTimeToWaitFor){
    long timeToWaitUntil = System.getCurrentTimeMillis() + maxTimeToWaitFor;
    boolean expectationMatched = false;
    do {
        if(databaseCheck() == dataExpected){
            expecttionMatched == true;
        }
    }while(!expectationMatched  && System.getCurrentTimeMillis() < timeToWaituntil);
    assertTrue(message, expectationMatched);
} 
```

当我使用计算机时，我会尝试重新审视上述内容并使其变得更好（我实际上会使用 hamcrest 而不是断言，但这是个人喜好）

# jquery - CSS：随着浏览器窗口的大小逐渐增加div的宽度

> ID：14993477
> 
> 赞同：3
> 
> 时间：2013-02-21T02:14:04.000
> 
> 标签：jquery, css, responsive-design, media-queries

我有一个 div，我想根据浏览器的大小按比例缩放。我可以使用 js 或 jQuery 轻松做到这一点，但我认为只有 CSS 解决方案。也许媒体查询是一种解决方案，但也许有一个更简单的解决方案？

随着窗口大小增加 100 像素，我想在 div 的宽度上再增加 100 像素。我只想以 100px 的增量增加 div 的宽度，因此使用 % 似乎不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:17:16.783

```
@media all and (min-width: 100px) and (max-width: 200px) {
  div {
    width: 100px;
  }
}
@media all and (min-width: 200px) and (max-width: 300px) {
  div {
    width: 200px;
  }
} 
```

等等...

# wix - 是否有可能（使用 WiX 的 MSI）向“所有用户”宣传快捷方式，但“每个用户”进行实际安装？

> ID：14993478
> 
> 赞同：1
> 
> 时间：2013-02-21T02:14:03.793
> 
> 标签：wix

我的 MSI 安装程序是使用 WiX 编写的。

它安装“每个用户”，以允许非管理员用户安装更新（元素的`InstallScope`属性`Package`设置为`perUser`）。

但是，我希望能够向“所有用户”“[宣传](http://msdn.microsoft.com/en-us/library/aa367548%28VS.85%29.aspx)”该应用程序。理想情况下，当用户单击链接时，安装在“每个用户”上下文中启动，具有他们自己的权限（即未提升）。

**我可以用 WiX 做到这一点吗？怎么做？**

# c# - 使用代码从 word 文档的输入字段中读取值

> ID：14993479
> 
> 赞同：3
> 
> 时间：2013-02-21T02:14:28.350
> 
> 标签：c#, ms-word

我非常接近完成这项工作。基本上我想从 word 文档中读取输入字段。换句话说，我有：

![在此处输入图像描述](../Images/833a310ff386bb548868626a88788d0f.png)

*Hello world*是我通过单击图像上突出显示的*Aa*按钮放置的标签的内容。因此，当我保存该文档时，`Test.docx`我使用代码执行以下操作：

```
using System;
using Microsoft.Office.Interop.Word;

class Program
{
    static void Main(string[] args)
    {
        Application word = new ApplicationClass();
        object miss = System.Reflection.Missing.Value;
        object path = @"a:\Users\Eduardo\Desktop\Test.docx";  // <-------- Path where document is
        object readOnly = false;
        Document document = word.Documents.Open(ref path, ref miss, ref readOnly, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss);

        // here I iterate through all the input fields!!!  <--------------------------
        foreach (ContentControl ff in document.ContentControls)
        {
            var m = ff.PlaceholderText; // for some reason I cannot get the text of the control.
            var b = ff.ShowingPlaceholderText;
            Console.WriteLine(ff.ToString());
        }

        document.Close(ref miss, ref miss, ref miss);
        word.Quit();
    }
} 
```

我能够遍历所有输入字段，我唯一缺少的就是获取控件内的值！

* * *

## 编辑

**终于找到了解决方案**由于某种原因该属性没有出现在调试器上！无论如何要获得该控件的文本，我必须这样做：

```
 Console.WriteLine(ff.Range.Text); 
```

所以我的最终代码现在看起来像：

```
using System;
using Microsoft.Office.Interop.Word;

class Program
{
    static void Main(string[] args)
    {
        Application word = new ApplicationClass();
        object miss = System.Reflection.Missing.Value;
        object path = @"a:\Users\Eduardo\Desktop\Test.docx";  // <-------- Path where document is
        object readOnly = false;
        Document document = word.Documents.Open(ref path, ref miss, ref readOnly, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss);

        foreach (ContentControl ff in document.ContentControls)
        {
            Console.WriteLine(ff.Range.Text);
        }

        document.Close(ref miss, ref miss, ref miss);
        word.Quit();
    }
} 
```

# javascript - If-else JavaScript 不工作

> ID：14993497
> 
> 赞同：0
> 
> 时间：2013-02-21T02:16:44.407
> 
> 标签：javascript, variables, if-statement

这个脚本有什么问题？它会自行重置，第二个 div 永远不会改变。我错过了什么？我在想我可能需要一种更好的方法来处理变量，所以如果有人知道那会很棒。这是我的 jsfiddle 测试脚本：

```
var lang="de";

$('#en').click(function () {
    lang="en";
});
$('#de').click(function () {
    lang="de";
});
$('#es').click(function () {
    lang="es";
});

function showtext() {
    $('#text').text(lang); 
    if (lang="en") {
        $('#cur').text(lang);
    }
    else if (lang="de") {
        $('#cur').text(lang);
    }
    else if (lang="es") {
        $('#cur').text(lang);
    }
}

showtext();

setInterval(function () {
    showtext();
}, 2000); 
```

[jsfiddle](http://jsfiddle.net/Su3RC/155/)上的演示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T02:20:00.373

您的功能正在通过分配`=`，您必须使用比较`==`。

```
function showtext() {
    $('#text').text(lang); 
    if (lang == "en") {
        $('#cur').text(lang);
    }
    else if (lang == "de") {
        $('#cur').text(lang);
    }
    else if (lang == "es") {
        $('#cur').text(lang);
    }
} 
```

[jsFiddle 工作演示](http://jsfiddle.net/Su3RC/156/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:21:59.107

您的比较实际上是以下分配尝试：

```
$('#text').text(lang); 
    if (lang=="en"){
        $('#cur').text(lang);
    }
    else if (lang=="de"){
        $('#cur').text(lang);
    }
    else if (lang=="es"){
        $('#cur').text(lang);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T02:23:59.403

您有一个什么都不做的 if 循环（并且它使用了错误的比较运算符）。试试这个：

[http://jsfiddle.net/Su3RC/158/](http://jsfiddle.net/Su3RC/158/)

```
function showtext() {
    $('#text').text(lang);
    $('#cur').text(lang);
} 
```

# html - 清单文件的刷新率是多少？

> ID：14993500
> 
> 赞同：1
> 
> 时间：2013-02-21T02:17:07.503
> 
> 标签：html, css, manifest

我有一个非常简单的清单文件来缓存我的整个应用程序。它工作得很好，即使在离线时也是如此。

但是，在很久没有使用它之后，我再次打开它，应用程序开始下载所有内容，即使缓存文件和以前一样！

那么，有没有办法阻止浏览器的自动更新呢？**我的意思是，我只希望它在我的清单文件被修改时**再次下载文件。

谢谢！

# iphone - 是否有可能在 Snow Leopard 上获得适用于 Xcode 4.2 的 iOS 6.1 SDK？

> ID：14993504
> 
> 赞同：1
> 
> 时间：2013-02-21T02:17:30.797
> 
> 标签：iphone, ios, xcode, osx-snow-leopard

我知道这适用于 ios 6.0 遵循这些步骤[是否有可能在 Snow Leopard 上获得适用于 Xcode 4.2 的 iOS 5.1 SDK？](https://stackoverflow.com/questions/9613565/is-it-possible-to-get-the-ios-5-1-sdk-for-xcode-4-2-on-snow-leopard)但现在看来这是不可能的。有谁知道解决方法还是我应该升级？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T16:32:17.573

还是可以的。事实上，您可以使用 SDK 6.1 在 Snow Leopard 上使用 XCode 4.2 完成所有开发并将应用程序提交到 Appstore。但是，您不能运行模拟器 6.1（所以请使用真实设备）。

以下是方法（简化了几个步骤）：

1.  您将需要找到一个带有 Lion/Mountain Lion 和 XCode 4.5 的系统，您将使用它作为数据源（我在 VMWare 中有一个）。重要提示：您需要将运行 ios 6.1 的 iOS 设备连接到该系统并在 XCode 4.5 管理器中打开它，以便 XCode 可以下载适当的符号。

2.  从带有 XCode 4.5 的系统复制以下源目录：

    设备支持：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/6.1 (10B141)

    SDK：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk

    使用 tar 归档每个目录可能最方便，如下所示： tar cvf /tmp/archive.tar << name of your directory >>

    注意：设备支持目录的特定版本可能不同（即“6.1.2 (10B146)”或更高版本），请在以下所有说明中使用与您的 ios 设备匹配的版本。

3.  您需要将这些目录复制到带有 XCode 4.2 的 Snow Leopard 系统到以下目录中（假设您的 XCode 安装在 /Developer 中。如果像我的一样，它在其他地方，请根据需要替换路径的第一个组件）：

    设备支持：/Developer/Platforms/iPhoneOS.platform/DeviceSupport/

    SDK：/Developer/Platforms/iPhoneOS.platform/Developer/SDKs

    如果使用 tar，请切换到每个目录并解压缩其各自的 tar 存档，如下所示： tar xvf /tmp/archive.tar 。使用 tar 具有保留时间戳、符号链接等（如果有的话）的优点。

    复制后，删除设备支持目录中的链接“最新”并重新链接到“6.1（10B141）”，如下所示：ln -s“6.1（10B141）”最新

===============================================

此时您可以重新启动 XCode 4.2，您应该能够：

*   在管理器中添加您的 6.1 设备，并在其上运行和调试代码

*   为您的项目选择 6.1 SDK 作为“最新”并根据它进行构建。

===============================================

但是，如果您尝试支持 4 英寸 iPhone 5 屏幕（通过添加 Default-568h@2x.png 启动图像），您仍然不能完全提交以这种方式构建的应用程序到 Appstore。XCode 4.2 将 SDK 5.0 嵌入到一些应用程序存档中的元数据，因此*看起来*应用程序是针对 5.0 sdk 构建的。Appstore 积极拒绝包含 4" 屏幕支持且不是针对 6.0 或更高版本 SDK 构建的二进制文件。

所以，你必须求助于一些手工工作来告诉 Appstore 什么是真实的 :)

方法如下：

1.  归档您的申请。在finder中打开存档目录（右键单击“在finder中显示”行），打开终端，键入“cd”，将目录拖放到终端并按“Enter”。现在您在该目录中并且可以在那里处理文件。

2.  cd 产品/应用程序/yourapp.app

3.  将有一个名为 Info.plist 的文件 - 它是二进制形式。像这样将其转换为 XML：plutil -convert xml1 Info.plist

4.  在您喜欢的编辑器中打开 Info.plist。在以下条目中找到对 sdk 5.0（或 SDK 的二进制值）的引用并替换为对 6.1 的引用： DTPlatformVersion: 6.1 DTPlatformBuild: 10B141 DTSDKBuild: 10B141 DTSDKName: iphoneos6.1

如果您喜欢冒险，请更换 XCode 版本并建立价值观。我没有。

1.  plutil -convert binary1 Info.plist

2.  现在您需要重新签署应用程序。应用程序二进制文件位于同一文件夹中，应命名为“yourapp”

为此，您首先需要一份嵌入授权文件的副本，该文件将在签名期间使用。

*   您可以从 XCode 4.5 下创建的应用程序存档中复制该文件：查找文件名：archived-expanded-entitlements.xcent，复制到应用程序目录（以防万一，不确定是否需要）

*   像这样从当前应用程序中提取它： codesign -d --entitlements /tmp/entitlements.xml "yourapp"

在文本编辑器中打开文件 /tmp/entitlements.txt 并清除 <?xml 版本标记之前的任何奇怪的东西，保存。

1.  现在找到您的分发证书的确切名称。您可以从多个地方复制它，但最好是打开 Keychain Access 应用程序，选择分发证书，双击打开属性并复制“通用名称”。它应该类似于“iPhone Distribution: your company”

2.  仍然在存档目录中，按如下方式运行 codesign： 首先删除当前签名文件以防万一：

    rm -rf _CodeSignature

    然后运行：

    codesign -f -s "iPhone Distribution: your company" --entitlements /tmp/entitlements.xml yourapp

就是这个。您的应用程序现在是针对 6.1 SDK 构建的，并显示为这样。您应该能够从 Organizer 验证并将其提交到应用商店。

==============================

免责声明：我以这种方式提交的应用仍然是“等待审核”。如果它因此被接受/拒绝，将在此处发布。

注意：那为什么要跳过这些箍呢？好吧，有几个原因：

1.  因为我应该能够在我想要的任何环境中发展，该死的。

2.  OSX 10.6 上的 XCode 4.2 是支持 PowerPC 和 OSX 10.4 SDK 的最后一个 XCode 版本。如果像我一样，您必须支持必须在该平台上运行的旧桌面产品 - 您别无选择，只能坚持使用它，直到最后一个 PowerPC 用户放弃他的设备。这些人老而顽强。使用两台机器进行开发对我来说不是一个有吸引力的选择。

# c++ - 为什么 cocos2d-x 使用来自服务器的多线程加载精灵是黑色的

> ID：14993505
> 
> 赞同：0
> 
> 时间：2013-02-21T02:17:35.570
> 
> 标签：c++, cocos2d-iphone, pthreads

我使用“pthread”来创建一个新线程。它从服务器加载精灵。但是，精灵是黑色的！

```
class Test: public CCLayer
{
public:
    Test();
    ~Test();
    virtual bool init();
    ...
private:
    pthread_t _tid;
    static void* _loadSprite(void*);
    void _doSth();
    CCSprite* _loadSpriteFromServer(); // load sprite from server.
};

void* Test::_loadSprite(void* param)
{
    Test* pThis = (Test*)param;
    pThis->_doSth();
    return NULL;
}
bool Test::init()
{
    pthread_create(&_tid, NULL, _loadSprite, this);
}
void Test::_doSth()
{
    CCSprite* pSprite = _loadSpriteFromServer();
    addSprite(pSprite); // the sprite is 'black'
} 
```

谁能帮帮我，这困扰了我三天！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:45:11.870

您不能只处理需要访问 OpenGL 的线程代码。在这种情况下：创建精灵，更具体地说是创建精灵的纹理。这需要在与 OpenGL 上下文相同的线程上完成，通常是主线程。

您可以线程加载图像并将其保存在设备上，但您必须将创建精灵移动到主线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T09:17:12.570

这是一个在 cocos2d-x v3 中支持服务器端/远程精灵的类

[远程精灵](https://developerhuddle.wordpress.com/2015/02/22/remotesprite-sprite-extension-to-support-server-hosted-graphics-cocos2d-x-c/)

# javascript - 主干获取总是在 IE 中给出错误回调

> ID：14993506
> 
> 赞同：0
> 
> 时间：2013-02-21T02:17:37.317
> 
> 标签：javascript, ajax, backbone.js, fetch

我在主干中有一个集合如下：

```
define([
    "jquery","backbone",

    "models/homeTile"
],

    function($, Backbone, Model) {
        'use strict';

        // Creates a new Backbone Collection class object
        var Collection = Backbone.Collection.extend({

            // Tells the Backbone Collection that all of it's models will be of type Model (listed up top as a dependency)
            model: Model,

            url: 'http://easyuniv.com/API/hometiles',

            comparator: function(tile) {
                return 1.0 / tile.get('userCount');
            }

        });

        // Returns the Model class
        return Collection;
    }

); 
```

当我在 FF 或 chrome 中对对象调用 fetch 时，它运行得非常好。但是在 IE 中总是进入 fetch 的错误回调。

我查看了 F12 开发工具的网络选项卡，它没有显示集合的网络调用。

当我将此作为我的错误回调时：

```
error: function(data, response) {
    console.log(response.responseText);
} 
```

它只是打印`LOG: undefined`

关于这可能是什么的任何想法？

# android - 无法定位物理设备

> ID：14993520
> 
> 赞同：1
> 
> 时间：2013-02-21T02:20:08.453
> 
> 标签：android

我无法从 ADT 设备管理器中选择我的任何一个设备。这是直接来自[Google](http://developer.android.com/sdk/index.html "谷歌")的（几乎）全新安装的 ADT 。大约一年前，我在使用 Eclipse 的 Android 插件，但由于它不起作用，所以我安装了 ADT。

我已经在 Android SDK 管理器的 Tools、Android 4.2 和 Extras 下安装并更新了所有内容。我没有安装其他任何东西。

我有一个 Nexus 7 (4.2.2) 和一个 Samsung Fascinate (2.3.5)，我正试图将我的应用程序发送到。我正在使用 Nexus 7 随附的 USB 电缆将设备连接到我的计算机。两者都检查了 USB 调试。

我没有更改我的测试项目中的任何内容，一切都与通过项目构建器单击下一步一样。

我使用的是默认启动配置，除了项目之外，所有设置都是默认的。这是从加载 ADT 到尝试在我的设备上运行后的完整控制台日志：

* * *

[2013-02-20 18:53:42 - 测试] ------------------------------

[2013-02-20 18:53:42 - 测试] Android 启动！

[2013-02-20 18:53:42 - 测试] adb 运行正常。

[2013-02-20 18:53:42 - 测试] 执行 com.example.test.MainActivity 活动启动

[2013-02-20 18:53:42 - 测试] 找不到与目标“Android 4.2”兼容的 AVD。

[2013-02-20 18:54:42 - 测试] 执行 com.example.test.MainActivity 活动启动

[2013-02-20 18:54:45 - 测试] 发射取消！

* * *

第 6 个日志条目发生在 ADT 给我一个对话框“找不到兼容的目标。你想添加一个新的 Android 虚拟设备吗？”之后，我按否。Android 设备选择器随即出现，没有可供我选择的设备。

我已经用谷歌搜索了第 5 条日志，但没有发现任何有用的信息。他们建议我更改最低版本和目标版本，或者我使用虚拟设备。如果可能的话，我想使用我的物理设备。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T02:39:48.880

您是否安装了您的 OEM USB 驱动程序？看看这个链接：

[http://developer.android.com/tools/extras/oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html)

# highcharts - Highcharts 滚动和缩放

> ID：14993523
> 
> 赞同：1
> 
> 时间：2013-02-21T02:20:19.250
> 
> 标签：highcharts, highstock

我目前正在考虑购买 Highcharts 或 Highstock。我已经查看了这两种工具中的示例图表，如果有人可以为我澄清这一点，我将不胜感激：

我需要绘制的数据类似于时间序列财务数据，但在 x 轴上使用数字数据（以米为单位的位置）而不是日期。Highstocks 图表上的滚动和缩放功能给我留下了深刻的印象。highcharts 工具中是否有类似的功能？如果不是，highstock 图表可以与 x 轴上的非日期数据和标签一起使用吗？

我查看了与 Highcharts 滚动和缩放相关的其他堆栈溢出问题，但我特别需要知道的是它是否具有与我在 Highstock 图表中看到的相同的功能。

任何帮助表示赞赏。

# x11 - 如何让 jconsole 在 X11 上快速工作

> ID：14993524
> 
> 赞同：1
> 
> 时间：2013-02-21T02:20:23.430
> 
> 标签：x11, jconsole

场景：我正在尝试对我们的线程进行一些实时分析，以隔离线程死锁的原因。

我有一个问题，即当通过 SSH 和 X11 转发运行时 jconsole 非常慢。

我没有经验，每次点击延迟最多 30 秒。

可以做些什么来使 JConsole 以合理的速度运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T02:22:17.723

按以下方式启动 jconsole

```
jconsole -J-Dsun.java2d.xrender=True 
```

jconsole 速度更快，但响应速度仍然很慢。

下一步是*最小化任何图形*。

现在可以快速浏览包含线程的表。

# asp.net - 需要 iframe 的父名称

> ID：14993525
> 
> 赞同：2
> 
> 时间：2013-02-21T02:20:24.240
> 
> 标签：asp.net, iframe, parent

我一直在寻找几个小时，但没有找到解决方案。希望您能提供帮助。

我想在 iframe 中获取父页面的名称和路径。这样做的原因是为了防止 iframe 内的页面显示在其预期位置之外。如果我能得到父页面的会话变量，那就更好了，因为我可以验证用户。

Iframe 将使用 ASP.NET 编写，而父页面是 PHP。

我找到了可能有效的 Javascript 代码，但我非常不熟悉 javascript 以及如何将返回值传递给 ASP.NET 中的代码。如果您的解决方案涉及 javascript，我将需要从在表单加载中调用它到取回值的整个过程。

我已经尝试过这些功能，但它们没有显示我需要什么。

```
Request.Url.AbsoluteUri.ToString
Request.ApplicationPath.ToString
Request.UrlReferrer.AbsolutePath.ToString 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:28:58.733

我了解您正在寻找解决方案和重定向背后的代码，但后面的代码无法识别页面是否是从其他页面调用的。

您可以尝试，`Request.ServerVariables["HTTP_REFERER"]`但这可能会出错，甚至可能被某些用户禁用或更改。

使用 javascript 的一个简单可行的解决方案是检查 iframe 本身是否在您的母版页内。因此，此代码转到位于 iframe 内的页面，如果仅看到它，则将用户重定向回母版页。

```
<script type="text/javascript" language="javascript">
    // this line is check if its inside an iframe.
    // if top==self then is not in iframe
    if(top == self)
    {
        alert("This page can not be viewed alone, please press ok to load the master page");
        top.location.replace("MasterPage.aspx");
    }
</script> 
```

# php - 如何通过会话根据用户ID显示用户名

> ID：14993527
> 
> 赞同：0
> 
> 时间：2013-02-21T02:20:36.973
> 
> 标签：php, sql, session

我有一个问题，我想在员工输入员工 ID 后显示员工姓名。我的 index.php 会显示员工姓名，但它不起作用。欢迎后这里的问题显示“Resource id #4”。

**我的桌子：**

```
 CREATE TABLE `staff` (                    
          `staffid` varchar(25) NOT NULL,         
          `password` varchar(25) DEFAULT NULL,    
          `staffname` varchar(50) DEFAULT NULL,   
          `staffemail` varchar(50) DEFAULT NULL,  
          `level` int(2) DEFAULT NULL,            
          PRIMARY KEY (`staffid`)                 
        ) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

**索引.php：**

```
<?php require_once('Connections/sqlconnection.php');

//initialize the session
if (!isset($_SESSION)) {
  session_start();
}
$colname_rsstaff = $_SESSION['staffid'];
if (isset($_GET['staffid'])) {
    $colname_rsstaff = $_GET['staffid'];
}

// ** Logout the current user. **
$logoutAction = $_SERVER['PHP_SELF']."?doLogout=true";
if ((isset($_SERVER['QUERY_STRING'])) && ($_SERVER['QUERY_STRING'] != "")){
  $logoutAction .="&". htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_GET['doLogout'])) &&($_GET['doLogout']=="true")){
  //to fully log out a visitor we need to clear the session varialbles
  $_SESSION['MM_Username'] = NULL;
  $_SESSION['MM_UserGroup'] = NULL;
  $_SESSION['PrevUrl'] = NULL;
  unset($_SESSION['MM_Username']);
  unset($_SESSION['MM_UserGroup']);
  unset($_SESSION['PrevUrl']);

  $logoutGoTo = "login.php";
  if ($logoutGoTo) {
    header("Location: $logoutGoTo");
    exit;
  }
}
?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ?     mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
 }
}

mysql_select_db($database_sqlconnection, $sqlconnection);
$query_rsstaff = sprintf("SELECT staffname FROM staff WHERE staff.staffid = %s",     GetSQLValueString($colname_rsstaff, "text"));
$rsstaff = mysql_query($query_rsstaff, $sqlconnection) or die(mysql_error());
$row_rsstaff = mysql_fetch_assoc($rsstaff);
$totalRows_rsstaff = mysql_num_rows($rsstaff);
?>
<title>Sistem Pengurusan Stok</title>
<center>
  <form name="form1" method="POST" action="">
    <table width="633" height="431" border="1">
      <tr>
        <td height="124" colspan="2" align="right"><?php include 'header.php'?>
<p><?php echo date("d-m-y")."<br>";?></p></td>
      </tr>
      <tr>
        <td width="167" height="262"><?php include 'menu.php'?></td>
        <td width="450" align="center"><p>Welcome
            <?php echo $rsstaff?>
</p>
      <p><a href="<?php echo $logoutAction ?>">Log out </a></p>
      <p><a href="<?php echo $logoutAction ?>"> </a></p></td>
     </tr>
     <tr>
        <td height="37" colspan="2"></td>
     </tr>
   </table>
  </form>
</center>
<? session_destroy()?>
<?php
mysql_free_result($rsstaff);
?> 
```

请有人帮助我...#谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:31:44.220

**不要使用 MYSQL_* 因为它已被弃用**

但是，此答案基于您要执行的操作。

在这里找到的信息：[mysql_query](http://php.net/manual/en/function.mysql-query.php)。

当你这样做时`$rsstaff = mysql_query($query_rsstaff, $sqlconnection)`，你得到的是资源，而不是你期望`SELECT staffname FROM staff WHERE staff.staffid = %s`对数据库做的事情。

尝试以下操作：

```
$result = mysql_query($query_rsstaff, $sqlconnection);
$rsstaff = mysql_fetch_assoc($result); 
```

然后

```
Welcome <?php echo $rsstaff["staffname"]; ?> 
```

或者更简单

```
$rsstaff = mysql_result(mysql_query($query_rsstaff),0); 
```

然后使用您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:32:34.513

当您这样做时`<?php echo $rsstaff?>`，您将打印出 MySQL 查询资源`$rsstaff`。这种输出没有明显的形式，所以 PHP 只是告诉你“它是一种资源”，而不是任何更有意义的东西。这就是你看到的输出。

您的意思是打印出 的元素之一`$row_rsstaff`，大概是`"staffname"`元素。

所以：

```
<?php echo $row_rsstaff["staffname"] ?> 
```

# javascript - 使用没有分页标记的jQuery无限滚动插件？

> ID：14993529
> 
> 赞同：1
> 
> 时间：2013-02-21T02:20:51.137
> 
> 标签：javascript, jquery, infinite-scroll

所以我正在尝试实现流行的无限滚动插件来替换我当前自制的无限滚动脚本：

[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/) & [https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)

无论如何，这个插件似乎需要在页面上有 html 分页。即由于这些选项：

```
nextSelector: "div.navigation a:first",
navSelector: "div.navigation", 
```

我的页面上没有分页标记。我不在乎我的网站是否与爬虫/js 禁用用户不兼容。

那么有没有办法在没有物理 html 分页的情况下实现这个插件呢？

在我的自定义脚本中，我正在做类似的事情：

```
var $page = 1;

// Load content for $page

$page++; 
```

像这样的任何东西，即我可以将起始页作为整数传递吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:01:20.293

看看这个非常简化的无限滚动版本，它不需要任何分页元素。

[http://www.innovativephp.com/demo/infinitescroll/](http://www.innovativephp.com/demo/infinitescroll/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:13:13.360

您可以使用 jQuery/javascript 轻松创建它。

现在写一个通用的东西有点困难，但主要原则是：

如果您正在加载最新的内容（最新的优先，旧的滚动）：

1.  加载比屏幕高度多一点的第一组元素（无论是博文、图片、引号）。将最后一项的 ID 保存在变量中。

2.  使用 setInterval 检测用户是否滚动页面，然后加载 ID 低于您保存的最后一个 ID 的数据。然后继续保存最后一个 ID 并加载新内容。

祝你好运！

像这样的东西：

```
function loadnewdata()
{
    // do ajax stuff, update data.
}
setInterval(
  function (){
    if(($(document).height() - $(window).height() - $(document).scrollTop()) < 500){
    loadnewdata();
    }
  }, 
  500
); 
```

当然，您会为自己编写 loadNewData() 函数。取决于你的数据。如果用户滚动了页面，这将每 500 个加载新数据。

# android - 点击从广播接收器推送的通知时打开活动

> ID：14993531
> 
> 赞同：2
> 
> 时间：2013-02-21T02:21:13.087
> 
> 标签：android, android-notifications, android-notification-bar, android-broadcast

我有一个小问题。我有一个 AlarmManager，它向 BroadcastReceiver 发送意图，在`onReceive`该类的方法中，我将通知推送到 StatusBar ...这就像一个魅力，但是当用户点击通知时我需要打开一个活动，但是在我的代码中存在一些问题，在谷歌搜索和搜索之后我找不到答案......所以这是我推送通知的代码：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setClass(this.context, NewCommit.class);     
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);

PendingIntent sender = PendingIntent.getBroadcast(this.context, 192839, intent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_ONE_SHOT);

NotificationCompat.Builder noti = new NotificationCompat.Builder(this.context)
    .setSmallIcon(R.drawable.status_bar_icon)
    .setContentTitle("My notification")
    .setContentText("Hello World!")
    .setContentIntent(sender);

noti.setDefaults(Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE);

NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.notify(181818, noti.build()); 
```

任何的想法？？这让我疯狂！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T02:38:57.493

我用一个有效的代码仔细检查了你的代码。我假设 NewCommit 是您的活动。

除了在意图中明确设置活动（类似于*Intent intent = new Intent(c, NewCommit.class);*）

我认为主要的区别（和问题）是你打电话

```
PendingIntent.getBroadcast 
```

代替

```
PendingIntent.getActivity 
```

医生[说](http://developer.android.com/reference/android/app/PendingIntent.html#getActivity%28android.content.Context,%20int,%20android.content.Intent,%20int%29)：

“检索将启动新活动的 PendingIntent，例如调用 Context.startActivity(Intent)。请注意，活动将在现有活动的上下文之外启动，因此您必须在 Intent 中使用 Intent.FLAG_ACTIVITY_NEW_TASK 启动标志。 "

# gnuplot - 使用 Gnuplot 有条件地绘制点颜色

> ID：14993538
> 
> 赞同：5
> 
> 时间：2013-02-21T02:22:35.673
> 
> 标签：gnuplot

我有一个包含四列数据的文件。我只使用前三个来绘制 3D 图，现在不需要第四个。

我想知道如果满足某些条件，如何更改点的颜色。例如，如果一个点的值***(x,y,z)***大于***(16,400,65)***，我想将其绘制为灰色。如果它们小于那个值，我想使用红色。

我正在尝试使用`awk`相同的方法，它仅以不同的颜色绘制两个点。这是我的代码。

```
gnuplot>splot "< awk '{if( ($2 > \"16\") || ($1 > \"400\") || ($3 > \"65\"))  print}'                                       
./8_77_non_pareto_data.dat " u 2:1:3 w p pt 8 lc rgb "grey", \
"< awk '{if( ($2 < \"16\") || ($1 < \"400\") || ($3 < \"65\"))  print}' 
./8_77_non_pareto_data.dat " u 2:1:3 w p pt 8 lc rgb "red", \
"./8_77_pareto_data.dat" u 2:1:3 w i lt 1 lc rgb "blue" t "Pareto points" 
```

我的数据文件如下所示：

```
48      15.057599573464184      68      361
93      14.950459657063462      73      361
48      14.065204842090914      69      361
280     13.16320458043516       69      361
120     15.05281009307949       66      361
48      15.133322961840786      59      361
48      16.161631503473544      73      361
470     17.763180586730847      77      361 
```

X 轴范围从 6 到 22。

Y 轴范围从 0 到 500。

Z 轴范围从 35 到 85。

我想将其可视化为以三维方式在***(16,400,65)周围有一个边界框。***盒子里面的东西都是红色的，外面的东西都是灰色的。

希望有人可以在这里帮助我。

PS：蓝点打印得很好，虽然这里的示例数据没有显示满足某些条件，但有些点满足该条件。我没有在这里发布整个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T03:16:38.420

您可以通过定义一个简单的函数来稍微减少 awk 的工作量并在纯 gnuplot 中完成：

```
#!/usr/bin/env gnuplot

set terminal png set output 'test.png'

bigx = 16; bigy = 400; bigz = 65

isbig(x,y,z) = (x > bigx || y > bigy || z > bigz) ? 1 : 0

set palette defined (0 0.5 0.5 0.5, 1 1 0 0) # (grey, red)

unset colorbox
set xrange [0:20]; set yrange [0:500]; set zrange [0:100]

splot 'data.dat' using 2:1:3:(isbig($2,$1,$3)) with points pt 7 palette notitle, \
      '' using (1e6):1:1 with points pt 7 lc rgb '#888888' title 'in box', \
      '' using (1e6):1:1 with points pt 7 lc rgb 'red' title 'not in box' 
```

（在我看来，设置范围和取消设置颜色框的行以及两个额外的绘图命令只是为了让事情变得漂亮。它提供了一个键来描述这两种颜色的含义，而没有分散注意力的颜色框。）

![在此处输入图像描述](../Images/c82fda927136ec9b6e0faff01a940056.png)

# javascript - textarea onload 中的示例文本

> ID：14993539
> 
> 赞同：2
> 
> 时间：2013-02-21T02:22:42.503
> 
> 标签：javascript

我正在尝试创建一个文本区域，其中将有一些示例供用户在单击该区域之前查看（示例消失）并且他们可以添加自己的内容。到目前为止我已经得到了这个，但是当我打开页面时它没有加载示例，我尝试使用和 onload 但这似乎不起作用，如果我单击该区域然后模糊，该功能可以正常工作，但是用户不应该这样做，任何我出错的想法

```
<textarea STYLE='background:white; height:80; width:100%;' name="kpi_notes" value="Example"
onfocus="if (this.value == 'Example') {
  this.value = '';
  this.style.color = '#B300A1';
}"
onblur="if (this.value == '') {
  this.value = 'Example'
  this.style.color = '#919191';
}"
style="color:#919191"; ></textarea> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T02:26:03.690

对于 textarea 元素，值应该在标签之间，而不是设置为`value="Example"`.

```
<textarea STYLE='background:white; height:80; width:100%;' name="kpi_notes"
onfocus="if (this.value == 'Example') {
  this.value = '';
  this.style.color = '#B300A1';
}"
onblur="if (this.value == '') {
  this.value = 'Example'
  this.style.color = '#919191';
}"
style="color:#919191"; >Example</textarea> 
```

或者考虑使用占位符属性，如果您的目标浏览器支持它：

```
<textarea placeholder="Example"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:26:12.740

```
<textarea name="kpi_notes" placeholder="Example">
</textarea> 
```

不适用于IE9。拧IE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T02:27:02.500

我认为您需要`innerHTML`改用`value` 所以 textarea 根本没有`value`属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T02:30:00.417

无论您在两个标签之间放置什么都是默认值。

例如：

```
<textarea>Text hint</textarea> 
```

# c++ - 这个 Singleton 类会在销毁时自动释放内存吗？

> ID：14993541
> 
> 赞同：0
> 
> 时间：2013-02-21T02:22:48.760
> 
> 标签：c++, memory-management, singleton, raii

我创建了一个 Singleton 类，我想知道我的析构函数是否会自动释放名为`instance`.

下面的代码会自动释放内存吗？

```
class SingletonClass
{
    SingletonClass() 
    {

    }

    ~SingletonClass()
    {
       delete this; // or should I say... delete instance;
    }

    public:

    static SingletonClass* instance;

    SingletonClass* getInstance()
    {
       if (instance != NULL)
          return instance;

       instance = new SingletonClass();
       return instance;
    }
}; 
```

PS：是否可以只创建`instance`一个常规的 Singleton 变量而不是指针？这会是更好的代码练习吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T02:24:48.723

这个单例类在你的程序中愉快地注入了**未定义的行为**。

您有一个`static`具有自动存储功能的成员变量。作为一个全局变量，它将在您的例程进入之前被构造，并在您的例程退出`main()`后被破坏。`main()`

因此，一旦你的程序终止并退出`main()`函数，你的`SingletonClass`实例的析构函数将被调用，它会尝试`delete this`；但是，对象不是通过调用分配的`new`，并且调用`delete`未分配的对象会`new`产生未定义的行为。

您可以安全地删除`delete this`指令：当您的程序终止时，全局对象会自动销毁。

**编辑：**

在对您的问题进行编辑后，曾经是`static`type的变量`SingletonClass`变成了type 的`static`变量`SingletonClass*`。我建议你改回来：

```
static SingletonClass instance;

SingletonClass* getInstance()
{
    return &instance;
} 
```

实际上，`instance`甚至可以（并且可能*应该*）是`static`函数的局部变量`getInstance()`：

```
SingletonClass* getInstance()
{
    static SingletonClass instance;
    return &instance;
} 
```

这样，您甚至不必为类成员变量提供全局*定义。*`static`

或者，您可以使用智能指针来处理对象的生命周期，但这在这里是不必要的。只需将变量声明`static`为`getInstance()`. 在 C++11 中，它的初始化也将保证是*线程安全的*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T02:30:24.597

使用智能指针，如

```
 static std::unique_ptr<SingletonClass> instance; 
```

当程序终止时，它会为您删除实例。避免`delete this`在代码成员中使用，除非您真的知道自己在做什么以及后果是什么。

# asynchronous - iOS表格预览图发布

> ID：14993545
> 
> 赞同：0
> 
> 时间：2013-02-21T02:23:19.713
> 
> 标签：asynchronous, rss, uitableview

我正在我的 iPhone 上测试 RSS。它使用 0 个 nib 文件。我会尽我所能描述它，如果需要，我会发布代码，但我敢打赌，这是一个常见的现象，有一个共同的解决方案。问题出在 tableviewcontroller 中，解决方案可能需要在 CellForRowAtIndexPath 方法中实现。如果我向下滚动，预览图像会停留在各自的位置，直到异步队列为该单元加载正确的图像。因此，如果我有数组项 1 的图像，并且向下滚动到数组项 20，数组项 1 的图像将仍然存在，直到我的队列赶上并加载该图像。如何从我没有查看的单元格中释放图像？感谢您的时间。

这是我的 CellForRow...

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[CustomCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];
}
ArticleItem *object = _objects[indexPath.row];
cell.primaryLabel.text = object.title;
cell.secondaryLabel.text = object.strippedDescription;
cell.primaryLabel.lineBreakMode = NSLineBreakByWordWrapping;
    cell.primaryLabel.numberOfLines = 0;
    cell.primaryLabel.lineBreakMode = NSLineBreakByWordWrapping;
    cell.secondaryLabel.numberOfLines = 0;

//Async dispatch queue for image preview loading...
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
dispatch_async(queue, ^{ 

    UIImage *preview = nil;
    if (object.iG = nil)
    {
        preview = [UIImage imageNamed:@"CellLogo.png"];
    }
    else
    {
        preview = [UIImage imageWithData:object.iG];
    } 
    dispatch_sync(dispatch_get_main_queue(), ^{

        [[cell myImageView] setImage:preview];
        [cell setNeedsLayout];
    });
});
return cell;   
} 
```

如果你收集的话，我有一个 ArticleItem 类，它提取图像 URL 并将它们转换为 data ，我有一个 CustomCell 类，它可以完成它的调用。CustomCell.h @interface CustomCell : UITableViewCell { UIImageView *myImageView; @property(nonatomic,strong)UIImageView *myImageView; @end ================================================= ===== CustomCell.m

```
- (id)initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier {
if (self = [super initWithFrame:frame reuseIdentifier:reuseIdentifier]) {
    // Initialization code
            myImageView = [[UIImageView alloc]init];

    [self.contentView addSubview:myImageView];       
}
return self;
}
-(void)viewDidUnload {
myImageView = nil;
primaryLabel = nil;
secondaryLabel = nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:06:01.780

实现 UITableViewcell 的子类，为 imageview 创建一个属性。一旦它远离能见度，它就会被释放。仅描述概述，因为您可能需要在滚动时查看使用情况。

# c - 循环遍历字符串，并用单词分隔？

> ID：14993546
> 
> 赞同：0
> 
> 时间：2013-02-21T02:23:37.533
> 
> 标签：c

我正在尝试反转给定的字符串，并且已经完全反转了它，但是现在我需要自己反转每个单词，以便它们可读。

例如输入：`Reverse this string.`

电流输出：`.gnirts siht esreveR`

所需的输出：`string. this Reverse`

有什么方法可以在每个特定单词上再次运行我的字符串反转功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:38:58.703

如果您有一个接受字符串的开始和结束偏移量的反向函数：

```
void rstr(char *s, int start, int end) {
  /* ... */
}

int main(){
  char str[] = "this is a sentence of words";
  int i, p;
  rstr(str, 0, strlen(str));
  for (p = i = 0; i <= strlen(str); i++) {
    if (str[i] == ' '  || i == strlen(str)) {
      rstr(str, p, i); 
      p = i + 1;
    }   
  }
  printf("%s\n", str);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:36:16.130

对 strtok 的每个结果再次运行反向算法

```
 char* token = strtok(str, ' ');

    while (token)
    {
       reversedWord = YourReverseAlgorithm(token);
        token = strtok(0, ' ');
    } 
```

对 strtok 的每次调用都会为您提供原始字符串的标记，直到分隔符，在您的情况下为 ' '。简洁明了，效果很好。

# url - 载波雾存储

> ID：14993548
> 
> 赞同：0
> 
> 时间：2013-02-21T02:23:53.077
> 
> 标签：url, path, amazon-s3, carrierwave, fog

我只是不知道该怎么做。我需要获取没有文件名的 S3 路径 `https://testphotobucket.s3.amazonaws.com/uploads/51237a37ff770df332000007/`

而不是这样 `https://testphotobucket.s3.amazonaws.com/uploads/51237a37ff770df332000007/tiger.jpg`

但我不断收到此错误。未定义的方法`gallery_photo_path' for #<Gallery:0x007f94f4658778> undefined method`gallery_photo_http_url' 用于#

如果我使用雾作为存储，我该如何获得路径？

谢谢。下面是我的代码片段。

```
# models/gallery.rb
class Gallery

  include Mongoid::Document        

  mount_uploader :gallery_photo, PhotoUploader

# uploaders/photo_uploader.rb
class PhotoUploader < CarrierWave::Uploader::Base

  storage :fog

# views/galleries/show.html.erb
<%= image_tag @gallery.gallery_photo_url.to_s %>
path **<%= @gallery.gallery_photo_path.to_s %>**   <--- not working
httppath **<%= @gallery.gallery_photo_http_url.to_s %>** <--- not working

# the error:
undefined method `gallery_photo_path' for #<Gallery:0x007f94f4658778>
undefined method `gallery_photo_http_url' for #<Gallery:0x007f94f46431e8> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T12:11:43.077

您所要求的内容并未内置于载波中。你可能应该把它放在一个助手中：

```
def uri_dirname(uri_string)
  uri = URI.parse(uri_string)
  uri.path = File.dirname(uri.path)
  uri.to_s
end 
```

然后在您看来，您可以使用：

```
uri_dirname(@gallery.gallery_photo.uri) 
```

# php - 显示来自 MySQL 的 PNG 图像

> ID：14993550
> 
> 赞同：0
> 
> 时间：2013-02-21T02:24:14.357
> 
> 标签：php, mysql, image

我正在尝试显示 MySQL 数据库中的图像，如果图像是 JPG，我的代码可以正常工作，但是如果我修改内容类型以显示 PNG，它就不起作用......我该如何制作为PNG工作？？

```
<?php

    // configuration
    require("../includes/config.php"); 

    header('Content-type: image/JPG');
    $username = "xxxxx";
    $password = "*****";
    $host = "localhost";
    $database = "database";
    @mysql_connect($host, $username, $password) or die("Can not connect to database: ".mysql_error());
    @mysql_select_db($database) or die("Can not select the database: ".mysql_error());
    $query = mysql_query("SELECT * FROM images");

    while($row = mysql_fetch_array($query))
    {
        echo $row['image'];
    }
?> 
```

此外，是否可以显示图像及其名称和描述？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:37:11.700

如果您不介意不支持旧版浏览器，您可以使用数据 url 来显示您的图像和描述[http://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)。

```
<figure>
  <img src="data:image/png;base64,<?php echo base64_encode($row['image']); ?>" alt="Your alternative text" />
  <figcaption>Some more description</figcaption>
</figure> 
```

在几乎所有情况下，将图像保存在数据库中并不是很有用。您应该注意 mimetype 中的大写和小写字母，请参阅[http://de.selfhtml.org/diverses/mimetypen.htm](http://de.selfhtml.org/diverses/mimetypen.htm)（它是德语，但您将能够阅读列表）。作为最后的建议 - 查看 mysqli_* 函数[http://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)。

// 编辑：只是一个想法，但是如果您在数据库中有多个图像，您的图像可能会损坏，因为您只是将它们全部放入一个图像中。这行不通！使用您的代码，您一次只能显示一张图像。

# jquery - 在 Underscore 模板中使用 JSON 对象 - Backbone.js

> ID：14993552
> 
> 赞同：4
> 
> 时间：2013-02-21T02:24:38.337
> 
> 标签：jquery, json, backbone.js, underscore.js

我正在开发一个日历风格的主干应用程序，但对它还算陌生。我已经为此工作了 12 多个小时，但仍然无法让我的模板填充 JSON 数据。

这是我今天写的一些代码：

**模型**

```
var CalendarDay = Backbone.Model.extend({
    defaults: function () {
        return {
            title: "No days for this event",
            done: false
        };
    },
    initialize: function () {}
});

var calendarItem = new CalendarDay({
    urlRoot: URL
}); 
```

**收藏**

```
var Calendar = Backbone.Collection.extend({
    model: CalendarDay,
    url: URL
}); 
```

**看法**

```
var CalendarView = Backbone.View.extend({
    template: _.template($('#days').html()),
    initialize: function () {
        this.collection = new Calendar();
        this.collection.fetch();
        this.collection.bind("reset", this.render, this);
        this.loadTimes();
    },
    render: function () {
        var JSON = this.collection.toJSON();
        this.$el.html(this.template(JSON));
        console.log(JSON);
    },
    listDays: function () {

    }

});

var calendarView = new CalendarView({
    model: calendarItem
}); 
```

这是我从服务器获得的 JSON：

```
0: Object
activity_logs: Array[0]
attendee_code: "BBNVKBGT"
attendee_fee: "0"
cego_fee: "0"
certificate_fee: "0"
created_at: "2013-02-13 11:29:03"
days: Array[1]
description: "A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine."
disciplines: Array[3]
done: false
fee_transaction_id: "0"
id: "102"
marketing_materials: Array[0]
messages: Array[0]
name: "My very first event"
organization_id: "1"
start_at: "2013-02-28 00:00:00"
state_id: "38"
states: Array[2]
title: "No days for this event"
updated_at: "2013-02-13 11:29:04"
venue_id: "55" 
```

（来自console.log）附加的是我的控制台日志与JSON的更好的视图。 ![JSON截图](../Images/9ce6a4c7f1475f633538b8bda61c9b30.png)

更新：这是我的字符串化 JSON：

```
 [{"title":"No days for this event","done":false,"id":"102","organization_id":"1","state_id":"38","venue_id":"55","name":"My very first event","description":"A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine.","start_at":"2013-02-28 00:00:00","attendee_code":"BBNVKBGT","cego_fee":"0","fee_transaction_id":"0","attendee_fee":"0","certificate_fee":"0","created_at":"2013-02-13 11:29:03","updated_at":"2013-02-13 11:29:04","activity_logs":[],"disciplines":[{"id":"1","label":"Psychologist","desc_text":null,"created":"1152725531","valid":"1","ordering":"-1","assocs":"APA","completion_only":"0","abbr":"psy","created_at":"2006-07-12 10:32:11","updated_at":"0000-00-00 00:00:00","pivot":{"id":"5","created_at":"2013-02-13 11:29:16","updated_at":"2013-02-13 11:29:16","conference_id":"102","discipline_id":"1"}},{"id":"8","label":"Alcohol/Drug Counselor","desc_text":null,"created":"1153074004","valid":"1","ordering":"3","assocs":"NAADAC","completion_only":"0","abbr":"acn","created_at":"2006-07-16 11:20:04","updated_at":"0000-00-00 00:00:00","pivot":{"id":"6","created_at":"2013-02-13 11:29:16","updated_at":"2013-02-13 11:29:16","conference_id":"102","discipline_id":"8"}},{"id":"13","label":"Massage Therapist","desc_text":null,"created":"0","valid":"1","ordering":"6","assocs":null,"completion_only":"1","abbr":"mass","created_at":"2006-07-18 12:01:31","updated_at":"0000-00-00 00:00:00","pivot":{"id":"7","created_at":"2013-02-13 11:29:16","updated_at":"2013-02-13 11:29:16","conference_id":"102","discipline_id":"13"}}],"states":[{"id":"38","code":"OR","name":"Oregon","country_code":"US","pivot":{"id":"6","created_at":"2013-02-13 11:29:16","updated_at":"2013-02-13 11:29:16","conference_id":"102","state_id":"38"}},{"id":"5","code":"CA","name":"California","country_code":"US","pivot":{"id":"5","created_at":"2013-02-13 11:29:16","updated_at":"2013-02-13 11:29:16","conference_id":"102","state_id":"5"}}],"messages":[],"marketing_materials":[],"days":[{"id":"1","conference_id":"102","happens_at":"2013-02-28 00:00:00","start_at":"0000-00-00 00:00:00","end_at":"0000-00-00 00:00:00","created_at":"2013-02-20 12:37:23","updated_at":"2013-02-20 12:37:23"}]}] 
```

**这是我的模板视图：**

```
 <script id="days" type="text/template">
            <a class="btn small-btn marginRight"></a>
    </script> 
```

只是想我会在这里添加，如果我在上面使用模板标签，例如`<% title %>`，我会收到错误`Uncaught ReferenceError: title is not defined`

我筋疲力尽，自学骨干比想象的要难。任何帮助让这个球再次滚动都会很棒谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T04:02:38.757

修改视图

```
this.$el.html(this.template(JSON)); 
```

至

```
this.$el.html(this.template({days: JSON})); 
```

修改模板

```
<script id="days" type="text/template">
    <% _.each(days, function(day) { %> <a class="btn small-btn marginRight"><%= day.title %></a> <% }); %>
</script> 
```

# html - 防止菜单 DIV 和内容 DIV 在窗口调整大小时重叠

> ID：14993553
> 
> 赞同：2
> 
> 时间：2013-02-21T02:24:37.513
> 
> 标签：html, css, css-float

我在这里遇到了一些麻烦：..

一切似乎都运行良好（当我调整窗口大小时，div 的移动出现了一个小问题，但在 StackOverflow 用户的帮助下设法修复了它），但我现在遇到了另一个问题。

我正在为这个网站使用 wordpress，并对我所做的基本主题进行了一些修改。一切正常，除非您将窗口设置得非常小，但会出现水平滚动条，但是当您滚动水平滚动条时，您会注意到菜单与内容重叠。

我怎样才能使它们不重叠？我试图使侧边栏的位置是绝对的而不是固定的，但是当我垂直滚动时菜单应该保留在那里。

不知道我应该怎么做...任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:57:45.537

正如我在评论中所说，您将需要 javascript 来防止内容 div 与固定菜单重叠

为了给你指明正确的方向，请查看github 上的[这个](https://github.com/bigspotteddog/ScrollToFixed) 插件 .. 它是一个很棒的插件，它使用 jQuery 来完成你所追求的几乎完全一样的事情 ..

[这](http://linenwoods.com/random/this.html)是使用少量 jQuery 的工作版本，我托管了它，以便您更容易看到：

您需要对布局进行的唯一更改是将`sidebar-primary`div 设置为`left: 0;`，它将 div 略微向左移动，但我认为这是值得的，因为您的原始问题只需一点点 jQuery 就可以解决。让我知道它是否适用于您的布局..

# mongodb - 通过模板渲染子文档

> ID：14993556
> 
> 赞同：1
> 
> 时间：2013-02-21T02:25:11.380
> 
> 标签：mongodb, meteor

我有一个文档 RFQ 和一个包含 4 个字段的子文档材料，并且可能有一个冗长的材料列表。理想情况下，我将如何在表格中显示子文档材料？

```
{

  "_id" : 1,

  "sdate" : ISODate("1924-12-03T05:00:00Z"),
  "adate" : ISODate("2007-03-17T04:00:00Z"),

  "materials" : [
              {
                "award" : "W.W. McDowellAward",
                "year" : 1967,
                "by" : "IEEE Computer Society"
              },
              {
                "award" : "National Medal of Science",
                "year" : 1975,
                "by" : "National Science Foundation"
              },
              {
                "award" : "Turing Award",
                "year" : 1977,
                "by" : "ACM"
              },
              {
                "award" : "Draper Prize",
                "year" : 1993,
                "by" : "National Academy of Engineering"
              }
  ]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T05:04:32.193

如何以单独的表格结构显示每个子文档？

像这样：

```
 Template.hello.coll = function () {
    return Coll.find({});
 }; 
```

在您的 html 中，子文档可以显示为：

`{{#each this.materials}}`在主要`{{#each}}`助手内。

```
 {{#each coll}}
        <tr>
            <td> {{sdate}} </td>
            <td> {{adate}} </td>

            {{#each this.materials}}
            <tr>
                <td>  {{award}}  </td>
                <td>  {{year}}  </td>
                <td>  {{by}}  </td>
            </tr>
            {{/each}}
        </tr>
      {{/each}} 
```

# python - Python 编程

> ID：14993557
> 
> 赞同：-7
> 
> 时间：2013-02-21T02:25:18.587
> 
> 标签：python

这是我正在解决的问题。我总共编程了 9 天，所以我很新。我正在尝试编写一个函数，该函数生成一个介于 -1,200 和 1,200 之间的随机整数，并返回一个取决于该数字的语句。语句为： 生成的数字：大于 800，返回'Heidi wins'/小于或等于 800 并且是偶数，返回'Magic wins'。/ 小于等于 800 并以 3 结尾，返回 'Tally wins'。/ 小于等于 800 并以 5 结尾，打印 'Chelsea wins'。否则，打印“Big Girl wins”。到目前为止，这是我的程序：请帮助完成它。谢谢你。

```
def sillyGame(n):
    mychoices=[
    number=random.choice(myChoices)
    inputNum=raw_input("Enter a number:")

    numbers=['0','1','2','3','4','5','6','7','8','9','.']
    isValidNumber=True 
    for ch in inputNum:
        for element in numbers:
            isMatch=False
            if ch ==element:
                isMatch=True 
                break 
            if isMatch==False:
                isValidNumber==False
                break 
            if isValidNumber==True:
                print("this is a valid number")
            else:
                print("this is not a valid number") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:34:42.293

如果您的问题如您在评论中所述，那么...

要检测 x 是否小于 800： `if x < 800`

要检测 x 是否为偶数： `if x % 2 == 0`

要检测 x 是否以 3 结尾： `str(x)[-1] == "3"`

任何组合都使用关键字`or`or `and`： `if x < 800 and x % 2 == 0:`

希望有帮助。

# r - R：不清楚如何为重复测量方差分析引导 eta 值

> ID：14993559
> 
> 赞同：5
> 
> 时间：2013-02-21T02:25:28.227
> 
> 标签：r, anova

目标：从重复测量方差分析中计算 eta 值的 95% 置信区间。

该设计是一个双因子设计（因子 1 有 3 个水平，因子 2 有 7 个水平），它与 30 个受试者完全交叉。但是，我不确定我是否正确地进行了引导来计算 eta 的置信区间。我使用 boot() 函数按主题引导样本，但不考虑因素和因素中的水平。因此，我不确定我是否正确执行此操作-我是否需要进行更复杂的引导/重新采样，按因子/级别重新采样，或者仅在主题级别上进行是否可以。我的代码似乎给出了合理的结果......

```
library(ez)
library(boot)
library(reshape2)

###create a data.frame for a 2-factor (Factor1-3 levels, Factor2-7 levels) fully crossed design with 30 subjects & fill fake data values
subject.number<-factor(rep(1:30,each=21))
factor1.levels<-rep(rep(c("level1","level2","level3"),each=7),30)
factor2.levels<-rep(rep(c("level1","level2","level3","level4","level5","level6","level7"),3),30)
set.seed(1234)
fake.data<-rnorm(630,mean=3)
dframe<-data.frame(subject.number,factor1.levels,factor2.levels,fake.data)
names(dframe)<-c("Subject","Factor1","Factor2","OutcomeValue")

###to work with boot() convert from long to wide format
dframe.wide<-dcast(dframe,Subject~Factor1+Factor2,value.var="OutcomeValue")

###function to use with boot() to calculate generalized eta value for Factor1, Factor2, and Factor1xFactor2 interaction in a repeated measures ANOVA

generalized_eta<-function(data,indices){
  d.wide<-data[indices,] #use boot() indices to sample data

  #now that have used indices from boot(), convert data back to long with correct Factor labeling
  dframe.long<-melt(d.wide,value.name="OutcomeValue",id="Subject")
  dframe.long<-cbind(dframe.long,colsplit(dframe.long$variable,"_",c("Factor1","Factor2")))
  dframe.long$Factor1<-factor(dframe.long$Factor1)
  dframe.long$Factor2<-factor(dframe.long$Factor2)
  dframe.long$Subject<-factor(dframe.long$Subject)

  #do repeated measures ANOVA with ezANOVA() which calculates generalized eta
  aov.ez = ezANOVA(data = dframe.long, dv = .(OutcomeValue), wid = .(Subject), within = .(Factor1,Factor2), type = 1)
  #return the three generalized eta values - Factor1, Factor2, Factor1xFactor2
  return(aov.ez[[1]]$ges)
}

###call boot() to do the bootstrap - only 200 to make it fast
results<-boot(data=dframe.wide,statistic=generalized_eta,R=200)

###plot the bootstrap results
plot(results,index=1) #for Factor1
plot(results,index=2) #for Factor2
plot(results,index=3) #for Factor1xFactor2

###create 95%-CI from bootstrap results
boot.ci(results,type="bca",index=1) #for Factor1
boot.ci(results,type="bca",index=2) #for Factor2
boot.ci(results,type="bca",index=3) #for Factor3 
```

# iphone - 如何学习/创建数据库 iPhone 应用程序？

> ID：14993560
> 
> 赞同：1
> 
> 时间：2013-02-21T02:25:35.447
> 
> 标签：iphone, database, sqlite

我对 iPhone 应用程序有一个相当简单的想法。我需要完成的事情：

*   允许用户登录（这意味着我必须存储用户名、密码和其他帐户信息）。
*   允许用户提交其他用户可以查看的字符串。
*   附加到必须跟踪的每个字符串的属性（即“投票、视图、评论等）。

因此，我假设我需要开始学习数据库并在服务器和客户端之间工作。我之前在 OSX/iOS 编程（特别是 Objective-C）中涉足过。我想了解如何完成基于数据的应用程序以及我上面列出的需求。

我做了一些简单的研究，发现了一种叫做 SQLite 的东西（免费和开源总是好的）。这是实现我想做的正确道路吗？当谈到服务器/客户端/数据“东西”的这个领域时，我是一个完全的“菜鸟”。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:31:33.680

SQLLite 更像是一个本地数据库。实际上，您将使用的数据库并不重要。这听起来像是一个带有 web 服务的项目。在您的 Web 服务中，您可以连接到 Microsoft SQL Server 或任何您想要的东西。

我认为您应该研究如何设置可以在您的代码中访问的 Web 服务。Webservices 不是 Objective-C 的主题，它适用于任何平台。您的项目更像是一个 Web 开发项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:33:13.780

您可以将用户的凭据保存在[keychain](https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/01introduction/introduction.html#//apple_ref/doc/uid/TP30000897-CH203-TP1)中。

@Kinderchocolate 将数据库引入您的项目是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:43:48.040

它听说一个应用程序需要在客户端之间传输数据。这意味着您需要服务器数据库和本地数据库。

对于服务器数据库，我建议你使用 Parse。Parse 是一个平台，它提供了一种在你的应用程序中使用 Objective-c 使用服务器数据库的便捷方式。这个工具将节省很多时间和精力（不需要学习 PHP，Apache ,Mysql).Parse 当然不是免费的，但它有一个免费的时期，足以让你检查你的想法。这是[解析](https://www.parse.com/)！。

对于本地数据库，我推荐你使用Core Data，它是由XCode提供的。Core Data非常强大，可以满足你的需求。你可以在很多书中找到使用Core Data的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-28T15:26:22.393

去试试 Firebase 在云中的数据库。（在服务器上）。在 Swift 4 中完全支持 Firebase 和 SQLite

# c# - 服务器标签格式不正确。（databinder.eval）

> ID：14993565
> 
> 赞同：4
> 
> 时间：2013-02-21T02:26:12.910
> 
> 标签：c#, asp.net

我正在尝试使用以下代码。

```
 <asp:DataGrid ID="Grid" runat="server"  DataKeyField="KeyID" CssClass="grid"
...
<asp:CheckBox runat="server"  ID="checkBox-<%#DataBinder.Eval(Container.DataItem,"KeyID")%>" AutoPostBack="false"></asp:CheckBox> 
```

当我运行代码时，出现以下错误：

```
Error   25  The server tag is not well formed. 
```

注意：这在没有 runat="server" 的情况下工作。这个问题的补救措施是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T03:34:54.520

你不需要设置 CheckBox 的 ID 来做你想做的事情（改变背景颜色）。你的 CheckBox 应该是这样的（`KeyID`如果你想显示它，我添加了作为文本值......或者如果你只想要复选框，你可以删除它）：

```
<asp:CheckBox runat="server" ID="checkbox" Text='<%# Eval("KeyID") %>' AutoPostBack="false"></asp:CheckBox> 
```

现在您的复选框将呈现如下内容：

```
<input id="MainContent_Grid_checkbox_0" type="checkbox" name="ctl00$MainContent$Grid$ctl02$checkbox" /><label for="MainContent_Grid_checkbox_0">Value of KeyID</label> 
```

由于所有名称都以“checkbox”结尾，因此您可以对名称以“checkbox”结尾的那些元素的更改事件应用函数。您没有指定这是一个 JavaScript 问题，或者如果您使用的是 jQuery ......这个答案使用[jQuery](http://jquery.com/)：

```
<script>
    $('input[name$="checkbox"]').change(function () {
        if ($(this).is(':checked')) {
            $(this).parent().css('background-color', 'yellow');
        }
        else {
            $(this).parent().css('background-color', 'white');
        }
    });
</script> 
```

这将确定复选框是否被选中，如果是，它将设置其父级的背景颜色（`<td>`它所在的，在 DataGrid 呈现的 HTML 内），具体取决于值。

同样，您可以转到下一个`parent()`并突出显示整行。

资源： [jQuery 选择器](http://api.jquery.com/attribute-equals-selector/)

[OnCheckedChanged](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.oncheckedchanged%28v=vs.110%29.aspx) - 您将在后面的代码中处理的事件，而不是在 JavaScript 中。

# python - BeautifulSoup 表处理

> ID：14993567
> 
> 赞同：0
> 
> 时间：2013-02-21T02:26:20.540
> 
> 标签：python, dictionary, beautifulsoup, html-table, html-parsing

我处于一种情况，我必须做一些有点骇人听闻的事情。传入的数据不在我的控制之下，所以解决方案不是“只是更有效地存储它”，就像我希望的那样。

我得到的东西看起来像

```
<table>
  <tr>
    <td>Key 1</td>
    <td>Key 2</td>
    <td>Key 3</td>
    ...
  </tr>
  <tr>
    <td>Val 1</td>
    <td>Val 2</td>
    <td>Val 3</td>
    ...
  </tr>
  ...
</table> 
```

我想要的是从某些表中挑选某些键/值对。所以，像

```
{ 'Key 4': 'Val 4', 'Key 32': 'Val 32' ... } 
```

我提前知道适当的键，但我不一定知道它们的位置，或者每对`tr`s 代表 k/v 对（`table`s 用于定位和数据表示。不，我不知道不知道为什么。），所以最简单的解决方案似乎是`get me the contents of the nth cell of the next row where n is this cells' index`。

我所拥有的是

```
def findField(soup, fieldName):
    kTd = soup.find(text=fieldName).parent
    ix = len(kTd.findPreviousSiblings('td'))
    valTd = kTd.parent.findNext('tr').findAll('td')[ix]
    return (kTd, valTd)

def fieldsToDict(soup, fieldNames):
    return dict([findField(soup, k) for k in fieldNames])

fieldsToDict(soup, ['Key 4', 'Key 32' ..]) 
```

但似乎必须有一种更优雅和/或更有效的方式来表达这一点。

有什么想法吗？

**编辑：**我会更具体，虽然我可能想多了，这个问题可能应该放在 codereview.se 而不是 SO。我想从比我拥有更多 Python/BeautifulSoup 的人那里得到两件具体的事情。

第一的，

```
...
    ix = len(soup.findPreviousSiblings('td'))
... 
```

看起来对于较大的行来说它可能会变得相对昂贵。似乎我试图获取的信息可以在 HTML 的初始解析期间获得。是否有内置的方法/插槽`indexAmongPeers`？

第二

```
...
    return dict([findField(soup, k) for k in fieldNames]) 
```

`dict`在该行中，似乎它必须对来自该理解的列表进行另一次遍历。在这种情况下会优化吗？有没有办法一次性完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:41:51.253

I think the looking up is a little bit hard to follow - I'd go for the following:

```
rows = [tr.strings for tr in soup('tr')]
lookup = {k:v for k,v in zip(*rows) if k in {'Key 1', 'Key 2'}}
# {u'Key 1': u'Val 1', u'Key 2': u'Val 2'} 
```

# r - R中数据框中的平均列

> ID：14993571
> 
> 赞同：4
> 
> 时间：2013-02-21T02:26:41.650
> 
> 标签：r, matrix, dataframe, average

我想对 R 中包含整数值和偶尔 NA 的数据框中的列进行平均。

名为 CD6（气候分区 6）的数据框使用 NA 值进行初始化，以存储属于气候分区 6 的所有数据的平均值。行是日期，列表示从 0 到 23 的小时。数据帧如下所示：

```
 > CD6

       Date       H0 H1 H2 H3 H4 H5 H6 H7 H8 H9 H10 ... H23
       1948-07-01 NA NA NA NA NA NA NA NA NA NA NA  ... NA
       1948-07-02 NA NA NA NA NA NA NA NA NA NA NA  ... NA
       1948-07-03 NA NA NA NA NA NA NA NA NA NA NA  ... NA 
```

名为 CA 的数据框具有从 1 到 7 的所有气候分区的真实值。数据框如下所示：

```
 > CA

       Climate_Division  Date       H0 H1 H2 H3 H4 H5 H6 H7 H8 H9 H10 ... H23
       6                 1948-07-01 NA NA NA NA NA NA NA NA NA NA NA  ... NA
       5                 1948-07-01 0  1  1  3  0  0  0  0  0  0  0   ... 2
       6                 1948-07-01 0  1  1  3  0  0  0  0  0  0  0   ... 2
       6                 1948-07-01 1  0  0  5  7  0  1  1  1  0  0   ... 0
       6                 1948-07-02 0  2  1  2  1  1  NA 0  1  0  1  ... 2
       6                 1948-07-03 NA NA NA NA NA NA NA NA NA NA NA  ... NA 
```

我有一个 for 循环编码，它将逐行遍历数据帧 CA，并映射到气候分区的正确数据帧（在此示例中，CD6 用于气候分区 6）。一个问题是我不知道每个气候部门有多少行来正确取其平均值。

通过仅查看 CD6，我想获得每个日期在特定时间的平均值，如果存在真实值并且最终答案是整数（值的上限），则忽略 NA。如果各个气候部门的所有时间的值都是 NA，我想保持它以反对 0。CD6 的最终结果应该是这样的

```
 > CD6

       Date       H0 H1 H2 H3 H4 H5 H6 H7 H8 H9 H10 ... H23
       1948-07-01 1  1  1  4  4  0  1  1  1  0  0   ... 1
       1948-07-02 0  2  1  2  1  1  NA 0  1  0  1  ... 2
       1948-07-03 NA NA NA NA NA NA NA NA NA NA NA  ... NA 
```

我不确切知道如何在编码和精通它时解决这个问题。因此，任何建议都会有所帮助，并感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:08:19.173

您正在寻找的是通过对两列`CA`ie`Climate_Division`和`Date`. 您可以使用内置`aggregate`函数来做到这一点。

```
> t <- 'Climate_Division  Date       H0 H1 H2 H3 H4 H5 H6 H7 H8 H9 H10
+ 6                 1948-07-01 NA NA NA NA NA NA NA NA NA NA NA
+ 5                 1948-07-01 0  1  1  3  0  0  0  0  0  0  0 
+ 6                 1948-07-01 0  1  1  3  0  0  0  0  0  0  0 
+ 6                 1948-07-01 1  0  0  5  7  0  1  1  1  0  0 
+ 6                 1948-07-02 0  2  1  2  1  1  NA 0  1  0  1 
+ 6                 1948-07-03 NA NA NA NA NA NA NA NA NA NA NA'
> 
> CA <- read.table(textConnection(t), header=T)
> 
> CA
  Climate_Division       Date H0 H1 H2 H3 H4 H5 H6 H7 H8 H9 H10
1                6 1948-07-01 NA NA NA NA NA NA NA NA NA NA  NA
2                5 1948-07-01  0  1  1  3  0  0  0  0  0  0   0
3                6 1948-07-01  0  1  1  3  0  0  0  0  0  0   0
4                6 1948-07-01  1  0  0  5  7  0  1  1  1  0   0
5                6 1948-07-02  0  2  1  2  1  1 NA  0  1  0   1
6                6 1948-07-03 NA NA NA NA NA NA NA NA NA NA  NA
> #Now that we have our data, we do aggregation of data and calculate mean over that using following command
> CAMeans <- aggregate(CA[,3:13], by =list(CA[,1], CA[,2]), FUN = mean, na.rm = TRUE)
> 
> CAMeans
  Group.1    Group.2  H0  H1  H2  H3  H4  H5  H6  H7  H8  H9 H10
1       5 1948-07-01 0.0 1.0 1.0   3 0.0   0 0.0 0.0 0.0   0   0
2       6 1948-07-01 0.5 0.5 0.5   4 3.5   0 0.5 0.5 0.5   0   0
3       6 1948-07-02 0.0 2.0 1.0   2 1.0   1 NaN 0.0 1.0   0   1
4       6 1948-07-03 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
> 
> #Need to change the names of grouping column back to what they were before
> names(CAMeans)[1:2] <- c('Climate_Division', 'Date')
> 
> CAMeans
  Climate_Division       Date  H0  H1  H2  H3  H4  H5  H6  H7  H8  H9 H10
1                5 1948-07-01 0.0 1.0 1.0   3 0.0   0 0.0 0.0 0.0   0   0
2                6 1948-07-01 0.5 0.5 0.5   4 3.5   0 0.5 0.5 0.5   0   0
3                6 1948-07-02 0.0 2.0 1.0   2 1.0   1 NaN 0.0 1.0   0   1
4                6 1948-07-03 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
> 
> #Now you can subset CAMeans to get content for CD6
> CD6 <- CAMeans[CAMeans$Climate_Division == 6, 2:ncol(CAMeans)]
> 
> CD6
        Date  H0  H1  H2  H3  H4  H5  H6  H7  H8  H9 H10
2 1948-07-01 0.5 0.5 0.5   4 3.5   0 0.5 0.5 0.5   0   0
3 1948-07-02 0.0 2.0 1.0   2 1.0   1 NaN 0.0 1.0   0   1
4 1948-07-03 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:43:12.317

在这里猜测你想要什么，所以我提供了 2 个选项：`rowMeans()`和`colMeans()`.

```
CA <- read.table(
header=TRUE, text='Climate_Division  Date H0 H1 H2 H3 H4 H5 H6 H7 H8 H9 H10  H23
6   1948-07-01 NA NA NA NA NA NA NA NA NA NA NA NA
5   1948-07-01 0  1  1  3  0  0  0  0  0  0  0 2
6   1948-07-01 0  1  1  3  0  0  0  0  0  0  0 2
6   1948-07-01 1  0  0  5  7  0  1  1  1  0  0 0
6   1948-07-02 0  2  1  2  1  1  NA 0  1  0  1 2
6   1948-07-03 NA NA NA NA NA NA NA NA NA NA NA NA')

CD6 <- data[CA$Climate_Division==6, ]   # Populating your data does not require a loop.

(CD6rmeans <- rowMeans(CD6[, -2], na.rm=TRUE))

#     1     3     4     5     6 
# 6.000 1.000 1.692 1.417 6.000 
t(CD6cmeans <- colMeans(CD6[ ,-2], na.rm=TRUE))

# Climate_Division     H0 H1     H2    H3    H4     H5  H6     H7     H8 H9    H10   H23
# [1,]           6 0.3333  1 0.6667 3.333 2.667 0.3333 0.5 0.3333 0.6667  0 0.3333 1.333 
```

# php - 获取以下格式的 json 输出的 PHP 代码

> ID：14993573
> 
> 赞同：0
> 
> 时间：2013-02-21T02:26:53.080
> 
> 标签：php, android, mysql, json

嗨，我编写了一个与 php 交互以从数据库中获取数据的 android 应用程序。

我需要 json 以这种格式返回数据。

```
[
    {
        "outlet_id"    :"1",
        "outlet_desc"  :"BigBazaar",
        "outlet_loc"   :"Jayanagar4thBlock",
        "outlet_image" :"http%3A%2F%2Flocalhost%2FFlutura%2FPHP%2FAssets%2Fimages%2FBigBazaar.png",
        "recommended_products": [
                                    {
                                        "item_id":"3",
                                        "item_desc":"Dettol",
                                        "item_image":"http%3A%2F%2Flocalhost%2FFlutura%2FPHP%2FAssets%2Fimages%2FDettol.png"
                                    }
                                ]
    },
    {
        "outlet_id":"2",
        "outlet_desc":"FoodWorld",
        "outlet_loc":"Basavanagudi",
        "outlet_image":"http%3A%2F%2Flocalhost%2FFlutura%2FPHP%2FAssets%2Fimages%2FFoodWorld.png","
        recommended_products":[
                                {
                                    "item_id":"3",
                                    "item_desc":"Dettol",
                                    "item_image":"http%3A%2F%2Flocalhost%2FFlutura%2FPHP%2FAssets%2Fimages%2FDettol.png"
                                },
                                {
                                    "item_id":"3",
                                    "item_desc":"Colgate",
                                    "item_image":"http%3A%2F%2Flocalhost%2FFlutura%2FPHP%2FAssets%2Fimages%2FColgate.png"
                                }
                              ]
    },
    {
        "outlet_id":"5",
        "outlet_desc":"Total",
        "outlet_loc":"MurgeshPalaya",
        "outlet_image":"http%3A%2F%2Flocalhost%2FFlutura%2FPHP%2FAssets%2Fimages%2FTotal.png",
        "recommended_products":[
                                {
                                    "item_id":"3",
                                    "item_desc":"Dettol",
                                    "item_image":"http%3A%2F%2Flocalhost%2FFlutura%2FPHP%2FAssets%2Fimages%2FDettol.png"

                                },
                                {
                                    "item_id":"3",
                                    "item_desc":"Colgate",
                                    "item_image":"http%3A%2F%2Flocalhost%2FFlutura%2FPHP%2FAssets%2Fimages%2FColgate.png"

                                }
                               ]
     }
] 
```

但现在它以以下格式给出。

```
[
    [
        {
            "outlet_id": "1",
            "outlet_name": "Big Bazaar",
            "lat": "12.9285690",
            "lng": "77.5831100",
            "outlet_image": "images/BigBazaar.png",
            "outlet_location": "Jayanagar 4th Block"
        }
    ],
    [
        {
            "outlet_id": "2",
            "outlet_name": "Food World",
            "lat": "12.9392350",
            "lng": "77.5780680",
            "outlet_image": "images/FoodWorld.png",
            "outlet_location": "Basavanagudi"
        }
    ],
    [
        {
            "outlet_id": "5",
            "outlet_name": "Total",
            "lat": "12.9589340",
            "lng": "77.6571610",
            "outlet_image": "images/Total.png",
            "outlet_location": "Murugeshpalya"
        }
    ],
    [
        {
            "outlet_id": "6",
            "outlet_name": "Big Bazaar",
            "lat": "12.9324963",
            "lng": "77.6228463",
            "outlet_image": "images/BigBazaar.png",
            "outlet_location": "Koramangala"
        }
    ],
    [
        {
            "outlet_id": "7",
            "outlet_name": "Food World",
            "lat": "12.9785055",
            "lng": "77.6379353",
            "outlet_image": "images/FoodWorld.png",
            "outlet_location": "Indira Nagar"
        }
    ]
] 
```

这是我的 php 代码。

```
<?php
error_reporting(0);

//$url = $_GET['url'];
//$mR = $_GET['mRequest'];
//$mOid = $_GET['mOutletId'];
//$mloc = $_GET['mLocation'];
//connect to the db
$user = "root";
$pswd = "";
$db = "recommendations_db";
$host = "localhost";
$conn = mysql_connect($host, $user, $pswd);
mysql_select_db($db);
//if($mR == 'outlets' && $mloc = 'all'){
$query = "SELECT * FROM outlets";
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());

while($row = mysql_fetch_assoc($result))
{
  $output[] = array($row); 
}
print( json_encode($output) );
?> 
```

我怎样才能修改上面的 php 代码以第一种格式返回。请帮助，因为我在 php 方面不太好。

表结构。

奥特莱斯表。

它包含以下字段。

outlet_id outlet_name lat lng outlet_image outlet_location

建议表。

它包含以下字段。

item_id outlet_id

物品表。

它包含以下字段。

item_id item_name item_image item_price category_id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:47:21.817

好的，这是缺少的子数组。您想从多维关联数组创建 JSON 字符串，而不是对象。

有更快的方法来选择这些行，但这很容易理解。

```
$query = "SELECT * FROM outlets";
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());

$output=array(); # don't leave it undefined
while($row = mysql_fetch_assoc($result))
{
    # guessing this query
    $query2 = "SELECT * FROM recommended_products WHERE outlet_id=".$result['outlet_id'];

    # now we create the sub array recommended_products
    $row['recommended_products']=array();
    $result2 = mysql_query($query2) or die("Unable to verify user because : " . mysql_error());
    while($row2 = mysql_fetch_assoc($result2)){
        $row['recommended_products'][]=$row2;
    }

    # then add the modified row to the output
    $output[] = $row; 
}
print( json_encode($output) ); 
```

此外， mysql_ 已折旧。可能没有真正需要急于求成，但至少值得考虑转换为 mysqli 或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:30:47.570

更改`$output[] = array($row);`为`$output[] = $row;`

# ruby-on-rails - 在 ubuntu 上安装 rails 权限被拒绝

> ID：14993585
> 
> 赞同：0
> 
> 时间：2013-02-21T02:28:28.943
> 
> 标签：ruby-on-rails, ubuntu, installation

安装 ruby​​gems 后，我尝试安装 rails。

我输入了以下命令：

```
~$ gem install rails 
```

我收到以下错误：

```
Fetching: i18n-0.6.1.gem (100%)
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - /var/lib/gems 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:34:13.140

尝试`sudo`改用。

```
sudo gem install rails 
```

# cygwin - 在 windows xp 上安装 web2py

> ID：14993588
> 
> 赞同：0
> 
> 时间：2013-02-21T02:29:17.173
> 
> 标签：cygwin, web2py

如何使用 cygwin 在 Windows XP 上安装 web2py？我刚刚安装了 cygwin 并使用 cygwin 下载了 web2py

```
curl -O http://www.web2py.com/examples/static/web2py_src.zip 
```

但是当我尝试使用解压缩它时

```
unzip web2py_src.zip 
```

它不起作用（返回错误`-bash: unzip: command not found`：）

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:16:14.720

我实际上是在尝试从 cygwin 命令提示符打开 web2py。相反，我使用了 Windows CMD（经过一天的速成课程）并且能够从 WCMD 打开 web2py。我只是简单地 cd 到 web2py 所在的目录（我将它从下载移动到驱动器 C），然后运行 ​​-S projectname 命令，瞧，我的项目已经创建，我可以从 WCMD 工作了。请我随着我的旅程的进展，可能会问更多问题。感谢 Regexident 的迅速帮助！

# drools - 如何使用口水来适应复杂的条件？

> ID：14993589
> 
> 赞同：0
> 
> 时间：2013-02-21T02:29:26.370
> 
> 标签：drools, drools-flow

最近在学习drools，我觉得是个很棒的软件。Drools的核心思想是drl文件。我们应该写规则文件，例如：

```
 rule "name"
   when
   then
 end 
```

而 when 部分取决于实体的属性。例如：现在我有一个用户类，可以在我的规则中使用。

```
 public  class User {
        private int money; 
        private Date time;
            //getter and setter.....   
        } 
```

现在我需要知道一个用户在 2012-09-11 和 2013-01-01 之间的钱，如果他的钱>100 那么按照我的逻辑，流口水怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:36:41.280

这可以使用以下规则轻松实现：

```
rule 'Some Rule'
    $u: User( time > '11-sep-2009', time < '01-jan-2013', money > 100)
then
    //do your logic here. $u references the User object
end 
```

希望能帮助到你，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:41:47.933

您可以在 DRL 文件中编写一个函数，如果用户在 2012 年 9 月 11 日和 2013 年 1 月 1 日之间的钱大于 100，则该函数将返回 true。您可以在使用 eval 的规则的一部分时调用此函数并将您的逻辑写入然后 part.Writing 函数在 DRL 文件中不是一个好主意！

# android - 如何实现 DialogFragment

> ID：14993593
> 
> 赞同：0
> 
> 时间：2013-02-21T02:30:19.110
> 
> 标签：android

我想知道如何实现这个 DialogFragment 类：

```
public class MyDialogFragment extends DialogFragment {

    private static final String ARG_LISTENER_TYPE = "listenerType";
    private DialogListener mListener;

    static enum ListenerType {
        ACTIVITY, FRAGMENT
    }

    public interface DialogListener {
        public void onDialogPositiveClick(DialogFragment dialog);
        public void onDialogNegativeClick(DialogFragment dialog);
    }

    public static MyDialogFragment newInstance(DialogListener listener) {
        final MyDialogFragment instance;

        if (listener instanceof Activity) {
            instance = createInstance(ListenerType.ACTIVITY);
        } else if (listener instanceof Fragment) {
            instance = createInstance(ListenerType.FRAGMENT);
            instance.setTargetFragment((Fragment) listener, 0);
        } else {
            throw new IllegalArgumentException(listener.getClass() + " must be either an Activity or a Fragment");
        }

        return instance;
    }

    private static MyDialogFragment createInstance(ListenerType type) {
        MyDialogFragment fragment = new MyDialogFragment();

        Bundle args = new Bundle();
        args.putSerializable(ARG_LISTENER_TYPE, type);
        fragment.setArguments(args);

        return fragment;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // TODO: Create your dialog here

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setMessage(R.string.app_name);
        builder.setPositiveButton(android.R.string.ok, new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                mListener.onDialogPositiveClick(MyDialogFragment.this);
            }
        });
        builder.setNegativeButton(android.R.string.cancel, new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                mListener.onDialogNegativeClick(MyDialogFragment.this);
            }
        });

        return builder.create();
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        // Find out how to get the DialogListener instance to send the callback
        // events to
        Bundle args = getArguments();
        ListenerType listenerType = (ListenerType) args.getSerializable(ARG_LISTENER_TYPE);

        switch (listenerType) {
        case ACTIVITY: {
            // Send callback events to the hosting activity
            mListener = (DialogListener) activity;
            break;
        }
        case FRAGMENT: {
            // Send callback events to the "target" fragment
            mListener = (DialogListener) getTargetFragment();
            break;
        }
        }
    }

    @Override
    public void onDetach() {
        mListener = null;
    }
} 
```

我已经从我的片段中的类中实现了 DialogListener，如下所示：

```
public class MyFragment extends Fragment implements DialogListener

    @Override
    public void onDialogPositiveClick(DialogFragment dialog) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onDialogNegativeClick(DialogFragment dialog) {
        // TODO Auto-generated method stub

    } 
```

和：

```
MyDialogFragment dialogFragment = MyDialogFragment.newInstance(MyFragment.this);
dialogFragment.show(getFragmentManager(), getTag()); 
```

并出现对话框，但是当我单击 ON 或 CANCEL 时，它会引发 IllegalArgumentException

这是日志：

```
02-20 22:02:57.022: E/AndroidRuntime(1997): FATAL EXCEPTION: main
02-20 22:02:57.022: E/AndroidRuntime(1997): android.app.SuperNotCalledException: Fragment MyDialogFragment{b57064f0 #1} did not call through to super.onDetach()
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:992)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.FragmentManagerImpl.removeFragment(FragmentManager.java:1123)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.BackStackRecord.run(BackStackRecord.java:592)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.os.Handler.handleCallback(Handler.java:605)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.os.Looper.loop(Looper.java:137)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at java.lang.reflect.Method.invoke(Method.java:511)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:36:07.633

你确定你得到一个`IllegalArgumentException`？

基于您的堆栈跟踪

```
02-20 22:02:57.022: E/AndroidRuntime(1997): FATAL EXCEPTION: main
02-20 22:02:57.022: E/AndroidRuntime(1997): android.app.SuperNotCalledException: Fragment MyDialogFragment{b57064f0 #1} did not call through to super.onDetach()
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:992)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.FragmentManagerImpl.removeFragment(FragmentManager.java:1123)
02-20 22:02:57.022: E/AndroidRuntime(1997):     at android.app.BackStackRecord.run(BackStackRecord.java:592) 
```

重要的是打电话给`super.onDetach()`你正在停止生命周期`Fragment`并`Activity`可能受到影响（在我的理论中）。

```
@Override
public void onDetach()
{
     mListener = null;
     super.onDetach()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:12:33.987

我在你的帮助下弄清楚了，查看了崩溃日志，它说“没有调用 super.detach，所以我把它放在了 on detach 中，并且成功了。

```
 @Override
public void onDetach() {
    super.onDetach(); <--------
    mListener = null;
} 
```

# regex - 如何在 WPF 2010 C# 的 RegEx 中只允许英文字母或空字符串？

> ID：14993603
> 
> 赞同：-1
> 
> 时间：2013-02-21T02:31:37.150
> 
> 标签：regex

我想在 C# 中只检查英文字母或空字符串。我尝试编写正则表达式，但它不起作用：

@"[^$|a-zA-Z]"

任何建议都会有所帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:34:32.740

`"^[a-zA-Z]*$"`将匹配 0 个或多个小写或大写字母。请注意，这与数字或空格不匹配。

# svm - 如何在支持向量机的类中检索最相似的图像？

> ID：14993608
> 
> 赞同：0
> 
> 时间：2013-02-21T02:32:20.190
> 
> 标签：svm, scikit-learn

当我在 scikit learn 中预测属于 SVM 中图像的类别时

```
...
print "Predicting on 1 sample"
print "Input features:"
fv = [0.16666666666628771, 5.169878828456423e-26, 2.584939414228212e-22, 1.0, 1.0000000000027285]
print fv
print "Predicted class index:"
print clf.predict([fv]) 
```

输出：

```
Predicted class index:
[5] 
```

我怎样才能在同类中获得最多 5 个相似的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:48:32.957

我不认为您可以获得来自 SVM 的样本之间的相似性度量，只有从样本到用于分类的超平面的距离。

[您可以使用scipy.spatial.distance.pdist](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html#scipy.spatial.distance.pdist)方法计算图像特征向量之间的欧几里得距离。与您的目标图像距离最短的 5 个图像可以被认为是最相似的。我希望这会有所帮助。

# python - Django Admin - 无法更改外键字段

> ID：14993612
> 
> 赞同：0
> 
> 时间：2013-02-21T02:32:35.467
> 
> 标签：python, django, django-models, django-admin

我有 Django 版本 1.4.5

这是我的模型的相关部分

```
class Product (models.Model):
    name=models.CharField(max_length=200)
    description=models.TextField()
    label=models.ForeignKey('Label')
    pub_date = models.DateTimeField(editable=False)

    def save(self):
        #item will not have id if this is the first save
        if not self.id:
            self.pub_date = datetime.date.today()
            super(Product, self).save()

    def __unicode__(self):
    return self.name

class Label(models.Model):
    """
    A clothing label, e.g. Kate Spade
    """
    name=models.CharField(max_length=100)

    def __unicode__(self):
        return self.name 
```

当我尝试发布产品时，选择标签可以正常工作。发布项目按预期工作，标签字段在返回到管理控制台中的产品时保持填充状态。但是，如果我尝试更改标签字段的值，我会被带到产品页面的默认列表，并显示消息“他的产品“产品 1”已成功更改”但返回到产品 1 页面显示该字段实际上没有正确保存。

这里有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:32:24.263

`super(Product, self).save()`位于`if`块内，因此不会在编辑时调用它。另外，为什么不直接[`auto_now_add`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.DateField.auto_now_add)在`pub_date`球场上使用呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:33:51.137

在您的情况下，无需明确设置日期和时间。您可以使用 ' `auto_now_add`' 请提供此链接以获取更多详细信息。

[https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.DateField.auto_now_add](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.DateField.auto_now_add)

```
class Product (models.Model):
    name=models.CharField(max_length=200)
    description=models.TextField()
    label=models.ForeignKey('Label')
    pub_date = models.DateTimeField(editable=False, auto_now_add = True)

    def __unicode__(self):
    return self.name 
```

如果您需要手动设置，请使用以下代码段。它也调用超类来进行更改。

```
def save(self):
    #item will not have id if this is the first save
    if not self.id:
        self.pub_date = datetime.date.today()
    super(Product, self).save() 
```

# vb.net - 如何在没有 Linq 的情况下查询 DataGridView

> ID：14993615
> 
> 赞同：2
> 
> 时间：2013-02-21T02:33:04.720
> 
> 标签：vb.net, linq

如何在`DataGrid`不使用 Linq 的情况下获取要查看的查询结果？

在 Linq 中，我对我的 dgv 进行`dgvInfo`了查询（查询获取注册表的行索引，其中包含 dgvInfo 中已知的“colNombre”中的值）：

```
Dim dgvRow As DataGridViewRow = _
   (From row As DataGridViewRow In dgvInfo.Rows
    Where row.Cells("colNombre").Value.ToString().ToUpper().Contains(name.ToUpper())
    Select row).FirstOrDefault()

If Not dgvRow Is Nothing Then
   dgvRow.Selected = True
   dgvInfo.FirstDisplayedScrollingRowIndex = dgvRow.Index
   dgvInfo.PerformLayout()
End If 
```

不使用 Linq 的原因是我必须使用 .NET 2 Framework。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:32:39.453

使用 for 循环并检查每个注册表的条件就可以了

```
Dim dgvRow As DataGridViewRow = Nothing
For Each r As DataGridViewRow In dgvInfo.Rows
    If r.Cells("colNombre").Value.ToString().ToUpper() = name.ToUpper() Then
        dgvInfo.Rows(r.Index).Selected = True
        dgvInfo.FirstDisplayedScrollingRowIndex = r.Index               
        Exit For
    End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:45:47.100

一个简单的`Foreach`. C＃：

```
DataGridViewRow row=null;
foreach(DataGridViewRow r in dgv.Rows)
    if(ConditionMatches(r))
    {
        row=r;
        break;
    } 
```

# javascript - Javascript - 使用 if 语句更改数组值

> ID：14993616
> 
> 赞同：0
> 
> 时间：2013-02-21T02:33:07.617
> 
> 标签：javascript, jquery, arrays, if-statement

我正在开发一个 jquery 表单文件，该文件使用数组根据材料的选择填充尺寸下拉列表。这工作正常，但现在我们正在添加一个额外的下拉列表，我们需要根据该选择在数组中具有不同的值。

这是当前工作代码的一部分：

```
var Material = new Array();
Material['UNC']    = new Array('40', '32');
Material['UNF']    = new Array('10', '24'); 
```

这基本上是我想要的，不知道如何：

```
if($("#style").val() == "long") {  var Material = new Array();
Material['UNC']    = new Array('45', '35');
Material['UNF']    = new Array('15', '29');} else {

var Material = new Array();
Material['UNC']    = new Array('40', '32');
Material['UNF']    = new Array('10', '24');} 
```

我没有运气，我对Javascript函数不是很熟悉。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:36:40.630

单程：

```
var isLong = $('#style').val() === 'long';
var material = {};
material.UNC = (isLong) ? [45, 35] : [40, 32];
material.UNF = (isLong) ? [15, 29] : [10, 24]; 
```

另一种方式：

```
var isLong = $('#style').val() === 'long';
var material = {};
if (isLong) {
  material.UNC = [45, 35];
  material.UNF = [15, 29];
}
else {
  material.UNC = [40, 32];
  material.UNF = [10, 24];
} 
```

正如 Felix Kling 指出的那样，最好使用对象而不是数组作为材质。我还使用了小写变量名的 JavaScript 约定。您可以使用. `new Array`_`[]``new Object``{}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:40:06.220

您只需要将`Material`变量的声明移到块之外：

```
var Material = new Array();
if($("#style").val() == "long") {
    Material['UNC']    = new Array('45', '35');
    Material['UNF']    = new Array('15', '29');
} else {
    Material['UNC']    = new Array('40', '32');
    Material['UNF']    = new Array('10', '24');
} 
```

但是，正如其他人指出的那样，您应该为这些类型的非数字索引使用对象而不是数组。您还应该使用对象和数组表示法：

```
var Material = {};
if($("#style").val() == "long") {
    Material['UNC']    = ['45', '35'];
    Material['UNF']    = ['15', '29'];
} else {
    Material['UNC']    = ['40', '32'];
    Material['UNF']    = ['10', '24'];
} 
```

# php - 打印嵌套数组的内容

> ID：14993617
> 
> 赞同：0
> 
> 时间：2013-02-21T02:33:09.820
> 
> 标签：php, mongodb, multidimensional-array, foreach

我正在尝试打印嵌套数组的内容，但它只是将“Array”作为字符串返回，但不会使用 foreach 循环进行迭代。数组来自 mongodb find()。数据集如下所示：

```
User
Post_Title
Post_Content[content1,content2,content3] 
```

我正在尝试获取内容 1、2、3。

我当前的代码如下所示：

```
$results = $collection->find($query);

foreach ($results as $doc)
    {
    echo $doc['title']; //this works
    $content[] = $doc['content'];           
    print_r($content); //this prints "Array ( [0] => Array )"
    foreach ($content as $item)
        {
        echo $item;
        }
    } 
```

这段代码所做的只是打印标题，然后是 Array ( [0] => Array )，然后是 Array。

我觉得很愚蠢，没有弄清楚一些看起来如此基本的东西。大多数关于堆栈溢出的帖子都涉及多维关联数组 - 在这种情况下，顶级数组是关联的，但内容数组是索引的。

我也试过

```
foreach ($doc['content'] as $item) 
```

但这给了

```
Warning: Invalid argument supplied for foreach() 
```

我什至尝试使用嵌套的 foreach 再次迭代返回的数组，如下所示：

```
foreach ($results as $doc)
    {
    echo $doc['title']; //this works
    $content[] = $doc['content'];           
    print_r($content); //this prints "Array ( [0] => Array )"
    foreach ($content as $item)
        {
            foreach ($item as $next_item)
                {
                  echo $next_item;
                }
        echo $item;
        }
    } 
```

第二次 foreach 因参数无效而失败。任何想法将不胜感激。

编辑：也许它与我如何将数据插入数据库有关。该代码看起来像这样

```
$title = $_POST['list_title'];
$content[] = $_POST['list_content1'];
$content[] = $_POST['list_content2'];
$content[] = $_POST['list_content3'];

$object = new Creation();
$object->owner = "$username";
$object->title = "$title";
$object->content = "$content";
$object->insert(); 
```

这不是将数组作为属性添加到类的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:38:01.183

问题是某些数组内容是数组，而其他部分是字符串。[您应该使用is_array()](http://php.net/is_array)测试子内容`$doc`是否为数组。如果是，则循环遍历任何其他数组，如果不是，则可以回显内容（如果不确定内容类型，则可能需要在执行此操作之前测试内容类型）`$doc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:46:05.500

问题在于您正在保存数据的代码。您应该替换以下行

$object->content = "$content";

和

$对象->内容= $内容；

# java - 如何调试库代码中发生的 NullPointerException？

> ID：14993621
> 
> 赞同：4
> 
> 时间：2013-02-21T02:33:50.673
> 
> 标签：java, nullpointerexception, zipfile

我在java中提取一个ZIP文件：

```
ZipFile zipFile = new ZipFile(theZipFile);
  Enumeration<? extends ZipEntry> zipEntries = zipFile.entries();
    while(zipEntries.hasMoreElements()){
      ZipEntry entry = zipEntries.nextElement(); /// <---Nullpointer exception happens here
  } 
```

代码执行过去 `while(zipEntries.hasMoreElements())`但未能提取 ZipEntry。

返回true很奇怪`hasMoreElements`，但是尝试取出元素时会出现空指针。

JDK lib 的 ZipFile 类中出现异常，我在调试器中看不到局部变量，那么如何找出 Zip 文件有什么问题？

编辑：堆栈跟踪：

```
java.lang.NullPointerException
    at java.util.zip.ZipFile.getZipEntry(ZipFile.java:529)
    at java.util.zip.ZipFile.access$900(ZipFile.java:56)
    at java.util.zip.ZipFile$1.nextElement(ZipFile.java:511)
    at java.util.zip.ZipFile$1.nextElement(ZipFile.java:481) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:56:23.883

这是`getZipEntry`方法（截至 1.7.0_10）：

```
private ZipEntry getZipEntry(String name, long jzentry) {
    ZipEntry e = new ZipEntry();
    e.flag = getEntryFlag(jzentry);  // get the flag first
    if (name != null) {
        e.name = name;
    } else {
        byte[] bname = getEntryBytes(jzentry, JZENTRY_NAME);
        if (!zc.isUTF8() && (e.flag & EFS) != 0) {
            e.name = zc.toStringUTF8(bname, bname.length);
        } else {
            e.name = zc.toString(bname, bname.length);      // Line 529
        }
    }
    /* snip */
    return e;
} 
```

`NullPointerException`在这条线上抛出a 的唯一原因是 if `e`、`zc`或`bname`were `null`。

`e`不可能，`null`因为它在这个方法中被明确地实例化了。

`zc`不能`null`：

```
public ZipFile(File file, int mode, Charset charset) throws IOException
{
    /* snip */
    this.zc = ZipCoder.get(charset);
    /* snip */
}

static ZipCoder get(Charset charset) {
    return new ZipCoder(charset);
} 
```

这意味着`bname`must be `null`，这将很难调试。`getEntryBytes`是一种`native`方法：

```
private static native byte[] getEntryBytes(long jzentry, int type); 
```

这就是我将如何进行：

*   弄清楚它是那个特定的 zip 文件还是所有的 zip 文件。如果是那个特定的 zip 文件，请尝试重新制作它。
*   更新您的 Java 版本，可能存在已修复的`getEntryBytes`错误
*   向 Oracle 提交错误报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:06:40.993

我最近遇到了同样的问题，所以我比较了**JDK 1.6**和**1.7**相关的**zip 源代码**。

真正的**原因**是**jdk 1.6**将通过**构造函数**使用**jzentry初始化****zipEntry ，***如下所示：*

 *****```
ZipEntry ze = new ZipEntry(jzentry);

ZipEntry(long jzentry) {
    initFields(jzentry);
} 
```

但在**jdk 1.7**我们可以看到它使用

```
private ZipEntry getZipEntry(String name, long jzentry) {
    ZipEntry e = new ZipEntry(); // it did not use jzentry initial it 
```

当某些**jar**文件**有空条目**时，它会**抛出异常。*******

# python - IndexError：列表索引超出范围？

> ID：14993629
> 
> 赞同：0
> 
> 时间：2013-02-21T02:35:14.230
> 
> 标签：python, list

我有问题，我需要大家的帮助。我阅读 rar 文件（100mb）并处理文本文件（包含在 rarfile 中）。

```
import glob
import os
import UnRAR2
from os import path, access, R_OK
os.chdir("E:\\sms")
for file in glob.glob("*.rar"):
# extract test.txt to memory
    entries = UnRAR2.RarFile(file).read_files('*.txt')
    test_content = entries[0][1]
    #print test_content
    for line in test_content.split("\n"):
        A=line.split(' ')
        print A[1] 
```

结果：

```
19009057

7030

9119

9119

....

....

bla...bla...

......

9119

9119

9119

7050

9119

Traceback (most recent call last):
  File "E:\LAPTRINH\Android\adt-bundle-windows\eclipse\plugins\org.python.pydev_2.7.1.2012100913\pysrc\pydevd.py", line 1397, in <module>
    debugger.run(setup['file'], None, None)
  File "E:\LAPTRINH\Android\adt-bundle-windows\eclipse\plugins\org.python.pydev_2.7.1.2012100913\pysrc\pydevd.py", line 1090, in run
    pydev_imports.execfile(file, globals, locals) #execute the script
  File "C:\Users\The\Documents\workspace\unrar\test_unrar.py", line 13, in <module>
    print A[1]

IndexError: list index out of range 
```

请帮我！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:38:02.533

您的其中一行（可能是您的最后一行）不是您期望的格式。在你的内部 for 循环中执行此操作：

```
A=line.split(' ')
if len(A) > 1:
    print A[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:38:13.517

`A[1]`如果您文件中的最后一行是`\n`. 你想重新考虑你拉回信息的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T02:38:44.343

该错误告诉您`line`split up,的内容`A`没有第二项，这意味着它没有任何要解析的内容，并且您位于文件的末尾。

# ruby-on-rails - Rails 进程之间的通信

> ID：14993634
> 
> 赞同：1
> 
> 时间：2013-02-21T02:36:04.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, websocket

考虑使用 Nginx 作为反向代理并具有多个 Rails 后端构建的井字游戏。每个客户端都与一些 Rails 后端建立一个 websocket 连接。如果玩游戏的两个客户端都连接到不同的 Rails 后端，则发送到一个后端的移动需要路由到另一个后端，以便可以将其推送到另一个 websocket，如下图所示。

在 Rails 中，两个 Rails 后端之间通信的惯用方式是什么？

![在此处输入图像描述](../Images/337155f9d7581fbd1e70945de6e58a2f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:14:59.940

在这种情况下，您应该设置单独的 WebSocket 服务器并将用户和 Rails 服务器连接到它。这样，您将能够处理来自一台服务器的所有用户，而无需担心分片。

在高流量的情况下，您还可以设置多个 WebSocket 服务器并在它们之间实现某种队列或消息总线来传播新消息 - 例如，主服务器将只处理传播消息，从服务器将连接到它并发送从用户那里收到的所有消息。请注意，在这样的配置中，主服务器不应处理来自用户和服务器的连接，仅用于在从属之间传播消息。

最后，直接回答您的最后一个问题，通常不需要在 Rails 服务器之间直接联系 - 与 WebSocket 服务器相反，它们基于请求-响应提供服务，因此在大多数情况下通过数据库交换信息就足够了。如果您确实需要立即进行更改，那么[AMQP 之](https://github.com/ruby-amqp/amqp)类的解决方案应该会有所帮助。

# linked-server - 使用 SQL Server 代理计划涉及链接服务器的任务失败

> ID：14993639
> 
> 赞同：1
> 
> 时间：2013-02-21T02:36:34.457
> 
> 标签：linked-server

如何使计划任务工作？我想安排一个每晚运行查询的任务。该查询正确解析，基本上从 server2 上的 SQL Server 2005 数据库中获取数据，并将数据插入到 server1 上数据库的表中。查询和任务在 server1 上运行。

我能够在 server1 上的 Microsoft SQL Server Management Studio 中执行查询。使用 SQL Server 代理，我能够创建和安排一个作业来执行查询，但作业失败并出现以下错误：作为用户 NT AUTHORITY\SYSTEM 执行。用户“NT AUTHORITY\ANONYMOUS LOGON”登录失败 [SQLSTATE 28000] [错误 18456]。我公司的 IT 推测我需要添加到 server2 的交互式登录列表中，这是策略的一部分。

我在 server1 和 server2 上都有管理员权限，尽管我认为后者不是必需的。server1 和 server2 都使用 Windows 身份验证，我收集到的身份验证是在安装 SQL Server 时设置的。

这就是我所做的。首先，我使用以下命令将 server2 添加到 server1 上的 sys.sysservers：
EXEC sp_addlinkedserver @server='server2'

然后我在 server1 和 server2 上的登录名之间创建了一个映射：EXEC sp_addlinkedsrvlogin @rmtsrvname = 'server2', @useself = 'true'

这使我能够在 server1 上的 Microsoft SQL Server Management Studio 中执行查询。有效。我发现好奇的是，尽管“命令成功完成”，但以下内容不起作用：

EXEC sp_addlinkedsrvlogin @rmtsrvname = 'server2', @useself = 'false', @locallogin = 'MYDOMAIN\myname', @rmtuser = 'myname', @rmtpassword = ' ***** ** *** *** '

（请注意，由于 Windows 身份验证，真实密码未加密。）。

我收到错误消息 18456，级别 14，状态 1，第 1 行用户“myname”登录失败。

@useself = TRUE 的值指定登录名使用他们自己的凭据连接到 rmtsrvname，而忽略 rmtuser 和 rmtpassword 参数。FALSE 指定 rmtuser 和 rmtpassword 参数用于连接到指定 locallogin 的 rmtsrvname。我本来希望两者都能工作，因为我为 rmtuser 和 rmtpassword 指定的内容正是我用来直接登录到远程服务器的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:01:29.007

该作业始终以 Sql Server 代理服务中指定的用户身份执行。如果您的服务作为 LocalSystem 运行，那么您需要将添加链接服务器登录名更改为

```
EXEC sp_addlinkedsrvlogin @rmtsrvname = 'server2', @useself = 'false', @locallogin = 'NT AUTHORITY\SYSTEM', @rmtuser = 'myname', @rmtpassword = '*****' 
```

如果不是本地系统，则指定代理中使用的任何登录名

查看此讨论以获取更多信息[http://www.sqlservercentral.com/Forums/Topic1003064-146-1.aspx#bm1003182](http://www.sqlservercentral.com/Forums/Topic1003064-146-1.aspx#bm1003182)

# search - 使用 Lucene 处理图形数据

> ID：14993640
> 
> 赞同：5
> 
> 时间：2013-02-21T02:36:35.170
> 
> 标签：search, graph, lucene, search-engine

有没有办法使用 Lucene 处理图形数据？

## 例子

一位用户与许多 lucene 文档有关系（文档连接） 一位用户与其他用户有关系（用户连接 [Graph]）

如果用户搜索索引，他会取回与他有关系的文档。这是简单明了的。

什么是取回与用户连接有关系的文档的方法。

在 user_id 字段中使用与其有关系的所有用户对每个文档进行索引是一种方法。但是，当您查询为执行搜索的用户提供用户连接的索引时，查询大小是不可预测的。想想拥有 1000 个用户连接的用户。这不会扩展。

这几乎就像存储在 Graph DB 中的用户连接和用户文档可以轻松地为我们提供要搜索的文档，但是将其传达给 Lucene 的有效方式是什么，因此它只能针对给定查询搜索这些文档。如果返回任何结果，这将保证至少一个或多个用户连接与结果中返回的文档有关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:42:12.730

我不相信目前有任何图形技术位于 solr 或 lucene 之上。

你可能最好看看这两个阵营中的任何一个：

*   带有 SpringData 的 Neo4j（单实例免费）

或者

*   Tinkerpop Blueprints（如果不使用 java/scala，可能是 rexter）在以下技术之一上：
*   带 Hadoop 的 Cassandra 上的 Titan（多主机，无故障点）
*   东方数据库
*   Neo4j

这些数据库是图形数据库。Tinkerpop Blueprints 是一种允许您抽象具体实现的标准。Springdata 目前只支持 neo4j 的图技术。

如果您使用集群，Neo4j 会花钱（免费许可证仅限单实例）。

你可以在这里阅读关于 solr/lucene 的讨论。 [http://lucene.472066.n3.nabble.com/indexing-directed-graph-td2949556.html](http://lucene.472066.n3.nabble.com/indexing-directed-graph-td2949556.html)

注意 neo4j 支持全文搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-25T10:19:56.533

从 solr 6.0 开始支持图形数据库；如果您没有安装 solr，那么使用图形数据库可能会更好，但现在至少，您有一个选择。我发现了这一点，文档仍然很少：

[https://solr.pl/en/2016/04/18/solr-6-0-and-graph-traversal-support/](https://solr.pl/en/2016/04/18/solr-6-0-and-graph-traversal-support/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T23:58:00.997

Apache Jena 可能与此处相关，因为它具有一些图形功能（SPARQL、RDF）并利用了 Lucene。

请参阅 Apache Jena Fuseki 和 Jena Text。

# java - 配置 Jedis 超时

> ID：14993644
> 
> 赞同：15
> 
> 时间：2013-02-21T02:37:05.647
> 
> 标签：java, redis, jedis

我在完成 时遇到问题`.hgetall()`，这是我尝试过的：

```
Jedis jedis = new Jedis(REDIS_MASTER_NODE);
jedis.connect();
jedis.configSet("timeout", "30");

Map<String, String> alreadyStored = jedis.hgetAll(redisTargetHash); 
```

这就是我得到的：

```
Exception in thread "main" redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: Read timed out
    at redis.clients.jedis.Protocol.process(Protocol.java:79)
    at redis.clients.jedis.Protocol.read(Protocol.java:131)
    at redis.clients.jedis.Connection.getBinaryMultiBulkReply(Connection.java:199)
    at redis.clients.jedis.Jedis.hgetAll(Jedis.java:851) 
```

这解决了这个问题：

```
Jedis jedis = new Jedis(REDIS_MASTER_NODE, 6379, 1800); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-21T11:12:43.103

如果您要做的是设置 Jedis 连接`timeout`，您应该使用为此制作的特殊构造函数进行设置：

```
public Jedis(final String host, final int port, final int timeout) 
```

您正在做的是设置Redis 设置的*超时时间*`Jedis`。这样做`CONFIG SET timeout 60`，意味着 Redis 将在几秒钟后关闭*空闲*的客户端连接。`60`这就是为什么你在 Jedis 中得到例外。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-12T00:10:28.190

这是对 xetorthio 答案的一点扩展，但这里是与 JedisPool 一起使用的类似方法。（警告：这是基于我直接查看 Jedis 版本 2.6.2 代码的理解，尚未在实际用例中进行测试。）

```
 JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();
    jedisPoolConfig.setMaxWaitMillis(writeTimeout);
    JedisPool pool = new JedisPool(jedisPoolConfig, redisHost, port, readTimeout); 
```

writeTimeout 是池中 Jedis 资源等待写入操作的最长时间。

为池构造函数指定的 readTimeout 是套接字读取的等待时间，`java.net.Socket.setSoTimeout`有关详细信息，请参阅。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-14T19:34:23.253

有几点需要考虑：

1.  对于 Jedis 和 JedisPool 类，超时以毫秒为单位。如我所见，至少在 2.5.1 中，默认超时是 2000（毫秒）：`int redis.clients.jedis.Protocol.DEFAULT_TIMEOUT = 2000 [0x7d0]`

2.  根据[本](http://redis.io/topics/clients)文档，Redis 2.6 或更高版本不会关闭连接，即使客户端处于空闲状态也是如此。我还没有验证这一点，我会在验证时尝试更新帖子。

# cxf - 有没有类似CXF wsdl2java的工具可以生成aegis的客户端代码？

> ID：14993653
> 
> 赞同：0
> 
> 时间：2013-02-21T02:38:04.623
> 
> 标签：cxf, wsdl2java, aegis

CXF wsdl2java 工具可以生成数据绑定为jaxb 的客户端代码。似乎 wsdl2java 无法生成 aegis 代码。是否有类似的工具可以为 aegis 生成客户端代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:36:33.940

不，Aegis 被设计为纯粹的“java 优先”数据绑定，因为它无法处理许多不同的模式概念等。如果从 WSDL 开始，强烈建议使用 JAXB。

# xml - 往返 XML -> XSD -> 类不起作用？

> ID：14993655
> 
> 赞同：1
> 
> 时间：2013-02-21T02:38:11.853
> 
> 标签：xml, c#-4.0, xsd, deserialization

我尝试过（但失败了）做以下事情。

1.  创建一个示例 XML 文件。

    `<?xml version="1.0" encoding="utf-8"?> <test1> <test2>Test3</test2> </test1>`

2.  通过 Visual Studio 2010 运行它`xsd`以生成 XSD 文件。

    `xsd test.xml`

3.  将 XSD 文件添加到 Visual Studio 2010 中的 C# 项目。这将添加文件：

    *   `test.Designer.cs`
    *   `test.xsc`
    *   `test.xss`

    并显示在设计器视图中，如下所示。

    ![在此处输入图像描述](../Images/cb3cabb6e22b30d372f2d9a499910608.png)

4.  然后我尝试反序列化启动整个过程的文件：

`var reader = new FileStream("xml/test.xml", FileMode.Open);
var serializer = new System.Xml.Serialization.XmlSerializer(typeof(NewDataSet)); var test = serializer.Deserialize(reader);`

我得到了错误

![在此处输入图像描述](../Images/430d446f11fbe97ec2cb483c57636d3d.png)

内部异常说`{"<test1 xmlns=''> was not expected."}`

我究竟做错了什么？或者我`xsd`也应该用来生成类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:51:26.910

您应该将文件作为字节打开，然后将它们排队到 MemoryStream 中。然后你可以从 MemoryStream 反序列化。

要查看的类型/方法是：

*   [File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx "File.ReadAllBytes")

*   [记忆流](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx "记忆流")

如果您需要更多指导，我可以发布代码示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:44:32.303

好的，好像是这样：

`xsd test.xsd /c`

生成`test.cs` 一个使用 this 作为类型，而不是`NewData`正确反序列化。

# java - 合并两个字符串对象。爪哇

> ID：14993657
> 
> 赞同：0
> 
> 时间：2013-02-21T02:38:19.577
> 
> 标签：java, string, list

我有一个任务要求我制作有序的字符串列表对象。我目前有 2 个有序字符串列表，每个列表中有 7 个字符串值。我试图创建一种方法，将列表 myList 和 yourList 合并为组合列表 combineList。

这是我到目前为止所拥有的。

```
public boolean merge(OrderedStringList myList, OrderedStringList yourList){
    int index;
    String value;
    for (index = 0;index < numUsed; index++){
        value = myList.storage[index];
        combinedList.insert(value);
    }
    for (index = 0;index < numUsed; index++){
        value = yourList.storage[index];
        combinedList.insert(value);
    }

} 
```

我在我的 main 中声明了对象 combineList，但它在我的 orderedStringList.class 中无法识别它

insert 函数将按字母顺序插入字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:42:15.420

具体在哪里`combinedList`声明？也许您应该在您的方法之外声明它，以便所有方法都可以访问它。

```
public class Merger {
    private OrderedStringList combinedList; // This is a field
    private int numUsed;
    public static void main(){
        new Merger().merge(new OrderedStringList(),new OrderedStringList());
    }
    public boolean merge(OrderedStringList myList, OrderedStringList yourList){
        int index;
        String value;
        for (index = 0;index < numUsed; index++){
            value = myList.storage[index];
            combinedList.insert(value);
        }
        for (index = 0;index < numUsed; index++){
            value = yourList.storage[index];
            combinedList.insert(value);
        }
        return false;
    }
}
class OrderedStringList {
    public String[] storage;
    public void insert(String value) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:44:13.190

如果您`combinedList`在主函数内部声明，则只能在主函数内部访问。

您应该做的是`combinedList`在上述函数内部创建并将结果返回给调用函数，即您的`main`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:53:42.633

了解如何解决我的问题。我只是根据每个列表中的字符串数量调用了插入函数，并将它们添加到新的组合列表中。

```
public boolean merge(OrderedStringList myList, OrderedStringList yourList) {
    boolean result = false;
    int index;
    for (index = 0; index < myList.numUsed; index++) {
        Insert(myList.storage[index]);
        result = true;
    }
    for (index = 0; index < yourList.numUsed; index++) {
        Insert(yourList.storage[index]);
        result = true;
    }
    return result;
} 
```

# ubuntu - Ubuntu 12.10 libgtk-3-0 缺少符号

> ID：14993659
> 
> 赞同：2
> 
> 时间：2013-02-21T02:38:30.523
> 
> 标签：ubuntu, gtk, gtk3, apt

我正在运行 Ubuntu 12.10，不知何故我的 libgtk-3-0 搞砸了。尝试运行许多不同的应用程序时，我收到如下错误：

```
gedit: symbol lookup error: /usr/lib/libgtk-3.so.0: undefined symbol: g_action_group_action_state_changed 
```

我尝试重新安装 libgtk-3-0：

```
sudo apt-get install --reinstall libgtk-3-0
sudo apt-get update
sudo apt-get upgrade 
```

但是我仍然遇到了这个问题 - 尝试运行各种应用程序时，libgtk-3.so.0 中有几个未定义的符号。启动系统没有问题。我怎样才能解决这个问题？

更新：

我的 libgtk 版本安装为：

```
/usr/lib/libgtk-3.so.0 -> libgtk-3.so.0.400.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:43:32.930

我使用 'ldd' 来确定我在单独的目录中有错误版本的 libcairo 和 libgtk。这些库链接到这个错误的版本。我删除了错误的版本，重新启动，一切正常。

```
ldd /usr/bin/gedit 
```

# excel - 输入时间时更改默认日期值

> ID：14993664
> 
> 赞同：0
> 
> 时间：2013-02-21T02:39:10.660
> 
> 标签：excel, datetime, excel-formula

在格式为**dd/mm/yy hh:mm**的单元格中输入时间值***12:45***后，默认输入以下日期值：**01/00/1900 12:45:00**。

 ****我想让它输入**今天的**日期，即默认***输入的日期***

我正在使用 MS Excel 2013

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:35:06.587

我不知道有任何方法可以像您正在寻找的那样一步完成。要通过几个步骤来完成，首先按`Ctrl`+ 分号，它会输入当前日期。然后按空格，然后按时间。

要输入当前时间，它是`Ctrl` `Shift`+ 分号。所以`Ctrl`+ 分号，然后是当前日期和时间。****

# c# - 使用 ResizeGrip 重新调整大小时，窗口的 MinWidth 和 MinHeight 都会被忽略

> ID：14993670
> 
> 赞同：2
> 
> 时间：2013-02-21T02:39:52.010
> 
> 标签：c#, wpf, xaml, css, resizegrip

首先是窗口本身的 XAML 代码：

```
<!-- Window Main -->
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Name="Window_Main" x:Class="WPF_Test.General_Window"
    Title="General_Window" Height="500" Width="1000" BorderThickness="30"  ResizeMode="CanResizeWithGrip" AllowsTransparency="True" WindowStyle="None" StateChanged="Window_Main_StateChanged">
<!-- Effects -->
<Window.Effect>
    <DropShadowEffect x:Name="Border_Effect" ShadowDepth="0" BlurRadius="30" Direction="0" Opacity="0.5"/>
</Window.Effect>
<!-- Border Main -->
<Border x:Name="Border_Main" BorderBrush="Gray" BorderThickness="1">
    <!-- Panel Main -->
    <DockPanel x:Name="Panel_Main">
        <DockPanel x:Name="Panel_Title" Height="25" LastChildFill="False" Background="#FFEEEEEE" MouseDown="Panel_Title_MouseDown" VerticalAlignment="Top" DockPanel.Dock="Top">

        </DockPanel>
        <DockPanel x:Name="Panel_Secondary" LastChildFill="true" Background="#FFEEEEEE"/>
    </DockPanel>
</Border> 
```

这是该窗口的构造函数的 C# 代码，我在其中明确定义了窗口的最小大小，但是在重新调整大小时它们仍然被忽略：

```
public void Window_Init()
    {

        Window_Main.MinHeight = Window_Minimum_Height + Window_Thickness * 2;
        Window_Main.MinWidth = Window_Minimum_Width + Window_Thickness * 2;
        Window_Main.BorderThickness = new Thickness( Window_Thickness );
    } 
```

因此，当我使用`ResizeGrip`（由`CanResizeWithGrip`属性提供）重新调整窗口大小时，窗口本身将在达到最小宽度和高度时停止重新调整大小。虽然完全包含窗口的渲染区域仍然可以重新调整到更小的尺寸，所以它看起来就像桌面上窗口的截断图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T01:01:48.283

I've resolved the bug. You can use the grip resizer or create your own resizing controls , Using `OnMouseDown` event to send a message to `HWND` to resize the window while it doesn't pass the minimum sizes you have previously defined for the window. This code will limit the window size when **maximizing** as well to ensure that the window will never be outside of the screen or rendered over the task-bar.

This supposed to be at the bottom of your MainWindow.cs code:

```
 private const int WM_SYSCOMMAND = 0X112;
    private HwndSource hwndSource;
    enum SWP : uint
    {
        NOSIZE = 0x0001 ,
        NOMOVE = 0x0002 ,
        NOZORDER = 0x0004 ,
        NOREDRAW = 0x0008 ,
        NOACTIVATE = 0x0010 ,
        FRAMECHANGED = 0x0020 ,  
        SHOWWINDOW = 0x0040 ,
        HIDEWINDOW = 0x0080 ,
        NOCOPYBITS = 0x0100 ,
        NOOWNERZORDER = 0x0200 , 
        NOSENDCHANGING = 0x0400 , 
    }
    public override void OnApplyTemplate()
    {
        System.IntPtr handle = ( new WindowInteropHelper( this ) ).Handle;
        HwndSource.FromHwnd( handle ).AddHook( new HwndSourceHook( WindowProc ) );
    }
    private System.IntPtr WindowProc( System.IntPtr hwnd , int msg , System.IntPtr wParam , System.IntPtr lParam , ref bool handled )
    {
        switch ( msg )
        {
            case 0x0024:
                {
                    WmGetMinMaxInfo( hwnd , lParam );
                    handled = true;
                    break;
                }
            case 0x0046:
                {
                    WINDOWPOS pos = ( WINDOWPOS )Marshal.PtrToStructure( lParam , typeof( WINDOWPOS ) );
                    if ( ( pos.flags & ( int )(SWP.NOMOVE) ) != 0 )
                    {
                        return IntPtr.Zero;
                    }

                    Window wnd = ( Window )HwndSource.FromHwnd( hwnd ).RootVisual;
                    if ( wnd == null )
                    {
                        return IntPtr.Zero;
                    }

                    bool changedPos = false;
                    if ( pos.cx < MinWidth ) { pos.cx = (int)MinWidth; changedPos = true; }
                    if ( pos.cy < MinHeight ) { pos.cy = ( int )MinHeight; changedPos = true; }
                    if ( !changedPos )
                    {
                        return IntPtr.Zero;
                    }

                    Marshal.StructureToPtr( pos , lParam , true );
                    handled = true;
                    break;
                }
        }
        return ( System.IntPtr )0;
    }
    private void WmGetMinMaxInfo( System.IntPtr hwnd , System.IntPtr lParam )
    {
        MINMAXINFO mmi = ( MINMAXINFO )Marshal.PtrToStructure( lParam , typeof( MINMAXINFO ) );
        int MONITOR_DEFAULTTONEAREST = 0x00000002;
        System.IntPtr monitor = MonitorFromWindow( hwnd , MONITOR_DEFAULTTONEAREST );
        if ( monitor != System.IntPtr.Zero )
        {
            MONITORINFO monitorInfo = new MONITORINFO();
            GetMonitorInfo( monitor , monitorInfo );
            RECT rcWorkArea = monitorInfo.rcWork;
            RECT rcMonitorArea = monitorInfo.rcMonitor;
            mmi.ptMaxPosition.x = Math.Abs( rcWorkArea.left - rcMonitorArea.left );
            mmi.ptMaxPosition.y = Math.Abs( rcWorkArea.top - rcMonitorArea.top );
            mmi.ptMaxSize.x = Math.Abs( rcWorkArea.right - rcWorkArea.left );
            mmi.ptMaxSize.y = Math.Abs( rcWorkArea.bottom - rcWorkArea.top );
        }
        Marshal.StructureToPtr( mmi , lParam , true );
    }
    [StructLayout( LayoutKind.Sequential )]
    public struct POINT
    {
        public int x;
        public int y;
        public POINT( int x , int y )
        {
            this.x = x;
            this.y = y;
        }
    }
    [StructLayout( LayoutKind.Sequential )]
    public struct MINMAXINFO
    {
        public POINT ptReserved;
        public POINT ptMaxSize;
        public POINT ptMaxPosition;
        public POINT ptMinTrackSize;
        public POINT ptMaxTrackSize;
    };
    [StructLayout( LayoutKind.Sequential , CharSet = CharSet.Auto )]
    public class MONITORINFO
    {
        public int cbSize = Marshal.SizeOf( typeof( MONITORINFO ) );
        public RECT rcMonitor = new RECT();
        public RECT rcWork = new RECT();
        public int dwFlags = 0;
    }
    [StructLayout( LayoutKind.Sequential , Pack = 0 )]
    public struct RECT
    {
        public int left;
        public int top;
        public int right;
        public int bottom;
        public static readonly RECT Empty = new RECT();
        public int Width
        {
            get { return Math.Abs( right - left ); }
        }
        public int Height
        {
            get { return bottom - top; }
        }
        public RECT( int left , int top , int right , int bottom )
        {
            this.left = left;
            this.top = top;
            this.right = right;
            this.bottom = bottom;
        }
        public RECT( RECT rcSrc )
        {
            this.left = rcSrc.left;
            this.top = rcSrc.top;
            this.right = rcSrc.right;
            this.bottom = rcSrc.bottom;
        }
        public bool IsEmpty
        {
            get
            {
                return left >= right || top >= bottom;
            }
        }
        public override string ToString()
        {
            if ( this == RECT.Empty ) { return "RECT {Empty}"; }
            return "RECT { left : " + left + " / top : " + top + " / right : " + right + " / bottom : " + bottom + " }";
        }
        public override bool Equals( object obj )
        {
            if ( !( obj is Rect ) ) { return false; }
            return ( this == ( RECT )obj );
        }
        public override int GetHashCode()
        {
            return left.GetHashCode() + top.GetHashCode() + right.GetHashCode() + bottom.GetHashCode();
        }
        public static bool operator ==( RECT rect1 , RECT rect2 )
        {
            return ( rect1.left == rect2.left && rect1.top == rect2.top && rect1.right == rect2.right && rect1.bottom == rect2.bottom );
        }
        public static bool operator !=( RECT rect1 , RECT rect2 )
        {
            return !( rect1 == rect2 );
        }
    }
    [DllImport( "user32" )]
    internal static extern bool GetMonitorInfo( IntPtr hMonitor , MONITORINFO lpmi );
    [DllImport( "User32" )]
    internal static extern IntPtr MonitorFromWindow( IntPtr handle , int flags );
    [StructLayout( LayoutKind.Sequential )]
    internal struct WINDOWPOS
    {
        public IntPtr hwnd;
        public IntPtr hwndInsertAfter;
        public int x;
        public int y;
        public int cx;
        public int cy;
        public int flags;
    }
    private void InitializeWindowSource( object sender , EventArgs e )
    {
        hwndSource = PresentationSource.FromVisual( ( Visual )sender ) as HwndSource;
    }
    public enum ResizeDirection
    {
        Left = 1 ,
        Right = 2 ,
        Top = 3 ,
        TopLeft = 4 ,
        TopRight = 5 ,
        Bottom = 6 ,
        BottomLeft = 7 ,
        BottomRight = 8 ,
    }
    [DllImport( "user32" , CharSet = CharSet.Auto )]
    private static extern IntPtr SendMessage( IntPtr hWnd , uint Msg , IntPtr wParam , IntPtr lParam );
    private void ResizeWindow( ResizeDirection direction )
    {
        SendMessage( hwndSource.Handle , WM_SYSCOMMAND , ( IntPtr )( 61440 + direction ) , IntPtr.Zero );

    } 
```

And do not forget to add this line to your window's constructor, otherwise nothing shall work:

```
SourceInitialized += new EventHandler( InitializeWindowSource ); 
```

# ios - 我的第一个 Visual Studio iOS 项目的问题

> ID：14993671
> 
> 赞同：2
> 
> 时间：2013-02-21T02:39:58.943
> 
> 标签：ios, windows, visual-studio, xamarin.ios

我刚刚尝试在 Visual Studio 中启动一个简单的 iOS 项目，它说它找不到 Mac Build Host。最令人沮丧的是，Xamarin 网站根本没有关于 Mac Build Host 是什么的信息。我已经在 Windows 中弹出了命令提示符，并且完全能够 ping 我的 Mac 机器，所以它绝对可以从 Windows 中查看。

我猜它必须是某种需要在 Mac 上运行的后台进程，但 Xamarin 站点中没有任何地方告诉我在哪里可以获得它。

帮助！

<vent>
PS 我对来自 Xamarin 的“跨平台”、“可移植性”和“重用现有 C# 技能”行话认真地重新考虑了。用简单的 Objective-C 启动我的第一个应用程序要容易得多。Xamarin 的方法感觉就像“我们将以 999 美元的价格向您运送一个损坏的产品，您可以帮助我们弄清楚如何让这个产品更有销路”。
</发泄>

**编辑**：阅读每个人的帖子后，我想我将只使用 Xamarin Studio 而不是采用 Visual Studio 方法。从长远来看，对于像我这样的人来说，这似乎是一种不太复杂的方法。感谢大家的帖子！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:16:12.570

The Mac Build Host is a process which runs on the network-hosted mac you need to connect to from your Windows machine, in order to perform the final app compile and build. I have just installed iOS for Visual Studio, and I had to create a Xamarin account that was associated with the VS install. Also, I had to install Xamarin.iOS on the Mac itself, instructions here:

[http://docs.xamarin.com/guides/ios/getting_started/installation/mac/](http://docs.xamarin.com/guides/ios/getting_started/installation/mac/)

What wasn't explained properly was that I then had to close VS, open it and create a new iOS project. At this point, a wizard was initiated which used the Xamarin Bonjour service to locate our networked mac and use that as the build host. All the bits came installed with the Xamarin installer, I just had to initiate them by opening up a project.

Obviously this will be different for you using Xamarin Studio, but have you tried creating a new a project to see if this initiates a wizard? Or do you need to install the iOS on your mac as well as Windows?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T05:28:39.210

Xamarin 文档站点提供了有关[如何设置 Mac 以充当 Visual Studio 的 iOS 构建主机的说明](http://docs.xamarin.com/guides/ios/getting_started/installation/windows#Installation)。我同意这在“连接到 Xamarin.iOS 构建主机”对话框中不是很清楚，所以我[提交了一个错误](https://bugzilla.xamarin.com/show_bug.cgi?id=10559)。

你还可以使用[Xamarin Studio](http://xamarin.com/studio)在 Mac 上开发 Xamarin.iOS 应用。它使用与 Visual Studio 相同的项目/解决方案格式，因此您可以与 VS 共享解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T02:52:06.923

我不得不承认，我也不完全确定“Mac Build Host”是什么意思。如果您使用 Visual Studio 构建，而不是 Xamarin Studio，我希望能找到类似的东西。

我最好的猜测是，也许 Xamarin Studio 没有以某种方式“看到”您的 iOS 开发工具设置？你能进入插件管理器，看看你有什么版本的 iOS 开发吗？

抱歉，到目前为止，您对此感到不快。我已经使用它一段时间了，到目前为止它对我来说非常棒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T21:10:36.443

对于可能花了几天时间绕圈子的其他人，上面的答案指出您需要关闭 VS，打开它并创建一个新的 iOS 项目是关键。

Xamarin 真的需要让这一点更清楚！

安德烈亚斯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T11:21:20.140

你的windows机器上安装了bonjour吗？这是 Windows 上的 Xamarin Studio 与您的 Mac 构建主机对话所必需的。您还需要按如下方式设置关系。

[第 3.1 节](http://docs.xamarin.com/guides/ios/getting_started/introduction_to_xamarin_ios_for_visual_studio)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-16T20:34:22.117

我注意到的另一件事是，尽管我将 Xamarin Bonjour 服务设置为自动启动，但它以某种方式重置为手动。Xamarin 插件在我启动 Visual Studio 时打开服务 MMC，并在发生这种情况时打开现有项目。

在调试过程中，很容易在 Mac 机器上的 iOS 模拟器停止之前停止 VS 调试器。如果您单击 iPhone 模拟器底部按钮，然后单击命令-Q 关闭模拟器，它工作正常。这会使 VS 退出调试。

如果在某些情况下，虽然 VS 在模拟器之前停止，这会终止连接，并且需要关闭并重新启动 VS。一两次它损坏了 iOS 模拟器，并出现了一个空的 iPhone 图形，而不是默认的照片、联系人设置等图标。在这种情况下，关闭并重新打开它，然后在启动模拟器时单击 iOS 模拟器菜单，然后单击重置内容和设置。这清除了腐败状态，之后就一切正常了。

总体而言，它运行良好，不会妨碍开发，但 Xamarin 团队的任何改进都受到欢迎。

# jquery - addClass 多个类不适用于选择

> ID：14993672
> 
> 赞同：0
> 
> 时间：2013-02-21T02:40:01.083
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有一个替代数组，它包含`shift_types`在我的模型中，如下所示：

```
 SHIFT_TYPES = %w(Half Full Semi-Foo) 
```

在我看来，我有以下

```
<%= f.select(:shift_type, HospitalBooking::SHIFT_TYPES.each_with_index { |e,i| [i,e] }) %> 
```

我想要实现的是，根据选择的班次类型，表格单元格的背景会发生变化。所以我所做的是尝试通过在我的 application.js 中执行以下操作来使用 .addclass

```
$('.rota td').addClass("Half Full Semi-Foo"); 
```

在css中它被设置为

```
.Half{ background-color: green;
}

.Full{ background-color: #ff0000;}

.Semi-Foo { background-color: #ffff00;} 
```

我确信这个设置是正确的。但是，当我进行预订并选择班次类型时，表格单元格似乎没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:59:02.860

你有没有尝试过这样的事情：

```
$("#hospital_booking_shift_type").change(function(){
  $(this).closest('td').removeClass('Half Full Semi-Foo').addClass($(this).val())
}) 
```

# php - 通过检查登录用户来使用 htaccess 保护目录

> ID：14993674
> 
> 赞同：0
> 
> 时间：2013-02-21T02:40:19.590
> 
> 标签：php, html, apache, .htaccess

我一直在尝试创建一个允许用户上传 Word 文档的网站。然后这些文档将存储在该网站的公共目录中。问题是，我不希望每个人都访问上传的文件.. 我想检查他们是否先登录，以及他们是否是“授权用户”.. 说他们的帐户级别是否为 50 或更高，然后他们被允许打开目录..

无论如何我可以通过 .htaccess 做到这一点？..还是有更好的解决方案？

我不知道这是不是一个愚蠢的问题，但请帮助我。我非常感谢我现在能得到的任何帮助。

**笔记：**

抱歉之前没有提到，但我实际上想使用谷歌文档来查看这些文档，以便将它们嵌入到我的网站中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:07:29.650

听起来您正在采取将公共文档目录放在 Web 根目录下某处的方法。出于多种原因（安全性、可移植性、可维护性），这不是最好的方法。

这是一种快速而简单的方法（我假设您已经在使用数据库或其他存储凭据的方式处理用户身份验证）：

1.  将文档目录放在 Web 根目录之外的某个位置。
2.  创建一个函数（或类）来读取文档目录中的文件列表（查看`scandir()`（[http://www.php.net/manual/en/function.scandir.php](http://www.php.net/manual/en/function.scandir.php)）
3.  创建一个页面，显示读取文档目录的结果。每个文件都应该是指向页面的链接以及指示文件的 URL 参数。在此页面中，在向用户显示文件列表之前检查用户的凭据。
4.  在文件列表页面指向的页面中，检查以确保所请求的文件存在于文档目录中（不要忘记再次检查以确保用户具有必要的凭据！），然后读取该文件并推送它给用户。请参阅`readfile()`（[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)），在设置各种标题字段的示例中特别注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:46:14.183

您可能希望使用数据库（MySQL？）和 PHP 会话来检查：

1.  用户已成功登录（数据库中的凭据）
2.  用户拥有“50 级”或更高级别`if($level >= 50)`
3.  当用户在页面之间移动时，使用会话和会话变量来创建持久的身份验证密钥。
4.  您不需要为此使用 .htaccess 文件。

# javascript - 要求功能是 AMD 规范的一部分吗？

> ID：14993675
> 
> 赞同：1
> 
> 时间：2013-02-21T02:40:26.013
> 
> 标签：javascript, requirejs

我最近一直在使用 AMD 模块和 RequireJS，我正试图弄清楚 AMD 规范是什么。到目前为止，我唯一能找到的是[https://github.com/amdjs/amdjs-api/wiki/AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)的 amdjs GitHub 页面。

此页面仅显示该`define( id, dependencies, factory)`功能作为官方规范的一部分。Require 调用了另一个函数`require( dependencies, callback )`，我不确定它是官方规范的一部分，还是它只是 RequireJS 库提供的便利函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:42:16.480

在您链接的页面中，在标题全局变量下：

> 本规范保留全局变量“define”用于实现本规范、包元数据异步定义 API，并为其他未来的 CommonJS API 保留。模块加载器不应该向这个函数添加额外的方法或属性。
> 
> **本规范保留全局变量“require”供模块加载器使用。模块加载器可以随意使用这个全局变量。他们可以使用该变量并根据模块加载器特定功能的需要向其添加任何属性或函数。他们也可以选择不使用“require”。**

[Curl](https://github.com/cujojs/curl)是一个不使用`require`.

此外[，还有一个页面详细介绍了支持它的加载程序的`require`API](https://github.com/amdjs/amdjs-api/wiki/require)。

# chef-infra - 如何在 Vagrant 中使用新的 opscode 存储库？

> ID：14993677
> 
> 赞同：3
> 
> 时间：2013-02-21T02:40:39.537
> 
> 标签：chef-infra, vagrant

我不久前使用了 Vagrant，并且能够使用以下内容：

```
config.vm.provision :chef_solo do |chef|
chef.recipe_url = 'https://github.com/opscode/cookbooks/tarball/master'
chef.add_recipe 'nginx'
chef.add_recipe 'mysql'
chef.add_role 'web'

# You may also specify custom JSON attributes:
# chef.json = { :mysql_password => '' }
end 
```

现在它似乎已被弃用。我到底如何使用新的 repo？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T15:41:05.350

首先，我的建议是不要直接从 Git 的 master 分支使用*任何人的食谱。*如果食谱存储库的各个作者/维护者 - 个人或整体 - 每个“版本”都有 Git 标签，请使用它。否则，请使用您知道适用于您的基础架构的特定提交。虽然 GitHub 是一个用于共享代码的有用站点，但重要的是要记住这些是*开发*存储库。相比之下，大多数人不会在他们的应用程序中使用库核心的主分支，他们会使用该库的发布版本（无论是 gem、cpan 模块、包等）。

其次，Opscode 的食谱已经发布了经过测试的版本，以确保它们按照自述文件所说的那样做。这些版本发布到[Chef 社区站点](http://community.opscode.com)。虽然他们[在 GitHub 上有存储库](https://github.com/opscode-cookbooks)，但我们建议使用该站点的版本。

要将手册从站点获取到您的本地系统，有多种工具可以支持本地开发工作流程。在内部，Opscode 正在使用[Berkshelf](http://berkshelf.com)，社区中的许多人也是如此。这是一个相当完整的工作流管理工具，包括类似于[RubyGems Bundler](http://gembundler.com)的依赖解析器。Berkshelf 还与 Vagrant 集成，这意味着您的“berksfile”中的所有食谱都将复制到 Vagrant 机器以在 Chef 运行中使用。

chef-repo 顶层中的示例 Berksfile 如下所示；

```
site :opscode
cookbook "nginx"
cookbook "mysql"
cookbook "my_application", :git => "https://git.example.com/cookbooks/my_application.git" 
```

然后使用`berks install`下载食谱。Berkshelf 也将使用说明书中的元数据来解决它们的依赖关系。这将使用社区站点 API 下载 nginx 和 mysql 说明书，然后从内部 Git 存储库中检索“my_application”说明书。然后，要在 vagrant 中使用 berkshelf，请将其放在 vagrantfile 的顶部；

```
require 'berkshelf/vagrant' 
```

然后，当您“流浪”时，如果您使用 Chef Solo，berkshelf 会将所有食谱复制到 Vagrant 机器中。如果您使用的是 Chef 客户端/服务器，那么您使用`berks upload`将所有食谱上传到服务器，并且 vagrant 中的客户端配置器将从服务器下载。

Riot Games Berkshelf 的主要开发人员之一 Jamie Winsor 撰写了一份[详尽的指南](http://vialstudios.com/guide-authoring-cookbooks.html)。

Berkshelf 的替代工具是[Librarian Chef](https://github.com/applicationsonline/librarian)。它纯粹是一个依赖管理工具，而不是工作流工具。它“接管”你的`cookbooks`目录，管理那里的所有内容，你的定制食谱进入`site-cookbooks`. 然后，您可以像往常一样将 Vagrant 与单独的配置器一起使用，或者将客户端/服务器与`knife cookbook upload`.

最后，`knife`由于它与 Chef Client 一起提供，RubyGem 有一个插件，`cookbook site install`. 虽然这由 Opscode 作为 Chef gem 的一部分提供支持和维护，但许多人正在将他们的工作流程转移到使用 Berkshelf 或 Librarian。[Chef 文档有关于这个插件的更多](http://docs.opscode.com/knife_cookbook_site.html#install)信息。

如果您还有其他问题，[#chef irc 频道](http://community.opscode.com/chat/chef)或[Chef 邮件列表](http://lists.opscode.com/sympa/subscribe/chef)是提问和讨论工作流程的好地方。

# regex - .+? 之间的差异（如果有的话）？和 。*

> ID：14993680
> 
> 赞同：2
> 
> 时间：2013-02-21T02:40:57.637
> 
> 标签：regex, regex-greedy

我正在查看一些旧代码库，并遇到了两个我认为在语义上相同的正则表达式部分。想知道 Stackoverflow 社区可以证实我的理解。

RegEx 1: (.+?) - 一个或多个字符，但可选

正则表达式 2：(.*) - 零个或多个字符

我一直在考虑不同的场景，但想不出任何两个表达式都不相同的输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T02:50:04.027

`(.+?)`表示匹配一个或多个字符，但不是默认的*贪婪*匹配（尽可能匹配），`?`后量词使匹配变得*懒惰*（尽可能少匹配）。

*从概念上讲*，贪心匹配将首先尝试内部模式可以形成的最长可能序列，然后随着引擎回溯逐渐减少序列的长度。惰性匹配会首先尝试内部模式可以形成的最短序列，然后随着引擎回溯逐渐增加序列的长度。

因此，`(.+?)`和`(.*)`是完全不同的。给定一个字符串`"abc"`，模式`(.+?)`将匹配`"a"`第一个匹配，而`(.*)`将匹配`"abc"`第一个匹配。

当您将模式更正为预期含义时：`((?:.+)?)`，它与行为完全相同`(.*)`。由于量词默认是贪婪的，在尝试空字符串的情况之前`((?:.+)?)`会先尝试的情况。`.+`并且`.+`会在 1 个字符序列之前尝试最长的序列。因此，效果`((?:.+)?)`完全一样`(.*)`：会找到最长的序列，并逐渐回溯到空字符串的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T02:53:38.957

第一的，

```
. is any character 
```

下一个

```
* is zero or more
+ is one or more 
? is one or zero 
```

你是这么想的。+？是一个或多个任何字符，我猜是其中的 0 个或 1 个？你错过了这个：

**懒惰的修饰符**

```
*? is zero or more getting as few as possible
+? is one or more getting as few as possible 
```

请参阅此处以进一步讨论 [贪婪与不情愿与占有量词](https://stackoverflow.com/questions/5319840/greedy-vs-reluctant-vs-possessive-quantifiers)

# javascript - Javascript - 脚本内存与 DOM 存储

> ID：14993681
> 
> 赞同：2
> 
> 时间：2013-02-21T02:41:00.770
> 
> 标签：javascript, memory-management

我正在编写一个为用户求解方程的代码。用户将能够输入矩阵、向量等。现在，当我解这些方程时，我将解写到一个表格中，每一行代表任何给定的变量或方程。在计算过程中用于保存方程的 javascript 对象被破坏。我这样做是为了防止将大量数据存储在内存中并可能减慢脚本的速度。由于稍后需要一个数组，因此从相应的表行中将其读入一个对象。

我想知道像这样在 DOM 中保存内存与将其保存在内存中的对象中相比如何。通过将这些东西作为对象而不是 DOM 保存在内存中，我更有可能减慢代码执行速度？此外，由于这些对象需要由代码的多个部分访问，因此它们必须是全局对象。正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:10:17.367

一句话，没有。

在 Web 开发中有一个不变的规则：**DOM 很慢**。

选择、访问和迭代 DOM 元素以及读取和修改它们的属性是您在浏览器 JS 中可以做的最慢的事情之一。另一方面，使用原生 JS 对象非常快。通常，我会尽可能避免使用 DOM。

您做出（不正确的）假设，即低内存使用率在某种程度上等同于提高性能。事实上，增加内存使用量*会提高*应用程序性能的情况通常是¹（而不仅仅是在浏览器中） 。通过将计算结果缓存在内存中的特性，您可以避免稍后重新构建数据的处理器和时间密集型需求。当然，您必须在内存使用与性能需求之间取得平衡。

 *在您的情况下，我肯定会将方程对象保存在内存中。它可能使用了令人惊讶的少量内存。例如，我刚刚在 Chrome 中创建了一个包含 1,000 个整数的数组，内存分析器告诉我它使用了不到 40 kB——几乎所有的对象开销。这些值本身只占用 4 kB – 1000 * 4 字节（32 位）。

当您考虑读取 DOM 以重新生成对象的例程可能需要数十到数百毫秒（或更糟，取决于复杂性）来运行时，您为什么不只生成一次对象并保留它，尤其是因为成本这么低？

但是，与所有性能问题一样，真正的答案是您必须分析您的应用程序以查看性能瓶颈的真正位置。在您使用应用程序时，使用 Chrome 的开发者工具的配置文件选项卡获取[CPU 配置文件](https://developers.google.com/chrome-developer-tools/docs/cpu-profiling)（随时间测量处理器利用率）和[堆快照](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)（即时测量内存使用情况）。

^(1 - 这实际上取决于您的程序是否使用了太多内存以至于必须换出页面。在 16 GB RAM 已司空见惯的台式机上，您几乎无需担心。但是，在资源更加受限的移动设备上观察内存使用情况仍然很重要。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:12:12.857

> 我想知道像这样在 DOM 中保存内存与将其保存在内存中的对象中相比如何。

测试一下，我希望 DOM 使用更多内存并且访问速度要慢得多。在任何情况下，除非您存储了大量的东西，否则内存影响可能很小。

> 通过将这些东西作为对象而不是 DOM 保存在内存中，我更有可能减慢代码执行速度？

我期望的相反。访问 DOM 会慢很多。

> 此外，由于这些对象需要由代码的多个部分访问，因此它们必须是全局对象。正确的？

错误的。您可以在闭包中保存引用，或将所有对象放入单个数组或对象中。无论如何，全局对象*本身*并不坏，它们只是被认为是不整洁的并增加了名称冲突的机会。*

# eclipse - Eclipse 运行错误

> ID：14993683
> 
> 赞同：1
> 
> 时间：2013-02-21T02:41:16.900
> 
> 标签：eclipse

当我尝试在 Eclipse 上运行我的代码时，会出现此错误：

```
用法：javaw [-options] 类 [args...]
           （执行一个类）
   或 javaw [-options] -jar jarfile [args...]
           （执行一个jar文件）
其中选项包括：
    -d32 使用 32 位数据模型（如果可用）
    -d64 使用 64 位数据模型（如果可用）
    -server 选择“服务器”VM
    -hotspot 是“服务器”虚拟机的同义词 [已弃用]
                  默认虚拟机是服务器。

`-cp <class search path of directories and zip/jar files>
-classpath <class search path of directories and zip/jar files>
              A ; separated list of directories, JAR archives,
              and ZIP archives to search for class files.
-D<name>=<value>
              set a system property
-verbose:[class|gc|jni]
              enable verbose output
-version      print product version and exit
-version:<value>
              require the specified version to run
-showversion  print product version and continue
-jre-restrict-search | -no-jre-restrict-search
              include/exclude user private JREs in the version search
-? -help      print this help message
-X            print help on non-standard options
-ea[:<packagename>...|:<classname>]
-enableassertions[:<packagename>...|:<classname>]
              enable assertions with specified granularity
-da[:<packagename>...|:<classname>]
-disableassertions[:<packagename>...|:<classname>]
              disable assertions with specified granularity
-esa | -enablesystemassertions
              enable system assertions
-dsa | -disablesystemassertions
              disable system assertions
-agentlib:<libname>[=<options>]
              load native agent library <libname>, e.g. -agentlib:hprof
              see also, -agentlib:jdwp=help and -agentlib:hprof=help
-agentpath:<pathname>[=<options>]
              load native agent library by full pathname
-javaagent:<jarpath>[=<options>]
              load Java programming language agent, see java.lang.instrument
-splash:<imagepath>
              show splash screen with specified image
 See http://www.oracle.com/technetwork/java/javase/documentation/index.html for more details.` 

我尝试注释我的完整代码，但仍然出现此错误。

            回答 #1

赞同：1

时间：2013-02-21T02:43:35.673

看来你没有正确设置你的java路径。

[在 Windows 上使用 Java 1.6 设置 Eclipse](http://www.ugrad.cs.ubc.ca/~cs211/tutorials/Eclipse/Eclipse_Java_Windows_XP.html)

[如何安装和开始使用 Java 编程](http://www3.ntu.edu.sg/home/ehchua/programming/howto/EclipseJava_HowTo.html)

            回答 #2

赞同：0

时间：2015-01-27T20:28:17.223

如果这仅发生在特定项目并且其他项目运行良好，那么您的默认运行配置可能已更改。您可以尝试以下操作 - 运行 -> 运行方式 -> 1 Java 应用程序。

            回答 #3

赞同：0

时间：2013-12-06T17:31:56.443

以干净模式运行eclipse

编辑位于 Eclipse 安装目录中的 eclipse.ini 文件并插入 -clean 作为第一行。

            回答 #4

赞同：-1

时间：2014-04-07T17:23:28.130

我通过删除一些旧的运行时配置解决了这个问题。然后 Eclipse 开始再次自动生成它们。

```

# scorm - SCORM 包交换格式只是一种数据交换格式还是更复杂？

> ID：14993686
> 
> 赞同：0
> 
> 时间：2013-02-21T02:41:20.727
> 
> 标签：scorm, data-interchange

我正在为移动设备开发一个学习项目，该项目需要（或至少是可取的）能够导出为 SCORM 兼容格式的能力。我看到 SCORM 有一个基于`.zip`文件的“包交换格式”（PIF）。我是 SCORM 的新手，正在尝试准确了解该文件必须包含的内容。具体来说，PIF 文件只是一种用于在系统之间生成可互换数据的格式，还是比这更复杂？

在某些情况下，想象一下用户必须在本地移动应用程序上运行的一组问题/部分的用例，最后，我们希望为用户提供以“导出”其数据的能力符合 SCORM 的时尚。这仅仅是将有关`a)`问题和`b)`答案的信息导出为某种`.xml`格式的问题，还是还有更多？我注意到很多关于 SCORM 的文档似乎都集中在 Javascript 和 HTML 上。SCORM HTML 是特定的，还是本机应用程序可以与 SCORM 协调，至少从导出的角度来看？

抱歉，如果这是基本的东西。只是试图围绕标准以及它如何适用或不适用于我正在做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:36:38.680

SCORM 的问题在于它必须从 LMS 中启动。如果您正在构建一个必须与 LMS 通信的外部应用程序，请查看 LTI ( [http://www.imsglobal.org/toolsinteroperability2.cfm](http://www.imsglobal.org/toolsinteroperability2.cfm) ) 或 TinCanAPI ( [http://tincanapi.com/](http://tincanapi.com/) )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:45:50.867

PIF 确实是 SCORM 包装的一个非常小的细节。它只是说您可以以 zip 格式分发您的内容，而不是应该包含的内容。SCORM (1.2) 文件应该包含的内容在 SCORM CAM 书中有非常详细的描述。快速总结一下，您需要：

*   内容运行所需的所有文件（图像、html 文件、javascript 文件、css 等）
*   一个名为 imsmanifest.xml 的文件，它描述了有关您的内容、其中包含的文件以及它们如何与运行的 LMS 交互的一些内容。它可以从非常简单到非常复杂。
*   （可选）XML 格式的元数据

因此，SCORM 并不关心您是否以及在何处包含您的问题和答案。它不知道他们。这是您的内容的责任，并且应该能够在运行时包含它们并将它们呈现给用户。SCORM 可以做的是让您的内容与您运行它的 LMS 进行通信，以便保留这些问题的结果。

现在，我建议您查看一些现有的 SCORM 文件，了解 imsmanifest.xml 文件的外观，然后研究 SCORM CAM 书籍，事情就会开始发展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T00:11:21.750

SCORM 2004 示例[https://github.com/cybercussion/SCOBot/](https://github.com/cybercussion/SCOBot/) 您压缩目录的内容。一些 LMS 期望 imsmanifest.xml 位于 zip 的根目录中。

有些人使用 LMS 格式的本地应用程序并将 SCO 加载到 HTML 视图中，但如上所述，SCORM 期望 JavaScript 到 JavaScript 通信。

# excel - 按销售额排名前三分之一、下三分之一的商品

> ID：14993687
> 
> 赞同：0
> 
> 时间：2013-02-21T02:42:01.037
> 
> 标签：excel

我有一个 excel 表，如下所示。我需要按销售额获得前三分之一/下三分之一的商品。有没有办法在 Excel 中完成这项工作？

```
 Item    Count
  1         100
  2          90
  3          80
  4          60
  5          55
  6          50
  7          45
  8          35
  9          25 
```

分成 3 个桶，所以每个桶有 540/3 = ~180 个项目 -</p>

存储桶 1 – 项目 1 和 2（计数 = 190） 存储桶 2 – 项目 3、4 和 5（计数 = 195） 存储桶 3 - 项目 6、7、8、9（计数 = 155）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T04:38:51.640

有多种方法可以实现这一目标。假设您的`Item`和`Count`数据在 A 列和 B 列中，那么最短路径是在单元格中使用以下公式`C2`：

```
=ROUND(3*SUM($B$2:$B2)/SUM($B$2:$B$10),0) 
```

将其输入后`C2`，选择该单元格并将单元格的右下角一直拖到最后一行。注意`$`第二个之前故意“丢失”的标志`2`。这会处理向下拖动角落时所需的自动填充行为。

如果允许使用辅助列，则可以使用以下布局创建计算效率更高的方法：

![实现存储桶的示例布局](../Images/17e8fe119b2a6b884f963e35a1466357.png)

如果你愿意，你可以隐藏 column `C`。它包含不同销售计数的累积值。单元格`C1`设置为`0`，单元格`C2`包含公式`=$C1+$B2`。然后Column`D`通过使用`=ROUND(3*$C2/$C$10,0)`单元格中的公式来近似存储桶`D2`，然后再次向下拖动右下角。如果您的工作表上有很多行，这可能是更好的方法。

请注意，两种解决方案都会产生相同的结果。一个或多个桶中的值可能变为`0`，这是不完全正确的。`ROUNDUP`使用代替可以避免这种情况`ROUND`，但是由于您没有明确指出希望桶的边界在不同情况下准确落在哪里，我想我把它留给您作为练习:-)。

# php - PHP MYSQL 如何将 $_POST 数据插入 MySQL

> ID：14993697
> 
> 赞同：0
> 
> 时间：2013-02-21T02:43:08.810
> 
> 标签：php, mysql, post

我正在使用以下代码从 MySQL 数据库中提取所有语言变量和值并填充表单以进行编辑：

```
function language() {

    $settings = array();
    $sql = "SELECT * FROM `languages`";
    $result = mysql_query($sql);
    // Mysql_num_row is counting table row
    while ($row = mysql_fetch_assoc($result)) {

        ?>

            <div style="float:left;width:250px;padding-left:15px"><label><?php echo $row['id'];?></label></div><div style="float:left;margin-left:0px;"><input type="text" name="<?php echo $row['id'];?>" value="<?php echo $row['value'];?>" /></div>

        <? php

    }
} 
```

我有一个基本功能可以将上述表格中所做的更改保存回数据库，并使用任何更改进行更新：

```
function save_language() {

    $post = $_POST;
    $out = array_shift($post);

    // Mysql_num_row is counting table row
    foreach($post as $key => $value) {
        $sql = "UPDATE `languages` SET `value`='$value' WHERE `id`='$key'";
        $result = mysql_query($sql);
    }

    if ($result) {
        echo "Language Settings Updated";
    }

} 
```

这种方法有效，但速度很慢。我是编码新手，我确信我忽略了一些可以加快保存过程的简单内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:49:29.153

您的查询实际上不应该工作，因为连接超出了函数的范围。传递连接的正确方法是通过函数：

```
function language( $conn ) {
    ...
} 
```

由于注入漏洞以及函数的弃用，您应该***立即***`mysql_`停止使用您的代码。改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

根据您要更新的记录数量和建立的连接数量，它可能会减慢您的脚本速度。

如果你想`INSERT`记录，你需要使用准备好的语句。

另外，我不了解`// Mysql_num_row is counting table row`您`save_language`函数中的 commnet，因为您没有在任何地方使用结果中的行数。

# javascript - 将 html id 传递给 javascript 函数

> ID：14993705
> 
> 赞同：0
> 
> 时间：2013-02-21T02:44:21.820
> 
> 标签：javascript, html, function, variables

我正在学习 JavaScript，但我不明白如何将 html 中的 ID 传递给 JavaScript 函数。

我的 CSS 页面在这里有这个：

`#quizclock`（这里有属性）

在我的 HTML 页面上，我有一个 javascript 函数：

```
<script type="text/javascript">
    var seconds = 0;
    var clockId;

    function runClock()
    {
    seconds + 1;
    quizclock = seconds;  //right here is my problem.
    }

    function startClock()
    {
    showQuiz();
    runClock();
    setInterval("runClock()", 1000);
    }

    function stopClock()
    {
    clearInterval(runClock);
    gradeQuiz();
    return = correctAns;
    alert("You have " + correctAns + " correct out of 5 in " + quizclock + " seconds.");
    }
</script> 
```

所以我需要在函数中使用id quizclock。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:04:48.170

我注意到您的代码存在其他一些问题，我已经评论了修复并添加了一些其他提示。

```
var seconds = 0;
var clockId;
var correctAns;

// Lets get a reference to the quizclock element and save it in
// a variable named quizclock
var quizclock = document.getElementById('quizclock');

function runClock() {
    // seconds + 1;
    // This calculates seconds + 1 and then throws it away,
    // you need to save it back in to the variable
    // You could do that with:
    // seconds = seconds + 1;
    // But it would be even better with the shorthand:
    seconds += 1;

    // set the HTML inside of the quizclock element to new time
    quizclock.innerHTML = seconds;
}

function startClock() {
    showQuiz();
    runClock();

    // setInterval("runClock()", 1000);
    // When using setInterval and setTimeout you generally just
    // want to directly pass it the function by name. Passing it
    // a string "runClock()" is in effect actually running
    // eval("runClock()"), eval should be avoided unless you
    // really need it.
    // setInterval returns a number which identifies the interval,
    // you need to save that number, you'll need it when you
    // call clearInterval
    clockId = setInterval(runClock, 1000);
}

function stopClock() {
    // clearInterval takes the id that setInterval
        // returned to clear the interval
    clearInterval(clockId);

    gradeQuiz();

    // you had this alert statment after the return statement,
    // it would have never run, return statements end the
    // function and anything after them is ignored
    alert("You have " + correctAns + " correct out of 5 in " +
        quizclock + " seconds.");

    //return = correctAns;
    // the return statement doesn't need a =,
    // return = correctAns says set a variable named return to the
    // value of correctAns since return is a reserved word,
    // that should generate an error
    return correctAns;
} 
```

## 一些有用的参考链接：

*   [设置间隔](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)
*   [清除间隔](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)
*   [getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)
*   [保留字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)（不能用作变量名的东西）
*   [赋值运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)（此处列出了更多快捷运算符）
*   [介绍 JavaScript DOM](http://www.elated.com/articles/javascript-dom-intro/)
*   [一个不方便的 API：Dom 理论](http://yuiblog.com/blog/2006/10/20/video-crockford-domtheory/)

如果这是一个正式的类，你可能只需要使用基本的 DOM 方法来获取元素（`getElementById`等）。如果您只是自学，我会鼓励您学习 DOM 库。我建议[jQuery](http://jquery.com/)，它很[容易学习](http://learn.jquery.com/about-jquery/how-jquery-works/)，现在或多或少是事实上的标准。使用 jQuery 而不是`document.getElementById('quizclock')`你可以这样做：`$('#quizclock')`. 使用 jQuery 可以使您的代码更短，标准化不同浏览器之间的内容，并帮助保护您免受这些浏览器中的错误的影响。

你现在只是一个初学者，在像这样的小例子中你不需要担心全局变量，但你应该知道使用太多它们通常是一个坏主意。如果页面上的另一个函数也使用了一个名为 的全局变量`seconds`怎么办？它可能会改变`seconds`并搞砸你的计时器。这有点进步，但避免这种情况的一种方法是将代码包装在[自调用匿名函数](https://sparecycles.wordpress.com/2008/06/29/advanced-javascript/)中：

```
(function () {
    var seconds = 0;

    // inside here seconds is visible and can be used

}());

// outside seconds is not declared, it will return undefined. 
```

不幸的是，内部的任何功能在外部也不可见，因此通过附加它们`onclick=`不起作用，但您可以（应该）使用 DOM 附加它们：

```
var submitButton = document.getElementById('submitanswers'); // you'll have to give the button an id
submitButton.addEventListener('click', stopClock, false); 
```

同样，使用 jQuery 会使这更容易：

```
$('#submitanswers').on('click', stopClock); 
```

同样，如果您使用 jQuery，它已经迫使您将代码包装在一个函数中，这将使您的变量远离全局命名空间：

```
$(document).ready(function () {
    var seconds;
    // again seconds is visible here
});

// but not here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:47:29.163

您可以选择一个元素：

```
var quizclock = document.getElementById('quizclock'); 
```

然后，您可以使用以下方法设置值：

```
quizclock.innerHTML = seconds; 
```

# php - 将处理程序添加到 htaccess 会导致文件下载，删除添加处理程序指令会导致内部服务器错误

> ID：14993706
> 
> 赞同：1
> 
> 时间：2013-02-21T02:44:27.097
> 
> 标签：php, apache, .htaccess

我一直试图弄清楚我的 htaccess 文件对于目录需要什么指令。为了提供一点背景知识，我正在使用 AddType 和 AddHandler 来尝试获取 html 文件以在其中运行 php。我正在添加如下指令：

```
 AddType application/x-httpd-php .php .html 
```

和

```
 AddType application/x-httpd-php5 .php .html 
```

那没有用，所以我也尝试添加处理程序：

```
 AddHandler x-httpd-php .php .html 
```

和

```
 AddHandler application/x-httpd-php .php .html 
```

那仍然没有给我想要的东西，所以我尝试了很多组合，比如：

```
 AddType application/x-httpd-php .php .html
   AddHandler php-script .php .html 
```

我什至尝试与 SetHandler 组合

```
 AddType application/x-httpd-php .php .html
   AddHandler php-script .php .html
   SetHandler application/x-httpd-php .php html 
```

我尝试了 Web 上所有可以想象的 AddType 和 AddHandler 组合。

!===== 这很重要======！我意识到让 php 运行你的 html 文件以便你可以在 html 中运行 php 并不是一个好习惯。我不再尝试那样做。我在上面发布这部分的唯一原因是让你对我改变的一些事情有一个想法。这些更改是在根目录上方的目录中对 htaccess 文件进行的。!================================！

现在我不再尝试在 html 文件中运行我的 php，我从 htaccess 文件中清除了 AddType、AddHandler 和 SetHandler 指令。但是现在我在尝试运行 php 文件时遇到内部服务器错误。

所以我试着把一些东西放回去。如果我有句柄，浏览器现在会下载 php 而不是运行它。

我应该注意，在我更改的目录下运行的任何 php 都可以正常工作。但是该目录或该目录的子目录中的所有内容都存在与 php 文件相同的问题。

我曾尝试删除该目录中的 htaccess 文件，但这不起作用，我收到内部错误。

如果我关闭覆盖，我会收到一个内部错误。

我更改的内容保留在该目录中，我想知道如何

一种。把它关掉 b. 将正确的处理程序添加到该 htaccess 文件中，以便再次运行 php 文件（就像它们在服务器的其余部分上一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T10:10:39.147

我确实遇到了完全相同的问题，所以我删除了 .htaccess 的所有内容，并开始只尝试处理程序，直到我弄明白为止。我的本地 .htaccess 副本具有以下 SetHandler：

```
AddHandler x-httpd-php5-3 .php 
```

就我而言，它在将其更改为：

```
AddHandler application/x-httpd-php5 .php 
```

似乎整个技巧只是处理程序，我在 2 个具有不同配置的不同服务器中尝试了这个解决方案，并且在这两种情况下，只需更改 AddHandler 就可以了。如果这对您不起作用，请尝试使用不同的 php 处理程序。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T19:35:47.943

刚刚意识到我在解决问题后没有回答这个问题。如果有人遇到类似问题并且正在阅读此内容：检查所有相关文件夹的权限。我不记得具体细节，但其中一个目录（我相信它是 htaccess 目录）具有在更改某些内容然后将其更改回来后仍然存在的权限。

# c - fprintf 失败，但 fputc 工作正常吗？

> ID：14993707
> 
> 赞同：0
> 
> 时间：2013-02-21T02:44:31.913
> 
> 标签：c, sockets, httpserver

我正在尝试编写一个通过套接字读取一行文本的函数（这是我为作业的 HTTP 服务器编写的代码的一部分）。

当我使用`fputc`. 但是，当我尝试将字符复制到缓冲区，然后使用`fprintf`将整个缓冲区打印到文件时，我似乎没有得到任何输出。

这是代码：

```
int read_line(int fd, char *buffer, int size) {
    char *broken_buffer = (char*) malloc(sizeof(char) * 8096);
    char next = '\0';
    char err;
    int i = 0;
    FILE *f = fopen("read_line2.txt", "w");
    while (i < size - 1 && next != '\n') {
        err = read(fd, &next, 1);
        if (err > 0) {
            if (next == '\r') {
                err = recv(fd, &next, 1, MSG_PEEK);
                if (err > 0 && next == '\n') {
                    read(fd, &next, 1);
                } else {
                    next = '\n';
                }
            }
            fputc(next, f); // Works
            broken_buffer[i] = next;
            buffer[i] = next;
            i++;
        } else {
            next = '\n';
        }
    }
    broken_buffer[i] = '\0';
    buffer[i] = '\0';
    FILE *out = fopen("read_line.txt", "w");
    fprintf(out, "%s\n", broken_buffer); // Does not work
    fclose(out);
    fclose(f);

    return i;
} 
```

编辑：我试过使用这个替代功能：

```
int read_socket(int fd, char *buffer, int size) {
    int bytes_recvd = 0;
    int retries = 0;
    int total_recvd = 0;

    while (retries < MAX_RETRIES && size > 0 && strstr(buffer, ">") == NULL) {
        bytes_recvd = read(fd, buffer, size);

        if (bytes_recvd > 0) {
            buffer += bytes_recvd;
            size -= bytes_recvd;
            total_recvd += bytes_recvd;
        } else {
            retries++;
        }
    }

    if (bytes_recvd >= 0) {
        // Last read was not an error, return how many bytes were recvd
        return total_recvd;
    }
    // Last read was an error, return error code
    return -1;
} 
```

我用 fprintf 打印这个没有问题。

EDIT2：我发现`i`循环后不知何故为0，因此第一个字符被'\ 0'覆盖。但是，当我输入调试代码以打印循环中 i 的值时，我发现它被增加到 22（23 是循环中断的最终值）。这怎么可能？结果字符串是：

```
GET /blah.txt HTTP/1.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:53:33.167

`next`永远的价值是0吗？如果它是 0 则该值将进入`broken_buffer`，这意味着`fprintf`在您自己明确地将 null 放在那里之前，它会认为它位于字符串的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:17:30.167

问题原来是两个进程都连接到服务器（感谢谷歌浏览器......），并且都以某种方式写入同一个文件。代码工作正常。

# iphone - NSURLConnection 错误不起作用

> ID：14993709
> 
> 赞同：0
> 
> 时间：2013-02-21T02:44:42.140
> 
> 标签：iphone, ios, nsurlconnection

我正在尝试使用 if 语句检测我的请求中是否有错误`theConnection`。如果成功则进入第一部分，但如果有错误则不进入else。我不确定为什么。

```
- (void)vehicleSearchRequest:(NSData *)postBodyData
{

    NSString *address = [NSString stringWithFormat:@"http://%@", serverAddress];

    //Set database address
    NSMutableString *databaseURL = [[NSMutableString alloc] initWithFormat:@"%@", address];

    NSURL *url = [NSURL URLWithString:databaseURL];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postBodyData length]];

    //SynchronousRequest to grab the data, also setting up the cachePolicy
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url]; //if request dose not finish happen within 60 second timeout.

    // Set up request
    [request setHTTPMethod: @"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/octet-stream" forHTTPHeaderField:@"content-type"];
    [request setHTTPBody:postBodyData];
    [request setTimeoutInterval:180];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (theConnection) {
        // do animation thankyou here
        NSLog(@"Sucsess!");
        [self submitSuccessful];
    } else {
        // Inform the user that the connection failed from the connection:didFailWithError method
        NSLog(@"Connectin ERROR!!!");
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection error, Please try again" message:nil delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [alert show];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:21:47.293

您的代码检查它是否能够实例化一个`NSURLConnection`。这是一项有用的安全检查，但只有在您向其传递系统不支持的 URL 时才会在实践中失败。

连接本身是异步的，因此需要一点时间来告诉您是否存在问题。实现其委托方法以听取服务器的回复。

# file - 类文件的文件权限

> ID：14993713
> 
> 赞同：0
> 
> 时间：2013-02-21T02:45:09.743
> 
> 标签：file, class, permissions

我想问一下，因为在某些情况下，某些 class.php 没有运行。即使它是完全许可的，样品。

我有一台 linux 电脑。每次我创建 class.php 文件。我修改它像：

```
sudo chmod -Rf 777 file.class.php 
```

然后在那之后。它适用于我的本地主机。但是当我使用 FileZilla 将文件传输到其他服务器时，它没有运行。即使它在 File Zilla 中具有完全权限 777。

谁能解释这背后的原因是什么？因为我无法向我的上级解释为什么它正在运行，但在我的 localhost/PC 中它正在运行。他们里面有相同的文件和代码。

请帮助我..非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:55:03.787

您的服务器可能会在您上传文件时自动修改文件的权限，即使您已将其设置为 filezilla 中的某些内容。我知道具有 NTFS 的 Windows 有时可以根据您复制/移动文件的方式从文件中删除权限。这可能是您的 linux 计算机正在发生的事情。

# ios - 使用滑动手势交换两个 UIButton

> ID：14993717
> 
> 赞同：0
> 
> 时间：2013-02-21T02:46:04.927
> 
> 标签：ios, uibutton, gesture, swap

现在我的视图上有两个 UIButton。我想知道如何交换它们。我已经弄清楚如何使用滑动手势。只需要帮助用动画交换他们的位置。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:04:20.593

假设您没有使用自动布局，您可以使用

```
[UIView animateWithDuration:0.25
                 animations:^{
                     CGRect savedFrame = self.button1.frame;
                     self.button1.frame = self.button2.frame;
                     self.button2.frame = savedFrame;
                 }]; 
```

# c# - 使用 CAIRO 的单个 PDF 中的多个页面？

> ID：14993720
> 
> 赞同：1
> 
> 时间：2013-02-21T02:46:14.237
> 
> 标签：c#, cairo, pangocairo

我正在使用 c# 和 Cairo 创建一个 pdf 文件。我想制作一个多页 pdf，但我找不到任何示例。我只找到了这个： http: [//lists.cairographics.org/archives/cairo/ 2008-9月/014949.html](http://lists.cairographics.org/archives/cairo/2008-September/014949.html)

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-22T13:59:03.363

刚来这个问题。事实证明，在 cairo_pdf 中将“onefile”参数设置为 TRUE 可以解决这个问题。

例子：

```
cairo_pdf("my.super.plot.pdf",onefile=T)
plot(c(1,1))
plot(c(2,2))
dev.off() 
```

注意：我使用的是 Cairo 1.5.6

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-29T15:30:45.997

我不使用 C#，但 C cairo_show_page() 中有一个函数完全符合您的要求。我认为C#中有类似的方法。

[https://www.cairographics.org/manual/cairo-cairo-t.html#cairo-show-page](https://www.cairographics.org/manual/cairo-cairo-t.html#cairo-show-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:12:36.570

简直不敢相信将 context.showpage() 更改为 context.copypage() 太容易了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T10:17:08.593

简单地多次调用 showpage 似乎对我有用。

# ios - 处理慢动作视频效果 iOS

> ID：14993726
> 
> 赞同：0
> 
> 时间：2013-02-21T02:47:06.060
> 
> 标签：ios, objective-c, avfoundation

我将如何对从 iOS 中的相机胶卷录制或获取的视频的一部分创建慢动作效果？我正在使用该`AVFoundation`框架从相机胶卷中选择视频或录制视频。我打算将Time1的效果添加到Time2，然后让视频以正常速度继续播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:13:26.647

一般来说，您可以通过以更高的帧速率录制来创建慢动作效果。因此，如果您以 60FPS 的速度录制但以 30FPS 的速度播放，那么您就创建了半时慢动作效果。这就是电影的处理方式。使用预先录制的固定帧速率素材，您可以以原始帧速率的一小部分进行播放。如果要将其保存回容器文件，则需要相应地调整演示时间戳。

# objective-c - 从 html 文件导入书签

> ID：14993729
> 
> 赞同：0
> 
> 时间：2013-02-21T02:47:08.663
> 
> 标签：objective-c, regex, parsing, bookmarks, nsregularexpression

我正在尝试向我的应用程序添加导入书签功能。我有一些，但它只会提取所有 URL 和标题。

```
- (NSArray *)urlsInHTML:(NSString *)html {
    NSError *error;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(?<=href=\").*?(?=\")" options:NSRegularExpressionCaseInsensitive error:&error];

    NSArray *arrayOfAllMatches = [regex matchesInString:html options:0 range:NSMakeRange(0, [html length])];

    NSMutableArray *arrayOfURLs = [[NSMutableArray alloc] init];

    for (NSTextCheckingResult *match in arrayOfAllMatches) {
        NSString* substringForMatch = [html substringWithRange:match.range];
        NSLog(@"Extracted URL: %@",substringForMatch);

        [arrayOfURLs addObject:substringForMatch];
    }

    // return non-mutable version of the array
    return [NSArray arrayWithArray:arrayOfURLs];
}

- (NSArray *)titlesOfTagsInHTML:(NSString *)html {
    NSError *error;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(?<=\"\\>)(.*?)(?=\\<\\/)" options:NSRegularExpressionCaseInsensitive error:&error];

    NSArray *arrayOfAllMatches = [regex matchesInString:html options:0 range:NSMakeRange(0, [html length])];

    NSMutableArray *arrayOfURLs = [[NSMutableArray alloc] init];

    for (NSTextCheckingResult *match in arrayOfAllMatches) {
        NSString* substringForMatch = [html substringWithRange:match.range];
        NSLog(@"Extracted Title: %@",substringForMatch);

        [arrayOfURLs addObject:substringForMatch];
    }

    // return non-mutable version of the array
    return [NSArray arrayWithArray:arrayOfURLs];
}

- (IBAction)import {

    ProgressAlertView *progressAlert = [[ProgressAlertView alloc] initWithTitle:@"Crux" message:@"Importing Bookmarks..." delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
    [progressAlert show];

    NSString *htmlString = [NSString stringWithContentsOfFile:importingBookmarkFilePath encoding:NSUTF8StringEncoding error:nil];
    NSArray *urls = [self urlsInHTML:htmlString];
    NSArray *titles = [self titlesOfTagsInHTML:htmlString];
    //float progress = [[NSNumber numberWithInt:i] floatValue]/[[NSNumber numberWithInteger:[urls count]-1] floatValue];
    for (int i=0; i<[urls count]; i++) {
        Bookmark *importedBookmark = [[Bookmark alloc] init];
        importedBookmark.url = urls[i];
        importedBookmark.title = titles[i];
        [[[BookmarkManager sharedInstance] bookmarks] addObject:importedBookmark];
        [[BookmarkManager sharedInstance] saveBookmarks];
    }
} 
```

但我找不到如何确定文件夹，所以我可以完全按照它们在其他浏览器中的方式保留主题。要查看 safari 如何导出它们，只需转到文件>导出书签，您就可以看到 html 文件。它将所有内容放在带有文件夹标题的定义列表中。使用 NSREgularExpression 或其他方式，我如何获取每个文件夹标题以及该文件夹中的所有内容？

我曾尝试使用 NSXMLParser 解析 html，但它在第一个定义列表标记处停止并失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:16:07.667

格式并不复杂，因此您应该能够使用`NSScanner`. 一般流程是这样的：

*   扫描至`<DT>`
*   检查以下是H3还是A（文件夹或书签）
*   相应地处理
*   重复

文件夹可以有子文件夹，因此您需要递归地创建对象。祝你好运。

# arrays - 每次循环在matlab中循环时创建一个新的单元格数组

> ID：14993733
> 
> 赞同：0
> 
> 时间：2013-02-21T02:47:25.737
> 
> 标签：arrays, matlab, dataset, cell, cell-array

我是 MatLab 的新手，但我对 C# 有一些经验。我有一个大型数据集 <169360x97>，我需要将其分解为 464 个单元阵列。我目前有一个循环，它将循环遍历数据集并创建一个单元格数组，但我无法弄清楚如何让循环每次都创建一个新的单元格数组，而不仅仅是重写相同的数据。这是我写的循环。

```
 b=5476;
    e=5840;
    while(b<169360)
     dataset2cell(JeaAddressKwh(b:e,1:97));
     b=e+1;
     e=e+365;
    end 
```

我尝试了以下方法，但每次都会收到错误消息：

```
 n=16;
   b=5476;
   e=5840;
   while(b<169360)
    n=dataset2cell(JeaAddressKwh(b:e,1:97));
    n+1;
    b=e+1;
    e=e+365;
   end 
```

所以基本上我想要作为输出得到的是一个不同的单元阵列，称为 16 到 464。我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:01:12.210

在第一个循环中，您没有保存元胞数组，而在第二个循环中，您覆盖了前一个元胞数组并尝试向其添加 1，但不保存结果。

尝试这样的事情：

```
 n=cell(16,1);
   b=5476;
   e=5840;
   i = 1;
   while(b<169360)
       n{i}=dataset2cell(JeaAddressKwh(b:e,1:97));
       i = i+1;
       b=e+1;
       e=e+365;
   end 
```

# java - 如何使用 java 信号量实现这种并发情况？

> ID：14993740
> 
> 赞同：1
> 
> 时间：2013-02-21T02:47:49.820
> 
> 标签：java, concurrency, semaphore, java.util.concurrent

我想使用java库提供的信号量来实现这个经典的厕所入口问题。

场景是：有一个公共浴室，最多可供 4 名女性和 5 名男性使用，但不能同时使用。此外，虽然至少有一名女性在等待，但男性应该等待，这样女性才能更容易进入。

到目前为止，我已经为这个并发类建模......

```
public class Concurrencia {

Semaphore mujeres;    // Semaphore for women, initialized in 4
Semaphore hombres;    // Semaphore for men, initialized in 5

public Concurrencia (Semaphore mujeres, Semaphore hombres) {

    this.mujeres = mujeres;
    this.hombres = hombres;

}

public synchronized void EntradaHombres () {    // Method for men's entrance

    if ( mujeres.availablePermits() == 4 && !mujeres.hasQueuedThreads() ) {
        System.out.println("Entró un hombre al baño");              // Man gets in
        try { hombres.acquire(); } catch (InterruptedException ex) { }
    }
    else {
        System.out.println("Hombre en espera");   // Man should wait

    }

}

public synchronized void EntradaMujeres () {    // Method for women's entrance

    if ( hombres.availablePermits() == 5) {
        System.out.println("Entró una mujer al baño");  // Woman gets in
        try { hombres.acquire(); } catch (InterruptedException ex) { }
    }

    else {
        System.out.println("Mujer en espera");   // Woman should wait
    }

}

public synchronized void SalidaMujeres () {

    System.out.println("Salió una mujer del baño");
    mujeres.release();    // Woman gets out
}

public synchronized void SalidaHombres () {

    System.out.println("Salió un hombre del baño");
    hombres.release();    // Man gets out
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:30:59.267

这可能有效：

一、不偏袒女性

```
men = new Semaphore(5, true),    women = new Semaphore(4, true);

void manEnter()                  void womanEnter()
    women.acquire(4);                women.acquire(1);
    men.acquire(1);                  men.acquire(5);
    women.release(4);                men.release(5);

void manExit()                   void womanExit()
    men.release(1);                  women.release(1); 
```

偏爱女人，男人成功后，一定要看看有没有女人在等；如果有，他必须释放他的许可证，然后再试一次。我们不能使用`women`信号量的统计数据来检查这种情况，因为男人也在等待`women`许可证。我们可以引入一个 AtomicInteger 来记录等待的女性人数。信号量实际上可以用作原子整数。我们也许还可以利用负面许可`women`来表明有女性在等待。这变得太复杂了，信号量可能不是解决这个问题的正确工具。

# twitter-bootstrap - 字体真棒 IE 7/8 支持

> ID：14993742
> 
> 赞同：1
> 
> 时间：2013-02-21T02:48:03.283
> 
> 标签：twitter-bootstrap, font-awesome

我的字体很棒，将它用作字体系列（不使用 css icon-* 类）。它在 FF、Chrome、Safari 和 IE9 中运行良好。但它在 IE 7 或 IE 8 中不起作用。我注意到这是一个 IE7 less/css 文件。我假设如果我是 IE 7 并且我包含这些东西会起作用？？？我是否也需要为 IE 8 包含它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T04:28:18.087

是的，您应该这样编写代码：

```
<!--[if IE 7]>
 <link href="../../assets/css/font-awesome-ie7.min.css" rel="stylesheet">
<![endif]--> 
```

我刚刚意识到，如果刷新页面，IE8 会出现一些问题。请在 main.css 之后使用这个 html5.js

```
<link rel="stylesheet" href="/stylesheets/main.css" type="text/css">
<!--[if lt IE 9]>
 <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

# ios - 选择时图像消失的自定义 TableViewCell

> ID：14993747
> 
> 赞同：0
> 
> 时间：2013-02-21T02:48:45.580
> 
> 标签：ios, objective-c, xcode, uitableview

我创建了一个自定义 tableviewcell 类，并且单元格加载完美，但是，当我单击它们时，它们消失并在我单击另一个单元格时返回。谁能帮我理解为什么？提前致谢！

```
#import "CustomTableViewCell.h"

@implementation CustomTableViewCell
UIView *backgroundView;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    backgroundView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 65)];
    UIView *visibleBackgroundView = [[UIView alloc] initWithFrame:CGRectMake(29, 0, backgroundView.bounds.size.width -58, backgroundView.bounds.size.height)];
    [visibleBackgroundView setBackgroundColor:[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"tableViewCell.png"]]];
    [backgroundView addSubview:visibleBackgroundView];
    self.backgroundView = backgroundView;

}
return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
[super setSelected:selected animated:animated];

// Configure the view for the selected state
if (selected) {
    UIView *selectedBackgroundView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 65)];
    UIView *visibleSelectedBackground = [[UIView alloc] initWithFrame:CGRectMake(29, 0, backgroundView.bounds.size.width -58, backgroundView.bounds.size.height)];
    [visibleSelectedBackground setBackgroundColor:[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"selectedTableViewCell@2x.png"]]];
    [selectedBackgroundView addSubview:visibleSelectedBackground];
    self.selectedBackgroundView = selectedBackgroundView;
}
}

-(void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated{
[super setHighlighted:highlighted animated:animated];
if (highlighted) {
    [self setHighlighted:NO];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T03:34:54.383

我能够使用以下解决方案修复它

```
#import "CustomTableViewCell.h"

@implementation CustomTableViewCell{
    UIView *backgroundView;
    UIView *visibleBackgroundView;
}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    backgroundView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 65)];
    visibleBackgroundView = [[UIView alloc] initWithFrame:CGRectMake(29, 0, backgroundView.bounds.size.width -58, backgroundView.bounds.size.height)];
    [visibleBackgroundView setBackgroundColor:[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"tableViewCell.png"]]];
    [backgroundView addSubview:visibleBackgroundView];
    self.backgroundView = backgroundView;
    [self setSelectionStyle:UITableViewCellSelectionStyleNone];

    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

// Configure the view for the selected state
if (selected) {

}
}

-(void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated{
[super setHighlighted:highlighted animated:animated];
if (highlighted) {
    [visibleBackgroundView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"selectedTableViewCell.png"]]];
} else{
     [visibleBackgroundView setBackgroundColor:[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"tableViewCell.png"]]];
}
} 
```

# c++ - 查找 std::wstring 的长度

> ID：14993752
> 
> 赞同：3
> 
> 时间：2013-02-21T02:49:16.233
> 
> 标签：c++, winapi, unicode, wstring

如何确定 a 中的长度（字符数）`std::wstring`？

使用`myStr.length()`给出字节大小（我认为），但不是字符数。我是否需要创建自己的函数来查找字符数，或者**是否有原生 C++ 方式或原生 WinAPI 方式**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:00:56.283

`std::wstring::length()`将为您提供字符数，其中*字符*定义为`wstring`对象的原子单位，即 a `wchar`。这就是标准所指的含义（有关标准中该词使用的更多详细信息，`characters`请参阅[这篇文章）。](https://stackoverflow.com/a/9476899/777186)

但是，当涉及到 Unicode 字符时，一个是否`wchar`对应一个 Unicode 字符取决于`wstring`. 如果使用 UTF-16（通常（但不一定）是这种情况），则一个`wchar`仅对应于基本多语言平面的一个 Unicode 字符（即从 ISO-8859 以及大多数常用 CJK 派生的所有字符集）字符，但不是一些更奇特的（例如文言文）字符）^((*))。如果您想在这种情况下获得*所有*Unicode 字符的正确字符数，您需要使用 Unicode 感知库（例如 ICU），或者自己编写代码。

^((*))如@一二三正确指出的那样，如果使用*组合字符，则会出现其他问题。*最好使用适当的库来正确计算这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T03:01:55.940

如果您想知道`wchar_t`实体的长度，请使用`myStr.length()`. 如果您想知道 Unicode 代码点的大小，您必须找到一个知道如何计算这些代码点的库。您也可以自己编写一个 - 确定编码为 UTF-16 的代码点是否使用一个或两个实体的规则并不太难，请参阅[http://en.wikipedia.org/wiki/Utf-16](http://en.wikipedia.org/wiki/Utf-16)。要知道您`wchar_t`是否是 16 位（与 32 位相比），请使用`sizeof(wchar_t) == 2`.

# c# - 涉及属性类型的库中 DI 的最佳实践

> ID：14993754
> 
> 赞同：5
> 
> 时间：2013-02-21T02:49:56.080
> 
> 标签：c#, dependency-injection, inversion-of-control

我正在开发一个简化应用程序配置的库。本质上，库的使用者要么用属性装饰他们的配置类，要么在代码中以声明方式初始化设置。可以指定 1 个或多个源来读取/写入配置属性（访问器）或从类继承默认值。例如，以下内容：

```
[ConfigurationNamespace(DefaultAccessors = new Type[] { typeof(AppSettingsAccessor) })]
public class ClientConfiguration : Configuration<IClientConfiguration>
{
    [ConfigurationItem(Accessors = new Type[] { 
        typeof((RegistryAccessor)) 
     })]
    public bool BypassCertificateVerification { get; set; }
} 
```

相当于

```
var config = new Configuration<IClientConfiguration>();
config.SetDefaultAccessors(new[] { typeof(AppSettingsAccessor) });
config.SetPropertyAccessors(
    property: x => x.BypassCertificateVerification,
    accessors: new[] { typeof(RegistryAccessor) }
); 
```

访问器处理来自各种来源（AppSettings、注册表、.ini 等）的读取和写入。我想让消费者扩展功能以满足他们的需求。我想让它与 IoC 容器无关。之所以给我 Type[] 约束，是因为由于编译时与运行时问题，我无法在属性中指定类型。

有没有办法有一个默认机制来实例化这些（例如，基于 Activator.CreateInstance 的东西），但也允许消费代码在运行时实例化这些访问器*而不*使用服务定位器/依赖解析器模式？我一直在阅读很多关于为什么服务定位器/依赖解析器模式是一种邪恶的反模式的文章，但我想不出一个更好的工具来完成这项工作。我看到 MVC 框架和 SignalR 库使用依赖解析器。他们是 100% 的邪恶，还是这是一个极端情况？据我所知，抽象工厂模式不会削减它，因为它不喜欢类型参数。

在这种特殊情况下，基于属性的配置将比声明性方法更有用，因此我不想放弃我的配置属性（这将允许我将 Type 更改为 IConfigurationAccessor 并切换到工厂方法）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:02:37.927

从 DSL 的工作中，我们知道将 API与其他表达模式分离为底层**语义模型非常重要。**在这种情况下，`Configuration<T>`API 在我看来就像是语义模型。没有理由在基于属性的 DSL 之后对语义模型进行建模。这样的事情对我来说更有意义：

```
var config = new Configuration<IClientConfiguration>();
config.DefaultAccessors.Add(new AppSettingsAccessor());
config.PropertyAccessorsFor(x => x.BypassCertificateVerification)
    .Add(new RegistryAccessor()); 
```

我还将基于属性的模型更改为纯声明性的：

```
[AppSettingsConfiguration]
public class ClientConfiguration : Configuration<IClientConfiguration>
{
    [RegistryConfiguration]
    public bool BypassCertificateVerification { get; set; }
} 
```

现在您“只”需要找出一种从自适应模型转换为语义模型的方法。

这基本上就像任何其他**序列化**阅读器一样：读取数据，并从类型注释中获取有关如何读取数据的提示。这基本上是对数据结构的递归遍历，并且您需要为每个节点创建一个访问器。

假设所有访问器都实现了类似的接口`IAccessor`，则可以使用**抽象工厂**进行扩展：

```
public interface IAccessorFactory
{
    IAccessor CreateAccessor(ConfigurationAttribute configurationAttribute);
} 
```

[实际上，这更具体地说是PLoPD4](http://amzn.to/VTIoqR)中描述的称为**Product Trader**的一种不太广为人知的设计模式，但由于大多数人不知道这种模式，我们就称它为*抽象工厂*——[它不是服务定位器](http://blog.ploeh.dk/2010/11/01/PatternRecognitionAbstractFactoryOrServiceLocator.aspx)，因为它不返回一个无界类型——它只返回 IAccessor 实例。

# javascript - 使用jquery将ID分配给body标签

> ID：14993759
> 
> 赞同：1
> 
> 时间：2013-02-21T02:50:27.633
> 
> 标签：javascript, jquery

求助各位大佬

我这里有一个脚本，在 body 标签上添加一个 ID

这是我看到的结果

```
<body id="xxx-cat"> 
```

使用我在下面使用的脚本

```
<script>
$(document).ready(function(){
// Edit xxx-cat to match desired category link id:
$('body').attr("id","xxx-cat");
if ($('body[id]')) {
var bid = $("body").attr("id");
// Keep the next command on one line
$('div.droplinebar li a[class='+bid+']').addClass('current');
}
})
</script> 
```

我如何制作 ID (1,2,3,4)，因为我有 4 页并且想要它

```
<body id="1"> for the home page
<body id="2"> for the about
<body id="3"> for the clients
<body id="4"> for the contact 
```

顺便说一下，这是一个 tumblr 自定义页面，这里不能使用 PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:00:09.323

据我了解您的问题，您可以更改脚本，但不能更改页面本身（因为它在 Tumblr 上？）

尝试类似：

```
$(document).ready(function(){
    var bodyId = '1'; // Set to 1, 2, 3, 4 etc    
    $("body").attr('id', bodyId);
    $('div.droplinebar li a.'+bodyId).addClass('current');
}); 
```

但是，正如评论中提到的，您不应该只使用数字作为您的 ID，如果可能，请考虑修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:32:23.277

找到了我的问题的答案

```
$(function() {
    var pathname = window.location.pathname;
    var getLast = pathname.match(/.*\/(.*)$/)[1];
    var truePath = getLast.replace(".php","");
    if(truePath === '') {
        $('body').attr('id', 'home');
    }
    else {
        $('body').attr('id', truePath);
    }
}); 
```

结果

```
home = <body id="home">
about = <body id="about">
clients = <body id="clients">
contacts = <body id="contacts"> 
```

# bxslider - 使用箭头键控制 BXSLIDER

> ID：14993760
> 
> 赞同：6
> 
> 时间：2013-02-21T02:50:51.103
> 
> 标签：bxslider

你能帮我解决这个问题吗？当我按下下一个键（右箭头）时，我试图将箭头控件（左和右）集成到 BxSlider，最后一个滑块图像显示它不应该显示，而是下一个滑块图像，然后与前一个键相同（左箭头）当我按下它时，第一张图片就会出现。这是我正在使用的代码

```
jQuery('.bxslider').bxSlider({
pagerCustom: '#bx-pager',
nextSelector: '#slider-next',
prevSelector: '#slider-prev',
nextText: '',
prevText: '',
onSliderLoad: function(){ jQuery('#listing-slider').show();}
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-26T14:08:53.920

这是一种方法。希望能帮助到你。

```
// save slider has a global var
var slider = $('.bxslider').bxSlider({
    // your bxSlider options here...
});
// set keyboard listener
$(document).keydown(function(e){
    if (e.keyCode == 39) // Right arrow 
    {
        slider.goToNextSlide();
        return false;
    }
    else if (e.keyCode == 37) // left arrow
    {
         slider.goToPrevSlide();
        return false;
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-20T15:51:21.833

这是在**版本 4.2.2中添加的**

**来自变更日志的条目**

增强：添加键盘箭头左右支持（[#239](https://github.com/stevenwanderski/bxslider-4/pull/239)）

# mysql - 连接所有表中的值；

> ID：14993762
> 
> 赞同：0
> 
> 时间：2013-02-21T02:51:02.533
> 
> 标签：mysql, join

我有两张桌子：

```
CREATE TABLE `events` (
  `id` double NOT NULL,`value` int, PRIMARY KEY (`id`));

CREATE TABLE `updates` (
  `id` double NOT NULL AUTO_INCREMENT,
  `action` enum('delete','update') DEFAULT NULL,
  `event_id` double DEFAULT NULL,
  PRIMARY KEY (`id`)); 
```

并尝试进行查询，该查询将从更新中获取所有值`events`并从更新中获取值，即使`event_id` 事件表中不存在更新（仅当操作为“删除”时才可能）

使用

```
SELECT ifnull(e.id,u.event_id) AS event_id,
       e.value,ifnull(u.action,'update') AS ACTION,
       ifnull(u.id,-1) as update_id
        FROM events e 
         LEFT JOIN updates u ON e.id=u.event_id 
```

我得到

```
|      EVENT_ID | VALUE | ACTION | UPDATE_ID |
----------------------------------------------
| 1361264148710 |     1 | update |        -1 |
| 1361264148711 |     2 | update |        -1 |
| 1361264148712 |     5 | update |        -1 |
| 1361264148713 |    10 | update |         1 |
| 1361264148714 |    11 | update |         2 |
| 1361264148714 |    11 | update |         3 |
| 1361264148714 |    11 | update |         4 |
| 1361264148715 |    14 | update |         5 |
| 1361264148716 |     1 | update |         6 |
| 1361264148717 |    17 | update |         8 |
| 1361264148718 |    22 | update |        10 |
| 1361264148719 |    23 | update |        11 | 
```

我的目标是获得：

```
|      EVENT_ID |  VALUE | ACTION | UPDATE_ID |
-----------------------------------------------
| 1361264148710 |      1 | update |        -1 |
| 1361264148711 |      2 | update |        -1 |
| 1361264148712 |      5 | update |        -1 |
| 1361264148713 |     10 | update |         1 |
| 1361264148714 |     11 | update |         2 |
| 1361264148714 |     11 | update |         3 |
| 1361264148714 |     11 | update |         4 |
| 1361264148715 |     14 | update |         5 |
| 1361264148716 |      1 | update |         6 |
| 1361264148708 | (null) | delete |         7 |
| 1361264148717 |     17 | update |         8 |
| 1361264148709 | (null) | delete |         9 |
| 1361264148718 |     22 | update |        10 |
| 1361264148719 |     23 | update |        11 | 
```

[这是 sqlfiddle](http://sqlfiddle.com/#!2/b1eb7/5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:54:24.007

看起来你想要`UNION`你的结果：

```
SELECT ifnull(e.id,u.event_id) AS event_id,
       e.value,ifnull(u.action,'update') AS ACTION,
       ifnull(u.id,-1) as update_id
        FROM events e 
         LEFT JOIN updates u ON e.id=u.event_id
UNION
SELECT u.event_id AS event_id,
       e.value,ifnull(u.action,'update') AS ACTION,
       ifnull(u.id,-1) as update_id
        FROM updates u  
         LEFT JOIN events e ON e.id=u.event_id
     WHERE e.id IS NULL 
```

还有你更新的小提琴：[http ://sqlfiddle.com/#!2/b1eb7/7](http://sqlfiddle.com/#!2/b1eb7/7)

正如@njk 在评论中指出的那样，这可以简化为：

```
SELECT ifnull(e.id,u.event_id) AS event_id,
       e.value,ifnull(u.action,'update') AS ACTION,
       ifnull(u.id,-1) as update_id
FROM
  (SELECT id AS id FROM events
   UNION
   SELECT event_id AS id FROM updates) a
LEFT JOIN events e ON e.id = a.id
LEFT JOIN updates u ON u.event_id = a.id
ORDER BY update_id 
```

这是两者的[更新小提琴](http://sqlfiddle.com/#!2/b1eb7/16)——我认为第一个在执行计划方面表现更好。

# python - Django Query - 按共同的标签排序

> ID：14993766
> 
> 赞同：3
> 
> 时间：2013-02-21T02:51:25.923
> 
> 标签：python, django, django-models

举个简单的例子，假设我有一个 Product 类

```
class Product(models.Model):
    tags = models.ManyToManyField('Tag',blank=True,null=True) 
```

我的标签类看起来像这样

```
class Tag(models.Model):
    name = models.CharField(max_length=50, unique=True, db_index=True) 
```

给定一个产品，我将如何按最常见的标签对所有其他产品的结果集进行排序？

例如，我有以下内容：

P1 带有标签 A、B 和 C
P2 带有标签 B、C
P3 带有标签 B
P4 带有标签 A、B 和 C

假设我们从结果集中排除 P1，我希望 P1 的结果集按该顺序为 P4、P2、P3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:34:03.487

这是一个典型的自连接用法，SQL 如下所示：

```
SELECT t3.*, count(t2.tag_id) as similar_tags_count
FROM m2m_tbl t1 INNER JOIN m2m_tbl t2 
     ON (t1.tag_id = t2.tag_id and t1.product_id != t2.product_id and t1.product_id = pk_of_the_given_product)
     INNER JOIN product_tbl t3 ON (t2.product_id = t3.id)
GROUP BY t3.id, t3.name
ORDER BY similar_tags_count DESC; 
```

然后可以将查询提供给[`.raw()`](https://docs.djangoproject.com/en/dev/topics/db/sql/#performing-raw-queries)：

```
Product.objects.raw("""
SELECT t3.*, count(t2.tag_id) as similar_tags_count
FROM {m2m_tbl} t1 INNER JOIN {m2m_tbl} t2 
     ON (t1.tag_id = t2.tag_id and t1.product_id != t2.product_id and t1.product_id = %s)
     INNER JOIN {product_tbl} t3 ON (t2.product_id = t3.id)
GROUP BY t3.id, t3.name
ORDER BY similar_tags_count DESC;
""".format(m2m_tbl=Product.tags.through._meta.db_table, product_tbl=Product._meta.db_table),
    [the_given_product.pk]) 
```

或者如果你[真的](https://github.com/django/django/blob/stable/1.4.x/django/db/models/sql/query.py#L851)需要一个[`query.join()`](http://www.caktusgroup.com/blog/2009/09/28/custom-joins-with-djangos-queryjoin/):[`query.join()`](https://github.com/django/django/blob/stable/1.4.x/django/db/models/sql/query.py#L851)`QuerySet`

```
m2m_tbl = Product.tags.through._meta.db_table
qs = Product.objects.exclude(pk=the_given_product.pk)
alias_1 = qs.query.get_initial_alias()
alias_2 = qs.query.join((alias_1, m2m_tbl, 'id', 'product_id'))
alias_3 = qs.query.join((alias_2, m2m_tbl, 'tag_id', 'tag_id'))
qs = qs.annotate(similar_tags_count=models.Count('tags__id')).extra(where=[
    '{alias_2}.product_id != {alias_3}.product_id'.format(alias_2=alias_2, alias_3=alias_3),
    '{alias_3}.product_id = %s'.format(alias_3=alias_3)
], params=[the_given_product.pk]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:26:38.790

假设两个转弯列表你可以做这样的事情

```
P1 = ['A', 'B', 'C'] # these being products
P3 = ['B']
P4 = ['A', 'B', 'C']

P1 = set(P1)
P3_INTERSECT = len(P1.intersection(P3))
P4_INTERSECT = len(P1.intersection(P4)) 
```

这些将分别返回 1 和 3，然后我将使用它来订购您的结果。如果您最终需要这样做，您可能需要定义自己的经理来执行此排序。

# sql - Rails使用Postgresql按组选择？

> ID：14993770
> 
> 赞同：0
> 
> 时间：2013-02-21T02:51:56.607
> 
> 标签：sql, ruby, activerecord, ruby-on-rails-3.2, rails-postgresql

我有一个名为 的模型`Program`，它有 'directory_id'、'id'、'user_id' 列，我想按目录选择所有程序组：

```
@programs = Program.select("programs.directory_id, programs.id, programs.user_id").group(:directory_id).page(params[:page]) 
```

错误是：

```
PG::Error: ERROR:  column "programs.id" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT  programs.directory_id, programs.id FROM "programs"  ...
                                       ^
: SELECT  programs.directory_id, programs.id FROM "programs"  GROUP BY directory_id LIMIT 25 OFFSET 0 
```

# javascript - 将查询结果对象传递给单独的函数

> ID：14993773
> 
> 赞同：0
> 
> 时间：2013-02-21T02:52:02.497
> 
> 标签：javascript, jquery, parse-platform, single-page-application

这个[小提琴](http://jsfiddle.net/tenfold/4XsLq/7/)或多或少地显示了我正在尝试做的事情。

我正在从 Parse.com 数据库中查询一些结果。结果在成功回调中返回。

谁能告诉我在`mainView()`函数中与他们合作的最佳方式？我想将所有查询与其显示方式的逻辑分开。我已经尝试了很多不同的方法，但无法让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:27:05.323

只需`this`在回调外部存储一个引用。

```
 var userInterface = {

    newQuery: function() {
        var that=this; //store a reference to "this"

        Query = Parse.Object.extend("Test"); 
        query = new Parse.Query(Query);

        query.descending("createdAt");    
        query.equalTo("column1", "a");

        query.find({
            success:function(results){

                 that.mainView(results); //that points to the userInterface object

            },
            error:function(error){

            }

        });
    }, 

    mainView: function(res){

        console.log(res);

    },

    init: function() {
       this.newQuery();        
    }

};
userInterface.init(); 
```

* * *

[http://jsfiddle.net/4XsLq/8/](http://jsfiddle.net/4XsLq/8/)

# java - phpmyadmin 与 java。有没有办法从 phpmyadmin 获取字符串并将其与键盘输入进行比较？

> ID：14993774
> 
> 赞同：-1
> 
> 时间：2013-02-21T02:52:04.183
> 
> 标签：java, database, phpmyadmin, database-connection

我想要做的是将 phpmyadmin 数据库中的每个单词（列和行）与键盘的用户输入进行比较。我知道我可以使用带有 equalsIgnoreCase 的 CSV 文件来做到这一点。但我似乎找不到任何与我正在尝试做的类似的教程。如果有人知道如何使用代码示例或视频执行此操作，请发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:10:37.140

在 phpmyadmin 中创建 2 个表：
第一个表存储您想要的值。
第二个表存储用户插入的值。
使用 group by 查询来比较两个表。

# algorithm - RandomizedQuickSort 算法的实现

> ID：14993777
> 
> 赞同：0
> 
> 时间：2013-02-21T02:52:30.297
> 
> 标签：algorithm, sorting, quicksort

我正在尝试实现 RandomizedQuickSort 算法。我认为我正确执行了 randomPartition 方法，但我不知道 sort 方法有什么问题？！

这是我的尝试：

```
public class RandomizedQuickSort {
    public static void sort(int[] A, int start, int end) {
        if(start < end) {
            int pivot = randomizedPartition(A, start, end);

            sort(A, start, pivot - 1);
            sort(A, pivot + 1, end);
        }
    }

    private static int randomizedPartition(int[] A, int start, int end) {
        int pivot = A[start];
        int pivotIndex = start;

        for(int i = start + 1; i < end; i++) {
            if(A[i] <= pivot) {
                pivotIndex += 1;
                swap(A, pivotIndex, i);
            }
        }
        swap(A, start, pivotIndex);

        return pivotIndex;
    }

    private static void swap(int[] A, int x, int y) {
        int temp = A[x];

        A[x] = A[y];
        A[y] = temp;
    }

    public static void main(String[] args) {
        int A[] = {11, 0, 2, 8, 15, 12, 20, 17, 5, 11, 1, 16, 23, 10, 21, 7, 22, 9};

        sort(A, 0, A.length);

        for(int i = 0; i < A.length; i++) {
            System.out.print(A[i] + ", ");
        }
        System.out.println();
    }
} 
```

这是我得到的输出：

```
0, 1, 2, 8, 5, 9, 10, 11, 7, 11, 12, 16, 17, 15, 20, 21, 22, 23 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:02:45.500

好吧，除了您没有随机选择枢轴这一事实之外，当您对子数组进行排序时，您还会遇到一个错误。请注意，您的第一个排序调用是`sort(A, 0, A.length)`，因此结束索引是`A.length - 1`。因此，第一个子数组应该上升到`pivot`，而不是`pivot - 1`。它固定如下：

```
public static void sort(int[] A, int start, int end) {
    if(start < end) {
        int pivot = randomizedPartition(A, start, end);

        sort(A, start, pivot); // This line needed to be changed!
        sort(A, pivot + 1, end);
    }
} 
```

输出：

```
0, 1, 2, 5, 7, 8, 9, 10, 11, 11, 12, 15, 16, 17, 20, 21, 22, 23, 
```

# c# - 在 C# 中，哪个 `if` 语句更快？

> ID：14993778
> 
> 赞同：-7
> 
> 时间：2013-02-21T02:52:38.110
> 
> 标签：c#, performance, bit-manipulation

哪个`if`语句更快，具有以下条件。似乎短路会编译成比非短路更多的指令。

```
bool force = false;
bool _isLoadingActual = true;
bool _isLoadingLoadCore = true;

int a = 0, b = 0;

if (force | !(_isLoadingActual | _isLoadingLoadCore))
{
    a = 1;
}

if (force || !(_isLoadingActual || _isLoadingLoadCore))
{
    b = 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:00:45.053

这是最快的解决方案

```
a = 0;
b = 0; 
```

由于您已经知道布尔变量的值。

不认真..第二个可能更快，因为它可以短路，也就是说，如果您没有将第一个布尔值硬编码为假！否则，短路似乎必须更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:09:19.313

假设您的问题是“其中一个`|`或`||`短路”：

*   `||`是否短路- [|| 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/vstudio/6373h346.aspx)

    > 如果第一个操作数的计算结果为 false，则第二个运算符确定整个 OR 表达式的计算结果为 true 还是 false。

*   `|`不短路- [| 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/vstudio/kxszd0kx.aspx)

    > 对于布尔操作数，| 计算其操作数的逻辑或；也就是说，当且仅当它的两个操作数都为假时，结果才为假。

因此，在纯理论意义上的代码`||`会更快，而且很可能您将无法衡量实际代码差异的影响。

请注意，如果操作数的计算有副作用（不是您的情况，因为您已经有 bool 变量），则两个语句是不等价的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T02:59:00.553

我认为第二个代码更快。

```
if (force || !(_isLoadingActual || _isLoadingLoadCore))
{
    b = 1;
} 
```

因为这是一个[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

在上面的代码中，如果为真，则不需要检查`force`剩余条件 ( )。`!(_isLoadingActual || _isLoadingLoadCore)`

# php - 通过 PHP IMAP 获取 Gmail 标签？

> ID：14993779
> 
> 赞同：7
> 
> 时间：2013-02-21T02:52:40.913
> 
> 标签：php, gmail, imap

我正在使用 PHP 通过 IMAP 访问 Gmail 邮件。我想知道每条消息用什么标签标记。显然，谷歌有一个 IMAP 扩展，可以完全满足我的需要：

[https://developers.google.com/google-apps/gmail/imap_extensions#access_to_gmail_labels_x-gm-labels](https://developers.google.com/google-apps/gmail/imap_extensions#access_to_gmail_labels_x-gm-labels)

但是，我不确定如何通过 PHP 使用这个扩展。有用于 fetch_header 等的 PHP IMAP 函数，但我没有看到可以让我获取此扩展信息的原始“获取”。有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-04T14:06:24.157

试试这个

```
define('EMAIL_HOSTNAME', '{imap.gmail.com:993/imap/ssl}INBOX');
define('EMAIL_USERNAME', 'yourid@gmail.com');
define('EMAIL_PASSWORD', 'password');

$inbox = imap_open(EMAIL_HOSTNAME,EMAIL_USERNAME,EMAIL_PASSWORD) or die('Cannot connect to Gmail: ' . imap_last_error());
$emails = imap_search($inbox,'ALL');
if($emails) {

    rsort($emails);
    foreach($emails as $email_number) {
        $overview = imap_fetch_overview($inbox,$email_number,0);
        $message = imap_fetchbody($inbox,$email_number,2);

        $output.= '<div class="toggler '.($overview[0]->seen ? 'read' : 'unread').'">';
        $output.= '<span class="subject">'.$overview[0]->subject.'</span> ';
        $output.= '<span class="from">'.$overview[0]->from.'</span>';
        $output.= '<span class="date">on '.$overview[0]->date.'</span>';
        $output.= '</div>';

        $output.= '<div class="body">'.$message.'</div>';
    }

}
imap_close($inbox); 
```

# ruby-on-rails - 无法解析在 Heroku 上以 UTF-16 上传的文件

> ID：14993782
> 
> 赞同：1
> 
> 时间：2013-02-21T02:53:07.640
> 
> 标签：ruby-on-rails, file-upload, encoding, heroku, utf-8

我正在编写一个 Rails 应用程序，它允许用户上传 TSV（制表符分隔值）文件以在服务器上解析。这些文件以 UTF-16 编码。在本地一切正常，但是当我尝试在 Heroku 上使用这种编码打开文件时，我收到一条警告，上面写着`warning: Unsupported encoding utf-16 ignored`. 稍后我尝试读取此类文件时，它显然无法说明`invalid byte sequence in UTF-8`. 请参阅下面的代码摘录：

```
 File.open(params[:batch_import][:file].path, 'r:utf-16') do |f|
      @recipients = Recipient.from_tsv(f.read)
    end 
```

有什么我可以做的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:21:27.537

必须使用该`binary`模式打开 UTF-16 文件。尝试这个：

```
File.open(params[:batch_import][:file].path, 'rb:utf-16') do |f|
  @recipients = Recipient.from_tsv(f.read)
end 
```

# c# - 如何在 ASP.NET MVC 4 中的两个完全不同的视图之间保留数据？

> ID：14993783
> 
> 赞同：2
> 
> 时间：2013-02-21T02:53:09.650
> 
> 标签：c#, asp.net-mvc, view

一段时间以来，我一直在尝试找出解决方案，但无济于事。我有的是一个表格。我将 ASP.NET MVC4 与 jQuery Mobile 一起使用。用户首先被定向到以下屏幕：

![在此处输入图像描述](../Images/fca3cf49c845ca85a0253e5b0f333c21.png)

在这里，他们选择一个胶囊并单击提交。 **他们选择的胶囊有一个我想保留到下一页的主键值。**

一旦他们点击提交，他们将被带到：

![在此处输入图像描述](../Images/75e95b4901c45a761c03e36b82358cba.png)

在这里，他们将填写表格并单击“创建”。您在此屏幕截图中看到的填充物列表基于在前一个屏幕上选择的胶囊。因此，根据选择的胶囊，上面的填充物列表可能会有所不同。如何保留在前一个屏幕上选择的 Capsule 的主键值并将其保留到下一个屏幕（完全不同的视图）？我知道我不能使用 ViewBag，因为 ViewBag 仅在单个视图的范围内。本质上，我想要的是上面表格中的数据，以及上一个视图中选择的胶囊的主键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:19:33.020

您需要将值从 View1 发布回服务器，然后通过 Controller 操作方法将其传递回 View2： 下面是显示在服务器上发生的代码片段：

```
//Serve the view when the URL is requested
    public ActionResult ViewAllItems()
    { 
        return View();
    }

//Handle the posted form from the ViewAllItems page
 [HttpPost]
    public ActionResult ViewAllItems(int selectedItemId)
    { 
        RedirectToAction("ViewItemDetail", new { id = selectedItemId });
    }

    public ViewResult ViewItemDetail(int id)
    { 
       var item = repo.GetItem(id);
       return View(item);
    } 
```

在这里，带有 Controller Action 方法 ViewAllItems 的方法接收发布的值并重定向到 ViewItemDetail 方法，该方法然后加载项目数据并将其传递给视图。因此视图将被传递 id（连同完整的项目）。

这是一般的 MVC 模式，其中值被传递给控制器​​操作方法，然后中继回视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:16:39.973

考虑这个伪代码，但本质上控制器可能看起来像这样......

```
[HttpPost]
public ActionResult FormOnePost(ModelFromFormOne modelFromFormOne)
{
    var model = new ModelForFormTwo();
    model.Filters = IList<Filter> from database? query using id
    model.MoreStuff etc.
    return View("ViewTwoWithSecondForm", model);
} 
```

这样可以避免在路径中暴露您的主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T21:09:17.550

您可以使变量保持值静态

# ant - 来自 Ant 的返回值

> ID：14993784
> 
> 赞同：0
> 
> 时间：2013-02-21T02:53:14.977
> 
> 标签：ant

我正在使用现有的 Ant 脚本设置 hudson，因此我将使用自定义工作区。但是，我希望有一个 python 脚本设置一些环境变量，使用顶级构建文件调用 Ant 并在构建成功时执行一些其他操作。有没有办法让蚂蚁根据构建状态返回一个真/假值，以便我可以做出适当的决定并执行相关操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:00:14.717

`<fail>`如果您使用该任务，Ant 将返回一个非零退出值。该`<fail>`任务也可以与任务组合`<condition>`：

```
<fail message="Missing file &quot;${foo}&quot">
    <condition>
       <not>
           <available file="${foo}" type="file"/>
       </not>
    </condition>
</fail> 
```

您可以使用它来验证您尝试构建的内容是否已实际构建，如果没有，则退出构建并显示错误。

如果不想立即失败，可以使用`<condition>`任务设置属性，如果设置了该属性，则失败：

```
<fail message="Property foo.failed was set">
    <condition>
        <isset property="foo.failed"/>
    <condition>
</fail> 
```

或者简单地说：

如果 Python 没有获取失败状态，您也可以在失败时设置退出值：

由于任务失败，Ant 将返回非零退出状态，因为构建会停止。许多 Ant 任务都有一个*haltonfailure*或*failonerror*，默认情况下不会因错误而停止或失败。

# javascript - 使用正则表达式将“[]”之间的字符串替换为javascript

> ID：14993785
> 
> 赞同：1
> 
> 时间：2013-02-21T02:53:21.287
> 
> 标签：javascript, regex

我有一个从 web 服务返回的字符串，其中包含像“[]”这样的左括号，所以字符串看起来像这样：

```
[1] blabh balh blah 
```

我想编写一个正则表达式来删除“[1]”或左括号之间的任何内容。现在我已经尝试过类似的东西：

```
var regexp = /\[[]\\]/g; 
```

但这不起作用。我在这里绊倒了自己的两只脚。我只是想找到以“[”开头并以“]”结尾的任何内容，并替换中间的所有内容，包括左括号和右括号。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T02:56:06.223

这应该有效：

```
var str = '[1] blabh balh blah';
str = str.replace(/\[.*?\]\s?/g, ''); 
```

如果你有嵌套的括号，regexp 可能不是最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:09:19.720

是否需要使用正则表达式？如果没有，一个简单的解决方案可能是：

```
var myString = '[1] Bob Loblaw is the man';
myString = myString.slice(myString.indexOf(']')+1); 
```

# haskell - 拆分管道链

> ID：14993789
> 
> 赞同：3
> 
> 时间：2013-02-21T02:53:47.390
> 
> 标签：haskell, conduit

我有这个有效的管道表达式：

```
main1 = runResourceT
       $ CB.sourceHandle stdin
      $$ CB.lines
      =$ Cl.concatMap matches
      =$ Cl.mapMaybe readDouble
      =$ Cl.map fst
      =$ Cl.map bucket
      =$ Cl.map (BS.pack . show)
      =$ Cl.map (\x -> x <> BS.pack "\n")
      =$ CB.sinkHandle stdout 
```

我无法将它分成两部分，即：

```
source = CB.sourceHandle stdin
  $$ CB.lines
  =$ Cl.concatMap matches
  =$ Cl.mapMaybe readDouble
  =$ Cl.map fst
  =$ Cl.map bucket

sink = Cl.map (BS.pack . show)
  =$ Cl.map (\x -> x <> BS.pack "\n")
  =$ CB.sinkHandle stdout 
```

这样我就可以使用：

```
runResourceT $ source =$ sink 
```

或者其他什么......我从类型检查器得到的错误信息有些难以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:54:22.953

另一方面`source`，将所有运算符替换为`$=`，即“将源与导管融合”运算符，即左融合。

# ruby-on-rails - 如何使用 Sidekiq 将文件上传推送到后台？

> ID：14993790
> 
> 赞同：4
> 
> 时间：2013-02-21T02:53:51.150
> 
> 标签：ruby-on-rails, carrierwave, background-process, worker, sidekiq

我正在开发一个允许您上传大型音乐文件的 Rails 应用程序。我想在后台上传这些，这样当您开始上传时，它会在用户输入有关文件的元数据（例如曲目名称和艺术家等）时移动到 sidekiq 工作人员。

我能够按照此 railscast 将图像处理移至后台： [http ://railscasts.com/episodes/383-uploading-to-amazon-s3?view=asciicast](http://railscasts.com/episodes/383-uploading-to-amazon-s3?view=asciicast)

但我不太清楚如何将文件的实际上传移动到后台。我应该使用某种回调或 Sidekiq 方法吗？

有没有关于如何做这样的事情的资源？

这是我的歌曲模型： [https ://gist.github.com/leemcalilly/5001583](https://gist.github.com/leemcalilly/5001583)

我的歌曲控制器： [https ://gist.github.com/leemcalilly/5001590](https://gist.github.com/leemcalilly/5001590)

我的上传表格： [https ://gist.github.com/leemcalilly/5001586](https://gist.github.com/leemcalilly/5001586)

我的上传者（使用carrierwave和carrierwave_direct到s3）： [https ://gist.github.com/leemcalilly/5001601](https://gist.github.com/leemcalilly/5001601)

该代码可以上传到 s3，但在文件上传时，浏览器会绑定在 Rails 进程中。我更愿意将其移至后台进程。我认为那里的sidekiq 代码确实来自处理图像处理的Railscast，但我不太明白为什么图像处理在该Railscast 中工作。

非常感谢任何指向正确方向的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T03:24:14.183

您的 TrackUploader 类基本上需要一个带有参数的“执行”方法。在该方法中，输入上传图像的逻辑。

您还需要指定队列的名称（即 track_uploader）

之后，您可以通过 TrackUploader.perform_async(argument) 将项目添加到此工作队列。

您可以手动启动 sidekiq，或者使用上帝，以确保它保持活力。

```
class TrackUploader < CarrierWave::Uploader::Base

    include Sidekiq::Worker
    sidekiq_options :queue => :track_uploader

    include Sprockets::Helpers::RailsHelper
    include Sprockets::Helpers::IsolatedHelper

    include CarrierWaveDirect::Uploader

    # Recommended for use with fog
    include CarrierWave::MimeTypes
    process :set_content_type

    def extension_white_list
      %w(mp3 m4a wav aiff flac)
    end

    def perform(argument)
       #do the actual uploading here
    end

end 
```

# c++ - 在 C++ 中，如何编写析构函数来释放指向结构的指针的内存？

> ID：14993791
> 
> 赞同：10
> 
> 时间：2013-02-21T02:53:55.220
> 
> 标签：c++, struct

这是我的结构A

```
struct A {
    int a1;
    int a2;
    ~A() { }
}; 
```

`B`是另一个包含指向 A 的指针的结构

```
 struct B {
    B(int b, A* a)
      : b1(b), ptr2A(a)
    {}
    int b1;
    A* ptr2A;

    ~B() {
         delete b1;
         // traverse each element pointed to by A, delete them <----
    }
}; 
```

稍后我使用下面的代码

```
int bb1;
vector <A*> aa1;
// do some stuff
B *ptrB = new B(bb1, aa1); 
```

我需要删除/释放 ptrB 指向的所有内存。因此，我需要在结构 B 中编写正确的析构函数。如何遍历 A 指向的每个元素并删除它们？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-21T03:06:11.913

如果您使用的是 C++11 编译器，只需使用 std::shared_ptr 就不必担心删除。这是因为 shared_ptr 是一个“智能”指针，它会自动删除它所指向的内容。

```
#include <memory>
struct B 
{
    int b1;
    std::shared_ptr<A> ptr2A;
    B(int b, std::shared_ptr<A> a):b1(b),ptr2A(a)({}
    ~B(){} //look ma! no deletes!
}; 
```

每当您分配某些东西时，请使用共享指针：

```
#include<memory>
...
{
    ....
    std::shared_ptr<B> ptrB( new B(bb1, aa1) );
    //Here is another, more readable way of doing the same thing:
    //auto ptrB = std::make_shared<B>(bb1,aa1);
    ...
}
//no memory leaks here, because B is automatically destroyed 
```

[这是有关智能指针主题的更多信息](http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared)。

我还应该提到，如果您没有 C++11 编译器，您可以从[BOOST 库](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm#Introduction)中获取共享指针。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T03:00:59.057

您只需要将`delete`对象分配给`new`. 在这种情况下，不需要删除`b1`，因为它没有被动态分配。此外，如果您没有`ptr2a`使用动态内存进行初始化，则删除它是未定义的行为。

因此无需担心删除`A`s 数据，因为它会与类的实例一起从内存中销毁。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T02:56:43.477

您只有一个指向`A`. 所以你只需要删除它：

```
~B() {
     delete ptr2A;
} 
```

请注意，您不能`delete`b1，因为它是普通的`int`！（结构的变量占用的内存，例如`b1`指针`ptr2A`本身（不是它指向的内容）与该结构的任何实例一起被自动销毁。）

# apache - Laravel - 使用刀片语法在部署期间渲染视图时出错

> ID：14993793
> 
> 赞同：1
> 
> 时间：2013-02-21T02:54:01.413
> 
> 标签：apache, laravel, linode, laravel-3

我收到此错误：

```
Message:
View [partials.headerHome] doesn't exist.

Location:
/home/user/public/site.com/laravel/view.php on line 170 
```

这是由这个刀片模板引起的，包括

```
@include('partials.headerHome') 
```

当它通过模板引擎运行并最终进入 /storage

```
<?php echo view('partials.headerHome')->with(get_defined_vars())->render(); ?> 
```

我正在使用 Linode，并且我相信我已经正确设置了所有内容，并且其他几个站点运行良好。我的文档根目录正在访问 /public，就像它在开发中一样。这里可能是什么问题？

```
Currently sorting through the error log.. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T03:33:20.950

将对部分的引用及其文件名更改为全部小写，您的问题就会消失。您可能在开发中没有任何问题，因为您的本地机器使用的是不区分大小写的文件系统。例如，Mac OSX 默认情况下不区分大小写。

# ios - 为 segue 中传递的新 nsmanagedobject 释放分配的上下文

> ID：14993798
> 
> 赞同：0
> 
> 时间：2013-02-21T02:54:43.307
> 
> 标签：ios, objective-c, core-data

所以我有两个视图控制器。视图控制器 A 连接到视图控制器 B。在视图控制器 A 的 prepareForSegue 中，它创建了一个新的托管对象上下文并将我的全局 UIManagedDocument 上下文分配为父上下文。然后，我使用子上下文创建一个新的托管对象，并将其分配给视图控制器 B 的强属性。

一旦 viewDidLoad 在视图控制器 B 中完成，托管对象仍然有效（这是我所期望的），但是这个新对象的托管对象上下文设置为零。

我知道下面的变量 *context 在 prepareForSegue 结束时超出了范围，但我希望全局父上下文保留子上下文，或者托管对象保留上下文本身。

这是我在视图控制器 A 中的 prepareForSegue 代码的略微修改版本。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UIViewController *vc = segue.destinationViewController;

    if ([vc isKindOfClass:[ViewControllerB class]]) {

        // Create new context and assign its parent
        NSManagedObjectContext *mainContext = [myGlobalUIManagedDocument managedObjectContext];
        NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        context.parentContext = mainContext;

        // Create new managed object using the context
        NSManagedObject *objectB = [NSEntityDescription insertNewObjectForEntityForName:@"ObjectB" inManagedObjectContext:context];

        // Pass the object to the destination view controller
        ViewControllerB *vcB = (ViewControllerB *)vc;
        vcB.strongManagedObjectProperty = objectB;
    }
} 
```

现在据我所知，视图控制器 B 中的任何代码都没有将上下文设置为 nil。我只是想知道，如果根据我提供的信息，一旦 prepareForSegue 失去作用域，*objectB 的托管对象上下文仍应为非零*。*如果是这样，我似乎还有更多的调试要做。

更新：我能够在视图控制器 B 中的 viewWillAppear 之后和 viewDidAppear 之前的某个时间跟踪我的上下文设置为 nil 的确切时刻。我完全糊涂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:36:39.447

我从来没有真正弄清楚这里发生了什么。

我的解决方案是在我的名为 editingContext 的单例类上创建一个 UIManagedObjectContext 属性来管理我的 UIManagedDocument。它负责创建一个上下文作为 UIManagedDocument 主上下文的子级，并将其存储在自己的属性中。

因此，每当我将上下文传递给视图控制器 B 时，上下文不会设置为 nil。当我完成上下文后，我只需向我的单例发送一个 checkinContext: 方法以释放编辑上下文。

有点骇人听闻，但我可以将这种方法与我所有的 segues 一起使用，并获得一个“临时”上下文的好处，如果用户取消他们的操作，我可以丢弃它。

# html - 表格边框间距不起作用

> ID：14993802
> 
> 赞同：7
> 
> 时间：2013-02-21T02:55:18.720
> 
> 标签：html, css

我正在尝试使用 CSS 边框间距属性将此表中的图像与空格分开，但由于某种原因它不起作用。您可以在此处查看图像如何仍然粘在 JSFiddle 中：http: [//jsfiddle.net/nKgnq/](http://jsfiddle.net/nKgnq/)

我尝试通过在图像周围放置填充来破解它，但无济于事。我怎样才能把这些照片分开？

生成表格的代码在这里：

```
<div class="table-right">
    <table class="fixed-height fixed-width fixed-cell">
        <tr>
            <td class="valigned"><h3 class="date">Details</h3>
                <?php the_field('details');?>
            </td>
            <td class="valigned">
                <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'secondary-image');?>">
                    <img class="detail-image" src="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'secondary-image');?>">
                </a>
            </td>
            <td class="valigned">
                <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'tertiary-image');?>">
                    <img class="detail-image" src="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'tertiary-image');?>">
                </a>
            </td>
            <td class="valigned">
                <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'fourth-image');?>">
                    <img class="detail-image" src="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'fourth-image');?>">
                </a>
            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T05:55:46.507

在您的 css 中，您申请`border-spacing:5px`了该`table-right`课程，但您的表格不使用它，即使它包含在您应用的 div 中，因为您有

```
table { /* tables still need 'cellspacing="0"' in the markup */
    border-collapse: separate;
    border-spacing: 0;
} 
```

在您的 css 中，这是一个更具体的选择器，将覆盖从 div 继承的 css。如果你上课像

```
.table-spacing{
   border-spacing:5px;
} 
```

您可以将其应用于您的表格标签

```
<table class="fixed-height fixed-width fixed-cell table-spacing"> 
```

我认为这将以所要求的方式解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:59:35.737

真的很难理解你的 jsFiddle，但一般来说，一种方法是在你的`<td>`标签上添加填充。添加一个额外的类，例如`rightpadding`，添加到`<td>`你想要额外填充的标签中，然后在你的 CSS 中定义它。

```
.rightpadding
{
    padding-right: 5px;
} 
```

你的`<td>`标签看起来像这样：

```
<td class="valigned rightpadding"> 
```

# javascript - 防止 OS X Chrome 和 Safari 上的弹性滚动

> ID：14993804
> 
> 赞同：5
> 
> 时间：2013-02-21T02:55:43.507
> 
> 标签：javascript, jquery, css

我正在寻找一种方法来防止在 Chrome 和 Safari 中的 OS X 上发生弹性滚动。

如果您不明白我的意思，那就是当您在页面顶部时向上滚动，或者在页面在底部时向下滚动，并且在页面后面显示灰色背景。

有一个单页应用程序的 css 解决方案，您只需添加`overflow:hidden`到`html`或`body`

但是，我需要能够滚动。

我想出了一个使用 Javascript (JQuery) 的解决方案，但它仅用于滚动通过顶部，并且仅适用于 chrome。此外，它在 Safari 中有点问题。

```
$(window).on('scroll', function(e){
   scrollAmount = $(this).scrollTop();
   if(scrollAmount < 1){
      $(this).scrollTop(1);
   }
}); 
```

因此，这只是检查用户滚动到 1 以下，这意味着他们尝试向上滚动到页面结束的位置。我尝试了 0 但这没有用。我一直无法找到一种方法来检查用户是否滚动通过了页面底部。

那么有什么想法吗？

编辑：

```
$(window).on('scroll', function(e){
   scrollAmount = $(this).scrollTop();
   if(scrollAmount < 1){
      $(this).scrollTop(1);
   }
   if(scrollAmount > $(document).height() - $(window).height()){
      $(this).scrollTop($(window).height());
   }
}); 
```

现在我添加了一个检查，如果我们滚动通过页面底部。但是这种方法不起作用，它非常不优雅地弹跳。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-01T17:42:17.177

当您快速向上滚动到顶部时，弹性浏览器会导致滚动顶部变为负数。使用 st <= 0，将确保发生这种情况时不采取任何措施。

```
$(window).on('scroll',function(){
    var dh = $(document).height(),
        wh = $(window).height(),
        st = $(window).scrollTop();
    if (st <= 0) {
        $(this).scrollTop(0);
    } else if (st + wh >= dh) {
        $(this).scrollTop(dh);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-12-20T14:49:58.703

您现在可以使用[`overscroll-behavior`](https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior)：

```
html, body {
  overscroll-behavior: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:02:21.787

虽然我不喜欢这种方法，但您可以使用 jQuery 来获取文档高度（因此使用页面底部来获取滚动距离`$(document).height();`）

另一种方法是用包装器包装整个页面`<div id="preventScroll"></div>`，并带有属性`overflow: scroll; height: 100%; width: 100%;`

那将是一个单独的滚动设备，可以防止您的整个问题。

# r - 在 R 中组合表达式

> ID：14993808
> 
> 赞同：4
> 
> 时间：2013-02-21T02:56:18.623
> 
> 标签：r, expression

我正在尝试将 R 中的多个表达式组合成一个表达式。理想情况下，我可以做这样的事情：

```
g <- expression(exp(a[1]*x)/(1 + exp(a[1]*x)))
h <- expression(exp(a[2]*x)/(1 + exp(a[2]*x)))
c <- expression(g * h) 
```

其中`a`是给定的数据向量，`x`是唯一的未知数（并且在所有表达式中都是相同的未知数）。`c`会回来

```
R> c
expression(exp(a[1]*x)/(1 + exp(a[1]*x)) * exp(a[2]*x)/(1 + exp(a[2]*x))) 
```

现在，当我这样做时，我会得到

```
R> c
expression(g * h) 
```

我想要一个方程

[![C](../Images/b2225834d2eeaba3a9525aaa2c2c80de.png)](https://i.stack.imgur.com/aYIPN.jpg)
[（来源：[lehrfeld.me](http://lehrfeld.me/images/c.jpg)）]

我可以在其中插入一些向量`a`以获得`x`. 我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T03:01:55.047

不要使用表达式，使用函数。这

据我所知，以下将做你想要的

```
# a function for a vector `x` and single value `a`
func <- function(x,a) { (exp(1)^(a*x)/(1 + exp(1)^(a*x))) }
# a function for  a vector `x` and vector length 2 for `a`
foo <- function(x, a){func(x,a[1]) * func(x, a[2])}

# call the function to calculate what you want.

foo(x,a) 
```

如果您想要`expression`与此相关联，以便您可以绘制等式的文本，则以下内容将起作用

```
expr <- expression(exp(1)^(a*x)/(1 + exp(1)^(a*x))

g <- do.call(substitute, list(as.list(expr)[[1]], env= list(a=3)))
h<- do.call(substitute, list(as.list(expr)[[1]], env= list(a=2)))
'%c%' <- function(a,b) bquote(.(a) %*% .(b))

fooExpr <- g %c% h 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-12T13:53:24.930

这是一个古老的问题，但令人惊讶的是，没有给出简单的答案。正如评论中所说，“R 不是符号代数程序”；然而，R 拥有处理表达式的所有必要手段。我不知道如何使用`expressions`（在技术意义上，请参阅`?expression`），但使用以下方法非常容易`calls`：

```
g <- quote(exp(a[1]*x)/(1 + exp(a[1]*x)))
h <- quote(exp(a[2]*x)/(1 + exp(a[2]*x)))
substitute(g*h, list(g=g, h=h))
# exp(a[1] * x)/(1 + exp(a[1] * x)) * (exp(a[2] * x)/(1 + exp(a[2] * x))) 
```

可能有更简单的方法来实现您想要的（可能使用函数），但这是合并两个“调用”（即 R 向导定义的“口语”意义上的表达式）的最简单方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T03:18:14.397

您可能想要一个函数而不是我认为的表达式：

```
newfunc <- function(x) {
  (exp(1)^(2*x)/(1 + exp(1)^(2*x))) *
  (exp(1)^(3*x)/(1 + exp(1)^(3*x)))
}

a <- 1:10

newfunc(a)
[1] 0.8390245 0.9795856 0.9974043 0.9996585 0.9999543 0.9999938 0.9999992
[8] 0.9999999 1.0000000 1.0000000 
```

如果你想明确地将多个函数链接在一起，你可以这样做：

```
newfunc1 <- function(x) {
  (exp(1)^(2*x)/(1 + exp(1)^(2*x)))
}

newfunc2 <- function(x) {
  (exp(1)^(3*x)/(1 + exp(1)^(3*x)))
}

newfunc1(a) * newfunc2(a) 
```

请记住，正如 ?expression 中的帮助文件所说：

```
 ‘Expression’ here is not being used in its colloquial sense, that
  of mathematical expressions.  Those are calls (see ‘call’) in R,
  and an R expression vector is a list of calls, symbols etc, for
  example as returned by ‘parse’. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T03:21:31.580

您可以定义一个二进制函数来`expression`以一种有点 hacky 的方式组合对象——获取它们的字符表示，用 粘贴它们`*`，然后重新解析它：

`"%c%" <- function(x, y) parse( text=paste(x, "*", y) )`

例如，在调用 时给出所需的输出`g %c% h`。

编辑：更新答案以纠正先前的错误；谢谢mnel！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-21T12:51:47.807

使用 rlang 从其他表达式创建表达式比使用基本 R 更直接 (IMO)。使用 !! (bang-bang) 强制评估表达式中的对象。

```
library(rlang)

a <- c(2, 3)
g <- expr(exp(!!a[1] * x) / (1 + exp(!!a[1] * x)))
h <- expr(exp(!!a[2] * x) / (1 + exp(!!a[2] * x)))
c <- expr(!!g * !!h)
c
#> exp(2 * x)/(1 + exp(2 * x)) * (exp(3 * x)/(1 + exp(3 * x))) 
```

^(由[reprex 包](https://reprex.tidyverse.org)于 2020-03-21 创建(v0.3.0))

# python - 无法安装 setuptools (python)

> ID：14993813
> 
> 赞同：1
> 
> 时间：2013-02-21T02:57:01.557
> 
> 标签：python, setuptools

我有 Windows 7（64 位）操作系统。我已经安装了python。我想安装 setuptools（用于 python）。在他们的网站 ( [https://pypi.python.org/pypi/setuptools](https://pypi.python.org/pypi/setuptools) ) 上写着：“下载 ez_setup.py 并运行它；” 我下载了那个文件，把它保存到我的硬盘上。然后当我单击（鼠标右键）并选择“打开方式”->“python”时，黑色控制台屏幕出现一秒钟，然后消失。就这样。出了什么问题，我该如何安装该软件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:05:15.823

1.  打开命令提示符（开始菜单 -> cmd.exe）
2.  导航到保存 ez_setup.py 的目录，例如：

    ```
    cd C:\Users\You\Downloads 
    ```

3.  运行它（C:\Python27\ 应该已经在你的 %PATH% 上；如果不是，添加它——见下文）：

    ```
    python ez_setup.py 
    ```

4.  读取输出。如果它有效，您应该能够像这样安装软件包：

    ```
    C:\Python27\Scripts\easy_install jinja2 
    ```

5.  将路径添加`easy_install`到您的 %PATH% 以便您可以从任何目录轻松使用它：

    1.  控制面板 -> 系统 -> 高级系统设置
    2.  点击`Environment variables...`按钮
    3.  编辑 PATH 并附`;C:\Python27\Scripts\`加到末尾（替换您的 Python 版本）
    4.  单击确定。请注意，对 PATH 的更改仅反映在更改发生*后打开的命令提示符中。*

如果出现问题，程序完成后命令提示符将保持打开状态，因此您将能够阅读错误并使用它来解决问题。

# mysql - 如何对 MySQL 中的 IN 语句进行部分匹配

> ID：14993816
> 
> 赞同：0
> 
> 时间：2013-02-21T02:57:19.380
> 
> 标签：mysql

我将多个表加入到一个查询中。我需要对 IN 语句中的值进行部分匹配。这是一个例子。

```
SELECT DISTINCT 
    am.id AS id, 
    am.flagged AS flagged, 
    am.name AS name, 
    am.type AS type, 
    am.file AS file, 
    am.s3_tag AS s3_tag, 
    am.low_s3_tag AS low_s3_tag 
FROM accounts_media am 
    LEFT JOIN accounts_location_media alm ON am.id = alm.media_id 
    LEFT JOIN accounts_location al ON al.id = alm.location_id 
    LEFT JOIN accounts_person_media apm ON am.id = apm.media_id 
    LEFT JOIN accounts_person ap ON ap.id = apm.person_id 
    LEFT JOIN accounts_event_media_record aemr ON am.id=aemr.media_id 
    LEFT JOIN accounts_medianote_media_record amma ON am.id=amma.media_id 
    LEFT JOIN accounts_medianote amn ON amma.medianote_id=amn.id 
WHERE 
    am.account_id = '1234' 
    AND am.flagged = FALSE 
    AND ('Da' IN (SELECT first_name FROM accounts_person WHERE account_id = '1234') 
    AND ('Rob' IN (SELECT first_name FROM accounts_person WHERE account_id = '1234') 
```

在里面

`AND ('Da' IN (SELECT first_name FROM accounts_person WHERE account_id = '1234')`

声明表中有表示“Dan”、“Daniel”等的值。还有“Rob”和“Robert”。我需要该语句来确保包含“Da”的名称以及该表中包含“Rob”的任何名称。有没有办法做到这一点？

因此，一条记录可以链接到 accounts_person 表中的多个人。所以可以说我有三个记录。

记录一：记录附有一个名叫丹的人。

记录二：记录附有一个名叫罗伯特的人。

记录三：记录附有一个叫丹和一个叫罗伯特的人。

我希望查询只返回记录三，因为它具有“Da”和“Rob”的匹配项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:26:34.400

尝试这个：

```
WHERE 
    am.account_id = '1234' 
    AND am.flagged = FALSE 
    -- AND ( ap.first_name LIKE '%Da%' OR ap.first_name LIKE '%Rob%')
    AND EXISTS 
        ( SELECT 1
            FROM accounts_person apx
           WHERE apx.first_name LIKE '%Da%'
             AND apx.account_id = am.account_id
        )
    AND EXISTS 
        ( SELECT 1
            FROM accounts_person apy
           WHERE apy.first_name LIKE '%Rob%'
             AND apy.account_id = am.account_id
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:59:08.840

我不确定，但我认为你想要一个类似的声明，在 Da 之后有一个外卡。

```
SELECT DISTINCT 
    am.id AS id, 
    am.flagged AS flagged, 
    am.name AS name, 
    am.type AS type, 
    am.file AS file, 
    am.s3_tag AS s3_tag, 
    am.low_s3_tag AS low_s3_tag 
FROM accounts_media am 
    LEFT JOIN accounts_location_media alm ON am.id = alm.media_id 
    LEFT JOIN accounts_location al ON al.id = alm.location_id 
    LEFT JOIN accounts_person_media apm ON am.id = apm.media_id 
    LEFT JOIN accounts_person ap ON ap.id = apm.person_id 
    LEFT JOIN accounts_event_media_record aemr ON am.id=aemr.media_id 
    LEFT JOIN accounts_medianote_media_record amma ON am.id=amma.media_id 
    LEFT JOIN accounts_medianote amn ON amma.medianote_id=amn.id 
WHERE 
    am.account_id = '1234' 
    AND am.flagged = FALSE 
    AND (accounts_person.first_name like '%Da%'
    OR accounts_person.first_name like '%Rob%') 
    AND accounts_person.account_id = '1234' 
```

# java - 如何在 android 的 if-then 语句中使用“int”

> ID：14993819
> 
> 赞同：-5
> 
> 时间：2013-02-21T02:57:29.783
> 
> 标签：java, android

我正在尝试使其生成并显示一个随机数，并且用户将输入该数字并按 Enter 按钮。如果输入文本与生成的随机数匹配，它就会做一些事情。但是，当我尝试使用时`if(message=random)`出现错误提示“无法将‘int’类型的实例分配给‘java.lang.String’类型的变量。我不知道该怎么做或如何解决这个问题。

我的代码就在这里：

```
Public class MainActivity extends Activity {
/** Called when the activity is first created. */

int random = (int)Math.ceil(Math.random()*100);

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView number = (TextView)findViewById(R.ID.number);
    number.setText("" + random);

    }

public void enter(View view)
{
    EditText answer = (EditText) findViewById(R.id.answer);
    String message = answer.getText().toString();
    if(message=random) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:59:16.237

转换`random`为`String`使用`String.valueOf()`方法然后使用`equals()`方法

```
if(message.equals(String.valueOf(random))
{

   // Do some stuff..
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T03:05:41.507

这里实际上有两个问题：

* * *

Q1：你如何比较Java 中的 a`String`和 an ？`int`

答：你没有。您要么将 转换为`String`，`int`要么将 转换`int`为`String`。然后你用类似的类型进行比较。（Java 不支持原始类型和引用类型的比较......除了引用类型是适当类型的装箱类型的情况；例如比较`Integer`和`int`工作。）

在这种情况下，将 转换为 String 会更方便，`int`因为您不需要处理 String 不是有效整数的情况。因此：

```
if (message.equals(String.valueOf(random)) ... 
```

但是，如果您想测试是否`random`（例如）*小于*所代表的数字`message`，那将行不通。你需要做这样的事情：

```
try {
    if (number < Integer.parseInt(message)) ...

} catch (NumberFormatException ex) {
    // do something ...
} 
```

* * *

Q2：为什么会出现那个奇怪的编译错误？

```
 "An instance of type 'int' can not be assigned to a variable 
    of type 'java.lang.String'" 
```

- 答：看声明：

```
 if(message=random) 
```

您正在使用`=`您打算使用的地方`==`。您的代码尝试*分配*`random`to的值`message`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T03:00:39.277

这里有两个问题：

1.  您正在分配而不是比较。你应该使用 message == random
2.  您正在将字符串与 int 进行比较。你应该使用转换它

    int intMessage = Integer.parseInt(answer.getText().toString());

    如果（消息 == 随机）{

system32 答案可能更安全，因为我在这里假设您的文本将是一个数字。

# sockets - 如何在 Windows Phone 8 和 Windows 8 之间建立套接字连接并传输数据？

> ID：14993821
> 
> 赞同：0
> 
> 时间：2013-02-21T02:57:39.327
> 
> 标签：sockets, windows-8, tcp, windows-phone-8

我想将一些数据发送到我的计算机（即`1`）。当我按下 Windows Phone 8 上的按钮并在手机上接收数据时。你如何制作这个简单的程序？我已经在电脑和手机上建立了一个服务器，但这是将通过 WiFi TCP/IP 套接字传递的数据吗？? 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:21:44.747

[Windows Phone 的套接字](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202874%28v=vs.105%29.aspx)将是一个好的开始。由于您使用的是 Windows 8 和 Windows Phone 8，因此请使用[Windows.Networking.Sockets](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.networking.sockets.aspx) Windows 运行时 API。

还有许多[示例应用程序](http://dev.windowsphone.com)，尽管其中许多来自 Windows Phone 7.5 老式并使用较旧的[System.Net.Sockets](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.net.sockets%28v=vs.105%29.aspx)。

看看[Tim Laverty 的](http://code.msdn.microsoft.com/wpapps/Windows-Phone-8-Networking-835239c1)Build 2012 演示文稿中的示例：[Windows Phone 8，网络：构建连接的应用程序](http://channel9.msdn.com/Events/Build/2012/3-047)。它包含一个用于 Windows Phone 的 Socket 侦听器和客户端，但由于它使用 WinRT API，因此在 Windows 8 中也应该很容易使用。

# mysql - 有没有更有效的方法来循环这个 sql 结果集？

> ID：14993823
> 
> 赞同：2
> 
> 时间：2013-02-21T02:57:52.603
> 
> 标签：mysql, sql

所以我在数据库中有一个表，其中包含如下结构的类别：

pk int: cat_id
int: parent_id
varchar: cat_name

顶级类别的 parent_id 为空，并且可能有多个级别的子项。基本上，我正在获取一个搜索字符串并将其与类别名称进行匹配，如果该类别有父类别，那么我想以面包屑的方式显示所有匹配项的完整路径。这是我现在正在做的伪代码：

```
search_string = whatever;
result = query db and find all category names matching "%whatever%";
foreach(result)
{
    parent_id = result[parent_id];
    result_path = result[cat_name];
    while(parent_id != null)
    {
        result2 = query db and find cat_id = parent_id;
        result_path = result2[cat_name] + " > " + result[path];
        parent_id = result2[parent_id];
    }
    print result_path;
} 
```

除了嵌套循环和数据库查询之外，还有更有效的方法吗？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:00:42.633

您所拥有的是存储为邻接列表的层次结构。递归是解决这个问题的唯一实用方法，无论是在 MySql 还是 PHP 中。

如果您正在认真寻找此特定查询的效率，请将您的层次结构存储为嵌套集。请注意，这是一项重要的工作，并且会增加维护数据的成本。它还会降低其他查询的效率，例如查找孩子。

此站点和其他站点上有大量有关在 RDMS 中存储分层数据的信息。

# odbc - 什么字符编码是 ODBC 数据源？

> ID：14993824
> 
> 赞同：0
> 
> 时间：2013-02-21T02:57:53.943
> 
> 标签：odbc

具体来说，使用什么字符编码`SQLDataSources`？

在我的 Windows 7 机器（设置为新西兰英语）上，它似乎使用 CP1252。我在文档中找不到任何关于字符编码[的内容](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714562%28v=vs.85%29.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:39:09.167

我做了一些实验并确定数据源名称是 unicode。`SQLDataSources`为您提供转换为系统代码页的名称，将无法转换的字符替换为“？”。这与您预期的一样有用。未记录的函数`SQLDataSourcesW`给出了以 UTF-16 编码的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:38:28.487

这取决于您使用的数据库。对于 PostgreSQL，我`SET client_encoding to <encoding>;`在连接 do 数据库后使用。对于 Informix，Environment 选项卡上提供了 Client Encoding 选项。对于 Oracle，我使用`NLS_LANG`环境设置。

# visual-c++ - VC++ 运行时以不寻常的方式终止它

> ID：14993826
> 
> 赞同：1
> 
> 时间：2013-02-21T02:58:00.027
> 
> 标签：visual-c++, runtime-error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:57:16.950

The easiest way to test is to install [depends](http://www.dependencywalker.com/) on the computer. Most likely, your application is built to use a later version of C++ runtime libraries, e.g. `<assemblyIdentity type='win32' name='Microsoft.VC80.CRT' version='8.0.50727.4053' processorArchitecture='x86' publicKeyToken='1fc8b3b9a1e18e3b' />`, but on the XP system it is an older version.

You would need to check what version of the runtime library used by analysing the program's manifest. Then check what depends is showing.

If the required version of runtime is missing, distribute it with the program's install.

On the side note, you could consider switching to the static link. The size of the binaries will be bigger, but these type of problems will be gone

# java - 绘制用户选择的形状

> ID：14993827
> 
> 赞同：0
> 
> 时间：2013-02-21T02:58:02.850
> 
> 标签：java, swing, drawing, jframe, jpanel

我需要创建一个程序来绘制形状（用户用单选按钮选择），以及形状是否被填充（用户用复选框选择）。这是我到目前为止的代码：

```
 import javax.swing.*;
 import java.awt.*;
 import java.awt.event.*;

public class SelectShape extends JFrame implements ItemListener{
    private JRadioButton line = new JRadioButton("Line");
    private JRadioButton rect = new JRadioButton("Rectangle");
    private JRadioButton oval = new JRadioButton("Oval");
    private JCheckBox fill = new JCheckBox("Filled");
    private FigurePanel fp;

public static void main(String[] args) {
    SelectShape frame = new SelectShape();
    frame.setTitle("Select Shape");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.setSize(400,400);
    frame.setVisible(true);
}

public SelectShape() {
    JPanel p1 = new JPanel();
    p1.add(fp);
    fp.setBackground(Color.WHITE);
    p1.setSize(200,400);

    JPanel p2 = new JPanel();
    p2.setLayout(new FlowLayout());
    p2.add(line);
    p2.add(rect);
    p2.add(oval);
    p2.add(fill);
    add(p2, "South");

    line.addItemListener(this);
    rect.addItemListener(this);
    oval.addItemListener(this);
    fill.addItemListener(this);

}

public void ItemStateChanged(ItemEvent e) {
    if(rect.isSelected()) {
        FigurePanel.dRect();
        repaint();
    }
    else if(oval.isSelected()) {
        FigurePanel.dOval();
        repaint();
    }
    else if(line.isSelected()) {
        FigurePanel.dLine();
        repaint();
    }
    if(fill.isSelected()) {
        FigurePanel.fill();
        repaint();
    }
    else {
        FigurePanel.erase();
        repaint();
    }
}       
}

class FigurePanel extends JPanel {
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    public void dLine(Graphics g) {
        g.drawLine(10,10,160,10);
    }
    public void dRect(Graphics g) {
        g.drawRect(10,10,150,50);
    }
    public void dOval(Graphics g) {
        g.drawOval(10,10,150,50);
    }

    public void fill(Graphics g) {
        g.setColor(Color.GREEN);
        if(rect.isSelected()) {
            g.fillRect(10,10,150,50);
        }
        else if(oval.isSelected()) {
            g.fillOval(10,10,150,50);
        }
    }
    public void erase(Graphics g) {
        g.setColor(Color.WHITE);
        if(rect.isSelected()) {
            g.fillRect(10,10,150,50);
        }
        else if(oval.isSelected()) {
            g.fillOval(10,10,150,50);
        }
    }
}
} 
```

我得到的错误是表达式和​​标识符的非法开头。如果我应该以另一种方式处理这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:12:30.967

我认为你需要回到基础......

这行不通...

```
fp.setBackground("white"); 
```

`Component#setBackground`不采用 a`String`作为参数，它采用 a`Color`

你所有的`addItemListener`电话都不会工作，因为你还没有实现`ItemListener`

我不确定你希望通过这样做来实现什么......

```
@Override
fp.dRect(); 
```

但它不会起作用。@Override 用来表示一个方法被一个祖先覆盖了，你只是调用的方法`FigurePanel`

Java 和 C 和 C++ 一样是区分大小写的；

没有这样的课程`itemEvent`......它是`ItemEvent`

```
public void ItemStateChanged(itemEvent e) { 
```

没有这样的课程`graphics`，它是`Graphics`

```
public void paintComponent(graphics g) { 
```

而且我什至不会尝试猜测您希望通过以下方式实现什么...

```
public void paintComponent(graphics g) {
    super.paintComponent(g);
    dLine() {
        g.drawLine(10, 10, 160, 10);
    }
    dRect() {
        g.drawRect(10, 10, 150, 50);
    }
    dOval() {
        g.drawOval(10, 10, 150, 50);
    }
    fill() {
        g.setColor(Color.GREEN);
            if (rect.isSelected()) {
                g.fillRect(10, 10, 150, 50);
            } else if (oval.isSelected()) {
                g.fillOval(10, 10, 150, 50);
            }
        }
    erase() {
        g.setColor(Color.WHITE);
        if (rect.isSelected()) {
            g.fillRect(10, 10, 150, 50);
        } else if (oval.isSelected()) {
            g.fillOval(10, 10, 150, 50);
        }
    }
} 
```

Java 不支持“内联方法”（或者你想调用它们的任何东西），不，使它们成为方法也不会实现你想要做的......

事实上，你做得很好的一件事就是覆盖`paintComponent`并调用`super.paintComponent`......做得好：D！

**更新**

我会鼓励你通读...

*   [Java Trails](http://docs.oracle.com/javase/tutorial/)，尤其是那些涵盖基础知识的，尤其是那些涵盖继承的
*   [定制绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

**更新了可能的运行示例**

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Shape;
import java.awt.event.ActionEvent;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;
import java.awt.geom.Rectangle2D;
import javax.swing.AbstractAction;
import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class DrawShapes {

    public static void main(String[] args) {
        new DrawShapes();
    }

    public DrawShapes() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new DrawPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class DrawPane extends JPanel {

        public DrawPane() {

            setLayout(new BorderLayout());

            RenderPane rp = new RenderPane();
            add(new ControlsPane(rp), BorderLayout.NORTH);
            add(rp);

        }

    }

    public class ControlsPane extends JPanel {

        public ControlsPane(RenderPane rp) {

            JRadioButton[] btns = new JRadioButton[4];
            btns[0] = new JRadioButton(new LineAction(rp));
            btns[1] = new JRadioButton(new RectangleAction(rp));
            btns[2] = new JRadioButton(new OvalAction(rp));
            btns[3] = new JRadioButton(new ClearAction(rp));

            ButtonGroup bg = new ButtonGroup();
            for (JRadioButton btn : btns) {
                bg.add(btn);
                add(btn);
            }

        }

    }

    public class RenderPane extends JPanel {

        private Shape shape;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        public void setShape(Shape shape) {
            this.shape = shape;
            repaint();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            if (shape != null) {
                g2d.setColor(Color.RED);
                g2d.draw(shape);
            }
            g2d.dispose();
        }

    }

    public class LineAction extends AbstractRenderAction {

        public LineAction(RenderPane renderPane) {
            super(renderPane);
            putValue(NAME, "Line");
        }

        @Override
        public Shape getShape() {
            return new Line2D.Float(0f, 0f, getRenderPane().getWidth(), getRenderPane().getHeight());
        }

    }

    public class RectangleAction extends AbstractRenderAction {

        public RectangleAction(RenderPane renderPane) {
            super(renderPane);
            putValue(NAME, "Rectangle");
        }

        @Override
        public Shape getShape() {
            return new Rectangle2D.Float(10, 10, getRenderPane().getWidth() - 20, getRenderPane().getHeight() - 20);
        }

    }

    public class OvalAction extends AbstractRenderAction {

        public OvalAction(RenderPane renderPane) {
            super(renderPane);
            putValue(NAME, "Oval");
        }

        @Override
        public Shape getShape() {
            float radius = Math.min(getRenderPane().getWidth() - 20, getRenderPane().getHeight() - 20);
            return new Ellipse2D.Float(10, 10, radius, radius);
        }

    }

    public class ClearAction extends AbstractRenderAction {

        public ClearAction(RenderPane renderPane) {
            super(renderPane);
            putValue(NAME, "Clear");
        }

        @Override
        public Shape getShape() {
            return null;
        }

    }

    public abstract class AbstractRenderAction extends AbstractAction {

        private RenderPane renderPane;

        public AbstractRenderAction(RenderPane renderPane) {
            this.renderPane = renderPane;
        }

        public RenderPane getRenderPane() {
            return renderPane;
        }

        public abstract Shape getShape();

        @Override
        public void actionPerformed(ActionEvent e) {
            getRenderPane().setShape(getShape());
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:12:10.610

好吧，以下绝对不是有效的 Java 代码：

```
 dLine() {
        g.drawLine(10,10,160,10);
    } 
```

这同样适用于以下 dRect 等。

我不确定你想用该代码实现什么。如果要定义一个名为 dLine 的方法，您将改为执行以下操作：

```
public void dLine(Graphics g) {
    g.drawLine(10, 10, 160, 10);
} 
```

我还注意到以下代码，它目前不会给您带来问题，但它会：

```
public void ItemStateChanged(itemEvent e) { 
```

这没有正确大写，所以它不会编译，你也没有听任何事件，所以它永远不会被调用。

代码中还有其他各种错误，但这应该可以帮助您入门。

# java - Java 多次按键和释放

> ID：14993829
> 
> 赞同：1
> 
> 时间：2013-02-21T02:58:15.130
> 
> 标签：java, keylistener

我尝试搜索如何在 java 中处理多个按键，但我发现的所有解决方案都假设所有按键都被按下。

我正在创建一个非常简单的游戏，其中我加载的图像将沿着画布移动。我希望它使用向左、向右和向上箭头键向左、向右和跳跃。我的问题是，当我按下左右键时，它们工作得很好。但是，当我按下向上箭头键时，它只是跳跃并一起停止移动。

我有一个所有按下的键的数组列表和一个 run() 方法，该方法检查所有按下的键并执行特定的工作。但是 java 只记住我按下的最新键，一旦我按下向上箭头键，它就不会调用 run() 方法。

你建议我怎么做？我尝试过线程，但它们混淆了我的代码（或者我做错了什么？）。

这是我的代码：

```
public class Moving implements KeyListener {
    ProgramClass bg; //this is another class
    Set<Integer> pressed = new HashSet<Integer>();

    public Moving (ProgramClass aa) {
        bg = aa;
    }

    public void keyPressed (KeyEvent ae) {
        pressed.add(ae.getKeyCode());
        run();
    }

    public void keyTyped (KeyEvent ae) {
    }

    public void keyReleased (KeyEvent ae) {
        pressed.remove (ae.getKeyCode());
        if (bg.left==false) {
            if (ae.getKeyCode()==KeyEvent.VK_UP) {
                bg.yy -=40;
            }
        }
        run();
    }

    public void run () {
        if (bg.left==true) {
            if (pressed.contains(KeyEvent.VK_A)) {}

            if (pressed.contains(KeyEvent.VK_D)) {
                if (bg.pic==true)
                    bg.pic = false;
                else
                    bg.pic = true;

                if (bg.x==-550)
                    bg.x = -2;
                else
                    bg.x -= 2;
            }
        }

        if (bg.left==false) {
            if (pressed.contains(KeyEvent.VK_LEFT)) {
                if (bg.pic==true)
                    bg.pic = false;
                else
                    bg.pic = true;

                if (bg.x==550)
                    bg.x = 2;
                else
                    bg.x += 2;
            }

            if (pressed.contains(KeyEvent.VK_RIGHT)) {}

            if (pressed.contains(KeyEvent.VK_UP)) {
                bg.yy -=40;
            }
        }
    }
} 
```

谢谢！

# c# - 使用 Parallels (OSX, Win 7) 访问 Web 服务的问题

> ID：14993832
> 
> 赞同：2
> 
> 时间：2013-02-21T02:58:38.810
> 
> 标签：c#, visual-studio-2010, macos, parallels

我目前正在我的 Mac（山狮）上通过 Parallels 运行 Windows 7。我使用 Visual Studios 2010 开发了一个 Web 服务。当我“在不调试的情况下启动程序”时，我可以访问该 Web 服务，但我仍然无法通过另一个 Web 浏览器（Chrome、Firefox、Safari）访问该 Web 服务。

这是我到目前为止所做的：

*   起初我认为 OSX 和 Win 7 之间的网络连接有问题，所以我通过 OSX 和 Win 7 之间的机场桥接网络。但由于某种原因，IP 地址仍然不同 MAC (192.168.1.121) WIN 7(192.168 .1.131）。所以我想这仍然是问题所在。

*   我做的下一件事是改变 Visual Studios 启动程序的方式，从 Visual Studio 开发服务器到本地 IIS 服务器，正如我在 Internet 上找到的内容所建议的那样。

所以我的问题是如何通过另一个使用并行的网络浏览器访问网络服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:05:00.333

> 由于某种原因，IP 地址仍然不同 MAC (192.168.1.121) WIN 7(192.168.1.131)

是的，应该是这样，因为它们是不同的机器并且必须有不同的 IP

1.  您是否可以使用地址 127.0.0.1 从同一 VM 中启动的浏览器访问该服务？

2.  如果是，您是否可以使用 Win7 的 IP 地址从 Mac 访问它？

如果 2 失败，那么你应该尝试在 Win7 VM 中禁用防火墙，很可能它会阻止访问服务。

# node.js - 使用 NGINX 代理的多个 Node.js 服务器

> ID：14993833
> 
> 赞同：1
> 
> 时间：2013-02-21T02:58:47.113
> 
> 标签：node.js, nginx

## 目标：

在不同的文档根目录下使用相互独立的多个实时 node.js 服务器。

## 使用 NGINX

```
server {
    server_name .lolwut1.com;
    root /var/www/html/lolwut1;
    # proxy pass to nodejs
    location / {
        proxy_pass    http://127.0.0.1:5001/;
    }
}

server {
    server_name .lolwut2.com;
    root /var/www/html/lolwut2;
    # proxy pass to nodejs
    location / {
        proxy_pass    http://127.0.0.1:5002/;
    }
} 
```

## /var/www/html/lolwut1/app.js

```
var http = require('http');
var server = http.createServer(function (request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.end("lolwut1\n");
});
server.listen(5001); 
```

## /var/www/html/lolwut2/app.js

```
var http = require('http');
var server = http.createServer(function (request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.end("lolwut2\n");
});
server.listen(5002); 
```

## 所以当我...

`node app.js`在`/var/www/html/lolwut1/app.js`和打`lolwut1.com`我都很好。

## 问题：

1.  但是现在如果我想启动第二个节点服务器怎么办？
2.  这是一种不好的方法吗？...我想错了吗？
3.  [将带有`connect.vhost`指令的 node.js 用作路由器而不是 NGINX 的优点/缺点是什么？](https://stackoverflow.com/questions/14994413/vhost-using-node-js-connect-vhost-directive-vs-nginx-proxy-pass)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:53:01.027

1.  [永远](https://github.com/nodejitsu/forever)使用来启动和停止您的节点应用程序。
2.  你做对了！这种方法对我来说很有效。
3.  **连接vhost 优点：**不必安装和配置nginx。整个堆栈是 node.js。

    **Nginx 优势：** Nginx 是成熟稳定的 Web 服务器。它不太可能崩溃或表现出奇怪的行为。它还可以托管您的静态站点、PHP 站点等。

    如果是我，除非我需要 Nginx 的某些特定功能，否则我会选择 Connect vhost 或[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)以获得 all-node.js 堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:53:19.823

> 但是现在如果我想启动第二个节点服务器怎么办？这是一个不好的方法吗？...

当您 cd 到`/var/www/html/lolwut2/`并运行时`node app.js`，这应该会在端口 5002 上启动第二个服务器，并且 lolwut2.com 应该可以工作。

> 我在想这个错误的方式吗？

如果您有足够的内存和充足的 CPU 功率，那么这是在同一台服务器上运行多个节点应用程序的有效方法。`upstream`这也是在同一台机器上扩展单个节点应用程序以通过运行多个节点并使用指令来利用多个内核的好方法（如这里[https://serverfault.com/questions/179247/can-nginx-round -robin-to-a-server-list-on-different-ports](https://serverfault.com/questions/179247/can-nginx-round-robin-to-a-server-list-on-different-ports) )

# google-drive-api - 如何在 Drive 中批量 ACL 请求

> ID：14993834
> 
> 赞同：0
> 
> 时间：2013-02-21T02:58:58.047
> 
> 标签：google-drive-api

**Document List API**允许您[批量处理 ACL 请求](https://developers.google.com/google-apps/documents-list/#batching_acl_requests)以节省带宽。

**使用Drive API**是否有类似的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:27:20.980

新 API 中有一个通用批处理解决方案，并受 Drive 支持。请参阅[是否可以使用 Drive SDK 进行批量调用？](https://stackoverflow.com/questions/14999355/is-there-a-way-to-make-batched-calls-using-the-drive-sdk)有关如何使用 Python 批处理请求的示例。大多数（如果不是所有）当前 API 客户端都支持批处理。

# dynamics-crm-2011 - CRM 2011 (rollup 12) 在非 IE 浏览器中显示移动视图而不是普通视图

> ID：14993838
> 
> 赞同：4
> 
> 时间：2013-02-21T02:59:03.270
> 
> 标签：dynamics-crm-2011

我最近做了一个我一直在开发的 CRM 解决方案的演示，但是当我尝试在我的 Firefox 和 chrome 的 MAC 上显示它时，它出现了移动界面。该实例将永远不会在移动设备上使用，因此我想为整个站点禁用此功能...我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T14:19:20.457

我在 firefox 上打开 crm 时遇到了同样的问题（在资源管理器和 chrome 上没问题），我假设您使用的是 roll up 12，因为只有从这个 rollup 中，除了 Internet Explorer 集成之外，您还有其他浏览器。

我的问题是，由于某种原因，它打开了“default.aspx”页面，该页面打开了这个 url：

```
https://mydomain:444/m/default.aspx 
```

当正确的地址应该是：

```
https://mydomain:444/main.aspx# 
```

我也猜你已经设置了ADFS ..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-14T09:01:07.673

我遇到了同样的问题，对我有帮助的是将该站点添加到 Internet Explorer 的兼容性视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-09T14:06:45.273

如果您使用的是 IE 11，请尝试兼容模式。设置 -> 兼容性视图设置

# c - 为什么我的程序在没有收到任何新输入的情况下循环？

> ID：14993841
> 
> 赞同：2
> 
> 时间：2013-02-21T02:59:20.837
> 
> 标签：c, scanf

我正在努力使我的程序在给出答案后重新开始。一旦我运行它一次，它就不会再次运行。我想让它在用户不必再次启动程序的地方发挥作用。谢谢！

```
#include <stdio.h>
#include <math.h>

int main()
{
    float firstnum, secondnum, answer;
    char function;

    printf("\nHello and welcome to my calculator!\n");                                             //Intro

    start:                                                                                         //Area to loop to when program completes

    printf("\nPlease input the function you would like to use.  These include +, -, *, /.\n");     //Asking for function input

    scanf("%c", &function);                                                                        //Receiving Function Input

    printf("\nNow please input the two variables.\n");                                             //Asking for variables

    scanf("%f", &firstnum);

    scanf("%f", &secondnum);                                                                       //Receiving Input for Variables

    if (function == '+')                                                                           //Doing calculation
    {
            answer = firstnum+secondnum;
    }
    else if (function == '-')
    {
    answer = firstnum-secondnum;
    }
    else if (function == '*')
    {
    answer = firstnum*secondnum;
    }
    else if (function == '/')
    {
    answer = firstnum/secondnum;
    }
    else
    {
            printf("Sorry that was an incorrect function.  The correct inputs are +, -, *, /.");       //If they don't follow the directions
    }

    printf("Your answer is %f \n", answer);                                                        //Answer

    goto start;                                                                                    //Loop

return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:03:46.933

这是 [enter] 键。您的第一个`scanf`是读取您按下以终止上一次迭代的回车键。

因此，您需要添加另一个`scanf("%c", &function);`或`getchar();`就在`goto`吃换行符之前。

读取数字时，`scanf`会吃掉任何初始空格；但是在阅读字符时，它不会。它为您提供流中的下一个字节。

* * *

~~也许更好的方法是告诉 `scanf` 在哪里可以期待所有的换行符。这样你就不需要看起来没有做任何事情但没有评论的*奇怪*神秘线（！）；因为当你几个月后再次使用此代码时，这会导致问题。~~

```
//scanf("%c\n", &function); /* read a character followed by newline DOESN'T WORK */
...
//scanf("%f\n", &secondnum); /* read a number followed by newline DOESN'T WORK */ 
```

~~这样，*尾随*的换行符就会被消耗掉。我认为这是更直观的行为（从用户端）。~~ 没有。不工作。希望是这样，因为我看起来不那么愚蠢。

* * *

我对`goto`. 很高兴见到一位老朋友。如果有的话，这是对它的适当使用。它完全等同于`while`形式。因此，您当然应该知道，*大多数人*会更喜欢看`while(1)`，因为它比`label:`. 但是对于比屏幕小的函数中的无限循环，为什么不呢？玩得开心。没有婴儿海豹会受到伤害。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:11:39.877

这就是你使用循环的原因。（并尽量不要为此使用 goto ）。

```
#include <stdio.h>
#include <math.h>

int main() {

    float firstnum, secondnum, answer;
    char function, buffer[2];

    while(1) {      

        printf("\nHello and welcome to my calculator!\n");                                             

        printf("\nPlease input the function you would like to use.  These include +, -, *, /.\n");     
        scanf("%s", &buffer);   
        function = buffer[0];
        printf("\nNow please input the two variables.\n");  
        scanf("%f", &firstnum);
        scanf("%f", &secondnum);
        if (function == '+') answer = firstnum+secondnum;
        else if (function == '-') answer = firstnum-secondnum;
        else if (function == '*') answer = firstnum*secondnum;
        else if (function == '/') answer = firstnum/secondnum;
        else printf("Sorry that was an incorrect function.  The correct inputs are +, -, *, /.");    

        printf("Your answer is %f \n", answer);                                                               
        } 

     return 0;
     } 
```

这应该进入一个无限循环，所以使用来自用户的输入到`break;`循环来退出程序

* * *

注意：我已将 scanf %c 替换为 %s ，表示输入字符串并使用缓冲区。

```
 scanf("%s",&buffer); function = buffer[0]; 
```

*（根据评论中的讨论更新）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:09:26.703

关于 scanf 的一个“最佳实践”是检查它的返回值。关于 scanf 的返回值，我建议仔细阅读[这个 scanf 手册](http://pubs.opengroup.org/onlinepubs/007904975/functions/scanf.html)并回答以下问题：

1.  int x = scanf("%d", &foo); 如果我输入“fubar\n”作为输入，你认为 x 会是什么？
2.  你认为“fubar\n”中的“f”会去哪里？
3.  如果它保留在标准输入中，你会期待第二个 scanf("%d", &foo); 要成功？
4.  int x = scanf("%d", &foo); 如果我在 Windows 上运行此代码并按 CTRL+Z 将 EOF 发送到标准输入，您认为 x 会是什么？
5.  如果 x 小于 1，使用 foo 是否安全？为什么不？
6.  int x = scanf("%d %d", &foo, &bar); 如果我输入“123 456\n”作为输入，您期望 x 是什么？
7.  你认为 '\n' 仍然会在标准输入上吗？scanf("%c", &char_variable); 之后 char_variable 会保持什么值？

除了使用管道和重定向来重定向来自其他程序和文件的输入之外，EOF 在 Windows 中可以通过 CTRL+Z 发送，在 Linux 和朋友中可以通过 CTRL+D 发送。

通过使用类似`int function; for (function = getchar(); function >= 0 && isspace(function); function = getchar()); assert(function >= 0);`or的代码，`char function; assert(scanf("%*[ \n]%c", &function) == 1);`您可以在分配给函数之前丢弃前导空格。

# knockout.js - 禁用基于其他输入的输入 Knockoutjs

> ID：14993845
> 
> 赞同：1
> 
> 时间：2013-02-21T03:00:33.117
> 
> 标签：knockout.js

我正在尝试设置一个可以禁用输入的淘汰赛 observable，如果其他两个输入不在 1 到 30 之间。现在当我在 jsFiddle 中运行代码时，我的输入被禁用。不幸的是，我永远无法重新启用输入。这是[jsFiddle](http://jsfiddle.net/SNv6n/)上的代码 感谢您的帮助。

HTML

```
<!-- This is a *view* - HTML markup that defines the appearance of your
UI -->
<p>Alcohol Days:
    <input data-bind="value: alcoholDays" />
</p>
<p>Alcohol 5+ Days:
    <input data-bind="value: alcoholFivePlusDays" />
</p>
<p>Alcohol 4- Days:
    <input data-bind="value: alcoholFourLessDays" />
</p>
<p>Drug Days:
    <input data-bind="value: drugDays" />
</p>
<p>Both Days:
    <input data-bind="value: bothDays, enable: enableBothDays" />
</p>
<p>Enable Both Days: <strong data-bind="text: enableBothDays"></strong>

</p>
<p>Alcohol Days: <strong data-bind="text: alcoholDays"></strong>

</p>
<p>Drug Days: <strong data-bind="text: drugDays"></strong>

</p>
<button data-bind="click: capitalizeLastName">Go caps</button> 
```

javascript

```
// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function AppViewModel() {

    var self = this;

    self.alcoholDays = ko.observable("");
    self.alcoholFivePlusDays = ko.observable("");
    self.alcoholFourLessDays = ko.observable("");
    self.drugDays = ko.observable("");
    self.bothDays = ko.observable("");

    self.enableBothDays = ko.computed(function () {

        if ((parseInt(self.alcoholDays) > 0 && parseInt(self.alcoholDays) <= 30) && (parseInt(self.drugDays) > 0 && parseInt(self.drugDays) <= 30)) {
            return true;
        } else {
            return false;
        }

    }, self);

}

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

韦德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:59:53.220

[嗨检查这个小提琴](http://jsfiddle.net/naveenkumarm/rJ6bS/) **我解决了这个问题**。

1.) 清除小提琴中的绑定错误

2.) 重构计算 observable

```
 self.enableBothDays = ko.computed({
    read: function() {
        alert('In');
        var alcDays = Number(self.alcoholDays());
        var drgDays = Number(self.drugDays());
        alert(alcDays+','+drgDays);
        var temp = false;
  if (alcDays > 0 && alcDays <= 30 && drgDays > 0 && drgDays <= 30) {
        temp = true;
    } else {
        temp = false;
    }
        alert(temp);
        return temp;
}
}); 
```

3.) 改变启用条件

[小提琴..](http://jsfiddle.net/naveenkumarm/rJ6bS/)

**将其标记为答案**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:09:48.113

**固定小提琴** [http://jsfiddle.net/SNv6n/20/](http://jsfiddle.net/SNv6n/20/)

您调用的是 self.alcoholDays 而不是 self.alcoholDays()。如果您将括号添加到计算中的那些调用并添加函数“capitalizeLastName”，它就可以工作。

```
self.capitalizeLastName = function () {
     alert('TODO');   
}
self.enableBothDays = ko.computed(function () {

    if ((parseInt(self.alcoholDays()) > 0 && parseInt(self.alcoholDays()) <= 30) && (parseInt(self.drugDays()) > 0 && parseInt(self.drugDays()) <= 30)) {
        return true;
    } else {
        return false;
    }

}, self); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:15:32.487

使用此启用：enableBothDays()== true 或启用：enableBothDays== true

# c++ - 为什么是 'ios::operator ！和“ios::operator void*”而不是“ios::operator bool”？

> ID：14993848
> 
> 赞同：0
> 
> 时间：2013-02-21T03:00:54.283
> 
> 标签：c++, boolean, operator-overloading, type-conversion, iostream

C++ 标准 I/O 流类`ios`定义了两个重载运算符`!`，`void*`用于检查流的状态。

例如：

```
ifstream fin("hello.txt");
if (fin)  {} // ios::operator void*() is called
if (!fin) {} // ios::operator !() is called 
```

但是，我认为两个重载的运算符是过度的。为什么不只是一个重载函数`operator bool()`？

`bool`这可能是因为 I/O 流类在成为 C++ 关键字之一之前被广泛使用。换句话说，将它们保留在那里只是为了向后兼容。

如果只是为了向后兼容，为什么不将它们标记为已弃用？如果不是为了向后兼容，那又是为了什么？

# java - 是类 Java中的不可变，也称为Class HashMap 的安全密钥？

> ID：14993854
> 
> 赞同：1
> 
> 时间：2013-02-21T03:01:26.127
> 
> 标签：java, hashmap, immutability, hashcode, java.lang.class

我已经在网上潜伏了一段时间，但还没有找到答案。有人`Class<T>`在这里提到 SO（我认为）是关键，但我再也找不到该帖子了。无论如何，这个问题应该得到一个正确的答案（如果上面有一千个帖子线程道歉）。

是`Class<T>`不可变的吗？它可以安全有效地用作关键（不断`hashCode()`执行）吗？

我的猜测是肯定的，因为类定义在运行时不会改变。但我不太确定...谢谢！

编辑：谈论Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:23:55.307

Java 中的不可变对象是不能通过任何正常（非反射）执行路径更改其内部状态的对象。这意味着：

*   该类没有定义改变其内部状态的可访问方法
*   该类的设计方式是防止子类改变其内部状态

Java`Class`类满足以下要求：

*   它没有提供改变其内部状态的方法。
*   类本身是`final`，并且不能被子类化。

当然，实际的类定义是由 JVM 通过类加载器加载的，并且一旦定义，就会在该 JVM 的生命周期内设置并且不会更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T05:15:41.923

1）我不确定它是否可以称为不可变，至少在经典意义上，看看

```
public final class Class<T>
    ...
    native void setSigners(Object[] signers);
    ...
    native void setProtectionDomain0(java.security.ProtectionDomain pd);
    ...
    void setAnnotationType(AnnotationType type) 
    ... 
```

2）我们可以在HashMap中使用它，Class是一个单例，它的hashCode和equals是基于它的身份的，需要注意的是一个类在不同的类加载器中会有不同的实例，所以MyClass.class from classloader1 != MyClass.class from类加载器2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:49:08.987

的`hashCode()`方法`Class`没有被覆盖，但是 JDK 指定了关于该`getClass()`方法的以下内容：

```
public final Class<?> getClass() 
```

返回此 Object 的运行时类。**返回的 Class 对象是被`static synchronized`表示类的方法锁定的对象。**

实际的结果类型是删除被调用的表达式的静态类型的`Class<? extends |X|>`地方。例如，此代码片段中不需要强制转换：`|X|``getClass`

```
Number n = 0;
Class<? extends Number> c = n.getClass(); 
```

因此，对于任何实例`T obj`，和返回相同的（不可变的）对象。`T obj2``obj.getClass()``obj2.getClass()``Class<T>`

`LinkedList<T> l1`但是，请注意类型擦除：对于 a或 a而言，情况并非如此`LinkedList<U> l2`，因为两者都将返回类型擦除类`Class<LinkedList>`，而不是`Class<LinkedList<T>>`特定于 的a `T`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T04:04:26.760

是的（假设类加载器表现良好，即 ir`Class`在给定相同名称时总是返回相同的对象。）

The `hashCode` of a `Class` instance is its object identity (`Class` do not redefine `hashcode`), which remains constant for the lifetime of the object. The [JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.2) states that *one must not unload a class or interface while its loader is potentially reachable* (in order to avoid classes to be reloaded, which would not be transparent to the application, because the object identity of the `Class` object would be different).

Note that classes of the same name, but loaded by different class loaders, have different hash codes. Usually this should not be an issue since they will be [different run-time types](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.4), and their instances will not be assignment-compatible.

# android - Android ADB 设备离线，无法发出命令

> ID：14993855
> 
> 赞同：352
> 
> 时间：2013-02-21T03:01:29.557
> 
> 标签：android, adb, android-2.2-froyo

我无法再通过命令行或在[Eclipse中使用](http://en.wikipedia.org/wiki/Eclipse_%28software%29)[ADB](http://en.wikipedia.org/wiki/Android_Debug_Bridge)连接到我的设备。

运行命令

```
adb devices 
```

返回设备名称，但它说它处于脱机状态。

我尝试过的事情。

1.  切换 Android 调试模式
2.  重新安装了 Google USB 驱动程序
3.  将操作系统恢复到以前工作的备份（[CyanogenMod](http://en.wikipedia.org/wiki/CyanogenMod)）
4.  交换了 USB 线
5.  多次重启手机/电脑
6.  更新了 Android SDK

我真的不知道发生了什么。任何你认为我可以尝试的东西，我都在听。

**需要明确的是，如果您遇到同样的问题，则问题可能是一个过时的 SDK。从 4.2.2 开始，有一项安全功能要求您确认连接设备的 RSA 指纹。打开 SDK 管理器并更新工具！然后重新启动。**

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-03-12T17:51:17.197

跑完试`adb devices`跑`adb kill-server`。之后弹出安全问题。为我工作。

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2013-02-21T11:01:55.840

在我的[Nexus 7](https://en.wikipedia.org/wiki/Nexus_7_%282013_version%29)和[Galaxy Nexus](https://en.wikipedia.org/wiki/Galaxy_Nexus)更新到 Android 4.2.2 后，我今天遇到了同样的问题。

为我解决的问题是将 SDK 平台工具升级到 r16.0.1。[对我来说，这个版本没有显示在我的 SDK 管理器中，所以我直接从http://dl.google.com/android/repository/platform-tools_r16.0.1-windows.zip](http://dl.google.com/android/repository/platform-tools_r16.0.1-windows.zip)将其拉下来。

然后，您需要重命名`platform-tools`目录并将其解压缩为`android-sdk-windows/platform-tools`. 使用 SDK 管理器，在此之前我还更新到了最新的 sdk-tools。

如果您的整个 Eclipse 和[ADT](http://developer.android.com/guide/developing/tools/adt.html)都是古老的，您可能还需要更新它们，但我不需要。

注意：您可能需要运行 SDK Manager 两次（一次自行更新）才能看到最新的软件包。

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2013-05-30T07:52:59.010

当您使用 Wi-Fi 模式连接到设备时（例如在 Android Studio 或控制台中运行），它似乎也经常发生`adb tcpip 5555`。

修理：

1.  断开 USB 连接 - 如果您通过 Wi-Fi 连接，则关闭设备的 Wi-Fi。
2.  关闭 Android Studio/Eclipse/其他 IDE。
3.  运行`adb kill-server`以确保 adb 未运行。
4.  重新启动您的 Android 设备。
5.  设备重启后，通过 USB 连接并运行`adb devices`. 这应该启动 ADB 守护进程。您的设备现在应该再次在线。

* * *

## 回答 #4

> 赞同：62
> 
> 时间：2013-02-27T22:41:58.610

我在运行 4.2.2 OTA 更新的 Nexus 7 上遇到了同样的问题。我几乎可以肯定我在更新后通过 USB 和 Wi-Fi 建立了 ADB 连接，直到它停止工作。为了解决这个问题，我使用以下方法更新了我的 SDK：

```
android update sdk --no-ui 
```

现在我的开发工具是：

*   SDK 版本 16.0.2
*   SDK 工具 21.1 版
*   SDK API 17，第 2 版

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2013-08-04T00:55:15.783

我不能强调切换 USB 端口是关键。通常前面板 USB 端口可能有缺陷。

* * *

## 回答 #6

> 赞同：40
> 
> 时间：2013-03-12T03:13:50.080

对于任何想了解 4.2.2 的人，手机上会出现一个安全问题，要求使用 PC 进行 RSA 验证。确保您的工具已更新，并且您通过验证相关设备上的安全问题来允许 PC 访问。这为我修好了。

和往常一样，验证您是否在开发人员选项中启用了调试；）

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2016-05-04T14:14:08.280

尝试关闭 USB 调试一次，然后重新启用它，然后将您的设备与系统连接：[link](https://diptimayapatra.wordpress.com/2013/09/08/android-device-is-offline-but-connected-for-usb-debugging/)

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2014-03-03T17:44:31.287

**多个 adb.exe 文件？**

**从C:/Windows/**删除 OLD adb.exe 的副本后，我的问题得到了解决。我不知道*adb.exe*的副本是如何到达 C:\Windows\ 的？

**当我从android-sdk/platform-tools/**启动 adb.exe 时，检测没有问题。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2013-03-28T16:11:07.110

我遇到了这个问题，其他答案都没有帮助。在更新 SDK 并安装 4.2.2 的 API 之后，需要运行的是：

```
android update adb 
```

我遇到的另一个问题是我试图通过 Wi-Fi 连接 ADB，这是我唯一的选择，因为我 Mac 上的 USB 端口真的很麻烦。不幸的是，ADB over Wi-Fi 没有显示 4.2.2 中的安全问题，因此您需要找到可以工作的 USB 电缆并通过 USB 连接至少一次以接受安全问题，但在您这样做一次之后，您可以通过 Wi-Fi 连接。

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2013-09-29T07:23:33.423

如果您的设备通常通过 USB 连接，但突然停止工作，尤其是在 USB 电缆断开并重新连接后，请在执行其他答案中提到的一些更激烈的事情之前尝试以下非侵入性步骤：

```
adb kill-server
adb start-server
adb devices 
```

如果您的设备旁边列出了“设备”，那么您就可以恢复营业了。

如果您的设备旁边列出了“离线”，请尝试重新启动设备。设备上的 ADB 守护程序有时会挂起。当我在[LogCat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)运行时断开电缆以及从通过 Wi-Fi 或以太网连接切换回来后，我注意到这一点更多。

如果您的设备未列出，那么您应该尝试其他答案中的解决方案，从尝试不同的 USB 电缆和端口开始。那些便宜的电缆可能会变坏。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2013-07-09T13:13:22.083

请务必在更新 SDK 工具后`adb`从您的文件夹中使用。`platform-tools`

在我意识到我使用的是[复制](http://en.wikipedia.org/wiki/Android_Debug_Bridge)到`/usr/bin`.

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2019-05-06T07:33:22.383

我遇到了同样的问题，这对我来说是固定的。首先通过usb连接你的手机，然后确保你检查你的手机IP，它在设置>>关于手机>>状态下运行以下命令。

```
 adb kill-server
adb start-server
adb tcpip 5555 //it resets port so put port you want to connect
adb connect 192.168.1.30:5555 //ip:port of your mobile to connect
adb devices //you will be connected over wifi 

```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2014-08-25T02:23:00.220

有时这可能是由于 adb 服务器错误（我认为）而发生的。它总是说

```
"device-name is offline" from adb devices command. 
```

只需杀死服务器并重新开始。它对我有用。

```
"adb kill-server"
"adb start-server" 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2015-06-15T10:08:29.687

我使用`adb connect <device_ip>`并且没有其他解决方案有效，因为我的问题在另一边。在我需要的设备上`stop adbd`并重新启动它`start adbd`。设备现在再次“在线”。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2013-05-12T15:18:24.503

我尝试了 dturvene 和所有其他解决方案，但没有奏效。我需要多一步。

运行这些命令

1.  `adb kill-server`
2.  `android update sdk --no-ui`
3.  `adb start-server`

要验证它是否有效，请在命令之前和之后运行“adb version”，并确保它是最新的。该`adb kill-server`命令的原因是它很可能正在运行，并且在运行时无法更新，因此您必须先将其杀死。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2013-07-25T11:13:42.017

对我来说没有任何效果。我花了大约 12 个小时不断地在互联网上搜索并尝试对其他有类似问题的人有用的解决方案。

最后我只是通过局域网做亚行的事情。该设置就在 USB 调试设置旁边，在 ADB 中可以使用“adb connect [IPADDRESS]:[PORT]”激活它。我手机上的端口是 5555。

我希望这可以帮助某人重新开始工作，而不必处理不断的缺点。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2014-07-30T11:41:17.773

这种方法对我有用：

1.  `adb kill-server`
2.  在设备管理器中禁用离线设备（见下图）
3.  在设备管理器中启用设备
4.  `adb start-server`

* * *

设备管理器，“查看”菜单，“按连接的设备”：

![在此处输入图像描述](../Images/94a93f5db26829877a4bff52854c2140.png)

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2016-07-02T14:33:55.823

安装了最新的android sdk。
更改了设备的 USB 端口。
从 MTP -> Charge only -> MTP 更改。
有效。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2013-07-08T06:04:13.753

我最初遇到了同样的问题（使用从[GitHub](http://en.wikipedia.org/wiki/GitHub)下载的 ADB/fastboot ），但我最终让它工作了。什么对我有用：

*   安卓 SDK。亚行版本：1.0.31
*   使用前置 USB 端口（[MacBook Pro](http://en.wikipedia.org/wiki/MacBook_Pro) 15"）
*   启用开发选项和 USB 调试后重新启动手机（通过 7 次点击设置 > 关于手机 > 构建）。
*   如果未列出任何设备，则终止 adb 服务器 (adb kill-server)
*   调试图标应该在手机上可见。
*   请务必解锁锁定屏幕以检查 RSA 指纹确认对话框。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2013-06-13T19:33:16.920

我认为最好的方法是从设备管理器禁用然后启用设备并运行 adb devices 命令。

1.  转到开始选项卡并右键单击*计算机*
2.  从下拉菜单中，单击*管理*
3.  在计算机管理屏幕中，单击设备管理器
4.  在右侧窗格中，展开便携式设备以找到您的设备
5.  右键单击您的设备名称，然后单击下拉菜单上的禁用
6.  当它被禁用时，除了启用它之外，重复步骤 5。

设备将重新联机。它更快。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2013-06-27T09:48:09.883

如果您之前已经授权了您的 PC 的 RSA 指纹并尝试了 adb kill-server 等但没有成功，您的问题可能只是您在锁定时尝试连接它。尝试按下屏幕开启按钮并输入您的模式 - 这为我修复了它。

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2013-08-16T08:13:07.690

对于 ADB 连接不稳定的人，如果他们在 Mac 上并安装了[Android File Transfer](http://www.android.com/filetransfer/)的另一种可能性：我发现文件传输干扰了我的 ADB 连接，导致它间歇性地停止工作。

终止`Android File Transfer Agent.app`寻找连接到 Mac 的兼容设备（例如，Nexus 7）的过程可以治愈我的脆弱。

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2014-08-02T07:08:00.200

由于没有人回答我的情况：您可能无法访问 ~/.android/adbkey 文件。如果您最初使用 sudo 启动 adb，它将生成一个公钥对，将其写入 ~/.android/adbkey.pub 和 ~/android/adbkey。当然，私钥是 chmod 600 - 仅对您的主目录中的 root 用户可读。随后以普通用户身份启动 adb 将无法访问私钥文件，这反过来会以“设备脱机”静默失败。

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2015-07-13T12:08:34.707

在 Mac 上为我解决的问题是更新`adb`到最新版本（1.0.32）。现在我可以再次在线看到我的设备

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2018-07-03T10:02:15.113

设备报离线的原因是adb连接不上。开发环境中的 adb 可执行文件创建与受控设备的连接（套接字）。设备有一个服务（守护进程）来监听这个通信。该守护程序称为 adbd（如 adbdaemon）。当在设备上启用 adb 时，实际上会启动此守护进程，因此可以与设备建立通信。

当设备被 adb 报告为脱机时，是因为守护程序不再运行或处于不接受连接的状态。如果网络在活动（网络）连接上出现故障，通常会发生这种情况。

我可以解决此问题的唯一方法是重新启动设备。可以通过许多其他方式来修复离线状态，但重新启动设备始终有效。

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2019-09-16T07:10:12.373

当我面临与以下相同的问题时：

1.  通过在命令提示符下发出*adb kill-server*和*adb start-server来重新启动 adb*
2.  在手机上禁用和重新启用 USB 调试
3.  如果还是不行就重启手机。这些步骤解决了我 99% 的问题。

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2021-03-22T13:10:23.600

我尝试了上述所有解决方案。大多数情况下， adb kill-server 会解决这个问题。这次，问题出在 USB 电缆上。包装精美的劣质电缆不起作用。

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2021-07-07T17:05:17.800

我在尝试使用 Android 11 中内置的“无线 ADB”功能进行连接时偶然发现了这个问题。

我无法让它正确连接。始终显示为“离线”。

我所做的是：

首先断开所有 ADB 设备，这是一个很好的措施：

```
adb disconnect 
```

然后在开发人员选项中，进入“无线 ADB”功能，如果你还没有的话。转到“使用 PIN 码配对”或类似内容。在那里，将在对话框中弹出一个**IP 和端口，以及一个 pin。**使用以下方式连接到手机：

```
adb pair 192.168.2.xxx:42838 # Put the IP and port of that dialog in this way 
```

（请注意，主窗口和 PIN 弹出窗口上的**端口*****不***一样）

您的 (PC) ADB 将提示您输入密码。键入它并按 ENTER。

完成后，手机上的 PIN 弹出窗口*应该*会消失，并且计算机名称应该会显示在主窗口的受信任设备列表中。

如果你走到这一步，下一步肯定会奏效。现在尝试使用以下方式连接到您的手机：

```
adb connect 192.168.2.xxx:53548 # This time use the port shown in the main window! 
```

它应该连接，你很高兴。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2013-05-07T10:30:38.700

我更新了很多次，直到我不能再更新了，但我的屏幕上从来没有提示过；我只是让设备离线。

我的问题是我正在从与实际更新的目录不同的目录运行 ADB 命令。

ADB exe 的正确更新目录是：

```
C:\Program Files (x86)\Android\android-sdk\platform-tools\ 
```

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2013-08-03T05:57:43.367

这只是因为您的计算机没有正确的驱动程序。要解决这个问题：

1.  下载并解压 Android SDK

2.  转到设备管理器（右键单击计算机->属性->设备管理器

3.  在右侧窗格中展开便携式设备以找到您的设备

4.  右键单击您的设备名称，然后单击更新驱动程序软件

5.  浏览我的电脑以获取驱动程序软件

6.  在步骤 1 中浏览到您的 Android SDK 文件夹。

7.  接下来，你就完成了

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2013-11-13T05:19:31.977

尝试如下重启 adb 服务器：

```
adb kill-server

adb start-server 
```

我也遇到了和你一样的问题。重新启动 adb 服务器将解决此问题。

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2014-01-02T22:54:40.723

重启设备。我尝试了此处列出的所有方法以使我的 HTC 手机（运行 Android 4.0.3）正常工作，但`adb devices`一直说它处于离线状态。重启手机后，终于上线了。这里的其他一些建议可能有助于手机被识别，但是在您尝试它们的过程中进行几次重启肯定不会受到伤害。

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2014-06-13T05:46:41.437

迟到了，但我发现最简单的方法就是去 DDMS 并按照图片所示进行操作......

![在此处输入图像描述](../Images/acd5d8c9e8e85073ed12078327c535ea.png)

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2016-04-07T00:21:44.143

尝试

```
adb usb 
```

我将连接方法更改为`tcpip`然后我想如果我杀死服务器并启动它，它将重置连接方法但它不会

这就是为什么以前的答案都不适用于我的情况

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2016-11-01T03:24:23.830

我很惊讶地发现我的解决方案没有在这里列出。

对我来说，我有一台 LG G3。手机必须使用 LG 的驱动程序连接。我去了

**设备管理器**>**卸载 MTP 驱动程序**

并立即 adb 在字面上没有 1 秒的时间工作。

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2018-05-31T20:51:51.950

为我工作：一开始它有效，一段时间后离线。我做了以下操作： `adb kill-server` `adb start-server`。再次用 USB 将手机插入 PC `adb devices`，提供空列表的输出。 `adb tcpip 5555`,`adb connect <mobile wifi ip address>` 然后又上线了。

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2021-02-28T00:03:08.560

最适合我的是：

1.  拔下 USB 并重新插入。

2.  使用`adb devices`后`adb kill-server`

3.  有时，切换到计算机上的其他 USB 端口可以解决问题。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2013-02-22T01:48:43.080

在尝试了两次之后，我将手机软件回滚到稳定版本，它终于可以工作了。我正在运行 Cyanogen nightlies。无论如何，此线程中发布的内容应该可以帮助遇到此问题的任何人。

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2013-03-07T12:13:45.307

我也遇到了这个问题。我更新了 Android SDK 管理器中的所有内容，使用设备管理器卸载了我的设备，现在它可以正常工作了。一路上我发出了一些“kill-server”和“start-server”......

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2013-03-13T21:07:13.067

对我来说，事实证明我有两个不同的 SDK 安装。当我启动 Android SDK Manager 并从 Eclipse 更新工具时，SDK 路径指向一个位置，但命令行上使用的 PATH 环境变量指向另一个位置，该位置具有较旧版本的 SDK，始终显示4.2.2 设备处于离线状态。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2014-02-12T08:03:43.083

在 Linux 中：删除目录`~/.android`并重新启动[ADB](http://en.wikipedia.org/wiki/Android_Debug_Bridge)。

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2017-12-27T01:35:11.113

这很可能是由于过时的 adb 进程造成的。这可能是由于糟糕的开发人员将 adb、dll 打包并将它们安装在 Windows 的根目录中。如 C:\Windows\adb.exe

打开任务管理器 kill adb.exe，找到最有可能在 root:\Windows 中的 adb.exe 并将其删除。然后使用最新的 SDK

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2019-05-23T23:23:21.950

这是一个蹩脚的案例，但以防万一……我有一台带电源/usb 集线器的 mac 笔记本电脑，但它只有几个 USB 端口，所以我挂了另一个有源 USB 集线器。似乎/似乎工作得很好，但由于某种原因，我的 android 设备无法保持连接。插入它，它显示“设备”，但尝试通过 adb 执行任何操作并得到错误并且状态变为“离线”。把我逼疯了。然后我决定尝试将 Android 设备直接插入第一个集线器......立即稳定地工作。我一直在使用两个集线器设置，但突然间它就停止了工作。希望它可以帮助某人！

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2020-03-24T13:21:26.670

这些答案都不适合我。设备始终处于离线状态。真正解决它的只是耐心！

即，在命令自动修复问题 100% 的时间`adb devices`后，只需等待一分钟即可发出。`adb connect`

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2020-07-01T10:52:06.277

以下是您可以通过命令行执行的步骤。无需访问设备。

第 1 步：执行“adb devices -l”，您将看到离线设备。现在记下 usb 后面的数字： Example=> usb: **1-1.4.2**

第 2 步：echo '1-1.4.2' |sudo tee /sys/bus/usb/drivers/usb/unbind

第 3 步：echo '1-1.4.2' |sudo tee /sys/bus/usb/drivers/usb/bind

第 4 步：选中“adb devices -l”。该设备应该在线。

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2020-09-30T05:52:31.337

我有一个不可靠的 USB 连接，所以我试图让 wifi 连接正常。基本上在这里尝试了所有东西，但有一件事我直到最后才尝试，突然它起作用了！因此，如果您最终陷入困境，请尝试以下步骤：

```
 1\. Connect with USB cord
 2\. adb devices
List of devices attached
HT85X1A00342    device
10.0.0.43:5555  offline

 3\. adb usb
restarting in USB mode

 4\. adb reconnect
reconnecting HT85X1A00342 [device]

 5\. adb tcpip 5555
restarting in TCP mode port: 5555

 6\. adb devices
List of devices attached

 7\. adb connect 10.0.0.43:5555
connected to 10.0.0.43:5555 
```

甜的！我不知道是否强制它重新启动 USB 模式，然后依次使用 TCP/IP，或者只是最后三个命令，但显然它开始工作了。我还发现有一个开发人员选项可以在 Wifi 上启用调试，然后你选择你的热点。这也可能会阻止它工作，所以也要检查一下。

祝你好运！

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2020-12-13T05:50:20.730

`adb reconnect offline`- 从设备端踢连接以强制重新连接

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2013-04-16T07:15:58.697

我使用了[ADB](http://en.wikipedia.org/wiki/Android_Debug_Bridge)版本 1.0.29，它可以连接到我的 LG-F160K (JB 4.1.2) 和 Nexus 7 ( [Android 4.2.2 (Jelly Bean)](https://en.wikipedia.org/wiki/Android_version_history#Android_4.2_Jelly_Bean_.28API_level_17.29) )。LG-F160K 使用 ADB 1.0.29，但 Nexus 7 的设备状态始终为“离线”。

我已经从 Google Android 网站下载了 adt-bundle-linux-x86-20130219.zip，我现在可以连接到 Nexus 7。我目前正在使用 ADB 版本 1.0.31。

只需下载最新的 SDK 或更新您的 ADB 实用程序。

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2013-08-15T08:29:21.070

[在我的三星 Galaxy S III上最新的](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III)[CyanogenMod](http://en.wikipedia.org/wiki/CyanogenMod)夜间更新（2013 年 8 月 12 日）之后，我刚刚开始面临同样的问题。

我使用了最上面的答案中建议的[ADB](http://en.wikipedia.org/wiki/Android_Debug_Bridge)二进制文件（由 w. allison 编辑的 hack_on），我的手机上出现提示，要求允许访问我的 PC（它的 RSA 密钥）！！现在工作正常。

下载链接（仅限 ADB、[Fastboot](https://en.wikipedia.org/wiki/Android_software_development#Fastboot)和相关二进制文件）：[https ://dl.google.com/android/repository/platform-tools_r16.0.1-windows.zip](https://dl.google.com/android/repository/platform-tools_r16.0.1-windows.zip)

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2013-08-28T03:36:21.120

在尝试从 Ubuntu在[Galaxy S III上安装](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III)[CyanogenMod时，我遇到了同样的问题。](http://en.wikipedia.org/wiki/CyanogenMod)最后，我简单地将 ZIP 文件复制到外部[SD 卡](http://en.wikipedia.org/wiki/Secure_Digital)，将 SD 卡直接连接到 PC。然后我将卡移回手机，当我重新启动手机时，我可以从 SD 卡安装 CyanogenMod。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2013-10-13T09:00:26.387

其他答案都不适合我。我刚刚在我的[Galaxy S III上升级到](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III)[CyanogenMod](http://en.wikipedia.org/wiki/CyanogenMod) 10.1 (Android 4.2.2) 。对我有用的是在开发人员选项中启用调试（启用，在“关于手机”中的内部版本号上单击七次），然后通过 USB 插入。然后我接受了出现的提示。

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2014-01-10T08:07:56.200

对我来说，是[USB](http://en.wikipedia.org/wiki/USB)电缆没有完全插入插槽。虽然它显示在我的[Nexus 5](https://en.wikipedia.org/wiki/Nexus_5)上充电。

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2014-02-11T18:56:14.640

*只需从Tools* -> *Android*启用/禁用 ADB 集成。这对我有用。我正在使用 Android Studio 测试版。

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2014-03-30T21:34:17.543

不是真正的答案，而是更多地为显然是 CM 的问题做出贡献。我有一台运行 cm-11-20140309 非官方 BR1-ace（稳定版）的 HTC Inspire HD。我可以在更新之前使用 adb，但我从来没有安装 SDK，因为我不需要。我已经尝试了以上所有方法以及更多。

起初我以为我的问题是 MTP 驱动程序，但事实并非如此。安装并更新 SDK 以包含 4.4.2 后，HTC MTP 设备驱动程序在通过 USB 连接时安装正常，但使用新 sdk 安装位置的 adb 仍显示设备在 mtp 和手机上的 ptp 模式下都处于脱机状态，并进行调试的和上。当我禁用 USB 调试时，手机会自动重启，并收到错误消息：

“不幸的是，进程 android.process.media 已停止”

新的CM在开发者选项下有一个选项可以通过WIFI进行调试，所以我也试过了，它只是说无法连接到IP地址和端口。像其他海报一样，我可以ping IP 地址。

我还检查了为 ADB 和应用程序启用 root 访问权限的选项，因为它被设置为仅 APPS 并且当我执行 adb devices 时手机仍然显示离线，并且偶尔会抛出上面显示的相同错误。

编辑：

现在，我的手机强制重启，我重新启用调试，插入并运行 adb devices，最后手机提示我输入 RSA 密钥。出于某种原因，我之前没有收到提示，现在电话正在连接。因此，问题可能是需要在重新启动后将 root 访问权限从仅应用程序切换到应用程序和 adb。

这就是它离线显示的原因：http: [//playingwithsid.blogspot.com/2013/05/android-device-offline-fixing-adb.html](http://playingwithsid.blogspot.com/2013/05/android-device-offline-fixing-adb.html)

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2014-05-06T21:53:05.677

我需要杀死多个 adb 进程（`adb kill-server`＆`adb start-server`仍然留下一个挥之不去的进程。）

$`ps aux | grep adb`

$`killall adb`

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2015-05-12T07:38:54.920

简单分享一下我的情况：

在我的局域网中，所有的安卓板都有相同的 MAC 地址默认值。因此它将通过 DHCP 获得相同的 IP，因为它具有相同的 MAC 地址。

在局域网中，有多个具有相同 IP 的安卓板。adb 可以连接到板子（其中一个），并且可以打开板子的外壳（其中一个），但是在将文件推送到板子或其他操作时会“设备脱机”。

解决方法：改写MAC地址，获取不同的IP。

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2015-08-12T20:05:57.890

这些答案都不适合我，也尝试过无线。我注意到 adb.exe 一直在我的系统进程中运行。右键单击它们，发现 adb 正在从已安装的应用程序（在我的情况下为 Droid Explorer）中自动运行。卸载自动启动 ADB 的应用程序后，我可以终止该进程并看到 adb 不再自行运行。从平台工具运行更新的 adb，一切顺利！希望这可以帮助某人。

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2016-07-27T17:05:20.487

上面的所有东西都试了几个小时。使它工作的事情是在没有启动应用程序的情况下运行 android studio。您仍然可以使用 chrome 对设备进行远程调试。

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2016-10-20T16:10:26.303

就我而言，我在使用第一代 Asus Nexus 7 时遇到了这个问题。我已将日志缓冲区大小从 256K 增加到 4M。一旦我将其恢复为默认值（设置>开发人员设置>记录器缓冲区大小），拔下并重新插入平板电脑，它就可以完美运行。

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2017-12-26T00:10:56.730

禁用您的防病毒软件，重新连接 USB 并检查 adb.exe 是否未移至隔离区。

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2019-10-22T20:42:19.563

好的，这里没有伏都教，没有盲目尝试和（我希望）很好地解释了这个问题的解决方案（很抱歉，我几乎一整天都在谷歌上搜索解决方案，但无济于事）。

首先，让我们了解一下 adb 与设备通信的方式： [https ://android.googlesource.com/platform/system/core/+/master/adb/protocol.txt](https://android.googlesource.com/platform/system/core/+/master/adb/protocol.txt)

小故事：主机 adb 在 5037 上建立服务器，通过 tcp 端口 5555（默认）连接到设备上的 adbd。

这意味着 - 要工作，您的 adb 必须有一条通往本地 5037 和远程 5555 的清晰道路。如果您不能或不想先建立 USB 连接，您可以在设备上设置 adbd（使用设备终端）进行监听使用 USB：

```
setprop service.adb.tcp.port 5555
stop adbd
start adbd 
```

检查`netstat -plant | grep adbd`adbd 是否正在侦听端口 5555（或您选择的任何其他端口）。

现在使用捕获过滤器启动 Wireshark `port 5555`。在您的主机上执行此命令：（`adb connect device_ip:5555`如果您使用的是非标准端口，请替换 5555）。

根据上面的文档，您应该会看到`CNXN`来自**两个**方向的命令！如果你的远端没有回复，`adb devices`会说你的设备是`offline`！一场比赛结束了。`adb devices`不进行任何网络交换，它只是向您显示`adb connect`命令的结果。

我的问题是 - 我一直在使用 NAT 网络并转发 5555 端口的 Virtualbox 内运行 Android。另外，我在端口 5554 上运行了一个模拟器。它没有占用 5555，但是不知何故，这两个干扰并破坏了 Virtualbox 在较低级别的连接，因为我有很多奇怪的重复 ACK 和 RST 在整个接口上飞来飞去。解决这个问题的方法是**选择一个不同的端口**。

如果我错了，请告诉我，但我之前没有看到有人提出这个建议。既没有解释它应该如何工作以及为什么工作。

* * *

## 回答 #62

> 赞同：0
> 
> 时间：2021-01-19T03:07:45.490

我尝试了你能想到的一切。6小时....对于一个**愚蠢**的解决方案。

似乎对我有用的是**关闭笔记本电脑，拔下笔记本电脑，弹出电池，按住电源按钮 10 秒，然后重新启动**。

太疯狂了。但也许它会帮助别人。

注意：我的情况是：一切正常， *devtools*窗口打开并正常工作，并且*所有*3 台设备都脱机了。（无论重新启动 [计算机 + 设备]、安装/卸载驱动程序/adb/android studio、Windows 更新、切换调试选项，都再也没有回来。）

我的理论是发生了某种充电/电源的事情.....

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2021-03-19T20:23:26.733

如果您在通过无线方式连接设备时遇到此问题，请`tcpip`尝试断开设备连接：

`adb disconnect <your_ip_address>:port_number`或者`adb disconnect`

例如

> `adb disconnect 192.168.1.2:5555`
> ***或者***
> `adb disconnect`

不同之处在于第一个将仅断开所需的设备，第二个将断开所有设备。

使用此命令的好处是您不必杀死并重新启动服务器。杀死并重新启动服务器需要将您的设备插入您的计算机，这是最烦人的过程。

* * *

## 回答 #64

> 赞同：-2
> 
> 时间：2020-06-18T07:19:53.933

从设备打开`Developer options`并禁用然后启用`USB debugging`。

* * *

## 回答 #65

> 赞同：-10
> 
> 时间：2013-03-19T20:25:30.520

如果上述任何提示不起作用，请尝试以下步骤来解锁 OEM：

1.  打开命令提示符并设置您的平台工具路径。

2.  输入“adb reboot bootloader”。

3.  然后输入“fastboot oem unlock”。

4.  在一些设备上，这将需要更多时间。请耐心等待@15 分钟。

5.  重启设备

# python - 监听多个扭曲的端点

> ID：14993857
> 
> 赞同：3
> 
> 时间：2013-02-21T03:01:32.870
> 
> 标签：python, twisted

我有多个服务器端点监听不同的端口，使用相同的协议和工厂

我怎么知道哪个先建立了连接？

```
endpoint1 = TCP4ServerEndpoint(reactor, 8007)
endpoint.listen(QOTDFactory())
endpoint2 = TCP4ServerEndpoint(reactor, 8008)
endpoint2.listen(QOTDFactory()) 
```

等等....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:45:46.047

您无法区分，因为您构建的对象完全相同。如果您想区分，请考虑以下内容：

```
endpoint1 = TCP4ServerEndpoint(reactor, 8007)
endpoint.listen(QOTDFactory("tweedledee"))
endpoint2 = TCP4ServerEndpoint(reactor, 8008)
endpoint2.listen(QOTDFactory("tweedledum")) 
```

然后，在 中`QOTDFactory.buildProtocol`，您可以轻松打印出您的工厂是`tweedledee`还是`tweedledum`。

# assembly - MIPS：将寄存器地址复制到另一个寄存器

> ID：14993868
> 
> 赞同：0
> 
> 时间：2013-02-21T03:03:01.900
> 
> 标签：assembly, mips

所以我无法将一个寄存器的地址复制到另一个寄存器。目前我正在这样做：

```
la $a2, $a0 
```

我得到一个语法错误。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T03:46:22.673

MIPS 寄存器没有地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T03:32:36.947

为了将 $ao 的内容视为地址而不是数字，请将其放入 () 中，如下所示：

```
la $a2, ($a0) 
```

您还可以使用移动指令：

```
move $a2, $a0 
```

凯文

# actionscript-3 - 是否可以使用 AS3 或 AS2 在新的 Flash 播放器中打开外部 swf？

> ID：14993871
> 
> 赞同：0
> 
> 时间：2013-02-21T03:03:24.393
> 
> 标签：actionscript-3, flash, actionscript-2

是否可以使用 AS3 或 AS2 在新的 Flash 播放器中打开外部 swf？我一直在到处寻找这个，但我发现的大部分内容是它正在加载到新的浏览器选项卡中，而不是其他 Flash 播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:48:44.390

fscommand(exec) 仅适用于 Windows Projector(exe) 文件，不适用于 SWF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:11:57.863

没有执行新 Flash Player 的功能。

如果你这样想：Flash Player 是访问者计算机中的可执行文件。如果您可以启动 Flash Player，您可以启动任何您想要的可执行文件。这会导致安全问题。

因此，您无法启动新的 Flash Player。

# vb.net - 图片形状不工作

> ID：14993872
> 
> 赞同：0
> 
> 时间：2013-02-21T03:03:26.780
> 
> 标签：vb.net, winforms, image

`Picture shaped`表单时，以下代码不起作用。

```
 Dim Img As New System.Drawing.Bitmap(My.Resources.imgpng)'ImgPng is a resource Image
    ' The color at Pixel(1,1) is rendered as transparent for the complete background.
    Img.MakeTransparent(Img.GetPixel(1, 1))
    Me.BackgroundImage = Img
    Me.TransparencyKey = Img.GetPixel(1, 1) 
```

任何人都可以帮助我更接近吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:10:12.993

我通过此代码将表单背景设置为相同并且它有效：

```
Dim Img As New System.Drawing.Bitmap(My.Resources.imgpng)'ImgPng is a resource Image
' The color at Pixel(1,1) is rendered as transparent for the complete background.
Me.FormBorderStyle = Windows.Forms.FormBorderStyle.None
Dim Color = Img.GetPixel(0, 0)
Me.BackColor = Color
Img.MakeTransparent(Color)
Me.TransparencyKey = Color
Me.BackgroundImage = Img 
```

我使用 (0,0) 作为透明度像素，但这无关紧要，除非你的 (1,1) 是错误的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:15:05.990

谢啦...

```
 Private Sub Form3_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim Img As New System.Drawing.Bitmap(My.Resources.NewImage) 'NewImage is a resource Image
    ' The color at Pixel(1,1) is rendered as transparent for the complete background.
    Me.FormBorderStyle = Windows.Forms.FormBorderStyle.None
    Dim Color = Img.GetPixel(0, 0)
    Me.BackgroundImageLayout = ImageLayout.Stretch ' To Adjust the Image
    Me.BackColor = Drawing.Color.Black
    Img.MakeTransparent(Drawing.Color.Black)
    Me.TransparencyKey = Drawing.Color.Black
    Me.BackgroundImage = Img
End Sub 
```

对于更改，不需要“Img.MakeTransparent(Color)”。尝试获得带有轮廓边框的体面图像以消除不良边缘...

# javascript - 如何设计网页导航菜单以调整页面单独部分中的内容

> ID：14993873
> 
> 赞同：0
> 
> 时间：2013-02-21T03:03:34.163
> 
> 标签：javascript, html, css, menu, navigation

我想创建一个具有 2 列设计的简单网页，使用 HTML / CSS / Javascript / jQuery 的某种组合，其中一列包含带有多个链接的导航菜单，单击链接会更改另一列的内容柱子。现在最好的方法是什么？

很久以前，我学会了用框架来做到这一点，菜单在一个框架中，内容在另一个框架中，菜单项被 form 的锚标签包围`<a href="something.html" target="name-of-content-area">`。我想这种方式仍然可能吗？

有些人建议将菜单和内容区域设置为 div 而不是框架，然后在内容 div 中放置一个 iframe。然后以刚才描述的相同方式完成菜单项链接。

还有一些人建议只使用 div - 不使用框架或 iframe - 并使用 Javascript 更改内容区域中的内容，即锚标记采用类似于`<a href="#" onclick=func>`where func 动态更改内容区域中的内容的形式。

最后，有些人建议只使用 div 并在菜单中使用按钮而不是锚标签，并再次使用附加到按钮的 Javascript 来调整内容区域的内容。

我想我错过了更多选择。是否有普遍接受的现代最佳实践，如果有，它是我列出的其中之一，是哪一个，为什么？如果没有一个最佳实践，那么使用每个替代“好”选项的情况或原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:45:00.890

有多种方法可以做到这一点：

1.  框架
2.  单独的页面，每个页面都包含一个公共导航段
3.  包含多个虚拟页面的单个页面

选项 1 和 2 是不言自明的。2 比 1 的优势在于书签和浏览器历史记录既美观又简单。现在很多人都在转向3。

这是一个简单的 JSFiddle，我作为选项 3 的示例放在一起。它很丑，是的，我没有费心设计任何东西。

[http://jsfiddle.net/sJ6Bj/4/](http://jsfiddle.net/sJ6Bj/4/)

这是HTML：

```
<html>

    <head>
        <title>Two-pane navigation</title>
    </head>

    <body>
        <div id="content">
            <div id="navigation">
                <h1>Navigation</h1>
                <ul>
                    <li><a href="#page1" class="page-link">Page 1</a></li>
                    <li><a href="#page2" class="page-link">Page 2</a></li>
                </ul>
            </div>

            <div id="pages">
                <div id="page1" class="page">
                    <h1>Page 1</h1>
                    <p>This is all the lovely content on page 1.</p>
                    <p>Let's add a bunch of stuff to make it scroll.</p>
                    <p style="font-size: 72px">.<br/>.<br/>.<br/>.<br/>.<br/>.</p>
                    <p>This is at the bottom of the page.</p>
                </div>

                <div id="page2" class="page">
                    <h1>Page 2</h1>
                    <p>This is all the lovely content on page 2.</p>
                </div>
            </div>
        </div>
    </body>

</html> 
```

JavaScript（假设已加载 JQuery）：

```
$(document).ready(function() {
    $(".page-link").on("click", function(e) {
        $(".page").fadeOut(250);
        setTimeout(function() { $($(e.currentTarget).attr("href")).fadeIn(250); }, 250);
    });
}); 
```

CSS：

```
#navigation {
    position: fixed;
    width: 250px;
    height: 100%;
    border-right: 1px solid black;
}

#pages {
    margin-left: 270px; /* 250px + 20px of actual margin */
}

.page {
    position: relative;
    display: none;
    overflow: scroll;
} 
```

正如@RobG 上面所说，浏览器目前认为这一切都是一页。[但是，使用JQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)之类的东西，可以毫不费力地重新添加（例如，请参见[此处](http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/)）。

为什么要选择 div 而不是框架？有各种原因。

1.  框架不能加书签（见上面的警告）。
2.  帧的过渡和动画支持非常有限，并且对于单独的完整页面，它是不存在的。我在上面的小提琴中做了一个简单的淡入/淡出来演示 div 的可能性。
3.  当用户更改“页面”时，不需要重新加载任何内容（尽管相反，可能需要预先加载更多内容）。

# objective-c - 将字符串值传递给 cocos2d 中的场景名称

> ID：14993874
> 
> 赞同：0
> 
> 时间：2013-02-21T03:03:38.947
> 
> 标签：objective-c, cocos2d-iphone

从 GameOver 和 StageClear 场景开始，我一直在尝试将我的课程分解成更小的部分。我的 GameOver 场景现在可以正常工作，但我被 StageClear 场景卡住了。经过研究，我发现[了这个话题](http://www.cocos2d-iphone.org/forum/topic/7139)。基于该主题，我最终得到了这段代码，以便为我的游戏阶段重用 StageClear 场景：

```
i++;
NSString *go = [NSString stringWithFormat:@"Stage%i", i];
[[CCDirector sharedDirector]replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[NSClassFromString(go) scene]]]; 
```

使用此代码，我想调用下一个阶段。（Stage1 --> clear game --> i++ --> stage%i = stage2 --> go to Stage2\. 我得到一个错误的访问错误代码 1 尤其是在转换（第三行）以及我的堆栈上的这条消息，

> -[CCTransitionFade initWithDuration:scene:] 中的断言失败

为什么会这样？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:27:28.243

可以使用字符串变量替换场景

```
-(void)onEnter{

    [super onEnter];

    Class OtherLayerClassName = NSClassFromString(@"OtherLayer");
    [[CCDirector sharedDirector]replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[OtherLayerClassName scene]]];
} 
```

在这种情况下不要忘记包含必要的文件 OtherLayer.h

# html - css3圆形图像不起作用

> ID：14993875
> 
> 赞同：6
> 
> 时间：2013-02-21T03:03:41.177
> 
> 标签：html, css

我正在尝试使用 css 3 制作圆形图片。

每个请求发布我的整个代码 html

```
<!DOCTYPE html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Hello</title>
    <link type="text/css" href="home_page.css" rel="stylesheet" />
  </head>
  <body>
<span class="image-wrap " style="display:inline-block; background:url(pic1.png);">
<img src="pic1.png" style="opacity: 0;"></span>
 </body>
</html> 
```

css：在 home_page.css 里面

```
.image-wrap {
    -webkit-border-radius: 50em;
    -moz-border-radius: 50em;
    border-radius: 50em;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T03:08:49.593

您需要设置`<img>`to`display: block`并设置其`border-radius`, 而不是父元素或除了父元素之外。您也可以`50%`用于圆形元素。并`opacity: 0`从图像中删除，否则它将不可见。`background-image: url()`如果这是您的问题，我也提供了一个示例。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ftDA7/96/)]]]

### 输出：

> ![在此处输入图像描述](../Images/3ff3245bae2d50261d5fefad0ea0000d.png)

### CSS：

```
.circle {
    border: 1px solid black;
    border-radius: 50%;
    display: inline-block;
}
.circle img {
    border-radius: 50%;
    display: block;
}
.background-circle {
    background-image: url( 'http://lorempixel.com/200/200/cats/' );
    height: 200px;
    width: 200px;
} 
```

### HTML：

```
<div class="circle"><img src="http://lorempixel.com/200/200/cats/" /></div>
<div class="background-circle circle"></div> 
```

# joomla - Joomla 和 JomSocial 错误

> ID：14993877
> 
> 赞同：0
> 
> 时间：2013-02-21T03:03:50.290
> 
> 标签：joomla, jomsocial

我的客户网站有问题。我不擅长使用 Joomla（我们主要使用 Wordpress），但是我的一个长期客户要求我从另一个从未完成过的开发人员那里转移一个网站，所以我答应了。问题是，除了社区页面，一切都很好：

[http://gettingripped.com/index.php/community](http://gettingripped.com/index.php/community)

我发现的唯一错误是 Facebook 集成（他们告诉我以前的开发人员从未完成/修复）。我在这里真的很困惑......那里有人有任何想法吗？Com_community_somethingElseHere 似乎没有显示正确的标题，而是替换了所有内容。

提前感谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:55:22.570

**en-GB.com_community.ini**文件似乎有问题。

位置：getripped.com/language/en-GB/en-GB.com_community.ini

我在上面的位置找不到文件！！！

将此文件放在该文件夹中，它将起作用！

如果找不到要放入文件夹的文件，请创建自己的文件并将其放在那里..如何？好吧，谷歌搜索这个字符串（包括双引号）`"en-GB.com_community.ini"` 并打开前几个结果。

然后将显示的文件内容复制粘贴到您自己的 ini 文件中（将其命名为 en-GB.com_community.ini）并将其放在您的 en-GB 文件夹中。

加载页面，它将按原样显示！

# ruby - Ruby和JRuby在方法链上的区别

> ID：14993879
> 
> 赞同：2
> 
> 时间：2013-02-21T03:03:59.410
> 
> 标签：ruby, jruby

今天我开始测试 JRuby。我是一名 Java 和 Ruby 开发人员，所以乍一看我很喜欢这种混合。
然后稍微编码一下，我发现了一个区别，我想知道这是否正确。
我正在使用 jruby 1.7.2 和 ruby​​ 1.8.7 进行测试。

在 jruby 控制台中，我输入：

```
c = []
c.class #=> Array
c << 9 << 8 << 0 << 2
c.to_s #=> "[9, 8, 0, 2]" 
```

* * *

现在在 ruby​​ 控制台中，我输入：

```
c = []
c.class #Array
c << 9 << 8 << 0 << 2
c.to_s #=> "9802" 
```

* * *

这里会发生什么，为什么两种情况下的结果都不一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T03:18:36.897

您看到的区别并不是 Ruby 和 JRuby 本身之间的不兼容。JRuby 1.7.x 默认与 Ruby 1.9.3 兼容，因此您实际看到的是 Ruby 1.8.7 和 Ruby 1.9.3 之间 Array#to_s 方法的行为差异。

您可以通过将开关“--1.8”传递给 jruby 命令或设置环境变量 JRUBY_OPTS 来打开 JRuby 的 1.8 兼容模式，如下所示：

```
export JRUBY_OPTS='--1.8'. 
```

例如，这是 JRuby 1.7.2 的默认 1.9 兼容模式：

```
$ JRUBY_OPTS='' irb
> ([] << 9 << 8 << 0 << 2).to_s
=> "[9, 8, 0, 2]" 
```

这是打开 1.8 兼容性的结果：

```
$ JRUBY_OPTS='--1.8' irb
> ([] << 9 << 8 << 0 << 2).to_s
=> "9802" 
```

# iphone - 即使应用程序没有运行，是否可以跟踪位置

> ID：14993880
> 
> 赞同：2
> 
> 时间：2013-02-21T03:04:02.817
> 
> 标签：iphone, ios, objective-c, ios5, ios6

在 iPhone 应用程序中，即使有权定位的应用程序没有在后台运行，是否也可以跟踪位置并将其发送到服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T03:07:28.330

这是可能的——请参阅[本文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/BackgroundExecution/BackgroundExecution.html)以了解一般的多任务处理以及[位置感知编程指南的本节“在后台获取位置事件”](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)。当然，所有这些都在谈论 iOS 设备获取您位置的所有各种方式（手机信号塔三角测量、Skyhook 式 wifi 网络观测和 GPS），而不是唯一的 GPS。

简而言之，通过阅读这些文档：将 UIBackgroundModes 键添加到 info.plist 中，这是一个数组，并将值“位置”放入其中。即使在后台，您也会收到 CLLocationManager 更新。

但是，如果您想对电池友好，那么您最好在 CLLocationManager 上使用 startMonitoringSignificantLocationChanges 方法。然后，即使在后台没有完整的后台应用程序，您也可以获得适当的重要位置更新。文档的其他部分指出，重大变化是从一个蜂窝塔到另一个蜂窝塔的任何变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T03:31:56.270

如果 App 在后台，可以在 info.plist 中添加键值对。关键是`UIBackgroundModes`，值如下：

![在此处输入图像描述](../Images/42c92eeee62cf0b79a4e3dae49df9cff.png)

然后在后台做一些事情：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.

    UIDevice *device = [UIDevicecurrentDevice];
    BOOL backgroundSupported = NO;
    if ([device respondsToSelector:@selector(isMultitaskingSupported)]) {
        backgroundSupported = YES;
    }

    __blockUIBackgroundTaskIdentifier bgTaskId = [application beginBackgroundTaskWithExpirationHandler:^{
        [application endBackgroundTask:bgTaskId];
        bgTaskId = UIBackgroundTaskInvalid;
    }];

    if (backgroundSupported) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            //
        });
    }
} 
```

但是，如果应用程序甚至不在后台，即不在内存中，那么应用程序可以做什么？CPU 不会运行应用程序的一行代码。

# c++ - 链表和从文本文件中读取

> ID：14993882
> 
> 赞同：0
> 
> 时间：2013-02-21T03:04:21.447
> 
> 标签：c++, linked-list

我是所有这些 c++ 编程的初学者，我想最后一次尝试以获得帮助。我必须创建一个名为 add_aa(str) 的方法，它按字母升序添加 str。这涉及使用链表和从文本文件中读取。在文本文件中，有以下内容：aa hi dd hi。这就是文本文件中的全部内容。在 main.cpp 文件中，这里有一段代码可以输出到 str：

```
if( cmds.first == "aa" )            // add alphabetically
    {
        lst.add_aa( cmds.second );
    } 
```

使用此代码，从文本文件中读取，hi 将被输出并分配给 str。我正在尝试编写执行此操作的方法，但我想不出任何东西。另外，这是我应该收到的输出以清除问题。 ![在此处输入图像描述](../Images/af5601e8ed59d5aa04cbefa331eb5e87.png)

到目前为止，我的代码只是：

```
inline void LList:: add_aa(const string _str)
{
cout << "\tp = " << std::hex << p << std::dec << '\n';
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T03:20:20.970

哦，天哪，我们进入了 C++“链表教程”，上次你问我时我说它是不切实际的。

但也许我有时间写它。

我会先给自己泡点茶，然后分小批发布，一次一个。

* * *

## 基本单链表。

一个基本的单链表由**节点**组成，其中每个节点都包含一个指向列表中下一个节点的指针，例如称为`next`。按照惯例`next`==0 表示列表的结尾。所以，让我们创建这样一个简单的列表，遍历它（这里只是显示内容），并通过释放节点进行清理：

```
#include <iostream>
using namespace std;

struct node_t
{
    node_t*     next;
    int         value;

    node_t( int const v = 0 )
        : next( 0 ), value( v )
    {}
};

int main()
{
    char const blah[] = "moonflower";

    node_t*     first   = 0;

    // Create the list.
    for( auto ch : blah )
    {
        node_t* node = new node_t( ch );

        node->next = first;     // After this `node` points to the new first node.
        first = node;           // Now `first` also points to the new first node.
    }

    // Display it
    for( node_t* p = first;  p != 0;  p = p->next )
    {
        cout << p->value << " ";
    }
    cout << endl;

    // Delete the list
    while( first != 0 )
    {
        node_t* const doomed = first;

        first = first->next;
        delete doomed;
    }
} 
```

对于最后的清理，重要的是按正确的顺序做事，以免访问已删除的节点。访问已删除的节点*可能会*起作用。但是，由于墨菲定律，它会在以后失败，在事情应该起作用的绝对最关键的时间点上。

输出：

```
0 114 101 119 111 108 102 110 111 111 109

```

这些是 ASCII 字符代码，包括字符串的终止零。

注意数字的顺序！:-)

* * *

# 插入单链表。

与直接使用数组相比，链表的主要优点是插入新节点需要恒定的时间。在直接使用数组的情况下，插入新项必须将所有项移动到它之后（或之前），这需要与数组大小成正比的时间。但是，请注意（1）查找插入点的时间通常被强制为线性列表大小，而它可以是数组的对数，以及（2）通过使用称为“插入间隙”或“光标间隙”的技术” 对于数组来说，插入一个项目也可以是恒定的时间（以一些轻微的成本）。

为了在升序位置插入一个数字，对于基本列表，您需要一个指向插入点*之前*节点的指针，以便`next`可以更新该节点以指向新节点。

由于基本列表在第一个节点之前没有这样的节点，因此在列表开头插入成为一种丑陋的特殊情况，如下所示：

```
#include <iostream>
using namespace std;

struct node_t
{
    node_t*     next;
    int         value;

    node_t( int const v = 0 )
        : next( 0 ), value( v )
    {}
};

int main()
{
    char const blah[] = "moonflower";

    node_t*     first   = 0;

    // Create the list.
    for( auto ch : blah )
    {
        node_t* node = new node_t( ch );

        // Find the insertion point.
        node_t* p = first;
        node_t* p_node_before = 0;
        while( p != 0 && p->value < ch )
        {
            p_node_before = p;
            p = p->next;
        }

        if( p_node_before == 0 )
        {
            // Insert at start of list, just like in the first program.
            node->next = first;     // After this `node` points to the new first node.
            first = node;           // Now `first` also points to the new first node.
        }
        else
        {
            // Insert within the list or at the end of the list.
            node->next = p_node_before->next;
            p_node_before->next = node;
        }
    }

    // Display it
    for( node_t* p = first;  p != 0;  p = p->next )
    {
        cout << p->value << " ";
    }
    cout << endl;

    // Delete the list
    while( first != 0 )
    {
        node_t* const doomed = first;

        first = first->next;
        delete doomed;
    }
} 
```

输出：

```
0 101 102 108 109 110 111 111 111 114 119

```

请注意，由于搜索插入位置，每次插入平均花费的时间与列表的最终长度成正比，因此总的来说这是二次时间，O(n ² )。这是一个简单的插入排序。我希望我没有引入任何错误！:-)

* * *

# 巧妙的指针对指针。

减少基本列表开头插入混乱的一种方法是注意您实际上只需要访问`next`插入点之前的节点字段。

您不需要访问插入点之前的完整节点。

所以你可以只用一个*指向指针的`next`指针*。即**指向指针的指针**。对于列表的开头，`first`指针变量可以很好地服务，就好像它是`next`之前某个节点中的字段一样，所以最初指针指向指针可以只指向`first`指针（嗯），然后它可以移动在`next`指针上，像这样：

```
#include <iostream>
using namespace std;

struct node_t
{
    node_t*     next;
    int         value;

    node_t( int const v = 0 )
        : next( 0 ), value( v )
    {}
};

int main()
{
    char const blah[] = "moonflower";

    node_t*     first   = 0;

    // Create the list.
    for( auto ch : blah )
    {
        node_t* node = new node_t( ch );

        // Find the insertion point.
        node_t** p_next_before = &first;
        while( *p_next_before != 0 )
        {
            node_t* const next_node = *p_next_before;
            if( next_node->value >= ch )
            {
                break;
            }
            p_next_before = &next_node->next;
        }

        // Insert at start of list, just like in the first program.
        node->next = *p_next_before;    // After this `node` points to the new first node.
        *p_next_before = node;         // Now ... also points to the new first node.
    }

    // Display it
    for( node_t* p = first;  p != 0;  p = p->next )
    {
        cout << p->value << " ";
    }
    cout << endl;

    // Delete the list
    while( first != 0 )
    {
        node_t* const doomed = first;

        first = first->next;
        delete doomed;
    }
} 
```

输出还是

```
0 101 102 108 109 110 111 111 111 114 119

```

应该是这样。

起初，我直接在`while`循环头中编写了带有相当长的延续条件的代码。但是遵循应该命名几乎所有东西的规则，我将其中的一部分移到循环内，然后加上一个`break`语句。所以这就是声明的原因`break`：支持名称`next_node`。

在 C++ 中，指向指针的指针有时表示为指向指针的引用。例如，从基本列表中取消链接节点的函数可能采用引用指针参数，而不是 C 风格的指针指针。我发现它更干净，当它适用时。

* * *

# 使用头节点。

指针对指针的替代方法是在第一个实节点之前引入一个*虚拟节点。*那么即使是一个空列表也有一个物理节点，即虚拟节点。虚拟节点通常称为**头节点**。

在编译器完成对机器代码的转换和优化之后，使用头节点的代码可能与使用指针到指针技术的代码相同，只是头节点涉及更多的分配，并且需要更多的时间房间比单个指针变量。但不同之处在于人们如何看待代码，如何理解它。从概念上讲，拥有头节点与使用指针对指针技术非常不同——例如，如果您绘制列表结构，那么带有头节点的列表看起来与没有此类节点的列表明显不同。

无论如何，代码：

```
#include <iostream>
using namespace std;

struct node_t
{
    node_t*     next;
    int         value;

    node_t( int const v = 0 )
        : next( 0 ), value( v )
    {}
};

int main()
{
    char const blah[] = "moonflower";

    node_t* header_node = new node_t();

    // Create the list.
    for( auto ch : blah )
    {
        node_t* node = new node_t( ch );

        // Find the insertion point.
        node_t* p_before = header_node;
        while( p_before->next != 0 && p_before->next->value < ch )
        {
            p_before = p_before->next;
        }

        // Insert at start of list, just like in the first program.
        node->next = p_before->next;    // After this `node` points to the new first node.
        p_before->next = node;          // Now ... also points to the new first node.
    }

    // Display it
    for( node_t* p = header_node->next;  p != 0;  p = p->next )
    {
        cout << p->value << " ";
    }
    cout << endl;

    // Delete the list
    auto& first = header_node;          // Just a renaming for clarity.
    while( first != 0 )
    {
        node_t* const doomed = first;

        first = first->next;
        delete doomed;
    }
} 
```

和以前一样，输出仍然是

```
0 101 102 108 109 110 111 111 111 114 119

```

应该是这样。

# python - 主字段名称（文档=True）

> ID：14993883
> 
> 赞同：1
> 
> 时间：2013-02-21T03:04:24.423
> 
> 标签：python, django, django-haystack

Django Haystack[文档说](http://django-haystack.readthedocs.org/en/latest/tutorial.html#handling-data)：

```
**Warning**
When you choose a document=True field, it should be consistently named across all of your SearchIndex classes to avoid confusing the backend. The convention is to name this field text.

There is nothing special about the text field name used in all of the examples. It could be anything; you could call it pink_polka_dot and it won’t matter. It’s simply a convention to call it text. 
```

但我不明白这意味着什么。这是他们的示例模型：

import datetime from haystack import index from myapp.models import 注意

```
class NoteIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    author = indexes.CharField(model_attr='user')
    pub_date = indexes.DateTimeField(model_attr='pub_date')

    def get_model(self):
        return Note

    def index_queryset(self, using=None):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.filter(pub_date__lte=datetime.datetime.now()) 
```

我引用的文本是指我的模型主字段并说我应该将其称为“文本”还是 search_indexes.py 中定义的类？

如果是 search_indexes.py 中的类，在上面的示例中它附加到的字段名称在哪里？它没有model_attr！

```
text = indexes.CharField(document=True, use_template=True) 
```

如果对于我的实际应用程序模型，我应该如何重构一个包含许多应用程序的项目，以将它们的主要文本字段称为“文本”！

请指教。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T15:30:44.867

**您的`SearchIndex`定义不需要反映您的模型定义，它需要将来自不同模型的数据映射到一个公共搜索文档。**

1.  为什么文本字段需要一致命名？
2.  地图内容是如何获取的？（为什么没有`model_attr`关键字）

Haystack 文档建议您的`SearchIndex`字段应在您的`SearchIndex`定义中一致命名 - 而不是您的模型字段需要一致命名。搜索索引定义和模型定义之间有一个主要区别。您不需要也可能不应该担心模型字段和搜索字段之间的 1-1 映射。

从您的模型中退后一步，首先考虑您要搜索的内容。您会通过一个通用的搜索视图搜索几个不同的模型吗？假设您有两个模型：

```
class Note(models.Model):
    title = models.CharField(max_length=40)
    body = models.TextField()

class Memo(models.Model):
    subject = models.CharField(max_length=50)
    content = models.TextField()
    author = models.ForeignKey(StaffMember) 
```

我们想要创建一个简单的搜索视图，它只搜索模型的主要内容以及内容对象的标题或名称（名称、标题、主题等）。

**这是一个不好的例子（不要这样做）：**

```
class NoteIndex(indexes.SearchIndex, indexes.Indexable):
    body = indexes.CharField(document=True, use_template=True)
    title = indexes.CharField(model_attr='title')

    def get_model(self):
        return Note

class MemoIndex(indexes.SearchIndex, indexes.Indexable):
    content = indexes.CharField(document=True, use_template=True)
    subject = indexes.CharField(model_attr='subject')

    def get_model(self):
        return Memo 
```

在这个糟糕的示例中，每个搜索索引*都*定义了一个主要内容字段和一个内容名称字段（标题或主题）。但是你现在怎么搜索呢？如果您基于 对内容运行查询，`subject`您将错过`Note`内容，同样，如果您对`body`.

**更好的例子（这样做）：**

```
class NoteIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    title = indexes.CharField(model_attr='title')

    def get_model(self):
        return Note

class MemoIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    title = indexes.CharField(model_attr='subject')

    def get_model(self):
        return Memo 
```

请注意，字段名称不一定与模型字段名称匹配。您只需定义字段应从哪个模型属性获取`SearchIndex`其数据。

您在搜索引擎中搜索文档，而不是数据库中的行，因此`SeachIndex`定义将数据库中的内容（一个表或多个查询）映射到搜索文档。`SearchIndex`定义是一个转换，每个`SearchField`转换都按照您指定的方式转换数据。

至于您关于 missing 的问题`model_attr`，这只是提取内容的一种方式。您还可以从模板呈现文本内容，这就是`text`上面的字段所做的（请参阅关于该字段的[SearchField API 文档](http://django-haystack.readthedocs.org/en/latest/searchfield_api.html#template-name)）。该`model_attr`源代码适用于简单的字符字段。

# android - System.exit(0) 导致 Activity 在应用启动时快速退出

> ID：14993889
> 
> 赞同：0
> 
> 时间：2013-02-21T03:05:21.410
> 
> 标签：android

我遇到了一个问题，`System.exit(0)`导致应用程序启动时 Activity 快速退出：

在一个项目中，我看到用于`System.exit(0)`实现应用程序的完全退出，我这样做了，但是活动在项目中没有经历它的生命周期，所以我使用以下方法：

```
public class App extends Application {
    private int mLock = 0;
    @Override
    public void onCreate() {
        registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks() {
            @Override
            public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
                mLock++;
            }
            @Override
            public void onActivityDestroyed(Activity activity) {
                try {
                    //Simulation Activity Destroyed too time consuming and increase the probability of problems

                    Thread.sleep(300);
                } catch (InterruptedException e) {
                }
                mLock--;
                if(mLock<=0){
                    exit();
                }
            }
            @Override
            public void onActivityStopped(Activity activity) {}
            @Override
            public void onActivityStarted(Activity activity) {}
            @Override
            public void onActivitySaveInstanceState(Activity activity, Bundle outState) {}
            @Override
            public void onActivityResumed(Activity activity) {}
            @Override
            public void onActivityPaused(Activity activity) {}

        });
    }

    public void exit() {
        System.exit(0);
    }

} 
```

但是，问题出现了，如果我退出最后一个活动（退出应用程序），并立即快速启动应用程序，然后活动退出但它没有启动完成（闪退）。

**编辑** 我想要做的是在所有活动都被破坏时退出应用程序。但是，有一个问题：当应用程序想要完成自己的进程时，所有活动都被破坏了，但是甚至没有调用 System. exit()，启动一个activity，然后调用System.exit()，此时会闪退，如何避免这个问题？</p>

嗯，不过我的目的是结束应用进程（有些需要，不考虑是不是应该做），只是在默认启动activity的destroy之后，而不是在任何其他activity中做结束这个操作过程，我使用上述方法是为了确保所有的启动活动都能够在应用程序中完成其生命周期。但这有问题描述，这应该是多线程同步问题，但我在应用程序中有睡眠，为什么它可以在睡眠期间创建活动？不要application和activity不是同一个线程，但是它们的线程id是1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T03:09:49.167

永远不要使用 System.exit(0)。这违背了 Android 编码实践。它旨在立即退出应用程序，这不是您想要的。如果用户按下“Home”或“Back”，则 Activity 将从堆栈中弹出并调用所有这些生命周期方法。`finish()`如果您有理由提前离开应用程序，另一种方法是使用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:09:36.100

只是让你知道。强制关闭一个`Activity`或一个 Android 应用程序将不会继续专门调用其生命周期方法`onDestroy()`。`finish()`改为使用

```
void exit()
{

    finish();

} 
```

如果您真的想退出您的 android 应用程序，请关闭所有活动、服务和/或广播接收器，Android 系统将有权终止您的进程。

# visual-studio - 您能查看 Klockwork 的 On-The-Fly 解析器错误吗？

> ID：14993890
> 
> 赞同：1
> 
> 时间：2013-02-21T03:05:38.737
> 
> 标签：visual-studio, klocwork

我在 Klocwork 的 Visual Studio 集成中遇到错误，指出

> 由于 XX 解析器错误，On-The-Fly 分析未开始。

有没有办法查看 On-The-Fly 解析器错误？

Visual Studio 解决方案仍在成功构建，所以我猜这是我需要让 Klocwork 在正常构建过程中意识到的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T23:06:02.230

从 Klocwork Insight 10 开始，Visual Studio 插件现在将在 Visual Studio 错误列表窗口中显示任何解析错误。

在以前的版本中，要查看解析错误，您可以查看插件写入用户临时文件夹的 KWVS.log 文件，即。%TEMP% 的值。

一般来说，Klocwork 解析器比 Visual Studio 编译器更严格一些，比如缺少分号等。

# sql-server - 数据 URI 与数据库中的二进制

> ID：14993892
> 
> 赞同：7
> 
> 时间：2013-02-21T03:05:44.830
> 
> 标签：sql-server, asp.net-mvc, database, image-processing, data-uri

我正在使用 DATA URI（客户端，使用画布）将图像发布到服务器。我现在有两个选择：我可以将“图像”作为字符串保存在 varchar(max) 列中，或者我可以将其转换为 byte[] 并将其保存为 varbinary(max)。

至于实施，努力是一样的。我正在尝试确定 1：数据库中的空间和 2：显示图像更有效。有没有人看到任何对此的分析或有衡量这个的好方法？

仅供参考 - 一个 3kb 的图像在数据库中大约有 100K 个字符。

使用：ASP.NET 4.5、MVC、SQL Server 2008

**澄清**

我可以使用 byte[] 在 varbinary(MAX) 列中将图像存储在数据库中，就像通常的情况一样，或者我可以存储来自 HTML5 画布的 DATA URI，看起来像**data:image/png;base64,iVBORw0K.. .**在 varchar(max) 列中。

存储 byte[] 是典型的，无需进一步解释。存储 DATA URI 只是一个字符串并显示图像将是：

```
<img src="data:image/png;base64,iVBORw0K" /> or
<img src="@Model.Uri" /> 
```

我的问题是哪一个更高效、更节省空间，以及是否有任何文档、白皮书或围绕此特定比较的分析。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T04:38:54.077

由于没有真正的答案并且发现 Binging with Google 的信息很少，我做了一个简单的定时测试，插入 20K 条记录（少于那是没有意义的）并在循环中一次选择一条记录。我使用 PetaPoco 进行数据库访问。如果您在那里发现了什么或有一些信息，请分享。我认为这将是一个更常见的场景，DATA URI 会受到更多关注。

URI 始终更快地插入和选择。相对更快，因为它以毫秒为单位。这不应该是一个因素 - 它更容易。

至于呈现给客户端。我使用了两种方法，一个来自 MVC 操作方法的 ImageResult（返回图像的自定义 ActionResult）（这是在 http 响应中呈现图像）并返回 URI 字符串并将其用作图像 SRC（即 src="@模型.Uri")。再次，几乎没有区别。使用 Chrome 开发工具的结果：

```
ImageResult: 2 requests, 200ms, 3.2KB
DATA URI: 2 requests, 200ms, 3.9KB 
```

但是，我确实注意到 ImageResult (byte[]) 版本将自动被浏览器缓存，因为它是用于所有意图和目的的图像。DATA URI 版本不会被浏览器自动缓存。

从这个初步测试来看，byte[] 是可行的方法，因为浏览器的自动缓存和所有其他结果都是相同的。

**我的设置：** i7、8GB Ram、SSD、SQL Server 2012、IIS Express

*缓存的好处是我在没有设置的情况下注意到的。是的，我确信可以管理 HTTP 标头、etag、输出缓存等。*

# unreal-development-kit - 如何更正“输出变量中的常量不匹配”？

> ID：14993894
> 
> 赞同：0
> 
> 时间：2013-02-21T03:05:52.090
> 
> 标签：unreal-development-kit, unrealscript

所以我目前正在编写代码来访问玩家的 uniqueNetId 使用：

```
Class'GameEngine'.static.GetOnlineSubsystem().UniqueNetIdToString(
        OnlineSubsystemSteamworks(Class'GameEngine'.static.GetOnlineSubsystem()).LoggedInPlayerId.Uid); 
```

但这导致了这一点：

```
Error, Call to 'UniqueNetIdToString', parameter 1: Const mismatch in Out variable 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:44:33.867

这实际上不是 const 不匹配。该函数需要一个结构，而您正在传递该结构的成员。尝试删除`.Uid`，即：

```
Class'GameEngine'.static.GetOnlineSubsystem().UniqueNetIdToString(
        OnlineSubsystemSteamworks(Class'GameEngine'.static.GetOnlineSubsystem()).LoggedInPlayerId); 
```

# java - 摆动模态对话框错误返回

> ID：14993898
> 
> 赞同：0
> 
> 时间：2013-02-21T03:07:19.767
> 
> 标签：java, swing, modal-dialog, jdialog

总结：创建多个模态对话框，当关闭一个隐藏的模态对话框时，如果单击低级模态对话框，关闭的模态对话框上的模态对话框可以回到低级模态对话框。

重现问题的方法，运行应用程序->单击“按钮A​​”->单击“按钮B”->单击“按钮C”，如果单击对话框a，则对话框C可以返回对话框A。

请帮忙，谢谢！！

```
import java.awt.Dialog.ModalityType;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;

public class ModalDialogProblem {

    /**
     * @param args
     */
    public static void main(String[] args) {
        JDialog a = new JDialog();
        a.setTitle("Dialog A");
        a.setModalityType(ModalityType.APPLICATION_MODAL);
        a.setLayout(null);
        a.setBounds(0, 0, 400, 300);

        JButton bA = new JButton("Button A");
        bA.setBounds(20, 20, 180, 40);
        bA.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                final JDialog b = new JDialog();
                b.setTitle("Dialog B");
                b.setModalityType(ModalityType.APPLICATION_MODAL);
                b.setLayout(null);
                b.setBounds(40, 40, 400, 300);

                JButton bB = new JButton("Button B");
                bB.setBounds(20, 20, 180, 40);
                bB.addActionListener(new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        // TODO Auto-generated method stub
                        JDialog c = new JDialog();
                        c.setTitle("Dialog C");
                        c.setModalityType(ModalityType.APPLICATION_MODAL);
                        c.setLayout(null);

                        c.setBounds(80, 80, 400, 300);
                        JButton bC = new JButton("Button C");
                        bC.setBounds(20, 20, 180, 40);
                        bC.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent e) {
                                b.dispose();
                            }
                        });
                        c.add(bC);
                        c.setVisible(true);
                    }
                });
                b.add(bB);
                b.setVisible(true);
                }
                });
                a.add(bA);
                a.setVisible(true);
        }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T03:49:25.040

为了使对话框正常运行，您必须在对话框构建期间提供所有者框架或所有者对话框。它确保了正确的可视化并修复了许多描述的故障。尝试以下操作：

```
JDialog c = new JDialog(previouslyOpenedDialog); 
```

# java - 新对象实际上不是新的吗？

> ID：14993902
> 
> 赞同：0
> 
> 时间：2013-02-21T03:07:56.870
> 
> 标签：java, networking, tcp

我在java中使用ArrayList时遇到了一些问题，我正在创建一个新的类对象，给出该值，将该对象添加到arrayList，然后将关键字“new”用于已使用的对象，重新使用它不同的数据，但没有改变但之前设置的数据，仍然设置？

这是我的代码

```
private static ArrayList<PongServerThread> games = new ArrayList<PongServerThread>();
private static int players = 0;
private static PongServerThread game;

public static void main( String args[] ) throws IOException, InterruptedException
{   
    while(true)
    {
        System.out.println("Start of Loop");

        if(game.getPlayers() == 0)
        {
            System.out.println("Waiting for players");
        }
        if(game.getPlayers() == 2)
        {
            System.out.println("Game Added");
            games.add(game);
            games.get((games.size())-1).start();
            game.setPlayers(0);
        }

        game = new PongServerThread();
    }
} 
```

这段代码工作正常，但在我的 PongServerThread 中，一旦两个客户端连接，main 将启动线程，并且需要启动一个新的 PongServerThread 对象，因此另外 2 个客户端可以连接到该线程，但发生的是，一旦 2客户端线程启动，新线程在这里

```
game = new PongServerThread(); 
```

这将再次创建，但是当新客户端连接时，它将接管第一个客户端，如果另一个客户端连接，它将接管第二个客户端，依此类推，所以发生的事情是

```
game = new PongServerThread(); 
```

不是真的在制作一个新的 PongServerThread，我将如何解决这个问题？这也是当 2 个客户端连接时的控制台输出，然后再连接 1 个

```
Start of Loop
Waiting for players
Pong
400.0:301.0:60.0:300.0:740.0:300.0
Server started
Server was setup and will try to create a socket
Client Connected with ID:0
Checking readLine value
Client Connected with ID:1
Start of Loop
Game Added
Pong
400.0:300.0:60.0:300.0:740.0:300.0
Server started
Server was setup and will try to create a socket
Checking readLine value
Client Connected with ID:0
Checking readLine value 
```

瑞安的更新-----

这是我的服务器构造函数

```
public PongServerThread() throws IOException, InterruptedException
{

    //Setup
            super("PongServerThread");
            setupPong();
            boolean listen = false;
            boolean playing = false;
            System.out.println(rtnInfo());

            System.out.println("Server started");
            //Create a serverSocket to listen on
            ServerSocket serverSocket = null;

            try
            {
                serverSocket = new ServerSocket(port);
                listen = true;
                System.out.println("Server was setup and will try to create a socket");
            }
            catch(IOException e)
            {
                System.err.println("Could not listen on port:" + port);
                System.exit(1);
            }

            while(listen)
            {
                /*PongPlayerThread player1 = */
                players[idPlayer] = new PongPlayerThread(serverSocket.accept(), idPlayer, rtnInfo());
                players[idPlayer].start();
                System.out.println("Client Connected with ID:" + idPlayer);
                players[0].passData(rtnInfo());
                idPlayer++;     
                if(idPlayer > 1)
                {
                    listen = false;
                    playing = true;
                }
            }

            int timer = 0;
            System.out.println("Server Closed");
            serverSocket.close();

} 
```

- -更新 - -

我刚刚注意到我将一些变量声明为静态的，这很可能是我收到错误的原因，但是现在当我尝试运行我的服务器代码时

```
class Main
{
// Variable
private ArrayList<PongServerThread> games = new ArrayList<PongServerThread>();
private int players = 0;
private PongServerThread game;

public void main( String args[] ) throws IOException, InterruptedException
{   
    //PongServerThread game = new PongServerThread();
    /*if(pt.getPlayers() == 2)
    {
        System.out.println("Started");
        pt.start();
    }*/

     PongServerThread game = new PongServerThread();
        while(true)
        {
            games.add(game);
            System.out.println("Game Added");
            game.start();

            game = new PongServerThread();
        }
    /*System.out.println("Pong");
    PongModel model = new PongModel();
    PongView  view  = new PongView();
                      new PongController( model, view );

    model.addObserver( view );       // Add observer to the model

    view.setVisible(true);           // Display Screen
    model.makeActiveObject();        // Start play*/
}
} 
```

我收到这个错误

```
Could not get Input/Output from server 
```

有人知道我为什么会得到那个吗？如果需要，我可以粘贴更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:14:57.597

为了启动一个线程，你必须调用，例如：

```
game.start(); 
```

一般来说，最好实现`Runnable`，然后说：

```
Runnable myThread = ...;
new Thread(myThread).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:01:47.430

因为 PongServerThread() 仅在有 2 名玩家的游戏时才返回，所以您可以大大简化 main 函数：

```
{
    PongServerThread game = new PongServerThread();
    while(true)
    {
        games.add(game);
        System.out.println("Game Added");
        game.start();

        game = new PongServerThread();
    }
} 
```

台词`game.setPlayers(0);`很奇怪：为什么在游戏刚开始有两个玩家时将游戏的玩家计数设置为零。

编辑：

如果我理解正确，`setPlaysers(0)`调用将零设置为 static variable `players`。这就是第三个客户端将获得 ID = 0 的原因；第 4 个客户的 ID = 1；也许这使它看起来像“覆盖”。

所以移除`game.setPlayers(0);`将解决这个问题，并且所有玩家都将获得唯一标识符。

# asp.net - ASP.NET SQL 查询在 Ajax 刷新时挂起

> ID：14993904
> 
> 赞同：0
> 
> 时间：2013-02-21T03:08:06.143
> 
> 标签：asp.net, sql-server-2008, jquery

让我首先说明页面的过程是如何进行的：

1.  页面加载
2.  调用带有 Ajax (jquery) 的函数 - 因此报告在页面加载时加载。
3.  一个按钮允许刷新 ajax 部分，这并不是真正的意思，但我简化了问题并删除了很多东西。
4.  单击此按钮
5.  再次调用带有 ajax 的函数以实质上刷新报告。

第5步是它挂起的地方。

现在，在任何人得出结论之前，它必须是 ajax 函数的代码。不是，我已将问题归结为执行 sql 查询（SQL SERVER 2008）

关键是，这个程序可以正常工作，第 5 步在 99% 的情况下都可以正常工作。这个从今年开始的罕见场合，那个页面（在整个应用程序上）决定说，嘿，如果你刷新我，我会挂在 SQL 查询上。

所以我在数据库中运行了查询，它正在工作（如我所料）并且我简化了页面。一遍又一遍地查看代码......我不明白为什么它不起作用。

唯一让它恢复的就是重新启动 sql server。很奇怪，一旦我重新启动，它可以工作 5 周，然后注意到这个问题又回来了。

我真的只是在一些洞察力之后才来到这里，知道这是怎么发生的吗？就像我们在多个运行重负载的 IIS 服务器上安装了这个应用程序，但他们没有遇到它，只有这个特定的服务器，只有今年（去年......完美无瑕）

所以我要去嘿，它是服务器，必须是，所以我想升级它，但是当应用程序工作但只是在此页面上失败时，它怎么可能是服务器。

你可以看到我有两种想法，需要一些意见才能让我朝着正确的方向前进。

在撰写本文和进行调查时，我最终在 MSSQLSERVER 上重新启动以使事情正常运行（同时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:12:16.697

您是否成功关闭连接？您可能想查看您的 sql 调用并确保它们没有锁定表。

# java - 使用双精度类型对对象数组列表的数组列表进行排序

> ID：14993905
> 
> 赞同：0
> 
> 时间：2013-02-21T03:08:09.763
> 
> 标签：java, sorting, double, multidimensional-array

我有一个数组列表，外部数组列表中的每个数组列表都包含以下值：holidayId、country、countryValue、duration、durationValue、accType、accTypeValue、holSubType、holSubTypeValue、weather、weatherValue、pricePP、pricePPValue、recommensionsScore。这些都作为对象保存，我想知道是否有一种方法可以使用 RecommendationScore 将数组列表转换为双精度类型并以这种方式排序？或者我可以解决这个问题的任何其他方式？

提前致谢

公共类 RecAlgorithmImpl {

```
public static ArrayList<Double> attRanking(ArrayList<Double> attRank){

    ArrayList<Double> attWeight = new ArrayList<>();
    double weight;

    /*Loops through the rankings given in the questionnaire 
     * and sets a new number for better recommendation accuracy */
    for(int i = 0; i < attRank.size();i++){

        if(attRank.get(i) == 1){
            attRank.set(i, 7.0);
        }
        else if(attRank.get(i) == 2){
            attRank.set(i, 6.0);
        }
        else if(attRank.get(i) == 3){
            attRank.set(i, 5.0);
        }
        else if(attRank.get(i) == 4){
            attRank.set(i, 4.0);
        }
        else if(attRank.get(i) == 5){
            attRank.set(i, 3.0);
        }
        else if(attRank.get(i) == 6){
            attRank.set(i, 2.0);
        }           
        else if(attRank.get(i) == 0){
            attRank.set(i, 1.0);
        }
    }

            //Loop through the ranked values and assign a weighting to each attribute
    for(int j = 0; j < attRank.size(); j++){
        weight = (attRank.get(j))/28;
        attWeight.add(weight);
    }

    for(int k = 0; k < attWeight.size();k++){
        System.out.println(attWeight.get(k));
    }
    return attWeight;
}

public static ArrayList<ArrayList> valuePoints(ArrayList<ArrayList> valuePoints){
        //DataRetrievalImpl database = new DataRetrievalImpl();
        ArrayList<ArrayList> holiday = new ArrayList<>();

        //test info
        ArrayList<String> test = new ArrayList<>();
        test.add("stuff1");
        test.add("stuff2");
        test.add("stuff3");
        test.add("stuff4");
        test.add("stuff5");
        test.add("stuff6");
        holiday.add(test);
        ArrayList<String> test1 = new ArrayList<>();
        test1.add("stuff11");
        test1.add("stuff12");
        test1.add("stuff13");
        test1.add("stuff14");
        test1.add("stuff15");
        test1.add("stuff16");
        holiday.add(test1);

        ArrayList<ArrayList> holidayScore = new ArrayList<>(); // creates new arraylist to hold the 6 attributes and their value points to be used in recommendation score
        //database information
        /*boolean condition = false;
        String[] select = null;
        String[] from = null;
        String[] where = null;
        holiday = database.getData(condition, select, from, where);*/

        //Loops through the holiday arraylist which contains all the holidays and adds the attributes that we need to the new one along with default points
        for(int i = 0; i < holiday.size(); i++){
            holidayScore.add(new ArrayList());
            holidayScore.get(i).add(holiday.get(i).get(0));
            holidayScore.get(i).add("0");
            holidayScore.get(i).add(holiday.get(i).get(1));
            holidayScore.get(i).add("0");
            holidayScore.get(i).add(holiday.get(i).get(2));
            holidayScore.get(i).add("0");
            holidayScore.get(i).add(holiday.get(i).get(3));
            holidayScore.get(i).add("0");
            holidayScore.get(i).add(holiday.get(i).get(4));
            holidayScore.get(i).add("0");
            holidayScore.get(i).add(holiday.get(i).get(5));
            holidayScore.get(i).add("0");
        }

        //Loops through the holidayScore arraylist checking the attributes against the valuePoints array list and 
        //modifying the value points where the two attribute values are equivalent in both arraylists
        //each if statement checks that each attrbute value is equivalent, successful matches record the points from valuePoints into holidayScore
        for(int j = 0; j < holidayScore.size(); j++){

            if(holidayScore.get(j).get(0) == valuePoints.get(j).get(0)){
                holidayScore.get(j).set(1, valuePoints.get(j).get(1));
            }

            if(holidayScore.get(j).get(2) == valuePoints.get(j).get(2)){
                holidayScore.get(j).set(3, valuePoints.get(j).get(3));
            }

            if(holidayScore.get(j).get(4) == valuePoints.get(j).get(4)){
                holidayScore.get(j).set(5, valuePoints.get(j).get(5));
            }

            if(holidayScore.get(j).get(6) == valuePoints.get(j).get(6)){
                holidayScore.get(j).set(7, valuePoints.get(j).get(7));
            }

            if(holidayScore.get(j).get(8) == valuePoints.get(j).get(8)){
                holidayScore.get(j).set(9, valuePoints.get(j).get(9));
            }

            if(holidayScore.get(j).get(10) == valuePoints.get(j).get(10)){
                holidayScore.get(j).set(11, valuePoints.get(j).get(11));
            }  
        }

        System.out.println(holiday);
        System.out.println("----------------------------------------------------");
        System.out.println(holidayScore);
        return holidayScore;
}

public static void recommendation(ArrayList<Double> weightedAttr, ArrayList<ArrayList> holidayScores){

        //each variable holds the current value points for that attribute value
        double countryValue;
        double durationValue;
        double accTypeValue;
        double holSubTypeValue;
        double weatherValue;
        double pricePPValue;
        double recScore;

        //Loops through the holidayScores arraylist convert the value points into double which is multiplied by the appropriate attribute weighting
        //this gives a decimal score for each attribute which is summed up for the final recommendation score and added to the end of the arraylist
        for(int k = 0; k < holidayScores.size(); k++){
            countryValue = Double.parseDouble(holidayScores.get(k).get(1).toString());
            durationValue = Double.parseDouble(holidayScores.get(k).get(3).toString());
            accTypeValue = Double.parseDouble(holidayScores.get(k).get(5).toString());
            holSubTypeValue = Double.parseDouble(holidayScores.get(k).get(7).toString());
            weatherValue = Double.parseDouble(holidayScores.get(k).get(9).toString());
            pricePPValue = Double.parseDouble(holidayScores.get(k).get(11).toString());
            recScore = (countryValue * weightedAttr.get(0));
            recScore = recScore + (durationValue * weightedAttr.get(1));
            recScore = recScore + (accTypeValue * weightedAttr.get(2));
            recScore = recScore + (holSubTypeValue * weightedAttr.get(3));
            recScore = recScore + (weatherValue * weightedAttr.get(4));
            recScore = recScore + (pricePPValue * weightedAttr.get(5));
            holidayScores.get(k).add(recScore);
        }

        System.out.println(holidayScores);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:13:21.903

您应该实现一个对象，该对象包含您的arraylist（内部）中的所有值。然后，您可以轻松实现`Comparable`对`recommendationScore`.

# android - 安卓回调方法

> ID：14993909
> 
> 赞同：1
> 
> 时间：2013-02-21T03:08:35.833
> 
> 标签：android, android-activity

当我阅读 Android Training 时，我看到了关于活动生命周期的描述：

> 当您的活动停止时，活动对象将保留在内存中，并在活动恢复时被调用。您不需要重新初始化在导致 Resumed 状态的任何回调方法期间创建的组件。系统还跟踪布局中每个视图的当前状态，因此如果用户在 EditText 小部件中输入文本，则该内容会保留，因此您无需保存和恢复它。

我很困惑，如果我不需要重新初始化任何组件，为什么我必须处理数据或回调方法上的任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:19:53.783

以相机为例。

您不需要重新初始化任何组件，但您需要在活动恢复时重新初始化相机。组件不是活动的唯一部分。大多数应用程序还需要访问系统资源。当您的应用程序暂停或停止时，您会释放这些资源，因此您必须在应用程序恢复时再次重新初始化它们。并且Android在某些情况下可能会破坏你的应用程序（内存不够等），所以你必须再次释放并重新初始化资源。

此外，您的应用程序可能存在一些内部状态。例如阅读器。您需要记录进度。此内部状态不是组件，但您必须在活动暂停时保存它们。

```
@Override
public void onPause() {
    super.onPause();  // Always call the superclass method first

    // Release the Camera because we don't need it when paused
    // and other activities might need to use it.
    if (mCamera != null) {
        mCamera.release()
        mCamera = null;
    }
}

@Override
public void onResume() {
    super.onResume();  // Always call the superclass method first

    // Get the Camera instance as the activity achieves full user focus
    if (mCamera == null) {
        initializeCamera(); // Local method to handle camera init
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:16:35.293

该描述仅适用于停止状态。停止的活动也可以被销毁，因此想法是将数据保存在 onStop() 中，以防活动随后被销毁。虽然有 onDestroy() 回调，但不保证会被调用。当您的活动从暂停过渡到停止时，可以依赖 onStop() 被调用。请注意，在 Android 的 Honeycomb 之前的版本中，甚至不一定依赖 onStop()，并且应该使用 onPause() 来保存状态。在 onStop() 方法返回之前，Honeycomb 和后续版本不会终止活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:18:20.610

如果您的活动停止（即用户按下主页或他处理来电），您的应用程序的进程（和包含的活动）不会被破坏。

在这种情况下，您的组件已经初始化（这意味着，它们正在显示它们在您的活动停止之前显示的内容）并且当活动再次被带到前面（用户重新打开您的应用程序）时，您不必恢复任何类型的数据。

但是，一段时间后，操作系统可能会决定回收您的应用程序的资源并决定终止该进程（或者用户可能会从您的主页活动中按下返回按钮）。在另一种情况下，您应该保存 Activity 的状态，以便在用户返回您的应用程序时恢复它。

您可以使用[onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)

或者只是存储到 onStop() 上的首选项

# c# - 为不同的单位上课？

> ID：14993913
> 
> 赞同：1
> 
> 时间：2013-02-21T03:08:59.453
> 
> 标签：c#, coding-style, conventions

假设我有一个函数 Rotate (float angle)。当我调用这个函数时，我可能不记得这个函数是以度数还是弧度为单位的角度。出于这个原因，我将这些函数称为 RotateDegrees（浮动角度）。这要好得多，特别是如果我将变量称为 degAngle 或 radAngle。这样您就可以立即查看代码是否正确，而无需查看其他地方。

但可能还有更好的方法！

为什么我不为每个单元制作不同的课程？像

```
public class Degree
{
    public float value;

    public Degree (float value)  
    {
        this.value = value;
    }
} 
```

小时、公里、摩尔、光年等也是如此。

这样就完全没有歧义了，我只需要为每个函数做一堆重载，或者为每个类定义转换运算符。

但我从未见过这样的代码。在实践中不是很有用吗？另外，我正在编写的代码对性能至关重要，会有任何性能损失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:16:09.543

如果您的程序经常使用该特定单元，那绝对是一个好主意。

不过，您可能希望将其设为结构而不是类。

例如，我喜欢将结构用于百分比。它提高了可读性，并有助于防止开发人员在 50 或 0.5 表示 50% 之间混淆。

例如，请参阅 .NET 框架中的[Unit 结构](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.unit%28v=vs.71%29.aspx)，该结构用于在处理与 Web 相关的大小时区分像素、百分比和点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:22:56.070

我不确定 C# 但有一篇非常著名的文章关于使用 C++ 模板在编译时强制执行单元。我找不到这篇文章，但要点是任何单位都可以表示为基本测量幂的乘积。因此，例如速度 =（长度）^1*（时间）^-1。所以你定义了类似的东西

```
template <int lenPower, int timePower>
class Unit {
  double val;
};

typedef meter Unit<1,0>;
typedef second Unit<0,1>;
typedef velocity Unit<1,-1>; 
```

然后重载 * 和 + 运算符，以确保只能添加​​兼容的单元，并且乘法会产生具有正确功率的单元，并且您在编译时强制执行正确的单元操作。对不起，我不记得更多细节，也找不到这篇文章。谷歌“模板元编程单元示例”会出现一些东西。也很抱歉我说的是 C++。我知道 C# 支持泛型，所以类似的东西应该是可能的。

# java - 如何高效地返回部分文件并发？

> ID：14993918
> 
> 赞同：0
> 
> 时间：2013-02-21T03:09:22.553
> 
> 标签：java, multithreading, concurrency

在我们的项目中，我们将很多文件合并为一个大文件，假设为 4~12GB

现在我需要编写一个服务器来处理客户端请求，

每个请求客户端都想检索这个大文件中的一部分或将一个新文件推送到这个大文件中（尾部），

那么在低延迟下做到这一点的最佳方法是什么？

`RandomAccessFile`? `InputStream`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:35:51.693

我认为您在这里想要的是 ReentrantReadWriteLock。

此锁将允许同时进行读取操作和一次仅进行一次写入操作。您可以在每次读取操作之前获取读取锁，并在读取结束后释放它。在每次写操作之前都有一个写锁，然后释放它。

让您的客户调用上述代码。希望能帮助到你。

```
final ReadWriteLock lock = new ReentrantReadWriteLock();

public void checkFile(String yourData) {

    lock.readLock().lock();

    boolean toWrite = false;
    // Read the file, check for data and update toWrite accordingly
    lock.readLock().unlock();

    if (toWrite) {
        lock.writeLock().lock();

        // write the data to the file

        lock.writeLock().unlock();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:14:41.027

如果您不将块重新组合到单个文件中，将获得最佳性能。下一步是使用NIO 的[FileChannel](http://docs.oracle.com/javase/1.6.0/docs/api/java/nio/channels/FileChannel.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:15:52.057

如果您使用的是 Linux，我建议`cat`在 bash shell 中使用命令来组合文件。高效且不需要其他编程语言。

例子

```
cat file1.txt file2.txt >> file_combine.txt 
```

# java - 如何自动创建发行说明/变更日志？

> ID：14993919
> 
> 赞同：5
> 
> 时间：2013-02-21T03:09:31.823
> 
> 标签：java, maven, jenkins, redmine, nexus

如何自动化构建注释/更改日志创建？

那就是在 sprint 结束时生成已关闭问题的列表，将其链接到已发布的工件，放入 maven 生成的站点，在 Redmine wiki 上发布...

我们使用 Jenkins、Maven、Nexus、Redmine，（...其他工具？）（见下面的标签）

我需要想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:16:22.123

有[maven 更改插件和](http://maven.apache.org/plugins/maven-changes-plugin/)[redmine](http://maven-site.nuiton.org/jredmine/maven-jredmine-plugin/)的等价物（希望从未尝试过）。这两个插件基本上都做同样的事情——它们查询您的问题管理/错误跟踪器以查找版本之间的问题并将它们写下来。从那里你有多种方法可以将其格式化为 html（一种是 xslt）。

把它放在一些只有 jenkins 运行的 maven 配置文件下，这样开发人员的构建不会减慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-22T18:11:21.443

还有这个 redmine 插件[https://github.com/hdgarrood/redmine_release_notes](https://github.com/hdgarrood/redmine_release_notes)。

您需要哪方面的自动化：jenkins 还是 redmine？

# file - 将数据从 Matlab 函数导出到全局框架和默认 matlab 参数

> ID：14993924
> 
> 赞同：0
> 
> 时间：2013-02-21T03:09:56.507
> 
> 标签：file, matlab, directory

我想用我的 matlab 函数做两件事。我有一个函数可以从一系列文件中获取数据。假设我有这个文件结构：

**1号：**

我希望能够使函数中的一些选定变量成为全局可访问的，并在函数完成后持续存在。也就是说我有以下功能：

```
[] = function(directory)
    b = read(directory)
    struct c = (do some stuff with b)
    somehow globalise c
end 
```

我知道您可以拥有`c = function(directory)`然后传递一个变量，但是我不想这样做，我宁愿变量 c 只保留在全局范围内。这可以做到吗？

**2号：**

matlab 函数是否有可能具有默认参数。让我们从上面获取函数。我想要做的是将目录默认为当前目录。例如，如果存在以下数据结构：

```
 MatlabMainFolder
    -> MatlabFunctions
    -> Data 
```

用户应该能够`function`在 Data 中运行，它将使用 Data 目录。但也应该能够`function('../Data')`从 MatlabFunctions 直接执行相同的效果。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:54:42.700

第一的：

我认为以下内容应该使变量可以从函数内全局访问：

```
[] = function(directory)
    b = read(directory)
    global c;           <------
    struct tmp = (do some stuff with b)
    c = tmp;            <------
end 
```

然后，在使用之前添加`global c`您希望`c`可用的所有其他文件。不过，我建议`c = function...`尽可能使用。

正如@Ben 所建议的，`assignin`也可用于将变量分配到不同的工作区。这样，从函数中，可以在工作区中分配任何变量，该`'base'`工作区也是所有其他文件都可以访问的工作区。在这种情况下：

```
assignin('base','c',c) 
```

将在基础工作区中创建一个变量，其值与函数文件中的`c`值相同`c`。（在函数末尾添加这一行）。

第二：

你可以这样做：

```
function(path)
    if nargin<1
         path = '../Data';
    end

    % do things with path
end 
```

这样，如果`function`在没有输入的情况下调用，将使用默认路径`../Data`，否则将使用作为输入给出的路径。`nargin`将等于作为输入给出的参数的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:09:49.140

To 1) globals 和 asignin 经常不受欢迎。你也可以使用`persistent`

伪代码片段：

```
function out=fun((directory)
persistent out
if isempty(out) 
   fill out

return out; 
```

或者甚至处理物品以防您想变得现代；）

To 2): 阅读`doc InputParser`- 它比许多其他语言的工作量更大 - 但它是可能的。

# python - 我是 Python 新手，在我的程序中添加了一行代码后，我设法使 IDLE 崩溃

> ID：14993925
> 
> 赞同：0
> 
> 时间：2013-02-21T03:09:57.940
> 
> 标签：python, python-3.x, crash, python-idle

我正在开发一个小游戏，为了充分披露，我以前学过一些其他语言，但这只是我学习 Python 的第二天。

我试图做的很简单：我试图在两个整数值之间生成一个随机整数（例如随机（a，b））。我环顾四周，看看是否有可以使用的现有函数，并找到了有关名为“randint”的函数的信息。所以我在我的程序中添加了一行代码，看起来像：

```
value = randint(1,15) 
```

我收到一个 randint 未定义的错误。于是我进一步看，看到有人说我需要使用以下代码行导入随机库：

```
import random 
```

我刷新的那一刻 (F5) IDLE 崩溃了。所以后来我想“welp，那是错误的”，我去打开 IDLE 并进行更改。我能够打开 IDLE，但我无法打开文件。事实上，我无法打开我制作的（三个）文件中的任何一个。我在 Notepad++ 中打开了文件并删除了有问题的行（randint 和 import random），但每当我尝试打开文件时，IDLE 仍然崩溃。由于没有更好的主意，我重新启动了笔记本电脑，但行为没有改变。

详细信息：带所有更新的 Windows 7 x64，Python 3.2.3。

...帮助？还有，我做了什么？：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:37:54.230

从另一个论坛收到解决方案：

“如果您想尝试诊断问题，请运行 Python 命令行，然后输入以下行：

`from idlelib import idle`

这将启动空闲，如果出现问题，您应该在命令提示符下获得回溯。”

当我这样做时，它会打开 IDLE 并在我尝试打开文件时产生错误（显示在终端中）。我没有崩溃，而是收到了保存文件的提示（弹出窗口，不在终端中）。我发现这很奇怪，因为我刚刚打开它并且没有进行任何更改。我让它保存文件然后成功！现在我可以使用 IDLE 再次打开我的任何文件。希望这可以帮助遇到此问题的其他人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:06:40.713

我不确定这是否有帮助，但根据我的经验，IDLE 对我来说永远不够可靠。练习使用命令行 Python。

1.  通过运行转到命令提示符`cmd`
2.  `cd`进入你的文件目录
3.  类型`python yourfilename.py`

# java - 网格布局的问题

> ID：14993931
> 
> 赞同：0
> 
> 时间：2013-02-21T03:10:39.747
> 
> 标签：java, swing, nullpointerexception, radio-button, grid-layout

我正在尝试使用 Java 创建一个表单，但我得到了一个`NullPointerException`. 这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Inscripcion extends JFrame implements ActionListener {

    JLabel Nombre;
    JLabel Sexo;
    JTextField CampoTexto;

    JRadioButton M;
    JRadioButton F;
    ButtonGroup Casillas;

    JButton Aceptar;

    JPanel A;
    JPanel B;
    JPanel C;

    Inscripcion() {

        super("Formulario de Inscripción.");

        Container Contenedor = getContentPane();
        Contenedor.setLayout(new FlowLayout());

        Nombre = new JLabel("Nombre: ");
        Contenedor.add(Nombre);
        CampoTexto = new JTextField(20);
        Contenedor.add(CampoTexto);
        A = new JPanel();
        A.setLayout(new GridLayout(2, 1));
        Contenedor.add(A, BorderLayout.NORTH);

        Sexo = new JLabel("Sexo: ");
        Contenedor.add(Sexo);
        M = new JRadioButton("M", false);
        M.addActionListener(this);
        Contenedor.add(M);
        F = new JRadioButton("F", false);
        F.addActionListener(this);
        Contenedor.add(F);
        B.setLayout(new GridLayout(3, 1));
        Contenedor.add(B, BorderLayout.CENTER);

        Aceptar = new JButton("Aceptar");
        Aceptar.addActionListener(this);
        B.setLayout(new GridLayout(3, 1));
        Contenedor.add(B, BorderLayout.SOUTH);
        Contenedor.add(Aceptar, BorderLayout.CENTER);

        setSize(300, 500);
        setVisible(true);

    }

    public void actionPerformed(ActionEvent Evento) {

        String Nom = CampoTexto.getText();
        String Sex = M.isSelected() ? "Masculino":"Femenino";
        System.out.println(Nom + Sex + " ");

    }

    public static void main(String[] Flogging) {

        Inscripcion obj = new Inscripcion();
        obj.setDefaultCloseOperation(EXIT_ON_CLOSE);

    }

} 
```

异常出现在这一行：

```
B.setLayout(new GridLayout(3, 1)); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:16:29.280

`B`从未初始化...请考虑在发布此类问题之前查看您的代码。

# java - 使用 JNA 从 java crash VM 调用 c，谁能告诉我为什么会这样？

> ID：14993936
> 
> 赞同：1
> 
> 时间：2013-02-21T03:11:47.093
> 
> 标签：java, c, jna

使用 JNA 从 java crash VM 调用 c，谁能告诉我为什么会这样？哪里错了？

**c代码：**

```
int Encode(char* systemId, char* account, char* userName, char* tradingPwd, char* expansion, char* ipAddress, char* userAgent, char * encryptedIn, int encrySize); 
```

在 x86_64 x86_64 x86_64 GNU/Linux 机器中将 c 编译为共享的 lig libTestEncode.so，Encode 方法只是对一些字符串进行编码，并将其返回给 java。

**爪哇代码：**

```
 public interface CLibrary extends Library {
    CLibrary INSTANCE = (CLibrary) Native.loadLibrary("TestEncode", CLibrary.class);
    int  Encode(String systemId,String account,String userName,String tradingPwd, String expansion, String ipAddress, String userAgent, byte[] encryptedIn, int encryptSize);      
  }

  public static void main(String args[]) {
    Properties p = new Properties();

    byte [] text = new byte[1024];
    int retCd  =CLibrary.INSTANCE.Encode("NRI","userID","username","password","","","",text, 1024);
    System.out.println(Native.toString(text));
    System.out.println("-----");
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:01:45.317

我在我的 Windows 系统上测试了您发布的代码，您对 JNA 的使用是正确的。问题将出在您的 C 端代码中。您应该将您的 C 代码更改为只返回一些值的无操作空函数。您应该不会再看到 JVM 崩溃。然后检查/调试您的 C 代码。

# java - 如何在 eWay 网络服务上创建 eWayHeader

> ID：14993938
> 
> 赞同：0
> 
> 时间：2013-02-21T03:12:01.187
> 
> 标签：java, web-services, soap

我在使用 eWay 网络服务时遇到了问题。
我通过 wsimport 使用[https://www.eway.com.au/gateway/rebill/test/manageRebill_test.asmx?WSDL](https://www.eway.com.au/gateway/rebill/test/manageRebill_test.asmx?WSDL)
创建了客户端 ws 生成文件后，我调用了 ws 的方法

```
ManageRebillTestSoap soap = new ManageRebillTest() .getManageRebillTestSoap();
CustomerDetails details = soap.createRebillCustomer(....); 
```

消息返回错误是：**根据其数据类型，“eWayCustomerID”元素的值无效。**

Soap 消息的格式是

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <eWAYHeader xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
      <eWAYCustomerID>string</eWAYCustomerID>
      <Username>string</Username>
      <Password>string</Password>
    </eWAYHeader>
  </soap:Header>
  <soap:Body>
    <CreateRebillCustomer xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
      <customerTitle>string</customerTitle>
      <customerFirstName>string</customerFirstName>
      <customerLastName>string</customerLastName>
      <customerAddress>string</customerAddress>
      <customerSuburb>string</customerSuburb>
      <customerState>string</customerState>
      <customerCompany>string</customerCompany>
      <customerPostCode>string</customerPostCode>
      <customerCountry>string</customerCountry>
      <customerEmail>string</customerEmail>
      <customerFax>string</customerFax>
      <customerPhone1>string</customerPhone1>
      <customerPhone2>string</customerPhone2>
      <customerRef>string</customerRef>
      <customerJobDesc>string</customerJobDesc>
      <customerComments>string</customerComments>
      <customerURL>string</customerURL>
    </CreateRebillCustomer>
  </soap:Body>
</soap:Envelope> 
```

在上面的方法上只需添加`<Soap:Body>` 任何人都知道添加 eWayHeader 或`<soap:Header>`在 eWay webservice 上调用方法时？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:16:21.663

这已在此处得到解答 - [wsimport 不会生成与肥皂标头相关的代码](https://stackoverflow.com/questions/7257539/wsimport-doesnt-generate-code-related-to-soap-headers)

> 向 wsimport 命令添加选项“-XadditionalHeaders”解决了这个问题。它为可以传递/检索标头的方法生成一个额外的参数。

# php - 在 php 中使用 datetime 比较登录脚本的时间

> ID：14993964
> 
> 赞同：0
> 
> 时间：2013-02-21T03:15:47.157
> 
> 标签：php, datetime, login

好的，所以我的问题是：当用户有 3 次失败的登录尝试时，他/她应该根据 IP 地址被锁定在他的帐户之外一个小时。IP 地址与字段“attempts”和“time”一起存储在表“login_attempts”中。这是我的代码来拉时间，然后我添加了一个小时，因为那是用户可以尝试再次登录的时间：

```
$user_time = new DateTime('20:04:18');    // example time pulled from the db
$add = new DateInterval('PT1H');          // +1 hour
$user->add($add);                         // should now be 21:04:18 
```

好的，现在这里是当前时间的代码。再说一次，我要补个时间。这将不到一个小时，因此用户仍应被锁定：

```
$now = new DateTime('20:43:22');
if ($now->format('g:i a') < $user_time->format('g:i a')) {
         $diff = $user_time->diff($now);
         echo 'You still have ' . $diff->format('%i minutes') . ' until you can try again.';
}
 else {
        // reset login attempts, process login 
```

由于某种原因，这不能正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:25:06.733

我认为您比较日期是问题所在。尝试使用 getTimestamp() 而不是 format()：

```
$now = new DateTime('20:43:22');
if ($now->getTimestamp() < $user_time->getTimestamp()) {
         $diff = $user_time->diff($now);
         echo 'You still have ' . $diff->format('%i minutes') . ' until you can try again.';
}
 else {
        // reset login attempts, process login 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:10:39.240

You better have a time field in your database table with int datatype and store the output of time() function for every login attempt. after the nth time unsuccessful attempts the user gets locked and initialize lockout. to check if the lockout time is over, simply compare the output of current time() function with the one stored after the third unsuccessful attempt.

```
$lockout = 3600;//if one hour
$query_result_for_last_attempt = "some query";
if((time()-$query_result_for_last_attempt) > $lockout){
header(site.php);
}else{
echo "you still need to wait";
} 
```

of course there are beter fantacies you could do with the code!

# c++ - 类中没有声明成员函数 - 基本编译错误

> ID：14993966
> 
> 赞同：3
> 
> 时间：2013-02-21T03:15:59.017
> 
> 标签：c++, header, compiler-errors

编译基本类和头文件时出现此错误。不确定我是否遗漏了一些明显的东西？如果需要，可以提供任何其他详细信息。

注意：我`#include <string>`在 Event.h 中添加了错误仍然存​​在。

事件.cpp

```
#include "Event.h"
#include <string>

std::string Event::getLabel() {
    return label;
} 
```

事件.h

```
#ifndef EVENT_H
#define EVENT_H

#define EVENT_STOP 0
#define EVENT_START 1

class Event {
private:

protected:
    double time;
    std::string label;
    int type; // EVENT_START OR EVENT_STOP

public:
    std::string getLabel(); 

};

#endif 
```

编译和错误

```
g++ -c -Wall -pedantic correngine.cpp
g++ -c -Wall -pedantic CSVManager.cpp
g++ -c -Wall -pedantic ServerEvent.cpp 
g++    -c -o UPSEvent.o UPSEvent.cpp
g++ -c -Wall -pedantic CorrelationEngineManager.cpp
g++ -c -Wall -pedantic Event.cpp
Event.cpp:4: error: no ‘std::string Event::getLabel()’ member function declared in class ‘Event’
make: *** [Event.o] Error 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-14T18:44:06.257

我有一个类似的问题，并通过删除在标题旁边生成的 [header name].gch 文件解决了这个问题，该文件显然已损坏。也许你可以试试？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T03:19:17.473

您需要`std::string`在 Event.h 中包含标题

```
#ifndef EVENT_H
#define EVENT_H

#include <string>        //<<----  here

#define EVENT_STOP 0
#define EVENT_START 1

class Event {
private:

protected:
    double time;
    std::string label;
    int type; // EVENT_START OR EVENT_STOP

public:
    std::string getLabel(); 

};

#endif 
```

# php - 虚拟主机错误

> ID：14993967
> 
> 赞同：-6
> 
> 时间：2013-02-21T03:16:06.583
> 
> 标签：php, wordpress

我已经下载了一个免费的投资组合主题并将其安装在[http://navkaar.x50x.net/test/](http://navkaar.x50x.net/test/)，但是，我遇到了以下错误，但是 header.php 仍然存在并在 FTP 上与其他文件一起上传。

```
Fatal error: Call to undefined function get_header() in /home/u772590232/public_html
/test/index.php on line 1 
```

如何顺利运行主题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:56:04.907

您尝试在未安装 WordPress 的情况下安装 WordPress 主题。正如您刚刚发现的那样，这是行不通的。安装 WordPress 并首先熟悉它。

# linq - 有没有办法合并多个属性，然后通过 LINQ 排序？

> ID：14993968
> 
> 赞同：0
> 
> 时间：2013-02-21T03:16:06.253
> 
> 标签：linq, sorting, merge

我正在研究一个具有 URL 和 FileName 字段的类。一个对象可以有一个 URL 或一个文件名，但不能同时有这两者。

有没有办法通过 LINQ 合并这两个字段，然后对它们进行排序？我知道我不能使用

```
OrderBy(i => item.URL).ThenBy(i => item.FileName); 
```

因为它只会先通过 URL 对项目进行排序，然后再通过它们各自的 FileNames 对项目进行排序。我需要对它进行排序，就好像我只对一个字段进行排序一样。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:05:37.790

```
var sorted = list.OrderBy(x => x.URL + x.FileName); 
```

如果需要，您可以填充 URL，或者执行您需要的任何其他操作。

# ios - 使用 Enterprise Developers Account 向客户部署 IOS App

> ID：14993975
> 
> 赞同：0
> 
> 时间：2013-02-21T03:16:50.843
> 
> 标签：ios, enterprise, account

我有一个关于使用企业开发者帐户向我们的客户分发 IOS 应用程序的问题。我的客户不想与我分享他们的 Enterprise 帐户，但我有自己的 Enterprise Developers 帐户。我可以使用自己的企业帐户向客户分发应用程序吗？有没有替代解决方案？

谢谢和问候， R ex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:05:22.463

如果可能并且您的客户愿意，请与他们坐下来或通过 Skype 屏幕共享，向他们展示如何在配置门户中创建必要的证书和分发配置文件。如果他们有技术专长，他们可以自己做。然后，您可以使用他们的企业帐户构建他们的应用程序。

您的客户可能只是对将帐户详细信息交给您持怀疑态度。

# ruby-on-rails - Rails：Excel 列、种子

> ID：14993978
> 
> 赞同：2
> 
> 时间：2013-02-21T03:17:19.037
> 
> 标签：ruby-on-rails, excel

我创建了一个带有列 ID、任务、描述的 Excel 工作表

我找到了这个并把它放在我的seeds.rb中：

```
require 'spreadsheet'

Spreadsheet.open('/db/data/uebung.xls') do |uebung|
  book.worksheet('Sheet1').each do |row|
  break if row[0].nil?
  puts row.join(',')
end
end 
```

我收到这条消息：

```
 [DEPRECATED] By requiring 'parseexcel', 'parseexcel/parseexcel' and/or
         'parseexcel/parser' you are loading a Compatibility layer which
         provides a drop-in replacement for the ParseExcel library. This
         code makes the reading of Spreadsheet documents less efficient and
         will be removed in Spreadsheet version 1.0.0 
```

你觉得怎么样。是不是很容易导入excel数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:51:00.513

我使用[roo](http://roo.rubyforge.org)将 excel 导入我的 rails 应用程序。做到这一点并不难。如果你愿意，你可以观看Ryan Bates[的 railscasts](http://railscasts.com/episodes/396-importing-csv-and-excel)来使用 roo。

我给你我的 roo 示例代码

宝石文件

```
gem 'rubyzip'
gem 'spreadsheet'
gem 'nokogiri'
gem 'roo' 
```

控制器：

```
def import
  @trainerone = Trainerone.find(params[:trainerone_id])

  Trainerone.import(params[:file], @trainerone.id)
  redirect_to @trainerone, notice: "Import Success."
end 
```

模型：

```
def self.import(file, trainer_id)
  trainerone = Trainerone.find(trainer_id)
  spreadsheet = open_spreadsheet(file)
  header = spreadsheet.row(1)
  (2..spreadsheet.last_row).each do |i|
    row = Hash[[header, spreadsheet.row(i)].transpose]
    trainer = Trainerone.create! row.to_hash
  end
end

def self.open_spreadsheet(file)
  case File.extname(file.original_filename)
  when '.csv' then Csv.new(file.path, nil, :ignore)
  when '.xls' then Excel.new(file.path, nil, :ignore)
  when '.xlsx' then Excelx.new(file.path, nil, :ignore)
  else raise "Unknown file type: #{file.original_filename}"
  end
end 
```

看法：

```
<%= form_tag import_trainerones_path(@trainerone.id), multipart: true do %>
    <%= file_field_tag :file %>
    <%= submit_tag "Import" %>
<% end %> 
```

这`import_trainerones_path`是取自您的`route`which 指向您`action: import`的`trainerone controller`（查看上面的控制器）

希望能帮到你..！

# oracle - Oracle 创建触发器错误（错误的绑定变量）

> ID：14993980
> 
> 赞同：10
> 
> 时间：2013-02-21T03:17:34.277
> 
> 标签：oracle, plsql, database-trigger

我尝试使用以下代码创建触发器。

```
CREATE OR REPLACE TRIGGER MYTABLE_TRG 
BEFORE INSERT ON MYTABLE 
FOR EACH ROW 
BEGIN 
 select MYTABLE_SEQ.nextval into :new.id from dual; 
END; 
```

我收到错误

```
Error(2,52): PLS-00049: bad bind variable 'NEW.ID' 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-21T06:48:12.497

似乎错误代码告诉您表中没有这样的列 ID...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:36:36.537

不知何故，您的环境将您的代码视为 SQL 而不是 DDL 语句。这对我有用（从命令提示符在 sqlplus.exe 中运行）：

```
SQL> create sequence mytable_seq;

Sequence created.

SQL> create table mytable (id number);

Table created.

SQL> CREATE OR REPLACE TRIGGER MYTABLE_TRG
  2  BEFORE INSERT ON MYTABLE
  3  FOR EACH ROW
  4  BEGIN
  5   select MYTABLE_SEQ.nextval into :new.id from dual;
  6  END;
  7  /

Trigger created. 
```

注意尾随的“/” - 这在您正在编译的应用程序中可能很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T06:59:49.810

如果使用适当的命名约定，则发现此类错误会更容易（其中适当的手段使用前缀和后缀），因为通用对象名称可以更好地暗示它们的目的，即这样的东西会发现[正确](https://stackoverflow.com/a/14996192/65706)的答案

```
 --START -- CREATE A SEQUENCE
  /*
  create table "TBL_NAME" (
     "TBL_NAME_ID"      number(19,0) NOT NULL 
    , ... 
  */  
  --------------------------------------------------------
  --  drop the sequence if it exists
  -- select * from user_sequences ; 
  --------------------------------------------------------
  declare
     c int;
  begin
     select count(*) into c from user_sequences 
      where SEQUENCE_NAME = upper('SEQ_TBL_NAME');
     if c = 1 then
        execute immediate 'DROP SEQUENCE SEQ_TBL_NAME';
     end if;
  end;
  /

  CREATE SEQUENCE  "SEQ_TBL_NAME"  
  MINVALUE 1 MAXVALUE 999999999999999999999999999 
  INCREMENT BY 1 START WITH 1 
  CACHE 20 NOORDER  NOCYCLE ;

  -- CREATE  
  CREATE OR REPLACE TRIGGER "TRG_TBL_NAME" 
  BEFORE INSERT
  ON "TBL_NAME"
  REFERENCING NEW AS New OLD AS Old
  FOR EACH ROW
  DECLARE
  tmpVar NUMBER;

  BEGIN
     tmpVar := 1 ;

     SELECT SEQ_TBL_NAME.NEXTVAL INTO tmpVar FROM dual;
     :NEW.TBL_NAME_ID := tmpVar;

  END TRG_TBL_NAME; 
  /
  ALTER TRIGGER "TRG_TBL_NAME" ENABLE;
  -- STOP  -- CREATE THE TRIGGER 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-02T02:50:45.120

If you're like me and your code should be working, try dropping the trigger explicitly before you re-create it. Stupid Oracle.

# c# - 具有自动完成功能的 SQL 性能

> ID：14993982
> 
> 赞同：0
> 
> 时间：2013-02-21T03:17:47.563
> 
> 标签：c#, sql, winforms

我正在尝试在 Windows 窗体中创建一个自动完成文本框。我的想法是在 TextChanged 函数中调用数据库，这样我就可以动态地为用户获取自动完成选项。我需要知道这是否会以任何方式影响数据库性能。据我所知，在 web 环境中使用自动完成 jquery 控件会产生类似的效果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:24:11.143

每次触发 TextChanged 时调用数据库可能不是一个好主意……通常您应该避免频繁调用数据库，这是一种很好的做法。

我建议在表单初始化时从数据库创建一个列表，并将该列表用于自动完成选项。

**编辑：**

在`TextChanged`事件中；

```
if (txtFilter.Text.Length >= 3)
{
    foreach (string s in AutoCompleteList)
    {
        if (s.Contains(s))
        {
            // add to list of Suggestions
        }
    }
} 
```

然后，您可以获取建议列表并将其显示在自动完成中。

# sqlite - SELECT * ... WHERE col="string" 返回无效行

> ID：14993984
> 
> 赞同：0
> 
> 时间：2013-02-21T03:17:59.573
> 
> 标签：sqlite

我得到一个令人困惑的选择......结果，表定义是：

```
CREATE TABLE modes (
               key INTEGER,
               mode INTEGER,
               channel INTEGER,
               name TEXT,
               short_name TEXT,
               def INTEGER,
               highlight INTEGER,
               catagory TEXT,
               subcatagory TEXT); 
```

它填充了：

```
sqlite> select * from modes;
  3|6|5|Green|G|0|255|a|b
  3|6|6|Blue|B|0|255|a|b
  3|9|1|Mode|Mode|0|255|a|b
  3|9|2|Auto Mode Speed|Speed|0|255|a|b
  3|9|3|Strobe|Strobe|0|255|a|b
  3|9|4|Red|R|0|255|a|b
  3|9|5|Green|G|0|255|a|b
  3|9|6|Blue|B|0|255|a|b
  3|9|7|Red2|R2|0|255|a|b
  3|9|8|Green2|G2|0|255|a|b
  3|9|9|Blue2|B2|0|255|a|b
  3|6|4|Red|R|0|255|a|b
  3|6|1|6|6|0|255|a|b
  3|6|2|Auto mode speed|speed|0|255|a|b
  3|6|3|Strobe|Strobe|0|255|strobe|b 
```

注意倒数第三行： **3|6|1|6|6|0|255|a|b**

如果我选择： `SELECT * FROM modes where mode=6 and name="Mode" order by channel;`

它返回： `3|6|1|6|6|0|255|a|b`

第 4 列和第 5 列（名称和短名称）不应该匹配，它们是 6，匹配项是“模式”。如果我将匹配字符串“Mode”更改为任何其他字符串，它会按预期工作。“模式”是保留字吗？或者我是否以某种方式将变量“模式”设置为 6？我不明白这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:35:01.883

如果你使用 ["] 它意味着列，所以当你这样做时

```
name="Mode" 
```

这意味着您搜索与列模式具有相同值的列名。因此，您实际上在代码中选择 where mode=6 和 name=6 。如果要使用字符串，请使用 ['] 而不是 ["]

我尝试在我的数据库上使用该代码..

```
select * from products
where name="Mode" 
```

我得到了错误

```
ERROR:  column "Mode" does not exist
LINE 2: where name="Mode" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:00:39.993

如果其他人正在寻找，我终于在文档中找到了它。它在[sqlite3 常见问题解答中](http://www.sqlite.org/faq.html#q24)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:23:40.473

我不熟悉 sqlite3，但我会说它看起来像你在做 name="Mode" ，它正在获取模式.mode 对象并检查它。

如果你这样做`SELECT * FROM modes where name="Mode" order by channel`。你可能会发现它也给了你`3|6|1|6|6|0|255|a|b`。

# jquery - Jquery 对话框字体大小

> ID：14993993
> 
> 赞同：1
> 
> 时间：2013-02-21T03:18:43.823
> 
> 标签：jquery, jquery-ui

如何在打开之前更改 Jquery UI 对话框按钮的字体大小以及通用按钮的字体大小？它是哪个属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:21:12.340

你可以用css试试，

```
#dialogBox .ui-button-text {
    font-size: 10px; /* change font size */
    padding: 1px 1px 1px 1px; /* change padding */
} 
```

或者使用 Jquery，

```
$(".ui-button-text").css({"font-size": +10+"px"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:21:12.410

使用 CSS 的`font-size`属性：

```
button {
  font-size: 28px;
} 
```

# css - 浏览器工具栏干扰 CSS 标题区域

> ID：14993996
> 
> 赞同：0
> 
> 时间：2013-02-21T03:19:02.857
> 
> 标签：css, webpage, toolbar

我正在设计一个网页，我正在使用以下 CSS 创建页眉，主标题图像以 1000 像素宽度的页面为中心，并且重复的边缘图像穿过身体的顶部和下方标头分布在整个浏览器页面宽度上。

```
body {
    font-family:  Tahoma;
    background-color: #0184AE;
    background-image: url('/images/headeredge.jpg');
    background-repeat: repeat-x;
    background-position: top;
    margin: 0;
    position: relative;
}

.whole-page {
    width: 1000px;
    margin: auto;
    padding: 0;
    text-align: left;
    position: relative;
    border-radius: 0 0 15px 15px;
}

.header {
    width: 100%;
    height: 120px;
    color: white;
    background-image: url('/images/header.jpg');
    background-repeat: no-repeat;
    font-size: 10pt;
    margin-top: 0px;
    margin-bottom: 0;
    padding-top: 10px;
    border: 1px black none;
    position: relative;
} 
```

上面的 CSS 有效，除非出现工具栏。我正在使用带有 SEO 工具栏的 Chrome，它正确地替换了居中的标题图像，它将它推到工具栏下方，这样我就可以看到整个图像。

但是，重复的身体图像根本没有移位，工具栏覆盖了顶部这么多像素。这让整个事情变得不正常。

我在 CSS 中尝试了一些选项，但到目前为止似乎没有任何效果。我在这里猜测，但我认为工具栏使用“存在”在 body 标记下的 CSS 来绘制自己。

任何人都可以提出任何建议，我想要整个标题被推下，或者不。只是这样它是一致的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:30:48.823

使用 Chrome 开发人员工具（按 f12），您可以检查（单击底部的放大镜图标）工具栏元素。这样做您可以看到它确实已插入到文档正文中。不幸的是，这将导致您看到的实际行为。换句话说，这不是你的错，而是工具栏开发者的错。

一个（丑陋的）解决方法是在您的内容周围放置一个额外的 div 并将背景应用于该内容。

例如

**HTML**

```
<body>
    <div id="notBody">
      <!--Rest of your headers, content, etc here -->
    </div>
</body> 
```

**CSS**

```
body {
font-family:  Tahoma;
background-color: #0184AE;    
margin: 0;
position: relative; 
}

#notBody {   
background-image: url('/images/headeredge.jpg');
background-repeat: repeat-x;
background-position: top;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:42:07.633

在您的标题类中更改为`position: absolute;`并用于`top`设置您希望标题从页面顶部开始的像素数。

```
.header {
    position: absolute;

   /* all your other styles */

    top: 200px;
} 
```