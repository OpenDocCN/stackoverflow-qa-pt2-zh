# StackOverflow 问答 14271000-14271999

# unit-testing - 从 Visual Studio/Microsoft 测试框架运行时，Log4net 找不到配置文件

> ID：14271000
> 
> 赞同：7
> 
> 时间：2013-01-11T03:05:36.767
> 
> 标签：unit-testing, configuration, log4net

我们正在为在 .NET 4.0 下运行的业务层编写单元测试。业务层是一个简单的 C# 类库，通常在 SOAP 和 REST Web 服务中运行。我们的应用程序在单独的包装程序集中使用 log4net 进行日志记录。日志程序集中的 C# 代码有一个程序集信息指令，它告诉 log4net 配置文件的名称，一个 la-

[程序集：log4net.Config.XmlConfigurator(ConfigFile="AcmeLogging.config", Watch=true)]

通过包装器初始化 log4net 在 Web 服务中可以正常工作。当我们使用单元测试程序集对其进行初始化时，它似乎看不到配置文件。configuratino 文件通过属性配置为复制到执行目录，我们确实在 bin\debug 目录中看到它。使用在同一文件夹中运行的日志程序集的快速控制台测试程序可以正常工作。奇怪的是，行为问题是断断续续的，在不同的时间出现在不同开发人员的机器上，无法以任何确定性的方式解决。

单步执行包装程序集代码，log4netLogManager.GetLogger() 调用似乎正确返回，但 log.Logger.Repository.GetAppenders() 返回的附加程序列表为空。由于无论文件是否在 Bin\Debug 文件夹中，这种错误行为都是相同的，因此我们认为它没有看到该文件。

任何关于我们在 Microsoft 测试框架中运行 log4net 所缺少的线索将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T06:29:44.103

单元测试的独特之处在于，如果您在单元测试中需要配置文件，则需要将它们作为部署项包含在内。这是我如何在测试类中执行此操作的示例：

```
[TestClass]
[DeploymentItem("hibernate.cfg.xml")]
public class AsyncForwardingAppenderTest
{

} 
```

除了`Deployment`您需要在测试设置中**启用部署的属性。**为此，请转到测试-> 编辑测试设置->。然后点击`Deployment`右边的区域。单击复选框`Enable Deployment`。

完成此操作并运行测试后，您的配置文件应位于测试结果文件夹中。**TestResults\username_machine date stamp\Out**。如果您的配置文件不在此文件夹中，它将无法工作。这就是 DeploymentItem 属性的作用。它将文件粘贴在此**Out**文件夹中。

如果您不想在每个测试类中包含 DeploymentItem 属性，我所做的就是创建一个基本测试类，所有使用 log4net 的测试都从该类继承并用 DeploymentItem 属性标记它。

# javascript - 在浏览器窗口的顶部和底部动态创建元素

> ID：14271005
> 
> 赞同：1
> 
> 时间：2013-01-11T03:06:13.940
> 
> 标签：javascript, jquery, html, css

`<div>`我正在使用以下代码在浏览器窗口的顶部和底部动态创建“覆盖” 。

```
$(function() {
  var winWidth = $(window).width();
  var winHeight = $(window).height();
  $('body').append('<div style="position:fixed;left:0px;top:0px;width:' +
      winWidth + 'px;height:30px">TOP</div>');
  $('body').append('<div style="position:fixed;left:0px;top:' +
      (winHeight - 30) + 'px;width:' + winWidth + 'px;height:30px">BTM</div>');
} 
```

顶部`<div>`恰好出现在我想要的位置。

但底部`<div>`是不可见的。在谷歌浏览器中检查它时，它似乎表明它位于窗口底部的下方。

谁能看到我在这里错过了什么？

**编辑**我的原始代码可以在[http://jsbin.com/uravif/41找到](http://jsbin.com/uravif/41)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:18:44.733

也许我误解了，但你的代码似乎对我有用（这里是[Fiddle](http://jsfiddle.net/5Z9zv/)）。

```
var winWidth = $(window).width();
var winHeight = $(window).height();
$('body').append('<div style="position:fixed;left:0px;top:0px;width:' +
      winWidth + 'px;height:30px">TOP</div>');
$('body').append('<div style="position:fixed;left:0px;top:' +
      (winHeight - 30) + 'px;width:' + winWidth + 'px;height:30px">BTM</div>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:10:29.107

你只是在你的 CSS 中丢失了：

```
body{
  height:100%; /* to fix jsBin bug with $(window).height() */
} 
```

否则玩`bottom`你的“BTM”:) 元素的位置，而不是`top`当然。

**编辑** `$(window).height()`将在离线时工作得很好，所以我只是认为你在搞乱那个 jsBin 错误

**[jsbin 演示](http://jsbin.com/umedos/1/edit)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T03:11:01.650

有一个底部样式属性可用于此：

```
$('body').append('<div style="position:fixed;left:0px;bottom:30px;width:' + winWidth + 'px;height:30px">BOTTOM</div>'); 
```

底部属性将元素定位在距屏幕底部 xx px 处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T03:11:23.490

试试下面：

```
$(function() {
  var winWidth = $(window).width();
  var winHeight = $(window).height();
  $('body').append('<div style="position:fixed;left:0px;top:0px;width:' +
      winWidth + 'px;height:30px">TOP</div>');
  $('body').append('<div style="position:fixed;left:0px;bottom:0px;width:' + winWidth + 'px;height:30px">BTM</div>');
} 
```

# eclipse - 如何使用可视化编辑器而不是类似于 genmodel 文件的默认编辑器创建 RCP 或插件

> ID：14271008
> 
> 赞同：0
> 
> 时间：2013-01-11T03:06:51.073
> 
> 标签：eclipse, dsl, epsilon

如果我运行测试项目（由 Eugenia 生成），作为 Eclipse 应用程序，我可以创建一个“漂亮”的编辑器：

![在此处输入图像描述](../Images/eeb5cb7f644c3e66ee954b133e4619f6.png)

但是，如果我将所有内容都导出为插件，我只能创建一个“丑陋”的编辑器（类似于 genmodel 文件）：

![在此处输入图像描述](../Images/6fb41d3d4cec9b2ca0b667db933940e4.png)

如果我尝试创建 RCP 应用程序，也会发生同样的情况：

![在此处输入图像描述](../Images/c42e64da4ffcc97ff8b68b59ce100f9e.png)

是否有生成“漂亮”编辑器的“神奇”选项？

谢谢你的帮助！:)

卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:33:41.453

我们必须将 Eugenia 的力量与 GMF 的力量结合起来。这是我发现的最好的方法：

*   右键单击 file.ecore - Eugenia - 生成 GMF 工具、图形和地图模型。
*   右键单击 file.ecore - Eugenia - 生成 EMF GenModel
*   打开file.genmodel - 右键file_editor - Generate All（可能之前需要在genmodel文件的properties中选择RCP）
*   右键单击 file.gmfmap - 创建生成器模型 - 选择选项 Generate RCP Application when available
*   右键file.gmfgen - 生成图表代码

在我的特殊情况下，因为我使用的是 .svg 图像，所以出现错误，要解决它，我必须：

*   打开 InEditPart.java - 找到这一行：import org.eclipse.gmf.runtime.lite.svg.SVGFigure；- 单击该行的错误 - 修复项目设置
*   以前我必须安装（帮助 - 安装新软件）GMF Tooling Experimental SDK 才能使用 svg 图像

我希望它对某人有帮助！

卡洛斯

# c# - 使用jquery检查单选按钮时如何显示文本框和下拉菜单？

> ID：14271009
> 
> 赞同：0
> 
> 时间：2013-01-11T03:06:59.257
> 
> 标签：c#, jquery, asp.net-mvc

大家好，我有一些与每个广播按钮相对应的广播按钮和文本框。我想做的是检查单个单选按钮时，请从以下格式显示相应的文本框。

```
 @foreach(var item in Viewbag.Ids)
        {
         <div class="group">
          <label class="label">
           @Html.RadioButton("Rdbtn",new{value=@item.value})
          </label>
            <div class="control">
                  <input type="text"  />
            <div>
        </div> 
```

在另一种情况下

```
 <div>
        @Html.RadioButtonFor(m=>m.IsFlat)
        @Html.RadioButtonFor(m=>m.IsFree)
        @Html.RadioButtonFor(m=>m.IsTax)
        @Html.DropDownListFor(m=>m.Products)
       </div> 
```

我在做什么上面只有一个单选按钮必须在选中一个时选中另一个应该取消选中我这样做是这样的

```
 $('input[type=radio]').change( function(){
    if(this.checked)
        {
                  $(this).closest('div').find('input[type=radio]').not(this).attr('checked',false)
        }
     }); 
```

这工作正常，我想在检查“@Html.RadioButtonFor(m=>m.IsTax)”时播放 dropdwon 我该怎么做，如果选中，我必须在编辑模式下检查单选按钮谁能帮我做这件事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:48:25.657

对于你的第一个问题

更改剃须刀代码以添加类

```
 @Html.RadioButton("Rdbtn",new{ .value = @item.value , .class = "radio1"}) 
```

然后将jquery更改为：

```
$('.radio1').change( function(){
  if($(this).is(':checked')){
       $(this).closest('input').show();
  } 
```

第二个问题

在每个收音机中添加一个类

```
 @Html.RadioButton("Rdbtn",new{value=@item.value, new { .class = "radio2"}) 
```

然后是jQuery

```
$('.radio2').change(function(e){
  e.preventDefault(); //im not too sure you need this
  $('.radio2').attr('checked', false);
  $(this).attr('checked', true);    
}); 
```

就像我在评论中所说的那样，我强烈建议您不要这样做，甚至不确定它是否真的有效。该脚本将在客户端运行，它将执行您想要的操作，但在服务器端它可能会抛出错误，尝试将单选按钮绑定到 bools 的方式。再次，这个答案是因为你要求它 - 这不是正确的方法。

# c++ - 将 32 位和 64 位 .so 文件与 g++ 链接以用于 c++ 程序

> ID：14271014
> 
> 赞同：4
> 
> 时间：2013-01-11T03:07:29.970
> 
> 标签：c++, g++, 64-bit

我正在尝试为 c++ 程序同时链接 32 位和 64 位 .so 文件。我使用的是 64 位 Ubuntu 12.04.1 我也没有要重新编译的源文件。

当我运行 g++ 命令时：

```
g++ onlineTraining.cpp -I /usr/local/MATLAB/R2012a_Student/extern/include/ -L /home/forest/SoarSuite/out/ -L /usr/local/MATLAB/R2012a_Student/bin/glnx86/ -I /home/森林/SoarSuite/out/include -leng -lmat -lmex -lut -lSoar

```

我得到以下输出，因为它无法识别 32 位 .so 文件：

```
/usr/bin/ld：搜索-leng时跳过不兼容的/usr/local/MATLAB/R2012a_Student/bin/glnx86//libeng.so
/usr/bin/ld: 找不到 -len
/usr/bin/ld：搜索-lmat时跳过不兼容的/usr/local/MATLAB/R2012a_Student/bin/glnx86//libmat.so
/usr/bin/ld: 找不到 -lmat
/usr/bin/ld：搜索-lmex时跳过不兼容的/usr/local/MATLAB/R2012a_Student/bin/glnx86//libmex.so
/usr/bin/ld: 找不到 -lmex
/usr/bin/ld：搜索-lut时跳过不兼容的/usr/local/MATLAB/R2012a_Student/bin/glnx86//libut.so
/usr/bin/ld: 找不到 -lut
collect2: ld 返回 1 个退出状态

```

当我使用 -m32 运行 g++ 命令时：

```
g++ -m32 onlineTraining.cpp -I /usr/local/MATLAB/R2012a_Student/extern/include/ -L /home/forest/SoarSuite/out/ -L /usr/local/MATLAB/R2012a_Student/bin/glnx86/ -I /家/森林/SoarSuite/out/include -leng -lmat -lmex -lut -lSoar

```

我得到以下输出，因为现在它无法识别 64 位 .so 文件：

```
/usr/bin/ld: 搜索 -lSoar 时跳过不兼容的 /home/forest/SoarSuite/out//libSoar.so
/usr/bin/ld: 找不到 -lSoar
/usr/bin/ld：在搜索 -lstdc++ 时跳过不兼容的 /usr/lib/gcc/x86_64-linux-gnu/4.6/libstdc++.so
/usr/bin/ld：在搜索 -lstdc++ 时跳过不兼容的 /usr/lib/gcc/x86_64-linux-gnu/4.6/libstdc++.a
/usr/bin/ld: 找不到 -lstdc++
collect2: ld 返回 1 个退出状态

```

是否可以同时链接 34 位和 64 位 .so 文件？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:32:49.883

不，这是不可能的。32 位库只能链接到 32 位可执行文件，64 位库只能链接到 64 位可执行文件。

如果您尝试链接的 Matlab 库仅作为 32 位可用，则您还需要将应用程序构建为 32 位（使用`-m32`），并且仅链接 32 位库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T03:16:39.027

我建议制作一个运行两个编译器命令的 shell 脚本或制作文件。

# javascript - 事件的范围问题：避免内联 Javascript 的良好做法是什么？

> ID：14271022
> 
> 赞同：0
> 
> 时间：2013-01-11T03:07:57.723
> 
> 标签：javascript, oop, events, scope, prototype

我似乎在使用`addEventListener`即时匿名函数内部时遇到了范围问题。

在事件侦听器内部，我正在创建一个在立即函数之外构造的 Javascript“类”实例（使用构造函数 and `prototype`）。

为了保持良好的实践，我想使用即时函数来避免全局变量，并`addEventListener`避免使用内联 Javascript（从而将其与 html 分开）。

那么我怎样才能在没有范围问题的情况下正确地做到这一点，这样做的好做法是什么？

* * *

这是我的html：

```
<html>
    <head>
        <title>asdf</title>
    </head>
    <body>
        <input type = "text" id = "userInput" />
        <input type = "button" id = "submitButton" value = "submit" />

            <script type = "text/javascript" src = "asdf.js" />
    </body>
</html> 
```

...这是我的 Javascript `asdf.js`（*不起作用*）：

```
// constructor for object-oriented processing of the user input
function Statement(expression)
{
    this.expression = expression;
}
    // instance method
    Statement.prototype.checkSyntax = function()
    {
        var newExp = this.expression;

        return newExp;
    };

// immediate anonymous function
(function()
{   
    var submitButton = document.getElementById("submitButton");

    // event listener for the submit button
    submitButton.addEventListener("onclick", function(event)
    {
        var userInput = document.getElementById("userInput");

        // creating a new object with constructor above
        var expr = new Statement(userInput);

        // calling instance method of the "class" Statement
        alert(expr.checkSyntax() );

        // disable the button after first use
        event.stopImmediatePropagation();
    }, false);

})(); // end of immediate anonymous function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:18:31.857

> 我的 Javascript 不起作用

可能存在一些问题，但与（恕我直言不必要的）IEFE 无关：

*   `addEventListener`需要没有事件名称`"on"`- 这只是`attachEvent`.
*   确保您的 JS 在创建 DOM 元素后执行 - 否则`submitButton`将`null`
*   我猜你想将一个字符串传递给`Statement`构造函数，而不是`<input>`DOM 节点 - 使用`userInput.value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:15:24.697

`addEventListener`接受一个像`click`, not的论点`onclick`。但是，较旧的 IE`attachEvent`需要`onclick`. 其他一切似乎都很好。

# asp-classic - 突然出现错误“80020009”

> ID：14271024
> 
> 赞同：0
> 
> 时间：2013-01-11T03:08:01.357
> 
> 标签：asp-classic

我在[这里收到此页面上](http://www.inside-guides.co.uk/brentwood/news/2012/December/changes-to-political-balance-off-the-council.html)的错误，我已经有一段时间没有碰它了。我今天编辑了一个页面模板，然后看到了错误，但我不明白为什么会这样。

这是代码，它是第 56 行：

```
<!--#include virtual="/System/Startup_Public.asp"-->
<%
'response.write request.querystring

sql = "SELECT *,dbo.RemoveNonAlphaCharacters(cn_title) AS URL FROM CommunityNews WHERE "&_ 
    " cn_live = 1 AND cn_franchise = '{"&session("PublicFranchiseGID")&"}' "&_ 
    "AND DATENAME(month,cn_startdate) = '"&getquery("m")&"' "&_ 
    "AND YEAR(cn_startdate) = "&cint(getquery("y"))&" "&_
    "AND dbo.RemoveNonAlphaCharacters(cn_title) = '"&getquery("a")&"';"
getrs rs,sql,""

if rs.recordcount = 0 then 
    response.write sql
    response.write "Event not found." : response.end
end if

If Session("PublicFranchiseGID") = "" then
    Response.Redirect "/"
End if

    sLink = "/" & lcase(session("publicfranchisename")) & "/news/" & year(rs("cn_startdate")) & "/" & monthname(month(rs("cn_startdate"))) & "/" & lcase(rs("URL")) & ".html"
    if not sLink = request.ServerVariables("HTTP_X_REWRITE_URL") then
        response.status = "301 Moved Permanently"
        response.addheader "Location", "http://www.inside-guides.co.uk" & sLink
        response.end
    end if

EnsurePageIsBasicHTTP

startdate = date()
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title><%=server.HTMLEncode(""&rs("cn_title"))%> | <%=server.HTMLEncode(Session("PublicFranchiseName"))%>&nbsp;News, Essex</title>
<meta name="Description" content="<%=server.HTMLEncode(""&rs("cn_title"))%> | <%=server.HTMLEncode(Session("PublicFranchiseName"))%>&nbsp;News, Essex" />
<meta name="Keywords" content="<%=server.HTMLEncode(""&rs("cn_title"))%>, <%=server.HTMLEncode(Session("PublicFranchiseName"))%>, Submit News" />
<link rel="stylesheet" type="text/css" href="/css/hot-sneaks/jquery-ui-1.8.22.custom.css"/>
<!--#include virtual="/Assets/Templates/Public/Franchise/HeadCSS.asp"-->
<link rel="stylesheet" type="text/css" href="/css/NewsDetails.css"/>
<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui-1.8.22.custom.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(e) {
        $('#datepicker').datepicker({
        dateFormat:'dd/mm/yy'
        });
    });
</script>
</head>
<body id="news">
<!--#include virtual="/Assets/Templates/Public/Franchise/News.asp"-->

    <div class="middle-content-grey main-article clearfix">
    <h1 class="event-title"><%=server.HTMLEncode(""&rs("cn_title"))%></h1>
    <% if len(""&rs("cn_fullimage"))>0 then %>
        <img src="/includes/tn.asp?src=/LiveStorage/Uploads/image/CommunityNews/<%=server.URLEncode(""&rs("cn_fullimage"))%>" class="fullimage" />
    <% end if %>
    <div class="event-address"><h3><img class="newsitem" src="/images/map.png" alt="event location" /> Submitted by <%=server.HTMLEncode(rs("cn_location"))%></h3></div>
    <div class="event-date"><h4><img class="newsitem" src="/images/date.png" alt="event date" /> On <%=formatdatetime(rs("cn_startdate"),1)%>
    <% if not rs("cn_startdate") = rs("cn_enddate") then %> - <%=formatdatetime(rs("cn_enddate"),1)%><% end if %></h4></div>

    <div class="article-details"><p><%=rs("cn_article")%></p></div>
    </div>
<br />
    <div id="frmcomment" class="middle-content-grey">
    <h2>Visitor Comments</h2>

    <% getrs com,"SELECT * FROM CommunityNewsComments WHERE nc_article = "&cint(rs("cn_id"))&" AND nc_approved = 1 ORDER BY nc_datetime ASC;",""
    if com.recordcount = 0 then
    %><p class="comment">Be the first to comment</p><%
    else
        while not com.eof
            %>
            <div class="comment">
                <div class="title"><%=formatdatetime(com("nc_datetime"),1)%>&nbsp;at&nbsp;<%=formatdatetime(com("nc_datetime"),3)%> by <%=server.HTMLEncode(""&com("nc_name"))%></div>
                <p><%=server.HTMLEncode(""&com("nc_comment"))%></p>                
            </div>
            <%
        com.movenext : wend
    end if 
    %>
    <h3>Leave a Comment:</h3>
    <form id="form" method="post" action="" 
    onsubmit="
    if ($('#email').val()=='' || $('#name').val()=='' || $('#comment').val()=='') {alert('Please complete all fields');return false}
    $.ajax({
        type:'POST',
        url:'/ajax/newsComment.asp',
        data:$(this).serialize(),
        success: function(data){
            $('#frmcomment').html(data);
        }
    });return false;
    "><input type="hidden" name="news" id="news" value="<%=server.HTMLEncode(""&rs("cn_id"))%>" />
        <label>Email Address<span class="smaller">Required</span></label>
        <input type="text" name="email" id="email" />
        <label>Your Name<span class="smaller">Required</span></label>
        <input type="text" name="name" id="name" />
        <label>Your comment<span class="smaller">Required</span></label>
        <textarea name="comment" id="comment"></textarea>
        <button class="button medium news-green form" type="submit"><span>Leave Comment</span></button><br />
        <textarea name="options" id="options" style="display:none;"></textarea>
    </form>
    </div>

<br />
 <a class="button medium news-green top" href='#top'><span>Top</span></a>
 <a class="button medium news-green home" href="/<%=lcase(Session("PublicFranchiseName"))%>/news/index.html"><span>News</span></a>
<!--#include virtual="/Assets/Templates/Public/Franchise/TemplateEnd.asp"-->
</body>
</html>
<!--#include virtual="/System/Shutdown.asp"--> 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:44:43.527

尝试这个

```
<!--#include virtual="/System/Startup_Public.asp"-->
<%
'response.write request.querystring

sql = "SELECT *,dbo.RemoveNonAlphaCharacters(cn_title) AS URL FROM CommunityNews WHERE "&_ 
    " cn_live = 1 AND cn_franchise = '{"&session("PublicFranchiseGID")&"}' "&_ 
    "AND DATENAME(month,cn_startdate) = '"&getquery("m")&"' "&_ 
    "AND YEAR(cn_startdate) = "&cint(getquery("y"))&" "&_
    "AND dbo.RemoveNonAlphaCharacters(cn_title) = '"&getquery("a")&"';"
getrs rs,sql,""

if rs.recordcount = 0 then 
    response.write sql
    response.write "Event not found." : response.end
end if

If Session("PublicFranchiseGID") = "" then
    Response.Redirect "/"
End if

If NOT rs.EOF Then
    ' Arrange / retrieve these in the order they're in from your database table
    cn_id = rs("cn_id")
    cn_startdate = rs("cn_startdate")
    URL = rs("URL")
    cn_title = rs("cn_title")
    cn_fullimage = rs("cn_fullimage")
    cn_location = rs("cn_location") 
    cn_enddate = rs("cn_enddate")
    cn_article = rs("cn_article")
End If

    sLink = "/" & lcase(session("publicfranchisename")) & "/news/" & year(cn_startdate) & "/" & monthname(month(cn_startdate)) & "/" & lcase(URL) & ".html"
    if not sLink = request.ServerVariables("HTTP_X_REWRITE_URL") then
        response.status = "301 Moved Permanently"
        response.addheader "Location", "http://www.inside-guides.co.uk" & sLink
        response.end
    end if

EnsurePageIsBasicHTTP

startdate = date()
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title><%=server.HTMLEncode(""&cn_title)%> | <%=server.HTMLEncode(Session("PublicFranchiseName"))%>&nbsp;News, Essex</title>
<meta name="Description" content="<%=server.HTMLEncode(""&cn_title)%> | <%=server.HTMLEncode(Session("PublicFranchiseName"))%>&nbsp;News, Essex" />
<meta name="Keywords" content="<%=server.HTMLEncode(""&cn_title)%>, <%=server.HTMLEncode(Session("PublicFranchiseName"))%>, Submit News" />
<link rel="stylesheet" type="text/css" href="/css/hot-sneaks/jquery-ui-1.8.22.custom.css"/>
<!--#include virtual="/Assets/Templates/Public/Franchise/HeadCSS.asp"-->
<link rel="stylesheet" type="text/css" href="/css/NewsDetails.css"/>
<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui-1.8.22.custom.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(e) {
        $('#datepicker').datepicker({
        dateFormat:'dd/mm/yy'
        });
    });
</script>
</head>
<body id="news">
<!--#include virtual="/Assets/Templates/Public/Franchise/News.asp"-->

    <div class="middle-content-grey main-article clearfix">
    <h1 class="event-title"><%=server.HTMLEncode(""&cn_title)%></h1>
    <% if len(""&cn_fullimage)>0 then %>
        <img src="/includes/tn.asp?src=/LiveStorage/Uploads/image/CommunityNews/<%=server.URLEncode(""&cn_fullimage)%>" class="fullimage" />
    <% end if %>
    <div class="event-address"><h3><img class="newsitem" src="/images/map.png" alt="event location" /> Submitted by <%=server.HTMLEncode(cn_location)%></h3></div>
    <div class="event-date"><h4><img class="newsitem" src="/images/date.png" alt="event date" /> On <%=formatdatetime(cn_startdate,1)%>
    <% if not cn_startdate = cn_enddate then %> - <%=formatdatetime(cn_enddate,1)%><% end if %></h4></div>

    <div class="article-details"><p><%=cn_article%></p></div>
    </div>
<br />
    <div id="frmcomment" class="middle-content-grey">
    <h2>Visitor Comments</h2>

    <% getrs com,"SELECT * FROM CommunityNewsComments WHERE nc_article = "&cint(cn_id)&" AND nc_approved = 1 ORDER BY nc_datetime ASC;",""
    if com.recordcount = 0 then
    %><p class="comment">Be the first to comment</p><%
    else
        while not com.eof
            %>
            <div class="comment">
                <div class="title"><%=formatdatetime(com("nc_datetime"),1)%>&nbsp;at&nbsp;<%=formatdatetime(com("nc_datetime"),3)%> by <%=server.HTMLEncode(""&com("nc_name"))%></div>
                <p><%=server.HTMLEncode(""&com("nc_comment"))%></p>                
            </div>
            <%
        com.movenext : wend
    end if 
    %>
    <h3>Leave a Comment:</h3>
    <form id="form" method="post" action="" 
    onsubmit="
    if ($('#email').val()=='' || $('#name').val()=='' || $('#comment').val()=='') {alert('Please complete all fields');return false}
    $.ajax({
        type:'POST',
        url:'/ajax/newsComment.asp',
        data:$(this).serialize(),
        success: function(data){
            $('#frmcomment').html(data);
        }
    });return false;
    "><input type="hidden" name="news" id="news" value="<%=server.HTMLEncode(""&cn_id)%>" />
        <label>Email Address<span class="smaller">Required</span></label>
        <input type="text" name="email" id="email" />
        <label>Your Name<span class="smaller">Required</span></label>
        <input type="text" name="name" id="name" />
        <label>Your comment<span class="smaller">Required</span></label>
        <textarea name="comment" id="comment"></textarea>
        <button class="button medium news-green form" type="submit"><span>Leave Comment</span></button><br />
        <textarea name="options" id="options" style="display:none;"></textarea>
    </form>
    </div>

<br />
 <a class="button medium news-green top" href='#top'><span>Top</span></a>
 <a class="button medium news-green home" href="/<%=lcase(Session("PublicFranchiseName"))%>/news/index.html"><span>News</span></a>
<!--#include virtual="/Assets/Templates/Public/Franchise/TemplateEnd.asp"-->
</body>
</html>
<!--#include virtual="/System/Shutdown.asp"--> 
```

我所做的是将您的一些数据库字段设置为变量。尝试按照在数据库中定义的顺序检索字段。

# windows - 我可以将我的 winRT 应用程序作为屏幕保护程序运行吗？

> ID：14271025
> 
> 赞同：4
> 
> 时间：2013-01-11T03:08:08.523
> 
> 标签：windows, windows-8, windows-runtime, winrt-xaml

有没有办法让我的 winRT 应用程序成为 xaml 中的屏幕保护程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:19:04.707

正如 Jerry 所说，没有直接的方法可以制作 Windows Store 应用程序屏幕保护程序。但是，有一个迂回的解决方案可能适用于 Windows 8，但不适用于 Windows RT。我几乎可以工作了。我会分享我到目前为止所拥有的。

屏幕保护程序只是一个可执行文件，其`.scr`扩展名保存在`C:\Windows\System32`. 例如，查看`C:\Windows\System32\Bubbles.scr`. 我想到的解决方案是创建一个`.scr`屏幕保护程序，其唯一目的是启动您的 Windows 应用商店应用程序，您说该应用程序将使用 XAML。

您无法直接从命令行启动 Windows 应用商店应用，因此您将创建一个启动器应用。请查看由 Ashwin Needamangala 撰写的名为[Automating the testing of Windows 8 应用程序](http://blogs.msdn.com/b/windowsappdev/archive/2012/09/04/automating-the-testing-of-windows-8-apps.aspx)的博客文章。在文章的中途，查找名为**Automating the activation of your app**的部分。它包含一个示例 C++ 应用程序，它可以通过以下方式启动 Windows 应用商店应用程序：

> C:>Win8AppLaunch.exe Microsoft.BingNews_8wekyb3d8bbwe!AppexNews

该页面上的示例启动器需要修改，但在此之前，只需将代码复制到 C++ 控制台应用程序中：

![在此处输入图像描述](../Images/8432e922ef6f67fdfccf6248998c333f.png)

您几乎已准备好从命令行对其进行测试，但您需要将应用程序的名称指定为`AppUserModelId`. 详细信息在 Ashwin 的帖子中，但要解释一下，您首先要允许在您的系统上执行 PowerShell 脚本：

> PS C:> Set-ExecutionPolicy AllSigned

然后运行这个 PowerShell 脚本：

```
$installedapps = get-AppxPackage
foreach ($app in $installedapps)
{
    foreach ($id in (Get-AppxPackageManifest $app).package.applications.application.id)
    {
        $app.packagefamilyname + "!" + $id
    }
} 
```

您可能喜欢在[Windows PowerShell ISE](http://technet.microsoft.com/en-us/library/dd315244)中运行它。它很光滑。找到`AppUserModelId`您的应用程序，然后`Win8AppLaunch.exe`从命令行进行测试，如上所示。这应该从命令行启动您的 Windows 应用商店应用程序。

接下来，修改 C++ 启动器以硬编码`AppUserModelId`您的应用程序，而不是从命令行参数解析它。我创建[了一个 Gist of this](https://gist.github.com/4508572)。重要的部分是我声明的那一行`myApp`。

构建新的可执行文件，重命名`MyScreenSaver.scr`并放入`C:\Windows\System32`. 然后它将出现在屏幕保护程序设置控制面板中。您可以在那里预览屏幕保护程序，它可以工作。但是，如果您等待屏幕保护程序启动，它会短暂地打开一个控制台窗口并且永远不会完全启动。我不确定为什么。我尝试通过将项目切换到 Windows 应用程序来禁用控制台窗口的创建，但这没有帮助。您可以通过更改为自己`Properties | Configuration | Linker | System | SubSystem`尝试`WINDOWS`。这有点复杂，因为您还需要将入口点从 更改`_tMain`为`_tWinMain`。如果您需要详细信息，请通过我的博客与我联系。我的 StackOverflow 个人资料列出了它。

在这一点上，它几乎完全工作。您可以尝试从一个您知道有效的空白 C++ 屏幕保护程序开始，然后复制上面的代码。如果我有更多时间，也许我会自己尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:32:31.647

很酷的想法。但不是。

如果您希望您的应用程序真正为 Windows 做一些事情而不是作为一个简单的应用程序运行，那么您编写一个扩展应用程序。这是官方的说法：

> 扩展 扩展就像应用程序和 Windows 之间的协议。扩展允许应用程序开发人员扩展或自定义标准 Windows 功能，主要用于他们的应用程序，并可能用于其他应用程序。

现在有这些类型的扩展应用程序：

**帐号图片提供者（扩展）** 当用户决定更改他们的帐号图片时，他们可以选择现有图片或使用应用程序拍摄新图片。如果您的应用可以拍照，您可以使用此扩展程序让 Windows 在“帐户图片设置”控制面板中列出您的应用。从那里，用户可以选择它来创建新的帐户图片。有关此扩展的更多信息，请参阅 UserInformation 参考主题。您还可以查看我们的帐户图片名称示例。

**AutoPlay（扩展）** 当用户将设备连接到计算机时，Windows 会触发 AutoPlay 事件。此扩展使您的应用可以被列为一个或多个自动播放事件的自动播放选项。

**后台任务（扩展）** 应用程序可以使用后台任务来运行应用程序代码，即使在应用程序暂停时也是如此。后台任务适用于不需要与用户交互的小型工作项目。

**相机设置（扩展）** 您的应用可以提供自定义用户界面，用于在使用相机拍摄照片或视频时选择相机选项和选择效果。有关此扩展的详细信息，请参阅为相机开发 Windows 应用商店设备应用。

**联系人选择器（扩展）** 此扩展使您的应用能够注册以提供联系人数据。每当用户需要访问其联系人时，Windows 都会显示您的应用程序列表中的应用程序。有关此扩展的详细信息，请参阅 Windows.ApplicationModel.Contacts.Provider 参考主题。您还可以查看管理用户联系人。

**文件激活（扩展名）** 具有相同文件扩展名的文件属于相同的文件类型。您的应用可以使用现有的、众所周知的文件类型，例如 .txt，或创建新的文件类型。文件激活扩展使您能够定义新的文件类型或注册以处理文件类型。

**游戏资源管理器（扩展）** 您的应用可以在 Windows 中注册为游戏。为此，您必须创建一个游戏定义文件 (GDF)，将其构建为应用程序中的二进制资源，并在包清单中声明该资源。

**打印任务设置（扩展）** 您可以设计一个显示自定义打印相关用户界面并直接与打印设备通信的应用程序。当您突出显示特定于特定品牌和型号的打印设备的功能时，您可以提供更丰富、更增强的用户体验。

**协议激活（扩展）** 您的应用可以使用现有协议进行通信，例如 mailto，或创建自定义协议。协议激活扩展使您能够定义自定义协议或注册以处理现有协议。

**SSL/证书（扩展）** 数字证书用于向另一个实体验证一个实体。例如，证书通常用于通过 SSL 对用户进行 Web 服务的身份验证。此扩展使您能够在您的应用程序中安装数字证书。

引用：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh464906.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464906.aspx)

不幸的是，与屏幕保护程序无关。技术原因，此时，您无法编写用作屏幕保护程序的 Windows 8 应用程序，因为 Windows 8 应用程序从根本上绑定到在 WinRT 执行环境中运行。在当前版本的 Windows 中，该外壳不会超出“开始”菜单。因此，无法在外部执行 - 就像作为屏幕保护程序一样。屏幕保护程序仍然是“旧时尚方式”。

# php - 在循环期间无法选择表单选项

> ID：14271028
> 
> 赞同：3
> 
> 时间：2013-01-11T03:08:31.560
> 
> 标签：php, html, mysql, forms, select

我有一个将值存储到变量中的解析器（duh）。这里有问题的变量是：

```
$item[2]   <- contains the string 'facebook' 
```

我有一个包含选择菜单的 html 表单。菜单是根据我的数据库中存储的内容动态填充的。这就是我的菜单的构建方式：

```
<?php
$formats = $wpdb->get_results($wpdb->prepare("
        SELECT * FROM table
        WHERE taxonomy = 'format'
        "));
?>

<div id="format" class="form">
    Format: <?php echo $item[2]; ?>  <!-- echoes the variable to know it works -->
    <?php
        $terms = array();              
        foreach($formats as $key => $term){
            $terms[$term->parent][$term->term_id] = $term;
        }
    ?>    
    <select name="formats">
        <option value="empty"></option>
        <?php printTerms($terms, $item); ?> <!--- THIS DOESN'T APPEAR TO PASS $item INTO THE FUNCTION -->
    </select>
</div>

<?php
function printTerms($terms, $item, $parent = 0, $deep = 0){ // HOW DO I USE $item ???
    if(count($terms[$parent]) > 0){
        $indent = "";
        for($i = 0; $i < $deep; $i++){
            $indent .= "&nbsp;&nbsp;&nbsp;";
        }

        foreach($terms[$parent] as $key => $term){
            if(count($terms[$term->term_id]) > 0){
                if($deep == 0){
                    echo "<option class='toplevel' value='".$term->name."' ".$selected.">".$term->name."</option>";   //     <- Outputs top level parents
                } else {
                    echo "<option class='child".$deep."' value='".$term->name."' ".$selected.">".$indent.$term->name."</option>";  // <- Outputs children that are also parents
                }

                printTerms($terms, $term->term_id, ($deep+1));

            } else {
                echo "<option class='solo' value='".$term->name."' ".$selected.">".$indent.$term->name."</option>";   // <- outputs bottom level children and solos.
            }
        }
    }
}
?> 
```

到目前为止，这一切都有效，但这是我的问题。

我想这样做，如果 items[2] 包含字符串“Facebook”（它确实如此），则默认选择相应的菜单选项。

我确实让它在一个简单的静态选择菜单中工作，如下所示：

```
foreach ($formats as $format) {
    $selected = '';
            if ($item[2] == 'facebook' || $item[2] == 'wall' && $format->slug == 'facebook'){ 
        $selected = 'selected';
    }
    echo "<option value='".$format->name."' ".$selected.">".$format->name."</option>";
} 
```

$format->slug 包含我想要匹配到 $item[2] 的值。因此，$term->slug 对应于 $format->slug。

$format->name 是输出到菜单本身的选择选项的标题。同样，$term->name 对应于 $format->name。

$formats 访问这个 MySQL 表：

```
term_id       name           slug                 taxonomy     parent
1             Entry Form     entry-form           format       0
2             Page           page                 format       3
3             Facebook       facebook             format       0
4             Entry Form     facebook-entry-form  format       3
5             Twitter        twitter              format       0
6             Single        single                format       2 
```

您会注意到我已经将 $selected 变量插入到我的函数中。我的问题是我无法让上面的代码在 printTerms 函数的上下文中工作。

就我的问题而言，假设任何变量中都没有空格（我检查过）。

要记住的一些规则：

$term->slug 和 $item[2] 并不总是匹配。如果 $item[2] 是 'wall'，这也会导致默认选择 'facebook'。（见我上面的代码）。

所以问题是，我如何将我的 printTerms() 函数与我的选择代码结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:56:25.830

我稍微修改了您的代码以在没有数据库的情况下工作，以进行测试。真正的“变化”是我修改了`count()`使用`isset()`。

细微的变化是选项现在是换行分隔的，并且该函数不输出任何内容，而是返回输出。

这样生成的 HTML 会在我的 Firefox 浏览器中将“Facebook”显示为默认选择。

*（缩进，并`</option>`为易读而删除）*

```
<html><body><select>
<option class='solo'     value='Entry Form'>Entry Form
<option class='toplevel' value='Facebook' selected="selected">Facebook
<option class='child1'   value='Page'      >   Page
<option class='solo'     value='Single'    >      Single
<option class='solo'     value='Entry Form'>   Entry Form
<option class='solo'     value='Twitter'   >Twitter
</select></body></html> 
```

PHP测试用例如下：

```
<?php
        $formats = array(
                array('term_id' => 1, 'name' => 'Entry Form', 'slug' => 'entry-form', 'taxonomy' => 'format', 'parent' => 0),
                array('term_id' => 2, 'name' => 'Page', 'slug' => 'page', 'taxonomy' => 'format', 'parent' => 3),
                array('term_id' => 3, 'name' => 'Facebook', 'slug' => 'facebook', 'taxonomy' => 'format', 'parent' => 0),
                array('term_id' => 4, 'name' => 'Entry Form', 'slug' => 'facebook-entry-form', 'taxonomy' => 'format', 'parent' => 3),
                array('term_id' => 5, 'name' => 'Twitter', 'slug' => 'twitter', 'taxonomy' => 'format', 'parent' => 0),
                array('term_id' => 6, 'name' => 'Single', 'slug' => 'single', 'taxonomy' => 'format', 'parent' => 2),
        );

        $terms = array();
        foreach($formats as $term){
                $a = $term['parent'];
                $b = $term['term_id'];
            $terms[$a][$b] = $term;
        }

        function printTerms($terms, $parent = 0, $deep = 0, $item){
        $output = '';
    if(count($terms[$parent]) > 0){
        $indent = "";
        for($i = 0; $i < $deep; $i++){
            $indent .= "   ";
        }

        foreach($terms[$parent] as $key => $term)
        {
            $selected = ($item == $term['slug']) ? ' selected="selected"' : '';
            if(isset($terms[$term['term_id']]))
            {
                if($deep == 0){
                    $output .= "<option class='toplevel' value='".$term['name']."'".$selected.">".$term['name']."</option>";   //     <- Out
puts top level parents
                } else {
                    $output .= "<option class='child".$deep."' value='".$term['name']."'".$selected.">".$indent.$term['name']."</option>";
// <- Outputs children that are also parents
                }
                $output .= "\n";
                $output .= printTerms($terms, $term['term_id'], ($deep+1), $item);

            } else {
                $output .= "<option class='solo' value='".$term['name']."'".$selected.">".$indent.$term['name']."</option>";   // <- outputs
 bottom level children and solos.
                $output .= "\n";
            }
        }
    }
        return $output;
}

        print "<html><body><select>";
        print printTerms($terms, 0, 0, 'facebook');
        print "</select></body></html>";

?> 
```

更新：我们可以在之前的`printTerms`函数的基础上进行更灵活的匹配。

首先，我们重命名`printTerms()`为`printTermsBase()`并从中删除所有对选项选择的引用。然后输出将是一堆形式的行

```
 <option class='something' value='somethingelse'>text</option> 
```

现在*我们*可以在输出上运行文本匹配。下面的函数，当通过“墙”时，将选择“墙”；如果没有“墙”，它将选择“facebook”；如果那也不存在，它将不选择任何内容。您可以反转数组以便选择“墙”，*除非*facebook 存在。文本匹配准确：“facebook-form”将被忽略。如果您希望将“facebook”与“facebook-form”匹配，则需要使用这些`preg*`功能。

```
 function printTerms($terms, $item)
 {
     $items = array($item, 'facebook');
     $options = printTermsBase($terms, 0, 0);
     foreach($items as $raw)
     {
         // We could use preg_match here for even greater flexibility
         $search="value='$raw'";
         if (false === strpos($options, $search))
             continue;
         // One of the option matches.
         // We just replace    value='something'
         // with               value='something' selected='selected'
         return str_replace($search, $search.' selected="selected"', $options);
     }
     // No match. Return options unchanged.
     return $options;
 } 
```

# javascript - 将javascript变量添加到脚本中的超链接

> ID：14271030
> 
> 赞同：1
> 
> 时间：2013-01-11T03:08:35.993
> 
> 标签：javascript, jquery, jquery-isotope

我一直在尝试使用之前在同一函数中定义的变量来创建超链接以附加：

```
var NAMEVARIABLE = responseArray[i].Name;

var TITLE_Game = document.createElement("p");
TITLE_Game.className = "TITLE_Game";
TITLE_Game.innerHTML = "<a href='Game_NAMEVARIABLE.html'>Games</a>"; 
```

我使用此处找到的解决方案尝试了以下操作：将[Javascript 变量传递给 <a href >](https://stackoverflow.com/questions/975050/passing-javascript-variable-to-a-href)

```
<a href="Game_.html" onclick="location.href=this.href+'?key='+NAMEVARIABLE;return false;">Games</a> 
```

但这没有用。然后我尝试添加一个ID：

```
<a id="link" href="Game_.html?propid=">Games</a> 
```

并将其添加到脚本中： `document.links["link"].href += NAMEVARIABLE;`

这也不起作用。这些链接发生在 Isotope 中，我遇到了新手问题，确保我的 JSON 数据在脚本执行之前加载。现在一切正常，但我不确定上述方法不起作用的原因是因为类似的问题，还是它们根本不是解决此问题的正确方法。

任何帮助深表感谢。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:22:25.250

首先，尝试调试您的变量：

```
var NAMEVARIABLE = responseArray[i].Name;
alert(NAMEVARIABLE); 
```

它是否返回所需的返回值。然后第二件事，在你的第一种脚本风格中，试试这个：

```
TITLE_Game.innerHTML = "<a href='Game_"+NAMEVARIABLE+".html'>Games</a>"; 
```

我假设你有`game_[number_id].html`格式的（静态）html集合，如果是这样，你可以用你的第二种脚本风格进一步尝试，并将其更改为：

```
<a href="#" onclick="location.href='Game_'+NAMEVARIABLE+'.html';return false;">Games</a> 
```

您需要进一步了解[javascript 字符串连接](http://www.quirksmode.org/js/strings.html#conc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:21:51.507

使用字符串连接来构建您的内部 html 字符串。

例子：

```
var nameVariable = 'Foo';
var innerHtmlText = nameVariable + 'bar'; 

$('#someElement').html(innerHtmlText); 
```

someElement 的内容将包含以下文本： 'Foobar';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T03:42:50.657

这可以通过任一（即纯`JS`或`jQuery`）方式轻松实现。假设你有这个`<a>`元素`href`

```
<a id="Link" href="/collection/categories/">Games</a> 
```

**纯 JavaScript 方式：**

```
window.onload = function() {
  var link= document.getElementById('Link'),
  url = link.href + responseArray[i].Name + '.html';

  link.setAttribute('href', url);
} 
```

**使用jQuery：**

```
$(function(){
  var link= $('#Link'),
  url = link.attr('href') + responseArray[i].Name + '.html';

  link.attr('href', url);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T03:56:43.947

你只需要字符串连接。在大多数现代浏览器中，修改链接的 href onclick 将被视为垃圾邮件。

```
<div id="result">
  the result: 
</div>
<script type="text/javascript">
var name = "foo_bar";
var url = "page.html?key=" + name; //or.. "page_" + name + ".html";
var link = '<a href="' + url +'">link here</a>';

$("#result").addClass("g_title");
$("#result").append(link);
</script> 
```

# c - 内存中的程序及其内存映射

> ID：14271033
> 
> 赞同：0
> 
> 时间：2013-01-11T03:09:03.727
> 
> 标签：c, memory-management, linux-kernel

我对内存中程序的地址空间映射有点困惑，这是一个链接 [http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory](http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory) 它处理虚拟程序在执行中的地址映射，已标记 1GB 用于内核模式，3 GB 用于用户模式，并提到使用页表访问内存段，

如果我没记错的话，Linux 仅在 x86 架构上使用 4 KB 的页面文件，那么进程如何使用内存中的 3GB 映射地址空间（如链接上给出的每个进程为 4GB 的链接）。这是一个位计数器对我来说很直观，或者我的理解在哪里是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:37:16.000

我不知道我是否理解你。您似乎认为处理器使用 4KB 页面来管理映射文件。

实际上，这 4KB 只是一个页内存缓冲区。当系统试图从任何文件读取数据到内存时，它会首先读取页面内存缓冲区中的内容，然后将缓冲区中的内容移动到真正的堆栈或堆中。这个 4KB 页缓冲区不用于控制映射的内存地址。

我认为映射的地址类似于 HANDLE。它存储在内存的一部分中。当您使用此句柄获取数据时，系统将对其进行计数并将其传输到 DISK 上的真实地址。然后系统将映射数据读取到页面缓冲区，最后将它们移动到内存中。

详情请查看以下链接： [http](http://duartes.org/gustavo/blog/post/page-cache-the-affair-between-memory-and-files) ://duartes.org/gustavo/blog/post/page-cache-the-affair-between-memory-and-files 这个博客还有其他几篇关于内存管理的好文章。复杂但真的很好。

# database - 更新记录的语法错误

> ID：14271038
> 
> 赞同：0
> 
> 时间：2013-01-11T03:09:53.980
> 
> 标签：database, ms-access, vba

我有一个表格和子表格。我试图允许使用按钮在子表单中进行更新。但是我的代码给了我。

KEY_ID 是文本，另外两个是数字类型。

**“查询表达式“5”中的语法错误，ROOM=5。DRAWER=55（这是我尝试将其更改为的新值）WHERE KEY_ID=5'。**

这是我的表格的图像：http: [//jumpshare.com/b/17A7Pr](http://jumpshare.com/b/17A7Pr)

这就是我正在尝试的：

```
Private Sub cmdAdd_Click()
If Me.keyID.Tag & "" = "" Then
    CurrentDb.Execute "INSERT INTO KEYS(KEY_ID, ROOM, DRAWER)" & _
        " VALUES('" & Me.keyID & "'," & Me.roomID & "," & Me.drawerID & ")"
          subKey.Form.Requery
Else
    CurrentDb.Execute "UPDATE KEYS " & _
    " SET KEY_ID=" & Chr(39) & keyID & Chr(39) & _
    ", ROOM=" & Me.roomID & _
    ", DRAWER=" & Me.drawerID & _
    " WHERE KEY_ID=" & Me.keyID.Tag
    Debug.Print KEY_ID
End If 
```

解决方案：

```
CurrentDb.Execute "UPDATE KEYS " & _
" SET KEY_ID=" & Me.keyID & _
", ROOM=" & Me.roomID & _
", DRAWER=" & Me.drawerID & _
" WHERE KEY_ID=" & Chr(39) & keyID.Tag & Chr(39) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:19:13.117

解决方案：

```
CurrentDb.Execute "UPDATE KEYS " & _
" SET KEY_ID=" & Me.keyID & _
", ROOM=" & Me.roomID & _
", DRAWER=" & Me.drawerID & _
" WHERE KEY_ID=" & Chr(39) & keyID.Tag & Chr(39) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:18:55.147

尝试没有 Chr(39) 的代码。这应该可以。

```
Private Sub cmdAdd_Click()
If Me.keyID.Tag & "" = "" Then
    CurrentDb.Execute "INSERT INTO KEYS(KEY_ID, ROOM, DRAWER)" & _
        " VALUES('" & Me.keyID & "'," & Me.roomID & "," & Me.drawerID & ")"
          subKey.Form.Requery
Else
    CurrentDb.Execute "UPDATE KEYS " & _
    " SET KEY_ID=" &  keyID  & _
    ", ROOM=" & Me.roomID & _
    ", DRAWER=" & Me.drawerID & _
    " WHERE KEY_ID=" & Me.keyID.Tag
    Debug.Print KEY_ID
End If 
```

# ruby-on-rails - 带有 resque 的邮件程序回调

> ID：14271040
> 
> 赞同：1
> 
> 时间：2013-01-11T03:09:58.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, actionmailer, resque

我使用 Resque Mailer 和 Rails 3 的 ActionMailer 来异步发送电子邮件。有没有办法在发送邮件后向我的 ActionMailer 类添加回调？

# windows-mobile - 禁用 Windows Mobile 设备上的触摸屏

> ID：14271044
> 
> 赞同：0
> 
> 时间：2013-01-11T03:10:30.493
> 
> 标签：windows-mobile

我正在尝试禁用 Windows Mobile 设备上的触摸屏。一种方法是，如果我将注册表 DriverName 更改为空，然后对设备进行热启动，触摸屏似乎被禁用，所以我想知道如果我使用这种方法，以后会遇到任何未知的副作用吗？

[HKEY_LOCAL_MACHINE\HARDWARE\DEVICEMAP\TOUCH]

"司机姓名"=""

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:57:37.280

您可以简单地使用 TouchRegisterWindow API 来“禁用”触摸输入。见这里的例子：[http ://www.hjgode.de/wp/2012/09/24/windows-mobile-disable-touch-input/](http://www.hjgode.de/wp/2012/09/24/windows-mobile-disable-touch-input/)

我不会按照您描述的方式进行，而只是使用 TouchRegisterWindow API。它简单而干净。

# jquery - jquery中的新手 - jquery弹出

> ID：14271052
> 
> 赞同：1
> 
> 时间：2013-01-11T03:11:10.703
> 
> 标签：jquery

我在这里看到了这个不错的 jquery 插件：[prettyphoto jquery lightbox](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)有没有办法只用一个简单的 jquery 来实现。

我只需要弹出和内联内容。你的回复很有帮助。

如果您可以在小提琴中展示演示或我欣赏的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:02:57.380

你可以，[在这里](http://jsfiddle.net/dJ7Wj/2/)。大多数情况下，我使用`jquery`.

你可以从那开始。

希望能帮助到你。

更新：

我已经更新了[jsfiddle](http://jsfiddle.net/dJ7Wj/3/)。但是`css`应该在其中设置一些属性才能`jquery`使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:18:07.863

如果您正在寻找一个简单的“对话” SimpleModal 可能是正确的：[http ://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

它本身不是一个“灯箱”插件，但它比添加 jQuery UI 轻得多。看起来也很简单：

```
$("#your-element-id").modal(); 
```

您可以将其用于文本、图像、表格等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T03:15:15.947

最简单的方法是使用 jQuery UI 对话框。[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

当然，一个纯粹的解决方案是在 css 中定义灯箱，用 jQuery 填充它并显示它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T03:18:17.880

你可以使用 jQueryUI 对话框，

像下面的[jqueryui 演示这样的简单实现](http://jqueryui.com/dialog/)

```
$(document).ready(function() {
      $("#dialog").dialog();
}); 

<div id="dialog" style="display:none">
    <div>
        Your Dialog content
    </div>
</div> 
```

# c - 指向c中字符串概念的指针

> ID：14271059
> 
> 赞同：-6
> 
> 时间：2013-01-11T03:11:58.627
> 
> 标签：c, string, pointers

谁能告诉我以下声明是否正确：

```
char (*p)[10]; 
```

`p`是一个指向 10 个字符的字符串的指针。

我做了一个程序如下：

```
/*PROGRAM*/

#include<stdio.h>
#include<string.h>

void xstrcpy(char (**)[], const char (**)[]);
void main()
{
    const char (*xsource)[10]="SUPERB";

    char (*xtarget)[10];

    printf("\n\n*************PART1*************\n\n");   
    printf("%s\n",xsource);

    printf("\n\n*************PART2*************\n\n");

    xtarget=xsource;

    printf("%s\n",xtarget);

    printf("\n\n*************PART3*************\n\n");

    xstrcpy(xtarget,xsource);
    puts(xtarget);

}

void xstrcpy(char (**p)[],const char (**q)[])
{

        p=q;
} 
```

程序的目的是从另一个复制字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:29:39.197

要了解如何确定 C 中的变量类型，您应该学习此处解释的“左右规则”：http: [//ieng9.ucsd.edu/~cs30x/rt_lt.rule.html](http://ieng9.ucsd.edu/~cs30x/rt_lt.rule.html)

使用规则并遵循 ieng9 文章的风格，您可以在示例中确定类型：

```
1\. Find identifier                      char (*p)[10];
                                               ^
   "p is a"

2\. Move right (stop at right paren)     char (*p)[10];
                                                ^
3\. Stop at right paren and move left    char (*p)[10];
                                              ^
   "p is a pointer to"

4\. Stop at left paren and move right    char (*p)[10];
                                                 ^
   "p is a pointer to array (size 10) of"

5\. Out of symbols so move left          char (*p)[10];
                                        ^
   "p is a pointer to array (size 10) of char" 
```

或者换句话说，p 是一个指向大小为 10 的 char 数组的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:13:23.403

> p 是一个指向 10 个字符的字符串的指针。

它是一个指向`char`长度为 10 的数组的指针，它可能会或可能不会被解释为字符串......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T03:25:22.947

字符 (*p)[10];

解释这段代码的一个好方法是从右到左阅读，实际上，这是在编译中理解这段代码的真正方法。

所以过程是：`[10]`-> 这是一个有 10 个元素的数组。 `(*p)[10]`-> 这是一个指向包含 10 个任何类型元素的数组的指针。 `char (*p)[10]`-> 这是一个指向包含 10 个字符元素的数组的指针。

在这里我们可以发现，如果我们没有括号，我们将`p[10]`首先相遇，最终的结果会变得有点不同：p首先是一个数组而不是一个指针。

你可以阅读 Dan Sales 写的一篇文章：const T vs. T const。尽管它侧重于 c++，但它将对您理解这类问题有很大帮助。

对于你的程序，我只能说请做一个实验并发布你的结果，首先谢谢你^0^~~如果你让我猜，我想我会说它不起作用，因为指针类型错误。

# android - HTMLcleaner 堆栈跟踪错误

> ID：14271060
> 
> 赞同：0
> 
> 时间：2013-01-11T03:12:04.400
> 
> 标签：android, string, xpath, android-asynctask, htmlcleaner

我正在做一个项目并且遇到了一个问题。我正在尝试使用 html 清理器解析 html，然后使用 xpath 返回一个字符串。如果发现错误（确实如此），我让它返回一个堆栈跟踪。我真的不知道如何根据堆栈跟踪进行调试。这是代码。

```
package ru.habrahabr.stackparser;

import java.net.URL;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.htmlcleaner.TagNode;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class stackParser extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button) findViewById(R.id.parse);
    button.setOnClickListener(myListener);
}

private ProgressDialog pd;

private OnClickListener myListener = new OnClickListener() {
    public void onClick(View v) {
        pd = ProgressDialog.show(stackParser.this, "Working...",
                "request to server", true, false);
        new parseSite()
                .execute("http://wiki.teamliquid.net/starcraft2/3_Gate_Robo");
    }
};

private class parseSite extends AsyncTask<String, Void, String> {
    protected String doInBackground(String... arg) {
        String output = new String();
        try {
            htmlHelper hh = new htmlHelper(new URL(arg[0]));
            output = hh.htmlHelper(arg[0]);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return output;
    }

    protected void onPostExecute(String output) {
        pd.dismiss();
        TextView view = (TextView) findViewById(R.id.tv1);
        view.setText(output);

    }
} 
```

这是我的 HTML 助手类

```
package ru.habrahabr.stackparser;

import java.io.IOException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.htmlcleaner.CleanerProperties;
import org.htmlcleaner.HtmlCleaner;
import org.htmlcleaner.TagNode;
import org.htmlcleaner.XPatherException;

public class htmlHelper {
TagNode rootNode;

public htmlHelper(URL url) {
    // TODO Auto-generated constructor stub
}

public String htmlHelper(String arg) throws IOException, XPatherException
{
    CleanerProperties props = new CleanerProperties();

    // set some properties to non-default values
    props.setTranslateSpecialEntities(true);
    props.setTransResCharsToNCR(true);
    props.setOmitComments(true);

    HtmlCleaner cleaner = new HtmlCleaner(props);
    rootNode = cleaner.clean(arg);

    Object[] nodes = rootNode.evaluateXPath("//h1[@id='firstHeading']");

    String things = nodes.toString();

    return things;
} 
```

UI 和加载栏工作正常，但 TextView 不断返回 [Ljava.lang.Object;@42455a88

我真的很感激这方面的一些帮助......我整天都在努力解决它，但似乎无法弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:39:09.123

尝试从以下位置读取文本`TagNode`：

```
Object[] nodes = rootNode.evaluateXPath("//h1[@id='firstHeading']");
if(nodes == null || nodes.length < 1) {
    return "";
}

TagNode tagnode = (TagNode)nodes[0];
String things = tagnode.getText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:12:26.693

我想到了。Xpath 查询引用了 XML 文档中的 DOM 树。因此，为了避免抛出异常，DOM 树需要在清理后进行初始化。然后 Xpath 将工作。

# sql - 结果中显示的编码字符

> ID：14271066
> 
> 赞同：0
> 
> 时间：2013-01-11T03:12:48.923
> 
> 标签：sql

当我在我的 csv 上执行 sql 时，有时在结果中我们会得到像 Â 这样的符号。我找到了条目并改写了数字并修复了它。但我很好奇会做什么？

将来我可以添加某种字符编码检查器以确保它正常吐出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:15:42.647

你说的“正常”是什么意思？当您将 utf8 编码的字符存储在 latin1 编码的表中时，您往往会看到这些字符。或者反过来。我不记得了。我在尝试迁移和升级的旧 WordPress 安装中看到了这一点。检查您的表格编码。

# asp.net - 在#div 上缓慢滚动页面

> ID：14271067
> 
> 赞同：0
> 
> 时间：2013-01-11T03:12:50.787
> 
> 标签：asp.net, html, css, scroll

我有一个页面，其高度为总可视区域的 200%，这意味着大约有两个页面相互重叠。我必须滚动到底部才能查看另一半页。我将完整`<body>`分成两个 div，每个 div 的高度为**100%**。

在 div1 中，我给 div2 提供了这样的链接，该链接有效，

```
<div id="div1" class="mystyle1">
<a href="#div2">Click Me To Go To DIV2</div>

<div id="div2" class="mystyle2">
<a href="#div1">Click Me To Go To DIV1</div> 
```

这可行，但它会立即滚动，我需要它平滑，以便用户可以看到过渡。我也尝试在 CSS 中设置它：

```
-webkit-transistion: all 1s ease-in-out; 
```

没运气！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:52:32.913

您可以使用 Jquery 方便地实现这一点。谷歌搜索关键字如[**动画滚动到顶部**](http://webdesignerwall.com/tutorials/animated-scroll-to-top)和[**动画滚动到 ID**](https://stackoverflow.com/questions/6682451/jquery-animate-scroll-to-id-on-page-load)会给你一个想法。

做一个快速的小提琴，也许这就是你想要发生的事情：http: [//jsfiddle.net/g5D33/](http://jsfiddle.net/g5D33/)

--

顺便说一句，您的代码中有一些小错别字，例如`<a>`缺少结束标记的标记和拼写为**s 的**转换。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T12:10:47.050

为此，我总是使用一个小的 JQuery 函数

```
$('a[href^="#"]').click( function(){
        var scroll_el = $(this).attr('href');
        if ($(scroll_el).length != 0) { 
                    $('html, body').animate({ scrollTop: $(scroll_el).offset().top }, 700); 
        }
        return false;
}); 
```

[JSFIDDLE](https://jsfiddle.net/hpkttfmp/1/)

对于水平滚动：

```
$('a[href^="#"]').click( function(){
            var scroll_el = $(this).attr('href');
            if ($(scroll_el).length != 0) { 
                        $('html, body').animate({ scrollLeft: $(scroll_el).offset().left }, 700); 
            }
            return false;
    }); 
```

[JSFIDDLE](https://jsfiddle.net/hpkttfmp/2/)

# mysql - MySQL 有索引表和 EXPLAIN 看起来不错，但仍然没有使用索引

> ID：14271069
> 
> 赞同：1
> 
> 时间：2013-01-11T03:13:06.673
> 
> 标签：mysql, indexing, explain

我正在尝试优化查询，当我“解释”它时一切看起来都很好，但它仍然出现在“log_queries_not_using_index”中。

这是查询：

```
SELECT t1.id_id,t1.change_id,t1.like_id,t1.dislike_id,t1.user_id,t1.from_id,t1.date_id,t1.type_id,t1.photo_id,t1.mobile_id,t1.mobiletype_id,t1.linked_id 
FROM recent AS t1 
LEFT JOIN users AS t2 ON t1.user_id = t2.id_id 
WHERE t2.active_id=1 AND t1.postedacommenton_id='0'  AND t1.type_id!='Friends' 
ORDER BY t1.id_id DESC LIMIT 35; 
```

所以它像“wallpost”数据一样抓取，然后我加入了 USERS 表以确保用户仍然是活跃用户（数字 1）和另外两个小的“AND”。

当我在 phpmyadmin 中使用 EXPLAIN 运行它时，它显示

```
编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外的
1 | 简单 | t1 | 索引 | 用户 ID | 初级 | 4 | 空 | 35 | 使用哪里
1 | 简单 | t2 | eq_ref | PRIMARY,active_id | 初级 | 4 | hnet_user_info.t1.user_id | 1 | 使用哪里

```

它显示 t1 查询使用“WHERE”找到 35 行，t2 查询使用“WHERE”找到 1 行（用户）

所以我不知道为什么它会出现在 log_queries_not_using_index 报告中。

有小费吗？如果您需要，我可以发布更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:28:07.563

**tldr; 忽略“不使用索引警告”。**1.3 毫秒的查询执行时间*不是问题*；这里没有什么可以优化的 - 查看*整个*性能配置文件以找到瓶颈。

信任数据库引擎。当数据库查询计划器确定这样做是有益的*时，它将使用索引。*在这种情况下，由于[基数估计值](http://en.wikipedia.org/wiki/Query_optimizer#Cost_estimation)较低(35x1)，查询规划器认为没有理由为实际执行计划使用索引。如果在这样的微不足道的情况下使用索引，它实际上可能会增加查询执行时间。

与往常一样，使用 97/3 规则。

# wordpress - Wordpress 主页被重定向到其他 CMS 主页

> ID：14271074
> 
> 赞同：0
> 
> 时间：2013-01-11T03:14:01.323
> 
> 标签：wordpress, .htaccess

我已经在我的根目录中安装了 WP 多站点。我目前还有一个使用 Invision Power 的 IP 内容在此目录中运行的站点，但重命名了 index.php 文件以适应 wordpress。我在 /forum 中运行 IP Board。

我已经创建了一个 wordpress 页面（domain.tld/sample-page/），但是当导航到它时，它无法找到它（登陆页面不是 WP，而是 IP 内容与“我们找不到您正在寻找的页面). 看起来我的网站在 WP 之前正在查看 IP 内容数据库，因此无法在其自己的数据库中找到页面/目录，因为 /sample-page/ 不存在于其中，仅存在于 WP 数据库中。

当我访问 domain.com/index.php（应该会打开我的 WP 博客）时，我会被重定向到位于 www.domain.com 的主页 IP 内容页面。

我怎样才能让它查看 WP 数据库中的此类内容？

我的 .htaccess 文件：

```
# Loads home.php first (ip.content). Wordpress is index.php

DirectoryIndex home.php index.php index.html maintenance.html

<IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !.*\.(jpeg|jpg|gif|png|ico)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /home.php [L]
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# Multisite

RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L]

# Multisite

# END WordPress 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:27:30.743

第一组条件导致任何不是图像、文件或目录的东西都转到 home.php 前端控制器，这会阻止它们被类似的 WordPress 规则满足。您可以添加一些更具体的条件以仅将某些页面传递给 home.php 或仅删除该组条件和规则。

这两个 CMS 不能很好地一起运行，我会将它们放在单独的域或子域中。

# php - 多个用户使用 AJAX/PHP 更新 XML 文件

> ID：14271075
> 
> 赞同：0
> 
> 时间：2013-01-11T03:14:01.813
> 
> 标签：php, xml, ajax

我正在为电影节的评委编写剧本，以审查和投票给电影。我在想我可以通过将所有结果保存在一个 XML 文件中来最小化项目。然而，我担心的是，如果多个法官同时投票，是否会与同时写入的 XML 文件发生冲突？

这是我对架构的想法：

```
<festival>
<teams>
    <team id='*'>
        <name></name>
        <video>http://vimeo.com/####</video>
        <ratings>
            <judge id='%'>(1-7)</judge>
        </ratings>
        <nominations>
            <judge id='%'>@</judge>
        <nominations>
    </team>
</teams>
<awards>
    <award id='@'>Best Director</award>
</awards>
<judges>
    <judge id='%'>
        <name></name>
        <email></email>
        <password></password>
        <lastVideoWatched></lastvideowatched>
    </judge>
</judges> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:19:22.480

好的，首先，

你为什么使用xml文件？将数据库用于此类事情会容易得多。甚至 mysqli 也能很好地工作。您可以使用简单的 xml 来解析文件并在提交之前将其保存在内存中，但我认为没有办法同时进行。但是我无论如何都看不到在中间不构建引擎的情况下进行并发事务。

如果你愿意接受我的建议，请切换到 mysql

# iphone - 带有图像的 UIMenuController

> ID：14271078
> 
> 赞同：3
> 
> 时间：2013-01-11T03:14:07.687
> 
> 标签：iphone, ios, ipad, menuitem, uimenucontroller

谁能提供一个如何在 UIMenuController 中显示图像的示例？在 iBooks 中，如果您选择一些文本，然后从显示的菜单中选择突出显示，它将切换到包含图像的上下文突出显示菜单。

![带有图像的 iBooks 突出显示菜单](../Images/484877d7cf009acb08e425ef3a8cec46.png)

[如UIMenuControllerClass Reference](https://developer.apple.com/documentation/uikit/uimenuitem)中所述，我已经能够创建具有自定义标题和操作的菜单。不过，我在显示图像时一无所获。

# javascript - HTML5 音频结束功能

> ID：14271082
> 
> 赞同：5
> 
> 时间：2013-01-11T03:14:48.450
> 
> 标签：javascript, html, html5-audio

> **可能重复：**
> [具有动态源的 HTML5 音频元素](https://stackoverflow.com/questions/14190160/html5-audio-element-with-dynamic-source)

我试图让播放器在当前曲目结束后重新加载新曲目，但我想我可能做错了什么。

这是播放器：

```
<audio id="audio" autoplay controls="controls" onclick="start()">
<source src="song.php" type="audio/mpeg" />
</audio> 
```

这是脚本：

```
function start(){
    var audio = document.getElementById('audio');
    audio.play();
    audio.addEventListener('ended',function(){
        $.post("song.php", function(result){
        audio.src = result;
        audio.pause();
        audio.load();
        audio.play();
    });
    });
} 
```

如果我将脚本更改为此，它可以工作......但我不想重新加载整个页面：

```
function start(){
    var audio = document.getElementById('audio');
    audio.play();
    audio.addEventListener('ended',function(){
        window.location = 'player.html';
    });
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T03:19:38.180

对于初学者，每次单击元素时都会附加一个新的事件处理程序。如果有人经常暂停音乐，他们就会遇到问题。

Intead，试试这个：

```
<audio id="audio" autoplay controls src="song.php" type="audio/mpeg"></audio>
<script type="text/javascript">
    document.getElementById('audio').addEventListener("ended",function() {
        this.src = "song.php?nocache="+new Date().getTime();
        this.play();
    });
</script> 
```

我假设这`song.php`是一个返回音频数据的 PHP 文件。`nocache`查询参数将确保每次都实际调用该文件。

# c++ - DirectX 中的多个着色器与多种技术

> ID：14271083
> 
> 赞同：5
> 
> 时间：2013-01-11T03:14:50.737
> 
> 标签：c++, 3d, directx, shader

我正在浏览所有[Rastertek DirectX 教程](http://rastertek.com/tutindex.html)，顺便说一句，这些教程非常好，作者倾向于为不同的事情使用多个着色器。在后来的一个教程中，他甚至介绍了一个着色器管理器类。

基于其他一些来源，尽管我相信使用具有多种技术的单个着色器会更有效。教程中的多个着色器是为了简单起见，还是在某些情况下使用多个着色器会比一个大着色器更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T13:10:06.637

大多数答案是：这取决于。

效果框架提供了一个很大的优势，您可以使用 Pass->Apply 一次性设置整个管道，这可以让事情变得非常简单，但如果使用不当会导致代码非常慢，这可能是微软决定弃用它的原因，但是您可以使用多个着色器做同样糟糕甚至更糟的事情，directxtk 实际上就是一个很好的例子（它只适用于手机开发）。

在大多数情况下，效果框架会产生一些额外的 api 调用，您可以避免使用单独的着色器（我同意如果您的绘制调用绑定可能很重要，但是您应该考虑使用剔除/实例化技术优化该部分）。使用单独的着色器，您必须自己处理所有状态/常量缓冲区管理，如果您知道自己在做什么，可能会以更有效的方式进行。

我真正喜欢 fx 框架的是非常好的反射和语义的使用，这在设计阶段非常有用（例如，如果你做 float4x4 tP : PROJECTION，你的引擎可以自动将相机投影绑定到着色器）。

此外，着色器阶段之间的编译时布局验证对于创作（fx 框架）非常方便。

单独着色器的一大优势是您可以轻松地只交换您需要的阶段，因此您可以节省大量排列，而无需触及管道的其余部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T03:50:52.010

我猜他们在教程中使用它们是为了简单。

将它们按技术分组或单独分组是一项设计决策。在某些情况下，拥有多个着色器是有益的，因为您可以随意组合它们。

从 Windows 8 中的 DirectX 11 开始，不推荐使用 D3DX 库，因此您会发现它发生了变化。您可以在 DirectX Tool Kit 的源代码中看到一个示例：http: [//directxtk.codeplex.com/](http://directxtk.codeplex.com/)以及它们如何处理它们的效果。

通常你会在内存中有不同的顶点着色器、像素着色器等；技术倾向于将它们结合为一个，因此当您编译着色器文件时，会针对该技术编译特定的顶点和像素着色器。Your Effect Objects is handling what Vertex/Pixel Shader the device is been set when an X Technique with a Y Pass is chosen.

您可以手动执行此操作，例如，仅编译像素着色器并将其设置到设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T18:50:46.780

加载多个 fx 文件绝不是一个好主意。如果可以，请合并您的 fx 文件，如果不需要在您的 VInput 结构中，则尽可能使用全局变量。

通过这种方式，您可以获得所需的效果，并将您在自己的 Shader 类中设置的内容传递给它，以处理其余部分，包括技术通道。

让自己成为一个抽象的 ShaderClass 和一个抽象的 ModelClass。

更准确地说，让您的着色器在您的 Graphics 类中与您的模型分开初始化。如果您使用您的 texture.fx 文件创建一个 TextureShader 类，则无需初始化它的另一个实例；而是与适当的模型共享 TextureShader 对象，然后创建一个 Renderer 结构/类以在需要时使用虚拟来保存着色器指针和（无论如何）模型指针。

# vb.net - 如何将其转换为 DLL

> ID：14271086
> 
> 赞同：0
> 
> 时间：2013-01-11T03:15:01.010
> 
> 标签：vb.net, visual-studio, dll, user-controls, class-library

我想编译一个 DLL 控件，是一个扩展面板但我只有类，我不喜欢使用类来添加自定义控件，我更喜欢将 DLL 添加到工具箱中。

有人可以帮我把它转换成类库 DLL 控件吗？

PS：另外，也许我也需要一个指导步骤来制作类库，这是我第一次尝试这个。

谢谢你。

```
Imports System
Imports System.Collections.Generic
Imports System.ComponentModel
Imports System.Data
Imports System.Drawing
Imports System.Drawing.Drawing2D
Imports System.Text
Imports System.Windows.Forms

Namespace GradientPanel
    Public Partial Class GradientPanel
        Inherits System.Windows.Forms.Panel

        ' member variables
        Private mStartColor As System.Drawing.Color
        Private mEndColor As System.Drawing.Color

        Public Sub New()
            ' InitializeComponent()
            PaintGradient()
        End Sub

        Protected Overrides Sub OnPaint(pe As PaintEventArgs)
            ' TODO: Add custom paint code here

            ' Calling the base class OnPaint
            MyBase.OnPaint(pe)
        End Sub

        Public Property PageStartColor() As System.Drawing.Color
            Get
                Return mStartColor
            End Get
            Set
                mStartColor = value
                PaintGradient()
            End Set
        End Property

        Public Property PageEndColor() As System.Drawing.Color
            Get
                Return mEndColor
            End Get
            Set
                mEndColor = value
                PaintGradient()
            End Set
        End Property

        Private Sub PaintGradient()
            Dim gradBrush As System.Drawing.Drawing2D.LinearGradientBrush
            gradBrush = New System.Drawing.Drawing2D.LinearGradientBrush(New Point(0, 0), New Point(Me.Width, Me.Height), PageStartColor, PageEndColor)

            Dim bmp As New Bitmap(Me.Width, Me.Height)

            Dim g As Graphics = Graphics.FromImage(bmp)
            g.FillRectangle(gradBrush, New Rectangle(0, 0, Me.Width, Me.Height))
            Me.BackgroundImage = bmp
            Me.BackgroundImageLayout = ImageLayout.Stretch
        End Sub

    End Class
End Namespace 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:48:40.033

我一直只是使用 CustomControlLibrary 命名它并将程序集名称和默认命名空间设置为您希望 dll 成为的名称，然后您将右键单击项目并选择添加类，然后您将自定义控件的类代码添加到项目。那时您还可以添加一个新的 UserControl。当您编译它时，它将创建一个 dll，您可以通过右键单击工具箱选择选择项目然后浏览到您创建的 Dll 来浏览它。然后它将包含在您的控件库中的控件添加到您的工具箱中。

# scope - 静态范围内的活动联合

> ID：14271091
> 
> 赞同：0
> 
> 时间：2013-01-11T03:15:27.073
> 
> 标签：scope, pascal

假设我想知道在标有 (*) 的点中哪些联合（引用环境）处于活动状态，我该如何确认？哪些工会实际上是活跃的？

```
procedure P(A,B ; real)  
       X: real  
       procedure Q(B,C : real)  
       y : real  
       ...  
       procedure R(A,C : real)  
       Z:real  
       ........             --(*) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:47:15.633

基本上是基本的嵌套。但是您没有指定完整的块结构（使用 begin..end 对）来完全固定结构。

从缩进假设开始结束；P的块在末尾，Q和R的块直接在resp之后。y 和 z 声明，然后在 Q 中：首先搜索 Q，然后搜索 P，然后搜索 P 上方的范围（主程序/单元或其他过程），在 RR、P、单元等中。

# java - 被中断的线程会继续它的事务吗？

> ID：14271094
> 
> 赞同：0
> 
> 时间：2013-01-11T03:16:18.993
> 
> 标签：java, multithreading

假设我有一个这样的线程类：

```
public class ThreadClass extends Thread{
      Object object = new Object();    //relevant object

      public void run(){
          synchronized(object){
              if(/*condition is true*/){
                   //do transactions here
              }else{
                  try{
                      object.wait();
                   }catch(InterruptedException e){
                       //if thread was interrupted
                   }
              }

              //other transactions here
          }   
      }

} 
```

如果当前线程被中断，它会继续它的事务吗？它还会在这里进行*其他交易*吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:40:42.693

> 如果当前线程被中断，它会继续它的事务吗？

是的，但是会设置中断标志（调用`Thread.interrupted()`将返回 true），但这不会影响正在执行的代码。

> 它还会在这里进行其他交易吗？

是的，出于与上述相同的原因。假设你没有在块中返回，其他事务也将被执行，如果`object.wait()`被执行然后被捕获。`InterruptedException``catch`

# wysiwyg - 寻找具有 RTF 下载功能的优秀在线 WYSIWYG 编辑器

> ID：14271095
> 
> 赞同：0
> 
> 时间：2013-01-11T03:16:33.640
> 
> 标签：wysiwyg, nicedit

有谁知道提供良好的所见即所得编辑器的任何 JavaScript/CSS 脚本，以及将输入信息下载到 RTF 文件的能力？

到目前为止，我发现的唯一一个是[NicEdit](http://nicedit.com/)，但我无法弄清楚如何将格式化文本（HTML 格式）转换为 RTF 并提供下载。我已经能够将格式化的 HTML 存储在 JavaScript 变量中，但不知道如何从那里开始。

你们有谁知道一个开源的所见即所得文本编辑器，它让用户能够以 RTF 格式下载他们的格式化文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:01:40.790

最后我决定去 TinyMCE。它非常通用，虽然下载文本不是内置功能，但只要按下按钮进行下载，只需通过 PHP 变量传递格式化的 HTML 文本，就可以轻松设置它。

从那里，有各种 php 类可用于将 HTML 转换为 RTF。只需更新此内容，以防其他人将来遇到类似问题。

# php - str_replace; 将所有字母替换为 * 减去 The First？

> ID：14271098
> 
> 赞同：0
> 
> 时间：2013-01-11T03:16:51.583
> 
> 标签：php

我正在尝试用星号替换给定字符串的所有字母，减去第一个字母。我试过这个：

```
$AnswerArr = str_split($Answer);
$AnswerCount = count($Answer);
$Toreplace = $AnswerCount - 1;
$ReplaceAnswer = str_replace($AswerArr['0'], "*", $Answer, $Toreplace); 
```

但这不起作用，我必须使用正则表达式吗？

使用提供的第一个答案：

```
Warning: substr() expects parameter 1 to be string, array given in /var/www/New/API/FormValidation.php on line 15

Warning: strlen() expects parameter 1 to be string, array given in /var/www/New/API/FormValidation.php on line 15

Warning: str_repeat() [function.str-repeat]: Second argument has to be greater than or equal to 0 in /var/www/New/API/FormValidation.php on line 15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:21:26.967

怎么样：

```
$ReplaceAnswer = substr($Answer, 0, 1) . str_repeat('*', strlen($Answer) - 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:25:13.893

这应该有效。

```
$tmp = preg_replace('/(?!^)[\S \t]/', '*', $inputstr); 
```

# javascript - 用javascript写html

> ID：14271100
> 
> 赞同：0
> 
> 时间：2013-01-11T03:17:14.573
> 
> 标签：javascript, html

> **可能重复：**
> [javascript - document.write 错误？](https://stackoverflow.com/questions/3236353/javascript-document-write-error)

我想将html写入javascript。我确信这个问题已经被问过很多次了，我知道它很简单，但我无法弄清楚。

我试过这个：

```
 <script>
  document.write("<h1>This is a heading</h1>");
  document.write("<p>This is a paragraph</p>");
  </script> 
```

但它删除了所有其他 html。

我知道这是菜鸟问题，我对 javascript 非常缺乏经验......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:19:39.077

```
document.body.innerHTML += '<h1>This is a heading</h1>';
document.body.innerHTML += '<p>This is a paragraph</p>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:26:05.500

假设我的页面上有一个 div，我想向其中添加内容：

```
<div id="myDiv"><div> 
```

我可以使用 javascript 来做到这一点：

```
<script>
var div = document.getElementById("myDiv");
var myHtmlString = "<h1>This is a heading</h1>";
myHtmlString += "<p>This is a paragraph</p>"
div.innerHTML = myHtmlString;
</script> 
```

# javascript - 在 ExpressJS 中拒绝上传路由

> ID：14271101
> 
> 赞同：0
> 
> 时间：2013-01-11T03:17:16.087
> 
> 标签：javascript, api, node.js, express

我一直在使用 ExpressJS 来促进文件上传，但据我所知，您可以将文件上传到任何路线，无论它是否处理它。

说我有

`app.post('/photos/upload', photos.upload);`

我知道我想通过该路线上传照片，以便我可以处理它，但是如果有人将文件上传到其他路线怎么办？所有这些文件都将被写入服务器，但不会被处理。

除了我真正想要上传文件的路线之外，有没有办法拒绝所有路线上的上传？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:23:26.390

你现在正在做的事情是这样的：

```
app.use(express.bodyParser()) 
```

其中包括`express.multipart()`处理文件上传。您只想将其拆分：

```
app.use(express.json())
app.use(express.urlencoded())

app.post('/photos/upload', express.multipart(), photos.upload) 
```

# dojo - dojo 1.8 - 将长 html 内容插入 domContruct.place()

> ID：14271103
> 
> 赞同：1
> 
> 时间：2013-01-11T03:17:30.527
> 
> 标签：dojo

嗨，我对 dojo 的 domConstruct.toDom 和 domConstruct.place 有疑问。无论我使用 domConstruct 函数还是只使用 domConstruct.place，我似乎都无法放置长 html 列表标签。请在下面查看我的脚本：

```
var row = domConstruct.toDom('<ul id="list">
<li class="odd">
    <div class="bold">
        <a class="odd">Odd</a>
    </div>
</li>
<li class="even">
    <div class="italic">
        <a class="even">Even</a>
    </div>
</li>
<li class="odd">
    <a class="odd">Odd</a>
</li>
<li class="even">
    <div class="bold">
        <a class="even">Even</a>
    </div>
</li>
<li class="odd">
    <div class="italic">
        <a class="odd">Odd</a>
    </div>
</li>
<li class="even">
    <a class="even">Even</a>
</li> 
```

```
<ul id="list2">
<li class="odd">Odd</li></ul>');

domConstruct.place(row,"CPane_Chart"); 
```

请指教，提前谢谢

克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:12:39.333

问题不在于 Dojo，而是您不能在 JavaScript 中使用多行字符串，除非您`\`在末尾用 a 转义新行。所以你可以做这样的事情：

```
var row = domConstruct.toDom('<ul id="list"> \
<li class="odd"> \
    <div class="bold"> \
        <a class="odd">Odd</a> \
....
<li class="odd">Odd</li></ul>'); 
```

不过，就个人而言，我更喜欢将这样的 HTML 放入外部 HTML 文件并使用 dojo/text 加载它：

```
require(["dojo/text!myListHtml.html"], function(myListHtml){
     var row = domConstruct.toDom(myListHtml);
}); 
```

见[http://dojotoolkit.org/reference-guide/1.8/dojo/text.html](http://dojotoolkit.org/reference-guide/1.8/dojo/text.html)

# android - Android，如何判断用户是否单击链接链接或按下主页按钮

> ID：14271108
> 
> 赞同：2
> 
> 时间：2013-01-11T03:17:50.090
> 
> 标签：android, android-lifecycle, linkify, activity-finish, home-button

我想我需要在我的`onStop`方法中添加一些代码。它与仅在活动发生时才应运行的服务有关`finished()`

但是当用户`linkify`在网络浏览器上跟随一些'd文本，或者当用户按下主屏幕时，两者都会调用`onStop()`但这些都不会结束活动，**我不想在用户点击链接时结束活动**，所以我不能放入`finish()`，`onStop()`除非我可以检测并区分这种情况何时发生`onStop()`

有没有一种方法可以覆盖`Linkify()`，以便我可以在其中添加一个标志，或者让它运行`startActivityforResult()`，以便我可以在结果中返回信息？

同样，有没有办法**可以**将活动设置为`finish()`用户按下主页按钮时？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:25:50.660

您是否可以签[`isFinishing()`](http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29)入`onStop()`以决定是否需要运行与服务相关的代码？

```
@Override
protected void onStop() {
    super.onStop();

    if (isFinishing()) {
        // Your service-related code here that should only run if finish() 
        // was called.
    }
} 
```

**更新：（更好地理解问题后）**

[与我在另一个问题](https://stackoverflow.com/a/14112841/1023092)上建议的方法非常相似，如果是这种情况，您可能可以覆盖`startActivity()`以在链接启动时进行拦截并设置您的标志。

```
@Override
public void startActivity(Intent intent) {
    final String action = intent.getAction();
    if (action.equals(Intent.ACTION_VIEW)) { 
        // maybe also check if getScheme() is 'http' then set our flag
        persist.saveToPrefs("linkifyClick", true);
    }

    // proceed with normal handling by the framework
    super.startActivity(intent);
} 
```

另一个答案还显示了`startActivityForResult()`如果您愿意，您也可以打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:30:45.907

解决方案（仍然存在问题）

`onClick:`我在 xml 中的 textView 上放置了一个属性

```
<TextView
        android:id="@+id/body"
        android:paddingTop="10dp"
        android:onClick="onTextViewClick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" /> 
```

然后在该新方法中的我的共享首选项中保存了一个标志

```
public void onTextViewClick(View v){

    //write to sharedpreferences
    persist.saveToPrefs("linkifyClick", true);
} 
```

然后在我的 onStop 中，我可以检测到该标志是否已设置！

```
 @Override
public void onStop(){
    super.onStop();

    if(persist.getFromPrefs("linkifyClick", false) == false)
    {
        finish();
    }
    else
        persist.saveToPrefs("linkifyClick", false); //if it was true, then set to false
} 
```

问题

可以在不接触实际链接部分的情况下单击链接文本。这将标志设置为`true`并且仍然混淆了我想要的生命周期。所以我需要能够检测到何时按下主页按钮

**更新：**这有助于澄清另一张海报的问题（带有已接受的答案），该人更新了答案，我在将其放入我的代码后接受了它。有用。

# asp.net-mvc - 级联 DropDown 优雅地捕获错误

> ID：14271113
> 
> 赞同：0
> 
> 时间：2013-01-11T03:18:10.470
> 
> 标签：asp.net-mvc, telerik-mvc, cascadingdropdown

我的页面上有 5 个级联下拉菜单。我希望他们**尝试**级联，但如果它不级联 - 优雅地停止尝试或出错。我还希望启用所有组合框，而不是在填充前一个组合框之前禁用。

我尝试在启用的 fluent API 上使用 .Enable(true)，但下拉菜单仍然被禁用。知道我该怎么做吗？

```
 <div class="span5">
              <div class="control-group">
        @Html.Label("Product Types", new { @class = "control-label" })
        <div class="controls">
            @( Html.Telerik().ComboBox()
                .Name("drpProductTypes")
                .BindTo(new SelectList(ViewBag.drpProductTypes))
                .Placeholder("Select Category...")
                .CascadeTo("drpClass1").Enable(true)
            )
        </div>
        <div class="fix"></div>
    </div>

    <div class="control-group">
        @Html.Label("Class 1", new { @class = "control-label" })
        <div class="controls">
        @( Html.Telerik().ComboBox()
                .Name("drpClass1")
                .DataBinding(binding => binding.Ajax().Select("_GetDropDownClassOne", "List"))
                .Placeholder("Select Class 1...")
                .CascadeTo("drpClass2").Enable(true)
        )
        </div>
        <div class="fix"></div>
    </div>

    <div class="control-group">
        @Html.Label("Class 2", new { @class = "control-label" })
        <div class="controls">
        @( Html.Telerik().ComboBox()
                .Name("drpClass2")
                .DataBinding(binding => binding.Ajax().Select("_GetDropDownClassTwo", "List"))
                .Placeholder("Select Class 2...")
                .CascadeTo("drpClass3").Enable(true)
        )
        </div>
        <div class="fix"></div>
    </div>

    <div class="control-group">
        @Html.Label("Class 3", new { @class = "control-label" })
        <div class="controls">
        @( Html.Telerik().ComboBox()
                .Name("drpClass3")
                .DataBinding(binding => binding.Ajax().Select("_GetDropDownClassThree", "List"))
                .Placeholder("Select Class 3...")
                .CascadeTo("drpClass4").Enable(true)
        )
        </div>
        <div class="fix"></div>
    </div>

    <div class="control-group">
        @Html.Label("Class 4", new { @class = "control-label" })
        <div class="controls">
        @( Html.Telerik().ComboBox()
                .Name("drpClass4")
                .DataBinding(binding => binding.Ajax().Select("_GetDropDownClassFour", "List"))
                .Placeholder("Select Class 4...").Enable(true)
        )
        </div>
        <div class="fix"></div>
    </div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:29:31.617

如果您不想要禁用的外观，请不要使用级联功能 - 因为这是设计使然。

**您可以在change**事件和**dataBinding**事件（如果我没记错的话，通过 e.data 字段发送另一个 DropDownList 的值）和**reload**方法的帮助下手动实现该级联。

您可以在[文档](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html)中找到所有这些方法以及如何使用它们。

# python - 切片数组时假设后续维度为零

> ID：14271121
> 
> 赞同：1
> 
> 时间：2013-01-11T03:18:48.270
> 
> 标签：python, numpy

我需要对一个数组进行切片，我希望除第一个维度之外的每个维度都假设为零。

给定一个数组：

```
x = numpy.zeros((3,3,3)) 
```

我想要以下行为，但不需要事先知道维度的数量：

```
y = a[:,0,0] 
```

本质上，我正在寻找可以代替[Ellipsis](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#basic-slicing)的东西，但不是扩展到所需的`:`对象数量，而是扩展到所需的零数量。

有什么内置的吗？如果没有，获得我需要的功能的最佳方法是什么？

**编辑：**
一种方法是使用：

```
y = x.ravel(0:temp.shape[0]) 
```

这很好用，但是在某些情况下（例如我的）`ravel`将需要创建数组的副本而不是视图。由于我正在处理大型数组，因此我想要一种更高效的内存方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:59:44.357

您可以创建一个索引元组，如下所示：

```
x = arange(3*3*3).reshape(3,3,3)

s = (slice(None),) + (0,)*(x.ndim-1)

print x[s]  # array([ 0,  9, 18])
print x[:,0,0] # array([ 0,  9, 18]) 
```

我想你也可以这样做：

```
x.transpose().flat[:3] 
```

但我更喜欢第一种方法，因为它适用于任何维度（而不仅仅是第一种），而且显然与只写同样有效`x[:,0,0]`，因为它只是一种不同的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:01:18.693

我通常使用tom10的方法，但这里有另一个：

```
for i in range(x.ndim-1):
    x = x[...,0] 
```

# android - 录制音频并保存到应用程序的数据文件夹中

> ID：14271122
> 
> 赞同：1
> 
> 时间：2013-01-11T03:18:49.097
> 
> 标签：android, audio, storage, internal, recording

我对编程很陌生，我想学习如何制作一个允许用户录制音频并因此将其保存到应用程序的数据文件夹中的应用程序。我设法完成了录音部分，但只设法将其保存到了 SD 卡中。任何愿意帮助我弄清楚如何将我的音频保存到内部存储器中的人？

```
private void playRecording() throws Exception {
    ditchMediaPlayer();
    mediaPlayer = new MediaPlayer();
    mediaPlayer.setDataSource(OUTPUT_FILE);
    mediaPlayer.prepare();
    mediaPlayer.start();
}

private void stopRecording() {
    if(recorder != null)
        recorder.stop();
}

private void beginRecording() throws Exception {
    ditchMediaRecorder();
    File outFile = new File(OUTPUT_FILE);

    if(outFile.exists())
        outFile.delete();

    recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(OUTPUT_FILE);

    recorder.prepare();
    recorder.start();

}

private void ditchMediaRecorder() {
    if (recorder != null)
        recorder.release();
}

  public void recordOnClick(View v) {
      //when record button is pressed
      try{
            beginRecording();
        }catch (Exception e){
            e.printStackTrace();
        }
        btnRecord.setVisibility(View.INVISIBLE);
        btnStop.setVisibility(View.VISIBLE);
  }

  public void stopOnClick(View v) {
      //when stop button is pressed
      try{
            stopRecording();
        }
        catch (Exception e){
            e.printStackTrace();
        }

        btnStop.setVisibility(View.INVISIBLE);
        btnRecord.setVisibility(View.INVISIBLE);

        btnDelete.setVisibility(View.VISIBLE);
        btnPlay.setVisibility(View.VISIBLE);
        btnShare.setVisibility(View.VISIBLE);
  }

  public void playOnClick(View v) {
      //when play button is pressed
        try{
            playRecording();
        }
        catch (Exception e){
            e.printStackTrace();
        }

        btnStop.setVisibility(View.INVISIBLE);
        btnRecord.setVisibility(View.INVISIBLE);
  } 
```

这是我的 onClick，我将在其中指定每个按钮的输出（我正在做一个图表，所以我有大约 44 个按钮！）

```
 public void onClick(View v) {
switch (v.getId()) {

case R.id.btn1:

      OUTPUT_FILE=Environment.getExternalStorageDirectory()+"/y1.3gpp";     
  File file1 = new File(Environment.getExternalStorageDirectory()+"/y1.3gpp");
        if (file1.exists()) {

            btnPlay.setVisibility(View.VISIBLE);
            btnDelete.setVisibility(View.VISIBLE);
            btnShare.setVisibility(View.VISIBLE);
        }
        else {
            btnRecord.setVisibility(View.VISIBLE);
        }   
 break;

case R.id.btn2:

OUTPUT_FILE=Environment.getExternalStorageDirectory()+"/y2.3gpp";   
File file2 = new File(Environment.getExternalStorageDirectory()+ "/y2.3gpp" );
        if (file2.exists()) {

            btnPlay.setVisibility(View.VISIBLE);
            btnDelete.setVisibility(View.VISIBLE);
            btnShare.setVisibility(View.VISIBLE);
        }
        else {
            btnRecord.setVisibility(View.VISIBLE);
        }   

 break; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:24:41.557

也许你想看看这个？[在内部存储器中创建文件夹以保存文件并稍后检索它们](https://stackoverflow.com/questions/8493642/creating-folder-in-internal-memory-to-save-files-and-retrieve-them-later)

```
//Creating an internal directory
File mydir = context.getDir("mydir", Context.MODE_PRIVATE); 
//Getting a file within the dir.
File fileWithinMyDir = new File(mydir, "myfile"); 
FileOutputStream out = new FileOutputStream(fileWithinMyDir); 
//Use the stream as usual to write    into the file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:33:32.247

您需要在清单中添加此使用权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

使用它作为 sd 卡的路径

```
File sdcard = Environment.getExternalStorageDirectory();
File storagePath = new File(sdcard.getAbsolutePath() + "/folderName");
File userimage = new File(storagePath + "/" + fileName + ".3gpp"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T06:31:12.097

建议将文件存储在数据目录中。（即 sdcard/Android/data/yourpackage/）这样，一旦用户卸载您的应用程序，该文件夹就可以自动删除。

您可以使用以下代码获取您的数据文件夹：（如果您的 Build.VERSION.SDK_INT 小于 Build.VERSION_CODES.FROYO ）

```
Environment.getExternalStorageDirectory() +"/Android/data/" +context.getApplicationContext().getPackageName()); 
```

（如果您的 Build.VERSION.SDK_INT 大于 Build.VERSION_CODES.FROYO ）

```
context.getExternalFilesDir(Context.STORAGE_SERVICE) 
```

# php - ezSQL Object(stdClass) 不能使用 stdClass 类型的对象作为数组

> ID：14271125
> 
> 赞同：0
> 
> 时间：2013-01-11T03:18:55.587
> 
> 标签：php, stdclass, ezsql

```
$db = new ezSQL_mysql($user,$pass,$db,$server);
$user = $db->get_row("SELECT id,last FROM users WHERE email='$email'");
var_dump($user); 
```

转储返回：

```
object(stdClass)#11 (5) {
   ["id"]=>
   string(1) "4"
   ["last"]=>
   string(19) "2013-01-06 14:48:24"
} 
```

但是，在尝试通过对象询问用户的 id 时：

```
$uid=$user->id; 
```

我收到此错误：

```
Cannot use object of type stdClass as array 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:48:36.707

我通过编辑类并推送 get_object_vars 解决了我自己的问题：

```
if ( $output == OBJECT )
        {
            $out = $this->last_result[$y]?$this->last_result[$y]:null;
            return get_object_vars($out);
        } 
```

# java - DFS - Java递归 - 找到节点的总和

> ID：14271126
> 
> 赞同：1
> 
> 时间：2013-01-11T03:19:09.407
> 
> 标签：java, recursion, depth-first-search

下面是我的代码：

```
class Node{
    int value;
    Node left;
    Node right;
    Node parent;
       //getters, setters
} 
```

**创建树**

```
 private static void createTree() throws FileNotFoundException{
    Map<String,Node> nodeMap = new HashMap<String,Node>();
    Scanner sc = new Scanner(new File("<location>"));
    int row =0;
    while(sc.hasNextLine()){
        String line = sc.nextLine();
        Scanner scanLine = new Scanner(line);
        System.out.println(line);
        int col =0;

        while(scanLine.hasNextInt()){
            int value = scanLine.nextInt();
            System.out.println(row+","+col+"="+value);
            Node node = new Node(value);
            nodeMap.put(row+","+col,node);
            if(row >0){
                if(col %2 ==0){
                    //left node
                    Node parent = nodeMap.get(row-1+","+col/2);
                    if(parent !=null){
                        node.setParent(parent);
                        parent.setLeft(node);
                    }
                }else{
                    //right node
                    Node parent = nodeMap.get(row-1+","+(col-1)/2);
                    if(parent !=null){
                        node.setParent(parent);
                        parent.setRight(node);
                    }
                }
            }
            col++;
        }
        row++;
    }
    System.out.println(nodeMap);
    Node root = nodeMap.get("0,0");
    traverseTree(root);
    System.out.println("sum="+sum);

} 
```

**实际遍历**

```
 static int sum =0;
private static void traverseTree(Node n){
    if(n != null){
        sum+=n.value;
        traverseTree(n.left);
        traverseTree(n.right);
    }
} 
```

我有两个问题：

1.  读取输入并创建树：我从文件中读取它并将根节点存储在哈希图中。有哪些替代方案？

2.  在递归搜索中，我将总和保留在函数之外，因此可以按顺序计算总和。是否可以将 sum 变量保留在内部并在最后返回总值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:26:36.763

> 我从文件中读取它并将根节点存储在哈希图中。有哪些替代方案？

考虑到明显的输入格式，您的操作方式似乎很合理，但是我建议使用 a`List<List<Node>>`而不是将其与字符串一起存储，因为您的性能可能会很快下降，因为字符串非常相似，这可能会导致哈希冲突，从而降低您的性能如果输入很大，map 的性能会大大提高。

> 在递归搜索中，我将总和保留在函数之外，因此可以按顺序计算总和。是否可以将 sum 变量保留在内部并在最后返回总值？

```
private static int traverseTree(Node n) {
    if (n != null) {
        return n.value + traverseTree(n.left) + traverseTree(n.right);
    } else {
        return 0;
    }
} 
```

# jquery - javascript jQuery Ajax 中的安全密码

> ID：14271135
> 
> 赞同：0
> 
> 时间：2013-01-11T03:20:24.180
> 
> 标签：jquery, firebug

使用（缩小的）javascript Ajax jQuery 时，我可以保护其他程序员的密码安全吗？更具体地说，当使用 Firebug 之类的工具进行调试时，我可以保留其他人的密码（甚至加密）吗？

这是一个场景：我构建了一个 XML 文档（服务器端）并将其传递给我的 jQuery/Ajax 控制器。谁说有人不会在 Firebug 中设置断点、复制并粘贴加密的用户 ID、加密的密码并将他们自己的请求发送到原始 URL？

是的，我可以做所有这些服务器端。我的问题是，我可以在客户端做吗？

让我们面对现实吧，当人们想要“安全”数据时，我们正在保护自己免受...其他程序员的侵害。

不过，你会喜欢的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:33:57.747

不，你不能。你只能让它难以破解。这是 DRM 方案的基本问题：

他们旨在从客户端控制客户端上的内容。

也就是说，除非您尝试实施 DRM 方案，否则无需牺牲安全性。这是因为授权、身份验证和验证应该始终发生在服务器上（或者也发生在服务器上。）

客户端需要的唯一凭据是它自己的凭据，并且由于客户端需要它们登录并且已经拥有它们，这不是安全问题。

任何允许客户端超出其权限的凭据都必须保留在服务器中。

仅在对客户端进行适当身份验证和操作授权之后，服务器才代表客户端使用这些凭据。

任何将凭据传递给客户端并依赖客户端混淆来维护安全性的架构都是有缺陷的。

# sql-server-2008 - 存储 TOTP 的密钥

> ID：14271136
> 
> 赞同：7
> 
> 时间：2013-01-11T03:20:25.080
> 
> 标签：sql-server-2008, authentication, encryption, google-authenticator

我正在寻找设置我的网站（C#/SQL 2008）以允许使用 Google Authenticator 进行两因素身份验证。我的网站正常工作，从获取 QR 码到生成上一个/当前/下一个密钥（我很乐意接受 3，以防时钟不同步）。

显然我们需要为每个用户生成一个密钥，否则每个用户都将拥有相同的一次性密码。

我的问题是存储此密钥的***最佳做法是什么？***我可以将它作为纯文本存储在用户表中，还是应该加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:40:51.670

为什么不**varchar**？据我所知，谷歌的二维码是一个字母数字字符串（你可以手写，以防你安装二维码扫描仪）

在我的大学个人项目中，我生成了一个 128 个字符长的字母数字字符串，我将其发送到我的自定义 TOTP 应用程序，我的数据库将此信息存储为 VARCHAR(128) ，

我认为最佳实践答案取决于密钥的大小以及密钥空间的定义方式，而不是 62 个字母数字，为什么不使用整个 ascii 表？您需要将密钥存储为 varbyte 吗？

# sgmlreader - SgmlReader 在 Nuget 包中嵌入 DTD

> ID：14271138
> 
> 赞同：1
> 
> 时间：2013-01-11T03:20:32.387
> 
> 标签：sgmlreader

几天前我报告说，DTD 模式没有嵌入到 SgmlReader 的 nuget 包中。 [那里的帖子](http://forums.developer.mindtouch.com/showthread.php?8895-SgmlReader-NuGet-Package)

但是我得到了回应，然后它被嵌入了，为了使用它，我必须将 DocType 设置为“HTML”它仍然对我不起作用，有人对 Nuget 提供的 1.8.8 版有同样的问题吗？（1.8.7 对我来说很好）

我使用 DotPeek 反编译了这两个版本，但在 1.8.8 中没有看到 DTD（附截图）

![在此处输入图像描述](../Images/afd031b14431e3be1de95b60434ad9b0.png)

# python - 使用 Python 从 FASTA 文件中搜索四重序列

> ID：14271141
> 
> 赞同：0
> 
> 时间：2013-01-11T03:21:10.167
> 
> 标签：python

基因组的四链体序列如下所示：

```
Gx Ny1 Gx Ny2 Gx Ny3 Gx 
```

其中 G 是鸟嘌呤碱基，Ns 代表其他碱基。x、y1、y2 和 y3 是整数。

如果 ，则特定段将是四重序列`x >= 2`。

我的问题是我想计算一个 FASTA 序列中有多少这样的片段，以及它们的类型是什么，就 x、y1、y2 和 y3 而言。为此，我需要您的帮助。

# java - 提取后方法调用不起作用

> ID：14271143
> 
> 赞同：1
> 
> 时间：2013-01-11T03:21:33.813
> 
> 标签：java, methods, validation

我一直在尝试通过创建输入验证方法然后调用它来优化我的android代码，但它不起作用。我试过调试但没有。这是我第一次拥有它并且它正在工作：

```
String s1 =startTime1.getText().toString();
if(TextUtils.isEmpty(startTime1.getText())){
    s1 = "00:00";
}
String e1 = endTime1.getText().toString();
if(TextUtils.isEmpty(endTime1.getText())){
    e1 = "00:00";
} 
```

但是在将验证提取到此方法中并在每次用户输入输入时调用它之后似乎没有任何效果。

```
public void emptyInputValidation(EditText time, String timeToString){
    if(TextUtils.isEmpty(time.getText())){
        timeToString = "00:00";
    }           
}

compute.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v){

                try{
                    String s1 =startTime1.getText().toString();
                    emptyInputValidation(startTime1, s1);
                    String e1 = endTime1.getText().toString();
                    emptyInputValidation(endTime1, e1);
                    }
            catch (ParseException e){
                    e.printStackTrace();

                }     
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:33:18.027

在`timeToString = "00:00";`您的函数中，您将参数重新分配给`"00:00"`，这不会反映在方法之外。这是更正后的代码：

```
public String emptyInputValidation(EditText time) {
    if(TextUtils.isEmpty(time.getText())){
        return "00:00";
    } else {
        return time.getText().toString();
    }           
} 
```

然后只需调用`String s1 = emptyInputValidation(startTime1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:33:49.743

这是 Java 中对象引用和参数传递如何工作的令人讨厌的部分之一。`timeToString = "00:00";`我们方法中的设置`emptyInputValidation`不会反映在该方法之外。Java 按值传递引用，这有点令人困惑。这意味着您在字符串上调用以更改它的任何方法都将反映在方法范围之外，但是赋值不会。

解决这个问题的最简单方法是让它返回`String`：

```
public String emptyInputValidation(EditText time)
{
    if(TextUtils.isEmpty(time.getText()) {
        return "00:00";
    }
    return time.getText();
} 
```

# java - printf 的“无法解决符号错误”

> ID：14271148
> 
> 赞同：0
> 
> 时间：2013-01-11T03:22:24.407
> 
> 标签：java

此代码在编译期间导致错误...我不知道我做错了什么？

```
CoinFlippingContest.java:27: cannot resolve symbol
symbol : method printf (java.lang.String,int,int)
location: class java.io.PrintStream
System.out.printf(" %d \t %d",(i+1),frequency[i]);
       ^
1 error 
```

一切都必须在 Java 1.4.2 中。这是代码：

```
//IMPORT JAVA UTILITIES AND IO
import java.io.*;
import java.util.*;
//DEFINE CLASS
public class CoinFlippingContest
{
public static void main( String args[] )
{
//GENERATES RANDOM NUMBER
Random randomNumbers = new Random(); 

int[] frequency = new int[10];
for(int i=0; i<10; i++)
frequency[i]=0;

int number;

//RESULTS FOR 6000
for ( int col = 1; col <= 6000; col++ )
{
number = 1 + randomNumbers.nextInt( 10 );
frequency[number]++;
}
//DISPLAY THE HEADINGS
System.out.println( "number\tFrequency" ); 
for(int i=0; i<10; i++)
System.out.printf(" %d \t %d",(i+1),frequency[i]);

//NUMBER OF HEADS AND TAILS IN TOTAL
int even = 0, odd = 0;
for(int i=0; i<10; i++)
{
if(i%2==0)
odd +=frequency[i];
else even += frequency[i];
}
//OUTPUT NUMBER OF HEADS AND TAILS EVEN AND ODDS
System.out.println("\nheads: "+even+"\ntails: "+odd);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:26:02.713

正如错误消息告诉您的[那样，Java 1.4.2](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html)[中没有`printf`方法`PrintStreams`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html)。当前的 JavaDocs 告诉我们这[`PrintStream#printf()`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)是在 Java 1.5 中添加的。

使用现代版本的 Java（1.4 已经有十多年的历史了），或者使用`printf()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T03:26:26.940

`printf`仅从 1.5 版开始可用，1.4.2 版尚不可用。既然你在问（见评论），这会做：

```
for(int i = 0; i < 10; i ++)
{
    System.out.println((i + 1) + "\t" + frequency[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T03:27:50.247

printf 不在 PrintStream 1.4.2 API 中。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html)

但它是，例如，在 1.5 API（或更高版本）中

[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html)

# ssis - 使用 SSIS 不同的 sql 语句导出到多个 excel 文件

> ID：14271151
> 
> 赞同：1
> 
> 时间：2013-01-11T03:23:01.480
> 
> 标签：ssis

我试图弄清楚如何将我的 SSIS 包导出到多个 excel 文件。这些文件将具有相同的字段并从同一个表中提取数据。但是，查询语句是不同的。我试图弄清楚如何使用“for循环容器”来做到这一点。

这两个查询如下：

```
select acct_num, item, value_year, value_status, eff_date, ref_num,ValueAmount, mileage, 
  valuation_method, note, filing_date, late_ind, billg_typ_ndx, cur_seq, supp_num, 
  exempt_type, district_code, district2, district3, form_num, cost, bill_no, 
  first_half_batch, sec_half_batch, status, dmv_type, leasing_type, bus_pct, 
  last_mod, last_user, veh_type, mileage_amt, msrp
FROM make_pp_valuation
where acct_num not in (select distinct acct_num from dbo.pp_accessory_values)
ORDER by acct_num"

select v.acct_num, v.item, v.value_year, v.value_status, v.eff_date, v.ref_num, v.ValueAmount, v.mileage, v.valuation_method, v.note, v.filing_date, v.late_ind, v.billg_typ_ndx, v.cur_seq, v.supp_num, v.exempt_type, v.district_code, v.district2, v.district3, v.form_num, v.cost, v.bill_no, v.first_half_batch, v.sec_half_batch, v.status, v.dmv_type, v.leasing_type, v.bus_pct, v.last_mod, v.last_user, v.veh_type, v.mileage_amt, v.msrp
FROM make_pp_valuation 
  v inner join pp_accessory_values a on v.acct_num = a.acct_num and v.item = a.item
ORDER by v.acct_num 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:35:26.327

这里不需要 for-loop 容器 - 您只需要两个单独的导出。将两个数据流任务添加到您的控制流中，并让每个任务都导出您需要的文件。

# php - Laravel Schema 是否开箱即用地管理多态关联？

> ID：14271153
> 
> 赞同：5
> 
> 时间：2013-01-11T03:23:32.207
> 
> 标签：php, polymorphic-associations, laravel

我想为一个项目创建一些可*评论*的模型，但我找不到任何参考来创建评论迁移脚本，我只在 vimeo 上找到了这个视频：[Laravel 4 - Eloquent Collections & Polymorphic Relations](http://vimeo.com/53183075)。

我应该明确添加多态列吗？

```
Schema::create('comments',function($table){
    $table->increments('id');
    $table->text('body');
    $table->string('commentable_type');
    $table->integer('commentable_id');
    $table->timestamps();
}); 
```

当键是外键时，构建器确实希望程序员出现问题，例如`$table->foreign('user_id')->references('id')->on('users');`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-28T19:45:29.547

Laravel ~4.1 有一个方法可以做到这一点：

```
$table->morphs('itemable'); 
```

创建：

```
itemable_id
itemable_type
table_name_itemable_id_itemable_type_index 
```

Second optional parameter is a replacement index name if the index is too long. The signature is:

```
public function morphs($name, $indexName = null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:02:05.957

多态连接与 Schema 无关，它们是一个 Eloquent 功能，允许在任何其他类型的模型之间建立关系。

您可以查看相关文档：

[http://four.laravel.com/docs/eloquent#relationships](http://four.laravel.com/docs/eloquent#relationships)

# java - 解析日期错误

> ID：14271155
> 
> 赞同：1
> 
> 时间：2013-01-11T03:23:40.620
> 
> 标签：java, date

我有以下代码。获取月份时会出现问题。它说“‘月’参数必须在 1 到 12 的范围内。” 它总是返回 0。为什么？

```
 String target = "2013-01-04";
    DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
    Date date = df.parse(target);

   Calendar cal = Calendar.getInstance();
   cal.setTime(date);
   int year = cal.get(Calendar.YEAR);
   System.out.println("year-"+year);
   int month = cal.get(Calendar.MONTH);
   System.out.println("month-"+month);
   int day = cal.get(Calendar.DAY_OF_MONTH);
   System.out.println("day-"+day); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T03:28:05.663

这是 Calendar 类的一个怪癖。出于某种疯狂的原因，它使用从零开始的索引数月，即使所有其他日期部分都是从一开始的。

甚至不要考虑提出关于此的问题，因为您将加入一大群人：Calendar 可以说是 JDK 中最糟糕的类。

“修复”是使用[jodatime 库](http://joda-time.sourceforge.net)，它非常适合您的所有日期操作、解析和格式化需求。这实际上是现在的行业标准。

# java - ViewPager ListView

> ID：14271157
> 
> 赞同：1
> 
> 时间：2013-01-11T03:23:45.247
> 
> 标签：java, android, android-viewpager

我已经把我之前的问题改成了这个。我找到了ListView ViewPager 的[示例](http://spacetech.dk/android-viewpager-with-listview-pages.html)，但我的问题是该示例以编程方式添加了 ListView，我想要的内容已经在我的 xml 中设置。

[示例](http://spacetech.dk/android-viewpager-with-listview-pages.html)代码：

主要活动：

```
public class MainActivity extends Activity {

/** Called when the activity is first created. */

private Context mContext;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mContext = this;
    setContentView(R.layout.activity_main);
    ListView listview1 = new ListView(mContext);
    ListView listview2 = new ListView(mContext);
    ListView listview3 = new ListView(mContext);

    Vector<View> pages = new Vector<View>();

    pages.add(listview1);
    pages.add(listview2);
    pages.add(listview3);

    ViewPager vp = (ViewPager) findViewById(R.id.viewpager);
    CustomerPagerAdapter adapter = new CustomerPagerAdapter(mContext, pages);
    vp.setAdapter(adapter);

    listview1.setAdapter(new ArrayAdapter<String>(mContext,
            android.R.layout.simple_list_item_1, new String[] { "A1", "B1",
                    "C1", "D1" }));
    listview2.setAdapter(new ArrayAdapter<String>(mContext,
            android.R.layout.simple_list_item_1, new String[] { "A2", "B2",
                    "C2", "D2" }));
    listview3.setAdapter(new ArrayAdapter<String>(mContext,
            android.R.layout.simple_list_item_1, new String[] { "A3", "B3",
                    "C3", "D3" }));

}
 } 
```

客户页面适配器：

```
public class CustomerPagerAdapter extends PagerAdapter {

private Context mContext;
private Vector<View> pages;

public CustomerPagerAdapter(Context context, Vector<View> pages) {
    this.mContext = context;
    this.pages = pages;
}

@Override
public Object instantiateItem(ViewGroup container, int position) {
    View page = pages.get(position);
    container.addView(page);
    return page;
}

@Override
public int getCount() {
    return pages.size();
}

@Override
public boolean isViewFromObject(View view, Object object) {
    return view.equals(object);
}

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    container.removeView((View) object);
}

 } 
```

活动主：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

**如何使用此代码在 XML 中设置 ListView？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:56:42.800

我决定坚持使用 Flipper，直到找到完美运行的 Circular ViewPager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:39:45.533

你有没有想过为此使用 Intent ？就像你从另一个活动中调用一个活动一样。

# ruby-on-rails - PostgreSQL 是否支持 Rails 的精度和规模？

> ID：14271158
> 
> 赞同：8
> 
> 时间：2013-01-11T03:23:48.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我有一个 Rails 应用程序，它定义了一个包含精度为 8 和小数位数为 2 的小数的迁移。我设置的数据库是 PostgreSQL 9.1 数据库。

```
class CreateMyModels < ActiveRecord::Migration
    def change
        create_table :my_models do |t|
            t.decimal :multiplier, precison: 8, scale: 2
            t.timestamps
        end
    end
end 
```

当我运行`rake db:migrate`时，迁移成功发生，但是当我尝试运行`MyModel.find_or_create_by_multiplier`. 如果我运行以下命令两次，对象将被创建两次：

```
MyModel.find_or_create_by_multiplier(multiplier: 0.07) 
```

我假设这应该在第一次调用期间创建对象，然后在第二次调用期间**找到**对象。不幸的是，当乘数设置为 0.07 时，这似乎并没有发生。

对于我在上述命令中抛出的所有其他数字，这**确实可以按预期工作。**以下命令按预期工作（在第一次调用期间创建对象，然后在第二次调用期间找到对象）。

```
MyModel.find_or_create_by_multiplier(multiplier: 1.0)

MyModel.find_or_create_by_multiplier(multiplier: 0.05)

MyModel.find_or_create_by_multiplier(multiplier: 0.071) 
```

当我查看 MyModel 表的 PostgreSQL 数据库描述时，我注意到该表对数值列没有限制。

```
 Column    |            Type             |                         Modifiers
-------------+-----------------------------+-------------------------------------------------------
 id          | integer                     | not null default nextval('my_models_id_seq'::regclass)
 multiplier  | numeric                     | 
 created_at  | timestamp without time zone | not null
 updated_at  | timestamp without time zone | not null 
```

我的 db/schema.rb 文件也没有说明精度和比例：

```
ActiveRecord::Schema.define(:version => 20121206202800) do

...
    create_table "my_models", :force => true do |t|
        t.decimal  "multiplier"
        t.datetime "created_at",                   :null => false
        t.datetime "updated_at",                   :null => false
    end
... 
```

所以我的第一个问题是，为什么我在迁移时没有看到将精度和规模推低到 PostgreSQL？[文档说明它应该被支持](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column)。

我的第二个问题是，为什么 0.07 不能正确比较使用`MyModel.find_or_create_by_multiplier(multiplier: 0.07)`命令？（如果我需要为此提出另一个问题，我会的）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T03:57:05.077

这很尴尬……

我有精确的拼写错误。

将迁移更改为：

```
t.decimal :multiplier, precision: 8, scale: 2 
```

修复了一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T03:51:03.967

PostgreSQL 9.1 将允许您以任何这些方式声明列。

```
column_name decimal
column_name numeric
column_name decimal(8, 2)
column_name numeric(8, 2) 
```

如果您使用 pgAdminIII 查看该列，它将向您显示它是如何创建的。如果您（或 Rails）将该列创建为`numeric`，它将显示“数字”。如果您（或 Rails）将该列创建为`decimal(8, 2)`，它将显示“decimal(8, 2)”。

所以在我看来，Rails 并没有将精度和规模传递给 PostgreSQL。相反，它只是告诉 PostgreSQL 创建类型为“numeric”的列。[Rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column)建议它*不*应该这样做。

该链接中的示例语法与您的不同。

```
td.column(:bill_gates_money, :decimal, :precision => 15, :scale => 2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-19T04:00:13.813

我一开始是用`:numeric`的。`:decimal`尽管 ActiveRecord为我将其更改为，但两者`:precision`都`:scale`被忽略了。

```
# 202001010000000_add_my_col_to_my_table.rb
add_column :my_table, :my_col :numeric, percision: 3, scale: 2, comment: 'Foobar'

# schema.rb
t.decimal "my_col", comment: 'Foobar' 
```

只需更改为`:decimal`在迁移文件中为我修复它：

```
# 202001010000000_add_my_col_to_my_table.rb
add_column :my_table, :my_col :decimal, percision: 3, scale: 2, comment: 'Foobar'

# schema.rb
t.decimal "my_col", precision: 3, scale: 2, comment: 'Foobar' 
```

# hash - 如果我对字符串使用复合散列策略，我实际上可以消除冲突吗？

> ID：14271161
> 
> 赞同：0
> 
> 时间：2013-01-11T03:24:29.320
> 
> 标签：hash

好的，这是用例。我有很多有点长（200-500 个字符）的字符串，我希望有一个较小的确定性哈希值。由于我可以将完整的 160 位 SHA1 值存储在 20 个字节中，因此每个字符串的空间改进了一个数量级。

但当然，即使使用具有良好雪崩效应的加密哈希，也必须担心字符串上的哈希冲突。我知道机会很小，但我想更保守一些。如果我做这样的事情：

**哈希（输入）= CONCAT（HF1（输入），HF2（输入））**

其中`HF1`是一些合适的鲁棒散列 f() 并且`HF2`是另一个不同但鲁棒的散列 f()。这是否有效地使发生冲突的机会几乎不可能（现在以 40 个字节而不是 20 个字节为代价）？注意：我不关心 SHA-1 对我的用例的安全/加密影响。

澄清：最初的问题是关于对连接的哈希值进行哈希处理，而不是连接哈希，它不会改变外部哈希函数的哈希冲突概率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:29:52.683

假设“合理”的散列函数，然后通过连接，你所做的就是创建一个具有更大输出空间的散列函数。所以是的，这降低了碰撞的可能性。

但无论哪种方式，这可能都不值得担心。2^320 类似于宇宙中粒子的数量。因此，您只需要担心是否会遇到攻击者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:49:26.900

我一开始问错了问题。这可能是我一直在寻找的问题：

[SHA1 冲突的概率](https://stackoverflow.com/questions/1867191/probability-of-sha1-collisions)

这也很有启发性

[了解 sha-1 碰撞弱点](https://stackoverflow.com/questions/1147830/understanding-sha-1-collision-weakness)

我想问我是否有两个连接大小小于 20 字节的散列函数说 2 个不同的 32 位散列函数是公平的。如果连接这些产生的概率小到足以在实践中忽略，因为连接的 2 个（甚至 3 个）将小于 SHA-1。

# c# - dhtmlxtoolbar 选项列表，如何根据文本获取特定 ID？

> ID：14271162
> 
> 赞同：0
> 
> 时间：2013-01-11T03:24:31.323
> 
> 标签：c#, javascript, asp.net-mvc-3, dhtmlx

是否可以在 dhtmlx 中对选项列表进行反向查找，即如果我知道 ItemText，我可以使用它来查找 Id 吗？

即如果存在这样的功能，则类似这样

```
var t = this.getAllListOptionText("tbOptionList").indexOf(Name); 
```

我想获取 id，以便可以将选择预设为特定选项。

我可能会遍历所有选项并自己查找 ItemText，但是如果已经存在某些东西会更优雅。

```
for (var i = 0; i < lsTags.length; i++) {
    if (this.getListOptionText("tbOptionList", lsTags[i]) == Name) {
        lOptionID = lsTags[i];
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T10:40:37.473

有 dhtmlx 方法 forEachItem 和 forEachListOption，您可以迭代项目并使用 getItemText 进行检查。

# node.js - 通过 createWriteStream 将 base 64 字符串保存到文件

> ID：14271163
> 
> 赞同：0
> 
> 时间：2013-01-11T03:24:34.417
> 
> 标签：node.js

我有一张图片通过电子邮件（通过云服务提供商 Mandrill）进入我的 Node.js 应用程序。图像以 base64 编码字符串的形式出现，在下面的示例中为 email.content。我目前正在将图像写入缓冲区，然后是这样的文件：

```
//create buffer and write to file
var dataBuffer = new Buffer(email.content, 'base64');                        
var writeStream = fs.createWriteStream(tmpFileName);

writeStream.once('open', function(fd) {
    console.log('Our steam is open, lets write to it');
    writeStream.write(dataBuffer);
    writeStream.end();
}); //writeSteam.once('open')

writeStream.on('close', function() {
    fileStats = fs.statSync(tmpFileName); 
```

这工作得很好，一切都很好，但是我本质上是否将这部分代码的内存需求增加了一倍，因为我的图像在内存中（作为原始字符串），然后在写入之前创建相同字符串的缓冲区文件？我将要处理大量入站图像，因此我的内存需求加倍是一个问题。

我尝试了几种将 email.content 直接写入流的方法，但它总是产生一个无效的文件。我是一个现代编码的业余爱好者，所以欢迎你告诉我这种担忧是完全没有根据的，只要你告诉我为什么大理石头上会出现一些曙光。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:35:31.920

由于您已经在内存中拥有整个文件，因此创建写入流没有意义。只需使用`fs.writeFile`

```
fs.writeFile(tmpFileName, email.content, 'base64', callback) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:57:55.497

@Jonathan 的答案是缩短您已有代码的更好方法，所以一定要这样做。

不过，我将扩展您有关记忆的问题。事实是 Node 不会在不将文件转换为`Buffer`第一个文件的情况下将任何内容写入文件，因此当您告诉我们关于的内容时`email.content`，您无能为力。

但是，如果您真的对此感到担心，那么您将需要某种方法来处理`email.content`从您获取它的任何地方传入的值，作为一个流。然后，当数据流式传输到服务器时，您会立即将其写入文件，因此不会占用比需要更多的 RAM。

如果您详细说明，我可以尝试填写更多信息。

# java - 如何在 Eclipse 中创建 liferay-portal-src-6.1.1-ce-ga2

> ID：14271168
> 
> 赞同：0
> 
> 时间：2013-01-11T03:25:13.657
> 
> 标签：java, jsf-2, liferay-6

这听起来可能有点傻，但我想**为 liferay-portal-src-6.1.1-ce-ga2 创建一个 Eclipse 项目**。但我不知道在 Eclipse 下我应该选择什么类型的项目。我实际上想在“portal-service”（路径 - C:/liferay-portal-src-6.1.1-ce-ga2/portal-service/）文件夹下的 ThemeDisplay.java 中进行一些更改并重新创建门户服务 jar。我应该如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:22:32.013

首先，您可以在 Eclipse 中简单地导入 liferay-portal-src-6.1.1-ce-ga2，因为它有 .project 文件。

其次，要更改 ThemeDisplay.java 最好使用 ext-plugin，因为它允许覆盖 Liferay 核心类。[你可以在这里](http://www.liferay.com/community/wiki/-/wiki/Main/Ext+Plugin)阅读更多关于它的信息

# java - Android将图像添加到偏好？

> ID：14271175
> 
> 赞同：1
> 
> 时间：2013-01-11T03:25:59.900
> 
> 标签：java, android, preference

如何将图标添加到首选项，首选项引用应用程序，以便我可以获取应用程序的图标。我可以从应用程序中获取可绘制的图标，如何将其添加到首选项中？

```
 Preference preference = new Preference(this);
        preference.setTitle(app.activityInfo.loadLabel(pm)); 
```

* * *

编辑：

我用过这个，但它说它至少需要 api lvl 11，但我希望有人能提供更好的解决方案：

```
 if(sdk > android.os.Build.VERSION_CODES.HONEYCOMB) {
            preference.setIcon(app.loadIcon(pm));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:33:44.613

我正在这样做，它只适用于 android post honeycomb，我希望有一个更兼容的选项：

```
 if(sdk > android.os.Build.VERSION_CODES.HONEYCOMB) {
            preference.setIcon(app.loadIcon(pm));
            } 
```

# php - PHP mysql获取2个日期之间的减法

> ID：14271177
> 
> 赞同：0
> 
> 时间：2013-01-11T03:26:04.563
> 
> 标签：php, mysql

我有这样的表结构：

```
Id    Name      Rank      Date
-----------------------------------
1     test      1000      2012-1-11

2     test      7000      2012-1-10

3     test2     2000      2012-1-11

4     test2     200       2012-1-10

5     test3     4000      2012-1-10

6     test4     6500      2012-1-11 
```

考虑今天的日期是 2012-1-11 昨天的日期是 2012-1-10

在单个查询中，我得到了今天和昨天日期的每个用户名之间的差异。即测试昨天有7000个排名，今天有1000个。所以结果是 6000 同样 test2 有 -1800。

我需要输出为：

```
Name     Difference (Orderby the difference Desc)
--------------------
test      6000
test2     -1800 
```

如果今天或昨天的记录不可用，则我们不会将此记录用于计算。

这在 PHP MySQL 中可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:37:53.840

这个怎么样？（虽然不是很清楚你想要达到什么目的..）请评论。

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/e2676/13)

代码：

```
select b.id, b.name, (b.rank-a.rank) diff
from t1 a
left join t1 b
on b.date < a.date
and b.name = a.name
having not diff is null
; 
```

结果：

```
ID  NAME    DIFF
2   test    6000
4   test2   -1800 
```

根据 OP 的评论进行编辑：

请注意，我在您的示例表中添加了额外的几条记录以触发条件。

*   [SQLFIDDLE 演示2](http://sqlfiddle.com/#!2/0f4e8/1)

代码2：

```
select b.id, b.name,b.rank AS New,
b.Date new_date,
a.Rank as Old, a.date as old_date, 
(b.rank-a.rank) diff
from t1 a
left join t1 b
on b.name = a.name
where b.date > a.date and b.date <= Now()
and datediff(b.date, a.date) = 1
having not diff is null and diff <> 0
order by diff desc
; 
```

结果：

```
ID  NAME    NEW     NEW_DATE            OLD     OLD_DATE            DIFF
3   test    8000    January, 12 2012    1000    January, 11 2012    7000
4   test2   2000    January, 11 2012    200     January, 10 2012    1800
1   test    1000    January, 11 2012    7000    January, 10 2012    -6000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:32:54.690

从字面上看，您需要的一切都在此页面上

[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# google-apps-script - 如何在 Gapps 中为客户端处理程序合并逻辑？

> ID：14271182
> 
> 赞同：2
> 
> 时间：2013-01-11T03:26:26.080
> 
> 标签：google-apps-script

我写了一个服务器端 Gapps 系统，但是 UI 响应很糟糕。现在（不成功）尝试将基本 UI 处理切换到客户端处理程序。

我在以下位置发现了客户端处理程序的对象模型 (?) 文档： [https ://developers.google.com/apps-script/class_clienthandler](https://developers.google.com/apps-script/class_clienthandler)

第一个问题似乎是 Google Script 定义事件处理程序的能力有限。我找不到在客户端事件处理程序中加入“if”逻辑的方法。

第二个问题是（明显的）无法提供客户端（java）全局变量。除了作为标签或文本框中的文本之外，还有其他方法可以存储客户端数据吗？

我必须在这里遗漏一些基本概念，因为我找不到在我的 Gapps 交付的页面源中提供真正的客户端 Java 模块的方法。任何建议将不胜感激。此应用程序的 UI 相当复杂。

PS - 应用程序需要服务器端处理多个 UI 触发器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:08:11.207

客户端处理程序旨在执行琐碎的任务，例如通知用户一些进展，而所有艰苦的工作都在服务器处理程序中完成。请发布您尝试的一些代码，以便提供更好的建议。

关于您的第二个问题，我更喜欢使用 CacheService 跨处理程序存储变量。对于对象，我将它们转换为 JSON 并使用 CacheService 存储它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:13:36.943

我认为客户端处理程序可能会令人困惑，但它们是有道理的。也许将处理程序视为已经为您执行逻辑。客户端处理程序将为您完成工作，而不是编写 if-then 逻辑。例如，如果您想验证用户是否输入了数字，并且如果输入仅为数字，则用户可以提交数据，那么有一个客户端处理程序。例如，如果条目是数字，您所要做的就是激活一个按钮。

正如您在文档中看到的那样，有许多处理程序可以处理可能使用了 if-then 语句的许多情况。

在接下来的几天里，我将学习如何处理数据存储，但是有几种方法可以存储数据，例如脚本和用户属性、scriptDB、电子表格或使用 JDBC。这是参考上述存储选项的文档（除了Srik提到的缓存服务）因此，我无法提供任何专业知识。尝试此链接以获取有关数据存储的文档：

[https://developers.google.com/apps-script/script_user_properties](https://developers.google.com/apps-script/script_user_properties)

很抱歉这个含糊的答案，但我希望这至少能给你一个关于创建客户端处理程序所需的方向的提示。

# javascript - 如何创建具有一个参数的方法或函数，该参数可以接受对象或变量

> ID：14271183
> 
> 赞同：0
> 
> 时间：2013-01-11T03:26:28.997
> 
> 标签：javascript, variables, object, parameters, arguments

我想知道如何去做这件事。不确定术语是什么，所以我为此道歉。`.css()`当您使用该方法时，我在 jQuery 中看到了这种行为。您可能已经知道，此方法接受几个选项：

您可以执行以下操作：

```
$("#box").css("background-color", "red");//sets the bg color to red
$("#box").css("background-color");//returns the bg color of #box
var properties = {"background-color" : "red", "width" : 100};
$("#box").css(properties); //sets multiple properties in one call with literal object. 
```

所以，我不太担心这个功能的吸气剂部分。我最感兴趣的是它区分变量和文字对象的能力。我想根据它收到的参数创建一个具有相同行为的插件。一个简单的例子是这样的：

```
function openWindow(URL_OR_OBJECT){
    if(variable){
    window.open(URL_OR_OBJECT);
   return; 
  }
   var opt = URL_OR_OBJECT;
   window.open(opt.url, opt.title, opt.options, opt.replace);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:32:08.627

您可以检查参数的类型[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)

```
function openWindow(parameter){
    if(typeof parameter == "string"){
        window.open(parameter);
    }
    else if(typeof parameter == "object"){
        window.open(parameter.url, parameter.title, parameter.options, parameter.replace);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:33:21.810

您可以使用`typeof`来查看参数是否为字符串。

```
if ( typeof URL_OR_OBJECT === "string" ) {
  window.open(URL_OR_OBJECT);
} else { /*...*/ } 
```

您可以谨慎使用它，因为`typeof new String("hello")`is `"object"`。但我认为没有太多人以这种方式声明字符串。

MDN 上的 typeof 文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T03:34:15.460

虽然我没有特别查看源代码，但我认为它的结构类似于以下内容：

```
function css(bgcolor_or_obj, width, etc) {
    var bgcolor;
    if(typeof bgcolor_or_obj === 'object') {
        // Expand configuration object here.
        bgcolor = bgcolor_or_obj.bgcolor;
        width = bgcolor_or_obj.width;
        etc = bgcolor_or_obj.etc;
    } else {
        bgcolor = bgcolor_or_obj;
    }

    /* ... */
} 
```

我知道 Javascript 中没有标准化的方法来区分传递给函数的参数是变量还是文字。如上所示，所讨论的函数更有可能检查第一个参数是否为对象。

# clojure - clojure 宏变量与地图的问题

> ID：14271184
> 
> 赞同：2
> 
> 时间：2013-01-11T03:26:32.270
> 
> 标签：clojure

我无法让 clojure defmacro 做我想做的事。我已将我的实际代码缩减为以下代码段。

这创造了一些*接近*我想要的东西。我试图根据传递给宏的参数有条件地插入（第一个 p#）或（第二个 p#）。

```
(defmacro mmz1 [t]
  `(map (fn [p#] (let [t1# (first p#)
                      t2# ~(if t `(first p#) `(second p#))]
                  (* t1# t2#)))
        [ [1 2] [3 4] ]))

(macroexpand-1 '(mmz1 false)) 
```

节目

```
(map
  (fn [p__18341__auto__]
    (let [t1__18342__auto__ (first p__18341__auto__)
          t2__18343__auto__ (second p__18340__auto__)]
      (* t1__18342__auto__ t2__18343__auto__)))
  [[1 2] [3 4]]) 
```

但是，请注意，这种形式的变量（第二个*p_18340* _auto_ ）与*匿名*函数参数p_18341_auto_*不匹配*。因此，执行代码会导致错误，因为未定义第二个 var。我怎样才能让这些变量匹配？这就是我想要完成的。

 *出于测试目的，此代码*完成*了我想要的，但我*不*希望在结果宏代码中设置 t2# 的 (if) 形式。宏应该允许我这样做——不是吗？

```
(defmacro mmz0 [t]
  `(map (fn [p#] (let [t1# (first p#)
                      t2# (if ~t (first p#) (second p#))]
                  (* t1# t2#)))
        [ [1 2] [3 4] ]))

(macroexpand-1 '(mmz0 false)) 
```

节目

```
(map
  (fn [p__18387__auto__]
    (let [t1__18388__auto__ (first p__18387__auto__)
          t2__18389__auto__ (if false
                              (first p__18387__auto__)
                              (second p__18387__auto__))]
      (* t1__18388__auto__ t2__18389__auto__)))
  [[1 2] [3 4]]) 
```

并且代码的输出是预期的：

```
(mmz0 false) -> (2 12) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:45:05.780

解决方案之一

```
(defmacro mmz1 [t]
  `(map (fn [p#] (let [t1# (first p#)
                       t2# (~(if t 'first 'second) p#)]
                   (* t1# t2#)))
        [ [1 2] [3 4] ])) 
```

**更新**。更通用的解决方案

```
(defmacro mmz1 [t]
  (let [trg-fn (if t 
                 `(fn [p#] (first p#)) 
                 `(fn [p#] (second p#)))]
    `(map (fn [p#] (let [t1# (first p#)
                         t2# (~trg-fn p#)]
                   (* t1# t2#)))
        [ [1 2] [3 4] ]))) 
```

您可以用更复杂的功能替换分支`(fn [p#]...)`。`if`

**更新2。**使用预定义函数形式参数的更简单的解决方案`p`

```
(defmacro mmz1 [t]
  (let [p `p#]
   `(map (fn [~p] (let [t1# (first ~p)
                        t2# ~(if t `(first ~p) `(second ~p))]
                    (* t1# t2#)))
         [ [1 2] [3 4] ]))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:28:01.323

必须指出，这根本不需要是宏。

等效函数更具可读性和可组合性，因此我建议您使用它。*

# java - Ping 服务器和 Ping 客户端 (UDP)

> ID：14271185
> 
> 赞同：-1
> 
> 时间：2013-01-11T03:26:32.343
> 
> 标签：java, udp, ping

我正在研究使用 UDP 的 ping 服务器和 ping 客户端，我在网上找到了 java 代码。[http://www.daimi.au.dk/~carl/Uge6/PingClient.java](http://www.daimi.au.dk/~carl/Uge6/PingClient.java) 我使用 eclipse 运行它，它需要 3 个参数。这些论点是什么，它们应该放在哪里？我认为端口号和 IP 地址是参数，但每当我尝试将它们放入`args[0], args[1]`时，代码仍然没有运行。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:41:41.233

没错，您必须使用地址和端口（如源代码注释中所述）。有 2 个论点，而不是 3 个。

“代码仍然没有运行”=>会发生什么？错误，异常？没有什么 ？您如何测试客户端和服务器程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:38:46.663

据我所知，它需要 2 个参数。地址和端口。我这样运行

```
java PingClient [ADDRESS] [PORT] 
```

它有效。

也许我误解了你的问题。究竟是什么错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T14:23:10.333

命令行参数是你可以通过命令行传递给你的java类的参数。在这种情况下，例如你应该在你的cmd中写“java PingClint www.google.com 80”

# ruby-on-rails - 定义变量时简化 Ruby 控制流

> ID：14271186
> 
> 赞同：3
> 
> 时间：2013-01-11T03:26:34.413
> 
> 标签：ruby-on-rails, ruby, variables, control-flow

我在 Rails 应用程序的页面上定义了三个变量：

```
 if current_user
    if Vote.where(:user_id => current_user.id, :post_id => post.id, :direction => 0).count > 0
      active = ' upactive'
    elsif Vote.where(:user_id => current_user.id, :post_id => post.id, :direction => 1).count > 0
      active = ' downactive'
    end
  end

  unless Vote.group(:post_id).where(:post_id => @posts.map(&:id), :direction => 0).count[post.id] == nil
    upvotes = Vote.group(:post_id).where(:post_id => @posts.map(&:id), :direction => 0).count[post.id]
  else
    upvotes = 0
  end

  unless Vote.group(:post_id).where(:post_id => @posts.map(&:id), :direction => 1).count[post.id] == nil
    downvotes = Vote.group(:post_id).where(:post_id => @posts.map(&:id), :direction => 1).count[post.id]
  else
    downvotes = 0
  end 
```

我注意到 if 和 unless 语句中有很多重复的代码。如何编写三个与上述变量声明相等的变量声明，确保变量始终`0`不是`nil`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:44:05.863

您可以在此处使用条件赋值运算符来帮助减少代码。例如：

```
if current_user
  if Vote.where(:user_id => current_user.id, :post_id => post.id, :direction => 0).count > 0
    active = ' upactive'
  elsif Vote.where(:user_id => current_user.id, :post_id => post.id, :direction => 1).count > 0
    active = ' downactive'
  end
end

upvotes = Vote.group(:post_id).where(:post_id => @posts.map(&:id), :direction => 0).count[post.id] || 0
downvotes = Vote.group(:post_id).where(:post_id => @posts.map(&:id), :direction => 1).count[post.id] || 0 
```

条件赋值运算符本质上说，如果第一部分的计算结果为 nil，则使用右侧作为默认值。

# ios - 访问 Twitter 帐户

> ID：14271189
> 
> 赞同：0
> 
> 时间：2013-01-11T03:27:11.410
> 
> 标签：ios, twitter

我正在使用以下代码在 iOS 6 中使用 SLRequest 和 ACAccounts 发布到 Twitter。问题是当有多个帐户时，我无法控制授予哪个帐户访问权限。让用户选择他们想要发布的帐户的建议？

```
-(void)twitteraccess {
    ACAccountStore *account = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:
                                  ACAccountTypeIdentifierTwitter];

    [account requestAccessToAccountsWithType:accountType options:nil
                                  completion:^(BOOL granted, NSError *error)
     {
         if (granted == YES)
         {
             NSArray *arrayOfAccounts = [account
                                         accountsWithAccountType:accountType];

             if ([arrayOfAccounts count] > 0)
             {
                 ACAccount *twitterAccount = [arrayOfAccounts lastObject];

                 NSDictionary *message = @{@"status": @"Message"};

                 NSURL *requestURL = [NSURL
                                      URLWithString:@"http://api.twitter.com/1/statuses/update.json"];

                 SLRequest *postRequest = [SLRequest
                                           requestForServiceType:SLServiceTypeTwitter
                                           requestMethod:SLRequestMethodPOST
                                           URL:requestURL parameters:message];

                 postRequest.account = twitterAccount;

                 [postRequest performRequestWithHandler:^(NSData *responseData,
                                                          NSHTTPURLResponse *urlResponse, NSError *error)
                  {
                      NSLog(@"Twitter HTTP response: %i", [urlResponse
                                                           statusCode]);
                  }];
             }
         }
         else {
             if(error.code == 6){
                 [self performSelectorOnMainThread:@selector(alertmessagetwitter)
                                        withObject:nil
                                     waitUntilDone:YES];                }
         }
     }];
} 
```

# sql - 在 SQL Server 中使用 FileStream 会增加数据库大小吗？

> ID：14271191
> 
> 赞同：1
> 
> 时间：2013-01-11T03:27:20.800
> 
> 标签：sql, sql-server, sql-server-2008, filestream

我正在使用 AppHarbor 托管我的网站，目前它仅提供 20MB 的可用空间。我想使用 SQL Server 的 FileStream 列存储 PDF 文件。使用 FileStream 会增加数据库大小，因为据我所知，FileStream 基本上存储在硬盘上。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:14:08.170

因为`FILESTREAM`数据成为数据库的一部分，从某种意义上说它有自己的`FILEGROUP`（s）并且可以（应该）通过 SQL 备份进行备份——我会回答是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T17:09:34.840

不，它不会增加数据库的大小，因为文件没有存储在数据库中。请阅读以下“FILESTREAM 设计和实现注意事项”——google 是你最好的朋友

# php - Selenium 2 和 Firefox 配置文件未应用

> ID：14271201
> 
> 赞同：1
> 
> 时间：2013-01-11T03:29:10.717
> 
> 标签：php, selenium, selenium-webdriver

所以我被卡住了，我正在通过需要 HTTP 身份验证的代理运行我的脚本，但是我无法使用 @:.. 进行身份验证。所以我决定创建一个配置文件，其中为 FireFox 添加了身份验证插件并使其自动输入。

我制作了 zip base64 文件，当我在 OSX 上运行时，我使用了以下命令，

`zip -r profile 3rkomsuo.selenium`

`openssl base64 -in "profile.zip" -out "profile.zip.b64"`

该文件是 24MBs tho（编辑，禁用萤火虫，现在它只有大约 4MB，仍然没有运气）？我只添加了 2 个插件，firebug 和 Auth 插件，太小了！现在我已将文件放入我的 web 目录中，我正在运行 MAMP，并按照描述发送配置文件。

```
$session = $web_driver->session('firefox', array("firefox_profile" => file_get_contents("profile.zip.b64"))); 
```

我检查了 POST，发送了一个正确的数组，我已经将 php.ini 中的 PHP POST 大小增加到 64MB，以防万一，但是没有任何作用，仍然加载基本（没有设置）配置文件？如果有人可以帮助您，我将成为我的英雄，因为我已经花了几个小时调试它，但没有任何运气！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:15:05.000

设法设置配置文件，确保将 prefs.js 重命名为 user.js 并压缩配置文件的文件夹内容，而不是配置文件文件夹本身！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T07:56:13.803

如果在您的情况下制作配置文件不起作用，那么您可以使用**Autoit**处理身份验证对话框。

```
Write a few line script in autoit.
Compile it to convert it in exe.
Call that exe before the line which causes the authentication dialog to appear. 
```

# php - 如何在 PHP 中检查发布 Facebook 状态时的隐私设置是否为“公共”？

> ID：14271202
> 
> 赞同：2
> 
> 时间：2013-01-11T03:29:10.880
> 
> 标签：php, facebook, facebook-graph-api, sdk

我一直在寻找有关此的任何地方，似乎无法改善我的运气。在我的 fb 应用程序中，我发布的 FB 状态会反映在我的博客站点中。我已经链接了它，我只是想通过检查它是否设置为“公共”来添加功能，然后它应该反映在博客站点中。我正在使用 PHP SDK。希望你能帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:11:20.013

这是 Facebook 帖子字段列表的链接：[https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

这里有一个描述隐私参数的链接：[https ://developers.facebook.com/docs/reference/api/privacy-parameter/](https://developers.facebook.com/docs/reference/api/privacy-parameter/)

所有隐私信息都位于“隐私”字段中，这是一个 JSON 对象。

# perl - Perl 填补丢失的值

> ID：14271206
> 
> 赞同：1
> 
> 时间：2013-01-11T03:29:48.113
> 
> 标签：perl, if-statement, for-loop, numbers

让我们看看这段代码

```
1
5
9 
```

我想要一个 perl 来检查序列号 1 到 9。如果该数字存在，它将打印该数字，否则它将打印“不存在的数字”。它是 for 循环中的一种 if else。输出将是

```
1
2
3
4
5
6
7
8
9 
```

这是我的临时代码

```
#! /usr/bin/perl -w
use strict;
while (<>){
  my ($ID) = split;
  for ($index=1; $index<=9; $index++)
  {
    if ($index == $ID)
    {
      print $ID;
      printf("\n");
    }
    elsif ($index != $ID)
    {
      print $index;
    }
    else
    {
      printf ("\n");
    }
  }
} 
```

但我的输出是

```
1
234567891234
56789123456789 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:05:29.923

你得到这些结果是因为你有内部 for 循环。内部循环从输入中的每一行开始执行。我稍微修改了代码：

```
use strict;
use warnings;

my $index = 1;
while ($index < 10) {
  my $ID = <DATA>;
  $ID = 10 if not defined $ID;
  chomp $ID;
  if ($ID > $index) {
    while ($index < $ID) {
      printf ("Not Found: %d\n", $index++); 
    }   
  }
  if ($index == $ID)
  {
    print "$ID\n" if $ID < 10;
  }
  $index++;
}

__DATA__
1
5
6 
```

您的原始代码读取一行：

```
while (<>){
  my ($ID) = split; 
```

然后开始循环：

```
 for ($index=1; $index<=9; $index++)
  { 
```

并认为您丢失的数字不超过 的新值`$ID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:24:36.323

You need two loops. First go through your input file and mark the found numbers in some array. Then go through your marks and print them

```
# mark the numbers
my @found = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
while (<>) {
    my ($ID) = split;
    $found[$ID] = 1;
}

# print the numbers
for (my $index=1; $index<=9; $index++)
{
    if ($found[$index])
    {
        print "$index\n";
    }
    else
    {
        print "$index does not exist\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:45:37.037

在您的代码中，当您匹配 $ID 时，您会打印回车，否则，您将打印出数字。我不确定，但 printf 可能会在打印之前输出回车。我只会使用打印和双引号来解释变量。

您的脚本的主要问题是您检查 ID 是否匹配的逻辑。如果匹配索引，则打印 $ID，如果不匹配索引，则打印 $index，但是在这两个条件下，我看不出如何到达 if 语句的 else 部分，除非 $ID 不等于 $index 和等于 $index （这不太可能发生）。我会将 if 更改为以下内容：

```
 if ( $ID == $index ) {
    print "$ID\n";
  }
  else { 
    print "$index does not exist\n";
  } 
```

如果您的问题是关于为什么要获得该特定输出，那么：

脚本的输出将是 1 后跟回车，然后将在下一行打印 2 到 9（一起因为 elsif 中的 ($ID != $index) 条件中没有回车输出）读入的第一行（输入为 1）。读入第二行时，脚本一起打印出 1 到 4（elsif 中没有回车），并且似乎打印出回车（我怀疑输入的是 4 而不是 5），然后是 5 到 9。然后当读入最后一行时，脚本会一起打印出 1 到 8（如前所述），然后是 9，然后是回车。

如果你纠正你的逻辑，它应该会给你你想要的结果。

这是我使用您的脚本作为起点的想法：

```
use strict;
my $ID;
my $index;
while (<>){
  my ($ID) = split;
  for ($index=1; $index<=9; $index++)
  {
    if ($index == $ID)
    {
      print "$ID\n";
    }
    else
    {
      print "$index does not exist\n";;
    }
  }
  print "\n";
} 
```

我得到以下输出：

```
1
2不存在
3 不存在
4 不存在
5 不存在
6 不存在
7 不存在
8 不存在
9 不存在

1 不存在
2不存在
3 不存在
4 不存在
5
6 不存在
7 不存在
8 不存在
9 不存在

1 不存在
2不存在
3 不存在
4 不存在
5 不存在
6 不存在
7 不存在
8 不存在
9

```

根据您对输出的期望信息，我希望这会有所帮助：

```
use strict;
my $ID;
# Initialized the index to be 1
my $index = 1;
while (<>){
  my ($ID) = split;

  while (( $ID != $index ) && 
     ( $ID < 10)) 
  {
    print "$index does not exist\n";
$index++;
  }
  print "$ID\n";
  $index++;
}

__DATA__
1
5
6 
```

我得到的输出是：

```
1
2不存在
3 不存在
4 不存在
5
6 不存在
7 不存在
8 不存在
9

```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T03:13:18.783

这是一种更简洁的方法：

```
while (<>) {
  print "$i\n" while ++$i < $_;
  print;
} 
```

我假设您不需要验证输入是否真的是一个递增的整数序列。如果这可能不是真的，那么您还需要决定要做什么 -`die`或者消除重复项，或者打印警告，等等。

# java - 具有数组返回类型的 Java ImageWorker 发布/处理方法

> ID：14271210
> 
> 赞同：3
> 
> 时间：2013-01-11T03:30:08.913
> 
> 标签：java, arrays, swing, process, swingworker

我正在尝试改进我的 SwingWorker 类 ImageWorker。ImageWorker 旨在用于大型图像数组。定期调用 ImageWorker 以加载新图像，同时将看到的图像的数组索引设置为 null。这就是为什么它只加载到 i < currentPosition+40 以防止它尝试一次性加载整个阵列，这对于较慢的机器来说太多了。目前它需要加载所有 40 张图像，然后才能在 EDT 上运行 done() 方法。在我没有时间提前启动 ImageWorker 的地方，这会导致几毫秒的延迟。

我想实现发布/处理，但我似乎找不到将这些方法与数组一起使用的示例。**是否有使用具有数组返回类型的发布/处理的已知良好做法？**或者我应该尝试将单个图像发布为 imageArray[i]，然后使用过程将这些图像合并到适当的数组中？我似乎找不到任何将数组用于这些方法的代码，只有字符串和整数。

感谢垃圾神帮助我首先开始使用 ImageWorker。我[最初的问题](https://stackoverflow.com/q/14176225/230513)已经发展到足以证明它可能需要这个新线程。原始线程包含使用 ImageWorker 的代码的 SSCCE，可以在此处找到：[完整代码](https://stackoverflow.com/questions/14176225/java-slideshow-image-delay-using-paintcomponent)。

```
private class ImageWorker extends SwingWorker<Image[], Image>
{
    private int currentPosition;
    private int arraySize;
    private String trickName;
    private Image[] imageArray;

    public ImageWorker(int arraySize, int currentPosition, String trick)
    {
        super();
        this.currentPosition = currentPosition;
        this.arraySize = arraySize;
        this.trickName = trick;
    }

    @Override
    public Image[] doInBackground()
    {
        imageArray = new Image[arraySize];
        for(int i = currentPosition; i < currentPosition+40 && i < arraySize; i++)
        {
            try 
            {
                imageArray[i] = ImageIO.read(new File("images/" + trickName + (i+1) + ".jpg"));
            } 
            catch (IOException e) 
            {
                System.out.println(trickName);
                System.out.println(e.getMessage());
                System.exit(0);
            }
        }
        return imageArray;
    }

    @Override
    public void done()
    {
        try
        {
            if(trickName.equals("handCuffs"))
            {
                handCuffs = get();
            }
            else if(trickName.equals("cups"))
            {
                cups = get();
            }
        }
        catch(InterruptedException ignore){}
        catch(java.util.concurrent.ExecutionException e)
        {
            String why = null;
            Throwable cause = e.getCause();
            if(cause != null)
            {
                why = cause.getMessage();
            }
            else
            {
                why = e.getMessage();
            }
            System.err.println("Error retrieving file: " + why);
        }
    }
} 
```

看来我应该在 for 循环中的每个图像上使用发布，然后使用过程将它们作为元素放入数组中。过程部分似乎更困难。我编辑了上面的代码以包含一个处理方法，但它还不能正常工作。

```
private class ImageWorker extends SwingWorker<Image[], Image>
{
    private int currentPosition;
    private int arraySize;
    private String trickName;
    private Image[] imageArray;

    public ImageWorker(int arraySize, int currentPosition, String trick)
    {
        super();
        this.currentPosition = currentPosition;
        this.arraySize = arraySize;
        this.trickName = trick;
        i = currentPosition;
    }

    @Override
    public Image[] doInBackground()
    {
        imageArray = new Image[arraySize];
        for(int i = currentPosition; i < currentPosition+40 && i < arraySize; i++)
        {
            try 
            {
                imageArray[i] = ImageIO.read(new File("images/" + trickName + (i+1) + ".jpg"));
                publish(imageArray[i], i);
            } 
            catch (IOException e) 
            {
                System.out.println(trickName);
                System.out.println(e.getMessage());
                System.exit(0);
            }
        }
        return imageArray;
    }

    @Override
    public void process(List<Image> chunks, int i)
    {
        for(Image element: chunks)
        {
            if(trickName.equals("handCuffs"))
            {
                handCuffs[i] = element;
            }
            else if(trickName.equals("cups"))
            {
                cups[i] = element;
            }
        }
    }

    @Override
    public void done()
    {
        try
        {
            if(trickName.equals("handCuffs"))
            {
                handCuffs = get();
            }
            else if(trickName.equals("cups"))
            {
                cups = get();
            }
        }
        catch(InterruptedException ignore){}
        catch(java.util.concurrent.ExecutionException e)
        {
            String why = null;
            Throwable cause = e.getCause();
            if(cause != null)
            {
                why = cause.getMessage();
            }
            else
            {
                why = e.getMessage();
            }
            System.err.println("Error retrieving file: " + why);
        }
    }
} 
```

处理方法的问题是我不知道如何为发布的元素将被写入的数组设置正确的索引。我想发布以传递索引和图像，但这违反了类设置的返回类型。发布只能有一种**类型**的论据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:39:16.237

感谢垃圾神和 MadProgrammer 提供的所有帮助。如果其他人想要实现类似的 SwingWorker，这是我的最终代码，包括用于封装 arrayImage[i] 的包装类和相应的索引 int i。

```
private class ArrayWrapper
{
    private int i;
    private Image image;

    public ArrayWrapper(Image image, int i)
    {
        this.i = i;
        this.image = image;
    }

    public int getIndex()
    {
        return i;
    }

    public Image getImage()
    {
        return image;
    }
}

private class ImageWorker extends SwingWorker<Image[], ArrayWrapper>
{
    private int currentPosition;
    private int arraySize;
    private String trickName;
    private Image[] imageArray;

    public ImageWorker(int arraySize, int currentPosition, String trick)
    {
        super();
        this.currentPosition = currentPosition;
        this.arraySize = arraySize;
        this.trickName = trick;
    }

    @Override
    public Image[] doInBackground()
    {
        imageArray = new Image[arraySize];
        for(int i = currentPosition; i < currentPosition+40 && i < arraySize; i++)
        {
            try 
            {
                imageArray[i] = ImageIO.read(new File("images/" + trickName + (i+1) + ".jpg"));
                ArrayWrapper wrapArray = new ArrayWrapper(imageArray[i], i);
                publish(wrapArray);
            } 
            catch (IOException e) 
            {
                System.out.println(trickName);
                System.out.println(e.getMessage());
                System.exit(0);
            }
        }
        return imageArray;
    }

    @Override
    public void process(List<ArrayWrapper> chunks)
    {
        for(ArrayWrapper element: chunks)
        {
            if(trickName.equals("handCuffs"))
            {
                handCuffs[element.getIndex()] = element.getImage();
            }
            else if(trickName.equals("cups"))
            {
                cups[element.getIndex()] = element.getImage();
            }
        }
    }

    @Override
    public void done()
    {
        try
        {
            if(trickName.equals("handCuffs"))
            {
                handCuffs = get();
            }
            else if(trickName.equals("cups"))
            {
                cups = get();
            }
        }
        catch(InterruptedException ignore){}
        catch(java.util.concurrent.ExecutionException e)
        {
            String why = null;
            Throwable cause = e.getCause();
            if(cause != null)
            {
                why = cause.getMessage();
            }
            else
            {
                why = e.getMessage();
            }
            System.err.println("Error retrieving file: " + why);
        }
    }
} 
```

# rest - 播放框架 + GWT + Restful

> ID：14271214
> 
> 赞同：0
> 
> 时间：2013-01-11T03:31:08.487
> 
> 标签：rest, gwt, playframework

我们正在开发一个应用程序，使用后端的播放框架（使用 Restful 服务）和客户端中的 GWT。我们想从 GWT 调用 Restful 服务。我们可以使用 RestyGWT 来构建请求并获取 JSON 吗？

我已经阅读了 RestyGWT 文档（http://restygwt.fusesource.org/documentation/restygwt-user-guide.html），但我并不清楚，因为我们不需要构建 Restful 服务，只需从客户。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:06:16.450

我认为在您的情况下，您可以使用以下两个功能`RestyGWT`：

1.  调用使用 开发的 Restful Web 服务`Play Framework`，请参阅[这](http://restygwt.fusesource.org/documentation/restygwt-user-guide.html#REST_Services)部分文档。
2.  在您的 GWT 应用程序中使用 RestyGWT API 操作 JSON 对象以将 Java 对象编码和解码为 JSON，请参阅文档的[这一](http://restygwt.fusesource.org/documentation/restygwt-user-guide.html#JSON_Encoder_Decoders)部分。

# python - 初学者 Python：读取和写入同一个文件

> ID：14271216
> 
> 赞同：35
> 
> 时间：2013-01-11T03:31:50.957
> 
> 标签：python, io

一周前开始使用 Python，我有一些关于读取和写入相同文件的问题要问。我已经在网上浏览了一些教程，但我仍然对此感到困惑。我可以理解简单的读写文件。

```
openFile = open("filepath", "r")
readFile = openFile.read()
print readFile 

openFile = open("filepath", "a")
appendFile = openFile.write("\nTest 123")

openFile.close() 
```

但是，如果我尝试以下操作，我会在我正在写入的文本文件中得到一堆未知文本。谁能解释我为什么会遇到这样的错误以及为什么我不能按照下面显示的方式使用相同的 openFile 对象。

```
# I get an error when I use the codes below:       
openFile = open("filepath", "r+")
writeFile = openFile.write("Test abc")

readFile = openFile.read()
print readFile

openFile.close() 
```

我会尽力澄清我的问题。在上面的例子中，*openFile*是用来打开文件的对象。如果我想第一次写它，我没有问题。如果我想使用相同的*openFile*来读取文件或附加一些东西。它没有发生或给出错误。在对同一个文件执行另一个读/写操作之前，我必须声明相同/不同的打开文件对象。

```
#I have no problems if I do this:    
openFile = open("filepath", "r+")
writeFile = openFile.write("Test abc")

openFile2 = open("filepath", "r+")
readFile = openFile2.read()
print readFile

openFile.close() 
```

如果有人能告诉我我在这里做错了什么，或者这只是 Pythong 的事情，我将不胜感激。我正在使用 Python 2.7。谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-11T03:49:10.100

**更新的回应**：

这似乎是 Windows 特有的错误 - [http://bugs.python.org/issue1521491](http://bugs.python.org/issue1521491)。

引用[http://mail.python.org/pipermail/python-bugs-list/2005-August/029886.html中解释的解决方法](http://mail.python.org/pipermail/python-bugs-list/2005-August/029886.html)

> 除非在它们之间发生文件定位操作（例如，seek()），否则混合读取和写入对打开以进行更新的文件的影响是完全不确定的。我无法猜测您期望发生什么，但似乎很可能您想要的内容可以通过插入来可靠地获得
> 
> fp.seek(fp.tell())

在 read() 和你的 write() 之间。

我的原始回复演示了如何读取/写入为附加而打开的同一文件。如果您使用的是 Windows，这显然是不正确的。

**原始回复**：

在 'r+' 模式下，使用 write 方法将根据指针的位置将字符串对象写入文件。在您的情况下，它将字符串“Test abc”附加到文件的开头。请参见下面的示例：

```
>>> f=open("a","r+")
>>> f.read()
'Test abc\nfasdfafasdfa\nsdfgsd\n'
>>> f.write("foooooooooooooo")
>>> f.close()
>>> f=open("a","r+")
>>> f.read()
'Test abc\nfasdfafasdfa\nsdfgsd\nfoooooooooooooo' 
```

字符串“foooooooooooooo”被附加在文件末尾，因为指针已经在文件末尾。

您是否使用区分二进制文件和文本文件的系统？在这种情况下，您可能希望使用 'rb+' 作为模式。

> 在区分二进制文件和文本文件的系统上，将“b”附加到模式以二进制模式打开文件；在没有这种区别的系统上，添加“b”没有效果。 [http://docs.python.org/2/library/functions.html#open](http://docs.python.org/2/library/functions.html#open)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T10:25:04.760

每个打开的文件都有一个隐式指针，指示数据将在何处被读取和写入。通常，这默认为文件的开头，但如果您使用`a`(append) 模式，则默认为文件的结尾。还值得注意的是，`w`即使您添加`+`到该模式，该模式也会截断您的文件（即删除所有内容）。

每当您读取或写入 N 个字符时，读/写指针将在文件中向前移动该数量。如果你还记得的话，我发现把它想象成一个旧的盒式磁带会有所帮助。因此，如果您执行以下代码：

```
fd = open("testfile.txt", "w+")
fd.write("This is a test file.\n")
fd.close()

fd = open("testfile.txt", "r+")
print fd.read(4)
fd.write(" IS")
fd.close() 
```

...它应该最终打印`This`，然后将文件内容保留为`This IS a test file.`. 这是因为 initial`read(4)`返回文件的前 4 个字符，因为指针位于文件的开头。它将指针留在紧随其后的空格字符处`This`，因此以下内容`write(" IS")`会用空格（与已经存在的空格相同）覆盖接下来的三个字符，然后`IS`替换现有的`is`.

您可以使用`seek()`文件的方法跳转到特定点。在上面的示例之后，如果您执行以下操作：

```
fd = open("testfile.txt", "r+")
fd.seek(10)
fd.write("TEST")
fd.close() 
```

...然后您会发现该文件现在包含`This IS a TEST file.`.

所有这些都适用于 Unix 系统，您可以测试这些示例来确定。但是，我在混合`read()`和`write()`Windows 系统上遇到了问题。例如，当我在我的 Windows 机器上执行第一个示例时，它会正确打印`This`，但是当我之后检查文件时，它`write()`已被完全忽略。但是，第二个示例（使用`seek()`）似乎在 Windows 上运行良好。

总之，如果您想在 Windows 中从文件的中间读取/写入，我建议始终使用显式`seek()`而不是依赖于读取/写入指针的位置。如果您只进行读取或仅写入，那么它非常安全。

最后一点 - 如果您在 Windows 上将路径指定为文字字符串，请记住转义反斜杠：

```
fd = open("C:\\Users\\johndoe\\Desktop\\testfile.txt", "r+") 
```

`r`或者您可以通过在开头放置一个来使用原始字符串：

```
fd = open(r"C:\Users\johndoe\Desktop\testfile.txt", "r+") 
```

或者最便携的选择是使用`os.path.join()`：

```
fd = open(os.path.join("C:\\", "Users", "johndoe", "Desktop", "testfile.txt"), "r+") 
```

[您可以在Python 官方文档](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)中找到有关文件 IO 的更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T03:35:27.943

读取和写入发生在当前文件指针所在的位置，并且随着每次读取/写入而前进。在您的特定情况下，写入`openFile`, 会导致文件指针指向文件末尾。尝试从末尾读取会导致 EOF。`seek(0)`您需要重置文件指针，在读取文件之前指向文件的开头

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-11T11:28:23.340

您可以在 python 中读取、修改和保存到同一个文件，但实际上您必须替换文件中的全部内容，并在更新文件内容之前调用：

```
# set the pointer to the beginning of the file in order to rewrite the content
edit_file.seek(0) 
```

如果有帮助，我需要一个函数来遍历文件夹的所有子目录并根据某些标准编辑文件的内容：

```
new_file_content = ""
for directories, subdirectories, files in os.walk(folder_path):
    for file_name in files:
        file_path = os.path.join(directories, file_name)
        # open file for reading and writing
        with io.open(file_path, "r+", encoding="utf-8") as edit_file:
            for current_line in edit_file:
                if condition in current_line:
                    # update current line
                    current_line = current_line.replace('john', 'jack')
                new_file_content += current_line
            # set the pointer to the beginning of the file in order to rewrite the content
            edit_file.seek(0)
            # delete actual file content
            edit_file.truncate()
            # rewrite updated file content
            edit_file.write(new_file_content)
            # empties new content in order to set for next iteration
            new_file_content = ""
            edit_file.close() 
```

# listview - 默认 SplitPage 模板中的边距 -10。有意义吗？

> ID：14271225
> 
> 赞同：1
> 
> 时间：2013-01-11T03:32:58.473
> 
> 标签：listview, windows-8, winrt-xaml, windows-store-apps

在 Windows Store App **Split Page**模板中，我们可以看到下面的 XAML 代码。

```
 <!-- Vertical scrolling item list -->
    <ListView
        x:Name="itemListView"
        AutomationProperties.AutomationId="ItemsListView"
        AutomationProperties.Name="Items"
        TabIndex="1"
        Grid.Row="1"
        Margin="-10,-10,0,0"
        Padding="120,0,0,60"
        IsSwipeEnabled="False"
        SelectionChanged="ItemListView_SelectionChanged"> 
```

margin 属性的左侧值为 -10。为什么微软人把-10而不是0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:39:22.927

如果将上边距设置为零，则不会移动控件的位置。同样，如果您将上边距设置为正 10，则控件的位置会下降 10 个单位。相反，如果您将上边距设置为负 10，则展示位置将增加 10 个单位。

有时开发人员在看到负边距时会发疯，但它们是一种非常灵活且强大的方式来操纵画布上控件的位置。也就是说，我发现 Visual Studio for Windows 8 中的一些（全部？）默认模板并不是最佳实践。

# html - html5 将编辑后的内容保存为图片或pdf

> ID：14271226
> 
> 赞同：1
> 
> 时间：2013-01-11T03:33:09.417
> 
> 标签：html, web-applications, jquery-mobile, save, webpage-screenshot

（我是新手）我想创建一个 html5 页面/应用程序，其中包含要填写的文本框。

我的目标是，一旦用户填写完空白字段，他们可以点击网页上的一个按钮，将内容（包括所有图片、文本和他们填写的字段）全部保存为图像甚至 pdf，以便以后打印.

另请注意，我正在为移动平台执行此操作，因此我希望用户能够在从他们的设备进行编辑后存储在他们的设备上。因此，诸如 html 到 pdf 转换器站点之类的选项不可用。

反正这可能吗？谢谢。

# dynamics-crm-2011 - Dynamic CRM 2011 SDK 5.0.13 ExecuteMultipleRequest 示例代码格式化程序抛出异常

> ID：14271228
> 
> 赞同：1
> 
> 时间：2013-01-11T03:33:12.220
> 
> 标签：dynamics-crm-2011

我正在测试 ExecuteMultipleRequest，这是我的动态 CRM 在线环境中的一个有趣的新功能。但是我遇到了错误：

我在运行时遇到 ![运行时错误](../Images/cff7a5cb7da8ddaf7cd14abbbd4a607e.png)

我在调试期间遇到

![调试错误](../Images/56a04493fcfe1aa8ba240e3a234959fe.png)

我知道最新的汇总已被取消。这就是 ExecuteMultipleRequest 不起作用的原因吗？我发现其他博客似乎可以让它工作[Dynamics CRM Execute Multiple – Performance Tests](http://www.magnetismsolutions.com/blog/roshan/roshan-mehtas-blog/2013/01/09/dynamics-crm-execute-multiple-performance-tests) ，可能在它被拉之前？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:11:30.610

您的环境需要有 UR12。如果您在 CRM Online 上，您的管理员应该会在您的环境已更新时收到通知，但无论如何您都可以通过 CRM Web 客户端中的文件 > 帮助 > 关于进行检查。如果您使用的是 UR12，那么您的构建版本应该是 5.0.9690.3218

# java - Libgdx、物理、加速和 FPS

> ID：14271232
> 
> 赞同：2
> 
> 时间：2013-01-11T03:33:31.700
> 
> 标签：java, libgdx, game-physics, physics, frame-rate

我正在 Libgdx 框架中制作平台游戏。我想实现为我的角色跳跃的能力。我使用简单的公式：

```
speed += acceleration * delta_time
r += speed * delta_time 
```

它运作良好，但仅适用于每秒恒定帧数。FPS 越低，我的角色跳跃越低。我不知道这种行为的原因是什么，跳跃的高度应该是一样的：/我的代码有一个片段：

```
delta_time=Gdx.graphics.getDeltaTime();
if(input.getUpArrow()){
     if(is_in_air==false){
        is_in_air=true;
        speed_y=speed_y_0;
     }
  }

  if(is_in_air==true){
     speed_y-=acceleration*delta_time;
  }
  else{
     speed_y=0;
  }

  x+=speed_x*delta_time;
  y+=speed_y*delta_time; 
```

这是一个插图（黑点是字符位置）：http: [//i.imgur.com/tfSTM.jpg](https://i.imgur.com/tfSTM.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T14:03:54.203

鉴于您使用的积分器非常简单且非常不准确，这是完全正常的行为。做数学并证明这一点很容易。

让我们取一个 1/30 秒的时间跨度。当游戏以 30 FPS 运行时，只有一次更新`speed_y`和`y`，因此在 1/30 秒后，新位置`y'`将是：

```
speed_y' = speed_y - a*dt
y' = y + speed_y'*dt = y + speed_y*dt - a*dt^2 
```

这`dt`是 1/30 秒的时间增量。

当游戏以 60 FPS 运行时，在相同的 1/30 秒内将发生两次更新，时间差是原来的两倍`dt/2`：

```
// First update
speed_y' = speed_y - a*(dt/2)
y' = y + speed_y'*(dt/2) = y + speed_y*(dt/2) - a*(dt/2)^2
// Second update
speed_y'' = speed_y' - a*(dt/2) = speed_y - a*dt
y'' = y' + speed_y''*(dt/2) = y + speed_y*dt - 3*a*(dt/2)^2 
```

现在比较两个更新的`y`位置：

*   在 30 FPS 时，它是：`y + speed_y*dt - a*dt^2`
*   在 60 FPS 时，它是：`y + speed_y*dt - a*(3/4)*dt^2`

显然，在 60 FPS 时，新的位置`y`会高于 30 FPS 时的位置，因为减去的值较低。

这只会影响垂直运动。水平速度是恒定的，如果您以两倍的短时间增量更新一次或两次并不重要`x`，因此当您的角色跳跃时，无论FPS如何，它总是以相同的水平距离移动到它撞到地面的地方.

要解决这个问题，您必须仔细研究恒定加速度下的运动方程：

```
y(t) = y(t=0) + v(t=0)*t - (1/2)*a*t^2 
```

的选择`t=0`是任意的，因为物理定律在时间偏移下是不变的，因此可以将`t=0`其作为更新间隔的开始，然后`t=delta_time`给出当前更新后的位置。正确的更新算法如下：

```
x += speed_x*delta_time;
if (is_in_air) {
   y += (speed_y - 0.5*acceleration*delta_time)*delta_time;
   speed_y -= acceleration*delta_time;
} 
```

请注意，`speed_y`应根据运动方程中的值在垂直位置**之后更新。**

# jasper-reports - 关于 Jasper 报表条形图

> ID：14271238
> 
> 赞同：0
> 
> 时间：2013-01-11T03:33:57.473
> 
> 标签：jasper-reports

我正在使用 jasper ireport 4.0.1 进行开发。我需要实现一个根据导入的2个参数显示的条形图，一个是使用过的，另一个是总值。我希望该条的左侧部分以红色表示，并且长度将根据已使​​用值在总数中的比例进行更改，并且已使用值需要显示在该条的该部分和条的其余部分绿色，总长度减去使用值。我怎么能意识到，任何帮助将不胜感激！

假设总值是 45

如果使用的值为 24，则条形图将显示如下

![在此处输入图像描述](../Images/e919d58d021ea16fe2d97e7010de32ae.png)

如果使用的值为 44，那么条形图将如下所示

![在此处输入图像描述](../Images/3ef9390ab1c8191b9469937068bf9376.png)

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:53:39.133

您可以通过定义 2 个参数来实现：

*   **最大值**：最大值
*   **ratio**：应该在蓝色和绿色之间切换时的值。

然后添加一个包含 3 个系列的堆积条形图：

*   **Series1**：系列表达式：“RED”，类别表达式`$F{<field>}`，值表达式`$F{<value>}`
*   **Series2**：系列表达式：“BLUE”，类别表达式`$F{<field>}`，值表达式`$F{<value>} < $P{proportion} ? $P{max} - $F{<value>} : 0`
*   **Series3**：系列表达式：“GREEN”，类别表达式`$F{<field>}`，值表达式`$F{<value>} >= $P{proportion} ? $P{max} - $F{<value>} : 0`

![报告输出](../Images/29b567a93bca4ced6c5952a8739708c3.png)

# php - 用于网站实施的网络摄像头图像流

> ID：14271239
> 
> 赞同：1
> 
> 时间：2013-01-11T03:34:02.303
> 
> 标签：php, javascript, html, webcam

使用来自网络摄像头的图像在网站上设置实时图像流。试图解决它的实现。网络摄像头拍摄一张照片，需要裁剪、调整大小和上传（不一定按此顺序），然​​后再显示给用户，每分钟一张新图像。目前我有一个 php 脚本来进行裁剪和调整大小，而网络摄像头程序可以自动拍摄和上传照片。然而...

如果用户在上传时重新加载页面，直接在现有图像上上传会导致问题，从而导致图像丢失。

使用不同的文件名上传，然后重命名它会导致问题，如果用户在重命名期间重新加载页面，导致两个图像的组合。

使用顺序文件名系统会变得棘手，因为网页需要每分钟知道新的即将到来的文件，以及潜在的图像积压。

任何建议表示赞赏。希望我错过了一些简单的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:38:54.337

只需上传不同名称的图像，在配置文件或 MySQL 中设置当前图像名称，然后在上传后更改它。

# javascript - Jquery更改功能在html表单中不起作用

> ID：14271241
> 
> 赞同：0
> 
> 时间：2013-01-11T03:34:31.927
> 
> 标签：javascript, jquery

```
<script>
$(document).ready(function(){             
$("#agegrade").change(function () {                   
var str = "";                   
$("select option:selected").each(function () {               
str = $(this).text();               
if(str == "1900-1903")                  
str = "NAME TO BE PROVIDED";               
else if(str == "1904-1907")                  
str = "NAME TO BE PROVIDED";               
else if(str == "1908-1911")                  
str = "NAME TO BE PROVIDED";               
else if(str == "1912-1915")                  
str = "NAME TO BE PROVIDED";               
else if(str == "1916-1919")                  
str = "EGBE NA UGO";
else if(str == "1920-1923")                  
str = "NAME TO BE PROVIDED";               
else if(str == "1924-1927")                  
str = "IGWEBUIKE";               
else if(str == "1928-1931")                  
str = "ANYILIGWE";
else if(str == "1932-1935")                  
str = "NAME TO BE PROVIDED";               
else if(str == "1936-1939")                  
str = "NAME TO BE PROVIDED";               
else if(str == "1940-1943")                  
str = "UCHE BU UKO";
else if(str == "1944-1947")                  
str = "NAME TO BE PROVIDED";               
else if(str == "1948-1951")                  
str = "OFU OBI";               
else if(str == "1952-1955")                  
str = "ANULIKA";
else if(str == "1956-1959")                  
str = "IFUNANYA";               
else if(str == "1960-1963")                  
str = "NWANNEKA";               
else if(str == "1964-1967")                  
str = "NAME TO BE PROVIDED";
else if(str == "1968-1971")                  
str = "YET TO BE GROUPED";               
else if(str == "1972-1975")                  
str = "YET TO BE GROUPED";               
else if(str == "1976-1979")                  
str = "YET TO BE GROUPED";
else if(str == "1980-1983")                  
str = "YET TO BE GROUPED";               
else if(str == "1984-1987")                  
str = "YET TO BE GROUPED";               
else if(str == "1988-1991")                  
str = "YET TO BE GROUPED";
else if(str == "1992-1995")                  
str = "YET TO BE GROUPED";               
else if(str == "1996-1999")                  
str = "YET TO BE GROUPED";
else if(str == "2000-2003")                  
str = "YET TO BE GROUPED";                              
else
str = "Please Select An Item";
                       });                   
$("#adiv").text(str);
 })                 
 .change();         
 });
 </script> 
<select id="agegrade" name="agegrade" multiple="multiple">          
<option  selected="selected">1900-1903</option>
<option>1904-1907</option>
<option>1908-1911</option>
<option>1912-1915</option>
<option>1916-1919</option>
<option>1920-1923</option>
<option>1924-1927</option>
<option>1928-1931</option>
<option>1932-1935</option>
<option>1936-1939</option>
<option>1940-1943</option>
<option>1944-1947</option>
<option>1948-1951</option>
<option>1952-1955</option>
<option>1956-1959</option>
<option>1960-1963</option>
<option>1964-1967</option>
<option>1968-1971</option>
<option>1972-1975</option>
<option>1976-1979</option>
<option>1980-1983</option>
<option>1984-1987</option>
<option>1988-1991</option>
<option>1992-1995</option>
<option>1996-1999</option>
<option>2000-2003</option>
</select>
<div id="adiv"></div> 
```

上面的代码有效，但是当我尝试将它包含在我想要应用它的表单（注册表单）中时，它不起作用。可能是什么原因？请帮我解决这个问题。下面是代码。此外，日期功能不起作用。

```
<table width="815" height="1000" border="0" cellpadding="0" cellspacing="0">
<tr align="left">
    <form action="<?php echo $editFormAction; ?>" id="form1" name="form1" method="POST">
<tr>
<td align="left"><strong>Registration Page</strong></td>
<td align="left" valign="middle">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;</td>
<td align="left" valign="middle">&nbsp;</td>
</tr>
<tr>
<td align="left"><strong>Title: </strong></td>
<td align="left" valign="middle"><select name="title" id="title">
<option value="Mr.">Mr.</option>
<option value="Mrs.">Mrs.</option>
<option value="Dr.">Dr.</option>
<option value="Prof.">Prof.</option>
<option value="Barr.">Barr.</option>
<option value="Engr">Engr</option>
<option value="Justice">Justice</option>
<option value="Evang">Evang</option>
<option value="Arch">Arch</option>
<option value="Chief">Chief</option>
<option value="Hon">Hon</option>
</select></td>
</tr>
<td align="left" valign="middle"><span id="spryselect1">
<label for="title"></label>
<span class="selectRequiredMsg">Please select an item.</span></span></td>
<tr align="left"></tr>
<tr>
<td width="167" align="left"><strong>Surname:</strong></td>
<td width="648" align="left" valign="middle"><span id="sprytextfield1">
<label for="surname"></label>
<input name="surname" type="text" id="surname" size="51" maxlength="40" />
<span class="textfieldRequiredMsg">Your surname is required.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Other Names:</strong></td>
<td align="left" valign="middle"><label for="othernames"></label>
<input name="othernames" type="text" id="othernames" size="51" maxlength="40" /></td>
</tr>
<tr>
<td align="left"><strong>Date Of Birth:</strong></td>
<td align="left" valign="middle"><label for="dob"></label>
<span id="sprytextfield9">
<label for="dateofbirth"></label>
<input type="text" name="dateofbirth" id="dateofbirth" />
<span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span> (format dd/mm/yyyy)                    <tr>
<td align="left"><strong>Father's Name:</strong></td>
<td align="left" valign="middle"><span id="sprytextfield6">
<label for="fathersname"></label>
<input name="fathersname" type="text" id="fathersname" size="51" maxlength="40" />
<span class="textfieldRequiredMsg">Your father's name is required.</span></span></td>
<tr>
<tr>
<td align="left"><strong>Mother's Name:</strong></td>
<td align="left" valign="middle"><span id="sprytextfield7">
<label for="mothersname"></label>
<input name="mothersname" type="text" id="mothersname" size="51" maxlength="40" />
<span class="textfieldRequiredMsg">Your mother's name  is required.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Ward:      </strong></td>
<td align="left" valign="middle"><span id="spryselect2">
<label for="ward"></label>
<select name="ward" id="ward">
<option value="" selected="selected">Please select</option>
<option value="AdagbeMmimi">AdagbeMmimi</option>
<option value="Aga">Aga</option>
<option value="Anugama">Anugama</option>
<option value="Esike">Esike</option>
<option value="Etele">Etele</option>
<option value="Mmimi">Mmimi</option>
<option value="Eziakpaka">Eziakpaka</option>
<option value="Okpalo/Nwadika">Okpalo/Nwadika</option>
<option value="Ugwaku/Mgbike">Ugwaku/Mgbike</option>
<option value="Umukwa">Umukwa</option>
<option value="JikoroUfele">JikoroUfele</option>
<option value="Omesu">Omesu</option>
<option value="Umuezunu">Umuezunu</option>
<option value="Urualo/Uruejimofor">Urualo/Uruejimofor</option>
<option value="Urukpaleri">Urukpaleri</option>
<option value="Uruoji">Uruoji</option>
</select>
<span class="selectRequiredMsg">Please select a ward.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Village:</strong></td>
<td align="left" valign="middle"><span id="spryselect3">
<label for="village"></label>
<select name="village" id="village">
<option selected="selected">Please Select...</option>
<option value="Iridana">Iridana</option>
<option value="Mmimi">Mmimi</option>
<option value="Umuezeunu">Umuezeunu</option>
<option value="Umukwa">Umukwa</option>
<option value="EnugoMmimi">EnugoMmimi</option>
<option value="UmumriamObunese">UmumriamObunese</option>
<option value="Urualo">Urualo</option>
<option value="Uruejimofor">Uruejimofor</option>
<option value="Urukpaleri">Urukpaleri</option>
<option value="Uruoji">Uruoji</option>
</select>
<span class="selectRequiredMsg">Please select a village.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Age Grade:</strong></td>
<td align="left" valign="middle"><span id="spryselect4" />
<label for="agegrade"></label>
<select name="agegrade" id="agegrade">          
<option selected="selected">1900-1903</option>
<option>1904-1907</option>
<option>1908-1911</option>
<option>1912-1915</option>
<option>1916-1919</option>
<option>1920-1923</option>
<option>1924-1927</option>
<option>1928-1931</option>
<option>1932-1935</option>
<option>1936-1939</option>
<option>1940-1943</option>
<option>1944-1947</option>
<option>1948-1951</option>
<option>1952-1955</option>
<option>1956-1959</option>
<option>1960-1963</option>
<option>1964-1967</option>
<option>1968-1971</option>
<option>1972-1975</option>
<option>1976-1979</option>
<option>1980-1983</option>
<option>1984-1987</option>
<option>1988-1991</option>
<option>1992-1995</option>
<option>1996-1999</option>
<option>2000-2003</option>
</select>
<script>         
    $(document).ready(function(){             
    $("#agegrade").change(function () {                   
    var str = "";                   
    $("select option:selected").each(function () {               
    str = $(this).text();               
    if(str == "1900-1903")                  
    str = "NAME TO BE PROVIDED";               
    else if(str == "1904-1907")                  
    str = "NAME TO BE PROVIDED";               
    else if(str == "1908-1911")                  
    str = "NAME TO BE PROVIDED";               
    else if(str == "1912-1915")                  
    str = "NAME TO BE PROVIDED";               
    else if(str == "1916-1919")                  
    str = "EGBE NA UGO";
    else if(str == "1920-1923")                  
    str = "NAME TO BE PROVIDED";               
    else if(str == "1924-1927")                  
    str = "IGWEBUIKE";               
    else if(str == "1928-1931")                  
    str = "ANYILIGWE";
    else if(str == "1932-1935")                  
    str = "NAME TO BE PROVIDED";               
    else if(str == "1936-1939")                  
    str = "NAME TO BE PROVIDED";               
    else if(str == "1940-1943")                  
    str = "UCHE BU UKO";
    else if(str == "1944-1947")                  
    str = "NAME TO BE PROVIDED";               
    else if(str == "1948-1951")                  
    str = "OFU OBI";               
    else if(str == "1952-1955")                  
    str = "ANULIKA";
    else if(str == "1956-1959")                  
    str = "IFUNANYA";               
    else if(str == "1960-1963")                  
    str = "NWANNEKA";               
    else if(str == "1964-1967")                  
    str = "NAME TO BE PROVIDED";
    else if(str == "1968-1971")                  
    str = "YET TO BE GROUPED";               
    else if(str == "1972-1975")                  
    str = "YET TO BE GROUPED";               
    else if(str == "1976-1979")                  
    str = "YET TO BE GROUPED";
    else if(str == "1980-1983")                  
    str = "YET TO BE GROUPED";               
    else if(str == "1984-1987")                  
    str = "YET TO BE GROUPED";               
    else if(str == "1988-1991")                  
    str = "YET TO BE GROUPED";
    else if(str == "1992-1995")                  
    str = "YET TO BE GROUPED";               
    else if(str == "1996-1999")                  
    str = "YET TO BE GROUPED";
    else if(str == "2000-2003")                  
    str = "YET TO BE GROUPED";                              
    else
    str = "Please Select An Item";
                           });                   
    $("#adiv").text(str);
     })                 
     .change();         
     });

</script>
</td>
</tr>
<tr>
<td width="167" align="left"><strong>Name Of Age Grade:</strong></td>
<td width="648" align="left" valign="middle">
<label for="NAgegrade"></label>
<input name="NAgegrade" type="text" id="NAgegrade" size="51" maxlength="40" />
</td>
</tr>
<tr>
<td align="left"><strong>Occupation:</strong></td>
<td align="left" valign="middle"><span id="spryselect5">
<label for="occupation"></label>
<select name="occupation" id="occupation">
<option selected="selected">Please Select...</option>
<option value="Architect">Architect</option>
<option value="Business">Business</option>
<option value="Student">Student</option>
<option value="Scientist">Scientist</option>
<option value="Farmer">Farmer</option>
<option value="Lawyer">Lawyer</option>
<option value="Doctor">Doctor</option>
<option value="Professor">Professor</option>
<option value="Engineer">Engineer</option>
<option value="Lecturer">Lecturer</option>
<option value="Teacher">Teacher</option>
<option value="Civil Servant">Civil Servant</option>
<option value="Judge">Judge</option>
<option value="Pharmacist">Pharmacist</option>
<option value="Educationist">Educationist</option>
<option value="Surveyor">Surveyor</option>
<option value="Ploice Officer">Ploice Officer</option>
<option value="Military Officer">Military Officer</option>
<option value="Custom Officer">Custom Officer</option>
<option value="Immigration Officer">Immigration Officer</option>
<option value="others">Others Please specify...</option>
</select>
<span class="selectRequiredMsg">Please select an item.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Phone Number:</strong></td>
<td align="left" valign="middle"><span id="sprytextfield2">
<label for="phonenumber"></label>
<input name="phonenumber" type="text" id="phonenumber" size="51" maxlength="40" />
<span class="textfieldRequiredMsg">Your Phone Number  is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Email Address:</strong></td>
<td align="left" valign="middle"><span id="sprytextfield3">
<label for="email"></label>
<input name="email" type="text" id="email" size="51" maxlength="40" />
<span class="textfieldRequiredMsg">Your Email  is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Country Of Residence:</strong></td>
<td align="left" valign="middle"><span id="spryselect6">
<label for="country"></label>
<select onchange="print_state('state',this.selectedIndex);" id="country" name="country"></select>
<span class="selectRequiredMsg">Please select an item.</span></span></td>
</tr>
<tr>
<td align="left"><strong>State Of Residence:</strong></td>
<td align="left" valign="middle"><span id="sprytextfield4">
<label for="state"></label>
<select name="state" id="state"></select>
<script language="javascript">print_country("country");</script>
<span class="textfieldRequiredMsg">A value is required.</span></span></td>
</tr>
<tr>
<td align="left"><strong>City Of Residence:</strong></td>
<td align="left" valign="middle"><span id="sprytextfield5">
<label for="city"></label>
<input name="city" type="text" id="city" size="51" maxlength="40" />
<span class="textfieldRequiredMsg">Your city is required.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Address(Optional):</strong></td>
<td align="left" valign="middle"><span id="sprytextarea1">
<label for="address"></label>
<textarea name="address" id="address" cols="45" rows="5"></textarea>
</span></td>
</tr>
<tr>
<td align="left">&nbsp;</td>
<td align="left" valign="middle"><strong>Create your username and password</strong></td>
</tr>
<tr>
<td align="left"><strong>Username:</strong></td>
<td align="left" valign="middle"><span id="sprytextfield8">
<label for="username"></label>
<input name="username" type="text" id="username" size="51" maxlength="40" />
<span class="textfieldRequiredMsg">Your username is required.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Password:</strong></td>
<td align="left" valign="middle"><span id="sprypassword1">
<label for="password"></label>
<input name="password" type="password" id="password" size="51" maxlength="30" />
<span class="passwordMaxCharsMsg">Must be a maximum of 40 characters.</span></span></td>
</tr>
<tr>
<td align="left"><strong>Verify Password:</strong></td>
<td align="left" valign="middle"><span id="spryconfirm1">
<label for="password"></label>
<input name="password2" type="password" id="password" size="51" maxlength="40" />
<span class="confirmRequiredMsg">A value is required.</span><span class="confirmInvalidMsg">The values don't match.</span></span></td>
</tr>
<tr align="left">
<td>&nbsp;</td>
</tr>
<tr align="left">
<td>
<input name="submit" type="submit" id="submit" value="Submit" />
</td>
</tr>
<input type="hidden" name="MM_insert" value="form1" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:42:18.040

一方面，您的脚本通常应该（如果不是总是）位于页面底部的结束 HTML 和结束正文标记之间。这不仅提高了页面渲染的性能，而且确保在执行任何依赖脚本之前已经渲染了必要的 HTML 元素。

其次，筛选所有标记非常困难。这是您的脚本的精简版（见下文）。我把所有的值都变成了选项本身的属性。这显着降低了代码的复杂性。另外，我不确定为什么您要遍历每个值只是为了获得最后一个选定的值，所以我对其进行了修改以直接获取最后一个选定的值。

接下来，我会将适当的属性添加到您的脚本标签

```
<script type='text/javascript'>
//... your code
</script> 
```

`<div id="adiv"></div>`最后，在非工作示例中，我没有在您的表单上看到 div 。也许这是复制和粘贴代码的遗漏，但如果不是，那么它很可能是您的问题的原因。

## [例子](http://jsfiddle.net/4YEvf/4/)

**HTML**

```
<select id="agegrade" name="agegrade" multiple="multiple">          
  <option value='NAME TO BE PROVIDED' selected="selected">1900-1903</option>
  <option value='NAME TO BE PROVIDED'>1904-1907</option>
  <option value='NAME TO BE PROVIDED'>1908-1911</option>
  <option value='NAME TO BE PROVIDED'>1912-1915</option>
  <option value='EGBE NA UGO'>1916-1919</option>
  <option value='NAME TO BE PROVIDED'>1920-1923</option>
  <option value='IGWEBUIKE'>1924-1927</option>
  <option value='ANYILIGWE'>1928-1931</option>
  <option value='NAME TO BE PROVIDED'>1932-1935</option>
  <option value='NAME TO BE PROVIDED'>1936-1939</option>
  <option value='UCHE BU UKO'>1940-1943</option>
  <option value='NAME TO BE PROVIDED'>1944-1947</option>
  <option value='OFU OBI'>1948-1951</option>
  <option value='ANULIKA'>1952-1955</option>
  <option value='IFUNANYA'>1956-1959</option>
  <option value='NWANNEKA'>1960-1963</option>
  <option value='NAME TO BE PROVIDED'>1964-1967</option>
  <option value='YET TO BE GROUPED'>1968-1971</option>
  <option value='YET TO BE GROUPED'>1972-1975</option>
  <option value='YET TO BE GROUPED'>1976-1979</option>
  <option value='YET TO BE GROUPED'>1980-1983</option>
  <option value='YET TO BE GROUPED'>1984-1987</option>
  <option value='YET TO BE GROUPED'>1988-1991</option>
  <option value='YET TO BE GROUPED'>1992-1995</option>
  <option value='YET TO BE GROUPED'>1996-1999</option>
  <option value='YET TO BE GROUPED'>2000-2003</option>
</select>
<div id="adiv"></div> 
```

**JS**

```
$(function(){             
  $("#agegrade").change(function () {                           
    $("#adiv").text($("select option:selected:last").val());
  }).change();         
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:14:53.507

```
<form action="<?php echo $editFormAction; ?>" id="form1" name="form1" method="POST">
      <table width="815" height="1000" border="0" cellpadding="0" cellspacing="0">
        <tr align="left">

        <tr>
          <td align="left"><strong>Registration Page</strong></td>
          <td align="left" valign="middle">&nbsp;</td>
        </tr>
        <tr>
          <td align="left">&nbsp;</td>
          <td align="left" valign="middle">&nbsp;</td>
        </tr>
        <tr>
          <td align="left"><strong>Title: </strong></td>
          <td align="left" valign="middle"><select name="title" id="title">
              <option value="Mr.">Mr.</option>
              <option value="Mrs.">Mrs.</option>
              <option value="Dr.">Dr.</option>
              <option value="Prof.">Prof.</option>
              <option value="Barr.">Barr.</option>
              <option value="Engr">Engr</option>
              <option value="Justice">Justice</option>
              <option value="Evang">Evang</option>
              <option value="Arch">Arch</option>
              <option value="Chief">Chief</option>
              <option value="Hon">Hon</option>
            </select></td>
        </tr>
        <td align="left" valign="middle"><span id="spryselect1">
            <label for="title"></label>
            <span class="selectRequiredMsg">Please select an item.</span></span></td>
        <tr align="left"></tr>
        <tr>
          <td width="167" align="left"><strong>Surname:</strong></td>
          <td width="648" align="left" valign="middle"><span id="sprytextfield1">
              <label for="surname"></label>
              <input name="surname" type="text" id="surname" size="51" maxlength="40" />
              <span class="textfieldRequiredMsg">Your surname is required.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Other Names:</strong></td>
          <td align="left" valign="middle"><label for="othernames"></label>
            <input name="othernames" type="text" id="othernames" size="51" maxlength="40" /></td>
        </tr>
        <tr>
          <td align="left"><strong>Date Of Birth:</strong></td>
          <td align="left" valign="middle"><label for="dob"></label>
            <span id="sprytextfield9">
              <label for="dateofbirth"></label>
              <input type="text" name="dateofbirth" id="dateofbirth" />
              <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span> (format dd/mm/yyyy)                    <tr>
          <td align="left"><strong>Father's Name:</strong></td>
          <td align="left" valign="middle"><span id="sprytextfield6">
              <label for="fathersname"></label>
              <input name="fathersname" type="text" id="fathersname" size="51" maxlength="40" />
              <span class="textfieldRequiredMsg">Your father's name is required.</span></span></td>
        <tr>
        <tr>
          <td align="left"><strong>Mother's Name:</strong></td>
          <td align="left" valign="middle"><span id="sprytextfield7">
              <label for="mothersname"></label>
              <input name="mothersname" type="text" id="mothersname" size="51" maxlength="40" />
              <span class="textfieldRequiredMsg">Your mother's name  is required.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Ward:      </strong></td>
          <td align="left" valign="middle"><span id="spryselect2">
              <label for="ward"></label>
              <select name="ward" id="ward">
                <option value="" selected="selected">Please select</option>
                <option value="AdagbeMmimi">AdagbeMmimi</option>
                <option value="Aga">Aga</option>
                <option value="Anugama">Anugama</option>
                <option value="Esike">Esike</option>
                <option value="Etele">Etele</option>
                <option value="Mmimi">Mmimi</option>
                <option value="Eziakpaka">Eziakpaka</option>
                <option value="Okpalo/Nwadika">Okpalo/Nwadika</option>
                <option value="Ugwaku/Mgbike">Ugwaku/Mgbike</option>
                <option value="Umukwa">Umukwa</option>
                <option value="JikoroUfele">JikoroUfele</option>
                <option value="Omesu">Omesu</option>
                <option value="Umuezunu">Umuezunu</option>
                <option value="Urualo/Uruejimofor">Urualo/Uruejimofor</option>
                <option value="Urukpaleri">Urukpaleri</option>
                <option value="Uruoji">Uruoji</option>
              </select>
              <span class="selectRequiredMsg">Please select a ward.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Village:</strong></td>
          <td align="left" valign="middle"><span id="spryselect3">
              <label for="village"></label>
              <select name="village" id="village">
                <option selected="selected">Please Select...</option>
                <option value="Iridana">Iridana</option>
                <option value="Mmimi">Mmimi</option>
                <option value="Umuezeunu">Umuezeunu</option>
                <option value="Umukwa">Umukwa</option>
                <option value="EnugoMmimi">EnugoMmimi</option>
                <option value="UmumriamObunese">UmumriamObunese</option>
                <option value="Urualo">Urualo</option>
                <option value="Uruejimofor">Uruejimofor</option>
                <option value="Urukpaleri">Urukpaleri</option>
                <option value="Uruoji">Uruoji</option>
              </select>
              <span class="selectRequiredMsg">Please select a village.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Age Grade:</strong></td>
          <td align="left" valign="middle"><span id="spryselect4" >
              <label for="agegrade"></label>
              <select name="agegrade" id="agegrade">       
                <option selected="selected">Please Select An Item</option>
                <option>1900-1903</option>
                <option>1904-1907</option>
                <option>1908-1911</option>
                <option>1912-1915</option>
                <option>1916-1919</option>
                <option>1920-1923</option>
                <option>1924-1927</option>
                <option>1928-1931</option>
                <option>1932-1935</option>
                <option>1936-1939</option>
                <option>1940-1943</option>
                <option>1944-1947</option>
                <option>1948-1951</option>
                <option>1952-1955</option>
                <option>1956-1959</option>
                <option>1960-1963</option>
                <option>1964-1967</option>
                <option>1968-1971</option>
                <option>1972-1975</option>
                <option>1976-1979</option>
                <option>1980-1983</option>
                <option>1984-1987</option>
                <option>1988-1991</option>
                <option>1992-1995</option>
                <option>1996-1999</option>
                <option>2000-2003</option>
              </select>
              <script>         
                $(document).ready(function(){             
                  $("#agegrade").live('change',function () {                   
                    var str = "";                   
                    $("#agegrade option:selected").text();              
                    str = $("#agegrade option:selected").text();               
                    if(str == "1900-1903")                  
                      str = "NAME TO BE PROVIDED";               
                    else if(str == "1904-1907")                  
                      str = "NAME TO BE PROVIDED";               
                    else if(str == "1908-1911")                  
                      str = "NAME TO BE PROVIDED";               
                    else if(str == "1912-1915")                  
                      str = "NAME TO BE PROVIDED";               
                    else if(str == "1916-1919")                  
                      str = "EGBE NA UGO";
                    else if(str == "1920-1923")                  
                      str = "NAME TO BE PROVIDED";               
                    else if(str == "1924-1927")                  
                      str = "IGWEBUIKE";               
                    else if(str == "1928-1931")                  
                      str = "ANYILIGWE";
                    else if(str == "1932-1935")                  
                      str = "NAME TO BE PROVIDED";               
                    else if(str == "1936-1939")                  
                      str = "NAME TO BE PROVIDED";               
                    else if(str == "1940-1943")                  
                      str = "UCHE BU UKO";
                    else if(str == "1944-1947")                  
                      str = "NAME TO BE PROVIDED";               
                    else if(str == "1948-1951")                  
                      str = "OFU OBI";               
                    else if(str == "1952-1955")                  
                      str = "ANULIKA";
                    else if(str == "1956-1959")                  
                      str = "IFUNANYA";               
                    else if(str == "1960-1963")                  
                      str = "NWANNEKA";               
                    else if(str == "1964-1967")                  
                      str = "NAME TO BE PROVIDED";
                    else if(str == "1968-1971")                  
                      str = "YET TO BE GROUPED";               
                    else if(str == "1972-1975")                  
                      str = "YET TO BE GROUPED";               
                    else if(str == "1976-1979")                  
                      str = "YET TO BE GROUPED";
                    else if(str == "1980-1983")                  
                      str = "YET TO BE GROUPED";               
                    else if(str == "1984-1987")                  
                      str = "YET TO BE GROUPED";               
                    else if(str == "1988-1991")                  
                      str = "YET TO BE GROUPED";
                    else if(str == "1992-1995")                  
                      str = "YET TO BE GROUPED";               
                    else if(str == "1996-1999")                  
                      str = "YET TO BE GROUPED";
                    else if(str == "2000-2003")                  
                      str = "YET TO BE GROUPED";                              
                    else
                      str = "Please Select An Item";

                    $("#adiv").text(str);
                  })    
                });

              </script>
            <span id="adiv">Please select an item.</span></span>
          </td>
        </tr>
        <tr>
          <td width="167" align="left"><strong>Name Of Age Grade:</strong></td>
          <td width="648" align="left" valign="middle">
            <label for="NAgegrade"></label>
            <input name="NAgegrade" type="text" id="NAgegrade" size="51" maxlength="40" />
          </td>
        </tr>
        <tr>
          <td align="left"><strong>Occupation:</strong></td>
          <td align="left" valign="middle"><span id="spryselect5">
              <label for="occupation"></label>
              <select name="occupation" id="occupation">
                <option selected="selected">Please Select...</option>
                <option value="Architect">Architect</option>
                <option value="Business">Business</option>
                <option value="Student">Student</option>
                <option value="Scientist">Scientist</option>
                <option value="Farmer">Farmer</option>
                <option value="Lawyer">Lawyer</option>
                <option value="Doctor">Doctor</option>
                <option value="Professor">Professor</option>
                <option value="Engineer">Engineer</option>
                <option value="Lecturer">Lecturer</option>
                <option value="Teacher">Teacher</option>
                <option value="Civil Servant">Civil Servant</option>
                <option value="Judge">Judge</option>
                <option value="Pharmacist">Pharmacist</option>
                <option value="Educationist">Educationist</option>
                <option value="Surveyor">Surveyor</option>
                <option value="Ploice Officer">Ploice Officer</option>
                <option value="Military Officer">Military Officer</option>
                <option value="Custom Officer">Custom Officer</option>
                <option value="Immigration Officer">Immigration Officer</option>
                <option value="others">Others Please specify...</option>
              </select>
              <span class="selectRequiredMsg">Please select an item.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Phone Number:</strong></td>
          <td align="left" valign="middle"><span id="sprytextfield2">
              <label for="phonenumber"></label>
              <input name="phonenumber" type="text" id="phonenumber" size="51" maxlength="40" />
              <span class="textfieldRequiredMsg">Your Phone Number  is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Email Address:</strong></td>
          <td align="left" valign="middle"><span id="sprytextfield3">
              <label for="email"></label>
              <input name="email" type="text" id="email" size="51" maxlength="40" />
              <span class="textfieldRequiredMsg">Your Email  is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Country Of Residence:</strong></td>
          <td align="left" valign="middle"><span id="spryselect6">
              <label for="country"></label>
              <select onchange="print_state('state',this.selectedIndex);" id="country" name="country"></select>
              <span class="selectRequiredMsg">Please select an item.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>State Of Residence:</strong></td>
          <td align="left" valign="middle"><span id="sprytextfield4">
              <label for="state"></label>
              <select name="state" id="state"></select>
              <!--<script language="javascript">print_country("country");</script>-->
              <span class="textfieldRequiredMsg">A value is required.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>City Of Residence:</strong></td>
          <td align="left" valign="middle"><span id="sprytextfield5">
              <label for="city"></label>
              <input name="city" type="text" id="city" size="51" maxlength="40" />
              <span class="textfieldRequiredMsg">Your city is required.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Address(Optional):</strong></td>
          <td align="left" valign="middle"><span id="sprytextarea1">
              <label for="address"></label>
              <textarea name="address" id="address" cols="45" rows="5"></textarea>
            </span></td>
        </tr>
        <tr>
          <td align="left">&nbsp;</td>
          <td align="left" valign="middle"><strong>Create your username and password</strong></td>
        </tr>
        <tr>
          <td align="left"><strong>Username:</strong></td>
          <td align="left" valign="middle"><span id="sprytextfield8">
              <label for="username"></label>
              <input name="username" type="text" id="username" size="51" maxlength="40" />
              <span class="textfieldRequiredMsg">Your username is required.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Password:</strong></td>
          <td align="left" valign="middle"><span id="sprypassword1">
              <label for="password"></label>
              <input name="password" type="password" id="password" size="51" maxlength="30" />
              <span class="passwordMaxCharsMsg">Must be a maximum of 40 characters.</span></span></td>
        </tr>
        <tr>
          <td align="left"><strong>Verify Password:</strong></td>
          <td align="left" valign="middle"><span id="spryconfirm1">
              <label for="password"></label>
              <input name="password2" type="password" id="password" size="51" maxlength="40" />
              <span class="confirmRequiredMsg">A value is required.</span><span class="confirmInvalidMsg">The values don't match.</span></span></td>
        </tr>
        <tr align="left">
          <td>&nbsp;</td>
        </tr>
        <tr align="left">
          <td>
            <input name="submit" type="submit" id="submit" value="Submit" />
          </td>
        </tr>
      </table>
      <input type="hidden" name="MM_insert" value="form1" />

    </form> 
```

# dojo - 脚本中的多重继承#

> ID：14271242
> 
> 赞同：0
> 
> 时间：2013-01-11T03:34:33.030
> 
> 标签：dojo, script#

我正在尝试制作一个 Script# 导入库来包装（部分）dojo 工具包——尤其是 dijit 小部件。不幸的是，dojo 使用多重继承，而 C# 不支持这一点（接口除外，Script# 不能正确处理它——见下文）。

我正在尝试完成这样的事情：

```
[Imported]
public class A
{
   public void Foo() {}
}
[Imported]
public class B
{
   public void Bar() {}
}
[Imported]
public class C : A, B
{
   public void Sproing() {}
} 
```

但显然这不是有效的 C#，因此不是有效的 Script#。

Script# 中有没有办法适应 [Imported] 类的多重继承？我尝试使用接口，因为 C# 支持它们的多重继承，而且我不提供实现： [Imported] public interface A { void Foo(); } [导入] 公共接口 B { void Bar(); } [导入] 公共接口 C : A, B { void Sproing(); 但是，当我尝试使用另一个 Script# 项目中的库时，诸如`C c = null; c.Foo();`我之类的代码只是得到一个“检查您的 C# 源代码是否已编译并且您没有使用不受支持的功能。要检查的常见事项包括使用完全-限定名称（使用 using 语句来导入命名空间）或从同一类型的静态成员访问类型的私有成员。”`c.Foo()`

还有其他想法吗？[Mixin] 属性似乎也不能满足我的需要。

我目前看到的唯一其他选择（除了修复 Script# 中的接口问题，我不准备这样做）是完全放弃继承并将所有“继承”成员放在每个叶类中。看起来像这样：

```
[Imported]
public class A
{
   public void Foo() {}
}
[Imported]
public class B
{
   public void Bar() {}
}
[Imported]
public class C
{
   public void Foo() {}
   public void Bar() {}
   public void Sproing() {}
} 
```

显然这会很快变得丑陋，但我可以自动化它。由于 JavaScript 的类型系统无论如何都非常快速和松散，这甚至可以在那里正常工作。而在 Script# 领域，导入库的使用者只需要做比他们应该做的更多的显式转换。还有其他我忽略的缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:13:00.477

当前不支持接口继承。它将在未来的版本中修复。

你可以定义：

```
interface A {
}
interface B {
}
class C : A, B {
} 
```

It does mean you'll end up having to define all members, even if stubs in C.

I haven't looked at Dojo in any depth, but potentially a better strategy will be to have a base class with methods shared across many of the widgets, and then derived widget types for each individual widget type. That would be something similar to the jQueryUI stuff that is in the script# repository.

# php - 我认为 Codeigniter 和 Foreach

> ID：14271243
> 
> 赞同：1
> 
> 时间：2013-01-11T03:34:43.423
> 
> 标签：php, codeigniter, foreach

呜呜呜我有这个功能

```
public function playerslist()
{
    $this->load->database();
    $data = $this->db->get('skaters')->result();
    $this->load->helper('url');
    $this->load->view('playerslist', array('data' => $data));
} 
```

以及我正在尝试做的事情是在我的视图中使用 foreach 来返回这样的数据

```
<?php 
    foreach($data as $row => $value){
        echo $row;
    }
?> 
```

它只返回 0 ......我做了一个

```
<?php 
    print_r($data);
?> 
```

它返回了这个....

```
Array ( [0] => stdClass Object ( 
    [id] => 1 
    [firstname] => Steve 
    [lastname] => Stamkos 
    [position] => F 
    [team] => TBL 
    [gp2013] => 0 
    [g2013] => 0 
    [a2013] => 0 
    [pm2013] => 0 
    [pim2013] => 0 
    [ppg2013] => 0 
    [ppa2013] => 0 
    [shg2013] => 0 
    [sha2013] => 0 
    [s2013] => 0 
    [s%2013] => 0 
    [fp2013] => 0 
    [gp2012] => 82 
    [g2012] => 60 
    [a2012] => 0 
    [pm2012] => 0 
    [pim2012] => 0 
    [ppg2012] => 0 
    [ppa2012] => 0 
    [shg2012] => 0 
    [sha2012] => 0 
    [s2012] => 0 
    [s%2012] => 0 
    [fp2012] => 0 
    [gp2011] => 0 
    [g2011] => 0 
    [a2011] => 0 
    [pm2011] => 0 
    [pim2011] => 0 
    [ppg2011] => 0 
    [ppa2011] => 0 
    [shg2011] => 0 
    [sha2011] => 0 
    [s2011] => 0 
    [s%2011] => 0 
    [fp2011] => 0 
    [gp2010] => 0 
    [g2010] => 0 
    [a2010] => 0 
    [pm2010] => 0 
    [pim2010] => 0 
    [ppg2010] => 0 
    [ppa2010] => 0 
    [shg2010] => 0 
    [sha2010] => 0 
    [s2010] => 0 
    [s%2010] => 0 
    [fp2010] => 0 
) ) 
```

我做错了什么，我`$data`在 foreach 中使用了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:41:20.290

它应该是这样的

```
foreach($data as $key=>$row)
{
    echo $row->firstname;
} 
```

因为 $data 是一个行数组。因此，在您的版本中， $row 是数组中行的**索引**，而 $value 是行本身。

# algorithm - 如何控制随机选择的概率？

> ID：14271245
> 
> 赞同：1
> 
> 时间：2013-01-11T03:35:24.220
> 
> 标签：algorithm, random, probability

我想从用户列表中随机选择一个用户，但是我希望VIP用户有更高的被选中的概率，如何实现这样的算法？

样本数据：

```
$users = array(
    array('name'=>'user1', 'is_vip'=>false),
    array('name'=>'user2', 'is_vip'=>false),
    array('name'=>'user3', 'is_vip'=>false),
    array('name'=>'user4', 'is_vip'=>false),
    array('name'=>'user5', 'is_vip'=>false),
    array('name'=>'user6', 'is_vip'=>true),
    array('name'=>'user7', 'is_vip'=>false),
    array('name'=>'user8', 'is_vip'=>false),
    array('name'=>'user8', 'is_vip'=>true),
    array('name'=>'user10', 'is_vip'=>true),
    array('name'=>'user11', 'is_vip'=>false),
    array('name'=>'user12', 'is_vip'=>false),
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T03:39:27.803

您可以通过从离散分布中抽样来解决此问题。根据是否为 ​​VIP 为每个不同的用户分配一个权重，然后使用加权随机抽样算法随机选择他们，但偏向于 VIP 用户。

为此有很多算法，其中许多算法快速且易于编码。网上有一篇[详细](http://www.keithschwarz.com/darts-dice-coins/)的文章，其中详细介绍了其中的许多内容。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:55:30.370

这很可能不是“正确”的方法，但您可以将它们分开：

```
foreach($users as $spUsers){
    if($spUsers['is_vip']==true){
        $splitUsers[0][]=array('name'=>$spUsers['name'],'is_vip'=>$spUsers['is_vip']);
    } else {
        $splitUsers[1][]=array('name'=>$spUsers['name'],'is_vip'=>$spUsers['is_vip']);
    }
}

function weightedrand($min, $max, $gamma) {
    $offset= $max-$min+1;
    return floor($min+pow(lcg_value(), $gamma)*$offset);
} 
```

gamma 1 是未加权的，较低的给出更多的较高的数字，反之亦然

```
$array_to_pick_from = weightedrand(0, 1, .5); 
```

$array_to_pick_from 将有一个数组来随机选择一个用户。

就像我说的那样，这可能根本不是最好的方法。但它应该可以解决问题，直到有人比我聪明得多。

我从这个答案中得到了加权随机数： [Generating random results by weight in PHP?](https://stackoverflow.com/questions/445235/generating-random-results-by-weight-in-php)

# rack - 使用机架 1.1.3 升级到 rails 2.3.15 时遇到问题

> ID：14271247
> 
> 赞同：0
> 
> 时间：2013-01-11T03:35:27.013
> 
> 标签：rack

从 rails 2.3.5 升级后，尝试为我的 rails 2.3.15 应用程序启动脚本/控制台时出现以下错误。这是否意味着问题在于 bundler 1.2.1 与 rack 1.1.3 不兼容？任何帮助将不胜感激。

usr/lib/ruby/gems/1.8/gems/bundler-1.2.1/lib/bundler/rubygems_integration.rb:157:in `gem': can't activate rack (~> 1.0.1), already activated rack-1.1.3\. Make sure all dependencies are added to Gemfile. (Gem::LoadError) from /home/developer/bigpink/vendor/rails/actionpack/lib/action_controller.rb:34 from /home/developer/bigpink/vendor/rails/activesupport/lib/active_support/dependencies.rb:156:in`require' 来自 /home/developer/bigpink/vendor/rails/activesupport/lib/active_support/dependencies .rb:156:in `require' from /home/developer/bigpink/vendor/rails/activesupport/lib/active_support/dependencies.rb:521:in`new_constants_in' from /home/developer/bigpink/vendor/rails/activesupport/lib/active_support/dependencies.rb:156:in `require' from /home/developer/bigpink/vendor/rails/railties/lib/commands/server.rb:2 from script/server:3:in`require' from script/server:3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:16:00.937

就我而言，问题通过以下步骤解决：

1.  删除了目录`$PROJECT_ROOT/vendor/rails`
2.  修改`RAILS_GEM_VERSION`于`config/environment.rb`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T16:23:50.063

我们使用这个过程在我们的 Heroku 应用程序上将 Rails 升级到 3.2.11（如此处所[报告](http://chris-augeri.com/blog/2013/01/08/late-night-just-might-work-guide-to-upgrade-ruby-on-rails-server-during-great-rails-vulnerability-of-2013/)）

```
stop – your Ruby on Rails (RoR) server
edit  – appropriate line in gem file to read [one of]:
    gem ‘rails’, ’3.2.11′
    gem ‘rails’, ’3.1.10′
    gem ‘rails’, ’3.0.19′
    gem ‘rails’, ’2.3.15′

run – gem update
run – bundle update
run - bundle install

test – rspec # or test-driven dev’t framework of choice
launch – rails s
test – # interact with Rails server & explore if all is well

run – git add .
run – git commit -a -m “upgrade Rails server to ver. [x.y.z]“
run - git push # to github or rcs of choice
run - git push heroku # or to deployment server of choice 
```

# linux - 对升级 gcc 或 binutils 的影响

> ID：14271249
> 
> 赞同：0
> 
> 时间：2013-01-11T03:35:31.307
> 
> 标签：linux, binary, gcc4

我想用 Red Hat Enterprise Linux 5.8 编译，gcc 是 4.1.2。但是愚蠢需要 gcc >=4.6。所以我需要将 gcc 升级到 4.6，也许是 binutils 等。如果新的工具链生成诸如 *.a *.so 之类的二进制文件，在旧的 Red Hat Enterprise Linux 5.8 上运行它们会带来任何问题或不稳定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:35:29.040

可能没有什么大麻烦（因为 GCC 4.1 和很快发布的 GCC 4.8 会产生兼容的代码），至少对于 C 代码是这样。

对于 C++ 代码，我认为存在不兼容性。当然，这`libstdc++`与编译器版本有关。有时它在实践中可能兼容，有时不兼容（但 C++ ABI 也略有变化）。而且这种不兼容性可能会蔓延到每个 C++ 库。

我相信你应该试试。如果您使用相同的最新 GCC 重新编译所有 C++ 依赖项，您可能会非常安全。所以你可以编译最新的 GCC，然后`folly`用它编译它的所有依赖项。

顺便说一句，我建议去最新的 GCC（今天是 4.7，几周后是 4.8）。

# css - 浏览器默认字体大小是否取决于 DPI？

> ID：14271252
> 
> 赞同：4
> 
> 时间：2013-01-11T03:36:02.347
> 
> 标签：css, browser, font-size, dpi

我偶然发现了[http://informationarchitects.net/blog/100e2r/](http://informationarchitects.net/blog/100e2r/)，一个主张使用浏览器 100% 字体大小作为正文文本的博客条目。我很惊讶文本声称该页面上的字体大小是浏览器默认大小，因为它比我预期的要大。

我从上面的链接中查看了正文的继承样式，如下所示：

```
font-size: 1.313em; 
```

根据我对样式表的理解，这意味着字体应该以浏览器默认大小的 131.3% 呈现。那么博客显示的字体大小是浏览器的默认大小是不正确的吗？

该公司的网站以苹果为重点，所以我认为问题的答案可能与 DPI 设置有关，因为苹果默认为 72，微软默认为 96。96/72 的值接近 1.313。

我将 Chrome 字体设置为默认大小 16。由于我运行的是 Windows，我认为这意味着 16 像素或 12 点。在 Mac 上，默认字体大小是否也是 16 像素，因此是 16 磅？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:14:48.503

在 2006 年写这篇文章时，他们有另一个设计，在存档[http://web.archive.org/web/20070706194102/http://www.informationarchitects.jp/100E2R/](http://web.archive.org/web/20070706194102/http://www.informationarchitects.jp/100E2R/)中找到它——你可以看到`font: 100%/1.45 Helvetica, Arial, Verdana, sans-serif;`它给出了 16px默认桌面浏览器:)

# java - 以编程方式访问在 Logback 中定义的属性

> ID：14271253
> 
> 赞同：9
> 
> 时间：2013-01-11T03:36:08.850
> 
> 标签：java, logging, logback

我有一个正在构建的管理控制台，我想显示`Logback`为我的应用程序创建的日志。但是，这些日志的存储位置因环境而异。我有几个属性文件定义了日志的存储位置：

```
<configuration>
  <property resource='log.properties'/>
  <property resource='log.${ENV:-prod}.properties'/>

  <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${log.dir}/sync.log</file>
  ...
</configuration> 
```

我想`${log.dir}`从`Logback's`Java API 中找到价值。我尝试了以下方法，但它没有在资源中定义的任何属性。例如：

```
 LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();
 String logDir = loggerContext.getProperty("log.dir"); // this always returns null 
```

所以我的问题是我应该使用什么 API？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T22:32:23.537

默认情况下，属性定义在“本地”[范围内](http://logback.qos.ch/manual/configuration.html#scopes)。但是，您可以强制属性具有上下文范围，在这种情况下，很容易获得属性的值：

```
 LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();
 String val = lc.getProperty(aString); 
```

在“上下文”范围内定义属性被认为有点笨拙。您可以在上下文范围内仅定义一个属性，而不是在上下文范围内定义所有/许多属性。这是一个例子：

```
<configuration>
  <!-- get many props from a file -->
  <property resource='log.properties'/>
  <-- set only one to be in context scope -->
  <property scope="context" name="log.dir.ctx" value="${log.dir}" />
  ...
</configuration> 
```

然后，您可以获得您正在寻找的价值：

```
 LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();
 String val = lc.getProperty("log.dir.ctx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-13T15:48:08.010

属性也定义在 中`LoggerContextVO`，您可以像这样获取定义的属性：

```
LoggerContext context = (LoggerContext) LoggerFactory.getILoggerFactory();
LoggerContextVO loggerContextRemoteView = context.getLoggerContextRemoteView();
Map<String, String> propertyMap = loggerContextRemoteView.getPropertyMap();
String loggingFile = propertyMap.get("log.dir.ctx"); 
```

# android - 如何检查离线清单是否已加载到移动设备上

> ID：14271254
> 
> 赞同：0
> 
> 时间：2013-01-11T03:36:13.350
> 
> 标签：android, html, google-chrome, mobile-safari, offline-caching

这是我第一次使用 MVC 3 为具有离线功能的 HTML5 编码。虽然我遇到了一个问题，即移动设备似乎没有缓存并且离线时无法从缓存加载。

我有我的标题设置：

```
<!DOCTYPE html>
<html manifest="@Url.Content("~/offline.manifest")"> 
```

我的offline.manifest 文件位于应用程序的根目录。由于我的应用程序有一个`/Account/Login/Index`路由，我将它添加到我的清单文件中：

```
CACHE MANIFEST
#version 0.0452
CACHE:

#Pages
Account/Login 
```

也尝试`~/Account/Login`了页面。

好消息是，我的清单文件适用于 Chrome。所有文件都已加载并被缓存。但是，这对于我的移动设备来说并不相同。

我的 iPhone 运行 5.1.1 和 Nexus S 在 ICS 上运行 Chrome 离线时似乎没有从缓存中加载。我只是关闭了 Wifi 收音机并刷新了页面，但 Safari 和 Chrome 没有从缓存中加载。

我在这里错过了什么吗？任何线索将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:41:11.003

感谢 iPhone 的内置控制台日志，我发现我的 IIS 正在以不兼容的 MIME 类型提供清单文件。

我改变了一些东西。首先，我将缓存文件重命名为`cache.appcache`并在 IIS 中添加了一个新的 MIME 类型，用于扩展`.appcache`名为`text/cache-manifest`.

在我做出这些更改并重新加载我的页面后，Mobile Safari 缓存了我的页面。Chrome for Android 现在也运行良好。

# oracle - OBIEE：如何快速重新加载rpd文件？

> ID：14271256
> 
> 赞同：0
> 
> 时间：2013-01-11T03:36:27.263
> 
> 标签：oracle, obiee

我是oracle BIEE的新手。我的开发环境已经安装，项目有点大。现在正在使用多用户开发进行开发。当一个开发人员将rpd发布到网络并想要测试数据时会出现问题,服务器重新加载rpd文件太费时间了，我等不及了！当多人想测试rpd文件时，e，受不了了……有没有其他方法可以解决这个问题？或者如何制作biee服务器快速重新加载rpd文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:14:21.923

如果不了解您的设置，很难具体说明，但这里有一些一般性建议：

*   停止服务时，OBI 将等待所有正在运行的查询完成，然后再停止服务，因此在尝试执行此操作之前，请确保没有任何东西在运行。

*   确保您只重新启动 BI 服务器组件，如果您只是更改 RPD，则无需等待其他服务重新启动（如果您使用 11g，则通过 EM 部署应该意味着无论如何都会发生这种情况，所以你不必担心）。

*   如果您使用的是 11g，则可以[通过创建补丁来尝试增量更新](http://www.rittmanmead.com/2010/07/obiee-11gr1-incremental-patches-to-the-rpd/)。

*   检查您正在运行的硬件是否足够，最重要的是您有足够的 RAM，因此它在加载 RPD 时不必分页到磁盘。

*   从 RPD 中删除任何未使用的内容以使其更小。

# php - 列名必须是字符串或数组 yii

> ID：14271257
> 
> 赞同：6
> 
> 时间：2013-01-11T03:36:47.403
> 
> 标签：php, yii

我在访问 yii 的 Web 应用程序时遇到了一些问题。我已配置为与所有者的设置相同，但是当我尝试访问时，出现错误“列必须是字符串或数组”。我该如何解决？提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T04:05:13.393

报告错误消息时，获得准确的错误消息会有所帮助。实际的错误消息是：“列**名**必须是字符串或数组”。使用确切的字符串，您可以搜索框架文件以找到提及它的位置。

看起来某处的某些方法正在将无效的列名传递给`createInCondition`CDbCommandBuilder 的方法。

参见第 722 行：[https ://github.com/yiisoft/yii/blob/1.1.13/framework/db/schema/CDbCommandBuilder.php](https://github.com/yiisoft/yii/blob/1.1.13/framework/db/schema/CDbCommandBuilder.php)

查看调用该方法的几个实例，我猜您在某处有一个没有主键的数据库表。这是问题的一种可能解释。其他解释将需要您提供更多详细信息。

提供错误页面在调试模式下为您提供的堆栈跟踪以及表模式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-16T03:58:46.173

当您的表中没有主键并且您尝试进行更新时，就会发生这种情况。我遇到了这个问题，因为我的表中有一个复合主键。在我想更新模型之前，我在所有操作上都得到了很好的处理。

只需添加一个 int 主键，使用自动增量将其称为“id”到您的表中。它应该可以解决问题。

在测试之前，请务必禁用模式缓存（如果您正在使用它）。在您的架构缓存过期之前，更改不会生效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-11T07:47:01.840

也许你`primary key`的桌子上没有。如果你使用 $model->save() 方法保存或使用 $model->update() 方法（$model 是 CActiveRecord 实例），你会得到这个错误。

因为 CActiveRecord 中的方法更新使用主键来更新（[在这里](https://github.com/yiisoft/yii/blob/1.1.14/framework/db/ar/CActiveRecord.php#L1115)阅读更多 ）

源代码：framework/db/ar/CActiveRecord.php#1115

```
if($this->_pk===null)
        $this->_pk=$this->getPrimaryKey();
$this->updateByPk($this->getOldPrimaryKey(),$this->getAttributes($attributes));
$this->_pk=$this->getPrimaryKey(); 
```

您可以使用方法`updateAll()`代替`update()`或`updateByPk()`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-28T13:57:06.547

看看这个链接

[http://www.yiiframework.com/forum/index.php/topic/3887-cdbexception-column-name-must-be-either-a-string-or-an-array/](http://www.yiiframework.com/forum/index.php/topic/3887-cdbexception-column-name-must-be-either-a-string-or-an-array/)

您的表似乎没有 a`primary key`或主键没有很好地恢复，这通常是由损坏的备份文件引起的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-03T19:51:43.917

如果您忘记添加返回值，您将显示错误。简单的例子，使用这种方法的模型将在 PK 上返回错误

```
...

public function relations()
{
}

... 
```

您必须添加返回值。

```
/**
 * @return array
 */
public function relations()
{
    return array();
} 
```

如果您不使用此类方法，则应删除它们，或添加“默认返回值”。否则，它会给出与主键或其他数据库问题相同的错误（因为模型读取无效数据并且并非所有应有的东西）。

# scope - MDX：如何在计算成员中从 ROOT() 返回的 TUPLE 中删除 MEASURES 维度

> ID：14271258
> 
> 赞同：0
> 
> 时间：2013-01-11T03:36:48.637
> 
> 标签：scope, mdx, multidimensional-array

我想在所有尺寸的范围内获得重量或部分与总的比例，所以我尝试了这个：

```
SCOPE([MEASURES].[Weight]);
    THIS = [MEASURES].[Some Value] / ([MEASURES].[Some Value], ROOT());
    FORMAT_STRING(THIS) = "#,##0.00";    
END SCOPE; 
```

但这会返回

**#Error MdxScript(Performance) (3713, 16) 'Measures' 层次结构在元组中出现多次。**

显然，因为[ROOT()](http://msdn.microsoft.com/en-us/library/ms146076.aspx)返回所有维度，包括 MEASURES 一个。请问我如何从上述声明中删除它？

我很确定我应该使用[EXTRACT](http://msdn.microsoft.com/en-us/library/ms145980.aspx)函数，但我看不出语法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:20:01.127

这是一个技巧：

```
THIS = [MEASURES].[Some Value] / SUM(ROOT(), [MEASURES].[Some Value]); 
```

# python - Python 随机 随机

> ID：14271260
> 
> 赞同：1
> 
> 时间：2013-01-11T03:37:00.580
> 
> 标签：python, python-2.7

ho我使随机数低于之前的随机数。

```
 if Airplane==1:
 while icounter<4:
    ifuelliter=random.randrange(1,152621)
    #litter/kilometer
    LpK=152620/13500
    km=LpK*ifuelliter

    ipca=random.randrange(0,50)
    ipcb=random.randrange(0,50)
    ipcc=random.randrange(0,812)

    #3D space distance calculation
    idstance= math.sqrt((icba-ipca)**2 + (icbb-ipcb)**2 + (icbc-ipcc)**2)

    totaldist=km-idstance

    if totaldist>0:
          print "You have enoph fuel to get to New York AirPort"
          print ifuelliter,LpK,km,ipca,ipcb,ipcc,idstance
          icounter=3

    if totaldist<=0:

         print "You dont have enoph fuel to get to New York AirPort please go to the nearest one or you will die"
         print ifuelliter,LpK,km,ipca,ipcb,ipcc,idstance
         icounter=icounter+1 
```

我的意思是“ipca、ipcb、ipcc”，我需要他们成长，而不是其他数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:22:10.673

只需将 randrange 的第二个参数设置为之前的值：

```
import random
a = random.randrange(0,50)
b = random.randrange(0,a)
while b > a:
    b = random.randrange(0,a) 
```

顺便说一句，如果您的代码开头的缩进样式要小心

```
if Airplane == 1:
while .... 
```

应该

```
if Airplane == 1:
    while .... 
```

# algorithm - 如何排列 N 个矩形以覆盖最小面积

> ID：14271261
> 
> 赞同：7
> 
> 时间：2013-01-11T03:37:02.303
> 
> 标签：algorithm, math, area, rectangles

> **可能重复：**
> [以相当优化的方式打包矩形所需的算法](https://stackoverflow.com/questions/1213394/algorithm-needed-for-packing-rectangles-in-a-fairly-optimal-way)

我有*N*个矩形，每个矩形的大小都是随机的（随机宽度和高度）。所有矩形都平行于 X 和 Y 轴。我正在寻找一种算法，它可以帮助我并排排列这些矩形，使生成的边界矩形具有最小面积，并且输入矩形周围/之间的潜在间隙尽可能小。矩形不能旋转，也不能相互重叠。

（我需要这些来自动排列游戏精灵，这样我就可以创建精灵表并从动画师那里获得的各种图像中保存精灵位置。）

例如：

```
+---+   +----------+
| 1 |   |    2     |
+---+   +----------+                 +----------+..           +---+----------+
                                     |    2     |..           | 1 |    2     |
+--------+                ===>       +--------+-+-+    vs     +---+----+-----+
|        |                           |        | 1 |           |        |......
|    3   |                           |    3   +---+           |    3   |......
+--------+                           +--------+....           +--------+......

                                       Unused: 8                 Unused: 18 
```

图中未使用的空间由点 (.) 标记。由于第一个结果的边界矩形具有较小的未使用空间，因此最好找到输入矩形的这种排列。

是否已经有一种算法可以帮助解决这个问题？我做了很多谷歌搜索，但大多数结果都与找到最小边界矩形或查找 N 个矩形是否覆盖预定区域有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:44:11.597

[什么算法可以用于以相当优化的方式将不同大小的矩形打包成最小的矩形中](https://stackoverflow.com/questions/1213394/algorithm-needed-for-packing-rectangles-in-a-fairly-optimal-way)建议的解决方案？看起来不错，但我会稍微改变一下：与其贪婪地将边界框扩展到最小区域，不如将其贪婪地扩展到最小区域，*留下大于剩余矩形使用的区域的空间*。此外，按最大尺寸而不是最大面积选择下一个矩形。

这应该在早期为它提供更多空间，并防止它总是在最后一分钟用完空间并留下大部分空白的余量。

# c# - 设置文件路径以引用解决方案或项目根目录下的文件

> ID：14271263
> 
> 赞同：2
> 
> 时间：2013-01-11T03:37:21.710
> 
> 标签：c#

我希望有人能够启动我的解决方案，并在程序中运行它并将这个 csv 放在项目的根目录中，以便它在我将读取这个 csv 文件的方法中拾取它。

```
File.ReadLines(filePath).Select(a => a.Split(';')); 
```

问题是，不知道如何得到这个，如果有人将我的解决方案复制到他们的 C 驱动器，这个文件路径应该是什么样子......我希望他们能够启动这个解决方案，运行控制台应用程序，因为这个文件已经和我的项目在同一个目录中，只想通过常量对文件名进行硬编码，而不用担心，这个文件在哪里......在他们复制它以进行测试后，它总是会在这里。

那么我应该怎么做，将 .csv 包含在我的 .net 项目中，然后制作常量“filename.csv”？我试过了，不起作用。

我最终失败了：

```
 File.ReadLines("someFile.csv").Select(a => a.Split(';')); 
```

我已经将该文件包含在我的项目中......运行程序的主控制台项目。

这是我的解决方案结构

```
SomeTest (.NET solution and it's the root solution folder)
    SomeTest (console project)
       Constants.cs
    SomeTest.BL
    SomeTest.DL
       filename.csv 
```

我已将实际的 csv 移至我的 DL，因为我将其用作测试数据源。

因此，当他们将我的 SomeTest 解决方案文件夹复制到他们的 c 驱动器时，无论他们放在哪里，我都需要该常量来阅读`C:\\root path to wherever they copied SomeTest folder to\\SomeTest.DL\\filename.csv` 我的意思？我需要在根路径之后对 SomeTest.DL 进行硬编码..但我无法获得根路径，在我的情况下是 C:\www 并抓取该部分，然后我将附加例如 \SomeTest.DL \filename.csv" 字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:11:34.997

我认为最安全的选择是将 csv 文件添加到您的项目中并将其设置`BuildAction`为 None 并设置`Copy To Output Directory`为复制。

![在此处输入图像描述](../Images/f7189f98f008dff878645756c7664cc0.png)

然后用户可以随时使用 访问`File.ReadLines("MyDataCsv.csv")`，此外，您可以从 Visual Studio IDE 查看/编辑 csv，我认为其他程序员会想要。

# google-maps - iFrame 上的嵌入框阴影（Google 日历）

> ID：14271264
> 
> 赞同：0
> 
> 时间：2013-01-11T03:37:34.830
> 
> 标签：google-maps, iframe, css, insets

我试图在谷歌日历上放置一个嵌入框阴影，除非 z-index 为负数，否则似乎无法显示它。它显示，但随后用户无法单击/使用日历。我看了看：[在 Google Maps 元素上添加插入框阴影，](https://stackoverflow.com/questions/11264240/add-inset-box-shadow-on-google-maps-element) 但它的 z-index 设置为负数。我把所有东西都排成一行，直到我弄清楚所有东西。

```
<div style="box-shadow:inset 0 0 10px #000000; 
            -moz-box-shadow:inset 0 0 10px #000000; width: 900px;">

   <iframe src="https://www.google.com/calendar/embed?showTz=0&amp;height=600&amp;wkst=1&amp;bgcolor=%23ccffff&amp;src=756r34h4d6aqhta6fmaqkijm9k%40group.calendar. google.com&amp;color=%23853104&amp;ctz=America%2FNew_York" style="border-width:0" width="900" height="600" scrolling="no"></iframe>
</div> 
```

我可以看到它背后突然出现的影子。我尝试过双重包装，将样式放在 iframe 等中，但无法让它为我的生活工作。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-20T00:49:57.840

需要使用相对定位和 z-index 属性。

试试看，祝你好运！

```
.the-div {
    position: relative;
    box-shadow: inset 0 0 10px #000;
}

.the-iframe {
    position: relative;
    z-index: -1;
} 
```

随意放置...内联 CSS 或外部，但使用上面的代码作为尊重的元素

# jquery - 如何在选中复选框时发出警报告诉用户使用 Jquery 选择相应的下拉菜单？

> ID：14271265
> 
> 赞同：0
> 
> 时间：2013-01-11T03:37:39.943
> 
> 标签：jquery

大家好，我有一些复选框，每个复选框都有与之对应的下拉列表..我想做的是

```
 **when a user checks a checkbox without selecting the dropdown i have to give an alert saying select any value..
    **when a user selects value from the dropdown make the corresponding checkbox checked
    **and if the user unchecks the checkbox set the dropdown value to default 
```

我的 html 看起来像这样

```
 @foreach(var item in Model.Resources)
       {
       <div class="select">
          <label class="label">
            <input type="checkbox" value="@item.Text" id="@item.value"/>
          </label>
         <div>
             <select id="quantity">
                <option value="">--select Quantity--</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>

            </select>
        </div>
       </div>  
       } 
```

任何人都可以帮我做这件事吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:55:29.020

这是我的第一篇 Stack Overflow 帖子，我还是个初学者。我想我会尝试一下，到目前为止这似乎有效。我使用了自己的表格和 ID，但我认为保持接近：

```
<form action="" method="post" name="order" id="order">
<fieldset>
    <div>
    <input name="check1" type="checkbox" id="check1" value="checked">
    </div>
    <div>
        <label for="country" class="label">Country</label>
        <select id="menu1">
            <option value="">--select Quantity--</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>
    </div>
    <div>
    <input id="webform_submit_button" value="Submit!" type="submit" class="submit" data-default-text="Sign up!">
    </div>
</fieldset>
</form> 
```

这是我添加的 Jquery：

```
<script>
$(function() {
    function formStuff($check,$menu) {
        $check.click(function() {
            var checkIfChecked = $check.attr('checked');
            if (checkIfChecked == 'checked') {
                if ($menu.val("")) {
                    alert("Please select a value");
                    $check.attr('checked',false);
                }
            } else {
                $menu.val('');
            }
        }); //end click
        $menu.click(function() {
            var hasValue = $menu.val();
            if (hasValue != '') {
                $check.attr('checked',true);
            } else {
                $check.attr('checked',false)
            }
        }); //end click
    }
    formStuff($('#check1'),$('#menu1'));
}); //end ready
</script> 
```

我没有在提交时添加验证，但由于这不是问题的一部分，我想我保持简单。希望这可以帮助！*更新为一个函数，因此您可以将其应用于您的其他表单元素。

# android - 重新安装 Android SDK 时出错

> ID：14271268
> 
> 赞同：1
> 
> 时间：2013-01-11T03:37:55.163
> 
> 标签：android, development-environment

我正在使用基于 Linux 的开发环境所需的所有工具创建一个 USB，包括 Android SDK。当我运行时`./android`，我收到以下错误

```
Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/addons_list-2.xml, reason: invalid character at position 2 in 08
Fetched Add-ons List successfully
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/repository-7.xml, reason: NumberFormat invalid character at position 2 in 08
Done loading packages.
Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml 
```

“位置 2 的无效字符”是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:10:16.943

这意味着您有一个不受支持的 JVM，可能是 Gij。安装 OpenJDK JRE 或~~Sun~~ Oracle JRE，并确保`java`在您的路径上就是那个。

感谢问题 37989 中的[ch…</a>](http://code.google.com/u/114249146237177022085/) [：tools/android update sdk --no-ui 不起作用](http://code.google.com/p/android/issues/detail?id=37989)（我确认）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T15:21:38.640

我找到了一个在 linux 上对我有用的解决方案。

1）检查你的java版本：java -version，对我来说出现这个java版本“1.5.0”gij（GNU libgcj）版本4.6.3

当我安装了 jdk1.6.0_24 版本时，我想在执行 java -version 时拥有该版本，所以我查看了 PATH 变量（echo $PATH），我意识到包含我的 jdk1.6.0_24 是在路径的尽头。因此，我将 jdk1.6.0_24 的路径包含在 PATH 变量的开头。

现在当我运行：java -version，出现：java version "1.6.0_24"

2) 现在转到您的 Android sdk 文件夹 (.../sdk/tools/) 并运行 ./android

在我的情况下，Android SDK 管理器打开没有问题。

我希望它有帮助！

什么时候

# php - 正在写入的部分 HTML 格式文本

> ID：14271269
> 
> 赞同：0
> 
> 时间：2013-01-11T03:37:57.860
> 
> 标签：php, html, file, text, fwrite

我有一个有趣的问题。我有下面的代码`$_POST['content']`和`$_POST['page']`. 我试图写的“内容”是“HTML”（见下文）但是，实际写的内容是

```
<footer> 
        <div class="grid_16"> 
                <div class="wrapper"> 
                        <span class="right"><!-- {%FOOTER_LINK} --></span> 
```

即：缺少大部分内容。

任何指导将不胜感激

```
<?php

if (!$_POST['content'] && !$_POST['page'])
    return false;

$content = $_POST['content'];
$page = $_POST['page'];

$fp = fopen('content/'.$page, 'w');

fwrite($fp, htmlspecialchars($content));

fclose($fp);

?> 
```

`$_POST['content']`是：

```
<footer> 
    <div class="grid_16"> 
        <div class="wrapper"> 
            <span class="right"><!-- {%FOOTER_LINK} --></span> l
            la-panacee &copy; 2013 &nbsp;|&nbsp; 
            <a href="privacyStatement.php">Privacy policy</a>
        </div> 
    </div>
 </footer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:45:11.957

截断 HTML 的原因可能是因为 $_POST 变量中存在未编码的 & 符号。

**[RFC 2396：统一资源标识符 (URI)：通用语法](http://www.ietf.org/rfc/rfc2396.txt)**

```
2.2\. Reserved Characters

   Many URI include components consisting of or delimited by, certain
   special characters.  These characters are called "reserved", since
   their usage within the URI component is limited to their reserved
   purpose.  If the data for a URI component would conflict with the
   reserved purpose, then the conflicting data must be escaped before
   forming the URI.

      reserved    = ";" | "/" | "?" | ":" | "@" | "&" | "=" | "+" |
                    "$" | ","

   The "reserved" syntax class above refers to those characters that are
   allowed within a URI, but which may not be allowed within a
   particular component of the generic URI syntax; they are used as
   delimiters of the components described in Section 3. 
```

# iphone - ASIHTTPRequest 图像上传不适用于某些图像

> ID：14271270
> 
> 赞同：0
> 
> 时间：2013-01-11T03:37:58.973
> 
> 标签：iphone, xcode, image, asihttprequest

当我尝试将图像上传到 php 脚本时，我在使用 ASIHTTPRequest 库时遇到了一个奇怪的问题。我已经正确实现了 ASIHTTPRequest，因为 php 脚本确实从 iphone 模拟器接收 POST 数据，但仅适用于我的测试集中的一些图像。还有其他图像不通过 POST。

所有图像均从 Facebook 检索，并且是 jpg 或 png 格式。我已经在这两种类型的图像上测试了我的代码，但这并不重要，因为我在 iphone 应用程序中使用 PNGRepresentation 方法将图像转换为 NSData。我还测试了图像的大小，这不是问题（范围从 600x600 到 1200x1200）。

破坏 ASIHTTPRequest 的图像对我来说似乎并不特别，而且我无法识别错误。下面是我的一些实现：

**iPhone 实施：**

```
[RegisterRequest setData:profilePicturePNG withFileName:filename andContentType:@"image/png" forKey:@"profilePicture"];
[RegisterRequest addRequestHeader:@"Content-Type" value:@"image/png"];
[RegisterRequest setDelegate:self];
[RegisterRequest startAsynchronous]; 
```

**PHP实现：**

```
echo "Upload: " . $_FILES["profilePicture"]["name"] . "<br>";
echo "Type: " . $_FILES["profilePicture"]["type"] . "<br>";
echo "Size: " . ($_FILES["profilePicture"]["size"] / 1024) . " kB<br>";
echo "Temp file: " . $_FILES["profilePicture"]["tmp_name"] . "<br>"; 
```

在这个测试中，PHP 实现应该回显文件属性。正如我之前所说，对于大多数图像，我确实得到了回声。但是有些图像的名称和类型没有通过，并且大小报告为 0kb。

有什么建议么？我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:45:35.543

我想对于图片上传你不应该使用 ASIHTTPRequest

```
 NSString *requestStr = [yourPHPSCriptURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
responseString = nil;

NSURL *requestUrl = [[NSURL alloc] initWithString:requestStr];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:requestUrl];

[request setPostFormat:ASIMultipartFormDataPostFormat];
[request addPostValue:@".png" forKey:image_content_type];  //Use this if you want//
[request setShouldAttemptPersistentConnection:YES];
[request setData:yourPhotoData withFileName:@"user_image_byte.png" andContentType:@"image/png" forKey:@"user_image_byte"];

[request startSynchronous]; 
```

我将图像作为字节流发送，然后在 asp.net 中将其转换回图像。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:54:51.257

供您参考，ASIHTTPRequest 已被弃用，但您可以在此处使用 AFNetworking，您可以从中参考。 [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)还有这个例子

```
-(IBAction)uploadButtonClicked:(id)sender{

NSData *imageToUpload = UIImageJPEGRepresentation(mainImageView.image, 90);

AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://www.THESERVER.com"]];

NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"/PROJECT/upload.php" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
[formData appendPartWithFileData: imageToUpload name:@"file" fileName:@"temp.jpeg" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
NSString *response = [operation responseString];
NSLog(@"response: [%@]",response);
[MBProgressHUD hideHUDForView:self.view animated:YES];
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
[MBProgressHUD hideHUDForView:self.view animated:YES];
if([operation.response statusCode] == 403){
    NSLog(@"Upload Failed");
    return;
}
NSLog(@"error: %@", [operation error]);

}];

[operation start];
} 
```

# jquery - jQuery 插件开发：如何正确使用可链接性？

> ID：14271275
> 
> 赞同：3
> 
> 时间：2013-01-11T03:38:42.997
> 
> 标签：jquery, jquery-plugins, plugins, method-chaining

我正在尝试制作一个简单的 jQuery 插件。我想称它为这样链接的方法：

```
$("#div").myPlugin({
    /* options */
}).add(".span", {
    /* options */
}).add(".span", {
    /* options */
}).run(); 
```

我为这样的调用找到了一些基本教程：

```
$("#div").myPlugin("add", "foo"); 
```

或者

```
container = $("#div").myPlugin();
container.myPlugin.add("foo");
container.myPlugin.run(); 
```

但这不是我想要的。基本教程几乎到处都是一样的，我不知道我必须用谷歌搜索什么。

jQuery 教程展示了如何[维护可链接性](http://docs.jquery.com/Plugins/Authoring#Maintaining_Chainability)。

我知道的唯一方法是为每种方法编写一个插件，但这对我来说似乎很脏。

```
jQuery.fn.myPlugin = function(); // returns this
jQuery.fn.myPluginAdd = function(); // returns this
jQUery.fn.myPluginRun = function();
$("#div").myPlugin().myPluginAdd("item1").myPluginRun(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:38:30.947

Bombastic，对于插件，网上有最好的教程如下：

[https://tutsplus.com/author/jeffreyway/?q=true&filter_topic=35](https://tutsplus.com/author/jeffreyway/?q=true&filter_topic=35)

我看过他的 jquery 插件视频。真的很高兴看到并从中学习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:55:27.847

正如您所说的“这对我来说似乎很脏”，这正是您提到的 jQuery 页面所说的：

> 在任何情况下，一个插件都不应该在 jQuery.fn 对象中声明多个命名空间。

```
(function( $ ){

  $.fn.tooltip = function( options ) { 
    // THIS
  };
  $.fn.tooltipShow = function( ) {
    // IS
  };
  $.fn.tooltipHide = function( ) { 
    // BAD
  };
  $.fn.tooltipUpdate = function( content ) { 
    // !!!  
  };

})( jQuery ); 
```

可链性就是你的回报。如果你想从你的插件中链接方法，你必须返回一个包含你的方法的对象。小提琴：http: [//jsfiddle.net/ma4nj/](http://jsfiddle.net/ma4nj/)

如您所见，当您第一次调用时`yourPlugin()`，会返回一个包含您的插件方法的对象。这样，您可以与类`yourPlugin`中的其他方法链接`Methods`。

如果您查看`add`() 函数，您可以看到我再次返回了实例，所以这里没有什么新内容，正如我刚刚解释的那样，我这样做是为了使这些方法是可链接的。

试一试，尝试添加自己的方法。请记住，您将无法使用该技术将您的插件方法与 jQuery 方法链接起来。实际上，如果您在插件中添加一个方法来禁用插件链，如下所示：http: [//jsfiddle.net/ma4nj/1/](http://jsfiddle.net/ma4nj/1/)

可能有更好的方法来做我所做的事情，但我希望无论如何都会有所帮助。

# extjs - ExtJS4.0 在控制器中读取存储时限制 5000 条记录

> ID：14271276
> 
> 赞同：0
> 
> 时间：2013-01-11T03:38:46.073
> 
> 标签：extjs

我有 10000 条记录的网格。我试图通过读取填充网格的存储来检索网格数据。但我无法从商店中读取所有数据。相反，仅检索了 5000 条记录。ExtJs4 有限制吗？请在下面的代码片段中找到。

在此处输入代码

```
 onDownloadXLS : function(btn, e) {
        var store = this.getGridStoreStore();
        alert(store.getCount());// This is returning only 5000 rows not 10000.
        var records = store.data.items.map(function(r){ return r.data });
    }

    Ext.define('MyApp.store.GridStore', {
    extend: 'Ext.data.Store',
    model: 'MyApp.model.GridModel',
    proxy: {
        type: 'ajax',
        url: "data/test.json",
        reader: {
            type: 'json', 
            root: 'performance'
        }
    },
    sorters: {property: 'uploadedDate', direction: 'DESC'},
    groupField: 'uploadedDate',
    autoLoad: true
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:31:56.883

我在这里能给你的唯一答案是浏览器应用程序永远不应该加载这么多的数据。如果您被迫加载这么多数据，您就会遇到设计问题。

在网格的情况下，您应该使用分页或无限滚动（使用缓冲存储）并将所有排序和搜索/过滤操作委托给服务器。

基本上没有限制。看到这个具有 6000 多条记录**[的无限滚动的 Sencha 示例。](http://docs.sencha.com/ext-js/4-1/#!/example/grid/infinite-scroll.html)**

# php - 如果日期比所需日期早 24 小时，则回显

> ID：14271278
> 
> 赞同：1
> 
> 时间：2013-01-11T03:38:47.053
> 
> 标签：php, date, datetime, timestamp, unix-timestamp

我不知道该在搜索栏中放什么，因为我不知道该怎么称呼它，如果我有重复的主题，那我就不好了。

我真的不知道该怎么说，但我举个例子。

假设在2013 年**1 月 20 日 09:30:00**有一个事件。今天的日期是**2013 年 1 月 11 日 15:25:00**。

我想在 2013 年 1 月 20 日的活动前一天回应一些事情。（**活动前 24 小时**）

就像在 2013 年 1 月 19 日，我将收到或回应一些应该提醒我明天是事件发生的事情。

好吧，我有这段代码，我正在处理，但仍然感觉很不对劲。

```
$start_ts = strtotime("2013-01-10 20:15:00"); //
$now_ts = strtotime("now");
$result_ts = $start_ts - $now_ts;
$reminder = ( 60 * 24 ) * 60; // 24 hours period

if ($result_ts <= $reminder) {
    echo "Today's a date before the event day";
} else {
    echo "Event is already finished";
} 
```

**输出是：**

![在此处输入图像描述](../Images/510a9d9898c64697eabc979a0a20b511.png)

它应该回显“**事件已经完成**”

老实说，我在这里迷失了方向。希望你们帮助我，虽然会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:51:25.203

这是魔术：

```
if ($result_ts <= $reminder && $result_ts > 0) { //blah blah } 
```

# php - 使用php的负值

> ID：14271280
> 
> 赞同：0
> 
> 时间：2013-01-11T03:39:07.663
> 
> 标签：php

我有 as 的值`$title =10`，我想用 减去它`01`。所以我的代码是：

```
echo  $minus = round(($title - 01),2); 
```

我想要结果`$minus = 09`，但这段代码不像这样它仍然有结果`$minus=9`。请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:41:48.363

问题是 PHP 不是强类型的，它`round()`返回一个数字，它会自动去除前导零。尝试：

```
$minus = "0" . round(($title - 01),2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:43:05.877

PHP 正在评估以 0 为前缀的数字的基值—— 04 和 01 分别是 4 和 1。

如果您希望它们以前导 0 输出，请尝试使用[数字格式化程序](http://php.net/manual/en/function.number-format.php)或[字符串填充](http://php.net/manual/en/function.str-pad.php)或简单地将它们附加到字符串“0”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T03:44:23.987

发生的事情是 round() 返回一个整数。这意味着它之前不会有任何 0。如果您希望它在它之前返回 0，请尝试

[str_pad](http://php.net/manual/en/function.str-pad.php) (round(($title - 1), 2), 2, "0");

如果它只有 1 个数字，这将使它总是在数字前附加一个 0，但如果它是 10 或 15 之类的，它不会附加一个 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T03:44:30.467

```
echo str_pad(intval($title) - 1, 2, "0", STR_PAD_LEFT); 
```

如果结果只有一位，这将用 0 填充您的结果；否则，它不会填充。对于前导零，您可以将 2 替换为`strlen($title)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T03:46:00.727

试试这个..

```
$i=04-01;
echo sprintf('%02s', $i); 
```

# reverse-engineering - 删除导入到企业架构中的重复类

> ID：14271290
> 
> 赞同：2
> 
> 时间：2013-01-11T03:40:39.297
> 
> 标签：reverse-engineering, enterprise-architect

我遇到了与此问题中描述的相同的[问题](https://stackoverflow.com/questions/4974836/enterprise-architect-how-to-synchronize-with-source-code-source-model-when)。

我正在努力删除重复的类（数百个），因为我无法全部删除并再次导入，因为所有序列图都会受到影响。我使用 EA 6.5。

# javascript - Chosen.js - 是否可以限制所选项目的数量？

> ID：14271296
> 
> 赞同：5
> 
> 时间：2013-01-11T03:40:49.497
> 
> 标签：javascript, jquery-chosen

我有一个客户希望让用户可以从列表中选择最多 5 个附加选项。我喜欢 Chosen.js 的概念，但是如何限制选择呢？我想一种解决方案是使用 onChange 来计算选定的数字，然后禁用剩余的数字，但是有没有更简洁的解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T08:47:05.583

Chosen 提供了一个`max_selected_options`允许您执行此操作的方法：

```
$(".chzn-select").chosen({ max_selected_options: 5 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-12T19:17:47.280

max_selected_options: 5 在我的情况下不起作用。所以我固定如下。

```
var countSelect = 0;
$(".chosen-select").chosen().change( function (e, params) {         
    if(params.deselected != undefined) { countSelect--; } 
    if(params.selected != undefined) { countSelect++; } 
    if(countSelect > 3) {           
        $('.chosen-select option[value="'+params.selected+'"]').attr('selected', false);
        $(this).trigger('chosen:updated');
        countSelect--;
    } 
}); 
```

尝试一下。它的工作非常顺利。

# android - cocos2d-x如何在android上播放背景音乐

> ID：14271303
> 
> 赞同：0
> 
> 时间：2013-01-11T03:41:21.700
> 
> 标签：android, cocos2d-x

我知道如果'资源'下的音乐文件，它可以很好地工作。但是现在，'/data/' 目录下的音乐文件。不能玩！为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:04:32.453

您可以通过绝对路径访问，例如：/data/data/your.package.name/files/music.mp3

# php - 只在mysql的IN子句中显示指定的id

> ID：14271305
> 
> 赞同：2
> 
> 时间：2013-01-11T03:41:40.043
> 
> 标签：php, mysql

```
 SELECT * FROM `charges`
    UNION ALL
    SELECT * FROM `confinement`
    UNION ALL
    SELECT * FROM `ultrasound` 
WHERE procedure_no IN (100, 200)
ORDER BY FIELD(procedure_no,100,200); 
```

sql 命令的第一部分是我加入 3 个收费表的地方。它们都是相同的，只是上下文不同。我希望该命令仅显示程序编号 100 和 200。所以只有 2 个结果。但它在mysql中显示了很多结果。

这是结果 [http://i.stack.imgur.com/2STXD.png](http://i.stack.imgur.com/2STXD.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:49:01.753

您发布的查询基本上执行三个查询：

```
SELECT * FROM `charges`

SELECT * FROM `confinement`

SELECT * FROM `ultrasound` WHERE procedure_no IN (100, 200) ORDER BY FIELD(procedure_no,100,200); 
```

即目前只有超声波通过程序没有过滤。尝试（未经测试）：

```
SELECT * FROM
    (SELECT * FROM `charges`
    UNION ALL
    SELECT * FROM `confinement`
    UNION ALL
    SELECT * FROM `ultrasound` ) AS t1
WHERE t1.procedure_no IN (100, 200)
ORDER BY FIELD(t1.procedure_no,100,200); 
```

这里的基本 SQL 小提琴：[http ://sqlfiddle.com/#!2/e1f08/1](http://sqlfiddle.com/#!2/e1f08/1)

# eclipse - Eclipse 3.8 更新站点

> ID：14271310
> 
> 赞同：2
> 
> 时间：2013-01-11T03:42:04.647
> 
> 标签：eclipse, eclipse-plugin, eclipse-indigo, eclipse-juno, update-site

在哪里可以找到 Eclipse 3.8 的发布更新站点？我需要这样的东西，但对于 3.8：

靛蓝 - [http://download.eclipse.org/releases/indigo/](http://download.eclipse.org/releases/indigo/) 朱诺 - [http://download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/)

我还在[这篇文章中找到了下一条评论](https://stackoverflow.com/questions/11322349/eclipse-3-8-where-is-the-download-site)

> Juno 包括 4.2 和 3.8（令人困惑，但确实如此） - eclipse.org/projects/releases/releases.php?release=juno – studgeek 2012-09-12 04:07:07

但是 Juno 更新站点不包含 3.8 平台（例如没有 org.eclipse.platform.feature.group 与 3.8 版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:45:25.870

正如[那个帖子](https://stackoverflow.com/questions/11322349/eclipse-3-8-where-is-the-download-site)中提到的那样。3.8 不包含在 Juno 存储库中，您必须下载 3.8 zip 包，然后在其中安装其他软件。

# xcode4.5 - 如何重新安装 Xcode 4.5？

> ID：14271313
> 
> 赞同：1
> 
> 时间：2013-01-11T03:42:52.603
> 
> 标签：xcode4.5

我的 Xcode 无法正常工作我从苹果网站下载。它显示以下错误消息。基本上我想重新安装 Xcode，因为我当前的版本有一些错误。

![错误信息](../Images/5a56479b8186932f2049ce3edc5a3966.png)

重新安装 Xcode 的最安全方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:06:51.160

您可以通过打开终端并键入来删除所有内容

```
sudo /Developer/Library/uninstall-devtools --mode=all 
```

（您将需要 su 访问权限）

然后去 App Store -> Categories -> Developer Tools -> xCode 并安装。

来源： http: [//osxdaily.com/2012/02/20/uninstall-xcode/](http://osxdaily.com/2012/02/20/uninstall-xcode/)

# java - 为什么在这个例子中引用变量引用不同的值？

> ID：14271316
> 
> 赞同：3
> 
> 时间：2013-01-11T03:42:57.933
> 
> 标签：java

```
public class AAA {
    public static void main(String[] args) {
        Integer bbb, aaa = new Integer(5);
        System.out.print(aaa);
        bbb = aaa;
        System.out.print(bbb);
        aaa = 4;  
        System.out.print(aaa);
        System.out.print(bbb);
    }
} 
```

为什么我看到：5545 而不是 5544？

*java版本“1.7.0_10”

谢谢大家，我理解我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:50:16.103

```
public class AAA {
    public static void main(String[] args) {
        Integer bbb, aaa = new Integer(5);
        System.out.print(aaa);
        bbb = aaa; 
```

上面的行指定 bbb 和 aaa 指向同一个对象。

```
 System.out.print(bbb);
        aaa = 4; 
```

现在 aaa 指向一个新对象（通过自动装箱不可见地创建）。这不会*改变*bbb 仍然指向的原始对象的值。请注意，整数是不可变的。这意味着不可能更改 Integer 对象的值。您只能创建具有不同值的新 Integer 对象。

```
 System.out.print(aaa);
        System.out.print(bbb);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:52:38.700

`aaa = 4;`意味着`aaa = new Integer(4);`由于**自动装箱**，它意味着`aaa`并且`bbb`将在分配后引用不同的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T05:05:34.027

分配给引用变量会改变它所指向的内容（如果有的话）。为了改变一个对象的值，使改变通过两个或多个不同的引用可见，你需要一个类支持值改变的对象。整数没有。StringBuffer 可以：

```
public class Test {
  public static void main(String[] args) {
    StringBuffer a = new StringBuffer();
    StringBuffer b = a;
    a.append("Hello, world");
    System.out.println(b);
  }
} 
```

a.append 调用更改了 a 和 b 引用的 StringBuffer 的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T03:45:13.963

`bbb`不随 改变`aaa`。如果您希望程序打印 5544，则必须在该行`bbb`的`aaa`正下方重新定义。`aaa = 4;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T03:45:26.903

设置`bbb`为`aaa`并不意味着稍后重新分配`bbb`时会更新( )。`aaa``aaa = 4`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T04:02:01.473

因为，在[Java 中，对象被定义为按引用调用，而类型被定义为按值调用](http://www.thegeeksclub.com/understanding-call-call-reference-java/)。

如果您将其更改为`int bbb, aaa = 5;`结果将回到您的预期。

这是因为 an`Integer`是一个对象，而 an`int`是一个类型。

# sharepoint - 在 Share Point 2010 中通过 FBA 进行角色模糊搜索

> ID：14271321
> 
> 赞同：1
> 
> 时间：2013-01-11T03:43:31.857
> 
> 标签：sharepoint, fba

我实现了两个类，RoleProvider 和 MembershipProvider。但是，我无法通过模糊搜索搜索角色。我在广告中创建了三个组（g1，g2，g3）。当我在 PeoplePicker 中输入 g 时，找不到任何东西，但输入全名 g1，它可以工作。

# java - 将数据从子活动传递到父活动

> ID：14271322
> 
> 赞同：0
> 
> 时间：2013-01-11T03:43:38.750
> 
> 标签：java, android

我看过这个帖子：[Android：如何在子活动中使用从父活动传递的数据？](https://stackoverflow.com/questions/3130585/android-how-to-use-data-passed-from-parent-activity-in-a-sub-activity)并准备好使用这种方法，但我想知道这是否已过时。从那时起，Android 取得了长足的进步，我不想以错误的方式做到这一点。

这仍然是应该使用的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:45:19.360

这种方法非常好，今天仍在使用。还有另一种方法可以使用[Bundle](http://developer.android.com/reference/android/os/Bundle.html)传递数据。捆绑包可以按如下方式使用

```
 Intent intent = new Intent(ActivityA.this, ActivityB.class);  
        Bundle b = new Bundle(); 
        b.putString("name", "abcd");
        b.putInt("value", 666);  
        //Add the set of extended data to the intent and start it
        intent.putExtras(b);
        startActivity(intent); 
```

并在其他活动中使用

```
 Bundle b = getIntent().getExtras(); 
    int value = b.getInt("value", 0);
    String name = b.getString("name"); 
```

# jquery - 为丢失的数据解析 JSON 会导致错误

> ID：14271330
> 
> 赞同：0
> 
> 时间：2013-01-11T03:44:17.420
> 
> 标签：jquery, json

如果这可能与我之前的问题相似，我深表歉意。为什么搜索 JSON 解析中不存在的节点会导致所有其他有效节点失败？

```
 json.track.wiki.summary causes all to error
 json.track.name  is fine if used without the previous

//JSON data
{
    "track": {
        "id": "434483410",
        "name": "Written in the Stars",
        "mbid": "",
        "url": "http://www.last.fm/music/Tinie+Tempah+(Feat.+Eric+Turner)/_/Written+in+the+Stars",
        "duration": "208000",
        "streamable": {
            "#text": "0",
            "fulltrack": "0"
        },
        "listeners": "108",
        "playcount": "1523",
        "artist": {
            "name": "Tinie Tempah (Feat. Eric Turner)",
            "mbid": "",
            "url": "http://www.last.fm/music/Tinie+Tempah+(Feat.+Eric+Turner)"
        },
        "toptags": "\n "
    }
} 
```

有效节点的后续访问将出错。消除对丢失数据的请求，随后的请求将起作用。必须有一种方法可以在使用对象之前对其进行测试，这样它就不会 FUBAR 数据。

这个数据没问题

```
//JSON Data
{
"track": {
    "id": "517047006",
    "name": "Skyscraper",
    "mbid": "a92f853d-ad6d-490e-a820-4cff9cc1f224",
    "url": "http://www.last.fm/music/Demi+Lovato/_/Skyscraper",
    "duration": "222000",
    "streamable": {
        "#text": "1",
        "fulltrack": "0"
    },
    "listeners": "114757",
    "playcount": "1424456",
    "artist": {
        "name": "Demi Lovato",
        "mbid": "faf4cefb-036c-4c88-b93a-5b03dd0a0e6b",
        "url": "http://www.last.fm/music/Demi+Lovato"
    },
    "album": {
        "artist": "Demi Lovato",
        "title": "Unbroken",
        "mbid": "9c195a9b-2db4-4b63-9337-6d8152244742",
        "url": "http://www.last.fm/music/Demi+Lovato/Unbroken",
        "image": [{
            "#text": "http://userserve-ak.last.fm/serve/64s/69672054.png",
            "size": "small"
        }, {
            "#text": "http://userserve-ak.last.fm/serve/126/69672054.png",
            "size": "medium"
        }, {
            "#text": "http://userserve-ak.last.fm/serve/174s/69672054.png",
            "size": "large"
        }, {
            "#text": "http://userserve-ak.last.fm/serve/300x300/69672054.png",
            "size": "extralarge"
        }],
        "@attr": {
            "position": "11"
        }
    },
    "toptags": {
        "tag": [{
            "name": "pop",
            "url": "http://www.last.fm/tag/pop"
        }, {
            "name": "ballad",
            "url": "http://www.last.fm/tag/ballad"
        }, {
            "name": "female vocalists",
            "url": "http://www.last.fm/tag/female%20vocalists"
        }, {
            "name": "inspirational",
            "url": "http://www.last.fm/tag/inspirational"
        }, {
            "name": "demi lovato",
            "url": "http://www.last.fm/tag/demi%20lovato"
        }]
    },
    "wiki": {
        "published": "Sat, 20 Aug 2011 18:25:23 +0000",
        "summary": "The Skyscraper Songfacts says: On November 1, 2010, Demi's publicist announced the Disney star had entered a treatment facility for "
        physical and emotional issues,
        " which was subsequently reported to include an eating disorder and self-cutting. Her first single since her stint in treatment finds the singer/actress finding strength in the wake of a fading relationship and it symbolizes her resilience in the face of her personal issues.",
        "content": "The Skyscraper Songfacts says: On November 1, 2010, Demi's publicist announced the Disney star had entered a treatment facility for "
        physical and emotional issues,
        " which was subsequently reported to include an eating disorder and self-cutting. Her first single since her stint in treatment finds the singer/actress finding strength in the wake of a fading relationship and it symbolizes her resilience in the face of her personal issues.\n \nUser-contributed text is available under the Creative Commons By-SA License and may also be available under the GNU FDL."
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:06:24.100

该错误不会导致其他代码失败。当第一行出错时，它会停止执行，以便永远不会到达其他代码。

您可以添加如下内容：

```
if(json && json.track && json.track.wiki){
    // do something with json.track.wiki.summary
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:31:54.663

如果您的 json 字段不固定，您必须检查它们在 json 结果中是否存在。你可以尝试下面的代码来做同样的事情：

```
if (typeof(json.track.wiki) != "undefined")
{
//code for what to do with json here
} 
```

或者

制作如下所示的函数并传递节点元素以验证其存在（首选）

```
function isExists(node) {
    if (node== undefined)
      return ""
    else
      return node
} 
```

//并像这样调用它

```
var nodevalue=isExists(json.track.wiki) 
```

通过这样做，您可以确保在使用之前存在特定节点。这样以后的代码也能正确执行。

执行上面的代码时可能会出现一些错误。所以别忘了纠正！！

# c# - 实体框架中没有外键的一对多关系？

> ID：14271334
> 
> 赞同：2
> 
> 时间：2013-01-11T03:44:47.350
> 
> 标签：c#, entity-framework

标题可能具有误导性，但现在我似乎无法为我正在寻找的内容制定正确的词。

就目前而言，实体 A 有许多实体 B，*但*实体 B*不会*包含实体 A 的外键。

这是如何运作的？

起初，我想在我的模型中使用以下属性。

```
public virtual ICollection<B> Bs { get; set; } 
```

但那是如果 B 有 A 的外键。建议？或者这不是一件事？如果 B 没有外键，我是否必须创建一个单独的模型来关联 A 和 B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:51:46.907

我不知道为什么实体 B 到实体 A 上不能有 FK，但是如果没有任何类型的引用约束，两个实体之间就不能遍历（即你不能提取每个给定 A 的所有 B，并且您不能为给定的 B 提取 A）。我可以告诉您的最简单的方法是添加该 FK，但如果不可能，您将需要创建另一个实体，该实体仅充当您的实体 B 的代理/映射。BProxy 实体应与B 实体。

```
public class BProxy 
{
     [Key]
     public int Id {get; set;}
     [Required]
     public int EntityBId {get; set;}
     public virtual EntityB {get; set;}
     [Required]
     public int EntityAId {get; set;}
     public virtual EntityA {get; set;}
} 
```

然后，您的实体 A 将拥有一组 BProxy 对象而不是 B 对象

```
public virtual ICollection<BProxy> BProxies { get; set; } 
```

这样，您可以创建通过 LINQ 双向遍历关系的查询。

# ios - 如何呈现模态视图，而不是被键盘重叠？

> ID：14271342
> 
> 赞同：0
> 
> 时间：2013-01-11T03:45:26.857
> 
> 标签：ios, objective-c, cocoa-touch

我正在使用[FPPopover](https://github.com/50pixels/FPPopover)。一切正常，直到我想在有键盘时显示弹出框。事件的顺序是：

*   单击文本字段
*   键盘照常显示
*   单击按钮以触发弹出窗口

    　 ![在此处输入图像描述](../Images/5790cfa51e4e398ece135b2b7010547e.png)

这是添加其视图的 FPPopover 代码：

```
NSArray *windows = [UIApplication sharedApplication].windows;
if(windows.count > 0)
{
      _parentView=nil;
    _window = [windows objectAtIndex:0];
    //keep the first subview
    if(_window.subviews.count > 0)
    {
        _parentView = [_window.subviews objectAtIndex:0];
        [_parentView addSubview:self.view];
        [_viewController viewDidAppear:YES];
    }

} 
```

如何使弹出视图*不*被键盘重叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:02:00.567

您想让键盘始终可见吗？如果没有，让您的视图在模态视图出现时关闭键盘。

您可以通过调用将 resignFirstResponder 发送到视图对象（例如 textView）来做到这一点。

一旦模态视图关闭，发送 becomeFirstResponder。

# postgresql - java web应用程序中的全文搜索

> ID：14271343
> 
> 赞同：0
> 
> 时间：2013-01-11T03:45:27.667
> 
> 标签：postgresql, full-text-search

> **可能重复：**
> [全文搜索引擎的比较——Lucene、Sphinx、Postgresql、MySQL？](https://stackoverflow.com/questions/737275/comparison-of-full-text-search-engine-lucene-sphinx-postgresql-mysql)

我正在做一个基于java的网络项目。我使用 postgresql 作为数据库服务器。我的问题是如何在我的应用程序中做全文。有两个选项。他们是 apache lucene 和 sphinx 搜索。但我以前没有使用过它们。那么最好的选择是什么？

我必须考虑以下几点 1\. 我必须通过 20-50 个表进行全文搜索。2\. 这是一个企业应用程序

# android - Android，是否可以在不使用谷歌云消息系统的情况下向设备广播消息？

> ID：14271344
> 
> 赞同：1
> 
> 时间：2013-01-11T03:45:34.200
> 
> 标签：android, google-cloud-messaging

您可能知道访问 Google 服务器（例如[www.android.com](http://www.android.com)）及其所有子域（例如[developer.android.com](http://developer.android.com/index.html)）在某些国家/地区被 Google 拒绝。因此，无法使用 GCM。

我有一个 NEWS & Magazine 应用程序，我想向特定设备广播消息。例如，一些用户希望有新的体育更新，而另一些用户可能有其他类别的新更新。

我正在寻找一种模拟 GCM 系统的方法。是否可以？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:26:30.210

是的，有可能。

*   `Message API`（您可以使用任何格式的 JSON 或 XML）
*   `Android Service`它将连接到该消息 API 并检查新消息
*   你可能还需要`BroadcastReceiver`

这是我使用的一些代码。

首先我创建`BroadcastReceiver`并`Service`在`AndroidManifest.xml`

```
<receiver android:name="com.example.Push_Notification" >
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        <action android:name="android.net.wifi.WIFI_STATE_CHANGED" />
        <action android:name="android.net.wifi.NETWORK_IDS_CHANGED" />
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>

<service
    android:name="com.example.Push_Notification_Checker"
    android:enabled="true" /> 
```

这是`Push_Notification`：

```
public class Push_Notification extends BroadcastReceiver{

    private Context context;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        this.context = context;
        startService();
    }

    public void startService(){
        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE );
        NetworkInfo activeNetInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE|ConnectivityManager.TYPE_WIFI);
        boolean isConnected = activeNetInfo != null && activeNetInfo.isConnectedOrConnecting();

        Calendar cur_cal = Calendar.getInstance();
        cur_cal.setTimeInMillis(System.currentTimeMillis());
        Intent i = new Intent(context, Push_Notification_Checker.class);
        PendingIntent pintent = PendingIntent.getService(context, 0, i, 0);
        AlarmManager alarm = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        if (isConnected){
            catchLog("connecte " +isConnected);
            alarm.setRepeating(AlarmManager.RTC_WAKEUP, cur_cal.getTimeInMillis(), 1 * 60*1000, pintent);
        }
        else {
            catchLog("not connecte " +isConnected);
            alarm.cancel(pintent);
        }
    }

    private void catchLog(String log) {
        Log.i("PushNotification", log);
    }
} 
```

这是`Push_Notification_Checker`服务。：

```
public class Push_Notification_Checker extends Service {

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        catchLog("Service got created");
        nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
        pref = getSharedPreferences(Constants.SHARED_PRED, 0);
    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);

        //Here i call AsyncTask to check Message. Android didn't allow Network Connection directly tied into Main Thread
        new GetMessage(getApplicationContext()).execute();
    }

} 
```

通过向服务器发送 android UDID，您可以检查特定设备是否有新消息。这样您就可以将消息发送到特定设备。[如何获取UDID？](https://stackoverflow.com/questions/5429916/getting-udid-in-android)

[这](http://developer.android.com/training/basics/network-ops/connecting.html)就是我使用 AsyncTask 进行连接的原因，这两个示例可以帮助您了解如何与服务器进行通信。

[如何通过Http post方法使用android向服务器发送数据？](https://stackoverflow.com/questions/9703690/how-to-send-data-to-server-using-android-by-http-post-method)

[通过 JSON 将数据从 android 发送到服务器](https://stackoverflow.com/questions/6523761/send-data-from-android-to-server-via-json)

我知道这是一个很长的镜头，但希望这可以在某种程度上帮助你。

PS：我也是来自被谷歌拒绝的国家之一

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:33:30.603

除了 GCM 之外，还有许多不同的选项。

**需要一些黑客攻击的选项：**

[MQTT](http://mqtt.org/) -[博客 1](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)，[博客 2](http://dalelane.co.uk/blog/?p=938)

[aSmack](http://code.google.com/p/asmack/)使用 XMPP

[执事项目](http://deacon.daverea.com/)

**第三方开箱即用提供商：**

[解析](https://parse.com/products/push)

[城市飞艇](http://urbanairship.com/products/push-messaging)

[Push.io](http://push.io/)等

**另见：**

[Android 是否支持近乎实时的推送通知？](https://stackoverflow.com/questions/1243066/does-android-support-near-real-time-push-notification/)

[Android 平台中的推送通知](https://stackoverflow.com/questions/1378671/push-notifications-in-android-platform?lq=1)

# c# - 序列化视图模型时出错：“无法序列化类型‘System.Web.HttpPostedFileWrapper’。”

> ID：14271351
> 
> 赞同：3
> 
> 时间：2013-01-11T03:46:01.537
> 
> 标签：c#, asp.net, asp.net-mvc

这是我的视图模型：

```
[Serializable]
public class MyViewModel
{
    public int VendorId { get; set; }

    public HttpPostedFileBase SpreadsheetFile { get; set; }       

    public IEnumerable<Vendor> Vendors { get; set; }        
} 
```

我正在用数据加载我的视图模型并将其传递给视图并对其进行序列化：

```
@Html.Serialize("MyModel", myViewModel) 
```

但我收到了这个错误

> **无法序列化类型“System.Web.HttpPostedFileWrapper”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。**

我不确定如何使用 DataContractAttribute 标记某些内容。有没有办法将 HttpPostedFileBase 属性标记为不可序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:48:11.173

尝试将其标记为[NonSerialized](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute.aspx)。

```
[Serializable]
public class MyViewModel
{
    public int VendorId { get; set; }

    [NonSerialized]
    public HttpPostedFileBase SpreadsheetFile { get; set; }       

    public IEnumerable<Vendor> Vendors { get; set; }        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:38:10.130

将 SpreadsheetFile 更改为具有支持字段的属性并标记支持字段 NonSerialized

```
[NonSerialized]
private HttpPostedFileBase _spreadSheetFile;
public HttpPostedFileBase SpreadsheetFile {
    get { return _spreadSheetFile; } 
    set { _spreadSheetFile = value; }
} 
```

序列化程序将尊重支持字段的属性。即使是自动实现的属性也有一个由编译器生成的支持字段。序列化程序使用支持字段，而不是属性。

# django - 迁移 GeoDjango 模型以更改投影 SRID

> ID：14271353
> 
> 赞同：2
> 
> 时间：2013-01-11T03:46:14.127
> 
> 标签：django, geodjango

我正在尝试使用 South 创建迁移，以将我的数据从使用 4326 SRID 转换为 900913。迁移后，坐标保持其 4326 格式。（很容易区分 4326 和 900913 投影之间的差异，因为 900913 中的数字要大得多）

以下是该迁移中的 forward() 和 backward() 函数：

```
class Migration(SchemaMigration):

    def forwards(self, orm):
        # Changing field 'ZipCoords.point'
        zips = orm.ZipCoords.objects.all()
        db.alter_column('itinerary_generator_zipcoords', 'point', self.gf('django.contrib.gis.db.models.fields.PointField')(srid=900913, null=True))
        for zip in zips:
            zip.point.transform(900913)
            zip.save()

    def backwards(self, orm):
        # Changing field 'ZipCoords.point'
        zips = orm.ZipCoords.objects.all()
        db.alter_column('itinerary_generator_zipcoords', 'point', self.gf('django.contrib.gis.db.models.fields.PointField')(null=True))
        for zip in zips:
            zip.point.transform(4326)
            zip.save() 
```

我正在使用 Django Admin 检查它们的值。此外，有趣的是，这种迁移是反向“起作用”的，它将我的坐标变成了更小（但不正确）的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:56:10.083

问题似乎是我转换的数据没有 SRID。（或者也许 SRID 是 900913，导致 transform() 没有操作，我没有测试。）。这个更新的 forward() 函数有效：

```
def forwards(self, orm):
    # Changing field 'ZipCoords.point'
    zips = orm.ZipCoords.objects.all()
    db.alter_column('itinerary_generator_zipcoords', 'point', self.gf('django.contrib.gis.db.models.fields.PointField')(srid=900913, null=True))
    for zip in zips:
        zip.point.srid = 4326
        zip.point.transform(900913)
        zip.save() 
```

# c# - Math.Cos(x)<-1，x 值较大

> ID：14271361
> 
> 赞同：0
> 
> 时间：2013-01-11T03:47:31.380
> 
> 标签：c#, monodevelop

我写了非常简单的代码：

```
public static void Main (string[] args)
{       
    String str="1,0992748756871115E+41"; //yes, I know that is very large value

    Double x=Convert.ToDouble(str);

    Double res=Math.Cos(x);

    Double resRound=Math.Round(res);

    Console.WriteLine("x={0}\nres={1}\nresRound={2}", x, res, resRound);
} 
```

这段代码输出非常大的 res 值：`1,09927487568711E+41`a 等于 Math.Cos 的参数： ![屏幕](../Images/69c29b66cb0fba77d7100c9dea9f3ba9.png)

我想，这是一个错误，`Gtk#`并决定测试返回由 .NET Framework 编译的代码的值，它返回相同的值！那么函数 cos(x) 的含义是否超出了段 from `-1`to的限制`1`？怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:51:30.553

从[文档](http://msdn.microsoft.com/en-us/library/system.math.cos.aspx)中：

> d 的可接受值范围从大约 -9223372036854775295 到大约 9223372036854775295。对于此范围之外的值，Cos 方法将返回 d 不变，而不是引发异常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T04:22:21.463

您可以分解表达式以获取如下值

成本(A+B)= CosA *CosB -SinA * SinB

在文档限制范围内尽可能分解

# c# - 如何使用反射调用泛型类型的属性/字段

> ID：14271362
> 
> 赞同：1
> 
> 时间：2013-01-11T03:47:42.187
> 
> 标签：c#, .net, generics, reflection, static

考虑跟班

```
class A<T> where T:new()
{
  public static T Instance = new T();
  A()
  {
  }
} 
```

我有 2 个问题

1.  我需要`Instance`带有反射的对象。我试过以下

    ```
    var type = typeof(A<int>);  
    // var type = typeof(A<>).MakeGenericType(typeof(int)); // Also tried this

    var instanceMember1 = type.GetMember("Instance",  BindingFlags.Static );  // returns null
    var instanceMember2 = type.GetField("Instance",  BindingFlags.Static ); // returns null 
    ```

    我也尝试过更改`Instance`为财产并致电`GetProperty`但没有成功。

2.  移除`new()`约束并`constructor`设为私有后，如何通过反射调用私有（无参数）构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:58:31.910

添加`BindingFlags.Public`到您的标志中`GetField`。

```
var instanceMember1 = type.GetField("Instance", BindingFlags.Static |
    BindingFlags.Public); 
```

调用私有构造函数：

```
var ctor = type.GetConstructor(BindingFlags.Instance | BindingFlags.NonPublic, 
    null, Type.EmptyTypes, new ParameterModifier[0]);
var instance = ctor.Invoke(null) as A<int>; 
```

# sql - 如何将值从 SP 传递到 SP？

> ID：14271369
> 
> 赞同：0
> 
> 时间：2013-01-11T03:48:12.377
> 
> 标签：sql, tsql, stored-procedures

我有一个问题，我有一个返回值的存储过程。此存储过程正在另一个 SP 中执行，我需要将值传输到此 SP。我怎样才能做到这一点。

任何帮助将不胜感激。

谢谢

例子：

```
CREATE PROC [dbo].[isp_CREATE_CONFIG]

@CFG_KEY VARCHAR(15)
, @CFG_SHORTVALUE INT
, @CFG_LONGVALUE VARCHAR(200)
, @CFG_DESC VARCHAR(250)
, @CFG_SHORT_DESC VARCHAR(100)
, @CFG_MISC1 VARCHAR(50)
, @CFG_MISC2 VARCHAR(50)
, @CFG_MISC3 VARCHAR(50)
, @CFG_MISC4 VARCHAR(50)
, @CFG_MISC5 VARCHAR(50)
, @CFG_USER VARCHAR(20)
, @CFG_MSG VARCHAR(250) OUTPUT

AS

DECLARE 
@c_ErrMsg VARCHAR(200)
, @c_ErrNum VARCHAR(5)
, @c_Continue INT
, @c_Date VARCHAR(20)

/* Assign value to local variables */
SET @c_Date = GETDATE()
SET @c_Continue = 0

/* Run Validations */
IF EXISTS (SELECT 1 FROM CONFIG(NOLOCK) WHERE cfg_key = @CFG_KEY)
    BEGIN
        SET @c_ErrNum = 60001
        SET @c_ErrMsg = 'Configuration Key (' + @CFG_KEY + ') already exist. Please check System Configuration. Error: ' + @c_ErrNum
        SET @CFG_MSG = @c_ErrMsg
        SET @c_Continue = 1
    END

/* Create Configuration */
SET @CFG_MSG = ''

IF @c_Continue = 0
    BEGIN
        IF NOT EXISTS(SELECT 1 FROM CONFIG(NOLOCK) WHERE cfg_key = @CFG_KEY)
            BEGIN
                INSERT INTO CONFIG
                    (
                        cfg_key         , cfg_short_value   , cfg_long_value    , cfg_desc          ,cfg_short_desc
                        , cfg_misc1     , cfg_misc2         , cfg_misc3         , cfg_misc4
                        , cfg_misc5     , cfg_add_who       , cfg_edit_date     , cfg_edit_who
                    )
                VALUES
                    (
                        @CFG_KEY        , @CFG_SHORTVALUE   , @CFG_LONGVALUE    , @CFG_DESC         , @CFG_SHORT_DESC
                        , @CFG_MISC1    , @CFG_MISC2        , @CFG_MISC3        , @CFG_MISC4
                        , @CFG_MISC5    , @CFG_USER         , @c_Date           , @CFG_USER
                    )

                SET @CFG_MSG = 'Configuration has been created.'            
            END
    END     

GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:59:59.480

返回值的存储过程有一个声明为 OUTPUT 的参数，如下所示：

```
CREATE PROCEDURE my_returning_proc (@ret VARCHAR(10) OUTPUT) AS
BEGIN .... END 
```

如果你想使用这个值，你需要像这样调用 STORED PROCEDURE：

```
DECLARE @var VARCHAR(10);
EXEC my_returning_proc @var OUTPUT;
PRINT @var 
```

这里的关键是将 OUTPUT 添加到 EXEC 语句中

编辑：感谢您提供示例。对于您的情况，您可以像这样调用存储过程：

```
DECLARE @var_returned VARCHAR(250);
EXEC [dbo].[isp_CREATE_CONFIG] 'BLAH', 0, 'BLAH', 'BLAH', 'BLAH', ......, @var_returned OUTPUT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:50:37.837

通过返回一个值，我假设您的意思是使用`return`. 您还可以为存储过程声明输出参数。

方法如下：

```
declare @retval int;

exec @retval = <stored procedure call> 
```

这是一个任何人都可以尝试的简单代码示例：

```
create procedure dum as return 5

declare @retval int;

exec @retval = dum

select @retval 
```

我一直使用这种技术从存储过程中返回状态。

# ruby-on-rails - /usr/bin/gcc-4.2：没有这样的文件或目录。错误。符号链接修复不起作用

> ID：14271373
> 
> 赞同：5
> 
> 时间：2013-01-11T03:48:53.467
> 
> 标签：ruby-on-rails, osx-mountain-lion

我正在尝试升级我的 rails 3.2.3 应用程序。我已将 gemfile 更新为`gem 'rails', '3.2.11'`并运行`bundle update rails`，但出现以下错误：

```
 Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/Arel/.rvm/rubies/ruby-1.9.3-head/bin/ruby extconf.rb 
creating Makefile

make
compiling generator.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [generator.o] Error 1

Gem files will remain installed in /Users/Arel/.rvm/gems/ruby-1.9.3-head/gems/json-1.7.6 for inspection.
Results logged to /Users/Arel/.rvm/gems/ruby-1.9.3-head/gems/json-1.7.6/ext/json/ext/generator/gem_make.out
An error occured while installing json (1.7.6), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.6'` succeeds before bundling. 
```

所以我尝试了到处都找到的解决方案，使用以下命令创建符号链接：

`sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2`

但这只是返回错误：

`ln: /usr/bin/gcc-4.2: File exists`

我不太了解使用终端在 OSX 中导航，所以我在这里有点挣扎。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T04:19:45.417

`/usr/bin/gcc-4.2`可能已经是一个符号链接，但是一个损坏的链接指向一个不存在的文件。

# php - 如何在php中解析5.1882449992845E+25之类的数字

> ID：14271377
> 
> 赞同：-3
> 
> 时间：2013-01-11T03:49:11.207
> 
> 标签：php, parsing, number-formatting

我正在研究这个计算数字并将它们相加的附属公司，然后我得到一个像 5.1882449992845E+25 这样的数字我如何将数字强制到小数点后 2 位，这样我就可以只有整数。

我想知道任何带有这样数字的php函数以及它的含义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T03:50:48.463

使用 number_format php 函数：

```
number_format(5.211545645612456,2);
```

有关更多信息，请参阅[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:01:48.367

数字 5.1882449992845E+25 真正的意思是 5.1882449992845 * 10^25（[见这里](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)）。

不幸的是，这是巨大的。如果您打算将其存储为数字（即，如果您*需要*对其应用数学），那么您应该能够解析字符串并应用指数。但是请注意，PHP 中的最大 int 大小通常为 20 亿（尽管这与平台无关）。您不太可能将其存储为 int。否则，如果它只是用作 id 等，我会保持原样，或者将其转换为 int 字符串。

# ajax - 使用 EL 表达式将组件 ID 传递给 JSF 中的复合组件

> ID：14271380
> 
> 赞同：2
> 
> 时间：2013-01-11T03:50:02.377
> 
> 标签：ajax, jsf, jsf-2, el, composite-component

问题：我将 EL 表达式传递给复合组件，但 EL 表达式是从复合组件内部而不是之前计算的。将 EL 表达式求值为字符串的意图是发送到复合组件。

我有一个复合组件，`MenuTable`：

```
<cc:interface>
    <cc:attribute name="model" type="nz.co.tradeintel.web.MenuTable"/>
    <cc.attribute name="updateId" /> 
</cc:interface>

<cc:implementation>
    <h:panelGroup id="menuTable">
    <table>
        <ui:repeat id="repeat1" value="#{cc.attrs.model.rows}" var="row">
            <tr>
            <ui:repeat id="repeat2" value="#{row.contents}" var="entry">
                <td>
                    <p:commandLink action="#{cc.attrs.model.setSelected(entry)}" update="#{cc.attrs.updateId}" value="#{entry.toString()}"/>
                </td>
            </ui:repeat>
            </tr>
        </ui:repeat>
    </table>
    </h:panelGroup>
</cc:implementation> 
```

目的是我将绝对组件 ID 作为属性传递，`updateId`如下所示：

```
<p:PanelGroup id="updatingPanel">
    <!-- Lots of components.-->
</p:PanelGroup>
<custom:MenuTable updateId="#{component.clientId}:updatingPanel" model="#{menuBackBean.menuTable}" /> 
```

问题是， 的 EL 表达式`updateId`是从复合组件内的范围评估的`<p:commandLink />`，我收到以下错误：

```
javax.faces.FacesException: Cannot find component with identifier ":j_idt37:j_idt39:updatingPanel:j_idt61:repeat1:0:repeat2:0:j_idt65:updatingPanel" referenced from "j_idt37:j_idt39:updatingPanel:j_idt61:repeat1:0:repeat2:0:j_idt65". 
```

注意：JSF 认为我正在尝试更新一个组件，其 ID`updatingPanel`位于复合组件*内部。*

为什么不从外部范围评估 EL 表达式：`<custom:MenuTable/>`？

有一些相关的答案，但我不明白，比如[这个](https://stackoverflow.com/questions/9205938/passing-el-expression-to-composite-component)。

使用 Mojarra 2.1.15

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T11:38:41.720

EL 表达式不会在构建组件时评估，而是在访问属性时评估。换句话说，它们是*runtime*而不是*buildtime*。是`#{component}`指评估 EL 表达式时的[*当前*UI 组件](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getCurrentComponent%28javax.faces.context.FacesContext%29)，在您的特定情况下是`<p:commandLink>`. 这解释了不同的结果。

您需要以不同的方式处理此问题，而不使用`#{component}`. 其中一种方法是

```
<p:panelGroup binding="#{updatingPanel}">
    ...
</p:panelGroup>
<custom:MenuTable ... updateId=":#{updatingPanel.clientId}" /> 
```

如果这仍然不起作用，请确保您不使用`<h:form prependId="false">`.

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)
*   [带有 prependId="false" 的 UIForm 中断 <f:ajax render>](https://stackoverflow.com/questions/7415230/jsf-namingcontainer-and-uiform-with-prependid)

# sql-server-2008-r2 - tablix SSRS Reporting 服务中的详细信息行，其下有详细信息行的记录

> ID：14271392
> 
> 赞同：1
> 
> 时间：2013-01-11T03:51:20.117
> 
> 标签：sql-server-2008-r2, reporting, reporting-services, ssrs-2008-r2

现在它是一个带有**tablix**的报告 ，其中的记录就像
***每一行下面都有一些详细信息行。***
并且详细信息行可以有一个或多个基于主 tablix 行的记录

为了阐明问题，请看一下
![在此处输入图像描述](../Images/e4f006e16519a56863b762d9a66d559f.png)

* * *

在这里和那里进行了一些搜索，但无法弄清楚如何做到这一点。
tablix 单元格内的子报告，但它将如何跟踪当前行

还有一件事：我是否需要为此创建两个单独的数据集并相应地绑定，或者将查询编写为单个数据集并进行一些**分组**？

有任何想法吗 ！

PS：**SSRS** *r2 环境， web 应用的* *原生模式*报告

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:47:13.530

**您可以使用一个 Dataset**和**一个 Tablix**来实现这一点。

数据集将包含报告中的所有列，每个 BIL 值具有多行。

Tablix 将有**四行**和**一组基于 BIL**。

第一行将是 Tablix 标题行，包含主列标题详细信息。

接下来的两行将是组标题行。第一行将包含组详细信息、*BIL*、*No Bayar*等。第二行将包含详细信息行标题详细信息。

最后一行将是包含*COL1*和*COL2*详细信息值的详细信息行。

您将看到类似这样的内容（您需要根据需要填写 TextBox 详细信息）：

![在此处输入图像描述](../Images/b8c8422b57fd457ec39fd6d110cc64b4.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T04:14:08.687

使用子报告创建报告将解决您的问题

1.  您可以使用 (BIL NoB NoW Est TotalXYZ) 列创建一个包含一个数据集的报表。
2.  现在将该子报表与 BIL 链接
3.  现在将子报表与 BIL (FK) 主报表链接

希望这有帮助

# javascript - 使用 jQuery 滚动浏览器窗口

> ID：14271404
> 
> 赞同：2
> 
> 时间：2013-01-11T03:53:23.193
> 
> 标签：javascript, jquery

我想滚动浏览器窗口以响应某些用户操作。

[`scrollLeft`我在 stackoverflow 响应中](https://stackoverflow.com/questions/5061241/jquery-how-to-get-browser-window-to-scroll-horizontal-when-div-is-clicked)发现了这一点。从那里，我能够找到`scrollTop`并得到以下结果：

```
$(window).scrollTop((Number($(window).scrollTop())+100)+'px'); 
```

这实际上会滚动，但会滚动到页面顶部。无论我用什么值替换 100（我什至尝试过负数），它总是只是跳到页面顶部。（注意：`$(window).scrollTop()`返回 0。）

有人可以给我一些提示我可能会错过什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:58:50.387

`scrollTop`只需要一个数字，而不是一个`px`值。

```
$(window).scrollTop($(window).scrollTop()+100); 
```

这应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:55:33.710

你不需要`Number`原因`scrollTop`返回一个数字

`scrollTop`如果有一些`scrollHeight`可用的高于元素的高度，它将执行，并且它始终是一个正数。

它应该看起来像：

```
$(window).scrollTop( $(window).scrollTop()+100 ); 
```

你不需要`'px'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T04:00:12.080

不需要`px`...

```
$(document).ready(function(){
    $(window).scrollTop(($(window).scrollTop()+600));
}); 
```

[小提琴](http://jsfiddle.net/tGxJV/)

# java - Java Mail API 密码验证

> ID：14271408
> 
> 赞同：0
> 
> 时间：2013-01-11T03:54:00.193
> 
> 标签：java, swing, email, jakarta-mail, validation

我正在使用 Java Mail API 发送电子邮件。所以我从用户那里收到电子邮件和密码，我只想在他们输入密码时检查密码，但我没有任何想法来验证 Java Mail API 中的密码。任何人都可以帮忙吗？

问题2：

```
protected PasswordAuthentication getPasswordAuthentication() 
{
  return new PasswordAuthentication("xxx@gmail.com","*");
} 
```

以上方法有什么用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:26:20.503

要验证密码，您必须使用它。您不必发送消息，但您必须连接到服务器并进行身份验证。使用 Transport.connect 方法。如果您不打算很快发送消息，您可以立即关闭连接，或者您可以保存 Transport 对象以供以后在发送消息时使用，并在完成后关闭它。请注意，如果您在 Transport.connect（验证密码）和 Transport.sendMessage（发送消息）之间等待用户输入，服务器可能会导致连接超时，您必须在发送前重新连接。

# android - 如何将带有格式的文本添加到编辑文本中？

> ID：14271410
> 
> 赞同：6
> 
> 时间：2013-01-11T03:54:14.933
> 
> 标签：android, android-edittext

![在此处输入图像描述](../Images/9cdb9ba297c7f5fb9d1764c4c7d54fba.png)

图片来自一个名为`kakao story`.

假设有一个帖子，其中包含与任何 sns 应用程序一样的评论列表。
当您单击评论时，它会在编辑文本中插入评论者的用户名以指示`my new comment is a reply to the user`.
（您不能多次添加相同的名称。）
当您按退格键删除名称时，组成名称的整个字符（例如，示例中的 chabeau）将被 1-退格键删除。

我试图模仿这种行为，并想要一些如何实现它或搜索什么的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:32:03.980

如果您正在寻找**气泡视图**。您可以通过创建一个子类来实现它，该子类 `android.text.style.DynamicDrawableSpan.ImageSpan`会将`EditText`字符串的一部分转换为格式化的`span`.

这个[SO Question](https://stackoverflow.com/questions/10812316/contact-bubble-edittext/10864568#10864568)会给你一些关于创建格式化跨度的基本想法。

[这个](http://ballardhack.wordpress.com/2011/07/25/customizing-the-android-edittext-behavior-with-spans/)是一个很好的自定义`editext`教程`spans`。

对于一次删除整个单词，您可以使用[SPAN_EXCLUSIVE_EXCLUSIVE](http://developer.android.com/reference/android/text/Spanned.html#SPAN_EXCLUSIVE_EXCLUSIVE)属性。

下面的代码将格式化字符串的前四个字符，希望这会给你一些提示。

```
final SpannableStringBuilder sb = new SpannableStringBuilder("your text here");
final ForegroundColorSpan fcs
    = new ForegroundColorSpan(Color.rgb(158, 158, 158)); 

// Span to set text color to some RGB value
sb.setSpan(fcs, 0, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 

yourTextView.setText(sb); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:40:44.670

```
EditText et = (EditText) findViewById(R.id.edit1);
et.setTextColor(Color.parseColor("yourColorCodeHere")); 
```

# android - 使用 ArcGis 在 OneMap 上显示位置

> ID：14271411
> 
> 赞同：2
> 
> 时间：2013-01-11T03:54:27.140
> 
> 标签：android, maps, arcgis

我第一次在我的 android 应用程序（java）中使用 ArcGis。

[我通过“一张地图” http://www.onemap.sg/API/Help/RESTExamples.aspx](http://www.onemap.sg/API/Help/RESTExamples.aspx)获得了一个位置的 X 和 Y 坐标，

现在我想在地图中将此点显示为红点。

X-26005.0765 Y-30007.0973

有谁知道要遵循的任何教程。我看到了“你好地图教程”。

任何人都可以通过示例将我引导到教程或文档。

阿斯米塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T12:32:48.057

您必须使用图形图层来添加您的点的图形表示。下面的代码是一个示例，您在给定的坐标中打印一个点。

```
public class Test extends Activity {

// View elements
MapView map;
GraphicsLayer measures = new GraphicsLayer();
Point point;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Get elements of the view
    map = (MapView) findViewById(R.id.map);

    map.addLayer(measures);

    Point point = new Point(26005.0765, 30007.0973);

    measures.addGraphic(new Graphic(point,new SimpleMarkerSymbol(Color.RED,10,STYLE.CIRCLE)));

    map.zoomTo(point, 0);
} 
```

}

# c# - asp.net mvc 4 路由错误

> ID：14271414
> 
> 赞同：1
> 
> 时间：2013-01-11T03:55:10.043
> 
> 标签：c#, azure, asp.net-mvc-4, asp.net-mvc-routing

我目前在asp.net c#中创建一个网站，使用带有数据库的windows azure，当我将文件推送到服务器时它工作得很好，奇怪的是每次我点击播放按钮时都会出现这个错误。它已经到了必须继续将其发送到服务器进行预览变得烦人的地步，如果有人可以帮助我解决这个问题，将不胜感激。我还阅读了有关“区域注册”的信息，并尝试了很多方法，但似乎都没有奏效。这是我的 RouteConfig.cs

```
 public class RouteConfig
    {
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
name: "View",
url: "{controller}/{action}/{id}",
defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional}
        ); 
      } 
    } 
```

当我编辑网址时：

```
 "{controller}/{action}/{id}" 
```

并输入网址：

```
 "Views/Home/{action}/{id}" 
```

目录刚刚加载，允许我手动选择文件，错误 dosnt 出现，但索引无法访问，当我单击 Views 时，它变为“localhost - /Views/”但页面保持不变，我单击“视图”，我得到一个 404“请求的 URL：/Views/Views/”

这是我收到的错误：

```
 Server Error in '/' Application.

The view 'Index' or its master was not found or no view engine supports the searched     
locations. The following locations were searched:
~/Views/Home/Index.aspx
~/Views/Home/Index.ascx
~/Views/Shared/Index.aspx
~/Views/Shared/Index.ascx
~/Views/Home/Index.cshtml
~/Views/Home/Index.vbhtml
~/Views/Shared/Index.cshtml
~/Views/Shared/Index.vbhtml

Description: An unhandled exception occurred during the execution of the current web      
request. Please review the stack trace for more information about the error and where  
it originated in the code. 

Exception Details: System.InvalidOperationException: The view 'Index' or its master was   
not found or no view engine supports the searched locations. The following locations 
were searched:
~/Views/Home/Index.aspx
~/Views/Home/Index.ascx
~/Views/Shared/Index.aspx
~/Views/Shared/Index.ascx
~/Views/Home/Index.cshtml
~/Views/Home/Index.vbhtml
~/Views/Shared/Index.cshtml
~/Views/Shared/Index.vbhtml

Source Error: 

An unhandled exception was generated during the execution of the current web request.   
Information regarding the origin and location of the exception can be identified using   
the exception stack trace below.

Stack Trace: 

[InvalidOperationException: The view 'Index' or its master was not found or no view     
engine supports the searched locations. The following locations were searched:
~/Views/Home/Index.aspx
~/Views/Home/Index.ascx
~/Views/Shared/Index.aspx
~/Views/Shared/Index.ascx
~/Views/Home/Index.cshtml
~/Views/Home/Index.vbhtml
~/Views/Shared/Index.cshtml
~/Views/Shared/Index.vbhtml]
System.Web.Mvc.ViewResult.FindView(ControllerContext context) +355958
System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +121
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext    
controllerContext, ActionResult actionResult) +13
System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +23
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter,    
ResultExecutingContext preContext, Func`1 continuation) +242
System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +21
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext    
controllerContext, IList`1 filters, ActionResult actionResult) +177
System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +89
System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult  
asyncResult) +102
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult  
asyncResult) +43
System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult)  
+14
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47
System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult 
asyncResult) +10
System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) 
+25
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +47
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 
result) +9
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()  
+9629296
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&  
completedSynchronously) +155

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET   
Version:4.0.30319.18034 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T20:41:33.367

To simply add view:

Right mouse button inside HomeController Index action and choose "add View".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T15:26:08.797

从外观上看，您缺少 index.cshtml 文件。

在您的项目中，您可以有一个与控制器文件夹处于同一级别的视图文件夹。其中应该有一个**与控制器同名的文件夹减去“控制器”文本。** Index.cshtml 需要存在于其中。

# c++ - 我怎样才能让这个函数返回null？

> ID：14271419
> 
> 赞同：0
> 
> 时间：2013-01-11T03:55:48.680
> 
> 标签：c++

> **可能重复：**
> [如果未找到搜索结果，C++ 将返回“NULL”对象](https://stackoverflow.com/questions/2639255/c-return-a-null-object-if-search-result-not-found)

我试图在某种条件下返回 NULL，但它不会让我，为什么不，我怎样才能让它返回一个空值或 0？

```
struct Entity
{
    USHORT X;
    USHORT Y;
    UINT Serial;
    USHORT SpriteID;
    EntityType Type;
    Direction FacingDirection;
}; 
```

功能是：

```
Entity& GetEntityAt(int index)
                {
                    if (!GameObjects.empty())
                    {
                        lock_guard<mutex> lock(PadLock);
                        Entity& result = GameObjects[index];
                        return result;
                    }
                    return NULL; // <- this won't compile
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T03:58:03.980

C++ 中没有空引用之类的东西。您的选择包括：

*   更改您的函数以返回（智能）指针。
*   创建一个虚拟哨兵对象 ( `const Entity null_entity`)，并返回对该对象的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T03:57:48.733

引用不能为 NULL。您必须改用指针：

```
Entity* GetEntityAt(int index)
                {
                    if (!GameObjects.empty())
                    {
                        lock_guard<mutex> lock(PadLock);
                        return &GameObjects[index];
                    }
                    return NULL;
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T03:58:34.777

引用是它引用的对象*。*由于 NULL 不是对象，因此如果函数返回引用，则不能返回 NULL。

# wpf - 正确使用.Begin（this，true）时WPF故事板非交互式错误

> ID：14271420
> 
> 赞同：5
> 
> 时间：2013-01-11T03:56:15.260
> 
> 标签：wpf, storyboard, interactive

我是 WPF 的新手。我来自 C# 和 ASP.NET 背景。

我正在尝试创建一个非常基本的 WPF 应用程序，其中包含 2 个故事板，这些故事板通过交互式开始重载 .Begin(this,true) 以编程方式启动。

当引发 OnCompleted 事件时，将检查另一个故事板的状态。如果状态是情节提要没有运行，它应该开始情节提要。

我在 Completed 处理程序中收到以下错误：

抛出：无法执行操作，因为指定的 Storyboard 未应用于此对象以进行交互式控制。

我相信我使用了正确的 .Begin(this,true) 重载进行交互式控制。

我在下面包含了 MainWindow.cs 和 MainWindow.xaml 代码。我故意不通过 Xaml 中的触发器启动动画。我需要动态启动动画并检查其他多个动画的状态。示例被精简以关注主要问题。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
 using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;

namespace StoryboardExample
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public Storyboard Storyboard1 { get; set; }
    public Storyboard Storyboard2 { get; set; }

    public MainWindow()
    {
        InitializeComponent();

        Storyboard1 = (System.Windows.Media.Animation.Storyboard)FindResource("Storyboard1");
        Storyboard1.Name = "MegatronStoryboard";
        Storyboard1.Completed +=new EventHandler(Storyboard1_Completed);

        Storyboard2 = (System.Windows.Media.Animation.Storyboard)FindResource("Storyboard2");
        Storyboard2.Name = "TransformerStoryboard";
        Storyboard2.Completed += new EventHandler(Storyboard2_Completed);

        Storyboard2.Begin(this, true);
    }

    void Storyboard1_Completed(object sender, EventArgs e)
    {
        if (Storyboard2.GetCurrentState() == ClockState.Stopped)
        {
            Storyboard2.Begin(this, true);
            //Throws: Cannot perform action because the specified Storyboard was not applied to this object for interactive control.

            //I thought I was calling the Begin overload with the correct params for interactive control
            //I thought I was calling the Begin overload with the correct params for interactive control .Begin(this,true)
        }
    }

    void Storyboard2_Completed(object sender, EventArgs e)
    {
        if (Storyboard1.GetCurrentState() == ClockState.Stopped)
        {
            Storyboard1.Begin(this, true);
            //Throws: Cannot perform action because the specified Storyboard was not applied to this object for interactive control.

            //I thought I was calling the Begin overload with the correct params for interactive control .Begin(this,true)
        }
    }

}
}

<Window x:Name="MainWindow1" x:Class="StoryboardExample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Storyboard x:Key="Storyboard1">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="cnvsStoryboard1">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="cnvsStoryboard1">
            <EasingDoubleKeyFrame KeyTime="0" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="0.2"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="cnvsStoryboard1">
            <EasingDoubleKeyFrame KeyTime="0" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="0.2"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="cnvsStoryboard1">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="26"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="26"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="18"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="cnvsStoryboard1">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="353"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="353"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="5"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="Storyboard2">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="cnvsStoryboard2">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:4" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="cnvsStoryboard2">
            <EasingDoubleKeyFrame KeyTime="0" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:4" Value="0.2"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="cnvsStoryboard2">
            <EasingDoubleKeyFrame KeyTime="0" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:4" Value="0.2"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="cnvsStoryboard2">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="-230"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="-230"/>
            <EasingDoubleKeyFrame KeyTime="0:0:4" Value="137"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="cnvsStoryboard2">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="-10"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="-10"/>
            <EasingDoubleKeyFrame KeyTime="0:0:4" Value="-13"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>

<Canvas x:Name="LayoutRoot">
    <Canvas x:Name="cnvsStoryboard1" 
            Height="203" Canvas.Left="223" 
            Canvas.Top="-284" Width="253" 
            Opacity="0" 
            RenderTransformOrigin="0.5,0.5">
        <Canvas.RenderTransform>
            <TransformGroup>
                <ScaleTransform ScaleX="0.2" ScaleY="0.2"/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Canvas.RenderTransform>
        <Image x:Name="imgTransformer" Height="148" 
               Canvas.Left="42" Source="Images/transformer.png" 
               Stretch="Fill" Canvas.Top="8" Width="176" 
               RenderTransformOrigin="0.5,0.5">
            <Image.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform/>
                    <TranslateTransform X="1" Y="1"/>
                </TransformGroup>
            </Image.RenderTransform>
        </Image>
        <Label x:Name="lblTank" Content="Tank" Canvas.Left="101" Canvas.Top="160" FontSize="21.333">
            <Label.Foreground>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="Black"/>
                    <GradientStop Color="#FFCA2828" Offset="1"/>
                    <GradientStop Color="#FE412424" Offset="0.003"/>
                </LinearGradientBrush>
            </Label.Foreground>
        </Label>
    </Canvas>
    <Canvas x:Name="cnvsStoryboard2" Height="318" 
            Canvas.Left="41" Canvas.Top="229" 
            Width="215" Opacity="0" 
            RenderTransformOrigin="0.5,0.5">
        <Canvas.RenderTransform>
            <TransformGroup>
                <ScaleTransform ScaleX="0.2" ScaleY="0.2"/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Canvas.RenderTransform>
        <Image x:Name="imgMegatron" Height="264" Canvas.Left="33" 
               Source="Images/Megatron.png" 
               Stretch="Fill" Canvas.Top="8" 
               Width="153"/>
        <Label x:Name="lblMegatron" 
               Content="Megatron" 
               Canvas.Left="56" 
               Canvas.Top="278" 
               FontSize="21.333" 
               Width="107.707" 
               RenderTransformOrigin="0.696,0.599" Height="40">
            <Label.Foreground>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="Black"/>
                    <GradientStop Color="#FFCA2828" Offset="1"/>
                    <GradientStop Color="#FE412424" Offset="0.003"/>
                </LinearGradientBrush>
            </Label.Foreground>
        </Label>
    </Canvas>
</Canvas>
</Window> 
```

我一直在研究这个，我认为我在 storyboard.Begin(this,true) 重载中的第一个参数可能不正确？

任何帮助是极大的赞赏。

-亚伦

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T06:21:32.973

如果您使用 .GetCurrentState(this) 是否有效？或者，也许调用 .Stop(this); 在调用 .Start(this, true) 之前立即调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T13:52:42.687

另外，确保情节提要是可控的。来自 MSDN：“要使情节提要在代码中可控，您必须使用情节提要的 Begin 方法的适当重载并指定 true 以使其可控。”

更多信息：http: [//msdn.microsoft.com/en-us/library/cc672521.aspx](http://msdn.microsoft.com/en-us/library/cc672521.aspx)

# ios - 异常类型：EXC_CRASH (SIGABRT)

> ID：14271421
> 
> 赞同：12
> 
> 时间：2013-01-11T03:56:21.663
> 
> 标签：ios, crash, sigabrt

```
 Incident Identifier: B959CD08-FA2C-4A34-8D0C-343927FF6B86
 CrashReporter Key:   78e6625f679cb4cfb76f553075c64a197002c1bf
 Hardware Model:      iPad3,1
 Process:         ktv [50343]
 Path:
 /var/mobile/Applications/B8971D06-6001-49F7-81E1-8B88CDA5EB03/ktv.app/ktv
 Identifier:      ktv
 Version:         ??? (???)
 Code Type:       ARM (Native)
 Parent Process:  launchd [1]

 Date/Time:       2013-01-09 18:59:32.193 +0800
 OS Version:      iPhone OS 5.1.1 (9B206)
 Report Version:  104

 Exception Type:  EXC_CRASH (SIGABRT)
 Exception Codes: 0x00000000, 0x00000000
 Crashed Thread:  0

 Thread 0 name:  Dispatch queue: com.apple.main-thread
 Thread 0 Crashed:
 0   libsystem_kernel.dylib         0x30da732c __pthread_kill + 8
 1   libsystem_c.dylib              0x33338208 pthread_kill + 48
 2   libsystem_c.dylib              0x33331298 abort + 88
 3   libc++abi.dylib                    0x377c1f64 abort_message + 40
 4   libc++abi.dylib                    0x377bf3ea _ZL19safe_handler_callerPFvvE +114
 5   libc++abi.dylib                    0x377bf44a std::terminate() + 14
 6   libc++abi.dylib                    0x377c081e __cxa_rethrow + 82
 7   libobjc.A.dylib                    0x334772a2 objc_exception_rethrow + 6
 8   CoreFoundation                 0x3809c506 CFRunLoopRunSpecific + 398
 9   CoreFoundation                 0x3809c366 CFRunLoopRunInMode + 98
 10  GraphicsServices               0x3657f432 GSEventRunModal + 130
 11  UIKit                          0x30f4dcce UIApplicationMain + 1074
 12  ktv                                0x000af9b0 0xa6000 + 39344
 13  ktv                                0x000a86c0 0xa6000 + 9920

 Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
 Thread 1:
 0   libsystem_kernel.dylib         0x30d973a8 kevent + 24
 1   libdispatch.dylib              0x34a71f04 _dispatch_mgr_invoke + 708
 2   libdispatch.dylib              0x34a71c22 _dispatch_mgr_thread + 30

 Thread 2 name:  WebThread
 Thread 2:
 0   libsystem_kernel.dylib         0x30d97004 mach_msg_trap + 20
 1   libsystem_kernel.dylib         0x30d971fa mach_msg + 50
 2   CoreFoundation                 0x3811a3ec __CFRunLoopServiceMachPort + 120
 3   CoreFoundation                 0x38119124 __CFRunLoopRun + 876
 4   CoreFoundation                 0x3809c49e CFRunLoopRunSpecific + 294
 5   CoreFoundation                 0x3809c366 CFRunLoopRunInMode + 98
 6   WebCore                            0x31524c9c _ZL12RunWebThreadPv + 396
 7   libsystem_c.dylib              0x332f972e _pthread_start + 314
 8   libsystem_c.dylib              0x332f95e8 thread_start + 0

 Thread 3 name:  com.apple.NSURLConnectionLoader
 Thread 3:
 0   libsystem_kernel.dylib         0x30d97004 mach_msg_trap + 20
 1   libsystem_kernel.dylib         0x30d971fa mach_msg + 50
 2   CoreFoundation                 0x3811a3ec __CFRunLoopServiceMachPort + 120
 3   CoreFoundation                 0x38119124 __CFRunLoopRun + 876
 4   CoreFoundation                 0x3809c49e CFRunLoopRunSpecific + 294
 5   CoreFoundation                 0x3809c366 CFRunLoopRunInMode + 98
 6   Foundation                     0x372d7bb2 +[NSURLConnection(Loader)_resourceLoadLoop:] + 302
 7   Foundation                     0x372d7a7a -[NSThread main] + 66
 8   Foundation                     0x3736b58a __NSThread__main__ + 1042
 9   libsystem_c.dylib              0x332f972e _pthread_start + 314
 10  libsystem_c.dylib              0x332f95e8 thread_start + 0

 Thread 4 name:  com.apple.CFSocket.private
 Thread 4:
 0   libsystem_kernel.dylib         0x30da7570 __select + 20
 1   CoreFoundation                 0x3811e63a __CFSocketManager + 726
 2   libsystem_c.dylib              0x332f972e _pthread_start + 314
 3   libsystem_c.dylib              0x332f95e8 thread_start + 0

 Thread 5:
 0   libsystem_kernel.dylib         0x30d97004 mach_msg_trap + 20
 1   libsystem_kernel.dylib         0x30d971fa mach_msg + 50
 2   CoreFoundation                 0x3811a3ec __CFRunLoopServiceMachPort + 120
 3   CoreFoundation                 0x38119124 __CFRunLoopRun + 876
 4   CoreFoundation                 0x3809c49e CFRunLoopRunSpecific + 294
 5   CoreFoundation                 0x3809c366 CFRunLoopRunInMode + 98
 6   ktv                                0x0011683c 0xa6000 + 460860
 7   Foundation                     0x372d7a7a -[NSThread main] + 66
 8   Foundation                     0x3736b58a __NSThread__main__ + 1042
 9   libsystem_c.dylib              0x332f972e _pthread_start + 314
 10  libsystem_c.dylib              0x332f95e8 thread_start + 0

 Thread 6:
 0   libsystem_kernel.dylib         0x30da7628 __semwait_signal + 24
 1   libsystem_c.dylib              0x332fdb1a nanosleep + 138
 2   libsystem_c.dylib              0x33308608 sleep + 40
 3   ktv                                0x000b09fa 0xa6000 + 43514
 4   Foundation                     0x372d7a7a -[NSThread main] + 66
 5   Foundation                     0x3736b58a __NSThread__main__ + 1042
 6   libsystem_c.dylib              0x332f972e _pthread_start + 314
 7   libsystem_c.dylib              0x332f95e8 thread_start + 0

 Thread 7 name:  WebCore: CFNetwork Loader
 Thread 7:
 0   libsystem_kernel.dylib         0x30d97004 mach_msg_trap + 20
 1   libsystem_kernel.dylib         0x30d971fa mach_msg + 50
 2   CoreFoundation                 0x3811a3ec __CFRunLoopServiceMachPort + 120
 3   CoreFoundation                 0x38119124 __CFRunLoopRun + 876
 4   CoreFoundation                 0x3809c49e CFRunLoopRunSpecific + 294
 5   CoreFoundation                 0x3809c366 CFRunLoopRunInMode + 98
 6   WebCore                            0x3154e0d2 _ZN7WebCoreL15runLoaderThreadEPv + 122
 7   libsystem_c.dylib              0x332f972e _pthread_start + 314
 8   libsystem_c.dylib              0x332f95e8 thread_start + 0

 Thread 8 name:  com.apple.coremedia.player.async
 Thread 8:
 0   libsystem_kernel.dylib         0x30da7068 __psynch_cvwait + 24
 1   libsystem_c.dylib              0x332f9a46 _pthread_cond_wait + 634
 2   libsystem_c.dylib              0x332f97c2 pthread_cond_wait + 34
 3   CoreMedia                      0x35d3a868 FigSemaphoreWaitRelative + 268
 4   MediaToolbox                   0x329233e6 fpa_AsyncMovieControlThread + 22
 5   CoreMedia                      0x35d598b4 figThreadMain + 168
 6   libsystem_c.dylib              0x332f972e _pthread_start + 314
 7   libsystem_c.dylib              0x332f95e8 thread_start + 0

 Thread 9:
 0   libsystem_kernel.dylib         0x30da7cd4 __workq_kernreturn + 8
 1   libsystem_c.dylib              0x332f3f36 _pthread_wqthread + 610
 2   libsystem_c.dylib              0x332f3cc8 start_wqthread + 0

 Thread 10:
 0   libsystem_kernel.dylib         0x30da7cd4 __workq_kernreturn + 8
 1   libsystem_c.dylib              0x332f3f36 _pthread_wqthread + 610
 2   libsystem_c.dylib              0x332f3cc8 start_wqthread + 0

 Thread 11:
 0   libsystem_kernel.dylib         0x30da7cd4 __workq_kernreturn + 8
 1   libsystem_c.dylib              0x332f3f36 _pthread_wqthread + 610
 2   libsystem_c.dylib              0x332f3cc8 start_wqthread + 0

 Thread 12:
 0   libsystem_kernel.dylib         0x30da7cd4 __workq_kernreturn + 8
 1   libsystem_c.dylib              0x332f3f36 _pthread_wqthread + 610
 2   libsystem_c.dylib              0x332f3cc8 start_wqthread + 0

 Thread 13:
 0   libsystem_kernel.dylib         0x30da7cd4 __workq_kernreturn + 8
 1   libsystem_c.dylib              0x332f3f36 _pthread_wqthread + 610
 2   libsystem_c.dylib              0x332f3cc8 start_wqthread + 0

 Thread 0 crashed with ARM Thread State:
     r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
        r4: 0x00000006    r5: 0x3ec73d98      r6: 0x00000002      r7: 0x2fea4acc
            r8: 0x2fea4870    r9: 0x00000000     r10: 0x0000000a     r11:
            0x00000009
                ip: 0x00000148    sp: 0x2fea4ac0      lr: 0x3333820f      pc:
                0x30da732c
                  cpsr: 0x00080010

                  Binary Images:
                     0xa6000 -   0x264fff +ktv armv7
                     <071d076aba693352b8ae722bd01cace1>
                     /var/mobile/Applications/B8971D06-6001-49F7-81E1-8B88CDA5EB03/ktv.app/ktv
                       0x2eb000 -   0x2ebfff +MobileSubstrate.dylib armv6
                       <d8da1cc9b8ea37cfba03a60549cdac4c>
                       /Library/MobileSubstrate/MobileSubstrate.dylib
                         0x322000 -   0x323fff +SubstrateLoader.dylib armv6
                         <825b732151e6379b9cbec6e597a986fa>
                         /Library/Frameworks/CydiaSubstrate.framework/Libraries/SubstrateLoader.dylib
                         0x2fea5000 - 0x2fec6fff  dyld armv7
                         <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
                         0x30625000 - 0x30625fff  vecLib armv7
                         <a2cfe25e77aa36bfb4a30b2d0d2dd465>
                         /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
                         0x306ef000 - 0x306f6fff  SpringBoardUI armv7
                         <84e082f96770383096a5b083841d3f59>
                         /System/Library/PrivateFrameworks/SpringBoardUI.framework/SpringBoardUI
                         0x306f7000 - 0x307cffff  vImage armv7
                         <caf3648be2933384b6aa1ae7408ab4f0>
                         /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
                         0x30800000 - 0x3080afff  libvMisc.dylib armv7
                         <e8248c797b9b363594bb652ddf7ce16d>
                         /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
                         0x3080d000 - 0x30842fff  DataAccess armv7
                         <89fd0c22338b37538cf61803a0bca9e2>
                         /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
                         0x30882000 - 0x308dffff  StoreServices armv7
                         <6ce256d3cf433e4aa1af8d696bf1f75d>
                         /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
                         0x308e0000 - 0x30ba1fff  libLAPACK.dylib armv7
                         <0e94e9a7e7a334649afaccae0f1215a2>
                         /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
                         0x30bb3000 - 0x30bbbfff  MobileWiFi armv7
                         <b76c3e9fb78234c392058250d4620e72>
                         /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
                         0x30bbe000 - 0x30be3fff  OpenCL armv7 
```

有人知道这次崩溃的事情吗？这里的所有信息，我仍然不知道它有什么问题。重要的是我发现很多崩溃都包含这部分，但它可能导致很多原因。

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x30da732c __pthread_kill + 8
1   libsystem_c.dylib               0x33338208 pthread_kill + 48
2   libsystem_c.dylib               0x33331298 abort + 88
3   libc++abi.dylib                 0x377c1f64 abort_message + 40
4   libc++abi.dylib                 0x377bf3ea _ZL19safe_handler_callerPFvvE + 114
5   libc++abi.dylib                 0x377bf44a std::terminate() + 14
6   libc++abi.dylib                 0x377c081e __cxa_rethrow + 82
7   libobjc.A.dylib                 0x334772a2 objc_exception_rethrow + 6
8   CoreFoundation                  0x3809c506 CFRunLoopRunSpecific + 398
9   CoreFoundation                  0x3809c366 CFRunLoopRunInMode + 98
10  GraphicsServices                0x3657f432 GSEventRunModal + 130
11  UIKit                           0x30f4dcce UIApplicationMain + 1074
12  ktv                             0x000af9b0 0xa6000 + 39344
13  ktv                             0x000a86c0 0xa6000 + 9920 
```

我可以理解这部分不是我的应用程序崩溃的真正点吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T04:51:00.280

这不是崩溃，而是由于异常而中止。这意味着您的应用程序正在将错误数据传递给系统例程，并且该例程说它是错误的并且无法继续，因此它正在杀死您的应用程序。控制台应该显示出问题所在。可能发生的一个常见异常是尝试从其中只有 n 个对象的数组中获取第 n + 1 个对象。（例如，`NSArray`当只有 4 个元素时获取 an 的第 5 个元素。）控制台将显示一条消息，说明这一点。因此，请检查控制台以查看可能发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-03T07:40:54.247

解决了 ！！

我已经解决了这个问题：从您的项目文件中替换以下文件文件（如果您有项目的备份）：

1.  豆荚
2.  项目名称.xcworkspace
3.  podfile.lock, podfile
4.  如果缺少任何 pod，则在 podfile 中添加 pod 并安装 pod
5.  构建您的项目并运行

请以 zip 格式备份项目，这将有助于解决此错误。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-12-12T09:12:10.873

我删除了我的 Main.storyboard 并用另一个项目的故事板替换了它。我的解决方案是删除我的项目并重新创建它。

# c# - 如何使用 ExcelDNA 从某个范围内获取 Excel 公式？

> ID：14271423
> 
> 赞同：2
> 
> 时间：2013-01-11T03:56:25.150
> 
> 标签：c#, excel-dna

我想将一个范围（此时为 1d）传递给我的函数，并返回一个包含范围公式的字符串数组。

到目前为止，这是我的（不工作的）代码：

```
 public static object[,] ReadFormulas([ExcelArgument(AllowReference=true)]object arg)
    {
        ExcelReference theRef = (ExcelReference)arg;
        object[,] o = (object[,])theRef.GetValue();
        string[,] res = new string[o.GetLength(1),1];
        for(int i=0;i<o.GetLength(1);i++) 
        {
            ExcelReference cellRef = new ExcelReference(theRef.RowFirst+i, theRef.ColumnFirst);
            res[i,0] = XlCall.Excel(XlCall.xlfGetFormula, cellRef) as string;   //Errors here
        }
        return res;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T15:01:56.877

GET.FORMULA (xlfGetFormula) 函数只允许在宏表上使用。要从工作表中调用它，您的 Excel-DNA 函数应标记为`IsMacroType=true`，如下所示：

```
[ExcelFunction(IsMacroType=true)]
public static object[,] ReadFormulas(
        [ExcelArgument(AllowReference=true)]object arg) {...} 
```

此外，在循环中构造新的 ExcelReference 时需要小心。默认情况下，引用中引用的工作表将是当前工作表，而不是传入引用的工作表。您可能应该将 SheetId 显式传递给新的 ExcelReference。您的索引也有一些有趣的地方 - 也许这`o.GetLength(1)`不是您想要的。

以下版本似乎有效：

```
[ExcelFunction(IsMacroType=true)]
public static object[,] ReadFormulasMacroType(
        [ExcelArgument(AllowReference=true)]object arg)
{
    ExcelReference theRef = (ExcelReference)arg;
    int rows = theRef.RowLast - theRef.RowFirst + 1;
    object[,] res = new object[rows, 1];
    for(int i=0; i < rows; i++) 
    {
        ExcelReference cellRef = new ExcelReference( 
            theRef.RowFirst+i, theRef.RowFirst+i, 
            theRef.ColumnFirst,theRef.ColumnFirst,
            theRef.SheetId );
        res[i,0] = XlCall.Excel(XlCall.xlfGetFormula, cellRef);
    }
    return res;
} 
```

# javascript - How to optimize load of large amount of static data

> ID：14271445
> 
> 赞同：0
> 
> 时间：2013-01-11T03:58:39.600
> 
> 标签：javascript, html

Currently I place a large array in a cached file, that gets loaded into an `iframe`. The data gets loaded into a javascript variable.

Now I have the variable containing the data and do not need the javascript that was used to load it (the script tag in the `iframe`) I find that I cannot get rid of this script tag (really the DOM 'copy' of it). I thought deleting the iframe would do it, but does not.

Is there a way to do this?

If I use ajax to download the data, I do not have this extra bulk, but then it takes time to download each time.

OR

Is there a better way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:11:20.853

The `iframe` technique is bulky and is unnecessary, unless you are using it go around the same-origin policy. To add to that, scripts that are loaded and executed are already in memory. There is no way to pluck them out when they are loaded, even when the DOM elements that loaded them are removed.

Assuming that your data comes from the same domain, one way you can do this is to load them via "AJAX" by using [XHR](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest). This loads the contents of that file into a string that can be used by your program. You can store them in JS objects.

So that it will persist, you can use [localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage) to persist that data on the client-side. But do note that localStorage has size limits of 5-10MB depending on the browser.

I suggest you use a library that already handles these things. AJAX (with caching) can be done via [jQuery](http://jquery.com/) and cross-platform localStorage can be done using [Persist](http://pablotron.org/software/persist-js/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:03:50.567

In most cases, using XML to parse, search and read information could come in handy. Why not try that? It goes well with javascript.

[http://www.w3schools.com/xml/](http://www.w3schools.com/xml/)

# java - 从内部存储器存储和检索arrayList？

> ID：14271447
> 
> 赞同：2
> 
> 时间：2013-01-11T03:58:52.033
> 
> 标签：java, android

我正在构建一个家庭更换应用程序。我需要将 ArrayList 与用户选择在内部存储器中的启动器上显示的应用程序一起存储。我的意思是当应用程序关闭时不能删除数组。

我非常接近完成应用程序，我认为我不会在 Java 上做更多工作，我不是程序员，所以我只想要最简单的方法。如何在内部存储器中存储和检索 ArrayList？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T04:39:13.413

用于`SharedPreferenes`存储和检索`arrayList`..

检查这个链接..

[将 ArrayList 保存到 SharedPreferences](https://stackoverflow.com/questions/7057845/save-arraylist-to-sharedpreferences)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:00:46.253

您应该将此类数据作为 Arraylists 存储在数据库中，并且当您重新启动应用程序时，只需从数据库（SQLite）中获取数据并将其显示给用户。

这是关于 android SQLite 的一个很好的教程 [。](http://www.vogella.com/articles/AndroidSQLite/article.html)

查看[此](http://developer.android.com/guide/topics/data/data-storage.html)链接，了解 android 中所有不同的数据存储机制。但是对于您的要求，我建议使用 db.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T04:17:20.673

最简单的方法是使用 Java 序列化。它将对象的内容写入（文件）输出流。那是几行代码。
更好的一点（更快，更少的字节，其他非java系统可读）是使用自定义序列化，使用DataOuputStream。这会以您定义的格式创建一个二进制文件。

# php - 如何在php中隐藏我的加密密钥

> ID：14271450
> 
> 赞同：0
> 
> 时间：2013-01-11T03:59:22.843
> 
> 标签：php, encryption

我在 PHP 中开发了一个使用加密和解密的应用程序。我使用了 mcrypt_encrypt 和 mcrypt_decrypt 函数。

但我想以某种方式隐藏我的加密密钥。以免其他网络用户看到。我怎样才能做到这一点 ？

我尝试将我的密钥保存在一个单独的文件中，而不是制作该文件的 exe。但是当我在我的 php 页面上执行它时，它会返回空白。

我试过->`exec('key.exe',$key); print_r($key);`

谁能帮我，我怎样才能隐藏我的加密密钥？还有其他方法吗？

,

毛萨米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:09:24.530

您可以将加密密钥隐藏在 Web 目录之外，并使用

```
$File = "/Path/To/File.ext";
$EncryptKey = file_get_contents($File);
print_r($EncryptKey); 
```

将其隐藏在您的 Web 目录之外，以便只有脚本可以访问它；或具有完全系统访问权限的管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:07:09.070

如果你真的需要使用可执行文件“key.exe”，你可以使用

```
$output = shell_exec('key.exe'); 
```

它将 key.exe 的输出存储在 $output 变量中。您还可以尝试使用以下命令创建临时文件：

```
exec('key.exe > C:/output'); // Store output data from key.exe to c:/output
$output = file_get_contents('C:/output'); // read the output file
unlink('C:/output');  // Delete the output file after reading 
```

但您也可以手动创建加密密钥并将其保存到文件 c:/mykey 中，然后仅使用

```
file_get_contents('c:/mykey'); 
```

路径适用于 windows，因为 key.exe 听起来像你有一台 windows 机器，如果不使用**/tmp/**而不是**c:**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T04:08:52.540

我让它与`exec()`命令一起工作。

我们不能使用`file_get_contents('key.exe')`，因为它不能给出原始内容。

我得到了这段代码的解决方案

```
$str = exec('path\key.exe'); 
echo $str; 
```

感谢 Alex Lunix、Marc B、CodeslnChaos、Daryl Gill、jogesh_p 和 prdatur 的帮助。

# sharepoint - 登录后如何自动关闭 SharePoint Online 登录窗口？

> ID：14271455
> 
> 赞同：0
> 
> 时间：2013-01-11T03:59:46.883
> 
> 标签：sharepoint

我正在使用 ASP.NET 应用程序。我的页面显示来自 SharePoint Online 的内容（图像）。当然，如果我想从 SharePoint 显示某些内容，我必须先进行身份验证。所以我写了一个脚本来检查用户是否登录。如果没有，将打开一个窗口并导航到 SharePoint 登录页面。

问题是用户进行身份验证后如何关闭此登录窗口？我已经在此处尝试了解决方案[关闭窗口，重定向后](https://stackoverflow.com/questions/8773622/close-window-after-redirect)但它仅适用于本地站点，来自不同域（SharePoint Online）的登录页面，由于跨帧脚本预防，它返回“访问被拒绝”错误。

那么还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:16:29.573

我认为，当用户单击“确定”并且身份验证代码运行并对用户进行身份验证时，您可以运行代码或 javascriupt 来关闭窗口。

如果我错过了什么，请纠正我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:02:41.300

我找到了解决方案。在 SharePoint 上创建一个`.aspx`页面，在`window.close`其中放置 JavaScript 以关闭窗口 ( )。

然后从 Web 应用程序中，如果用户未登录 SharePoint Online，请打开新窗口并导航到`.aspx`上面的页面。

然后 SharePoint 首先将您重定向到 Microsoft Online 登录地址。身份验证后，它会将您带回到您来的地方，`.aspx`页面，然后 JavaScript 执行并关闭窗口。

# excel - Excel 2007 VBA win32 dll 函数奇怪的行为？

> ID：14271458
> 
> 赞同：0
> 
> 时间：2013-01-11T04:00:03.780
> 
> 标签：excel, vba, winapi, dll, gdi

只是为了好玩，我想从 excel-vba 调用 GDI (win32) 绘图函数。以下是我的 dll 函数声明。这些都是从win32导入的。

```
Public Declare Function GetDC _
Lib "user32.dll" _
(ByVal handle As Long) As Long

Public Declare Function MoveToEx _
Lib "gdi32.dll" _
(ByVal handle As Long, ByVal x As Integer, ByVal y As Integer, ByVal lppoint As Long) As Integer

Public Declare Function LineTo _
Lib "gdi32.dll" _
(ByVal handle As Long, ByVal x As Integer, ByVal y As Integer) As Integer

Public Declare Function ReleaseDC _
Lib "user32.dll" _
(ByVal hwnd As Long, ByVal hdc As Long) As Integer

Public Declare Function GetSystemMetrics _
Lib "user32.dll" _
(ByVal i As Integer) As Integer 
```

我希望得到的结果是从屏幕左上角到右下角的一条线。以下代码给出了所需的结果。

```
Private Sub CommandButton1_Click()
    Dim dc As Long

    dc = GetDC(0)
    screenX = GetSystemMetrics(0)
    screenY = GetSystemMetrics(1)
    MoveToEx dc, 0, 0, 0
    LineTo dc, screenX, screenY

    ReleaseDC 0, dc
End Sub 
```

但问题是下面的代码没有做任何事情。为什么？

```
Private Sub CommandButton1_Click()
    Dim dc As Long
    Dim screenX, screenY As Integer

    dc = GetDC(0)
    screenX = GetSystemMetrics(0)
    screenY = GetSystemMetrics(1)
    MoveToEx dc, 0, 0, 0
    LineTo dc, screenX, screenY

    ReleaseDC 0, dc
End Sub 
```

唯一的区别是在第二个代码中，第三行声明了变量`screenX`，`screenY`而在第一个代码中，它们没有被声明。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:23:02.893

除了变量的所有错误声明，导致意外使用变体之外，我还可以看到更多问题：

1.  您`Integer`在许多 API 调用中使用。但在 VBA`Integer`中是有符号的 16 位类型。`Integer`您的语句中的所有用途都`Declare`应该是`Long`一个有符号的 32 位整数。
2.  您正在向屏幕 DC 绘图。你不应该这样做。它将产生不可预测的结果。屏幕归系统所有，您不应在该 DC 上绘图。你需要找到另一种方法来做你想做的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:52:24.390

您不得将变量声明设置为必需。如果你这样做了，你会看到一个

```
Option Explicit 
```

在每个模块的顶部。

由于您没有它，因此两者`screenX`都`screenY`默认为您的第一个代码示例中的变体。

在第二个示例中，您设置`screenX`为一个变量，它可以容纳任何数据类型，但您明确设置`screenY`为整数，并且整数不是您正在执行的正确数据类型。

编辑：根据大卫的回答，你需要长而不是整数。

注意：小心变体，因为它们会引入奇怪的、难以发现的错误。整数显然不是正确的类型，但您应该弄清楚您需要什么数据类型并显式声明它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T04:10:33.237

尝试：

```
Dim screenX As Integer
Dim screenY As Integer 
```

因为`Dim screenX, screenY As Integer`实际上相当于：

```
Dim screenX As Variant
Dim screenY As Integer 
```

# c++ - 枚举到数组绑定

> ID：14271463
> 
> 赞同：3
> 
> 时间：2013-01-11T04:00:52.400
> 
> 标签：c++, coding-style

> 枚举之间可以紧密绑定到它们对应的数组吗

请注意，这些只是伪代码，只是为了理解。

**方法1。一种方法是我们创建声明并定义数组。**

```
enum Names
{
    ABC,
    DEF,
    GHI
};

char* names[] = {"abc", "def", "ghl"};      // Declare and define. 
```

为了获得我们将做的价值

```
char *nm = names[ABC]; 
```

这种方法的缺点是我们需要保持枚举和名称数组同步，即如果我们更改枚举，我们会移动某些值，这些值也需要在表中完成

例如：将 DEF 移动到枚举的顶部

enun 名称 { DEF, ABC, GHI };

// 也改变数组。

char* 名称[] = {“def”、“abc”、“ghi”}

**方法2。**

打破枚举和数组之间绑定的一种方法是使用如下所示的创建函数。

诠释 CreateNamesArray() {

```
 Names[GHI] = "ghl";

      Names[DEF] = "def";

      Names[GHI] = "ghi"; 
```

};

现在，即使枚举发生更改，数组也不会受到影响。这种方法的一个缺点是我们需要在访问表之前调用该函数。

请建议哪种方法更好。这些表将是大约 30-100 个条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:09:22.860

您可以使用宏来生成它们：

```
#define LIST \
    PAIR(ABC, "abc") \
    PAIR(DEF, "def") \
    PAIR(GHI, "ghi")

#define PAIR(key, value) key,
enum Names { LIST };
#undef PAIR

#define PAIR(key, value) value,
char* names[] = { LIST };
#undef PAIR

#undef LIST 
```

更改其中的对`LIST`以设置键/值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:16:19.240

不使用宏：

```
#include <iostream>

enum Names { ABC, DEF, GHI };
template< Names n > struct Name { static const char *val; };
template<> const char *Name<ABC>::val = {"abc"};
template<> const char *Name<DEF>::val = {"def"};
template<> const char *Name<GHI>::val = {"ghi"};

int main() {
  std::cout << Name<ABC>::val << std::endl;
  std::cout << Name<DEF>::val << std::endl;
  std::cout << Name<GHI>::val << std::endl;
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:19:33.547

我推荐[Boost.Preprocessor](http://www.boost.org/doc/libs/1_52_0/libs/preprocessor/doc/index.html)来实现：

```
#include <boost/preprocessor.hpp>
#define DECLARE_PAIRS_ENUM_ELEMENT(r, d, e) BOOST_PP_TUPLE_ELEM(2, 0, e),
#define DECLARE_PAIRS_STRING_ELEMENT(r, d, e) BOOST_PP_TUPLE_ELEM(2, 1, e),
#define DECLARE_PAIRS(n, s) \
    enum n##Names { BOOST_PP_SEQ_FOR_EACH(DECLARE_PAIRS_ENUM_ELEMENT, _, s) }; \
    std::string n##Strings[] = \
    { BOOST_PP_SEQ_FOR_EACH(DECLARE_PAIRS_STRING_ELEMENT, _, s) };
DECLARE_PAIRS(
    someList,
    ((DEF, "ABC"))
    ((ABC, "DEF"))
    ((GHI, "GHI"))
); 
```

# web-services - 如何强制 websphere v7.0 生成内联模式？

> ID：14271466
> 
> 赞同：3
> 
> 时间：2013-01-11T04:01:00.940
> 
> 标签：web-services, wsdl, websphere

我正在使用 RAD 8 和 websphere 7 来开发 Web 应用程序。我正在开发一个 Web 服务，我发现默认情况下 websphere 会为输入和输出复杂类型生成 XSD，并在 WSDL 中添加导入元素。我想知道我们需要在 websphere 中进行哪些配置更改以生成与 WSDL 内联的模式

# android - 如何对数据进行排序

> ID：14271467
> 
> 赞同：1
> 
> 时间：2013-01-11T04:01:03.210
> 
> 标签：android, sorting

如果数据是[例如：A，a，2，b，B，1，c，3，d，C，4，e，f，5，g，R，h6，i，T，j，我想对数据进行排序,7,H] 这里的例子有 3 种类型。大写字母，小字母，数字..还有“3”复选框[大写字母，小字母，数字]。当我检查 capsalphabeticCHECKBOX ALL RELATED TO Caps 时：A、B、C、R、T、H、a、b、c、d。我选择了哪个复选框，该订单必须先来 REST 必须在之后。如何做任何想法请。目前我是ANDROID的新手。目前我正在这样做

```
 caps =  (CheckBox) c.findViewById(R.id.capsCheckBox);
    caps .setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {
              sortView.setHint("Sort by Caps");
              if (((CheckBox) v).isChecked()) {
                  numbers.setChecked(false);
                  small.setChecked(false);
                  caps.setChecked(true);
                  numbersSort = false;
                  smallSort = false;
                  capsSort = true;
                  Collections.sort(ListArray, new Comparator<Object>() {
                      @Override
                      public int compare(Object o1, Object o2) {
                          Sample p1 = (Sample ) o1;
                          Sample p2 = (Sample ) o2;
                          return p1.getPriority().compareToIgnoreCase(p2.getPriority());     
                         }
             });
                    dataAdapter = new ListAdapter(ListView.this, ListArray, user);
                    listView.setAdapter(dataAdapter);
                    dataAdapter.notifyDataSetChanged();
                    } else {                            
                        caps.setChecked(true);  
                    }
          }
        }); 
```

# ruby-on-rails - Rails 安全警告 - 秘密选项

> ID：14271470
> 
> 赞同：1
> 
> 时间：2013-01-11T04:01:42.470
> 
> 标签：ruby-on-rails, ruby, security

> **可能重复：**
> [没有提供给 Rack::Session::Cookie 警告的秘密选项？](https://stackoverflow.com/questions/10374871/no-secret-option-provided-to-racksessioncookie-warning)

我刚刚创建了一个新的 rails 3.2.8 应用程序并运行了以下命令

```
 rails g paperclip myModel image 
```

之后我收到此警告

```
 SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
    This poses a security threat. It is strongly recommended that you
    provide a secret to prevent exploits that may be possible from crafted
    cookies. This will not be supported in future versions of Rack, and
    future versions will even invalidate your existing user cookies. 
```

这一切都很好，但我应该怎么做。有任何想法吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:09:21.683

看这里：

[没有向 Rack::Session::Cookie 警告提供秘密选项？](https://stackoverflow.com/questions/10374871/no-secret-option-provided-to-racksessioncookie-warning)

您可能还想立即升级到 Rails 3.2.11 以修补一些最近发现的安全漏洞。

# c - 如何在c中读取换行符

> ID：14271474
> 
> 赞同：4
> 
> 时间：2013-01-11T04:01:54.187
> 
> 标签：c, output

有人可以解释以下代码

```
#include<stdio.h>
main()
{
    char c[]="abc\nabc";
    puts(c);
} 
```

此代码按预期生成：

```
abc
abc 
```

但是当我尝试将相同的字符串作为用户的输入时，

```
#include<stdio.h>
main()
{
    char c[]="abc\nabc";
    gets(c);             // i type in "abc\nabc" 
    puts(c);
} 
```

此代码生成：

```
abc\nabc 
```

如何让程序正确读取换行符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:08:09.453

你`\`当时真的打字了`n`吗？

如果是这样，它实际上是在您的字符串中放置了 a `\`，然后是 a `n`，就好像您执行了以下操作一样：

```
char c[] = "abc\\nabc"; /* note the escaped \ */ 
```

这在逻辑上不是换行符，而是 a`\`后跟 a `n`。

如果您想在用户输入中支持[转义序列](http://msdn.microsoft.com/en-us/library/h21280bw%28v=vs.80%29.aspx)，则需要对任何用户输入进行后处理以创建适当的转义序列。

```
/* translate escape sequences inline */
for (i = 0, j = 0; c[i] != 0; ++i, ++j) {
   if (c[i] == '\\' && c[i+1] != 0) {
       switch(c[++i]) {
       case 'n':  c[j] = '\n'; break;
       case '\\': c[j] = '\\'; break;
       /* add the others you'd like to handle here */
       /* case 'a': ... */
       default:   c[j] = ' ';  break;
       }
   } else {
       c[j] = c[i];
   }
}

c[j] = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T04:19:17.583

在字符串文字或作为 char const 中，'\n' 是一个字符，其中 \ 被称为转义字符。但作为输入，'\' 是一个真实字符，而不是转义字符。

# c# - 条件包含不适用于 Entityt Framework 5

> ID：14271475
> 
> 赞同：1
> 
> 时间：2013-01-11T04:01:58.500
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我正在尝试使用条件包含（[在此处](http://blogs.msdn.com/b/alexj/archive/2009/10/13/tip-37-how-to-do-a-conditional-include.aspx)解释，但它没有检索子信息。为什么？我想我已经遵循了所有步骤......我正在使用 WebApi 控制器和 Visual Studio 2012

我已经检查过了，我已经为每个房子分配了 doorTypes。这是多对多的关系。

我有这个：

**DoorType 有这个属性**

```
public virtual ICollection<House> Houses{ get; set; } 
```

**房子有这个属性**

```
public virtual ICollection<Door> DoorTypes{ get; set; } 
```

**我正在查询这个方法**

```
public IEnumerable<House> GetList(string latitude, string longitude, string idHousesTypeList)
{
    IEnumerable<int> intIds = null;

    if (!string.IsNullOrEmpty(idHousesTypeList))
    {
        var ids = idHousesTypeList.Split(',');
        intIds = ids.Select(int.Parse);
    }

    var location = DbGeography.FromText(string.Format("POINT ({0} {1})", latitude, longitude), 4326);
    var count = 0;
    var radius = 0.0;
    IEnumerable<House> houses = null;

    while (count < 5 && radius < 500)
    {
        radius += 2.5;
        var radiusLocal = radius;

        var dbquery =
            from house in Uow.Houses.GetAll()
            where house.Location.Distance(location) / 1000 <= radiusLocal
            orderby house.Location.Distance(location)
            select new
            {
                house,
                doorTypes= from doorType in house.DoorTypes
                                where intIds.Contains(doorType.Id)
                                select doorType
            };

        houses = dbquery
        .AsEnumerable()
        .Select(p => p.house);

        count = houses.Count();
    }

    if (houses != null && houses.Any())
    {
        return houses;
    }

    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
} 
```

**我正在使用通用 EFRepository**

```
public class EFRepository<T> : IRepository<T> where T : class
{
    public EFRepository(DbContext dbContext)
    {
        if (dbContext == null)
            throw new ArgumentNullException("dbContext");
        DbContext = dbContext;
        DbSet = DbContext.Set<T>();
    }

    protected DbContext DbContext { get; set; }

    protected DbSet<T> DbSet { get; set; }

    public virtual IQueryable<T> GetAll()
    {
        return DbSet;
    }

    public virtual IQueryable<T> GetAllIncluding(params Expression<Func<T, object>>[] includeProperties)
    {
        IQueryable<T> query = DbContext.Set<T>();
        foreach (var includeProperty in includeProperties)
        {
            query = query.Include(includeProperty);
        }

        return query;
    }

    public virtual T GetById(long id)
    {
        return DbSet.Find(id);
    }

    public virtual IQueryable<T> GetByPredicate(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
    {
        IQueryable<T> query = DbContext.Set<T>().Where(predicate);
        return query;
    }

    public virtual IQueryable<T> GetByPredicateIncluding(System.Linq.Expressions.Expression<Func<T, bool>> predicate, params Expression<Func<T, object>>[] includeProperties)
    {
        IQueryable<T> query = DbContext.Set<T>().Where(predicate);
        foreach (var includeProperty in includeProperties)
        {
            query = query.Include(includeProperty);
        }

        return query;
    }

    public virtual void Upsert(T entity, Func<T, bool> insertExpression)
    {
        if (insertExpression.Invoke(entity))
        {
            Add(entity);
        }
        else
        {
            Update(entity);
        }
    }

    public virtual void Add(T entity)
    {
        DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
        if (dbEntityEntry.State != EntityState.Detached)
        {
            dbEntityEntry.State = EntityState.Added;
        }
        else
        {
            DbSet.Add(entity);
        }
    }

    public virtual void Update(T entity)
    {
        DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
        if (dbEntityEntry.State == EntityState.Detached)
        {
            DbSet.Attach(entity);
        }
        dbEntityEntry.State = EntityState.Modified;
    }

    public virtual void Delete(T entity)
    {
        DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
        if (dbEntityEntry.State != EntityState.Deleted)
        {
            dbEntityEntry.State = EntityState.Deleted;
        }
        else
        {
            DbSet.Attach(entity);
            DbSet.Remove(entity);
        }
    }

    public virtual void Delete(int id)
    {
        var entity = GetById(id);
        if (entity == null) return; // not found; assume already deleted.
        Delete(entity);
    }
} 
```

输出正确显示了所有房屋，但 doorTypes 数组为空。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:06:13.033

> 这是多对多的关系。

那就是问题所在。关系修复不适用于多对多关系，仅适用于一对一或一对多关系。

执行查询后，您需要手动构建导航属性。但在这种情况下，您可以相对简单地做到这一点：

```
houses = dbquery
    .AsEnumerable()
    .Select(p => {
        p.house.DoorTypes = p.doorTypes;
        return p.house;
    }); 
```

这与将导航集合显式加载到上下文中不适用于多对多关系的原因相同，请参阅此问题：[EF 4.1 loading filtered child collections not working for many-to-mans](https://stackoverflow.com/q/6141988/270591) and the answer to it，尤其是参考 Zeeshan Hirani 对关系修复的解释，以获得有关该主题的更深入背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:05:55.340

目前尚不清楚您是如何实现的，但是当您从上下文中获取所有房屋时，请`Uow.Houses.GetAll()`尝试将其[包含在结果中：](http://msdn.microsoft.com/en-us/library/bb738708.aspx) `DoorTypes`

```
return context.Houses.Include("DoorTypes"); 
```

并确保您`idHousesTypeLis`使用现有的 ID 传递。

更新：`Include`是 DbQuery 的成员。当您将 Set 转换为 时，它变得不可用`IQueriable<T>`。所以，试试这个：

```
public class HouseRepository : EFRepository<House>
{
    public override IQueryable<House> GetAll()
    {
        return DbContext.Set<House>().Include("DoorTypes");
    }
} 
```

# java - 如何使用@responsebody 在 JSON 返回值中添加字段名称？

> ID：14271482
> 
> 赞同：1
> 
> 时间：2013-01-11T04:03:11.017
> 
> 标签：java, spring

我有一个控制器函数，它返回一个列表数据类型，一旦发送回我的 jQuery，就会转换为 JSON。

我的问题（不是真正的问题）是数据返回没有字段名称，我希望它们具有字段名称。

我在这里找到了一些涉及配置杰克逊的帖子，但它似乎是一个全局设置。我只希望一些函数返回命名字段。

你能帮忙吗？谢谢

**我的控制器功能**

```
@RequestMapping(value = "/GetEvents", method = RequestMethod.GET, headers="Accept=*/*")
public @ResponseBody List<Session> getEvents(@RequestParam("description") String description) {
    List<Session> temp = issuService.getEvents(description);

    return temp;
} 
```

**按函数返回数据（在 firebug 中查看）**

```
[[1149,"Thursday , 31 January   2013 @ 13:00 - 15:00",1,"2013-01-31"],[1150,"Wednesday, 06 February  2013 @ 13:00 - 15:00",1,"2013-02-06"],[1151,"Wednesday, 13 February  2013 @ 13:00 - 15:00",1,"2013-02-13"],[1152,"Monday   , 18 February  2013 @ 13:00 - 15:00",1,"2013-02-18"],[1169,"Wednesday, 20 February  2013 @ 13:00 - 15:00",1,"2013-02-20"],[1170,"Monday   , 25 February  2013 @ 13:00 - 15:00",1,"2013-02-25"],[1171,"Tuesday  , 26 February  2013 @ 13:00 - 15:00",1,"2013-02-26"],[1172,"Wednesday, 27 February  2013 @ 13:00 - 15:00",1,"2013-02-27"],[1173,"Thursday , 28 February  2013 @ 13:00 - 15:00",1,"2013-02-28"],[1174,"Friday   , 01 March     2013 @ 13:00 - 15:00",1,"2013-03-01"]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:11:11.967

控制器返回的数据格式看起来像一个数组。不是有效的 json 格式。

参考这篇文章 [Spring配置@ResponseBody JSON格式](https://stackoverflow.com/questions/4823358/spring-configure-responsebody-json-format)

问同样的问题。

# jruby - 在 Trinidad 上包含用于 jruby/rails 的罐子

> ID：14271485
> 
> 赞同：1
> 
> 时间：2013-01-11T04:03:33.183
> 
> 标签：jruby, trinidad-gem

我正在尝试在特立尼达上运行我的 jruby 应用程序。

按照[自述](https://github.com/trinidad/trinidad)文件，我将 trinidad gem 包含在 gemfile 中并运行

`rails server -e production -p 80 -d trinidad`

当我使用浏览器访问我的服务器时，它给了我一条错误消息，说明它如何无法为我的数据库驱动程序找到正确的类，`lib/odbc6.jar`如果我使用 WEBrick 运行该项目，它就可以正常工作。错误消息如下所示：

```
org.jruby.rack.RackInitializationException: 
load error: /home/bdares/project/config/environment
java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@(my_jdbc_connection_string) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:35:18.690

请尝试设置`$CLASSPATH`全局变量。

这里有更多细节：[https ://stackoverflow.com/a/11130246/255633](https://stackoverflow.com/a/11130246/255633)

# java - java包和目录之间是否存在一对一的关系？

> ID：14271486
> 
> 赞同：1
> 
> 时间：2013-01-11T04:03:41.537
> 
> 标签：java, package, directory, netbeans-7

新学java。任何人都可以清除我的疑问吗？

我的演示应用程序有这样的代码

> SourcePackages ---> ex1.pkg1 | --->食物
> 
> 1.  我的 ex1.pkg1 有一个名为 Ex11 的类，它包含主要功能。
> 2.  我的食物包包含一个抽象类水果和苹果类水果的另一个子类。
> 3.  我在 Ex11 类的主函数中创建了一个 Apple 类的实例。

代码编译得很好，运行也很好。但我想了解java中的目录结构。

当我运行程序时，我可以在 build/class 目录中看到以下文件夹

> 1.  ex1 -> pkg1 -> Ex11.class
> 2.  食物 -> Apple.class 和fruit.class
> 3.  水果 -> 空的

尽管我没有任何名为fruit的包，但我不明白为什么要创建目录fruit？即使我删除它并再次编译它也没有创建。但是在我运行应用程序时创建。

额外信息 - 我正在使用 netbean IDE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:10:30.327

回答你的问题 不完全是。您可以在不同的位置甚至在不同的 jar 中创建相同的目录结构（因此是相同的包）。例如; 您可以拥有目录 CoreDomain\com\example 和 CoreServices\com\example。现在，这两个目录中的类将具有相同的包 com.example 即使它们位于不同的目录中（但相同的目录与 ref. 到起点；因为两者都在 com.example 中）

# python - 在维护 git 历史记录的同时进行 API 版本控制

> ID：14271489
> 
> 赞同：1
> 
> 时间：2013-01-11T04:03:57.270
> 
> 标签：python, git, api, version

我目前有一个 v1 API，并为 v2 更新并创建了新脚本。该 API 由其他开发人员使用，由一堆脚本组成。在迁移和添加 v2 之前，我想确保我有一个成功的版本控制策略可以继续。

目前，在使用 API 之前调用了一个 bash 脚本，您可以使用它提供版本 # 或默认情况下为您提供最新版本。最初，我打算为每个不同的版本设置不同的子文件夹，但对于不会在修订版和添加内容的脚本之间更改的脚本，git 历史记录将无法正确保留，因为原始文件仍将驻留在 v1 子目录中并且不会被“git mv”。这显然不是最好的方法，但我目前想不出更好的方法。

任何建议都会有所帮助，但一个限制是我们不能拥有具有不同分支的 git 子模块。只要脚本可以访问，就没有其他限制（例如，可以删除用于设置的 bash 文件）。谢谢！

编辑：我们在“API”目录上方也有脚本，它们是调用 API 的同一个 repo 的一部分（我们是我们自己的 API 的消费者）。在使用任何版本的 API 时，对这些文件的更改都需要可见，并且不能仅在最新版本中可见（与 repo 中的标签相关）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:16:28.850

我认为您想在 git 存储库中使用标签。对于您的每个版本的 api，使用`git tag vn`并且您不需要维护文件的早期版本。您可以访问特定版本的所有文件，只需使用`git checkout vn`.

如果使用远程存储库，则需要使用标志`--tags`将标签发送到远程存储库，即`git push --tags`.

# php - Javascript decodeURIComponent() 与 PHP

> ID：14271492
> 
> 赞同：0
> 
> 时间：2013-01-11T04:04:08.783
> 
> 标签：php, javascript

提交表单时，我正在使用 javascript 的[encodeURIComponent()函数对 URL 进行编码：](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

```
 <form name="form" action="actions.php" method="post">

      <input type="text" name="url" id="url" value="http://">

      <script type="text/javascript">

        function encodeLinks(){
            var e = document.getElementById('url')
            e.value = encodeURIComponent(e.value);        
        }  

      </script>

        <button type="submit" class="btn btn-primary" onclick="encodeLinks()">Submit</button>
    </form> 
```

将数据返回到操作页面上的 javascript 以便对其进行解码然后在 mysql 查询中使用它的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:29:14.500

这样做是没有意义的。浏览器会自动编码你发送的数据，服务器会自动解码。一切都是透明的，所以你根本不需要担心。

# iphone - UILongPressGestureRecognizer 处理程序使用不正确的对象

> ID：14271493
> 
> 赞同：0
> 
> 时间：2013-01-11T04:04:16.323
> 
> 标签：iphone, objective-c, uigesturerecognizer

我有一个表格视图，每个单元格都是一个自定义的表格单元格视图，有一个子视图，子视图使用CoreText绘制文本。子视图的类名是 CCoreTextView，下面是 CCoreTextView 的一些代码

```
@interface CoreTextView()
{
    CTFrameRef _frame;
}
@end

- (void) initWithFrame:(CGRect)frame 
{
    self = [super initWithFrame:frame];
    if (self) {
        UILongPressGestureRecognizer *myLongPressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(myLongPressHandle:)];
        [self addGestureRecognizer:myLongPressRecognizer];
        [myLongPressRecognizer release];

    }
}

- (void)drawRect:(CGRect)rect
{
CGContextRef context = UIGraphicsGetCurrentContext();
[self drawText:context];
}

- (void)drawText:(CGContextRef)context
{
    CTFontRef font = CTFontCreateWithName((CFStringRef)self.font.fontName, self.font.pointSize, NULL);
    NSDictionary *attribs = [NSDictionary dictionaryWithObjectsAndKeys:(id)font, kCTFontAttributeName, nil];
    NSMutableAttributedString *attribString = [[NSMutableAttributedString alloc] initWithString:self.text attributes:attribs];
    CFRelease(font);

    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGFloat headIdent = CORETEXTVIEW_HEAD_IDENT;
    CGFloat tailIdent = CORETEXTVIEW_TAIL_IDENT;
    CTParagraphStyleSetting settings[] = {
        {kCTParagraphStyleSpecifierAlignment, sizeof(_textAlignment), &_textAlignment },
        {kCTParagraphStyleSpecifierLineSpacing, sizeof(CGFloat), &_leading},
        {kCTParagraphStyleSpecifierFirstLineHeadIndent, sizeof(CGFloat), &_firstLineHeadIndent},
        {kCTParagraphStyleSpecifierHeadIndent, sizeof(CGFloat), &headIdent},
        {kCTParagraphStyleSpecifierTailIndent, sizeof(CGFloat), &tailIdent}

    };

    CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(settings, sizeof(settings) / sizeof(settings[0]));

    CFAttributedStringSetAttribute((CFMutableAttributedStringRef)attribString,
                               CFRangeMake(0, [self.text length]),
                               kCTParagraphStyleAttributeName, 
                               paragraphStyle);
    CFRelease(paragraphStyle);

    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attribString);

    CGRect columnFrame = CGRectMake(0,
                                0,
                                self.bounds.size.width,
                                self.bounds.size.height);
    columnFrame = UIEdgeInsetsInsetRect(columnFrame, UIEdgeInsetsMake(0, CORETEXTVIEW_EDGE_INSET_LEFT, 0, CORETEXTVIEW_EDGE_INSET_RIGHT));

    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, &CGAffineTransformIdentity, columnFrame);

    CFRange textRange = CFRangeMake(0, 0);
    if (NULL != _frame) {
        CFRelease(_frame);
        _frame = NULL;
    }
    _frame = CTFramesetterCreateFrame(framesetter, textRange, framePath, NULL);
    CTFrameDraw(_frame, context);

    CFRelease(framePath);

    [attribString release];
    CFRelease(framesetter); 
```

}

```
- (void)myLongPressHandle:(UILongPressGestureRecognizer *)gestureRecognizer
{

    CGPoint point  = [gestureRecognizer locationInView:self];

    NSArray *lineArr    = (NSArray*)CTFrameGetLines(_frame);
    NSInteger lineCount = [lineArr count];
    NSLog(@"lineCount=%d, frame=%@, lineArr=%@", lineCount, _frame, lineArr);
} 
```

问题是当我按下表格视图的一个单元格（名为 CellA）时，不要抬起手指，将手指移动到另一个单元格（名为 CellB），我发现 longPressHandle 仍然使用 CellA 的子视图。 `NSLog`打印 CellA 的子视图的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:25:11.957

我终于找到了解决问题的方法。

1.  表格视图处理UILongPressGestureRecognizer，在处理器中找出哪个单元格被触摸。
2.  调用单元格的触摸处理函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:20:29.400

> 长按手势是连续的。当允许的手指数量 (numberOfTouchesRequired) 在指定的时间 (minimumPressDuration) 内被按下并且触摸没有超出允许的移动范围 (allowableMovement) 时，手势开始 (UIGestureRecognizerStateBegan)。每当手指移动时，手势识别器就会转换到 Change 状态，并在任何手指抬起时结束 (UIGestureRecognizerStateEnded)。

所以你必须检查状态来检测你的

```
- (void)myLongPressHandle:(UILongPressGestureRecognizer *)gestureRecognizer
{
    if(gesture.state == UIGestureRecognizerStateBegan)
    {
        //if needed do some initial setup or init of views here
    }
    else if(gesture.state == UIGestureRecognizerStateChanged)
    {
        //move your views here.
        [yourView setFrame:];
    }
    else if(gesture.state == UIGestureRecognizerStateEnded)
    {
CGPoint point  = [gestureRecognizer locationInView:self];

NSArray *lineArr    = (NSArray*)CTFrameGetLines(_frame);
NSInteger lineCount = [lineArr count];
NSLog(@"lineCount=%d, frame=%@, lineArr=%@", lineCount, _frame, lineArr);
    }
} 
```

# c# - 缓存函数结果

> ID：14271495
> 
> 赞同：1
> 
> 时间：2013-01-11T04:04:44.493
> 
> 标签：c#, algorithm, caching, data-structures

假设我有一些功能`Func<int,int,int>`。现在我想缓存（并快速查找）函数结果。

要求：

1.  固定缓存大小（例如，1000 个三元组（输入、输入、结果））。
2.  在缓存中快速查找和快速存储。
3.  如果缓存已满，则应删除最长时间未访问（查找）的条目。

应该使用什么样的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:09:05.600

使用 .NET [Cache](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)，或使用[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)，这是一个非 Web 特定的缓存。

您可以使用[CacheMemoryLimit](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.cachememorylimit.aspx)属性指定缓存可以使用的内存量。

当缓存已满时，您可以[修剪](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.trim.aspx)所需百分比的条目，并且将根据需要删除条目：

> ...条目将根据最近最少使用 (LRU) 算法从缓存中删除，直到达到请求的修剪百分比

缓存中每个项目的键都需要是一个字符串，所以我会将您的输入格式化为`{0}-{1}`或类似。您可能想要执行一些性能测试以满足您的要求，但我相信这将与任何其他解决方案一样快。

# netflix - Netflix API 简单查询队列

> ID：14271497
> 
> 赞同：1
> 
> 时间：2013-01-11T04:05:10.693
> 
> 标签：netflix

我正在玩 Netflix API。我对他们想要的“用户 ID”感到困惑。（对于受保护的查询）我正在发送此字符串（身份验证后）以获取用户的队列： [http](http://api-public.netflix.com/users/) ://api-public.netflix.com/users/'userID'/queues

这是从身份验证返回的（不是真正的令牌），但它的哪一部分是用户 ID？

```
oauth_token=xxx4ewzxxx8xx3xxxx3x9hv&oauth_token_secret=xxx8xxxx7xxd&
application_name=MyFlix&login_url=https%3A%2F%2Fapi-
user.netflix.com%2Foauth%2Flogin%3Foauth_token%3Dxxx4ewzxxx8xx3xxxx3x9hv 
```

也许我什至没有从正确的角度接近它。我发现的任何文档或代码都会掩盖该部分（我的 netflix ID 不起作用，我认为它应该是我返回的 oauth 令牌的一部分，而不是我的正常 netflix ID）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:12:46.397

这是一个有点老的问题，但你需要获取访问令牌，它会给你用户 ID。当用户同意您的应用程序可以通过调用 API 访问他的 netflix 帐户时，您可以获得访问令牌

```
 http://api-public.netflix.com/oauth/access_token 
```

这些信息稍后将用于与 api 通信。

希望能帮助到你。

在此处查找更多信息：http: [//developer.netflix.com/docs/read/Security](http://developer.netflix.com/docs/read/Security)部分向我们发送订阅者的授权请求令牌

# excel - Excel：计算日期单元格列中特定月份的频率

> ID：14271499
> 
> 赞同：5
> 
> 时间：2013-01-11T04:05:24.573
> 
> 标签：excel

我有一个包含事件日期的专栏。（比方说：A1:A100）

现在我想使用一个公式来查找或显示 2013 年 1 月发生的事件数。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:04:07.483

如何使用`Countifs`在 a 之间查找记录`start and end date`？您可以键入日期或将其指向包含日期的两个单元格。不确定您使用的是哪个版本的 Excel，但`CountIfs`在 2003 年以后不受支持。

```
=COUNTIFS(A2:A100,">="&C2,A2:A100,"<="&C3) 
```

或者

```
=COUNTIFS(A2:A100,">=1/1/2013",A2:A100,"<=31/1/2013") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:39:40.263

您需要的是一个数组公式，有时称为“CSE”公式，因为您必须输入它们：

选择您的目标单元格并选择它。然后，在编辑栏中，输入：

```
=SUM(IF((A1:A100>=DATEVALUE("1/1/2013"))*(A1:A100<=DATEVALUE("31/1/2013")),1,0)) 
```

而不是 [enter]，而是按 [ctrl]+[shift]+[enter]

我*真的*不明白为什么 MS 让你做 CSE 的事情——从格式中可以清楚地看出它是一个数组公式吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T21:22:53.837

将`FREQUENCY`公式与辅助`MONTH`函数一起使用：

1.  在结果表中输入数字 1-12（例如在 D1:D12 中）
2.  选择十二个相邻的单元格（在示例中为 E1:E12）并输入`=FREQUENCY(MONTH(A1:A1000),D1:D12)`- 将公式输入为数组公式（即按`Ctrl-Shift-Enter`而不是`Enter`）

如果您还想按年份分开，则需要修改 D 列中的键和公式以派生键，例如，`MONTH(A1:A1000)`您可以使用`MONTH(A1:A1000)&"-"&YEAR(A1:A1000)`- 或（如果纯粹在一个 Locale 环境中使用）`TEXT(A1:A1000,"MM-YY")`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:10:53.417

几个想法：

*   使用 SUMPRODUCT 公式按月汇总。参见示例： http: [//www.contextures.com/xlFunctions04.html#SumProduct](http://www.contextures.com/xlFunctions04.html#SumProduct)

*   使用数据透视表：

    添加一列 B `=month(a1)`。填写下来。`1`添加所有s的列 C。

    给 A、B、C 标题名称： `Date`, `Month`, `Count`.

    插入基于 A、B、C 的数据透视表。现在您可以轻松地按月求和。

*   一个公式（如果您确切知道要查找的月份）：

    也许用这样的公式在 B 列中填写： `=if(and(month(a1)=1,year(a1)=2013),1,0)`，然后是`sum()`B 列？

*   使用整合功能。看看：[http ://www.techrepublic.com/blog/window-on-windows/use-consolidate-to-summarize-excel-data-without-sorting/6521](http://www.techrepublic.com/blog/window-on-windows/use-consolidate-to-summarize-excel-data-without-sorting/6521)

# r - rollapply 变化 - 增长窗口函数

> ID：14271501
> 
> 赞同：0
> 
> 时间：2013-01-11T04:05:56.580
> 
> 标签：r, sequence

`rollapply`随着函数在数据中的进展，人们将如何使用（或其他一些 R 函数）来增加窗口大小。换句话说，第一个 apply 与第一个元素一起工作，第二个与前两个元素一起工作，第三个与前三个元素一起工作，等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:10:44.730

如果您正在寻找应用 `min`、或`max`，这些函数已经有它们的累积对应项：`sum``prod`

`cummin`, `cummax`,`cumsum`和`cumprod`

要在增长/扩展窗口上应用更多奇特功能，您可以简单地使用`sapply`

例如

```
# your vector of interest
x <- c(1,2,3,4,5)

sapply(seq_along(x), function(y,n) yourfunction(y[seq_len(n)]), y = x) 
```

对于一个基本的动物园对象

```
x.Date <- as.Date("2003-02-01") + c(1, 3, 7, 9, 14) - 1
x <- zoo(rnorm(5), x.Date)

# cumsum etc will work and return a zoo object
cs.zoo <- cumsum(x)

# convert back to zoo for the `sapply` solution
# here `sum`
foo.zoo <- zoo(sapply(seq_along(x), function(n,y) sum(y[seq_len(n)]), y= x), index(x))

identical(cs.zoo, foo.zoo)
## [1] TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T04:16:46.210

通过查看文档，`?zooapply`我认为这可以满足您的需求，`a`您的矩阵在哪里并且`sum`可以是任何函数：

```
a <- cbind(1:5,1:5)
#      [,1] [,2]
# [1,]    1    1
# [2,]    2    2
# [3,]    3    3
# [4,]    4    4
# [5,]    5    5
rollapply(a,width=seq_len(nrow(a)),sum,align="right")
#      [,1] [,2]
# [1,]    1    1
# [2,]    3    3
# [3,]    6    6
# [4,]   10   10
# [5,]   15   15 
```

但是[mnel](https://stackoverflow.com/users/1385941/)的[答案](https://stackoverflow.com/a/14271536/697568)似乎足够且更具普遍性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:13:02.410

除了@mnel 的回答：

> 对于更多奇特的功能，您可以简单地使用 sapply

如果该`sapply`方法花费的时间太长，您最好迭代地制定您的函数。

# c# - 如何在 C# 中创建自定义标签

> ID：14271502
> 
> 赞同：1
> 
> 时间：2013-01-11T04:05:58.067
> 
> 标签：c#, visual-studio-2010, custom-controls, label

我的任务是使用 c# 创建一个图片拼图。我必须自定义一个控件以使其像磁贴一样。我的想法是创建标签以充当拼图块。我没有自定义标签控件的经验。如果有人可以帮助我完成此任务的教程，那将是一个很大的帮助。

我在这个项目中使用 Windows 窗体，而不是 WPF。

我用谷歌搜索但找不到任何合适的教程。请帮助我。

谢谢你。

下面是每件作品在应用程序中的外观！一个 tile 类用于表示每个拼图。

![在此处输入图像描述](../Images/de9c0d816e8138f037f572e05b54592f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:47:40.377

操作 Windows 窗体控件的设计结构的唯一方法是通过 GDI（图形设备接口）。通过 System.Drawing 访问设备上下文。这将允许您继承或覆盖控件并创建/更改其外观。我在 GDI 工作了大约一个月。这不是一夜之间学到的东西。作为一种快速的替代方法，您可以考虑将拼图图片添加到按钮控件并对其进行编码，以便如果按钮 A 在按钮 B 左边缘的 xx 像素内，则 A&B 背景图像 = 连接图片。或类似的规定。

[http://www.codeproject.com/Articles/6913/Creating-a-professional-looking-GDI-drawn-custom-c](http://www.codeproject.com/Articles/6913/Creating-a-professional-looking-GDI-drawn-custom-c)

# bash - find 命令：列出每个目录和子目录，除了 .git 或 .hg 目录和子目录

> ID：14271504
> 
> 赞同：1
> 
> 时间：2013-01-11T04:06:15.163
> 
> 标签：bash, command, find, subdirectory

我试图在我的工作目录中使用这个命令

```
find . -type d  \( ! -name .git  -prune \) -o \( ! -name .hg  -prune \) 
```

似乎不起作用？

删除 prune 只会排除`.git`or`.hg`目录，而不是它们的子目录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:25:26.713

```
find . \( -name .git -o -name .hg \) -prune -o -type d -print 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T04:53:05.893

我的回答与@Barmar 的回答基本相同，我对此表示赞同：

`find . \( -name .git -o -name .hg \) -prune -o \( -type d -print \)`

关于这个命令的一点解释可能对你有帮助：

这里的`-o`意思是`OR`。当`find`找到一个文件名匹配`.git`or`.hg`时，由于`-prune`选项而停止进一步搜索并评估为`true`，因此跳过另一个`-o`分支（即目录打印）。这就是为什么只有那些不包含`.git`或`.hg`将显示的目录。

你也可以参考这个问题：[How to use '-prune' option of 'find' in sh?](https://stackoverflow.com/questions/1489277/how-to-use-prune-option-of-find-in-sh)

# ruby - 如何区分转义和未转义的 Unicode 字符？

> ID：14271508
> 
> 赞同：0
> 
> 时间：2013-01-11T04:06:54.960
> 
> 标签：ruby, unicode

我正在编写一个脚本来检查一些 Java 的翻译消息文件。我们的消息源不允许在格式块中使用未转义的 Unicode 字符：

```
{0,number,¤UNESCAPED# ###}

1.9.2p290 :001 > unescaped = "{0,number,¤UNESCAPED# ###}"
 => "{0,number,¤UNESCAPED# ###}" 
1.9.2p290 :002 > escaped = "{0,number,\u00A4ESCAPED# ###}"
 => "{0,number,¤ESCAPED# ###}" 
```

请注意，转义和未转义的显示方式相同：

```
1.9.2p290 :003 > escaped.inspect
 => "\"{0,number,¤ESCAPED# ###}\"" 
```

该[`String.inspect`](http://www.ruby-doc.org/core-1.9.2/String.html#method-i-inspect)方法应该显示转义的特殊字符：

```
1.9.2p290 :004 > escaped.dump
 => "\"{0,number,\\u{a4}ESCAPED# ###}\"" 
1.9.2p290 :005 > unescaped.dump
 => "\"{0,number,\\u{a4}UNESCAPED# ###}\"" 
```

`dump`应该做同样的事情。

任何人都知道区分转义和非转义Unicode字符的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:22:29.253

```
1.9.2p290 :001 > unescaped = "{0,number,¤ESCAPED# ###}"
 => "{0,number,¤UNESCAPED# ###}" 
1.9.2p290 :002 > escaped = "{0,number,\u00A4ESCAPED# ###}"
 => "{0,number,¤ESCAPED# ###}" 
```

在上述情况下，它不仅以相同的方式显示它，而且字符串完全相等。解析器在解析程序源代码时将 unicode 转义序列转换为相应的字符。

所以在上述情况下，没有什么可区分的。并且程序本身无法知道您是使用转义序列还是文字字母编写了字符串文字。这就像写一个数字文字一样`000`，你得到的只是一个值为 的 int，`0`没有办法知道源代码中有多少个零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:43:22.073

当我去为 Mike 编写一个可运行的示例时，我找到了我的解决方案。事实证明，我在将字符串转换为具有属性（语言、键、消息、错误计数等）的对象时所做的字符串转换，也将字符串解释为其未转义的 unicode 格式。

这个小例子有效，帮助我弄清楚我需要在修改字符串之前检查 '\u'。

```
infile = File.new('demo-messages.properties', "r", encoding: Encoding::UTF_8)
while (line = infile.gets)
  if line.ascii_only?
    puts "line contains ascii only: #{line}"
  else
    puts "line contains non-ascii text: #{line}"
  end

  #the important part
  if line.inspect.include?('\u') #this check actually works
    puts "line has escaped unicode characters: #{line}"
  else
    puts "line has un-escaped unicode characters: #{line}"
  end
end
infile.close

# FILE: demo-mesages.properties
escaped=Cela vous coûte environ {0,number,\u00A4# ###} de plus.
with_utf8_char=Cela vous coûte environ {0,number,¤# ###} de plus. 
```

输出：

```
$ ruby runnable_example.rb 
line contains non-ascii text: escaped=Cela vous coûte environ {0,number,\u00A4# ###} de plus.
line has escaped unicode characters: escaped=Cela vous coûte environ {0,number,\u00A4# ###} de plus.
line contains non-ascii text: with_utf8_char=Cela vous coûte environ {0,number,¤# ###} de plus.
line has un-escaped unicode characters: with_utf8_char=Cela vous coûte environ {0,number,¤# ###} de plus. 
```

# php - PHP & MySQL 地理距离计算

> ID：14271510
> 
> 赞同：2
> 
> 时间：2013-01-11T04:07:36.147
> 
> 标签：php, mysql, latitude-longitude, haversine

我有一个工作 PHP 函数，它接受纬度/经度坐标和以英里为单位的距离，然后在 MySQL 邮政编码/经纬度对（40,000 多行）表中逐行测试每个邮政编码/经纬度行是否在规定的距离内。

我知道这种方法效率非常低，我想在 SQL 查询中而不是 PHP 中进行所有的三角函数和距离计算。有谁可以帮我离开这里吗？我觉得我已经尝试了一切，但我无法正确获取 SQL 查询。任何帮助将不胜感激！

现有的PHP函数：

```
function getZips($lat, $lon, $radius)
{   

//MySQL bit
$zipQuery = mysql_query("SELECT * FROM zip_codes");
while ($row = mysql_fetch_assoc($zipQuery))
{

    $lat2 = $row['latitude'];
    $lon2 = $row['longitude'];

    $distance = (3958*3.1415926*sqrt(($lat2-$lat)*($lat2-$lat) + cos($lat2/57.29578)*cos($lat/57.29578)*($lon2-$lon)*($lon2-$lon))/180);

    if ($distance <= $radius)
    {
        $zip = $row['zip'];
        echo "Zip in range: <b>" .$zip . "</b><br>";
    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:10:49.527

```
SELECT zipcode, ( 3959 * acos( cos( radians( {$coords['latitude']} ) ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians( {$coords['longitude']} ) ) + sin( radians( {$coords['latitude']} ) ) * sin( radians( latitude ) ) ) ) AS distance FROM logic_zipcodes HAVING distance <= {$radius} ORDER BY distance 
```

不记得我最初是从哪里得到的，但是我已经使用了很长时间了。这是我的功能：

```
function zipsearch($start, $rad) {
// ITITIAL POINT
$result = mysql_query("SELECT latitude,longitude FROM logic_zipcodes WHERE zipcode='" . $start . "'");
while($row = mysql_fetch_array($result)) {
    $coords = array('latitude' => $row['latitude'], 'longitude' => $row['longitude']);
}
//RADIUS
$radius = $rad;
// SQL FOR MILES
$sql = "SELECT zipcode, ( 3959 * acos( cos( radians( {$coords['latitude']} ) ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians( {$coords['longitude']} ) ) + sin( radians( {$coords['latitude']} ) ) * sin( radians( latitude ) ) ) ) AS distance FROM logic_zipcodes HAVING distance <= {$radius} ORDER BY distance";

// OUTPUT THE ZIPCODES AND DISTANCES
$query = mysql_query($sql);
$zips = array();
while($row = mysql_fetch_assoc($query)) {
    $zips[] = $row['zipcode'];
}
return $zips;
}
 function getZips($zip, $rad) {
$zipcode = qt($zip);
$andstatement = implode("','", zipsearch($zipcode, $rad));
return "AND zipcode in('" . $andstatement . "')";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:20:56.567

这是与纬度和经度相关联的所有州/城市的列表。[https://stackoverflow.com/questions/14272153/where-can-i-find-a-table-of-usas-zipcodes-lat-and-lon/14272155#14272155](https://stackoverflow.com/questions/14272153/where-can-i-find-a-table-of-usas-zipcodes-lat-and-lon/14272155#14272155)

至于你的三角函数，在 Mysql 和 PHP 中执行所有其他操作：

```
 <?php
    /**
     *  @package    zipcode
     */

    class ZipCode
    {
        private $zip_code_id;
        private $zip_code;
        private $lat;
        private $lon;
        private $city;
        private $county;
        private $area_code;
        private $time_zone;
        private $state_prefix;
        private $state_name;

        public $mysql_table = 'zip_code';
        public $mysql_conn = false;
        private $mysql_row;

        private $print_name;
        private $location_type;

        const UNIT_MILES = 1;
        const UNIT_KILOMETERS = 2;
        const MILES_TO_KILOMETERS = 1.609344;

        const LOCATION_ZIP = 1;
        const LOCATION_CITY_STATE = 2;

        /**
         *  Constructor
         *
         *  Instantiate a new ZipCode object by passing in a location. The location
         *  can be specified by a string containing a 5-digit zip code, city and 
         *  state, or latitude and longitude.
         *
         *  @param  string
         *  @return ZipCode
         */
        public function __construct($location) 
        {
            if (is_array($location)) {
                $this->setPropertiesFromArray($location);
                $this->print_name = $this->zip_code;
                $this->location_type = $this::LOCATION_ZIP;
            } else {
                $this->location_type = $this->locationType($location);

                switch ($this->location_type) {

                    case ZipCode::LOCATION_ZIP:
                        $this->zip_code = $this->sanitizeZip($location);
                        $this->print_name = $this->zip_code;
                        break;

                    case ZipCode::LOCATION_CITY_STATE:
                        $a = $this->parseCityState($location);
                        $this->city = $a[0];
                        $this->state_prefix = $a[1];
                        $this->print_name = $this->city;
                        break;

                    default:
                        throw new Exception('Invalid location type for '.__CLASS__);
                }
            }
        }

        public function __toString()
        {
            return $this->print_name;
        }

        /**
        *   Calculate Distance using SQL
        *
        *   Calculates the distance, in miles, to a specified location using MySQL
        *   math functions within the query.
        *
        *   @access private
        *   @param  string
        *   @return float
        */
        private function calcDistanceSql($location)
        {
            $sql = 'SELECT 3956 * 2 * ATAN2(SQRT(POW(SIN((RADIANS(t2.lat) - '
                  .'RADIANS(t1.lat)) / 2), 2) + COS(RADIANS(t1.lat)) * '
                  .'COS(RADIANS(t2.lat)) * POW(SIN((RADIANS(t2.lon) - '
                  .'RADIANS(t1.lon)) / 2), 2)), '
                  .'SQRT(1 - POW(SIN((RADIANS(t2.lat) - RADIANS(t1.lat)) / 2), 2) + '
                  .'COS(RADIANS(t1.lat)) * COS(RADIANS(t2.lat)) * '
                  .'POW(SIN((RADIANS(t2.lon) - RADIANS(t1.lon)) / 2), 2))) '
                  .'AS "miles" '
                  ."FROM {$this->mysql_table} t1 INNER JOIN {$this->mysql_table} t2 ";

            switch ($this->location_type) {

                case ZipCode::LOCATION_ZIP:
                    // note: zip code is sanitized in the constructor
                    $sql .= "WHERE t1.zip_code = '{$this->zip_code}' ";
                    break;

                case ZipCode::LOCATION_CITY_STATE:
                    $city = @mysql_real_escape_string($this->city);
                    $state = @mysql_real_escape_string($this->state_prefix);
                    $sql .= "WHERE (t1.city = '$city' AND t1.state_prefix = '$state') AND t2.zip_code = '$zip_to'";
                    break;

                default:
                    throw new Exception('Invalid location type for '.__CLASS__);
            }

            switch (ZipCode::locationType($location))
            {
                case ZipCode::LOCATION_ZIP:
                    $zip_to = $this->sanitizeZip($location);
                    $sql .= "AND t2.zip_code = '$zip_to'";
                    break;
                case ZipCode::LOCATION_CITY_STATE:
                    $a = $this->parseCityState($location);
                    $city = @mysql_real_escape_string($a[0]);
                    $state = @mysql_real_escape_string($a[1]);
                    $sql .= "AND (t2.city = '$city' AND t2.state_prefix = '$state')";
                    break;
            }

            $r = @mysql_query($sql);

            if (!$r) {
                throw new Exception(mysql_error());
            }

            if (mysql_num_rows($r) == 0) {
                throw new Exception("Record does not exist calculating distance between $zip_from and $zip_to");
            }

            $miles = mysql_result($r, 0);
            mysql_free_result($r);

            return $miles;
        }

        public function getAreaCode()
        {
            if (empty($this->zip_code_id)) $this->setPropertiesFromDb();
            return $this->city;
        }

        public function getCity()
        {
            if (empty($this->zip_code_id)) $this->setPropertiesFromDb();
            return $this->city;
        }

        public function getCounty()
        {
            if (empty($this->zip_code_id)) $this->setPropertiesFromDb();
            return $this->county;
        }

        public function getStateName()
        {
            if (empty($this->zip_code_id)) $this->setPropertiesFromDb();
            return $this->state_name;
        }

        public function getStatePrefix()
        {
            if (empty($this->zip_code_id)) $this->setPropertiesFromDb();
            return $this->state_prefix;
        }

        public function getDbRow()
        {
            if (empty($this->zip_code_id)) $this->setPropertiesFromDb();
            return $this->mysql_row;
        }

        /**
        *   Get Distance To Zip
        *
        *   Gets the distance to another zip code. The distance can be obtained in
        *   either miles or kilometers.
        *
        *   @param  string
        *   @param  integer
        *   @param  integer
        *   @return float
        */
        public function getDistanceTo($zip, $units=ZipCode::UNIT_MILES)
        {
            $miles = $this->calcDistanceSql($zip);

            if ($units == ZipCode::UNIT_KILOMETERS) {
                return $miles * ZipCode::MILES_TO_KILOMETERS;
            } else {
                return $miles;
            }
        }

        public function getZipsInRange($range_from, $range_to, $units=1)
        {
            if (empty($this->zip_code_id)) $this->setPropertiesFromDb();

            $sql = "SELECT 3956 * 2 * ATAN2(SQRT(POW(SIN((RADIANS({$this->lat}) - "
                  .'RADIANS(z.lat)) / 2), 2) + COS(RADIANS(z.lat)) * '
                  ."COS(RADIANS({$this->lat})) * POW(SIN((RADIANS({$this->lon}) - "
                  ."RADIANS(z.lon)) / 2), 2)), SQRT(1 - POW(SIN((RADIANS({$this->lat}) - "
                  ."RADIANS(z.lat)) / 2), 2) + COS(RADIANS(z.lat)) * "
                  ."COS(RADIANS({$this->lat})) * POW(SIN((RADIANS({$this->lon}) - "
                  ."RADIANS(z.lon)) / 2), 2))) AS \"miles\", z.* FROM {$this->mysql_table} z "
                  ."WHERE zip_code <> '{$this->zip_code}' " 
                  ."AND lat BETWEEN ROUND({$this->lat} - (25 / 69.172), 4) "
                  ."AND ROUND({$this->lat} + (25 / 69.172), 4) "
                  ."AND lon BETWEEN ROUND({$this->lon} - ABS(25 / COS({$this->lat}) * 69.172)) "
                  ."AND ROUND({$this->lon} + ABS(25 / COS({$this->lat}) * 69.172)) "
                  ."AND 3956 * 2 * ATAN2(SQRT(POW(SIN((RADIANS({$this->lat}) - "
                  ."RADIANS(z.lat)) / 2), 2) + COS(RADIANS(z.lat)) * "
                  ."COS(RADIANS({$this->lat})) * POW(SIN((RADIANS({$this->lon}) - "
                  ."RADIANS(z.lon)) / 2), 2)), SQRT(1 - POW(SIN((RADIANS({$this->lat}) - "
                  ."RADIANS(z.lat)) / 2), 2) + COS(RADIANS(z.lat)) * "
                  ."COS(RADIANS({$this->lat})) * POW(SIN((RADIANS({$this->lon}) - "
                  ."RADIANS(z.lon)) / 2), 2))) <= $range_to "
                  ."AND 3956 * 2 * ATAN2(SQRT(POW(SIN((RADIANS({$this->lat}) - "
                  ."RADIANS(z.lat)) / 2), 2) + COS(RADIANS(z.lat)) * "
                  ."COS(RADIANS({$this->lat})) * POW(SIN((RADIANS({$this->lon}) - "
                  ."RADIANS(z.lon)) / 2), 2)), SQRT(1 - POW(SIN((RADIANS({$this->lat}) - "
                  ."RADIANS(z.lat)) / 2), 2) + COS(RADIANS(z.lat)) * "
                  ."COS(RADIANS({$this->lat})) * POW(SIN((RADIANS({$this->lon}) - "
                  ."RADIANS(z.lon)) / 2), 2))) >= $range_from "
                  ."ORDER BY 1 ASC";

            $r = mysql_query($sql);
            if (!$r) {
                throw new Exception(mysql_error());
            }
            $a = array();
            while ($row = mysql_fetch_array($r, MYSQL_ASSOC))
            {
                // TODO: load ZipCode from array
                $a[$row['miles']] = new ZipCode($row);
            }

            return $a;
        }

        private function hasDbConnection()
        {
            if ($this->mysql_conn) {
                return mysql_ping($this->mysql_conn);
            } else {
                return mysql_ping();
            }
        }

        private function locationType($location)
        {
            if (ZipCode::isValidZip($location)) {
                return ZipCode::LOCATION_ZIP;
            } elseif (ZipCode::isValidCityState($location)) {
                return ZipCode::LOCATION_CITY_STATE;
            } else {
                return false;
            }
        }

        static function isValidZip($zip)
        { 
            return preg_match('/^[0-9]{5}/', $zip);
        }

        static function isValidCityState($location)
        { 
            $words = split(',', $location);

            if (empty($words) || count($words) != 2 || strlen(trim($words[1])) != 2) {
                return false;
            }

            if (!is_numeric($words[0]) && !is_numeric($words[1]))  {
                return true;
            }

            return false;
        }

        static function parseCityState($location)
        {
            $words = split(',', $location);

            if (empty($words) || count($words) != 2 || strlen(trim($words[1])) != 2) {
                throw new Exception("Failed to parse city and state from string.");
            }

            $city = trim($words[0]);
            $state = trim($words[1]);

            return array($city, $state);
        }

        // @access protected
        private function sanitizeZip($zip)
        {
            return preg_replace("/[^0-9]/", '', $zip);
        }

        private function setPropertiesFromArray($a)
        {    
            if (!is_array($a)) {
                throw new Exception("Argument is not an array");
            }

            foreach ($a as $key => $value)
            {
                $this->$key = $value;
            }

            $this->mysql_row = $a;
        }

        private function setPropertiesFromDb()
        {
            switch ($this->location_type) {

                case ZipCode::LOCATION_ZIP:
                    $sql = "SELECT * FROM {$this->mysql_table} t "
                          ."WHERE zip_code = '{$this->zip_code}' LIMIT 1";
                    break;

                case ZipCode::LOCATION_CITY_STATE:
                    $sql = "SELECT * FROM {$this->mysql_table} t "
                          ."WHERE city = '{$this->city}' "
                          ."AND state_prefix = '{$this->state_prefix}' LIMIT 1";
                    break;
            }

            $r = mysql_query($sql);
            $row = mysql_fetch_array($r, MYSQL_ASSOC);
            mysql_free_result($r);

            if (!$row)
            {
                throw new Exception("{$this->print_name} was not found in the database.");
            }

            $this->setPropertiesFromArray($row);
        }
    }

    ?> 
```

# android - 更改Android中ActionBar的OverflowButton

> ID：14271511
> 
> 赞同：1
> 
> 时间：2013-01-11T04:07:39.453
> 
> 标签：android, android-actionbar

我们有什么方法可以在代码中更改此按钮的图标/背景吗？我找到了一种在 XML 中更改它的方法[在 ActionBar 上的溢出按钮的更改颜色中](https://stackoverflow.com/questions/11425660/change-color-of-the-overflow-button-on-actionbar)，但我想从我的代码中动态更改它。

# google-maps - 谷歌地图（GMap）在IE7上重置高度和宽度

> ID：14271512
> 
> 赞同：0
> 
> 时间：2013-01-11T04:07:43.630
> 
> 标签：google-maps, internet-explorer-7

我在谷歌地图上设置多个标记并包含 infoWindow 内容，它在 FF、GC、IE9、8 上完美运行

但在 IE7 中，地图变小了（40px x 30px）

以下是我的`<div>`

```
 <div id="listing-map-view" style="width:610px;height:380px;">

</div> 
```

以下是 GmapCall

```
var bounds = new google.maps.LatLngBounds();
var map;
var userinput = "40.860294,-73.183374";
var latlong = userinput.split(",");
var lat = latlong[0];
var long = latlong[1];

$(document).ready(function(){
   map = new GMaps({
     div: '#listing-map-view',
     lat: lat,
     lng: long
   });

bounds.extend (new google.maps.LatLng (lat ,long));
map.addMarker({
lat: lat,
lng: long,
infoWindow: {content: 'Some Test Content'},
zoom:10,
mapTypeId:google.maps.MapTypeId.ROADMAP
});
map.fitBounds(bounds);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:32:14.400

这是通过添加以下样式修复的位置相对错误

```
/*Google Map Fixes for IE */

  #listing-map-view{
    z-index: 1000!important;  /*Outer DIV*/
    position:relative!important;
    width:610px!important;
    height:375px!important;
    padding: 0 15px!important;;
  }
  #listing-map-view > div{
    z-index: 500!important;   /*Actual DIV with the map*/
    position:absolute!important;
  } 
```

# linux - 在 Linux 上使用 find 命令时 -{minutes} 和 {minutes} 有什么区别？

> ID：14271513
> 
> 赞同：0
> 
> 时间：2013-01-11T04:08:05.520
> 
> 标签：linux, find

我对以下命令的理解是它会查找在过去 {x} 分钟内修改过的文件。

如果我排除`-`from`mmin`是什么意思，它应该返回什么？

**命令**

```
find . -maxdepth 1 -mmin -20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:33:16.247

`-mmin -20`返回不到 20 分钟前修改过的文件。

`-mmin 20`返回恰好在 20 分钟前修改的文件。

`-mmin +20`返回 20 分钟前或更早修改的任何文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T04:32:51.853

从[find(1) 手册页](http://linux.die.net/man/1/find)：

```
Numeric arguments can be specified as

+n
    for greater than n,

-n    
    for less than n,

 n    
    for exactly n.

-mmin n
    File's data was last modified n minutes ago. 
```

即，`-mmin -n`意味着数据在不到`n`几分钟前被修改，并且`-mmin n`意味着数据在`n`几分钟前被修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:33:30.257

减号表示“或更少”。'-mmin 20' 将为您提供恰好在 20 分钟前修改的文件。`mmin -20`为您提供 0 到 20 分钟前修改的文件。

# c# - 添加 const 关键字会中断 Path.Combine 调用

> ID：14271516
> 
> 赞同：2
> 
> 时间：2013-01-11T04:08:11.773
> 
> 标签：c#, .net

不知道为什么当我改变这个时：

```
using System;
using System.IO;

    public static class Constants
    {
        public static string  MainCarFilePath = Path.Combine(Environment.CurrentDirectory, "\\Cars.csv");
    } 
```

对此：

```
using System;
using System.IO;

    public static class Constants
    {
        public const string MainCarFilePath = Path.Combine(Environment.CurrentDirectory, "\\Cars.csv");
    } 
```

现在它坏了，它无法识别`Combine`Path object 的方法`(System.IO)`。

我得到`can't resolve Combine`...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T04:10:13.837

`const`要求该值在编译时保持不变。

使用`public static readonly string`, 代替。

# android - FindViewByID(...) 设置内容视图和清理项目后返回 null

> ID：14271520
> 
> 赞同：1
> 
> 时间：2013-01-11T04:08:34.827
> 
> 标签：android, layout

有很多这样的问题，但解决方案对我不起作用。

无论如何，我的主要活动有一个按钮，在它的 onclick 方法中，它会将我带到另一个活动，ViewPowerActivity。我有一个名为 power_view.xml 的布局 xml 文件。在里面我有一些布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_marginLeft="@dimen/screen_margin"
android:layout_marginRight="@dimen/screen_margin"
android:layout_marginTop="@dimen/screen_margin"
android:orientation="vertical" >
... 
```

ViewPowerActivity 有基本的 onCreateMethod：

```
public class ViewPowerActivity extends Activity {
    private final static Powers powers=new StubPowers();

    @Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.power_view);

        Power power=powers.getPowers().get(0);
        View powerView = findViewById(R.layout.power_view);
        ...
    }
    ...
} 
```

上面的 findViewById 调用返回 null。

如果我在 setContentView(...) 之后删除所有代码并简单地返回那里，它会很好地显示空布局。我已经设置了内容视图，我已经清理了项目，我已经尝试将电源视图设置为主要活动，以及各种各样的事情。还能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:32:24.490

从您的代码中，很明显**thar power_view**是一个布局，即。xml。所以 R.id.power_view 是不正确的。

您似乎想访问该布局的父视图。然后执行以下操作。

您必须为父 LinearLayout 设置一个 id。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/parentLinear"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_marginLeft="@dimen/screen_margin"
     android:layout_marginRight="@dimen/screen_margin"
     android:layout_marginTop="@dimen/screen_margin"
     android:orientation="vertical" >
     ... 
```

然后，

```
 View powerView = findViewById(R.id.parentLinear); 
```

如果要在 powerView 中获取其他视图，则应在 xml 布局中将 id 设置为该视图，并通过**findViewById(R.id.your_view)将该视图初始化为 power_view**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:39:08.713

```
 power_view.xml

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="@dimen/screen_margin"
    android:layout_marginRight="@dimen/screen_margin"
    android:layout_marginTop="@dimen/screen_margin"
    android:orientation="vertical" >

    public class ViewPowerActivity extends Activity {
        private final static Powers powers=new StubPowers();

        @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.power_view);

            Power power=powers.getPowers().get(0);
            View powerView = (ViewGroup)findViewById(R.id.layout);
            ...
        }
        ...
    } 
```

# mysql - 根据之前的 select 语句更新行

> ID：14271524
> 
> 赞同：0
> 
> 时间：2013-01-11T04:09:12.690
> 
> 标签：mysql, arrays, select, sql-update

我需要根据选择进行尽可能多的更新。

假设我有两个表“组”和“成员”。

“团体”

```
GroupName  GroupID
Genius     1
Clever     2
Normal     3
Stupid     4
Donkey     5 
```

“会员”

```
MemberName     GroupID
John           1
Peter          3
Mary           1
Ashley         2
Robin          1
Louis          5
Bill           4
Paul           5 
```

我想将成员从 GroupID 更改为另一个。

即：从“聪明”到“驴”的成员。

```
select MemberName from Members where GroupID='1';
while($arr = mysqli_fetch_array($rs, MYSQLI_ASSOC))
{
$name = $arr['MemberName'];
} 
```

然后我会将所有选定的成员更新到新组中：

```
$sql .= update Members set GroupID='5' where MemberName='$name'; 
```

我知道我必须将所有名称放入一个数组中才能分别更新每个名称，但我对正确的更新语法也有些困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:17:18.443

为什么不简单

```
UPDATE Members SET GroupID=5 WHERE GroupID=1 
```

?

仅当您必须进行一些无法在 SQL 中完成的丑陋/复杂处理（或者在 SQL 中甚至更丑陋）时，才需要您的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:43:17.907

您可以执行此操作的一种方法是执行以下操作：

```
SELECT  @DonkeyGrpID:=GroupID 
FROM Groups 
WHERE GroupName = 'Donkey';

UPDATE Members M, Groups G  
SET M.GroupID = @DonkeyGrpID
WHERE M.GroupID = G.GroupID AND G.GroupName = 'Clever' ; 
```

# android - HoloEverywhere 和 ActionbarSherlock 未显示片段选项卡内容

> ID：14271525
> 
> 赞同：0
> 
> 时间：2013-01-11T04:09:21.167
> 
> 标签：android, android-fragments, actionbarsherlock, android-holo-everywhere

嗨，我正在制作这个应用程序，其中包含两个可以在它们之间滑动的片段。代码编译并运行而不会崩溃，并且显示两个选项卡，您可以在选项卡之间滑动，但选项卡没有内容。我认为这是尝试设置内容视图的片段的问题。如果您需要更多信息，请询问:)

我的主要活动

```
import java.util.ArrayList;

import org.holoeverywhere.app.Activity;
import org.holoeverywhere.widget.TextView;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockActivity;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;
import android.view.WindowManager;

public class SwipeTabsMainActivity extends Activity {
ViewPager mViewPager;
TabsAdapter mTabsAdapter;
TextView tabCenter;
TextView tabText;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

        mTabsAdapter.addTab(bar.newTab().setText("Stopwatch"),StopWatchFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Timer"), CountdownFragment.class, null);

}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(Activity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }

        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
}
} 
```

主活动的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.view.ViewPager  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" /> 
```

我的倒计时片段

```
import org.holoeverywhere.app.Fragment;
import org.holoeverywhere.internal._View;
import org.holoeverywhere.preference.PreferenceManager;
import org.holoeverywhere.preference.SharedPreferences;
import org.holoeverywhere.widget.Button;
import org.holoeverywhere.widget.TextView;
import org.holoeverywhere.widget.Toast;

import android.content.Context;
import android.os.Bundle;
import android.os.Vibrator;
import org.holoeverywhere.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Chronometer;
import android.widget.ImageButton;
import android.widget.Chronometer.OnChronometerTickListener;
import android.widget.RelativeLayout;

public class CountdownFragment extends Fragment implements
    OnChronometerTickListener {
TextView second, hour, minute;
ImageButton hourup, hourdown, minuteup, minutedown, secondup, seconddown;
Button start, stop;
int hourCount, minCount, secCount;
Context c;
Chronometer count;
boolean viberate, running;
Vibrator v;
boolean startstopshow;
SharedPreferences getPrefs;
View fv = getView();
RelativeLayout rl;
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    initilize(c);
    setClicker();
    count.start();
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);
    c = getActivity();

}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.countdown, container, false);
     rl = (RelativeLayout )inflater.inflate(R.layout.countdown, container, false);

    return super.onCreateView(inflater, container, savedInstanceState);
}

private void initilize(Context c) {
    hourup = (ImageButton) rl.findViewById(R.id.hourup);
    minuteup = (ImageButton) rl.findViewById(R.id.minuteup);
    secondup = (ImageButton) rl.findViewById(R.id.secondup);
    hourdown = (ImageButton) rl.findViewById(R.id.hourdown);
    minutedown = (ImageButton) rl.findViewById(R.id.minutedown);
    seconddown = (ImageButton) rl.findViewById(R.id.seconddown);
    start = (Button) rl.findViewById(R.id.start);
    stop = (Button) rl.findViewById(R.id.stop);
    second = (TextView) rl.findViewById(R.id.second);
    minute = (TextView) rl.findViewById(R.id.minute);
    hour = (TextView) rl.findViewById(R.id.hour);
    hourCount = 0;
    minCount = 0;
    secCount = 0;

    count = (Chronometer) rl.findViewById(R.id.chronometer1);
    v = (Vibrator) c.getSystemService(Context.VIBRATOR_SERVICE);
    running = false;
    getPrefs = PreferenceManager.getDefaultSharedPreferences(c);
}

@Override
public void onChronometerTick(Chronometer chronometer) {
    switch (chronometer.getId()) {

    case (R.id.chronometer1):
        secCount--;
        updateDisplay();
        break;
    }
}

} 
```

我的片段 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="56dp" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageButton
            android:id="@+id/hourup"
            style="?borderlessButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/up" />

        <ImageButton
            android:id="@+id/minuteup"
            style="?borderlessButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/up" />

        <ImageButton
            android:id="@+id/secondup"
            style="?borderlessButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/up" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <org.holoeverywhere.widget.TextView
            android:id="@+id/hour"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="00 : "
            android:textSize="35sp" />

        <org.holoeverywhere.widget.TextView
            android:id="@+id/minute"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="00 : "
            android:textSize="35sp" />

        <org.holoeverywhere.widget.TextView
            android:id="@+id/second"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="00"
            android:textSize="35sp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageButton
            android:id="@+id/hourdown"
            style="?borderlessButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/down" />

        <ImageButton
            android:id="@+id/minutedown"
            style="?borderlessButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/down" />

        <ImageButton
            android:id="@+id/seconddown"
            style="?borderlessButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/down" />
    </TableRow>
</TableLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_weight="50"
    android:gravity="bottom"
    android:weightSum="100" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:layout_alignParentBottom="true" >

        <org.holoeverywhere.internal._View
            android:id="@+id/view1"
            android:layout_width="match_parent"
            android:layout_height="1dip"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="4dip"
            android:layout_marginRight="4dip"
            android:background="?dividerVertical" />

        <org.holoeverywhere.internal._View
            android:id="@+id/ViewColorPickerHelper"
            android:layout_width="1dip"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="4dip"
            android:layout_marginTop="4dip"
            android:background="?dividerVertical" />

        <org.holoeverywhere.widget.Button
            android:id="@+id/start"
            style="@style/Holo.Button.Borderless"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/view1"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/stop"
            android:text="Start" />

        <org.holoeverywhere.widget.Button
            android:id="@+id/stop"
            style="@style/Holo.Button.Borderless"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/ViewColorPickerHelper"
            android:text="Stop" />
    </RelativeLayout>
</LinearLayout>

<Chronometer
    android:id="@+id/chronometer1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Chronometer"
    android:textSize="0px"
    android:visibility="invisible" />

</RelativeLayout> 
```

![截屏](../Images/9d5e302327a2c5d50e8797edd3952a7c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:26:22.103

我终于找到了问题：

你必须替换： super.onCreateView(inflater, container, savedInstanceState); 到您的倒计时视图：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.countdown, container, false);
     rl = (RelativeLayout )inflater.inflate(R.layout.countdown, container, false);

    return  v;
} 
```

这是结果的屏幕截图：

![在此处输入图像描述](../Images/100d73411e0528d22de0404729491c7e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:36:37.893

我可以看到您正在使用 ActionBarSherlock。试试那个图书馆：http: [//viewpagerindicator.com/](http://viewpagerindicator.com/)。它将为您提供帮助，并且自定义标签和导航非常容易

您可以在 Google play 上看到很多应用示例：https: [//play.google.com/store/apps/details?id=com.viewpagerindicator.sample&](https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS52aWV3cGFnZXJpbmRpY2F0b3Iuc2FtcGxlIl0) feature=search_result#?t=W251bGwsMSwxLDEsImNvbS52aWV3cGFnZXJpbmRpY2F0b3Iuc2FtcGxlIl0 。

这是一个例子：主要活动：

```
import android.os.Bundle;
import android.support.v4.view.ViewPager;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.viewpagerindicator.TabPageIndicator;
public class MainActivity extends SherlockFragmentActivity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         ViewPager mViewPager = (ViewPager) findViewById(R.id.viewpager); 

         mViewPager.setAdapter(new MyFragmentPagerAdapter(getSupportFragmentManager()));

            //Bind the title indicator to the adapter
        TabPageIndicator tabIndicator = (TabPageIndicator)findViewById(R.id.titles);
        tabIndicator.setViewPager(mViewPager);

         mViewPager.setCurrentItem(1);
    }

} 
```

片段页面适配器：

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

public class MyFragmentPagerAdapter extends FragmentPagerAdapter{
    private Fragment[] fragments;
    private static final String[] CONTENT = new String[] { "frag A","frag B", "frag C" };

    // Reference : https://bitbucket.org/owentech/abstabsviewpager/downloads

    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub

        this.fragments = new Fragment[] { new FragmentA(),
                new FragmentB(),
                new FragmentC()};
    }

    @Override
    public Fragment getItem(int arg0) {
        // TODO Auto-generated method stub
        return this.fragments[arg0];

    }

    public CharSequence getPageTitle(int position) {
        return CONTENT[position];
    }

    @Override
    public int getCount() {

        return this.fragments.length;

    }

} 
```

片段X：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragmentA extends Fragment{

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.fragmenta, container, false);

        return v;

    }

} 
```

主要的 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <com.viewpagerindicator.TabPageIndicator
    android:id="@+id/titles" 
    android:theme="@style/Theme.PageIndicatorDefaults"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"/>

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
</LinearLayout> 
```

清单 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.viewpagertest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <activity
            android:name="com.example.viewpagertest.MainActivity"
            android:label="@string/app_name"
             android:theme="@style/Theme.PageIndicatorDefaults" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# android - Android 在 Facebook FriendPicker 示例程序中检查所有朋友

> ID：14271529
> 
> 赞同：0
> 
> 时间：2013-01-11T04:09:27.050
> 
> 标签：android, facebook, web-services, friend

我想知道如何在 Facebook 的 FriendPicker 示例程序中选择所有朋友。我在 Pickerfragment 类中添加了一个“全选”按钮。但我无法找到检查所有朋友的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:30:08.133

我在 Friend Picker 示例程序中找不到方法。我只是使用图形 api 来获取朋友列表，并在列表视图中列出朋友姓名旁边的复选框。

我添加了一个检查所有朋友的按钮。当我按下按钮时，它将遍历所有朋友并检查他们。

这个想法很简单。

我无法发布我的代码。

我希望你能得到一些示例程序来完成它。

问我是否需要更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:16:28.213

尝试这个 ：

```
Bundle params = new Bundle();
    params.putString("fields", "name, picture");
    JSONObject jsonFrends = Util.parseJson(facebook.request("me/friends", params)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:53:46.737

试试这种方式：

> ```
>  Intent m_fb=getOpenFacebookIntent(m_context);             
>     startActivity(m_fb); 
> ```

方法`getOpenFacebookIntent()`如下：

> ```
>  public static Intent getOpenFacebookIntent(Context context) {
>        try {
>         context.getPackageManager().getPackageInfo("com.facebook.katana", 0);
>     return new Intent(Intent.ACTION_VIEW, Uri.parse("fb://profile/<userid>/fans"));
>           } catch (Exception e) {
>        return new Intent(Intent.ACTION_VIEW, Uri.parse("https://www.facebook.com/abc.xyz"));
>        }
>     } 
> ```

您可以使用[此处](http://www.kanatorn.info/2012/01/03/open-facebook-official-app-with-intent-android/)列出的 Intent 的官方 Facebook 应用程序。

# java - 文件对象出现空异常错误

> ID：14271544
> 
> 赞同：1
> 
> 时间：2013-01-11T04:11:21.643
> 
> 标签：java, file, nullpointerexception, runtime-error

我在 Ubuntu 12.04 中使用 Netbeans IDE 运行 java 代码。

我正在尝试使用文件目录的路径名创建一个文件对象，并使用方法 listFiles() 返回此文件目录下的路径名数组。

编码：

```
File allFile=new File("~/Desktop/matlab/CAT_00");
File[] fileList = allFile.listFiles(); 
```

但是，当我运行代码时，我得到一个异常声明

```
Exception in thread "main" java.lang.NullPointerException
    at CatTest.main(CatTest.java:29)
Java Result: 1 
```

所以看来我的 allFile 对象包含空对象？我自己也不确定。我尝试检查我想要的目录路径，它是“~/Desktop/matlab/CAT_00”，它是正确的。我尝试使用调试模式检查这两行代码，发现 listFiles() 返回了这个异常错误。但是我不明白为什么应该有一个空异常错误，因为 CAT_00 主目录下有文件和目录，我在第一个地方创建了 File 对象，因此应该返回这些文件和目录的路径名数组。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T04:23:50.953

您收到 NullPointerException 的原因是，当您运行 listFiles() 时，提供的路径实际上并不存在。

在 Java 中，您不能直接从 ~/ 引用文件，因为 Java 将文件路径视为相对于它们运行位置的 URL。在您的情况下，因为您在 Eclipse 中运行，所以它与您的 Eclipse 工作区相关。相反，您应该使用的是

```
String homeDir = System.getProperty("user.home");
File allFile = new File(homeDir + "/Desktop/matlab/CAT_00");
File[] fileList = allFile.listFiles() 
```

要做`System.getProperty("user.home")`的是获取用户的绝对主目录路径，无论他们运行的是什么操作系统。

# python - 从字符串创建列表，以逗号分隔

> ID：14271548
> 
> 赞同：-2
> 
> 时间：2013-01-11T04:11:47.280
> 
> 标签：python, python-3.x, split

我目前正在开发一个项目，该项目从文件中输入以下信息：

```
10015, John, Smith, 2, 3.01
10208, Patrick, Green, 1, 3.95
10334, Jane, Roberts, 4, 3.81 
```

我需要做的是拆分这些信息，分别存储每个值，然后根据用户需要将其打印到屏幕或文件中。

应该拆分然后分配信息的功能是这样的：

```
def fetchRecord( self ):
    #Read the first line of the record.
    line = self._inputFile.readline()
    line = input.split( ', ' )
    if line == "":
        return None

    #If there is another record, create a storage object and fill it
    student = StudentRecord()
    student.idNum = int( line[0] ) 
    student.firstName = line[1]
    student.lastName = line[2]
    student.classCode = int( line[3] )
    student.gpa = float( line[4] )
    return student 
```

我目前遇到的错误如下：

```
builtins.ValueError: invalid literal for int() with base 10: '10015, John, Smith, 2, 3.01\n' 
```

我调用的整个代码是：

```
class StudentFileReader:
#Create new student reader instance.
def __init__( self, inputSrc ):
    self._inputSrc = inputSrc
    self._inputFile = None

#Open a connection to the input file.
def open( self ):
    self._inputFile = open( self._inputSrc, "r" )

#Close the connection to the input file.
def close( self ):
    self._inputFile.close()
    self._inputFile = None

#Extract all student records and store them in a list.
def fetchAll( self ):
    theRecords = list()
    student = self.fetchRecord()
    while student != None:
        theRecords.append( student )
        student = self.fetchRecord()
    return theRecords

#Extract the next stuent record from the file.
def fetchRecord( self ):
    #Read the first line of the record.
    line = self._inputFile.readline()
    print ( line )
    line = line.split( ',' )
    print ( line )
    if line == "":
        return None

    #If there is another record, create a storage object and fill it
    student = StudentRecord()
    student.idNum = int( line[0] ) 
    student.firstName = line[1]
    student.lastName = line[2]
    student.classCode = int( line[3] )
    student.gpa = float( line[4] )
    return student

class StudentScreenWriter:
    #Prints the student report to screen.
    def printReport( theList ):
         #The class names associated with the class codes.
         classNames = ( None, "Freshman", "Sophomore", "Junior", "Senior" )

        #Print the header.
        print( "LIST OF STUDNETS".center(50) )
        print( "" )
        print( "%-5s %-25s %-10s %-4s" % ('ID', 'NAME', 'CLASS', 'GPA' ) )
        print( "%5s %25s %10s %4s" % ('-' * 5, '-' * 25, '-' * 10, '-' * 4) )

        #Print the body.
        for record in theList:
            print( "%5d %-25s %-10s %4.2f" % (record.idNum, record.lastName + ", " + record.firstName, classNames[record.classCode], record.gpa) )

        #Add a footer.
        print( "-" * 50 )
        print( "Number of students:", len(theList) )

class StudentFileWriter:
    #Prints the student report to file.
    def printReport( theList, out ):
        for record in theList
            record.idNum = str(record.idNum)
            record.lastName = str(record.lastName)
            record.firstName = str(record.firstName)
            record.classCode = str(record.classCode)
            record.gpa = str(record.gpa)

            out.write( record.idNum + ", " + record.lastName + ", " + record.firstName + ", " + record.classCode + ", " + record.gpa )
        out.write( "\n" )

class StudentRecord:
    def __init__( self ):
        self.idNum = None
        self.firstName = None
        self.lastName = None
        self.classCode = None
        self.gpa = None 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:25:44.560

不是您正在寻找的答案，但您应该考虑

```
class StudentRecord:
     def __init__(self,idNum=-1,firstName="unknown",lastName="Unknown",classCode=-1,gpa=-1):
         self.idNum = idNum
         self.firstName = firstName
         self.lastName = lastName
         self.classCode = classCode
         self.gpa = gpa
     #... The rest of your class 
```

带有 csv 模块

```
import csv
with open("some.txt") as f:
    reader = csv.reader(f)
    for student_details in reader:
        student = StudentRecord(*student_details) 
```

没有 csv 模块

```
with open("some.txt") as f:
    for line in f:
        student_details = line.split(",")
        student = StudentRecord(*student_details) 
```

使用您的数据进行测试

```
class StudentRecord:
    def __init__(self,idNum=-1,firstName="unknown",lastName="Unknown",classCode=-1,gpa=-1):
        self.idNum = idNum
        self.firstName = firstName
        self.lastName = lastName
        self.classCode = classCode
        self.gpa = gpa
    def  __str__(self):
        return "#%s:%s, %s | %s = %s"%(
            self.idNum,self.lastName,self.firstName,
            self.classCode,self.gpa
            )
    def __repr__(self):
        return "<Student Record (%s %s)>"%(
            self.firstName,self.lastName
            )

with open("txt_data.txt") as f:
    for line in f:
        student_data = line.strip().split(", ")
        student = StudentRecord(*student_data)
        print "Student:",student 
```

输出：

```
Student: #10015:Smith, John | 2 = 3.01
Student: #10208:Green, Patrick | 1 = 3.95
Student: #10334:Roberts, Jane | 4 = 3.81 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T04:14:20.373

你需要换行

```
 line = input.split( ', ' ) 
```

至

```
line = line.split( ',' ) 
```

然后移动它

```
if line == "":
    return None 
```

`input`在当前上下文中未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:43:40.010

您可以考虑将其用于拆分数据（使用您的数据）

```
>>> for line in f:  
        li1 = []  
        for part in line.split(','):  
                part = part.strip()  
                li1.append(part)  
        li2.append(li1)  

>>> for i in li2:
        print i
['10015', 'John', 'Smith', '2', '3.01']  
['10208', 'Patrick', 'Green', '1', '3.95']  
['10334', 'Jane', 'Roberts', '4', '3.81'] 
```

`li1`并且`li2`是列表。并且`f`是输入文件，其中每一行都有一个记录/数据。

您现在将拥有该列表。您可以使用相同的方法来获取和处理名称、类代码、gpa 等。

# html - CSS a:hover 边框底部长度

> ID：14271550
> 
> 赞同：0
> 
> 时间：2013-01-11T04:12:48.290
> 
> 标签：html, css, text, border, underline

`a:hover { border-bottom: 2px; }`任何人都可以通过告诉我为什么在链接本身的长度上继续进行来帮助我吗？

```
body {
    margin: 0;
    font-family: "Georgia", "Times New Roman", "Times", "serif";
}

header {
    background-color: #191919;
    padding: 56px;
    text-align: center;
}

div {
    display: inline;
}

ul {
    list-style-type: none;
    display: inline;
    color: #ffffff;
}

li {
    display: inline;
    margin-right: 28px;
    width: 135px;
}

a {
    text-decoration: none;
    color: #ffffff;
}

a:hover {
    border-bottom: 2px solid #ac9962;
    font-size: 18px;
}

a:active {
    border-bottom: 2px solid #ac9962;
    font-size: 18px
} 
```

```
<!DOCTYPE HTML>
<html>
    <head>
    <title>HTML</title>
    <link rel="stylesheet" type="text/css" href="stylesheet2.css" />
</head>

<body>
    <header>
         <nav>
        <ul>
           <a href="www.youtube.com"><li>Menu 1</li></a>
           <a href="www.youtube.com"><li>Menu 2</li></a>
           <a href="www.youtube.com"><li>Menu 3</li></a>
           <a href="www.youtube.com"><li>Menu 4</li></a>
           <a href="www.youtube.com"><li>Menu 5</li></a>
               <a href="www.youtube.com"><li>Menu 6</li></a>
           <a href="www.youtube.com"><li>Menu 7</li></a>
               <a href="www.youtube.com"><li>Menu 8</li></a>
            </ul>
         </nav>
    </header>
</body>
</html> 
```

奖金：

我也无法在菜单 5 - 菜单 8 上获取菜单 1 - 菜单 4（水平，居中）

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:18:10.333

边框应用于元素在页面中创建的框，因此它也将继续到您应用的任何填充的边缘。

如果您只想将文本带下划线，请使用`text-decoration: underline;`

此外，**您的标记无效。** `<ul>`只能包含`<li>`直接子级。将您的超链接移动到列表元素内。

```
<ul>
   <li><a href="www.youtube.com">Menu 1</a></li>
   <li><a href="www.youtube.com">Menu 2</a></li>
   <li><a href="www.youtube.com">Menu 3</a></li>
   <li><a href="www.youtube.com">Menu 4</a></li>
   <li><a href="www.youtube.com">Menu 5</a></li>
   <li><a href="www.youtube.com">Menu 6</a></li>
   <li><a href="www.youtube.com">Menu 7</a></li>
   <li><a href="www.youtube.com">Menu 8</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:17:38.093

```
li {
    margin-right: 28px;
    width: 135px;
} 
```

由于`a`包含一个`li`. 下划线**应该**在 .之下`a`，因为 . 的完整大小（`li`包括边距）在`a`.

# mootools - Mootools 手风琴，每个窗格内都有一个 Next 按钮

> ID：14271551
> 
> 赞同：2
> 
> 时间：2013-01-11T04:13:05.357
> 
> 标签：mootools, accordion

我想在手风琴导航设备的所有（嗯......除了最后一个）窗格中添加一个下一步按钮。如您所料，当您单击“下一步”按钮时，当前窗格会折叠并打开下一个窗格。

它在 Joomla 网站上，所以我们使用 MooTools。我无法让 click 事件的操作起作用。有什么想法吗？

```
window.addEvent('domready', function() {
var accordion = new Fx.Accordion($$('#accordion h2'),$$('#accordion .content'), {
    onActive: function(toggler,element) { toggler.addClass('active');element.addClass('active'); },
    onBackground: function(toggler,element) { toggler.removeClass('active');element.removeClass('active'); }
});

$$('.button.next').addEvent('click', function(event){
      event.stop();
      accordion.display.getNext(); //HELP HERE PLEASE
    });
}); 
```

非常感谢！！担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:22:33.723

检查您的手风琴实例`console.log(accordion)`；）尝试访问`previous`手风琴实例的属性。它没有记录，并且可能会随着 MooTools More 的未来版本而改变，但它是做你想做的最简单的方法：

```
$$('.button.next').addEvent('click', function(event){
    event.stop();
    accordion.display(accordion.previous + 1);
}); 
```

在这里工作小提琴：http: [//jsfiddle.net/9859J/](http://jsfiddle.net/9859J/)

# java - 为什么在检查许可证时需要 DeviceId

> ID：14271553
> 
> 赞同：3
> 
> 时间：2013-01-11T04:13:16.177
> 
> 标签：java, android

我已经阅读了许多关于 android 许可的文档，但我仍然感到困惑。为什么在检查登录到设备的主帐户时需要唯一的设备 ID？

如果它需要某些东西，如果那个唯一的 id 以某种方式改变了怎么办？它仍然允许相同的用户吗？如果是，那么唯一 ID 的意义何在，如果不是，那么它很糟糕，如果用户必须恢复出厂设置并更改其设备 ID，该怎么办。

# html - 如何使表格列宽固定？

> ID：14271554
> 
> 赞同：3
> 
> 时间：2013-01-11T04:13:15.917
> 
> 标签：html, html-table

我有一个有两列的表，第一列 65%，第二列 35%。它完全适合 100% 的屏幕，如果第一列中有足够的文本来填充 65%，但如果它是空的（或少量文本） - 然后第一列缩小，第二列扩大。

如何使第一列始终占屏幕的 65%，无论有无文字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:17:16.713

尝试这个：

```
<table class="fixed_width">
    <col width="65%" />
    <col width="35%" />
    <tr>
        <td>your data</td>
        <td>your data</td>
    </tr>
</table> 
```

和 CSS：

```
table.fixed_width { table-layout:fixed; }
table.fixed_width td { overflow: hidden; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:16:24.720

```
<table>
    <tr>
        <td style="width: 65%;">
            first column
        </td>
        <td style="width: 35%;">
            second column
        </td>
    </tr>
</table> 
```

第一列将始终保持 65%，除非您在其中放入大于 65% 的内容（例如大图）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:17:32.517

尝试添加这个 CSS：

```
table {
    table-layout: fixed;
    empty-cells: show;
} 
```

[https://developer.mozilla.org/en-US/docs/CSS/empty-cells](https://developer.mozilla.org/en-US/docs/CSS/empty-cells)

[https://developer.mozilla.org/en-US/docs/CSS/table-layout](https://developer.mozilla.org/en-US/docs/CSS/table-layout)

@kalpesh 的推荐`<colgroup>`也不错。

[https://developer.mozilla.org/en-US/docs/HTML/Element/colgroup](https://developer.mozilla.org/en-US/docs/HTML/Element/colgroup)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:38:37.247

试试这个CSS：

```
.table {
      table-layout: fixed;
      border-collapse: collapse;
      width: 100%;
    }

    .td1 {
      border: 1px solid #000;
      width: 65%;
    }

    .td2{border: 1px solid #000;
      width: 35%;
    } 
```

和

```
<table class="table">
    <tr>
        <td class="td1">data</td>
        <td class="td2">data</td>
    </tr>
</table> 
```

# wpf - wpf datagrid高宽调整问题

> ID：14271555
> 
> 赞同：1
> 
> 时间：2013-01-11T04:13:17.267
> 
> 标签：wpf, datagrid, height, width, padding

我有一个数据网格，如下所示：

```
 <DataGrid  SizeChanged="dgvMap_SizeChanged" Padding="0,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Center" GridLinesVisibility="None" Background="Transparent" 
                                       BorderBrush="Transparent" IsReadOnly="True" ItemsSource="{Binding IsAsync=True}"  EnableColumnVirtualization="True" 
                                       EnableRowVirtualization="True" AutoGenerateColumns="True" AutoGeneratingColumn="dgvMap_AutoGeneratingColumn" 
                                       CanUserAddRows="False" CanUserSortColumns="true" CanUserDeleteRows="False" HeadersVisibility="None" 
                                       Name="dgvMap" SelectionMode="Single" Panel.ZIndex="0" Margin="0,0,0,0" VirtualizingStackPanel.VirtualizationMode="Standard" 
                                       PreviewMouseDown="dgvMap_PreviewMouseDown" >
                                <!--for removing the blue color bkground default for row selection-->
                                <DataGrid.Resources>
                                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                                </DataGrid.Resources>
                                <DataGrid.CellStyle>
                                    <Style TargetType="DataGridCell">
                                        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Height" Value="50" />
                                        <Setter Property="Width" Value="50" />
                                    </Style>
                                </DataGrid.CellStyle>
                            </DataGrid> 
```

这是模板列的样式：

```
<DataTemplate x:Key="MyDataTemplate" DataType="DataRowView">
            <StackPanel Background="Transparent">
                <Image Tag="{Binding}" Name="Layer0" Margin="0,0,0,0"  Panel.ZIndex="1"  
                        ToolTipService.HasDropShadow="True" ToolTipService.ShowDuration="20000" ToolTipService.InitialShowDelay="200" >

                <Image.Resources>
                    <Style TargetType="{x:Type Image}">
                        <Setter Property="Source" Value="{Binding Converter={StaticResource IntToImageConverter}, ConverterParameter = Layer0}" />
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <!-- Hover image -->
                                <Setter Property="Cursor" Value="Hand"/>
                                <Setter Property="Source" Value="D:\small.png"/>

                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Image.Resources>
            </Image>
        </StackPanel>
    </DataTemplate> 
```

虽然在`datagridcellstyle`我已将单元格值定义为宽度和高度为 50。但是当我加载具有 9 行的数据网格时，它的高度显示为 452 而不是 450（9*50），并且以同样的方式宽度也显示更多。
为什么会这样显示？？
怎么避免呢？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:05:06.190

可能是因为模板内默认有一些填充或边距。您可以尝试将单元格的填充设置为 0，也可以在 Expression Blend 中查看数据网格的内部控制模板，了解空间的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:48:15.627

我通过给`datagridcolumnstyle`这样 的样式来解决它

```
 <DataGrid.ColumnHeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Height" Value="50" />
                                        <Setter Property="Width" Value="50" />
                                    </Style>
                                </DataGrid.ColumnHeaderStyle> 
```

# google-cloud-sql - 全文搜索替换 Google Cloud SQL

> ID：14271558
> 
> 赞同：1
> 
> 时间：2013-01-11T04:13:53.920
> 
> 标签：google-cloud-sql

我正在尝试在我正在处理的项目中实现具有自动完成功能的搜索功能。到目前为止，我已经设法使用 select column1, column2 来做到这一点，其中 myColumn 像 %...% 但它没有我想要的那样响应，我的意思是它还可以，它只在一行中搜索。当前版本的带有 innoDB 表的 MySql 不支持“匹配”任何升级 db 版本的计划？否则，任何人都可以提出另一种实现搜索+自动计算（针对单个表）的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:24:56.120

试试 www.rockitsearch.com ，它有自动完成功能。您唯一需要做的就是： - 创建一个帐户 - 导出您的数据

# iphone - iOS 上带有禁用应答功能的闹钟

> ID：14271561
> 
> 赞同：0
> 
> 时间：2013-01-11T04:14:18.710
> 
> 标签：iphone, ios, cordova

Apple 资源包含很多信息，但有一件事我无法清楚地理解有关音频和通知的阅读。

是否可以制作一个应用程序，在后台运行产生声音（即使手机被锁定和/或静音）并且当它发生时用户必须解决例如。方程式将其关闭？

ps 目前我主要使用 Cordova 框架，但 Obj-C 技巧也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:26:31.633

是的，这是可能的。您可以为此使用[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)。

苹果还允许在后台播放音乐的应用程序。

请检查这些链接以了解后台任务功能：

1.  [**管理您的应用程序流程**](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)
2.  [**ios多任务后台任务**](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-tasks/)
3.  [**如何在 ios 设备被锁定或在另一个设备上处理背景音频播放**](https://stackoverflow.com/questions/10429204/how-to-handle-background-audio-playing-while-ios-device-is-locked-or-on-another)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T09:51:12.163

[您可以更改 NSTimers 的本地通知（使用https://github.com/mruegenberg/MMPDeepSleepPreventer](https://github.com/mruegenberg/MMPDeepSleepPreventer)使它们在非活动模式下保持活动状态）并计算每个警报的时间间隔。这样，即使屏幕锁定并且声音关闭，您也可以播放音频，将其粘贴到您的`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`:

```
// Let the sound run with the screen blocked
NSError *setCategoryErr = nil;
NSError *activationErr  = nil;
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error:&setCategoryErr];
[[AVAudioSession sharedInstance] setActive:YES error:&activationErr]; 
```

但是你会遇到一些问题：

*   该应用程序必须每 10 秒播放一次音频文件，这样它就不会深度睡眠并杀死所有 NSTimers。
*   Apple 可能会因此拒绝您的应用程序。
*   您不能使用主页按钮关闭应用程序，否则将无法正常工作。
*   每次需要使用闹钟时都必须打开应用程序（您不能安排和忘记）。
*   当闹钟响起时，您只有 iPhone 的锁屏，需要先解锁，然后从应用程序内部停止闹钟。

在 Apple，他们不希望竞争对手的闹钟应用程序出现，这是肯定的！您在 App Store 中看到的几乎所有闹钟应用程序都使用这种糟糕的方法。

# database - 程序中的事务与数据库中的事务

> ID：14271564
> 
> 赞同：1
> 
> 时间：2013-01-11T04:14:57.353
> 
> 标签：database, stored-procedures, sqltransaction

我是新程序员

1.  我所知道的是有 2 种方式来进行 sql 事务控制。但我想知道的是

    1.1 什么时候应该在程序中使用事务，什么时候应该在数据库中使用事务。1.2哪个更好（现在我认为程序中的sql事务更好。但是我的老板想在数据库中使用sql事务）

2.  从第一个问题开始。当我将数据插入主表和明细表时。

    下面是我老板的存储过程

    ```
    SaveOrder( 
    @customerID int,
    @value decimal(18,2),
    @details varchar(max)
    ) 
    ```

我必须发送数据，如......

```
SaveOrder(@customerID = 1,@value = 2500,@details = '(1,'apple',2,50),(2,'orange',3,70),(3,'banana',4,120)') 
```

我不同意。但他说“不想在程序中使用sql事务”。

你怎么看这个。哪个更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:06:48.197

你说你是一个新程序员。所以我强烈建议你按照老板说的去做。不是因为他是你的老板而你是新手，而是因为：

1.  “我不太确定我在说什么，所以我在 StackOverflow 上随机询问了一些陌生人，他们说……”并不是一个强有力的论点。
2.  将业务规则放入数据库（存储过程）或应用程序中是一场长期存在的*宗教*战争，无论任何人怎么说，都没有明确的答案。

现在您担心在字符串中传递多个详细记录是正确的。那很蹩脚。它应该是一些描述的数组。但是，在这种情况下，正确的做法是与您的老板一起改进存储过程的接口。

最后，底线是这样的：当我们在团队中工作时，软件一致性是一项伟大的美德——即使这意味着使用次优方法。

# ruby-on-rails - 如何复制应用服务器的会话和缓存数据？

> ID：14271566
> 
> 赞同：1
> 
> 时间：2013-01-11T04:15:11.770
> 
> 标签：ruby-on-rails, session, replication, rails-activerecord, application-server

我正在寻找有关“如何复制应用程序服务器的会话（有状态应用程序中的用户会话）和缓存对象（通过事务操作从底层数据库检索）”的适当资源。应用服务器最好是 Rails 或任何其他完全支持 MVC 框架（使用 ActiveRecord 或 DataMapper 设计模式）的流行服务器。

如果它支持这种复制，了解有关 Memcached 复制内部的类似信息也会很有帮助。

如果有人可以进一步建议如何集成 NoSQL 键值存储以保持在像 Rails 这样的应用服务器中生成的会话和缓存对象，那将是另一个值得赞赏的答案。

我的目标是找到合适的方法来复制应用服务器实例以提高性能（本地用户或地理分布）和高可用性。对当前行业实践和可用解决方案的任何指出都将在这方面大有帮助。

提前非常感谢。

# java - Libgdx：有没有一种简单的方法可以使按钮上每个轴上的文本居中？

> ID：14271570
> 
> 赞同：20
> 
> 时间：2013-01-11T04:15:32.933
> 
> 标签：java, libgdx

我一直在尝试找出一种将文本置于按钮中心的方法，但找不到一种简单、多用途的方法。我可以做到，但它只适用于某个字符串，不适用于任何字符串。我想知道是否有办法让按钮上的任何字符串居中。在这种情况下，我的按钮是 185x50。

我已经能够使这个按钮在屏幕上居中，如下所示：

```
buttonX = WIDTH / 2 - (screen.getRegionWidth() / 2);
buttonY = HEIGHT / 2 - (screen.getRegionHeight() / 2); 
```

任何帮助将非常感激。:)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-12T18:09:25.513

更新了 libgdx 版本 1.7.1-SNAPSHOT 的答案：

最简单的方法是使用 libgdx 中的 TextButton 类。TextButton 中的文本默认居中。这仍然有效！

更新示例：

```
final BitmapFont font = new BitmapFont();

final String text = "Test";

final GlyphLayout layout = new GlyphLayout(font, text);
// or for non final texts: layout.setText(font, text);

final float fontX = objectX + (objectWidth - layout.width) / 2;
final float fontY = objectY + (objectHeight + layout.height) / 2;

font.draw(batch, layout, fontX, fontY); 
```

过时的例子：

这不再有效！

如果您不想使用它，您可以通过以下方式获取字体宽度和高度：

```
 font.getBounds("Test text"); 
```

所以你可以做这样的事情：

```
 String fontText = "";
    fontX = buttonX + buttonWidth/2 - font.getBounds(fontText).width/2;
    fontY = buttonY + buttonHeight/2 + font.getBounds(fontText).height/2; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-22T08:37:28.220

对于较新版本的 libgdx，API 中不再存在 BitMapFont.getBounds() 函数。您可以使用 GlyphLayout 来获取边界。例如，

```
BitmapFont font;
SpriteBatch spriteBatch;
//... Load any font of your choice first
FreeTypeFontGenerator fontGenerator = new FreeTypeFontGenerator(
   Gdx.files.internal("myFont.ttf")
);
FreeTypeFontGenerator.FreeTypeFontParameter freeTypeFontParameter =
      new FreeTypeFontGenerator.FreeTypeFontParameter();
freeTypeFontParameter.size = size;
fontGenerator.generateData(freeTypeFontParameter);
font = fontGenerator.generateFont(freeTypeFontParameter);

//Initialize the spriteBatch as requirement

GlyphLayout glyphLayout = new GlyphLayout();
String item = "Example";
glyphLayout.setText(font,item);
float w = glyphLayout.width;
font.draw(spriteBatch, glyphLayout, (Game.SCREEN_WIDTH - w)/2, y); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-12T20:12:55.787

尝试以下操作：

```
label.setPosition(Gdx.graphics.getWidth()/2-(label.getPrefWidth()/2),Gdx.graphics.getHeight()-(label.getPrefHeight()/2)); 
```

# ruby-on-rails - 如何保存has_many：通过自引用关联

> ID：14271578
> 
> 赞同：0
> 
> 时间：2013-01-11T04:16:41.703
> 
> 标签：ruby-on-rails, rails-activerecord

我已经使用 has_many :through 建立了一个自我引用关联，基本上如该 Railscast 中所述：[http](http://railscasts.com/episodes/163-self-referential-association) ://railscasts.com/episodes/163-self-referential-association 。

一些“活动”的行为有点像“文章”，并且有一组相关的其他活动，因此连接表的命名。这有点令人困惑......我知道。

我很难让事情正确保存。这是我所拥有的...

**活动.rb**

```
class Activity < ActiveRecord::Base
  has_many :article_activities
  has_many :activities, :through => :article_activities
  accepts_nested_attributes_for :activities
end 
```

**article_activity.rb**

```
class ArticleActivity < ActiveRecord::Base
  attr_accessible :article_id, :activity_id
  belongs_to :activity
  belongs_to :article, :class_name => "Activity"
end 
```

**文章控制器.rb**

```
class ArticlesController < ApplicationController

  def new
    @activity = Activity.new
    @activity.is_article = true
    @user_activities = current_user.activities
  end

  def create
    @activity = Activity.new params[:activity]
    @activity.is_article = true
    @activity.user = current_user

    if @activity.save
      redirect_to root_path, :notice => "Article created!"
    else
      render :action => "new"
    end
  end 
```

**新的.html.haml**

```
= simple_form_for @activity, :url => articles_path do |f|
  / Other fields omitted for clarity
  = f.association :activities, :collection => @user_activities 
```

因此，在提交表单后，`@activity`action`create`中有预期的`@activity.activities`. 但是，在保存`@activity`并重新加载记录时， `@activity.activities`它是空的。

任何想法如何保存关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:50:19.980

我想出了这个。我必须为模型添加一个 :foreign_key 的“文章”...

```
class ArticleActivity < ActiveRecord::Base
  attr_accessible :article_id, :activity_id
  belongs_to :activity
  belongs_to :article, :class_name => "Activity", :foreign_key => "article_id"
end

class Activity < ActiveRecord::Base
  belongs_to :user
  has_many :article_activities, :foreign_key => "article_id"
  has_many :activities, :through => :article_activities 
end 
```

# mobile - 构建语音聊天移动应用程序，如talkbox。XMPP/SID 还是其他解决方案？

> ID：14271583
> 
> 赞同：1
> 
> 时间：2013-01-11T04:16:56.940
> 
> 标签：mobile, xmpp, chat, voice, sid

大家好，对不起，如果这个问题让你感到困惑。

我的客户要求我们构建一个 IM 应用程序，例如talkbox。

Thet 特别想要通话盒中的语音消息功能。即发送者可以按住一个按钮来记录一个短消息。然后接收者可以在单击文本消息时收听短消息。

1.  应该使用什么协议？XMPP/SID？
2.  由于我是该领域的新手，我应该深入研究构建 IM 应用程序的任何其他领域吗？谢谢。

# r - 使用 smoothScatter 生成的颜色密度散点图的 R 图例

> ID：14271584
> 
> 赞同：8
> 
> 时间：2013-01-11T04:16:58.730
> 
> 标签：r

我正在使用该`smoothScatter()`函数在 R 中生成颜色密度散点图。

例子：

```
## A largish data set
n <- 10000
x1  <- matrix(rnorm(n), ncol = 2)
x2  <- matrix(rnorm(n, mean = 3, sd = 1.5), ncol = 2)
x   <- rbind(x1, x2)
oldpar <- par(mfrow = c(2, 2))
smoothScatter(x, nrpoints = 0) 
```

输出：

![在此处输入图像描述](../Images/e0b058080112e23dc6f69a7c17616218.png)

我遇到的问题是我不确定如何添加一个图例/色标来描述不同阴影之间数字术语的相对差异。例如，如果没有某种图例或色标，就无法判断上图中最深的蓝色是否是最浅蓝色的 2 倍、10 倍或 100 倍。R中是否有任何方法可以检索必要的信息来制作这样的比例，或者任何内置的东西可以自动产生这种性质的颜色比例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T06:11:23.987

这是一个依赖`fields::imageplot`和一些摆弄`par(mar)` 来获得正确边距的答案

```
fudgeit <- function(){
  xm <- get('xm', envir = parent.frame(1))
  ym <- get('ym', envir = parent.frame(1))
  z  <- get('dens', envir = parent.frame(1))
  colramp <- get('colramp', parent.frame(1))
  fields::image.plot(xm,ym,z, col = colramp(256), legend.only = T, add =F)
}

par(mar = c(5,4,4,5) + .1)
smoothScatter(x, nrpoints = 0, postPlotHook = fudgeit) 
```

![在此处输入图像描述](../Images/d46c6dc5b14a9295fa5de58c8b2db0ea.png)

你可以摆弄 image.plot 来得到你想要的东西，看看`?bkde2D`和`transformation`论据来`smoothScatter`了解颜色代表什么。

# ios - 用于应用商店提交的版本控制 ios 应用程序

> ID：14271586
> 
> 赞同：2
> 
> 时间：2013-01-11T04:17:11.667
> 
> 标签：ios, ios5, app-store, appstore-approval

目前，我正在向苹果商店提交一份申请。苹果是否提供了任何指南来对应用商店提交的 ios 应用程序进行版本控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:30:29.020

我在 developer.apple 中没有找到关于这个主题的任何资源。

请查看这篇不错的[文章](http://www.blog.montgomerie.net/easy-iphone-application-versioning-with-agvtool)以获得良好的解决方案。

# iphone - Xcode默认一页ios项目 - 为什么代理不负责加载控制器

> ID：14271589
> 
> 赞同：2
> 
> 时间：2013-01-11T04:17:15.320
> 
> 标签：iphone, ios, objective-c, xcode

我是 xcode 和 ios 开发的新手。我正在学习使用 Brad Larson 在线课程。现在，他不使用故事板来创建界面。在他的委托文件中，他使用代码来加载 rootViewController。

现在，当我创建一个新的单页 ios 项目时，它似乎不是负责加载控制器的 XYZAppDelegate。

我知道在 mainstoryboard.storyboard 文件中，我的 XYZViewController 出现在其中。我只是想知道为什么不是 XYZAppDelegate 负责加载 viewController ？

在 appDelegate 中，didFinishLaunchingWithOptions 方法中没有任何内容，但程序仍然加载？

但是，main.m 文件表明 XYZAppDelegate 是 delegateClassName。

**最后，我的问题是，如果不是 AppDelegate ，那么在这种情况下谁负责加载 XYZViewController ？**

这些是默认的 xcode 生成文件

主文件

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([XYZAppDelegate class])); 
```

XYZAppDelegate

```
#import "XYZAppDelegate.h"

@implementation XYZAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:30:42.937

答案就在您的 Info.plist 文件中。如果你看，你会看到两个被调用的键`Main storyboard file base name`，`Main storyboard file base name (iPad)`它们的值应该是相应设备的故事板文件的名称。如果这些键在启动时存在，操作系统将自动加载情节提要文件并将情节提要中的第一个视图控制器插入应用程序的窗口。Info.plist 键解释的[文档](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW9)`UIMainStoryboardFile`（原始键称为）。

# testing - 断言侦听器在 jmeter 中不起作用？

> ID：14271599
> 
> 赞同：1
> 
> 时间：2013-01-11T04:18:29.380
> 
> 标签：testing, jmeter

**我想使用Response Assertion**验证我的响应好坏。我已将**响应字段设置为测试为响应消息**。我已将模式设置为测试为**“ok”**。

问题是，即使我收到错误的响应，它也会在结果树侦听器中显示绿色信号。我已附上屏幕截图。如何解决这个问题？

![在此处输入图像描述](../Images/c646e680af819562af7e134b2eaf4c66.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:44:21.867

这意味着您的响应在某处包含 OK。

如果要验证它是否返回 200 代码，请检查：

*   响应码
*   等于
*   用 200 替换 ok

但是还要添加一个响应断言来检查页面中的文本，在这种情况下，将 OK 替换为文本并检查 Text response / And substring。

# matlab - 可视化功能的最佳工具

> ID：14271601
> 
> 赞同：0
> 
> 时间：2013-01-11T04:18:52.477
> 
> 标签：matlab

我正在寻找可以帮助我可视化函数（向量值）的工具。例如二次函数，如 1/2x'Ax + q'x，其中 x' 是 x 的转置等等。这将是最好的工具。我的意思是，我只想给出这个函数，它会自动绘制它。我知道我可以自己生成函数值，然后使用绘图函数和所有函数绘制它，但我想要一些可以自动完成的东西。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:32:30.850

您可能正在寻找[ezplot](http://www.mathworks.com/help/matlab/ref/ezplot.html)

```
dfig,ezplot(@(x)[x,x]*A*[x;x]+q'*[x;x],[xmin,xmax]) 
```

应该做的伎俩。`xmin`对,使用标量`xmax`。

# perl - 如何在perl中使用标准过滤html表格数据

> ID：14271603
> 
> 赞同：1
> 
> 时间：2013-01-11T04:18:56.900
> 
> 标签：perl, html-table

我是 Perl 的新手。对于每个客户和每个产品的订单超过 5,000 个，我想从下面的 html 表中返回数据。PERL 中检索数据的最佳方法是什么？非常感谢示例代码。

**数据**

```
<html>
    <table id="table-2">
    <col width= 16%><col width= 16%><col width= 16%><col width= 16%><thead> 

    <tr><th><a>Customer  </a></th><th>Product A Ordered </th><th>Product B Ordered </th><th>Product C Ordered </th> </thead></tr>

    </tr><tr>
    <td>JJJ</td>
    <td>10,000</td>
    <td>125,492</td>
    <td>243,422</td>

    </tr><tr>
    <td>TTT</td>
    <td>5,500</td>
    <td>103,258</td>
    <td>194,506</td>

    </tr><tr>
    <td>MMM</td>
    <td>1,000</td>
    <td>22,234</td>
    <td>48,916</td>

    </tr><tr>
    <td>NNN</td>
    <td>3,000</td>
    <td>4,991</td>
    <td>13,070</td>

    </tr><tr>
    <td>PPP</td>
    <td>0</td>
    <td>500</td>
    <td>251</td>

</html> 
```

# django - 使子域读取父域会话

> ID：14271605
> 
> 赞同：3
> 
> 时间：2013-01-11T04:19:22.420
> 
> 标签：django, cookies, nginx, session-cookies

我正在使用 django。我托管了 xyz.com。作为同一个网站的一部分，我有 abc.xyz.com

现在我希望 abc.xyz.com 从 xyz.com 读取会话信息，因此我可以相应地对待登录用户。

我已经阅读了建议放置的答案 -

```
SESSION_COOKIE_DOMAIN = ".xyz.com" 
```

或者

```
SESSION_COOKIE_DOMAIN = "xyz.com" 
```

但它们都不起作用。我该如何解决这个问题？

PS：我正在使用 nginx 将请求指向 abc.xyz.com 到 xyz.com/abc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:23:53.543

```
SESSION_COOKIE_DOMAIN = ".xyz.com" 
```

工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:21:03.063

据我说，

```
SESSION_COOKIE_DOMAIN = "xyz.com"
SESSION_COOKIE_NAME = "examplesessionid" 
```

应该做的伎俩。这应该添加到两个安装中。

如果它仍然不起作用，我想`SECRET_KEY`应该是一样的。因为，Django 使用它对 cookie 数据进行签名。这将是一种解决方法。

但是，会话共享可能不是一个好主意。如果您想要单点登录，请查看 django-cas 之类的东西，它允许您拥有 2 个单独的会话，但用户只会登录一次。

# facebook - 可访问性错误：Facebook JS SDK 生成没有标题属性的 iframe

> ID：14271612
> 
> 赞同：1
> 
> 时间：2013-01-11T04:20:04.683
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk, accessibility

我正在使用使用此代码的 Like 按钮的 HTML5 实现：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=<%= locals[:appId] %>";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

这会在页面中生成两个 iframe：

```
<div>
  <iframe id="fb_xdm_frame_http" name="fb_xdm_frame_http" src="http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#channel=f118ae5cc&amp;origin=http%3A%2F%2Fau0078.local%3A4567&amp;channel_path=%2FTE01_home_page_mobile.html%3Ffb_xd_fragment%23xd_sig%3Df324a069cc%26" tabindex="-1"></iframe>    
  <iframe id="fb_xdm_frame_https" name="fb_xdm_frame_https" src="https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=18#channel=f118ae5cc&amp;origin=http%3A%2F%2Fau0078.local%3A4567&amp;channel_path=%2FTE01_home_page_mobile.html%3Ffb_xd_fragment%23xd_sig%3Df324a069cc%26" tabindex="-1"></iframe>    
</div> 
```

这些 iframe 都没有`title`属性，因此它们会导致可访问性错误。知道我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:33:50.337

根据[WebAIM](http://webaim.org/techniques/frames/#iframe)关于 iframe 的文章，主要的可访问性问题是 iframe 标签之间没有内容。

> 使用 iframe 时，应确保替代内容（iframe 标记之间的内容）有用。

title 属性**可**用于附加信息，但不如包含有用信息作为替代内容重要，即使它只是内容本身的替代链接。

# .htaccess - 使用 .htaccess 监听 http 端口

> ID：14271614
> 
> 赞同：1
> 
> 时间：2013-01-11T04:20:07.683
> 
> 标签：.htaccess, port

有什么方法可以使用 .htaccess 让我的网站出现在另一个端口（例如 7080）上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:22:21.630

不。 .htaccess 仅在 Apache 处理一些正在进行的 HTTP 请求时才被访问/解析。根据定义，您必须已经连接到 Apache 并在打开任何 .htaccess 文件之前发出请求。

如果要更改端口，则必须在 .conf 级别进行

# ruby-on-rails-3 - 如何将 Zeus 用于 rake 资产：预编译

> ID：14271616
> 
> 赞同：4
> 
> 时间：2013-01-11T04:20:28.913
> 
> 标签：ruby-on-rails-3, asset-pipeline

我正在努力加快构建资产的启动时间，并希望使用 Zeus。我如何使用宙斯`bundle exec rake assets:precompile`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:13:23.897

```
zeus start
zeus rake assets:precompile 
```

这个[页面](https://github.com/burke/zeus)有更多关于如何让它工作的细节。

# java - 使用 MongoDB 实现用于休眠搜索的目录提供程序

> ID：14271617
> 
> 赞同：1
> 
> 时间：2013-01-11T04:20:33.737
> 
> 标签：java, mongodb, heroku, lucene, hibernate-search

我想在 Heroku 上为我的网站使用这个解决方案，这样我就可以使用 MongoDB 进行索引。有谁知道一个很好的教程或书籍，它提供了一个深入的例子来说明如何做到这一点？谷歌搜索并没有真正为我找到任何东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:16:55.200

我在这方面花了很长时间，因为我对 Mongo DB 还很陌生，直到它看起来是 Heroku 上搜索实现的一个很好的解决方案时才打算使用它。我想我会添加这个答案来帮助其他想做同样事情的人。

我使用了来自这里的 lucene mongo db 项目的代码：

[https://github.com/mongoutils/mongo-lucene](https://github.com/mongoutils/mongo-lucene)

然后创建了我自己的与 lucene mongo db 项目接口的休眠搜索目录提供程序类。我使用 org.hibernate.search.store.impl.RAMDirectoryProvider 类作为要遵循的大纲。

剩下要做的就是让您的休眠配置指向您的新类：

```
hibernate.search.default.directory_provider=com.foo.MongoLuceneDirectoryProvider 
```

这是我的 MongoLuceneDirectoryProvider 类：

```
package com.foo.MongoLuceneDirectoryProvider

import java.io.IOException;
import java.net.UnknownHostException;
import java.util.Properties;
import java.util.concurrent.ConcurrentMap;

import org.apache.log4j.Logger;
import org.apache.lucene.store.Directory;
import org.hibernate.search.SearchException;
import org.hibernate.search.indexes.impl.DirectoryBasedIndexManager;
import org.hibernate.search.spi.BuildContext;
import org.hibernate.search.store.DirectoryProvider;
import org.hibernate.search.store.impl.DirectoryProviderHelper;

import com.github.mongoutils.collections.DBObjectSerializer;
import com.github.mongoutils.collections.MongoConcurrentMap;
import com.github.mongoutils.collections.SimpleFieldDBObjectSerializer;
import com.github.mongoutils.lucene.MapDirectory;
import com.github.mongoutils.lucene.MapDirectoryEntry;
import com.github.mongoutils.lucene.MapDirectoryEntrySerializer;
import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.Mongo;
import com.mongodb.MongoException;

public class MongoLuceneDirectoryProvider implements DirectoryProvider<Directory> {

    private Logger log = Logger.getLogger(MongoLuceneDirectoryProvider.class);

    private Directory directory;

    private String indexName;
    private Properties properties;

    @Override
    public void initialize(String directoryProviderName, Properties properties, BuildContext context) {

            indexName = directoryProviderName;
        this.properties = properties;

        Mongo mongo;

        try {
            mongo = new Mongo("localhost");

            DB db = mongo.getDB("testdb");
            DBCollection dbCollection = db.getCollection("testcollection");

            DBObjectSerializer<String> keySerializer = new SimpleFieldDBObjectSerializer<String>("key");
            DBObjectSerializer<MapDirectoryEntry> valueSerializer = new MapDirectoryEntrySerializer("value");
            ConcurrentMap<String, MapDirectoryEntry> store = new MongoConcurrentMap<String, MapDirectoryEntry>(dbCollection, keySerializer, valueSerializer);

            directory = new MapDirectory(store);
        }
        catch (UnknownHostException e) {
            log.error("While attempting to initalize Mongo directory provider", e);
        }
        catch (MongoException e) {
            log.error("While attempting to initalize Mongo directory provider", e);
        }
        catch (IOException e) {
            log.error("While attempting to initalize Mongo directory provider", e);
        }
    }

    @Override
    public void start(DirectoryBasedIndexManager indexManager) {

        try {
            directory.setLockFactory(DirectoryProviderHelper.createLockFactory(null, properties));
            properties = null;
            DirectoryProviderHelper.initializeIndexIfNeeded(directory);
        }
        catch (IOException e) {
            throw new SearchException("Unable to initialize index: " + indexName, e);
        }
    }

    @Override
    public void stop() {

        try {
            directory.close();
        }
        catch (IOException e) {
            log.error("While attempting to stop directory provider", e);
        }
    }

    @Override
    public Directory getDirectory() { return this.directory; }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:52:04.720

如果您想帮助实现它（我的意思是创建 Java 代码来支持此配置），请加入更合适的邮件列表中的对话：

[http://lists.jboss.org/pipermail/hibernate-dev/2013-January/009329.html](http://lists.jboss.org/pipermail/hibernate-dev/2013-January/009329.html)

在这里订阅：

[https://lists.jboss.org/mailman/listinfo/hibernate-dev](https://lists.jboss.org/mailman/listinfo/hibernate-dev)

集成一些现有组件应该是直接编码。

# objective-c - 向圆形视图添加阴影

> ID：14271619
> 
> 赞同：2
> 
> 时间：2013-01-11T04:20:46.247
> 
> 标签：objective-c, uiview

我正在尝试在圆形视图后面添加一个阴影，但我的尝试导致我只在视图的边框上添加了一个阴影——而且这个阴影也不会出现在视图周围（只是顶部）。这是我的代码：

```
-(void)drawRect:(CGRect)dirtyRect{
    CGContextRef ctx=UIGraphicsGetCurrentContext();
    CGRect bounds=[self bounds];

    // Figure out the centre of the bounds rectangle
    CGPoint centre;
    centre.x=bounds.origin.x+0.5*bounds.size.width;
    centre.y=bounds.origin.y+0.5*bounds.size.height;

    // Clip context
    CGPathRef path = CGPathCreateWithEllipseInRect(bounds, NULL);
    CGContextAddPath(ctx, path);
    CGContextClip(ctx);

    // Add black outline
    path = CGPathCreateWithEllipseInRect(bounds, NULL);
    CGContextAddPath(ctx, path);
    [[UIColor blackColor] setStroke];
    CGContextSetLineWidth(ctx, 3.0);

    // Specify shadow
    CGSize offset=CGSizeMake(1,4);
    CGColorRef colour=[[UIColor darkGrayColor] CGColor];
    CGContextSetShadowWithColor(ctx, offset, 2, colour);

    // Draw image
    UIImage *littleImage=[UIImage imageNamed:@"image.png"];
    [littleImage drawInRect:bounds];

    CGContextStrokePath(ctx);

} 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:52:41.017

我认为你正在剪裁阴影。尝试使剪切路径矩形大一点或椭圆矩形小一点。

您可以通过关闭剪辑来测试这一点，看看是否出现阴影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:00:42.957

好的，需要做几件事来解决这个问题。我认为这段代码可能会减少几行，但这是有效的：

```
-(void)drawRect:(CGRect)dirtyRect{
    CGContextRef ctx=UIGraphicsGetCurrentContext();

    // Create bounds and path for rectangle slightly smaller than view (Thanks, Andrew T., for this!)
    CGRect bounds=[self bounds];
    CGFloat smallerBy=20.0;
    CGRect smallBounds=CGRectMake(bounds.origin.x+smallerBy/2, bounds.origin.y+smallerBy/2, bounds.size.width-smallerBy, bounds.size.height-smallerBy);
    CGPathRef path = CGPathCreateWithEllipseInRect(smallBounds, NULL);
    CGContextAddPath(ctx, path);

    // Add black outline with shadow to bounds
    [[UIColor blackColor] setStroke];
    CGContextSetLineWidth(ctx, 5.0);
    CGSize offset=CGSizeMake(3,4);
    CGColorRef colour=[[UIColor lightGrayColor] CGColor];
    CGContextSetShadowWithColor(ctx, offset, 8, colour);
    CGContextStrokePath(ctx);

    // Draw opaque white circle (to cover up shadow that was leaking "inside" image)
    [[UIColor whiteColor] setFill];
    CGContextSetLineWidth(ctx, 0.0);
    CGContextFillEllipseInRect(ctx, smallBounds);

    // Draw shadowless black outline over white circle (the circle had bitten into the original outline)
    CGContextSetShadowWithColor(ctx, offset, 3, NULL);
    CGContextAddPath(ctx, path);
    [[UIColor blackColor] setStroke];
    CGContextSetLineWidth(ctx, 5.0);
    CGContextStrokePath(ctx);

    // Clip context to bounds
    CGContextAddPath(ctx, path);
    CGContextClip(ctx);

    // Draw image
    UIImage *newImage=[UIImage imageNamed:@"image.png"];
    [newImage drawInRect:smallBounds];

} 
```

# firefox - 暂时禁用 Vimperator

> ID：14271624
> 
> 赞同：42
> 
> 时间：2013-01-11T04:21:27.710
> 
> 标签：firefox, firefox-addon, vimperator

如何暂时禁用 Vimperator？例如，我想在使用网络电子邮件应用程序时暂时禁用 Vimperator。有命令吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-05-02T20:58:43.560

使用`Shift`+`Esc`暂时禁用 Vimperator。再次按下它以使其工作

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-02-21T21:07:49.643

我猜你已经知道 Shift-Esc 可以暂时禁用 vimperator。所以我写了如何根据您当前的位置禁用 vimperator。

**一、解决办法：**

```
autocmd LocationChange .*                             js modes.passAllKeys = false
autocmd LocationChange mail\\.google\\.com            js modes.passAllKeys = true
autocmd LocationChange www\\.google\\.com/calendar    js modes.passAllKeys = true
autocmd LocationChange www\\.google\\.com/reader      js modes.passAllKeys = true
autocmd LocationChange mail\\.google\\.com/tasks      js modes.passAllKeys = false 
```

这会过滤 gMail、gCalendar、gReader，但不会过滤 gTask。

我给出的解决方案是级联方法，您可以定义所有网站以启用 vimperator，然后选择性地为每个网站禁用。因此，即使 gTask 使用与 gmail 相同的父站点，它也启用了 vimperator。

**现在解释：**

这些命令位于主目录中的 .vimperatorrc 中。您可以通过以下方式更改 .vimperatorrc 的位置

```
source! *directory* 
```

在 .vimperatorrc 文件中，但默认位置是主目录中的 .vimperatorrc 文件。（Windows 中的 %userprofile%）

替代解决方案：

```
autocmd LocationChange .* js modes.passAllKeys = /mail\.google\.com/.test(buffer.URL) 
```

*注意反斜杠转义点。

这种方法的问题是只有带有 autocmd 的最新命令行才能起作用。这意味着最后一个 autocmd 命令会覆盖第一个。所以你最终会导致对命令进行布尔运算，如下所示：

```
autocmd LocationChange .* js modes.passAllKeys = /(mail\.google\.com|google\.com\/reader)/.test(buffer.URL) 
```

如您所见，当您有许多要过滤的网站时，这可能会变得复杂。

文档： http: [//vimperator.sourceforge.net/help/vimperator/autocommands.xhtml](http://vimperator.sourceforge.net/help/vimperator/autocommands.xhtml)
解决方案来源： [http ://code.google.com/p/vimperator-labs/issues/detail?id=406](http://code.google.com/p/vimperator-labs/issues/detail?id=406)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-20T21:15:22.337

你可以使用 :ignorekeys 命令

```
ignorekeys add mail.yahoo.com
ignorekeys add mail.google.com 
```

在这些域上禁用所有 vimperator 键绑定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T05:12:11.547

您可以通过 feedSomeKeys（Vimperator 的插件）使用**gmail** /feedly的**键盘快捷方式。**

 **# 如何？

*   获取[这个](https://github.com/vimpr/vimperator-plugins/blob/master/_libly.js)和[这个](https://github.com/vimpr/vimperator-plugins/blob/master/feedSomeKeys_3.js)文件。
*   将这两个文件复制到 ~/.vimperator/plugins 中（如果不存在，则创建它）。
*   在 ~/.vimperatorrc 文件中添加以下行：

    :source ~/.vimperator/plugin_libly.js :command！-nargs=+lazy autocmd VimperatorEnter .* :lazy fmaps -u='mail.google.com/mail' c / jknpouexsra # [ ] ? gi gs gt gd ga gc

*   试试看！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-24T20:40:42.103

使用[autocmd 解决方案](https://stackoverflow.com/questions/14271624/disable-vimperator-temporarily/15012254#15012254)，每次出现*“Executing LocationChange Auto commands for ...”*消息时可能会很烦人。

在最新版本的 vimperator (3.8.3) 中，默认情况下不显示此消息，仅在详细模式下显示。
但是目前Firefox Addons的版本是3.8.2，所以我们需要手动安装。简单如：

```
git clone https://github.com/vimperator/vimperator-labs.git . 
make xpi 
```

`downloads`然后从目录安装 vimperator 。**

# c++ - main() 中的函数在前一个函数完成之前执行（c++ Xcode）

> ID：14271627
> 
> 赞同：0
> 
> 时间：2013-01-11T04:21:52.220
> 
> 标签：c++, xcode, execution, timing

正如标题所说，我遇到了函数在函数完成之前执行的问题。这是一个问题，因为它打乱了我的程序流程。我的 main() 函数如下所示：

```
int main()
{
    FilePath1();
    FilePath2();

    VideoConfig1();
    VideoConfig2();

    VideoRecord();

    return 0;
} 
```

FilePath 函数如下所示：

```
void FilePath1()
{
    cout << "Please enter the full filepath for where you want to save the first video: ";
    cin >> filepath1;
    cin.ignore();

} 
```

问题是 VideoConfig1() 直接在 FilePath1() 之后启动，与 FilePath2() 同时启动。有谁知道为什么会发生这种情况？

我尝试使用 waitKey() 作为 VideoConfig1() 的初始化，但没有效果。

编辑：

该程序应该按如下方式工作：

> *   运行 FilePath1()
>     *   让用户输入要保存的 video1 的文件路径
> *   运行 Filepath2()
>     *   让用户输入要保存的 video2 的文件路径
> *   运行 VideoConfig1()
> *   运行 VideoConfig2()
> *   运行 VideoRecord()

两个 FilePath 程序在终端中运行，而其他程序则打开各自的视频窗口。该程序目前正在做的是：

> *   运行 FilePath1()
>     *   让用户输入要保存的 video1 的文件路径
> *   运行 Filepath2() 和 VideoConfig1()
>     *   让用户输入要保存的 video2 的文件路径
>     *   如果在 VideoConfig1 之前 FilePath2 尚未完成，则使整个程序崩溃
> *   运行 VideoConfig2()
> *   运行 VideoRecord()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:45:46.470

既然你说你正在输入带空格的文件路径，我相信这就是正在发生的事情：

```
FilePath1();
FilePath2();
...

void FilePath1()
{
    cout << "Please enter the full filepath for where you want to save the first video: ";
    cin >> filepath1;

    // user enters the following sans quotes: "c:\my files\file.ext"
    // filepath1 becomes "c:\my"

    cin.ignore();
    // cin.ignore() with no params will clear ONE character from the stream
    // the space is removed from the input stream

}

void FilePath2()
{
    cout << "Please enter the full filepath for where you want to save the first video: ";
    cin >> filepath2;

    // at this point, there is still data in the input buffer, 
    // so filepath2 becomes: "files\file.ext" and execution continues 
    // without waiting on user input

    cin.ignore();
    // the return is removed from the input stream, input stream is now empty

} 
```

正如您所建议的，您希望使用 getline ，因为您希望输入中有空格。这是清除 cin vs getline 的一个很好的参考：[http ://www.cplusplus.com/doc/tutorial/basic_io/](http://www.cplusplus.com/doc/tutorial/basic_io/)

# php - PHP递归输入类别到MongoDB

> ID：14271634
> 
> 赞同：0
> 
> 时间：2013-01-11T04:23:02.537
> 
> 标签：php, mongodb, recursion, yii

我想根据带有子引用的模型树结构方法将以下数据结构（忽略 category_id、parent_id、位置和级别）输入 mongo Db：http: [//docs.mongodb.org/manual/tutorial/model-tree -结构/](http://docs.mongodb.org/manual/tutorial/model-tree-structures/)

```
 object(Node)#1 (6) {
  ["category_id"]=>
  int(1)
  ["parent_id"]=>
  int(0)
  ["name"]=>
  string(4) "Root"
  ["position"]=>
  int(0)
  ["level"]=>
  int(0)
  ["children"]=>
  array(2) {
    [0]=>
    object(Node)#2 (6) {
      ["category_id"]=>
      int(2)
      ["parent_id"]=>
      int(1)
      ["name"]=>
      string(15) "Root MySite.com"
      ["position"]=>
      int(0)
      ["level"]=>
      int(1)
      ["children"]=>
      array(1) {
        [0]=>
        object(Node)#3 (6) {
          ["category_id"]=>
          int(15)
          ["parent_id"]=>
          int(2)
          ["name"]=>
          string(7) "Widgets"
          ["position"]=>
          int(68)
          ["level"]=>
          int(2)
          ["children"]=>
          array(2) {
            [0]=>
            object(Node)#4 (6) {
              ["category_id"]=>
              int(24)
              ["parent_id"]=>
              int(15)
              ["name"]=>
              string(11) "Blue Widget"
              ["position"]=>
              int(68)
              ["level"]=>
              int(3)
              ["children"]=>
              array(0) {
              }
            }
            [1]=>
            object(Node)#5 (6) {
              ["category_id"]=>
              int(25)
              ["parent_id"]=>
              int(15)
              ["name"]=>
              string(13) "Purple Widget"
              ["position"]=>
              int(68)
              ["level"]=>
              int(3)
              ["children"]=>
              array(0) {
              }
            }
          }
        }
      }
    }
    [1]=>
    object(Node)#6 (6) {
      ["category_id"]=>
      int(100)
      ["parent_id"]=>
      int(1)
      ["name"]=>
      string(10) "FooBar.com"
      ["position"]=>
      int(0)
      ["level"]=>
      int(1)
      ["children"]=>
      array(1) {
        [0]=>
        object(Node)#7 (6) {
          ["category_id"]=>
          int(150)
          ["parent_id"]=>
          int(100)
          ["name"]=>
          string(6) "Gizmos"
          ["position"]=>
          int(68)
          ["level"]=>
          int(2)
          ["children"]=>
          array(2) {
            [0]=>
            object(Node)#8 (6) {
              ["category_id"]=>
              int(240)
              ["parent_id"]=>
              int(150)
              ["name"]=>
              string(11) "Blue Gizmos"
              ["position"]=>
              int(68)
              ["level"]=>
              int(3)
              ["children"]=>
              array(0) {
              }
            }
            [1]=>
            object(Node)#9 (6) {
              ["category_id"]=>
              int(250)
              ["parent_id"]=>
              int(150)
              ["name"]=>
              string(13) "Purple Gizmos"
              ["position"]=>
              int(68)
              ["level"]=>
              int(3)
              ["children"]=>
              array(0) {
              }
            }
          }
        }
      }
    }
  }
} 
```

我无法想出正确的 php 代码来遍历树并插入数据。

这是我到目前为止所拥有的：

```
 public function behaviors()
  {
    return array(
        'embeddedArrays' => array(
          'class'=>'ext.YiiMongoDbSuite.extra.EEmbeddedArraysBehavior',
          'arrayPropertyName' => 'categories',
          'arrayDocClassName' => 'Category',
          ));
  }

  public function setCategories($user_id)
  {
    $api = new ApiCategory($user_id); 
    $cats = $api->getCategories(); // retrieves structure above

    $this->recursiveCategoryTree($cats);

    $this->save(); // save the entire array of embedded documents

    if($this->getErrors())
      var_dump($this->getErrors);

  }

  public function recursiveCategoryTree($tree, $i = 0)
  {
    foreach ($tree->children as $child) {
      if ($count($child->children ) > 0 ){
        $this->categories[$i] = new Category();
        $this->categories[$i]->_id = $tree->name; 
        $i++;
        $this->getCategoryTree($child, $i);
      }
      else{
        $this->categories[--$i]->children[] = $child->name;
      } 
    } 
  } 
```

我已经尝试了几种不同的方法来让它工作，但我不确定计数器应该如何准确工作，或者我可能离基地很远？我正在使用的 php 框架 (http://canni.github.com/YiiMongoDbSuite/xhtml/basic.arrays.embedded-documents.html) 让您使用 categories[index] 方法。根据文档，它应该像这样工作：

```
$data = new Data();
$data->categories[0] = new Category();
$data->categories[0]->_id = 'Root';
$data->categories[0]->children = array("Root MySite.com", "FooBar.com");
$data->categories[1]->_id = 'Root MySite.com';
$data->categories[1]->children = {immediate children};
$data->save(); 
```

对此方法的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:56:24.587

**编辑：有了所有新数据，我清楚地了解您要实现的目标。**

所以我编辑了我的旧函数，这是一个应该在你的代码中正常工作的新函数。让我知道，以便我可以根据需要进行调整。

```
public function setCategories($user_id)
{
    $api = new ApiCategory($user_id);
    $cats = $api->getCategories(); // retrieves structure above

    $newCats = null;
    self::recursiveCatTree($newCats, $cats);
    $this->categories = $newCats;

    $this->save(); // save the entire array of embedded documents

    if($this->getErrors())
        var_dump($this->getErrors);

}

public static function recursiveCatTree(&$result, $parent)
{
    $children = $parent['children'];

    //we unset the children so we dont have manually set every other variable
    unset( $parent['children']);
    $result = new Category();
    $result->attributes = $parent;

    //then loop the children, if no children it wont loop
    // so it will just be an empty    array
    foreach($children as $child)
    {
       $baby = null;
       self::recursiveCatTree($baby, $child);
       $result->children[] = $baby;
    }

} 
```

# navigation - 如何在 current_page 上向 nav_link 添加更多元素？

> ID：14271637
> 
> 赞同：1
> 
> 时间：2013-01-11T04:23:34.450
> 
> 标签：navigation, ruby-on-rails-3.2, urlhelper, current-page

我在导航菜单中有一些静态页面。我想为当前显示的项目添加更多元素。

视图布局/adminzor.html.erb 上的导航

```
<ul class='main-nav'>
    <%= nav_link 'Dashboard', adminzor_path %>
</ul> 
```

在 application_helper.rb 上

```
def nav_link(link_text, link_path)
  class_name = current_page?(link_path) ? 'active' : ''
    content_tag(:li, :class => class_name) do
      link_to link_text, link_path
    end
 end 
```

和输出

```
<ul class='main-nav'>
   <li class="active">
      <a href="/adminzor">Dashboard</a>
   </li>
</ul> 
```

因为我将 nav_link 助手与 Twitter Bootstrap 的 nav 组件一起使用，该组件更喜欢将链接包装在 li 标签内，并将“活动”类应用于外部 li。我在视图上添加了一些元素，例如

```
<%= nav_link adminzor_path, :class => "light" do %>
  <div class="ico"><i class="icon-home icon-white"></i></div>
  Dashboard
<% end %> 
```

和帮手

```
def nav_link(link_text, link_path)
      class_name = current_page?(link_path) ? 'active' : ''
        content_tag(:li, :class => class_name) do
          link_to link_path do
           link_text
          end
        end
   end 
```

但错误

```
ArgumentError in Adminzor/dashboards#index

Showing c:/Sites/zionrails/app/views/layouts/adminzor.html.erb where line #44 raised:

wrong number of arguments (3 for 2) 
```

我想输出比如

```
<ul class='main-nav'>
<li class="active">
 <a href="/adminzor" class="light">
    <div class="ico">
       <i class="icon-home icon-white"></i>
    </div>Dashboard
 </a>
</li>
</ul> 
```

还有其他解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T14:43:55.217

```
 def menu_link(link_text, icon_type, link_path)
    class_name = current_page?(link_path) ? 'active' : ''

    content_tag(:li, :class => class_name) do
      link_to link_path do
        content_tag(:i, '', :class => icon_type) + link_text
      end
    end

  end 
```

和电话：

```
<%= menu_link('My lists', 'icon-list', user_lists_path(@user)) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:07:10.180

**解决了**

application_helper.rb

```
def is_active?(link_path)
  if current_page?(link_path)
    "active"
  else
    ""
  end
end 
```

在 layout/adminzor.html.erb 上，例如

```
<li class="<%= is_active?(adminzor_path) %>">
                <%= link_to adminzor_path, :class => 'light' do %>
                <div class="ico"><i class="icon-home icon-white"></i></div>
                Dashboard
                <% end %>
</li> 
```

# ruby-on-rails - Rails：使用空白？在 where 子句中

> ID：14271645
> 
> 赞同：0
> 
> 时间：2013-01-11T04:24:40.177
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个有开始和结束日期的模型。如果停止日期为空或为零，则模型处于活动状态。

我正在尝试为所有活动实例添加范围。

我可以使用空白吗？在where子句中以某种方式？我在 where 子句中检查两者的唯一方法是什么？还有另一种方法可以做到这一点吗？

这是我现在拥有的：

```
scope :active, where( 'stop_date is ? or stop_date is ""', nil ) 
```

我希望有一种更清洁的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:05:45.727

请注意，在`scope` [不推荐使用](http://apidock.com/rails/ActiveRecord/NamedScope/ClassMethods/scope)rails 3.1.0 之后，因此我会考虑仅使用类方法。如果在您的情况下该列实际上也可以是`NULL`空计数，`NULL`那么您将必须检查这两个实例：

```
def self.active
  where("stop_date IS NULL OR stop_date <> ''")
end 
```

IMO 更好一点，但是如果您不需要检查`NULL`状态（例如在 where 的实例中`null => false`）。然后只是：

```
def self.active
  where("stop_date <> ''")
end 
```

将工作。

# ruby - 未安装 Gem Bundler - 无法运行 Jenkins 构建

> ID：14271646
> 
> 赞同：0
> 
> 时间：2013-01-11T04:24:46.557
> 
> 标签：ruby, build, jenkins, continuous-integration, rvm

我正在尝试使用 ruby​​ 环境在 jenkins 上运行构建：- ruby​​-1.9.3-p327（通过 rvm 安装）

我收到以下错误：-

```
/var/lib/jenkins/.rvm/scripts/fetch http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p327.tar.bz2
There is no checksum for 'http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p327.tar.bz2' or 'ruby-1.9.3-p327.tar.bz2', it's not possible to validate it.
If you wish to continue with unverified download add '--verify-downloads 1' after the command. 
```

我只是想确切地知道在 Jenkins CI 服务器上我可以指定 "--verify-downloads 1" 。

此外，即使我在这个 ruby​​ 环境中安装了 bundler gem，它也无法检测到它。

**更新**

我从文件中得到了上述错误：- /var/lib/jenkins/.rvm/log/ruby-1.9.3-p327/fetch.log ，作为作业控制台输出的一部分。

对此的任何投入都会非常有帮助。谢谢你。

# ember.js - 在最近的 Ember.js Build 中定义 Ember.View 中的应用程序模板

> ID：14271651
> 
> 赞同：4
> 
> 时间：2013-01-11T04:25:29.100
> 
> 标签：ember.js

我最近升级到了最新的 Ember.js 版本（从 GitHub 页面构建。）

使用新路由器时，这不再起作用了吗？

```
App.ApplicationView = Ember.View.extend({
    template: Ember.Handlebars.compile("Hello")
}); 
```

我更喜欢在我的 js 文件而不是 index.html 中定义我的模板。我相信它更干净。但是，上面没有渲染！

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T06:38:08.537

对于 Ember 1.0，模板应该在`index.html`通过构建工具提供给应用程序的单独文件中或单独的文件中定义。

一些例子：

*   [对于咕噜](https://github.com/dgeb/grunt-ember-templates)
*   [早午餐](https://npmjs.org/package/ember-precompiler-brunch)
*   [对于 Rails 资产管道](https://github.com/emberjs/ember-rails)
*   [铱星](https://github.com/radiumsoftware/iridium-ember)
*   [独立的预编译器](https://github.com/tchak/barber/blob/master/README.md)

如果你真的，真的想把你的模板放在 JavaScript 中，你可以把它放在你的应用程序模板中：

```
<script type="text/x-handlebars">
  {{view App.MyView}}
</script> 
```

然后定义你的观点：

```
App.MyView = Ember.View.extend({
  template: Ember.Handlebars.compile("Whatever you want here")
}); 
```

也就是说，Ember 中的最佳路径是为您的每个路由使用外部模板，或者在您开始时在您的 HTML 中，或者使用构建步骤，这样您就可以将它们排除在 index.html 之外。

# python - 哪个linux工具最适合同时解析多个文件

> ID：14271653
> 
> 赞同：0
> 
> 时间：2013-01-11T04:25:42.970
> 
> 标签：python, linux, perl, sed, awk

我知道一点，，，，但`sed`不知道。`awk``python``perl`

我需要解析大约 100 个不同的文件，找到模式，相互匹配多个列并放入新文件。

我必须定期这样做。

我只想知道哪种工具最适合这种情况。基于此，我将购买那本书并获得有关该主题的更高级知识

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:40:34.340

这个线程将开始一场最好的战争:)

如您所知`python`，您绝对应该这样做。我自己使用 python 进行了很多文本操作，而其他一切都变得复杂。

即使`awk`可以做你需要的，你也不会喜欢你在代码中看到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:37:48.140

Perl 是文本操作的最佳语言。使用 Perl 可以轻松快速地完成您想做的任务。

从“Learning Perl”一书或官方文档“ [perldoc](http://perldoc.perl.org/) ”开始。[这里](https://stackoverflow.com/tags/perl/info)提到了更多的来源。

并确保您搜索[CPAN](http://metacpan.org)以避免重新发明相同的轮子 :)

# jquery - Jquery 混淆 - 为什么我的超链接停止工作

> ID：14271658
> 
> 赞同：1
> 
> 时间：2013-01-11T04:25:53.030
> 
> 标签：jquery

我使用 jquery 找到了某人的投票系统，并希望将其合并到我的网站中。不幸的是，我希望它检测用户是否已经投票并基于此显示投票或否决按钮（和链接）。

它工作正常 - 除了我动态更改投票按钮时，即。如果我对某个项目投反对票，我会将图标更改为投赞成票，但是当我单击投赞成票图标时，不会触发超链接操作。我需要做些什么来“重新连接它”吗？注意：我刚刚在投票时实现了这个逻辑，投票我还没有改变，所以它目前清除了投票按钮。这将得到修复。

如果知道这一点很重要 - 这是在 .net/mvc 应用程序中。

```
 <script type="text/javascript">
        $(document).ready(function() {

            function onChange(newPageValue) {
                UpdateStories(newPageValue);
            }

            $(function() {
            $("a.vote_up").click(function() {
                //get the id
                var theId = $(this).attr('id').replace('vote_', '');

                // show the spinner
                $(this).parent().html("<img src='content/images/spinner.gif'/>");

                //fadeout the vote-count 
                $("span#votes_count_" + theId).fadeOut("fast");

                //the main ajax request
                $.ajax({
                    type: "POST",
                    data: { action: "vote_up", id: $(this).attr("id")}, 
                    url: "@Url.Action("ProcessVote", "Vote")",
                    success: function(msg) {
                        $("span#votes_count_" + theId).html(msg);
                        // fadein the vote count
                        $("span#votes_count_" + theId).fadeIn();
                        // remove the spinner
                        $("span#vote_buttons_" + theId).html('');
                    }
                });

            });
        });

        $(function() {
            $("a.vote_down").click(function() {
                //get the id
                var theId = $(this).attr('id').replace('vote_', '');

                // show the spinner
                $(this).parent().html("<img src='content/images/spinner.gif'/>");

                //fadeout the vote-count 
                $("span#votes_count_" + theId).fadeOut("fast");

                //the main ajax request
                $.ajax({
                    type: "POST",
                    data: { action: "vote_down", id: $(this).attr("id")}, 
                    url: "@Url.Action("ProcessVote", "Vote")",
                    success: function(msg) {
                        $("span#votes_count_" + theId).html(msg);
                        // fadein the vote count
                        $("span#votes_count_" + theId).fadeIn();
                        // remove the spinner
                        var votelink = "<a href='javascript:;' class='vote_up' id='vote_" + theId + "'></a>";
                        $("span#vote_buttons_" + theId).html(votelink);
                    }
                });

            });
        });

});
    </script> 
```

html/mvc 视图中引用它的部分是：

```
@foreach (var story in Model.UserStories)
        {
            <tr>
                <td>@story["FormattedID"]
                </td>
                <td>@story["Name"]
                </td>
                <td>@Html.Raw(story["Description"])
                </td>
                <td>@story["TaskEstimateTotal"]
                </td>
                <td>
                    <span class='votes_count' id='votes_count_@story["FormattedID"]'>@story["VoteCount"]</span> votes
    <br/>
                    <span class='vote_buttons' id='vote_buttons_@story["FormattedID"]'>
                         @if (story["Voted"])
                         {
                             <a href='javascript:;' class='vote_down' id='vote_@story["FormattedID"]'></a>
                         }
                         else
                         {
                             <a href='javascript:;' class='vote_up' id='vote_@story["FormattedID"]'></a>
                         }
                    </span>

                </td>
            </tr>
        } 
```

所以我的逻辑工作正常 - 除了我动态地将投票按钮放入 html 占位符之外，它不再触发它需要的事件。

编辑-我确实尝试将功能移到文档就绪功能之外，但这也不能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:29:43.170

这只会使用页面上的当前元素注册一个点击事件

```
$("a.vote_up").click(function() { 
```

如果要确保覆盖动态元素，您应该做的是使用`on`.

```
$("body").on("click",'a.vote_up',function(){ 
```

它将将此事件委托给所有当前和未来的具有 vote_up 类的锚元素。

# jquery - JQuery UI Datepicker可见

> ID：14271660
> 
> 赞同：-1
> 
> 时间：2013-01-11T04:26:24.120
> 
> 标签：jquery, datepicker

我想删除弹出窗口，使其成为静态的。

这样我就可以选择日期而无需先单击该字段。

[http://jqueryui.com/datepicker/#default](http://jqueryui.com/datepicker/#default)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:05:17.300

将日期选择器分配给 div 不要输入字段，然后它将显示为静态

```
$(function() {
  $( "#datepicker").datepicker();
});

<div id="datepicker"></div> 
```

参考：

[文档](http://jqueryui.com/datepicker/#inline)

# c# - 为什么我不能实例化从匿名对象推断类型的泛型类？

> ID：14271661
> 
> 赞同：2
> 
> 时间：2013-01-11T04:26:28.420
> 
> 标签：c#, instantiation, type-inference, anonymous-objects

假设我有一些课程 - 假设示例：

```
public class InvalidResponseException<TReq, TResp> : Exception
{
    public TReq RequestData { get; protected set; }
    public TResp ResponseData { get; protected set; }

    public InvalidResponseException(string message, TReq requestData, TResp responseData)
        : this(message, null, requestData, responseData)
    {
    }

    public InvalidResponseException(string message, Exception innerException, TReq requestData, TResp responseData)
        : base(message, innerException)
    {
        RequestData = requestData;
        ResponseData = responseData;
    }
} 
```

好的，类定义...并编译，没问题。

所以让我们在我的代码体的其他地方说，我想抛出这个异常并将一个匿名对象传递给我的一个或多个类型的异常。这应该保持它足够通用，以便我可以在我的代码库中的某些调用得到意外响应的任何地方使用它：

```
var reqData = new { 
    Context = SomeDataContext,
    Username = SomeUserName,
    ParentID = 54,
    RequestValues = ListOfItemsToGet
}

var respData = results.ToList();

string exceptionMessage = string.Format("Invalid response data detected. Requested {0} items received {1}.", ListOfItemsToGet.Count(), results.Count());

throw new InvalidResponseException(exceptionMessage, reqData, respData); 
```

对于大多数匿名调用，您可以使用类型推断，因此您不必在方法调用中定义您的类型......但是这段代码不会编译。

如果我将鼠标悬停在 reqData 的“var”上，编译器会告诉我为它定义了一个类型，尽管这是一个没有人可以手动分配的奇怪名称……所以理论上我认为可以从中推断出类型。

我最初的结论是你不能将匿名类型传递给泛型，但是你确实可以以某种方式将匿名对象传递给泛型：

```
var BritishExpats = from p in People
                    where p.CountryOfBirth == "United Kingdom" && p.CountryOfResidents != p.CountryOfBirth
                    select new { FirstName = p.FirstName, LastName = p.LastName } 
```

这里 "BritishPeople" 是一个 IEnumerable<T> ，其中 T 被推断为 'a

...我可以遍历生成的匿名对象的 IEnumerable 并引用它们的公共属性而没有任何问题...

```
foreach (var ExPat in BritishExpats)
{
    Console.WriteLine("{0}, {1}", Expat.LastName, Expat.FirstName);
} 
```

当然，我必须在循环中使用“var”，因为我们真的不*知道*“BritishExpats”是什么类型。

所以我可以使用匿名对象推断的类型来实例化某些类型的类，但不能实例化其他类型的类......

...对于匿名对象可以和不能实例化、推断和不推断什么有押韵或理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:36:42.637

您不能在构造函数中将泛型、匿名类型和类型推断放在一起。编译器就是不会得到它。您可以通过帮助类创建解决方法，例如：

```
public static class InvalidResponseExceptionHelper
{
    public static InvalidResponseException<TReq, TResp> Create<TReq, TResp>
        (string message, TReq requestData, TResp responseData)
    {
        return new InvalidResponseException<TReq, TResp>(message, 
            requestData, responseData);
    }
} 
```

另外，我没有提到它，但是`InvalidResponseException`除非进行大量修改，否则您的课程将无法编译。但是，您的问题的概念已经通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:38:36.127

你的例子不正确。您不需要为构造函数指定泛型类型。他们已经为人所知。

以下行无效，无法编译

```
public InvalidResponseException<TReq, TResp>(string message) // TReq,TResp are already known to constructor 
```

我认为你需要类似于下面的东西

```
public  class InvalidResponseException<TReq, TResp> : Exception
{
    public TReq RequestData { get; protected set; }
    public TResp ResponseData { get; protected set; }

    public InvalidResponseException (string message):
        this(message, default(TReq), default(TResp))    
    {
    }
    public InvalidResponseException (string message, TReq requestData, TResp responseData)  : base(message)
    {
        RequestData = requestData;
        ResponseData = responseData;
    }

} 
```

然后你在下面尝试（利用类型推断）

```
 throw new InvalidResponseException(exceptionMessage, "Exception Request", "Exception Response"); 
```

# iphone - 在 iOS 中制作动画时如何获取两个不同的图像对象的交点？

> ID：14271666
> 
> 赞同：0
> 
> 时间：2013-01-11T04:26:58.043
> 
> 标签：iphone, ios, objective-c, animation, frame

我需要这个问题的解决方案。 `Image`对象（水果图像）从上到下动画，就像下雪一样。我需要`image`使用另一个`image object`（篮子图像）来捕捉这些对象。所以，我想找出篮子图像和水果图像的交点。但我没有得到交点。我用过

```
CGRectIntersectsRect(fruitObjPresentationLayer.frame, basketObjPresentationLayer.frame); 
```

找出交点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:49:36.263

`CGRectIntersectRect`是一个返回`boolean`值的函数，如果两个对象之间发生冲突，您的帧被传递给此函数。在您的情况下，您需要传递两个对象的更新框架。根据您的问题，对象是从上到下的动画，这意味着两个对象的帧在运行时都会更改。因此，您需要计算`frame`两个对象的当前位置，然后将更新`frame`后的值传递给`CGRectIntersectRect`函数。尝试将更新的帧传递给`CGRectIntersectRect`解决您的问题的帧。

为了计算更新的值，您还必须找出增量值，例如

```
deltax = currentposition.x-previousposition.x;
deltay = currentposition.y-previousposition.y; 
```

然后将`frame`两个对象的更新为

```
CGRect Frame = obj1.frame;

    Frame.origin.x+=delta_x;
    Frame.origin.y+=delta_y; 
```

第二个类似`object`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:55:11.220

CGRectIntersectsRect() 返回一个布尔值而不是相交点。因此，当它们相交时，将帧位置相互比较，然后进行数学运算以找出相交的位置。

此外，框架是矩形，因此它们的交点实际上是一条线，而不是一个点。

你可以设置一个 NSTimer 来触发，比如说，每秒 60 次调用

```
if ([CGRectIntersectsRect(fruitObjPresentationLayer.frame,    basketObjPresentationLayer.frame)] {
//when this is called do whatever you want with the objects current frame.origin
} 
```

# c# - jQuery 和 JavaScript 在 MultiView 中不起作用

> ID：14271667
> 
> 赞同：0
> 
> 时间：2013-01-11T04:27:00.907
> 
> 标签：c#, javascript, jquery, asp.net, datalist

我在更新面板中的多视图中使用数据列表来显示各种数据量。DataList中的OnItemDataBound，根据item的不同，它添加了一个封装在一个div中的jQuery代码。有谁知道如何修复此代码使其正常工作？这是一些示例代码：

```
<asp:UpdatePanel runat="server" UpdateMode="Conditional">
     <ContentTemplate>
         <asp:MultiView runat="server">
              <asp:View runat="server">
                  <asp:DataList ID="tmpDataTable" runat="server" 
                       DataSourceID="tmpDataSource" 
                       OnItemDataBound="tmpDataBound">
                          <ItemTemplate>
                             <a id="tstATag" runat="server" onclick="testingAlert();">
                                 <%# Eval("Text_Col") %><a>
                          </ItemTemplate>
                   </asp:DataList>
              <asp:SqlDataSource OnSelecting="PermSet" ID="tmpDataSource" 
                      runat="server" ConnectionString="<%$ ConnectionStrings:Con %>"
                      SelectCommand="SELECT * FROM SampleTable">
              </asp:SqlDataSource>
              <div runat="server id="tmpDiv"></div>
          </asp:View>
      </asp:MultiView>
   </ContentTemplate> 
```

这是后端代码：

```
protected void tmpDataBound(object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || 
                e.Item.ItemType == ListItemType.AlternatingItem)
    {
        HtmlGenericControl tstATag = e.Item.FindControl("tstATag") as HtmlGenericControl;
        tmpDiv.InnerHtml += @"   <script type='text/javascript'>
                                                    function testingAlert() {
                                                        alert(tstATag.innerHtml);
                                                    }

                                                </script>";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:19:38.363

我最终发现的是，当您在多视图中查看不同的视图时，您必须进行整页回发以使脚本正确注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:07:25.950

而不是从 onitemdatabound 设置 div innerhtml 从页面加载

```
 protected void Page_Load(object sender, EventArgs e)
        {
            tmpDiv.InnerHtml += @"   <script type='text/javascript'>
                                                        function testingAlert() {
                                                            alert('Testing');
                                                        }

                                                    </script>";
        } 
```

# asp.net-mvc - 如何在 MVC4 中创建我的自定义 MembershipProvider

> ID：14271671
> 
> 赞同：0
> 
> 时间：2013-01-11T04:27:17.590
> 
> 标签：asp.net-mvc, asp.net-mvc-4, membership-provider

我有我自己的表供我的数据库中的用户使用。它们被称为`Teachers`和`Students`。我正在测试 ASP.NET MVC4 SimpleMembership，但我想我需要创建一个新的成员资格提供程序。

每个表都有自己的密码字段（纯文本）

![在此处输入图像描述](../Images/8d2990b2cddddc19bd334ec97699652a.png)

这是我设计的图像。我想知道这是否是一种登录和识别正在记录的用户类型（学生或教师）的好方法，或者我可以只使用一个名为 Users 的表来简化这一点，而不是实现我自己的自定义成员资格（使用默认的 UserProfile）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:32:17.380

通常在设计会员系统时，您会从一个基`users`表开始。然后从那里，您可以拥有`user_types`（可能是学生、教师或将来的任何其他人，如父母）。然后，在您的应用程序中，您可以测试以查看正在登录的用户类型并做出相应的响应。

如果您需要为特定用户类型（例如教师）存储其他数据，那么您可以创建一个添加到基本表的表，并通过让模型扩展基本模型`users`来在您的模型中复制此数据，添加任何教师-您可能需要的特定逻辑。`Teacher``User`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:28:13.303

请通过以下链接...可能会有所帮助... :)

[http://www.bradygaster.com/custom-authentication-with-mvc-3.0](http://www.bradygaster.com/custom-authentication-with-mvc-3.0)

[http://www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

[自定义会员提供者和角色提供者](http://www.mattwrock.com/post/2009/10/14/Implementing-custom-Membership-Provider-and-Role-Provider-for-Authinticating-ASPNET-MVC-Applications.aspx)

# three.js - 在 three.js 中移动相机、lookAt 和旋转

> ID：14271672
> 
> 赞同：48
> 
> 时间：2013-01-11T04:27:20.967
> 
> 标签：three.js

我无法理解 lookAt 和相机的旋转。

我在 xy 平面上的 [0,0,0] 周围有一圈小球。

摄像头放置在[0,0,30]处，经过一看，摄像头的旋转为[0,0,0]。圆圈看起来好像从上面看（如预期的那样）。

然后我将相机移动到 [30,0,0] 并查看后相机的旋转为 [0,90deg,0]。圆圈出现在它的一侧，但垂直，而不是我所期望的水平。为什么相机为 y 旋转 90 度？

之后，我将相机移动到 [0,30,0] 并查看后相机的旋转为 [-90deg,0,90deg]。圆圈再次出现在其侧面，垂直而不是水平。

为什么相机会旋转？我认为根本不会有旋转，因为它本身就在 x 和 y 轴上。

感谢您的任何帮助！:-)

注意：最初发布在[https://github.com/mrdoob/three.js/issues/2917](https://github.com/mrdoob/three.js/issues/2917)，但被告知要来 Stack Overflow。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-05-04T09:20:16.570

要解决此问题，您可以在执行 lookAt() 命令之前指定相机的向上向量。

```
// Place camera on x axis
camera.position.set(30,0,0);
camera.up = new THREE.Vector3(0,0,1);
camera.lookAt(new THREE.Vector3(0,0,0)); 
```

根据您的需要更改矢量。您甚至可以通过指定负值将其颠倒过来：(0,0,-1)。在使用lookAt() 之前设置向上向量很重要。

我在[http://jsfiddle.net/VsWb9/991/](http://jsfiddle.net/VsWb9/991/)创建了一个带有 2 个立方体的完整示例。较小的假设在大的顶部（在正 z 轴上）。

# postgresql - 什么告诉postgresql客户端在退出时不要清除输出

> ID：14271673
> 
> 赞同：0
> 
> 时间：2013-01-11T04:27:23.833
> 
> 标签：postgresql

当您使用 \d tablename 显示一个很长的表结构时，postgres 客户端 (psql 9.1.7) 会尝试管理输出，并在最后显示“(END)”。但是当你退出时，事情就很清楚了。

我怎样才能告诉 postgres 不要清除它？就像较低版本（psql 8.1.23）一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:29:21.480

发生的情况是 PostgreSQL 正在将输出发送到寻呼机（如`less`或`more`），如果它不能完全适合一个屏幕。

如果您不希望它这样做，请取消设置`PAGER`环境变量或使用`\pset pager off`.

# loops - 尝试在处理中循环遍历 ArrayList 的异常

> ID：14271675
> 
> 赞同：0
> 
> 时间：2013-01-11T04:27:37.387
> 
> 标签：loops, processing

我正在使用处理 2.0b7。我有一个 Spool 类，它应该有一个 Note 对象的 ArrayList。在 Spool 的 draw 方法中，我想在 ArrayList 的 draw 方法中调用每个 Note。但是，当我尝试使用此语法执行此操作时，我收到错误“

> 在 processing.core.PApplet.handleDraw(PApplet.java:2142) 的 spoolloops.draw(spoolloops.java:39) 处的线程“动画线程”java.lang.NullPointerException 中的异常) 在 processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:193) 在 processing.core.PApplet.run(PApplet.java:2020) 在 java.lang.Thread.run(Thread.java:662)

**请注意**这是处理环境，它运行某种 Java，但在重要方面有所不同。我知道语法非常不同，因为您不必为类中的方法声明范围或返回类型。但由于我不是 Java 出口，我不知道差异的确切方式和原因。

如果您想给出答案，请确保它可以在处理中工作，而不仅仅是 Java。我很确定这段代码会在纯 Java 环境中抛出各种错误，但这不是它正在运行的，所以没关系。该平台是处理。

```
class Spool {

  int diameter = 50;
  int i, angle;
  Note note, test;

  ArrayList<Note> notes;

  void Spool() {
    notes = new ArrayList<Note>();
    notes.add( note = new Note(100.0,100.0,100.0,100.0,100.0) );
    notes.add( note = new Note(120.0,120.0,120.0,120.0,120.0) );
  }

  void draw() {    
    for (int i = 0; i < notes.size(); i++) {
      test = (Note)notes.get(i);
      test.draw();

    }

    angle = angle + 1;
    if ( angle > 360 ) {
      angle = 0;
    }

  }
}

class Note {

  float diameter, x,y, start, stop;

  Note(float Diameter, float X, float Y, float Start, float Stop) {
    diameter = Diameter;
    x = X;
    y = Y;
    start = Start;
    stop = Stop;
  }

  void turn(float degrees) {
  }

  void draw() {
    strokeWeight(25);
    arc( x,y,diameter, diameter, radians(start), radians(stop));
  }
} 
```

`notes.size()`in`for`循环似乎是导致问题的原因，但是当我将其更改为 时，`i < 1`错误发生在`test = (Note)notes.get(i);`. 我想 ArrayList 没有正确填充 Note 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:14:56.773

类和对象初始化器不返回类型。从

```
void Spool() 
```

将其保留为

```
Spool() 
```

否则在创建期间不会调用它。

也不是完全有必要拥有

```
notes.add( note = new Note(100.0,100.0,100.0,100.0,100.0) ); 
```

据我了解，它可以简单地是：

```
notes.add(new Note(100.0,100.0,100.0,100.0,100.0) ); 
```

# xcode - 来自不同 UIImage 视图的相机胶卷中的多个图像 - 照片拼贴应用程序

> ID：14271677
> 
> 赞同：0
> 
> 时间：2013-01-11T04:27:48.023
> 
> 标签：xcode, uiimageview

所以这一直让我很烦。我想做的是创建一个照片拼贴应用程序，其中有多个图像视图，我将在图像视图上放置按钮，当用户单击按钮时，它会调出相机胶卷，您可以选择一个图像并将其放入那个图像视图。我遇到的问题是，每次用户选择图像时，即使我声明了多个图像，它也只会将其放置在一个图像视图中。图像只是不断被替换。下面是我的代码。

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
<UIImagePickerControllerDelegate, UINavigationControllerDelegate>
{
    UIImagePickerController *imagePicker;
    UIImagePickerController *imagePickerTwo;
}

@property (retain, nonatomic) IBOutlet UISwitch *toggleCamera;
@property (retain, nonatomic) IBOutlet UIImageView *imageViewOne;
@property (retain, nonatomic) IBOutlet UIImageView *imageViewTwo;
- (IBAction)buttonOne:(id)sender;
- (IBAction)buttonTwo:(id)sender;

@end 
```

查看控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize toggleCamera;
@synthesize imageViewOne;
@synthesize imageViewTwo;

- (void)viewDidLoad
{   imagePicker = [[UIImagePickerController alloc] init];
    imagePickerTwo = [[UIImagePickerController alloc] init];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setImageViewOne:nil];
    [self setImageViewTwo:nil];
    [self setToggleCamera:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)dealloc {
    [imageViewOne release];
    [imageViewTwo release];
    [toggleCamera release];
    [super dealloc];
}

- (IBAction)buttonOne:(id)sender {

    UIImagePickerController *imagePicker;
    imagePicker = [[UIImagePickerController alloc] init];

    if ([self.toggleCamera isOn]) {
        imagePicker.sourceType=UIImagePickerControllerSourceTypeCamera;
    }else {
        imagePicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    }
    imagePicker.delegate=self;

    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    [self presentModalViewController:imagePicker animated:YES];

    }

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
    [self dismissModalViewControllerAnimated:YES];
    self.imageViewOne.image=[info objectForKey:
                                    UIImagePickerControllerOriginalImage];
} 

- (IBAction)buttonTwo:(id)sender {
    UIImagePickerController *imagePickerTwo;
    imagePicker = [[UIImagePickerController alloc] init];

    if ([self.toggleCamera isOn]) {
        imagePicker.sourceType=UIImagePickerControllerSourceTypeCamera;
    }else {
        imagePicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    }
    imagePicker.delegate=self;

    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    [self presentModalViewController:imagePicker animated:YES];

}

-(void)imagePickerController2:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
    [self dismissModalViewControllerAnimated:YES];
    self.imageViewTwo.image=[info objectForKey:
                             UIImagePickerControllerOriginalImage];
}
@end 
```

建议？？？请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T11:28:36.057

建议：

制作一个 NSMutableArray ，您可以在其中保留所有 imageView 对象。所以在获取新图像时..您可以在各自的imageView中设置它们，获取它的框架并替换它

# javascript - 如何在Javascript中禁用右键单击？

> ID：14271679
> 
> 赞同：0
> 
> 时间：2013-01-11T04:28:10.653
> 
> 标签：javascript, dom-events, mouseevent

> **可能重复：**
> [如何禁用右键单击我的网页？](https://stackoverflow.com/questions/737022/how-do-i-disable-right-click-on-my-web-page)
> [右键单击是 Javascript 事件吗？](https://stackoverflow.com/questions/2405771/is-right-click-a-javascript-event)

如何禁用右键单击？或者更确切地说，禁用上下文菜单。
在那张纸条上，我如何检测鼠标右键向上/向下？

这**并不是**要阻止人们获取内容或其他内容。我正在制作游戏，我也希望能够具有右键单击功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T04:30:21.507

```
window.oncontextmenu = function() {return false;} 
```

但是，某些浏览器会阻止禁用和更改上下文菜单，因此它不可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:36:36.823

```
 <script language="JavaScript">
      <!-- 
      //edit this message to say what you want
      var message="Function Disabled"; 

      function clickIE() {
           if (document.all) {
                alert(message);
                return false;
           }
      }
      function clickNS(e) {
           if(document.layers||(document.getElementById&&!document.all)) {
                if (e.which==2||e.which==3) {
                     alert(message);
                     return false;
                }
           }
           if (document.layers) 
           {
                document.captureEvents(Event.MOUSEDOWN);
                document.onmousedown=clickNS;
           }
           else{
                document.onmouseup=clickNS;
                document.oncontextmenu=clickIE;
           }
           document.oncontextmenu=new Function("return false");
      }
      // -->
 </script> 
```

检查这个网站：

1) [http://www.dynamicdrive.com/dynamicindex9/noright.htm](http://www.dynamicdrive.com/dynamicindex9/noright.htm)

2) [http://www.users.totalise.co.uk/~bigoleg/javascript/javascript_disable_right_click.html](http://www.users.totalise.co.uk/~bigoleg/javascript/javascript_disable_right_click.html)

# c# - BlogEngine 编译错误

> ID：14271681
> 
> 赞同：0
> 
> 时间：2013-01-11T04:28:22.427
> 
> 标签：c#, asp.net, blogengine.net, blog-engine

尝试编译 BlogEngine 2.6 Web 应用程序项目时遇到三个类似的错误：

**在 VS 智能感知中：**

```
the type 'RazorHelpers' exists in both 'App_Code' and BlogEngine.Web.dll 
```

**编译错误：**

```
Error    27  The type 'RazorHelpers' exists in both 
             'C:\inetpub\wwwroot\Nordic\Bin\BlogEngine.Web.dll' and 'App_Code'  
              c:\inetpub\wwwroot\Nordic\themes\RazorHost\CommentView.ascx   25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:09:03.713

在 WAP 项目中，您要确保不使用 app_code 目录，因为该目录中的类将被编译两次（一次在代码隐藏中，另一次在运行时），除非您从 WAP 项目中排除该文件。

您也可以尝试将 app_code 目录重命名为其他名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:04:13.567

最终，我不得不放弃 2.6 WAP 版本并切换到网站版本，然后迁移我所有的设计和代码自定义。

# mongoose - Mongoose asynchronous schema validation is not working

> ID：14271682
> 
> 赞同：6
> 
> 时间：2013-01-11T04:28:26.603
> 
> 标签：mongoose

I have the following code which validates my "timezone" field:

```
orgSchema.path('timezone').validate(function(value) {
  return Timezone.findOne({_id: value}, "_id", function (err, timezone) { return false; });
}, "Please provide a valid timezone"); 
```

The field is always passing, even when I add a "return false" in the innermost function. I know that I am missing a callback somewhere - I would appreciate some help.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T04:51:25.000

An [asynchronous validator](http://mongoosejs.com/docs/api.html#schematype_SchemaType-validate) needs to accept a second parameter that's the callback it must call to deliver the boolean result of the validation.

```
orgSchema.path('timezone').validate(function(value, callback) {
  return Timezone.findOne({_id: value}, "_id", function (err, timezone) { 
    callback(timezone != null);
  });
}, "Please provide a valid timezone"); 
```

# c# - 将平面集合转换为分层集合的递归方法？

> ID：14271683
> 
> 赞同：5
> 
> 时间：2013-01-11T04:28:40.210
> 
> 标签：c#, linq, entity-framework

我已经被这个问题困住了几天，希望能得到一些想法或帮助来解决它。我有一个对象集合

```
 public class Hierarchy
{
    public Hierarchy(string iD, string name, int level, string parentID, string topParent)
    {
        ID = iD;
        Name = name;
        Level = level;
        ParentID = parentID;
        Children = new HashSet<Hierarchy>();
    }
    public string ID { get; set; }
    public string Name{ get; set; }
    public int Level { get; set; }
    public string ParentID { get; set; }
    public ICollection<Hierarchy> Children { get; set; }
} 
```

从 Linq 查询到我的实体的数据是：

```
ID      Name     Level ParentID
295152  name1    1     null
12345   child1   2     295152
54321   child2   2     295152
44444   child1a  3     12345
33333   child1b  3     12345
22222   child2a  3     54321
22221   child2b  3     54321
22002   child2c  3     54321
20001   child2a2 4     22222
20101   child2b2 4     22222 
```

这些数据可以扩展到未知的级别深度（我只显示 4）。最终，我将拥有一个带有多个子对象集合的 Hierarchy 对象，而这些子对象又可能具有多个子对象的集合……等等……总是只有一个顶级对象。

我试图在这个项目中尽可能多地使用 Linq。

这显然需要某种递归方法，但我被卡住了。任何想法或帮助将不胜感激。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:52:25.527

实际上，迭代解决方案可能要容易得多。以下是步骤：

1.  根据它们的 id 将所有节点散列到字典中
2.  第二次循环，并将每个节点添加到其父节点的子列表中

看起来像这样：

```
Hierarchy CreateTree(IEnumerable<Hierarchy> Nodes)
{
    var idToNode = Nodes.ToDictionary(n => n.ID, n => n);

    Hierarchy root;
    foreach (var n in Nodes)
    {
        if (n.ID == null)
        {
            if (root != null)
            {
                //there are multiple roots in the data
            }
            root = n;
            continue;
        }

        Hierarchy parent;
        if (!idToNode.TryGetValue(n.ID, parent))
        {
            //Parent doesn't exist, orphaned entry
        }

        parent.Children.Add(n);
    }

    if (root == null)
    {
        //There was no root element
    }
    return root;
} 
```

您的数据格式有几个明显的可能错误情况。由你决定如何处理它们。

一般来说，总是有一个迭代解决方案和一个递归解决方案。特定问题会改变哪个更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T07:38:19.360

你可以试试这个递归函数：

```
void PopulateChildren(Hierarchy root, ICollection<Hierarchy> source)
{
    foreach (var hierarchy in source.Where(h => h.ParentID == root.ParentID))
    {
        root.Children.Add(hierarchy);
        PopulateChildren(root, source);
    }
} 
```

您可以像这样使用它：

```
ICollection<Hierarchy> hierarchies = new List<Hierarchy>(); // source

// Get root
var root = hierarchies.Single(h => h.Level == 1);

// Populate children recursively
PopulateChildren(root, hierarchies); 
```

# heroku - 混蛋 Heroku 应用程序：谁是父亲？（也就是说，原始本地目录在哪里？）

> ID：14271684
> 
> 赞同：2
> 
> 时间：2013-01-11T04:28:42.400
> 
> 标签：heroku, command-line-interface, heroku-toolbelt

多年来，我在 Heroku 上创建（并放弃）了一些应用程序，当它们被推送到 Heroku 的服务器时，它们被 Heroku 自动分配了通用但富有诗意的名称。现在，当我登录到我的 Heroku 帐户时，那些可怜的小孤立应用程序就坐在那里。

过了这么久，我已经准备好进行愉快的和解了。

问题是，我不记得它们属于哪个应用程序项目（我本地计算机上的目录）。是否有一些 CLI 命令可以在 rails app 目录中运行。. . 或一些我可以检查的文件。. . 这将揭示他们创造了哪个 Heroku 应用程序？

有什么方法可以使用我的 Heroku 帐户来命名应用程序的爸爸？

哦，当你真的需要 Maury Povich 时，他在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:35:01.170

我不确定您如何远程找到主目录。但是如果你还记得你的 ssh 密钥在哪里，你可以重新下载你的 heroku 应用程序并从一个新目录重新开始......即使你记得至少找到密钥并不太难。然后你可以从你的终端运行这些命令来重新下载你的整个应用程序。

```
$ gem install heroku
$ heroku login
 [then enter your credentials] 
$ heroku keys:add [path to keyfile]
$ git clone git@heroku.com:<heroku_app>.git <local_directory> 
```

[类似情况的信息](https://stackoverflow.com/questions/2786062/how-can-i-pull-an-existing-heroku-app-to-new-location-for-development)。

编辑：由于 Heroku 使用 git 远程更新，我认为这也可能会有所帮助......[这里](https://stackoverflow.com/questions/5129598/how-to-link-a-folder-with-an-existing-heroku-app)有完整的解释。尝试这个：

```
git remote add heroku git@heroku.com:project.git
heroku git:remote -a project 
```

# android - Android 创建可重用布局

> ID：14271691
> 
> 赞同：-1
> 
> 时间：2013-01-11T04:29:31.833
> 
> 标签：android, static, singleton

如何使用可在应用程序的任何位置调用的文本框创建单个弹出布局。请参阅下面我的意思的伪代码；

```
PopUpClass popup;
private static Singleton instance = null;
class Singleton {
   if(instance == null) {
      instance = new Singleton ();
      // Instantiate a class pop up class layout
       popup = new PopUpClass(); // I dont know how to create this one
    }
    return instance;
}

SomeClass {
   private buttonClicked {
   Singleton singleton = new Singleton();
   PopUpClass popup = singleton.popup;

   //add the pop up class to current view
   }
} 
```

这意味着我希望弹出类只创建一次，以便在某个类上完成的布局上的任何文本也可以在其他类上显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:22:04.687

如果您想在每个布局中显示相同的文本框或其他小部件，那么更好的方法是创建一个布局并将此布局包含在您要显示的每个活动中。可以参考此链接[链接](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

# c - 在堆栈上创建 char** 缓冲区的更好方法？

> ID：14271692
> 
> 赞同：1
> 
> 时间：2013-01-11T04:29:41.177
> 
> 标签：c, memory-management, stack

我想在堆栈上创建一个 char** 字符数组。目前，我正在使用它，但我想知道是否有更好的方法：

```
char* buf[4];
char temp0[1024], temp1[1024], temp2[1024], temp3[1024];
buf[0] = temp0;
buf[1] = temp1;
buf[2] = temp2;
buf[3] = temp3; 
```

编辑：为了更清楚，我不能简单地使用`char buf[4][1024]`. 期望 char 指针数组的函数会崩溃，因为它是一种根本不同的数据类型。这就是我在堆上创建数组的方式：

```
char** buf = malloc(sizeof(char*) * 4);
for(int i = 0; i < 4; i++)
{
    buf[i] = malloc(sizeof(char) * 1024);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:50:46.250

到目前为止发布的解决方案都适用于 4 个元素；10个他们笨重，100个不会飞。我认为这可以更好地扩展：

```
enum { MAX_ROWS = 10, ROW_SIZE = 1024 };
char bigbuffer[MAX_ROWS][ROW_SIZE];
char *buf[MAX_ROWS];

for (int i = 0; i < MAX_ROWS; i++)
    buf[i] = bigbuffer[i];

...and off you go... 
```

使用 C99 或更高版本，您可以使用 VLA（可变长度数组）参数化数组大小：

```
void buffer_creation(int rows, int cols)
{
    char bigbuffer[rows][cols];
    char *buf[rows];

    for (int i = 0; i < rows; i++)
        buf[i] = bigbuffer[i];

    ...and off you go...
} 
```

如果尺寸太大，您`malloc()`当然可以使用，但您必须确保也释放空间：

```
void buffer_creation(int rows, int cols)
{
    char *buf[rows];  // Probably won't stress the stack ever
    char *bigbuffer = malloc(rows * cols);
    if (bigbuffer != 0)
    {    
        for (int i = 0; i < rows; i++)
            buf[i] = &bigbuffer[i * cols];

        ...and off you go...
        free(bigbuffer);
    }
} 
```

显然，`buf`如果你真的想要，你也可以分配数组——我把它作为练习留给读者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:31:22.273

一个简单的`char buf[4][1024];`工作不应该一样好吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:36:13.390

稍微好一点的版本：

```
char temp0[1024], temp1[1024], temp2[1024], temp3[1024];
char *buf[4] = {temp0, temp1, temp2, temp3}; 
```

# certificate - 如何使用 .pem 和 .spc 文件对二进制文件进行签名？

> ID：14271694
> 
> 赞同：1
> 
> 时间：2013-01-11T04:29:50.387
> 
> 标签：certificate, code-signing, pem

我有 .pem 文件和 .spc 文件。我需要签名 .exe 文件。我知道需要将 pem 和 spc 转换为 pfx 证书，但没有搜索结果

谢谢

# php - MySQL - 用户评论的 varchar/varchar2 大小

> ID：14271695
> 
> 赞同：2
> 
> 时间：2013-01-11T04:29:59.567
> 
> 标签：php, mysql, sql

我想知道我该怎么做以下。

假设用户在提供的评论框中为某篇文章发表评论。我想使用 varchar(size) 类型将用户评论存储到 MySQL DB 中。如果我创建的表`varchar(100)`和用户评论超过 100 个字符，我该如何适应这些情况？

因为我不想限制它的评论大小（考虑到这是体面的大小）。解决方案是否基于在插入之前计算评论的长度......？假设 PHP 脚本用于处理评论。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:34:20.400

您可以将文本数据类型用于注释。但是如果你想限制用户输入一些字符，你应该考虑限制你的 HTML 控件（文本框、输入等）中的输入数据。让用户知道可以输入多少个字符，并将最大字符大小设置为数据库中针对评论字段设置的字符。

例如，您可以在 HTML 中的输入类型上使用 maxlenght 属性

```
<input type="text" name="textboxname" maxlength="400" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:34:40.730

请改用[`text`](http://dev.mysql.com/doc/refman/5.0/en//blob.html)字段。自 5.0.3+ 起，varchar 被限制为最多 64k 个字符。文本可以更高一些。

事先计算注释的大小是没有意义的，因为`alter table`如果当前字段大小太小，您必须在插入长注释之前进行操作。小/少记录表没什么大不了的。但是随着表的增长，`alter`成为一个**主要**操作，并且会在表被修改时杀死你的服务器。您**不会**随心所欲地改变表格的布局。

使用文本，您可以插入从 0 到 n 字节的任意数量的文本，其中 n 是您选择的特定文本类型所允许的最大值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:36:02.507

除非您想动态运行 alter table SQL 命令（坏主意），否则您无法以这种方式进行调整。如果要将用户限制为 varchar 列的大小，则应设置表单输入以强制执行该限制。

一个更好的主意是使用一种 TEXT 数据类型。仍然会有大小限制，但会更大，远远超过 varchars 可用的最大值 255。超过最大允许大小的数据将被截断。TEXT 值的检索可能比 varchar 慢，但不一定。

您可以做的另一件事是拆分超过最大大小的注释并将每个部分存储为一行。然后，您需要重新组装这些部分以提供完整的评论。这将避免任何大小问题，需要最多的编程并且可能是最慢的。

# python - CTRL+C 不会中断在 Python 中使用 CTYPES 对共享库的调用

> ID：14271697
> 
> 赞同：9
> 
> 时间：2013-01-11T04:30:11.430
> 
> 标签：python, c, signals, shared-libraries, ctypes

当调用在 C 共享库（动态库）中执行的循环时，Python 不会收到 KeyboardInterrupt，并且不会响应（或处理）CTRL+C。

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:21:59.210

除非你使用`PyDLL`or `PYFUNCTYPE`; GIL 在 ctypes 调用期间被释放。`KeyboardInterrupt`因此，如果 C 代码没有安装自己的信号处理程序，Python 解释器应该通过在主线程中引发来处理 SIGINT 。

允许 Python 代码在主线程中运行；您可以将 ctypes 调用放入后台线程：

```
import threading

t = threading.Thread(target=ctypes_call, args=[arg1, arg2, ...])
t.daemon = True
t.start()
while t.is_alive(): # wait for the thread to exit
    t.join(.1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:30:11.430

您必须在 C 中为 SIGINT 声明一个信号处理程序，希望它是您的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-08T14:11:54.583

我使用了线程解决方案，但随后切换到了信号解决方案。我使用的解决方法是从 SIGINT 处理程序发送 SIGTERM，例如：

```
signal.signal(signal.SIGINT, lambda s, f : os.kill(os.getpid(), signal.SIGTERM)) 
```

在这里我只想保存一个解决方案的核心思想，以便下次更快找到它以及我改变方法的原因。线程变体不适合我，因为当不是从主线程调用 OpenMP 时，它的速度会明显变慢。

# c# - 定点模边缘情况

> ID：14271707
> 
> 赞同：4
> 
> 时间：2013-01-11T04:31:16.113
> 
> 标签：c#, math, fixed-point

我正在C# 中实现基于 System.Int64的[Q31.32 定点数值类型。](http://en.wikipedia.org/wiki/Q_%28number_format%29)现在我正在尝试正确地进行模运算（％）。

我见过的所有定点算术的实现都简单地根据整数模来定义 Qm.n 模，即两个 Qm.n 数的模是它们底层整数表示的模。这在一般情况下有效，但在两种特定情况下失败：

*   `x % y`抛出一个`OverflowException`if`x == Int64.MinValue`和`y == -1`. 在这种情况下，我可以使用 if 语句轻松处理此问题并返回 0，尽管这是一种奇怪的行为（`unchecked`在这里没有帮助）。

*   `x % y`对于 和的一些小值，错误地返回`x`0 `y`。例如，如果和的整数表示是和（`x`十进制 ：~-0.000000096159 和~0,000000013737），则模为 （十进制：0），而其十进制值的模为（根据 System.Decimal）~-0.000000013737 . 这个误差比类型的最大精度 (2^-32) 大约大 60 倍，因此不能认为是舍入误差。`y``-413``59``0`

最后一个错误的原因是什么，我可以做些什么来获得更好的准确性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T18:37:32.020

我发现了问题。

-413 % 59 = 0 是正确的！！！

因为 -7 * 59 = -413

您假设的正确结果很可能取自-413 的**2s 补码**，这会导致混淆。

**[编辑 1]**

在 Asik 的建议下，我使用计算器，我对他的问题的最后评论是正确的。问题在于他的打印精度，而不是高于 2s 补码或模数，请参见：

```
413 >> 32 = 0.00000009615905582904815673828125  
 59 >> 32 = 0.00000001373700797557830810546875

0.00000009615905582904815673828125 / 0.00000001373700797557830810546875 = 7
0.00000009615905582904815673828125 % 0.00000001373700797557830810546875 = 0 
```

有关打印数字的更多信息，请参见：[https ://stackoverflow.com/a/18401040/2521214](https://stackoverflow.com/a/18401040/2521214)

PS您究竟是如何获得模数应该为 ~-0.000000013737 的结果？它可疑地等于 -59>>32 ...也许您的参考无法正确处理带符号的数字 (-413)<(59) 并仅抛出模 59 的结果，因为它（以避免除法）与符号组合两个数字。

# ios - 以编程方式确定 iOS 项目中的当前目标（运行或测试）

> ID：14271710
> 
> 赞同：18
> 
> 时间：2013-01-11T04:31:26.890
> 
> 标签：ios, testing

在开发 iOS 应用程序时，有没有办法以编程方式确定您是在 Test 目标中运行代码还是在常规 Run 目标中运行代码？

我有检查这个变量是否为 nil 的技巧，因为它只在我的测试目标中，但这看起来很 hacky。

```
[[[NSProcessInfo processInfo] environment] objectForKey:@"XCInjectBundle"] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-03-13T19:36:52.730

这些答案都没有真正帮助我。我希望我的应用程序知道我何时运行测试，其唯一目的是限制我的测试目标中的日志记录。当我不记录一堆东西时，测试运行得更快。所以，我通过在我的方案的测试部分添加一个自定义参数来做到这一点：

![方案截图](../Images/4cc300d7be25f44219155ccc4cc7c5ea.png)

在我的应用程序代码中，我现在可以检查我是否正在测试：

```
- (void)logError:(NSError*)error{
    if([[[NSProcessInfo processInfo] arguments] containsObject:@"-FNTesting"])
        return;

    NSLog(@"LOG THE ERROR");
} 
```

感谢@cameronspickert 是我唯一能真正找到如何使用自定义参数的地方之一

[http://cameronspickert.com/2014/02/18/custom-launch-arguments-and-environment-variables.html](http://cameronspickert.com/2014/02/18/custom-launch-arguments-and-environment-variables.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T04:45:13.423

您应该在目标设置中为“预处理器宏”定义适当的值。

在运行时，您可以用`ifdef`句子检查它​​。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-19T11:18:17.537

在 Xcode 7.3 上测试

在 上创建一个类别`NSProcessInfo`。

```
@implementation NSProcessInfo (RunningTests)

- (BOOL)ag_isRunningTests {
  return ([self.environment objectForKey:@"XCTestConfigurationFilePath"] != nil);
}

@end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-26T07:19:39.227

现在我们可以简单地用一行代码来检查“ **UITesting** ”。

```
[[[NSProcessInfo processInfo] arguments] containsObject:@"-ui_testing"] 
```

***-ui_testing***仅在测试应用程序时出现。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-14T17:22:11.033

谢谢！它有助于。这里有一些关于 swift 的例子：

```
func isRunningTests() -> Bool {

    var arguments = NSProcessInfo.processInfo().arguments as! [String]
    println("arguments ===\(arguments)")

    let testArgs = arguments.filter({ $0 == "-FNTesting" })
    if !testArgs.isEmpty {
        return true
    }

     return false
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-16T23:50:21.773

在 Xcode 6 中，您可以检查`XPC_SERVICE_NAME`环境变量中的值，以查看模拟器是在运行测试还是直接运行应用程序。

直接运行时，变量将具有类似`UIKitApplication:com.twitter.FabricSampleApp[0xb9f8]`

运行单元测试时，它将如下所示：`com.apple.xpc.launchd.oneshot.0x10000008.xctest`

```
+ (BOOL)isRunningUnitTests {
    NSString *XPCServiceName = [NSProcessInfo processInfo].environment[@"XPC_SERVICE_NAME"];
    BOOL isTesting = ([XPCServiceName rangeOfString:@"xctest"].location != NSNotFound);

    return isTesting;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-04T15:30:42.640

感谢@steven-hepting，您的回答帮助我指出了解决问题的正确方向。

但是在单元测试中使用“主机应用程序”时，“XPC_SERVICE_NAME”将返回与正常应用程序启动相同的字符串（显然）。因此，仅凭您的支票并不总是有效。这就是为什么我还要检查`TestBundleLocation`的原因。使用 Xcode 7.2 (7C68) 对此进行了测试。

```
+ (BOOL)isRunningUnitTests {
    NSDictionary<NSString *, NSString *> *env = [NSProcessInfo processInfo].environment;

    // Library tests
    NSString *envValue = env[@"XPC_SERVICE_NAME"];
    BOOL isTesting = (envValue && [envValue rangeOfString:@"xctest"].location != NSNotFound);
    if (isTesting) {
        return YES;
    }

    // App tests
    // XPC_SERVICE_NAME will return the same string as normal app start when unit test is executed using "Host Application"
    // --> check for "TestBundleLocation" instead
    envValue = env[@"TestBundleLocation"];
    isTesting = (envValue && [envValue rangeOfString:@"xctest"].location != NSNotFound);
    return isTesting;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T04:49:19.650

在项目设置中，在 Info 选项卡上，创建一个新配置（除了默认的“Debug”和“Release”）。然后，您将能够根据每个配置在目标设置（在“构建设置”选项卡上）中定义不同的预处理器宏。XCode 已经使用它为调试配置添加“DEBUG=1”，这允许您在代码中使用“#ifdef DEBUG”。您可以通过这种方式添加您喜欢的任何其他宏，例如“TESTING=1”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-08T06:15:03.083

这对我有用

```
 #if Debug_MyTarget_Shortcut_name
    //My_Target_Codes
  #else
    //My_Other_Target_Codes
  #endif 
```

在 Build setting -> Custom Flags 中，您应该为您的目标添加快捷方式名称

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-28T16:34:25.190

Xcode 13\. Swift 版本只需检查是否`environment`包含`XCTestConfigurationFilePath`密钥

```
 func isTestRunning() -> Bool { ProcessInfo.processInfo.environment.keys.contains("XCTestConfigurationFilePath")} 
```

# api - AngularJS 中单个 $http 请求的多个承诺

> ID：14271713
> 
> 赞同：3
> 
> 时间：2013-01-11T04:31:38.760
> 
> 标签：api, asynchronous, angularjs

我想在我的 AngularJS 应用程序中实现承诺，就像你在这个例子中看到的那样： [https ://stackoverflow.com/a/12360882/371273](https://stackoverflow.com/a/12360882/371273)

我的应用程序将获取多个数据数组，在我的服务器上产生多个数据库命中，但我已将服务器配置为返回所有这些数据作为一个响应，以尽量减少请求以保持我的应用程序尽可能高效（数据本质上是除非***所有***数据都到达客户端，否则无用）。因此，与其这样做...

```
MyCtrl.resolve = {
    projects : function($q, $http) {
        return $http.get('/api/projects'});
    },
    clients : function($q, $http) {
        return $http.get('/api/clients'});
    }
}; 
```

我希望能够向像这样的 URL 发出一个**GET** `$http`请求`/api/allData`，然后有一个承诺`projects`将设置为等于，`allData.projects`并且承诺`clients`将设置为等于`allData.clients`，等等（`allData`返回的数据在哪里我的**一个**请求）。我对 Promise 还是很陌生，有人可以给我一个例子来说明我如何在里面设置这些 Promise`MyCtrl.resolve`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-05T17:10:16.177

我相信这就是您正在寻找的：

```
var myApp = angular.module('myApp', []);

myApp.factory('myService', function ($http, $q) {
    return {
        getAllData: function () {
            return $q.all([ 
                // $q will keep the list of promises in a array
                $http.get('/api/projects'),
                $http.get('/api/clients')
            ]).then(function (results) {
            // once all the promises are completed .then() will be executed 
            // and results will have the object that contains the data 
                var aggregatedData = [];
                angular.forEach(results, function (result) {
                    aggregatedData = aggregatedData.concat(result.data);
                });
                 return aggregatedData;
            });
        }
     };
 }); 
```

您可以从最终`aggregatedData`数组中获取数据（例如：aggregatedData[0]、aggregatedData[1]、...）

您可以通过一次调用在 MyCtrl.resolve 中设置这些承诺：

```
resolve = {
    getAllData : myService.getAllData()
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T10:40:10.843

好吧，使用两个你知道代表同一个承诺的承诺没有多大意义。但是您确实可以创建一个接收处理一个承诺并返回两个的服务。像这样的东西：

```
var mod = angular.module('mod', []);
mod.service('theService', function($q, $http) {
  return function() {
    var cliDeferred = $q.defer(),
        proDeferred = $q.defer();

    $http.doYourStuff().then(function _onSuccess(data) {
      cliDeferred.resolve(data.clients);
      proDeferred.resolve(data.projects);
    }, function _onError(err) {
      cliDeferred.reject(err);
      proDeferred.reject(err);
    });

    return {clients: cliDeffered.promise, projects: proDeferred.promise};
  };
}); 
```

但正如我所说，这没有什么意义。考虑到您的服务将返回一个数组，**也许更好的解决方案是返回一个带有空数组的对象，并在 $http 承诺完成时填充它们。**

# python - 制作批准按钮

> ID：14271716
> 
> 赞同：-1
> 
> 时间：2013-01-11T04:31:58.330
> 
> 标签：python, openerp

我是 Python 和 openerp 的新手。当我想制作一个简单的批准按钮来更改状态时，我遇到了问题，只是为了更改状态。

错误消息：*未找到处理程序。*

这是我的脚本：

XML:

```
<button name="approve" states="draft" string="Approve" type="object"/> 
```

Python：

```
...
class student(osv.osv):
    _name = "sim.student"
    _description = "Data Siswa"

    def approve(self, cr, uid, ids, context=None):
        """ 
        confirm one or more order line, update order status and create new cashmove 
        """
        #cashmove_ref = self.pool.get('lunch.cashmove')
        orders_ref = self.pool.get('sim.student')
        for order_line in orders_ref.browse(cr, uid, ids, context=context):
            if order_line.status != 'confirmed':

                #cashmove_ref.create(cr, uid, values, context=context)
                order_line.write({'status': 'confirmed'}, context=context)
        return order_line.create(cr, uid, ids, context=context)

    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:46:28.207

您`order_line`是可浏览对象，而不是模型，`write()`应该在模型对象上完成。

代替：

```
order_line.write({'status': 'confirmed'}, context=context) 
```

尝试：

```
orders_ref.write(cr, uid, order_line.id, {'status': 'confirmed'}, context=context) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:42:16.587

您的错误是由于`create()`函数返回时调用的函数。你只需要`return True`. create 函数也没有 id 作为参数。您需要传递包含学生记录所需字段和值的字典。如果您尝试复制当前学生记录，请使用 copy() 函数。

# maven - 无法将 Maven 中生成的源访问到类路径中

> ID：14271717
> 
> 赞同：1
> 
> 时间：2013-01-11T04:32:08.420
> 
> 标签：maven, axis2

我正在使用axis2-wsdl2code-maven-plugin 为wsdl 文件生成存根类。这些都生成到 target 中的 generated-sources 文件夹中。现在我想将这些类用于我的 src/main/java 。

所以请给我有用的信息来解决我的项目中的这个问题。

谢谢纳尔西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:33:55.660

[我在这里发现了一个类似的问题。](https://stackoverflow.com/questions/7160006/m2e-and-having-maven-generated-source-folders-as-eclipse-source-folders)

基本上，您想使用[Build Helper Plugin](http://mojo.codehaus.org/build-helper-maven-plugin/)为您的项目添加一个额外的源目录。

[这是使用页面](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)的示例：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>add-source</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>add-source</goal>
            </goals>
            <configuration>
              <sources>
                <source>some directory</source>
                ...
              </sources>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:50:15.153

如果您在这种情况下生成了类，则这些类的源是 wsdl 文件，这意味着每次运行构建时，生成的类都将在 src/main/java 文件夹中被覆盖，这意味着对提交到您的版本控制。这意味着永远不要将生成的代码放入 src/main/java 将其作为默认值保留为**target/generated-sources/...***此外，无需将生成的类放入 src/main/java。

# php - 为什么我的 post 方法的 php 代码不起作用？

> ID：14271723
> 
> 赞同：0
> 
> 时间：2013-01-11T04:33:27.880
> 
> 标签：php, post, login

我的`index.php`页面中有以下表格

```
 <form action='login.php' method='POST'>
    Log in Here:<br><br>
    Username:<input type='text' name='User_name' value='username' onFocus="clearText(this)" id='fn'>
    <br><br>
    Password:<input type='password' name='_password' ><br><br>
    <input  value='Log in' type="image" src="client-login-buttonclient-login-button.jpg" ><br><br>
    <input type="checkbox" name="checkbox"  id="checkbox" />
    Remember password</span></p>
    </form> 
```

我将表单字段发布到另一个名为`login.php`

```
 <?php

    session_start();
    $username=$_POST['User_name'];
    $password=$_POST['_password'];
    if($username && $password){
    echo $username;
    echo $password;
    }
    else {
    echo 'A field is empty';
    } 
```

但是当我这样做时，它给了我以下错误

```
 Notice: Undefined index: User_name in login.php on line 4
 Notice: Undefined index: _password in login.php on line 5 
```

为什么 post 方法不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:40:02.650

该错误表明没有传递变量。为了绕过错误并仍然捕获字段为空白，请使用[`isset()`](http://php.net/isset)：

```
$username = (isset($_POST['User_name']) ? $_POST['User_name'] : ''); 
```

这将检查变量是否被传递，如果是，则将相应的变量设置为该值，否则将其设置为“”（或您选择的其他值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:41:37.047

尝试[`isset`](http://in1.php.net/isset)输入您的 if 条件并让我们看看

```
 if(isset($_POST['User_name']) && isset($_POST['_password'])){
            echo $_POST['User_name'];
            echo $_POST['_password'];
    }else {
            echo 'A field is empty';
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:43:39.993

```
 <?php

    session_start();
    if($_POST)
    {
    $username=$_POST['User_name'];
    $password=$_POST['_password'];
    if($username && $password){
    echo $username;
    echo $password;
    }
    else {
    echo 'A field is empty';
    }

    }

  ?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T04:41:08.037

您需要提交按钮来发布您的表单，或者至少使用 javascript 执行此操作，并`isset()`首先检查这些发布变量是否包含值，然后尝试分配值。

```
if(isset($_POST['UserName']){
$username=$_POST['User_name'];
} 
```

# java - 父子类 StackOverflowError 异常

> ID：14271730
> 
> 赞同：1
> 
> 时间：2013-01-11T04:33:56.330
> 
> 标签：java, jakarta-ee, parent-child

我在学校包中有两个班级

**班级学校**

```
package school;

public class people 
{
    String Name = null; 

    public String getName() 
    {
        return "Super Class Name : " + Name;
    }

    public void setName(String name) 
    {
        Name = name;
    }
} 
```

**班级学生**

```
package school;

public class students extends people 
{

    public static void main(String[] args)
    {
         people objpeople1   = new people();
         people objpeople2   = new students();

         objpeople1.setName("David");
         objpeople2.setName("Davis");

         System.out.println(objpeople1.getName());           
         System.out.println(objpeople2.getName());  
    }

    @Override
    public String getName() 
    {   
     return  "Child Class Name is: "+ getName();
    }
} 
```

第一个 getName 方法工作正常。当我尝试使用第二个方法时，它会生成异常。

objpeople2.getName() 正在生成 java.lang.StackOverflowError 异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:38:10.290

试试这个：

```
@Override
public String getName(){
    return "Child Class Name is: " + super.getName();
} 
```

您`objpeople2.getName()`正在访问`getName()`当前类的，这会导致递归调用相同的方法，这就是引发 StackOverFlorError 异常的方式。使用`super`关键字来引用当前类的超类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:45:47.117

在您的子类中，您正在`getName()`递归调用方法，这会导致内存不足，因此会导致 StackOverflowException。

试着像下面这样打电话。

```
@Override
public String getName(){
    return "Child Class Name is: " + name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:50:58.043

```
@Override
public String getName() 
{   
 return  "Child Class Name is: "+ getName();
} 
```

在此方法中 getName() 作为递归调用调用。因此，它永远不会结束对其给予的相同方法的调用`StackOverflowException`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:55:19.687

将其更改为以下。现在可以使用

```
@Override
public String getName() 
{   
 return  "Child Class Name is: "+ super.Name;
} 
```

# jquery - jquery 发布表单和预览

> ID：14271734
> 
> 赞同：1
> 
> 时间：2013-01-11T04:34:27.857
> 
> 标签：jquery, forms

我正在编写一个包含 2 个文本字段的表单的页面。有一个保存按钮，可以保存内容。现在，我想创建一个预览按钮，它将数据提交给另一个处理程序并对其进行格式化并在新窗口中返回格式化版本。

我该如何存档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:43:13.447

你可以通过一个`ajax`电话来做到这一点。

单击`preview`按钮时调用一个 ajax 函数并将其所需的所有参数发送到`server side scripting`.

创建`HTML in sever side`并返回为`JSON`or just `print it in text format`。

收到后，在success函数中，可以有一个弹窗，将响应内容粘贴到弹窗中。

`Jquery Pop-up`为此使用工具。

[http://collegegfx.com/10-best-jquery-popup-plugins/](http://collegegfx.com/10-best-jquery-popup-plugins/)

[http://smashingspy.com/32-best-jquery-popup-window-dialog-box-example/](http://smashingspy.com/32-best-jquery-popup-window-dialog-box-example/)

# jsf-2 - Regd JSF 托管 bean

> ID：14271739
> 
> 赞同：1
> 
> 时间：2013-01-11T04:34:56.403
> 
> 标签：jsf-2

我想知道 JSF 框架何时会准确读取 Bean 中提到的注解，何时将它们放入相应的 Maps 中，即 session 、 request 或 application 。

是在服务器启动期间还是在加载相关 JSF 页面时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:53:27.523

> *是在服务器启动期间还是在加载相关 JSF 页面时？*

只会`@ManagedBean(eager=true) @ApplicationScoped`在服务器启动期间构建。所有其他都将按需构建（即，当它第一次被访问而所需范围内不存在实例时）。

在服务器启动时自动构造请求/视图/会话范围的 bean 没有任何意义，原因很简单，每个 HTTP 请求、视图和会话都应该有自己的实例，而不是在应用程序中与其他人共享。更重要的是，在服务器启动期间，没有任何可用的具体 HTTP 请求或会话。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/)
*   [如何初始化 Java FacesServlet](https://stackoverflow.com/questions/13378221/how-can-i-initialize-a-java-facesservlet/)

# nservicebus - 在现有 CQRS 架构中加入新客户

> ID：14271741
> 
> 赞同：1
> 
> 时间：2013-01-11T04:35:00.363
> 
> 标签：nservicebus, cqrs

我正在为一家可能只有十台机器的小型企业设计一个新的解决方案。业务太小了，他们甚至没有运行 24/7 的服务器，因此，选择 NServiceBus/RavenDB 似乎是可靠的排队操作的明显选择，所以我可以练习开发一个服务器从客户的角度来看，不等于（或多或少）一个美化的存储库。

到目前为止，我的设计是一台服务器和许多客户端。在第一天，会处理命令并发送事件，指示对象 X、Y 或 Z 的状态已更改，从而使客户端有机会更新其本地 RavenDB 缓存以进行可靠的即时查询。然而，我似乎无法解决的问题是，当企业决定将来使用新机器时会发生什么？这台新机器在第 0 天没有启动，因此没有屏幕截图可用于与所有其他机器同步状态。

可以肯定的是，我的服务器正在通过典型的 SQL 数据库保存“屏幕截图”，以防服务器出现故障，但是如何在（几乎纯）CQRS 解决方案中将这些屏幕截图适当地传达给新客户端？

客户端是否应该发送一个命令来要求一个巨大的屏幕截图从哪里开始？

我应该在新客户端的第一天从另一个客户端克隆缓存吗？

客户端是否有能力直接连接到服务器的 SQL 数据库，以便在必要时吸收自己的屏幕截图？

在尝试实现某种事件溯源时，允许客户端连接到服务器的持久性存储是否被认为是不干净/不纯的？（在这种情况下，我不存储事件的审计表，而是依赖客户端将事件投射到他们的缓存中，这会影响事件源。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:14:26.327

如果您实施`IWantToRunWhenTheBusStarts`，您可以往返到您的 SQL 源以在本地提取状态。由于服务可能会重新启动，您只需确保提取正确的数据集。在客户端断开连接一段时间的情况下，这也可能会有所帮助。

# sql-server - 将数据从一系列 Microsoft Word 表单导出到 SQL Server

> ID：14271744
> 
> 赞同：0
> 
> 时间：2013-01-11T04:35:05.413
> 
> 标签：sql-server, ms-word

在工作中，我们要求客户填写问卷；我们发送给他们的格式是 MS Word 表格。更复杂的是，大量数据是通过复选框输入的，因此直接复制粘贴字段只会复制标签，而不是客户选择的标签。

那么现在，我们什么时候想从中获取数据呢？没那么容易。

空白调查的示例截图：

![在此处输入图像描述](../Images/56959e526714f5a281db0346d384b2e7.png)

这是一个 Microsoft Word 表格。请注意，“b) 答案”可以是复选框或自由文本字段，具体取决于问题。

我想将 Word 文档中的信息提取成更有用的东西，最好不要手动复制粘贴每个单独的值。问题是，我不知道有什么可能。这是我在 MS Excel 中可能相当容易做到的事情，但是将其添加为 Word 会使它变得更加复杂。

最终的表格可能大致具有以下结构：

```
客户 | 类别 | 问题编号 | 问题文本 | 答案 | 评论 | 遵守
```

我可以使用的工具：Word、Excel、Access 和 SQL Server Management Studio。它最终很可能会被发送到数据库，但如果可能的话，尽可能将其发送到 Access/Excel 就足够了。

这可以以任何甚至有点自动化的方式完成吗？还是我卡住了从头开始重新输入数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:08:40.793

我最终使用了[此处](https://stackoverflow.com/questions/4465212/macro-to-export-ms-word-tables-to-excel-sheets)提供的脚本的修改版本- 最值得注意的是 Tim 的答案，它遍历了文档中的所有表格。[为了处理复选框，我从这个页面](http://www.vbaexpress.com/forum/showpost.php?p=280417&postcount=8)交换了函数的复制行，这将选中和未选中的复选框分别变为“true”和“false”。

# coldfusion - ColdFusion cfexchange 连接和多个邮箱

> ID：14271745
> 
> 赞同：2
> 
> 时间：2013-01-11T04:35:09.070
> 
> 标签：coldfusion, coldfusion-8

所以我在 ColdFusion 8 中工作，试图从 Exchange 服务器中为同一页面上的几个不同用户获取日历/时间表。由于您似乎只能在打开连接时指定邮箱，因此很遗憾，我似乎必须为我希望访问的每个邮箱打开一个新连接。问题是，似乎只有我打开的第一个连接有效……任何后续连接都失败。

我有以下内容：

```
<cfloop list="mailbox1,mailbox2,mailbox3" index="mailboxname">

<cfexchangeconnection action="open" connection="conExchangeSchedules" 
    server="****"
    username="****"
    password="****"
    mailboxname="#mailboxname#"
    protocol="https"
formbasedauthentication="false">

<cfexchangecalendar
    action = "get"
    name = "qrySchedule"
    connection = "conExchangeSchedules">
        <cfexchangefilter name="StartTime" from="{ts '2013-01-06 00:00:00'}" to="{ts '2013-01-12 23:59:59'}">
</cfexchangecalendar>

<cfexchangeconnection action="close" connection="conExchangeSchedules">

<cfdump var="#qrySchedule#">

</cfloop> 
```

只有第一个邮箱是成功的。我知道所有邮箱都是有效的，因为我已经分别尝试过每个邮箱，并且作为列表中的第一个值。

但所有其他连接都返回错误

```
Could not login to the Exchange server.

Verify the server name, username, and password. Ensure that proper client certificates are installed. 
```

显然不是一个有用的错误，因为第一个连接工作正常（因此“验证”所有需要的设置）。

我什至尝试用不同的名称创建每个连续的连接。同样的问题。

有没有人有任何指示或想法？

提前致谢！-卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:14:15.193

*回答您的部分问题。* 您提到您只能在标签中指定`mailboxName`属性。`cfexchangeconnection`不一定...如果您阅读了`cfexchangecalendar`包含此注释的标签的文档（请注意“如果您省略连接属性..”语句）：

*注意：对于所有操作，如果您未指定连接属性，请参阅 cfexchangeconnection 以了解您使用的其他属性。如果省略连接属性，请通过在 cfexchangecalendar 标记中指定 cfexchangeconnection 标记属性来创建临时连接。在这种情况下，ColdFusion 会在标记完成时关闭连接。有关详细信息，请参阅 cfexchangeconnection 标记打开操作。*

所以我读到这意味着您可以通过在标签本身中包含`cfexchangeconnection`标签的开放属性来创建与 Exchange 服务器的临时连接。`cfexchangecalendar`

不确定这是否会解决您的其他问题。

[cfexchangecalendar 标记的参考文档。](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-782c.html)

# google-api - `hl` 代表什么？

> ID：14271747
> 
> 赞同：46
> 
> 时间：2013-01-11T04:35:35.050
> 
> 标签：google-api, abbreviation

各种 Google API 端点和网页使用`hl=<language code>`查询字符串中的参数来设置语言。例子

> hl=en

或者

> hl=否

代表什么`hl`？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-11T04:39:23.737

根据[此页面，它代表“宿主语言”](https://developers.google.com/custom-search/docs/xml_results?hl=en#WebSearch_Query_Parameter_Definitions)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T04:38:43.287

它并不直观，而是`hl`指定了每个[页面](https://sites.google.com/site/tomihasa/google-language-codes)的 Web 界面语言。

# serialization - 在 java 中打开序列化对象时出现 InvalidClassException

> ID：14271749
> 
> 赞同：0
> 
> 时间：2013-01-11T04:35:58.447
> 
> 标签：serialization

好的，所以我有一个要保存的 Region 类对象。我已经使 Region 和 Region 类中的所有类都实现了可序列化。我的保存方法工作得很好，但是当我尝试使用以下方法打开保存的文件时：

```
// ----------------------------------------------------------
/**
 * Open a Region object with the given fileName.
 *
 * @param fileName
 * @return The desired Region object.
 */
public static Region openRegion(String fileName)
{
    try
    {
        FileInputStream fis = new FileInputStream(fileName + ".txt");
        ObjectInputStream ois = new ObjectInputStream(fis);
        Object readObject = ois.readObject();
        ois.close();

        if (readObject != null && readObject instanceof Region)
        {
            return (Region)readObject;
        }
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    catch (ClassNotFoundException e)
    {
        e.printStackTrace();
    }
    return null;
} 
```

但后来我得到以下错误： java.io.InvalidClassException: htm.model.Cell; java.io.ObjectStreamClass$ExceptionInfo.newInvalidClassException(Unknown Source) 在 java.io.ObjectStreamClass.checkDeserialize(Unknown Source) 处没有有效的构造函数

Cell 对象是 Region 对象中的一个类，但它肯定有一个构造函数，其工作方式如下： public Cell(Column column, int columnIndex) { super(column, columnIndex); this.predictionSteps = 0; this.predictingState = false; this.previousPredictingState = false; this.learningState = 假；this.previousLearningState = false; this.listOfDistalSegments = new ArrayList(5); }

对不起，很长的问题，但我不知道我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:15:19.883

Cell的*最近的不可序列化基类*必须有一个公共的无参数构造函数。

# android - Android中的网格布局

> ID：14271751
> 
> 赞同：0
> 
> 时间：2013-01-11T04:36:09.000
> 
> 标签：android

我刚刚创建了一个新的 android 应用程序，所以我只有 MainActivity.java 文件及其对应的 xml 布局文件（activity_main.xml）。activity_main.xml 文件的内容是：

```
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:columnCount="2"
android:orientation="vertical"
android:rowCount="2" >

<Button
    android:id="@+id/blueButton"
    android:background="#236B8E" />

<Button
    android:id="@+id/redButton"
    android:background="#FF0000" />

<Button
    android:id="@+id/yellowButton"
    android:background="#FFFF00" />

<Button
    android:id="@+id/greenButton"
    android:background="#00FF00" />

</GridLayout> 
```

当我运行应用程序时，我看到的只是一个白色屏幕，顶部有“主活动”栏。我的xml文件有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:43:57.193

```
 <Button android:id="@+id/btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Translate"
    android:background="#00FF00"
    /> 
```

将所有这些属性添加到您的按钮中。您就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:44:11.443

如果您想在 gridview 中拥有红色、蓝色、绿色和黄色按钮作为每个项目，那么您必须为此编写一个单独的 xml 文件。在适配器中使用该 xml 文件，您可以将这些按钮填充为 gridView 中的每个项目。

有关如何执行此操作的更多信息，请参见[此处](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:46:36.950

首先从java文件中放一些代码。你有 setContentview 吗？这个 XML 代码很好，它工作正常..

试试这个

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gridView1"
android:numColumns="auto_fit"
android:gravity="center"
android:columnWidth="50dp"
android:stretchMode="columnWidth"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

</GridView> 
```

JAVA代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.GridView;
import android.widget.TextView;
import android.widget.Toast;
import android.view.View;
import android.widget.AdapterView.OnItemClickListener;

public class GridViewActivity extends Activity {

GridView gridView;

static final String[] numbers = new String[] { 
        "A", "B", "C", "D", "E",
        "F", "G", "H", "I", "J",
        "K", "L", "M", "N", "O",
        "P", "Q", "R", "S", "T",
        "U", "V", "W", "X", "Y", "Z"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    gridView = (GridView) findViewById(R.id.gridView1);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, numbers);

    gridView.setAdapter(adapter);

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {
           Toast.makeText(getApplicationContext(),
            ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
        }
    });

}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:48:09.547

您的代码在这里没有问题，我尝试创建新的应用程序项目，它工作得很好。您是否正确设置了 API 级别，最低 API 级别 14 设置为使用 GridLayout。你有没有在你的java代码中为这个布局设置setContentView

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T04:58:29.977

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridView1"
    android:numColumns="auto_fit"
    android:gravity="center"
    android:columnWidth="50dp"
    android:stretchMode="columnWidth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

</GridView> 
```

# java - 嵌套 if 语句的逻辑错误

> ID：14271755
> 
> 赞同：0
> 
> 时间：2013-01-11T04:36:42.143
> 
> 标签：java, if-statement, nested

我正在尝试创建一个程序来展示比赛中的前 5 名。代码可以编译，但运行时会出现明显的逻辑错误。它在所有 5 个地方重复相同的决赛选手，所以第一名被放置在第一、第二、第三，依此类推......

这是我的代码：

```
import java.util.Scanner;

public class Assignment0
{
    public static void main (String [] args)
    {
        int numberOfLanes;
        int lane = 0;
        double first;
        double second;
        double third;
        double fourth;
        double fifth;
        double [] time = null;

        Scanner keyboard = new Scanner (System.in);

        System.out.println ("How many lanes hold competitors?");
        numberOfLanes = keyboard.nextInt();

        time = new double [numberOfLanes];
        for (int i = 0; i < numberOfLanes; i++)
        {
            System.out.println("Enter time for lane " + i);
            time [i] = keyboard.nextDouble();
        }

        System.out.println();
        System.out.println();

         first = time[0];

         for (int i = 0; i < time.length; i++)
         {
             if ( time[i] < first)
                {
                    first = time[i];
                    lane = i;
                }
         }

         System.out.println("First place = Lane " + lane + ". Time = " + first + " seconds.");

         second = time[0];

         for (int i = 0; i < time.length; i++)
         {
             if (time [i] > first)
                if (time [i] < second)
                {
                     second = time[i];
                     lane = i;
                } 
         }

         System.out.println("Second place = Lane " + lane + ". Time = " + second + " seconds.");

         third = time[0];

         for (int i = 0; i < time.length; i++)
         {
             if (time[i] > second)
                if (time[i] < third)
                {
                    third = time[i];
                    lane = i;
                }

         }

         System.out.println("Third place = Lane " + lane + ". Time = " + third + " seconds.");

         fourth = time[0];

         for (int i = 0; i < time.length; i++)
         {
             if (time[i] > third)
                if (time[i] < fourth)
                            {    
                              fourth = time[i];
                              lane = i;
                            }
         }

         System.out.println("Fourth place = Lane " + lane + ". Time = " + fourth + " seconds.");

         fifth = time[0];

         for (int i = 0; i < time.length; i++)
         {
           if (time [i] > fourth)
            if (time[i] < fifth)
              {
                fifth = time[i];
                lane = i;
              }
         }

         System.out.println("Fifth place = Lane " + lane + ". Time = " + fifth + " seconds.");
    }
} 
```

输出如下所示：

```
How many lanes hold competitors?
5
Enter time for lane 0
9.72
Enter time for lane 1
9.8
Enter time for lane 2
9.82
Enter time for lane 3
9.86
Enter time for lane 4
9.9

First place = Lane 0\. Time = 9.72 seconds.
Second place = Lane 0\. Time = 9.72 seconds.
Third place = Lane 0\. Time = 9.72 seconds.
Fourth place = Lane 0\. Time = 9.72 seconds.
Fifth place = Lane 0\. Time = 9.72 seconds. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:43:14.390

您在每个循环之前设置`second = time[0];`,`third = time[0]`等，因此在每个`for`循环中，if 语句条件永远不会为真，因此变量`second`,`third`等永远不会改变，`time[0]`也`lane`永远不会改变 from `0`。

您应该改为使用`Double.MAX_VALUE`. 具体来说，在声明时，使用以下代码：

```
 int numberOfLanes;
    int lane = 0;
    double first = Double.MAX_VALUE;
    double second = Double.MAX_VALUE;
    double third = Double.MAX_VALUE;
    double fourth = Double.MAX_VALUE;
    double fifth = Double.MAX_VALUE;
    double [] time = null; 
```

并删除所有`second = time[0];`, `third = time[0]`, 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:43:47.800

您的初始化很奇怪，而不是设置`first = time[0]`等，只需将它们初始化为无穷大并删除各个分配行。

```
double first = Double.POSITIVE_INFINITY;
double second = Double.POSITIVE_INFINITY;
double third = Double.POSITIVE_INFINITY;
double fourth = Double.POSITIVE_INFINITY;
double fifth = Double.POSITIVE_INFINITY; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:44:15.343

```
first = time[0]; 
```

直到

```
fifth = time[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:44:23.727

更改`second = time[0];` 为`second = time[1];`

`third = time[0];`到`third = time[2];`

`fourth = time[0];`到`fourth = time[3];`

`fifth = time[0];`到`fifth = time[4];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T04:45:06.857

首先，这不是解决问题的好方法。但是，如果我们坚持使用这种方法，解决方案是初始化, `second`,`third`如下所示：`fourth``fifth`

```
second = Double.MAX_VALUE; 
```

依此类推，第 3 到第 5。您还需要将其作为代码的头部：

```
import java.lang.Double; 
```

但是请注意，即使使用上述修复，如果两个通道具有相同的时间，则将跳过第二个通道并且最后一个通道的时间将为`MAX_VALUE`，因此您需要完全重写代码以使用数组并对它们进行排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T04:45:48.730

`second`您在比较时间的循环之前无条件地分配和所有进一步的排名。因此，如果将最快时间作为元素放置，`[0]`您将获得观察到的行为。你应该阅读关于`sort`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T12:17:06.660

这个怎么样 ：

```
 String[] data = new String[]{"First","Second","Third", "Forth", "Fifth"};
    int num[] = new int[]{0,1,2,3,4};
    //now we sort the array(time) and we note the index
    for(int a=0;a<numberOfLanes;a++){
        for(int b=a+1;b<numberOfLanes;b++){
            if(time[a]>time[b]){
                int temp=time[a];
                time[a] = time[b];
                time[b] = temp;

                temp = num[a];
                num[a] = num[b];
                num[b] = temp;
            }
        }
    }
    //--
    //print the output
    for(int a=0;a<numberOfLanes;a++){
        System.out.println(data[a]+" place = Lane "+num[a]+". Time = "+time[a]+" seconds.");
    }
    //-- done 
```

# jquery - 在确认中单击“确定”不会提交页面

> ID：14271761
> 
> 赞同：0
> 
> 时间：2013-01-11T04:37:58.663
> 
> 标签：jquery, html

我`<body>`的代码部分中有一个简单的按钮：

```
<p><button id='submitstudents'>Submit Students</button></p> 
```

我想要按钮做的是，如果单击，它将通过该`editvalidation()`功能查看是否有任何错误，如果没有错误则显示一个确认框，如果用户确认则它应该执行 ajax。

问题是当我点击`OK`确认框中的按钮时，什么都没有发生，页面甚至没有做任何加载，我的问题是什么导致页面在点击`OK`确认按钮后没有提交？

错误控制台中没有错误。

Jquery 代码（按正确顺序显示）：

验证：

```
function editvalidation()
{
    if ($("#sessionsDrop").val()==""){
        $("#studentAlert").html("Please Select an Assessment to edit from the Assessment Drop Down Menu");
    }
    if ($("#sessionsDrop").val()!="" && $("#studentadd").children().length==0){
        $("#studentAlert").html("You have not Selected any Students you wish to Add into Assessment");
    }
    if ($("#sessionsDrop").val()!="" && $("#studentadd").children().length!=0){
        return true;
    }
    return false;
} 
```

提交表格：

```
 function submitform() {    

        $.ajax({
            type: "POST",
            url: "updatestudentsession.php",
    data: { 
        sessionid:  $('#currentid').val(),
        students:   $('#addtextarea').val()
    },
            dataType:'json',  //get response as json
            success: function(result){
                        if(result.errorflag){

           //do your stuff on getting error message
          var newHtml="<span style='color: red'>"+result.msg+"</span>"; 
          $("#targetdiv").html(newHtml);  //i am displaying the error msg here

        }else{
           //you got success message

           var newHtml="<span style='color: green'>"+result.msg+"</span>"; 
                $("#targetdiv").html(newHtml);

               //append students you want to add to assessment into student exist select box 
               var selectedStudents = jQuery("select#studentadd").find("option");
                selectedStudents.appendTo($("select#studentexist"));
                $('option.red', 'select#studentexist').remove(); 

                 //blank #studentadd select box
                 $('#studentadd').empty(); 

                    $('#targetdiv').show();
            }
        }
      }); 
} 
```

确认：

```
 function showConfirm(){

          var examInput = document.getElementById('currentAssessment').value;

          if (editvalidation()) {

         var confirmMsg=confirm("Are you sure you want to add your selected Students to this Assessment:" + "\n" + "Exam: " + examInput);

         if (confirmMsg==true)
         {
         submitform();   
     }
  }
} 
```

按钮点击：

```
$('body').on('click', '#submitstudents', showConfirm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:45:16.907

尝试

```
$('#submitstudents').click(function(){
    showConfirm();
}); 
```

编辑：

您的脚本应该可以工作。把所有的和`functions`事件放在里面。`handler``click``$(document).ready(function(){ //Code goes here });`

还要确保`jquery`库是链接的。

# jquery-mobile - 骨干路由加载 data-role=page

> ID：14271762
> 
> 赞同：0
> 
> 时间：2013-01-11T04:38:05.920
> 
> 标签：jquery-mobile, backbone.js, routes

我有一个使用 jquery mobile 和主干构建的移动应用程序。我正在尝试通过路由逻辑来相应地呈现我的视图，因此我开始简单并随着我的前进而增加复杂性。

html如下

```
<div id="main">
  <li><a href="#test_me">Click Here to Test Me</a></li>
</div>

<div id="view-goes-here"></div>

<script type="text/template" id="actions-template">
  <table cellspacing='0' cellpadding='0' border='1' >
    <thead>
      <tr>
        <th>Id</th>
        <th>Str</th>
      </tr>
    </thead>
    <tbody>
      <% _.each(action, function(c) { %> 
        <% var f = c.id, g = c.str; %>
          <tr>
            <td class="<%= f %>"><%= c.id %></td>
            <td class="<%= g %>"><%= c.str %></td>
          </tr>
      <% }); %>
    </tbody>
  </table>

</script> 
```

这是一个带有功能代码的 jsfiddle：http: [//jsfiddle.net/horcle_buzz/4JGhZ/](http://jsfiddle.net/horcle_buzz/4JGhZ/)

我希望这样当我对“test_me”进行哈希更改时，“main”div 的内容（特别是带有文本“Click Here to Test Me”的 url）会消失，只有我的视图的输出被渲染在输出中，特别是函数测试中我的变量 c 的表内容：

```
 var c = [
    { id: 1, str: 'This'},
    { id: 2, str: 'is'},
    { id: 3, str: 'a'},
    { id: 4, str: 'test!'}
  ]; 
```

我的看法如下：

```
var ActionView = Backbone.View.extend({
    template: ActionTemplate,
    events:{
      "click":"makeInput"
    },
    render:function(){
      alert("a" + JSON.stringify(this.collection));
      alert("b" + this.collection.toJSON());
      $(this.el).html(this.template({
        action: this.collection.toJSON()
      }));
      $('#view-goes-here').append(this.el);
      return this;
    },
    makeInput:function(){
      alert("im in");
    }
    }); 
```

我的猜测是我必须为我的 div 使用 data-role=page 标签，但是当我这样做时，视图不会按预期呈现。我对如何获得所需的输出有点困惑，特别是因为那里的大多数示例都相当基本。

我按如下方式禁用 jQuery Mobile 路由，然后启动 Backbone 历史记录：

```
$(document).ready(function(){

  $.mobile.linkBindingEnabled = false;
  $.mobile.hashListeningEnabled = false;
  var router = new ActionsRoute();
  Backbone.history.start();
}); 
```

路由完成如下：

```
var ActionsRoute = Backbone.Router.extend({
  routes: {
    '': 'main',
    'test_me': 'loader' 
  }, 
  main: function() {
    $.mobile.changePage( "#main" , { reverse: false, changeHash: false } );
  },
  loader: function() {
    test(function(c,  Actions, ActionView){
      alert("Data:" + JSON.stringify(c));
      var actions = new Actions(c);
      var actionView = new ActionView({collection:actions});
      actionView.render();
    });
  }
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:26:26.143

嗬！我没有将 jquery.mobile-1.2.0.min.css 定义为资源。添加它，一切都按预期运行。

# c# - 通过触摸更改 DataGrid 选定行的颜色

> ID：14271772
> 
> 赞同：0
> 
> 时间：2013-01-11T04:39:05.717
> 
> 标签：c#, compact-framework, smartphone

我是智能设备应用程序开发的新手。我在智能设备的 DataGrid 中得到的选项很少。谁能建议我正确的事件和解决方案来更改 DataGrid 中选定行的背景颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:45:47.790

我之前已经为 CompactFramework 中的 DataGrid 回答过类似的问题。请参阅我在这个问题中的回答。[为整行而不是列着色](https://stackoverflow.com/questions/12908705/color-whole-row-instead-of-single-cell/12983422#12983422)

希望这可以帮助。在我的答案末尾，我什至提供了一个示例项目供下载。

在我的示例中，我处理 DataGridColumn 的绘制，您可以使用该事件来检查您是否是当前选定的行并绘制您喜欢的任何颜色。

```
protected override void Paint(Graphics g, Rectangle bounds, CurrencyManager source, int rowNum, Brush backBrush, Brush foreBrush, bool alignToRight)
    {
        DataGridFormatCellEventArgs e = new DataGridFormatCellEventArgs(rowNum, source);
        e.ForeBrush = foreBrush;
        e.BackBrush = backBrush;
        OnSetCellFormat(e);
        base.Paint(g, bounds, source, rowNum, e.BackBrush, e.ForeBrush, alignToRight);
    } 
```

就在base.Paint你可以通过不同的刷子等。

# css - 为什么不会 text-align:center; 在这种情况下工作？

> ID：14271776
> 
> 赞同：0
> 
> 时间：2013-01-11T04:39:22.133
> 
> 标签：css

我在检查员中注意到我的 text-align:center; 被“span#artlink”划掉——它适用于我的所有其他链接，但不适用于这个链接，我很好奇是否有人能弄清楚为什么会这样。

谢谢

HTML

```
<body>
    <div id="wrapper">
        <header>

            <div id="mainnav">
                <span id="home"><a href="index.html">MARK LOVATO</a></span>
                <span id="vidlink"><a href="videos.html">VIDEOS</a></span>
                <span id="artlink"><a href="art.html">ART</a></span>
                <span id="motionlink"><a href="motion">MOTION</a></span>
                <span id="reellink"><a href="reel.html">REEL</a></span>
                <span id="aboutlink"><a href="about.html">ABOUT</a></span>
            </div>
        </header>

    </div>
</body> 
```

CSS

```
 a:link {text-decoration:none;}

    span#home{width:100%; height:50px; float:left; clear:both;}

    span#home,span#home a{color:#ffffff; background-color:#000000; 
    font- family:helvetica; font-weight:600;font-size:43px; letter-spacing:2px; 
text-align:center; font-stretch:semi-condensed;}
    span#home:hover, span#home:hover a{color:; background-color:;}

    span#vidlink{width:65%; height:50px; float:left;}
    span#vidlink,
    span#vidlink a{ color:#000000; background-color:#ffffff;text-align:center;
    font-weight:350; font-size:43px; letter-spacing:10px;}
    span#vidlink:hover, span#vidlink:hover a{color:#ffffff; background-color:#000000;}

    span#artlink{width:35%; height:50px; float:right;}

    span#artlink,span#artlink a{color:#acacac; background-color:#555555;
    text-align:center; font-weight:200; font-size:42px; letter-spacing:15px;}
    span#artlink:hover,span#artlink:hover a{color:#ff7dbd; background-color:#d60a70;} 
```

# javascript - 从响应动态创建的 json 和硬编码的 json 之间的区别

> ID：14271779
> 
> 赞同：0
> 
> 时间：2013-01-11T04:39:55.250
> 
> 标签：javascript, jquery, ajax, json, bootstrap-typeahead

我正在尝试设置引导类型头。这是我的 jquery 代码

```
 $(function () {
    $.ajax({
        type: "GET",
        url: "http://example.com/search?callback=my_callback",
        data: { keyword: 'r' },
        jsonpCallback: "my_callback",
        dataType: "jsonp",
        error: function (xhr, errorType, exception) {
            var errorMessage = exception || xhr.statusText;
            alert("Excep:: " + exception + "Status:: " + xhr.statusText);
        }
    });

    var sources = [
      { name: "local", type: "localStorage", key: "cities", display: "country" },
      { name: "remote", type: "remote", url: "/cities/list" },
      { name: "data", type: "data", data: [] }
    ];

    $('input.typeahead.local.remote').typeahead({
        sources: [
        { name: "local", type: "localStorage", key: "cities" }
      ]
    });
});

function my_callback(data) {
    alert(data.count);
    var src2 = '[';
    var i;
    for (i = 0; i < data.count; i++) {
        src2 = src2 + "{ id : " + (i + 1) + " , name: '" + data.response[i].name + "' },";

    }
    src2 = src2.substring(0, src2.length - 1);
    src2 = src2 + ']';
    var sampleJson = [{ id: 1, name: 'Really Awesome' }, { id: 2, name: 'RSpecge'}];
    localStorage.setItem("cities", JSON.stringify(src2));
} 
```

在我的回调函数中，当我`localStorage`使用从 jquery ajax 调用返回的数据进行设置时，它不起作用。但是当我尝试直接使用变量设置数据时，`sampleJson` 它起作用了。是这样吗？？

这是从 jquery ajax 的响应动态创建的 json，它看起来与 sampleJson 相同

```
[{ id: 1, name: 'Really Awesome' }, { id: 2, name: 'RSpecge'}] 
```

这是sampleJson

```
var sampleJson = [{ id: 1, name: 'Really Awesome' }, { id: 2, name: 'RSpecge'}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:57:06.133

你能澄清“不起作用”吗？尝试手动将数据序列化为 JSON 字符串是不必要的，而且容易出错。将您的数据作为常规 javascript 对象进行操作，然后`JSON.stringify`在准备好时将其转换为字符串。它将生成实际的 JSON，例如，要求所有键都用双引号括起来，而您的代码正在生成允许大多数键不被引用的 javascript 对象文字语法。

# mercurial - 合并/删除提交

> ID：14271780
> 
> 赞同：0
> 
> 时间：2013-01-11T04:39:59.280
> 
> 标签：mercurial, tortoisehg

我今天早些时候推送了一个提交，我了解到我在推送之前没有添加正确的文件而搞砸了。我修复了修订版并重新推送了它，所以现在我有一个修订版，其中几乎没有任何新内容和我真正的修订版。这真的会让我的其他团队成员感到困惑，所以我想要么将两者合并在一起，要么删除我的“空白”修订。

这是我的问题的图片：

[http://img525.imageshack.us/img525/3929/revisionproblem.png](http://img525.imageshack.us/img525/3929/revisionproblem.png)

请注意，我无法撤消/回滚，它告诉我事务不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:09:49.877

如果你已经**推动**它，你可以做的很少。您可以`hg strip`从本地仓库中获取，但下次拉取时会取回。您可以使用 编辑历史记录`hg histedit`或合并两个变更集`hg collapse`，但这些都不会摆脱您**推送**的变更集。

也就是说，您的屏幕截图中的评论“我刚刚回滚了我的最新推送......”，让我觉得您可能有`hg push`并且`hg commit`感到困惑。它们完全不同，`hg push`不能（本地）回滚。A`hg push`将您的本地变更集发送到世界 - 没有收回。A`hg commit`创建一个新的本地变更集。

如果您错误地陈述了您的问题并且您只是`hg commit`编辑了一个变更集，那么您很遗憾您拥有我上面列出的所有基于扩展的选项可供您使用。如果你真的推动了它——欢迎使用 DVCS：一旦它在那里，它就在那里，你可以在随后的提交中纠正它。

# jquery - 如果从 jquery 调用控制器，则在 rails 中显示 flash 消息

> ID：14271781
> 
> 赞同：0
> 
> 时间：2013-01-11T04:39:59.637
> 
> 标签：jquery, ruby-on-rails, jquery-ui

在我的应用程序中，我有一个带有一些代码的控制器操作..

users_controller.rb

```
 def my_method(age)
     if age >18
      flash[:notice]= "You are eligible."
     else
      flash[:notice]= "You are not eligible."
     end
    end 
```

我正在通过 jquery 调用 my_method ...（编码在 jquery 对话框的提交按钮上）

```
 jQuery.post('/users/my_method/', { age: jQuery('#age').val() }); 
```

但它没有显示闪存消息，但在日志中我看到正在调用方法“my_method”。告诉我如何显示这些闪光信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:50:39.667

由于这是一个 ajax 请求，因此您必须通过 json 处理响应（通过 rjs 或其他方式）。

以下代码将为您提供一个示例（这是我的实际工作代码之一）

例如：添加一个新朋友

```
#friends_controller.rb
class FriendsController < ApplicationController
  #<other methods>
  def create
    @friend = Friend.new(params[:friend])
    if @friend.save
      flash.now[:success] = ["Friend request successfully sent"]
      respond_to do |format|
        format.js
      end
    else
       render action: "new"   
    end
  end
end

#view/friends/_form.html.erb
<%= form_for @friend, :remote => true do |f| %>
 #code
<% end %>

#view/friend/create.js.erb
$("#message_id").html("<%= escape_javascript raw(flash_display) %>");

note : flash_display is a helper method I used to display my messages

#helpers/application_helper.rb

def flash_display
    response = "<div class='alert #{alert_class}'>"
    response += "<button type='button' class='close' data-dismiss='alert'>x</button>"
    flash.each do |name, msg|
      msg.each do |m|
        response = response + content_tag(:p, m)  
      end
    end
    response += "</div>"
    flash.discard
    response
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:30:58.653

Ajax 响应通常不利用闪存消息。相反，请查找 json 中的错误。这将让你开始......

[http://travisjeffery.com/b/2012/04/rendering-errors-in-json-with-rails/](http://travisjeffery.com/b/2012/04/rendering-errors-in-json-with-rails/)

# linux - 将指定文件夹中的所有文件上移一个目录

> ID：14271789
> 
> 赞同：0
> 
> 时间：2013-01-11T04:40:50.747
> 
> 标签：linux, bash

我有一个程序将文件提取到一系列子文件夹中，每个子文件夹都有一个“标题”子文件夹。例如：

```
/share/Videos/Godfather.Part.1
  /share/Videos/Godfather.Part.1/<packagename>
    /share/Videos/Godfather.Part.1/<packagename>/Godfather.avi
/share/Videos/Godfather.Part.2
  /share/Videos/Godfather.Part.2/<packagename>
    /share/Videos/Godfather.Part.2/<packagename>/Godfather2.avi 
```

我想获取指定文件夹中的文件`<packagename>`并将它们向上移动一个目录，以便文件结构如下所示：

```
/share/Videos/Godfather.Part.1
  /share/Videos/Godfather.Part.1/Godfather.avi
/share/Videos/Godfather.Part.2
  /share/Videos/Godfather.Part.2/Godfather2.avi 
```

如何在 bash 命令行中完成此任务？请注意，这是一个使用 2 个文件夹的示例，我有 100 个这样的文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:44:26.583

分享和享受。

```
for i in `find . -name "*avi"`
do
    dest=`dirname $i`
    mv $i $dest/..
done 
```

# python - 转换日期格式 python - 不寻常的日期格式 - 提取 %Y%M%D

> ID：14271791
> 
> 赞同：3
> 
> 时间：2013-01-11T04:41:04.060
> 
> 标签：python, date, strftime, strptime

我有一个大型数据集，其中包含以下格式的各种日期信息：

*   自 1900 年 1 月 1 日以来的天数 - 例如：41213 - 我相信这些来自 Excel [http://www.kirix.com/stratablog/jd-edwards-date-conversions-cyyddd](http://www.kirix.com/stratablog/jd-edwards-date-conversions-cyyddd)
*   YYDayofyear - 前 2012265

熟悉python的time模块，strptime()方法，strftime()方法。但是，如果有一个 python 模块可以用来转换这些不寻常的日期格式，我不确定上面的这些日期格式是什么。

知道如何在不编写我自己的计算器的情况下从这些不寻常的日期格式中获取 %Y%M%D 格式吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T04:56:47.600

您可以尝试以下方法：

```
In [1]: import datetime

In [2]: s = '2012265'

In [3]: datetime.datetime.strptime(s, '%Y%j')
Out[3]: datetime.datetime(2012, 9, 21, 0, 0)

In [4]: d = '41213'

In [5]: datetime.date(1900, 1, 1) + datetime.timedelta(int(d))
Out[5]: datetime.date(2012, 11, 2) 
```

第一个比较棘手，但它使用`%j`参数来解释您提供的年份（在四位数年份之后，由 表示`%Y`）。第二个是自 1900 年 1 月 1 日以来的天数。

这是一般转换 - 不确定您的输入格式，但希望可以对其进行调整以适应它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-05T16:51:25.230

在 Excel 整数到 Python 日期时间位：

请注意，有两个 Excel 日期系统（一个基于 1900 年 1 月 1 日，另一个基于 1904 年 1 月 1 日）；有关详细信息，请参阅[https://support.microsoft.com/en-us/help/214330/differences-between-the-1900-and-the-1904-date-system-in-excel](https://support.microsoft.com/en-us/help/214330/differences-between-the-1900-and-the-1904-date-system-in-excel)。

另请注意，该系统不是从零开始的。因此，在 1900 系统中，1900 年 1 月 1 日是第 1 天（不是第 0 天）。

```
import datetime

EXCEL_DATE_SYSTEM_PC=1900
EXCEL_DATE_SYSTEM_MAC=1904

i = 42129  # Excel number for 5-May-2015
d = datetime.date(EXCEL_DATE_SYSTEM_PC, 1, 1) + datetime.timedelta(i-2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T04:56:53.887

这两种格式似乎都非常易于使用。事实上，第一个只是一个整数，所以你为什么不做这样的事情呢？

```
import datetime

def days_since_jan_1_1900_to_datetime(d):
    return datetime.datetime(1900,1,1) + \
        datetime.timedelta(days=d) 
```

对于第二个，详细信息取决于格式的确切定义方式（例如，即使天数少于 100 天，您是否总能期待 3 位数，或者是否有可能有 2 或 1 - 如果那么，年份总是 4 位数吗？）但是一旦你把那部分记下来，它就可以非常相似地完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:56:26.630

根据[http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior) ，一年中的一天是“％j”，而第一种情况可以通过 toordinal() 和从序数（）：`date.fromordinal(date(1900, 1, 1).toordinal() + x)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T04:58:41.593

我认为timedelta。

```
import datetime
d = datetime.timedelta(days=41213)
start = datetime.datetime(year=1900, month=1, day=1)
the_date = start + d 
```

对于第二个，您可以`2012265[:4]`获取年份并使用相同的方法。

编辑：查看第二个答案`%j`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-07T10:40:06.710

```
from datetime import datetime 

df(['timeelapsed'])=(pd.to_datetime(df['timeelapsed'], format='%H:%M:%S') - datetime(1900, 1, 1)).dt.total_seconds() 
```

# ios - 在 iOS 5 和 6 中使用 Facebook 实现登录

> ID：14271792
> 
> 赞同：1
> 
> 时间：2013-01-11T04:41:05.557
> 
> 标签：ios, facebook

这个问题看起来是重复的，它是 50% 重复的，因为我在任何地方都找不到好的答案。

让我把我的问题分成三个部分。

***当前情况：*** 我已经使用电子邮件、出生日期、性别和邮政编码实现了注册屏幕。
这很好用。我还在 iOS 5 和 6 的 facebook 和 twitter 中实现了共享功能，
但现在我想用 facebook 和 twitter 实现它，如
下面的示例屏幕所示：

![使用 Facebook 登录](../Images/9817fde5f53e6deb9af8c1ae3491d640.png)

***问题是什么：*** 我想知道如何在 iOS 5 中使用 facebook 实现登录。twitter 与 ios 5 和 6 集成，Facebook 与 iOS 6 集成，所以这没什么大不了的（现在我认为是这样）。我已经为 iOS 5 和 6 实现了 twitter 和 facebook 的共享功能。所以我还需要做些什么来实现登录。

***我得到的回应：*** 正如我所说，我在注册时需要电子邮件、出生日期、性别和邮政编码。如果我使用 facebook 和 twitter 登录，如何获取此信息。如果用户没有给出或屏蔽这个社交网站的这些信息，我该怎么办。

谢谢.......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T07:40:40.013

以下是我在我的应用程序中实现此功能的方式：

1.  [从此处](https://developers.facebook.com/ios/)下载适用于 iOS 的 Facebook SDK

2.  在您`AppDelegate.h`创建 Facebook 对象的属性。

    ```
    #import <UIKit/UIKit.h>
    #import "Facebook.h"

    @interface OutpearAppDelegate : NSObject <UIApplicationDelegate> {
        UIWindow *window;
        IBOutlet UINavigationController *navigationController;        
    }

    @property (nonatomic, retain) IBOutlet UINavigationController *navigationController;
    @property (nonatomic, retain) IBOutlet UIWindow *window;
    @property (nonatomic, retain) Facebook *facebook;
    +(DemoAppDelegate*)getAppDelegate; 
    ```

3.  在你`AppDelegate.m`写这个：

    ```
    synthesize facebook; 
    ```

    并在您的`applicationDidFinishLaunching`方法中写下：

    ```
    // Initialize Facebook with app ID
    facebook=[[Facebook alloc]initWithAppId:FB_APP_KEY andDelegate:nil];
    //here FB_AP_Key is your Facebook application key 
    ```

    `facebook`并释放`dealloc`

4.  在你想用 Facebook 登录的地方写下这个函数：

    ```
    - (void)loginWithFacbookIdClicked
    {
        [DemoAppDelegate getAppDelegate].facebook.sessionDelegate=self;

        if(isInternetAvailable)
        {
            if([[DemoAppDelegate getAppDelegate].facebook isSessionValid])
            {
                //[facebookIntegration getUserFacebookPersonalInfo];
                 NSLog("User already logined with facebook");
            }
            else
            {
                [[DemoAppDelegate getAppDelegate].facebook authorize:[NSArray arrayWithObjects:@"read_stream",
                                     @"publish_stream",
                                     @"email",
                                     @"user_birthday",
                                     @"friends_about_me",
                                     @"friends_activities",
                                     @"friends_likes",
                                     nil]];
            }
        }
        else
        {
           NSLog("No Internet Connection");
        }       
    } 
    ```

5.  登录后，会自动调用 Facebook SDK 委托方法。在委托方法中做你的事情。

    ```
    - (void)fbDidLogin
    {
       NSLog("Logged into Facebook");
       // Your logic goes here.   
    }

    -(void)fbDidNotLogin:(BOOL)cancelled
    {
        DLog(@"Login Cancelled");
    }

    -(void)fbDidExtendToken:(NSString *)accessToken expiresAt:(NSDate *)expiresAt
    {

    }

    -(void)fbSessionInvalidated
    {

    }

    -(void)fbDidLogout
    {

    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T06:26:23.020

最简单的方法是从 github拉这个[链接。](https://github.com/facebook/facebook-ios-sdk)它包含一些示例代码。这将帮助您立即启动并运行。另请查看此 Facebook[教程](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)和[此](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

# ios - iOS - 使用 Replace segue 时，DetailView 的导航区域消失了

> ID：14271794
> 
> 赞同：1
> 
> 时间：2013-01-11T04:41:17.163
> 
> 标签：ios, segue

我为 iPad 应用程序练习了一些示例项目。

这是一个典型的主从示例，其中包含一些项目列表并在用户选择项目时显示详细信息。

使用替换 segue 看起来不错。但是导航区域消失了，所以我不能再选择其他项目了。（在横向模式下，MasterView 总是显示。所以没关系，但这不是最好的情况。）

欢迎提供任何建议。

先感谢您。

# rotation - 嵌入式linux帧缓冲区旋转

> ID：14271795
> 
> 赞同：4
> 
> 时间：2013-01-11T04:41:22.650
> 
> 标签：rotation, embedded, orientation, framebuffer, lcd

我必须将 LCD 屏幕集成到我的嵌入式 linux (ARM9) 系统中。LCD 是纵向 320x480，我需要以横向 480x320 运行屏幕。使用 LCD 配置寄存器，我可以在硬件中旋转它，使 (x,y)(0,0) 旋转 90 度。我的问题从这里开始，屏幕的宽边从 480 像素缩小到 320 像素，图片的长边超出了屏幕。这应该通过更改帧缓冲区尺寸 AFAIK 来解决，但我尝试了一些方法来做到这一点，但还没有成功。使用 fbset，以下是纵向的设置：

```
mode "480x320-55"
    # D: 9.091 MHz, H: 18.182 kHz, V: 55.096 Hz
    geometry 480 320 480 320 16
    timings 110000 4 4 4 4 12 2
    rgba 5/0,6/5,5/11,0/0
endmode 
```

发送命令：

```
fbset --geometry 480 320 480 320 16 
```

结果是：

```
mode "480x320-55"
    # D: 9.091 MHz, H: 18.182 kHz, V: 55.096 Hz
    geometry 480 320 480 320 16
    timings 110000 4 4 4 4 12 2
    rgba 5/0,6/5,5/11,0/0
endmode 
```

这使得图片出现几次并重叠，但屏幕宽度仍然太窄。

我试图为虚拟 xres 和 yres 提供两倍的屏幕尺寸，但没有改变。

```
fbset --geometry 480 320 960 640 16 
```

我还尝试使用我在网上找到的“saFbdevRotation.c”上的 fb 旋转功能，该功能使用 FB IOCTL，但活动屏幕尺寸仍然不正确。

旋转 90 度，见输出

```
$> ./fb_rotate -r 90
## Before rotation
### Fix Screen Info:
Line Length - 640
Physical Address = 81a00000
Buffer Length = 1048576

### Var Screen Info:
Xres - 320
Yres - 480
Xres Virtual - 320
Yres Virtual - 480
Bits Per Pixel - 16
Pixel Clk - 110000
Rotation - 0
## after rotation
###  Fix Screen Info:
Line Length - 960
Physical Address = 81a00000
Buffer Length = 1048576

### Var Screen Info:
Xres - 480
Yres - 320
Xres Virtual - 480
Yres Virtual - 320
Bits Per Pixel - 16
Pixel Clk - 110000
Rotation - 90 
```

我还可以补充一点，系统的可用内存非常有限，这会导致 fb 不分配新缓冲区吗？但是 dmesg 中没有错误。

将感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-04T22:28:31.470

> 我还可以补充一点，系统的可用内存非常有限，这会导致 fb 不分配新缓冲区吗？但是 dmesg 中没有错误。

通常，分配视频缓冲区的标准方法是在启动时预先分配一个大的视频缓冲区（基于您支持的最大视频分辨率），将 men= 参数传递给内核，这样内核就不会占用它最初。

然后稍后，视频驱动程序可以做

```
void *ioremap(unsigned long phys_addr, unsigned long size) 
```

这将为驱动程序直接操作帧缓冲区创建一个 mmap 区域。

你可以通过做检查它`cat /proc/iomen`

因此，视频驱动程序内存是预先分配的，并且不同于 linux 内核系统内存（如 kmalloc() 或 get_free_pages() 或 vmalloc()），您所关心的被排除在外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T13:31:56.487

我认为您的问题与您使用的 LCD 有关。我见过几款声称支持 90 度旋转的嵌入式 LCD，但结果与您描述的完全一样。我的问题总是在使用 RGB 显示界面时遇到。我怀疑旋转可能使用 CPU 接口起作用。我只看到一个能够为 RGB 接口正确旋转的嵌入式显示器。

问题是，您应该尝试使用 LCD 硬件、处理器硬件或纯软件进行旋转。我不知道 Linux 帧缓冲区是否可能使用纯软件或您的处理器硬件，这可能取决于您的驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-17T18:26:07.647

您是否尝试通过在 config.txt（在 DOS 引导分区上）中添加一行来旋转显示器？

您需要的行是：

```
display_rotate=0..3 
```

（其中 0 是默认值，1 是顺时针 90 度，2 180 度等）

还有一个 lcd_rotate 命令，但我不确定有什么区别。

# ruby-on-rails - Rails - 在两个相关模型对象之间创建项目时分配外部 id

> ID：14271797
> 
> 赞同：0
> 
> 时间：2013-01-11T04:41:31.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-models

在创建“许多”模型对象之一时，我很难以一对多的关系成功分配外键。

更具体地说......我有两个模型，`Course`并且`Section`，其中**Course** `has_many :sections`和每个**Section** `belongs_to :course`。除其他属性外，每个**部分**都具有外键`course_id`。

我想编写一个名为 的辅助方法`current_course`，这样当我编写`create`函数时，我可以编写在创建`current_course.sections.build(params[:section])`时自动分配外键的函数。`course_id`换句话说，`current_course`将采用从中单击它的类的 id (ie `/class/1/`) 并使其等于`course_id`新创建的部分。我尝试了`@current_course ||= Course.find(params[:course_id])`.. 但它在创建时不断抛出 ID 错误。我做错了什么，我该如何纠正我的`current_course`方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:21:19.417

你在做什么看起来基本上是正确的。

您的`create`控制器通常在开头会有这样的一行。（你根本找不到尚未创建的东西。）

```
@course = Course.new(params[:course]) 
```

如果你知道你要构建一个`Section`，你可能想`@course.sections.build`在你的`new`控制器中做。然后从那里，确保您的`Courses`模型，`accepts_nested_attributes_for :sections`然后您可以使用该函数填写`Section`视图中的字段。`fields_for`当您这样做时，您的控制器可以简单地说`@course.save`，并且`Section`将与它一起保存。

我希望这会有所帮助，但如果没有，请在您看到的错误中添加评论。

# jquery - 如何使用 jquery mobile 更新 2 个具有相同选项的选择框

> ID：14271801
> 
> 赞同：1
> 
> 时间：2013-01-11T04:42:00.863
> 
> 标签：jquery

使用 jquery/jqm 我需要向 2 个选择框添加一个选项。我可以更新一个，但不能更新另一个。我如何让另一个更新。请注意名称/id 中的 S 列出的第 2 个 .append 是更新的那个。

html:

```
<input type="button" name="Goal_WeightVar" id="Goal_WeightVar" value="doit">
<br>
<select name="grouplist" id="grouplist">
  <option value="choose">Choose a Group</option>
  <option value="#groupid#">option1</option>
</select>
<select name="groupslist" id="groupslist">
  <option value="choose">Choose a Group</option>
  <option value="#groupid#">option1</option>
</select> 
```

脚本：

```
$('#Goal_WeightVar').live('click', function() {
  var newgroupcode = $('<option value="11">11<option>');
  $('#groupslist').append(newgroupcode).trigger("create");
  $('#grouplist').append(newgroupcode).trigger("create");
  $('#groupslist').selectmenu();
  $('#groupslist').selectmenu('refresh');
  $('#grouplist').selectmenu();
  $('#grouplist').selectmenu('refresh');
}); 
```

JSFIDDLE [http://jsfiddle.net/ThMnq/1/](http://jsfiddle.net/ThMnq/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:44:03.643

您需要使用[**clone()**](http://api.jquery.com/clone/)来制作对象的副本并添加不同的对象，因为一个对象不能存在于两个地方。

**[现场演示](http://jsfiddle.net/rajaadil/ThMnq/3/)**

```
$('#Goal_WeightVar').live('click', function() {
  var newgroupcode = $('<option value="11">11<option>');
  $('#groupslist').append(newgroupcode).trigger("create");
  $('#grouplist').append(newgroupcode.clone()).trigger("create");    
}); 
```

# wso2 - WSO2 BAM-仪表板中的自定义事件

> ID：14271802
> 
> 赞同：0
> 
> 时间：2013-01-11T04:42:06.367
> 
> 标签：wso2, wso2bam

我正在使用仪表板，并希望使用仪表板显示自定义事件。是否可以使用它查看自定义事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:37:11.637

是的，你可以这样做。WSO2 BAM 设计用于接收事件并存储在 Apache Cassandra 中，具有汇总 Apache Hive/Hadoop 收集的数据并写入 RDBMS 数据库的能力。默认情况下，h2 用于写入数据。

您可以编写[jaggery 应用程序](http://jaggeryjs.org/)，也可以使用[小工具生成工具](http://docs.wso2.org/wiki/display/BAM201/Gadget+Generation+Tool)。或者您想要集成的任何其他第三方仪表板也可以完成，只要它可以从您正在写回汇总数据的 RDBMS 读取它。

# android - 如何通过 android 中的 pubdate 在 Listview 中对我的 xml 进行排序

> ID：14271805
> 
> 赞同：1
> 
> 时间：2013-01-11T04:42:29.203
> 
> 标签：android, parsing, listview

我有一个正在解析的 Rss 提要。我需要它按发布日期从上到下进行排序和组织。这是我正在使用的代码。

XML 解析器

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
 } 
```

解析活动

```
 public class AndroidXMLParsingActivity extends ListActivity {

// All static variables
static final String URL = "http://www.cpcofc.org/devoapp.xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "item";
static final String KEY_NAME = "title";
static final String KEY_COST = "description";
static final String KEY_DESC = "description";

ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_COST, parser.getValue(e, KEY_COST));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_DESC, KEY_NAME, KEY_COST}, new int[] {
                    R.id.desciption, R.id.name, R.id.cost});

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_COST, cost);
            startActivity(in);

        }
    });
}
 } 
```

这是现在的样子

![在此处输入图像描述](../Images/de5e08fd5cde98c8fd6e15c4e06fe0cf.png)

我需要在顶部显示第 1 天的反面。有人对如何使这项工作有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:03:18.320

你只需要颠倒List的顺序就可以实现你想要的，我们可以使用java集合框架提供的Collections类...这里是简单的代码

```
Collections.reverse(menuItems); 
```

它会逆转你的收藏......我希望这会对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:03:35.770

您不需要重写 ArrayAdapter 类为您实现的排序。您需要做的就是创建自己的 Comparator，它将按照您希望它们出现的方式对泛型类型对象进行排序。此外，如果您使用这种方法，您的代码应该可以正常工作。

```
adapter = new CustomAdapter(this, R.layout.list,R.id.title, data);

adapter.sort(new Comparator<RowData>() {
    public int compare(RowData arg0, RowData arg1) {
        return arg0.mProductName.compareTo(arg1.mProductName);
    }
});

setListAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

更多参考..

[http://www.vogella.com/articles/AndroidListView/article.html#listview_filtersort](http://www.vogella.com/articles/AndroidListView/article.html#listview_filtersort)

[https://github.com/bauerca/drag-sort-listview/tree/master/demo](https://github.com/bauerca/drag-sort-listview/tree/master/demo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:43:04.643

之前的两个答案都会花费您一些性能，因为它们至少会循环遍历 ArrayList 一次。

您可以像这样简单地为您的循环使用反向迭代器：

```
 int len = nl.getLength();
 for (int i = len; i > 0; --i) 
```

我还将数组的长度提取到一个局部变量中，因为它比每次调用 getLength 方法都要快。

# sparql - 如何使用 SPARQL 找到闭环？

> ID：14271809
> 
> 赞同：3
> 
> 时间：2013-01-11T04:43:17.833
> 
> 标签：sparql

我正在尝试使用以下方法找到带有 RDF 的自引用循环：

```
SELECT ?sbj
# query pattern
WHERE {
     ?sbj skos:broader+ ?sbj .
} 
```

当我在这些 RDF 三元组上运行它时：

```
http://www.example.com/Concept/0001 http://www.w3.org/2004/02/skos/core#broader http://www.example.com/Concept/0002
http://www.example.com/Concept/0002 http://www.w3.org/2004/02/skos/core#broader http://www.example.com/Concept/0003
http://www.example.com/Concept/0003 http://www.w3.org/2004/02/skos/core#broader http://www.example.com/Concept/0001 
```

我得到：

```
http://www.example.com/Concept/0003
http://www.example.com/Concept/0001
http://www.example.com/Concept/0002
http://www.example.com/Concept/0002
http://www.example.com/Concept/0003
http://www.example.com/Concept/0001
http://www.example.com/Concept/0001
http://www.example.com/Concept/0002
http://www.example.com/Concept/0003 
```

如果我对这些 RDF 三元组运行相同的查询：

```
http://www.example.com/Concept/0001 http://www.w3.org/2004/02/skos/core#broader http://www.example.com/Concept/0002
http://www.example.com/Concept/0002 http://www.w3.org/2004/02/skos/core#broader http://www.example.com/Concept/0003
http://www.example.com/Concept/0003 http://www.w3.org/2004/02/skos/core#narrower http://www.example.com/Concept/0001 
```

我得到：

```
http://www.example.com/Concept/0003
http://www.example.com/Concept/0002
http://www.example.com/Concept/0003 
```

正如我所期望的那样，它会返回空。

看起来 skos:broader+ 似乎允许 skos:broader 以外的属性，更像 ANY*,skos:broader,ANY* 或其他东西....这是正确的行为吗？

好吧，我使用：

```
Jena:       VERSION: 2.6.4
Jena:       BUILD_DATE: 2010-12-12T16:56:15+0000
ARQ:        VERSION: 2.8.7
ARQ:        BUILD_DATE: 2010-12-12T14:07:48+0000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T16:56:15.867

只是为了提供一个最小的工作示例，这里有两个与问题中的数据文件相对应的数据文件。

数据1.n3：

```
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix : <http://www.example.com/Concept/> .

:0001 skos:broader :0002 .
:0002 skos:broader :0003 .
:0003 skos:broader :0001 . 
```

数据2.n3：

```
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix : <http://www.example.com/Concept/> .

:0001 skos:broader :0002 .
:0002 skos:broader :0003 .
:0003 skos:narrower :0001 . 
```

使用 Jena 的命令行 ARQ 工具​​，似乎问题在 Jena/ARQ 的更高版本中得到了解决。

```
$ arq --version
Jena:       VERSION: 2.10.0
Jena:       BUILD_DATE: 2013-02-20T12:04:26+0000
ARQ:        VERSION: 2.10.0
ARQ:        BUILD_DATE: 2013-02-20T12:04:26+0000

$ arq --query query.sparql --data data1.n3
---------
| sbj   |
=========
| :0002 |
| :0001 |
| :0003 |
---------

$ arq --query query.sparql --data data2.n3
-------
| sbj |
=======
------- 
```

# php - Laravel 设置了一个自动 WHERE 子句

> ID：14271812
> 
> 赞同：0
> 
> 时间：2013-01-11T04:43:27.747
> 
> 标签：php, where, laravel, eloquent

我使用扩展了 generic_model 的模型，而后者又扩展了 Eloquent（所以我有几个我使用的 crud 方法已经设置为继承）。

我使用的许多表都调用软删除，这需要一个 WHERE 子句...

```
WHERE deleted = 0 
```

有没有办法让 Laravel 以这样的方式运行，即这个 WHERE 子句自动包含在所有查询中以及对彼此相关的对象的所有查询中？

例如

```
pages where id = 5 and deleted = 0 
```

进而...

```
images where page_id = 5 and deleted = 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-16T18:58:41.037

如果您使用的是 laravel 3，这就是您所需要的

在你的模型上

```
public function query()
{

    $query = parent::query();

    $query->where('deleted','=','0');

    return $query;
} 
```

如果您使用的是 laravel 4，只需更改 newQuery 的方法**查询**

```
public function newQuery()
{

    $query = parent::newQuery();

    $query->where('deleted','=','0');

    return $query;
} 
```

[参考](http://usman.it/filter-eloquent-results-overriding-laravel/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:52:25.693

在关系中，您可以在退货中添加 where_clause：

```
 public function pages()
{
    return $this->has_many('Page')->where_deleted(0);
} 
```

在您的模型中，您可以添加如下内容：

```
public static function active()
{
    return self::where_delete(0)->get();
} 
```

使用`Page::active()`而不是`Page::all()` （或者您可以`->get()`从模型中的函数中删除，因此您仍然可以进一步修改您的查询（`Page::active()->order_by('name')`）

# javascript - 如何检查 window.history.back 在 javascript 中是否有价值

> ID：14271814
> 
> 赞同：1
> 
> 时间：2013-01-11T04:43:34.303
> 
> 标签：javascript, window, back, browser-history

我正在创建一个带有后退按钮的页面。如果为第一个后退按钮启动的页面应该隐藏。如果用户通过页面后退按钮导航应该显示。

我用了代码

`(window.history.length > 1)?$("#back").show():$("#back").hide();`

但我的问题是， `window.history.length` 不断增加。

但我的要求是当没有页面可以返回时，返回按钮应该再次隐藏。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:19:37.657

你有更多的问题。如果用户来自谷歌怎么办？已经有窗口历史记录了。如果用户访问了您的网站，然后访问了 google，然后又回来了怎么办？

如果它只是@Marc B 描述的导航系统，那很容易，您知道用户来自哪里以及如何返回（不要直接使用历史记录）。但是，如果它是一个后退按钮，无论用户点击哪个链接进入您的网站......它都会变得更加复杂。由于隐私限制，您无法访问用户的实际 URL 历史记录（只是长度），并且如果您使用捕获 window.unload 事件，您将无法访问他们正在导航到的任何 url。所以你的选择有限。

一种选择是将每次页面加载时的窗口位置记录到您保存在本地存储或 cookie 中的数组中。然后你应该使用这个数组来管理你的历史状态而不是依赖于 window.history。当用户单击您的后退按钮时，您只需弹出他们访问过的网站上的最后一个 url 并在那里导航。请记住，第一个页面加载会将一个项目放入您的历史记录数组中，因此根据您检查是否应该显示或隐藏历史记录按钮的位置，您将历史记录数组的长度与 0 或 1 进行比较。

# jquery - 在 JQ Grid 中显示工具提示

> ID：14271819
> 
> 赞同：0
> 
> 时间：2013-01-11T04:43:47.707
> 
> 标签：jquery, jqgrid, tooltip

我正在使用 jqgrid 显示我需要在所有单元格中“单击此处编辑”和“单击此处删除”以删除按钮单元格的数据

在 jqgrid 中显示这种工具提示的最佳方式是什么？

是否可以添加

```
colNames: ['ROLEID', "Name", "", ""], 
colModel: [
    { name: 'ROLEID', index: 'ROLEID', width: 10, hidden: true, key: true }, 
    { name: 'ROLENAME', index: 'ROLENAME', width: 50, editable: true,
        search: false}, 
    { name: '', index: '', search: false, width: 30, align: "center",
        formatter: function (cellvalue, options, rowObject) {
            var btnDelete =
                '<div class="round-icon-btn close right delete_step" id=btnId_' +
                 options.rowId + ' ></div>';
            return btnDelete;
        }}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:51:17.970

您可以使用`cellattr`属性在列中设置自定义工具提示：

```
{ name: 'mydelete', search: false, width: 30, align: "center",
    cellattr: function () { return ' title="Click here to delete"'; },
    formatter: function (cellvalue, options, rowObject) {
        var btnDelete =
            '<div class="round-icon-btn close right delete_step" id=btnId_' +
             options.rowId + ' ></div>';
        return btnDelete;
    }} 
```

此外，我认为`id`自定义按钮上的属性设置并不是真正需要的。要处理单击自定义按钮，您可以使用`onCellSelect`或`beforeSelectRow`回调。看[答案](https://stackoverflow.com/a/13765086/315935)，[这个](https://stackoverflow.com/a/9946955/315935)，[这个旧的](https://stackoverflow.com/a/5305904/315935)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:54:51.423

请看看这个讨论

[http://www.trirand.com/blog/?page_id=393/help/tooltip-on-row-hover-with-ajax-content-solution/](http://www.trirand.com/blog/?page_id=393/help/tooltip-on-row-hover-with-ajax-content-solution/)

# javascript - 如何将静态元素附加到 JS 轮播？

> ID：14271822
> 
> 赞同：1
> 
> 时间：2013-01-11T04:43:53.043
> 
> 标签：javascript, css, wordpress, overflow, nextgen-gallery

我有一个仅限 javascript 的图片库（NextGEN wordpress 插件）

它是用一个 JS 文件动态构建的。当您单击轮播时，它会显示内容。

JS文件的大致轮廓是：

```
function buildPanels() {
        // If panel overlay content exists, add the necessary overlay background DIV
        // The overlay content and background are separate elements so the background's opacity isn't inherited by the content
        j_panels.each(function(i){
            if($('.panel-overlay',this).length>0) {
                $(this).append('<div class="overlay-background"></div>');   
            }
        }); 
```

它一次构建整个轮播，然后仅显示当前图像/描述。然后它根据条件/尺寸等分配一些 CSS。

我想将上面代码创建的 DIV 转换为静态 DIV，它只显示一次并保留在那里，而循环中的其余元素按照轮播进行循环。但我想仍然是 .panel-overlay 的孩子（这不是静态元素）

# html - 将 Twitter Bootstrap 按钮居中

> ID：14271825
> 
> 赞同：38
> 
> 时间：2013-01-11T04:44:10.903
> 
> 标签：html, css, button, twitter-bootstrap

我正在使用 Twitter Bootstrap 制作表单，并且很难将按钮居中。它包含在一个跨度为 7 的 div 中。下面是 HTML，按钮位于最底部。关于如何使这件事居中的任何建议？

```
<div class="form span7">
  <div id="get-started">
    <div id="form-intro">
      <strong><h1>1\. Get Started: Some basics</h1></strong>
    </div>
    <form class="form-horizontal">
      <div class="control-group">
        <label class="control-label" for="inputSaving">What are you saving for?</label>
        <div class="controls">
          <input class="span4" type="text" id="inputSaving" placeholder="e.g. Swimming Lessons, Birthday Party, College Fund, etc.">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="description">Add a short description</label>
        <div class="controls">
          <textarea class="span4" id="description" rows="4" placeholder="Describe in your own words the saving goal for this piggybank"></textarea>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="categoryselect">Choose a Category</label>
        <div class="controls">
          <select class="span4" id="categoryselect">
            <!-- Add some CSS and JS to make a placeholder value-->
            <option value="Kittens">Kittens</option>
            <option value="Keyboard Cat">Keyboard Cat</option>
            <option value="Twitter Bird">Twitter Bird</option>
          </select>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="imageselect">Choose an image</label>
        <div class="controls span4">
          <img src="piggyimage.png" id="imageselect" alt="image-select" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="goal">Your Saving Goal</label>
        <div class="controls">
          <input type="text" class="span4" id="goal" placeholder="$1337">
        </div>
      </div>
      <button class="btn btn-large btn-primary" type="button">Submit</button>
    </form>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-07-19T12:15:17.370

Bootstrap 有自己的居中类，名为**text-center**。

`<div class="span7 text-center"></div>`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-11T05:12:07.000

如果您不介意更多标记，这将起作用：

```
<div class="centered">
    <button class="btn btn-large btn-primary" type="button">Submit</button>
</div> 
```

使用相应的 CSS 规则：

```
.centered
{
    text-align:center;
} 
```

我必须查看`btn`该类的 CSS 规则，但我认为它没有指定宽度，因此`auto`左右边距不起作用。但是，如果您向按钮添加了`span`or`input-`规则之一，则自动边距**将**起作用。

**编辑：**

证实了我最初的想法；这些`btn`类**没有**定义宽度，因此您不能使用自动边距。此外，正如[@AndrewM 所](https://stackoverflow.com/users/1170128/andrewm)指出的，您可以简单地使用`text-center`该类而不是创建新的规则集。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-01-13T13:28:52.213

包裹在一个带有“文本中心”类样式的 div 中。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-01-21T01:18:48.353

问题有点老了，但简单的方法是将 .center-block 应用于按钮。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-25T16:25:24.277

由于您想使按钮而不是文本居中，因此我过去所做的是添加一个类，然后使用该类使按钮居中：

```
<button class="btn btn-large btn-primary newclass" type="button">Submit</button> 
```

和 CSS 将是：

```
.btn.newclass {width:25%; display:block; margin: 0 auto;} 
```

“宽度”值取决于您，您可以使用它来获得正确的外观。

史蒂夫

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-11T05:03:41.300

```
.span7.btn { display: block;   margin-left: auto;   margin-right: auto; } 
```

我对引导程序并不完全熟悉，但类似上面的东西应该可以解决问题。可能不需要包括所有类。这应该使按钮在其父项 span7 中居中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-15T04:06:33.320

如果您有多个按钮，则可以执行以下操作。

```
<div class="center-block" style="max-width:400px">
  <a href="#" class="btn btn-success">Accept</a>
  <a href="#" class="btn btn-danger"> Reject</a>
</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-23T18:37:07.163

Bootstrap 有一个特定的类：center-block

```
<button type="button" class="your_class center-block"> Book </button> 
```

# eclipse - 无法启动 Tomcat 7 服务器 - java.net.BindException：地址已在使用中

> ID：14271828
> 
> 赞同：15
> 
> 时间：2013-01-11T04:44:15.757
> 
> 标签：eclipse, tomcat7

嗨，我无法从 Eclipse 启动 tomcat 7 服务器。

当我从 Eclipse 开始时，我得到以下错误日志。

```
Jan 11, 2013 10:10:27 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Users\Jayant\Desktop\data\adt-bundle-windows-x86\eclipse;;.
Jan 11, 2013 10:10:28 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Jan 11, 2013 10:10:28 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jan 11, 2013 10:10:28 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1165 ms
Jan 11, 2013 10:10:28 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jan 11, 2013 10:10:28 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
Jan 11, 2013 10:10:28 AM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Jan 11, 2013 10:10:28 AM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Jan 11, 2013 10:10:28 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 507 ms
Jan 11, 2013 10:10:28 AM org.apache.catalina.core.StandardServer await
SEVERE: StandardServer.await: create[localhost:8005]: 
java.net.BindException: Address already in use: JVM_Bind
    at java.net.DualStackPlainSocketImpl.bind0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketBind(Unknown Source)
    at java.net.AbstractPlainSocketImpl.bind(Unknown Source)
    at java.net.PlainSocketImpl.bind(Unknown Source)
    at java.net.ServerSocket.bind(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:422)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:707)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:653)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)

Jan 11, 2013 10:10:28 AM org.apache.coyote.AbstractProtocolHandler pause
INFO: Pausing ProtocolHandler ["http-bio-8080"]
Jan 11, 2013 10:10:29 AM org.apache.coyote.AbstractProtocolHandler pause
INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
Jan 11, 2013 10:10:30 AM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Jan 11, 2013 10:10:30 AM org.apache.coyote.AbstractProtocolHandler stop
INFO: Stopping ProtocolHandler ["http-bio-8080"]
Jan 11, 2013 10:10:30 AM org.apache.coyote.AbstractProtocolHandler stop
INFO: Stopping ProtocolHandler ["ajp-bio-8009"] 
```

现在我收到以下错误。

```
Jan 11, 2013 10:18:59 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Users\Jayant\Desktop\data\adt-bundle-windows-x86\eclipse;;.
Jan 11, 2013 10:19:00 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Jan 11, 2013 10:19:00 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jan 11, 2013 10:19:00 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 872 ms
Jan 11, 2013 10:19:00 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jan 11, 2013 10:19:00 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
Jan 11, 2013 10:19:00 AM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Jan 11, 2013 10:19:00 AM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Jan 11, 2013 10:19:00 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 535 ms
Jan 11, 2013 10:20:13 AM org.apache.catalina.core.StandardServer await
WARNING: StandardServer.await: Invalid command 'GET / HTTP/1.1' received
Jan 11, 2013 10:20:19 AM org.apache.catalina.core.StandardServer await
WARNING: StandardServer.await: Invalid command '' received 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2019-07-09T18:39:15.490

转到 server.xml 文件并更改

```
<Server port="8005" shutdown="SHUTDOWN"> 
```

到

```
<Server port="8006" shutdown="SHUTDOWN"> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-11T04:46:23.587

admin 端口用于接收管理命令，HTTP 端口用于接收 HTTP 请求。您必须使用不同的端口。发生的事情是：HTTP 连接器无法启动，因为服务器已经打开了该端口。您的浏览器/客户端/无论向管理端口发送请求，服务器不理解 HTTP 并记录此错误。

尝试将 Tomcat 重新安装到另一个端口。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-14T13:37:29.027

我遇到了这个问题（端口 8005 已经被使用），根本原因是由于我的机器上已经运行了一个现有的 tomcat 进程。所以，我需要做的基本上就是杀死现有进程并重新启动tomcat。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-15T23:29:24.663

采用：

```
pkill -f tomcat 
```

摆脱任何现有的或无响应的 tomcat 实例或进程。

```
start tomcat. 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-02T11:16:30.013

在 Windows 10 中，端口 8005 已被保留（用于某事）。更改为例如 8089（或任何自由端口）`tomcat/conf/server.xml`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-06T21:02:08.097

常见的错误是在`server.xml`配置文件中使用相同的 Shutdown 和 Connector 端口。

这些端口应该不同，这是正确的示例：

```
<Server port="8005" shutdown="SHUTDOWN">
    <Connector port="8983" protocol="HTTP/1.1" 
```

默认情况下，Tomcat 在端口 8005 上侦听 SHUTDOWN 命令，并且它应该始终与连接器端口不同。

如果您的端口仍在使用中，请尝试`sudo lsof -i:8005`查找原因。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-21T16:30:59.930

如果您使用的是 linux 系统，则在终端上键入 ps -ef|grep tomcat。然后找到进程id（PID）。然后在终端上输入 kill -9 。现在，启动 tomcat 服务器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-02T17:09:39.107

解决此问题的2种方法：

1> 进入tomcat服务器安装目录，打开server.xml文件，检查是否

连接器和服务器端口不同。如果不让它们成为不同的端口，然后检查这些端口上是否没有运行任何东西

2> 从开始打开命令提示符并键入 netstat -ano | findstr 8010 检查端口是否正在使用。如果它们被使用，那么你会得到 TCP 0.0.0.0:8005 0.0.0.0:0 LISTENING 4 TCP [::]:8005 [::]:0 LISTENING 4

然后a>使用任务管理器中的进程ID（在我的情况下为4）终止进程

如果它们没有被使用，那么你在 cmd 中什么也看不到

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-11T09:48:31.083

您可以做的不是杀死进程，您可以转到tomcat目录/conf/server.xml，在这里您可以将关闭端口（8005）更改为其他端口。还将默认端口（8080）和其他更改为不同的端口。因此，您可以在单台机器上运行多个 Tomcat 实例。重新启动您的服务器（如果问题仍然存在）在 Eclipse 中重新创建它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-24T17:28:38.110

如果您有多个应用程序，请检查是否有任何其他应用程序使用 server.xml 文件中定义的相同服务器端口。我就是这种情况。

# ivy - 无法在 Ivy 中下载 json-lib

> ID：14271832
> 
> 赞同：1
> 
> 时间：2013-01-11T04:44:31.797
> 
> 标签：ivy

我想下载 json-lib-2.3-jdk15.jar。我发现 ivy 没有分类器标签，所以我使用 maven 一个，下面是 ivy.xml

```
<ivy-module version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd"
       xmlns:m="http://ant.apache.org/ivy/maven">
    <info organisation="xxxx" module="xxx" status="integration"/>
    <dependencies>
        <dependency org="net.sf.json-lib" name="json-lib" rev="2.3"> 
            <artifact name="json-lib" type="jar" m:classifier="jdk15"/>
        </dependency>
    </dependencies>
</ivy-module> 
```

和 ivysetting.xml

```
<ivysettings>
    <settings defaultResolver="default" />
    <include url="${ivy.default.settings.dir}/ivysettings-public.xml" />
    <include url="${ivy.default.settings.dir}/ivysettings-shared.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-local.xml" />
    <include url="${ivy.default.settings.dir}/ivysettings-main-chain.xml"/>

    <caches artifactPattern="[organisation]/[module]/([branch]/)[type]s/([platform]/)[artifact]-[revision](.[ext])" />
    <resolvers>
        <filesystem name="local">
            <ivy
                pattern="${ivy.local.default.root}/[organisation]/[module]/([branch]/)[revision]/ivy.xml" />
            <artifact
                pattern="${ivy.local.default.root}/[organisation]/[module]/([branch]/)[revision]/[type]s/([platform]/)[artifact](.[ext])" />
        </filesystem>
        <ibiblio name="public" m2compatible="true" usepoms="true" pattern="[organisation]/[module]/[revision]/[artifact]-[revision](-[classifier]).[ext]" /> 
        <chain name="default" returnFirst="true">
                    <resolver ref="local" />
            <resolver ref="public"/>
        </chain>
    </resolvers>
</ivysettings> 
```

但是我还是不能下载。似乎 m:classifier 不起作用。对此有何建议？谢谢。

**我终于找到了根本原因**。我不应该使用

```
xmlns:m="http://ant.apache.org/ivy/maven 
```

我应该使用

```
xmlns:m="http://ant.apache.org/ivy/extra 
```

另一件事，就我而言，我在“工件”标签中添加了“conf”分发，这将使 jar 下载失败。所以不要在“工件”中添加“conf”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:42:10.243

为我工作......你使用的是什么版本的常春藤？

以下示例包含一些建议的增强功能

# 例子

```
Apache Ant(TM) version 1.8.2
Apache Ivy 2.3.0-rc2 
```

## 常春藤.xml

```
<ivy-module version="2.0" xmlns:m="http://ant.apache.org/ivy/maven">
    <info organisation="xxxx" module="xxx"/>
    <configurations>
        <conf name="jdk15"   description="JDK 1.5 dependencies"/>
    </configurations>
    <dependencies>
        <dependency org="net.sf.json-lib" name="json-lib" rev="2.3" conf="jdk15->master"> 
            <artifact name="json-lib" type="jar" m:classifier="jdk15"/>
        </dependency>
    </dependencies>
</ivy-module> 
```

笔记：

*   使用配置总是一个好主意。在这种情况下，我创建了一个名为“jdk15”的文件以使用 jdk15 分类器对文件进行分组
*   远程“master”配置是特殊的，不包含传递依赖（参见下面的链接进行解释）
*   [Maven 范围如何通过 ivy 映射到 ivy 配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy/7116577#7116577)

## 常春藤设置.xml

```
<ivysettings>
    <settings defaultResolver="central" />
    <resolvers>
        <ibiblio name="central" m2compatible="true"/> 
    </resolvers>
</ivysettings> 
```

笔记：

*   这是一个最小的常春藤设置文件。（事实上​​你可以省略该文件，它的功能是相同的）。
*   您是否使用“本地”解析器？根据我的经验，这是不必要的（除非您在构建期间发布工件）

# android - oauth2.0 用于用户个人资料信息

> ID：14271834
> 
> 赞同：0
> 
> 时间：2013-01-11T04:44:42.433
> 
> 标签：android, oauth-2.0, google-oauth

我如何使用 oauth2.0 在 Android 应用程序上获取用户的谷歌个人资料信息。我需要适用于 android 应用程序的正确代码/示例。我需要用户信息，例如：

1.  头像照片
2.  生日
3.  性别
4.  地点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:11:02.713

Google OAuth 将需要以下步骤：

[1.在这里](https://code.google.com/apis/console/?pli=1#access)注册谷歌。注册后，在`INSTALLED APPLICATION`部分您将获得您的`REDIRECT_URI`和`CLIENT_ID`

2.上面得到的`REDIRECT_URI`和`CLIENT_ID`现在将在下面的url中使用。

```
https://accounts.google.com/o/oauth2/auth?" + "scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile"+ "&redirect_uri=" + REDIRECT_URI + "&response_type=code" +"&client_id=" + CLIENT_ID; 
```

3.此网址将带您进入谷歌身份验证页面，在这里谷歌接管并输入您的帐户详细信息。此外，它被重定向到批准页面，用户允许您的应用使用他们的谷歌数据。

4.现在，作为对此的回应，您可以`ACCESS CODE`从谷歌获得 JSON 或 html 页面的标题。解析`ACCESS CODE`.

5.`ACCESS CODE`现在，您将`POST`使用以下帖子数据发出请求以获取`ACCESS TOKEN`.

```
'code' // this is the access code
'client_id' // same as earlier
'client_secret' // you will find this on the google page where you registered
'redirect_uri' // same as earlier
'grant_type' = "authorization_code" // as is 
```

6.您现在将获得 JSON 中的 ACCESS TOKEN 作为“access_token”。解析此访问令牌。

7.使用访问令牌调用以下url

```
https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=your_access_token_here 
```

8.您将以 JSON 格式获取用户数据作为对该调用的响应。

以下是您可能需要的其他文档： [https ://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

# c# - Linq 查询合并单元格结果？

> ID：14271835
> 
> 赞同：0
> 
> 时间：2013-01-11T04:44:47.840
> 
> 标签：c#, asp.net, .net, vb.net, linq

我有一个包含此示例数据的数据表。

![在此处输入图像描述](../Images/bb60635d23d58d5f2748b6a0ef626f58.png)

要求是制作此数据表，以便它返回所有行，但对于重复行（例如最后两个），要求是将不同的值与逗号组合并通过使其成为一条记录返回。

例如：

金-银，冶金学家 19 尼克·戈登。. . . .

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:06:14.747

由于专业字段是唯一变化的字段，并且您希望该字段的组合值，因此需要以下
1.`Grouping`基于`Profession`
2.`Select`记录
3.[`Aggregate`](http://msdn.microsoft.com/en-us/library/bb548651.aspx)用于组合专业

您还需要定义一个具体类型来表示`Row`（`ProfessionRecord`在下面的代码中）

```
 var results = dataTable.AsEnumerable()
                   .GroupBy(x=> x.Field<string>("Profession"))
                   .Select (  grouping => 
                               new {
                                  Key=grouping.Key,
                                  CombinedProfession = grouping.Aggregate( (a,b)=> a + " " + b)
                                })
                    .Select (x=> new ProfessionRecord
                            {
                              Id = x.Key.Id,
                              Name = x.Key.Name,
                              Profesion = x.CombinedProfession,
                            }); 
```

VB.NET 从[工具](http://converter.telerik.com/)

```
 Dim results = dataTable.AsEnumerable().GroupBy(Function(x) x.Field(Of String)("Profession")).[Select](Function(grouping) New With { _
    .Key = grouping.Key, _
    .CombinedProfession = grouping.Aggregate(Function(a, b) a + " " + b) _
}).[Select](Function(x) New ProfessionRecord() With { _
    .Id = x.Key.Id, _
    .Name = x.Key.Name, _
    .Profesion = x.CombinedProfession _
}) 
```

（我不确定它优化了多少，因为 VB.NET 不是我的第一语言）

您需要 为该方法添加[数据行扩展的引用](http://msdn.microsoft.com/en-us/library/system.data.datarowextensions.aspx)`Field<T>(string fieldname)`

# android - Android词典应用程序设计

> ID：14271837
> 
> 赞同：1
> 
> 时间：2013-01-11T04:45:09.700
> 
> 标签：android, listview

我正在尝试创建一个类似 Android 字典的应用程序并在检索数据时获得缓慢的性能。目前，每个字典条目都存储在一个文本文件中（在Android资产中），每个文件都以数字命名，这样我就可以使用索引来定位、打开和读取文件的内容（只需读出一行字符串）。当`ListView`用于渲染输出数据并在`getView()`方法内读取文件内容时，检索 10 个条目大约需要 3 秒。我只是想知道是否有其他方法（使用`SQLLite`，???）可以更快地检索和呈现这些条目。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:00:14.243

`SQLite`肯定会让你的工作更轻松，让应用程序运行得更快。读取数据也容易得多；当您将数据写入数据库时​​，请确保使用事务来加速多个顺序写入。除了初始数据，我什至可能不会考虑使用文本文件。网上有很多可用的资源，例如[本教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:19:51.927

我建议你使用`SQLite`

## 好处

1.  您可以查询
2.  您可以轻松更新定义
3.  使用数据库时您的数据更安全（如果您可以`Encrypt` 使用`AES`或类似的算法，那么它将变得更安全！）
4.  获取结果更快
5.  您可以轻松地将结果填充到`ListView`

[你可以在这里](http://www.vogella.com/articles/AndroidSQLite/article.html)看到完整的文章

# javascript - 分解jQuery代码

> ID：14271841
> 
> 赞同：0
> 
> 时间：2013-01-11T04:45:24.073
> 
> 标签：javascript, jquery, client-side

> **可能重复：**
> [jQuery 如何保护覆盖 jQuery 和 $](https://stackoverflow.com/questions/4465940/how-does-jquery-protect-overwriting-jquery-and)

我正在查看 jQuery 源代码，并且有几行代码我没有得到。

```
// Map over jQuery in case of overwrite
_jQuery = window.jQuery,

// Map over the $ in case of overwrite
_$ = window.$, 
```

我的问题是上面的代码在做什么？它是如何工作的？我想它负责 jQuery 和 $ 对象，但我无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:56:28.420

如果你查看[noConflict](http://api.jquery.com/jQuery.noConflict/)函数的源代码，你会看到这个

```
if ( window.$ === jQuery ) {
    window.$ = _$;
}
if ( deep && window.jQuery === jQuery ) {
    window.jQuery = _jQuery;
} 
```

当 Jquery 加载时，它会覆盖全局`$`和`jQuery`. `noConflict`将这些全局变量从备份中恢复为以前的值。这些备份是使用您提到的代码创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:51:11.760

这在 jQuery 函数的上下文中用于：

1) 防止客户端代码覆盖`jQuery`和函数的`$`功能。

`jQuery`2) 给和起别名`$`以[提高速度](http://jsfiddle.net/7EAQb/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:51:50.993

许多使用 javascript 的库使用 $. 它正在重置 $ 以便其他库（如 Prototype）可以使用 $ 而不会导致冲突错误。如果不这样做，代码将无法工作并可能导致错误。

# ruby - Ruby 中 File 和 ::File 的区别？

> ID：14271860
> 
> 赞同：3
> 
> 时间：2013-01-11T04:46:47.657
> 
> 标签：ruby

我遇到了两种调用文件类的方法：`File`和`::File`

有人可以向我解释两者之间的区别，以及使用两者的不同原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:56:14.630

`File`指`File`当前范围内的常量，而`::File`始终指`Object::File`.

```
p File
# File

p ::File
# File

module Another
  module File
  end

  p File
  # Another::File

  p ::File
  # File
end 
```

Thus, the `::` is analogous to the root of a file system and the module you are in is analogous to the current directory.

For object-oriented access to the current lexical scope, see [Module.nesting](http://www.ruby-doc.org/core-1.9.3/Module.html#method-c-nesting).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T04:56:03.933

当您引用具有短名称 ( `File`) 的类时，ruby 将使用最近范围内的类。看：

```
module MyModule
  class File
    def initialize *args; end
  end

  class Foo
    def initialize
      @file = File.new
    end
    attr_accessor :file
  end
end

f = MyModule::Foo.new
f.file.class # => MyModule::File

file2 = File.new 'newfile', 'w'
file2.class # => File 
```

因此，与顶层代码`Foo`不同。`File`但是，如果`Foo`要使用此代码：

```
@file = ::File.new 
```

然后它将使用“全局”`File`类，而不是本地到`MyModule`. 以类似的方式，我们可以`MyModule::File`在顶层使用

```
file2 = MyModule::File.new 'newfile', 'w' 
```

# java - 函数定义前@Produces、@GET、@Path 和@QueryParam 的意义

> ID：14271862
> 
> 赞同：6
> 
> 时间：2013-01-11T04:47:34.390
> 
> 标签：java, eclipse

我是java新手。我在看下面的代码。

```
@Produces("text/xml")
@GET
@Path("/xml/search")
public Object searchXML(@QueryParam("query") String query,
        @QueryParam("granularity") String granularity) {
    return search(query, granularity);
} 
```

在上面代码中的函数定义之前，我无法理解@Produces、@GET、@Path 和@QueryParam 的用途。任何人都可以对此有所了解。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T04:53:25.203

这些注释由[JAX-RS](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services)定义，这是 RESTful Web 服务的标准。

在上面的示例中，这意味着该方法将处理：

*   获取请求

*   在路径“/xml/search”上

*   并将查询参数“query”映射到字符串查询参数，

*   以及“粒度”到粒度

*   生成的内容类型将为“text/xml”

（它可能会为此调用一个自定义编组器）

（请参阅[此页面](https://wikis.oracle.com/display/Jersey/Overview+of+JAX-RS+1.0+Features)以获取参考）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:58:03.957

生产者方法是一种生成可以注入的对象的方法。[Link](http://docs.oracle.com/javaee/6/tutorial/doc/gkgkv.html) 当你想注入一个本身不是 bean 的对象时 当要注入的对象的具体类型可能在运行时发生变化时 当对象需要一些自定义初始化而 bean 构造函数不执行时

@GET：将由 URI 标识的资源的表示传输给客户端。格式可能是 HTML、纯文本、JPEG 等。请参阅如何传输资源的表示 (@GET)。[关联](http://www.google.co.in/url?sa=t&rct=j&q=use%20of%20@get&source=web&cd=5&cad=rja&ved=0CE0QFjAE&url=http://docs.oracle.com/cd/E24329_01/web.1211/e24983/develop.htm&ei=TprvUJuEHoGHrAe86oD4CA&usg=AFQjCNGw3PH1USrab_Glkss18qk7sQqtIg&bvm=bv.1357700187,d.bmk)

@Path(param) ：@PathParam 是一个参数注释，它允许您将变量 URI 路径片段映射到您的方法调用中。[关联](http://www.google.co.in/url?sa=t&rct=j&q=use%20of%20@path&source=web&cd=6&ved=0CFEQFjAF&url=http://docs.jboss.org/resteasy/docs/1.0.0.GA/userguide/html/_PathParam.html&ei=NpvvUL6pEo3JrAfCmoEI&usg=AFQjCNHyOfRFHclLffHm5ZexX-4qGKScnA&bvm=bv.1357700187,d.bmk&cad=rja)

可以使用@QueryParam 注解将 URI 查询参数注入 Java 方法[Link](http://www.google.co.in/url?sa=t&rct=j&q=use%20of%20@queryparam&source=web&cd=1&ved=0CC4QFjAA&url=http://www.mkyong.com/webservices/jax-rs/jax-rs-queryparam-example/&ei=jJvvUKSrMIjRrQe6qoHQDw&usg=AFQjCNEfssODesa4KGpGhrmAVWXolfU30w&bvm=bv.1357700187,d.bmk&cad=rja)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:03:54.890

@Produces 注释是指定资源可以生成并发送回客户端的 MIME 媒体类型。这里的 mediatype 是文本，而不是可以接收 xml，

@GET 是一种 HTTP 方法，例如 @PUT、@POST、@DELETE

@Path 注释的值是一个相对 URI 路径。在这种情况下，函数调用将来自服务是通过路径`/xml/search/`与参数的函数。

@QueryParam 是从请求 URL 的 Query 组件中提取查询参数，在此接收参数作为来自 URL 的字符串。

[文档参考](http://jersey.java.net/nonav/documentation/snapshot/jaxrs-resources.html#d4e111) [更多信息](http://docs.oracle.com/cd/E19776-01/820-4867/ggnxo/index.html)

# c# - Win8 Frame.Navigate 到另一个文件夹

> ID：14271863
> 
> 赞同：1
> 
> 时间：2013-01-11T04:47:37.943
> 
> 标签：c#, xaml, windows-8

我有代码使用以下方法在 Windows 8 桌面应用程序中从一个页面到另一个页面传递用户`Frame.Navigate`：

```
this.Frame.Navigate(typeof(BasicPage1)); 
```

但是，如果我尝试导航到子文件夹中的页面（或者在我的情况下，向下两个级别：/categories/category-name/BasicPage1），它找不到页面并炸毁。

我已经尝试过：

```
this.Frame.Navigate(new Uri("BasicPage1", UriKind.Relative)); 
```

但我得到一个无效的参数错误

> 无法从“System.Uri”转换为“System.Type”

我对 Windows 8 应用程序完全陌生，但我看到 Navigate Uri 在 Win8 中已停止使用？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:22:13.263

与 Windows Phone Frame.Navigate 不同，它不采用 URI。相反，它采用您要导航到的页面的类型。如果不同文件夹中的类名称相同，则完全限定的命名空间可以解决问题。

# javascript - JavaScript 如何处理模数？

> ID：14271865
> 
> 赞同：1
> 
> 时间：2013-01-11T04:47:43.070
> 
> 标签：javascript, modulo

我想知道 JavaScript 如何处理模数。例如，JavaScript 的评估结果`47 % 8`是什么？我似乎找不到任何关于它的文档，而且我在模数方面的技能也不是最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:49:29.487

就像每种语言都处理模数一样：`X / Y`.

```
47 % 8 == 7 
```

此外，如果您使用 Firefox + Firebug、Safari、Chrome 甚至 IE8+ 等浏览器，您可以像按 F12 一样快速测试这样的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-12T17:35:41.873

当给定一个负数作为输入（在左侧）时，Javascript 的模运算符返回一个负数。

```
14 % 5 // 4
15 % 5 // 0
-15 % 5 // -0
-14 % 5 // -4 
```

（注意：负零在 JavaScript 和其他具有 IEEE 浮点数的语言中是一个不同的值，但`-0 === 0`您通常不必担心它。）

如果您想要一个始终介于 0 和您指定的正数之间的数字，您可以定义如下函数：

```
function mod(n, m) {
    return ((n % m) + m) % m;
} 
```

```
mod(14, 5) // 4
mod(15, 5) // 4
mod(-15, 5) // 0
mod(-14, 5) // 1 
```

[![余数和模数的比较](../Images/57347a7b2011dad4d2faba7eaa8dc175.png)](https://i.stack.imgur.com/mJUP0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:54:53.010

Modulo 的行为应该像您期望的那样。我预计。

```
47 % 8 == 7 
```

[小提琴链接](http://jsfiddle.net/hektk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-16T00:19:02.563

为了更好地理解模数，它是如何构建的；

```
function modulo(num1, num2) {
    if (typeof num1 != "number" || typeof num2 != "number"){
      return NaN
    }
    var num1isneg=false
     if (num1.toString().includes("-")){
      num1isneg=true
    }
      num1=parseFloat(num1.toString().replace("-",""))
      var leftover =parseFloat( ( parseFloat(num1/num2) - parseInt(num1/num2)) *num2)
      console.log(leftover)
            if (num1isneg){
              var z = leftover.toString().split("")
              z= ["-", ...z]
              leftover = parseFloat(z.join(""))
            }
            return leftover
} 
```

# jquery - 刷新 DOM Jquery

> ID：14271870
> 
> 赞同：0
> 
> 时间：2013-01-11T04:48:35.417
> 
> 标签：jquery, dom, refresh

我的文档上有两个输入按钮，它们包含在主 div“容器”中。

我为他们使用的代码是：

```
<input id="anotherservices" type="button" value="Add Another Service">
<input id="addmultiterms" type="button" value="Go"> 
```

现在，当我单击第一个按钮，即值为“添加另一个服务”的按钮时，我需要上述两个按钮都淡出，然后执行 ajax 请求。然后两个按钮再次附加到主“容器”div。

这是递归的，这意味着当我再次单击新附加的第一个按钮时，两个新附加的按钮都应该再次淡出，并且必须将另一组附加到文档中。

用于完成此操作的代码如下：

```
$('#anotherservices').live("click",function(e)
{ 
$(this).fadeOut();
$('#addmultiterms').fadeOut();

/* ajax request goes here */ 

$('#container').append('<input id="anotherservices" type="button" value="Add Another Service">');

$('#container').append('<input id="addmultiterms" type="button"  value="Go">'); 
```

但是第二个按钮，值“Go”并没有淡出，因为它没有在运行时被添加到 dom 中。

我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:05:59.817

`fadeOut()`不会像*nnnnnn*在评论中所说的那样删除元素。您可以使用`fadeIn()`方法再次显示按钮。并且可以使用更改按钮的值

```
$("#addmultiterms").attr('value', 'Go'); 
```

第二个选项是删除按钮，在添加新按钮之前可以使用下面的代码来删除按钮。

```
$("#addmultiterms").remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:13:32.917

如果要动态添加元素，则必须使用

```
$(document).ready(function (){
     -- Your Function goes here
}) 
```

为什么因为第一次添加淡出和其他东西时，必须先创建它，然后您可以遵循其他逻辑，例如删除或类似的东西..顺便说一句，您显然必须使用“删除”... .

希望这可以帮助......

# jquery - j在 Rails 3 中可编辑

> ID：14271877
> 
> 赞同：2
> 
> 时间：2013-01-11T04:49:51.633
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jeditable

我正在尝试将 jeditable 与我的 rails 3 应用程序一起使用。我想内联编辑一些字段。

我的观点

```
<script>
    jQuery(document).ready(function($) {

$(".edit_textfield").each( function() {    
      $(this).editable('update', {
            type        :'textarea',
            cancel      :'Cancel',
            submit      :'OK',
            indicator   :'Saving...',
            tooltip     :'Click to edit...',
            rows        :10,
            method      :"PUT",
            submitdata  :{id: $(this).attr('id'), name:$(this).attr('name') }
        });
});
});
</script>

<p id="notice"><%= notice %></p>

<p>
  <b><%=t :Name%>:</b>
  <dd class="edit_textfield" id="<%= @student.id %>" name="name"><%= @student.name %></dd>
</p>

<p>
  <b><%=t :Age%>:</b>
  <dd class="edit_textfield" id="<%= @student.id %>" name="age"><%= @student.age %></dd>
</p>

<p>
  <b><%=t :Address%>:</b>
  <dd class="edit_textfield" id="<%= @student.id %>" name="address"><%= @student.address %></dd>
</p>

<p>
  <b><%=t :Phone%>:</b>
  <dd class="edit_textfield" id="<%= @student.id %>" name="phone"><%= @student.phone %></dd>
</p> 
```

我的控制器：

```
def update
    @student = Student.find(params[:id])
    @student.name = params[:value]
    @student.age = params[:value]
    @student.address = params[:value]
    @student.phone = params[:value]
    @student.save
    respond_to do |format|
      if @student.update_attributes(params[:student])
        format.html { redirect_to @student, :notice => 'Student was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @student.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

错误

```
 Processing by StudentsController#update as HTML
  Parameters: {"id"=>"update", "value"=>"Sreekesh O S", "name"=>"name"}
WARNING: Can't verify CSRF token authenticity
  Student Load (1.6ms)  SELECT `students`.* FROM `students` WHERE `students`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Student with id=update):
  app/controllers/students_controller.rb:59:in `update' 
```

有谁知道如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:24:24.293

```
<script>
jQuery(document).ready(function($) {
   $(".edit_textfield").each( function() {    
      $(this).editable('<%=@studet.id%>', {
            type        :'textarea',
            cancel      :'Cancel',
            submit      :'OK',
            indicator   :'Saving...',
            tooltip     :'Click to edit...',
            rows        :10,
            method      :"PUT",
            submitdata  :{id: $(this).attr('id'), name:$(this).attr('name') }
        });
    });
});
</script> 
```

我像这样编辑了javascript，它开始工作了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:51:51.287

jeditable 的第一个参数（在您的情况下为“更新”）是它发布到的 URL。默认情况下，在 Rails 中，您希望发布到“显示”网址（即，students/19）以更新记录。从错误消息中，我还猜测您位于单个资源页面（“myapp/students”）上，因此它发布到“myapp/students/update”。

如果您已经在记录显示页面上，那么发布到当前窗口位置应该可以解决它。如果您在索引页面上，则需要编写一些 javascript 来确定您应该发布到哪条记录。

# c++ - 文件流在 Dll 中不起作用

> ID：14271880
> 
> 赞同：0
> 
> 时间：2013-01-11T04:50:11.140
> 
> 标签：c++, dll

我已经从 dll 说 xlogger 导出了一个全局文件流说 xlog，

我在 dll 进程附加宏中初始化 xlog，并在分离时关闭。

现在我在与下面相同的解决方案中的其他项目中添加了这个 dll 的引用。

```
testDll_1 -> add reference xlogger ,
testDll_2 -> add reference xlogger ,
testDll_2 -> add reference xlogger ,
exe -> add reference xlogger , 
```

我的问题是 xlog<<"message" 仅在 xlogger dll 和 exe 中有效，但是不会从 dll 内部生成日志。在这里，我正在使用带有 vs 2010 专业版的 Windows 7 企业版，

我是否在上面的 testdll 项目中加载了多个 dll 副本？或相同的副本（单副本）正在使用？或者我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:34:40.523

好的，这是我的错误，实际上我在 dll_proc_attach 中打开文件流，并且我正在 dll_proc_detach 中关闭，问题是流正在以某种方式关闭。所以现在我编写了单独的函数来打开和关闭流并且代码工作正常。谢谢大家的回复。

# prestashop - Prestashop 1.4.9：已使用此电子邮件注册了一个帐户

> ID：14271883
> 
> 赞同：0
> 
> 时间：2013-01-11T04:50:27.170
> 
> 标签：prestashop

我昨天在[http://forge.prestashop.com/browse/PSCFI-6967](http://forge.prestashop.com/browse/PSCFI-6967)报告了 prestashop 社区的一个错误。有人建议我解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:55:40.730

好吧，既然您还没有发布次要版本，我已经采用了第一个和最后一个次要版本并对它们进行了区分（准确地说是 Customer.php 类）。

这是*1.4.0.1*：

```
static public function customerExists($email, $return_id = false)
{
    if (!Validate::isEmail($email))
        die (Tools::displayError());

    $result = Db::getInstance()->getRow('
    SELECT `id_customer`
    FROM `'._DB_PREFIX_.'customer`
    WHERE `email` = \''.pSQL($email).'\'');

    if ($return_id)
        return intval($result['id_customer']);
    else
        return isset($result['id_customer']);
} 
```

这是*1.4.8.3*：

```
public static function customerExists($email, $return_id = false, $ignoreGuest = true)
{
    if (!Validate::isEmail($email))
        die (Tools::displayError());

    $result = Db::getInstance()->getRow('
    SELECT `id_customer`
    FROM `'._DB_PREFIX_.'customer`
    WHERE `email` = \''.pSQL($email).'\''
    .($ignoreGuest ? 'AND `is_guest` = 0' : ''));

    if ($return_id)
        return (int)($result['id_customer']);
    else
        return isset($result['id_customer']);
} 
```

问题是，您使用的东西介于这两者之间并且更接近于较低的那个。

如您所见，后者有另一个可选参数 $ignoreGuest，默认为 true。因此，每个验证都被绕过。

您可以执行以下两种操作之一：

*   如果您的任何组件与 1.5 不兼容，请升级到最新版本的 1.4 (http://code.google.com/p/prestashop/downloads/detail?name=prestashop_1.4.8.3.zip&can=2&q=)。如果是 - 一直到最新。
*   另一方面，如果您只需要一个快速而肮脏的修复：将 Customer 类中的函数更改为此答案中的第二个。

# javascript - 我可以在启动 Web 请求之前指示浏览器运行自定义 javascript 函数吗？

> ID：14271885
> 
> 赞同：0
> 
> 时间：2013-01-11T04:50:30.867
> 
> 标签：javascript, browser, local-storage

我想要这样的东西：第一次加载我的网页时，我将一个函数存储`fn`在浏览器的本地存储中。从那时起，每当要向我的域发出请求时`fn`，甚至在发出该请求之前都会执行（但当然是在确定要向我的域发出请求之后）

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:05:54.220

我认为您正在寻找的是所谓的应用程序缓存。应用程序缓存允许您指定缓存清单以告诉支持的浏览器您站点上的某些文件应该被缓存，并在用户第二次访问您的站点时自动加载表单缓存。浏览器将在站点加载后检查更新，因此即使您更新清单文件（这是告诉浏览器某个缓存文件已更改的唯一方法），浏览器也会在后台下载更新的文件。然后您可以选择自动重新加载页面，或者只让用户使用旧缓存，直到他们下次加载缓存页面。

[http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

这是在将单个请求发送到您的站点之前加载 html/images/js 或执行 js 的唯一方法。这也意味着如果您正确设计您的网站/应用程序，即使用户完全离线也可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:53:24.183

您不能使用 Javascript 的任何半永久方式（本地存储/cookies）来存储函数。您可以存储一个函数名称，然后您将使用它来确定要执行的函数。如果您在域的每个页面上都包含 javascript 文件，那么这是可能的。

这可以通过设置 cookie 或在本地存储中存储值来轻松完成。如果该值不存在，则为第一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:55:04.620

我希望不会，因为这些功能相当于地雷。想象一下，我知道银行合并将要发生，所以我购买了合并后公司可能拥有的一堆域，并做一些事情来吸引流量去那里，这些功能将其中一个功能存储在浏览器缓存中。然后，合并后的银行追随我抢注域名，我毫不费力地交出了域名。即使我不拥有该域，我嵌入的脚本现在也会针对银行的任何请求运行，因此只有当用户实际导航到银行网站时，它才能为我的网络钓鱼站点启动弹出窗口。

# c# - 使用命名空间作为类型错误

> ID：14271888
> 
> 赞同：2
> 
> 时间：2013-01-11T04:50:40.260
> 
> 标签：c#, namespaces, drawing

我目前正在将我的 java 游戏引擎翻译成 c#。在我开始编写包之前，一切都很好`com.gej.graphics`。在c#中，我是这样写的。

```
namespace GECS.Graphics {} 
```

但是编译器说这个错误。

```
'GECS.Graphics' is a 'namespace' but is used like a 'type' (CS0118)
   - C:\Users\sr....ECS\Core\Game.cs:33,36 
```

这是包含在该行的文本

```
public virtual void Render(Graphics g) {} 
```

实际`Graphics`课程来自`System.Drawing`.

我的要求是这个类是由用户扩展的，因此他们不应该与它发生冲突。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:53:04.373

您可以使用命名空间访问您的课程：

```
public virtual void Render(System.Drawing.Graphics g) { } 
```

由于命名空间和类的名称存在冲突`Graphics`，您可以考虑将命名空间命名为不同的名称，或者您始终可以使用[完全限定](http://msdn.microsoft.com/en-us/library/dfb3cx8s%28v=vs.110%29.aspx)的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:54:02.943

```
public virtual void Render(System.Drawing.Graphics g) {} 
```

由于您还创建了一个名为 name 的自定义命名空间，因此您需要指定命名空间`Graphics`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T04:57:59.617

避免创建可能与标准命名空间冲突的命名空间。在您的情况下，您应该`System.Drawing.Graphics`完全使用名称，以避免与`GECS.Graphics`.

另一种解决方案可能是[使用](http://msdn.microsoft.com/en-US/library/sf0df423%28v=vs.80%29.aspx)指令为命名空间或类型创建别名。

例如：

```
using DrawingGraphics = System.Drawing.Graphics; 
```

后：

```
public virtual void Render(DrawingGraphics  g) 
{
} 
```

# ios - 如何以编程方式控制和平衡 iOS 应用程序正在执行的多个线程？

> ID：14271892
> 
> 赞同：4
> 
> 时间：2013-01-11T04:50:48.847
> 
> 标签：ios, objective-c, concurrency

如何控制和平衡我的应用程序正在执行的线程数量，如何限制它们的数量以避免应用程序因为达到线程限制而阻塞？

在这里，我看到了以下可能的答案：“主并发队列（dispatch_get_global_queue）自动管理线程数”我不喜欢，原因如下：

考虑以下模式（在我的真实应用中，有更简单和更复杂的示例）：

```
dispatch_queue_t defaultBackgroundQueue() {
    return dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
}

dispatch_queue_t databaseQueue() {
    dispatch_queue_create("Database private queue", 0);
}

dispatch_async(defaultBackgroundQueue(), ^{
    [AFNetworkingAsynchronousRequestWithCompletionHandler:^(data){
        dispatch_async(databaseQueue(), ^{
            // data is about 100-200 elements to parse
            for (el in data) {

            }

            maybe more AFNetworking requests and/or processing in other queues or

            dispatch_async(dispatch_get_main_queue(), ^{
                // At last! We can do something on UI.
            });
        });
    }];
}); 
```

这种设计经常导致以下情况：

1.  由于达到线程限制，应用程序被锁定（类似于 > 64）
2.  较慢且因此较窄的队列可能会因大量待处理的作业而不堪重负。
3.  第二个也可能产生取消问题 - 如果我们有 100 个作业已经在串行队列中等待执行，我们不能一次取消它们。

显而易见且愚蠢的解决方案是用 dispatch_sync 替换敏感的 dispatch_async 方法，但它绝对是我不喜欢的方法。

对于这种情况，推荐的方法是什么？

我希望一个比“使用 NSOperationQueue - 它可以限制并发操作的数量”更聪明的答案确实存在（类似的主题：[带有 NSOperationQueueDefaultMaxConcurrentOperationCount 的线程数](https://stackoverflow.com/questions/11939773/number-of-threads-with-nsoperationqueuedefaultmaxconcurrentoperationcount?rq=1)）。

更新 1：唯一体面的模式是：是将所有 dispatch_async 的块替换为并发队列，并在基于 NSOperationQueue 的并发队列中运行包装在 NSOperations 中的这些块，并设置最大操作限制（在我的情况下，可能还设置了最大操作限制AFNetworking 在其中运行所有操作的基于 NSOperationQueue 的队列）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T08:13:21.657

您正在启动太多网络请求。AFAIK 它没有在任何地方记录，但您最多可以同时运行 6 个网络连接（考虑到[RFC 2616 8.1.4](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4)第 6 段，这是一个合理的数字）。之后你获得锁定，GCD 补偿创建更多线程，顺便说一下，每个线程[都有一个 512KB 的堆栈空间，每个](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)页面都按需分配。所以是的，为此使用 NSOperation。我用它来排队网络请求，在再次请求相同对象时增加优先级，如果用户离开，则暂停并序列化到磁盘。我还监控网络请求的速度（以字节/时间为单位）并更改并发操作的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:52:47.060

虽然我没有从您的示例中看到您正在创建“太多”后台线程的确切位置，但我将尝试回答如何控制每个队列的确切线程数的问题。苹果的[文档](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)说：

> 并发队列（也称为全局调度队列的一种）同时执行一个或多个任务，但任务仍然按照它们添加到队列的顺序启动。当前正在执行的任务在由调度队列管理的不同线程上运行。在任何给定点执行的任务的确切数量是可变的，并且取决于系统条件。

虽然您现在（从 iOS5 开始）可以手动创建并发队列，但无法控制这样一个队列将同时运行多少作业。操作系统会自动平衡负载。如果出于某种原因，您不希望这样，例如，您可以手动创建一组**n 个**串行队列并将新作业随机分派到您的**n 个队列中的一个：**

```
NSArray *queues = @[dispatch_queue_create("com.myapp.queue1", 0),dispatch_queue_create("com.myapp.queue2", 0),dispatch_queue_create("com.myapp.queue3", 0)];
NSUInteger randQueue = arc4random() % [queues count];
dispatch_async([queues objectAtIndex:randQueue], ^{
    NSLog(@"Do something");
});
randQueue = arc4random() % [queues count];
dispatch_async([queues objectAtIndex:randQueue], ^{
    NSLog(@"Do something else");
}); 
```

我绝不赞同这种设计——我认为并发队列非常擅长平衡系统资源。但是既然你问了，我认为这是一种可行的方法。

# java - JProgressBar 不会更新

> ID：14271902
> 
> 赞同：2
> 
> 时间：2013-01-11T04:51:35.513
> 
> 标签：java, swing, concurrency, event-dispatch-thread, jprogressbar

我正在尝试将 JProgressBar 添加到我的程序中，但它不会更新！该值仅在其原因为 100% 时才会更改。这是我的方法。

```
public void downloadImages(List<String> images) {
    if (errorCode == 0) {
        for (int i = 0; i < images.size(); i++) {
            if (errorCode == 0) {
                main.progressLabel.setText("Downloading image " + Integer.toString(i + 1) + " of " + Integer.toString(images.size()));
                String imageStr = images.get(i);
                String imageName = imageStr.substring(imageStr.lastIndexOf("/") + 1);
                try {
                    URL url = new URL(imageStr);
                    InputStream in = url.openStream();
                    OutputStream out = new FileOutputStream(saveDirectory + imageName);

                    byte[] b = new byte[2048];
                    int length;
                    while ((length = in.read(b)) != -1) {
                        out.write(b, 0, length);
                    }

                    in.close();
                    out.close();
                } catch (MalformedURLException e) {
                    errorCode = BAD_URL;
                } catch (IOException e) {
                    errorCode = INVALID_PATH;
                }
                main.progressBar.setValue(((i+1)/images.size())*100);
            }

        }
    }
} 
```

更改进度条值位于上述方法的底部。

这就是我如何称呼该方法。

```
public void download() {
    final Downloader downloader = new Downloader(this, albumUrl.getText(), downloadPath.getText());
    progressBar.setValue(0);
    downloadButton.setEnabled(false);

    new Thread(new Runnable() {
        public void run() {
            List<String> images = downloader.getImages(downloader.getPageSource());
            downloader.downloadImages(images);
            if (downloader.getErrorCode() == 0) {
                progressLabel.setText("All images have been downloaded!");
            } else {
                String error = "";
                switch (downloader.getErrorCode()) {
                case Downloader.BAD_URL:
                case Downloader.NOT_IMGUR_ALBUM:
                    error = "The URL entered is either invalid or does not link to an Imgur album.";
                    break;
                case Downloader.BLANK_URL:
                    error = "The album URL field cannot be blank.";
                    break;
                case Downloader.INVALID_PATH:
                    error = "The system cannot find the download directory path specified.";
                    break;
                case Downloader.BLANK_PATH:
                    error = "The download directory cannot be blank.";
                    break;
                case Downloader.CANNOT_READ_URL:
                    error = "An error occoured while reading the URL.";
                    break;
                case Downloader.PARSING_ERROR:
                    error = "An error occoured while parsing the URL.";
                    break;
                }
                JOptionPane.showMessageDialog(Main.this, error, "Error", 0);
            }
            downloadButton.setEnabled(true);
        }
    }).start();
} 
```

编辑：以上根本不是问题，问题之一是程序使用整数除法而不是十进制。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T04:57:29.377

主要问题是，您通过在 GUI EDT 上执行长时间运行的任务来阻止[Event Dispatch Thread 。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

而是使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

这是一个小例子：

![在此处输入图像描述](../Images/4971a45df4c223e464a4d37d7ab4905c.png)

```
import java.awt.BorderLayout;
import java.awt.Cursor;
import java.awt.Insets;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.Random;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingWorker;

public class ProgressBarDemo extends JPanel {

    private JButton startButton;
    private JTextArea taskOutput;

    public ProgressBarDemo() {
        super(new BorderLayout());

        final JProgressBar progressBar = new JProgressBar(0, 100);
        progressBar.setValue(0);
        progressBar.setStringPainted(true);

        taskOutput = new JTextArea(5, 20);
        taskOutput.setMargin(new Insets(5, 5, 5, 5));
        taskOutput.setEditable(false);

        // Create the demo's UI.
        startButton = new JButton("Start");
        startButton.setActionCommand("start");
        startButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                startButton.setEnabled(false);
                setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
                // Instances of javax.swing.SwingWorker are not reusuable, so
                // we create new instances as needed.
                final Task task = new Task();
                task.addPropertyChangeListener(new PropertyChangeListener() {
                    @Override
                    public void propertyChange(PropertyChangeEvent pce) {
                        if ("progress".equals(pce.getPropertyName())) {
                            int progress = (Integer) pce.getNewValue();
                            progressBar.setValue(progress);
                            taskOutput.append(String.format("Completed %d%% of task.\n", task.getProgress()));
                        }
                    }
                });
                task.execute();
            }
        });

        JPanel panel = new JPanel();
        panel.add(startButton);
        panel.add(progressBar);

        add(panel, BorderLayout.PAGE_START);
        add(new JScrollPane(taskOutput), BorderLayout.CENTER);
        setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));

    }

    /**
     * Create the GUI and show it. As with all GUI code, this must run on the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("ProgressBarDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel progressBarPanel = new ProgressBarDemo();
        frame.add(progressBarPanel);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        // Schedule a job for the event-dispatching thread:
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    private class Task extends SwingWorker<Void, Void> {

        /*
         * Main task. Executed in background thread.
         */
        @Override
        public Void doInBackground() {
            Random random = new Random();
            int progress = 0;
            // Initialize progress property.
            setProgress(0);
            while (progress < 100) {
                // Sleep for up to one second.
                try {
                    Thread.sleep(random.nextInt(1000)-15);
                } catch (InterruptedException ignore) {
                }
                // Make random progress.
                progress += random.nextInt(10);
                setProgress(Math.min(progress, 100));
            }
            return null;
        }

        /*
         * Executed in event dispatching thread
         */
        @Override
        public void done() {
            Toolkit.getDefaultToolkit().beep();
            startButton.setEnabled(true);
            setCursor(null); // turn off the wait cursor
            taskOutput.append("Done!\n");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T04:59:49.867

`images.size()`是一个整数， 也是`i+1`，所以发生的事情是小数被截断。你应该做的事情是这样的

`main.progressBar.setValue((int)((i+1)/(double)images.size())/100))`

这将确保将它`i+1`除以具有十进制能力的数据类型，该数据类型将返回更具包容性的数据类型（在本例中为双精度），然后它将双精度除以一个 int ' 不会有问题，因为它仍然会返回双精度值，因为它更具包容性。然后我们将其转换为 int，因为这是所需的数据类型`setValue()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T05:01:32.853

Swing的两条规则...

1.  不要阻塞事件调度线程
2.  不要从事件调度线程之外更新任何 UI 组件。

我敢肯定还有更多，但打破其中一个或两个，并期待很多糟糕的事情发生。

Swing 是一个单线程 API。有一个线程负责调度事件，包括重绘请求。如果您阻塞该线程（执行耗时的任务、I/O 等），您将阻止它处理来自用户的输入并将重绘请求分派给组件 - 因此不会更新任何内容，您的应用程序看起来就像挂起...

您需要从 EDT 中获取图像加载代码...

看看[Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)了解更多细节，特别是看看[Worker Threads 和 SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

# android - 无法捏合和放大图像

> ID：14271909
> 
> 赞同：1
> 
> 时间：2013-01-11T04:53:04.250
> 
> 标签：android, image

我正在尝试在我的代码中实现捏合和缩放功能，但我遇到了一些错误。

我在 onCreate() 中添加了一个 onTouchListener 方法

```
@Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            displayImage();
            viewPager = (ViewPager) findViewById(R.id.view_pager);
            viewPager.setAdapter(new MyAdapter(getSupportFragmentManager()));
            viewPager.setOnPageChangeListener(this);
            viewPager.setOnTouchListener(this);

            //gallery = (Gallery) findViewById(R.id.gallery);
            //gallery.setAdapter(new ImageAdapter());
            //gallery.setOnItemSelectedListener(this);

            //textView = (TextView) findViewById(R.id.title);

            handler = new Handler();

        } 
```

然后这是我在网上检索到的 onTouch 方法。

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    ImageView imageView = new ImageView(Main.this);
    imageView = (ImageView) v;
    imageView.setScaleType(ImageView.ScaleType.MATRIX);
       float scale;

       // Dump touch event to log
       dumpEvent(event);

       // Handle touch events here...
       switch (event.getAction() & MotionEvent.ACTION_MASK) {

       case MotionEvent.ACTION_DOWN: //first finger down only
          savedMatrix.set(matrix);
          start.set(event.getX(), event.getY());
          Log.d(TAG, "mode=DRAG" );
          mode = DRAG;
          Log.i("saran","mode === drag");
          break;
       case MotionEvent.ACTION_UP: //first finger lifted
           Log.i("saran","action up");
       case MotionEvent.ACTION_POINTER_UP: //second finger lifted
          mode = NONE;
          Log.i("saran", "mode=NONE" );
          break;
       case MotionEvent.ACTION_POINTER_DOWN: //second finger down
          oldDist = spacing(event);
          Log.i("saran", "oldDist=" + oldDist);
          if (oldDist > 5f) {
             savedMatrix.set(matrix);
             midPoint(mid, event);
             mode = ZOOM;
             Log.i("saran", "mode=ZOOM" );
          }
          break;

       case MotionEvent.ACTION_MOVE: 
          /*if (mode == DRAG) { //movement of first finger
             matrix.set(savedMatrix);
             if (view.getLeft() >= -392){
                matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
             }
             Log.i("saran", "action move.....");
          }
          else*/ if (mode == ZOOM) { //pinch zooming
             float newDist = spacing(event);
             Log.d(TAG, "newDist=" + newDist);
             if (newDist > 5f) {
                matrix.set(savedMatrix);
                scale = newDist / oldDist; //**//thinking i need to play around with this value to limit it**
                matrix.postScale(scale, scale, mid.x, mid.y);
             }
             Log.i("saran", "zoom.......");
          }
          break;
       }

       // Perform the transformation
       imageView.setImageMatrix(matrix);

       return true; // indicate event was handled
    }

    private float spacing(MotionEvent event) {
       float x = event.getX(0) - event.getX(1);
       float y = event.getY(0) - event.getY(1);
       return FloatMath.sqrt(x * x + y * y);
    }

    private void midPoint(PointF point, MotionEvent event) {
       float x = event.getX(0) + event.getX(1);
       float y = event.getY(0) + event.getY(1);
       point.set(x / 2, y / 2);
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) {
       String names[] = { "DOWN" , "UP" , "MOVE" , "CANCEL" , "OUTSIDE" ,
          "POINTER_DOWN" , "POINTER_UP" , "7?" , "8?" , "9?" };
       StringBuilder sb = new StringBuilder();
       int action = event.getAction();
       int actionCode = action & MotionEvent.ACTION_MASK;
       sb.append("event ACTION_" ).append(names[actionCode]);
       if (actionCode == MotionEvent.ACTION_POINTER_DOWN
             || actionCode == MotionEvent.ACTION_POINTER_UP) {
          sb.append("(pid " ).append(
          action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
          sb.append(")" );
       }
       sb.append("[" );
       for (int i = 0; i < event.getPointerCount(); i++) {
          sb.append("#" ).append(i);
          sb.append("(pid " ).append(event.getPointerId(i));
          sb.append(")=" ).append((int) event.getX(i));
          sb.append("," ).append((int) event.getY(i));
          if (i + 1 < event.getPointerCount())
             sb.append(";" );
       }
       sb.append("]" );
       Log.d(TAG, sb.toString());

} 
```

这是我的 logcat 输出

```
01-11 12:45:06.650: E/AndroidRuntime(16862): FATAL EXCEPTION: main
01-11 12:45:06.650: E/AndroidRuntime(16862): java.lang.ClassCastException: android.support.v4.view.ViewPager cannot be cast to android.widget.ImageView
01-11 12:45:06.650: E/AndroidRuntime(16862):    at com.github.browep.viewpagergallery.Main.onTouch(Main.java:185)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.View.dispatchTouchEvent(View.java:5536)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.View.dispatchPointerEvent(View.java:5721)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.os.Looper.loop(Looper.java:137)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at android.app.ActivityThread.main(ActivityThread.java:4446)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at java.lang.reflect.Method.invokeNative(Native Method)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at java.lang.reflect.Method.invoke(Method.java:511)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-11 12:45:06.650: E/AndroidRuntime(16862):    at dalvik.system.NativeStart.main(Native Method) 
```

什么地方出了错？我尝试使用在 getView() 中设置的 imageview，但它不起作用。请指出我的错误和帮助将不胜感激！非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:59:43.340

```
viewPager.setOnTouchListener(this); 
```

为 a 设置侦听器`ViewPager`，但在您的侦听器内部，您将视图转换为`ImageView`via

```
imageView = (ImageView) v; 
```

你应该将你的听众附加到你的`ImageView`.

# css - 活动/当前标签 css

> ID：14271911
> 
> 赞同：0
> 
> 时间：2013-01-11T04:53:17.680
> 
> 标签：css, tabs

寻找一种将活动/当前选项卡 css 添加到[ddtablemenu](http://www.dynamicdrive.com/dynamicindex1/ddtabmenu.htm)的方法。

默认情况下，加载后始终显示第一个选项卡。单击第二个或第三个选项卡后，选项卡颜色变为红色（与悬停相同）。激活或当前时，在底部中心添加 menu-arrow.png (.solidblockmenu li .active)

```
<div id="ddtabs3" class="solidblockmenu">
  <ul>
  <li class="active"><a href="#0" data-toggle="tab" rel="sb1" class="firstelement">Home</a></li>
  <li><a href="#1" data-toggle="tab" rel="sb2">DHTML</a></li>
  <li><a href="#2" data-toggle="tab" rel="sb3">CSS</a></li>
  </ul>
</div>

.solidblockmenu ul{margin: 0;padding: 0;float: left;font: bold 13px Arial;width: 100%;border: 1px solid #625e00;border-width: 1px 0;background: black url(http://www.dynamicdrive.com/dynamicindex1/ddtabmenufiles/media/blockdefault.gif) center center repeat-x;
}
.solidblockmenu li a:hover, .solidblockmenu li a.current{color: white;background: transparent url(http://www.dynamicdrive.com/dynamicindex1/ddtabmenufiles/media/blockactive.gif) center center repeat-x;
}

.solidblockmenu li .active { background-image:url(http://www.asiarooms.com/assets/themes/v1/images/areas/details/menu-arrow.png); background-repeat:no-repeat; background-position:bottom center; }
.solidblockmenu a:hover, .solidblockmenu li .active a { background:#310022 none; }
.solidblockmenu li a.firstelement:hover, .solidblockmenu li .active a.firstelement { background-position:left top; } 
```

[代码在这里](http://jsfiddle.net/DJHZb/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:36:43.950

```
.nav2{margin-left:0;margin-bottom:20px;list-style:none;width: 100%;background: black url(media/blockdefault.gif) center center repeat-x;}
.nav2>li>a{display:block;color: #fff;}/*Added BJ*/
.nav2>li>a:hover{text-decoration:none;background-color:#ED0F69;color:#fff;}/*Added BJ*/
.nav-tabs2,.nav-tabs2:before,.nav-tabs2:after{display:table;content:"";line-height:0;}
.nav-tabs2:after{clear:both;}
.nav-tabs2>li{float:left;}
.nav-tabs2>li>a{padding-right:12px;padding-left:12px;line-height:14px;}
.nav-tabs2{border-bottom:1px solid #ddd;}
.nav-tabs2>li{margin-bottom:-1px;}
.nav-tabs2>li>a{font-size: 13px;font-weight:bold;padding-top:8px;padding-bottom:8px;line-height:18px;border-right: 1px solid white;}
.nav-tabs2>li>a:hover{border-color:#eeeeee #eeeeee #dddddd;}
.nav-tabs2>.active>a,.nav-tabs2>.active>a:hover{color:#555555;background-color:#ffffff;border-bottom-color:transparent;cursor:default;color: white;
}

.nav-tabs2 a:hover, .nav-tabs2 .active a{ background: transparent url(media/blockactive.gif) center center repeat-x; }
.nav-tabs2 .active { background-image:url(media/menu-arrow.png); background-repeat:no-repeat; background-position:bottom center; }
</style>

                            <div class="box-head tabs">
                                <ul class="nav2 nav-tabs2">
                                    <li class="active">
                                        <a href="#0" data-toggle="tab" class="firstelement">Active Tab</a>
                                    </li>
                                    <li>
                                        <a href="#1" data-toggle="tab">Inactive Tab</a>
                                    </li>
                                    <li>
                                        <a href="#2" data-toggle="tab">Inactive Tab #2</a>
                                    </li>
                                </ul>
                            </div> 
```

# java - 无法从静态上下文错误中引用按钮变量

> ID：14271915
> 
> 赞同：0
> 
> 时间：2013-01-11T04:53:30.670
> 
> 标签：java, static, compiler-errors

如何防止我当前的代码发生此错误？我为我的逻辑非常业余而道歉。

```
 public class jButExmp {    
 JFrame exmpFrame;
 JButton Button1, Button2, Button3;    
 public jButExmp ()  {
     exmpFrame.setLayout(new FlowLayout());
     exmpFrame.setSize(250,150);
     exmpFrame.setVisible(true);
     exmpFrame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
     exmpFrame.add(Button1);
     exmpFrame.add(Button2);
     exmpFrame.add(Button3);
 }
 public static void main(String[] args)  {
 exmpFrame = new JFrame ("Example Frame");
 Button1 = new JButton ("1");
 Button2 = new JButton ("2");
 Button3 = new JButton ("3");

 Button1.setSize(80, 30);  //set size of button
 Button1.setLocation(0,0);
 Button1.setEnabled(true);

 Button2.setSize(80,30);
 Button2.setLocation(90, 0);
 Button2.setEnabled(false);

 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:15:00.593

![ExmpFile 屏幕截图](../Images/cf73a8e0c5d2289b8e23383fa9949f8c.png)

```
import java.awt.FlowLayout;
import javax.swing.*;

public class ExmpFile {

    JFrame exmpFrame;
    JButton Button1, Button2, Button3;

    public ExmpFile()  {
        exmpFrame = new JFrame ("Example Frame");
        Button1 = new JButton ("1");
        Button2 = new JButton ("2");
        Button3 = new JButton ("3");

        Button2.setEnabled(false);

        exmpFrame.setLayout(new FlowLayout(FlowLayout.CENTER));

        // better to pack() to the size of content..  BNI
        exmpFrame.setSize(250,150);
        exmpFrame.setVisible(true);
        exmpFrame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
        exmpFrame.add(Button1);
        exmpFrame.add(Button2);
        exmpFrame.add(Button3);

        exmpFrame.setVisible(true);
    }

    public static void main(String[] args)  {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                new ExmpFile();
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:09:37.613

这将是更惯用的方法，尽管此代码还有一些其他问题，包括您没有像使用 button1 和 button2 那样设置 button3 的事实，以及您正在设置的位置的事实使用默认 FlowLayout（不支持设置位置）时的按钮。

```
import javax.swing.JButton;
import javax.swing.JFrame;

    public class JButExmp extends JFrame {  

    JButton button1;
    JButton button2;
    JButton button3;

     public JButExmp (String title)  {

         super(title);

         button1 = new JButton("1");
         button2 = new JButton("2");
         button3 = new JButton("3");

         add(button1);
         add(button2);
         add(button3);

         button1.setSize(80, 30);  //set size of button
         button1.setLocation(0,0);
         button1.setEnabled(true);

         button2.setSize(80,30);
         button2.setLocation(90, 0);
         button2.setEnabled(false);

         setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
         setLayout(new FlowLayout());
         setSize(250,150);
         setVisible(true);
     }

     public static void main(String[] args)  {
         JButExmp jButExmp = new JButExmp("Example Frame");
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:58:20.570

在您的代码中，您试图访问静态 main 方法中的非静态变量，因此会出现编译错误。

尝试这个

```
 import java.awt.FlowLayout;

import javax.swing.JButton;
import javax.swing.JFrame;

public class jButExmp {
    JFrame exmpFrame = new JFrame("Example Frame");
    JButton button1, button2, button3;

    public JButton getButton1() {
        return button1;
    }

    public void setButton1(JButton button1) {
        this.button1 = button1;
    }

    public JButton getButton2() {
        return button2;
    }

    public void setButton2(JButton button2) {
        this.button2 = button2;
    }

    public JButton getButton3() {
        return button3;
    }

    public void setButton3(JButton button3) {
        this.button3 = button3;
    }

    public jButExmp() {
        exmpFrame = new JFrame("Example Frame");
        exmpFrame.setLayout(new FlowLayout());
        exmpFrame.setSize(250, 150);
        exmpFrame.setVisible(true);
        button1 = new JButton("1");
        button2 = new JButton("2");
        button3 = new JButton("3");
        exmpFrame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
        exmpFrame.add(button1);
        exmpFrame.add(button2);
        exmpFrame.add(button3);
    }

    public static void main(String[] args) {
        jButExmp jButExmpRef = new jButExmp();

        jButExmpRef.getButton1().setSize(80, 30); // set size of button
        jButExmpRef.getButton1().setLocation(0, 0);
        jButExmpRef.getButton1().setEnabled(true);

        jButExmpRef.getButton2().setSize(80, 30);
        jButExmpRef.getButton2().setLocation(90, 0);
        jButExmpRef.getButton2().setEnabled(false);

    }
} 
```

# javascript - 用标签包围选定的文本

> ID：14271919
> 
> 赞同：0
> 
> 时间：2013-01-11T04:54:20.943
> 
> 标签：javascript, html, browser, editor, wysiwyg

```
<ul class="contact">
<li class="first">Carnegie Mellon University</li>
<li>5000 Forbes Avenue, Pittsburgh, PA 15213</li>
</ul> 
```

=>

```
<ul class="contact">
<li class="first">Carnegie Mellon University</li>
<li>[address]5000 Forbes Avenue, Pittsburgh, PA 15213[/address]</li>
</ul> 
```

想象一下，我在浏览器中打开一个网页并在该页面中找到一些有用的信息。所以我想从页面中选择有用的信息（例如，卡内基梅隆大学的地址），然后单击一个待实现的“注入标签”按钮。结果，页面的源代码将被注入一对围绕用户选择文本的标签（例如，[地址][/地址]）。然后我将保存注入的源代码以供进一步处理。

任何人都可以帮助提出一种实现这种功能的方法吗？我对 Javascript 的东西真的很陌生，所以请详细说明您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:07:00.237

在 google 中搜索，我找到了一个可以获取所选文本的示例：http: [//mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)。

有了这个，您只需要更改警报操作即可插入您想要的标签。要使用 jquery 执行此操作，请使用以下代码：

```
$(selected).text("[tag]" + $(selected).text() + "[/tag]"); 
```

其中 selected 必须是代表所选文本的变量。

# python - 无法引用插座

> ID：14271922
> 
> 赞同：1
> 
> 时间：2013-01-11T04:54:32.863
> 
> 标签：python, objective-c, cocoa

我似乎在引用我的插座时遇到了麻烦，我终于得到了拖放工作，（在 stackoverflow 成员的帮助下）但仍然无法让这个插座工作。

```
class controller(NSWindow):

    form_file = IBOutlet()
    mainWindow = IBOutlet()

    #drag and drop ability
    def awakeFromNib(self):
        self.registerForDraggedTypes_([NSFilenamesPboardType, None])
        print 'registerd drag type'

    def draggingEntered_(self, sender):
        print 'dragging entered'
        pboard = sender.draggingPasteboard()
        types = pboard.types()
        opType = NSDragOperationNone
        if NSFilenamesPboardType in types:
            opType = NSDragOperationCopy
        return opType

    def performDragOperation_(self, sender):
        print 'preform drag operation'
        pboard = sender.draggingPasteboard()
        successful = False
        if NSFilenamesPboardType in pboard.types():
            fileAStr = pboard.propertyListForType_(NSFilenamesPboardType)[0].encode('utf-8')
            successful = True

        #edit some things
        print type(fileAStr)
        self.form_file.setStringValue_(fileAStr)
        return successful 
```

我可以删除文件，但我无法`form_file`从`performDragOperation`函数内部引用插座。我想使用删除文件中的 URL 更新 NSTextField，但它返回`NoneType`错误。

```
(reason '<type 'exceptions.TypeError'>: 'NoneType' object is not callable') was raised     during a dragging session 
```

我试图捕捉错误，所以我在我的`awakeFromNib`函数中添加了以下内容

```
 print type(self.formfile)
    print type(self.mainWindow)
    NSLog("formfile = %p", self.formfile)
    NSLog("mainWindow = %p", self.mainWindow)
    NSLog("self = %p", self)
    print self 
```

这将返回：

```
registerd drag type
<type 'NoneType'>
<type 'NoneType'>
2013-01-12 16:32:29.211 app [463:303] formfile = 0x10013c148
2013-01-12 16:32:29.212 app[463:303] mainWindow = 0x10013c148
2013-01-12 16:32:29.212 app[463:303] self = 0x105aba890
<controller: 0x1008a1600>
registerd drag type
<objective-c class NSTextField at 0x7fff785296e8>
<objective-c class controller at 0x10541b6a0>
2013-01-12 16:32:29.216 app[463:303] formfile = 0x105abaa10
2013-01-12 16:32:29.216 app[463:303] mainWindow = 0x105abaa10
2013-01-12 16:32:29.216 app[463:303] self = 0x105aba890
<controller: 0x1008afe00> 
```

但是如果我在 draggingEntered 函数中进行相同的测试，那么我只会得到一个控制器和对象（那个`NoneType`）。问题是它两次运行 awakeFromNib 方法对吗？我认为这可能是我的 xib 文件的问题，但我已经检查过了，似乎无法找出问题所在。

有任何想法吗，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:37:34.243

由于我对 Python 不熟悉，所以我的建议可能有效，也可能无效……</p>

如果 Python 有类并且您的文件是子类，请尝试在`awakeFromNib`.

# exchangewebservices - 使用 Exchange Web 服务进行 OWA 签名更新

> ID：14271923
> 
> 赞同：2
> 
> 时间：2013-01-11T04:54:37.537
> 
> 标签：exchangewebservices, exchange-server-2010, office365

我们正在使用 Exchange Web 服务在 Outlook Web Access 中设置用户签名。效果很好，我们在选项>设置下看到签名，并且选中了“在我发送的消息中自动包含我的签名”复选框。我们还以编程方式设置它。

但是，当用户在 OWA 中创建新电子邮件时，签名不会显示。解决此问题的方法是转到选项>设置，取消选中“在我发送的消息中自动包含我的签名”复选框，保存，再次选中该复选框并保存。

我们用来设置签名的代码如下所示：

```
Folder rootFolder;
UserConfiguration OWAConfig;
rootFolder = Folder.Bind(service, WellKnownFolderName.Root);
OWAConfig = UserConfiguration.Bind(service, "OWA.UserOptions",rootFolder.ParentFolderId, UserConfigurationProperties.All);

OWAConfig.Dictionary["signaturehtml"] = "Hello World";
OWAConfig.Dictionary["autoaddsignature"] = "True";
OWAConfig.Update(); 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:24:41.677

我有一些旧代码可以正常工作。我已经粘贴了下面的代码。我的代码和你的代码有一些细微的差别。我不确定它们是否会有所作为，但您可能想尝试一下。这是我的代码的摘录，其中的差异用注释突出显示：

```
private void SetSettingValue(UserConfiguration owaConfig, string propName, object propValue)
{
    if (owaConfig.Dictionary.ContainsKey(propName))
    {
        owaConfig.Dictionary[propName] = propValue;
    }
    else
    {
        // Adds a key if it does not explicitly exist.
        // I am not sure if it makes a difference.
        owaConfig.Dictionary.Add(propName, propValue);
    }
}

public void AddSignature()
{
   // Extract
    UserConfiguration OWAConfig = UserConfiguration.Bind(
        service, 
        "OWA.UserOptions", 
        WellKnownFolderName.Root, // Binding to Root and not Root.ParentFolderId.
        UserConfigurationProperties.Dictionary // Binds to Dictionary and not to All.
        );

    SetSettingValue(OWAConfig, "autoaddsignature", true);
    SetSettingValue(OWAConfig, "signaturehtml", html);

    OWAConfig.Update();
} 
```

# c# - 使用 LINQ 优化搜索结果

> ID：14271929
> 
> 赞同：1
> 
> 时间：2013-01-11T04:55:10.857
> 
> 标签：c#, asp.net, linq, entity-framework, ef-code-first

我有一个使用分页的搜索。我的查询带回更多结果，然后我可以每页列出。我担心随着我的网站规模不断扩大，这可能会成为性能问题。我不确定如何有效地解决这个问题，并希望得到一些指导。下面是我调用来执行我的查询的方法。

```
 private List<dynamic> AdminSearchAll(string keyword)
        {
            string DDL = DDLAddDivision.SelectedValue;
            int DDLInt;
            int searchID = 0;

            if (int.TryParse(DDL, out DDLInt))
            {
                //int searchID;
                if (!int.TryParse(keyword, out searchID))
                    searchID = -1;  // set to an invalid ID
            }

            ItemContext db = new ItemContext();
            var contacts = (from c in db.Contacts
            join cat in db.Categories on c.CategoryID equals cat.CategoryID
            join div in db.Divisions on c.DivisionID equals div.DivisionID

                            where
                 (DDLInt == 1 || c.DivisionID == DDLInt) &&
                    (c.Deleted == false) &&
                                //Contains    
                    (
                     c.ContactName.Contains(keyword) ||
                     c.ContactEmail.Contains(keyword) ||
                     c.ContactOPhone.Contains(keyword) ||
                     c.ContactID.Equals(searchID)

                       )
                            select new
                            {

                                Name = c.ContactName,
                                Phone = c.ContactOPhone,
                                Type = c.Type,
                                Email = c.ContactEmail,
                                ID = c.ContactID

                            });
            var items = (from i in db.Item
            join cat in db.Categories on i.CategoryID equals cat.CategoryID
            join div in db.Divisions on i.DivisionID equals div.DivisionID
                         where
                           (DDLInt == 1 || i.DivisionID == DDLInt) &&
                           (i.Deleted == false) &&

                          //Contains

                     (
        i.ItemName.Contains(keyword) ||
        i.Email.Contains(keyword) ||
        i.Description.Contains(keyword) ||
        i.ItemID.Equals(searchID)
                      )
                         select new
                         {

                             Name = i.ItemName,
                             Phone = i.Phone,
                             Type = i.Type,
                             Email = i.Email,
                             ID = i.ItemID
                         });

            var all = contacts.Union(items);

            return all.ToList<dynamic>(); 
```

我使用 Asp.net Data Pager 进行分页。我每页显示 10 个结果。我的数据寻呼机使用一种方法 `OnPreRender="Pager_PreRender"`

```
protected void Pager_PreRender(object sender, EventArgs e)
        {
    if (IsPostBack)
                {

                        string keyword = txtSearch.Text.Trim();

                        List<dynamic> Cresults = AdminSearchAll(keyword);

    }
} 
```

我的问题是使用 LINQ to SQL 将我的查询限制为在我分页时仅返回十个结果而不是返回所有结果并且由于寻呼机而仅显示 10 个的正确方法是什么。PS 我为所有的代码道歉，但我想让你看看我在做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:35:04.853

您可以在 LINQ 级别实现分页，而不是将其委托给数据分页器，但需要进行一些重新编码。LINQ 允许您执行 Skip-Take 操作，您可以在其中指定适当的页面大小以跳过和获取。

有很多方法可以实现这一点，但由于这是我看到的代码的唯一部分，这就是我的建议。

1.  将您的页面大小和当前页面参数传递给您的搜索方法
2.  订购您的列表，以便 LINQ 可以完成正确的分页
3.  订购后使用 Skip() 和 Take() 方法

第 1 点

```
private List<dynamic> AdminSearchAll(string keyword, int pageSize, int currentPage) 
```

搜索方法需要接受 pageSize 和 currentPage 参数，稍后将使用。

第 2 点

```
var all = contacts.Union(items).OrderBy(a => a.Id); 
```

您的列表需要进行排序，以便在对过程进行成功调用时，您仍然能够准确地找到要提取的集合。

第 3 点

```
var all = contacts.Union(items).OrderBy(a => a.Id).Skip(pageSize * currentPage)
                  .Take(pageSize); 
```

Skip(int X) 方法告诉 LINQ 您要传递前 X 个条目。在这种情况下，我们跳过了 pageSize * currentPage。如果您位于第一页（索引 0），则不会跳过任何项目。Take (int X) 方法告诉 LINQ，您只想从与您的页面大小相对应的起始索引中提取 X 个元素。

当您返回“all.ToList()”时，它应该只包含您的 pageSize 参数中指示的元素。在您的主应用程序上，您应该能够轻松地跟踪每个会话的 pageSize 和 currentPage。

# forms - MFC 单选按钮动态更改按钮名称

> ID：14271934
> 
> 赞同：1
> 
> 时间：2013-01-11T04:55:39.190
> 
> 标签：forms, mfc, radio-button

我创建了一个带有 4 个单选按钮的 MFC 表单，表单上的名称为 A、B、X、Y，

现在我希望表单在选择按钮 A 时显示名称 X、Y

当我选择按钮 B 时，我希望 X、Y 的名称更改为 M、N

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:37:06.923

您可以使用 SetWindowText(); 更改任何其他控件上的文本方式来更改单选按钮上的文本；

为了处理“选择”单选按钮的事件，为 BN_CLICKED 通知消息添加一个处理程序。我建议您对所有四个单选按钮使用相同的处理程序。然后，在函数内部编写以下小代码：

```
// assumptions:
// there are four radiobuttons: IDC_RADIOA, IDC_RADIOB, IDC_RADIOX, IDC_RADIOY
// The message map
BEGIN_MESSAGE_MAP(CMyDlg, CDialog)
    ON_BN_CLICKED(IDC_RADIOA, OnRadio)
    ON_BN_CLICKED(IDC_RADIOB, OnRadio)
    ON_BN_CLICKED(IDC_RADIOX, OnRadio)
    ON_BN_CLICKED(IDC_RADIOY, OnRadio)
END_MESSAGE_MAP()

// a common handler for all four radiobuttons
void CMyDlg::OnRadio()
{
  switch(GetCheckedRadioButton(IDC_RADIOA, IDC_RADIOY))
  {
  case IDC_RADIOA:
     SetDlgItemText(IDC_RADIOX, _T("X"));
     SetDlgItemText(IDC_RADIOY, _T("Y"));
     break;
  case IDC_RADIOB:
     SetDlgItemText(IDC_RADIOX, _T("M"));
     SetDlgItemText(IDC_RADIOY, _T("N"));
     break;
  default:
     // you have not specified what to do when you select radio X and Y, so specify it here
     break;
  }
} 
```

# ember.js - Ember 绑定块助手

> ID：14271936
> 
> 赞同：7
> 
> 时间：2013-01-11T04:55:59.500
> 
> 标签：ember.js, handlebars.js

我想知道 ember 中的 registerBoundHelper 是否曾经意味着能够处理块样式助手。例如，我创建了以下内容：

```
Ember.Handlebars.registerBoundHelper('unlessUndefined', (context, options) ->
  unless typeof context == "undefined"
    return options.fn(this)
  else
    return options.inverse(this)
) 
```

想法是这样使用它：

```
{{#unlessUndefined choice}}
  {{#if choice}}
    <p>You chose yes</p>
  {{else}}
    <p>You chose no</p>
  {{/if}}
{{else}}
  <p>Make a choice</p>
{{/unlessUndefined}} 
```

事物的 option.fn(this) 部分似乎没有呈现任何输出。执行此操作时，我在控制台中收到错误消息：“您不能在渲染过程之外使用 appendChild”

如果这是不可能的，也许有人可以提出另一种方法来实现一个条件块，它只显示绑定值是否未定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:11:30.843

我只是花了很多时间来解决这个问题并找到了某种解决方法。我通过 registerBoundHelper 方法的实现查看了拉取请求。

我在这一行上方添加了以下内容： [https ://github.com/emberjs/ember.js/pull/1274/files#L0R357](https://github.com/emberjs/ember.js/pull/1274/files#L0R357)

```
Ember.run.scheduleOnce('render', view, 'rerender') 
```

看起来 boundHelper 方法只是包装了原始的辅助方法并创建了一个匿名视图。唯一的问题是观察者将匿名视图置于渲染模式，而没有首先将原始视图置于相同状态。

至少这是我认为正在发生的事情。无论如何，它现在对我有用。也许这是一个错误？

# telerik - 十年模式下的 Telerik rad 日期选择器

> ID：14271942
> 
> 赞同：0
> 
> 时间：2013-01-11T04:56:34.660
> 
> 标签：telerik

我正在使用 Telerik raddatepicker 作为生日选择器。我需要升级它以支持十年模式。Telerik Datepicker可以做到这一点吗？用户首先使用 Fastnavigation 选择十年，然后选择月份，然后选择日期。

```
<telerik:RadDatePicker ID="rdpDateOfBirth" runat="server"
                            DateInput-DateFormat="dd/MM/yyyy" 
                            DateInput-DisplayDateFormat="dd/MM/yyyy"
                            ShowPopupOnFocus="True" DatePopupButton-   ImageUrl="~/styles/images/calendar.png" Width="100"
                            FocusedDate="1/01/1970" Calendar-UseColumnHeadersAsSelectors="False"
                            Calendar-UseRowHeadersAsSelectors="False" DatePopupButton-HoverImageUrl="~/styles/images/calendar.png"
                            Calendar-FocusedDate="1/01/1970 12:00:00 AM" Calendar-RangeMinDate="1/01/1900 12:00:00 AM"
                            Calendar-RangeSelectionStartDate="1/01/1900 12:00:00 AM" DateInput-MinDate="1/01/1900 12:00:00 AM"
                            MinDate="1/01/1900 12:00:00 AM" DateInput-ClientEvents-OnError="validateDateOnEror" Calendar-FastNavigationStep="12" Calendar-FirstDayOfWeek="Default">                                                                
                        </telerik:RadDatePicker> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:21:41.870

它最多只能钻取一年的选择器。它不是为支持几十年而构建的，但单击标题可以轻松选择月/年组合。

AJAX 控件工具包[日历扩展器](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)的作用与此类似，但您必须深入研究。但是，需要单击标题，这允许日历钻取十年视图（标题中显示十年）。

# jquery - wordpress 中的 jQuery 浮动菜单不适用于内容部分

> ID：14271947
> 
> 赞同：1
> 
> 时间：2013-01-11T04:57:02.627
> 
> 标签：jquery, jquery-selectors

在 wordpress 中，我开发了一个网站。我有两个侧边栏。在左侧边栏中，我有 wordpress 自定义菜单。所以当页面向下滚动时，我希望左侧边栏菜单处于固定位置，所以我只使用了这个 jQuery

```
 jQuery(document).ready(function () {  
  var top = jQuery('.widget_nav_menu').offset().top - parseFloat(jQuery('.widget_nav_menu').css('marginTop').replace(/auto/, 0));
  //console.log(top);
  jQuery(window).scroll(function(event) {
    // what the y position of the scroll is
    var y = jQuery(this).scrollTop();
    //console.log(y);
    // whether that's below the form
    if (y >= top) {
      // if so, ad the fixed class
      jQuery('.widget_nav_menu').addClass('fixed');
    } else {
      // otherwise remove it
      jQuery('.widget_nav_menu').removeClass('fixed');
    }
  });
}); 
```

当我的菜单上有东西时，这很好用。但是如果只有菜单，那么内容是浮动的，部分是在菜单上合并的。现在，当您访问[此实时站点](http://modulesoft.info/projects/valuepayroll/)时，您可以看到实际问题。在这个站点中，当您进入薪资软件页面并滚动页面时，您可以看到左侧菜单将固定在顶部，因为我使用了 jQuery。这里没关系。但是，当您进入免费试用或购买页面并向下滚动页面时，您会看到主要内容部分正在合并到菜单上。那么有人可以帮我解决这个问题吗？任何帮助和建议都将不胜感激。

**注意** 当访问该站点时，如果它显示 500 错误，那么只需刷新页面它就会再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:56:07.767

这是因为您的左侧边栏有一个唯一的孩子，如果将 side 标签设置为固定，它会在您的**主要内容**`<aside>`容器中消失，因此div 将向左移动。您必须找到一种方法，以便仍然有一个标签（或任何标签将用作虚拟标签）来保持左侧边栏的宽度并防止内容在您的类被 JS 应用后移动。**`#inner-page``<aside>``.fixed`**

 **但这是一种丑陋的做法。我能想到的另一种方法（更好）是在应用类后立即为您的 div 添加一个左边距**，**相当于您左侧边栏的宽度。虽然我认为当有其他标签不会导致内容向右移动时，这会影响其他页面 - 解决方法是，添加一个条件语句，如果左侧边栏下只有一个标签，只有这个边距 -左边被称为。`#inner-page``.fixed``<aside>``.fixed``<aside>`

大致如此：

```
if (y >= top) {
  jQuery('.widget_nav_menu').addClass('fixed', function(){

  //inserted, fine tune this to a working code, untested
    if ( $('#teritary aside:only-child').length ) {
    $("#inner-page").css("margin-left", "250px");
    }
  //or you can omit this else statement
  else { $("#inner-page").css("margin-left", "0"); } 

});
} else {
  // otherwise remove it
  jQuery('.widget_nav_menu').removeClass('fixed');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:29:38.933

为 div 样式添加透明边框，`#teritary`在文件的第 1673 行定义`wp-content/themes/ValuePayroll/style.css`：

```
#teritary {
  width: 230px;
  float: left;
  margin: 0 10px 0 0;
  border: solid 1px transparent;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T16:44:25.920

我会说这在 CSS 中使用`position: fixed`我认为不需要 Jquery 的属性是可能的。我只在手机上查看，所以我可能看不到完整尺寸的视图。**

# php - 使用 Doctrine 2 和 Synfony 2 获取实体

> ID：14271948
> 
> 赞同：0
> 
> 时间：2013-01-11T04:57:10.297
> 
> 标签：php, sql, symfony, doctrine-orm

我有三个对象：

类别，文章和图像。

类别和文章具有双向 OneToMany 关联。Article 和 Image 具有双向 OneToMany 关联。

如何获得某个类别及其所有文章以及每篇文章的所有图像？

最后我想得到：

`categorie.articles[0].images[0].URL`（树枝语法）

PS：URL是Image的一个参数。

通过创建自定义存储库功能，我成功​​地将相关文章添加到某个类别：

```
public function getCategoryWithArticles($article)
{
    $qb = $this->_em->createQueryBuilder();
    $qb->select('a')
    ->from('SiteBundle:Category', 'a')
    ->where('a.article= :article')
    ->setParameter('article', $article);

    $qb->leftJoin('a.articles', 'c')
    ->addSelect('c');
    return $qb->getQuery()
    ->getResult();
}

What should I add to get also the Images associated to each article ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:04:57.877

所以你有文章对象关联到某个类别。只需使用类似的东西

```
$article->getImages(); 
```

获取一篇文章的所有图像。

# html - CodeIgniter 中的 Html5 表单验证

> ID：14271950
> 
> 赞同：2
> 
> 时间：2013-01-11T04:57:25.817
> 
> 标签：html, codeigniter

我正在使用代码点火器。我用 html5 验证从代码中编写了简单的代码。但它不起作用。它仍然进入控制器。这是我的代码。

```
<?php echo form_open('welcome/RigesterValue');?>
<h4> Rigesteration </h4>
<table border="2" align="center">
<tr><td><label>First name</td>
<td><input type="text" maxlength="20" id="First_name" name="First_name" required pattern="[A-Z ]+"></td></tr>
<tr><td><label>Last name</td>
<td><input type="text" maxlength="20" name="Last_name"></td></tr>
<tr><td><label>User name</td>
<td><input type="text" maxlength="20" name="User_name"></td></tr>
<tr><td><label>Password</td>
<td><input type="password" maxlength="20" name="Password"></td></tr>
<tr><td><label>Confirm Password</td>
<td><input type="password" maxlength="20" name="Confirm_Password"></td></tr>
<tr><td><label>Address</td>
<td><input type="text" maxlength="20" name="Address"></td></tr>
<tr><td><label>Cell number</td>
<td><input type="text" maxlength="20" name="Cell_number"></td></tr>
<tr><td><label>Email</td>
<td><input type="text" maxlength="20" name="Email"></td></tr>
<tr><td><Label>Status</Label></td>
</td></tr><br>
<tr><td align="center" colspan="2"><input type="Submit" value="Register"></td></tr>
</table>
<?php echo form_close();? 
```

我只在第一个字段上应用了 html5 验证..这是 First_name..但它仍然转到控制器页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:18:20.620

CodeIgniter[自己的验证](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)通常可以解决问题。这是最安全的，因为它将接收值、验证它们*然后*处理它们。

由于 Firebug 等原因，通过浏览器进行的验证并不可靠。最后，我可以轻松地将我想要的任何值发布到您的页面，如果验证仅涵盖 HTML5 等，您的系统将不知道是什么击中它。

**总是让你的服务器验证一切，但你也**可以让一些事情在你的视图中完成。例如，如果您每次都需要发布只是为了听到它已被占用，那么查找未占用的用户名可能会很麻烦，因此可以通过 ajax 检查用户名是否被占用并在提交前显示。

如果您让 form_validation 按预期工作，您可能不会认为需要更多方法来验证您的字段。

# ruby-on-rails - Rails 轮胎搜索通过与 created_at 比较来获取数据

> ID：14271952
> 
> 赞同：0
> 
> 时间：2013-01-11T04:57:28.800
> 
> 标签：ruby-on-rails, elasticsearch, filter, tire

我正在使用**轮胎**在我的**Rails**应用程序中进行搜索。我想通过与 created_at 字段进行比较来获取数据。即，给出像 created_at > '2013-01-01' 这样的条件

我读了一个名为**excludes**的方法，但我看不到任何关于如何使用它的教程。

# c# - 使用事件和委托交替触发按钮单击事件

> ID：14271953
> 
> 赞同：0
> 
> 时间：2013-01-11T04:57:30.300
> 
> 标签：c#, asp.net, events, button, delegates

我正在使用`delegates`.

在我的代码中，我通过调用按钮事件`delegates`。但是`button click`在交替射击...

在 each`button click`中，它是去页面加载，而不是去按钮点击事件功能。
它去`event function` 交替。

# java - 在 Java 中销毁线程

> ID：14271957
> 
> 赞同：2
> 
> 时间：2013-01-11T04:57:55.770
> 
> 标签：java, multithreading, threadpool

我在 stackoverflow 上看到了一些帖子，并阅读了 oracle 发布的关于销毁线程的教程。据我了解，一旦你`start()`有了一个线程，你就不能用它`stop()`来删除那个线程。`sleep()`与其实际从调度程序中删除线程，不如建议无限期地使线程。这种想法对吗？

这也让我想到了我的下一个问题，这就是为什么人们使用`thread pools?.`而不是“休眠”线程，而是使用该线程来处理其他工作而不是创建新线程更有资源。请让我知道我对`multi-thread`管理的理解是否正确。Java 不允许以`thread`安全的方式完全删除 a 是没有意义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:04:17.367

通常认为一旦线程启动就强制停止线程（或使其无限期休眠）是一个非常糟糕的主意，因为线程将无法清理它获得的任何资源。例如，如果一个线程获得了锁并被强制杀死或无限期地休眠，那么锁将不会被释放并且可能会发生死锁。类似地，如果线程正在对数据结构进行更改并提前终止，则数据结构可能处于损坏状态，从而导致以后出现严重问题。

在 Java 中停止线程的最好方法是中断线程并告诉它它需要尽快尝试关闭。这样，线程可以尝试停止它正在做的事情并在关闭之前释放任何资源。换句话说，您*请求*关闭线程，而不是强行杀死它。

这与为什么存在线程池无关。线程池很有用，因为创建或销毁线程通常会产生一些开销，这是由于跟踪线程状态和进度所需的内部 JVM 或操作系统级别的簿记。线程池可以回收线程并让它们执行不同的任务，方法是让线程休眠直到任务准备好，然后唤醒并执行任务。这比产生一个新线程、自己执行任务然后拆除线程要快得多。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:15:51.747

正如 templatetypedef 所提到的，您不应该强行停止线程，您应该向线程发出信号以停止。例如，每当你的线程阻塞时，它应该在一个 while 循环中完成，该循环测试它阻塞的条件，以及退出的条件：

```
while (!condition && !stop) {
    try {
        someBlockingFunction(); // A lock, take on a BlockingQueue, etc.
    } catch (InterruptedException e) { //ignored }
} 
```

退出 while 循环后，检查是否有`stop = true`另一个线程向我们发出停止 ( ) 的信号，如果是，则从`run()`函数返回以允许线程自行清理。

# node.js - 是否可以更改安装 node.js 模块的目录？

> ID：14271961
> 
> 赞同：1
> 
> 时间：2013-01-11T04:58:26.583
> 
> 标签：node.js, npm

有什么方法可以更改 node.js 模块的安装目录吗？默认情况下（在 Linux Mint 13 上），将模块`npm install express`安装在中，但我希望默认情况下将模块安装在中。`express``home/username/node_modules``home/username/Dropbox/node_modules`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:12:52.847

好吧，如果您想更改安装目录，请尝试设置相关[前缀](https://npmjs.org/doc/config.html#prefix)。

只是一个建议，如果它是一个小项目，一个快速的解决方法就是在每台机器上单独安装包。如果它是一个大项目，那么我猜你至少会使用一些源代码控制，比如`git`. 可以使用源代码管理优雅地管理所有包依赖项。

# excel - VBA Excel-如何通过vba取消保护和保护

> ID：14271964
> 
> 赞同：1
> 
> 时间：2013-01-11T04:58:30.080
> 
> 标签：excel, vba, sharing

我有一本工作簿，其中根据要求有几张纸。在本工作簿中，我使用了宏并锁定了一些特定的单元格和列，我使用了取消保护和保护选项。在我的机器上一切正常，但是当我将其设置为 SharedWorkBook 时，它给了我错误，尤其是**ThisWorkBook.Sheets("PSE").Unprotect**和**ThisWorkBook.Sheets("PSE").Protect**语句。所以代替它们，我使用了**ThisWorkBook.Sheets("PSE").UnprotectSharing**和**ThisWorkBook.Sheets("PSE").ProtectSharing**。即使是现在，我也遇到了这些行的错误。

* * *

```
Sub SheetHider()
ThisWorkbook.Sheets("SheetA").UnprotectSharing
Cuser = ThisWorkbook.Sheets("SheetA").Range("A2").Value 
```

* * *

并且错误是
**运行时错误“438”对象不支持此属性或方法。**

**我的要求：** 1）我必须使用宏，锁定属性，以便我必须使用 Unprotect 和 Protect 语句，当我将其作为 SharedWorkBook 时，这些东西应该可以工作。
一个星期以来，我一直在为此搜索许多网站。至少给我一些替代方案来做到这一点。
任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T07:16:21.547

`UnprotectSharing`并且`ProtectSharing`都属于`Workbook`对象。所以你不能做你想做的事。

您可以这样做`ThisWorkbook.UnprotectSharing`，`ThisWorkbook.ProtectSharing`但这只是为了保护共享工作簿设置，以便人们在没有密码的情况下无法删除它。

其次，共享工作簿时，您不能取消保护或保护工作表。您必须取消共享工作簿，取消保护工作表，然后再次共享工作簿。这不是很实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:02:50.453

您必须在保护共享工作簿之前保护工作表，取消保护的顺序相反。

# c# - 如何从头开始在 VS 2010 中设计自己的控件？

> ID：14271965
> 
> 赞同：-1
> 
> 时间：2013-01-11T04:58:36.520
> 
> 标签：c#, winforms, visual-studio-2010, user-controls, custom-controls

我希望在 C# 中为 Visual Studio 设计我自己的控件。我已经按照链接[创建自定义控件](http://www.codeproject.com/Articles/2016/Writing-your-Custom-Control-step-by-step)并希望看到更多涉及从头开始控制的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:12:15.543

[在StackOverflow](https://stackoverflow.com/search?q=C%23+create+custom+control)和[Google](https://www.google.com/search?q=C%23+create+custom+control)上进行简单搜索是一个很好的起点。

如果您想创建一个处理自己的渲染的控件，您可能需要考虑使用 System.Drawing 命名空间中的对象[（](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)即[System.Drawing.Graphics](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)）。

# grails - Grails 2.1.0，Spring Security Core - SpringSecurityUtils 没有这样的属性

> ID：14271966
> 
> 赞同：2
> 
> 时间：2013-01-11T04:58:37.403
> 
> 标签：grails, spring-security, multi-tenant

我有一个带有 Spring Security Core 和多租户单数据库插件的 grails 2.1.0 应用程序工作正常。此应用程序的要求之一是将并发登录限制为一个。为此，我尝试在 Bootstrap 中使用 SpringSecurityUtils 来注册过滤器。

```
 SpringSecurityUtils.clientRegisterFilter('concurrencyFilter', SecurityFilterPosition.CONCURRENT_SESSION_FILTER) 
```

SpringSecurityUtils 是静态的，正如文档所说，不需要注入，但在执行时，它会出错

```
ERROR context.GrailsContextLoader  - Error executing bootstraps: No such property: SpringSecurityUtils for class: BootStrap 
```

消息：没有这样的属性：类的 SpringSecurityUtils：BootStrap Line | 方法->> 17 | BootStrap$_closure1 中的 doCall

* * *

| 301 | grails.util.Environment 中的 evaluateEnvironmentSpecificBlock | 294 | 执行环境。. . . . 在''| 270 | ''中的executeForCurrentEnvironment | 303 | 内部运行。. . . . . . . . . . . 在 java.util.concurrent.FutureTask$Sync | 138 | 在 java.util.concurrent.FutureTask 中运行 | 第886章 运行任务。. . . . . . . . . . . 在 java.util.concurrent.ThreadPoolExecutor$Worker | 908 | 运行'' ^ 662 | 跑 。. . . . . . . . . . . . . 在 java.lang.Thread

Spring 安全性在其他方面工作正常。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:18:23.697

您缺少导入 - 添加

```
import org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils 
```

看起来你也需要这个：

```
import org.codehaus.groovy.grails.plugins.springsecurity.SecurityFilterPosition 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-25T07:48:58.247

@Burt Beckwith 答案是正确的截至 2016 年 11 月 25 日，要添加的进口是

```
import grails.plugin.springsecurity.SpringSecurityUtils
import grails.plugin.springsecurity.SecurityFilterPosition 
```

# sql-server - “以数字方式”对混合值字符串进行排序

> ID：14271967
> 
> 赞同：2
> 
> 时间：2013-01-11T04:58:38.270
> 
> 标签：sql-server, tsql, sorting

我正在寻找一种对门牌号进行排序的方法。数字存储为字符串，虽然大多数是数字，但有些附加了一个字母。例如：

*   1002
*   29C
*   1
*   205
*   105A

有没有办法按照下面的顺序订购这些？

*   1
*   29C
*   105A
*   205
*   1002

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:29:22.293

这就是你想要的：我希望你正在使用`SQL SERVER`

```
select * from tbl order by 
case when 
    PATINDEX('%[^0-9]%',val) = 0 
THEN 
    val
ELSE
    cast(Left(val,PATINDEX('%[^0-9]%',val)-1) as int) 
END 
```

## [现场演示](http://www.sqlfiddle.com/#!3/f83535/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:05:50.183

另一种方法

```
select * from tbl order by
stuff(val+'a',patindex('%[^0-9]%',val+'a'),len(val),'')*1 
```

# objective-c - arc4随机初始化

> ID：14271969
> 
> 赞同：3
> 
> 时间：2013-01-11T04:58:51.603
> 
> 标签：objective-c, arc4random

我正在使用随机数生成作为在objective-c（对于iOS）中最小化函数（使用***Nelder-Mead simplex algorithm ）的过程的一部分。***我之所以使用`arc4random()`它，是因为它似乎在任何地方都被推荐，理由是 a）它不需要播种，并且 b）它提供的随机数比`rand() and random()`. 我使用生成 0 和 1 之间的双打

```
#define ARC4RANDOM_MAX      0x100000000
-(double) Rnd{
return (double)arc4random() / (double)ARC4RANDOM_MAX ; } 
```

但是，为了测试该过程，我需要生成可重复的随机数序列，并且我找不到任何关于初始化方法的参考`arc4random()`。是否`arc4random()`无法初始化以给出可重复的序列？如果是这样，当每个测试都会导致不同的答案时，任何人如何实施自动化单元测试？我需要使用来自的“低质量”随机数`random()`吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:03:32.347

该`arc4random`函数从它无法控制的池中获取随机数。它没有提供可重复性的机制。对于单元测试，您将不得不使用其他东西。

# jquery - Jquery幻灯片切换不适用于多个类

> ID：14271970
> 
> 赞同：1
> 
> 时间：2013-01-11T04:58:59.513
> 
> 标签：jquery, class, slidetoggle

我以前有这个幻灯片切换使用一次列布局。现在我已经为多个网格布局添加了多个 div，事情无法正常工作。

我希望隐藏的内容在单击 h1 时向下滑动。我还试图让整行的背景 100% 宽度的页面变为红色，文本变为白色。目前，我似乎无法将数字更改为白色，也无法仅获得一个条目来扩展背景颜色的整个 100% 宽度变为红色。你能帮我找出问题所在吗？

这是代码笔。

[http://codepen.io/wragen22/pen/Fjesr](http://codepen.io/wragen22/pen/Fjesr)

# android - 如何在 SurfaceView 中将文本旋转 180 度

> ID：14271973
> 
> 赞同：1
> 
> 时间：2013-01-11T04:59:12.153
> 
> 标签：android, surfaceview

我想在 SurfaceView 中绘制一个文本，如下图所示

![在此处输入图像描述](../Images/df7d956be7e59f827bdbd5f7e31b4c4f.png)

我怎样才能做到这一点。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:04:33.697

用以下代码替换您的 onDraw(Canvas canvas) 方法。

```
@Override
protected void onDraw(Canvas canvas) 
{
    canvas.drawColor( Color.WHITE );    

    int cx = 240;    // screenWidth/2
    int cy = 400;    // screenHeight/2

    Paint paint = new Paint();
    paint.setTextSize(30);
    paint.setColor( Color.BLACK );  
    paint.setAntiAlias(true);

    canvas.drawText("Name: A", 20, 40, paint);

    canvas.save();
    canvas.rotate(180, 240, 400);
    canvas.drawText("Name: B", 20, 40,paint);
    canvas.restore(); 
} 
```

# java - 如何从字符串制作矩阵 16 x 16？

> ID：14271974
> 
> 赞同：0
> 
> 时间：2013-01-11T04:59:25.670
> 
> 标签：java

我有一个字符串

```
String word = "FrenciusLeonardusNaibaho"; 
```

当我试图制作这样的矩阵时：

```
char matriks[][] = new char[16][16];
    int k = 0;

    for (int i = 1; i < 16; i++) {
        for (int j = 1; j < 16; j++) {
            matriks[i][j] = word.charAt(k);
            k++;
        }
    } 
```

我收到了这个错误

```
String index out of range: 24 
```

我怎样才能做到这一点？谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T05:00:24.133

您**超出**`word`了at的末尾`word.charAt(k);`。基本上你没有足够的字母来填充你的矩阵。

你可以做这样的事情

```
if(k >= word.length())
   break; 
```

在内循环下方。或者您可以使用此条件将元素初始化为某个默认值。

此外，正如其他人所提到的，i,j 应该从 0 开始，除非您有充分的理由从 1 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:11:11.263

```
char matriks[][] = new char[16][16];
int k = 0;

for (int i = 0; i < 16; i++) {
    for (int j = 0; j < 16; j++) {
        matriks[i][j] = word.charAt(k%word.length());
        k++;
    }
} 
```

所以它可以从头到尾，然后重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:42:34.547

您正在填充 16x16 数组并迭代循环 16x16 次，但您的字长小于 16x16。因此，当 k 等于字长时进行检查，然后终止循环。像这样更改代码。

```
char matriks[][] = new char[16][16];
int k = 0;

for (int i = 1; i < 16; i++) {
    for (int j = 1; j < 16; j++) {
        if(k >=word.length)
            break;
        matriks[i][j] = word.charAt(k);
        k++;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T05:09:20.863

尝试添加

```
if(k >= word.length())
    k = 0; 
```

对于您的内部 for 循环，这将继续从单词的开头填充数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T05:24:16.927

当您尝试在数组、列表、字符串或范围超出其边界的任何内容中读取或写入时，会发生“超出范围”或“超出范围”。当您的字符串仅包含 7 个字符时，您无法读取索引 8 处的字符。这不是你的字符串的 RAM，它会导致 RAM 损坏，就像它有时在 C 数组中发生的那样。

当您设置数组和 for 循环时，请尝试使用容器的大小或长度函数检查您是否仍在字符串的范围内。在字符串的特殊情况下，它是`length`.

我认为您正在尝试拆分存储在字符串中的名称列表。在这种情况下，创建动态容器会更容易，例如 list ( `http://www.easywayserver.com/blog/java-list-example/`)。

这里我有一个小例子。出于这些目的，我更喜欢 while 循环。如果我至少在运行时知道列表的长度而不解释数据，那么 for 循环是一个不错的选择，但不是这样：

```
String names = "Foo Bar";
List<String> seperatedNames = new List<String>();
String name = "";
int i = 0;
while (i < names.length()) {
    if (names.charAt(i) == ' ') { // you can check for upper case char too
        seperatedNames.add(name); // add name to list
        name = ""; // clear name-buffer
        i++; // increment i, else it would produce an infinite loop
    }
    name += names.charAt(i++); // add current char to name-buffer and increment current char
} 
```

我希望我能帮上一点忙。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T05:33:31.563

当然，你肯定会得到这个错误，因为你的单词中的字符只有 24 个字符。

为避免这种情况，您需要检查单词的长度并需要打破所有循环。

试试这个代码。

```
char matriks[][] = new char[16][16];
int k = 0;
int lenght = word.length();
outerloop:

for (int i = 0; i < 16; i++) {
    for (int j = 0; j < 16; j++) {
        matriks[i][j] = word.charAt(k);
        k++;
        if(k >= lenght){
            break outerloop;
        }
    }
} 
```

# ruby-on-rails - 更新单个 ActiveRecord 对象，控制台输出似乎有问题

> ID：14271981
> 
> 赞同：0
> 
> 时间：2013-01-11T05:00:13.053
> 
> 标签：ruby-on-rails, sql-update, rails-activerecord, rails-console

我正在尝试实现一个按钮来更新记录的单个属性（将“活动”布尔值设置为 true）。在网上搜索后，我发现以下代码可以“解决”问题：

```
button_to "Add", movie_path(m, active: true), confirm: "Add this movie?", method: :put, class: "btn" 
```

视图创建按钮就好了，应用程序正确执行命令，通过我在 MoviesController 中的“更新”操作运行：

```
 def update
      @movie = Movie.find(params[:id])
      if @movie.update_attributes(params[:movie])
        flash[:notice] = "Movie was successfully updated"
      else
        flash[:error] = "Movie was not changed"
      end
      redirect_to root_path
    end 
```

在反复单击此按钮并重新启动我的 Thinking Sphinx 引擎几次之后（认为对象仍然出现在我的“非活动电影”表上的原因仅仅是因为需要重新索引集合），我查看了我的控制台输出（我想这就是它的名字。它只是标准输出，它发出了所有的`started GET "/assets..."`mumbo-jumbo，我看到了这个：

```
 Started PUT "/movies/334?m%5B%3Aactive%5D=true" for 127.0.0.1 at 2013-01-10 22:41:41 -0600
    Processing by MoviesController#update as HTML
      Parameters: {"authenticity_token"=>"qpcfMEVttjnQJ3Cv2f+tTYBu3/gujijQtn2+17YVPno=", "m"=>{":active"=>"true"}, "id"=>"334"}
      Movie Load (0.4ms)  SELECT `movies`.* FROM `movies` WHERE `movies`.`id` = 334 LIMIT 1
       (0.1ms)  BEGIN
      Movie Exists (0.6ms)  SELECT 1 AS one FROM `movies` WHERE (`movies`.`title` = BINARY '1 Hope' AND `movies`.`id` != 334 AND `movies`.`rec_form` = 'DVD-Rom') LIMIT 1

       (0.2ms)  COMMIT
    Redirected to http://0.0.0.0:3000/
    Completed 302 Found in 114ms (ActiveRecord: 1.3ms) 
```

查看 Movie Exists 行。`WHERE ... movies.id != 334`...即使它正上方的行使用该 ID 找到记录。这看起来很糟糕吧？只是看看我在这里发布的代码，任何人都可以看到我正在做的事情，让它尝试更新与关联的 movie.id*不匹配的记录吗？*我没有看到任何其他记录被此代码破坏。如果需要任何其他文件进行检查，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:27:12.140

你的参数是

```
{"authenticity_token"=>"qpcfMEVttjnQJ3Cv2f+tTYBu3/gujijQtn2+17YVPno=",
             "m"=> {":active"=>"true"}, "id"=>"334"} 
```

因此

```
params[:m] = {":active"=>"true"} 
```

所以改变

```
@movie.update_attributes(params[:movie]) 
```

至

```
@movie.update_attributes(params[:m]) 
```

它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:22:49.767

看起来您对电影标题的唯一性进行了验证。电影存在线可能还可以。

参数很奇怪 - 为什么 params 包含“m”参数。您正在寻找“电影”参数和“m”对象应该是电影。我会调查的。

这是一个 button_to 示例...

```
= button_to 'test', movie_path(m, 'movie[active]' => true), confirm: "Add this movie?", method: :put, class: "btn" 
```

但是，我不认为 button_to 是这里的最佳选择。它只是构建一个表单，您可以使用以下不需要硬编码的属性名称来代替...

```
= form_for [@movie] do |f|
    = f.hidden_field :active, value: true
    = f.submit 'Add', :confirm => 'Add this movie?' 
```

# php - 建议在 PHP 中搜索数组中字符串的有效方法

> ID：14271984
> 
> 赞同：0
> 
> 时间：2013-01-11T05:00:25.183
> 
> 标签：php, preg-match

我正在使用`jQuery autocomplete`，以下是我的代码

**prg1_view.php**

```
<div id="j_autocomplete">
<label>Search</label><input id="search" type="text">
</div>
$( "#search" ).autocomplete({
source: "prg1.php"      
}); 
```

**prg1.php**

```
$q = strtolower($_GET['term']);
$q = '/'.$q.'/';

$arr1 = array('a'=> 'apple','b'=> 'boy','p'=> 'pineapple');
$arr2 = array();

foreach($arr1 as $key => $value)
{
    if(preg_match($q, $value))
    array_push($arr2, $value);
}

echo json_encode($arr2); 
```

当我试图搜索*苹果*时，*苹果*和*菠萝*都弹出了，我得到了预期的结果，但是还有其他更好的方法必须实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T05:03:10.630

对于那种难以置信的基本字符串匹配，你最好用一个简单的

```
if (strpos($q, $value) !== FALSE) {
   array_push(...);
} 
```

并为自己节省正则表达式开销。当然，如果您只需要与数组内容而不是子字符串完全匹配，还有更好的方法，例如`in_array()`.

如果您坚持使用正则表达式，请[`preg_grep`](http://php.net/preg_grep)改用，它可以在没有循环的情况下执行您正在执行的操作：

```
$matches = preg_grep('/'. preg_quote($_GET['term']) . '/', $arr1);
echo json_encode($matches); 
```

# ruby - 在 rails3 中使用回形针宝石

> ID：14271987
> 
> 赞同：5
> 
> 时间：2013-01-11T05:01:07.827
> 
> 标签：ruby, ruby-on-rails-3, paperclip

在 rails3 中使用回形针 gem，同时上传了两个图像副本，其中一个具有空条目，另一个是数据库中的原始图像，因为我在 localhost/phpmyadmin 中进行了检查。这个问题不必要地填充了我的数据库。已经找了好几天了。审查了许多关于多个图像的答案，但没有人提到这个问题。

我已遵循此代码[https://github.com/websymphony/Rails3-Paperclip-Uploadify](https://github.com/websymphony/Rails3-Paperclip-Uploadify)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T19:31:56.207

Paperclip 还将实际图像数据上传到我数据库中的字段图像中。我不得不对其进行调整以将文件名保存在数据库的 image_file_name 字段中。

这是我的控制器，它从上传表单中保存图像。

```
#paperclip replaces spaces with _
formatted_filename = params[:clothe][:image].original_filename
formatted_filename.gsub!(/\s/,'_')

#hook in image processing
#set type of upImg, formUpload (APIUpload, scrapeUpload, mobileUpload)
image = UploadImage.new(formatted_filename, Rails.root.to_s + '/public/products/', @clothe.id)
image.processImage 
```

这是我的模型

```
class Product < ActiveRecord::Base
  attr_accessible :description, :price, :title, :image, :image_file_name, :published

  has_attached_file :image,
    :styles => {
    :thumb => "100x100#",
    :small  => "150x150>",
    :medium => "200x200" },
    :default_url => '/assets/missin.gif',
    :path => Rails.root.to_s + "/public/products/:filename",
    :url => "/products/published/:basename.:extension" 
```

# svn - 使用 hgsubversion 时重新定义分支、标签和主干的位置

> ID：14271988
> 
> 赞同：1
> 
> 时间：2013-01-11T05:01:09.543
> 
> 标签：svn, mercurial, hgsubversion

我正在尝试使用 hgsubversion 将一个相当大的 Subversion 存储库转换为 Mercurial。我几乎让它工作了，只是没有捕获分支和标签，最终的 Mercurial 存储库如下所示：

```
Repo
   > Trunk
       > Code
       > Database
       > Documentation 
```

我正在运行的命令是：

```
hg clone --startrev 5802 --config hgsubversion.authormap=authors.txt --config hgsubversion.defaulthost=me.com file:///C:/Users/me/projects/MyProjectRepo MyProjectRepo-hgsvn5802 
```

我的 Subversion 存储库实际上是文件系统上的一个镜像和更新的本地镜像。这样做是因为直接访问 URL 时运行 hgsubversion 或 convert 速度非常慢。存储库的结构是这样*的（注意大写的第一个字母）*。

```
Repo
   > Branches
   > Tags
   > Trunk
       > Code
       > Database
       > Documentation 
```

关于我可能做错了什么的任何想法？大写名称是否会导致自动分支检测失败？我可以覆盖 hgsubversion 查找主干、标签和分支的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:34:12.230

大写字母绝对是这里的问题。最简单的选择可能是编辑 hgsubversion 源代码，以便它查找大写名称，但我实际上欢迎一个补丁来使主干/标签/分支名称可配置。

我可以发誓我们有这个功能，但我没有在代码中看到它，所以我可能只是记得过去的提议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T17:31:00.733

我自己没有尝试过这些，但是[hgsubversion 文档](https://bitbucket.org/durin42/hgsubversion/src/tip/hgsubversion/help/subversion.rst)描述了一种配置自定义 Subversion 结构的方法。

> hgsubversion.layout
> 
> 设置存储库的布局。**标准**假定一个正常的主干/分支/标签布局。**single**表示将整个存储库转换为单个分支。如果服务器上的指定目录中存在任何主干、分支或标签，默认值**auto**会导致 hgsubversion 采用标准布局。**custom**导致 hgsubversion 读取**hgsubversionbranch**配置部分以确定存储库布局。

还要检查文档的`hgsubversionbranch.*`、`hgsubversion.tagpaths`和`hgsubversion.branchdir`部分。

# git - git 分支删除 - 钩子

> ID：14271989
> 
> 赞同：3
> 
> 时间：2013-01-11T05:01:17.717
> 
> 标签：git, github, branch, hook

我准备了很多关于保护远程分支的文章...

但是，我想在 git hook 中捕获以下 LOCAL repo 命令：

```
git branch -d abranchthatshouldnotbedeleted 
```

我想挂钩该命令并根据我制作的“受保护分支”的分支列表文件对其进行分析，并进行简单检查以允许或拒绝删除。

我的某些分支现在被锁定在一个声明中，它们现在被管理并且必须受到保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:12:05.790

由于 GitHub[不允许*pre* -receive钩子](https://stackoverflow.com/questions/10864903/does-github-allow-pre-receive-hooks)（仅[post-receive](https://help.github.com/articles/post-receive-hooks)钩子），我建议推送到受[Gitolite保护的](https://github.com/sitaramc/gitolite)*中间*本地存储库（[授权层](http://sitaramc.github.com/gitolite/auth.html)，通过 ssh 或 http 访问您的 git 存储库）。

Gitolite 可以帮助编写各种访问规则，包括[保护分支不被删除](https://stackoverflow.com/a/13275736/6309)。

如果允许推送，则提交后挂钩可以自动将其推送到 GitHub。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:47:13.003

Git（当前）没有可以用来做你想做的事情的钩子。有关`git help hooks`可用挂钩的列表，请参阅。

您可能需要考虑不同的方法。例如，您可以包装`git`一个包装脚本或 shell 函数，它们自己进行解析以防止您删除分支：

```
git() {
    [ "${1}" != branch ] ||
    { [ "$2" != -d ] && [ "$2" != -D ]; } ||
    case $3 in
        abranchthatshouldnotbedeleted) false;;
        *) true;;
    esac ||
    { printf %s\\n "ERROR: branch $3 must not be deleted" >&2; exit 1; }
    command git "$@"
} 
```

上面的 shell 函数非常原始，不处理类似的调用`git --git-dir=/foo.git branch -d abranchthatshouldnotbedeleted`，但你明白了。也许您可以使用`git rev-parse --parseopt`它来使其更健壮。

# clojure - CompilerException java.lang.IllegalArgumentException：键必须是整数，

> ID：14271990
> 
> 赞同：-1
> 
> 时间：2013-01-11T05:01:20.013
> 
> 标签：clojure

我一直有这个错误，但我似乎无法解决它。

```
(ns stack)

(def output [[1, 2 ,3]])
(def condensedrecords 0)
(def i 0)
(def currentDateTime 0)
(def timeDiffinSeconds 0)
(def secondLastOutputValue 0)
(def outlier [])
(def isOutlier false)
(def timeDiffinSeconds 20)
(def for1 true)
(def ab [1])

;just for testing 
(def a [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])
(def b [a, a])

(def NoOfLines 3)
(defn getOutlierConfidence [p i]
  0.5)

 (defn processNewTransaction [p i] 1)
(defn exceedTimeThresholdwDistance [p i] false)

(defn doRunThroughSplit [vector]
(loop [i 1
       condensed 0
       output1 output
       outlier1 outlier] 

  (if (< i (- NoOfLines 1))  
    (let [p ((peek output1) 1)] ;function doesnt work 
      (cond 
        ;cond1
        (= ((vector i) 27) ((peek output1) 1)) (do(let [condensed (inc condensed)]
                                                      (println "in cond1")
                                                      (recur (inc i) condensed output1 outlier1)))
        ;cond2
        (> timeDiffinSeconds 480) (do (let [i (processNewTransaction p i)] (println "in cond2") (recur (inc i) condensed output1 outlier1)))

        ;cond3
        (> timeDiffinSeconds 600) (do (let [i (processNewTransaction p i)] (println "in cond3") (recur (inc i) condensed output1 outlier1)))

        ;cond4
        (exceedTimeThresholdwDistance p i) (do (let [i (processNewTransaction p i)] (println "in cond4") (recur (inc i) condensed output1 outlier1)))

        (and (not= ((peek output) 1) ((vector i) 27)) (not= secondLastOutputValue ((vector i) 27))) 
                       (do ;perform the following statements

                           (println "in cond5")
                           (let [secondLastOutputValue ((peek vector) 27)]                                                               
                            ***output1 (conj ([output1] ab))]*** ;error starts at here/// ab is a vector by commenting this line the error is removed
                             (println "reached")
                                 (recur (inc i) condensed output1 outlier1)))

        );cond ending 
    );let ending
[condensed, output1, outlier1]);if ending
);loop ending
);func ending

(def sa (doRunThroughSplit b)) 
```

该错误已被注释掉，即行 ***output1 (conj ([output1] ab))*** 但我似乎根本无法解决此错误。大部分代码看起来都很好，但是一旦在 cond5 中遇到 let 语句，就会出错。

输出将是

在 cond5 ///这里结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:49:48.543

似乎您正在从某种命令式语言（Java？）翻译一些代码，因为有些东西在 clojure 中是完全多余的。

首先，大多数第一个定义（`def`开头的多个 s）根本不需要。您不必在 clojure 中以这种方式定义变量：所有变量都会自动引入词法范围，并带有相应的结构（`let`, `loop`,`defn`用于局部参数等），并且`def`应该创建类似于全局变量的东西。

接下来，您打算让这些构造做什么：`((peek output1) 1)`, `((vector i) 27)`? 它们完全没有意义。如果您想通过索引从集合中获取元素，您必须执行类似`(get collection 123)`甚至`(collection 123)`提供`collection`某个集合的操作，例如向量。

最后，你的问题。`(conj)`函数真的不应该这样调用。[来自文档的一段](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/conj)：

```
Usage: (conj coll x)
       (conj coll x & xs)

conj[oin]. Returns a new collection with the xs
'added'. (conj nil item) returns (item).  The 'addition' may
happen at different 'places' depending on the concrete type. 
```

看，它应该用一个集合作为第一个参数来调用，你希望插入到这个集合中的元素作为所有其他参数。所以，如果你想添加`ab`到`output1`集合中，你应该做`(conj output1 ab)`.

但是请注意，修复`conj`不会使您的代码正常工作。代码中有更多错误（例如我在回答的第二点中提到的错误）需要修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:21:35.927

首先你有一个错字。`conj`至少需要两个参数`(conj collection elem1 ...)`。但是只有一个参数`([output1] ab)`试图获取向量`ab`的第 - 个元素。`[output1]`所以`ab`必须是一个整数，但不是你的情况。

# c# - 使用运行时类型的泛型方法

> ID：14271992
> 
> 赞同：0
> 
> 时间：2013-01-11T05:01:43.853
> 
> 标签：c#, generics

我正在尝试在运行时迁移带有实体框架的数据库。
这就是你通常会这样做的方式：

```
Database.SetInitializer<TContext>(new MigrateDatabaseToLatestVersion<TContext,TMigrationsConfiguration>);
            } 
```

但是，直到运行时我才知道 TContext 或 TMigrationsConfiguration 。

我将如何使用运行时类型执行此方法？

* * *

***更新 1***

@Alexander Balte 的建议让我开始使用接口 IDatabaseInitializer

所以这编译没有错误：

```
foreach (IDatabaseInitializer<DbContext> initializer in moduleNeedingMigration.initializers)
{
     System.Data.Entity.Database.SetInitializer(initializer);
} 
```

但是我不能这样做：

```
public IEnumerable<IDatabaseInitializer<DbContext>> initializers
    {
        get
        {
            List<IDatabaseInitializer<Module1Context>> list = new List<IDatabaseInitializer<Module1Context>>();
            MigrateDatabaseToLatestVersion<Module1Context, Configuration> init = new MigrateDatabaseToLatestVersion<Module1Context, Configuration>();
            list.Add(init);
            return list;//Error cannot convert type List<IDatabaseInitializer<Module1Context>> to IEnumerable<IDatabaseInitializer<DbContext>>
        }
    } 
```

**注意**Module1Context 继承 DbContext

* * *

***更新 2***

这编译：

```
return list.Cast<IDatabaseInitializer<UpfContext>>(); 
```

但是，当我运行应用程序时，出现此错误：

```
System.Data.Entity.MigrateDatabaseToLatestVersion`2[Module1.Models.Module1Context,Module1.Migrations.Configuration]' to type 'System.Data.Entity.IDatabaseInitializer`1[System.Data.Entity.DbContext]'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:08:12.250

如果您知道所有可能的集合，`TContext`或者`TMigrationsConfiguration`您可以创建类似工厂方法的东西，它将`MigrateDatabaseToLatestVersion`通过具体类型返回您`TContext`and `TMigrationsConfiguration`。

就像是：

```
 private static Dictionary<Tuple<Type, Type>, Func<object>> _map = new Dictionary<Tuple<Type, Type>, Func<object>>();

    public static MigrateDatabaseToLatestVersion<TContext, TMigrationsConfiguration> CreateMigrateDatabaseToLatestVersion<TContext, TMigrationsConfiguration>(TContext type, TMigrationsConfiguration configuration)
    {
        Type contextType = typeof (TContext);
        Type configurationType = typeof(TMigrationsConfiguration);

        Func<object> builder;
        if (!_map.TryGetValue(new Tuple<Type, Type>(contextType, configurationType), out builder))
            throw new KeyNotFoundException();

        return (MigrateDatabaseToLatestVersion<TContext, TMigrationsConfiguration>)builder();
    } 
```

字典`_map`应该使用所有可能的通用参数类型集进行初始化。喜欢：

```
_map[new Tuple<Type, Type>(typeof(MyDbContext), typeof(MyDbMigrationsConfiguration)) = () => new MigrateDatabaseToLatestVersion<MyDbContext, MyDbMigrationsConfiguration>(); 
```

# arrays - 值表中缺失数据的线性插值

> ID：14271993
> 
> 赞同：0
> 
> 时间：2013-01-11T05:01:48.827
> 
> 标签：arrays, perl, loops, interpolation, subroutine

这是我的起点数据文件的摘录：

```
Marker      Distance_1  Distance_2  ID
.
.
.
30          13387412    34.80391242 seq-SN_FIRST
31          13387444    34.80391444 seq-SN_Second
31.1             
31.2             
32          13387555    39.80391    seq-SN_Third
.
.
. 
```

这是一个制表符分隔的文件，包含多行，每行四个元素。第一行是标题。之后，无数行数据。垂直点实际上不在真实文件中，但它们在这里只是为了表示与显示的实际行类似的数据出现在明确显示的行的示例之前和之后。

一些数据行是“满的”，也就是说，所有四个单元格条目都包含一些东西。其他行是“空白”，只有第一个实际条目，但后面是 3 个制表符分隔的单个空格。空白行中的那些空白需要“填充”。填充将通过线性插值完成，使用前一行和紧后行的相应单元格条目。例如，第 2 列中的缺失将使用前一行的值和后一行的`Distance_1 values`值进行插值。对于第 3 列的值也是如此。此处仅忽略第 4 列的值。`13387444``13387555`

该脚本的第一个目标是识别需要填充的数据块及其两侧的“完整”行。空行将包含 3 个选项卡式单个空格，并以这种方式进行标识。一旦找到，连续的空行集合加上侧翼的完整行被发送到子程序进行插值。

```
#!/usr/bin/perl
use strict;
use warnings;

die "usage: [ map positions file post SAS ]\n\n" unless @ARGV == 1;

my @file = ();

while (my $line = <$ARGV[0]>) {
  chomp $line;
  push(@file, $line);
}

my @consecutive_lines = (); # array collects a current set of consecutive lines requiring linear interpolation
my @filled = ();    # my final array, hopefully correctly filled in

#####
# search for consecutive set of lines in @file
#####

for (my $i = 0; $i < $#file; $i++) {          #  $#file returns the index of the last element in @file

  if ($file[$i] !~ /(?:\t\s){3}/) {           # if not a blank line
                                              # but a "full line"
    push(@filled, $file[$i]);                 # push the header and full lines, until...
  }

  elsif ($file[$i] =~ /(?:\t\s){3}/) {        # ...a blank line is found

    push (@consecutive_lines, $file[$i - 1]); # push preceding full line into array

    while ($file[$i] =~ /(?:\t\s){3}/ and $i < $#file) {  # keep pushing lines, so long as they are blank
                                                          # or end of file
      push(@consecutive_lines, $file[$i++]);
    }

    push(@consecutive_lines, $file[$i]) ;     # else we reach next full line, so push it into array

    my @fillme = linearInterpolation(@consecutive_lines); # send set of lines out for filling

    push(@filled, @fillme);                   # push filled in set of lines into the final array

    @consecutive_lines = ();                  # reset or undef array @consecutive_lines for next cycle

  }    # end of elsif

}    # end of for loop 
```

感谢用户@Kenosis 对上述内容提供了很多帮助，我已经对其进行了修改（希望不会被破坏）。

接下来是线性插值。正是在这里，我试图将脚本的第一阶段链接到第二阶段。到目前为止，它运行得并不好。

我的目标是将数组`@incoming`交给子程序。然后将该数组拆分，以便实际的单元格条目是“可见的”并且可以由该数组索引，并被调用。我一直在试图弄清楚如何为第 2 列的值执行此操作`Distance_1`。我觉得这个脚本很接近，并且在计算插值后开始偏离。

```
#####
# subroutine linear interpolation
#####

sub linearInterpolation {
  my @incoming = @_;    # array of consecutive set of lines

  my @splitup;                  # declare new array, will be a "split up" version of @incoming
  my ($A, $B, $C, $D, $E);      # variables for linear interpolation
  my @fillme;                   # declaring the "emtpy" array to be filled in
  my @dist_1_fills;             # array of interpolated values for dist_1

  for (my $i = 0;
    $i < scalar @incoming; $i++)     # loop to split up lines of @incoming
  {                                  # into indexed cell entries
    chomp $incoming[$i];             # and make new array of them
    my @entries = split('\t', $incoming[$i]);
    push(@splitup, @entries);
  }

  $A = $splitup[1];                   # cell entry in column 2 of preceding full line
  $B = $splitup[-3];                  # cell entry in column 2 of succeeding full line

  $C = $splitup[2];                   # cell entry in column 3 of preceding full line
  $D = $splitup[-2];                  # cell entry in column 3 of succeeding full line
  $E = scalar @incoming - 1;          # equals number of lines in the set minus 1

  for (my $i = 1; $i < $E; $i++) {    # need to start finding appropriate
                                      # number interpolated values, given number of
    my @dist_1_fills =
        interpvalues($A, $B, $E, $i); # of lines in consecutive set of lines

    for ($i = 0; $i < scalar @splitup; $i += 4) {
      push(@fillme, $splitup[$i], $dist_1_fills[$i], "dist_2_fills", "--");
                                      # fourth column values will be ignored or filled with --.
                                      # "dist_2_fills" just occupying it's proper spot until I can figure out distance 1 fills
    }
  }
}

#########

sub interpvalues {                  # subroutine to find interpolated values
  my ($A, $B, $E, $i) = @_;
  my $dist_1_answers = (($B - $A) / ($E)) * $i + $A;
  return $dist_1_answers;
} 
```

代码在处理查找插值并将它们发送回代码的第一部分以最终填充数据集的第二部分变得混乱。我认为我最大的（尽管可能不是我唯一的）问题是在第二个子例程中计算出正确的值之后尝试用正确的值填充空白行。

非常感谢任何提示和线索！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:14:22.823

这个程序会做你需要的。它期望 inout 文件名作为命令行上的参数。

```
use strict;
use warnings;

my @saved;
my @needed;

while (<>) {
  chomp;
  my @fields = split /\t/;

  # Pass hrough headers and junk
  unless ($fields[0] and $fields[0] =~ /\d/) {
    print "$_\n";
    next;
  }

  # Save x-value for records without a y-value
  if ($fields[1] !~ /\d/) {
    push @needed, $fields[0];
    next;
  }

  # We have a filled-out row. Calculate any intermediate missing ones
  if (@needed) {
    if ($saved[0] == $fields[0]) {
      die sprintf qq(Duplicate marker values %.1f at line %d of "%s"\n), $saved[0], $., $ARGV;
    }
    my ($a1, $b1) = solve_linear(@saved[0,1], @fields[0,1]);
    my ($a2, $b2) = solve_linear(@saved[0,2], @fields[0,2]);
    while (@needed) {
      my $x = shift @needed;
      my $y1 = $a1 * $x + $b1;
      my $y2 = $a2 * $x + $b2;
      print join("\t", $x, $y1, $y2), "\n";
    }
  }

  print "$_\n";
  @saved = @fields;
}

sub solve_linear {
  my ($x0, $y0, $x1, $y1) = @_;
  my ($dx, $dy) = ($x1 - $x0, $y1 - $y0);
  my $aa = $dy / $dx;
  my $bb = ($y0 * $dx - $x0 * $dy)  / $dx;
  return ($aa, $bb);
} 
```

**输出**

```
Marker  Distance_1  Distance_2  ID
.
.
.
30  13387412  34.80391242 seq-SN_FIRST
31  13387444  34.80391444 seq-SN_Second
31.1  13387455.1  35.303913996  --
31.2  13387466.2  35.803913552  --
32  13387555  39.80391  seq-SN_Third
.
.
.
Tool completed successfully 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:11:11.710

我将代码修改为此，以便线性插值不是基于第一列中的值，而是基于第二列和第三列中的值。特别感谢用户@Kenosis 和@Borodin。我已经接受了 Kenosis 对上一个问题的回答，并且我在这里接受了 Borodin 的回答，尽管我在“回答你自己的问题”部分发布了这个修订。在这里发布修订是否可以接受？我浏览了有关此问题的常见问题解答，但尚未发现任何相关内容。

```
#!/usr/bin/perl
use strict; use warnings;

my @saved;
my @needed;

while (<>) {
  chomp;
  my @fields = split /\t/;

    # Does the current line actually exist AND does it contain one or more digits.
    unless ($fields[0] and $fields[0] =~ /\d/) {
    # If no, this is the header, so print it. If yes, advance.
    print "$_\n";
    #after printing header, go back to <> and read in next line.
    next;
  }

  # Is the second cell of the current line devoid of digits?
  if ($fields[1] !~ /\d/) {                
  # If no, advance. If yes, remember $field[0], the Marker.
  push @needed, $fields[0];              
  # After pushing, go back to <> and read in next line.
  next;
 }

  # If we are here, we must have a filled-out row.
  # Does @needed have any values? If no, advance. If yes,
  if (@needed) {
    if ($saved[0] == $fields[0]) {
      die sprintf qq(Duplicate marker values %.1f at line %d of "%s"\n), $saved[0], $., $ARGV;
     }
    # Else send preceding dist_1 value, succeeding dist_1 value,
    # preceding dist_2 value, succeeding dist_2 value, 
    # and number of emtpy lines to subroutine.
    my ($dist_1_interval, $dist_2_interval) = interval_sizes($saved[1], $fields[1], $saved[2],   $fields[2], scalar @needed);     
    # Current size of @needed is saved as $size and is used to help with iteration.
# So long as @needed contains values...
my $size = scalar @needed;
while (@needed) {
  # ...remove left-most Marker value from array @needed.
  my $x = shift @needed;
  # Interpolated values for dist_1 and dist_2 are
  # (respective interval size x iteration of while loop) + preceding values.
  my $new_dist_1 = ($dist_1_interval * (1 + ($size - (scalar @needed + 1)))) + $saved[1];
  my $new_dist_2 = ($dist_2_interval * (1 + ($size - (scalar @needed + 1)))) + $saved[2];
  print join("\t", $x, $new_dist_1, $new_dist_2, "--"), "\n";
  }
}     
      # We are here since current line is already a filled-in row.
      print "$_\n";
      # Print this row and assign it to @saved. Return to <>.
      @saved = @fields;
} 

sub interval_sizes {
  # $A = preceding dist_1, $B = succeeding dist_1, 
  # $C = preceding dist_2, $D = succeeding dist_2,
  # $E = number of needed distances.
  my ($A, $B, $C, $D, $E) = @_; 
  # I need an interval size for dist_1 based on difference between $B and $A.
  my $dist_1_interval = ($B - $A)/($E + 1);
  # I need an interval size for dist_2 based on difference between $D and $C.
  my $dist_2_interval = ($D - $C)/($E + 1);
  return ($dist_1_interval, $dist_2_interval);
 } 
```

# jquery - 选择选择元素中的选项时如何立即获取所选值？

> ID：14271999
> 
> 赞同：0
> 
> 时间：2013-01-11T05:02:34.993
> 
> 标签：jquery, html, onclick

一旦用户在 html 的选择元素中选择一个选项，我想相应地显示一些内容。因此，当用户做出选择时，我需要立即通过 jquery 获取选定的选项值。我的 jquery 如下（很简单）：

```
 $('select').live('click', function(event){
            console.log($('select').val());
        }); 
```

但问题是，每次我点击选择元素时，它都会先显示它的当前值，然后在点击选项时显示你选择的值，这不是我想要的。我不需要当前的值，我只想要你这次选择的值。那么我应该如何在jquery中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:06:46.623

您应该监听`change`事件，并`this`在您的处理程序中使用引用当前选择元素的关键字，如果您的页面中有多个选择元素，则`$('select').val()`仅返回页面中第一个选择元素的值。另请注意，`live`不推荐使用方法，如果要委托事件，可以改用`on`方法。

```
$(document).on('change', 'select', function(event){
    console.log( this.value );        
    // console.log( $(this).val() );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:07:00.203

将其更改为选择框更改事件。试试下面的代码

```
$('select').live('change', function(event){
            console.log($(this).val());
        }); 
```

（或者）

```
$('select').change(function(event){
                console.log($(this).val());
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T05:08:55.453

试试这个：

```
 $('select').change(function(event){
         console.log($('select').val());
    }); 
```

**[JSFiddle](http://jsfiddle.net/Su4rH/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T05:12:46.200

您可以像这样获取选定的值：

```
$('#select').change(function() {
        var selectVal = $('#select :selected').val();
    }); 
```