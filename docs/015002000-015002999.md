# StackOverflow 问答 15002000-15002999

# android - 以变 量为名称的动态图像

> ID：15002000
> 
> 赞同：1
> 
> 时间：2013-02-21T12:13:31.743
> 
> 标签：android, imageview

当我从数组 (arr[r1]) 中获得与图片名称匹配的变量时，我正在尝试显示图像。我尝试使用它，但它没有用：

```
ImageView imageView = (ImageView)findViewById(R.id.imageView);
imageView.setImageDrawable(getResources().getDrawable(getResources().getIdentifier("drawable/"+arr[r1], "drawable", getPackageName()))); 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T17:52:34.750

```
String filePath = getActivity().getFileStreamPath("myimage.png").getAbsolutePath();

img.setImageDrawable(Drawable.createFromPath(filePath)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:41:02.573

这对我来说很好

```
imageView.setImageDrawable(getResources().getDrawable(getResources().getIdentifier("@drawable/ic_launcher", "drawable", getPackageName()))); 
```

对于你的情况使用这个

```
imageView.setImageDrawable(getResources().getDrawable(getResources().getIdentifier("@drawable/"+arr[r1], "drawable", getPackageName()))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:24:42.253

替换这个

```
imageView.setImageDrawable(getResources().getDrawable(getResources().getIdentifier("drawable/"+arr[r1], "drawable", getPackageName()))); 
```

和

```
imageView.setImageDrawable(getResources().getDrawable(getResources().getIdentifier(arr[r1], "drawable", getPackageName()))); 
```

希望对你有效。

# apache-flex - publishNotify 后流中没有 FPS

> ID：15002001
> 
> 赞同：0
> 
> 时间：2013-02-21T12:13:36.747
> 
> 标签：apache-flex, video-streaming, live-streaming

我在显示实时用户流时遇到困难。

当我将流附加到 Video 对象中时，一切正常。但是当用户流停止发布然后再次发布时（例如在“挂断”相机之后）我看到该流使用带宽但我没有得到任何 fps。

收到“NetStream.Play.PublishNotify”后，我正在直播 ns.play。

我究竟做错了什么？

# magento - 将magento博客文章标识符自动设置为标题

> ID：15002002
> 
> 赞同：0
> 
> 时间：2013-02-21T12:13:36.657
> 
> 标签：magento, blogs

Magento 中是否有自动将博客文章标识符设置为博客文章标题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:41:52.973

在您的 Block`_prepareLayout()`方法中，编写下面的代码行以使用您的博客文章 ID 设置页面的标题。

```
$this->getLayout()->getBlock('head')->setTitle($id); 
```

# java - 在对象的 javascript 下拉列表中显示值

> ID：15002003
> 
> 赞同：1
> 
> 时间：2013-02-21T12:13:40.173
> 
> 标签：java, javascript, drop-down-menu

我在 javascript 中有一个下拉列表，它是根据对象的“名称”字段填充的。是否可以将整个对象放在下拉列表中并只显示名称？我问的原因是因为我想根据用户选择的内容更改另一个下拉列表的值，并且该信息已经在第一个对象中可用（在我只删除名称之前）。

所以目前我有这个（Java控制器）：

```
 List<String> hostsList = new ArrayList<String>();

 for (Client client : adminService.getClients()){
     hostsList.add(client.getName());
 }

 result.put("hostsList", hostsList); 
```

然后在javascript方面：

```
<form:form id="iForm" method="post"
action="${pageContext.request.contextPath}/host"
commandName="hostsForm">
<td valign="top">Hosts:</td>
<td valign="top"><form:select path="uSetHostName">
<form:option value="NONE" label="--- Select ---" />
<form:options items="${hostsList}" />
</form:select>
</td> 
```

那么如何将整个对象放入下拉列表并仅显示其名称？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:56:00.450

据我所知，您要求将 Java 对象转换为 JavaScript 对象，以便稍后在 JavaScript 中使用该对象来驱动下拉值。

有几种方法可以做到这一点。第一种方法是将每个 Java`Client`对象表示为一个 JavaScript 对象，然后在 JavaScript 中填充两个下拉列表。这可能是使用某种 JSON 库（如[Gson](http://code.google.com/p/google-gson/)或[Jackson](http://jackson.codehaus.org) ）最简单的方法。这是一个使用 JQuery 和 Gson 的示例：

```
<script lang="text/javascript">
    var clients = <%= new Gson().toJson(clients) %>;

    // Fill the first dropdown.
    $("#myDropdown").empty();
    $.each(clients, function() {
        $("<option/>").attr("value", this.id).text(this.name).appendTo("#myDropdown");
    });

    $("#myDropdown").on("change", function(event) {
        var selectedClientId = $("#myDropdown").val();
        var client = $.grep(clients, function(client) {
            return client.id = selectedClientId;
        });
        $("#myOtherDropdown").val(client.someOtherValue);
    });
</script>

...

<select id="myDropdown" name="..."></select>

...

<select id="myOtherDropdown" name="..."></select> 
```

第二种方法是完全按照您现在正在做的事情做，然后将`Client`填充另一个下拉列表所需的最少量对象放入 JavaScript 代码中。看起来像这样：

```
<script lang="text/javascript">
    var clientIdToOtherValueMap = {
        <%
        for (Client client : clients) {
            %>
            '<%= client.id %>': '<%= client.otherDropdownId %>',
            <%
        }
        %>
        '': ''
    };

    // Fill the first dropdown.
    $("#myDropdown").on("change", function(event) {
        $("myOtherDropdown").val(clientIdToOtherValueMap[$("#myDropdown").val()]);
    });
</script>

...

<select id="myDropdown" name="..."></select>

...

<select id="myOtherDropdown" name="..."></select> 
```

希望这可以帮助您入门！

# ios - 在 UIPageViewController 中保留以前的页面

> ID：15002005
> 
> 赞同：3
> 
> 时间：2013-02-21T12:13:41.973
> 
> 标签：ios, uipageviewcontroller

![马赛克书](../Images/cc16d383c0bc13d59da33cf7d557a439.png)

所以我想创建一个类似上图的界面（它是马赛克应用程序的快照）。当你翻页时，这就是发生的行为。 ![马赛克书被翻转](../Images/2833312906996ad8b227123f2819f03e.png)

所以这里的不同之处在于，一旦您翻页，封面（黑色部分）仍然可见（封面也是可翻转的，而不仅仅是静态资产）。在 UIViewController 中，当我翻转页面时，它会卸载上一个视图。那么我该如何实施呢？任何朝着正确方向的帮助或推动将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:01:25.233

所以没有对此的回复，但这次这个问题有一个赞成票，我假设有人可能会偶然发现这个问题。所以这就是我的做法，我使用了 3 个不同的 UIPageViewControllers，分别用于封面、页面和封底。这将使您在翻阅页面时可以看到封面。谢谢。

# php - 以正确的方式偏移帖子并更改 WP_query

> ID：15002006
> 
> 赞同：0
> 
> 时间：2013-02-21T12:13:45.283
> 
> 标签：php, wordpress

我在订购循环时遇到了一些麻烦！我想以倒计时样式（5、4、3、2、1）显示帖子，但使用元数据和用户输入的数据。

我有这个数据：

```
Post A with meta data (score = 2)
Post B with meta data (score = 4)
Post C with meta data (score = 6)
Post D with meta data (score = 8)
Post E with meta data (score = 10) 
```

示例用户想要显示前 3 个倒计时，因此 $user_input = 3。

然后页面应显示：帖子 C、帖子 D、帖子 E。（按元分数排序，最后显示最佳分数）。

我有一个 wp_query 循环：

```
 $args = array('meta_key' => 'score', 'orderby' => 'meta_value_num', 'order' => 'ASC', 'posts_per_page' => $user_input);
   $qry= new WP_Query( $args );
        $count_posts = $qry->post_count; 
        $offset = $count_post - $user_input
        while ( $qry->have_posts()  ) : $qry->the_post();
              // echo stuff 
```

它可以工作，除了因为它设置为 order=ASC 并且每页帖子现在设置为 3（当类别中有 5 个帖子时）它显示帖子 A、帖子 B、帖子 C。这就是我需要的显示除了它应该是 C,D,E。

我以为我需要抵消 wp_query，但我无法在 args 数组中添加“偏移量”，因为我不知道该类别中有多少帖子。我需要在 WP_Query 之后做一个 post_count 并减去 user_input 以知道我需要抵消多少。所以这就是为什么我把计算放在 $offset 上。

我的问题是。如何以正确的方式更改 WP_query？是一个

```
 query_posts('offset'.$offset.'&showposts'.$user_input) 
```

在计算偏移量之后是一种不好的方法，因为它正在执行另一个查询？

有没有办法在 wp_query 设置后轻松添加参数？

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:40:25.737

一个快速修复方法是将查询中的顺序更改为“DESC”而不是“ASC”。这将为您提供 3 个最大的分数。然后您可以使用数组中的帖子获取帖子，`$qry->get_posts()`但它们的顺序仍然错误。只需`array_reverse()`按您想要的顺序对其进行排序。循环中的唯一区别是您通常循环遍历数组等项目并使用[setup_postdata()](https://codex.wordpress.org/Function_Reference/setup_postdata)函数而不是`$qry->the_post()`

```
<?php

// Set order to DESC
$args = array('meta_key' => 'score', 'orderby' => 'meta_value_num', 'order' => 'DESC', 'posts_per_page' => $user_input);

$qry = new WP_Query( $args );

// Fetch the posts and reverse it to get the wanted order
$posts = array_reverse( $qry->get_posts() ); 

foreach ( $posts as $post ) : setup_postdata( $post ); // sets up postdata in the same way as $qry->the_post();

    // ... 

endforeach; 

wp_reset_postdata(); // reset postdata after the loop

?> 
```

# iphone - 如何优化 iPhone 5 的 AIR iOS 应用程序，使用 Flash

> ID：15002012
> 
> 赞同：1
> 
> 时间：2013-02-21T12:14:08.673
> 
> 标签：iphone, ios, air, fullscreen

我已经发布了一个适用于 android 和 iOS 的应用程序，使用 AIR 并使用 Flash CS6 开发。

它适用于 iPhone 和 iPad，但我无法让它在视网膜屏幕设备上使用整个屏幕。

*   该应用程序旨在使用基于 Capabilities.screenResolutionX 和 Capabilities.screenResolutionY 的最大空间

*   描述符文件（和闪存）中的分辨率设置为高

*   我尝试添加启动屏幕（Default.png、Default@2x.png、Default-568&2x.png），但最后一个从未使用过。

*   我尝试使用全屏选项，但正如预期的那样，它只删除了菜单栏（我想保留它）

任何的想法？

干杯:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:51:16.753

抱歉，我自己找到了答案。

确实是启动屏幕告诉 iO 应用程序是否应该以高分辨率（而不是描述符）显示，所以我说得很对，很高兴知道。

我的问题是我将其命名为 Default-568@2x.png 而不是 Default-568h@2x.png。

找到错字，改了，就可以了！

# visual-c++ - 错误：“cons char *”类型的参数与“LPCWSTR”类型的参数不兼容

> ID：15002013
> 
> 赞同：1
> 
> 时间：2013-02-21T12:14:08.387
> 
> 标签：visual-c++

我正在用 Visual C++ 编写代码来访问计算机的串行端口。

代码如下： -

```
#include<windows.h>
#include<stdio.h>
#include<cstring>
#include<string.h>
#include<conio.h>
#include<iostream>
using namespace std;
//#include "stdafx.h"
#ifndef __CAPSTONE_CROSS_SERIAL_PORT__ 
#define __CAPSTONE_CROSS_SERIAL_PORT__
HANDLE hSerial= CreateFile("COM1", GENERIC_READ | GENERIC_WRITE,0,0,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,0); 
```

在上面的代码中，我在上面代码的最后一行的“COM1”处遇到错误。

错误如下：-

```
Error: argument of type "cons char *" is incompatible with parameters of type "LPCWSTR" 
```

我想知道为什么我会收到此错误以及谁来解决它。

# c# - 扩展 ApiController

> ID：15002025
> 
> 赞同：1
> 
> 时间：2013-02-21T12:14:39.900
> 
> 标签：c#, asp.net-web-api

正如标题所示，我想扩展 ApiContoller 类以包含一些自定义属性和辅助方法，但每当我尝试将它用于控制器时，我都会收到消息`Multiple actions were found that match the request:`

示例代码：

```
public class ExtendedApiController : ApiController {
    public string SomeHelper() {
    ....
    }
}

public class AccountController : ExtendedApiContoller {
    public void Post (ModelObject obj){
        string x = SomeHelper();
        ...Bunch of business logic
    }
} 
```

出于某种原因，Web Api 似乎不喜欢我这样做，或者我需要覆盖其他一些基本方法。我能看到的唯一其他选择是将扩展方法附加到 ApiContoller 但如果可能的话我想避免这种情况。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:10:03.583

您可以使用`[NonAction]`属性：

```
public class ExtendedApiController : ApiController {

   [NonAction] 
   public string SomeHelper() {
    ....
    }

} 
```

更多信息[在这里，在页面底部](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:21:33.237

`Get...`ASP NET WebAPI 在配置之前使用约定，因此它会尝试为 GET 请求、`Post...`POST 请求等以 PUT 和 DELETE开头的方法。

所以也许你有 2 种方法以`Get...`, `Post...`,`Put...`或`Delete...`

# visual-studio-2012 - 在 Visual Studio 2012 中格式化 SQL 脚本

> ID：15002027
> 
> 赞同：10
> 
> 时间：2013-02-21T12:14:43.740
> 
> 标签：visual-studio-2012, format, sql-server-data-tools

通常我们可以在 Visual Studio 中使用 ++ 快捷键格式化代码`Ctrl`或`K`标记`D`。

我们如何使用快捷键格式化 SQL 脚本代码，如存储过程或视图或其他东西？

注意：我将 SSDT 与 VS2012 一起使用，我可以在其中编辑数据库的脚本，但找不到格式选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T15:22:27.417

我认为 SSDT 没有内置的 SQL 格式选项。您可以使用诸如 Red-Gate 的 SQL Prompt 之类的插件来获得该功能，但我认为目前没有用于格式化 SQL 的本机选项。

# c# - 使用 Copy Local 将程序集放在不同的目录中

> ID：15002028
> 
> 赞同：3
> 
> 时间：2013-02-21T12:14:54.043
> 
> 标签：c#, visual-studio-2010, .net-assembly

我目前正在 Visual Studio 2010 中处理 C# 项目，我需要使用程序集。我将它作为一个项目添加到我的解决方案中，并让它在本地构建并复制到我的主项目的输出文件夹中。

问题是，为了整洁，我想要它以便程序集进入 bin/Debug/assemblies 而不是 bin/Debug，并且该程序集的引用使用它。

这有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:39:00.530

这种“整洁”是一个非常糟糕的主意。CLR 不知道在哪里查找这些程序集，并且如果没有 app.exe.config 文件就找不到它们。您需要提供一个`<probing>`命名子目录的元素。您还需要一个构建后事件来使用 mkdir 和 xcopy 创建目录来复制文件。

如果这听起来像是要跳过太多的箍，那是因为 DLL Hell 是你永远不想搞砸的东西。CLR 和构建系统都强烈反对它。只有两个地方 CLR 认为是明确的，GAC 和包含启动 EXE 的目录。其他任何事情都需要额外的步骤来让 CLR 相信你不是偶然开枪的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:17:40.843

只需在项目的属性中将输出路径设置为 bin\Debug\assemblies 或您喜欢的任何内容。

# javascript - JQuery：获取所有输入元素的ID，值

> ID：15002031
> 
> 赞同：3
> 
> 时间：2013-02-21T12:14:58.380
> 
> 标签：javascript, jquery, html

我正在尝试获取“page-templete1”上每个输入元素的所有 ID、值，但我没有成功

```
function Temp1() {          

var input = [];

$('page-templete1 input[name][id][value]').each(function(){

input.push(this);
cc=$(this).attr('id'));
 alert(cc); // trying to get one at time (not working)});
alert(input[0].id); // not working

alert(input[0].attr('id')); // not working

});

alert(input[0].id); // not working

alert(input[0].attr('id')); // not working 
```

}

如何获取页面中所有 Input 元素的 ID、值并稍后访问它们 注意：我确实知道输入元素的 ID 或有多少。有一篇旧帖子谈论类似的问题，但没有解决我的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:22:07.747

根据您的“页面”是否为 id，您可能需要在选择器之前使用点或散列：

```
var results = [];
$('#page-templete1 input').each(function(){
    results.push({
        id: this.id,
        value: this.value
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:17:18.813

试试下面的代码：

```
 $(function(){
    $("input").each(function(){
        alert($(this).attr('id'))
    })
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:20:56.767

```
var inputs = [];
$('page-templete1 input').each(function(){
    var id=$(this).attr('id'),
        val = $(this).val();
    alert("id: " + id + " with value: "+ val);
    inputs.push({id:id, value:val});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T12:21:44.653

您正在将数组分配给变量：`var inputs = [];`然后尝试通过引用未定义的变量来读取数组：（`input.push(this);`使用`input`而不是`inputs`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T12:24:09.467

serializeArray 将帮助您尝试以下操作：

```
var array = jQuery('your input selector').serializeArray(); 
```

结果将是

```
array{{name="", value=""}) 
```

访问试试这个

```
var array = jQuery('input').serializeArray();
array.each(function(obj){
    //do what with your object
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T12:25:17.547

尝试使用 jquery 输入选择器并对其进行迭代。

尝试这样的事情

```
 $(function(){
             jQuery( "#pageTemplate :input" ).each(function(){
                var id = this.id;       // for id
                var value = this.value; // for value
            })
        }) 
```

注意：您必须指定您的 page-templete1 是 id 还是 class

# mysql - SQL对连接表的多个记录进行分组？

> ID：15002034
> 
> 赞同：1
> 
> 时间：2013-02-21T12:15:06.873
> 
> 标签：mysql, sql, grouping

我有两个 MySQL 表

```
Parent
id, name
1, Parent 1
2, Parent 2

Children
id, parent_id, name
1,1, Child P1 1
2,1, Child P1 2
3,2, Child P2 1
4,2, Child P2 2
5,2, Child P2 3 
```

我知道从两个表中获取记录的 SQL 是

```
Select Parent.id, Parent.name, Children.id, Children.name 
from Parent
left join Children 
  on Children.parent_id=Parent.id 
```

这将返回类似

```
Parent.id  Parent.name    Children.id    Children.Name
1          Parent 1       1              Child P1 1
1          Parent 1       2              Child P1 2
2          Parent 2       3              Child P2 1
2          Parent 2       4              Child P2 2
2          Parent 2       5              Child P2 3 
```

MySQL 中是否有一个 SQL 查询可以返回类似这样的内容

```
Parent.id  Parent.name    Children_ids    Children_Names
1          Parent 1       1,2            Child P1 1,Child P1 2
2          Parent 2       3,4,5          Child P2 1,Child P2 2,Child P2 3 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:19:34.857

In MySQL you will want to use the [`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat) function which will concatenate the multiple rows into a single row. Since this is an aggregate function, you will also use a `GROUP BY` clause on the query:

```
select p.id,
  p.name,
  group_concat(c.id order by c.id) ChildrenIds,
  group_concat(c.name order by c.id) ChildrenNames
from parent p
left join children c
  on p.id = c.parent_id
group by p.id, p.name 
```

See [SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/15992/4).

The result is:

```
| ID |     NAME | CHILDRENIDS |                    CHILDRENNAMES |
------------------------------------------------------------------
|  1 | Parent 1 |         1,2 |            Child P1 1,Child P1 2 |
|  2 | Parent 2 |       3,4,5 | Child P2 1,Child P2 2,Child P2 3 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:23:38.960

使用 group_concat [http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php](http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php)

```
Select Parent.id, Parent.name, group_concat(Children.id) AS 'Children_ids',
group_concat(Children.name)  AS 'Children_Names'
from Parent left join Children on Children.parent_id=Parent.id
group by Parent.id, Parent.name; 
```

[小提琴](http://sqlfiddle.com/#!2/1d63e/1)

# bash - 通过过滤命令输出仅返回段落

> ID：15002036
> 
> 赞同：0
> 
> 时间：2013-02-21T12:15:09.370
> 
> 标签：bash, shell, filter, awk, grep

`grep`有没有办法使用, ...只返回第二或第三、第四段`awk`？

我怎样才能得到这个`lo`段落，我知道使用命令是可能的，`ifconfig lo`但是如果使用其他命令。的输出`ifconfig`是：

```
eth0      Link encap:Ethernet  HWaddr 00:25:22:b2:8b:0d  
          inet addr:192.168.1.22  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::225:22ff:feb2:8b0d/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:100979 errors:0 dropped:0 overruns:0 frame:0
          TX packets:70753 errors:0 dropped:0 overruns:0 carrier:1
          collisions:0 txqueuelen:1000 
          RX bytes:129240044 (129.2 MB)  TX bytes:7355272 (7.3 MB)
          Interrupt:29 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:01:06.920

您可以使用 轻松按段落编号或接口名称进行过滤`awk`。

对于段落编号，只需指定哪个记录`awk 'NR==1' RS=''`：

```
# First record
$ ifconfig | awk 'NR==1' RS=''
eth0      Link encap:Ethernet  HWaddr 00:25:22:b2:8b:0d  
          inet addr:192.168.1.22  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::225:22ff:feb2:8b0d/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:100979 errors:0 dropped:0 overruns:0 frame:0
          TX packets:70753 errors:0 dropped:0 overruns:0 carrier:1
          collisions:0 txqueuelen:1000 
          RX bytes:129240044 (129.2 MB)  TX bytes:7355272 (7.3 MB)
          Interrupt:29 

# Second Record              
$ ifconfig | awk 'NR==2' RS=''
lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

如果要按接口名称而不是记录编号进行过滤，则`awk '$1=="eth0"' RS=''`：

```
# Interface lo
$ ifconfig | awk '$1=="lo"' RS='' 
lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

# Interface eth0                                                        
$ ifconfig | awk '$1=="eth0"' RS='' 
eth0      Link encap:Ethernet  HWaddr 00:25:22:b2:8b:0d  
          inet addr:192.168.1.22  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::225:22ff:feb2:8b0d/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:100979 errors:0 dropped:0 overruns:0 frame:0
          TX packets:70753 errors:0 dropped:0 overruns:0 carrier:1
          collisions:0 txqueuelen:1000 
          RX bytes:129240044 (129.2 MB)  TX bytes:7355272 (7.3 MB)
          Interrupt:29 
```

但我不知道`ifconfig eth0`or有什么问题`ifconfig lo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:56:53.193

使用[模式 range](http://www.grymoire.com/Unix/Sed.html#uh-29)，这是使用`sed`. 它还将删除最后一个空行：

```
ifconfig | sed -n '/^lo/,/^$/ { /^$/!p }' 
```

`awk`解决方案：

```
ifconfig | awk '$1=="lo"' RS= 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:48:15.207

使用 awk：

```
BEGIN {
  RS = ""
}

NR == 3 {
  print
  exit
} 
```

打印第三段。将“3”更改为您喜欢的任何内容。请注意，将 Record Separator 设置为空字符串会使 awk 像往常一样处理段落而不是行。

你可以像这样运行它：

```
awk -f above.awk input.txt 
```

# c++ - 如何强制 QGLWidget 更新屏幕？

> ID：15002045
> 
> 赞同：6
> 
> 时间：2013-02-21T12:15:47.540
> 
> 标签：c++, qt, opengl

我正在用 Open GL 绘制一个简单的场景。我已经继承了 QGLWidget 并覆盖了paintGL()。那里没什么好看的：

```
void CGLWidget::paintGL()
 {
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    gluLookAt (120.0, 160.0, -300.0, 0.0 + 120.0, 0.0 + 160.0, 2.0 - 300.0, 0.0, 1.0, 0.0);
    glScalef(1.0f/300.0f, 1.0f/300.0f, 1.0f/300.0f);
    glClear(GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(80.0, width()/(double)height(), 5.0, 100000.0);

    glMatrixMode(GL_MODELVIEW);
    glBegin(GL_POINTS);
    glColor3f(1.0f,0.6f,0.0f);
    glVertex3d(x, y, z);

    // ...drawing some more points...

    glEnd();

 } 
```

我在主窗口中有一个计时器，它触发`updateGL()`GL 小部件。我已经验证它会导致`paintGL()`被调用。但是，屏幕上的实际图片很少更新。即使我调整窗口大小，场景也不会更新。为什么会这样，我该如何强制它更新？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T12:21:54.677

不要从计时器调用 updateGL()，而是调用 update() 以确保视图获得绘制事件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-21T13:51:41.953

在 CGLWidget 构造函数中

```
QTimer *timer = new QTimer(this);
connect(timer, SIGNAL(timeout()), this, SLOT(update()));
timer->start(10);

timer -> start(VALUE); 
```

玩 `VALUE 10 只是一个例子。

装饰

# wpf - DXGrid 绑定不显示单元格值

> ID：15002048
> 
> 赞同：0
> 
> 时间：2013-02-21T12:15:58.043
> 
> 标签：wpf, devexpress, mvvm-light

我正在更新我的项目以使用 DevExpress DXGrid。注意：我正在使用他的 MVVM 轻量级工具包。

我已成功绑定到默认的 wpf 网格，但现在我想升级它以使用 DXgrid。我“认为”我绑定正确，但是当网格显示时，单元格都是空的。行号是正确的（即我有 3 辆汽车，我有 3 行）所以它肯定会看到我的数据，但我确信我在某处缺少一个属性，因为没有一个文本显示所有单元格都是空的

```
 <dxg:GridControl.Columns>

            <dxg:GridColumn FieldName="{Binding Path=Id}" Header="ID"/>
            <dxg:GridColumn FieldName="{Binding Path=NominationDate, StringFormat=\{0:dd/MM/yyyy\}}" Header="Nomination Date" />
            <dxg:GridColumn FieldName="{Binding Path=CarNumber}" Header="CarNumber"/>
            <dxg:GridColumn FieldName="{Binding Path=CarName}" Header="Car Name" />
            <dxg:GridColumn FieldName="{Binding Path=Colour}" Header="Colour"/>

        </dxg:GridControl.Columns>

        <dxg:GridControl.View>
            <dxg:TableView Name="tableView1" SelectedRowsSource="{Binding Selection}" MultiSelectMode="Row" NavigationStyle="Row"  />

        </dxg:GridControl.View>
    </dxg:GridControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T13:03:44.010

尝试

```
 <dxg:GridColumn FieldName="Id" Header="ID"/>
        <dxg:GridColumn FieldName="NominationDate" Header="Nomination Date"/>
        <dxg:GridColumn FieldName="CarNumber" Header="CarNumber"/>
        <dxg:GridColumn FieldName="CarName" Header="Car Name" />
        <dxg:GridColumn FieldName="Colour" Header="Colour"/>

    </dxg:GridControl.Columns>

    <dxg:GridControl.View>
        <dxg:TableView Name="tableView1" SelectedRowsSource="{Binding Selection}" MultiSelectMode="Row" NavigationStyle="Row"  />

    </dxg:GridControl.View>
</dxg:GridControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:08:45.227

我需要设置 DisplayMemberBinding="{Binding Path=Id}"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:30:08.407

尝试使用 RowData 或 Data 为您的属性添加前缀。这些是 dxgrid 为检索绑定数据而公开的依赖对象。所以在你的情况下，你会有类似下面的东西..

```
 <dxg:GridColumn FieldName="{Binding RowData.Path=Id}" Header="ID"/>

or 

 <dxg:GridColumn FieldName="{Binding Data.Path=Id}" Header="ID"/> 
```

# visual-studio - 在发布版本中调用dll中的函数，返回值随着输入图像参数的变化而变化

> ID：15002052
> 
> 赞同：0
> 
> 时间：2013-02-21T12:16:04.707
> 
> 标签：visual-studio, visual-c++, dll, visual-studio-2005

当我在vs2005中运行我的程序时，无论是调试版还是发布版，返回值与输入图像参数相同。但是当我尝试打包我的程序时，调试版仍然可以，而发布版的返回值与相同的输入图像参数不同。我在程序中使用的dll是与程序版本对应的（调试/发布）版本。通过谷歌，有人说这可能是编译器对发布程序的代码优化造成的，但我不知道为什么在 vs 环境中以发布版本运行我的程序时结果是正确的。有没有关于如何挖掘错误的提示？

# vim - 如何用引号标记集合中的每一行？

> ID：15002053
> 
> 赞同：0
> 
> 时间：2013-02-21T12:16:10.330
> 
> 标签：vim

我有一些这样的文字：

```
<datetime>2006-04-28T15:49</datetime>
                <surfaceintervalbeforedive>
                    30.00 
                </surfaceintervalbeforedive>
                <tankdata> 
```

我想用引号标记每一行。预期的结果是：

```
"<datetime>2006-04-28T15:49</datetime>"
                    "<surfaceintervalbeforedive>"
                        "30.00"
                    "</surfaceintervalbeforedive>"
                    "<tankdata>" 
```

我知道我可以在第一行使用**I-"**，对每一行使用点命令。然后是**A-"**和点命令。但是有很多行，我相信必须有更多的“VIMable”方法。

**解决了**

我认为最简单的方法是记录一个像@pktangyue 所说的宏并将其应用于这样的范围：1,4norm！@一种

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:34:21.107

我会使用从非空白到非空白的贪婪匹配，如下所示：

```
:%s/\S.*\S/"&"/ 
```

您可以像往常一样`%`指定 any ，而不是。`[range]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:22:30.213

您可以使用宏。

假设你现在在第一行

```
qa  //register a macro to a
I
"
<esc>
A
"
<esc>
j
q
4@a // here change 4 to the total line number minus 1 of your file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:23:22.100

一种简单的方法是记录您对一行所做的操作，然后将该宏与一个数字一起使用。
要记录注册 a 的命令：

```
qaI"<Esc>A"<Esc>jq 
```

然后你可以重复它：

```
N@a 
```

`N`您要重复的行数在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T12:28:17.613

您可以使用**I-"**和 **A-" 标记一个行块，只需先使用 Ctrl-Q（或 Ctrl-V）选择块，然后移动光标选择您想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T14:37:19.143

另一种选择是使用`:normal`在每一行上执行普通命令。在下面的情况下`I`，在行首插入`A`并附加到末尾。

```
:%norm I"^[A" 
```

+`^[`在哪里。有关引用的更多信息，请参阅。取决于您的平台+用于引用我的可用。`ctrl``v``esc``:h i_ctrl-v``ctrl``q`

如果你有 Tim Pope 的[环绕声](https://github.com/tpope/vim-surround)插件，它会变得更短一些。

```
:%norm yss" 
```

有关更多信息，请参阅

```
:h :norm
:h I
:h A
:h i_ctrl-v 
```

如果您安装了环绕声，请参阅：

```
:h surround
:h yss 
```

# java - 以编程方式检测 JVM 是否正在使用类共享？

> ID：15002057
> 
> 赞同：6
> 
> 时间：2013-02-21T12:16:26.920
> 
> 标签：java, jvm

一些 JVM 设置了[类共享](http://www.theserverside.com/news/thread.tss?thread_id=26627)选项。有没有办法以编程方式检测该选项是打开还是关闭？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:22:39.100

没有理智的方法可以得到我所知道的这个......

您可以获得用于调用 JVM 的命令行并查看[此处](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/class-data-sharing.html)描述的标志。如果您只想强制关闭该功能，那很容易 - 需要关闭标志。

请注意，此文档适用于 1.5，它说共享还取决于所使用的垃圾收集器，因此您也需要推断出这一点（也可能，给定 jvm 版本、命令行、操作系统版本和很大的耐心： -))。

您还需要在每个 jvm 供应商上解决这个问题。例如，ibm jvm[使用不同的标志](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/topic/com.ibm.java.doc.user.aix64.60/user/shc_overview.html)

# asp.net - 无法检测复选框状态

> ID：15002058
> 
> 赞同：0
> 
> 时间：2013-02-21T12:16:31.077
> 
> 标签：asp.net, vb.net, .net-1.1, asp.net-1.1

任何人都知道为什么以下总是给我一个`0`即使`cbEligibleToJoin`是`Checked`？

```
if (cbEligibleToJoin.Checked = 1) then
    objSQLCommand.Parameters.Add("@eligible_to_join", SqlDbType.Int, 4).Value = ctype(1, integer)
else
    objSQLCommand.Parameters.Add("@eligible_to_join", SqlDbType.Int, 4).Value = ctype(0, integer)
end if 
```

我尝试`if (cbEligibleToJoin.Checked = 1) then`并`if (cbEligibleToJoin.Checked) then`得到了相同的结果，即`0`在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:19:37.640

我认为您的问题是复选框值正在寻找“真”或“假”的布尔值，而不是整数

使用 elseif 将确定它是否实际上进入其中之一

```
If cbEligibleToJoin.Checked = True Then
     objSQLCommand.Parameters.Add("@eligible_to_join", SqlDbType.Int, 4).Value = 1
ElseIf cbEligibleToJoin.Checked = False Then
    objSQLCommand.Parameters.Add("@eligible_to_join", SqlDbType.Int, 4).Value = 0
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:20:10.077

你可以试试这个：

```
if (cbEligibleToJoin.Checked) then
    objSQLCommand.Parameters.Add("@eligible_to_join", SqlDbType.Int, 4).Value = 1
else
    objSQLCommand.Parameters.Add("@eligible_to_join", SqlDbType.Int, 4).Value = 0
end if 
```

# ubuntu - Ubuntu 12.10 自动隐藏扩展坞片段

> ID：15002071
> 
> 赞同：-1
> 
> 时间：2013-02-21T12:17:11.500
> 
> 标签：ubuntu, hide, nvidia, dock

我刚刚在我的 Ubuntu 12.10 计算机上安装了新显卡 (NVIDIA GTX 650)。自从安装了卡后，Ubuntu 扩展坞会在扩展坞自动隐藏时留下一个灰色条。

你们有没有人经历过这种行为？

提前致谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:44:20.090

对于所有寻找与我相同的答案的人，有一篇关于如何让 NVIDIA 驱动程序在 Ubuntu 中运行的不错的博客文章。使用专有驱动程序一切正常。这是链接： http: [//www.dedoimedo.com/computers/ubuntu-quetzal-nvidia.html](http://www.dedoimedo.com/computers/ubuntu-quetzal-nvidia.html)

# velocity - 速度是否会影响 Scrum 中的团队承诺

> ID：15002072
> 
> 赞同：1
> 
> 时间：2013-02-21T12:17:12.560
> 
> 标签：velocity, scrum

在 sprintplanning 结束时，当提交将在即将到来的 sprint 中完成的工作时，记住速度是一个好主意吗？

例如，当团队想要承诺一些用户故事，估计为 10 个故事点，而平均速度为 7。是否应该调整承诺以更好地匹配速度？

在我看来，[帕金森定律](http://en.wikipedia.org/wiki/Parkinson%27s_law)似乎即将生效。

为团队隐藏速度数字并仅使用它来估计某个功能/故事何时完成不是更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:30:04.133

在 Sprint 计划的开始而不是结束时牢记速度是一个好主意。

Velocity 是开发团队的指南。例如，如果速度为 15，他们会考虑将故事点总数纳入 Sprint。然而，作为 Sprint 计划的一部分，他们将这些故事分解为任务。只有在这一点上，他们才能清楚地了解他们在即将到来的 sprint 中可以做什么。可能是 10 个故事点，也可能是 20 个故事点。速度只是一个指南。

我还可以补充一点，对开发团队隐藏东西是一个非常糟糕的主意。Scrum 的支柱之一是透明度。

此外，最新版本的 Scrum 指南已经删除了对“承诺”一词的所有引用。我们现在，更准确地说，使用“预测”这个词。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:53:07.867

这取决于团队的赛道历史和他们在过去几个冲刺中的速度。因此，如果他们已经有一段时间平均得分为 7，那么接受 10 个故事就是让团队失败。

一个小的修正，我们不再使用“承诺”这个词，因为它会被管理层误解，如果团队不履行承诺，他们就会遭受“死亡行军”；尽管他们实现了 sprint 目标的 95%。相反，我们使用**预测**这个词，因为我们永远无法保证基于不确定性、复杂性和意外事件的成功。

尝试将故事分解成更小的故事，以便团队能够实现它们，但鼓励他们在每个 sprint 中做得更好，并在每个 sprint 中加倍努力。因此，在回顾中，不断地问“我们可以做些什么来改进并做得更多？” 现实团队的感受。

在你的 sprint 计划中，团队是否觉得他们真的可以实现它，如果可以，那就去做吧。如果不是，那么请重新考虑如何处理如此大的故事或将其分解以提供增加价值的增量。

永远不要对团队隐瞒任何事情，Scrum 是关于透明度、开放性和健康的工作环境。如果你开始隐瞒，团队也会开始对你隐瞒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T14:47:33.263

我们可以将速度作为下一个 sprint 的新故事点的基准，但这不是强制性的，它会影响团队的承诺。每个团队都可以与自己相媲美。我们可以使用速度来比较我们的新故事点，并尝试改进我们自己并加快交付速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-05T13:20:37.917

速度是一个很好的衡量标准，可以根据过去的表现/速度在 Sprint 的跨度内进行*预测。*Sprint 通常在速度估计中允许缓冲，以便可以考虑不可预见的情况。此缓冲区基于历史数据、即将到来的 PTO 等。

我们可以从基于产品的团队和基于服务的团队的角度来看这个问题。对于产品团队来说，进入 sprint 的需求可能比服务团队更灵活（服务团队可能会处理不太灵活的客户）。

理想情况下，团队在 Backlog Grooming 过程中考虑到速度——这允许 Scrum 团队从 backlog 中提取他们知道应该按时完成的故事。Sprint Planning 是生产团队进一步讨论这些经过修饰/调整大小的用户故事的细微差别的地方，以更好地了解功能需求。

# c++ - 队列缓冲区中的点击 OpenAL

> ID：15002075
> 
> 赞同：1
> 
> 时间：2013-02-21T12:17:16.443
> 
> 标签：c++, boost-asio, openal

我的程序运行不正常。我需要使用 boost::asio 播放从网络获取的声音。那个声音是对的，因为如果我把它交给文件，我就有声音文件。但是在扬声器中，我会听到重复的咔嗒声。那是我的代码：

```
while (!ExitKey)
{
    boost::system::error_code error;
    size_t len = VoiceSocket->read_some(boost::asio::buffer(buf), error);
    if (len==0)
    {
        continue;
    }
    file.write(buf.data(), 882);
    if (firstit++>=3)
    {
        alSourceUnqueueBuffers(alSource, 1, &alUnqueueBuf);
    }
    if (iteration <=3)
    {
        alBufferData(alSampleSet[iteration++], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
    }
    else
    {
        iteration = 0;
        alBufferData(alSampleSet[iteration++], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
    }
    //alSourceQueueBuffers(alSource, 3, alSampleSet);
    alSourcei(alSource, AL_BUFFER, alSampleSet[0]);
    alSourcei(alSource, AL_BUFFER, alSampleSet[1]);
    alSourcei(alSource, AL_BUFFER, alSampleSet[2]);

    alSourceQueueBuffers(alSource, 1, alSampleSet);
    //
    //alSourcei(alSource, AL_LOOPING, alSampleSet);
    ALenum alErr0 = AL_NO_ERROR;
    ALenum alErr1 = AL_INVALID_NAME;
    ALenum alErr2 = AL_INVALID_ENUM;
    ALenum alErr3 = AL_INVALID_VALUE;
    ALenum alErr4 = AL_INVALID_OPERATION;
    ALenum alErr5 = AL_OUT_OF_MEMORY;
    ALenum alErr  = alGetError();
    //alGetSourcei(alSource, AL_SOURCE_STATE, &alErr);
    alSourcePlay(alSource);
    alErr = alGetError();
    //
} 
```

请帮我。我需要用这段代码做什么才能让它工作。我不明白如何使用这个缓冲区:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T12:47:22.300

您应该使用其中一个`alSourcei(alSource, AL_BUFFER, alSampleSet[0])`或`alSourceQueueBuffers(alSource, 1, alSampleSet)`，但不能同时使用两者。当您进行流式传输时，请使用后者。

在取消排队之前检查已处理的缓冲区：

```
alGetSourcei(alSource, AL_BUFFERS_PROCESSED, out p) 
```

如果有空闲缓冲区，则仅缓冲并排队下一个块。

# c# - 将整个字节 [] 转换为 uint

> ID：15002079
> 
> 赞同：9
> 
> 时间：2013-02-21T12:17:34.867
> 
> 标签：c#, .net

我的代码中有 byte[] srno

```
byte[] srno = new byte[6];

srno[0] = 0xff;
srno[1] = 0x0f;
srno[2] = 0x24;
srno[3] = 0x12;
srno[4] = 0x16;
srno[5] = 0x0a; 
```

现在我想要这个值在 uint 中

```
uint a = 0xff0f2412160a; 
```

如何转换它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T12:27:09.410

正如@animaonline 建议的那样，您应该使用`BitConverter`将字节数组转换为*uint*或*ulong。因此你有 6 个字节，*uint*对你来说太小了。您应该转换为 ulong*。但转换器需要 8 个字节，因此创建具有所需字节数的新数组：

```
byte[] value = new byte[8];
Array.Reverse(srno); // otherwise you will have a1612240fff result
Array.Copy(srno, value, 6);
ulong result = BitConverter.ToUInt64(value, 0);
Console.WriteLine("{0:x}", result); // ff0f2412160a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:27:40.937

在 System 命名空间中，您将找到`BitConverter`库类。您希望静态`ToUInt64()`函数如下：

```
var a = BitConvert.ToUInt64(srno, 0); 
```

您需要将数组的大小调整为`[8]`

[MSDN](http://msdn.microsoft.com/en-us/library/system.bitconverter.touint64.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:39:54.927

每个人似乎都忽略了他预期输出的字节顺序编码。该类`BitConverter`使用固定编码（通常是 Little-Endian，IIRC）。示例中的输出假定为 Big-Endian。在一个完美的世界里，你只需自己做数学，但使用它比使用`Array.Reverse`内置`BitConverter`类更简单。

在我发布之前可能会有一堆答案，所以这里有一段非常快速的不安全代码：

```
public static unsafe ulong ToULong(byte[] values)
{
    byte* buffer = stackalloc byte[8];
    if (BitConverter.IsLittleEndian)
        Array.Reverse(values);
    System.Runtime.InteropServices.Marshal.Copy(values, 0, (IntPtr)buffer, values.Length);
    return *(ulong*)buffer;
} 
```

# redis - REDIS/jedis 更新排序集中所有成员的分数

> ID：15002081
> 
> 赞同：9
> 
> 时间：2013-02-21T12:17:47.677
> 
> 标签：redis, sortedset, jedis, batch-updates

在 REDIS 中增加中等大小的排序集的最佳方法是什么？（最好使用 java 驱动 JEDIS） Set 中有大约 100-200K 的记录。我想将他们的分数增加一个给定的双数。

## 前

```
1 a
2 b
3 c 
```

## 之后（增加 1）

```
2 a
3 b
4 c 
```

我想出的唯一可能的解决方案是：

1.  通过网络获取所有已排序的集合（例如 A）内容。（REDIS -> 应用程序）。
2.  创建一个管道，在同一个 setA 中使用 ZADD 或 ZINCRBY 在循环中递增它们
3.  然后执行管道。

还有另一种/更好的方法吗？

# 更新

以下是如何在 REDIS 中使用 EVAL 和 Lua 执行 for 循环以递增所有已排序的集合成员。

```
local members = redis.call('zrange',KEYS[1],0,-1)
for i, member in ipairs(members) do
    redis.call('zincrby',KEYS[1],inc,member)
end 
```

将其保存到字符串中并使用您的驱动程序（在本例中为 java）运行 eval。执行什么也不返回。

使用绝地武士

```
// script is the script string
// 1 is the number of keys- keep it this way for this script
// myzset is the name of your sorted set
// 1.5 is the increment, you can use +/- values to inc/dec.
jedis.eval(script, 1, "myzset", "1.5"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:17:26.013

客户端和redis之间的通信可能需要很多时间。为避免这种情况，您可以获取已排序集的“SET 类型”副本。例如，假设您有一个排序集“key1”：

```
1 a
2 b
3 c 
```

你有一组“key2”：

```
a, b, c 
```

比您可以轻松实现增量：

```
def increase_sorted_set(increment = 1)
  redis.ZINTERSTORE("key1", 2, "key1", "key2", "WEIGHTS", "1", increment)
end 
```

Redis 会给（未排序的）集合的每个成员`key2`一个默认分数`1`。

例如：

```
redis 127.0.0.1:6379> ZADD key1 1 a 2 b 3 c
(integer) 3
redis 127.0.0.1:6379> SADD key2 a b c
(integer) 3
redis 127.0.0.1:6379> ZINTERSTORE key1 2 key1 key2 WEIGHTS 1 7
(integer) 3
redis 127.0.0.1:6379> ZRANGE key1 0 -1 WITHSCORES
1) "a"
2) "8"
3) "b"
4) "9"
5) "c"
6) "10" 
```

# php - 在php中添加动态文本框的值

> ID：15002083
> 
> 赞同：-3
> 
> 时间：2013-02-21T12:17:54.810
> 
> 标签：php, dynamic, textbox, addition

我有这个显示名称文本框和产品价格的代码

```
$que = "SELECT * FROM additionals";
$res = mysql_query($que, $con);
   if(mysql_num_rows($res)>0){
     while($row = mysql_fetch_array($res)){ ?>
<tr>
<td><?php echo $row['name'] ?> :</td><td><input type="text" name="
<?php echo $row['name']; ?>"  /></td><td>* <?php echo $row['price'];?></td>
</tr> 
```

现在我需要存储并添加它们的所有值示例 textbox1=1 textbox2=2 $result=3 我需要动态存储它们并且它们添加它们任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:35:09.810

我想你可能想要这个

```
$que = "SELECT * FROM additionals";
$res = mysql_query($que, $con);
   if(mysql_num_rows($res)>0){
while($row = mysql_fetch_array($res)){ ?>
<tr>
<td><?php echo $row['name'] ?> :</td><td><input type="text" name="
<?php echo $row['name']; ?>" value="<?php echo $row['price'];?" /></td>
</tr>
<?php }?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:33:11.913

如果您想添加每行价格的值，那么您只需要一个 sub_total 变量，如下所示：

```
<?php
$que = "SELECT * FROM additionals";
$res = mysql_query($que, $con);
$output = '<table>';
$sub_total = 0;

if(mysql_num_rows($res) > 0){
    while($row = mysql_fetch_array($res)){
        $sub_total += $row['price'];

        $output .= '<tr>';
        $output .= '<td>'.$row['name'].'</td><td><input type="text" name="';
        $output .= $row['name'].'"  /></td><td>* '.$row['price'].'</td>';
        $output .= '</tr>';
    }
}

$output .= '</table>';
echo $output;
?> 
```

我不确定你想在哪里写那些 textbox1、2、3 等。出来，请在此答案的评论部分注明，我会根据您的需要更新答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:36:02.503

您可以尝试以下方法：

```
<?php echo $row['name']; ?> : <input type="text" name="data[<?php echo $row['id']; ?>]" value="<?php echo $row['price'];?>"  /> 
```

然后进行后期处理

```
$data=$_POST['data'];
while(list($key,$value)=each($data))
{
    $sql="UPDATE additionals SET price='".mysql_escape_string($value)."' WHERE id=".intval($key);
    mysql_query($sql, $con);
} 
```

这假设您的表索引是“id”并且它是一个整数。使用它作为输入的一部分允许您访问索引和值作为一对。

# vtk - 如何检查 vtk polydata 是否有单元或点数据

> ID：15002084
> 
> 赞同：2
> 
> 时间：2013-02-21T12:17:59.407
> 
> 标签：vtk

如何检查是否`vtkPolyData`有点数据或单元数据或没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:09:49.017

在 Python 中，您可以执行以下操作：

```
poly.GetPointData().GetNumberOfArrays()
poly.GetCellData().GetNumberOfArrays() 
```

在 C++ 中，您可以类似地执行以下操作：

```
poly->GetPointData()->GetNumberOfArrays()
poly->GetCellData()->GetNumberOfArrays() 
```

请注意，vtkPolyData 可以同时具有点和单元数据。

# python - 如何从“groupby”对象的“单元格”中获取值？

> ID：15002085
> 
> 赞同：9
> 
> 时间：2013-02-21T12:18:01.303
> 
> 标签：python, group-by, pandas

假设我有以下数据框：

```
 A    B  C   D
0  foo  one  1  10
1  bar  one  2  20
2  foo  two  3  30
3  bar  one  4  40
4  foo  two  5  50
5  bar  two  6  60
6  foo  one  7  70
7  foo  two  8  80 
```

现在我可以按第一列分组：`grouped = df.groupby('A')`. 结果，我得到以下`DataFrameGroupBy`对象：

```
 A            B                 C              D
0  foo  [one,two,two,one,two]  [1,3,5,7,8]  [10,30,50,70,80]
1  bar  [one,one,two]          [2,4,6]      [20,40,60] 
```

现在我想访问特定单元格中的值。我该怎么做？例如，我想从“D”列和所在行`'A'=='foo'`（第一行）中获取值。换句话说，我想得到`[10,30,50,70,80]`. 是否可以？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T12:26:33.307

你在想这样的事情吗？

```
>>> df
     A    B  C   D
0  foo  one  1  10
1  bar  one  2  20
2  foo  two  3  30
3  bar  one  4  40
4  foo  two  5  50
5  bar  two  6  60
6  foo  one  7  70
7  foo  two  8  80
>>> df.groupby("A").get_group("foo")["D"]
0    10
2    30
4    50
6    70
7    80
Name: D
>>> df.groupby("A").get_group("foo")["D"].tolist()
[10, 30, 50, 70, 80] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-03T22:40:30.003

这句话是可能的：

```
>>> df.groupby("A").get_group("foo")["D"]
0    10
2    30
4    50
6    70
7    80
Name: D 
```

# c# - Bulk Insert Access from Dataset

> ID：15002086
> 
> 赞同：0
> 
> 时间：2013-02-21T12:18:01.433
> 
> 标签：c#, ms-access, dao, bulkinsert

I have been following the code from [Bulk Insert](https://stackoverflow.com/questions/7070011/writing-large-number-of-records-bulk-insert-to-access-in-net-c) However I am getting an exception of Invalid Argument at **AccesssRecordset.Update();** or **rs.Update();**

It takes two arguments Int UpdateType and bool Force

```
public void BulkExportToAccess(DataTable dtOutData, String DBPath, String TableNm) 
{ 
DAO.DBEngine dbEngine = new DAO.DBEngine();
Boolean CheckFl = false;

try
{
    DAO.Database db = dbEngine.OpenDatabase(DBPath);
    DAO.Recordset AccesssRecordset = db.OpenRecordset(TableNm);
    DAO.Field[] AccesssFields = new DAO.Field[dtOutData.Rows.Count];

    //Loop on each row of dtOutData
    for (Int32 rowCounter = 0; rowCounter < dtOutData.Rows.Count; rowCounter++)
    {
        AccesssRecordset.AddNew();
        //Loop on column
        for (Int32 colCounter = 0; colCounter < dtOutData.Columns.Count; colCounter++)
        {
            // for the first time... setup the field name.
            if (!CheckFl)

          AccesssFields[colCounter] =                                               
          AccesssRecordset.Fields[dtOutData.Columns[colCounter].ColumnName];
            AccesssFields[colCounter].Value = dtOutData.Rows[rowCounter][colCounter];
        }

        AccesssRecordset.Update();
        CheckFl = true;
    }

    AccesssRecordset.Close();
    db.Close();
}
finally
{
    System.Runtime.InteropServices.Marshal.ReleaseComObject(dbEngine);
    dbEngine = null;
 }
 } 
```

Can anyone help

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:26:05.970

好的，所以`OpenRecordset`创建了一个[`Recordset`](http://msdn.microsoft.com/en-us/library/office/ff821467.aspx)对象。它`UpdateType`正在寻找来自[`UpdateTypeEnum`](http://msdn.microsoft.com/en-us/library/office/ff196186.aspx); 你可以只发送一个 1。就目前`Force`而言，我认为在你的情况下你可能想要发送`true`。这意味着如果有其他人更新了其中一个记录，他们的更改将不会被考虑并且可能会丢失，因为您的更新将被**强制执行。**

# android - 按下后退按钮时完成活动（警报对话框）

> ID：15002092
> 
> 赞同：1
> 
> 时间：2013-02-21T12:18:08.790
> 
> 标签：android, android-alertdialog

我正在开发一个将一些 json 解析为列表视图（背景）的应用程序。当数据无法填充列表视图时，我目前正在尝试处理错误。

我已经在 onPostExecute 方法中通过创建一个警报对话框来处理这个问题，如下面的代码所示

```
 protected void onPostExecute(String args) {
            progressDialog.dismiss();

            //Shows alert dialog if data is unavailable

            if(args != null && args.equals(noData)){
                 AlertDialog.Builder builder = new AlertDialog.Builder(JsonActivity.this);
                 builder.setTitle("Title");
                 builder.setMessage(noData);
                 AlertDialog alert = builder.create();
                 alert.show();

            }

        } 
```

这很好用，但是如果我单击后退按钮，它会返回一个未填充的空白列表视图。

如果在显示警报对话框时按下后退按钮，我想完成活动。

我也尝试过覆盖 onBackPressed 方法，但它不起作用。

```
 @Override
    public void onBackPressed() {
        JsonActivity.this.finish();
    } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T12:24:54.733

```
...
builder.setOnCancelListener(new DialogInterface.OnCancelListener() {
    @Override
    public void onCancel(DialogInterface dialog) {
        // if from activity
        finish();
        // if activity is a field
        //activity.finish();
    }

}); 
```

**如果您的对话框在显示时按下后退按钮时可取消，则会触发**onCancel 。****

 **或使用 OnDismissListener ，无论您按下某个按钮还是后退按钮，只要 Dialog 被关闭，就会调用它

```
...
AlertDialog alert = builder.create();
alert.setOnDismissListener(new DialogInterface.OnDismissListener() {
    @Override
    public void onDismiss(DialogInterface dialog) {
        finish();
    }
});
alert.show(); 
```

如果没有数据而不是拨号，通常显示 Toast 是一种更好的做法。

```
 if(args != null && args.equals(noData)){
             Toast.makeText(context, noData, Toast.LENGTH_LONG).show();
             finish();
        } 
```**

# javascript - Loading game levels in JavaScript w/o back-end

> ID：15002093
> 
> 赞同：0
> 
> 时间：2013-02-21T12:18:11.297
> 
> 标签：javascript, html, canvas

I have a Javascript game, simple one. I want to store game levels on my server but not load all of them at once, but rather load then when they're needed, asynchronously.

I don't have any back-end host (no PHP etc.), but I can keep my levels in any kind of file (text, image, js script file).

What's a good solution to loading levels?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:33:59.327

我更喜欢 JS (JSON)，因为你有一个原生的 JSON Parser，你可以很容易地测试它。您可以将任何其他格式与 XHR (XMLHttpRequest/Ajax) 一起使用。您还可以在本地文件上使用 XHR ( [http://forums.mozillazine.org/viewtopic.php?f=25&p=6033635](http://forums.mozillazine.org/viewtopic.php?f=25&p=6033635) )。

这是一个通过 XHR 加载 JSON 的示例类`LevelLoader`。

```
if ( typeof gamens== 'undefined') {
    var gamens= {};
}

gamens.LevelLoader = function() {
       this.leveldata = {};
};

gamens.LevelLoader.prototype = {

    fromString : function(data) {
        this.leveldata = JSON.parse(data);
        // this.repaint();
    },

    fromFile : function(name) {
            var xmlhttp = xhr();
            xmlhttp.open("GET", "level/" + name + ".js", true);
            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4) {
                    this.fromString(xmlhttp.responseText);
                }
            }
            xmlhttp.send(null);
        }
};

var loader = new gamens.LevelLoader(); 
// load "level/test.js"  
// example: 
// {"tiles":[0,1,1]}
loader.fromFile("test"); 
console.log(loader.leveldata); 
```

返回 XMLHttpRequest 对象的 xhr 函数：

```
var xhr = function() {
    var _xhr = false;
    if (window.ActiveXObject) {
        try {
            _xhr = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                _xhr = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (ex) {
                _xhr = false;
            }
        }
    }
    if (!_xhr && typeof XMLHttpRequest != 'undefined') {
        try {
            _xhr = new XMLHttpRequest();
        } catch (e) {
            _xhr = false;
        }
    }
    if (!_xhr && window.createRequest) {
        try {
            _xhr = window.createRequest();
        } catch (e) {
            _xhr = false;
        }
    }
    return _xhr;    
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:26:19.810

看看[AJAX](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)。它允许您在不刷新页面的情况下从服务器加载其他信息。您将如何将其存储在服务器上 - 取决于您。您只需要可以通过某些 URL 访问这些文件。它只是允许从服务器异步下载任何数据（JSON/文本/HTML/XML）并在您的 JS 代码中使用它。

对我来说，最好是使用 JSON 格式来在服务器上存储关卡信息，因为它可以很容易地转换为 JS 对象。

# php - OpenCart : 将订单确认电子邮件发送到多个电子邮件地址

> ID：15002100
> 
> 赞同：4
> 
> 时间：2013-02-21T12:18:45.390
> 
> 标签：php, opencart

我已经配置了 OpenCart 商店，并且我想要我的 2 个电子邮件帐户上的订单确认电子邮件副本。我已经尝试过`vQmode`，但它不起作用。我已经尝试了所有可能的方法，但我一无所获。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T05:40:57.763

在您的管理面板中，转到系统选项卡-> 设置。

单击编辑并转到邮件选项卡。

最后一个选项，有额外的邮件警报，您可以在其中指定额外的邮件 ID，用逗号分隔

# javascript - Rangy: Can I improve the performance when restoring multiple character ranges for highlighting?

> ID：15002102
> 
> 赞同：4
> 
> 时间：2013-02-21T12:18:48.620
> 
> 标签：javascript, rangy

I am using [Rangy](http://code.google.com/p/rangy/) to help with some text highlighting functionality in a website. In short, the user can select some text, highlight the text (via button click), and the user can create multiple highlights this way.

The highlights are saved to a database, and at any point in the future the user can re-load the highlights.

However, I have a performance issue when using the `restoreCharacterRanges` which is part of the "TextRange" module. This performance issue becomes much more noticeable when there are more highlights to load.

Currently, I am using some code similar to below (just to point out, it works exactly how I want, it just isn't fast enough):

```
function LoadHighlight(start, end){
    var selectionRanges = [];
    selectionRanges.push({
        "characterRange": {
            "start": start,
            "end": end
        }
    });

    var selection = rangy.getSelection();

    selection.restoreCharacterRanges(myElement, selectionRanges);

    highlighter.highlightSelection(highlightClass, selection);
} 
```

With the code example above, the performance issue occurs during the `selection.restoreCharacterRanges` call. It takes about 0.6 seconds to run in my test.

Now, when loading multiple highlights, I expectedly get this 0.6 second hit for each one, and this can quickly add up.

Is there something I can do to load multiple highlights more efficiently? Maybe with one call to `restoreCharacterRanges`?

I have attempted to push multiple selections to the `selectionRanges` array, but this seems to have undesired effects when the `highlightSelection` call is made (i.e. it only highlights the first)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:29:34.410

您可以为此使用荧光笔的`serialize()`and `deserialize()`( [demo](http://rangy.googlecode.com/svn/trunk/demos/highlighter.html) ) 方法。我最近向 Highlighter 添加了一种更高效的序列化范围的方法，它还消除了对 TextRange 模块的依赖，我不得不承认，对于很多任务来说，这非常慢。

# ios - Creating Coreplot line graph with x and y axes in iOS

> ID：15002108
> 
> 赞同：0
> 
> 时间：2013-02-21T12:19:08.160
> 
> 标签：ios, core-plot, linegraph

I have looked over a lot of sample tutorials of Core plot but having issues in most of them. If Can anyone provide a working tutorial for creating line graph with data X=(Sep,Oct,Nov,Dec) and Y=(20,40,80,30) with X & Y axes also using Core Plot framework in iOS? Any code would be much helpful to me..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:25:16.630

如果您想在核心图中制作线性图，请记住一些事项。首先确保你的视图控制器能够绘制图形。您需要将其设为绘图委托、绘图数据源和绘图空间委托。

```
@interface ViewController : UIViewController <CPTScatterPlotDelegate, CPTPlotSpaceDelegate, CPTPlotDataSource> 
```

这是在 .h 文件中添加的。**不要忘记也导入 CorePlot-cocoaTouch.h！

接下来，在视图中确实出现了您希望将变量放入数组的方法。这是我为制作快速线性图所做的示例。

```
- (void)viewDidAppear:(BOOL)animated
{
float b = 1;
float c = 5;

Xmax = 10;
Xmin = -10;
Ymax = 10;
Ymin = -10;

float inc = (Xmax - Xmin) / 100.0f;
float l = Xmin;

NSMutableArray *linearstuff = [NSMutableArray array];

for (int i = 0; i < 100; i ++)
{
    float y = (b * (l)) + c;
    [linearstuff addObject:[NSValue valueWithCGPoint:CGPointMake(l, y)]];
    NSLog(@"X and Y = %.2f, %.2f", l, y);
    l = l + inc;
}

self.data = linearstuff;
[self initPlot];
} 
```

对 [self initPlot] 的调用调用一个函数来实际制作图形。它与那里的所有示例代码非常相似。

将数据放入数组后，接下来的事情就是按照您希望的方式制作图表。再次查看 configureHost、configure Graph 和类似内容的所有代码，它就在 Core Plot 网站上。另一个要记住的重要事情是 numberOfRecordsForPlot 方法。这是我的样本。这可以让您知道您有多少数据点。

```
- (NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
return [_data count];
} 
```

_data 是我用来存储所有内容的数组。接下来，您要绘制数据图表。使用 numberForPlot 方法。这里又是一个样本。

```
- (NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
NSLog(@"numberForPlot");
if ([plot.identifier isEqual:@"linear"])
{
    NSValue *value = [self.data objectAtIndex:index];
    CGPoint point = [value CGPointValue];

    // FieldEnum determines if we return an X or Y value.
    if (fieldEnum == CPTScatterPlotFieldX) 
    {
        return [NSNumber numberWithFloat:point.x];

    }
    else    // Y-Axis
    {
        return [NSNumber numberWithFloat:point.y];

    }
    NSLog(@"x is %.2f", point.x);
    NSLog(@"y is %.2f", point.y);
}
return [NSNumber numberWithFloat:0];
} 
```

希望这会让你开始。Core Plot 是一种很好的图表方式，他们的网站充满了重要的信息。希望这可以帮助。

# ruby - ruby quiz - 使用 while 循环重新分配数组值

> ID：15002110
> 
> 赞同：1
> 
> 时间：2013-02-21T12:19:12.293
> 
> 标签：ruby

我有一个来自“简单”红宝石测验的例子。我想重新分配一个数组的值（例如 word1[0]），如果它等于（==）array1 的值到 array2 的值​​。看一下代码，很明显：

```
array1 = Array.new
array1 = ('A'..'Z').to_a

array2 = Array.new
array2 = ('A'..'Z').to_a
array2 = array2.rotate(2)

puts "enter a word:"
word1 = gets.chomp
word1 = word1.upcase.split(//)

n = 0

word1.each do
  while n < 26
    if word1[n] == array1[n]
      word1[n] = array2[n]
    end
    n += 1
  end
end

puts word1   # This word should now be "encoded" and not easy to read. 
```

我已经尝试过这段代码，它只是随机更改我输入的任何单词的 1-2 个字母（gets.chomp）。

因此 word1 是我期望的一个数组，每个元素（字母）都与 array1[0] 进行比较，如果相等，那么它将被重新分配给 array2[0] 的值。如果 word1[0] 和 array1[0] 不相等，则 'n' 的值将变为 +1，并且再次运行该块。

注意：我不想有一个简单的公式来解决这个问题，我想真正了解这里发生了什么以及为什么我的每次迭代都没有按我的预期工作。因此，如果您能以“我的知识水平”回答这个问题，那就太棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:13:51.923

首先，您忘记在连续单词之间重置计数器 N。您将 N 设置为零，然后开始迭代单词。

因此，在概述中，您的算法的行为如下：

对于第一个单词，N 迭代超过 0..25
对于第二个单词，N 以 26
开头，并且根本不迭代对于第三个单词，N 以 26 开头，并且不迭代
.. 等等。

因此，对于完整的初学者，请执行以下操作：

```
array1 = Array.new
array1 = ('A'..'Z').to_a

array2 = Array.new
array2 = ('A'..'Z').to_a
array2 = array2.rotate(2)

puts "enter a word:"
word1 = gets.chomp
word1 = word1.upcase.split(//)     # <-- note that you REPLACE the input string
                                   # with an sequence of STRINGS produced by SPLIT

word1.each do                      # for each STRING in the SEQUENCE
  n = 0
  while n < 26                     # scan all 26 letters from ARRAY
    if word1[n] == array1[n]       # ... WTF
      word1[n] = array2[n]
    end
    n += 1
  end
end 
```

现在，您将至少对每个单词保持字母扫描以相同的方式运行。但是，这也不会按预期工作，而是完全不同的原因。

您实际上如何使用N？

```
 if word1[n] == array1[n]
      word1[n] = array2[n]
    end 
```

因此，您从 SEQUENCE 中读取 Nth WORD
.. 并将其与 array1 中的 Nth LETTER 进行比较。

这真的是你想做的吗？完全没有。

您很可能想要替换 WORD 中的每个字母以及由两个数组形成的字母对。

所以，相反，你想：

*   从 WORD1 中读取第 N 个字母
*   然后检查它在 array1 中的**索引**
*   然后从该索引中读取替换字母
*   然后将字母写回WORD中的第N位：

    ```
    letter = word[position]
    letterindex = array1.index(letter)
    substitution = array2[letterindex]
    word[position] = subsitution 
    ```

您也可以将其压缩为 oneliner：

```
 -- loop
    -- loop2
      word[position] = array2[array1.index(word[position])] 
```

但是，请注意我现在说`position`的不是`N`。您使用`N`的范围是 0..25，表示 ARRAY 中字母的索引。

但是，为了检查单词的字母，您需要遍历**单词的 letters**。这个词有多长？当然，不是 0..25！

还要注意细微的变化：`word`而不是`word1`. 我说“单词”和“单词的字母”，而不是“arrayofwords”。最初，您`N`也曾经从序列中读取第 N 个单词，让我们保留它。但是由于我们需要遍历单词的字母，所以需要一个不同的变量，例如`position`：

```
n = 0

arrayOfWords.each do

    word = arrayOfWords[n]

    position = 0

    while position < word.length
        letter = word[position]
        letterindex = array1.index(letter)
        substitution = array2[letterindex]
        word[position] = subsitution
        position += 1
    end

    n += 1
end 
```

请注意如何`N`保持并且仅随每个单词增加，以及如何`position`每次重置为零，以迭代**当前单词**的实际长度。

在 Ruby 中，这是一种过于复杂的方法。Ruby 有很多可以缩短代码的技巧。例如，该`each`方法不仅是一个循环。它实际上*给了你每个单词**，你根本不需要 N：

```
arrayOfWords.each do |word|

    position = 0

    while position < word.length
       word[position] = array2[array1.index(word[position])]
       position += 1
    end

end 
```

请注意我如何在条形图中添加“单词”|| `each`来电。以类似的方式，您实际上也可以摆脱它`position`，但这反过来会使代码更短，但更难阅读/理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:30:33.327

我认为问题在于您使用相同的“计数器”`n`来检查两个不同的数组，试试这个：

**编辑** 根据您的评论，由于您只需要如此争夺，因此这是一种可能的方法：

```
array1 = ('A'..'Z').to_a
array2 = ('A'..'Z').to_a.shuffle

puts "enter a word:"
word1 = gets.chomp
word1 = word1.upcase.split(//)

n = 0

word1.each do
  word1[n] = array2[n]
  n +=1
end

puts word1 
```

即使您使用相同的单词，它也会始终生成不同的输入，因为`shuffle`在您的`array2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T14:55:29.213

我终于设法用一种非常简单的方法回答了我的问题：

```
def cypher(input_array)

  normal_array = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
  cypher_array = normal_array.rotate(2)
  awesome_cyphered_array = []

  input_array.each do |element|
    0.upto(25) do |i|
      case element
        when normal_array[i]
          awesome_cyphered_array << cypher_array[i]
      end
    end
  end
  puts awesome_cyphered_array.join  
end

# START of my program
puts "Enter a sentence, it will be cyphered!"
sentence = gets.chomp
length = sentence.length
sentence_as_array = sentence.upcase.split(//).reverse!

make_it_an_array = []

1.upto(length) do 
  make_it_an_array << sentence_as_array.pop
end

cypher(make_it_an_array) 
```

# android - 在android中绘制触摸事件

> ID：15002123
> 
> 赞同：0
> 
> 时间：2013-02-21T12:19:41.913
> 
> 标签：android, touch-event, buttonclick

在我的应用程序中，我想在 touchevent 上获得位置。但是当我点击按钮之后，我想调用 ontouchevent 和 onDraw() 方法并获得位置。我该怎么做？请帮帮我

```
 public void getPos(View v){
      //here i want to call onTouchEvent method..
    }

     @Override
public boolean onTouchEvent(MotionEvent event) {

    if(event.getAction()==MotionEvent.ACTION_UP) {

       Log.d("position", event.getX() + "-" + event.getY());
        return true;
    }
return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:02:08.680

您不会自己调用这些方法。所有命名`on...`的方法都是在某些事件发生时由 Android 系统调用的回调方法。在您的情况下，当存在未在其他地方处理的触摸事件时，将调用此方法（在 Activity 中定义）。触摸按钮*由*按钮处理，因此不会调用 Activity 的 onTouchEvent。

您可以做的是将 onTouchEventListener 添加到您的按钮：

因此，在您的`onCreate()`方法（Android 在创建活动时调用的另一个方法）中，找到您的按钮并添加侦听器，如下所示：

```
View button = findViewById(R.id.your_button_id);
button.setOnTouchListener(new OnTouchListener() {
    onTouch(View v, MotionEvent event) {
        if(event.getAction()==MotionEvent.ACTION_UP) {
            Log.d("position", event.getX() + "-" + event.getY());
        }
        return false;
    }
} 
```

请注意，我总是返回`false`不干扰按钮。如果您 return `true`，该事件将被“吃掉”并且不再传递给视图处理。所以你可以随意调整它。顺便提一句。如您所见，您可以将 OnTouchListener 附加到任何视图，因此您可能根本不需要实际的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:48:29.810

手动调用 onTouchEvent 对你没有任何好处，因为**onTouchEvent**是 android 用来传递触摸事件的回调方法（你不能调用它并期望它为你准备好触摸数据）

相反，您可以做的是跟踪您的触摸事件，并在调用**getPos**时读取最新的触摸事件数据。您的代码应如下所示：

```
private float lastX = -1;
private float lastY = -1;

public void getPos(View v){
  //here i want to call onTouchEvent method..
    if (lastX == -1 || lastY == -1) {
      // no touch events 
       return;
    }
    // do whatever you want with the x,y values
    //reset them for the next check
    lastX = -1;
    lastY = -1;
}

    @Override
 public boolean onTouchEvent(MotionEvent event) {

    if(event.getAction()==MotionEvent.ACTION_UP) {
      lastX = event.getX();
      lastY = event.getY();
      Log.d("position", event.getX() + "-" + event.getY());
      return true;
    }
    return false;
  } 
```

# jquery - How can we use multiple Ids/content in a single selector in JQuery

> ID：15002129
> 
> 赞同：3
> 
> 时间：2013-02-21T12:20:02.730
> 
> 标签：jquery, jquery-selectors

Please suggest me proper jquery selector for this. how to optimise this?Please suggest

```
$("#name").keyup(function (event) {
    if (event.keyCode == 13) {
        $("#Search").click();
    }
});
$("#userName").keyup(function (event) {
    if (event.keyCode == 13) {
        $("#Search").click();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:21:11.290

像这样使用：-

```
 $("#name,#userName").keyup(function (event) {
        if (event.keyCode == 13) {
            $("#Search").click();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:23:00.367

请用以下代码替换。

```
$("#name,#userName").keyup(function (event) {
        if (event.keyCode == 13) {
            $("#Search").click();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:21:14.630

为两者调用相同的类名，然后引用该类

```
$(".name").keyup(function (event) {
    if (event.keyCode == 13) {
        $("#Search").click();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T12:22:17.827

你有两个选择。

**选项1**

您想按 ID 引用项目，但应用相同的逻辑，使用[多个选择器](http://api.jquery.com/multiple-selector/)：

```
$("#name,#userName").keyup(function (event) {
    if (event.keyCode == 13) {
        $("#Search").click();
    }
}); 
```

**选项 2**

您希望将相同的逻辑应用于一组项目，而不是按 ID。在这种情况下，请使用[类选择器](http://api.jquery.com/class-selector/)：

```
$(".MyGroup").keyup(function (event) {
    if (event.keyCode == 13) {
        $("#Search").click();
    }
});

// Apply .MyGroup class to each item you wish to capture the keyup event
// <input type="text" class="MyGroup" ... /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T12:22:44.100

像这样：

```
$("#name, #userName").keyup(function (event) {
    if (event.keyCode == 13) {
        $("#Search").click();
    }
}); 
```

# git - git - when doing git pull, I got message Fast-forward .gitignore and did nto get some part of the code base

> ID：15002135
> 
> 赞同：0
> 
> 时间：2013-02-21T12:20:17.313
> 
> 标签：git, git-pull

Yesterday, the developer I work with did some branch cloning to accomplish what he needed to accomplish, but when I did a git pull, the system pulled some items, and then I got a Fast-forward .gitignore on some of the files which seem to not have gotten added.

But when I did git pull origin master the system told me that the branch is already up to date.

Is there a way I can get the files that did not get pulled? And could someone please help me understand what is happening? Here is the message from the original pull:

```
remote: Counting objects: 33, done.
remote: Compressing objects: 100% (19/19), done.
remote: Total 20 (delta 13), reused 0 (delta 0)
Unpacking objects: 100% (20/20), done.
From https://bitbucket.org/genadinik/fundraising
   a49bd87..eef5124  master     -> origin/master
Updating a49bd87..eef5124
Fast-forward
 .gitignore                                            | 140 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 Crashlytics.framework/Versions/A/Crashlytics          | Bin 1893656 -> 1911576 bytes
 Crashlytics.framework/Versions/A/Resources/Info.plist |  20 ++----------
 Crashlytics.framework/run                             | Bin 448880 -> 372912 bytes
 Fundraising/AppDelegate.m                             |   5 +++
 Fundraising/Fundraising-Info.plist                    |   2 +-
 Fundraising/en.lproj/MainStoryboard_iPhone.storyboard | 144 +------------------------------------------------------------------------------------
 7 files changed, 149 insertions(+), 162 deletions(-)
 create mode 100644 .gitignore 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:25:32.847

首先，请注意，如果您在 Linux 或 Mac 上，.gitignore 是一个隐藏文件。您可以使用 ls -a 来显示它。

然后，如果文件被意外擦除，您可以在存储库的根目录下使用以下命令：

```
git checkout HEAD .gitignore 
```

以最新版本的方式恢复 .gitignore 文件。我不能再帮你了。

你应该把你写的东西读两遍，有些句子也没有意义。

# c# - How TopShelf can capture arguments like 'install' or 'start' which is ignored by my Main method?

> ID：15002137
> 
> 赞同：2
> 
> 时间：2013-02-21T12:20:25.610
> 
> 标签：c#, .net, windows-services, console-application, topshelf

I was checking the TopShelf as a beginner.

I see that when you compile your console app you can install your service as:

```
MySampleWindowsService.exe install 
```

and start:

```
MySampleWindowsService.exe start 
```

What I do not understand is my console app does not do anything with those parameters.

**Question**:So how the TopShelf captures those 'install' or 'start' arguments?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T12:27:34.977

它可能使用[`Environment.CommandLine`](http://msdn.microsoft.com/en-gb/library/system.environment.commandline.aspx)or [`Environment.GetCommandLineArgs`](http://msdn.microsoft.com/en-gb/library/system.environment.getcommandlineargs.aspx)。

进程的命令行存储在创建进程时预留的特殊内存区域中，这是在进程执行期间随时可用的方式。它可以由本机[`GetCommandLine`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683156%28v=vs.85%29.aspx)函数检索，这是在 Windows 进程中获取命令行参数的“官方”方式，并由 .NET`Environment`成员包装。

在许多语言中将命令行作为参数传递给“main”函数是该语言提供的一种便利。编译器生成启动代码，该代码调用`GetCommandLine`并将结果作为参数传递给`main`（或等效的）。类似地，来自的返回值（如果有）`main`通常由编译器生成的进程拆卸逻辑设置为进程的退出代码。

# java - Parse a line in Java

> ID：15002139
> 
> 赞同：-4
> 
> 时间：2013-02-21T12:20:29.140
> 
> 标签：java

```
String line = "a:b:c:d"   // Valid 
```

In the above line , I have 4 values separated by 3 ":".

```
Sting invalidLine = "a:b:c" //Invalid 
```

As 4th value is missing

```
String invalidLine = "a:b:c:"  //Invalid 
```

As 4th value is missing .

I want to spit it the line on count ofdelimiter ":".

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:25:20.463

简单易用，只需使用：

```
String[] stringValidTokens = line.split(":"); 
```

为您提供一个字符串数组，您可以通过迭代或通过检查项目数来检查是否有效......或对它做任何您喜欢的事情，您可以将其与无效的字符串数组进行比较。

因此，要比较两个字符串，请执行以下操作：

```
boolean valid = false;
String[] stringValidTokens = line.split(":");
String[] stringinValidTokens = invalidline.split(":");
if(stringValidTokens.size() == stringInvalidTokens.size()){
valid = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:29:52.357

*我想将它吐在计数分隔符“：”上。*

此代码根据 ofdelimiter ":" 的计数拆分给定的字符串

```
public static void main(String[] args) {
    String line = "a:b:c:d";
    int count = line.length() - line.replace(":", "").length();
    System.out.println(count);
    String[] str = null;
    if (count == 3) {
        str = line.split(":");
        System.out.println(Arrays.toString(str));
        if (Arrays.asList(str).contains("") || str.length < 4)
            System.out.println("Invalid");
    } else {

        System.out.println("Invalid");
    }

} 
```

# java - #{facesContext} EL 表达式在运行时未解析

> ID：15002141
> 
> 赞同：3
> 
> 时间：2013-02-21T12:20:32.957
> 
> 标签：java, jsp, jsf, el, jsf-1.2

我正在研究 JSF 1.x 在 JavaServer Faces in Action 中所述的一个示例。

我的“Faces Context”的 EL 表达式在运行时没有在检索图像的命令按钮中执行。

**我的项目结构如下：**

![结构](../Images/fb27c0948cc15577f0b19b84df0269a7.png)

在这个例子中我没有使用任何 Java 代码，它只包含一个登录页面。

**login.jsp 如下：**

```
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>

<f:view>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="stylesheet.css" />

    <script type="text/javascript">
        function set_image(button, image){
            button.src = img;
        }
    </script>

    <title><h:outputText value="ProjectTrack" /></title>
</head>

<body>

    <h:form>
        <h:panelGrid columns="2" border="0" cellpadding="3" cellspacing="3">

            <h:graphicImage url="/images/logo.png"
                    alt="Welcome to ProjectTrack" title="Welcome to ProjectTrack"
                    width="149" height="160" />

            <h:panelGrid columns="3" border="0" cellpadding="5" cellspacing="3" headerClass="login-heading">

                <f:facet name="header">
                    <h:outputText value="ProjectTrack" />
                </f:facet>

                <h:outputLabel for="userNameInput" >
                    <h:outputText value="Enter your user name: " />
                </h:outputLabel>

                <h:inputText id="userNameInput" size="20" maxlength="30" required="true">
                    <f:validateLength minimum="5" maximum="30"/>
                </h:inputText>

                <h:message for="userNameInput" />

                <h:outputLabel for="passwordInput">
                    <h:outputText value="Password"/>
                </h:outputLabel>

                <h:inputSecret id="passwordInput" size="20" maxlength="20" required="true">
                    <f:validateLength minimum="5" maximum="15" />
                </h:inputSecret>

                <h:message for="passwordInput" />

                <h:panelGroup>
                    <h:commandButton  action="success" 
                                image="#{facesContext.externalContext.requestContextPath}/images/submit.gif" 
                                onmouseover="set_image(this, '#{facesContext.externalContext.requestContextPath}/images/submit_over.gif');"
                                onmouseout="set_image(this, '#{facesContext.externalContext.requestContextPath}/images/submit.gif');" 
                            />
                </h:panelGroup>

            </h:panelGrid>

        </h:panelGrid>
    </h:form>
</body>
</f:view>
    </html> 
```

**我的部署描述符 web.xml 如下：**

```
<web-app version="2.5"
      xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <display-name>Project Track</display-name>
    <description>Sample Project</description>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>faces/login.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

**Faces-config.xml 如下：**

```
<?xml version="1.0"?>
<!DOCTYPE faces-config PUBLIC
     "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN"
     "http://java.sun.com/dtd/web-facesconfig_1_0.dtd">

<faces-config>

    <application>
        <message-bundle>ptrackResources</message-bundle>
    </application>

    <navigation-rule>
        <from-view-id>/login.jsp</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/inbox.jsp</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>failure</from-outcome>
            <to-view-id>/login.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>

</faces-config> 
```

**我的 Maven 依赖项如下：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.achutha.labs</groupId>
  <artifactId>03JsfExample</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>
  <name>03JsfExample</name>
  <description>Project Track</description>

  <dependencies>

        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>1.2_14</version>
        </dependency>
        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>1.2_14</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

        <!-- EL -->
        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>el-impl</artifactId>
            <version>2.2</version>
        </dependency>

    </dependencies>

    <build>
        <finalName>JavaServerFaces</finalName>

        <plugins>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <url>http://localhost:8090/manager/text</url>
                    <server>TomcatServer</server>
                    <path>/balaji</path>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

应用程序运行成功。但是“提交的图像”按钮未显示，该按钮是通过运行时表达式检索的。

**浏览器显示：**

![浏览器显示](../Images/70de4c07c10cc54301d37f2267aa18f8.png)

我已经配置了我的 JBoss 工具，从中我可以看到评估表达式并在部署之前显示提交按钮的预览：

**Eclipse 屏幕截图：**

![Eclipse 屏幕截图](../Images/0d1b8fa50ea480bc28ad43969dc6c194.png)

中使用的 EL 表达式在运行时不求值。

```
<h:commandButton  action="success" 
                                image="#{facesContext.externalContext.requestContextPath}/images/submit.gif" 
                                onmouseover="set_image(this, '#{facesContext.externalContext.requestContextPath}/images/submit_over.gif');"
                                onmouseout="set_image(this, '#{facesContext.externalContext.requestContextPath}/images/submit.gif');" 
                            /> 
```

我必须使用 JSF 1.x 并且无法将其升级到 JSF 2。请向我建议解决方案，并帮助我知道出了什么问题。

我的问题类似于此链接中所述的问题： [FacesContext not resolve at run-time](http://www.java.net/node/703730)

**编辑：**

我刚刚添加了一个 Debug 语句，`login.jsp`如下所示：

```
<h:outputText value=" Debug test for EL exp : #{facesContext.externalContext.requestContextPath}/images/submit.gif" /> 
```

**调试结果：**

![调试结果](../Images/938144f29b7ddf05a3fb273dbb7b6f35.png)

表达式在运行时被评估，但我觉得结果不能包含`/balaji/images/submit.gif`，它应该只包含`/images/submit.gif`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:39:42.893

隐式 EL 变量`#{facesContext}`仅在 JSF2 中可用。评论中建议的速记`#{request}`仅在 Facelets 中可用。

您在 JSP 上使用 JSF1。你应该`${pageContext.request.contextPath}`改用。

* * *

**与具体问题**无关**`<h:commandButton image>`，已经是上下文相关的。您无需在其中指定它。它仅对您的 JS 鼠标悬停/移出功能是必需的。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:20:05.143

您已经设置了`url-pattern`contains `/faces/*`，您必须使用此模式访问您的 JSF 页面或更改为其他模式。其他模式示例：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.face</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
  </context-param>
  <security-constraint>
    <display-name>Disallow direct access to the XHTML Documents</display-name>
    <web-resource-collection>
      <web-resource-name>XHTML</web-resource-name>
      <url-pattern>*.xhtml</url-pattern>
    </web-resource-collection>
    <auth-constraint />
  </security-constraint> 
```**

# javascript - 将字符串转换为javascript中嵌套对象的属性

> ID：15002142
> 
> 赞同：4
> 
> 时间：2013-02-21T12:20:33.943
> 
> 标签：javascript

我正在尝试将字符串`"key1.key2"`作为对象的属性进行访问。例如 ：

```
var obj = { key1 : {key2 : "value1", key3 : "value2"}};
var attr_string = "key1.key2"; 
```

该变量`attr_string`是嵌套对象中的属性字符串，由`"."`. 它可以是任何深度，例如`"key1.key2.key3.key4..."`

我想要一些类似的东西`obj.attr_string`给它的价值`obj["key1"]["key2"]`是`"value1"`

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:32:04.367

感谢@dfsq 让我记住了`eval`.

这是我所期待的，一种评估对象字符串属性的简单方法。

```
var obj = { key1 : {key2 : "value1", key3 : "value2"}};
var attr_string = "key1.key2";

var result = eval("obj."+attr_string); 
```

无需拆分字符串，`"."`然后将其放入循环中以获取值。`eval`可以使用 javascript 代码语句评估任何字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:52:01.633

这就是你所追求的吗？

```
var obj = { key1: { key2A: 'x', key2B: { key3: 'y' } } },
    attr_string = 'key1.key2B.key3',

    find = function ( obj, str ) {

        var index = 0,
            arr = str.split( '.' );

        if ( arr.length ) {
            while ( typeof obj === 'object' &&  arr[ index ] in obj ) {
                obj = obj[ arr[ index ] ];
                index++;
            }
        }

        return obj;

    };

find( obj, attr_string ); // Returns 'y' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:24:18.037

```
var target = obj;
for (var part in attr_string.split("."))
  target = target[part]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T10:00:46.597

将@John 的答案固定为可重复使用的函数（我将自己使用）

```
function nested(obj, attrString){
    var path = attrString.split(".");
    for (var i in path){
        obj = obj[path[i]];
    }
    return obj;
}

// test it out...
x = {a:{b:{c:"happy days"}}};
console.log(nested(x, 'a'));
console.log(nested(x, 'a.b'));
console.log(nested(x, 'a.b.c')); 
```

# assembly - 汇编语言 - 标志设置让我头疼

> ID：15002143
> 
> 赞同：2
> 
> 时间：2013-02-21T12:20:37.083
> 
> 标签：assembly, x86, flags, cpu-registers

我试图确定在以下操作之后应该设置哪些各种标志（进位、符号、零、溢出）：

```
mov ax, 7ff0h;       ax register is now 7ff0h

add al, 10h; 
```

我对汇编如何处理这个感到困惑。因为我们只添加到寄存器的 al 部分，其中包含`f0h`,`f0h + 10h`给出`100h`. 这是否设置了溢出标志？携带标志？两者都不？我认为会设置溢出标志，但是，我想到的另一种可能性是程序检测到这一点并自动将 ah 寄存器从 更改`7fh`为`80h`，从而使`ax`寄存器完整`8000h`。这在理论上不会设置进位标志，而是设置符号标志和溢出标志，因为我们的总数`8000h`现在是负数。谁能解释这是如何处理的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:45:16.373

来自英特尔指令手册上的`ADD`指令：

> ADD 指令执行整数加法。它评估有符号和无符号整数操作数的结果，并设置 OF 和 CF 标志以分别指示有符号或无符号结果中的进位（溢出）。SF 标志表示签名结果的符号。

在调试器中运行一个简单的测试，我们可以看到设置了 CF 标志，并且只更改了形成 AL 的位：

```
.386
.MODEL FLAT

.STACK 1024

ExitProcess PROTO NEAR32 stdcall, dwExitCode:DWORD

.CODE
_start:
    XOR EAX,EAX
    MOV AX,7ff0h
    ADD AL,10h
    PUSH 0  ;EAX is now 0x00007F00
    CALL ExitProcess

PUBLIC _start
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:05:30.330

我玩了一下调试命令（随 x86 Windows 一起提供）：

```
-a 100
1A2F:0100 mov ax, 7ff0
1A2F:0103 add al, 10
1A2F:0105
-t =100 2

AX=7FF0  BX=0000  CX=0000  DX=0000  SP=FFEE  BP=0000  SI=0000  DI=0000
DS=1A2F  ES=1A2F  SS=1A2F  CS=1A2F  IP=0103   NV UP EI PL NZ NA PO NC
1A2F:0103 0410          ADD     AL,10

AX=7F00  BX=0000  CX=0000  DX=0000  SP=FFEE  BP=0000  SI=0000  DI=0000
DS=1A2F  ES=1A2F  SS=1A2F  CS=1A2F  IP=0105   NV UP EI PL ZR NA PE CY
1A2F:0105 0000          ADD     [BX+SI],AL                         DS:0000=CD
- 
```

NV [无溢出] PL（正） CY [进位]

# python - 排序应用程序版本号

> ID：15002146
> 
> 赞同：0
> 
> 时间：2013-02-21T12:20:51.447
> 
> 标签：python

我是初学者。我想编写一个脚本来从其文件夹中清理旧的 Google Chrome 应用程序版本，我想知道如何以有效的方式“排序”应用程序版本号。最好的方法是什么？

这是我的“春季大扫除”脚本：

```
import os
import sys
import re
import operator
import shutil

GOOGLE_CHROME_APPLICATION_VERSIONS_DIRECTORY=r'C:\Documents and Settings\Administrator\Local Settings\Application Data\Google\Chrome\Application'

REGEX_GOOGLE_CHROME_APPLICATION_VERSION = '^(\d+)\.(\d+)\.(\d+)\.(\d+)$'

def sorted_by_version_number(versions_list):
  version_elements = len(versions_list[0])
  for index in range(version_elements-1, 0, -1):
    key = operator.itemgetter(index)
    versions_list.sort(key=key, reverse = True)
  return versions_list

def delete_old_google_chrome_versions():
  REGEX = re.compile(REGEX_GOOGLE_CHROME_APPLICATION_VERSION)
  application_versions = []
  for filename in os.listdir(GOOGLE_CHROME_APPLICATION_VERSIONS_DIRECTORY):
    filepath = os.path.join(GOOGLE_CHROME_APPLICATION_VERSIONS_DIRECTORY,
                            filename)
    if os.path.isdir(filepath):
      match = REGEX.match(filename)
      if match:
        version = (v1, v2, v3, v4) = [int(match.group(i)) for i in range(1, 5)]
        application_versions.append(version)
  versions_to_delete = sorted_by_version_number(application_versions)[1:]
  for application_version in versions_to_delete:
    directory_name = '.'.join([str(v) for v in application_version])
    directory_path = os.path.join(GOOGLE_CHROME_APPLICATION_VERSIONS_DIRECTORY,
                                  directory_name)
    print('Deleting Google Chrome application directory: {}...'.format(
      directory_path))
    # shutil.rmtree(directory_path)

def main():
  delete_old_google_chrome_versions()

if __name__ == '__main__':
  main() 
```

或者，如何改进这个脚本？任何建议都会有所帮助，因为我在 Python 中真的没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:22:46.797

我对这个问题的回答直接转换成 Python：

[如何使用js比较软件版本号？（只有数字）](https://stackoverflow.com/questions/6832596/how-to-compare-software-version-number-using-js-only-number/6832706#6832706)

您可以使用此比较算法对列表进行排序。

# magento-1.7 - 在哪里可以找到更新的 Magento API 文档？

> ID：15002151
> 
> 赞同：1
> 
> 时间：2013-02-21T12:21:11.407
> 
> 标签：magento-1.7

刚刚下载了 Magento 的社区版 (v1.7.0.2)，想知道哪里有完整记录的 API？我查看了[http://docs.magentocommerce.com/](http://docs.magentocommerce.com/)但我认为这不是最新的，并且在某些代码中有些“闻起来很不对劲”，正在查看 API 文档告诉我一个方法返回了“ void”，而实际上它确实返回了一个对象！（它也是用 PHPDoc v1.4.3 生成的，我认为它已经存在了一段时间）我正在考虑自己生成文档，但源代码没有充分标记，所以我认为它不会有帮助很多！

提前致谢！

# php - 如何在 Yii 中忽略部分 URL

> ID：15002162
> 
> 赞同：0
> 
> 时间：2013-02-21T12:21:38.303
> 
> 标签：php, url-rewriting, yii

在我的项目中，所有 js 和 css url 看起来都像 [http://my.domain.com/XXX/js/script.js](http://my.domain.com/XXX/js/script.js) 是 XXX - 是一个发布版本，每次提交到 master 时都会增加。但实际上所有脚本都位于[http://my.domain.com/js/script.js](http://my.domain.com/js/script.js)没有 XXX 所以我需要忽略这个 XXX。我怎么能做到。试图用 url manager 来做，但没有结果。完成了，因为 CDN 忽略了链接末尾的 ?V=XXX 并返回所有缓存的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:24:10.207

您可以在应用程序根目录中使用 .htaccess 文件，其中包含此文件

```
#Forward all non-existent files/directories to Yii
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) XXX/index.php/$1 [QSA,L] 
```

# 编辑：

在理解了这个问题之后，我认为你应该在你的版本控制系统上有一个 post-commit 钩子来改变你的 .htaccess 文件中的 XXX

# python - python在两个n x 1 numpy数组列表之间查找匹配项

> ID：15002163
> 
> 赞同：0
> 
> 时间：2013-02-21T12:21:41.620
> 
> 标签：python, numpy

我一直在寻找这种类型问题的解决方案：例如（因为我的真正问题更复杂）：

```
import numpy

a=[numpy.array([1,2]),numpy.array([2,2]),numpy.array([3,2]),numpy.array([4,2])]
b=[numpy.array([2,2]),numpy.array([3,2]),numpy.array([6,2]),numpy.array([5,2]),numpy.array([5,2])]

ya=numpy.array([1,2,3,4])
size_a=len(a)
size_b=len(b)
yb=numpy.empty((size_b,1))
yb.fill(numpy.nan)

for i in xrange(size_b):
    for j in xrange(size_a):
        if numpy.array_equiv(yb,ya):
            ya[i]=yb[j] 
```

我只想用匹配 b 的一个元素的元素的索引的 ya 值填充 yb。由于 yb 比 ya 长，因此 yb 在循环末尾包含“nan”是正常的。下面的代码需要很长时间才能继续。事实上我不知道它是否有效，因为我没有等待循环结束......

在实际情况下，ya 和 yb 更长：7007 和 3525

还有其他方法可以实现我的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:57:12.877

要查找数组列表之间的匹配，最直接的方法是将列表广播到相同的`n x m`形状；这可以完成，`np.tile`但使用`stride_tricks`更快：

```
a = np.array(a)
b = np.array(b)
shape = (2, a.shape[0], b.shape[0])
from numpy.lib.stride_tricks import as_strided
a = as_strided(a, shape=shape, strides=(a.strides[1], a.strides[0], 0))
b = as_strided(b, shape=shape, strides=(b.strides[1], 0, b.strides[0]))
np.where(np.all(a == b, axis=0)) 
```

这给出了结果

```
(array([1, 2]), array([0, 1])) 
```

即`a[1] == b[0]`, 和`a[2] == b[1]`, 没有其他匹配项。

# windows - 我在哪里可以获得包含 PDB 的 VC++ 2005 可再发行版本 8.0.50727.5592？

> ID：15002164
> 
> 赞同：0
> 
> 时间：2013-02-21T12:21:42.290
> 
> 标签：windows, visual-c++, debug-symbols, winsxs

有时我们客户的故障转储文件将包含对

```
mfc80u.dll  *C:\Windows\winsxs\x86_microsoft.vc80.mfc_1fc8b3b9a1e18e3b_8.0.50727.5592_none_cbf62b764709d1c9\mfc80u.dll  N/A N/A No matching binary found.       20  8.00.50727.5592 11.01.2011 07:32    6E860000-6E96F000   memory.dmp: Native  
msvcr80.dll *C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.5592_none_d09196c24426e2d4\msvcr80.dll N/A N/A No matching binary found.       21  8.00.50727.5592 11.01.2011 06:17    74E40000-74EDB000   memory.dmp: Native 
```

问题是，我没有得到正确的堆栈跟踪，因为这些 DLL（[从 2011 年 4 月开始）被 2011](http://support.microsoft.com/kb/2465367)[年 6 月](http://support.microsoft.com/kb/2538218)的进一步补丁取代，与[我在网上找到的相反，](http://wiki.mcneel.com/developer/sdksamples/vcredist)从MS[下载](http://www.microsoft.com/en-us/download/details.aspx?id=26347)*不*包含 5592 版本，而仅包含 CRT/MFC/... DLL 的 6195 版本。

我们可执行文件的清单指向版本`8.0.50727.4053`，但这无济于事，因为该版本被 5592 和后来的 6195 取代。SxSTrace 输出如下所示：（忽略德语文本并查看版本号）

```
INFORMATION: Verweis "Microsoft.VC80.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.4053"" wird aufgelöst.
...
    INFORMATION: Für ProcessorArchitecture "x86" wird der Verweis aufgelöst.
    INFORMATION: Für ProcessorArchitecture "x86" wird der Verweis aufgelöst.
        INFORMATION: Verweis für Kultur "Neutral" wird aufgelöst.
            INFORMATION: Bindungsrichtlinie wird angewendet.
                INFORMATION: Sucht nach Herausgeberrichtlinien in "C:\Windows\WinSxS\manifests\x86_policy.8.0.microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_517205a10f4550e3.manifest".
                INFORMATION: Die Assemblierungsversion wurde von der Herausgeberrichtlinie umgeleitet.
                INFORMATION: Die Bereitstellungsrichtlinien-Assemblierungsidentität ist Microsoft.VC80.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.6195". 
```

现在，也许我可以从客户的 PC 中获取确切的 DLL，但这仍然只剩下 DLL，而且我仍然没有任何调试符号（PDB 文件）。

因为，查看我的转储（例如 kernel32），我可以看到通常所有系统 DLL 都应该从 MS 符号服务器（或其缓存）加载——

```
kernel32.dll    C:\WINDOWS\Symbols\Cache\kernel32.dll\4e211484100000\kernel32.dll   N/A N/A Symbols loaded (source information stripped).   C:\WINDOWS\Symbols\Cache\wkernel32.pdb\0EB73428EC4E430FB8EDD94C5946855B2\wkernel32.pdb  3   6.01.7600.16850 16.07.2011 05:33    76820000-76920000   memory.dmp: Native 
```

~~我必须假设~~微软~~从他们的符号服务器中清除了这些文件的 5592 版本，因此~~如果客户 PC 确实包含 2011 年 4 月更新但不包含 2011 年 6 月更新，则有效地阻止了任何有用的调试。从我可以从 MS 页面推断，这些更新包含在 Windows 更新中，所以如果客户的更新机制不完整，我真的无能为力。

是否还有从 MS 下载的包含 5592 DLL 和 PDB 文件的原始补丁？

* * *

更新：似乎 MS 符号服务器*确实*包含 5592 DLL 版本的 PDB 文件，但它*不*包含 DLL。（现在这是否有意义是另一个问题，但也许这就是它与这些 DLL 一起工作的方式。）

我可以确定以下内容：

*   4053 的 PDB：`...\Cache\msvcr80.i386.pdb\7D5669C7431445CD84D149AE19FE3CD51\msvcr80.i386.pdb`
*   5592 的 PDB（因为 WinDbg 确实加载了那个）：`...\cache\msvcr80.i386.pdb\3FA5DD7B7FAF4F2EAC5ABEDC03012DB21\msvcr80.i386.pdb`
*   6195 的 PDB：`...Cache\msvcr80.i386.pdb\54C9E2F351544D1CB39517DC4B299EA81\msvcr80.i386.pdb`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T12:20:29.653

这些`pdb`文件是使用 WinDbg 分析（完整）转储所需的全部**文件**- WinDbg 不需要二进制文件，但 Visual Stuido (2005) 调试器*似乎确实*需要二进制文件。

所以在这种情况下不要使用 VS，而是使用 WinDbg 来分析这个特定的转储。

# asp.net - 为什么不从 javascript 调用 Actionresult 方法

> ID：15002166
> 
> 赞同：0
> 
> 时间：2013-02-21T12:21:50.863
> 
> 标签：asp.net, asp.net-mvc-3, razor

当我必须将此语句写入 Javascript 以调用具有 ID 的控制器 Actionresult 方法时

```
 function submitForm(state)
 {

     if (state != "") 
     {

         alert("Hellooo");

         var ele = document.getElementById('gridform').elements;

        var strvalue = "";

        for (var i = 0; i < ele.length; i++) 
        {

            if (ele[i].type == "checkbox") 
            {

                if (ele[i].name == "chkactive[]")
                 {

                     if (ele[i].checked == true)
                     {

                        if (strvalue != "")
                            strvalue = strvalue + "," + ele[i].value;
                        else
                            strvalue = ele[i].value;

                    }

                }
            }

        }

    }

    alert("ok fine" + strvalue);

    if (strvalue != null) 
    {
        alert("NOT Null");
    }

    $.post('@Url.Action("Useractive","Admin", new{})' + '?Id=' + strvalue); 
```

但我无法调用管理控制器的 UserActive 方法我调用此语句时没有任何错误，但只是没有使用 id 导航到控制器的方法......请帮助我我做错的原因是什么...... ！

这是我的控制器操作方法：-

```
public ActionResult Useractive(string Id)
    {

        int[] numbers = Id.Split(',').Select(n => int.Parse(n)).ToArray();

        foreach (int id in numbers)
        {
            User_Master u_master = db.User_Masters.Find(id);
            if (u_master.Is_active == "False")
            {
                u_master.Is_active = "True";
                db.Configuration.ValidateOnSaveEnabled = false;
                db.SaveChanges();

            }

        }

        return RedirectToAction("Userlist","Admin");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:04:58.310

尝试修复您的 .post 方法：

```
$.post("@Url.Action(MVC.Admin.UserActive())", { Id: strvalue) }, function(data) {
    //Do Something.
}); 
```

# javascript - iframe contentWindow 在缩短 document.domain 后抛出拒绝访问错误

> ID：15002168
> 
> 赞同：10
> 
> 时间：2013-02-21T12:22:00.650
> 
> 标签：javascript, internet-explorer, iframe, dynamic, access-denied

我通过以下方式动态创建 IFRAME：

```
var wrapUpIframe = document.createElement("iframe");
wrapUpIframe.id = 'WrapUpDialog3';
wrapUpIframe.src = 'WrapUpDialog.html';    
document.body.appendChild(wrapUpIframe); 
```

在动态创建后 my`document.domain`被缩短`Servername.dc.com`为 only `dc.com`，

但是当我尝试访问时，`contentWindow`出现访问被拒绝错误：

```
document.getElementById("WrapUpDialog3").contentWindow.SomeFunction(); 
```

**注意：**当我在 HTML 中静态定义 IFRAME 时，它可以正常工作。
我还尝试`document.domain`通过以下方式更改我的 IFRAME：

```
WrapUpDialog3.document.domain = dc.com; 
```

我检查了这两个`document.domain`和我的 IFRAME 域，它们都是相同的。

我能做些什么？

我正在使用 IE9。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T18:36:26.560

首先看看这篇[文章](https://stackoverflow.com/questions/14879192/jquery-iframe-access-denied-in-ie-on-some-pages)的正确答案。在我看来，这可能是你的问题。

如果不是这样，那么我从另一篇文章中看到的这个快速破解[可能](https://stackoverflow.com/questions/12842572/how-to-deal-with-setting-dynamic-iframe-content-dynamically)会有所帮助。

```
 var frame = $('<iframe>')
.attr('id', 'myIframe')
.addClass('someClass')
.attr('src', 'javascript:(function () {' +'document.open();document.domain=\'myDomain.net\';document.close();' + '})();');
.appendTo($('#someDiv')); 
```

不确定这是否相关，但我也在网络[链接](http://davidwalsh.name/iframe-permission-denied)上找到了这个。

好的，所以回复您的评论。javascript 函数没有分配源，它设置的文档域在 IE 中显然没有正确完成

查看此[链接](https://stackoverflow.com/questions/1886547/access-is-denied-javascript-error-when-trying-to-access-the-document-object-of)以获取另一个示例和说明。

所以我会尝试的可能是这样的......

```
var wrapUpIframe = document.createElement("iframe");
wrapUpIframe.id = 'WrapUpDialog3';    
wrapUpIframe.src = setSrc();
document.body.appendChild(wrapUpIframe);

function setSrc(){document.open();document.domain=\'dc.com\';document.close();return 'WrapUpDialog.html';} 
```

在运行设置文档域的函数后，您可能不得不尝试如何返回 iframe 的实际 url。但据我所见，这可能对你有用。

我有一个类似的问题，但不完全相同的问题，这就是为什么我不能给你一个确切的解决办法。设置文档域的功能使我摆脱了拒绝访问错误。

您还可以将其添加到您的主文档中，以真正确保域匹配。

```
 <script type="text/javascript">
    document.domain = 'dc.com';
  </script> 
```

我还想添加一个[链接](https://stackoverflow.com/questions/1481251/what-does-document-domain-document-domain-do)，以对我之前使用的显式设置 document.domain 进行一些解释。这在过去对我很有帮助。特别是这句话...

> 显式设置该值表示意图与另一个子域（在同一父域下）上的脚本“合作”。

Dor，您可能遇到了时间问题。我发现了一些我刚刚测试过的代码（这里）对我有用。它确保在您尝试访问 contentWindow 之前加载 iframe。

```
var iframe = document.createElement("iframe");
iframe.src = "WrapUpDialog.html";

if (iframe.attachEvent){
    iframe.attachEvent("onload", function(){
        alert("Local iframe is now loaded.");
    });
} else {
    iframe.onload = function(){
        alert("Local iframe is now loaded.");
    };
}

document.body.appendChild(iframe);

var iframeWindow = iframe.contentWindow || iframe.contentDocument.parentWindow; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:16:16.740

您如何提供文件？您`file:///`在地址栏中看到了吗？如果是这样，请尝试使用网络服务器提供您的代码。

如果我尝试使用您的代码，谷歌浏览器会给出拒绝访问错误`file:///`，但是当从本地网络服务器提供服务时它可以工作（即地址以 开头`http://localhost/`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T10:27:08.297

由于您尚未接受任何给出的答案，因此您可能仍然有问题。

尝试`document.domain`在两个 HTML 页面中显式设置（您似乎只在一个页面中执行此操作）。这意味着正如@Vic 建议的那样，您需要将以下 javascript 代码添加到包含 iframe 的 HTML 中：

```
document.domain = 'dc.com'; 
```

这意味着您的代码将如下所示：

```
document.domain = 'dc.com';
var wrapUpIframe = document.createElement("iframe");
wrapUpIframe.id = 'WrapUpDialog3';
wrapUpIframe.src = 'WrapUpDialog.html';    
document.body.appendChild(wrapUpIframe); 
```

然后，`WrapUpDialog.html`本身（不在主页中，因为那样你会绕过安全系统！）你还需要设置`document.domain`：

```
document.domain = dc.com; 
```

所以你的这条线将不起作用：

```
WrapUpDialog3.document.domain = 'dc.com'; 
```

因为`WrapUpDialog.html`它本身需要授予其“父”页面执行其 javascript 的权限。

此页面上有更多信息：[document.domain = document.domain 做什么？](https://stackoverflow.com/questions/1481251/what-does-document-domain-document-domain-do).

最后提示：请使用不同的浏览器尝试您的代码：IE9、Firefox、Google Chrome。这可以帮助您确定您是否正在处理某个特定浏览器的怪癖。

# web-applications - 如何开始使用 Railo 编写 CFML

> ID：15002172
> 
> 赞同：2
> 
> 时间：2013-02-21T12:22:07.530
> 
> 标签：web-applications, railo, cfml

我相信我在这里遗漏了一些大而明显的东西。我决定开始学习 CFML。我安装了开源[Railo Server](http://getrailo.org)并保存到正确的路径以从中运行 cfm 文件。当我运行文件时，它显示 HTML 但不显示 CFML，例如

我得到这个输出

```
#variable1# 
```

从记事本++中这个简单的hello world代码：

```
<html>
<head><title>Hello World</title></head>
<body>
<cfset variable1 = "hello world">
<cfoutput>#variable1#</cfoutput>
</body>
</html> 
```

我将 cfm 文件的运行视为 PHP 文件。我相信这是同一个想法。我找不到任何使用 Railo 和记事本的教程（也许是因为我误解了整个事情？）。我见过的大多数教程都使用 adobe 或 dreamweaver，但我都无法访问。

干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T12:36:25.770

启动和运行的最简单方法是执行以下步骤：

**1)**转到[下载页面](http://www.getrailo.org/index.cfm/download/)并为您的操作系统获取“Express with JRE edition”。

例如对于 Windows，选择[railo-express-4.0.2.002-jre-win32.zip](http://www.getrailo.org/down.cfm?item=/railo/remote/download/4.0.2.002/railix/windows/railo-express-4.0.2.002-jre-win32.zip&thankyou=false)

**2)**将存档解压缩到合适的位置。

**3)**执行该`start.bat`文件（即双击它）以启动Railo 运行的Jetty servlet 引擎。

**4)**打开浏览器并转到`http://localhost:8888/`- 您应该会看到“欢迎来到 Railo”屏幕。

**5)**在您的 Railo 目录中，进入 webapps，然后进入 railo，您将看到为上述消息提供动力的 index.cfm。将其重命名为其他名称，例如 orig.index.cfm 并继续将上面的代码放在新的 index.cfm 中

**6)**刷新浏览器，您将看到您期望的“hello world”输出。

您当然可以用获取 Tomcat 安装程序并使用它来替换步骤 1..3 - 这是一个完全有效的选项，只是需要更多时间来设置，同时如果连接到外部 Web 服务器也更方便。
（[Tomcat](https://tomcat.apache.org/)和[Jetty](http://eclipse.org/jetty/)都是功能齐全的 servlet 引擎，能够为您提供的任何东西提供动力；两者都不需要单独的 Web 服务器，但在某些情况下添加一个是有益的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:37:30.063

如果您遇到针对 Adob​​e 风格量身定制的教程并且事情没有按预期运行，请不要忘记查看 Kai Koenig 最近关于两种服务器引擎之间显着差异的博客条目：

[http://bloginblack.de/2013/02/cfml-differences-between-railo-and-coldfusion-9-10-part-1/](http://bloginblack.de/2013/02/cfml-differences-between-railo-and-coldfusion-9-10-part-1/)

[http://bloginblack.de/2013/02/cfml-differences-between-railo-and-coldfusion-910-part-2/](http://bloginblack.de/2013/02/cfml-differences-between-railo-and-coldfusion-910-part-2/)

# javascript - 在 Asp.net mvc 4 中使用 javascript/JQuery 浏览和设置 img src

> ID：15002176
> 
> 赞同：0
> 
> 时间：2013-02-21T12:22:23.723
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, asp.net-mvc-4

我的 .cshtml 页面中有一个`<img/>`标签。

```
<img id="ImageID" alt="" width="100%" height="100%" /> 
```

我需要通过使用文件控制选择图像文件路径来动态设置 src 属性。

我在我的 Js 页面中尝试了以下代码，但它不起作用。

```
var image_path = $("#fileControl").val();

$("#ImageID").attr('src', 'url(' + image_path + ')'); 
```

请帮忙！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:37:38.797

要将其更改为实时事件，以便它随着您的`#fileControl`值更改而更改，请执行以下操作：

```
$("#fileControl").on('change', function(){
  $("#ImageID").attr('src', 'url(file://' + $(this).val() + ')');
}) 
```

...但显然以上内容可能会略有变化（打开、绑定、实时），具体取决于您的 jQuery 版本

# javascript - jQuery SlideOut 函数从右到左

> ID：15002179
> 
> 赞同：4
> 
> 时间：2013-02-21T12:22:30.187
> 
> 标签：javascript, jquery, html, css

我正在尝试通过更改“从左到右”的代码来从 jQuery 中的右侧滑出功能，但它无法正常运行...请给我正确的修改方向...

[http://jsfiddle.net/egUHv/](http://jsfiddle.net/egUHv/)

目前我正在使用此代码...

```
$(function() {
    $('#nav').stop().animate({'marginRight':'-100px'},1000);

    function toggleDivs() {
       var $inner = $("#nav");
       if ($inner.position().right == "-100px") {
           $inner.animate({right: 0});
           $(".nav-btn").html('<img src="images/slide-out.png" alt="open" />')
       }
       else {
           $inner.animate({right: "100px"}); 
           $(".nav-btn").html('<img src="images/slide-out.png" alt="close" />')
       }
    }
    $(".nav-btn").bind("click", function(){
        toggleDivs();
    });

}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T13:46:30.623

只需查看此链接，它就会很有用[http://www.learningjquery.com/2009/02/slide-elements-in-different-directions](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)

或使用这个

```
$("div").click(function () {
          $(this).show("slide", { direction: "left" }, 1000);
    }); 
```

参考：[http ://docs.jquery.com/UI/Effects/Slide](http://docs.jquery.com/UI/Effects/Slide)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T06:24:23.913

试试这个：http: [//jsfiddle.net/egUHv/5/](http://jsfiddle.net/egUHv/5/)

```
$(function() {
$('#nav').stop().animate({'margin-right':'-100px'},1000);

function toggleDivs() {
var $inner = $("#nav");
if ($inner.css("margin-right") == "-100px") {
    $inner.animate({'margin-right': '0'});
    $(".nav-btn").html('<img src="images/slide-out.png" alt="open" />')
}
else {
    $inner.animate({'margin-right': "-100px"}); 
    $(".nav-btn").html('<img src="images/slide-out.png" alt="close" />')
}
}
$(".nav-btn").bind("click", function(){
    toggleDivs();
});

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:37:04.107

一个非常简单的解决方案：

```
$(function() {
  $('#div').ToggleSlide();
});

$.fn.ToggleSlide = function() {
    return this.each(function() {
        $(this).css('position', 'absolute');

        if(parseInt($(this).css('right')) < 0) {
            $(this).animate({ 'right' : '-100px' }, 1000, function() {
                $(this).css('position', 'relative');
            });
        }
        else {
            $(this).animate({ 'right' : '0px' }, 1000, function() {
                $(this).css('position', 'relative');
            });
        }
    });
}); 
```

我们在这里做什么：在函数调用中，我们将项目的位置设置为“绝对”，这样我们就可以轻松地对其进行动画处理。我们检查项目是否有负“右”（已经向右移动），如果为真，我们动画回到 0（从右到左运动），否则我们动画到“-右”（从左到右运动） ）。动画完成后，我们将项目的位置设置为“相对”，以便我们可以使用它的尺寸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-30T13:00:37.380

我们现在有了[animate.css](https://daneden.github.io/animate.css/)

> animate.css 是一组很酷、有趣且跨浏览器的动画，供您在项目中使用。非常适合强调、主页、滑块和一般的加水效果。

您可以从 jquery 调用动画效果。干净有效

# android - 从 Ui Thread 的 onSensorChanged() 方法将消息添加到 HandlerThread 的队列

> ID：15002185
> 
> 赞同：0
> 
> 时间：2013-02-21T12:22:50.370
> 
> 标签：android

```
 public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {

        if(seekBar.getId() == R.id.seekBar)
        {
            speed.setText(String.valueOf(progress));
            String outputData = speed.getText().toString()+","+"hey"+","+"hell"+";";

            if(streams.getOutputStream() != null && wtHandler != null)
            {
                wtHandler.sendMessage(wtHandler.obtainMessage(9999, outputData)); //wtHandler is Handler for HandlerThread's Looper

            }
            else
            {
                Log.d("RTR", "handler of output stream null");
            }
        } 
```

我正在使用a`HandlerThread`通过蓝牙发送数据。上面的代码在`SeekBar`更改及其工作时传输数据。

当我从方法执行上述传输时`onSensorChanged()`，它不起作用。代码如下。

```
public void onSensorChanged(SensorEvent event) {
        //To change body of implemented methods use File | Settings | File Templates.
        if(event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        {
            float accXYZ[] = event.values;

            float accX = accXYZ[0];
            float accY = accXYZ[1];
            float accZ = accXYZ[2];

            x.setText(String.format("%.2f",accX));
            y.setText(String.format("%.2f",accY));
            z.setText(String.format("%.2f",accZ));

            //String outputData = x.getText().toString()+","+speed.getText().toString()+";";
            String outputData = x.getText().toString()+";";

            if(wtHandler != null && wtHandler.getOutputStream() != null)   //add output stream null later
            {

                wtHandler.sendMessageDelayed(wtHandler.obtainMessage(9999,outputData),10);
                Log.d("RTR","Added message to the Queue");
            }
            else if(wtHandler == null)
            {
                Log.d("RTR","Worker Thread Handler not created yet");
            }
            else
            {
                Log.d("RTR","OP Stream null");
            } 
```

可能是什么问题？我怀疑它调用 onSensorChanged() 的速率。上面的所有代码都在 UI 线程中运行，我只是从这里向`HandlerThread'`s添加消息。`Looper` `Queue`

请你的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:29:37.897

这就是我如何更改将消息添加到队列的速率并且现在一切正常

```
public void onSensorChanged(SensorEvent event) {
        //To change body of implemented methods use File | Settings | File Templates.
        if(event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        {
            float accXYZ[] = event.values;

            float accX = accXYZ[0];
            float accY = accXYZ[1];
            float accZ = accXYZ[2];

            x.setText(String.format("%.2f",accX));
            y.setText(String.format("%.2f",accY));
            z.setText(String.format("%.2f",accZ));

            try {
                //String outputData = x.getText().toString()+","+speed.getText().toString()+";";
                String outputData = x.getText().toString()+","+speed.getText().toString()+";";

                if( workerThread.getWtHandler() != null && workerThread.getWtHandler().getOutputStream() != null)   //add output stream null later
                {
                    if(System.currentTimeMillis() - time > 50)
                    {
                        workerThread.getWtHandler().sendMessage(workerThread.getWtHandler().obtainMessage(9999, outputData));
                        Log.d("RTR","Added message to the Queue");
                    }
                }
                else if(workerThread.getWtHandler() == null)
                {
                    Log.d("RTR","Worker Thread Handler not created yet");
                }
                else
                {
                    Log.d("RTR","OP Stream in Handler null");
                }
            }catch (Exception e){
                Log.d("RTR","Worker Thread not created yet");
            }
            time = System.currentTimeMillis(); 
```

# algorithm - 具有截止值的相对权重

> ID：15002186
> 
> 赞同：2
> 
> 时间：2013-02-21T12:22:55.153
> 
> 标签：algorithm, r, probability

我有一个正数值向量。我需要对其进行规范化，以使值的总和为 1（例如概率）。这很简单，只需使用 x_i/sum(x) 作为权重。但这里需要注意的是：我需要没有重量会小于某个最小截止值，并且重量不会大于某个最大截止值。现在，这意味着两件事：首先，这意味着存在没有解决方案的情况（例如，如果最大截止值为 0.2，则 3 个对象不能是权重）。其次，这意味着权重的“相对性”被打破了。也就是说，在标准归一化中（其中 w_i 是对所有 i 赋予 x_i 的权重），对于所有 i,j，w_i/w_j=x_i/x_j。有截止，这是无法做到的。更正式地，我想找到一个函数 w=rwc(x,min,max) 其中 x 是一个向量，它返回一个具有以下属性的相同长度的向量：

1) 总和(w)=1

2) min <= w_i <= max for all i

3) 如果 x_i <= x_j 那么 w_i<=w_j 对于所有 i,j

4) 如果 w_i 和 w_j 都不同于临界值（最小值和最大值），则它们保持相对性：即，如果 min < w_i < max 且 min < w_j < max 那么 w_i/w_j=x_i/x_j

如果没有解决方案，则应返回 NULL。

所以我的问题是：

a) 你如何建议这样做（用 R 或任何其他语言）？

b) 给定 x，是否有多个解（即至少有两个不同的向量 w 和 v，每个都符合上述形式要求）

这不是严格意义上的 R 问题，但我在 R 中做的一个项目中遇到了它，所以我将它作为 R 发布。欢迎任何关于更好分类的建议。

*更新*

在下面的讨论和更多的思考之后，似乎有必要在上面的 4 中添加第五个要求：5）在满足 1-4 的所有可能的权重分配中，W 是具有最小数量的极端权重（最小或最大）。

这是（希望）这样做的 my r 代码：

```
#
mwc = function(x,mxw=1,mnw=0) {
cake = 1
agnts = 1:length(x)
result = numeric(length(x))
while(cake>0 & length(agnts)>0) {
    tmp = cake*x[agnts]/sum(x[agnts])
    low = which(tmp<mnw)
    high = which(tmp>mxw)
    if(length(low)+length(high)==0 ) {
        result[agnts] = tmp[agnts]
        break;
    }
    if (length(low)>0) {
        result[agnts[low]] = mnw
    }
    if (length(high)>0) {
        result[agnts[high]] = mxw
    }
    cake = 1-sum(result)
    agnts=agnts[-c(low,high)]
}
if (cake<0) return(NULL) #no solution
if (abs(sum(result)-1)>1e-17) return(NULL)
return(result)
}   
# the end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:09:15.663

一个）

我建议使用蛮力迭代算法。

1.  让`x' = x`
2.  计算`sum(x')`
3.  计算临界值`min_x`，`max_x`
4.  `x'`从计算`x`，调整范围之外的所有值 [ `min_x`, `max_x`]
5.  重复2-4直到`x'`稳定
6.  计算`w`

在大多数情况下，迭代次数应该很少。

b）如果存在最小值或最大值（但不是两者），则解向量是唯一的。

如果同时有最小值和最大值，我不确定。感觉它应该是独一无二的，但我找不到简单的证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:12:44.570

你的意思是这样的吗？该示例在 Haskell 中，“[ ]”表示一个空列表。

```
weights :: [Double] -> Double -> Double -> [Double]
weights my_vector min max = 
  let s = sum my_vector
      try = map (/s) my_vector
  in if all (>=min) try && all (<=max) try
        then try
        else [] 
```

输出：
*Main> 权重 [1,2,3,4] 0 2
[0.1,0.2,0.3,0.4]
*Main> 权重 [1,2,3,4] 1 2
[]

**更新：**
这是一个粗略的方向（再次是 Haskell），基于[此](https://stackoverflow.com/questions/12469361/java-algorithm-for-normalizing-audio/12473877#12473877)：

```
import Data.List
import Data.Ord

normalize :: Double -> Double -> Double -> Double -> Double
normalize targetMin targetMax rawMax val =
  let maxReduce = 1 - targetMax/rawMax
      factor = maxReduce * (abs val) / rawMax
  in max ((1 - factor) * val) targetMin

weights :: [Double] -> Double -> Double -> [Double]
weights myVector targetMin targetMax = 
  let try = map (/(sum myVector)) myVector
  in if all (>=targetMin) try && all (<=targetMax) try
        then try
        else weights normalized targetMin targetMax
    where normalized = 
            let targetMax' = (maximum myVector * targetMin / minimum myVector)
            in map (\x -> normalize targetMin targetMax' (maximum myVector) x) myVector 
```

OUTPUT:
*Main> weights [4,4,4,1000] 0.1 0.7
[0.10782286784365082,0.10782286784365082,0.10782286784365082,0.6765313964690475]
*Main> weights [1,1,1000000] 0.05 0.8
[0.1204381​​8322274577,0.1204381​​8322274577,0.7591236335545084]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T06:14:17.330

这是我的第二个答案，我希望现在也能解决要求 4）。在我看来，如果要应用要求 4)，那么我们必须将所有未指定为截止值的元素除以：

```
 denominator = sum non_cutoff_elements / (1 - sum cutoff_elements) 
```

其中“cutoff_elements”表示为它们的截止值。我希望，这个递归代码试图用尽截止分配的组合。该代码似乎解决了 amit 和 rici 在其评论中的示例。再次哈斯克尔：

```
import Data.List
import Data.Ord

weights :: [Double] -> Double -> Double -> [[Double]]
weights myVector tMin tMax = 
  weights' 0
    where 
      weights' count
        | count == length myVector + 1 = []
        | otherwise =
            let new_list = take count myVector 
                           ++ replicate (length myVector - count) tMax
            in fromLeft new_list 0 ++ weights' (count+1)
                where 
                  fromLeft list' count' = 
                    let non_cutoffs = filter (\x -> x/=tMin && x/=tMax) list'
                        real_count = length list' - length non_cutoffs
                        cutoffs_l = filter (\x -> x==tMin) list'
                        cutoffs_r = filter (\x -> x==tMax) list'
                        denom = sum non_cutoffs / (1 - (sum $ cutoffs_l ++ cutoffs_r))
                        mapped = cutoffs_l ++ (map (/denom) non_cutoffs) ++ cutoffs_r
                        next_list = let left = tMin : cutoffs_l
                                        right = drop 1 cutoffs_r
                                    in left ++ non_cutoffs ++ right
                    in if count' == real_count
                          then []
                          else if sum cutoffs_r > 1 || sum cutoffs_l > 1 
                                  || sum cutoffs_r + sum cutoffs_l > 1
                                  then fromLeft next_list (count'+1)
                          else if sum mapped == 1 && all (>=tMin) mapped && all (<=tMax) mapped
                                  then mapped : fromLeft list' (count'+1)
                                  else fromLeft next_list (count'+1) 
```

输出：
*主要>重量[4,4,4,4,1000] 0.1 0.7
[[[0.1,0.1,0.1,0.7]，[0.1,0.1,0.1000000000000000009,0.7] ,0.100000000000000002,0.10000000000000002,0.7]] 舍入
到小数点后 14 位：[[0.1,0.1,0.1,0.7],[0.1,0.1,0.1,0.7],[0.1,0.1,0.1,0.7],[0.1,0.1, 0.1,0.7]]

*Main> weights [1,1,1000000] 0.05 0.8
[[5.0e-2,0.1499999999999999,0.8],[9.9999999999999998e-2,9.999999999999998e-2,0.8]] 舍入
到小数点后 14 位： [[0.05,0.15,0.8],[0.1,0.1,0.8]]

# c# - VS 2012 调试器，模块加载两次，无法命中断点

> ID：15002188
> 
> 赞同：2
> 
> 时间：2013-02-21T12:22:57.510
> 
> 标签：c#, visual-studio, debugging, visual-studio-2012, c++-cli

我有一个 Visual Studio 2012 解决方案，其中包含两个项目，第一个是`C++/CLI`wrapper，第二个是`C#`，我在其中使用包装的 dll。这两个项目都处于 32 位调试模式。在 C# 项目`Enable native code debugging`中启用选项。在 C++/CLI 调试模式设置为`mixed`.

问题是在这两个项目中都无法命中断点。我听从了[这里](https://stackoverflow.com/questions/2155930/fixing-the-breakpoint-will-not-currently-be-hit-no-symbols-have-been-loaded-fo)和[这里](https://stackoverflow.com/questions/3325588/mixed-mode-assembly-not-loading-symbol-for-native-c-pdbs)的建议，但没有运气。

最有趣的是，bot项目被加载了两次，位置相同，符号文件从同一目录加载，exe和dll被放置。为什么 Tester 加载有符号和没有符号也很有趣。

![调试模块窗口](../Images/ba369c7db1e68d830a6a6c79b1e6d1d9.png)

有人可以帮我解决吗？

# javascript - 在javascript中使用sha1散列文本

> ID：15002192
> 
> 赞同：0
> 
> 时间：2013-02-21T12:23:03.153
> 
> 标签：javascript, asp.net, sha1

谁能告诉我该怎么做？

我已经在 c# 中使用 sha1 完成了散列，但是如何使用 javascript 实现相同的散列功能？

我想用不同的技术来学习这个。谢谢！

编辑：我试过以下链接： [http ://coursesweb.net/javascript/sha1-encrypt-data_cs](http://coursesweb.net/javascript/sha1-encrypt-data_cs)

我没有明白原因，为什么这与 c# 的 SHA1CryptoServiceProvider 的结果和提到的链接中的示例不同

这是我尝试过的代码：1.上面链接中提到的示例（javascript）2。

```
 <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
 <asp:Button ID="Button1" runat="server" Text="Button_ServerSide" onclick="Button1_Click" /> 
```

**后面的代码：**

```
 using System;
    using System.Collections;
    using System.Configuration;
    using System.Data;
    using System.Linq;
    using System.Web;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.UI.HtmlControls;
    using System.Web.UI.WebControls;
    using System.Web.UI.WebControls.WebParts;
    using System.Xml.Linq;
    using System.Security.Cryptography;
    using System.Text;

   public partial class Default2 : System.Web.UI.Page
   {
   protected void Page_Load(object sender, EventArgs e)
   {

   } 
   protected void Button1_Click(object sender, EventArgs e)
   {
    string strText = String.Empty;
    strText = TextBox1.Text;
    //SHA512CryptoServiceProvider encrypt = new SHA512CryptoServiceProvider();
    SHA1CryptoServiceProvider encrypt = new SHA1CryptoServiceProvider();
    byte[] encryptText = encrypt.ComputeHash(Encoding.Default.GetBytes(strText));

    TextBox1.Text = "";

    foreach (byte tempData in strText)
    {
        TextBox1.Text = TextBox1.Text + "x";

    }
    string str = System.Text.Encoding.Default.GetString(encryptText);
    Response.Write("Entered Text: " + strText + "  Encrypted Text Length: " + encryptText.Length + "    enpwd: " + strText);
    Response.Write("           encryptText: " + encryptText.Equals(strcrypt.Value));
    Response.Write("           encryptText STR: " + str);

    //ProtectedData.Protect();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:29:25.943

Javascript 没有任何内置的散列函数，因此您必须使用外部库。

*   [http://www.movable-type.co.uk/scripts/sha1.html](http://www.movable-type.co.uk/scripts/sha1.html)
*   [https://code.google.com/p/crypto-js/](https://code.google.com/p/crypto-js/)

[StackOverflow 上](https://stackoverflow.com/questions/9610921/one-way-sha1-hash-javascript-implementation)还有另一个关于此的问题，其中包含更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:26:28.593

你可以试试这个链接来解决你的问题：

[http://caligatio.github.com/jsSHA/](http://caligatio.github.com/jsSHA/)

[http://www.movable-type.co.uk/scripts/sha1.html](http://www.movable-type.co.uk/scripts/sha1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T05:10:51.143

```
sha1 = function(r) {
    var t = function() {
        function r() {
            e[0] = 1732584193, e[1] = 4023233417, e[2] = 2562383102, e[3] = 271733878, e[4] = 3285377520, 
            s = c = 0;
        }
        function t(r) {
            var t, n, o, f, a, u, c, s;
            for (t = i, n = 0; 64 > n; n += 4) t[n / 4] = r[n] << 24 | r[n + 1] << 16 | r[n + 2] << 8 | r[n + 3];
            for (n = 16; 80 > n; n++) r = t[n - 3] ^ t[n - 8] ^ t[n - 14] ^ t[n - 16], t[n] = 4294967295 & (r << 1 | r >>> 31);
            for (r = e[0], o = e[1], f = e[2], a = e[3], u = e[4], n = 0; 80 > n; n++) 40 > n ? 20 > n ? (c = a ^ o & (f ^ a), 
            s = 1518500249) : (c = o ^ f ^ a, s = 1859775393) : 60 > n ? (c = o & f | a & (o | f), 
            s = 2400959708) : (c = o ^ f ^ a, s = 3395469782), c = (4294967295 & (r << 5 | r >>> 27)) + c + u + s + t[n] & 4294967295, 
            u = a, a = f, f = 4294967295 & (o << 30 | o >>> 2), o = r, r = c;
            e[0] = e[0] + r & 4294967295, e[1] = e[1] + o & 4294967295, e[2] = e[2] + f & 4294967295, 
            e[3] = e[3] + a & 4294967295, e[4] = e[4] + u & 4294967295;
        }
        function n(r, n) {
            if ("string" == typeof r) {
                for (var o = [], e = 0, i = (r = unescape(encodeURIComponent(r))).length; e < i; ++e) o.push(r.charCodeAt(e));
                r = o;
            }
            if (n || (n = r.length), o = 0, 0 == c) for (;o + 64 < n; ) t(r.slice(o, o + 64)), 
            o += 64, s += 64;
            for (;o < n; ) if (f[c++] = r[o++], s++, 64 == c) for (c = 0, t(f); o + 64 < n; ) t(r.slice(o, o + 64)), 
            o += 64, s += 64;
        }
        function o() {
            var r, o, i = [], u = 8 * s;
            for (n(a, 56 > c ? 56 - c : 64 - (c - 56)), r = 63; 56 <= r; r--) f[r] = 255 & u, 
            u >>>= 8;
            for (t(f), r = u = 0; 5 > r; r++) for (o = 24; 0 <= o; o -= 8) i[u++] = e[r] >> o & 255;
            return i;
        }
        var e, f, i, a, u, c, s;
        for (e = [], f = [], i = [], a = [ 128 ], u = 1; 64 > u; ++u) a[u] = 0;
        return r(), {
            reset: r,
            update: n,
            digest: o,
            digestString: function() {
                for (var r = o(), t = "", n = 0; n < r.length; n++) t += "0123456789ABCDEF".charAt(Math.floor(r[n] / 16)) + "0123456789ABCDEF".charAt(r[n] % 16);
                return t;
            }
        };
    }();
    return t.update(r), t.digestString().toLowerCase();
};

console.log(sha1("admin"));
```

# jenkins - 如果正在等待上游作业在 Jenkins 中完成，如何停止下游作业的运行？

> ID：15002193
> 
> 赞同：1
> 
> 时间：2013-02-21T12:23:09.493
> 
> 标签：jenkins, continuous-integration, hudson, jenkins-plugins

我有 2 个项目：- 1\. 项目 A 2\. 项目 B

项目 A 为上游项目，项目 B 为下游项目。如果项目 A 已经在构建，项目 B 将等待。项目 A 成功完成后触发项目 B。

现在这是场景：-

项目 A 正在建设中，项目 B 正在等待项目 A 完成。一旦项目 A 完成，项目 B 立即被触发。但是，项目 A 在完成时也会触发项目 B。所以，基本上项目 B 运行两次。

我的要求是 - 只有上游项目（项目 A）触发的（项目 B）工作应该运行，而不是等待上游项目（项目 A）完成的工作。等待的作业应该从队列中清除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T12:41:20.320

有很多方法可以做到这一点。

我建议查看这个插件：[https ://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin)

到目前为止，它已经满足了我最虐待狂的需求。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:51:23.967

您是否尝试过在上游项目运行时阻止构建？ ![在此处输入图像描述](../Images/b80dbd7a5d2c514757a1b63bfe1750fa.png)

# jsf-2 - JSF2 &

> ID：15002196
> 
> 赞同：0
> 
> 时间：2013-02-21T12:23:17.440
> 
> 标签：jsf-2

`<ui:repeat>` `<ui:repeat>` `<h:commandLink>` `<f:param>` `<f:ajax>`我对 jsf2 和标签组合有疑问

如果我使用一个`ui:repeat`标签，那么我会调用 ajax 侦听器方法，但如果有嵌套`ui:repeat`标签则不会。

谢谢

我有一个 @PostConstruct 到私有 LiferayDocument liferayFolderAktuell；私有列表 liferayFoldersArchiv；

这个 WORKS - 它向 backingbeans 方法 addToInfomappex 发送一个事件

```
 <ui:repeat var="file" value="#{documentService.getFiles()}" >

<h:form id="frm_#{file.documentId}">

    <h:commandLink id="a_#{file.documentId}" class="addToInfo" data-tooltip="Zur Infomappe" alt="Zur Infomappe hinzufügen" >

        <f:param value="#{file.documentId}"  />

        <f:ajax event="click" listener="#{documentService.addToInfomappex}" />

        link                        
    </h:commandLink>

</h:form>

</ui:repeat> 
```

这个不起作用 - 有 2 个 ui:repeat 标签 - 我没有收到相同方法的事件：

```
<ui:repeat var="folder" value="#{documentService.liferayFoldersArchiv}">
    #{folder.title}             

    <ui:repeat var="file" value="#{documentService.getFiles(folder.documentId)}">

    #{file.title}       

    <h:form id="frm_#{file.documentId}">

    <h:commandLink id="a_#{file.documentId}" class="addToInfo" data-tooltip="Zur Infomappe" alt="Zur Infomappe hinzufügen" >

        <f:param value="#{file.documentId}"  />

        <f:ajax event="click" listener="#{documentService.addToInfomappex}" />  
        link                            
    </h:commandLink>
    </h:form>   
    </ui:repeat>
  </ui:repeat> 
```

# xpages - 与 XPage 通信 WQS 代理 - 可能吗？

> ID：15002200
> 
> 赞同：0
> 
> 时间：2013-02-21T12:23:36.757
> 
> 标签：xpages, lotusscript

我一直在思考这个问题，但想不出解决方案。

我有一个上传文件的 XPage。数据源有一个 WQS LotusScript 代理，它对文件执行一些处理。

如何将此 LotusScript 代理的任何结果传回 XPage？

谢谢！

/J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:50:44.427

您使用内存中的文档传递给代理，然后将其取回。请参阅[我的示例](http://www.wissel.net/blog/d6plinks/SHWL-8SF7AH)或其[bean 版本](http://www.wissel.net/blog/d6plinks/SHWL-8SF7AH)。但是，我会挑战与代理交谈的好处。您为每次调用支付 0.5-3 秒的性能损失，启动和关闭 LotusScript 引擎。

考虑到这一点，您坐下来将您的代理转换为 Java 类的收支平衡“更接近它的出现”。

# iphone - iCal 重新发生的事件在 iPhone 上永远不会结束

> ID：15002203
> 
> 赞同：0
> 
> 时间：2013-02-21T12:23:41.933
> 
> 标签：iphone, calendar, icalendar

我有一些代码可以为托管在可公开访问的网络服务器上的 ical 文件生成日历条目。这是一个精简版：

```
BEGIN:VCALENDAR
VERSION:2.0
CALSCALE:GREGORIAN
METHOD:PUBLISH
PRODID:-//customical//me//
X-WR-CALNAME:Testing
:
: (other calendar entries)
:
BEGIN:VEVENT
DTSTART:20120723T140000
DURATION:PT60M
RRULE:FREQ=DAILY;UNTIL=20120806T2359590
LOCATION:Room 1
SUMMARY:Daily appointment
CATEGORIES:(none)
CLASS:PUBLIC
DESCRIPTION:This is a daily appointment
END:VEVENT
:
: (other calendar entries)
:
END:VCALENDAR 
```

如果您通过 Google 日历订阅此日历，则日历条目从 2012 年 7 月 23 日开始，每天重复出现，并在 2012 年 8 月 6 日结束。太棒了。

但是，如果您直接从运行 iOS 6 的 iPhone 订阅此日历条目，则日历条目从 2012 年 7 月 23 日开始，每天都会重复出现，而且永远不会结束！

在我将此作为 iOS 缺陷注销（并尝试通过不包括已过期的约会来解决它）之前，我可以在 iCal 文件中进行更改以使 iPhone 在正确的时间正确结束约会吗？

# javascript - 如何分析 QtScript 代码？

> ID：15002204
> 
> 赞同：6
> 
> 时间：2013-02-21T12:23:44.520
> 
> 标签：javascript, performance, qt, qtscript

我知道有一些工具可以分析纯 javascript 代码，例如***firebug***和***Chrome 的 Developer Tools***，但我想知道是否有任何好的工具可以分析 QTScript。或者我如何使用这些工具来分析 QtScript 代码。

这种情况的用例是有一个桌面应用程序，其大部分代码是用 JavaScript 编写的，而一些代码是用原生 QT/C++ 编写的。在那种情况下，如果有人想要分析性能，有哪些工具可以自动进行分析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T17:20:43.777

主要用于分析 QtScript 的工具并不多。

但是 Benjamin Meyer 有一个*[QscriptProfiler](https://github.com/icefox/qscriptprofiler)*，我没有亲自使用过，但看起来很有希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T14:48:42.450

我编写了一个小型 QScriptEngineAgent 来为我完成这项工作。请参阅我在[QScriptEngineAgent 中的回答 - 获取被调用者名称](https://stackoverflow.com/questions/27075268/qscriptengineagent-obtaining-callee-name)。

干杯，

约翰内斯

# cakephp - Cakephp HABTM saveAll 创建错误的数据库记录

> ID：15002210
> 
> 赞同：1
> 
> 时间：2013-02-21T12:24:14.767
> 
> 标签：cakephp, save, has-and-belongs-to-many

我有一个模型用户：

```
public $hasMany = array(
    'Contact' => array('dependent' => true));
public $hasAndBelongsToMany = array(
    'MySharepermission' => array(
        'unigue' => false,
        'className' => 'Contact',
        'joinTable' => 'sharepermissions_users',
        )); 
```

和模特联系

```
public $belongsTo = array('User');    
public $hasAndBelongsToMany = array(
    'Sharepermission' => array(
        'unigue' => false,
        'className' => 'User',
        'joinTable' => 'sharepermissions_users',
        )
    ); 
```

现在我有一个 $data 数组：

```
array(
(int) 0 => array(
    'Contact' => array(
        'id' => '51254509-0654-468b-8007-1683550d8ff8'
    ),
    'Sharepermission' => array(
        'id' => '5123a3c3-d5ac-4541-b28b-326c550d8ff8',
        'permission' => 'read'
    )
),
(int) 1 => array(
    'Contact' => array(
        'id' => '51254509-0654-468b-8007-1683550d8ff8'
    ),
    'Sharepermission' => array(
        'id' => '51252eba-8804-40e7-bf3d-7db9550d8ff8',
        'permission' => 'write'
    )
)
) 
```

数据库目前是空的，现在我这样做：

```
debug($this->Contact->saveAll($data)); 
```

结果很奇怪： ![在此处输入图像描述](../Images/acbb0b39226136b845ce942b9a1556dd.png)

为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T13:39:20.400

我看到unique这个词拼错了，它应该是“unique”而不是“unigue”。或许能解决这个案子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:05:26.177

您的 Sharepermisson 模型如何？

您的 Contact-habtm 关系似乎有错误：

```
public $hasAndBelongsToMany = array(
    'MySharepermission' => array(
        'unigue' => false,
        'className' => 'Contact',
        'joinTable' => 'sharepermissions_cantacts',
        )); 
```

您是否尝试只保存没有用户关系的联系人部分？

# java - 嵌入式 Glassfish 在重启和重新部署后“随机”响应请求

> ID：15002211
> 
> 赞同：3
> 
> 时间：2013-02-21T12:24:16.483
> 
> 标签：java, junit, glassfish, glassfish-embedded

我们使用嵌入式 glassfish 3.2-b06 版进行集成测试。

问题是有时调用我们的 Web 服务 (RESTful) 的测试会返回 404 响应，有时会返回 200。

例如：

```
@Test
public void test() throws Exception {
    int code = sendPOST(URL);
    Assert.assertEquals(200, code);
} 
```

但是如果我在测试开始时添加 Thread.sleep (1000) - 一切都很好。

```
@Test
public void test() throws Exception {
    Thread.sleep(1000);
    int code = sendPOST(URL);
    Assert.assertEquals(200, code);
} 
```

我们正在按如下方式部署应用程序：

```
@BeforeClass
public void init() {    
    GlassFishProperties glassFishProperties = new GlassFishProperties();      
    glassfish = GlassFishRuntime.bootstrap().newGlassFish(glassFishProperties);
    glassfish.start();
    File ear = new File("target/ear.ear");      
    Deployer deployer = glassfish.getDeployer();
    deployer.deploy(ear);
    context = new InitialContext();
} 
```

从日志中可以清楚地看出ear 已部署。

有什么问题？

**编辑#1**

事实证明，当代码更改时，测试通过。但是当我重复测试时，它们失败了。

# wpf - 三向绑定（两种双向绑定）。是否可以？

> ID：15002215
> 
> 赞同：0
> 
> 时间：2013-02-21T12:24:33.520
> 
> 标签：wpf, binding, master-detail

我是数据绑定的新手，所以这个问题可能看起来相当愚蠢。我使用从[http://wpftoolkit.codeplex.com/](http://wpftoolkit.codeplex.com/)获得的 Xceed WPF Toolkit 的 DataGridControl，我认为它与 DataGrid 控件的使用非常相似。我打算将 DataGridControl SelectedItem 绑定到 Grid 内容。相关的控件和对象变量是：

```
GridKaryawan --> DataGridControl
Grid --> without name, for displaying details
karyawans --> ObservableCollection<BiodataKaryawan> --> collection of business objects
selKaryawan --> (intended to be) the selected business object
* The business object "BiodataKaryawan" has already implemented INFC. 
```

到目前为止，我一直在做（仅显示相关部分）：

```
<xcdg:DataGridControl x:Name="GridKaryawan" ItemsSource="{Binding Path=karyawans}" ReadOnly="True" 
                      SelectedItem="{Binding Path=selKaryawan, Mode=TwoWay}">
    ....
    ....
</xcdg:DataGridControl> 
```

在后面的代码：

```
 public ObservableCollection<BiodataKaryawan> karyawans { get; set; }
    public BiodataKaryawan selKaryawan { get; set; } 
```

在网格上：

```
<Grid DataContext="{Binding Path=selKaryawan, Mode=TwoWay}">
    <Grid.ColumnDefinitions>
       <ColumnDefinition Width="Auto" />
       <ColumnDefinition />
       ....
       ....
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
       ....
       ....
    </Grid.RowDefinitions>

    <Label Grid.Row="0">Nama:</Label>
    <Label Grid.Row="1">Panggilan:</Label>
    ....
    ....

    <TextBox Grid.Column="1" Grid.Row="1" x:Name="txtNama" Text="{Binding Nama}"/>
    <TextBox Grid.Column="1" Grid.Row="2" x:Name="txtPanggilan" Text="{Binding Panggilan}" />
    ....
    ....
</Grid> 
```

我已成功将 DataGridControl.SelectedItem 绑定到网格。但我想在后面的代码中使用“selKaryawan”对象绑定它们，因为表单还将支持创建新的“BiodataKaryawan”，我打算使用“新建”按钮将新的 BiodataKaryawan 对象分配给 selKaryawan。但是绑定失败了。当我在数据网格中选择一行时，当我将其绑定到“GridKaryawan.SelectedItem”时，详细信息并未显示。我哪里做错了？还是有可能？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:38:10.147

我认为您需要在代码隐藏中实现 INotifyPropertyChanged 并在 selKaryawan 属性的设置器中引发 PropertyChanged 事件

# javascript - 动态加载带有标签的表单

> ID：15002216
> 
> 赞同：1
> 
> 时间：2013-02-21T12:24:33.687
> 
> 标签：javascript, jquery, asp.net, html

我需要加载一个带有动态选项卡的表单，该表单读取一个确定选项卡数量的 XML。我有一个“标签模板”，每个标签都是用这段代码编写的。第一个问题是字段的 id。如果我有 2 个（或更多）选项卡，则每个选项卡字段都有相同的 id，我无法获取/设置它们。

对于创建选项卡，我使用这样的 html 函数：

```
var divtab1 = $("#tab1").html();
var tabCode = "<div id='tab"+ i +"' class='tab_content'> "+ divtab1 +"</div>";
finalhtml = finalhml + tabCode; 
```

其中#tab1 是“选项卡模板”，我为每个选项卡执行此操作。最后我把finalhtml放在一个div中。

```
$("#bodyTabs").html(finalhtml); 
```

选项卡构建良好，但某些功能（如 datepickers 和 ckeditors（文本编辑器））不起作用。

我不知道如何动态更改字段 ID，也不知道这种方式是否最适合。

有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:02:11.967

尝试

`$('#ID').attr('id', 'ID2');`

改变身份证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:30:00.683

每当我们使用日期选择器或任何编辑器时，我们都必须在文档就绪事件中初始化它们。因此，我建议每当您更改选项卡内容时，只需调用受尊敬的控制器的 Init 方法，事情就会按预期工作。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:12:05.727

最后我找到了一个很好的解决方案。使用 c# 我构建了一个 for 并且每次迭代我都做：

```
<%     List<String> Idiomas = loadIdiomas();
       foreach (String idioma in Idiomas)
       { %>
       <div id="tab_<%=idioma%>" class="tab_content">
            <input type="text" name="<%=idioma%>_title" id="<%=idioma%>_title"  />
             ... 
```

通过这种方式，每个选项卡都有不同的 id 字段，避免使用 javascript。它更优雅，解决了日期选择器和文本编辑器的问题。

谢谢大家的回答:)

# mysql - 从 JavaFX 中的 ComboBox 中提取值并将其传递给不同类中的 SQL 查询

> ID：15002217
> 
> 赞同：0
> 
> 时间：2013-02-21T12:24:36.747
> 
> 标签：mysql, javafx-2

我有两个类。一个类生成一个带有从 MySql 数据库中检索的值的 PIE 图表。我们为此触发一个 SQL 查询。我还有一个带有组合框的 GUI。我希望从组合框中提取值，然后将这些提取的值嵌入到 SQL 查询中。

例如。在 GUY 中，如果用户从组合框中选择年份为 2012，并且从不同的组合框中选择类别作为角色带，我需要在运行时将这些值放入 sql statemnt 中。这可能吗，请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:04:07.443

`comboBox.getValue();`将给出为组合框设置的当前值，如果您想在组合框值更改时执行查询，则向其添加监听器。

# html - 低分辨率画布上的页脚重叠内容

> ID：15002218
> 
> 赞同：0
> 
> 时间：2013-02-21T12:24:38.557
> 
> 标签：html, css

我无法将页脚固定在页面底部。这可能只是我忘记的一句话，我过去曾多次这样做，所以我确信这只是一个愚蠢的错误。我已经清理了页面，以便您更容易地告诉我我忘记了什么。当内容没有通过它时它工作正常，删除`<br />`内容代码中的一些 s，你会看到它完成了留在底部的工作。

[http://jsfiddle.net/MS4KJ/](http://jsfiddle.net/MS4KJ/)

```
#footer{
    position:absolute; 
    bottom:0px;
    width:100%;
    background-color:#aaa;
    color:#fff;
    text-align:center;
    height: 100px;
    left:0px;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:28:42.060

将其更改为：

```
#footer{
    position: relative; 
    bottom:0px;
    width:100%;
    background-color:#aaa;
    color:#fff;
    text-align:center;
    height: 100px;
    left:0px;
} 
```

否则，选择最大高度并`min-height`为`#content`.

```
#content {min-height: 350px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:33:18.643

你应该使用：

```
position: relative; 
```

或者如果您想要粘性页脚，请查看以下内容：[使 CSS 页脚位于浏览器窗口的底部或内容的底部](https://stackoverflow.com/questions/616290/making-a-css-footer-either-sit-at-the-bottom-of-the-browser-window-or-bottom-of)

和这个网站：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

编辑：

尝试将 body padding 设置为 0px 并将页脚边距设置为 0px 并删除页脚 left: 0px。那应该删除页脚周围的空白。看看这个： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# java - 进程在java中挂起，即使我已经阅读（输入/错误）流，waitFor（）也需要永远

> ID：15002221
> 
> 赞同：0
> 
> 时间：2013-02-21T12:24:42.833
> 
> 标签：java, process, stream

我在 Java 中运行多个进程时遇到问题。

我有一个从 vector 运行 Processes 的循环`cmds`，它当前运行第一个进程，然后第二个进程挂起。

```
 ProcessBuilder proc = null;
   for (String cmd:cmds){
       proc = new ProcessBuilder(cmd.split("\\s"));
       Process p = proc.start();

       //Handle streams

       //in
       Scanner stdin = new Scanner(p.getInputStream());
       while(stdin.hasNextLine()){
            System.out.println(stdin.nextLine());
       }
       //err
       Scanner stderr = new Scanner(p.getErrorStream());
       while(stderr.hasNextLine()){
             System.out.println(stderr.nextLine());
       }
       //wait
       p.waitFor();
   } 
```

[这个答案](https://stackoverflow.com/a/3967947/1984350)显然对我不起作用，因为我已经从每个进程的 InputStream 和 ErrorStream 中读取。我有什么误解？

我怎样才能解决这个问题？

注意：我删除了我拥有的 try 块，因为它在此示例代码中并没有真正的帮助

**编辑**

```
 proc = new ProcessBuilder(cur_string.split("\\s"));
 proc. redirectErrorStream(true);
 final Process p = proc.start();//Runtime.getRuntime().exec(cur_string);
 //Handle streams
 //in
 new Thread(new Runnable(){
           public void run(){
                Scanner stdin = new Scanner(p.getInputStream());
                while(stdin.hasNextLine()){
                            System.out.println(stdin.nextLine());
                }
                stdin.close();
                }
        }).start();

  //wait
  p.waitFor(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T12:28:00.300

1.  您必须关闭进程的输入流。
2.  您不能假设所有标准输出都将在任何标准错误之前写入。您要么必须在 exec() 之前合并这些流，要么在单独的线程中读取其中一个。

# php - 如何在正则表达式中包含异常？

> ID：15002222
> 
> 赞同：0
> 
> 时间：2013-02-21T12:24:44.643
> 
> 标签：php, regex

我想将 a 之前的字符串中的所有内容加粗，`:`并按照以下方式（PHP）：

```
$string = preg_replace('/(.*):/', '<span class="bold">\\1:</span>', $string); 
```

现在我需要一个例外：`(`如果`:`. 这可能吗？

（所以基本上`Size: 123`应该加粗，但`We increase this (Max: 30)`不应该加粗）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:32:49.860

当然，只需使用：

```
$string = preg_replace('/([^(]*):/', '<span class="bold">\\1:</span>', $string); 
```

它将匹配 : 之前的任何字符，除了 (.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:38:28.313

你要崩溃了......让我们说：一切

```
<a href="http://example.com"><img src="http://example.com/image.png"/></a> 
```

怎么办？

我认为，这`Size: 123`不是页面上的“某处”。所以格式化它，当你*输出*它时

```
list($name, $value) = array_map('trim', explode(':', $attribute));
echo "<span class=\"bold\">$name</span>: $value"; 
```

最好首先将其作为数组，例如`array('Size'=>'123')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:53:44.243

@blue112 几乎就在那里，但为了不在`Max`字符串中加粗，`We increase this (Max: 30)`需要确保*整个*字符串不包含任何左括号。这是通过添加字符串开头标记来完成的`^`：

```
$string = preg_replace('/^([^(]*):/', '<span class="bold">\\1:</span>', $string); 
```

[在这里](http://regexr.com?33rr6)查看它的实际应用。

# spring - 如何使 Spring bean 线程安全

> ID：15002226
> 
> 赞同：3
> 
> 时间：2013-02-21T12:25:00.587
> 
> 标签：spring, thread-safety, code-injection, autowired

据我所知，Spring bean 默认是单例的。

我想要的是考虑实例属性使 bean 成为线程安全的。我将尝试使用一个简单的示例向您展示。
考虑以下代码：

```
@Controller
public class MyServlet {

    @Autowired
    private HelloService service;

    @RequestMapping(value="/hello", method = RequestMethod.GET)
    public void sayHello(HttpServletRequest req, HttpServletResponse res) throws IOException {
        service.doStuff();
    }

}

public class HelloService {

    private int i = 1;

    public void doStuff() {
        System.out.println("Started " + i);
        i++;
        System.out.println(Thread.currentThread().getName() + " Done " + i);
    }
} 
```

输出将是这样的：

```
32911580@qtp-28064776-0 - Started 1
7802158@qtp-28064776-2 - Started 2
32911580@qtp-28064776-0 - Done 3
7802158@qtp-28064776-2 - Done 3 
```

这证明了“i”变量在多个线程之间共享。

我还尝试将 HelloService bean 定义为原型，就像这样

```
<bean id="helloService" class="my.package.HelloService" scope="prototype" /> 
```

但结果是一样的。

我发现解决这个问题的唯一方法是： - 将声明移动到 doStuff() 方法中，但这不是我想要的 - 制作 doStuff() 方法，但这意味着有锁

我想要的是在每次通话时都有一个新的 HelloService 实例。

谁能帮我？提前致谢。

## 更新

我使用查找方法找到了方法注入的解决方案。 [http://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/html/beans.html#beans-factory-lookup-method-injection](http://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/html/beans.html#beans-factory-lookup-method-injection)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-24T07:02:56.907

由于您只有一个 MyServlet 实例，因此您也将只有一个 HelloService 实例。

以下 spring 范围之一有帮助： *request* 每个 HTTP 请求的新实例。 *session* 在 servlet 容器中创建的每个新 HttpSession 的类的新实例。

这将改变代码的语义。如果您在范围请求中声明 bean，您的计数器将始终为 1。

要拥有一个没有锁的唯一计数器，您可以使用 java.util.concurrent.atomic.AtomicInteger。

另一方面，锁没有什么不好的。除极端情况外，在大多数情况下，性能影响可以忽略不计。

构建应用程序后，请使用[http://vmlens.com](http://vmlens.com)检查竞争条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-11T12:06:26.073

> 我也尝试将 HelloService bean 定义为原型，但结果是一样的。

你得到了同样的结果，因为你`MyServlet`是单身。所以你只有一个`MyServlet`实例，因此你只有一个`HelloService`实例。如果您也制作`MyServlet`原型*bean*，则每次都会获得两者的新实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-26T21:38:09.513

添加到 Thomas 的答案中，对于服务 bean，请求范围是有状态和线程安全组件的最佳选择，因为在该范围内通常只调用一个实例。

如果在特定应用程序范围内需要多个（有状态和线程安全）bean，则原型范围将是最合适的选择。

# yii - 显示无效的 google adwords 帐户错误

> ID：15002236
> 
> 赞同：0
> 
> 时间：2013-02-21T12:25:24.140
> 
> 标签：yii, google-ads-api

我是[Google adwords 的新手 - 我的客户中心](http://www.google.com/adwords/myclientcenter/)。我有一个网站可以使用 Yii 框架查看所有 MCC 活动、广告组、广告等。它工作正常。

我的问题是，如果 Mcc 电子邮件或密码或客户端 ID 无效，则会显示如下代码的错误。

```
Failed to get authToken. Reason: BadAuthentication 

$response = $this->Login();
095     $fields = $this->ParseResponse($response);
096     if (array_key_exists('Error', $fields)) {
097       $error = $fields['Error'];
098       if (array_key_exists('Info', $fields)) {
099         $error .= ': ' . $fields['Info'];
100       }
101       $url = array_key_exists('Url', $fields) ? $fields['Url'] : NULL;
102       $captchaToken = array_key_exists('CaptchaToken', $fields) ?
103           $fields['CaptchaToken'] : NULL;
104       $captchaUrl = array_key_exists('CaptchaUrl', $fields) ?
105           $fields['CaptchaUrl'] : NULL;
106       throw new AuthTokenException($error, $url, $captchaToken, $captchaUrl);
107     } else if (!array_key_exists('Auth', $fields)) {
108       throw new AuthTokenException('Unknown');
109     } else {
110       return $fields['Auth'];
111     }
112   }
113 
114   /**
115    * Makes the client login request and stores the result.
116    * @return string the response from the ClientLogin API
117    * @throws AuthTokenException if an error occurs during authentication
118    */ 
```

但我想将错误显示为“您的帐户无效”。请告知我可以在哪里写条件以检查帐户是否有效。

我对此没有太多想法。我搜索了 google adwords api 客户端库，发现了以下“ [http://code.google.com/p/google-api-adwords-php/downloads/list](http://code.google.com/p/google-api-adwords-php/downloads/list) ”。之后，下载 aw_api_php_lib_3.2.2.tar.gz 并将该代码放在“mysite/protected/”文件夹中。我已经修改了“mysite/protected/adwords/src/Google/Api/Ads/AdWords/auth.ini”文件中的配置。

在视图文件 [mysite/protected/views/site/view.php] 中，我将 Adwords 函数称为：

```
Yii::import('application.adwords.*');
require_once('examples/v201206/BasicOperations/GetCampaigns.php')
$user = new AdWordsUser();
$user->LogAll();
$result_camp = GetCampaignsExample($user); 
```

它返回所有广告系列。但是如果我提供了错误的配置细节，它会显示上述错误 [Failed to get authToken. 原因：BadAuthentication]。我想以指定的格式显示错误。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:28:31.143

@lifeline，当您调用方法`$user->GetService`（GetCampaings.php）时会发生错误。如果您想使用示例代码获取campaings，请处理以下行中的异常：

```
try{
    $result_camp = GetCampaignsExample($user);
}
catch(Exception $e) {
    // display your error message
} 
```

我建议您阅读[AdWords API 文档](https://developers.google.com/adwords/api/docs/reference/v201206/CampaignService)，因为该`GetService`方法可能会抛出很多不同的异常，具体取决于服务类型（您使用的是`CampaignService`）。尝试详细了解 AdWords API 中的错误处理，以减少未来的麻烦。:)

此外，用于身份验证的 ClientLogin 方法（您正在使用）已被正式弃用。[在此处](https://developers.google.com/adwords/api/docs/guides/basic-concepts#clientlogin)查看更多详细信息。

# sql-server-2008 - 如何仅针对 sql server 2008 中的某些特定数据恢复数据库

> ID：15002237
> 
> 赞同：2
> 
> 时间：2013-02-21T12:25:29.507
> 
> 标签：sql-server-2008

我有一个包含许多表的数据库。该数据库用于保存分公司的所有交易数据。但是现在，我有一个分公司关注数据交易的问题。例如，我有关于分公司的表 master，主键是`BranchID ('BR01','BR02','BR03')`. 每天我的应用程序都会创建备份数据库。

现在，我只想恢复分支“BR02”的数据，因为这个问题是致命的。任何人，你能帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:26:49.107

创建一个新数据库，将备份恢复到这个新数据库，然后从这个新数据库中获取您需要的数据以更新原始数据库中的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:08:45.160

* * *

这是你的答案：

创建一个新表，比如说 TestTable，然后从**YOUR TABLE**中获取值到**TESTTABLE**。因此，它将使用您所需的 BR02 数据创建一个新表。

```
SELECT * FROM [your existing table]

SELECT *

INTO TestTable

FROM [your existing table]

WHERE BranchID = 'BR02'

----Verify that Data in TestTable
SELECT * FROM TestTable

GO 
```

好运 ！

# java - Maven 程序集：DependencySet 或 ModuleSet

> ID：15002248
> 
> 赞同：1
> 
> 时间：2013-02-21T12:26:04.183
> 
> 标签：java, maven, maven-assembly-plugin

我有一个多模块项目：

*组装项目
--------- 模块 1
--------- 模块 2*

我想在我的程序集（zip）中收集模块的罐子。
存档的最佳方法是什么？使用 moduleSets 或dependenySets 或两者兼而有之？我只是想将模块 jar 放入 zip 中的 lib 文件夹中，并且所有模块都在组装项目的模块部分中，因为我想在组装 zip 之前构建它们。

有什么提示吗？小费？最佳实践？

最好的，
一月

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:37:29.907

这是我为 SoftSmithy 项目所做的：

[https://github.com/SoftSmithy/softsmithy-lib/blob/3d4cdaa74febe37bc58420e25dd340c0d0d1cd17/src/main/assembly/dist.xml](https://github.com/SoftSmithy/softsmithy-lib/blob/3d4cdaa74febe37bc58420e25dd340c0d0d1cd17/src/main/assembly/dist.xml)

这是生成的 zip 文件：http: [//sourceforge.net/projects/softsmithy/files/softsmithy/v0.3/](http://sourceforge.net/projects/softsmithy/files/softsmithy/v0.3/)

这里是对应的多模块pom： [https ://github.com/SoftSmithy/softsmithy-lib/blob/3d4cdaa74febe37bc58420e25dd340c0d0d1cd17/pom.xml](https://github.com/SoftSmithy/softsmithy-lib/blob/3d4cdaa74febe37bc58420e25dd340c0d0d1cd17/pom.xml)

（我使用了模块集。）

# php - 整合 AWeber 问题

> ID：15002249
> 
> 赞同：1
> 
> 时间：2013-02-21T12:26:05.190
> 
> 标签：php, aweber

我正在我的网站上集成**AWeber**，但我发现了问题，必须说文档不太清楚。

```
<?php
require_once('aweber_api/aweber_api.php');

$consumerKey    = '***'; # put your credentials here
$consumerSecret = '***'; # put your credentials here
$accessKey      = '***'; # put your credentials here
$accessSecret   = '***'; # put your credentials here
$account_id     = '***'; # put the Account ID here
$list_id        = '***'; # put the List ID here

$aweber = new AWeberAPI($consumerKey, $consumerSecret); 
```

但我不知道，我从哪里得到`aweber_api/aweber_api.php`and `$consumerKey`, `$consumerSecret`, `$accessKey`, `$list_id`, `$account_id`and `$accessSecret`。我在[AWeber.com](http://www.aweber.com/)上注册了帐户，但没有找到这些凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:18:53.123

当您注册开发者帐户并“创建和应用”时，使用者密钥和秘密由[https://labs.aweber.com](https://labs.aweber.com)网站发布。然后，您可以使用具有这两个值的 API 库来启动授权过程（遵循 OAuth 1.0a 标准）。该过程将为您提供访问密钥和秘密。

最后，您使用这两对密钥让您的应用在每次请求数据时向 API 进行身份验证：

*   Consumer Key 和 Consumer Secret 标识你的应用
*   访问密钥和访问秘密对 API 说，“我正在登录到这个特定的 AWeber 帐户”

一旦您的应用程序通过了身份验证，您就可以使用该库来获取您想要访问的任何列表的帐户 ID 和适当的列表 ID。

AWeber 有一个很好的教程，包括示例代码，可以在这里引导您完成他们的 OAuth 流程：

[https://labs.aweber.com/getting_started/private#private_connect_oauth](https://labs.aweber.com/getting_started/private#private_connect_oauth)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T11:14:43.087

您需要在 Aweber 上创建一个开发者帐户才能获得这些。

转至：[https ://labs.aweber.com/](https://labs.aweber.com/)

然后创建一个应用程序来获取这些值。

# node.js - node.js 是否可以在现有的 unix 套接字文件上启动服务器？

> ID：15002251
> 
> 赞同：0
> 
> 时间：2013-02-21T12:26:06.760
> 
> 标签：node.js, sockets, unix

`net.Server.listen`如果绑定到现有的 unix 套接字文件，则会引发错误。是否可以在不先删除文件的情况下解决此问题？

或者我可以检测它是否未被另一个节点进程使用，如果没有 - 删除它，如果是 - 崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:47:15.300

你可以`net.connect()`先听，如果没有人在听，你会得到一个 ECONNREFUSED 错误。

# android - 在android中注入口音KEY事件

> ID：15002252
> 
> 赞同：2
> 
> 时间：2013-02-21T12:26:06.720
> 
> 标签：android, events, char, keycode, inject

情况如下：

我正在向我的设备发送远程事件（我完全可以访问它）。这些事件是关键事件，所以我将它们直接注入 /dev/input/event*

我正在做一个键盘，我成功发送了普通键 AZ、0-9、一些特殊字符，如 *^'?...

但是现在我想注入这样的字符**à**我尝试了很多东西但没有用。

知道如何将其直接注入 linux 事件文件吗？

例如，我尝试注入 KEY_GRAVE，然后注入 KEY_A，但我得到**了 `a**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:55:52.253

对于那些被同样问题困扰的人，我终于解决了。我发现在 /system/usr/keychars/Virtual.km 中阅读了 keycharmap

我发现有些字母是用 unicodes 定义的，这个 uncodes 是重音符号等等。

因此，我创建了一个类来识别这些代码，并从 char 中获取 linux 代码。

```
public static int convertCharToCode(char c) {
    switch (c) {
    case 'a': return Codes.KEY_A;
    case 'b': return Codes.KEY_B;
    case 'c': return Codes.KEY_C;
    case 'd': return Codes.KEY_D;
    case 'e': return Codes.KEY_E;
    case 'f': return Codes.KEY_F;
    case 'g': return Codes.KEY_G;
    case 'h': return Codes.KEY_H;
    case 'i': return Codes.KEY_I;
    case 'j': return Codes.KEY_J;
    case 'k': return Codes.KEY_K;
    case 'l': return Codes.KEY_L;
    case 'm': return Codes.KEY_M;
    case 'n': return Codes.KEY_N;
    case 'o': return Codes.KEY_O;
    case 'p': return Codes.KEY_P;
    case 'q': return Codes.KEY_Q;
    case 'r': return Codes.KEY_R;
    case 's': return Codes.KEY_S;
    case 't': return Codes.KEY_T;
    case 'u': return Codes.KEY_U;
    case 'v': return Codes.KEY_V;
    case 'w': return Codes.KEY_W;
    case 'x': return Codes.KEY_X;
    case 'y': return Codes.KEY_Y;
    case 'z': return Codes.KEY_Z;
    case '0': return Codes.KEY_0;
    case '1': return Codes.KEY_1;
    case '2': return Codes.KEY_2;
    case '3': return Codes.KEY_3;
    case '4': return Codes.KEY_4;
    case '5': return Codes.KEY_5;
    case '6': return Codes.KEY_6;
    case '7': return Codes.KEY_7;
    case '8': return Codes.KEY_8;
    case '9': return Codes.KEY_9;
    case '-': return Codes.KEY_MINUS;
    case '=': return Codes.KEY_EQUAL;
    case ';': return Codes.KEY_SEMICOLON;
    case ' ': return Codes.KEY_SPACE;
    case '\'': return Codes.KEY_APOSTROPHE;
    case '`': return Codes.KEY_GRAVE;
    case '\\': return Codes.KEY_BACKSLASH;
    case ',': return Codes.KEY_COMMA;
    case '.': return Codes.KEY_DOT;
    case '/': return Codes.KEY_SLASH;
    case '!': return Codes.KEY_1;
    case '@': return Codes.KEY_2;
    case '#': return Codes.KEY_3;
    case '$': return Codes.KEY_4;
    case '%': return Codes.KEY_5;
    case '^': return Codes.KEY_6;
    case '&': return Codes.KEY_7;
    case '*': return Codes.KEY_8;
    case '(': return Codes.KEY_9;
    case ')': return Codes.KEY_0;
    case '_': return Codes.KEY_MINUS;
    case '+': return Codes.KEY_EQUAL;
    case ':': return Codes.KEY_SEMICOLON;
    case '\"': return Codes.KEY_APOSTROPHE;
    case '~': return Codes.KEY_GRAVE;
    case '|': return Codes.KEY_BACKSLASH;
    case '<': return Codes.KEY_COMMA;
    case '>': return Codes.KEY_DOT;
    case '?': return Codes.KEY_SLASH;
    default:
        return -1;
    }
}

public static boolean needShift(char c) {
    switch (c) {
    case '!':
        return true;
    case '@':
        return true;
    case '#':
        return true;
    case '$':
        return true;
    case '%':
        return true;
    case '^':
        return true;
    case '&':
        return true;
    case '*':
        return true;
    case '(':
        return true;
    case ')':
        return true;
    case '_':
        return true;
    case '+':
        return true;
    case ':':
        return true;
    case '\"':
        return true;
    case '~':
        return true;
    case '|':
        return true;
    case '<':
        return true;
    case '>':
        return true;
    case '?':
        return true;
    }
    return false;
} 
```

您应该使用从文本中获得的字符调用 convertCharToCode(c)，然后还应该调用 needShift(char c) 来检查是否需要移位。同样在发送事件之前，我会检查这封信是否是像**à á ä 这样的死字符...**如果有的话，我会在 KEY_RIGHTALT 中注入对应的信函。

例如，如果您需要注入**à**序列必须是：

```
intSendEvent(Codes.EV_KEY, Codes.KEY_RIGHTALT, 1);
intSendEvent(Codes.EV_KEY, Codes.KEY_GRAVE, 1);
intSendEvent(Codes.EV_KEY, Codes.KEY_GRAVE, 0);
intSendEvent(Codes.EV_KEY, Codes.KEY_RIGHTALT, 0);

if (caps==1) 
    result=intSendEvent(Codes.EV_KEY, Codes.KEY_LEFTSHIFT, 1);
sendSpecialChar(special);

result=intSendEvent(Codes.EV_KEY, key, 1);
result=intSendEvent(Codes.EV_KEY, key, 0);
if (caps==1) 
    result=intSendEvent(Codes.EV_KEY, Codes.KEY_LEFTSHIFT, 0);
intSendEvent(Codes.EV_SYN, 0, 0); 
```

这些 intSendEvent 是注入事件的本机函数。

# magento - Magento 1.7 - 从 url 中删除 index.php

> ID：15002254
> 
> 赞同：4
> 
> 时间：2013-02-21T12:26:12.997
> 
> 标签：magento, magento-1.7

我有以下设置：

`Use Web Server Rewrites => Yes`

在`htaccess` 我有`RewriteBase /`

缓存被禁用。

在我使用的一个电子邮件模板中`<a href='{{store url="doc/toc.pdf"}}'>xxxx</a>`

这导致`/index.php/doc/toc.pdf/`

如何移除`/index.php` 零件？

商店其余部分的链接不会显示`index.php`在 url 中。

`Mage:getUrl`在`.phtml`文件中使用时我也有这个

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T08:10:17.897

我在某个适合我的地方找到了这个解决方案：

`Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB);`

这返回：

`http://mydomain.com/` 所以`index.php`从网址中删除。

在一个模板中，我现在使用这个：

`{{config path="web/unsecure/base_url"}}doc/toc.pdf`

它还返回没有 index.php 的 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:08:59.357

尝试将其添加到您的 .htaccess 文件中。

```
RewriteRule .* /index.php [L] 
```

记得清除缓存。

# android - android绘图应用程序线一旦改变颜色以前绘制的所有线条都涂有新颜色

> ID：15002261
> 
> 赞同：1
> 
> 时间：2013-02-21T12:26:36.470
> 
> 标签：android, canvas, paint

我正在制作一个绘图应用程序，以下代码可以正常工作，除了当我想更改油漆线的颜色时，之前绘制的所有线条都将更改为新颜色：

```
 private Bitmap bitmap; // drawing area for display or saving
    private Canvas bitmapCanvas; // used to draw on bitmap
    private Paint paintLine; // used to draw lines onto bitmap   
    private Path mPath; 
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>();
    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;    

    // DoodleView constructor initializes the DoodleView

    public DoodleView(Context context, AttributeSet attrs) 
    {
       super(context, attrs); // pass context to View's constructor
       this.context_new=context;
       setFocusable(true);
       setFocusableInTouchMode(true);      

       // set the initial display settings for the painted line
       paintLine = new Paint();
       paintLine.setAntiAlias(true); // smooth edges of drawn line
       paintLine.setDither(true);
       paintLine.setColor(Color.BLACK); // default color is black
       paintLine.setStyle(Paint.Style.STROKE); // solid line
       paintLine.setStrokeJoin(Paint.Join.ROUND);
       paintLine.setStrokeWidth(5); // set the default line width
       paintLine.setStrokeCap(Paint.Cap.ROUND); // rounded line ends

       bitmapCanvas = new Canvas();
       mPath = new Path();            
     } // end DoodleView constructor

     // Method onSizeChanged creates BitMap and Canvas after app displays

     @Override
     public void onSizeChanged(int w, int h, int oldW, int oldH)
     {
        super.onSizeChanged(w, h, oldW, oldH);
        DoodlzViewWidth = w;       
        DoodlzViewHeight = h;           
     } 

     @Override

     protected void onDraw(Canvas canvas) 
     {         
       for (Path p : paths){canvas.drawPath(p, paintLine);}  
       canvas.drawPath(mPath, paintLine);
       Log.i("OnDRAWING", "REACH ON DRAW");        
    } 

  // START TOUCH: handle touch event
     @Override

     public boolean onTouchEvent(MotionEvent event) 
     {            
          float x = event.getX();
          float y = event.getY();

          switch (event.getAction())
          {
              case MotionEvent.ACTION_DOWN:
                  touch_start(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_MOVE:
                 touch_move(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_UP:
                  touch_up();
                  invalidate();
                  break;
          }
          return true;
    }

     private void touch_start(float x, float y) 
     {
       undonePaths.clear();
       mPath.reset();
       mPath.moveTo(x, y);
       mX = x;
       mY = y;
    }

    private void touch_move(float x, float y) 
    {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) 
        {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }  

    private void touch_up() 
    {
        mPath.lineTo(mX, mY);      
        bitmapCanvas.drawPath(mPath, paintLine);// commit the path to our offscreen  
        paths.add(mPath);
        mPath = new Path(); 
    }

    public void onClickUndo() 
    { 
       if (paths.size()>0) 
        { 
           undonePaths.add(paths.remove(paths.size()-1));
           invalidate();
        }      
       else Toast.makeText(getContext(), "nothing more to undo", Toast.LENGTH_SHORT).show();  
    } 
```

**设置绘图颜色：**

```
 public void setDrawingColor(int color) // set the painted line's color 
   {       
       paintLine.setColor(color);
   } 
```

如何修改上面的代码，使前一行固定为原来的颜色？？？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:31:53.080

您需要跟踪路径颜色并`onDraw`恢复最初用于绘制路径的颜色。

```
 protected void onDraw(Canvas canvas) 
 {          
   for (Path p : paths){canvas.drawPath(p, paintLine);}  
   paintLine.setColor(restoreColorForPath(p));
   canvas.drawPath(mPath, paintLine);
   Log.i("OnDRAWING", "REACH ON DRAW");        
} 
```

你只需要实现`restoreColorForPath`它是对等的部分`storeColorForPath(path,color)`（可能是一个简单的`Map`）

这个类似的问题可以帮助你：[如何用不同的颜色绘制多条线并撤消，重做android中的路径？](https://stackoverflow.com/questions/13705973/how-to-draw-the-multiple-lines-with-different-color-and-undo-redo-the-paths-in-a/13740234#13740234)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:36:45.263

```
protected void onDraw(Canvas canvas) 
 {         
   for (Path p : paths){canvas.drawPath(p, paintLine);}  
   canvas.drawPath(mPath, paintLine);
   Log.i("OnDRAWING", "REACH ON DRAW");        
} 
```

试试这个代码而不是上面的

```
protected void onDraw(Canvas canvas) 
 {         
   canvas.drawBitmap(bitmapCanvas, 0,0,paintLine);
   canvas.drawPath(mPath, paintLine);
   Log.i("OnDRAWING", "REACH ON DRAW");        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-22T13:28:07.070

```
@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    for (int i = 0; i < position1.size(); i += 2) {
        float x1 = position1.get(i);
        float y1 = position1.get(i + 1);
        float x2 = position2.get(i);
        float y2 = position2.get(i + 1);

        Paint paint = new Paint();
        if(words[a].getMEANING().equals(s2[b])){
            paint.setPathEffect(new CornerPathEffect(10));
            paint.setColor(Color.GREEN);
            paint.setStrokeWidth(13);
            paints.add(paint);
        }else{
            paint.setPathEffect(new CornerPathEffect(10));
            paint.setColor(Color.RED);
            paint.setStrokeWidth(13);
            paints.add(paint);

        }

        canvas.drawLine(x1,y1, x2,y2, paints.get(i));
    }
} 
```

# java - Java中的LRU算法

> ID：15002262
> 
> 赞同：1
> 
> 时间：2013-02-21T12:26:38.453
> 
> 标签：java, date, timestamp, lru

我目前有一个自定义类的数组，如下所示：

```
Phy[] memory = new Phy[256]; 
```

在我的`Phy`课堂上，我有以下功能：

*   获取时间戳（返回时间戳）
*   更新时间戳（使用系统时间，获取自 1970 年以来的毫秒并设置它）

当涉及到 LRU 部分来查找 LRU 类时，我会这样做：

```
public int getLeastRecentlyUsed(){
    long leastUsed = memory[0].getTimeStamp();
    int  leastUsedPosition = 0;
    for(int i = 0; i < memory.length; i++){
        if(memory[i].getTimeStamp() < leastUsed){
            leastUsed = memory[i].getTimeStamp();
            leastUsedPosition = i;
        }
    }
    return leastUsedPosition;
} 
```

这基本上是寻找最旧的时间戳。

我刚刚意识到的问题是，处理器可以在 MS 中执行许多这些操作，而留下无用的算法。

我该怎么做才能对此进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:29:31.967

您不需要为此设置时间戳。每次使用时只需将每个项目移动到列表的开头即可。然后 LRU 项平均在列表的末尾。

Knuth 第 1 卷中还有一个相当不错的算法，它不会提供真正的 LRU，但会及时稳定到一个非常好的近似值。它只是由一个位环组成：您在每次访问时设置项目的位，并且在寻找空闲插槽时扫描环，清除设置位，直到找到一个已经清除的位。这意味着它至少没有在环周围使用过一次。下次扫描时，从这次停止的地方开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:32:24.150

而不是时间戳给每个“phy”对象一个唯一的值，每次分配它时都会增加。

所以做这样的事情：

```
class phy {
   private static int uniqueIdentifier = 0;

   private int timestamp;

   // Or give it a new (proper) name
   void updateTimestamp() {
       timestamp = uniqueIdentifier;
       uniqueIdentifier++;
   }
} 
```

每次更新“时间戳”时，您都会分配一个新的（更高/最高）数字，您可以使用它来查找最近最少使用的“phy”。

注意：如果您有多个线程，则需要一些同步以防止`uniqueIdentifier`同时访问（导致非唯一`timestamp`值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:33:30.700

尝试使用[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/LinkedHashMap.html)来实现它怎么样？

查看[此](https://stackoverflow.com/questions/224868/easy-simple-to-use-lru-cache-in-java)和[此](http://java-planet.blogspot.co.uk/2005/08/how-to-set-up-simple-lru-cache-using.html)以获取有关如何实现它的示例

# security - 如何在 Symfony2 中使用 Drupal 7 中的密码编码器

> ID：15002264
> 
> 赞同：0
> 
> 时间：2013-02-21T12:26:52.713
> 
> 标签：security, symfony, drupal-7, symfony-2.1

我想使用我的 drupal 数据库对我的 symfony 应用程序上的用户进行身份验证。我应该能够检索他们的编码密码以将其与提交的密码进行比较。问题是我认为 Drupal 组件（[http://api.drupal.org/api/drupal/includes%21password.inc/function/_password_crypt/7](http://api.drupal.org/api/drupal/includes%21password.inc/function/_password_crypt/7)）中没有使用基本编码器。

因此，我的问题是，如何在 symfony 自定义编码器中实现 drupal 编码器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:59:00.547

看看这里：[http ://api.drupal.org/api/drupal/includes%21password.inc/function/user_hash_password/7](http://api.drupal.org/api/drupal/includes%21password.inc/function/user_hash_password/7)

然后按照函数调用，您应该能够模仿这是 Symfony。它基本上是使用带有盐的sha512。

有关如何在 Symfony 中编写自己的编码器的信息，请参阅此问题：[Symfony2 create own encoder for storage password](https://stackoverflow.com/questions/7878887/symfony2-create-own-encoder-for-storing-password)

# c++ - 为什么编译器在混合模板和继承时在某些情况下需要 this-> 前缀

> ID：15002270
> 
> 赞同：2
> 
> 时间：2013-02-21T12:27:10.473
> 
> 标签：c++, templates, inheritance, this

考虑这段代码：

```
 template <typename T>
  struct X{
     struct Y{
          unsigned i;
     };

    template<typename E>
    struct Z : public Y {

       unsigned foo(){
          return i;
       }
    };

  }; 
```

我们有一个`X`带有嵌套类的类模板`Y`和`Z`. `Z`又是一个模板并继承自`Y`. 因此，它也继承了字段`i`。但是，此代码无法编译。编译说，它无法`i`在`foo()`. `Z`显式前缀`i`with`this->`解决了这个问题。

如果我删除了外部类型`X`，则不再需要前缀，并且代码可以正常编译。

为什么`this->`这里需要这个显式前缀？

# jsf-2 - 动态 ui 包含和命令按钮

> ID：15002272
> 
> 赞同：4
> 
> 时间：2013-02-21T12:27:16.313
> 
> 标签：jsf-2, primefaces, commandbutton, uiinclude

我有一个页面，其中动态包含来自另一个页面的内容（这是通过 bean 中的方法完成的）

**第一页.xhtml**

```
<ui:include src="#{managedBean.pageView}">
    <ui:param name="method" value="#{managedBean.someAction}"/>
</ui:include> 
```

这将重定向到第二个页面，`<ui:composition>`其中包含命令按钮。

**第二页.xhtml**

```
<ui:composition>
..
..
<p:commandButton actionListener=#{method} value="Submit"/>
</ui:composition> 
```

**托管豆**

```
public String pageView(){
return "secondPage.xhtml";
}

public void someAction(){
*someAction*
} 
```

secondPage.xhtml 中的 commandButton 不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T12:47:25.133

您不能通过`<ui:param>`. 它们被解释为值表达式。

你基本上有3个选择：

1.  将 bean 实例和方法名称拆分为 2 个参数：

    ```
    <ui:param name="bean" value="#{managedBean}" />
    <ui:param name="method" value="someAction" /> 
    ```

    并使用大括号将它们耦合到标记文件中`[]`，如下所示：

    ```
    <p:commandButton action="#{bean[method]}" value="Submit" /> 
    ```

    * * *

2.  创建一个将值表达式转换为方法表达式的标记处理程序。JSF 实用程序库[OmniFaces](http://omnifaces.org)具有执行[`<o:methodParam>`](http://showcase.omnifaces.org/taghandlers/methodParam)此操作的功能。在标记文件中按如下方式使用它：

    ```
    <o:methodParam name="action" value="#{method}" />
    <p:commandButton action="#{action}" value="Submit" /> 
    ```

    * * *

3.  请改用[复合组件](https://stackoverflow.com/tags/composite-component/info)。您可以使用`<cc:attribute method-signature>`将操作方法​​定义为属性。

    ```
    <cc:interface>
        <cc:attribute name="method" method-signature="void method()"/>
    </cc:interface>
    <cc:implementation>
        <p:commandButton action="#{cc.attrs.method}" value="Submit"/>
    </cc:implementation> 
    ```

    使用如下：

    ```
    <my:button method="#{managedBean.someAction}" /> 
    ```

# css - CSS active not working

> ID：15002274
> 
> 赞同：-1
> 
> 时间：2013-02-21T12:27:20.343
> 
> 标签：css

I am using asp.net4.0 and trying to create a menu bar through the use of CSS, When i am running the program the hove and the click work but the active code doesnt any idea why this is happening

**CSS Code**

```
 #main-nav{
        height:29px;
        float:left;
        background-image:url(images/nav-bg.gif);
        background-repeat:repeat-x;
        background-position:top left;
        width:100%;
    }

    #main-nav ul,
    #main-nav li{
        padding:0px;
        margin:0px;
        list-style-type:none;
    }

    #main-nav ul{
        height:29px;
        line-height:29px;
        background-image:url(images/nav-bar.gif);
        background-position:right;
        background-repeat:no-repeat;
        float:left;
        padding:0px 1px 0px 0px;
        margin:0px 0px 0px 10px;
    }

    #main-nav li{
        height:29px;
        line-height:29px;
        display:inline;
        position:relative;
        float:left;
        width:80px;
        text-align:center;
    }

    #main-nav li a{
        height:29px;
        width:80px;
        text-align:center;
        float:left;
        background-image:url(images/nav-bar.gif);
        background-position:left;
        background-repeat:no-repeat;
    }

    #main-nav li a:link,
    #main-nav li a:visited{
        color:#FFFFFF;
        text-decoration:none;
    }

    #main-nav li active{
        background-image:url(images/active.gif);
        background-repeat:no-repeat;
        background-position:left;
    }
    #main-nav li a:hover{
        background-image:url(images/active.gif);
        background-repeat:no-repeat;
        background-position:left;
    } 
```

**Updated CSS file**

```
#main-nav{
    height:29px;
    float:left;
    background-image:url(images/nav-bg.gif);
    background-repeat:repeat-x;
    background-position:top left;
    width:100%;
}

#main-nav ul,
#main-nav li{
    padding:0px;
    margin:0px;
    list-style-type:none;
}

#main-nav ul{
    height:29px;
    line-height:29px;
    background-image:url(images/nav-bar.gif);
    background-position:right;
    background-repeat:no-repeat;
    float:left;
    padding:0px 1px 0px 0px;
    margin:0px 0px 0px 10px;
}

#main-nav li{
    height:29px;
    line-height:29px;
    display:inline;
    position:relative;
    float:left;
    width:80px;
    text-align:center;
}

#main-nav li a{
    height:29px;
    width:80px;
    text-align:center;
    float:left;
    background-image:url(images/nav-bar.gif);
    background-position:left;
    background-repeat:no-repeat;
}

#main-nav li a:link,
#main-nav li a:visited{
    color:#FFFFFF;
    text-decoration:none;
}

#main-nav li a:active ,#main-nav li a:focus 
{
    color:Aqua;
    background-image:url(images/active.gif);
    background-repeat:no-repeat;
    background-position:left;

}
#main-nav li a:hover{
    background-image:url(images/active.gif);
    background-repeat:no-repeat;
    background-position:left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:30:43.180

没有`active`标签。将其更改为：

```
#main-nav li a:active{
    background-image:url(images/active.gif);
    background-repeat:no-repeat;
    background-position:left;
} 
```

# mongodb - 无法从骆驼连接到mongodb

> ID：15002275
> 
> 赞同：1
> 
> 时间：2013-02-21T12:27:23.010
> 
> 标签：mongodb, apache-camel

在我的骆驼 RouteConfig.java 中，我无法连接到 mongo 数据库。我得到以下异常： 原因：org.apache.camel.NoSuchBeanException：在注册表中找不到 bean：myDb 类型：com.mongodb.Mongo at org.apache.camel.util.CamelContextHelper.mandatoryLookup(CamelContextHelper .java:130) 在 org.apache.camel.component.mongodb.MongoDbComponent.createEndpoint(MongoDbComponent.java:43) 在 org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:91) 在 org.apache。 camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:461) ... 42 更多

RouteConfig.java from("jms:queue:Test").bean(new SomeBean()).to("mongodb:mydb=flights&collection=tickets&operation=insert");

骆驼上下文.xml

任何帮助表示赞赏

谢谢洛克什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-01T08:44:05.923

如果您使用版本 >= 3 的 mongodb，请小心。您应该在 bean 定义中使用 class`com.mongodb.MongoClient`而不是。`com.mongodb.Mongo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:52:44.917

您需要在注册表中将 mongodb 设置为 bean。如果您使用 Spring，那么它只是一个

```
<bean id="mongodb" class=...> 
```

如果您使用 Java，那么您需要将其添加到 Camel 注册表实现之一，例如 JndiRegistry 或 SimpleRegistry。

如果您有 Camel in Action 这本书，请参阅第 4 章第 4.3 节，其中涵盖了 Camel 注册表。

# iphone - 有没有办法使用 setValue:forKey 来获取 C 类型的变量？

> ID：15002277
> 
> 赞同：3
> 
> 时间：2013-02-21T12:27:24.857
> 
> 标签：iphone, objective-c

我在一个对象上设置了一些属性，主要是`GLfloat`我想知道是否有一种方法可以使用`[self setValue:(id)value forKey:(id)key];`ac 样式变量？

`setValue:forKey`如果有可用的替代方案，则不必是替代方案。

我的理由是我在一个对象上有很多属性，`floats`我可以传递一个`NSDictionary`带有值（`NSNumber`这里没有问题）来设置每个相关值。

理想情况下，我可以在没有枚举器或自定义设置器的情况下做到这一点——这可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:32:29.830

您可以使用新的 Objective-C 语法自动将任何值装箱到 NSNumber 中：

```
GLfloat alpha;
alpha = 2.3f;

[self setValue:@(alpha) forKey:@"theKey"]; 
```

这将自动为您将浮点数转换为 NSNumber，而无需大惊小怪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T12:55:35.723

> 同样，`setValue:forKey:`确定指定键的适当访问器或实例变量所需的数据类型。如果数据类型不是对象，则使用适当的 -Value 方法从传递的对象中提取值。

您可以传递一个`NSNumber`，它会自动转换回您的设置器的浮点数。

```
@interface MyClass ()

@property (nonatomic, assign) CGFloat example;

@end

@implementation MyClass

- (void)testSetter {
    [self setValue:@(5.0f) forKey:@"example"];
}

@end 
```

# android - 系统找不到指定的文件“classes.dex”

> ID：15002284
> 
> 赞同：2
> 
> 时间：2013-02-21T12:28:07.417
> 
> 标签：android, titanium, appcelerator, titanium-mobile, titanium-modules

我开发了 android 模块项目并部署在 Titanium Project 中。当我运行 Titanium 项目时，经常出现此错误

```
 [INFO] logfile = C:\ws\Testw2\build.log
    [INFO] Building Testw2 for Android ... one moment
    [INFO] Titanium SDK version: 3.0.0 (12/12/12 18:49 a5894b3)
    [INFO] Fastdev server running, deploying in Fastdev mode
    [INFO] Copying CommonJS modules...
    [INFO] Copying project resources..
    [INFO] Tiapp.xml unchanged, skipping class generation
    [INFO] Force including all modules...
    [INFO] Compiling Javascript Resources ...
    [INFO] Compiling localization files
    [ERROR] Application Installer abnormal process termination. Process exit value was 1
    [ERROR] Exception occured while building Android project:
    [ERROR] Traceback (most recent call last):
    [ERROR]   File "C:\Users\Administrator\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 2376, in <module>
    [ERROR]     builder.build_and_run(False, avd_id, debugger_host=debugger_host)
    [ERROR]   File "C:\Users\Administrator\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 2192, in build_and_run
    [ERROR]     launched, launch_failed = self.package_and_deploy()
    [ERROR]   File "C:\Users\Administrator\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 1688, in package_and_deploy
    [ERROR]     unsigned_apk = self.create_unsigned_apk(ap_)
    [ERROR]   File "C:\Users\Administrator\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 1559, in create_unsigned_apk
    [ERROR]     apk_zip.write(self.classes_dex, 'classes.dex')
    [ERROR]   File "C:\Python27\lib\zipfile.py", line 1031, in write
    [ERROR]     st = os.stat(filename)
    [ERROR] WindowsError: [Error 2] The system cannot find the file specified: 'C:\\ws\\Testw2\\build\\android\\bin\\classes.dex' 
```

手动删除构建文件夹并运行后，我收到以下错误

```
 [INFO] logfile = C:\ws\Testw2\build.log
    [INFO] Building Testw2 for Android ... one moment
    [INFO] Titanium SDK version: 3.0.0 (12/12/12 18:49 a5894b3)
    [INFO] Fastdev server running, deploying in Fastdev mode
    [INFO] Copying CommonJS modules...
    [INFO] Copying project resources..
    [INFO] Detected change in tiapp.xml, or assets deleted. Forcing full re-build...
    [INFO] Force including all modules...
    [INFO] Force including all modules...
    [INFO] Compiling Javascript Resources ...
    [INFO] Compiling localization files
    [INFO] Compiling Android Resources... This could take some time
    [ERROR] Application Installer abnormal process termination. Process exit value was 1
    [ERROR] 
    [ERROR] UNEXPECTED TOP-LEVEL EXCEPTION:
    [ERROR] java.lang.IllegalArgumentException: already added: Lorg/apache/commons/codec/binary/Base64;
    [ERROR]     at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
    [ERROR]     at com.android.dx.dex.file.DexFile.add(DexFile.java:143)
    [ERROR]     at com.android.dx.command.dexer.Main.processClass(Main.java:301)
    [ERROR]     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:278)
    [ERROR]     at com.android.dx.command.dexer.Main.access$100(Main.java:56)
    [ERROR]     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:229)
    [ERROR]     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:244)
    [ERROR]     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:130)
    [ERROR]     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:108)
    [ERROR]     at com.android.dx.command.dexer.Main.processOne(Main.java:247)
    [ERROR]     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:183)
    [ERROR]     at com.android.dx.command.dexer.Main.run(Main.java:139)
    [ERROR]     at com.android.dx.command.dexer.Main.main(Main.java:120)
    [ERROR]     at com.android.dx.command.Main.main(Main.java:89)
    [ERROR] 
    [ERROR] UNEXPECTED TOP-LEVEL EXCEPTION:
    [ERROR] java.lang.IllegalArgumentException: already added: Lorg/apache/http/entity/mime/content/StringBody;
    [ERROR]     at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
    [ERROR]     at com.android.dx.dex.file.DexFile.add(DexFile.java:143)
    [ERROR]     at com.android.dx.command.dexer.Main.processClass(Main.java:301)
    [ERROR]     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:278)
    [ERROR]     at com.android.dx.command.dexer.Main.access$100(Main.java:56)
    [ERROR]     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:229)
    [ERROR]     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:244)
    [ERROR]     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:130)
    [ERROR]     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:108)
    [ERROR]     at com.android.dx.command.dexer.Main.processOne(Main.java:247)
    [ERROR]     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:183)
    [ERROR]     at com.android.dx.command.dexer.Main.run(Main.java:139)
    [ERROR]     at com.android.dx.command.dexer.Main.main(Main.java:120)
    [ERROR]     at com.android.dx.command.Main.main(Main.java:89)
    [ERROR] 2 errors; aborting
    [ERROR] System Error while compiling Android classes.dex 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:48:19.303

对于其他有相同或类似问题的人：

> [错误] 意外的顶级异常：
> 
> [错误] java.lang.IllegalArgumentException：已添加：Lorg/apache/commons/codec/binary/Base64；

意味着您向模块添加了一个库，该库也由 Android 或 Titanium 本身提供。只需删除这些额外的库并尝试重新编译所有内容。

有关在钛模块中使用外部库的其他信息，请访问：http: [//developer.appcelerator.com/blog/2011/11/integrating-an-external-library-in-an-android-module.html](http://developer.appcelerator.com/blog/2011/11/integrating-an-external-library-in-an-android-module.html)

# neo4j - Neo4j 中的节点之间不能添加多个关系

> ID：15002288
> 
> 赞同：1
> 
> 时间：2013-02-21T12:28:19.920
> 
> 标签：neo4j, spring-data-neo4j

我正在尝试使用 Neo4J 建模社交网络。这要求一个用户可以与另一个用户有多个关系。当我尝试保持这些关系时，只存储一个。例如，这是我做的测试单元：

```
@Test
public void testFindConnections() {

    Id id1 = new Id();
    id1.setId("first-node");

    Id id2 = new Id();
    id2.setId("second-node");
    idService.save(id2);

    id1.connectedTo(id2, "first-rel");
    id1.connectedTo(id2, "second-rel");

    idService.save(id1);

    for (Id im : idService.findAll()) {
        System.out.println("-" + im.getId());
        if (im.getConnections().size() > 0) {
            for (ConnectionType ite : im.getConnections()) {
                System.out
                        .println("--" + ite.getId() + " " + ite.getType());
            }
        }
    }
} 
```

这应该输出：

```
-first-node
--0 first-rel
--1 second-rel
-second-node
--0 first-rel
--1 second-rel 
```

但是，它输出：

```
-first-node
--0 first-rel
-second-node
--0 first-rel 
```

这是我的节点实体：

```
@NodeEntity
public class Id {

    @GraphId
    Long nodeId;
    @Indexed(unique = false)
    String id;

    @Fetch
    @RelatedToVia(direction=Direction.BOTH)
    Collection<ConnectionType> connections = new HashSet<ConnectionType>();
} 
```

还有我的关系实体：

```
@RelationshipEntity(type = "CONNECTED_TO")
public class ConnectionType {

    @GraphId Long id;
    @StartNode Id fromUser;
    @EndNode Id toUser;

    String type;
} 
```

问题可能是什么？有没有其他方法可以对节点之间的多个关系进行建模？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:38:53.773

这不是 Neo4j 的缺点，而是 Spring Data Neo4j 的限制。

通常，如果您有不同类型的关系，那么实际上选择不同的关系类型也是有意义的，而不是为此使用关系属性。

`CONNECTED_TO`也很通用。

`Id`也是一个非常通用的类，不应该是`User`或类似的吗？

`FRIEND` `COLLEAGUE`等会更有意义。

* * *

也就是说，如果你想继续使用你的模型，你可以使用

`template.createRelationshipBetween(entity1,entity2,type,properties,true)`

`true`代表允许重复。

或者，对 2 种关系类型使用两种不同的目标类型并使用

`@RelatedTo(enforceTargetType=true)`

# python - 如何使用 web.py python 中列表的结果实现分页

> ID：15002290
> 
> 赞同：1
> 
> 时间：2013-02-21T12:28:31.363
> 
> 标签：python, list, pagination, tuples, web.py

我正在使用 python`web.py`设计一个小型 Web 应用程序，实际上我没有使用任何数据库来获取结果/记录，我将有一个记录列表（我将根据要求从某个地方获取 :)）

下面是我的代码

**代码.py**

```
import web
from web import form

urls = (
    '/', 'index',
    '/urls', 'urls_result',
)

app =  web.application(urls, globals())
render = web.template.render('templates/')

class index:
    def GET(self):
        return render.home()

    def POST(self):
        result_list = [('Images', 'http://www.google.co.in/imghp?hl=en&tab=wi'), 
                       ('Maps', 'http://maps.google.co.in/maps?hl=en&tab=wl'), 
                       ('Play', 'https://play.google.com/?hl=en&tab=w8'), 
                       ('YouTube', 'http://www.youtube.com/?gl=IN&tab=w1'), 
                       ('News', 'http://news.google.co.in/nwshp?hl=en&tab=wn'),  
                       ('Gmail', 'https://mail.google.com/mail/?tab=wm'), 
                       ('Drive', 'https://drive.google.com/?tab=wo'), 
                       ('More&raquo;', 'http://www.google.co.in/intl/en/options/'), 
                       ('Web History', 'http://www.google.co.in/history/optout?hl=en'), 
                       ('Settings', 'http://www.google.co.in/preferences?hl=en'), 
                       ('Sign in', 'https://accounts.google.com/ServiceLogin?hl=en&continue=http://www.google.co.in/'), 
                       ('Advanced search', 'http://www.google.co.in/advanced_search?hl=en-IN&authuser=0'),
                       .............. 
                       ..............
                       .............. so on until 200 records      ]
        return render.recordslist(result_list)

if __name__ == "__main__":
    app.run() 
```

**主页.html**

```
$def with()
<html>
 <head>
   <title>Home Page</title>
  <body alink="green" link="blue" >
    <div class="main">
      <center>
              <form method="POST" action='urls'>
                  <input class="button" type="submit" name="submit" value="Submit" />
              </form>
      </center>
     </div>
  </body>
</html> 
```

**记录列表.html**

```
$def with(result_list)
<html>
 <head>
    <title>List of records</title> 
 </head>
 <body> 
   <table>
     $for link in result_list:
     <tr>
        <td>$link[0]</td>
        <td>$link[1]</td>
     </tr>    
   </table> 
 </body> 
```

因此，从上面的代码中，我正在做的是，当我运行服务器并使用从返回的 ip 访问浏览器时`web.py`，它被重定向到主页（使用 url`/`和模板作为`home.html`），该主页由带有单个按钮的表单组成。

现在在这里我没有使用任何`database`来获取记录，只是我有硬核记录，其形式`list of tuples`如您在上面看到的那样。

因此，当用户单击提交按钮时，我`table`通过指向`/url`呈现模板的形式显示记录`recordslist.html`

现在上述过程工作正常。但是这里`list of tuples/records`可能最多`200 or more`，所以我想实现`pagination`页面`/url`。

我用谷歌搜索了很多，所有的命中都是为了从数据库中检索记录，但不是从列表中，我真的很困惑如何用`10 pages for page`.

那么现在谁能告诉我如何从上面的代码中对列表中的结果/记录进行分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:07:46.850

### Get the Page

Firstly, you would have to pull the page out of the request from the user. Assuming that you will use a page querystring parameter, you can use this to determine the page number:

```
params = web.input()
page = params.page if hasattr(params, 'page') else 1 
```

### Use the Page

Once you have a page, all that pagination involves is returning a slice of results. The following function should give you the slices required (assuming that pages are 1-indexed):

```
def get_slices(page, page_size=10):
    return (page_size * (page - 1), (page_size * page) 
```

This will return the lower and upper bound that you can use to slice your results list. So where you currently `return render.recordslist(result_list)`, you could instead use:

```
lower, upper = get_slices(page)
return render.recordslist(result_list[lower:upper]) 
```

# java - SmartGWT 从 2.5 迁移到 3.x，TreeNode 抛出 ClassCastException

> ID：15002291
> 
> 赞同：1
> 
> 时间：2013-02-21T12:28:31.873
> 
> 标签：java, gwt, smartgwt, classcastexception, treenode

在从旧的 SmartGWT (2.5) 迁移到 SmartGWT 3.1 时，我们遇到了 TreeNode 类的问题。这是一个例外：

```
java.lang.ClassCastException: com.google.gwt.core.client.JavaScriptObject$ cannot be cast to java.util.List     
  at my.domain.gwt.client.documents.components.structure.dto.ArchiveTreeNode.getChildrens(ArchiveTreeNode.java:262)     
  at my.domain.gwt.client.documents.file_archive.folder_content.FolderContentList.showFolderContent(FolderContentList.java:1003)    
  at my.domain.gwt.client.documents.file_archive.FileArchive$17.onSuccess(FileArchive.java:607)     
  at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:232)     
  at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287) 
  at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)    
  at sun.reflect.GeneratedMethodAccessor58.invoke(Unknown Source)   
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
  at java.lang.reflect.Method.invoke(Method.java:597)   
  at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)  
  at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)     
  at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)  
  at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)  
  at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)  
  at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)  
  at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)    
  at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)  
  at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)     
  at com.google.gwt.core.client.impl.Impl.apply(Impl.java)  
  at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)     
  at sun.reflect.GeneratedMethodAccessor46.invoke(Unknown Source)   
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
  at java.lang.reflect.Method.invoke(Method.java:597)   
  at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)  
  at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)     
  at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)  
  at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)  
  at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)  
  at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)  
  at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)    
  at com.google.gwt.dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:299)    
  at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107)  
  at com.google.gwt.user.client.Window.alert(Window.java)   
  at com.smartgwt.client.SmartGwtEntryPoint$1.onUncaughtException(SmartGwtEntryPoint.java:310)  
  at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:244)     
  at sun.reflect.GeneratedMethodAccessor46.invoke(Unknown Source)   
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
  at java.lang.reflect.Method.invoke(Method.java:597)   
  at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)  
  at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)     
  at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)  
  at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)   
  at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)     
  at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)   
  at java.lang.Thread.run(Thread.java:662) 
```

方法：

```
 public void setChildrens(List<ArchiveTreeNode> list) {
        if (list != null) {
            setAttribute(ArchiveElementDataSource.CHILDRENS, list);
        }
    }

    public List<ArchiveTreeNode> getChildrens() {
        return (List<ArchiveTreeNode>) getAttributeAsObject(ArchiveElementDataSource.CHILDRENS);
    } 
```

应用程序很旧并且写得不好，但我们不能重写它（业务......）

ArchiveTreeNode 类扩展了 TreeNode。在我们的实现中，这个 get/set 方法没有什么特别之处。当用户单击树的任何节点（每次）时都会引发异常。

如何解决？

# c++ - 将图片旋转 90 度时复制像素 [Vec3d vs Vec3b]

> ID：15002294
> 
> 赞同：0
> 
> 时间：2013-02-21T12:28:51.807
> 
> 标签：c++, opencv, rotation, segmentation-fault

是的，我知道有一个功能，但这是学习 OpenCV 基础知识的（非常简单的）功能。

我检查了伪代码五次，很确定这不是逻辑错误。

```
#include <stdio.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
using namespace cv;

int main(int argc, const char *argv[])
{
    if (argc!=2 || argv[1]=="") {
        printf("No image specified.");
        exit(-1);
    }
    Mat im, out;
    const string fn = argv[1];

    im = cv::imread(fn);
    out.create(im.cols, im.rows, CV_8UC3);

    //int tmp = 0;
    for (int i = 0; i < out.rows; i++) {
        for (int j = 0; j < out.cols; j++) {
            out.at<cv::Vec3d>(i, j) = im.at<cv::Vec3d>(im.rows-1-j, i);
            /*
             *if (tmp<1000) {tmp++;}
             *else {imwrite("/tmp/out.png", out); tmp=0;}
             */
        }
    }

    imwrite("/tmp/in.png", im);
    imwrite("/tmp/out.png", out);

    return 0;
} 
```

![结果](../Images/9e2c5bfb7abfc2f28cc0631a3b3e2e96.png)

我注意到图片中的宽度恰好被拉伸了 3 倍（1px→3px）。
另外，返回时出现分段错误。

**更新：**

这是伪代码：

```
for(row=0; row<out.rows; row++) {
    for(col = 0; col<out.cols; col++) {
        out[row][col] = in[(in.rows-1)-col][row];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:22:04.867

您正在将图像读取为灰度图像：`cv::imread(name, 0)`.

您应该将其更改为: `cv::imread(name, 1)`，否则您不能使用`im.at<cv::Vec3b>(i, j)`（**注意`Vec3b`**, 而不是`Vec3d`, 其中`b`代表无符号字符，`d`表示双精度）

# java - 具有所有依赖项和 log4j.properties 文件的 Maven jar

> ID：15002299
> 
> 赞同：3
> 
> 时间：2013-02-21T12:29:24.060
> 
> 标签：java, maven, log4j

我必须构建包含所有依赖项和 log4j.properties 文件的 jar 文件。

我在stackoverflow上寻找答案，但没有运气。

现在我正在构建具有所有依赖项的 jar，但我现在不知道如何告诉 maven 将 log4j.properties 文件移动到 ma *.jar 文件中的 META-INF 目录。

我的 pom 的一部分，它生成具有依赖关系的 jar：

```
 <plugin>
                        <artifactId>maven-assembly-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>install</phase>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <archive>
                                <manifest>
                                    <mainClass>MainClass</mainClass>
                                </manifest>
                            </archive>
                            <descriptorRefs>
                                <descriptorRef>jar-with-dependencies</descriptorRef>
                            </descriptorRefs>
                        </configuration>
                    </plugin> 
```

为了让 jar 包含所有依赖项和 log4j.properties 文件，我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:34:20.573

不捆绑日志文件是正常的，因为您的用户可能希望单独/外部配置它。我在资源文件夹中构建了一个包含一个主类和 log4j 的简单项目，它可以在 Netbeans 中运行。

**pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.mycompany</groupId>
  <artifactId>log4j-sample</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>log4j-sample</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
  </dependencies>
</project> 
```

**src/main/com/mycompany/log4jsample/App.java**

```
package com.mycompany.log4jsample;

import org.apache.log4j.LogManager;
import org.apache.log4j.Logger;

/**
 * Hello world!
 *
 */
public class App {
    private static Logger logger = LogManager.getLogger("HelloWorld");

    public static void main(String[] args) {
        logger.info("Hello, World!");
    }
} 
```

**/src/main/resources/log4j.properties**

```
# To change this template, choose Tools | Templates
# and open the template in the editor.

log4j.rootLogger=DEBUG, CONSOLE
#log4j.rootLogger=INFO, FILE

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.Target=System.err
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.conversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p - %m%n 
```

**输出**

```
2013-02-22 00:27:39,518 INFO  - Hello, World! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:21:45.437

您可以使用[Maven Antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)编写一个 ant 脚本，该脚本将在 maven 的生命周期阶段执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:39:57.327

只需将您`log4j.properties`放在`src/main/resources/META-INF`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:27:58.550

我的问题与 pom 中资源标签中的 targetPath 元素和 a 相关：

```
 <resources>
        <resource>
            <targetPath>${project.build.directory}/</targetPath>
            <directory>src/main/java</directory>
            <includes>
                <include>*.properties</include>
            </includes>
        </resource>
    </resources> 
```

我所要做的就是删除这个 targetPath 元素。感谢您的时间，很抱歉没有粘贴所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-16T18:20:27.923

如果您将 log4j.properties 文件放入

```
src/main/resources/log4j.properties 
```

然后在 Maven 构建过程中，它会自动放置到正确的位置。看，这是我的 jar 文件的视图。

[![在此处输入图像描述](../Images/bbe910330f5c355a77a748ca7d9b469f.png)](https://i.stack.imgur.com/rYwtV.jpg)

# css - 跟随带有附加 div 的控件的高度

> ID：15002302
> 
> 赞同：0
> 
> 时间：2013-02-21T12:29:27.220
> 
> 标签：css, html, height

我有一个字段集（左）div（右）对。fieldset 的内容是固定的，但它具有 hide()/show() 元素，例如 [Next] 按钮。当这些控件切换时，它会改变 fieldset 控件的高度。我想用右侧的 div 跟随这个高度。如何？这不是调整大小事件...

```
-<fieldset>-----------------------<div>-----
|                                |         |
|                                |         |
|                                |         |
|                                |         |
|                                |         |
|                                |---------|
|             [Next]             |         
---------------------------------- 
```

**HTML**：

```
<div class="attach">
    <p>something</p>
</div>
<fieldset class="left">
    <p>lotsa content</p>
    <p class="message">
        <button id="n" type="button">Next &gt;</button>
        <span></span>
    </p>
</fieldset> 
```

**CSS**：

```
body {
    width: 720px;
}
fieldset.left {
    border-width: 1px 1px 1px 1px;
}
div.attach {
    position: relative;
    float: right;
    border: thin solid LightGray;
    right: 1px;
    width: 120px;
    height: 242px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:44:50.207

如何将它们都放在另一个 div 中并给现有的一个：

```
div.attach {
    height: 100%
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:11:48.633

如果您知道正确区域的内容不会溢出容器，您可以使用绝对定位，就像这个小提琴[http://jsfiddle.net/vasmB/2/](http://jsfiddle.net/vasmB/2/)

这是重要的一点：

```
left: 100%; top: 0; bottom: 0; 
```

通过将 left 设置为 100%，您将始终拥有原始容器右侧的框，无论其宽度如何。顶部/底部设置为 0 将保持高度灵活。

# .htaccess - 允许，拒绝来自 .htaccess

> ID：15002303
> 
> 赞同：1
> 
> 时间：2013-02-21T12:29:30.610
> 
> 标签：.htaccess

尝试在我的 .htaccess 中添加选项 Allow,Deny 时遇到一个小问题

```
<Limit GET POST PUT>
order deny,allow
deny from all
allow from 192.168.10.100
allow from 192.168.10.200
</Limit>

Options All -Indexes
<IfModule mod_php5.c>
php_flag engine 0
</IfModule>

# AddHandler cgi-script .php .pl .py .jsp .asp .htm .shtml .sh .cgi
Options -ExecCGI
<IfModule mod_rewrite.c>

############################################
## enable rewrites
    Options +FollowSymLinks
    RewriteEngine on

############################################
## never rewrite for existing files
    RewriteCond %{REQUEST_FILENAME} !-f
############################################
## rewrite everything else to index.php
    RewriteRule .* ../get.php [L]
</IfModule> 
```

我无法进入这个.htaccess所在的文件夹，IP地址是正确的，如果我只保留

```
<Limit GET POST PUT>
order deny,allow
deny from all
allow from 192.168.10.100
allow from 192.168.10.200
</Limit> 
```

我可以进入文件夹。但如果我放在一起就不再工作了。

任何帮助表示赞赏。

# jquery - JavaScript 函数执行得太快

> ID：15002306
> 
> 赞同：-2
> 
> 时间：2013-02-21T12:29:48.600
> 
> 标签：jquery, callback

在下面的示例中，`myFonk`立即调用；它不等待点击事件。为什么不？

```
 function myFonk(info) {
        $("#result").html(info);
    }

    function getText(text) {
        return function () {
            myFonk(text);
        }
    }

    $(document).ready(function () {
        $("#b1").click(getText("getText"));
        $("#b2").click(myFonk("myFonk"));
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T12:34:19.290

每当我们用 () 写函数名时，它会立即调用该函数，因此 `myFonk("myFonk")`不是正确的方法..

按以下方式写。

```
function myFonk(info) {
    $("#result").html(info);
}

function getText(text) {
    return function () {
        myFonk(text);
    }
}

$(document).ready(function () {
    $("#b1").click(getText("getText"));
    $("#b2").click(function () {
        myFonk("myFonk")
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:32:18.890

这是因为您没有传递对函数的引用。您正在调用函数并将结果用作`click`.

这将为您解决这个问题...

```
function myFonk(info) {
    $("#result").html(info);
}

function getText(text){
    return function() {
        myFonk(text);
    }
}

$(document).ready(function() {
    $("#b1").click(function() {
        getText("getText")
    });
    $("#b2").click(function() {
        myFonk("myFonk")
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:37:54.260

```
$(document).ready(function () {
    $("#b1").click(getText("getText"));
}); 
```

您在这里所做的是调用该函数`getText("getText")`并将该调用的结果传递给`$("#b1").click()`. 您不想传递函数的*结果*。您要做的是传递函数本身。所以重写为，

```
$(document).ready(function () {
    $("#b1").click(function() {
        return getText("getText");
    });
}); 
```

如果你感兴趣的函数没有参数（例如，你想调用一个`hello()`没有参数的函数，你可以这样做：

```
$(document).ready(function () {
    $("#b1").click(function() {
        return hello();
    });
}); 
```

...或者你可以简化它：

```
$(document).ready(function () {
    $("#b1").click(hello);
}); 
```

注意：您传递`hello`的是（函数本身），而不是`hello()`（它将立即执行函数并将结果返回给`click()`函数。

# java - 在 Web 应用程序的不同用户之间共享对象的正确方法

> ID：15002310
> 
> 赞同：3
> 
> 时间：2013-02-21T12:30:04.650
> 
> 标签：java, web-applications, data-sharing

我需要维护 Web 应用程序中的对象列表。Web 应用程序的任何用户都可以查看或修改此列表（添加或删除项目）。许多用户几乎同时访问（修改）列表。这是共享列表的正确方法。我可以想到2种方法。

1.  静态变量
2.  Servlet上下文

请让我知道哪个是正确的以及为什么。另外，如果有其他更好的方法，请告诉我。

**编辑**问题是在应用程序的不同用户之间共享对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:46:45.480

数据库如果速度不是最重要的因素。如果您需要速度，一些带有锁定的共享内存解决方案是好的。比如 Hazelcast [http://www.hazelcast.com/](http://www.hazelcast.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:34:56.890

您可以使用数据库、自定义数据源（由 DataSource 接口包装的简单列表）等等，但是...

> Web 应用程序的任何实例

应该是`any user of webapp`吧？

# c++ - 用类表示有根树

> ID：15002311
> 
> 赞同：0
> 
> 时间：2013-02-21T12:30:06.690
> 
> 标签：c++, tree, binary-tree

我很难理解取自[Representing Rooted Trees](http://www.brilliantsheep.com/lecture-notes-trees-and-traversal-uc-berkeley-cs-61b/)的以下段落。它基本上展示了两种表示树的方法。G & T 对我来说有点清楚，但另一个对我来说不是很清楚，它显示了类定义。

*   G&T 选项：每个节点都有 3 个引用：项目、父节点、子节点。子节点的单一引用必须引用一个列表（因此节点可以根据需要拥有尽可能多的子节点）。

*   另一种选择是直接链接兄弟姐妹。例如

    ```
    class SibTreeNode {
     Object item;
     SibTreeNode parent;
     SibTreeNode firstChild; // Left-most child.
     SibTreeNode nextSibling;
    }

    public class SibTree {
      SibTreeNode root;
      int size; // Number of nodes in the tree.
    } 
    ```

视频中的作者还声称（大约 18 分钟）第二种方法需要更少的内存。有人可以帮助我理解类定义以及与第一种方法相比如何需要更少的内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:33:25.147

第二个选项只是一个侵入式单链表。侵入式单链表占用更少的内存，因为您不需要从列表节点指向节点内容的指针。

使用外部列表查看 G&T 选项的布局：

```
class ListNode {
    SibTreeNode* object;
    ListNode* nextElement;
};

class SibTreeNode {
    Object* item;
    SibTreeNode* parent;
    ListNode* childList;
}; 
```

每个 SibTreeNode 元素有 5 个指针，而不是 4 个。

# r - NDVI 差异

> ID：15002318
> 
> 赞同：0
> 
> 时间：2013-02-21T12:30:33.060
> 
> 标签：r, raster

我有两个 ndvi 图像，其最小值/最大值为 -1 到 1....我想从第一个图像中减去第二个图像，反之亦然，但是当我这样做时，它给了我值为 0 的光栅...我认为它应该是这样的，因为我们从另一个中减去一个波段或从另一个图像中减去一个图像......请帮助我哪里出错......这是我用来查看变化的代码...... .

```
 b3<-raster(stackIm1,3) #band 3 of first input image
    b4<-raster(stackIm1,4) #band 4 of first input image
    ndvi1<-(b4-b3)/(b4+b3) #calculating NDVI for first image

    b3<-raster(stackIm2,3) #band 3 of second image
    b4<-raster(stackIm2,4) #band 4 of second image
    ndvi2<-(b4-b3)/(b4+b3) #calculating NDVI for second image

    ndvi <- ndvi1-ndvi2  #subtracting second ndvi image from first 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:45:55.573

这是制作可重现示例的方法：

生成一些数据

```
library(raster)
r <- raster(nc=10, nr=10)
set.seed(2212013)
stackIm1 <- stack(lapply(1:5, function(x) setValues(r, round(runif(ncell(r))* 255))))
stackIm2 <- stack(lapply(1:5, function(x) setValues(r, round(runif(ncell(r))* 255)))) 
```

然后用它来说明问题

```
b3<-raster(stackIm1,3) #band 3 of first input image
b4<-raster(stackIm1,4) #band 4 of first input image
ndvi1<-(b4-b3)/(b4+b3) #calculating NDVI for first image

b3<-raster(stackIm2,3) #band 3 of second image
b4<-raster(stackIm2,4) #band 4 of second image
ndvi2<-(b4-b3)/(b4+b3) #calculating NDVI for second image

ndvi <- ndvi1-ndvi2  #subtracting second ndvi image from first 
```

但我在这里没有看到问题。

```
> ndvi
class       : RasterLayer 
dimensions  : 10, 10, 100  (nrow, ncol, ncell)
resolution  : 36, 18  (x, y)
extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 
data source : in memory
names       : layer 
values      : -1.461194, 1.590255  (min, max)

> 
```

# wpf - 如何确定 WPF 文本框是否脏（使用 UpdateSourceTrigger=LostFocus 时）

> ID：15002321
> 
> 赞同：1
> 
> 时间：2013-02-21T12:30:39.373
> 
> 标签：wpf

在绑定更新源之前，如何确定用户何时更新了文本框中的文本？

我期待在 TextBox 或 Binding 上找到“IsDirty”属性...

我的问题是“取消”按钮 Enabled 属性绑定到 ViewModel 的 IsDirty 属性并且在焦点移出文本框之前被禁用。

"IsDirty" 需要定义为 ViewModel.IsDirty || 文本框.IsDirty

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T15:57:45.420

WPF 无法支持用户在高质量应用程序中所期望的典型 IsDirty 行为。

问题源于Binder类的奇怪设计。

此外，WPF 架构对于使用默认的 Binder 实现是一种硬编码，替换它是一项艰巨的工作，并且需要许多“肮脏的技巧”来解决无休止的 WPF 设计缺陷。

我发现解决此限制的最简单方法是将所有值转换逻辑移动到视图模型并使用 UpdateSourceTrigger=PropertyChanged，并实现您自己的 IsDirty 和 IsInvalid 逻辑和标志。

这种方法也与 Caliburn.Micro 配合得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:36:33.480

首先，为什么*取消取消*？它应该一直启用。任何其他行为都会很奇怪。用户应该可以取消，尽管他没有做任何事情。

其次，我会使用`Commands`它，以便它可以根据视图模型的状态确定它是否可以执行。应该很容易实现，如果viewmodel也提供命令的实现。
我建议阅读一些关于它的文章和/或教程。谷歌的界面`ICommand`。

**并回答你的问题。**假设您正在使用绑定，您可以使用`INotifyPropertyChanging`接口来确定值何时将更改。然后，您可以将当前值存储在备份字段或其他内容中。

**编辑 - 关于“让他丢失数据”**

当然这是一个有效的策略。考虑一个*更大的*输入对话框，例如 5 个输入控件，在持久化输入之前必须对其进行验证。根据您的论点，我假设数据非常重要。此外，您开始将数据入侵到对话框中。在输入控件 3 上，您决定按“ALT + F4”。

首先，问问自己，用户为什么要按键？恕我直言，他不关心他的数据发生了什么。如果“ALT + F4”只是稳健的一个例子。忘掉它。我认为如果不非常昂贵，就无法实现绝对的鲁棒性。

其次，关于应用程序重新启动后的一致性和有效性，您必须将数据丢弃，以免您以未定义的状态开始。请记住，用户开始填写的实体在此状态下无效。状态和属性的值都不是。

所以恕我直言，更好的策略是以干净和定义的状态重新启动，以便用户能够继续执行您希望他对您的应用程序执行的任何操作。
为什么这个策略更好？好吧，实现起来要容易得多。更重要的论点是，用户永远不会因为奇怪的状态而迷路。

# lua - Upvalue 一个 nil 值错误

> ID：15002325
> 
> 赞同：0
> 
> 时间：2013-02-21T12:30:55.467
> 
> 标签：lua, coronasdk

我正在尝试通过以下方式降低`star1.movementSpeed = 10000;`价值：

```
local function star1incr()
    star1.movementSpeed = star1.movementSpeed - 1
    print( "- 1" )
end

timer.performWithDelay(10000, star1incr, 0) 
```

但我收到此错误：`\main.lua:18: attempt to index global 'star1' (a nil value)`

完整代码

```
-- requires 
display.setStatusBar( display.HiddenStatusBar ) 
_W = display.contentWidth; --Returns Screen Width
_H = display.contentHeight; --Returns Screen Height
local starTable = {} -- Set up star table
local physics = require "physics"
physics.start()

function initStar()
    local star1 = {}
    star1.imgpath = "Star1.png"; --Set Image Path for Star
    star1.movementSpeed = 10000; --Determines the movement speed of star
    table.insert(starTable, star1); --Insert Star into starTable
end --END initStar()    

local function star1incr()
    star1.movementSpeed = star1.movementSpeed - 1
    print( "- 1" )
end

timer.performWithDelay(10000, star1incr, 0)

function getRandomStar()
    local temp = starTable[math.random(1, #starTable)] -- Get a random star from starTable
    local randomStar = display.newImage(temp.imgpath) -- Set image path for object

    if ( temp.imgpath == "Cloud4.png" ) then
    physics.addBody( randomStar, "static", { density=.1, bounce=.1, friction=.2, radius=45 } )
    end

    randomStar.myName = "star" -- Set the name of the object to star
    randomStar.movementSpeed = temp.movementSpeed; -- Set how fast the object will move
    randomStar.x = math.random(10, _W);
    randomStar.y = -35;
    randomStar.rotation = math.random(0,20) -- Rotate the object
    starMove = transition.to(randomStar, {
        time=randomStar.movementSpeed, 
        y=500,
        onComplete = function(self) self.parent:remove(self); self = nil; end
        }) -- Move the star
end--END getRandomStar()

function startGame()
        starTimer1 = timer.performWithDelay(1000,getRandomStar, 0)
end--END startGame()

initStar()
startGame() 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:18:59.197

您将star1 声明为本地，然后在函数结束后将其放入可启动表中，star1 不再存在。

所以你需要使用starTable[1] 而不是star1 作为第一颗星或者传入星号作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:44:26.753

是的，这有效：D

```
 local function star1incr()
        starTable[1].movementSpeed = starTable[1].movementSpeed - 1
        print( "- 1" )
    end 
```

# java - 在单独的线程中将对象返回到池中

> ID：15002329
> 
> 赞同：2
> 
> 时间：2013-02-21T12:31:04.073
> 
> 标签：java, multithreading

有一个循环轮询从 GenericObjectPool 借用对象。池本身的大小为 1。代码如下 -

```
final CompletionService completionService = new ExecutorCompletionService(getExecutorServices());               
int counter = 0;

    for (Iterator iter = AList.iterator(); iter.hasNext();) {

                borrowed = this.getPool().borrowObject();

                if (borrowed == null) {
                    throw new Exception("not set");
                } else {        
                    completionService.submit(borrowed,borrowed);
                    counter ++;
                }   
    } 
```

由于池的大小为 1，在第一次借用后，它被耗尽并阻塞。要将对象返回到池中，我想运行一个单独的线程，如下所示 -

```
new Runnable() {

    public void run() {
        for (int i = 0; i < counter; i++) {

            borrowed = completionService.take().get();
            status = borrowed.getStatus();

            getPool().returnObject(borrowed);
                        counter --;

            if (status = 1) {
                getExecutorServices().shutdownNow();
                return;
            }
        }
    }

}; 
```

这是对 CompletionService 的阻塞调用，用于在每个线程完成时执行操作并释放它以使其可用于借用。

但是这种设计有一些缺点，比如无法从 Runnable 中读取父级的计数器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:17:44.030

我创建了一个 CallableDecorator 以从 Runnable 返回值以监视 Thread 并修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:36:56.193

计数器不是线程安全的。使用 AtomicInteger 并使其可用于可运行代码块和第一个代码块。

# .net - 如何在 Powershell 中将流保存到磁盘？

> ID：15002337
> 
> 赞同：1
> 
> 时间：2013-02-21T12:31:34.037
> 
> 标签：.net, powershell

如何在 Powershell 中将流保存到磁盘？任何例子表示赞赏。

（有关信息，流是 WCF Web 服务调用的返回值）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:28:21.007

通常，谷歌如何使用 C# 来做这件事是很有用的。恕我直言，从 C# 到 Powershell 的转换比从 VB.Net 更容易，因为 PowerShell 的语法有点相似。从任何 C# 示例中，可以轻松找出使用了哪些 .Net 类以及如何使用。有了这些知识，将这些技术转化为 Powershell 非常简单。

首先，将数据获取到变量中。创建一个指向文件的 FileStream。创建一个使用文件流并将数据写入其中的 StreamWriter。像这样，

```
$webPage = [Net.WebClient]::DownloadString("http://www.google.com") # Sample data
$fs = new-object IO.FileStream("c:\temp\out.txt", [IO.FileMode]::Append) # New FileStream to some file
$sw = new-object IO.StreamWriter $fs # A streamwriter will write to the file via filestream above
$sw.WriteLine($webPage) # Write stuff to the file via streamwriter
$sw.Close() # Close writer
$fs.Close() # Close stream 
```

# c# - 查找与搁置集不同的所有文件？

> ID：15002338
> 
> 赞同：2
> 
> 时间：2013-02-21T12:31:37.503
> 
> 标签：c#, visual-studio-2010, visual-studio, tfs, shelve

我有一个相当大的解决方案的搁置，其中一个元素正在工作。在我的工作区版本中，它不是 - 但是，其他元素在我的工作区版本中工作，而在搁置集中不起作用。因此，合并两个版本会很麻烦而且很耗时。

有没有一种简单的方法可以将搁置集与我的工作区解决方案进行比较，返回所有彼此不同的文件？我知道可以进行一一比较，但是我不确定错误出现在哪里，并且发现这将涉及比较大量文件，其中大多数文件完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:30:53.033

TFS 电动工具（[TFS 电动工具](http://www.microsoft.com/en-us/download/details.aspx?id=35775)- 请注意，旧版本的 TFS 在该页面上的不同链接中）有一个取消搁置命令 ( `tfpt unshelve`)，它允许您执行您正在寻找的操作。如果无法自动合并，这将调出合并工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:11:32.920

创建搁置集时，TFS 会存储文件的哈希值。有两个值，HashValue 是服务器上原始项目的值，UploadHashValue 是搁置集中项目的实际值。

然后，您应该能够创建一个新的搁置集并将其与旧搁置集进行比较：

```
var shelvesetOld = vcs.QueryShelvesets("shelveset_old", null).FirstOrDefault();
var shelvesetOldChanges = vcs.QueryShelvedChanges(shelvesetOld)[0].PendingChanges;

var shelvesetNew = vcs.QueryShelvesets("shelveset_new", null).FirstOrDefault();
var shelvesetNewChanges = vcs.QueryShelvedChanges(shelvesetNew)[0].PendingChanges;

var differences = new List<PendingChange>();
foreach (var oldChange in shelvesetOldChanges) {
    var shelvesetNewChange = shelvesetNewChanges.FirstOrDefault(shelvesetChangeSearch => shelvesetChangeSearch.ServerItem.Equals(oldChange.ServerItem));
    if (shelvesetNewChange == null) {
        differences.Add(oldChange);
        continue;
    }

    if (!shelvesetNewChange.UploadHashValue.SequenceEqual(oldChange.UploadHashValue)) {
        differences.Add(oldChange);
    }
} 
```

# android - android ViewPager - 检测页面滚动状态

> ID：15002339
> 
> 赞同：4
> 
> 时间：2013-02-21T12:31:38.523
> 
> 标签：android, android-viewpager

我有`ViewPager`一个听众：

```
viewpager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

        @Override
        public void onPageSelected(int arg0) {

        }

        @Override
        public void onPageScrolled(int position, float positionOffset,
                int positionOffsetPixels) {
            if (position == 0) {
                tv.setText("first Item");
            } else
                tv.setText(titleStringArray[position]);

        }

        @Override
        public void onPageScrollStateChanged(int arg0) {

        }
    }); 
```

我需要的是： tv 是 tv`TextView`之上的`ViewPager`，目前文本会在用户移动页面后立即更改（即使注册的移动很少）。仅当页面向左或向右移动 50% 或以上时，我才想更改文本。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-08T13:07:19.870

我解决如下，

初始化变量。

```
static int mPageLastScreen=0; 
```

然后在 onPageScrolled 方法中添加 if 语句。

```
viewPager.setOnPageChangeListener(new OnPageChangeListener() 
                    {
                        public void onPageScrollStateChanged(int state) 
                        {}
                    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) 
                    {
                        if(mPageLastScreen!=position)
                        {
                            Log.d("page scrolled", "Page scrolled");
                            mPageLastScreen=position;
                        }
                     }

                    public void onPageSelected(int position) 
                    {}
                }); 
```

我知道这是迟到的答复。希望它可以帮助某人:)

# c++ - 使用opencv在视频上叠加图像

> ID：15002344
> 
> 赞同：0
> 
> 时间：2013-02-21T12:31:49.080
> 
> 标签：c++, opencv, image-processing

我使用此功能使用 OpenCV 放置叠加图像。

```
void OverlayImage(IplImage* src, IplImage* overlay, CvPoint location, CvScalar S, CvScalar D) {
for (int i = location.y; i < (location.y + overlay->height); i++) {
    for (int j = location.x; j < (location.x + overlay->width); j++) {
        CvScalar source = cvGet2D(src, i, j);
        CvScalar over   = cvGet2D(overlay, i-location.y, j-location.x);
        CvScalar merged;

        for(int i = 0; i < 4; i++)
            merged.val[i] = (S.val[i] * source.val[i] + D.val[i] * over.val[i]);

        cvSet2D(src, i + location.y, j + location.x, merged);
    }
}
} 
```

然后使用这样的功能-

```
OverlayImage(temp, tempad, cvPoint(10, 10), cvScalar(0,0,0,0), cvScalar(1,1,1,1)); 
```

用于隐藏叠加图像，例如 ![图像1](../Images/61c16a6366ba5920987feb2decc3826d.png)

```
OverlayImage(temp, tempad, cvPoint(10, 10), cvScalar(1,1,1,1), cvScalar(0,0,0,0)); 
```

用于显示 ![图2](../Images/d1bd394e47c5d5d85a0ce28a1c30c0e2.png)

我使用这些功能的方式是：

```
if (frame_number < 400)
    OverlayImage(temp, tempad, cvPoint(10, 10), cvScalar(1,1,1,1), cvScalar(0,0,0,0));
else 
    OverlayImage(temp, tempad, cvPoint(10, 10), cvScalar(0,0,0,0), cvScalar(1,1,1,1)); 
```

但是第一张图像有一些失真区域，我希望在视频 400 帧后使该图像消失。我怎样才能使那个区域清晰？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:35:03.673

好吧，您可以**制作没有覆盖的图像副本**，然后当您不想显示覆盖的图像时，您可以**显示副本**。

# java - 如何在 drools 规则的“何时”部分调用 Java 函数？

> ID：15002363
> 
> 赞同：2
> 
> 时间：2013-02-21T12:32:47.030
> 
> 标签：java, drools, rule

我一直在寻找一段时间，但我无法在任何地方找到我的问题的确切答案，或者如果我找到类似的东西，它就不起作用。

我想在规则的 when 部分调用一个简单的 java 方法。

我的代码如下所示：

```
rule "Ret Rule"
when 
    Map(this["LOYAL"] == "true")
    Map(this["LOYALTYPROMORETENTION"] == "true")
    PromotionValidityPeriod(promotionName == "VIVACLUB Loyalty Promo 2013 25 percent")
    $customer: Customer( segment == "Residential" , $assets : assets )
    $o: Order( ( (DPOrderType == 17 && retentionReason == "RET") || (DPOrderType == 2 && reason == "557") ) , $ct: contractTerms == 24, $olis: orderLineItems )
    $tariff: OrderLI( part in ("DT2319", "DT2320"), actionCode not in ("Delete", "INVALID"), $parentId : parentId) from $olis
    OrderLI( part == "DT2316", nodeId == $parentId, actionCode not in ("Delete", "INVALID"), $assetId : assetId ) from $olis
    /*Asset( assetId == $assetId,
        ( (contractTerms != null && contractEndDate != null && eval(CalculationsHelper.getFullMonthDifference(new Date(), contractEndDate) < 3 ))
            || (contractTerms == null) ) ) from $assets*/
    $li : OrderLI( $newTariff : part in ("DT2319", "DT2320"), parentId == $parentnodeid, actionCode == "Add")  from $olis 
    $del : OrderLI( $oldTariff : part, parentId == $parentnodeid, actionCode == "Delete", productType == "Calling Plan")  from $olis
    eval(OrderDwrController.setTransitionCondition(fromTariff == $oldTariff, toTariff == $newTariff) == true
then
    Offer of = new Offer("DT2331", $parentId, 7);
    System.out.println($tariffOld);
    of.getOrderLineItemAttributes().add(new OrderLIAttribute("DURATION", "" + $ct));
    of.getOrderLineItemAttributes().add(new OrderLIAttribute("Discount of MRC", "25%"));
    of.getOrderLineItemAttributes().add(new OrderLIAttribute("VIVACOM TV Package", $tariff.getProductNameENU()));
    of.setProductNameENU("VIVACLUB Loyalty Promo 2013 25 percent");
    $o.addOffer(of);
    of.setLoyaltyPromo(true);
    $o.addTextForOffer(of, new Integer[]{173});
end 
```

我遇到问题的特定行是该`when`部分的最后一行：

```
eval(OrderDwrController.setTransitionCondition(
    fromTariff == $oldTariff, toTariff == $newTariff) == true 
```

我只想调用一个简单的函数

```
(OrderDwrController.setTransitionCondition(
    fromTariff == $oldTariff, toTariff == $newTariff)) 
```

就像我上面的那个

```
(eval(CalculationsHelper.getFullMonthDifference(
    new Date(), contractEndDate) < 3 )) 
```

该函数是静态的，返回一个布尔值。我已经在文件的开头导入了这个类。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:08:37.233

首先，您没有关闭 eval()。

第二，如果你升级你的流口水，你可以在 then 部分编写 java 表达式，它会比 eval() 更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:23:27.883

很抱歉发布答案而不仅仅是回复您（还没有足够的声誉:)）

无论您放在 eval 中的什么，都必须评估为布尔值。我不确定你的是否。这可能是问题所在。

希望有帮助

干杯，

阿维纳什

# c# - 不调用 GC.Collect() 时的内存泄漏

> ID：15002365
> 
> 赞同：3
> 
> 时间：2013-02-21T12:32:55.007
> 
> 标签：c#, garbage-collection

我们刚刚在我们的应用程序中堵塞了一个漏洞，其中终结器队列增长到了惊人的比例。修复的一部分是显式调用 GC.Collect()。在我看来，这似乎是不必要的草率，但它确实有效。

对终结器队列不是特别熟悉，我有点困惑。这是由终结器花费太长时间引起的吗？常规 GC 收集是否不运行终结器 - 也许它仅限于一定的持续时间？

tl; dr：如果我没有明确调用 GC.Collect()，则不会运行终结器。我想让它消失。做什么？

# signalr - 从不同的 Azure 角色通过横向扩展直接发送信号器消息

> ID：15002373
> 
> 赞同：4
> 
> 时间：2013-02-21T12:33:25.603
> 
> 标签：signalr, azureservicebus

我的 Azure 云服务应用程序中有 2 个角色：一个 Web 角色（此处为信号连接）和一个辅助角色。

Web 角色使用 Azure 服务总线作为其横向扩展提供程序。

在某些时间点，工作者角色将发出某些事件。我想将此数据直接发送到连接到集线器的客户端。

我当前的实现涉及工作角色将消息放置在 Web 角色订阅的服务总线队列上，然后 Web 角色通过 HubContext 调用将此消息转发给客户端。

我的问题是：如何从工作角色直接将此消息发送给连接的客户端？到目前为止，我已经考虑了 3 种方法：

*   将信号器配置为 Web 角色，以便它们使用相同的服务总线主题。- 这没有按预期工作，因为工作者角色实例从为 Web 角色准备的主题订阅中“窃取消息”。这似乎是最干净的方法，但配置是一个问题。

*   使用 .Net 客户端发送集线器消息 - 这并不理想，因为它给 Web 角色带来了不必要的负载，并且与上述方法相比，服务总线消息量增加了一倍。

*   手动向主题写入与信号器兼容的消息 - 非常hacky并且易于破坏性更改。

我知道团队目前正在为下一个版本重写横向扩展，但这在某个时候可能吗？

编辑：我注意到[RabbitMq implementation](https://github.com/mdevilliers/SignalR.RabbitMq)支持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:44:14.630

我的配置似乎有问题导致第一种方法不起作用。但是，即使在循环中少一条消息，该方法似乎端到端更慢（大约 150 毫秒）。

在进行任何更改之前，我将拭目以待，看看扩展工作是否会对这种方法带来任何改进。

# c# - 烤面包机弹出窗口只显示一次

> ID：15002375
> 
> 赞同：0
> 
> 时间：2013-02-21T12:33:30.207
> 
> 标签：c#, wpf, popup

我有以下 XAML 用于“烤面包机”弹出窗口：

```
<Popup x:Name="popupMessage"
           Width="500"
           Height="100"
           IsOpen="False"
           Placement="Top"
           PlacementTarget="{Binding ElementName=statusBarMain}"
           StaysOpen="True">

        <Popup.Style>
            <Style>
                <Style.Triggers>
                    <Trigger Property="Popup.IsOpen" Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="1" />
                                    </DoubleAnimationUsingKeyFrames>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:2" Value="1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:4" Value="0" />
                                    </DoubleAnimationUsingKeyFrames>
                                    <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="IsOpen">
                                        <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                                        <DiscreteBooleanKeyFrame KeyTime="0:0:4" Value="False" />
                                    </BooleanAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Popup.Style>
        <Popup.RenderTransform>
            <ScaleTransform ScaleY="1" />
        </Popup.RenderTransform>

        <Border Width="504"
                Height="104"
                BorderBrush="#FF0F3D5C"
                BorderThickness="2">
            <Border Width="500"
                    Height="100"
                    BorderBrush="White"
                    BorderThickness="2">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                        <GradientStop Offset="0" Color="#FFD3CCF5" />
                        <GradientStop Offset="1" Color="#FF0F3D5C" />
                    </LinearGradientBrush>
                </Border.Background>

                <TextBlock x:Name="textBlockMessage"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           FontSize="18"
                           Foreground="White"
                           Text="{Binding NotificationMessage}" />

            </Border>
        </Border>
    </Popup> 
```

这个弹出窗口的问题是它似乎只工作一次。我设置`popupMessage.IsOpen = true`了，这显示了一次弹出窗口。所有后续调用都不会让弹出窗口出现。我检查并`IsOpen`在动画结束时该属性确实设置为 false。

显然我在这里遗漏了一些东西，但是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T08:06:16.623

您需要在触发器的 ExitActions 中停止情节提要。

试试这个：

```
<Trigger Property="Popup.IsOpen" Value="True">
   <Trigger.EnterActions>
      <BeginStoryboard Name="OpenStoryboard">
          <Storyboard>
              <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                  <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0" />
                  <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="1" />
              </DoubleAnimationUsingKeyFrames>
              <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)">
                  <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0" />
                  <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="1" />
                  <SplineDoubleKeyFrame KeyTime="0:0:2" Value="1" />
                  <SplineDoubleKeyFrame KeyTime="0:0:4" Value="0" />
              </DoubleAnimationUsingKeyFrames>
              <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="IsOpen">
                  <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                  <DiscreteBooleanKeyFrame KeyTime="0:0:4" Value="False" />
              </BooleanAnimationUsingKeyFrames>
          </Storyboard>
      </BeginStoryboard>
   </Trigger.EnterActions>
   <Trigger.ExitActions>
      <StopStoryboard BeginStoryboardName="OpenStoryboard"/>
   </Trigger.ExitActions>
</Trigger> 
```

在使用动画更改控件的背景颜色时，我遇到了类似的问题，它也只能工作一次。

# php - 空变量的foreach问题

> ID：15002383
> 
> 赞同：0
> 
> 时间：2013-02-21T12:33:59.250
> 
> 标签：php

我想回顾一下我原来的问题：[使用 PHP foreach 代码填充日历](https://stackoverflow.com/questions/14798794/populating-a-calendar-with-php-foreach-code)

在本地主机服务器上工作时，脚本可以工作，但是在线上传时，日历没有出现，Chrome 给我以下错误：

```
<b>Warning</b>:  array_values() [<a href='function.array-values'>function.array-values</a>]: The argument should be an array in <b>/home/flyeurov/public_html/lib/skins/flyeuro/events/events_index.tpl</b> on line <b>30</b>
<b>Warning</b>:  array_merge() [<a href='function.array-merge'>function.array-merge</a>]: Argument #2 is not an array in <b>/home/flyeurov/public_html/lib/skins/flyeuro/events/events_index.tpl</b> on line <b>30</b>
<b>Warning</b>:  Invalid argument supplied for foreach() in <b>/home/flyeurov/public_html/lib/skins/flyeuro/events/events_index.tpl</b> on line <b>30</b><br /> 
```

我发现当我过去没有发生任何事件 =`$history`因此是空的，或者为未来计划的事件= 空时，就会发生这种情况`$events`。

```
foreach(array_merge(array_values($history), array_values($events)) as $event) 
```

但是我的系统有时注定没有计划任何事件，因此是空`$event`的，所以我的问题是，我怎样才能绕过 foreach 以使用一个或另一个空变量来显示日历？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:35:28.920

```
if(!empty($history) || !empty($events)){
   foreach(array_merge(array_values($history), array_values($events)) as $event){...}
} 
```

在您的情况下，这将是一个更好的解决方案（删除了 if 条件）：

```
$history = (!empty($history))?$history:array();
$events = (!empty($events))?$events:array();
foreach(array_merge(array_values($history), array_values($events)) as $event){...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:35:56.567

if (!empty($array)) { ... }

这将在 foreach 之前进行检查。

# kml - Google 地球 API：监听 TourPlayer 事件

> ID：15002390
> 
> 赞同：1
> 
> 时间：2013-02-21T12:34:21.903
> 
> 标签：kml, google-earth-plugin

我可以将事件附加到巡回赛中，例如开始播放或停止播放吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:45:43.650

不，[GETourPlayer](https://developers.google.com/earth/documentation/reference/interface_g_e_tour_player)不公开任何事件。

也就是说，您已经通过`play()`方法告诉它开始播放，所以您必须已经知道巡回赛何时开始......

此外，您可以结合使用`getDuration()`和`getCurrentTime()`方法来计算游览结束的时间。

# ios - 向 UITableView 添加按钮

> ID：15002393
> 
> 赞同：0
> 
> 时间：2013-02-21T12:34:27.117
> 
> 标签：ios, ios5, uitableview, iboutlet

我已经设置了一个当前有一个部分、标题和两个单元格的表格视图。对于用户名和密码，如下图所示。

我想在表格视图中添加一个按钮（IBOutlet），以及该按钮下方的标签/链接。由于我目前没有使用界面生成器，因此以编程方式处理此问题的正确方法是什么。

按钮应该是新的单元格和部分吗？按钮是否应该是标题视图，如果是这样，我该如何控制仅此标题视图的高度？

![登录表](../Images/c30fecf2f98cbd14e7478ca3a53ef510.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:06:02.950

你可以在你的牢房里试试这个

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

其中索引 path.row == 3

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(cell.contentView.frame.size.width/2,10,100,20);
    [btn setTitle:@"Login" forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(btnPressed:) forControlEvents:UIControlEventTouchUpInside];
    [cell.contentView addSubview:btn]; 
```

抱歉命名约定

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:19:50.727

我建议在您的表格中添加另一行。如果您添加只有一行的第二部分，则分组的 tableview 样式将使它看起来像一个简单的按钮。如果您需要更复杂的样式，您当然可以创建一个带有一个或多个 UIImageView(s) 的自定义 UITableViewCell。

关于实际的触摸事件，我会坚持使用 tableView:didSelectRowAtIndexPath: 委托方法。

如果整个 UITableViewCell 只有一个触摸事件，则实际上不需要添加 UIButton。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:50:32.637

我建议使用简单的文本字段而不是表格视图。但是，如果您想要表格视图方法，您应该使用另一个部分，并使该按钮成为表格单元格。

# php - fsgetcsv 无法解析字段中带有单引号的文件

> ID：15002394
> 
> 赞同：0
> 
> 时间：2013-02-21T12:34:39.420
> 
> 标签：php, sql, parsing

我在使用 fsgetcsv 将文本文件导入数据库时​​遇到问题，问题源于某些字段包含名称中带有单引号字符的名称（爱尔兰数据库），字段由 ^ 字符转义，该位是工作正常，但它基本上告诉我，当它到达带有 ' 字符的字段时，我的 SQL 语法有错误。

无论如何我可以解决这个问题吗？我尝试了各种转义字符组合，但无济于事。

使用 PhpMyAdmin 中的工具导入文件可以工作，并且使用以下术语不会导致任何问题：

字段终止字符：^ 字段封闭字符：“字段转义字符：\ 行终止于：自动

这是违规行的示例：

```
4^01^Patrick O'Brien^account Number^7Address^client contact^sales contact^Validity Check on appointment and report to Receiver^21/01/13^^^^^^^^^^^02 
```

这是 fsgetcsv 语句

```
while (($data = fgetcsv($handle, 1000, "^" )) !== FALSE) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:47:52.367

当您构建 SQL 语句以将行插入数据库时​​，请确保 fsgetcsv 函数返回的值已正确转义。您可以通过使用 SQL 参数（请参阅[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)）或使用您正在使用的数据库的内置函数进行转义（请参阅[http://www.php.net/manual/en/ mysqli.real-escape-string.php](http://www.php.net/manual/en/mysqli.real-escape-string.php)）。

# selenium - 浏览器仿真 - 我需要哪种 Selenium？

> ID：15002396
> 
> 赞同：1
> 
> 时间：2013-02-21T12:34:42.477
> 
> 标签：selenium

我正在努力`RemoteWebDriver`工作。

我想知道我是否需要`Selenium RC`，所以我安装了它，`Nuget`并注意到`DefaultSelenium`它将浏览器的路径作为参数。

我对所有可用的不同库感到有点不知所措`Selenium`- 但我想要的是能够在许多浏览器（android / chrome / firefox等）上运行，而这些浏览器不一定存在于`Selenium`正在运行的机器上.

那可能吗？如果是这样，`Selenium`我需要哪些库（我正在使用`VS2012`and `C#`）来实现这一点？

我试图通过具有一系列不同 DesiredCapabilites 的 RemoteWebDriver 来实现这一点，而不是使用 ChromeDriver、FirefoxDriver 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:15:46.910

你应该，特别是考虑到这是一个新项目，100% 绝对积极地使用 WebDriver API。所以你只需要 WebDriver NuGet 包：

[http://www.nuget.org/packages/Selenium.WebDriver/](http://www.nuget.org/packages/Selenium.WebDriver/)

如果您打算针对 IE 进行测试，您也将需要 IEDriver 包，对于 Chrome/Safari 等也是如此。

我这样说是因为 WebDriver 正在不断地被开发、维护和改进。它有一个更*干净*、更好的 API，从长远来看会更稳定。

RC 已弃用。尽管我相信开发人员仍打算修复任何*错误*，但不会发生新功能和改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:42:31.947

试试这个有一些很好的答案：[从 C# NUnit 一个接一个地在多个浏览器中运行 Selenium 测试](https://stackoverflow.com/questions/5028926/run-selenium-tests-in-multiple-browsers-one-after-another-from-c-sharp-nunit)。我个人使用 IWebDriver 和 Selenium RC 并像这样测试它。因为我有很多测试，在每个浏览器中进行测试对我来说意义重大。

# c# - InsertAt() 方法不更新 SQL 表

> ID：15002397
> 
> 赞同：1
> 
> 时间：2013-02-21T12:34:44.040
> 
> 标签：c#, .net, dataset

我使用这条线：

```
DataSet.SomeTableName.Rows.InsertAt(someRow, 0); 
```

在这一行之后，我更新了我的 SQL 表。但插入的行不会出现在 SQL Server 端。

知道为什么插入的行没有出现在 SQL 服务器端吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:53:44.523

发出`SetAdded`方法：

```
someRow.AcceptChanges();
someRow.SetAdded(); 
```

据我所知`InsertAt`，实际上并没有执行`RowState`修改。

# .net - HttpWebRequest.GetResponse 挂起没有内容的响应

> ID：15002399
> 
> 赞同：0
> 
> 时间：2013-02-21T12:34:44.873
> 
> 标签：.net, http, httpwebresponse

我编写了一个小型“网络服务器”，它可以重放对所有内容的预先制作的响应。在这种情况下：

```
HTTP/1.1 404 Not Found\r\n
\r\n 
```

以下客户端代码挂起，直到 TCP 超时开始：

```
using (WebResponse response = WebRequest.Create(url).GetResponse()) { } 
```

我监视了与 Wireshark 的对话，所有数据都被正确发送和接收。`GetResponse`在收到上面引用的响应后继续等待。但它不应该——它是一个有效的 HTTP 响应，对吧？怎么了？

当我向响应中添加任何内容时，一切都按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:47:14.167

我怀疑客户端因缺少`Content-Length`标头而感到困惑-它不知道可能会收到多少内容，因此它正在等待服务器关闭连接，这*也*没有发生。

尝试添加

```
Content-Length: 0 
```

到响应头。

# google-chrome - 在 chrome 和/或 safari 中启用 XSS

> ID：15002408
> 
> 赞同：2
> 
> 时间：2013-02-21T12:35:05.833
> 
> 标签：google-chrome, xss

我正在使用 cordova 开发一个原生 iOs 应用程序来做原生的东西，所以我可以专注于 html/javascript 和 css。但是，我需要进行跨域 ajax 调用，这在我的本机应用程序中很好，但在我在 Chrome 中运行我的项目时却不行。因此，我想在 Chrome 中禁用此安全功能，以便测试我的应用程序。是否有捷径可寻 ？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-18T06:10:21.747

假设您正在开发一个 iOS 应用程序，我假设您在 OSX 上，在这种情况下，您基本上可以启动启用 XXS 的 Chrome，执行以下命令行：

打开 -a "Google Chrome" --args --disable-web-security

事实上，我经常使用它，我在我的 .bash_profile 中添加了一个别名：

别名 chrometest='open -a "Google Chrome" --args --disable-web-security'

一直到我当前版本的 Chrome：38.0.2125.104，这一直为我工作了很长一段时间

当然，您可以随意命名它……祝您好运！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:48:35.340

您可以 为跨域请求执行**[jsonp 。](http://en.wikipedia.org/wiki/JSONP)**

或者另一个技巧是修改服务器标头以允许跨站点 ajax。

```
Access-Control-Allow-Origin: * 
```

来自[cors](http://enable-cors.org/server.html)

# iphone - 每次都更改默认的 fetchrequest 结果顺序

> ID：15002411
> 
> 赞同：1
> 
> 时间：2013-02-21T12:35:17.490
> 
> 标签：iphone, objective-c, iphonecoredatarecipes

我只是为一个实体做一个执行的FetchRequest，说@“tanId”它包含5条记录1、2、3、4、5

--> 问题是第一次显示为 2,3,4,5,1 --> 如果再次运行它显示为 4,2,1,3,5

超级好

任何人都告诉如何纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:38:50.517

您可以使用 NSSortDescriptor 对您的 NSFetchRequest 进行排序。否则，无法保证订单。Core Data Programming Guide的[Fetching Managed Objects](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html)部分有一些示例。

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
    initWithKey:@"firstName" ascending:YES];
[request setSortDescriptors:@[sortDescriptor]]; 
```

# blackberry - 黑莓代码签名“无法请求签名......”

> ID：15002416
> 
> 赞同：1
> 
> 时间：2013-02-21T12:35:29.767
> 
> 标签：blackberry, blackberry-eclipse-plugin, blackberry-jde

我在另一台机器上完成了一个由其他人创建的项目。

*   我已经填写了[签名密钥表格](https://www.blackberry.com/SignedKeys "形式")并将我的密钥通过电子邮件发送给我。
*   我已经双击每个来安装它们：然后我转到 vmTools 文件夹中的签名工具。选择了我的 .cod 文件（今天构建）。
*   然后，我在状态列中获取旁边带有“未注册”的 cod 文件列表。
*   我点击了请求按钮并收到错误消息。'在此应用程序已向所有签名机构注册之前，无法请求签名。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:50:06.363

听起来签名服务器可能已关闭，您可以在此处查看签名服务器的当前状态：

[isthesigningserverdown.com](http://www.isthesigningserverdown.com)

它始终是对签名进行故障排除的快速简便的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:57:19.503

请参阅[此 blackberry.com 参考资料](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Unable-to-request-signatures-until-this-application-has-been/ta-p/445846)。

为了防止这丢失链接腐烂，我粘贴了下面的重要内容。

**注意**：如果您使用的是 Eclipse 插件，而不是旧的 JDE，那么您将转到**BlackBerry**菜单，选择**Sign**，然后选择**Install New Keys**或**Import Existing Keys**。您必须使用BlackBerry (RIM) 提供的*所有三个文件*。例如，要安装全新的密钥：

> 客户端-RBB-12341231.csi
> 客户端-RCR-12341231.csi
> 客户端-RRT-12341231.csi

或导入现有密钥：

> sigtool.csk
> sigtool.db

* * *

## 问题

在某些情况下，当您尝试使用 SignatureTool 应用程序对应用程序进行签名时，您会收到以下错误：

> 在此应用程序已向所有所需的签名机构注册之前，无法请求签名。

## 原因

您正在尝试为您的应用程序请求代码签名签名，但 SignatureTool 未向所有必需的签名机构注册。

RIM 代码签名框架签名有两种类型：

*   **必需的签名**- 这由与 .cod 文件关联的 .csl 文件指定。在设备上加载您的应用程序需要一个必需的签名。

*   **可选签名**- 这由与 .cod 文件关联的 .cso 文件指定。可选签名表示系统可以对应用程序执行运行时签名检查。如果应用程序未签名，则不允许执行预期的方法。

SignatureTool 会阻止您对应用程序进行签名，因为它会等到所有必需的签名都到位。必需的签名是应用程序在设备上成功加载所必需的。

## 解析度

有几种不同的情况，其中 SignatureTool 未向所需的代码签名服务器注册。

*   **场景 1 - 未在公共签名机构注册**

共有三个公共签名机构（RBB、RRT 和 RCR），它们代表受控应用程序编程接口 (API) 的不同部分。当您收到代码签名密钥时，您会收到代表三个代码签名服务器的三个 .csi 文件。在所有三台服务器上注册很重要。要确定哪些签名密钥已成功安装和/或丢失，请查看本文

*   **场景 2 - 尝试使用受控签名机构**

还有一个额外的公共签名机构，即 Certicom™ Crypto (RCC) 签名机构，用于控制对设备上 Certicom 加密功能的访问。有关在设备上访问 Certicom API 的更多信息，请访问 Certicom。

*   **场景 3 - 尝试使用不可访问的签名权限**

Research In Motion® 维护自己的内部签名权限，以保护未公开的 API 或未公开的数据。无法访问这些签名权限，并且应从您的应用程序中删除对 Research In Motion 内部方法或数据的任何引用，以允许 SignatureTool 对您的应用程序进行签名。

**注意**：JDE 4.1 允许您在首选项下打开代码签名警告。这决定了您的应用程序中尝试使用来自每个签名机构的签名的区域。

* * *

[这是 BlackBerry 网站上更有用的指南](http://us.blackberry.com/content/dam/blackBerry/pdf/academic/BlackBerry%2B-%2BCode%2BSigning%2B-%2BStep%2BBy%2BStep%2BGuide-2.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:24:26.123

RIM 的签名服务器有时会失败。我一次看过它好几个小时。

# android - 如何在屏幕中央的 VideoView 中显示视频？

> ID：15002419
> 
> 赞同：1
> 
> 时间：2013-02-21T12:35:40.670
> 
> 标签：android, android-viewpager, android-videoview, dynamically-generated

我正在`ViewPager`用两个`VideoViews`. 在滑动页面上，当前页面上的视频开始播放。问题一：如何在屏幕中央的 VideoView 中显示视频？

这是我的代码，

## **MainActivity.java：**

```
public class MainActivity extends Activity{

    private class MyViewPagerAdapter extends PagerAdapter implements ViewPager.OnPageChangeListener
    {
         private Vector<View> pages;         
         private ViewGroup myContainer;
         private int currentPageId;
         private boolean flag;

         public MyViewPagerAdapter(Context context, Vector<View> pages) 
         {
             this.pages=pages;
         }

         @Override
         public int getCount() 
         {
             return pages.size();
         }

         @Override
         public Object instantiateItem(ViewGroup container, int position)
         {
             flag = true;
             currentPageId = 0;
             int positionNow = myPager.getCurrentItem();

             View page = pages.get(position);
             container.addView(page);
             myContainer = container;

             if(positionNow == position)
                StartVideo(container, positionNow);

             return page;
         }

         @Override
         public void destroyItem(ViewGroup container, int position, Object object)
         {
             container.removeView((View) object);
             myContainer = container;
         }

         @Override
         public boolean isViewFromObject(View view, Object object)
         {
             return view.equals(object);
         }

        @Override
        public void onPageScrollStateChanged(int arg0) 
        {
            if(flag)
            {
                MyVideoView currVideo = (MyVideoView) myContainer.getChildAt(currentPageId+1);
                if(currVideo != null)
                    if(currVideo.getVideoPath() != null)
                        currVideo.pause();
            }
            else
                flag = !flag;
        }

        @Override
        public void onPageSelected(int arg0) 
        {
            flag = false;
            currentPageId = myPager.getCurrentItem();
            StartVideo(myContainer, myPager.getCurrentItem());
        }

        private void StartVideo(ViewGroup container, int position)
        {
            View page = container.getChildAt(position+1);
            MyVideoView curVideo = (MyVideoView) page;
            Log.d("Andrew", curVideo.getVideoPath());
            curVideo.start();
        }
    }

    private ViewPager myPager;
    private MyViewPagerAdapter myAdapter;
    private Vector<View> pages;
    private MyVideoView myVideoView;
    int currentPage, previousPage;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        pages = new Vector<View>();

        for(int i=1; i <= 2; i++)
        {
            myVideoView = new MyVideoView(this);
            myVideoView.setVideoPath("videoPath");
            pages.add(myVideoView);
        }

        this.myAdapter = new MyViewPagerAdapter(this, pages);
        this.myPager = (ViewPager) this.findViewById(R.id.viewpageronecard);
        this.myPager.setAdapter(myAdapter);

        myPager.setOnPageChangeListener(myAdapter);
        myPager.setOffscreenPageLimit(1);
        myPager.setCurrentItem(0);
    }
} 
```

## **活动主.xml：**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpageronecard"
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="#222222" >

     </android.support.v4.view.ViewPager>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-03T13:07:30.910

虽然这是一个老问题，但也许其他人也在努力解决这个问题，因为我也遇到了同样的问题。我通过改变解决了

```
 android:layout_centerInParent="true"
 android:layout_centerVertical="true"
 android:layout_centerHorizontal="true" 
```

至

```
 android:layout_gravity="center" 
```

在我用来填充 ViewPager 的 VideoView 的 xml 中。

# java - Java Ant - 错误 [main] - 无法实例化名为“DC”的 auxFacto-ry

> ID：15002423
> 
> 赞同：2
> 
> 时间：2013-02-21T12:35:48.760
> 
> 标签：java, ant, jdk1.6, jdk1.5

只是一个简短的：

我有一个使用 Java 1.5.0_11 运行的 Ant-Build 文件的应用程序。我想在 Java 1.6.0_31 上运行该应用程序。

但是，如果我尝试通过 shell 脚本运行我的 App，我会收到以下错误：

```
 [importXML] 2013-02-21 13:25:16,165  INFO [main] - Creating cache manager from config file: /cache.ccf
[importXML] 2013-02-21 13:25:16,181  INFO [main] - thread_pool.default PoolConfiguration = useBoundary = [true] boundarySize = [2000] maximumPoolSize = [150] minimumPoolSize = [4] keepAliveTime = [300000] whenBlockedPolicy = [RUN] startUpSize = [4]
[importXML] 2013-02-21 13:25:16,185  INFO [main] - Setting default auxiliaries to DC
[importXML] 2013-02-21 13:25:16,190  INFO [main] - setting defaultCompositeCacheAttributes to [ useLateral = true, useRemote = true, useDisk = true, maxObjs = 10000, maxSpoolPerRun = -1, diskUsagePattern = 0 ]
[importXML] 2013-02-21 13:25:16,191  INFO [main] - No special ElementAttribute class defined for key [jcs.default.elementattributes], using default class.
[importXML] 2013-02-21 13:25:16,191  INFO [main] - setting defaultElementAttributes to [ IS_LATERAL = true, IS_SPOOL = true, IS_REMOTE = true, IS_ETERNAL = true, MaxLifeSeconds = -1, IdleTime = -1, CreateTime = 1361449516191, LastAccessTime = 1361449516191, getTimeToLiveSeconds() = -1, createTime = 1361449516191 ]
[importXML] 2013-02-21 13:25:16,192  WARN [main] - No such property [maxLifeSeconds] in org.apache.jcs.engine.CompositeCacheAttributes.
[importXML] 2013-02-21 13:25:16,192  INFO [main] - No special ElementAttribute class defined for key [jcs.region.main.elementattributes], using default class.
[importXML] 2013-02-21 13:25:16,215  INFO [main] - initialized LRUMemoryCache for main
[importXML] 2013-02-21 13:25:16,215  INFO [main] - Constructed cache with name [main] and cache attributes [ useLateral = true, useRemote = true, useDisk = true, maxObjs = 10000, maxSpoolPerRun = -1, diskUsagePattern = 0 ]
[importXML] 2013-02-21 13:25:16,216 ERROR [main] - Could not instantiate auxFactory named "DC". 
```

`Java 1.5 and 1.6`是否存在任何可能导致此错误的已知问题和差异。

问候 LStrike

PS：我不允许发布更具体的申请细节，抱歉。

[编辑]

```
 BUILD FAILED
java.lang.NoSuchMethodError: javax.xml.bind.annotation.XmlAccessorType.value()Ljavax/xml/bind/annotation/AccessType; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:46:05.210

你有任何相对/绝对路径使用吗？进口什么？

也许您正在寻找的文件不可访问，或者它不存在？

工厂是改成抽象的还是什么的？是接口吗？

有了更多这样的细节，我们可以为您提供更多帮助。

另外，我如何在这里结束一行？我总是必须按两次“输入”才能换行。

# javascript - == 在 JavaScript 中返回相同条件的变量结果

> ID：15002425
> 
> 赞同：0
> 
> 时间：2013-02-21T12:35:54.170
> 
> 标签：javascript, equality

在 if 条件中更改 temp 变量的序列时会返回变量结果。

```
var temp=1;

var res=(temp++==temp)?"Equal":"Not Equal";
alert(res); //Not Equal

var res=(temp==temp++)?"Equal":"Not Equal";
alert(res); //Equal 
```

JS 小提琴：- [http://jsfiddle.net/adiioo7/e9qLK/](http://jsfiddle.net/adiioo7/e9qLK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:39:33.977

这是因为`++`在变量返回值之后，*然后*递增它。

所以在第一个例子中，`temp++`左边是 1 `temp`，右边是 2。

在第二个例子中，`temp`and`temp++`都是 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:40:34.337

这很简单。

第一个`temp`是递增的，但因为它是一个*后*递增运算符，所以表达式的左侧 (LHS) 仍然计算为其原始值。然后评估右侧（RHS），但`temp`已经增加，因此它具有新值。然后比较 LHS 和 RHS - 它们不再相等。

在第二个示例中，增量发生在评估 RHS 之后，因此 LHS 和 RHS 保持相等。

我不会依赖这种行为。在其他语言 ISTR中，当使用自增运算符时，在表达式中多次引用同一变量是明确*未定义的行为。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:41:07.350

它与操作的顺序有关。以下是比较中发生的情况：

*   评估左侧表达式。
*   评估右侧表达式。
*   看看两者是否相等。

后增量运算符 ( `++`) 返回一个值，然后将变量递增 1。因此，在第一种情况下，第一个 temp 的值为 1，但在计算右侧之前它递增到 2。在第二种情况下，增量发生在已经获得双方的值之后。

请注意，这种行为并非在所有语言中都是正确的——实现方式各不相同。

# extjs - 扩展是否暗示这个类的需求声明？

> ID：15002427
> 
> 赞同：1
> 
> 时间：2013-02-21T12:35:57.087
> 
> 标签：extjs, extjs4.2

如果我从它扩展，我是否需要一个类，或者类管理员是否为我处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:11:47.387

班主任会处理这件事。你不需要这个类。

# c# - 使用 c# XmlDocument 加载多个 xml 文件导致内存泄漏

> ID：15002428
> 
> 赞同：1
> 
> 时间：2013-02-21T12:36:00.210
> 
> 标签：c#, memory-leaks, xmldocument

**我在使用XmlDocument**处理大量 xml 文件时遇到了严重的麻烦。这个想法是从大约 5000 个 .xml 文档（每个大约 20 MB）中提取特定数据，以文本格式保存，然后导入 MySQL DB。这项任务应该每天完成。

我的问题是处理每个xml文件后，系统内存没有释放它。所以，所有的文件都堆积如山，直到所有的 RAM 都被占用并且应用程序开始运行非常缓慢（一旦硬盘驱动器开始帮助系统内存）。

我正在使用已经创建的源代码，因此无法更改为其他类，如 XmlReader 等，所以我坚持使用**XmlDocument**。

xml加载函数调用如下：

```
foreach (string s in xmlFileNames)
            {
                i++;
                if (mytest.LoadXml(s))
                    mytest.loadToExchangeTables();
            } 
```

该函数如下所示：

```
public bool LoadXml(string fileName)
    {

        XmlDocument myXml = new XmlDocument();
        myXml.Load(fileName);
        .............
        //searching for needed data
        .............
    } 
```

任何想法可能是什么问题？为什么垃圾收集没有完成？

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:47:04.740

尝试评论该部分`// searching for needed data`并再次运行测试，这可能是因为您不会释放 IDisposable 的东西（使用`using`或直接），同样适用于`loadToExchangeTables()`.

# html - 更改 div bg 颜色

> ID：15002431
> 
> 赞同：0
> 
> 时间：2013-02-21T12:36:03.597
> 
> 标签：html, css

我创建了一个主 div 并拆分为两个 css 代码

```
#main { background-color:#FFFFFF; width:1000px;}
#left {  width:750px; float:left }
#right {  width:250px; float:right } 
```

但是背景颜色没有改变，当我把它改成

```
#main {  width:1000px;}
#left { background-color:#FFFFFF; width:750px; float:left }
#right { background-color:#000000; width:250px; float:right } 
```

它可以工作，但是当高度变化时看起来很无聊，我想改变整个主 div 的背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:14:09.067

添加以下规则

> #main:after { 内容: " "; 显示：块；溢出：隐藏；明确：两者；高度：0；}

它将清除浮动并使容器与内部最高的柱子一样高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:41:48.667

如果你的主 div 得到一个

```
#main {
    min-height:100px;
    max-height:100px;
} 
```

它需要一个高度来显示背景颜色

如果它不起作用，请显示 html 部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:42:16.257

如果没有 html，这只是一个猜测，但我认为您的问题是 div#main 的高度为 0。发生这种情况是因为内部的浮动 div 不再是文档流的一部分。尝试在主 div 上设置一个高度，这应该可以解决它。

# entity-framework - 如何使用实体框架插入多个值..？

> ID：15002432
> 
> 赞同：0
> 
> 时间：2013-02-21T12:36:04.963
> 
> 标签：entity-framework, mvvm, silverlight-5.0

我将 Silverlight5 与 MVVM 框架和实体框架一起使用。在我的项目中，我有一个疑问..

我有一个名为“客户”的实体，结构如下..

```
Customer ocustomer = new Customer(); 
ocustomer.CustomerName = customername; 
ocustomer.CompanyName = company; 
ocustomer.AddressLine1 = address1; 
ocustomer.AddressLine2 = address2; 
ocustomer.City = city; 
ocustomer.State = state; 
ocustomer.Country = country; 
ocustomer.ZipCode = zipcode; 
ocustomer.Notes = note; 

_context.Customers.Add(ocustomer); 
```

现在我需要将 Customer 值插入到另一个名为 Customer_Entity 的表中

```
 Customer_Entity ocustomerEntity=new Customer_Entity ();
     ocustomerEntity.CustomerID=Customer_ID;
     ocustomerEntity.EntityTypeID =1;
     .
     .
     .
     .
     ocustomerEntity.CreatedTime =System.DateTime.Now;
     ocustomerEntity.CreatedBy=Common.ActiveData.Instance.userid; 
```

在这里，我需要在每一行中将客户值插入 Customer_Entity 。 Customer_Entity 表结构如下，

```
EntityID| CustomerID| EntityValue|
----------------------------------                                                                                                 
1       | 22        |jasper      |                                                                                  
2       | 22        |Company:Raj |
3       | 22        |Address     |

ocustomer.CustomerName=customername
.
.
.
ocustomer.CreatedTime=system.DateTime.Now.. 
```

所以我需要使用唯一的 CustomerID 在每一行中插入所有值。需要帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:40:56.250

在您的`CustomerEntity`对象上，您应该有一个指向相应`Customer`记录的导航属性。同样，我希望您的`Customer`班级也有一个集合`CustomerEntity`。

在这种情况下，您应该实例化`Customer`对象，并填充必要的信息。不过，不要将它添加到 DbSet。然后，创建您需要的所有记录，使用导航属性本身（即*不是*`CustomerEntity`ID 字段）将其连接到对象，并将该记录添加到 Context 类中的相应 DbSet 中。`Customer`*`CustomerEntity`*

 *作为最后一步，将您的`Customer`对象添加到相应的 DbSet，然后运行 ​​SaveChanges。你应该很高兴。实体框架应自动为您生成 ID 并将其填充到 CustomerEntity 记录。*

# c - 异步启动ffmpeg.exe？

> ID：15002435
> 
> 赞同：0
> 
> 时间：2013-02-21T12:36:19.007
> 
> 标签：c, asynchronous, process, ffmpeg

是否可以`FFmpeg`从 C 程序中开始，然后不等到进程终止，而是继续执行下一行代码。目前，我正在使用

```
int startFFmpeg()
{
    char cmd[100] = "D:\\ffmpeg\\bin\\ffmpeg.exe -i D:\\video.mpg -r 10 D:\\frames\\%d.jpg";
    int ff = system(cmd);
    return ff;
}

int main()
{
   int ff = startFFmpeg(); // great! ffmpeg has started, now immediately move to next part of code
   if(ff)
   {
       // execute code in this block simultaneously?
       // i.e. do not wait till ffmpeg closes
   }
   else
   {
      // error handling
   }

  return 0;
} 
```

### 一些元数据

操作系统：**Windows 7**
语言：**C**
IDE：**Dev C++**

## 更新

我尝试使用`CreateProcess()`. 现在的问题是`ffmpeg.exe`任务栏中列出的，但帧没有被提取。

```
char cmd[100] = "D:\\ffmpeg\\bin\\ffmpeg.exe -i D:\\video.mpg -r 10 D:\\frames\\%d.jpg";
PROCESS_INFORMATION pi;
STARTUPINFO si;
CreateProcess(cmd, "", 0, 0, 0, 0, 0, 0, &si, &pi); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:33:50.883

我找到了解决方案。我使用了错误的论点`CreateProcees()`。下面的代码解决了它。

```
CreateProcess(NULL, cmd, NULL, NULL, TRUE, 0, NULL, NULL, &si, &pi); 
```

# google-ads-api - 当用户来自广告时，如何在网站上获取关键字？

> ID：15002437
> 
> 赞同：0
> 
> 时间：2013-02-21T12:36:21.007
> 
> 标签：google-ads-api

当用户来自特定关键字的广告时，我们如何在网站上获取 google adword 关键字。我的意思是如何使用 javascript 或 php 获取此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:55:16.277

好的。我找到了解决方案。我们可以在链接中使用 AdWords 动态参数。很好的解释在这里[http://certifiedknowledge.org/blog/using-adwords-dynamic-parameters-in-links/](http://certifiedknowledge.org/blog/using-adwords-dynamic-parameters-in-links/)

# jsf-2 - Primefaces outputLabel 用于复合组件

> ID：15002441
> 
> 赞同：11
> 
> 时间：2013-02-21T12:36:41.123
> 
> 标签：jsf-2, primefaces, composite-component

与复合组件一起使用`p:outputLabel`时，我遇到了问题。我有带`p:inputText`字段的复合组件（我从组件中删除了不相关的部分）：

```
<cc:interface>
  <cc:editableValueHolder name="myInput" targets="myInput"/>
  <cc:attribute name="required" required="true" type="java.lang.Boolean" default="false"/>
</cc:interface>

<cc:implementation>
  <p:inputText id="myInput" required="#{cc.attrs.required}"/>
</cc:implementation> 
```

现在，我不会将此组件用于`p:outputLabel`：

```
<p:outputLabel for="myComponent:myInput" value="#{resources['myLabel']}:"/>
<my:myComponent id="myComponent" required="#{myBean.required}"/> 
```

一切正常，需要验证，也显示消息，但`*`标签上没有标志，就像我将标签直接连接到`p:inputText`组件时一样。另一方面，如果我`required="true"`对所有内容进行硬编码`p:inputText`都可以正常工作。

我调试`org.primefaces.component.outputlabel.OutputLabelRenderer`并发现该组件被识别为`UIInput`，但`input.isRequired()`返回false。进一步调试发现该`required`属性尚未在组件上定义，因此它返回`false`为默认值 i `UIInput`：

```
(Boolean) getStateHelper().eval(PropertyKeys.required, false); 
```

此外，如果我只是`p:outputLabel`在复合组件内移动，一切正常。就像 EL 稍后在复合组件内部进行评估？

我正在使用 Primefaces 3.5 和 Mojarra 2.1.14

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T14:43:32.403

不幸的是，这是“设计使然”。表达式的评估`#{}`被推迟到访问时间的确切时刻。它们与`${}`JSP 中的“标准”EL 不同，它们*没有*在它们被标记处理程序解析并“缓存”以供将来在同一请求/视图期间访问的确切时刻进行评估。在`<p:outputLabel>`渲染的那一刻，因此需要评估`#{cc.attrs.required}`所引用的 as，在 EL 上下文中没有任何方法。所以它的任何属性都不会评估任何东西。仅当您坐在中时，EL 上下文中才可用，因此它的所有属性都会成功评估。`UIInput#isRequired()``#{cc}``<cc:implementation>``#{cc}`

从技术上讲，这是`<p:outputLabel>`. 标准 JSF 和 EL 即按规定行事。基本上，取决于输入`required`属性的标签星号的表示应该以相反的方式评估：此时`<p:inputText>`要渲染复合材料的内部，或者甚至可能已经在构建复合材料时。因此，标签组件不应该询问输入组件是否需要它，但输入组件应该以某种方式通知标签组件它是必需的。这反过来又难以实施且笨拙（因此效率低下）。

如果将标签移动到复合内部不是一种选择，那么最好的办法是创建一个标签文件，而不是围绕输入组件创建一个复合组件。它只需要一些额外的 XML 样板。

`/WEB-INF/tags/input.xhtml`：

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui"
>
    <c:set var="id" value="#{not empty id ? id : 'myInput'}" />
    <c:set var="required" value="#{not empty required and required}" />

    <p:inputText id="#{id}" required="#{required}"/>
</ui:composition> 
```

`/WEB-INF/my.taglib.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0"
>
    <namespace>http://example.com/my</namespace>

    <tag>
        <tag-name>input</tag-name>
        <source>tags/input.xhtml</source>
    </tag>
</facelet-taglib> 
```

`/WEB-INF/web.xml`：

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/my.taglib.xml</param-value>
</context-param> 
```

用法：

```
<html ... xmlns:my="http://example.com/my">
...
<p:outputLabel for="myInput" value="#{resources['myLabel']}:" />
<my:input id="myInput" required="#{myBean.required}" /> 
```

我刚刚做了一个快速测试，它对我来说很好用。

### 也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)

# php - 在第一行之后停止 MySQL 查询

> ID：15002451
> 
> 赞同：0
> 
> 时间：2013-02-21T12:37:12.087
> 
> 标签：php, mysql, optimization

我有一段 MySQL 代码可以搜索相当长的 mysql 数据库。多次完成时，需要很长时间，尽管我唯一需要从代码中检查是否存在至少一个条目。找到一行后是否可以指示mysql代码停止搜索？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:38:59.913

`LIMIT 1`在查询结束时尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:40:24.477

如果您只想搜索一件事，那么必须有一些与之关联的主键。因此，在查询中，您可以在 where 子句中包含一些内容，该子句只会带来一个结果。像这样的东西

```
 select * from students where id='123' 
```

由于主键是唯一键，因此不会有任何重复，只会进行一次搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:40:42.687

```
SELECT * FROM tablename LIMIT 1 OFFSET 0 
```

*   LIMIT 将设置您想要返回的最大项目
*   OFFSET 让您说明开始查询的起点

结合 LIMIT 和 OFFSET 可以非常精确地控制在多个会话中获取大量数据库行。

或者使用更简单的 2 参数 LIMIT 函数（与 LIMIT、OFFSET 相同）：

```
SELECT * FROM tablename LIMIT 1, 0 
```

# android - 尝试下载多个文件时，下载管理器类崩溃？

> ID：15002452
> 
> 赞同：-1
> 
> 时间：2013-02-21T12:37:22.307
> 
> 标签：android, performance, android-download-manager

当我的应用程序通过此代码连接到互联网时，我正在尝试从网上下载图像

```
public void downloadimages(String url,String filename)
        {
          String ur1=url,v1=filename;
          downloadManager = (DownloadManager)getSystemService(DOWNLOAD_SERVICE);
          Uri Download_Uri = Uri.parse(ur1);
          DownloadManager.Request request = new DownloadManager.Request(Download_Uri);
          request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI);
          request.setAllowedOverRoaming(false);
          request.setDescription("Android Data download using DownloadManager.");
          request.setDestinationInExternalFilesDir(getApplicationContext(),Environment.DIRECTORY_DOWNLOADS,v1 + ".jpg");
          downloadManager.enqueue(request);     

        } 
```

当我第一次运行应用程序下载时，应用程序在应用程序没有打开之后崩溃，我也在检查下载的文件：

```
String path = "/mnt/sdcard/Android/data/com.example.webdata/files/Download/" + extra2 + ".jpg";
                 tt1.append(path);
                 File f = new File(path);
                  if(f.exists())
                  { 
                    //Toast.makeText(getApplicationContext(), "File already exists....",
                        //  Toast.LENGTH_SHORT).show(); 
                  }
                  else
                  {
                   downloadimages(extra,extra2);
                  } 
```

如果文件之前已经下载过，下次不应该下载，但是我的应用程序崩溃了，我不知道为什么有任何帮助......这是我的 logcat 输出：-

```
02-21 18:00:41.547: E/AndroidRuntime(23964): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.webdata/com.example.webdata.MainActivity}: java.lang.IndexOutOfBoundsException: Invalid index 1088, size is 1088 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T11:56:32.270

你能告诉我们代码`MainActivity`类吗，因为似乎错误来自这个类。

那么错误是 a `IndexOutOfBoundsException`，那么您是否尝试过使用较少的图像，例如 10 或 20？并在前 10 个恢复后运行？

# java - 如何让eclipse忽略测试源目录

> ID：15002454
> 
> 赞同：1
> 
> 时间：2013-02-21T12:37:25.093
> 
> 标签：java, eclipse, testing

首先，我使用 Eclipse Juno。

我有一个带有 2 个源目录的简单 java 项目：

```
-- Project
  |-- src
    |-- main
    |-- test 
```

我在路径中设置了这些文件夹`build`并且工作正常。但是使用这种方法的eclipse有两个问题：

1) 'src' 目录在我的包资源管理器中显示为一个单独的文件夹。有没有办法隐藏它？2）在主目录中编码时，我仍然可以参考测试相关的类。现在我知道如果你真的这样做是很愚蠢的，但我发现它会让我的内容辅助变得混乱。我可以以某种方式强制从 main 中删除引用以进行测试吗？或者至少将其从我的内容辅助列表中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:47:19.840

您的测试类具有不同的包名称。因此，您可以将它们添加到 中，`Type Filters`以防止它们出现在自动完成列表/内容辅助中以及在您使用该`Open Type... (Ctrl+Shift+T)`功能时。

因此，如果您的测试类包以 开头`com.test.blah`，请将此前缀添加到类型过滤器中，如下所示：

1.  窗口 >> 首选项
2.  Java >> 外观 >> 类型过滤器（或在搜索框中输入*类型过滤器）*
3.  点击`Add...`
4.  进入`com.test.blah.*`
5.  申请 >> 确定

而且..你完成了。

关于您的`src`文件夹显示为单独的文件夹，这是设计使然。如果需要，您可以切换到`Project Explorer`视图。然而，这取决于透视的类型......即`Java EE`透视将显示它与`Java`透视不同

# .net - 代表 - 为什么他们被创建

> ID：15002457
> 
> 赞同：0
> 
> 时间：2013-02-21T12:37:37.353
> 
> 标签：.net, delegates

我想我已经得到了代表们的关注；现在我知道通常存在大多数“事情”来解决特定问题，但是代表解决了什么问题。

IMO 当我们想要调用无法从另一个项目引用的现有项目的方法时，它解决了这个问题（否则我们可能会遇到两个项目相互引用的情况，这是不允许的）。这对我来说很有意义，我可以看到它的用途。

还有其他时间/原因/好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:51:24.743

它们的存在是为了让您可以将函数放入变量中并对它们进行操作。例如`Enumerable.Select`，接受一个委托，告诉它如何处理每个元素。`Select`如果没有代表，您将如何实施？例如，您必须实现一个接口，但这很笨拙。（Java 就是这样做的，它不是那么好）。

实际上，委托很像单方法接口。

它们还用于本机代码互操作，以便您可以提供指向本机方法的本机函数指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:51:48.333

例如，我在 winform 中使用它们通过按钮关闭表单。

```
button.Click += delegate{this.Close();}; 
```

# jquery - 错误地关闭了我的 jQuery 脚本？

> ID：15002459
> 
> 赞同：0
> 
> 时间：2013-02-21T12:37:42.793
> 
> 标签：jquery

```
<script>
$("document").ready(function() {
  $("em#tinkatag").hover(function() {
    $(".tag.tinka").fadeToggle("slow", "linear");
  });
  $(".tag.tinka").hover(function() {
    $(".tag.tinka").toggle(
      function() {
        $("em#tinkatag").css("color","gray");
      },
      function () {
        $("em#tinkatag").css("color","red");
      }
    );
  )};
)};
</script> 
```

我正在尝试将此脚本导入我的 wordpress 网站。我很确定我做对了，但我一直收到这个错误。

Uncaught SyntaxError: Unexpected token )

我究竟做错了什么？感谢您的时间 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:41:35.593

最后两个右“括号”的顺序错误：

```
)}; 
```

应该

```
}); 
```

因为`}`属于函数定义， 属于`)`函数调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:41:32.390

改变 ）}; 至 }）; 在最后两行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:43:04.733

查看`});`

做了`)};`

```
$(document).ready(function() {
  $("em#tinkatag").hover(function() {
    $(".tag.tinka").fadeToggle("slow", "linear");
  });
  $(".tag.tinka").hover(function() {
    $(".tag.tinka").toggle(
      function() {
        $("em#tinkatag").css("color","gray");
      },
      function () {
        $("em#tinkatag").css("color","red");
      }
    );
  });
}); 
```

# jquery - jquery toggleSlide() 不滑动

> ID：15002460
> 
> 赞同：0
> 
> 时间：2013-02-21T12:37:46.980
> 
> 标签：jquery

我有一个切换幻灯片，基本上它只是隐藏和显示，它没有像它应该的那样上下滑动。

```
<script type="text/javascript">
    $(document).ready(function(event){
        $('.togglable tr:not(:first-child)').hide();

        $('a.toggleSwitch').click(function (event) {
            event.preventDefault();
            $(this).parent().parent().siblings('tr').slideToggle("fast");
        });
    });
</script> 
```

和html...

```
<table class="togglable">
    <tr><td><a class="toggleSwitch" href="#">Click me</a></td></tr>
    <tr><th>Part No</th><th>Description</th></tr>
    <tr><td>12345</td><td>Description1</td></tr>
    <tr><td>12344</td><td>Description2</td></tr>
    <tr><td>12343</td><td>Description3</td></tr>
    <tr><td>12342</td><td>Description4</td></tr>
</table> 
```

刚刚开始掌握 jquery，所以任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:42:31.237

试试这个（[小提琴](http://jsfiddle.net/4FLBv/)）

```
<a class="toggleSwitch" href="#">Click me</a>
    <div class="togglable">
        <table>
            <tr>
                <th>
                    Part No
                </th>
                <th>
                    Description
                </th>
            </tr>
            <tr>
                <td>
                    12345
                </td>
                <td>
                    Description1
                </td>
            </tr>
            <tr>
                <td>
                    12344
                </td>
                <td>
                    Description2
                </td>
            </tr>
            <tr>
                <td>
                    12343
                </td>
                <td>
                    Description3
                </td>
            </tr>
            <tr>
                <td>
                    12342
                </td>
                <td>
                    Description4
                </td>
            </tr>
        </table>
    </div>
    <script>
        $(document).ready(function (event) {
            $('.togglable').hide();

            $('a.toggleSwitch').click(function (event) {
                event.preventDefault();
                $('.togglable').slideToggle("slow");
            });
        });
    </script> 
```

实际上，您尝试滑动的标记在垂直方向上没有足够的空间在滑动时看起来更好看。

# python - 从 sqlalchemy 中的元数据表中选择一列

> ID：15002462
> 
> 赞同：1
> 
> 时间：2013-02-21T12:37:53.697
> 
> 标签：python, sqlalchemy

我从 sqlalchemy 开始，到目前为止我有

```
import sqlalchemy

db = sqlalchemy.create_engine('mysql://CONNECTION?charset=utf8&use_unicode=0')
connection = db.connect()
db.echo = True
metadata = sqlalchemy.MetaData(db)

details_file = sqlalchemy.Table('details_file', metadata, autoload=True)

query = details_file.select([details_file.c.Id]).\
        where(details_file.c.RunId == 5859)
res = query.execute() 
```

我正在尝试的是只选择`Id`符合 where 标准的列。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:12:48.237

您直接使用[select](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html?highlight=select#sqlalchemy.sql.expression.select)构造：

```
from sqlalchemy import select

select([details_file.c.Id]).where(details_file.c.runid == 5) 
```

# iphone - 舒适地将 HTML 转换为 NSString

> ID：15002465
> 
> 赞同：0
> 
> 时间：2013-02-21T12:38:07.537
> 
> 标签：iphone, ios, objective-c, nsstring

我想用这个 html 有很长的 'NSString'：

```
<html>

    <head>
       <title>Title of the document</title>
    </head>

    <body>
       <h1>My First Heading</h1>
    </body>

</html> 
```

有没有一种舒适的方法可以做到这一点？就像是：

```
 NSString *a = [NSString stringWithLongString: "   

<html>

    <head>
       <title>Title of the document</title>
    </head>

    <body>
       <h1>My First Heading</h1>
    </body>

</html>"] 
```

无需将所有内容都集中到一条线上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:40:40.303

是的，您可以`\`在每一行的末尾添加一个：

```
NSString *a = @"    <html>\
\
    <head>\
    <title>Title of the document</title>\
    </head>\
\
    <body>\
    <h1>My First Heading</h1>\
    </body>\
\
</html>"; 
```

不需要做`[NSString stringWithString:]`方法，也没有`stringWithLongString:`方法`NSString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:40:38.413

每行以“\”结束

```
NSString *a = @"    <html>\
\
<head>\
<title>Title of the document</title>\
</head>\
\
<body>\
<h1>My First Heading</h1>\
</body>\
\
</html>"; 
```

# android - 来自 Android 的 Instagram 在特定用户上打开并为上传的图像添加标题

> ID：15002468
> 
> 赞同：27
> 
> 时间：2013-02-21T12:38:16.100
> 
> 标签：android, instagram

就我目前所见，适用于 Android 的 Instagram 非常有限。我的场景很简单：允许用户编辑图片，当他点击发送时：

```
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("image/jpeg"); 
```

然后`queryIntentActivities()`我搜索以查看是否安装了 Instagram。如果是，我发送要上传的图像的路径：

```
 share.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///" + path to myfile.png"));
 share.setClassName(resolveInfo.activityInfo.packageName, resolveInfo.activityInfo.name);
 share.putExtra(Intent.EXTRA_SUBJECT, "Sample subject");
 share.putExtra(Intent.EXTRA_TEXT, "Sample text");
 share.putExtra(Intent.EXTRA_TITLE, "Sample title"); 
```

**结果：**图像是使用 Instagram 应用程序上传的（当然，如果我已登录），但我无法为其添加标题。这些都没有`putExtra`任何效果。那么，有没有办法将标题添加为意图参数？

还有一个问题，是否可以打开填写了某个用户名的 Instagram 应用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-25T18:32:09.987

看起来 Instagram 的 Android 应用程序忽略了 EXTRA_TEXT、EXTRA_SUBJECT 和 EXTRA_TITLE，因此在上传图像时添加标题似乎是不可能的。顺便说一句，您可以尝试不同的方法来检查它是否在每种情况下都忽略了这些额外内容：

选项 #1：更改 MIME 类型。

您将 MIME 类型设置为“image/jpeg”。尝试使用“image/ *”或“* /*”来检查他们的应用程序是否不会忽略这些额外内容。

```
share.setType("image/*"); 
```

或者

```
share.setType("*/*"); 
```

选项#2：

当您发送多种 MIME 类型（图像和文本）时，可能他们的应用需要 ACTION_SEND_MULTIPLE 而不是 ACTION_SEND。

```
Intent share = new Intent(Intent.ACTION_SEND_MULTIPLE); 
```

选项#3：使用`MediaStore.Images.Media.insertImage(ContentResolver cr, String imagePath, String name, String description)`功能：

```
Intent share = new Intent(Intent.ACTION_SEND);
share.putExtra(Intent.EXTRA_STREAM, Uri.parse(MediaStore.Images.Media.insertImage(getContentResolver(), "file:///" + path to myfile.png", "Sample title", "Sample description")));
share.setType("image/jpeg");
share.setClassName(resolveInfo.activityInfo.packageName, resolveInfo.activityInfo.name); 
```

[选项 #4：在他们的开发者论坛](https://groups.google.com/forum/?fromgroups#!forum/instagram-api-developers)中发布您的问题，尽管还有类似的问题仍未解决：

*   [https://groups.google.com/forum/?fromgroups#!searchin/instagram-api-developers/caption$20action_send/instagram-api-developers/PJDuG2sTDlM/6bno5dZmoTEJ](https://groups.google.com/forum/?fromgroups#!searchin/instagram-api-developers/caption%2420action_send/instagram-api-developers/PJDuG2sTDlM/6bno5dZmoTEJ)

*   [https://groups.google.com/forum/?fromgroups#!searchin/instagram-api-developers/caption/instagram-api-developers/7XUKm9HSAdg/rJbdSnOmXacJ](https://groups.google.com/forum/?fromgroups#!searchin/instagram-api-developers/caption/instagram-api-developers/7XUKm9HSAdg/rJbdSnOmXacJ)

别忘了回来告诉我们他们的答案！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-09T20:23:46.783

看起来 Instagram 已经更新了他们的应用程序以接受 EXTRA_TEXT 来添加标题。如果用户有 Instagram 的更新版本（2014 年 7 月 1 日或更高版本），您可以使用以下代码发布图像并添加标题：

```
Intent instagram = new Intent(android.content.Intent.ACTION_SEND);
instagram.setType("image/*");
instagram.putExtra(Intent.EXTRA_STREAM, [URI of photo]);
instagram.putExtra(Intent.EXTRA_TEXT, [Text of caption]);
instagram.setPackage(instagramPackageName);
startActivity(instagram); 
```

使用旧版本的用户仍将获得图像，但不会预先填充标题。

此代码假设您已经完成了身份验证流程。

# loops - VHDL：使用循环添加数字列表

> ID：15002470
> 
> 赞同：1
> 
> 时间：2013-02-21T12:38:26.930
> 
> 标签：loops, add, vhdl

首先，我对 C 的了解非常有限，只有基本功能。我已经在 VHDL 中设置了一项我没有经验的任务。

任务是用 VHDL 编写一个程序，该程序将使用循环添加 10 个数字（13、8、6、5、19、21、7、1、12、3）的列表。

即使在 C 中，我也在想一种方法，看看我是否可以在某种程度上模仿这种方法。到目前为止，我只想出了

```
 int start = 0;
    int add = start;
    int increment = 5;

    for (int i=0; i<10; i++) {
    add = add + increment;
    } 
```

现在我知道这是非常基本的，但这是我能做的最好的。该循环只会将它增加 5，就像我拥有的​​列表一样。

非常感谢任何帮助，这是我的第一个问题，如果我违反任何“不成文的法律”，我深表歉意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:28:23.960

首先，我要指出没有必要用 and 增加 s 或向量算术的复杂`std_logic_vector`性。这适用于简单的整数：`signed``unsigned`

所以，你有一些数字进来，一个总和出去：

```
entity summer
port (
  inputs : integer_vector := (13,8,6,5,19,21,7,1,12,3);
  sum_out : integer);
end entity summer; 
```

请注意，我已经用您的值初始化了输入端口 - 通常您会在测试台中写入该端口。

现在要将它们相加，您需要一个过程：

```
process(inputs)
    variable sum : integer;
begin
    sum := 0;
    for i in inputs'range loop
        sum := sum + inputs(i);
    end for;
    sum_out <= sum;
end process; 
```

这是一个简单的解决方案 - 要创建“最佳”解决方案，您需要更详细的规范。例如：输入多久会改变一次？输入更改后多久需要答案？有时钟吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:25:11.247

您提到这是对 parwan 处理器研究的一部分，因此考虑它的方式很大程度上取决于您如何研究它们。

如果您正在构建处理器的实现，而不仅仅是学习逻辑运算的语法是重要的部分，您应该关注类型 `unsigned range 0 to 255`和`signed range -128 to 127`. 通过使用包`ieee.numeric_std.all`，您可以获得为这些类型定义的添加操作。

但是，如果已经为您定义了处理器，请仔细查看处理器接口。您将为此编写的代码将更像是一个显式状态机。

无论哪种方式，我发现最好的开始方法是编写一个测试台。这是将在输入列表中提供的部分，因为最终您不希望它是一种处理方式`for (int i=0; i<10; i++)`，而是一种`while(1)`处理方式。

这都是理论的东西，所以这里有一些简单的累加器过程的伪代码：

```
signal acc : unsigned range 0 to 255 := 0; --accumulator register
signal b : unsigned range 0 to 255 := 5;   --value to be added 
--each cycle you would change b

accumulator :process (clk)
begin
    if rising_edge(clk)
        acc <= acc + b;
    end if;
end process; 
```

或者也许更好看看这里：[累加器](http://cseweb.ucsd.edu/~hepeng/cse143-w08/labs/VHDLTutorial/Accumulator.vhd)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:13:16.873

下面的解决方案可以帮助您开始使用 VHDL 解决问题：

对于在 FPGA 中的实现，可以找到更好的解决方案。所以，把它当作一个开始......

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity add is

    port (
        clk : in  std_logic;
        rst : in  std_logic;
        add : in  std_logic;
        sum : out std_logic_vector(31 downto 0));

end entity add;

architecture RTL of add is

    constant rom_size : integer := 10;
    type     t_rom is array (0 to rom_size-1) of unsigned(31 downto 0);
    constant rom : t_rom := (
        to_unsigned(13, sum'length),
        to_unsigned(8, sum'length),
        to_unsigned(6, sum'length),
        to_unsigned(5, sum'length),
        to_unsigned(19, sum'length),
        to_unsigned(21, sum'length),
        to_unsigned(7, sum'length),
        to_unsigned(1, sum'length),
        to_unsigned(12, sum'length),
        to_unsigned(3, sum'length));
    signal add_d : std_logic;
    signal index : integer range 0 to rom_size;
    signal sum_i : unsigned(sum'range);

begin

    p_add : process (clk) is
    begin
        if rising_edge(clk) then        -- rising clock edge
            if rst = '1' then           -- synchronous reset (active high)
                sum_i <= (others => '0');
                add_d <= '0';
                index <= 0;
            else

                add_d <= add;           -- rising edge detection

                if add_d = '0' and add = '1' then  -- rising_edge -> add next item to sum
                    sum_i <= sum_i + rom(index);
                    index <= index + 1;
                end if;
            end if;
        end if;
    end process p_add;

    -- output
    sum <= std_logic_vector(sum_i);

end architecture RTL; 
```

![在此处输入图像描述](../Images/d5e128f48652500a80a7b307a14d3fa0.png)

# java - Android：处理图像并在图像周围添加白色边框

> ID：15002472
> 
> 赞同：0
> 
> 时间：2013-02-21T12:38:38.267
> 
> 标签：java, android, image

我想通过在我的应用程序中的图像（边框）周围添加空白来操作我的图像。图像将在视图中显示边框，图像也应*保存/替换*为新边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:43:48.750

您应该使用具有*边界*可能性的图像处理库。

例如[ImageMagick](http://www.imagemagick.org/script/index.php)可以做[边界](http://www.imagemagick.org/Usage/crop/)；您可以使用[ImageMagick Java 绑定](http://sourceforge.net/projects/jmagick/)。

# function - 如何将浮点 arg 传递给自定义 EL 函数 (jsp)？

> ID：15002476
> 
> 赞同：0
> 
> 时间：2013-02-21T12:38:59.090
> 
> 标签：function, tags, el, jsp-tags, taglib

***错误：** MyExchangeClass 类型中的方法 exchangeConversion(String, String, float) 不适用于参数 (String, String, double)*

jsp 文件中的代码，15.4 和 15.4f 也有错误，但如果更改函数和 TLD 为 double 都可以正常工作。为什么 15.4 和 15.4f 就像是双打一样？

```
...
From GBP to USD: ${ elfuncs:exchange("GBP", "USD", 15.4f) }
Otherwise: ${ elfuncs:exchange("GBP", "YEN", 15.4) } 
```

TLD 中的代码

```
 <function>
    <name>exchange</name>
    <function-class>mypackage.MyExchangeClass</function-class>
    <function-signature>float exchangeConversion(java.lang.String, java.lang.String, float)</function-signature>
  </function> 
```

java 类的代码 public class MyExchangeClass {

```
 public static float exchangeConversion(String from, String to, float amount) { 
        float calculatedAmount = 0.0f;

        /* Example implementation code: */
        if(from.equals("GBP") && to.equals("USD")) {
            calculatedAmount = amount*1.5f;
        }
        return calculatedAmount; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:31:34.443

因为这是在[EL 规范](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)中指定的。浮点文字总是被解释为`double`.

> # 1.3 字面量
> 
> eval 表达式中有布尔、整数、浮点、字符串和 null 的文字。
> 
> ...
> 
> *   浮点 - 如`FloatingPointLiteral`第 1.19 节中的构造所定义。

> # 1.19 集合语法
> 
> ...
> 
> *   a 的值`FloatingPointLiteral`范围从`Double.MIN_VALUE`到`Double.MAX_VALUE`。

只需更改`float`为`double`您的功能。

# javascript - 比较 js 中的 mscrm GUID

> ID：15002479
> 
> 赞同：2
> 
> 时间：2013-02-21T12:39:04.467
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm, guid

有没有更好/官方的方法，如何在 JavaScript 中比较 CRM 2011 GUID

```
2e9565c4-fc5b-e211-993c-000c29208ee5=={2E9565C4-FC5B-E211-993C-000C29208EE5} 
```

不使用`.replace()`and `.toLowerCase()`?

第一个是通过 XMLHttpRequest/JSON 获得的：

```
JSON.parse(r.responseText).d.results[0].id 
```

第二个来自表单：

```
Xrm.Page.getAttribute("field").getValue()[0].id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:42:22.583

JavaScript 中没有比较 GUID 的官方方法，因为没有原始 GUID 类型。因此，您应该将 GUID 视为字符串。

如果您一定不能使用`replace()`并且`toLowerCase()`可以使用正则表达式：

```
// "i" is for ignore case
var regExp = new RegExp("2e9565c4-fc5b-e211-993c-000c29208ee5", "i"); 

alert(regExp.test("{2E9565C4-FC5B-E211-993C-000C29208EE5}")); 
```

它可能会比替换/toLowerCase() 慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T23:47:14.150

您可以使用 node-uuid ( [https://github.com/broofa/node-uuid](https://github.com/broofa/node-uuid) ) 库并在将字符串解析为字节后进行字节比较。字节作为数组返回，可以使用 lodash _.difference 方法进行比较。这将处理 GUID 不使用相同大小写或没有“-”破折号的情况。

咖啡脚本：

```
compareGuids: (guid1, guid2) ->
    bytes1 = uuid.parse(guid1)
    bytes2 = uuid.parse(guid2)
    # difference returns [] for equal arrays
    difference = _.difference(bytes1, bytes2)
    return difference.length == 0 
```

Javascript（更新）：

```
compareGuids: function(guid1, guid2) {
    var bytes1, bytes2, difference;
    bytes1 = uuid.parse(guid1);
    bytes2 = uuid.parse(guid2);
    difference = _.difference(bytes1, bytes2);
    return difference.length === 0;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-04T19:06:45.573

```
var rgx = /[\{\-\}]/g;
function _guidsAreEqual(left, right) {
    var txtLeft = left.replace(rgx, '').toUpperCase();
    var txtRight = right.replace(rgx, '').toUpperCase();
    return txtLeft === txtRight;
}; 
```

# java - Hibernate 和 Hibernate JPA 的区别

> ID：15002481
> 
> 赞同：11
> 
> 时间：2013-02-21T12:39:19.160
> 
> 标签：java, hibernate, jpa, orm

我发现了很多类似的问题

*   [Hibernate 库和 Hibernate JPA 库的区别](https://stackoverflow.com/questions/7426743/difference-between-hibernate-library-and-hibernate-jpa-library)
*   [JPA 和 Hibernate 有什么区别？](https://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate)
*   [jpa和hibernate的异同](https://stackoverflow.com/questions/1770211/similarity-and-difference-between-jpa-and-hibernate)

但没有人回答我的下一个问题。使用经典休眠方法`org.hibernate.SessionFactory`和 JPA`javax.persistence.EntityManager`实现之间有什么区别？我听说，这个 JPA 实现使用`org.hibernate.SessionFactory`并像包装器一样工作，是真的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-21T12:53:24.977

确实。

JPA 只是一个 API，它允许您从使用的持久层中抽象出来。Hibernate 提供了一个`EntityManager`接口的实现，`adapter`它使用与 hibernate 相同的底层方法`SessionManager`。

例如，您可以将实现切换到 Eclipse Link，而不必更改任何源代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-12T05:26:43.517

JPA 只是一个规范，这意味着没有实现。您可以使用 JPA 注释尽可能多地注释您的类，但是如果没有实现，则不会发生任何事情。将 JPA 视为必须遵循的准则或接口，而 Hibernate 的 JPA 实现是符合 JPA 规范定义的 API 并提供底层功能的代码。

When you use Hibernate with JPA you are actually using the **Hibernate JPA implementation**. The benefit of this is that you can swap out Hibernate's implementation of JPA for another implementation of the JPA specification. When you use straight **Hibernate you are locking into the implementation** because other ORMs may use different methods/configurations and annotations, therefore you cannot just switch over to another ORM.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T12:45:19.067

这是你的问题的答案

> 使用org.hibernate.SessionFactory 和 JPA javax.persistence.EntityManager实现的经典休眠方法有什么区别
> ？

```
org.hibernate.SessionFactory 
```

如果您将 undeline ORM 更改为 IBatis（例如），您还需要更改代码。

```
javax.persistence.EntityManager 
```

如果将 undeline ORM 更改为 IBatis（例如），则无需更改代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-12T09:28:28.487

对于你的第一个问题，

JPA 是一种 Java API 规范，它描述了使用 Java 平台对应用程序中的关系数据进行管理。其中 Hibernate 是一个遵循 JPA 规范的 ORM（对象关系映射）库。

您可以将 JPA 视为一组由 Hibernate 实现的规则。

并回答你的第二个问题，

由于 JPA 只是一个抽象的持久层，它需要实现。而 Hibernate 实现了使用 hibernate SessionManager 的 EntityManager 接口。

通过这种方式，您完全脱离了实现方式，意味着您可以随时切换到 Hibernate 或 OenJPA 或任何其他方式，无需额外的代码更改。

# javascript - 事件阻止默认javascript

> ID：15002486
> 
> 赞同：0
> 
> 时间：2013-02-21T12:39:31.873
> 
> 标签：javascript, events

我在新窗口中打开我的应用程序。在这个应用程序中，我为我的操作阻止了一些默认事件操作。但是当我关闭窗口时，我想激活默认事件操作。

是否有命令如何将**所有**事件恢复为默认操作。

我如何防止默认事件

```
preventDefault = function(e) {
e = e || window.event;
if (e.preventDefault) {
    e.preventDefault();
}
e.returnValue = false;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:51:31.233

如果我们谈论的是同一个 JavaScript`window`对象，您可以在其中打开不同的 Dojo 视图 - 正如我们所阐明的，您可以在事件处理程序中使用条件。例如，您有一个处理函数，例如：

```
function handleClick(e) {

  if(window._preventDefault) {

    // prevent default action

  }

  // handle event
} 
```

`_preventDefault`然后您可以通过更改全局变量来控制是否全局阻止默认值

```
window._preventDefault = false; 
```

分配的处理程序不会阻止默认值，但如果您将该变量设置为，`true`那么它们会。

# regex - 一天中时间的正则表达式

> ID：15002495
> 
> 赞同：2
> 
> 时间：2013-02-21T12:40:05.990
> 
> 标签：regex

我正在尝试为特定日期的时间创建一个正则表达式。它处理`7am`和`11:34pm`正确。它应该能够识别格式错误的时间。现在我已经尝试为这个问题编写一个有效的正则表达式。

**正则表达式**`^(([0]?[0-9])|([1][0-2]))(\:[00-59]{2})?(am|pm){1}\b`

问题是在 antemeridiem 中，小时部分从`1`(or `01`) 到变化，`12`但在 postmeridiem 它从`0`(or `00`) 到变化`12`。对于这种情况，我无法推断出正则表达式。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:08:25.097

我不会开始争论 12 小时制应该是什么样的，而只是按照给定/固定的方式使用您的要求：

> 问题是，在 antemeridiem 中，小时部分从 1（或 01）到 12 不等，但在 postmeridiem 中，它从 0（或 00）到 12 不等。我无法针对这种情况推断正则表达式。请帮忙。

然后，这个正则表达式应该可以工作：

```
^(((0?[1-9]|1[012])(:[0-5][0-9])?am)|((0?[0-9]|1[012])(:[0-5][0-9])?pm))\b 
```

[在这里](http://gskinner.com/RegExr/?33rs1)亲自看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:37:32.913

你总是可以做类似的事情：

（我的正则表达式）| （我下午的正则表达式）

只要您的括号在正确的位置，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:56:13.197

尝试这样的事情：

`^(0?[1-9]|1[0-2])(:([0-5]?[0-9]))?(am|pm)$`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:54:44.307

这应该符合您的要求。

`^(([0]?[0-9])|([1][0-2])){1}(\:)?([0-5][0-9])?(am|pm){1}`

此外，您正在尝试使用正则表达式来匹配数字

> [00-59]

我不认为它是这样工作的，你必须匹配字符串，最好改为 [0-5][0-9] 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-15T15:41:13.047

我也在尝试为此找到一个好的正则表达式。我使用了一个名为 Expresso 的工具，并为 12 小时时间匹配提出了以下表达式：

```
((1{0,1}[012]{1})|[0-9]{1}){1}((:|\s)?[0-5]{1}[0-9]{1})?((a|p|A|P){1}(m|M){1})? 
```

我针对以下数据进行了测试：

```
12:00
12am
11111111PM
pm
11122am
13
00am
9a 
```

并且表达式提出了以下匹配项：

```
12:00
12am
1111
1111PM
1112
2am
1
3
0
0am
9 
```

如果您正在验证数据并将匹配项与数据长度进行比较，则可以丢弃从`11111111PM`和找到的部分匹配项`11122am`。这对我有用。

# grid - 如何在没有复选框的情况下在网格中标记记录？

> ID：15002500
> 
> 赞同：1
> 
> 时间：2013-02-21T12:40:24.660
> 
> 标签：grid, datasource, axapta, x++, dynamics-ax-2012

我有两个网格。第一个显示键，第二个显示另一个表中的相关项目列表。由于网格位于不同的选项卡上，因此我在第二个网格选项卡的 pageActivated 方法上放置了一个过滤器。

一些伪代码可以在不发布 200 行 x++ 的情况下表达我的观点

```
override page2Activated() {
    dataSource2_ds.removeFilter();
    dataSource2_ds.filter using grid1Field.valueStr();
} 
```

这很好用，只要在打开表单时 grid1 中有行。如果打开表单时没有行，即使在向 grid1 添加行之后，也不会更新某些内容，并且 grid2 将始终为空白。

然后，我尝试查看数据源而不是网格字段。

```
override page2Activated() {
    dataSource1 firstTable;
    firstTable = dataSource1_ds.getFirst(true);
    dataSource2_ds.removeFilter();
    dataSource2_ds.filter using firstTable.recID;
} 
```

这个问题在于，它只有在您单击记录旁边的复选框时才有效。

我想在 grid1 中使用突出显示的记录，而不必单击复选框。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:18:10.493

问题在上面的评论中回答。发布为答案，以便可以将问题标记为已关闭。

与其使用代码手动过滤记录，不如使用数据源属性 JoinSource 和 LinkType 链接表。将 JoinSource 设置为链接表，将 LinkType 设置为 Active。

# mysql - 这个存储过程没有插入记录有什么问题

> ID：15002502
> 
> 赞同：0
> 
> 时间：2013-02-21T12:40:27.363
> 
> 标签：mysql, database, stored-procedures

存储过程：

```
DELIMITER $$

USE `test`$$

DROP PROCEDURE IF EXISTS `UpdateRelatedAccounts`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `UpdateRelatedAccounts`()
BEGIN 
    DECLARE ssn_sel_id VARCHAR(255) DEFAULT 0;
    DECLARE primary_sel_id CHAR(36) DEFAULT 0;
    DECLARE secondary_sel_rel CHAR(36) DEFAULT 0;
    DECLARE no_more_rows BOOLEAN;
    DECLARE num_rows INT DEFAULT 0;

  DECLARE ssn_all_cur CURSOR FOR
  SELECT ac.ssn, ac.id AS primary_id, ac_b.id AS secondary_id FROM ssn ac LEFT JOIN ssn ac_b ON  ac.ssn =  ac_b.ssn WHERE ac.ssn NOT IN ('','000-00-0000') AND ac.id != ac_b.id;

 DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_rows = TRUE;

 OPEN ssn_all_cur;
 SELECT FOUND_ROWS() INTO num_rows;
    the_loop: LOOP
        FETCH  ssn_all_cur
        INTO ssn_sel_id, primary_sel_id, secondary_sel_rel;

        IF no_more_rows THEN
        CLOSE ssn_all_cur;
        LEAVE the_loop;
        END IF;     
      INSERT INTO `ssn_related` ( `ssn_primary`, `ssn_related` ) VALUES ( '44','44'); -- ( primary_sel_id, secondary_sel_rel );

  END LOOP the_loop;    
END$$

DELIMITER ; 
```

SSN表的结构是：

```
CREATE TABLE `ssn` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ssn` varchar(11) DEFAULT NULL,
  `name` varchar(25) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1; 
```

# python - 我想在 python 的 find() 中实现 OR 运算符

> ID：15002513
> 
> 赞同：2
> 
> 时间：2013-02-21T12:40:52.093
> 
> 标签：python, operator-keyword

编译以下代码时，我没有收到语法错误，但不是所有结果。该程序的重​​点是检查一个字符串序列，在其中找到一些特定的子字符串并打印一个结果字符串，该字符串包含子字符串和后面的 19 个字符。每次出现这些字符串和每个结果字符串时打印。

这是代码..

```
x=raw_input('GET STRING:: ');
m=len(x);
k=0;
while(k<m):
    if('AAT'in x or 'AAC' in x or 'AAG' in x):
        start = x.find('AAT') or x.find('AAC') or x.find('AAG')
        end=start+19
        print x[start:end] 
```

当我输入像 ATGGAATCTTGTGATTGCATTGACACGCCATGCCCTGGTGAAGAACTCTTAGTGAAATATCAGTATACTT 这样的字符串时。它只搜索 AAT 并打印结果子字符串，而不是 AAG 和 AAC。谁能帮我实现运营商？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:53:43.000

在您的示例中，使用正则表达式可能会更好。

```
>>> text = 'ATGGAATCTTGTGATTGCATTGACACGCCATGCCCTGGTGAAGAACTCTTAGTGAAATATCAGTATATCT'
>>> re.search('(?:AA[TCG])(.{19})', text).group(1)
'CTTGTGATTGCATTGACAC' 
```

`re.findall`如果字符串需要多个匹配项，您可以更改为。（但是，如果您想要重叠匹配（即，您的字符串 3 再次出现在 19 中），这将不会很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:53:34.133

搜索从 k 开始的第一个匹配项

```
mystring=raw_input('GET STRING:: ')
m=len(mystring)
k=0
while(k<m):
   x=mystring[k:]
   start=min(x.find('AAT'),x.find('AAC'),x.find('AAG'))
   end=min(start+19,m)
   print x[start:end]
   k+=start+1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:35:17.980

这个怎么样：

```
import re

str= "ATGGAATCTTGTGATTGCATTGACACGCCATGCCCTGGTGAAGAACTCTTAGTGAAATATCAGTATATCT"
alist = ['AAT','AAC','AAG']
newlist= [re.findall(e,str) for e in alist] 
Output: [['AAT','AAT'],['AAC'],['AAG']]. 
```

这里的索引有点重：

```
import re
astr= "ATGGAATCTTGTGATTGCATTGACACGCCATGCCCTGGTGAAGAACTCTTAGTGAAATATCAGTATATCT"
def find_triple_base(astr, nth_sub):
    return [(m.end(), m.group(), astr[m.end(0):m.end(0)+nth_sub]) for m in re.finditer(r'AA[TCG]', astr)]
for e in find_triple_base(astr, 19): print(e)
Output:
(7, 'AAT', 'CTTGTGATTGCATTGACAC')
(43, 'AAG', 'AACTCTTAGTGAAATATCA')
(46, 'AAC', 'TCTTAGTGAAATATCAGTA')
(58, 'AAT', 'ATCAGTATATCT') 
```

它的作用：findall 查找您想要查找的基本三元组 (alist) 的所有出现，并生成一个包含 3 个基本三元组列表的新列表，例如 [['AAT','AAT'],['AAC'], ['AAG']]。打印出来很简单。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T12:44:19.257

您应该设置为三个语句`start`的最小非负值。`find`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T14:19:04.170

[您可以使用将前瞻断言](http://www.regular-expressions.info/lookaround.html)与[捕获组](http://www.regular-expressions.info/brackets.html)一起使用的正则表达式来处理重叠匹配：

```
>>> import re
>>> regex = re.compile("(?=(AA[TCG].{19}))")
>>> regex.findall("ATGGAATCTTGTGATTGCATTGACACGCCATGCCCTGGTGAAGAACTCTTAGTGAAATATCAGTATATCT")
['AATCTTGTGATTGCATTGACAC', 'AAGAACTCTTAGTGAAATATCA', 'AACTCTTAGTGAAATATCAGTA']
>>> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T12:56:57.877

看看这个：http: [//ideone.com/U70n4y](http://ideone.com/U70n4y)

代码：

```
x=raw_input('GET STRING:: ');
m=len(x);
k=0
if('AAT'in x ):
    start = x.find('AAT')
    end=start+19
    print x[start:end]

elif('AAC' in x ):
    start = x.find('AAC')
    end=start+19
    print x[start:end]

elif('AAG' in x):
    start = x.find('AAG')
    end=start+19
    print x[start:end] 
```

编辑：试试这个正则表达式代码

```
import re
y=r"(?:AA[TCG]).{19}"
x=raw_input('GET STRING:: ');
l= re.findall(y,x)
for x in l:
    print x
    print len(x) 
```

[http://ideone.com/U70n4y](http://ideone.com/U70n4y)

# asp.net-mvc - 授权 Api 控制器上的过滤器 - FormsAuthentication？

> ID：15002516
> 
> 赞同：1
> 
> 时间：2013-02-21T12:41:01.620
> 
> 标签：asp.net-mvc, api

我已经创建了我的应用程序，并且我有一个**应用程序控制器**（基本控制器），我始终在其中强制进行身份验证。如果需要，我可以在任何派生控制器中覆盖它。我在这个控制器上有一个 [Authorize] 属性。

我刚刚开始创建从我的**应用程序控制器**派生的**Api Base 控制器**，以访问 Nhibernate Session、记录器等。

 **在我的应用程序中，我确保像这样设置 FormsAuthentication：

```
 var cookie = FormsAuthentication.GetAuthCookie(Name, false);
        var ticket = FormsAuthentication.Decrypt(cookie.Value);

        var expiration = DateTime.Today.AddDays(5);

        var newTicket = new FormsAuthenticationTicket(ticket.Version, ticket.Name, ticket.IssueDate, expiration,
            ticket.IsPersistent, value.APIToken, ticket.CookiePath);
        var encTicket = FormsAuthentication.Encrypt(newTicket);

        cookie.Value = encTicket;
        cookie.HttpOnly = true;

        HttpContext.Current.Response.Cookies.Add(cookie); 
```

我的 Api 需要同样的东西吗？理想情况下，我想通过标头或查询字符串提供的身份验证对每个请求的用户进行身份验证，例如

site.com/api/v1/projects?clientid=xxx&token=xxxxxxxxxxx

仅当我具有以下属性时，对我的 Api 控制器的请求才有效：[AllowAnonymous]

对我的 api 调用进行身份验证的最佳方法是什么？**

# ios - 无法在文件夹中写入 nsdata

> ID：15002520
> 
> 赞同：3
> 
> 时间：2013-02-21T12:41:09.953
> 
> 标签：ios, nsdata, writetofile

以下是代码：

```
NSData * imageData = [NSData dataWithContentsOfURL:imageURL];                

 [imageData writeToFile:savedImagePath options:NSDataWritingAtomic error:&error];
                            if(error != nil)
 NSLog(@"write error %@", error); 
```

错误：

```
 write error Error Domain=NSCocoaErrorDomain Code=4 "The operation couldn’t be completed. (Cocoa error 4.)" UserInfo=0x8b7b850 {NSUnderlyingError=0x8b7d7c0 "The operation couldn’t be completed. No such file or directory", NSFilePath=/Users/alfa-1/Library/Application Support/iPhone Simulator/6.0/Applications/C24B228A-599E-4249-97A7-17775E8A546B/Library/Caches/ChannelListImages/http:/direct.domain.com/files/icons/1-all-cb.jpg, NSUserStringVariant=Folder} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T12:56:48.000

在将数据写入文件之前。您需要创建文件夹。按着这些次序

```
#define APPLICATION_DATA_DIRECTORY @"Application Data"
+ (NSString *)cachesDirectoryPath
// Returns the path to the caches directory.  This is a class method because it's
// used by +applicationStartup.
{
    NSString *      result;
    NSArray *       paths;

    result = nil;
    paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    if ( (paths != nil) && ([paths count] != 0) ) {
        assert([[paths objectAtIndex:0] isKindOfClass:[NSString class]]);
        result = [paths objectAtIndex:0];
    }
    result = [result stringByAppendingPathComponent:APPLICATION_DATA_DIRECTORY];
    if (![[NSFileManager defaultManager] fileExistsAtPath:result]) {
        [[NSFileManager defaultManager] createDirectoryAtPath:result withIntermediateDirectories:YES attributes:nil error:NULL];
    }

    return result;
} 
```

在这之后：`#define kPhotosDirectoryName @"ApplicationDocuments"`

```
 NSMutableString *savePath = [NSMutableString string];
    [savePath appendFormat:@"%@/%@",[YOURClass cachesDirectoryPath],kPhotosDirectoryName];

    [savePath appendFormat:@"/%@",YOUR_FILE_NAME];

    if (![[NSFileManager defaultManager] fileExistsAtPath:savePath]) {
        //write the data to file here
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:50:50.870

试试这个样本。这个对我有用。

在 .h 文件中声明 -(NSString*) 数据文件路径

```
-(NSString *) datafilepath{
NSArray *path=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documents=[path objectAtIndex:0];
return [documents stringByAppendingFormat:@"/sample.plist"];
} 
```

任何你想执行写功能的地方

```
NSData * imageData = [NSData dataWithContentsOfURL:imageURL];                
[imageData writeToFile:[self datafilepath]atomically:YES];
 if(error != nil)
 NSLog(@"write error %@", error); 
```

希望这可以帮助！！！

# ios - 找不到 -lsqlite3.0 的库

> ID：15002523
> 
> 赞同：0
> 
> 时间：2013-02-21T12:41:20.420
> 
> 标签：ios, xcode4.5

当我在 ios 设备中运行应用程序以制作 ipa 文件时，出现此错误。我该如何解决这个问题？PLZ帮帮我。

ld：找不到-lsqlite3.0 的库 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:44:03.767

在您的项目设置（以及使用 Command-1 选择的左侧窗格）中，删除对 sqlite3.0 的引用并用 sqlite3 替换它们（即将“3.0”更改为“3”）。

# android - Android Activity 重新创建自己

> ID：15002531
> 
> 赞同：21
> 
> 时间：2013-02-21T12:42:00.930
> 
> 标签：android, mobile, galaxy

我的应用程序通常工作得很好，直到我在特定设备上遇到一个奇怪的问题。App中有2个活动。在 ActivityA 内启动 ActivityB 后，ActivityA 启动没有问题。但是，在我返回 ActivityA 并按下硬件按钮或调用 finish(); 在 ActivityB 的 closeButton 内部，ActivityA 会重新加载自身。它再次触发 onCreate() 并重新加载其所有内容。而且我不会改变手机的方向。这种奇怪的行为只出现在超过 1.000 次下载应用程序的 15 部手机中。

**此问题仅在 Galaxy S3 Android OS 4.1.2 上出现。而这也很奇怪。**

你知道为什么会这样吗？

当我在按钮侦听器中启动一个新 Activity 时，如下所示：

**ActivityA.java** (MesajlarListViewActivity)

```
 public class MesajlarListViewActivity extends TrackedActivity {

    Context context = null;

    // contacts JSONArray
    JSONArray contacts = null;

    ArrayList<Message> productArray = new ArrayList<Message>();

    private ProductAdapter adapter;
    private ListView productList;
    private Runnable viewOrders;
    private HoloProgressIndicator profilInfoProgress = null;

    ImageView kapatButton = null;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mesajlar_list);

        context = this;

        kapatButton = (ImageView) findViewById(R.id.kapat_button);
        /* kapat button onclick listener. */
        // =================================================================================================================
        kapatButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view)
            {
                // Set vibration on touch.
                KnetGenericClass.vibratePhone(context);

                finish();
            }

        });
        // =================================================================================================================
        //Progress bar.
        profilInfoProgress = (HoloProgressIndicator) findViewById(R.id.profil_info_progress);

        // cheking internet connectivity.
        if(KnetGenericClass.checkInternetConnection(context))
        {
            // start task!
            /* internet var ise web service baglantisi kurmaya baslayabiliriz. */
            startActivityIndicatorWithThread();
        }
        else
        {
            KnetGenericClass.printErrorMessage(context, "Bağlantı Hatası",
                    "Lütfen internet bağlantınızı kontrol ediniz.");
        }

        productList = (ListView) findViewById(R.id.product_list);
        adapter = new ProductAdapter(this, R.layout.message_row, productArray);
        productList.setAdapter(adapter);

        // When user click a view on list view new page is appearing.
        productList.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id)
            {

                // Set vibration on touch.
                KnetGenericClass.vibratePhone(context);

                /* Navigate to message detay activity class with ilan ID. */
                Intent myIntent = new Intent(view.getContext(), MesajDetayActivity.class);
                myIntent.putExtra("messageID", productArray.get(position).getId());
                startActivity(myIntent);

                // setting image of clicked message null.
                RelativeLayout relativeLayout = (RelativeLayout) view;
                ImageView unreadedImageView = (ImageView) relativeLayout.findViewById(R.id.unreaded_image);
                unreadedImageView.setImageResource(0);
            }
        });
    }

    public class ProductAdapter extends ArrayAdapter<Message> {
        ArrayList<Message> items;

        public ProductAdapter(Context context, int textViewResourceId, ArrayList<Message> objects) {
            super(context, textViewResourceId, objects);
            this.items = objects;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            if(convertView == null)
            {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = vi.inflate(R.layout.message_row, null);
            }

            ImageView unreadedImageView = (ImageView) convertView.findViewById(R.id.unreaded_image);
            TextView productName = (TextView) convertView.findViewById(R.id.product_name);
            TextView productDetail = (TextView) convertView.findViewById(R.id.product_detail);
            // TextView productDate = (TextView)
            // convertView.findViewById(R.id.product_date);
            TextView sentDate = (TextView) convertView.findViewById(R.id.product_date);

            productName.setText(items.get(position).getSender());
            productDetail.setText(items.get(position).getTitle());
            // String bodyNoHTML = items.get(position).getBody();

            if(items.get(position).getIsReaded())
            {
                unreadedImageView.setImageResource(0);
            }
            else
            {
                unreadedImageView.setImageResource(R.drawable.bluedot);
            }

            String dateStr = items.get(position).getSentDate();
            try
            {
                sentDate.setText(dateStr.substring(6, 8) + "." + dateStr.substring(4, 6) + "." + dateStr.substring(0, 4)
                        +" "+dateStr.substring(8, 10)+":"+dateStr.substring(10, 12));
            }
            catch(Exception e)
            {
                sentDate.setText("");
            }

            return convertView;
        }

    }// @end of product adapter class.

    /* web service'e baglanti kurulan methodu threadin icerisinde cagiriyoruz. */
    public void startActivityIndicatorWithThread()
    {
        // ==============================================================================================
        // getting ilan details into arraylist.
        // setting up thread.
        viewOrders = new Runnable() {
            public void run()
            {
                getMessageListFromWebService();
            }
        };
        Thread thread = new Thread(null, viewOrders, "MagentoBackground");
        thread.start();
        profilInfoProgress.start();
        // ==============================================================================================
        // @end of the thread declaration.
    }

    public void getMessageListFromWebService()
    {
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser(context);

        // getting JSON string from URL
        JSONArray jsonArray = jParser.getAuthorizedInfoFromUrlToJSONArray(
                WebServiceInfo.getKnetWebServiceLink()+"/API/Member/GetInboxMessageList", MainActivity.getAccessToken());

        // if json is null then there is a problem.
        if(jsonArray == null)
        {
            // if json array is null then print error message.
            runOnUiThread(showAlertMessage);
            runOnUiThread(returnRes);
            return;
        }

        try
        {
            // Eger aranilan kritere gore ilan yok ise hata mesaji basiyoruz.
            if(jsonArray.length() == 0)
            {
                // if json array is null then print error message.
                runOnUiThread(showAlertIlanYokMessage);
                runOnUiThread(returnRes);
                return;
            }

            // looping through All Contacts
            for (int i = 0; i < jsonArray.length(); i++)
            {
                JSONObject c = jsonArray.getJSONObject(i);

                // Storing each json item in variable
                // String id = c.getString(TAG_ID);
                String id = c.getString("Id");
                String sender = c.getString("Sender");
                // String body = c.getString("Body");
                String title = c.getString("Title");
                String sentDate = c.getString("SentDate");
                Boolean isReaded = c.getBoolean("IsRead");

                Message productObject = new Message(id, sender, "", title, sentDate, isReaded);
                productArray.add(productObject);
            }
        }
        catch (Exception e)
        {
            Log.e("BACKGROUND_PROC", e.getMessage());
        }
        runOnUiThread(returnRes);
    }

    // @end of thread.
    private Runnable returnRes = new Runnable() {

        public void run()
        {
            profilInfoProgress.stop();
            adapter.notifyDataSetChanged();// refreshing data over adapter in
                                            // list view.
        }
    };

    // @end of thread.
    private Runnable showAlertMessage = new Runnable() {

        public void run()
        {
            // Bu hata genelde linkteki problemden, servera ulasilamamasindan
            // veya timeouttan meydana gelir.
            Toast.makeText(getApplicationContext(),
                    "Mesajlar alınamadı lütfen daha sonra tekrar deneyiniz.", 
                    Toast.LENGTH_LONG).show();
        }
    };

    private Runnable showAlertIlanYokMessage = new Runnable() {

        public void run()
        {
            // Bu hata aranilan kelimeye gore ilan bulunamazsa gelir.
            Toast.makeText(getApplicationContext(),
                    "Mesajlar bulunamadı.", 
                    Toast.LENGTH_LONG).show();
        }
    };

} 
```

==================================================== =======================

**ActivityB.java** (MesajDetayActivity.java)

```
public class MesajDetayActivity extends TrackedActivity {

    private HoloProgressIndicator profilInfoProgress = null;

    TextView titleTextView = null;
    TextView senderTextView = null;
    TextView dateTextView = null;
    WebView bodyWebView = null;

    Message messageObject = null;

    String messageID = null;

    ImageView kapatButton = null;

    Context context;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mesajdetaylari);

        context = this;

        kapatButton = (ImageView) findViewById(R.id.kapat_button);
        /* kapat button onclick listener. */
        // =================================================================================================================
        kapatButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view)
            {
                // Set vibration on touch.
                KnetGenericClass.vibratePhone(context);

                finish();
            }

        });
        // =================================================================================================================
        //Progress bar.
        profilInfoProgress = (HoloProgressIndicator) findViewById(R.id.profil_info_progress);

        Bundle extras = getIntent().getExtras();
        if(extras != null)
        {
            messageID = extras.getString("messageID");
        }

        titleTextView = (TextView) findViewById(R.id.title_textview);
        senderTextView = (TextView) findViewById(R.id.sender_textview);
        dateTextView = (TextView) findViewById(R.id.date_textview);
        bodyWebView = (WebView) findViewById(R.id.mesaj_webView);

        // Show the ProgressDialog on this thread
        profilInfoProgress.start();

        // Start a new thread that will download all the data
        new MakeItTask().execute();

    }

    // Async task.
    private class MakeItTask extends AsyncTask<String, Void, Object> {
        protected Object doInBackground(String... args)
        {
            Log.i("MyApp", "Background thread starting");

            // This is where you would do all the work of downloading your data
            // getting message detay
            /* connect to web service */
            getMessageDetayFromWebService();

            return null;
        }

        protected void onPostExecute(Object result)
        {
            // Pass the result data back to the main activity
            // TakipListeActivity.this.data = result;
            try
            {
                titleTextView.setText("Başlık: " + messageObject.getTitle());
                senderTextView.setText("Gönderen: " + messageObject.getSender());
                dateTextView.setText("Tarih: " + messageObject.getSentDate().substring(6, 8) + "."
                        + messageObject.getSentDate().substring(4, 6) + "."
                        + messageObject.getSentDate().substring(0, 4));

                if(!messageObject.getBody().contains("img"))
                {
                    bodyWebView.loadDataWithBaseURL(null, messageObject.getBody(), "text/html", "UTF-8", null);
                }

            }
            catch (Exception e)
            {
                Log.e(CONNECTIVITY_SERVICE, "Mesaj Detayi bilgileri basilamadi.");
            }

            profilInfoProgress.stop();
        }
    }

    /* web service'e baglanti kurulan methodu threadin icerisinde cagiriyoruz. */
    public void getMessageDetayFromWebService()
    {
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser(context);

        // getting JSON string from URL
        JSONObject jsonObject = jParser.getAuthorizedInfoFromUrlToJSONObject(
                WebServiceInfo.getKnetWebServiceLink()+"/API/Member/GetInboxMessage/" + messageID, MainActivity.getAccessToken());

        // if json is null then there is a problem.
        if(jsonObject == null)
        {
            return;
        }

        try
        {
            String title = jsonObject.getString("Title");
            String id = jsonObject.getString("Id");
            String sender = jsonObject.getString("Sender");
            String date = jsonObject.getString("SentDate");
            String body = jsonObject.getString("Body");

            messageObject = new Message(id, sender, body, title, date, true);

        }
        catch (Exception e)
        {
            Log.e("BACKGROUND_PROC", e.getMessage());
        }

    }// @end of getIlanDetayFromWebService.

} 
```

**编辑：不仅这两个活动有这个问题，所有活动在某些手机上的行为都相同。**

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-01T22:57:58.007

检查**“设置”** > “**系统**” > “**开发人员选项**” > “**应用程序**”下的“**不保留活动**”是否已启用。

 ******* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T12:59:11.433

Activity 文档 ( [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html) ) 对后台 Activity 的生命周期进行了如下说明：

> 后台活动（对用户不可见且已暂停的活动）不再至关重要，因此系统可以安全地终止其进程以回收其他前台或可见进程的内存。如果它的进程需要被杀死，当用户导航回活动（使其再次在屏幕上可见）时，将使用它之前在 onSaveInstanceState(Bundle) 中提供的 savedInstanceState 调用它的 onCreate(Bundle) 方法，以便它可以在与用户上次离开时​​相同的状态下重新启动。

换句话说，ActivityA 可能在 ActivityB 处于活动状态时被操作系统销毁，也可能不会被操作系统销毁，因此必须在代码中处理这种情况。如果 ActivityA 已被销毁，当用户按下 ActivityB 中的返回按钮时，将调用 onCreate(Bundle)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-01T23:18:43.437

有一个名为“不保留活动”的 Android 开发人员设置。此选项的描述是“用户离开后立即销毁所有活动”。这听起来很好地描述了您所看到的内容，并且由于您只在几部手机上看到它，因此认为这是由非默认系统设置引起的想法似乎是合理的。

理想情况下，您的应用程序仍然可以在这种情况下工作，即使不是最理想的。但是，如果此设置对您的应用程序来说是一个问题，您可能希望为您的用户记录此问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-27T02:32:47.570

您是否尝试过更改`launchmode`Android Manifest 中的 尝试将此添加到您的 Activity 声明中：

```
android:launchMode="singleTask" 
```

接下来，尝试使用`startActivityForResult`, 而不是`startActivity`. 这将强制 Activity A 在 Activity B 完成时调用其`onActivityResult(int, int, Intent)`方法——这可能会跳过对`onCreate`. 然后，在 Activity A 中，实现该方法来做某事（例如打印调试语句）：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    Log.i("Test", "Did this work???");
    //TODO send notification to your server to verify this works?
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-01T03:57:00.507

我认为这种行为没有任何问题。

如果您希望保留 的状态`ActivityA`，请使用 和 的`onSaveInstanceState`方法`onRestoreInstanceState`。有关更多详细信息，请参阅[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)上的活动生命周期。

另请参阅[https://stackoverflow.com/a/10492967/332210](https://stackoverflow.com/a/10492967/332210)以获得更深入的了解。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-01T05:07:43.893

您可以尝试一件事，提供您的布局，然后在??`onCreate()`中完成其余的工作？`onStart()`如果它有效？

像：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.show);
   } 
```

和

```
 @Override
       protected void onStart() {
       // TODO Auto-generated method stub
    super.onStart();
    Log.i(TAG, "On Start .....");

      } 
```

查看[活动生命周期](http://developer.android.com/reference/android/app/Activity.html) ![在此处输入图像描述](../Images/478a5dc3570348df2b14e6ae5035ce02.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-21T14:50:05.793

也许你应该使用

```
Intent startIntent = new Intent(view.getContext(), ActivityB.class); 
startActivity(startIntent); 
finish() ; 
```

和

```
Intent startIntent = new Intent(view.getContext(), ActivityA.class); 
startActivity(startIntent); 
finish() ; 
```

每次后退或前进。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-28T07:50:52.900

它也面临着确切的问题并通过使用`android:launchMode="standard"`in `activity`of解决了问题`manifest`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-01T06:10:28.097

覆盖 Activity A 中的 onStart() 和 onResume 方法并检查问题是否仍然存在。如果可能，请在此处提供您的活动 A 和 B 代码。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-01T19:06:50.977

活动 A 使用布局 R.layout.mesajlar_list

活动 B 使用布局 R.layout.mesajdetaylari

但两者都有以下代码行：

```
kapatButton = (ImageView) findViewById(R.id.kapat_button); 
```

R.id.kapat_button 在哪个布局？在不同的布局中使用相同的 id 是一件非常冒险的事情。我不能保证它会导致您所看到的，但它可能会导致奇怪的行为。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-02T11:01:46.413

我认为这不是因为内存的限制。

[https://www.box.com/s/7pd0as03bb8wwumuc9l9](https://www.box.com/s/7pd0as03bb8wwumuc9l9)

您应该测试这两个活动并检查它是否也在此示例中发生。也请分享您的 AndroidManifest.xml 文件内容，这将有助于调试。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-11-20T00:42:04.653

我最近遇到了这个问题，这让我很生气。我认为该问题围绕 2 个选项解决方案进行检查但无用。

关于此处更正的“不保留活动”设置，我使用此代码检查它是否可选检查（我的测试设备基于版本 2.3.5 自定义并且不显示此选项）：

```
private boolean isAlwaysFinishActivitiesOptionEnabled() {
    int alwaysFinishActivitiesInt = 0;
    if (Build.VERSION.SDK_INT >= 17) {
        alwaysFinishActivitiesInt = Settings.System.getInt(getApplicationContext().getContentResolver(), Settings.Global.ALWAYS_FINISH_ACTIVITIES, 0);
    } else {
        alwaysFinishActivitiesInt = Settings.System.getInt(getApplicationContext().getContentResolver(), Settings.System.ALWAYS_FINISH_ACTIVITIES, 0);
    }

    if (alwaysFinishActivitiesInt == 1) {
        return true;
    } else {
        return false;
    }
} 
```

在我的情况下，结果检查是错误的。我还在运行应用程序时检查内存，但没有任何反应。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-18T06:49:17.093

您可以`android:launchMode="singleTop"`在清单中使用。

```
<activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:launchMode="singleTop"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:theme="@style/AppTheme.NoActionBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>

            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity> 
```******

# c# - 通过代码更新列表框项，其中特定列 = 值 x

> ID：15002535
> 
> 赞同：0
> 
> 时间：2013-02-21T12:42:06.593
> 
> 标签：c#, listbox, refresh, listboxitem

我有一个带有 2 列的列表框的 wpf 表单。

我使用此代码向列表框添加值：

```
playersOnlineList.Items.Add(new { Username = username, Status = "Lobby" }); 
```

我使用此代码从列表框中删除值：

```
playersOnlineList.Items.Remove(new { Username = username, Status = "Lobby" }); 
```

我的问题是如何更新用户名 = x 的“状态”的值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:51:32.517

您可能必须按照以下方式做一些事情：

```
 for (int i = 0; i < playersOnlineList.Items.Count; i++) {
        if (playersOnlineList.Items[i].Username == x) {
            Player p = playersOnlineList.Items[i];
            p.Status = newStatus;
            playersOnlineList.Items[i] = p;
        }
    } 
```

除非我误解了您的问题，否则这应该可以解决您的问题。在这种情况下，重新分配应该可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:59:26.037

第二行将不起作用，因为您正在创建一个新对象，而不是传递要删除的现有对象。您应该创建一个具有 Username 和 Status 属性的类，然后填充`ListBox`using `ItemsSource`：

```
 User user = new User(); //your custom class
            user.Username = username;
            user.Status = "Lobby";
            List<User> source = new List<User>();
            source.Add(user);
            //add more users here

            listBox.ItemsSource = source;
            //removing a user
            source.Remove(user);//if you have the instance
            //if not, find user by username and remove it
            User userToRemove = null;
            foreach (User user in source) {
                if (user.Username == "myUserName") { 
                    userToRemove = user;
                    break;
                }
            }
            if(userToRemove != null)
                source.Remove(userToRemove); 
```

要编辑用户，如果你有实例，只需更改属性，如果没有，根据用户名找到它并更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:02:49.287

问题是您使用的是匿名类型。`Items`列表框集合返回的项目以`object`. 为了访问项目的属性，您需要强制转换它们，因为类型是匿名的，所以您不能这样做。为您的项目创建一个明确的类。

```
class UserStatus
{
    public string Username { get; set; }
    public string Status { get; set; }

    public override bool Equals(object obj)
    {
        UserStatus other = obj as UserStatus;
        return other != null && other.Username == Username && other.Status == Status;
    }

    public override int GetHashCode()
    {
        unchecked {
            int hash = 17;
            hash = hash * 31 + Username == null ? 0 : Username.GetHashCode();
            hash = hash * 31 + Status == null ? 0 : Status.GetHashCode();
            return hash;
        }
    }
} 
```

现在您可以搜索项目的索引

```
for (int i = 0; i < playersOnlineList.Items.Count; i++) {
    var userStatus = (UserStatus)playersOnlineList.Items[i];
    if (userStatus.Username == x) {
        userStatus.Status = newStatus;
        break;
    }
} 
```

# python - 在 Ubuntu 12.04 Python 2.7 和 Python 3.2 中安装 PIL

> ID：15002538
> 
> 赞同：14
> 
> 时间：2013-02-21T12:42:16.253
> 
> 标签：python, python-imaging-library

我正在使用 Ubuntu 12.04 服务器，默认情况下有两个版本的 Python：2.7 和 3.2。当我使用`python setup.py install`终端命令安装 PIL 时，PIL 将与 Python 2.7 一起安装。如何使用 Python 3.2 安装 PIL？因为我使用 Python 3 来编写我的脚本。如果我的 Eclipse 使用 Python 2.7，则成功导入 PIL。但是如果我选择 Python 3 作为我的语法语言，PIL 将无法导入。

P/S：我尝试了以下方法：

*   [枕头 PIL](https://pypi.python.org/pypi/Pillow#downloads) (Pillow-1.7.8.zip )
*   [Aspell PIL](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil) (PIL-1.1.7-py3-source.zip)

**更新：**

使用该`python3`命令会导致错误消息。

示例 1：

```
root@sys:~/Downloads/Pillow-1.7.8# python3.2 setup.py install
Traceback (most recent call last):
  File "setup.py", line 10, in <module>
    from setuptools import Extension, setup, find_packages
ImportError: No module named setuptools 
```

示例 2：

```
root@sys:~/Downloads/Pillow-1.7.8# python3 setup.py install
Traceback (most recent call last):
  File "setup.py", line 10, in <module>
    from setuptools import Extension, setup, find_packages
ImportError: No module named setuptools 
```

## 更新 2

在我运行这个终端命令之后

```
sudo apt-get install python3-setuptools 
```

我已经可以构建 setup.py，但最后出现错误消息。

```
root@sys:~/Downloads/Pillow-1.7.8# python3 setup.py build
running build
running build_py
running build_ext
Traceback (most recent call last):
  File "setup.py", line 469, in <module>
    scripts=glob.glob("Scripts/pil*.py"),
  File "/usr/lib/python3.2/distutils/core.py", line 148, in setup
    dist.run_commands()
  File "/usr/lib/python3.2/distutils/dist.py", line 917, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python3.2/distutils/dist.py", line 936, in run_command
    cmd_obj.run()
  File "/usr/lib/python3.2/distutils/command/build.py", line 126, in run
    self.run_command(cmd_name)
  File "/usr/lib/python3.2/distutils/cmd.py", line 313, in run_command
    self.distribution.run_command(command)
  File "/usr/lib/python3.2/distutils/dist.py", line 936, in run_command
    cmd_obj.run()
  File "/usr/lib/python3.2/distutils/command/build_ext.py", line 344, in run
    self.build_extensions()
  File "setup.py", line 127, in build_extensions
    self.add_multiarch_paths()
  File "setup.py", line 439, in add_multiarch_paths
    '/usr/lib/' + multiarch_path_component)
TypeError: Can't convert 'bytes' object to str implicitly 
```

## 更新 3

[使用https://github.com/python-imaging/Pillow](https://github.com/python-imaging/Pillow)这个文件时的错误信息

```
root@sys:~/Pillow-master# dir
COPYING              Images          map.c       selftest.py
decode.c             _imaging.c      outline.c   setup.py
display.c            _imagingcms.c   path.c      test
docs                 _imagingft.c    PIL         Tests
encode.c             _imagingmath.c  py3.h       Tk
github-comments.txt  _imagingtk.c    README.rst  tox.ini
github-issues.txt    libImaging      Sane
github-watchers.txt  MANIFEST.in     Scripts
root@sys:~/Pillow-master# python3 setup.py build
running build
running build_py
creating build
creating build/lib.linux-x86_64-3.2
creating build/lib.linux-x86_64-3.2/PIL
copying PIL/IcnsImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PpmImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ContainerIO.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageMath.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/SunImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/BufrStubImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/GimpGradientFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageGL.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/JpegImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageDraw.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PngImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/TiffTags.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PcfFontFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImagePalette.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/IcoImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PSDraw.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/CurImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageEnhance.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageDraw2.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/Image.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/FpxImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageWin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/WalImageFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageGrab.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PcdImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/OleFileIO.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/SgiImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageFilter.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/FitsStubImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/XbmImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/GifImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageStat.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageFileIO.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageChops.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/McIdasImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/EpsImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageOps.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/__init__.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/Hdf5StubImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/MpegImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PaletteFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/TarIO.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/FontFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/GimpPaletteFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ArgImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/BmpImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PalmImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/GribStubImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/BdfFontFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ExifTags.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageShow.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/DcxImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/MspImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/GdImageFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/XVThumbImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/GbrImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageSequence.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PcxImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageTransform.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/XpmImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/MicImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageFile.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImagePath.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/_binary.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/TgaImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageTk.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageCms.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageMode.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/WmfImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PsdImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/IptcImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageFont.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PixarImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/TiffImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/FliImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImtImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageQt.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/PdfImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/ImageColor.py -> build/lib.linux-x86_64-3.2/PIL
copying PIL/SpiderImagePlugin.py -> build/lib.linux-x86_64-3.2/PIL
running build_ext
building '_imaging' extension
creating build/temp.linux-x86_64-3.2/libImaging
gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security -Werror=format-security -fPIC -DHAVE_LIBJPEG -DHAVE_LIBZ -I/usr/include/freetype2 -IlibImaging -I/usr/include -I/usr/local/include -I/usr/include/python3.2mu -I/usr/include/x86_64-linux-gnu -c _imaging.c -o build/temp.linux-x86_64-3.2/_imaging.o
_imaging.c:75:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

## 解决了

按照步骤安装

```
sudo aptitude install python3-setuptools
sudo easy_install3 pip
sudo apt-get install python3-dev
# download Pillow's master.zip
wget https://github.com/python-imaging/Pillow/archive/master.zip
sudo unzip master.zip
python3 setup.py build
python3 setup.py install 
```

完毕！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:27:20.583

[（我好像在评论里把东西弄得一团糟，对此感到抱歉，这是一个更好的版本）

该错误清楚地表明您缺少`setuptools`python3。包`python3-setuptools`应该负责（运行`sudo apt-get install python3-setuptools`）。

然后，正如您所注意到的，默认值`PIL`不适用于 python3。[但是，github master 的当前状态`Pillow`](https://github.com/python-imaging/Pillow)确实如此。这将通过使用`python3 setup.py build`and安装`sudo python3 setup.py install`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:38:53.937

您的说明太长且未完全编写脚本，这些更好（相同平台 - 最近的 Debian/Ubuntu）：

```
sudo aptitude install python3-pip git
pip-3.2 install --user git+https://github.com/python-imaging/Pillow 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T11:07:06.863

对于那些在这里让 scipy 在 python3 上使用 PIL（枕头）的人

`import scipy.misc`在执行上面的收据 Chin Ye 之后，我可以通过调整文件中的两行 来获得 scipy.misc.imread 和 scipy.misc.imsave 在发布时可用：

`/usr/lib/python3/dist-packages/scipy/misc/pilutil.py`

在该文件中，替换以下行：

```
import Image
import ImageFilter 
```

成为：

```
from PIL import Image
from PIL import ImageFilter 
```

* * *

然后导入`scipy.misc.__init__`以允许其内容`pilutil.py`起作用（尤其是图像 io - 来自 numpy 数组格式）

这是针对 Ubuntu 12.04 LTS 的，`scipy.__version__ 0.9.0`

（有关调整本身的更多信息，请参阅 PIL 的 Pillow implementationaion 文档）

# javascript - 茉莉花需要sinon.js吗？

> ID：15002541
> 
> 赞同：23
> 
> 时间：2013-02-21T12:42:24.300
> 
> 标签：javascript, unit-testing, jasmine, sinon

我在网上看到人们将[jasmine](http://pivotal.github.com/jasmine/)与[sinon](http://sinonjs.org/)一起使用的示例。但是，茉莉花支持间谍（据我所知，这是诗浓所做的）。那么问题来了，诗浓在使用 Jasmine 时还有用吗？如果诗浓有用，究竟是什么使它成为茉莉花的好补充？

干杯

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T08:46:29.160

不，你不需要诗乃和茉莉一起工作。但是 Sinon spy/mock/stubs 在某些情况下更方便。在 Jasmine 中模拟 setTimeout 时也有一个小错误，它可以与 sinon 一起按预期工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-01T16:26:40.960

我将 Sinon 与 Jasmine 一起使用，因为它具有[fakeServer](http://sinonjs.org/docs/#fakeServer)功能。Sinon 允许我轻松模拟 AJAX HTTP 请求，而无需依赖服务器的状态。当您确实需要微调您的模拟服务时，Sinon 还提供了较低级别的 http 模拟功能。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-18T10:20:56.053

您可以使用 SinonJS 作为 Jasmine 的扩展。Sinon 有一个非常不错的模拟服务器 API，如果你想在没有真正后端的情况下测试 REST 调用，它会非常方便。还有一个很好的文档显示了[SinonJS 与 Jasmine](http://rest-samples.ahus1.de/test/rec_jasmine_sinon.html)的组合。

# d3.js - 如何将文本添加到 D3 旭日形图的中心

> ID：15002548
> 
> 赞同：2
> 
> 时间：2013-02-21T12:42:35.523
> 
> 标签：d3.js, sunburst-diagram

我正在使用可缩放的[旭日形首饰示例](http://bl.ocks.org/mbostock/4348373)，但我正在努力尝试将文本添加到图表的中心并使其仍可缩放。这个想法是，当我单击指示其长度的某个弧时，中心的文本会发生变化。似乎 mouseclick 和 mouseover 的属性消失了。这是我尝试过的：

```
path.append("svg:text")
        .on("click",click)
        .style("font-size","4em")
        .style("font-weight","bold")
        .text(function(d) { return count_function(data); }); 
```

有人可以帮助我了解如何在图表中心显示文本而不丢失点击功能吗？

也许更简单的方法是选择代表圆形中心的“g”，并在图表显示后向其添加文本。我已经尝试过了，但我无法成功地选择这个元素（对不起，我是 D3 的新手），所以回到第一格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:51:35.897

看起来您正试图在元素中插入一个`text`元素`path`。尝试这样的事情：

```
svg.select("g").append("svg:text")
    .on("click",click)
    .style("font-size","4em")
    .style("font-weight","bold")
    .text(function(d) { return count_function(data); }); 
```

# php - PHP - $_POST 变量与具有相同名称的变量混合

> ID：15002549
> 
> 赞同：4
> 
> 时间：2013-02-21T12:42:39.123
> 
> 标签：php

在同一页面上，我有

```
$hello = 'Hello!';
$_POST['hello'] = '123'; 
```

如果我回显 $hello，而不是得到“你好！” 我得到'123'。我应该如何处理同名的变量和 $_POST 变量？

这是一个真正问题的例子：

我有一个看起来像这样的注册表单（这是一个缩小的字段示例）。每个输入字段都有一个标签，标签中的字符串变量与输入同名。

```
<form id="form1" action="post.php">
  <span class="label"><?=$fullname?></span>
  //$fullname='Please enter your name';
  <input name="fullname" id="fullname" type="text">

  <span class="label"><?=$email?></span>
  //$email='Please enter your email';
  <input name="email" id="email" type="text">

  <input name="button1" id="button1" type="submit">
</form> 
```

当我提交表单时，我将其发布到同一页面并显示用户填写的值。只是现在，$fullname 不再显示变量 $fullname 的值，而是显示 $_POST['fullname'] 的值。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T12:46:15.633

可能你已经打开了 register_globals ，这是多年来一直被建议反对的事情:) 详情请参见此处：http: [//php.net/manual/en/security.globals.php](http://php.net/manual/en/security.globals.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T12:46:19.320

问题可能出`register_globals`在 php 的 .ini 文件中。关闭它，重新启动php，它应该是固定的。

试试这个来检查代码执行时的设置：

```
echo ini_get("register_globals"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:46:06.570

您必须在表单声明中设置 method="POST" 属性。并且可能是您启用了 register_globals 选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T12:46:19.187

检查您`php.ini`的`register_globals`设置。它很可能设置为打开，您应该将其关闭。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T12:54:19.130

好吧，如果 register_superglobals 关闭，那么你在你的脚本中做类似的事情

像

```
foreach($_REQUEST as $key => $val) // or $_POST or $_GET
    $$key = $val; 
```

# c++ - C++ 宏和命名空间

> ID：15002550
> 
> 赞同：8
> 
> 时间：2013-02-21T12:42:40.917
> 
> 标签：c++, macros, namespaces

我在命名空间中使用宏时遇到问题。代码是

```
#include <iostream>

namespace a
{
#define MESSAGE_A(message) \
    std::cout << (message) << std::endl;
}

#define MESSAGE_A(message) \
    std::cout << (message) << std::endl;

int main()
{
    //works fine
    MESSAGE_A("Test");
    //invalid
    a::MESSAGE_A("Test")
    return 0;
} 
```

在宏中使用命名空间对象的正确变体是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T12:45:08.147

宏由预处理器处理，它对命名空间一无所知。所以宏没有命名空间，它们只是文本替换。确实不鼓励使用宏，其中一个原因是它们总是污染全局命名空间。

如果您需要打印一条消息，并且需要将其命名空间，只需使用内联函数即可。代码看起来很简单，可以正确内联：

```
namespace a
{
  inline void MESSAGE_A(const char* message) 
  {
    std::cout << message << std::endl;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:44:11.097

不起作用。Macroses 对命名空间一无所知。如果你想使用命名空间 - 你不能使用宏。

# asp.net - ASP.Net 中的 TransferRequest 与 Transfer

> ID：15002551
> 
> 赞同：23
> 
> 时间：2013-02-21T12:42:49.063
> 
> 标签：asp.net, iis-7, transfer

我已经浏览了下面提到的链接，

[iis 论坛](http://forums.iis.net/t/1146511.aspx)和[HttpModules & Server.Transfer/Server.TransferRequest/RewritePath 的问题](https://stackoverflow.com/questions/2254849/asp-net-httpmodules-server-transfer-server-transferrequest-rewritepath-pro)。但无法理解这些传输方法背后的概念。

它们是如何工作的？在不同的情况下，哪一种更受欢迎？

有人可以解释一下asp.net中服务器端传输的TransferRequest vs Transfer方法及其角色吗？

提前致谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-16T12:34:11.280

[`HttpServerUtility.Transfer`](https://msdn.microsoft.com/en-us/library/System.Web.HttpServerUtility.Transfer.aspx)终止当前页面的执行并开始执行提供的 URL。这基本上映射并执行与提供的 url 对应的新 ASP.NET 页面（或提供静态文件）。它在当前请求管道中就地执行此操作，无需将新配置应用到新 url，或为新 url 重新运行 IIS 模块。正因为如此，它非常快，但它也阻止了 TRQ 可能出现的许多情况。

[`HttpServerUtility.TransferRequest`](https://msdn.microsoft.com/en-us/library/System.Web.HttpServerUtility.TransferRequest.aspx)对提供的 URL 执行异步执行。这是一个完整的 IIS 子请求，它允许它重新运行新请求的整个请求管道，就好像它是一个单独的请求一样，为其获取正确的配置，并运行所有正常的 IIS 模块，包括身份验证、授权等。例如，IIS 将对新 url 应用授权规则，而不是以前的 url。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-30T07:12:41.843

[TransferRequest](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpserverutility.transferrequest)重新运行整个请求管道，就好像它是一个单独的请求一样。这意味着重新应用 IIS 和 ASP.NET 模块；将遵守新 URL 的身份验证和授权规则。请注意，TransferRequest 需要 IIS 7+ 的集成管道模式，并且可以传输到 ASP 页面或 XML 文件等其他资源。

[Transfer](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpserverutility.transfer)将执行从一个 ASP 页转移到服务器上的另一个 ASP 页。与 TransferRequest 不同，IIS 和 ASP.NET 不会验证当前用户是否有权查看由 Transfer 方法传递的资源。如果您需要强制重新授权，并且集成管道模式不是一个选项，请调用[Redirect](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpresponse.redirect)而不是 Transfer 方法。重定向触发客户端重定向，以便新请求将受到 IIS 和 ASP.NET 的所有身份验证和授权逻辑。

# android - setPixel 在 android 中不起作用

> ID：15002552
> 
> 赞同：0
> 
> 时间：2013-02-21T12:42:49.120
> 
> 标签：android

我正在使用 setPixel 函数来操作位图，但它不起作用。应用程序崩溃。02-21 13:05:04.582: E/AndroidRuntime(839): java.lang.IllegalStateException: 无法执行活动的方法

```
 public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void function(View view){

    Bitmap img = BitmapFactory.decodeResource(getResources(), R.drawable.test);
    int imgWidth = img.getWidth();
    int imgHeight = img.getHeight();
    for(int x = 0; x < imgWidth; x++){
        for(int y = 0; y < imgHeight; y++){
            int pixColor = img.getPixel(x,y);
            if(pixColor == Color.WHITE){
                img.setPixel(x, y, Color.BLACK);
            }
            else if(pixColor == Color.BLACK){
                img.setPixel(x, y, Color.WHITE);
            }

        }
    }

    ImageView imgView = (ImageView) findViewById(R.id.imageView2);
    imgView.setImageBitmap(img);
    System.out.println("Picture Changed");

}

} 
```

# javascript - 使用javascript在画布上移动图片

> ID：15002553
> 
> 赞同：0
> 
> 时间：2013-02-21T12:42:50.720
> 
> 标签：javascript, html, canvas

我有这个 JS 部分：

```
var layer1 = document.getElementById('layer1');
ctx1 = layer1.getContext('2d');

if (cellId == 'layer1x') {
    x1 = cellValue;
}

if (cellId == 'layer1y') {
    y1 = cellValue;
}

if (cellId == 'layer1z') {}

var item1 = new Image();
item1.src = "images/sheep.png";
item1.addEventListener("load", function () {
    ctx1.drawImage(item1, x1, y1)
}, false); 
```

如何删除现有图像以及如何显示具有新坐标的唯一新图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:44:41.947

您不能“删除”绘制的图像，您可以清除画布。

`ctx.clearRect(X,Y,W,H);`

您可以在此处阅读有关画布的更多信息： [https ://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial)

# java - 在 JPA 中仅获取父对象数据

> ID：15002555
> 
> 赞同：2
> 
> 时间：2013-02-21T12:42:58.047
> 
> 标签：java, jpa

我正在使用 java (Netbeans IDE) 创建宁静的服务。我从两个相关的表中创建了两个实体 claees。而且我还从模式创建了宁静的服务。当我测试子表的 HTTP GET 方法（在本例中为类别）时，它会提供来自子表和父表的数据，但我只需要来自子表的数据以及外键的列值。到目前为止的步骤如下：

我在 mysql 1) 站点表中创建以下两个表

```
 create table `revise`.site
(
    siteId INT not null auto_increment primary key,
    shortName VARCHAR(255),
    longName VARCHAR(1024) ,
    addressLineFirst VARCHAR(2024)l,
    city VARCHAR(255) ,
    state VARCHAR(255),
    pincode VARCHAR(255),
    country VARCHAR(255) ,
    phoneNo VARCHAR(255),
    mobileNo VARCHAR(255),
    fax VARCHAR(255),
    emailId VARCHAR(255),
    logoSmall VARCHAR(1024),
    logoBig VARCHAR(1024),
    activeStatus VARCHAR(255),
    action VARCHAR(255)
) 
```

2) 类别表

```
 create table `revise`.category
(
    categoryId INT not null auto_increment primary key,
    siteId INT, 
    shortName VARCHAR(255),
    longName VARCHAR(1024),
    description VARCHAR(8000),
    logoSmall VARCHAR(8000),
    logoBig VARCHAR(8000),
    CONSTRAINT fk_Site FOREIGN KEY (siteId) REFERENCES site(siteId) on delete cascade on update cascade
) 
```

从这两个表中，我创建了以下两个实体类 1) Site.java

```
 @Entity
@Table(name = "site")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Site.findAll", query = "SELECT s FROM Site s"),
    @NamedQuery(name = "Site.findBySiteId", query = "SELECT s FROM Site s WHERE s.siteId = :siteId"),
    @NamedQuery(name = "Site.findByShortName", query = "SELECT s FROM Site s WHERE s.shortName = :shortName"),
    @NamedQuery(name = "Site.findByLongName", query = "SELECT s FROM Site s WHERE s.longName = :longName"),
    @NamedQuery(name = "Site.findByAddressLineFirst", query = "SELECT s FROM Site s WHERE s.addressLineFirst = :addressLineFirst"),
    @NamedQuery(name = "Site.findByCity", query = "SELECT s FROM Site s WHERE s.city = :city"),
    @NamedQuery(name = "Site.findByState", query = "SELECT s FROM Site s WHERE s.state = :state"),
    @NamedQuery(name = "Site.findByPincode", query = "SELECT s FROM Site s WHERE s.pincode = :pincode"),
    @NamedQuery(name = "Site.findByCountry", query = "SELECT s FROM Site s WHERE s.country = :country"),
    @NamedQuery(name = "Site.findByPhoneNo", query = "SELECT s FROM Site s WHERE s.phoneNo = :phoneNo"),
    @NamedQuery(name = "Site.findByMobileNo", query = "SELECT s FROM Site s WHERE s.mobileNo = :mobileNo"),
    @NamedQuery(name = "Site.findByFax", query = "SELECT s FROM Site s WHERE s.fax = :fax"),
    @NamedQuery(name = "Site.findByEmailId", query = "SELECT s FROM Site s WHERE s.emailId = :emailId"),
    @NamedQuery(name = "Site.findByLogoSmall", query = "SELECT s FROM Site s WHERE s.logoSmall = :logoSmall"),
    @NamedQuery(name = "Site.findByLogoBig", query = "SELECT s FROM Site s WHERE s.logoBig = :logoBig"),
    @NamedQuery(name = "Site.findByActiveStatus", query = "SELECT s FROM Site s WHERE s.activeStatus = :activeStatus"),
    @NamedQuery(name = "Site.findByAction", query = "SELECT s FROM Site s WHERE s.action = :action")})
public class Site implements Serializable {
    @OneToMany(mappedBy = "siteId", fetch = FetchType.EAGER)
    private List<Category> categoryList;
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "siteId")
    private Integer siteId;
    @Size(max = 255)
    @Column(name = "shortName")
    private String shortName;
    @Size(max = 1024)
    @Column(name = "longName")
    private String longName;
    @Size(max = 2024)
    @Column(name = "addressLineFirst")
    private String addressLineFirst;
    @Size(max = 255)
    @Column(name = "city")
    private String city;
    @Size(max = 255)
    @Column(name = "state")
    private String state;
    @Size(max = 255)
    @Column(name = "pincode")
    private String pincode;
    @Size(max = 255)
    @Column(name = "country")
    private String country;
    @Size(max = 255)
    @Column(name = "phoneNo")
    private String phoneNo;
    @Size(max = 255)
    @Column(name = "mobileNo")
    private String mobileNo;
    // @Pattern(regexp="^\\(?(\\d{3})\\)?[- ]?(\\d{3})[- ]?(\\d{4})$", message="Invalid phone/fax format, should be as xxx-xxx-xxxx")//if the field contains phone or fax number consider using this annotation to enforce field validation
    @Size(max = 255)
    @Column(name = "fax")
    private String fax;
    @Size(max = 255)
    @Column(name = "emailId")
    private String emailId;
    @Size(max = 1024)
    @Column(name = "logoSmall")
    private String logoSmall;
    @Size(max = 1024)
    @Column(name = "logoBig")
    private String logoBig;
    @Size(max = 255)
    @Column(name = "activeStatus")
    private String activeStatus;
    @Size(max = 255)
    @Column(name = "action")
    private String action;

    public Site() {
    }

    public Site(Integer siteId) {
        this.siteId = siteId;
    }

    public Integer getSiteId() {
        return siteId;
    }

    public void setSiteId(Integer siteId) {
        this.siteId = siteId;
    }

    public String getShortName() {
        return shortName;
    }

    public void setShortName(String shortName) {
        this.shortName = shortName;
    }

    public String getLongName() {
        return longName;
    }

    public void setLongName(String longName) {
        this.longName = longName;
    }

    public String getAddressLineFirst() {
        return addressLineFirst;
    }

    public void setAddressLineFirst(String addressLineFirst) {
        this.addressLineFirst = addressLineFirst;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }

    public String getPincode() {
        return pincode;
    }

    public void setPincode(String pincode) {
        this.pincode = pincode;
    }

    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

    public String getPhoneNo() {
        return phoneNo;
    }

    public void setPhoneNo(String phoneNo) {
        this.phoneNo = phoneNo;
    }

    public String getMobileNo() {
        return mobileNo;
    }

    public void setMobileNo(String mobileNo) {
        this.mobileNo = mobileNo;
    }

    public String getFax() {
        return fax;
    }

    public void setFax(String fax) {
        this.fax = fax;
    }

    public String getEmailId() {
        return emailId;
    }

    public void setEmailId(String emailId) {
        this.emailId = emailId;
    }

    public String getLogoSmall() {
        return logoSmall;
    }

    public void setLogoSmall(String logoSmall) {
        this.logoSmall = logoSmall;
    }

    public String getLogoBig() {
        return logoBig;
    }

    public void setLogoBig(String logoBig) {
        this.logoBig = logoBig;
    }

    public String getActiveStatus() {
        return activeStatus;
    }

    public void setActiveStatus(String activeStatus) {
        this.activeStatus = activeStatus;
    }

    public String getAction() {
        return action;
    }

    public void setAction(String action) {
        this.action = action;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (siteId != null ? siteId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Site)) {
            return false;
        }
        Site other = (Site) object;
        if ((this.siteId == null && other.siteId != null) || (this.siteId != null && !this.siteId.equals(other.siteId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.ikanksha.reviseplus.api.entity.Site[ siteId=" + siteId + " ]";
    }
} 
```

2) 类别.java

```
 @Entity
@Table(name = "category")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Category.findAll", query = "SELECT c FROM Category c"),
    @NamedQuery(name = "Category.findByCategoryId", query = "SELECT c FROM Category c WHERE c.categoryId = :categoryId"),
    @NamedQuery(name = "Category.findByShortName", query = "SELECT c FROM Category c WHERE c.shortName = :shortName"),
    @NamedQuery(name = "Category.findByLongName", query = "SELECT c FROM Category c WHERE c.longName = :longName"),
    @NamedQuery(name = "Category.findByDescription", query = "SELECT c FROM Category c WHERE c.description = :description"),
    @NamedQuery(name = "Category.findByLogoSmall", query = "SELECT c FROM Category c WHERE c.logoSmall = :logoSmall"),
    @NamedQuery(name = "Category.findByLogoBig", query = "SELECT c FROM Category c WHERE c.logoBig = :logoBig")})
public class Category implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "categoryId")
    private Integer categoryId;
    @Size(max = 255)
    @Column(name = "shortName")
    private String shortName;
    @Size(max = 1024)
    @Column(name = "longName")
    private String longName;
    @Size(max = 8000)
    @Column(name = "description")
    private String description;
    @Size(max = 8000)
    @Column(name = "logoSmall")
    private String logoSmall;
    @Size(max = 8000)
    @Column(name = "logoBig")
    private String logoBig;
    @OneToMany(mappedBy = "categoryId", fetch = FetchType.EAGER)
    private List<Topic> topicList;
    @JoinColumn(name = "siteId", referencedColumnName = "siteId")
    @ManyToOne(fetch = FetchType.EAGER)
    private Site siteId;

    public Category() {
    }

    public Category(Integer categoryId) {
        this.categoryId = categoryId;
    }

    public Integer getCategoryId() {
        return categoryId;
    }

    public void setCategoryId(Integer categoryId) {
        this.categoryId = categoryId;
    }

    public String getShortName() {
        return shortName;
    }

    public void setShortName(String shortName) {
        this.shortName = shortName;
    }

    public String getLongName() {
        return longName;
    }

    public void setLongName(String longName) {
        this.longName = longName;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getLogoSmall() {
        return logoSmall;
    }

    public void setLogoSmall(String logoSmall) {
        this.logoSmall = logoSmall;
    }

    public String getLogoBig() {
        return logoBig;
    }

    public void setLogoBig(String logoBig) {
        this.logoBig = logoBig;
    }

    public Site getSiteId() {
        return siteId;
    }

    public void setSiteId(Site siteId) {
        this.siteId = siteId;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (categoryId != null ? categoryId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Category)) {
            return false;
        }
        Category other = (Category) object;
        if ((this.categoryId == null && other.categoryId != null) || (this.categoryId != null && !this.categoryId.equals(other.categoryId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.ikanksha.reviseplus.api.entity.Category[ categoryId=" + categoryId + " ]";
    }

} 
```

我得到以下 json 数据作为请求

```
http://localhost:8080/ReviseAPIDemo-war/webresources/categories/1

{
  "categoryId": "1",
  "description": "fdgfd",
  "logoBig": "dfgf",
  "logoSmall": "fgdf",
  "longName": "lnhdr",
  "shortName": "shrt",
  "siteId": {
    "addressLineFirst": "Vijapurroad",
    "city": "Solapur",
    "country": "India",
    "emailId": "soni@dhb.com",
    "fax": "834343443",
    "logoBig": "biglogo",
    "logoSmall": "small",
    "longName": "DHB Soni College",
    "mobileNo": "9898123844",
    "phoneNo": "23203361",
    "pincode": "413004",
    "shortName": "DHB",
    "siteId": "1",
    "state": "Maharashtra"
  } 
```

}

但我需要回应

```
 {
      "categoryId": "1",
      "description": "fdgfd",
      "logoBig": "dfgf",
      "logoSmall": "fgdf",
      "longName": "lnhdr",
      "shortName": "shrt",
      "siteId": "1",

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:00:40.023

您可以做的事情是加载 Category 实体（在您的 JAX-RS 资源中？）从相应的 Site 读取 Id，然后创建一个所有属性为 null 的新 Site 对象，设置正确的 siteId，然后将其存储在 Category 对象中. 然后 JSON 编组器应该只返回 id。

# java - JNLP 解析或读取文件时出错

> ID：15002559
> 
> 赞同：1
> 
> 时间：2013-02-21T12:43:22.523
> 
> 标签：java, file, jnlp, java-web-start

我有一个 jnlp 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="file:///homes/rm3710/SelfAssessment" href="selfAssessment.jnlp">
    <information>
        <title>Dynamic Tree Demo</title>

        <offline-allowed/>
    </information>
    <resources>
        <!-- Application Resources -->
        <j2se version="1.6+" href=
           "http://java.sun.com/products/autodl/j2se"/>
        <jar href="test.jar"
            main="true" />

    </resources>
    <application-desc
         name="Dynamic Tree Demo Application"
         main-class="logic.MyApplication"
         width="300"
         height="300">
     </application-desc>
     <update check="background"/>
</jnlp> 
```

我已将此文件、html 文件和包含我的 swing 应用程序的 test.jar 放入一个文件夹中。我正在尝试使用 Java WebStart。当我单击启动按钮时，出现以下错误消息

```
net.sourceforge.jnlp.LaunchException: Fatal: Read Error: Could not
read or parse the JNLP file.    at
net.sourceforge.jnlp.Launcher.fromUrl(Launcher.java:491)    at
net.sourceforge.jnlp.Launcher.launch(Launcher.java:283)     at
net.sourceforge.jnlp.runtime.Boot.run(Boot.java:202)    at
net.sourceforge.jnlp.runtime.Boot.run(Boot.java:51)     at
java.security.AccessController.doPrivileged(Native Method)  at
net.sourceforge.jnlp.runtime.Boot.main(Boot.java:168) Caused by:
java.io.IOException: /homes/rm3710/SelfAssessment/Untitled Document
1/selfAssessment.jnlp (Not a directory)     at
net.sourceforge.jnlp.JNLPFile.openURL(JNLPFile.java:282)    at
net.sourceforge.jnlp.JNLPFile.<init>(JNLPFile.java:212)     at
net.sourceforge.jnlp.JNLPFile.<init>(JNLPFile.java:188)     at
net.sourceforge.jnlp.JNLPFile.<init>(JNLPFile.java:173)     at
net.sourceforge.jnlp.JNLPFile.<init>(JNLPFile.java:159)     at
net.sourceforge.jnlp.Launcher.fromUrl(Launcher.java:477)    ... 5 more
Caused by:  java.io.IOException: /homes/rm3710/SelfAssessment/Untitled
Document 1/selfAssessment.jnlp (Not a directory)    at
net.sourceforge.jnlp.JNLPFile.openURL(JNLPFile.java:282)    at
net.sourceforge.jnlp.JNLPFile.<init>(JNLPFile.java:212)     at
net.sourceforge.jnlp.JNLPFile.<init>(JNLPFile.java:188)     at
net.sourceforge.jnlp.JNLPFile.<init>(JNLPFile.java:173)     at
net.sourceforge.jnlp.JNLPFile.<init>(JNLPFile.java:159)     at
net.sourceforge.jnlp.Launcher.fromUrl(Launcher.java:477)    at
net.sourceforge.jnlp.Launcher.launch(Launcher.java:283)     at
net.sourceforge.jnlp.runtime.Boot.run(Boot.java:202)    at
net.sourceforge.jnlp.runtime.Boot.run(Boot.java:51)     at
java.security.AccessController.doPrivileged(Native Method)  at
net.sourceforge.jnlp.runtime.Boot.main(Boot.java:168) 
```

# sql - DELETE QUERY 第一次运行缓慢，但第二次（在相同条件下）运行很快 - 如何在第一次运行时使查询快速运行？

> ID：15002561
> 
> 赞同：2
> 
> 时间：2013-02-21T12:43:26.050
> 
> 标签：sql, oracle

考虑表：

```
Table Name:ORDER
Columns: (ID (PK), ORDER_NUM, ORDER_STATUS, etc...)
Index(ORDER_IDX) exists on (ORDER_NUM, ORDER_STATUS) together.
There are various FKs too, on which Indexes exist as well.
There are about 2 million rows in the table. 
```

考虑 SQL 查询：

```
DELETE from ORDER where ORDER_NUM=234234; 
```

对于特定的 ORDER_NUM 值，DELETE 查询第一次运行非常慢（删除 200 行几乎需要 5 秒）。

但是，如果我回滚并针对**相同**的 ORDER_NUM 再次运行 DELETE Query，DELETE QUERY 现在会在 200 毫秒内运行。

因此，对于提供给此查询的任何**新**ORDER_NUM - 查询运行速度非常慢。

**我可以做些什么来第一次固定查询？我必须重建索引吗？还是别的什么？**

*我正在通过 Oracle SQL 客户端工具（如 TOAD/SQL-Developer）对此进行测试——在实际使用它的 Web 应用程序中看到这种缓慢的行为之后。*

**编辑>>>**
***SET AUTOTRACE ON 结果***

**QUERY 首次运行时**

```
 3  user calls
           0  physical read total multi block requests
     4915200  physical read total bytes
     4915200  cell physical IO interconnect bytes
           0  commit cleanout failures: block lost
           0  IMU commits
           1  IMU Flushes
           0  IMU contention
           0  IMU bind flushes
           0  IMU mbu flush 
```

**查询运行时的第二次**

```
 3  user calls
           0  physical read total multi block requests
           0  physical read total bytes
           0  cell physical IO interconnect bytes
           0  commit cleanout failures: block lost
           0  IMU commits
           1  IMU Flushes
           0  IMU contention
           0  IMU bind flushes
           0  IMU mbu flush 
```

**解释计划**- 在第一次和第二次运行中完全相同 - 如下所示：

```
 ID     OPERATION          NAME       ROWS    Bytes    Cost(%CPU)     Time<br>
=======================================================================================
    0      DELETE Statement               49     2891     41   (0)       00:00:01
    1      DELETE             ORDER      
    2      INDEX RANGE SCAN   ORDER_IDX   49     2891     3    (0)       00:00:01 
```

您可以在第一次看到非常高的物理读取。
我能做些什么来帮助解决这种情况吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T11:22:41.267

理解你的问题的关键是理解语句是如何执行的。DELETE 是一个相对昂贵的操作，并且经常导致性能问题。下面是 Oracle 执行 DML 语句的方式：

1.  执行 DML 的第一步是在数据库缓冲区缓存中找到所需的块（如果它们已经存在）或将它们从数据文件复制到缓冲区缓存中（慢）。除此之外，撤消段的空块也被复制到缓冲区缓存中。
2.  然后，锁定受影响的行和索引。
3.  之后，生成重做：生成描述对数据块和撤消块所做的所有更改的更改向量。对于 DELETE，要写入撤消块的更改向量是整行。
4.  然后，执行删除。整行从数据块复制到撤消块，数据块中的行被删除。例如，DELETE 比 INSERT 生成更多的撤消数据，因为整行的内容都被复制（因此其他会话可以读取原始数据或删除可以回滚）。

您的查询几乎可以肯定第二次运行得更快，**因为所有相关块都已在数据库缓冲区缓存**中。当然，数据库缓冲区缓存中可以保存的块越多，需要的 I/O 就越少。**确保您的 SGA 大小合适。**

所以对于你的问题，我们要看看以下几点：

*   最重要的是，**您的查询是否使用您的索引？**索引是否有效？为您的 DELETE 查询运行 EXPLAIN PLAN 并检查是否使用了 ORDER_NUM 的索引以及如何访问您的数据。
*   桌子上有任何**限制吗？**如果存在带有“ON DELETE CASCADE”的约束，则可能有其他表受您的 DELETE 影响。

因此，对于您的问题，查看执行计划 (EXPLAIN PLAN) 可能是您最好的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T13:55:32.437

除了缓冲区缓存问题之外，提高性能的一种方法是促进具有相同 ORDER_NUM 的记录的物理集群。仅当您最常按 ORDER_NUM 选择记录组时，这才有意义，但可以通过在散列集群中创建表（以及也包含 ORDER_NUM 的任何子表）来实现。

好处是带有 ORDER_NUM 谓词的查询将访问更少的表段块，因此即使需要物理 i/o，您也需要更少的块。此外，通过确保每个缓存块包含更高比例的您感兴趣的行，您将更有效地使用缓冲区缓存，并且您将缓存更少的块。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T09:07:23.520

> “你可以在第一次看到非常高的物理读取。我可以为这种情况做点什么吗？”

您的查询必须先找到记录，然后才能删除它们。如果记录在内存中速度很快，如果它们在磁盘上，则速度会慢几个*数量级*。 [找到更多。](http://www.eecs.berkeley.edu/~rcs/research/interactive_latency.html "每个程序员都应该知道的延迟数字") 所以这就是正在发生的事情。第一次物理读取行时速度很慢，但现在这些行位于 DB 缓冲区缓存中，因此后续读取速度更快。

你可以做些什么来提高第一次读取的性能？嗯，这取决于时间去哪里。尽管有几个人问你没有提供[解释计划](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9010.htm#i2061796 "EXPLAIN PLAN 的 Oracle SQL 参考条目")。在不知道访问路径的情况下，我们无法为您提供太多具体建议。所以这里有几个指针。

`physical read total multi block requests`为零，因此所有`physical read total bytes`代表单个块，即索引读取。这需要很长时间，这表明该指数可能很差。要检查的一件事是索引的集群因子：如果集群因子接近块数，索引范围扫描将非常快。您的删除使用的索引可能具有较差的聚类因子。这就是您需要解释计划的原因：这样您就可以调查索引的质量。阅读 Tom Kyte 的这篇文章，[了解有关索引集群的更多信息](http://www.oracle.com/technetwork/issue-archive/2012/12-sep/o52asktom-1735913.html "Tom Kyte 谈指数聚类因子")。

如果您的查询具有较差的聚类因子，那么您可以调整多少是有限度的。你不能修饰谚语。删除需要检索整行，因此您必须读取表。所以也许最简单的选择就是加快表格读取速度：

```
alter session enable parallel dml;

delete /*+ no_index (orders) 
           parallel */
from orders
where order_num=234234; 
```

您使用的是 11g，因此您不需要[在 PARALLEL 提示中指定对象](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#SQLRF50801)。请注意，您确实需要 Enterprise Edition 才能进行并行操作。

* * *

## 回答 #4

> 赞同：-14
> 
> 时间：2013-02-25T22:20:44.773

这可能是由表/索引碎片引起的，并且当您通过索引访问数据时，更有可能是索引。

对于表级别，您将需要以下两个步骤，仅用于索引 (2)：

(1) 处理表碎片：`alter table "ORDER" move`

(2) 重建索引：`alter index "<YourIndex>" rebuild`

如果您正在执行大量删除和插入，或者导致行迁移的更新，这可能适用于您。

# netbeans-7 - netbeans 中的单个页面性能

> ID：15002563
> 
> 赞同：0
> 
> 时间：2013-02-21T12:43:42.633
> 
> 标签：netbeans-7

嗨，Iam Chandrashekhar，

我正在使用 NetBeans 7.2.1。我在这方面面临一个问题。我的 jsp 文件有 4000 多行。当我试图修改该文件时，它可能会被挂起。

你能请任何人帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:33:08.770

尝试重新安装net-beans，它肯定会工作！

或者

右键net-beans7.2.1工具栏添加点击Memory工具栏添加内存工具双击该工具释放垃圾回收

# c# - 使用 Twitterizer 显示出站推文，而不是回复

> ID：15002572
> 
> 赞同：0
> 
> 时间：2013-02-21T12:44:05.587
> 
> 标签：c#, twitter, twitterizer

我正在使用 twitterizer 在网站上显示推文，但问题是显示所有推文，我只想显示用户的推文而不是回复，我使用的代码是：

```
if (!Page.IsPostBack)
        {
            try
            {

            UserTimelineOptions options = new UserTimelineOptions();
            options.ScreenName = "XXXXX";

            TwitterStatusCollection tweets = TwitterTimeline.UserTimeline(options).ResponseObject;
            int counter = 0;
            string TwitterCode = "";     

            foreach (TwitterStatus thisStatus in tweets)
            {
                if (counter < 7)
                {
                    DateTime completeDate = thisStatus.CreatedDate;
                    string complete = completeDate.ToLongDateString();
                    TwitterCode += "<li><p ><a href=\"http://twitter.com/" + thisStatus.User.ScreenName + "\" target=\"_blank\" >" + Server.HtmlEncode(thisStatus.Text) + "<br/><span style=\"color:#E87D05;\">" +  complete + "</a></p></li>";
                    counter += 1;

                }
                else
                {
                    break;
                }

            }

            ltlTweets.Text = TwitterCode;

        }
        catch (Exception ex)
        {

        }

        } 
```

上面的代码工作正常，但我想避免回复，我该怎么做我已经浏览了 twitteriser 的文档但找不到任何解决方案，任何建议或帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:45:14.763

The `UserTimeLineOptions` object allows you to exclude retweets vie the `IncludeRetweets` property. Like so:

```
UserTimelineOptions options = new UserTimelineOptions()
{
    ScreenName = "myname",
    UserId = 123456789,
    IncludeRetweets = false,
    Count = 10,
}; 
```

The `UserId` helps the twitterAPI figure out that you are only requesting tweets made by that specific combination of `UserId` and `ScreenName` (i.e your account).

I'm not sure if it is completely necessary, but I also send an `OAuthTokens` object in with the request.

```
OAuthTokens token = new OAuthTokens()
{
    AccessToken = "xx",
    AccessTokenSecret = "xx",
    ConsumerKey = "xx",
    ConsumerSecret = "xx"
}; 
```

You would get hold of this information by creating an app under your twitter account at [http://dev.twitter.com](http://dev.twitter.com).

Then you would include the token in your call:

```
TwitterTimeline.UserTimeline(token, options); 
```

Hope this helps =)

# java - 如何通过 Soap 将 Java 类连接到 InDesign cs6 Server？（不要使用命令行参数。）

> ID：15002577
> 
> 赞同：3
> 
> 时间：2013-02-21T12:44:22.620
> 
> 标签：java, soap, indesign-server

如何通过 Soap 将 Java 类（客户端）连接到 InDesign cs6 服务器？（不要使用命令行参数。）

# java - TextView setText 在 LinearLayout 中不起作用

> ID：15002579
> 
> 赞同：2
> 
> 时间：2013-02-21T12:44:31.123
> 
> 标签：java, android, listview

我正在尝试修改此代码以满足我的需求：[http ://udinic.wordpress.com/2011/09/03/expanding-listview-items/](http://udinic.wordpress.com/2011/09/03/expanding-listview-items/)

我想更改它，以便根据用户的选择显示不同的 TextView。我意识到，使用 if 子句，显然它似乎工作正常。之后我想动态更改 TextViews 的文本，但失败了。setText 仅适用于第一项。第二个总是显示 XML 中设置的静态文本...

谢谢！

列表视图上的侦听器：

```
 list.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, final View view, int position, long id) {

            ((TextView) findViewById(R.id.title1)).setText("Custom1");
            ((TextView) findViewById(R.id.title2)).setText("Custom2");
            String selectedFromList =(String) (list.getItemAtPosition(position));

            if (selectedFromList.equals("udini1")) {
                View toolbar1 = view.findViewById(R.id.toolbar1);

                // Creating the expand animation for the item
                ExpandAnimation expandAni1 = new ExpandAnimation(toolbar1, 500);

                // Start the animation on the toolbar
                toolbar1.startAnimation(expandAni1);

            }

            if (selectedFromList.equals("udini2")) {
                View toolbar2 = view.findViewById(R.id.toolbar2);

                // Creating the expand animation for the item
                ExpandAnimation expandAni2 = new ExpandAnimation(toolbar2, 500);

                // Start the animation on the toolbar
                toolbar2.startAnimation(expandAni2);

            }

        }
    });
} 
```

list_item.xml

```
 <LinearLayout android:id="@+id/toolbar1"
      android:layout_marginBottom="-50dip"
      android:visibility="gone"
      android:layout_height="50dip"
      android:layout_width="fill_parent">
     <TextView android:id="@+id/title1"
          android:padding="20dip"
          android:focusable="false"
          android:focusableInTouchMode="false"
          android:layout_width="fill_parent"
          android:text="Dummy1"
          android:layout_height="wrap_content"/>
</LinearLayout>

    <LinearLayout android:id="@+id/toolbar2"
      android:layout_marginBottom="-50dip"
      android:visibility="gone"
      android:layout_height="50dip"
      android:layout_width="fill_parent">
    <TextView android:id="@+id/title2"
          android:padding="20dip"
          android:focusable="false"
          android:focusableInTouchMode="false"
          android:layout_width="fill_parent"
          android:text="Dummy2"
          android:layout_height="wrap_content"/>
</LinearLayout> 
```

自定义列表适配器：

```
 class CustomListAdapter extends ArrayAdapter<String> {
        public CustomListAdapter(Context context, int textViewResourceId) {
            super(context, textViewResourceId);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            if (convertView == null) {
                convertView = getLayoutInflater().inflate(R.layout.list_item, null);
            }

            ((TextView)convertView.findViewById(R.id.title)).setText(getItem(position));

            // Resets the toolbar to be closed
            View toolbar = convertView.findViewById(R.id.toolbar1);
            ((LinearLayout.LayoutParams) toolbar.getLayoutParams()).bottomMargin = -50;
            toolbar.setVisibility(View.GONE);

            return convertView;
        }
    } 
```

动画类：

```
public class ExpandAnimation extends Animation {
    private View mAnimatedView;
    private LayoutParams mViewLayoutParams;
    private int mMarginStart, mMarginEnd;
    private boolean mIsVisibleAfter = false;
    private boolean mWasEndedAlready = false;
    /**
     * Initialize the animation
     * @param view The layout we want to animate
     * @param duration The duration of the animation, in ms
     */
    public ExpandAnimation(View view, int duration) {
        setDuration(duration);
        mAnimatedView = view;
        mViewLayoutParams = (LayoutParams) view.getLayoutParams();

        // decide to show or hide the view
        mIsVisibleAfter = (view.getVisibility() == View.VISIBLE);

        mMarginStart = mViewLayoutParams.bottomMargin;
        mMarginEnd = (mMarginStart == 0 ? (0- view.getHeight()) : 0);

        view.setVisibility(View.VISIBLE);
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        super.applyTransformation(interpolatedTime, t);

        if (interpolatedTime < 1.0f) {

            // Calculating the new bottom margin, and setting it
            mViewLayoutParams.bottomMargin = mMarginStart
                    + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);

            // Invalidating the layout, making us seeing the changes we made
            mAnimatedView.requestLayout();

        // Making sure we didn't run the ending before (it happens!)
        } else if (!mWasEndedAlready) {
            mViewLayoutParams.bottomMargin = mMarginEnd;
            mAnimatedView.requestLayout();

            if (mIsVisibleAfter) {
                mAnimatedView.setVisibility(View.GONE);
            }
            mWasEndedAlready = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:52:19.930

尝试改变

```
((TextView) findViewById(R.id.title1)).setText("Custom1");
((TextView) findViewById(R.id.title2)).setText("Custom2"); 
```

对此

```
((TextView) view.findViewById(R.id.title1)).setText("Custom1");
((TextView) view.findViewById(R.id.title2)).setText("Custom2"); 
```

您当前拥有的行仅获得 ID 为 title1 和 title2 的第一个视图。使用给定`view`的按 id 查找视图，您将在单击的视图中获得第一个 id 为 title1*的*视图。

# android - 使用 4 个可调整大小的按钮进行布局

> ID：15002587
> 
> 赞同：1
> 
> 时间：2013-02-21T12:44:49.583
> 
> 标签：android, android-layout

我一直在寻找最好的方法来做这样的布局：

![在此处输入图像描述](../Images/44741f0f2d8ad7a5c6ecaa5fca9a24bd.png)

底部的四个按钮应尽可能占据更多空间，但每个按钮的大小必须与其他按钮相同。我尝试使用 TableLayout 和一些 LinearLayout 嫁接在一起，但我无法得到我想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:02:43.997

代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="vertical" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button4"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />
    </LinearLayout>
</LinearLayout> 
```

![在此处输入图像描述](../Images/3e769605f2f40ddae694c091a64efae9.png)

# javascript - 如何使用 javascript 更新选定的共享点列表项，

> ID：15002590
> 
> 赞同：2
> 
> 时间：2013-02-21T12:44:51.903
> 
> 标签：javascript, sharepoint, updates

嗨，这在单击按钮时效果很好；它循环视图中的选定项目，提醒 id 并调用 updateListItem 函数

```
function ViewSelectedItems(){
var selectedItems = SP.ListOperation.Selection.getSelectedItems();for (var i = 0; i < selectedItems.length; i++) { alert("Item with Id = " + selectedItems[i].id+ " is selected");  updateListItem(selectedItems[i].id)}
                 window.location.href = window.location.href;
} 
```

updateListItem 报告 onQuerySucceeded 但字段值未设置为新值。请问有什么想法吗？

```
 function updateListItem(passedid) {

 var siteUrl = '/supportdepts/hr/';

 var newval = 999;

    var clientContext = new SP.ClientContext(siteUrl);
    var oList = clientContext.get_web().get_lists().getByTitle('Staffing Control Panel Request');
    this.oListItem = oList.getItemById(passedid);
    oListItem.set_item("RefNumber", newval);
    oListItem.update();
    clientContext.executeQueryAsync(Function.createDelegate(this, this.onQuerySucceeded), 

    Function.createDelegate(this, this.onQueryFailed));
}

function onQuerySucceeded() {
    alert('Item updated!');
}

function onQueryFailed(sender, args) {
    alert('Request failed. ' + args.get_message() + '\n' + args.get_stackTrace());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-20T10:15:34.617

我对这个案例不是很熟悉，但我知道当这种问题发生时，即使代码看起来没问题，应该导航代码的值可能是错误的。换句话说，您使用的列表名称可能不是真实名称，而是显示名称。您应该确保您使用的名称是列表和字段的真实模式名称，而不仅仅是显示名称。

我希望我能以某种方式提供帮助。祝你好运！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T11:34:45.843

您是否尝试过刷新浏览器？

相同的代码对我有用，但我需要刷新浏览器才能查看项目的新值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T14:09:06.650

好吧，我遇到了同样的问题，这是因为页面刷新发生在异步事件完成之前，这意味着上下文丢失了。这样该项目就不会被保存，即使在调用之前一切看起来都很完美`executeQueryAsync`。如果您删除刷新，它应该可以工作。

# mysql - Mysql：将带符号的负值添加到无符号的负结果中

> ID：15002600
> 
> 赞同：1
> 
> 时间：2013-02-21T12:45:19.467
> 
> 标签：mysql

在mysql中减去两个无符号值时，结果也将是无符号的。从 5.5.5 开始，如果结果为负，mysql 会抛出错误。

但是，就我而言，我需要否定结果。我已经了解到，这可以通过设置 sql_mode='NO_UNSIGNED_SUBTRACTION' 来实现。

取下表：

```
DROP TABLE IF EXISTS `test`;
CREATE TABLE `test` (
    `s`  INT SIGNED,
    `u1` INT UNSIGNED,
    `u2` INT UNSIGNED
);

INSERT INTO `test` VALUES (-1, 0, 1);

SET sql_mode='NO_UNSIGNED_SUBTRACTION';
SELECT `u1` - `u2` FROM `test`; 
```

SELECT 的结果是 -1，正如预期的那样。但如果我这样做，

```
SELECT `s` + `u1` FROM `test`; 
```

这在数学上是相同的，我仍然收到错误“BIGINT UNSIGNED 值超出范围”（用 mysql 5.5.29 测试）。

我知道，这可以通过强制转换无符号值来解决，但我想知道，是否有像减法这样的全局解决方案，我不必更改所有受影响的查询。

毕竟我想知道，为什么 NO_UNSIGNED_SUBTRACTION 没有涵盖这个负值的添加。这是有意的还是错误的？

# apache - 需要apache来显示unix目录

> ID：15002603
> 
> 赞同：0
> 
> 时间：2013-02-21T12:45:34.773
> 
> 标签：apache

我在 unixserverA 上运行 apache，我希望使用此 URL 在浏览器中查看 unix [/app1/bea/hello.txt] 上的文件`http://unixserverA/sg/hello.txt`

请帮助我需要在 httpd.conf 中进行哪些更改。

我在我的 httpd.conf 中包含了一个 conf 文件 [bulk.conf]，并且该 bulk.conf 文件具有以下无用的条目。

ScriptAlias /sg/ "/app1/bea/"

以下是我在浏览器中看到的错误

> 内部服务器错误 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 user@unixserverA 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

错误日志显示：

> [Thu Feb 21 04:57:45 2013] [error] (2)No such file or directory: exec of '/appl/bea/hello.txt' failed
> [Thu Feb 21 04:57:45 2013] [error] [client 109.71.70.209] 脚本头过早结束：hello.txt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:44:24.290

当您使用[ScriptAlias](http://httpd.apache.org/docs/2.2/en/mod/mod_alias.html#scriptalias)指令时，您指示 Apache 将所选目录中的任何文件作为脚本或可执行文件处理。正如[Apache 教程：使用 CGI 的动态内容](http://httpd.apache.org/docs/2.2/en/howto/cgi.html)所解释的那样，此类脚本有望为 HTTP 响应生成有效输出，包括 HTTP 标头。例如，有一个`printenv.pl`与 Apache 捆绑在一起的示例脚本：

```
#!/usr/bin/perl
##
##  printenv -- demo CGI program which just prints its environment
##

print "Content-type: text/plain; charset=iso-8859-1\n\n";
foreach $var (sort(keys(%ENV))) {
    $val = $ENV{$var};
    $val =~ s|\n|\\n|g;
    $val =~ s|"|\\"|g;
    print "${var}=\"${val}\"\n";
} 
```

作为可执行文件，您还可以从控制台运行它：

```
./printenv.pl 
```

我不知道`hello.txt`包含什么，但`*.txt`扩展表明它根本不是一个程序。如果它毕竟*是*一个程序，请确保：

*   它至少打印一个`Content-Type`标题和一个空行。
*   它具有可执行标志：`chmod a+x hello.txt`

# c# - 在 web.config 中动态设置值？

> ID：15002604
> 
> 赞同：2
> 
> 时间：2013-02-21T12:45:35.023
> 
> 标签：c#, asp.net

在我的 web.config 我有类似的东西：

```
 <connectionStrings>
    <add name="Entities1" connectionString="metadata=res://*/CData.csdl|res://*/CData.ssdl|res://*/CData.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ser;initial catalog=dda;persist security info=True;user id=s;password=a;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="Entities2" connectionString="metadata=res://*/M.AuthModel.csdl|res://*/M.AuthModel.ssdl|res://*/M.AuthModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ser;initial catalog=dda;persist security info=True;user id=s;password=a;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings> 
```

我有数据库密码之类的东西。

每次我在我的项目中创建一个设置时，我都会得到 s.th. 像：

```
<setting name="db_username" serializeAs="String">
        <value>s</value>
</setting> 
```

是否可以`setting`在`connectionString`上面使用它，以便我可以更改例如两者的用户名，只需更改`setting`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:50:41.150

您将无法更新 web.config，但您可以有一个获取连接字符串的方法。

然后，此方法可以从 web.config 文件中获取连接字符串，获取项目设置（在本例中为用户名）并在返回之前将其放入连接字符串中。

这会是一个合适的选择吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:54:06.923

在连接字符串中，您可以使用##username##之类的变量，而不是使用用户名。然后从代码中获取此连接字符串以及设置文件中的用户名，并将##username##替换为设置文件用户名。

使用此连接字符串进行连接。那是你想要的吗？

# ios - NSOperation 有多个长任务

> ID：15002606
> 
> 赞同：2
> 
> 时间：2013-02-21T12:45:37.553
> 
> 标签：ios, nsoperation, nsoperationqueue

在我的理解中，一个长期运行的任务`NSOperation`应该在它的`main`函数中实现，一旦`NSOperation`被添加到一个`NSOperationQueue`.

这对我来说很好，直到现在，我`NSOperation`的主要任务不止一项。

第一个任务是解析文档（打开文档时应该只应用一次）。

第二个任务是附加`NSData`到文档（对于打开的文档可以多次调用）。

我能想到的唯一解决方案是将两个任务都移到`main`函数中，并在运行时决定执行哪个任务：

```
- (void)main
{
    @autoreleasepool
    {
        if(firstTaskTsDone)
        {
            [self doSecondTask];
        }
        else
        {    
            [self doFirstTask];
            firstTaskTsDone = YES;
        }
    }
} 
```

但我想一定有更好的方法来实现这一点？

还：如何使用并发操作获得相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:23:13.250

`NSOperation`您应该为第二个任务创建第二个。您可以使用：

```
[secondOperation addDependency:firstOperation]; 
```

使第二道工序的开始依赖于第一道工序的结束。然后，您可以将这两个操作添加到`NSOperationQueue`. 在第二个操作中，您可以使用它的`dependencies`属性来访问第一个操作并提取第二个操作可能需要完成其任务的任何数据。

另一种方法可能是将其配置`NSOperationQueue`为串行队列：

```
[operationQueue setMaxConcurrentOperationCount:1]; 
```

在这种情况下，您不需要设置依赖项，并且添加第一个和第二个`NSOperation`的顺序将决定它们运行的​​顺序。

**如何使用并发操作获得相同的结果？**

`NSOperationQueue``NSOperations`主要目的是使非并发任务并发。如果您的代码还没有涉及某种并发任务，那么就没有理由使用 concurrent `NSOperation`。

并发任务的一个常见示例是`NSURLConnection`请求。这通常包含在并发中`NSOperation`，因此它可以`NSOperationQueue`作为较长进程的一部分添加到其中，其他进程`NSOperations`将添加到队列中以处理请求的结果。

当方法返回时，正常`NSOperation`完成。`main`如果您在连接完成之前开始`NSURLConnection`异步，`main`您将立即返回。通过将其配置为并发操作，您负责通知`NSOperationQueue`连接实际完成的时间。

# c++ - 如果我只有指向基类的指针，如何推断模板类型

> ID：15002608
> 
> 赞同：2
> 
> 时间：2013-02-21T12:45:43.387
> 
> 标签：c++

我怎样才能实现功能`Foo`以分派到正确的功能？

以下代码重现了该问题，并在注释中获得了一些附加信息。

```
#include <string>

class Base  
{
public:
virtual ~Base(){};
};

template<typename T>
class Derived : public Base 
{};

void DoSomething(const Derived<std::string> &){};
void DoSomething(const Derived<int> &){};

void Foo(Base *test)
{
    // How to call correct DoSomething method?
    // (I can't change class Base, but I know that test points to some instance of class Derived)?
    // if(test points to an instance of Derived<int>)
    //     call void DoSomething(const Derived<int> &){};
    // else if(test points to an instance of Derived<std::string>)
    //     call void DoSomething(const Derived<std::string> &){};
}

int main(int argc, char* argv[])
{
    Base *test = new Derived<int>;

    Foo(test);

    delete test;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:52:15.703

```
void Foo(Base *test)
{
  if (auto* p = dynamic_cast<Derived<int>*>(test))
    DoSomething(*p);
  else if (auto* p = dynamic_cast<Derived<string>*>(test))
    DoSomething(*p);
  else
    throw runtime_error("oops");
} 
```

这是有效的，因为如果类型不正确，dynamic_cast 返回 nullptr。上面的代码是 C++11，但如果你用明显的类型替换“自动”类型，它将是 C++98（如果有很多情况，我会使用宏）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T13:01:38.633

至于OO，只有派生类自己知道它是谁，做什么。

```
#include <string>
class Base {}
class Mid : public Base
{
public:
    virtual void DoSomething() = 0;
};

template<typename T>
class Derived : public Mid 
{
public:
    virtual void DoSomething() {}
};

template<> void Derived<std::string>::DoSomething(){}
template<> void Derived<int>::DoSomething(){}

void Foo(Base *test)
{
    dynamic_cast<Mid*>(test)->DoSomething(); //TODO check the return of dynamic_cast
}

int main(int argc, char* argv[])
{
    Base *test = new Derived<int>;

    Foo(test);

    delete test;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T13:49:17.960

```
#include <string>

class Base  
{};

class DerivedBase : public Base 
{
public:
    virtual void DoSomething() = 0;
};

template<typename T>
class Derived : public DerivedBase
{};

void Foo(Base *test)
{
   if (auto* p = dynamic_cast<DerivedBase*>(test))
       p->DoSomething();
   else
       throw runtime_error("oops");
}

int main(int argc, char* argv[])
{
   Base *test = new Derived<int>;

   Foo(test);

   delete test;
   return 0;
} 
```

如果你声明一个中间类，你可以使用多态而不改变`Base`. 您只需要做一个，但每次您想使用新类型作为模板参数时`dynamic_cast<>`都不必更改，从而让您的代码尊重开放/封闭原则。`Foo()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T12:56:35.460

> 如何调用正确的 DoSomething 方法？

最好利用多态在 C++ 中的工作原理，而不是编写一些基于强制转换的调度函数。几个选择：

*   在类中声明`DoSomething`为公共纯虚方法`Base`。该模板将提供实现。
*   定义`DoSomething`为类中的公共非虚拟方法`Base`。该实现调用了一些私有的纯虚拟方法。模板再次提供了这个虚拟方法的实现。

# php - 收到新订单时添加声音

> ID：15002609
> 
> 赞同：1
> 
> 时间：2013-02-21T12:46:01.137
> 
> 标签：php, javascript, jquery, html

当我收到新订单时，我需要帮助来添加声音，我有 1 分钟的自动刷新，而且我有嵌入的声音。但我只想在没有每次刷新都有新订单的情况下播放该声音，而且我现在不知道如何制作它。

```
$query="select * from Order where Stare=0 order by ID_Order desc";
    $result = mysql_query($query)
            or die("query failed: " . mysql_error());   
        while ($row = mysql_fetch_array($result))
        {
            $id_order=$row['ID_Order'];
            $id_oferta=$row['ID_Oferta'];
            $nume=$row['Nume'];
            $prenume=$row['Prenume'];
            $nume_tot=' '.$nume.' '.$prenume.'';
            echo'<tr><td>'.$id_order.'</td>
                     <td>'.$id_oferta.'</td>
                     <td>'.$nume_tot.'</td>
                </tr>';

                 echo'   <embed src="sounds/button-9.mp3" autostart="true" hidden="true" loop="true" name="jukebox"> ';

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:53:23.623

您需要保存上次查询的状态并将其与当前查询进行比较。

您可以为此使用会话：

```
// at the top of your script
sesstion_start();

  // in your loop
  $last_order = ID_of_the_first_row_found;    // only save the first row ID, use a boolean or counter to keep track of that

// after your loop
if (!isset($_SESSION['last_order']) || $last_order !== $_SESSION['last_order'])
{
  // add the sound
}
$_SESSION['last_order'] = $last_order; 
```

理想情况下，您会使用 ajax 在 javascript 中进行刷新，这样您就不必刷新整个页面并获得更好的用户体验。

# android - android应用程序中的多个数据库

> ID：15002615
> 
> 赞同：0
> 
> 时间：2013-02-21T12:46:12.463
> 
> 标签：android, sqlite, database-design

我有一个“数据查看”应用程序，我希望用户能够在登录活动中根据其名称选择他们查看的数据库。我的数据库是在 sqlite 中创建的，并被复制到应用程序中。但是，我在动态选择我想要的数据库时遇到了问题，因为我的 contentProvider 在运行时加载，而不是在第一次调用数据库时加载。此外，我不想拥有多个数据库类，因为我不知道用户将使用多少个数据集。

我的问题是：是否可以从应用程序本身更改我的应用程序使用的数据库？我是否需要一次加载所有数据库，如果需要，有没有办法在不知道现在有多少的情况下这样做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:17:06.543

对于那些感兴趣的人，我使用多个表实现了一个解决方案，我使用这种方法以编程方式创建和调用这些表：[Android：我可以将一个 SQLiteOpenHelper 类用于多个数据库文件吗？](https://stackoverflow.com/questions/4234030/android-can-i-use-one-sqliteopenhelper-class-for-multiple-database-files).

它不像拥有多个数据库那样优雅，但至少它允许我发送另一个表，告诉应用程序数据库具有哪些表，并且通过适当的命名约定，我可以将表组视为单独的数据库。

# gcc - 如何使用 gcc 向量执行布尔运算，如正常值？

> ID：15002616
> 
> 赞同：0
> 
> 时间：2013-02-21T12:46:12.147
> 
> 标签：gcc, boolean, simd

对于正常值，`1`用于表示真，而`0`对于假：

```
float a = 1.0f;
float b = 2.0f;
float c = (a > b);  // this will be 0.0f 
```

但是对于一个向量，`1111...111`（32个二进制1）用于表示真而`0`为假。对于浮点数，32 个二进制 1 是 -nan（不是带减号的数字）：

```
typedef float v4 __attribute__((vector_size(sizeof(float)*4)));
v4 a = {1, 2, 3, 4};
v4 b = {0 ,1, 4, 5};
v4 c = (a > b); // this becomes { -nan, -nan, 0.0f, 0.0f } 
```

**我的问题是：**`{ 1.0f, 1.0f, 0.0f, 0.0f }`是否有可能以“矢量化”的方式 “转换”c ？

事实上，我想`max(min(value, maximum), minimal)`为像素的 RGB 做“clamp”（）。如果以上无法实现，还有其他以矢量化方式进行钳位的好方法吗？

PS：我更喜欢***非****内在的*方式。

# c# - 如何获得两个数据表之间的差异

> ID：15002623
> 
> 赞同：22
> 
> 时间：2013-02-21T12:46:25.890
> 
> 标签：c#, linq, datatable

我有这两个数据表，我想了解它们之间的区别。这是一个例子：

```
Table1
-------------------------
ID  |   Name 
--------------------------
 1  |  A
 2  |  B
 3  |  C
--------------------------

Table2
-------------------------
ID  |   Name 
--------------------------
 1  |  A
 2  |  B
-------------------------- 
```

我只想将结果作为 table1 中的数据而不是 table2 (table1-table2)

```
ResultTable
-------------------------
ID  |   Name 
--------------------------
 3  |  C
-------------------------- 
```

我尝试通过 Linq 使用这两个类似的解决方案，但它总是返回 table1 而不是 table1-table2。这是第一个解决方案：

```
DataTable table1= ds.Tables["table1"];
DataTable table2= ds.Tables["table2"];
var diff= table1.AsEnumerable().Except(table2.AsEnumerable(),DataRowComparer.Default); 
```

第二种解决方案：

```
var dtOne = table1.AsEnumerable();
var dtTwo = table2.AsEnumerable();
var difference = dtOne.Except(dtTwo); 
```

那么，错在哪里呢？非常感谢您的所有回答。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T12:58:00.357

你可以试试下面的代码...

```
table1.AsEnumerable().Where(
    r =>!table2.AsEnumerable().Select(x=>x["ID"]).ToList().Contains(r["ID"])).ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-03T04:02:57.160

我刚刚经历了这个，想分享我的发现。对于我的应用程序，它是一种数据同步机制，但我认为您会看到这如何应用于原始问题。

就我而言，我有一个`DataTable`代表我**上次**数据上传的数据，并且在将来的某个时候，我需要获取数据的**当前**状态并且只上传差异。

```
//  get the Current state of the data
DataTable dtCurrent = GetCurrentData();

//  get the Last uploaded data
DataTable dtLast = GetLastUploadData();
dtLast.AcceptChanges();

//  the table meant to hold only the differences
DataTable dtChanges = null;

//  merge the Current DataTable into the Last DataTable, 
//  with preserve changes set to TRUE
dtLast.Merge(dtCurrent, true);

//  invoke GetChanges() with DataRowState.Unchanged
//    !! this is the key !!
//    the rows with RowState == DataRowState.Unchanged 
//    are the differences between the 2 tables
dtChanges = dtLast.GetChanges(DataRowState.Unchanged); 
```

我希望这有帮助。我为此奋斗了几个小时，在interwebz上发现了很多假线索，最后`RowStates`在合并了几种不同的方式后进行了比较

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:01:12.370

我将尝试在列级别而不是 DataTable 上执行此操作。

```
IEnumerable<int> id_table1 = table1.AsEnumerable().Select(val=> (int)val["ID"]);
IEnumerable<int> id_table2  = table2.AsEnumerable().Select(val=> (int)val["ID"]);
IEnumerable<int> id_notinTable1= id_table2.Except(id_table1); 
```

只需`.Select()`在您的答案中添加一个...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-13T11:08:22.497

Try below, this is pretty basic. Merge two sets together, and get the difference. If the sets dont align up properly, then this will not work. Trying to Test the same

```
DataSet firstDsData = new DataSet();
DataSet secondDsData = new DataSet();
DataSet finalDsData = new DataSet();
DataSet DifferenceDataSet = new DataSet();
finalDsData.Merge(firstDsData);
finalDsData.AcceptChanges();
finalDsData.Merge(secondDsData);
DifferenceDataSet = finalDsData.GetChanges(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-27T10:33:59.700

尝试这个

```
DataTable dtmismatch = Table1.AsEnumerable().Except(Table2.AsEnumerable(), DataRowComparer.Default).CopyToDataTable<DataRow>(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T13:10:48.627

尝试以下方法：

初始化：

```
var columnId = new DataColumn("ID", typeof (int));
var columnName = new DataColumn("Name", typeof (string));
var table1 = new DataTable();
table1.Columns.AddRange(new[] {columnId, columnName});
table1.PrimaryKey = new[] {columnId};
table1.Rows.Add(1, "A");
table1.Rows.Add(2, "B");
table1.Rows.Add(3, "C");

var table2 = table1.Clone();
table2.Rows.Add(1, "A");
table2.Rows.Add(2, "B");
table2.Rows.Add(4, "D"); 
```

解决方案：

```
var table3 = table1.Copy();
table3.AcceptChanges();
table3.Merge(table2);

var distinctRows = from row in table3.AsEnumerable()
                   where row.RowState != DataRowState.Modified
                   select row;

var distintTable = distinctRows.CopyToDataTable(); 
```

当 table2 中存在 table1 中不存在的新行时，上述解决方案也适用。

`distintTable`包含**C**和**D**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-13T12:25:06.223

试试下面，这是非常基本的。将两组合并在一起，并获得差异。如果集合没有正确对齐，那么这将不起作用。

```
DataSet firstDsData = new DataSet();
DataSet secondDsData = new DataSet();
DataSet finalDsData = new DataSet();
DataSet DifferenceDataSet = new DataSet();
finalDsData.Merge(firstDsData);
finalDsData.AcceptChanges();
finalDsData.Merge(secondDsData);
DifferenceDataSet = finalDsData.GetChanges(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-12-21T09:06:32.983

```
Try This ...

    public DataTable getDiffRecords(DataTable dtDataOne, DataTable dtDataTwo)
    {
        DataTable returnTable = new DataTable("returnTable");

        using (DataSet ds = new DataSet())
        {
            ds.Tables.AddRange(new DataTable[] { dtDataOne.Copy(), dtDataTwo.Copy() });

            DataColumn[] firstColumns = new DataColumn[ds.Tables[0].Columns.Count];
            for (int i = 0; i < firstColumns.Length; i++)
            {
                firstColumns[i] = ds.Tables[0].Columns[i];
            }

            DataColumn[] secondColumns = new DataColumn[ds.Tables[1].Columns.Count];
            for (int i = 0; i < secondColumns.Length; i++)
            {
                secondColumns[i] = ds.Tables[1].Columns[i];
            }

            DataRelation r1 = new DataRelation(string.Empty, firstColumns, secondColumns, false);
            ds.Relations.Add(r1);

            DataRelation r2 = new DataRelation(string.Empty, secondColumns, firstColumns, false);
            ds.Relations.Add(r2);

            for (int i = 0; i < dtDataOne.Columns.Count; i++)
            {
                returnTable.Columns.Add(dtDataOne.Columns[i].ColumnName, dtDataOne.Columns[i].DataType);
            }

            returnTable.BeginLoadData();
            foreach (DataRow parentrow in ds.Tables[0].Rows)
            {
                DataRow[] childrows = parentrow.GetChildRows(r1);
                if (childrows == null || childrows.Length == 0)
                    returnTable.LoadDataRow(parentrow.ItemArray, true);
            }

            foreach (DataRow parentrow in ds.Tables[1].Rows)
            {
                DataRow[] childrows = parentrow.GetChildRows(r2);
                if (childrows == null || childrows.Length == 0)
                    returnTable.LoadDataRow(parentrow.ItemArray, true);
            }
            returnTable.EndLoadData();
        }
        return returnTable;
    } 
```

# javascript - 使用javascript删除html表中的行数

> ID：15002625
> 
> 赞同：0
> 
> 时间：2013-02-21T12:46:29.800
> 
> 标签：javascript, html

每次删除现有 reocds 时动态添加行数不起作用，只有一个新行正在创建。这里我尝试创建新的 3 行。请帮帮我。

```
<TABLE id="dataTable" width="350px" border="1">      
</TABLE>

function addRow(tableID) 
        {     
            var table = document.getElementById(tableID);                
            deleteRow(tableID);
            for(i=0;i<3;i++)
            {
              var rowCount = table.rows.length;
              var row = table.insertRow(rowCount);
              var cell0 = row.insertCell(i);
              var element0 = document.createElement("input");
              element0.type = "text";
              element0.name = "txtbox[]";
              cell0.appendChild(element0);

              var cell1 = row.insertCell(i+1);
              var element1 = document.createElement("input");
              element1.type = "text";
              element1.name = "txtbox[]";
              element1.value = tableID+"_"+rowCount+"_newschedule";
              cell1.appendChild(element1);
           }    
        }

        function deleteRow(tableID) {
            try 
             {
                var table = document.getElementById(tableID);
                var rowCount = table.rows.length;                
                for(i =(rowCount-1);i>=0;i--)
                 {
                   table.deleteRow(i);
                 }

              }
           catch(e)
             {                    
             }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:53:22.183

试试这个

```
function addRow(tableID) {
            var table = document.getElementById(tableID);
            deleteRow(tableID);
            for (i = 0; i < 3; i++) {
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);

                var cell0 = row.insertCell(0);
                var element0 = document.createElement("input");
                element0.type = "text";
                element0.name = "txtbox[]";
                cell0.appendChild(element0);

                var cell1 = row.insertCell(1);
                var element1 = document.createElement("input");
                element1.type = "text";
                element1.name = "txtbox[]";
                element1.value = tableID + "_" + rowCount + "_newschedule";

                cell1.appendChild(element1);
            }
        } 
```

* * *

这两行是错误的

```
var cell0 = row.insertCell(i);
var cell1 = row.insertCell(i+1); 
```

因为 insertCell(i) 需要将单元格的索引（TD）添加到行（TR）中，但是在第一次迭代之后你`i`变成 1 然后你尝试在索引 1 处插入单元格，然后在 0 处插入一个单元格然后你得到一个索引错误。

# actionscript-3 - 如何避免多个精灵表？

> ID：15002626
> 
> 赞同：0
> 
> 时间：2013-02-21T12:46:31.523
> 
> 标签：actionscript-3, sprite-sheet, starling-framework

在 starling 中，如果使用 BitmapText 而不是传统文本，它会更快。除了一个问题之外，这很好。现在，我正在制作的精灵表是用一个 Fla 制作的。我刚刚从 Flash IDE 创建了该表。

然而，位图文本是使用 BMFont 之类的工具生成的。生成它自己的精灵表。现在，想象一下我有三四种类型的文本。同样出于某种原因，我有多个 Sprite 资产表。

不建议在 starling 中更改精灵表。所以我想知道如果你有多个 png 和随附的 XML 文件，如何将东西打包到一个精灵表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:38:00.270

我使用[纹理打包器](http://www.codeandweb.com/texturepacker)。这是一个商业工具，但免费版本可以满足您的需求。它可以输出与 Starling 兼容的图集，该图集将结合您的不同精灵表。

# python - 使用 Python 访问 Google 日历 API

> ID：15002633
> 
> 赞同：2
> 
> 时间：2013-02-21T12:46:52.687
> 
> 标签：python, google-calendar-api

我目前正在开发一个简单的原生 Python 应用程序来与我的 Google 日历交互。为了做到这一点，感谢 Google Python 库，我第一次使用了 Google Calendar API。

但是，尽管有文档，但在我的日历中插入一个新事件时，我还是陷入了僵局。这是我用于连接和执行请求的代码的一部分：

```
import sys
...
import httplib2
from apiclient.discovery import build
from oauth2client.file import Storage
from oauth2client.client import AccessTokenRefreshError
from oauth2client.client import flow_from_clientsecrets
from oauth2client.tools import run

...

flow = flow_from_clientsecrets('client_secrets.json',
    scope='https://www.googleapis.com/auth/calendar',
    redirect_uri='http://localhost')

storage = Storage('credentials.dat')
credentials = storage.get()
if credentials is None or credentials.invalid:
  credentials = run(flow, storage)

http = httplib2.Http()
http = credentials.authorize(http)
service = build('calendar', 'v3', http=http)

try:
  event = {
    "start": "2013-02-20T09:00:00.000+01:00",
    "end": "2013-02-20T11:00:00.000+01:00",
    "summary": "New event",
    "location": "Paris, FRANCE"
  }
  service.events().insert(calendarId='primary', body=event).execute()
  print "END"
except AccessTokenRefreshError:
  print ('Credentials have been revoked') 
```

一旦执行，这就是我得到的：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "dailyLimitExceededUnreg",
    "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.",
    "extendedHelp": "https://code.google.com/apis/console"
   }
  ],
  "code": 403,
  "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup."
 }
} 
```

到目前为止，我已经尝试了很多东西，包括我在 Google Calendar API 的参考文档中找到的所有代码示例，但没有任何改变。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T04:09:16.260

我用几乎相同的代码遇到了同样的问题。尝试将此行添加到您的 client_secrets.json 文件中：“access_type”：“offline”

这将确保您获得一个刷新令牌，而不是一个小时后过期的令牌。

此处的详细信息：[Google Calendar API v3 - 如何获取刷新令牌（Python）](https://stackoverflow.com/questions/8546907/google-calendar-api-v3-how-to-obtain-a-refresh-token-python)

# css - 在 CSS 菜单上添加图标

> ID：15002634
> 
> 赞同：1
> 
> 时间：2013-02-21T12:47:01.127
> 
> 标签：css, menu, icons

我试图在我的菜单上插入一个图标，我正在使用下一个菜单： [菜单 css3](http://www.htmldrive.net/items/show/913/Multi-Level-Drop-Down-Menu-Navigation-with-CSS3)

它是一个多级下拉菜单。我想在任何级别插入图标

```
<div id="navmenu">
<ul>
<li><a href="#">Three Levels</a>
        <ul>
        <li><a href="#">Level 1</a>
                <ul>
                <li><a href="#">Level 2</a></li>
                </ul>
        </li>
        <li><a href="#">Level 1 op2</a></li>
        </ul>
</ul>
</div> 
```

我想从 css 向我的菜单添加图标，你认为最好的方法是什么？

如果您能给我看一个简单的代码示例，我将不胜感激

tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:49:27.117

除非您想要背景图像或精灵，否则添加图标的最佳方法是使用`<img src="" width="" height"" alt"">`标签。

您应该在`<a></a>`标签之间插入图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:49:39.597

您可以将类附加到`li`元素：

```
<li class="background">
    <a href="#">Level 2</a>
</li> 
```

**CSS：**

```
.background { 
   background: url('yourImage.png') no-repeat;
} 
```

**或将其直接应用于`li`标签：**

# sdl - 2 个键同时 SDL 代码块

> ID：15002641
> 
> 赞同：1
> 
> 时间：2013-02-21T12:47:33.980
> 
> 标签：sdl, codeblocks

所以，我正在用 C 编写一个choplifter，我的问题是：如何使用 SDL 管理同时按下的两个键？我尝试了两个开关，但没有什么可做的，它不起作用：/

是否可以使用 SDL 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:18:03.460

一个例子：如果你试图读取两者是否同时`'a'`被`'b'`按下，你可以像往常一样运行一个循环来检查事件并调用布尔值`a_true`并`b_true`在循环结束时检查两者是否为真. 您可以通过按键检查使它们为真，也可以通过按键释放检查使它们为假。没有代码，我认为没有人可以给出更具描述性的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:35:35.493

当我这样做时，我个人喜欢使用 SDL_GetKeyState 手动检查键盘上的每个键，使用类似于以下代码的代码：

```
int *keystates;

keystates = SDL_GetKeyState(NULL);
if (keystates[SDLK_a]) {
    a_key_pressed = true;
} else {
    a_key_pressed = false;
}
if (keystates[SDLK_b]) {
    b_key_pressed = true;
} else {
    b_key_pressed = false;
} 
```

SDL 中所有键名的完整列表可在[http://www.libsdl.org/docs/html/sdlkey.html#AEN4720获得](http://www.libsdl.org/docs/html/sdlkey.html#AEN4720)

理想情况下，您可以将其作为一个函数来轻松检查任何键，如下所示：（未经测试，但概念是正确的）

```
BOOL CheckKey(int keyname) {
    int *keystates = SDL_GetKeyState(NULL);
    if (keystates[keyname]) {
        return TRUE;
    }
    return FALSE;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T12:31:59.080

如果您想要支持按 CTRL 和另一个按钮（例如 CTRL+A），则可以使用 unicode。优点是使用非常简单，并且与 AZERTY 键盘兼容。因此，如果您想这样做以支持 CTRL+某事，我建议使用它。但是，对于任何其他用途，它都不起作用，因此请使用其他答案之一。这是一个关于如何使用它的例子：

```
switch(event.type){
    case SDL_KEYDOWN:
        SDL_EnableUNICODE(1);
        switch(event.key.keysym.unicode){
            case 1:   //CTRL+A
                //code
                break;
            case 97:  //A
                //code
                break;
        }
} 
```

要获取每个键组合的代码，请在确保代码中没有任何代码之后在程序中编写此代码`SDL_EnableKeyRepeat`（或者如果有，请`//`在其前面临时插入，否则您将获得长时间的重复相同的代码）：

```
fprintf(stderr,"%d",event.key.keysym.unicode); 
```

并且相关组合的代码位于与可执行文件相同的文件夹中的文件 stderr.txt 中。

# c# - 监控一个dll

> ID：15002650
> 
> 赞同：0
> 
> 时间：2013-02-21T12:48:14.497
> 
> 标签：c#, dll, monitoring

我正在使用两个使用相同 dll 文件的程序。第一个程序的代码丢失了，第二个程序是我正在编写的。有问题的 dll 用作某种包装 dll

好吧，这两个程序大部分时间都很好。但是有时会发生冲突，因此程序会停止。通过反复试验，我现在确信它与调用此 dll 的那两个程序有关（仅作为记录，还有第三个程序使用该 dll，但我们禁用了该程序）。它必须与两个程序如何使用dll有关。

所以我想知道，是否有一些工具可以让我监控 dll 并告诉我它是如何被调用的；
调用了哪些函数；显示参数；如果它不是 void 返回的类型和结果是什么。

通常我会通过代码一步一步地通过视觉工作室跟踪来做到这一点。但是由于第一个程序（包括那个 dll）的代码丢失了。我无法跟踪它，我想调试发生了什么，然后如果我知道错误情况，然后在我的新程序中构建一些东西以防止这种情况再次发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:14:18.077

如果此 DLL 是 .NET 的，那么您可以使用 .NET Reflector 或 dotPeek (www.jetbrains.com) 对其进行反编译。然后您可以添加您的跟踪代码并再次编译它。您还可以使用 PostSharp ( [http://www.sharpcrafters.com](http://www.sharpcrafters.com) ) 添加跟踪代码。

如果它不是 .NET dll，那么您仍然可以使用任何其他汇编器调试器来调试它，即[http://www.ollydbg.de](http://www.ollydbg.de)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:40:39.510

如果您有源代码和 BIN 目录中的 .pdb 文件，那么您可以通过该代码进行调试。但是，您需要在 Visual Studio 中启用外部代码调试。

然后，您可以在菜单 Debug--> Windows --> Modules 中检查 dll。

导航到 dll 并查看符号文件是否有任何问题。

# javascript - 获取 iframe 内输入字段的值

> ID：15002652
> 
> 赞同：29
> 
> 时间：2013-02-21T12:48:16.933
> 
> 标签：javascript, html, iframe

我正在创建一个仅使用 Javascript 的表单。我正在尝试使用 Javascript 来获取`iframe`. 是否可以获得内部字段的值`iframe`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-23T15:33:13.067

如果框架站点位于不同的域中，则无法*直接*从远程 iframe 读取值。即便如此，答案是肯定的：通过您自己的域代理框架站点，仍然可以获得该值。

例如，在我网站的 HTML 页面中，我有一个 iFrame，其内容来自另一个网站。iFrame 内容是单个选择字段。

我需要能够读取我网站上的选定值。换句话说，我需要在我自己的应用程序中使用来自另一个域的选择列表。我无法控制任何服务器设置。

因此，最初我们可能会想做这样的事情（简化）：

**我网站中的 HTML：**

```
<iframe name='select_frame' src='http://www.othersite.com/select.php?initial_name=jim'></iframe>
<input type='button' name='save' value='SAVE'> 
```

**iFrame 的 HTML 内容（从`select.php`另一个域加载）：**

```
<select id='select_name'>
    <option value='john'>John</option>
    <option value='jim' selected>Jim</option>
</select> 
```

**jQuery：**

```
$('input:button[name=save]').click(function() {
    var name = $('iframe[name=select_frame]').contents().find('#select_name').val();
}); 
```

但是，当我尝试读取该值时收到此 javascript 错误：

*阻止来源为“http://www.myownsite.com”的框架访问来源为“http://www.othersite.com”的框架。协议、域和端口必须匹配。*

要解决此问题，您可以代理“http://www.othersite.com”上的内容，将其托管在“http://www.myownsite.com”上。例如，如果您使用的是 PHP，则有一个 PHP 脚本，该脚本使用`file_get_contents()`或`curl`等方法从其他站点读取内容。

因此，在您自己的站点上创建一个脚本（例如：`select_local.php`在当前目录中），其内容类似于以下内容：

**select_local.php 的 PHP 内容：**

```
<?php
    $url = "http://www.othersite.com/select.php?" . $_SERVER['QUERY_STRING'];
    $html_select = file_get_contents($url);
    echo $html_select;
?> 
```

**还要修改 HTML 以调用此本地（而不是远程）脚本：**

```
<iframe name='select_frame' src='select_local.php?initial_name=jim'></iframe>
<input type='button' name='save' value='SAVE'> 
```

现在您的浏览器应该认为它正在从同一个域加载 iFrame 内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T12:51:32.353

```
<iframe id="upload_target" name="upload_target">
    <textarea rows="20" cols="100" name="result" id="result" ></textarea>
    <input type="text" id="txt1" />
</iframe> 
```

您可以通过 JQuery 获取价值

```
$(document).ready(function(){
  alert($('#upload_target').contents().find('#result').html());
  alert($('#upload_target').contents().find('#txt1').val());
}); 
```

仅在同一域链接上工作

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-31T08:45:33.123

```
document.getElementById("idframe").contentWindow.document.getElementById("idelement").value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-26T08:00:23.537

> 没有 iframe 我们可以通过 JQuery 来做到这一点，但它只会为您提供 HTML 页面源，并且不会显示动态链接或 html 标记。几乎与 php 解决方案相同，但在 JQuery 中:) 代码---

```
var purl = "http://www.othersite.com";
$.getJSON('http://whateverorigin.org/get?url=' +
    encodeURIComponent(purl) + '&callback=?',
    function (data) {
    $('#viewer').html(data.contents);
}); 
```

# javascript - 如何找到最近的 tbody 然后遍历它的行并隐藏它们

> ID：15002657
> 
> 赞同：1
> 
> 时间：2013-02-21T12:48:32.180
> 
> 标签：javascript, jquery

我有一张桌子被分成几个 tbody 的。每个 tbody 的第一行都有一个按钮，用于隐藏该 tbody 中的所有其他行，除了其中包含按钮的行。

不知道如何实现这一点。

我的 HTML：

```
<table>
   <tbody>
       <tr>
           <td><button class="hide_button_main"> x </button></td>
           <td>Label</td>
       </tr>
        <tr>
            <td>Zone 1</td>
            <td></td>
        </tr>
        <tr>
            <td>Zone 2</td>
            <td></td>
        </tr> 
        <tr>
            <td>Zone 3</td>
            <td></td>
        </tr> 
       <tr>
            <td>Zone 4</td>
            <td></td>
        </tr> 
   </tbody> 
```

区域 1 到 4 的行将被隐藏，但标签所在的行不会

我的jQuery：

```
 $('.hide_button_main').click(function(e) {

   // var rows = $(this).closest('tbody').find('tr').length;

    var rows = $(this).closest('tbody');

        rows.each(function() {

      alert('1');

    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:52:38.837

你可以用这个

```
$('.hide_button_main').click(function(e){
    $(this).closest('tbody').hide();
}); 
```

或者如果你想隐藏 tbody 孩子，请这样做

```
$('.hide_button_main').click(function(e){
    $(this).closest('tbody').find('tr').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:57:25.393

隐藏除第一行以外的所有行...

```
 $('.hide_button_main').click(function(e){
        $(this).closest('tbody').find('tr:not(:first)').hide();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:54:21.067

这应该有效：

```
$('.hide_button_main').click(function(e){
    $(this).closest('tr').siblings().hide(); // hide all except self
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T12:54:37.013

我认为这应该这样做

```
$('table').on('click', '.hide_button_main', function(e) {
    var target = $(e.currentTarget);
    var row = target.closest('tr');
    console.log('console', target, row, row.siblings())
    row.siblings().hide();
}); 
```

演示：[小提琴](http://jsfiddle.net/qFAc8/)

这里我们使用了使用 jQuery.on 的委托事件注册模型。如果我们有很多必须附加事件处理程序的元素，建议使用这种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T12:55:07.020

他想隐藏所有兄弟行，所以：

```
$('.hide_button_main').click(function (e) {
   var $currentRow = $(this).closest('tr');
   var $otherRows = $currentRow.siblings();
   $otherRows.hide();
}); 
```

演示：http: [//jsfiddle.net/NeXMh/1/](http://jsfiddle.net/NeXMh/1/)

**编辑**

处理多个表时，请使用单个事件处理程序：

```
$('table').on(click, '.hide_button_main', (function (e) {
   var $currentRow = $(this).closest('tr');
   var $otherRows = $currentRow.siblings();
   $otherRows.hide();
}); 
```

# php - 带有动态文本 {name} 的文本使用什么语言

> ID：15002658
> 
> 赞同：2
> 
> 时间：2013-02-21T12:48:34.520
> 
> 标签：php, javascript

我的系统中的动态文本使用什么语言示例

```
<html>
<title>{name title}</title>
{css load}
{script load}
<body>
<div>
{headers}
</div> 
```

我怎么做？php 和 javascript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:50:27.563

这似乎正在使用[模板引擎](http://en.wikipedia.org/wiki/Template_engine_%28web%29)。PHP和Javascript都有很多可用的。我建议您使用 Google 并决定哪一个最适合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:51:16.793

```
<html>
<title><?php echo $title; ?></title>
<?php
echo '<script src='.$src.'> </script> ';
echo '<link href='.$src.' /> ';

?>
<body>
<div>
<?php echo $header; ?>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:14:46.223

这看起来有点像 smarty(dot net)，但您可以轻松地自己创建一个非常基本的模板引擎。

首先创建一个模板

```
//........
<div align="right"> 
    $name
</div>
//........ and the like 
```

然后添加你需要的变量

```
$name = "TuyoshiiBrasil"; 
```

在你的 php 结尾...

```
//fetch template und output
$template = addslashes(implode('', file("std.tpl"))); //where std.tpl is the template above
eval ("\$output = \"$template\";");
echo stripslashes($output); 
```

它不像你在网上找到的模板引擎那么强大，而且你知道它也使用不同的语法，但它很容易实现，因为你只需要三行代码

# java - 为什么我在将 List 转换为 MultiKeyMap 时不会收到编译错误？

> ID：15002660
> 
> 赞同：1
> 
> 时间：2013-02-21T12:48:39.240
> 
> 标签：java, casting

我刚刚遇到了一段代码，该代码将[a`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)转换为[a`MultiKeyMap`](http://commons.apache.org/collections/api-3.2/org/apache/commons/collections/map/MultiKeyMap.html)以调用以 a`MultiKeyMap`作为参数的方法：

```
someMethod ((MultiKeyMap) myList); 
```

`myList`一个在哪里`List`。

当然，它会`ClassCastException`在运行时抛出一个。为什么它不显示编译错误或至少在尝试将 a`Collection`转换为 a时显示警告“类型安全：未经检查的转换” `Map`？这两种类型没有任何共同之处。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T12:54:17.947

这不是编译错误，因为可能有一个`List`实现也恰好是`MultiKeyMap`：

```
public MyHybrid extends MultiKeyMap implements List {
  // implement stuff
} 
```

我并不是说这是一个好主意，但类型系统并没有阻止它。因此，编译器允许强制转换。

它不是未经检查的强制转换的原因是因为目标类型没有泛型类型参数（即没有`MultiKeyMap<K,V>`）。

# android - 3.in.pool.ntp.org 有时无法在安卓设备中返回日期

> ID：15002661
> 
> 赞同：1
> 
> 时间：2013-02-21T12:48:51.063
> 
> 标签：android, date, datetime, utc, ntp

我很长时间以来都在从 ntp 服务器获取 UTC 日期。但是我注意到，当我运行我的代码时，我有时会得到空字符串（100 次一次）。

我的代码是

```
DateFormat outputFormat = new SimpleDateFormat("dd-MM-yyyy");
SntpClient client = new SntpClient();
if (client.requestTime("3.in.pool.ntp.org", 10000)) {

          Date actualD = new Date(client.getNtpTime());
          actualDate = outputFormat.format(actualD).trim();
} 
```

你能建议我一些这种代码有局限性的情况吗？**如果我使用pool.ntp.org**而不是**3.in.pool.ntp.org**可以克服这个限制吗

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T03:22:39.153

最好尝试这个类从 NTP 服务器获取正确的 UTC 时间：

```
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

class NTP_UTC_Time
{
private static final String TAG = "SntpClient";

private static final int RECEIVE_TIME_OFFSET = 32;
private static final int TRANSMIT_TIME_OFFSET = 40;
private static final int NTP_PACKET_SIZE = 48;

private static final int NTP_PORT = 123;
private static final int NTP_MODE_CLIENT = 3;
private static final int NTP_VERSION = 3;

// Number of seconds between Jan 1, 1900 and Jan 1, 1970
// 70 years plus 17 leap days
private static final long OFFSET_1900_TO_1970 = ((365L * 70L) + 17L) * 24L * 60L * 60L;

private long mNtpTime;

public boolean requestTime(String host, int timeout) {
    try {
        DatagramSocket socket = new DatagramSocket();
        socket.setSoTimeout(timeout);
        InetAddress address = InetAddress.getByName(host);
        byte[] buffer = new byte[NTP_PACKET_SIZE];
        DatagramPacket request = new DatagramPacket(buffer, buffer.length, address, NTP_PORT);

        buffer[0] = NTP_MODE_CLIENT | (NTP_VERSION << 3);

        writeTimeStamp(buffer, TRANSMIT_TIME_OFFSET);

        socket.send(request);

        // read the response
        DatagramPacket response = new DatagramPacket(buffer, buffer.length);
        socket.receive(response);          
        socket.close();

        mNtpTime = readTimeStamp(buffer, RECEIVE_TIME_OFFSET);            
    } catch (Exception e) {
      //  if (Config.LOGD) Log.d(TAG, "request time failed: " + e);
        return false;
    }

    return true;
}

public long getNtpTime() {
    return mNtpTime;
}

/**
 * Reads an unsigned 32 bit big endian number from the given offset in the buffer.
 */
private long read32(byte[] buffer, int offset) {
    byte b0 = buffer[offset];
    byte b1 = buffer[offset+1];
    byte b2 = buffer[offset+2];
    byte b3 = buffer[offset+3];

    // convert signed bytes to unsigned values
    int i0 = ((b0 & 0x80) == 0x80 ? (b0 & 0x7F) + 0x80 : b0);
    int i1 = ((b1 & 0x80) == 0x80 ? (b1 & 0x7F) + 0x80 : b1);
    int i2 = ((b2 & 0x80) == 0x80 ? (b2 & 0x7F) + 0x80 : b2);
    int i3 = ((b3 & 0x80) == 0x80 ? (b3 & 0x7F) + 0x80 : b3);

    return ((long)i0 << 24) + ((long)i1 << 16) + ((long)i2 << 8) + (long)i3;
}

/**
 * Reads the NTP time stamp at the given offset in the buffer and returns 
 * it as a system time (milliseconds since January 1, 1970).
 */    
private long readTimeStamp(byte[] buffer, int offset) {
    long seconds = read32(buffer, offset);
    long fraction = read32(buffer, offset + 4);
    return ((seconds - OFFSET_1900_TO_1970) * 1000) + ((fraction * 1000L) / 0x100000000L);        
}

/**
 * Writes 0 as NTP starttime stamp in the buffer. --> Then NTP returns Time OFFSET since 1900
 */    
private void writeTimeStamp(byte[] buffer, int offset) {        
    int ofs =  offset++;

    for (int i=ofs;i<(ofs+8);i++)
      buffer[i] = (byte)(0);             
}

} 
```

并将其用于：

```
 long now = 0;

        NTP_UTC_Time client = new NTP_UTC_Time();

        if (client.requestTime("pool.ntp.org", 2000)) {              
          now = client.getNtpTime();
        } 
```

如果您需要 UTC 时间“现在”作为 DateTimeString 使用函数：

```
private String get_UTC_Datetime_from_timestamp(long timeStamp){

    try{

        Calendar cal = Calendar.getInstance();
        TimeZone tz = cal.getTimeZone();

        int tzt = tz.getOffset(System.currentTimeMillis());

        timeStamp -= tzt;

        // DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",Locale.getDefault());
        DateFormat sdf = new SimpleDateFormat();
        Date netDate = (new Date(timeStamp));
        return sdf.format(netDate);
    }
    catch(Exception ex){
        return "";
     }
    } 
```

并将其用于：

```
String UTC_DateTime = get_UTC_Datetime_from_timestamp(now); 
```**

# android - 当列表视图不适合时滚动（自定义选取框）文本视图文本

> ID：15002662
> 
> 赞同：1
> 
> 时间：2013-02-21T12:48:52.953
> 
> 标签：android, android-listview, textview

What is the best way to accomplish textView scrolling inside listview when it doesn't fit and only when specific row inside listview is selected. 另外，我希望我的文本从左侧滚动到右侧，当它到达末尾时从右侧向后滚动到左侧（不像选框那样默认）

ListView 行的 XML：

```
<TextView
            android:id="@+id/txtWouldLikeToScroll"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:paddingBottom="1dp"
            android:textColor="#fff"
            android:textStyle="bold"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"  
            android:singleLine="true"
             /> 
```

我正在使用自定义 ListViewAdapter 并覆盖滚动侦听器：

```
myList.setOnScrollListener(new OnScrollListener() {

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {

                // TODO Auto-generated method stub

            }

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {

                switch (scrollState) {
                case OnScrollListener.SCROLL_STATE_IDLE:

                  view.setSelection(positionWhereIwouldLikeToPointSelection);

                    break;
                case OnScrollListener.SCROLL_STATE_TOUCH_SCROLL:
                    break;
                case OnScrollListener.SCROLL_STATE_FLING:
                    break;
                }

            }

        });

    } 
```

我想我必须设置要选择的文本视图（我在 ListView 中设置选择的那个），并且不知道如何覆盖选取框行为。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T16:54:04.193

尝试动画。它易于使用，并且完全符合您的要求：

```
<TextView
    android:id="@+id/textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:maxLines="1" /> 
```

现在Java代码：

```
private TextView mTextView...
private Animation mAnimation...

private void animateTextView() {
    int textWidth = getTextViewWidth(mTextView);
    int maxWidth = ... // Do not know what width you want.

    /* Start animation only when text is longer than dislay width. */
    if(maxWidth<textWidth) {
        mAnimation = new TranslateAnimation(
                0, displayWidth-textWidth,
                0, 0);
        mAnimation.setDuration(3000);    // Set custom duration.
        mAnimation.setStartOffset(500);    // Set custom offset.
        mAnimation.setRepeatMode(Animation.REVERSE);    // This will animate text back ater it reaches end.
        mAnimation.setRepeatCount(Animation.INFINITE);    // Infinite animation.

        mTextView.startAnimation(mAnimation);
    }
}

private int getTextViewWidth(TextView textView) {
    textView.measure(0, 0);    // Need to set measure to (0, 0).
    return textView.getMeasuredWidth();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:59:17.360

你可以这样做。

xml 为`TextView`

```
<TextView
    android:id="@+id/label"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:singleLine="true" /> 
```

我假设您正在扩展您的活动`ListActivity`。在您的`onListItemClick`

```
public void onListItemClick(ListView parent, View row, int position, long id) {

    TextView textViewOne =   (TextView)row.findViewById(R.id.text_view);
    textViewOne.setSelected(true);
    for (int i = 0; i < parent.getChildCount(); i++) {
        if(i!=position){
            View view = (View) parent.getChildAt(i).findViewById(R.id.view);

            textViewOne = (TextView)view.findViewById(R.id.text_view);
            textViewOne.setSelected(false);

        }
    }   
} 
```

# exchangewebservices - 可以使用 EWS 托管 API 启用或禁用邮箱吗？

> ID：15002663
> 
> 赞同：1
> 
> 时间：2013-02-21T12:48:56.003
> 
> 标签：exchangewebservices, ews-managed-api

可以使用 Powershell 命令创建、启用和禁用邮箱。是否可以使用 EWS 托管 API 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:45:59.507

不，EWS 只是一个 Web 服务，它与邮箱创建无关。

在这里您可以找到 EWS 支持的所有操作。[Exchange 服务器 2007] [http://msdn.microsoft.com/en-us/library/exchange/bb409286%28v=exchg.80%29.aspx](http://msdn.microsoft.com/en-us/library/exchange/bb409286%28v=exchg.80%29.aspx)

[Exchange 服务器 2010] [http://msdn.microsoft.com/en-us/library/exchange/bb409286%28v=exchg.140%29.aspx](http://msdn.microsoft.com/en-us/library/exchange/bb409286%28v=exchg.140%29.aspx)

[Exchange 服务器 2013] [http://msdn.microsoft.com/en-us/library/exchange/bb409286%28v=exchg.150%29.aspx](http://msdn.microsoft.com/en-us/library/exchange/bb409286%28v=exchg.150%29.aspx)

您可以使用 powershell 编写用于创建、启用、禁用邮箱的 c# 应用程序

# search-engine - 停止 Google 索引子域

> ID：15002664
> 
> 赞同：5
> 
> 时间：2013-02-21T12:49:04.177
> 
> 标签：search-engine, robots.txt

我有一个使用通配符子域的站点，这样当有人注册时，他们就会获得自己的子域。

我不希望谷歌（或其他搜索引擎）抓取和索引任何子域（接受 www.）

有没有办法用 robots.txt 做到这一点？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:11:42.970

我猜不，至少不是直接使用一个全局`robots.txt`文件。见：[http ://www.seomoz.org/q/block-an-entire-subdomain-with-robots-txt](http://www.seomoz.org/q/block-an-entire-subdomain-with-robots-txt)

在该页面的某处，andykuiper 写道：

> 您可以通过 robots.txt 阻止整个子域，但是您需要创建一个 robots.txt 文件并将其放在子域的根目录中，然后添加代码以指示机器人远离整个子域的内容。
> 
> 用户代理：* 禁止：/

也可以看看：

*   [http://productforums.google.com/forum/#!topic/webmasters/f5AfW1otAUo](http://productforums.google.com/forum/#!topic/webmasters/f5AfW1otAUo)
*   [使用 robots.txt 在子域上禁止或无索引](https://stackoverflow.com/questions/4904642/disallow-or-noindex-on-subdomain-with-robots-txt)
*   [子域不允许通过 robots.txt 搜索机器人](https://stackoverflow.com/questions/8803319/subdomain-disallow-search-bots-via-robots-txt)

制作一个脚本，将`robots.txt`文件创建/复制到新创建的子域，一切都应该按预期工作。

# javascript - 如何使用 Phonegap JQuery 从 C# webservice 返回的 xml 数据中获取数组值？

> ID：15002665
> 
> 赞同：0
> 
> 时间：2013-02-21T12:49:03.913
> 
> 标签：javascript, android, jquery, web-services, cordova

我在 .net 中开发了 web 服务，它以数组字符串形式返回输出，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
<string>New Orleans, Louisiana</string>
<string>New York, New York</string>
</ArrayOfString> 
```

如何在我的 javascript 中解析这个 xml？

# android - 波处理和树莓派

> ID：15002666
> 
> 赞同：2
> 
> 时间：2013-02-21T12:49:08.197
> 
> 标签：android, interface, android-sdk-2.1

我正在寻找教程和指导，而不是代码。

我正在开发一个项目，工作的核心是用 C++ 编写的，我需要为 Andriod 平台构建一个用户界面。Android 应用程序将像这样工作：

> 问题1：
> 
> 将有一个按钮，用户可以在其中“按下”他们可以说话，然后将其转换为 .wav 文件（设置采样率等）。然后将其发送到库（写入C++），然后将结果发送回接口。
> 
> 问题2：
> 
> 我需要一种将一小段数据（在上述事件之后）发送到 Raspberry Pi 的方法，它会在其中触发一些 LED。（我已经完成了 LEDS 部分）。

我在想也许可以使用套接字。在那里，Raspberry Pi 正在“侦听”要发送的数据（它只是 1 或 0），然后如果收到“1”，它就会触发一个事件。这听起来像是一个好方法吗？

因此，使用 SDK (Java) 开发这个应用程序会更好，还是应该只用 C++ 完成整个项目？

任何帮助、建议和/或教程将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:23:00.833

Socket 解决方案听起来很复杂，因为我不确定您指的是 unix 域套接字还是 tcp 互联网套接字。[unix 套接字与 tcp](http://lists.freebsd.org/pipermail/freebsd-performance/2005-February/001143.html)。另外，您必须找出一种方法来定义该套接字的通信协议，以便 Pi 可以将实际信号与随机垃圾邮件/轰炸区分开来。

另一种 + Quick&Dirty 解决方案是

*   用官方sdk等正常编写你的android应用程序。通过简单的 HTTP get 方法通过 Internet 发送信号
*   在 Pi 上设置一个轻量级且非常简单的 http 守护程序，带有 cgi 套接字绑定。您可以按照您计划的方式编写您的套接字程序。

当然。如果您的环境受到严格控制。你可以只使用unix域套接字来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:16:19.340

好的，对于 Android 编程的基础知识，我想[这是一个好的开始](http://www.vogella.com/articles/Android/article.html#firstandroidapp1)。[对于您的第一个问题，本教程](http://www.vogella.com/articles/AndroidMedia/article.html#tutorial_recordsound)

似乎对您有所帮助。 对于您的第二个问题，我将使用蓝牙 - 串行通信。Bluetooth-API 在[DeveloperPage](http://developer.android.com/guide/topics/connectivity/bluetooth.html)上有很好的教程，因此您可以通过已包含在 Android 中的蓝牙发送您想要的任何内容。Pi 默认支持串行部分。 然后你需要一个像[这样](http://wiki.openpilot.org/display/Doc/Serial+Bluetooth+Telemetry)的蓝牙 RS232 加密狗，你可以连接到你的树莓（我有相同的 BT 加密狗，它很容易使用）。将蓝牙串行加密狗连接到 Raspberry 上的 RXD 和 TXD 引脚（见附图）

![在此处输入图像描述](../Images/ffad72c25cda8a02b12137184590a465.png)
你可以向你的 Pi 发送任何你想要的东西（你在 Pi 上的 /dev/ttyACM0 或类似的东西上接收你的数据）。

我希望这对你有一点帮助。到目前为止似乎是一个大项目。祝你好运

# python - Python @propertie 属性未出现在对象的字典中

> ID：15002667
> 
> 赞同：0
> 
> 时间：2013-02-21T12:49:08.073
> 
> 标签：python, properties

为什么当我调用 a.__dict__ 时输出不是 {name:'rafael',age:28}？

```
class Person(object):
    def __init__(self):
        self.name = 'Rafael'

    @property
    def age(self):
        return 28

a = Person()
print a.__dict__ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:52:34.447

属性对象本身位于`Person.__dict__`：

```
In [16]: Person.__dict__
Out[16]: dict_proxy({'__module__': '__main__', 'age': <property object at 0xa387c0c>, '__dict__': <attribute '__dict__' of 'Person' objects>, '__weakref__': <attribute '__weakref__' of 'Person' objects>, '__doc__': None, '__init__': <function __init__ at 0xa4d66f4>}) 
```

`a.age`是函数调用的返回值。它使用[描述符查找机制](http://www.cafepy.com/article/python_attributes_and_methods/)来调用`Person.__dict__['age'].__get__(a,Person)`.

Python 不存储`{'age':28}`任何值，`__dict__`因为 28 不一定是固定值。可以想象，被调用的函数可以在每次调用时返回不同的值。所以`'age'`只关联一个返回值是没有意义的。

例如，考虑

```
class Person(object):
    def __init__(self):
        self.count = 0
    @property
    def age(self):
        self.count += 1
        return self.count    

a = Person()
print(a.age)
# 1
print(a.age)
# 2 
```

# android - 启动应用程序时在 logcat 中遇到错误

> ID：15002671
> 
> 赞同：0
> 
> 时间：2013-02-21T12:49:13.177
> 
> 标签：android

java.lang.RuntimeExeptions:Unable to start activity ComponntInfo{com.securityExeption:PermitionDenial:writing com.android.providers.settings.SettingsProvider uri content://settings/system from pid=1895, uid=10056 requires android.permission.WRITE .设置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:52:00.993

```
java.lang.RuntimeExeptions:Unable to start activity ComponntInfo{com.securityExeption:PermitionDenial:writing com.android.providers.settings.SettingsProvider uri content://settings/system from pid=1895, uid=10056 requires android.permission.WRITE.SETTINGS 
```

添加 ：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/> 
```

**到应用程序**标记上方的项目 manifest.xml 文件

# iphone - UITableview 基于滚动添加表格单元格

> ID：15002672
> 
> 赞同：0
> 
> 时间：2013-02-21T12:49:17.357
> 
> 标签：iphone, ios, objective-c, uitableview

我正在尝试做一个具有类似高音应用程序功能的应用程序。

我有一个包含 10 个单元格的表格视图，我希望当我向下滚动并到达第 5 个单元格时，表格视图会在当前视图中添加另外 10 个单元格，依此类推。

这些单元格的内容是通过运行一个方法来设置的，该方法返回一个包含 10 个元素的数组，我用它来填充新的单元格。

我不知道如何向当前表格视图添加更多单元格，以及如何检查何时到达第 5 个单元格或所有当前单元格的末尾，以便自动添加一组新的 10 个单元格。

我在想我将使用 [tableView reloadData] 重新填充表格视图，并且在我知道我已经到达所有当前单元格的末尾之后我会调用它，但我不知道如何检查我什么时候已经达到了那个目的。

对此有什么想法吗？是否可以检查我何时到达表格视图的所有单元格的末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:09:50.053

An`UITableView`只是 an 的子类`UIScrollView`，因此您可以实现这些`UIScrollViewDelegate`功能并在其中做任何您想做的事情。

您可以实施

`-(void)scrollViewDidScroll:(UIScrollView *)scrollView`

委托函数并检查您是否到达表的末尾

`if (scrollView.contentOffset.y + scrollView.frame.size.height == scrollView.contentView.frame.size.height) { ... }`

应该可以解决问题，或者如果您想早一点开始添加新行，则只需减去一些点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:54:44.273

我知道这不是你要找的东西，但它非常相似......

这是您的起点：[https ://github.com/enormego/EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)

这里有一些更有趣的链接给你：

1.  [iPhone 项目需要“上拉刷新”功能](https://stackoverflow.com/questions/7684441/iphone-projects-needs-pull-up-to-refresh-feature)
2.  [UITableView 行异步加载](https://stackoverflow.com/questions/2551035/uitableview-rows-load-asynchronously)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:56:08.690

有很多开源项目在做这件事。要找到它们，您可以访问例如[http://www.cocoacontrols.com/](http://www.cocoacontrols.com/)并搜索“刷新”或“拉动刷新”或“tableview”。

其中许多项目都提供了有关如何将它们与 tableview 一起使用的示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T13:27:14.047

使用滚动视图委托来获取滚动方向（如果您使用表格视图将被调用）

```
#pragma mark:scrollView delegate
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    offset=scrollView.contentOffset.y;
    offsetx=scrollView.contentOffset.x;
    DLog(@"%f",offset);
}
- (void)scrollViewDidScroll:(UIScrollView *)sender
{

    DLog(@"%f************%f",offset,sender.contentOffset.y);
    if(offset>sender.contentOffset.y)
    {
        directionUp=NO;
    }
    else {
        directionUp=YES;
    }

} 
```

然后使用这个表视图委托方法

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{

        if(directionUp&&(indexPath.row>dataSource.count-3))
        {
            [self performSelector:@selector(appendTableView) withObject:nil afterDelay:0.1f];// appendTableView fetches next ten data element
        }

} 
```

# java - Mac 上的 Lotus Notes jvm\lib\ext 目录

> ID：15002677
> 
> 赞同：1
> 
> 时间：2013-02-21T12:49:34.110
> 
> 标签：java, macos, lotus-notes, lotus-domino, lotusscript

我有一个在 Lotus Notes 8.5.x 上运行的应用程序。它基本上是邮件模板的修改版本，具有一些自定义 Web 服务连接。Web 服务功能不使用 Domino Web 服务设计元素。

Web 服务连接需要将一些自定义 JAR 文件加载到 Windows 上的 jvm\lib\ext 目录中。

这是在加载邮件模板时以编程方式处理的。如果相关文件不存在，则使用 NotesEmbeddedObject 类中的 LotusScript ExtractFile() 方法将它们放置到位。

这一切都在 Windows 上运行良好。

但是，我不确定相同的方法是否适用于 Mac 上的 Notes 客户端。我有3个问题：

1) jvm\lib\ext 目录中可用的相同 JAR 文件主体是否意味着这些 JAR 有效地位于 Notes 客户端中运行的代理的类路径上？

2) 我可以在我的 Mac 上找到的唯一“jvm/lib/ext”目录实际上在 Notes.app 文件中。这是 Windows 上 jvm\lib\ext 目录的 Mac 等价物吗？

3) 如果 2 的答案是“是”，是否可以在 Mac 上以编程方式写入该目录？

我怀疑 1 和 2 的答案是“是”。我有一种感觉，从 LN 应用程序中将文件写入 Mac 上的目录可能无法正常工作。

有没有人尝试过类似的东西？

任何想法将不胜感激。

干杯，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:54:10.753

`jre\lib\ext`Mac 上的等价物是`/Library/Java/Extensions`，但如果有某种方法可以设置`java.ext.dirs`系统属性以将其指向特定于该应用程序的不同位置，而不是污染“全局命名空间”，那就更好了。

# r - 最快的R实现

> ID：15002679
> 
> 赞同：3
> 
> 时间：2013-02-21T12:49:37.820
> 
> 标签：r, optimization, operators

我在 R 代码中使用了很多`"%within[]%" <- function(x,y){x>=y[1] & x<=y[2]}`（意思`x`是在紧凑集中`y`），但我很确定它非常慢。你有更快的东西吗？它需要适用于`>`定义的所有内容。

编辑：`x`可以是一个向量和`y`一个升序的 2 个元素向量...

EDIT2：奇怪的是，没有人（据我所知）编写了一个`rOperator`实现快速`C`运算符的包，例如`%w/i[]%, %w/i[[%, ...`

EDIT3：我意识到我的问题太笼统了，因为假设`x,y`会修改任何结果，我认为我们应该关闭它，感谢您的输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:09:44.597

```
"%within[]%" <- function(x,y){x>=y[1] & x<=y[2]}

x <- 1:10
y <- c(3,5)

x %within[]% y
"%within[]2%" <- function(x,y) findInterval(x,y,rightmost.closed=TRUE)==1
x %within[]2% y

library(microbenchmark)

microbenchmark(x %within[]% y,x %within[]2% y)

Unit: microseconds
             expr   min    lq median    uq    max
1  x %within[]% y 1.849 2.465 2.6185 2.773 11.395
2 x %within[]2% y 4.928 5.544 5.8520 6.160 37.265

x <- 1:1e6
microbenchmark(x %within[]% y,x %within[]2% y)

Unit: milliseconds
             expr      min       lq   median       uq      max
1  x %within[]% y 27.81535 29.60647 31.25193 56.68517 88.16961
2 x %within[]2% y 20.75496 23.07100 24.37369 43.15691 69.62122 
```

这可能是 Rcpp 的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T14:50:26.073

你可以通过一个简单的 Rcpp 实现来获得小的性能提升：

```
library(Rcpp)
library(microbenchmark)

withinR <- function(x,y) x >= y[1] & x <= y[2]
cppFunction("LogicalVector withinCpp(const NumericVector& x, const NumericVector& y) {
  double min = y[0], max = y[1];

  int n = x.size();
  LogicalVector out(n);

  for(int i = 0; i < n; ++i) {
    double val = x[i];
    if (NumericVector::is_na(val)) {
      out[i] = NA_LOGICAL;
    } else {
      out[i] = val >= min & val <= max;
    }

  }
  return out;
}")

x <- sample(100, 1e5, rep = T)

stopifnot(all.equal(withinR(x, c(25, 50)), withinCpp(x, c(25, 50))))

microbenchmark(
  withinR(x, c(25, 50)),
  withinCpp(x, c(25, 50))
) 
```

在我的计算机上，C++ 版本的速度大约快 4 倍。如果您想使用更多 Rcpp 技巧，您可能还可以进一步调整它，但这似乎已经相当快了。即使是 R 版本也需要非常频繁地调用才能成为瓶颈。

```
# Unit: microseconds
#                      expr  min   lq median   uq  max
# 1 withinCpp(x, c(25, 50))  635  659    678 1012 27385
# 2   withinR(x, c(25, 50)) 1969 2031   2573 2954 4082 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:02:25.523

好吧，我不知道这是否可以被认为是缓慢的，但这里有一些基准：

```
R> within <- function(x,y){return(x>=y[1] & x<=y[2])}
R> microbenchmark(within(2,c(1,5)))
Unit: microseconds
               expr   min     lq median    uq    max neval
 within(2, c(1, 5)) 2.667 2.8305 2.9045 2.969 15.818   100

R> within2 <- function(x,y) x>=y[1] & x<=y[2]
R> microbenchmark(within2(2,c(1,5)))
Unit: microseconds
                expr   min     lq median    uq    max neval
 within2(2, c(1, 5)) 2.266 2.3205  2.398 2.483 12.472   100

R> microbenchmark(2>=1 & 2<=5)
Unit: nanoseconds
            expr min    lq median  uq  max neval
 2 >= 1 & 2 <= 5 781 821.5    850 911 5701   100 
```

因此，按照 Konrad Rudolph 的建议，省略 似乎可以`return`加快速度。但是不写函数要快得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T13:06:33.280

`x`如果包含许多值，基于树的结构会提供更好的性能。如果您可以将要求限制为数值，则有 2 个选项

整数的区间树的实现可以在 Bioconductor 包[IRanges](http://www.bioconductor.org/packages/2.11/bioc/html/IRanges.html)中找到。

默认情况下，RSQLite 正在编译启用 rtrees 的嵌入式 SQLite[库](http://www.sqlite.org/rtree.html)。这可以与任何数值一起使用。

# slick - 如何在 slick 中使用 DBTable 宏

> ID：15002680
> 
> 赞同：1
> 
> 时间：2013-02-21T12:49:39.473
> 
> 标签：slick

我找不到任何有关使用 DBTable 类型宏的文档。我只想做这样的事情：

```
object Coffees extends DBTable("jdbc:h2:tcp://localhost/~/coffeeShop","COFFEES") 
```

但我无法让它运行......

谁能帮我举个例子。

谢谢

尼洛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:16:19.363

它们还不存在。github上有一个原型。[https://github.com/xeno-by/typemacros-h2db](https://github.com/xeno-by/typemacros-h2db)最近开始了关于这个主题的进一步工作。

# php - 如何在我的网站上传文件？

> ID：15002682
> 
> 赞同：1
> 
> 时间：2013-02-21T12:49:43.680
> 
> 标签：php, file-upload, upload

我在我的网站上上传文件时遇到问题，因为我是 php 新手。请帮助我解决这个问题。这是我的代码：当我尝试运行此代码时，它给了我错误 move_uploaded_file(/www.g-dms .com/livelink/livelink.exe?func=ll&objId=59413694&objAction=browse&viewType=1/Lighthouse.jpg) [function.move-uploaded-file]：无法打开流：C:\xampp\phpMyAdmin\filefile 中没有错误。第 30 行的 php

```
<?php         
      $dir = "/www.g-dms.com/livelink/livelink.exe?func=ll&objId=59413694&objAction=browse&viewType=1/";
      $types = array("image/gif","image/jpeg","image/jpg","application/x-zip-compressed");
//Check to determine if the submit button has been pressed  
    if(isset($_POST['submit'])){
//Shorten Variables  
     $tmp_name = $_FILES['upload']['tmp_name'];
     $new_name = $_FILES['upload']['name'];
//Check MIME Type  
    if (in_array($_FILES['upload']['type'], $types)){
         //Move file from tmp dir to new location
        move_uploaded_file($tmp_name,$dir . $new_name);
        echo "<strong>{$_FILES['upload']['name']} was uploaded sucessfully, we will be touch!</strong>";
        }else{
    //Print Error Message
     echo "<small>File <strong><em>{$_FILES['upload']['name']}</em></strong> was not uploaded</small><br />";
    //Debug  
   $name =  $_FILES['upload']['name'];
   $type =    $_FILES['upload']['type'];  
   $size =    $_FILES['upload']['size'];  
   $tmp =     $_FILES['upload']['name'];
   echo "Name: $name<br/ >Type: $type<br />Size: $size<br />Tmp: $tmp";} }

else{        
     echo '';
}
        ?>
    <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data">
      <fieldset>
          <div style="padding-left: 90px;"><input type="file" name="upload" />  </div>  
</fieldset>
<br>  
<input type="submit" name="submit" value="Upload File" />  </center>
</form></div></body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:58:27.263

目录名称不正确。此外，您需要确保 dir 具有写入权限，使用 chmod 755 dirname 授予它所需的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:53:23.627

这是我见过的最奇怪的目录名称。[move_uploaded_file()](http://php.net/manual/en/function.move-uploaded-file.php)有两个参数。第一个是`$_FILES['upload']['tmp_name']`你似乎已经掌握的，第二个是目的地。

# java - 是否有标准化的站点地图格式？

> ID：15002683
> 
> 赞同：1
> 
> 时间：2013-02-21T12:49:47.470
> 
> 标签：java, xml, web-scraping, sitemap

我想构建一个抓取一些网站站点地图的网络爬虫。我曾多次遇到这种格式[https://developer.mozilla.org/sitemap.xml](https://developer.mozilla.org/sitemap.xml)。我想知道这是标准还是有标准。

如果没有，那么抓取站点地图的最佳方法是什么？一个正则表达式，还是某个库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:54:08.820

我认为您应该为此使用 DOM API。站点地图格式在那里解释[http://www.sitemaps.org/protocol.html](http://www.sitemaps.org/protocol.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:12:14.243

如果您使用 Java，那么[Java Sitemap Parser](http://sourceforge.net/projects/sitemap-parser/)可能会有所帮助。[此处](https://stackoverflow.com/questions/5043654/parsing-an-xml-navigation-sitemap-with-php)讨论了使用 PHP 解析站点地图。

# css - 如何在 TH 表标签中使用 CSS Rotate()

> ID：15002684
> 
> 赞同：3
> 
> 时间：2013-02-21T12:49:52.437
> 
> 标签：css, html-table, rotation

我需要一些 CSS 大师的帮助。

我正在尝试创建一个简单的 html `<table>`，其中列标题（`<th>`标签）的文本旋转 270 度以横向显示。

我无法锚定标题单元格，因此单元格文本的最左侧部分仅与所有`<th>`标签的底部或基线对齐。

我已经做了很多很多尝试，但无法通过 CSS 解决它。

谁能给我一些关于如何实现这一目标的想法？

[在http://jsfiddle.net/franco13/t5GgE/](http://jsfiddle.net/franco13/t5GgE/)上查看我的 jsfiddle

这就是我想要实现的目标：

![在此处输入图像描述](../Images/d0eb991aed249f8ae3c443820633488b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:07:34.983

[http://jsfiddle.net/t5GgE/1/](http://jsfiddle.net/t5GgE/1/)

Specify a transformation origin on point (65, 60) for the headers, with no wrap allowed and make your `td` centered aligned.

```
th.rotate {
    white-space: nowrap;
    -webkit-transform-origin: 65px 60px;
    -moz-transform-origin: 65px 60px;
    -o-transform-origin: 65px 60px;
    -ms-transform-origin: 65px 60px;
    transform-origin: 65px 60px;
}

td.rights {
    text-align: center;
} 
```

* * *

**Update for IE8 and below**

For IE8 and below you are forced to use [Transformation matrices](http://en.wikipedia.org/wiki/Transformation_matrix) instead of `rotate(270deg)`. So, the correspondent rotation matrix for 270deg is `[0, 1, -1, 0]`.

What you need to do, is add the following and should work just fine for IE8 and below:

```
th.rotate span {
    /* rotated text in IE renders very bad (unless you use clear type), so that even by making it normal, looks less bold but still bold */
    font-weight: normal\9; /* \9 is an hack for IE8 and below */
    letter-spacing: 3px\9; /* because is so bold, need to give letters some space to breath */

    filter: progid:DXImageTransform.Microsoft.Matrix(M11=0, M12=1, M21=-1, M22=0, SizingMethod = "auto expand");
    width: 150px\9;
    height: 150px\9;
    margin-right: -130px\9;
} 
```

**[Final jsFiddle version](http://jsfiddle.net/t5GgE/3/)**

**IE9 problem and workaround** In IE9, you will see a big black rectangle in the header section, and the reason to this bug is that IE9 recognizes both `-ms-transform` and `filter`. When both CSS are present, the browser simply renders a black area. To workaround this, I sugest you use conditional includes for IE9 to use `-ms-transform` only.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:05:32.293

```
 table {
    margin-bottom: 20px; border: solid 1px red
  }
  tr#groups {
    /*display:block;
    margin-left:120px;
    margin-top:120px;*/
  }

  th.rotate {
    -webkit-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    transform: rotate(270deg);
    /*display:inline-block;*/
    height:30em;
    /*float:left;*/
    /*width:30px;*/
  }
  span.intact {
      display: block;
      white-space:nowrap;
    text-align:right
  }
  td.menuItems {
    width: 240px;
  }
  td.no-indent {
    font-weight: bold;
  }
  td.indent {
    padding-left:12px;
  }
  td.rights {
    width:20px;
  }
  td,th { border: solid 1px red} 
```

我知道这也不是最终的，但我将高度放在 th.rotate 中并将跨度更改为显示：块、nowrap 和右对齐......我相信你会完成这个；o）

# c# - 数据网格数据绑定

> ID：15002685
> 
> 赞同：1
> 
> 时间：2013-02-21T12:49:51.290
> 
> 标签：c#, wpf, data-binding

我有一个绑定到静态 ListCollectionView 的数据网格

CompassLogView 类：

```
 public static ListCollectionView Compasscollection {
        get {
            if (_compasscollection == null) {
                _compasscollection =
                    new ListCollectionView(LogSession.CompassLogCollection);
            }
            return _compasscollection;
        }
        set { _compasscollection = value; }
    } 
```

绑定

```
compassLogDataGrid.DataContext = CompassLogView.Compasscollection; 
```

数据网格 Xaml：

```
 <DataGrid x:Name="compassLogDataGrid"
              ItemsSource="{Binding}"
              SelectionMode="Single"
              IsSynchronizedWithCurrentItem="True"
              SelectedItem="{Binding Path=Synchronizer.CurrentCompassLogDataItem}"
              Style="{DynamicResource ResourceKey=dataGridStyle}">
              ...
</DataGrid> 
```

( `SelectedItem`LINE 5) 必须绑定到`currentCompassLogDataItem`哪个是`Synchronizer`类。

我试过了，但似乎不可能。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:23:13.847

```
<DataGrid x:Name="compassLogDataGrid"
          ItemsSource="{Binding}"
          SelectionMode="Single"
          IsSynchronizedWithCurrentItem="True"
          SelectedItem="{Binding Path=CurrentCompassLogDataItem,Source={StaticResource synchronizer} }"
          Style="{DynamicResource ResourceKey=dataGridStyle}">
        <DataGrid.Resources>
            <local:Synchronizer x:Key="synchronizer"/>
        </DataGrid.Resources>
    </DataGrid> 
```

local：在 xmlns 中指定命名空间。我希望这会有所帮助

# c++ - 检测原始 pcm 数据中的声级

> ID：15002688
> 
> 赞同：4
> 
> 时间：2013-02-21T12:50:00.857
> 
> 标签：c++, audio, pcm, audio-processing

我写了一个小程序，它需要检测声音级别，如果级别高于设置中的设置，我会写它，我通过 portaudio 完成声音捕获，通过 libvorbis 压缩，但是程序的一部分没有完成，我卡在它上面，我需要检测声音原始 pcm 数据的级别，我对 pcm 数据是什么理解很差，不知道任何音频分析/处理算法，我们是否有现有的 c/c++ 库可以做到这一点？或者是一些可以实现的简单算法c/c++ 存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:55:32.707

这取决于您如何定义“声级”，它可以像检测峰值一样简单，而更复杂的是遵循行业标准/关于获得响度级别的建议。

PCM 数据通常是带符号值的流：在 8 位 PCM 的情况下为 0x00..0xFF，在 16 位 PCM 的情况下为 -0x8000..+0x7FFF，在浮点值的情况下为 -1.0..+1.0。

最简单的方法是通过寻找给定时间范围内的最大绝对值来检测简单的峰值。您可以在`log10`之后申请以转换为分贝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:55:25.413

查看 Speex 和 WebRTC 库……它们都有语音活动检测器。如果您正在寻找声级的度量，您需要决定线性或对数电平指示器。PCM 的常用格式是 -32768 到 32767 范围（短 16 位）......您可以做的一件简单的事情就是简单地将一个周期内样本的绝对值相加，然后除以样本数以获得平均值期间的水平。

# sql - 带有多个表的sql查询

> ID：15002689
> 
> 赞同：1
> 
> 时间：2013-02-21T12:50:02.567
> 
> 标签：sql, join

我不是很习惯 SQL 查询，但是我必须做这个涉及很多表的查询。他们来了：

（注：`id`始终是`PRIMARY KEY`。）

```
A(id, name)
B(id, title, a_id, FOREIGN KEY(a_id) REFERENCES A(id))
C(id, d_id, b_id, FOREIGN KEY (d_id) REFERENCES D(id), FOREIGN KEY REFERENCES (b_id) REFERENCES B(id))
D(id, content)
E(id d_id, a_id, c_id, FOREIGN KEY (d_id) REFERENCES D(id), FOREIGN KEY (a_id) REFERENCES A(id),  FOREIGN KEY (C_id) REFERENCES c(id)) 
```

我需要从 table 中检索所有行`E`。

这是我写的查询：

```
SELECT *
FROM E
LEFT JOIN D ON E.d_id = D.id
LEFT JOIN A ON E.a_id = A.id
LEFT JOIN B LEFT JOIN A ON B.a_id = B.id
ON C.b_id = B.id
LEFT JOIN D ON C.d_id = D.id
ON E.c_id = C.id 
```

但它给了我一个运行时错误：

> 不明确的列名“ID”；

谁能给我一个提示来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:58:04.470

试试这个：

```
SELECT *
FROM E
LEFT JOIN D ON E.d_id = D.id
LEFT JOIN A ON E.a_id = A.id
LEFT JOIN B ON B.id = B.a_id
LEFT JOIN C ON C.b_id = B.id AND c.d_id = d.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:21:38.553

需要重命名其他表中的id，或者不查看id。

在 SQL Server 中：

选择 A.id AS id_A, B.id AS id_B...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:54:50.637

问题可能出在这句话上

`LEFT JOIN B LEFT JOIN A ON B.a_id = B.id`? 第一个没有指定条件`left join`？

此外，您正在将 B.a_id 与 B.id 进行比较，这只是比较同一张表中的两列。

# android - FB 原生登录中的 SessionState 为 CLOSED_LOGIN_FAILED

> ID：15002701
> 
> 赞同：4
> 
> 时间：2013-02-21T12:51:01.727
> 
> 标签：android, facebook-login

我想使用 Facebook Native 登录

我正在关注[http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/](http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/) 。我得到了权限警报框，但是当我选择时，`ok`我得到 SessionState 作为 CLOSED_LOGIN_FAILED 。

我也重新检查了 App keyHash。有什么方法可以从代码本身获取 KeyHash，我的意思是打印它在比较时检查的 keyhash。

我也经历了许多其他线程，但没有成功，我不知道我哪里出错了。有什么可能，所以我可能会收到这个错误。欢迎任何相关答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T05:27:36.157

使用以下代码来获取密钥哈希，而不是通过命令行生成 keyhash。您需要注意的其他一些事情是 1）在 facebook 设置中设置正确的包名称 2）在 facebook 应用程序设置仪表板上启用 facebook 登录

```
try {
    PackageInfo info = getPackageManager().getPackageInfo(
            "com.example.com.tvishi.fb", 
            PackageManager.GET_SIGNATURES);
    for (Signature signature : info.signatures) {
        MessageDigest md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());
        Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
        }
} catch (NameNotFoundException e) {

} catch (NoSuchAlgorithmException e) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T13:24:42.603

我刚刚遇到这个问题并尝试了上面提到的所有解决方案，但都没有解决这个问题。就我而言，我的测试设备手机（htc my touch）上不断出现此错误。我注意到，当我尝试用手机上的浏览器登录 facebook 时，它一直给我证书错误！所以我终于发现我手机上的日期和时间不正确。修复后，CLOSED_LOGIN_FAILED 错误消失了。希望对将来的人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T02:07:12.733

[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)

您必须列出您拥有的所有密钥哈希。如果您的密钥哈希未在此处列出，那么您将无法登录，FB 将拒绝您。

如果您再次移动到另一台计算机，则需要再次执行此操作。

# java - 将图像转换为 2D 数组，然后在 Java 中取回图像

> ID：15002706
> 
> 赞同：2
> 
> 时间：2013-02-21T12:51:16.330
> 
> 标签：java, image-processing

我想将图像转换为像素的二维数组，对其进行一些操作，然后将生成的二维数组转换回图像。但结果我总是得到一个纯黑色的图像。我无法弄清楚我哪里出错了。这是我正在做的。所有操作都需要在 8 位灰度图像上完成。

*   首先，我得到了二维像素数组。

    ```
    public int[][] compute(File file)
    {
    try 
    {
        BufferedImage img= ImageIO.read(file);
        Raster raster=img.getData();
        int w=raster.getWidth(),h=raster.getHeight();
        int pixels[][]=new int[w][h];
        for (int x=0;x<w;x++)
        {
            for(int y=0;y<h;y++)
            {
                pixels[x][y]=raster.getSample(x,y,0);
            }
        }

        return pixels;

    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
    return null;
    } 
    ```

*   然后我对像素数组进行一些操作

*   接下来，我将数组转换回图像。

    ```
    public java.awt.Image getImage(int pixels[][])
    {
         int w=pixels.length;
         int h=pixels[0].length;
         BufferedImage image=new BufferedImage(w,h,BufferedImage.TYPE_BYTE_GRAY);
         WritableRaster raster=(WritableRaster)image.getData();
         for(int i=0;i<w;i++)
         {
             for(int j=0;j<h;j++)
             {
                 raster.setSample(i,j,0,pixels[i][j]);
             }
         }

    File output=new File("check.jpg");
    try {
        ImageIO.write(image,"jpg",output);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
    return image;
    } 
    ```

但是我得到了一个全黑的图像，我确信它不是全黑的。我应该怎么做才能得到正确的结果？

**编辑**- 应用 efan 的解决方案后，当我将图像保存到文件时，假设 (0,0) 的像素值为 68，然后在计算同一文件的像素值时，它有时会更改为 70，有时会更改为 71.. 有每个像素的小失真。但它会破坏整个图像。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:59:07.260

我认为图像完全是黑色的原因是`SampleModel`for`Raster`是错误的。这是我对您的代码所做的：

```
private SampleModel sampleModel;

public int[][] compute(File file)
{
    ...
    sampleModel = raster.getSampleModel();
    ...
}

public java.awt.Image getImage(int pixels[][])
{
    ...
    WritableRaster raster= Raster.createWritableRaster(sampleModel, new Point(0,0));
    for(int i=0;i<w;i++)
    {
        for(int j=0;j<h;j++)
        {
            raster.setSample(i,j,0,pixels[i][j]);
        }
    }

    BufferedImage image=new BufferedImage(w,h,BufferedImage.TYPE_BYTE_GRAY);
    image.setData(raster);
    ...
} 
```

这对我来说很好。我的理解是，这`BufferedImage.TYPE_BYTE_GRAY`并不能完全选择你需要的东西。不同的东西可能会更好，但我不知道这些类型与颜色/样本模型究竟是如何对应的。如果你知道你需要哪个样本模型，你可以使用它：

```
WritableRaster raster= Raster.createWritableRaster(new PixelInterleavedSampleModel(0, w, h, 1, 1920, new int[] {0}), new Point(0,0)); 
```

# java - selenium.wait()、selenium.wait(2000) 和 Thread.sleep(2000) 有什么区别？

> ID：15002717
> 
> 赞同：-2
> 
> 时间：2013-02-21T12:51:39.427
> 
> 标签：java, selenium-webdriver

请提及 selenium.wait(2000) 和 Thread.sleep(2000) 之间的主要区别，因为两者都用于使测试用例等待该时间。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T12:59:31.230

你说的第一个方法是 java.lang.Object 的方法

公共最终无效等待（长时间超时）抛出 InterruptedException

参考[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#wait(long)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#wait(long))

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T13:02:11.713

我相信它们完全一样，都暂停了线程。

# c# - 从类中获取基本构造函数参数

> ID：15002721
> 
> 赞同：1
> 
> 时间：2013-02-21T12:51:50.750
> 
> 标签：c#, visual-studio, envdte

我有这样的课

```
public class cmdGetAllCustomers : CommandBase
{
    public cmdGetAllCustomers(WToken token)
        : base(token, false, typeof(WCustomer))
    {
    }

    // ...
} 
```

我需要获取第三个基本构造函数参数的类型。在这种情况下，将是`WCustomer`。

我已经找到了`CodeClass`该类的`CodeFunction`对象以及在我的理解中代表构造函数的对象。

里面`CodeFunction`几乎`CodeParameters`描述了我正在搜索的所有构造函数参数，**除了**来自基类的参数。

有人知道如何使用 EnvDTE 获取这些类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T10:51:36.677

如果发现评论中提出的解决方案并不是真正易于阅读，因此将不会被阅读。

所以，这里是对我有用的解决方案：

> 谢谢，我得到了完整的内容并解析它。应该是解决办法！(字符串函数内容 = codeFunction.StartPoint.CreateEditPoint().GetText(codeFunction.EndPoint);)

# ms-access - 切换到不同语言的office版本后microsoft访问“输入参数值”

> ID：15002726
> 
> 赞同：0
> 
> 时间：2013-02-21T12:52:01.883
> 
> 标签：ms-access, versions

当试图打开我在英文版 Office 2003 中使用 German Office 2003 构建的 Microsoft Access 应用程序时，每次打开任何表单时都会出现“输入参数值”对话框。

问题似乎是 access 以某种方式尝试访问以 开头的属性`Formulare!`，这是德语`Forms!`，尽管在英语版本中不可用。`Formulare!`在搜索代码并查看有问题的表单的属性时，我找不到任何直接用法。

有什么想法可以找到问题的根源并解决吗？

**更新：** 我找到了使用的地方`Formulare`，它在查询中。我仍然会对如何搜索与项目相关的所有内容以获取特定术语的方式感兴趣。

# javascript - 如何使用 nvd3 折线图在 x 轴上显示日期

> ID：15002730
> 
> 赞同：1
> 
> 时间：2013-02-21T12:52:05.773
> 
> 标签：javascript, d3.js, nvd3.js

当我将数字传递到 x 轴时，图表会显示出来。但是当我试图在 x 轴上传递日期时，它什么也不显示。我已经给了这样的x轴

```
chart.xAxis
           .axisLabel('Date')
           .tickFormat(function(d) { return d3.time.format('%b %d')(new Date(d)); }); 
```

y 轴的另一个问题是标签未显示在任何图表中。

[这](http://jsfiddle.net/3h8Ps/1/)是我的代码的jsfiddle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:08:30.940

我做错的是给出日期字符串而不是日期 obj。

所以我拆分 JSON 并使用 x 轴标签的日期字符串创建日期对象。如下所示。

```
new Date(dateStr) 
```

现在它工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-11T16:53:20.183

有两件事：

1.  您可以设置代码；
2.  您可以将您的值从随机字符串转换为 NVD3 可以理解的值

如果你在 X 轴上提供一个字符串，NVD3 不知道如何排序，所以需要一个 Date 对象。您可以像这样设置图表：

```
chart.xAxis
  .x(function(d) { new Date(d.x) }) // this convert the data object
  .axisLabel('Date')
  .tickFormat(function(d) { return d3.time.format('%Y-%m-%d')(new Date(d)); }); // this convert the ticker 
```

# javascript - 从谷歌地图中获取第一个地址段

> ID：15002732
> 
> 赞同：1
> 
> 时间：2013-02-21T12:52:15.757
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, geocoding

理想情况下，使用 Google API 而不是 Javascript hack 来获取逗号之前的所有内容，我想知道是否可以在框中获取地址的第一位。这是我正在使用的代码：

[http://jsfiddle.net/Xw4ZM/3/](http://jsfiddle.net/Xw4ZM/3/)

```
var geocoder;
var map;
var marker;

function initialize(){
//MAP
  var latlng = new google.maps.LatLng(41.659,-4.714);
  var options = {
    zoom: 16,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.SATELLITE
  };

  map = new google.maps.Map(document.getElementById("map_canvas"), options);

  //GEOCODER
  geocoder = new google.maps.Geocoder();

  marker = new google.maps.Marker({
    map: map,
    draggable: true
  });

}

$(document).ready(function() { 

  initialize();

  $(function() {
    $("#address").autocomplete({
      //This bit uses the geocoder to fetch address values
      source: function(request, response) {
        geocoder.geocode( {'address': request.term }, function(results, status) {
          response($.map(results, function(item) {
            return {
              label:  item.formatted_address,
              value: item.formatted_address,
              latitude: item.geometry.location.lat(),
              longitude: item.geometry.location.lng()
            }
          }));
        })
      },
      //This bit is executed upon selection of an address
      select: function(event, ui) {
        $("#latitude").val(ui.item.latitude);
        $("#longitude").val(ui.item.longitude);
        var location = new google.maps.LatLng(ui.item.latitude, ui.item.longitude);
        marker.setPosition(location);
        map.setCenter(location);
      }
    });
  });

  //Add listener to marker for reverse geocoding
  google.maps.event.addListener(marker, 'drag', function() {
    geocoder.geocode({'latLng': marker.getPosition()}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[0]) {
          $('#address').val(results[0].formatted_address);
          $('#latitude').val(marker.getPosition().lat());
          $('#longitude').val(marker.getPosition().lng());
        }
      }
    });
  });

}); 
```

这是我试图实现的场景，如果用户输入：

```
Swindon, Wiltshire, United Kingdom
The "name" value is this: "Swindon"

Wiltshire, United Kingdom:
The "name" value is this "Wiltshire"

United Kingdom:
The "name" value is this "United Kingdom" 
```

它基本上是保存名称字段中提供的最准确的位置，无论是城镇、城市、县还是国家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:05:50.973

不确定它是否可以帮助您解决您的情况，但地址搜索结果对象中有地址组件。

[https://developers.google.com/maps/documentation/geocoding/#JSON](https://developers.google.com/maps/documentation/geocoding/#JSON)

```
geocoder.geocode({
        'address': request.term
    }, function (results, status) {
        for (i in results) {
            var result = results[i];

            for (j in result.address_components) {
                var segment = result.address_components[j];

                // do something with address segment
            }
        }
    }) 
```

或者

```
geocoder.geocode({
    'address': request.term
}, function (results, status) {
    $.each(results, function (i, result) {
        $.each(result.address_components, function (i, segment) {
            // do something with address segment
        });
    });
}) 
```

# c# - 启动后 WPF 进度条处于 100%

> ID：15002737
> 
> 赞同：1
> 
> 时间：2013-02-21T12:52:35.237
> 
> 标签：c#, wpf, data-binding, progress-bar

在 WPF 应用程序中，我定义了一个进度条。

```
<ProgressBar Minimum="0" Maximum="{Binding TotalItemCount}" Value="{Binding CurrentItemCount, UpdateSourceTrigger=PropertyChanged}" /> 
```

但是我的问题是进度条已完全填充，即在启动应用程序后直接填充 100%，尽管我最初将属性设置为以下值：

```
TotalItemCount = 0;
CurrentItemCount = 0; 
```

一旦我更改`TotalItemCount`为`1`进度条正确设置为 0 %。在我看来，控件将 0 从 0 解释为 100 % 。

如何将进度条初始化为 0 %？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:13:50.240

```
public int MaxCountForProgress 
{
  get
  {
    if (TotalItemCount == 0)
      return int.MaxValue;
    return TotalItemCount;
  }
} 
```

...

```
ProgressBar Minimum="0" Maximum="{Binding MaxCountForProgress}" Value="{Binding CurrentItemCount, UpdateSourceTrigger=PropertyChanged}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:17:17.020

您可以为 ProgressBar 最大值编写一个转换器，如下所示：

```
[ValueConversion(typeof(double), typeof(double))]
public class ProgressBarMaximumConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if ((double)value == 0)
        {
            return 1;
        }

        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null; 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:19:24.600

我做了一些小伙伴的建议：只要计数器为0，进度条就会隐藏。

# android - 在项目中打开布局时出现错误

> ID：15002740
> 
> 赞同：0
> 
> 时间：2013-02-21T12:52:41.437
> 
> 标签：android, eclipse, project

我希望这一次我的问题很清楚。我尝试打开一个布局，但出现了图片中出现的错误。如果我单击确定，它会打开，但在内容选项卡中不会出现其内容，而我仍然在任何打开的选项卡中看到相同的内容。在我进行最新的 java 更新之前，这个项目运行良好，可能是问题吗？ ![项目错误截图](../Images/f29467010a60e40c615a2a92f88b1bca.png)

![日志拍摄](../Images/e44976625b710181330cdaf30a431715.png)

```
java.lang.NoSuchMethodError: com.android.ide.eclipse.adt.internal.resources.manager.ProjectResources.getMatchingFile(Ljava/lang/String;Lcom/android/resources/ResourceType;Lcom/android/ide/common/resources/configuration/FolderConfiguration;)Lcom/android/ide/common/resources/ResourceFile;
    at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationMatcher.isCurrentFileBestMatchFor(ConfigurationMatcher.java:147)
    at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationMatcher.findAndSetCompatibleConfig(ConfigurationMatcher.java:324)
    at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationChooser.onXmlModelLoaded(ConfigurationChooser.java:782)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.onTargetChange(GraphicalEditorPart.java:1186)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.onDescriptorsChanged(LayoutEditorDelegate.java:916)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegateInitUiRootNode(LayoutEditorDelegate.java:835)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegateXmlModelChanged(LayoutEditorDelegate.java:393)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.xmlModelChanged(CommonXmlEditor.java:329)
    at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor$XmlModelStateListener.modelChanged(AndroidXmlEditor.java:1653)
    at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.createTextEditor(AndroidXmlEditor.java:835)
    at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.createAndroidPages(AndroidXmlEditor.java:320)
    at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.addPages(AndroidXmlEditor.java:310)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.addPages(CommonXmlEditor.java:285)
    at org.eclipse.ui.forms.editor.FormEditor.createPages(FormEditor.java:138)
    at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:348)
    at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:670)
    at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465)
    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
    at org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:289)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2945)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850)
    at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842)
    at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2793)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2773)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2764)
    at org.eclipse.ui.ide.IDE.openEditor(IDE.java:651)
    at org.eclipse.ui.ide.IDE.openEditor(IDE.java:610)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:355)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:164)
    at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:249)
    at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:228)
    at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275)
    at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:376)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:538)
    at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
    at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
    at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
    at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
    at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
    at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
    at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:24:54.123

看起来您的安装已损坏。Eclipse 插件所依赖的 .jar 之一不是最新的，因此在尝试调用它时存在参数不匹配。尝试重新安装 ADT 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:21:23.367

在 Eclipse 中打开 main.xml 文件时，我也遇到了同样的问题。我通过在 Eclipse 中更新 ADT 插件解决了它-

**-> 转到帮助 -> Eclipse Market Place -> 在过滤器搜索中键入 adt -> 查找适用于 Eclipse 的 Android 开发工具 -> 更新。**

问题解决了。！！干杯..

# android - Android 拍照 int resultCode = -1, Intent data = null?

> ID：15002742
> 
> 赞同：1
> 
> 时间：2013-02-21T12:52:51.387
> 
> 标签：android, android-intent

看到了解决方法，但是我曾经工作过，曾经不在线。我不知道是什么。

```
 int resultCode = -1, Intent data = null 
```

拍照，经常搞定。

```
private void takePicture() {
        Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File photoFile = new File(Environment.getExternalStorageDirectory(), StartMenuActivity.DIR_NAME + "/" + travelDirName
                + "/" + travelDirName + "_" + poisArray.size() + ".jpg");
        cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photoFile));

        imageOrVideoUri = Uri.fromFile(photoFile);

        startActivityForResult(cameraIntent, CAMERA_REQUEST_PICTURE);
    }

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if ((resultCode == RESULT_OK)&&(data != null)) {
            if (requestCode == CAMERA_REQUEST_PICTURE) {
                createThumbnail();
                addPoi(PICTURE_POI);
            }
            if (requestCode == CAMERA_REQUEST_VIDEO) {
                addPoi(VIDEO_POI);
            }
            // Uri selectedUri = imageOrVideoUri;
            // Bitmap photo = (Bitmap) data.getExtras().get("data");
            // imageView.setImageBitmap(photo);
        } else {
            Toast.makeText(TravelMapActivity.this, R.string.poi_add_error, Toast.LENGTH_LONG).show();
        }
} 
```

怎么修？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:00:36.110

尝试这个，

```
protected void TakePhoto() {

        Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");

        File photo = new File(Environment.getExternalStorageDirectory()
                + "/LiveChat", "IMG_temp.jpg");
        System.gc();
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
        imageUri = Uri.fromFile(photo);
        startActivityForResult(intent, 1);

}

  protected void onActivityResult(int requestcode, int resultcode, Intent data) {

        if (resultcode == RESULT_OK) {
            System.gc();
            switch (requestcode) {
            case 0:

         //ADD YOUR STUFF
                    }

        } else {
            Toast.makeText(getApplicationContext(), "No Image Selected",
                    Toast.LENGTH_SHORT).show();
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T16:32:46.493

因此，这里的问题是您正在指定将照片写入相机意图的 URI。如果您提供 URI，则默认功能是不提供缩略图 - 因为您已经知道图像的位置。在您的活动结果中，只需使用 URI 来检索您的图像。[关于这个问题](https://stackoverflow.com/questions/9890757/android-camera-data-intent-returns-null?rq=1)有几个相关的帖子。

# kendo-ui - 在 Kendo 数据即图表中设置标题宽度

> ID：15002743
> 
> 赞同：0
> 
> 时间：2013-02-21T12:52:53.710
> 
> 标签：kendo-ui

我正在尝试设置我的剑道图表的标题元素的宽度，以便它们在达到一定宽度时换行到下面的行。

知道我需要设置哪个属性吗？或者如何使用模板来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:50:00.613

我认为当前版本的 Kendo Charts 不可能做到这一点。

过去，当我需要的标题不仅仅是简单的文本时，我会从图表中删除标题并将其放在图表上方的 div 中。

# html - 当另一个链接图像位于下方时，无法单击带有链接的固定图像

> ID：15002747
> 
> 赞同：0
> 
> 时间：2013-02-21T12:53:09.210
> 
> 标签：html, css, image, hyperlink, rollovers

我遇到了包含链接的图像的问题。我有一个固定位置的 PNG 作为我网站的标题。这张图片链接回我的主页。在其下方滚动的是一系列缩略图，您可以单击以查看完整图像。当您向下滚动以使缩略图位于标题 PNG 后面时，您将无法再单击主页链接，而是单击后面缩略图的链接。

我感觉它与缩略图的翻转功能有关 - 因为它还使标题 PNG 半透明，这并不理想。这是我的编码（第一次尝试从头开始编码，非常抱歉）：

```
 <!DOCTYPE html>

<html>

<head>
<title>Daniel Lewsley</title>
<link rel="stylesheet" type="text/css" href="css/style.css" media="screen">
</head>

<body>

<div id="header">
<a href="index.html"><img src="img/daniellewsley-header.png" alt="Daniel Lewsley"></a>
</div>

<!--
<div>
 <ul class="nav">
 <li class="nav"><a class="nav" href="illustration.html">Illustration</a></li>
 <li class="nav"><a class="nav" href="design.html">Design</a></li>
 <li class="nav"><a class="nav" href="other.html">Other</a></li>
 <li class="nav"><a class="nav" href="info.html">Info</a></li>
 </ul>
</div>
-->

<div id="gallerycontainer">
<div id="gallery"><a class="rollover" href="img/15.png"><img src="img/gallerythumb15.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/14.png"><img src="img/gallerythumb14.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/13.png"><img src="img/gallerythumb13.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/12.png"><img src="img/gallerythumb12.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/11.png"><img src="img/gallerythumb11.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/10.png"><img src="img/gallerythumb10.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/09.png"><img src="img/gallerythumb09.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/08.png"><img src="img/gallerythumb08.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/07.png"><img src="img/gallerythumb07.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/06.png"><img src="img/gallerythumb06.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/05.png"><img src="img/gallerythumb05.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/04.png"><img src="img/gallerythumb04.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/03.png"><img src="img/gallerythumb03.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/02.png"><img src="img/gallerythumb02.png" alt="Thumbnail"></a></div>
<div id="gallery"><a class="rollover" href="img/01.png"><img src="img/gallerythumb01.png" alt="Thumbnail"></a></div>
</div>

</body>

</html> 
```

CSS：

```
body
{
background-color:white;
font-family:"Arial", arial, sans-serif;
font-size:0.875em; /*16px is 1em */
text-align:center;
margin:0 auto;
padding:0;
min-width:400px;
}

#header
{
font-size:0;
letter-spacing:0;
word-spacing:0;
background-color:white;
position:fixed;
/* margin:0 auto;
width:100%; */
}

ul.nav
{
list-style-type:none;
margin:5px;
padding:0;
overflow:hidden;
}
li.nav
{
display:inline-block;
}
a.nav
{
display:block;
width:100px;
background-color:#dddddd;
text-decoration:none
}

#gallerycontainer
{
padding:40px 0 0 0;
text-align:center;
font-size:0;
letter-spacing:0;
word-spacing:0;
}

#gallery
{
background-color:black;
width:400px;
height:300px;
display:inline-block;
}

a.rollover:hover
{
opacity:0.4;
filter:alpha(opacity=40); /* For IE8 and earlier */
} 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:57:06.067

您可以`z-index`在 CSS 中设置。如果您将标题图像的 z-index 设置为`-1`，它将被发送到后台，您可以单击缩略图。

# java - ActionBar BUG：使用 SearchView 后列表模式导航不可见

> ID：15002748
> 
> 赞同：13
> 
> 时间：2013-02-21T12:53:13.040
> 
> 标签：java, android, android-actionbar, actionbarsherlock, android-viewpager

演示此错误的项目：[https ://github.com/smarek/ActionBar-Navigation-Bug](https://github.com/smarek/ActionBar-Navigation-Bug)

* * *

b.android.com 上的错误报告：[http ://code.google.com/p/android/issues/detail?id](http://code.google.com/p/android/issues/detail?id=51449) [=51449](http://b.android.com)

* * *

我目前正面临 ActionBar 的问题。

让我们有一个 ViewPager+PagerTitleStrip 和 3 个片段。
用户流：

*   打开应用程序
*   第一个片段已将导航模式设置为 NAVIGATION_MODE_LIST
    *   其他片段有 NAVIGATION_MODE_STANDARD
*   所有片段都有带有 SearchView 的选项菜单项
*   转到第二个或第三个并打开搜索（单击搜索项）
*   是否关闭搜索视图（您可以滑动回上一个片段）
*   转到第一个片段，看看，没有 NAVIGATION_MODE_LIST
*   在第一个片段打开搜索并关闭它
*   导航列表再次可见

**只添加MainActivity的代码和布局项目是标准的Android Application Project，minSdk 11，创建主Activity时，选择空白Activity和滑动视图+标题条**

**布局/activity_main.xml**

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <!--
    This title strip will display the currently visible page title, as well as the page
    titles for adjacent pages.
    -->

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:paddingBottom="4dp"
        android:paddingTop="4dp"
        android:textColor="#fff" />

</android.support.v4.view.ViewPager> 
```

**com/example/project/MainActivity.java**

```
// imports ommited

public class MainActivity extends FragmentActivity {

    SectionsPagerAdapter mSectionsPagerAdapter;
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    public static class DummySectionFragment extends Fragment {

        public static final String ARG_SECTION_NUMBER = "section_number";
        public static final int MENU_SEARCH = -1;
        protected MenuItem searchItem;
        protected SearchView mSearchView;

        public DummySectionFragment() {
            setHasOptionsMenu(true);
        }

        /*
        * Initializing menu items, adding only searchItem (aka SearchView in actionview)
        */
        @Override
        public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
            mSearchView = new SearchView(getActivity().getActionBar()
                    .getThemedContext());
            searchItem = menu
                    .add(Menu.NONE, MENU_SEARCH, Menu.NONE, "Search")
                    .setIcon(android.R.drawable.ic_menu_search)
                    .setActionView(mSearchView)
                    .setShowAsActionFlags(
                            MenuItem.SHOW_AS_ACTION_ALWAYS
                                    | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
            super.onCreateOptionsMenu(menu, inflater);
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            TextView textView = new TextView(getActivity());
            textView.setGravity(Gravity.CENTER);
            textView.setText(Integer.toString(getArguments().getInt(
                    ARG_SECTION_NUMBER)));
            return textView;
        }

        // Using setUserVisibleHint to operate with actionbar
        // (navigation mode) and visibility of option menu items
        // if isVisibleToUser, we're doing setup for current Fragment
        @Override
        public void setUserVisibleHint(boolean isVisibleToUser) {
            super.setUserVisibleHint(isVisibleToUser);
            if (isVisibleToUser) {
                    // setting navigation mode according to fragment
                ActionBar ab = getActivity().getActionBar();
                int mode = 0;
                    // ARG_SECTION_NUMBER is argument with numbers 1, 2, 3
                switch (getArguments().getInt(ARG_SECTION_NUMBER)) {
                default:
                case 1:
                    mode = ActionBar.NAVIGATION_MODE_LIST;
                            // Simple adapter added to spinner, to be visible
                    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(
                            getActivity(),
                            android.R.layout.simple_spinner_dropdown_item,
                            new String[] { "A", "B", "C" });
                    ab.setListNavigationCallbacks(spinnerArrayAdapter,
                            new OnNavigationListener() {

                                @Override
                                public boolean onNavigationItemSelected(
                                        int itemPosition, long itemId) {
                                    return false;
                                }
                            });
                    break;
                case 2:
                case 3:
                    mode = ActionBar.NAVIGATION_MODE_STANDARD;
                    break;
                }
                getActivity().getActionBar().setNavigationMode(mode);
            } else {
                    // resetting navigation mode
                if (getActivity() != null
                        && getActivity().getActionBar() != null)
                    getActivity().getActionBar().setNavigationMode(
                            ActionBar.NAVIGATION_MODE_STANDARD);
            }
        }
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public Fragment getItem(int position) {
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase();
            case 1:
                return getString(R.string.title_section2).toUpperCase();
            case 2:
                return getString(R.string.title_section3).toUpperCase();
            }
            return null;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T11:03:27.453

***漏洞***

我发布这个只是为了将讨论指向错误的方向。

`SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW`该错误与标志更相关。删除标志后，一切都会正常运行。这很可能是一个错误，但我再次不确定是否有合理的解释。

***解决方案***（不是真的）

当您在 中创建菜单项时`onCreateOptionsMenu`，删除*ORed* `MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW`

简单地说，改变这个

```
searchItem = menu
.add(Menu.NONE, MENU_SEARCH, Menu.NONE, "Search")
.setIcon(android.R.drawable.ic_menu_search)
.setActionView(mSearchView)
.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS
    | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

到

```
searchItem = menu
.add(Menu.NONE, MENU_SEARCH, Menu.NONE, "Search")
.setIcon(android.R.drawable.ic_menu_search)
.setActionView(mSearchView)
.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS); 
```

***没有查看器的错误***

我已经分叉了这个项目，这里没有具有相同行为[ActionBar-Navigation-Bug的 viewpager](https://github.com/sherifelkhatib/ActionBar-Navigation-Bug)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-12T10:13:05.353

当 SearchView 设置了 SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW 标志时，我遇到了类似的问题。我的解决方法是在切换到 NAVIGATION_MODE_LIST 后展开和折叠 SearchView 的 MenuItem：

```
actionBar.setNavigationMode( ActionBar.NAVIGATION_MODE_LIST );
actionBar.setDisplayShowTitleEnabled( false );
searchMenuItem.expandActionView();
searchMenuItem.collapseActionView(); 
```

它有点脏，但它为我完成了工作。

顺便说一句...同样的错误和解决方案也适用于 ActionBarSherlock。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T13:46:06.190

这是我解决这个错误的方法：

首先，我在活动中将 MenuItem 设为全局：

```
private  MenuItem searchItem; 
```

在活动中，我有以下方法：

```
public void hideSearch() 
{
     MenuItemCompat.collapseActionView(searchItem);
} 
```

然后在片段的 onCreateView() 方法中我调用这个方法，就在返回视图之前。然后我的微调器不再被隐藏。老实说，我不确定为什么会这样，但它确实对我有用。

# android - Android：使用 facebook graph api 删除喜欢和评论。需要更新代码

> ID：15002750
> 
> 赞同：1
> 
> 时间：2013-02-21T12:53:21.707
> 
> 标签：android, facebook, facebook-graph-api

我正在使用以下代码与使用图形 api 的 facebook 帖子不同

```
 if (facebook.isSessionValid()) {

            String response;
            try {
                response = facebook.request(objectId+"/likes", new Bundle(),"DELETE");
                System.out.println(response);
                if(response.equals("true")){
                    response_returned =true;
                    return response_returned;
                }else{
                    Toast.makeText(activity,response , Toast.LENGTH_LONG).show();
                }
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

它以前工作正常，但现在我收到以下错误：

**message":"(#200) 此应用程序禁止向其他用户发布动态消息","type":"OAuthException","code":200}}**

我正在使用 facebook old sdk 并且我无法切换到新的，因为已经完成了很多工作，所以是否有一种解决方法来与使用 old sdk 的评论不同。

# java - java优先级队列到队列适配

> ID：15002763
> 
> 赞同：1
> 
> 时间：2013-02-21T12:53:46.177
> 
> 标签：java, queue, priority-queue

我有一个优先级队列，它按日期顺序列出了来自 sql 数据库的大量作业。然后我得到了最接近的DeadlineJob函数，它得到了最高职位，检查是否有任何其他工作具有相同的日期，然后比较优先级以查看哪个是最高职位。然后我得到了最高职位。

查找原始队列顶部作业：

```
public JobRequest closestDeadlineJob(int freeCPUS) {
        // find top job to determine if other jobs for date need to be considered
        JobRequest nextJob = scheduledJobs.peek(); // return top most job

        if (nextJob != null) {

            System.out.println("Found top EDF job:");
            printJob( nextJob );

            // what is it's date?
            Date highestRankedDate = nextJob.getConvertedDeadlineDate();

            // create a temporary queue to work out priorities of jobs with same deadline
            JobPriorityQueue schedulerPriorityQueue = new JobPriorityQueue();

            // add the top job to priority queue
            //schedulerPriorityQueue.addJob(nextJob);

            for (JobRequest jr : scheduledJobs) {

                // go through scheduled jobs looking for all jobs with same date
                if (jr.getConvertedDeadlineDate().equals(highestRankedDate)) {
                    // same date deadline, soadd to scheduler priority queue
                    schedulerPriorityQueue.addJob(jr);
                    System.out.println("Adding following job to priority queue:");
                    printJob(jr);
                }
            }

            JobRequest highestPriorityJob = schedulerPriorityQueue.poll();
            // this is the item at the top of the PRIORTY JOB queue to return 

            // remove that item from scheduledJobs
            scheduledJobs.remove(highestPriorityJob);

            return highestPriorityJob;
        } else {
            return null;
        }
    } 
```

以下代码将顶级作业处理到队列中：

```
 public void processNextJob() {
        /*
         * 1\. get # of free CPU's still avaialble
         * 2\. get top most job from priority queue
         * 3\. run job - put to CPU queue
         * 4\. develop a CPU queue here
         * 5\. count cores against freeCPUS and some sort of calculation to sort run times
         */
        int freeCPUS = 500;
        int availableCPUS = 0;
        Queue q = new PriorityQueue();

//        while(freeCPUS >= 500)
//        {
//           
//        }

        JobRequest nextJob = schedulerPriorityQueue.closestDeadlineJob(freeCPUS); // returns top job from queue
        if (nextJob != null) {
            System.out.println("Top priority / edf job:");
            System.out.print(nextJob.getUserID() + "-->");
            System.out.print(nextJob.getStartDate() + "--START-->");
            System.out.print(nextJob.getEndDate() + "---END-->");
            System.out.print(nextJob.getDeadDate() + "--DROP-->");
            System.out.print(nextJob.getDepartment() + "-->");
            System.out.print(nextJob.getProjectName() + "-->");
            System.out.print(nextJob.getProjectApplication() + "-->");
            System.out.print(nextJob.getPriority() + "--PRIORITY-->");
            System.out.print(nextJob.getCores() + "-->");
            System.out.print(nextJob.getDiskSpace() + "-->");
            System.out.println(nextJob.getAnaylsis());

            // now got correct job based on earliest deadline / priority
            // implement a FIFO queue here / execution stack
            // add next job here
        } else {
            System.out.println("Job = null");
        } 

    } 
```

我需要做的是修复我的糟糕尝试或适应，将我的最接近的DeadlineJob 中的作业放入队列中，然后在我达到 500 个核心限制时停止将它们放入队列中。目前，我只是陷入了 while true 下方的 for 循环中，而且我认为我设定的方式在离开循环后甚至都行不通。

有什么想法吗？

**编辑**

```
public void processNextJob() {
        /*
         * 1\. get # of free CPU's still avaialble
         * 2\. get top most job from priority queue
         * 3\. run job - put to CPU queue
         * 4\. develop a CPU queue here
         * 5\. count cores against freeCPUS and some sort of calculation to sort run times
         */
        int freeCPUS = 500;
        int availableCPUS = 0;

        JobRequest nextJob = schedulerPriorityQueue.closestDeadlineJob(freeCPUS); // returns top job from queue
        if (nextJob != null) {
            System.out.println("Top priority / edf job:");
            printJob( nextJob );
            // go through scheduled jobs looking for all jobs with same date
            if (nextJob.getCores() <= freeCPUS) {
                // same date deadline, soadd to scheduler priority queue
                schedulerPriorityQueue.addJob(nextJob);
                System.out.println("Adding following job to execution queue:");
                printJob( nextJob );     
                // can use this to get the next top job but need to add calculations to printout the next top job aslong as CPU less than 500
//                schedulerPriorityQueue.closestDeadlineJob(freeCPUS);
//                schedulerPriorityQueue.addJob(nextJob);
            } else if (nextJob.getCores() > freeCPUS) {
                System.out.println("Queue temporarily full");
            }
            // now got correct job based on earliest deadline / priority
            // implement a FIFO queue here / execution stack
            // add next job here
        } else {
            System.out.println("Job = null");
        }

    } 
```

我想我需要在上面实现一个循环并移出 if 语句说接受下一项工作，如果低于 500，再次循环并获得另一个然后将其放入某种新队列中，当满足 500 个核心标准时停止添加新队列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:38:53.873

我会`java.util.concurrent`尽可能多地使用包中的实用程序。

首先，您可以`PriorityBlockingQueue`使用 a定义 a`Comparator`按日期然后优先级对作业进行排序，因此具有最早日期和最高优先级的作业始终位于队列的开头：

```
PriorityBlockingQueue<JobRequest> q = new PriorityBlockingQueue<Test1.JobRequest>(0, new Comparator<JobRequest>()
  {
    @Override
    public int compare(JobRequest o1, JobRequest o2)
    {
      int dateComparison = o1.getDate().compareTo(o2.getDate());
      if (dateComparison != 0)
        return dateComparison;
      // assume higher number means higher priority
      return o2.getPriority() - o1.getPriority();
    }
  }); 
```

我仍然不确定我是否了解您对内核的要求，但您有两种选择。如果您希望最多同时执行 500 个作业，则拒绝新项目，您可以使用以下执行器`SynchronousQueue`：

```
ExecutorService executor = new ThreadPoolExecutor(0 /*core size*/, 
                                                  500 /*max size*/, 
                                                  0 /*keep alive*/, 
                                                  TimeUnit.SECONDS, 
                                                  new SynchronousQueue<Runnable>()); 
```

或者，如果您希望同时执行更少的作业，您可以在满时使用`ArrayBlockingQueue`which 块：

```
ExecutorService executor = new ThreadPoolExecutor(0 /*core size*/, 
                                                  5 /*max size*/, 
                                                  0 /*keep alive*/, 
                                                  TimeUnit.SECONDS, 
                                                  new ArrayBlockingQueue(500-5)<Runnable>()); 
```

然后从队列中拉出作业并执行它们，处理被拒绝的执行，但是你想要：

```
while (!isFinished)
{
  JobRequest job = q.take();
  try
  {
    executor.execute(job);
  }
  catch (RejectedExecutionException e)
  {

  }
} 
```

但是，如果您只想同时运行 500 个作业并且后续作业排队，只需传入 a`LinkedBlockingQueue`或，使用其中一种实用程序方法 on `Executors`，例如`newFixedThreadPool(int nThreads)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:58:40.110

找到我的问题的解决方案：

```
public void processNextJob() {
        /*
         * 1\. get # of free CPU's still avaialble
         * 2\. get top most job from priority queue
         * 3\. run job - put to CPU queue
         * 4\. develop a CPU queue here
         * 5\. count cores against freeCPUS and some sort of calculation to sort run times
         */
        int freeCPUS = 500;
        int availableCPUS = 0;
        JobRequest temp = new JobRequest();
        Queue q = new LinkedList();

        while (true) {
            int size = q.size();
            for (int i = 0; i < size; i++) {
                temp = (JobRequest) q.peek();
                if (temp != null) {
                    availableCPUS += temp.getCores();
                }
            }
            if ((freeCPUS - availableCPUS) >= 0) {
                JobRequest nextJob = schedulerPriorityQueue.closestDeadlineJob(freeCPUS - availableCPUS); // returns top job from queue
                if (nextJob != null) {
                    System.out.println("Top priority / edf job:");
                    printJob(nextJob);
                    q.add(nextJob);

                } else {
                    System.out.println("Job = null");
                }

            } else {
                break;
            }
        }
        if (temp != null) {

            System.out.println("Execution Queue");
            System.out.println(q);

        }

    } 
```

# visual-studio-2010 - AnkhSVN Visual Studio 冲突

> ID：15002764
> 
> 赞同：0
> 
> 时间：2013-02-21T12:53:46.073
> 
> 标签：visual-studio-2010, svn, version-control, visualsvn, ankhsvn

我刚刚为我被招募的一个新项目安装了 AnkhSVN。开发是在 Visual Studio 2010 中进行的。

在此之前，我安装了 VisualSVN - 这仍然安装。

我已经从 SVN 下载了源代码，但是当我尝试打开解决方案时，我收到以下错误：

> 活动解决方案或项目由与您选择的不同的源代码控制插件控制。如果您更改源代码管理插件，活动的解决方案或项目将被关闭。你想继续吗？

我已通过“工具 -> 选项 -> 源代码控制”将“当前源代码控制选项”设置为“AnkhSVN - Visual Studio 的 Subversion 支持”。

我已经检查了解决方案文件，我相信这是正确配置的：

```
GlobalSection(SubversionScc) = preSolution
Svn-Managed = True
Manager = AnkhSVN - Subversion Support for Visual Studio
EndGlobalSection 
```

这让我发疯。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T11:02:30.453

首先，您必须通过 Visual Studio 将项目签入到您的 PC，为此您需要一个解决方案文件来打开项目。请按照以下步骤操作：

**打开 Visual Studio -> 文件 -> Subversion -> 从 Subversion 打开 -> 然后从您的 SVN 存储库中选择解决方案文件 -> 选择一个目录来创建您的工作副本**

如果错误仍然存​​在，您需要检查是否存在同名文件夹，在您将获得**工作副本**的位置，或者您需要检查**工作副本**文件夹中是否存在任何解决方案文件。

# android - 我可以在 android 的线性布局中声明这种类型的动态复选框吗？

> ID：15002766
> 
> 赞同：1
> 
> 时间：2013-02-21T12:53:58.033
> 
> 标签：android, checkbox

![在此处输入图像描述](../Images/b6ca10d8f37ef1b93fae6b98893e4eab.png)我想为线性布局声明这种类型的复选框并获取每个复选框 id 以及选定和未选择的值
这种类型的复选框值得到

```
for(l=0;l<listCheckbox.size();l++)
                       {                    
 CheckBox edtCheckbox = (CheckBox)llremo.findViewById(l);
         boolean checked=edtCheckbox.isChecked();
                           if (checked)
                           {  
                               Log.i("was checked",edtCheckbox.getText().toString());
                               strchekBocname=edtCheckbox.getText().toString();
                               Log.v("strchekBocname checkbox post string", strchekBocname);
                               maparray.put("Value", strchekBocname);   
                               listaddalldatofform13formValue.add(strchekBocname);

                           } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T06:19:05.947

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Employee Average Salary" />
    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:id="@+id/grouplayout"
        >

</LinearLayout>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Employee Average Qualification" />
    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:id="@+id/grouplayout2"
        >

</LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

**MainActivity.java**

```
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity{
    String checkboxtext[]={"10000","20000",">20000","Mixed"};
    String checkboxtext1[]={"Graduate","Post Graduate"};
    LinearLayout layout,layout2;
    Button button1;
    String strCheck1 = "",strCheck2 = "";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.activity_main);
        layout=(LinearLayout)findViewById(R.id.grouplayout);
        layout2=(LinearLayout)findViewById(R.id.grouplayout2);
        button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                 JSONObject obj=new JSONObject();
                 try {
                    obj.put("Employee Average Salary",strCheck2);
                     obj.put("Employee Qualification",strCheck1);
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                 String jsonstring=obj.toString();
                 System.out.println(jsonstring);
            }
        });
         for(int i=1;i<=checkboxtext.length;i++)
            {
            final CheckBox checkbox=new CheckBox(this);
            checkbox.setId(i);
            checkbox.setText(checkboxtext[i-1]);
            layout.addView(checkbox);
            checkbox.setOnClickListener(new View.OnClickListener() {
                public void onClick(View arg0) {
                    doCheck(checkbox);
                }
            });
            }
         for(int j=1;j<=checkboxtext1.length;j++)
         {
         final CheckBox checkbox1=new CheckBox(this);
         checkbox1.setId(j);
         checkbox1.setText(checkboxtext1[j-1]);
         layout2.addView(checkbox1);
         checkbox1.setOnClickListener(new View.OnClickListener() {
             public void onClick(View arg0) {
                 doCheck2(checkbox1); 
             }
         });
         }
        super.onCreate(savedInstanceState);
    }

    protected void doCheck2(CheckBox check1) {
        try {
            Toast.makeText(this, check1.getText(), Toast.LENGTH_SHORT).show();
            for(int i=0;i<layout2.getChildCount();i++)
            {
                CheckBox checkbox=(CheckBox)layout2.getChildAt(i);
                checkbox.setChecked(false);
            }
            check1.setChecked(true);
            strCheck1 = check1.getText().toString();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    protected void doCheck(CheckBox check) {
        try {
            Toast.makeText(this, check.getText(), Toast.LENGTH_SHORT).show();
            for(int i=0;i<layout.getChildCount();i++)
            {
                CheckBox checkbox=(CheckBox)layout.getChildAt(i);
                checkbox.setChecked(false);
            }
            check.setChecked(true);
            strCheck2 = check.getText().toString();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

**单击按钮后复制此代码并检查 logcat 中的值。**

# java - 未绑定 sessionScoped ManagedBean 值

> ID：15002767
> 
> 赞同：0
> 
> 时间：2013-02-21T12:54:04.283
> 
> 标签：java, jsf, managed-bean, session-scope

我有一个 SessionScoped ManagedBean。我想重置这个 bean 的所有值。我正在使用 JSF 2.1.0-b03

```
@ManagedBean(name = "myBean")
@SessionScoped
public class MyBean implements Serializable {
    private static final long serialVersionUID = 1L;
    private String name;
} 
```

现在，我有了将所有值重置为 null 的方法。但我不喜欢这个解决方案。

```
private void unboundValue() {
    name= null;
} 
```

**如何从 SessionScoped ManagedBean 中解除绑定值？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:03:23.330

手动重置似乎是正确的方法。如果您想使整个会话无效，而不仅仅是一个 bean，请调用`session.invalidate()`. 如果只是一个bean，手动字段重置是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:18:14.410

我认为您可以从*ExternalContext的会话映射中删除**SessionScoped* managedbean。下次访问 bean 时，将使用默认值创建一个新 bean，或者您只需创建一个新 bean 并将其插入会话映射中，从而替换*旧*的。当然，这个过程有点开销，但如果你有很多需要重新设置的值，那可能是一种解决方案。

 **否则，您将需要某种*reset/unboundValue()*方法，就像您已经说过的那样。**

# lua - 从 C 代码在 Lua 中创建对象

> ID：15002769
> 
> 赞同：0
> 
> 时间：2013-02-21T12:54:07.040
> 
> 标签：lua

我想在 lua 中创建一个具有定义函数的代理类。所以，如果我有一个`soldier.lua`像这样的 lua 文件：

```
function Agent:init()
   io.write("Agent init\n")
   if self then
      self.x = 4
      self:test()
   end
end

function Agent:test()
   io.write("Agent test\n")
end 
```

从 C 代码中，我可以加载它，创建 Agent 表，如：

```
// create Agent class on Lua
lua_newtable( L );
lua_setfield(L, LUA_GLOBALSINDEX, "Agent");
// execute class file
auto ret = luaL_dofile( L, filename.c_str() ); 
```

现在我想`self`从 C 创建一个假对象来调用`Agent:init`，并且 a) self.x 行调用一个 C 函数来注册数据。并且 self.test() 行正确调用了 lua 函数 Agent:test。但我无法让它工作。

例如：

```
lua_getfield( L, LUA_GLOBALSINDEX, "Agent" );
lua_getfield( L, -1, "init");
lua_newtable( L );
lua_getfield( L, LUA_GLOBALSINDEX, "Agent" );
lua_setmetatable( L, -2 );
lua_getfield( L, LUA_GLOBALSINDEX, "Agent" );
lua_getmetatable( L, -1 );
lua_pushcfunction( L, testnewindex );
lua_setfield( L, -2, "__newindex" );
ret = lua_pcall( L, 1, 0, 0 ); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:02:37.450

使用解决：

*   `Agent`在 lua 文件执行后设置元表
*   当`Agent`我调用文件函数时用作它自己的假对象：

在`lua_dofile(...)`我打电话后：

```
lua_getfield( L, LUA_GLOBALSINDEX, "Agent" );
luaL_newmetatable( L, "Agent" );
lua_pushstring(L, "__newindex");
lua_pushcfunction( L, agent_newindex );
lua_settable( L, -3 );
lua_pushstring(L, "__index");
lua_pushcfunction( L, agent_index );
lua_settable( L, -3 );
lua_setmetatable( L, -2 ); 
```

然后，对函数的调用通过以下`Agent:init`方式完成：

```
lua_getfield( L, LUA_GLOBALSINDEX, "Agent" );
lua_getfield( L, -1, "init");
lua_getfield( L, LUA_GLOBALSINDEX, "Agent" );
ret = lua_pcall( L, 1, 0, 0 ); 
```

# r - 从R中的循环返回单独的txt文件

> ID：15002772
> 
> 赞同：2
> 
> 时间：2013-02-21T12:54:08.657
> 
> 标签：r, for-loop

我想在一个循环中返回每次迭代的结果以写入一个单独的文本文件，但由于某种原因它似乎不起作用。我的代码是：

```
 for (i in length(traject)){        
      player <-subset(traject[[i]],subset=(dt==1),)
      test<-player  
      write.table(test, file=paste(i, "test.txt", sep=" "))
      head(test)
       } 
```

哪个只返回最后一次迭代，在单独的文本文件中生成所有迭代的结果我做错了什么？

额外信息：该循环用于每个单独的玩家（具有不同的 ID）通过 as.ltraj() 从 adehabitatLT 包中获取数据。

*（我知道这个论坛上有类似的问题，但没有人能帮助我解决这个问题）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:56:26.803

也许你应该`1:length(traject)`在你的`for`循环中添加：

```
for (i in 1:length(traject)){   do something } 
```

您的循环仅返回一个迭代（最后一个），因为您的索引只是`length(traject)`您应该使用`1:length(traject)`索引`i`从第一个元素一直移动到最后一个元素，您也可以替换`1:length(traject)`为`seq_len(length(traject))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:57:58.353

正如@Jilber 指出的那样，您只是在迭代一个数字。

仅供参考：如果您想遍历向量或列表中的所有项目，您可以简单地做

```
 for (i in traject) {
  #....
 } 
```

# c# - 使用 c# 中的 Value 属性从 Xml 反序列化枚举

> ID：15002777
> 
> 赞同：5
> 
> 时间：2013-02-21T12:54:21.870
> 
> 标签：c#, xml, enums, deserialization

我正在尝试用 C# 编写一个用于书籍导入工具的 ONIX。我首先使用 Xsd2Code 创建类，并获得了一个包含所有属性的巨大文件，经过一些调整后在反序列化时不会产生任何错误。

我试图一次将整个元素反序列化为内存中的一个大对象，然后对其进行处理（例如将其保存到数据库）。

Xsd2Code 生成类的方式，除了有很多属性之外，至少对我来说有点奇怪。

这是应该是 Product 对象的属性的类之一：

```
public partial class NotificationType
{
    public NotificationTypeRefname refname { get; set; }
    public NotificationTypeShortname shortname { get; set; }

    public SourceTypeCode sourcetype { get; set; }

    public List1 Value { get; set; }
} 
```

我想请您注意这一行：

```
 public List1 Value { get; set; } 
```

“List1”是一个枚举，定义如下：

```
public enum List1
{
    [System.Xml.Serialization.XmlEnum("01")]
    Item01,

    [System.Xml.Serialization.XmlEnum("02")]
    Item02, etc... 
```

我的问题是，在反序列化期间，所有字段都正确反序列化，但枚举除外。

我尝试用 XmlEnum("NotificationType") 等装饰属性......什么都没有！

这是我的反序列化代码：

```
var p = new Product();
XmlSerializer pserializer = new XmlSerializer(p.GetType());
object pDeserialized = pserializer.Deserialize(reader);
p = (Product) pDeserialized; 
```

这是这个元素在 XML 中的样子：

```
<NotificationType>03</NotificationType> 
```

Product 对象在 C# 中的属性是：

```
public NotificationType NotificationType { get; set; } 
```

如果我将其更改为：

```
public List1 NotificationType { get; set; } 
```

反序列化正确显示“Item03”，这意味着它确实读取了 XML 中的任何内容。如果我像上面那样保留它，NotificationType 类的“Value”属性永远不会被填充，并且总是显示 Item01（Enum 的默认值）。

关于为什么这个 Value 属性适用于某些类型（字符串）但不适用于枚举，我已经用尽了关于 SO 和网络搜索的所有可能问题。我错过了什么吗？

对不起，很长的问题和代码。感谢任何人都可以在这个问题上阐明的任何观点。现在已经坚持了一整天了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:22:52.583

尝试这个：

```
public partial class NotificationType
{
    public NotificationTypeRefname refname { get; set; }
    public NotificationTypeShortname shortname { get; set; }
    public SourceTypeCode sourcetype { get; set; }

    public List1 Value { get {
        return (List1)Enum.Parse(typeof(List1), 
            Enum.GetName(typeof(List1), int.Parse(List1Value) - 1));
    }}

    [XmlText]
    public string List1Value { get; set; }
} 
```

**[更新]**

自从：

1.  我也尝试过首先用`XmlText`属性装饰成员，但是发生了以下异常：

    > 无法序列化“ConsoleApplication1.NotificationType”类型的对象。考虑将 XmlText 成员“ConsoleApplication1.NotificationType.Value”的类型从 ConsoleApplication1.List1 更改为字符串或字符串数​​组。

2.  并且您想避免我在答案中的初始方法，

真正的解决方案是，除了将`XmlText`属性应用于之外`Value`，所有其他成员都应该用`XmlIgnoreAttribute`. 我相信`XmlText`单独使用不是一个有保证的解决方案，因为结果取决于其他成员的存在。

```
public class NotificationType
{
    [XmlIgnore] // required
    public NotificationTypeRefname refname { get; set; }
    [XmlIgnore] // required
    public NotificationTypeShortname shortname { get; set; }
    [XmlIgnore] // required
    public SourceTypeCode sourcetype { get; set; }

    [XmlText] // required
    public List1 Value { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:27:36.533

尝试添加`[System.Xml.Serialization.XmlTextAttribute()]`到`public List1 Value { get; set; }`属性。

# css - 嵌入文本和动画 gif 的自动调整背景大小

> ID：15002783
> 
> 赞同：0
> 
> 时间：2013-02-21T12:54:51.420
> 
> 标签：css

请看一下[troop981.com](http://www.troop981.com/default/)：

在不同尺寸的显示器上查看或放大时，带有 eagle.gif 和可编辑文本的 Mountains.jpg 看起来像是悬在页面边缘。

我想制作 Mountains.jpg，并且 jpg 顶部的文本根据用户视图重新调整宽度和高度的大小。

下面的代码是页面的 HTML。我会很感激任何帮助，因为我对 HTML 或 CSS 一无所知，并且构建该网站的人不再与我们在一起。

```
<style>
    .background_image
    {
    background:url(http://www.troop981.com/default/portals/0/Tatra_Mountains_Panorama_01.jpg);      /* image to display */
    width:1602px;                     /* width of image */
    height:332px;                    /* height of image */
    overflow:hidden;                 /* so div won't change size */
    }
    .eagle_image
    {
    height: 222px; /* use the actual height of the eagle gif */
    width: 250px; /* use the actual width of the eagle gif */
    background:url(http://www.troop981.com/default/portals/0/0049.gif) no-repeat; /* use your eagle filename */
    position: absolute; top: 50px;    /* adjust these to see the eagle move to where you want */
    left: 40px;                               /* ditto from above */
    }
    .text_properties
    {
    padding-left:2px;                /* position of text in inner div */
    padding-top:2px;                 /* position of text in inner div */
    padding-right:2px;               /* position of text in inner div */
    padding-bottom:2px;              /* position of text in inner div */
    color:darkgreen;                   /* text color */
    font-size:40px;                  /* font size */
    font-weight:bold;                /* font weight */
    font-family:script;               /* font family */
    margin-left:400px;                 /* left position of text */
    margin-top:50px;                 /* top position of text */
    }
</style>
<div class="background_image">
<div class="eagle_image"></div>
<div class="text_properties">Congratulations to Patrick Guilfoy &ndash; Troop 981&rsquo;s 104th Eagle Scout</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:42:25.450

为什么要缩小背景图像？我认为最好不要缩小它，而只是在您查看较小尺寸的页面时使文本可缩放。

尝试使用以下方法更改 .background_image：

```
.background_image
    {
    background:url(http://www.troop981.com/default/portals/0/Tatra_Mountains_Panorama_01.jpg);      /* image to display */
    width:100%;                     /* width of image */
    height:332px;                    /* height of image */
    overflow:hidden;                 /* so div won't change size */
    } 
```

这样它只会减少背景图像的宽度（而不是高度），并且 tekst 将调整到屏幕的大小。

# c# - C# 加密密码

> ID：15002784
> 
> 赞同：1
> 
> 时间：2013-02-21T12:55:01.197
> 
> 标签：c#, asp.net-mvc, password-encryption, password-hash

我有一个用户的密码字段，当它保存到数据库时，密码是加密的。

另外，如果我去编辑一个用户，密码字段是散列的。

但是由于加密的长度，散列字段有数百个字符长。

有没有办法显示可能只有 8 个字符？

这是保存后显示的，不太理想。

![加密](../Images/b975190b2f835db1449c091f2d5ffa65.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:00:09.237

你不能做一个单独的选项来更改密码，并在编辑用户密码字段中显示类似`*********`. 如果在用户编辑期间您在密码字段中输入了**新**内容，则再次通过加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:01:35.577

这里有几件事让我担心，其中之一是，正如 RB 在评论中指出的那样，您正在互换使用加密和散列这两个术语。区别非常重要。简单来说，

*   **加密**是指您以一种可以逆转的方式掩盖某些东西。一个例子（请注意一个不好的例子）是用数字 1 代替字母 A，用数字 2 代替字母 B 等等。“你好”会变成“7 5 12 12 15”，对于没有钥匙的人来说，这看起来毫无意义，但如果你知道怎么做，它是可逆的。
*   **散列**是一种单向数学函数，它接受输入并将其转换为看似毫无意义的独特输出。简单来说，您几乎可以假设进入散列的每条唯一信息都将作为唯一值出现。但是，鉴于这种独特的输出，没有办法逆转它并发现输入是什么。

为了进一步扩展上述内容，如果我正在创建一个要求用户注册的网站，我会使用他们选择的密码，然后我会对该密码进行哈希处理，然后将该密码存储在安全的地方。然后我会丢弃用户实际输入的密码。下次该用户访问我的站点时，他们将输入他们的密码，我将再次对其进行哈希处理，然后我将根据我之前保存的内容检查哈希输出，并且由于相同的单词将始终产生相同的输出，如果这两个哈希匹配我会授予访问我的网站。

我还敦促您了解有关**加盐**密码的信息[（更多信息可以在 Wikipedia 上找到）](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)，这在当今几乎是必不可少的。

现在，关于你的实际问题。再一次（我希望 RB 不介意我扩展他的出色评论）您在密码字段中看到的内容（***** ****）只是浏览器隐藏您的密码以免被窥探的一种方式。它看起来像星星的事实并不能使它安全。此外，您应该只从该输入字段中读取。你永远不应该写信给它。向您的密码字段写入任何内容都可以让攻击者了解有关您正在使用哪种散列或安全性的信息。

您可以做的最好的事情是将用户编辑屏幕上的密码字段留空。如果 MVC 为您自动填充它，那么它建议我将输入框的名称更改为与您的基础对象不相关的名称。可以在[Microsoft 的 asp.net 网站](http://www.asp.net/mvc/overview/security)上找到有关 MVC 安全性的更多信息。

# html - 页脚背景始终位于底部

> ID：15002785
> 
> 赞同：0
> 
> 时间：2013-02-21T12:55:05.550
> 
> 标签：html, css

我的页面页脚有问题。我希望始终在页面底部有一个页脚（背景）。如果浏览器变大，他的身高应该会增加。我见过stickyfooter，但在这种情况下高度不会改变。谢谢你。

[http://img688.imageshack.us/img688/2499/layoutus.png](http://img688.imageshack.us/img688/2499/layoutus.png)

这是图像的链接，可以更好地解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:58:07.630

将正文的背景颜色设置为页脚的背景颜色，将内容包装在`div`内容区域的首选背景颜色中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:09:42.193

在你的照片中，身体保持不变，只有页脚在增长；为此，您必须为您的身体指定一个固定的高度。

如果您希望它们都增长，则代码如下：

HTML

```
<div id="main">I'm the body</div>
<div id="footer">I'm the enlarging footer</div> 
```

CSS

```
body, html{
    height: 100%;
}

#main{    
    background:silver;
    min-height: 80%;
    min-width: 100%;
    height: 80%;
}
#footer{    
    background: green;
    position: fixed;
    bottom: 0;
    min-height: 20%;
    min-width: 100%;
} 
```

**演示**：http: [//jsfiddle.net/TyhLL/](http://jsfiddle.net/TyhLL/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T13:09:05.247

我也遇到了同样的问题

[灵活的粘页脚](http://pixelsvsbytes.com/blog/2011/09/sticky-css-footers-the-flexible-way/)

这篇文章可能对你很有帮助。

# asp.net-mvc-3 - 将 SelectList 值绑定到 Post Action

> ID：15002787
> 
> 赞同：0
> 
> 时间：2013-02-21T12:55:08.307
> 
> 标签：asp.net-mvc-3

请给我一些答案！我总是有这个烦恼！这是我的控制器：

```
public ActionResult Create()
        {
            IEnumerable<SelectListItem> items =
            _categoryService.GetAllCategory().Select(c => new SelectListItem
            {
                Value = c.Id.ToString(),
                Text = c.Name
            });

            ViewBag.Categories = items;
            return View();
        }

        [HttpPost]
        public ActionResult Create(ProductViewModel productViewModel,Guid categoryId)
        {
            if (ModelState.IsValid)
            {
                _productService.Create(productViewModel);
            }
            return View();
        } 
```

这是我的观点：

```
@model Statos.Service.Products.ProductViewModel
@{
    ViewBag.Title = "Create";
}
<fieldset>
    @using (Html.BeginForm())
    {
        <div>
            @Html.LabelFor(product => product.Name)
            @Html.TextBoxFor(Product => Product.Name)
        </div>
        <div>
            @Html.LabelFor(product => product.Brand)
            @Html.TextBoxFor(product => product.Brand)
        </div>
        <div>
            @Html.LabelFor(product => product.Category)
            @Html.DropDownList("categoryId", (IEnumerable<SelectListItem>)ViewBag.Categories)
        </div>

        <div>
            @Html.LabelFor(product => product.Price)
            @Html.TextBoxFor(product => product.Price)
        </div> 
        <div>
            @Html.LabelFor(product => product.Description)
            @Html.TextBoxFor(product => product.Description)
        </div>

         <div>
            <input type="submit" value="Add" />
        </div>
    }
</fieldset> 
```

现在如何将类别绑定到发布操作，在提交页面后出现此错误：“没有具有键 'categoryId' 的 'IEnumerable' 类型的 ViewData 项目”。所以我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:34:25.800

您遵循的过程不正确这是它在控制器中的外观，这是来自我当前正在运行的项目

```
 public ActionResult Create()
        {

            var model = new UserCreateViewModel
                            {
                                Roles = new SelectList(GetRoles(), "Id", "Name"),
                                Ranks = new SelectList(GetRanks(), "Id", "Name")
                            };

            return View(model);
        } 
```

鉴于它会有点像这样

```
<div class="control-group">
            <div class="controls">
                <div class="editor-label span4 pull-left nomargin">
                    @Html.LabelFor(m => m.Roles)
                </div>
                <div class="editor-field">
                    @Html.DropDownListFor(m => m.User.RoleId, @roles, Index.SelectRole)
                    @Html.ValidationMessageFor(m => m.User.RoleId)
                </div>
            </div>
        </div> 
```

# php - 服务器名称以及文件夹结构php

> ID：15002793
> 
> 赞同：1
> 
> 时间：2013-02-21T12:55:23.180
> 
> 标签：php

我现在手头有一个小任务。我想从一个页面向新注册的用户发送一封电子邮件，并附上一个链接以确认电子邮件地址。

在电子邮件代码中，我用来`$_SERVER[SERVER_NAME]`生成链接。如果应用程序位于域的根目录中，这可以正常工作。例如：

`www.example.com/file.php`

但我有一个额外的文件夹，即`www.example.com/folder_name/file.php`

有什么方法可以生成链接 www.example.com/folder_name/file.php 而无需硬编码文件夹的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:01:57.760

要链接到同一文件夹中的另一个脚本，您应该能够执行以下操作：

```
$_SERVER['SERVER_NAME'].dirname($_SERVER['SCRIPT_NAME']).'/myscript.php'; 
```

# sql - 如何计算同一张表的不同组的行之间

> ID：15002798
> 
> 赞同：0
> 
> 时间：2013-02-21T12:55:32.933
> 
> 标签：sql

有一张桌子：

```
Year   Month   Value
2011   1       500
2011   2       550
2011   3       600
...
...
2012   1       600
2012   2       750
2012   3       930 
```

有没有一种方法可以计算同一月份/不同年份的值之间的差异，以便得到如下结果：

```
Month    Value
1        100
2        200
3        330
... 
```

我试图做类似的事情：

```
select month, a.value-b.value
from
  (select month, value from table where year = 2012) a,
  (select month, value from table where year = 2011) b 
```

但输出是 12 个月（选择 a (2012) * 选择 b (2011) 的 12 个月..

* * *

编辑：抱歉缺少重要信息：

正在通过 odbc:jdbc 桥对 excel 表进行查询。

因为“from”子句总是这样：[sheet1$] 我无法创建任何连接或大小写:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:00:45.090

你非常接近如何得到结果。我建议使用与此类似的方法，*将*数据转换为列，然后您可以获取每年之间的差异：

```
select month,
  Year2012-Year2011 as Diff
from
(
  select month,
    sum(case when year = 2011 then value end) Year2011,
    sum(case when year = 2012 then value end) Year2012
  from yourtable
  group by month
) src 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/16737/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:01:29.487

您的查询不起作用，因为您在表上执行`CROSS JOIN`（因为`,`），因此每一行都与另一个表中的每一行匹配，而不是`INNER JOIN`一个月。

**修改您的查询：**

```
select a.month, a.value-b.value
from
  (select month, value from table where year = 2012) a
  JOIN
  (select month, value from table where year = 2011) b
  ON a.month = b.month 
```

**更快的查询：**

```
select a.month, a.value-b.value
from
  yourTable a
  join yourTable b
    on a.month = b.month
  where a.year = 2012 and b.year = 2011 
```

**对于每年每个月的多行：**

```
select a.month, a.value-b.value
from
  (select month, sum(value) as value
   from yourTable where year = 2012
   group by month) a
  join
  (select month, sum(value) as value
   from yourTable where year = 2011
   group by month) b
    on a.month = b.month 
```

[SQLFiddle](http://www.sqlfiddle.com/#!3/a9a97/7)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:01:56.680

像这样的东西？假设`year`/`month`是唯一的。

```
SELECT
    a.month,
    a.value - b.value
FROM
    tablename a
    INNER JOIN tablename b
        ON a.year - 1 = b.year
        AND a.month = b.month 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T13:58:51.820

只需`where`在您的查询中添加子句..

```
select month, a.value-b.value
from
  (select month, value from table where year = 2012) a,
  (select month, value from table where year = 2011) b
where a.month = b.month 
```

您正在做的是交叉连接，将第一个表中的每一行与第二列的每一行组合在一起，其中将过滤掉与不同月份数匹配的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T13:00:48.483

你想做一个自我加入。一般的想法是从同一个表中选择两次，但使用不同的别名。

```
select t1.something, t2.something
from yourtable t1 join yourtable t2 on something
etc 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T13:19:34.527

select a.month,(a.value-(select b.value from @tablename b where b.year = @year2 and b.month = a.month)) as diff from @tablename a where a.year = @year1

我想它会对你有所帮助。实际上，正如我们所知，我们只能在减法中使用两个数字，因此我在这里使用了 year1 和 year 2。将您的表名放在正确的位置

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T14:24:57.253

此外，如果您的示例中每月只有 2 个值，并且您的 SQL 版本中提供了分析函数，那么这将起作用。您可以对它进行不同的分区...：

```
SELECT distinct month, (l_val - f_val) value
  FROM
  (
  SELECT year, month, month_val
       , FIRST_VALUE(month_val) OVER (PARTITION BY month ORDER BY month) f_val 
      , LAST_VALUE(month_val) OVER (PARTITION BY month ORDER BY month) l_val 
    FROM your_table
  )
 ORDER BY 1
 /

MONTH    VALUE
----------------
1        100
2        200
3        330 
```

在我个人看来，内联视图比加入更好，虽然你无论如何都会加入，但它仍然更具可读性，更易于调试......

# javascript - 与左侧 google 钱包徽标对齐

> ID：15002800
> 
> 赞同：0
> 
> 时间：2013-02-21T12:55:53.313
> 
> 标签：javascript, html, android-pay

在我的网站[http://www.theprinterdepo.com](http://www.theprinterdepo.com)的左下角，我有谷歌钱包的标志。

我用他们提供的代码渲染了这个标志，但是我不能把它对齐到左边。我在他们提供的 div 中尝试了样式左对齐，但看起来代码是由他们用 Javascript 代码重写的。

```
<div id="googleCheckoutLogo"></div><script src='https://checkout.google.com/buttons/logos?merchant_id=909856425434813&loc=en&f=png' ></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:58:49.160

只需将这些行添加到您的 CSS

```
#badge_container {
    padding-left: 0 !important;
} 
```

该元素（可能由谷歌放置）有一个`padding-left`集合。你不想要那个。通过使用`!important`关键字，此属性将保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:57:54.903

你能定位CSS吗？如果是这样，您可以从`#badge_container {}`

# makefile - moc Makefile 规则

> ID：15002806
> 
> 赞同：1
> 
> 时间：2013-02-21T12:56:11.587
> 
> 标签：makefile, gnu-make, moc

在我搜索的任何地方，我都会看到**这个有用的规则**

```
moc_%.cpp: %.h
   $(MOC) $(DEFINES) $(INCLUDES) $< -o $@ 
```

它不起作用。Makefile 去

```
MOC:= /path/to/moc

.PHONY clean:
    rm moc_*.cpp

moc: moc_file.cpp

#moc_file.cpp: file.h # this works
#    $(MOC) $< -o $@

moc_%.cpp: %.h
    $(MOC) $< -o $@ 
```

未注释的注释行有效，但一般规则无效。它打印出来`No rule to make target 'moc_file.cpp', needed by 'moc'`任何人都可以提供任何见解为什么它没有或我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:22:30.270

根据天气或一天中的时间，可能会或可能不会使用模式规则`make`（你能说我不喜欢它们吗？）。相反，通过在它们前面加上您希望它们应用到的目标列表将它们变成*静态模式规则：*

```
moc_file.cpp: moc_%.cpp: %.h
    $(MOC) $< -o $@ 
```

# java - 成员方法在整个类上同步

> ID：15002807
> 
> 赞同：0
> 
> 时间：2013-02-21T12:56:16.603
> 
> 标签：java, synchronized

经过一番快速搜索，我无法找到明确的答案。

有没有更优雅的方法来同步整个类的整个成员方法（绑定在实例上）？这意味着方法可以由多个线程在多个实例上调用，但一次只能由一个线程调用。它也可以写成同步块。

（为了说明，该方法将它的实例插入到共享缓存中。）

```
class DataObject {

  public putInCache() {
    synchronized(getClass()) {

      // ... do some stuff
      cache.insert(this);
      // ... do some more stuff

    }
  }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:00:12.697

避免在可公开访问的对象上进行同步是个好主意。但是，您可以使用共享监视器对象：

```
class DataObject {

  private static final Object cacheLock = new Object();

  public putInCache() {
    synchronized(cacheLock) {

      // ... do some stuff
      cache.insert(this);
      // ... do some more stuff

    }
  }
} 
```

请注意，对于这个特定的实现`DataObject`以及从它派生的所有类都将共享锁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T13:04:33.380

`Class`和`instance`同步是有区别的。
实例同步适用于 的每个实例`Object`，因此代码：

```
 public synchronized void putInCache() {
      // ... do some stuff
      cache.insert(this);
      // ... do some more stuff
  } 
```

和代码

```
 public void putInCache() {
    synchronized(this) {
      // ... do some stuff
      cache.insert(this);
      // ... do some more stuff
    }
  } 
```

相同之处在于它们不允许多个线程同时进入同步块；但是，这仅适用于类上的每个实例。即显示器打开`this`

类同步对`Class`自身起作用，以下两个块也是等价的：

```
 public static synchronized void putInCache() {
      // ... do some stuff
      cache.insert(this);
      // ... do some more stuff
  }
  public void putInCache() {
    synchronized(MyClass.class) {
      // ... do some stuff
      cache.insert(this);
      // ... do some more stuff
    }
  } 
```

它们根本不允许超过一个线程同时进入 JVM 上的同步块，即监视器在`Class`实例上，因此是唯一的。

您需要使用`Class`同步。

另一种方法是锁定资源本身，因为这是您试图阻止并发访问的内容；前提是资源不能为空并且资源的实例不会随机更改 - 如果`final`您可以这样做，那就更好了：

```
 public void putInCache() {
    synchronized(cache) {
      // ... do some stuff
      cache.insert(this);
      // ... do some more stuff
    }
  } 
```

这使得您锁定的原因和锁定的内容非常清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:22:29.193

我想你正在寻找类级同步。尝试使该方法成为静态和同步的方法。例如：

```
public synchronized static putInCache(){
//..your code
} 
```

这将意味着“方法可以由多个线程在多个实例上调用，但一次只能由一个线程调用。”

# xml - 使用 Web Api 返回纯 xml（无子元素）

> ID：15002808
> 
> 赞同：0
> 
> 时间：2013-02-21T12:56:18.830
> 
> 标签：xml, asp.net-mvc, asp.net-web-api

我怎样才能返回一个仅由其根元素组成的非常简单的 xml？就像是： `<?xml version="1.0" encoding="UTF-8"?> <myelement> somevalue </myelement>`

问题是没有子元素，所以我不知道我应该编写什么类型的 POCO 类来获得该输出。我一直在尝试的是返回一个字符串，但我最终得到

```
<string>somevalue</string> 
```

我是 WebApi 的新手，所以任何建议都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:40:43.757

我敢打赌这不是最好的解决方案，但它现在正在工作：

```
public class MyCustomFormatter : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        HttpResponseMessage response = actionExecutedContext.Response;
        var contentType = response.Content.Headers.ContentType;
        var oldContents = response.Content.ReadAsStringAsync().Result;
        oldContents = oldContents.Replace("string", "myelement");
        response.Content = new StringContent("<?xml version=\"1.0\" encoding=\"utf-8\"?>" + oldContents);
        response.Content.Headers.ContentType = contentType;
        actionExecutedContext.Response.Content = response.Content;
    }
} 
```

# c# - 如何从一个用户控件获取文本框信息到另一个用户控件

> ID：15002810
> 
> 赞同：1
> 
> 时间：2013-02-21T12:56:23.070
> 
> 标签：c#, winforms, c#-4.0

我的 Windows 窗体应用程序中有两个用户控件。在第一个用户控件中，我有一个“文本框”和一个“保存”按钮。
我在另一个用户控件中有“文本框”。
当我单击第一个用户控件中的“保存”按钮时，无论用户控件中“文本框”中的值如何，都必须在另一个用户控件“文本框”中显示。

我试过这样

```
namespace project
{
    public partial class ucSample : UserControl
    {

    private double transferVolume;

    public double TransferVolume
    {
        get { return transferVolume; }
        set { transferVolume = value; }
    }

    public ucSample()
    {
        InitializeComponent();

    }

    private void btnSave_Click(object sender, EventArgs e)
    {
        TransferVolume = double.Parse(txtSamplevolume.Text);
       }
    }
} 
```

在另一个用户控件中，我正在尝试编写如下所示的逻辑。

```
namespace project
{
    public partial class ucSettings : UserControl
    {
         ucSample samplevolume = new ucSample();
         public ucSettings()
         {
             InitializeComponent();
         }

         private void  txtvolumeMin_TextChanged(object sender, EventArgs e)
         {
             txtvolumeMin.Text = samplevolume.TransferVolume.ToString();
         }
    }
} 
```

请任何人帮助我我在这里犯了什么错误。我正在使用财产来转移价值。我无法弄清楚错误是什么。或任何其他最佳方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:03:41.283

看起来你的代码颠倒了。让我们假设第一个控件中的文本框被命名`foo`（因为我们没有看到该代码），并且我们还假设`ucSettings`表单上的控件实例被命名`ucSettingsInstance`：

在`ucSample`控制中：

```
public event EventHandler TextChanged;

private void foo_TextChanged(object sender, EventArgs e)
{
    if (this.TextChanged != null) { this.TextChanged(sender, e); }
} 
```

在您的表单中使用该新事件：

```
private void ucSettingsInstance_TextChanged(object sender, EventArgs e)
{
    ucSettingsInstance.MinimumVolume = ucSampleInstance.TransferVolume;
} 
```

现在我们需要添加一个新属性`ucSettings`：

```
public double MinimumVolume
{
    get { return minimumVolume; }
    set
    {
        minimumVolume = value;
        txtVolumnMin.Text = minimumVolume.ToString();
    }
} 
```

现在，当第一个控件中的值发生更改时，您可以在第二个控件中设置值。

# maven - 常春藤中的 mvn 依赖：树的类似物是什么？

> ID：15002812
> 
> 赞同：20
> 
> 时间：2013-02-21T12:56:27.773
> 
> 标签：maven, ivy

如何查看依赖关系树（以及传递依赖关系）以及它们被包含或排除在构建中的原因？

在 Maven 中，可以这样做：

```
mvn dependency:tree -Ddebug 
```

据我了解，Ivy 可以生成 XML/HTML 格式的依赖报告，但似乎不一样。（纠正我，如果我错了）。

此外，这种东西是否可以从独立的 Ivy 中获得（不是从 Ant 上下文中调用）？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T16:17:19.483

看看[`<ivy:report>`](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)。这将创建一个基于 HTML 的依赖关系报告，它还将创建一个 graphml 文件，您可以使用[yed](http://ant.apache.org/ivy/history/latest-milestone/yed.html)来生成报告，或者创建一个点文件并使用[graphviz](http://www.graphviz.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-06T13:11:31.047

看看[`<ivy:dependencytree />`](http://ant.apache.org/ivy/history/latest-milestone/use/dependencytree.html)这将在控制台中显示依赖关系树。

# php - 检查 $_GET 变量是否包含字母

> ID：15002818
> 
> 赞同：-3
> 
> 时间：2013-02-21T12:56:43.787
> 
> 标签：php, get

我有一个`$_GET`名为的变量`page`，它只能包含数字。到目前为止，我设法制定了其他规则，例如它是否为空以强制页面等于 1，或者它是否大于页面总数以带来错误消息，但我不能做的一件事就是让它如此当用户键入字母而不是数字时，例如`page=d`：接收错误消息。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:01:04.447

使用`is_numeric`将允许十六进制数字通过。要仅允许 [0-9]，您可以使用：

```
if (!ctype_digit($_GET['page'])) {
    // Error message here.
} 
```

请记住还要确保`$_GET['page']`已设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:59:44.757

```
if(isset($_GET['page']) && preg_match('/^\d+$/', $_GET['page'])){
    echo 'only numbers';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:22:07.340

你可以试试 ：

```
function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;

         return true;
      } 
```

# highstock - Highstock 鼠标悬停数据窗口

> ID：15002820
> 
> 赞同：0
> 
> 时间：2013-02-21T12:56:49.803
> 
> 标签：highstock

我有两个系列图表，鼠标悬停时两个数据点值都出现在弹出窗口中。你能设置这个框内只显示一个数据系列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:02:01.483

它由 控制`tooltip.shared`，当它为真时执行此操作：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/shared-true/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/shared-true/)

如果为 false，您应该会看到单独的工具提示：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/shared-false/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/shared-false/)

在常规 HighCharts 中，它默认为非共享，但 HighStock 默认为共享。

# android - listview 在每一行中添加微调器？

> ID：15002821
> 
> 赞同：0
> 
> 时间：2013-02-21T12:56:51.627
> 
> 标签：android, android-layout, android-listview, android-spinner

`Spinner`我在布局时遇到问题。我的实际要求是放置`Spinner`一次，在布局的顶部。

我得到的这个输出：

![在此处输入图像描述](../Images/a485834acd5648546d7149d5718d4024.png)

我有相对布局

```
 <Spinner
       android:id="@+id/spinner1"
        android:layout_width="fill_parent"
   android:layout_height="wrap_content" 
   android:entries="@array/string_array"
       android:prompt="@string/spinner_msg"
     />
     <TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/notesTextView" 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" 
   android:textColor="@android:color/white"
   android:minHeight="?android:attr/listPreferredItemHeight"
   android:gravity="center_vertical"
   android:textAppearance="?android:attr/textAppearanceMedium"
</TextView>` 
```

`MyActivity`类由`ListActivity`这里的`onCreate`方法扩展

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     listView=getListView();
     listView.setOnItemClickListener(listener);
     spinner1=(Spinner)findViewById(R.id.spinner1);
     getDetailsCursor();
    String[] from = new String[] {"db_column"};
    int[] to = new int[] { R.id.notesTextView};
            curAdapter=new SimpleCursorAdapter(MyActivity.this, R.layout.mylist, null, from, to);
            setListAdapter(curAdapter);
        registerForContextMenu(listView);
    }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:59:55.403

我很难弄清楚你的实际问题是什么，一些 layout.xml 代码在这里也会有所帮助。我认为，您将微调器放置在 listitem.xml 而不是 main.xml 中，以便为您的列表视图中的每个项目复制它。请分享一些代码。由于您在 mylist.xml 中同时声明了 TextView 和 Spinner，因此您可以在 List 的每个 Item 中获得这两个元素。如果您只想要一个微调器，则不应使用 ListActivity，而应在 Layout 中创建具有 Spinner 和 ListView 的普通 Activity。然后为列表项定义另一个布局（例如，仅使用 TextView）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:23:57.147

这是 spinner 在 listview 顶部膨胀的代码：

```
listView= (ListView) findViewById(R.id.list);

        LayoutInflater inflater = LayoutInflater.from(this);
        View mTop = inflater.inflate(R.layout.spin, null);
        authorityView.addHeaderView(mTop); 
```

R.layout.spin 是只包含微调器的布局。在 List 内，您只需要对 textView 进行膨胀。正如您在 mylist.xml 中所做的那样，只需从中删除微调器并为微调器制作单独的 xml。

所以微调器是一次，位于布局（ListView）的顶部。

# asp.net - 设计具有固定行标题和滚动功能的页面

> ID：15002824
> 
> 赞同：-1
> 
> 时间：2013-02-21T12:57:03.623
> 
> 标签：asp.net, html, web-applications

我是设计新手，谁能建议我如何设计一个顶部有固定行标题的表格，并且应该能够通过滚动固定标题来查看相关列下的数据。请使用表格或 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:09:56.380

这个[**DEMO**](http://jsfiddle.net/WzjZ8/)是你需要的吗？

```
<div style="margin: 0; padding: 0; border-collapse: collapse; width: 519px; height: 100px; overflow: hidden; border: 1px solid black;">
    <table style="margin: 0; padding: 0; border-collapse: collapse; color: White; width: 517px; height: 20px; text-align: left; background-color: Blue;">
    <colgroup>
    <col width="200px"/>
    <col width="150px"/>
    <col width="150px"/>
    <col width="16px"/>
    </colgroup>
    <tbody>
    <tr style="margin: 0; padding: 0; border-collapse: collapse;">
    <th style="margin: 0; padding: 0; border-collapse: collapse;">
    Column 1
    </th>
    <th style="margin: 0; padding: 0; border-collapse: collapse;">
    Column 2
    </th>
    <th style="margin: 0; padding: 0; border-collapse: collapse;">
    Column 3
    </th>
    <th style="margin: 0; padding: 0; border-collapse: collapse;">

    </th>
    </tr>
    </tbody>
    </table>
    <div style="margin: 0; padding: 0; border-collapse: collapse; width: 517px;  height:77px; overflow: auto;"
    >
    <table style="margin: 0; padding: 0; border-collapse: collapse; width: 500px;">
    <colgroup>
    <col width="200px"/>
    <col width="150px"/>
    <col width="150px"/>
    </colgroup>
    <tbody style="margin: 0; padding: 0; border-collapse: collapse;">
    <tr style="margin: 0; padding: 0; border-collapse: collapse;">
    <td style="border: 1px solid lightgrey;">
    Row A-1
    </td>
    <td style="border: 1px solid lightgrey;">
    Row A-2
    </td>
    <td style="border: 1px solid lightgrey;">
    Row A-3
    </td>
    </tr>
    <tr style="margin: 0; padding: 0; border-collapse: collapse;">
    <td style="border: 1px solid lightgrey;">
    Row B-1
    </td>
    <td style="border: 1px solid lightgrey;">
    Row B-2
    </td>
    <td style="border: 1px solid lightgrey;">
    Row B-3
    </td>
    </tr>
    <tr style="margin: 0; padding: 0; border-collapse: collapse;">
    <td style="border: 1px solid lightgrey;">
    Row C-1
    </td>
    <td style="border: 1px solid lightgrey;">
    Row C-2
    </td>
    <td style="border: 1px solid lightgrey;">
    Row C-3
    </td>
    </tr>
    <tr style="margin: 0; padding: 0; border-collapse: collapse;">
    <td style="border: 1px solid lightgrey;"
    >
    Row D-1
    </td>
    <td style="border: 1px solid lightgrey;">
    Row D-2
    </td>
    <td style="border: 1px solid lightgrey;">
    Row D-3
    </td>
    </tr>
    <tr style="margin: 0; padding: 0; border-collapse: collapse;">
    <td style="border: 1px solid lightgrey;">
    Row E-1
    </td>
    <td style="border: 1px solid lightgrey;">
    Row E-2
    </td>
    <td style="border: 1px solid lightgrey;">
    Row E-3
    </td>
    </tr>
    <tr style="margin: 0; padding: 0; border-collapse: collapse;">
    <td style="border: 1px solid lightgrey;">
    Row F-1
    </td>
    <td style="border: 1px solid lightgrey;">
    Row F-2
    </td>
    <td style="border: 1px solid lightgrey;">
    Row F-3
    </td>
    </tr>
    <tr style="margin: 0; padding: 0; border-collapse: collapse;">
    <td style="border: 1px solid lightgrey;">
    Row G-1
    </td>
    <td style="border: 1px solid lightgrey;">
    Row G-2
    </td>
    <td style="border: 1px solid lightgrey;">
    Row G-3
    </td>
    </tr>
    </tbody>
    </table>
    </div>
    </div> 
```

# mercurial - 没有使用 HgSubversion 将本地 Mercurial 提交推送到 SVN？

> ID：15002828
> 
> 赞同：1
> 
> 时间：2013-02-21T12:57:19.667
> 
> 标签：mercurial, push, hgsubversion

我在 HgSVN 中进行了 4 次本地提交，然后我将本地代码更新为较早的版本，添加了更改，进行了本地提交，与服务器代码合并，当尝试推送时，由于 4 本地提交未合并。

1.  如何从 HgSVN 历史记录中删除/删除这 4 个本地提交并推送代码？
2.  在这种情况下应该怎么做？

    *   使用 HgCommit 将代码保存到本地机器和
    *   HgWorkbench 用于将本地更改推送到服务器
    *   ![使用 HgCommit 将代码保存到本地机器，使用 HgWorkbench 将本地更改推送到服务器](../Images/683e09010f93ec1b392eab27303a781d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:11:13.183

您的主要问题是：您不喜欢也不阅读文档并盲目使用工具。否则你必须知道 HgSubversion 的最大限制之一：不可能从 Mercurial 推回 Subversion 合并集

“... [Mercurial 合并无法推送到 Subversion](https://bitbucket.org/durin42/hgsubversion/src/tip/hgsubversion/help/subversion.rst) ”

此外， Mercurial wiki 上的[HgSubversion 页面](http://mercurial.selenic.com/wiki/HgSubversion)明确指出：

> 需要注意的重要一点是 hgsubversion 不能将合并变更集推送到 svn 存储库。这意味着你不应该**尝试**合并这个新的头部——如果你这样做了，hg push to svn 将会失败。相反，您应该重新设置要推送到 Subversion 存储库的更改集（请参阅下面的*重新设置更改*）

# java - Spring Generic Dao 类名

> ID：15002836
> 
> 赞同：2
> 
> 时间：2013-02-21T12:57:55.160
> 
> 标签：java, spring, genericdao

我已经为我的 spring/hibernate 项目配置了一个自定义的通用服务 DAO——我的想法是我可以从我的控制器中轻松地重用它。

它基本上看起来像这样：

```
public class DefaultService<T> {

private Class<T> e;

public String className(Class<T> e) {
    String clip = e.getName();
    clip = clip.substring(clip.lastIndexOf('.') + 1, clip.length());
    return clip;
}
public List<T> getAll(Integer status) {
    Session session = sessionFactory.getCurrentSession();
    Query query = session.createQuery("FROM " + className(e) + " WHERE status = " + status);
    return query.list();
}
... 
```

哪个被引用：

```
@Autowired
public DefaultService<Address> addressService;
addressService.get(1); 
```

但是，该`String clip = e.getName()`行会引发 Null 指针异常。如果我将类移动到属性部分，我可以让它工作（所以`addressService.get(Address.class, 1)`但我发现这有点不整洁，特别是当有多个不同的类被调用时。

有什么方法可以让类正确生成一个值，而无需重复将其添加到我的所有函数中？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:01:56.023

我做了类似的事情，您也需​​要泛型类作为构造函数参数，我的使用休眠实体，但您可以传入表名字符串。

```
public class DomainRepository<T> {

    @Resource(name = "sessionFactory")
    protected SessionFactory sessionFactory;

 public DomainRepository(Class genericType) {
        this.genericType = genericType;
    }

 @Transactional(readOnly = true)
    public T get(final long id) {
        return (T) sessionFactory.getCurrentSession().get(genericType, id);
    } 
```

然后，您可以子类化（如果需要）来自定义或简单地在 spring 配置中设置您的 bean，如下所示：

```
<bean id="tagRepository" class="com.yourcompnay.data.DomainRepository">
        <constructor-arg value="com.yourcompnay.domain.Tag"/>
</bean> 
```

因此，在您的代码中，您可以像这样引用 tagRepository （除了上面和下面发布的代码之外，不需要其他代码 eis）：

```
@Resource(name = "tagRepository")
private DomainRepository<Tag> tagRepository; 
```

此外，我将其称为存储库而不是服务，服务处理不同类型及其交互（不仅仅是一个）。特别是您使用 SQL 字符串的示例：

```
public final String tableName;
public DomainRepository(String tableName) {
      this.tableName = tableName;
}
public List<T> getAll(Integer status) {
    Session session = sessionFactory.getCurrentSession();
    Query query = session.createQuery("FROM " + tableName + " WHERE status = " + status);
    return query.list();
} 
```

并像这样定义你的豆子

```
<bean id="addressRepository" class="com.yourcompnay.data.DomainRepository">
  <constructor-arg value="address"/>
</bean> 
```

然后你也可以在必要时自己创建子类：

```
public class PersonRepository extends DomainRepository<Person> {
    public PersonRepository(){
        super("person"); //assumes table name is person
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:08:39.513

据我了解，您之所以获得 NPE，是因为您没有为此字段设置任何值。所以你可以通过两种方式解决这个问题：

1.  手动设置类对象，如注释 NimChimpsky。
2.  动态获取类类型。例如，如果你使用 Spring 试试这个：

`protected Class getEntityClass() { return GenericTypeResolver.resolveTypeArguments(getClass(), DefaultService.class)[0]; }`

或[这里的一些解决方法](http://tutorials.jenkov.com/java-reflection/generics.html#fieldtypes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:18:08.637

最好为地址服务定义一个特定的类

```
public class AddressService extends DefaultService<Address>{
  public String getClassName(){
   return "Address";
  }
} 
```

在哪里

```
public String getClassName(); 
```

是在 DefaultService 中声明的抽象方法，并在数据访问逻辑中使用（如您的方法 className()）。

使用这种方法，您将能够添加特定的数据访问逻辑（例如，getUsersByAddress）

# iphone - 如何集成 paytrace 支付网关

> ID：15002838
> 
> 赞同：0
> 
> 时间：2013-02-21T12:58:02.477
> 
> 标签：iphone

我正在做一个关于发票付款的项目，其中所有付款都应通过 Paytrace 支付网关完成。您能帮我如何使用 Paytrace 支付网关进行支付功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:26:57.093

从阅读 API 文档开始。[他们可以在这里找到。](http://help.paytrace.com/api)

有关如何调用它的高级概述，请阅读“引用 API”部分。这将讨论如何格式化您的`POST`请求，并提供一些调用 API 的示例。由于所有请求都只是作为名称-值对发送，因此它是集成的轻量级服务之一。没有 WSDL/SOAP/ASMX 那样的复杂性。不幸的是，这也意味着您不能使用代理生成实用程序来为您创建包装器。您需要构建每个请求（如示例中所示）。从积极的方面来说，形成请求并不难，因为数据结构非常扁平。

交易页面提供了如何运行交易的示例：

```
UN~demo123|PSWD~demo123|TERMS~Y|METHOD~ProcessTranx|
TRANXTYPE~Sale|CC~4012881888818888|EXPMNTH~12|EXPYR~12|
AMOUNT~1.00|CSC~999|BADDRESS~1234|BZIP~83852|INVOICE~8888| 
```

请注意，名称/值对由“|”分隔 字符，名称与值之间用“~”分隔。构建该字符串，`POST`直到服务，您将获得一个您将解析出来的响应。

# mysql - 从数据库返回最新结果

> ID：15002840
> 
> 赞同：-2
> 
> 时间：2013-02-21T12:58:06.407
> 
> 标签：mysql, sql

我有一张随时间记录的答案表，但我只想返回每个答案的最新版本。

例如。

```
1, Bob
2, Bob
3, Rita
4, Sue
5, Bob
6, Sue 
```

...应该返回：

```
3, Rita
5, Bob
6, Sue 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:01:57.800

尝试以下操作，name 是带有名称的列，id 是带有数字的列：

```
SELECT MAX(ID), Name  
FROM Table  
GROUP By Name 
```

***编辑：***
如果您还想按 ID 订购查询，请尝试以下操作：

```
SELECT MAX(ID) as ID, Name  
FROM Table  
GROUP By Name
ORDER BY ID 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T13:02:51.503

您可以使用`SELECT DISTINCT col [...]`. 它应该工作！

编辑：或`SELECT [...] GROUP BY col`

# asp.net - 301 从 IIS 6 上的 web.config 重定向

> ID：15002849
> 
> 赞同：1
> 
> 时间：2013-02-21T12:58:40.617
> 
> 标签：asp.net, redirect, web-config, iis-6, http-status-code-301

我需要从 IIS 6 服务器（Windows 2003 Web 服务器）上的 web.config 进行 301 重定向。我是一个 Apache 服务器的人，对 Windows Web 服务器一无所知。我只能从 FTP 访问服务器。

我在另一个问题中找到了以下内容，但它似乎不起作用：

```
<system.webServer>
    <rewrite>
        <rules>
        <rule name="Redirect to WWW" stopProcessing="true">
          <match url=".*" />
          <conditions>
            <add input="{HTTP_HOST}" pattern="^mydomain1.com$" />
          </conditions>
          <action type="Redirect" url="http://www.mydomain2.com"
               redirectType="Permanent" />
        </rule>
      </rules>
    </rewrite>
</system.webServer> 
```

我需要将单独的页面从***mydomain1.com***重定向到***mydomain2.com***。
前任。***mydomain1.com/somename***应该重定向到***mydomain.com/someothername***

这怎么做？

**---- 编辑 ----**
在 stackoverflow 上看到另一个线程后，我的配置现在看起来像这样：

```
<system.webServer>
    <rewrite>
        <rule name="rule1">
            <match url="default.aspx"/>
            <action type="Redirect" redirectType="Permanent" url="http://www.mydomain.com/somename/somename.aspx"/>
        </rule>
        <rule name="rule2">
            <match url="somename.aspx"/>
            <action type="Redirect" redirectType="Permanent" url="http://www.mydomain2.com/somename2/somename2.aspx"/>
        </rule>
    </rewrite>
</system.webserver><br> 
```

**--- 编辑 2 ----** 重定向根的代码：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-15T03:20:56.680

据我调查，没有办法通过 IIS6 上的 web.config 进行重定向。

[rewrite](https://www.iis.net/downloads/microsoft/url-rewrite)和[httpRedirect](https://docs.microsoft.com/en-us/iis/configuration/system.webserver/httpredirect/)指令只能在 IIS7 相同或之后使用。

但是您可以使用[ISAP 方式与付费解决方案](http://www.isapirewrite.com/)。

所以，我认为`Response.Redirect("direct to");` 是最好的方法

# php - 根据单选按钮的选择使下拉列表和文本框可见

> ID：15002854
> 
> 赞同：0
> 
> 时间：2013-02-21T12:58:55.327
> 
> 标签：php, yii, yii-components

我想根据 Yii 表单中单选按钮的选择显示下拉列表和文本字段。即，如果我选择第一个选项，它必须显示一个下拉列表，如果我选择第二个选项，则必须出现文本框。这是我的单选按钮的代码：

```
 <?php echo $form->radioButtonList($model,'service_type',array('0'=>'Fixed Price Service','1'=>'Service at hourly rate'));?> 
```

选择“固定价格服务”时，下拉菜单

`<?php echo $form->dropdownList( $model, 'min_budget', array( "0"=>"Select your minimum budget", "1" => "10000", "2" => "20000", "3" => "50000", )); ?>`

并在选择“按小时收费”时，必须出现文本字段

```
 <?php echo $form->textField($model,'hourly_rate',array('size'=>15,'maxlength'=>1)); ?> 
```

此功能必须在不刷新或单击任何提交按钮的情况下出现。如何以 Yii 形式实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:02:54.583

为此使用 javascript 或 jquery 隐藏和显示功能...这些链接可能会对您有所帮助

[根据下拉列表显示/隐藏文本框](https://stackoverflow.com/questions/12158737/display-hide-textbox-based-on-drop-down-list)

[jQuery - 如何根据选定的下拉菜单显示/隐藏文本框](https://stackoverflow.com/questions/6427495/jquery-how-to-show-hide-text-box-based-on-selected-drop-down)

# wpf - 在 Expression Blend 中看不到 TabItem 内容

> ID：15002855
> 
> 赞同：3
> 
> 时间：2013-02-21T12:58:55.913
> 
> 标签：wpf, expression-blend, tabitem

所以这是我的问题。我有一个 WPF 应用程序，它基本上由一个带有许多 TabItem 的 TabControl 组成。我在单独的类中声明了每个 TabItem，我所做的就是将它们插入到 MainWindow 的 TabControl 中，如下所示：

```
<TabControl x:Name="tabCtrl" Grid.Column="2" Margin="89.765,29.697,89.766,33.697"
            Style="{DynamicResource TabControlStyle1}" TabStripPlacement="Left"
            SelectionChanged="tabCtrl_SelectionChanged">
        <TabControl.Background>
            <SolidColorBrush Color="#FFF9F9F9" Opacity="0.6"/>
        </TabControl.Background>
        <local:WelcomeTab Width="Auto" Height="Auto" x:Name="welcomeTab"/>
        <local:Step1Tab Width="Auto" Height="Auto" x:Name="step1Tab"/>
        <local:Step2Tab Width="Auto" Height="Auto" x:Name="step2Tab"/>
        <local:Step3Tab Width="Auto" Height="Auto" x:Name="step3Tab"/>
        <local:Step4Tab Width="Auto" Height="Auto" x:Name="step4Tab"/>
</TabControl> 
```

我使用 Expression Blend 来编辑选项卡，当我使用这种方法时，我必须在它们自己的类中编辑每个选项卡。问题是当我想这样做时，我必须直接在 XAML 中进行，因为我看到的 TabItem 只是标题。

例如，此选项卡的 XAML 是这样的：

```
<TabItem x:Class="Foo.Step1Tab"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
         xmlns:p="clr-namespace:Foo.Properties"
         x:Name="step1Tab" IsEnabled="true"
         IsManipulationEnabled="True"
         d:DesignHeight="300" d:DesignWidth="300" Header="{x:Static p:Resources.step1Tab}" Style="{DynamicResource TabItemStyle1}">
    <Content of the tab>
</TabItem> 
```

我能做些什么来查看选项卡的元素并操作它们吗？

# iphone - 图像在 iPhone 上变得奇怪的高度

> ID：15002862
> 
> 赞同：0
> 
> 时间：2013-02-21T12:59:11.953
> 
> 标签：iphone, html, css

这很奇怪.. 如果您在 iphone 上加载我的页面，图像的高度会变得非常高。但它在计算机或 nexus 7 上运行良好（= 图片获得其父级的 100%）。谁能帮我弄清楚为什么？这是css **（所有应该影响图像的都在/--- body ---/下）**：

```
{
    box-sizing: border-box; -webkit-box-sizing:border-box; -moz-box-sizing:border-box;
    font-family: 'fonten';
    font-weight: 700;

}

html, body 
{
    margin: 0;
    padding: 0;
}

body 
{
    background-image: url('css/bgnoise.png');
}

/*---------------------------    OTHER     -----------------------------------*/

.clearfix:before,
.clearfix:after 
{
    content:"";
    display:table;
}
.clearfix:after 
{
    clear:both;
}
.clearfix {
    zoom:1;
}

a {
    cursor: pointer;
    text-decoration: none;
    color: black;
}

section a:hover {
    opacity: 50%;
}

/*---------------------------    HEADER     -----------------------------------*/

header {
    background: #fff;
    margin-bottom: 50px;
}

h1 {
    text-align:center;
    margin: 0;
    padding: 50px;
    color:black;
}

.nav {
    text-align:center;
    text-transform: uppercase;
}

.nav li, ul {
    list-style: none;
    display: inline-block;
    margin: 0;
    padding: 0;
    margin-bottom: 25px;
    letter-spacing: 4px;
    color: black;
}

.nav li {
    margin-right: 10px;
}

.nav li:last-child {
    display: block;
    margin-right: 0;
}

.current_page_item a {
    color:#fe6330;
}

/*---------------------------    BODY     -----------------------------------*/

h3 {
    font-size: 1.75em;
    text-align: center;
}

h4 {
    text-align: center;
    font-size: 1.2em;
    margin-bottom: 0;
}

.seperator {
    height: 2px;
    background:black;
    width: 40%;
    margin:0px auto;
}

.quote {
    text-align: center;
    padding: 0px 20%;
    line-height: 200%;
    font-size: 0.85em;
}

.projects {
    margin-top: 20px;
    max-width: 960px;
    margin: 0 auto;
}

.proj {
    margin: 20px auto 0 auto;
    width: 60%;

}

.proj img {
    width: 100%;
    height: 100%; //this should make the pics height 100% of its parent
}

/*---------------------------    what i do     -----------------------------------*/

.whatido {
    background: white;
    padding:50px;
}

.dos {
    display: table;
    margin: 0 auto;
} .dos p {
    text-align: center;
}

/*---------------------------    FOOTER     -----------------------------------*/

footer{
    background: #232323;
    color: white;
    padding: 50px 0;
}

.footercont {
    display: table;
    margin: 0 auto;
} .footercont p {
    text-align: center;
} .footercont>p>a {
    color: white;
    font-size: 1.5em;
}

/*---------------------------    FONT     -----------------------------------*/

@font-face
{
font-family: 'fonten';
src: url('css/raleway/raleway_thin.ttf'),
    url('css/raleway/raleway_thin.otf'),
     url('css/raleway/raleway_thin.eot');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:21:25.733

你在每个声明的高度

```
<img width="940" height="940" src="http://hmpf.nu/wp-content/uploads/2013/02/test.jpg" class="attachment-full wp-post-image" alt="test"> 
```

这就是为什么如果您不将高度设置为自动，它们的高度为 940。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:21:47.837

您已经在 HTML 和 CSS 中说明了宽度和高度

```
<img width="940" height="940" /> 
```

从 HTML 中删除这些显式高度，仅在 CSS 中设置高度。

使用响应式设计，您只需要声明图像宽度为 100%，高度将自动设置为相同的百分比，以使图像保持正确的纵横比`height:auto`是不需要的。

```
.proj img {width:100%;} 
```

# android - 如何将 Google Play 商店中现有的 Android 应用程序制作成付费应用程序

> ID：15002869
> 
> 赞同：0
> 
> 时间：2013-02-21T12:59:23.060
> 
> 标签：android, google-play

我已经在 Google Play 商店中有一个免费的 Android 应用程序。现在根据我们的要求，我想将其更改为付费应用。但是在某处我发现免费应用程序无法更改为付费应用程序，而付费应用程序可以更改为免费应用程序。那么目前我该如何实现呢？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T13:45:16.563

> 现在根据我们的要求，我想将其更改为付费应用。

这是不可能的。你可以让付费应用免费，但你不能让免费应用付费。

> 但是在某处我发现免费应用程序无法更改为付费应用程序，而付费应用程序可以更改为免费应用程序。

正确的。

> 那么目前我该如何实现呢？？？

你没有。恕我直言，任何提供此“要求”的人都需要因违反道德规范而被解雇。

但是，您可以：

*   以新的软件包名称上传更好的应用程序，并将其作为“专业”版提供，您需要付费

*   将应用内购买与现有应用一起“解锁”您添加的一些新功能

*   停止对原始应用程序的开发并以新的包名称重新上传应用程序作为付费应用程序，尽管您将失去所有现有用户（并且很可能因此获得一堆一星评级）

# c++ - 等到 QLineEdit 文本改变

> ID：15002878
> 
> 赞同：1
> 
> 时间：2013-02-21T12:59:36.347
> 
> 标签：c++, qt

我想使用 QLineEdit 来获取我想要使用的整数值。我的问题是我想等到输入文本。如果我可以在开始时提供一个默认文本，在单击 QEditLine 后会自动删除它，那也很好，例如： ![在此处输入图像描述](../Images/bbdc8ec0e8efd1b9c2fb41bf861356fa.png)

对于第一点，我尝试了这个，但没有奏效：

```
 ......
int num =0;
QLineEdit *qtest = new QLineEdit();
........
mailayout->addWiget(qtest);// when I use the while loop the QLineEdit won't be added !! 
while(num ==0 ){
   num = qtest->text.toInt();
 }
............. 
```

程序停留在while循环中，有什么想法我做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:13:31.160

用于`setPlaceholderTest(const QString&)`在用户未输入任何内容时显示的文本。

不要轮询`QLineEdit`更改，这是 Qt 所以使用信号。

```
connect( qtest, SIGNAL( editingFinished() ),
         someContainerObj, SLOT( myLineEditSlot() ) );
...
ContainerObj::myLineEditSlot()
{
    int num = qtest->text().toInt();
    ...
} 
```

# c++ - 旋转后按字典顺序最小的字符串

> ID：15002881
> 
> 赞同：9
> 
> 时间：2013-02-21T12:59:51.333
> 
> 标签：c++, string, algorithm, lexicographic

我正在尝试[在 spoj 中解决这个问题](http://www.spoj.com/problems/MINMOVE/)

我需要找到给定字符串的旋转次数，使其在所有旋转中按字典顺序最小。

例如：

原来的：`ama`

第一次轮换：`maa`

第二次旋转：`aam`这是字典顺序上最小的旋转，所以答案是 2。

这是我的代码：

```
string s,tmp;
    char ss[100002];
    scanf("%s",ss);
    s=ss;
    tmp=s;
    int i,len=s.size(),ans=0,t=0;
    for(i=0;i<len;i++)
    {
        string x=s.substr(i,len-i)+s.substr(0,i);
        if(x<tmp)
        {
            tmp=x;
            t=ans;
        }
        ans++;
    }

    cout<<t<<endl; 
```

对于此解决方案，我得到“超出时间限制”。我不明白可以进行哪些优化。如何提高解决方案的速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:54:09.660

您可以使用修改后的[后缀数组](http://en.wikipedia.org/wiki/Suffix_array "后缀数组")。我的意思是修改，因为你不能停在词尾。

这是我解决的[类似问题](http://uva.onlinejudge.org/external/7/719.html "类似的问题")的代码（SA 是后缀数组）：

```
//719
//Glass Beads
//Misc;String Matching;Suffix Array;Circular
#include <iostream>
#include <iomanip>
#include <cstring>
#include <string>
#include <cmath>
#define MAX 10050
using namespace std;

int RA[MAX], tempRA[MAX];
int SA[MAX], tempSA[MAX];
int C[MAX];                

void suffix_sort(int n, int k) {
    memset(C, 0, sizeof C);        

    for (int i = 0; i < n; i++)        
        C[RA[(i + k)%n]]++;

    int sum = 0;
    for (int i = 0; i < max(256, n); i++) {                     
        int t = C[i]; 
        C[i] = sum; 
        sum += t;
    }

    for (int i = 0; i < n; i++)        
        tempSA[C[RA[(SA[i] + k)%n]]++] = SA[i];

    memcpy(SA, tempSA, n*sizeof(int));
}

void suffix_array(string &s) {             
    int n = s.size();

    for (int i = 0; i < n; i++) 
        RA[i] = s[i];              

    for (int i = 0; i < n; i++) 
        SA[i] = i;

    for (int k = 1; k < n; k *= 2) {     
        suffix_sort(n, k);
        suffix_sort(n, 0);

        int r = tempRA[SA[0]] = 0;
        for (int i = 1; i < n; i++) {
            int s1 = SA[i], s2 = SA[i-1];
            bool equal = true;
            equal &= RA[s1] == RA[s2];
            equal &= RA[(s1+k)%n] == RA[(s2+k)%n];

            tempRA[SA[i]] = equal ? r : ++r;     
        }

        memcpy(RA, tempRA, n*sizeof(int));
    } 
}

int main() {
    int tt; cin >> tt;
    while(tt--) {
        string s; cin >> s;
        suffix_array(s);
        cout << SA[0]+1 << endl;
   }
} 
```

我主要[从这本书](http://www.lulu.com/shop/steven-halim/competitive-programming-2/paperback/product-16377304.html;jsessionid=02D1E9DA78C107CE57DCCDC96DB7A15C)中获取了这个实现。有一个更容易编写的 O(n log²n) 版本，但对于您的情况（n=10^5）可能不够高效。这个版本是 O(n log n)，它不是最有效的算法。维基百科文章列出了一些 O(n) 算法，但我发现它们中的大多数都过于复杂，无法在编程竞赛中编写。这个 O(n log n) 通常足以解决大多数问题。

[你可以在这里](http://www.comp.nus.edu.sg/~stevenha/myteaching/competitive_programming/week10_string.pdf)找到一些解释后缀数组概念的幻灯片（来自我提到的书的作者）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-16T22:30:15.687

我知道这来得很晚，但我在搜索该算法的更快变体时偶然从谷歌发现了这一点。结果发现在 github 上有一个很好的实现：[https ://gist.github.com/MaskRay/8803371](https://gist.github.com/MaskRay/8803371)

它使用 lyndon 分解。这意味着它重复地将字符串拆分为按字典顺序递减的 lyndon 单词。Lyndon 词是它们自身的（其中一个）最小旋转的字符串。以循环方式执行此操作会产生字符串的 lms 作为最后找到的 lyndon 单词。

```
int lyndon_word(const char *a, int n)
{
  int i = 0, j = 1, k;
  while (j < n) {
    // Invariant: i < j and indices in [0,j) \ i cannot be the first optimum
    for (k = 0; k < n && a[(i+k)%n] == a[(j+k)%n]; k++);
    if (a[(i+k)%n] <= a[(j+k)%n]) {
      // if k < n
      //   foreach p in [j,j+k], s_p > s_{p-(j-i)}
      //   => [j,j+k] are all suboptimal
      //   => indices in [0,j+k+1) \ i are suboptimal
      // else
      //   None of [j,j+k] is the first optimum
      j += k+1;
    } else {
      // foreach p in [i,i+k], s_p > s_{p+(j-i)}
      // => [i,i+k] are all suboptimal
      // => [0,j) and [0,i+k+1) are suboptimal
      // if i+k+1 < j
      //   j < j+1 and indices in [0,j+1) \ j are suboptimal
      // else
      //   i+k+1 < i+k+2 and indices in [0,i+k+2) \ (i+k+1) are suboptimal
      i += k+1;
      if (i < j)
        i = j++;
      else
        j = i+1;
    }
  }
  // j >= n => [0,n) \ i cannot be the first optimum
  return i;
} 
```

# java - jQuery Ajax 调用以过滤来自 mySQL 的值。

> ID：15002883
> 
> 赞同：0
> 
> 时间：2013-02-21T12:59:55.053
> 
> 标签：java, javascript, jquery, ajax, jsp

我想发送通过单击收音机和服务器获取的 queryString 以在 xml 中获得响应。我几乎接近解决方案，无法调试为什么它不起作用的问题。

```
<script>

$(document).ready(
                function() {
                       $("#myCity").click(  
                    /* $("input[type=radio][name=myCity]").click( */
                                       function() {
                                                 var radioCity = $('input:radio[name=myCity]:checked').val(); 
                                              /* radioCity = $('input[name=myCity]').filter(':checked').value();  */

                                              link = "http://localhost:8080/Shipping_Order/getCity_xml.jsp?qString="+radioCity;

                                        $.ajax({ 
                                            type:"GET",
                                            url : link,
                                            data : radioCity,
                                            dataType : "xml",
                                            success : function() {

                                                /* var myCity = $('input:radio[name=myCity]:checked').value; */
                                                /* var myCity = $('input[name=myCity]:radio:checked').val() */

                                                for ( var i = 0; i < xmlDoc.getElementsByTagName("city").length; i++) {

                                                    $("#radioTable").append(
                                                                    '<tr><td id="username"'+i+'>'
                                                                            + xmlDoc
                                                                                    .getElementsByTagName("username")[i].childNodes[0].nodeValue
                                                                            + '</td><td id="city"'+i+'>'
                                                                            + xmlDoc
                                                                                    .getElementsByTagName("city")[i].childNodes[0].nodeValue
                                                                            + '</td> <td id="contact"'+i+'>'
                                                                            + xmlDoc
                                                                                    .getElementsByTagName("contact")[i].childNodes[0].nodeValue
                                                                            + '</td></tr>');

                                                }
                                            }

                                        });
                                    });
                }); 
```

在 jQuery 的点击事件中，变量“radioCity”获取当前单选值，而 ajax“url”通过 GET 请求通过 queryString 发送该值。服务器 (getCity_xml.jsp) 在 xml 数据中响应请求，稍后它将附加选择器名称#radioTable。

在我创建的 HTML 中

**getCity_xml.jsp**

```
<%
response.setContentType("text/xml");

try{
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/shipping_order","root","root");
Statement st = con.createStatement();
String myCity = request.getParameter("qString");
ResultSet rs = st.executeQuery("select username, contact, city from user where city ="+myCity);

while(rs.next())
{

    out.println("<user>");
    out.println("<username>"    +rs.getString(1)+   "</username>");
    out.println("<contact>"     +rs.getInt(2)+      "</contact>");
    out.println("<city>"        +rs.getString(3)+   "</city>");
    out.println("</user>"); 

}

rs.close();
st.close();

con.close();

}catch (SQLException ex) {out.println("Exception Occured");}  

%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:07:49.830

只是一个旁注。永远不会！！！111 在 SQL 查询中使用字符串连接。

通过这样做，您在代码中引入了 SQL 注入漏洞。考虑访问本教程：[http ://www.tutorialspoint.com/jdbc/jdbc-statements.htm](http://www.tutorialspoint.com/jdbc/jdbc-statements.htm)

至于问题，您应该用引号转义城市名称

```
ResultSet rs = st.executeQuery("select username, contact, city from user where city = '"+myCity + "'"); 
```

# jquery - 如何通过 jQuery 设置活动选项卡选择选项卡内容在 ul 元素之外的位置？

> ID：15002884
> 
> 赞同：0
> 
> 时间：2013-02-21T12:59:55.470
> 
> 标签：jquery, tabs

页面加载后，我想以编程方式设置活动选项卡...在下面的示例中，我想将英语选项卡设置为活动选项卡。

我试过了：

```
$('#languagetabs').tabs('select', 1); 
```

和

```
$('.edittabs').tabs('select', 1); 
```

但这不起作用，因为没有任何反应：没有错误，第一个选项卡保持活动状态。

```
<div class="edittabs">
    <ul id="languagetabs">
        <li><a href="#language-spanish">Spanish</a></li>
        <li><a href="#language-english">English</a></li>
    </ul>
    <div id="language-spanish">        
        Spanish description
    </div>
    <div id="language-english">
        English description
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:01:46.143

```
$('#languagetabs li:eq(1) a').trigger('click'); 
```

这将模拟被单击的第二个选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:14:02.413

声明一个类 active ，

```
.active{background:#5d5d5d;}

<li><a href="#language-english" class="active">English</a></li>

$('#languagetabs li').click(function() {
  $(this).toggleClass('active');
}); 
```

希望它会帮助你..

# aem - CQ parsys 组件在页面上持续存在

> ID：15002885
> 
> 赞同：2
> 
> 时间：2013-02-21T12:59:57.843
> 
> 标签：aem

我使用以下代码在模板中添加了一个 parsys 组件：

```
<div class = "BodyText" style="margin-top:75px;" >
  <cq:include path="vff1" resourceType="foundation/components/parsys"/>
  </div> 
```

但是当我创建一个页面并向 parsys 组件添加一些文本时，该组件仍然停留在页面上（在我添加的文本下方）。

在向 parsys 添加一些资产（文本或图像等）后，有没有办法将其删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:54:32.847

parsys 是组件的放置区。您不能将组件放入 parsys 然后删除 parsys 而不删除其中包含的组件，因为组件是 jcr 中 parsys 节点的子节点。

在您的情况下，您似乎更愿意将文本组件嵌入模板而不是 parsys

```
<div class="BodyText" style="margin-top:75px;">
    <cq:include path="text" resourceType="foundation/components/text"/>
</div> 
```

请记住，路径属性必须是唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T04:22:28.840

要添加，放置区域仅在作者模式下出现，如果您想检查它在发布模式下的外观，您可以在 Sidekick 中选择预览模式。因此，您的发布站点将成为生产中的实时站点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T09:54:30.717

同意上面给出的答案。正确的答案只是总结以上2个答案。

1.  parsys 组件不能在添加组件后就被删除。如果你不想要它，那么在页面的jsp中添加想要的组件。（完全不推荐）
2.  无论如何，它仅在“作者”实例中可见。显示“将组件或资产拖到此处”的虚线组件不会出现在“公共”实例中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-04T15:06:17.983

有一种方法可以删除 parsys，但我建议谨慎使用。首先，在包含 parsys 中，检查要添加到此特定 parsys 中的组件是否存在。如果确实如此，那么您只需将该组件直接包含在您的页面中，如果没有，则将 parsys.xml 包含在内。

示例代码：

```
<c:choose>
<c:when test="<COMPONENT_EXIST>">
   <cq:include path="<Path to component>" resourceType="<component resource>" />
</c:when>

<c:otherwise>
   <cq:include path="<parsys_path>" resourceType="foundation/components/parsys" />
</c:otherwise>
</c:choose> 
```

# networking - 网络流量模拟器

> ID：15002886
> 
> 赞同：0
> 
> 时间：2013-02-21T13:00:06.693
> 
> 标签：networking, simulator, network-traffic

我正在测试一个应用程序，它监视流量并识别网络中存在的各种主机/机器，并列出运行在它们上面的服务/应用程序。

我将如何模拟来自多个应用程序的流量（例如：Http、Https、Oracle、SQL Server、SAP 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:56:30.770

我认为没有任何类型的模拟器可以满足您的要求。我们有负载测试仪、负载平衡测试仪等。

但是模拟所有设备和技术，如 SAP 等，真的很难。应该有一个单独的应用程序，每个应用程序都安装在使用网络的应用程序/设备上，并且确实需要

# android - 在android中拆分相机

> ID：15002887
> 
> 赞同：0
> 
> 时间：2013-02-21T13:00:06.670
> 
> 标签：android, camera

我正在开发android中的相机应用程序。我想在一个布局中捕获两个图像。这可能使用片段吗？

# c# - 在不使用按钮的情况下单击 gridview 行时不显示模式弹出窗口

> ID：15002890
> 
> 赞同：3
> 
> 时间：2013-02-21T13:00:10.213
> 
> 标签：c#, asp.net, data-binding

单击gridview行时我需要显示一个模式弹出窗口（没有任何按钮），我设法通过单击gridview行来显示弹出窗口，但不知道将值绑定到模式弹出窗口中显示的文本框。所以我需要帮助

1.  将 gridview 行（单击时）值绑定到模式弹出文本框
2.  模态弹出文本框仅在单击编辑按钮（位于模态弹出窗口底部）时才可编辑
3.  编辑工作完成后，点击保存按钮（位于编辑按钮旁边的底部）时应保存编辑后的数据

作为 asp.net 的新手，请尝试帮助我提出您对我的要求的建议。由于下面的代码能够显示弹出 wen 点击了 gridview 行，但建议我如何将值绑定到文本框：

```
protected void grid_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            GridViewRow row = e.Row;

            if (row.DataItem == null)
            {
                return;
            }

            try
            {
                switch (e.Row.RowType)
                {
                    case DataControlRowType.Header:
                        break;

                    case DataControlRowType.DataRow:
                        e.Row.Attributes.Add("onmouseover", "this.style.cursor='hand'");
                        e.Row.Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(grid, "Select$" + e.Row.RowIndex.ToString()));
                        e.Row.Attributes.Add("onclick", String.Format("javascript:$find('{0}').show();", ModalPopupExtender2.ClientID));

                        TextBox1.Text = grid.SelectedRow.Cells[0].Text;
                        TextBox2.Text = grid.SelectedRow.Cells[1].Text;
                        TextBox3.Text = grid.SelectedRow.Cells[2].Text;
                        TextBox4.Text = grid.SelectedRow.Cells[3].Text;
                        TextBox5.Text = grid.SelectedRow.Cells[4].Text;

                        ModalPopupExtender2.Show();
                        break;
                }
            }

            catch
            {
                return;
            }
        } 
```

HTML 代码：

```
<asp:Panel ID="editpanel" runat="server">
            <table width="850px" border="1" class="color">
            <tr>
            <td align="center">
            <asp:Label ID="Label1" runat="server" Text="Firstname" Width="150px"></asp:Label>
            <asp:Label ID="Label2" runat="server" Text="Surname" Width="150px"></asp:Label>
            <asp:Label ID="Label3" runat="server" Text="Visits" Width="150px"></asp:Label>
            <asp:Label ID="Label4" runat="server" Text="$ Speed" Width="150px"></asp:Label>
            <asp:Label ID="Label5" runat="server" Text="Points" Width="150px"></asp:Label>
            <asp:ImageButton id="ImageButton1" runat="server" src="close.png" onclick="close_Click" style="float:right; height: 16px;" ToolTip="To close window"/>
            </td>
            </tr>
            <tr>
            <td>
            <asp:TextBox ID="TextBox1" runat="server" ></asp:TextBox>
            <asp:TextBox ID="TextBox2" runat="server"  ></asp:TextBox>
            <asp:TextBox ID="TextBox3" runat="server" ></asp:TextBox>
            <asp:TextBox ID="TextBox4" runat="server" ></asp:TextBox>
            <asp:TextBox ID="TextBox5" runat="server"></asp:TextBox>
            </td>
            </tr>
            <tr>
                <td>
                        <asp:ImageButton ID="cancell" runat="server" onclick="cancell_Click"  
                        src="cancel.jpg" style="float:right; width: 16px;" 
                        ToolTip="To cancel member" />                    
                    <asp:ImageButton ID="tickk" runat="server" onclick="tickk_Click" src="tick.jpg" 
                        style="float:right; height: 16px;" ToolTip="To save member" />            
                     <asp:ImageButton ID="Edit" runat="server" onclick="edit_Click"  
                        src="edit.jpg" style="float:right; height: 16px; width: 16px;" 
                        ToolTip="To edit member" />
                </td>
                </tr>
            </table>   
            </asp:Panel>
    <asp:ModalPopupExtender ID="ModalPopupExtender2" runat="server" TargetControlID="modal2" PopupControlID="editpanel" BackgroundCssClass="modalBackground"></asp:ModalPopupExtender>

       <asp:ImageButton ID="modal2" runat="server" src="addmember.jpg" OnClick="modal2_click" Text="modal2" style="display:none;"/> // have created a dummy image button 
```

由于我是 asp.net 的新手，请尝试帮助我提出您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:22:15.623

使用它通过使用`BindingSource`（只是一个例子）将您的数据与文本框绑定：

```
textBoxid.DataBindings.Add(new Binding("Text", customersBindingSource, "ID"));
textBoxname.DataBindings.Add(new Binding("Text", customersBindingSource, "NAME"));
textBoxcity.DataBindings.Add(new Binding("Text", customersBindingSource, "City")); 
```

要使您的文本框不可编辑，请使用以下命令：

```
private void EditButton_Click(object sender, EventArgs e)
        {
            if (textBoxid.ReadOnly == true)
            {
                textBoxid.ReadOnly = false;
                //how many text boxes you have, do the same here
            }
            else
            {
                textBoxid.ReadOnly = true;
                //how many text boxes you have, do the same here
            }
        } 
```

`UPDATE`要保存您的编辑，只需使用所有新数据运行查询。

# sql-server - SQL：过程没有得到一个空日期

> ID：15002892
> 
> 赞同：1
> 
> 时间：2013-02-21T13:00:12.467
> 
> 标签：sql-server, date, stored-procedures, null

我正在执行这样的过程：

```
EXEC myProcedure  @name = 'Smith',  @dateDeleted = NULL 
```

我需要所有没有删除日期的史密斯。

这是程序：

```
CREATE PROCEDURE [dbo].[myProcedure]
  @name VARCHAR(8000) = NULL
 ,@dateDeleted VARCHAR(8000) = NULL

AS
BEGIN
 SET NOCOUNT ON;
    WITH t 
    (name
    ,dateDeleted
    )

AS
(
    SELECT DISTINCT 
    name,dateDeleted FROM mytable
     WHERE 
  (@name IS NULL OR @name = name)
   AND (@dateDeleted IS NULL OR CONVERT(DATETIME, @dateDeleted, 102) = dateDeleted)

) 
```

执行后，我拥有所有的史密斯，但它没有注意 dateDeleted = NULL .. 无论他们是否有删除的日期，我都会得到所有的史密斯

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:19:53.177

在您的请求中，如果您传递 NULL，则条件始终为真。试试这个 WHERE 子句和[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349.aspx)表达式：

```
 WHERE (@name IS NULL OR @name = name)
   AND (COALESCE(@dateDeleted, dateDeleted) IS NULL 
     OR CONVERT(DATETIME, @dateDeleted, 102) = dateDeleted) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:02:55.463

您需要设置 ansi nulls on

执行：

```
set ansi_nulls on 
```

然后执行查询。

这是对此行为的解释

[http://msdn.microsoft.com/en-us/library/ms188048.aspx](http://msdn.microsoft.com/en-us/library/ms188048.aspx)

# asp.net-mvc-3 - MVC3 在模型中嵌入模型

> ID：15002893
> 
> 赞同：0
> 
> 时间：2013-02-21T13:00:13.473
> 
> 标签：asp.net-mvc-3

在使用嵌入其他模型的模型时，我遇到了很多问题（验证、序列化），我只是想知道之前是否有人收到过此类问题。例如，我有一个附有以下模型的查询表：

**模型**

```
namespace
{
    public class EnquiryStudent
    {
        public enquiry enquiry { get; set; }
        public student student { get; set; }        
    }
} 
```

查询和学生模型（嵌入在查询学生中）是从数据库自动生成的（我使用的是数据库优先方法）。

例如，我在这里遇到的一个问题是我使用视图来显示基于上述模型的表单：

**看法**

```
@using (@Html.BeginForm())
{
    <div>
        <fieldset>
            <fieldset>
                <legend>Enquiry</legend>
                <div class="editor-label">
                    @Html.LabelFor(m => m.student.firstname)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.student.firstname)
                    @Html.ValidationMessageFor(m => m.student.firstname)
                </div>
                <div class="editor-label">
                    @Html.LabelFor(m => m.student.surname)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.student.surname)
                    @Html.ValidationMessageFor(m => m.student.surname)
                </div>
                <div class="editor-label">
                    @Html.LabelFor(m => m.student.email)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.student.email)
                    @Html.ValidationMessageFor(m => m.student.email)
                </div>
                <div class="editor-label">
                    @Html.LabelFor(m => m.enquiry.subject)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.enquiry.subject)
                    @Html.ValidationMessageFor(m => m.enquiry.subject)
                </div>
                <div class="editor-label">
                    @Html.LabelFor(m => m.enquiry.enquiry_text)
                </div>
                <div class="editor-field">
                    @Html.TextAreaFor(m => m.enquiry.enquiry_text)
                    @Html.ValidationMessageFor(m => m.enquiry.enquiry_text)
                </div>
            </fieldset>
            <p>
                <input type="submit" class="rounded-button-gray-shades" value="Send" />
            </p>
        </fieldset>
    </div>
} 
```

并且客户端验证适用于除查询文本之外的所有内容（EnquiryStudent 模型中嵌入式查询的属性，即它不验证此客户端仅服务器端？

现在更奇怪的是，如果我将 enquiry_text 更改为 TextBoxFor 而不是 TextAreaFor 它工作得很好。或者，如果我通过向 EnquiryStudent 模型（未嵌入在另一个模型中）添加一个虚拟字段来为另一个实体创建一个文本区域，它可以正常工作。

有人可以解释一下，就像我说的那样，这不是我在这种模特关系中遇到的唯一怪癖。

谢谢，

# android - 自定义列表视图

> ID：15002894
> 
> 赞同：1
> 
> 时间：2013-02-21T13:00:16.767
> 
> 标签：android

我有一个名为 package_name 的编辑文本，我希望当我单击 edittext 时，应该打开一个活动，其中包含所有包名称的列表视图。而且我希望当单击一个单元格时应该弹出一个窗口，该窗口将显示包的详细信息和一个按钮，当单击按钮时，控件应该转移到列表视图。当我单击应该选择 package_name 的复选框时，我想在每个单元格上添加复选框，并将在开头的 package_name 的编辑文本中显示。我想要这样的东西。这可以创建吗？或者任何人都可以为这种情况提供一些其他选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:08:22.437

Yes it is possible....Try with this simple tutorial [http://www.androidhive.info/2011/10/android-listview-tutorial/](http://www.androidhive.info/2011/10/android-listview-tutorial/)

# prolog - 使用散列列表过滤范围

> ID：15002896
> 
> 赞同：0
> 
> 时间：2013-02-21T13:00:27.670
> 
> 标签：prolog

我是 c++ 人，我对 prolog 完全陌生。我正在使用 sicstus prolog。

我遇到了如下需求：

假设我有一个变量

```
A={0,1,2,3}
B={-2,-1,0,1,2,3,4,5} 
```

我有哈希之类的东西

```
0-{3}
1-{4} 
```

现在我需要使用此哈希过滤 A 和 B 的值，以便在操作后：

```
A={0,1}
B={3,4} 
```

逻辑是来自 A 的值将与散列的键匹配

如果键存在，则检查值。如果值存在于 B 中，则保留 A 中的值。否则应该删除值。以同样的方式对 B 进行处理，散列中的值应该在 A 中搜索，如果不存在，则应该在 B 中删除。对 B 意味着完全相反的方式。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:27:02.010

我建议您使用列表来保存 A 和 B 的键和值，并使用`Key-Value`对列表来保存您的哈希图。这样您就可以使用内置的辅助谓词`include/3`并`memberchk/2`满足您的需求。

然后你可以编写一个过滤A和B项目的程序：

```
filter(A, B, Hash, FA, FB):-
  include(filterkey(B, Hash), A, FA),
  include(filtervalue(A, Hash), B, FB).

filterkey(B, Hash, Item):-
  memberchk(Item-Value, Hash),
  memberchk(Value, B).

filtervalue(A, Hash, Value):-
  memberchk(Item-Value, Hash),
  memberchk(Item, A). 
```

说如果你有

```
A=[0,1,2,3]
B=[-2,-1,0,1,2,3,4,5]
Hash=[0-3, 1-4] 
```

然后：

```
?- A=[0,1,2,3], B=[-2,-1,0,1,2,3,4,5], Hash=[0-3, 1-4], filter(A, B,Hash, FA, FB).
Hash = [0-3, 1-4],
FA = [0, 1],
FB = [3, 4]. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:35:49.257

很抱歉，我没有 Sicstus 可供测试，然后我可能会完全偏离轨道，但您正在处理一种*非常*特殊的变量。考虑

```
?- write_canonical({1,2,3,4}).
{}(','(1,','(2,','(3,4))))

?- {1,2,3,4}={A}.
A = (1, 2, 3, 4). 
```

大括号实际上只是元组的一个特殊名称，AFAIK 被用作在 DSL（域特定语言）中引入可读数据的句法设备，例如库中的*约束*（[clpqr](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.8%27,swi%28%27/doc/Manual/clpqr.html%27%29%29)）。

我的意思是或者

*   您对任务使用了*错误*的表示形式（gusbro 解决了这个问题，+1）
*   您正在搜索 Sicstus 中不可用的 clp 约束扩展（过滤？）。但是，这个问题应该以更好的方式重新表述。

无论如何，如果添加例如，您可以在*不更改*程序的情况下调整 gusbro 的答案，

```
member_set(E, {','(E,_)}).
member_set(E, {','(_,T)}) :- member_set(E, {T}).
member_set(E, {E}). 
```

替换memberchk。include/3 也必须重写，但这并不容易。否则，转换谓词

```
set_list({','(A,B)}, [A|R]) :- set_list({B}, R), !.
set_list({E}, [E]).
set_list({}, []). 
```

可能很方便：

```
?- set_list(S,[1,2,3]).
S = {1, 2, 3}.

?- set_list({1,2,3},L).
L = [1, 2, 3]. 
```

# c++ - 解决 SPOJ ww w.spoj.com/problems/PRHYME/ 的正确方法是什么？

> ID：15002907
> 
> 赞同：1
> 
> 时间：2013-02-21T13:01:05.587
> 
> 标签：c++, string, algorithm, trie

我一直在尝试解决这个问题 SPOJ ww​​w.spoj.com/problems/PRHYME/? 几天了，但没有成功。这是简单的问题：

> 给定一个词表 L 和一个词 w。你的任务是在 L 中找到一个与 w 形成完美押韵的单词。这个词 u 是由以下属性唯一确定的：
> 
> *   它在 L.
> *   它与 w 不同。
> *   它们的共同后缀是尽可能长的。
> *   在满足前面几点的所有单词中，u 是字典上最小的单词。
> 
> 一个单词的长度将<=30。
> 字典和查询中的单词数都可以是 2,50,000。

我正在使用 trie 将字典中的所有单词反转存储。然后为了解决查询，我按照以下方式进行：-

1.  如果单词存在于 trie 中，则将其从 trie 中删除。
2.  现在从根遍历 trie，直到查询字符串中的字符与 trie 值匹配的点。让找到最后一个字符匹配的点为 P。
3.  现在从 P 点开始，我使用 DFS 遍历 trie，并在遇到叶节点时，将形成的字符串推送到可能的结果列表中。
4.  现在我从这个列表中返回字典顺序最小的结果。

当我在 SPOJ 上提交我的解决方案时，我的解决方案会出现 Time Limit Exceeded 错误。

有人可以建议一个详细的算法或提示来解决这个问题吗？如果需要，我可以发布我的代码。

```
#include<iostream>
#include<cstdio>
#include<cstring>
#include<climits>
#include<vector>
#include<string>
#include<algorithm>
#include<cctype>
#include<cstdlib>
#include<utility>
#include<map>
#include<queue>
#include<set>
#define  ll long long signed int
#define ull unsigned long long int 

const int alpha=26;

using namespace std;

struct node
{
    int value;
    node * child[alpha]; 
};
node * newnode()
{
    node * newt=new node;
    newt->value=0;
    for(int i=0;i<alpha;i++)
    {
        newt->child[i]=NULL;
    }
    return newt;
}

struct trie
{
   node * root;
   int count;
   trie()
   {
      count=0;
      root=newnode();
   }
};
trie * dict=new trie;

string reverse(string s)
{
   int l=s.length();
   string rev=s;
   for(int i=0;i<l;i++)
   {
       int j=l-1-i;
       rev[j]=s[i];

   }

   return rev;  
}
void insert(string s)
{
    int l=s.length();
    node * ptr=dict->root;
    dict->count++;
    for(int i=0;i<l;i++)
    {
       int index=s[i]-'a';
       if(ptr->child[index]==NULL)
       {
         ptr->child[index]=newnode();
       }
       ptr=ptr->child[index];
    }
    ptr->value=dict->count;

}
void dfs1(node *ptr,string p)
{
   if(ptr==NULL) return;
   if(ptr->value)  cout<<"word" <<p<<endl;
   for(int i=0;i<26;i++)
   {    
         if(ptr->child[i]!=NULL)
         dfs1(ptr->child[i],p+char('a'+i));
   }

}

vector<string> results;
pair<node *,string> search(string s)
{
    int l=s.length();
    node * ptr=dict->root;
    node *save=ptr;
    string match="";
    int i=0;
    bool no_match=false;
    while(i<l and !no_match)
    {
        int in=s[i]-'a';
        if(ptr->child[in]==NULL)
        {

          save=ptr;
          no_match=true;
        }
        else
        {

           ptr=ptr->child[in];
           save=ptr;
           match+=in+'a';
        }
        i++;

    }
    //cout<<s<<" matched till here"<<match <<" "<<endl;
    return make_pair(save,match);

}
bool  find(string s)
{
    int l=s.length();
    node * ptr=dict->root;
    string match="";
    for(int i=0;i<l;i++)
    {
          int in=s[i]-'a';
          //cout<<match<<"match"<<endl;
         if(ptr->child[in]==NULL)
         {
           return false;
         }
         ptr=ptr->child[in];
        match+=char(in+'a');
    }
    //cout<<match<<"match"<<endl;

    return true;

}
bool leafNode(node *pNode)
{
    return (pNode->value != 0);
}

bool isItFreeNode(node *pNode)
{
    int i;
    for(i = 0; i < alpha; i++)
    {
        if( pNode->child[i] )
            return false;
    }

    return true;
}
bool deleteHelper(node *pNode, string key, int level, int len)
{
    if( pNode )
    {
        // Base case
        if( level == len )
        {
            if( pNode->value )
            {
                // Unmark leaf node
                pNode->value = 0;

                // If empty, node to be deleted
                if( isItFreeNode(pNode) )
                {
                    return true;
                }

                return false;
            }
        }
        else // Recursive case
        {
            int index = (key[level])-'a';

            if( deleteHelper(pNode->child[index], key, level+1, len) )
            {
                // last node marked, delete it
                free(pNode->child[index]);
                pNode->child[index]=NULL;

                // recursively climb up, and delete eligible nodes
                return ( !leafNode(pNode) && isItFreeNode(pNode) );
            }
        }
    }

    return false;
}
void deleteKey(string key)
{
    int len = key.length();

    if( len > 0 )
    {
        deleteHelper(dict->root, key, 0, len);
    }
}
string result="***";
void dfs(node *ptr,string p)
{
   if(ptr==NULL) return;
   if(ptr->value )  
   {
       if((result)=="***")
       {
          result=reverse(p);
       }
       else
       {
          result=min(result,reverse(p));
       }

   }
   for(int i=0;i<26;i++)
   {    
         if(ptr->child[i]!=NULL)
         dfs(ptr->child[i],p+char('a'+i));
   }

}
int main(int argc ,char ** argv)
{
         #ifndef ONLINE_JUDGE
         freopen("prhyme.in","r",stdin);
         #endif
        string s;
         while(getline(cin,s,'\n'))
         {

            if(s[0]<'a' and s[0]>'z')
            break;
           int l=s.length();
           if(l==0) break;
           string  rev;//=new char[l+1];
           rev=reverse(s);

        insert(rev);
        //cout<<"...........traverse..........."<<endl;
        //dfs(dict->root);       
        //cout<<"..............traverse end.............."<<endl;         

         }      
          while(getline(cin,s))
         {

            results.clear();
            //cout<<s<<endl;
            int l=s.length();
            if(!l) break;
            string rev;//=new char[l+1];
            rev=reverse(s);
            //cout<<rev<<endl;
            bool del=false;
            if(find(rev))
            {
              del=true;
              //cout<<"here found"<<endl;
              deleteKey(rev);
            }
             if(find(rev))
            {
              del=true;
              //cout<<"here found"<<endl;
              deleteKey(rev);
            }
            else
            {
              //cout<<"not here found"<<endl;
            }
          // cout<<"...........traverse..........."<<endl;
        //dfs1(dict->root,"");       
     // cout<<"..............traverse end.............."<<endl;         
            pair<node *,string> pp=search(rev);

            result="***";   
            dfs(pp.first,pp.second);
            //cout<<"search results"<<endl;
            //dfs1(pp.first,pp.second);
            //cout<<"end of search results"<<
            for(int i=0;i<results.size();i++)
            {
               results[i]=reverse(results[i]);
              // cout<<s<<" "<<results[i]<<endl;
            }
            string smin=result;

            if(del)
            {
               insert(rev);
            }
            cout<<smin<<endl;
         }  

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:21:53.563

您的算法（使用存储所有反转单词的 trie）是一个好的开始。但它的一个问题是，对于每次查找，您必须枚举具有特定后缀的所有单词才能找到字典顺序上最小的单词。在某些情况下，这可能需要大量工作。

解决此问题的一种方法：在每个节点（对应于每个后缀）中，存储具有该后缀的两个字典顺序最小的单词。通过更新每个新添加的叶子的所有祖先节点来构建 trie 时，这很容易维护（请参见下面的伪代码）。

然后查找单词`w`，从与单词对应的节点开始，然后在树中向上，直到到达包含除 之外的后代单词的节点`w`。然后返回存储在该节点中的字典最小的单词，或者如果最小的等于 ，则返回第二小的单词`w`。

要创建 trie，可以使用以下伪代码：

```
for each word:
    add word to trie
    let n be the node corresponding to the new word.
    for each ancestor a of n (including n):
        if a.smallest==null or word < a.smallest:
            a.second_smallest = a.smallest
            a.smallest = word
        else if a.second_smallest==null or word < a.second_smallest:
            a.second_smallest = word 
```

查找一个词`w`：

```
let n be the node corresponding to longest possible suffix of w.
while ((n.smallest==w || n.smallest==null) && 
       (n.second_smallest==w || n.second_smallest==null)):
    n = n.parent
if n.smallest==w:
    return n.second_smallest
else:
    return n.smallest 
```

另一种类似的可能性是使用哈希表将所有后缀映射到字典上最小的两个单词，而不是使用 trie。如果可以使用，这可能更容易实现`std::unordered_map`。

# php - 创建新服务时的 Symfony 2 InvalidArgumentException

> ID：15002910
> 
> 赞同：4
> 
> 时间：2013-02-21T13:01:10.573
> 
> 标签：php, symfony

我正在尝试在 symfony 2 应用程序中创建我的第一个服务，但出现此错误：

```
InvalidArgumentException: There is no extension able to load the
configuration for "my_app.myservice" (in
/path/to/src/MyApp/MyBundle/DependencyInjection/../Resources/config/services.yml).
Looked for namespace "my_app.myservice", found none. 
```

我的配置似乎有问题，但我不明白它是什么。

这是我的**services.yml**

```
services:
my_app.myservice:
    class: MyApp\MyBundle\Service\MyService 
```

我的服务看起来像这样

```
<?php
namespace MyApp\MyBundle\Service;

class MyService
{
    public function run()
    {
        echo "hello world";
    }
} 
```

感谢帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:45:31.403

只是为了确定-您在 services.yml 中有适当的缩进吗？

它应该是：

```
services:
  my_app.myservice:
    class: MyApp\MyBundle\Service\MyService 
```

不是：

```
services:
my_app.myservice:
  class: MyApp\MyBundle\Service\MyService 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:18:48.970

您的服务构造函数中有任何参数吗？

例如，我在所有服务中传递记录器。

结果是我必须在我的 service.yml 中传递它

* * *

`service.yml`

```
services:
    blog:
        class:Site\Backend\BlogBundle\Service\BlogService
        arguments: [@logger]
        tags:
            - { name: monolog.logger, channel: blog} 
```

`BlogService`

```
public function __construct(LoggerInterface $logger){
    $this->logger = $logger;
} 
```

# javascript - 为什么幻灯片代码不正确？

> ID：15002916
> 
> 赞同：0
> 
> 时间：2013-02-21T13:01:30.157
> 
> 标签：javascript, jquery, html, css, slideshow

我想用我以前用过一百次的代码制作幻灯片，但由于某种原因它现在不起作用。我无法弄清楚我做错了什么。HTML

```
<div id="project1" class="project curent">
 <img src="http://images.nationalgeographic.com/wpf/media-live/photos/000/004/cache/african-lion-male_436_600x450.jpg" class="active" />
 <img src="http://www.howdoeslooklike.com/wp-content/uploads/2012/10/Lion-013-2048x2048.jpg" />
 <img src="http://us.123rf.com/400wm/400/400/aleksm/aleksm1209/aleksm120900002/15398724-winged-lion-front-view-drawing.jpg" />
</div> 
```

CSS

```
.project{position:absolute; top:0; left:0; width:100%;}
.project img{position:absolute; top:0; left:0;  width:200px; height:auto;z-index:8;}
.project img.active{z-index:10;}
.project img.last-active{z-index:9;} 
```

jQuery

```
function slideSwitch() {
    var $active = $(".project img.active");
    $active.hide();
    if ( $active.length == 0 ) $active = $('.project IMG:last');

    var $next =  $active.next().length ? $active.next()
        : $('.project IMG:first');

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active last-active');
        });
}

$(function() {
    setInterval( "slideSwitch()", 1000 );
}); 
```

这是一个正在进行的示例[。](http://jsfiddle.net/sdGhT/1/)有什么想法吗？:|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:06:21.420

`slideSwitch()`在 setInterval 中未正确调用。这显示在控制台中。另请注意，您的幻灯片代码无法正常工作，因此我添加了一个`.show()`以使`.last-active`图像再次出现。

jQuery：

```
function slideswitch() {
    var $active = $("#project1 img.active");
    $active.hide();
    if ( $active.length == 0 ) $active = $('#project1 IMG:last');

    var $next =  $active.next().length ? $active.next()
        : $('#project1 IMG:first');

    $active.addClass('last-active').show();

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active last-active');
        });
};
$(document).ready(function() {
    setInterval(slideswitch, 1000 );
}); 
```

小提琴：http: [//jsfiddle.net/sdGhT/8/](http://jsfiddle.net/sdGhT/8/)

# asp.net - 如何在不延迟 ASP.NET 中的响应的情况下发送电子邮件？

> ID：15002926
> 
> 赞同：3
> 
> 时间：2013-02-21T13:02:00.790
> 
> 标签：asp.net, asp.net-mvc

我尝试了很多变体来快速将响应返回给用户并在后台发送电子邮件但失败了。这是我尝试过的一个示例，

```
ThreadPool.QueueUserWorkItem(callback => 
                // It is important to put this line inside try catch otherwise it might crash the process 
                client.SendAsync(message, message)
                ); 
```

当我在 client.SendAsync 上设置断点时，在执行此行之前不会向用户发送任何响应。那么在后台发送电子邮件而不等待响应的正确方法是什么。

**更新：**我想我遇到了问题，实际上是 VS 调试器停止了 asp.net 线程（挂起），直到您逐步执行。上面的代码适用于我的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:34:28.090

您可以将电子邮件放在消息队列中，并在从该消息队列读取的单独服务中处理它的实际发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:38:03.767

根据电子邮件的数量和大小，您也可以考虑将它们写入取件文件夹。您可以使用本地 IIS SMTP 服务器通过智能主机中继邮件。在实践中，这对我们非常有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:49:10.600

使用 ASP.NET 异步发送电子邮件[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-send-email-asynchronously-with-aspnet](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-send-email-asynchronously-with-aspnet)

# c# - 如何结合 PolicyInjection.Create 和 UnityContainer.RegisterType？

> ID：15002928
> 
> 赞同：0
> 
> 时间：2013-02-21T13:02:01.823
> 
> 标签：c#, .net, asp.net-mvc, dependency-injection, enterprise-library

我的 Web 应用程序使用 UnityContainer。

我想添加策略注入。

我怎样才能同时使用它们？

意味着谁应该负责类型注册？

政策注入：

```
 public ActionResult Index()
    {
        var model = PolicyInjection.Create<TestModel, ITestModel>();

        ViewBag.Message = model.TestLog();

        return View();
    } 
```

统一：

```
 IUnityContainer container = defaultContainer;

                //registering Unity for MVC
                DependencyResolver.SetResolver(new UnityDependencyResolver(container));

                //registering Unity for web API
                //  GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container);

                #region managers
                container.RegisterType<ISettingsManager, SettingsManager>();

                container.RegisterType<IMamDataManager, MamDataManager>();

                container.RegisterType<IAppsDataManager, AppsDataManager>();
                #endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:27:05.210

[Unity 2.0 集成了策略注入](http://msdn.microsoft.com/en-us/library/ff660915%28v=pandp.20%29.aspx)。您不必再使用静态`PolicyInjection`类。

* * *

**更新**

[Dino Esposito](http://msdn.microsoft.com/de-de/magazine/gg598927.aspx)有一篇文章，其中包含一些很好的例子。

# perl - Perl 匿名子程序/函数错误

> ID：15002930
> 
> 赞同：1
> 
> 时间：2013-02-21T13:02:07.180
> 
> 标签：perl, nested, anonymous-function, anonymous, subroutine

我有以下一段代码：（出于这个问题的目的，非常简化，但完美地说明了我遇到的问题）

```
#!/usr/bin/perl

use strict;
use warnings;

&outer;
my $connected_sub;

sub outer {
    print "HELLO\n";

    &$connected_sub;
    $connected_sub = sub {
        print "GOODBYE\n";
    }
} 
```

运行程序时会给出以下输出和错误：

```
HELLO
Use of uninitialized value in subroutine entry at subTesting line 13.
Can't use string ("") as a subroutine ref while "strict refs" in use at subTesting.pl line 13. 
```

我在这里完全忽略了什么吗？我无法理解或弄清楚这是什么问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T13:11:12.880

澄清：

*子程序定义*发生在编译阶段。因此，这样的代码将起作用：

```
foo();

sub foo { print "No need to declare me before calling!"; } 
```

但是在调用该行代码之前，实际上不会发生*赋值。*这就是为什么这不起作用：

```
my $foo;

&$foo();

$foo = sub { print "Foo hasn't been set to me when you try to call me." } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T13:13:01.853

我假设您在这里尝试做的是为变量分配一个匿名子`$connected_sub`。这不是一个好方法。

您正在做的是获取一个空变量，尝试将其用作代码引用，为其分配代码引用，然后退出子程序，*然后*使用`my`. 不是最好的做事顺序。

您可能想要做的是返回一个可以分配给变量的值，如下所示：

```
my $connected = outer();
$connected->();

sub outer {
    print "HELLO\n";
    my $sub = sub { print "GOODBYE\n"; }
    return $sub;
} 
```

我认为在子例程中使用词法变量有点令人困惑。除了使用全局变量的一般缺点外，子程序也在代码执行和变量声明之前编译。

此外，在调用子程序时，这样做的标准方法是

```
name(@args); 
```

`@args`你的论点列表在哪里。使用`&`是老式的 perl，使用它有特殊的含义（覆盖原型）。在变量中使用匿名子时，请使用`->()`表示法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T13:05:04.900

$connected_sub 未初始化。尝试分配给匿名子：

```
my $connected_sub = sub {
   print "The code you need to run\n";
} 
```

在定义处，并在 &$connected_sub 调用之后删除代码

这是修改后的完整示例：

```
#!/usr/bin/perl
use strict;
use warnings;

my $connected_sub = sub {
   print "GOODBYE\n";
};

&outer;

sub outer
{
        print "HELLO\n";
        &$connected_sub;
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T13:08:12.297

看起来您在`$connected_stub`初始化之前正在使用它。尝试将初始化向上移动，例如：

```
 $connected_sub = sub {
    print "GOODBYE\n";

    }
    &$connected_sub; 
```

# asp.net - 尝试打开文件浏览器时出现错误

> ID：15002931
> 
> 赞同：0
> 
> 时间：2013-02-21T13:02:07.083
> 
> 标签：asp.net, file, sta, mta

目前在我的网站上，我正在尝试获取它，以便用户可以从他们的本地图像上传图像。我遵循了一个教程，但是当我调试它并尝试打开我的图像文件夹时，我收到以下错误消息：

“在进行 OLE 调用之前，必须将当前线程设置为单线程单元 (STA) 模式。确保您的 Main 函数上标记了 STAThreadAttribute。仅当调试器附加到进程时才会引发此异常。”

请有人可以在这里帮助我，我已经阅读了一些帖子；但被视为这是我第一次这样做；我真的不明白他们。

感谢您的任何回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:24:57.327

您正在尝试在 ASP.NET 网页中使用 Windows 窗体功能。第 140 行：

`FileDialog fldlg = new OpenFileDialog();`

Windows 窗体是桌面技术。您不能将它与 ASP.NET Web 应用程序混合使用。您可以使用 FileUploadControl 在您的 Web 应用程序中启用文件上传：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)

# ember.js - 如何使用控制器和视图组织 ember 应用程序

> ID：15002936
> 
> 赞同：4
> 
> 时间：2013-02-21T13:02:16.327
> 
> 标签：ember.js

控制器、视图和其他 ember 构造的最佳组合是什么，可以将应用程序与下面线框中的基本功能组合在一起？

我不是在寻找详细的实现，而是在寻找如何构建 Ember 应用程序以及如何将控制器、视图、模板等作为构建块进行推理的灵感。

我的假设是这个屏幕位于`ContactsRoute`并且`ContactsController`是一个`ArrayController`包含`Contact`模型（选定的状态只是 UI 而不是持久化）。

![简单的联系人浏览器](../Images/dfade53b2eb420a94417c2a8c213cae7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:38:20.567

一些想法，因为我有类似的运行：

我在这里看到两个布局列：

**Left Col**：是一个带有关联控制器的 TreeNavView。如果您输入 #/contacts（和 #/contacts/），则会选中它

**Right Col**：带有关联控制器的 ContactsView。视图很可能由较小的视图原子（如输入控件等）组装而成。

关于控制器的特别说明：根据我的经验，您在 Ember 中或多或少地被迫在控制器和视图之间建立 1:1 的关系——因此共享控制器是一件坏事，而且很难管理。

应用程序视图包含 HTML/CSS 布局，并且两列都有两个出口。

如何将相应的视图渲染到插座中？对于左列，我将直接从应用程序视图模板中“调用”视图，如下所示：

```
{{view App.TreeNav}} 
```

我将通过相应的路由器映射填充“正确的出口”：

```
this.route('contacts', {path: '/contacts'}); 
```

和路线：

```
IB.ContactsRoute = Em.Route.extend({
    renderTemplate: function() {
          this._super();
          this.render('contacts', {into: 'application', outlet: 'secondCol'});
    }
}); 
```

# ruby - 如何停止使 tmux 自动设置 RBENV_VERSION

> ID：15002937
> 
> 赞同：9
> 
> 时间：2013-02-21T13:02:21.607
> 
> 标签：ruby, shell, tmux, rbenv

当我启动 tmux 时，tmux 会自动设置 RBENV_VERSION ...

有谁知道如何阻止它？

因为它自动设置它，我需要做

`$ export RBENV_VERSION`

取消设置并使 .ruby-version 工作。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T10:25:24.767

*tmux*本身永远不会自行设置（或取消设置）RBENV_VERSION。您有一些配置导致了这种情况。

我的猜测是 RBENV_VERSION 是在您启动*tmux*服务器时设置的，现在它是*tmux* “全局环境”（由*tmux*启动的所有进程继承的基本环境）的一部分。你可以检查这个

```
tmux show-environment -g | grep RBENV 
```

如果它在那里，您可以使用以下命令将其删除：

```
tmux set-environment -gu RBENV_VERSION 
```

如果您经常发现自己在 RBENV_VERSION 已设置时启动*tmux*（并且您不希望它在“内部” *tmux*发送），那么您可以将上述命令添加到您的`~/.tmux.conf`文件中，以确保每次启动服务器时都将其清除。

另一种可能性是它是您的*tmux* “会话环境”的一部分；此环境在全局环境之上“分层”，以形成由会话中为新窗口和窗格启动的进程所继承的环境。您可以使用此命令检查它（在会话中运行它，或添加`-t sessname`以指定会话）：

```
tmux show-environment | grep RBENV 
```

如果存在，您可以以类似的方式取消设置：

```
tmux set-environment -u RBENV_VERSION 
```

最后，如果变量在全局或会话环境中都不存在，那么它可能来自您的 shell 初始化文件中的某些内容。默认情况下，*tmux*会启动登录 shell，因此请务必检查 shell 配置的相应位（例如`.bash_profile`、`.bash_login`、`.profile`等）以及任何其他初始化位。

# asp.net - 如何在 Intranet 上离开在线网站

> ID：15002938
> 
> 赞同：0
> 
> 时间：2013-02-21T13:02:21.763
> 
> 标签：asp.net, visual-studio-2010

我正在开发一个`Call System`，现在，我的老板想尝试一下。我怎样才能离开我`asp.net website`的，`intranet`以便他可以访问并尝试`website`？我想我必须访问`publish`我的网站，但我不知道该怎么做；\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:09:14.263

你的网络上应该有一个登台服务器，上面安装了所有必要的先决条件，如 .net 框架、sql、实体框架（如果你正在使用它）。

然后将网站放在这台服务器上，并从 IIS 确保它正在运行，没有任何权限或任何异常。

之后，您可以将带有应用程序名称的服务器的 ip 发送给该网络上的任何人，他们应该能够正常浏览它。

另一个快速的解决方案将做同样的事情，但使用你自己的电脑（只要你在网络上）

检查这些链接：

1.  [http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0](http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0)

2.  [在 IIS7 中配置 ASP.NET](https://stackoverflow.com/questions/532203/configuring-asp-net-in-iis7)

3.  [http://forums.asp.net/t/1533954.aspx/1](http://forums.asp.net/t/1533954.aspx/1)

问候

# c++ - 为不区分大小写的映射定义模板

> ID：15002939
> 
> 赞同：2
> 
> 时间：2013-02-21T13:02:23.877
> 
> 标签：c++, templates

目标：带有字符串键的标准映射模板 + 用于区分大小写的可选真/假参数

让它按如下方式工作，但结果很丑 - 必须有更好的方法！

```
//step 1: templated typdefs for case-insensitive (ci), case-sensitive (cs) maps
template <typename T> struct ci_map { typedef std::map<std::string, T, ci_compare_string> type; }; //ci version
template <typename T> struct cs_map { typedef std::map<std::string, T                   > type; }; //cs version

//step 2: a template specialized to select on the of the two versions
template<typename T, bool ci> struct map_choice           {                                }; //empty decl
template<typename T>          struct map_choice<T, true>  { typedef ci_map<T> map_version; }; //specialize ci = true
template<typename T>          struct map_choice<T, false> { typedef cs_map<T> map_version; }; //specialize ci = false

//final step, but VS 2008 compile error: 'map_choice<T,ci>::map_version::type': dependent name is not a type
template<typename T, bool ci=true> 
struct mymap { typedef map_choice<T, ci>::map_version::type type; };
//too bad ... usage would have been concise ==>  "mymap<int>::type  mymap_instance;"

//final step: works, but ugly
template<typename T, bool ci=true> 
struct mymap { typedef map_choice<T, ci> type; };
//usage (ugly !!!)
mymap<int>::type::map_version::type    mymap_instance;  //ouch 
```

有什么改进建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:07:10.740

```
template<typename T, bool ci=true> 
struct mymap { typedef typename map_choice<T, ci>::map_version::type type; }; 
```

Will work fine. Read: [Where and why do I have to put the "template" and "typename" keywords?](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:16:51.180

这个怎么样：

```
template <bool ci>
struct Comparator
{
  typedef ci_compare_string type;
};

template<>
struct Comparator<false>
{
  typedef std::less<std::string> type;
};

template <typename T, bool ci = true>
struct mymap
{
  typedef std::map<std::string, T, typename Comparator<ci>::type> type;
}; 
```

# vba - 在 MS Word 中多次单击按钮 - Visual Basic

> ID：15002940
> 
> 赞同：1
> 
> 时间：2013-02-21T13:02:24.443
> 
> 标签：vba

我正在用用户单击以将文本添加到文本框中的按钮在 word 中创建一个文档。

例如 - 单击按钮 1 会将“您已单击按钮 1”添加到文本框 1。单击按钮 2 会将“您已单击按钮 2”添加到同一框。（我知道的令人兴奋的事情）。

我在 Visual Basic 的 Click 事件中使用**TextBox1.Text = TextBox1.Text + "You've clicked button 1" 。**

我希望用户能够再次单击按钮以删除（或撤消？）文本。或者，实际上，第三次单击以再次添加文本。

我想我希望用户能够切换框中的文本。甚至可以根据文本是打开/关闭还是输入/输出文本框来更改按钮颜色。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:07:49.450

我可能会这样做的方式是有一个简单的 IF 语句，它首先确定文本的状态。如果它是空的，则填充它。如果它不为空，则使该值等于“”。

代码看起来像这样（但不完全是 - 这只是理论上的）

```
If textbox1.text = "" Then

textbox1.text = "You've clicked button 1"

Else 

textbox1.text = ""

End If 
```

如果我没有正确理解要求，请道歉。

# java - 安装成功后ireport打不开

> ID：15002943
> 
> 赞同：0
> 
> 时间：2013-02-21T13:02:33.080
> 
> 标签：java, jasper-reports, ireport

我已经成功安装了 ireport4.0.2，但是打开时同样出现以下错误

```
java.lang.NullPointerException
    at java.awt.Dimension.<init>(Dimension.java:91)
    at javax.swing.plaf.basic.BasicProgressBarUI.getPreferredSize(BasicProgressBarUI.java:757)
    at javax.swing.JComponent.getPreferredSize(JComponent.java:1615)
    at org.netbeans.modules.progress.ui.NbProgressBar.getPreferredSize(NbProgressBar.java:90)
    at org.netbeans.modules.progress.ui.StatusLineComponent.<init>(StatusLineComponent.java:137)
    at org.netbeans.modules.progress.ui.ProviderImpl.getDefaultWorker(ProviderImpl.java:59)
    at org.netbeans.progress.module.Controller.getProgressUIWorker(Controller.java:128)
    at org.netbeans.progress.module.Controller.getVisualComponent(Controller.java:111)
    at org.netbeans.progress.module.ProgressVisualizerProvider.getStatusLineElement(ProgressVisualizerProvider.java:55)
    at org.netbeans.core.windows.view.ui.MainWindow.getStatusLineElements(MainWindow.java:245)
    at org.netbeans.core.windows.view.ui.MainWindow.decoratePanel(MainWindow.java:219)
    at org.netbeans.core.windows.view.ui.MainWindow.initializeComponents(MainWindow.java:183)
    at org.netbeans.core.windows.view.DefaultView.showWindowSystem(DefaultView.java:519)
    at org.netbeans.core.windows.view.DefaultView.windowSystemVisibilityChanged(DefaultView.java:498)
    at org.netbeans.core.windows.view.DefaultView.changeGUI(DefaultView.java:180)
    at org.netbeans.core.windows.ViewRequestor.dispatchRequest(ViewRequestor.java:269)
    at org.netbeans.core.windows.ViewRequestor.processVisibilityRequest(ViewRequestor.java:258)
    at org.netbeans.core.windows.ViewRequestor.postVisibilityRequest(ViewRequestor.java:195)
    at org.netbeans.core.windows.ViewRequestor.scheduleRequest(ViewRequestor.java:117)
    at org.netbeans.core.windows.Central.setVisible(Central.java:119)
    at org.netbeans.core.windows.WindowManagerImpl.setVisible(WindowManagerImpl.java:776)
    at org.netbeans.core.windows.WindowSystemImpl.show(WindowSystemImpl.java:87)
    at org.netbeans.core.NonGui$2.run(NonGui.java:183)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:461)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:104)
[catch] at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:110)
SEVERE [global]
java.lang.NullPointerException
    at java.awt.Dimension.<init>(Dimension.java:91)
    at javax.swing.plaf.basic.BasicProgressBarUI.getPreferredSize(BasicProgressBarUI.java:757)
    at javax.swing.JComponent.getPreferredSize(JComponent.java:1615)
    at org.netbeans.modules.progress.ui.NbProgressBar.getPreferredSize(NbProgressBar.java:90)
    at org.netbeans.modules.progress.ui.StatusLineComponent.<init>(StatusLineComponent.java:137)
    at org.netbeans.modules.progress.ui.ProviderImpl.getDefaultWorker(ProviderImpl.java:59)
    at org.netbeans.progress.module.Controller.getProgressUIWorker(Controller.java:128)
    at org.netbeans.progress.module.Controller.run(Controller.java:332)
    at org.netbeans.progress.module.Controller.actionPerformed(Controller.java:357)
    at javax.swing.Timer.fireActionPerformed(Timer.java:271)
    at javax.swing.Timer$DoPostEvent.run(Timer.java:201)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:461)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:104)
[catch] at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:153)
    at java.awt.Dialog$1.run(Dialog.java:515)
    at java.awt.Dialog.show(Dialog.java:536)
    at java.awt.Component.show(Component.java:1300)
    at java.awt.Component.setVisible(Component.java:1253)
    at com.jaspersoft.ireport.heartbeat.Installer$1.run(Installer.java:114)
    at org.netbeans.core.windows.WindowManagerImpl$Exclusive.run(WindowManagerImpl.java:1335)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:461)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:104)
    at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:110) 
```

有人帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:16:26.973

卸载 ireport s/w 然后安装 jdk1.7.. 或更高版本然后重新安装 ireport

# r - R：布局另存为png

> ID：15002944
> 
> 赞同：1
> 
> 时间：2013-02-21T13:02:43.840
> 
> 标签：r

我有四个图表（类型：ggplot2）并试图将它们保存为 png。但是，当我运行下面的代码时，只会保存 ch4。

```
png(filename = fname, width = 900, height = 600, units = 'px')
layout(matrix(c(1,2,3,4), 2, 2, byrow = TRUE))
ch1
ch2
ch3
ch4
dev.off() 
```

我会很感激知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:16:37.000

使用`grid.arrange`代替`layout`：

```
library(ggplot2)
library(gridExtra)
ch1 <- qplot(1,2)
ch2 <- qplot(1,2)
ch3 <- qplot(1,2)
ch4 <- qplot(1,2)

png(filename = "fname.png", width = 900, height = 600, units = 'px')
grid.arrange(ch1,ch2,ch3,ch4, ncol = 2)
dev.off() 
```

![在此处输入图像描述](../Images/13bef4cb453b701fcc445fa6a20b4caf.png)

您可以使用`layout`函数进行基础绘图。请注意，必须在内部指定文件扩展名`""`：

```
png(filename = "fname.png", width = 900, height = 600, units = 'px')
layout(matrix(c(1,2,3,4), 2, 2, byrow = TRUE))
plot(1,2)
plot(1,2)
plot(1,2)
plot(1,2)
dev.off() 
```

![在此处输入图像描述](../Images/5d7df2bbfd455fa5e551ccec52e698a0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:23:55.217

ggplot2 图形可以使用包中的单个页面进行布局`grid.arrange()`，`gridExtra`例如：

```
df <- data.frame(x=1:3, y=c(1, 4, 9))
p <- ggplot(df, aes(x, y))
p1 <- p + geom_point(colour="red")
p2 <- p + geom_point(colour="blue")
p3 <- p + geom_point(colour="green")
p4 <- p + geom_point(colour="purple")

library(gridExtra)
png(filename="test.png", width=600, height=600)
grid.arrange(p1, p2, p3, p4)
dev.off() 
```

# php - 停止此 Javascript 计时器的函数

> ID：15002946
> 
> 赞同：0
> 
> 时间：2013-02-21T13:02:43.793
> 
> 标签：php, javascript, jquery, mysql

我是 Javascript 的新手，我从网上得到了这个 Javascript 计时器。如果设置了某个 PHP 变量，我正在尝试停止计时器并将停止的时间插入数据库，但我不确定如何停止计时器。这是代码。我看到了这个帖子，可悲的是，我仍然无法让它工作。[如何停止计时器功能的运行？](https://stackoverflow.com/questions/11123237/how-to-stop-a-timer-function-from-running) 谢谢！

```
<script type="text/javascript">
/**********************************************************************************************
* CountUp script by Praveen Lobo (http://PraveenLobo.com/techblog/javascript-countup-timer/)
* This notice MUST stay intact(in both JS file and SCRIPT tag) for legal use.
* http://praveenlobo.com/blog/disclaimer/
**********************************************************************************************/
function CountUp(initDate, id){
    this.beginDate = new Date(initDate);
    this.countainer = document.getElementById(id);
    this.numOfDays = [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];
    this.borrowed = 0, this.years = 0, this.months = 0, this.days = 0;
    this.hours = 0, this.minutes = 0, this.seconds = 0;
    this.updateNumOfDays();
    this.updateCounter();
}

CountUp.prototype.updateNumOfDays=function(){
    var dateNow = new Date();
    var currYear = dateNow.getFullYear();
    if ( (currYear % 4 == 0 && currYear % 100 != 0 ) || currYear % 400 == 0 ) {
        this.numOfDays[1] = 29;
    }
    var self = this;
    setTimeout(function(){self.updateNumOfDays();}, (new Date((currYear+1), 1, 2) - dateNow));
}

CountUp.prototype.datePartDiff=function(then, now, MAX){
    var diff = now - then - this.borrowed;
    this.borrowed = 0;
    if ( diff > -1 ) return diff;
    this.borrowed = 1;
    return (MAX + diff);
}

CountUp.prototype.calculate=function(){
    var currDate = new Date();
    var prevDate = this.beginDate;
    this.seconds = this.datePartDiff(prevDate.getSeconds(), currDate.getSeconds(), 60);
    this.minutes = this.datePartDiff(prevDate.getMinutes(), currDate.getMinutes(), 60);
    this.hours = this.datePartDiff(prevDate.getHours(), currDate.getHours(), 24);
    this.days = this.datePartDiff(prevDate.getDate(), currDate.getDate(), this.numOfDays[currDate.getMonth()]);
    this.months = this.datePartDiff(prevDate.getMonth(), currDate.getMonth(), 12);
    this.years = this.datePartDiff(prevDate.getFullYear(), currDate.getFullYear(),0);
}

CountUp.prototype.addLeadingZero=function(value){
    return value < 10 ? ("0" + value) : value;
}

CountUp.prototype.formatTime=function(){
    this.seconds = this.addLeadingZero(this.seconds);
    this.minutes = this.addLeadingZero(this.minutes);
    this.hours = this.addLeadingZero(this.hours);
}

CountUp.prototype.updateCounter=function(){
    this.calculate();
    this.formatTime();
    this.countainer.innerHTML =
        " <strong>" + this.hours + "</strong> <small>" + (this.hours == 1? ":" : ":") + "</small>" +
        " <strong>" + this.minutes + "</strong> <small>" + (this.minutes == 1? ":" : ":") + "</small>" +
        " <strong>" + this.seconds + "</strong> <small>" + "</small>";
    var self = this;
    setTimeout(function(){self.updateCounter();}, 1000);
}
<?php if(isset($results['calltime'])) {$timevar= date("M d, Y H:i:s",strtotime($results['calltime']));}?> 
window.onload=function(){ new CountUp('<?php echo $timevar; ?>', 'counter'); }

//I need a function to stop timer if (isset($results['firstcall_time']))

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:08:16.473

In your method **updateCounter()** You have following statement

```
setTimeout(function(){self.updateCounter();}, 1000); 
```

make it like following first.

```
myTimer = setTimeout(function(){self.updateCounter();}, 1000); 
```

and then whenever you want to stop the timer call this method.

```
clearTimeout(myTimer); 
```

and then record the time. It uses setTimeout for counting so you have to use clearTimeout for stopping the contdown.

reffer [Clear Timeout](http://www.w3schools.com/jsref/met_win_cleartimeout.asp)

Cheers

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T02:56:29.817

这是我停止计数器的方法：

我在“CountUp.prototype.updateCounter=function(){”之前插入了这几行

```
var today=new Date(); 
var start=new Date(2013,10,25,5,35,0); //example: Stop date
diff =  start-today; 
```

然后，在 updateCounter 函数中，我没有直接调用 setTimeout，而是添加了一个条件：

```
 if ( ( (this.seconds==0) && (this.minutes==0) (this.hours==0) && (this.days==0) ) || (diff <=0) )  { //on the fly (page is laready open with the counter running) or onload 
    //Time's up!
    } else {
        setTimeout(function(){self.updateCounter();}, 1000);
    } 
```

所以新代码将如下所示：

```
var today=new Date(); 
var start=new Date(2013,10,25,5,35,0); 
diff =  start-today; 

Counter.prototype.updateCounter=function(){
this.calculate();
this.formatTime();
this.countainer.innerHTML = " <strong>" + this.seconds + "</strong> " + (this.seconds == 1? ":" : ":")+
    " <strong>" + this.minutes + "</strong> " + (this.minutes == 1? ":" : ":")+
    " <strong>" + this.hours + "</strong> " + (this.hours == 1? ":" : ":")+
    " <strong>" + this.days + "</strong> " + (this.days == 1? ":" : "");
var self = this;
if ( ( (this.seconds==0) && (this.minutes==0) (this.hours==0) && (this.days==0) ) || (diff <=0) )  { //on the fly or onload 
//Time's up!
} else {
setTimeout(function(){self.updateCounter();}, 1000);
}
} 
```

希望这会有所帮助。

沙姆斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:12:13.810

在行中：

```
setTimeout(function(){self.updateNumOfDays();}, (new Date((currYear+1), 1, 2) - dateNow)); 
```

和

```
setTimeout(function(){self.updateCounter();}, 1000); 
```

您可以看到正在使用递归，因此计时器继续运行。

因此，当您想停止计时器时，请执行以下操作：

```
 var flag = true;
<?php if (isset($results['firstcall_time'])){ ?>
  flag = false;
<?php } ?> 
```

并将您的脚本稍微修改为：

```
 setTimeout(function(){if(flag){self.updateNumOfDays();}else{//write code to cleartimeout}}, (new Date((currYear+1), 1, 2) - dateNow));//check for the flag before recursion 
```

和

```
setTimeout(function(){if(flag){self.updateCounter();}}else{//write code to cleartimeout}, 1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:12:21.130

他没有使用计时器。他正在使用 setTimeout，但执行函数是相同的方法，有点像递归（但严格来说，它不是）。所以，它正在进行中。希望这是有道理的。

定时器的实现如下：

```
// Start
var timerId = setInterval(func() {
    // your code to execute
}, 5000);

// Stop
clearInterval(timerId); 
```

我在 CountUp 中添加了一个停止方法。所以你现在应该能够做到这一点：

```
// Start
var counter = new CountUp(new Date(), 'div');

// Stop
counter.stop(); 
```

这是代码。我只是在这里手工编码，所以如果有任何错别字或某些东西不起作用，请发表评论。

```
function CountUp(initDate, id){
    this.beginDate = new Date(initDate);
    this.countainer = document.getElementById(id);
    this.numOfDays = [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];
    this.borrowed = 0, this.years = 0, this.months = 0, this.days = 0;
    this.hours = 0, this.minutes = 0, this.seconds = 0;

    this.daysTimerId = setInterval(this.updateNumOfDays(), this.getDaysTimerInterval());
    this.updateTimerId = setInterval(this.updateCounter(), 1000);
}

CountUp.prototype.stop=function(){
    clearInterval(this.daysTimerId);
    clearInterval(this.updateTimerId);
}

CountUp.prototype.getDaysTimerInterval=function(dt){
    var dateNow = dt || new Date();
    return (new Date((dateNow.getFullYear()+1), 1, 2) - dateNow));
}

CountUp.prototype.updateNumOfDays=function(){
    var dateNow = new Date();
    var currYear = dateNow.getFullYear();
    if ( (currYear % 4 == 0 && currYear % 100 != 0 ) || currYear % 400 == 0 ) {
        this.numOfDays[1] = 29;
    }
//    var self = this;
//    setTimeout(function(){self.updateNumOfDays();}, self.getDaysTimerInterval(dateNow));
}

CountUp.prototype.datePartDiff=function(then, now, MAX){
    var diff = now - then - this.borrowed;
    this.borrowed = 0;
    if ( diff > -1 ) return diff;
    this.borrowed = 1;
    return (MAX + diff);
}

CountUp.prototype.calculate=function(){
    var currDate = new Date();
    var prevDate = this.beginDate;
    this.seconds = this.datePartDiff(prevDate.getSeconds(), currDate.getSeconds(), 60);
    this.minutes = this.datePartDiff(prevDate.getMinutes(), currDate.getMinutes(), 60);
    this.hours = this.datePartDiff(prevDate.getHours(), currDate.getHours(), 24);
    this.days = this.datePartDiff(prevDate.getDate(), currDate.getDate(), this.numOfDays[currDate.getMonth()]);
    this.months = this.datePartDiff(prevDate.getMonth(), currDate.getMonth(), 12);
    this.years = this.datePartDiff(prevDate.getFullYear(), currDate.getFullYear(),0);
}

CountUp.prototype.addLeadingZero=function(value){
    return value < 10 ? ("0" + value) : value;
}

CountUp.prototype.formatTime=function(){
    this.seconds = this.addLeadingZero(this.seconds);
    this.minutes = this.addLeadingZero(this.minutes);
    this.hours = this.addLeadingZero(this.hours);
}

CountUp.prototype.updateCounter=function(){
    this.calculate();
    this.formatTime();
    this.countainer.innerHTML =
        " <strong>" + this.hours + "</strong> <small>" + (this.hours == 1? ":" : ":") + "</small>" +
        " <strong>" + this.minutes + "</strong> <small>" + (this.minutes == 1? ":" : ":") + "</small>" +
        " <strong>" + this.seconds + "</strong> <small>" + "</small>";
//    var self = this;
//    setTimeout(function(){self.updateCounter();}, 1000);
} 
```

# magento - Magento $order->addItem 和 getAllItems

> ID：15002952
> 
> 赞同：1
> 
> 时间：2013-02-21T13:02:58.077
> 
> 标签：magento

我尝试将新订单项目添加到现有订单 ( `$order`)

```
$orderItem = Mage::getModel('sales/order_item');
       $orderItem->setData($itemData);
       $orderItem->setOrder($order);
       $orderItem->save(); 
```

在数据库中正确显示订单项的那一行之后，但是当我这样做时

```
var_dump($order->getAllItems()); 
```

我有`NULL` 我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:23:54.550

添加新商品后尝试重新加载订单对象：

```
$order = Mage::getModel('sales/order')->load($order->getId());
var_dump($order->getAllItems()); 
```

# django - NoReverseMatch：使用参数“（）”和未找到关键字参数的“对象详细信息”反向

> ID：15002953
> 
> 赞同：0
> 
> 时间：2013-02-21T13:03:01.633
> 
> 标签：django, django-models, django-views

我正在尝试获取绝对网址……但出现错误。

这是我的models.py

```
class News(models.Model):
    date = models.DateField(auto_now=True)
    title = models.CharField(max_length=100)
    slug = models.CharField(max_length=100)
    text = models.TextField()

    def __unicode__(self):
        return self.title

    def get_absolute_url(self):
        return ('object detail', {}, {
            'slug': self.slug,
            'year': self.date.strftime('%Y'),
            'month': self.date.strftime('%b'),
            'day': self.date.strftime('%d')
        })

    class Meta:
        verbose_name_plural = "News"
        ordering = ('-date',) 
```

这是我的 urls.py

```
dictionary = {
    'queryset': News.objects.all(),
    'date_field': 'date',
}

urlpatterns= patterns(
    'django.views.generic.date_based',
    url(
        r'(?P<year>d{4})/(?P<month>[a-z]{3})/(?P<day>w{1,2})/(?P<slug>[-w]+)/$',
        'object_detail',
        dict(dictionary, slug_field = 'slug', template_name = 'cms/news/object.html'),
        name='object detail'
    ),
) 
```

当我这样做是 django shell

```
>> from cms.models import News
>> all = News.objects.all()
>> for single in all:
>>     single.get_absolute_url() 
```

我在控制台中收到以下错误。

```
Traceback (most recent call last):
  File "<console>", line 2, in <module>
  File "/Users/mouse/.virtualenvs/proj/lib/python2.7/site-packages/django/utils/functional.py", line 11, in _curried
    return _curried_func(*(args+moreargs), **dict(kwargs, **morekwargs))
  File "/Users/mouse/.virtualenvs/proj/lib/python2.7/site-packages/django/db/models/base.py", line 883, in get_absolute_url
    return settings.ABSOLUTE_URL_OVERRIDES.get('%s.%s' % (opts.app_label, opts.module_name), func)(self, *args, **kwargs)
  File "/Users/mouse/.virtualenvs/proj/lib/python2.7/site-packages/django/db/models/__init__.py", line 35, in inner
    return reverse(bits[0], None, *bits[1:3])
  File "/Users/mouse/.virtualenvs/proj/lib/python2.7/site-packages/django/core/urlresolvers.py", line 476, in reverse
    return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
  File "/Users/mouse/.virtualenvs/proj/lib/python2.7/site-packages/django/core/urlresolvers.py", line 396, in _reverse_with_prefix
    "arguments '%s' not found." % (lookup_view_s, args, kwargs))
NoReverseMatch: Reverse for 'object detail' with arguments '()' and keyword arguments '{'year': '2013', 'slug': u'2013-season-details', 'day': '19', 'month': 'Feb'}' not found. 
```

我在哪里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:08:22.710

除了. `year`_ `month`_ `day`_ `slug`我也会传入一个空元组而不是`None`位置参数。

# php - WooCommerce 结帐页面上的数组错误

> ID：15002956
> 
> 赞同：0
> 
> 时间：2013-02-21T13:03:22.117
> 
> 标签：php, wordpress, woocommerce

当我尝试在 WooCommerce 中使用 PayPal 结帐时出现错误。我不知道是什么原因造成的。

我也有一个 SagePay 插件，但无论如何它都会发生在任何一个选项上。

```
Warning: array_merge() [function.array-merge]: Argument #1 is not an array in /home/beggar/public_html/development/wp-includes/post.php on line 2996
{"result":"success","redirect":"https:\/\/www.sandbox.paypal.com\/webscr?test_ipn=1&cmd=_cart&business=michael%40thelondonbranch.com&no_note=1¤cy_code=GBP&charset=UTF-8&rm=1&upload=1&return=http%3A%2F%2Fexample.com%2Fdevelopment%2Fthank-you%2F%3Futm_nooverride%3D1&cancel_return=http%3A%2F%2Fexample.com%2Fdevelopment%2F%3Fcancel_order%3Dtrue%26_n%3Dc479c487a6&page_style=&invoice=WC-¬ify_url=http%3A%2F%2Fexample.com%2Fdevelopment%2F%3FpaypalListener%3Dpaypal_standard_IPN&no_shipping=1&discount_amount_cart=0.00&item_name_1=Order+%23+-+&quantity_1=1&amount_1=0.00"} 
```

这似乎不仅仅是一个警告，因为管理员没有下订单，也没有发送电子邮件。

我对此感到非常困惑，这非常关键。

非常感谢任何帮助，因为这是我第一次使用 WooCommerce。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:05:08.497

最简单的解决方案可能是使用不同的 PayPal 支付插件。我使用过 Denon 的 Stripe 和 Authorize.net 插件，它们运行良好；这是 PayPal 的链接：[PayPal Payments Pro](http://codecanyon.net/item/paypal-pro-credit-card-gateway-for-woocommerce-/1331008?WT.ac=search_thumb&WT.seg_1=search_thumb&WT.z_author=DenonStudio)。我不隶属于天龙。

或者，您可以使用一点 PHP 来消除错误。您收到的警告消息通常是因为数组只有一个值，所以它不是真正的数组。

```
if (is_array($array)) {
    // Do array merge
} else {
    // Don't try to merge, just use value.
} 
```

# asp.net-mvc - IsolateApps 导致指定的解密密钥具有无效的十六进制字符

> ID：15002960
> 
> 赞同：59
> 
> 时间：2013-02-21T13:03:35.900
> 
> 标签：asp.net-mvc, encryption, machinekey

我在一个使用身份验证的 MVC 4 站点上工作。该站点要求我指定机器密钥值。我是通过 IIS 界面完成的，取消选择“在运行时自动生成”，生成键值并选择“为每个应用程序生成唯一键”

web.config 条目如下所示：

```
<machineKey decryption="DES" decryptionKey="{hex-key value},IsolateApps" 
    validationKey="{hex-key value},IsolateApps" />; 
```

虽然这似乎在另一个 Web 项目上运行良好，但它会导致我现在正在使用的开发机器上出现“指定的解密密钥具有无效的十六进制字符”错误（在 IIS-Express 和 IIS 7.5 中）。

从键值中删除`",IsolateApps"`可以解决问题，但是由于我需要在生产中启用此选项，因此我不想现在删除它，只是在部署时遇到此问题。

是什么赋予了？开发盒是带有 .net 2.0 和 .net 4.0 的 SQL 2008 R2 盒。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-03-14T03:44:14.283

该`IsolateApps`修饰符使 ASP.NET 为服务器上的每个应用程序生成一个唯一键。这仅适用于让 ASP.NET 在运行时自动生成密钥的情况。

如果您没有让 ASP.NET 自动生成密钥，而是使用 指定密钥`decryptionKey="{hex-key value}"`，那么让 ASP.NET 为每个应用程序使用不同密钥的方法是在每个应用程序的 Web 中简单地指定一个不同的密钥。配置。

IIS 配置 GUI 允许您使用显式键和`IsolateApps`修饰符创建 Web.config，这是无效的，在我看来是配置 GUI 中的错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T12:39:42.220

您可以通过将以下内容添加到 web.config 中的 machineKey 元素 (compatibilityMode="Framework20SP1") 来解决此问题，[请参阅链接](http://blogs.msdn.com/b/webdev/archive/2012/10/23/cryptographic-improvements-in-asp-net-4-5-pt-2.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-01T21:32:10.373

这可以通过将 machineKey 行添加到您的 web.config 中来解决，并如下所示指定您的密钥（当然，使用您自己的密钥，这个很容易猜到）：

```
<configuration>
 <system.web>
  <machineKey decryptionKey="0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0" validationKey="0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF00123456789ABCDEF0123456789ABCDEF0123456789ABCDEF00123456789ABCDEF0123456789ABCD" />
 </system.web>
</configuration> 
```

# c# - c# 中 1 个成功和 1 个成功或最新的区别

> ID：15002962
> 
> 赞同：13
> 
> 时间：2013-02-21T13:03:45.547
> 
> 标签：c#, visual-studio, build

我想澄清一个概念。在 C# 中，当我们构建（或重新构建）一个解决方案时，我们有时会得到 `Build: 1 succeeded`

而有时，

```
Build: 1 succeeded or up-to-date 
```

好的，我知道当我们得到后者的答案时，我们的代码中的某些内容将不符合逻辑。

但是，这是什么意思`CONCEPTUALLY`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T13:06:37.640

`Build: 1 succeeded`通常是指成功编译带有`1`项目的解决方案。

尽管

`Build: 1 succeeded or up-to-date`意味着您的解决方案中项目中的代码没有更改，因此不需要编译。因此，`1 Build Success or up-to-date`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T13:14:15.463

这意味着项目中没有任何变化。VS（真的是MSBUILD），决定它是否是最新的，如下所示：

来自：[MSBuild 如何决定是否需要重建 C# 库？](https://stackoverflow.com/questions/5081603/how-does-msbuild-decide-whether-it-needs-to-rebuild-a-c-sharp-library-or-not)

> 如果您查看 Microsoft.CSharp.targets（用于编译 C# 项目的 msbuild 文件），CoreCompile 目标定义了一组输入和输出。这些用于执行依赖关系检查以查看 CoreCompile 是否需要运行。输入列表包括 c# 文件、资源文件、应用程序图标、强名称密钥文件以及您可以定义的其他自定义输入。
> 
> 如果您有解决方案并在启用诊断日志记录的情况下运行 msbuild（/v:diag 命令行参数），如果输出是最新的，您可能会看到此消息：
> 
> 跳过目标“CoreCompile”，因为所有输出文件相对于输入文件都是最新的。
> 
> 目标文件位于 .NET Framework 目录中（c:\windows\Microsoft.NET\Framework\v3.5 或 v4.0.30319。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T19:05:52.990

An "up-to-date" project was previously built successfully, and hasn't changed since that time, so it isn't rebuilt.

# android - 在 Android 中，如何禁用 EditText 的登录按钮？

> ID：15002963
> 
> 赞同：10
> 
> 时间：2013-02-21T13:03:46.720
> 
> 标签：android, button, android-edittext, android-ui, android-button

如果`EditText`为空，则`Button`必须禁用登录。如果有一些文本，则必须启用`EditText`登录。`Button`好吧，您可以在 Instagram Login 上看到此方法。

两个字段都为空，登录`Button`已禁用。

![在此处输入图像描述](../Images/0bda0c6a141e3ec7cd37db962d250d89.png)

此处密码字段为空，因此登录仍处于`Button`禁用状态。

![在此处输入图像描述](../Images/930606b21803c8b084f9cb3c08c41e46.png)

这里用户名和密码字段都不是空的，所以登录`Button`是启用的。

![在此处输入图像描述](../Images/45d972ebff10eed1b8d0b362089a91fc.png)

如何实现这些步骤？这是我的代码，它不起作用..

```
EditText et1,et2;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login_check);
    et1 = (EditText) findViewById(R.id.editText1);
    et2 = (EditText) findViewById(R.id.editText2);
    Button b = (Button) findViewById(R.id.button1);

    String s1 = et1.getText().toString();
    String s2 = et2.getText().toString();

    if(s1.equals("")|| s2.equals("")){
        b.setEnabled(false);
    } else {
        b.setEnabled(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-21T13:23:12.350

继承人你在找什么：

```
private EditText et1,et2;
//  create a textWatcher member
private TextWatcher mTextWatcher = new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {
    }

    @Override
    public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {
    }

    @Override
    public void afterTextChanged(Editable editable) {
        // check Fields For Empty Values
        checkFieldsForEmptyValues();
    }
};

void checkFieldsForEmptyValues(){
    Button b = (Button) findViewById(R.id.button1);

    String s1 = et1.getText().toString();
    String s2 = et2.getText().toString();

    if(s1.equals("")|| s2.equals("")){
        b.setEnabled(false);
    } else {
        b.setEnabled(true);
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login_check);
    et1 = (EditText) findViewById(R.id.editText1);
    et2 = (EditText) findViewById(R.id.editText2);

    // set listeners
    et1.addTextChangedListener(mTextWatcher);
    et2.addTextChangedListener(mTextWatcher);

    // run once to disable if empty
    checkFieldsForEmptyValues(); 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T13:11:20.250

您需要实现[***TextWatcher***](http://developer.android.com/reference/android/text/TextWatcher.html)以`EditText`实现结果。

```
EditText et1, et2;
Button b;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    et1 = (EditText) findViewById(R.id.editText1);
    et2 = (EditText) findViewById(R.id.editText2);
    b = (Button) findViewById(R.id.button1);

    checkValidation();

    et1.addTextChangedListener(mWatcher);
    et2.addTextChangedListener(mWatcher);
}

private void checkValidation() {
    // TODO Auto-generated method stub

    if ((TextUtils.isEmpty(et1.getText()))
            || (TextUtils.isEmpty(et2.getText())))
        b.setEnabled(false);
    else
        b.setEnabled(true);

}

TextWatcher mWatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        // TODO Auto-generated method stub
        checkValidation();
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

    }
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T13:11:48.013

您需要`EditText`使用`TextWatcher`对象跟踪用户的操作：

```
myEditText.addTextChangedListener(new TextWatcher()
        {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count)
            {

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after)
            {

            }

            @Override
            public void afterTextChanged(Editable s)
            {
                if (s.length() > 1)
                {
                    //enable button
                } else
                    //disable
            }
        }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T13:14:45.283

试试这个：

```
EditText et1,et2;
Button b;

@Override
protected void onCreate(Bundle savedInstanceState) {

  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_login_check);
  et1 = (EditText) findViewById(R.id.editText1);
  et2 = (EditText) findViewById(R.id.editText2);
  b = (Button) findViewById(R.id.button1);

  et1.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

                            String s1 = et1.getText().toString();
                            String s2 = et2.getText().toString();

                             if(s1.equals("") && s2.equals("")){
                                   b.setEnabled(false);
                            } 
                            else if(!s1.equals("")&&s2.equals("")){
                                   b.setEnabled(false);
                            }
                            else if(!s2.equals("")&&s1.equals(""){
                                   b.setEnabled(false);
                            }
                            else {
                            b.setEnabled(true);
                          }

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });
  et2.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

                            String s1 = et1.getText().toString();
                            String s2 = et2.getText().toString();

                            if(s1.equals("") && s2.equals("")){
                                   b.setEnabled(false);
                            } 
                            else if(!s1.equals("")&&s2.equals("")){
                                   b.setEnabled(false);
                            }
                            else if(!s2.equals("")&&s1.equals(""){
                                   b.setEnabled(false);
                            }
                            else {
                            b.setEnabled(true);
                          }

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T13:26:19.443

您需要附加一个 TextWatcher，只要其中一个 EditText 字段中的文本发生更改，就会调用该 TextWatcher。

```
private EditText mName;
private EditText mPassword;
private Button mButton;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_login_check);
    mName = (EditText) findViewById(R.id.editText1);
    mPassword = (EditText) findViewById(R.id.editText2);
    mButton = (Button) findViewById(R.id.button1);

    mName.addTextChangedListener(mWatcher);
    mPassword.addTextChangedListener(mWatcher);
}

private TextWatcher mWatcher = new TextWatcher() {
    @Override
    public void afterTextChanged(Editable s) {
        boolean nameNotEmpty = mName.getText().length()>0;
        boolean pwNotEmpty = mPassword.getText().length()>0;
        mButton.setEnabled(nameNotEmpty && pwNotEmpty);
    }
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {}
}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T13:13:40.113

```
private TextWatcher mPhoneNumberEtWatcher = new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {}

    @Override
    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
        if (charSequence.length() >= 10) {
            mPhoneImg.setImageDrawable(getResources().getDrawable(R.drawable.phone_activate));

            if (mPasswordEt.getText().toString().length() >= 5) {
                mLoginBtn.setEnabled(true);
            }

        } else {
            mPhoneImg.setImageDrawable(getResources().getDrawable(R.drawable.phone));
            mLoginBtn.setEnabled(false);
        }
    }

    @Override
    public void afterTextChanged(Editable editable) {
    }
};

mPhoneNumberEt.addTextChangedListener(mPhoneNumberEtWatcher); 
```

您应该使用 TextWatcher。这将在输入用户后调用方法。您可以检查编辑文本的长度和其他内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T13:12:11.550

试试这个

```
 if(s1.equals("") && s2.equals(""))
    {
        b.setEnabled(true);
        // to change color of the button you need to apply style to the button[here refer custom bg][1]
    }
    else
    {
        b.setEnabled(false);
       //do nothing or display toast msg
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-27T02:19:49.127

我只想补充一点，如果是密码（或类似密码）并且证明文本长度的功能（请参阅其他答案）被调用 ，则检查将**不起作用**`InputType``EditText`

```
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {...} 
```

所以重要的是从

```
@Override 
public void afterTextChanged(Editable s) {...} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-02T10:43:36.227

嘿，如果想使用代码剪切，如果 editText1_id 和 editText1_passcode 为 4 位数字，则按钮需要更改颜色

```
checkValidation();

    editText1_id.addTextChangedListener(mWatcher);
    editText1_passcode.addTextChangedListener(mWatcher);
}

private void checkValidation() {
    // TODO Auto-generated method stub

    if ((TextUtils.isEmpty(editText1_id.getText()))
            || (TextUtils.isEmpty(editText1_passcode.getText())))
        loginbtn.setEnabled(false);
    else
        loginbtn.setEnabled(true);

}

TextWatcher mWatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
                              int count) {
        // TODO Auto-generated method stub
        checkValidation();
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
                                  int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

    }
};

} 
```

# linq - 使用数组查询 MVC 集合

> ID：15002964
> 
> 赞同：1
> 
> 时间：2013-02-21T13:03:47.280
> 
> 标签：linq, frameworks, entity

我使用实体框架 4 和 linq/lamda 表达式。我确定它很简单，但我试图用数组查询集合但获取包含所有数组值的记录。

基本上我在做什么

```
var records = collection.where(x.classifications.Any(y=> Array.Contains(y.ClassificationID))).ToList() 
```

这在某种意义上有效，它返回包含任何数组值的记录，但我如何只获取包含数组中所有值的记录。

希望这是有道理的

编辑：

我将下面的评论标记为答案，因为我必须在查询中使用 ALL 才能使其正常工作，但是我还必须稍微重新编写我的查询。这就是我最终拥有的...

```
 var records = collection.Where(x=> Array.All(c=> x.Classifications.Select(l=>l.ClassificationID).Contains(c))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:07:48.103

What about using `All` instead of `Any`?

```
var records = collection.Where(x => x.classifications.All(y => Array.Contains(y.ClassificationID)))
                        .ToList() 
```

# php - 将数组转换为 XML 期间的问题

> ID：15002965
> 
> 赞同：1
> 
> 时间：2013-02-21T13:03:49.130
> 
> 标签：php, xml, arrays, multidimensional-array

我有一个这样的数组列表

```
 Array
(
    [351] => Array
        (
            [0] => Array
                (
                    [unit_id] => Array
                        (
                            [0] => 10192
                            [1] => 10192
                            [2] => 10192
                        )

                    [born_from] => Array
                        (
                            [0] => 1980-08-21
                        )

                    [born_to] => Array
                        (
                            [0] => 2010-08-18
                        )

                    [start_date] => Array
                        (
                            [0] => 2013-02-21 17:29:00
                        )

                    [sex] => Array
                        (
                            [0] => 3
                        )

                    [id] => 351
                    [product_id] => 1
                    [name] => test1
                )

        )

    [352] => Array
        (
            [0] => Array
                (
                    [unit_id] => Array
                        (
                            [0] => 10192
                            [1] => 10192
                            [2] => 10192
                        )

                    [born_from] => Array
                        (
                            [0] => 1985-01-01
                        )

                    [born_to] => Array
                        (
                            [0] => 2000-01-07
                        )

                    [sex] => Array
                        (
                            [0] => 2
                        )

                    [id] => 352
                    [product_id] => 2
                    [name] => Test2
                )

        )

) 
```

现在将此数组转换为 xml 我有此代码

```
$product_info = array($myPHPArray);

// creating object of SimpleXMLElement
$xml_product_info = new SimpleXMLElement("<?xml version=\"1.0\"?><product_info></product_info>");

// function call to convert array to xml
array_to_xml($product_info,$xml_product_info);

//saving generated xml file
$xml_product_info->asXML('C:/product.xml');

// function defination to convert array to xml
function array_to_xml($product_info, &$xml_product_info) {
    foreach($product_info as $key => $value) {
        if(is_array($value)) {
            if(!is_numeric($key)){
                $subnode = $xml_product_info->addChild("$key");
                array_to_xml($value, $subnode);
            }
            else{
                array_to_xml($value, $xml_product_info);
            }
        }
        else {
            $xml_product_info->addChild("$key","$value");
        }
    }
} 
```

这会给我这样的输出

```
<?xml version="1.0"?>
<product_info>
<unit_id>
    <0>10192</0>
    <1>10192</1>
    <2>10192</2>
</unit_id>
<born_from>
    <0>1980-08-21</0>
</born_from>
<born_to>
    <0>2010-08-18</0>
</born_to>
<individual_strdt>
    <0>2013-02-21 17:29:00</0>
</individual_strdt>
<elite_sex>
    <0>3</0>
</elite_sex>
<id>351</id>
<product_id>1</product_id>
<name>test1</name>

// here it stars for 352
<unit_id>
    <0>10192</0>
    <1>10192</1>
    <2>10192</2>
</unit_id>
.
.
.
.
</product_info> 
```

这里

1）我不能确定特定元素的值是`351`它`352` 应该喜欢

```
<?xml version="1.0"?>
<product_info>
    <351>
    //data of 351
    </351>
    <352>
    //data of 352
    </352>
</product_info> 
```

2）当一个特定的子数组被转换为 xml 时，它会存储数据`<0>1092</0>`，这会增加我的最终文件的大小

3）我可以使用所有这些子数组的值作为属性吗？

4）任何其他巧妙的方式来安排这些数据

我是 xml 新手，所以欢迎任何新想法

# bash - 如何将模式匹配限制为第一个匹配文件

> ID：15002968
> 
> 赞同：1
> 
> 时间：2013-02-21T13:04:09.740
> 
> 标签：bash

我有一个非常微妙的 bash 问题：

给定一个目录 foo

```
$ ls
foo.tgz bar.tgz baz.tgz 
```

我想生成一个 bash 单行，它提取模式的第一个 tarball，例如：

```
bash -c "tar -zxvf foo.tgz file1" # fine
bash -c 'tar -zxvf   *.tgz file1" # oups trying to extract bar.tgz from foo.tgz! 
```

是否有可能将模式匹配限制为第一个扩展参数？

细化：

```
find -iname '*.tgz' | xargs tar -zxvf # oups! cannot add restriction to only extract file1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:06:30.897

当然，试试这个：

```
tar -zxvf $(ls *.tgz | head -1) file1 
```

你应该考虑如果没有匹配的模式会发生什么......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:57:33.550

使用`-quit`主要与`find`：

```
find -iname '*.tgz' -exec tar -zxvf '{}' \; -quit 
```

由于动作是从左到右处理的，这将`tar`在第一次匹配时运行，然后结束`find`命令。

# arrays - 从 CSV 读取浮点数/数组错误

> ID：15002974
> 
> 赞同：0
> 
> 时间：2013-02-21T13:04:28.903
> 
> 标签：arrays, csv, processing

我在这里遗漏了一些基本的东西，但我似乎无法从我的所有研究中找出什么。

我已经导入了一个 csv 文件，将字符串拆分为浮点数，现在希望用一条线将所有点连接到所有其他点。我的代码如下：

```
String [] data;

void setup () {
size(300, 300);
background(255);

data = loadStrings("points.csv");

for (int i = 0; i < data.length; i++) {

String [] fields = split(data[i], ',');

float t = float(fields[0]);
float n = float(fields[1]);
float x = float(fields[2]);
float y = float(fields[3]);

ellipse(x, y, 10, 10);

line(x, y, x[i], y[i]);
}
} 
```

错误消息是“表达式的类型必须是数组类型，但它解析为浮动”

我确信这是非常基本的，但我不明白为什么 x[i] 或 y[i] 不被视为数组类型。

我真的很感激这方面的任何帮助。提前谢谢了。

山姆

****更新******

points.csv 文件的摘录如下：

```
219185750   rabih_takkoush  20.88521    19.49821
219185716   MoustaphaAjram  100.870896  59.515259
219185709   jinanejghosh    56.886441   35.489087
219185557   MoustaphaAjram  34.870904   78.515243
219185555   Mohammad8Itani  12.8946         49.48179 
```

我想要完成的是绘制各种地理位置（col 3 = x，col 4 = y），然后用一条线将所有点与所有其他点连接起来。

以下脚本用于绘制脚本内数组中指定的所有位置：

```
float[] x = { 50, 100, 150, 200,20,20 };
float[] y = { 10, 30, 20, 250,20,90 };

void setup () {

size(300, 300);
background(255);
}

void draw() {

for (int i = 0; i < x.length; i++) {
ellipse(x[i], y[i], 10, 10);

for (int j = 0; j < x.length; j++) {
line(x[j], y[j], x[i], y[i]);
}
}
} 
```

我想做的是做同样的事情，但读取 csv 文件的第 3 列和第 4 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:06:53.607

好的，所以如果您使用您制作的第一个代码，您只需要更改一些内容，您可以执行以下操作：

```
float[] x;
float[] y;
string[] data;

void setup () {
   size(300, 300);
   background(255);

   data = loadStrings("points.csv");
   x = new float[data.length];
   y = new float[data.length];

   for (int i = 0; i < data.length; i++) {
      String [] fields = split(data[i], ',');

      float t = float(fields[0]);
      float n = float(fields[1]);
      float x = float(fields[2]);
      float y = float(fields[3]);
   }
}

void draw() {

   for (int i = 0; i < x.length; i++) {
      ellipse(x[i], y[i], 10, 10);

      for (int j = 0; j < x.length; j++) {
         line(x[j], y[j], x[i], y[i]);
      }
   }
} 
```

如您所见，没有什么新东西，它是您的初始代码和您为 csv 制作的代码之间的混合。实际上，您主要需要将`x`and`y`变量声明为，`float[]`而不仅仅是`float`. 但在循环中也有一些改变。

在此代码中，您首先将数据加载到数组中（就像您在代码中声明数组的值一样，但这次您从文件中读取这些值），然后像以前一样调用您的 draw 方法。

希望它现在有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:14:04.183

您将数据拆分为迭代范围的浮点数，然后尝试访问它们，就好像它们既是浮点数又是 line() 调用中的数组一样。尝试这个：

```
String[] data;
float[] x, y, t, n;

void setup () {
  size(300, 300);
  data = loadStrings("points.csv");
  int len = data.length;
  x = new float[len];
  x = new float[len];
  t = new float[len];
  n = new float[len];
  for (int i=0; i<len; i++) {
    String line = data[i];
    String[] fields = split(line, ',');
    t[i] = float(fields[0]),
    n[i] = float(fields[1]),
    x[i] = float(fields[2]),
    y[i] = float(fields[3]);
  }
  // don't put draw instructions in setup,
  // put them in draw. if you want to run once,
  // issue a noLoop() so that happens.
  noLoop();
}

void draw() {
  float prevx = x[0], prevy = y[0];
  for (int i=0, last=x.length; i<last; i++) {
    ellipse(x[i], y[i], 10, 10);
    line(prevx,prevy, x[i],y[i]);
    prevx=x[i];
    prevy=y[i];
  }
} 
```

现在我们将来自 CVS 的数据存储在可以在整个草图中访问的链接数组中，而不是在 setup() 之后将它们丢弃。

# php - 在 fastcgi 上测试 mod_rewrite？

> ID：15002978
> 
> 赞同：0
> 
> 时间：2013-02-21T13:04:41.600
> 
> 标签：php, mod-rewrite, fastcgi

我试图根据这个站点周围的几个片段来确定 mod_rewrite 是否可用：

```
$mod_rewrite = null;
if (function_exists('apache_get_modules')) {
    $mod_rewrite = in_array('mod_rewrite', apache_get_modules());
}
if (is_null($mod_rewrite) && isset($_SERVER["HTTP_MOD_REWRITE"])){
    $mod_rewrite = getenv('HTTP_MOD_REWRITE') == 'on' ? true : false ;
}
if (is_null($mod_rewrite)) {
    ob_start();
    phpinfo(INFO_MODULES);
    $contents = ob_get_contents();
    ob_end_clean();
    if(strpos('_'.$contents, 'mod_rewrite') > 0) {
        $mod_rewrite = true;
    }
}
if (is_null($mod_rewrite)) {
    $result = file_get_contents("http://".$_SERVER["SERVER_NAME"].FB_BASE."/asdfasdf/");
    if (substr($result,0,14) === "<!DOCTYPE HTML>") $mod_rewrite = true;
} 
```

除此之外，我在 .htaccess 中有这个：

```
<IfModule mod_rewrite.c>
  SetEnv HTTP_MOD_REWRITE on
</IfModule>
<IfModule !mod_rewrite.c>
    SetEnv HTTP_MOD_REWRITE off
</IfModule>` 
```

所以在 PHP 版本 5.3.3-7+squeeze14 中，CGI/FastCGI 环境 $mod_rewrite 仍然为空，尽管它实际上正在工作。我错过了什么？...或者在 FastCGI 环境中有什么不同？

# logging - libav 记录到文件

> ID：15002981
> 
> 赞同：0
> 
> 时间：2013-02-21T13:04:57.053
> 
> 标签：logging, libav

我想将 libav 日志消息重定向到文件。FFmpeg 有一个环境变量“FFREPORT”来指定转储日志消息的文件路径。LIBAV 中是否有任何变量来指定日志文件路径。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T12:56:23.683

最简单的方法可能是使用 av_log_set_callback 注册您的记录器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:10:31.393

我确实找到了一种将 lib-av 日志重定向到我的代码中的特定文件的方法。所以我做了一个解决方法并将日志重定向到一个文件。它现在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-15T13:34:22.867

我的解决方案是设置：

av_log_set_level(AV_LOG_VERBOSE);

然后 LibAV 的所有打印都发送到 stderr。为了将 stderr 重定向到文件，您可以使用 '2>' ：

*我的程序 2> log.txt*

# c# - 调用泛型类的构造函数的困境

> ID：15002987
> 
> 赞同：10
> 
> 时间：2013-02-21T13:05:12.753
> 
> 标签：c#, constructor, initialization, generics

我有一个看起来像这样的通用单例：

```
public class Cache<T>
{
    private Dictionary<Guid, T> cachedBlocks;

    // Constructors and stuff, to mention this is a singleton

    public T GetCache(Guid id)
    {
        if (!cachedBlocks.ContainsKey(id))
            cachedBlocks.Add(id, LoadFromSharePoint(id))
        return cachedBlocks[id];
    }

    public T LoadFromSharePoint(Guid id)
    {
        return new T(id)    // Here is the problem.
    }
} 
```

错误信息是：

> 无法创建类型 T 的实例，因为它没有 new() 约束。

不得不提的是，我*必须*传递那个`id`参数，而且没有其他方法可以这样做。任何关于如何解决这个问题的想法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-21T13:13:36.717

通常，您会将类型限制为`T`具有默认构造函数并调用它的类型。然后，您必须添加一个方法或属性才能为`id`实例提供值。

```
public static T LoadFromSharePoint<T>(Guid id)
    where T : new()     // <-- Constrain to types with a default constructor
{
    T value = new T();
    value.ID = id;
    return value;
} 
```

* * *

**或者**，由于您指定*必须*通过构造函数提供`id`参数，因此可以使用反射调用参数化构造函数。*您必须确定类型定义了您要调用的构造函数*。您不能将泛型类型限制为`T`具有除默认构造函数之外的特定构造函数的类型。（例如`where T : new(Guid)`不起作用。）

例如，我*知道*`new List<string>(int capacity)`上有一个构造函数`List<T>`，可以这样调用：

```
var type = typeof(List<String>);
object list = Activator.CreateInstance(type, /* capacity */ 20); 
```

当然，您可能想在`T`之后进行一些转换 (to )。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T13:26:46.037

为此，您应该指定是什么`T`。你`Cache<T>`能装什么吗？`Tiger`，`Fridge`以及`int`？那不是声音设计。你应该**约束**它。您需要一个实例`T`来`Guid`构造实例。那不是通用的`T`。它是一个非常具体的`T`. 将您的代码更改为：

```
public class Cache<T> where T : Cacheable, new()
{
    private Dictionary<Guid, T> cachedBlocks;

    // Constructors and stuff, to mention this is a singleton

    public T GetCache(Guid id)
    {
        if (!cachedBlocks.ContainsKey(id))
            cachedBlocks.Add(id, LoadFromSharePoint(id))
        return cachedBlocks[id];

       //you're first checking for presence, and then adding to it
       //which does the same checking again, and then returns the
       //value of key again which will have to see for it again. 
       //Instead if its ok you can directly return

       //return cachedBlocks[id] = LoadFromSharePoint(id);

       //if your LoadFromSharePoint is not that expensive.
       //mind you this is little different from your original 
       //approach as to what it does.
    }

    public T LoadFromSharePoint(Guid id)
    {
        return new T { Key = id };    // Here is no more problem.
    }
}

public interface Cacheable
{
    Guid Key { get; set; }
} 
```

现在从接口派生所有可缓存对象（无论`T`您将其传递给什么`Cache<T>`）`Cacheable`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T11:40:51.087

为了在没有任何约束的情况下使用泛型类型的构造函数，并且在类中，需要使用语法*where T : class, new()*

这可以在运行时根据使用的目标类更改属性（字段）的值 - 不仅是获取/设置属性）

首先，声明泛型类：

```
public class Foo<T>   where T : class, new()
{
    public T oneEmptyElement()
    {
        return new T();
    }

    public T setAttribute(string attributeName, string attributeValue)
    {
        T objT = new T();
        System.Reflection.FieldInfo fld = typeof(T).GetField(attributeName);
        if (fld != null)
        {
            fld.SetValue(objT, attributeValue);
        }
        return objT;
    }

    public List<T> listOfTwoEmptyElements()
    {
        List<T> aList = new List<T>();
        aList.Add(new T());
        aList.Add(new T());
        return aList;
    }
} 
```

然后声明一个潜在的目标类：

```
public class Book
{
    public int name;
} 
```

最后可以这样调用：

```
 Foo<Book> fooObj = new Foo<Book>();

        Book aBook = fooObj.oneEmptyElement();
        aBook.name = "Emma";

        Book anotherBook = fooObj.setAttribute("name", "John");

        List<Book> aListOfBooks = fooObj.listOfTwoEmptyElements();
        aListOfBooks[0].name = "Mike";
        aListOfBooks[1].name = "Angelina";

        Console.WriteLine(aBook.name);    //Output Emma
        Console.WriteLine(anotherBook.name);    //Output John
        Console.WriteLine(aListOfBooks[0].name); // Output Mike
        Console.WriteLine(aListOfBooks[1].name);  // Output Angelina 
```

# image-processing - DCT 压缩中的掩蔽

> ID：15002993
> 
> 赞同：1
> 
> 时间：2013-02-21T13:05:31.657
> 
> 标签：image-processing, compression, dct

我正在尝试使用 DCT 进行图像压缩（**D** iscrete **C** osine **T**转换）。有人可以帮我理解掩蔽如何影响 DCT 中的每像素位吗？掩码中的位分配是如何完成的？

PS：通过掩码，我的意思是将 DCT 系数与下面的矩阵相乘（元素乘法，而不是矩阵乘法）。

```
mask = [1 1 1 1 0 0 0 0
        1 1 1 0 0 0 0 0
        1 1 0 0 0 0 0 0
        1 0 0 0 0 0 0 0
        0 0 0 0 0 0 0 0
        0 0 0 0 0 0 0 0
        0 0 0 0 0 0 0 0
        0 0 0 0 0 0 0 0] 
```

**“蒙面”的背景**

使用 DCT 的压缩计算图像块的 DCT，在本例中为 8x8 像素。图像的高频分量对于人类对图像的感知不太重要，因此可以丢弃以节省空间。

`mask`矩阵选择保留哪些 DCT 系数以及丢弃哪些以节省空间。左上角的系数代表低频。

有关更多信息，请访问[离散余弦变换](https://se.mathworks.com/help/images/discrete-cosine-transform.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T02:04:59.003

这看起来像是量化矩阵的变体。

低频在左上角，高频在右下角。眼睛对低频更敏感，因此去除高频系数将去除图像中不太重要的细节。

# php - 如果变量为“0”，则为变量分配不同的值，而不使用 if else

> ID：15002995
> 
> 赞同：2
> 
> 时间：2013-02-21T13:05:40.930
> 
> 标签：php, variables

我有3个这样的变量

```
$posted_on = '0';
$shared_on = '34';
$by_id = '12'; 
```

我想`$owner`从上面的 3 个变量中分配一个值，这些变量的值不是`0`以`$posted_on`. 目前我正在这样做，但这不会打印正确的结果

```
$owner = $posted_on;
$owner = '0' ? $shared_on : $owner;
$owner = '0' ? $by_id : $owner; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:08:06.553

You mixed up your operators. To do a comparison, you need to use `==` or `===`.

```
$owner = $posted_on;
$owner == 0 ? $shared_on : $owner;
$owner == '0' ? $by_id : $owner; 
```

By using the `=` (assignment) operator, you effectively are assigning `0` to `$owner` for each statement and then checking if the result (which is always `0`, by the definition of assignment) is true.

> The difference between the two is that '==' should be used to check if the values of the two operands are equal or not. On the other hand, '===' checks the values as well as the type of operands.

([http://www.geeksww.com/tutorials/web_development/php_hypertext_preprocessor/tips_and_tricks/difference_between_equal_and_identical_comparison_operators_php.php](http://www.geeksww.com/tutorials/web_development/php_hypertext_preprocessor/tips_and_tricks/difference_between_equal_and_identical_comparison_operators_php.php))

You can also use the `?:` operator, which will check the left-hand side for a true value (for numbers, any non-zero) and use the right-hand side only if the left-hand side is false:

```
$owner = $posted_on ?: ($shared_on ?: $by_id); 
```

To write cleaner code in this case, however, I would just use the if statements. This is because you don't need to reassign `$owner` to itself in the false conditions like you do in the example.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:09:33.590

一个单一`=`的分配一个值，一个双重`==`或三重`===`评估两个变量。

尝试这个：

```
$owner = $posted_on;
$owner = $owner === 0 ? $shared_on : $owner;
$owner = $owner === '0' ? $by_id : $owner; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:11:41.343

您可以使用`or`隐式类型转换的行为：

```
$a = 1; $b = 0; $c = 5;
$x = $a or $x = $b or $x = $c;

echo $x; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T13:12:55.783

最短的方法是：

```
$owner = $posted_on ?: ($shared_on ?: $by_id); 
```

如果它是-ish（任何非零数都是），则[短三元运算符对左参数求值，否则对右参数求值。](http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary) `?:``true`

请注意，括号是必需的，因为在 PHP 中，三元运算符是[左关联的](http://www.php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T13:09:28.867

您可以使用单线：

```
$owner = $posted_on == '0' ? ($shared_on == '0' ? $shared_on : $by_id) : $posted_on; 
```

或者，如果处理数值，

```
$owner = $posted_on ?: ($shared_on ?: $by_id); 
```