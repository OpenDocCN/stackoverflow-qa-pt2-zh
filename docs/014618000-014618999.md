# StackOverflow 问答 14618000-14618999

# java - 无法在 Eclipse 中运行 android sdk 管理器

> ID：14618001
> 
> 赞同：2
> 
> 时间：2013-01-31T03:34:09.777
> 
> 标签：java, android, eclipse, sdk

我正在尝试为 android 编写应用程序，但我遇到了 sdk 管理器的问题。当我尝试在 Eclipse 中运行它时，它显示*“无法运行 android sdk 管理器。请检查 Android 控制台视图以获取详细信息。”* 然后在控制台中说：

> [2013-01-30 21:27:45 - SDK 管理器] Android SDK 中缺少 %s 文件。
> 
> [2013-01-30 21:27:45 - SDK 管理器] android.bat

我重新安装了 eclipse、sdk 并尝试了所有其他关于同一问题的帖子，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:25:38.317

我能够恢复 File | 中丢失的项目 新...很容易通过执行以下步骤：

*   通过主 Eclipse 窗口右上角的透视切换器工具栏或通过 Window | 切换到 Java 透视图。打开透视菜单项。

*   通过右键单击透视切换器工具栏中的 Java 透视图标或单击 Window | 重置透视。重置视角...

至于为什么它们最初不存在，最可能的原因是 ADT 为 Java 透视图贡献了各种东西，而这些更改直到安装 ADT 后重置透视图才会生效。作为一名 Eclipse 插件开发人员，我经历了艰难的学习，除非您显式地重置它们，否则对透视图的更改不会被采纳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:38:31.387

确保您的 SDK 具有 android.bat 文件。通过查看 SDK 所在的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T16:46:22.177

也许你可以试试：`chmod +x <ADTFolder>/sdk/tools/android`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T16:52:29.270

在某处解压缩您的 sdk zip，复制工具目录的全部内容，将其替换为您的实际 sdk 工具文件夹内容。

如果需要，重新启动 Eclipse。

# c++ - 如何将 C++ 对象返回到 lua 5.2？

> ID：14618002
> 
> 赞同：3
> 
> 时间：2013-01-31T03:34:10.880
> 
> 标签：c++, lua, lua-5.2

如何将 C++ 对象返回给 lua？

我的 C++ 代码如下：

```
class MyClass
{
public:
  void say()
  {
    print("Hello\r\n");
  }
};

int test(lua_State* l)
{
  MyClass* obj = new MyClass();
  lua_pushlightuserdata(l, obj);
  return 1;
} 
```

Lua 测试如下：

```
local a = MyClass:new()
a:say()  <--- OK, beacause I set metatable!!
local b = test()
b:say()  <--- ERROR: attempt to index local 'b' (a userdata value) 
```

如何修改 test() 函数以正常工作？
obj 会被 lua 自动销毁吗？

PS：我已设置 MyClass 元表如下

```
void l_registerClass()
{
  lua_newtable(l);
  int methods = lua_gettop(l);
  luaL_newmetatable(l, "MyClass");
  int metatable = lua_gettop(l);
  lua_pushvalue(l, methods);
  lua_setglobal(l, "MyClass");

  lua_pushvalue(l, methods);  
  l_set(l, metatable, "__metatable");

  //set metatable __index
  lua_pushvalue(l, methods);
  l_set(l, metatable, "__index");

  //set metatable __gc
  lua_pushcfunction(l, l_destructor);  
  l_set(l, metatable, "__gc");

  //set method table
  lua_newtable(l);                // mt for method table  
  lua_pushcfunction(l, l_constructor);  
  lua_pushvalue(l, -1);           // dup new_T function  
  l_set(l, methods, "new");         // add new_T to method table  
  l_set(l, -3, "__call");           // mt.__call = new_T  
  lua_setmetatable(l, methods);  

  // set methods metatable   
  lua_pushstring(l, "say");
  lua_pushcclosure(l, l_proxy, 1);  
  lua_settable(l, methods);

  lua_pop(l, 2);
}

int l_proxy(lua_State* l)
{
  int i = (int)lua_tonumber(l, lua_upvalueindex(1));
  lua_remove(l, 1);  // remove self so member function args start at index 1
  //call real function
  MyClass* obj = getInstance();
  obj->say();
  return 1;
} 
```

我不应该失步吗？
我不使用任何 Lua 绑定框架，我使用的是纯 Lua 库。

==== 更新 1 ====

感谢user1520427的回答，但是......

```
int test(lua_State* l)
{
  MyClass** c = (MyClass**)lua_newuserdata(l, sizeof(MyClass*));
  *c = new MyClass();       // we manage this
  lua_getglobal(l, "MyClass");
  lua_setmetatable(l, -2);
  return 1;
} 
```

我在 Lua 中测试它

```
local b = test()
print( type(b) )
local meta = getmetatable(b)
for k,v in pairs(meta) do
  print("    ", k, v)
end 
```

Lua 显示元表是正确的。

```
userdata
  say     function: 00602860
  new     function: 00493665 
```

但是lua仍然显示相同的错误

```
b:say()   <-- attempt to index local 'b' (a userdata value) 
```

=== 更新 2 ===

```
int test(lua_State* l)
{
  MyClass** c = (MyClass**)lua_newuserdata(l, sizeof(MyClass*));
  *c = new MyClass();       // we manage this
  luaL_getmetatable(l, "MyClass");  //
  lua_getglobal(l, "MyClass");
  lua_setmetatable(l, -2);
  return 1;
} 
```

lua测试结果：

```
b:say()   <-- attempt to call method 'say' (a nil value) 
```

=== 更新 3 ===

```
int test(lua_State* l)
{
  MyClass** c = (MyClass**)lua_newuserdata(l, sizeof(MyClass*));
  *c = new MyClass();       // we manage this
  luaL_getmetatable(l, "MyClass");  
  luaL_setmetatable(l, "MyClass");  //modify
  return 1;
} 
```

Lua测试结果：

```
b:say()   <-- calling 'say' on bad self 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:00:37.113

您没有将返回的内容`test`与您注册的课程相关联。尝试类似：

```
int test(lua_state* l) { 
  MyClass** c = lua_newuserdata(l, sizeof(MyClass*)); // lua will manage the MyClass** ptr
    *c = new MyClass(); // we manage this
    luaL_getmetatable(l, "MyClass");
    lua_setmetatable(l, -2);
    return 1;
} 
```

这不是我的想法，但你明白了。你已经设置了析构函数，所以当 Lua 垃圾收集用户数据时，它会调用你的`__gc`func，然后应该强制转换、取消引用和删除数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:08:43.360

感谢 user1520427 和 lhf
正确的代码如下：

```
int test(lua_State* l)
{
  MyClass** c = (MyClass**)lua_newuserdata(l, sizeof(MyClass*));
  *c = new MyClass();       // we manage this
  luaL_setmetatable(l, "MyClass");  //assign MyClass metatable
  return 1;
} 
```

Lua 测试代码工作正常。

# jquery - jQuery 评级插件 - 需要 % 大小的星星

> ID：14618003
> 
> 赞同：-1
> 
> 时间：2013-01-31T03:34:14.740
> 
> 标签：jquery, responsive-design, percentage, rating

我目前正在使用 RateIt，效果很好，但我不知道是否可以使用它来根据百分比制作我的星星。由于处理样式的默认方法是使用星星的 .png 图像，这让我觉得我需要完成为每个像素制作 .png 文件和附加 CSS 类的动作。我不确定这是否有效。我网站的所有其他元素都将是 % 和响应式的。我只需要我的评级系统相同。

任何和所有的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:48:55.013

你可以做的就是剪掉一个星形的png。将 div 放在下面，使其成为您想要的星星的颜色。

![在此处输入图像描述](../Images/9dcbbf23b732c0930993ae7474b64147.png)

```
<div class="rating">
    <div class="stars"></div>
    <div class="back" style="width:73%"></div>
</div>

.rating {
    width: 100px;
    height: 30px;
    position:relative;
}
.stars {
    width:100%;
    height:100%;
    background: url(http://i.stack.imgur.com/jOhrl.png);
    z-index: 10;
    position:absolute;
    top:0;
    left:0;
}

.back {
    background : gold;
    width:100%;
    height:100%;
} 
```

[http://jsfiddle.net/YVTR6/](http://jsfiddle.net/YVTR6/)

# asp.net-mvc - 如何在 ASP.NET MVC 中模拟 *en crypted* 不可篡改的 Viewstate？

> ID：14618004
> 
> 赞同：1
> 
> 时间：2013-01-31T03:34:31.690
> 
> 标签：asp.net-mvc, security, encryption, asp.net-mvc-4, viewstate

我有我只想在三个不同的 HTTP POST 中提供的数据（想想工作流），我不想使用 QueryString 或 Cookie 来获取此信息。出于这个原因，我认为 _viewstate 的概念在这里适用。

1.  那么，我应该如何将 ASP.NET MVC 中的 ViewState 模拟为包含机密性和身份验证 的**加密隐藏字段？**

2.  ASP.NET 4 或更新的框架是否包含这个？

更多信息

ASP.NET 使用加密的 Viewstate 作为表单中的隐藏字段。这样做的好处之一是加密是“经过身份验证的”，这意味着除了加密有效负载中可用的隐私功能之外，还可以检测到任何篡改。

这个站点上有很多问题讨论如何将 Viewstate 改造成 ASP.NET MVC，但我没有看到任何答案涉及将包含这些功能的数据加密到序列化数据：

*   机密性（隐私）
*   身份验证（无修改）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:53:16.367

它不是“经典 ASP”（这是 1997 年到 2003 年间流行的重 COM、对 VBScript 友好的平台），而是使用 ViewState 的 ASP.NET WebForms。ViewState 本身是页面控件属性的 Base64 编码（未加密）表示。这样做是因为 HTML 表单不会将其他属性传输回服务器，只有`<input>s`'`value=""`属性，因此 ViewState 包含控件的背景颜色属性（如果已设置）等内容。

在 WebForms 中，开发人员可以使用 ViewState 验证 MAC 来确保他们的 viewstate 数据不会被更改，但实际上它经常发生故障。如果您搜索“视图状态 MAC 验证失败”，那么您会发现无数关于如何解决该问题的讨论。然而，这在我的帖子中是无关紧要的。

如果您想将客户端表单字段用作往返数据向量，那很好，只需执行以下代码即可。

```
class PageViewModel {
    public String SecretData;
}

public ActionResult Foo() {

    Byte[] someSecretData = GetIcbmLaunchCodes();
    someSecretData = ArbitraryEncryptionAlgorithm( someSecretData ); // you can encrypt the data any way you want. I personally recommend a symmetric algorithm like AES or TripleDES.

    HashAlgorithm hashAlgo = new HMACSHA1();
    hashAlgo.Key = /* Your private key for HMAC */
    Byte[] hmac = hashAlgo.ComputeHash( someSecretData );

    // when using SHA1, hmac will be 160 bits long, or 20 bytes.
    PageViewModel model = new PageViewModel();
    model.SecretData = Convert.ToBase64String( hmac + someSecretData ); // array concatenation is an exercise for the reader
    return View( model );
}

[HttpPost]
public ActionResult Foo(PageViewModel model) {

    Byte[] postedData = Convert.FromBase64String( model.SecretData );

    Byte[] hmac = postedData[0...20]; // array substring is an exercise for the reader
    Byte[] secretData = postedData[20...n];

    // Now verify the secret data
    HashAlgorithm hashAlgo = new HMACSHA1();
    hashAlgo.Key = /* Your private key for HMAC */
    Byte[] hmac2 = hashAlgo.ComputeHash( secretData );

    if( hmac2 != hmac ) {
        /* the data has been tampered with. */
    } else {
        /* the data is unadulterated */

        Byte[] originalSecretData = ArbitaryDecryptionAlgorithm( secretData );
    }

} 
```

# c++ - 如何将颜色减少到指定的调色板

> ID：14618005
> 
> 赞同：5
> 
> 时间：2013-01-31T03:34:33.630
> 
> 标签：c++, image-processing, opencv, colors, cluster-analysis

我需要解决以下问题：

输入：图像 IM，Palette PA

OUTPUT: IM 只有 PA 的颜色

输入图像是 RGB，但我可以将其转换为 HSV。我指定的颜色目标调色板目前包含：黑色、白色、浅灰色、灰色、深灰色、蓝色、粉色、红色、紫色、绿色、黄色、棕色、橙色。

我为此搜索了很多，但我只能找到将图像缩小为最常见的颜色或将其缩小为固定调色板，如 16 色 EGA 图形。

我找到了最好的答案： [如何使用 Python 图像库将任何图像转换为 4 色调色板图像？](https://stackoverflow.com/questions/236692/how-do-i-convert-any-image-to-a-4-color-paletted-image-using-the-python-imaging)

它有一个输入调色板并将图像缩小到该调色板。在 OpenCV 中是否有与 C++ 相同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T12:21:02.423

假设 rgb 颜色空间是 3D 立方体

![RGB色彩空间](../Images/cf1807a1d5330e69bb94e033a5effe37.png)

并且`Palette PA`是这个立方体中的几个点。所以我们的问题被简化为找到3D 空间`Palette PA`中任何给定点的最近点。`rgb`

我认为更好的解决方案是[kd 树](http://en.wikipedia.org/wiki/K-d_tree)

![在此处输入图像描述](../Images/2133387f31c3fe6fa3c9910a1008347b.png)

在[wiki 页面](http://en.wikipedia.org/wiki/K-d_tree)的末尾，您可以找到几个 c++ 实现的链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:44:08.850

由于您的调色板是固定的，因此您需要使用诸如[Floyd Steinberg 抖动](https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering)之类的抖动方法以及适当的颜色相似性度量，例如在[Lab color space](https://en.wikipedia.org/wiki/Lab_color_space)中。

# .net - fork .NET/WiX 项目后需要修改什么，以便可以同时安装 original 和 fork？

> ID：14618006
> 
> 赞同：0
> 
> 时间：2013-01-31T03:35:11.620
> 
> 标签：.net, wix, windows-installer, packaging, visual-c#-express-2010

我将一个 .NET/WiX 产品（“ [SparkleShare](https://github.com/hbons/SparkleShare) ”）分叉成一个完全不同的产品（“ [CmisSync](https://github.com/nicolas-raoul/CmisSync) ”）。

如果他们愿意，用户应该能够安装这两种产品。

不幸的是，当安装了一个时，另一个无法安装：

> 此产品的另一个版本已安装此版本的安装无法继续。要配置或删除此产品的现有版本，请使用控制面板上的添加/删除程序

我必须改变什么？
它是 Visual C# 2010 Express 中的 .NET 4.5 多项目解决方案，由 WiX 生成的安装程序。

我想经常在项目之间共享代码，所以源代码必须尽可能保持相同。出于这个原因，许多“SparkleShare”字符串仍然存在，这是我故意的，我只想**在必要**的地方进行修改。

这是我认为[SparkleShare.wxs](https://github.com/nicolas-raoul/CmisSync/blob/master/SparkleShare/Windows/SparkleShare.wxs)有趣的部分：

```
<Product Name='CmisSync' Id='184950D5-67F6-4D06-9717-7E2F1607A7B0' UpgradeCode='D3DF1D99-87F5-47A7-A349-863DD6E4B73A'
Language='1033' Codepage='1252' Version='0.8.1' Manufacturer='SparkleShare'>

<Package Id='*' Keywords='Installer' Description="CmisSync Setup" Manufacturer='CmisSync'
  InstallerVersion='100' Languages='1033' Compressed='yes' SummaryCodepage='1252' />

<Media Id='1' Cabinet='SparkleShare.cab' EmbedCab='yes' DiskPrompt='SparkleShare CAB' />
<Property Id='DiskPrompt' Value="SparkleShare Bundle CAB Installation" />

<Directory Id='TARGETDIR' Name='SourceDir'>
  <Directory Id='ProgramFilesFolder' Name='PFiles'>
      <Directory Id='INSTALLDIR' Name='CmisSync'>
        <Component Id='SparkleShare.exe' Guid='0DA582D5-4ABE-4251-9F62-E7DEA76F10E1'>
          <File Id='SparkleShare.exe' Name='SparkleShare.exe' Source='!(wix.root)\bin\SparkleShare.exe' KeyPath='yes' DiskId='1' /> 
```

我只改变了写“CmisSync”的地方。我还必须改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:38:58.960

您将需要更改元素中的 guid`UpgradeCode`和`Id`属性。`Product`这`UpgradeCode`决定了它是同一个应用程序。更改后`UpgradeCode`，请勿再次更改，否则将无法检测和删除现有版本。`Id`需要更改每个版本的应用程序以及`Version`属性

# c - 如何检查文件是 C 中的文本（ASCII）还是二进制文件

> ID：14618008
> 
> 赞同：6
> 
> 时间：2013-01-31T03:35:12.723
> 
> 标签：c, binary, ascii

我需要编写 C 代码来检查文件是文本（ASCII）还是二进制文件

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T03:42:32.540

典型的方法是读取前几百个字节并查找 ASCII NUL。

如果文件包含NUL，那肯定是二进制文件。大多数二进制文件确实包含 NUL 字节，但文本文件绝不应该包含 NUL 字节。

```
#include <string.h>
bool is_binary(const void *data, size_t len)
{
    return memchr(data, '\0', len) != NULL;
} 
```

请注意，这是一种启发式方法。换句话说，有时它会出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T03:41:39.103

读取所有字符，看看它们是否都是 ASCII，即 0 到 127 的代码。

一些工具仅通过检查文件是否具有代码 0 的任何字节来确定文件是文本文件还是二进制文件。

显然，如果您同时应用这两种方法，对于某些文件，您将得到不同的结果，因此，您必须定义您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T22:12:24.280

你可以使用 libmagic。下面的代码将大致向您展示“文件”命令的执行方式。（下面的代码又快又脏——可能需要清理一下。）

```
#include <string.h>
#include <magic.h>
#include <stdio.h>

//------------------------------------------------------------------------------
struct magic_set * prep_magic(int flags)
{
struct magic_set *magic = magic_open(flags);
const char *errstring;
int action = 0;
const char *magicfile = NULL;

if (magicfile == NULL)
    magicfile = magic_getpath(magicfile, action);

if (magic == NULL)
    {
        printf("Can't create magic");
        return NULL;
    }
if (magic_load(magic, magicfile) == -1)
    {
        printf("%s", magic_error(magic));
        magic_close(magic);
        return NULL;
    }
if ((errstring = magic_error(magic)) != NULL)
        printf("%s\n", errstring);

return magic;
/* END FUNCTION prep_magic */ }
//------------------------------------------------------------------------------
int main(int argc, char **argv)
{
int flags = 0;
struct magic_set *msetptr = NULL;

const char *testfile = (char *)"/etc/motd";

msetptr = prep_magic(flags);
if( msetptr == NULL )
    printf("no mset ptr\n");

const char *typer;
typer = magic_file( msetptr, testfile );
printf("typer = %s\n", typer );

return 0;
/* END PROGRAM */ } 
```

# c# - mongodb连接字符串关键字数据源无效

> ID：14618009
> 
> 赞同：0
> 
> 时间：2013-01-31T03:35:15.877
> 
> 标签：c#, mongodb, azure, mongodb-.net-driver

我正在使用 C# 官方 MongoDB 块库。

我在 上托管 Web 服务`Windows Azure`，并在 上托管 MongoDB 数据库`Mongolab`。

我使用以下代码连接到服务器：

```
connection = mongodb://user:pass@ds049999.mongolab.com:45077"
_server = MongoServer.Create(connection); 
```

以前它运行良好，并且在本地测试服务器上运行良好，但在我最近的发布中，我收到以下错误：

```
ExceptionMessage":"Invalid keyword 'data source'."," ....... at MongoDB.Driver.MongoConnectionStringBuilder.set_Item(String keyword, Object value) 
```

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:08:32.727

以下对我有用：

```
var client = new MongoClient("mongodb://user:pass@ds049999.mongolab.com:45077");
var server = client.GetServer();
var database = server.GetDatabase("MyDataBaseName"); 
```

如果您的用户名或密码包含特殊字符，您可能需要对其进行编码。

另请注意，您的数据库用户名和密码可能与您的 MongoLab 登录名不同！

# c# - 什么时候可以对类似的单元测试进行分组？

> ID：14618012
> 
> 赞同：0
> 
> 时间：2013-01-31T03:35:29.870
> 
> 标签：c#, unit-testing, arrange-act-assert

我正在为一个简单的 IsBoolean(x) 函数编写单元测试，以测试一个值是否为布尔值。我要测试 16 个不同的值。

如果我不将它们分解为单独的单元测试，并按如下方式一起运行它们，我会被烧死，还是被 .NET 编程社区无情地嘲笑（这会更糟？）：

```
 [TestMethod]
    public void IsBoolean_VariousValues_ReturnsCorrectly()
    {

        //These should all be considered Boolean values
        Assert.IsTrue(General.IsBoolean(true));
        Assert.IsTrue(General.IsBoolean(false));
        Assert.IsTrue(General.IsBoolean("true"));
        Assert.IsTrue(General.IsBoolean("false"));
        Assert.IsTrue(General.IsBoolean("tRuE"));
        Assert.IsTrue(General.IsBoolean("fAlSe")); 
        Assert.IsTrue(General.IsBoolean(1));
        Assert.IsTrue(General.IsBoolean(0));
        Assert.IsTrue(General.IsBoolean(-1));

        //These should all be considered NOT boolean values
        Assert.IsFalse(General.IsBoolean(null));
        Assert.IsFalse(General.IsBoolean(""));
        Assert.IsFalse(General.IsBoolean("asdf"));
        Assert.IsFalse(General.IsBoolean(DateTime.MaxValue));
        Assert.IsFalse(General.IsBoolean(2));
        Assert.IsFalse(General.IsBoolean(-2));
        Assert.IsFalse(General.IsBoolean(int.MaxValue));
    } 
```

我问这个是因为我一直在阅读的“最佳实践”会要求我执行以下操作：

```
 [TestMethod]
    public void IsBoolean_TrueValue_ReturnsTrue()
    {
        //Arrange
        var value = true;

        //Act
        var returnValue = General.IsBoolean(value);

        //Assert
        Assert.IsTrue(returnValue);

    }

    [TestMethod]
    public void IsBoolean_FalseValue_ReturnsTrue()
    {
        //Arrange
        var value = false;

        //Act
        var returnValue = General.IsBoolean(value);

        //Assert
        Assert.IsTrue(returnValue);

    }

    //Fell asleep at this point 
```

对于 50 多个函数和 500 多个值，我将对此进行测试似乎完全是浪费时间....但这是最佳实践！！！！！！

-布伦丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:53:01.390

我不会担心的。这种事情不是重点。[JB Rainsberger 在他的演讲Integration Tests are a Scam](http://www.infoq.com/news/2009/04/jbrains-integration-test-scam)中简要谈到了这一点。他说，“如果你从来没有强迫自己每次测试使用一个断言，我建议你尝试一个月。它会给你一个新的测试视角，并教你什么时候每次测试使用一个断言很重要，而当它没有时”。IMO，这属于无关紧要的类别。

顺便说一句，如果你使用 nunit，你可以使用[TestCaseAttribute](http://nunit.org/?p=testCase&r=2.5)，它更好一点：

```
[TestCase(true)]
[TestCase("tRuE")]
[TestCase(false)]
public void IsBoolean_ValidBoolRepresentations_ReturnsTrue(object candidate)
{
    Assert.That(BooleanService.IsBoolean(candidate), Is.True);
}

[TestCase("-3.14")]
[TestCase("something else")]
[TestCase(7)]
public void IsBoolean_InvalidBoolRepresentations_ReturnsFalse(object candidate)
{
    Assert.That(BooleanService.IsBoolean(candidate), Is.False);
} 
```

**编辑**：以稍微不同的方式编写测试，我认为可以更好地传达意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T03:58:55.517

尽管我同意将这些值分开以便更容易地识别错误是最佳做法。我认为人们仍然必须使用自己的常识，并遵循诸如**指导原则**而不是绝对规则之类的规则。您希望**最小化**单元测试中的断言计数，但通常最重要的是确保**每个测试有一个概念**。

在您的具体情况下，鉴于功能的简单性，我认为您提供的一个单元测试很好。它易于阅读、简单且清晰。它还彻底测试该功能，如果它在某个地方发生故障，您将能够快速识别源并对其进行调试。

作为额外的说明，为了保持良好的单元测试，您需要始终保持它们是最新的，并像对待实际生产代码一样小心对待它们。这在很多方面都是最大的挑战。进行测试驱动开发的最佳理由可能是它实际上可以让您从长远来看**更快**地编程，因为您不再担心破坏现有的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:41:13.563

想一想将它们分解为单独测试的原因。这是为了隔离不同的功能，并在测试中断时准确识别出所有出错的地方。看起来您可能正在测试两件事：布尔值和非布尔值，因此如果您的代码遵循两条不同的路径，请考虑两个测试。不过，更重要的一点是，如果没有一个测试失败，那么就没有需要查明的错误。

如果您继续运行它们，然后其中一个测试失败，那么是时候将它们重构为单独的测试，并保持这种状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T03:53:42.733

我无法评论“最佳实践”，因为[没有这样的东西](http://www.satisfice.com/blog/archives/27)。

我同意 Ayende Rahien[在他的博客中](http://ayende.com/blog/152897/structuring-your-unit-tests-why)所说的：

> 最后，归结为这样一个事实，即我不认为测试本身就是对产品的价值。它们唯一的价值是它们的二元能力，可以告诉我产品是否可以。在测试上花费大量额外时间会分散创建真正有价值的可交付软件的注意力。

如果您将它们全部放在一个测试中并且该测试在“某处”失败，那么您会怎么做？您的测试框架将准确地告诉您它在哪一行失败，或者，如果失败，您可以使用调试器逐步完成它。因为这一切都在一个功能中所需的额外努力可以忽略不计。

确切地知道在这个特定实例中哪个测试子集失败的额外价值很小，并且被您必须编写和维护的大量代码所掩盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T03:41:42.603

最好将要测试的每个值拆分为单独的单元测试。每个单元测试都应该根据你传递的值和预期的结果来命名。如果您正在更改代码并且只破坏了一个测试，那么仅该测试就会失败，而其他 15 个测试会通过。这使您能够立即知道您破坏了什么，而无需调试一个单元测试并找出哪些断言失败。

希望这可以帮助。

# android - distanceBetween() 返回不准确的结果？

> ID：14618016
> 
> 赞同：11
> 
> 时间：2013-01-31T03:35:48.833
> 
> 标签：android, google-maps, android-location

我使用`distanceBetween()`Location 类来计算两点之间的距离，如下所示：

```
private float getDistanceInMiles(GeoPoint p1, GeoPoint p2) {

    double lat1 = ((double)p1.getLatitudeE6()) / 1e6;
    double lng1 = ((double)p1.getLongitudeE6()) / 1e6;
    double lat2 = ((double)p2.getLatitudeE6()) / 1e6;
    double lng2 = ((double)p2.getLongitudeE6()) / 1e6;
    float [] dist = new float[1];
    Log.i("destination coordinates", "Latitude:" + lat2 + ", Longitude: " + lng2);
        Location.distanceBetween(lat1, lng1, lat2, lng2, dist);

    return dist[0] * 0.000621371192f;
} 
```

[文档](http://developer.android.com/reference/android/location/Location.html)说 distanceBetween() “计算两个位置之间的近似距离，以及可选的它们之间最短路径的初始和最终方位角。” 然而 distanceBetween() 返回的结果与真正的 GPS 设备或谷歌导航应用程序之间的差异是相当大的。例如，我的方法将返回 6.2 英里，而谷歌地图显示同一位置的 10 英里。我仔细检查了起点 p1 和终点 p2 的坐标，它们似乎是正确的。这是 distanceBetween() 方法的工作原理还是我做错了什么？顺便说一句，有没有办法使用 Google Place API 来检索距离作为 JSON 响应？

谷歌地图计算距离：6.1英里

![在此处输入图像描述](../Images/033c778360a1482dc69c1f989398dd03.png)

结果

```
Location.distanceBetween(41.742964, -87.995971, 41.811511, -87.967923, dist) is 
```

4.947700

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T03:50:53.983

Google 导航通常会报告沿路线列表中的一组步骤的驾驶或步行距离，而不是报告的直线距离`distanceBetween()`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T05:12:05.043

为了从谷歌地图获取距离，我使用了[谷歌方向 API](http://code.google.com/apis/maps/documentation/directions/) 和 JSON 解析器来检索距离值：

```
private double getDistanceInfo(double lat1, double lng1, String destinationAddress) {
            StringBuilder stringBuilder = new StringBuilder();
            Double dist = 0.0;
            try {

            destinationAddress = destinationAddress.replaceAll(" ","%20");    
            String url = "http://maps.googleapis.com/maps/api/directions/json?origin=" + lat1 + "," + lng1 + "&destination=" + destinationAddress + "&mode=driving&sensor=false";

            HttpPost httppost = new HttpPost(url);

            HttpClient client = new DefaultHttpClient();
            HttpResponse response;
            stringBuilder = new StringBuilder();

                response = client.execute(httppost);
                HttpEntity entity = response.getEntity();
                InputStream stream = entity.getContent();
                int b;
                while ((b = stream.read()) != -1) {
                    stringBuilder.append((char) b);
                }
            } catch (ClientProtocolException e) {
            } catch (IOException e) {
            }

            JSONObject jsonObject = new JSONObject();
            try {

                jsonObject = new JSONObject(stringBuilder.toString());

                JSONArray array = jsonObject.getJSONArray("routes");

                JSONObject routes = array.getJSONObject(0);

                JSONArray legs = routes.getJSONArray("legs");

                JSONObject steps = legs.getJSONObject(0);

                JSONObject distance = steps.getJSONObject("distance");

                Log.i("Distance", distance.toString());
                dist = Double.parseDouble(distance.getString("text").replaceAll("[^\\.0123456789]","") );

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return dist;
        } 
```

# android - 从中心旋转缩放的图像

> ID：14618019
> 
> 赞同：1
> 
> 时间：2013-01-31T03:36:40.313
> 
> 标签：android, andengine

我有一些我调整大小的精灵（好吧，实现的自定义类`Sprite`，但无论如何）。AndEngine 从中心调整图像大小，这使得放置在 0,0 的图像不再出现在 0,0。为了解决这个问题，我申请了

```
 sprite.setScaleCenterX(0);
    sprite.setScaleCenterY(0); 
```

这会将图像放置在我想要的位置。但是，现在当我旋转图像时，图像会四处移动（如果图像是一个普通的正方形，旋转它应该不会产生明显的变化）。为了解决这个问题，我申请了

```
 sprite.setRotationCenterX((sprite.getWidth() * sprite.getScaleX()) / 2);
    sprite.setRotationCenterY((sprite.getHeight() * sprite.getScaleY()) / 2); 
```

（出于某种原因，调整 a 的大小`Sprite`不会改变精灵的尺寸，只会改变视觉图像，因此将其乘以比例）。然而，这并没有纠正问题，而只是改变了图像在翻转时移动到的位置。

我的数学在这里吗？这不会使图像的旋转居中以使图像不移动位置吗？还是我还缺少其他东西？

以下是完整代码：

```
 Sprite sprite = new Sprite(0, 0, singleTrackTR, getVertexBufferObjectManager());
    sprite.setScale(scaleX, scaleY);
    sprite.setScaleCenterX(0);
    sprite.setScaleCenterY(0);
    sprite.setRotationCenterX((sprite.getWidth() * sprite.getScaleX()) / 2);
    sprite.setRotationCenterY((sprite.getHeight() * sprite.getScaleY()) / 2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:10:01.870

你所有的代码都是正确的。我自己尝试了 setProperty(x, y) 和 setPropertyX/Y(a) 版本。

有没有机会，你把它连接到一个身体？请注意，Body 也不会随 Sprite 的 setScale 缩放。它有自己的 setTransform 方法，该方法采用 x 和 y（您都必须除以 PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT）和旋转值。

# git - git log --since 怎么算？

> ID：14618022
> 
> 赞同：102
> 
> 时间：2013-01-31T03:37:04.797
> 
> 标签：git, git-log

我有一个简单的测试存储库，只有几个提交，并希望查看日期和时间过滤日志：

```
$ git log --author="automatix" --since="2013-01-30" --pretty --test
提交 ea0719bef142659fa561c9d040b2120012ed0184
日期：2013 年 1 月 31 日星期四 02:03:12 +0100

提交 ab4a8387bc4d9bdb4f67212df77eb1fc3d8b6304
日期：2013 年 1 月 31 日星期四 01:59:11 +0100

提交 a0b027beba2cd03571bb9475b9db9542f8efe990
日期：2013 年 1 月 31 日星期四 01:50:38 +0100

提交 add77c8fe2ba9254c11b98e14facede3420dc51c
日期：2013 年 1 月 31 日星期四 01:48:34 +0100

提交 e6e323c05d37c74fcabeb9186b95c0d49b862e6f
日期：2013 年 1 月 31 日星期四 01:46:27 +0100

提交 8c286391e54d3fc1e210950b1320fd6f013a8f84
日期：2013 年 1 月 31 日星期四 01:41:27 +0100

提交 9c880595e57f717383796fa2940f41f0f42f7e2a
日期：2013 年 1 月 31 日星期四 01:38:17 +0100

提交 a95527f36a533e1ecba1aadceea31a9dcbe1a8db
日期：2013 年 1 月 31 日星期四 01:30:00 +0100

```

第一个选定的提交`a95527f36a533e1ecba1aadceea31a9dcbe1a8db`来自`2013-01-30 01:30:00`. 选择了 8 个提交：

```
$ git log --author="automatix" --since="2013-01-30" --format=oneline --test | 厕所
      8 34 498

```

好的。现在我选择`2013-01-31`：

```
$ git log --author="automatix" --since="2013-01-31" --format=oneline --test | 厕所
      0 0 0

```

什么？好的，这应该意味着，该`since`规则*排除*了 startdate 的提交。正确的？

但让我们继续：

```
$ git log --author="automatix" --since="2013-01-31 01:30:00" --pretty --test
提交 ea0719bef142659fa561c9d040b2120012ed0184
日期：2013 年 1 月 31 日星期四 02:03:12 +0100

提交 ab4a8387bc4d9bdb4f67212df77eb1fc3d8b6304
日期：2013 年 1 月 31 日星期四 01:59:11 +0100

提交 a0b027beba2cd03571bb9475b9db9542f8efe990
日期：2013 年 1 月 31 日星期四 01:50:38 +0100

提交 add77c8fe2ba9254c11b98e14facede3420dc51c
日期：2013 年 1 月 31 日星期四 01:48:34 +0100

提交 e6e323c05d37c74fcabeb9186b95c0d49b862e6f
日期：2013 年 1 月 31 日星期四 01:46:27 +0100

提交 8c286391e54d3fc1e210950b1320fd6f013a8f84
日期：2013 年 1 月 31 日星期四 01:41:27 +0100

提交 9c880595e57f717383796fa2940f41f0f42f7e2a
日期：2013 年 1 月 31 日星期四 01:38:17 +0100

提交 a95527f36a533e1ecba1aadceea31a9dcbe1a8db
日期：2013 年 1 月 31 日星期四 01:30:00 +0100

```

```
$ git log --author="automatix" --since="2013-01-31 01:30:00" --format=oneline --test | 厕所
      8 34 498

```

现在，当我也在编写 starttime 时， starttime 的提交也*包括在内*。

我不明白其中的逻辑。谁能解释一下，为什么它如此奇怪？

谢谢

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2014-02-13T02:23:27.427

如果它可以帮助像我一样登陆这里的其他人，经过一番研究，我发现使用[ISO8601 格式](http://en.wikipedia.org/wiki/ISO_8601)也可以：

```
git log --since="2014-02-12T16:36:00-07:00" 
```

这将使您精确到秒。注意：您还可以使用：

```
git log --after="2014-02-12T16:36:00-07:00"
git log --before="2014-02-12T16:36:00-07:00"
git log --since="1 month ago"
git log --since="2 weeks 3 days 2 hours 30 minutes 59 seconds ago" 
```

等等

当然，这并不能“解释为什么它会如此奇怪”。但是，它确实为我解决了这个问题。

* * *

编辑：

经过一番研究，我发现“为什么它的工作如此奇怪”：
事实证明，当您不指定日期格式时，[git log 默认为作者的时区或提交日期](http://cworth.org/hgbook-git/tour/)，这意味着一致的行为，它很有用使用以下内容明确声明您的日期格式：

```
git log --date=local 
```

最后，当您不指定时间时，它默认为您运行命令时的本地时间。

长话短说，具体应该可以解决问题：

```
git log --date=local --after="2014-02-12T16:36:00-07:00" 
```

此外，您可以使用以下命令永久设置默认日期格式：

```
git config log.date local 
```

您可以使用以下任一值：`(relative|local|default|iso|rfc|short|raw)`

# google-apps-script - 谷歌脚本矢量数学

> ID：14618024
> 
> 赞同：0
> 
> 时间：2013-01-31T03:37:43.360
> 
> 标签：google-apps-script, google-sheets

我想知道 Google Scripts 中是否有一个用于矩阵数学的库。当我用谷歌搜索这个问题时，我看到名为“Sylvester”的东西可用于 Javascript。有人知道谷歌脚本是否有类似的东西吗？我正在将一些 Matlab 代码移动到 Google Scripts 中，我不想回到循环进行矩阵运算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:21:40.003

Apps 脚本是 Javascript。如果您有数学库的代码，请将其粘贴到编辑器中，它可能会起作用。

# c# - 如何将特定的 HTML 元素捕获为图像？

> ID：14618025
> 
> 赞同：2
> 
> 时间：2013-01-31T03:37:51.507
> 
> 标签：c#, image, .net-4.0, webbrowser-control

我在这里问了一个类似的问题： [有没有办法在另一个表单上显示一个表单的一部分？](https://stackoverflow.com/questions/14612589/is-there-a-way-to-show-part-of-one-form-on-another-form)

如果我能保证使用此应用程序的每个人都使用与我相同的监视器，这将非常有用。

但我是一个现实主义者，所以我会谈到细节。

如果我可以（我可以）识别包含我想从中创建图像`HtmlElement`的控制文档的特定内容，有没有什么方法可以从该特定内容创建图像？`WebBrowser``HtmlElement`

我看过一些关于`IExtractImage`但我所看到的一切都让我的头有点疼的东西。如果有人可以将其简化（如果那是我正在寻找的）以便我可以使用它，那将是非常好的。

更清楚一点，我希望是这样的`HtmlElement.DrawToBitmap()`

# css - 删除 html 输入周围的边框

> ID：14618028
> 
> 赞同：45
> 
> 时间：2013-01-31T03:38:06.447
> 
> 标签：css, cross-browser, zurb-foundation

我想为我的网络应用程序创建一个搜索功能。

这是 FF 和 IE 上的外观，没有奇怪的边框是可以的

火狐

![在此处输入图像描述](../Images/d12232e30560b519349017134a15d1a1.png)

IE

![在此处输入图像描述](../Images/bae20d44eea784253a7a78272bfd6621.png)

这是 Chrome 和 Safari 上的外观，输入元素周围有奇怪的边框

铬合金

![在此处输入图像描述](../Images/508521c3337ed8c18d4eee8a9fe56814.png)

苹果浏览器

![在此处输入图像描述](../Images/860bb289008ec38a79635d02eb812385.png)

这是我的 html & css 代码

```
<input type="search" id="generic_search" onkeypress="return runScript(event)" />
<input type="button" id="generic_search_button" /> 
```

已`border:0`应用于所有元素

![在此处输入图像描述](../Images/b6500a109ab2eb95205a7b4eccb7a373.png)

```
#generic_search
{
    font-size: 14px;
    width: 250px;
    height: 25px;
    float: left;
    padding-left: 5px;
    padding-right: 5px;
    margin-top: 7px;
}
#generic_search_button
{
    float: left;
    width: 25px;
    height: 25px;
    margin-top: 7px;
    cursor: pointer;
    background-color: White;
    background-image: url(/Images/search.png);
    background-repeat: no-repeat;
    background-position: center center;
} 
```

怎么去掉那个边框？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-31T05:13:43.823

`border: 0`应该足够了，但如果不是，那么按钮的浏览器默认样式可能会干扰。您是否尝试设置`appearance`为`none`（例如`-webkit-appearance: none`）

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-31T03:46:03.570

```
border-width:0px;
border:none; 
```

我用过这个，在大多数浏览器（Chrome、Safari、FF、IE 等）中，它对我来说都很好

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-03-04T21:03:46.757

这很简单

```
input {border:0;outline:0;}
input:focus {outline:none!important;} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-09-26T23:21:26.947

在我的情况下，我使用的是一个 CSS 框架，它添加了`box-shadow`，所以我还必须添加

```
box-shadow: none; 
```

所以完整的片段是：

```
border: none; 
border-width: 0; 
box-shadow: none; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-31T05:10:34.507

你的代码看起来像这样 [jsfiddle.net/NTkGZ/](http://jsfiddle.net/NTkGZ/)

尝试

```
border:none; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-18T08:52:37.583

我有时使用此 css 代码来删除焦点输入边框。希望对您有所帮助-：

```
 input:focus, textarea:focus, select:focus{
    outline: none;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T04:04:53.923

试试这个

```
#generic_search_button
{
    float: left;
    width: 24px; /*new width*/
    height: 24px; /*new width*/
    border: none !important; /* no border and override any inline styles*/
    margin-top: 7px;
    cursor: pointer;
    background-color: White;
    background-image: url(/Images/search.png);
    background-repeat: no-repeat;
    background-position: center center;
} 
```

我认为图像尺寸可能是错误的

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-31T03:54:50.967

使用这个我希望这对你有帮助...边框：无！重要；背景颜色：透明；

试试这个

```
<div id="generic_search"><input type="search" onkeypress="return runScript(event)" /></div>
<button type="button" id="generic_search_button" /></button> 
```

# python - 获取上次抛出的异常的引用

> ID：14618033
> 
> 赞同：5
> 
> 时间：2013-01-31T03:38:22.070
> 
> 标签：python, exception, exception-handling, stack-trace, callstack

在 python 和/或 ipython 交互式解释器中，如何在最后一个未处理的异常上绑定名称？即相当于

```
>>> try:
...     1/0
... except Exception as potato:
...     pass
... 
>>> format(potato)
'integer division or modulo by zero' 
```

一定是这样的...

```
>>> 1/0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ZeroDivisionError: integer division or modulo by zero
>>> import sys
>>> potato = ??? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T03:45:00.893

您可以[`sys.last_value`](http://docs.python.org/2/library/sys.html#sys.last_value)为此使用：

```
>>> 1/0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ZeroDivisionError: integer division or modulo by zero
>>> sys.last_value
ZeroDivisionError('integer division or modulo by zero',)
>>> type(sys.last_value)
<type 'exceptions.ZeroDivisionError'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:44:22.160

当引发未处理的异常时，您可以使用开关`ipython`调用以将您转储到 python 调试器 (pdb) 中。`--pdb`

```
$ ipython --pdb
In [1]: 1/0
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)
<ipython-input-2-05c9758a9c21> in <module>()
----> 1 1/0

ZeroDivisionError: integer division or modulo by zero
> /usr/lib/python2.7/bdb.py(177)_set_stopinfo()
    176     def _set_stopinfo(self, stopframe, returnframe, stoplineno=0):
--> 177         self.stopframe = stopframe
    178         self.returnframe = returnframe

ipdb> whatis
*** SyntaxError: SyntaxError('unexpected EOF while parsing', ('<string>', 0, 0, ''))
ipdb> where
  /usr/lib/python2.7/bdb.py(43)reset()
     41         linecache.checkcache()
     42         self.botframe = None
---> 43         self._set_stopinfo(None, None)
     44 
     45     def trace_dispatch(self, frame, event, arg):

> /usr/lib/python2.7/bdb.py(177)_set_stopinfo()
    175 
    176     def _set_stopinfo(self, stopframe, returnframe, stoplineno=0):
--> 177         self.stopframe = stopframe
    178         self.returnframe = returnframe
    179         self.quitting = 0 
```

文档在`pdb`这里：[http ://docs.python.org/2/library/pdb.html](http://docs.python.org/2/library/pdb.html)

# javascript - javascript原型对象

> ID：14618046
> 
> 赞同：1
> 
> 时间：2013-01-31T03:40:10.633
> 
> 标签：javascript

1.

```
function MyConstructor() {}
var myobject = new MyConstructor();
MyConstructor.prototype = {protest:"maizere"};

[ myobject instanceof MyConstructor,     // false !
myobject.constructor == MyConstructor, // true !
myobject instanceof Object ]           // true
console.log(myobject.protest)          //undefined 
```

这证明 myobject 不再从 MyConstructor 原型继承属性和方法。

但请参阅下面的代码：

2\.

```
function MyConstructor() {}
var myobject = new MyConstructor();
MyConstructor.prototype.protest= "Maizere";//Do this line gets hoisted?or something else

[ myobject instanceof MyConstructor,     // true!
myobject.constructor == MyConstructor, // true !
myobject instanceof Object ]           // true
console.log(myobject.protest)          //Maizere 
```

为什么会发生这种情况？内部原型的确切定义是什么？这也证明即使在对象实例化之后，**proto**也引用了 MyConstructor 原型。如果是这样，那么为什么第一个（1.）代码没有引用 MyConstructor 原型？由于属性是在第二个代码中的对象实例化之后添加的，并且对象的内部原型接收它，这意味着我们可以稍后更改原型属性，仍然可以在实例中看到效果。但是相同的定义不起作用在第一个代码中替换原型属性时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:48:21.513

我可能对此有误，但是当您这样做时，它看起来像：

```
MyConstructor.prototype = {protest:"maizere"}; 
```

您正在使用匿名对象定义覆盖您的原型，因此当您添加一个新属性时，例如：

```
MyConstructor.prototype.protest= {"Maizere"}; 
```

你的类保留了它的原型，它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:48:56.367

`MyConstructor.prototype =`覆盖整个`prototype`对象。

> 运算符测试对象的`instanceof`原型链中是否具有构造函数的原型属性

[http://jsfiddle.net/ExplosionPIlls/xtqhp/](http://jsfiddle.net/ExplosionPIlls/xtqhp/)

```
function MyConstructor () {}
MyConstructor.prototype = {'xyz': 'zyx'};
//true
console.log((new MyConstructor) instanceof MyConstructor);

function MyConstructor2 () {}
var mc2 = new MyConstructor2;
MyConstructor2.prototype = {'xyz': 'zyx'};
//false
console.log(mc2 instanceof MyConstructor2); 
```

顺便说一句，`MyConstructor.prototype.protest = {"Maizere"};`不是有效的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T03:50:01.930

所以，这是我将这篇文章加入书签的原因之一：

[被认为有点令人困惑的构造函数](http://joost.zeekat.nl/constructors-considered-mildly-confusing.html)

基本上，第一个代码块中发生的事情是您正在用一个新对象覆盖 MyConstructor 的原型对象。而在第二个块中，您正在向现有原型对象添加一个属性。

# perl - 用于从 Web 下载文件的 Perl 脚本

> ID：14618048
> 
> 赞同：1
> 
> 时间：2013-01-31T03:40:20.537
> 
> 标签：perl

我正在尝试自动化我的一项任务，我必须从[http://www.filehippo.com/download_google_talk/](http://www.filehippo.com/download_google_talk/)下载一些软件的最后 5 个版本，比如说 Google talk 。

我从来没有做过这种类型的编程，我的意思是，通过 perl 与 Web 交互。我刚刚阅读并知道通过 CGI 模块我们可以实现这个东西，所以我尝试了这个模块。

如果有人可以给我更好的建议，那么欢迎你:)

**我的代码：**

```
#!/usr/bin/perl 

use strict;
use warnings;
use CGI; 
use CGI::Carp qw/fatalsToBrowser/;

my $path_to_files =   'http://www.filehippo.com/download_google_talk/download/298ba15362f425c3ac48ffbda96a6156';

my $q = CGI->new;

my $file = $q->param('file') or error('Error: No file selected.');
print "$file\n";

if ($file =~ /^(\w+[\w.-]+\.\w+)$/) {
   $file = $1;
}
else {
   error('Error: Unexpected characters in filename.');
}   

if ($file) {
  download($file) or error('Error: an unknown error has occured. Try again.');
}  

sub download 
{

open(DLFILE, '<', "$path_to_files/$file") or return(0);
print $q->header(-type            => 'application/x-download',
                 -attachment      => $file,
                  'Content-length' => -s "$path_to_files/$file",
   );
  binmode DLFILE;
   print while <DLFILE>;
   close (DLFILE);
   return(1);
}

sub error {
   print $q->header(),
         $q->start_html(-title=>'Error'),
         $q->h1($_[0]),
         $q->end_html;
   exit(0);
} 
```

在上面的代码中，我试图打印要下载的文件名，但它显示错误消息。我无法弄清楚为什么会出现此错误“错误：未选择文件”。快来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:16:03.600

对不起，但你走错了路。你最好的选择是这个模块：[http ://metacpan.org/pod/WWW::Mechanize](http://metacpan.org/pod/WWW%3a%3aMechanize)

这个页面包含很多例子：[http ://metacpan.org/pod/WWW::Mechanize::Examples](http://metacpan.org/pod/WWW%3a%3aMechanize%3a%3aExamples)

它可能更优雅，但我认为这段代码更容易理解。

```
use strict;
use warnings;

my $path_to_files =   'http://www.filehippo.com/download_google_talk/download/298ba15362f425c3ac48ffbda96a6156';
my $mech = WWW::Mechanize->new();
$mech->get( $path_to_files );
$mech->save_content( "download_google_talk.html" );#save the base to see how it looks  like
foreach my $link ( $mech->links() ){ #walk all links
    print "link: $link\n";
    if ($link =~ m!what_you_want!i){ #if it match
        my $fname = $link;
        $fname =~ s!\A.*/!! if $link =~ m!/!;
        $fname .= ".zip"; #add extension
        print "Download $link to $fname\n";
        $mech->get($link,":content_file" => "$fname" );#download the file and stoore it in a fname.     
    }
} 
```

# ruby-on-rails - 给定一个缩短的 URL 传递给 Nokogiri，如何获得完整的 URL？

> ID：14618052
> 
> 赞同：2
> 
> 时间：2013-01-31T03:40:51.510
> 
> 标签：ruby-on-rails, ruby, nokogiri, mechanize, scraper

我想用 Nokogiri 遍历一些 HTML 文档。获取 XML 对象后，我希望 Nokogiri 使用的最后一个 URL 获取文档作为我的 JSON 响应的一部分。

```
def url = "http://ow.ly/hh8ri"     
doc = Nokogiri::HTML(open(url)
... 
```

Nokogiri 在内部将其重定向到[http://www.mp.rs.gov.br/imprensa/noticias/id30979.html](http://www.mp.rs.gov.br/imprensa/noticias/id30979.html)，但我想访问它。

我想知道“doc”对象是否可以访问某些 URL 作为属性或其他东西。有人知道解决方法吗？

顺便说一句，我想要完整的 URL，因为我正在遍历 HTML 来查找`<img>`标签，有些标签有相对的标签，例如：“/media/image/image.png”，然后我使用以下方法调整一些：

```
URI.join(url, relative_link_url).to_s 
```

图片网址应为：

```
http://www.mp.rs.gov.br/media/imprensa/2013/01/30979_260_260__trytr.jpg 
```

代替：

```
http://ow.ly/hh8ri/media/imprensa/2013/01/30979_260_260__trytr.jpg 
```

编辑：想法

```
class Scraper < Nokogiri::HTML::Document
  attr_accessor :url

  class << self

    def new(url)
        html = open(url, ssl_verify_mode: OpenSSL::SSL::VERIFY_NONE)
        self.parse(html).tap do |d|
            url = URI.parse(url)
            response = Net::HTTP.new(url.host, url.port)
            head = response.start do |r|
              r.head url.path
            end 
            d.url = head['location']
        end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:02:24.267

使用机械化。URL 将始终转换为绝对 URL：

```
require 'mechanize'
agent = Mechanize.new
page = agent.get 'http://ow.ly/hh8ri'
page.images.map{|i| i.url.to_s}
#=> ["http://www.mp.rs.gov.br/images/imprensa/barra_area.gif", "http://www.mp.rs.gov.br/media/imprensa/2013/01/30979_260_260__trytr.jpg"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T04:27:34.433

因为您的示例使用的是 OpenURI，所以这是要问的代码，而不是 Nokogiri。Nokogiri 不知道内容来自哪里。

OpenURI 可以很容易地告诉你：

```
require 'open-uri'

starting_url = 'http://www.example.com'
final_uri = nil

puts "Starting URL: #{ starting_url }"

io = open(starting_url) { |io| final_uri = io.base_uri }
doc = io.read

puts "Final URL: #{ final_uri.to_s }" 
```

哪个输出：

```
Starting URL: http://www.example.com
Final URL: http://www.iana.org/domains/example 
```

`base_uri`记录在[OpenURI::Meta](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI/Meta.html)模块中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T03:47:08.630

我最近遇到了完全相同的问题。我所做的是创建一个继承自的类，`Nokogiri::HTML::Document`然后只重写`new`类方法来解析文档，然后将 url 保存在带有访问器的实例变量中：

```
require 'nokogiri'
require 'open-uri'

class Webpage < Nokogiri::HTML::Document
  attr_accessor :url

  class << self

    def new(url)
      html = open(url)
      self.parse(html).tap do |d|
        d.url = url
      end
    end
  end
end 
```

然后您可以创建一个新`Webpage`的，它可以访问您使用的所有常规方法`Nokogiri::HTML::Document`：

```
w = Webpage.new("http://www.google.com")
w.url
#=> "http://www.google.com"
w.at_css('title')
#=> [#<Nokogiri::XML::Element:0x4952f78 name="title" children=[#<Nokogiri::XML::Text:0x4952cb2 "Google">]>] 
```

如果您有一些从图像标签中获得的相对 url，则可以通过将访问器的返回值传递给以下方式使其成为绝对`url`URL `URI.join`：

```
relative_link_url = "/media/image/image.png"
=> "/media/image/image.png"
URI.join(w.url, relative_link_url).to_s
=> "http://www.google.com/media/image/image.png" 
```

希望有帮助。

ps这个问题的标题很误导人。更多类似“访问 Nokogiri HTML 文档的 URL”的内容会更清晰。

# node.js - Node.js 永远带有环境变量

> ID：14618054
> 
> 赞同：45
> 
> 时间：2013-01-31T03:41:26.840
> 
> 标签：node.js, environment-variables, forever

我在服务器上运行以启动节点应用程序的命令是：

```
sudo IS_PROD=1 node app.js 
```

我已经永远安装了，但似乎无法传递环境变量。

```
sudo IS_PROD=1 forever node app.js 
```

似乎没有奏效。我已经尝试了几个品种。如何成功执行此命令或永久设置环境变量？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-05T11:58:49.383

首先你应该跳过`node`你命令中的东西，它不应该在那里，你不应该能够执行它。[永远使用](/questions/tagged/forever "显示标记为“永远”的问题")[nodejs](/questions/tagged/nodejs "显示标记为“nodejs”的问题")自动启动您的脚本。相反，您应该这样做；

```
sudo IS_PROD=1 forever app.js 
```

您可能不想在前台启动服务器，而是希望将服务器作为守护程序启动。例如。

```
sudo IS_PROD=1 forever start app.js 
```

这将在后台创建一个进程，该进程将监视您的节点应用程序并在它退出时重新启动它。有关详细信息，请参阅[自述文件](https://github.com/nodejitsu/forever#usage)。

这两种方法都保留了环境变量，就像您刚刚使用`node`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-05T08:02:39.100

应用程序.js：

```
console.log(process.env.IS_PROD); 
```

使用`node`(v0.8.21)

```
$ node app.js
undefined

$ IS_PROD=1 node app.js
1

$ sudo IS_PROD=1 node app.js
1 
```

使用`forever`(v0.10.0)

```
$ forever app.js
undefined

$ IS_PROD=1 forever app.js
1

$ sudo IS_PROD=1 forever app.js
1 
```

[文档](http://nodejs.org/api/process.html#process_process_env)：

> **进程.env**
> 
> 包含用户环境的对象。请参见环境 (7)。

# java - 用于求和 2 的幂的 Java 递归方法，从 0 到 N

> ID：14618055
> 
> 赞同：1
> 
> 时间：2013-01-31T03:41:28.500
> 
> 标签：java, methods, recursion

所以我试图学习递归（我知道在这种情况下递归是没有必要的）

我已经写了这个方法，它有效

```
public static int method(int number) {
    if(number == 0) {
        return 1;
    }
    else {
        return (int)Math.pow(2,number) + method(number-1);
    }
} 
```

这非常适合将 2 的幂从 0 加到数字，但我想知道是否有办法`Math.pow()`用另一个递归方法调用替换

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T03:49:09.100

您可以将其用作递归幂函数：

```
public static int powerOf2(int number) {
    if (number == 0) {
        return 1;
    } else {
        return 2 * powerOf2(number - 1);
    }
} 
```

或者，作为单行正文：

```
return number > 0 ? 2 * powerOf2(number - 1) : 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T03:48:20.253

您应该定义另一种递归方法来递归计算 Math.pow(2,n)。但是我建议做 2 的位移运算来快速计算 Math.pow(2,n) 。例如移位 2 << (n-1) 将在这里做滚刀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:27:31.893

更通用的解决方案：

```
public static int pow (int base, int ex) {
    if (ex == 0) {
        return 1;
    } else if (ex == 1) {
        return base;
    } else if(ex > 1) {
        return (pow(base, ex - 1) * base);
    } else {
        return pow(base, ex + 1) / base;
    }
} 
```

这处理所有可能的情况，其中传递的值是整数..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T03:55:48.457

如果您想学习递归，请举一个著名的 Fabonacci 系列示例。

```
public int getNthFibonacci( int n )
    {
        if ( n == 1 || n == 2 ) 
            return 1;

      else
        return getNthFibonacci( n-1 ) + getNthFibonacci( n-2 );
    }

public static void main(String[] args){

        Recursion myRecursor = new Recursion();
        System.out.println( myRecursor.getNthFibonacci(5) );

    } 
```

但在您的情况下，它也可以通过 for 循环轻松完成。

```
public static void main(String[] args) {

       int sum = 0;     
        for (int number = 20; number>0; number--)
        {
            sum += Math.pow(2,number);
        }

        System.out.println(sum);

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T20:39:27.807

也许与严格的问题相去甚远，您的问题是计算**几何级数**的总和，这*是一个连续项之间具有恒定比率的序列*。

您的第一个元素等于 1（作为 2 pow 0）并且您的比率等于 2。因此，您可以将它与常见的、众所周知的等式一起使用，而不是使用任何递归：

```
public long computGemetricSeries(int n) {
  long firstElem = 1;
  long ratio = 2;

  return (firstElem * (1 - Math.pow(ration,n)) / (1 - ratio));
} 
```

或者对于一般术语（不仅是幂 o 2）：

```
public long computGeometricSeries(int n, double ration, double firstElem) {
   return (firstElem * (1 - Math.pow(ration,n)) / (1 - ration));
} 
```

如果您真的想要在这里递归，您可以更改`Math.pow(ration,n)`为其他答案提出的一些递归函数。

我认为这对解决您的问题没有多大帮助，但会是一个很好的好消息答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-06T07:35:33.817

```
public class ComputePowerUsingRecursion {

    public static void main(String[] args) {    
        System.out.println(computePower(2,5));  // Passing 2 for power of 2
        System.out.println(computePower(2,-5)); // Number would be +ve or -ve
    }

    /**
     * <p>Compute power</p>
     * 
     *  p(x,n)  =  1              if(x=0)
     *          =  x*p(x,n-1)     if(n>0)
     *          =  (1/x)*p(x,n+1) if(n<0)  
     * @param x
     * @param n
     * @return
     */
    public static double computePower(double x, double n){
        //base case
        if(n==0){
            return 1;
        }else if(n>0){   //recursive condition for postive power
            return x*computePower(x, n-1);
        }else if(n<0){  //recursive condition for negative power
            return (1/x)*computePower(x, n+1);
        }else{ 
            return -1;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-15T21:10:14.260

```
public static void main (String[] args){
    Integer output = 0;
    output = sumOfThePower(end, 1, 1); //input the number you like at 'end' to get the sum
    System.out.println(output);
}
public static Integer sumOfThePower (int end, int start, int mul){
if (start <= end){
    mul =2 * mul;
    return mul + sumOfThePower(end, start + 1, mul);
}
else{
    return 1;
}
} 
```

# vb.net - 如果其他条件不起作用

> ID：14618059
> 
> 赞同：0
> 
> 时间：2013-01-31T03:41:47.303
> 
> 标签：vb.net, ms-access

我不知道这段代码，因为如果条件为真，msgbox 会出现，但如果条件为假，msgbox 不会出现。任何人都可以给出一些想法。这是代码

```
 Dim cnnOLEDB As New OleDbConnection(strConnectionString)
        sql = "SELECT * FROM Spec WHERE  Category='1BK' IN ( Silo = '" & txtBin.Text & "' AND WheatType = '" & ddlType.Text & "')"
        cmd = New OleDbCommand(sql, cnnOLEDB)
        cnnOLEDB.Open()
        Dim dr As OleDbDataReader
        dr = cmd.ExecuteReader()
        'If dt.Rows.Count > 0 Then

        While dr.Read()
            If ddlType.Text = dr("WheatType") Then
                MsgBox("OK")
            Else
                MsgBox("Wrong")
            End If
        End While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:12:17.340

如果 WheatType 不在数据库中，您将永远不会看到“错误”消息，因为在这种情况下，对 dr.Read() 的第一次调用将返回 False... 将没有记录，`If ddlType.Text = dr("WheatType")`甚至永远不会评估您的条件.

不过，不仅如此，我们这里还有一个**严重的安全问题**。您**不能像这样**使用字符串连接将用户输入的数据放入您的 sql 命令中。

试试这个：

```
'Your WHERE clause looks wrong, too, but I don't know enough about what you're doing to correct it
Dim sql As String = "SELECT * FROM Spec WHERE Category='1BK' IN (Silo= ? AND WheatType= ? )"

Using cnnOLEDB As New OleDbConnection(strConnectionString), _
      cmd As New OleDbCommand(sql, cnnOLEDB)

    'Have to guess at parameter types and lengths here
    cmd.Parameters.Add("Bin", OleDbType.Char, 10).Value = txtBin.Text
    cmd.Parameters.Add("Type", OleDbType.Char, 3).Value = ddlType.Text

    cnnOLEDB.Open()
    Using dr As OleDbDataReader = cmd.ExecuteReader()

        Dim Found As Boolean = False
        While dr.Read()
            If ddlType.Text = dr("WheatType") Then
                MsgBox("OK")
                Found = True
            End If
        End While
        If Not Found Then MsgBox("Wrong")
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:50:47.147

您是否进行了测试以确保

> ddlType.Text = dr("WheatType")

表中的每一行都不正确？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T03:44:55.913

尝试这个 ：

```
 While dr.Read()
        If ddlType.Text = dr("WheatType").ToString() Then
            MsgBox("OK")
        Else
            MsgBox("Wrong")
        End If
    End While 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T04:03:56.037

如果您的数据库中不存在搜索字符串，则 dr.Read() 中的代码不起作用，因为 dr 为空。所以你必须像这样改变你的代码

```
Dim Found As Boolean = False
        While dr.Read()
            If ddlType.Text = dr("WheatType") Then
                MsgBox("OK")
                Found = True
            End If
        End While
        If Found = False Then
                MsgBox("Wrong")
            End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T04:05:58.030

尝试使用 String.Compare 和 Trim：

```
String.Compare(ddlType.Text.Trim(), dr("WheatType").ToString().Trim(), True) 
```

如果这不起作用，我想这些值不相等。

祝你好运。

# c++ - 你怎么能传递一个向量 > 变成一个函数？

> ID：14618065
> 
> 赞同：0
> 
> 时间：2013-01-31T03:42:28.730
> 
> 标签：c++, vector, std-pair

如果我尝试将函数声明为`void some_function(vector<pair<int, int> > theVector)`，我会收到一个错误（可能来自 " 之后的逗号`pair<int`。" 关于如何将这个向量与对传递给函数的任何想法？

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <vector>

void someFunc(int x, int y, vector<pair<int, int> > hello);

int main()
{
    int x = 0;
    int y = 5;

    vector<pair<int, int> > helloWorld;
    helloWorld.push_back(make_pair(1,2));

    someFunc(x,y,helloWorld);
}

void someFunc(int x, int y, vector<pair<int, int> > hello)
{
    cout << "I made it." << endl;
} 
```

错误：“向量”尚未声明

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T03:45:57.963

您未能包含`<utility>`, 它定义了`std::pair`，**并且**您使用的是`vector`and `pair`，而不是`std::vector`and `std::pair`。

所有标准模板库都在命名空间内`std`，因此您必须在 STL 中为类型添加前缀`std`，例如`std::vector`. 另一种方法是`using std::vector;`在包含`<vector>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T03:58:32.170

您需要为 vector、pair、make_par 提供完整的命名空间，它们来自 std 命名空间：

```
void someFunc(int x, int y, std::vector<std::pair<int, int> > hello);

int main()
{
    int x = 0;
    int y = 5;

    std::vector<std::pair<int, int> > helloWorld;
    helloWorld.push_back(std::make_pair(1,2));

    someFunc(x,y,helloWorld);
    return 0;
}

void someFunc(int x, int y, std::vector<std::pair<int, int> > hello)
{
    std::cout << "I made it." << std::endl;
} 
```

旁注：您可以通过引用将向量传递给 someFunc，这将省略不必要的复制：

```
 void someFunc(int x, int y, const std::vector<std::pair<int, int> >& hello);
                              ^^^                                   ^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T03:46:05.727

你是否包括`<vector>`和`<utility>`？您应该在和上使用`std::`命名空间。`vector``pair`

例如。 `void some_function(std::vector< std::pair<int, int> > theVector)`

编辑：当然，您通常不应该通过值传递向量，而是通过引用传递。

例如。 `void some_function(std::vector< std::pair<int, int> >& theVector)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T11:22:00.393

我检查了您的代码，您只需`std`在`#include`. 而且你不需要添加`#include <utility>`它可以在没有它的情况下工作。
`using namespace std`

# c4 - C4Shape 的 zPosition 属性是否需要一些时间才能开始工作？

> ID：14618069
> 
> 赞同：2
> 
> 时间：2013-01-31T03:42:50.397
> 
> 标签：c4

如果我做

```
zPosition = 3; 
```

然后我马上运行一个方法

```
string = [[NSString alloc]initWithFormat:@"%i", (NSInteger)shape.zPosition];'
label.text = string;' 
```

那么标签显示的 zPosition 值不正确。但是，如果我在延迟后运行我的方法，那么它就可以工作。

那里发生了什么事？zPosition 需要一点时间才能启动吗？还是我只是做错了事？

这是我正在谈论的内容的一个要点示例[https://gist.github.com/4670390](https://gist.github.com/4670390)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:39:17.343

不幸的是，是的，它需要一瞬间。

关于“为什么”发生这种情况的答案是动画持续时间在 api 中被隐式设置为 0.0001 秒。您的即时调用`[self updateLabels]`实际上是在`zPosition`属性完成动画之前调用的。

这实际上是我现在在 C4 中跟踪的一个错误，我已经[在 github 上提供的完整项目中](https://github.com/C4Framework/C4iOS/)修复了它，但是在它进入安装程序/项目模板之前还需要一段时间。

# javascript - 当前类 - mouseenter jQuery 动画

> ID：14618070
> 
> 赞同：0
> 
> 时间：2013-01-31T03:42:58.613
> 
> 标签：javascript, jquery, html, mouseenter

我的大脑刚刚停留在凌晨 4:40，我不知道该怎么办。要么我脑子里没有解决办法，要么我应该睡觉。

但是我不知道如何只为当前选择/悬停的类而不是所有类设置动画。

这是 HTML 部分：

```
 <div class="cardWrap">
            <div class="backlit"></div>

            <div class="cardStyle">
                <div class="cardOverlay"></div>
                <ul class="cardAmount">
                    <li>Role Gift</li>
                    <li>Download and Play <br> Your Favourite Games</li>
                    <li>$10</li>
                    <li> </li>
                </ul>
            </div>

            <a class="cardSelect">Get this amount</a>
        </div> 
```

这是jQuery部分：

```
<script>
    $(function() {
        $('.cardWrap').on('mouseenter mouseleave', function(e) {
            if(e.type === 'mouseenter') {
                $('.backlit').stop().animate({'opacity': '.9'})
            } else {
                $('.backlit').stop().animate({'opacity': '.4'})
            }
        });
    });
</script> 
```

它工作得很好......它减少并增加了父级悬停时的不透明度。但是，如果我有例如 3x 相同的 html 结构并且不仅当前悬停一个，为什么它会为所有这些设置动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:48:39.770

将您的脚本更改为此。您需要将范围限制为悬停元素的子元素。

```
$(function () {
    $('.cardWrap').on('mouseenter mouseleave', function (e) {
        if (e.type === 'mouseenter') {
            $(this).children('.backlit').stop().animate({
                'opacity': '.9'
            })
        } else {
            $(this).children('.backlit').stop().animate({
                'opacity': '.4'
            })
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:49:45.683

@jSang 有正确的想法，但我认为这甚至可以通过使用[hover](http://api.jquery.com/hover/)和[fadeTo](http://api.jquery.com/fadeTo/)来简化。

```
$('.cardWrap').hover(function() {
    $(this).children('.backlit').stop().fadeTo(300, '.9');
}, function(){
    $(this).children('.backlit').stop().fadeTo(300, '.4');
}); 
```

* * *

# [演示](http://jsfiddle.net/ChrisMBarr/6kkLN/2)

# c# - 提高页面加载时的性能

> ID：14618072
> 
> 赞同：0
> 
> 时间：2013-01-31T03:43:18.277
> 
> 标签：c#, asp.net

我有一个 .aspx 屏幕，它在 asp:GridView 组件中显示一些数据。页面加载时最多可以返回大约 30k 条记录。从数据库中检索 13000 条记录需要大约 30 秒。这是慢还是快？我正在使用存储过程从数据库中检索记录，我只查询数据库一次并存储它。那么有一个 foreach 循环需要超过 2 分钟才能执行？所以加载页面需要 aapr 4 分钟。

我只是 asp.net 的初学者。你能帮我改善页面加载时的延迟吗？

这是循环结构..我们可以以任何方式优化它吗？

List auditList = retrievedatafromdatabase();//该方法从数据库返回记录

```
 foreach (Entity obj in auditList)
                {

                    obj.CultSpecificRevisedData = "NULL";
                    obj.CultSpecificPublishedData = "NULL";

                    if (obj.RevisedData != null && obj.RevisedData != "NULL")
                        obj.CultSpecificRevisedData = ConvertToProfileSpecificFormat(Convert.ToDecimal(obj.RevisedData), DecimalSeparator);
                    if (obj.PublishedData != null && obj.PublishedData != "NULL")
                        obj.CultSpecificPublishedData = ConvertToProfileSpecificFormat(Convert.ToDecimal(obj.PublishedData), DecimalSeparator);

                    var yearPart = obj.CalendarYear;
                    var monthPart = string.Empty;
                    var frequencyName = GetEnglishFrequencyBame(frequencyTypeMasId);
                    if (frequencyName == FrequencyType.Monthly)
                    {
                        monthPart = new DateTime(obj.CalendarYear, GetMonthNumber(obj.Month), 1).ToString("MMM");
                        obj.CultSpecificPeriod = monthPart + "-" + yearPart.ToString();
                    }
                    if (frequencyName == FrequencyType.Quarterly)
                    {
                      UserMessage = obj.QuarterName;
                        obj.CultSpecificPeriod = UserMessage + "-" + yearPart.ToString();
                    }
                    else if (frequencyName == FrequencyType.BiAnnually)
                    {
                        UserMessage = obj.SemesterName;
                        obj.CultSpecificPeriod = UserMessage + "-" + yearPart.ToString();
                    }
                    else
                    {
                        obj.CultSpecificPeriod = yearPart.ToString();
                    }

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:51:53.853

分页是您的第一选择。

但是您应该考虑以下几点：您真的需要 30K 记录吗？用户通常不会浏览前 10\20 条记录，尝试只返回前 100\1000 条记录，并提供良好的搜索和过滤功能，从而科学地限制结果集。

我遇到了同样的问题，并且我知道用户不需要那么多结果，他们需要一种从这些结果中找到他们想要的东西的好方法。

当然，这可以与分页结合在一起。

如果分页不适合您的解决方案（由于某种原因）您不同意所说的，请发布一些代码，我们将尝试帮助进行性能优化。请记住，有时这是一项非常艰巨的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:40:32.590

我会回应关于不需要 30K 记录的评论。研究表明，人类无法真正在视觉上处理超过 2000 个列表项，如果您显示的数量超过此范围，那么您实际上是在向用户撒谎，鼓励他们对数据产生*错误*或*不完整*的感觉。

但是如果你坚持这样做，你要做的就是遍历手工设置的记录，使用 Response.Write() 为每一行手动编写 html 并发送到浏览器，然后使用计数器调用Response.Flush() 时不时地。如果您的数据层也支持从数据库中流式传输数据（即：通过数据读取器）而不是将整个结果集加载到 RAM 中，则可以加分。

# apache-poi - Apache POI Excel 单元格格式无法在工作表中超过 32748 个单元格

> ID：14618081
> 
> 赞同：-1
> 
> 时间：2013-01-31T03:44:26.227
> 
> 标签：apache-poi

我有一个要求，我需要为给定期间的所有交易生成报告，并且我需要相应地应用单元格格式。在这种情况下，在工作表中创建 32748 个单元格后，单元格格式不适用于日期。这似乎是 API 中的错误，如果有人已经遇到此问题并找到任何修复，请提供一些输入。

作为参考，这里是示例代码：

```
public class TestFormat {

public static void main(String args[]){
    try {
    HSSFWorkbook wb = new HSSFWorkbook();
    HSSFSheet sheet = wb.createSheet("Excel Sheet");

    HSSFDataFormat format = wb.createDataFormat();

    for(int i = 1; i<65535;i++ ) {

            HSSFRow row = sheet.createRow(i);
            HSSFCell cell = row.createCell(1);
            HSSFCellStyle style = wb.createCellStyle();
            cell.setCellValue((Date) new Date());
            style.setDataFormat(format.getFormat("MM/dd/yyyy HH:mm:ss"));
            cell.setCellStyle(style);

    }
    FileOutputStream fileOut;

        fileOut = new FileOutputStream("c:\\test\\excelFile.xls");
         wb.write(fileOut);
            fileOut.close();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    System.out.println("Data is saved in excel file.");
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:40:43.857

您正在循环*内创建单元格样式。*不！

Excel 对文件格式中允许的单元格样式数有限制。您需要做的是将单元格样式的创建/设置移到循环之外，因此它只创建一次，应该没问题

您的代码的核心部分将如下所示：

```
HSSFDataFormat format = wb.createDataFormat();
HSSFCellStyle style = wb.createCellStyle();
cell.setCellValue((Date) new Date());
style.setDataFormat(format.getFormat("MM/dd/yyyy HH:mm:ss"));

for(int i = 1; i<65535;i++ ) {
        HSSFRow row = sheet.createRow(i);
        HSSFCell cell = row.createCell(1);
        cell.setCellStyle(style);
} 
```

# git - 如何使用 Git 根据同一分支中的先前提交向当前分支添加新提交？

> ID：14618086
> 
> 赞同：1
> 
> 时间：2013-01-31T03:45:05.373
> 
> 标签：git, revision-history

假设我的 git 日志中有 2 次提交。现在我想回到第一次提交并修改一些文件并将其添加为第三次提交。当我输入时，`git log`我希望在同一个分支上有 3 个提交。`git reset --soft firstcommit` 然后再次提交会擦除我的第二次提交。我如何实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:06:04.837

假设您现在处于第三次提交状态。

你可以用`git cherry-pick secondcommit`它来取回它。

日志将是

```
firstcommit -> thirdcommit -> secondcommit 
```

如果您希望日志如下所示：

```
firstcommit -> secondcommit -> thridcommit 
```

你可以做 ：

```
git reset --hard secondcommit
git cherry-pick thridcommit 
```

# ios - iOS 原生网络应用和音频流

> ID：14618087
> 
> 赞同：0
> 
> 时间：2013-01-31T03:45:18.690
> 
> 标签：ios, html, audio, web, streaming

我目前正在构建一个具有实时流功能的 Web 应用程序（我为此使用 HTML5 音频对象）。我想提供将这个网站作为 iOS 设备上的本机 Web 应用程序运行的能力。问题是，当您最小化本机应用程序时，音频流会停止，重新打开“应用程序”也会创建页面重新加载。有没有人找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:01:14.863

你可以使用[appMobi](http://dev.appmobi.com/)。您必须添加一些逻辑来在 Audio 对象和 appMobi.player 对象之间切换，但如果您只想让音频在本机应用程序的后台播放，这应该很简单。

# subdomain - 如何在 sitefinity 5.x 中实现子域

> ID：14618089
> 
> 赞同：0
> 
> 时间：2013-01-31T03:45:54.183
> 
> 标签：subdomain, sitefinity

在sitefinity官方网站上，只有sitefinity 3.x的指南，太旧了。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:52:44.927

我不知道其他人是否知道这一点，但这是我的解决方案：

Sitefinity 5.3 IIS8 IIS 重写模块

在您的 web.config 中，将以下内容添加到 system.webServer 节点的末尾：

```
<rewrite>
  <rules>
    <!-- Redirect your page group to the base -->
    <rule name="Page Group Redirect" enabled="true">
      <match url="^sitefinitypagegroupname/(.*)" ignoreCase="true" />
      <action type="Redirect" url="/{R:1}" />
    </rule>
    <!-- Rewrite your sub domain to the page group -->
    <rule name="Page Group Rewrite" enabled="true">
      <match url="(.*)" ignoreCase="true" />
      <conditions logicalGrouping="MatchAll">
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        <add input="{URL}" negate="true" pattern="\.axd$" />
        <add input="{URL}" negate="true" pattern="^/sitefinity(.*)" />
        <add input="{HTTP_HOST}" pattern="^(www\.)?subdomain\.domain\.com$" ignoreCase="true" />
      </conditions>
      <action type="Rewrite" url="sitefinitypagegroupname/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

# eclipse - 如何将 Eclipse 插件打包为目录以便可以添加其他文件？

> ID：14618096
> 
> 赞同：0
> 
> 时间：2013-01-31T03:46:09.513
> 
> 标签：eclipse, eclipse-plugin, eclipse-pde

我需要能够在 JAR 插件中包含其他文件，并且我很难找到描述如何执行此操作的文档。当查看 Eclipse/plugins 目录时，它看起来好像有一些插件这样做，这意味着它是可能的。

当我右键单击我的插件项目并选择导出时，它只允许我导出为 JAR。我正在寻找一种能够将插件打包到一个文件夹中的方法，并且该文件夹中有 JAR 插件和其他文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:46:14.403

有几种方法可以创建解压插件。

1.  *在选项选项*卡上导出插件（导出 > PDE > 可部署插件和片段）时，关闭将*插件打包为单独的 JAR 档案*。

2.  在*插件*选项卡上的功能编辑器中，选择您要解压的插件并选中*安装后解压插件存档*。

请注意，Eclipse 中的一些插件未打包以避免嵌套 jar（jarred 插件内的 jarred 库）。PDE UI 和 PDE Build 都支持嵌套的 jar，因此不必将它们解包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:01:14.573

我最终发现最简单的方法就是使用 Maven 并创建一个发行版，我可以在其中根据需要布局目录结构。我使用父 pom 首先构建 eclipse-plugin，然后将该工件用作在 eclipse-plugin 模块之后执行的打包模块的依赖项。我看到了一些使用 Tycho 创建产品的示例，这些产品允许您将内容添加到根安装，特别是来自这里的 itp04 [http://git.eclipse.org/c/tycho/org.eclipse.tycho-demo.git/tree/](http://git.eclipse.org/c/tycho/org.eclipse.tycho-demo.git/tree/)然而，这对于我需要的东西来说似乎有点过分了。

# c# - C#图表辅助轴类型最小值和区间问题

> ID：14618099
> 
> 赞同：0
> 
> 时间：2013-01-31T03:46:32.233
> 
> 标签：c#, charts, intervals

我得到了一个系列的图表，并且 Y 设置为次要以在右侧而不是左侧的轴上显示其值。在此之前，我更改了最小值`Chart1.ChartAreas[0].AxisY.Minimum = 100;`并且它起作用了，在我添加此行之后：`g_series.YAxisType = AxisType.Secondary;`它没有，它在我的表单上始终保持 0（它仍然是 100，但在图表上它从 0 开始）。

此外，这有效`chart1.ChartAreas[0].AxisY.Interval = 10;`，并且在我更改辅助类型后它没有。如果我对此进行评论`g_series.YAxisType = AxisType.Secondary;`，则 Yaxis 和最小值的所有间隔都可以正常工作，但我需要在右侧显示轴上的这些值，并且唯一已知的方法是在辅助上更改 iths 类型。

我如何通过工作最小值和间隔保持它们正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:28:49.367

我不会将主要属性设置为具有次要属性，而是直接转到 Y2。例如：

```
ChartAreas[0].AxisY2.Interval = 1; 
```

您可以隐藏或根本不声明主轴。

# python - 如何让python返回一个列表？

> ID：14618100
> 
> 赞同：0
> 
> 时间：2013-01-31T03:46:32.793
> 
> 标签：python, regex, list, return

所以我正在编写一个 python 脚本来清理无用和不需要的字符的文件名，但是我遇到了一个问题，我似乎无法弄清楚如何返回一个包含所有项目的列表或字典我迭代了一遍。它只返回我迭代的第一个项目。这是我第一次用 python 写东西。任何帮助将不胜感激。我主要是为了学习而写这个。clean_title() 方法是我想要返回的方法。我把它叫做底部。

```
import os
import re

# here is how all my video files will look after this
# show name Season 1 Episode 1

filename = os.listdir("E:/Videos/TV/tv-show")

def clean_title(filename):
    name = {}
    for title in filename:
        n_title = title.split('.')
        index = [i for i, item in enumerate(n_title) if re.search('\w\d{2}\w\d{2}', item)]
        if len(index) > 0:
            name = {'title':n_title[0:index[0]], 'ep_info':n_title[index[0]]}
            return name

def get_show_name(filename):
    pass

def update_title():
    #show_title = get_show_name + ' ' + get_episode_info
    #print show_title

if __name__=="__main__":
    test = clean_title(filename)
    print test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:58:56.913

你有两个明显的问题。

第一个是您从循环内部返回，因此当您点击`return`语句时，您只会处理循环的一次迭代。这就是为什么看起来您获得了第一个迭代值，而实际上您从未达到其他迭代。

您可以通过将`return`语句突出到正确的级别来解决此问题。

第二个问题是您将结果从`clean_title()`. `name`您只在变量中存储了一个已清理的标题。每次通过循环，您都会用该迭代中的新标题覆盖先前计算的标题。即使您解决了`return`问题，当前版本也会返回您计算的*最后一个*标题。

您可以在列表或字典中累积结果。如果是列表，则使用 初始化`name = []`并添加新标题`name.append(title_goes_here)`。如果您想在字典中累积结果，请使用 初始化`name = {}`并添加新标题`name[index_goes_here] = title_goes_here`。请注意，在字典的情况下，您需要有一些逻辑键值（通常是整数或字符串），稍后您将使用它们来恢复该值。

最后，我必须补充一点，我发现您对复数对象和动作使用单数大小写 ( `filename`, `title`, `clean_title`) 会造成混淆。我会调用文件名列表`filenames`，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:50:50.627

你只看了第一个之后就回来`title`了`filename`

```
def clean_title(filename):
    # ...
    for title in filename:
        # ...
        if len(index) > 0:
            # ...
            return name 
```

我建议`clean_title`只取一个文件名，并循环遍历每个文件，如下所示：

```
filenames = os.listdir("E:/Videos/TV/tv-show")
for filename in filenames:
    new_filename = clean_title(filename)
    # Rename file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T03:51:06.173

循环将在返回时立即退出。我怀疑你想要做的是

```
def clean_title(filename):
    names = []
    for title in filename:
        n_title = title.split('.')
        index = [i for i, item in enumerate(n_title) if re.search('\w\d{2}\w\d{2}', item)]
        if len(index) > 0:
            names.append({'title':n_title[0:index[0]], 'ep_info':n_title[index[0]]})
    return names 
```

这将返回一个带有两个键`list`的对象，每个键。`dict``title``ep_info`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T03:51:07.743

1.  您的缩进`return name`是错误的，将其拉出与`name={}`语句处于同一水平
2.  `title`不应该是一个字符串它应该是一个变量`for loop`

它目前处于 if 条件下，因此一旦条件为真，处理完条件返回中的语句后，将执行

```
def clean_title(filename):
    name_list = []
    for title in filename:
        n_title = title.split('.')
        index = [i for i, item in enumerate(n_title) if re.search('\w\d{2}\w\d{2}', item)]
        if len(index) > 0:
            # you should store the dictionary in the lists, as all the dictionaries will contain the common keys of `ep_info`
            name_list.append({title:n_title[0:index[0]], 'ep_info':n_title[index[0]]})
    return name_list # look here 
```

# c++ - 在opencv的文件夹中写入图像序列

> ID：14618108
> 
> 赞同：6
> 
> 时间：2013-01-31T03:47:28.147
> 
> 标签：c++, visual-studio-2010, opencv

在 C++ 中使用 VS 2010 并尝试将其放入 for 循环中

```
String filename = "cropped_" + (ct+1);
imwrite(filename + ".jpg", img_cropped); 
```

这些是出来的文件名：

```
ropped_.jpg
opped_.jpg
pped_.jpg 
```

我该怎么做？以及如何将它们放在与源代码相同目录的文件夹中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T06:57:19.310

您可以使用`std::stringstream`构建顺序文件名：

首先包含`sstream`来自 C++ 标准库的头文件。

```
#include<sstream>

using namespace std; 
```

然后在您的代码中，您可以执行以下操作：

```
stringstream ss;

string name = "cropped_";
string type = ".jpg";

ss<<name<<(ct + 1)<<type;

string filename = ss.str();
ss.str("");

imwrite(filename, img_cropped); 
```

`mkdir`要创建新文件夹，您可以在`system`函数中使用 windows 的命令`stdlib.h`：

```
 string folderName = "cropped";
 string folderCreateCommand = "mkdir " + folderName;

 system(folderCreateCommand.c_str());

 ss<<folderName<<"/"<<name<<(ct + 1)<<type;

 string fullPath = ss.str();
 ss.str("");

 imwrite(fullPath, img_cropped); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T07:04:22.913

```
 for (int ct = 0; ct < img_SIZE ; ct++){
    char filename[100];
    char f_id[3];       //store int to char*
    strcpy(filename, "cropped_"); 
    itoa(ct, f_id, 10);
    strcat(filename, f_id);
    strcat(filename, ".jpg");

    imwrite(filename, img_cropped); } 
```

顺便说一句，这是@sgar91 答案的更长版本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T04:54:41.897

试试这个：

```
char file_name[100];
sprintf(file_name, "cropped%d.jpg", ct + 1);
imwrite(file_name, img_cropped); 
```

它们应该只进入您运行代码的目录，否则，您必须像这样手动指定：

```
sprintf(file_name, "C:\path\to\source\code\cropped%d.jpg", ct + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-30T12:50:17.680

由于这是谷歌搜索的第一个结果，我将使用 std::filesystem (C++17) 添加我的答案

```
std::filesystem::path root = std::filesystem::current_path();
std::filesystem::create_directories(root / "my_images");

for (int num_image = 0; num_image < 10; num_image++){

    // Perform some operations....
    cv::Mat im_out;
    std::stringstream filename;
    filename << "my_images"<< "/" << "image" << num_image << ".bmp";
    cv::imwrite(filename.str(), im_out);
} 
```

# java - Java swing中的产品标签打印应用

> ID：14618109
> 
> 赞同：2
> 
> 时间：2013-01-31T03:47:34.390
> 
> 标签：java, swing, label, jlabel, jtextcomponent

我正在从事一个个人项目以学习 Java。基本上它是一个用于打印产品标签的摇摆应用程序。我计划每张纸有 12 个标签。

```
---------------------------------
|               |               |
---------------------------------
|               |               |
---------------------------------
|               |               |
---------------------------------
|               |               |
--------------------------------- 
```

我设计了菜单栏和工具栏。我想知道我应该为标签使用什么摆动组件？每个标签将包含相同的产品信息，并将包含一个递增 1 的序列号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:56:33.420

> 它只是显示，但我将有一个向导窗口，用户可以在其中进行字体或字体颜色更改，这些更改将反映在所有标签上。

考虑[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，它可以渲染一个可调整的矩形网格。您的向导/编辑器可以更新单个[*单元格渲染器*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)，它知道行号和列号，并且该类提供[*打印*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#printing)支持。

# redirect - URL 重写问题 - 规则可用作重定向，但不能用作重写

> ID：14618111
> 
> 赞同：4
> 
> 时间：2013-01-31T03:47:54.933
> 
> 标签：redirect, url-rewriting, rewrite, cdn

我一直在试图弄清楚为什么这条规则可以作为重定向而不是重写。直到几个小时后，我才想到将其作为重定向尝试，令我惊讶的是它起作用了。

你能解释一下为什么第一个有效而第二个无效吗？

**重定向**

```
<rule name="Rewrite to images.cdn.com" enabled="true">
<match url="^images/(.+)$" />
<action type="Redirect" url="http://images.cdn.com/{R:1}"/>
</rule> 
```

**改写**

```
<rule name="Rewrite to images.cdn.com" enabled="true">
<match url="^images/(.+)$" />
<action type="Rewrite" url="http://images.cdn.com/{R:1}"/>
</rule> 
```

**失败的请求日志信息** 替换和重写都是相同的，这意味着它应该可以工作，因为您可以将该 url 复制到浏览器中并且它可以工作。

```
<EventData>
  <Data Name="ContextId">{00000000-0000-0000-6C00-0080000000F8}</Data>
  <Data Name="Substitution">http://39e403d64323deb9e704-7fcaccb4b31037dfec2feb2a157f55bc.r52.cf1.rackcdn.com/images/updateprogress.gif</Data>
  <Data Name="RewriteURL">http://39e403d64323deb9e704-7fcaccb4b31037dfec2feb2a157f55bc.r52.cf1.rackcdn.com/images/updateprogress.gif</Data>
  <Data Name="AppendQueryString">false</Data>
  <Data Name="LogRewrittenURL">false</Data>
 </EventData> 
```

谢谢！

ASP.NET/IIS 7.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:01:13.293

答案可以在这篇文章中找到：[Rewrite Subfolder to Subdomain in web.config](https://stackoverflow.com/q/14269149/699400)

基本上缺少一个模块，需要设置代理设置。对@cheesmacfly 的许多赞誉

# wpf - 在 Xaml 中定义类的正确方法是什么？

> ID：14618114
> 
> 赞同：0
> 
> 时间：2013-01-31T03:48:18.590
> 
> 标签：wpf, wpf-controls

'一个新手，我正在使用框架 3.5 玩 Windows Presentation Foundation，我刚开始使用故事板和动画。我尝试创建 Canvas 实例并使用 Story Board + 动画实例为画布设置动画，这很有趣。现在我想想出一些有组织的方式，我可以很容易地定义许多动画并使用它们（在代码中定义对象实例太乏味了）。

我听说过使用 XAML 来执行此操作，并且我在 CodeProject.com 中看到了一些示例，但它们似乎都在使用其中的情节提要定义 UserControl。这对我来说似乎太难了，我想做的只是将故事板标签和故事板标签内的动画标签定义为一个类，是否可以这样做？我的意思是，是否可以在 XAML 中定义一个类（不是用户控件），然后在我想使用该特定动画时调用它的变量，如“StoryBoard1”或“StoryBoard2”？我应该如何实施它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:01:20.123

如果您想要可重用`Storyboards`的动画，您可以在中定义etc。`Window.Resources`

这些被称为`Resources`不`Classes`

例子：

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="233" Width="405" Name="UI" >
    <Window.Resources>
        <Storyboard x:Key="MyAnimation" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation From="0" To="1" Duration="0:0:5" />
        </Storyboard>
    </Window.Resources>

    <Grid>
        <Button Content="Animate" Name="button1" Opacity="0" >
            <Button.Style>
                <Style TargetType="{x:Type Button}" >
                    <Style.Triggers>
                        <Trigger Property="IsPressed" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard Storyboard="{StaticResource MyAnimation}" />
                            </Trigger.EnterActions>
                        </Trigger>
                    </Style.Triggers>
                </Style>
             </Button.Style>
        </Button>
    </Grid>
</Window> 
```

要从后面的代码访问这些资源，您可以使用`FindResource`

```
namespace WpfApplication8
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var storyboard = (Storyboard)FindResource("MyAnimation");
        }
    }
} 
```

# linq - LINQ：构建查询以查询多个选项

> ID：14618119
> 
> 赞同：0
> 
> 时间：2013-01-31T03:48:39.537
> 
> 标签：linq, entity-framework, dynamic

我在动态 LINQ 文件 (dynamic.cs) 的帮助下使用以下方法构建动态查询：

```
 Dim qs As New List(Of KeyValuePair(Of String, Object))

    qs.Add(New KeyValuePair(Of String, Object)("Price >= @", 10))
    qs.Add(New KeyValuePair(Of String, Object)("Price <= @", 50))
    qs.Add(New KeyValuePair(Of String, Object)("GoLive=  @", False))
    qs.Add(New KeyValuePair(Of String, Object)("Format = @", "DVD"))
    qs.Add(New KeyValuePair(Of String, Object)("Format = @", "BLR"))

    Dim products = From p In data.Products
                   Select p

    For Each q In qs
        products = products.Where(q.Key, q.Value)
    Next
    Dim results = products.ToList 
```

这可以满足您的期望，但看看我是如何在“格式”字段中同时查找“DVD”和“BLR”的？这会查询两个选项，而不是任何一个。

有没有办法使用上述查询构建方法以某种方式查询任一选项，或者最好像这样组合“格式”字段：

```
 qs.Add(New KeyValuePair(Of String, Object)("Format = @ OR Format = ", both options here)) 
```

# android - Android：SlidingMenu onCreateOptionsMenu 未在 Fragment 中调用

> ID：14618124
> 
> 赞同：0
> 
> 时间：2013-01-31T03:49:01.227
> 
> 标签：android, menu, fragment, slidingmenu

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

目前，我尝试在 SlidingMenu 库的 ColorFragment 中添加新的菜单项。

但是，该方法`onCreateOptionsMenu`没有被调用。

是bug？你能帮忙测试添加菜单到测试类'ColorFragment'吗？

安卓版本：4.1.1

设备：平板电脑 7.0

```
public class ColorFragment extends Fragment {

private int mColorRes = -1;

public ColorFragment() {
    this(R.color.white);
}

public ColorFragment(int colorRes) {
    mColorRes = colorRes;
    setRetainInstance(true);

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
}
 ..
 ..
 ..
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {

    super.onCreateOptionsMenu(menu, inflater);

    inflater.inflate(R.menu.menu_cust, menu);
}   

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T05:39:59.277

试一试..希望它会有所帮助。

在 onCreateView() 中设置

```
setHasOptionsMenu(true); 
```

并更改您的 onCreateOptionsMenu

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater menuInflater) {
    menuInflater.inflate(R.menu.menu, menu);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-17T08:58:19.163

我知道它已经很老了，但它可能对其他人有帮助。

除了：（在 onCreate/onCreateView 中）

```
setHasOptionsMenu(true); 
```

您还应该为活动设置操作栏（在片段的 onActivityCreated() 方法中是一个好地方）：

```
//Kotlin
    (requireActivity() as AppCompatActivity).setSupportActionBar(mToolbar)
//Java
    ((AppCompatActivity) requireActivity()).setSupportActionBar(mToolbar) 
```

# android - 需要同时按下按钮时发出声音

> ID：14618127
> 
> 赞同：0
> 
> 时间：2013-01-31T03:49:05.513
> 
> 标签：android, performance, android-intent

1）这是我的主要活动

```
package com.art.drumdrum;

import android.app.Activity;
import android.media.AudioManager;
import android.media.SoundPool;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
SoundPool soundPool = null;
int kickId = 0;
int snareId = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button kick = (Button) findViewById(R.id.kick);
    Button snare = (Button) findViewById(R.id.snare);
    kick.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction()==MotionEvent.ACTION_DOWN)
                soundPool.play(kickId, 1, 1, 0, 0, 1);
            return false;
        }
    });
    snare.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent Event) {
            if (Event.getAction()==MotionEvent.ACTION_DOWN)
                soundPool.play(snareId, 1, 1, 0, 0, 1);
            return false;
        }
    });

}

protected void onResume() {
    super.onResume();
    if (soundPool == null) {
        soundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
        kickId = soundPool.load(this, R.raw.kick, 1);
        snareId = soundPool.load(this, R.raw.snare, 1);
    }
}

protected void onPause() {
    super.onPause();
    if (soundPool != null) {
        soundPool.release();
        soundPool = null;
    }
}

} 
```

2）这是我的主要 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_below="@+id/button9"
    android:layout_marginLeft="20dp"
    android:text="@string/button" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button2"
    android:layout_marginTop="86dp"
    android:layout_toLeftOf="@+id/button3"
    android:text="@string/button" />

<Button
    android:id="@+id/kick"
    style="@style/style"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/kick" />

<Button
    android:id="@+id/snare"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginTop="17dp"
    android:layout_toRightOf="@+id/kick"
    android:text="@string/snare" />

<Button
    android:id="@+id/button9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_below="@+id/snare"
    android:text="@string/button" />

<Button
    android:id="@+id/button7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button5"
    android:layout_below="@+id/button2"
    android:layout_marginLeft="24dp"
    android:text="@string/button" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/snare"
    android:layout_alignParentTop="true"
    android:layout_marginTop="29dp"
    android:text="@string/button" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button5"
    android:layout_alignBottom="@+id/button5"
    android:layout_marginLeft="33dp"
    android:layout_toRightOf="@+id/snare"
    android:text="@string/button" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignLeft="@+id/button2"
    android:text="@string/button" />

</RelativeLayout> 
```

2）这是我的 xml 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.art.drumdrum"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10" 
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.art.drumdrum.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

4) 声音有效，但我需要知道如何处理并制作它，这样我就可以一次按下 2 个按钮并让它们都输出声音，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:14:18.443

我看不出代码有什么问题。您确定您的测试设备支持多点触控吗？如果我没记错的话，多点触控是在 Froyo 中引入的。

编辑：再看一遍后，我想我发现了问题。编辑您的代码，使这一行

```
if (Event.getAction()==MotionEvent.ACTION_DOWN) 
```

会读

```
if (Event.getAction()==MotionEvent.ACTION_DOWN || Event.getAction()==MotionEvent.ACTION_POINTER_DOWN) 
```

# iphone - 在 trigger iO 中使用不同的设备

> ID：14618131
> 
> 赞同：2
> 
> 时间：2013-01-31T03:49:26.740
> 
> 标签：iphone, html, trigger.io

我正在使用 triggerIO 框架创建应用程序。我想根据 iPhone 和 iPad 的屏幕分辨率更改我的 html 页面。现在我有条件地加载了两个不同的 css。但我想知道它是更清洁的方法吗？**或者**有没有更好更有效的方法来做到这一点？**或者**在触发器 IO 中是否有任何可用的内置框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:47:09.553

这取决于您的应用程序设计，但我建议使用 CSS 中的 ems 等相对单位并在 body 元素上设置 font-size。

在我们的应用程序中，我们执行类似`$('body').css('font-size', (window.innerWidth * 16 / 320) + 'px')`. 16 是默认字体大小，320 是我们的应用程序最初设计的以 px 为单位的宽度。

因此，例如，如果某个元素的宽度为 100px，我将宽度设置为：6.25em。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:27:52.500

一般来说，我们建议创建适应当前屏幕的界面，而不是根据设备检测在不同的 CSS 文件之间切换。

如果您想支持 Android，这更重要，因为那里有大量不同的屏幕尺寸和形状。

你可以看看[Twitter Bootstrap](http://twitter.github.com/bootstrap/)的响应式设计框架，或者[320 及更高版本](http://stuffandnonsense.co.uk/projects/320andup/)，它往往更轻一些。

# asp.net-mvc - 如何从不在数据库表中的模型创建验证字段？使用 MVC4

> ID：14618137
> 
> 赞同：1
> 
> 时间：2013-01-31T03:49:51.663
> 
> 标签：asp.net-mvc, database, validation, model

我正在尝试为数据库表中没有的模型创建验证字段。但我收到此错误“列名 'editPassword' 无效。”</p>

这是我的模型代码……</p>

```
private string _editPassword = "0";
        [LocalizedDisplayName("UserPassword", NameResourceType = typeof(Languages.Names))]
        [StringLength(12, MinimumLength = 6, ErrorMessageResourceName = "MinimumStringLength", ErrorMessageResourceType = typeof(Languages.Validations))]
        public virtual string editPassword { get { return _editPassword; } set { _editPassword = value; } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:54:20.987

您最好创建一个单独的视图模型并使用[Automapper](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)在数据库实体和视图模型之间进行映射，而不是尝试直接在视图中使用数据库实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:50:30.373

尝试将`[NotMapped]`属性添加到您的属性。

# java - 运行 JAR 时出错

> ID：14618141
> 
> 赞同：0
> 
> 时间：2013-01-31T03:50:04.760
> 
> 标签：java, executable-jar

```
Exception in thread "main" java.lang.NullPointerException
        at javax.swing.ImageIcon.<init>(Unknown Source)
        at MainMenu.<init>(MainMenu.java:15)
        at Main.main(Main.java:6) 
```

我收到此错误，这显然与我的 ImageIcon 来源不明有关。我认为这与我使用的 .png 给出的路径有关，但我不知道该怎么做。是否有一个特殊的位置需要放置图像才能将其用作 JAR？

如果有帮助，这是我的 ImageIcon 代码。

```
ImageIcon titleIcon = new ImageIcon(getClass().getResource("mainBackground.png")); 
```

# mysql - Rails：使用伪相关性搜索

> ID：14618151
> 
> 赞同：0
> 
> 时间：2013-01-31T03:51:01.500
> 
> 标签：mysql, ruby-on-rails-3, full-text-search

我正在尝试编写一种搜索方法来搜索 an 的全文`Article`并按该全文中搜索词的出现次数对结果进行排序。像这样的东西：

```
def search
  term = params[:term]
  @articles = Article.where("body like ?", "%#{term}%")
  @articles.each do |a|
    b = a.body.count(term)
  end
  @articles = @articles.order("#{b} desc").limit(10).pluck(:name)
  render json: @articles, b
end 
```

以上显然是行不通的，它只是为了解释这个概念。任何想法，将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:23:33.027

你最好使用全文搜索库来实现这一点。

如果您使用 Postgres 作为您的数据库，您可以使用[pg_search](https://github.com/Casecommons/pg_search)为您的模型添加范围，从而利用 Postgres 内置的全文搜索功能。

或者，如果您不想添加任何外部依赖项，您可以使用[Acts as Indexed](https://github.com/dougal/acts_as_indexed)将排名的全文结果添加到您的应用程序。

可以在[Ruby Toolbox](https://www.ruby-toolbox.com/categories/rails_search)找到一个相当全面的各种选项列表。

披露：我是acts_as_indexed 的作者。

# powershell - powershell中的“in”状态

> ID：14618154
> 
> 赞同：0
> 
> 时间：2013-01-31T03:51:19.583
> 
> 标签：powershell, powershell-2.0

Powershell 中是否有任何类似于 sql. 如果可用，请让我知道如何使用它的语法。我的情况是我需要获取一个 id 列表并在另一个查询中使用它。

寻找在下面做

```
//Below line i veried returns values more than 1
$desktopGroupIds = Get-BrokerDesktopGroup -AdminAddress 'IPAddressgoeshere' |  select uid

Get-BrokerPrivateDesktop  -AdminAddress 'IPAddressgoeshere' | Where { $desktopGroupIds.contains($_.DesktopGroupUid) } | select DesktopGroupUid 
```

第二个查询不返回值。如果我一一传递值，我相信第二个查询可以给出结果。我想使用可能是“-in”运算符（如果可用）或使上述包含工作。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:26:11.490

`-in`是 PowerShell 3.0 中添加的反向`-contains`运算符（因此 dasari.. 必须更新才能使用它）。With contains 你可以使用`$array -contains -element`，而在 PS3.0 中你可以使用`$element -in $array`

你好像有错别字`$desktopGroupIdS -c contains $_ .....`。尝试这个：

```
//Below line i veried returns values more than 1
$desktopGroupIds = @(Get-BrokerDesktopGroup -AdminAddress 'IPAddressgoeshere' |  select uid)

Get-BrokerPrivateDesktop  -AdminAddress 'IPAddressgoeshere' | Where { $desktopGroupIds -contains $_.DesktopGroupUid } | select DesktopGroupUid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T06:07:22.603

Powershell 的“in”关键字通常用于在集合对象中单独选择项目。

例如：

```
foreach($item in $collection)
{
    #...Process some code...
} 
```

如果您想像在解决方案中一样使用“包含”，您可以通过将第一行放在 @() 中来将 $desktopGroupIds 中的所有内容转换为数组：

例如

```
//Below line i veried returns values more than 1
$desktopGroupIds = @(Get-BrokerDesktopGroup -AdminAddress 'IPAddressgoeshere' |  select uid)
Get-BrokerPrivateDesktop  -AdminAddress 'IPAddressgoeshere' | Where { $desktopGroupIds.Contains($_.DesktopGroupUid) } | select DesktopGroupUid 
```

**编辑**

您可能会尝试的另一个解决方案是使用 -match 运算符：

例如：

```
$desktopGroupIds = @(Get-BrokerDesktopGroup -AdminAddress 'IPAddressgoeshere' |  select uid)
Get-BrokerPrivateDesktop  -AdminAddress 'IPAddressgoeshere' | Where { $desktopGroupIds -match $_.DesktopGroupUid } | select DesktopGroupUid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:18:26.200

修复问题的更新代码行如下所示

```
Get-BrokerPrivateDesktop  -AdminAddress $regionAddress | Where { $desktopGroupIds  -Contains $_.DesktopGroupUid } | select DesktopGroupUid 
```

注意上面“-Contains”的用法

# iphone - RobbieHanson 的 XMPPFramework didReceiveMessage 未调用

> ID：14618155
> 
> 赞同：2
> 
> 时间：2013-01-31T03:51:25.230
> 
> 标签：iphone, ios, xmpp, xmppframework

我正在 iOS 上开发并使用 Robbie Hanson XMPPFramework。永远不会调用方法 didReceiveMessage。

我确实成功连接，并发送了“存在”（通过使用 NSLog 确认。这可以通过 Openfire 管理面板确认，该面板将用户显示为绿色并已连接。

```
 XMPPPresence* presence = [XMPPPresence presence]; // type="available" is implicit
[[self xmppStream] sendElement:presence]; 
```

此外，我收到了 didReceiveIQ 电话。我不知道什么是智商，我需要处理它吗？

最重要的是我是否让 didReceiveMessage 被调用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-05T21:08:05.577

要记住的一件事是，在身份验证后，您需要发送出席信息，否则您将不会收到任何消息。

阅读以下博客文章：[使用 XMPPFramework 构建完整的 iOS 消息传递应用程序 - 教程第 1 部分](https://www.erlang-solutions.com/blog/build-a-complete-ios-messaging-app-using-xmppframework-tutorial-part-1.html)

> 成功连接后，您将不会收到任何`<message/>`信息，直到您可以发送之前的状态。`<presence/>`

你的代码中应该有这样的东西：

```
func xmppStreamDidAuthenticate(_ sender: XMPPStream!) {
    self.xmppStream.send(XMPPPresence())
    print("Stream: Authenticated")
} 
```

如果您查看我发布的教程的第二部分，您将了解如何执行身份验证以及所有内容：

[使用 XMPPFramework 构建完整的 iOS 消息应用程序 - 第 2 部分](https://www.erlang-solutions.com/blog/build-a-complete-ios-messaging-app-using-xmppframework-part-2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:22:20.323

只有当您的客户端收到这样的消息节时，才会调用 didReceiveMessage 委托：

```
<message xmlns="jabber:client" from="juliet@capulet.net" to="romeo@capulet.net" id="21" type="chat"><body>This is a sample message.</body></message> 
```

如果其他 XMPP 客户端向您发送聊天消息，则会收到此节。如果您的 didReceiveIQ 已经被调用，那么我们可以假设我们已经正确设置了我们的代表。

# php - CakePHP：值未保存到 Db

> ID：14618159
> 
> 赞同：2
> 
> 时间：2013-01-31T03:52:06.490
> 
> 标签：php, mysql, cakephp

我正在尝试在我自己的应用程序中使用 Andras Kende 的[CakePHP 购物车](https://github.com/andraskende/cakephp-shopping-cart)，但我不明白为什么以下更改不起作用。

在订单流程结束时，在贝宝和一切之后，当用户即将完成交易时，如果用户是会员/已登录，我想使用`$this->Auth->user('id')`获取他们的身份验证 ID 并将其附加到订单这即将完成。对于我剩下的生命，我无法让它发挥作用。这就是我正在做的事情：

我有以下课程：

```
 public function review() {
    $shop = $this->Session->read('Shop');       
    if(empty($shop)) {
        $this->redirect('/shop/cart');
    }
    if ($this->request->is('post')) {
        $this->loadModel('Order');
        $this->Order->set($this->request->data);
        if($this->Order->validates()) {
            $order = $shop;
            $order['Order']['user_id'] = (int)$this->Auth->user('id');
            $order['Order']['status'] = 1;

            var_dump($order);

            if($shop['Order']['order_type'] == 'paypal') {
                $paypal = $this->Paypal->ConfirmPayment($order['Order']['total']);
                $ack = strtoupper($paypal['ACK']);
                if($ack == 'SUCCESS' || $ack == 'SUCCESSWITHWARNING') {
                    $order['Order']['status'] = 2;
                }
                $order['Order']['authorization'] = $paypal['ACK'];
            }
            $save = $this->Order->saveAll($order, array('validate' => 'first'));
            if($save) {
                $this->set(compact('shop'));
                App::uses('CakeEmail', 'Network/Email');
                $email = new CakeEmail();
                $email->from($this->requestAction('/settings/getSettingValue/ADMIN_EMAIL'))
                        ->cc($this->requestAction('/settings/getSettingValue/ADMIN_EMAIL'))
                        ->to($shop['Order']['email'])
                        ->subject('Shop Order')
                        ->emailFormat('text')
                        ->viewVars(array('shop' => $shop))
                        ->send();
                $this->redirect(array('action' => 'success'));
            } else {
                $errors = $this->Order->invalidFields();
                $this->set(compact('errors'));
            }
        }           
    }
    if(($shop['Order']['order_type'] == 'paypal') && !empty($shop['Paypal']['Details'])) {
        $shop['Order']['first_name'] = $shop['Paypal']['Details']['FIRSTNAME'];
        $shop['Order']['last_name'] = $shop['Paypal']['Details']['LASTNAME'];
        $shop['Order']['email'] = $shop['Paypal']['Details']['EMAIL'];
        $shop['Order']['phone'] = '888-888-8888';
        $shop['Order']['billing_address'] = $shop['Paypal']['Details']['SHIPTOSTREET'];
        $shop['Order']['billing_address2'] = '';
        $shop['Order']['billing_city'] = $shop['Paypal']['Details']['SHIPTOCITY'];
        $shop['Order']['billing_zip'] = $shop['Paypal']['Details']['SHIPTOZIP'];
        $shop['Order']['billing_state'] = $shop['Paypal']['Details']['SHIPTOSTATE'];
        $shop['Order']['billing_country'] = $shop['Paypal']['Details']['SHIPTOCOUNTRYNAME'];
        $shop['Order']['shipping_address'] = $shop['Paypal']['Details']['SHIPTOSTREET'];
        $shop['Order']['shipping_address2'] = '';
        $shop['Order']['shipping_city'] = $shop['Paypal']['Details']['SHIPTOCITY'];
        $shop['Order']['shipping_zip'] = $shop['Paypal']['Details']['SHIPTOZIP'];
        $shop['Order']['shipping_state'] = $shop['Paypal']['Details']['SHIPTOSTATE'];
        $shop['Order']['shipping_country'] = $shop['Paypal']['Details']['SHIPTOCOUNTRYNAME'];
        $shop['Order']['order_type'] = 'paypal';
        $this->Session->write('Shop.Order', $shop['Order']);
    }
    $this->set(compact('shop'));
} 
```

在第 11 行，我`$order`通过执行以下操作将登录的用户 ID 添加到数组中：

```
$order['Order']['user_id'] = (int)$this->Auth->user('id'); 
```

此时，如果我执行 a `var_dump($order)`，我将看到当前登录用户的任何用户 ID，在本例中为`18`。所以我知道我分配正确。

```
 ["user_id"]=> int(18) 
```

到这里为止一切都很好。但是，当我检查我的数据库时，该`user_id`字段为 NULL。`18`没有被保存为添加到数组中。我做了很多事情，我看不出我做错了什么。请帮忙！

我的`orders`表结构如下所示：

![在此处输入图像描述](../Images/33ace34b4199a522a706a4a593269eaa.png)

其中一个订单条目如下所示：

![在此处输入图像描述](../Images/00fb54007517cfe0d5a4b8a36bf5808b.png)

我的想法用完了，我不知道该怎么办......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:57:29.133

经过一番挖掘后，我决定将 Db 字段更改为，`user`而不是`user_id`它工作。为什么不服用`user_id`。我的用户模型`$hasMany = array('Order'=>array('foreignKey' => 'user'))`。使用`user_id`. 我只是无法弄清楚为什么它不允许它。到目前为止，修复工作！

# python - 如何在python中拆分数字和字符

> ID：14618160
> 
> 赞同：0
> 
> 时间：2013-01-31T03:52:07.817
> 
> 标签：python, regex

我有一些字符串，比如`'english100'`and `'math50'`。如何将它们转换为字典，例如：

`{'english': 100, 'math': 50}.`

我试过了：

`re.split(r'(?=\d)'`

但是，这是行不通的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:56:55.737

如果你的字符串那么简单，我可能会做这样的事情：

```
d = dict()
d.update(re.findall(r'([a-zA-Z]+)(\d+)',"english100")) 
```

或另一种方式（如果您在同一字符串中多次出现）：

```
>>> dict(x.groups() for x in re.finditer(r'([a-zA-Z]+)(\d+)',"english100spanish24"))
{'spanish': '24', 'english': '100'} 
```

# php - 使用数据库中的信息创建预定义的选择框

> ID：14618168
> 
> 赞同：0
> 
> 时间：2013-01-31T03:53:38.797
> 
> 标签：php, sql

我有两个数组都来自我的 SQL 服务器

示例：阵列 1 (45, 46, 47, 48) 阵列 2 (46, 47)

我的代码如下：

```
<select>
   <?
      while($array1 = $t->fetch_object()) /*Get from DB*/ {
        foreach($array2 as $a2){
   ?>
       <option <?=$array1 == $a2 ? 'value="'.$array1'" select="selected"' : 'value="'.$array1.'"'?>><?=$array1?><option>
<? } }?>
</select> 
```

这将产生多次，因为它循环 array2 两次。出于某种原因，如果没有多个选项，我无法弄清楚如何正确运行它。（也许我整天都在工作）但是任何帮助都将不胜感激。

编辑：所以而不是输出是：

45 46 选定 47 选定 48 45 选定 46 选定 47 48

它是： 45 46 选择 47 选择 48

由于foreach，上述循环两次，我不知道如何让它只循环一次。嗯，如果我有 $i = 1 并且它在下一次计数时停止。

为了澄清我正在使用这个[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)下拉菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:34:49.890

我可能不太了解您的问题，但我从代码中看到的。您正在尝试从 array2 中进行默认选择。我这样做的方法是：

```
<select>
<?php
//Here comes the php

//Variables
//---------------
$array2 = array(46,47);
//---------------

//Looping into the fecthed data
//------------------
while($array1 = $t->fetch_object()) /*Get from DB*/ {
    //Initalization of looping variables
    $boolFound = false;
    $i = 0;

    //looking into aray2 for default values
    while($boolFound == false && $i < count($array2)) //While a default is not a match 
    {                                                 //or the end of array2
        if($array2[$i] == $array1) //Is this a default value?
        {
             $boolFound = true; //Yes, we stop the loop
        }
        else
        {
            $i++; //No, we continu until the end of array2
        }
    }

    //Either we have a default or not we output the option
    echo('<option value="'.$array1.'" ');

    //if it is a default, we output "selected"
    if($boolFound)
    {
        echo('select="selected"');  
    }

    //Then the value itself, and we close the html
    echo('>'.$array1.'</option>');
}
//------END of data looping------------
//END of PHP    
?> 
</select> 
```

这个问题。您可能有超过 1 个“默认”选项（已选中）。

希望这有帮助。

安托万

（我对 php 也有点生疏，不确定 "$array1 = $t->fetch_object()" 部分。）

# javascript - 使用 javascript 的正则表达式

> ID：14618170
> 
> 赞同：9
> 
> 时间：2013-01-31T03:53:56.897
> 
> 标签：javascript, regex

我在java脚本中有以下代码

```
 var regexp = /\$[A-Z]+[0-9]+/g;
    for (var i = 0; i < 6; i++) {
        if (regexp.test("$A1")) {
            console.log("Matched");
        }
        else {
            console.log("Unmatched");
        }
    } 
```

请在您的浏览器控制台上运行它。它将打印替代**Matched**和**Unmatched**。谁能说出它的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T03:58:35.057

调用`test`字符串后，`lastIndex`指针将在匹配后设置。

```
Before:
$A1
^

After:
$A1
   ^ 
```

当它到达结尾时，指针将被重置到字符串的开头。

你可以试试'$A1$A1'，结果是

```
Matched
Matched
Unmatched
... 
```

此行为在 15.10.6.2, [ECMAScript Language Spec](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)中定义。

> 步骤 11\. 如果 global 为真，a。`lastIndex`使用参数“ ”、e 和 true调用 R 的 [[Put]] 内部方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:46:24.363

我已将您的代码缩小为一个简单的示例：

```
var re = /a/g, // global expression to test for the occurrence of 'a'
s = 'aa';     // a string with multiple 'a'

> re.test(s)
  true
> re.lastIndex
  1
> re.test(s)
  true
> re.lastIndex
  2
> re.test(s)
  false
> re.lastIndex
  0 
```

**这只发生在全局正则表达式中！**

来自[MDN 文档`.test()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)：

> 与`exec`（或与其结合）一样，`test`在同一个全局正则表达式实例上多次调用将超过前一个匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:03:23.930

这是因为您使用全局标志`g`，每次调用`.test`时，`.lastIndex`正则表达式对象的属性都会更新。

如果您不使用该`g`标志，那么您可能会看到不同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T04:04:33.163

第一行中的“g”不正确，您不是在此处执行替换，而是匹配，删除它，您将获得预期的行为。

var 正则表达式 = /\$[AZ]+[0-9]+/g; 应该是： var regexp = /\$[AZ]+[0-9]+/

# android - 安卓地图 v 2

> ID：14618172
> 
> 赞同：0
> 
> 时间：2013-01-31T03:54:05.590
> 
> 标签：android, google-maps-android-api-2

我正在尝试将 Android 地图版本 2 集成到我的应用程序中。我从这个链接提供的例子开始

[https://developers.google.com/maps/documentation/android/intro#sample_code](https://developers.google.com/maps/documentation/android/intro#sample_code)

我收到授权失败异常。

以下文字来自 logcat

```
01-30 22:51:25.953: D/GestureDetector(5418): Change mBiggerTouchSlopSquare from 400 to 729
01-30 22:51:26.003: D/dalvikvm(5418): GC_CONCURRENT freed 793K, 19% free 3832K/4707K, paused 2ms+2ms
01-30 22:51:26.023: I/global(5418): call createSocket() return a new socket.
01-30 22:51:26.063: D/libEGL(5418): loaded /system/lib/egl/libGLES_android.so
01-30 22:51:26.083: D/libEGL(5418): loaded /system/lib/egl/libEGL_adreno200.so
01-30 22:51:26.083: D/libEGL(5418): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
01-30 22:51:26.083: D/libEGL(5418): loaded /system/lib/egl/libGLESv2_adreno200.so
01-30 22:51:26.103: I/Adreno200-EGLSUB(5418): <ConfigWindowMatch:2087>: Format RGBA_8888.
01-30 22:51:26.123: D/memalloc(5418): ion: Mapped buffer base:0x53a22000 size:3768320 offset:0 fd:93
01-30 22:51:26.143: D/OpenGLRenderer(5418): Enabling debug mode 0
01-30 22:51:26.173: I/Adreno200-EGLSUB(5418): <ConfigWindowMatch:2098>: Format RGBX_8888.
01-30 22:51:26.203: D/memalloc(5418): ion: Mapped buffer base:0x543d7000 size:3391488 offset:0 fd:97
01-30 22:51:26.243: D/memalloc(5418): ion: Mapped buffer base:0x54c96000 size:3768320 offset:0 fd:100
01-30 22:51:26.293: D/memalloc(5418): ion: Mapped buffer base:0x55156000 size:3768320 offset:0 fd:103
01-30 22:51:26.323: D/dalvikvm(5418): GC_FOR_ALLOC freed 1359K, 31% free 4020K/5795K, paused 17ms
****01-30 22:51:26.333: E/Google Maps Android API(5418): Authorization failure.****
01-30 22:51:26.373: D/memalloc(5418): ion: Mapped buffer base:0x55560000 size:3391488 offset:0 fd:106
01-30 22:51:26.393: D/memalloc(5418): ion: Mapped buffer base:0x558ac000 size:3391488 offset:0 fd:109 
```

有人可以向我提供有关如何解决此问题的信息吗？如果这是一个微不足道的问题，我很抱歉，我是 Android 应用程序开发的新手。

Android 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.googlemapsdemo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
  android:glEsVersion="0x00020000"
  android:required="true"/>

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.googlemapsdemo.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="my api key"/>
    </application>
     <permission
          android:name="com.googlemapsdemo.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>
        <uses-permission android:name="com.googlemapsdemo.permission.MAPS_RECEIVE"/>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:05:22.693

您必须按照以下步骤获取地图：

1.您应该`API key` 通过在`Command prompt`更改目录中`Bin folder of your Jdk` 使用此命令来获得一个，并在那里使用此命令`keytool -v -list -keystore C:\Users\Ponmani\.android\debug.keystore`。通过使用此您将获得一个`MD5 fingerprint`.

2.通过使用这个`MD5 fingerprint`。你必须`signup for getting API key`。

3.确保您正在使用`Google API's`设备

4.`Manifest file`在设置权限`"INTERNET"`和`GOOGLE MAPS`。如果您正确地遵循了这些，则意味着 map 肯定会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:29:07.027

创建一个 API 密钥。将它放在您的清单文件中 -

```
<meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="YOUR_API_KEY_HERE" /> 
```

请阅读部分 -从链接 **获取 API 密钥-** [https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2](https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T03:58:00.280

这表明您的清单中没有有效的 Maps V2 API 密钥，或者 API 密钥未配置正确的 APK 签名密钥指纹或 Android 应用程序包名称。[文档](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key)中介绍了获取 API 密钥。

# java - 晦涩的 Java 导入语法？

> ID：14618173
> 
> 赞同：6
> 
> 时间：2013-01-31T03:54:08.347
> 
> 标签：java, syntax, import

在查看Sun 的 JVM 实现的[一些源代码](http://www.docjar.com/html/api/sun/awt/ComponentFactory.java.html)时，我遇到了晦涩难懂的`import`语法。

```
import java.awt; 
```

从源代码看，这个`import`语句似乎是在导入整个`java.awt`包，但标准是使用包通配符：`import java.awt.*;`. 但是，`import`in 语句的语法`ComponentFactory`无效，不能用 JDK 或 Eclipse 编译。

为什么 Java 开发人员会使用这种不可编译的语法，而不是正确的`.*`语法？（也许开发人员使用支持这种语法的不同编译器？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T04:15:29.743

查看了最新的[JLS (http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.1)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.1)，它说：

> 示例 7.5.1-3。不导入子包
> 
> 请注意，导入语句**不能**导入子包，只能导入类型。
> 
> 例如，尝试导入 java.util 然后使用名称 util.Random 来引用类型 java.util.Random 是行不通的：
> 
> ```
> import java.util;   // incorrect: compile-time error
> class Test { util.Random generator; } 
> ```

语言设计者没有理由使用不同版本的 Java。他们可能有一些用于编码和测试的秘密工具，他们可能还会测试一些新功能（但我不认为这是一个新功能，因为新功能不应该在没有任何描述的情况下像这样发布）

我相信是 HTML 格式自动消除了`.*`导入声明的所有部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:06:08.443

根据Oracle 发布的[一些文档：](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)

> 注意：另一种不太常见的导入形式允许您导入封闭类的公共嵌套类。例如，如果 graphics.Rectangle 类包含有用的嵌套类，例如 Rectangle.DoubleWide 和 Rectangle.Square，则可以使用以下两个语句导入 Rectangle 及其嵌套类。
> 
> ```
> import graphics.Rectangle;
> import graphics.Rectangle.*; 
> ```
> 
> 请注意，第二个 import 语句不会导入 Rectangle。

但是，在尝试 import 之后`java.awt`，我意识到这不是有效的语法，因为它只是一个包而不是一个类。这让我相信他们发布的代码只是省略了`.*`大部分导入后的代码，以使代码看起来更干净。无论如何，您不能像这样编写导入。

# if-statement - 批处理 If Else 语句关闭窗口

> ID：14618175
> 
> 赞同：1
> 
> 时间：2013-01-31T03:54:14.887
> 
> 标签：if-statement, batch-file

我已经设置了一个自定义批处理文件来安装游戏服务器。但问题是当您提供响应时它会关闭。它使用多个 IF 语句。

```
set /P input6=Would you like a custom loadout (Y/N):
if %input6%==Y (
echo ---------------------------
echo Default
echo Survival
echo PvP
echo ---------------------------
set /P input7=Which one:
if %input7%==Default (
perl db_utility.pl [] ["DZ_Patrol_Pack_EP1",[[],[]],[[],[]]]
goto package
)
if %input7%==Survival (
perl db_utility.pl [["ItemMap","ItemCompass","ItemMatchbox","FoodCanBakedBeans","ItemKnife","FoodCanBakedBeans"],["ItemTent","ItemBandage","ItemBandage"]] ["DZ_Patrol_Pack_EP1",[[],[]],[[],[]]] 
goto package
)
if %input7%==PvP (
perl db_utility.pl [["Mk_48_DZ","NVGoggles","Binocular_Vector","M9SD","ItemGPS","ItemToolbox","ItemCompass","FoodCanBakedBeans","ItemMap","ItemWatch"],[["100Rnd_762x51_M240",47],"ItemPainkiller","ItemBandage","15Rnd_9x19_M9SD","100Rnd_762x51_M240","ItemBandage","ItemBandage","15Rnd_9x19_M9SD","15Rnd_9x19_M9SD","15Rnd_9x19_M9SD","ItemMorphine"]] ["DZ_Backpack_EP1",[[],[]],[[],[]]]
goto package
)
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:29:16.610

当我运行你的批处理文件时，我收到了这个错误：

```
( was unexpected at this time. 
```

当我减少左括号和右括号之间的脚本行数时，脚本就可以工作了。所以我认为你需要重组批处理文件，并避免嵌套`if`结构。尝试这样的事情：

```
set /P input6=Would you like a custom loadout (Y/N): 
echo input6 is %input6%
if not "%input6%"=="Y" goto done

  echo input6 is %input6%

  echo ---------------------------
  echo Default
  echo Survival
  echo PvP
  echo ---------------------------
  set /P input7=Which one:
  if %input7%==Default (
    perl db_utility.pl [] ["DZ_Patrol_Pack_EP1",[[],[]],[[],[]]]
    goto package
  )
  if %input7%==Survival (
  perl db_utility.pl [["ItemMap","ItemCompass","ItemMatchbox","FoodCanBakedBeans","ItemKnife","FoodCanBakedBeans"],["ItemTent","ItemBandage","ItemBandage"]] ["DZ_Patrol_Pack_EP1",[[],[]],[[],[]]] 
  goto package
  )
  if %input7%==PvP (
    perl db_utility.pl [["Mk_48_DZ","NVGoggles","Binocular_Vector","M9SD","ItemGPS","ItemToolbox","ItemCompass","FoodCanBakedBeans","ItemMap","ItemWatch"],[["100Rnd_762x51_M240",47],"ItemPainkiller","ItemBandage","15Rnd_9x19_M9SD","100Rnd_762x51_M240","ItemBandage","ItemBandage","15Rnd_9x19_M9SD","15Rnd_9x19_M9SD","15Rnd_9x19_M9SD","ItemMorphine"]] ["DZ_Backpack_EP1",[[],[]],[[],[]]]
    goto package
  )
:done 
```

# angularjs - 如何将一个“模型”映射到两个字段？

> ID：14618182
> 
> 赞同：4
> 
> 时间：2013-01-31T03:54:36.057
> 
> 标签：angularjs

我有一个具有“高度”属性的模型，我希望允许用户将其编辑为两个单独的字段，“英尺”和“英寸”，但让它们映射到以英寸为单位的单个属性“高度”。

表单如下所示：

![](../Images/c6efc96930bf7fdc78c401dfe21f6a45.png)

在这些字段和单个“高度”属性之间创建双向绑定的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:56:19.833

我稍微修改了@Mark 的例子，去掉了$watch，我认为它是多余的

HTML

```
<input type="number" ng-model="calc.feet">
<input type="number" ng-model="calc.inches">
<br>{{calc.height()}} 
```

控制器

```
$scope.calc = {
  feet: 2,
  inches: 5,
  height: function () { return this.feet * 12 + this.inches }
}; 
```

[Plunkr](http://plnkr.co/edit/O9X8ErViWyx3nMaOYUFu)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T04:05:00.933

HTML：

```
<input type="number" ng-model="feet">
<input type="number" ng-model="inches">
<br>{{height}} 
```

控制器：

```
$scope.feet = 2;
$scope.inches = 5;
$scope.$watch('feet * 12 + inches', function(value){
  $scope.height = value;
}) 
```

[PLNKR](http://plnkr.co/edit/rmoSkSJAcujIZrCoja67?p=preview)

# java - 这是循环引用吗？

> ID：14618187
> 
> 赞同：2
> 
> 时间：2013-01-31T03:55:24.090
> 
> 标签：java, generics, javafx-2

请认为这是一种理解 api 的尝试，而不是质疑架构师的判断。

[JavaFX 事件](http://docs.oracle.com/javafx/2/api/javafx/event/Event.html)

参考 的构造函数`javafx.event.Event`，我需要传递一个`EventType`of`Event`来实例化一个`Event`. 我读对了吗？如果是这样，这不是循环引用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:06:13.253

不，不是，因为泛型参数是*在编译时*解析的。在运行时，`Event`除了一个`EventType`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:09:00.830

不是你的意思。

EventType 实例可以引用其他 EventType 实例，但不能引用 Event 实例。看一下EventType的构造函数和方法，密切关注方法/构造函数参数和返回类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:09:49.807

这不是周期性的，但确实需要大量思考才能理解。

从您提供的 javadoc 中：

```
Event(EventType<? extends Event> eventType) 
Construct a new Event with the specified event type. 
```

应将其`EventType<? extends Event>`读作“适用于特定类型事件的 EventType”。

这是另一个 SO 答案，可以更好地解释`<? extends Class>`：[https ://stackoverflow.com/a/3009779/463196](https://stackoverflow.com/a/3009779/463196)

例如，假设我们有一个`FooEvent`that extends `Event`。然后我们将有一个`EventType`与`FooEvent`.

此外，如果您查看 JavaDoc for [`EventType`](http://docs.oracle.com/javafx/2/api/javafx/event/EventType.html)，它会说：

```
This class represents a specific event type associated with an Event. 
```

# jquery - jQuery AJAX 函数抛出未知错误

> ID：14618188
> 
> 赞同：1
> 
> 时间：2013-01-31T03:55:30.173
> 
> 标签：jquery

我在 chrome 和 firefox 中运行的 jQueryMobile 页面中具有以下功能。同样的函数在 iOS 模拟器的 PhoneGap + jQueryMobile 应用程序中运行没有错误，但由于某种原因，当它在浏览器中运行时，错误函数被调用。

`textStatus`退货`null`和`errorThrown`退货`"error"`

```
$.ajax({type : "GET", 
        url : "https://itunes.apple.com/lookup?id=356541460&entity=album", 
        data : {get_param : "results"}, 
        dataType : "json", 
        error : function(jqXHR, textStatus, errorThrown) {alert(errorThrown); alert(textStatus);}, 
        success : function(data) {
            $.each(data, function(index, element) {
                $.each(this, function(index, element) {
                    if (element.wrapperType === "collection") {
                        $("#albums-list").append("<li><a id='albums-a-" + element.collectionId + "' href='#album-details'><img src='" + element.artworkUrl100 + "' />" + element.collectionName + "</a></li>"); 
                        $("#albums-a-" + element.collectionId).bind('click', function(index) {
                            Albums.AlbumID = element.collectionId;
                        });
                    }
                });
            });
            $("#albums-list").listview("refresh");
        }
}); 
```

这可能是一个错误吗？这不是为在浏览器中运行而设计的吗？

是否有另一个我可以使用的函数不会产生这个结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:06:42.607

如果这是一个跨域请求（可能），您需要在 URL 中添加 jsonp 的回调：

```
url : "https://itunes.apple.com/lookup?id=356541460&entity=album&callback=?", 
```

# java - 关于搜索页面流向jsp到服务器页面的设计模式

> ID：14618192
> 
> 赞同：-1
> 
> 时间：2013-01-31T03:55:51.593
> 
> 标签：java

我有 CRM 工具。我需要使用默认过滤器（如网站、联系人和地址）从搜索页面搜索客户，这是搜索结果并将其放在 JSP 中的用户端的最佳方式。任何人都可以解释请求流程和最佳设计模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:23:48.380

您需要为此创建`ConditionalExpression`和创建`FilterExpression`。这是一段代码，您将在其中得到一个想法。

这是[文档](http://msdn.microsoft.com/en-us/library/bb928435.aspx)

```
 ConditionExpression condition = new ConditionExpression();  //to check whether an email already exist
        condition.AttributeName = "emailaddress1"; 
        condition.Operator = ConditionOperator.Equal;
        condition.Values = new string[] { "any email address"};

        FilterExpression filter = new FilterExpression();
        filter.FilterOperator = LogicalOperator.And;
        filter.Conditions = new ConditionExpression[] { condition };

        QueryExpression query = new QueryExpression();   //to specify which entity
        query.EntityName = EntityName.contact.ToString();
        query.ColumnSet = new AllColumns();
        query.Criteria = filter;    //here applying the filter

        BusinessEntityCollection app = service.RetrieveMultiple(query); 
```

# javascript - 使用 Gmaps4rails gem 调用 replaceMarkers 后 Gmaps.map.callback 不起作用？

> ID：14618197
> 
> 赞同：2
> 
> 时间：2013-01-31T03:56:35.993
> 
> 标签：javascript, ruby-on-rails, google-maps, ruby-on-rails-3.2, gmaps4rails

我正在使用 Gmaps4rails 并且已经成功地进行了相当多的工作，但我有点难过。可能是由于我的新手JS技能。我一直在尝试在各种问题中遵循示例，但我不确定我哪里出错了。

当我的地图加载 Gmaps.map.callback 工作正常时，地图已加载，我单击一个标记并触发侦听器事件。

在我看来：

```
<% content_for :scripts do %>
<script type="text/javascript">
Gmaps.map.callback = function(){
  for(var i = 0; i < Gmaps.map.markers.length; i++){
    marker = Gmaps.map.markers[i];
    google.maps.event.addListener(marker.serviceObject, 'click', 
      (function(marker){
        return function(){      
      alert(marker.id);
        }
      })(marker)
   )
 }
}
</script>
<% end %> 
```

这将使用控制器中创建的 json 中的标记 id 发出警报。

然后我有一个搜索功能，可以更新地图的位置并替换标记。这是在 ajax 调用中调用的。所以在控制器 .js.erb 我这样做：

```
Gmaps.map.replaceMarkers(<%= raw @json %>); 
```

一切似乎都很好，我的地图加载了新的标记，但偶数侦听器在标记上不起作用。

所以我的问题是，如何让这些新标记拥有点击事件的监听器。我需要以某种方式重置回调吗？我认为它必须在地图加载之前运行，但在这种情况下，我不会重新加载地图，只是替换标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:45:17.287

提取您的方法以重用它：

```
Gmaps.map.listen_to_markers = function(markers){
  for(var i = 0; i < markers.length; i++){
    marker = markers[i];
    google.maps.event.addListener(marker.serviceObject, 'click', 
      (function(marker){
        return function(){      
          alert(marker.id);
        }
      })(marker)
   )
 }
}

Gmaps.map.callback = function(){
  Gmaps.map.listen_to_markers(Gmaps.map.markers);
} 
```

每当您更换标记时：

```
var new_markers = <%= raw @json %>;
Gmaps.map.replaceMarkers(new_markers);
Gmaps.map.listen_to_markers(new_markers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T07:57:03.883

丢弃“content_for”、“Gmaps.map.callback”等。保留`buildMap(<%=raw @hash.to_json %>)`在您的视图文件中。

在您的咖啡脚本文件中，在代码行之后插入您自己的工作`handler.fitMapToBounds();`

例如，点击导航栏的某一项，触发特定标记的点击功能，打开信息窗口。

在 .html.erb 文件中，

```
a href="javascript:void(0)" class="mapEventName" id="<%= i %>"><%= event.event_name %> 
```

在 .js.coffee 文件中，

```
$(".mapEventName").on "click", ->
  i = $(this).attr("id")
  marker = markers[i]
  alert(marker.getServiceObject().getPosition().toString())
  google.maps.event.trigger marker.getServiceObject(), "click"

> " 
```

# php - phpQuery 不工作

> ID：14618200
> 
> 赞同：0
> 
> 时间：2013-01-31T03:56:50.233
> 
> 标签：php, phpquery

嗨朋友们，我已经从他们的网站下载了 phpQuery 插件。但是每当我尝试运行 phpQuery demo.php 文件时，我都会收到以下错误：-

错误：-

```
Fatal error: Uncaught exception 'Exception' with message
    "Old PHP4 DOM XML extension   detected. phpQuery won't work until this extension is enabled."
in   C:\wamp\www\phpQuery\phpQuery\phpQuery.php:483
Stack trace:
    #0 C:\wamp\www\phpQuery\phpQuery\phpQuery.php(271): phpQuery::createDocumentWrapper('<div/>',  NULL)
    #1 C:\wamp\www\phpQuery\demo.php(11): phpQuery::newDocument('<div/>')
    #2 {main} thrown in C:\wamp\www\phpQuery\phpQuery\phpQuery.php on line 483 
```

我的 php 版本是 5.2.9-1。我需要什么额外的扩展？谁能帮我解决这个错误？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:07:27.797

此错误消息具有误导性。如果您[查看 phpQuery 的源代码](http://code.google.com/p/phpquery/source/browse/branches/dev/phpQuery/phpQuery.php?r=382#481)，您会发现它确实应该说相反的意思：“在*禁用*此扩展之前，phpQuery 将无法工作”。（或者至少，这就是源代码让我相信的，因为当你*禁用*扩展时功能停止存在，而不是当你*启用*它们时。）

PHP 网站上此扩展的参考不再可用，但[archive.org 仍然有它的副本](http://web.archive.org/web/20111006043413/http://us2.php.net/manual/en/domxml.installation.php)。这个页面告诉我们 PHP4 DOM 扩展的 DLL 名称是`php_domxml.dll`，所以这是你需要删除的。

在您的 php.ini 文件中，您需要注释它所说的行`extension=php_domxml.dll`。您可以通过在该行前加上分号来使其成为注释。

这一切都假设您没有弄错您的 PHP 版本。我建议您检查 a`<?php phpinfo(); ?>`以验证您是否运行了您期望的 PHP 版本，如果您还没有这样做的话。我发现 PHP5 安装仍然使用 PHP4 扩展名令人惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:02:37.607

phpQuery 试图检测您的系统上是否有 PHP 4 [DOM XML 扩展](http://pecl.php.net/package/domxml)，还是[取代它的](https://stackoverflow.com/questions/610124/domxml-php4-php5)[PHP 5 DOM 扩展](http://www.php.net/dom)。

不幸的是，它在对你撒谎。您可以[在此处查看相关的 phpQuery 代码](http://code.google.com/p/phpquery/source/browse/branches/dev/phpQuery/phpQuery.php?r=382#482)：

```
if (function_exists('domxml_open_mem'))
    throw new Exception("Old PHP4 DOM XML extension detected. phpQuery won't work until this extension is enabled."); 
```

它的意思是“禁用”，而不是“启用”。您必须在配置中禁用“DOM XML”扩展。

这个问题被归档为[phpQuery issue #224](http://code.google.com/p/phpquery/issues/detail?id=224)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-31T04:02:14.757

我建议您**阅读错误消息**。您有旧版本的 DOM XML。

您可以在[官方文档](http://www.php.net/dom)中获得有关新版本所需的所有信息- 但它是默认安装的，因此我建议您将 WAMP 更新到最新版本。

# android - 查找扬声器是否正在使用中？

> ID：14618202
> 
> 赞同：1
> 
> 时间：2013-01-31T03:57:05.943
> 
> 标签：android, audio, speaker

在 Android 中，是否可以在任何给定时间查找扬声器是否正在使用，如果是，则哪个应用正在使用它。

对不起，我不知道如何表达这个问题。我想要做的是找出是否有任何应用程序（音乐播放器）正在使用扬声器或耳机播放音乐文件。另外，如果可能的话，找出哪个应用程序正在使用它。

对不起，不知道如何表达这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:18:31.677

我需要这个来查找设备上是否正在播放音乐。我在 AudioManager 下找到了 [isMusicActive()](http://developer.android.com/reference/android/media/AudioManager.html#isMusicActive%28%29)函数。它仅在实际播放音乐时返回 true，即使播放器处于前台并暂停时也返回 false。到目前为止，它对我有用。

# django - 如何将 django-debug-toolbar 用于 django-tastypie？

> ID：14618203
> 
> 赞同：25
> 
> 时间：2013-01-31T03:57:22.070
> 
> 标签：django, debugging, tastypie

django-debug-toolbar 需要它的输出是 html，但是 django-tastypie 的默认输出格式是 json。

我尝试发送`http://localhost/api/v1/resource/?format=html`，但它说`Sorry, not implemented yet. Please append "?format=json" to your URL`

尽管此文档将 html 列为有效选项之一，但它在`TODO list`.
[http://django-tastypie.readthedocs.org/en/latest/serialization.html#to-html](http://django-tastypie.readthedocs.org/en/latest/serialization.html#to-html)

如何使用调试工具栏来调试 sweetpie api 调用？
（例如，我想查看为 api 调用运行了多少 sql 查询……等等）

也许我可以从 django 视图中调用 api，但是如何调用呢？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-10-08T13:49:55.580

这是我为类似目的编写的一个中间件，它将 json 包装在 HTML 中以启用调试工具栏并漂亮地打印它。此外，它支持二进制数据。我没有使用美味的派，但我认为它也应该适用。

```
# settings-dev.py
from django.http import HttpResponse
import json   

MIDDLEWARE_CLASSES += (
    'debug_toolbar.middleware.DebugToolbarMiddleware',
    'NonHtmlDebugToolbarMiddleware',
)

class NonHtmlDebugToolbarMiddleware(object):
    """
    The Django Debug Toolbar usually only works for views that return HTML.
    This middleware wraps any non-HTML response in HTML if the request
    has a 'debug' query parameter (e.g. http://localhost/foo?debug)
    Special handling for json (pretty printing) and
    binary data (only show data length)
    """

    @staticmethod
    def process_response(request, response):
        if request.GET.get('debug') == '':
            if response['Content-Type'] == 'application/octet-stream':
                new_content = '<html><body>Binary Data, ' \
                    'Length: {}</body></html>'.format(len(response.content))
                response = HttpResponse(new_content)
            elif response['Content-Type'] != 'text/html':
                content = response.content
                try:
                    json_ = json.loads(content)
                    content = json.dumps(json_, sort_keys=True, indent=2)
                except ValueError:
                    pass
                response = HttpResponse('<html><body><pre>{}'
                                        '</pre></body></html>'.format(content))

        return response 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-04T21:59:01.157

Django 调试工具栏的中间件实际上包含代码，以防止它被激活以用于非 html 类型的响应，例如 TastyPie 返回的响应。我过去所做的是创建一些将 json 响应转换为 HTML 的中间件，因此工具栏将被激活，我可以计算查询等...这有点 hack，但它可以完成工作并且很容易打开/关闭。

```
from django.conf import settings

class JsonAsHTML(object):
    '''
    View a JSON response in your browser as HTML
    Useful for viewing stats using Django Debug Toolbar 

    This middleware should be place AFTER Django Debug Toolbar middleware   
    '''

    def process_response(self, request, response):

        #not for production or production like environment 
        if not settings.DEBUG:
            return response

        #do nothing for actual ajax requests
        if request.is_ajax():
            return response

        #only do something if this is a json response
        if "application/json" in response['Content-Type'].lower():
            title = "JSON as HTML Middleware for: %s" % request.get_full_path()
            response.content = "<html><head><title>%s</title></head><body>%s</body></html>" % (title, response.content)
            response['Content-Type'] = 'text/html'
        return response 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T04:57:46.770

~~恐怕这是不可能的。~~请参阅已接受的答案以获取可行的解决方案。

这就是您的方法不起作用的原因：

工具栏没有启动，因为答案[不在 HTML 中](http://django-debug-toolbar.readthedocs.org/en/1.2.2/tips.html#the-toolbar-isn-t-displayed)。工具栏的中间件不能“解析”所有其他格式以包含工具栏。

不过，您可以添加自己的工具来显示 SQL 查询。看看这个简单的片段：[http](http://djangosnippets.org/snippets/161/) ://djangosnippets.org/snippets/161/或者您可以为此使用第三方应用程序，例如[django-snippetscream](http://pypi.python.org/pypi/django-snippetscream)。

例如，您可以检查是否`DEBUG is True`将此信息添加到 Tastypie 返回的“元”对象。

此外，请查看控制台 (runserver) 中的 SQL 日志记录。一些有用的资源：[http ://dabapps.com/blog/logging-sql-queries-django-13/](http://dabapps.com/blog/logging-sql-queries-django-13/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-25T14:01:59.993

Django 1.10 引入了“新型中间件”：[https ://docs.djangoproject.com/en/2.0/releases/1.10/#new-style-middleware](https://docs.djangoproject.com/en/2.0/releases/1.10/#new-style-middleware)

这是一个新风格的中间件版本：

```
import json

from django.http import HttpResponse

class NonHtmlDebugToolbarMiddleware:
    """
    The Django Debug Toolbar usually only works for views that return HTML.
    This middleware wraps any non-HTML response in HTML if the request
    has a 'debug' query parameter (e.g. http://localhost/foo?debug)
    Special handling for json (pretty printing) and
    binary data (only show data length)
    """
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        response = self.get_response(request)

        if response['Content-Type'] == 'application/json':
            content = response.content
            try:
                json_ = json.loads(content)
                content = json.dumps(json_, sort_keys=True, indent=2)
            except ValueError:
                pass

            response = HttpResponse('<html><body><pre>{}'
                                    '</pre></body></html>'.format(content),
                                    content_type='text/html')

        return response 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T05:08:54.600

试试[https://github.com/django-debug-toolbar/django-debug-toolbar/pull/253](https://github.com/django-debug-toolbar/django-debug-toolbar/pull/253)

```
pip install git+https://github.com/caktus/django-debug-toolbar@ajax-panel#egg=django-debug-toolbar 
```

这将允许调试工具栏在调用页面上显示有关请求的信息。

或者，如果你想要一个 HTML 渲染器并且你的项目不太远，我强烈推荐**django-rest-framework**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-01T13:59:08.467

```
@html_decorator
def test(request):

    view = resolve("/api/v1/albumimage/like/user/%d/" % 2 )

    accept =  request.META.get("HTTP_ACCEPT")
    accept += ",application/json"
    request.META["HTTP_ACCEPT"] = accept   
    res = view.func(request, **view.kwargs)

    return HttpResponse(res._container)

def html_decorator(func):
    """                                                                                                                                                                                                                                                                       
    wrap it inside html                                                                                                                                                                                                                                                       
    """

    def _decorated(*args, ** kwargs):
        response = func(*args, **kwargs)

        wrapped = ("<html><body>",
                   response.content,
                   "</body></html>")

        return HttpResponse(wrapped)

    return _decorated 
```

这就是我解决它的方法。
好的，这不是自动的，但现在可以了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-18T15:34:41.577

[我通过从http://djangosnippets.org/snippets/344/](http://djangosnippets.org/snippets/344/)重建 django 片段来解决这个问题

```
"""
Database and request debug info for Tastypie.

Based of idea from http://djangosnippets.org/snippets/344/

# settings.py:
DEBUG=True
DEBUG_SQL=True

MIDDLEWARE_CLASSES = (
    'YOURPATH.SQLLogMiddleware.SQLLogMiddleware',
    'django.middleware.transaction.TransactionMiddleware',
    ...)

"""

# Python
import time
import logging
import json

# Django
from django.conf import settings
from django.db import connection

class SQLLogMiddleware:
    """\
    Attach debug information to result json.
    """
    def process_request(self, request):
        request.sqllog_start = time.time()

    def process_response (self, request, response):
        # request.sqllog_start is empty if an append slash redirect happened.
        debug_sql = getattr(settings, "DEBUG_SQL", False)
        if not getattr(request, 'sqllog_start', False):
            return response
        if (not request.sqllog_start) or not (settings.DEBUG and debug_sql):
            return response

        try:
            content = json.loads(response.content)
        except ValueError:
            return response
        timesql = 0.0
        for query in connection.queries:
            timesql += float(query['time'])
        seen = {}
        duplicate = 0
        for query in connection.queries:
            sql = query["sql"]
            c = seen.get(sql, 0)
            if c:
                duplicate += 1
            if c:
                query["seen"] = c + 1
            seen[sql] = c + 1

        timerequest = round(time.time() - request.sqllog_start, 3)
        queries = connection.queries

        debug = {'request_path': request.path,
                 'query_count': len(queries),
                 'duplicate_query_count': duplicate,
                 'sql_execute_time': timesql,
                 'request_execution_time': timerequest,
                 'queries': []}

        for query in queries:
            debug['queries'].append({'time': query['time'],
                                     'sql': query['sql']})

        content['debug'] = debug
        response.content = json.dumps(content)
        logging.info(debug)
        return response 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-14T17:43:43.950

使用 3.1 版的 Django 调试工具栏，有一个[历史面板](https://django-debug-toolbar.readthedocs.io/en/latest/panels.html#history)，它消除了使用 html 包装 JSON 响应的需要。

# android - If 语句和警报对话框

> ID：14618204
> 
> 赞同：0
> 
> 时间：2013-01-31T03:57:21.983
> 
> 标签：android, android-alertdialog

我有这个应用程序，当你登录时，你会看到一个列表，比如名字。我也有一个添加、更新和删除按钮。当我点击编辑按钮时，它将进入编辑页面，您可以在那里编辑名称。现在，当您点击更新按钮时，我有一个 AlertDialog，它将再次询问用户的用户名和密码。这是我制作的代码：

```
public void btn_add_update_click(View v){
    hideKeyboard();
    final String username = getIntent().getStringExtra("USERNAME");
    final String str_sitename = this.edt_sitename.getText().toString();
    String str_username = this.edt_username.getText().toString();
    String str_password = this.edt_password.getText().toString();
    LayoutInflater li = LayoutInflater.from(context);
    View prompt = li.inflate(R.layout.prompts, null);
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
    alertDialogBuilder.setView(prompt);
    final EditText user = (EditText) prompt.findViewById(R.id.loginEmail);
    final EditText pass = (EditText) prompt.findViewById(R.id.loginPassword);
    final TextView msg = (TextView) prompt.findViewById(R.id.login_error);
    final String password = pass.getText().toString();
    user.setText(getIntent().getStringExtra("USERNAME"));

    if (str_sitename.equals("")){
        //edt_sitename.requestFocus();
        show_mesg("Please insert sitename.");
    }else if (str_username.equals("")){
        //edt_username.requestFocus();
        show_mesg("Please insert username.");
    }else if (str_password.equals("")){
        //edt_password.requestFocus();
        show_mesg("Please insert password.");
    }else{
        if (selected_website!=null){
            selected_website.setUser(username);
            selected_website.setSitename(str_sitename);
            selected_website.setUsername(str_username);
            selected_website.setPassword(str_password);
                alertDialogBuilder.setCancelable(false)
                .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {    
                        DBAdapter dbUser = new DBAdapter(PasswordActivity.this);
                        dbUser.open();
                        if(dbUser.Login(username, password))
                        {
                                datasource.updateWebsite(selected_website);
                                show_mesg(str_sitename + " updated.");
                                hideKeyboard();
                                selected_website = null;
                                show_list_layout(); 
                            }
                        else{
                            msg.setText("Username or Password is not correct.");
                            }
                        }
                })
                .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();

                    }
                });
                AlertDialog alertDialog = alertDialogBuilder.create();
                alertDialog.show(); 
        }

        else{
            datasource.addWebsite(username, str_sitename,str_username,str_password);
            hideKeyboard();
            show_mesg(str_sitename + " added.");
            selected_website = null;
            show_add_layout();
        }
    }
} 
```

但是当我运行它时，它不起作用。确定和取消按钮未显示。对此有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:25:37.690

首先是您确定您的控件即将进入更新状态吗？如果是这样，那么在创建警报对话框时，您的代码似乎没有任何缺陷。无论如何，如果您确定您的控件处于更新状态，那么值得尝试一下。

```
 void showUpdateDialog(){
      AlertDialog.Builder updateDialog  = new AlertDialog.Builder(YourClassName.this);
      updateDialog.setTitle("Update Dialog");
      updateDialog.setCancelable(false);

    LayoutInflater layoutInflater  = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

  View inflatingView=layoutInflater.inflate(R.layout.updatelayout,null);

      EditText user = (EditText) inflatingView.findViewById(R.id.loginEmail);
      EditText pass = (EditText) inflatingView.findViewById(R.id.loginPassword);

      // More views here.......

 updateDialog.setPositiveButton("OK", new DialogInterface.OnClickListener(){

   @Override
   public void onClick(DialogInterface arg0, int arg1) {
    // TODO Auto-generated method stub

   }});

  updateDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){

   @Override
   public void onClick(DialogInterface arg0, int arg1) {
    // TODO Auto-generated method stub

   }});

        updateDialog.setView(inflatingView);
        updateDialog.show();
    } 
```

`showUpdateDialog()`在您的活动中单击更新按钮时调用此方法。如果您仍然找不到正面和负面按钮，请创建自己的按钮。那么你就不需要依赖系统的正负按钮了。在您的 updatelayout.xml 中添加两个额外的按钮，并在您的 showUpdateDialog() 方法中对其进行如下编码，然后对这些按钮执行任何您想要的操作。

```
Button yesButton = (Button)view.findViewById(R.id.positiveButton);
  yesButton.setOnClickListener(new Button.OnClickListener(){

    @Override
       public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), " Yes Button Is Pressed", Toast.LENGTH_LONG).show();
       }}); 
```

# c# - 无法从列表框中获取值

> ID：14618207
> 
> 赞同：0
> 
> 时间：2013-01-31T03:57:57.037
> 
> 标签：c#, asp.net, code-behind

**豆类**

```
 public partial class IPSFlightPath {            
        private string nameField;            
        private string sidField;            
        private int selectedField;} 
```

**主班**

1.1.设置列表框的值

```
IPSFlightPath[] arrFlightPath = ipsChannel.paths;                           
foreach (IPSFlightPath flightPath in arrFlightPath)
{
  if (flightPath.selected != 0)
  {
  lbSelected.Items.Add(flightPath.name);
  }
} 
```

1.2.从列表框中获取值

```
string FP = lbSelected.SelectedItem.Value.ToString(); 
```

它只是将 FP 设置为 name ，没有得到对象的 selectedValue 。示例：row1 显示 nameField 为“FlightPath1”，其中包含 sidField 为“1”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:03:06.583

应该：

```
lbSelected.Items.Add(new ListItem(flightPath.name, flightPath.sidField)); 
```

# bash - Unix bash脚本使用屏幕在后台运行程序

> ID：14618209
> 
> 赞同：-1
> 
> 时间：2013-01-31T03:57:59.803
> 
> 标签：bash

自从我使用 Unix 命令以来已经有一段时间了，我想要一个简单的 .sh 脚本使用 screen 分离运行，该脚本将使用 screen 调用另一个 .sh 脚本，该脚本也将被分离，我希望原始脚本继续运行通过其程序的其余部分。当终端关闭时，这两个脚本都应该能够运行。

我的想法是在 programA.sh 中使用它

```
screen -dmS ProgB bash programB.sh 
```

在终端我用它来运行programA

```
screen -dmS ProgA bash programA.sh 
```

我已经让第一个程序运行并显示在 screen -ls 中，但第二个程序没有出现。

关于为什么失败的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:54:22.077

您也可以使用：

```
setsid yourCmd 
```

# ios - “这个 UIView 似乎是它不知道的 NSISVariable 的代表。这是一个内部 UIKit 错误”错误

> ID：14618211
> 
> 赞同：68
> 
> 时间：2013-01-31T03:58:05.243
> 
> 标签：ios, uiview, opengl-es, uikit

我正在做一个opengl项目。我使用了一些图像（2 个用于 xy 比例）和标签（8）在屏幕上显示比例。我的第一个视图是一个`tableview`我要去的地方`openglView`。但是每当我从那里返回时`openglView`，`tableView`它都会给我这个错误并且应用程序崩溃。

**“这个 UIView 似乎是它不知道的 NSISVariable 的代表。这是一个内部 UIKit 错误。”**

有什么建议么？发生这种情况是因为我包含了太多的 UI 元素，除了那些图像和标签，我还使用了一些按钮。我正在应用`affineTransform`这些图像和标签以及一个按钮。

**确切的错误是：**

```
2013-01-31 12:20:18.743 EMtouch[50496:12203] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '{ Rows:
    UILayoutContainerView:0x9835660.Height == 480 + 1*0x7e53030.marker + 1*0x7e546c0.marker
    UILayoutContainerView:0x9835660.Width == 320 + 1*0x7e52f90.marker + 1*0x7e54330.marker
    UILayoutContainerView:0x9835660.minX == 0 + 1*0x7e52ca0.marker + -0.5*0x7e52f90.marker
    UILayoutContainerView:0x9835660.minY == 0 + 1*0x7e52fd0.marker + -0.5*0x7e53030.marker
    UINavigationTransitionView:0x9837ea0.Height == 480 + 1*0x7e51bf0.marker + 1*0x7e53030.marker + 1*0x7e546c0.marker
    UINavigationTransitionView:0x9837ea0.Width == 320 + 1*0x7e519c0.marker + 1*0x7e52f90.marker + 1*0x7e54330.marker
    UINavigationTransitionView:0x9837ea0.minX == 0 + 1*0x7e51940.marker + -0.5*0x7e519c0.marker
    UINavigationTransitionView:0x9837ea0.minY == 0 + 1*0x7e51b80.marker + -0.5*0x7e51bf0.marker
    UIWindow:0x7e1aea0.Height == 480 + 1*0x7e546c0.marker
    UIWindow:0x7e1aea0.Width == 320 + 1*0x7e54330.marker
    UIWindow:0x7e1aea0.minX == 0 + -0.5*0x7e54330.marker + 1*0x7e54410.marker
    UIWindow:0x7e1aea0.minY == 0 + 1*0x7e542d0.marker + -0.5*0x7e546c0.marker
    objective == <250:-0.000579834> + <250:-9.72015e-08>*UILabel:0x7b44bf0.Width + <250:9.72015e-08>*UILabel:0x7b45100.Width

  Constraints:
    <NSAutoresizingMaskLayoutConstraint:0x7e51940 h=-&- v=-&- UINavigationTransitionView:0x9837ea0.midX == UILayoutContainerView:0x9835660.midX>        Marker:0x7e51940.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e519c0 h=-&- v=-&- UINavigationTransitionView:0x9837ea0.width == UILayoutContainerView:0x9835660.width>      Marker:0x7e519c0.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e51b80 h=-&- v=-&- UINavigationTransitionView:0x9837ea0.midY == UILayoutContainerView:0x9835660.midY>        Marker:0x7e51b80.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e51bf0 h=-&- v=-&- UINavigationTransitionView:0x9837ea0.height == UILayoutContainerView:0x9835660.height>        Marker:0x7e51bf0.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e52ca0 h=-&- v=-&- UILayoutContainerView:0x9835660.midX == UIWindow:0x7e1aea0.midX>      Marker:0x7e52ca0.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e52f90 h=-&- v=-&- UILayoutContainerView:0x9835660.width == UIWindow:0x7e1aea0.width>        Marker:0x7e52f90.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e52fd0 h=-&- v=-&- UILayoutContainerView:0x9835660.midY == UIWindow:0x7e1aea0.midY>      Marker:0x7e52fd0.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e53030 h=-&- v=-&- UILayoutContainerView:0x9835660.height == UIWindow:0x7e1aea0.height>      Marker:0x7e53030.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e54330 h=--- v=--- H:[UIWindow:0x7e1aea0(320)]>      Marker:0x7e54330.marker
    <NSAutoresizingMaskLayoutConstraint:0x7e546c0 h=--- v=--- V:[UIWindow:0x7e1aea0(480)]>      Marker:0x7e546c0.marker
    <_UIWindowAnchoringConstraint:0x7e542d0 h=--- v=--- UIWindow:0x7e1aea0.midY == + 240>       Marker:0x7e542d0.marker
    <_UIWindowAnchoringConstraint:0x7e54410 h=--- v=--- UIWindow:0x7e1aea0.midX == + 160>       Marker:0x7e54410.marker
}: internal error.  Cannot find an outgoing row head for incoming head UILabel:0x7b44bf0.Width, which should never happen.'
*** First throw call stack:
(0x1fb1012 0x19f4e7e 0x1fb0deb 0x1599609 0x159c64f 0x159c753 0xe7e8f9 0x982b24 0x982783 0xbba3fe 0xbba698 0x97a3b6 0x97a554 0x28f7d8 0x1c2b014 0x1c1b7d5 0x1f57af5 0x1f56f44 0x1f56e1b 0x34d37e3 0x34d3668 0x93c65c 0xc56d 0x2b35 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-17T23:16:59.790

“我从中转到 openglView 的 tableview” - 此语句结合仿射变换的使用表明您没有使用标准导航并尝试同时移动视图和使用 Autolayout。

此崩溃与相反的一组约束有关，我猜您正在应用仿射变换，因此弄乱了一些帧。尝试修改约束常量而不是使用任何转换。

# php - 为什么在 CakePHP 中设置这个基本结构需要一个数据库连接？

> ID：14618213
> 
> 赞同：0
> 
> 时间：2013-01-31T03:58:20.500
> 
> 标签：php, cakephp, cakephp-1.3

我试图了解 CakePHP 的一些基本方面，我成功完成[了博客教程](http://book.cakephp.org/1.3/en/The-Manual/Tutorials-Examples/Blog.html)（我正在做 1.3 版本，因为我需要处理的项目是一个遗留的 CakePHP1.3 应用程序），只是为了测试我的技能，我设置了一个新的、裸露的模型、视图和控制器在同一个项目下，结构和代码如下。

我不明白的是，当我通过 localhost/foo/info/ 运行它时，当地址加载时，页面报告它正在寻找一个名为“foos”的数据库表。如果我添加名为“foos”的表，则页面加载正常。**但我不明白的是我必须做什么才能独立于数据库运行相同的代码？**换句话说，它在没有任何名为 foos 的数据库表的情况下运行。我不明白下面的代码中哪里有对“foos”表的请求。

**/app/models/foo.php**

```
<?php
class Foo extends AppModel
{

}
?> 
```

**/app/views/foo/info.ctp**

```
<!-- File: /app/views/foo/info.ctp -->

<h1>Info page</h1>

<p>This is an info page</p> 
```

**/app/controllers/foo_controller.php**

```
<?php
class FooController extends AppController {
    var $name = 'Foo';

    function info() {
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:06:37.240

在模型中：`public $useTable = false;`

或者

在控制器中： `public $uses = array();`

进一步阅读：

[http://book.cakephp.org/2.0/en/models/model-attributes.html](http://book.cakephp.org/2.0/en/models/model-attributes.html)

[http://book.cakephp.org/2.0/en/controllers.html#Controller](http://book.cakephp.org/2.0/en/controllers.html#Controller) ::$uses

# java - 在java中创建一种将数组元素复制到另一个数组的方法

> ID：14618214
> 
> 赞同：-1
> 
> 时间：2013-01-31T03:58:22.323
> 
> 标签：java, arrays, methods

> **可能重复：**
> [复制数组 Java](https://stackoverflow.com/questions/5785745/make-copy-of-array-java)

我有一个主要的方法调用`c3 = c1.replicate();`

`c1 = new Chromosome(new int[] {1, 2, 3, 4, 5, 6})`

我正在努力在 java 中创建一个复制方法，将`c1`其复制并附加到`c3 = call`.

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:16:24.547

您可以`System.arrayCopy()`在 @jsoft 解决方案中使用以更快地复制数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:05:55.847

```
public Chromosome replicate(){
  int [] newArray = new int[this.chromosomeArrayOrWhateverYouNamedIt.length];
  for(int i=0; i < this.chromosomeArrayOrWhateverYouNamedIt.length; i++){
     newArray[i]=this.chromosomeArrayOrWhateverYouNamedIt[i];
  }
  Chromosome retVal = new Chromosome(newArray);
  return retVal;
} 
```

我认为这应该对你有用。

# python - 如何在不安装 pexpect.py 并将 pexpect.py 放在某个目录中的情况下使用 pexpect 模块？

> ID：14618215
> 
> 赞同：0
> 
> 时间：2013-01-31T03:58:31.387
> 
> 标签：python, aix

如果我没有安装权限，我可以在不安装的情况下使用 pexpect 模块吗？

就像使用一些有限的功能如下。

```
import pexpect 
pexpect.spawn,
pexpect.spawn.expect
pexpect.spawn.sendline etc 
```

模块

1.  是否有任何需要解决的依赖关系，如果是，我如何检查任何此类依赖关系。
2.  我在哪里放置 pexpect.py 代码以使其工作。如果可能的话，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:17:30.063

**更新** *最初编写此答案时（2013 年 1 月），以下内容有效，但对于 pexpect 的较新版本不再适用。*

引用您将在包的源代码中找到的 INSTALL 文件：

*如果您没有 root 访问权限，或者您不想安装 Pexpect 以便任何脚本都可以使用，那么您只需将 pexpect.py 文件复制到与您的脚本相同的目录即可。*

因此，获取源代码，并复制`pexpect.py`到 Python 路径中的任何目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T03:23:42.683

从我所见，您不能再（我相信从 3.x 版本开始）只需将 pexpect.py 复制到路径中的某个位置，而是必须以 root 身份安装该软件包。如果有人知道不同，请纠正我。

参考： [https ://github.com/pexpect/pexpect/issues/52](https://github.com/pexpect/pexpect/issues/52)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T15:56:55.013

You have to copy the pexpect-folder (the one which contains the init.py ) [from the source](https://github.com/pexpect/pexpect/tree/master/pexpect) to whichever directory you are running your script in.

Reference: [https://github.com/pexpect/pexpect/issues/52](https://github.com/pexpect/pexpect/issues/52)

# wordpress-theming - 如何从 Genesis Framework 中删除 'by [author]'

> ID：14618222
> 
> 赞同：3
> 
> 时间：2013-01-31T03:58:57.663
> 
> 标签：wordpress-theming

我正在为我的新网站使用 Genesis 框架，一切都很好，但我找不到删除`by [author]`条目标题下方的方法。我不想使用 CSS 隐藏它，我想完全删除它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-20T00:07:19.940

Genesis Framework 网站说要将此添加到您的子主题的 functions.php 文件中。我对此进行了测试，效果很好。

```
//* Remove the post info function    
remove_action( 'genesis_before_post_content', 'genesis_post_info' ); 
```

# jquery - 除非我在控制台中调用 $.parseJSON，否则 jQuery UI 自动完成功能不起作用

> ID：14618225
> 
> 赞同：0
> 
> 时间：2013-01-31T03:59:14.493
> 
> 标签：jquery, jquery-ui, coffeescript, jquery-ui-autocomplete

我已经看到很多关于 jQuery UI 自动完成的其他问题，但没有一个与我的问题完全一样。

我正在使用带有 jquery-ui-rails 插件的 Rails 3.2（它使用 jQuery UI Autocomplete 1.9.2）。我的文件顶部`application.js`包含我所有的 jQuery：

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.core
//= require jquery.ui.autocomplete 
```

我按照 Railscast [#399](http://railscasts.com/episodes/399-autocomplete-search-terms?view=asciicast)进行设置，但发现我的自动完成过滤实际上不起作用，除非我进入控制台，在我的源上运行 $.getJSON，然后在 $.getJSON responseText 上运行 $.parseJSON。

没有它，我只是从我的服务器返回的数组中下拉可用字符串。

这是我在 HTML 中的输入：

```
<%= text_field_tag 'location_name', nil, id: "all_location_search" %> 
```

在该 HTML 上调用 autcomplete 的 CoffeeScript：

```
$ ->
  # autocomplete location input
  $('#all_location_search').autocomplete
    source: "/autocompletions/locations" 
```

在 AutoCompletionsController#locations 中：

```
def locations
  render json: AutoComplete.locations_by(params[:location_name])
end 
```

在 AutoComplete.rb 中：

```
def self.locations_by(term)
  current = Profile.pluck(:current_location).reject{|n| n.blank?}
  current.grep(/^#{term}/)
end 
```

现在，如果我将浏览器指向`localhost:3000/autocompletions/locations`我会看到以下内容：

```
["Arlington, VA","Atlanta, GA","Boston, MA","Coral Springs, FL","Philadelphia, PA","Sterling, VA"] 
```

但就像我说的，除非我进入控制台，否则运行类似：

```
locations = $.getJSON("/autocompletions/locations")
locationJson = $.parseJSON(locations.responseText)
$('#all_location_search').autocomplete({source: locationJson}); 
```

我实际上没有过滤器。

需要注意的几点：

*   我正在调用`.autocomplete`两个输入。我尝试删除一个以查看是否有任何作用，但没有
*   我尝试删除每个 JavaScript 以查看是否是另一个文件导致了问题，但没有找到任何东西
*   当我加载应该是 jQuery UI 自动完成的输入页面时的 HTML 输出与我在 Chrome 的开发者控制台中输入以下两个选项时得到的 HTML 输出相同。

`<input id="all_location_search" name="location_name" type="text" data-validate="true" class="ui-autocomplete-input" autocomplete="off">`

### 选项1

```
$('#all_location_search').autocomplete({source: "/autocompletions/locations"}); 
```

### 选项 2

```
locations = $.getJSON("/autocompletions/locations")
locationJson = $.parseJSON(locations.responseText)
$('#all_location_search').autocomplete({source: locationJson}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:55:08.783

我弄清楚了这个问题。首先，使用 jQuery UI Autocomplete 访问服务器的是一个术语参数，所以我必须与之匹配。所以改变我的控制器方法：

```
def locations
  render json: AutoComplete.locations_by(params[:location_name])
end 
```

至...

```
def locations
  render json: AutoComplete.locations_by(params[:term])
end 
```

修复它。我在其他答案中看到过这一点，但我认为我在输入时并没有考虑到我的术语是否区分大小写。只要确保你寻找`params[:term]`.

# machine-learning - 如何使用svd根据物品推荐物品

> ID：14618226
> 
> 赞同：4
> 
> 时间：2013-01-31T03:59:25.360
> 
> 标签：machine-learning, recommendation-engine, svd

我已经训练了一个`SVD`模型来推荐基于`userId`. 但是，有没有办法根据项目列表而不是推荐项目`userId`？

例如，给定一个项目列表`[1,2,3,4,5]`，`SVD`模型会找到最相似的项目`[9,10]`。我的解决方案是从 input 中找到每个 item 的相似项`[9,10]`，并获取 common 项作为输出。

那是，

*   与第 1 项相似的项目是`[9,10,12]`和
*   与第 2 项相似的项目是`[9,10,13]`。

所以常见的项目是`[9,10]`，但我不知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:05:22.097

你描述的不是很清楚。我猜你的意思是你想要基于项目的推荐，就像[亚马逊](http://www.cs.umd.edu/~samir/498/Amazon-Recommendations.pdf)正在做的那样？.

> 可以通过多种方式确定两个商品之间的相似度，但常用的方法是使用我们前面描述的余弦测度，其中每个向量对应一个商品而不是客户，向量的`M`维度对应购买该商品的客户物品。

![在此处输入图像描述](../Images/30783f782eb06b3791e104f225eee1ea.png)

该算法需要密集的离线处理来准备最近的项目。完成后，对相似项目查询的响应非常快。

# 编辑

一旦你知道每个项目的最`k`相似项目，你就有每个项目对的分数，即两个项目的相似程度，或者`score(i,j)`

给定一个项目列表：`[1,2,3]`

首先，您可以找到`k`列表中每个项目的顶级项目。你也有他们每个人的分数。假设`k=3`：

```
`[100,44,99]` are the top 3 items that are similar to item 1\. 
score(1, 100) = 0.84, score(1, 44) = 0.4, score(1, 99) = 0.33
score(2, 44 ) = 0.3,  score(2, 33) = 0.2, score(2, 70) = 0.15
score(3, 99)  = 0.4,  score(3, 44) = 0.15, score(3, 70) = 0.01 
```

然后，您汇总 中存在的所有项目的分数`score([1-3],__)`，即：

```
score(100) = 0.84
score(44) = 0.4 + 0.3 + 0.13 = 0.83
score(99) = 0.33 + 0.2 = 0.53
score(33) = 0.2
score(70) = 0.15+0.01=0.16 
```

排序后，您知道从上到下的项目应该是：

```
100-> 0.84
44 -> 0.83
99 -> 0.53
33 -> 0.2
70 -> 0.16 
```

当然，在推荐项目的最终列表中，您可能希望删除给定列表中已经存在的任何内容（用户已经拥有的项目）。

请注意，在上面的示例中，尽管项目 44 出现在 3 行中，但它们的所有相似性得分都很低。我们仍然选择项目 100 作为最佳匹配。直觉是我们累积相似性贡献并比较它们的聚合贡献。

# sql - Oracle 中的完整性约束

> ID：14618227
> 
> 赞同：0
> 
> 时间：2013-01-31T03:59:56.213
> 
> 标签：sql, oracle, constraints

我对数据库完全陌生，对 Oracle 语法有些困惑。我正在尝试创建一个带有完整性约束的表来伴随它。

这是我的代码：

```
 CREATE TABLE  Students 
( 
id                INTEGER, 
name              CHAR(10)    NOT NULL,  
classification    CHAR(10)    NOT NULL, 
hours             INTEGER, 
gpa               NUMBER(3,2) NOT NULL, 
mentor            INTEGER, 

CONSTRAINT IC1 CHECK (PRIMARY KEY (id))
CONSTRAINT IC2 CHECK (classification = 'freshman' or classification = 'sophomore' or classification = 'junior' or classification = 'senior')
CONSTRAINT IC3 CHECK (gpa >= 0 AND gpa <= 4) 
CONSTRAINT IC4 CHECK (classification = 'junior' AND hours >= 55 AND hours <= 84)  ); 
```

但是，每当我运行代码时，我都会得到：

```
SQL> CONSTRAINT IC1 CHECK (PRIMARY KEY (id))
SP2-0734: unknown command beginning "CONSTRAINT..." - rest of line ignored.
SQL> CONSTRAINT IC2 CHECK (classification = 'freshman' or classification = 'sophomore' or classification = 'junior' or classification = 'senior')
SP2-0734: unknown command beginning "CONSTRAINT..." - rest of line ignored.
SQL> CONSTRAINT IC3 CHECK (gpa >= 0 AND gpa <= 4)
SP2-0734: unknown command beginning "CONSTRAINT..." - rest of line ignored.
SQL> CONSTRAINT IC4 CHECK (classification = 'junior' AND hours >= 55 AND hours <= 84)  );
SP2-0734: unknown command beginning "CONSTRAINT..." - rest of line ignored.
SP2-0044: For a list of known commands enter HELP
and to leave enter EXIT. 
```

有人可以帮我解决我的约束语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:30:34.657

主键约束的声明中存在语法错误。主键约束不是检查约束，因此您不需要`CHECK`关键字。每个内联约束定义后还需要逗号

```
SQL> ed
Wrote file afiedt.buf

  1     CREATE TABLE  Students
  2  (
  3  id                INTEGER,
  4  name              CHAR(10)    NOT NULL,
  5  classification    CHAR(10)    NOT NULL,
  6  hours             INTEGER,
  7  gpa               NUMBER(3,2) NOT NULL,
  8  mentor            INTEGER,
  9  CONSTRAINT IC1 PRIMARY KEY (id),
 10  CONSTRAINT IC2 CHECK (classification = 'freshman' or classification = 'sophomore' or classification = 'junior' or classification = 'senior'),
 11  CONSTRAINT IC3 CHECK (gpa >= 0 AND gpa <= 4) ,
 12* CONSTRAINT IC4 CHECK (classification = 'junior' AND hours >= 55 AND hours <= 84)  )
SQL> /

Table created. 
```

根据您使用的前端工具和该工具的设置，您可能希望避免在 SQL 语句中间出现完全空白行。从 SQL 的角度来看，这是完全有效的语法。但是有些前端会将空行解释为前面语句的结束。

# ruby-on-rails-3 - 限制对资产管道中资产的访问？

> ID：14618228
> 
> 赞同：0
> 
> 时间：2013-01-31T03:59:56.630
> 
> 标签：ruby-on-rails-3, asset-pipeline, restriction

有什么方法可以限制用户浏览您的应用程序对 Rails 资产管道的访问？

我只想在用户登录时限制对某些 CSS 的访问，否则 rails 应该阻止对它的访问。

找不到与此相关的任何内容有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:07:33.613

就我个人而言，我将在我的 production.rb 文件中单独编译我​​不想公开的资产

例子

```
config.assets.precompile += %w(locked.css ) 
```

然后在我的应用程序布局中，我将在 head 标签中添加一个 yield

例子

```
<%= yield(:head)%> 
```

然后我现在可以执行检查以了解是否有 current_user

例子

```
<% if current_user %>
  <%= provide(:head) do %>
     <% stylesheet_link_tag "locked" %>
  <% end %>
<% end %> 
```

这可能有点蹩脚，但它可以完成工作。

# php - 我对 PHP 继承有错误的想法吗？

> ID：14618230
> 
> 赞同：0
> 
> 时间：2013-01-31T04:00:03.123
> 
> 标签：php, oop

我正在尝试创建一个简单的示例 php 脚本，有一个用户类，然后是两个控制器。

把它想象成一个没有视图的 MVC。

目前我无法`getUserId()`在 内工作`showUserId()`，`usercontroller`我做错了什么？

**PHP**

```
<?
class user{

    function getUserId(){

        return 1; //Simple Example
    }
}

class controller{

    function __construct(){

        $user = new User();
    }
}

class usercontroller extends controller{

    function __construct(){

        $user = new User();
    }

    function showUserId() {

        echo $user->getUserId();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:03:53.167

`$user`仅在`__construct`范围内可用。要在对象范围内可用，它必须作为成员绑定到对象：

```
$this->user = new User; 
```

然后，您可以访问`$this->user`.

还建议将此成员作为类定义的一部分包括在内，这不仅是为了清楚起见，而且也是为了设置正确的访问修饰符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:04:12.837

```
class usercontroller extends controller{

    private $user;

    function __construct(){

        $this->user = new User();
    }

    function showUserId() {

        echo $this->user->getUserId();
    }
} 
```

您需要将 $user 定义为控制器类的类属性，在构造函数中定义它，然后您可以在所有函数中使用它。

编辑;

是的，您可以在 oarent 中定义并在子构造函数中调用父构造函数，并使用它..

```
<?
class user{   
    function getUserId(){    
        return 1; //Simple Example
    }
}

class controller{
    protected $user;
    function __construct(){    
        $this->user = new User();
    }
}

class usercontroller extends controller{

    function __construct(){
        parent::__construct();
        //$user = new User();
    }

    function showUserId() {    
        echo $this->user->getUserId();
    }
}

$controller_instance = new usercontroller();
$controller_instance->showUserId();    
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:04:54.440

在您的代码示例中， $user 作为 __construct() 函数中的局部变量存在。

如果您希望它成为类的一部分，首先使用该名称定义一个类属性，然后您可以使用 $this-> 语法来引用它。

```
class usercontroller extends controller {
    public $user;

    function __construct(){
        $this->user = new User();
    }

    function showUserId() {
        echo $this->user->getUserId();
    }
} 
```

作为一个挑剔的旁注，您的“用户”类在您的代码示例中被定义为“用户”。我确定您打算将它们匹配，因为您没有询问脚本的解析错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T04:19:07.043

我会从 中取出`$user`变量`controller`，因为我觉得它并不真正属于那里：

```
class controller
{
} 
```

然后，在里面`usercontroller`我会传递一个用户对象作为依赖：

```
class usercontroller extends controller
{
    private $user;

    function __construct(User $user)
    {
        $this->user = $user;
    }

    public function showUserId() 
    {
        echo $this->user->getUserId();
    }
}

$c = new usercontroller(new User());
echo $c->showUserId(); 
```

# spring - 春天的谈话范围

> ID：14618231
> 
> 赞同：1
> 
> 时间：2013-01-31T04:00:05.110
> 
> 标签：spring, jsf, serialization, conversation-scope, orchestra

我们有在 spring 和 jsf 1.2 上运行的 java web 应用程序。
我们还使用 apache Orchestra 作为对话范围的框架。
但是我们总是遇到 Orchestra 的问题，最后一个问题是 Orchestra ConversationManager 不支持序列化，因此我们无法序列化会话并将其复制到不同的服务器实例。但是我们需要会话复制。所以我们决定摆脱管弦乐队，并使用一些替代方案来扩大对话范围。实际上我们主要使用会话来扩展请求范围，因此切换到视图范围可以解决我们的问题。

*   也许有人知道我们可以使用哪些库来获取对话或查看范围作为弹簧自定义范围？
*   切换到seam不是一个选项，太多的代码加上spring。切换到 jsf 2 可以解决我们的问题吗？
*   或者也许有人在里面连载了管弦乐队的对话？
*   有任何想法吗？

# python - 在python中按文件类型递归目录和日志文件

> ID：14618238
> 
> 赞同：0
> 
> 时间：2013-01-31T04:01:08.267
> 
> 标签：python, directory-structure

我想调查一组目录并获取以下信息

1.  文件类型的文件数
2.  按文件类型列出的具有完整路径的文件列表

3.  每个子目录目录 1&2

我有以下代码。ext 列表生成器很好。我被困在如何为每个扩展名分配列表和计数器的名称上。我们不知道这些将是什么或有多少。不知道在此之后还会出现什么其他问题。

```
import os, sys, datetime

top = os.getcwd() # change to a specific path if required.
RootOutput = top
SourceDIR = top
outDIR = top+"\\workingFiles" # directory where output is written to. Includes temp files
# END setting base paths
# NOTHING BELOW should need editing.
List =[]
extList=[]

os.chdir(top)

for root, dirs, files in os.walk(SourceDIR, topdown=False):
    for fl in files:
      currentFile=os.path.join(root, fl)
      ext=fl[fl.rfind('.'):]
      if ext not in extList:
        extList.append(ext)
      List.append(currentFile)

print extList

for ext in extList:
    ext+"Counter"=0
    ext+"FileList"=[]

for fl in List:
    ext=fl[fl.rfind('.'):]
    ext+"Counter"+=1
    ext+"FileList".append(fl)

for ext in extList:
    print ext
    print ext+"Counter"
    print ext+"FileList" 
```

CODE 根据答案更新。txt 文件的问题，因为它只创建一个文本文件。

```
# iterate over dictionary keys
for elem in ext_dict.keys():
    print elem
    print ext_dict[elem]["Counter"]
    print ext_dict[elem]["FileList"]
    log = open(elem+'_Log.txt', 'a')
    Num=0
    for fl in ext_dict[elem]["FileList"]:
        Num+=1
        log.write(str(Num)+","+str(fl)+"\n")
    log.close() 
```

**任何人都可以使用的最终脚本如下。**

```
#-------------------------------------------------------------------------------
# Name:    File_Review
# Purpose: Review of all files in directory/subdirectories with report on file type and size
#
# Author:      georgec
#
# Created:     25/01/2013
# Copyright:   (c) ATGIS 2013
# Licence:     Creative Commons 3.0 - BY
#-------------------------------------------------------------------------------

import os, sys, datetime

top = os.getcwd() # change to a specific path if required.
RootOutput = top
SourceDIR = top
SourceDIR = r'P:\2013'
outDIR = top # directory where output is written to. Includes temp files
finalDIR = top+"\\final" # folder for final data only
DirLimiterList=['']

# END setting base paths
# NOTHING BELOW should need editing.

os.chdir(top)

def InvestigateFiles(SourceDIR,outDIR,DirLimiter):
    List =[]
    extList=[]
    dirList=[]
    dirCount=0
    for root, dirs, files in os.walk(SourceDIR, topdown=False):
        for fl in files:
            currentFile=os.path.join(root, fl)
            ext=fl[fl.rfind('.')+1:]
            if ext!='':
                if DirLimiter in currentFile:
                    List.append(currentFile)
                    directory1=os.path.basename(os.path.normpath(currentFile[:currentFile.rfind(DirLimiter)]))
                    directory2=(currentFile[len(SourceDIR):currentFile.rfind('\\'+directory1+DirLimiter)])
                    directory=directory2+'\\'+directory1
                    if directory not in dirList:
                        dirCount+=1
                        dirList.append(directory)

            if ext not in extList:
              extList.append(ext)

    print extList

    ext_dict = {}

    # Create the dictionary
    for ext in extList:
        ext_dict[ext] = {}
        ext_dict[ext]["Counter"] = 0
        ext_dict[ext]["FileList"] = []

    #populate the dictionary
    for fl in List:
        if ext_dict.has_key(fl[fl.rfind('.')+1:]):
            ext = fl[fl.rfind('.')+1:]
            ext_dict[ext]["Counter"] = ext_dict[ext]["Counter"] + 1
            ext_dict[ext]["FileList"].append(fl)

    # iterate over dictionary keys
    for elem in ext_dict.keys():
        uniqueDirList=[]
        print elem
        print ext_dict[elem]["Counter"]
        count= ext_dict[elem]["Counter"]
        print ext_dict[elem]["FileList"]
        log = open(elem+'_'+DirLimiter[DirLimiter.find('\\')+1:DirLimiter.rfind('\\')]+'_Log.txt', 'a')
        Num=0
        for fl in ext_dict[elem]["FileList"]:
            Num+=1
            log.write(str(Num)+";"+str(fl)+";"+str(os.path.getsize(fl))+"\n")
##            finaldir=fl[fl.rfind(DirLimiter):fl.rfind('\\')]
##            directory2=fl[fl.rfind('\\Input\\')+6:fl.rfind('\\')]
##            uniqueDir=directory2+finaldir
##            if uniqueDir not in uniqueDirList:
##             uniqueDirList.append(uniqueDir)
##             log.write(str(Num)+";"+str(fl)+";"+str(os.path.getsize(fl))+";"+str(uniqueDir)+'\n')
##             log.write(finaldir+"\n"+directory2+"\n"+uniqueDir+"\n"+"\n")
##            else:
##             log.write(str(Num)+";"+str(fl)+";"+str(os.path.getsize(fl))+";\n")
##        log.write('Directories: '+str(count)+'\n Unique Directories: '+str(len(uniqueDirList)))
        log.close()

for DirLimiter in DirLimiterList:
 InvestigateFiles(SourceDIR,outDIR,DirLimiter) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:08:47.030

您应该使用字典来存储数据

```
ext_dict = {}

# Create the dictionary
for ext in extList:
    ext_dict[ext] = {}
    ext_dict[ext]["Counter"] = 0
    ext_dict[ext]["FileList"] = []

#populate the dictionary
for fl in List:
    if ext_dict.has_key(f1[f1.rfind('.'):]):
        ext = f1[f1.rfind('.'):]
        ext_dict[ext]["Counter"] = ext_dict[ext]["Counter"] + 1
        ext_dict[ext]["FileList"].append(fl)

# iterate over dictionary keys
for elem in ext_dict.keys():
    print elem
    print ext_dict[elem]["counter"]
    print ext_dict[elem]["FileList"] 
```

# excel - 如何使用苹果脚本创建 Microsoft excel 文件

> ID：14618241
> 
> 赞同：1
> 
> 时间：2013-01-31T04:01:21.027
> 
> 标签：excel, macos, applescript

如何使用苹果脚本创建带有名称的 excel 文件？在此脚本中创建了 excel 文件，但未设置工作簿名称。

```
tell application "Microsoft Excel"
      make new workbook at end with properties{name:"MyIndia"}
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:19:41.153

尝试：

```
tell application "Microsoft Excel"
    set myWorkbook to make new workbook
    save workbook as myWorkbook filename "My Workbook Name"
end tell 
```

在保存 Excel 文件之前获取工作簿的名称：

```
tell application "Microsoft Excel"
    set myWorkbook to make new workbook
    return myWorkbook's name
end tell 
```

# selenium-ide - Selenium IDE - 如何检查特定元素中不存在文本

> ID：14618242
> 
> 赞同：2
> 
> 时间：2013-01-31T04:01:30.170
> 
> 标签：selenium-ide

有没有办法检查特定元素中没有出现特定的文本字符串？

我面临的挑战是同一串文本在整个页面中重复多次。我可以查明我正在检查的单个元素，但我坚持要确保文本不显示在其中。

有什么想法或解决方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:22:10.287

在 Selenium IDE 中，您可以使用该命令`assertText`来验证元素是否具有特定文本。

`Command`- assertText
`Target`- 定位器 id
`Value`- 要检查的文本。

当元素具有您提到的确切文本时，上述命令将通过，如果不存在则失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:58:15.743

试试这样的
verifyEval | this.page().findElement("//input[@id='ElementID']").value != 'string' | 错误的

其中 ElementID 是 HTML 元素的 id（在本例中为 INPUT 元素，“string”是您尝试验证的搜索字符串在元素中不存在。

希望这可以帮助

# c# - 使用 Selenium Webdriver 和 Safari

> ID：14618243
> 
> 赞同：4
> 
> 时间：2013-01-31T04:01:31.160
> 
> 标签：c#, safari, selenium-webdriver, safari-extension

我正在使用 Visual Studio Express 2012 开发 Selenium Webdriver C#。
我安装了最新的 safari 浏览器，并为 Apple 的扩展创建了开发人员证书，并构建了扩展并安装了它。

但即使在那之后，我也无法将 URL 发送到浏览器。浏览器启动成功，但之后我没有得到任何日志。

错误信息是：

> 附加信息：没有收到来自 Safari 扩展的连接。请确认它已正确安装并且是正确的版本。

我使用的代码：

```
IWebDriver driver = new SafariDriver();
driver.Navigate().GoToUrl("http://www.google.com"); 
```

safari 无法连接到服务器。请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-26T13:27:32.180

我在 Visual Studio 中使用 NUnit 测试框架和 Selenium 在 C# 中编写测试以实现 Web 浏览器自动化。

尝试使用 Selenium 2.45.0

我开始使用 2.49.0 版“Selenium WebDriver”和“Selenium WeDriver Support Classes”（通过 Visual Studio 中的 NuGet 安装）。它在尝试驱动 Safari 但与其他浏览器（Chrome、Firefox 和 IE）一起使用时不起作用。

我决定将我使用的 Selenium 版本更改为 2.45.0，因为它[在这里](https://code.google.com/p/selenium/wiki/SafariDriver)提到“...从 Selenium 2.45.0 开始，您必须手动安装 SafariDriver 浏览器扩展...”。我认为 2.45.0 将是最好的起点。

有效。

所以完整的流程是：

*   在 Safari 浏览器中打开并安装 2.45 版本的 SafariDriver.safariextz
*   确保您在 Visual Studio 中使用 Selenium WebDriver 2.45.0 和 Selenium WebDriver Support Classes 2.45.0
*   运行测试

在 Visual Studio 中更改 Selenium 的版本：

*   工具
*   NuGet 包管理器
*   PackageManager 控制台（控制台窗口应该打开）
*   类型：Install-Package Selenium.Support -Version 2.45.0（这也应该将 Selenium WebDriver 更改为版本 2.45.0）
*   有关 PackageManager 控制台的更多信息：http: [//docs.nuget.org/consume/package-manager-console](http://docs.nuget.org/consume/package-manager-console)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:41:18.590

我也在寻找这个问题的答案..从我搜索的内容来看，您需要为您的 safari 浏览器安装一个扩展程序，以便它能够与 selenium 进行通信....但据我搜索，我没有'没有找到任何成功的方法来做到这一点。所以我最终忘记了 safari 的 selenium 测试，只是和其他人一起去（chrome、firefox、ie 和 opera（支持有限，你现在不能最大化它））。我似乎对 safari 的 selenium 支持尚未成功实施，并且仍处于试验阶段。我目前正在使用我认为最新的 selenium 2.29

我猜这更像是一个评论而不是一个答案，问题是我只是想和你分享我所经历的。但是，如果您确实找到了对 safari 进行硒测试的方法，请告诉我。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:27:23.763

正如Tagsip所说，我也在同一条船上。但我可以使用 selenium 打开 safari 浏览器，但不能导航到 url。它与 Localhost: 一起打开。

这意味着，selenium 支持 safari，但我们无法导航到 URL。纠正我如果我错了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T06:36:48.207

使用 webdriver 的“DesiredCapabilities”类。

# html - Sencha Touch 2：如何在生产构建时处理自定义 css 文件？

> ID：14618244
> 
> 赞同：4
> 
> 时间：2013-01-31T04:01:38.820
> 
> 标签：html, css, extjs, sencha-touch, sencha-touch-2

我正在开发一个使用 sencha touch 2 开发的移动网站。我使用 sencha cmd v3 来生成生产版本。当我测试生产版本时，我发现我的自定义 css 文件包含在文件夹结构中，但自定义样式并未应用于 UI 元素。

请看，我没有在这个应用程序中使用 SASS/COMPASS。关于哪里出了问题或我错过了什么的任何想法？在创建生产版本时，我是否必须以不同的方式处理自定义 css 文件并做一些特别的事情？在创建生产版本时，我是否需要在 app.json 中包含这些自定义 css 文件的引用？请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T05:03:10.183

您只需在`app.json`文件中提供参考。`app.css`在文件后添加

```
/**
         * List of all CSS assets in the right inclusion order.
         * Each item is an object with the following format:
         *      {
         *          "path": "path/to/item.css" // Relative path to this app.json file
         *          "update": "delta"          // (Optional)
         *                                     // - If not specified, this file will only be loaded once, and
         *                                     //  -cached inside localStorage until this value is changed to either one below
         *                                     //  - "delta" to enable over-the-air delta update for this file
         *                                     //  - "full" means full update will be made when this file changes
         *
         *      }
         */ 
```

# sql - ASP 变量 SQL 错误

> ID：14618245
> 
> 赞同：0
> 
> 时间：2013-01-31T04:01:38.657
> 
> 标签：sql, asp-classic, ado

我正在尝试使用 ASP 变量来确定 sql 的排序方式。

ASP SQL 错误行：

```
Microsoft OLE DB Provider for ODBC Drivers error '80040e14'

[Microsoft][ODBC Text Driver] Syntax error (missing operator) in query expression '& supplier_name &'.

/junk/airsearch/search.htm, line 106 
```

相关线路：

```
conDB = "SELECT * FROM mul.csv WHERE ucase(supplier_name) LIKE ucase('%"+src_supplier_name+"%') AND ucase(aircraft_type) LIKE ucase('%"+src_aircraft_type+"%') ORDER BY & src_order & " 
```

ASP 代码：

```
<%
        Dim connectString, connect, conDB, sconDB, lDB, con, scon, lcon, src_ccn, src_state, src_order
        connectString = "Driver={Microsoft Text Driver (*.txt; *.csv)}; DBQ=" & Server.MapPath("data")
              src_supplier_name = Request.QueryString("supplier_name")
              src_aircraft_type = Request.QueryString("aircraft_type")
              src_state = Request.QueryString("state")

            src_order = "supplier_name"

        set connect = Server.CreateObject("ADODB.connection")
        connect.open connectString

        if src_state = "" then
            conDB = "SELECT * FROM mul.csv WHERE ucase(supplier_name) LIKE ucase('%"+src_supplier_name+"%') AND ucase(aircraft_type) LIKE ucase('%"+src_aircraft_type+"%') "   
            lDB = "SELECT * FROM mul.csv WHERE ucase(supplier_name) LIKE ucase('%"+src_supplier_name+"%')" 
        elseif src_state = "any" then
            conDB = "SELECT * FROM mul.csv WHERE ucase(supplier_name) LIKE ucase('%"+src_supplier_name+"%') AND ucase(aircraft_type) LIKE ucase('%"+src_aircraft_type+"%') ORDER BY & src_order & "   
            lDB = "SELECT * FROM mul.csv WHERE ucase(supplier_name) LIKE ucase('%"+src_supplier_name+"%') AND ucase(aircraft_type) LIKE ucase('%"+src_aircraft_type+"%') ORDER BY & src_order & " 
        else 
            conDB = " SELECT * FROM mul.csv WHERE ucase(state) LIKE ucase('%"+src_state+"%') AND ucase(supplier_name) LIKE ucase('%"+src_supplier_name+"%') AND ucase(aircraft_type) LIKE ucase('%"+src_aircraft_type+"%')"
            lDB = " SELECT * FROM mul.csv WHERE ucase(state) LIKE ucase('%"+src_state+"%') AND ucase(supplier_name) LIKE ucase('%"+src_supplier_name+"%') AND ucase(aircraft_type) LIKE ucase('%"+src_aircraft_type+"%')"
        end if

        sconDB = "SELECT * FROM mul.csv"    

        set con = connect.execute(conDB)
        set scon = connect.execute(sconDB)
        set lcon = connect.execute(lDB)
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:11:16.787

尝试像这样修改：

```
conDB = "SELECT * FROM mul.csv WHERE ucase(supplier_name) LIKE ucase('%" & src_supplier_name & "%') AND ucase(aircraft_type) LIKE ucase('%" & src_aircraft_type & "%') ORDER BY " & src_order 
```

# asp.net - 会话值（登录用户信息）在两个 asp.net mvc3 应用程序之间共享而不使用 DB

> ID：14618246
> 
> 赞同：0
> 
> 时间：2013-01-31T04:01:45.417
> 
> 标签：asp.net, asp.net-mvc-3, iis

我有一个网站（基本应用程序）www.abc.com，包括几个子应用程序（应用程序 A、应用程序 B、应用程序 C 等）。假设我有一个用户通过一次登录访问所有应用程序。现在我需要将登录信息库应用程序传递给子应用程序。建议我一个最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:11:27.643

我之前使用的方法有很多..

*   第一次......使用会话......每当用户登录时，将信息存储在任何会话上。然后进入子应用程序。

*   第二种方式...获取登录信息...对其进行加密...并传递网址..例如：www.abc.com/ID= Encrypt&Pass=Encrypt

*   第三种方式......创建一个 DTO（数据传输对象）并存储凭证值......并在子应用程序上访问 DTO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:17:46.410

我认为您可以使用在主要应用程序中获取用户名

```
FormsAuthentication.SetAuthCookie(RegisterUser.UserName, createPersistentCookie: false); 
```

在其他子应用程序中，您可以使用

```
User.Identity.Name 
```

# c - 在clang中启用优化时是否定义了内置宏？

> ID：14618249
> 
> 赞同：10
> 
> 时间：2013-01-31T04:02:01.277
> 
> 标签：c, optimization, macros, clang

当使用 gcc 编译时，`__OPTIMIZE__`宏在优化开启时定义（见[这里](http://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html)）。这会启用运行时警告，如下所示：

```
#ifndef __OPTIMIZE__
  printf("[WARNING] COMPILED WITHOUT OPTIMISATIONS\n");
#endif 
```

铿锵有类似的宏吗？[我在这里的文档](http://clang.llvm.org/docs/LanguageExtensions.html#builtin-macros)中找不到。

或者，更好的是，有没有一种方法可以在所有编译器上工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T07:12:13.753

该`__OPTIMIZE__`宏也存在于 clang 中，并且似乎与 gcc 中的工作方式相同（您的示例代码工作正常）。

我还没有找到有关此的具体文档，但我怀疑您链接的页面列出了一些 gcc 未采用的特定于 clang 的宏。**编辑**：严格来说，这并不像`__COUNTER__`gcc 中存在的那样。

我想这件事属于clang的“使命”，即尽可能与gcc兼容：

> Clang 驱动程序和语言特性被有意设计为尽可能合理地与 GNU GCC 编译器兼容，从而简化从 GCC 到 Clang 的迁移。在大多数情况下，代码“正常工作”。

来源：[http ://clang.llvm.org/docs/UsersManual.html#id4](http://clang.llvm.org/docs/UsersManual.html#id4)

此外，这个小命令对于列出编译器使用的宏很有用：

```
cc -dM -E -x c [options] /dev/null 
```

它适用于 gcc、clang 和其他一些编译器。

**编辑**：看起来它毕竟是记录在案的......在代码中:)

> __OPTIMIZE__ 是 Clang 实现的 GNU 扩展，但 MSVC 没有。那里有一个好的等价物吗？

来源：[https ://github.com/llvm-mirror/clang/blob/master/include/clang/StaticAnalyzer/Core/PathSensitive/ConstraintManager.h#L84](https://github.com/llvm-mirror/clang/blob/master/include/clang/StaticAnalyzer/Core/PathSensitive/ConstraintManager.h#L84)

# python - 随着服务器越来越满，IMAP 的搜索速度

> ID：14618250
> 
> 赞同：0
> 
> 时间：2013-01-31T04:02:03.133
> 
> 标签：python, email, search, imap, twisted

在我正在编程的应用程序中，我目前正在使用 IMAP 的搜索功能来获取电子邮件 ID，这很好，因为这是一项简单易行的任务，但是我想知道随着服务器变得越来越满，这是否会损害搜索速度（即目前速度很快），如果是这样，则值得处理 IMAP 空闲命令和 twisted.internet.mail。

我已经通过这个实现了 IDLE

```
class Command(object):
    _1_RESPONSES = ('CAPABILITY', 'FLAGS', 'LIST', 'LSUB', 'STATUS', 'SEARCH', 'NAMESPACE')
    _2_RESPONSES = ('EXISTS', 'EXPUNGE', 'FETCH', 'RECENT')
    _OK_RESPONSES = ('UIDVALIDITY', 'UNSEEN', 'READ-WRITE', 'READ-ONLY', 'UIDNEXT', 'PERMANENTFLAGS')
    defer = None

    def __init__(self, command, args=None, wantResponse=(),
                 continuation=None, *contArgs, **contKw):
        self.command = command
        self.args = args
        self.wantResponse = wantResponse
        self.continuation = lambda x: continuation(x, *contArgs, **contKw)
        self.lines = []

    def format(self, tag):
        if self.args is None:
            return ' '.join((tag, self.command))
        return ' '.join((tag, self.command, self.args))

    def finish(self, lastLine, unusedCallback):
        send = []
        unuse = []
        for L in self.lines:
            names = parseNestedParens(L)
            N = len(names)
            if (N >= 1 and names[0] in self._1_RESPONSES or
                N >= 2 and names[1] in self._2_RESPONSES or
                N >= 1 and names[0] in self.wantResponse or # allows for getting the responses you want, twisted doesn't seem to do that at least with the idle command
                N >= 2 and names[1] in self.wantResponse or # same as above line just with 2_RESPONSES check
                N >= 2 and names[0] == 'OK' and isinstance(names[1], types.ListType) and names[1][0] in self._OK_RESPONSES):
                send.append(names)
            else:
                unuse.append(names)
        d, self.defer = self.defer, None
        d.callback((send, lastLine))
        if unuse:
            unusedCallback(unuse) 
```

正在发送空闲命令

```
 cmd = Command("IDLE", continuation = self.a)
    d = self.imap_connection.sendCommand(cmd)
    return d 
```

现在我对 IDLE 犹豫的原因首先是如果服务器不支持它我就不能使用它（尽管这不是主要原因），我也不希望是因为空闲命令是未标记的响应以及如何知道它们是针对空闲命令的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:14:54.883

来自 RFC：

当客户端准备好接受未经请求的邮箱更新消息时，从客户端向服务器发送 IDLE 命令。

因此，如果有其他命令正在进行中 - 您可能会将其结果与对 IDLE 命令的未标记响应混淆 - 不要发送 IDLE 命令。

仅当您准备正确解释其未标记的响应时才发送 IDLE。:)

或者更简单地说，不要将 IDLE 与任何其他命令同时使用。然后，当您使用 IDLE 时，您知道所有未标记的响应都是针对 IDLE 命令的。

至少，这可能是对的。与任何 IMAP4 主题一样......谁真正知道。您可能需要检查要与之互操作的服务器，并查看它们的行为是否真正符合 RFC 中规定的愿景。

# node.js - Node.js 模块“时间”的时区问题

> ID：14618254
> 
> 赞同：1
> 
> 时间：2013-01-31T04:02:28.173
> 
> 标签：node.js, time, timezone, offset

我刚刚遇到了今天发生的一个问题（由于 1 月 31 日在澳大利亚悉尼）。基本上，给定年份、日期、小时、分钟、秒。我想创建一个日期，就像我在时区（澳大利亚/悉尼）中一样，然后将其转换为 UTC（即获取毫秒）。

这样做是因为数据库（和服务器）在 UTC 中工作，因为客户端可以在任何给定的时区（完成发布请求时，客户端同时提供时区和年、月、日,小时,分钟,秒值)

问题是，当我为今天创建日期时，它会将日期一直追溯到本月 3 日的 1 月 3 日，这是说明问题的代码

```
var scheduled, someTime, time, timeinfo, timezone;
process.env.TZ = 'UTC';
time = require('time');

timeinfo = {
    hour: 14,
    minute: '47',
    year: 2013,
    month: 1,
    date: 31
};

timezone = 'Australia/Sydney';
someTime = new Date(timeinfo.year, timeinfo.month - 1, timeinfo.date, timeinfo.hour, timeinfo.minute, 1, 1);
scheduled = time.Date(timeinfo.year, timeinfo.month - 1, timeinfo.date, timeinfo.hour, timeinfo.minute, 1, 1, timezone);
console.log(someTime);
console.log(scheduled); 
```

当您在 Node.js 中运行它时，输出的时间`console.log(scheduled);`完全关闭。

**注意：**我正在使用[time npm library](https://npmjs.org/package/time)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:15:56.353

似乎是节点时间如何计算时区的错误，与进行转换时的操作顺序有关。[截至目前，github.com 上](https://github.com/TooTallNate/node-time/issues/28)有一个未解决的问题（#28） 。

我已经提交了一个[拉取请求](https://github.com/TooTallNate/node-time/pull/30)，同时尝试一下，看看它是否适用于您的特定情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:59:23.633

请尝试以下代码

1.格林威治标准时间

```
var GMTtimeObj = new Date(); 
```

2.UTC时间：

```
var UTCtimeObj = +new Date(); 
```

让我知道它是否适合您的要求。

仔细阅读[这篇文章的答案](https://stackoverflow.com/questions/14495019/what-is-the-difference-between-togmtstring-and-toutcstring)，它可能会对您有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T02:56:16.693

这是最近修复的一个错误，请查看[https://github.com/TooTallNate/node-time/pull/30](https://github.com/TooTallNate/node-time/pull/30)

它现在工作得很好

# opengl - OpenGL深度缓冲区不工作

> ID：14618257
> 
> 赞同：0
> 
> 时间：2013-01-31T04:02:47.443
> 
> 标签：opengl, buffer, depth

我正在尝试使用 openGL 制作一个简单的绘图。但是，深度缓冲区似乎没有工作。

其他有类似问题的人通常会做以下两件事之一：

1.  不包括 glEnable(GL_DEPTH_TEST)

2.  错误的剪裁值

但是，我的代码没有这些问题。

```
...
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

gluPerspective(25.0,1.0,10.0,200.0);

// Set the camera location
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt(20.0, 10.0, 50.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);

// Enable depth test
glEnable(GL_DEPTH_TEST);

// Cull backfacing polygons
glCullFace(GL_BACK);
glEnable(GL_CULL_FACE)

drawCoordinateAxis();

drawBox(5.0,2.0,5.0,0.8,0.0,0.0);

glTranslated(1.0,-1.0,1.0); //The box is 5x2x5, it is shifted 1 unit down and 1 in the x and z directions
drawBox(5.0,2.0,5.0,0.0,1.0,1.0);
... 
```

当我执行我的代码时，这是绘制的。 [http://imgur.com/G9y41O1](http://imgur.com/G9y41O1)

注意蓝色盒子和红色盒子碰撞，所以红色盒子应该覆盖蓝色盒子的一部分。

函数 drawCoordinateAxis() 和 drawBox() 只是绘制了一些图元，内部没有什么花哨的。

我在 Debian 挤压上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:52:45.567

```
void reshape(GLint width, GLint height)
{
   g_Width = width;
   g_Height = height;
   glViewport(0, 0, g_Width, g_Height);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   gluPerspective(65.0, (float)g_Width / g_Height, g_nearPlane, g_farPlane);
   glMatrixMode(GL_MODELVIEW);
} 
```

所以首先将 Matrix Mode 设置为 GL_PROJECTION，然后是 gluPerspective....，然后再回到 MODELVIEW 模式。

# javascript - 是否有任何插件或方法可以让我在 html5 视频上创建叠加层？

> ID：14618260
> 
> 赞同：0
> 
> 时间：2013-01-31T04:03:12.747
> 
> 标签：javascript, jquery, html5-video

我正在使用[videojs](http://www.videojs.com)将视频嵌入到我的 html 文件中。

我能够收听某些事件，例如播放、暂停、持续时间等，

使用这些事件，我想在视频上创建一个覆盖，用户可以在其中阅读一些文本或单击按钮或其他任何内容。基本上，一种互动媒体。

这个透明层必须在视频中。

我看过[popcornjs](http://www.popcornjs.org)，它看起来确实很棒。但这并没有解决目的。

怎么能这样做呢？

非常感谢任何帮助或提示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:39:27.123

你看过 CSS Z-Index 属性吗？ [http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

它可能只是解决问题。一旦你在视频上放置了一个 div，你就可以做各种各样的事情，把画布放在那里，甚至画东西。

祝你好运。

PS：你也可能会遇到这个…… [如何让这个 div 遍历嵌入的视频](https://stackoverflow.com/questions/4238560/how-to-make-this-div-go-over-embedded-video)

# ios - 使用 postObject

> ID：14618262
> 
> 赞同：0
> 
> 时间：2013-01-31T04:03:49.750
> 
> 标签：ios, restkit

我是使用 RESTKit 的新手。

我正在尝试使用`postObject`.

我想知道我这样做是否正确。

我有这段代码：

```
self.gameWebInteractionObject = [[GameWebInteraction alloc] init];
RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];
[mapping mapAttributes:@"id", @"firstname", @"lastname", @"email", @"createdGames", nil];
[self.gameWebInteractionObject.manager.mappingProvider setMapping:mapping forKeyPath:@""];

self.gameWebInteractionObject.manager.serializationMIMEType = RKMIMETypeJSON;
[self.gameWebInteractionObject.manager.router routeClass:[UserObject class] toResourcePath:@"/data" forMethod:RKRequestMethodPOST];
[self.gameWebInteractionObject.manager.mappingProvider setSerializationMapping:[mapping inverseMapping] forClass:[UserObject class]];
[self.gameWebInteractionObject.manager postObject:userobject delegate:self]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:25:38.297

如果你使用 RestKit 0.20

```
// POST to create
[manager postObject:article path:@"/data" parameters:nil success:nil failure:nil];

// PATCH to update
[manager patchObject:article path:@"/data/1" parameters:nil success:nil failure:nil];

// DELETE to destroy
[manager deleteObject:article path:@"/data/1" parameters:nil success:nil failure:nil]; 
```

1是我的身份证。

[https://github.com/RestKit/RestKit](https://github.com/RestKit/RestKit)

# sql - 如何在sql中获取表A中的所有记录和表B中的唯一记录

> ID：14618276
> 
> 赞同：-2
> 
> 时间：2013-01-31T04:05:04.240
> 
> 标签：sql

我有两个表表 A 和表 B，如下所示。

```
 TableA:
   Id  name
    1    abc
    2    john
    3    jack
    4    jill

  Table B:
  Id  city     phn
   1  london    9876345
   5  bangalore 2345678 
   3  chennai   5637473 
```

我想要表A中存在但表B中不存在的记录。但结果应该是

```
 TableA:
   Id  name
    1    abc
    2    john
    3    jack
    4    jill 
```

即，即使表 B 中存在 1 和 3 id，但它们仍在表中 AI 也想要这些记录。

```
 5  bangalore 2345678 
```

表 A 中不存在此记录，因此我不应该接受此记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:07:34.037

你需要一个左外连接。

在此处查看：[http://en.wikipedia.org/wiki/Join_(SQL)](http://en.wikipedia.org/wiki/Join_(SQL))和此处：[http ://www.w3schools.com/sql/sql_join_left.asp](http://www.w3schools.com/sql/sql_join_left.asp)

编辑：说实话，你的问题毫无意义。在您提到的标题中：“A 中的所有值和 B 中的唯一值”，然后，您继续在解释中说明您只需要来自“A”而不是 B.. 的值。

`select * from TableA`会做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:08:12.500

真的——这么简单？不要认为你需要任何连接然后......

```
SELECT * FROM TableA 
```

祝你好运。

# python - RFCOMM 没有在 Debian 上使用 PyBluez 配对？

> ID：14618277
> 
> 赞同：17
> 
> 时间：2013-01-31T04:05:10.060
> 
> 标签：python, bluetooth, rfcomm, bluez

我正在尝试使用 Python 创建一个无需配对即可使用的 RFCOMM 服务器进程。最初，我从 PyBluez 文档中获取了两个示例脚本：

服务器：

```
# file: rfcomm-server.py

# auth: Albert Huang <albert@csail.mit.edu>
# desc: simple demonstration of a server application that uses RFCOMM sockets
#
# $Id: rfcomm-server.py 518 2007-08-10 07:20:07Z albert $

from bluetooth import *

server_sock=BluetoothSocket( RFCOMM )
server_sock.bind(("",PORT_ANY))
server_sock.listen(1)

port = server_sock.getsockname()[1]

uuid = "94f39d29-7d6d-437d-973b-fba39e49d4ee"

advertise_service( server_sock, "SampleServer",
                   service_id = uuid,
                   service_classes = [ uuid, SERIAL_PORT_CLASS ],
                   profiles = [ SERIAL_PORT_PROFILE ], 
#                   protocols = [ OBEX_UUID ] 
                    )

print "Waiting for connection on RFCOMM channel %d" % port

client_sock, client_info = server_sock.accept()
print "Accepted connection from ", client_info

try:
    while True:
        data = client_sock.recv(1024)
        if len(data) == 0: break
        print "received [%s]" % data
except IOError:
    pass

print "disconnected"

client_sock.close()
server_sock.close()
print "all done" 
```

客户：

```
# file: rfcomm-client.py
# auth: Albert Huang <albert@csail.mit.edu>
# desc: simple demonstration of a client application that uses RFCOMM sockets
#       intended for use with rfcomm-server
#
# $Id: rfcomm-client.py 424 2006-08-24 03:35:54Z albert $

from bluetooth import *
import sys

addr = None

if len(sys.argv) < 2:
    print "no device specified.  Searching all nearby bluetooth devices for"
    print "the SampleServer service"
else:
    addr = sys.argv[1]
    print "Searching for SampleServer on %s" % addr

# search for the SampleServer service
uuid = "94f39d29-7d6d-437d-973b-fba39e49d4ee"
service_matches = find_service( uuid = uuid, address = addr )

if len(service_matches) == 0:
    print "couldn't find the SampleServer service =("
    sys.exit(0)

first_match = service_matches[0]
port = first_match["port"]
name = first_match["name"]
host = first_match["host"]

print "connecting to \"%s\" on %s" % (name, host)

# Create the client socket
sock=BluetoothSocket( RFCOMM )
sock.connect((host, port))

print "connected.  type stuff"
while True:
    data = raw_input()
    if len(data) == 0: break
    sock.send(data)

sock.close() 
```

当我在 Windows 上运行服务器脚本时，一切都如我所愿——无需配对。在这个阶段，一切看起来都非常有希望。

但是，我需要在 Debian Squeeze 下运行服务器进程。当我在 Debian 上测试时，客户端连接被拒绝。在 syslog 中有来自 bluetoothd 的消息，显示链接密钥请求和 PIN 请求失败。

版本信息：

*   PyBluez 0.18
*   蟒蛇2.6
*   蓝兹 4.66
*   连接两端的蓝牙 v2.0 硬件

[这个讨论](http://permalink.gmane.org/gmane.linux.bluez.kernel/13828)似乎表明，如果我可以调整服务器套接字的安全级别，那么配对将被禁用，一切都会按预期工作。不过，我不清楚如何使用 PyBluez 来做到这一点，或者即使有可能。

我已经尝试使用各种 BT_SECURITY* 常量调用 setsockopt()，以及获取最后一个 PyBluez 并调用 setl2capsecurity()，但未能取得任何进展。

这可以通过 PyBluez 实现吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T06:51:55.627

事实证明，这是 Debian Squeeze bluez 默认配置的问题。

如果其他人遇到此问题，请通过编辑 /etc/bluetooth/main.conf 禁用 pnat 插件：

```
DisablePlugins = pnat 
```

然后重启蓝牙。

```
$ sudo invoke-rc.d bluetooth restart 
```

不需要对 PyBluez 代码进行任何更改。

# python - 更有效地使用 itertools.groupby()

> ID：14618281
> 
> 赞同：3
> 
> 时间：2013-01-31T04:05:47.503
> 
> 标签：python, itertools

我正在努力提高我对`itertools`图书馆的了解，因为它通常很有用。为此，我正在尝试解决我遇到的一个面试难题。其中很大一部分涉及顺序计算一个数字中分组和重复数字的数量。例如，对于数字：

```
1223444556 
```

我想：

```
[(1,1),(2,2),(1,3),(3,4),(2,5),(1,6)] 
```

也就是说，从左到右，有1个一，2个二，1个三，以此类推。

这是我当前的代码：

```
from itertools import groupby
groups_first = [int(''.join(v)[0]) for k,v in groupby(str(1223444556))]
counts = [len(''.join(v)) for k,v in groupby(str(1223444556))]
zip(counts,groups_first) 
```

它有效，但我想知道是否有更紧凑的方法可以绕过将两个列表压缩在一起。有什么想法吗？我认为这可能会在 groupby() 中执行某种 lambda 函数，但我还看不到它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:11:23.510

我可能只是写

```
>>> n = 1223444556
>>> [(len(list(g)), int(k)) for k,g in groupby(str(n))]
[(1, 1), (2, 2), (1, 3), (3, 4), (2, 5), (1, 6)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:11:25.297

怎么样：

```
[(sum(1 for _ in v), int(k)) for k,v in groupby(str(1223444556))] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:13:29.603

我可能会选择收藏：

```
>>> from collections import Counter
>>> c = Counter('1223444556')
>>> c.items()
[('1', 1), ('3', 1), ('2', 2), ('5', 2), ('4', 3), ('6', 1)] 
```

如果订单很重要（正如您在评论中所说），这可能不再是最有效的方法。但为了充分考虑，您可以这样做：

```
>>> t = c.items()
>>> t = sorted(t) 
```

如果你希望 y, x 被列为 x, y，你可以这样做：

```
>>> t = [(y, x) for x, y in t]
>>> print t
[(1, '1'), (2, '2'), (1, '3'), (3, '4'), (2, '5'), (1, '6')] 
```

这种方法的一个价值是重复的元素被列为一个字符串，所以不会混淆哪个数字来自原始列表，哪个数字表示频率。

# c# - 为什么我的报告在我的列中显示#Error？

> ID：14618284
> 
> 赞同：-1
> 
> 时间：2013-01-31T04:05:55.877
> 
> 标签：c#, reporting, reportviewer

好的，所以我有一个具有以下设置的类。

```
public class Test { 
    private int _TestID;
    private Test1 _MyData;

    public int TestID {
        get { return _TestID; }
        set { _TestID = value; }
    }
    public Test1 MyData {
        get { return _MyData; }
        set { _MyData = value; }
    }
}

public class Test1 {
    private string _TestString;

    public string TestString {
        get { return _TestString; }
        set { _TestString = value; }
    }
} 
```

在我的报告中，我在 Tablix 字段之一中设置了以下值。

```
=Fields!MyData.Value.TestString 
```

我将报告提供给`List<Test>`. 好吧，我的报告在现场显示为#Error。该报告运行良好，我不确定发生了什么变化。

**这是一个示例报告：**

![样本报告](../Images/0b69a7e61bd6df64fe2f5e82d3a03f25.png)

**编辑 1**

正在从我们网络上托管的 WCF 服务中检索数据。该服务从数据库加载所有数据，客户端只需下拉列表即可。

因此，为了更清楚地说明我的问题，报告不是从任何数据库查询生成的，而是从对象本身生成的。

```
public static void LoadReport() {
    List<Test> allTestData = PublishService.TestClient().GetAllTestData().ToList();
    ReportViewer.Reset();
    ReportViewer.LocalReport.ReportEmbeddedResource = "TestReport.rdlc";
    ReportDataSource datasource = new ReportDataSource();
    datasource.Name = "DataSet1";
    datasource.Value = allTestData;
    ReportViewer.LocalReport.DataSources.Add(datasource);
    ReportViewer.RefreshReport();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:50:45.643

Sooooooooo....问题是我没有安装 Visual Studio Service Pack 1。

# php - 使用 jquery 附加动态 php 菜单

> ID：14618287
> 
> 赞同：0
> 
> 时间：2013-01-31T04:06:03.367
> 
> 标签：php, jquery

我可以使用 jquery 将 html 表单元素附加到表中。如何附加用 php/my sql 查询填充的菜单，以便 php 菜单位于 td 和 input... 之间？

```
<script type="text/javascript">
$(document).ready(function() {
      $("#link td input.rdelete").live("click", function () {
              $(".newrow").attr("disabled",false);
            var srow = $(this).parent().parent();
                        srow.remove();                  
            });
});

function AddNew() { 
           if($("#link tr").length > 12) {
              $(".newrow").attr("disabled",true);
           }
           var count = 0;
           count += 1;

        $("#link").append('<tr><td></td><td> <input type=\"button\" value = \"Delete\" class=\"rdelete\"/></td></tr>' );
           }
</script> 
```

php菜单是：

```
<select name="sub_discipline" id="sub_discipline">
            <option>Select Sub-discipline...</option>
            <?php 
$query = mysql_query("SELECT * from sub_discipline ORDER BY sub_discipline_name ASC");
while ($row = mysql_fetch_assoc($query)){
?>
            <option value="<?php echo $row['sub_discipline_pk']; ?>"><?php echo $row['sub_discipline_name']; ?></option>
            <?php 
}
?>
          </select> 
```

编辑：多亏了爆炸药丸，我现在有了：

```
<script type="text/javascript">
$(document).ready(function() {
$("#jMenu").jMenu();
      $("#link td input.rdelete").live("click", function () {
              $(".newrow").attr("disabled",false);
            var srow = $(this).parent().parent();
                        srow.remove();                  
            });
});

    function AddNew() { 
               if($("#link tr").length > 12) {
                  $(".newrow").attr("disabled",true);
               }

    $.getJSON('../scripts/link_menu.php', function (json) {
       $("#links").empty();
       $.each(json, function () {
           $("#links").append(new Option(this.link_title));
       });
    }); 

            $("#link").append('<tr><td></td><td><select name="links[]" id="links"> </select><input type=\"button\" value = \"Delete\" class=\"rdelete\"/></td></tr>' );

    </script> 
```

问题是只有第一个附加菜单被填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:17:33.370

您需要消除 PHP 和 JavaScript 一起运行的事实。他们对彼此是不可知论者（即他们不知道彼此的存在，但他们不愿意绝对声称对方不存在）。

您可以创建一个简单的 PHP 脚本，将 MySQL 结果回显为 JSON。

```
$query = mysql_query("SELECT * from sub_discipline ORDER BY sub_discipline_name ASC");
$rows = array();
while ($row = mysql_fetch_assoc($query)){ $rows[] = $row; }
echo json_encode($rows); 
```

然后，在您的 JavaScript 中：

```
$.getJSON('/agnostic-php-script.php', function (json) {
   $("#sub_discipline").empty();
   $.each(json, function () {
       $("#sub_discipline").append(new Option(this.subdiscipline_name));
   });
}); 
```

你也应该[停止使用`ext/mysql`](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)，如果可以避免的话，最好不要在循环中追加。

# ruby - 这行 Ruby 代码在做什么？

> ID：14618294
> 
> 赞同：0
> 
> 时间：2013-01-31T04:06:32.687
> 
> 标签：ruby

> **可能重复：**
> [Ruby 中的 class << self idiom](https://stackoverflow.com/questions/2505067/class-self-idiom-in-ruby)

我想知道这段代码在做什么。我没有低估这一行。我知道是什么`attr_accessor`。

```
class User
  class << self; attr_accessor :base_uri end
  ....
....
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T04:29:30.510

您会看到`class << self`在 Ruby 中经常使用。理解它的作用的最简单方法是将其视为（几乎）等价于：

```
class Abc
   self.attr_accessor ...
end 
```

这与此基本相同：

```
Abc.class.attr_accessor ... 
```

但你真的不能这样做，因为：

```
> Abc.class.attr_accessor :blah
NoMethodError: private method `attr_accessor' called for Class:Class 
```

所以要绕过它，你必须这样做：

```
> Abc.class.send(:attr_accessor, :blah) 
```

或者：

```
class Abc
  self.send(:attr_accessor, :blah)
end 
```

这就是`<< self`构造的用武之地，因为它使您可以访问这些私有方法。您基本上是直接在“自我空间”中操作。

同样，当您看到：

```
class Abc
   class << self
     def foo
     end
   end
end 
```

这就像说：

```
class Abc
   def self.foo
   end
end 
```

它将定义一个类方法，就像您问题中的代码将定义一个类级别的 attr_accessor 一样。

**编辑**

至于一种不太复杂的方法——默认情况下，Ruby 并没有真正能够创建类级 attr_accessors 的方法。这就是为什么你必须使用这个`<< self`技巧。

但是 Rails 确实定义了一个方法，它可以做类似的事情而不必使用`<< self`. 在 Rails 中，您有[`cattr_accessor`](http://apidock.com/rails/Class/cattr_accessor)：

```
class Abc
   cattr_accessor :blah
end

Abc.blah = 123
Abc.blah
>> 123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:11:49.733

这让我们在类上下文中定义一个实例变量。

见代码：

```
class User
  class << self; attr_accessor :base_uri end
  @base_uri = "aaa";
end

p User.base_uri # will output "aaa" 
```

# jquery - 同位素：第一项有时不可链接

> ID：14618295
> 
> 赞同：0
> 
> 时间：2013-01-31T04:06:32.850
> 
> 标签：jquery, jquery-isotope

我正在使用同位素并遇到一个奇怪的问题：在某些浏览器中，第一项不可链接。它发生在 Mac 上所有版本的 IE 和 Firefox 中。我在页面上有过滤器，如果您单击一个，则第一个项目变为可链接的。但最初并非如此。

我看到另一篇关于第一项的帖子，该解决方案与列宽有关......但在我的情况下，我已经改变了，因为这是一个响应式站点。

这是代码：

```
var $container = $('#project-thumbs');          
var $default_filter = ".featured";                  

$container.isotope({
    animationEngine: 'best-available',
    filter: $default_filter,
    itemSelector : '.thumb',
    // disable resizing
    resizable: false
});

// update columnWidth on window resize
$(window).smartresize(function(){
  $container.isotope({

  });
}); 
```

有什么想法吗？

更新 1：实际上，它似乎在所有浏览器中（PC Firefox 和 Chrome 也一样）。

我刚刚发现如果我使用 Firebug 改变我的拇指（正在移动的元素）以具有“位置：相对”，第一个项目变得可链接。但是，该插件正在添加“位置：绝对”（并且可能需要），因此自己设置此样式会被覆盖。但也许这是一个线索？

更新2：我越来越近了。我认为这是问题的一部分。我正在做的是，而不是最初显示所有项目，而是显示一个子集。如果您查看 HTML，列表中的第一项实际上是隐藏的，因为它不是我的子集的一部分。但是，它的链接似乎优先于“可见”的第一项......

更新 3：更多细节......与此同时，我试图弄清楚为什么某些文本在 Android 智能手机的此页面上看起来很模糊。我发现添加 transformsEnabled: false 解决了这个问题。但是，将其放在那里会导致这种“非链接”问题更频繁地发生 - 并且在所有浏览器中。这几乎就像这些项目没有被赋予正确的 z-index 或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:11:34.727

好的，所以我有一个解决方法可以完成这项工作，尽管它不是最优雅的选择。

我没有使用同位素插件过滤初始视图，而是让它加载所有内容。然后，我使用常规 jQuery 在页面上的过滤器链接上触发我想要最初加载的类别的点击事件。

```
// delay, then trigger click on Featured
$('#sub-nav a.featured').delay(5000).trigger('click'); 
```

正如我上面提到的，我注意到一旦你开始点击不同的过滤器，问题就消失了。因此，这有效地启动了有助于避免这种情况的点击。

如果有修复，仍然会对修复感兴趣！

谢谢。

# ruby-on-rails - 有没有更好的测试方法：管理员安全

> ID：14618302
> 
> 赞同：1
> 
> 时间：2013-01-31T04:07:38.870
> 
> 标签：ruby-on-rails, railstutorial.org

我正在阅读 Hartl 的 Rails 教程。我已经完成了 9.6 的第一个练习，他要求我测试 User`admin`属性是否不可访问。本书前面的理由是：

在[清单 9.42](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code-attr_accessible_review)之后，Hartl 的 Rails 教程说

> 如果我们在 User 模型中省略了 attr_accessible 列表（或者愚蠢地将 :admin 添加到列表中），恶意用户可以发送 PUT 请求，如下所示：
> 
> `put /users/17?admin=1`

教程中的相应练习（[练习 9.6.1 ）说](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec-updating_deleting_exercises)

> 添加测试以验证 User admin 属性不可访问

**我已经**使用以下代码完成了该测试`user_spec.rb`：

```
expect do
  @user.update_attributes(:admin => true)
end.to raise_error(ActiveModel::MassAssignmentSecurity::Error) 
```

但我使用 stackoverflow 来进行测试。 **这是我最初的想法**（在`user_pages_spec.rb`）：

```
expect do
    put user_path(user) + "?admin=1"
end.to raise_error(ActiveModel::MassAssignmentSecurity::Error) # or some other error 
```

**但我无法让它工作。**

所以我的问题是：

1.  **我的想法可行吗？**直接测试潜在黑客可能从命令行执行的操作不是更好吗？这不就是 Capybara 的想法，测试用户行为吗？

2.  **如果可能，测试质量分配和测试 PUT 动作之间是否有区别？**

3.  **如果不可能，为什么？** 只是没有必要还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:06:53.630

我想我会和你争论，你的测试实际上更好。有些人会争辩说，给定的答案是测试 Rails 功能，这真的不是你的工作。但是，我确实认为从几个不同的方向测试事物通常是件好事。

我在学生时代的印象是，除了执行 GET 之外，不可能通过 URI 发送数据。快速搜索 stackoverflow 并没有得到任何确认。但是，维基百科文章似乎暗示了这一点：

[http://en.wikipedia.org/wiki/POST_%28HTTP%2](http://en.wikipedia.org/wiki/POST_%28HTTP%2)

我认为正确的代码行是

```
put user_path(user), {user: {admin: 1}, id: user.id} 
```

我希望这会有所帮助。

# python - django_tables2 使用外键填充表

> ID：14618303
> 
> 赞同：3
> 
> 时间：2013-01-31T04:07:46.547
> 
> 标签：python, django, django-tables2

我正在尝试在我的网站上创建一个表，stackoverflow 用户建议我使用 django_table2。我试了一下，几分钟后我就有了一张漂亮的桌子，问题是我有一张使用classmodel.objects.all（）的桌子，但我有外键。我尝试了他们关于用数据填充表格的教程之一，但我无法用我的服装数据填充。

这是我的课：

这是我的模型：

```
class Player_Bios(models.Model):
    my_id            = models.SlugField(unique=True)
    player_id        = models.IntegerField(primary_key=True, max_length=50)    
    name             = models.CharField(max_length=50) 
    last             = models.CharField(max_length=50)

    def __unicode__(self):
       return self.player_id

class BatStat (models.Model):
    player_id           = models.ForeignKey('Player_Bios')
    team_id             = models.ForeignKey('Team')
    bat_stat_id         = models.CharField(max_length=50, unique=True)
    sport_code           = models.CharField(max_length=50, blank=True) 
    ab                  = models.IntegerField(max_length=50, null=True)

def __unicode__(self):
    return self.bat_stat_id 
```

我的观点：

```
def SpecificPLayer(request, playerslug):
   table = StatTable(Player_Bios.objects.all())
   RequestConfig(request).configure(table)
   return render(request, 'singleplayer.html', {'table': table}) 
```

我的表：# 假设填充表，但它没有。也许我必须更改视图中的某些内容，但是教程中没有提及

```
import django_tables2 as tables
player_bios.models import *

data = [
    {"name": "Bradley"},
    {"name": "Stevie"},
     ]  

class StatTable(tables.Table):
   name = tables.Column()

table = StatTable(data) 
```

我试图使用：

```
player.batstat_set.all() #but the table does not take it 
```

有没有办法按照 objects..all() 的工作方式来做，或者我可以像这样手动做：

在桌子上：

```
stat = player.batstat_set.all()
for i in stat:

data = [
    {"Player ID": i.player_id},
    {"team ID": i.team_id},
     ] 
```

# php - 显示数据库中的所有表

> ID：14618304
> 
> 赞同：1
> 
> 时间：2013-01-31T04:07:59.470
> 
> 标签：php, mysql, mysqli

如何使用 PHP 显示数据库中的所有信息（所有表和记录）？我阅读了将表格显示为 HTML 表格，但如何为所有表格执行此操作？

我在这里尝试了这个例子：http: [//davidwalsh.name/html-mysql-php](http://davidwalsh.name/html-mysql-php)

但它显示了表名，我如何也显示所有值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T07:10:49.190

好的。。试试这个

```
<?php
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
$mysqli = new mysqli("localhost", "username", "password", "DB");

$result = $mysqli->query("SHOW TABLES");
while ($row = $result->fetch_row()) {
    $table = $row[0];
    echo '<h3>', $table, '</h3>';
    $result1 = $mysqli->query("SELECT * FROM `$table`");
    echo '<table cellpadding="0" cellspacing="0" class="db-table">';
    $column = $mysqli->query("SHOW COLUMNS FROM `$table`");
    echo '<tr>';
    while ($row3 = $column->fetch_row()) {
        echo '<th>' . $row3[0] . '</th>';
    }
    echo '</tr>';
    while ($row2 = $result1->fetch_row()) {
        echo '<tr>';
        foreach ($row2 as $key => $value) {
            echo '<td>', $value, '</td>';
        }
        echo '</tr>';
    }
    echo '</table><br />';
}
$mysqli->close(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-26T12:13:28.567

您可以使用递归函数来显示数据库的树结构。

这是来自 [http://webcodingeasy.com/PHP/Simple-recursive-function-to-print-out-database-tree-structure的示例代码](http://webcodingeasy.com/PHP/Simple-recursive-function-to-print-out-database-tree-structure)

```
<?php
function print_menu($id = 0) 
{
    // get all records from database whose parent is $id
    $result = $query->select_result("*", "table", "where parent = '".$id."'");
    //check if there are any results
    if($result != 0)
    {
        echo "<ul> n";
        while($row = $query->fetch($result))
        {
            //print result and call function to check if it has children
            echo "<li>".$row['name']."</li> n";
            print_menu($row['ID']);
        }
        echo "</ul> n";
    }
}
print_menu();
?> 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-31T04:33:10.293

如果要`tables`使用`values`in拉取所有`mysql`内容，可以使用以下代码：

```
<?php
    mysql_connect ("localhost", "DB_USER", "DB_PASSWORD"); //your mysql connection  
    mysql_select_db('DB_NAME') or die( "Unable to select database"); //your db name 

    $tables = mysql_query("SELECT table_name FROM information_schema.tables WHERE table_schema='DB_NAME'"); //pull tables from theh databsase
    while ($table= mysql_fetch_row($tables)) { 
        $rsFields = mysql_query("SHOW COLUMNS FROM ".$table[0]); 
        while ($field = mysql_fetch_assoc($rsFields)) { 
            echo $table[0].".".$field["Field"].", "; //prints out all columns 
        } 
        echo $table[0];
        $query = "SELECT * FROM ".$table[0]; //prints out tables name
        $result = mysql_query($query); 
        PullValues($result); //call function to get all values
    }  

    //function to pull all values from tables
    function PullValues($result) 
    {     
        if($result == 0) 
        { 
            echo "<b>Error ".mysql_errno().": ".mysql_error()."</b>"; 
        } 
        elseif (@mysql_num_rows($result) == 0) 
        { 
            echo("<b>Query completed. No results returned.</b><br>"); 
        } 
        else 
        { 
            echo "<table border='1'> 
                <thead> 
                <tr><th>[Num]</th>"; 
            for($i = 0;$i < mysql_num_fields($result);$i++) 
            { 
                echo "<th>" . $i . "&nbsp;-&nbsp;" . mysql_field_name($result, $i) . "</th>"; 
            } 
            echo "  </tr> 
                </thead> 
                <tbody>"; 
            for ($i = 0; $i < mysql_num_rows($result); $i++) 
            { 
                echo "<tr><td>[$i]</td>"; 
                $row = mysql_fetch_row($result); 
                for($j = 0;$j < mysql_num_fields($result);$j++)  
                { 
                    echo("<td>" . $row[$j] . "</td>"); 
                } 
                echo "</tr>"; 
            } 
            echo "</tbody> 
            </table>"; 
        }  //end else 
    }  
?> 
```

我正在使用它并且在 中运行良好`mysql`，因为`mysqli`您需要稍微调整一下。

# html - 使用perl中的网络抓取从html页面输出xml

> ID：14618308
> 
> 赞同：1
> 
> 时间：2013-01-31T04:08:25.117
> 
> 标签：html, css, xml, perl

是否可以使用 perl 中的 web::scraper 从网页输出 xml。例如，我的 html 如下所示（我从 URL 中提取了部分 html）：

```
 > <table class="reference">
    >     <tr>
    >     <th width="23%" align="left">Property</th>
    >     <th width="71%" align="left">Description</th>
    >     <th style="text-align:center;">DOM</th>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_attributes.asp">attributes</a></td>
    >       <td>Returns a collection of a node's attributes</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     
    >     <tr>
    >       <td><a href="prop_node_baseuri.asp">baseURI</a></td>
    >       <td>Returns the absolute base URI of a node</td>
    >       <td style="text-align:center;">3</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_childnodes.asp">childNodes</a></td>
    >       <td>Returns a NodeList of child nodes for a node</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_firstchild.asp">firstChild</a></td>
    >       <td>Returns the first child of a node</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_lastchild.asp">lastChild</a></td>
    >       <td>Returns the last child of a node</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_localname.asp">localName</a></td>
    >       <td>Returns the local part of the name of a node</td>
    >       <td style="text-align:center;">2</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_namespaceuri.asp">namespaceURI</a></td>
    >       <td>Returns the namespace URI of a node</td>
    >       <td style="text-align:center;">2</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_nextsibling.asp">nextSibling</a></td>
    >       <td>Returns the next node at the same node tree level</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_nodename.asp">nodeName</a></td>
    >       <td>Returns the name of a node, depending on its type</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_nodetype.asp">nodeType</a></td>
    >       <td>Returns the type of a node</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_nodevalue.asp">nodeValue</a></td>
    >       <td>Sets or returns the value of a node, depending on its 
    >       type</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_ownerdocument.asp">ownerDocument</a></td>
    >       <td>Returns the root element (document object) for a node</td>
    >       <td style="text-align:center;">2</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_parentnode.asp">parentNode</a></td>
    >       <td>Returns the parent node of a node</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_prefix.asp">prefix</a></td>
    >       <td>Sets or returns the namespace prefix of a node</td>
    >       <td style="text-align:center;">2</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_previoussibling.asp">previousSibling</a></td>
    >       <td>Returns the previous node at the same node tree level</td>
    >       <td style="text-align:center;">1</td>
    >     </tr>
    >     <tr>
    >       <td><a href="prop_node_textcontent.asp">textContent</a></td>
    >       <td>Sets or returns the textual content of a node and its 
    >       descendants</td>
    >       <td style="text-align:center;">3</td>
    >     </tr>
    >     </table> 
```

所以我的 perl 代码如下：

```
 #!/usr/bin/perl
    use warnings;
    use strict;
    use URI;
    use Web::Scraper;

    # website to scrape
    my $urlToScrape = "http://www.w3schools.com/jsref/dom_obj_node.asp";

    my $rennersdata = scraper {
    process "table.reference > tr > td > a", 'renners[]' => 'TEXT';
 process "table.reference > tr > td:nth-of-type(2)", 'landrenner[]' => 'TEXT';
  process "table.reference > tr > td:nth-of-type(3)", 'dom[]' => 'TEXT';
     };

    my $res = $teamsdata->scrape(URI->new($urlToScrape));

for my $i (0 .. $#{$res->{renners}}) {
    print "<PropertyList>\n";
print "<Property>\n";
print "<Name> ";
    print $res->{renners}[$i];
    print "\n";
print "</Name>";
 print "\n";
print "</Property>\n";
print "</PropertyList>\n";
    }

for my $j (0 .. $#{$res->{landrenner}}) {
    print "<ReturnValue>\n";
    print $res->{landrenner}[$j];
    print "\n";
 print "</ReturnValue>\n";
    }

for my $k (0 .. $#{$res->{dom}}) {
    print "<domversion>\n";
    print $res->{dom}[$k];
    print "\n";
 print "</domversion>\n";
    } 
```

当我运行上面的代码时，我得到的所有输出如下：

```
<PropertyList>
<Property>
<Name>attributes</Name>
<Property>
<PropertyList>
<PropertyList>
<Property>
<Name>baseURI</Name>
<Property>
<PropertyList>
...
<ReturnValue>
Returns a collection of a node's attributes
</ReturnValue>
....
<domversion>
1
</domversion>
.... 
```

是否有可能得到如下输出：

```
<PropertyList>
<Property>
<Name>attributes</Name>
<ReturnValue>Returns a collection of a node's attributes</ReturnValue>
<DOMVersion>1</DOMVersion>
</Property> 
</PropertyList> 
```

如何组合上述三个 forloop 以获得上述输出？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:30:43.810

我意识到这不是您正在寻找的，但请看一下[HTML::Element](http://search.cpan.org/~cjm/HTML-Tree-5.03/lib/HTML/Element.pm)。它有一个[as_XML](http://search.cpan.org/~cjm/HTML-Tree-5.03/lib/HTML/Element.pm#as_XML)方法，可用于将 HTML 树转换为 XML。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:51:14.170

您只需要将输出移动到第一个`for`循环中。由于您在 中的三个键中的每一个中都有相同数量的项目`$res`，因此您可以使用`$i`来访问所有单个项目。您将通过迭代从 中获得属于彼此的三个值`$i`。

```
for my $i (0 .. $#{$res->{renners}}) {
  print <<"XML";
<PropertyList>
  <Property>
    <Name>$res->{renners}[$i]</Name>
    <ReturnValue>$res->{landrenner}[$i]</ReturnValue>
    <domversion>$res->{dom}[$i]</domversion>
  </Property>
</PropertyList>
XML
} 
```

我将`print`语句更改为使用[HERE 文档](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)，因为它更易于阅读。我还将行更改`my $res = $teamsdata->scrape(URI->new($urlToScrape));`为`my $res = $rennersdata->scrape(URI->new($urlToScrape));`因为`$teamsdata`未声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:50:01.947

试试这个：只需重新排列打印语句：

```
print "<PropertyList>\n";   
for my $i (0 .. $#{$res->{renners}}) {    
    print "<Property>\n";
    print "<Name> ";
        print $res->{renners}[$i]; print "\n";
    print "</Name>"; print "\n";

    for my $j (0 .. $#{$res->{landrenner}}) {
        print "<ReturnValue>\n";
            print $res->{landrenner}[$j];print "\n";
        print "</ReturnValue>\n";
    }
    for my $k (0 .. $#{$res->{dom}}) {
        print "<domversion>\n";
            print $res->{dom}[$k];print "\n";
        print "</domversion>\n";
    }   
    print "</Property>\n";
}
print "</PropertyList>\n"; 
```

# mysql - 隐藏这个的最简单方法是什么

> ID：14618309
> 
> 赞同：2
> 
> 时间：2013-01-31T04:08:29.553
> 
> 标签：mysql, sql, select

什么是最快的方法来转动这样的东西

```
╔════╦═══════╦═══════╦═══════╗
║ ID ║ IMG1  ║ IMG2  ║ IMG3  ║
╠════╬═══════╬═══════╬═══════╣
║  1 ║ 1.jpg ║ 2.jpg ║ 3.jpg ║
║  2 ║ 1.jpg ║ 2.jpg ║ 3.jpg ║
║  3 ║ 1.jpg ║ 2.jpg ║ 3.jpg ║
╚════╩═══════╩═══════╩═══════╝ 
```

进入这个

```
╔════╦════════╗
║ ID ║ IMAGES ║
╠════╬════════╣
║  1 ║ 1.jpg  ║
║  1 ║ 2.jpg  ║
║  1 ║ 3.jpg  ║
║  2 ║ 1.jpg  ║
║  2 ║ 2.jpg  ║
║  2 ║ 3.jpg  ║
║  3 ║ 1.jpg  ║
║  3 ║ 2.jpg  ║
║  3 ║ 3.jpg  ║
╚════╩════════╝ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:09:44.897

使用`UNION ALL`. `ALL`定义是否要保留重复记录。但是，如果您想要唯一的记录，请删除`ALL`.

```
SELECT id, img1 as images FROM tableNAME
UNION ALL
SELECT id, img2 as images FROM tableNAME
UNION ALL
SELECT id, img3 as images FROM tableNAME
-- ORDER BY ID, images 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/56dc3/1)

# ruby-on-rails-3 - Rails3：我应该把共享的自定义验证代码放在哪里？

> ID：14618312
> 
> 赞同：2
> 
> 时间：2013-01-31T04:08:51.570
> 
> 标签：ruby-on-rails-3, model

我有一小段代码，在应用程序的几个模型类中使用：

```
validates_format_of :month, :with => /\d{4}\/(0[1-9]|1[0-2])/i, :message => "must be in the format YYYY/MM" 
```

用什么方法来干燥这个？即，代码应该去哪里以及应该如何调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:00:36.383

看看[Active Model Validator](http://api.rubyonrails.org/classes/ActiveModel/Validator.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:27:37.587

您可以使用[rails 中的观察者](http://guides.rubyonrails.org/active_record_validations_callbacks.html#observers) 来干燥您的代码。

# sql - 如何在没有聚合函数的 sql server 中创建数据透视查询

> ID：14618316
> 
> 赞同：34
> 
> 时间：2013-01-31T04:09:21.013
> 
> 标签：sql, sql-server, tsql

我正在使用 MS SQL SERVER 2008 并且我有以下数据：

```
select * from account;

| PERIOD | ACCOUNT | VALUE |
----------------------------
|   2000 |   Asset |   205 |
|   2000 |  Equity |   365 |
|   2000 |  Profit |   524 |
|   2001 |   Asset |   142 |
|   2001 |  Equity |   214 |
|   2001 |  Profit |   421 |
|   2002 |   Asset |   421 |
|   2002 |  Equity |   163 |
|   2002 |  Profit |   325 | 
```

我想让它们变成这样：

```
| ACCOUNT | 2000 | 2001 | 2002 |
--------------------------------
|   Asset |  205 |  142 |  421 |
|  Equity |  365 |  214 |  163 |
|  Profit |  524 |  421 |  325 | 
```

我尝试查询使用`pivot query`但该值必须使用`aggregate function`并且结果不合适。我应该怎么办？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-31T04:18:33.150

```
SELECT *
FROM
(
SELECT [Period], [Account], [Value]
FROM TableName
) AS source
PIVOT
(
    MAX([Value])
    FOR [Period] IN ([2000], [2001], [2002])
) as pvt 
```

另一种方式，

```
SELECT ACCOUNT,
      MAX(CASE WHEN Period = '2000' THEN Value ELSE NULL END) [2000],
      MAX(CASE WHEN Period = '2001' THEN Value ELSE NULL END) [2001],
      MAX(CASE WHEN Period = '2002' THEN Value ELSE NULL END) [2002]
FROM tableName
GROUP BY Account 
```

*   [SQLFiddle 演示（*两个查询*）](http://www.sqlfiddle.com/#!3/f8816/6)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T04:47:29.257

也检查一下：使用`xml path`和`pivot`

**[SQLFIDDLE 演示](http://sqlfiddle.com/#!3/2f2df/19)**

```
| ACCOUNT | 2000 | 2001 | 2002 |
--------------------------------
|   Asset |  205 |  142 |  421 |
|  Equity |  365 |  214 |  163 |
|  Profit |  524 |  421 |  325 |

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.period) 
            FROM demo c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT account, ' + @cols + ' from 
            (
                select account
                    , value
                    , period
                from demo
           ) x
            pivot 
            (
                 max(value)
                for period in (' + @cols + ')
            ) p '

execute(@query) 
```

# gwt - GWT Requestfactory 中的客户端实体代理继承

> ID：14618321
> 
> 赞同：5
> 
> 时间：2013-01-31T04:09:48.340
> 
> 标签：gwt, requestfactory

我使用 GWT 2.5 RequestFactory，假设在服务器端，我有`A`, `B`, `C`, `D`4 个实体，在客户端，我有`AProxy`, `BProxy`, `CProxy`,`DProxy`对应于服务器端实体。 `B`,`C`延伸`A`. 在`D`实体中，我有一个方法：

```
A getEntity(); 
```

这**实际上**将返回`B`or `C`，在客户端，在`DProxy`，我有：

```
AProxy getEntity(); 
```

我的问题是在客户端，当我得到时`AProxy`，我可以将它转换为`BProxy`或者`CProxy`，如果没有，有没有办法获得**实际**的实体代理？

PS 在 DProxy 中，我有`@ExtraTypes({BProxy,CProxy})`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T06:30:14.430

如果`BPRoxy extends AProxy`with `@ProxyFor(B.class)`（或等价物）和`CProxy extends AProxy`with `@ProxyFor(C.class)`（或等价物），那么是的，它应该可以工作：`getEntity()`将返回一个`AProxy`，`BProxy`或`CProxy`取决于服务器端返回的对象。

# excel - 如何将文本日志文件导入 excel 列

> ID：14618326
> 
> 赞同：3
> 
> 时间：2013-01-31T04:10:40.807
> 
> 标签：excel, text

我有一些表格数据

```
[39645961,-79966658]358920045121212[0.75]2013-01-30 20:47:52
[39646124,-79966771]358920045121212[0.5]2013-01-30 20:47:54
[39646134,-79966733]358920045121212[0.5]2013-01-30 20:47:56
[39646123,-79966723]358920045121212[0.5]2013-01-30 20:47:58
[39646144,-79966724]358920045121212[0.5]2013-01-30 20:48:09
...... 
```

如何将它们导入到单独的列中的 excel 文件中。像

```
39645961 -79966658 358920045121212 0.75 2013-01-30 20:47:52
39646124 -79966771 358920045121212 0.5 2013-01-30 20:47:54
39646134 -79966733 358920045121212 0.5 2013-01-30 20:47:5 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T06:54:12.983

如果不是太频繁的任务：

1.  将文本复制粘贴到 Excel（将占用一列）
2.  数据 - 文本到列 (Excel 2003)
3.  分隔符：逗号和其他：`]`
4.  完成操作后，在剩余的未拆分片段 ( `358920045121212[0.75`) 之后插入一列，并仅针对该列重复 Text to Columns，其他分隔符为`[`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:29:34.090

1) 将数据复制到文本文件中，例如记事本。

2) 使用查找和替换将括号字符替换为制表符。您不能直接在替换字段中键入制表符，因为它只会将光标移动到下一个字段。要解决此问题：打开另一个记事本窗口并按 Tab，然后将选项卡复制到原始记事本窗口的替换字段中。点击替换并使用空格和逗号字符重复此过程。

3) 保存并关闭记事本文件。

4) 在 Excel 中打开记事本文件。（选择文件，打开，不要忘记将打开对话框中的文件类型从“所有 Excel 文件”更改为“所有文件”

5) 这将打开文本导入向导。点击下一步，下一步和完成，数据应显示在单独的列中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T04:37:29.267

如果您想在 Excel 中严格执行此操作，则必须使用文本函数组合（包括 SEARCH 或 FIND、LEFT、MID 和 RIGHT）从每个字符串中提取单个数据元素。以下公式显示了一个 wqy 从一个字符串中提取每个元素，我假设它在 A1 中。

```
 =MID(A1,2,SEARCH(",",A1)-2)
  =MID(A1,SEARCH(",",A1)+1,SEARCH("]",A1)-SEARCH(",",A1)-1)
  =MID(A1,SEARCH("]",A1)+1,SEARCH("]",A1)+SEARCH("[",MID(A1,SEARCH("]",A1),99))-SEARCH("]",A1)-2)
  =MID(A1,SEARCH("[",A1,2)+1,SEARCH("]",MID(A1,SEARCH("[",A1,2)+1,99))-1)
  =MID(A1,SEARCH("????-??-??",A1),10)
  =RIGHT(A1,8) 
```

您将在 A1 右侧水平输入这些公式，然后将它们复制下来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-26T15:11:53.617

有一个更简单的方法 - 使用第三方软件。

我使用的那个一年花费我很少，但这意味着我不需要为了让它正确而乱七八糟。

它是我发现的唯一一个不是每月订阅的工具。

它是一个基于桌面的应用程序。

[https://onpage.rocks/product/server-log-tool/](https://onpage.rocks/product/server-log-tool/)

# ruby - 如果在数组中找不到项目，则使用默认值

> ID：14618328
> 
> 赞同：3
> 
> 时间：2013-01-31T04:10:59.220
> 
> 标签：ruby, select

所以我的代码试图从对象数组中选择一个对象，如果找不到该对象，我想创建我的默认值。

```
lead_time = lead_times.select{|d| LeadTimeProfile.new unless d.day_of_week == day } 
```

但是，据我所知，这并没有返回给我 devault LeadTimeProfile。

有没有办法做到这一点？还是我做对了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T04:17:08.463

> 所以我的代码试图从对象数组中选择一个对象，如果找不到该对象，我想创建我的默认值。

看看[Enumerable#find](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find)

```
lead_time = lead_times.find{ |d| d.day_of_week == day } || LeadTimeProfile.new 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:19:03.500

首先过滤您的数组，然后进行构造

前导时间 = 前导时间。选择{|d| d.day_of_week == 天}.map {|d| LeadTimeProfile.new(d)}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-18T17:01:29.127

Here is another way to get the same results as what Kyle posted. There is no difference between this and using a or gate other than maybe making chaining method calls a bit cleaner.

```
day = 2
lead_times.find(-> { LeadTimeProfile.new }) { |p| 
  p.day_of_week == day 
}.day_of_week 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T23:40:02.230

将 lambda 作为参数传递也可以。

```
lead_time = lead_times.find(lambda { LeadTimeProfile.new } ){ |d| d.day_of_week == day } 
```

# solr - Solr - 前缀查询

> ID：14618332
> 
> 赞同：4
> 
> 时间：2013-01-31T04:11:10.673
> 
> 标签：solr

当我使用查询进行搜索时`addr:s*`

我得到......（这是虚拟数据）

```
addr=someword
addr=banana-sunny.or
addr=seventy
addr=salvation 
```

我只想要那些以 开头的记录`s`，但结果中的第二个记录以`b`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T04:25:52.503

您可能正在对地址字段使用文本分析，将单词拆分为多个标记。
在这种情况下，单词“banana-sunny”可能会拆分为多个标记（banana、sunny 或 ）。
因此，对 s* 的搜索将返回结果。
如果您不想拆分，请使用 KeywordTokenizerFactory 和其他过滤器定义新的字段类型。例如

```
<fieldType name="text_string" class="solr.TextField" sortMissingLast="true" omitNorms="true">
  <analyzer>
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory" />
  </analyzer>
</fieldType> 
```

# c - 将数组的一个子集复制到另一个数组/数组切片中

> ID：14618342
> 
> 赞同：14
> 
> 时间：2013-01-31T04:11:49.073
> 
> 标签：c, arrays, subset, slice

在 C 中，有没有内置的数组切片机制？

例如在 Matlab 中，A(1:4)

会产生=

```
 1     1     1     1 
```

我怎样才能在 C 中实现这一点？

我试着寻找，但我能找到的最接近的是：[http ://cboard.cprogramming.com/c-programming/95772-how-do-array-subsets.html](http://cboard.cprogramming.com/c-programming/95772-how-do-array-subsets.html)

子集数组 = &bigArray[someIndex]

但这并不完全返回切片数组，而是指向切片数组的第一个元素的指针......

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T04:20:32.367

在标准 C 中这样做是不可能的。你必须自己做。如果你有一个字符串，你可以使用 string.h 库来处理它，但是对于整数，我不知道有什么库。除此之外，在拥有你所拥有的东西之后，你想要从哪里开始你的子集，实际上很容易实现。

假设您知道“主”数组的大小并且这是一个整数数组，您可以这样做：

```
subset = malloc((arraySize-i)*sizeof(int)); //Where i is the place you want to start your subset. 

for(j=i;j<arraySize;j++)
   subset[j] = originalArray[j]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T18:54:15.407

感谢大家指出C中没有这样的内置机制。

我尝试使用@Afonso Tsukamoto 的建议，但我意识到我需要一个多维数组的解决方案。所以我最终编写了自己的函数。我会把它放在这里以防其他人正在寻找类似的答案：

```
void GetSlicedMultiArray4Col(int A[][4], int mrow, int mcol, int B[1][4], int sliced_mrow)
{
    int row, col;
    sliced_mrow = sliced_mrow - 1; //cause in C, index starts from 0
    for(row=0; row < mrow; row++)
    {
        for (col=0; col < mcol; col++)
        {
            if (row==sliced_mrow) B[0][col]=A[row][col];
        }
    }
} 
```

所以 A 是我的输入（原始数组），B 是我的输出（切片数组）。我这样调用函数：

```
GetSlicedMultiArray4Col(A, A_rows, A_cols, B, target_row); 
```

例如：

```
int A[][4] = {{1,2,3,4},{1,1,1,1},{3,3,3,3}};
int A_rows = 3; 
int A_cols = 4; 
int B[1][4]; //my subset
int target_row = 1;

GetSlicedMultiArray4Col(A, A_rows, A_cols, B, target_row); 
```

这将产生一个在 Matlab 中等于 A(target_row,1:4) 的结果（多维数组 B[1][4]）。

我是 C 新手，所以如果我错了或者这段代码可以做得更好，请纠正我......再次感谢 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T04:22:19.213

在 C 中，据我所知，数组名只是被视为一个 const 指针。所以你永远不知道子集的大小。您还可以将数组分配给新地址。因此，您可以简单地使用指针。但是您应该自己管理子集的大小。

# python - 无法将游戏状态带回菜单

> ID：14618344
> 
> 赞同：-1
> 
> 时间：2013-01-31T04:11:51.553
> 
> 标签：python, menu, pygame

我正在使用 Python 和模块 Pygame 创建一个小游戏。

我尝试实现一个非常基本的（我猜是一个非常幼稚的）状态管理器。

**但是，
我目前有一个问题：
一旦切换“播放”状态，我就无法切换回“菜单”。
这是我设计状态管理器的缺陷吗？**

我有两种方法，

1.  该`state_change`方法采用一个参数，即所需的状态。
2.  该`state_check`方法将状态作为唯一参数并将其作为当前状态返回。

以下是两种方法：

```
def state_check(self, state):
    self.current_state = state
    print self.current_state
    return self.current_state

def state_change(self, state):
    self.state = state 
```

在主循环之前，
第一个`state`被初始化为“菜单”。
在主循环内部，
`state_check`位于 if 语句之前，用于指示从哪个状态开始。

```
def game_loop(self):                                                                       

    running = True
    self.test_car = car()
    self.state = "menu"
    while running:
        pygame.display.set_caption("Project G")
        self.state_check(self.state)
        if self.current_state ==  "menu":
            self.state_check(self.state)
            self.screen.blit(self.background, (0,0))
            #Blits the current state on the screen for testing purposes.
            self.screen.blit(self.menu_text, (700, 580))
            self.event_handler()
            pygame.display.flip()
        if self.current_state == "play":
            self.state_check(self.state)
            self.screen.blit(self.background, (0,0))
            #Blits the current state on the screen.
            self.screen.blit(self.play_text, (700, 580))
            self.test_car.event_handler()
            self.test_car.update(self.test_car.x_speed, self.test_car.y_speed)
            pygame.display.flip() 
```

在 if 语句中，
是事件处理程序方法，我目前使用键盘输入在状态之间切换（通过调用`state_change`方法）并退出程序。

使用一些打印方法，我已经**排除了键未注册的可能性**。

```
#Event handler for the menu

def event_handler(self):

    for event in pygame.event.get():
        if event.type == QUIT:
           pygame.quit()
           sys.exit()
        if event.type == KEYDOWN:
            if event.key == K_p:
                self.state_change("play")
                print "Key Pressed: p"
            if event.key == K_q:
                print "Key Pressed: q"
                pygame.quit()
                sys.exit() 
```

```
#Sample of the Event handler for "play"

def event_handler(self):
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            if event.key == K_m:
                self.state_change("menu")
                print "Key Pressed: m"
            if event.key == K_q:
                print "Key Pressed: q"
                pygame.quit()
                sys.exit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:36:18.483

一些可能性，以下行可能指的是错误的对象（`test_car`什么时候应该是菜单？），但如果没有其余的代码，我真的无法判断。

```
self.test_car.event_handler() 
```

但如果这应该发生，那么在`test_car.event_handler`你调用`self.state_change`的那个可能不会改变你所期望的状态，因为到那时，菜单`self`是而不是实际的。`test_car`这意味着您永远不会真正更改`menu.state`（或任何`main_loop`正在运行的对象），而是在更改`test_car.state`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:41:56.863

我认为您使事情变得有些复杂-您真的需要 check_state 和 set_state 函数以及两个变量吗？

我会做这样的事情：

```
class State(object):
    menu = "menu"
    play = "play"

class Game(??):

    def event_handler(self):
        for event in pygame.event.get():
            if event.type == KEYDOWN:
                if event.key == K_m:
                    self.state = State.menu
                    print "Key Pressed: m"
                elif event.key == K_p:
                    self.state = State.play
                    print "Key Pressed: p"

    def game_loop(self):
        self.state = State.menu

        while running:
            if self.state is State.menu:
                # Do menu things
            elif self.state is State.play:
                # Play game! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:41:14.217

您在运行循环中一个接一个地使用两个**if语句。**尝试改用**if**和**elif**语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:02:07.800

我相信你已经使你的游戏状态管理复杂化了。

1.  不需要功能，
    *   `state_change`
    *   `state_check`.
2.  或用于处理状态的 2 个变量。

    *   `self.state`
    *   `self.current_state`

对于游戏状态，您可以使用一个变量
- `<type 'bool'>`如果有 2 个。
- `<type 'int'>`如果有超过 2 个。
但是使用字符串使代码可读。

在这种情况下，**即使是 1 个变量也可以**，（见下文）
我**建议使用 2 个变量**
1\. A`tuple`包含所有可能的状态。
2\. 当前状态、价值或指数（参考`tuple`）

这种方法也适用于更多状态，为您提供开发更多状态的空间，而无需太多管理麻烦，

如何？
看下面的代码和2个变量的使用

1.  `self.state`
2.  `self.states`

**代码：**

```
class Game:

    def __init__(...):
        self.states = ('menu','play')
        self.state = 0

    def events_play(self):
        for event in pygame.event.get():
            # event handling
                self.state = self.states[0]

    def events_menu(self):
        for event in pygame.event.get():
            # event handling
                self.state = self.states[1]

    def game_loop(self):

        while running:
            if self.state == 'menu':
                # I always handle events first :)
                self.events_menu()
                # Do menu things

            elif self.state == 'play':
                # I always handle events first :)
                self.events_play()
                # Play game! 
```

# ios - 下次应用启动时我可以关闭本地通知吗？

> ID：14618345
> 
> 赞同：2
> 
> 时间：2013-01-31T04:11:58.253
> 
> 标签：ios, serialization, uilocalnotification, notificationcenter

我知道当用户在通知中心点击此通知时我可以取消通知。但是我可以在无法从系统获取相关本地通知的其他地方取消通知吗？我可以序列化本地通知，并在应用程序下次运行时取消它吗？

很抱歉让您误会了！

**我想取消在通知中心发布的通知，但不是预定的通知。所以我想问的是如何保存本地通知对象，然后我可以在下次启动应用程序时使用它自行关闭。也许现在的sdk无法完成这项工作。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:45:57.327

如果您需要取消所有通知，您可以使用：

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

取消特定通知：

```
[[UIApplication sharedApplication] cancelLocalNotification:aNotification]; 
```

要获取特定的通知，您可以使用：

```
NSArray *notifArray = [[UIApplication sharedApplication] scheduledLocalNotifications];
for (int i = 0; i < [notifArray count]; i++)
{
    UILocalNotification *aEvent = [notifArray objectAtIndex:i];
    NSDictionary *userInfo = aEvent.userInfo;
    NSString *notifId=[NSString stringWithFormat:@"%@",[userInfo valueForKey:@"id"]];
    if ([id isEqualToString:cancelId])
    {
        [[UIApplication sharedApplication] cancelLocalNotification:aEvent];
        break;
    }
} 
```

这里：

*   您需要在通知中存储一个 id 键值对，`userInfo`以识别特定的本地通知
*   `cancelId`是您要取消的通知的ID（存储在用户信息中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:14:20.833

使用此代码获取所有预定通知：

```
NSArray *reminderArray=[[UIApplication sharedApplication]scheduledLocalNotifications]; 
```

然后您可以选择所需的通知并将其删除。

```
[[UIApplication sharedApplication]cancelLocalNotification:yourNotification]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:16:06.480

如果您保存通知的链接，那么您可以在它触发之前取消它。

```
[[UIApplication sharedApplication]cancelLocalNotification:yourNotification]; 
```

# python - SQLAlchemy 合并（）不使用烧瓶工作

> ID：14618348
> 
> 赞同：0
> 
> 时间：2013-01-31T04:12:13.127
> 
> 标签：python, orm, sqlalchemy, flask, crud

我正在学习如何使用 sqlalchemy，并且正在开发小型应用程序。我在尝试使用 ORM 更新存储在数据库中的数据时遇到一些问题。我不确定我错过了什么。表单`edit_product.html`会填充正确的数据，但是`return redirect(url_for`会触发语句而不更新数据。我正在使用 merge()，我尝试`add()`按照一些教程的建议使用，但是如果我这样做，我会收到一条错误消息，指出记录已经存在。

这是我的`edit_product`功能`views.py`：

```
from database import db_session
@app.route('/product/edit/<int:product_id>', methods=['GET', 'POST'])
def edit_product(product_id):
    product = Product.query.filter(Product.id == product_id).first()
    form = NewOtrosForm(obj=product)
    if request.method == 'POST':
        print request.form
        if form.validate():
            form.populate_obj(product)
            db_session.commit()
        return redirect(url_for('product'))
    else:
        return render_template('edit_product.html', form=form) 
```

这是我在 jinja2 模板中的编辑表单中的内容：

```
{% from "_formhelpers.html" import render_field %}
    <form method=post action="">
        <dl>
            {{ render_field(form.name) }}
            {{ render_field(form.price) }}
            {{ render_field(form.description) }}
            {{ render_field(form.provider) }}
            {{ render_field(form.detalles) }}
        </dl>
        <p><input type="submit" value="Save Changes"></p>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:52:34.283

您不需要[`merge()`](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#merging)在这里使用 use，它的目的是将状态从外部对象转移到会话中的新实例或已经存在的实例。您的`product`对象已经属于会话，因此调用`form.populate_obj(product)`（更改以`product`在此会话中将其标记为“脏”）以及`db_session.commit()`之后调用就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:00:46.100

您可以尝试更改以下内容：

```
form = NewOtrosForm(obj=product) 
```

到：

```
form = NewOtrosForm(request.form, obj=product) 
```

# android - 警报对话框中的 AutoCompleteTextView

> ID：14618349
> 
> 赞同：1
> 
> 时间：2013-01-31T04:12:15.027
> 
> 标签：android, android-alertdialog, autocompletetextview

在我的应用程序中，我创建了一个包含自动完成视图的对话框。在自动完成视图中，我希望它弹出建议。当我输入名称时。但问题是它只给出了 2 条建议。

这是我在 XML 文件中的自动完成视图的代码

```
<com.example.netmdapp1.CustomAutoCompleteTextView
    android:id="@+id/customautocomplete"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@android:color/black"
    android:completionThreshold="3"
    android:scrollbars="vertical" /> 
```

这是我的 CustomAutoCompleteTextView 类

```
public class CustomAutoCompleteTextView extends AutoCompleteTextView {
    HashMap<String, String>hm;

    public CustomAutoCompleteTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected CharSequence convertSelectionToString(Object selectedItem) {
         hm = (HashMap<String, String>)selectedItem;
         return hm.get("name");
    }

    public String getid() {
        return hm.get("id");
    }
} 
```

下面给出了将适配器设置为我的自动完成 textView 的代码

```
final CustomAutoCompleteTextView autoComplete = new CustomAutoCompleteTextView(getParent(), null);
SimpleAdapter adapter = new SimpleAdapter(getParent(), patientList, R.layout.autocomplete_texts, from, to); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:37:25.443

我认为你应该看看这个： **[android-immediate-auto-complete](https://stackoverflow.com/questions/4235330/android-immediate-auto-complete)**

它会帮助你。

随意发表评论。

# powershell - 将输入对象传递给 Start-Job 文件

> ID：14618350
> 
> 赞同：1
> 
> 时间：2013-01-31T04:12:16.873
> 
> 标签：powershell, powershell-2.0

我似乎无法弄清楚为什么传递给 start-job 的输入会消失。我在一个脚本中有这段代码：

```
$data = "some test string data"
Start-Job -FilePath ".\Tasks.ps1" -InputObject $data 
```

在`tasks.ps1`脚本中，除非我立即调用它，否则我会得到对象的空值，`$input`但这样做后会消失：

```
$input #displays the data
$input #null 
```

我已经尝试立即将其分配给另一个变量 ( `$newvalue = $input`)，但该变量的值也显示为 null。

我在这里想念什么？如何保留输入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:48:07.047

好的，我找到了问题所在。$input 对象作为[PilelineReader](http://msdn.microsoft.com/en-us/library/windows/desktop/ms551699%28v=vs.85%29.aspx)传递，我假设在作业中调用它是 ReadToEnd。当我将 $input 分配给一个变量时，我发送的是 PipeLineReader 而不是它的值。为了解决这个问题，我使用了这个：

```
[string]$newData = $input 
```

这可以防止在访问对象时发生读取操作。

# java - 如何测试一个数组是否包含一对乘积为偶数的数字？

> ID：14618352
> 
> 赞同：0
> 
> 时间：2013-01-31T04:12:22.317
> 
> 标签：java, arrays, algorithm

如果存在一对乘积为偶数的数字，我如何编写一个接受整数数组并返回 true 的函数？

偶数的性质是什么？当然，你如何用 Java 编写这个函数？另外，也许是对您如何为实际实现制定算法的简短解释。这是来自书中的，但我只是想学习解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:23:15.223

如果其中至少有一个是偶数，则一对整数总是会产生偶数乘积。如果两者都是奇数，它就不能产生偶数产品。因此，您只需要检查数组中是否至少有 1 个偶数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:23:21.523

这是一个数学概念和已知事实，任何偶数乘以任何其他数都是偶数。因此，如果数组中的任何一个数字是偶数，您所要做的就是返回 true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T04:44:33.380

正如其他人所指出的，只有一个偶数就足够了。

您只需要迭代直到找到偶数，或者在数组的末尾没有偶数。

```
public static boolean hasEvenNumber(int[] vals) {
    int i = 0;
    while(i < vals.length) {
        if(vals[i] % 2 == 0) {
            return true;
        }
        i++;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T04:22:47.747

算法很简单。

您需要一个偶数应该出现在整数数组中。

因为偶数与奇数/偶数的倍数导致偶数。因此，如果有偶数，则可以返回 true。

在 java 中，

```
public static int  has_even_pair(int [ ] values,int n)  //method definition to find sum
{
      int i;
      for(i=0; i< n; i++)
      {
          if (values[i] % 2 == 0 )
          {
               return 1;

           }

      }

      return 0 ;
 } 
```

# batch-file - 用于查找驱动器是否已解锁的批处理脚本

> ID：14618354
> 
> 赞同：1
> 
> 时间：2013-01-31T04:12:39.197
> 
> 标签：batch-file

我正在尝试编写一个解锁位锁定驱动器的批处理脚本。首先，我正在尝试检查驱动器是否已锁定。到目前为止，我有：

```
:: Check if the drive is already unlocked
set unlockstatus=0

FOR /F "tokens=*" %%i IN ('manage-bde -status %inp%') DO (
  echo %%i | find /c "Unlocked" | set /p found=
  if %found%==1 set unlockstatus=1
)
if %unlockstatus%==1 (
  echo This drive is already unlocked.
  goto input
) 
```

%inp% 是一个驱动器号，后跟一个冒号。

出于某种原因，这直接不起作用。由于某种原因，管道输入到第二行的 set 命令中似乎不起作用。其他一切似乎都正常。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:01:18.480

使用另一个 for 循环来解析 find 命令的结果。

```
:: Check if the drive is already unlocked
set "unlockstatus=0"

FOR /F "tokens=*" %%A IN ('manage-bde -status %inp%') DO (
    FOR /F "tokens=*" %%B in ('echo %%A ^| find /c "Unlocked"') DO (
        if "%%B"=="1" set "unlockstatus=1"
    )
)
if "%unlockstatus%"=="1" (
    echo This drive is already unlocked.
    goto input
) 
```

# xcode - Xcode 能很好地处理子文件夹中的多个 .git 吗？

> ID：14618359
> 
> 赞同：1
> 
> 时间：2013-01-31T04:13:55.407
> 
> 标签：xcode, git

`Foobar`对于文件夹中的新项目`~/Code`，Xcode 在 中创建以下内容`~/Code/Foobar/`：

*   `.git`
*   `Foobar`
*   `Foobar.xcodeproj`

对于第三方库，我将它们放在一个`~/Code/Foobar/Vendor`文件夹中，例如：

```
 cd ~/Code/Foobar/Vendor
 git clone https://github.com/ohho/GPUImage.git 
```

有两个`.git`文件夹：

*   `~/Code/Foobar/.git/`
*   `~/Code/Foobar/Vendor/GPUImage/.git/`

将来，Xcode 的`Source Control`>`Commit Selected Files...`功能会在两个存储库中很好地工作`.git`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:10:25.377

如果您选择了这种方法，XCode 4 确实知道如何管理子模块（请参阅“[具有两个相互依赖的项目的 Xcode 4 工作区：我也应该使用 git 子模块吗？](https://stackoverflow.com/questions/8787956/xcode-4-workspace-with-two-interdependent-projects-should-i-also-use-git-submod) ”）。
这种方法在“[向 xcode 4 项目中添加一个简单的库](https://stackoverflow.com/a/6976502/6309)”中进行了说明。

但即使没有子模块，它也应该很好地管理嵌套的 git repos。父 git repo 将忽略嵌套的。

# objective-c - 如何在我们的视频文件中合并音频

> ID：14618362
> 
> 赞同：1
> 
> 时间：2013-01-31T04:14:25.583
> 
> 标签：objective-c, ios4, ios6, avfoundation

我有一个应用程序，我需要将音频文件合并到 AVCapture 会话录制的视频中，以便可以听到录制电影的音频和合并的音频。

我能够使用 avcomposition 将音频合并到视频中，并且效果很好。但问题是无法听到原始音频文件。这是我的代码。

```
NSString *resourceAudioName = [NSString stringWithFormat:@"%@_audio",getTitle];
NSURL    *audio_inputFileUrl = [[NSBundle mainBundle] URLForResource:resourceAudioName withExtension:@"mp3"];

NSString  *    video_inputFilePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
video_inputFilePath = [video_inputFilePath stringByAppendingPathComponent:@"movie1.mp4"];

self.outputFilePath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"/Documents/OutPutMovie-%@.mp4",[NSDate date]]];
NSURL     *   outputFileUrl = [NSURL fileURLWithPath:self.outputFilePath];
if (audio_inputFileUrl) {

    AVMutableComposition* mixComposition = [AVMutableComposition composition];
    NSURL    *    video_inputFileUrl = [NSURL fileURLWithPath:video_inputFilePath];
    CMTime nextClipStartTime = kCMTimeZero;
    AVURLAsset      *    videoAsset = [[AVURLAsset alloc]initWithURL:video_inputFileUrl options:nil];
    NSArray         *   videoAssetTracks2 = [videoAsset tracksWithMediaType:AVMediaTypeVideo];
    AVAssetTrack     *   videoAssetTrack2 = ([videoAssetTracks2 count] > 0 ? [videoAssetTracks2 objectAtIndex:0] : nil);
    CMTimeRange        video_timeRange = CMTimeRangeMake(kCMTimeZero,videoAsset.duration);
    AVMutableCompositionTrack   *    a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [a_compositionVideoTrack     insertTimeRange:video_timeRange ofTrack:videoAssetTrack2 atTime:nextClipStartTime error:nil];

    AVURLAsset      *     audioAsset = [[AVURLAsset alloc]initWithURL:audio_inputFileUrl options:nil];
    NSArray         *    videoAssetTracks = [audioAsset tracksWithMediaType:AVMediaTypeAudio];
    AVAssetTrack     *    videoAssetTrack = ([videoAssetTracks count] > 0 ? [videoAssetTracks objectAtIndex:0] : nil);
    CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);
    AVMutableCompositionTrack     *    b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [b_compositionAudioTrack        insertTimeRange:audio_timeRange ofTrack:videoAssetTrack atTime:nextClipStartTime error:nil];

    AVAssetExportSession      * _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];
    _assetExport.outputFileType = @"com.apple.quicktime-movie";
    _assetExport.outputURL = outputFileUrl;
        [_assetExport exportAsynchronouslyWithCompletionHandler:
     ^(void ) {

         if (AVAssetExportSessionStatusCompleted == _assetExport.status) {
            [videoAsset release];
             [audioAsset release];
             [_assetExport release];
             [self performSelectorOnMainThread:@selector(moveNextView) withObject:nil waitUntilDone:YES];
         }
         }
     ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-08T14:32:42.283

```
 -(void)mergeAndSave
  {
//Create AVMutableComposition Object which will hold our multiple       AVMutableCompositionTrack or we can say it will hold our video and audio files.
AVMutableComposition* mixComposition = [AVMutableComposition composition];

//Now first load your audio file using AVURLAsset. Make sure you give the correct path of your videos.
NSURL *audio_url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"kick" ofType:@"mp3"]];
self.audioAsset = [[AVURLAsset alloc]initWithURL:audio_url options:nil];
CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, self.audioAsset.duration);

//Now we are creating the first AVMutableCompositionTrack containing our audio and add it to our AVMutableComposition object.
AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[self.audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil];

//Now we will load video file.
NSURL *video_url = mediaUrl;
self.videoAsset = [[AVURLAsset alloc]initWithURL:video_url options:nil];
CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,self.audioAsset.duration);

//Now we are creating the second AVMutableCompositionTrack containing our video and add it to our AVMutableComposition object.
AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
[a_compositionVideoTrack insertTimeRange:video_timeRange ofTrack:[[self.videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];

//decide the path where you want to store the final video created with audio and video merge.
NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsDir = [dirPaths objectAtIndex:0];
NSString *outputFilePath = [docsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"video.mov"]];
NSURL *outputFileUrl = [NSURL fileURLWithPath:outputFilePath];
if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath])
    [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];

//Now create an AVAssetExportSession object that will save your final video at specified path.
AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];
_assetExport.outputFileType = @"com.apple.quicktime-movie";
_assetExport.outputURL = outputFileUrl;

[_assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) {
     dispatch_async(dispatch_get_main_queue(), ^{
         [self exportDidFinish:_assetExport];
     });
 }
 ]; 
```

}

```
 - (void)exportDidFinish:(AVAssetExportSession*)session
   {
if(session.status == AVAssetExportSessionStatusCompleted){
    NSURL *outputURL = session.outputURL;
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:outputURL]) {
        [library writeVideoAtPathToSavedPhotosAlbum:outputURL
                                    completionBlock:^(NSURL *assetURL, NSError *error){
                                        dispatch_async(dispatch_get_main_queue(), ^{
                                            if (error) {
                                                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Video Saving Failed"  delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles: nil, nil];
                                                [alert show];
                                            }else{
                                                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Video Saved" message:@"Saved To Photo Album"  delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
                                                [alert show];
                                                //[self loadMoviePlayer:outputURL];
                                            }
                                        });
                                    }];
    }
}
 self.audioAsset = nil;
 self.videoAsset = nil;
//[activityView stopAnimating];
//[activityView setHidden:YES]; 
```

}

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T18:27:07.203

我相信您必须使用`AVMutableAudioMix`才能混合多个音频。使用您的方法，只会将其`audioAsset`添加到组合中。[WWDC 2010](https://developer.apple.com/videos/wwdc/2010/?id=407)中有一个关于此的视频，其中解释了如何执行此操作。我试图在[这里](https://stackoverflow.com/questions/18109161/audio-mixing-in-ios-using-avfoundation-doesnt-work)实施但没有成功。希望有人能帮助我们修复它。

# javascript - 使用锤子保持默认向上滑动

> ID：14618363
> 
> 赞同：3
> 
> 时间：2013-01-31T04:14:29.317
> 
> 标签：javascript, jquery, html, hammer.js

我正在使用锤子 js 在任何移动桌面上进行滑动手势。它是一个简单的向左/向右滑动转到下一个/后退。

但我希望它向上/向下保持原样（向上/向下滚动）。

代码非常简单，问题是当我向上/向下滑动页面时异常向上/向下滚动。有时它根本不滚动或向上或向下滚动一点点。

```
function hammerEvent( event ){

    if(event.type == 'swipe' ){
        if(event.direction == 'left'){
            event.preventDefault();
            document.location = gNext.href              
        }
        if(event.direction == 'right'){
            event.preventDefault();
            document.location = gBack.href  
        }

    }
} 
```

有没有人经历过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T13:21:04.983

抱歉回复晚了，但还是...

如果您使用较旧版本的 Hammer（大约 0.6） - 您可以将适当的参数传递给它的选项，例如

```
var hammer1 = new Hammer(element, {
    drag_vertical: false,
    swipe: false
}); 
```

我不确定较新的版本，但似乎您应该只传递其他参数（smth like `drag_block_vertical: true`）。[在Hammer 页面上](https://github.com/EightMedia/hammer.js/wiki/Getting-Started)查看有关参数的更多信息。

# ios - dispatch_queue 未执行

> ID：14618365
> 
> 赞同：2
> 
> 时间：2013-01-31T04:14:53.907
> 
> 标签：ios, objective-c, grand-central-dispatch

我正在接受 stanford cs 193 p assignment5。问题是，当我将数据转移到目标视图控制器并使用调度队列在 viewDidLoad 方法中获取数据时。dispatch_async 不会在目标视图控制器中执行。这是我的代码用于视图控制器 A 和目标视图控制器。

视图控制器A代码

```
-(void)viewDidLoad
{
[super viewDidLoad];

if(!self.places){

    self.spinner.hidesWhenStopped = YES;
    self.spinner.center = self.tableView.center;//
    [self.view addSubview:self.spinner];
    [self.spinner startAnimating];

    dispatch_queue_t dispatchQueue = dispatch_queue_create("queue_top_places", NULL);
    dispatch_async(dispatchQueue, ^{

        self.places = [self getRecentPlacesFromFlicker];

        // main queue to load table view data
        dispatch_async(dispatch_get_main_queue(), ^{

            // load table data
            if(self.tableView.window){

                [self.tableView reloadData];
                [self.spinner stopAnimating];
            }
        });
    });

    dispatch_release(dispatchQueue);

}
// Uncomment the following line to preserve selection between presentations.
 self.clearsSelectionOnViewWillAppear = YES;

}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

if([segue.identifier isEqualToString:@"Show Recent Photo List"]){

    int currentRow = self.tableView.indexPathForSelectedRow.row;

    // set up photo list controller model

    [segue.destinationViewController setPhotosList:[self.places objectAtIndex:currentRow]];

    }               
} 
```

这是我的目标视图控制器代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];

// get the current top place name and fetch photos at that place from flicker
if ([self.photosList isKindOfClass:[NSDictionary class]])
{
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinner.hidesWhenStopped = YES;
    spinner.center = self.tableView.center;//
    [self.view addSubview:spinner];
    [spinner startAnimating];

    dispatch_queue_t dispatchQueue1 = dispatch_queue_create("queue_top_50_photos", NULL);

    dispatch_async(dispatchQueue1, ^{

        self.photosList = [FlickrFetcher photosInPlace:self.photosList  maxResults:50];

        dispatch_async(dispatch_get_main_queue(), ^{

            if (self.tableView.window ){

                [self.tableView reloadData];
                [spinner stopAnimating];
            }
        });
    });

   dispatch_release(dispatchQueue1);
}

// Uncomment the following line to preserve selection between presentations.
self.clearsSelectionOnViewWillAppear = YES;

self.title = @"50PhotoList";

} 
```

使用调试器检查条件 ([self.photosList isKindOfClass:[NSDictionary class]]) 是否满足

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:29:29.223

我只是在想这个，您是否尝试过运行此代码`viewDidAppear`而不是`viewDidLoad`？我会试一试。

为什么要为每个操作创建一个新队列？如果您删除最后的`dispatch_release`指令怎么办？也许您的异步操作花费的时间比释放队列所需的时间长。

尝试使用全局队列，而不是您自己创建的，完成后不必释放的队列。

代替

```
dispatch_queue_t dispatchQueue1 = dispatch_queue_create("queue_top_50_photos", NULL); 
```

和

```
dispatch_queue_t dispatchQueue1 = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); 
```

并删除`dispatch_release(dispatchQueue1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T05:29:13.193

dispatch_async 立即返回并在后台执行任务并执行 viewDidLoad 或其他 viewDidAppear 方法中的其余代码。

一种解决方案是使用 dispatch_sync 等待任务执行并将其嵌套在 dispatch_async 中，如下所示

```
 dispatch_queue_t dispatchQueue1 = dispatch_queue_create("queue_top_50_photos", NULL);

dispatch_async(dispatchQueue1, ^{

      dispatch_queue_t dispatchSyncQueue = dispatch_queue_create("queue_top_50_photos", NULL);

       dispatch_sync( dispatchSyncQueue,^){
          self.photosList = [FlickrFetcher photosInPlace:self.photosList  maxResults:50];
       });
        dispatch_sync(dispatch_get_main_queue(), ^{

        if (self.tableView.window ){

            [self.tableView reloadData];
            [spinner stopAnimating];
        }
    });

    dispatch_release(dispatchSyncQueue);
});

   dispatch_release(dispatchQueue1); 
```

# c - fscanf 没有正确读取浮点数

> ID：14618369
> 
> 赞同：2
> 
> 时间：2013-01-31T04:15:09.140
> 
> 标签：c, scanf

---这是一道作业题---

我在使用 fscanf 从文本文件中读取浮点值时遇到问题。

基本上我正在尝试从文件中读取浮点值并将它们存储在动态数组中。输入文件每行有两个浮点数。所以一行可能是“0.85 7.34”（不带引号）。所以我尝试使用 fscanf(fp, "%f %f", &coordinates[i], &coordinates[i++]) 来读取 2 个浮点值。当我打印它显示为 0.00000。下面是我编写的代码和它产生的输出。

```
#include <stdio.h>
#include <stdlib.h>

int main (int argc, char *argv []) {

FILE * fp = fopen("nums", "r");

float *coordinates;
float *tmp;
int i = 0;
int ARRAY_SIZE = 5;
coordinates = malloc(5*sizeof(float));

while (fscanf(fp,"%f %f", &coordinates[i], &coordinates[i++]) > 1)
{

  printf("iteration# %d | coord1 = %f coord2 = %f \n", i, &coordinates[i-1], &coordinates[i]);

  if (i >= ARRAY_SIZE)
  {
    tmp = realloc(coordinates, (i*2)*sizeof(float));
    coordinates = tmp;
    ARRAY_SIZE = i*2;
  }
  i++;
}

for(i = 0; i < 8; i++)
  printf("%f\n", &coordinates[i]);

return 0;
} 
```

输出：

```
iteration# 1 | coord1 = 0.000000 coord2 = 0.000000 
iteration# 3 | coord1 = 0.000000 coord2 = 0.000000 
iteration# 5 | coord1 = 0.000000 coord2 = 0.000000 
iteration# 7 | coord1 = 0.000000 coord2 = 0.000000 
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:21:30.013

您不要将“地址”-运算符`&`与`printf`. `fscanf`需要一个指向数据的指针，因此它知道可以更改变量值，而 printf 不会。

改变：

```
printf("iteration# %d | coord1 = %f coord2 = %f \n", i, &coordinates[i-1], &coordinates[i]); 
```

到：

```
printf("iteration# %d | coord1 = %f coord2 = %f \n", i, coordinates[i-1], coordinates[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:35:21.083

第一个问题：

```
 while (fscanf(fp,"%f %f", &coordinates[i], &coordinates[i++]) > 1) 
```

您正在尝试使用 in 的值`i`并在没有干预序列点的情况下`&coordinates[i]`对其进行修改。`&coordinates[i++]`这样做的行为是*undefined*，很可能不会做你想做的事。用于`&coordinates[i+1]`第二个参数。请注意，这意味着您必须使用或类似的方式`i`在循环中进行更新。`i += 2`请注意，*不*保证`&coordinates[i]`在`&coordinates[i++]`.

第二个问题：

```
printf("%f\n", &coordinates[i]); 
```

同样，您调用了未定义的行为；你已经告诉`printf`期望一个 type 的值`float`，但你传递了一个 type 的值`float *`。失去`&`. `scanf`并且`printf`在这方面是不对称的。

令人头疼的：

You know there are going to be 2 values per line, but you start your array size at 5 (rather than 4 or 6 or 8). You allow for resizing the array (correctly, I might add), but you've hardcoded a size of 8 for the print loop, rather than using the actual number of items read.

# unit-testing - Backbone.js 不使用 konacha 渲染视图

> ID：14618370
> 
> 赞同：1
> 
> 时间：2013-01-31T04:15:10.563
> 
> 标签：unit-testing, backbone.js, coffeescript, mocha.js, konacha

我想用konacha 为我的backbone.js 应用程序做一些DOM 测试。我在下面阅读了一些关于 konacha 的条目。

*   [https://github.com/markbates/informit_articles/blob/master/article_2_konacha/article_2_konacha.md](https://github.com/markbates/informit_articles/blob/master/article_2_konacha/article_2_konacha.md)
*   [http://www.slideshare.net/markykang/testing-javascriptcoffeescript-with-mocha-and-chai](http://www.slideshare.net/markykang/testing-javascriptcoffeescript-with-mocha-and-chai)

这些条目表明我应该创建一个视图并将其放在页面对象中，如下所示。

```
#= require spec_helper
describe "MyApp.Views.Relationships", ->
  beforeEach ->
  @view = new MyApp.Views.Relationships()
  @page.html(@view.el)
  console.log @view.el 
```

**问题：** 但上面代码中的 console.log 显示 @view.el 的“未定义”，尽管代码在实践中运行良好。

如果有人可以帮助我，我真的很高兴。

这是一些感兴趣的代码。

```
spec_helper.js.coffee
#= require application
#= require_tree ./support

mocha.ui('bdd')
mocha.ignoreLeaks()

beforeEach ->
  @page = $("#konacha")
  @sandbox = sinon.sandbox.create()

afterEach ->
  @sandbox.restore() 
```

```
views/users/relationships.js.coffee
class MyApp.Views.Relationships extends Backbone.View

  el: '#relation-form'
  template: JST['users/relationships']

  initialize: ->
    console.log "init"
    @render()
    console.log @el

  render: ->
    @img = $('#loading-image').html()
    $(@el).html(@template({img: @img}))
    this 
```

```
relationships.jst.eco
<button class="btn" disabled="disabled"><%- @img %></button> 
```

```
profile.html.erb(extracted)
   #snip#
            <% if signed_in? and @user != current_user %>
              <div id="relation-form" class="action-button"></div>
            <% end %>
   #snip#
    <script type="text/template" id="loading-image">
      <%= image_tag('ajax-loader.gif') %>
    </script>
    <script type="text/javascript">
      $(function () {
        new MyApp.Views.Relationships()
      });
    </script> 
```

我想用这些代码做的是处理像twitter这样的关注按钮。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:34:43.603

在规范本身中包含视图所需的模板。就像是：

```
#= require spec_helper
#= require templates/users/relationships

describe "MyApp.Views.Relationships", ->
    beforeEach ->
    @view = new MyApp.Views.Relationships()
    @page.html(@view.el)
    console.log @view.el 
```

或者您的模板所在的任何位置。

模板可能仍然未定义。如果是这种情况，则可能是在模板加载之前加载了应用程序。因此，如果是这种情况，您也可以删除 spec_helper 中的 require 应用程序，并只在每个规范中专门包含您正在测试的位。

# mongodb - 如何使用 pymongo 遍历按整数字段排序的集合中的所有文档？

> ID：14618371
> 
> 赞同：0
> 
> 时间：2013-01-31T04:15:19.740
> 
> 标签：mongodb, pymongo, data-retrieval, database

如何遍历按我的唯一 id ( `uid`) 字段排序的集合中的所有文档以检索“eng”字段？

我的文档结构如下所示：

```
{ "_id" : ObjectId("50fd55c1161747668078fed6"), "dan" : "Hr. Hänsch repræsenterede Dem dér .", "deu" : "Der Kollege Hänsch hat Sie dort vertreten .", "eng" : "Mr Hänsch represented you on this occasion .", "fin" : "Kollega Hänsch edusti teitä siellä .", "ita" : "Il collega Hänsch è intervenuto in sua vece .", "md5" : "336b9cd1dc01ae0ff3344072d8db0295", "uid" : 2100986 } 
```

为什么排序不起作用：

```
connection = MongoClient()
db = connection["europarl"] # The database.
v7 = db["v7"] # The collection

for i in v7.find({"eng":{"$exist":True}}).sort({"uid":-1}):
    print i["eng"] 
```

我得到这个类型错误：

```
Traceback (most recent call last):
  File "mongo_lemma.py", line 67, in <module>
    for i in v7.find({"eng":{"$exists":True}}).sort({"uid":"1"}):
  File "/usr/local/lib/python2.7/dist-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/pymongo/cursor.py", line 513, in sort
    keys = helpers._index_list(key_or_list, direction)
  File "/usr/local/lib/python2.7/dist-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/pymongo/helpers.py", line 47, in _index_list
    raise TypeError("if no direction is specified, "
TypeError: if no direction is specified, key_or_list must be an instance of list 
```

当我这样做时，它起作用了：

```
for i in v7.find({"eng":{"$exist":True}}):
    print i["eng"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:36:00.073

你的[`sort()`](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor.sort)语法是关闭的，它应该是：

```
for i in v7.find({"eng":{"$exist":True}}).sort("uid", pymongo.DESCENDING):
    print i["eng"] 
```

# forms - 如何在 SourceObject 为 Query 的子窗体中捕获 click/dbl-click

> ID：14618378
> 
> 赞同：0
> 
> 时间：2013-01-31T04:16:06.997
> 
> 标签：forms, click, ms-access-2007, double-click, crosstab

访问 2007

你好，我问的是[这里问的同样的问题](http://database.ittoolbox.com/groups/technical-functional/access-l/how-to-trap-clickdblclick-in-a-subform-whose-sourceobject-is-a-query-4979791)

表单有一个查询源对象，但我想捕捉单击/双击事件

这是我[上一个问题](https://stackoverflow.com/questions/14491409/ms-access-double-click-event-on-query/14503473#14503473)的后续，当我在同一记录中从一个字段更改为另一个字段时

```
 screen.activecontrol 
```

不会相应地更新。

此致，

# php - OB 在会话开始之前开始以避免 PHP 中的标头已发送错误？

> ID：14618393
> 
> 赞同：-1
> 
> 时间：2013-01-31T04:17:14.243
> 
> 标签：php

> **可能重复：**
> [输出缓冲的用例作为“已发送的标头”的正确解决方案</a>](https://stackoverflow.com/questions/2919569/use-case-for-output-buffering-as-the-correct-solution-to-headers-already-sent) [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

为了避免“标头已发送”错误消息，我可以在 PHP 中的会话开始之前使用 obstart，如下所示：

```
// db information here
ob_start();
session_start(); 
```

这是在每个 PHP 项目中使用以避免“标头已发送错误”的好习惯，还是用于特殊情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:24:34.620

这不是一个好习惯。

唯一正确的解决方案是在运行会话之前不发送任何内容。

这不是针对特殊情况，而是针对无法正确书写的人。将其视为新手的肮脏黑客。

# oracle11g - 查找在 Oracle 11g 中玩过少于 2 场游戏的 dir_name

> ID：14618394
> 
> 赞同：0
> 
> 时间：2013-01-31T04:17:14.260
> 
> 标签：oracle11g

例如，我们有这 2 个表

表格1：

```
Dir_num |  dir_name
10      | john
11      | vlad 
```

表2：

```
game    |  dir_num
101     | 10
111     | 10
102     | 11
104     | 10
104     | 10 
```

现在我尝试找到玩了不到 2 场比赛的 dir_name。

```
select * from table1 where dir_num  .... 
```

请帮我找到 pl/sql 代码。

输出应显示

```
 Vlad. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:22:35.250

尝试这样的事情 - 使用`GROUP BY`and `HAVING`：

```
SELECT t.dir_num, t.dir_name
FROM Table1 t
  LEFT JOIN Table2 t2 ON t.dir_num = t2.dir_num
GROUP BY t.dir_num, t.dir_name
HAVING COUNT(DISTINCT t2.game) < 2 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/0c2cc/1)。

如果您想要两个表中的那些（意味着至少 1 个游戏），则将 LEFT JOIN 更改为 INNER JOIN。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:52:25.513

请试试：

```
SELECT t.dir_num, t.dir_name
FROM Table1 t
  INNER JOIN Table2 t2 ON t.dir_num = t2.dir_num
GROUP BY t.dir_num, t.dir_name
HAVING COUNT(DISTINCT t2.game) < 2 
```

# matlab - MATLAB：领先一步的神经网络时间序列预测

> ID：14618400
> 
> 赞同：4
> 
> 时间：2013-01-31T04:17:40.233
> 
> 标签：matlab, neural-network, time-series, lag, prediction

**简介：**我正在使用 MATLAB 的神经网络工具箱来尝试预测未来的时间序列。目前我只是试图预测一个简单的正弦函数，但希望在获得令人满意的结果后我能够继续进行一些更复杂的事情。

**问题：**一切似乎都运行良好，但预测的预测往往会滞后一个时期。如果神经网络预测只是输出延迟了一个单位时间的序列，那么它并没有多大用处，对吧？

**代码：**

```
t = -50:0.2:100;
noise = rand(1,length(t));
y = sin(t)+1/2*sin(t+pi/3);
split = floor(0.9*length(t));
forperiod = length(t)-split;
numinputs = 5;
forecasted = [];
msg = '';
for j = 1:forperiod
    fprintf(repmat('\b',1,numel(msg)));
    msg = sprintf('forecasting iteration %g/%g...\n',j,forperiod);
    fprintf('%s',msg);

    estdata = y(1:split+j-1);
    estdatalen = size(estdata,2);

    signal = estdata;
    last = signal(end);

    [signal,low,high] = preprocess(signal'); % pre-process
    signal = signal';

    inputs = signal(rowshiftmat(length(signal),numinputs));
    targets = signal(numinputs+1:end);

    %% NARNET METHOD
    feedbackDelays = 1:4;
    hiddenLayerSize = 10;
    net = narnet(feedbackDelays,[hiddenLayerSize hiddenLayerSize]);
    net.inputs{1}.processFcns = {'removeconstantrows','mapminmax'};
    signalcells = mat2cell(signal,[1],ones(1,length(signal)));
    [inputs,inputStates,layerStates,targets] = preparets(net,{},{},signalcells);
    net.trainParam.showWindow = false;
    net.trainparam.showCommandLine = false;
    net.trainFcn = 'trainlm';  % Levenberg-Marquardt
    net.performFcn = 'mse';  % Mean squared error
    [net,tr] = train(net,inputs,targets,inputStates,layerStates);
    next = net(inputs(end),inputStates,layerStates);

    next = postprocess(next{1}, low, high); % post-process
    next = (next+1)*last;

    forecasted = [forecasted next];
end

figure(1);
plot(1:forperiod, forecasted, 'b', 1:forperiod, y(end-forperiod+1:end), 'r');
grid on; 
```

**注意：** 函数“预处理”只是将数据转换为记录的百分比差异，而“后处理”将记录的百分比差异转换回用于绘图。**（检查 EDIT 的预处理和后处理代码）**

**结果：**

[![使用 MATLAB 的预测结果截图。](../Images/ab1eec6ce1b542786cdf50d60fc2e6e7.png)](https://i.stack.imgur.com/XpTCq.png)

蓝色：预测值

红色：实际值

谁能告诉我我在这里做错了什么？或者也许推荐另一种方法来达到预期的结果（正弦函数的无滞后预测，最终更混乱的时间序列）？非常感激您的帮忙。

**编辑：** 现在已经有几天了，我希望每个人都过得愉快。由于没有出现任何解决方案，我决定发布辅助函数“postprocess.m”、“preprocess.m”及其辅助函数“normalize.m”的代码。也许这将有助于让球滚起来。

**后处理.m：**

```
function data = postprocess(x, low, high)

% denormalize
logdata = (x+1)/2*(high-low)+low;

% inverse log data
sign = logdata./abs(logdata);
data = sign.*(exp(abs(logdata))-1);

end 
```

**预处理.m：**

```
function [y, low, high] = preprocess(x)

% differencing
diffs = diff(x);
% calc % changes
chngs = diffs./x(1:end-1,:);
% log data
sign = chngs./abs(chngs);
logdata = sign.*log(abs(chngs)+1);
% normalize logrets
high = max(max(logdata));
low = min(min(logdata));
y=[];
for i = 1:size(logdata,2)
    y = [y normalize(logdata(:,i), -1, 1)];
end

end 
```

**标准化.m：**

```
function Y = normalize(X,low,high)
%NORMALIZE Linear normalization of X between low and high values.

if length(X) <= 1
    error('Length of X input vector must be greater than 1.');
end

mi = min(X);
ma = max(X);
Y = (X-mi)/(ma-mi)*(high-low)+low;

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T18:11:59.780

我没有检查你的代码，但做了一个类似的测试来预测`sin()`NN。结果似乎合理，没有滞后。我认为，您的错误在于预测值与实际值的同步。这是代码：

```
%% init & params
t = (-50 : 0.2 : 100)';
y = sin(t) + 0.5 * sin(t + pi / 3);
sigma = 0.2;
n_lags = 12;
hidden_layer_size = 15;
%% create net
net = fitnet(hidden_layer_size);
%% train
noise = sigma * randn(size(t));
y_train = y + noise;
out = circshift(y_train, -1);
out(end) = nan;
in = lagged_input(y_train, n_lags);
net = train(net, in', out');
%% test
noise = sigma * randn(size(t)); % new noise
y_test = y + noise;
in_test = lagged_input(y_test, n_lags);
out_test = net(in_test')';
y_test_predicted = circshift(out_test, 1); % sync with actual value
y_test_predicted(1) = nan;
%% plot
figure, 
plot(t, [y, y_test, y_test_predicted], 'linewidth', 2); 
grid minor; legend('orig', 'noised', 'predicted') 
```

和`lagged_input()`功能：

```
function in = lagged_input(in, n_lags)
    for k = 2 : n_lags
        in = cat(2, in, circshift(in(:, end), 1));
        in(1, k) = nan;
    end
end 
```

![在此处输入图像描述](../Images/9e7fafd86a9a1526088c1962df02ec9e.png)

# android - Android中的加速度计

> ID：14618402
> 
> 赞同：1
> 
> 时间：2013-01-31T04:17:52.300
> 
> 标签：android, accelerometer, sensormanager

以下示例取自互联网。在所有示例中，代码都是使用传感器管理器的单独线程来解释的。您能否让我知道为什么所有加速度计都用 SensorManager 的单独线程解释

```
package com.example.myapp1;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.TextView;
import android.widget.Toast;

public class Accelerate extends Activity implements SensorEventListener {

float x, y, sensorX, sensorY;
Bitmap ball;
SensorManager sm;
Sensor s;
MyBringBackSurface ourSurfaceView;

public class MyBringBackSurface extends SurfaceView implements Runnable { 
    SurfaceHolder ourHolder;
    Thread ourThread = null;
    boolean isRunning = false;

    public MyBringBackSurface(Context context) {
        super(context);
        Log.i("Notice","In constructor of mybringbacksurface"); 
        ourHolder = getHolder();
    }

    public void pause() {
        isRunning = false;
        Log.i("Notice","In pause of mybringbacksurface"); 
        while (true) {
            try {
                ourThread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        }
        ourThread = null;
    }

    public void resume() {
        Log.i("Notice","In resume of mybringbacksurface"); 
        isRunning = true;
        ourThread = new Thread(this);
        ourThread.start();
    }

    public void run() {
        // TODO Auto-generated method stub
        Log.i("Notice","In run of mybringbacksurface"); 
        while (isRunning) {
            if (!ourHolder.getSurface().isValid())
                continue;

            Canvas canvas = ourHolder.lockCanvas();
            canvas.drawRGB(02, 02, 150);
            float centerX = canvas.getWidth() / 2;
            float centerY = canvas.getHeight() / 2;
            canvas.drawBitmap(ball, centerX - sensorX * 18, centerY
                    + sensorY * 18, null);
            ourHolder.unlockCanvasAndPost(canvas);
        }
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    Log.i("Notice","In oncreate of of Accelerator"); 
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    sm = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    if (sm.getSensorList(Sensor.TYPE_ACCELEROMETER).size() != 0) {
        s = sm.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
        sm.registerListener(this, s, SensorManager.SENSOR_DELAY_NORMAL);
    }

    ball = BitmapFactory.decodeResource(getResources(), R.drawable.greenball);
    x = y = sensorX = sensorY = 0;
    ourSurfaceView = new MyBringBackSurface(this);
    ourSurfaceView.resume();
    setContentView(ourSurfaceView);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    Log.i("Notice","In pause of Accelerator"); 
    sm.unregisterListener(this, s);
    super.onPause();
    ourSurfaceView.pause();
}

public void onAccuracyChanged(Sensor arg0, int arg1) {
    // TODO Auto-generated method stub

}

public void onSensorChanged(SensorEvent e) {
    // TODO Auto-generated method stub
    Log.i("Notice","In sensorchanged of of Accelerator"); 
    try {
        Thread.sleep(32);
    } catch (InterruptedException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    sensorX = e.values[0];
    sensorY = e.values[1];
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:29:30.663

因为 run() 方法中的连续 while 循环会阻塞主线程并导致您的应用程序因“应用程序无响应”或 ANR 而关闭。

任何时候你有一个像这样长时间运行的循环，它必须发生在一个单独的线程中。

# ruby - 换行符和冒号？

> ID：14618404
> 
> 赞同：-1
> 
> 时间：2013-01-31T04:18:21.453
> 
> 标签：ruby

我正在阅读 Codecademy 的 Ruby 教程，我被要求执行以下操作：

使用 .each 迭代 secret_identities 哈希。使用 puts 将每个键值对（以冒号和空格 (:) 分隔）打印到控制台。

哈希是在开始时创建的，所以我将直接跳到我输入的代码。

```
secret_identities.each { | hero, identity | puts "{#hero}: {#idenity}" } 
```

然后我收到以下错误：

> 糟糕，再试一次。看起来您没有在自己的行上打印每个以冒号分隔的键值对。如果您需要帮助，请查看提示！

那么我究竟需要做什么才能使其符合代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:21:22.530

错字？`#idenity`应该是`#identity`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:21:42.930

你拼错了**身份**。

```
#Wrong
secret_identities.each { | hero, identity | puts "{#hero}: {#idenity}" }

#Correct
secret_identities.each { | hero, identity | puts "{#hero}: {#identity}" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T06:18:12.417

你这里有两个问题。一个是不匹配的变量，另一个是格式：

```
secret_identities.each { |hero, identity| puts "#{hero}: #{identity}" } 
```

请注意，它`#{...}`用于字符串插值。括号内的任何内容都被评估为 Ruby，然后`to_s`在需要的地方进行字符串化。

# java - java从另一个对象中访问对象数据

> ID：14618405
> 
> 赞同：1
> 
> 时间：2013-01-31T04:18:21.177
> 
> 标签：java

我最近开始学习 java 并且大部分都进​​展顺利。为了帮助理解我正在学习的内容，我决定编写一个纸牌游戏引擎。我使用我认为正确的抽象和封装方法构建了卡片和甲板类。但是，在构建经销商类时，我遇到了一个问题，我不知道如何从经销商类中访问卡类数据。从甲板类我可以访问卡类所需的所有权限，但是一旦我进入经销商类，我就不确定如何访问封装在 2 个深度类中的数据。

这是我到目前为止所拥有的，虽然可以解决问题的代码表示赞赏，但如果有人可以指出我的文档或书籍的方向以帮助更好地理解我所经历的，将不胜感激。

只是要清楚。我希望能够访问与甲板数组中的各个卡片有关的数据，例如来自经销商类的实例变量值。我知道如果我从 println 语句中引用卡片，它会调用卡片到字符串方法。但我正在寻找的是卡片的实际数据。

最后一节课只是我用来测试我写的方法的东西。

```
 import java.util.*;
   public class Card {

        public Card() {
            suit = 0;
            value = 0;
            setName(value);                             
        }

        public Card(int cSuit, int cValue) {
            suit = cSuit;
            value = cValue;
            setName(cValue);
        }

        public String getNewCard() {
                suit = rgen.nextInt(4)+1;
            value = rgen.nextInt(13)+1;
            setName(value);

            return name +" of " +getSuitAsString();             
        }

        public int getValue() {
            return value;
        }

        public int getSuit() {
            return suit;
        }

        public String getName() {
            setName(value);
            return name;
        }

        public String getName(int val) {
            setName(val);
            return name;
        }

        public String getSuitAsString() {

            switch(suit) {
            case 1: return "Diamonds";
            case 2: return "Hearts";
            case 3: return "Spades";
                        case 4: return "Clubs";
                      default: return null;
            }
        }

        public String getSuitAsString(int cSuit) {
            switch (cSuit) {
                case 1: return "Diamonds";
            case 2: return "Hearts";
            case 3: return "Spades";
                    case 4: return "Clubs";
                default:return null;
            }
        }

        public String toString() {
            return name +" of "+ getSuitAsString();
        }

        private void setName(int value) {
            switch (value) {
            case 0 : name = "null";
            break;
            case 1 : name =  "Ace";
            break;
            case 2 : name =  "Two";
            break;
            case 3 : name =  "Three";
            break;
            case 4 : name =  "Four";
            break;
            case 5 : name =  "Five";
            break;
            case 6 : name =  "Six";
            break;
            case 7 : name =  "Seven";
            break;
            case 8 : name =  "Eight";
            break;
            case 9 : name =  "Nine";
            break;
            case 10 : name = "Ten";
            break;
            case 11: name =  "Jack";
            break;
            case 12 : name = "Queen";
            break;
            case 13 : name = "King";
            break;
            }

        }

    private int suit;
    private String name;
    private int value;

    private Random rgen = new Random();
    }
    import java.util.Random;

    public class Deck {

    //Constructor assembles an initial deck of 52 cards in order by suit.
    //Array element [0] is never used.
        public Deck(){
            int cards = 1;
            int cardsPerSuit = 13;
            int suits = 4;
            while(cards < DECK_ARRAY_SIZE){
                for(int i = 1; i <= suits ; i++){
                    for(int j = 1; j <= cardsPerSuit; j++){
                    deck[cards++] = new Card(i , j);

                }
            }
        }   
    }

    //  Constructor creates and empty deck of 53 indexes set to null.
    //  Array element [0] is never used.
        public Deck(int deckArraySize){
            for(int i = 1; i < deckArraySize ; i++){
                deck[i] = new Card();
                }
        }

        public Deck(int suitCount , int cardsPerSuit , int deckArraySize){
    //  Constructor for special deck configuration.     
    }

        public void shuffle(){
            int SHUFFLE_COUNT = 100000;
            int arrayPos1 = 0;
            int arrayPos2 = 0;
            int count = 0;

            while(count < SHUFFLE_COUNT){
                Card card1 = deck[rgen.nextInt(DECK_ARRAY_SIZE)];
                if(card1 == deck[0]) card1 = deck[1];//This prevents the NullPointerException error.broke the always use braces rule.
                Card card2 = deck[rgen.nextInt(DECK_ARRAY_SIZE)];
                if(card2 == deck[0]) card2 = deck[52];//This prevents the NullPointerException error.broke the always use braces rule.

                for(int i = 1; i < DECK_ARRAY_SIZE; i++){
                    for (int j = 1; j < DECK_ARRAY_SIZE; j++){
                        if (deck[i].equals(card1)){
                            arrayPos1 = i;
                            if (deck[j].equals(card2)){
                            arrayPos2 = j;

                            }
                        }
                    }   
                    Card temp = deck[arrayPos1];
                    deck[arrayPos1] = deck[arrayPos2];
                    deck[arrayPos2] = temp;
                    count++;    

                }       

        }           

    }

    //  Gets the top card of the deck.
        public Card getTopCard(){
            Card topCard = deck[1];
            return topCard;

        }
    //  Gets a card at specified index. 
        public Card getCardAt(int cardAtPos){
            Card cardAt = deck[cardAtPos];  
            return  cardAt; 

        }

    //This method makes an implicit call to the Card classes toString method when string manipulation is performed .    
    //This is done by the compiler automatically.
        public void getDeckInfo(){
            for(int i = 1; i < DECK_ARRAY_SIZE ; i++){
            System.out.print(i +" ");
            System.out.println(deck[i]);
            }
        }

        public String toString(){
    //      getDeckInfo();
            return "Nothing to see here, move along.";

        }

    private Random rgen = new Random();
    public static final int DECK_ARRAY_SIZE = 53;
    private Card[] deck = new Card[DECK_ARRAY_SIZE];

    }
    public class Dealer {

    public Dealer(){
        playDeck = new Deck();
        discardStack = new Deck(Deck.DECK_ARRAY_SIZE);
    }

    public int getDeckCardCount(){
// this count should go down anytime a card is dealt to a player 
        return deckCardCount;
    }

    public int getDiscardCount(){
// this count should go up anytime a card is removed from the deck or from play.        
        return discardCount;
    }

    public void dealCards(){

// should be self explanatory.      
    }

    public void shuffle(){
// need to make sure that shuffle compensates for cards removed 
// from deck and move cards to the front of the array before the shuffle.
// make sure that the empty indexes at the end of the array are not included in the shuffle.
// also need a shuffle method for shuffles at the end of the game. or just 
// throw out he deck and get a new deck.... 
// maybe pass the remaining cards in the deck to the shuffle method .

    }

    public String toString(){

        return "Nothing to see here , move along.";
}
public Deck playDeck;   
public Deck discardStack;
private int deckCardCount;
private int discardCount;
    }

public class CardTest  {

public static void main(String[] args){

    Card singleCard = new Card();
    Deck deck = new Deck();
    Deck playDeck = new Deck();
    Deck discardStack = new Deck(53); 
    Dealer dealer = new Dealer();

System.out.println("value: "+singleCard.getValue());
System.out.println("Name: "+singleCard.getName());
System.out.println("Suit: "+singleCard.getSuitAsString());
System.out.println("Card to string: "+singleCard.toString());
System.out.println("New card: " +singleCard.getNewCard());
System.out.println("New card: " +singleCard.getNewCard());
System.out.println("New card: " +singleCard.getNewCard());
System.out.println("Pass a 4 to the getSuitAsString() method:    "+singleCard.getSuitAsString(4));
System.out.println("Pass a 12 to the getName() method: "+singleCard.getName(12));
deck.getDeckInfo();
System.out.println("Top card is: "+deck.getTopCard());

System.out.println("Shuffling...");
int count =0;
while(count < 500){
dealer.playDeck.shuffle();
discardStack.shuffle();
count++;
}

deck.getDeckInfo();
System.out.println("Top card is: "+deck.getTopCard());
System.out.println("Card at position ??: "+deck.getCardAt(5));
playDeck.getDeckInfo();
discardStack.getDeckInfo();
playDeck.shuffle();
playDeck.getDeckInfo();
discardStack.shuffle();
discardStack.getDeckInfo();
dealer.playDeck.getDeckInfo();
dealer.playDeck.shuffle();
System.out.println("Shuffling...");
dealer.playDeck.getDeckInfo();
System.out.println(dealer.playDeck.getCardAt(5));
System.out.println(dealer.discardStack.getCardAt(5));   

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:32:42.733

该模型还不错，问题出在您的第二个和第三个甲板构造函数上。第一个构造函数确保了合法的甲板，而另外两个创建了一个甲板，您在下面的示例代码中会摸不着头脑。

问问自己为什么你需要一个“特殊结构”，如果你这样做......为什么你不能从你的第一个甲板构造器创建的正确的 52 张牌组开始并从那里开始工作......即......移除你没有的牌不需要。

最后，OO 哲学规定您的实例在构建后永远不应处于无效状态。拥有一个构造函数 Card() 根本不够好，因为你需要知道你想要最终得到什么卡.. 6 of heart Card.new(6, "hearts") 是一个有效的 ctor

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:29:06.440

我有一种感觉，我不明白一些东西，但不是把这个方法放在你的 Deck 类中那么简单：

```
public Card[] getCards() {
    return deck;
} 
```

现在你`Dealer`可以打电话`aDeck.getCards()`并用它做任何事情。

例如，我把这段代码放在`Dealer`类中，它编译得很好：

```
public Dealer() {
    Deck deck = new Deck();
    for (Card card : deck.getCards()) {
        int suit = card.getSuit();
        int value = card.getValue();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:22:11.520

一些一般性说明：

*   在某些时候，您将不得不开始学习/处理从索引 0 开始的数组。最好早点做，因为您正在做的事情（“//Array element [0] is never used.”将以后可能只会导致[一个](http://en.wikipedia.org/wiki/Off_by_one)错误...

*   只定义你真正需要的构造函数。空的构造函数只有在有合适的用例时才有用。通常在构造之后，您的对象实例应该处于有效状态 - 如果您调用默认值，情况并非如此`newu Card()`

*   有许多可能的方式来处理字符串常量。你这样做的方式是最简单的，但也是最容易出错的。例如，如果您在`"Diamonds"`某处的字符串中打错字，则可能需要很长时间才能找到。现在，我建议使用常量，即一些`public static final DIAMOND = "Diamond"`定义。像这样，每当您需要您的钻石串时，您只需使用变量`DIAMOND`- 您会知道它包含正确的内容并且无法修改。（稍后，您还可以开始阅读有关[Enum](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)类型的内容。）

对你的**问题**：

我觉得有些误解正在发生...

> “我知道，如果我从 println 语句中引用卡片，它会调用卡片到字符串方法。但我要寻找的是卡片的实际数据。”

这不是真的。发生的情况是：如果您的卡片变量位于 Java 只需要一个字符串的位置 - 例如，当使用`+`运算符连接两个字符串时 - 然后它会访问该`toString()`方法。

```
Card card = // some card variable

// This will use card.toString()
system.out.println("Printing a card string " + dealer.playDeck.getCardAt(5));

// However, you can just print something like this:
system.out.println("Printing a card suit " + dealer.playDeck.getCardAt(5).getSuitAsString()); 
```

* * *

**附录**：
关于您对其他答案的评论中的问题。

```
for(int i = 0; i < deck.getCards().length; i++){
    deck.getCards()[i] // this is the i-th card, do something with it
} 
```

# java - 案例的 Jooq 查询问题

> ID：14618406
> 
> 赞同：2
> 
> 时间：2013-01-31T04:18:31.137
> 
> 标签：java, mysql, jooq

我写了这个 mysql 查询并尝试将其转换为 JOOQ 查询但没有成功，这是 mysql 查询

```
SELECT `P`.`phone_number`, `A`.`emp_no`,   
SUM(CASE WHEN VCG.vid IN (
SELECT gv.vid FROM `grvas` gv JOIN gprs gr ON gr.id=gv.grid 
WHERE gr.id=G.id AND gv.stdate < '2011-08-15'  AND gv.enddate > '2011-09-14') 
THEN VCG.amount END) AS allow,
... etc... 
```

如何将此查询转换为 JOOQ 查询？
谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:15:37.857

这：

```
SUM(
  CASE 
  WHEN VCG.vid IN (
    SELECT gv.vid 
    FROM `grvas` gv 
      JOIN gprs gr ON gr.id=gv.grid 
    WHERE gr.id=G.id 
      AND gv.stdate < '2011-08-15'  
      AND gv.enddate > '2011-09-14'
  ) 
  THEN VCG.amount 
  END
) AS allow 
```

会翻译成这样的：

```
import static org.jooq.impl.DSL.*;

// And then
sum(
  decode()
  .when(VCG.VID.in(
      select(GRVAS.VID)
      .from(GRVAS)
        .join(GPRS).on(GPRS.ID.eq(GRVAS.GRID))
      .where(GPRS.ID.eq(G.ID))
      .and(GRVAS.STDATE.lt(Date.valueOf("2011-08-15")))
      .and(GRVAS.ENDDATE.gt(Date.valueOf("2011-09-14")))
  )), VCG.AMOUNT)
).as("allow") 
```

上面的例子在谓词的子查询中省略了表别名`IN`，以简化事情。当然，您也可以继续为所有这些表设置别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:59:17.580

我找不到将上述 sql 转换为 JOOQ 的正确方法，但我使用了

```
String sql="SELECT `P`.`phone_number`, `A`.`emp_no`,   
             SUM(CASE WHEN VCG.vid IN (
             SELECT gv.vid FROM `grvas` gv JOIN gprs gr ON gr.id=gv.grid 
             WHERE gr.id=G.id AND gv.stdate < '2011-08-15'  AND gv.enddate > '2011-09-14') 
             THEN VCG.amount END) AS allow,
             ... etc... " ;
Result<Record> res = f.fetch(sql); 
```

这工作很好谢谢

# r - 重新排序表达式集中的样本 (R)

> ID：14618408
> 
> 赞同：1
> 
> 时间：2013-01-31T04:18:33.557
> 
> 标签：r, plot, bioinformatics

我正在尝试制作一些基因表达数据的热图。目前，我想可视化的数据存储在表达式集数据类型中，但是样本没有正确分组；也就是说，控制样本和实验样本没有组合在一起。这是一个简短的工作流程：

```
output <- //analysis of raw data eset
someGenes <- eset [output$Table1, ]
heatmap(exprs(someGenes)) 
```

本质上，我想在绘图之前重新排列 eset 中的样本。我试图将样本名称视为“列”，但无法更改它们在 eset 中的位置。我对 R 很陌生，所以任何和所有的帮助都将不胜感激。

这是表达式集数据类型的链接以供参考：[http ://rss.acs.unt.edu/Rdoc/library/Biobase/html/class.ExpressionSet.html](http://rss.acs.unt.edu/Rdoc/library/Biobase/html/class.ExpressionSet.html)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:46:02.287

对于一个可重现的示例，我们加载 Biobase 和样本数据

```
library(Biobase)
data(sample.ExpressionSet) 
```

然后看看我们有什么：

```
> sample.ExpressionSet
ExpressionSet (storageMode: lockedEnvironment)
assayData: 500 features, 26 samples 
  element names: exprs, se.exprs 
protocolData: none
phenoData
  sampleNames: A B ... Z (26 total)
  varLabels: sex type score
  varMetadata: labelDescription
featureData: none
experimentData: use 'experimentData(object)'
Annotation: hgu95av2 
```

我们可以像矩阵一样对 ExpressionSet 进行子集化，例如使用索引或，例如，通过从当前 sampleNames 的混洗中`sampleNames`创建列索引`cidx`

```
cidx = sample(sampleNames(sample.ExpressionSet)) 
```

cidx 只是一个字符向量。然后我们重新排序列

```
> sample.ExpressionSet[, cidx]
ExpressionSet (storageMode: lockedEnvironment)
assayData: 500 features, 26 samples 
  element names: exprs, se.exprs 
protocolData: none
phenoData
  sampleNames: Q C ... B (26 total)
  varLabels: sex type score
  varMetadata: labelDescription
featureData: none
experimentData: use 'experimentData(object)'
Annotation: hgu95av2 
```

因此，您在绘图之前对列进行了重新排序。但是默认情况下，热图会根据样本之间的“距离”对样本进行聚类。因此，重新排序样本并不重要，热图会计算出相同的距离，并绘制相同的热图。您可能想要`image`, 或提供参数`Colv`（请参阅`?heatmap`）或使用 gplots 包中的 heatmap.2 ，或者...希望对您有所帮助。

# list - list(t) 总是返回最后输入的项目（类）

> ID：14618409
> 
> 赞同：0
> 
> 时间：2013-01-31T04:18:46.240
> 
> 标签：list, class

我正在尝试使用 list(of someclass) 来跟踪一个模拟数据数组，以便以后在程序中使用 .add() 属性。当我这样做时，我总是会取回最后输入的项目。

```
Dim lst as new list(of superclass)
Dim work as new list(of superclass) 
```

程序执行以在存储之前填充工作。

```
Lst.add(work) 
```

然后列出清单

```
For each wrk in lst
  Print(lst)
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:36:57.217

尝试打印`wrk`而不是`lst`.

# asp.net - 如何使用c#从数据表中随机获取唯一记录？

> ID：14618420
> 
> 赞同：0
> 
> 时间：2013-01-31T04:20:11.030
> 
> 标签：asp.net, c#-4.0, random, datatable, row

大家好，我正在开发一个小型应用程序，所有问题都是随机出现的。

我使用默认`random`方法来获取随机数据，但它给出了两次重复的行。所以我需要将不同的行放入数据表中。

我正在使用以下方法来获取 rendom 记录...

```
 Random rDom = new Random();
 dtRandom = dt.Clone();
 int rw = 0;
 for (int ctr = 1; ctr <= dt.Rows.Count; ctr++)
 {
        rw = rDom.Next(1, dt.Rows.Count);
        dtRandom.ImportRow(dt.Rows[rw]);
 }
 dtRandom.AcceptChanges(); 
```

那么，我怎样才能从数据表中获得不同的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:09:40.193

如您所知，随机数生成可能会多次生成相同的数字。如果存在唯一的代理键/主键，请在将其导入数据表之前检查导入行是否存在。否则，您可以使用这种方法从最终的 DataTable 中获取不同的值：

```
DataTable distinctTable = new DataView(dtRandom).ToTable(
  true, new string[] { "column1", "column2", "etc." }); 
```

来自[http://msdn.microsoft.com/en-us/library/wec2b2e6.aspx](http://msdn.microsoft.com/en-us/library/wec2b2e6.aspx)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-31T04:31:26.370

您需要保留相同的`Random`对象。
将其作为静态成员放在您的静态方法之外

```
private static Random rand = new Random();

public static int rInt(int exclUB, int incLB = 0)
{
    int t = rand.Next(incLB, exclUB);
    return t;
} 
```

细节

[随机数生成 - 返回相同的数字](https://stackoverflow.com/questions/4855756/random-number-generation-same-number-returned/4855770#4855770)

# c - 为是/否用户提示执行while循环

> ID：14618422
> 
> 赞同：2
> 
> 时间：2013-01-31T04:20:27.100
> 
> 标签：c, loops, do-while

我找到主要因素的程序已经全部设置好......我唯一需要做的就是这种类型的输出：

你想试试其他号码吗？说 Y(es) 或 N(o): y //要求另一个数字（再次通过程序）

你想试试其他号码吗？说 Y(es) 或 N(o): n //感谢您使用我的程序。再见！

我在下面进行了尝试...当我键入 n 时，它会输出正确的输出。但是，如果我键入“y”，它只会说 n 所做的相同的事情......我如何循环整个程序而不将程序代码放在我拥有的这个 while 循环中？那么当我按 y 时它会再次通过程序吗？

```
int main() {
  unsigned num;
  char response;

  do{
    printf("Please enter a positive integer greater than 1 and less than 2000: ");
    scanf("%d", &num);
    if (num > 1 && num < 2000){
      printf("The distinctive prime facters are given below: \n");
      printDistinctPrimeFactors(num);
      printf("All of the prime factors are given below: \n");
      printPrimeFactors(num);
    }
    else{
      printf("Sorry that number does not fall within the given range. \n");
    }
    printf("Do you want to try another number? Say Y(es) or N(o): \n");
    response = getchar();
    getchar();
  }
  while(response == 'Y' || response == 'y');
  printf("Thank you for using my program. Goodbye!");

  return 0;
} /* main() */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T04:24:05.603

问题可能是，您得到的东西不是`y`来自`getchar`并且循环退出，因为条件不匹配。

`getchar()`可能会使用缓冲区，因此当您键入“y”并按回车时，您将得到 char 121（y）和 10（回车）。

试试下面的程序，看看你得到了什么输出：

```
#include <stdio.h>

int main(void) {
    char c = 0;

    while((c=getchar())) {
        printf("%d\n", c);
    }
    return 0;
} 
```

你会看到这样的东西：

```
$ ./getchar 
f<hit enter>
102
10 
```

您可以看到键盘输入被缓冲，并且在下一次运行时`getchar()`您会得到缓冲的换行符。

**编辑**：就您的问题而言，我的描述只是部分正确。你`scanf`用来读取你正在测试的数字。所以你这样做：数字，输入，y，输入。

`scanf`读取数字，将输入中的换行符留在缓冲区中，`response = getchar();`读取换行符并将换行符存储在 中`response`，下一次调用`getchar()`（去除我上面描述的换行符）获取`'y'`并且您的循环退出。

您可以通过`scanf`读取换行符来解决此问题，因此它不会在缓冲区中逗留：`scanf("%d\n", &number);`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:37:07.963

使用 scanf 读取输入时（当您在上面输入您的数字时），在按下回车键后会读取输入，但由回车键生成的换行符不会被 scanf 消耗。

这意味着您对 getchar() 的第一次调用将返回换行符（仍位于缓冲区中），这不是“Y”。

如果您反转对 getchar() 的两次调用 - 第二次调用是您分配给变量的调用，您的程序将运行。

```
printf("Do you want to try another number? Say Y(es) or N(o): \n");
getchar(); // the newline not consumed by the scanf way above 
response = getchar(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:51:03.660

正如其他人所说，输入流中有一个“\n”字符，这是您之前调用 scanf() 时遗留下来的。

幸运的是，标准库函数 fpurge(FILE *stream) 会擦除给定流中缓冲的任何输入或输出。当放置在您对 scanf() 和 getchar() 的调用之间的任何位置时，以下内容将清除 stdin 缓冲区中剩余的任何内容：

```
fpurge(stdin); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T04:27:14.090

只是放在你的声明`getchar()`之后，它会从缓冲区中吃掉不必要的东西......`scanf``'\n'`

# jms - Weblogic 桥级消息过滤器的 Websphere 等效项

> ID：14618425
> 
> 赞同：1
> 
> 时间：2013-01-31T04:20:50.397
> 
> 标签：jms, websphere, weblogic

在 weblogic 中，可以在两个 JMS 消息队列之间创建一个消息桥。配置此网桥时，可以应用消息过滤器，以便网桥仅路由与过滤器匹配的消息。

是否可以使用 Websphere 实现相同的目标？

具体来说，我正在尝试实现这种情况。

我有一个接收消息的源队列。每条消息都将设置一个自定义 JMS 属性。我想将源队列上的消息转发到基于 JMS 属性及其值的单独队列。这很容易在 WLS 中使用带有过滤功能的消息桥进行配置。我怎样才能在 WAS 中做同样的事情？

谢谢萨维奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:18:47.923

作为记录，我们最终在应用程序中编写了自己的路由算法，以确保将消息发送到每个客户端的单独队列。通过这种方式，我们独立于应用服务器实现，并且跨应用服务器的集成工作是相同的，即为每个集成客户端添加自定义队列。

简而言之，我们发布了一个必须设置的 JMS 自定义属性。使用已发布的约定，我们查找队列并将响应发送到队列。如果未设置该属性，则会创建一个默认队列来路由所有消息。如果设置了该属性，并且找不到队列，则会引发异常并停止处理。

这符合我们的目的。希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:34:26.423

你需要使用`SIB Mediation`.

WAS 信息中心有一个名为[编写路由中介](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.base.doc/ae/tjw_mediation_routing.html)的示例，这似乎是您所需要的。

在示例的底部有一个链接，`what to do next`该链接还解释了如何配置 WAS 以使用该中介。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:41:48.720

如果不编写自定义代码（根据您对 Aviram 答案的评论），就不可能达到完全相同的效果，但仍然可以达到相同的效果；

您说“源队列”根据自定义 JMS 属性将消息分发到其他“单独的队列”。我假设您已配置 MDB（消息驱动 bean）来处理这些单独队列中的消息。

您可以使用 WebSphere 执行的操作是直接从“源队列”将消息分发到这些 MDB，而无需将它们过滤/分发到单独的队列。

这是通过使用*JMS 消息选择器*来管理的。您可以使用激活规范定义将所有 MDB 指向*源队列*，并为每个（每种类型的消息一个）MDB 定义一个与您在 WLS 中使用的匹配的 JMS 消息选择器。这样，每条消息仅被传递到过滤器与消息属性匹配的 MDB。这有效地将消息过滤/分发到 WLS 中的不同 MDB。

您可以在信息中心阅读有关配置消息选择器的详细信息（[在 RAD 开发期间](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tmb_devap.html&resultof=%22message%22%20%22messag%22%20%22selector%22%20)，或[在部署时间/之后](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tjn0025_.html&resultof=%22message%22%20%22messag%22%20%22selector%22%20)）。下面是一个报价，让您了解它的外观；

> **消息选择器**
> 
> 此属性确定用于选择消息驱动 bean 接收哪些消息的 JMS 消息选择器。例如：
> 
> ```
> JMSType='car' AND color='blue' AND weight>2500 
> ```
> 
> 选择器字符串可以引用 JMS 消息头中的字段和消息属性中的字段。消息选择器不能引用消息正文值。

# javascript - 如何为模拟的 Javascript 事件设置 pageX

> ID：14618426
> 
> 赞同：0
> 
> 时间：2013-01-31T04:21:16.487
> 
> 标签：javascript, events, dom-events, mousemove

我通过以下方式模拟`mousemove`DOM 节点上的事件：

```
var e = document.createEvent('MouseEvents');
e.initEvent('mousemove', true, true)
node.dispatchEvent(e) 
```

但是，在`mousemove`绑定在文档上的回调中，事件对象的返回值为 0。在初始化或分派事件时，`pageX`我可以设置一种方法吗？`pageX`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:31:45.020

从[这里](https://developer.mozilla.org/en/docs/DOM/event.initMouseEvent)：

要查看它是否正常工作，只需运行以下命令：

```
document.addEventListener('mousemove', function (e) { console.log(e.pageX); });
var e = document.createEvent('MouseEvents');
// event.initMouseEvent(type, canBubble, cancelable, view, detail, screenX, screenY, clientX, clientY)...
e.initMouseEvent('mousemove', true, true, window, 1, 100, 100, 100, 100);
document.dispatchEvent(e); 
```

似乎`clientX`and 与and`clientY`相同！希望能帮助到你！`pageX``pageY`

# c++ - 添加字符串时遇到问题...（c ++）

> ID：14618428
> 
> 赞同：1
> 
> 时间：2013-01-31T04:21:22.827
> 
> 标签：c++, string, operators

出于某种原因，由于我的 toString 函数，我的源文件将无法编译。它声称它无法识别 + 符号来附加字符串。这是我的代码：

```
string s = "{symbol = " + symbol + ", qty = " + qty + ", price = " + price + "}"; 
```

symbol、qty 和 price 是类中的变量

我从编译器收到以下消息...

```
CLEAN SUCCESSFUL (total time: 55ms)

mkdir -p build/Debug/GNU-MacOSX
rm -f build/Debug/GNU-MacOSX/Stock.o.d
g++    -c -g -MMD -MP -MF build/Debug/GNU-MacOSX/Stock.o.d -o build/Debug/GNU-MacOSX/Stock.o Stock.cpp
Stock.cpp: In member function 'std::string Stock::toString()':
Stock.cpp:56: error: no match for 'operator+' in 'std::operator+(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>](((const char*)", qty = ")) + ((Stock*)this)->Stock::qty'
make: *** [build/Debug/GNU-MacOSX/Stock.o] Error 1

BUILD FAILED (exit value 2, total time: 261ms) 
```

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:24:06.727

你不能调用`std::string::operator+`int 类型，使用[std::stringstream](http://en.cppreference.com/w/cpp/io/basic_stringstream)

```
#include <sstream>
#include <string>

std::stringstream ss;
ss << "{symbol = " << symbol << ", qty = " << qty << ", price = " << price << "}";

std::string s = ss.str(); 
```

或者如果您使用 C++11 和 boost::lexical_cast 将整数类型转换为字符串，请使用[std::to_string ：](http://en.cppreference.com/w/cpp/string/basic_string/to_string)

```
std::string s = "{symbol = " + symbol + ", qty = " + std::to_string(qty) 
                + ", price = " + std::to_string(price) + "}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:30:40.307

如果`qty`and`price`是整数或类似的东西，您可以执行以下操作（在 C++11 中）：

```
string s = "{symbol = " + symbol + ", qty = " + std::to_string(qty) + ", price = " + std::to_string(price) + "}"; 
```

[例子](http://liveworkspace.org/code/48efP6%243)

# c++ - 语法错误？C++中的运算符

> ID：14618434
> 
> 赞同：0
> 
> 时间：2013-01-31T04:21:51.947
> 
> 标签：c++

我正在使用 ? 运算符，我想表达以下内容

```
 (a > b) ? (max = a) : (); // basically i want expression after `:` to be null 
```

`:`如果我在编译器抱怨语法不正确后留下空括号。`:`在空后留下表达式的正确语法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T04:25:51.703

> 我喜欢简洁的代码？操作员

`if (a > b) max = a;`如果我们计算字符，则更简洁。这是一个可怕的指标。

理想情况下，您的三元运算符不应引起副作用。在三元运算符中隐藏副作用会使代码更难阅读/调试/维护等。

如果您想要副作用，请不要涉及三元运算符。

如果您想为此使用三元运算符，请考虑`max = (a > b) ? a : max`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:32:50.073

给你[三元运算符](http://en.wikipedia.org/wiki/%3F%3A)。它的形式

```
 <condition> ? <r-value1> : <r-value2> 
```

如果条件为真，则返回 r-value1。否则，它返回 r-value2。

所以做你想做的一种方法是：

```
 (a > b) ? (max = a) : 0; 
```

0 是相同类型的 r 值，所以没关系。

但是，请注意，这是一种*糟糕*的代码编写方式。它不是很可读。

作为一个学习练习，没关系，但除此之外，正如大家所说，使用

```
 if (a>b) max=a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:32:35.517

这被称为三元运算符，就它而言，实际上并没有一种干净的方法可以将其留空。有一个看起来像这样的工作：

```
(a > b)?max=a:max=max; 
```

但这真的不是太有效。处理它的最有效方法是提到@ta-speot，并使用缩写的条件语句而不是三元运算符

# javascript - 绑定父元素与直接绑定元素有优缺点吗？

> ID：14618435
> 
> 赞同：5
> 
> 时间：2013-01-31T04:22:00.837
> 
> 标签：javascript, jquery, performance

为了更好地理解 jQuery 性能，我遇到了以下问题。考虑将单击事件绑定到列表中的项目的两个大致相等的解决方案：

**列出项目：**

```
<div id="items">
    <div class="item"><a href="#">One</a></div>
    <div class="item"><a href="#">Two</a></div>
    <div class="item"><a href="#">Three</a></div>
</div>

<div id="items2">
    <div class="item"><a href="#">One</a></div>
    <div class="item"><a href="#">Two</a></div>
    <div class="item"><a href="#">Three</a></div>
</div> 
```

请注意，有两个身份列表（除了 ID）。现在，考虑以下 jQuery 为`item`s 中的每个锚绑定客户端事件：

```
$('#items').on('click', '.item a', function(e) {
   console.log("### Items click"); 
});

$('#items2 .item a').on('click', function(e) {
    console.log("### Items2 click");
}); 
```

这实现了相同的结果，即单击列表中的项目将输出它们各自的消息。

观察正在绑定的事件，在第一种情况下，单击事件被绑定到`#items`容器，没有事件被绑定到子项。但是，在第二种情况下，**没有将**click 事件绑定到 parent `#items2`，但每个子元素都有一个 click 事件。

现在，我的问题是：**一个明显优于另一个？**天真，我认为第一种情况更可取，但由于缺乏对 jQuery 内部的了解，很可能这两种情况在幕后是等价的。

我准备了一个[小提琴](http://jsfiddle.net/sAGdk/1/)来演示这两种情况。观察 jQuery 为元素构建的事件是我得出上述假设的地方（您可以在 Web 浏览器的控制台中看到输出）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T05:09:54.053

除非您要处理大量元素，否则这两种方法都可能无关紧要。问题是您*什么时候*需要提高效率：在绑定时还是在触发时？

***免责声明：***我并不声称这些测试中的任何一个都是完美的。另外，我只在 Chrome 中测试过。

## 装订时间

我不知道答案，所以我决定尝试测试一切。首先，我假设使用委托进行绑定会快得多（它只需要绑定一次，而不是 X 次）。这似乎是正确的。

[http://jsperf.com/on-delegate-vs-not-bind-only](http://jsperf.com/on-delegate-vs-not-bind-only)

***不要委派：**慢 100%*

## 触发时间

接下来，我认为不使用委托实际上可能会更快地*触发*事件，因为不需要 DOM 移动来检查事件触发。无论出于何种原因，我对此都不正确：

[http://jsperf.com/on-delegate-vs-not-trigger-pls](http://jsperf.com/on-delegate-vs-not-trigger-pls)

***不委托：**慢 60%*

（最初`.trigger`是为了以防 jQuery 缓存委托事件，我相信它会这样做。这会影响测试）。

## 仅触发一项

然后，我认为不使用委托会更快地触发一个特定项目的事件。这也是错误的：

[http://jsperf.com/on-delegate-vs-not-trigger-one](http://jsperf.com/on-delegate-vs-not-trigger-one)

***不委托：**慢 80%*

即使它不是*最后一个*兄弟姐妹，而是较早的兄弟姐妹之一，也是如此：

[http://jsperf.com/on-delegate-vs-not-trigger-one-eq2](http://jsperf.com/on-delegate-vs-not-trigger-one-eq2)

## 深层嵌套

最后，我认为委托所做的很多工作都必须是 DOM 树解析。这意味着在深度嵌套的 DOM 中使用委托并绑定到非常古老的祖先并触发比绑定到深度嵌套的项本身并触发要花费更长的时间。

这最终证明是正确的：

[http://jsperf.com/on-delegate-vs-not-deep-nesting](http://jsperf.com/on-delegate-vs-not-deep-nesting)

***代表：**慢 90​​%*

## 结论

我不能在这里得出任何具有纪念意义的结论，但是如果您有大量的 DOM 可以使用，特别是如果它是深度嵌套的，您可能会考虑使用委托进行绑定而不是直接绑定。

如果有的话，这些例子教会了我（好吧，无论如何都加强了），你应该尽量让委托元素尽可能靠近将触发事件的后代。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T04:45:54.720

这就是优化的问题。让我解释：

```
$('#items2 .item a').on('click', function(e) {
  console.log("### Items2 click");
}); 
```

使用上面的代码，每个锚点都有自己的事件处理程序。这是浪费内存，因为只有一个处理程序可以执行相同的操作。

```
$('#items').on('click', '.item a', function(e) {
  console.log("### Items click"); 
}); 
```

同样使用第二个代码，如果`#items`在绑定后附加更多锚点，则不需要添加新的事件处理程序。父元素`#items`已经覆盖了它们。

# wpf - ObservableCollection 不更新

> ID：14618436
> 
> 赞同：0
> 
> 时间：2013-01-31T04:22:17.337
> 
> 标签：wpf, binding

我`ObservableCollection<Customer>`的窗户上有。

```
ObservableCollection<Customer> customers = new ObservableCollection<Customer>();
public ObservableCollection<Customer> Customers { get { return customers; } set { customers = value; OnPropertyChanged("Customers"); } } 
```

这`ObservableCollection`一定要`ListView`在窗户上。一旦使用选择客户来源`listView`并单击编辑，将出现一个新窗口，其中包含所选客户的数据。

**第二个窗口的构造函数**

```
public EditCustomerWindow(Customer c)
{
    InitializeComponent();

    customerobj = c; //Original object
    tempCustomerobj = new Customer(c); //Getting a copy of the customer object

    CustomerDataGrid.DataContext = tempCustomerobj;
} 
```

一旦用户单击**保存按钮**，客户对象将得到更新并且窗口将关闭。

但是我的问题是`ObserverCollection`即使我在编辑窗口关闭之前设置了新的编辑客户对象，也没有在第一个窗口上获得更新。找不到我做错了什么。请给我建议。

```
customerobj = tempCustomerobj; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:25:21.963

您似乎正在创建一个不在*ObservableCollection中的**新客户对象*

 *```
tempCustomerobj = new Customer(c); 
```

然后编辑该*新*对象。

```
CustomerDataGrid.DataContext = tempCustomerobj; 
```

这样做不会以任何方式影响仍在*ObservableCollection*中的原始 Customer 对象。

要解决此问题，请不要创建*新*客户，而是编辑现有客户。

**更新**

*根据您的评论*

线

```
customerobj = c; //Original object 
```

导致`customerobj`成为 的别名`c`，您的对象实际上位于`ObservableCollection`.

线

```
customerobj = tempCustomerobj; 
```

导致`customerobj`现在成为 的别名`tempCustomerobj`，这是您全新的 Customer 对象，（我认为*）*是`c`.

将您的构造函数更改为

```
public EditCustomerWindow(Customer c)
{
    InitializeComponent();

    CustomerDataGrid.DataContext = c;
} 
```

**更新 2**

您正在编辑的对象应该支持 IEditableObject。看

[https://stackoverflow.com/a/1091240/141172](https://stackoverflow.com/a/1091240/141172)

或者，您可以在开始编辑之前序列化对象，并在取消编辑时反序列化保存的状态。*

# c# - 服务器端 SQL 库

> ID：14618438
> 
> 赞同：0
> 
> 时间：2013-01-31T04:22:23.377
> 
> 标签：c#, .net, sql, vb.net, performance

.net 中是否存在可以在服务器端执行查询的库？

我问的原因是即使我已经使用了许多技巧来最大化数据库性能，例如`SELECT`ing 和`JOIN`ing on the `PRIMARY`，使用`INT`s 作为 the `PRIMARY`，fixed `LENGTH`s，`UPDATE`ing 而不是`DELETE`ing，no `NULL`s 用于`UPDATE`d 列，以及`UPDATE`ing 表 by使用`INT`“状态”列（例如“活动”、“非活动”等），但延迟时间从 <10ms 到 >100ms 只需使用几个`SELECT`s，`JOIN`每个 1 使用上述技术。

我将开始使用服务器来`JOIN`代替，因为我已经成功地将延迟降低到<10ms，但我想知道是否已经有一个库或内置功能可以做到这一点。

一个示例是将单个`JOIN`查询分解为多个查询：

1.  `SELECT``table1`基于`PRIMARY`键的特定行
2.  `SELECT``table2`基于`PRIMARY`位于的特定行`table1`

复杂性只会从那里增加。.net 是否存在这样的库/功能？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:24:36.697

听起来您正在寻找类似[ADO.NET Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)的东西。使用 LINQ，您可以通过将查询表达式转换为 SQL 并优化（尽可能）以获取您正在查询的数据的方式在代码中查询数据。

# visual-studio - 我可以在多台机器上使用 Visual Assist X 吗？

> ID：14618439
> 
> 赞同：5
> 
> 时间：2013-01-31T04:22:31.553
> 
> 标签：visual-studio, visual-assist, visual-assist-x

一份 Visual Studio 插件[Visual Assist X](http://www.wholetomato.com/default.asp)的成本为 250 美元，或学术许可 50 美元。

但是，我在笔记本电脑上的代码与在台式机上的代码一样多，所以我猜我必须购买 2 个许可证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T04:22:31.553

我一直认为按用户而不是按机器许可证要公平得多，因为就像多车保险单的工作方式一样，您可能会在两个安装之间分配时间，而不是同时使用它们*。*

然而，在软件的情况下，这并不像在驾驶汽车中那样明显。执行按用户许可也很棘手，而按机器许可在很大程度上是可行的。

无论如何，[Whole *Tomato*购买常见问题解答](http://www.wholetomato.com/purchase/faq.asp)解释说，在*Visual Assist X*的情况下，许可*是*针对每个用户的：

> **我想在我的台式机和笔记本电脑上使用 Visual Assist X。我需要两个许可证吗？**
> 不可以。Visual Assist X 是按用户授权的；欢迎您使用单一许可证在多台机器上使用我们的软件，由您独家控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T19:34:32.727

尽管常见问题解答中说了什么，但如果您的笔记本电脑和台式机位于同一网络上，则[Visual Assist 许可证检查](http://support.wholetomato.com/default.asp?W125)会阻止您同时在两台计算机上使用它。因为我认为这与他们的常见问题解答所说的完全相反，所以我已经打开了一个支持事件，并将在此处报告任何结果。

编辑：技术支持给了我一个解决方法。

# perl - 如何制作 Mojolicious::Lite 静态文件下载器？

> ID：14618442
> 
> 赞同：2
> 
> 时间：2013-01-31T04:22:47.343
> 
> 标签：perl, mojolicious, mojolicious-lite

我正在尝试使用 Mojolicious::Lite 制作文件上传/下载器，虽然上传部分没有问题，但下载部分却造成了麻烦。此代码将让我下载小文本文件，但其他任何内容都会变成 0 字节文件。关于如何正确执行此操作的任何建议？

```
get '/download/:file' => sub {
    my $self = shift;
    my $file = $self->param('file');
    $self->res->headers->content_type("application/x-download");
    $self->res->content->asset(Mojo::Asset::File->new(path => "./testdir/$file"));
    $self->rendered;
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T22:10:35.487

您可以安装插件[Mojolicious::Plugin::RenderFile](https://metacpan.org/module/Mojolicious%3a%3aPlugin%3a%3aRenderFile)来简化此操作。

```
plugin 'RenderFile';

get '/download/:file' => sub {
  my $self = shift;
  my $file = $self->param('file');
  $self->render_file('filepath' => "./testdir/$file");
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-08T11:17:17.933

[Joel Berger 发布了这个小程序来启动一个 web 服务器来提供本地文件](http://blogs.perl.org/users/joel_berger/2013/01/a-quick-static-file-webserver.html)，它工作得很好：

```
use Mojolicious::Lite;

@ARGV = qw(daemon);

use Cwd;
app->static->paths->[0] = getcwd;

any '/' => sub {
    shift->render_static('index.html');
    };

app->start; 
```

# javascript - 修改textarea时如何在div中获取输出？

> ID：14618445
> 
> 赞同：0
> 
> 时间：2013-01-31T04:23:14.293
> 
> 标签：javascript, jquery, html, css

我已经使用下面的方法来查看修改 textarea 区域时的输出，它工作正常。但是我想使用 Codemirror 作为 textarea，当我在 codemirror textarea 中插入任何数据时，输出应该出现 div 。

```
<script type="text/javascript">
function updateDisplay() {
document.getElementById("code").innerHTML =      document.getElementById("entry").value;
}
</script>

<textarea onkeyup="updateDisplay();" name="entry" id="entry" cols="1000" rows="500"></textarea>
<div name="code" id="code" ></div> 
```

代码镜像

```
 <link rel="stylesheet" href="http://codemirror.net/lib/codemirror.css">
<script src="http://codemirror.net/lib/codemirror.js"></script>
<script src="http://codemirror.net/mode/xml/xml.js"></script>
<script src="http://codemirror.net/mode/javascript/javascript.js"></script>
<script src="http://codemirror.net/mode/css/css.js"></script>
<script src="http://codemirror.net/mode/htmlmixed/htmlmixed.js"></script>

<textarea id="code" name="code">
<html style="color: green">
  <!-- this is a comment -->

<style type="text/css">
  h1 {font-family: comic sans; color: #f0f;}
  div {background: yellow !important;}
  body {
    max-width: 50em;
    margin: 1em 2em 1em 5em;
  }
</style>
</head>
 <body>

<script>
  function jsFunc(arg1, arg2) {
    if (arg1 && arg2) document.body.innerHTML = "achoo";
  }
 </script>
 </body>
</html>
</textarea></form>
<script>
  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {mode: "text/html", tabMode: "indent"});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:42:02.507

您需要将 onChange 传递给 CodeMirror，尝试以下代码：

```
<script>
    var editor = CodeMirror.fromTextArea(document.getElementById("entry"), {
        mode: "text/html",
        lineNumbers: true,
        onKeyEvent: function(editor) {
              document.getElementById("code").innerHTML = editor.getValue();
        }
    });
</script> 
```

演示：http: [//jsfiddle.net/ZbHGY/](http://jsfiddle.net/ZbHGY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T15:31:46.953

以下适用于 Codemirror v5.x

监听编辑器的“更改”事件，然后调用 save() 方法将编辑器的值传输到原始文本区域。

```
<script>
  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {mode: "text/html", tabMode: "indent"});
  editor.on("change", function(cm){ cm.save() })
</script> 
```

# c++ - 以一种好的方式返回指针

> ID：14618449
> 
> 赞同：1
> 
> 时间：2013-01-31T04:23:58.663
> 
> 标签：c++

此代码是否完全有效？在这里返回一个指针不会让我们陷入未定义的行为吗？

```
#include <iostream>
using namespace std;

int* lab(int* i) {
        int k=9;
        i=&k;
        return i;
}

int main(void) {
        int* i=0;
        cout << *lab(i) << endl;
        return 0;
} 
```

**编辑**：有效代码的外观如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T04:26:22.870

不，先生。那是无效的。您不能返回指向局部变量的指针。一旦`lab()`退出`k`不存在并且取消引用指向它的指针会导致未定义的行为。

想想`k`存储在哪里。您获取地址的自动变量存储在堆栈中。堆栈在函数进入时增长，在函数退出时收缩。当`lab()`返回时，分配给的堆栈空间被`k`回收并且可以被运行时重用，可能用于其他一些函数中的其他局部变量。

有几种方法可以解决这个问题。最简单的方法是让调用者提供一个存储值的位置，而不是`lab()`尝试寻找空间。这消除了返回`k`时被释放的问题。`lab()`

```
int* lab(int* i) {
    *i = 9;
    return i;
}

int main(void) {
    int k;
    cout << *lab(&k) << endl;
    return 0;
} 
```

另一种方法是声明`k`为`static`. 静态变量存储在某个地方的永久存储器中，而不是堆栈上，因此它们的地址在程序的整个生命周期内保持有效。

```
int* lab() {
    static int k=9;
    return &k;
} 
```

还有一种方法是使用`new`.

```
int* lab() {
    int* i = new int;
    *i = 9;
    return i;
}

int main(void) {
    int* i = lab();
    cout << *i << endl;
    delete i;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:26:01.793

int k 将在函数返回时被删除。因此，我将指向内存的未分配部分。错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:26:03.507

不，它无效。 `lab`返回指向变量局部变量的指针。`lab`该指针一旦存在就无效。访问它是未定义的行为。

# fortran - 在 Fortran 中使用带有多个子例程的 openmp 的最佳方法是什么

> ID：14618452
> 
> 赞同：0
> 
> 时间：2013-01-31T04:24:11.503
> 
> 标签：fortran, openmp

我有一个用 Fortran 编写的程序，并且有 100 多个子例程。但是，我有大约 30 个子例程，其中存在 open-mp 代码。我想知道编译这些子例程的最佳程序是什么。当我使用所有文件一次编译时，我发现 open mp 编译代码的运行速度甚至比没有 open-mp 的要慢。我应该单独编译带有 open-mp 标签的子程序吗？在这些条件下，最佳做法是什么？

太感谢了。

最好的问候， 贾巴巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:50:21.957

支持 OpenMP 的编译器会查找 OpenMP pragma（行首注释符号后的打开符号）。因此，没有使用 OpenMP 感知编译器编译的 OpenMP 代码的源代码应该产生精确或非常接近的目标文件（和可执行文件）。

编辑：应该注意，正如下面 Hristo Iliev 所述，启用 OpenMP 可能会影响串行代码，例如，通过使用算法（在并行时更有效）和优化方面可能不同的 OpenMP 版本的库。

很可能，这里的问题与您的代码算法更相关。或者，在比较 OpenMP 和非 OpenMP 版本时，您可能没有使用相同的优化标志进行编译。

# ruby-on-rails - 通过引用属性查询 Mongoid

> ID：14618453
> 
> 赞同：2
> 
> 时间：2013-01-31T04:24:19.197
> 
> 标签：ruby-on-rails, mongodb, mongoid

这是一个简单的结构：

```
class Dinner
  belongs_to :user
  field :name

class User
  has_many :dinners
  field :name 
```

现在，我想要找到“约翰”主持的所有晚宴。寻找类似的东西：

```
Dinner.where('user.name' => 'john') 
```

问题是我找不到任何方法来通过引用属性进行查询。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:39:11.317

我认为它不适用于您的模型。通过嵌套属性进行的 AFAIK 查询仅适用于嵌入式文档。你有两个选择：

```
Dinner.where(user: User.find_by(name: 'john')) 
```

或者直接在Dinner 中存储用户名。这是多余的，但使您的查询更简单。

MongoDB 不是关系数据库，不支持连接。

# asp.net-mvc-3 - 如何从多个表中实现搜索功能？

> ID：14618454
> 
> 赞同：1
> 
> 时间：2013-01-31T04:24:29.547
> 
> 标签：asp.net-mvc-3, razor

我正在使用来自不同表的搜索功能，

我已经通过使用谓词实现了一个表中不同字段的搜索功能

例子：-

```
var predicate = PredicateBuilder.True<My_prj_project>();

if (!string.IsNullOrEmpty(name))
    predicate = predicate.And(e1 => e1.Prj_project_name.Equals(name));

if (!string.IsNullOrEmpty(address))
    predicate = predicate.And(e1 => e1.Prj_project_address.Equals(address));

if (!string.IsNullOrEmpty(contact))
    predicate = predicate.And(e1 => e1.Prj_project_contact.Equals(contact)); 
```

以这种方式，但现在我需要从我需要搜索的表中。

所以你能给我寄样品（或）例子吗

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:10:29.790

为了进行有效的搜索，您还可以在数据库中创建一个存储过程并将搜索短语传递给它。在存储过程中，您可以根据需要选择条件、表格和字段。

# math - 从中心点投射的向量

> ID：14618455
> 
> 赞同：2
> 
> 时间：2013-01-31T04:24:32.167
> 
> 标签：math, geometry

我想将一个圆圈分成 X 条射线，这些射线将从给定点发射。

我遇到的问题是如何计算给定 X 的每条光线的矢量，X 是围绕一个圆圈彼此距离相等的光线数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:38:55.380

一个圆有 2π 弧度（360 度）。您想将此值除以 X 以告诉您每条射线之间所需的角度差。将此差异称为 Z。从指向 0 弧度的射线开始，并重复向其添加 Z。在每次迭代中，生成一条新射线，并在 X 次迭代后停止。

对于上面由弧度值定义的每条射线，使用三角函数（正弦和余弦）构造射线方向矢量的 X 和 Y 分量值。

# html - game.manifest 无法在 iPad 上运行

> ID：14618460
> 
> 赞同：0
> 
> 时间：2013-01-31T04:24:47.283
> 
> 标签：html, ipad

我有一个从教程中调整的 iPad 应用游戏。我有`html manifest="game.manifest"`。服务器上的 game.manifest 说

```
GAME MANIFEST

CACHE:
Bubble.html
js/Wrong.js
js/Particles.js
js/Bubble.js
sounds/burst.aif
image/Front.png
image/Back.jpg 
```

服务器 MIME 设置为 .htaccess

当我将它保存到主屏幕时，它不会在飞行模式下打开。它说“无法打开，因为您没有连接到互联网”。

该游戏位于 www.kobernik.com/bubblepop/balloon.html

为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:08:29.567

清单的第一行必须是`CACHE MANIFEST`而不是任何任意标题。

# c# - 将 C# 转换为 VB.Net 时未声明“InlineAssignHelper”

> ID：14618464
> 
> 赞同：18
> 
> 时间：2013-01-31T04:25:16.083
> 
> 标签：c#, vb.net, converter

这是我在 C# 中的代码：

```
 ListBox l = new ListBox();
        foreach (string[] s in Regex.Matches(new WebClient().DownloadString("http://www.hidemyass.com/proxy-list/search-229092"), @"(?:<td class=""leftborder timestamp""(?s).+?<style>)((?s).+?)\s*<td>\s+(\d{2,5})</td>").Cast<Match>().Select(m => new string[] { m.Groups[1].Value, m.Groups[2].Value }))
        {
            Regex.Matches(s[0], @"\.([^\{]+)\{([^\}]+)\}").Cast<Match>().ToList().ForEach(m => s[0] = s[0].Replace(string.Format(@"class=""{0}""", m.Groups[1].Value), string.Format(@"style=""{0}""", m.Groups[2].Value))); 
```

现在这是我使用它转换后的[代码](http://www.developerfusion.com/tools/convert/csharp-to-vb)：

```
 Dim l As New ListBox()
    For Each s As String() In Regex.Matches(New WebClient().DownloadString("http://www.hidemyass.com/proxy-list/search-229092"), "(?:<td class=""leftborder timestamp""(?s).+?<style>)((?s).+?)\s*<td>\s+(\d{2,5})</td>").Cast(Of Match)().[Select](Function(m) New String() {m.Groups(1).Value, m.Groups(2).Value})
        Regex.Matches(s(0), "\.([^\{]+)\{([^\}]+)\}").Cast(Of Match)().ToList().ForEach(Function(m) InlineAssignHelper(s(0), s(0).Replace(String.Format("class=""{0}""", m.Groups(1).Value), String.Format("style=""{0}""", m.Groups(2).Value))))
        l.Items.Add(String.Concat(Regex.Matches(Regex.Replace(Regex.Replace(s(0), "<(span|div) style=""display:none"">[\d\.]+</\1>", String.Empty).Remove(0, s(0).IndexOf("/style>")), "class=""\d+""", String.Empty), "[\d\.]+").Cast(Of Match)().[Select](Function(m) m.Value)) & ":" & s(1))
    Next 
```

我收到一条错误消息：

```
Error   1   'InlineAssignHelper' is not declared. It may be inaccessible due to its protection level. 
```

应该`InlineAssingHelper`是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-31T04:34:29.767

添加一个类似这样的函数：

```
Private Shared Function InlineAssignHelper(Of T)(ByRef target As T, ByVal value As T) As T
  target = value
  Return value
End Function 
```

# jquery - Javascript单击和鼠标按下冲突

> ID：14618478
> 
> 赞同：18
> 
> 时间：2013-01-31T04:26:22.423
> 
> 标签：jquery, event-handling, mouseevent, jquery-events

我有一个特定的场景，我`click`用来插入一个 div，然后`mousedown`在那个 div 上拖动它。我已将 绑定`click`到父容器，并绑定到`mousedown`div 本身。但是当我`mousedown`在 div 上时，它也会触发对父级的点击，因此插入多个 div 而不是拖动已经添加的 div！

有没有办法解决这个问题？我无法取消绑定`click`，因为我需要使用 , 添加 2 个 div `click`，然后绑定`mousedown`这些。

更新：我正在使用`selector.on(event, handler)`绑定类型。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T04:59:13.663

试试这个方法。`event.stopPropagation`在 mousedown 后不会停止单击事件的触发。鼠标按下和单击事件彼此无关。

```
var mousedownFired = false;

$("#id").on('mousedown', function(event) {
    mousedownFired = true;
    //code
});

$("#id").on('click', function(event) {
    if (mousedownFired) {
        mousedownFired = false;
        return;
    }
    //code
}); 
```

**更新：**

鼠标事件触发如下：

1.  鼠标按下

2.  点击

3.  mouseup

如果触发 mousedown，则`mousedownFired`变量将设置为`true`. 然后在点击事件中，它会`return`（即不继续处理点击事件），并且该`mousedownFired`变量将被重置为false，因此未来的点击事件将正常触发。不会考虑两个 mousedown 或两个 click 事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T05:05:29.867

您可能想要做的是将事件处理程序附加到父容器而不是单个子 div。通过这样做，当创建新的孩子时，您不需要添加额外的事件处理程序。

例如：

```
$("#parentDiv").on('click','.childDiv',function() {
    event.stopPropagation();
}).on('mousedown','.childDiv',function() {
    // your dragging code
}); 
```

当您向 .on() 函数提供选择器时，将调用传递的函数来匹配该选择器的后代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:32:46.190

您可以使用 event.stopPropagation()。

例子 ：

```
$("#button").mousedown(function(event){
event.stopPropagation();
// your code here
});

$("#button").click(function(event){
event.stopPropagation();
// your code here
}); 
```

看看这个页面[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T18:27:27.417

```
 var timestamp = 0;
    jQuery('ul.mwDraggableSelect a',element).mousedown(function(event){
        timestamp = new Date().getTime();
    });

    jQuery('ul.mwDraggableSelect a',element).click(function(event){
        var interval = 400;//if a mousedown/mouseup is longer then interval, dont process click
        var timestamp2 = new Date().getTime();
        if((timestamp2 - timestamp)>interval){ return false; }

                    /* your code here */
            }); 
```

# c# - 如何在现有数据库中反映文档结构的变化？

> ID：14618480
> 
> 赞同：1
> 
> 时间：2013-01-31T04:26:26.763
> 
> 标签：c#, ravendb, ravendb-studio

我有一个关于 RavenDb 的问题：

假设我已经存储了一个类型对象的集合，`Foo`现在对 class 进行更改`Foo`，比如说，删除一个属性。这种变化如何反映在现有的数据库中？还是我需要读取所有存储的 old 实例，`Foos`手动将它们映射到 new `Foo`，然后再次上传到数据库？

任何建议如何最好地处理这种情况？我对 RavenDB 很感兴趣，但主要担心想要扩展一个特定的类，然后想要在 db 中的文档中反映这种变化。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:14:47.973

对于大多数更改，您不需要做任何事情，您可以让 RavenDB 在下次加载对象时为您修复问题。例如，当您添加新属性或删除属性时。对于更复杂的东西，您可以运行一个脚本（[http://ayende.com/blog/157185/awesome-ravenb-feature-of-the-day-evil-patching](http://ayende.com/blog/157185/awesome-ravendb-feature-of-the-day-evil-patching)）将现有文档从一个版本转换为其他）。

# php - PHP 电子邮件脚本 - 我怎样才能传入可变数量的参数？

> ID：14618483
> 
> 赞同：0
> 
> 时间：2013-01-31T04:26:44.570
> 
> 标签：php

我的 PHP 文件中有一个 ajax 帖子用于发送电子邮件。问题是，我的 html 联系表单总是在变化，一个用户可能使用 10 个文本输入，另一个用户可能使用 5 个，等等。

数据像这样进入 PHP 文件：

```
txt1=John&txt2=aol@aol.com&txt3=5550123944&dropDown1=Sales&question=How+are+you 
```

PHP 文件是这样的：

```
<?php
$emailSubject = 'Customer Has a Question!';
$webMaster = 'giberisk@yahoo.com';

$name = $_POST ['name'];
$email = $_POST['email'];
$phone = $_POST ['phone'];
$question = $_POST ['question'];

$body = <<<EOD
<br><hr><br>
Name: $name <br>
Email: $email <br>
Phone: $phone <br>
Question: $question <br>
EOD;
$headers = "From: $email\r\n";
$headers .= "Content-type: text/html\r\n";
$success = mail($webMaster, $emailSubject, $body, $headers);
$theResults = <<<EOD
EOD;
echo "$theResults";
?> 
```

我必须做什么，以便 PHP 文件找出传递了多少个参数，并在这些参数的名称之后命名变量？

我希望我足够清楚，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:31:44.653

你可以做foreach，比如

```
$count = count($_POST); //shows number of variables POST'ed
foreach($_POST as $key => $val ) {
   echo $key . "==>" .$val;   
   //or assign values to key variables
   ${$key} = $value; //${$key} will be variable holding $value as value
} 
```

# jakarta-ee - JPA 多对多瞬态集合

> ID：14618486
> 
> 赞同：3
> 
> 时间：2013-01-31T04:27:06.543
> 
> 标签：jakarta-ee, jpa, many-to-many, eclipselink, transient

我想在我的实体中有一个不持久的可查询集合。换句话说，一个短暂的多对多关系。我努力了：

```
@Transient
@ManyToMany(fetch = FetchType.EAGER)
@JoinTable(name="QuestionSetClass_Link", schema = "SVY",
        joinColumns={@JoinColumn(name="QuestionSetID", referencedColumnName="QuestionSetID")},
        inverseJoinColumns={@JoinColumn(name="QuestionSetClassID", referencedColumnName="ID")})
private Collection<QuestionSetClass> questionSetClasses;
public Collection<QuestionSetClass> getQuestionSetClasses(){
    return questionSetClasses;
}
public void setQuestionSetClasses(Collection<QuestionSetClass> questionSetClasses){
    this.questionSetClasses = questionSetClasses;
} 
```

但是 EclipseLink 不会部署它并给我以下错误：映射注释不能应用于指定了 @Transient 的字段或属性。[字段 questionSetClasses] 违反了此限制。

谁能告诉我处理这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:55:09.567

你似乎很困惑。你不能有一段关系，也没有它。你想做什么？

@Transient 或 Java 瞬态意味着 JPA 将完全忽略该字段及其上的任何注释。

您似乎想查询该字段，但没有保留它？这很奇怪，那么这些关系将如何定义呢？请注意，如果您不更改/添加任何内容，则不会保留任何内容。强烈建议您保持对象模型与数据库状态同步。

如果你有一个双向的 ManyToMany，那么一侧必须使用 mappedBy 并且实际上是只读的，并允许读取，但会在持久化时被忽略（但仍应保持）。在 EclipseLink 中，您还可以使用 DescriptorCustomizer 将 ManyToMany 标记为只读，并将映射设置为只读。

EclipseLink 还支持 ManyToManyQueryKeys，允许您加入/查询关系，即使它在对象模型中不存在。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Query_Keys](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Query_Keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:14:28.540

瞬态注释意味着没有属于 Java 对象的注释字段的数据库列（或连接表）。因此，在字段中同时添加`@Transient`和`@ManyToMany`注释是矛盾的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:29:52.070

我找到了答案。它是将私有元素声明为不是私有的，而是瞬态的。然后我可以使用声明的 fetch 类型保留 ManyToMany。

```
@ManyToMany(fetch = FetchType.EAGER)
@JoinTable(name="QuestionSetClass_Link", schema = "SVY",
        joinColumns={@JoinColumn(name="QuestionSetID", referencedColumnName="QuestionSetID")},
        inverseJoinColumns={@JoinColumn(name="QuestionSetClassID", referencedColumnName="ID")})
transient Collection<QuestionSetClass> questionSetClasses;
public Collection<QuestionSetClass> getQuestionSetClasses(){
    return questionSetClasses;
}
public void setQuestionSetClasses(Collection<QuestionSetClass> questionSetClasses){
    this.questionSetClasses = questionSetClasses;
} 
```

# php - “大”S3 图像无法在 PHP 中加载

> ID：14618495
> 
> 赞同：1
> 
> 时间：2013-01-31T04:28:11.507
> 
> 标签：php, appfog

我正在尝试在 AppFog PaaS 系统上使用 WordPress。不幸的是，AppFog 没有持久存储，因此数据库之外的所有内容都需要存储在某个外部系统（如 S3）上。我成功地使用了一个插件，它将我所有的 WordPress 媒体推送到 S3，但在加载一些图像时遇到问题。

为了进行调查，我部署了以下脚本：

```
// get the image name from the query string 
// and make sure it's not trying to probe your file system 
if (isset($_GET['pic'])) { 
    $pic = $_GET['pic'];

    // get the filename extension 
    $ext = substr($pic, -3);

    // set the MIME type 
    switch ($ext) { 
        case 'jpg': 
            $mime = 'image/jpeg';
            break;
        case 'gif': 
            $mime = 'image/gif';
            break;
        case 'png': 
            $mime = 'image/png';
            break;
        default: 
            $mime = false;
     }
     // if a valid MIME type exists, display the image 
    // by sending appropriate headers and streaming the file 
    if ($mime) { 
        header('Content-type: '.$mime);
        header('Content-length: '.filesize($pic));
        $file = fopen($pic, 'rb');
        if ($file) { 
            fpassthru($file);
            exit;
         }

     }
 }

 ?> 
```

这让我可以直接测试我在 PHP 中读取和写入图像的能力。这个代理脚本非常适合大约 10KB 以下的图像——即，当我在浏览器中打开脚本并将其指向我的 S3 存储桶中的某个“小”图像文件时，我可以看到它。

但是，当我尝试加载“大”文件（超过 10KB）时，会出现错误。在 Firefox 中，这是：

```
The image “http://myssite.com/iproxy.php?pic=http://aws.amazon.com%2Fmybucket%2Fwp-content%2Fuploads%2F2013%2F01%2Fmylargeimage.png” cannot be displayed because it contains errors. 
```

我已经为此苦苦挣扎了几个小时，似乎无法弄清楚任何事情。我尝试将其更改`output_buffering`为更大的值，但这并没有帮助。

任何提示将不胜感激！

# java - 滑道和梯子游戏板间距不对齐

> ID：14618496
> 
> 赞同：0
> 
> 时间：2013-01-31T04:28:28.523
> 
> 标签：java, printing, spacing

我是一名学生，从事滑道和梯子游戏。我必须制作有 100 个空间的板，在板上放 10 个随机滑槽和梯子，我还必须打印 10*10 板。到目前为止，一切正常，直到打印板部分。当我使用打印方法时，我的电路板会打印所有需要打印的东西，但排列得不好。关于如何排列所有打印输出的任何提示？

```
import java.util.Random;
public class ChutesAndLadders {
    String[] board;
    Random ran = new Random();

public void setBoard(String[] b) {
    board = b;
    for(int i=0;i<board.length;i++){
        board[i]="  ";
    }
}

public void makeChutes(int x){
    for(int i=0;i<x;i++){
    int temp = ran.nextInt(board.length);
    if (board[temp].equals("    "))
        board[temp]="C"+x;
    else 
        i--;
    }
}

public void makeLadders(int y){
    for(int i=0;i<y;i++){
    int temp = ran.nextInt(board.length);
    if (board[temp].equals("    "))
        board[temp]="L"+y;
    else 
        i--;
    }
}
    public void printBoard(){
    int counter = 0;
    for(int i=0;i<board.length;i++){
        counter++;
        System.out.print("|"+board[i]);
        if(counter==10){
            System.out.print("|"+"\n");
            counter=0;
        }
    }
}
public static void main(String[] args) {
     ChutesAndLadders cl = new ChutesAndLadders();
     cl.setBoard(new String[100]);
     cl.makeChutes(10);
     cl.makeLadders(10);
     cl.printBoard();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:37:31.373

上面的代码比对齐有更多的问题（例如，它会永远循环而不终止，溜槽和梯子上的数字是错误的）。但是关于对齐，问题在于您替换空格的字符串与空格本身的长度不同。使用[String.format()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)将它们填充为四个字符。

用法将如下所示：

```
board[temp] = String.format("%4s", s) 
```

其中 s 是滑槽或梯子。

# google-apps-script - 应用程序脚本：字符串的新日期（...）

> ID：14618497
> 
> 赞同：1
> 
> 时间：2013-01-31T04:28:31.417
> 
> 标签：google-apps-script, google-calendar-api

使用应用程序脚本和谷歌日历，我得到了[同名的事件](https://gist.github.com/4680055)：

```
function authorize() {
  var oauthConfig = UrlFetchApp.addOAuthService("calendar");
  var scope = "https://www.googleapis.com/auth/calendar";
  oauthConfig.setConsumerKey("anonymous");
  oauthConfig.setConsumerSecret("anonymous");
  oauthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oauthConfig.setAuthorizationUrl("https://accounts.google.com/OAuthAuthorizeToken");    
  oauthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");  
}

function beginEnd(calId, eventName){
  authorize();
  var key = "...";
  var query = encodeURIComponent(eventName); 
  calId = encodeURIComponent(calId);
  var params = {
    method: "get",
    oAuthServiceName: "calendar",
    oAuthUseToken: "always",
  };
  var url = "https://www.googleapis.com/calendar/v3/calendars/"+
    calId+"/events?q=" + query + "&key=" + key;
  var request = UrlFetchApp.fetch(url, params);
  var response = Utilities.jsonParse(request.getContentText());
  var items = response.items;
  for ( i = 0 ; i < items.length ; i++){
    var start = (items[i].start.dateTime);
    var end =  (items[i].end.dateTime);
    Logger.log( [start,end]);
  } 
} 
```

但是，当我尝试将开始转换为新日期时：

```
var start = (items[i].start.dateTime);
Logger.log(start);
Logger.log( new Date(start) ); 
```

我明白了

```
2013-01-21T15:00:00-03:00
Wed Dec 31 16:00:00 PST 1969 
```

为什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:43:32.680

似乎日期定义不喜欢连字符......

它是这样工作的，即使我确定可以找到更好的解决方案（我不是正则表达式专家；-）

```
Logger.log(new Date('2013-01-21T15:00:00-03:00'.replace(/-/g,'/').replace(/[A-Z]/,' ').substr(0,19))) 
```

# javascript - Will_paginate 和航点重复

> ID：14618500
> 
> 赞同：0
> 
> 时间：2013-01-31T04:29:01.943
> 
> 标签：javascript, coffeescript, will-paginate, infinite-scroll, jquery-waypoints

我正在使用 will_paginate gem 和 jQuery waypoint。当它获得第二页时效果很好，但是当它获得第三页时它会附加两次。

这是代码：

```
 $(".pagination .next_page").waypoint ->
      url = $(this).attr('href')
      $.getJSON url, (data) ->
        $(".pagination").remove()
        $(".items_container").append data.items 
```

我尝试添加`.on "waypoint", ->`and `off().on "waypoint" ->`，但它仍然将结果附加两次..

有任何想法吗？

# jquery - $.cookie 不是函数类型错误

> ID：14618518
> 
> 赞同：13
> 
> 时间：2013-01-31T04:31:01.950
> 
> 标签：jquery, html

这个错误是什么意思，我该如何解决？

```
TypeError: $.cookie is not a function
[Break On This Error]   

$($.cookie("inputFocus")).focus() 
```

相关线路：

```
$($.cookie("inputFocus")).focus() 
```

所有 jQuery 代码：

```
<script>
$(document).ready(function() {
    $("#state").change(function () {
    this.form.submit();
})
$($.cookie("inputFocus")).focus()

$("#supplier_name").val($("#supplier_name").val());
$("#aircraft_type").val($("#aircraft_type").val());
var typingTimer;                
var doneTypingInterval = 600;  

$('#supplier_name').keyup(function(){
    clearTimeout(typingTimer);
    if ($('#supplier_name').val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }
    $.cookie("inputFocus", "#supplier_name"); 
});

$('#aircraft_type').keyup(function(){
    clearTimeout(typingTimer);
    if ($('#aircraft_type').val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }
    $.cookie("inputFocus", "#aircraft_type"); });
function GetQueryStringParams(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++)
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam)
        {
            return sParameterName[1];
        }
    }
}

var state = GetQueryStringParams('state');
var supplier_name = GetQueryStringParams('supplier_name');
var aircraft_type = GetQueryStringParams('aircraft_type');

    if(supplier_name === "" && state === "any" && aircraft_type === "") {
            $('#clear').attr('disabled','disabled');
    }
    $("#clear").click(function() {
    if(state === "any") {
        $("#aircraft_type").val("");
        $("#supplier_name").val("");
    } else {
        $('#state option:selected').remove();
        $("#aircraft_type").val("");
        $("#supplier_name").val("");    
    }
    });

function doneTyping () {
    $("form").submit();
}

});
</script> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T04:35:19.797

您需要在此代码段之前包含 jQuery [cookie 插件。](https://github.com/carhartl/jquery-cookie)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-26T07:11:16.187

在我的情况下，包括 jquery 文件两次（多次）也给出了同样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:35:52.333

该错误的含义正是它所说的：`$.cookie`不存在。

jQuery 核心不包含任何与 cookie 相关的内容。有[几个 cookie 库](http://www.google.com/search?q=jquery+cookie)可以`cookie`向`$`. 您需要先将一个添加到您的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-18T00:28:25.740

这意味着没有加载应该具有该功能的库。但是你可以使用 javascript 设置一个 cookie，在这里：

[https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie)

# android - android应用程序中的Facebook风格导航栏

> ID：14618519
> 
> 赞同：0
> 
> 时间：2013-01-31T04:31:12.130
> 
> 标签：android

我尝试了以下链接[https://github.com/StevenRudenko/ActionsContentView](https://github.com/StevenRudenko/ActionsContentView)起初我对该应用程序印象深刻，因为它按预期进行。但一段时间后我注意到的主要事情。那就是应用程序只是在同一个 web 视图上调用不同的 url。这意味着它没有打开新的活动或屏幕。我试图在每次单击按钮时打开新活动，但这种方法不起作用，因为 ii 我通过意图调用新活动布局，它将在新屏幕上显示新布局，并且该屏幕将消失。

请给我一些建议，以便我每次点击都可以打开新的活动布局。甚至可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:54:08.053

我个人最喜欢的：[SlidingMenu 库](https://github.com/jfeinstein10/SlidingMenu)：只需在选择菜单项时替换活动中的片段。这段代码应该有帮助： [活动](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/fragments/FragmentChangeActivity.java)和[菜单片段](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/fragments/ColorMenuFragment.java)

# yii - 当我们通过ajax请求删除记录时，yii CListView没有更新

> ID：14618526
> 
> 赞同：2
> 
> 时间：2013-01-31T04:31:58.557
> 
> 标签：yii

在这里，我正在使用 ajax 请求从 clistview 中删除记录，该记录已成功删除，但如果我们刷新页面，列表视图不会更新，那么只有记录从 clist 视图中删除，任何人都可以帮助这是我的代码

```
<?php
echo CHtml::link(CHtml::encode('Delete'), $this->createUrl('delete', array('id' => $data['id'])), array(// for htmlOptions
            'onclick' => ' {' . CHtml::ajax(array(
            'type'=>'POST',
            'beforeSend' => 'js:function(){if(confirm("Are you sure you want to delete?"))return true;else return false;}',
            'url'=>$this->createUrl('delete', array('id' => $data['id'],'ajax'=>'delete')),
            'complete'=>'js:function(jqXHR, textStatus){$.fn.yiiListView.update("firstlist");}'
            )) .
            'return false;}', // returning false prevents the default navigation to another url on a new page 
            )
        ); 
```

这是 clistview 的代码

```
<?php $this->widget('zii.widgets.CListView', array(
            'id' => 'firstlist', 
            'dataProvider'=>$dataProvider,
            'itemView'=>'_beneview',
            'enablePagination' => false,
            'summaryText' => '',

)); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T11:53:42.780

您可以`CHtml::ajaxLink`用于 ajax 请求，但您的方式也很好。我还启用了分页过滤了 CListView 结果，您可以在[此链接上查看更新列表视图的主要内容](http://phpsoftsol.chandigarhservices.com/yii-clistview-ajax-search/)

请检查视图部分和更新脚本部分。希望他会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:59:03.867

使用CGridView，可以添加CButtonColumn

# facebook - 我尝试使用 facebook 提要对话框，但它不起作用

> ID：14618527
> 
> 赞同：-1
> 
> 时间：2013-01-31T04:32:12.260
> 
> 标签：facebook, facebook-javascript-sdk

只是想将提要发布到我的墙上，但收到错误消息

```
An error occurred. Please try again later.

API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: redirect_uri is not owned by the application. 
```

这是我的代码

```
var app_url = http://xxx.xxx.xxx.xxx;
var fb_app_id = xxxxxxxxxx;
// When init
FB.init({
    appId: fb_app_id, 
    status: true, 
    cookie: true, 
    xfbml: true, 
    frictionlessRequests: true, 
    useCachedDialogs: true, 
    oauth: true
});
// When posting
FB.ui({
    method : 'feed',
    link : 'http://apps.facebook.com/' + fb_app_id,
    redirect_uri : app_url + 'facebook/index.php',
    picture : app_url + 'icon/fb_feed_lvup.png',
    name : 'My Game',
    caption : 'Player level up to ' + level + '!!',
    description : 'Congratulation :D'
},
function callback(response) {
    // Callback after feed posted...
    console.log('publishStory UI response: ', response);
}); 
```

我不知道这与我未设置“应用程序域”的应用程序设置有关吗？

我无法设置它，因为主机没有域名我只是使用 IP 地址来设置 URL 设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:25:37.120

试试这个-

将`Site URL`应用程序设置中的 复制到`redirect_url`，然后检查它是否有效。

我检查了，其他一切都很好。

# php - 使用会话用户名作为“用户名”.jpg 打开 php 图像

> ID：14618533
> 
> 赞同：1
> 
> 时间：2013-01-31T04:32:43.730
> 
> 标签：php

这是我第一次问这个问题，但与我的其他问题不同，我一直无法找到我正在寻找的具体答案。我对 php 很陌生，但它在当前项目中运行良好。

当图像文件名设置为特定名称时，我有这行代码在我的页面上下文中完美运行。

 `````
<?php echo $_SESSION['userName'];?>

<?php echo "<img src='videos/jpgs/'userName'.jpg' width='83'
 height='20'/>"; ?>! 
```` 

`我想做的是打开一个使用用户名作为图像文件名的图像。图像位于路径中的文件夹中。用户是内部设置的，用户名是预先确定的。`

 `提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:34:44.320

采用：

```
<?php echo "<img src='videos/jpgs/".$_SESSION['userName'].".jpg' width='83' height='20'/>"; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:37:46.440

```
<img src='videos/jpgs/<?php echo $_SESSION['userName']; ?>.jpg'/> 
```

你也可以试试这个``

# .net - 如何以跨平台方式在新进程中启动 .NET exe？

> ID：14618539
> 
> 赞同：4
> 
> 时间：2013-01-31T04:33:21.513
> 
> 标签：.net, mono, monodevelop

我有一个 .NET 应用程序，我需要从另一个 .NET 应用程序启动它自己的进程。如果我只关心它在 Windows 上的工作，那很容易，我可以使用 System.Diagnostics.Process.Start，指定我的 exe 的路径，我很高兴。

诀窍是，这是一个 MonoDevelop 插件，所以我需要这样做是一种跨平台工作的方式，在 Mac 和 Linux 上，你不能指望操作系统知道如何处理 .NET 程序集而没有一些帮助（即，调用 mono myapp.exe）。

由于这是针对 MonoDevelop 插件，使用 Mono 或 MonoDevelop 库的答案是可以接受的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T05:01:09.870

如果您在 .NET 可执行文件上从 Mono 使用 Process.Start，它将自动与 Mono 一起运行。它不会直接传递给操作系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T13:17:06.967

您还可以使用 MonoDevelop.Core.Runtime.ProcessService.StartProcess()

# vba - 使用 VBA 将整个 Excel 工作簿复制到另一个工作簿

> ID：14618540
> 
> 赞同：2
> 
> 时间：2013-01-31T04:33:30.640
> 
> 标签：vba, excel

我有一个包含 4 个工作表的工作簿（“初始工作簿”）。
我需要将所有四个工作表复制到不同的工作簿（“新工作簿”）。

我有下面的代码，它允许我从新工作簿导航到初始工作簿，然后在一个工作表上复制特定范围。我想对此进行修改，以允许我选择并复制原始工作表上的所有四个工作表。

您可以提供的任何帮助将不胜感激：

```
Private Sub CommandButton1_Click()

    Dim wkbCrntWorkBook As Workbook
    Dim wkbSourceBook As Workbook

    Dim rngSourceRange As Range
    Dim rngDestination As Range

    Set wkbCrntWorkBook = ActiveWorkbook

    With Application.FileDialog(msoFileDialogOpen)
        .Filters.Clear
        .Filters.Add "Excel 2002-03", "*.xls", 1
        .Filters.Add "Excel 2007", "*.xlsx; *.xlsm; *.xlsa", 2
        .AllowMultiSelect = False
        .Show

        If .SelectedItems.Count > 0 Then
            Workbooks.Open .SelectedItems(1)
            Set wkbSourceBook = ActiveWorkbook
            Set rngSourceRange = Application.InputBox(prompt:="Select source range", Title:="Source Range", Default:="$A:$CS", Type:=8)
            wkbCrntWorkBook.Activate
            Set rngDestination = Application.InputBox(prompt:="Select destination cell", Title:="Select Destination", Default:="A1", Type:=8)
            rngSourceRange.Copy rngDestination
            rngDestination.CurrentRegion.EntireColumn.AutoFit
            wkbSourceBook.Close False
        End If
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-19T15:10:11.080

奇迹般有效：

```
ActiveWorkbook.Sheets.Copy 
```

（来源：[http](http://www.mrexcel.com/forum/excel-questions/404450-visual-basic-applications-copy-active-workbook-new-workbook.html) ://www.mrexcel.com/forum/excel-questions/404450-visual-basic-applications-copy-active-workbook-new-workbook.html ）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-01T15:46:17.907

我知道这是一篇旧帖子，但现有答案只复制表格（不包括查询等），而且效率很低。下面的代码对我来说就像一个魅力：

```
Function duplicateWorkbook(wk As Workbook) As Workbook
    Dim path As String
    path = Environ("temp") & "\" & wk.Name & "." & _ 
        Right(wk.FullName, Len(wk.FullName) - InStrRev(wk.FullName, "."))
    wk.SaveCopyAs path
    Set duplicateWorkbook = Workbooks.Add(path)
    Kill path
End Function 
```

要使用，只需如下调用它：

```
Dim wk AS Workbook: Set wk = duplicateWorkbook(ActiveWorkbook) 
```

代码将工作簿的临时副本保存在 temp 文件夹中，使用临时簿作为模板创建新工作簿，然后删除临时工作簿。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T08:13:18.857

此重新编写的代码应复制您的工作表：

```
私有子 CommandButton1_Click()
    将 wkbSource 调暗为工作簿
    Dim wkbTarget As Workbook '更好地使用源和目标作为名称，因为它不那么混乱
    暗淡 strFileName 作为字符串

    设置 wkbSource = ActiveWorkbook

    strFileName = Application.GetOpenFilename(_
        “Excel 2002-03 (*.xls), *.txt,” & _
        “Excel 2007 (*.xlsx;*.xlsm;*.xlsa)、*.xlsx;*.xlsm;*.xlsa”)

    If strFileName = "False" Then Exit Sub '确保您的语言环境也返回 False！

    设置 wkbTarget = Workbooks.Open(strFileName)
    wkbSource.Sheets（数组（“Sheet1”，“Sheet2”，“Sheet3”，“Sheet4”））。复制_
        之前：=wkbTarget.Sheets(1)
    '进一步的编辑在这里

    wkbTarget.Close False

结束子

```

只需根据您的需要替换工作表名称即可。

（PS：您可以自己找到这些命令，如果您只是记录一个宏，将工作表复制到另一个工作簿 - 然后查看生成的代码！;-)）

# jquery - 元素的 CSS，在页面加载结束时恢复？

> ID：14618541
> 
> 赞同：0
> 
> 时间：2013-01-31T04:33:30.730
> 
> 标签：jquery, css, dynamic, greasemonkey, roblox

我正在尝试`position`改变

```
<div class="BannerRedesign" id="Banner" style="position: fixed ! important; height: 36px ! important; width: 100% ! important;">
    <div class="BannerCenterContainer" id="NavigationRedesignBannerContainer"> 
```

（roblox 横幅元素，试图使其不浮动）`relative`使用 Greasemonkey，启用所有权限。但是，每次在文档加载结束时，它都会恢复为浮动状态。

我什至尝试附加`bannercentercontainer`到一个不同的元素，但我不知道我是否做对了......你能帮我把它改成相对位置吗？

我试过了：

```
$('#Banner').css('position', 'relative !important') 
```

和

```
if ($('#Banner').css('position') == 'fixed') {
$('#Banner').css('position', 'relative')
} 
```

，但是一旦页面完成加载，它就会变回来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:10:45.070

该横幅可能设置在静态 HTML 中，并由 AJAX 定期重置。

解决它的一种方法是使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)。

这是**一个完整的脚本**，可以处理问题中给出的代码：

```
// ==UserScript==
// @name     _Unfix annoying banner
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements ("#Banner", unFixThePositioning);

function unFixThePositioning (jNode) {
    jNode.css ('position', 'relative');

    //-- Or, for a little extra "Oomph":
    jNode[0].style.setProperty ("position", "relative", "important");

    return true;    //-- Check repeatedly.
} 
```

# javascript - 从 JS 字符串中获取值

> ID：14618542
> 
> 赞同：-6
> 
> 时间：2013-01-31T04:34:09.577
> 
> 标签：javascript

我有一个字符串，例如“hello word:abc there”

我需要在值'word：'之后获取值，所以在上述情况下，答案将是'abc'。

"abc xyz 字：2 hhh yyy" = '2'

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:41:08.373

一种方法是使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:54:26.410

使用这个正则表达式：

```
var yourString="hello word:1235 tsfa";
var patt1=/:(\w*)/;
alert(yourString.match(patt1)[1]); 
```

工作[的jsFiddle](http://jsfiddle.net/zaheerahmed/J843X/)

# ios - 在 UIImagePickerController 中强制横向

> ID：14618546
> 
> 赞同：12
> 
> 时间：2013-01-31T04:34:36.593
> 
> 标签：ios, objective-c, xcode, orientation, uiimagepickercontroller

我是 iOS 开发的新手，我正在开发我的第一个应用程序。（很抱歉，如果我问一个新手问题）

我的应用程序都是纵向的，除了我使用**UIImagePickerController**拍照以在应用程序中使用的地方，我正在做的是：

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.delegate = self;
picker.sourceType = UIImagePickerControllerSourceTypeCamera;
picker.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeImage];
picker.allowsEditing = NO;
[self presentModalViewController:picker animated:YES]; 
```

由于我的应用程序在**Portrait**中，我需要使**UIImagePickerController**仅在**Landscape**中。如果我尝试使用：

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

看来我不能使用，因为我的 Xcode 在这行中识别为错误（可能是因为 Xcode 的版本，我不确定）。而且我不确定，但似乎如果我正在为**iOS 5.1**开发，我也需要**为 iOS 6.0**实现一些东西，对吗？

有人可以帮助我了解制作这个**UIImagePickerController**需要什么，并且只有应用程序中的这个视图控制器才能在横向方向工作并在 iOS 5.1 和 6 中工作？

问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-02T19:59:15.463

根据[UIImagePickerController 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/doc/uid/TP40007070-CH3-DontLinkElementID_1)

> **重要提示**：`UIImagePickerController`该类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。您可以将自定义视图分配给[cameraOverlayView](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/cameraOverlayView)属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互。

所以看起来强制横向模式是不受支持和不鼓励的，除非您通过将默认控件替换为自定义`cameraOverlayView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:07:39.103

创建一个继承自 UIImagePickerController 的名为“CUIImagePickerController”的类，重写以下方法，现在使用这个类！

```
@interface CUIImagePickerController : UIImagePickerController

@end

@implementation CUIImagePickerController
- (BOOL)shouldAutorotate {
    return NO;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orient {
    return (orient == UIInterfaceOrientationLandscapeLeft) | (orient == UIInterfaceOrientationLandscapeRight);
}
@end 
```

问候，

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T04:44:43.660

尝试实现以下方法：

```
- (BOOL)shouldAutorotate
{

return YES;
}

-(NSUInteger)supportedInterfaceOrientations

{
return UIInterfaceOrientationMaskLandscape;

}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return UIInterfaceOrientationLandscapeRight;
} 
```

# yii - CWebUser 和 CUserIdentity

> ID：14618548
> 
> 赞同：3
> 
> 时间：2013-01-31T04:34:46.643
> 
> 标签：yii

我正在为我的应用程序构建一个身份验证模块，但我不太了解 和 之间的`CWebUser`关系`CUserIdentity`。

要将用户 ID 设置为`Yii::app()->user->id`我必须在我的`UserIdentity`类中执行此操作并创建一个方法：

```
public function getId() {
    return $this->_id;
} 
```

但是要设置`isAdmin`为`Yii::app()->user->isAdmin`我必须在我的`WebUser`类中创建一个方法：

```
function getIsAdmin() {
    $user = $this->loadUser(Yii::app()->user->id);
    return intval($user->user_level_id) == AccountModule::USER_LEVEL_ADMIN;
} 
```

为什么我不能只创建`UserIdentity`类的方法？这里的分工是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:07:42.483

( `UserIdentity`UI) 类就像一张身份证，其中`WebUser`类是真实的人加上你所知道的关于他们的一切。

UI 类通过数据库、Web 服务、文本文件等为您提供身份验证。它让您知道关键属性是什么，并允许您操作它们。但是，用户可以为您提供有关他们被允许做什么、名称、细粒度权限等的更多信息。

## OK，结束比喻

UI 类保存关键信息，因此在询问用户 ID 时，它将参考 User *Identity*类来获取用户的*Identifier*。

与识别或验证用户无关的任何内容都在`WebUser`课程中

彻底清除？

## 你的例子

您以`getId`函数为例，但可以创建该函数`WebUser`以覆盖默认值，即从状态中提取。

所以不确定你在这里的意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T13:30:44.297

我喜欢接受的答案如何使用现实生活中的例子来使其更容易理解。但是，我也喜欢 Chris 在[这里](http://chris-backhouse.com/Cook-your-own-User-Authentication-in-Yii-%E2%80%93-Part-1/989)举例说明的方式。

> 用户信息存储在 CWebUser 类的一个实例中，这是在应用程序初始化时创建的（即：当用户首次连接网站时），无论用户是否登录。默认情况下，用户设置为“访客”。身份验证由名为 CUserIdentity 的类管理，该类检查用户是否已知和有效用户。这种验证的发生方式将取决于您的应用程序，可能是针对数据库，或使用 facebook 登录，或针对 ldap 服务器等...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-16T09:06:55.510

使用所有这些类有什么好处？我可以通过用户模型做所有事情。如果我设置场景“登录”，验证期间将检查密码。如果验证没问题，我可以像这样设置会话我自己的变量：

```
$model = new User("login");
$model->attributes = $_POST["User"];
if ($model->validate())
{
  Yii::app()->session["currentUser"] = $model;
}
else
{
  // .. show error
  unset(Yii::app()->session["currentUser"]);
} 
```

在用户模型中，我有静态方法来检查这个变量

```
public static function isGuest()
{
  return isset(Yii::app()->session["currentUser"]);
}

public static function getCurrent()
{
  return Yii::app()->session["currentUser"];
} 
```

我可以很快地称之为：

```
User::isGuest();
$model = User::getCurrent();
// instead of writing this:
Yii::app()->user->isGuest; 
```

那么我为什么要使用 Yii 建议的如此复杂的类层次结构呢？我一直不明白。

# jquery - 在 jQuery Mobile 日期框中动态设置最大日期

> ID：14618550
> 
> 赞同：1
> 
> 时间：2013-01-31T04:34:49.920
> 
> 标签：jquery, jquery-mobile, dynamic, options, datebox

我在为 jQuery Mobile Datebox 设置日期时遇到了很多麻烦。我可以通过在 html 标记中设置“max”属性来将结束日期设置为“2013-02-14”

```
<input style="color:black" id="date-picker" min="2013-01-24" max="2013-02-14" name="defcal" type="date" data-role="datebox" value=""  id="defcal" data-options='{"mode": "calbox","calTodayButton": true}'/> 
```

但是，如果我尝试使用选择器以编程方式设置此属性，则它不起作用（刷新日期框似乎没有帮助）。

我通读了下面链接的方法，这看起来非常复杂，我无法实施。任何人都可以提出一种简单的方法来做到这一点。

```
http://dev.jtsage.com/jQM-DateBox2/demos/script/maxdays.html 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:23:59.173

您现在可以（大约 10 分钟前）设置最小/最大属性，然后调用：

```
$('element').datebox('applyMinMax'); 
```

让 datebox 为你做所有的数学运算。我很想让它自动捕捉这个，但我不知道有什么方法可以做到这一点。

# delphi - 在 Delphi2009 中应用主题文件

> ID：14618552
> 
> 赞同：0
> 
> 时间：2013-01-31T04:35:09.090
> 
> 标签：delphi, themes

是否能够将“.theme”文件应用于我用 Delphi2009 编写的应用程序？我打算自定义我的应用程序的外观和感觉，但默认情况下，Delphi2009 应用了 UxTheme.dll 并遵循 Windows 操作系统主题，我需要自定义一些组件的颜色样式，因此，我已经准备好了一个具有正确颜色值的“.theme”文件，但我如何将它应用到应用程序以便它不会影响默认的 Windows 样式？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:32:41.157

.theme 文件包含整个桌面的自定义设置。这对你的目标没有用。Windows 不执行每个应用程序主题。这需要来自应用程序的自定义绘图，或第三方附加组件，如 Window Blinds。

为您的应用程序设置主题的最简单方法是升级到最新的 Delphi 并使用 VCL 样式，这是 XE2 中引入的功能。

# regex - 提取位于匹配模式之后或之间的字符串

> ID：14618556
> 
> 赞同：2
> 
> 时间：2013-01-31T04:35:44.367
> 
> 标签：regex, bash, grep

给定一个字符串“pos:665181533 pts:11360 t:11.360000 crop=720:568:0:4 some more words”

是否可以使用 bash 和 grep 在“crop=”和以下空格之间提取字符串？

因此，如果我匹配“crop=”，我如何在它之后和以下空白之前提取任何内容？

基本上，我需要打印“720:568:0:4”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T04:53:41.633

我会这样做：

```
grep -o -E 'crop=[^ ]+' | sed 's/crop=//' 
```

它使用`sed`which 也是一个标准命令。当然，您可以将其替换为另一个 grep 序列，但前提是确实需要它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T04:57:10.513

我会使用`sed`如下：

```
echo "pos:665181533 pts:11360 t:11.360000 crop=720:568:0:4 some more words" | sed 's/.*crop=\([0-9.:]*\)\(.*\)/\1/' 
```

解释：

```
s/          : substitute
.*crop=     : everything up to and including "crop="
\([0-9.:]\) : match only numbers and '.' and ':' - I call this the backslash-bracketed expression
\(.*\)      : match 'everything else' (probably not needed)
/\1/        : and replace with the first backslash-bracketed expression you found 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:53:52.210

我认为这会起作用（需要重新检查我的参考资料）：

```
awk '/crop=([0-9:]*?)/\1/' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-24T09:50:30.560

bash 模式替换的另一种方法

```
PAT="pos:665181533 pts:11360 t:11.360000 crop=720:568:0:4 some more words"
RES=${PAT#*crop=}
echo ${RES%% *} 
```

*   首先删除`crop=`从左到右找到的所有内容（#）
*   然后删除所有从右到左找到的第一个空格（%%）

# php - PHP即使满足条件也无法重定向

> ID：14618560
> 
> 赞同：0
> 
> 时间：2013-01-31T04:35:55.977
> 
> 标签：php, redirect

这是我的代码

```
 <?php
      if (!isset($_SESSION)) { session_start(); }
      if (!isset($_SESSION['username'])) { header("Location: index.php");  }
      ob_start();

      if($_POST) {
        $id = $_POST['book_id'];
        $command = $_POST['command'];
        $sourcePage = $_POST['source'];
      } else if ($_GET){
        $command = $_GET['command'];
        $sourcePage = $_GET['source'];
        $id = $_GET['book_id'];
      } else {
        header("Location: index.php");
      }
      // if command is 2 then show cart content
      if($command == 2) {
        showCart();
      // if command is 1 then add book to cart
      } else if($command  == 1) {
        addToCart($id);
       header("Location: $sourcePage");
      // if command is 0, then remove book from cart
      } else if($command == 0) {
        deleteFromCart($id);
        header("Location: $sourcePage");
      } else if(!isset($command)){
        header("Location: index.php");
      }

  ob_flush();
    ?> 
```

为什么即使我没有登录，我也没有被重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:40:05.393

页面是否可能只是在存在`$_POST`或`$_GET`存在的条件下刷新，落入后面的`header("Location: ...")`命令之一？

如果是这样，您希望通过添加 die(); 来解决问题。

```
if (!isset($_SESSION['username'])) { header("Location: index.php"); die(); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T06:41:51.740

使用 exit() 或 die 函数可能会解决问题。但实际上需要使用这些功能之一的情况非常有限。

我认为您可以通过设置更多条件来增强 if else 条件。但这会增加你的代码行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:57:46.720

根据我的经验，每次通过标头重定向时，都会执行其以下连接的代码。

例如：如果你有一个`else/else if`和一个`if`（它有重定向代码），那么它们也将被执行并且重定向永远不会发生。但是，如果您将条件分解为单个条件，`ifs`则在输入一个条件后，`if`如果存在重定向，则在该标头代码之后没有后续代码，`if`则将发生重定向。

最好使用`die()`/`exit()`全部以避免差异。

# java - 在 Fedora 中，jmyron 不支持

> ID：14618563
> 
> 赞同：2
> 
> 时间：2013-01-31T04:36:18.793
> 
> 标签：java, swing

在 Windows 中，我有一个带有 jymyron 库的 java swing 应用程序，用于使用网络摄像头的 cature 框架。但是 jmyron 库在 Fedora 中不支持。（在 Fedora 中不支持 dll 文件）。那么我可以在我的应用程序中使用什么库。如何安装that.plz 给出建议。实际上我尝试使用 jmf。但我无法正确安装它。因为我在代码中使用的图像采集卡在 linux 平台上不支持。代码就像。

```
package imagepanel;
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TestWebCam extends JFrame {
  private FrameGrabber vision;
  private BufferedImage image;
  private VideoPanel videoPanel = new VideoPanel();
  private JButton jbtCapture = new JButton("Show Video");
  private Timer timer = new Timer();
  public TestWebCam() {
    JPanel jpButton = new JPanel();
    jpButton.setLayout(new FlowLayout());
    jpButton.add(jbtCapture);
    setLayout(new BorderLayout());
    add(videoPanel, BorderLayout.CENTER);
    add(jpButton, BorderLayout.SOUTH);
    setVisible(true);
    jbtCapture.addActionListener(
      new ActionListener() {
        public void actionPerformed(ActionEvent e) {
          timer.schedule(new ImageTimerTask(), 1000, 33);
       }
    }
   );
}

class ImageTimerTask extends TimerTask {
  public void run() {  
    videoPanel.showImage();
 }
}
class VideoPanel extends JPanel {
  public VideoPanel() {
    try {
      vision = new FrameGrabber();
      vision.start();
    } catch (FrameGrabberException fge) {
  }
}

protected void paintComponent(Graphics g) {
  super.paintComponent(g);
  if (image != null)
    g.drawImage(image, 10, 10, 160, 120, null);
  }

  public void showImage() {
    image = vision.getBufferedImage();
    repaint();   
  }
}

  public static void main(String[] args) {
    TestWebCam frame = new TestWebCam();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(190, 210);
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:28:36.333

我不知道这是否会有所帮助，但[v4ljmyron 项目](http://piratestudios.com/v4ljmyron/)声称要实现对 Linux 的 JMyron 支持。最新版本在 github[上](https://github.com/sdetwiler/v4ljmyron)。

您将需要从源代码构建...按照说明进行操作。

# c - 使用 Makefile 链接和编译

> ID：14618572
> 
> 赞同：2
> 
> 时间：2013-01-31T04:37:16.783
> 
> 标签：c, makefile

```
gcc 4.7.2
c89
GNU Make 3.82 
```

我正在尝试使用这个 Makefile 编译这个程序。我目前只有 1 个 src 文件，但我稍后会包含更多文件。

如果它不存在，我正在尝试让 Makefile 创建 bin 目录并将二进制可执行文件放在那里。

```
INC_PATH=-I/home/dev_tools/apr/include/apr-1
LIB_PATH=-L/home/dev_tools/apr/lib
LIBS=-lapr-1
RUNTIME_PATH=/home/dev_tools/apr/lib
CC=gcc
CFLAGS=-Wall -Wextra -g -m32 -D_DEBUG -D_THREAD_SAFE -D_REENTRANT -D_LARGEFILE64_SOURCE -O2 $(INC_PATH)
OBJECTS=timeout.o
EXECUTABLE=bin/to

all:    build $(EXECUTABLE)

$(EXECUTABLE):
    $(CC) -m32 -o $@ -Wl,-rpath,$(RUNTIME_PATH), $(LIB_PATH) $(OBJECTS) $(LIBS)

build:
    @mkdir -p bin

clean:
    rm -rf *~ timeout *.o 
```

我收到此错误：

```
make
gcc -m32 -o bin/to -Wl,-rpath,/home/dev_tools/apr/lib, -L/home/dev_tools/apr/lib timeout.o -lapr-1
gcc: error: timeout.o: No such file or directory
make: *** [bin/to] Error 1 
```

当我删除时，`$(OBJECTS)`我得到以下信息：

```
gcc -m32 -o bin/to -Wl,-rpath,/home/dev_tools/apr/lib, -L/home/dev_tools/apr/lib -lapr-1
/usr/bin/ld: cannot find : No such file or directory
collect2: error: ld returned 1 exit status
make: *** [bin/to] Error 1 
```

不知道我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:44:55.720

您尚未指定如何构建目标 timeout.o。

您需要添加以下代码：

```
timeout.o: timeout.c
            $(CC) $(CFLAGS) -c -o $@ $< 
```

如果您最终需要编译更多源文件，则可以使用如下模式匹配规则：

```
%.o: %.c
        $(CC) $(CFLAGS) -c $< -o $@ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:53:55.217

Makefile 可能有点棘手。因为您想继续向`OBJECT`变量添加更多对象，所以我实际上会添加一个先决条件以`EXECUTABLE`确保您的所有对象都已编译。从那里开始，自动规则推理应该负责其余的工作。

基本上将这一行替换为：

```
$(EXECUTABLE): $(OBJECTS)
        $(CC) -m32 -o $@ -Wl,-rpath,$(RUNTIME_PATH), $(LIB_PATH) $(OBJECTS) $(LIBS) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:47:08.480

它显示错误，因为 make 无法在当前目录中找到 timeout.o 文件。如果您有 timeout.c 文件，则将以下内容添加到您的 makefile

`OBJECTS: timeout.c`

```
 $(CC) -c timeout.c 
```

# php - 显示数据时未定义的变量

> ID：14618581
> 
> 赞同：0
> 
> 时间：2013-01-31T04:37:54.380
> 
> 标签：php, mysqli

这是一个演示[DEMO](http://helios.hud.ac.uk/u0867587/Mobile_app/Text30.php)

在演示中，选择一个评估，提交它，然后当学生和问题下拉菜单出现时，单击另一个提交按钮。您将看到一个未定义的变量出现。我正在尝试做的是从`Assessment`下拉菜单中回显评估名称、数据和时间。但这怎么能做到呢？

下面是相关代码：

```
 function PickSession() 
        {
            //ASSESSMENT DROP DOWN MENU:

            //Get data from database
            $sessionquery = "
                SELECT s.SessionId, SessionName, SessionDate, SessionTime, SessionActive, Complete
                FROM Session s
                INNER JOIN Session_Complete sc ON sc.SessionId = s.SessionId
                WHERE
                (Complete = ?)
                ORDER BY SessionName 
                ";
            $complete = 1;

            global $mysqli;
            $sessionqrystmt=$mysqli->prepare($sessionquery);
            // You only need to call bind_param once
            $sessionqrystmt->bind_param("i",$complete);//it doesn't recognse $userid
            // get result and assign variables (prefix with db)
            $sessionqrystmt->execute(); 
            $sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbSessionDate,$dbSessionTime, $dbSessionActive, $dbComplete);
            $sessionqrystmt->store_result();

            ?>

            <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"> 
                   <p>
                <strong>Asessments:</strong>
                <select name="session" id="sessionsDrop">
                    <option value="">Please Select</option>
                    <?php
                        while ( $sessionqrystmt->fetch() ) {
                            $sv = $dbSessionId;
                            if(isset($_POST["session"]) && $sv == $_POST["session"]) 
                                echo "<option selected='selected' value='$sv'>" . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "</option>" . PHP_EOL;
                            else
                                echo "<option value='$sv'>" . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "</option>" . PHP_EOL;
                        }
                    ?>
                </select>
                </p>
                <input id="sessionSubmit" type="submit" value="Submit Assessments" name="sessionSubmit" />
            </form>
        <?php
        }

    --------------------------------------------------------------------

        function SessionIsSubmitted()
        {
                if(isset($_POST["session"]) && empty($_POST["session"])) // We picked the "Please select" option
                { ?>

                        Please Select an Assessment

                <?php 
                    return false;
                }
            else if(!isset($_POST["session"]))
            {
                return false;
            }
            else // All is ok
            {
                return true;
            }
            return false;

        }

    --------------------------------------------------------------------

        function ShowAssessment()
        {   

        //STUDENT AND QUESTION DROP DOWN MENU GO HERE
        //button - name='answerSubmit' goes here

        }

    --------------------------------------------------------------------

        function StudentAnswersIsSubmitted()
        {

        if(!isset($_POST["answerSubmit"]))
            {
                return false;
            }
            else // All is ok
            {
                return true;
            }
            return false;

        }

    --------------------------------------------------------------------

        function StudentAnswers()
        {

        echo $dbSessionName . " - " . $dbSessionDate . " " . $dbSessionTime;

        }

        ?>

Below is functions structure:

    <?php

            PickSession(); // Show the thing to pick session
            if(SessionIsSubmitted()) // When session is picked
            {
              ShowAssessment(); // Show students and questions information
              if(StudentAnswersIsSubmitted()) // Student Answers button is submitted
                {
                  StudentAnswers();
                }

            }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:51:37.687

您不能通过放置数组变量来打印一个选定的元素`$dbSessionName`。所有评估都存储在此数组中，您希望通过放置数组变量来打印选定的评估。尝试仅打印已选择的数组元素。这样做：

```
<select name="session[]" id="sessionsDrop">
if (isset($_POST['Submit']) == 1) {

    $session_name = $_POST['session'];
        echo $session;
    } 
```

# python - Python：我可以做些什么来减少我的 Python 代码？

> ID：14618584
> 
> 赞同：1
> 
> 时间：2013-01-31T04:38:14.290
> 
> 标签：python

我可以用不同的代码来减少这个 Python 源代码的重要性吗？该程序的重​​点是获取用户总金额并将其添加到运费中。运费由国家（加拿大或美国）和产品价格决定：加拿大 125.00 美元的产品运费为 12.00 美元。

* * *

```
input ('Please press "Enter" to begin') 
```

while True: print('这将计算运费和您的总计。')

```
totalAmount = int(float(input('Enter your total amount: ').replace(',', '').replace('$', '')))
Country = str(input('Type "Canada" for Canada and "USA" for USA: '))

usa = "USA"
canada = "Canada"
lessFifty = totalAmount <= 50
fiftyHundred = totalAmount >= 50.01 and totalAmount <= 100
hundredFifty = totalAmount >= 100.01 and totalAmount <= 150
twoHundred = totalAmount

if Country == "USA":
    if lessFifty:
        print('Your shipping is: $6.00')
        print('Your grand total is: $',totalAmount + 6)
    elif fiftyHundred:
        print('Your shipping is: $8.00')
        print('Your grand total is: $',totalAmount + 8)
    elif hundredFifty:
        print('Your shipping is: $10.00')
        print('Your grand total is: $',totalAmount + 10)
    elif twoHundred:
        print('Your shipping is free!')
        print('Your grand total is: $',totalAmount)

if Country == "Canada":
    if lessFifty:
        print('Your shipping is: $8.00')
        print('Your grand total is: $',totalAmount + 8)
    elif fiftyHundred:
        print('Your shipping is: $10.00')
        print('Your grand total is: $',totalAmount + 10)
    elif hundredFifty:
        print('Your shipping is: $12.00')
        print('Your grand total is: $',totalAmount + 12)
    elif twoHundred:
        print('Your shipping is free!')
        print('Your grand total is: $',totalAmount)

endProgram = input ('Do you want to restart the program?')
if endProgram in ('no', 'No', 'NO', 'false', 'False', 'FALSE'):
    break 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:46:04.937

这是简化代码的核心。它在美国打印 100.00 美元的运费

```
totalAmount = 100

chargeCode = (int(100*(totalAmount+0.001))-1)/5000 #0 -- <=50, 1 -- 50.01-100, etc
if chargeCode > 3: chargeCode = 3

shipping = {}
shipping[("USA", 0)] = 6
shipping[("USA", 1)] = 8
shipping[("USA", 2)] = 10
shipping[("USA", 3)] = 0
shipping[("Canada", 0)] = 8
shipping[("Canada", 1)] = 10
shipping[("Canada", 2)] = 12
shipping[("Canada", 3)] = 0

print shipping[("USA", chargeCode)] 
```

`totalAmount+0.001`用于避免浮点数的乐趣：

```
int(100*(81.85)) == 8184 
```

在我的系统上返回`True`，因为 float point`81.85`比 decimal 少一点`81.85`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:04:39.053

以下是成本计算的基本策略：

```
import math

amount = int(totalAmount)
assert amount >= 0
shipping = { 
  'USA': [6, 8, 10],
  'Canada': [8, 10, 12]
}
try:
    surcharge = shipping[country][amount and (math.ceil(amount / 50.0) - 1)]
except IndexError:
    surcharge = 0
total = amount + surcharge 
```

The key notion here is that the the shipping cost ranges follow a fairly linear progression: [0-50], (50-100], (100-150], (150, inf)

Note that the first group is a little funny, as it includes the lower bound of 0 where the other groups don't include the lower bound (they are an open interval at the bottom). So going forward we'll consider the first group as the following: 0 or (0-50]

We want to transform the amount the user supplies into an index into the shipping cost lists `[6, 8, 10]` and `[8, 10, 12]`. The lists are of length 3, so the indexes are 0, 1 and 2\. Notice that if we divide any number in the range (0, 150] by 50.0 (we add the .0 to 50 so we a get a real number back -- `1 / 50 == 0` but `1 / 50.0 == 0.02` -- for the next step) we get a number in the range (0 and 3].

现在意识到 math.ceil 会将实数四舍五入到*大于*或等于自身的最接近的整数 - 例如。`math.ceil(.001) == 1.0`, `math.ceil(1.5) == 2.0`, `math.ceil(2) == 2.0`. 因此，将 math.ceil 应用于 (0, 3] 范围内的数字，我们将提供 1.0、2.0 或 3.0。将这些数字转换为 int ( `int(2.0) == 2`)，我们得到值 1、2 和 3。从这些值中减去 1，我们得到 0、1、2。瞧！这些数字与我们运输数组中的索引匹配。

你可以用 Python 来表达这种转换：`int(math.ceil(amount / 50.0) - 1)`

We are almost there. We've handled any amount in the range (0, 150]. But what if amount is 0\. `math.ceil(0) == 0.0` and `0.0 - 1 == -1.0` This will not index properly into our array. So we handle 0 separately by checking first if amount is equal to 0, and if it is, using 0 as our shipping array index instead of the applying our transformation to amount to determine the index. This can be accomplished using Python's short circuit `and` operator (the web should have plenty of information on this) in the following expression: `amount and int(math.ceil(amount / 50.0) - 1)`

Note that any value above 150 will reduce to an index greater than 2 and applying that index against the shipping array will result in an IndexError. But any value greater than 150 has free shipping so we can catch the IndexError and apply a surcharge of 0:

```
try:
    surcharge = shipping[country][amount and int(math.ceil(amount / 50.0) - 1)]
except IndexError:
    surcharge = 0 
```

And we're done!

# ruby-on-rails - 在 Mac OSX 10.8.2 上安装 gem install bcrypt-ruby -v '3.0.1' 时出现问题

> ID：14618588
> 
> 赞同：1
> 
> 时间：2013-01-31T04:38:31.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rvm, bundler

尝试对 Web 应用程序进行故障排除，为此我正在执行[http://wiki.dreamhost.com/Rails_3](http://wiki.dreamhost.com/Rails_3)中的步骤。我一直试图让控制台运行。它要求我捆绑，然后当我收到 bcrypt-ruby -v '3.0.1' 错误时。这是我尝试使用 gem install 时遇到的错误：

```
gem install bcrypt-ruby -v '3.0.1'
Building native extensions.  This could take a while...
ERROR:  Error installing bcrypt-ruby:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
creating Makefile

make
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c bcrypt_ext.c
xcrun: Error: failed to exec real xcrun. (No such file or directory)
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c crypt.c
xcrun: Error: failed to exec real xcrun. (No such file or directory)
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c crypt_blowfish.c
xcrun: Error: failed to exec real xcrun. (No such file or directory)
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c crypt_gensalt.c
xcrun: Error: failed to exec real xcrun. (No such file or directory)
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c wrapper.c
xcrun: Error: failed to exec real xcrun. (No such file or directory)
cc -arch i386 -arch x86_64 -pipe -bundle -undefined dynamic_lookup -o bcrypt_ext.bundle bcrypt_ext.o crypt.o crypt_blowfish.o crypt_gensalt.o wrapper.o -L. -L/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib -L. -arch i386 -arch x86_64     -lruby  -lpthread -ldl -lobjc  
clang: error: no such file or directory: 'bcrypt_ext.o'
clang: error: no such file or directory: 'crypt.o'
clang: error: no such file or directory: 'crypt_blowfish.o'
clang: error: no such file or directory: 'crypt_gensalt.o'
clang: error: no such file or directory: 'wrapper.o'
make: *** [bcrypt_ext.bundle] Error 1

Gem files will remain installed in /Users/karrde00/.gems/gems/bcrypt-ruby-3.0.1 for inspection.
Results logged to /Users/karrde00/.gems/gems/bcrypt-ruby-3.0.1/ext/mri/gem_make.out 
```

# ios - iPhone 5 上的布局搞砸了

> ID：14618591
> 
> 赞同：0
> 
> 时间：2013-01-31T04:38:45.723
> 
> 标签：ios, xcode, layout, autolayout, mainwindow

我使用 MainWindow.xib 来布局我的应用程序。我将视图控制器上的所有内容都设置为 iPhone 3.5 视网膜的模拟指标。iPhone 5 Default 没有设置图像，但它仍然尝试在 iPhone 5 上全屏运行应用程序，导致屏幕完全乱码。关于解决这个问题的任何想法？

这是在 3.5 英寸屏幕上：

![在此处输入图像描述](../Images/f454a814eb440d2749a606a541cb3a69.png)

这是在 4" 屏幕上：

![在此处输入图像描述](../Images/667eec6ef8f406390f0ec920375ab7fc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:18:15.220

您需要将标签和字段上的约束连接到视图的顶部，而不是底部。默认情况下，IB 将事物固定到最近的边缘。使用固定菜单来实现这一点，然后删除将它们连接到底部的约束。

或者，您可以切换到 IB 中的 4" 布局并在那里进行设置。

我在[这里](http://commandshift.co.uk/blog/2013/01/18/autolayout-in-interface-builder/)写了关于在界面生成器中编辑约束的文章，希望对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:41:18.220

至于全屏模式，我想 Xcode 会为你放 -568.png 图像，你可能想检查一下？

至于固定布局，您似乎只需要在所有文本字段上固定顶部支柱，因此顶部位置始终相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:47:00.697

将 UITextField autoresizingMask 设置为 UIViewAutoresizingFlexibleBottomMargin

```
recipientLabel.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin;
nameLabel.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin;
... 
```

# python - python寻找特定的字符串模式

> ID：14618593
> 
> 赞同：0
> 
> 时间：2013-01-31T04:38:51.473
> 
> 标签：python

我想在python中解析一个关闭格式的字符串

“JXE 2000 This is a bug to fix blah” 或格式

“JXE-2000: This is a bug to fix blah” 并检查字符串是否包含 JXE 和数字。

在上面的例子中，我需要检查字符串是否有 JXE 和 2000。我是 python 新手。

我尝试了以下方法：

```
textpattern="JXE-5000: This is bug "
text=re.compile("^([A-Z][0-9]+)*$")

text=re.search("JXE (.*)", textpattern)

print (text.groups()) 
```

我似乎只得到“5000 这是一个错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:58:02.553

作为另一种选择，您可以允许 JXE 和 2000 之间的任何字符：

```
>>> text=re.compile("(JXE).*(2000(.*))")
>>> textpattern="JXE-2000: This is bug "
>>> text.search(textpattern).group(1,2) # or .group(1,2,3) if you want the bug as well
('JXE', '2000') 
```

您`text=re.compile("^([A-Z][0-9]+)*$")`将搜索任何（ascii）大写字母后跟任何数字或数字的组，该组出现零次或多次。re.compile 用于编译你所追求的模式，这样你以后就不需要在脚本中指出它，这样你的代码会更快。如果您选择使用 re.compile（并且您实际上不需要在这里），您需要指出您正在寻找的模式（在这种情况下，'JXE' 后跟 '2000'）。如果您使用 re.compile，您将以这种格式搜索此模式：`compiled_pattern.search(string)`，对您来说是`text.search(textpattern)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:10:23.557

取决于您要捕获的内容：

```
>>> s
['JXE 2000 This is a bug to fix blah',
 'JXE-2000: This is a bug to fix blah',
 'JXE-2000 Blah']
>>> re.search(r'JXE[-|\s+]\d+(.+)',s[0]).groups()
(' This is a bug to fix blah',)
>>> re.search(r'JXE[-|\s+]\d+(.+)',s[1]).groups()
(': This is a bug to fix blah',)
>>> re.search(r'JXE[-|\s+]\d+(.+)',s[2]).groups()
(' Blah',) 
```

这是此模式匹配的内容：

*   `JXE`- 字符`J`，后跟`X`，然后是`E`
*   `[-|\s+]`- 一个破折号`-`或一个或多个空格
*   `\d+`- 一个或多个数字
*   `(.+)`- 一个或多个任意字符（换行符除外）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:55:08.950

您可以将 '-' 或 ' ' 与 匹配`[- ]`：

```
>>> match = re.search("JXE[- ]2000[: ]+ (.*)", "JXE-2000: This is bug ")
>>> if match is not None:
    message = match.groups()[0]

>>> print message
This is bug 
```

# sql-server - TSQL 插入缺失的日期和增量

> ID：14618597
> 
> 赞同：0
> 
> 时间：2013-01-31T04:38:59.547
> 
> 标签：sql-server, tsql, sql-server-2008-r2

在 SQL Server 2008 R2 中，我有一个表 (StatDays)，其中包含订单处于特定状态的天数 (DaysInStatus)。订单保持该状态的每一天都有一个条目，但周日没有写入此表的进程除外。在这种情况下，订单将在星期一再次出现，DaysInStatus 提前两天。

我的问题是如何填充缺少的星期日值。（我假设如果订单有星期六条目但没有星期一条目，则星期六是最后一个所需的数据点。）

例子：

```
OrderID StatDate DaysInStatus
A11111 2012 年 6 月 1 日 20
A11111 2012 年 6 月 2 日 21
A11111 2012 年 6 月 4 日 23
A11111 2012 年 6 月 5 日 24
A11111 2012 年 6 月 6 日 25
A11111 2012 年 6 月 7 日 26
A11111 2012 年 6 月 8 日 27
A11111 2012 年 6 月 9 日 28
A11111 2012 年 6 月 11 日 30

```

在这里，我想将所有这些值以及缺失的日期 6/3 和 6/10（其中 DaysInStatus 分别提前到 22 和 29）以及 OrderID 插入（或选择）到另一个表中。

此外，在 DaysInStatus = 1 时，OrderID 不会总是出现在此表中。 In 几乎可以出现在任何值处，并且几乎可以在任何值处退出。

我尝试生成一个日期表，然后在 statDate 和 StatDate+1、StatDate-1 上对 StatDays 进行左外连接。这适用于小型记录集，但实际表有超过 1 亿条记录，所以这对我不起作用。

在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:15:46.650

这是你的声明

```
INSERT Status
SELECT s1.OrderID
      ,DATEADD(day,1,s1.StatDate)
      ,s1.DaysInStatus+1
FROM Status s1
     INNER JOIN
     Status s2 ON DATEADD(day,2,s1.StatDate)=s2.StatDate
                  AND
                  s1.DaysInStatus+2=s2.DaysInStatus
     LEFT JOIN
     Status s3 ON DATEADD(day,1,s1.StatDate)=s3.StatDate
                  AND
                  s1.DaysInStatus+1=s3.DaysInStatus
WHERE DATENAME(dw,s1.StatDate)='Saturday'
      AND
      s3.OrderID IS NULL 
```

[你可以在这里](http://sqlfiddle.com/#!3/2620e/3)看到一个 SQLFiddle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:38:15.507

试试这个。这将有助于任何失踪的日子。

```
create table StatDays(OrderID varchar(20),StatDate datetime,
                      DaysInStatus int)   

insert into statdays values('A11111',  '6/1/2012',    20)
insert into statdays values('A11111',  '6/2/2012',    21)
insert into statdays values('A11111',  '6/4/2012',    23)
insert into statdays values('A11111',  '6/5/2012',    24)
insert into statdays values('A11111',  '6/6/2012',    25)
insert into statdays values('A11111',  '6/7/2012',    26)
insert into statdays values('A11111',  '6/8/2012',    27)
insert into statdays values('A11111',  '6/9/2012',    28)
insert into statdays values('A11111',  '6/11/2012',   30)
insert into statdays values('A11112',  '6/1/2012',    20)
insert into statdays values('A11112',  '6/2/2012',    21)
insert into statdays values('A11112',  '6/4/2012',    23)
insert into statdays values('A11113',  '6/5/2012',    24)
insert into statdays values('A11113',  '6/6/2012',    25)
insert into statdays values('A11113',  '6/7/2012',    26)
insert into statdays values('A11113',  '6/8/2012',    27)
insert into statdays values('A11113',  '6/9/2012',    28)
insert into statdays values('A11113',  '6/13/2012',   32)

with 
demo_cte as 
(select orderid, min(statdate) Min_Date,max(statdate) Max_Date,
 min(DaysInStatus) Min_Day from StatDays group by orderid

 union all

 select orderid,DateAdd(day,1,Min_Date), Max_date,Min_day+1 from demo_cte
 where DateAdd(day,1,Min_Date)<=Max_date

)
select OrderId,Min_Date Stat_days,Min_Day  from demo_cte
order by orderid 
```

[SQL小提琴](http://sqlfiddle.com/#!3/361e7/1)

# javascript - JWPlayer 只在 IE 8 中加载买不玩

> ID：14618600
> 
> 赞同：1
> 
> 时间：2013-01-31T04:39:12.777
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8, jwplayer

```
 jwplayer("mediaplayer").setup({
        provider: 'http',
        file: encodeURI(JWplayer_top_video_path),
        image: "http://vod.hkheadline.com/hkheadline/instant_video/2013/0103/6beae821acd0eaf1d59e0daa974f5836.jpg",

        //Player for IE,FF,Chrome
        flashplayer: "./js/jwplayer/player.swf",
        //Skin for IE,FF
        skin: "./js/jwplayer/skin/glow.zip",
        wmode: "opaque",
        width: 650,
        height: 390,
        stretching: "uniform",
        autostart: "false",
        autopreloading: "true",
        dock: "true",
        bufferlength: 10,

        plugins: {
        //  fbit: {enable: true},
        //  tweetit: {enable: true},
            "gapro-2":{ 
                "trackstarts": true,
                "trackpercentage": true,
                "trackseconds": true,
                "tracktime": true
                }
        },

        modes: [
            { type: "html5",
                //Skin for Chrome
                config: {skin: "./js/jwplayer/skin/glow/glow.xml"}
            },
            { type: "flash", src: "./js/jwplayer/player.swf" }
        ],

        'events': {
            onComplete: function(e){
                $('#mediaplayer').remove();
                close_overlay();
            }
        }
      }); 
```

上面的代码是设置jwplayer。它在 chrome、fx、safari 上完美运行，但在 IE8 中却不行。在 Ie 8 中显示播放器，我可以单击播放按钮，但是，它一直在加载和加载但从不播放电影，如何解决问题？谢谢

# vb.net - 为什么我的实体框架迁移种子在更新数据库上运行但没有放入任何数据？

> ID：14618603
> 
> 赞同：0
> 
> 时间：2013-01-31T04:39:24.540
> 
> 标签：vb.net, entity-framework, ef-code-first, entity-framework-migrations

当我运行 update-datebase 时，我得到以下响应：

> PM>更新数据库-详细
> 
> 使用启动项目“BestOrders”。
> 
> 使用 NuGet 项目“BestOrders”。
> 
> 指定“-Verbose”标志以查看应用于目标数据库的 SQL 语句。
> 
> 目标数据库是：'Orders.sdf'（数据源：Orders.sdf，提供者：System.Data.SqlServerCe.4.0，来源：配置）。
> 
> 没有挂起的基于代码的迁移。
> 
> 运行种子方法。
> 
> 下午>

现在种子方法（下面给出了完整的代码）可以清楚地运行，因为它需要相当长的时间，但数据库中没有数据。我错过了什么？

```
Imports System
Imports System.Data.Entity
Imports System.Data.Entity.Migrations
Imports System.Linq

Namespace Migrations

    Friend NotInheritable Class Configuration 
        Inherits DbMigrationsConfiguration(Of OrdersContext)

        Public Sub New()
            AutomaticMigrationsEnabled = True
        End Sub

        Protected Overrides Sub Seed(context As OrdersContext)
            Const ItemCount As Integer = 100
            Const SupplierCount As Integer = 5
            Const PartsRequestCount As Integer = 25
            Const LocationsCount As Integer = 3
            Const MaxQuantity As Integer = 5
            Const Seed As Integer = 10
            Const DeliveryChance As Decimal = 0.5
            Dim Delivery() As Integer = {10, 90}
            Dim DiscChance(,) As Decimal = {{0.05, 0.07, 0.08},
                                           {0.025, 0.035, 0.05}}
            Dim PriceRange() As Decimal = {50, 5000} 'In cents!
            Dim Variance As Decimal = 10 'In percent
            Dim MultiSupplierChance = 0.66

            Dim rnd = New Random(Seed)

            For i = 1 To SupplierCount
                Dim sup = New Supplier With {.ID = i,
                                             .Name = String.Format("Supplier{0:D3}", i),
                                             .Delivery = IIf(rnd.NextDouble <= DeliveryChance,
                                                             rnd.Next(Delivery(0) / 10, Delivery(1) / 10) * 10,
                                                             0),
                                             .Discount = 0}

                Dim r = rnd.NextDouble
                For k = DiscChance.GetLowerBound(1) To DiscChance.GetUpperBound(1)
                    If r <= DiscChance(0, k) Then
                        sup.Discount = DiscChance(1, k)
                        Exit For
                    End If
                Next

                context.Suppliers.AddOrUpdate(sup)
            Next

            Dim j As Integer = 1
            For i = 1 To ItemCount
                Dim itm = New Item With {.ID = i,
                                         .Number = String.Format("Item{0:D4}", i),
                                         .SupplierItems = New List(Of SupplierItem)}
                Debug.Print("{0}: {1}", itm.ID, itm.Number)
                context.Items.AddOrUpdate(itm)
                Dim FirstSup = New SupplierItem With {.ID = j,
                                                      .Supplier = context.Suppliers.Find(rnd.Next(1, SupplierCount)),
                                                      .Price = rnd.Next(PriceRange(0), PriceRange(1)) * 100}

                j += 1
                itm.SupplierItems.Add(FirstSup)
                While rnd.NextDouble <= MultiSupplierChance And itm.SupplierItems.Count < SupplierCount
                    Dim NextSup = New SupplierItem With {.ID = j,
                                                         .Supplier = context.Suppliers.Find(rnd.Next(1, SupplierCount)),
                                                         .Price = FirstSup.Price + rnd.Next(-Variance, Variance) * 100}
                    If itm.SupplierItems.First(Function(s) s.Supplier.ID = NextSup.Supplier.ID) Is Nothing Then
                        j += 1
                        itm.SupplierItems.Add(NextSup)
                    End If
                End While

            Next

            For i = 1 To LocationsCount
                Dim loc = New Location With {.ID = i,
                                             .Name = String.Format("Location{0:D2}", i)}
                context.Locations.AddOrUpdate(loc)
            Next

            For i = 1 To PartsRequestCount
                Dim pr = New PartsRequest With {.ID = i,
                                                .Item = context.Items.Find(rnd.Next(1, ItemCount)),
                                                .Location = context.Locations.Find(rnd.Next(1, LocationsCount)),
                                                .Quantity = rnd.Next(1, MaxQuantity),
                                                .RequestTime = Now().AddMinutes(-rnd.Next(0, 10080))}
                context.PartsRequests.AddOrUpdate(pr)
            Next

            MyBase.Seed(context)
        End Sub

    End Class

End Namespace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:57:07.003

我解决了这个问题。我忘记保存修改后的上下文。

# java - 在 Android 中将月份 +1 添加到日历月份中的日历问题

> ID：14618608
> 
> 赞同：34
> 
> 时间：2013-01-31T04:40:13.000
> 
> 标签：java, android, date

我正在使用以下代码

```
Calendar cal = Calendar.getInstance();
System.out.println("Before "+cal.getTime());
cal.set(Calendar.MONTH, 01);
System.out.println("After "+cal.getTime()); 
```

输出是

```
Before Thu Jan 31 10:07:34 IST 2013
After Sun Mar 03 10:07:34 IST 2013 
```

添加`+1`到**jan**是给**mar**月。如果我们在当前日期加上 30 天，它可能会返回正确的输出。但我想展示**二月**。任何人都可以帮助我吗..

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-31T04:46:08.587

您可以看到 +1 设置字段正在添加与您的日期不同的 30 天日期（从您的输出中观察到。）

如果您想要几个月，请使用代码

```
Calendar cal = Calendar.getInstance();
System.out.println("Before "+cal.getTime());  //Before Thu Jan 31 10:16:23 IST 2013

cal.add(Calendar.MONTH, 1);
System.out.println("After "+cal.getTime()); //After Thu Feb 28 10:16:23 IST 2013 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T04:46:28.077

你必须使用`add()`like，

```
cal.add(Calendar.MONTH, 1); 
```

输出 ->

```
Before Thu Jan 31 10:15:04 IST 2013
After Thu Feb 28 10:15:04 IST 2013 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-24T01:04:48.157

这种日期时间工作更容易使用：

*   [**Joda-Time**](http://www.joda.org/joda-time/) 2.3 库
    *   与 Java 捆绑在一起的 java.util.Date 和 .Calendar 类的流行替代品
    *   开源
    *   免费的
    *   积极维护（截至 2014-02）
*   [**java.time**包](http://download.java.net/jdk8/docs/api/java/time/package-summary.html)
    *   [Java 8](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8)中的新功能
    *   受 Joda-Time 启发，但经过重新设计
    *   由[JSR 310定义](https://jcp.org/en/jsr/detail?id=310)
    *   提供[教程](http://docs.oracle.com/javase/tutorial/datetime/)

# 示例代码

```
DateTimeZone timeZone = DateTimeZone.forID( "Europe/Paris" ); // Or, DateTimeZone.UTC
DateTime dateTime = new DateTime( timeZone );
DateTime monthAgo = dateTime.plusMonths( -1 ); // Smartly handles various month lengths, leap year, and so on.
DateTime monthLater = dateTime.plusMonths( 1 ); 
```

转储到控制台...</p>

```
System.out.println( "dateTime: " + dateTime );
System.out.println( "monthAgo: " + monthAgo );
System.out.println( "monthAgo start of day: " + monthAgo.withTimeAtStartOfDay() );
System.out.println( "monthLater: " + monthLater ); 
```

运行时……</p>

```
dateTime: 2014-02-24T01:53:22.386+01:00
monthAgo: 2014-01-24T01:53:22.386+01:00
monthAgo start of day: 2014-01-24T00:00:00.000+01:00
monthLater: 2014-03-24T01:53:22.386+01:00 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T04:42:14.600

```
cal.set(Calendar.MONTH, cal.get( Calendar.MONTH ) + 1 ); 
```

无论如何它显示的原因`Mar 3`是因为它显然增加了 30 天，这是`Feb 31st`不存在的，所以它转到`Mar 3`.

如果你想要下个月的最后一天，你会做这样的事情：

```
int month = cal.get( Calendar.MONTH );
cal.set(Calendar.MONTH, cal.get(Calendar.MONTH) + 1);
if( cal.get( month ) > month + 1 ) {
    cal.set( Calendar.MONTH, month + 1 );
    cal.set( Calendar.DAY, /* here comes your day amount finding algorithm */ );
} 
```

# objective-c - 在一个阶段中有多个目标时创建条件

> ID：14618611
> 
> 赞同：0
> 
> 时间：2013-01-31T04:40:20.873
> 
> 标签：objective-c, cocos2d-iphone

我正在尝试使用 cocos2d 开发具有多个阶段的游戏。例如，在一个关卡中，我有 4 个精灵，2 个白色和 2 个黑色。如果玩家击中黑色精灵，则游戏结束，如果他击中白色精灵，则他获胜。如何实现一个条件，如果玩家击中白色精灵，它会检查场景中是否存在其他白色精灵，如果有，则游戏继续。如果没有，那他就去舞台清场了？我尝试将精灵放在两个不同的数组（arrayBlack 和 arrayWhite）中，但我不知道如何为白色精灵创造条件。任何人都可以给我一个想法或建议或一个教程来展示一个很好的例子吗？

更新：我自己想通了。这是我的代码：

```
-(id) init
{
if( (self=[super init]) ) {
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    self.isTouchEnabled = YES;

    //These are declared in the .h class
    blackArray = [[NSMutableArray alloc]init];
    whiteArray = [[NSMutableArray alloc]init];

    black1 = [CCSprite spriteWithFile:@"b1.png"];
    black1.position = ccp(100, 160);

    black2 = [CCSprite spriteWithFile:@"b2.png"];
    black2.position = ccp(105, 150);

    white = [CCSprite spriteWithFile:@"w1.png"];
    white.position = ccp(150, 150);

    white2 = [CCSprite spriteWithFile:@"w2.png"];
    white2.position = ccp(80, 160);

    [self addChild:black1 z:1 tag:1];
    [self addChild:black2 z:1 tag:2];
    [self addChild:white z:1 tag:3];
    [self addChild:white2 z:1 tag:4];

    [blackArray addObject:black1];
    [blackArray addObject:black2];
    [whiteArray addObject:white];
    [whiteArray addObject:white2];
}
return self;}

-(void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
NSSet *allTouch = [event allTouches];
UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector]convertToGL:location];

endTouch = location;
posX = endTouch.x;

//Minimum swipe length
posY = ccpDistance(beginTouch, endTouch);

//selectedSprite is a sprite declared in .h file
if(selectedSprite.tag == 1 || selectedSprite.tag == 2)
{
    //action here
}

if([whiteArray count] > 0)
{
    if(selectedSprite.tag == 3 || selectedSprite.tag == 4)
    {
        //action here
    }
    [whiteArray removeObject:selectedSprite];

    if([whiteArray count] == 0)
    {
        //Go to game over
    }
}} 
```

这看起来不漂亮，但它有效。无论如何，如果有比我目前做的更好的方法来实现它，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:04:54.140

使您的数组（arrayBlack 和 arrayWhite）可变。然后，

```
if(user hit sprite1)
{
   if([arrayBlack containsObject:sprite1])
   {
     [arrayBlack removeObject:sprite1];
     // Game over
   }
   else
   {
     [arrayWhite removeObject:sprite1];

     if(arrayWhite.count>0)
     {
       // Continue game
     }
     else
     {
       // Stage clear scene
     }
   }
} 
```

# iphone - 上传数据时如何在iphone应用程序中显示活动指示器

> ID：14618612
> 
> 赞同：-1
> 
> 时间：2013-01-31T04:40:31.790
> 
> 标签：iphone, ipad, uiactivityindicatorview

我正在将数据上传到服务器，我希望当我单击上传按钮时，活动指示器应该在数据上传后启动和停止。

这就是我上传数据但活动指示器不起作用的方式。

```
 -(IBAction)startSyncButtonAction{

        [self startActivity];   
    CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

   for (int i=0; i<[appDelegate.coffeeArray count]; i++) {

   Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:i];

    int mycount=[appDelegate.coffeeArray count];
    NSLog(@"My Array count is %d",mycount);

    NSString*device_Id=coffeeObj.device_Id;
    NSString*R1=coffeeObj.R1;
    NSString*R2=coffeeObj.R2;
    NSString*R3=coffeeObj.R3;
    NSString*R4=coffeeObj.R4;
    NSString*R5=coffeeObj.R5;
    NSString*R6=coffeeObj.R6;
    NSString*R7=coffeeObj.R7;
    NSString*R8=coffeeObj.R8;
        NSString*R9=coffeeObj.R9;
    NSString*R10=coffeeObj.R10;
    NSString*R11=coffeeObj.R11;
    NSString*R12=coffeeObj.R12;
    NSString*R13=coffeeObj.R13;
    NSString*R14=coffeeObj.R14;     

        NSString*update_date_time=coffeeObj.update_date_time;

         NSString*teritory1=coffeeObj.teritory;

         int mycount1=[appDelegate.coffeeArray count];

         NSLog(@"My Array After delete is %d",mycount1);
            NSLog(@"device_Id%@",device_Id);
    NSLog(@"R1%@",R1);
    NSLog(@"R2%@",R2);
    NSLog(@"R3%@",R3);
    NSLog(@"R4%@",R4);
    NSLog(@"R4%@",R5);
    NSLog(@"R4%@",R6);
    NSLog(@"R4%@",R7);
    NSLog(@"R4%@",R8);
    NSLog(@"R4%@",R9);
    NSLog(@"R4%@",R10);
    NSLog(@"R4%@",R11);
    NSLog(@"R4%@",R12);
    NSLog(@"R4%@",R13);
    NSLog(@"R4%@",R14);

     NSLog(@"update_date_time%@",update_date_time);

    NSString *post =[[NSString alloc] initWithFormat:@"device_Id=%@&R1=%@&R2=%@&R3=%@&R4=%@&R5=%@&R6=%@&R7=%@&R8=%@&R9=%@&R10=%@&R11=%@&R12=%@&R13=%@&R14=%@&update_date_time=%@&teritory1=%@",device_Id,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,update_date_time,teritory1];

      NSLog(post);
      NSURL *url=[NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/pfizersurvey/SyncSurveySTD.php"];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];
    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",data);

       }

        for (int i=0; i<[appDelegate.coffeeArray count]; i++) {

    Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:i];

     [appDelegate removeCoffee:coffeeObj];

    }

    }

     -(void)startActivity:(id)sender
  {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    activityImageView.hidden=NO;
    activityView.hidden=NO;

    [activityView startAnimating];

     [pool release];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:42:31.010

试试下面的代码，但我给出的例子你应该修改它并根据你的需要使用：

```
 alert= [[UIAlertView alloc] initWithTitle:@"Loading\nPlease Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil];
                [alert show];

                UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

                indicator.center = CGPointMake(150, 100);
                [indicator startAnimating];
                [alert addSubview:indicator]; 
```

使用此行关闭指示器：

```
[alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

尝试。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:49:43.833

为了获得更好的用户体验，我建议您使用[`UIProgressHUD`](http://iphonedevwiki.net/index.php/UIProgressHUD)

```
UIProgressHUD* hud = [[UIProgressHUD alloc] initWithFrame:CGRectZero];
[hud setText:@"Loading, please wait."];
[hud showInView:someView];
... 
[hud done];
...
[hud hide];
...
[hud release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:45:47.500

你 100% 确定 activityView 不是 nil 吗？我没有看到你将它设置为任何东西的任何地方。此外，即使它不是 nil，你有没有将它添加到视图中？activityView 只是一个普通的 UIView，它不会自动出现在 UIWindows 中。

# mongodb - 运行phpunit测试时出现Mongodb错误

> ID：14618616
> 
> 赞同：0
> 
> 时间：2013-01-31T04:41:05.097
> 
> 标签：mongodb, phpunit

我尝试使用 phpunit 运行 mongdodb 的驱动程序测试，如[http://www.php.net/manual/en/mongo.testing.php](http://www.php.net/manual/en/mongo.testing.php)所述，但 MongoInt32Test.php 文件似乎有问题。

```
# phpunit tests/mongosuite.php

Warning: require_once(MongoInt32Test.php): failed to open stream: No such file or directory in C:\Documents and Settings\owner\Desktop\mongo-php-driver\tests\MongoSuite.php on line 4

Fatal error: require_once(): Failed opening required 'MongoInt32Test.php' (include_path='.;\programming_tools\xampp-portable\php\PEAR') in C:\Documents and Settings\owner\Desktop\mongo-php-driver\tests\MongoSuite.php on line 4 
```

我正在使用 php_mongo-1.3.1-5.4-vc9.dll 并在 windows xp 中运行 mongodb 2.0.8。有人知道如何解决这个问题吗？我在任何地方都找不到 MongoInt32Test.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:49:48.733

扩展中的 PHPUnit 测试是遗留测试，不再受支持。我创建了一张票，[PHP-695](https://jira.mongodb.org/browse/PHP-695)，提醒我们从文档中删除它们的提及。所有扩展测试都是 phpt 文件，执行它们的说明记录在[GitHub 存储库](https://github.com/mongodb/mongo-php-driver)中。

# wpf - 将带有 Caliburn Micro 和 MEF 的 MVVM WPF 解决方案集成到带有代码隐藏和页面导航的旧 WPF 应用程序中

> ID：14618617
> 
> 赞同：1
> 
> 时间：2013-01-31T04:41:07.320
> 
> 标签：wpf, caliburn.micro

去年我使用页面导航构建了一个 WPF 应用程序，没有使用 MVVM。最近，我被要求为我在 WPF MVVM 中使用 Caliburn Micro 和 MEF 所做的同一客户构建一个新应用程序。现在我的客户要求我将新应用程序集成到旧应用程序中。

我的想法是在旧应用程序中添加一个新页面，并将新应用程序的外壳集成`ContentControl`到此页面的 a 中。

我现在的问题是旧应用程序是由

`<StartupUri="Views\NavWindow.xaml">`

app.xaml 中的条目，而新应用程序由引导程序启动，例如

`<local:AppBootstrapper x:Key="bootstrapper" />`

AppBootstrapper 的样子

```
class AppBootstrapper : Bootstrapper<ShellViewModel>
{
    private CompositionContainer container;

    protected override void Configure()
    {
        container = new CompositionContainer(new AggregateCatalog(AssemblySource.Instance.Select(x => new AssemblyCatalog(x)).OfType<ComposablePartCatalog>()));

        CompositionBatch batch = new CompositionBatch();

        batch.AddExportedValue<IWindowManager>(new WindowManager());
        batch.AddExportedValue<IEventAggregator>(new EventAggregator());
        batch.AddExportedValue(container);

        container.Compose(batch);
    }

    protected override object GetInstance(Type serviceType, string key)
    {
        string contract = string.IsNullOrEmpty(key) ? AttributedModelServices.GetContractName(serviceType) : key;
        var exports = container.GetExportedValues<object>(contract);

        if (exports.Count() > 0)
        {
            return exports.First();
        }

        throw new Exception(string.Format("Could not locate any instances of contract {0}.", contract));
    }

} 
```

`ShellViewModel`因此，据我了解，对于新应用程序，引导程序会初始化整个应用程序，调用`ShellView`.

因为我`EventAggregator`在新应用程序中使用 将消息从一个视图模型发送到另一个视图模型，所以我认为我不能仅仅摆脱引导程序并使用 Caliburn Micro 的视图优先模型。

所以我的问题是：我可以自己从旧应用程序中调用引导程序吗？如果可以，我应该将它的实例存储在哪里，以及如何告诉 Caliburn Micro 将`ShellView`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:48:11.200

CM 是如此之轻，以至于在这些情况下，实际上值得一看源代码以了解特定类实际上在做什么。

之所以`Bootstrapper`有效，是因为在应用程序的资源文件中声明它会强制对其进行实例化。构造函数调用`Start`实例并设置聚合器、IOC 等。

[https://caliburnmicro.codeplex.com/SourceControl/changeset/view/4de6f2a26b21#src/Caliburn.Micro.Silverlight/Bootstrapper.cs](https://caliburnmicro.codeplex.com/SourceControl/changeset/view/4de6f2a26b21#src/Caliburn.Micro.Silverlight/Bootstrapper.cs)

如果您要将应用程序加载到`ContentControl`另一个应用程序中，我看不出它不会启动 CM 的原因，因为加载的应用程序的资源仍将被处理、实例化和启动`Bootstrapper`等。你试过了吗它在一个测试项目中？这可能是你的第一选择。

There may be some areas where CMs default implementation of `Bootstrapper` might not be ideal, but on first glance I can't see any glaring issues (not sure what happens to the application events such as `OnStartup` etc when you load a sub-application so you might want to look at that). Worst case you can roll your own `Bootstrapper` for the sub-app and just rebuild with the tweaked functionality.

# css - 如何使用滚动背景图像创建全屏固定

> ID：14618619
> 
> 赞同：4
> 
> 时间：2013-01-31T04:41:10.737
> 
> 标签：css, internet-explorer-8, fullscreen, css-position

我以前这样做过，所以我知道这是可能的，但现在它行不通了，而且我的大脑很乱！所以希望，在我将附近的所有 IE 粉碎到一百万位之前，有人可以帮助我解决这个问题。

我想做的是重新创建类似[Ornamento](http://ornamento.com/)网站的东西。当用户在上面滚动时，图片会相互重叠。它们是在单独的 div 中使用分层的固定背景图像完成的。效果如下所示：

这是未滚动的网站：

![装饰展开](../Images/adbec04c5b879c09b297a565254d7674.png)

这是滚动的网站

![装饰滚动](../Images/385f70245873dc042f0bbd1f0f51d163.png)

如您所见，背景图像保持在同一位置，但逐渐被不同 div 中的另一个背景图像覆盖或“接管”。这适用于 Chrome、Firefox、Opera、IE10、IE9、Safari 和 IE8（可能还有其他）。它是通过 CSS3 背景封面和固定的背景定位来完成的。

所以，我试图在我的测试版网站[Striking Foto](http://dejongdesign.ca/striking_foto/)上复制它。除了旧版 IE（8 及以下）之外，我让它在所有方面都可以工作。我正在使用 IE 过滤器来获取完整的背景图像，它看起来不错。

我使用了以下代码（其中有 5 个包含内容的 div，每个都标记为 home、about、gallery、pricing 和 contact：

```
#home, #about, #gallery, #pricing, #contact { 
position: relative; 
display: block; 
height: 100%; 
width: 100%; 
background: url(../assets/style_images/home_background.jpg) no-repeat center center fixed; 
-webkit-background-size: cover; 
-moz-background-size: cover; 
-o-background-size: cover; 
background-size: cover; 
border-bottom: 5px solid #000;
filter:progid:DXImageTransform.Microsoft.AlphaImageLoader (src='assets/style_images/home_background.jpg', sizingMethod='scale'); 
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/home_background.jpg', sizingMethod='scale')";}

#about { background-image: url(../assets/style_images/about_background.jpg);
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/about_background.jpg', sizingMethod='scale'); 
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/about_background.jpg', sizingMethod='scale')";}

#gallery { background-image: url(../assets/style_images/gallery_background.jpg); 
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/gallery_background.jpg', sizingMethod='scale'); 
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/gallery_background.jpg', sizingMethod='scale')";}

#pricing { background-image: url(../assets/style_images/pricing_background.jpg); 
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/pricing_background.jpg', sizingMethod='scale'); 
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/pricing_background.jpg', sizingMethod='scale')";}

#contact { 
background-image: url(../assets/style_images/contact_background.jpg); 
border: none;
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/contact_background.jpg', sizingMethod='scale'); 
 -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/style_images/contact_background.jpg', sizingMethod='scale')"; } 
```

（注意：我相信这个 IE 过滤器仅在使用索引文件中的链接引用图像时才有效，而不是 CSS 文件。我可能错了，但这就是链接不一样的原因。）

我以为这会起作用，但事实并非如此。当我在 IE 中滚动时，我看到了这种情况：

![IE8 无法正确滚动](../Images/f45caa613587a9e0e5ae04e80fcd7d2e.png)

背景图像不是固定的背景定位，而是滚动的。所以我认为是 IE 过滤器，因为他们喜欢把所有东西都分叉。所以我删除了它们并再次尝试。这次我得到了以下图像：

![IE8 无法正确缩放](../Images/20de3d33d714dc20e725ef6ed8f6ccd6.png)

现在图像向右滚动，但背景图像不是全屏。

我的 HTML 看起来像这样（经过编辑使其更小、更易读）。

```
 <!DOCTYPE HTML>
 <html>
 <head>
 <title>Striking Foto</title>
 <!--[if lte IE 8]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
 </head>

 <body>
 <header></header>

 <div id="home">
    <!--nothing except images-->
 </div>
 <div id="about">
    <div class="wrap">
        <article>
        <!--nothing except content-->
        </article>
    </div>
</div>
<div id="gallery">
    <div class="wrap">
        <article>
        <!--content-->
        </article>
    </div>
</div>   
<div id="pricing">
    <div class="wrap">
        <article>
        <!--content-->
        </article>
    </div>
</div>   
<div id="contact">
    <div class="wrap">
        <article>
            <!--content-->
        </article>
    </div>
</div>  
</body>
</html> 
```

所以，我被困住了。Ornamento 在 IE 中以某种方式做到了这一点，我以前也做过，但我不知道怎么做，我真的可以使用一些帮助。如果您愿意，我可以提供所有 CSS，但您也可以在线查看。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:51:15.467

我意识到，装饰品网站上的图像不是全宽的。将浏览器拉得尽可能宽，你会看到 ;-)

最好的选择是使用带有 ie 条件的[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)并且图像不会在 ie 中滚动

或者使图像足够大以至于在ie中看不到边缘，它们在其他尺寸为“封面”的浏览器中仍然看起来不错

希望这可以帮助其他找到这个的人！我花了几个小时

# android - 在android中的gridview中水平滚动

> ID：14618623
> 
> 赞同：0
> 
> 时间：2013-01-31T04:41:28.677
> 
> 标签：android, gridview, horizontalscrollview

我是 Android 应用程序开发人员和 stackoverflow 的新手。我在gridview中水平滚动搜索了很多。我想在网格视图中将图像显示为水平滚动。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:57:57.467

在 xml 文件中试试这个：

```
<HorizontalScrollView 
android="http://schemas.android.com/apk/res/android" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content">

<GridView 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"           
android:id="@+id/gridview" 
android:scrollbars="horizontal"/>
</HorizontalScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:55:42.863

嘿，请检查此链接，它可能对您有帮助。

1) [http://android-er.blogspot.in/2012/07/implement-gallery-like.html](http://android-er.blogspot.in/2012/07/implement-gallery-like.html)

2)[像谷歌目录一样的水平列表视图](https://stackoverflow.com/questions/8420339/horizontal-listview-like-google-catalogs)

3) [Android GridView 绘制分隔线](https://stackoverflow.com/questions/7132030/android-gridview-draw-dividers)

# android - java.lang.RuntimeException：无法启动活动 ComponentInfo 重复

> ID：14618624
> 
> 赞同：0
> 
> 时间：2013-01-31T04:41:45.660
> 
> 标签：android, android-layout, android-intent

**我知道这个问题经常被问到，但这个问题完全不同。日志文件只是多次发布上述异常而没有提及原因。日志文件如下所示**

* * *

```
01-31 09:53:10.305: E/AndroidRuntime(452): FATAL EXCEPTION: main
01-31 09:53:10.305: E/AndroidRuntime(452): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: android.view.InflateException: Binary XML file line #37: Error inflating class <unknown>
01-31 09:53:10.305: E/AndroidRuntime(452):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-31 09:53:10.305: E/AndroidRuntime(452):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-31 09:53:10.305: E/AndroidRuntime(452):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-31 09:53:10.305: E/AndroidRuntime(452):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-31 09:53:10.305: E/AndroidRuntime(452):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 09:53:10.305: E/AndroidRuntime(452):  at android.os.Looper.loop(Looper.java:123)
01-31 09:53:10.305: E/AndroidRuntime(452):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-31 09:53:10.305: E/AndroidRuntime(452):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 09:53:10.305: E/AndroidRuntime(452):  at java.lang.reflect.Method.invoke(Method.java:507)
01-31 09:53:10.305: E/AndroidRuntime(452):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-31 09:53:10.305: E/AndroidRuntime(452):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-31 09:53:10.305: E/AndroidRuntime(452):  at dalvik.system.NativeStart.main(Native Method)
01-31 09:53:10.305: E/AndroidRuntime(452): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.i 
```

* * *

**java文件如下图所示**

```
package com.example.iolcalci;

import com.itab.graphics.TabBitmap;

@SuppressWarnings("deprecation")
public class Second extends ActivityGroup {
    private TabHost mTabHost;
    private static final String TAG_1 = "tab1";
    private static final String TAG_2 = "tab2";
    private static final String TAG_3 = "tab3";
    private static final String TAG_4 = "tab4";

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);
        setTabs();
    }
    private void setTabs() {
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup(getLocalActivityManager());

        addTab("SRK/T", TAG_1, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent(this, Second.class));
        addTab("SRK II", TAG_2, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent(this, Srk2_x.class));
        addTab("BINKHORST", TAG_3, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent(this, Binkhorst_x.class));
        addTab("HOLLADAY", TAG_4, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent(this, Holladay_x.class));
    }
    private Drawable createTabDrawable(int resId) {
        Resources res = getResources();
        StateListDrawable states = new StateListDrawable();

        final Options options = new Options();
        options.inPreferredConfig = Config.ARGB_8888;

        Bitmap icon = BitmapFactory.decodeResource(res, resId, options);

        Bitmap unselected = TabBitmap.createUnselectedBitmap(res, icon);
        Bitmap selected = TabBitmap.createSelectedBitmap(res, icon);

        icon.recycle();

        states.addState(new int[] { android.R.attr.state_selected }, new BitmapDrawable(res, selected));
        states.addState(new int[] { android.R.attr.state_enabled }, new BitmapDrawable(res, unselected));

        return states;
    }
    private View createTabIndicator(String label, Drawable drawable) {
        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, mTabHost.getTabWidget(), false);

        TextView txtTitle = (TextView) tabIndicator.findViewById(R.id.text_view_tab_title);
        txtTitle.setText(label);
        LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) txtTitle.getLayoutParams();
        txtTitle.setLayoutParams(params);

        ImageView imgIcon = (ImageView) tabIndicator.findViewById(R.id.image_view_tab_icon);
        imgIcon.setImageDrawable(drawable);

        return tabIndicator;
    }

    private void addTab(String label, String tag, Drawable drawable, Intent intent) {
        TabHost.TabSpec spec = mTabHost.newTabSpec(tag);
        spec.setIndicator(createTabIndicator(label, drawable));
        spec.setContent(intent);
        mTabHost.addTab(spec);
    }

} 
```

* * *

**XML**

```
 <?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:ignore="HardcodedText" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:background="@color/Black" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="@dimen/tab_height" >
            </TabWidget>

            <TextView
                android:id="@+id/text_view_srkt"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:textSize="10sp" />

            <TextView
                android:id="@+id/text_view_srk2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:textSize="10sp" />

            <TextView
                android:id="@+id/text_view_holl"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:textSize="10sp" />

            <TextView
                android:id="@+id/text_view_bink"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:textSize="10sp" />
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

**请帮忙。我无法弄清楚问题所在**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:37:41.463

我认为问题是由于这一行 `icon.recycle();`，因为`recycle()`方法是释放与位图关联的本机对象，并清除对像素数据的引用。所以尝试像这样使用

```
 states.addState(new int[] { android.R.attr.state_selected }, new BitmapDrawable(res, selected));
        states.addState(new int[] { android.R.attr.state_enabled }, new BitmapDrawable(res, unselected));
        icon.recycle(); 
```

# php - 数据库备份脚本 - 调用未定义函数错误 - 由于 if 语句

> ID：14618628
> 
> 赞同：0
> 
> 时间：2013-01-31T04:42:06.483
> 
> 标签：php, mysql, database, backup

**错误**

**致命错误**：调用未定义的函数`backup_tables()`

**编码：**

```
<?php
$doBackupDB=$_REQUEST["doBackupDB"];
if($doBackupDB=='yes')
{

// create new fresh backup
// dont forget to give it hotname, username, password and db requirements in line below
backup_tables($hostname,$username,$password,$dbname);
/* backup the db OR just a table */
// call db variables from your db
function backup_tables($hostname,$username,$password,$dbname,$tables = '*')
{

$link = mysql_connect($hostname,$username,$password);
mysql_select_db($dbname,$link);

//get all of the tables
if($tables == '*')
{
$tables = array();
$result = mysql_query('SHOW TABLES');
while($row = mysql_fetch_row($result))
{
$tables[] = $row[0];
}
}
else
{
$tables = is_array($tables) ? $tables : explode(',',$tables);
}

//cycle through
foreach($tables as $table)
{
$result = mysql_query('SELECT * FROM '.$table);
$num_fields = mysql_num_fields($result);

$return.= 'DROP TABLE IF EXISTS '.$table.';';
$row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
$return.= "\n\n".$row2[1].";\n\n";

for ($i = 0; $i < $num_fields; $i++)
{
while($row = mysql_fetch_row($result))
{
$return.= 'INSERT INTO '.$table.' VALUES(';
for($j=0; $j<$num_fields; $j++)
{
$row[$j] = addslashes($row[$j]);
$row[$j] = ereg_replace("\n","\\n",$row[$j]);
if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }
if ($j<($num_fields-1)) { $return.= ','; }
}
$return.= ");\n";
}
}
$return.="\n\n\n";
}
//save file
$handle = fopen('backups/db-backup-'.time().'.sql','w+');
fwrite($handle,$return);
fclose($handle);

}

}
?> 
```

**困惑/问题**

现在我知道它的发生是因为这个 if 语句：

```
$doBackupDB=$_REQUEST["doBackupDB"];
if($doBackupDB=='yes')
{
// backup code 
} 
```

基本上我想通过单击一个按钮来触发此备份，如下所示：

```
backup.php?doBackupDB=yes 
```

如果我不使用此 if 语句，则会在页面加载时创建备份，因为脚本会自动执行。

如果我尝试控制它并使用 if 语句来检查是否单击了按钮并且页面重新加载并且变量已传递给`dobackup`然后脚本应该运行---这里会发生错误。

请指教。现在，我必须在备份脚本运行之前清空备份目录，在页面加载时，通过这个脚本获取新的备份并删除旧的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:47:00.927

您已经`backup_tables`在`if`. 这真的是你想要的吗？我会将函数定义移出`if`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:48:04.753

请**不**要这样做。你在这里得到的与 PHPMyAdmin 已经可以做的没有什么不同，[其次](http://www.phpmyadmin.net/home_page/index.php)，你的[SQL 转义](http://bobby-tables.com/php)`addslashes`非常无效，并且会导致备份损坏。滚动你自己的备份工具是**非常危险**的，应该作为绝对的最后手段。

**DO**用于`mysqldump`创建一致的数据库快照。如果需要，您可以在 PHP 中启动此过程。

# android - 如何使用水平滚动视图/列表视图添加动态图像

> ID：14618632
> 
> 赞同：4
> 
> 时间：2013-01-31T04:42:35.403
> 
> 标签：android, android-layout, horizontal-scrolling, horizontalscrollview

我必须开发`five to six` `horizontal`滚动`view`，在这个滚动中`image`添加动态使用`adapter`。

**特点：**
1）图像可以拖放一个滚动视图到另一个

2）图像可以移动一个水平滚动到另一个视图

3) 可以选择/取消选择图像

4）与所有版本

我正在使用这个[**库**](http://www.dev-smart.com/archives/34)，但有时滚动不是那么流畅（切碎）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:49:15.050

检查此链接可能对您有用。
1)[在 Android 的 Horizo​​ntalScrollView 中动态插入视图](https://stackoverflow.com/questions/7186040/insert-a-view-dynamically-in-a-horizontalscrollview-in-android)
2) [http://android-er.blogspot.in/2012/07/implement-gallery-like.html](http://android-er.blogspot.in/2012/07/implement-gallery-like.html)
3)[像 Google 目录一样的水平 ListView](https://stackoverflow.com/questions/8420339/horizontal-listview-like-google-catalogs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T07:23:28.850

使用此代码，您可以以编程方式将 android 控件添加到线性布局，只需通过 xml 将水平滚动视图添加到线性布局您将获得水平列表视图。

```
//My coding here.
String[] name={"PRASHANT","PRASHANT","PRASHANT","PRASHANT","PRASHANT","PRASHANT","PRASHANT"} ;

myLInearLayoutmain =(LinearLayout) findViewById(R.id.linearLayoutmain);

for(int i =0;i<6;i++)
{
    LinearLayout li=new LinearLayout(getApplicationContext());
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    li.setOrientation(LinearLayout.VERTICAL);
    LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);

    LinearLayout.LayoutParams paramsnew = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);

    params1.setMargins(30, 20, 30, 0);
    //add textView
    valueTV = new TextView(this);
    valueTV.setText(""+name[i]);
    valueTV.setId(5);
    valueTV.setLayoutParams(paramsnew);
    valueTV.setGravity(Gravity.CENTER);

    // adding Button to linear
    valueB = new Button(this);
    valueB.setText(""+name[i]);
    valueB.setId(i);
    valueB.setLayoutParams(params);
    valueB.setOnClickListener(this);
    valueB.setGravity(Gravity.CENTER);

    // adding Imageto linear
    img = new ImageView(this);
    img.setImageResource(R.drawable.ic_launcher);
    img.setLayoutParams(paramsnew);

    //add the textView and the Button to LinearLayout
    li.addView(valueTV);
    li.addView(valueB);
    li.addView(img);

    li.setLayoutParams(params1);
    myLInearLayoutmain.addView(li);
} 
```

# android - 使用robotium在测试用例后保持活动活跃

> ID：14618635
> 
> 赞同：1
> 
> 时间：2013-01-31T04:43:13.810
> 
> 标签：android, junit, robotium

Hiii我正在测试一种测试方法，我希望在按下按钮后我的活动应该活动，以便我可以看到该活动中的下一个测试用例，但不幸的是我的活动在运行测试用例后被杀死。有什么办法可以保持活动还活着。如果有代码行，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:26:59.443

我深入研究了源代码，发现`tearDown()`在 ActivityInstrumentationTestCase2 中实现的方法将对您当前的活动进行调用`finish()`。因此，即使您在实现此方法时没有显式地完成（）您的 Activity，它也会在调用`super`. 但是，根据源代码文档：如果您有一个非静态内部类，则在 tearDown() 中删除对 super 的调用可能会导致内存泄漏，而且，对于您的情况，也许更重要的是，正在运行的 Activity 似乎仍然被杀死一次测试完成。即使您有一个空的 tearDown() 实现，似乎被测活动在运行结束时完成。截至目前，我不知道有什么方法可以避免这种情况。

作为基于您对@Paul Harris 回答的评论的替代方案，Robotium 有许多方法可以让您等待某事发生。您可能需要查看`waitForText()`or `waitForView()`，它可以将超时作为参数，让 Robotium 在您的按钮单击执行某些操作时暂停。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:44:31.413

如果没有看到您的代码，我无法确定，但我猜要么在测试用例中，要么在 setup() 和 tearDown() 方法中，您将不得不调用诸如 finishOpenedActivities() 之类的方法，该方法会关闭您拥有的所有活动打开。删除此行将使活动保持打开状态。

话虽如此，让您的测试用例从一个干净的状态开始通常是最佳实践，因为拥有依赖于排序的测试用例意味着如果一个失败，所有其他的都会失败，即使该功能确实有效，而且您必须在为了让它们都按照你想要的顺序运行。

# c# - C# 表单数据库？它是 SQL Server .... 还是只是 Access？

> ID：14618638
> 
> 赞同：0
> 
> 时间：2013-01-31T04:43:30.737
> 
> 标签：c#, sql-server, ms-access, visual-studio-2012

这是一个非常简单的问题，但我正在学习 C#，我想知道当您将 a 添加`Local Database`到您的项目时（我正在使用的书是`Head First C#`）是 SQL Server 数据库还是只是 Access 数据库（或其他什么）。

我只使用 Windows 表单来添加数据库，它用我填写的数据库的名称/ID/等填充了一堆列。做起来超级容易（我明白为什么人们现在喜欢 C#）但我不知道这是否是一个实际的 SQL Server 数据库，你可以使用它进行插入/更新等。或者完全是别的东西。

我忘了提到这是 VS 2012 Express。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:45:25.190

默认情况下，如果您使用的是 VS 2012，则会创建一个[LocalDB数据库。](http://msdn.microsoft.com/en-us/library/hh510202.aspx)对于 Visual Studio 的早期版本，数据库将是[SQL Server Express](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)。

# java - 在 jsp servlet 中完成读取 CRUD sql

> ID：14618641
> 
> 赞同：0
> 
> 时间：2013-01-31T04:44:32.673
> 
> 标签：java, mysql, jsp, servlets

我昨晚问了这个问题，不问如何完成它的编码有点愚蠢。我现在在 JSP 中有一个下拉框，其中填充了来自 SQL 数据库的一些数据。我正在尝试将所选数据定向到最终查看页面，但再次遇到了一些困难。

当我运行程序时，它要么使用列表数据库中的所有数据填充页面，要么会给我一个不友好的错误。

我目前的编码是这样的：

豆子：

```
package com.login.read;

public class ReadBean {

protected int id;
protected String title;
protected String author;
protected String text;

public int getId(){
    return id;
}

public void setId(int newID){
    id = newID;
}

public String getTitle(){
    return title;
}

public void setTitle(String newTitle){
    title = newTitle;
}

public String getAuthor(){
        return author;
    }

public void setAuthor(String newAuthor){
    author = newAuthor;
}

public String getText(){       
        return text;
    } 

public void setText(String newText){
    text = newText;
}

} 
```

控制器：

```
package com.login.read;

import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet (urlPatterns={"/com/defaultValidate/ReadController"})
public class ReadController extends HttpServlet {

protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String address;
    List<ReadBean> myList = new ArrayList<ReadBean>();

    if(request.getParameter("ReadConfirm") != null){  
        try {
            Connection connect = ConnectionManager.getConnection();
            String SQL = "SELECT * FROM prayers ORDER BY prayerTitle DESC";
            PreparedStatement ps = connect.prepareStatement(SQL);

            ResultSet rs = ps.executeQuery();

            while(rs.next()){
                ReadBean reader = new ReadBean();
                reader.setTitle(rs.getString("prayerTitle"));
                reader.setAuthor(rs.getString("author"));
                reader.setText(rs.getString("text"));
                myList.add(reader);   
            }

            request.getSession().setAttribute("ref", myList);

            rs.close();
            ps.close();
            connect.close();
        } catch (Exception e) {
        }

        address = "ReadConfirm.jsp";
    } else if(request.getParameter("ReadView") != null){ 

        address = "ReadView.jsp";
    } else{
        address = null;
    }

    RequestDispatcher dispatcher = request.getRequestDispatcher(address);
    dispatcher.forward(request, response);

}
} 
```

以及将下拉框链接到所选材料的我的 jsp 页面：

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

%@include file="MenuHeader.jsp"%>
</div>
    <div id="mainBorder"> </div>
        <div id="mainBody">
            <table id="mainTable">
                <tr>
                    <td id="sidebar">
                        <h2>Options</h2>  
                            <ul>

            </ul>
        </td>
        <td id="mainContent">
                        <h2 id="contentHeader">Select a prayer</h2>

                        <form action="ReadController">
                            <table border="1" width="1" cellspacing="5" cellpadding="5">
                                <thead>
                                    <tr>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><select name="prayer_id">

                                                <c:forEach var="view" items="${ref}">
                            <h2>${view.title}</h2>

                            <h3>${view.author}</h3>

                            <p>${view.text}</p>
                        </c:forEach>

                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="submit" name="ReadView"     value="View">    </td>
                                    </tr>
                                </tbody>
                            </table>

                        </form>
    <td id="imageBar">

            </td>   
        </table>
    <%@ include file="../menuHeaderAndFooter/MenuFooter.jsp" %> 
```

和最后的查看页面：

```
 <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
%@include file="MenuHeader.jsp"%>
</div>
    <div id="mainBorder"> </div>
        <div id="mainBody">
            <table id="mainTable">
                <tr>
                    <td id="sidebar">
                        <h2>Options</h2>  
                            <ul>

            </ul>
        </td>
        <td id="mainContent">

                        <c:forEach var="view" items="${res}">
                            <h2>${view.title}</h2>

                            <h3>${view.author}</h3>

                            <p>${view.text}</p>
                        </c:forEach>

                        <form action="../Read.jsp">
                            <p>Click on the return button to return to the main menu</p>
                            <input type="submit" name="return" value="Return">
                        </form>

    <td id="imageBar">

            </td>   
        </table>
    <%@ include file="../menuHeaderAndFooter/MenuFooter.jsp" %> 
```

与往常一样，这方面的任何和所有帮助都非常有帮助。我是 jsp 和 servlet 领域的新手。

如果需要任何关于此序列延续的参考，请查看我发布的关于在 jsp 组合框中动态显示数据的上一个问题。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:02:47.870

通过阅读上面的代码，我可以问您将会话属性存储在**变量“var”**中的位置，该变量在`c:foreach`循环中使用？

# jquery - Jquery FullCalendar 提醒

> ID：14618645
> 
> 赞同：2
> 
> 时间：2013-01-31T04:44:55.963
> 
> 标签：jquery, jquery-ui, events, fullcalendar, reminders

我在我的网络应用程序中使用来自*Adam Shaw的***[JQuery fullCalendar 插件。](http://arshaw.com/fullcalendar/)**我浏览了文档，发现了与事件交互和管理它的不同方式。我卡住的地方是**提醒**。我找不到任何关于我们如何为特定事件发送提醒的信息。我想为特定事件或事件创建提醒，并通过发送通知来提醒用户。我们怎样才能做到这一点？如果插件不支持提醒功能，请推荐一些很棒的 jquery 事件日历插件，它们是免费的并且支持事件。

# javascript - 我的应用程序被黑客入侵了吗？神秘的 DOM 操作注入 Flash

> ID：14618646
> 
> 赞同：4
> 
> 时间：2013-01-31T04:45:09.910
> 
> 标签：javascript, malware

在测试我的本地代码时，加载后约 2 秒出现在我的 DOM 中：

```
<div style="position: absolute; top: 0px; left: 0px; width: 1px; height: 1px; z-index: 2147483647;" id="_GPL_e6a00_parent_div">
  <object type="application/x-shockwave-flash" id="_GPL_e6a00_swf" data="http://savingsslider-a.akamaihd.net/items/e6a00/storage.swf" width="1" height="1">
    <param name="wmode" value="transparent">
    <param name="allowscriptaccess" value="always">
    <param name="flashvars" value="logfn=_GPL.items.e6a00.log&amp;onload=_GPL.items.e6a00.onload&amp;onerror=_GPL.items.e6a00.onerror&amp;LSOName=gpl">
  </object>
</div> 
```

我已经对 HTML 中的所有关键字进行了全局搜索，但在我的项目中找不到它。

之后我尝试禁用我加载的所有外部插件，包括 Facebook 的 SDK、Mixpanel、Google Analytics，但它仍然出现。

我还能做些什么来找到罪魁祸首？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:47:35.597

如果您使用 FTP 上传文件，请使用可以比较本地和远程文件的 FTP 客户端（我的首选是 FileZilla）。使用它，您可以找到服务器上任何已修改的文件，并希望找到并解决问题。

或者，您可以从本地副本重新上传整个内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T08:52:23.317

我在客户的计算机上遇到了类似的事情。经过一番研究，这似乎是由于“vuze”在您的浏览器中安装了附加组件或扩展（可能不在您的代码中）。

我们认为这是因为所有已安装的附加组件和扩展都与 vuze 卸载说明中的内容相匹配：[http ://www.vuze.com/uninstall-vuze-mac-extensions.php](http://www.vuze.com/uninstall-vuze-mac-extensions.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T01:06:45.357

一个名为 Flashblock 的 Firefox 插件使隐藏的 Flash 文件变得可见。我翻转了 Flash 图标（显示在隐藏的 Flash 文件所在的位置——每个浏览器页面的左上角）。然后我看到了与您遇到的 URL 一样的 URL：savingsslider-a.akamaihd.net/items/e6a00/storage.swf不记得安装）。但我删除了它并重新启动了我的 Firefox，一切又恢复了正常。我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T15:28:06.253

它来自您的浏览器上启用的“不需要的”扩展，并且很可能带有您只需单击“下一步”而不阅读的软件。

检查您的扩展并禁用/删除您不知道的扩展。

[如何编辑浏览器扩展](http://help.yahoo.com/kb/index?locale=en_US&page=content&y=PROD_GRPS&id=SLN3016 "如何编辑浏览器扩展")

# ruby - Mongo / Ruby驱动程序一次输出特定数量的文档？

> ID：14618647
> 
> 赞同：0
> 
> 时间：2013-01-31T04:45:13.333
> 
> 标签：ruby, mongodb

Ruby Mongo 驱动程序问题：

如何一次从集合中输出 5_000 个文档批次，直到我读取集合中的最后一个文档而不先将整个数据库转储到内存中？

*这对我来说真的很糟糕*：

```
mongo = MongoClient.new('localhost', 27017)['sampledb']['samplecoll']
@whois.find.to_a.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:52:25.110

Mongo::Collection#find 返回一个可枚举的 Mongo::Cursor。对于批处理 Enumerable#each_slice 是您的朋友，非常值得添加到您的工具包中。

希望你喜欢这个。

find_each_slice_test.rb

```
require 'mongo'
require 'test/unit'

class FindEachSliceTest < Test::Unit::TestCase
  def setup
    @samplecoll = Mongo::MongoClient.new('localhost', 27017)['sampledb']['samplecoll']
    @samplecoll.remove
  end

  def test_find_each_slice
    12345.times{|i| @samplecoll.insert( { i: i } ) }
    slice__max_size = 5000
    @samplecoll.find.each_slice(slice__max_size) do |slice|
      puts "slice.size: #{slice.size}"
      assert(slice__max_size >= slice.size)
    end
  end
end 
```

红宝石 find_each_slice_test.rb

```
Run options: 

# Running tests:

slice.size: 5000
slice.size: 5000
slice.size: 2345
.

Finished tests in 6.979301s, 0.1433 tests/s, 0.4298 assertions/s.

1 tests, 3 assertions, 0 failures, 0 errors, 0 skips 
```

# r - 在 R 中访问 DBSCAN 集群

> ID：14618657
> 
> 赞同：1
> 
> 时间：2013-01-31T04:45:47.803
> 
> 标签：r, dbscan

使用此代码，我可以理解我可以绘制单个集群。

```
library(fpc)
set.seed(665544)
n <- 600
x <- cbind(runif(10, 0, 10)+rnorm(n, sd=0.2), runif(10, 0, 10)+rnorm(n,sd=0.2))
ds <- dbscan(x, 0.2)
plot(x[ds$cluster %in% 1:3,]) 
```

对于上面的代码，我得到以下输出，

```
ds

dbscan Pts=600 MinPts=5 eps=0.2
        0  1  2  3  4  5  6  7  8  9 10 11
border 28  4  4  8  5  3  3  4  3  4  6  4
seed    0 50 53 51 52 51 54 54 54 53 51  1
total  28 54 57 59 57 54 57 58 57 57 57  5 
```

我得到了所有 11 个集群。

如果我想在特定集群中显示数据，我需要为此编写什么 R 脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T06:33:32.397

只是为了完整性：

当您发现自己时，您可以使用

```
plot(ds$cluster = yourclusternum) 
```

但是，您可以通过绘制所有集群来做得更好，但使用不同的颜色：如果您还想绘制噪声，请执行

```
plot(x, col=ds$cluster) 
```

如果您确实想隐藏噪音，您可以这样做

```
plot(x[ds$cluster > 0,], col=ds$cluster[ds$cluster>0]) 
```

# maven - maven故障保护插件

> ID：14618660
> 
> 赞同：1
> 
> 时间：2013-01-31T04:46:00.397
> 
> 标签：maven, selenium, maven-failsafe-plugin

我正在尝试使用 mvn 故障安全插件仅运行 selenium 测试。我创建了一个单独的配置文件来仅运行 selenium 测试，但 mvn 无法找到它们。我的项目结构看起来像

```
moduleA
  scr/main/...
  src/test/integration/java/...
  scr/test/unit/java/...    

moduleB
  scr/main/...
  src/test/integration/java/...
  scr/test/unit/java/...

moduleC (only for selenium tests)
  scr/main/java/com/selenium/A.java
  src/test/java/... 
```

由于我在模块 A 和 B 中有单元和集成测试的新目录。我在 pom.xml (listingB) 中定义了以下内容，以让 Maven 了解其他测试目录。到目前为止一切顺利，但是当我在 moduleC 中添加硒测试并且我只想运行硒时，它不运行硒测试。我创建了一个新的配置文件（listingA）来运行硒测试。任何帮助表示赞赏。

**清单A：**

```
<profiles>
  <profile>
    <id>selenium</id>
    <build>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-failsafe-plugin</artifactId>
          <executions>
            <execution>
              <id>verify</id>
              <goals>
                <goal>integration-test</goal>
                <goal>verify</goal>
              </goals>
            </execution>
          </executions>
          <configuration>
            <includes>
              <include>**/selenium/*.java</include>
            </includes>
          </configuration>
        </plugin>

        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <configuration>
            <skip>true</skip>
          </configuration>
        </plugin>
      </plugins>
    </build>
  </profile>
</profiles> 
```

**清单B：**

```
<plugins>
  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.7</version>
    <executions>
      <execution>
        <id>add-test-source</id>
        <phase>generate-test-sources</phase>
        <goals>
          <goal>add-test-source</goal>
        </goals>
        <configuration>
          <sources>
            <source>${basedir}/src/test/unit/java</source>
            <source>${basedir}/src/test/integration/java</source>
            <source>${basedir}/src/test/common/java</source>
          </sources>
        </configuration>
      </execution>
      <execution>
        <id>add-test-resource</id>
        <phase>generate-test-resources</phase>
        <goals>
          <goal>add-test-resource</goal>
        </goals>
        <configuration>
          <resources>
            <resource>
              <directory>${basedir}/src/test/integration/resources</directory>
              <directory>${basedir}/src/test/unit/resources</directory>
              <directory>${basedir}/src/test/common/resources</directory>
            </resource>
          </resources>
        </configuration>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:49:58.957

我首先想到的是为什么要通过使用不同的文件夹来分离单元测试和集成测试，因为在 Maven 中，单元测试和集成测试之间的分离是通过命名约定完成的。

单元测试必须命名为

```
**/Test*.java
**/*Test.java
**/*TestCase.java 
```

集成测试必须命名为：

```
**/IT*.java
**/*IT.java
**/*ITCase.java 
```

这意味着换句话说，您可以毫无问题地将集成测试和单元测试放入**src/test/java的同一个文件夹中。**集成测试的执行不受此影响。

如果你打电话

```
mvn clean package 
```

只会运行单元测试。如果您还需要运行集成测试，您可以简单地使用：

```
mvn verify 
```

如果您不想跳过单元测试，可以使用以下内容：

mvn -DskipTests=true 验证

对于您创建的单独的 selenium 模块，最好的解决方案是将集成测试放入具有适当命名约定的常用文件夹**src/test/java中。**

您可能遇到的问题是，如果您的集成测试需要一些特殊资源，您可能会将这些集成测试移动到仅包含集成测试的单独模块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:44:50.627

1.  如果您的 Selenium 测试在文件夹中，请从列表 A 的配置中删除`src/test/java`该**参数**`<includes>``maven-failsafe-plugin`

***   将您的 Selenium 测试类命名为：

    ```
     **/IT*.java
      **/*IT.java
      **/*ITCase.java 
    ```

    （正如**khmarbaise**所建议的那样）

    *   Failsafe 使用 Surefire 运行集成测试，因此**不要**将 Selenium 测试类命名为：

    ```
    **/Test*.java
    **/*Test.java
    **/*TestCase.java 
    ```

    因为这将使它们在**测试**阶段运行，而不是按照您的计划在**集成测试阶段运行。**** 

 **我有一个类似于你的配置，它可以工作。**

# ios - Google API 获取天气信息

> ID：14618663
> 
> 赞同：6
> 
> 时间：2013-01-31T04:46:05.403
> 
> 标签：ios, iphone, google-weather-api

我需要根据用户的当前位置获取天气信息。请向我提供 Google API 以获取天气信息。

我正在使用[http://www.google.com/ig/api?weather=Mumbai](http://www.google.com/ig/api?weather=Mumbai)，但 Google 返回一些错误：

> **我们很抱歉...**
> 
> ...但您的计算机或网络可能正在发送自动查询。为了保护我们的用户，我们现在无法处理您的请求。
> 
> 有关详细信息，请参阅 Google 帮助。

当我在 Google 上查找时，我发现 Google API 已关闭。

请指导我获取天气信息的最新 Google API 是哪一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T04:55:25.753

Google 永久终止 Weather API...

或者，您可以使用：

1.  [WunderGround API](http://www.wunderground.com/weather/api/)
2.  [雅虎 API](http://developer.yahoo.com/weather/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T04:54:02.600

嗨，arundhati，你谷歌了吗？我只是在谷歌搜索并找到最佳答案来自：-

[包括天气信息、iPhone App、天气API](https://stackoverflow.com/questions/6029607/including-weather-information-iphone-app-weather-api)

检查[最佳天气 API](https://stackoverflow.com/questions/507441/best-weather-apis)，

阅读带有示例代码的博客教程

[将本地天气条件添加到您的应用程序（第 2/2 部分：访问 Google 的 XML 天气 API）](http://www.icodeblog.com/2010/09/29/adding-local-weather-conditions-to-your-app-part-22-accessing-googles-xml-weather-api/)

[在 iphone 中集成天气信息](https://stackoverflow.com/questions/5634271/integrating-weather-information-in-iphone)

希望它可以帮助你:)

**这是一个天气 API iphone 的演示**

[https://github.com/elc/ICB_LocalWeather](https://github.com/elc/ICB_LocalWeather)

![在此处输入图像描述](../Images/6881f9e59222c2a45b3dd418b66d9d5e.png)

**[地下天气 API](http://www.wunderground.com/weather/api)**

示例：[http ://api.wunderground.com/auto/wui/geo/GeoLookupXML/index.xml?query=90210](http://api.wunderground.com/auto/wui/geo/GeoLookupXML/index.xml?query=90210)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T04:50:48.717

Google Weather API 已关闭。查看以下替代方案：

[打开天气图](http://openweathermap.org)

[全国数字预报](http://graphical.weather.gov/)

[天气网](http://weather.com)

我一直在使用第一个链接。它像 Open Street Maps 一样免费。

编辑：

这是获取 JSON 的基本代码：

```
NSError *error = nil;
NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://openweathermap.org/data/2.1/find/city?lat=32.85190&lon=57.65878&cnt=1&type=JSON"]];

if (jsonData) {

    id jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

    if (error) {
        NSLog(@"error is %@", [error localizedDescription]);

        // Handle Error and return
        return;

    }

    NSArray *keys = [jsonObjects allKeys];
    // values in foreach loopDic]
    for (NSString *key in keys) {
        NSLog(@"%@ is %@",key, [jsonObjects objectForKey:key]);
    }

} else {
    // Handle Error
} 
```

将其添加到`viewDidLoad`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-31T04:54:36.273

最好的天气 API 在[这里](http://www.wunderground.com/weather/api/)。

来自他们的示例 JSON 响应如下：

```
{
  "response": {
  "version": "0.1",
  "termsofService": "http://www.wunderground.com/weather/api/d/terms.html",
  "features": {
  "conditions": 1
  }
  },
  "current_observation": {
  "image": {
  "url": "http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png",
  "title": "Weather Underground",
  "link": "http://www.wunderground.com"
  },
  "display_location": {
  "full": "San Francisco, CA",
  "city": "San Francisco",
  "state": "CA",
  "state_name": "California",
  "country": "US",
  "country_iso3166": "US",
  "zip": "94101",
  "latitude": "37.77500916",
  "longitude": "-122.41825867",
  "elevation": "47.00000000"
  },
  "observation_location": {
  "full": "SOMA - Near Van Ness, San Francisco, California",
  "city": "SOMA - Near Van Ness, San Francisco",
  "state": "California",
  "country": "US",
  "country_iso3166": "US",
  "latitude": "37.773285",
  "longitude": "-122.417725",
  "elevation": "49 ft"
  },
  "estimated": {},
  "station_id": "KCASANFR58",
  "observation_time": "Last Updated on June 27, 5:27 PM PDT",
  "observation_time_rfc822": "Wed, 27 Jun 2012 17:27:13 -0700",
  "observation_epoch": "1340843233",
  "local_time_rfc822": "Wed, 27 Jun 2012 17:27:14 -0700",
  "local_epoch": "1340843234",
  "local_tz_short": "PDT",
  "local_tz_long": "America/Los_Angeles",
  "local_tz_offset": "-0700",
  "weather": "Partly Cloudy",
  "temperature_string": "66.3 F (19.1 C)",
  "temp_f": 66.3,
  "temp_c": 19.1,
  "relative_humidity": "65%",
  "wind_string": "From the NNW at 22.0 MPH Gusting to 28.0 MPH",
  "wind_dir": "NNW",
  "wind_degrees": 346,
  "wind_mph": 22.0,
  "wind_gust_mph": "28.0",
  "wind_kph": 35.4,
  "wind_gust_kph": "45.1",
  "pressure_mb": "1013",
  "pressure_in": "29.93",
  "pressure_trend": "+",
  "dewpoint_string": "54 F (12 C)",
  "dewpoint_f": 54,
  "dewpoint_c": 12,
  "heat_index_string": "NA",
  "heat_index_f": "NA",
  "heat_index_c": "NA",
  "windchill_string": "NA",
  "windchill_f": "NA",
  "windchill_c": "NA",
  "feelslike_string": "66.3 F (19.1 C)",
  "feelslike_f": "66.3",
  "feelslike_c": "19.1",
  "visibility_mi": "10.0",
  "visibility_km": "16.1",
  "solarradiation": "",
  "UV": "5",
  "precip_1hr_string": "0.00 in ( 0 mm)",
  "precip_1hr_in": "0.00",
  "precip_1hr_metric": " 0",
  "precip_today_string": "0.00 in (0 mm)",
  "precip_today_in": "0.00",
  "precip_today_metric": "0",
  "icon": "partlycloudy",
  "icon_url": "http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
  "forecast_url": "http://www.wunderground.com/US/CA/San_Francisco.html",
  "history_url": "http://www.wunderground.com/history/airport/KCASANFR58/2012/6/27/DailyHistory.html",
  "ob_url": "http://www.wunderground.com/cgi-bin/findweather/getForecast?query=37.773285,-122.417725"
  }
} 
```

# javascript - 如果我在另一个选项卡中打开页面，如何转到上一页？

> ID：14618669
> 
> 赞同：0
> 
> 时间：2013-01-31T04:46:40.347
> 
> 标签：javascript, cookies, back, browser-history

如果我从搜索结果中打开另一个选项卡中的页面（仅使用 javascript 或 cookie），是否可以进入上一页？

我有像 test.com/search 这样的搜索页面和这样的搜索结果：

```
 1) test.com/search/a
 2) test.com/search/b
 3) test.com/search/c 
```

现在，如果我在新标签中打开任何搜索结果链接`test.com/search/b`（将在新标签中，我想继续`test.com/search`页面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:00:46.487

您可以将文本存储在 cookie 中。您可以使用 javascript 重定向到不同的位置。

使用您所在的 URL 编写一个 cookie，存储它，让用户单击另一个页面，[挂钩到页面返回事件](https://stackoverflow.com/questions/4967414/how-to-catch-history-back-event-in-javascript)，读取 cookie 并将位置更改为您从 cookie 中读取的 URL。也可以使用 JavaScript 操作 URL 的散列部分，并在其中存储例如 JSON 编码的信息。这样就可以拥有引用特定状态的可收藏 URL。这也用于[一些](https://github.com/cowboy/jquery-hashchange)[jQuery]( [http://tkyk.github.com/jquery-history-plugin/](http://tkyk.github.com/jquery-history-plugin/)插件。

但是，如果没有 HTML5，就无法挂钩后退按钮事件。

如果您决定依赖 HTML5，您可以[直接操作浏览器历史记录](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries)。

# sql - 我如何找到少于 2 个注册 Oracle 11g 的名称

> ID：14618670
> 
> 赞同：0
> 
> 时间：2013-01-31T04:46:53.460
> 
> 标签：sql, oracle11g

我有两张桌子

## 用户表

```
 user_id | name  |
    1    | peter |
    2    | kofi  |
    3    | sam   |
    4    | nasah |
    5    | sarah |
    6    | david | 
```

## 时间表

```
 time_id | user_id | register
    1    |     1   |  present
    2    |     2   |  absent
    3    |     3   |  absent
    4    |     3   |  absent
    5    |     4   |  present
    6    |     5   |  absent
    7    |     5   |  absent 
```

我怎样才能找到少于 2 个寄存器的名称。请帮我处理 SQL 中的这段代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:32:39.037

你只需使用`group by`和`having`

```
select users.user_id, users.name, count(times.time_id) registers
  from users 
       left outer join times 
                    on times.user_id = users.user_id
 group by users.user_id, users.name
 having count(*) < 2; 
```

例如：

```
SQL> with users as (select 1 user_id, 'Peter' name from dual union all
  2                 select 2 user_id, 'kofi' name from dual union all
  3                 select 3 user_id, 'sam' name from dual union all
  4                 select 4 user_id, 'nasah' name from dual union all
  5                 select 5 user_id, 'sarah' name from dual union all
  6                 select 6 user_id, 'david' name from dual),
  7  times as (select 1 time_id, 1 user_id, 'present' register from dual union all
  8            select 2 time_id, 2 user_id, 'absent' register from dual union all
  9            select 3 time_id, 3 user_id, 'absent' register from dual union all
 10            select 4 time_id, 3 user_id, 'absent' register from dual union all
 11            select 5 time_id, 4 user_id, 'present' register from dual union all
 12            select 6 time_id, 5 user_id, 'absent' register from dual union all
 13            select 7 time_id, 5 user_id, 'absent' register from dual)
 14  select users.user_id, users.name, count(times.time_id) registers
 15    from users
 16         left outer join times
 17                      on times.user_id = users.user_id
 18   group by users.user_id, users.name
 19   having count(*) < 2;

   USER_ID NAME   REGISTERS
---------- ----- ----------
         6 david          0
         1 Peter          1
         4 nasah          1
         2 kofi           1 
```

# mysql - MySQL Unknown column in where 子句但列存在

> ID：14618682
> 
> 赞同：2
> 
> 时间：2013-01-31T04:47:58.427
> 
> 标签：mysql, sql, join, sql-update

所以似乎有些人以前遇到过这个问题，但是搜索并没有为我的案例找到答案。

我在跑

```
 UPDATE ProdCosts SET PercentCost = ((ProdCosts.PieceCost/totalprodcost.sumpiececost)*100)
 WHERE totalprodcost.ProdNo=ProdCosts.ProdNo;
 AND ProdCosts.PieceCost > 0; 
```

并得到错误

```
MySQL said: Documentation
#1054 - Unknown column 'totalprodcost.ProdNo' in 'where clause' 
```

DESCRIBE totalprodcost 显示：

```
Field   Type    Null    Key     Default     Extra
ProdNo  int(11) YES         NULL    
sumpiececost    double  YES         NULL 
```

我想不通。看起来很简单。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:49:47.173

加入`UPDATE`声明表，

```
UPDATE  ProdCosts a
        INNER JOIN totalprodcost b
            ON b.ProdNo = a.ProdNo
SET     a.PercentCost = ((a.PieceCost/b.sumpiececost)*100)
WHERE   a.PieceCost > 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:14:10.093

试试这个查询

```
更新 ProdCosts, totalprodcost SET ProdCosts.PercentCost = ((ProdCosts.PieceCost/totalprodcost.sumpiececost)*100) 其中 totalprodcost.ProdNo=ProdCosts.ProdNo AND ProdCosts.PieceCost > 0;

```

# javascript - 如何创建 ember 数据事务

> ID：14618685
> 
> 赞同：1
> 
> 时间：2013-01-31T04:48:09.140
> 
> 标签：javascript, ember.js, datastore, ember-data

我正在尝试创建一个事务来创建一个新用户。

从 ember-data.js 源代码：

> 要创建新事务，请调用 应用程序实例的`transaction()`方法：
> `DS.Store`
> 
> ```
>  var transaction = App.store.transaction(); 
> ```

我正在尝试在控制器中创建事务

```
App.CreateUserController = Ember.Controller.extend({
    addUser: function() {
        var transaction = App.store.transaction();
    }
}); 
```

但我得到

```
TypeError: App.store is undefined 
```

我定义了这家商店

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: App.Adapter.create({})
}); 
```

它使用了大写字母 S，所以我尝试将 App.store 更改为 App.Store，我得到了

```
TypeError: App.Store.transaction is not a function 
```

如果我将 App.Store 更改为使用小写字母 s，我会得到

```
TypeError: store is undefined 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-02T02:42:18.027

Ember.js 中的事务消失了：保存个人记录。[https://github.com/emberjs/data/blob/master/TRANSITION.md](https://github.com/emberjs/data/blob/master/TRANSITION.md)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T05:00:42.610

您需要创建一个商店而不是扩展它。惯例是在创建实例时使用小写字母，因此您应该创建一个商店并将其命名为 App.store 而不是 App.Store

```
App.store = DS.Store.create({
  revision: 11,
  adapter: App.Adapter.create({})
}); 
```

然后你就可以创建交易了

```
var transaction = App.store.transaction(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T05:00:36.333

你已经定义`App.Store`了，这是一个***类***；你正在`extend`学习 DS.Store，这是一个现有的类。应该在 store 的***实例***上调用创建事务的代码（按照惯例，类是大写的，实例是小写的）。

要创建已定义商店的实例：

```
App.store = App.Store.create();
myTransaction = App.store.transaction(); 
```

请注意，您`extend`使用 Store 类来获取您自己的 Store 类，并调用`create`您自己的 Store 类来实例化它。

请参阅[ember.js 扩展和创建有什么区别？](https://stackoverflow.com/questions/11654593/whats-the-difference-between-ember-js-extend-and-create)有关扩展与创建的更多信息。

# ios - 在屏幕上获得所有触摸

> ID：14618686
> 
> 赞同：2
> 
> 时间：2013-01-31T04:48:14.160
> 
> 标签：ios, ios6, c4

我有一个小问题。我想接收屏幕上的所有触摸，并为每个触摸生成一个新视频。问题是，一旦放置视频，它就会拦截接触点。我尝试了各种值进入 locationInView 但到目前为止没有任何运气。我找对地方了吗？

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPoint pointOnScreen = [[touches anyObject] locationInView:self.view];

    C4Movie *player = [C4Movie movieNamed:@"inception.mov"];
    player.shouldAutoplay = YES;
    player.loops = YES;
    player.center = pointOnScreen;
    [self.canvas addMovie:player];

 }
 @end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:47:37.200

是的，您找对地方了，Chris 对用户交互的看法是正确的。你应该试试：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint pointOnScreen = [[touches anyObject] locationInView:self.view];
    C4Movie *player = [C4Movie movieNamed:@"inception.mov"];
    player.shouldAutoplay = YES;
    player.loops = YES;
    player.center = pointOnScreen;
    player.userInteractionEnabled = NO;
    [self.canvas addMovie:player];
} 
```

但是，您将遇到添加视频的问题。**不幸的是，iOS / 硬件只允许您同时运行 4 个视频管道，因此您会很快达到目标**。

如果您想在触摸和拖动手指时向屏幕添加内容，那么您也可以在以下方法中执行上述代码：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    //work your magic here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T04:59:21.953

尝试将每个视频屏幕的 userInteractionEnabled 属性（假设它保存在某种 UIView 中）设置为 NO - 这样，触摸事件将通过它并继续被您的处理程序接收。

# c++ - VS 2012 (Visual C): 错误 C2143: 语法错误: 错过 ";" 前 ”*”

> ID：14618691
> 
> 赞同：1
> 
> 时间：2013-01-31T04:49:18.273
> 
> 标签：c++, visual-c++-2012

我在“iterator_of_array_int.h”有这个错误：

```
#include "array_of_int.h"
#include <cstdlib>    
namespace leonidandand {
    class iterator_of_array_int
    {           
    private:
        std::size_t index;
        // next line has error
        array_of_int * ptr_to_arr;
        friend class array_of_int;
    };
} 
```

“array_of_int.h”

```
#pragma once

#include <cstdlib>
#include "iterator_of_array_int.h"
namespace leonidandand {
    class array_of_int {
    public:    
        typedef iterator_of_array_int iterator;
        iterator_of_array_int begin();
        iterator_of_array_int end();
    };
} 
```

我包括“array_of_int.h”。怎么了？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T06:55:59.083

`array_of_int.h`在定义 之前，您包含了 which `array_of_int`，包括`iterator_of_array_int.h`。因此，当编译器看到您的错误行时，它没有看到任何 name 声明`array_of_int`。该错误消息不是编译器发出的更有用的消息之一。

我习惯在标题中前向声明类；这就是你所需要的一切，所以用and that one's good`iterator_of_array_int.h`替换`include`行。`class array_of_int;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T04:55:35.213

通常，该错误意味着它无法识别您在“ * ”之前放置的类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:09:53.697

假设您在array_of_int.h 上有您的**array_of_int**结构/类定义，请检查定义末尾是否有分号。编译器似乎无法正确识别类型

# powershell - psexec 双反斜杠错误

> ID：14618692
> 
> 赞同：0
> 
> 时间：2013-01-31T04:49:21.533
> 
> 标签：powershell, psexec

我正在尝试在 power shell 中运行以下命令，但它总是在双反斜杠字符处给我错误.. 我该怎么办！我看到了其他论坛，这种语法对他们来说很好！

```
$combined="C:\tools\PsExec.exe \\computer cmd.exe"
PS C:\Users\Desktop\initialutility\initutil_v2> Invoke-Expression $combined

At :line:1 char:20
+ C:\tools\PsExec.exe  <<<< \\computer cmd.exe 
```

我用\xxxx（即IP地址）替换了\computer..仍然没有用..请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:12:06.650

我相信您的问题出在其他地方，因为双斜杠可以正常工作，例如：

```
PS> $command = "c:\bin\psexec.exe \\genericpc1 hostname.exe"
PS> iex $command

PsExec v1.98 - Execute processes remotely
Copyright (C) 2001-2010 Mark Russinovich
Sysinternals - www.sysinternals.com

GENERICPC1
hostname.exe exited on genericpc1 with error code 0. 
```

我会尝试在 Invoke-Expression 的上下文之外运行 psexec.exe 并首先让它工作。使用 psexec 的另一个问题是，如果您不指定任何凭据，它会使用您的凭据。这意味着，您的凭据需要在远程系统上工作。

其他要求，来自[PsExec](http://www.windowsitpro.com/article/remote-computing/psexec-42919)上的一篇文章：

> PsExec 远程运行进程的能力要求本地和远程计算机都启用文件和打印共享（即工作站和服务器服务），并且定义了默认的 Admin$ 共享（映射到 \windows 目录的隐藏共享）在远程系统上。
> 
> ... 模拟您在本地系统上运行 PsExec 的帐户。从安全的角度来看，模拟在一定程度上受到限制——远程进程无权访问任何网络资源，即使是您的帐户通常能够访问的那些资源。如果您正在运行的帐户在远程系统上没有本地管理权限，您要运行的进程需要访问网络资源，或者您想在不同的帐户中运行进程，则使用 PsExec 的 -u切换以提供备用帐户名称。共享（映射到 \windows 目录的隐藏共享）在远程系统上定义。

# iphone - 将一个数组分配给另一个数组 - xcode/objective c

> ID：14618695
> 
> 赞同：0
> 
> 时间：2013-01-31T04:49:43.427
> 
> 标签：iphone, xcode4

我有一段代码，其中我从表中检索一个数组并将其分配给另一个字符串数组。但是，字符串数组返回 null。

这是代码：

```
 NSArray *CalorieSet = [ActiveCaloriesDatabase database].ArrayofActivities;
       for (ActiveCalories *info in CalorieSet) {
       NSLog(@"in app delegate");
       NSLog(@"%d: %@, %@", info.uniqueId, info.activity, info.calories);
       [_pickData addObject:info.activity];
       NSLog(@"array in the for loop %@", CalorieSet);
}

       NSLog(@"count here is %d", _pickData.count); 
```

# php - 在字符串中查找部分 INSERT 语句的位置

> ID：14618701
> 
> 赞同：0
> 
> 时间：2013-01-31T04:50:21.897
> 
> 标签：php, mysql, preg-match-all

我试图在 INSERT 语句中找到单词“VALUES”之后的字符串位置，这将是实际行数据之前的位置。

我知道我需要使用正则表达式来获取 INSERT 语句的模式，而不是使用 strpos 来查找单词“VALUES”，但是当涉及到正则表达式函数时，我有点新手。

**更新**

我想找到 ") VALUES (" 的位置，并在括号之间允许空格、\n、\r、\t 等，因为有时 VALUES 在新行上。

谢谢

SQL 文件：

```
# ------------------------------

# --
# -- Dumping data for table `table_a`
# --

INSERT INTO `table_a` (`a`, `b`, `c`, `d`) 
VALUES -- get position 
(1, 'b', 'c', 'd'),
(2, 'b', 'c', 'd'),
(3, 'b', 'c', 'd');

# ------------------------------

# --
# -- Dumping data for table `table_b`
# --

INSERT INTO `table_b` (`a`, `b`, `c`, `d`) VALUES -- get position 
(1, 'b', 'c', 'd'),
(2, 'b', 'c', 'd'),
(3, 'b', 'c', 'd'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:10:13.727

这应该可以解决问题：

```
$content = file_get_contents('/path/to/dump.sql');
$pattern = '/\)\s+VALUES\s+\(/U';
$matches = array();
$match_count = preg_match_all($pattern, $content, $matches, PREG_OFFSET_CAPTURE);

// trim off the parenthesis and whitespace from each match and add length of remaining portion of match string to the match offset to get offset at end of 'VALUES'
$offsets = array();
foreach($matches[0] as $match) {
    $offsets[] = $match[1] + strlen(rtrim(substr($match[0], 0, -1)));
} 
```

# sql - 在 Sql Server 中使用子查询更新查询

> ID：14618703
> 
> 赞同：92
> 
> 时间：2013-01-31T04:50:30.703
> 
> 标签：sql, sql-server, tsql, sql-update

**我有一个像这样的简单表结构：**

表**tempData**

```
╔══════════╦═══════╗
║   NAME   ║ MARKS ║
╠══════════╬═══════╣
║ Narendra ║    80 ║
║ Ravi     ║    85 ║
║ Sanjay   ║    90 ║
╚══════════╩═══════╝ 
```

而且我还有另一个表名像这样的**tempDataView**

```
╔══════════╦═══════╗
║   NAME   ║ MARKS ║
╠══════════╬═══════╣
║ Narendra ║       ║
║ Narendra ║       ║
║ Narendra ║       ║
║ Narendra ║       ║
║ Ravi     ║       ║
║ Ravi     ║       ║
║ Sanjay   ║       ║
╚══════════╩═══════╝ 
```

我想更新表**tempDataView**，通过 根据**tempDataView** - **Name**与**tempData** - **Name相比设置****标记**

 ******是的，让我向您展示我的尝试，我尝试使用 Cursor 解决这个问题，并且完美解决，但我正在寻找使用**Subquery解决它的方法**

这里是：

```
Declare @name varchar(50),@marks varchar(50)
Declare @cursorInsert CURSOR
set @cursorInsert = CURSOR FOR
Select name,marks from tempData
OPEN @cursorInsert
FETCH NEXT FROM @cursorInsert
into @name,@marks
WHILE @@FETCH_STATUS = 0
BEGIN
UPDATE tempDataView set marks = @marks where name = @name
FETCH NEXT FROM @cursorInsert
INTO @name,@marks
END
CLOSE @cursorInsert
DEALLOCATE @cursorInsert 
```

实际上，使用子查询解决它就像我的作业一样。

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2013-01-31T04:52:01.197

您甚至可以在`UPDATE`语句上加入两个表，

```
UPDATE  a
SET     a.marks = b.marks
FROM    tempDataView a
        INNER JOIN tempData b
            ON a.Name = b.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/618f8/1)

为了获得更快的性能，请在两个表上定义一个`INDEX`on 列。`marks`

使用`SUBQUERY`

```
UPDATE  tempDataView 
SET     marks = 
        (
          SELECT marks 
          FROM tempData b 
          WHERE tempDataView.Name = b.Name
        ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/ae4b9/1)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-01-31T05:00:12.100

因为您刚刚学习，我建议您练习将 SELECT 连接转换为 UPDATE 或 DELETE 连接。首先，我建议您生成一个连接这两个表的 SELECT 语句：

```
SELECT *
FROM    tempDataView a
        INNER JOIN tempData b
            ON a.Name = b.Name 
```

然后注意我们有两个表别名`a`和`b`. 使用这些别名，您可以轻松地生成 UPDATE 语句来更新表 a 或 b。对于表 a，您有 JW 提供的答案。如果要更新`b`，语句将是：

```
UPDATE  b
SET     b.marks = a.marks
FROM    tempDataView a
        INNER JOIN tempData b
            ON a.Name = b.Name 
```

现在，要将语句转换为 DELETE 语句，请使用相同的方法。下面的语句将只删除`a`那些按名称匹配的记录（保持 b 不变）：

```
DELETE a
FROM    tempDataView a
        INNER JOIN tempData b
            ON a.Name = b.Name 
```

您可以将 JW 创建的 SQL Fiddle 用作游乐场

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-02-12T19:01:10.300

在我的示例中，我找到了解决方案，因为我在更新和子查询方面遇到了同样的问题：

```
UPDATE
    A
SET
    A.ValueToChange = B.NewValue
FROM
    (
        Select * From C
    ) B
Where 
    A.Id = B.Id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T10:21:44.183

该主题的标题询问如何在更新中使用子查询。这是一个例子：

```
update [dbName].[dbo].[MyTable] 
set MyColumn = 1 
where 
    (
        select count(*) 
        from [dbName].[dbo].[MyTable] mt2 
        where
            mt2.ID > [dbName].[dbo].[MyTable].ID
            and mt2.Category = [dbName].[dbo].[MyTable].Category
    ) > 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-03T16:04:54.333

[这](https://www.postgresql.org/docs/9.5/static/sql-update.html)是更新操作的一个很好的解释，并带有一些示例。虽然它是 Postgres 站点，但 SQL 查询对其他数据库也有效。以下示例直观易懂。

```
-- Update contact names in an accounts table to match the currently assigned salesmen:

UPDATE accounts SET (contact_first_name, contact_last_name) =
    (SELECT first_name, last_name FROM salesmen
     WHERE salesmen.id = accounts.sales_id);

-- A similar result could be accomplished with a join:

UPDATE accounts SET contact_first_name = first_name,
                    contact_last_name = last_name
  FROM salesmen WHERE salesmen.id = accounts.sales_id; 
```

但是，如果 salesmen.id 不是唯一键，则第二个查询可能会给出意外结果，而如果有多个 id 匹配，则第一个查询保证会引发错误。此外，如果没有匹配特定的 accounts.sales_id 条目，第一个查询会将相应的名称字段设置为 NULL，而第二个查询根本不会更新该行。

因此，对于给定的示例，最可靠的查询如下所示。

```
UPDATE tempDataView SET (marks) =
    (SELECT marks FROM tempData
     WHERE tempDataView.Name = tempData.Name); 
```******

# gnuplot - 有没有办法让 gnuplot 使用 xaxis 时间数据，但跳过某些时间间隔（例如非交易时间）

> ID：14618708
> 
> 赞同：2
> 
> 时间：2013-01-31T04:51:15.037
> 
> 标签：gnuplot

我在交易时间内收集股票和期权的定价数据，并将它们附加到我用 gnuplot 绘制的数据文件中。该文件如下所示：

```
2013-01-30--15:58:14 38.68 0.64
2013-01-30--15:58:44 38.70 0.64
2013-01-30--15:59:15 38.70 0.64
2013-01-30--15:59:45 38.69 0.64 
```

自从市场关闭以来，我有很长一段时间没有收集任何数据。

当我使用 gnuplot 绘制这些数据时，使用 xdata 作为 timefmt，它显示从一天结束到另一天开始的巨大差距。

我宁愿让它在没有实际数据的日子里跳过那些时间......有没有办法做到这一点？

通过不在第一列中根据时间值绘制数据，我已经能够接近，但我想显示时间数据以及跳过未收集数据的那些时间。

我希望这是有道理的，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:27:48.347

如果我理解正确，您可以充分利用 x 上的断轴。

有两种方法可以获得断轴。第一个依赖三元运算符仅在您感兴趣的区域中绘制数据，在您的情况下甚至不需要，并将 xtics 向左移动以减少空白区域的维度。这是一个很好的教程：

[http://gnuplot-tricks.blogspot.com/2009/06/broken-axis-revisited.html](http://gnuplot-tricks.blogspot.com/2009/06/broken-axis-revisited.html)

第二个使用多图代替。这可能更适合您的需求。

[http://gnuplot-tricks.blogspot.com/2010/06/broken-axis-once-more.html](http://gnuplot-tricks.blogspot.com/2010/06/broken-axis-once-more.html)

希望能帮助到你。

# java - 如何删除列表中存在的空 bean 属性？

> ID：14618711
> 
> 赞同：2
> 
> 时间：2013-01-31T04:51:40.993
> 
> 标签：java, list, collections

我正在使用 Spring-WS 来填充`List<SomeBean>`一个 web 服务。我在使用该服务后获得的最终列表包含`null`其某些属性的条目。例如，考虑以下列表，`MangaBean`其中包含标题、作者和流派作为属性。

```
MangaBean [title=Bleach, author=Kubo Tite, genre=fantasy]
MangaBean [title=Naruto, author=Masashi Kishimoto, genre=action]
MangaBean [title=One Piece, author=Eiichiro Oda, genre=null]
MangaBean [title=Fairy Tail, author=Mashima Hiro, genre=null]
MangaBean [title=Rurouni Kenshin, author=Watsuki Nobuhiro, genre=Shounen]
MangaBean [title=Takamagahara, author=KAWAI Juuzou, genre=Supernatural]
MangaBean [title=Historys Strongest Disciple Kenichi, author=Matsuena Syun, genre=Martial arts]
MangaBean [title=Hajime no Ippo, author=Jyoji Morikawa, genre=null] 
```

一些 bean的`genre`条目是`null`. 我正在尝试删除列表中具有**空属性**的对象。我的问题是：

1.  通过删除特定条目来更改原始列表是否正确/良好？或者我应该在前一个列表中填充另一个列表？
2.  如果我应该更改列表并删除那些空条目，我应该怎么做？

我试过[了，](https://stackoverflow.com/questions/4819635/how-to-remove-all-null-elements-from-a-arraylist)但它失败了，因为对象引用本身不为空。我尝试了传统的 for 循环，但它无法删除具有空属性的附属对象。访问列表时无法使用增强的 for-loop 删除项目。请给我一些大脑。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:03:24.860

您可以使用迭代器并手动删除具有空类型的迭代器：

```
for (Iterator<MangaBean> it = mangas.iterator(); it.hasNext();) {
    if (it.next().getGenre() == null) { 
        it.remove(); 
    }
} 
```

或者您可以使用一些常用库（如 Apache Commons [CollectionUtils](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#filter%28java.util.Collection,%20org.apache.commons.collections.Predicate%29)或 Guava [Iterables.filter() ）](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#filter%28java.lang.Iterable,%20com.google.common.base.Predicate%29)过滤列表：

```
// apache commons
mangas = CollectionUtils.filter(mangas, new Predicate() {
    @Override public boolean evaluate(Object object) {
        return ((Manga) manga).getGenre() != null;
    }
});

// Guava 
Iterables.filter(mangas, new Predicate<Manga>() {
    @Override public boolean apply(Manga m) {
        return manga.getGenre() != null;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T05:05:20.550

`List`除非您不能相信 的来源`List`可以为您提供可变参考，否则从不好的做法中删除没有任何意义。

如果它是可变的（不是只读的），那么您可以使用[`Iterator`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)：

```
List<MangaBean> list = ...;
Iterator<MangaBean> iterator = list.iterator();

while (iterator.hasNext())
{
    MangaBean bean = iterator.next();

    if ( ! isValidMangaBean(bean))
    {
        iterator.remove();
    }
} 
```

该限制表现为从`List` *if*它是只读的中删除`List`。通过创建仅包含非`null`元素的副本，您可以保证不会遇到任何障碍，但如果不是只读的，则使用上述方法`Iterator`将起作用。`List`

```
List<MangaBean> list = ...;
List<MangaBean> cleaned = new ArrayList<MangaBean>();

for (MangaBean bean : list)
{
    if (isValidMangaBean(bean))
    {
        cleaned.add(bean);
    }
} 
```

可以扩展的参考函数：

```
boolean isValidMangaBean(MangaBean bean)
{
    return bean.getGenre() != null;
} 
```

如果您不断遇到上述情况，请考虑编写一个`Filter interface`可以让您更通用地执行上述过滤的方法。

# asp.net - 如何在asp.net中从服务器启用jqgrid过滤器工具栏的工作

> ID：14618714
> 
> 赞同：0
> 
> 时间：2013-01-31T04:52:02.617
> 
> 标签：asp.net, jqgrid, jqgrid-asp.net

嗨伙计们！！！我开发了一个 Jqgrid 到 diaplay 数据库。现在我想添加 JQgrid 过滤器工具栏以根据用户需要细化数据，所以我添加了过滤器工具栏。但是过滤器工具栏仅在“loadonce：true”表示本地与第一页数据时使用，而我希望它适用于整个数据库......来自服务器响应......

下面我发布我的代码以供参考...

```
$(function () {
        $("#UsersGrid").jqGrid({
            url: 'getGriddahico.ashx',
            datatype: 'json',
            height: 250,
            colNames: ['UserID', 'username', 'ordinal', 'authcode', 'extension', 'trunk', 'dialnumber', 'dialdate', 'dialtime', 'duration', 'destination', 'price', 'toc'],
            colModel: [
                    { name: 'UserID', index: 'UserID', width: 100, sortable: true, align: 'center',hidden:true },
                    { name: 'username', width: 100, sortable: true, align: 'center' },
                    { name: 'ordinal', width: 100, sortable: true, align: 'center' },
                    { name: 'authcode', width: 100, sortable: true },
                    { name: 'extension', width: 100, sortable: true, align: 'center' },
                    { name: 'trunk', width: 100, sortable: true, align: 'center' },
                    { name: 'dialnumber', width: 100, sortable: true, align: 'center' },
                    { name: 'dialdate', width: 100, sortable: true, align: 'center' },
                    { name: 'dialtime', width: 100, sortable: true, align: 'center' },
                    { name: 'duration', width: 100, sortable: true, align: 'center' },
                    { name: 'destination', width: 100, sortable: true, align: 'center' },
                    { name: 'price', width: 100, sortable: true, align: 'center' },
                    { name: 'toc', width: 150, sortable: true, align: 'center' }
                ],
            rowNum: 100,
            rowList: [100, 200, 300],
            pager: '#UsersGridPager',
            sortname: 'username',
            //loadonce: true,
            viewrecords: true,
            ignoreCase:true,
            sortorder: 'asc',
            autowidth: true,
            toppager: true,
            height: '100%'

        });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false, search: false });

        jQuery("#UsersGrid").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false });
    }); 
```

我的处理程序（.ashx）文件代码：

```
 int start=0;
                        int total=0;
                        int total_pages =0;

                        int intpage =Convert.ToInt32(request["page"]);
                        int limit=Convert.ToInt32(request["rows"]);
                       // int intpage = new Integer(request.getParameter("page"));
                        //int limit = new Integer(request.getParameter("rows"));

                        string sidx = request["sidx"];
                        string sord = request["sord"];

                       // String sidx = request.getParameter("sidx");
                        //String sord = request.getParameter("sord");

                        String strQuery="";
                        String json ="";

                      Boolean rc ;

                      MySqlDataReader rs;
                        //ResultSet rs = null;

                        if(sidx ==""){
                            sidx ="1";
                        }

                        /*-----------------------------------Conexión a la base de datos MySql-------------------------------------------*/
                        conexion  conexiondb = new conexion();
                        conexiondb.Conectar();
                        /*-----------------------------------------------------------------------------------------------------------*/

                        total = conexiondb.countRec("price", "processeddata_table");

                        if( total>0 ) {
                            double d = Math.Ceiling( (double)(total) / (double)(limit) );
                            total_pages = (int)(d);
                        } else {
                            total_pages = 0;
                        }

                        if (intpage > total_pages) {
                            intpage=total_pages;
                        }

                        start = limit * intpage - limit; 

                        if(start < 0 ){
                            start = 0;
                        }

                        //strQuery = "SELECT username,ordinal,authcode,extension,trunk,dialnumber,dialdate,dialtime,duration,destination,price,toc FROM processeddata_table ORDER BY username asc";

                        strQuery = "SELECT username,ordinal,authcode,extension,trunk,dialnumber,dialdate,dialtime,duration,destination,price,toc FROM processeddata_table ORDER BY " + sidx + " " + sord + " LIMIT " + start + " , " + limit;

                        rs = conexiondb.Consulta(strQuery);

                        total = conexiondb.countRec("price", "processeddata_table");

                        response.ContentType="text/x-json";
                        response.ContentType = "charset=utf-8";
                        //response.ContentEncoding="utf-8";
                        response.AddHeader("Pragma", "no-cache");
                        response.AddHeader("Cache-Control", "no-cache, must-revalidate");
                        response.AddHeader("Pragma", "no-cache");

                        json ="";
                        json = json + "{\n";
                        json = json + " \"page\":\""+intpage+"\",\n";
                        json = json + "\"total\":"+total_pages+",\n";
                        json = json + "\"records\":"+total+",\n";
                        json = json + "\"rows\": [";
                        rc =false;

                        while(rs.Read()){

                            if(rc){
                                json = json + ",";
                            }
                            json = json + "\n{";
                            json = json + "\"price\":\"" + Convert.ToInt32(rs["price"]) + "\",";
                            json = json + "\"cell\":[" + Convert.ToInt32(rs["price"]) + "";
                            json = json + ",\"" + Convert.ToString(rs["username"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["ordinal"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["authcode"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["extension"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["trunk"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["dialnumber"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["dialdate"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["dialtime"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["duration"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["destination"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["price"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["toc"]) + "\"]";
                            json = json + "}";

                            rc=true;
                        }
                        json = json +"]\n";

                        json = json +"}";

                        HttpContext.Current.Response.Write(json); 
```

请大家帮我解决这个问题..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:05:02.477

如果您使用`loadonce: true`选项，则数据将立即从服务器加载，以后对先前加载的数据的搜索、排序和分页将由 jqGrid*在本地实现。*

If you don't want to use `loadonce: true` option then you have to implement the features *in your server code*. In [the answer](https://stackoverflow.com/a/10871428/315935) for example you can find an example of such implementation in the code which uses ASHX like you do.

# iphone - 为什么 iTunes 中不显示应用程序图标？

> ID：14618715
> 
> 赞同：3
> 
> 时间：2013-01-31T04:52:09.167
> 
> 标签：iphone, ios, ios-simulator, itunes, ipa

嗨，我正在通过 iTunes 安装应用程序，但是当我将应用程序（.ipa 文件）添加到 iTunes 时，它不显示应用程序图标图像，而当我将应用程序安装到 iPhone 中时，它正在显示应用程序图标图像。

我可以知道问题出在哪里。

我希望在将 .ipa 文件添加到 iTunes 时显示图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T05:47:12.397

您是否添加了 iTunesArtwork 图标文件？

[http://developer.apple.com/library/ios/#qa/qa1686/_index.html](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

请注意，这必须是 512 x 512 png 图像，但它的名称是 iTunesArtwork，没有文件扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:25:53.500

如果你从 xcode 获取 ipa 文件并在 iTunes 中打开它，它不会在 iTunes 中显示图标图像，如果你通过与 iTunes 同步将它安装在你的 iphone 中，则会显示图标。

这是正常的事情。不要为此烦恼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T07:54:29.460

您必须添加 76x76、152x152、40x40、80x80、29x29、72x72、154x154、50x50、100x100 和 iTunesArtwork 才能看到应用程序的正确图标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T11:46:59.007

应添加命名为 iTunesArtwork(512 X 512) 和 iTunesArtwork@2x(1024 X 1024) 的应用图标，无需图像扩展。

# vb.net - 如何在继承图片框的自定义对象上加载图像？

> ID：14618722
> 
> 赞同：2
> 
> 时间：2013-01-31T04:52:52.790
> 
> 标签：vb.net, inheritance, picturebox

我正在尝试编写一个程序，该程序具有可扩展的图像提要，可以随时添加图片。在我咬掉那个块之前，我只是想用一个自定义图像类进行测试，它将在`picturebox`对象顶部保存一些额外的信息。我遇到的问题是我的对象（`oSlideItem`as `clsSlideItem`）继承了`picturebox`似乎没有在运行时加载图片。我尝试了两种不同的方法，这些方法在帮助和这个论坛上都提到了，但我似乎无法在运行时获得图片。我还没有找到任何提及我继承`picturebox`.

我尝试在加载图片之前设置图像位置和大小属性，没有改变任何东西。

由于我使用的是继承状态而不是本机图片框对象的功能，因此是否需要执行一些额外的步骤才能启动图片框图像？

如您所见，我还将这些图像保存对象放入一个集合中。我测试了加载图片而不将其放入集合中并且没有任何改变，所以我认为这不是问题。我假设一旦将对象添加到集合中，集合内的对象和集合外的对象就会解耦。我还没有为此做一个很好的测试。

```
Public Class clsSliders
Private clFeedItems As New Collection 'collection of all feed items
Private oFeed As New clsFeed 'feed organizer layer

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    'build Feed
    Dim oSlideItem As clsSlideItem 'feed item layer

    'make collection of slider objects
    oSlideItem = New clsSlideItem
    oSlideItem.setRank(1, oFeed)
    oSlideItem.ImageLocation = "C:\Users\nathan\Pictures\Chicago_River_from_Lake_Street_bridge.jpg"
    oSlideItem.Load()

    clFeedItems.Add(oSlideItem, 1)

    oSlideItem = New clsSlideItem
    oSlideItem.Image = Image.FromFile("C:\Users\nathan\Pictures\ReindeerPowerLines.png")
    oSlideItem.setRank(2, oFeed)

    'add to collection
    clFeedItems.Add(oSlideItem, 2)

    oSlideItem = New clsSlideItem
    oSlideItem.Image = Image.FromFile("C:\Users\nathan\Pictures\TianmenMountain.jpg")
    oSlideItem.setRank(3, oFeed)

    'add to collection
    clFeedItems.Add(oSlideItem, 3)

End Sub

'other subs and properties
End Class 
```

我的第二堂课：

```
Public Class clsSlideItem
Inherits PictureBox

Private iFeedRank As Integer 'current rank position

Public Sub setRank(rank As Integer, oFeed As clsFeed)
    If Not IsNothing(oFeed) Then
        Me.Left = oFeed.Left(rank)
        Me.Top = oFeed.Top(rank)
        Me.Width = oFeed.Width(rank)
        Me.Height = oFeed.Height(rank)
        iFeedRank = rank
    End If
End Sub

'other subs and properties
End Class 
```

`oFeed`as`clsFeed`基本上是我作为一个类编写的一个结构，这样我就可以拥有额外的功能。它实际上不在此问题的范围内，因为该部分代码正在运行。我没有包括它，因为我不想把这篇文章弄乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:22:41.323

看起来图片框从未添加到表单控件集合中。添加这个

```
Me.Controls.Add(oSlideItem) 
```

后

```
oSlideItem = New clsSlideItem 
```

在将控件添加到 Controls 集合之前，控件在窗体上不可见（或包含在窗体中）。我认为图像读取得很好，只是它们没有显示在表单上。您可以通过在加载后设置断点并查看 oSlideItem (Shift-F9) 的属性来查看。

# sql - 联合操作的列数相同

> ID：14618727
> 
> 赞同：12
> 
> 时间：2013-01-31T04:53:31.770
> 
> 标签：sql, sql-server-2008-r2, union, union-all

我正在经历联合和联合所有逻辑并尝试示例。令我困惑的是，为什么两个表中的列数必须相同才能执行联合或联合所有操作？

如果我的问题很愚蠢，请原谅我，但我无法在任何地方得到确切的答案。从概念上讲，只要存在一个公共列，合并两个表应该很容易对吧？（如连接操作）。但事实并非如此，我想知道为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T05:02:42.017

JOIN 操作不需要在两个表中选择相同数量的列。UNION 操作与连接不同。可以将其视为两个单独的数据列表，可以将它们“粘贴”到一个大块中。您不能有不匹配的列。

另一种看待它的方法是 JOIN 这样做：

```
TableA.Col1, TableA.Col2 .... TableB.Col1, TableB.Col2 
```

一个 UNION 这样做：

```
TableA.Col1, TableA.Col2
TableB.Col1, TableB.Col2 
```

JOINS 向行添加列，UNIONS 向现有行添加更多行。这就是为什么他们必须“匹配”。

马特

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T18:57:00.280

假设您有 EMPTable，其列和值如下：id、name、address、salary、DOB 1、'SAM'、'2 Merck Ln'、100000、'08/18/1980'

如果您只想使用列名进行 UNION（假设值是 'TOBY'），这意味着您必须将其他值默认为 NULL（智能软件或数据库可以为您隐式执行此操作），本质上转换为以下（防止关系表的完整性）->

```
1, 'SAM', '2 Merck Ln', 100000, '08/18/1980'
UNION
NULL,'TOBY', NULL, NULL, NULL 
```

根据定义，“联合”是同一类或类型的（不同）值的合并。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T05:02:11.673

加入运营`combines columns from two tables`。

其中 Union 和 Union all `combines two results sets`，所以为了组合两个结果，您需要具有相同数量的列和兼容的数据类型。

在现实世界中，例如，为了玩板球比赛，您需要两队都有 11 名球员，不允许一支球队有 7 名球员，不允许对方球队有 11 名球员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T05:02:25.327

`UNION`您需要研究和之间的区别`JOIN`。

基本上，`UNION`当您想从一个源（表、视图、表组等）获取记录并将这些结果与来自另一个源的记录组合时使用。它们必须具有相同的列才能获得一组共同的结果。

当您`JOIN`想将来自一个来源的记录与另一个来源连接时使用。根据您的需要，有几种类型的 JOIN（INNER、LEFT、RIGHT 等）。使用 JOIN 时，您可以指定所需的任何列。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T05:14:29.583

当我们想从两个或多个表中获取数据时，基本上使用连接，并且为此不需要获取相同数量的列，考虑使用规范化概念将表分为两部分的情况，

emp [eid, ename,edob,esal] emp_info [eid,emob_no]

在这里，我想知道姓名和手机号码。在所有员工中，我们将使用联接的概念，因为这里我们需要的信息不能由同一张表提供。

所以我们将使用..

SELECT E.ENAME,EI.EMOB_NO 从 EMP E, EMP_INFO EI WHERE E.EID = EI.EID AND LOWER(E.ENAME)='john' ;

现在考虑一下我们想要找到在银行拥有储蓄账户和贷款账户的员工的情况。这里我们想从两个表结果中找到常见的元组。为此，我们将使用集合操作。[路口]

对于集合操作，必须满足 2 个条件。

1.  相同的编号 必须从每个表中获取属性。

2.  每个属性的域必须相同或与更高的兼容...

# youtube-api - YouTube 的 player.loadPlaylist 和 cuePlaylist 自 2013 年 1 月 30 日起不起作用

> ID：14618728
> 
> 赞同：2
> 
> 时间：2013-01-31T04:53:34.017
> 
> 标签：youtube-api

如果这是解决此问题的错误地点，请原谅我，但 Google 已弃用的开发人员论坛建议我去这里。

以下是一些用于演示问题的高度简化的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script type="text/javascript">
            $(
                function() {
                    /*
                    This one second delay is just there to give the player time
                    to load.  It's more complicated in my proper implementation.
                    */
                    window.setTimeout(
                        function() {
                            var player = document.getElementById('player');
                            /*
                            Shocker, it doesn't work, regardless of playlist ID.
                            */
                            player.loadPlaylist(
                                {
                                    list:  'PL63FA01F86C3FE49A'
                                }
                            );
                        },
                        1000
                    );
                }
            );
        </script>
    </head>
    <body>
        <object data="http://www.youtube.com/apiplayer?enablejsapi=1&version=3" height="360" id="player" width="600">
            <param name="AllowScriptAccess" value="always">
            <param name="movie" value="http://www.youtube.com/apiplayer?enablejsapi=1&version=3">
        </object>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T17:08:57.373

我在本周的编码冲刺中偶然发现了这个问题：

loadPlaylist/cuePlaylist 方法**需要**list 参数和 listType 参数（在文档中不是很清楚）。

所以，代码：

```
player.loadPlaylist(
    {
         list:  'PL63FA01F86C3FE49A',
         listType: 'playlist'
    }
); 
```

应该可以正常工作，无论是 SWF 还是 HTML 嵌入。Jeff Posnick 关于他对这个问题的回答的建议当然也适用，但我已经测试过它在这两种情况下都可以工作。

listType 可以是“list”、“search”或“user_uploads”，list 分别表示列表 id 或视频 id 数组、搜索查询或用户 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:58:20.820

在进入问题之前对您的代码进行一些评论：首先，如果您确定需要使用 AS3 chromeless 播放器，您确实应该使用[SWFObject](https://code.google.com/p/swfobject/)将其添加到您的页面中，以确保同时使用正确的`<object>`和`<embed>`标签. 如果您只指定`<object>`标签，那么它只能在 Internet Explorer 中使用。

此外，您`onYouTubePlayerReader(playerId)`的代码中应该有一个处理程序来检测播放器何时完全加载并准备好响应 API 调用。这比尝试通过`window.setTimeout()`.

关于您的实际问题，我不确定无铬 AS3 播放器是否支持使用播放列表。这段代码以前工作过，最近停止了吗？[我想您使用iframe 嵌入式播放器](https://developers.google.com/youtube/iframe_api_reference)并指定`controls=0`您是否真的不想要控件（但隐藏控件会影响播放列表体验）会获得更好的体验。

# css - Drupal 聚合 css 不工作。所有样式都消失了（不，它不是重复的）

> ID：14618730
> 
> 赞同：0
> 
> 时间：2013-01-31T04:53:43.190
> 
> 标签：css, drupal, character-encoding, compression

我读过[这篇文章](https://stackoverflow.com/questions/4480562/drupal-aggregate-css-not-working-all-styles-gone)，它有一个公认的解决方案，但没有解决我的问题，所以，这就是我要开一个新问题的原因，因为我认为它们是相关的，但肯定不一样。

我已经安装了 Drupal 7。我有一个 Omega 子主题。我已将“在每个页面上重建主题注册表”设置为 ON。当我尝试启用 css 压缩时，主题消失了。不仅我自己的子主题消失了，而且管理主题也消失了（这是“七”核心主题）。

为了解决这个问题，我尝试过：

> 以 UTF-8 保存所有 css 文件。为此，我在每个 scss 文件的开头添加了这个：`@charset "UTF-8";`. 那条线在一切之前，甚至是评论。

[然后，我遵循了这个 drupal 帖子中的](http://drupal.org/node/986558)每一个建议：

**#12：**评论这些行：`#Header append Content-Encoding gzip`和`#Header append Vary Accept-Encoding`.

**#15：**在 settings.php:`$conf['css_gzip_compression'] = FALSE;`和这一行中添加这些行`$conf['js_gzip_compression'] = FALSE;`。

**#33：**手动删除 files/default/css 和 files/default/js 文件夹。

作为旁注，我想补充一点，我`@charset "UTF-8";`之前在我的旧共享主机（我现在有一个 VPS）中的 Drupal 6 安装中尝试过该解决方案，并且它有效。

我已经没有想法了，只是不知道我可以尝试什么......非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:50:22.447

删除css文件并再次添加它们（同时清除缓存）就可以了。

# .net - 将 ListBox 的项目添加到 DataTable

> ID：14618731
> 
> 赞同：0
> 
> 时间：2013-01-31T04:53:46.313
> 
> 标签：.net, datatable, listbox, fill

我在这里看到了很多关于使用 DataTable 填充列表框的问题，但是是否可以反其道而行之？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:03:18.260

你可以试试这个代码吗？

```
Dim dT as New DataTable
dT.Columns.Add("Sample")
For i as Integer = 0 To lstBox.Items.Count - 1
    Dim dR as DataRow = dT.NewRow
    dR(0) = lstBox.Items(i).ToString
    dT.Rows.Add(dR)
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:54:36.247

我认为这个示例为您提供了一些有用的东西....

```
DataTable sampledt = new DataTable();
        DataColumn sampleColumn = new DataColumn("Col1", typeof(string));
        sampledt.Columns.Add(sampleColumn);

        foreach (object item in listBox1.Items)
        {
            sampledt.Rows.Add(item);
        }
        int _datatable_rowCount = sampledt.Rows.Count; 
```

# asp.net - 在 asp.net mvc3 之间使用 cookie 传递值

> ID：14618735
> 
> 赞同：0
> 
> 时间：2013-01-31T04:54:35.107
> 
> 标签：asp.net, asp.net-mvc-3

是否可以在 asp.net mvc3 应用程序之间传递带有 cookie 的值（对象类型）？举例说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:41:46.353

假设两个 MVC 应用程序来自同一个域；是的。创建 cookie 时，应允许子域访问它。这不是 MVC 特定的限制，而是一般的 Web 限制。

您的浏览器将阻止来自不同域的页面访问彼此的 cookie。此外，浏览器会阻止您为其他域创建 cookie。例如，您的应用程序位于**domaina.com**中，而您尝试创建 cookie **domainb.com**将无法正常工作。

围绕这些限制有一些技巧和修改，但通常不推荐使用。

我建议您使用诸如[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)之类的插件/库来完成任务。上面有很多关于如何使用插件的例子。

干杯

# asp.net - 在具有 FK 关系的单个事务中插入多个表

> ID：14618740
> 
> 赞同：1
> 
> 时间：2013-01-31T04:55:06.890
> 
> 标签：asp.net, sql

我在插入多个表时为处理事务创建了 SP，但在下面出现异常

我的SP

```
ALTER PROCEDURE [dbo].[usp_Insert_BankData]
@xmlBankItems   XML ,
@xmlAccDetails XML,
@xmlPosition XML
AS
BEGIN
SET NOCOUNT ON;

DECLARE @TranStarted   bit
SET @TranStarted = 0

    IF( @@TRANCOUNT = 0 )
        BEGIN
            BEGIN TRANSACTION
            SET @TranStarted = 1
        END
    ELSE
        SET @TranStarted = 0

    INSERT INTO BankItem([BankItemId],[PortfolioId],[ItemIdentifier],[ItemDisplayName])
    SELECT  r.value('BankItemId[1]','uniqueidentifier'),r.value('PortfolioId[1]','uniqueidentifier'),
            r.value('ItemIdentifier[1]','bigint'),r.value('ItemDisplayName[1]','varchar(150)')
    FROM @xmlBankItems.nodes('bankItem') t(r)

    INSERT INTO BankAccountDetails (BankAccountId,BankItemId, AccountName,AccountDescription)
                    SELECT ac.value('BankAccountId[1]','uniqueidentifier'),ac.value('BankItemId[1]','uniqueidentifier'),
                            ac.value('AccountName[1]','varchar(150)'),ac.value('AccountDescription[1]','varchar(50)')
                    FROM @xmlAccDetails.nodes('accDetail') t(ac) 

    INSERT INTO Positions(PositionId,BankItemId,AccountCode,Ticker)
                    SELECT  p.value('PositionId[1]','uniqueidentifier'),p.value('BankItemId[1]','uniqueidentifier'),
                            p.value('AccountCode[1]','bigint'),p.value('Ticker[1]','varchar(50)')
                    FROM @xmlPosition.nodes('position') t(p) 

    IF( @@ERROR <> 0 )
        GOTO Cleanup

     IF( @TranStarted = 1 )
        BEGIN
            SET @TranStarted = 0
            COMMIT TRANSACTION
        END

    Cleanup:
        IF( @TranStarted = 1 )
        BEGIN
            SET @TranStarted = 0
            ROLLBACK TRANSACTION
        END
END 
```

- - - - - - - - -例外 - - - - - - - -

```
Violation of PRIMARY KEY constraint 'PK_BankAccountItems'. Cannot insert duplicate key in object 'dbo.BankItem'. The duplicate key value is (4bb6e35b-900b-4d0c-890e-48944abfe976).
Violation of PRIMARY KEY constraint 'PK_BankData_1'. Cannot insert duplicate key in object 'dbo.BankAccountDetails'. The duplicate key value is (952d89d6-bd3b-4408-b00d-644ab15ee9c0).
Violation of PRIMARY KEY constraint 'PK_Positions'. Cannot insert duplicate key in object 'dbo.Positions'. The duplicate key value is (4d030b2e-fbf3-40b7-9ae4-ab0aeb2138f0).
The statement has been terminated.
The statement has been terminated.
The statement has been terminated. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:58:23.103

听起来问题是错误中提到的表中已经存在重复数据。该错误给出了违反的键值。查询您的表以获取这些键 - 如果它们存在，则插入将失败，并且事务不会帮助您。

# java - ObjectOutputStream、ObjectInputStream 和标头

> ID：14618742
> 
> 赞同：2
> 
> 时间：2013-01-31T04:55:15.550
> 
> 标签：java, object, serialization

我试图更好地理解对象序列化，所以我正在练习我从教科书中得到的一些代码。（我的教科书没有解释每次程序启动时如何读取和写入/附加对象到序列化文件，这是我需要做的。）我采用了他们的程序，它只是用对象覆盖文件中的现有数据从当前会话中，并向其中添加代码，以便它将附加对象并改为读取整个文件。我在这里发现了一些非常有用的东西：[附加到 ObjectOutputStream](https://stackoverflow.com/questions/1194656/appending-to-an-objectoutputstream)但即使我创建了 ObjectOutputStream 的子类，重写 writeStreamHeader 方法，如果文件已经存在，则调用此子类，这就是他们所做的，它仍然会抛出 CorruptedStreamException。我的猜测是我需要将指针设置回文件的开头，但这似乎没有必要，因为只有一个 ObjectOutputStream。所以，我的问题是，我还需要做什么？

编辑：这是一些代码。

写数据.java

```
import java.io.*;
import java.util.Scanner;

public class WriteData 
{
    private int number;
    private String name; 
    private float money;
    private ObjectInputStream testopen;
    private ObjectOutputStream output;  //This is for the output. Make sure that
    //this object gets an instance of FileOutputStream so that it can write objects
    //to a FILE.
    private AppendObjectOutputStream appendobjects;
    static Scanner input = new Scanner(System.in);
    static DataClass d;

    public void openfile()
    {
        //Try opening a file (it must have the ".ser" extension).
        try
        {
            //output = new ObjectOutputStream(new FileOutputStream("test.ser"));
            testopen = new ObjectInputStream(new FileInputStream("test.ser"));
        }
        //If there is a failure, throw the necessary error.
        catch (IOException exception)
        {
            try 
            {
                output = new ObjectOutputStream(new FileOutputStream("test.ser"));
            } 
            catch (FileNotFoundException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
            catch (IOException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }   //end case createfile
        if (testopen != null)
        {
            try 
            {
                testopen.close();
                appendobjects = new AppendObjectOutputStream(
                        new FileOutputStream("test.ser"));
            } 
            catch (FileNotFoundException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
            catch (IOException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
    public void writedata()
    {
        //write the data until the user enters a sentry value.
        System.out.println("Enter CTRL + z to stop input.\n");
        System.out.print ("Enter the data in the following format: " +
                "account_number name balance\n->");
        while (input.hasNext())
        {
            System.out.print ("Enter the data in the following format: " +
                        "account_number name balance\n->");
            try
            {
                number = input.nextInt();
                name = input.next();
                money = input.nextFloat();

                //Make object with that data
                d = new DataClass(number, name, money);
                //write it to the file
                if (output != null)
                {
                    output.writeObject(d);
                }
                else if (appendobjects != null)
                {
                    appendobjects.writeObject(d);
                }
            }
            catch (IOException e)
            {
                System.out.println("Error writing to file.");
                return;
            }
        }
        System.out.println("\n");
    }   //end writedata
    public void closefile()
    {
        try 
        {
            if (output != null)
            {
                output.close();
            }
            else if (appendobjects != null)
            {
                appendobjects.close();
            }
        }
        catch (IOException e)
        {
            System.out.println("Error closing file. Take precautions");
            System.exit(1);
        }
    }
} 
```

数据类.java

```
import java.io.Serializable;

public class DataClass implements Serializable
{
    private int someint;
    private String somestring;
    private float somefloat;
    public DataClass(int number, String name, float amount) 
    {
        setint(number);
        setstring(name);
        setfloat(amount);
    }
    public void setint(int i)
    {
        this.someint = i;
    }
    public int getint()
    {
        return someint;
    }
    public void setstring(String s)
    {
        this.somestring = s;
    }
    public String getstring()
    {
        return somestring;
    }
    public void setfloat(float d)
    {
        this.somefloat = d;
    }
    public float getfloat()
    {
        return somefloat;
    }
} 
```

AppendObjectOutputStream.java

```
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.FileOutputStream;

public class AppendObjectOutputStream extends ObjectOutputStream 
{
    public AppendObjectOutputStream(FileOutputStream arg0) throws IOException 
    {
        super(arg0);
        // TODO Auto-generated constructor stub
    }
    //This is a function that is default in ObjectOutputStream. It just writes the 
    //header to the file, by default. Here, we are just going to reset the 
    //ObjectOutputStream
    @Override
    public void writeStreamHeader() throws IOException
    {
        reset();
    }

} 
```

读取数据.java

```
import java.io.*;
import java.util.Scanner;

public class ReadData 
{ 
    private FileInputStream f;
    private ObjectInputStream input;    //We should the constructor for this 
    //object an object of FileInputStream
    private Scanner lines;
    public void openfile()
    {
        try
        {
            f = new FileInputStream("test.ser");
            input = new ObjectInputStream (f);
            //input.reset();
        }
        catch (IOException e)
        {
            e.printStackTrace();
            System.exit(1);
        }
    }
    public void readdata()
    {
        DataClass d;
        System.out.printf("%-15s%-12s%10s\n", "Account Number", "First Name",
                "Balance");
        try
        {
            while (true)
            {
                d = (DataClass)input.readObject();  //define d
                //read data in from d
                System.out.printf("%-15d%-12s%10.2f\n", d.getint(), d.getstring(),
                        d.getfloat());
            }
        }
        catch (EOFException eof)
        {
            return;
        } 
        catch (ClassNotFoundException e) 
        {
            System.err.println("Unable to create object");
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }

    }
    public void closefile()
    {
        try
        {
            if (input != null)
            {
                input.close();
            }
        }
        catch (IOException ex)
        {
            System.err.println("Error closing file.");
            System.exit(1);
        }
    }
} 
```

序列化测试.java

```
public class SerializationTest 
{

    public static void main(String[] args)
    {
        ReadData r = new ReadData();
        WriteData w = new WriteData();
        w.openfile();
        w.writedata();
        w.closefile();
        r.openfile();
        r.readdata();
        r.closefile();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:05:56.637

我建议这样做

```
 ObjectOutputStream o1 = new ObjectOutputStream(new FileOutputStream("1"));
    ... write objects
    o1.close();
    ObjectOutputStream o2 = new AppendingObjectOutputStream(new FileOutputStream("1", true));
    ... append objects
    o2.close(); 
```

它绝对有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:06:34.610

```
import EJP;
import Evgeniy_Dorofeev;

public class answer
{
    private String answera, answerb;
    public answer(String a, String b)
    {
        answera = a;
        answerb = b;
    }
    public void main(String[] args)
    {
        answer(EJP.response(), Evgeniy_Dorofeev.response());
        System.out.println(answera + '\n' + answerb);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:22:21.403

在追加的情况下，您需要为 new FileOutputStream() 的追加参数添加一个“真”。否则你不是。附加，就是这样。

# mongodb - 如何检查字段是否包含空值？- pymongo

> ID：14618745
> 
> 赞同：6
> 
> 时间：2013-01-31T04:55:21.533
> 
> 标签：mongodb, null, pymongo, isnull

有时我的文档有一个包含空值的字段。

*   **如何检查字段内的值是否为空字符串？**
*   **如果文档具有空字符串值，如何遍历所有文档并删除文档的字段？**
*   **我应该删除这个文档的这个字段，以便我可以这样做来找到空字段吗？** `for i in v7.find({"eng":{"$exist":True}})`

我的文档结构的一个例子是这样的：

```
{ "_id" : ObjectId("50fd55c1161747668078fed6"), 
"dan" : "Hr. Hänsch repræsenterede Dem dér .", 
"deu" : "Der Kollege Hänsch hat Sie dort vertreten .", 
"eng" : "Mr Hänsch represented you on this occasion .", 
"fin" : "Kollega Hänsch edusti teitä siellä .", 
"ita" : "Il collega Hänsch è intervenuto in sua vece .", 
"md5" : "336b9cd1dc01ae0ff3344072d8db0295", 
"uid" : 2100986 }

{u'uid': 104, 
u'fre': u"Je crois que la pr\xe9vention est d' une importance capitale , et ce non pas \xe0 cause des criminels \xe0 la t\xeate du pouvoir .", 
u'eng': u'', 
u'dan': u'Som hr .', 
u'deu': u'.', 
u'ita': u"L' emendamento n .", 
u'nld': u'Dat gebied is de Balkan van de toekomst , een Balkan op wereldschaal .', 
u'spa': u'\xa1 Y no por los criminales que se hallan al frente de las instituciones !', 
u'_id': ObjectId('50fd381f161747668058f043'), 
u'fin': 
u'.', u'md5': u'd41d8cd98f00b204e9800998ecf8427e'} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T08:00:44.847

根据 mongodb 的手册，以下查询实现了这一点：

```
db.test.find( { eng : { $type: 10 } } ) 
```

该查询仅返回包含空值的文档：

{ field : { $type: 10 } } 查询仅匹配包含值为 null 的字段的文档；即该字段的值为BSON Type Null（即10）

> [http://docs.mongodb.org/manual/faq/developers/#faq-developers-query-for-nulls](http://docs.mongodb.org/manual/faq/developers/#faq-developers-query-for-nulls)

# css - iPad 肖像 css 样式不起作用

> ID：14618751
> 
> 赞同：0
> 
> 时间：2013-01-31T04:55:47.667
> 
> 标签：css, ipad, media-queries, portrait

通过 iPad 在纵向模式下，我需要将 div 浮动到左侧。无论插入什么代码，都不会改变。这就是我正在做的事情：

```
 @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
  .logos{
     float: left;
   }
 } 
```

我正在开发的网站：[http ://rachelsilberman.com/rob-anolik/](http://rachelsilberman.com/rob-anolik/)

当有人在 iPad 上时，“logos” div 会向下推，我需要它向左浮动，以便与联系人 div 对齐。

我一直在使用 ipadpeek.com 来查看结果，因为我自己没有。希望这不会有什么不同。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:00:51.307

您应该将属性添加到您的 ipad css，如下所示：

```
 @media only screen and (min-device-width: 768px) 
and (max-device-width: 1024px) and (orientation:portrait) {
      .logos{
         float: left;
       }
     } 
```

IPAD CSS 的一般规则如下：

```
<link rel="stylesheet" media="all and (orientation:portrait)" href="portrait.css">
<link rel="stylesheet" media="all and (orientation:landscape)" href="landscape.css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T04:09:02.173

我今晚想通了。这可能对其他人有所帮助。我必须在 library.php 文件中注释掉以下行：

```
<!--<link rel="stylesheet" href="<?php echo get_template_directory_uri()?>/css/tablet.css" type="text/css" media="screen and (min-width:640px) and (max-width:1023px)" />!--> 
```

在此之后，一切都引用了我想要的主要 style.css 表。我包括了两个陈述：

```
@media only screen and (min-width:641px) and (max-width:1023px) and (orientation:portrait) { 
```

和

```
@media (max-device-width: 600px) and (orientation: portrait) { 
```

由于我在 Blackberry Playbook 与 iPad 上观察到的问题，我不得不介绍第二条 @media 行。我只是在 style.css 代码的这些部分中调整了值，瞧！最终一切正常。

这是一个关于不同尺寸屏幕的好网站：http: [//nmsdvid.com/snippets/](http://nmsdvid.com/snippets/)

# c# - 无法从 LoginView 中的 LoginTemplate 访问控件

> ID：14618753
> 
> 赞同：0
> 
> 时间：2013-01-31T04:56:06.743
> 
> 标签：c#, asp.net

aspx 页面中的代码

```
<asp:LoginView ID="loginView1" runat="server" EnableViewState="false">

          <LoggedInTemplate>
                <asp:Button ID="btnWatchlist" runat="server" Text="+ Watchlist"  />
                <asp:Button ID="btnPM" runat="server" Text="PM" />
                <asp:Button ID="btnEdit" runat="server" Text="Edit" />
                <asp:Button ID="btnReport" runat="server" Text="Report" />
          </LoggedInTemplate>
</asp:LoginView> 
```

在 aspx.cs(Codebehind) 中访问按钮 ID 的代码

```
Button watchList = (Button)loginView1.FindControl("btnWatchlist");
Button pm = (Button)loginView1.FindControl("btnPM");
Button report = (Button)loginView1.FindControl("btnReport");
Button edit = (Button)loginView1.FindControl("btnEdit"); 
```

watchList,pm,report,edit 得到空值。我的代码有错误吗？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:26:39.867

也许是个愚蠢的问题，但是您登录到您的网站了吗？在测试时，我注意到控件仅在登录时可见，因此在 Page_Load 中使用 FindControl 不会找到控件，除非我已登录。

# php - CakePHP 简单、易链接

> ID：14618754
> 
> 赞同：0
> 
> 时间：2013-01-31T04:56:07.333
> 
> 标签：php, cakephp, cakephp-2.0, constants, cakephp-2.1

我不喜欢 Html->link() 方法。我很欣赏它，但它使代码变得丑陋，我不相信如此基本的东西应该需要一种方法。但是，在我的项目中，我发现如果我想拥有正确的 URL，我必须使用它。我会接受这一点，但我想知道在继续在这个（大型）项目中建立链接之前我必须这样做。

我试图[找到一些](https://stackoverflow.com/questions/6836990/how-to-get-complete-current-url-for-cakephp)在视图中获取 cakeURL 的方法。什么都没解决。

我的目标是从此开始：

```
<?=$this->Html->link('quality view', array('controller' => 'quals', 'action' => 'show')); ?> 
```

对此：

```
<a href="<?=URL.'quals/show'?>"> 
```

但是，如果我更改页面的 URL，我将无法编写或找到一种方法来使这种持续工作。（即使是访问 /quals/ 和 /quals 也会显示不同的 URL）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:41:16.260

我也不喜欢链接方法，我发现在我的链接中添加类、id 和 target="_blank" 等属性有点过头了。

我这样做是为了链接：

```
<a class="myclass" href="<?php echo $this->Html->url(array('controller'=>'my_controller','action'=>'my_action','plugin'=>false)); ?>">My Anchor Text</a> 
```

所以，我仍然使用 HTML 助手来获取 URL，但是我自己编码的 html 元素。我建议这样做，而不是对 URL 进行硬编码。这是 Cake 的做法，它允许您充分利用 Cake 在 routes.php 中的内置路由功能，并创建漂亮的路由，而无需在多个地方硬编码或记住它们。

它还使其他人将来更容易查看您的代码 - 例如。硬编码的“quals/show”链接是否引用了您的 webroot 中的 quals/show 目录？还是指 quals 控制器的 show 动作？（当您开始使用插件时，它只会变得更加复杂）。如果您使用 html 帮助程序来创建 URL，那么所有这些内容都会立即清晰。

如果你想让它看起来整洁，你可以把它分成两行，如下所示：

```
<?php $url = $this->Html->url(array('controller'=>'my_controller','action'=>'my_action','plugin'=>false)); ?>
<a class="myclass" href="<?php echo $url; ?>" >My Anchor Text</a> 
```

如果您有一个大型项目，则更有理由使用 Cake 的 URL 助手。现在这似乎是一个好主意，但硬编码它们会在未来的某个时候让你头疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:44:04.457

使用时实际上有非常严重的考虑`HtmlHelper::link()`！

当您使用 HtmlHelper 构建链接时：

*   您有一个中央平台来定义应用程序中的所有路线。URL 结构将始终与`Config/routes.php`. 当您更改某些内容时，网站中的所有链接都会自动反映这些更改
*   反向路由
*   易于应用维护
*   搜索引擎优化/站点地图

因此，如果您使用它，您就可以通过微小的更改来更改应用程序的结构，否则，如果您更改一个链接，则必须遍历所有使用它的地方并手动更改它。

正如@joshua.paling 所说，对 URL 进行硬编码不是一个好主意，因为对结构进行任何更改都会让您头疼。最好是使用 HtmlHelper 的[link()](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3alink)和/或[url()](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3aurl)方法。

# c# - 如何在 C# ASP.NET 中从 gridview 的页脚行中查找文本框的值

> ID：14618757
> 
> 赞同：1
> 
> 时间：2013-01-31T04:56:41.000
> 
> 标签：c#, asp.net

```
 <FooterTemplate>
            <asp:TextBox ID="txtSName" runat="server" Text=""/>
        </FooterTemplate> 
```

代码隐藏代码如下：

```
TextBox txtName = (TextBox)(GridView1.FooterRow.FindControl("txtSName"));
string aa=txtName.Text; 
```

每次`aa`都是`null`。

我将这段代码放入以下内容：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
} 
```

请帮我..........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:50:14.327

试试这段代码，它可能会起作用：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            TextBox txtName = GridView1.FooterRow.FindControl("txtSName") as TextBox;
            string aa = txtName.Text;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:26:00.390

尝试这个 ：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
     TextBox txtName = (TextBox)e.Item.FindControl("txtSName");
} 
```

让我知道它是否有效。你用这个来`add/update`记录吗？

# objective-c - 在字符串中搜索特定的最后一个字符

> ID：14618764
> 
> 赞同：0
> 
> 时间：2013-01-31T04:57:46.960
> 
> 标签：objective-c

我想在 NSString 中搜索特定的最后一个字符，但找不到方法。例如，在 C# 中，我可以执行 lastindexof 来获取我正在搜索的 char 的索引，然后使用 substring 来获取我想要的内容。Obj C 中有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:09:53.503

```
NSString *s = @"aabbcc";
[s rangeOfString:@"b" options:NSBackwardsSearch]; // {3, 1} 
```

# c - 如何舍入浮点数的显示以使最后两位数字始终为“00”？

> ID：14618766
> 
> 赞同：2
> 
> 时间：2013-01-31T04:57:50.877
> 
> 标签：c, numbers, rounding

我需要用 C 编写一个程序来执行以下操作：

编写一个程序，当用户输入一个浮点数时，它会将数字四舍五入到小数点后 3 位。显示结果时，显示小数点后 5 位，即第 4 位和第 5 位小数都为 0。

如何将其四舍五入到小数点后 3 位，然后显示两个零？我不允许使用任何类型的数学库函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:07:18.283

```
printf("%.5f\n",(int)(number*1000+0.5)/1000.0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T05:11:15.500

好吧，“没有数学”方法：D

```
printf("%.3f00\n", n); 
```

（通常服从[Round-to-Nearest-Even](https://stackoverflow.com/questions/10357192/printf-rounding-behavior-for-doubles/10357252#10357252)；见 R.. 的评论。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:09:03.007

您的任务有两个步骤：

1) 将数字四舍五入到小数点后三 (3) 位。

```
double n = 0.123456;
n = ((int) (n * 1000.0)) / 1000.0; // => 0.123 
```

2) 将数字显示到小数点后五 (5) 位。

```
printf("%.5f\n", n); // => 0.12300 
```

# iphone - 对模拟器和基础 SDK 感到困惑？

> ID：14618771
> 
> 赞同：0
> 
> 时间：2013-01-31T04:58:32.047
> 
> 标签：iphone, ios, objective-c, ios-simulator

我想知道 iPhone Simulator 版本（即 iPhone 5.0 Simulator、iPhone 6.0 Simulator 等）和 Base SDK 是否相互关联？

那么，如果我使用 Base SDK 6.0 开发应用程序并在 iPhone 5 Simulator 上对其进行测试——这是否意味着我正在使用 iOS 5.0 的设备上对其进行测试？

请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:03:46.237

**基础 SDK**

*基础 SDK 是编译应用程序时将使用的 SDK 版本——编译器将使用此特定 SDK 的头文件和库。*

**iPhone OS 部署目标**

要指定应用程序支持的最低操作系统版本，请设置部署目标。然后，您的应用程序将在此最低操作系统以及所有更高版本上运行。*

有关更多信息，请查看：- [链接](http://mobiledevelopertips.com/xcode/base-sdk-and-iphone-os-deployment-target-developing-apps-with-the-4-x-sdk-deploying-to-3-x-devices.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:06:49.680

没有。使用 6.0 的基础 SDK 意味着您正在使用带有 iOS6.0 的模拟器，例如，如果您要在带有 iOS 5.1 及更低版本的移动设备上部署带有基础 SDK 6.0 的应用程序，您将无法运行它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T06:45:09.430

基础 SDK 是您的编译器允许您使用哪些 API 的指标。部署目标确定允许运行此应用的最低操作系统版本。如果它们不同，您需要确保在代码中只使用旧操作系统上已经存在的函数/类/方法/符号。否则应用程序将因“无法识别的选择器”等异常而崩溃

您的问题不准确：没有“iPhone 5 Simulator”。有一个模拟器应用程序可以在各种操作系统版本级别上像 4" iPhone 5 一样运行。设置为 iOS 5.x 的模拟器将像具有此操作系统版本的设备一样运行。

# asp.net - 如何确保 Visual Studio 将依赖项的依赖项复制到输出文件夹？

> ID：14618772
> 
> 赞同：0
> 
> 时间：2013-01-31T04:58:41.063
> 
> 标签：asp.net, visual-studio-2010, msbuild

我正在使用 Visual Studio 2010 来管理 Web 应用程序。这个 Web 应用程序被组织成多个项目，其中 UI 本身是一个项目，业务逻辑驻留在另一个程序集中，然后将其设置为 UI 的项目引用，并调用第三方中的代码图书馆。

当我进行部署构建时，MSBuild 会创建常用的 _PublishedWebsites 文件夹并将 Web 应用程序复制到该文件夹​​中。它没有做的是复制业务层的依​​赖关系，这意味着当我尝试运行应用程序时会出现令人讨厌的 YSOD。现在，我可以将第三方库设置为 UI 项目的引用，这样可以确保按预期复制和部署库 - 但是，这反而错过了让业务层完成所有工作的重点，并且意味着额外的维护在添加另一个第三方库时，需要在多个地方添加它。

在运行部署构建时，如何一劳永逸地确保将我的业务层的依​​赖项部署到 _PublishedWebsites 文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T04:57:53.573

根据我对@Shaun Plourde 回复的评论，似乎不支持这种情况。如果您希望间接引用的程序集出现在生成输出中，则需要直接引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T21:08:24.113

It isn't a perfectly automated solution, but you can solve this with a post-build script on your main project.

I've found that the `$(WebProjectOutputDir)` variable is managed such that it resolves to the "_PublishedWebsites" directory when you supply an output directory that is not equal to the directory of the project being built. (Otherwise, it is the same as the current project directory.) So, for your problem, you could put this in the post build of your web application:

```
xcopy /Y /S "$(ProjectDir)..\Your Business Logic Project\bin" "$(WebProjectOutputDir)\bin" 
```

It should work both on your machine and on your build server.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:31:54.003

这应该在 VS.NET 中开箱即用。尝试在实际需要依赖项的地方将“复制本地”设置为 true。您的 UI 项目不应要求对这些程序集进行任何显式引用。

对于较小的项目，这可能会在编译性能方面很好地扩展。对于较大的项目，您可能需要考虑替代方法，例如 Patrick Smacchia 在[http://www.simple-talk.com/dotnet/.net-framework/partitioning-your-code-base-through- 上的文章中概述的方法。网络组装和视觉工作室项目/](http://www.simple-talk.com/dotnet/.net-framework/partitioning-your-code-base-through-.net-assemblies-and-visual-studio-projects/)。

# php - jQuery 选项卡中的 PHP

> ID：14618773
> 
> 赞同：1
> 
> 时间：2013-01-31T04:58:43.807
> 
> 标签：php, jquery, tabs

我想创建按钮以添加带有正文选项卡的选项卡
请查看上面显示的代码

```
$('#tabs1').tabs('add', 'lorem.txt', xxxxx' ..... 
```

如您所见`'lorem.txt'`，从检索信息以显示在正文选项卡中的位置，
我想将`php`代码和表单放入`tabs body`其中而不使用`'lorem.txt'`
问题是，如果我将 php 代码放入 jquery 它将不起作用。

`php`我的问题是，当人们单击按钮添加时，还有其他方法可以使用代码显示表单`tabs`吗？
我正在使用`div`标签。这是我的代码。

```
<script>
(function() {
    $(function() {
        var tab_counter = 0;
        $('#tabs1').tabs({
            closable: true,
            cache:true,
            add: function(e, ui){
                $('#tabs1').tabs('select', '#' + ui.panel.id);
            }
        });
        $('#tab_creator').click(function(){
            tab_counter += 1;
            $('#tabs1').tabs('add', 'lorem.txt', 'Tab ' + tab_counter);
            return false;
        });
        $('#tabs2').tabs();
    });
})(jQuery);
</script>

</head>

<body>

<h2 class="ui-widget ui-widget-header">closable Tabs</h2>
<input id="tab_creator" type="button" value="Add New Tab">
<div id="tabs1">
    <ul>
    <li><a href="#tabs1-1">tabs one</a></li>
    <li><a href="#tabs1-2">tabs two</a></li>
    <li><a href="#tabs1-3">tabs three</a></li>
    </ul>
    <div id="tabs1-1">
        <p> tabs one body</p>
    </div>
    <div id="tabs1-2">
        <p>tabs two body</p>
    </div>
    <div id="tabs1-3">
        <p>tabs three body</p>
    </div>
</div>
<br>
<br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:16:56.623

如果JS代码直接放在`<head>`（如你的例子）：

```
$('#tabs1').tabs('add', '<?php echo $filename; ?>', 'Tab ' + tab_counter); 
```

否则，你需要这样的东西：

```
$('#tabs1').tabs('add', $( '#tabs1' ).attr( 'data-filename' ), 'Tab ' + tab_counter); 
```

...您将 PHP 代码放在 #tabs1 中的 data-filename 属性中的位置：

```
<div id="tabs1" data-filename="<?php echo $filename; ?>"> 
```

关于数据属性：[谷歌](https://www.google.com/search?q=html5+data)

# domain-driven-design - DDD中Repository的职责（EntityFramework）

> ID：14618783
> 
> 赞同：1
> 
> 时间：2013-01-31T05:00:07.357
> 
> 标签：domain-driven-design

1.  实体 Foo 和 Bar 都是聚合根
2.  Foo 参考吧
3.  SomeService 执行以下操作。调用 FooRepository.FindId() 以获取 Foo b 的实例。修改 Foo 实例，并对 Foo 实例引用的 Bar 实例进行一些修改 c. 调用 FooRepository.Update(Foo) 以持久化对 Foo 实例所做的更改

问题： 1\. 知道 Foo->Bar，FooRepository.FindId() 将如何（应该）构造 Foo 实例和它引用的 Bar 实例？（假设使用了 EntityFramework 并且据我了解 EntityFramework 会自动构建实体及其依赖项） 2\. 鉴于 Foo 实例引用了 Bar 实例，FooRepository.Update() 是否也应该保留对 Bar 实例所做的更改？如果答案是否定的，假设 Entity Framework 是用于数据库访问的技术，SomeService 将如何告诉存储库（或更准确地说是 EntityFramework）忽略 Bar 的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:57:54.640

在阅读[了 Vaughn Vernon 的 Effective Aggregate Design](http://domaindrivendesign.org/library/vernon_2011)之后，它让我对设计聚合有了一些了解。

作为一项规则，我将通过它的身份来引用 Bar。如果要改变它的嘘状态，我只会从 BarRepository 中得到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:09:05.850

1.  **正如rantri**所指出的，不鼓励不同聚合之间的对象引用。最好使用身份参考。这是因为聚合需要是一个一致性边界，如果有多个聚合在起作用，这将变得难以实施。

2.  EF 应该能够更新引用的 Bar 实体。我知道在 NHibernate 中，这被称为可达性持久性，可以启用或禁用。然而，这是有问题的，因为它使推理实体如何以及何时持久化变得更加困难。告诉某些东西忽略对 Bar 的更改的最好方法是避免直接引用 bar。很多时候，引用像 Bar 这样的东西的唯一原因是出于显示目的。在这种情况下，最好使用专用的[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)而不是污染域对象。如果 Foo 上的行为需要 Bar 引用，那么最好让周围的应用程序服务直接向它提供 Foo 需要的数据。

# php - php 购物车 应用开发

> ID：14618785
> 
> 赞同：-4
> 
> 时间：2013-01-31T05:00:12.643
> 
> 标签：php, cart, shopping

我要开发购物车应用程序。我读过他们使用**Smarty**框架的书。是最新的框架吗？什么是**zend**框架？. 请回答我需要做什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:14:18.347

这里有很多事情需要考虑。

*   你的编程经验是什么？
    *   您以前使用过大型 Web 应用程序吗？（我想说几乎所有的在线商店都可以被认为是大型网络应用程序）
    *   您是否使用过支付集成？
    *   您是否曾在设置托管环境方面工作过？
*   您的项目的预算是多少？
*   你是唯一一个在这个项目上工作的人吗？
*   您的客户对成品的期望是什么？
*   当商店在线时，谁来管理托管、支持、维护等？

建立在线商店绝非易事。一个像这样流程的小商店`add product to cart -> go to checkout -> pay using a third part payment provider`可以很容易和快速地完成。但这里有一些更多的考虑：

*   运输方式，应该有多种吗？
*   该站点必须处理多个国家/地区，在这种情况下，您必须考虑增值税、再次运输等。
*   付款方式：信用卡、短信、发票、贝宝，不胜枚举。应该提供哪些服务？如果您希望直接实现（SSL 证书等），这将需要一个良好的托管环境。
*   在后端处理订单、退货和产品
*   折扣功能，例如折扣码
*   能够销售捆绑在一起的多种产品。

我可以继续一段时间，让列表越来越具体，但我真的没有时间这样做:) 这只是为了向你展示，在构建时有很多因素可以发挥作用一个在线商店。

## [Magento](http://www.magentocommerce.com/)

如果您是经验丰富的开发人员并且熟悉 Zend 框架（它是基于该框架构建的），那么这是一个很好的选择。看看 Magento 的[功能](http://www.magentocommerce.com/product/enterprise-features)，如果您知道如何正确自定义它，Magento 几乎一切皆有可能。如果您不熟悉它并且学习曲线非常陡峭，这不是一件容易的事。

**如果您没有经验或商店不需要所有高级功能，这是一个糟糕的选择。**这是一种资源消耗，如果您不知道您的缓存，您将度过一段糟糕的时光。

## [Shopify](http://www.shopify.com/)

如果您需要在稳定的环境中快速设置在线商店，并且您可以满足他们提供的[功能](http://www.shopify.com/tour/sell-online)，我会说这是您的最佳选择。好吧，实际上我会说至少 90% 的时间，这将是最好的选择。

您不必担心支付实施、后端开发、支持、托管以及所有其他相关的事情。

## 结论

我在这里只列出了 2 个选项，一个是高级的，一个是简单的。我认为您应该真正研究不同的选择。看看他们的功能，他们的成本等。然后你必须考虑到你完成商店所需的时间。

至少我希望我能给你一些观点，如果你对我写的内容有任何疑问，请告诉我。

从[这里提取](https://stackoverflow.com/questions/12684919/shopping-cart-framework)

# mysql - 如何为heroku配置开发和部署数据库？

> ID：14618787
> 
> 赞同：1
> 
> 时间：2013-01-31T05:00:18.640
> 
> 标签：mysql, django, postgresql, heroku

我今天开始玩 Heroku。我对如何设置我的开发环境和部署有点困惑。

我正在开发一个 django 应用程序。不是 RoR 哈哈。

我应该使用 mysql 数据库进行开发并使用 postgres 进行部署吗？或者我应该把它们都保留为postgres？我应该记住什么？

部署数据库配置和运行本地测试有什么技巧或技巧吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:31:59.983

你可以做任何一种方式。要么拥有`mysql`/`sqlite`用于开发和`postgres`生产，要么拥有`postgres`两者。取决于你对什么感到舒服。

唯一需要确保的是分离开发和生产所需的相关宝石。

`mysql`用于开发和生产时 Gemfile 的部分内容`postgres`：

```
group :production do
  gem 'pg', '0.11.0'
end

group :development, :test do
  gem 'mysql', '2.8.1'
  # gem 'sqlite3-ruby', :require => 'sqlite3'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:32:09.210

Heroku 建议尽可能在本地使用相同的设置：[https ://devcenter.heroku.com/articles/heroku-postgresql#local-setup](https://devcenter.heroku.com/articles/heroku-postgresql#local-setup)

尽管 ORM 抽象了很多细节，但拥有开发/生产平价仍然是一个好主意，并且当您想要下载生产应用程序的 pg_dump 以供本地使用时会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:04:12.407

我认为您应该尝试使用与生产相同的数据库进行开发。它们不一定可以互换。但是，众所周知，由于 sqlite 的纯粹便利性，我自己忽略了这条规则；）

# php - 试图在php中动态地制作经纬度数组

> ID：14618792
> 
> 赞同：1
> 
> 时间：2013-01-31T05:00:44.163
> 
> 标签：php, javascript, mysql, google-maps-api-3

我正在尝试使用我在 mySQL 数据库中拥有的城市来制作一系列纬度和经度。这就是我到目前为止所拥有的。我正在尝试在 javascript 中设置数组变量，并回显里面的字段。读取“标记”数组以使标记出现在谷歌地图上所需位置的位置：

编辑：这是整个脚本

```
<script type="text/javascript">

var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();

    var mapOptions = {
    zoom: 5,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
                              mapOptions);
    directionsDisplay.setMap(map);

    var markers = [

    <?php

    //orgnize fans by city
    $query = "SELECT city, state, COUNT(*) fans FROM users GROUP BY city ORDER BY fans DESC";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){

    //pulls the city, state code from the database and stores it as a string in $address
    $address = urlencode('"' . $row['city'] . ", " . $row['state'] . '"');
    $googleApi = 'http://maps.googleapis.com/maps/api/geocode/json?address=%s&sensor=false';     

    $json = file_get_contents(sprintf($googleApi, $address));   
    $resultObject = json_decode($json);

    $location = $resultObject->results[0]->geometry->location;

    $lat = $location->lat;
    $lng = $location->lng;

        echo "{ lat: ".$lat.", lng: ".$lng.", name: ".'"'.$row['city'].", ".$row['state'].'"'."},";
    }

    ?>

    ];

    // Create the markers ad infowindows.
    for (index in markers) addMarker(markers[index]);
    function addMarker(data) {
        // Create the marker
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(data.lat, data.lng),
            map: map,
            title: data.name
        });

        // Create the infowindow with two DIV placeholders
        // One for a text string, the other for the StreetView panorama.
        var content = document.createElement("DIV");
        var title = document.createElement("DIV");
        title.innerHTML = data.name;
        content.appendChild(title);
        var streetview = document.createElement("DIV");
        streetview.style.width = "200px";
        streetview.style.height = "200px";
        content.appendChild(streetview);
        var infowindow = new google.maps.InfoWindow({
            content: content
        });

        // Open the infowindow on marker click
        google.maps.event.addListener(marker, "click", function() {
            infowindow.open(map, marker);
        });

        // Handle the DOM ready event to create the StreetView panorama
        // as it can only be created once the DIV inside the infowindow is loaded in the DOM.
        google.maps.event.addListenerOnce(infowindow, "domready", function() {
            var panorama = new google.maps.StreetViewPanorama(streetview, {
            navigationControl: false,
            enableCloseButton: false,
            addressControl: false,
            linksControl: false,
            visible: true,
            position: marker.getPosition()
            });
       });

    }

    // Try HTML5 geolocation
    if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            var pos = new google.maps.LatLng(position.coords.latitude,
            position.coords.longitude);

            var infowindow = new google.maps.InfoWindow({
            map: map,
            position: pos,
            content: 'Your Current City'
        });

            map.setCenter(pos);
        }, function() {
        handleNoGeolocation(true);
        });

    } else {
        // Browser doesn't support Geolocation
        handleNoGeolocation(false);
    }

}

function handleNoGeolocation(errorFlag) {
    if (errorFlag) {
        var content = 'Error: The Geolocation service failed.';
    } else {
        var content = 'Error: Your browser doesn\'t support geolocation.';
    }

    var options = {
    map: map,
    position: new google.maps.LatLng(60, 105),
    content: content
    };

    var infowindow = new google.maps.InfoWindow(options);
    map.setCenter(options.position);
}

function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var waypts = [];
    var checkboxArray = document.getElementById('waypoints');
    for (var i = 0; i < checkboxArray.length; i++) {
        if (checkboxArray.options[i].selected == true) {
            waypts.push({
                        location:checkboxArray[i].value,
                        stopover:true});
        }
    }

    var request = {
    origin: start,
    destination: end,
    waypoints: waypts,
    optimizeWaypoints: true,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
                            if (status == google.maps.DirectionsStatus.OK) {
                            directionsDisplay.setDirections(response);
                            var route = response.routes[0];
                            var summaryPanel = document.getElementById('directions_panel');
                            summaryPanel.innerHTML = '';
                            // For each route, display summary information.
                            for (var i = 0; i < route.legs.length; i++) {
                            var routeSegment = i + 1;
                            summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment + '</b><br>';
                            summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
                            summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
                            summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
                            }
                            }
                            });
}

google.maps.event.addDomListener(window, 'load', initialize);

</script> 
```

当我打开 html 时，我调用初始化并制作画布：

```
<body onload="initialize()">

<div id="map_canvas" style="width: 1100px; height: 450px;">map div</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:03:58.390

您有一个错字：有时您使用`long`, 在其他时候`lng`。

在代码段中：

```
var marker = new google.maps.Marker({
        position: new google.maps.LatLng(data.lat, data.lng),
        map: map,
        title: data.name
    });} 
```

而早些时候你使用

```
$lng = $location->lng;
echo "{ lat: ".$lat.", lng: ".$long.", name: ".'"'.$row['city'].", ".$row['state'].'"'."},"; 
```

实际上，`echo`应该在数组中产生经度的语句正在引用一个未初始化的变量`$long`. 解决这个问题，你应该很高兴。换句话说，改变

```
$lng = $location->lng; 
```

至

```
$long = $location->lng; 
```

（或更改您的回声语句...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:39:23.973

我之前的回答涉及错字。我认为“如何使用 google API 绘制地图”存在一个根本问题。以下代码片段（来自[google JavaScript API](https://developers.google.com/maps/documentation/javascript/overlays#OverlaysOverview)显示了使用叠加层的示例（这就是标记）：

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922); 
var mapOptions = {   
    zoom: 4,   
    center: myLatlng,   
mapTypeId: google.maps.MapTypeId.ROADMAP, }

var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
var marker = new google.maps.Marker({
     position: myLatlng,
     title:"Hello World!" });  
// To add the marker to the map, call setMap();
marker.setMap(map); 
```

您的代码中似乎缺少其中几个步骤 - 也许您没有显示它们，或者您没有意识到您需要它们？

编辑：即使您发布了完整的代码，我仍然看不到某些我期望的东西。

这是您可以肯定尝试的一件事：在引用之前调用 google API：添加此行

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"> </script> 
```

就在下面`<head>`，在你之前`<script>`

解决这个问题，并去掉一堆“多余的”（为了“得到一个带图钉的地图”）行，让我可以创建一个[简单的文件](http://www.floris.us/SO/maptest.php)，可以用一个标记来渲染纽约州纽约的地图它。源代码可以在[http://www.floris.us/SO/maptest.php.txt](http://www.floris.us/SO/maptest.php.txt)找到。从那里，你可以添加更多的东西回来......

进一步编辑：根据经验教训，我制作了[http://www.floris.us/SO/maptestFull.php](http://www.floris.us/SO/maptestFull.php)，它具有您正在寻找的大部分功能（显然不是数据库查找，我没有） . 再次将源代码复制到 .php.txt 文件中，以便您查看。有点乱（因为试图打开/关闭） - 你必须仔细观察才能看到我所做的所有更改。

# android - 使用光标适配器在列表视图 android 的顶部位置添加新元素。

> ID：14618801
> 
> 赞同：0
> 
> 时间：2013-01-31T05:01:13.397
> 
> 标签：android, android-listview, simplecursoradapter

您好我正在开发使用列表片段的小型 android 应用程序。在这个应用程序中，我想做的是从数据库中获取数据并显示它，`SimpleCursorAdapter`在列表视图中显示数据之后，我想在列表的零位置插入一个虚拟行，而不是来自数据库。我的代码结构看起来像这样

```
public class MyCards extends SherlockListFragment implements
        LoaderManager.LoaderCallbacks<Cursor> {
private SimpleCursorAdapter adapter = null;
    .
    .
    .
    .
    .

private void displayCards() 
{
    adapter = new SimpleCursorAdapter(this.getActivity(),R.layout.coupon, null, from, to, 0);
    setListAdapter(adapter);

    // now after this i want to display one dummy row at zero position 
}

} 
```

这个怎么做。需要帮助...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:26:05.953

您可以实现类似，在从数据库填充数组时，在零位置添加一个虚拟数据，然后从数据库添加实际数据，并将数组设置为 listivew。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:04:32.083

试试这个代码，

```
getListView().setSelection(location); 
```

位置是需要设置光标的位置

**编辑 1**

```
private Vector<RowData> data;

try {

                            rd=new RowData(iTmp,demo[0], demo[1], demo[2],demo[3],demo[4]);

                        }

                        catch (ParseException e)

                        {

                            e.printStackTrace();

                        }

                        data.add(rd);

                        //data.add(tokens[iTmp]);

                    }
                    CustomAdapter adapter = new CustomAdapter(this, R.layout.firstlist,R.id.title, data); 
```

**编辑 2** 请检查此链接

*   [列表视图教程 1](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)
*   [列表视图教程 2](http://www.androidhive.info/2011/10/android-listview-tutorial/)

# wpf - 如何为自定义类定义资源

> ID：14618803
> 
> 赞同：1
> 
> 时间：2013-01-31T05:01:18.060
> 
> 标签：wpf, wpf-controls

这是对[在 Xaml 中定义类的正确方法是什么？](https://stackoverflow.com/questions/14618114/what-is-the-correct-way-to-define-classes-in-xaml)

我已经设法让资源运行起来，现在玩得很开心。但我意识到我必须以这种方式将资源定义为 Window 类的一部分，我看过一些示例，它们似乎使用 UserControl、Applicaion 或 Window 来封装资源。这很有意义，因为资源将在 UI 中使用，但我想问，是否可以将资源定义为自定义类的一部分？如果我有一个 Person 类，我可以使用 XAML 为它定义资源吗？使用 Person.Xaml 和 Person.Xaml.cs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:16:45.910

您可以添加资源字典（添加资源字典类型的新项目），并且可以在此 XAML 文件中包含所有资源。在资源字典中定义可重用资源并在需要的地方使用它是一种很好的做法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:21:29.093

这有点棘手，如果 Person 只是一个类，它不会有任何对应的 Xaml 文件。

一种方法是将您的资源存储在您的资源中，`App.Xaml`然后您可以从应用程序中的任何位置访问这些资源。

例子：

应用程序.xaml

```
<Application x:Class="WpfApplication13.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <Storyboard x:Key="MyAnimation" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation From="0" To="1" Duration="0:0:5" />
        </Storyboard>
    </Application.Resources>
</Application> 
```

人物类

```
public class Person
{
    public Person()
    {
        var storyboard = (Storyboard)Application.Current.Resources["MyAnimation"];
    }
} 
```

另一种方法是创建自己的`Resource.Dictionaries`并加载它们。

# objective-c - 如何根据移动改变精灵位置？

> ID：14618806
> 
> 赞同：0
> 
> 时间：2013-01-31T05:01:23.313
> 
> 标签：objective-c, xcode, cocoa-touch, cocos2d-iphone

我的场景中有 20 个精灵，我的精灵如下所示。

```
 o    o    o   o   o    o    o

       o    o    o   .   o    o    o 

       o    o    o   o   o    o    o 
```

o-->我的球精灵。-->我的空精灵

当我将第二行中的第二个精灵移动到空精灵时，我的第三个精灵想要删除并且应该在那里添加空白空间。明智地我想将任何精灵移动到空位置（水平移动，垂直移动，对角线移动）中间的精灵想要移除。任何人都可以帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:29:18.613

试试这个，

在 .h 中声明一个全局精灵变量，

```
CCSprite *movingBall; 
```

在 .m 中，在 init 中，

```
movingBall = nil; 
```

在`touchesBegan`,

```
if(!movingBall)
{
  for(int i = 0; i<20; i++)
  {
     CCSprite *currentSprite = (CCSprite *)[self getChildByTag:i+tagOffset];

     if(CGRectIntersectsPoint([currentSprite boundingBox],touchPoint))   
     {
        // get moving sprite touched

        if(movingBall.position.x == emptySprite.position.x+(2*xDistance) || movingBall.position.x == emptySprite.position.x-(2*xDistance) || movingBall.position.y == emptySprite.position.y+(2*yDistance) || movingBall.position.y == emptySprite.position.y -(2*yDistance))
        {
          movingBall = (CCSPrite *)currentSprite;
          Break;
        }
     }
  }
} 
```

在touchesMoved中，

```
if(!movingBall)
{
  return;
}

movingBall.position = touchedPoint;

for(int i = 0; i<20; i++)
{
   CCSprite *currentSprite = (CCSprite *)[self getChildByTag:i+tagOffset];

   if(CGRectIntersectsRect([movingBall boundingBox],[currentSprite boundingBox]))   
   {
      // current sprite touched
      if(currentSprite.tag == emptySprite.tag)
      {
        movingBall.position = emptySprite.position;

        [self removeChild:currentSprite];
        Break;
      }

   }
} 
```

在接触结束时，

```
 if(!movingBall)
  {
    return;
  }

  movingBall = nil; 
```

# image-processing - 我可以分解图像去模糊模型吗？

> ID：14618810
> 
> 赞同：0
> 
> 时间：2013-01-31T05:02:06.890
> 
> 标签：image-processing

你好我最近在做图像去模糊，我只是想知道我可以打破标准的图像退化模型{对于不同车辆在不同方向移动的交通信号的图像}

```
 g(x,y) = H[f(x,y)] + n(x,y) 
```

像那样

```
 g1(x,y) = H1[f1(x,y)] + n(x,y) ;

   g2(x,y) = H2[f2(x,y)] + n(x,y) ;

   g3(x,y) = H3[f3(x,y)] + n(x,y) ;

     .....................
     .....................
     .....................
     .....................

   gm(x,y) = Hm[fm(x,y)] + n(x,y) 
```

这里我假设整个图像被不同的退化函数退化，并且相同的噪声被添加到噪声的不同部分。

这里 f1(x,y) + f2(x,y) ......... + fm(x,y) = f(x,y)。

请提出正确的概念。并告诉我我是否走错路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:46:42.430

我发现这个问题的答案略有变化......

**我们可以将图像退化模型g(x,y) = H[f(x,y)] + n(x,y)**分解 为 g(x,y) = H[f1(x,y)] + H[ f2(x,y)] + H[f3(x,y)] ..... + H[fn(x,y)]

使用线性的概念如果

g(x,y) = H[k1xf1(x,y) + k2xf2(x,y)] = k1xH[f1(x,y)]+ k2xH[f2(x,y)]

如果 k1 = k2 = 1 那么 g(x,y) = H[f1(x,y)]+ H[f2(x,y)]

同样我们可以得到以下形式

**g(x,y) = H[f1(x,y)] + H[f2(x,y)] + H[f3(x,y)] ... + H[fn(x,y) ]**

# powerbuilder - 如何在没有 PowerBuilder 的情况下查看/打开 PowerScript 文件

> ID：14618818
> 
> 赞同：6
> 
> 时间：2013-01-31T05:03:00.163
> 
> 标签：powerbuilder

我有一个想要检查的 PowerBuilder 项目，
但我没有安装 PowerBuilder。

我尝试了 PB Peeper，但是当我尝试浏览 pbl 文件时它冻结了。

有谁知道我可以打开并查看源 Powerscript 的任何类型的软件？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T05:24:11.373

我知道的最简单的是 pbdumper ( [http://sebastien.kirche.free.fr/powerbuilder/en.html](http://sebastien.kirche.free.fr/powerbuilder/en.html) ) 所以你可以将源代码提取为 *.sr? 文件并使用任何文本编辑器查看。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T22:08:38.323

试试 [yBrowser](https://web.archive.org/web/20130718160048/http://www.ybrowser.com/)，真的很好。

*   免费软件
*   无需安装 PowerBuilder
*   各种浏览和搜索功能

# asp.net - 在 Windows 7 上安装 .net framework 3.5 sp1 时出错

> ID：14618824
> 
> 赞同：0
> 
> 时间：2013-01-31T05:03:32.327
> 
> 标签：asp.net, sql-server-2008

我有 Windows 7（64 位）操作系统。我已经在我的机器上安装了 vs 2008 和 sql 2005。我想安装 sql server 2008。当我尝试安装 SQL 2008 时，它失败了。所以我下载了 3.5 sp1 并尝试安装它。但是安装失败。它给出了错误 安装过程中发生错误。我通过进入控制面板（Windows功能打开和关闭）取消选中框架3.5的复选框，但没有运气。

谁能告诉我这是什么解决方案？

# c++ - C++ std::string* s; 内存回收了？

> ID：14618825
> 
> 赞同：2
> 
> 时间：2013-01-31T05:03:43.037
> 
> 标签：c++, pointers, memory, heap-memory, stack-memory

给定一个带有语句的函数 foo：

```
void foo() {
  std::string * s;
} 
```

此函数返回后是否回收内存？

我假设是，因为这个指针没有指向任何东西，但有些人说不——它是一个悬空指针。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T05:07:02.023

`std::string* s`只是一个未初始化的指向字符串的指针。当函数 foo 返回时指针将被销毁（因为指针本身是分配在堆栈上的局部变量）。没有`std::string`创建过，因此您不会有任何内存泄漏。

如果你说

```
void foo() {
    std::string * s = new std::string;
} 
```

然后你会有内存泄漏

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:01:15.550

This code is typical when people learn about strings a-la C, and then start using C++ through C idioms.

C++ classes (in particular standard library classes) treat objects as *values*, and manage themselves the memory they need.

`std::string`, in this sense is not different from an `int`. If you need a "text container", just declare an std::string (not `std::string*`) and initialize it accordingly (uninitialized std::strings are empty by definition - and default constructor) than use it to form expression using method, operators and related functions like you will do with other simple types.

std::string* itself is a symptom of a bad designed environment.

Explicit dynamic memory in C++ is typically used in two situation:

*   You don't know at compile time the size of an object (typical with unknown size arrays, like C strings are)
*   You don't know at compile time the runtime-type of an object (since its class will be decided on execution, based on some other input)

Now, std:string manage itself the first point, and does not support the second (it has no virtual methods), so allocating it dynamically adds no value: it just adds all the complication to manage yourself the memory to contain the string object that is itself a manager of other memory to contain its actual text.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:12:16.967

这段代码只是创建了一个指向内存中某处的指针，其中包含字符串值，它指向之前已分配的某个位置，它不分配新字符串。它只是为指针值分配内存，在函数返回后它不再有效......

# javascript - asp.net ImageButton 和 javascript onmouseover 改变图像不透明度的奇怪问题

> ID：14618828
> 
> 赞同：0
> 
> 时间：2013-01-31T05:03:58.983
> 
> 标签：javascript, asp.net, opacity, imagebutton, onmouseover

我是网络开发的新手，一直在寻找这个确切的问题，但还没有找到任何讨论。基本上我在我创建的转发器中有一个 asp:ImageButton，如下所示：

```
<asp:ImageButton onmouseover="MouseOverArr(this)" runat="server" ImageUrl='<%#     Container.DataItem %>'/> 
```

和javascript函数：

```
function MouseOverArr(image) {
    image.style.opacity = 0.75;
} 
```

但是，此代码不起作用。如果我改为这样做：`onmouseover="this.style.opacity='0.75'"`那么它可以工作。此外，如果我更改函数以首先获取 id 然后用于`document.getElementById`检索元素然后在该元素上设置不透明度，一切都很好。为什么上面的原始代码不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:22:08.247

我的错，我发布的代码确实有效。我的实际项目中有一个愚蠢的错字导致问题。不敢相信我没有早点注意到它，但一定是漫长的一天。感谢所有的建议。

# c# - 如何使用 Entity Framework 加载存储过程的结果？

> ID：14618830
> 
> 赞同：3
> 
> 时间：2013-01-31T05:04:06.497
> 
> 标签：c#, sql-server, entity-framework

我有一个挑战。我们有一个最初设计用于 VB6 的数据库，并且大部分功能都位于存储过程中。我无法对存储过程进行更改，因为旧应用程序仍需要工作一段时间，而且我没有自己的数据库副本，我什至可以对其进行短暂修改。

那么是否可以从 EF 执行存储过程，并最好将结果写入 POCO 的数组/集合中？

我已经尝试过数据库优先方法和导入，但 EF 说存储过程不返回任何列，因此无法创建复杂类型。我发现有一些方法可以更改存储过程以使其正常工作，但我无法更改我正在使用的数据库。

另一个挑战是结果中列的名称类似于“上次更改日期”，换句话说就是带有空格。EF 将如何尝试映射这些？它会变成 DataLastChanged 还是可能变成 Data_last_changed？有没有办法用属性标记我的 POCO 来说明它们是如何映射的？

我希望是这样的

```
var resuls = efContext.ExecuteStoredProcedure<MyPOCOType>("spName",param1, param2, ...); 
```

并让 EF 尽力将结果与类型相匹配。这样的事情存在吗？顺便说一句，我们正在使用 EF4，但我相信 5 可供我们使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:10:42.153

我想我已经为自己解决了部分问题。下面的代码片段可以满足我的需要。

```
using (DbContext context = new DbContext("DBConnectionStringNameFromAppConfig"))
            {

                SqlParameter[] parameters =
                      {
                                        new SqlParameter("@OwnerID", DBNull.Value),
                                        new SqlParameter("@ExternalColorID", colorOwner.ExternalColorID),
                                        new SqlParameter("@ProductionSiteID", DBNull.Value),
                                        new SqlParameter("@PanelstatusNr", DBNull.Value),
                                        new SqlParameter("@DateLastChecked", DBNull.Value),
                                        new SqlParameter("@rowcount", DBNull.Value),
                      };
                var colors = context.Database.SqlQuery<Models.ColorSelectEvaluation>("[dbo].[sp_Color_Select_Evaluation] @OwnerID, @ExternalColorID, @ProductionSiteID, @PanelstatusNr, @DateLastChecked, @rowcount", parameters).ToList();

            } 
```

令人困惑的仍然是列的命名。它们似乎大部分都有效，但 EF 没有将结果列“需要评估”映射到我的对象上的属性 NeedsEvaluation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:57:56.723

关于列名不匹配。关于 stackoverflow 的另一个问答很好地解决了这个问题。 [为什么从 DbSet<T>.SqlQuery 映射实体时忽略我的 DbModelBuilder 配置？](https://stackoverflow.com/questions/12282757/why-is-my-dbmodelbuilder-configuration-ignored-when-mapping-entity-from-dbsett)

总而言之，MS认为这会很棒，但他们不支持以这种方式映射名称。唯一的解决方案是更改存储过程，这对我来说是没有选择的，因为它会破坏仍在使用它的遗留应用程序。

# jquery - 为 div 标签中的图像提供淡入淡出

> ID：14618840
> 
> 赞同：0
> 
> 时间：2013-01-31T05:05:07.567
> 
> 标签：jquery

我使用 SetInterval jquery 函数添加了几张图像的幻灯片。图像源存储在一个数组中，每个图像的显示时间间隔也存储在一个数组中。代码正在运行，但我想添加每个具有持续时间和不透明度的图像的淡入淡出和淡入淡出，如何完成。使用的代码是

```
 //timearray- is array storing time for each image
  //imagearray- is array storing each image source
  //image_div-is div tag in which images are displayed
  // total 5 images -so used count inside setInterval

function imageshow() {
    var imgfade = setInterval(function () {
        $("#img_div").css("background", "url('" + imagearray[count] + "')");
        clearInterval(imgfade);
        if (count < 4) {
            count++;
        } else {
            count = 0;
        };
        imageshow()
    }, timearray[count]);
}

imageshow(); 
```

我需要为每个图像使用淡入淡出和淡入淡出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:28:30.133

你不能只使用，我想你也可以设置动画、持续时间和不透明度。

[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)和[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:35:55.670

假设您想在淡入下一张图像之前淡出当前图像，请替换此行：

```
$("#img_div").css("background", "url('" + imagearray[count] + "')"); 
```

和：

```
var $imgDiv = $("#img_div");
$imgDiv.fadeOut("fast", function () {
    $imgDiv.css("background", "url('" + imagearray[count] + "')").fadeIn("fast");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T06:20:05.613

根据澄清问题的评论，它看起来像是`fadeTo`您想要的功能。[http://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

# ruby-on-rails - ruby on rail 部署问题 - 您已经激活了 rack 1.5.1，但您的 Gemfile 需要 rack 1.4.4。使用 bundle exec 可以解决这个问题

> ID：14618846
> 
> 赞同：2
> 
> 时间：2013-01-31T05:05:33.930
> 
> 标签：ruby-on-rails, ruby, thin

我尝试在 rails 应用程序上部署 ruby​​。我收到了这个错误

```
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.0/lib/bundler/runtime.rb:31:in `block in setup': You have already activated rack 1.5.1, but your Gemfile requires rack 1.4.4\. Using bundle exec may solve this. (Gem::LoadError)
        from /usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.0/lib/bundler/runtime.rb:17:in `setup'
        from /usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.0/lib/bundler.rb:116:in `setup'
        from /usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.0/lib/bundler/setup.rb:7:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /var/www/rails/mgm/config/boot.rb:6:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /var/www/rails/mgm/config/application.rb:1:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /var/www/rails/mgm/config/environment.rb:2:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /var/www/rails/mgm/config.ru:3:in `block in <main>'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/rack-1.5.1/lib/rack/builder.rb:55:in `instance_eval'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/rack-1.5.1/lib/rack/builder.rb:55:in `initialize'
        from /var/www/rails/mgm/config.ru:1:in `new'
        from /var/www/rails/mgm/config.ru:1:in `<main>'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `eval'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `load'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/thin-1.5.0/lib/rack/adapter/loader.rb:42:in `for'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/thin-1.5.0/lib/thin/controllers/controller.rb:169:in `load_adapter'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/thin-1.5.0/lib/thin/controllers/controller.rb:73:in `start'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/thin-1.5.0/bin/thin:6:in `<top (required)>'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/bin/thin:19:in `load'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/bin/thin:19:in `<main>'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `eval'
        from /usr/local/rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我添加到 Gemfile

```
 gem 'rack' '1.5.1' 
```

跑了

```
bundle update rack 
```

我收到以下错误

```
Bundler could not find compatible versions for gem "rack":
  In Gemfile:
    rails (= 3.2.8) ruby depends on
      rack (~> 1.4.0) ruby

    rack (1.5.1) 
```

我跑了

```
 bundle exec 
```

返回

```
bundler: exec needs a command to run 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T05:52:21.900

尝试卸载机架

```
gem uninstall rack 
```

并运行

```
bundle install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T08:11:58.527

您可以使用此命令：

```
bundle update 
```

# python - 如何让文件被识别为python中的模块

> ID：14618848
> 
> 赞同：0
> 
> 时间：2013-01-31T05:05:54.247
> 
> 标签：python

这是情况。我创建了一个目录结构如下

pymaster
----------file1.py
pymaster2
----------file2.py

pymaster1 和 pymaster2 目录都不是包。那是故意的。

我在 file1.py 中设置了一个变量 x=1

在 file2.py 我做了以下：

```
import sys, os     
sys.path.append(os.path.realpath('..')) 
# this added the path to the pymaster directory to my system 
#path. I printed it out and it was added.

import pymaster  
print(file1.x) 
```

我收到以下错误消息：

> Traceback（最近一次调用最后一次）：
> 文件“file2.py”，第 5 行，在 import pymaster ImportError：没有名为 pymaster 的模块

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:10:56.373

如果您没有`__init__.py`文件（用于制作 python 包），则必须指定实际文件名。以下应该有效：

```
sys.path.append(os.path.realpath('../pymaster'))
import file1 
```

任何 python 文件都可以被视为一个模块。模块的集合就是一个包。

# javascript - 单击 HTC 传单中的 GO 按钮时，表单正在重置

> ID：14618849
> 
> 赞同：2
> 
> 时间：2013-01-31T05:06:02.763
> 
> 标签：javascript, jquery, html

我有一个使用 Phonegap 开发的应用程序。当我通过单击 HTC Flyer 的 GO 按钮提交我的 HTML 表单时，该表单正在重置而不是提交。我通过互联网搜索。但我不能很好地回答这类问题或答案。请帮帮我。

```
<link href="css/form.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="cordova-2.2.0.js"></script>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/iscroll-lite.js"></script>
<script type="text/javascript" src="js/jqFancyTransitions.1.8.js"></script>
<script type="text/javascript" src="js/jquery.cycle.all.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="js/utils.js"></script>
<script type="text/javascript" src="js/service.js"></script>
<script type="text/javascript" src="js/menu.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/modules/slideshow.js"></script>
<script type="text/javascript" src="js/modules/device.js"></script>
<script type="text/javascript" src="js/modules/register.js"></script>
<div class="box module" id="box_register">
 <div class="box_content">
<form id="loginForm" >
  <div class="box_content_tab">Register</div>
    <div class="box_content_center">
      <div class="form_content">
    <label>Name</label>
      <input id="registerNameFld" type="text" class="form_input_box" />
                <label>Email</label>
              <input id="registerEmailFld" type="text" class="form_input_box" />
                 <label>Password</label>
              <input id="registerPasswordFld" type="password" class="form_input_box" />
                 <label>Confirm Password</label>
               <input id="confirmPasswordFld" type="password" class="form_input_box" />
         <div id="registerBtn" class="form-btn blue-btn" >Submit</div>
              </div>
        </div>
         </form>
     </div>
   </div>
 <script>
$("#box_register").newAccount();
</script> 
```

我的 register.js 文件是

```
(function($) {
$mod = null;
registerMod = {
 initialize : function() {
   $mod.center();
   $('#registerBtn').click(
    function() {
     if ($("#registerNameFld").val() == ''
       || $("#registerEmailFld").val() == ''
       || $("#registerPasswordFld").val() == ''
       || $('#confirmPasswordFld').val() == '') {
         if($("#registerNameFld").val() == ''
            && $("#registerEmailFld").val() == ''
            && $("#registerPasswordFld").val() == ''
            && $('#confirmPasswordFld').val() == ''){
                alert('Please enter All Fields');
          }
         else if($("#registerNameFld").val() == ''){
            alert('Please enter Username ');
          }
         else if($("#registerEmailFld").val() == ''){
            alert('Please enter Email ');
          }
         else if($("#registerPasswordFld").val() == ''){
             alert('Please enter Password ');
          }
         else if($("#confirmPasswordFld").val() == ''){
             alert('Please enter Confirm Password ');
          }
        }else {
          if(registerMod.isNameValid($("#registerNameFld").val()) == 'correct'){
           if(registerMod.isEmailValid($("#registerEmailFld").val()))
           {
            if($("#registerPasswordFld").val().length >= 6){
             if(registerMod.isPassValid($("#registerPasswordFld").val()) == 'correct'){
              if( $("#registerPasswordFld").val() == $('#confirmPasswordFld').val()){
               if($("#registerPasswordFld").val() ==$("#registerNameFld").val()){
                 alert('Name and Password should not be same');
               }
               else{
                 service.newAccount({
                 name : $("#registerNameFld").val(),
                 email : $("#registerEmailFld").val(),
                 password : $("#registerPasswordFld").val(),
                 device : device
               }, registerMod.onRegisterSuccess, registerMod.onRegisterError);    
             }
             }else{
               alert("Your password and confirmation password do not match.");
             }
       }else if(registerMod.isPassValid($("#registerPasswordFld").val()) == 'special'){
         alert('Password should not contain only special characters');
       }else if(registerMod.isPassValid($("#registerPasswordFld").val()) =='space'){
         alert('Password should not contain spaces');
       }else{
         alert('invalid format of password');
       }
      }
      else{
        alert('Password should contain minimum 6 characters');
      }
     }
     else{
       alert('Please enter valid Email address');
     }
    }
    else if(registerMod.isNameValid($("#registerNameFld").val())=='special'){
    alert('Name should not contain special characters');
     }
  else if(registerMod.isNameValid($("#registerNameFld").val())=='number'){
     alert('Name should not contain only numbers and should not start with numbers');
   }
 else if(registerMod.isNameValid($("#registerNameFld").val())=='invalid'){
     alert('Name should not start with Space');
 }
 }
    return false;
 });
    },
    onRegisterSuccess : function(rep) {
        $('#box_register').fadeOut();
        app.onLogin(rep);
    },
    onRegisterError : function() {
        app.onError();
        alert("Email was already taken");
    },
    isEmailValid:function (mailID) {
        var atpos=mailID.indexOf("@");
        var dotpos=mailID.lastIndexOf(".");
        if(atpos<1 || dotpos<atpos+2 || dotpos+2>=mailID.length){   
            return false; 
        }else{
            return true;
        }
    },
    isNameValid:function (name) {
        var regexCorrect = /^[a-zA-Z]+[0-9]*[!@#$%\^&*(){}[\]<>?\/\-'".,;:+_]*/;
        var regexSpl = /[!@#$%\^&*(){}[\]<>?\/\-'".,;:+_]/;
        var regexNum = /^\d+/;
        if(regexCorrect.test(name)){
            return "correct";
        }else if(regexSpl.test(name)){
            return "special";
        }else if(regexNum.test(name)){
            return "number";
        }else{
            return "invalid";
        }
    },
    isPassValid:function (name) {
        var regSpace = /[\s]/;
        var regexSpl = /^[!@#$%\^&*(){}[\]<>?\/\-'".,;:+_]$/;
        if(regSpace.test(name)){
            return 'space';
        }else if(regexSpl.test(name)){
            alert('matching');
            return 'special';
        }else{
            return 'correct';
        }
    }
};

$.fn.newAccount = function() {
    $mod = $(this);
    registerMod.initialize();
};

})(jQuery); 
```

服务在 service.js 文件中定义

# symbian - Carbide c++ 3.2 尝试从 TraceCore 获取响应超时错误

> ID：14618850
> 
> 赞同：2
> 
> 时间：2013-01-31T05:06:07.537
> 
> 标签：symbian, carbide

我已经安装了 Carbide c++ 3.2，但是当我使用 CODA 调试代理连接我的 Nokia500 时出现问题，因为**ATEMP TO GET RESPONSE FROM TRACECORE TIMED OUT ERROR 错误**。

请帮帮我......！

# android - “未找到资源”使用时

> ID：14618852
> 
> 赞同：2
> 
> 时间：2013-01-31T05:06:19.270
> 
> 标签：android, xml, layout, include

在我的项目中，我创建了一个全局标题布局`global_header.xml`，并在我的所有布局 XML 文件中使用`<include layout="@layout/global_header.xml">`.

这个方法我以前用过，目前在这个项目中使用。我的问题是我有一个包含以下内容的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFFFF" >

    <include layout="@layout/global_header" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/global_header">

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

内容`global_header.xml`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/global_header"
    android:layout_width="fill_parent"
    android:layout_height="60sp"
    android:layout_alignParentTop="true"
    android:background="#FFDDDDDD" >

    <ImageView
        android:id="@+id/global_header_logo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5sp"
        android:layout_marginTop="5sp"
        android:adjustViewBounds="true"
        android:src="@drawable/header" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1sp"
        android:layout_alignParentBottom="true"
        android:background="#FF000000" />

</RelativeLayout> 
```

而且我说的是一个错误`android:layout_below="@global/header"`：

> 错误：错误：未找到与给定名称匹配的资源（位于“layout_below”，值为“@global/header”）。

我已经在项目的其他布局中使用了包含，它可以正常工作，但无论出于何种原因，这个布局文件都不会像所有其他布局一样从标题加载 ID。

即使我确信一旦在设备上运行它会发现它没有问题，该项目也不会出现此错误，其他人有这个问题吗？有解决方案/解决方法吗？

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T05:23:01.733

试试这个，为包含布局和使用指定 id

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFFFF" >

<include layout="@layout/global_header"  android:id="@+id/header"/>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/header">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:11:37.893

希望这两个 xml`(main.xml & global_header.xml)`都存在于资源中的布局文件夹中。

请清理项目并重新启动您的eclipse，它可以工作。

注意@我检查了你的 xml，我没有收到任何错误。

# xslt - 从 umbraco 中的 Media 文件夹中选择图像

> ID：14618854
> 
> 赞同：0
> 
> 时间：2013-01-31T05:06:28.077
> 
> 标签：xslt, umbraco

我是 umbraco 的新手，正在为我遇到的这个网站做维护。我想从我的媒体文件夹中选择图像，我的图像 1 到 5 的横幅工作正常（由其他人完成）但是我想放置横幅对于不能正常工作的image6。找不到图像徽标。我在下面有图像（banner6）。我猜是id：7745，因为我遵循最后一张图像的id .. ![模板](../Images/3cd62e46c59bd4184e45b8ab6c6efa67.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:31:47.553

您无法猜测图像 ID，您需要在“媒体”部分中查找它。当您将鼠标悬停在媒体树中的媒体项上时，您可以在左下角看到媒体的 ID：

![在此处输入图像描述](../Images/52b789b3b1d5e23d5f60adc7aaffa732.png)

在这种情况下，图像的 ID 是 6508，如果要显示硬编码的图像，则应使用此 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:24:21.167

我已经能够解决我的问题，因为我使用 Umbraco V3，我所要做的就是将该图像插入内容页面之一进行测试，我可以从那里获得该图像的 ID，然后我使用它编写代码ID..它工作正常。

# php - 从视图中分离 Javascript 文件

> ID：14618862
> 
> 赞同：0
> 
> 时间：2013-01-31T05:07:05.487
> 
> 标签：php, javascript, codeigniter

我正在使用`Codeigniter`并希望将 JavaScript 与视图文件分开，但许多 JavaScript 函数需要来自控制器的数据（它取决于来自控制器的值）

前任：

```
controller :

function show_post() {
    $data['data'] = $this -> get_data();                 //some data
    $data['random_key'] = $this -> generate_random();    //returns a random value
    $this -> load -> view('posts', $data);
} 
```

在视图中我有一个 js 函数：

```
<script>
    function get_random() {
        return "<?= $random_key; ?>";
    }
</script> 
```

如何将此 javascript 片段保存到其他文件中`posts.js`？如果我做了这样的事情，那么我不能在脚本中使用 php 变量。

在性能和维护方面实现这一目标的最佳方法是什么？

**我不想遵循的其他一些方法：**

1.  将 JS 文件另存为 PHP 文件，然后将值传递给该文件
2.  在全局视图文件中声明所有这些变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:11:03.097

您可以将值作为参数传递给您的 js 函数，例如 post.js

```
function get_random( param ) {
    //use param here
}
//OR
function get_random( ) {
    //get arguments like
   var firstArg = arguments[0]; 
} 
```

视图.php

```
//include post.js file
//call the js function passing php variable as parameter, like
get_random("<?php echo $random_key; ?>"); 
```

你的意思是这样的吗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:17:30.767

一种使用隐藏字段的方法，在您的情况下将它们存储在隐藏字段中，例如：

```
<input type="hidden" value="<?php echo $random_key;?>" id="randomkey"> 
```

并在 js 中使用 ID 访问它们，例如：

```
$("#randomkey").val(); 
```

通过这种方式，您可以在您的 js 中使用控制器参数。

帮助它会帮助你！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T07:15:34.160

最简单的方法是，在视图文件中将 php 变量定义为 js 变量

```
<script type="text/javascript">
    var random_key = <?= $random_key; ?>;
</script> 
```

然后您可以在`example.js`文件中使用该变量

# gwt - 使用 gwt 忘记密码链接

> ID：14618865
> 
> 赞同：2
> 
> 时间：2013-01-31T05:07:19.527
> 
> 标签：gwt, gmail, des, gwt-ext

在我的网站中，我有一个链接**忘记密码**，当我单击此链接时，将出现一个页面，因此我们填写 emailId 并将邮件发送到特定的 gmailid（在此邮件中，我们必须生成一个链接）。当我们点击生成的链接页面打开重置密码时（如新密码和确认密码）。

我的问题是我可以成功发送邮件，但是当点击链接时无法找到 emailId 来重置密码。 **邮箱链接：**

```
http://127.0.0.1:8888/abc.html?gwt.codesvr=127.0.0.1:9997#forgetPassword 
```

**客户代码**

```
sendButton.addClickHandler(new ClickHandler() {

    @Override
    public void onClick(ClickEvent event) {
        // TODO Auto-generated method stub

        greetServer.mailLinkSend(emailId.getText(),"http://"+Window.Location.getHost()+Window.Location.getPath()+Window.Location.getQueryString()+"#forgetPassword", new AsyncCallback<String>() {

            @Override
            public void onSuccess(String result) {
                // TODO Auto-generated method stub
                System.out.println("success"+result);
            }

            @Override
            public void onFailure(Throwable caught) {
                // TODO Auto-generated method stub
                System.out.println("fail");
            }
        });
    }
}); 
```

**在服务器上**

```
public String mailLinkSend(String emailText, String link) {
               SecretKey key = KeyGenerator.getInstance("DES").generateKey(); 
```

// 创建加密器/解密器类 DesEncrypter encrypter = new DesEncrypter(key);

// 加密 encrypted = encrypter.encrypt(emailText);

// 解密字符串解密 = encrypter.decrypt(encrypted);

```
 String ss = "true";

            String emailMsgTxt = "Hi" + emailText + "\n" + "\n"
            + "Your Password Change Link\n" + link + "?id=" + encrypted
            + "\n Click on the above link to Reset your Password";
    String emailSubjectTxt = "Change Password Link";
    String emailFromAddress = "abc@gmail.com";
    String receipentList = emailText;

    try {
        MailUtility smtpMailSender = new MailUtility();
        smtpMailSender.postMail(receipentList, emailSubjectTxt,emailMsgTxt,   emailFromAddress);

    } catch (MessagingException messagingException) {}

    return ss;
} 
```

MailUtility 类

```
public class MailUtility {
    public String postMail(String recipients, String subject,
            String message, String from) throws MessagingException { 
```

一些代码.... }

我已经以加密形式发送 emailId，但我不知道如何保存解密密钥以及如何在使用一次和 48 小时后使链接过期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:58:30.947

所以你的加密和解密问题

所以下面的代码会帮助你

注意 Constants.GWT_DES_KEY 在服务器和客户端上将相同

例如 ：

私有最终静态字节[] GWT_DES_KEY = 新字节[] { -110, 121, -65, 22, -60, 61, -22, -60, 21, -122, 41, -89, -89, -68, -8, 41, -119, -51, -12, -36, 19, -8, -17, 47 };

在服务器上：

```
 TripleDesCipher cipher = new TripleDesCipher();
    cipher.setKey(Constants.GWT_DES_KEY);
    try {
    enc = cipher.encrypt(String.valueOf(value));
    } catch (DataLengthException e1) {
    e1.printStackTrace();
    } catch (IllegalStateException e1) {
    e1.printStackTrace();
    } catch (InvalidCipherTextException e1) {
    e1.printStackTrace();
    }

On the client, make sure you inherit the module:
<inherits name='com.googlecode.gwt.crypto.Crypto'/>
Then:

  TripleDesCipher cipher = new TripleDesCipher();
    cipher.setKey(Constants.GWT_DES_KEY);
    String dec ="";
    try {
    dec = cipher.decrypt(enc);
    } catch (DataLengthException e) {
    e.printStackTrace();
    } catch (IllegalStateException e) {
    e.printStackTrace();
    } catch (InvalidCipherTextException e) {
    e.printStackTrace();
    } 
```

# html - 将按钮浮动到右侧，同时保持文本的高度和垂直中心

> ID：14618866
> 
> 赞同：0
> 
> 时间：2013-01-31T05:07:26.973
> 
> 标签：html, css, css-float, vertical-alignment

我有一个元素的`button`内部。`dt`

![起始图像](../Images/b7be9d9dfee1a27eb1861e51f72f5c8a.png)

一切看起来都很好，但是我想将按钮浮动到右侧。

![向右浮动](../Images/d5c0d2106ee4079f28f3f2a3fceb92b2.png)

当我在按钮上添加浮动时，现在`dt`它更短了，导致它看起来很差。

![在此处输入图像描述](../Images/66f1c524ed1aa6d168d247670ba7a568.png)

添加`overflow:auto`解决了这个问题，但现在左侧的文本不是垂直居中的。`vertical-align:center`不能解决这个问题，也不能通过破解它来帮助它有`display:table-cell;`没有另一种我忽略的方法来完成这个？

`<dt style="overflow:auto">Title <button style="float:right">save</button></dt>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T23:23:10.523

这通常是我会这样做的方式。

我的 CSS：

```
dt {
    display: block;
    background: -webkit-linear-gradient(#bfbfbf 0%, #828282 100%);
    background:         linear-gradient(#bfbfbf 0%, #828282 100%);
    padding: 10px 20px;
    margin: 10px auto;
    border-radius: 3px;
    width: 400px;
}

dt:after {
    content: "";
    display: table;
    float: none;
}

dt p {
    display: inline-block;
}

dt button {
    margin: 0;
    padding-top: 3px;
    padding-bottom: 3px;
    float: right;
} 
```

我的 HTML：

```
<dt>
    <p>My Title</p>
    <button>Save</button>
</dt> 
```

请记住，您的文本块“我的标题”必须是一个`inline-block`而不是一个`block`

我希望这有助于或至少为您指明正确的方向。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T05:24:52.910

有比简单地浮动元素更好的方法。我建议要么用 div 元素包装它们，要么创建一个表格，当然假设您计划重复标题按钮结构。样本可能类似于：

```
<div style="width:50%;">Title</div>

<div style="width:50%;">
    <button style="float:right">Button</button>
</div> 
```

编辑 - -

尝试快速脏表方法：

```
<body>
<table style="width:100%">
    <tr><td>Title</td>
    <td><button style="float:right">save</button></td></tr>
</table>
</body> 
```

另外，dt 元素是什么？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T05:31:24.553

我认为您只需要清除浮动元素而不是使用`overflow:auto;`

示例：http: [//jsfiddle.net/ChrisMBarr/UGWuc/](http://jsfiddle.net/ChrisMBarr/UGWuc/)

* * *

### 编辑

现在试试这个：http: [//jsfiddle.net/ChrisMBarr/6HXek/5/](http://jsfiddle.net/ChrisMBarr/6HXek/5/)

该按钮有一些标题没有的填充。这使它们具有匹配的垂直填充。

# html - 多复选框管理

> ID：14618868
> 
> 赞同：0
> 
> 时间：2013-01-31T05:07:33.080
> 
> 标签：html, css

您好，我使用这种方式生成我的复选框。

```
$result = mysql_query("SELECT * FROM tbl_tourism_type order by type_name ");
                $i=1;
                while($row = mysql_fetch_array($result)){
                echo '<input type="checkbox" name="type[]" value="'.$row['type_id'].'" id="'.$row['type_name'].'">'.'
                <label for="'.$row['type_name'].'" class="fil_lab">'.$row['type_name']. '</label>';
                if($i%5==0) 
                {
                 $i = 0;
                 echo '<br><br>';
                }
                $i++;} 
```

请注意，它们很可能会生成 50 多个复选框。目前，它们是由 5 个然后下一行生成的，它们的设置方式彼此不一致，而且很难看。有谁知道如何解决这个问题，以便它们的结构正确吗？[链接到屏幕截图](http://i.stack.imgur.com/9ARrC.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:12:55.663

使用 CSS 给复选框一个宽度，给标签一个宽度。这样他们就可以记录相同数量的空间。

```
echo '<input type="checkbox" name="type[]" value="'.$row['type_id'].'" id="'.$row['type_name'].'" style="width: 20px;" />'.'
<label for="'.$row['type_name'].'" class="fil_lab" style="width: 100px;">'.$row['type_name']. '</label>'; 
```

# iis-7 - 为 JWPlayer 设置视频流

> ID：14618871
> 
> 赞同：1
> 
> 时间：2013-01-31T05:07:42.253
> 
> 标签：iis-7, video-streaming, iis-7.5, jwplayer

什么是我在 IIS 7.5 (Win2K8 R2) 上启用视频流的最快和最简单的方法。我将使用 ffmpeg 将视频转换为它们需要的任何格式，并且我计划使用 JWPlayer 来播放它们。视频需要与 HTML5 兼容，以便可以在 iphone 和 ipad 上观看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:03:34.903

您不需要为 HTML5 使用任何特殊的流媒体解决方案，但对于 Flash，您需要在 Web 服务器上实现一个伪流媒体模块。这是更多信息 - [http://www.longtailvideo.com/support/jw-player/28855/pseudo-streaming-in-flash](http://www.longtailvideo.com/support/jw-player/28855/pseudo-streaming-in-flash)

# templates - 如何排除xml中的子元素？

> ID：14618874
> 
> 赞同：0
> 
> 时间：2013-01-31T05:08:00.060
> 
> 标签：templates, apply-templates

我有以下 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persons>
<person>
    <phone type='home'>203-555-1212</phone>
    <phone type='fax'>203-555-1212</phone>
    <address type='home'>
        <street>12 Main Street</street>
        <city>Southbury</city>
        <state>CT</state>
        <zip>06488</zip>
    </address>
    <firstName>Charles</firstName>
    <lastName>Smithington</lastName>
</person>
<person1>
        <phone type='home'>58-99-44-999</phone>
        <phone type='fax'>5788-9987-3365</phone>
        <address type='home'>
        <street>12 Main Street</street>
        <city>Park Avenue</city>
        <state>NY</state>
        <zip>10025</zip>
    </address>
        <firstName>Mike</firstName>
        <lastName>Shinoda</lastName>
    </person1>
</persons> 
```

在这里，我必须排除州为 CT 的人的地址字段，而包括州为 NY 的人的地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:41:14.483

```
<xsl:template match="persons">

    <persons>

        <xsl:apply-templates select="person"/>

        <xsl:apply-templates select="person1"/>

    </persons>

</xsl:template>

<xsl:template match="person">

    <person>
        <xsl:copy-of select="*[name() != 'address']"/>

        <xsl:apply-templates select="address"/>

    </person>

</xsl:template><xsl:template match="person1">

    <person1>

        <xsl:copy-of select="*[name() != 'address']"/>

        <xsl:apply-templates select="address"/>

    </person1>

</xsl:template>

<xsl:template match="address">

<xsl:if test="not(state='CT')">

    <xsl:copy-of select="../address"/>

    </xsl:if>

</xsl:template> 
```

当您在提供的 xml 上应用上述转换时，它将产生以下结果 xml。

```
<person>
    <phone type="home">203-555-1212</phone>

    <phone type="fax">203-555-1212</phone>

    <firstName>Charles</firstName>

    <lastName>Smithington</lastName>

</person>

<person1>

    <phone type="home">58-99-44-999</phone>

    <phone type="fax">5788-9987-3365</phone>

    <firstName>Mike</firstName>

    <lastName>Shinoda</lastName>

    <address type="home">

        <street>12 Main Street</street>

        <city>Park Avenue</city>

        <state>NY</state>

        <zip>10025</zip>

    </address>

</person1> 
```

# oracle - 如何处理 appendchunk 和 getchunk 方法？

> ID：14618875
> 
> 赞同：0
> 
> 时间：2013-01-31T05:08:06.157
> 
> 标签：oracle, vb6

```
 Private Function ShowPic()
 Dim bytedata() As Byte
 Dim destfile As Integer
 Dim file As String
 Dim filelen As Long
 Dim numlock As Double
 Dim leftover As Long
 Const blocksize = 100000

 file = App.Path & "\image1.jpeg"

   destfile = FreeFile
   Open file For Binary Access Write As destfile

 filelen = RES(0).ActualSize
        numlock = filelen / blocksize
            leftover = filelen Mod blocksize

   bytedata() = RES(0).GetChunk(leftover)
        Put destfile, , bytedata()
 For i = 1 To numlock
      bytedata() = RES(0).GetChunk(blocksize)
        Put destfile, , bytedata()
 Next i

Close destfile
Picture1.Picture = LoadPicture(App.Path & "\image1.jpeg")
RES.Close
End Function 
```

这是我获取存储在数据库中的图像并显示到图片框中的代码，每当我运行代码错误时，都会发生如下错误：`Item cannot found in corresponding ordinal or name`

# mysql - NoSql TO mysql 数据库转换

> ID：14618879
> 
> 赞同：0
> 
> 时间：2013-01-31T05:08:40.553
> 
> 标签：mysql, google-app-engine, nosql

是否有任何简单的程序可以将谷歌的 nosql 转换为本地 mysql 数据库？
我已经使用[Remote API Bulk Loader](https://developers.google.com/appengine/docs/python/tools/uploadingdata)下载了所有数据。我怎样才能从这个批量数据中分离出所需的实体。后来我想将所有实体转换为 mysql 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:17:25.283

首先使用以下命令以 CSV 格式下载所有数据，

`appcfg.py download_data --config_file=bulkloader.yaml --filename=users.csv --kind=Permission --url=http://your_app_id.appspot.com/_ah/remote_api`

然后使用**phpmyadmin**。

# firefox - 使用证书数据库初始化 NSS

> ID：14618883
> 
> 赞同：0
> 
> 时间：2013-01-31T05:09:13.083
> 
> 标签：firefox, certificate, browser-plugin, nss

我正在编写一个 NPAPI 插件，我需要从中访问 firefox 证书存储。
我已包含 Gecko SDK，我想使用默认证书数据库初始化 NSS。
我无法找到有关如何以编程方式获取证书数据库路径的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:09:10.377

我找到了答案。它只能使用 xpcom 库来完成。但或者，我目前使用的解决方案是，我从“%APPDATA%/fozilla/firefox”中读取 profile.ini。此文件包含创建的所有配置文件的配置文件目录路径。此外，当前处于活动状态的配置文件将包含一个属性 "default=1" 。通过这种方式可以获得证书数据库的默认路径

# tridion - Content Porter Sdl Tridion 2011 的配置 xml

> ID：14618884
> 
> 赞同：3
> 
> 时间：2013-01-31T05:09:13.360
> 
> 标签：tridion, tridion-2011, content-porter-2009

我正在尝试从命令行调用内容搬运工。作为输入参数，我们需要向内容搬运工提供配置 xml。我能够理解配置 xml 的大部分模式，但我无法理解导入配置 xml 中 ItemSubType 和 IsExported 标记的值模式。有人可以帮助我理解上述标签的值模式。

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:50:05.023

为什么你需要手动玩这个？我不是 100% 确定，但我可以为您指明正确的方向。

`ItemSubType`可以为组件（Xml 或多媒体）、模式（模式类型）或 TemplateBuilding 块（C#、Assembly、Compound 等）设置。我认为它主要用于显示是否存在二进制内容以及项目本身。

`IsExported`就是它所说的那样。如您所知，Content Porter 正在导出每个项目及其所依赖的项目。如果您知道目标系统上有这些项目，则可以过滤掉一些依赖项。对于过滤掉的项目，`IsExported`设置为 false。例如，您要导出一个组件。默认情况下，您必须导出此组件的架构、架构所在的文件夹、带有默认项的发布以及可能存在的任何其他依赖项。但是您可以 100% 确定在您的目标系统上，您已经拥有该出版物以及您需要的文件夹和架构，因此为了节省时间，您可以决定过滤掉所有这些内容并仅导出组件。在这种情况下，模式和其他所有内容仍将添加到依赖关系表中，但 IsExported 将设置为 false。

# ios - 在 SLRequest 上设置超时策略？

> ID：14618907
> 
> 赞同：0
> 
> 时间：2013-01-31T05:11:17.090
> 
> 标签：ios, objective-c

我正在使用 iOS 社交框架和 SLRequest 对象向 Twitter/Facebook API 发出请求 - [http://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html)

我想为 SLRequest 添加一个类似于 NSURLRequest 的 timeoutInterval 的超时。有没有办法做到这一点？在文档中没有看到任何使这可行的东西，但我认为必须有一种方法。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:11:31.467

您*可以*使用方法返回的“ `NSMutableRequest`”中的所有元素和字段创建一个“ ” 。`NSURLRequest`[`[SLRequest preparedURLRequest]`](http://developer.apple.com/library/ios/documentation/Social/Reference/SLRequest_Class/Reference/Reference.html#//apple_ref/occ/instm/SLRequest/preparedURLRequest)

一旦你构建了你的 NSMutableRequest，设置一个超时值就很简单了。

# java - '\' 在 Java 中的 StringObject.ReplaceAll 方法中被自动剥离

> ID：14618908
> 
> 赞同：1
> 
> 时间：2013-01-31T05:11:17.007
> 
> 标签：java, unicode, unicode-string, replaceall, unicode-escapes

我正在使用 Jre 1.6。我正在执行以下代码行：

字符串 unicodeValue = "\u001B"; text = text.replaceAll("" + character, unicodeValue);

此处，文本是一个字符串对象，其中包含 Unicode 值“\u001B”的无效 XML 字符。因此，我将无效的 XML 字符转换为其 Unicode 值以写入 XML。

但是在执行 text.replaceAll 时，“\”被剥离，字符被“u001B”替换。

任何人都可以建议一种在用其 unicode 值替换字符后保留 '\' 的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:17:45.763

问题是[`str.replaceAll(regex, repl)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)被定义为返回相同的

```
Pattern.compile(regex).matcher(str).replaceAll(repl) 
```

但是[文档`replaceAll`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#replaceAll%28java.lang.String%29)说，

> 请注意，替换字符串中的反斜杠 () 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同。如上所述，美元符号可以被视为对捕获的子序列的引用，并且反斜杠用于转义替换字符串中的文字字符。

所以这意味着我们需要添加几个额外的转义层：

```
public class Foo {

    public static void main(String[] args)
    {
        String unicodeValue = "\u001B";
        String escapedUnicodevalue = "\\\\u001B";
        String text = "invalid" + unicodeValue + "string";

        text = text.replaceAll(unicodeValue, escapedUnicodevalue);

        System.out.println(text);
    }
} 
```

根据需要打印`invalid\u001Bstring`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:18:16.497

使用双斜杠`\\`表示转义`\`：

```
String unicodeValue = "\\u001B"; text = text.replaceAll("" + character, unicodeValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:49:06.137

这运行得很完美。我测试了它。

```
 char character = 0x1b;
    String unicodeValue = "\\\\u001B"; 
    String text = "invalid " + character + " string";
    System.out.println(text);
    text = text.replaceAll("" + character, unicodeValue);
    System.out.println(text); 
```

刚刚使用了RegEx的概念。

# ios - 自定义委托问题

> ID：14618909
> 
> 赞同：1
> 
> 时间：2013-01-31T05:11:33.250
> 
> 标签：ios, objective-c, delegates, automatic-ref-counting, weak

我正在使用自定义委托和协议功能。

我实现了我的类，如下所示：

```
@protocol MyDelegate <NSObject>

@required
- (void)update;

@end

@interface MyHandlerClass : NSObject
{
    id <MyDelegate>delegate;
}
@property (nonatomic, weak) id <MyDelegate>delegate;

@end 
```

我的实现类看起来像：

```
@implementation MyHandlerClass
@synthesize delegate = _delegate;
- (void)updateRequired: (id)sender
{
    if(delegate)
    {
        [delegate update];
    }
}
@end 
```

从另一个班级，我将其设置为：

```
[sharedManager setDelegate:self]; 
```

但是当`updateRequired`被触发时，它显示为`nil`。

然后我添加了一个 setter 方法，例如：

```
- (void)setDelegate:(id<MyDelegate>)aDelegate
{
   delegate = aDelegate;
} 
```

一切正常！

然后我改变了`updateRequired`方法（没有自定义设置器），如：

```
- (void)updateRequired: (id)sender
    {
        if(_delegate)
        {
            [_delegate update];
        }
    } 
```

它也工作正常！

我找不到为什么它不适用于第一种情况以及为什么它适用于其他两种情况？

请帮助我找到问题，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:19:34.497

当你使用

```
if(delegate) 
```

您指向实例变量“委托”。

但是，当您使用

```
[sharedManager setDelegate:self] 
```

这是将实例变量“_delegate”设置为“self”。

试试这个：

```
if (self.delegate) {
    [self.delegate update];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T05:18:58.880

要在 updateRequired 方法中访问您的委托属性，您可以使用私有变量**_delegate**或使用**self.delegate**来完成。因为当你使用 delegate = _delegate 进行综合时，会自动创建 setter 和 getter。

这一行告诉编译器为委托创建一个 setter 和 getter，并且它们应该使用名为 _delegate 的 ivar。如果没有 = _delegate 部分，编译器会假定属性和 ivar 具有相同的名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T05:28:22.167

您无意中声明了一个名为`delegate`

```
 id <MyDelegate>delegate; 
```

和另一个名为`_delegate`

```
 @synthesize delegate = _delegate; 
```

一些建议...

*   不要将 iVar 与您的 @property 声明分开声明

*   不要@synthesize，因为 XCode 4.4 你不必这样做。编译器将自动合成并自动创建带有前导下划线的 iVar

*   总是通过它的属性在你的班级内外引用你 ivar。只有 init、dealloc 和自定义 setter 和 getter 中存在例外。

所以这就是你的代码应该看起来的样子

```
 @protocol MyDelegate <NSObject>

    @required
    - (void)update;
    @end

    @interface MyHandlerClass : NSObject
    @property (nonatomic, weak) id <MyDelegate>delegate;
    @end

    @implementation MyHandlerClass

    - (void)updateRequired: (id)sender
    {
        if(self.delegate)
        {
            [self.delegate update];
        }
    }
    @end 
```

# javascript - jQuery.appear 仅在整个元素为视口时触发

> ID：14618913
> 
> 赞同：3
> 
> 时间：2013-01-31T05:11:49.563
> 
> 标签：javascript, jquery

我目前正在使用[jQuery.appear](https://github.com/morr/jquery.appear "点击这里查看")在元素进入视口时更改它们的类。该插件效果很好，只是它会在元素顶部出现时立即触发。我想对其进行调整，使其仅在整个元素位于视口内或接近存在时触发。

代码：

```
$('someselector').appear();
$('someselector').on('appear', function() {
    $(this).removeClass('on').addClass('off');
    $(this).siblings().removeClass('off').addClass('on');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:21:45.623

jQuery Waypoints 插件也很有用。当元素在屏幕上可见时，它会触发一个动作。

```
$('.entry').waypoint(function() {
   alert('The element is appeared on the screen.');
}); 
```

[插件网站](http://imakewebthings.github.com/jquery-waypoints/)上有一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:37:59.650

我已经更改了一些代码，以便您可以检查元素是否完全可见。删除了将触发事件的代码，因为使用 destroy 更难清理（尚未实现）。我将尝试根据文档进行制作：http: [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

这是html页面：

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script src="appear.js"></script>
<script>
    $(document).ready(function(){
        //TODO: not sure if there is such a thing as selector
        //  namespaces but could try that to add both appear and
        //  fully-appear to same selector elements
        $('#fully').appear(function(){
            console.log("full view");
        },{fullView:true});
        $('#partly').appear(function(){
            console.log("partly visible");
        });
        $(window).scrollTop(1400).scrollLeft(1000);
    });
</script>
</head>
<body >
    <div style="width:3000px;height: 3000px"></div>
    <div id="fully" style="width:50px;height:75px;
    position: absolute;left:1500px;top:1500px;
    background: black">
    </div>
    <div id="partly" style="width:50px;height:75px;
    position: absolute;left:1450px;top:1350px;
    background: yellow">
    </div>
</body>
</html> 
```

而改变的出现.js

```
/*
* jQuery appear plugin
*
* Copyright (c) 2012 Andrey Sidorov
* licensed under MIT license.
* Edit by HRM 2013 02 01
* https://github.com/morr/jquery.appear/
*
* Version: 0.2.1
*/
(function($) {
  var selectors = [];
  var $window = $(window);
  var $document = $(document);

  function process(p) {
    p.checkLock = false;
    var $appeared = p.elements.filter(function() {
        return $(this).is(p.filterName);
    });
    if($appeared.length==0){
      return;
    }
    p.callback($appeared);
  }

  // "appeared" custom filter
  $.expr[':']['appeared'] = function(element) {
    var $element = $(element);
    if (!$element.is(':visible')) {
      return false;
    }

    var window_left = $window.scrollLeft();
    var window_top = $window.scrollTop();
    var offset = $element.offset();
    var left = offset.left;
    var top = offset.top;
    if (top + $element.height() >= window_top &&
        top - ($element.data('appear-top-offset') || 0)
          <= window_top + $window.height() &&
        left + $element.width() >= window_left &&
        left - ($element.data('appear-left-offset') || 0)
          <= window_left + $window.width()) {
      return true;
    } else {
      return false;
    }
  }

   // "in-full-view" custom filter
  $.expr[':']['fully-appeared'] = function(element) {
    var $element = $(element);
    if (!$element.is(':visible')) {
      return false;
    }
    wLeft=$window.scrollLeft();
    wTop=$window.scrollTop();
    var offset = $element.offset();
    var left = offset.left- ($element.data
      ('appear-left-offset') || 0);
    var right = (offset.left+$element.width()) -
      ($element.data('appear-left-offset') || 0);
    var top = offset.top - ($element.data
      ('appear-top-offset') || 0);
    var bottom = offset.top+$element.height();
    var window_left = wLeft;
    var window_top = wTop;
    var window_right = wLeft+ $window.width();
    var window_bottom = wTop+$window.height();

    if (window_bottom>=bottom&&
        window_top<=top&&
        window_left<=left&&
        window_right>=right ) {
      return true;
    } else {
      return false;
    }
  }

  function compare(o1,o2){
    //simple compare, assumes all properties of o1 and o2 are
    //  simple types make sure that o1 is not undefined
    //  comparing goes much further but requires writing another
    //  extension
    if(typeof o2=="undefined"){
      return false;
    }
    var i;
    for(i in o1){
      if(typeof o2[i]=="undefined"){
        return false;
      }
    }
    for(i in o1){
      if(o1[i]!=o2[i]){
        return false;
      }
    }
    return true;
  }

  function checkExist(selector){
    return !(typeof selectors[selector]=="undefined");
  }

  $.fn.extend({
    // watching for element's appearance in browser viewport
    appear: function(callback, options) {
      if(typeof callback != "function"){
        throw("Have to provide a callback: "
          +"$('selector').appear(function()....");
      }
      var defaults = {
        interval: 250
      }
      var index=this.selector;
      if(index==""){
        throw("Can't use an empty selector with this function.");
      }
      $.extend(defaults, options || {});
      var exist=checkExist(index);
      if(!exist){
        selectors[index]=defaults;
      }
      var checkBind=compare(defaults,
        selectors[index]);
      selectors[index]=defaults;
      var p={
        checkLock:false,
        filterName:(defaults.fullView)?":fully-appeared":":appeared",
        callback:callback,
        elements:this
      }
      if ((!checkBind)||(!exist)) {
        $(window).off("scroll."+index,on_check)
          .on("resize."+index,on_check);
        var on_check = function() {
          if (p.checkLock) {
            return;
          }
          p.checkLock = true;
          setTimeout(function(){
            process(p);
          }, defaults.interval);
        };

        $(window).on("scroll."+index,on_check)
          .on("resize."+index,on_check);
      }

      if (options && options.force_process) {
        setTimeout(process, defaults.interval);
      }
      return $(this.selector);
    }
  });

  $.extend({
    // force elements's appearance check
    force_appear: function() {
      if (check_binded) {
        process();
        return true;
      };
      return false;
    }
  });
})(jQuery); 
```

# .net - 为什么 windows phone 7.1 webBrowser 控件在模拟器中显示白屏？

> ID：14618921
> 
> 赞同：0
> 
> 时间：2013-01-31T05:12:23.673
> 
> 标签：.net, windows-phone-7, xaml, networking, windows-phone-7.1

我在 windows phone 7.1 上工作，模拟器显示白屏。我试图用 webBrowser打开[http://www.bing.com 。](http://www.bing.com)代码中没有错误。我使用的是 Internet Explorer 9 版本，32 位配置系统，Windows 7 操作系统，4 GB 内存。为什么模拟器显示白色空白屏幕？这是 xaml 中的以下代码：

```
<phone:WebBrowser x:Name="webBrowser1" Source="http://www.bing.com" HorizontalAlignment="Left"  Margin="9,0,0,0" VerticalAlignment="Top" Height="576" Width="441" IsScriptEnabled="True"/> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:57:48.120

检查这个：

> Windows Phone Emulator 需要支持 DirectX 10 或更高版本的显卡以及 WDDM 1.1 驱动程序。

[WP7 模拟器浏览器不显示任何内容](https://stackoverflow.com/questions/6910194/wp7-emulator-browser-not-displaying-anything)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:11:28.533

我和你有同样的问题，我的操作系统是 Windows 8 + Direct X 11 + WDDM 1.2。

要解决此问题，请尝试**将 Internet Explorer 设置为您的默认浏览器**。如果仍然无法解决您的问题，请尝试**禁用 Internet Explorer 上不必要的加载项**。

完成此操作后，我的位置模拟器运行良好。

**其他**可能适合您的解决方案写在这里： [http ://social.msdn.microsoft.com/Forums/en-US/wptools/thread/cbfb6d94-accd-4416-a25c-9caf52c5c554/](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/cbfb6d94-accd-4416-a25c-9caf52c5c554/)

祝你好运。

# erlang - 使用 Erlang 进行嵌入式开发实用吗？

> ID：14618922
> 
> 赞同：20
> 
> 时间：2013-01-31T05:12:27.243
> 
> 标签：erlang, embedded

如果是这样，存储和内存占用量是多少？

**编辑**

我对此进行了一些研究，但未能找到有用的信息。该网站[http://www.erlang-embedded.com/](http://www.erlang-embedded.com/)根本没有帮助。博客文章[http://www.1011ltd.com/web/blog/post/embedded_erlang](http://www.1011ltd.com/web/blog/post/embedded_erlang)有点帮助，但很高兴听到有更多经验的人的回答。

**编辑 2**

我打算用于 Erlang 的硬件有 32Mb 的系统闪存和 512Mb 的 RAM。它是双核，每核 400Mhz。它运行 Linux 版本 2.6.18。

**编辑 3**

我对 Erlang 感兴趣的动机是优雅地解决并发问题。在我工作的项目中，我们有一些复杂的中间件软件，它们不健壮，难以理解且难以扩展。当然，您可以用 C 编写出色的并发软件，但 Erlang 似乎是解决这个问题领域的更好工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T21:30:38.917

我会附和这个问题含糊不清的观点。但， ...

不是想拖钓，但我认为答案是“是的！！” 或者没有！！” 取决于您对硬件的假设以及您试图解决的问题，这些问题通过 C 之类的更标准的东西不容易解决（即，您为什么不使用 C 之类的东西，一定有一个原因......减少代码 -大小，需要热升级，{erlang_value_prop, n} 等）。

在一定的标准下，答案似乎是“是”。证据包括：

*   嵌入式二郎？绝对（[http://www.1011ltd.com/web/blog/post/embedded_erlang](http://www.1011ltd.com/web/blog/post/embedded_erlang)）
*   它嵌入在 ATM 交换机和其他电信设备中
*   Google 上有（或曾经）一个嵌入式 Erlang 组
*   我认为 Ulf Wiger 有一个嵌入式 Erlang 幻灯片，作为他与 Erlang Solutions 合作的一部分
*   ETC

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T09:26:59.347

*为您嵌入*了什么？

在我的世界里，它是一个不到 1MB 闪存和通常 ~64kB 内存的系统。
在我的世界中存在 C，有时也存在 C++ 编译器。
但是没有人听说过这样一个系统的 erlang 编译器（也没有人错过它们）。

但是，如果嵌入式适用于您的 WindowsCE 或在具有 > 64MB Ram 和 1GB Flash 的非 PC 硬件上运行的 linux，
那么 erlang 应该没有问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-31T05:16:03.557

不，

1.  许多嵌入式系统没有 Erlang 编译器，而所有嵌入式系统都有 C 编译器，并且大多数都有 C++。
2.  Erlang 缺乏嵌入式系统所需的低级访问。

当然可以在树莓派集群上安装 Erlang，但这不是嵌入式设备。

# python - Python - ValueError：float（）的无效文字：

> ID：14618923
> 
> 赞同：3
> 
> 时间：2013-01-31T05:12:32.910
> 
> 标签：python, linux, csv, numpy

我有一个 csv 文件，我正在尝试计算其中存在的每一列的平均值。

```
#!/usr/bin/python

with open('/home/rnish/Desktop/lbm-reference.dat.ref-2013-01-30-13-00-15big.csv', "rU") as f:
    columns = f.readline().strip().split(' ')
    numRows = 0
    sums = [0] * len(columns)

    for line in f:
        values = line.split(" ")
        print values
        for i in xrange(len(values)):
           sums[i] += float(values[i])
        numRows += 1

#    for index, summedRowValue in enumerate(sums):
#        print columns[index], 1.0 * summedRowValue / numRows 
```

我得到的错误是：

```
 File "excel.py", line 15, in <module>
    sums[i] += float(values[i])
ValueError: invalid literal for float(): 0,536880742,8861743,0,4184866,4448905 
```

这就是输出的`print values`方式：

```
['0,256352728,10070198,5079543,5024472,34764\n']
['0,352618127,10102320,4987654,3082111,1902909\n']
['0,505838297,9977968,423278,4709666,5041639\n']
['0,506598469,10083489,0,5032146,5054715\n']
['0,536869414,7229488,39934,4322290,3607046\n'] 
```

这是 csv 文件的外观：

```
0,256641418,10669052,4803710,4759922,0
0,484517531,9889830,1457230,4084777,4959529
0,506902273,9673699,0,5281012,5293376 
```

有人可以阐明并帮助我理解这个问题：

在阅读了几篇文章后，我假设这是由于换行符造成的。我对么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:14:23.517

您在空格处拆分 .cvs 文件 - 但字符串中没有空格。尝试以逗号分隔：

```
 columns = f.readline().strip().split(',') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:33:47.730

使用[numpy](http://www.numpy.org/)：

```
import numpy as np

a = np.loadtxt("data.csv", delimiter=",")
mean = np.mean(a, axis=0)
print(mean) 
```

使用[csv 模块](http://docs.python.org/2/library/csv.html)：

```
import csv
import sys

it = csv.reader(sys.stdin, quoting=csv.QUOTE_NONNUMERIC)
avg = next(it, [])
count = 1
for count, row in enumerate(it, start=2):
     for i, value in enumerate(row):
          avg[i] += value
avg = [a/count for a in avg]
print(avg) 
```

### [输出](http://ideone.com/CKe9k0)

```
[0.0, 431655407.0, 9492692.6, 2106081.8, 4434137.0, 3128214.6] 
```

# xml - 如何在liferay 中获取portlet.xml 的初始化参数？

> ID：14618924
> 
> 赞同：3
> 
> 时间：2013-01-31T05:12:37.663
> 
> 标签：xml, liferay, portlet, liferay-6, init-parameters

我在我的 liferay 门户 6 中使用自定义 porltet。我有一些全局变量，我想在我的 portlet 类中使用，因此我在 portlet.xml 文件中编写了该变量，如下所示..

```
<init-param>
        <name>Host</name>
        <value>smtp.mail.yahoo.com</value>
</init-param>

<init-param>
        <name>Port</name>
        <value>465</value>
</init-param> 
```

在我的 portlet 操作类中完美运行的功能

```
publicList<String> ReadSmtpDataForMailNotification() {

        List<String> ValuesListObj = new ArrayList<String>();
        ValuesListObj.add(this.getInitParameter("Host"));
        ValuesListObj.add(this.getInitParameter("Port"));
        return ValuesListObj;
    } 
```

现在的问题是，当我使用 portlet 操作类执行函数时，它的工作很完美，但是当我想在我的 portlet 类之外访问这个变量时......例如：- 在我的本地服务 impl 类中，我无法访问该变量和值come 始终为 null ..所以请如果有人可以建议我如何在其他 portlet 类中获取 initparam 的值。

@Advaita Gosvami

在 portlet.properties 文件中写了 my.custom.host=liferay.css.com

当我尝试使用以下内容获取价值时

```
 System.out.println("Property value : - " + PropsUtil.get("my.custom.host")); 
```

它给了我空值..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T06:02:04.273

中的变量`<init-param>`旨在由 portlet 本身访问，而不是由任何其他类访问。这些参数不适用于所有其他类。

因此，如果您想访问其他类中的参数，而不是将参数作为参数从 portlet 类传递给类的方法（这里是本地服务实现）。

我建议的另一种方法是将这些参数放在`portal-ext.properties`文件中，例如：

```
my.custom.host=smtp.mail.yahoo.com
my.custom.port=465 
```

然后使用`PropsUtil`. 通过这种方法，这些属性将可供该门户的所有 portlet 使用。

您也可以将上述值放入`portlet.properties`并可以通过`PortletProps`case 访问。使用这种方法，它将仅可用于单个 portlet。

或者你甚至可以尝试在一个常量类中包含这些参数，例如：

```
interface MyConstants {
    String HOST = "smtp.mail.yahoo.com";
    String PORT = "465";
} 
```

如果您只希望它用于一个 portlet，那么第二种方式将是最好的。

我建议考虑一下为什么在`<init-param>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T10:06:10.053

## 抽象的 ：

如果您想在运行时获取 portlet 的 init-params，您可以使用 your`com.liferay.portal.service.PortletLocalServiceUtil`来获取您的 portlet。

然后你得到一个`com.liferay.portal.model.Portlet`.

这是一个非常方便的对象，因为它为您提供了调用方便方法的可能性：

```
public java.util.Map<java.lang.String, java.lang.String> getInitParams(); 
```

## 代码片段：

在 portlet 中，一个运行在 liferay 服务器上的 servlet，一个在服务器启动时运行的钩子，一个quartz-job，一个服务......

可以调用下面的代码来获取一个portlet的init-param map

```
import com.liferay.portal.model.Portlet;
import com.liferay.portal.service.PortletLocalServiceUtil;
import java.lang.String;
import java.util.Map;

...

/* Determine what is your portlet's id, you can go as follows or find it after placing one in a page and check it's id with a tool like firebug */
String myPortletId = "myPortletName_WAR_myPortletWar";

/* Get the actual portlet model object with the appropriate service call */
Portlet myPortletObject PortletLocalServiceUtil.getPortletById(myPortletId);

/* Get the map of init-params from the portlet model object */
Map<String,String> initParamMap = myPortletObject.getInitParams();

/* You can now iterate on your map as on any other */
for (String currentParamKey : initParamMap.keySet()) {
    String currentParamValue = initParamMap.get(currentParamKey);
    /* do stuff */
} 
```

## 幕后原则：

在 Liferay 中，需要注册一个 portlet 才能使用。
部署后，门户会注册它，注册它`init-params`和**一堆其他信息**。

最幸运的是，Liferay 将因此将所有这些数据存储在它的数据库中。
就像 Liferay 存储在数据库中的几乎所有信息一样，这些信息可以通过*LiferayService*访问。

这些服务附带了一堆实用方法。

*   一些，非常基础的（*比如高级的crud*）
*   一些更具体到当前服务。

在我的代码示例中，我得到了我的 portlet 对象，这要归功于一种搜索 portlet 的方法`portletId`。这`portletId`不是表的数据库主键`Portlet`。
因此，Liferay 自己的业务是关联`portletId`（*实际上是名称*），而不是强行询问主键，这是一个无意义的数字`long`。

您可以使用其他方法来获取您的 portlet 的对象，因为 PortletLocalServiceUtil 有许多可用的查找器。
我强烈建议您`$LIFERAY_PORTAL_SRC/portal-service/src/com/liferay/portal/service/PortletLocalServiceUtil.java`在任何提供“*大纲*”视图的 IDE 中检查该文件，以更好地了解它的所有可能性。

## 结论 ：

希望这可以帮助 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:13:14.200

无论如何，正如@Advaita Gosvami 之前所说的那样，我已经完成了 portlet.properties 中的更改，但有些方法不适用于我的自定义密钥...

```
mail.session.mail.smtps.auth=true
mail.session.mail.smtps.host=smtp.gmail.com
mail­.session.mail.smtps.password=***********(your password here)
mail.session.mail.smtps.port=465
mail.session.mail.s­mtps.user=liferay.test@gmail.com(your emailId Here)
mail.session.mail.transport.protocol=smtp 
```

我用它来称呼它

```
PortletProps.get("mail.session.mail.smtps.host"); 
```

它给了我在自定义 portlet 中调用的任何地方的完美价值

感谢@Advaita Gosvami 为您提供有价值的帮助。以防万一您在portlet 属性中贴上自定义键给我空值。但是正如我上面在portlet 属性中提到的那样，我可以访问这些键...thnx 很多

# iphone - 为什么元素在 nslog 语句中的数组中过度释放

> ID：14618925
> 
> 赞同：0
> 
> 时间：2013-01-31T05:12:46.023
> 
> 标签：iphone, objective-c, nslog

我的应用程序在运行到 NSLog(@"...") 语句时崩溃，并且控制台上的日志显示一个对象被双重释放。我用僵尸仪器检查了一下，发现 myAreas 中的一根弦被释放了。但我不明白为什么会这样？有什么帮助吗？谢谢你。

```
NSString *myArea = @"Europe";
NSArray *myTimeZones = [NSTimeZone knownTimeZoneNames];
NSMutableArray *myAreas = [NSMutableArray arrayWithCapacity:1];
[myTimeZones enumerateObjectsWithOptions:NSEnumerationConcurrent usingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSString *name = (NSString *)obj;
    if ([name hasPrefix:myArea]) {
        NSString *tmpArea = [name substringFromIndex:myArea.length+1];
        [myAreas addObject:tmpArea];
    }
}];
NSLog(@"My Cities in %@ time zone: %@", myArea, myAreas); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:23:45.583

`NSMutableArray`不是线程安全的，因此在不同线程中使用时可能会导致细微的错误，丢弃`NSEnumerationConcurrent`它应该可以正常工作。

# php - 按上次修改的 php glob 对文件进行排序

> ID：14618929
> 
> 赞同：1
> 
> 时间：2013-01-31T05:12:57.270
> 
> 标签：php, glob

> **可能重复：**
> [glob() - 按日期排序](https://stackoverflow.com/questions/124958/glob-sort-by-date)

我想使用 php glob 根据上传日期对文件进行排序。如何通过在列表中显示最新的“修改”/上传的图片 1 来对其进行排序？

```
<?php
$files = glob("uploaded_files/*.*");
for ($i=0; $i<count($files); $i++) { 
    $num = $files[$i];
    asort($files);
    echo '<img src="'.$num.'" style="height:180px; width:180px; border:2px solid black; margin:20px 0px 10px  10px; *margin:10px 0px 10px 20px;" />'."&nbsp;&nbsp;"; 
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T05:17:03.313

```
$files = glob("uploaded_files/*.*");
usort($files, function ($a, $b) {
   return filemtime($b) - filemtime($a);
}); 
```

# mysql - 如何从 mySQL 查询中的 WHILE 循环连接多个结果集？

> ID：14618937
> 
> 赞同：1
> 
> 时间：2013-01-31T05:13:40.967
> 
> 标签：mysql, while-loop, multiple-resultsets

这是我目前遇到的问题。

我有 7 个行程数据表。我目前正在做的是从第三个表中随机选择一个 Card_ID，然后使用该 Card_ID 搜索所有 7 个表并选择由该特定 Card_ID 生成的所有记录。

问题是生成了许多结果集，这会带来问题，因为我将不得不手动将它们一一导出。有没有办法通过将大约 2000 个 WHILE 循环记录组合到一个结果集中来“自动化”这个过程？

提前致谢。

```
BEGIN
DECLARE counter INT;
DECLARE random INT;
DECLARE cardid VARCHAR(20);
SET counter = 1;

WHILE counter < 801 DO

    SET random = FLOOR(1 + (RAND() * 5451696));
    SET cardid = (SELECT CARD_ID FROM trips13042011 WHERE TripID = random);

    SELECT * FROM trips11042011 WHERE CARD_ID=cardid 
    UNION ALL
    SELECT * FROM trips12042011 WHERE CARD_ID=cardid
    UNION ALL
    SELECT * FROM trips13042011 WHERE CARD_ID=cardid
    UNION ALL
    SELECT * FROM trips14042011 WHERE CARD_ID=cardid    
    UNION ALL
    SELECT * FROM trips15042011 WHERE CARD_ID=cardid
    UNION ALL
    SELECT * FROM trips16042011 WHERE CARD_ID=cardid
    UNION ALL
    SELECT * FROM trips17042011 WHERE CARD_ID=cardid

    ORDER BY Ride_Start_Date, Ride_Start_Time ASC;

    SET counter = counter + 1;

end WHILE;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:28:30.233

我不熟悉您使用的语言（mySQL 脚本代码？？），但据我了解，您可能会尝试这样的事情：

-做你的while循环来创建一个801（或任何你需要的）随机元素的数组。- 将数组添加到 where 子句中 -> WHERE CARD_ID IN (308, 3746, 72827, 1, etc...) 直到数组的第 801 个元素

```
DECLARE rdmArray ARRAY;

WHILE counter < 801 DO
     SET random = FLOOR(1 + (RAND() * 5451696));
     SET cardid = (SELECT CARD_ID FROM trips13042011 WHERE TripID = random);
     rdmArray.push_back(cardid );
     SET counter = counter + 1;
end WHILE;

SELECT * FROM trips11042011 WHERE CARD_ID IN (//element of rdmArray here) 
UNION ALL
SELECT * FROM trips12042011 WHERE CARD_ID IN (//element of rdmArray here)
UNION ALL
SELECT * FROM trips13042011 WHERE CARD_ID IN (//element of rdmArray here)
UNION ALL
SELECT * FROM trips14042011 WHERE CARD_ID IN (//element of rdmArray here)   
UNION ALL
SELECT * FROM trips15042011 WHERE CARD_ID IN (//element of rdmArray here)
UNION ALL
SELECT * FROM trips16042011 WHERE CARD_ID IN (//element of rdmArray here)
UNION ALL
SELECT * FROM trips17042011 WHERE CARD_ID IN (//element of rdmArray here)

ORDER BY Ride_Start_Date, Ride_Start_Time ASC;

... 
```

根据我对您的问题的理解，这就是我认为需要做的事情。

希望这有帮助！

安托万

# javascript - jQuery $.ajax 总是删除动态表的第一行

> ID：14618939
> 
> 赞同：0
> 
> 时间：2013-01-31T05:13:47.080
> 
> 标签：javascript, jquery, ajax

我在动态表中遇到问题，可以完美地添加新行但不能删除行。

这是我的代码：

```
<script type="text/javascript">
  $(document).ready(function(){
   $(document).on("click", ".trash", function(e){
    e.preventDefault();
    var $ligneParent = $(this).parent().parent();
    trash($ligneParent);
   });
  });

function trash(aLigneToTrash) {
 if (confirm("Vous allez supprimer définitivement cette ligne !")) {
 var maincourante =  $('table td.textemc').html();
 var data = 'maincourante=' + maincourante;

console.log(maincourante);

$.ajax({
  type: "POST",
  url: "form/delete/deletemc.php",
  data: data,
  cache: false,
  success: function() {
    aLigneToTrash.fadeOut('slow', function() {
      aLigneToTrash.remove();
    });
  }
});
return false;      
}
}
</script> 
```

我的问题是变量“maincourante”一直返回第一个条目。这个变量应该返回我要删除的行的值。

这是我的新行代码：

```
var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td class="textemc">'+texte+'</td><td class="button"><button><i class="icon-pencil"></i></button></td><td class="button"><button class="trash"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
          $('#tablemc').append(nouvelle_ligne); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:21:29.273

如果没有看到实际的 DOM，这有点难以分辨，但你实际上并没有删除它：

```
aLigneToTrash 
```

我想你可能想做：

```
var data = 'maincourante=' + aLigneToTrash.html(); 
```

`$('table td.textemc').html()`将始终选择`td.textemc`DOM 中的第一个（这正是 jQuery 的工作方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:34:00.050

谢谢你的帮助。我试试这个：

```
function trash(aLigneToTrash) {
 if (confirm("Vous allez supprimer définitivement cette ligne !")) {
  var data = 'maincourante=' + aLigneToTrash.html();

console.log(data);

$.ajax({
  type: "POST",
  url: "form/delete/deletemc.php",
  data: data,
  cache: false,
  success: function() {
    aLigneToTrash.fadeOut('slow', function() {
      aLigneToTrash.remove();
    });
  }
});
return false;      
}
} 
```

和 console.log 返回给我：

```
maincourante=<td class="thtime">09h28</td><td class="textemc">ryhjzreyjryjryjr54654</td><td class="button"><button><i class="icon-pencil"></i></button></td><td class="button"><button class="trash"><i class="icon-trash"></i></button></td> 
```

我想要这样的“td class =“textemc”的值`maincourante=ryhjzreyjryjryjr54654`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:42:03.060

我会做到这一点，而且这项工作完美无缺

```
var data = 'maincourante=' + aLigneToTrash.children('.textemc').html(); 
```

再次感谢您的帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:19:26.080

尝试将您的 ajax 调用更新为此：

```
....
$.ajax({
  type: "POST",
  url: "form/delete/deletemc.php",
  data: data,
  cache: false,
  success: function() {
     aLigneToTrash.fadeOut('slow', function() {
     aLigneToTrash.remove();
  $('#tablemc').append(' ');/*add a space to let browser know that there is a change*/
});
  }
});
return false;      
}
}
</script> 
```

我有类似的问题，所以浏览器（尤其是 IE）似乎没有检测到表格上的很多变化；这个黑客对我有用。我希望它对你有用。（假设#tablemc 是基表）

# c# - SQL Server 错误：ExecuteNonQuery：连接属性尚未初始化

> ID：14618941
> 
> 赞同：1
> 
> 时间：2013-01-31T05:14:02.487
> 
> 标签：c#, asp.net, sql-server-2008, insertion

我正在尝试使用 ASP.Net 和 C# 开发示例注册页面。我正在调用存储过程将数据插入数据库。我的数据库是 SQL Server 2008。

这是我的代码：

```
public partial class Sample : System.Web.UI.Page
{
   SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["dbconnection"].ToString());
   string str;

protected void Page_Load(object sender, EventArgs e)
{
    rbt_Male.Checked = true;
}

protected void btn_Submit_Click(object sender, EventArgs e)
{
    string @Name = txtbx_Name.Text;
    string @Gender_male = rbt_Male.Text;
    string @Gender_Female = rbt_Female.Text;
    string @Email = txtbx_Email.Text;
    DateTime @Dob = Convert.ToDateTime(txt_Dob.Text);
    submitdata();
}

protected void submitdata()
{
    try
    {
        SqlCommand cmd = new SqlCommand();
        cmd.Parameters.Clear();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "insertdata";

        if (rbt_Male.Checked)
        {
            cmd.Parameters.AddWithValue("@Name", txtbx_Name.Text);
            cmd.Parameters.AddWithValue("@Gender_Male", rbt_Male.Text);
            cmd.Parameters.AddWithValue("@Email", txtbx_Email.Text);
            cmd.Parameters.AddWithValue("@Dob", Convert.ToDateTime(txt_Dob.Text));
        }
        else if (rbt_Female.Checked)
        {
            cmd.Parameters.AddWithValue("@Name", txtbx_Name.Text);
            cmd.Parameters.AddWithValue("@Gender_Female", rbt_Male.Text);
            cmd.Parameters.AddWithValue("@Email", txtbx_Email.Text);
            cmd.Parameters.AddWithValue("@Dob", Convert.ToDateTime(txt_Dob.Text));
        }

        if (con.State == ConnectionState.Closed)
            con.Open();

        cmd.ExecuteNonQuery();

        lbl_Errormsg.Visible = true;
        lbl_Errormsg.Text = "Record Inserted Successfully";
        con.Close();
    }
    catch (Exception ex)
    {
        lbl_Errormsg.Visible = true;
        lbl_Errormsg.Text = ex.Message;
    } 
```

我收到错误消息

> *ExecuteNonQuery：连接属性尚未初始化。*

我收到此错误`cmd.ExecuteNonQuery();`

请帮我。

我的存储过程是

```
ALTER Procedure insertdata
(
 @Name Varchar(20),
 @Gender Varchar(6),
 @Email Varchar(20),
 @Dob date
) 
As
 Begin
   Insert into samplelogintable (Name, Gender, Email, Dob)
   Values(@Name, @Gender, @Email, @Dob)
 End 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T05:15:40.423

您没有将您的命令`cmd`与您的 SqlConnection 相关联，这就是您收到错误的原因。

您需要指定：

```
cmd.Connection = con; 
```

在你的`submitdata()`方法中。

由于 SqlCommand 实现了[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，因此如果您在 using 块中使用它会更好，例如：

```
using (SqlCommand cmd = new SqlCommand())
{

    cmd.Parameters.Clear();
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "insertdata";
    cmd.Connection = con;
    .... your code

} 
```

# python - Python中的多个参数

> ID：14618942
> 
> 赞同：0
> 
> 时间：2013-01-31T05:14:03.790
> 
> 标签：python

我被困在通过函数使用多个参数。我有两个文件：

**1.py**

```
import function
x=2
y=5
print function.power(x,y) 
```

**函数.py**

```
import math
def power(*x)
return math.pow(x,x) 
```

每当我尝试将多个参数传递给`power`函数时，都会出现以下错误：

**回溯**（最近一次通话最后）：

> 文件“C:\Examples\1.py”，第 33 行，在
> 
> 打印函数.power(x,y)
> 
> 文件“c:\Examples\function.py”，第 11 行，上电
> 
> ```
> return math.pow(x,x) 
> ```
> 
> 类型错误：需要浮点数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:17:29.803

我想你想要：

```
def power(*x):
    return math.pow(*x) 
```

这是一种形式的参数解包。在`power`函数中，`x`是 a `tuple`，然后可以在传递给另一个函数时对其进行解包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:27:58.460

那是因为`*x`实际上是在`x`列一个清单。

你真的想`function.py`成为：

```
import math
def power(*x)
    return math.pow(x[0],x[1]) 
```

为什么你真的想知道如何做到这一点？显然不能无意义地包装`math.pow`函数。

# kendo-ui - 在 kendo ui How to Collapsing Graph 中，可以展开表格，但展开图表然后使图表和表格都可见

> ID：14618947
> 
> 赞同：0
> 
> 时间：2013-01-31T05:14:25.990
> 
> 标签：kendo-ui, kendo-grid

折叠 Graph 可以展开表格，但立即展开图表也会使图表和表格都可见，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:43:54.957

您需要实现 a[`collapse`](http://docs.kendoui.com/api/web/panelbar#collapse)和[`expand`](http://docs.kendoui.com/api/web/panelbar#expand)函数处理程序。

```
 $("#panelbar").kendoPanelBar({
     expandMode: "single",
     expand: function (e) {
         ...
     },
     collapse: function (e) {
         ...
     }
 }); 
```

[`expand`](http://docs.kendoui.com/api/web/panelbar#expand)在这些处理程序上，您检查哪些项目正在折叠（或展开）并[`collapse`](http://docs.kendoui.com/api/web/panelbar#collapse)根据您的算法决定哪些项目。

要知道哪个项目正在折叠/展开，您应该在处理程序中使用：

```
var itemId = $("span", e.item).attr("id"); 
```

最后一件事是记住，如果你想打开多个酒吧，你应该切换[`expandMode`](http://docs.kendoui.com/api/web/panelbar#expandmode-stringdefault)到多个。

**编辑：**作为您需要的第一种方法：

```
$("#panelbar").kendoPanelBar({
    expandMode: "multiple",
    expand    : function (e) {
        var itemId = $("span", e.item).attr("id");
        if (itemId === "Span1") {
            this.expand($("#Span2").closest("li"));
        } else {
            this.collapse($("Span1").closest("li"));
        }
    },
    collapse  : function (e) {
        var itemId = $("span", e.item).attr("id");
        if (itemId === "Span1") {
            this.expand($("#Span2").closest("li"));
        } else {
            this.collapse($("Span1").closest("li"));
        }
    }
}); 
```

# regex - 只接受数字的正则表达式

> ID：14618949
> 
> 赞同：1
> 
> 时间：2013-01-31T05:14:48.850
> 
> 标签：regex

我想要一个只接受数字 0-9 而没有任何特殊字符或小数的正则表达式。也不应允许单个 0，但允许 0 后跟其他数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T05:25:21.680

`0*[1-9]\d*`应该做的工作。

`[1-9]`将强制数字必须以 1-9 开头；或者如果它以 0 开头，则必须后跟 1-9 之间的数字。`\d*`然后允许出现任何数字，包括完整数字中的 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:23:16.500

我通常使用 boost/regex.hpp 库在 C++ 中工作。这应该很适合它。

```
boost::regex e("(\d*)([1-9])(\d*)"); 
```

# android - 仅支持 OpenGL ES 1.1 的 Android 设备 480x800 及以上

> ID：14618950
> 
> 赞同：0
> 
> 时间：2013-01-31T05:14:51.607
> 
> 标签：android, opengl-es

我的应用程序目标是**分辨率为 480x800 及以上**的设备。我可以选择为我的项目使用旧的 cocos2d-x（支持 GLES 1.1）或新的（仅支持 GLES 2.0）。我已阅读[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)。但还有一个问题：有**多少分辨率为 480x800 及以上的设备不支持 GLES 2.0？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:19:21.600

[这个 SO question](https://stackoverflow.com/questions/6964248/android-opengl-es-support-everywhere)包含[指向各种统计信息的链接](http://developer.android.com/about/dashboards/index.html)。

不幸的是，原始数据不可用，所以这将是某种猜测。请注意，数据是在 2012 年 10 月收集的。

*   > 90% 的设备支持 OpenGL ES 2.0。

*   屏幕尺寸涉及更多，因为这是与密度无关的。希望这些是合理的假设：从`normal+hdpi/xhdpi`、`large+mdpi/xhdpi`和中获取所有内容`xlarge+mpdi`，>85% 的设备具有至少 800x480 分辨率的屏幕。

也许这两个数字可以使用统计 fu 组合起来，我不知道。

# sql - 左外连接和左连接有什么区别？结果是一样的

> ID：14618952
> 
> 赞同：4
> 
> 时间：2013-01-31T05:15:05.257
> 
> 标签：sql, oracle, oracle10g

> **可能重复：**
> [SQL Server 中的左连接和左外连接](https://stackoverflow.com/questions/406294/left-join-and-left-outer-join-in-sql-server)

今天我的问题是关于oracle中的连接操作，我有两个表`Table1`，`Tabel2` 现在我想对它们执行连接操作，当我执行左外连接时，我得到正确的结果，当我执行左连接时，我得到了结果是正确的

在这两个操作中，我得到相同的结果，

现在我的问题是左外连接和左连接有什么区别。

为什么当左连接以相同方式工作时，oracle 提供左外连接。

# java - Java中的图像转换

> ID：14618953
> 
> 赞同：-2
> 
> 时间：2013-01-31T05:15:06.887
> 
> 标签：java, image

我设计了一个休息服务来为用户响应存储在数据库中的图像。该服务工作正常。该服务以 jpg 格式响应图像。如果用户上传 jpg 格式的图片，响应也可以，如果图片是其他格式，则响应无法呈现为图片。我需要为所有输入图像类型构建一个 jpg 转换器或编码器。是否有任何可能的方法来实现这一目标。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T05:40:09.167

你应该看看`ImageIO`。它支持读取和写入 JPEG、PNG、BMP、WBMP 和 GIF。

JAI API 还提供 TIFF 支持，我之前也为尼康相机使用过 RAW 插件。

查看[使用图像](http://docs.oracle.com/javase/tutorial/2d/images/index.html)和[JavaDocs](http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html)了解更多信息。

**更新了示例**

没有源图像将无法进行适当的测试，但这是基本的工作流程。

我已经用作`File`我的输入，但为了演示基本概念，我创建了`InputStream`and `OutputStream`(as `ImageIO`can read/write `File`s)

```
File inputFile = new File("/path/to/image.png");
File outputFile = new File("Test.jpg");
try (InputStream is = new FileInputStream(inputFile)) {
    BufferedImage image = ImageIO.read(is);
    try (OutputStream os = new FileOutputStream(outputFile)) {
        ImageIO.write(image, "jpg", os);
    } catch (Exception exp) {
        exp.printStackTrace();
    }
} catch (Exception exp) {
    exp.printStackTrace();
} 
```

**更新**

因此，使用上面的代码，我能够将我在绘画中创建的 PNG 文件转换为 JPG ......

**PNG/JPG**

![在此处输入图像描述](../Images/c04420d332836717ef3e4330a4738501.png)![在此处输入图像描述](../Images/616ccea4ce0c49bff9204f668221ee58.png)

您也可以尝试将输入流和输出流转换为`ImageInputStream`and `ImageOutputStream`，尽管这通常在您想要查找给定图像格式的提供程序时完成。

```
File inputFile = new File("...");
File outputFile = new File("Test.jpg");
try (InputStream is = new FileInputStream(inputFile)) {
    ImageInputStream iis = ImageIO.createImageInputStream(is);
    BufferedImage image = ImageIO.read(iis);
    try (OutputStream os = new FileOutputStream(outputFile)) {
        ImageOutputStream ios = ImageIO.createImageOutputStream(os);
        ImageIO.write(image, "jpg", ios);
    } catch (Exception exp) {
        exp.printStackTrace();
    }
} catch (Exception exp) {
    exp.printStackTrace();
} 
```

# javascript - 在按钮单击时加载选项卡

> ID：14618956
> 
> 赞同：0
> 
> 时间：2013-01-31T05:15:14.243
> 
> 标签：javascript, jquery, html

我对按钮不太熟悉，`html`所以`jquery`如果这是一个重复的问题或者我问错了，请原谅。我想要做的是加载一个`tab`外部按钮点击。选项卡的代码如下，

```
<div id="wrapper">
    <div id="content">
        <div class="c1">
            <div class="controls">

            </div>
            <div class="tabs">
                <div id="tab-1" class="tab">
                    <article>
                        <div class="text-section">
                            <h1>Dashboard</h1>
                            <p>TVAS data visualizer</p>
                        </div>
                        <div style="margin-top: 10px;margin-left: 10px;width: 21%;height: 20px; float: left">
                                <input type="button" id="btn" name="btn" value="Button" />
                                <div style="margin-left: 15px; float: left">
                                Filter :
                                </div>                                

                                     <div id='jqxdropdown' style="margin-left: 5px; float: left">                                    
                                </div>

                        </div>
                        <div style="margin-top: 10px;width: 78%;height: 20px; float: right">

                                <div id='jqxcalendar' style="margin-left: 10px;float: left;"></div> 
                                <div style="margin-left: 10px;float: left;">                                        
                                    <input id="filterButton" type="button" value="Filter"/>
                                </div> 
                                <div style="margin-left: 10px; float: left">
                                <font size="1" color="red">
                                    *Filter by ISP only applies to the bar/pie chart
                                </font>
                                </div>

                        </div>

                        <div id="barChartdiv" style="margin-top: 10px;width:60%; height: 400px;float: left;"></div>
                        <div id="pieChartDiv" style="margin-top: 10px;width:40%; height: 400px;float: right;"></div>
                        <div id="linechartdiv" style="width: 100%; height: 500px;float: left;"></div>

                    </article>
                </div>
                <div id="tab-2" class="tab">
                    <article>
                        <div class="text-section">
                            <h1>Map view</h1>
                            <p>TVAS birds eye view</p>
                        </div>

                        <div id="google_map_canvas" style="margin-top: 10px;width:1450px; height: 650px;float: left;">

                        </div>

                        <div id="over_map">
                            <input id="outgoingButton" type="button" value="Outgoing"/>
                            <input id="incomingButton" type="button" value="Incomng"/>
                        </div>

                    </article>
                </div>
                <div id="tab-3" class="tab">   
                    <article>
                        <div class="text-section">
                            <h1>Dashboard</h1>
                            <p>TVAS trend visualizer</p>
                        </div>

                    </article>
                </div>                  
            </div>
        </div>
    </div>
    <aside id="sidebar">
        <strong class="logo"><a href="#">lg</a></strong>
        <ul class="tabset buttons">
            <li class="active">
                <a href="#tab-1" class="ico1"><span>Dashboard</span><em></em></a>
                <span class="tooltip"><span>Dashboard</span></span>
            </li>
            <li>
                <a href="#tab-2" class="ico2"><span>Map visualization</span><em></em></a>
                <span class="tooltip"><span>Map visualization</span></span>
            </li>
            <li>          
                <a href="#tab-3" class="ico3"><span>Trending</span><em></em></a>
                <span class="tooltip"><span>Trending</span></span>
            </li>               
        </ul>
        <span class="shadow"></span>
    </aside>
</div> 
```

此代码当前所做的是，当用户单击必要的侧边栏元素时，它会加载与`div`页面左侧对应的侧边栏元素。我需要通过单击按钮`jquery`或`javascript`位于页面标题区域中的按钮来执行相同操作。

例如像这样的东西，

```
<script type="text/javascript">
    $(document).ready(function () {
        $("input[name='btn']").click(function() {
            //code to display the contents of a tab
        });
    });
</script> 
```

任何帮助都会很有帮助:) 我不知道如何让这个问题更清楚。希望它可以理解谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:24:04.460

~~我认为这会起作用，但我相信还有更简洁的方法。~~

 ~~```
$("#tab-1").click(function() {
    $(".tab").hide();
    $("#tab-1").show();
});
$("#tab-2").click(function() {
    $(".tab").hide();
    $("#tab-2").show();
});
$("#tab-3").click(function() {
    $(".tab").hide();
    $("#tab-3").show();
}); 
```~~  ~~**更新：**这实际上有效（确保将类和 id 选择器更改为您的命名约定），如此[处](http://jsfiddle.net/z9svz/)测试。

```
$().ready(function() {
    $(".show-tab").click(function() {
        $(".tab").hide();
        var tabid = $(this).attr("id").substring(5);
        $("#"+tabid).show();
    });
    $("#show-tab-1").click();
}); 
```~~

# outlook - 在 64 位系统中打开 Outlook 时课程未注册

> ID：14618957
> 
> 赞同：0
> 
> 时间：2013-01-31T05:15:21.043
> 
> 标签：outlook, 64-bit

在 64 位系统上运行我们的 windows 应用程序时，我们在打开 Outlook 时遇到了一些问题。它说“类未注册”错误。我们尝试注册outlook dll，但它再次显示错误，例如 entry-point DllRegisterServer was not found 。确保 Microsoft.Office.Interop.Outlook.dll 是有效的 dll 或 OCX 文件，然后重试。我们正在使用以下命令注册 dll ..

C:\Windows\System32\regsvr32.exe /i Microsoft.Office.Interop.Outlook.dll C:\Windows\SysWOW64\regsvr32.exe /i Microsoft.Office.Interop.Outlook.dll

仅供参考，我们的 Windows 应用程序 -> 目标平台设置为“任何 CPU”以进行构建

感谢帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:39:52.410

什么是 Outlook 位数？是32位的吗？
您的应用程序的位数必须与 Outlook 的位数相匹配，而不是父操作系统（这是“任何 CPU”所做的）。
还要记住，您的互操作 dll 只是一个二进制标头，它不是真正的 COM 对象（在 Outlook 的情况下，它是由 outlookj.exe 实现的）。

# android - 如何让收音机应用程序在我的 Android 应用程序的后台继续播放

> ID：14618969
> 
> 赞同：0
> 
> 时间：2013-01-31T05:16:17.820
> 
> 标签：android, background, radio, audio-player

我对 android 还是很陌生，但是我在开发收音机应用程序时遵循了在线教程，现在这是我遇到的问题，我希望这台收音机继续播放，以便应用程序用户可以在收音机时继续使用该应用程序或其他应用程序在后台播放。当用户离开流媒体页面时，收音机停止播放。

```
 private void startPlaying() {
  buttonStopPlay.setEnabled(true);
  buttonPlay.setEnabled(false);
  player.start();

   }

  private void initializeMediaPlayer() {
  player = new MediaPlayer();
  try {
  player.setDataSource(" radio URL");

  player.setOnPreparedListener(new OnPreparedListener() {

  public void onPrepared(MediaPlayer mp) {
  player.start();

  }
  });
  player.prepareAsync();
  buttonStopPlay.setEnabled(true);
  buttonPlay.setEnabled(true);

  } catch (IllegalArgumentException e) {
  e.printStackTrace();
  } catch (IllegalStateException e) {
  e.printStackTrace();
  } catch (IOException e) {
  e.printStackTrace();
  }

  player.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

  public void onBufferingUpdate(MediaPlayer mp, int percent) {
  playSeekBar.setSecondaryProgress(percent);
  Log.i("Buffering", "" + percent);
  }
  });
  }

 @Override
 protected void onPause() {
 super.onPause();
 if (player.isPlaying()) {
 player.pause();
 buttonStopPlay.setEnabled(false);
 buttonPlay.setEnabled(true);
 }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:21:20.867

参考这个[链接](http://www.rbgrn.net/content/307-light-racer-20-days-61-64-completion)

```
Intent svc=new Intent(this, BackgroundSoundService.class);
    startService(svc);

public class BackgroundSoundService extends Service {
    private static final String TAG = null;
    MediaPlayer player;
    public IBinder onBind(Intent arg0) {

        return null;
    }
    @Override
    public void onCreate() {
        super.onCreate();
        player = MediaPlayer.create(this, R.raw.idil);
        player.setLooping(true); // Set looping
        player.setVolume(100,100);

    }
    public int onStartCommand(Intent intent, int flags, int startId) {
        player.start();
        return 1;
    }

    public void onStart(Intent intent, int startId) {
        // TO DO
    }
    public IBinder onUnBind(Intent arg0) {
        // TO DO Auto-generated method
        return null;
    }

    public void onStop() {

    }
    public void onPause() {

    }
    @Override
    public void onDestroy() {
        player.stop();
        player.release();
    }

    @Override
    public void onLowMemory() {

    }
} 
```

# php - left join on cake php 1.3

> ID：14618970
> 
> 赞同：1
> 
> 时间：2013-01-31T05:16:19.427
> 
> 标签：php, oracle, cakephp

如何在 cakePHP 1.3 上创建此查询

```
 SELECT "Redeem_log"."benefit_id", count("Redeem_log"."benefit_id") as JUMLAH FROM  "redeem_logs" "Redeem_log" 
LEFT JOIN "benefits" "Benefit" ON ("Redeem_log"."benefit_id" = "Benefit"."id") 
LEFT JOIN "merchants" "Merchant" ON ("Benefit"."merchant_id" = "Merchant"."id")  
LEFT JOIN "merchant_types" "Merchant_type" ON ("Merchant"."merchant_type_id" = "Merchant_type"."id") 
WHERE "Redeem_log"."benefit_id" IS NOT NULL AND ("Merchant_type"."merchant_type"='lokal' OR "Merchant_type"."merchant_type"='nasional') GROUP BY "Redeem_log"."benefit_id"  ORDER BY "JUMLAH" DESC 
```

我不想使用 belongsTO、hasMany 或 ect
如果我使用

```
var $belongsTo = array(
    'Benefit' => array('className' => 'Benefit',     'foreignKey' => 'benefit_id'),
    'Merchant' => array('className' => 'Merchant', 'foreignKey' => 'merchant_id')
); 
```

左连接就像：

```
SELECT "Redeem_log"."benefit_id", count("Redeem_log"."benefit_id") as JUMLAH 
FROM "redeem_logs" "Redeem_log" 
LEFT JOIN "benefits" "Benefit" ON ("Redeem_log"."benefit_id" = "Benefit"."id") 
LEFT JOIN "merchants" "Merchant" ON ("Redeem_log"."merchant_id" = "Merchant"."id") 
WHERE "Redeem_log"."benefit_id" IS NOT NULL  GROUP BY "Redeem_log"."benefit_id"  
ORDER BY "JUMLAH" DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T06:19:15.367

在 MOdel::find() 的 params 参数中添加 joins 字段；

像这样

```
$params = array(
    'joins'=>array(
         array(
             'table'=>'users',
             'alias'=>'User',
             'type'=>'LEFT/RIGHT/INNER',
             'conditions'=>array("$this->Alias.foreignKey=User.pk")
         )
     )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:01:03.397

我会这样做，查询的参数看起来有点吓人，但是当你仔细查看它时，它是有道理的：

```
$params = array(
    'recursive' => -1,
    'fields' => array('RedeemLog.benefit_id', 'COUNT(RedeemLog.benefit_id) as JUMLAH'),
    'conditions' => array(
        array('NOT' => array('RedeemLog.benefit_id' => null)),
        array('Merchanttype.merchant_type' => array('lokal', 'nasional')),
     ),
     'joins' => array(
         array(
             'table' => 'benefits',
             'alias' => 'Benefit',
             'type' => 'LEFT',
             'conditions' => array('RedeemLog.benefit_id = Benefit.id')
         ),
         array(
            'table' => 'merchants',
            'alias' => 'Merchant',
            'type' => 'LEFT',
            'conditions' => array('Benefit.merchant_id = Merchant.id')
         ),
         array(
            'table' => 'merchant_types',
            'alias' => 'Merchanttype',
            'type' => 'LEFT',
            'conditions' => array('Merchant.merchant_type_id = Merchanttype.id')
         ),
     ),
     'order' => 'JUMLAH DESC',
     'group' => 'RedeemLog.benefit_id',
 ); 
```

最后找到蛋糕

```
 $result = $this->RedeemLog->find('all', $params); 
```

希望对你有效。

# javascript - 打开弹出窗口，单击链接，在父窗口中打开，关闭弹出窗口？

> ID：14618972
> 
> 赞同：4
> 
> 时间：2013-01-31T05:16:30.053
> 
> 标签：javascript, popup

我需要帮助。我想从我的页面上做的是打开一个我使用它的弹出窗口：

```
<a class="txt-button" onclick="javascript:void window.open('http://mypage.com/1/index.html','','width=700,height=500,resizable=false,left=0,top=0');return false;">Buy Now</a> 
```

单击弹出窗口上的链接时，我希望它在主窗口中打开并关闭弹出窗口。

我已经尝试了很多东西，但无法让它工作:-(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T05:21:50.530

我认为你可以使用[window.opener](https://developer.mozilla.org/en-US/docs/DOM/window.opener)

```
window.opener.location.href=x 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T05:20:49.500

**要从弹出**窗口访问主`opener`窗口，请使用该对象。您可以访问任何 opener 属性，甚至可以访问类似的函数调用*（只要域匹配，正如@N Rohler 在对您的问题的评论中指出的那样）*，例如导航 use 。然后你像这样关闭你的弹出窗口：**`window.opener`*`window.opener.location.href``window.close();`***

 ***```
<a href="JavaScript:void(0);" onclick="openInParent('http://example.com/');">
  click me
</a>

<script>
  function openInParent(url) {
    window.opener.location.href = url;
    window.close();
  }
</script> 
```***

# perl - 用预定义的形状填充网格/矩阵

> ID：14618977
> 
> 赞同：8
> 
> 时间：2013-01-31T05:17:22.770
> 
> 标签：perl, grid, block, shape, tetris

很高兴看到这个问题有两个赞成票。我现在将重新提出我的问题以避免混淆。

问题是如何用没有孔的随机但预定义的形状填充 mxn 网格/矩阵。预定义的形状有一个变量 k，它是由多少块组成的形状。每个块都是一个正方形，并且与一个网格正方形（即 1x1 网格）大小相同。形状可以旋转以适应网格，但不会缩小或扩大。k 在一轮中不会改变，换句话说，当我运行答案脚本时，m、n 和 k 不会改变。当我第二次运行脚本时，我可能会更改其中的一个或全部。例如，第一次，我可能运行 k=4、m=10 和 n=20 的答案脚本。脚本完成并打印输出。第二次我将 k=3、m=6 和 n=10。我将保证 m 乘以 n 并且乘积调制 k 等于零（mxn % k = 0），以确保它们在数学上相互匹配。好的，还有一个条件：1

该脚本需要使用预设 k 池中的随机形状填充网格。当 k=2 时，预定义的形状只有一种，两个块在一起。如果你认为没有旋转，那么它有两种，水平和垂直。当k=4 时，基本上就是用俄罗斯方块填满了网格，即总共有7 种预定义的形状（每种都可以旋转，并且可以制作~20 种）。k=5 的预定义形状是什么，我还不知道。答案可以计算出来，也可以硬编码，因为不难找到 k=5 的所有形状。

如果解是有限的，则不需要随机数。例如，m=2、n=2、k=4；或 m=1，n=4，k=2。没有其他办法，没有随机性。

网格中的任何地方都不能留下任何孔。我认为，没有经过证明的想法，许多 mxn 和 mxn%k=0 的网格将有一个没有孔的解决方案。直觉上这听起来很合理，但在数学上我不知道。如果 m 或 n 是 k 的倍数，则保证有解（所有直条）。

理想情况下，我希望 k 是一个小整数，例如 k<10，但在 2 到 5 的范围内是可以接受的。如果更简单，我们可以在这里有一个固定的 k，比如 4，因为俄罗斯方块带有众所周知的 7 个形状（ITOLJSZ）。

我正在寻找最好在 Perl 中的解决方案。Python也不错。程序每次运行需要 m、n 和 k。同样，我将让 m,n,k 适合 mxn%k=0。

我自己的努力，我在 Perl 中尝试过，可以解决一些 k=3 的情况，并且由于边缘/角落中的单例（孔）而失败了一些情况。需要一种检查是否有任何块变成单例的好方法。我的文本输出如下所示（m=4，n=9，k=3）。您当然可以使用这种或任何有意义的格式。

```
AABB
ACCB
DCEE
DFFE
DFGH
IGGH
IIJH
KKJJ
KLLL 
```

我将设置 100 分的赏金（感谢那两个投票，我现在有 107 个声望）来奖励最佳解决方案。

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:14:09.283

这个问题肯定是 NP 难题（它类似于背包），这意味着通常解决它的**唯一**方法是检查所有可行块放置的一部分的算法。这将需要类似于分支定界搜索的东西，它以与拼图相同的方式组装碎片，除了每个拼图有任意多个副本。每当您到达一个不适合不引入孔的位置时，就回溯。在伪代码中：

```
place one piece to make the initial blob B containing no holes

procedure branch_and_bound
loop
  for each shape S
    for each position P that S can be added 
            to B without creating an unfillable hole
       place S in P to enlarge B
       if puzzle is complete throw DONE!
       call branch_and_bound 
```

听起来您专注于如何找到位置 P。解决此问题的一种简单方法是考虑与 B 接触的每个空网格正方形 E 并尝试将构成 S 的每个正方形放在 E 中，丢弃所有导致重叠的情况B. 避免无法填充的空洞可以简单地通过要求*未被*B 填充的空间保持连续来完成：不要让未填充空间的“孤岛”发展。通过选择任何空方格，执行 DFS 或 BFS 来触摸所有可能的未填充空间，然后检查剩余的未触及未填充方格，很容易检测到孤岛。

您可以使用启发式方法来指导选择形状和放置碎片的顺序。

事实上，除非启发式算法非常好或块的形状很简单（或两者兼而有之），否则该算法将很快变得无用。这就是 NP 难题的本质。即使启发式方法通常非常出色，也必然会出现失败的问题。这也是 NP 难题的本质。

许多谜题求解器中使用的一种技术是通过仅考虑有限的解决方案集来降低复杂性。这里的一个例子是如果 m = Ap 和 n = Bp，对于一些 A 整数 A、B、p，那么显然找到 apxp 平方的解就足够了。这可以平铺以获得更大的解决方案。你可以想象出无数类似的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T06:01:52.110

以下是有关解决方案设计的一些想法：

如果你不必把每一块都放好，你可以简单地跳过，直到你有一堆直线或正方形。那里的算法很容易想出——找出一个片段的配置来填充 1 或 2 行并重复它。如果 (nm mod k != 0) 则无解；否则，我怀疑您可以制定一套通用的规则。例如，如果 (m mod k = 0) 或 (n mod k = 0) 那么你可以只使用直线。想想这些会很有趣，但我会把它们留给你。

实际上，阅读您的问题时，我看到您写了 2 <= k <= 5 - 这真的很容易，因为 2、3 和 5 是素数。数论告诉我们，如果 nm mod a prime p = 0 那么 n 或 m 必须能被 p 整除，所以对于 k = 2、3、5，你可以找出 n、m 中的哪一个可以被 k 整除并填充行或列在长度为 k 的直线。对于 k = 4，n、m 中的一个可以被 4 整除（在这种情况下，您只需使用相同的策略）或者它们都可以被 2 整除，在这种情况下，一个必须是 (4x + 2) 并且您只需填充每一列用直线向上，然后在最后放置正方形。

如果您确实必须放置给定的每一件，那么您从一开始就知道您必须装满垃圾箱的 (nm/k) 件。这为您提供了装箱问题的标准案例，这是 NP 难的，但是那里有很好的基于启发式的算法。一个常见的方法是将每个形状放在它进入的第一个开放位置的贪婪启发式。

但是，您的问题需要一个精确的解决方案，这意味着“足够接近”永远不够好。您可以使用回溯算法，但更好的方法可能是对网格有效位置的状态空间进行双向搜索。将一个位置定义为目标位置，然后从它向后移动，包括从随机（不是真的——你应该找到好的启发式）位置中取出碎片。然后将另一个位置定义为起始位置，并进行涉及插入件的向前移动。当两棵树相交时停下来，沿着那条路走。

您必须处理的一个问题是，有时无法用您获得的碎片填充网格。例如，如果你有 am = 2、n = 2、k = 4，你只会得到一个棋子，如果它是一个正方形以外的任何棋子，你将无法填满状态空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T05:55:56.270

至于孔问题，应该有一个简单的方法来解决这个问题...... 3！（很适合 k<=9 ，即 ;)）

让我解释一下，每个块不仅与另一个或两个块相邻，而且还与`EMPTY SPOTS`您应该关心的 k 的形状相邻，这样的空点的每个计数总是`k*2+2`如此`k=1 -> 4, k=2 -> 6 .... k=9 -> 20` ，对于 k 的每个项目.length 你知道它的位置吗？在您的矩阵中，您现在可以向每一侧迈出一步并检查它是否是一个空白空间，如果是的话。请注意（空白）位置暂时，如果您以这种方式勾勒出您的 k ，您将有不同数量的空白空间小于或等于上述计算。

如果相等，则 k 中不能有任何孔，您可以继续，如果更少，则检查减少了多少，如果您错过了一个，则您制作了 L 形，如果您错过了两个，则您有 U 形或 T 形（特殊情况 k=9 an S)，你很高兴

如果你错过了三个或更多，你需要进一步调查！现在检查您临时记下的每个空白位置的相邻块，如果每个这样的空白的数量小于或等于 3，那么您没有孔并且可以继续，只要 MORE than ONE 有 3 个相邻块但是，您将在 k 中有一个洞。

对于 k=10，很难做到这一点，但是这些简单的规则最多可以防止九个 k 对象中的漏洞。

抱歉，我不熟悉 perl，否则我给你的代码不仅仅是一个提示；）

因此，在您的任何 k 对象中都没有任何孔，您应该确信您可以解决任何`m*n%k=0`网格。您应该始终牢记一件事，那就是经典的多米诺国际象棋问题*，因此请始终从一个角/边缘开始填充网格，并且在将最后一块插入网格之前不要留下任何空白，以避免这些情况。

*多米诺国际象棋问题是如果棋盘上有 2 个棋子，您是否可以在棋场 (8x8) 中布置 31 个多米诺骨牌（2x1 块）。（答案：如果一个是白色的，另一个是黑色的，你可以......否则你不能）

# c++ - 带有 CDT 的 Eclipse 不向控制台输出显示运行时错误

> ID：14618978
> 
> 赞同：4
> 
> 时间：2013-01-31T05:17:22.507
> 
> 标签：c++, eclipse, ubuntu, eclipse-cdt

我发现了一个与此类似的问题，但它并没有解决问题。基本上，我正在尝试使用安装了 CDT 的 Eclipse 进行 C/C++ 开发，并且没有运行时错误记录到 Eclipse 控制台窗口。有谁知道尝试解决此问题的可能解决方案？我在 Ubuntu 12.04 上使用最新版本的 eclipse juno，并且所有相关插件都已完全更新。

谢谢。

# java - 使用 ConcurrentSkipListMap 的并发测试队列

> ID：14618982
> 
> 赞同：3
> 
> 时间：2013-01-31T05:17:38.897
> 
> 标签：java, testing, concurrency, queue

我最近必须完成其中一项工作面试编码练习。基本上它需要实现一个消息队列类：

*   根据传入消息中的优先级字段维护项目。
*   消息可以是通过 message.priorityField 值范围控制的三个优先级类别之一，高、中、低。
*   有一个 getSize 和 isEmpty 方法。
*   有一个 place(message) 方法。
*   有一个删除方法。
*   有 getFront() 方法（返回最高优先级的消息）

最后我没有做太多细节的事情是实现一个 MessageQueue 类，该类在内部使用 ConcurrentSkipListMap（并发和有序映射）来保存消息。

我还实现了一个基本的 JUnit 测试用例，用于测试基本的业务需求。

现在，由于它是一个消息队列，因此消息可以同时进入，当然我需要测试实现的发生方面。

我现在越来越接近问题的核心。

我的想法是，当单个线程与实现交互时，基本的 JUnit 测试用例应该验证代码是否有效。

然后我实现了一个并发测试用例，它应该验证实现的发生方面。

现在问题来了：我应该测试哪些并发方面？

我唯一能想到的是有多个生产者线程在队列中注入方法和多个消费者线程删除消息（通过 getFront()）。这里要验证的是队列中的任何消息最终都会出来。

但这足够了吗？在这里可以测试哪些其他并发方面？

另外值得注意的是，我已经提交了解决方案，因此无论您提出什么建议，都不会影响我申请这份工作的机会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:10:49.507

测试线程安全是一件痛苦的事情，因为您基本上是在尝试为每个最终并发执行证明程序的正确性。有几种方法可以解决这个问题：

1.  用 JMM 的条款正式证明你的程序的正确性。这将要求您讨论程序中每个明确的“发生前”边缘以及如何基于这些边缘保持一致性。这对于像队列这样基本的东西是可能的，但是随着更多的功能和边缘被抛出，它变得非常复杂。我建议你在任何情况下都经历这个过程，并在编写并发代码时记录你的意图/假设。

2.  通过使用倒计时锁存器或在程序中的特定点暂停执行线程以强制争用的其他方法，构建演示上述预期行为的测试用例。如果走得太远，这可能会使您的代码变得一团糟，但这可能是一种非常有用的技术。

3.  通过在足够长的时间内执行代码来统计证明其正确性。这是用于验证关于 JMM 的 JVM 实现正确性的[并发折磨套件](https://github.com/ppurang/java-concurrency-torture)背后的原理。这将要求您对参与线程的合法/非法状态形成预期，并在具有足够并行线程的机器上运行程序足够长的时间。如果您从未遇到非法状态，那么您的程序是正确的:)。如果您运行它足够长的时间而没有达到非法状态，那么您很可能是正确的。

# r - 使用来自正态曲线的值将列添加到数据表

> ID：14618987
> 
> 赞同：2
> 
> 时间：2013-01-31T05:18:13.843
> 
> 标签：r

几个小时以来，我一直试图弄清楚如何解决 R 中的问题。希望有人可以提供帮助：

我有以下数据表（仅显示一个示例，称为 xout）：

```
 factorx Freq cumFreq   relative 
1    (-2,-1.9]   13      13 0.00132626 
2  (-1.9,-1.8]   18      31 0.00183636 
3  (-1.8,-1.7]   22      53 0.00224444 
4  (-1.7,-1.6]   18      71 0.00183636 
5  (-1.6,-1.5]   22      93 0.00224444 
6  (-1.5,-1.4]   31     124 0.00316262 
```

我正在尝试添加一个具有正态曲线相对频率的新列。我试图将列 factorx 分成两列，称为 min 和 max，以便我使用数值传递给 dnorm 函数。我在 r 中进行字符串操作的所有尝试都失败了。我尝试使用：

```
gsub("[^/d]","",strsplit(toString(xout$factorx),","))) 
```

但那失败了。我对 r 很陌生，所以我相信有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:25:50.237

如果您确实想使用，`sub` 那么这是一种方法。您可以捕获要`(.)`在`regexp`模式中使用的组，然后将其拾取。

```
min <- as.numeric(sub("\\((.*),.*$", "\\1", xout$factorx))
> min
# [1] -2.0 -1.9 -1.8 -1.7 -1.6 -1.5

max <- as.numeric(sub(".*,(.*)\\]$", "\\1", xout$factorx))
> max
# [1] -1.9 -1.8 -1.7 -1.6 -1.5 -1.4 
```

此外，您可以使用`strsplit`, 和`substr`with`sapply`如下：

```
# first convert to character (to use `nchar` and `substr`)
xout$factorx <- as.character(xout$factorx)
# first remove the ( and ] and then split by "," and then convert to numeric
sapply(strsplit(substr(xout$factorx, 2, nchar(xout$factorx)-1), ","), as.numeric)
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,] -2.0 -1.9 -1.8 -1.7 -1.6 -1.5
[2,] -1.9 -1.8 -1.7 -1.6 -1.5 -1.4 
```

你有`min`和`max`在矩阵的行中。

的另一种变体`sub`：您可以先删除`(`并`]`使用`sub`，然后再使用`strsplit`。

```
sapply(strsplit(sub("\\((.*)\\]", "\\1", xout$factorx), ","), as.numeric) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:34:13.117

你不能就这样吗

```
data.frame(xout, newCol=c(1,2,3,4,...)) 
```

当然，你给出的向量可以是任何东西。

示例：使用 Freq * 4 添加新列：

```
data.frame(xout, FreqFour=xout[[2]]*4) 
```

导致

```
 factorx Freq cumFreq   relative FreqFour
1    (-2,-1.9]   13      13 0.00132626       52
2  (-1.9,-1.8]   18      31 0.00183636       72
3  (-1.8,-1.7]   22      53 0.00224444       88
4  (-1.7,-1.6]   18      71 0.00183636       72
5  (-1.6,-1.5]   22      93 0.00224444       88
6  (-1.5,-1.4]   31     124 0.00316262      124 
```

# android - 如何在android应用程序中调用java文件

> ID：14618988
> 
> 赞同：-3
> 
> 时间：2013-01-31T05:18:15.593
> 
> 标签：android

我创建了一个简单的 .java 文件，我想在 android 应用程序中执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:22:42.453

您不能直接执行此操作。

当你编译一个 java 源文件时，它首先被编译成一个 .class 文件，它是 Java 字节码。之后，类文件再次被编译成 .dex 文件，这是 Dalvik 虚拟机可以运行的 Dalvik 字节码。然后将此 .dex 文件压缩为 .apk 文件，该文件是包含所有应用程序数据的存档。[你可以在这里](http://www.itbusinessedge.com/)阅读更多关于它的信息。

# iphone - 检索数据时的数据库崩溃问题

> ID：14618991
> 
> 赞同：5
> 
> 时间：2013-01-31T05:18:31.597
> 
> 标签：iphone, sqlite

![在此处输入图像描述](../Images/ecad50fa037933cbf2d6ec846562d475.png) 这是数据库字段值。

下面是我申请从 sqlite 数据库中获取数据的代码

```
-(void)readDataFromRestaurantTable
{
    [self openDataBase];

    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, & database) == SQLITE_OK)
    {
        sqlite3_stmt  *statement = NULL;

        NSString *querySQL = [NSString stringWithFormat: @"SELECT * FROM RestaurantDB"];
        const char *query_stmt = [querySQL UTF8String];

        if (sqlite3_prepare_v2(database, query_stmt, -1, &statement, NULL) == SQLITE_OK) {

            while (sqlite3_step(statement) == SQLITE_ROW)
            {
                strRestaurantName = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];
                strRestaurantAddress = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 2)];
                strRestaurantPhone = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 3)];
                strRestaurantLatitude = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 4)];
                strRestaurantLongitude = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 5)];

                NSLog(@"strRestaurantName :--> %@",strRestaurantName);
            }
        }
        sqlite3_finalize(statement);
    }
    sqlite3_close(database);
} 
```

在前面的代码块应用程序里面是不走的

```
if (sqlite3_prepare_v2(database, query_stmt, -1, &statement, NULL) == SQLITE_OK)
{

} 
```

在这里，它得到了**statement = 0x00000000** & 我认为正因为如此，它才不会进入 if 块。

**崩溃时的错误**

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSPlaceholderString initWithUTF8String:]: NULL cString'
First throw call stack:
(0x18dc012 0x12a1e7e 0x18dbdeb 0xcbdce6 0x78e4 0x7bdf 0x2ca817 0x2ca882 0x2ebed9 0x2ebd14 0x2ea1ea 0x2ea06c 0x2ebc57 0x12b5705 0x1ec920 0x1ec8b8 0x40f0b4 0x12b5705 0x1ec920 0x1ec8b8 0x2ad671 0x2adbcf 0x2ad6a6 0x412bb9 0x12b5705 0x1ec920 0x1ec8b8 0x2ad671 0x2adbcf 0x2acd38 0x21c33f 0x21c552 0x1fa3aa 0x1ebcf8 0x1da5df9 0x185ff3f 0x185f96f 0x1882734 0x1881f44 0x1881e1b 0x1da47e3 0x1da4668 0x1e965c 0x2712 0x2645 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

请指导我实际问题出在哪里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T05:23:42.503

这是由尝试使用`NULL`字符串创建 NSString 对象引起的。它位于以下行之一：

```
[[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, ...)]; 
```

因此，在使用 sql 语句的结果创建 NSString 之前，您需要像这样检查 NULL：

```
char *tmp = sqlite3_column_text(statement, 1);
if (tmp == NULL)
    strRestaurantName = nil;
else
    strRestaurantName = [[NSString alloc] initWithUTF8String:tmp]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T05:30:19.143

您必须检查第一个数据是否为 ​​NULL，然后像下面这样绑定它：-

```
const char* date = (const char*)sqlite3_column_text(statement, 3);
NSString *enddate = date == NULL ? nil : [[NSString alloc] initWithUTF8String:date]; 
```

**在下面的方法中实现它：**

```
-(void)readDataFromRestaurantTable {

    [self openDataBase];
    if (sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) 
     {

        const char *sql = "SELECT * FROM RestaurantDB";
        sqlite3_stmt *selectstmt;
        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) 
            {

                while(sqlite3_step(selectstmt) == SQLITE_ROW) 
                {

                strRestaurantName = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];
                strRestaurantAddress = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 2)];
                strRestaurantPhone = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 3)];
                strRestaurantLatitude = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 4)];
                strRestaurantLongitude = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 5)];

               }
        }
    }
    else
        sqlite3_close(database); //Even though the open call failed, close the database connection to release all the memory.
} 
```

可能对你有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T06:17:17.253

`sqlite3_finalize(statement);`在条件里面写`if`：

```
 if (sqlite3_prepare_v2(database, query_stmt, -1, &statement, NULL) == SQLITE_OK)
 {

        while (sqlite3_step(statement) == SQLITE_ROW)
        {
            strRestaurantName = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];
            strRestaurantAddress = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 2)];
            strRestaurantPhone = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 3)];
            strRestaurantLatitude = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 4)];
            strRestaurantLongitude = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 5)];

            NSLog(@"strRestaurantName :--> %@",strRestaurantName);
        }
     sqlite3_finalize(statement);
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-07T10:11:26.567

我遇到了同样的错误。
我们可以修改 SQL 查询以返回 NOT NULL/BLANK 值，而不是检查 NULL 或空白值。

在下面的查询中，针对数据库级别的空白/空值验证餐厅名称。

**注意：如果有语法错误，请原谅......只考虑了 1 列。**

前任：

```
const char *sql = "SELECT * FROM RestaurantDB WHERE <restuarant_Name column> != '' AND <restuarant_Name column> IS NOT NULL";
        sqlite3_stmt *selectstmt;
        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) 
            {
             while(sqlite3_step(selectstmt) == SQLITE_ROW) 
                {
                  strRestaurantName = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];
                }
            } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-30T10:52:56.270

在我的情况下，当我跳过db 表中的第一列**“regno”时，我得到了同样的错误。**但是当我添加第一列标题“regno”并在方法内声明为 NSString 时，清除了错误。

```
`-(NSArray*)loadData {

     const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &database) == SQLITE_OK) {
        NSString *querySQL = [NSString stringWithFormat:@"select regno, firstname, middlename, lastname, gender, dob, bloodgroup, mobileno, emailid from personalDetails"];

        NSMutableArray *resultArray = [[NSMutableArray alloc]init];
        const char *query_stmt = [querySQL UTF8String];

        if (sqlite3_prepare_v2(database, query_stmt, -1, &statement, NULL) == SQLITE_OK )
        {

            if (sqlite3_step(statement) == SQLITE_ROW) {

                ***NSString *regNo = [[NSString alloc] initWithUTF8String:
                                       (const char *) sqlite3_column_text(statement, 0)];
                [resultArray addObject:regNo];***

                NSString *firstname = [[NSString alloc] initWithUTF8String:
                                       (const char *) sqlite3_column_text(statement, 1)];
                [resultArray addObject:firstname];
                NSString *middlename = [[NSString alloc] initWithUTF8String:
                                        (const char *) sqlite3_column_text(statement, 2)];
                [resultArray addObject:middlename];
                NSString *lastname = [[NSString alloc]initWithUTF8String:
                                      (const char *) sqlite3_column_text(statement, 3)];
                [resultArray addObject:lastname];
                NSString *gender = [[NSString alloc]initWithUTF8String:
                                    (const char *) sqlite3_column_text(statement, 4)];
                [resultArray addObject:gender];
                NSString *dob = [[NSString alloc]initWithUTF8String:
                                 (const char *) sqlite3_column_text(statement, 5)];
                [resultArray addObject:dob];
                NSString *bloodgroup = [[NSString alloc]initWithUTF8String:
                                        (const char *) sqlite3_column_text(statement, 6)];
                [resultArray addObject:bloodgroup];
                NSString *mobileno = [[NSString alloc]initWithUTF8String:
                                      (const char *) sqlite3_column_text(statement, 7)];
                [resultArray addObject:mobileno];
                NSString *emailid = [[NSString alloc]initWithUTF8String:
                                     (const char *) sqlite3_column_text(statement, 8)];
                [resultArray addObject:emailid];

                return resultArray;
            }
            else{
                NSLog(@"Not found");
                return nil;
            }
            sqlite3_reset(statement);

        }
    }

    return nil;
}' 
```

# ios - 从 CIImage 创建 UIImage 时颜色反转（iOS 6.0）

> ID：14618992
> 
> 赞同：5
> 
> 时间：2013-01-31T05:18:34.170
> 
> 标签：ios, uiimage, uikit, core-image, ciimage

我一直在尝试大量不同的选项和技巧来让 UIImage 从 CIImage 正确构建。但是，每次我创建 CIImage 时，它​​的颜色似乎都被反转了。

我最近的代码是：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"C4Sky" withExtension:@"png"];
CIImage *c = [CIImage imageWithContentsOfURL:url];
UIImage *i = [UIImage imageWithCIImage:c];
UIImageView *uiiv = [[UIImageView alloc] initWithImage:i];
[self.canvas addSubview:uiiv]; 
```

这会产生以下图像：

![反转的彩色图像。](../Images/c2d4072cda58781151989c5d6ad9c849.png)

但是，构建这样的图像：

```
UIImage *i = [UIImage imageNamed:@"C4Sky"];
UIImageView *uiiv = [[UIImageView alloc] initWithImage:i];
[self.canvas addSubview:uiiv]; 
```

...产生以下图像：

![在此处输入图像描述](../Images/8fd3fa73e2492964e7c61102fff83792.png)

我尝试了很多不同的方法来构建 CIImage。

*   [https://stackoverflow.com/a/7788510/1218605](https://stackoverflow.com/a/7788510/1218605)
*   [http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5](http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5)
*   [CIImage imageWithData:UIImagePNGRepresentation(img)];
*   几乎所有其他 CIImage 构造函数...

这是因为在 iOS 中 CIImage 的像素格式是 ARGB 吗？（这似乎是目前 iOS6 上唯一可能的格式）

*   [CIImage 像素格式 (iOS)](http://bit.ly/14sMLcp)

如果是这样，我怎样才能交换像素格式让这个 CIImage 看起来正常？

* * *

* * *

我在 git 上创建了一个项目 repo，显示了我尝试过的所有主要不同方式（不包括每种方式的变体）。有6种方法，前5种失败：

[https://github.com/C4Code/CIImageTest](https://github.com/C4Code/CIImageTest)

最后一种方法有效，但它真的很脏：

```
-(void)test6 {
    UIImage *img = [UIImage imageNamed:@"C4Sky"];

    CGContextRef    bitmapContext = NULL;
    void *          bitmapData;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;
    CGSize          size = img.size;
    bitmapBytesPerRow   = (size.width * 4);
    bitmapByteCount     = (bitmapBytesPerRow * size.height);
    bitmapData = malloc( bitmapByteCount );
    bitmapContext = CGBitmapContextCreate(bitmapData, size.width, size.height,8,bitmapBytesPerRow,
                                          CGColorSpaceCreateDeviceRGB(),kCGImageAlphaPremultipliedFirst);
    CGContextDrawImage(bitmapContext, (CGRect){CGPointZero,size}, img.CGImage);
    CGImageRef imgRef = CGBitmapContextCreateImage(bitmapContext);

    CIImage *cii = [CIImage imageWithCGImage:imgRef];
    UIImage *finalImage = [UIImage imageWithCIImage:cii];

    UIImageView *uiiv = [[UIImageView alloc] initWithImage:finalImage];
    [self.canvas addSubview:uiiv];
    //works but it's dirrrrrrrty
} 
```

我正在从 UIImage 绘制到我自己的图形上下文中，并且因为它有效，所以我相信 CIImage 的本机实现可能存在错误。也就是说，从 UIImage 创建 CIImage 不起作用...同样，我唯一能想到的是 CIImage 在 ARGB 空间中，而 UIImage 不是...但是，我不知道如何解决这个问题？

这是一个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:35:31.970

尝试一些其他变体：

```
//Grab the CIImage directly from the UIImage
UIImage *img = [UIImage imageNamed:@"C4Sky.png"];
CIImage *c = img.CIImage;
UIImage *i = [UIImage imageWithCIImage:c];
UIImageView *uiiv = [[UIImageView alloc] initWithImage:i];
[self.canvas addSubview:uiiv]; 
```

或者

```
//Maybe you need to set your own color space?
UIImage *img = [UIImage imageNamed:@"C4Sky.png"];
CIImage *c = [CIImage imageWithCGImage:img.CGImage options:@{kCIImageColorSpace: kCGColorSpaceModelRGB}];
UIImage *i = [UIImage imageWithCIImage:c];
UIImageView *uiiv = [[UIImageView alloc] initWithImage:i];
[self.canvas addSubview:uiiv]; 
```

-jt

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:01:12.157

这以前也咬过我。我用这样的东西`UIImage`从`CIImage`s 转换 s：

```
- (UIImage *)newUIImageFromCIImage:(CIImage *)image
{
    CGImageRef newImageRef = [[CIContext contextWithOptions:nil] createCGImage:image fromRect:[image extent]]; // you can cache CIContext as it's a little slow to create
    UIImage *newImage = [[UIImage alloc] initWithCGImage:newImageRef];
    CGImageRelease(newImageRef);

    return newImage;
} 
```

[这里](https://stackoverflow.com/questions/8425647/how-to-convert-uiimage-to-ciimage-and-vise-verse)有一些讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T05:36:03.973

看看[这个](http://www.raywenderlich.com/22167/beginning-core-image-in-ios-6)教程。您必须在看起来正常之前应用过滤器。希望这可以帮助！

雷切尔：）

例如（以防万一链接中断）

```
CIImage *beginImage = [CIImage imageWithContentsOfURL:fileNameAndPath];

CIContext *context = [CIContext contextWithOptions:nil];

CIFilter *filter = [CIFilter filterWithName:@"CISepiaTone"
                          keysAndValues: kCIInputImageKey, beginImage,
                @"inputIntensity", @0.8, nil];
CIImage *outputImage = [filter outputImage];

CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];

UIImage *newImage = [UIImage imageWithCGImage:cgimg]; 
self.imageView.image = newImage;

CGImageRelease(cgimg); 
```

# c# - 在 asp.net 中检索 url 的响应对象

> ID：14618993
> 
> 赞同：0
> 
> 时间：2013-01-31T05:18:44.153
> 
> 标签：c#, asp.net

我想将参数从一个网页传递到另一个网页，但它对用户不可见。那就是传递给网页的参数应该返回应该在我的应用程序中显示的结果，而用户不知道我们已经访问了那个 url 网页..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:21:25.667

为什么不使用`Session`？它对用户不可见，并且非常易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:22:13.737

我不确定我是否理解这个问题，但听起来[Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)对象可能是您正在寻找的。

# ios - 隐藏/显示具有特定标题的 MKPolyline？

> ID：14618994
> 
> 赞同：1
> 
> 时间：2013-01-31T05:18:46.417
> 
> 标签：ios, mkmapview, mapkit, mkoverlay, google-polyline

如何隐藏/显示`MKPolyline`具有特定标题的折线 ( )？

我可以使用以下代码删除它们：

```
-(IBAction)hideOverlay:(id)sender
{
for (id<MKOverlay> overlayToRemove in self.mapView.overlays)
 {
    if ([overlayToRemove isKindOfClass:[MKPolyline class]])
    {
        if ([polyline.title isEqualToString:@"Steve"]) {
            [mapView removeOverlay:overlayToRemove];
        }
     }
  }
} 
```

但我希望可以选择显示/隐藏它们。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:37:12.520

如果您要让用户将叠加层重新添加到屏幕上，您需要对其进行引用并调用`addOverlay`. 这只是他们可以做到这一点的一个叠加层吗？只需添加一个名为的实例变量`removeableOverlay`，然后当该人点击按钮时，您无需搜索所有叠加层，您可以只找到那个

```
[mapView removeOverlay:removeableOverlay]; 
```

或者

```
[mapView addOverlay:removeableOverlay]; 
```

根据是否存在。您可以使用布尔值或按钮的状态来跟踪它，或者在其中搜索它`mapView.overlays`（您只需要检查相等性而不是类和标题）。如果存在，则可以将其删除，如果不存在，则可以添加它。

# mongodb - MongoDB 是否支持对数组字段进行 Upsert

> ID：14618998
> 
> 赞同：1
> 
> 时间：2013-01-31T05:19:09.150
> 
> 标签：mongodb

我有一个结构如下的文件：

```
{
    "_id" : 1000001,
    "ListMembers" : [
            {
                    "MemberID" : 1000,
                    "Notes" : "Test Notes for 1000"
            },
            {
                    "MemberID" : 1001,
                    "Notes" : "Test Notes for 1002"
            }
    ] 
```

}

应用程序生成一个唯一 ID。我需要实现以下目标：

1.  如果文档不存在，则插入带有数组字段的新文档。
2.  如果文档存在于集合中并且成员记录存在于数组中，则更新成员注释
3.  如果文档在集合中存在并且数组中不存在成员记录，则在数组中插入成员记录。

这里 #1 和 #2 工作正常，但 {upsert:true} 选项不适用于上面的 #3；如果文档存在但成员记录不存在，它会尝试插入具有相同 ID 的新文档，这显然会给我一个重复键错误。在这种情况下，MongoDB 是否支持 UPSERT 操作，或者我是否需要检查文档是否存在，然后对 #1 和 ($pull 和 $push) 执行 INSERT 以在数组字段上实现 #2 和 #3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:14:44.157

当前不支持此操作，因为`$` [位置运算符](http://docs.mongodb.org/manual/reference/operator/positional/#_S_)不支持更新插入：

> 不要将位置运算符 $ 用于 upsert 操作，因为插入将使用 $ 作为插入文档中的字段名称。

位置操作员需要更新成员记录的注释，但不适用于 upsert。

我建议的逻辑是进行更新查询以覆盖#2 和#3 - 我会确保[writeconcern](http://docs.mongodb.org/manual/reference/glossary/#term-write-concern)为 1 - 所以它返回更新的文档数。如果它没有返回，则插入 $push 项目到`ListMembers`- 这包括 #1*

*这里有一个潜在的竞争条件 - 对于额外的点，你应该确保当你尝试做`$push`它检查它*不匹配*方面并`ListMembers`设置 writeconcern。如果`$push`操作返回 0 - 这意味着文档在第一个操作和这个操作之间进行了更新，所以您现在可以继续返回，`$update`因为现在有一个匹配项，它将更新它。