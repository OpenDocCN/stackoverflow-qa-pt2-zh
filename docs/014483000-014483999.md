# StackOverflow 问答 14483000-14483999

# algorithm - 封闭一组椭圆一个椭圆

> ID：14483001
> 
> 赞同：1
> 
> 时间：2013-01-23T15:18:06.930
> 
> 标签：algorithm, convex-hull

我在这里看到了关于在椭圆中包围点的讨论，但是有没有一种算法可以将一组椭圆包围成一个椭圆？焦点可以用来逼近闭合集合的椭圆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:52:43.880

这里有一个提示：你可以从每个椭圆计算出的最小点集是多少，这样包含这些点的单个椭圆也将包含给定椭圆上的每个点？

# oracle - 如何为缺失的周末数据建模最后一个值

> ID：14483007
> 
> 赞同：0
> 
> 时间：2013-01-23T15:18:38.040
> 
> 标签：oracle, analytics, data-modeling

我正在尝试创建一个将数据转发到空行的查询。这是一个相当简单的查询，带有[分析函数 LAG 和 LEAD](http://rwijk.blogspot.com/2010/06/simulating-laglead-ignore-nulls.html)

该查询在没有按窗口分区且只有一个 security_id 时有效。但是，当我添加该分区和第二个 security_id 时，last_value 函数失败。粗体行不会出现。

有任何想法吗？

谢谢！

![在此处输入图像描述](../Images/52ab89c8a602461a9faad9fd4557bc39.png)

```
select t.*
,last_value(weight_pct ignore nulls) over
    (partition by security_id order by n desc) value1 from (         
select 
datekey,portfolio_id,security_id,weight_pct
, n
 from (       
select to_date(first_date, 'yyyymmdd') -
                      to_date(datekey, 'yyyymmdd') day
                     ,datekey
                     ,portfolio_id
                     ,security_id
                     ,weight_pct
                from ((select FIRST_VALUE(datekey) OVER(ORDER BY datekey desc ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) as first_date,
                              datekey,
                              portfolio_id,
                              security_id,
                              WEIGHT_PCT
                         from foo d
                        where security_id in (7,658900)
                          and portfolio_id = 2))) d
        right outer join (select level as n
                          from dual
                          connect by level <= 95) l
          on d.days = l.n) t
        order by n, security_id, datekey desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:25:46.280

Because you have set an `IGNORE NULLS` On line 2?

# sql-server-2008 - 如何使用庞大的日志文件优化 Sql Server 数据库

> ID：14483008
> 
> 赞同：0
> 
> 时间：2013-01-23T15:18:44.280
> 
> 标签：sql-server-2008, error-logging, database-optimization

我有一个大小为 1677,25 MB 的 sql server 数据库。这是我的详细数据库大小信息：

数据库大小：1677.25 MB
未分配空间：343.09 MB

保留：24488 KB 数据：18560 KB 索引大小：2632 KB 未使用：3296 KB 行数：74410

所以，正如你所看到的，它并不是那么大的数据库。问题是，日志。

日志文件大小：1.311 GB

如何清理旧日志？好吧，也许过去 3 个月很重要，但 1.3 GB 确实是一个重要的大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T17:50:09.000

首先你需要明白，为什么你的日志文件这么大。您可以使用此查询：

```
SELECT name,log_reuse_wait_desc FROM sys.databases; 
```

有关日志文件的用途以及如何解释此查询的结果的更多信息，您可以在此处找到：

[http://sqlity.net/en/556/t-sql-tuesday-25-%E2%80%93-sql-server-tips-tricks/](http://sqlity.net/en/556/t-sql-tuesday-25-%E2%80%93-sql-server-tips-tricks/)

最可能的原因是数据库处于“FULL”恢复模式。这意味着 SQL Server 会保留所有日志记录，直到您创建日志备份。进行完整备份不会改变这一点。

进行日志备份后，SQL Server 可以重用日志文件中的空间。此时，您还可以将日志文件缩小到更合适的大小。如果您不需要时间点恢复，您可以将数据库切换到简单恢复。这样，SQL Server 仅在事务处理需要它们时才保留日志记录。

但是，正如上面的文章所解释的，也可能有其他原因导致您的问题，例如忘记了复制设置。如果您需要进一步的帮助，请发布上述查询的结果。

# c - 为 C 源代码文件提供图表的工具

> ID：14483009
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:18:45.573
> 
> 标签：c, modeling

我有 3 个 C 语言代码文件和它们的 2 个头文件。我想查看在这 3 个文件中调用的所有函数的依赖关系图。Windows 上是否有工具可以简化这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:20:28.813

您是否已经尝试将[doxygen](http://www.doxygen.org)与 graphviz 包结合使用？

# sql - 查看服务器登录权限

> ID：14483010
> 
> 赞同：0
> 
> 时间：2013-01-23T15:18:50.407
> 
> 标签：sql, sql-server, sql-server-2008

我一直在努力让开发团队能够对 SQL 环境进行只读访问，我正处于最后一步。我需要他们能够看到用户/登录名和角色。我注意到，通过在任何给定数据库上授予视图定义，它允许他们的登录名查看每个数据库的用户/角色，但是即使在 master/msdb/model 上授予它也不允许登录名查看服务器范围的登录名/角色。实现这一目标的最佳方法是什么？我已经尝试过查看定义并且我已经尝试过查看服务器状态，但都没有让服务器登录对用户可见。

注意：我不希望他们有更多的访问权限，所以我不希望他们被分配一个预定义的角色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:27:28.693

我建议使用[Execute As](http://msdn.microsoft.com/en-us/library/ms188354.aspx)权限编写存储过程，并授予他们运行该过程的权限。让该存储过程输出用户列表，您应该一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:34:52.487

我不是数据库管理员，但我阅读了一篇与使用 sql server 2012 中的模式设置安全/权限相关的文章。我测试了一些设置权限的视图。

这可能会有所帮助[http://msdn.microsoft.com/en-us/library/dd283095.aspx](http://msdn.microsoft.com/en-us/library/dd283095.aspx)

# regex - Visual Studio 将文本附加到行尾，使用查找/替换结尾行正则表达式 ($)

> ID：14483012
> 
> 赞同：14
> 
> 时间：2013-01-23T15:18:53.610
> 
> 标签：regex, visual-studio, find, ssms

我正在尝试使用 Visual Studio 或 SQL Server Management Studio 使用查找/替换对话框中的以下设置将一些文本（例如“Fish”）附加到文件中每一行的末尾：

*   查找内容：$
*   替换为：鱼
*   使用正则表达式：选中

这主要完成了这项工作，但对于少数几行，它不仅将“Fish”附加到行尾，还将它放在行首。我无法辨别这种行为的任何模式，它似乎几乎是随机的，文件越大，出错的行就越多。

用 ^ 进行类似的查找/替换（将文本放在行首）没有问题。

有人知道为什么会这样吗？而且，有没有更好的建议来实现我想要的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-30T23:18:59.643

这适用于 Visual Studio 2012 和 2015：

```
Find: \r 
Replace: Fish\r 
```

确保勾选“使用正则表达式”复选框：

[![更换面板](../Images/12a8f1c80b3d0f5d93f459e60e167814.png)](https://i.stack.imgur.com/Iyisv.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-23T15:22:50.983

我不确定您为什么会看到这种情况，但是您可以尝试以下方法：

```
Find: ^.*$ 
Replace: \0Fish 
```

# ios - 游戏中心登录提醒确实完成了

> ID：14483014
> 
> 赞同：0
> 
> 时间：2013-01-23T15:19:01.110
> 
> 标签：ios, game-center

当用户在登录警报上按取消或成功登录游戏中心时，我可以调用一种方法来更新标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:54:44.457

当您调用`authenticateWithCompletionHandler:`local`GKPlayer`时，您可以更新完成处理程序块中的标签（如果用户取消，您将在完成处理程序中获得一个非零值`NSError`）。

**编辑：**

正如评论中所指出的，此方法在 iOS6 中已弃用，相反，您应该`authenticateHandler`在 local 上设置`GKPlayer`.

# php - 无法翻译菜单项 sonata_user

> ID：14483018
> 
> 赞同：2
> 
> 时间：2013-01-23T15:19:05.187
> 
> 标签：php, symfony-2.1, sonata-admin, sonata-user-bundle

我在翻译`SonataUserBundle`. 您可以在下面的屏幕截图中看到下拉菜单。

![菜单截图](../Images/be3977f47d85386bb1f04d0e78cb2713.png)

`admin_monogodb.yml`包含：

```
<parameters>
    <parameter key="sonata.user.admin.groupname">sonata_user</parameter>
</parameters> 
```

并`<services>`包含标签（缩短）：

```
<tag 
    name="sonata.admin" 
    manager_type="doctrine_mongodb"
    group="%sonata.user.admin.groupname%" 
    label="users" 
    label_translator_strategy="sonata.admin.label.strategy.underscore"
/> 
```

与任何其他翻译一样，我只需在以下内容中添加一个条目`SonataUserBundle.nl.xliff`：

```
<trans-unit id="sonata_user">
    <source>sonata_user</source>
    <target>Gebruikers111</target>
</trans-unit> 
```

但它仍然显示`sonata_user`。

我已经调试了目录`Translator`，它**确实**包含正确的翻译。

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:51:04.327

在对`Translator`组件进行深入调试后，我惊讶地发现它正在寻找域中的`sonata_user`翻译。`SonataAdminBundle`我已经将翻译从 the`SonataUserBundle`移到了`SonataAdminBundle`，现在它可以工作了。

# c# - 从 WCF 获取 XML 格式的输出但不是 JSON 输出

> ID：14483022
> 
> 赞同：1
> 
> 时间：2013-01-23T15:19:20.450
> 
> 标签：c#, wcf, rest

当我调用方法`XMLData`时，`WebMessageFormat.Xml`我得到如下响应：

![在此处输入图像描述](../Images/3a6bda9f7c92ba954af37b8ea7b826cc.png)

当我调用方法`XMLData`时，`WebMessageFormat.Json`我得到如下响应：

![在此处输入图像描述](../Images/59c0175992c21d7a48629cb66abd0d16.png)

WCF 代码：

```
namespace RestService
{
    [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        string XMLData(string id);

        [OperationContract]
        [WebGet(ResponseFormat = WebMessageFormat.Json)]     
        string JSONData();
    }

    public class RestServiceImpl : IRestServiceImpl
    {
        #region IRestServiceImpl Members

        public string XMLData(string id)
        {
            return "You requested product " + id;
        }

        public string JSONData()
        {
            return "You requested product ";
        }

        #endregion
    }
} 
```

配置文件：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="None" />
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl">
        <endpoint name="jsonEP"
                  address=""
                  binding="webHttpBinding"
                  behaviorConfiguration="json"
                  contract="RestService.IRestServiceImpl"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="json">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:28:27.410

JSON 是键值对的无序集合的序列化格式，其中“：”字符分隔键和值，以逗号分隔，通常包含在大括号（对象）、方括号（数组）或引号（字符串）中

虽然您的响应是 JSON 格式，但它也是字符串格式的纯文本！没有要序列化的对象/数组，也没有用于响应的键/值对，这就是 firebug 在网络选项卡中不显示任何 JSON 预览的原因

尝试在 REST 服务中返回一些复杂对象，您将在 Firebug 调试器中看到 JSON 响应预览：

```
public class RestServiceImpl : IRestServiceImpl
{
    public JSONResponse JSONData(string id)
    {
        return new JSONResponse { Response = "You requested product " + id };
    }
}

public class JSONResponse
{
    public string Response { get; set; }
} 
```

# c# - WPF MVVM 树视图性能

> ID：14483029
> 
> 赞同：0
> 
> 时间：2013-01-23T15:19:42.877
> 
> 标签：c#, performance, mvvm, treeview

我正在使用 MVVM 模式来显示事务的树数据。

层次结构是客户 -> 帐户 -> 交易。

我有一个基类 TreeItemViewModel，它实现了基本的依赖属性，如 IsExpanded、IsSelected 等，它们是 2 路依赖属性。然后我有一堆类比如CustomerViewModel、AccountViewModel、TransactionViewModel。每个都有一个 Children 集合。因此，CustomerViewModel 将包含一个 AccountViewModel 列表，其中每个都有自己的 TransactionViewModel 子集。然后我使用数据模板将 XAML 绑定到这些视图模型，下面给出了一个示例（transactionviewmodel 模板）。

当你扩展一个节点时，基类的 IsExpanded 方法被调用，然后加载节点的子节点——所以它是延迟加载。此外，当您展开客户节点时，它不仅会加载账户，还会加载每个账户的交易，因为它们是一些统计数据所需要的。因此，当您展开帐户节点时，它所要做的就是根据数据模板绑定呈现事务视图模型，因为此时已经加载了实际的子节点（事务视图模型对象）。

它的这种交易呈现非常缓慢，尤其是对于大量交易。

我已经用一位客户、一个有 6000 笔交易的账户对它进行了测试，并注释掉了大部分数据模板。时间安排如下

仅包括非图像列 - 26s 所有列，将图像转换器类更改为返回 null 而不是图像 - 51s 所有列包括图像：20 分钟

所以我的担忧是

1）首先，加载 6000 笔交易的 27 秒似乎很慢，而且不涉及任何图像。是我的设计减慢了它的速度吗？如果不重新设计整个东西，我怎么能做得更好？（此时不是一个选项）

2）如何加快图像处理速度，使其不会挂起应用程序？

下面的交易数据模板的好的代码

```
 <Grid.RowDefinitions>
                    <RowDefinition Height="18" />
                </Grid.RowDefinitions>

                <TextBlock Text="{Binding TransactionId}" />
                <TextBlock Grid.Column="1" Text="{Binding CutOffDate}" />
                <Image Grid.Column="2" Source="{Binding AlarmImg, Converter={StaticResource stringToImageConverter}}" Height="25" HorizontalAlignment="Left"/>
                <TextBlock Grid.Column="3" Text="{Binding SourceSystemDesc}" />
                <Image Grid.Column="4" Margin="0,0,0,0" Source="{Binding CcmpImg, Converter={StaticResource stringToImageConverter}}" Height="25" ToolTip="CCMP Type" HorizontalAlignment="Left"/>
                <Image Grid.Column="5" Margin="0,0,0,0" Source="{Binding PrintedImg, Converter={StaticResource stringToImageConverter}}" Height="25" ToolTip="Printed" HorizontalAlignment="Left"/>
                <Image Grid.Column="6" Margin="0,0,0,0" Source="{Binding AppRejImg, Converter={StaticResource stringToImageConverter}}" Height="25" ToolTip="Approved/Rejected" HorizontalAlignment="Left"/>
                <Image Grid.Column="7" Margin="0,0,0,0" Source="{Binding LockImg, Converter={StaticResource stringToImageConverter}}" Height="25" ToolTip="Locked" HorizontalAlignment="Left"/>
                <TextBlock Grid.Column="8" Style="{StaticResource myTxnStyleColor}" Text="{Binding TxnAmount}" HorizontalAlignment="Right"/>
                <TextBlock Grid.Column="9" Text="{Binding TxnCurrency}" HorizontalAlignment="Right" />
                <Image Grid.Column="10" Margin="0,0,0,0" Source="{Binding CurrencyImg, Converter={StaticResource stringToImageConverter}}" Height="25"/>
            </Grid>
        </DataTemplate> 
```

最后静态资源转换器触发返回空白图像

```
 using System;
using System.Globalization;
using System.Runtime.Caching;
using System.Windows.Data;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace Citi.Rbcs.UI.Windows.HelperClasses
{
    public class StringToImageConverter : IValueConverter
    {
        private static readonly BitmapImage BlankImage =
            new BitmapImage(new Uri("pack://application:,,,/Resources/Images/Blank.gif"));

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            try
            {
                return BlankImage;

                var imageUrl = value as string;
                if (string.IsNullOrEmpty(imageUrl)) return BlankImage;

                // Strip out the Image name so we ignore path
                if (imageUrl.LastIndexOf(@"\") != -1)
                    imageUrl = imageUrl.Substring(imageUrl.LastIndexOf(@"\") + 1);
                if (imageUrl.LastIndexOf(@"/") != -1)
                    imageUrl = imageUrl.Substring(imageUrl.LastIndexOf(@"/") + 1);

                var image = MemoryCache.Default.Get(imageUrl) as ImageSource;

                if (image == null)
                {
                    image = new BitmapImage(new Uri("pack://application:,,,/Resources/Images/" + imageUrl));
                    MemoryCache.Default.Set(imageUrl, image, new CacheItemPolicy());
                }

                return image;
            }
            catch (Exception)
            {
                return BlankImage;
            }
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

任何帮助将不胜感激，理想情况下，我希望通过这个分层数据的 WPF 树视图，您可以在大约 5-10 秒内扩展一个包含 6000 个子节点的节点。是什么导致它需要这么长时间，它只是 MVVM 数据绑定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:47:13.683

我假设您没有同时显示 XAML 中的所有图像。

速度慢有两个可能的原因：

1 - 繁重的 XAML 解析和加载非常非常慢

2 - 绑定很棒，但是是顺序的，一个绑定会锁定其他绑定等等。

你可以试试：

1 - 不要在设计时将不必要的控件添加到您的 XAML 中，在运行时添加它以动态创建控件，更快（或最快）。即使这些没有显示，也要这样做，记住问题在于解析和加载。

2 - 如果可能，尝试使用异步绑定。这样，绑定不会相互锁定。

# ios - 如何获取带小数的格式数字（XCode）

> ID：14483032
> 
> 赞同：3
> 
> 时间：2013-01-23T15:19:51.530
> 
> 标签：ios, iphone, xcode, decimal, number-formatting

我的目标是为 iPhone 创建一个客户计算器应用程序，我正在使用 Xcode 编写我的应用程序。我找不到解决方案的问题是如何格式化使用小数（带有额外零）的数字而不转换为科学记数法

我试过...

```
buttonScreen.text = [NSString stringWithFormat:@"%0.f",currentNumber]; 
```

`%0.f`格式总是四舍五入，所以如果用户输入“4.23”，它会显示“4”

`%f`格式化带有 6 位小数的数字（输入“5”显示为“5.000000”），但我不想在数字末尾显示额外的零。

`%10.4f`是我在阅读中看到的其他解决方案，但我的问题是我不知道答案中有多少个小数，我可能想要零个小数或 10 个小数，具体取决于数字。

以下是我想显示的数字示例（不带逗号）：大于 6 位的整数，大于 6 位的十进制数。

```
123,456,789;
0.123456789;
12345.6789;
-123,456,789;
-0.23456789;
-12345.6789; 
```

*这是对我之前的问题“如何在没有科学记数法或小数的情况下格式化数字”的精神转贴，我打算写“不必要（额外的零）”时措辞不佳，但在重读我的帖子后，我清楚地看到我无法传达这一点在我的问题的任何时候。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T15:33:58.697

使用[NSNumberFormatter 类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)。

首先定义格式化程序：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init]; 
```

然后您可以定义格式化程序的各种属性：

```
formatter.numberStyle = NSNumberFormatterDecimalStyle;
formatter.maximumIntigerDigits = 3;
formatter.minimumFractionDigits = 3;
formatter.maximumFractionDigits = 8;
formatter.usesSignificantDigits = NO;
formatter.usesGroupingSeparator = YES;
formatter.groupingSeparator = @",";
formatter.decimalSeparator = @".";
.... 
```

您将数字格式化为这样的字符串：

```
NSString *formattedNumber = [formatter stringFromNumber:num]; 
```

玩弄它。它非常简单，但可能需要一些工作才能获得您想要的外观。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-01T10:50:38.747

实际上，使用它更有意义：

```
label.text = [NSString stringWithFormat:@"%.4f", answer]; 
```

这告诉 XCode 以 4 位小数显示您的数字，但它不会尝试用空格“填充”数字的前面。例如：

```
1.23 ->  "    1.2300"   //  When using [NSString stringWithFormat:@"%9.4f", answer];
1.23 ->  "1.2300"       //  When using [NSString stringWithFormat:@"%.4f", answer]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:29:01.360

尝试这样的事情

```
label.text = [NSString stringWithFormat:@"%9.4f", answer]; 
```

其中 9 表示总位数（就对齐填充而言），4 表示 4 位小数。

# asp.net-mvc - 字符串模型，将值传递给控制器 问题

> ID：14483035
> 
> 赞同：2
> 
> 时间：2013-01-23T15:20:00.453
> 
> 标签：asp.net-mvc, razor

我有一个绑定到字符串的 ASP.NET Razor 视图。它非常简单：

```
@model string
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

Hello, @Model

@using(Html.BeginForm())
{
    <fieldset>
        <label for="name" style="color: whitesmoke">Name:</label>    
        <input type="text" id="name"/>
        <br/>
        <input type="submit" value="Submit"/>
    </fieldset>
} 
```

还有一个简单的控制器：

```
[HttpGet]
public ActionResult Index()
{
    object model = "foo";
    return View(model);
}

private string name;
[HttpPost]
public ActionResult Index(string name)
{
    return View();
} 
```

当我按下提交按钮时，会触发索引发布操作结果，但“字符串名称”参数为空。Razor 还不够聪明，无法从视图中自动将此属性绑定到我的控制器，因为输入 id 与控制器上的参数名称匹配吗？如果没有，我该如何绑定？我知道具有属性的模型可以使用 Html.HiddenFor(m => m.Foo)，但由于没有属性，我不知道如何正确调用此方法。我可以正确设置它调用 Html.Hidden ("name","foo")，但我不知道如何在这里传递值。我知道我可以使用 jquery 调用，例如：

```
 @Html.Hidden("name", "$('input[id=name]').val())"); 
```

这实际上将 jquery 字符串作为值发送到控制器......我不确定此时该做什么。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:26:33.580

绑定属性足够聪明，只需为您的输入指定一个与 action 参数匹配的名称：

```
<input type="text" id="name" name="name" /> 
```

# android - 什么是 DirEncryptConnector？

> ID：14483041
> 
> 赞同：1
> 
> 时间：2013-01-23T15:20:07.500
> 
> 标签：android

当我运行我的应用程序时，我得到了一些操作。我得到日志。但是我的应用程序没有任何内容，但有很多次相同的日志：

```
01-22 11:58:32.085   562   562 D STATUSBAR-NetworkController: refreshSignalCluster: data=0 bt=false 
01-22 11:58:33.695   458   512 E DirEncryptConnector: Communications error: java.io.IOException: No such file or directory 
01-22 11:58:33.695   458   512 E DirEncryptConnector: Error in NativeDaemonConnector:    java.io.IOException: No such file or directory 
01-22 11:58:34.105   562   562 D STATUSBAR-NetworkController: refreshSignalCluster: data=0  bt=false 
```

什么是 DirEncryptConnector？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:29:30.820

更多细节，看这里，是Android源代码： http: [//gitorious.org/ginger/frameworks-base/blobs/2435a927f30efe38c673bfaed64a9880028da9e8/services/java/com/android/server/NativeDaemonConnector.java](http://gitorious.org/ginger/frameworks-base/blobs/2435a927f30efe38c673bfaed64a9880028da9e8/services/java/com/android/server/NativeDaemonConnector.java)

在内部，您可以查看这些日志何时写入，例如，您有

```
log.e(TAG, "Error in NativeDaemonConnector", e); 
```

在第 85 行。

# java - 使用 Jackson java 反序列化派生类

> ID：14483043
> 
> 赞同：1
> 
> 时间：2013-01-23T15:20:14.193
> 
> 标签：java, jackson, deserialization

我有一个基类如下：

```
public class Criteria {
    private CriteriaType type;
        //getters & setters
        public enum CriteriaType {
        Condition, Medication
    }
} 
```

和派生类

```
public class ConditionCriteria extends Criteria {
    private String a;
        //getters & setters
}

public class MedicationCriteria extends Criteria {
    private String b;
        //getters & setters
} 
```

和另一个班级

```
public class CriteriaGroup {
    Criteria criteria;
        //getters & setters
} 
```

`CriteriaGroup`我使用 Jackson将一个序列化的 JSON 类字符串发送到服务器以进行（反）序列化。服务器上的服务如下所示：

```
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Response createCriteriaGroup(CriteriaGroup criteriaGroup) {... 
```

但是，Jackson 不会将反序列化的 JSON 转换为派生类之一。如何根据类的`type`字段实现这种映射`Criteria`？

谢谢..

在反序列化 ConditionCriteria 的 JSON 时出现这样的异常：

```
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "a" (Class Criteria), not marked as ignorable
 at [Source: org.eclipse.jetty.server.HttpInput@3c92218c; line: 1, column: 92] (through reference chain: CriteriaGroup["criteria"]->Criteria["a"])
        at org.codehaus.jackson.map.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:53)
        at org.codehaus.jackson.map.deser.StdDeserializationContext.unknownFieldException(StdDeserializationContext.java:267) 
```

……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:27:58.727

您将需要添加`@JsonTypeInfo`以`Criteria`启用其他类型信息，以支持多态类型。你应该能够找到这样的例子（只是谷歌“jackson JsonTypeInfo”）。

# jquery - 最大的项目总是首先显示在同位素中

> ID：14483045
> 
> 赞同：2
> 
> 时间：2013-01-23T15:20:20.330
> 
> 标签：jquery, jquery-plugins, jquery-isotope

我一直在试验优秀的 jQuery Isotope 库，这里有一个工作示例：http: [//nmcweb.co.uk/crv](http://nmcweb.co.uk/crv)

我想要的是每次单击并展开一个项目时，它都会移动到网格的左上角，基本上成为排序顺序中的第一个项目。我已经尝试了几个关于堆栈溢出的类似问题的代码，但没有运气。

它往往在最初的几次点击中起作用，但之后就停止了。有任何想法吗？

我是 jQuery 的新手，所以我可能错过了一些非常愚蠢的东西。

HTML：

```
<div id="container">

 <div class="box">
    <a href="#"><img src="./stock/1.png" /></a>
      <div class="more" >
         <p>Text blah blah blah</p>

      </div>
   </div> 
```

jQuery：

```
 <script>$(window).load(function(){

  var $container = $('#container');

  $container.isotope({
     masonry: {
      columnWidth: 320
    },

    itemSelector: '.box',

    getSortData : {
      width : function( $item ){
        // sort by biggest width first, then by original order
        return -$item.width() + $item.index();
      }
    },
    sortBy : 'width'

  })

     $('.box').click(function(){
    var $this = $(this),
        tileStyle = $this.hasClass('big') ? { width: 300 } : { width: 620 };

    $this.addClass('big').children('.more').show();
    $this.siblings().removeClass('big').children('.more').hide();

    $container.isotope( 'updateSortData', $this ).isotope();

  });

});</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T00:52:27.107

这是一个小提琴的返工（找不到链接:(
原版在瓷砖上有链接，给出了我想象的正是你所追求的。我会多看看我的本地系统但是......啊，混乱。我希望这会有所帮助。

```
<style>
.element {  width: 75px;  height: 75px;  background: #0FF;  margin: 5px;  float: left;}
.trans { width: 75px;  height: 75px;  background: #F0F;  margin: 5px; float:left}
.element.searchPali {  width: 160px;  height: 160px;  background: red;}
/* Start: Recommended Isotope styles *//**** Isotope Filtering ****/
.isotope-item {  z-index: 2;}
.isotope-hidden.isotope-item {  pointer-events: none;  z-index: 1;}
/**** Isotope CSS3 transitions ****/
.isotope,.isotope .isotope-item {  -webkit-transition-duration: 0.8s;     -moz-transition-duration: 0.8s;          transition-duration: 0.8s;}
.isotope {  -webkit-transition-property: height, width;     -moz-transition-property: height, width;          transition-property: height, width;}
.isotope .isotope-item {  -webkit-transition-property: -webkit-transform, opacity;     -moz-transition-property:    -moz-transform, opacity;          transition-property:         transform, opacity;}
/**** disabling Isotope CSS3 transitions ****/
.isotope.no-transition,.isotope.no-transition .isotope-item,.isotope .isotope-item.no-transition {  -webkit-transition-duration: 0s;     -moz-transition-duration: 0s;          transition-duration: 0s;}
/* End: Recommended Isotope styles */
</style>

<table border=1><TR><TD>
<div class="trans">One <a href="#" id="tile-4">link to element D</a></div>
<div class="trans">Two<a href="#" id="tile-3">link to element C</a></div>
</TD><TD>
<div class="trans">Three <a href="#" id="tile-6">link to element F</a></div>
<div class="trans">Four<a href="#" id="tile-7">link to element G</a></div>
</TD></TR></table>

<div id="container" style='width:355px;border:1px solid black'>
<table ><TR><TD>
<div id="1" class="element">A</div>
<div id="2" class="element">B</div>
<div id="3" class="element">C</div>
<div id="4" class="element">D</div>

</TD><TD valign=top>
<div id="5" class="element">E</div>
<div id="6" class="element">F</div>
<div id="7" class="element">G</div>
</TD></TR></table>
</div>
<script src="../../jquery.min.js"></script>
<script src="jquery.isotope.min.js"></script>

<script>
$(function() {

var $container = $('#container'),
$items = $('a');
$container.isotope({ itemSelector: '.element',
masonry: { columnWidth: 85 },
getSortData: { 
searchPali: function($item) { return ($item.hasClass('searchPali') ? -1000 : 0) + $item.index(); }
},
sortBy: 'searchPali'
});

$('.trans').click(function(event) {
var $targetID = event.target.id;
$targetID =  $targetID.replace('tile-','');
$this=$('#'+$targetID);
var $previoussearch = $('.searchPali');
if (!$this.hasClass('searchPali')) { $this.addClass('searchPali'); }
$previoussearch.removeClass('searchPali');
$container.isotope('updateSortData', $this).isotope('updateSortData', $previoussearch).isotope();
});

});
</script> 
```

# java - 如何在没有模型作为参数的情况下将属性传递给视图？

> ID：14483048
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:20:38.347
> 
> 标签：java, spring, spring-mvc

我正在覆盖属于超类的方法。方法不带参数。因此，我无法使用模型将对象传递给视图。有人有什么建议吗？

```
@Override
protected String connectView(){
    // I'd like to include an object in Model here
    // e.g. model.addAttribute(....) 
    // but unpossible because super does not take a Model as param
    return "connect/status";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:48:08.130

至少没有请求对象，我不相信你可以简单地做你所要求的。但是，有几个选项：

1.  使用 servlet 过滤器...将所需的值添加到那里的会话中
2.  使用装饰器模式，您将在另一个包装器类中创建您的类（在本例中为控制器）的实例。在您的包装器中，您将进行额外的处理，然后调用包装的内部对象（您的包装控制器），然后进行任何最终处理。
3.  HandlerInterceptor like @sp00m 建议（虽然我从未使用过它，所以我没有输入）

我敢肯定那里可能还有其他一些选择，但我想不出其他任何选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:23:58.267

这应该适合您的需要，使用`HandlerInterceptor`自定义注释`@Model`和反射。

*模型.java*

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface Model {

} 
```

*请求拦截器.java*

```
@Service
public class RequestInterceptor implements HandlerInterceptor {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws ServletException {
        try {
            Class<?> clazz = request.getClass();
            if (clazz.isAnnotationPresent(Controller.class)) {
                for (Field field : clazz.getDeclaredFields()) {
                    if (field.isAnnotationPresent(Model.class)) {
                        field.set(request, new ModelMap());
                        break;
                    }
                }
            }
        } catch (IllegalAccessException e) {
            // log("Cannot access model field of controller " + clazz.getSimpleName());
        }
        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) {
        try {
            Class<?> clazz = request.getClass();
            if (clazz.isAnnotationPresent(Controller.class)) {
                for (Field field : clazz.getDeclaredFields()) {
                    if (field.isAnnotationPresent(Model.class)) {
                        ModelMap model = (ModelMap) field.get(request);
                        if (model != null) {
                            modelAndView.addAllObjects(model);
                        }
                        break;
                    }
                }
            }
        } catch (IllegalAccessException e) {
            // log("Cannot access model field of controller " + clazz.getSimpleName());
        }
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
    }

} 
```

*应用程序上下文.xml*

```
<!-- register the interceptor -->
<mvc:interceptors>
    <bean class="your.package.to.the.RequestInterceptor" />
</mvc:interceptors> 
```

*你的控制器.java*

```
@Controller
public class YourController extends ConnectController {

    @Model
    private ModelMap model;

    @Override
    protected String connectView(){
        // model is here available
        model.addAttribute("attrName", "attrValue");
        return "connect/status";
    }

} 
```

# objective-c - ios UITableView：如何在特定的标题部分显示正确的数据列表？

> ID：14483054
> 
> 赞同：0
> 
> 时间：2013-01-23T15:20:54.497
> 
> 标签：objective-c, xcode, uitableview, ios5

所以我对我的一个观点有几个部分，例如：

```
1\. My Events
2\. My Matches
3\. All Events 
```

现在我想在每个部分显示几行（有限制），然后添加另一个指向主视图的单元格。

由于数据将来自 API，我仍然需要将数据分组到三个部分，这很容易，因为我在该实现上有 3 个数组，例如：

```
@implementation MainOptionsController{
 NSArray *mainHeaders;
 NSArray *myEvents;
 NSArray *myMatches;
 NSArray *allEvents;
}

-(void)ViewDidLoad{
  [super ViewDidLoad];
  myEvents = [NSArray arrayWithObjects:@"My Event 1", @"My Event 2", @"View More" nil];
  myMatches =[NSArray arrayWithObjects:@"My match 1", @"My match 2", @"View More" nil]; 
  allEvents = [NSArray arrayWithObjects:@"Event 1", @"Event 2", @"View More" nil];
} 
```

我已经显示了每个部分的标题，但我的问题是如何在各自的部分上显示数组？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:29:37.820

Implement the following method in your tableView delegate class

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

This method is called from the tableView foreach cell it displays.

# ruby-on-rails - 无法捆绑/安装 Kgio 错误

> ID：14483058
> 
> 赞同：17
> 
> 时间：2013-01-23T15:21:11.673
> 
> 标签：ruby-on-rails, github, installation, bundle

每次我进行捆绑安装时，我似乎都无法使用我的应用程序安装 kgio。我得到这个错误！谁能帮我？我已经尝试过 5 次重新捆绑。

```
C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
    checking for CLOCK_MONOTONIC in time.h... no
    checking for CLOCK_MONOTONIC() in time.h... no
    checking for clockid_t in time.h... no
    checking for clock_gettime() in -lrt... no
    checking for t_open() in -lnsl... no
    checking for socket() in -lsocket... no
    checking for poll() in poll.h... no
    checking for getaddrinfo() in sys/types.h,sys/socket.h,netdb.h... no
    getaddrinfo required
    *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/RailsInstaller/Ruby1.9.3/bin/ruby
        --with-rtlib
        --without-rtlib
        --with-nsllib
        --without-nsllib
        --with-socketlib
        --without-socketlib 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-17T04:45:30.440

实际上，答案是你不能在 windows 上使用 kgio。在找到答案之前，我花了 3 个小时来研究另一个答案。根据开发人员的说法，Kgio 需要一个类似 unix 的环境。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-23T15:35:26.143

您可能缺少必需的库。

同样来自[RubyInstaller Wiki](https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-devkit_dll_conflict)

此失败是由于本机 gem 编译/安装过程使用 libiconv-2.dll 版本而不是集成到 DevKit 中的版本，因为 Windows 如何搜索 DLL

这可以通过在您的计算机上搜索文件 libiconv-2.dll 并重命名、删除或以其他方式移动任何找到的实例并重新运行本机 gem 安装过程或在您的情况下是 Bundle Install 来解决

建议如果您不知道将 libiconv-2.dll 文件放在找到它的目录中的原因或原因，则在编译所需的任何 gem 后将其移回。这可能会阻止其他应用程序中断。

**编辑**：

kgio gem 仅在类 Unix 系统 ( [http://bogomips.org/kgio/](http://bogomips.org/kgio/) ) 上构建和运行，它使用 Windows 本身不可用的功能。

如果您尝试使用 Unicorn，则只需更换网络服务器。

试试瘦。将以下行添加到您的 Gemfile：

```
gem 'thin' 
```

# c++ - 迭代器指向 C++11 中较大容器中结构的单个组件，使用 std::function 对象

> ID：14483062
> 
> 赞同：3
> 
> 时间：2013-01-23T15:21:19.077
> 
> 标签：c++, c++11, function-pointers

假设我有一个结构类型的向量；我正在尝试遍历此结构中特定成员的所有实例。因为我想在我的方法中通用，所以我想使用 std::function<> 对象来指定我想要访问的信息。我构建了以下模板类

```
#include <iostream>
#include <vector>
#include <iterator>
#include <functional>
#include <algorithm>
#include <cmath>

template <typename SrcList, typename Tgt>
class Access
{
    typedef std::function<Tgt &(typename SrcList::value_type &)> func_type;
    typedef typename SrcList::iterator src_iterator;
    typedef Tgt value_type;

    SrcList &source;
    func_type f;

    public:
        Access(SrcList &source_, func_type const &f_):
            source(source_), f(f_) {}

        class iterator: 
            public src_iterator,
            public std::iterator<std::forward_iterator_tag, value_type>
        {
            Access const *obj;

            public:
                iterator(Access const *obj_, src_iterator i):
                    src_iterator(i), 
                    obj(obj_)
                {}

                value_type &operator*()
                {
                    return (obj->f)(src_iterator::operator*());
                }
        };

        value_type &operator[](size_t i)
        { return f(source[i]); }

        iterator begin()
        { return iterator(this, source.begin()); }

        iterator end()
        { return iterator(this, source.end()); }
}; 
```

接下来我们定义一个结构 S，以及一个测试类的 main 函数

```
struct S
{
    double v[3];
};

std::ostream &operator<<(std::ostream &out, S const &s)
{
    return out << s.v[0] << " " << s.v[1] << " " << s.v[2];
}

int main()
{
    std::vector<int> A = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    std::vector<S> Q(10);

    for (unsigned k = 0; k < 3; ++k)
    {
        Access<std::vector<S>, double> acc(Q,
            [k] (S &s) -> double&
        {
            return s.v[k];
        });

        std::transform(A.begin(), A.end(), acc.begin(),
            [k] (int i)
        {
            return pow(i, k+1);
        });

        for (auto x : Q)
            std::cout << x.v[k] << std::endl;
        std::cout << "--- end of part " << k << " ---\n";
    }
    std::cout << std::endl;

    for (auto x : Q)
        std::cout << x << std::endl;

    return 0;
} 
```

这个程序应该打印数字 0..10，它们的正方形和立方体。该方法似乎有效，但是在打印“---第1部分结束---”之后我得到了一个内存转储，说：“双重释放或损坏”。我已经通过 gdb 运行了代码，并且在 Access<> 中的 std::function<> 成员的内存管理中似乎出现了问题，但我无法弄清楚究竟是什么破坏了这段代码。我已经构建了一个具有只读访问权限的类似结构，并且它完美无缺。

我在这里做错了什么？

（使用 g++-4.7.2）

干杯，约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:11:20.410

问题是向量`A`包含 11 个条目，而向量`Q`仅包含 10个。`std::transform<>`期望目标范围至少与源范围一样大。

一个简单的解决方法是更改`Q`​​如下定义：

```
std::vector<S> Q(A.size()); 
```

# knockout.js - 除非在兼容性视图中，否则脚本会冻结 IE

> ID：14483066
> 
> 赞同：0
> 
> 时间：2013-01-23T15:21:22.963
> 
> 标签：knockout.js, internet-explorer-9, dynamics-crm-2011, dynamics-crm, kogrid

目标是在 CRM 中的表单上的 Web 资源中使用网格控件。我决定使用 KoGrid，因为它可以很容易地绑定到我们已经拥有的淘汰视图模型。问题是在 CRM 上下文中使用 KoGrid 会导致 IE 9 完全停止响应。控制台中没有记录异常或错误；唯一的症状是浏览器锁定。

将浏览器置于兼容模式可以解决问题，不幸的是，在 IE 9 中，文档类型是继承的，因此我们无法控制 Web 资源的呈现模式。此外，这实际上只是解决了症状而不是原因。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="../css/KoGrid.css" rel="stylesheet" />
    <script src="../js/jquery_1.8.3.min.js"></script>
    <script src="../js/knockout.js"></script>
    <script src="../js/koGrid_2.1.1.js"></script>
    <style type="text/css">
        .gridStyle {
            border: 1px solid rgb(212,212,212);
            width: 400px; 
            height: 300px;
        }
    </style>
</head>
<body>
    <script type="text/javascript">
        $(function () {
            setTimeout(function () {
                debugger;
                function mainVm() {
                    var self = this;
                    this.myData = ko.observableArray([{ name: "Moroni", age: 50 },
                                                      { name: "Tiancum", age: 43 },
                                                      { name: "Jacob", age: 27 },
                                                      { name: "Nephi", age: 29 },
                                                      { name: "Enos", age: 34 }]);
                    this.gridOptions = {
                        canSelectRows: false,
                        multiSelect: false,
                        data: self.myData
                    };
                };
                ko.applyBindings(new mainVm());
            }, 3000);            
        });

    </script>

    <div class="gridStyle" data-bind="koGrid: gridOptions"></div>
</body>
</html> 
```

[http://jsfiddle.net/wycleffsean/yHrBA/2/](http://jsfiddle.net/wycleffsean/yHrBA/2/)

仅在 CRM 中可能导致此行为的原因是什么？它在每个浏览器中都可以正常工作。渲染模式与脚本行为有什么关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:25:38.773

![在此处输入图像描述](../Images/ed18fc5005670422ad5cb0b52e4a7ced.png)确保所有 CSS 和 JavaScript 文件也是 Web 资源，或者替换托管在其他地方的完整 URL。

```
<link href="../css/KoGrid.css" rel="stylesheet" />
<script src="../js/jquery_1.8.3.min.js"></script>
<script src="../js/knockout.js"></script>
<script src="../js/koGrid_2.1.1.js"></script> 
```

如果您确实引用了 CDN，请确保使用 HTTPS 以避免任何混合模式身份验证。

# javascript - 拾色器设计和值继承到另一个 div

> ID：14483068
> 
> 赞同：1
> 
> 时间：2013-01-23T15:21:26.647
> 
> 标签：javascript, jquery, html

我正在使用这个颜色选择器[http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/](http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/) 它由 steven

尽管从文档中我将其用作

```
 $(document).ready(function() {

    $('#picker').farbtastic('#color');

  }); 
```

html代码是`

`

我必须将它创建为两个单独的部门。我希望在输入中更改颜色十六进制值，但在另一个分区背景中显示颜色。

如果我这样使用它

```
<div id="colorpicker"></div>
    <input type="text" id="color" name="color" value="#123456" />
    <div id='color' ></div> 
```

更新将在一个 id 中进行，因此在此唯一的输入将随颜色及其十六进制值而变化。从脚本[http://acko.net/files/farbtastic/demo/farbtastic.js](http://acko.net/files/farbtastic/demo/farbtastic.js) 它只需要一个函数参数，所以我想要这样，当分割的颜色改变时，颜色十六进制值应该在输入下更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:42:50.223

您仍然不能使用具有相同 ID 的两个元素。它不是那样工作的。在脚本作者网页中，传入目标 ID 即可为您提供演示的确切功能。如果您进一步向下滚动，您可以在其中传递函数的说明。这就是你想要做的：

```
$('#colorpicker').farbtastic(setColors);

var setColors = function(color){
  $('#colorText').val(color);
  $('#colorBackground').css('background-color' : color);
} 
```

我没有对此进行测试，但你应该明白这一点并走在正确的道路上。

[更新] 我在小提琴中对此进行了测试，但它不起作用，尽管它与作者文档完全一致。所以你可以做的是：

```
<div id="colorpicker"></div>
<input type="text" id="colorText" value="#123456" />
<div id="colorDiv">div<div> 
```

两个单独的 ID，一个用于 div，一个用于文本，然后同时选择它们：

```
var domNodes = $('#colorDiv, #colorText');
$('#colorpicker').farbtastic(domNodes); 
```

[这是小提琴](http://jsfiddle.net/bfelda/gFdrh/1/)

* * *

* * *

此外，如果您根本不希望输入具有背景颜色，则可以覆盖默认功能并做任何您想做的事情：

[JSFiddle](http://jsfiddle.net/bfelda/gFdrh/2/)

```
$.farbtastic(colorpicker).linkTo(callBack);

function callBack(color) {
    $('#colorText').val(color);
    $('#colorDiv').css('background-color', color);
} 
```

# mysql - DBD::MySQL: LongReadLen 和 LongTruncOk

> ID：14483069
> 
> 赞同：0
> 
> 时间：2013-01-23T15:21:27.427
> 
> 标签：mysql, perl, dbi, truncate

这些属性`LongReadLen`和`LongTruncOk`使用[DBD::mysql](http://search.cpan.org/perldoc?DBD%3A%3Amysql)作为 Perl5 数据库接口 (DBI) 的驱动程序时有什么意义吗？我没有在`DBD::mysql`文档中找到这些属性，但我在互联网上找到了一些将这些属性与`DBD::mysql`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:28:26.083

这是适用于所有句柄的[DBI 属性。](https://metacpan.org/module/DBI#ATTRIBUTES-COMMON-TO-ALL-HANDLES)它记录在 DBI 库中。AFAIK 它适用于 DBD::mysql 和每个 DBI 驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:18:43.010

如果您搜索[dbdimp.c](http://cpansearch.perl.org/src/CAPTTOFU/DBD-mysql-4.022/dbdimp.c)我会发现：

```
 *
 *  Name:    dbd_st_blob_read
 *
 *  Purpose: Used for blob reads if the statement handles "LongTruncOk"
 *           attribute (currently not supported by DBD::mysql) 
```

我找不到对 longreadlen 的任何参考。注意，我自己不使用 DBD::mysql，这只是在代码中快速搜索。

# ios - 如何从图像的 nsdata 中最小化 base64 字符串的长度？

> ID：14483070
> 
> 赞同：1
> 
> 时间：2013-01-23T15:21:32.477
> 
> 标签：ios, objective-c, encoding, base64, nsdata

我使用将图像转换为 NSData 并将 NSData 转换为 base64string

```
NSData *imagedata = UIImageJPEGRepresentation(imageView.image, 0.1f);
NSString *c = [NSString base64StringFromData:imagedata]; 
```

字符串转换的 fn

```
+ (NSString*)base64forData:(NSData*)theData {

    const uint8_t* input = (const uint8_t*)[theData bytes];
    NSInteger length = [theData length];

    static char table[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    NSMutableData* data = [NSMutableData dataWithLength:((length + 2) / 3) * 4];
    uint8_t* output = (uint8_t*)data.mutableBytes;

    NSInteger i;
    for (i=0; i < length; i += 3) {
        NSInteger value = 0;
        NSInteger j;
        for (j = i; j < (i + 3); j++) {
            value <<= 8;

            if (j < length) {
            value |= (0xFF & input[j]);
           }
        }

        NSInteger theIndex = (i / 3) * 4;
        output[theIndex + 0] =                    table[(value >> 18) & 0x3F];
        output[theIndex + 1] =                    table[(value >> 12) & 0x3F];
        output[theIndex + 2] = (i + 1) < length ? table[(value >> 6)  & 0x3F] : '=';
        output[theIndex + 3] = (i + 2) < length ? table[(value >> 0)  & 0x3F] : '=';
    }

    return [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
} 
```

但是结果base64string太长了，它的长度在300000以上。即，

```
int len = c.length; 
```

len 的值大于 300000。

图像是 3 到 4 mb 事实上我将图像压缩到 0.1f

```
 NSData *imagedata = UIImageJPEGRepresentation(iivv.image, 0.1f); 
```

如何最小化长度，还有其他代码用于从 NSData 进行 base64conversion 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T15:33:45.170

Base64 总是比原始数据需要更大的空间，因为它不会使用一个字节中的所有位。这是有意完成的，以确保更高位在从一个系统传递到另一个系统时不会引起问题。所以实际上它用空间换取了传输安全。

它之所以被称为 Base64，是因为它每个字节只使用 6 位（2^6=64），因此有效地占用了原始数据只有 4 个字节的 5 个字节。或者换句话说：大小将增加 25%。

Base64 编码器当然不关心你输入的字节代表什么，所以你可以自由地压缩你的数据，只要它仍然是它自己的格式（例如，创建一个 PNG 或 JPG未压缩的图像数据），然后将其编码为 Base64。

# python - wxPython：在 wx.Lisbook wx.Panels 中控制导航

> ID：14483072
> 
> 赞同：0
> 
> 时间：2013-01-23T15:22:04.493
> 
> 标签：python, python-2.7, wxpython

世界！

我想问你一个问题，一个简单的解决方案（我猜）我在使用 wxPython 的 wx.Lisbook 组件时遇到的一个令人伤脑筋的问题。

事实上，我想流畅地从一个 wx.Panel 切换到另一个，而不需要用户输入。我已经尝试过 SetFocus()、Show()/ShowWithEffect() + Hide()/HideWithEffect() 方法，但效果不佳。

Show()/Hide() 给出了更好的结果，但选定的缩略图仍然是之前显示的面板...

对操作 wx.Listbook 的方法或良好做法有任何想法吗？

非常感谢您的回答！

帕特里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:29:11.187

You want to be able to switch between panels? You should check out the various "Book" controls in wxPython, such as the Toolbook, Notebook, AUINotebook, etc. I also wrote a tutorial that's just on switching panels using the menu:

[http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/](http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/)

You could use a wx.Timer to do the switching too if you didn't want any user involvement.

# c# - 无法在实体框架中使用土耳其语字符

> ID：14483074
> 
> 赞同：4
> 
> 时间：2013-01-23T15:22:20.577
> 
> 标签：c#, sql-server, entity-framework

我们有一个在国际上使用的大型 SaaS ASP .NET 4.0 应用程序。我们正在慢慢地将我们的经典 ADO 数据提供程序迁移到实体框架。

我们使用 MS Sql server 2008。对于土耳其客户，我们对字符列使用土耳其排序规则“Turkish_CI_AS”。即 8 位 varchar 字段（我们不使用 16 位 nvarchar 列）

现在我在使用 EF 添加新对象时遇到了问题。'ş' 等特殊字符已更改：

```
 using (TestEntities myEntity = new TestEntities())
    {
                    MyObject test = new MyObject()
                    {
                        TestString = "baş"
                    };

                    myEntity.MyObjects.AddObject(test);
                    myEntity.SaveChanges();
    } 
```

当我使用调试器单步执行时，“test.TestString”在这行代码中仍然是“baş”：

```
myEntity.MyObjects.AddObject(test); 
```

但是在数据库中，字段“TestString”的值是“bas”。'ş' 保存为 's' 这不会发生在我的旧数据提供程序方法中。

如何使用 EF 将土耳其语字符添加到我的数据库中？有人有什么好的建议吗？我尝试了很多东西，但无法弄清楚:)

tnx，弗兰克

编辑

在一个小测试设置上运行探查器显示了这一点：

```
exec sp_executesql N'insert [dbo].[TestObjects]([TestChar])
values (@0)
select [TestId]
from [dbo].[TestObjects]
where @@ROWCOUNT > 0 and [TestId] = scope_identity()',N'@0 varchar(255)',@0='Bas' 
```

显然 sql 接收到错误的值，真正的责任是 .NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:58:33.343

好的，我想通了。在 MySql 中，可以在连接字符串中添加编码信息，Microsoft sql 不允许这样做。

EF 似乎通过查看默认数据库排序规则来确定编码。在我们的设置中，数据库排序规则是 Latin1，而具有客户特定数据的表具有排序规则“Turkish_CI_AS”。

所以我有两个选择：

1）更改整个数据库的默认排序规则（对系统和配置表等的影响）

2) 将我的列更改为 nvarchar

最终将更改为 unicode，现在我们将使用一些可以正常工作的旧 ADO.NET！:)

tnx 和我一起思考

# .htaccess - Backbone.js PushState 路由 .htaccess 仅作为散列工作，但无处可去

> ID：14483076
> 
> 赞同：3
> 
> 时间：2013-01-23T15:22:24.450
> 
> 标签：.htaccess, backbone.js, routes, pushstate, hashbang

例如，我有一个网站 domain.com。我有带有 pushstate 和 fallback 的backbone.js，当我转到 domain.com/about 时，它会加载 index.html 页面并将 pushstates 设置为 about。一切正常。但是，如果我想转到一个目录，其中有一个页面，例如：www.domain.com/bio/moreinfo，它不起作用并抛出一个无效页面。如果我在 IE 中做它工作正常。我的 htaccess 文件有以下内容：

```
RewriteEngine on
# html5 pushstate (history) support: 
<ifModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !index
RewriteRule (.*) index.html [L]
</ifModule> 
```

如果我直接导​​航到 domain.com/bio/moreinfo 页面，它就会出错（我认为是因为我的服务器想要转到 bio 目录？或者我可能需要以不同的方式实际控制主干中的路由？它只是在 bangs 上工作所以它必须是一些奇怪的推送状态目录的东西，其中 #bio/info 与 apache 不一样 /bio/info 。感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:02:13.663

很好地使用另一个建议帖子中的答案，这是 `<base href="/" />` 在 index.html 文件中做的。这实际上使我的 pushState 中的子目录起作用了！只是有人建议.. 但作为回报，它破坏了我的 IE，但我通过在我的主干初始化中添加额外的代码来修复它

```
 Backbone.history.start({ pushState: Modernizr.history, silent: true });
if(!Modernizr.history) {
    var rootLength = Backbone.history.options.root.length;
    var fragment = window.location.pathname.substr(rootLength);
    var search = window.location.search;
    Backbone.history.navigate('/#' + fragment + search, { trigger: true });
} else {
    Backbone.history.loadUrl(Backbone.history.getFragment())
} 
```

# memory - CUDA 常量内存分配是如何工作的？

> ID：14483077
> 
> 赞同：13
> 
> 时间：2013-01-23T15:22:26.640
> 
> 标签：memory, cuda, constants, nvidia, gpu-constant-memory

我想了解一下如何分配常量内存（使用 CUDA 4.2）。我知道总可用的常量内存是 64KB。但是这个内存是什么时候在设备上实际分配的呢？这个限制适用于每个内核、cuda 上下文还是整个应用程序？

假设一个`.cu`文件中有几个内核，每个内核都使用不到 64K 的常量内存。但总的恒定内存使用量超过 64K。是否可以按顺序调用这些内核？如果使用不同的流同时调用它们会发生什么？

如果有一个大型 CUDA 动态库，其中有很多内核，每个内核都使用不同数量的常量内存，会发生什么？

如果有两个应用程序每个都需要一半以上的可用常量内存会发生什么？第一个应用程序运行良好，但第二个应用程序何时会失败？在应用程序启动时、`cudaMemcpyToSymbol()`调用时还是内核执行时？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T20:58:31.527

[并行线程执行 ISA 版本 3.1](http://docs.nvidia.com/cuda/pdf/ptx_isa_3.1.pdf)第 5.1.3 节讨论了常量库。

> 常量内存有大小限制，目前限制为 64KB，可用于保存静态大小的常量变量。还有一个额外的 640KB 常量内存，组织为十个独立的 64KB 区域。驱动程序可以在这些区域中分配和初始化常量缓冲区，并将指向缓冲区的指针作为内核函数参数传递。由于这十个区域不连续，驱动程序必须确保分配常量缓冲区，以便每个缓冲区完全适合 64KB 区域并且不跨越区域边界。

可以用一个简单的程序来说明常量内存的使用。

```
__constant__ int    kd_p1;
__constant__ short  kd_p2;
__constant__ char   kd_p3;
__constant__ double kd_p4;

__constant__ float kd_floats[8];

__global__ void parameters(int p1, short p2, char p3, double p4, int* pp1, short* pp2, char* pp3,     double* pp4)
{
    *pp1 = p1;
    *pp2 = p2;
    *pp3 = p3;
    *pp4 = p4;
    return;
}

__global__ void constants(int* pp1, short* pp2, char* pp3, double* pp4)
{
    *pp1 = kd_p1;
    *pp2 = kd_p2;
    *pp3 = kd_p3;
    *pp4 = kd_p4;
    return;
} 
```

为compute_30，sm_30编译这个并执行`cuobjdump -sass <executable or obj>`反汇编你应该看到

```
Fatbin elf code:
================
arch = sm_30
code version = [1,6]
producer = cuda
host = windows
compile_size = 32bit
identifier = c:/dev/constant_banks/kernel.cu

    code for sm_30
            Function : _Z10parametersiscdPiPsPcPd
    /*0008*/     /*0x10005de428004001*/     MOV R1, c [0x0] [0x44];        // stack pointer
    /*0010*/     /*0x40001de428004005*/     MOV R0, c [0x0] [0x150];       // pp1
    /*0018*/     /*0x50009de428004005*/     MOV R2, c [0x0] [0x154];       // pp2
    /*0020*/     /*0x0001dde428004005*/     MOV R7, c [0x0] [0x140];       // p1
    /*0028*/     /*0x13f0dc4614000005*/     LDC.U16 R3, c [0x0] [0x144];   // p2
    /*0030*/     /*0x60011de428004005*/     MOV R4, c [0x0] [0x158];       // pp3
    /*0038*/     /*0x70019de428004005*/     MOV R6, c [0x0] [0x15c];       // pp4
    /*0048*/     /*0x20021de428004005*/     MOV R8, c [0x0] [0x148];       // p4
    /*0050*/     /*0x30025de428004005*/     MOV R9, c [0x0] [0x14c];       // p4
    /*0058*/     /*0x1bf15c0614000005*/     LDC.U8 R5, c [0x0] [0x146];    // p3
    /*0060*/     /*0x0001dc8590000000*/     ST [R0], R7;                   // *pp1 = p1
    /*0068*/     /*0x0020dc4590000000*/     ST.U16 [R2], R3;               // *pp2 = p2
    /*0070*/     /*0x00415c0590000000*/     ST.U8 [R4], R5;                // *pp3 = p3
    /*0078*/     /*0x00621ca590000000*/     ST.64 [R6], R8;                // *pp4 = p4
    /*0088*/     /*0x00001de780000000*/     EXIT;
    /*0090*/     /*0xe0001de74003ffff*/     BRA 0x90;
    /*0098*/     /*0x00001de440000000*/     NOP CC.T;
    /*00a0*/     /*0x00001de440000000*/     NOP CC.T;
    /*00a8*/     /*0x00001de440000000*/     NOP CC.T;
    /*00b0*/     /*0x00001de440000000*/     NOP CC.T;
    /*00b8*/     /*0x00001de440000000*/     NOP CC.T;
            ...........................................

            Function : _Z9constantsPiPsPcPd
    /*0008*/     /*0x10005de428004001*/     MOV R1, c [0x0] [0x44];       // stack pointer
    /*0010*/     /*0x00001de428004005*/     MOV R0, c [0x0] [0x140];      // p1
    /*0018*/     /*0x10009de428004005*/     MOV R2, c [0x0] [0x144];      // p2
    /*0020*/     /*0x0001dde428004c00*/     MOV R7, c [0x3] [0x0];        // kd_p1
    /*0028*/     /*0x13f0dc4614000c00*/     LDC.U16 R3, c [0x3] [0x4];    // kd_p2
    /*0030*/     /*0x20011de428004005*/     MOV R4, c [0x0] [0x148];      // p3
    /*0038*/     /*0x30019de428004005*/     MOV R6, c [0x0] [0x14c];      // p4
    /*0048*/     /*0x20021de428004c00*/     MOV R8, c [0x3] [0x8];        // kd_p4
    /*0050*/     /*0x30025de428004c00*/     MOV R9, c [0x3] [0xc];        // kd_p4
    /*0058*/     /*0x1bf15c0614000c00*/     LDC.U8 R5, c [0x3] [0x6];     // kd_p3
    /*0060*/     /*0x0001dc8590000000*/     ST [R0], R7;
    /*0068*/     /*0x0020dc4590000000*/     ST.U16 [R2], R3;
    /*0070*/     /*0x00415c0590000000*/     ST.U8 [R4], R5;
    /*0078*/     /*0x00621ca590000000*/     ST.64 [R6], R8;
    /*0088*/     /*0x00001de780000000*/     EXIT;
    /*0090*/     /*0xe0001de74003ffff*/     BRA 0x90;
    /*0098*/     /*0x00001de440000000*/     NOP CC.T;
    /*00a0*/     /*0x00001de440000000*/     NOP CC.T;
    /*00a8*/     /*0x00001de440000000*/     NOP CC.T;
    /*00b0*/     /*0x00001de440000000*/     NOP CC.T;
    /*00b8*/     /*0x00001de440000000*/     NOP CC.T;
            ..................................... 
```

我在 SASS 的右侧进行了注释。

在 sm30 上，您可以看到参数在从偏移量 0x140 开始的常量库 0 中传递。

用户定义的**常量**变量在常量库 3 中定义。

如果您执行 `cuobjdump --dump-elf <executable or obj>`，您可以找到其他有趣的常量信息。

```
32bit elf: abi=6, sm=30, flags = 0x1e011e
Sections:
Index Offset   Size ES Align   Type   Flags Link     Info Name
    1     34    142  0  1    STRTAB       0    0        0 .shstrtab
    2    176    19b  0  1    STRTAB       0    0        0 .strtab
    3    314     d0 10  4    SYMTAB       0    2        a .symtab
    4    3e4     50  0  4 CUDA_INFO       0    3        b .nv.info._Z9constantsPiPsPcPd
    5    434     30  0  4 CUDA_INFO       0    3        0 .nv.info
    6    464     90  0  4 CUDA_INFO       0    3        a .nv.info._Z10parametersiscdPiPsPcPd
    7    4f4    160  0  4  PROGBITS       2    0        a .nv.constant0._Z10parametersiscdPiPsPcPd
    8    654    150  0  4  PROGBITS       2    0        b .nv.constant0._Z9constantsPiPsPcPd
    9    7a8     30  0  8  PROGBITS       2    0        0 .nv.constant3
    a    7d8     c0  0  4  PROGBITS       6    3  a00000b .text._Z10parametersiscdPiPsPcPd
    b    898     c0  0  4  PROGBITS       6    3  a00000c .text._Z9constantsPiPsPcPd

.section .strtab

.section .shstrtab

.section .symtab
 index     value     size      info    other  shndx    name
   0          0        0        0        0      0     (null)
   1          0        0        3        0      a     .text._Z10parametersiscdPiPsPcPd
   2          0        0        3        0      7     .nv.constant0._Z10parametersiscdPiPsPcPd
   3          0        0        3        0      b     .text._Z9constantsPiPsPcPd
   4          0        0        3        0      8     .nv.constant0._Z9constantsPiPsPcPd
   5          0        0        3        0      9     .nv.constant3
   6          0        4        1        0      9     kd_p1
   7          4        2        1        0      9     kd_p2
   8          6        1        1        0      9     kd_p3
   9          8        8        1        0      9     kd_p4
  10         16       32        1        0      9     kd_floats
  11          0      192       12       10      a     _Z10parametersiscdPiPsPcPd
  12          0      192       12       10      b     _Z9constantsPiPsPcPd 
```

每次启动时都会对内核参数常量库进行版本控制，以便可以执行并发内核。编译器和用户常量是每个 CUmodule。开发人员有责任管理这些数据的一致性。例如，开发人员必须确保 cudaMemcpyToSymbol 以安全的方式更新。

# ios - 与 iOS 6 或 DB 应用程序相比，在 iOS 5 上执行 Sqlite 查询返回不同的结果

> ID：14483080
> 
> 赞同：0
> 
> 时间：2013-01-23T15:22:29.040
> 
> 标签：ios, sqlite, xamarin.ios

我在 Sqlite 数据库应用程序中执行此查询，即“Base.app”（可以在 Mac App Store 上找到），我得到三个结果行。如果我在 iOS6 上执行下面的代码，我也会得到三行。然而，在 iOS 5.1 上只返回一行。没有错误。如果我删除 GROUP BY 和 HAVING，我可以在 iOS6 和 DB 应用程序上重现一行的结果。但是为什么iOS5会忽略这些呢？

```
SELECT COUNT(Sub.intItemID) AS intNumSubFolders, Items.*, Files.*
FROM Items
LEFT JOIN Items AS Sub ON Sub.intParentID = Items.intItemID AND Sub.intObjectType IN (2, 3, 6)
LEFT JOIN Files ON Files.intItemID = Items.intItemID 
WHERE Items.intParentID= 2905837
GROUP BY Items.intItemID HAVING Items.intItemVersion=MAX(Items.intItemVersion) 
```

这是我使用的代码：

```
using ( SqliteCommand oCmd = new SqliteCommand ( "SELECT COUNT(Sub.intItemID) AS intNumSubFolders, Items.*, Files.*" +
                                                                " FROM Items" +
                                                                " LEFT JOIN Items AS Sub ON Sub.intParentID = Items.intItemID AND Sub.intObjectType IN (2, 3, 6)" +
                                                                " LEFT JOIN Files ON Files.intItemID = Items.intItemID " +
                                                                " WHERE Items.intParentID=@intItemID" +
                                                                " GROUP BY Items.intItemID HAVING Items.intItemVersion=MAX(Items.intItemVersion)", oConn ) )
                {
                    oCmd.Parameters.AddWithValue ( "@intItemID", iID );
                    using ( var oReader = oCmd.ExecuteReader (  ) )
                    {
                        while ( oReader.Read (  ) )
                        {
                            // getting here only once
                        }
                        oReader.Close ();
                    }
                } 
```

有人可以解释为什么会发生这种情况吗？在 iOS5 上确认。在 iOS6 中，它按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:34:04.737

我们最终通过运行 iOS 版本检查“修复”了它。对于 5.x，我们运行两个查询并将结果合并到代码中。不好，但工作。毕竟，90% 的用户都在使用 iOS 6.x。

# objective-c - 插入/拔出耳机时如何获得通知？苹果电脑

> ID：14483083
> 
> 赞同：14
> 
> 时间：2013-01-23T15:22:37.753
> 
> 标签：objective-c, macos, cocoa, core-audio, headphones

我希望在耳机插孔插入或拔出耳机时收到通知。
我在stackoverflow上搜索了这个，但我似乎找不到我要寻找的Mac，我只能找到iOS。
那么，您对如何执行此操作有任何想法吗？我想要做的是：当耳机被拔出时，我想以编程方式暂停 iTunes（类似 iOS 的功能）。
谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T22:49:14.960

`CoreAudio`您可以使用框架观察变化。

耳机和扬声器都是同一音频输出设备（内置类型）上的数据源。根据是否插入耳机，两者之一将在音频设备上。

要获得通知，您可以在内置输出设备上监听活动数据源的变化。

### 1.获取内置输出设备

为了保持简短，我们将使用默认输出设备。在大多数情况下，这是内置输出设备。在现实生活中的应用程序中，您需要循环所有可用的设备来找到它，因为默认设备可以设置为不同的音频设备（例如 soundflower 或 airplay）。

```
AudioDeviceID defaultDevice = 0;
UInt32 defaultSize = sizeof(AudioDeviceID);

const AudioObjectPropertyAddress defaultAddr = {
    kAudioHardwarePropertyDefaultOutputDevice,
    kAudioObjectPropertyScopeGlobal,
    kAudioObjectPropertyElementMaster
};

AudioObjectGetPropertyData(kAudioObjectSystemObject, &defaultAddr, 0, NULL, &defaultSize, &defaultDevice); 
```

### 2.读取其当前数据源

设备上的当前数据源由类型 ID 标识`UInt32`。

```
AudioObjectPropertyAddress sourceAddr;
sourceAddr.mSelector = kAudioDevicePropertyDataSource;
sourceAddr.mScope = kAudioDevicePropertyScopeOutput;
sourceAddr.mElement = kAudioObjectPropertyElementMaster;

UInt32 dataSourceId = 0;
UInt32 dataSourceIdSize = sizeof(UInt32);
AudioObjectGetPropertyData(defaultDevice, &sourceAddr, 0, NULL, &dataSourceIdSize, &dataSourceId); 
```

### 3\. 观察数据源的变化

```
AudioObjectAddPropertyListenerBlock(_defaultDevice, &sourceAddr, dispatch_get_current_queue(), ^(UInt32 inNumberAddresses, const AudioObjectPropertyAddress *inAddresses) {
    // move to step 2\. to read the updated value
}); 
```

### 确定数据源类型

当您拥有数据源 ID 时，`UInt32`您可以使用值转换器查询音频对象的属性。例如，要将源名称作为字符串使用`kAudioDevicePropertyDataSourceNameForIDCFString`. 这将产生字符串“内部扬声器”或“耳机”。但是，这可能因用户区域设置而异。

更简单的方法是直接比较数据源 id：

```
if (dataSourceId == 'ispk') {
    // Recognized as internal speakers
} else if (dataSourceId == 'hdpn') {
    // Recognized as headphones
} 
```

但是我找不到为这些值定义的任何常量，所以这有点无证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-21T18:27:43.170

我一直在寻找类似的解决方案，并在应用商店中找到了[AutoMute 。](https://itunes.apple.com/us/app/automute-preventing-awkward/id1118136179?mt=12)它运作良好。

我也在编写自己的一些脚本，并编写了[这个脚本](https://gist.github.com/jordan314/bffa2e6cdbf248f8c558ba6496dcc7ea)来测试是否插入了耳机：

```
#!/bin/bash
if system_profiler SPAudioDataType | grep --quiet Headphones; then
  echo plugged in
else
  echo not plugged in
fi 
```

# objective-c - 如何优化：添加/减去一个值，直到它在预定义的范围内？

> ID：14483088
> 
> 赞同：0
> 
> 时间：2013-01-23T15:22:57.273
> 
> 标签：objective-c, math

我有一个值范围，比如 iPhone 屏幕尺寸 480x320。我有一个可能超出范围的位置，例如该位置的 x 坐标为 600。

为了将 x 坐标调整到屏幕上的位置，我可以这样做：600 - 480 = 120

但是当该值大于 480 的两倍时，我必须运行一个循环，减去 480，直到结果数字低于 480。

我知道围绕除法/模数对这个问题进行了优化，但我找不到与此相关的好答案（或问题）。主要是因为我只能猜测可能有用的搜索词组。

我今天感觉不舒服，为了我的生活，我无法摆脱它。我欢迎任何指示，甚至是“重复关闭”。

PS：这是针对 Objective-C 的，但任何语言都可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:25:17.543

您正在寻找[模运算符](https://en.wikipedia.org/wiki/Modulo_operation)。宽度为的情况的解决方案`480`是：

```
x % 480 
```

模将保证结果值在 0 到 479 之间。

# c# - 以编程方式触发选择事件

> ID：14483096
> 
> 赞同：4
> 
> 时间：2013-01-23T15:23:21.837
> 
> 标签：c#, asp.net-mvc, kendo-ui

我有一个 kendoUI 下拉列表，定义如下：

```
 @(Html.Kendo().DropDownList()
                  .Name("EditGroupSelector")
                  .BindTo(Model.Groups)
                   .Events(
                    events => events
                        .Select("onEditGroupSelected")
                   )
            ) 
```

我知道当我按如下方式调用 api 时不会触发 select 事件：

```
editGroupSelector.select(0); 
```

手动选择第一项后，我想手动触发选择事件：

```
editGroupSelector.trigger("select");//api calls dont trigger events -> trigger it manually 
```

这会调用事件，但在事件处理程序中，我没有我的事件，因此无法获取新的选定值：

```
function onEditGroupSelected(e) {
    var nameOfGroup = e.item.text();//e.item does not exist when triggered manually
} 
```

如何触发事件以便我可以在事件处理程序中实际使用“e.item”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T15:29:26.117

jQuery[`trigger`](http://api.jquery.com/trigger/)函数有一个可选参数，即实参。您需要手动添加它，使其与自动调用*兼容。*您应该添加（至少）`item`.

**例子：**

如果`id`你`dropDownList`是你的，`dropdownlist`你可以创建如下参数：

```
dropDownList.select(3);
dropDownList.trigger("select",
        { item: $("li.k-state-selected", $("#dropdownlist-list")) }
); 
```

**注意：**请务必注意，`list`装饰器 (open dropDownList) 不是由`id`您定义的 (ex. `dropdownlist`) 标识的，而是`id`由`-list`(Ex: `dropdownlist-list`) 标识的。这就是为什么 jQuery 选择器是`$("li.k-state-selected", $("#dropdownlist-list")`

# c - ffmpeg 转码

> ID：14483098
> 
> 赞同：5
> 
> 时间：2013-01-23T15:23:22.837
> 
> 标签：c, audio, ffmpeg

我想使用 ffmpeg 库进行音频转码。现在我有文件，但我只能听噪音。我的程序的步骤是：1）打开输入文件并使用 avcodec_decode_audio4 以原始格式解码 2）编码并保存原始格式。我不知道我错在哪里。这是我的代码。

```
/* 
 * File:   newmain.c
 * Author: antonello
 *
 * Created on 23 gennaio 2013, 11.24
 */

#include <stdio.h>
#include <stdlib.h>

#include <libavutil/samplefmt.h>
#include <libavutil/timestamp.h>
#include <libavformat/avformat.h>
#include <libavcodec/old_codec_ids.h>

static AVCodecContext *get_encoder(int sampleRate, int channels, int audioBitrate)
{ 
    AVCodecContext  *audioCodec;
    AVCodec *codec;

    //Set up audio encoder
    codec = avcodec_find_encoder(CODEC_ID_AAC);
    if (codec == NULL) 
    {
        printf("avcodec_find_encoder: ERROR\n");
        return NULL;
    }
    audioCodec = avcodec_alloc_context();
    audioCodec->bit_rate = audioBitrate;
    audioCodec->sample_fmt = AV_SAMPLE_FMT_S16P;
    audioCodec->sample_rate = sampleRate;
    audioCodec->channels = channels;
    audioCodec->profile = FF_PROFILE_AAC_MAIN;
    audioCodec->channel_layout=AV_CH_LAYOUT_MONO;
    //audioCodec->time_base = (AVRational){1, sampleRate};
    audioCodec->time_base.num  = 1;
    audioCodec->time_base.den  = sampleRate;

    audioCodec->codec_type = AVMEDIA_TYPE_AUDIO;
    if (avcodec_open(audioCodec, codec) < 0) 
    {
        printf("avcodec_open: ERROR\n");
        return NULL;
    }

    return audioCodec;
}

int main(int argc, char** argv) {
  AVFormatContext *aFormatCtx_decoder = NULL;
  AVFormatContext *aFormatCtx_encoder = NULL;
  int             i, audioStream;
  AVPacket        packet_decoder;
  AVPacket        packet_encoder;
  int             got_frame=0;
  int             complete_decode=0;
  int             len;
  AVFrame         *decoded_frame = NULL;
  AVCodecContext  *aCodec_decoderCtx = NULL;
  AVCodec         *aCodec_decoder = NULL;
  FILE            *outfile;
  //reding input file
  avcodec_register_all();

   //register all codecs
    av_register_all();

 //open file
    if(avformat_open_input(&aFormatCtx_decoder, "sample.aac", NULL, NULL)!=0){
        fprintf(stderr, "Could not open source file \n");
        return -1; // Couldn't open file
    }

  // Retrieve stream information
  if(avformat_find_stream_info(aFormatCtx_decoder, NULL)<0){
      fprintf(stderr, "Couldn't find stream information \n");
      return -1; // Couldn't find stream information
  }

  // Dump information about file onto standard error
  //av_dump_format(aFormatCtx_decode, 0, argv[1], 0);

  // Find the first audio stream
  audioStream=-1;

  for(i=0; i<aFormatCtx_decoder->nb_streams; i++) {
    if(aFormatCtx_decoder->streams[i]->codec->codec_type==AVMEDIA_TYPE_AUDIO &&
       audioStream < 0) {
      audioStream=i;
    }
  }
  if(audioStream==-1){
      fprintf(stderr, "File haven't sudio stream \n");
      return -1;
  }

  //get audio codec contex
  aCodec_decoderCtx=aFormatCtx_decoder->streams[audioStream]->codec;
  //get audio codec
  aCodec_decoder = avcodec_find_decoder(aCodec_decoderCtx->codec_id);
  aCodec_decoder->sample_fmts=AV_SAMPLE_FMT_S16P;
  if(!aCodec_decoder) {
    fprintf(stderr, "Unsupported codec!\n");
    return -1;//Unsupported codec!
  }
  //open codec
  // Open codec
  if(avcodec_open2(aCodec_decoderCtx, aCodec_decoder, NULL)<0)
    return -1; // Could not open codec
  // allocate audio frame
  decoded_frame = avcodec_alloc_frame();
  if (!decoded_frame) {
    fprintf(stderr, "Could not allocate audio frame\n");
    return -1;//Could not allocate audio frame
    }
  aCodec_decoderCtx->bit_rate=12000;
  aFormatCtx_encoder=get_encoder(8000,1,12000);
  av_init_packet(&packet_encoder);

  printf("param %d %d %d",aCodec_decoderCtx->sample_fmt,aCodec_decoderCtx->channels,aCodec_decoderCtx->bit_rate);

  outfile = fopen("out.aac", "wb");
    if (!outfile) {
        printf(stderr, "Could not open outfile \n");
        return -1;//Could not open outfile
    }
  while(av_read_frame(aFormatCtx_decoder, &packet_decoder)>=0) {
     // decode frame
     len = avcodec_decode_audio4(aCodec_decoderCtx, decoded_frame, &got_frame, &packet_decoder);
        if (len < 0) {
            fprintf(stderr, "Error while decoding\n");
            return -1;
            }

        if (got_frame){
          avcodec_encode_audio2(aFormatCtx_encoder,&packet_encoder,decoded_frame,&complete_decode);
          if(complete_decode){
          //    printf("complete decode frame");
              fwrite(packet_encoder.data, 1, packet_encoder.size, outfile);
              av_free_packet(&packet_encoder);
          }
        }

    }
  fclose(outfile);
    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T06:45:43.303

使用以下代码进行示例格式转换。您可以在 ffmpeg/doc/examples/resampling_audio.c 中获得示例

```
 SwrContext *swr = swr_alloc();

        av_opt_set_int(node_handle->swr,        "in_channel_layout",    decoded_frame->channel_layout,          0);
        av_opt_set_int(node_handle->swr,        "out_channel_layout",   encoder_ctx->channel_layout,    0);

        av_opt_set_int(node_handle->swr,        "in_sample_rate",       decoded_frame->sample_rate,             0);
        av_opt_set_int(node_handle->swr,        "out_sample_rate",      encoder_ctx->sample_rate,       0);

        av_opt_set_sample_fmt(swr, "in_sample_fmt",        decoded_frame->format,                  0); 
        av_opt_set_sample_fmt(swr, "out_sample_fmt",       encoder_ctx->sample_fmt,        0);

        swr_init(swr);

        uint8_t* swr_out_data;
        int linesize;
        av_samples_alloc(&swr_out_data,
                             linesize,
                             encoder_ctx->nb_channels,
                             decoded_frame->nb_samples,
                             encoder_ctx->sample_fmt,
                             0
                         );
        swr_convert(swr,&swr_out_data, decoded_frame->nb_samples, decoded_frame->data, decoded_frame->nb_samples); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:31:36.627

您不能设置变量的任意值`sample_fmts`：

`aCodec_decoder->sample_fmts=AV_SAMPLE_FMT_S16P; // It's wrong`

解码将始终使用编解码器设置的参数进行。您必须创建`SwrContext`并执行到目标的格式转换（`SwrContext`转换样本格式、采样率和通道布局）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T08:20:13.990

修改为此，工作正常

```
aCodec_decoder->sample_fmts=audioCodec->sample_fmt; 
```

# c# - 将隐式类型变量移动到对象初始化器

> ID：14483102
> 
> 赞同：0
> 
> 时间：2013-01-23T15:23:35.597
> 
> 标签：c#, types, casting

如何修改以下代码：

```
var people = new[] {
   new { name = "John", surname = "Smith" },
   new { name = "John", surname = "Doe" },
}; 
```

不使用`var`关键字（所以我可以在对象初始化程序中初始化变量）并且仍然能够访问这样的元素？：

```
System.Console.WriteLine(people[0].surname); //John
System.Console.WriteLine(people[1].surname); //Doe 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:25:17.850

You cannot; you will have to define a proper class for these objects or reuse one (e.g. `Tuple`).

Technically the one-word change from `var` to `dynamic` will also do the trick, but of course this changes the essence of the member dramatically so it's not equivalent by any stretch of the imagination.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T15:25:18.603

Define a model:

```
public class Person
{
    public string Name { get; set; }
    public string Surname { get; set; }
} 
```

and then have a [`collection of this model`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx):

```
List<Person> people = new List<Person>();
people.Add(new Person { Name = "John", Surname = "Smith" });
people.Add(new Person { Name = "John", Surname = "Doe" }); 
```

or:

```
var people = new List<Person> 
{ 
    new Person { Name = "John", Surname = "Smith" }, 
    new Person { Name = "John", Surname = "Doe" } 
}; 
```

and then you can still:

```
System.Console.WriteLine(people[0].Surname); //John
System.Console.WriteLine(people[1].Surname); //Doe 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:27:06.417

首先，您需要为该数据创建一个命名类型：

```
public class Person
{
    public string Name { get; set; }
    public string Surname { get; set; }
} 
```

然后在创建数组时使用该类型：

```
People[] people;

//...

people = new People[]{
    new Person{ Name = "John", Surname = "Smith" },
    new Person{ Name = "John", Surname = "Doe" },
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T15:30:22.660

You could use 'dynamic'

```
dynamic people = new[] {
   new { name = "John", surname = "Smith" },
   new { name = "John", surname = "Doe" },
}; 
```

And then call it

```
Console.WriteLine(people[0].name); 
```

Note - Works on framework 4.0 onwards, also comes with the caveats mentioned already.

# c++ - 为通用树定义迭代器

> ID：14483103
> 
> 赞同：1
> 
> 时间：2013-01-23T15:23:36.177
> 
> 标签：c++, templates, tree, generic-programming

我有这个类叫做“节点”。我一直在考虑将其重命名为“树”，但任何一个名称都具有同样的意义。这个类实现了一个通用的树容器。每个节点可以有任意数量的子节点。类的基本头定义如下：

```
template<class Elem>
class Node
{
public:
    Node();
    ~Node();
    Node(const Elem& value);
    Node(const Node& rNode);
    const Elem& operator*() const;
    Elem& operator*();
    Elem* operator->();
    void operator=(const Elem& rhs);
    Node* addChild(const Elem& value);
    Node* addChild(Node childNode);
    Node* addChild(Node* pChildNode);
    HRESULT removeNode(DFSIterator<Node>& iter);

    template <class Node, class List, class Iter> friend class DFSIterator;

private:
    bool hasChild() const;

    Node* m_pParentNode;
    Elem m_value;
    std::vector<Node*> m_childList;
    static std::set<Node*> sNodeSet;
}; 
```

我的 DFSIterator 的标头定义是：

```
template<class Item, 
         class List = std::vector<Item*>, 
         class Iter = typename std::vector<Item*>::iterator>
class DFSIterator
{
public:
    DFSIterator(Item& rRootNode);
    ~DFSIterator();
    DFSIterator* begin();
    DFSIterator* operator++();
    Item& operator*() const;
    Item* operator->() const;
    bool operator!=(const DFSIterator& rhs) const;
    bool isDone() const;
    operator bool() const {return !isDone();}

private:
    template <class Node> friend class Node;

    void initChildListIterator(Item* currentNode);

    bool m_bIsDone;
    Item* m_pRootNode;
    Item* m_pCurrentNode;
    ChildListIterator<Item>* m_pCurrentListIter;
    std::map<Item*, ChildListIterator<Item, List, Iter>*>  m_listMap;
}; 
```

`Item`是迭代器的别名`Node<Elem>`。

我遇到的问题是我想为这棵树定义迭代器，用户可以以与 STL 容器类似的方式声明它。我在想像这样放置 typedef 语句`typedef DFSIterator<Node<Elem>> dfs_iterator;`会很好。`error C2512<Item>: no appropriate default constructor available.`但是每当我将这些语句添加到标题中时，无论我尝试去使用它，我都会收到以下错误。

所以现在，要声明一个迭代器，我必须做类似的事情，`DFSIterator<Node<DataMap>> dfsIter = rRootNode.begin();`或者`DFSIterator<Node<DataMap>> dfsIter(rNode);`如果我不想从树的根节点开始。我想要做的是更像`Node<DataMap>::dfs_iterator it = rRootNode.begin()`. 有没有办法做到这一点，我错过了？

注意：我确实想更改有关此实现的其他一些内容。我真的不希望用户将节点元素传递给 addChild() 方法。我宁愿让用户传递一个指向节点的迭代器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:08:30.820

如果您在 Node 中定义 dfs_iterator，那么您基本上可以像您描述的那样使用它：

```
template<class Elem>
class Node
{
public:
    typedef Node<Elem> Item;

    template<
        class List = std::vector<Item*>, 
        class Iter = typename std::vector<Item*>::iterator
    > class dfs_iterator;

     .
     .
     .
};

template<class Elem>
template<class List, class Iter>
class Node<Elem>::dfs_iterator
{
public:

    .
    .
    .
}; 
```

并使用

```
Node<DataMap>::dfs_iterator<> it = rRootNode.begin(); 
```

唯一的区别是由于 dfs_iterator 是一个模板，您必须指定模板参数，即使它们都可以默认。

# c++ - 为什么 is_swappable 和 is_nothrow_swappable 不包含在 C++11 中？

> ID：14483105
> 
> 赞同：19
> 
> 时间：2013-01-23T15:23:40.963
> 
> 标签：c++, c++11, standards, template-meta-programming, libc++

我惊讶地发现它`is_swappable<T>`不在`is_nothrow_swappable<T>`新的 C++11 type_traits 元函数中。它们`noexcept`对于模板的传播和确定是否可以为模板实现非抛出交换非常有用。

libc++ 推出自己的内部版本：请参阅[其 type_traits 版本中的](http://llvm.org/viewvc/llvm-project/libcxx/trunk/include/type_traits?view=markup)__is_swappable 和 __is_nothrow_swappable ，它在内部广泛使用它们，但不会使它们在库之外可用。

[我最终将我自己的版本](https://github.com/acmorrow/error_or/blob/master/detail/is_nothrow_swappable.hpp)拼凑在一起用于个人项目，这似乎可行，但我确信它以某种方式损坏了。

我很好奇这两个的缺席，因为它们似乎很重要。这个特性是在 C++11 标准化过程中考虑的，还是只是疏忽没有包含在内？如果考虑，是什么导致它没有被纳入最终标准（缺乏时间、实施问题等）？是否有缺陷报告或进化论文讨论这个问题？有没有计划在 C++1Y 中加入这些特性？某处是否有公认的“正确”版本？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T16:05:57.590

`is_swappable<T>`并且`is_nothrow_swappable<T>`从未为 C++11 提出过。这是它们不在 C++11 中的主要原因。即没有被提议就没有任何东西可以进入。

那么为什么没有提出这些建议呢？

从个人经验来看，我不会提出任何我没有实施并发现有用的东西。尽管我确实为 libc++ 实现了它们，但在 C++11 发布之前我并没有这样做。我根本没有时间和工具来为 C++11 这样做。我最好的猜测是其他任何人都是如此。

很高兴你发现这些有用。 **您**可能是为下一个 C++ 标准提出建议的人！严重地！我们需要你的帮助！

**更新**

回应：

> 不过，这有点小技巧，因为这仅在根据移动构造函数和赋值运算符实现交换时才有效

下面的测试表明它在 libc++ 的实现中的表现：

```
#include <type_traits>
#include <iostream>

struct A
{
    A(const A&);
};

struct B
{
};

void swap(B&, B&);

struct C
{
};

void swap(C&, C&) noexcept;

struct D
{
    D(const D&) noexcept;
    D& operator=(const D&) noexcept;
};

int main()
{
    std::cout << "std::__is_nothrow_swappable<int>::value = "
              << std::__is_nothrow_swappable<int>::value << '\n';
    std::cout << "std::__is_nothrow_swappable<A>::value = "
              << std::__is_nothrow_swappable<A>::value << '\n';
    std::cout << "std::__is_nothrow_swappable<B>::value = "
              << std::__is_nothrow_swappable<B>::value << '\n';
    std::cout << "std::__is_nothrow_swappable<C>::value = "
              << std::__is_nothrow_swappable<C>::value << '\n';
    std::cout << "std::__is_nothrow_swappable<D>::value = "
              << std::__is_nothrow_swappable<D>::value << '\n';
} 
```

对我来说输出：

```
std::__is_nothrow_swappable<int>::value = 1
std::__is_nothrow_swappable<A>::value = 0
std::__is_nothrow_swappable<B>::value = 0
std::__is_nothrow_swappable<C>::value = 1
std::__is_nothrow_swappable<D>::value = 1 
```

# c# - Error using JsonConvert.DeserializeObject

> ID：14483107
> 
> 赞同：0
> 
> 时间：2013-01-23T15:23:52.973
> 
> 标签：c#, wpf, json, json.net

I'm trying to use Json.net on a WPF application. I obtain a string, from a webserver i connect, that looks something like this.

> [{"id":"11","title":"Default","nclient":"3"},{"id":"18","title":"GrupoPorreiro","nclient":"0"}]

and the code im using to deserialize it is this.

```
public void preencheCampos()
    {
        try
        {

            HttpWebRequest request =
            (HttpWebRequest)WebRequest.Create("URL");
            //request.Method = "POST";
            request.ContentType = "application/json";
            request.UserAgent = "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11";
            request.CookieContainer = ApplicationState.GetValue<CookieContainer>("cookie");

            WebResponse response = request.GetResponse();
            Stream data = response.GetResponseStream();
            String html = String.Empty;
            request.CookieContainer = ApplicationState.GetValue<CookieContainer>("cookie");

            using (StreamReader sr = new StreamReader(data))
            {
                html = sr.ReadToEnd();
            }

            StringBuilder sb = new StringBuilder();
            List<string> entities = (List<string>)JsonConvert.DeserializeObject(html, typeof(List<string>));
            foreach (string items in entities)
            {
                sb.Append(items);
            }

         //...

        }
        catch (Exception ex)
        {

            MessageBox.Show(ex.Message);
        }
    } 
```

but when it gets to the JsonConvert.DeserializeObject part i get an exception that says:

> "Error reading string. Unexpected token: StartObject. Path'[0]', line 1, position 2."

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:34:42.923

我根据需要为一个类写了一些快速代码。这适用于您发布的 JSON 字符串。就像您在评论中提到的那样，我为该对象创建了一个类并将其用作我的列表项。

```
static void Main(string[] args)
{
    string html = "[{\"id\":\"11\",\"title\":\"Default\",\"nclient\":\"3\"},{\"id\":\"18\",\"title\":\"GrupoPorreiro\",\"nclient\":\"0\"}]";

    List<item> entities = (List<item>)JsonConvert.DeserializeObject(html, typeof(List<item>));

}

class item
{
    public string id;
    public string title;
    public string nclient;
} 
```

# maven - Maven: change version properties in pom.xml

> ID：14483118
> 
> 赞同：21
> 
> 时间：2013-01-23T15:24:08.467
> 
> 标签：maven, jenkins, pom.xml

I have a Maven pom.xml, I build project and release project deploy with Jenkins.

But before and after build "release version" we need set my version in

For example: I have in pom.xml

```
<properties>
   <version-own>0.0.21-SNAPSHOT</version-own>
</properties> 
```

before release I need set like this

```
<properties>
   <version-own>0.0.25</version-own>
</properties> 
```

after release I need set like this

```
<properties>
   <version-own>0.0.27-SNAPSHOT</version-own>
</properties> 
```

How can this be done?

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-23T16:29:13.803

如果您不必使用自己的版本属性，请考虑将在您的`<project><version>0.0.21-SNAPSHOT</version></project>`元素上运行的以下内容：

```
mvn versions:set versions:commit -DnewVersion="0.0.25" 
```

这将修改您的 pom 并根据您的喜好调整版本。您可能希望将此更改提交到您的源代码控制存储库，为此 scm 插件的 scm:checkin 目标可以正常工作（假设您希望这是自动化的）：

```
mvn scm:checkin -Dincludes=pom.xml -Dmessage="Setting version, preping for release." 
```

然后你可以执行你的发布（我推荐[maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)），之后你可以设置你的新版本并像上面一样提交它。

[版本插件](http://mojo.codehaus.org/versions-maven-plugin/)是你的朋友。编写上述脚本可能会涉及一些参数化构建，或者最好是 jenkins 的 groovy 插件，它允许您获取特定于 maven 的构建变量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-26T14:00:56.987

有一种方法可以轻松实现。使用一个命令，您可以更改您想要的任何部分：

对于剪切和粘贴：

```
mvn build-helper:parse-version versions:set -DbuildNumber=555 '-DnewVersion=${parsedVersion.majorVersion}.${parsedVersion.minorVersion}.${parsedVersion.incrementalVersion}-${buildNumber}' 
```

为了清楚起见：

```
mvn build-helper:parse-version versions:set -DbuildNumber=555
   '-DnewVersion=
                  ${parsedVersion.majorVersion}
                 .${parsedVersion.minorVersion}
                 .${parsedVersion.incrementalVersion}
                 -${buildNumber}' 
```

这是一个简洁的示例，如何使用构建值一次性更新版本

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-23T16:14:34.347

对于初学者，您可以手动完成。如果您的构建很好地遵循 maven 约定，您可能可以利用现有的几个 maven 插件之一来帮助管理版本号。

[maven-versions-plugin](http://mojo.codehaus.org/versions-maven-plugin/)有助于自动手动更改版本号。它有很好的 CLI 命令来帮助在发布之前调整你的 pom。

然后是[maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)，它可以自动执行剪切发布的整个过程。它会将您的快照更改为发布版本，然后在发布构建后将其滚动到下一个快照。在所有这些过程中，它会将离散版本的 pom 提交给源代码控制。

同样，在 maven 社区的自动化程度更高的部分中看到成功的秘诀在于您的构建是否以 maven 方式做事。被黑、经过高度调整、非常规的构建通常对成功使用发布插件有很多障碍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T20:42:29.310

Build-helper 插件支持正则表达式替换，如果需要，甚至可以解析版本号。 [http://www.mojohaus.org/build-helper-maven-plugin/](http://www.mojohaus.org/build-helper-maven-plugin/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-05T18:44:20.443

有类似的东西`parsedVersion.nextIncrementalVersion`

`mvn build-helper:parse-version versions:set -DnewVersion=\${parsedVersion.majorVersion}.\${parsedVersion.minorVersion}.\${parsedVersion.nextIncrementalVersion} versions:commit`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-17T11:35:06.993

查看此[评论](https://stackoverflow.com/questions/14483118/maven-change-version-properties-in-pom-xml#comment20202256_14484194)，您正在描述您正在使用此版本来提供依赖项。[maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)应该可以帮助您管理版本。所以在你的 pom.xml 中提供那个插件。

对于手动提供发布和开发版本的步骤，在 jenkins 中创建一个具有 2 个字符串参数的作业：
developmentVersion
releaseVersion
添加“调用顶级 Maven 目标”构建步骤以执行发布（例如）：

```
clean release:clean release:prepare release:perform -DdevelopmentVersion=${developmentVersion} -DreleaseVersion=${releaseVersion} 
```

构建作业时，它会提示您同时插入 developmentVersion 和 releaseVersion。

干杯，
暴君

# c++ - 如何为 sql 查询准备 C++ 字符串

> ID：14483120
> 
> 赞同：2
> 
> 时间：2013-01-23T15:24:11.430
> 
> 标签：c++, c, sqlite

我必须准备适合查询的字符串，因为这些字符串将在查询中用作字段值。如果它们包含 ' 等，则 sql 查询将无法执行。

因此，我想用 '' 替换 ' 我已经看到了用子字符串查找和替换子字符串的代码。但我想这个问题有点棘手，因为替换字符串还包含两个单引号 '' 替换一个引号 ' 所以当我必须找到下一次出现时，它会遇到一个 ' 被故意替换。

我正在使用 Sql lite C api，示例查询可能如下所示

```
 select * from persons where name  = 'John' D'oe' 
```

由于 John Doe 包含一个 ' 查询将失败，所以我希望名称中出现的所有 ' 都替换为 ''

任何想法你们如何准备查询中的字段值以在 sql 中使用？可能这是一件基本的事情，但我在 C/C++ 方面不太聪明。

你的帮助会很有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:38:13.913

使用带参数的查询而不是替换东西，这可能会导致几个问题（如 SQL 注入漏洞）。

MySQL 示例：

```
sql::Connection *con = ...;
string query = "SELECT * FROM TABLE WHERE ID = ?";
sql::PreparedStatement *prep_stmt = con->prepareStatement(query);
prep_stmt->setInt(1, 1); // Replace first argument with 1
prep_stmt->execute(); 
```

这将执行`SELECT * FROM TABLE WHERE ID = 1`。

**编辑：**[这里](http://www.sqlite.org/c3ref/stmt.html)和[这里](http://www.sqlite.org/c3ref/prepare.html)的 SQLite 准备语句的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:35:54.287

这取决于您使用的 SQL 库。其中一些会有 PreparedStatement 的概念，您将使用问号代替变量，然后当您在语句上设置这些变量时，它将在内部确保您无法注入 sql 命令。

# android - How can I create Android logcat entries that provide a link to source code in Eclipse?

> ID：14483121
> 
> 赞同：5
> 
> 时间：2013-01-23T15:24:14.273
> 
> 标签：android, eclipse, logcat

> **Possible Duplicate:**
> [Is there any way to access automatically any Log in Logcat by a double click?](https://stackoverflow.com/questions/8067528/is-there-any-way-to-access-automatically-any-log-in-logcat-by-a-double-click)

If a warning or error stack trace is printed to the `logcat` in `Eclipse` from an `Android` application, I have the ability to double click a line of it to see where in the source code this line of the stack trace is discussing. Is there a way, through the Android or Eclipse SDKs, to print my own messages with links to the code?

# java - Flex callback stack

> ID：14483123
> 
> 赞同：0
> 
> 时间：2013-01-23T15:24:15.857
> 
> 标签：java, apache-flex, callback, stack

I have a Flex problem. I have a Java app and a Flex app that calls to a Java app method to get some data.

So in my Flex class I have a method that calls the Java app method, something like this:

```
ObjectThatInvokesJavaMethod.getDataFromJavaApp(param1, setData); 
```

setData is where the Java app method returns the array with the info, the callback.

The problem is that this method (setData) goes to a stack or something like that and the rest of code is executed, but in 'the rest of the code I need the data requested from the Java app but the setData method is not executed until the rest finish... so Im operating with old and deprecated data. Any idea how to solve this?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:03:13.333

您的回调处理程序， setData() 应该从服务器端分配值并调用“其余代码”或其他任何内容。或者，从 setData 抛出一个事件以表明数据已准备好并且“其余代码”可以使用它。

# java - 如何分析 Java 1.3 中的内存泄漏

> ID：14483125
> 
> 赞同：1
> 
> 时间：2013-01-23T15:24:25.207
> 
> 标签：java, memory, memory-leaks, weblogic, solaris

我有一个 WebLogic 7 服务器，在 Solaris 平台上的 j2sdk1_3 下运行。从 Java5 开始，我知道 jmap 命令对于分析和排除内存泄漏非常有用。

是否有类似的工具可以在 Java 1.3 上使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:53:24.320

该`-Xrunhprof`选项在[1.3 JVM 可执行文件](http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/java.html)中可用。当 JVM 退出时（无论是否由于内存不足），这将生成 ASCII 或二进制格式的堆转储。如果你有一台现代化的开发机器，相信你可以用`jhat`二进制格式来读取。如文档中所述，`java -Xrunhprof:help`将告诉您选项是什么。

# r - for循环中的多个glm

> ID：14483128
> 
> 赞同：5
> 
> 时间：2013-01-23T15:24:38.160
> 
> 标签：r, for-loop, glm

我有一个 R 数据框，强烈简化为：

```
id <- rep(1:2, c(6,8))
correct <- sample(0:1,14,TRUE)
phase <- c(rep("discr",3),rep("rev",3), rep("discr",4),rep("rev",4))
dat <- data.frame(id,correct,phase) 
```

与`id`作为我的主题（实际上我有很多超过 2），`correct`= 编码为不正确（0）或正确（1）的响应，以及`phases`歧视和逆转（主题内因素）。

我想以以下形式执行逻辑回归

```
glm(correct~phase, dat, family="binomial") 
```

稍后可能会添加其他预测变量。但是，由于我对每个主题都有不同数量的数据，我想`glm()`对每个主题分别执行，然后将系数与 ANOVA 进行组效应比较。我想以 for 循环的形式执行此操作

```
for(i in seq_along(dat$id)){
   my_glm[i] <- glm(correct~list,dat[dat$id==i,],family="binomial")
} 
```

但不断收到错误消息

```
>Error in `contrasts<-`(`*tmp*`, value = contr.funs[1 + isOF[nn]]) :
 contrasts can be applied only to factors with 2 or more levels. 
```

我检查了我的数据，没有一个因子只包含一个级别。所有受试者都给出了至少一个错误和一个正确的答案，并且都参与了辨别和逆转。当我指定特定主题时，该函数在循环之外工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:51:15.070

这是一个 R Base 解决方案：

```
> lapply(split(dat, dat$id), function(x) coef(summary(glm(correct~phase,family="binomial",data=x))))
$`1`
                 Estimate Std. Error       z value  Pr(>|z|)
(Intercept) -6.931472e-01   1.224745 -5.659524e-01 0.5714261
phaserev    -3.845925e-16   1.732050 -2.220446e-16 1.0000000

$`2`
                Estimate Std. Error      z value Pr(>|z|)
(Intercept) 3.356998e-16   1.000000 3.356998e-16 1.000000
phaserev    1.098612e+00   1.527524 7.192109e-01 0.472011 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T15:38:41.373

您目前正在尝试为`glm`以下中的每一行做一个`id`：

我想你想要一个`glm`单独`id`的。 *就个人而言*，我会选择类似的东西：

```
library(plyr)

ddply(dat, .(id), function (x){
intercept <- coef(summary(glm(correct~phase,family="binomial",data=x)))[1]
slope     <- coef(summary(glm(correct~phase,family="binomial",data=x)))[2]
c(intercept,slope)                 
                              })

# id         V1            V2
#1  1 -0.6931472  1.386294e+00
#2  2  1.0986123 -6.345448e-16

# here V1 is intercept and V2 is the estimate 
```

# python - 运行 web2py“图像博客”示例时出错

> ID：14483133
> 
> 赞同：0
> 
> 时间：2013-01-23T15:25:09.037
> 
> 标签：python, sqlite, web2py

我正在学习 web2py，并已将其添加到图像博客示例中。但是，当控制器尝试与数据库交互时出现错误？

更准确地说，这条线

```
image = db.image(request.args(0,cast=int)) or redirect(URL('index')) 
```

导致错误（它是从示例中复制粘贴的）。查看错误日志，前几行是

```
(dp1
S'output'
p2
S"<type 'exceptions.TypeError'> __call__() got an unexpected keyword argument 'cast'"
p3
sS'layer' 
```

该示例可以在这里找到： [http ://web2py.com/books/default/chapter/29/03](http://web2py.com/books/default/chapter/29/03)

在尝试制作一个最小的工作示例时，我尝试将控制器减少到只是有问题的行，另外还有一个通过字符串传递 dict。为了遵守这一点，视图已更改为仅打印字符串。这仍然会中断，但如果我删除数据库调用就可以了。我已经确保到目前为止的所有内容都是直接从教程中复制的，因此应该正确设置数据库（事实上，到目前为止使用数据库的示例都按预期工作）。

知道为什么这条线会中断吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:22:03.373

`cast`参数`request.args()`是在 web2py 2.0 中引入的。如果您升级到最新版本（当前为 2.3.2），该代码应该可以工作。

# c# - Entity Framework Query filters implementation for best perfomance

> ID：14483141
> 
> 赞同：2
> 
> 时间：2013-01-23T15:25:34.437
> 
> 标签：c#, winforms, performance, entity-framework-4

As the title says, I´m using entity framework 4.0 for a financial application. I have a winform where I list all the cheques (checks) I have. But in that form, the user can specify some filters.

![enter image description here](../Images/0c75d9c9a6fbadbf11be7db12aa4e025.png)

If the user does not apply any filter, I just can make the query like this:

```
lista_cheques = db.Cheque.Include("Operacion").Include("Cliente").ToList();
datagridview.Datasource = lista_cheques; 
```

That is simple. But when it applies filters, the problem gets bigger.

As you see, the user can use filter to see cheques (checks) of a specific client, dates, bank, CUIT number, check state, etc.

Now, my question is related to performance in the queries.

I was thinking on doing the filters separeted, like this:

```
lista_cheques = db.Cheque.Include("Operacion").Include("Cliente").Where(x => x.fecha_deposito == fecha).ToList();
lista_cheques = lista_cheques.Where(x => x.banco.id_banco = banco).ToList();
lista_cheques = lista_cheques.Where(x => x.Operacion.Cliente.id_cliente = id_cliente).ToList(); 
```

Translation: fecha is date Operacion is a group of checks Cliente is client.

In this way, I´m doing a query, then, a query from that query result, then a new query from that new result and that goes on.

I think this way might have a big performance issues. I know that SQL server optimize queries. So, if I´m doing fragmented queries, the optimizer is not working properly.

The other way I thought about but it´s very tedious, is to create one big query to handle every possible filter selection.

For example, the other example would be like this:

```
lista_cheques = db.Cheque.Include("Operacion").Include("Cliente").Where(x => x.fecha_deposito == fecha && x.banco.id_banco = banco && x.Operacion.Cliente.id_cliente = id_cliente).ToList(); 
```

The big problem is that I will need lots of combinations to be able to handle all the filter posibilities.

Ok guys, now, will I have performace issues in the first code example? I doing there one big query to the database, and then I´m doing the query in the list of objects (which I think will be faster). I´m pretty new to this ORM, and this listing will have to handle a lot of registries..

I somebody can give me some advice? I made pretty much a mess explaining, hope you can understand..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:29:27.123

```
lista_cheques = db.Cheque.Include("Operacion").Include("Cliente").Where(x => x.fecha_deposito == fecha).ToList();
lista_cheques = lista_cheques.Where(x => x.banco.id_banco = banco).ToList();
lista_cheques = lista_cheques.Where(x => x.Operacion.Cliente.id_cliente = id_cliente).ToList(); 
```

Nearly perfect. Kill all those ToList and it is good.

The ToList means SQL is evaluated, so if all 3 flters trigger, 2 and 3 are evaluated in memory.

Kick the ToList away, and the different Where clauses get combined on the database.

Standard LINQ 101\. Works like a charm and is always nice to see.

Then add as LAST line:

lista_cheques = lista_cheques.ToList ();

# wordpress - Reduce number of posts depending on post content

> ID：14483146
> 
> 赞同：0
> 
> 时间：2013-01-23T15:25:40.850
> 
> 标签：wordpress

In a custom post archive; Is it possible to reduce the the number of posts shown, depending on the contents of the showing posts?

I have a custom post type for products. In the product archive there are 20 products showing on each page, 4 rows, 5 cols. In some cases where the product image is super wide I'd like that product to be shown with double width.

When showing a super wide product, I'd like to reduce the number of posts to 19 (18 if there are two super wide products). Keeping the bottom line straight.

* * *

This is the loop for my custom post archive. I got your point with numcols. And as you say, I should probably modify the query, making sure that page 2 and 3 (and on) shows the right posts.

```
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
<a href="<?php the_permalink(); ?>" class="produkt_item normal various" data-fancybox-type="iframe">
<?php if ( has_post_thumbnail() ) { ?>
    <div class="utvaldbild">
        <?php the_post_thumbnail('produktbild'); ?>
    </div>
<?php } ?>

<h2><?php the_title();?></h2>
<p><?php the_field('produktnotis'); ?></p>

<?php if (get_field('nedladdning')) { ?><div class="nedladdning"></div><?php } ?>
</a>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:41:16.383

您可以在您的帖子自定义 posttype 中添加一个自定义字段，称为 numcols 或类似的东西。普通产品将是 1 和超级图像 2 等。

然后只需在您的 php 代码中记录它们，并在适当的时候切断它们。

您可能可以修改查找页面中的查询来执行此操作，但我必须查看一些代码才能有所帮助。理想情况下，您的自定义产品存档页面和自定义帖子类型的定义。

# python - os.walk() 是否缺少指向目录的符号链接？

> ID：14483147
> 
> 赞同：2
> 
> 时间：2013-01-23T15:25:41.587
> 
> 标签：python, traversal, symlink, directory-traversal

我有一个目录，其中包含一些文件、一些目录、一些文件的符号链接和一些目录的符号链接。

当我在目录中使用 followlinks=false 执行 os.walk() 时，我会获取文件名列表中的文件和目录名列表中的目录的文件和符号链接。但是目录的符号链接不会出现在任何地方。这是 Python 中的错误或功能，还是我做错了什么？

我希望目录的符号链接显示在文件名列表中，因为它们不是目录而是符号链接，并且其他符号链接（到其他文件）显示在文件名列表中。

示例：目录 foo 包含以下内容：

```
-rw-rw-r-- 4 rikno staff 136 Jan 14 11:10 firefox
lrwxr-xr-x 1 rikno staff   5 Jan 23 13:29 latex -> tetex
lrwxr-xr-x 2 rikno staff  68 Jan 14 11:10 mozilla -> firefox
drwxrwxr-x 3 rikno staff 102 Jan 23 13:29 tetex 
```

我希望 os.walk('foo') 在第一次迭代中返回

```
('foo', ['tetex'], ['firefox', 'latex', 'mozilla']) 
```

或者至少

```
('foo', ['latex', 'tetex'], ['firefox', 'mozilla']) 
```

但我得到的只是

```
('foo', ['tetex'], ['firefox', 'mozilla']) 
```

我从来没有得到任何关于符号链接乳胶（它指向目录tetex）

# 解决了：

好的，结果*是*

```
('foo', ['latex', 'tetex'], ['firefox', 'mozilla']) 
```

因此，目录的符号链接显示在 dirnames 列表中。

我首先期望目录的符号链接在文件名列表中，并且从未查看过目录名列表，并且在尝试使用代码和文件系统来查找链接的位置或链接“丢失”的原因时，我不小心弄混了我的结果。

抱歉问了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:30:30.910

您写道，您`os.walk()`使用`followlinks`set to调用`False`。那么，这就是[预期的行为](http://docs.python.org/2/library/os.html#os.walk)：

> 默认情况下，`walk()`不会进入解析为目录的符号链接。设置`followlinks`为`True`访问由符号链接指向的目录，在支持它们的系统上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:56:06.110

在我的机器上运行，`os.walk()`确实显示了所有的符号链接：

```
>>> os.walk("foo").next()
('foo', ['tetex', 'latex'], ['mozilla', 'firefox'])
>>> os.walk("foo", followlinks=False).next()
('foo', ['tetex', 'latex'], ['mozilla', 'firefox']) 
```

我在这里看到的唯一*“问题”是符号链接出现在目录列表中，而不是文件列表中。*

在大多数用例中，这将是预期的行为，因为人们希望能够将文件列表中的所有条目视为文件，而不必检查它是否是符号链接。

[python-dev 的这个线程](http://python.6.n6.nabble.com/os-walk-with-followlinks-False-td3559133.html)简要讨论了这个问题。

> “......将符号链接到目录放入文件列表而不是子目录列表并没有更好（它只是将问题转移到不同的用例，例如那些实际想要读取文件内容的用例）。 "

并从[链接的问题页面](http://bugs.python.org/issue13734)：

> “例如，要计算目录下所有文件的行数，代码可以如下所示：
> 
> ```
> for root, dirs, files in os.walk(top):
>     for file in files:
>         f = open(file)
>         for n, l in enumerate(f, 1):
>             pass
>         print(file, n) 
> ```
> 
> 如果文件中突然出现了指向目录的符号链接，则会中断。所以我不相信值得改变这一点。指向目录的符号链接与文件的距离并不比与目录的距离更近，它实际上取决于用例。”

# ios - How to start a Cocos2D Scene when pushing a UIViewController

> ID：14483150
> 
> 赞同：1
> 
> 时间：2013-01-23T15:26:02.080
> 
> 标签：ios, cocos2d-iphone, draw

I'm working on a project for iOS 5 and 6, iPad 3.

My problem is that I need to draw something with Cocos2D in a scene, but it doesn't work.

I'm starting to code in AppDelegate - setting a rootViewController (MainViewController)

In this MainViewController, I have a button, that fires a method called -draw:

The -draw: method is very simple.

DrawController * c = [DrawController alloc]init]; [self.navigationController pushViewController:c animated:YES];

Now when the App pushes the DrawController, my App should make a Scene with Cocos2D using CCDirector.

but its very frustrating, because I have always a black gap on the screen.

DrawController

```
- (void)viewDidLoad
{
[super viewDidLoad];

glView = [CCGLView viewWithFrame:[self.view bounds]
                     pixelFormat:kEAGLColorFormatRGB565 //kEAGLColorFormatRGBA8
                     depthFormat:0  //GL_DEPTH_COMPONENT24_OES
              preserveBackbuffer:NO
                      sharegroup:nil
                   multiSampling:NO
                 numberOfSamples:0];

director_ =  (CCDirectorIOS*) [CCDirector sharedDirector];

director_.wantsFullScreenLayout = YES;

// Display FSP and SPF
[director_ setDisplayStats:YES];

// set FPS at 60
[director_ setAnimationInterval:1.0/60];

// attach the openglView to the director
[director_ setView:glView];

// for rotation and other messages
[director_ setDelegate:(id <CCDirectorDelegate>) [[UIApplication sharedApplication] delegate]];

UIButton * redColor = [UIButton buttonWithType:UIButtonTypeRoundedRect];
redColor.tag = 1;
redColor.frame = CGRectMake(658, 80, 100, 30);
[redColor setTitle:@"ROT" forState:UIControlStateNormal];
[redColor addTarget:self action:@selector(changeColor:) forControlEvents:UIControlEventTouchUpInside];
[glView addSubview:redColor];

UIButton * blueColor = [UIButton buttonWithType:UIButtonTypeRoundedRect];
blueColor.tag = 2;
blueColor.frame = CGRectMake(658, 80+30+30, 100, 30);
[blueColor setTitle:@"BLAU" forState:UIControlStateNormal];
[blueColor addTarget:self action:@selector(changeColor:) forControlEvents:UIControlEventTouchUpInside];
[glView addSubview:blueColor];

UIButton * undo = [UIButton buttonWithType:UIButtonTypeRoundedRect];
undo.tag = 1;
undo.frame = CGRectMake(658, 80 +30+30 +30+30, 100, 30);
[undo setTitle:@"UNDO" forState:UIControlStateNormal];
[undo addTarget:self action:@selector(changeHistory:) forControlEvents:UIControlEventTouchUpInside];
[glView addSubview:undo];

UIButton * foto = [UIButton buttonWithType:UIButtonTypeRoundedRect];
foto.tag = 1;
foto.frame = CGRectMake(658, 80 +30+30 +30+30 +30+30, 100, 30);
[foto setTitle:@"FOTO" forState:UIControlStateNormal];
[foto addTarget:self action:@selector(takeScreenshot:) forControlEvents:UIControlEventTouchUpInside];
[glView addSubview:foto];

UIStepper * overdrawStepper = [[UIStepper alloc] initWithFrame:CGRectMake(658, 80 +30+30 +30+30 +30+30 +30+30, 100, 30)];
overdrawStepper.value = 1;
overdrawStepper.minimumValue = 1;
overdrawStepper.maximumValue = 18;
overdrawStepper.stepValue = 1;
[overdrawStepper addTarget:self action:@selector(overdraw:) forControlEvents:UIControlEventValueChanged];

[glView addSubview:overdrawStepper];

UIStepper * thicknessStepper = [[UIStepper alloc] initWithFrame:CGRectMake(658, 80 +30+30 +30+30 +30+30 +30+30 +30+30, 100, 30)];
thicknessStepper.value = 3;
thicknessStepper.minimumValue = 1;
thicknessStepper.maximumValue = 30;
thicknessStepper.stepValue = 1;
[thicknessStepper addTarget:self action:@selector(thickness:) forControlEvents:UIControlEventValueChanged];

[glView addSubview:thicknessStepper];

UIStepper * alphaStepper = [[UIStepper alloc] initWithFrame:CGRectMake(658, 80 +30+30 +30+30 +30+30 +30+30 +30+30 +30+30, 100, 30)];
alphaStepper.value = 1;
alphaStepper.minimumValue = 0.1;
alphaStepper.maximumValue = 1;
alphaStepper.stepValue = 0.1;
[alphaStepper addTarget:self action:@selector(alpha:) forControlEvents:UIControlEventValueChanged];

[glView addSubview:alphaStepper];

UIButton * eraser = [UIButton buttonWithType:UIButtonTypeRoundedRect];
eraser.tag = 1;
eraser.frame = CGRectMake(658, 80 +30+30 +30+30 +30+30 +30+30 +30+30 +30+30 +30+30, 100, 30);
[eraser setTitle:@"Eraser" forState:UIControlStateNormal];
[eraser addTarget:self action:@selector(erase:) forControlEvents:UIControlEventTouchUpInside];
[glView addSubview:eraser];

// 2D projection
[director_ setProjection:kCCDirectorProjection2D];
//  [director setProjection:kCCDirectorProjection3D];

// Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
if( ! [director_ enableRetinaDisplay:YES] )
    CCLOG(@"Retina Display Not supported");

// set the Navigation Controller as the root view controller
// there is a iOS 6 Bug, so we need have this workaround

[self addChildViewController:director_];

// Add the director's OpenGL view as a subview so we can see it.
[self.view addSubview:director_.view];

// Finish up our view controller containment responsibilities.
[director_ didMoveToParentViewController:self];

//        director_.view.frame = CGRectMake(0, 0, 1024, 1024);

// Default texture format for PNG/BMP/TIFF/JPEG/GIF images
// It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
// You can change anytime.
[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

// Assume that PVR images have premultiplied alpha
[CCTexture2D PVRImagesHavePremultipliedAlpha:YES];

// and add the scene to the stack. The director will run it when it automatically when the view is displayed.

self.view.backgroundColor = [UIColor orangeColor];

if ([self loadImage]) {
    lineDrawer = [[LineDrawer alloc] initWithImage:[self loadImage]];
} else {
    lineDrawer = [LineDrawer node];
}

CCScene *scene = [CCScene node];
//[scene setContentSize:glView.frame.size];
[scene addChild:lineDrawer];
[director_ pushScene: scene];

NSLog(@"self.view.frame %@", NSStringFromCGRect(self.view.frame));

// Do any additional setup after loading the view.

#import "cocos2d.h"

@interface LineDrawer : CCLayer

- (id)initWithImage:(UIImage*)imageName;

// change the color of line
- (void)changeLineColorToRed:(float)r_ green:(float)g_ blue:(float)b_ alpha:(float)a_;

// the undo function to call. When you undo the last line, the also will be an change in line color
- (void)undo;

// get the actual drawing from screen
- (UIImage*)getScreenShot;

// property change methods
- (void)changeOverdraw:(float)overdraw_;
- (void)changeThikness:(int)thikness_;
- (void)changeAlpha:(float)alpha_;

@end

- (id)initWithImage:(UIImage *)image
{
self = [super init];
if (self) {
    points = [NSMutableArray array];
    velocities = [NSMutableArray array];
    circlesPoints = [NSMutableArray array];

    _undoManager = [[RMUndoManager alloc] init];

    shaderProgram_ = [[CCShaderCache sharedShaderCache] programForKey:kCCShader_PositionColor];
    overdraw = 1.0f;

    CCTexture2D * imageTexture = [[CCTexture2D alloc] initWithCGImage:image.CGImage
                                                       resolutionType:kCCResolutioniPadRetinaDisplay];

    CCSprite *backGroundSprite = [[CCSprite alloc] initWithTexture: imageTexture];
    [backGroundSprite setPosition:CGPointMake(768/2, 1024/2)];

    renderTexture = [[CCRenderTexture alloc] initWithWidth:(int)self.contentSize.width
                                                    height:(int)self.contentSize.height
                                               pixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    renderTexture.anchorPoint = ccp(0,0);

    renderTexture.position = ccp(1024 * 0.5f, 768 * 0.5f);

    renderTexture.sprite = backGroundSprite;

    [[renderTexture sprite] setBlendFunc:(ccBlendFunc){GL_ONE, GL_ONE_MINUS_SRC_ALPHA}];

    [renderTexture clear:1.0f g:1.0f b:1.0f a:0];

    [renderTexture begin];
    [backGroundSprite visit];
    [renderTexture end];

    [self addChild:renderTexture];

    self.isTouchEnabled = YES;

    ccColor4F c = {0, 0, 190.0f/255.0f, 1};
    drawColor = c;

    thikness = 3;

    UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                                           action:@selector(handlePanGesture:)];
    panGestureRecognizer.maximumNumberOfTouches = 1;
    [self addGestureRecognizer:panGestureRecognizer];

    UILongPressGestureRecognizer *longPressGestureRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self
                                                                                                             action:@selector(handleLongPress:)];
    [self addGestureRecognizer:longPressGestureRecognizer];

    UITapGestureRecognizer * tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                                            action:@selector(handleTap:)];
    tapGestureRecognizer.numberOfTapsRequired = 1;
    [self addGestureRecognizer:tapGestureRecognizer];
}
return self;
} 
```

can someone help me with this?

[https://dl.dropbox.com/u/15710714/iOS%20Simulator%20Bildschirmfoto%2023.01.2013%2016.17.57.png](https://dl.dropbox.com/u/15710714/iOS%20Simulator%20Bildschirmfoto%2023.01.2013%2016.17.57.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T08:10:53.263

只需在`[director_ startAnimation];` 下面添加`[director_ pushScene: scene];`

# java - Downloading file with ProgressDialog ,Cancel Downloading (Android)

> ID：14483151
> 
> 赞同：0
> 
> 时间：2013-01-23T15:26:08.320
> 
> 标签：java, android, download, progressdialog

When download file I show to user this dialog ,have cancel button

```
 protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_DOWNLOAD_PROGRESS:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Downloading ..");
        mProgressDialog.setButton(DialogInterface.BUTTON_NEGATIVE,
                "Cancel", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
        return mProgressDialog;
    default:
        return null;
    }
} 
```

* * *

and my downloading code is :

```
protected String doInBackground(String... aurl) {
        int count;

        try {

            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();
            Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(sunDir.getPath()
                    + musicFileName);
            byte data[] = new byte[1024];
            long total = 0;
            while ((count = input.read(data)) != -1) {
                total += count;
                publishProgress("" + (int) ((total * 100) / lenghtOfFile));
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();

        } catch (Exception e) {
        }
        return null;

    } 
```

* * *

# my problem is :

*   when press cancel button on dialog file downloading don't cancel
*   I want to when user press cancel button if file downloaded complete
    or not delete file exactly

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:36:00.183

> 在对话框文件下载上按取消按钮时不要取消

您将需要使用[AsyncTask.cancel()](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)在取消按钮单击时取消 AsyncTask：

```
 public static boolean downloadstatus=true;
    mProgressDialog.setButton(DialogInterface.BUTTON_NEGATIVE,
                    "Cancel", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            your_AsyncTask.cancel(true);  //<<<<<
                             downloadstatus=false;
                            dialog.cancel();
                        }
                    }); 
```

> 如果文件下载完成或没有完全删除文件，我想当用户按下取消按钮时

您需要检查 AsyncTask 是在运行还是在内部取消`doInBackground`以停止文件下载：

```
 while ((count = input.read(data)) != -1) {
       if(!your_AsyncTask.isCancelled() &&  downloadstatus !=false){
        total += count;
        publishProgress("" + (int) ((total * 100) / lenghtOfFile));
        output.write(data, 0, count);
       }
      else{
             // free all resources here
            break;
        }
    } 
```

# php - 表单提交后生成动态选择框

> ID：14483155
> 
> 赞同：0
> 
> 时间：2013-01-23T15:26:24.250
> 
> 标签：php, jquery, ajax

我正在构建一个上传表单，用户可以在其中上传文档以及有关文档的详细信息，例如其名称等。我遇到的问题是，当用户使用选择选择类别时，我必须生成另一个选择，然后给出用户选择子类别的选项。请参阅以下内容：-

```
 $(".department").change(function() {
    var url = "includes/get-categories.php"; // the script where you handle the form input.
    $.ajax({
       type: "POST",
       url: url,
       data: $("#upload-modal").serialize(), // serializes the form's elements.
       success: function(data){
            //this is where the select is generated
            $(".sub").html(data); // show response from the php script.
            //The alert works but the above line does not
            alert("yeahhhhhhhhhhhhhhh boi");
       }
     }); 
```

Now this works like it should in that when the select is changed it generates another select from get-categories and gives the user another select box. 但是由于某种原因，当用户提交表单并在表单中显示错误列表（字段留空等）时，将不再通过选择类别来生成选择框。我什至用确实有效的警报测试了代码，所以我真的很困惑为什么以下行不起作用

```
$(".sub").html(data); 
```

这是我的表格，非常标准

```
echo "<form enctype='multipart/form-data' action='".$_SERVER['PHP_SELF']."' method='POST' autocomplete='off' id='upload-modal'>"; 
echo '<fieldset>';
echo '<legend>Please fill in all the fields below:- </legend>';

echo '<label for="docname">Document name</label>';
echo '<input class="block" type="text" name="docname" id="docname" value="'.$_POST['docname'].'" />';

echo '<label for="version">Version (if left blank it will be entered as 1.0)</label>';
echo '<input class="block" type="text" name="version" id="version" value="'.$_POST['version'].'" />';

//We need to now give a drop down for the admin to select a department

    try {
        $conn = new PDO(DB_HOST,DB_USER,DB_PASS);
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $stmt = $conn->prepare('SELECT X FROM Y WHERE Z = :id');
        $stmt->execute(array('id' => A));
        while($row = $stmt->fetch()) {

     // if the user is an admin we provide them with the admin link
            if($row['admin_level']=="super" ||     $row['admin_level']=="admin" && $row['department']=="Assurance" ){
                echo '<select id="department" class="block department" name="department">';
                echo '<option value="0">department...</option>';
                echo '<option value="policies">Policies</option>';
                echo '<option value="procedures">Procedures</option>';
                echo '</select>';                   
            } 

            echo '<p class="sub"></p>';
        }
    } catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage();
    }                   

echo '<label for="keywords">Enter keywords (seperate with ",")</label>';
echo '<textarea id="keywords block" name="keywords" rows="4" cols="50" value="'.$_POST['keywords'].'"></textarea> ';

echo '<label for="filename">Supported formats - .docx & .pdf</label>';
echo '<input type="file" name="filename" id="filename" title="Supported formats - .docx and .pdf" />';

echo '<input class="submit-ie6" type="submit" name="submit" value="Upload" id="upload-modal-submit" />';

echo '</fieldset>';
echo '</form>'; 
```

任何帮助都是最受重视的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:04:48.650

尝试使用像 Firebug 这样的工具，看看为什么在提交后，这个： $(".sub").html(data); 不起作用。原因可能是因为在您提交表单（有错误）后：

```
echo '<p class="sub"></p>'; 
```

不在这里。

我会建议以下内容：
获取您的

```
<p class="sub"></p> 
```

没有尝试{}，只需使用 css，如：

```
<p class="sub" style="display:none;"></p> 
```

因此，您所要做的就是当用户选择一个类别时，创建第二个选择框并从 p 中删除 display:none ，例如：

```
$(".sub").html(data);  
$(".sub").show(); 
```

# java - Spring WAR 部署上的 IncompatibleClassChangeError

> ID：14483159
> 
> 赞同：0
> 
> 时间：2013-01-23T15:26:36.520
> 
> 标签：java, spring, tomcat, spring-mvc, tomcat7

将 Spring WAR 文件部署`3.1.0.RELEASE`到 Tomcat 服务器时，会发生以下错误：

```
java.lang.IncompatibleClassChangeError: class org.springframework.asm.util.TraceClassVisitor has interface org.springframework.asm.ClassVisitor as super class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2820)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:932)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:529)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1377)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:857)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:795)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.HTMLManagerServlet.upload(HTMLManagerServlet.java:334)
    at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:211)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:187)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:572)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:851)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:278)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636) 
```

在本地 Tomcat 实例上从 eclipse 启动 WebApplication 可以正常工作，没有任何问题。谷歌上没有这个异常的结果，因为我不知道从哪里开始寻找错误，因为日志中没有我自己的类，我不使用`org.springframework.asm.util.TraceClassVisitor`或`org.springframework.asm.ClassVisitor`项目中的任何地方。

为什么会出现这个错误？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:38:04.423

根据 Java API，在以下情况下会引发[IncompatibleClassChangeError](http://docs.oracle.com/javase/7/docs/api/java/lang/IncompatibleClassChangeError.html)：

> ...当某些类定义发生不兼容的类更改时。当前执行的方法所依赖的某个类的定义已经改变。

如果我正确地解释了这一点，我敢说你有一些不兼容的 JAR。我会在你的应用服务器上检查你的类路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:38:06.143

似乎这个问题是由使用不同版本的 Spring 在同一 tomcat 实例中运行的其他应用程序引起的。

# java - Spring FileSystemXmlApplicationContext 找不到 bean 配置文件并出错

> ID：14483160
> 
> 赞同：1
> 
> 时间：2013-01-23T15:26:43.863
> 
> 标签：java, spring, spring-mvc, applicationcontext

我正在尝试执行以下 Spring“Hello World”示例，该示例使用**FileSystemXmlApplicationContext**作为 ApplicationContext 接口的实现。

此实现必须将**XML bean 配置的完整路径**作为构造函数参数，类似于前面的示例：

```
ApplicationContext context = new FileSystemXmlApplicationContext("C:/Users/ZARA/workspace/HelloSpring/src/Beans.xml"); 
```

我使用 Linux 并且我的 Beans 配置文件位于以下路径下： **/home/andrea/Documents/ws/myapplicationcontextexample/src/main/java/Beans.xml**，所以在我的代码中我有：

```
ApplicationContext context = new FileSystemXmlApplicationContext("/home/andrea/Documents/ws/myapplicationcontextexample/src/main/java/Beans.xml"); 
```

问题是，当我尝试运行我的应用程序时，在 STS\Eclipse 控制台中出现以下错误消息（似乎找不到该文件）：

```
INFO: Loading XML bean definitions from file [/home/andrea/Documents/ws/myapplicationcontextexample/home/andrea/Documents/ws/myapplicationcontextexample/src/main/java/Beans.xml]
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from file [/home/andrea/Documents/ws/myapplicationcontextexample/home/andrea/Documents/ws/myapplicationcontextexample/src/main/java/Beans.xml]; nested exception is java.io.FileNotFoundException: home/andrea/Documents/ws/myapplicationcontextexample/src/main/java/Beans.xml (File o directory non esistente)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:140)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:84)
    at org.andrea.myexample.myapplicationcontextexample.MainApp.main(MainApp.java:14)
Caused by: java.io.FileNotFoundException: home/andrea/Documents/ws/myapplicationcontextexample/src/main/java/Beans.xml (File o directory non esistente)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at org.springframework.core.io.FileSystemResource.getInputStream(FileSystemResource.java:113)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
    ... 13 more 
```

为什么？我该如何解决？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-14T15:15:49.807

> **注意**：普通路径将始终被解释为相对于当前 VM 工作目录，即使它们以斜杠开头。（这与 Servlet 容器中的语义一致。）**使用显式的“file:”前缀来强制使用绝对文件路径。**

参考：[http ://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/support/FileSystemXmlApplicationContext.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/support/FileSystemXmlApplicationContext.html)

# c - 当类型已知时，如何从 void 指针返回具有类型的指针

> ID：14483162
> 
> 赞同：1
> 
> 时间：2013-01-23T15:26:51.193
> 
> 标签：c, types, void-pointers

我目前正在制作一个可以访问 random.org 并获取随机字符串或整数的小型库。不过，在设计方面，我现在遇到了一个小问题，我无法决定我的两种方法中哪一种是最好的，所以我会写下我对这两种方法的想法，并提出我认为与这两种方法相关的问题.

我目前有一个这样的结构：

```
typedef struct {
char **array;
size_t row;
size_t col;
size_t size; 
} MemoryStruct; 
```

这是我的“问题”的根源，因为我现在已将整数处理添加到我的库中。

可以看出，该指针当前是一个 char 指针，并且由于我希望能够处理印迹整数和字符，我应该添加另一个指针 - 一个整数指针 - 还是应该将它改为一个 void 指针并制作一个将返回正确类型的指针的函数？

添加一个整数指针将是最简单的，但我不确定对于将来可能会使用我的库的人来说这看起来有多明显，这就是他的程序段错误的原因，因为他使用了错误的结构中的指针。

但是，添加一个 void 指针意味着我将不得不做一个基于上下文的函数，该函数将返回一个正确类型的指针（如果这甚至可能 - 老实说我不知道​​它是否是），这导致问题：

可以返回不同类型指针的函数具有哪种返回类型？（......很明显，一个 void 指针！）但是我仍然没有包含想要的类型，以便使用我的库的程序员轻松使用 - 这是我想做的伪代码.

```
pointer-with-type-info *fun(MemoryStruct *memory, RandomSession *session)
switch case on session->type
return pointer of appropriate type 
```

应该在这里添加，从 session->type 可以推断出指针应该是哪种类型。

预先感谢您阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:34:33.803

我理解你的问题的方式，你知道指针数据类型。我会使用 a`void*`而不是两个指针，因为您可以稍后添加更多数据类型而无需创建更多字段。

要检索正确的值，可以创建两个函数：`int getAsString(MemoryStruct, char** value)`和`int getAsInteger(MemoryStruct, int &value)`。`true`如果成功 ( ) ，这些函数将返回一个非零值。这样，您不仅可以检索到正确的值，而且您将有办法知道该值是否可以作为这种数据类型检索。

# python - Pygame文本输入不在屏幕上

> ID：14483163
> 
> 赞同：0
> 
> 时间：2013-01-23T15:26:59.943
> 
> 标签：python, text, pygame, user-input

当它出现在空闲外壳上时，我需要将 kb 输入到 pygame 屏幕上，任何建议将不胜感激。

这段代码是从一个较大的程序中提取的，主要是基于屏幕的，但我有时需要从 kb 中输入一些数据（数字）

```
import sys
import pygame
from pygame.locals import *
pygame.init()

N= ''
screen = pygame.display.set_mode((600,600))
font= pygame.font.Font(None,40)
screen.fill((255,255,255))
pygame.display.flip
pygame.display.update()

def score(C,y):
    SetWnd = font.render( C,True,(0,0,255))
    screen.blit(SetWnd, (15, 100+y))
    pygame.display.update()

def start():
    while True:
        name=''

        for evt in pygame.event.get():
                if evt.type == KEYDOWN:
                    if evt.unicode.isalnum(): # unicode
                        name+=evt.unicode
                        print name,

                    elif evt.key == K_BACKSPACE:
                            name = name[:-1]
                            print name,
                    elif evt.key == K_RETURN:
                        return N
                elif evt.type == QUIT:
                    pygame.quit()
                    sys.exit()
def Pchange(c,y):
    block = font.render(N, True, (0,0,0))
    rect = block.get_rect()
    rect.move_ip(75,100 + y)
    screen.blit(block,rect)
    pygame.display.flip()

score('wind', 0)
score('elev',20)

N = start()
Pchange(N,0)
Pchange(N,20) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:40:27.250

首先，您两次绘制分数，我认为效果很好。

问题在于你的启动功能。您没有在 while 循环中调用任何绘制或更新函数。在您的事件 foreach 中，您添加一个数字`name`，并在按下 enter 时退出 while 循环。然后你用 Pchange 画了两次，但是你的函数没有使用正确的参数。你有：

```
def Pchange(c,y):
    block = font.render(N, True, (0,0,0)) 
```

您正在使用全局 N，即 ''。因此，要解决此问题，您需要更改`N`为`c`.

下一个问题是游戏在按下回车后立即退出。由于您仅粘贴了程序的一部分，因此可能并非如此。`pygame.quit()`如果是，则进行另一个 while 循环，然后等待 ESC 键调用`sys.exit()`

# html - Div 不会垂直对齐

> ID：14483167
> 
> 赞同：2
> 
> 时间：2013-01-23T15:27:10.550
> 
> 标签：html, css

`<div id='loadingScreen'>`由于 0 的宽度，`position:absolute`因此定位不起作用。添加 100% 的宽度`<div id='loadingScreen'>`并不能解决问题。

CSS：

```
 #loadingScreen{
            position:relative;
        }
        .centered{
            height:100px;
            position:absolute;
            top:50%;
            margin-top:-50px;
        } 
```

HTML：

```
 <div id="loadingScreen">
        <div class="centered">
            <!--stuff-->
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:42:38.707

```
.loadingScreen
{
display:table;
}

.centered
{
display:table-cell;
vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:04:37.437

当您执行 position:absolute 时，您实际上是在“手动”将对象放置在您想要的位置，这意味着它不应该自动对齐。

对于正常的垂直对齐 - 尝试 line-height:(div-height); 在 .loadingScreen 的 CSS 中。

如果您的 div 是表格的一部分，请尝试 vertical-align:middle; 反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:35:39.847

你可以这样做：

```
.centered
{
    height:200px;           
    border: 1px solid black;
    vertical-align: middle;
    display:table-cell;
} 
```

这是 JS Bin 中的演示：http: [//jsbin.com/ireqoc/1/edit](http://jsbin.com/ireqoc/1/edit)

# node.js - NodeJS中进程的CPU使用率

> ID：14483173
> 
> 赞同：7
> 
> 时间：2013-01-23T15:27:24.627
> 
> 标签：node.js, cpu, cpu-usage

我有一个 NodeJS 应用程序，它在具有 24 个内核的服务器上生成进程。作为一项规则，我不会为每个核心生成一个以上的进程（最多总共 24 个进程）。我想知道每个进程产生的核心的 CPU 使用率。有可能调查这样的事情吗？我知道我可以使用`os.cpus()`，但这会返回有关机器中所有 CPU 的更一般信息，而不是我正在查询的进程正在处理的那个。

有没有可能用我们在 NodeJS 中的东西做这样的事情？我不想依靠从 NodeJS 执行（繁重的）bash 脚本来了解类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T17:51:44.543

尝试[使用节点](https://github.com/arunoda/node-usage)使用 PID 来跟踪 CPU

您可以使用节点用法，如下所示

```
var spawn = require('child_process').spawn;
var usage = require('usage');

var ffmpeg = spawn('ffmpeg');
usage.lookup(ffmpeg.pid, function(err, usageInfo) {

    console.log(usageInfo); // { cpu: 2.4, memory: 100065280 }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T17:48:03.547

当然我可能是错的，但我不确定是否有用于工作进程 CPU 使用的 API，但您可以获取所有内核的每个内核：[http ://nodejs.org/api/os.html#os_os_cpus](http://nodejs.org/api/os.html#os_os_cpus)

另一方面：对于这种能力，您可能需要考虑检查您是否可以访问系统的所有内存。V8 限制为需要重新编译的默认设置，以便为内存访问提供“更深的口袋”。

# jquery - 通过 AJAX 和 Rails 重新生成并引入新的 CSRF 令牌

> ID：14483180
> 
> 赞同：3
> 
> 时间：2013-01-23T15:27:51.737
> 
> 标签：jquery, ruby-on-rails-3.2, csrf

我在 Rails 后端有一个 Backbone 应用程序。我在发送 CSRF 令牌时没有问题，但是我在注销并想重新登录时遇到问题，但它没有验证登录，因为 CSRF 令牌在注销后发生了更改。

有没有办法在不进行整页请求的情况下提取此 CSRF 令牌，或者我是否应该始终让浏览器在注销后从服务器刷新整页以阻止这种情况发生？

如果没有其他办法解决这个 CSRF 问题，我可以进行完整的浏览器刷新，我只是认为我的用户因为 CSRF 而获得了一种糟糕的体验，但我认为如果他们的帐户得到更好的保护，他们会原谅我的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:23:24.543

在此处查看教程“最终正确处理 Rails 的 CSRF 保护和 Backbone 的 AJAX”：http: [//blog.softr.li/post/43146401263/finally-correctly-dealing-with-rails-csrf-protection](http://blog.softr.li/post/43146401263/finally-correctly-dealing-with-rails-csrf-protection)

# asp.net-mvc-3 - 如何在 SubGrid Jqgird 上传递额外的参数

> ID：14483181
> 
> 赞同：0
> 
> 时间：2013-01-23T15:28:01.800
> 
> 标签：asp.net-mvc-3, jqgrid, jqgrid-asp.net

假设以下网格

```
$(document).ready(function() {
        $('#Clientes').jqGrid({colNames: ['Razón Social','Cuit','Dirección','Localidad','Teléfono','Tipo IVA','Mail','Saldo inicial','Facturar'], 
        colModel: [{ editable: true, editoptions: { "maxlength":70 }, editrules: { required: true }, name: 'RazonSocial' },
                   { editable: true, editoptions: { dataInit: CuitMask, "maxlength":13 }, editrules: { custom: true, custom_func: ValidateCuit, required: true }, name: 'NidentFiscal' },
                   { editable: true, editoptions: { "maxlength":70 }, editrules: { required: true }, name: 'Direccion' },
                   { editable: true, edittype: 'select', editoptions: { dataUrl: '/Ciudad/CmbCiudad' }, editrules: { required: true }, name: 'Ciudad' },
                   { editable: true, editoptions: { "maxlength":20 }, name: 'Telefono' }],
url: '/Clientes/List',
datatype: 'json',
mtype: 'POST',
pager: '#ClientesPager',
prmNames: { id: 'ClienteId' }, 
rowList: [10,15,20,25,30],
sortname: 'ClienteId',
subGrid: true,
subGridRowExpanded: function(subgridId, rowId) {
    var subgridTableId = subgridId + '_t';
    jQuery('#' + subgridId).append('<table id="' + subgridTableId + '"></table>');
    var subgridPagerId = subgridId + '_p';
    jQuery('#' + subgridId).append('<div id="' + subgridPagerId + '"></div>');
    $('#' + subgridTableId).jqGrid({colNames: ['Fecha','Importe'],
     colModel: [{ name: 'Fecha' },
                { editable: true, editrules: { number: true }, formatter: 'currency', formatoptions: { prefix: '$' }, name: 'Importe' }
               ],url: '/Honorarios/DetailSubgrid?id=' + rowId, datatype: 'json', mtype: 'POST', pager: '#' + subgridPagerId, 
     prmNames: { id: 'HonorarioId' }, 
     rowList: [10,15,20,25,30],
     sortname: 'HonorarioId',
     viewrecords: true,
     width: 600,
     height: '100%'}).jqGrid('navGrid', '#' + subgridPagerId,{ search: false },{ url: '/Honorarios/Update', closeAfterEdit: true },{ url: '/Honorarios/Update', closeAfterEdit: true },{ url: '/Honorarios/Delete' });
    },
viewrecords: true,
width: 1000,
height: '100%'
}).jqGrid('navGrid', '#ClientesPager',{ search: false },{ url: '/Clientes/Update', width: 500, closeAfterEdit: true }, { url: '/Clientes/Update', width: 500, closeAfterEdit: true }, { url: '/Clientes/Delete' });
}); 
```

在子网格中添加或编辑记录时，我需要传递 ClienteId 参数 这应该使用 postdata 完成吗？就像是

```
 postData: {ClienteId: row_id} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:14:41.527

解决方案正在使用

```
editData: { ClienteId: rowId } 
```

坦克@tpeczek

# c# - Ubuntu 上 MonoDevelop 中的 Webkit

> ID：14483182
> 
> 赞同：7
> 
> 时间：2013-01-23T15:28:02.050
> 
> 标签：c#, mono, webkit, monodevelop

我在 Ubuntu 12.04 上使用 Mono 2.10 和 MonoDevelop 2.8。

我是 Mono 的新手。[我使用本教程](http://shana.worldofcoding.com/en/browser.html)创建了一个简单的应用程序。现在我有两个问题：

1 -**引用 webkit-sharp.dll**。我可以在我的系统路径下找到这个 dll `usr\lib\mono\gac\webkit-sharp\1.1.15.0__eaa1d335d2e19745\webkit-sharp.dll`，但它对 MonoDevelop 不可见。我只能通过指定 dll 的完整路径来添加它。这种情况对我来说似乎不正常。可能我应该安装更多的软件包以使 webkit-sharp.dll 可见或使用另一个 dll？

2 - 教程创建 gtk# 应用程序。是否可以在 winforms 应用程序中使用 webkit？如果是，怎么做？我需要将现有的 winforms 应用程序（带有嵌入式 webkit）移植到 Mono。如果可以在 Mono 上使用 webkit 创建 winform 应用程序 - 这将节省我的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T18:50:35.400

我将尝试回答您的两个问题：

1）您可以通过右键单击“解决方案”区域中的“引用”来添加对webkit-sharp.dll的引用：

![在此处输入图像描述](../Images/9af25dd4b770476c632cc273b638b910.png)

然后点击“编辑引用”：

![编辑参考](../Images/c2939b0ad16240e855d1dc2f4638a977.png)

然后选择“.NET 程序集”选项卡。导航找到“webkit-sharp.dll”，以及您的参考资料。当然，在您的代码中，您将需要以下内容：

```
using webkit-sharp 
```

2）我不会那样做。并不是说你不能，但我在这里的理由是 MonoDevelop 可以用 winforms 编译东西，但是在设计 GUI 的东西方面，afaik，没有适用于 MonoDevelop 的 winforms 的 GUI 编辑器。MonoDevelop 在 GUI 设计中使用 GTK#。（做自己想做的事也不是不可能，只是不推荐而已。）

干杯！

# c - 为什么标准让不返回的函数编译？

> ID：14483185
> 
> 赞同：5
> 
> 时间：2013-01-23T15:28:20.140
> 
> 标签：c, c99

f() 不会返回，即使它的签名说它应该。为什么允许它编译的原因是什么？C标准是否有理由不要求编译器使其失败？

我知道这是未定义的行为，但为什么首先允许它？有历史原因吗？

```
double f(){}

int main()
{
    f();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:34:10.350

> C标准是否有理由不要求编译器使其失败？

通过调用未定义的行为，C 标准允许编译器不那么复杂。确实有一些情况，比如`if`语句，很难说函数有没有返回值：

```
int f(int n)
{
  if (n > 0) return 1;
} 
```

*   如果我写`f(5)`，编译器很容易说函数是正确的。
*   如果我写`f(-5)`，也很容易检测到未定义的返回值。

但是，例如，如果参数来自用户输入，编译器应该如何知道函数是否返回值？由于这可能是一个有效或错误的程序，C 标准允许编译器做他们想做的事。C 被设计为尽可能智能和简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:36:21.413

如果编译器*不能*证明函数*总是*返回一个有意义的值，编译器当然可以分析函数的所有代码路径并拒绝程序。我想该标准没有强制要求的原因是，在过去，编译器远没有我们今天使用的那么复杂。

当然，使用这种函数的返回值是未定义的行为：

> 如果到达终止函数的 }，并且调用者使用了函数调用的值，则行为未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:37:17.597

很容易看出你的函数将在没有返回值的情况下结束。它不会返回*，*也不会调用任何可能阻止它到达末尾的代码（如`abort()`）。

事实上，您的程序在 C99 中*没有*未定义的行为，因为调用者没有使用丢失的返回值。6.9.1/12：

> 如果到达终止函数的}，并且调用者使用了函数调用的值，则行为未定义。

所以你的代码风格有问题，但定义明确。

C++ 标准更改了规则并在`[diff.stat]`. 它说 C 版本的规则是为了支持在 C 不区分`int`return 和`void`return 的日子里写回的代码。因此，您的代码首先定义行为的原因是“遗留”。也就是说，AFAIK C 始终区分`double`返回和`int`返回，因此如果在正确的时间完成，它可能会使返回函数的 UB`double`落到最后。

抛开是否使用返回值，考虑一个诡计函数：

```
double f() {
    if (g()) exit();
} 
```

这个函数也不包含 return 语句，但如果实际上`g`总是返回一个真值或根本不返回，则不会到达函数的末尾。因此，即使使用它的返回值，这个函数也应该被接受，根据一般的 C 标准原则，你应该知道你在做什么并且你说的是什么意思。如果`g`在不同的 TU 中定义，那么您可能比编译器更了解它。

即使不是出于遗留原因，我也很确定标准根本不会被打扰添加文本以定义编译器需要检测哪些非返回场景。这取决于实现的质量——如果可以在编译时确定您的函数不可能避免 UB，那么尽管不需要诊断，编译器可能仍会发出警告。就此而言，当根据通用 C*实现者的*原则定义行为时，它偶尔会发出警告，即有些事情太愚蠢以至于用户无法合理地理解它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T15:31:22.427

因为编译器无法判断函数是否在运行时返回。

# nhibernate - Fluent NHibernate 复杂映射

> ID：14483188
> 
> 赞同：2
> 
> 时间：2013-01-23T15:28:31.647
> 
> 标签：nhibernate, mapping, fluent

我们正在研究一个要求 MemberAgreement 根据网络和状态组合而变化的域。MemberAgreement 有一个模板，可由多个国家共享一个网络。

我们对实体建模的方式是

```
public class MemberAgreement
{
        public Network Network { get; protected set; }
        public List<State> States { get; protected set; }
        public Template Template {get; protected set; }
} 
```

表格设计为：

```
Agreement
---------
Id
NetworkId
StateId
TemplateId 
```

在此表协议中，NetworkId 和 TemplateId 可以针对不同的 StateId 重复。

现在，我如何在 Fluent NHibernate 中映射它？我们在网络和状态之间有一对多的关系，这两者的组合与模板有多对多的关系。

帮助表示赞赏。

个人电脑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:03:29.863

*原样*的表结构将迫使您更改`MemberAgreement`对象定义。每一行（按 ID 唯一）都引用了一个 ReferenceType：

```
public class MemberAgreement
{
  public virtual Network Network { get; protected set; }
  //  public List<State> States { get; protected set; }
  public virtual State State { get; protected set; }
  public virtual Template Template {get; protected set; }
} 
```

有了这个，您的映射将被简化`References(x => x.State)`。但是更多的问题将出现在您的业务层中，您必须在其中使用集合：`IList<MemberAgreement>`.

其他选项是使用[6.9。三元协会](http://nhforge.org/doc/nh/en/index.html#collections-ternary)。提取并应用于网络：

```
public class Network
{
  ...
  public virtual IDictionary<State, Template> StateTemplates { get; set; }
}

<map name="States" table="Agreement" >
    <key column="NetworkId" />
    <index-many-to-many column="StateId" class="State" />
    <many-to-many column="TempalteId" class="Template" />
</map> 
```

像这样流利：

```
HasMany(x => x.StateTemplates)
    .KeyColumn("NetworkId")
    .AsMap<State>("StateId")
    .AsTernaryAssociation("TemplateId"); 
```

# ruby - Ruby Array#assoc 是否使用线性搜索？

> ID：14483189
> 
> 赞同：1
> 
> 时间：2013-01-23T15:28:31.890
> 
> 标签：ruby

嗯..还不能读这个..但是 Ruby Array#assoc 使用线性搜索吗？

```
rb_ary_assoc(VALUE ary, VALUE key)
{
    long i;
    VALUE v;

    for (i = 0; i < RARRAY_LEN(ary); ++i) {
        v = rb_check_array_type(RARRAY_PTR(ary)[i]);
        if (!NIL_P(v) && RARRAY_LEN(v) > 0 &&
            rb_equal(RARRAY_PTR(v)[0], key))
            return v;
    }
    return Qnil;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:53:23.260

就个人而言，我发现 Rubinius 源代码比 YARV 源代码*更*容易阅读。（实际上，我发现*所有*其他 Ruby 实现的源代码都比 YARV 或 MRI 更容易阅读。）

这是[来自 Rubinius](https://GitHub.Com/Rubinius/Rubinius/blob/master/kernel/common/array.rb#L270-278)[的实现`Array#assoc`](https://GitHub.Com/Rubinius/Rubinius/blob/master/kernel/common/array.rb#L270-278)：

```
def assoc(obj)
  each do |x|
    if x.kind_of? Array and x.first == obj
      return x
    end
  end

  nil
end 
```

所以，是的，很容易看出它确实*使用*了线性搜索。

但是您实际上并不需要查看源代码来弄清楚这一点。还能是什么？与搜索树或排序数组不同，没有可以利用的结构或顺序来加速它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T15:33:35.333

是的; 它正在遍历数组：`RARRAY_PTR(ary)[i]`

这是唯一有意义的事情，因为数组可能会或可能不会被排序。

（注意 Ruby 2 将引入 a `bsearch`，并且至少有 2-3 个 gem 用于二进制搜索，如果您关心速度。有关详细信息，请参阅[https://stackoverflow.com/a/8672512/438992](https://stackoverflow.com/a/8672512/438992)。）

# eclipse - Running servlet within Eclipse requires libs to be defined 3 times - am I doing something wrong?

> ID：14483191
> 
> 赞同：1
> 
> 时间：2013-01-23T15:28:35.837
> 
> 标签：eclipse, tomcat, deployment, classpath, classnotfoundexception

Hullo - issue is this:

*   I wrote a servlet in Eclipse which requires mysql-connector-java-5.1.22-bin.jar
*   To **compile** I need to add the jar via the project's "Java Build Path"
*   To **deploy** I need to add the jar to the project's "Deployment Assembly"
*   To **run** the servlet within eclipse I need to add the jar to the servlet's Run Configuration -> Classpath

It's not the end of the world re-re-repeating myself like this, but it does seem odd.

Given that Eclipse gets a lot of other stuff correct I'm guessing / hoping that maybe I'm overlooking some feature to avoid this silliness (I cannot imagine a scenario where you'd benefit from entering this in 3 different spots ... but maybe I'm being uncreative here ...).

Insights appreciated :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:48:45.167

您唯一需要做的就是将罐子放入`WebContent/WEB-INF/lib`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:53:29.507

您正在开发一个 Java Web 项目，因此放置所需库（JAR 文件等）的传统位置位于`/WEB-INF/lib`. 而且你只做一次。

在 Eclipse 中，当您创建**Dynamic Web Project**时，会为您生成适当的项目结构（这是一个**开发结构**）。在这种情况下，您将 JAR 文件放在*ProjectName/WebContent/WEB-INF/lib*文件夹中。这个文件夹***自动包含在项目的构建路径**中。

考虑到它是一个 Java Web 项目（你说你使用**servlets**），你必须将你的 Web 应用程序部署到一些应用程序服务器，如 GlassFish、JBoss、WebLogic、WebSphere 等，或更简单的 Web 容器，如 Apache Tomcat。如果您通过 Eclipse 执行此操作，那么您的 Web 项目将再次自动部署。

**注意！**
可能有一些与使用库相关的额外细节。例如，在使用数据库驱动程序（MySql、PostgreSQL、Oracle 等）时， **Tomcat在**[配置 JNDI 数据源](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)时建议以下内容（引用）：

> 在继续之前，**不要忘记将 JDBC 驱动程序的 jar 复制到 $CATALINA_HOME/lib**

在您的情况下（MySQL），请参见此处的示例：[MySQL DBCP 示例](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example)

* * *

[另请参阅我与Webapp 配置文件组织约定](https://stackoverflow.com/a/14200520/814702)相关的答案。

## 希望这会帮助你。

PS 这是一个分步示例：[如何从 Web 应用程序访问 MySQL？](http://www.avajava.com/tutorials/lessons/how-do-i-access-mysql-from-a-web-application.html?page=1)

# python - 如何在 python 的一个类中处理 asyncore，而不阻塞任何东西？

> ID：14483195
> 
> 赞同：15
> 
> 时间：2013-01-23T15:28:47.007
> 
> 标签：python, multithreading, smtp, asyncore

我需要创建一个可以接收和存储 SMTP 消息的类，即 E-Mails。为此，我`asyncore`根据[此处](http://www.doughellmann.com/PyMOTW/smtpd/)发布的示例使用。但是，`asyncore.loop()`是阻塞的，所以我不能在代码中做任何其他事情。

所以我想到了使用线程。这是一个示例代码，显示了我的想法：

```
class MyServer(smtpd.SMTPServer):
    # derive from the python server class

    def process_message(..):
        # overwrite a smtpd.SMTPServer method to be able to handle the received messages
        ...
        self.list_emails.append(this_email)

    def get_number_received_emails(self):
        """Return the current number of stored emails"""
        return len(self.list_emails)

    def start_receiving(self):
        """Start the actual server to listen on port 25"""

        self.thread =   threading.Thread(target=asyncore.loop)
        self.thread.start()     

    def stop(self):
        """Stop listening now to port 25"""
        # close the SMTPserver from itself
        self.close()
        self.thread.join() 
```

我希望你能得到这张照片。该类`MyServer`应该能够以非阻塞方式开始和停止侦听端口 25，能够在侦听（或不侦听）时查询消息。该`start`方法启动`asyncore.loop()`侦听器，当接收到电子邮件时，将其附加到内部列表。类似地，该`stop`方法应该能够停止该服务器，如此处所建议[的](https://stackoverflow.com/questions/10490077/how-to-quit-an-asyncore-dispatcher-from-a-handler)。

尽管这段代码没有像我期望的那样工作（asyncore 似乎永远运行，即使我调用了上面的`stop`方法。`error`我 raise 被捕获在 内`stop`，但不在包含 的`target`函数内`asyncore.loop()`），我不确定我的方法是否问题是有道理的。对于修复上述代码或提出更可靠的实现（*不*使用第三方软件）的任何建议，我们都表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T08:24:54.940

提供的解决方案可能不是最复杂的解决方案，但它工作合理并且已经过测试。

首先，正如用户*Wessie*在之前的评论中指出的那样`asyncore.loop()`，它会一直阻塞直到所有`asyncore`频道都关闭。参考前面提到的[smtp 示例](http://www.doughellmann.com/PyMOTW/smtpd/)，结果是继承自（如[smtpd 文档](http://docs.python.org/2/library/smtpd.html)中所述），它回答了要关闭哪个通道的问题。*`smtpd.SMTPServer``asyncore.dispatcher`*

 *因此，可以使用以下更新的示例代码来回答原始问题：

```
class CustomSMTPServer(smtpd.SMTPServer):
    # store the emails in any form inside the custom SMTP server
    emails = []
    # overwrite the method that is used to process the received 
    # emails, putting them into self.emails for example
    def process_message(self, peer, mailfrom, rcpttos, data):
        # email processing

class MyReceiver(object):
    def start(self):
        """Start the listening service"""
        # here I create an instance of the SMTP server, derived from  asyncore.dispatcher
        self.smtp = CustomSMTPServer(('0.0.0.0', 25), None)
        # and here I also start the asyncore loop, listening for SMTP connection, within a thread
        # timeout parameter is important, otherwise code will block 30 seconds after the smtp channel has been closed
        self.thread =  threading.Thread(target=asyncore.loop,kwargs = {'timeout':1} )
        self.thread.start()     

    def stop(self):
        """Stop listening now to port 25"""
        # close the SMTPserver to ensure no channels connect to asyncore
        self.smtp.close()
        # now it is save to wait for the thread to finish, i.e. for asyncore.loop() to exit
        self.thread.join()

    # now it finally it is possible to use an instance of this class to check for emails or whatever in a non-blocking way
    def count(self):
        """Return the number of emails received"""
        return len(self.smtp.emails)        
    def get(self):
        """Return all emails received so far"""
        return self.smtp.emails
    .... 
```

所以最后，我有`start`一个`stop`方法可以在非阻塞环境中启动和停止监听端口 25。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T17:40:49.457

来自另一个问题[asyncore.loop 在没有更多连接时不会终止](https://stackoverflow.com/questions/14485528/asyncore-loop-doesnt-terminate-when-there-are-no-more-connections)

我认为你对线程的思考有点过头了。`asyncore.loop`使用来自另一个问题的代码，您可以通过以下代码片段启动一个运行的新线程：

```
import threading

loop_thread = threading.Thread(target=asyncore.loop, name="Asyncore Loop")
# If you want to make the thread a daemon
# loop_thread.daemon = True
loop_thread.start() 
```

这将在一个新线程中运行它，并将继续运行，直到所有`asyncore`通道都关闭。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T16:32:11.920

您应该考虑改用 Twisted。 [http://twistedmatrix.com/trac/browser/trunk/doc/mail/examples/emailserver.tac](http://twistedmatrix.com/trac/browser/trunk/doc/mail/examples/emailserver.tac)演示了如何使用可自定义的交付挂钩设置 SMTP 服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T03:18:48.943

亚历克斯的答案是最好的，但对于我的用例来说是不完整的。我想测试 SMTP 作为单元测试的一部分，这意味着在我的测试对象中构建假 SMTP 服务器，并且服务器不会终止 asyncio 线程，所以我必须添加一行将其设置为守护线程以允许其余的单元测试在不阻塞等待该异步线程加入的情况下完成。我还添加了所有电子邮件数据的完整记录，以便我可以断言通过 SMTP 发送的任何内容。

这是我的假 SMTP 类：

```
class TestingSMTP(smtpd.SMTPServer):
    def __init__(self, *args, **kwargs):
        super(TestingSMTP, self).__init__(*args, **kwargs)
        self.emails = []

    def process_message(self, peer, mailfrom, rcpttos, data, **kwargs):
        msg = {'peer': peer,
               'mailfrom': mailfrom,
               'rcpttos': rcpttos,
               'data': data}
        msg.update(kwargs)
        self.emails.append(msg)

class TestingSMTP_Server(object):

    def __init__(self):
        self.smtp = TestingSMTP(('0.0.0.0', 25), None)
        self.thread = threading.Thread()

    def start(self):
        self.thread = threading.Thread(target=asyncore.loop, kwargs={'timeout': 1})
        self.thread.daemon = True
        self.thread.start()

    def stop(self):
        self.smtp.close()
        self.thread.join()

    def count(self):
        return len(self.smtp.emails)

    def get(self):
        return self.smtp.emails 
```

下面是 unittest 类调用它的方式：

```
smtp_server = TestingSMTP_Server()
smtp_server.start()

# send some emails

assertTrue(smtp_server.count() == 1) # or however many you intended to send
assertEqual(self.smtp_server.get()[0]['mailfrom'], 'first@fromaddress.com')

# stop it when done testing
smtp_server.stop() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-11T12:21:32.543

万一其他人需要更充实一点，这就是我最终使用的。这将 smtpd 用于电子邮件服务器，将 smtpblib 用于电子邮件客户端，使用 Flask 作为 http 服务器 [ [gist](https://gist.github.com/duhaime/cd2e2f1ad50d81890318abe518112c71) ]：

**应用程序.py**

```
from flask import Flask, render_template
from smtp_client import send_email
from smtp_server import SMTPServer

app = Flask(__name__)

@app.route('/send_email')
def email():
  server = SMTPServer()
  server.start()
  try:
    send_email()
  finally:
    server.stop()
  return 'OK'

@app.route('/')
def index():
  return 'Woohoo'

if __name__ == '__main__':
  app.run(debug=True, host='0.0.0.0') 
```

**smtp_server.py**

```
# smtp_server.py
import smtpd
import asyncore
import threading

class CustomSMTPServer(smtpd.SMTPServer):
  def process_message(self, peer, mailfrom, rcpttos, data):
    print('Receiving message from:', peer)
    print('Message addressed from:', mailfrom)
    print('Message addressed to:', rcpttos)
    print('Message length:', len(data))
    return

class SMTPServer():
  def __init__(self):
    self.port = 1025

  def start(self):
    '''Start listening on self.port'''
    # create an instance of the SMTP server, derived from  asyncore.dispatcher
    self.smtp = CustomSMTPServer(('0.0.0.0', self.port), None)
    # start the asyncore loop, listening for SMTP connection, within a thread
    # timeout parameter is important, otherwise code will block 30 seconds
    # after the smtp channel has been closed
    kwargs = {'timeout':1, 'use_poll': True}
    self.thread = threading.Thread(target=asyncore.loop, kwargs=kwargs)
    self.thread.start()

  def stop(self):
    '''Stop listening to self.port'''
    # close the SMTPserver to ensure no channels connect to asyncore
    self.smtp.close()
    # now it is safe to wait for asyncore.loop() to exit
    self.thread.join()

  # check for emails in a non-blocking way
  def get(self):
    '''Return all emails received so far'''
    return self.smtp.emails

if __name__ == '__main__':
  server = CustomSMTPServer(('0.0.0.0', 1025), None)
  asyncore.loop() 
```

**smtp_client.py**

```
import smtplib
import email.utils
from email.mime.text import MIMEText

def send_email():
  sender='author@example.com'
  recipient='6142546977@tmomail.net'

  msg = MIMEText('This is the body of the message.')
  msg['To'] = email.utils.formataddr(('Recipient', recipient))
  msg['From'] = email.utils.formataddr(('Author', 'author@example.com'))
  msg['Subject'] = 'Simple test message'

  client = smtplib.SMTP('127.0.0.1', 1025)
  client.set_debuglevel(True) # show communication with the server
  try:
    client.sendmail('author@example.com', [recipient], msg.as_string())
  finally:
    client.quit() 
```

然后启动服务器`python app.py`并在另一个请求中模拟一个对`/send_email`with的请求`curl localhost:5000/send_email`。请注意，要实际发送电子邮件（或短信），您需要跳过此处详述的其他环节：[https ://blog.codinghorror.com/so-youd-like-to-send-some-email-through-code /](https://blog.codinghorror.com/so-youd-like-to-send-some-email-through-code/)。*

# cuda - 如何通过 USB 连接 NVIDIA CUDA PCI-E 显卡？

> ID：14483199
> 
> 赞同：0
> 
> 时间：2013-01-23T15:28:54.050
> 
> 标签：cuda, usb, gpu, gpgpu, nvidia

我想运行一些 CUDA 计算，但我只有没有 NVIDIA 的简单笔记本。

是否有任何 USB 适配器可以将 NVIDIA 显卡连接到我的笔记本电脑？

如果有这样的设备，那就太好了，我可以连接我的 NVIDIA 卡，将其插入我的计算机，运行计算，然后断开与笔记本电脑的连接，直到计算完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:48:40.693

不幸的是没有。

与 PC 中连接显卡的内部总线相比，USB 非常非常慢，因此 GPU 用于计算的速度会被长时间的复制数据所浪费。

USB 是基于消息的，它不允许您的计算机查看 GPU 卡内存（或相反），因此您实际上需要 GPU 端的另一台计算机来解包。

有一个名为 Thunderbolt 的新型高速连接器，它（本质上）是计算机内部的 PCIe 总线，连接到插槽。这将允许外部设备（如 GPU）像直接连接到总线一样工作。但它现在只出现在一些昂贵的型号上，而且（还）没有多少设备存在。

亚马逊现在确实在他们的云服务上提供了 GPU，但这对于学习/玩来说可能有点贵。

# xml - Prepopulating a dropdownlist with xml file in pdf

> ID：14483202
> 
> 赞同：0
> 
> 时间：2013-01-23T15:29:06.780
> 
> 标签：xml, adobe, livecycle

I want to make a pdf form that has a dropdownlist filled with data from an external xml file. The xml file is updated every few days.

I want it so that the client can click a button on our application to download the pdf. When it is downloaded (or when the xml file is updated, whichever works best), I would like it so the pdf prepopulates its dropdownlist with the data from the xml file and is then pushed to the client.

The xml has a structure similar to this:

```
<items>
    <item>
        <display>string displayed in dropdownlist</display>
        <value>value used in barcode</value>
    </item>
    <item>
        <display>Sample data</display>
        <value>1</value>
    </item>
</items> 
```

So the client would download the pdf file, open it in reader, fill out the form, where the data is put into a pdf417 barcode (so I need the form to retain the extended reader functionality), printed, etc.

I'm currently using LiveCycle Designer to create the form, and a LiveCycle server is not out of the question if that's what's needed.

Is this even possible? How would I do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:10:10.203

是的，有可能。事实上，LiveCycle ES 服务器（连同其相关模块）有助于将 XML 与 LiveCycle 模板合并。

在您提到的用例中，您可以利用 LiveCycle 服务器将 XML 数据与 PDF 合并，生成动态 PDF，Reader 对其进行扩展并将其呈现给客户端。下拉列表也将包含更新的数据。

如果您有任何其他问题，请告诉我。

谢谢，阿玛汉。

# scheme - Gaussian functions and currying in Scheme

> ID：14483203
> 
> 赞同：2
> 
> 时间：2013-01-23T15:29:10.407
> 
> 标签：scheme, gaussian, currying

I am currently trying to learn Scheme to run FDTD simulations and I am having trouble building a Gaussian function in 2 dimensions.

In a forum I found this possibility for 1D:

```
(define ( (gaussx sigma) x)
   (exp (- (/ (vector3-dot x x) (* 2 sigma sigma))))) 
```

which if I understood currying correctly is equivalent to:

```
(define  (gauss sigma)
   (lambda(x)
      (exp (- (/ (vector3-dot x x) (* 2 sigma sigma)))))) 
```

Now I would like the function to be gaussian along both x and y directions but I don't understand why this doesn't work:

```
(define  (gauss sigma)
   (lambda(x)
      (lambda(y)
         (exp (- (/ (+ (vector3-dot y y) (vector3-dot x x)) (* 2 sigma sigma)))) 
```

When I call

```
(gauss 1) 
```

I get the following message:

```
ERROR: Wrong type (expecting real number): # <procedure> #f (y) 
```

Does someone see what I am doing wrong? I also tried other solutions but I don't seem to get the logics here...

Thanks a lot for your help!

Best regards Mei

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:35:19.350

我认为这里不需要双重咖喱，试试这个：

```
(define (gauss sigma)
  (lambda (x y)
    (exp (- (/ (+ (vector3-dot y y) (vector3-dot x x)) (* 2 sigma sigma)))))) 
```

像这样称呼它：

```
(define gauss-1 (gauss 1))
(gauss-1 some-x some-y) 
```

但是如果你肯定需要双重咖喱，这应该工作：

```
(define (gauss sigma)
  (lambda (x)
    (lambda (y)
      (exp (- (/ (+ (vector3-dot y y) (vector3-dot x x)) (* 2 sigma sigma))))))) 
```

像这样使用它：

```
(define gauss-1 (gauss 1))
((gauss-1 some-x) some-y) 
```

# ios - 如何在Objective C中正确访问另一个类的变量

> ID：14483206
> 
> 赞同：1
> 
> 时间：2013-01-23T15:29:17.520
> 
> 标签：ios, objective-c, xcode, class, object

我查看了各种论坛，试图找到解决此问题的方法。我目前有 2 个类，BluetoothViewController 和 AccountViewController。我想要做的是将用户从 AccountViewController 中选择的帐户传递给 BluetoothViewController，以便稍后在 BluetoothViewController 中使用该字符串。我所做的是在 BluetoothViewController.h 中创建 AccountViewController 的实例，并在 AccountViewController.h 文件中为字符串创建了一个属性。我试图访问的字符串是“account8”

我的 AccountViewController.h 文件：

```
@interface AccountViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
{

    NSArray     *tableData;
    int         cellValue;
    NSString    *cellContents;
    NSString    *account8;

}

@property (nonatomic, retain) NSArray   *tableData;
@property (nonatomic, retain) NSString  *cellContents;
@property (nonatomic, retain) NSString  *account8; 
```

我的 AccountViewController.m 文件：

```
#import "AccountViewController.h"

@interface AccountViewController ()

@end

// Implementing the methods of ViewController
@implementation AccountViewController

@synthesize tableData;
@synthesize cellContents;
@synthesize account8;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    account8 = [tableData objectAtIndex:indexPath.row];

    BluetoothViewController *bluetoothViewController = [[BluetoothViewController alloc] initWithNibName:@"BluetoothViewController" bundle:nil];
    [kAppDelegate setSelectedTabWithTag:-1];
    [self.navigationController pushViewController:bluetoothViewController animated:YES];

} 
```

我的蓝牙视图控制器.h

```
#import "AccountViewController.h"

@interface BluetoothViewController : UIViewController <GKPeerPickerControllerDelegate, GKSessionDelegate>{

    AccountViewController   *classobj;

}

@property(nonatomic, retain) AccountViewController *classObj; 
```

我的 BluetoothViewController.m 文件：

```
#import "AccountViewController.h"
#import "BluetoothViewController.h"

@interface BluetoothViewController ()

@end

// Implementing the methods of ViewController
@implementation BluetoothViewController

- (void)viewDidLoad {

    [connect setHidden:NO];
    [disconnect setHidden:YES];
    [super viewDidLoad];

    count = 0;

    classobj = [[AccountViewController alloc] init];

    accountSelected = classobj.account8;

    accountSelection.text = accountSelected;
} 
```

当用户从表中选择行时，内容将保存在变量 account8 中。然后将调用 BluetoothViewController。现在，当 BluetoothViewController 加载时，应该显示用户选择的帐户。但是标签返回空白。我想知道为什么它不能正确访问保存在 AccountViewController 中的变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:39:00.857

您可以做的是在 Bluetoothcontroller 中创建一个实例变量，然后在实例化该对象后从您的 AccountViewController 设置它。例如：

帐户视图控制器：

```
BluetoothViewController *bluetoothViewController = [[BluetoothViewController alloc] initWithNibName:@"BluetoothViewController" bundle:nil];
bluetoothViewController.accountVariable = _account8; 
```

蓝牙视图控制器：

```
@property (nonatomic, copy) NSString  *accountVariable; 
```

或者还有其他理由需要`classobj`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:54:16.907

请检查下面给出的代码：

AccountViewController.h 文件：

```
#import "AccountViewController.h"

@interface BluetoothViewController : UIViewController <GKPeerPickerControllerDelegate, GKSessionDelegate>{

    AccountViewController   *classobj;
}

@property(nonatomic, retain) AccountViewController *classObj; 
```

BluetoothViewController.h 文件：

```
#import "AccountViewController.h"

@interface BluetoothViewController : UIViewController <GKPeerPickerControllerDelegate, GKSessionDelegate>

@property(nonatomic, retain) AccountViewController *classObj; 
```

AccountViewController.m 文件：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {    
        account8 = [tableData objectAtIndex:indexPath.row];

        BluetoothViewController *bluetoothViewController = [[BluetoothViewController alloc] initWithNibName:@"BluetoothViewController" bundle:nil];

        [kAppDelegate setSelectedTabWithTag:-1];
[bluetoothViewController.view setAlpha:1.0f];

[bluetoothViewController setClassObj:self];

        [self.navigationController pushViewController:bluetoothViewController animated:YES];

    } 
```

BluetoothViewController.m 文件：

```
- (void)viewDidLoad {

    [connect setHidden:NO];
    [disconnect setHidden:YES];
    [super viewDidLoad];

    count = 0;

// Here classObj is already assigned to a reference so you can directly use that one
} 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T03:28:23.567

使用您的 XCode，您需要进行导入，通过将其声明为属性来创建对象，然后使用“object.variable”语法。文件“AccountViewController.m”如下所示：

```
#import AccountViewController.h
#import BluetoothViewController.h;

@interface AccountViewController ()
...
@property (nonatomic, strong) BluetoothViewController *bluetoothViewController;
...
@end

@implementation AccountViewController

//accessing the variable from balloon.h
...bluetoothViewController.variableFromBluetoothViewController...;

...
@end 
```

# c# - Master-Detail/Binding Source Issues

> ID：14483213
> 
> 赞同：1
> 
> 时间：2013-01-23T15:29:36.647
> 
> 标签：c#, winforms, data-binding, datagridview

Both my DataGridViews correctly display the parent and child records. I can also successfully add child records and save them back to my data source (an XML file). However, when I attempt to add a new parent and child, my program throws an exception saying there are no child records to add even though they are present in the detail DataGridView.

So, the issue is that my child records are not being bound to the class when they are new. What am I missing?

My classes are structured like this:

```
public class Roads
{
   public string RoadName { get; set; }
   public List<CrossStreet> CrossStreets { get; set; }        
}

public class CrossStreet
{
   public string CrossStreetName { get; set;}
} 
```

I have 2 DataGridViews and I am binding my classes to them like this:

```
BindingSource roadBindingSource = new BindingSource();
BindingSource crossStreetBindingSource = new BindingSource();

// _roads contains both the road and cross street data.
roadBindingSource.DataSource = _roads;

crossStreetBindingSource.DataSource = roadBindingSource;
crossStreetBindingSource.DataMember = "CrossStreets";

dataGridViewRoads.DataSource = roadsBindingSource;
dataGridViewCrossStreets.DataSource = crossStreetBindingSource; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:59:16.650

问题是我的班级实施。代替：

```
public class Roads
{
   public string RoadName { get; set; }
   public List<CrossStreet> CrossStreets { get; set; }        
}

public class CrossStreet
{
   public string CrossStreetName { get; set;}
} 
```

我用了：

```
public class Roads
{
   private List<CrossStreets> _crossStreets = new List<CrossStreets>();
   public string RoadName { get; set; }
   public List<CrossStreet> CrossStreets { get { return _crossStreets;} }        
}

public class CrossStreet
{
   public string CrossStreetName { get; set;}
} 
```

# google-bigquery - 处理 tar 文件

> ID：14483217
> 
> 赞同：0
> 
> 时间：2013-01-23T15:29:56.180
> 
> 标签：google-bigquery

我无法处理任何 tar 文件。

```
Errors:
Line:1 / Field:1, Bad character (ASCII 0) encountered: field starts with: <Master.c>
Line:2 / Field:1, Bad character (ASCII 0) encountered. Rest of file not processed.
Input contained no data 
```

作业 ID：cdrFinal20130123193311freeswitch8

如果我上传未压缩的文件，则没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:01:11.487

tar 不是一种压缩格式——它是一种存档格式。BigQuery 目前支持加载使用 gzip 算法压缩的文件。

更多信息：[https ://developers.google.com/bigquery/articles/ingestioncookbook#compressedversusuncompressed](https://developers.google.com/bigquery/articles/ingestioncookbook#compressedversusuncompressed)

# .net - WindowsStore 应用程序中的 JSON.net 可等待异步方法

> ID：14483218
> 
> 赞同：1
> 
> 时间：2013-01-23T15:29:57.543
> 
> 标签：.net, json.net, async-await

我喜欢在 Windows 8 应用程序中使用 json.net 序列化程序。

没有任何可等待的异步方法吗？

在普通的 .net 4.5 应用程序中，我有异步方法，但在 Windows 商店项目中没有。

漏洞 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:39:07.613

~~假设您使用的是来自 NuGet 的 JSON.NET，您可能会得到错误版本的包，因为 WinRT 的版本被指定为`winrt45`，而[它看起来应该是`netcore45`或`windows8`](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Common_Framework_and_Profile_Targeting_Examples)。~~根据下面的评论，上面很可能是错误的。

但即使你解决了这个问题，使用`SerializeObjectAsync()`and`DeserializeObjectAsync()`方法也没有意义。[他们所做的只是将同步版本包装在`Task.Factory.StartNew()`.](https://github.com/JamesNK/Newtonsoft.Json/blob/68eacc480b484e6a3f0c9ccf921a06e1a679ff21/Src/Newtonsoft.Json/JsonConvert.cs#L819)

因此，要获得完全相同的效果，您可以从内部调用同步版本`Task.Factory.StartNew()`。

有关为什么不应使用此模式的更多信息，请参阅 Stephen Toub 的文章[*我应该为同步方法公开异步包装器吗？*](https://devblogs.microsoft.com/pfxteam/should-i-expose-asynchronous-wrappers-for-synchronous-methods/)

# android - API Level error

> ID：14483220
> 
> 赞同：0
> 
> 时间：2013-01-23T15:30:01.000
> 
> 标签：android

In an Activity I have a code that shows this error, but only if you press save.

```
Call requires API level 11 (current min is 8): android.widget.SearchView#setSearchableInfo 
```

If I change the android:minSdkVersion to 7, it works, but when I save the code again, the same error is thrown. The minSdk must then be changed back to 8,... What is wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:41:26.497

`SearchView`从 API lvl 11 开始可用。

由于您的最小 sdk 为 8（低于 11），因此 Lint 在使用`SearchView`. 您可以通过在方法或类之前使用`@TargetApi`注释来消除该错误。但是您必须确保在使用之前使用条件语句`SearchView`来检查它是否可用，并为早期版本提供替代方案。

这是您的代码应如下所示：

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
void yourMethod(){
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        // use SearchView
    } else {
        // use some other backward compatible custom view
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:32:08.463

SearchView 存在于 Android 版本 11 ant more 中。因此，如果您想在代码中使用 SearchView，则必须将清单中的 minSdkVersion 设置为 11。如果您输入的数字小于 11，您将收到错误，这是正常的，因为您是允许某些不支持您的应用的 android 版本访问您的应用。

这可以在这里看到（感谢@JesseJ）：http: [//developer.android.com/reference/android/widget/SearchView.html](http://developer.android.com/reference/android/widget/SearchView.html)

```
Added in API level 11 
```

# spring-mvc - Spring MVC 中带有 Bean 集合的自定义绑定错误消息

> ID：14483223
> 
> 赞同：4
> 
> 时间：2013-01-23T15:30:09.027
> 
> 标签：spring-mvc

我们使用的是 Spring MVC 3.0.6，但我们没有使用 JSR 303 验证，只有在处理我们的模型表单 bean 的控制器方法中使用 BindingResult 的绑定错误。我将尝试简化下面的示例，因为问题不在于如何构建事物，因为这些决定是在我到达之前做出的。我只是想让事情在我拥有的参数范围内正常工作。

在我正在处理的这个特定表单中，我有一个表单 bean，它是一个子 bean 列表，视图允许用户添加/删除一堆这些子 bean。

表单 bean 看起来像：

```
public class FormBean {
    private List<SubBean> subBeans;
    ...
} 
```

和子豆：

```
public class SubBean {
    private Integer value1;
    private Date value2;
    private String value3;
} 
```

在视图 JSP 中，我们正在执行以下操作：

```
<form:form modelAttribute="formBean">
    <spring:hasBindErrors name="formBean">
        <div class="error-box">
            <div class="error-txt">
                <form:errors path="*" cssClass="error" />
            </div>
        </div>
    </spring:hasBindErrors>

    <c:forEach items="${formBean.subBeans}" var="subBean" varStatus="subBeanStatus">
        ...
        <form:input path="subBeans[${subBeanStatus.index}].value1" />
        <form:input path="subBeans[${subBeanStatus.index}].value2" />        
        <form:input path="subBeans[${subBeanStatus.index}].value3" />
        ...
    </c:forEach>
    ...
</form:form> 
```

当我使用未通过 Binding-mustard 的值提交表单时，问题就出现了。例如，如果我为 value1 添加一个无效的 int 值，我会收到如下错误消息：

```
Failed to convert property value of type java.lang.String to required type java.lang.Integer for property subBeans[0].value1; nested exception is java.lang.NumberFormatException: For input string: "sdfs" 
```

我知道使用非嵌套 bean，您可以简单地以以下形式向资源绑定器添加一条消息：

```
typeMismatch.beanName.fieldName="This is my custom error message!!!" 
```

但是当你有一个列表时，你如何控制错误消息，就像我一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T10:37:24.933

我也不喜欢默认消息，并自定义了我自己的 BindingErrorProcessor。

基本上，我想要的通常只是“最后一个字段”的名称——我想说的是 Date 的值无效，或者 Staff 的值无效，等等。我还包括了被拒绝的字段文本，标准 Spring 错误处理器不提供给消息。

```
public class SimpleMessage_BindingErrorProcessor 
        extends DefaultBindingErrorProcessor 
        {

    @Override
    public void processPropertyAccessException(PropertyAccessException ex, BindingResult bindingResult) {
        // Create field error with the exceptions's code, e.g. "typeMismatch".
        String field = ex.getPropertyName();
        String[] codes = bindingResult.resolveMessageCodes(ex.getErrorCode(), field);

        Object rejectedValue = ex.getValue();
        if (rejectedValue != null && rejectedValue.getClass().isArray()) {
            rejectedValue = StringUtils.arrayToCommaDelimitedString(ObjectUtils.toObjectArray(rejectedValue));
        }
        Object[] arguments = getArgumentsForBindError( bindingResult.getObjectName(), field, rejectedValue);

        FieldError fieldError = new FieldError(
                bindingResult.getObjectName(), field, rejectedValue, true,
                codes, arguments, ex.getLocalizedMessage());
        bindingResult.addError( fieldError);
    }

    /**
     * Return FieldError arguments for a binding error on the given field.
     * <p>TW's implementation returns {0} simple field title, {1} rejected value, {2} FQ field resolvable as per Spring DefaultBindingErrorProcessor
     * (of type DefaultMessageSourceResolvable, with "objectName.field" and "field" as codes).
     * @param objectName the name of the target object
     * @param propPath the field that caused the binding error
     * @param rejectedValue the value that was rejected
     * @return the Object array that represents the FieldError arguments
     * @see org.springframework.validation.FieldError#getArguments
     * @see org.springframework.context.support.DefaultMessageSourceResolvable
     */
    protected Object[] getArgumentsForBindError (String objectName, String propPath, Object/*String*/ rejectedValue) {

        // just the Simple Name of Field;
        //      (last field in path).
        //
        String lastField = getLastField_Title( propPath);

        // create Resolvable for "Fully-Qualified" Field;
        //      -- Spring standard,  too specific/ would require defining hundreds of distinct messages;    we don't use these.
        //
        String[] codes = new String[] {objectName + Errors.NESTED_PATH_SEPARATOR + propPath, propPath};
        DefaultMessageSourceResolvable fqField_resolvable = new DefaultMessageSourceResolvable(codes, propPath);

        // return Args;     {0} simple name, {1} rejected text, {2} FQ complex name.
        return new Object[]{ 
                lastField, rejectedValue, fqField_resolvable
        };
    }

    /**
     * Return FieldError arguments for a binding error on the given field.
     * <p>TW's implementation returns {0} simple field title, {1} FQ field resolvable as per Spring DefaultBindingErrorProcessor
     * (of type DefaultMessageSourceResolvable, with "objectName.field" and "field" as codes).
     * @param objectName the name of the target object
     * @param propPath the field that caused the binding error
     * @return the Object array that represents the FieldError arguments
     * @see org.springframework.validation.FieldError#getArguments
     * @see org.springframework.context.support.DefaultMessageSourceResolvable
     */
    @Override
    protected Object[] getArgumentsForBindError (String objectName, String propPath) {

        // just the Simple Name of Field;
        //      (last field in path).
        //
        String lastField = getLastField_Title( propPath);

        // create Resolvable for "Fully-Qualified" Field;
        //      -- Spring standard,  too specific/ would require defining hundreds of distinct messages;    we don't use these.
        //
        String[] codes = new String[] {objectName + Errors.NESTED_PATH_SEPARATOR + propPath, propPath};
        DefaultMessageSourceResolvable fqField_resolvable = new DefaultMessageSourceResolvable(codes, propPath);

        // return Args;     {0} simple name, {2} FQ complex name.
        return new Object[]{ 
                lastField, fqField_resolvable
        };
    }

    protected String getLastField_Title (String propPath) {
        int index = propPath.lastIndexOf('.');
        String title = (index >= 0) ? propPath.substring(index+1) : propPath;
        return StrUtil.capitalize( title);
    }

} 
```

这很好用！现在你所有的 messages.properties 必须说的是：

```
# Type Mismatch generally;
#   INCOMING 21/8/13 -- use {0} as 'Simple Name' of field,  when using SimpleMessage_BindingErrorProcessor;   {1} is 'resolvable' FQN of field.
#   
typeMismatch=Invalid value for {0}: "{1}"

# Method Invocation/ value conversion; 
#   INCOMING 21/8/13 -- only expected for certain 'Value Converting'/ self-parsing properties;  SPEC.
#   
methodInvocation.machine=Invalid value for {0}: "{1}" 
```

这个区域不是很清楚..整个绑定 -> 错误处理 -> 消息解析系统相当复杂，并且（据我所见）卡住了消息代码通常*过于具体*的问题。

这方面的内容很少（我在 Google 上没有找到任何直接相关的内容），所以我希望这对人们有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T22:11:42.023

如果要获取资源包提供的消息，首先需要注册一个 messageSource 实例：

```
<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames" value="ValidationMessages"/>
</bean> 
```

然后，

```
@Autowired
private MessageSource messageSource; 
```

并从资源包中获取您的消息，

```
for (Object object : bindingResult.getAllErrors()) {
    if(object instanceof FieldError) {
        FieldError fieldError = (FieldError) object;

    // Use null for second parameter if you do not use i18n
    String message = messageSource.getMessage(fieldError, null);
    }
} 
```

您的验证器应如下所示：

```
errors.rejectValue("<FIELD_NAME>", "typeMismatch.beanName.fieldName", new Object [] {"123"}, null); 
```

这将使您对如何实现目标有所了解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T17:54:05.943

我解决这个问题的方法是添加一条像'typeMismatch.fieldName'这样的消息，基本上只指定结束字段名称而不是bean/列表名称。优点是它可以工作，缺点是它为具有相同名称的任何 bean 上的所有字段设置消息。因为我们正在开发门户，并且在同一个 WAR 中部署了数百个微小的应用程序，所以这可能是一个问题。目前，它有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-30T10:08:52.967

您应该检查该[`DefaultMessageCodesResolver`](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/DefaultMessageCodesResolver.html)课程的文档。`List`在那里，您可以找到在使用或类型的字段时可能使用的错误代码`Map`。

# javascript - Editing the LMC button which copy to clipboard

> ID：14483224
> 
> 赞同：2
> 
> 时间：2013-01-23T15:30:11.120
> 
> 标签：javascript

I have some problems with [LMC Button](http://www.lettersmarket.com/view_blog/a-3-copy_to_clipboard_lmcbutton.html) because of the way it is coded.

```
ShowLMCButton('Copied Text Here'); 
```

An image "Copy" is loaded when the page loads, with the words "Copied Text Here" being copied to clipboard when the image is clicked on.

If I do this:

```
var text = "New Text";
ShowLMCButton(text); 
```

The words "New Text" is copied to the clip no problem, but the variable text have to be there on page load. There is no way I can change the words.

This is the ShowLMCButton function

```
function ShowLMCButton(cliptext, capt, js, furl)
{
 var params = 'txt=' + encodeURIComponent(cliptext); 
 if (!isNotEmpty(furl)) { furl = "clippy/lmcbutton.swf"; }
 if (isNotEmpty(capt)) { params += '&capt=' + capt; }
 if (isNotEmpty(js)) { params += '&js=' + js; }

document.write('<object width="40" height="20">');
document.write(' <param name="movie" value="' + furl + '">');
document.write(' <PARAM NAME=FlashVars VALUE="' + params + '">');
document.write(' <embed src="' + furl + '" flashvars="' + params + '"  width="40" height="20"></embed>');
document.write('</object>');

//alert('file: ' + furl + ' Params: ' + params); // debug
} 
```

How can I copy text that I type in a textarea/input textfield?

[Here is the demo of the button](http://www.lettersmarket.com/uploads/lettersmarket/lmcbutton/demo_lmcbutton.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T21:37:19.847

我刚才能够完成这项工作。

您只需要编辑 ShowLMCButton 函数，替换 'document.write'

```
var flash_movie = '<object id="copy-btn" width="80" height="20">';
flash_movie += ' <param name="movie" value="' + furl + '">';
flash_movie +=' <PARAM NAME=FlashVars VALUE="' + params + '">';
flash_movie +=' <PARAM NAME=wmode VALUE="transparent"><param name="scale" value="exactfit" />';
flash_movie +=' <embed id="flash-copy-btn" src="' + furl + '" flashvars="' + params + '" scale="exactfit" WMODE="transparent" width="90" height="20"></embed>';
flash_movie +='</object>';

return flash_movie; 
```

有了这个，您现在可以在要复制的文本更改后调用 ShowLMCButton。

您可能需要一个附加功能，例如

```
function update_me(custom_text){
    document.getElementById('binfocopytext').innerHTML=custom_text;
        document.getElementById('copy-binfo2').innerHTML=ShowLMCButton(document.getElementById('binfocopytext').innerHTML,'','','lmcbutton_copytoclipboard/lmcbutton.swf');             
} 
```

并在例如 onclick 上调用它：

```
<b onclick="update_me('updated text');">whatever</b> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-01T05:44:35.907

您可以通过以下方式获取文本字段/文本字段

```
ShowLMCButton(document.getElementById('id of the element').value,'copy','',path to lmcbutton.swf); 
```

# python - 在哪里做 _set 来自我的 Django 模型？

> ID：14483227
> 
> 赞同：3
> 
> 时间：2013-01-23T15:30:24.820
> 
> 标签：python, django

我正在阅读 Django 教程：[https ://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

我正在查看将 python shell 与 manage.py 一起使用的示例。代码片段是从网站复制的：

```
 # Give the Poll a couple of Choices. The create call constructs a new
# Choice object, does the INSERT statement, adds the choice to the set
# of available choices and returns the new Choice object. Django creates
# a set to hold the "other side" of a ForeignKey relation
# (e.g. a poll's choices) which can be accessed via the API.
>>> p = Poll.objects.get(pk=1)

# Display any choices from the related object set -- none so far.
>>> p.choice_set.all()
[] 
```

此示例使用带有问题和答案选择的 Poll 模型，定义如下：

```
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField() 
```

现在我不明白对象choice_set 来自哪里。对于一个问题，我们有一组“选择”。但是这是在哪里明确定义的？我只是似乎定义了两个类。models.foreignKey(Poll) 方法是否连接两个类（因此是表）？现在在choice_set 中后缀“_set”是从哪里来的。是因为我们在 Poll 和 Choice 表之间隐式定义了一对多的关系，因此我们有一组选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:35:32.673

`choice_set`由 Django ORM 自动放在那里，因为你有一个外键 from `Choice`to `Poll`。这使得查找`Choice`特定`Poll`对象的所有 s 变得容易。

因此，它没有在任何地方明确定义。

您可以将带有`related_name`参数的字段名称设置为`ForeignKey`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:39:46.140

关系`_set`命令——在本例中`choice_set`——是关系的 API 访问器（即 ForeignKey、OneToOneField 或 ManyToManyField）。

[您可以在此处](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)阅读有关 Django 关系、关系 API 的更多信息`_set`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:36:15.917

> 但是这是在哪里明确定义的？

不是；这是 Django 的魔法。

> 我只是似乎定义了两个类。models.foreignKey(Poll) 方法是否连接两个类（因此是表）？

正确的。

> 现在在choice_set 中后缀“_set”是从哪里来的。是因为我们在 Poll 和 Choice 表之间隐式定义了一对多的关系，因此我们有一组选择吗？

是的。这只是一个默认值；您可以通过[正常机制](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)显式设置名称。

# java - 使用循环 Java 制作多个 HashSet

> ID：14483236
> 
> 赞同：1
> 
> 时间：2013-01-23T15:31:05.550
> 
> 标签：java, for-loop, hashset

我正在尝试编写将使用 for 循环创建多个 HashSet 的代码。我正在尝试根据其长度存储唯一单词的出现。例如，长度为 4 的单词将进入 HashSet A，而长度为 20 的单词将进入 HashSet B。与其手动创建 16 个 HashSet，我有没有办法使用 for 循环`(int i=4; i<21; i++)`？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T15:33:40.200

`HashSet`您可以拥有一个`Map<Integer, Set<String>>`.

因此，在添加时，您可以测试 a`key`是否已经存在。如果有键，只需将单词添加到`Set`该键的 ，否则添加一个新条目。

因此，这是您需要遵循的步骤：-

*   获取单词的长度。说`length`。
*   测试是否`Map`包含键`length`-[`Map#containsKey(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#containsKey%28java.lang.Object%29)

*   如果`length`key 在那里，获取`Set`那个 key - [`Map#get(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#get%28java.lang.Object%29)。并将其添加`word`到`Set`.

*   如果`length`key 不存在，则创建一个新`HashSet`的，在其中添加当前单词。`Map`并在您的当前长度作为键添加一个新条目-[`Map#put(K, V)`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#put%28K,%20V%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:34:27.497

您可以将它们放在一个循环中并将它们放入列表或数组中......

```
List<HashSet<String>> sets = new ArrayList<HashSet<String>>()

for (int x=0;x<16;x++) {
  sets.add(new HashSet<String>());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:36:29.847

```
HashSet<String>[] sets= HashSet<String>[21];
for(int i=4; i<21; i++)
  sets[i]= new HashSet<String>(); 
```

稍后当您要添加单词时：

```
for(String word: words){
  sets[word.length()].add(word);
} 
```

Ps 我不使用数组索引 0..3 但这样代码看起来更好，而且实际上只浪费很少的内存。

# php - 如何替换html标签外的文本？

> ID：14483237
> 
> 赞同：0
> 
> 时间：2013-01-23T15:31:09.277
> 
> 标签：php

这是我的例子：

```
$content = "
<span class="1">One of </span>the major focuses for <span class = "2">vB 4.1.10 is</span> improving support..."; 
```

如何在标签之外添加所有文本，如下所示：

```
"<span class="1">One of </span> <span class="3">the major focuses for</span> <span class = "2">vB 4.1.10 is</span> <span class="4">improving support...</span>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:11:14.907

```
<?php

$content = "abc<span class=\"1\">One of </span>the major focuses for <span class = \"2\">vB 4.1.10 is</span> improving support...";
$result = preg_replace("#>([^<>]+)<([^/]{1,1})#", '><span class="3">$1</span><$2', $content);
$result = preg_replace("#>([^<>]+)$#", '><span class="3">$1</span>', $result);
$result = preg_replace("#^([^<>]+)<([^/]{1,1})#", '<span class="3">$1</span><$2', $result);

var_dump($content);
var_dump($result);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:44:42.907

您可以轻松地对此进行改进，但这是基本的：

```
$content = "<span class=\"1\">One of </span>the major focuses for <span class = \"2\">vB 4.1.10 is</span> improving support...";
$parts = preg_split("!(<span[^>]*>[^>]*<\/span>)!", $content, -1, PREG_SPLIT_DELIM_CAPTURE);
foreach ($parts as $key => $val) {
    if (!empty($val)) {
        echo (substr($val, 0, 1) != '<') ? '<span>'.$val.'</span>' : $val;
    }
} 
```

# javascript - 如何动态添加文本框而不丢失先前文本框的值？

> ID：14483239
> 
> 赞同：2
> 
> 时间：2013-01-23T15:31:16.983
> 
> 标签：javascript, html, textbox

我正在使用 innerHTML 动态添加文本框。代码示例如下：

```
<html>
<head>
  <script type="text/javascript" >
  var i=0;
  function add()
  {
    var tag = "<input type='text' name='" + i + "' /> <br/>";
    document.getElementById("y").innerHTML += tag;
    i++;
  }
  </script>
</head>

<body>
  <input type="button" id="x" value="Add" onclick="add();" />
  <div id="y"></div>
</body>

</html 
```

添加新文本框时，是否有任何方法可以动态添加文本框而不会丢失先前文本框的值？
已经发布了类似的问题，但没有答案:(

如果我想在这种情况下添加文本框怎么办：

```
function add() {
   var element='<li class="ie7fix" style="width:620px;"><div class="m_elementwrapper" style="float:left;"><label class="fieldlabel" style="width:106px;float:left;padding-top:3px;" for="p1f4"><span><span class="pspan arial" style="text-align:right;font-size:14px;"><span class="ispan" xml:space="preserve"></span></span></span></label><div style="float:left;width:475px;" class="m_elementwrapper"><input type="text" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;width:244px;max-width:244px;" name="' + i + '"  class="fieldcontent"><div class="fielderror"></div></div></div><div style="clear:both;font-size:0;"></div></li>';
   document.getElementById("addskills").innerHTML += element;
   i++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:38:21.420

是的，通过 DOM 操作：

```
function add() {
    var tag = document.createElement('input'); // Create a `input` element,
    tag.setAttribute('type', 'text');          // Set it's `type` attribute,
    tag.setAttribute('name', i);               // Set it's `name` attribute,

    var br = document.createElement('br');     // Create a `br` element,

    var y = document.getElementById("y");      // "Get" the `y` element,
    y.appendChild(tag);                        // Append the input to `y`,
    y.appendChild(br);                         // Append the br to `y`.
    i++;
} 
```

这不会像 a`innerHTML`那样触发浏览器的 DOM 解析器，从而保持一切完好无损。

（`innerHTML`强制浏览器重新解析整个 DOM，因为可以添加任何内容`innerHTML`，因此浏览器无法预测任何内容，这与向元素添加节点相反。）

现在，添加这个：

```
<li class="ie7fix" style="width:620px;">
    <div class="m_elementwrapper" style="float:left;">
        <label class="fieldlabel" style="width:106px;float:left;padding-top:3px;" for="p1f4">
            <span>
                <span class="pspan arial" style="text-align:right;font-size:14px;">
                    <span class="ispan" xml:space="preserve">
                    </span>
                </span>
            </span>
        </label>
        <div style="float:left;width:475px;" class="m_elementwrapper">
            <input type="text" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;width:244px;max-width:244px;" name="' + i + '"  class="fieldcontent">
            <div class="fielderror">
            </div>
        </div>
    </div>
    <div style="clear:both;font-size:0;">
    </div>
</li> 
```

你需要：

```
function add() {
    // Create elements
    var d1 = c('div'),  s1 = c('span'), ip = c('input'),
        d2 = c('div'),  s2 = c('span'), li = c('li'),
        d3 = c('div'),  s3 = c('span'), la = c('label'),
        d4 = c('div');
    // You can "chain" `appendChild`.
    // `li.appendChild(d1).appendChild(la);` is the same as `li.appendChild(d1); d1.appendChild(la);`
    li.appendChild(d1).appendChild(la).appendChild(s1).appendChild(s2).appendChild(s3);
    d1.appendChild(d2).appendChild(ip);
    d2.appendChild(d3);
    li.appendChild(d4);

    setAttributes(
        [li, d1, la, s2, s3, d2, ip, d3, d4],
        [
            {'class':"ie7fix",              'style':"width:620px;"  },
            {'class':"m_elementwrapper",    'style':"float:left;"   },
            {'class':"fieldlabel",          'style':"width:106px;float:left;padding-top:3px;", 'for':"p1f4" },
            {'class':"pspan arial",         'style':"text-align:right;font-size:14px;"  },
            {'class':"ispan",               'xml:space':"preserve"  },
            {'class':"m_elementwrapper",    'style':"float:left;width:475px;"   },
            {'class':"fieldcontent",        'type':"text",      'style':"font-family:Arial, Helvetica, sans-serif;font-size:14px;width:244px;max-width:244px;", 'name':''+i},
            {'class':"fielderror"   },
            {'style':"clear:both;font-size:0;"  }
        ]
    );
    var br = document.createElement('br');     // Create a `br` element,
    var y = document.getElementById("y");      // "Get" the `y` element,
    y.appendChild(li);                         // Append the input to `y`,
    y.appendChild(br);                         // Append the br to `y`.
    i++;
}

// Apply a array of attributes objects {key:value,key:value} to a array of DOM elements.
function setAttributes(elements, attributes){
    var el = elements.length,
        al = attributes.length;
    if(el === al){
        for(var n = 0; n < el; n++){
            var e = elements[n],
                a = attributes[n];
            for(var key in a){
                e.setAttribute(key, a[key]);
            }
        }
    }else{
        console.error("Elements length " + el + " does not match Attributes length " + al);
    }
}

// Alias for shorter code.
function c(type){
    return document.createElement(type);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:28:12.743

我之前通过在替换innerHTML之前将所有值读入一个数组然后再将它们写回来解决这个问题。这样你就可以在 div 中写入任何你喜欢的东西。以下适用于我尝试过的所有浏览器：

```
<html>
<head>
<script type="text/javascript" >
var i=0;
function add() {
if(i>0) {
    values=new Array();
    for(z=0;z<i;z++) {
        values.push(document.getElementById(z).value);
        }
    }
var tag = '<input type="text" name="' + i + '" id="' + i + '" /> <br/>';
document.getElementById("y").innerHTML += tag;
if(i>0) {
    for(z=0;z<i;z++) {
        document.getElementById(z).value=values[z];
    }
}
i++;
}
</script>
</head>

<body>
<input type="button" id="x" value="Add" onclick="add();" />
<div id="y"></div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:46:54.803

使用 jquery 库

```
<html>
<head>
  <script src='jquery.js' type="text/javascript"></script>
  <script type="text/javascript" >
      var i=0;
      function add()
      {
        var tag = "<input type='text' name='" + i + "' /> <br/>";
        var div_content=$('#y').append(tag);
        i++;
      }
    </script>
</head>
<body>
   <input type="button" id="x" value="Add" onclick="add();" />
   <div id="y"></div>
</body>
</html> 
```

# java - ArrayList toArray() 方法的转换问题

> ID：14483243
> 
> 赞同：1
> 
> 时间：2013-01-23T15:31:33.257
> 
> 标签：java, arrays

在一个类中，我有如下构造函数：

```
Class(int x, int y, int[] moves); 
```

在创建这些对象的其他类中，我将移动存储在 ArrayList 中。动作是数字。因此，当此类决定创建新对象时，它必须首先将此 ArrayList 转换为数组。所以我尝试了这样的事情：

```
new Object(0, 0, (int[])moves.toArray(int[moves.size()]); 
```

但它不起作用。应该如何正确完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:33:58.947

调用`toArray()`an`ArrayList`的结果*永远*不是`int[]`. `ArrayList<int>`由于泛型的工作方式，您不能在 Java 中使用。充其量它会是一个`Integer[]`，然后你需要转换它。请注意，即使您可以从`Integer`to转换`int`，*也不能将*an`Integer[]`转换为`int[]`. 有些东西必须循环这些值。

你可以直接这样做：

```
int[] values = new int[moves.size()];
for (int i = 0; i < values.length; i++) {
    values[i] = moves.get(i);
} 
```

或者*可以*创建一个`Integer[]`然后从中转换 - 但为什么要复制两次？

# php - symfony2 教程 - 生成包

> ID：14483245
> 
> 赞同：3
> 
> 时间：2013-01-23T15:31:41.167
> 
> 标签：php, symfony, bundle, symfony-2.1

我是 symfony2 的新手，但不是 symfony 的新手。我目前正在做[symblog 教程](http://tutorial.symblog.co.uk/docs/configuration-and-templating.html#bundles-symfony2-building-blocks)。到目前为止一切正常，但是我在生成包上有点卡住了？

本教程说运行以下命令

```
php app/console generate:bundle --namespace=Blogger/BlogBundle --format=yml 
```

完成后，它应该将引用/生成代码添加到包中的

*   应用程序/AppKernel.php
*   应用程序/配置/路由.yml

但是它没有添加任何东西？...我有点困惑？控制台输出以下内容，但文件中尚未生成对包的代码引用

```
Welcome to the Symfony2 bundle generator  

Your application code must be written in bundles. This command helps
you generate them easily.

Each bundle is hosted under a namespace (like Acme/Bundle/BlogBundle).
The namespace should begin with a "vendor" name like your company name, your
project name, or your client name, followed by one or more optional category
sub-namespaces, and it should end with the bundle name itself
(which must have Bundle as a suffix).

See http://symfony.com/doc/current/cookbook/bundles/best_practices.html#index-1 for more
details on bundle naming conventions.

Use / instead of \  for the namespace delimiter to avoid any problem.

Bundle namespace [Blogger/BlogBundle]: 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T02:16:03.557

您可以在没有交互的情况下使用它。那么它不会问你任何事情

```
php app/console generate:bundle --namespace=Blogger/BlogBundle --format=yml --no-interaction 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T20:40:31.607

从`generate:bundle --help`

如果要禁用任何用户交互，请使用 --no-interaction 但不要忘记传递所有需要的选项：

```
php app/console generate:bundle --namespace=Acme/BlogBundle --dir=src [--bundle-name=...] --no-interaction 
```

我有这些长命令的 bash 函数。

```
genbundle () {
    php app/console generate:bundle --namespace=$1/$2Bundle --bundle-name=$2Bundle --dir=src/ --format=yml
} 
```

您可以像这样使用它：“genbundle Acme Blog”，它将在 Acme 应用程序中创建一个 BlogBu​​ndle。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:50:48.210

如果我正确理解了正在发生的事情，那么您必须继续进行该过程。这是您回答问题的一步一步。继续回答所有问题，然后控制台会告诉它何时创建了捆绑包。

注意：[...] 中的值是默认值，如果您只是在控制台询问您某事时按 Enter 键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-01T09:21:33.383

旧命令：

```
php app/console generate:bundle --namespace=Blogger/BlogBundle --format=yml --no-interaction 
```

在新的 symfony 3.1.4 版本中，**“app/console”**不再工作。而是在上面的命令中添加**“bin/console”**

所以新命令将是

```
php bin/console generate:bundle --namespace=Blogger/BlogBundle --format=yml --no-interaction 
```

# javascript - 避免 iframe 中出现重复的 Javascript

> ID：14483246
> 
> 赞同：1
> 
> 时间：2013-01-23T15:31:44.227
> 
> 标签：javascript, jquery, iframe, jquery-ui-dialog, legacy

这是一个线框图，用于说明显示一些性能问题的遗留项目的结构：

![在此处输入图像描述](../Images/11f368046d54ffc19678c845347ec655.png)

对于所有对话框（来自 jQuery UI）打开一个新的 iframe 并重新下载来自 Home 的所有 js 并重新实例化所有对象。我可以从 jQuery 从 Home 创建一个对所有新 iframe 的引用并在每个 iframe**隔离**范围内工作吗？

例如：

**[首页范围]**

```
$("#some-el").data('foo', 'bar');
console.log($("#some-el").data('foo')); // results bar 
```

**[App1 范围]**

```
//after defined in Home first run
console.log($("#some-el").data('foo')); // results undefined 
```

**PS：**记住这是一个遗留架构，所有解决方案都必须考虑这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:43:10.907

实际上，如果所有这些都托管在同一个地方，浏览器将不会多次下载文件。相反，它将缓存第一个结果，然后在第二个结果中从缓存中提取。iframe 被视为单独的上下文，因此您无需担心变量或表单冲突。

假设两次下载相同的文件是您的主要关注点，那么您应该没问题。

另一种设计是使用 AJAX 而不是 iframed 内容 - 但在您使用遗留应用程序的地方，我意识到如果没有真正的 JSON / REST 调用可用，这将是多么困难。我所做的一件事是将 iframe 中的视图更改为“部分”，只返回必要的 HTML 内容而不返回 HTML 头部等，并使用 $.load() 加载它们。这变得很复杂，因为您需要在加载后执行绑定并仔细跟踪表单 ID 等，但可以做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:44:08.663

我以前遇到过这种情况。一种方法是定义一些加载到 iframe 中的 javascript，这些 javascript 只是将任何函数调用重新路由到`top.functionCall()`而不是包含它们的实际定义。如果您的所有函数都在一个命名空间下，这将变得非常简单，如下所示：

父窗口js：

```
var namespace = (function () { 
    // all of your functions are in here as properties of namespace
})(); 
```

iframe 窗口 js：

```
var namespace = top.namespace; 
```

一个问题是任何*上下文相关*的函数（依赖或操作`window`对象的函数）很可能会中断。

# wpf - 在控件 WPF 之间进行通信的最佳方式

> ID：14483248
> 
> 赞同：0
> 
> 时间：2013-01-23T15:31:55.347
> 
> 标签：wpf, wpf-controls

我有几个`UserControls`是从 parent 调用的`Application`。在我的主应用程序中，我必须`ContentControl`填写我的应用程序的几个区域：

![在此处输入图像描述](../Images/eb54bb93872c27351ed13dcac3c82243.png)

**黑色区域：**主窗口

**红色区域：**左右`ContentControl`

**蓝色区域：**主要`ContentControl`

代码会像这样查找每个：

```
<!-- Main container ContentControl -->
    <ContentControl Name="ContentMain" Style="{StaticResource animatedContent}" Grid.Column="3" Grid.Row="2" Grid.RowSpan="8"  Width="Auto" Opacity="1" Background="Transparent" >
    </ContentControl>       
    <!-- Left container ContentControl -->
    <ContentControl Name="ContentLeftMenu" Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="2" Grid.RowSpan="8"  Width="Auto" Opacity="1" Background="Transparent" >
    </ContentControl>
    ..... 
```

每次我想更改主要内容时，我都会在我的`App`一些`UserControls`. 其中一个（不复制所有）看起来像这样：

```
<UserControl x:Class="F7Demo.Interfaces.F7AddUser"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" >
<UserControl.Resources>
    <ResourceDictionary Source="../Styles/F7Style.xaml" />
</UserControl.Resources>
<Grid Margin="5,5,5,10" >
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="25" />
        <ColumnDefinition Width="728*" />
        <ColumnDefinition Width="25" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="25" />
        <RowDefinition Height="35" />
        <RowDefinition Height="526*" />
    </Grid.RowDefinitions>
    <Border 
    Opacity="0.7"
    Background="{StaticResource DarkGradient}"
    CornerRadius="15" Grid.RowSpan="3" Grid.ColumnSpan="3">
        <Border.Effect>
            <DropShadowEffect 
        BlurRadius="5"
        Color="#877b77"
        Opacity="100"
        ShadowDepth="5"
        Direction="-50" />
        </Border.Effect>
    </Border>
    <Label Grid.Row="1" Grid.Column="1" Height="28" Name="labelWelcomeMessage" VerticalAlignment="Top" Grid.ColumnSpan="3" FontStretch="Expanded" />
    <TextBlock Name="textBlockMainContent" Grid.Row="2" Grid.Column="1" TextWrapping="Wrap"></TextBlock>
</Grid> 
```

但每个人都`UserControl`需要与其他人交流。我已经搜索过，我发现一个解决方案是使用`Event Aggregator`，但我没有找到任何有趣的手册/指南，我不确定如何使用它发送信息。

为什么我需要在用户控件之间进行通信？蓝色的（例如）有一个 DataGrid。左边有一个更新按钮，所以当我按下时`update`，我希望数据网格将更改保存在蓝色区域。右侧区域接收一些用户信息，并打印出来。

有谁能够帮助我？

**或者任何简单的例子都会非常感谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:56:17.223

我可以使用这篇文章中所说的来解决它：

[事件聚合器](http://blog.weareon.net/how-to-communicate-between-two-user-controls-using-event-aggregator/)

我知道如果我们使用 WPF，这不是最佳实践，但对于想要或应该使用 MVC 的每个人来说，它都有效；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:16:32.777

EventAggregator是 Microsoft Prism 的 WPF 消息传递系统版本[。](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)还有其他以相同方式工作的消息传递系统，例如[MVVM Light 的 Messenger](http://www.galasoft.ch/mvvm/)，或者您可以自己制作。

但它们都以类似的方式工作。您的应用程序的任何部分都可以广播消息，并且您的应用程序的任何部分都可以订阅并接收消息。

这是 Microsoft Prism 的基本语法`EventAggregator`：

```
// Subscribe
eventAggregator.GetEvent<UpdateDataGridMessage>().Subscribe(UpdateDataGrid);

void UpdateDataGrid()
{
    // Update DataGrid here
}

// Broadcast
eventAggregator.GetEvent<UpdateDataGridMessage>().Publish(); 
```

因此，包含 的表单后面的代码`DataGrid`可以订阅接收任何类型的消息`UpdateDataGridMessage`，并`DataGrid`在收到此类消息时更新 。然后您的应用程序的任何部分都可以广播`UpdateDataGridMessage`触发 DataGrid 更新，例如您的“红色”边后面的代码。

`EventAggregator`就我个人而言，起初我发现了令人困惑的基本语法，并且使用起来很烦人，因为我需要对`EventAggregator`无处不在的引用，所以我通常使用静态类来简化它。如果您有兴趣做类似的事情，我[的博客上发布了我的静态类的代码](http://rachel53461.wordpress.com/2011/10/09/simplifying-prisms-eventaggregator/)。

（此外，由于您在评论中提到学习 MVVM，[我的博客上有一个简单的 MVVM 示例](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/)，您可能也会感兴趣。它是专门为像我这样难以理解一些技术性更强的 MVVM 文章的人编写的那里。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T17:23:57.370

让控件的绑定在需要时使用 MVVM（模型->视图模型->视图）架构以及 xaml 中的行为和触发器进行对话。

获取将驻留在您的视图（页面或窗口）上的多个控件。您的视图实例化了一个 ViewModel，它将包含获取和处理数据所需的所有业务逻辑（如果需要，可以在视图之间共享），方法是公开对象（读取类）以供模型中定义的消费使用。列表或原始数据中的任何公开数据都将通过 INotifyPropertyChanges （异步）提供，如果需要，列表可以是原始数据或 ObservableCollections 中的数据。

您的视图会将其数据上下文绑定到该视图模型。xaml 将绑定到可观察的集合和公开的属性。在模型视图的构建过程中，任务异步加载数据，让控件自己加载和处理。

由于 ViewModel 上表示的状态，在 xaml 中启用和禁用控件和按钮。例如，当 ModelView 上的布尔值变为真时，按钮会自行开启 (IsEnabled)。

通过在异步模式下使用 MVVM 以及视觉触发器和其他项目的灵活性，您的 GUI 进程可以处理这些情况，真正在 ViewModel 上没有问题。

# iphone - 在表格视图部分标题中垂直居中 UILabel 文本

> ID：14483250
> 
> 赞同：1
> 
> 时间：2013-01-23T15:31:57.953
> 
> 标签：iphone, ios, uitableview

如何更改表格视图部分中文本的位置？我使用 viewForHeaderInSection:Section 并在那里创建这样的东西：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 300, 30)];
    label.backgroundColor = [UIColor blackColor];
    label.textColor = [UIColor whiteColor];
    label.font = [UIFont fontWithName:@"Gotham-Bold" size:17.0f];

    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.comlpetedFetchedResultsController sections] objectAtIndex:section];
    label.text = [@" " stringByAppendingString:[sectionInfo name]];
    return label;
} 
```

UILabel 框架中的参数大小无关紧要，我总是得到相同的结果：

![在此处输入图像描述](../Images/49a9e2fcf7416bc0aeea486df47c83cd.png)

如何在 UILabel 中垂直居中文本？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:44:17.730

尝试

```
[yourLabel setNumberOfLines:0];
[yourLabel sizeToFit];
[yourLabel setContentMode:UIViewContentModeCenter]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:56:07.097

将标签放在 UIView 中，然后返回视图：

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 30)];
[view addSubview:label];
return view; 
```

确保实现以下方法：

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

否则你的视图将只是在单元格的顶部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:43:46.493

通过这个链接：[NSTextAlignment](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/c_ref/NSTextAlignment)

下面给出的代码片段也可以帮助你

```
 UILabel *myLabel = [[UILabel alloc] init];

  [myLabel setText:@"Abc"];
  [myLabel setTextAlignment:NSTextAlignmentCenter]; 
```

# java - DefaultMutableTreeNode 图标

> ID：14483251
> 
> 赞同：0
> 
> 时间：2013-01-23T15:32:05.753
> 
> 标签：java, swing, jtree

我有一个从对象构建的`JTree`显示。该树旨在显示本地文件系统。数据应根据请求加载，因此当用户想要扩展它时。这很好用，但是只要节点中没有子项，它就会显示一个文件图标，并在插入子项时变成一个文件夹图标。`JContentPane``DefaultMutableTreeNode`

尽管（还）没有子项目，但如何使节点始终显示文件夹图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:40:57.073

您需要为您的树实现单元格渲染器。所以你可以为节点定义图标。 [请参阅此处](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)的表格示例（树也有方法`setCellRenderer`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:03:59.127

使用 DefaultMutableTreeNode（或 TreeNode 的自定义实现），区分*文件*和*空文件夹*的方法是它的 allowChildren 属性：

```
// get a list of files
File[] files = new File(".").listFiles();
// configure the nodes' allowsChildren as the isDir of the File object
for (File file : files) {
    root.add(new DefaultMutableTreeNode(file, file.isDirectory()));
}          
// configure the TreeModel to use nodes' allowsChildren property to
// decide on its leaf-ness
DefaultTreeModel model = new DefaultTreeModel(root, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T01:32:46.850

我用这个：

```
DefaultMutableTreeNode root = new DefaultMutableTreeNode ();
DefaultTreeModel treeModel = new DefaultTreeModel (root);
tree = new JTree (treeModel);
addFiles (root);                            // build the catalog tree recursively
treeModel.setAsksAllowsChildren (true);     // allows empty nodes to appear as folders 
```

和

```
if (file.isDirectory ())
  newNode.setAllowsChildren (true); 
```

在 addFiles() 例程中。setAsksAllowsChildren(true) 需要在树构建之后出现。

# excel - 复制 Excel 表格后，它应该移动到 vba 宏中相同路径中的新文件夹

> ID：14483261
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:32:26.813
> 
> 标签：excel, vba, copy, directory

我需要复制 excel 表并将其放入一个合并的 excel 工作簿中。合并工作表后，所有文件都需要移动到名为“原始”的新文件夹中。该文件夹应在文件所在的位置创建。

问题是文件将由用户自己选择

我正在使用 getfilename 从用户那里获取路径

***涉及步骤：***

Step1：例如：如果用户需要选择

> C:\我的文档\worksheet1.xls
> C:\我的文档\worksheet2.xls
> C:\我的文档\worksheet3.xls

第 2 步：文件应合并为 worksheet1.xls 和

step3: 文件夹应该在 c:\my documents\original 中创建

并且所有 worksheet1, worksheet2,worksheet3 都应该移到“原始”文件夹中

我有合并 excelsheets 的代码。但我不知道如何在路径中创建一个文件夹。请帮助我

下面是代码

```
Option Explicit

Sub copyma()

Dim wb(20) As Variant
Dim ws(20) As Variant
Dim lastrow As Variant
Dim lastr(20) As Variant
Dim nextrow As Variant
Dim tempwb As Variant
Dim tempws As Worksheet
Dim tempfile As Variant
Dim fnum As Variant
Dim ws1 As Worksheet
Dim m As Integer
Dim ffiles(20) As Variant
Dim nextlastrow As Variant
Dim lastcopyrow As Variant
Dim lastcopycol As Variant

Set ws1 = Worksheets("sheet1")

fnum = ws1.Range("b3").Value
'selecting temporary files

MsgBox " plz select the temp sheet"
tempfile = Application.GetOpenFilename

Set tempwb = Workbooks.Open(Filename:=tempfile)
Set tempws = tempwb.Worksheets("sheet1")
tempws.Cells.Clear

' sleecting number of files
For m = 1 To fnum
    MsgBox " Please Select " & m & "files"
    ffiles(m) = Application.GetOpenFilename
Next m

' opening the files and copying to the temp sheet
For m = 1 To fnum
    Set wb(m) = Workbooks.Open(Filename:=ffiles(m))
    Set ws(m) = wb(m).Worksheets("sheet")
    ws(m).AutoFilterMode = False
    ' finding the lastrow of the temp sheet
    lastrow = tempws.Range("A" & tempws.Rows.Count).End(xlUp).Row
    lastr(m) = ws(m).Range("A" & ws(m).Rows.Count).End(xlUp).Row
    MsgBox lastr(m)
    nextlastrow = lastrow + 1
    With ws(m)
        lastcopyrow = .Range("A" & .Rows.Count).End(xlUp).Row
        lastcopycol = ws(m).Cells(1, .Columns.Count).End(xlToLeft).Column
        '   lastcol = ws2.Cells(1, .Columns.Count).End(xlToLeft).Column
        If m = 1 Then
            .Range("A1", .Cells(lastcopyrow, lastcopycol)).Copy tempws.Cells(lastrow, 1)
        Else
            .Range("A2", .Cells(lastcopyrow, lastcopycol)).Copy tempws.Cells(nextlastrow, 1)
        End If
    End With
    wb(m).Close
Next m

tempws.Name = "sheet"
tempwb.Save

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:39:08.390

考虑到您可以使用基本路径：

```
Sub Create_Path()

Dim sBase_Path As String
Dim sNew_Path As String

sBase_Path = "U:\"
sNew_Path = sBase_Path & "New_Path" 'Define yourself 

MkDir sNew_Path

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:47:03.097

```
'Get file path
Dim outfolder As String
outfolder = Mid(tmpfile, 1, InStrRev(tmpfile, "\")) & "original"
'Check if directory exists and create it if it does not
If Dir(outfolder) = "" Then
MkDir outfolder
End If 
```

# javascript - JavaScript - 将类添加到按钮的子级

> ID：14483266
> 
> 赞同：0
> 
> 时间：2013-01-23T15:32:43.440
> 
> 标签：javascript, javascript-events

我正在尝试研究如何将类添加到按钮的子元素，特别是`<i>`以下内容：

```
<button><i class="icon-undo"></i> Undo</button> 
```

理想情况下，使用纯 JavaScript，可以将一个函数添加到按钮（`<button onclick="function()">`即`<i>`同一页）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T15:36:54.463

也许这个问题中的代码有帮助....今天自己发布了答案。只需将“this”传递给函数，之后您就可以对 DOM 产生奇迹

[在javascript中获取附近的兄弟姐妹](https://stackoverflow.com/questions/14477791/get-nearby-sibling-in-javascript)

# jqplot - 根据标签更改jqplot系列的颜色

> ID：14483267
> 
> 赞同：0
> 
> 时间：2013-01-23T15:32:48.323
> 
> 标签：jqplot

我有一张图表，有一个系列在某些情况下我想用黑色渲染。我生成图表，然后我这样做：

```
for (i = 0; i < chart.series.length; ++i) {
    if (chart.series[i].label == 'Failures') {
        chart.series[i].color = '#000000';
    }
} 
```

但它并没有改变颜色。我在调试器中验证了 if 为真，并且正在执行分配，并且该系列的颜色字段为 #000000。做这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:42:17.543

在创建图表之前，我最终这样做了：

```
 for (i = 0; i < series.length; ++i) {
        if (series[i][0][series[i][0].length-1].type == 'Failures') {
            seriesColors[i] = '#000000';
        }
    } 
```

# iphone - Xcode：在 UITextField 中可单击的名称并在单击时启动地址簿

> ID：14483268
> 
> 赞同：1
> 
> 时间：2013-01-23T15:32:48.543
> 
> 标签：iphone, ios, objective-c, xcode, ipad

在以下 UI 中，您可以从通讯录中选择人员。请注意，名称是可单击的，并在单击时启动地址簿。

![在此处输入图像描述](../Images/f4f44e6c4352a2fe3b4c3aea9ada7f02.png)

在我的应用程序中，我可以从通讯录中选择联系人并提取全名，但是当我将其添加到 UITextField 时，它只显示为名称，不可点击如下：

![在此处输入图像描述](../Images/19fa534c71cea8e2143289548855aa4b.png)

```
Q. How can I make the name in my app clickable and it would take me to address book upon click. 
```

我正在使用包装类与通讯录进行交互，这是我的代码。

```
- (BOOL)peoplePickerNavigationController:
(ABPeoplePickerNavigationController *)peoplePicker
      shouldContinueAfterSelectingPerson:(ABRecordRef)person
                                property:(ABPropertyID)property
                              identifier:(ABMultiValueIdentifier)identifier
{
    // Guaranteed to only be working with e-mail or phone here
    [self dismissModalViewControllerAnimated:YES];

    NSArray *array =
    [ABContact arrayForProperty:property inRecord:person];
    NSString *pickedValue = (NSString *)[array objectAtIndex:identifier];

    NSString *firstName = [[ABContact contactWithRecord:person] firstname];
    NSString *lastName = [[ABContact contactWithRecord:person] lastname];
    NSString *fullName = [[NSString alloc] initWithFormat:@"%@ %@",firstName, lastName];

    if (chooseEmail)
    {
        txtToEmailAddress.text = fullName;
    }
    if (choosePhone)
    {
        txtCallPhoneNum.text = fullName;

    }
    if (chooseText)
    {
        txtTextNumbers.text = fullName;

    }

    return NO;

} 
```

如果可能，请提供带有答案的代码示例。我非常感谢。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:46:03.463

您可以查看一些开源想法，这可能会有所帮助。 [https://github.com/beat843796/HEBubbleView](https://github.com/beat843796/HEBubbleView)

[https://github.com/tristanhimmelman/THContactPicker](https://github.com/tristanhimmelman/THContactPicker)

# kml - 随着时间的推移改变 KML 多边形颜色？

> ID：14483270
> 
> 赞同：0
> 
> 时间：2013-01-23T15:32:58.027
> 
> 标签：kml

我编写了一个定期输出 KML 文件的程序。这些文件包含一个多边形网格，始终具有相同的空间覆盖范围。我想使用多边形的填充颜色来表示每个网格单元的数据值。我知道如何使用 Style 标签设置多边形的填充颜色。是否可以使用 TimeStamp 或 TimeInterval 随时间更改为多边形颜色？如果没有，有没有办法隐藏“旧”多边形并在同一位置绘制“新”多边形，但颜色不同？有没有更好的方法来表示每个单元格都有数据值的网格，比如地面覆盖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:08:20.797

要更改多边形颜色，您需要使用 3rd 方 kml 解析器，例如 geoxml3。看到这个， [在鼠标悬停时改变使用 geoxml3 渲染的 KML 多边形的颜色](https://code.google.com/p/geoxml3/)

# mysql - 从两个表中选择数据作为一个表

> ID：14483274
> 
> 赞同：2
> 
> 时间：2013-01-23T15:33:07.580
> 
> 标签：mysql, sql

我有两个相似的表，并希望通过一个查询从两个表中给出一个结果，结果类似于一个表（行作为串联并随时间排序）

***我的表 1：***

```
time    name    Comment
-------------------------
45      asd     testasd
49      gas     testgas
50      has     testhas
96      bag     testbag 
```

***我的表 2：***

```
time    name    Comment
-------------------------
48      hjasf   bigasd
54      adg     biggas
65      zxx     bighas
115     cxx     bobbag
131     xxb     bobhas 
```

***结果：***

```
time    name    Comment
-------------------------
45      asd     testasd
48      hjasf   bigasd
49      gas     testgas
50      has     testhas
54      adg     biggas
65      zxx     bighas
96      bag     testbag
115     cxx     bobbag
131     xxb     bobhas 
```

我尝试这样做但不知道，我必须使用 JOIN 或 UNION 或...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:34:09.367

您只需要使用`UNION ALL`（*ALL - 允许重复。*）

```
SELECT time, name, Comment FROM table1
UNION ALL
SELECT time, name, Comment FROM table2
ORDER BY time 
```

*   [SQLFiddle 演示链接](http://www.sqlfiddle.com/#!2/ad64b/1)

该`UNION`命令用于从两个表中选择相关信息，很像 JOIN 命令。但是，当使用 UNION 命令时，所有选定的列都需要具有相同的数据类型。使用 UNION，只选择不同的值。

该`UNION ALL`命令与 UNION 命令相同，只是 UNION ALL 选择所有值。

Union 和 Union all 之间的区别在于，Union all 不会消除重复的行，而是只会从适合您的查询细节的所有表中提取所有行并将它们组合成一个表。

*   [联合与联合之间的区别](http://blog.sqlauthority.com/2009/03/11/sql-server-difference-between-union-vs-union-all-optimal-performance-comparison/)

输出将如下所示，

```
╔══════╦═══════╦═════════╗
║ TIME ║ NAME  ║ COMMENT ║
╠══════╬═══════╬═════════╣
║   45 ║ asd   ║ testasd ║
║   48 ║ hjasf ║ bigasd  ║
║   49 ║ gas   ║ testgas ║
║   50 ║ has   ║ testhas ║
║   54 ║ adg   ║ biggas  ║
║   65 ║ zxx   ║ bighas  ║
║   96 ║ bag   ║ testbag ║
║  115 ║ cxx   ║ bobbag  ║
║  131 ║ xxb   ║ bobhas  ║
╚══════╩═══════╩═════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:34:05.843

如果两个表具有相同数量的字段，则可以使用：

```
SELECT * from MyTable1
UNION ALL
SELECT * from MyTable2
ORDER BY time 
```

UNION ALL 将选择第一个查询的所有行，并结合第二个查询的所有行。如果您需要删除重复项，您应该使用 UNION 而不是 UNION ALL。ORDER BY 子句将按时间对结果行进行排序。

[在此处查看UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)子句的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:41:12.787

[http://www.w3schools.com/sql/sql_union.asp](http://www.w3schools.com/sql/sql_union.asp)

使用带有 union all 的 select 语句来实现这一点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T15:36:31.080

使用 UNION ALL 如下：

```
SELECT `time`, `name`, `Comment` FROM `MyTable1`
UNION ALL
SELECT `time`, `name`, `Comment` FROM `MyTable2` 
```

要按时间订购，请尝试：

```
SELECT * FROM (
SELECT `time`, `name`, `Comment` FROM `MyTable1`
UNION ALL
SELECT `time`, `name`, `Comment` FROM `MyTable2`
) AS `Result` ORDER BY `time` ASC 
```

# c# - 通过 PC 路由 TCP/IP

> ID：14483278
> 
> 赞同：2
> 
> 时间：2013-01-23T15:33:25.360
> 
> 标签：c#, tcp, routing, ip, forwarding

我想使用具有两个以太网端口的 PC 连接到第一个端口的本地网络，以及使用 TCP/IP over Ethernet 在第二个端口进行通信的检测器。下图应演示设置：

![在此处输入图像描述](../Images/77ed0ab60b80ac171c160af696649b48.png)

探测器通过跳线直接与显示器相连。显示器和服务器与本地网络相连。但是 MAC 桥接是不可能的，因为显示器需要与探测器以及服务器进行通信，服务器通过本地网络进行通信。

我正在用 C# 和 Windows Embedded 7 编写显示软件，我想知道如何将来自服务器的传入请求桥接/转发/路由到检测器。

# java - 构造函数抛出异常后可以调用finalize吗？

> ID：14483279
> 
> 赞同：18
> 
> 时间：2013-01-23T15:33:27.763
> 
> 标签：java, exception, constructor

`finalize()`如果对象的构造函数出现异常，是否有任何关于是否清理对象的详细信息。

众所周知，何时调用此方法时定义不正确。根据手册：

> Java 编程语言不保证哪个线程将为任何给定对象调用 finalize 方法。但是，可以保证调用 finalize 的线程在调用 finalize 时不会持有任何用户可见的同步锁。如果 finalize 方法抛出未捕获的异常，则忽略该异常并终止该对象的终结。

[http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#finalize%28%29](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#finalize%28%29)

我无法以这种方式触发 finalize 方法。有谁知道它是否被保证不被调用，或者在某些情况下在构造函数初始化对象失败后调用它（这是一个异常）。

我问这个是因为我有一个不能清理两次的物体。我试图了解在抛出异常之前清理是否安全，或者我是否必须留下一个标记`finalize()`才能有效地跳过并且什么也不做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T15:42:59.397

我的测试表明它可以

```
public class Test1 {

    Test1() {
        throw new RuntimeException();
    }

    @Override
    protected void finalize() throws Throwable {
        System.out.println("finalized");
    }

    public static void main(String[] args) throws Exception {
        try {
            new Test1();
        } catch (RuntimeException e) {
            e.printStackTrace();
        }
        System.gc();
        Thread.sleep(1000);
    }
} 
```

印刷

```
java.lang.RuntimeException
    at test.Test1.<init>(Test1.java:13)
    at test.Test1.main(Test1.java:24)
finalized 
```

它位于 Java HostSpot 客户端 VM 1.7.0_03

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-23T15:51:02.840

根据第[12.6.1 节。实现](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.6.1)JLS 的最终确定：

> 一个对象 o 在其构造函数调用 o 上的 Object 的构造函数并且该调用已成功完成（即没有抛出异常）之前是不可终结的。

*如果您的构造函数在 Object 构造函数完成后*抛出异常，那么您的对象应该是可终结的，因此`finalize()`仍然可以调用。

[在第12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)节中有一个很好的例子来逐步完成对象构造。[创建新类实例](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)，准确显示何时调用 Object 构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-13T14:33:13.417

为了更清楚地证明：

```
public class Test1 {

    public static class LifeBoat extends RuntimeException
    {
        private Test1 passenger;
        public Test1 getPassenger(){return passenger;}
        public LifeBoat(Test1 passenger){this.passenger=passenger;}
    }

    Test1() {
        super(); //once this is finished, there is an Object to GC per JLS 12.6.1\. 
        throw new LifeBoat(this);
    }

    @Override
    protected void finalize() throws Throwable {
        System.out.println("finalized");
    }

    public static void main(String[] args) throws Exception {
        try {
            new Test1();
        } catch (LifeBoat e) {
            Test1 obj;
            obj=e.getPassenger();
            System.out.println(obj);
        }
        System.gc();
        Thread.sleep(1000);
    }
} 
```

印刷

```
java.lang.RuntimeException
    at test.Test1.<init>(Test1.java:13)
    at test.Test1.main(Test1.java:24)
test.Test1@6dc8f3cd
finalized 
```

# vb.net - 在 Google 搜索 API 中选择一种语言

> ID：14483280
> 
> 赞同：0
> 
> 时间：2013-01-23T15:33:28.590
> 
> 标签：vb.net, google-api

我正在使用谷歌搜索 API 尝试从谷歌获取一些结果并将它们存储在列表框中。这工作正常，但是我想用我自己的语言（荷兰语）而不是默认语言（英语）进行搜索。

我尝试使用“dutch”、“nl”、“nl-NL”、language.dutch 但它似乎不起作用，我也搜索了很多但找不到正确的答案。

```
 Dim cl As New GwebSearchClient("www.google.nl")

        Dim rtnList As IList(Of IWebResult) = cl.Search(KEYWORD, LENGTH, LANGUAGE)

        For Each itm As IWebResult In rtnList
            ListBox1.Items.Add(itm.Url) '
        Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:39:23.410

我不确定这是否是您正在寻找的，完全没有使用此 API 的经验，但也许这对您来说是一些信息：

```
Specific UI language - if you want to specify the language for the UI components (SearchControl, branding, etc...) instead of having it auto-detected then set "language" to the specific language code such as: en, es, zh-CN, pt-PT, and etc...

google.load("search", "1", {"language" : "en"}); 
```

从[这里](https://developers.google.com/web-search/docs/)。

# actionscript-3 - 当使用带有嵌入文件的 swc 时，文件丢失但 swc 编译时没有错误？

> ID：14483282
> 
> 赞同：0
> 
> 时间：2013-01-23T15:33:36.593
> 
> 标签：actionscript-3, flash-builder, swc

我正在使用我在 actionscript 中制作的代码制作一个 swc 文件，它可以正常工作。但是，在我获取所有代码并将其放入 swc 库后，它会创建没有任何编译错误的 swc。我去使用 swc，它给了我警告并希望运行它

```
"Description Resource Path Location Type The definition Arrow.Right_png$c7cf89b0fd8fa396e54e299a767d2beb1814885492 depended on by plus.assetsClass in the SWC D:\Adobe Flash Builder 4.7\as3Test\bin\as3Test.swc could not be found projectName line 0 Flex Problem" 
```

有谁知道它为什么这样做或发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:45:06.813

所以我弄清楚我做错了什么，所以我想做的是将一些 Actionscript 构建到一个 swc 文件中，以便在其他项目中重用。在 swc 中，我有一些 as3 文件，其中包含一些嵌入代码，例如...

> [Embed(source="Botton Arrow Down.png")] public static var buttonDown:Class;

Witch 在项目中时工作，但是当您在 swc 中使用上述代码时，间隔导致它无法找到嵌入文件。swc编译完成后。但这不会导致 swc 中的编译器错误，它只会导致警告说它在您正在使用 swc 的项目中找不到文件。要解决此问题，只需删除所有空格。

> [Embed(source="Botton_Arrow_Down.png")] public static var buttonDown:Class;

删除空格后，它可以正常工作。我不知道这一点，但在使用 swc 保存嵌入资产时要记住这一点。希望有人能够解释原因。

# image - KineticJS 形状在图像上

> ID：14483294
> 
> 赞同：2
> 
> 时间：2013-01-23T15:34:02.923
> 
> 标签：image, shape, kineticjs

我想在图像上绘制一些形状。

图像加载并添加到图层后，我使用 moveToBottom() 函数，该函数适用于形状，但似乎不适用于图像。

我尝试在形状上使用 moveToTop() ，但仍然没有运气。

重要提示：我必须将它们保持在同一层，因此将图像放在另一层的明显解决方案不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:53:43.757

[http://jsfiddle.net/hukNL/](http://jsfiddle.net/hukNL/)

这个概念表明分层函数是有效的，所以错误出现在代码的其他地方。

首先，您要使用最新的 KineticJS 4.3.1，然后您要确保在拖动图像时禁用将它们放置在新版本中现在提供的 dragOnTop 层中。最后，如果没有其他工作，那么您可以通过使用以下命令检查每个项目的 z-index 来手动调试代码：

```
 .getZIndex() 
```

此外，如果您需要更多帮助，请发布一些代码，以便其他人可以帮助您调试它。

# apache - apache2中的密码文件是什么？

> ID：14483295
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:34:02.923
> 
> 标签：apache, ubuntu, ssl

我指的是[这个](https://serverfault.com/questions/71043/ssl-password-on-apache2-restart?s=275b3be7-5cca-45ea-82c9-99f99cbb6901)问题。这里提到的“密码文件”是什么？请澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:10:59.693

接受的答案在该主题上非常清楚。密码文件是一个简单的文本文件，包含 2 行

```
#!/bin/sh
echo "passphrase" 
```

您可能必须使其可执行，但我不确定。

我想说，Max Alginin 对原始问题的回答也是可行的，而且（有点）省力。

# php - SQL - phpmyadmin - 选择字段并用空格替换任何大于单个空格的空格

> ID：14483302
> 
> 赞同：0
> 
> 时间：2013-01-23T15:34:18.323
> 
> 标签：php, sql, phpmyadmin

所以基本上我遇到的问题是表格中的描述，描述字段已经用某种所见即所得的编辑器进行了编辑。并且标记标签之间有很大的空格。

因此，让我们发挥想象力并调用表格：表格和字段，描述。我想从表中选择所有描述字段，并用单个空格替换任何大于空格的内容。

有什么方法可以在phpmyadmin中做到这一点，例如只使用sql？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:37:55.250

备份。

```
UPDATE table SET description = REPLACE(description, '  ', ' '); 
```

如果您只需要一次，只需运行此查询十次 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:51:40.753

我将添加到fabian的答案。用空值替换 2 个空格。它应该一次性完成，您将获得所需的单个空间。

```
UPDATE table SET description = REPLACE(description, '  ', ''); 
```

# php - 如何根据日期计算唯一访问次数

> ID：14483303
> 
> 赞同：2
> 
> 时间：2013-01-23T15:34:18.070
> 
> 标签：php, mysql, sql, count

我有一个报告表，我只使用下面的代码来计算点击次数。

```
// Get hits
    $hits_query = mysql_query("SELECT COUNT(*) AS `count` FROM `reports` WHERE `stuff_id` = ".$row->id."");
    $fetch_hits = mysql_fetch_array($hits_query);
    $hits = $fetch_hits['count']; 
```

该代码效果很好，并且完全符合我的要求，但我现在想要的是如何获得独特的命中？

在我的报告表中，我存储了每个访问权限，因此每个用户都有多个日志`stuff_id`。在我的报告表中，我将每个报告的日期存储为 01-23-2013，以及用户 ip，`stuffed`并且每 24 小时从 2 变为 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:50:01.333

您需要一个唯一标识用户的字段。对于我的示例，我将假设它是`user_ip`. 改变这个：

```
$hits_query = mysql_query("SELECT COUNT(*) AS `count` FROM `reports` WHERE `stuff_id` = ".$row->id.""); 
```

对此：

```
$hits_query = mysql_query("SELECT COUNT(DISTINCT `user_ip`) AS `count` FROM `reports` WHERE `stuff_id` = ".$row->id.""); 
```

**注意：**从 PHP 5.5 起，mysql 库将被弃用，并在 PHP 的未来版本中被删除。开始计划迁移离开它是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:58:47.760

你可以这样做：

```
$hits_query = mysql_query("SELECT COUNT(DISTINCT `user_ip`) AS `count` FROM `reports` WHERE `stuff_id` = ".$row->id.""); 
```

或者，如果您想要一个独特的响应，您可以这样做：

```
$user-IP = "Put here the ip adress of the user that you want";
$hits_query = mysql_query("SELECT COUNT(*) AS `count` FROM `reports` WHERE `user_ip` = ".$user-IP.""); 
```

# c# - 在 WinForms 应用程序中的按钮上居中文本

> ID：14483304
> 
> 赞同：6
> 
> 时间：2013-01-23T15:34:25.263
> 
> 标签：c#, winforms

我有一个简单的 Windows 窗体应用程序，带有`tabControl`. 我有 3 个面板`tabControl`，每个面板有 5 个按钮。第一组按钮上的文本是硬编码的，但是当您单击第一组中的一个按钮时会填充下一组，然后当您单击第二组中的一个按钮时，最后一组按钮会再次发生同样的事情。在 [Design] 视图中，我手动将`TextAlign`每个按钮的属性设置为`MiddleCenter`. 但是，当我运行应用程序时，中间一组按钮上的文本永远不会居中。它总是`TopLeft`对齐的。`TextAlign`每次以编程方式设置按钮文本时，我都尝试更改字体大小，甚至显式设置属性，如下所示：

```
private void setButtons(List<string> labels, Button[] buttons)
    {
        for (int i = 0; i < buttons.Count(); i++)
        {
            if (i < labels.Count)
            {
                buttons[i].Text = labels.ElementAt(i);
                buttons[i].TextAlign = System.Drawing.ContentAlignment.MiddleCenter;
                buttons[i].Enabled = true;
            }
            else
            {
                buttons[i].Text = "";
                buttons[i].Enabled = false;
            }
        }
    } 
```

此图像显示了结果： ![对齐问题](../Images/0def235a492ac088326c158c5187561f.png)

有人对我所缺少的有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:54:06.040

修剪您分配给按钮的文本。您也可以按索引引用标签，而无需调用`ElementAt`

```
private void setButtons(List<string> labels, Button[] buttons)
{
    for (int i = 0; i < buttons.Count(); i++)
    {
        Button button = buttons[i];

        if (i < labels.Count)
        {
            button.Text = labels[i].Trim(); // trim text here
            // button.TextAlign = ContentAlignment.MiddleCenter;
            button.Enabled = true;
        }
        else
        {
            button.Text = "";
            button.Enabled = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-05T09:32:31.770

您可以将 UseCompatibleTextRendering 属性设置为 true，然后使用 TextAlign 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:55:33.040

SQL 表中分配给中间列的字符串实际上是`nchar(50)`，而不是`nvarchar(50)`，这就解释了问题。我将 .Trim() 添加到 Text 分配中，现在看起来很棒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T19:43:18.420

您可以使用属性菜单中的TextAlign**并将**其设置**为****MiddleCenter** ...

 ****如果这不起作用，那么您的按钮文本大于实际按钮本身......您应该将您的**字体大小**重新调整为较低的基本大小或使用实际按钮的百分比大小

```
btnFunction.Font = new Font(btnFunction.Font.Name, Convert.ToInt32(btnFunction.Height * 0.3333333333333333)); 
```

这将导致按钮的字体是按钮高度的三分之一......****

# google-app-engine - 如何强制 GZIP 用于开发 Google Appengine 服务器

> ID：14483311
> 
> 赞同：3
> 
> 时间：2013-01-23T15:34:39.583
> 
> 标签：google-app-engine, gzip, dev-appserver

我的代码可以从 google appengine 服务器获取 gzip 内容，但它从 localhost（appengine 开发服务器）获取完整大小。它看起来使用码头作为网络服务器。是否可以强制 localhost 使用 gzip？

# jquery-globalization - 使用 jQuery Globalize 将回历日期转换为公历

> ID：14483312
> 
> 赞同：0
> 
> 时间：2013-01-23T15:34:40.150
> 
> 标签：jquery-globalization

我正在尝试使用 ar-SA 日历中的内部函数将回历日期转换回公历（其他日历似乎具有相同的 toGregorian 函数）。例如代码尝试：

```
Globalize.cultures["ar-SA"].calendars.standard.convert.toGregorian("1434", "03", "11"); 
```

根据我见过的网站：[http ://www.islamicity.com/prayertimes/defaulthijriconv.asp](http://www.islamicity.com/prayertimes/defaulthijriconv.asp)

“1434”、“03”、“11”应该是 2013 年 1 月 23 日。

但是，每个日期似乎都相差 2 天，并且此函数返回.. 2013 年 1 月 21 日.. 这个函数有问题吗？或者我使用它可能遇到的其他问题？

或者有人可以提出一个可以进行正确转换的js函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:59:04.653

我发现问题是因为 Month 是从零开始的，所以上面的代码应该是：

Globalize.cultures["ar-SA"].calendars.standard.convert.toGregorian("1434", "02", "11");

对于今天的日期。

# java - Spring，数值验证，默认值，警告信息

> ID：14483313
> 
> 赞同：1
> 
> 时间：2013-01-23T15:34:41.737
> 
> 标签：java, spring, constraints, default-value

我有bean定义，例如

```
<bean id="DsdDetectorLogic" class="my class" init-method="init" lazy-init="true" >
    <property name="threshold" value="#{ properties.threshold }" />
    <property name="lag" value="#{ properties.lag }" />
    ...
</bean> 
```

我需要在特定参数（*滞后*）上添加约束，如果此参数超过 3 的最大值或 1 的最小值，我需要它来获得默认值 1。此外，我需要收到一些警告消息，表明此参数收到了结果是默认值。

我熟悉使用 javax.validation.constraints.Min / Max 对代码中的字段进行注释的解决方案。

是否可以使用一些spring特性来编辑xml文件，或者唯一的解决方案是在调用setter时从java对象类中进行编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:02:32.727

我将部分回答我的问题，因为我发现如何检查约束并通过 xml 发送默认值，警告消息仍然是一个难题。

我将使用 SPeL：

```
<bean id="DsdDetectorLogic" class="my class" init-method="init" lazy-init="true" >
    <property name="threshold" value="#{ properties.threshold }" />
    <property name="lag" value="#{ (1 > new Integer(properties.lag ) or 
                                    new Integer(properties.lag ) > 3) ? 1 : 
                                    properties.lag  }" />
    ...
</bean> 
```

# jquery - Spring：从动态 jquery 表单接收表单数据

> ID：14483316
> 
> 赞同：1
> 
> 时间：2013-01-23T15:34:45.813
> 
> 标签：jquery, spring, spring-mvc

嗨，

我在 Spring MVC 中使用 jQuery 来动态生成表单元素。

这是一个示例：[*单击*](http://jsbin.com/onahi4/2)

如何从动态表单域接收数据？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:21:05.603

在表单 bean 中将值设为某种列表或集合。在您的 JSP 中，您可以创建如下输入：

```
<input type="text" name="formBean.listName[0]" /> 
```

或您想要的任何输入类型。在您的控制器中，您可以将表单 bean 作为模型属性，例如：@RequestMapping("/someUrl")

```
public String myHandler(@ModelAttribute("formBean") FormBean formBean) {
    // ...do something
} 
```

基本上，只要输入的 name 属性与 ModelAttribute 名称及其内部列表名称匹配，就应该是黄金。您也可以改用 Map，将键列表中的索引替换为 Map。

# android - 如何在 DialogFragment 的右标题上添加图标？

> ID：14483322
> 
> 赞同：3
> 
> 时间：2013-01-23T15:35:03.960
> 
> 标签：android, icons, android-dialogfragment

我目前正在使用 DialogFragment，但无法在右上角设置图标。

我已经看到了一些将图标显示为对话框图标的技巧：

```
 @Override
 public Dialog onCreateDialog(Bundle savedInstanceState) {
  Dialog myDialog = new AlertDialog.Builder(getActivity())
     .setIcon(R.drawable.ic_info)
     .setTitle(title)
  return myDialog;
 } 
```

但这无济于事，因为图标在左侧，点击不直观

我知道我可以设置自定义布局，但我确信布局会反映所有操作系统和 OEM 制造商的自定义（相同样式）

有什么帮助吗？

![在此处输入图像描述](../Images/ec96b5c1e179d699376de48ee8dd6552.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-06T06:25:48.533

我知道这是一个老问题，很可能已经解决了，但也许有人觉得它有用。

在你的 onCreateView 方法上做这样的事情：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    getDialog().requestWindowFeature(Window.FEATURE_LEFT_ICON);
    // your view related code, inflate or whatever
    ... 
```

这准备了带有 continer 的标题视图以设置图标，但它在视图层次结构被实例化之后才会存在，因此您需要在之后调用的方法上设置图标，例如 onActivityCreated，如下所示：

```
@Override
public void onActivityCreated(Bundle savedInstanceState)
{
     super.onActivityCreated(savedInstanceState);
     getDialog().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.ic_launcher);
} 
```

请务必先调用 super 方法，否则您的图标可能会被覆盖。

希望这可以帮助某人...

来自墨西哥的问候...

# heroku - 在 Heroku 中使用 Bonsai.io 指向同义词文件路径

> ID：14483324
> 
> 赞同：1
> 
> 时间：2013-01-23T15:35:14.413
> 
> 标签：heroku, elasticsearch

我正在使用 bonsai.io 并希望将 elasticsearch 指向我的同义词文件。在开发中，这工作正常，但我无权访问 /var/websolr/apps/elasticapp/current/config/ 将文件放在那里，Rails.root 没有给我应用程序的绝对路径服务器。如何将我的同义词文件与 bonsai.io 一起使用？有什么方法可以让它指向我的应用程序中的相对路径，甚至指向托管在我控制的服务器上的同义词文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-21T18:11:30.780

有一种方法可以将同义词保存在 txt 文件中并在模型中使用它们。您可以直接在配置同义词的位置读取文件，而不是指定路径。

这是我以前的样子：

```
synonym: {
          type: "synonym",
          format: "wordnet",
          synonyms_path: Rails.root.join("config", "analysis", (Rails.env == "test" ? "test" : "data"), "synonym.txt").to_s
        } 
```

而且，这就是它现在的样子：

```
synonym: {
          type: "synonym",
          format: "wordnet",
          synonyms: File.readlines(Rails.root.join("config", "analysis", (Rails.env == "test" ? "test" : "data"), "synonym.txt"))
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:38:33.897

我从盆景的支持中发现，目前这确实是不可能的，所以我只是在我的模型中包含了一系列同义词，这并不理想，但很有效。

# c - char* 的按位运算

> ID：14483332
> 
> 赞同：2
> 
> 时间：2013-01-23T15:35:37.837
> 
> 标签：c, pass-by-reference, bitwise-operators, bit-shift, bitwise-or

GCC 在编译下面的代码时会出错。注释的两行而不是另一行**or**和**shift**行，但我不确定铸件是否必要和真实。

错误是这样的：*二进制的无效操作数 | （有 'char*' 和 'int'）*

谢谢。

```
void bits2byte(int *bits, char *byte) {
    byte = 0;
    int i;
    for (i = 0; i<8; i++) {
        if (bits[i] == 1) {
            byte = byte | 0x01;
            // byte = (char*)((int)byte | 0x01);
        }
        if (i<7) {
            byte = byte << 0x01;
            // byte = (char*)((int)byte << 0x01);
        }
    }
}
int main() {
    int input_bits[] = {1, 1, 0, 1, 0, 0, 1, 1};
    char output_byte;
    bits2byte(input_bits, &output_byte);
} 
```

**编辑：**我知道这是一个通过引用的问题。我正在尝试修改字节。我希望该函数将位转换为字节。实际上，我首先按照所有回答者/评论者建议的方式编写了它，但是[http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom中的参考传递示例.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr233.htm 让](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr233.htm)我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:36:52.293

为什么要对指针进行按位运算？这不是一个好主意，这就是您遇到编译器错误的原因。

您需要取消引用指针`*`以获取可以执行以下操作的值：

```
*byte |= 1; 
```

或者

```
*byte <<= 1; 
```

注意使用`|=`and`<<=`运算符可以使代码更简单，这在使用指针时更加有用，因为“目标”表达式比直接变量长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:37:31.357

C 标准规定此类运算符的操作数应具有标量类型。

> **C11 (n1570), § 6.5.14 逻辑或运算符**
> 每个操作数都应具有标量类型。

您可以投射到`intptr_t`(C99/C11)。

```
#include <stdint.h>

intptr_t n = (void *)byte; 
```

无论如何，很难说你想要做什么。你不想对指针指向的值做这个操作吗？在这种情况下，您必须取消引用它。

```
*byte = *byte | 0x01; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:42:11.893

这就是你想要做的（我认为）

```
void bits2byte(int *bits, char *byte) {
    //notice ALL the work is with "*byte" not "byte" which is the address of the byte.
    *byte = 0;
    for (int i = 0; i < 8; i++) {
        *byte <<= 1;
        if (bits[i] == 1) {
            *byte |= 1;
        }
    }
}

int main() {
    int input_bits[] = {1, 1, 0, 1, 0, 0, 1, 1};
    char output_byte; //no use to put value here, we'll override it anyway...
    bits2byte(input_bits, &output_byte);
} 
```

# sql-server - 什么是 Oracle 的 SSMS 类似物？

> ID：14483336
> 
> 赞同：1
> 
> 时间：2013-01-23T15:35:46.120
> 
> 标签：sql-server, oracle

什么是（如果有的话）用于 Oracle 数据库的 SQL Server Management Studio 的类似物？

问题似乎很简单，但谷歌什么都不知道。

我从来没有使用过 Oracle 数据库，现在我很快就会遇到第一次，所以我想做好一点准备。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:54:45.673

这取决于。根据您具体尝试执行的操作，可以使用许多应用程序。

如果您尝试管理数据库，您可能希望使用 Enterprise Manager。这是一个基于 Web 的应用程序，可让您监控和管理数据库。它既可以配置为仅在特定数据库服务器上运行（企业管理器数据库控制），也可以配置为允许您访问组织中运行的所有数据库和各种非数据库产品（企业管理器网格控制） . 显然，网格控制是一个更复杂的安装。安装数据库时应该安装 Database Control（尽管一些 DBA 会关闭它，因为他们不想在他们的数据库服务器上运行 HTTP 服务器）。

如果您正在尝试编写和调试 PL/SQL 代码（包、过程、函数、触发器等）或只是运行一些临时 SQL 语句，Oracle 提供了一个可以使用的免费工具[SQL Developer 。](http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html)还有许多其他的 PL/SQL IDE—— Quest的[Toad和 AllAroundAutomations 的](http://www.quest.com/toad-for-oracle/)[PL/SQL Developer](http://www.allroundautomations.com/plsqldev.html)是最常见的两个。

Oracle 还拥有一个基本的命令行 SQL 工具[SQL*Plus](http://docs.oracle.com/cd/E11882_01/server.112/e16604/toc.htm)，无论您身在何处，该工具都将存在（几乎与`vi`您登录的任何 Unix 机器上都可用）。有很多 DBA（以及相当数量的开发人员）更喜欢使用 SQL*Plus 而不是使用各种 GUI。至少，在大多数大型组织中，作为代码升级过程的一部分，DBA 将使用 SQL*Plus 来执行开发人员构建的脚本，因此您需要对 SQL*Plus 有基本的了解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:38:57.103

您可以使用从 oracle 中免费获得的Oracle [SQL Developer 。](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)

[蟾蜍](http://toadworld.com/)也可以。

# compiler-construction - 如何将我的 DSL 转换为现有的编程语言？

> ID：14483337
> 
> 赞同：2
> 
> 时间：2013-01-23T15:35:49.363
> 
> 标签：compiler-construction, dsl, xtext, xpand

我想构建一种可以转换为现有语言（例如python、SQL）的领域特定语言。我尽量避免构建一个成熟的编译器，并研究了*Xtext*和*Xpand*。它们看起来很合理，因为 Xtext 将用于设计语法并生成解析树，Xpand 将使用解析树生成现有语言的代码（如果我错了，请纠正我）。

您对此有何看法？您认为我可以使用 XText 和 Xpand 更好的替代品来实现我的目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:27:59.640

您可以考虑 DMS 软件再造工具包。

它旨在提供通用程序（例如，任意语言或 DSL）解析、分析和转换。它从上下文无关语法自动生成 AST，为构建符号表和进行流分析提供支持，具有源到源转换以启用翻译，以及来自 AST 的完整漂亮打印机。所有这些机器的目的是使构建和支持强大工具的工作最少。

（我是它背后的负责人。我相信 DMS 在这方面比 Xtext 成熟得多，已经使用了 13 年以上。YMMV）。

# objective-c - NSUserDefault 和开关

> ID：14483338
> 
> 赞同：2
> 
> 时间：2013-01-23T15:35:51.267
> 
> 标签：objective-c, xcode, switch-statement, store, nsuserdefaults

我使用 NSUserDefaults 来保存开关，到目前为止它很好。它会记住下一个会话中的开关位置。

现在谈谈我不明白的事情。我在另一个视图中使用相同的开关（具有相同的名称），比如说从第一个视图推入的翻转视图。如果我在第一个视图中更改开关，它会在翻转视图中自动更改。但反过来说，如果我在翻转视图中更改它，当我返回时，它不会在第一个视图中更改。仅当我重新启动应用程序时，第一个视图也会更改。

我怎样才能解决这个同时改变？或者无需重新启动即可刷新第一个视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:39:42.857

您的第一个视图没有刷新，因为它没有再次初始化。如果您使用 ViewControllers，您可以在 viewWillAppear 中更新您的开关（如果 isViewLoaded）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:49:01.277

您应该*观察* `NSUserDefaults`对更改感兴趣的视图的更改。

您可以使用以下代码来观察变化：

```
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
[center addObserver:self
           selector:@selector(defaultsChanged:)  
               name:NSUserDefaultsDidChangeNotification
             object:nil]; 
```

并实现`defaultsChanged`方法：

```
- (void)defaultsChanged:(NSNotification *)notification
{
    NSUserDefaults *defaults = (NSUserDefaults *)[notification object];
    id value = [defaults objectForKey:@"keyOfDefaultThatChanged"];
    self.something = [(NSNumber *)value intValue];    // For example.
} 
```

当您的视图关闭时（可能在 中），不要忘记删除观察者`dealloc`：

```
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
[center removeObserver:self]; 
```

# python - 灰色路线的“Ticket to Ride”棋盘游戏逻辑

> ID：14483340
> 
> 赞同：4
> 
> 时间：2013-01-23T15:35:54.823
> 
> 标签：python, algorithm, graph

我喜欢玩[Ticket to Ride](http://www.daysofwonder.com/tickettoride/en/)，所以我决定尝试在 Python 中实现部分游戏逻辑作为辅助编程项目。游戏板本质上是一个加权多重图，因此使用[NetworkX](http://networkx.lanl.gov/)复制游戏的基本结构是轻而易举的事。

我遇到麻烦的一个部分是分析在给定玩家拥有的火车卡清单的情况下是否有可能通过棋盘的特定路径。我*认为*这更像是一个数学问题，而不是编程问题本身，我可能可以拼凑出一种蛮力方法来解决问题，但认为必须有一种更有效的方法。

对于那些不了解游戏的人：在任何给定时间，每个玩家都有一些八种颜色中的一种的火车卡，以及一个特殊的“机车”类别，用作外卡。这些颜色与游戏板上的火车线颜色相对应（[此处显示](http://cdn0.daysofwonder.com/tickettoride/en/img/te_board.jpg)），除了灰色线，您可以使用任何颜色，只要该段中的所有汽车颜色相同即可。（有一些涉及隧道和渡轮的极端案例，但我们暂时将它们放在一边。）

使用现在的代码，我可以找到两个给定城市之间的所有路径，并返回需要多少每种颜色的火车卡才能走这条特定的路径，除非路径涉及灰色段。我先做非灰色部分，因为它们更简单——路径中的每个红色/绿色/蓝色部分都有足够的红色/绿色/蓝色卡片，或者你没有。使用灰色，因为您可以为每个部分选择任何颜色，它会涉及更多。

对于只有一个灰色段的路径，它仍然很容易——要么你有足够的任何一种颜色的卡片来填充它，要么没有。但是，对于多个灰色段，可能会遇到为第一段选择的颜色无法完成第二或第三段的情况。

举个例子，假设一个玩家的卡牌库存是 4 红色，2 绿色，3 蓝色，我们试图弄清楚他是否可以从巴黎到维也纳。看图板，很容易看出这张卡组合的唯一可能路线是去巴黎--（3灰色）-->苏黎世--（2绿色）-->威尼斯--（2灰色）-- > Zagrad --(2 灰色)--> 维也纳。我的算法从绿色部分开始，并在那里分配两张绿卡。然后它需要决定如何使用剩余的 4 张红卡和 3 张蓝卡来覆盖长度为 3、2 和 2 的灰色段。

答案当然是使用巴黎和苏黎世之间的 3 张蓝卡，威尼斯到萨格拉德和萨格拉德到维也纳各两张红卡。但是，对于涉及更多颜色和更多段的不太明显的情况，如何编写一个通用算法来解决这个问题呢？

我的代码现在看起来像这样：

```
def can_afford(path, cards):
    grays = list()
    for segment in path:
        if segment.color == 'Gray':
            grays.append(segment)
        else:
            if cards.get(segment.color, 0) >= segment.weight:
                cards[segment.color] -= segment.weight
            else:
                return False
    for gray in grays:
        # Halp!
        pass
    return True 
```

（“重量”是火车车厢中段的长度。）

我觉得这里潜伏着一个非常微不足道的解决方案，我无法指望。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:41:05.080

正如 Daniel Brückner 所说，找到将卡片颜色分配给灰色部分的问题对应于[装箱问题](https://en.wikipedia.org/wiki/Bin_packing_problem)，彩色卡片的集合对应于箱，灰色部分对应于要打包的对象。

现在，装箱问题是[NP-hard](https://en.wikipedia.org/wiki/NP-hard)问题，但在这种情况下这不是灾难，因为可以使用[动态规划在](https://en.wikipedia.org/wiki/Dynamic_programming)[伪多项式时间内](https://en.wikipedia.org/wiki/Pseudo-polynomial_time)（即，在时间上是箱大小的多项式）解决问题，这对于您的应用程序来说应该已经足够好了，因为垃圾箱的大小受游戏中卡片数量的限制。这是一个 bin 打包的示例实现，使用[装饰器](https://docs.python.org/3/library/functools.html#functools.lru_cache)对其进行记忆：[`@functools.lru_cache`](https://docs.python.org/3/library/functools.html#functools.lru_cache)

从 functools 导入 lru_cache

```
@lru_cache(maxsize=None)
def packing(bins, objects):
    """Return a packing of objects into bins, or None if impossible. Both
    arguments are tuples of numbers, and the packing is returned in
    the form of a list giving the bin number for each object.

    >>> packing((4,5,6), (6,5,4))
    [2, 1, 0]
    >>> packing((4,5,6), (1,1,2,4,5))
    [0, 0, 0, 1, 2]

    """
    if not objects:
        return []
    o = objects[0]
    rest = objects[1:]
    for i, b in enumerate(bins):
        if o <= b:
            p = packing(bins[:i] + (b - o,) + bins[i+1:], rest)
            if p is not None:
                return [i] + p
    return None 
```

这可用于确定是否可以在 Ticket to Ride 中遵循路径：

```
def can_afford(path, cards):
    """Return True if path can be followed using cards, False if not.
    cards might be updated, so pass a copy if you don't want that to
    happen.

    """
    grays = []
    for segment in path:
        c, w = segment.color, segment.weight
        if c == 'Gray':
            grays.append(w)
        elif cards.get(c, 0) >= w:
            cards[c] -= w
        else:
            return False
    return packing(tuple(cards.values()), tuple(grays)) is not None 
```

请注意，如果您制作`cards`了[`collection.Counter`](https://docs.python.org/3/library/collections.html#collections.Counter)，那么您可以只写`cards[c]`而不是`cards.get(c, 0)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:03:41.440

[这个问题与装箱](http://en.wikipedia.org/wiki/Bin_packing)问题、[子集总和](http://en.wikipedia.org/wiki/Subset_sum_problem)和其他类似问题有一些相似之处。提到的和许多相关的问题都是NP完全的，因此可能会证明没有（已知的）有效算法可以解决这个问题，但我目前无法证明这一点——这只是一种直觉。我会再考虑一下，然后更新这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T18:06:28.093

解决此问题的另一种方法是构建搜索树，如下所示：

*   每个节点都标有一个城市名称、一组卡片和一些火车。这对应于特定路线的起始城市以及您可用的卡片和火车件。

*   节点的每个子节点对应于您可以从父节点到达的城市，以及完成从父节点到节点的路线后留在您手中的卡片和火车部件。

例如，树的根可能对应于蒙特利尔，有 4 个蓝色、1 个白色和 1 个通配符，以及 45 个火车件。根的孩子将是：

*   多伦多，（1蓝，1白，1野），42#使用3张蓝卡
*   Toronto, (2 blue, 1 white), 42 #使用2蓝色和外卡
*   纽约，（1蓝，1白，1野），42#使用3张蓝卡
*   纽约，（2蓝色，1白色），43#使用2蓝色和外卡
*   波士顿，（3蓝色，1白色），43＃使用1蓝色和外卡
*   波士顿，（2蓝，1白，1野），43#使用2张蓝卡
*   波士顿，（4蓝色），43＃使用1白色和外卡

现在，您只需要在这棵树中执行深度优先搜索，看看您是否可以到达目的地城市。您添加到搜索树的边缘受您手中的牌的限制（即，您不能直接从蒙特利尔前往 Sault St. Marie，因为您手上总共没有 6 张黑色/百搭牌）以及剩余的火车数量（如果你只剩下 3 张卡，你就不能从卡尔加里到西雅图）。

# linux - bash 合并文件中的行

> ID：14483341
> 
> 赞同：2
> 
> 时间：2013-01-23T15:35:55.890
> 
> 标签：linux, bash, shell, sed, awk

我想转换这个文本：

```
qa-ops01.mysite.com
/dev/mapper/sys-home   58G   26G   30G  47% /home
/dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /tmp
qa-ops02.mysite.com
/dev/mapper/sys-home   58G   26G   30G  47% /usr
/dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /var
qa-ops03.mysite.com
/dev/mapper/sys-home   58G   26G   30G  47% /lib
/dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /etc 
```

对此：

```
qa-ops01.mysite.com /dev/mapper/sys-home   58G   26G   30G  47% /home
qa-ops01.mysite.com /dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /tmp  
qa-ops02.mysite.com /dev/mapper/sys-home   58G   26G   30G  47% /usr
qa-ops02.mysite.com /dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /var   
qa-ops03.mysite.com /dev/mapper/sys-home   58G   26G   30G  47% /lib
qa-ops03.mysite.com /dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /etc 
```

我用过

```
cat FILE |sed 'N;s/.com\n//' 
```

有没有办法实现这一点，或者我应该只写 If... Then ...

谢谢大家的回答：D（你总是给我看新东西：D）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:41:56.023

我不太了解 sed，但在 AWK 中：

```
awk 'NR==1{prefix=$0;next} {print prefix, $0}' file 
```

### 更新

如果是这种情况，请查找只有一个字段（列）的行，将其用作前缀。这意味着，对上述脚本的唯一更改是 NF（字段数）代替 NR（记录数或行数）。

```
awk 'NF==1{prefix=$0;next} {print prefix, $0}' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:10:48.337

[potong](https://stackoverflow.com/users/967492/potong)的[答案](https://stackoverflow.com/a/14483620/15168)几乎是正确的；它只处理一台服务器，而不是多台服务器，但所需的更改很小。

```
$ sed -e '/^[^ ]*$/{h;d;}' -e 'G; s/\(.*\)\n\(.*\)/\2 \1/' data
qa-ops01.mysite.com /dev/mapper/sys-home   58G   26G   30G  47% /home
qa-ops01.mysite.com /dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /tmp
qa-ops02.mysite.com /dev/mapper/sys-home   58G   26G   30G  47% /usr
qa-ops02.mysite.com /dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /var
qa-ops03.mysite.com /dev/mapper/sys-home   58G   26G   30G  47% /lib
qa-ops03.mysite.com /dev/mapper/sys-tmp   3.9G  2.3G  1.5G  61% /etc
$ 
```

该脚本分为两部分，由两个`-e`选项标识。第一部分标识服务器名称；这些行不包含空格（因此`/^[^ ]*$/`查找没有空格的行），并将该行复制到保留空间（`h`），然后将其删除（`d`）并继续下一行。脚本的第二部分仅在包含空格的行上执行。它将保持空间的内容附加到换行符 ( `G`) 之后的模式空间；然后它将该行拆分为“直到换行符的所有内容”和“换行符之后的所有内容”，并切换它们以使“之后”（`\2`）首先出现，然后是空格，然后是“之前”（`\1`）。

这使用了经典的`sed`正则表达式；`sed`它在带有 BSD和 GNU的 Mac OS X (10.7.5) 上进行了测试，`sed`没有改变。GNU`sed`有一些选项，例如`-r`更改正则表达式的解释，这将为您节省一些反斜杠。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:49:46.863

这可能对您有用（GNU sed）：

```
sed -r '1{h;d};G;s/(.*)\n(.*)/\2 \1/' file 
```

*   `1{h;d}`将第一行保存在保持空间 (HS) 中，然后删除模式空间 (PS)。
*   `G`在所有后续行中，将换行符和 HS 添加到 PS。
*   `s/(.*)\n(.*)/\2 \1/`重新排列 PS 并删除引入的换行符。

自发布答案以来，原始问题已更改，考虑到这一点：

```
sed -r '/%/!{h;d};G;s/(.*)\n(.*)/\2 \1/' file 
```

这通过在 HS 中保存不包含`%`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:05:36.093

试试这个：

```
awk '!/^\/dev/{header=$0;next} {print header, $0}' input.txt 
```

或者（功能相同，但更容易阅读和理解，IMO）：

```
awk '{if($0 !~ /^\/dev/){header=$0}else{print header, $0}}' input.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T16:08:45.040

```
awk '{if($0~/mysite.com/){x=$0}else{print x,$0}}' your_file 
```

[在这里](http://ideone.com/K0kGSK)测试

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T06:32:30.537

使用 awk 的另一种方法如下：

`awk '{if ($1 ~ /mysite.com/){a= $0 } if ($1 ~ /dev/){ print a" "$0}}' temp.txt`

1.  `a = $0`将该行复制到包含`mysite.com`
2.  如果第二行包含`/dev`，则它连接两行

或 potong sed 的其他变体

`sed -re '/mysite.com/{h;d};G;s/(.*)\n(.*)/\2 \1/' temp.txt`

# javascript - “未为 Select2 未定义错误定义查询函数”

> ID：14483348
> 
> 赞同：121
> 
> 时间：2013-01-23T15:36:25.123
> 
> 标签：javascript, runtime-error, jquery-select2

尝试使用 Select2 并在多个项目输入/文本字段上出现此错误：

```
"query function not defined for Select2 undefined error" 
```

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2013-01-23T15:36:25.123

[涵盖在此 google 组线程中](https://groups.google.com/forum/#!topic/select2/lGNVfAmVIxg)

> 问题是由于 select2 添加了额外的 div。Select2 添加了新的 div 类“select2-container form-select”来包装创建的选择。所以下次我加载函数时，错误被抛出，因为 select2 被附加到 div 元素。我改变了我的选择器...

带有特定标签名称“select”的 select2 css 标识符前缀：

```
$('select.form-select').select2(); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-12-01T12:50:04.487

这个错误信息太笼统了。它的其他可能来源之一是您试图`select2()`在已经“select2ed”输入上调用方法。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-04T11:32:30.220

如果您初始化一个空输入，请执行以下操作：

```
$(".yourelement").select2({
 data: {
  id: "",
  text: ""
 }
}); 
```

阅读下面的第一条评论，它解释了为什么以及何时应该在我的答案中使用代码。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-09-22T12:13:03.597

我也遇到了这个问题，请确保您没有将 select2 初始化两次。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-01-15T16:53:44.787

对我来说，这个问题归结为设置正确的 data-ui-select2 属性：

```
<input type="text" data-ui-select2="select2Options.projectManagers" placeholder="Project Manager" ng-model="selectedProjectManager">

$scope.projectManagers = { 
  data: []  //Must have data property 
}

$scope.selectedProjectManager = {}; 
```

如果我关闭该`data`属性，`$scope.projectManagers`我会收到此错误。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-09-13T16:01:50.427

这个问题归结为我是如何构建我的 select2 选择框的。在一个 javascript 文件中，我有...

```
$(function(){
  $(".select2").select2();
}); 
```

在另一个js文件中覆盖...

```
$(function(){
    var employerStateSelector = 
                $("#registration_employer_state").select2("destroy");
    employerStateSelector.select2({
    placeholder: 'Select a State...'
    });
}); 
```

将第二个覆盖移动到窗口加载事件中解决了这个问题。

```
$( window ).load(function() {
  var employerStateSelector = 
              $("#registration_employer_state").select2("destroy");
  employerStateSelector.select2({
    placeholder: 'Select a State...'
  });
}); 
```

这个问题在 Rails 应用程序中出现

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-09-19T12:32:18.743

我在使用带有文本框的 ajax 时也遇到了同样的错误，然后我通过**删除**文本框的类 select2 并通过 id 设置 select2 来解决它，例如：

```
$(function(){
  $("#input-select2").select2();
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-02-11T15:15:20.600

您的选择器似乎返回了一个未定义的元素（因此`undefined error`返回）

如果元素确实存在，则您在元素上调用 select2`input`而不向 select2 提供任何内容，它应该从中获取数据。通常，一个调用`.select2({data: [{id:"firstid", text:"firsttext"}])`.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-02-22T10:49:46.650

使用ajax时也出现同样的错误。

如果您使用 ajax 通过 select2 呈现表单，则 input_html 类必须不同于未使用 ajax 呈现的那些。不太清楚为什么它会以这种方式工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-03-22T09:47:39.443

```
if (typeof(opts.query) !== "function") {
    throw "query function not defined for Select2 " + opts.element.attr("id");
} 
```

这是因为选项中不存在查询而引发的。内部有一个检查，需要以下参数之一

*   阿贾克斯
*   标签
*   数据
*   询问

因此，您只需向 select2 提供这 4 个选项之一，它应该可以按预期工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-13T16:16:43.063

我得到了同样的错误。我一直在使用 select2-3.5.2

这是我的代码有错误

```
 $('#carstatus-select').select2().val([1,2]) 
```

下面的代码解决了这个问题。

```
 $('#carstatus-select').val([1,2]); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-19T04:39:21.957

我有一个复杂的 Web 应用程序，但我无法弄清楚抛出此错误的确切原因。它导致 JavaScript 在抛出时中止。

在 select2.js 我改变了：

```
 if (typeof(opts.query) !== "function") {
            throw "query function not defined for Select2 " + opts.element.attr("id");
        } 
```

到：

```
 if (typeof(opts.query) !== "function") {
            console.error("query function not defined for Select2 " + opts.element.attr("id"));
        } 
```

现在一切似乎都正常工作，但它仍然登录错误，以防我想尝试找出我的代码中究竟是什么导致了错误。但现在这对我来说已经足够好了。

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2020-03-04T08:59:50.520

采用 ：

```
try {
    $("#input-select2").select2();
}
catch(err) {

} 
```

# c# - Twitter 获取用户时间线

> ID：14483357
> 
> 赞同：2
> 
> 时间：2013-01-23T15:36:47.910
> 
> 标签：c#, widget

目的是输入用户名，然后返回用户的 Twitter 提要，然后将其保存在网站上。

我使用 twitter 帐户在 twitter 上创建了一个小部件，我的想法是复制小部件文本，然后当用户使用他们想要查看的 Twitter 用户名填充表单时，我只需换掉用户名。

但不幸的是，我无法做到这一点，因为生成的 data-widget-id 这似乎是我创建的用户所独有的。

```
 <a class="twitter-timeline" href="https://twitter.com/**USERNAME**" data-widget-id="**WIDGET ID**">Tweets by</a>
            <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script> 
```

关于实现这一点的最佳方法的任何想法我都看过 oauthentication 但我不明白为什么我需要进行身份验证才能查看用户时间线，因为我没有用户登录查看时间线。

# android - Android：按钮放置在edittext上

> ID：14483363
> 
> 赞同：0
> 
> 时间：2013-01-23T15:37:03.990
> 
> 标签：android

我正在尝试创建一个带有 2 个按钮的搜索栏。如下图所示![在此处输入图像描述](../Images/52be2111501d9bb08f21044023f7d38c.png)

这是我的布局文件

```
 <LinearLayout
            android:id="@+id/searchlayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/iconskin"
            android:gravity="right|center_vertical"
            android:orientation="horizontal"
            android:layout_weight="1"
            android:padding="2dp" 
            android:visibility="gone">

            <EditText
                android:id="@+id/searchname"
                style="@style/customsearchfont"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:background="#9fc5f9"
                android:focusable="false"
                android:gravity="left|center_vertical"
                android:hint="@string/searchkeyword"
                android:inputType="textCapSentences"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:singleLine="true"
                android:textColorHint="#FFFFFF" />

             <Button
                android:id="@+id/closesearch"
                android:layout_width="30dp"
                android:layout_height="30dp"
                android:layout_gravity="left"
                android:layout_marginRight="90dp"
                android:visibility="gone"
                android:background="@drawable/closesearch"/>

            <Button
                android:id="@+id/go"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_gravity="center"
                android:background="@drawable/search"/>
        </LinearLayout> 
```

问题是三角形位于中间......它覆盖了搜索名称......我怎样才能实现与图像中的完全相同......任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:39:16.227

在adnroid中已经有searchView了，见：http: [//developer.android.com/reference/android/widget/SearchView.html](http://developer.android.com/reference/android/widget/SearchView.html)

您不必自己重新实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:27:06.830

做类似的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layout_search"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="@drawable/action_bar_background" >

<EditText
    android:id="@+id/search_bar"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:singleLine="true"
    android:inputType="text"
    android:textColorHint="#FFFFFF"
    android:hint="@string/search"
    android:gravity="bottom"
    android:layout_toLeftOf="@+id/search_btn"
    android:layout_toRightOf="@+id/cancel_search_btn" />

<ImageButton
    android:id="@+id/search_btn"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:src="@drawable/ic_action_search"
    android:layout_centerVertical="true"
    android:layout_alignParentRight="true"
    android:background="@drawable/ic_actionbar_drawable_bg"
    android:contentDescription="@string/app_name"
    android:paddingLeft="5dp"
    android:paddingRight="5dp" />

<ImageButton
    android:id="@+id/cancel_search_btn"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_centerVertical="true"
    android:layout_alignParentLeft="true"
    android:contentDescription="@string/app_name"
    android:background="@drawable/ic_actionbar_drawable_bg"
    android:src="@drawable/ic_actionbar_cancel"
    android:paddingLeft="5dp"
    android:paddingRight="5dp" />

</RelativeLayout> 
```

android到layout_search你必须设置一个看起来像editext的背景和你的edittext设置背景android：颜色/透明。这样，您的相对布局将看起来像 editext。

# android - onChildClick 不适用于我的 ExpandableListView

> ID：14483364
> 
> 赞同：1
> 
> 时间：2013-01-23T15:37:05.647
> 
> 标签：android, events, expandablelistview

我不知道为什么`onChildClick`我的见鬼`ExpandableListView`不工作的原因。但是 onGroupClick 可以正常工作。

这就是我所拥有的

```
fileExpandableList.setOnGroupClickListener(this);
            fileExpandableList
                .setOnChildClickListener(new ExpandableListView.OnChildClickListener() {
                @Override
                public boolean onChildClick(ExpandableListView parent,
                        View v, int groupPosition, int childPosition,
                        long id) {
                    System.out.println("Child CLICKED.");
                    return false;
                }

            }); 
```

我见过很多人有这个问题，但没有人有明确的答案。

**添加：**

```
@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
} 
```

列表视图 xml：

```
...
        <ExpandableListView
        android:id="@android:id/list"
        android:drawSelectorOnTop="false"
        android:groupIndicator="@drawable/group_indicator"
        style="@style/allWrapper" >
    </ExpandableListView>
</FrameLayout> 
```

子行xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/expandablelist_childrow"
style="@style/allmenu" >

<com.abc.xyz.android.view.TypeModuleView
    android:id="@+id/expandablelist_childview"
    android:longClickable="true"
    android:onClick="myOnClick"
    style="@style/module" >
</com.abc.xyz.android.view.TypeModuleView> 
```

myOnClick 事件处理程序

```
 public void myOnClick(View view) {
    TypeModule clickedModule = ((TypeModuleView) view).onClick();
    if (clickedModule != null) { // In landscape layout
        moduleContentFragment.setModuleParent(clickedModule);
        moduleContentFragment.changePath("/");
        // Added for module highlighting
        expandableListFragment.setChildrenBackground(view);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-19T11:32:10.467

尝试将 isChildSelectable() 的返回值设为 True

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:40:46.883

onClick 属性（为什么还要放它？）和 onChildClickListener 之间存在冲突。

onClick 捕获 TypeModuleView 上的单击事件。LinearLayout 没有收到它，并且没有点击孩子。

# java - Struts 2，列表中日期的类型转换，非默认格式

> ID：14483369
> 
> 赞同：11
> 
> 时间：2013-01-23T15:37:13.187
> 
> 标签：java, struts2

我有一个动作，该动作具有日期列表属性。请求参数将采用“yyyy.MM.dd”格式。在有“-coversion.properties”文件（我不想为此目的使用全局类型转换器）。

我没有使用注释。

如果它只是一个日期，而不是一个集合，那么特定于属性的转换会很容易。是否可以对 List 的元素应用特定于属性的类型转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T11:39:30.993

我写了一个运行良好的示例代码。其结构如上。 ![在此处输入图像描述](../Images/880e82fa59405a11f8a535ff217ff3e5.png)

起初我写了一个转换器，`/util/MyDateConverter.java`如下所示：

```
package util;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Map;

import com.opensymphony.xwork2.conversion.TypeConversionException;

import ognl.DefaultTypeConverter;

public class MyDateConverter extends DefaultTypeConverter {
@Override
public Object convertValue(Map context, Object object, Class type) {
    if (type == Date.class) {
        String datePattern = "yyyy.MM.dd";
        DateFormat format = new SimpleDateFormat(datePattern);
        format.setLenient(false);
        try {
            String[] dateString = (String[]) object;
            return format.parse(dateString[0]);
        } catch (Exception e) {
            throw new TypeConversionException("Given Date is Invalid");
        }
    }
    return null;
}
} 
```

然后，为了使用 struts2 集合转换支持，我写`/util/MyDate.java`了如下：

```
package util;
import java.io.Serializable;
import java.util.Date;

public class MyDate implements Serializable {

    public MyDate(int myId, Date value) {
        super();
        this.myId = myId;
        this.value = value;
    }

    int myId;
    Date value;

    public Date getValue() {
        return value;
    }

    public void setValue(Date value) {
        this.value = value;
    }

    public int getMyId() {
        return myId;
    }

    public void setMyId(int myId) {
        this.myId = myId;
    }

    @Override
    public String toString() {
        return value.toString();
    }
} 
```

然后我告诉struts2如何支持collection，写法`/action/Action1-conversion.properties`如下：

```
KeyProperty_dates=myId
Element_dates=util.MyDate
CreateIfNull_dates=true 
```

然后告诉他如何`MyDate.value`通过`/util/MyDate-conversion.properties`以下方式转换：

```
value=util.MyDateConverter 
```

然后我准备`/index.jsp`如下：

```
<%@ taglib uri="/struts-tags" prefix="s"%>

<s:form>
    <s:date name="dates(1).value" format="yyyy.MM.dd" id="dateSD1" />
    <s:textfield name="dates(1).value" value="%{dateSD1}" label="New Date 1" />

    <s:date name="dates(2).value" format="yyyy.MM.dd" id="dateSD2" />
    <s:textfield name="dates(2).value" value="%{dateSD2}" label="New Date 2"/>

    <s:submit value="Update" />
    <pre>
    Current Date 1: <s:date name="dates(1).value" />
    Current Date 2: <s:date name="dates(2).value" />
    </pre>
</s:form> 
```

如下`/action/Action1.java`：

```
package action;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import util.MyDate;

import com.opensymphony.xwork2.ActionSupport;

public class Action1 extends ActionSupport {

    public Action1() {
        super();
        dates.add(new MyDate(1, new Date()));
        dates.add(new MyDate(2, new Date()));
    }

    public String execute() {
        return SUCCESS;
    }

    List<MyDate> dates = new ArrayList<MyDate>();

    public void setDates(List<MyDate> dates) {
        this.dates = dates;
    }

    public List<MyDate> getDates() {
        return dates;
    }
} 
```

运行应用程序后，该`Update`按钮按预期运行良好，这表明转换运行良好。

我希望这个示例代码可以帮助你。

参考：[Apache Struts2 类型转换](http://struts.apache.org/release/2.3.x/docs/type-conversion.html#TypeConversion-ApplyingaTypeConvertertoabeanormodel)

# java - 停止/停用当前 OSGi 包

> ID：14483370
> 
> 赞同：0
> 
> 时间：2013-01-23T15:37:15.023
> 
> 标签：java, osgi

如果在其激活方法中引发特定异常，如何停用当前捆绑包？

```
 public void activate(BundleContext bundleContext) {
        try{
             if(something) throw new Exception(); 
        } catch(Exception e) {
             //deactivate bundle... 
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:24:10.140

我假设您正在谈论声明式服务组件，在这种情况下，您可以让 activate 方法引发异常（也许将其包装在运行时异常中），在这种情况下，组件将不会被激活。

不过，您应该意识到 DS 运行时可能会多次尝试激活它。

[这里](https://stackoverflow.com/questions/10897947/how-do-i-fail-in-my-declarative-services-activator)有一个非常相似的问题

# css - 继承的行高的错误渲染

> ID：14483372
> 
> 赞同：2
> 
> 时间：2013-01-23T15:37:20.430
> 
> 标签：css

我已将 SPAN 包装到另一个 SPAN 中：

```
<span id="outer">
  <span id="inner">
    Some long text
  </span>
</span> 
```

和 CSS：

```
#outer {
    font-size: 20px;
    font-family: 'Times New Roman';
    line-height: 30px;
}

#inner {
    font-family: 'Times New Roman';
} 
```

此变体在 Opera、Safari、Chrome、FF 中呈现完全相同。文本以 30px 行高准确呈现。

如果外部 SPAN 设置了另一个字体系列，例如 Arial：

```
#outer {
    font-size: 20px;
    font-family: 'Arial';
    line-height: 30px;
} 
```

*   Crome 和 Safari 将文本呈现为 31px 行高。
*   FF - 30.5px 行高
*   Opera - 30px（如预期的那样）

为什么会发生这种情况？

注意：此标记和样式由用户在所见即所得编辑器中创建。

*   [JSFiddle - 正确的渲染](http://jsfiddle.net/hFd63/)
*   [JSFiddle - 错误的渲染](http://jsfiddle.net/BbZLh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:20:22.857

如果您查看下图，您会注意到两种字体具有不同的基线高度。Times New Roman 似乎比 Arial 短约 2px。

我不是字体渲染引擎方面的专家，但我对正在发生的事情的最佳猜测是，应用于#outer 的 1-2px 额外像素是由 Arial 高 2px 引起的。

即使#inner 中的字体是Times New Roman，渲染仍然对外部div 有影响，因为它被设置为Arial。

希望这能让您了解线高中的其他像素在哪里。

![行高比较](../Images/8ffd987654af68b0947546d9a03c66ba.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:16:47.697

应用的`line-height`值是声明的值，正如您在浏览器中使用开发者工具所看到的那样。其余的是渲染差异，这些差异可能与继承无关，并且可能无法由作者控制。

# java - 无法使用 \\ 在 Java 中转义 \\

> ID：14483375
> 
> 赞同：0
> 
> 时间：2013-01-23T15:37:32.980
> 
> 标签：java, backslash

我有一个字符串。

```
String invalid = "backslash escaping as <>:;%+\/"." 
```

我收到一条错误消息，告诉我添加`\`以转义序列。当我尝试用 Java 编写此代码时，我知道反斜杠需要转义为`\\`. 所以我把它写成：

```
String invalid = "backslash escaping as <>:;%+\\/\"." 
```

现在这显示为`backslash escaping as <>:;%+\\/".`

反斜杠没有转义。如何只得到一个反斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:48:27.527

我没有发现你的修改有问题。这按预期运行：

```
 String invalid = "backslash escaping as <>:;%+\\/\".";
    System.out.println(invalid);

    output:
    backslash escaping as <>:;%+\/". 
```

在您的第一个示例中，您有一个小问题：

```
\/". 
```

我认为应该是这样的：

```
/\". 
```

因为在第一种方式中，您要先关闭字符串。该部分`."`不在字符串中。

**编辑：** 尝试将输出写入文件或 JTextField 或其他东西，看看会发生什么，你的字符串是正确的，如果你将输出与我的输出进行比较，它是相同的。这可能是您的调试器的问题（很奇怪，但可能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:28:02.080

您帖子中的第二个字符串已正确显示。您观察输出的方式一定有问题。

尝试最简单的方法：

*   创建一个名为的文件`Escape.java`并将此代码写入其内容中：

    ```
    public class Escape {

        public static void main(String... args) {
            String s = "backslash escaping as <>:;%+\\/\".";
            System.out.println(s);
        }
    } 
    ```

*   打开您的操作系统提供的任何命令行，然后转到包含所述源文件的文件夹。

*   编译源文件：

    ```
    javac Escape.java 
    ```

*   并运行类文件：

    ```
    java -cp . Escape 
    ```

*   它应该给出这个输出：

    ```
    backslash escaping as <>:;%+\/". 
    ```

*   ...这正是你想要的，我相信。

# c# - 在不中断计时器的情况下暂停程序c#

> ID：14483377
> 
> 赞同：1
> 
> 时间：2013-01-23T15:37:42.167
> 
> 标签：c#, timer, pausing-execution

我正在编写一个程序，该程序有几个“工人”对象启动并执行需要设定时间的任务。我创建了一个带有工作正常的内部计时器的工人类。然而，在做“工作”时，我有时需要等待几秒钟来刷新屏幕（每个工作人员都在从远程屏幕上抓取数据并进行一些自动化操作）。

对于那些暂停，我不想让线程休眠，因为据我了解，这也会暂停其他工作对象上的计时器（我的应用程序是单线程，因为坦率地说，我是 C# 的新手，而且我不想超越）。是否有另一个我可以使用的等待功能实际上不会挂起整个线程？

一些附加信息：

*   现在这是一个控制台应用程序，但我最终将构建一个 UI 表单，向用户提供有关工人工作情况的反馈
*   我的计时器是使用 System.Timers 实现的，并且工作得很好
*   我是 C# 编程的新手，这是我的第一个项目，所以请用小词;)
*   使用 MS VS Express 2012 for Desktop（所以无论是什么版本的 C#/.NET！）

下面的代码（实际工作将使用“startWorking”方法完成，但没有实现任何东西 - 这只是我出售的带有计时器的构建。此外，主要现在只是用于测试多个计时器）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Timers;

namespace Multi_Timers
{
//worker class that includes a timer
public class Worker
{
    private Timer taskTimer;
    private bool available = true;
    private string workerName;
    private string startWork;
    private int workTime;

    // properties
    public bool isAvailable { get { return this.available; } }
    public string name { get { return this.workerName; } }

    // constructor
    public Worker(string name)
    {
        this.workerName = name;
        Console.WriteLine("{0} is initialized", name);
    }

    // start work timer
    public void startWorking(int duration) {

        if (this.available == true)
        {
            this.available = false;
            this.taskTimer = new Timer();
            this.taskTimer.Interval = duration;
            this.taskTimer.Elapsed += new ElapsedEventHandler(doneWorking);
            this.taskTimer.Enabled = true;
            this.startWork = DateTime.Now.ToString();
            this.workTime = duration / 1000;
        }
        else Console.WriteLine("Sorry, {0} was not available to work", this.workerName);
    }

    // Handler for timer
    public void doneWorking(object sender, ElapsedEventArgs e)
    {
        Console.WriteLine("{0}: {1} / {2} min / {3}", this.workerName, this.startWork, this.workTime/60, e.SignalTime.ToLocalTime());
        this.taskTimer.Enabled = false;

        this.available = true;

    }
}

//main program
class Program
{
    static void Main(string[] args)
    {
        Random r = new Random();

        // initialize worker(s)
        Worker bob = new Worker("Bob");
        Worker bill = new Worker("Bill");
        Worker jim = new Worker("Jim");

        // q to exit
        while (true)
        {
            if (bob.isAvailable) {

                bob.startWorking(r.Next(1 * 60, 150 * 60) * 1000);
            }
            if (bill.isAvailable)
            {
                bill.startWorking(r.Next(1 * 60, 150 * 60) * 1000);
            }
            if (jim.isAvailable)
            {
                jim.startWorking(r.Next(1 * 60, 150 * 60) * 1000);
            }

        }
    }
}
} 
```

感谢您提前提供任何帮助！阅读这个社区的示例绝对是自学一点 C# 入门的关键！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:42:06.183

> 我不想让线程休眠，因为据我所知，这也会暂停其他工作对象上的计时器

这是不正确的；它不会停止计时器。

> 我的应用程序是单线程

不，实际上，它不是。计时器将创建和使用其他线程来实现它们的行为。事件`Elapsed`处理程序将从线程池线程中触发。

* * *

您的代码的一个主要问题是您的`main`方法正在对三个对象执行“busywait”，不断轮询它们询问它们是否完成。这……贵。这基本上就像你是孩子在问，“我们到了吗？” 每秒几百次。如果他们只是坐等你告诉他们你已经完成了，那不是更好吗！（这是很有可能的，也是一个不错的选择。）

在这种情况下，更简单的解决方案之一是在工作程序中执行循环，而不是`Main`. 将实现`startWorking`包装在一个`while`循环中，并让 main 永远等待（即`Thread.Sleep(Timeout.Infinite);`）。更复杂的选择是让工作人员提供一个`Task`、事件或阻塞等待（也称为“加入”）方法来指示他们何时完成。

您正在考虑的选项，即添加`Thread.Sleep`一点时间`Main`会*有所帮助*，但这只是告诉您的孩子在您较少的时候问您，而不是让他们等您告诉他们您什么时候那里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T16:07:15.880

如果您发现自己想在不同的上下文中再次延迟执行，您可以考虑这样的实现：

```
private static void DelayExecution(Action action, TimeSpan delay)
{
    TimeSpan start = DateTime.Now.TimeOfDay;
    Thread t = new Thread(() =>
    {
        while (DateTime.Now.TimeOfDay < start.Add(delay))
        {
            //Block
        }
        action.Invoke();
    });
    t.Start();
}

private static void Main(string[] args)
{
    DelayExecution(() => Console.WriteLine("Delayed Execution"), TimeSpan.FromSeconds(1));
    Console.ReadLine();
} 
```

# perl - Perl：内存不足

> ID：14483378
> 
> 赞同：0
> 
> 时间：2013-01-23T15:37:43.577
> 
> 标签：perl

我从数据库中接收到大约 7000 个对象，并将每个项目写入 JSON 文件。大约 2000 个对象后，perl 以`Out of memory`错误终止。一开始，所有数据库对象都被接收，显然它们完全适合内存。错误发生在循环期间。

我对 perl 很陌生，我不知道为什么会这样。从我的角度来看，循环中没有内存分配在每次迭代后都无法释放。

这是我的代码：

```
use lib '../AcePerl/blib/lib','../AcePerl/blib/arch';
use Ace;
use JSON;
use Data::Structure::Util qw( unbless );
use List::MoreUtils;
use strict vars;

use constant HOST => $ENV{ACEDB_HOST} || 'mining.wormbase.org';
use constant PORT => $ENV{ACEDB_PORT} || 2005;

$|=1;

my $json = JSON->new->allow_nonref;

print "Opening the database....";
my $db = Ace->connect(-host=>HOST,-port=>PORT
              -cache => {
                         cache_root         => '/usr/tmp/acedb',
                         cache_depth        => 4,
                         default_expires_in => '1 week'
                         }
) || die "Connection failure: ",Ace->error;
print "done.\n";

#my @anatomies = $db->list('Anatomy_Term','WBbt:000547*');
my @anatomies = $db->fetch(-name    => '*',
                           -class   => 'Anatomy_Term',
                           -fill    => true,
#                           -count   => 10
                          );

#my @anatomies = $db->list('Anatomy_Term','*');

print scalar(@anatomies), " anatomy terms found!\n";

my $i = 0;
my $c;

sub wbstr {
  my $arg = $_[0];
  if(!defined $arg) {
    return undef;
  }else{
    return $arg->name;}
}

# parse anatomy terms for cells
my %anatomy_data;

open (MYFILE, '>anatomy-data2.txt');
print MYFILE '{';

my $parent;
my $first;
my $ancestor;
my $expr_ancestor;
my $is_a;

foreach $c (@anatomies) {
  if($i!=0) {
    print MYFILE ',';
  }

  $i++;
  print MYFILE $json->encode(wbstr($c)), ':{';

  print MYFILE '"term":', $json->encode(wbstr($c->Term)), ',';
  print MYFILE '"definition":', $json->encode(wbstr($c->Definition)), ',';
  print MYFILE '"synonym":', $json->encode(wbstr($c->Synonym)), ',';

  print MYFILE '"parents":[';
  $first = true;
  foreach $parent ($c->CELL_p) {
    if($first eq false) {
      print MYFILE ',';
    }
    print MYFILE $json->encode(wbstr($parent));
    $first = false;
  }
  print MYFILE '],';

  print MYFILE '"ancestors":[';
  $first = true;
  foreach $ancestor ($c->Ancestor) {
    if($first eq false) {
      print MYFILE ',';
    }
    print MYFILE $json->encode(wbstr($ancestor));
    $first = false;
  }
  print MYFILE '],';

  print MYFILE '"expr_ancestors":[';
  $first = true;
  foreach $expr_ancestor ($c->Expr_ancestor) {
    if($first eq false) {
      print MYFILE ',';
    }
    print MYFILE $json->encode(wbstr($expr_ancestor));
    $first = false;
  }
  print MYFILE '],';

  print MYFILE '"is_a":[';
  $first = true;
  foreach $is_a ($c->IS_A_p) {
    if($first eq false) { 
      print MYFILE ',';
    }
    print MYFILE $json->encode(wbstr($is_a));
    $first = false;
  }
  print MYFILE ']}';
}
print MYFILE '}';

print "Done\n";

close (MYFILE); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T16:05:04.190

尝试刷新您的文件（或在您的打印 MYFILE 语句中的某个位置插入“\n”）。[这个 SO question](https://stackoverflow.com/questions/4538767/how-flush-file-in-perl)可以帮助你

# c# - 使用 .NET 访问 Google Chrome 检查元素

> ID：14483379
> 
> 赞同：4
> 
> 时间：2013-01-23T15:37:47.777
> 
> 标签：c#, .net, google-chrome

我有一个问题，我找不到解决方案。我的任务是访问 Google Chrome Inspect Element 提供的文本。例如 - 如果给我一个网页“http://stackoverflow.com”，那么我应该得到位于检查元素中的文本（右键单击->检查元素）。有谁知道如何在.NET 中做到这一点？

PS我有一个替代解决方案，但我想最大限度地提高这项任务的有效性。我当前的解决方案是让 .NET 以编程方式打开 Google Chrome，然后使用键盘快捷键访问 Inspect Element 文本。但我想在后台执行此操作（程序在我做其他事情时做所有事情）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:50:56.817

您要下载页面源吗？因为这基本上就是检查元素的作用。如果我错了，请告诉我。

```
string remoteUri = "http://www.contoso.com/library/homepage/images/";
            string fileName = "ms-banner.gif", myStringWebResource = null;
            // Create a new WebClient instance.
            WebClient myWebClient = new WebClient();
            // Concatenate the domain with the Web resource filename.
            myStringWebResource = remoteUri + fileName;
            Console.WriteLine("Downloading File \"{0}\" from \"{1}\" .......\n\n", fileName, myStringWebResource);
            // Download the Web resource and save it into the current filesystem folder.
            myWebClient.DownloadFile(myStringWebResource,fileName);     
            Console.WriteLine("Successfully Downloaded File \"{0}\" from \"{1}\"", fileName, myStringWebResource);
            Console.WriteLine("\nDownloaded file saved in the following file system folder:\n\t" + Application.StartupPath); 
```

不是我的代码，它来自[http://msdn.microsoft.com/en-us/library/ez801hhe.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)。

然后你可以使用任何函数来读取文件并使用源。

# c# - 为 DropDownList ASP 和 C# 传递动态选择

> ID：14483384
> 
> 赞同：0
> 
> 时间：2013-01-23T15:38:05.697
> 
> 标签：c#, asp.net, dynamic, drop-down-menu

我有一个中继器，它将发布一个用户名、他们的权限级别和一个删除按钮。权限级别假设位于下拉列表中。默认值假设是用户当前拥有的值。

IE

用户 A，访客

用户 B，组成员

用户 C，组管理员

更改这些最终将触发 sql 命令以在数据库中更改它们。但这不是问题，我知道该怎么做。

这些值来自转发器源。

ASP 代码：

```
 <asp:SqlDataSource ID="User_Repeater_Source" runat="server" ConnectionString="<%$ ConnectionStrings:app_migrationConnectionString  %>"
    SelectCommand="SELECT Membership.*, Users.Email, Users.Last_Name + ', ' + Users.First_Name + ' (' + Membership.User_ID + ')' as User_String FROM Membership INNER JOIN Users ON Users.User_ID = Membership.User_ID INNER JOIN Permission_Levels ON Permission_Levels.PID = Membership.PID WHERE GID = @GID">
    <SelectParameters>
      <asp:ControlParameter ControlID="Group" DefaultValue="-1" Name="GID" PropertyName="SelectedValue"
        Type="String" />
    </SelectParameters>
  </asp:SqlDataSource>
  <asp:SqlDataSource ID="User_PL_Source" runat="server" ConnectionString="<%$ ConnectionStrings:app_migrationConnectionString  %>"
    SelectCommand="SELECT * FROM Permission_Levels"></asp:SqlDataSource> 
```

...

```
 <td>
    <div class="e_Title">
      Edit Group Permission:</div>
    <br />
    <asp:Repeater ID="User_Repeater" runat="server" DataSourceID="User_Repeater_Source">
      <HeaderTemplate>
        <table class="e_Repeater">
          <tr>
            <th>
              User:
            </th>
            <th>
              Permission Level:
            </th>
            <th>
              Remove User:
            </th>
          </tr>
      </HeaderTemplate>
      <ItemTemplate>
        <tr>
          <td>
            <a href='<%#"mailto:" + DataBinder.Eval(Container.DataItem, "Email") %>'>
              <%#DataBinder.Eval(Container.DataItem, "User_String" %></a>
          </td>
          <td>
            <asp:DropDownList ID="User_PL" runat="server" DataSourceID="User_PL_Source" DataTextField="Name"
              DataValueField="PID" AutoPostBack="true">
            </asp:DropDownList>
          </td>
          <td>
            <asp:Button ID="Submit_User_Remove" runat="server" Text="Remove Permission" OnCommand="Remove_User_Permission"
              CommandArgument='<%# Eval("AID")%>' />
          </td>
        </tr>
      </ItemTemplate>
      <FooterTemplate>
        </table>
      </FooterTemplate>
    </asp:Repeater>
  </td> 
```

我希望将 PID 传递到下拉列表中并使其成为选定的选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:53:15.243

首先，我相信您并不打算将这个 asp-classic 标记为 asp.net。没什么大不了的。

我建议使用`OnItemDataBound`. 像这样让你开始的东西：

```
protected void User_Repeater_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
    RepeaterItem item = (RepeaterItem)e.Item;
    if (item.ItemType == ListItemType.AlternatingItem || item.ItemType == ListItemType.Item)
    {
        DropDownList User_PL = (DropDownList)item.FindControl("User_PL");
        ... Set your value here -- consider adding a hidden element with the value you're trying to set it to and get the value the same was as we got the DropDownList
    }
} 
```

或者，我相信您可以使用标记绑定到控件本身：

```
SelectedValue='<%# Eval("PID") %>' 
```

祝你好运。

# html - 在 Outlook 的列标题中右对齐文本

> ID：14483386
> 
> 赞同：0
> 
> 时间：2013-01-23T15:38:10.507
> 
> 标签：html, css, outlook

我正在尝试将 HTML 表中列标题中的文本右对齐，以便发送到 Outlook 的电子邮件。

我尝试：

```
<style>
        TH.right{font-size: 13px; font-family:Arial, Helvetica, sans-serif;padding:5px 6px; text-align:right;margin:0px}
</style>
<th class="right" align="right">My Column Header</th> 
```

它不适用于 Outlook。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:06:47.927

尝试将 CSS 作为内联处理 - 一些电子邮件客户端对此有疑问。在我看来，只为电子邮件客户端和 html 电子邮件做内联 css 是一种很好的做法。

所以改为这样做：

```
<th align="right" style="font-size: 13px; font-family:Arial, Helvetica, sans-serif;padding:5px 6px; text-align:right;margin:0px;">My Column Header</th> 
```

*   未测试。

# android - 如何更改 android 操作栏标题和图标

> ID：14483393
> 
> 赞同：241
> 
> 时间：2013-01-23T15:38:24.290
> 
> 标签：android, android-layout, android-actionbar

我正在尝试在 Android 的 ActionBar 上做一些事情。

我已经在操作栏的右侧添加了新项目。

如何更改操作栏的左侧？我想更改图标和文本，我想在其他屏幕的操作栏中添加一个“返回按钮”

![安卓操作栏](../Images/ce6f6f69b17df788b7399065159b5770.png)

* * *

## 回答 #1

> 赞同：540
> 
> 时间：2013-01-23T15:48:17.277

这很容易实现

如果要在代码中更改它，请调用：

```
setTitle("My new title");
getActionBar().setIcon(R.drawable.my_icon); 
```

并将值设置为您喜欢的任何值。

或者，在 Android 清单 XML 文件中：

```
<activity android:name=".MyActivity" 
       android:icon="@drawable/my_icon" 
       android:label="My new title" /> 
```

要在您的应用程序中启用后退按钮，请使用：

```
 getActionBar().setHomeButtonEnabled(true);
 getActionBar().setDisplayHomeAsUpEnabled(true); 
```

代码应该全部放在您的代码中，`onCreate`以便标签/图标更改对用户透明，但实际上它可以在活动生命周期的任何地方调用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-21T16:55:10.517

要使所有操作栏都可以使用单个图标，您可以在 Android 清单中执行此操作。

```
<application
    android:logo="@drawable/Image">

    ...

</application> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-03-17T07:40:03.580

您只需要添加这 3 行代码。将图标替换为您自己的图标。如果你想生成图标使用[这个](https://romannurik.github.io/AndroidAssetStudio/index.html)

```
getSupportActionBar().setHomeAsUpIndicator(R.drawable.icon_back_arrow);
getActionBar().setHomeButtonEnabled(true);
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-06-25T10:48:02.163

在 Android 5.0 材料设计指南中，不鼓励在 actionBar 中使用图标

要启用它，请添加以下代码

```
getSupportActionBar().setDisplayShowHomeEnabled(true);
getSupportActionBar().setLogo(R.mipmap.ic_launcher);
getSupportActionBar().setDisplayUseLogoEnabled(true); 
```

归功于这篇[文章的作者](https://guides.codepath.com/android/Defining-The-ActionBar)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-04-22T07:46:06.187

如果要更改操作栏标题，只需在 Activity 的 onCreate() 中提供以下 1 行代码

```
getActionBar().setTitle("Test"); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-01-23T15:48:58.000

您可以通过将所需的任何图标添加到各自的可绘制文件夹中来更改图标，然后在 AndroidManifest.xml 文件中更改此行：

```
android:icon="@drawable/ic_launcher" 
```

匹配其中的图标名称。或者将您的图标设置为 ic_launcher，如果它们是相同的图标。至于它所说的，添加或更改与 res/values/strings.xml 文件中匹配的任何字符串。然后，再次在您的 AndroidManifest.xml 文件中，更改此行：

```
android:label="@string/app_name" 
```

到你在他们的任何字符串。您必须为整个应用程序以及您想要的任何活动执行此操作，但行是相同的。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-03-26T14:09:31.347

```
ActionBar actionBar = getSupportActionBar();
actionBar.setTitle(getString(R.string.titolo));
actionBar.setIcon(R.mipmap.ic_launcher);
actionBar.setDisplayShowHomeEnabled(true); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-01-23T15:42:39.690

为此，您可以通过 2 种方式来实现：XML 或 Java。请参阅此处：[如何更改操作栏上的文本](https://stackoverflow.com/questions/3438276/change-title-bar-text-in-android)

所以：

XML:

```
<activity android:name=".Hello_World"
              android:label="This is the Hello World Application">
</activity> 
```

爪哇：

```
public class TitleBar extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

       final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

       setContentView(R.layout.main);

       if ( customTitleSupported ) {
           getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.titlebar);
           }

       final TextView myTitleText = (TextView) findViewById(R.id.myTitle);
       if ( myTitleText != null ) {
           myTitleText.setText("NEW TITLE");

           // user can also set color using "Color" and then "Color value constant"
          // myTitleText.setBackgroundColor(Color.GREEN);
       }
 }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-06-03T14:15:46.163

**对于设置标题**：

```
getActionBar().setTitle("Title"); 
```

**对于设置图标**：

```
getActionBar().setIcon(R.drawable.YOUR_ICON_NAME); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-08-16T20:41:00.080

我在里面使用了以下调用`onNavigationItemSelected`：

```
HomeActivity.this.setTitle(item.getTitle()); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-04-13T14:09:49.157

在您的活动的 onCreate 函数中添加以下代码。

```
setTitle("NewName"); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-04-02T11:02:09.410

转到清单中要更改的特定活动操作栏标题名称并编写 android:label="Title name"

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-09-22T18:27:30.920

这对我有用：

```
getActionBar().setHomeButtonEnabled(true);
getActionBar().setDisplayHomeAsUpEnabled(true);
getActionBar().setHomeAsUpIndicator(R.mipmap.baseline_dehaze_white_24); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-01-23T15:50:25.263

默认情况下，操作栏标题将使用当前活动的标签，但您也可以通过`ActionBar.setTitle()`.

要实现您所说的“返回”（更准确地说是“向上”）按钮功能，请阅读[操作栏开发人员指南](http://developer.android.com/guide/topics/ui/actionbar.html#Home)的“使用应用程序图标进行导航”部分。

最后，要更改图标，指南也涵盖了这一点。简而言之，操作栏将显示`android:icon`清单`application`或`activity`元素中提供的图像（如果有的话）。典型的做法是创建一个名为 的应用程序图标（在您需要的所有各种密度中）`ic_launcher.png`，并将其放置在您的`drawable-*`目录中。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-03-15T18:16:24.317

我收到`non-static method setTitle(CharSequence) cannot be referenced from a static context`错误，因为我`setTitle()`在静态 PlaceholderFragment 类中使用。我通过使用解决了它`getActivity().getActionBar().setTitle("new title");`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-03-27T06:19:01.140

转到**AndroidManifest.xml**文件。找到`<application>`标签在那里你可以看到一个属性

```
android:label="@string/app_name" 
```

现在转到**res > values > strings.xml**

更改

```
<string name="app_name">MainActivity</string> 
```

到

```
<string name="app_name">Your Desired Name</string> 
```

例子

**AndroidManifest.xml**

```
<application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme">
        <activity
            android:name=".MainActivity"
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".SubmitForm">

        </activity>
    </application> 
```

**字符串.xml**

```
<resources>
    <string name="app_name">Your Desired Name</string>
    <string name="action_settings">Settings</string>
</resources> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-01-12T09:31:40.510

您还可以执行以下操作：

```
override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main2)
        setSupportActionBar(toolbar)
        setTitle("Activity 2")
    } 
```

# sql - 获取两个日期时间之间的所有重复行。

> ID：14483396
> 
> 赞同：2
> 
> 时间：2013-01-23T15:38:31.347
> 
> 标签：sql, tsql

我最近在一次采访中被问到以下问题：

返回表中两个不同日期/时间之间的所有重复行。

我最好的猜测是：

```
SELECT *, 
COUNT(LogDate) AS NumOccurrences
FROM LogTable
WHERE LogDate > "SomeDate" 
AND LogDate < "SomeDate"
GROUP BY LogDate
HAVING ( COUNT(LogDate) > 1 ) 
```

我在球场上吗？对正确答案有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:42:32.500

无需在选择中计数（*）（至少不是因为您的问题是制定的）。

选择中的所有字段都必须在 GROUP BY 子句中（当然，您可以在 GROUP BY 中拥有比在 SELECT 中更多的字段）

```
SELECT field1, field2, LogDate
FROM LogTable
WHERE LogDate BETWEEN "SomeDate" AND "SomeOtherDate"
GROUP BY field1, field2, LogDate
HAVING COUNT(*) > 1 
```

# java - 如果外部程序挂起，如何退出进程 (.exec())

> ID：14483397
> 
> 赞同：4
> 
> 时间：2013-01-23T15:38:34.193
> 
> 标签：java, process, runtime.exec, process-exit

让我解释一下我的软件。我的软件所做的只是创建 10 个线程并为每个线程分配多个任务。然后每个线程创建一个运行时进程，该进程将启动一个 cmd 批处理文件，该文件又将启动一个程序，该程序将远程登录到一个设备（我有大约 200 个）以轮询其配置。这是我的流程创建的代码：

```
Process p1 = java.lang.Runtime.getRuntime().exec("cmd /c  start /b /wait " + batchFile); 
int returnVal = p1.waitFor(); 
```

`batchFile`是批处理文件的完整路径。不要误会我的意思，该软件在 100% 的执行情况下都可以正常工作，并且它只在 95% 左右挂起**一次**，所以我正在努力寻找解决方案。为什么它挂起现在不是我的问题，而是以后如何处理挂断..！

现在的问题是我需要等待进程完成，因为我的 telnet 客户端将写入一个文件，我稍后将在线程中读取该文件；因此使用`.waitFor()`. 我的问题是如何让线程了解外部程序挂起？换句话说，我可以给外部程序一些时间限制来完成吗？如果没有，线程会终止进程吗？

我还阅读了有关读取错误和输出流的信息；但是，我认为它不适用于这里，或者是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:56:32.947

> 我还阅读了有关读取错误和输出流的信息；但是，我认为它不适用于这里，或者是吗？

几乎可以肯定是的，它是适用的。尝试使用`ProcessBuilder`代替`Runtime.exec`并在调用之前读取所有输出`waitFor`。例如（省略异常处理，特别是可能在进程实际退出之前`waitFor`抛出）`InterruptedException`

```
 ProcessBuilder pb = new ProcessBuilder(
        "cmd", "/c", "start", "/b", "/wait", batchFile);
    pb.redirectErrorStream(true);
    Process p = pb.start();
    IOUtils.closeQuietly(p.getOutputStream());
    IOUtils.copy(p.getInputStream(), System.out);
    // or alternatively throw away the output using
    // IOUtils.copy(p.getInputStream(), NullOutputStream.NULL_OUTPUT_STREAM);
    IOUtils.closeQuietly(p.getInputStream());
    int returnVal = p.waitFor(); 
```

（IOUtils 和 NullOutputStream 来自[Apache commons-io](http://commons.apache.org/io/)）。

要回答标题中的实际问题，如果您的进程即使在正确读取其输出后仍然挂起，您可能需要使用`p.destroy()`强制终止进程。您可以定义一个计时器任务，例如

```
 public class TimeoutProcessKiller extends TimerTask {
      private Process p;
      public TimeoutProcessKiller(Process p) {
        this.p = p;
      }

      public void run() {
        p.destroy();
      }
    } 
```

然后做

```
 // single shared timer instance
    Timer t = new Timer();

    // for each device
    Process p = pb.start();
    TimerTask killer = new TimeoutProcessKiller(p);
    t.schedule(killer, 30000);
    // ... read output stream as before ...
    int returnVal = p.waitFor();
    killer.cancel(); 
```

如果进程运行超过 30 秒，这将导致进程被杀死（调整`schedule`调用以更改超时）。

# javascript - 从当前 HTML 页面上传图片

> ID：14483399
> 
> 赞同：0
> 
> 时间：2013-01-23T15:38:36.573
> 
> 标签：javascript, html, file-upload, devexpress

我的 HMTL 页面上有一张图片。这是由 DevExpress 库在运行时生成的，并且 src url 指向具有缓存键的 DevExpress 脚本：

```
<img id="Chart_89_IMG" src="/DXB.axd?DXCache=30f02093-de66-4ed6-8557-2382065c701a" /> 
```

我正在尝试在后续表单中将此文件放到服务器上，以便在电子邮件中使用。我试过在我的表单中传递 url，但是当它到达服务器时，我得到一个 404（假设缓存密钥已过期）。

我也尝试过使用`canvas`来获取字节并将其传递给服务器，但是无法将该字节流转换回图像，并且画布不适用于我需要支持的 IE8。

我的最后一个想法是在我的表单中包含一个文件上传输入，并以这种方式将图像传递给服务器。但是，如何从 javascript 中的图像创建文件以用作上传？

任何其他想法也将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:21:55.327

由于这是 DevExpress，我能够将 BinaryStorageMode 更改为会话：

```
settings.BinaryStorageMode = BinaryStorageMode.Session; 
```

然后在我发布表格后，图表的字节可以在会话中访问：

```
byte[] bytes = ((DevExpress.Web.ASPxClasses.BinaryStorageData)HttpContext.Current.Session[sessionKey]).Content; 
```

# java - Spring AbstractExcelView - 动态设置 URL

> ID：14483400
> 
> 赞同：1
> 
> 时间：2013-01-23T15:38:36.970
> 
> 标签：java, spring, excel, apache-poi

`AbstractExcelView`需要一个指向要使用的 Excel 工作簿的 URL（即模板）。

我不想在容器创建时指定这个 URL，而是动态地改变它。我要做的是为多种 Excel 格式重用相同的视图（即一种用于屏幕，一种用于打印）。在请求中，我有一个变量，它根据用户选择确定格式。

如何根据此请求变量动态设置 URL？当我的请求变量是“打印”时，我希望 Excel 模板曾经是“excel/printable”，但是当变量是“屏幕”时，我希望 Excel 模板曾经是“excel/fancy”。仅在所需方法中设置 URL`buildExcelDocument()`是行不通的，因为工作簿已在此处初始化。

我发现可能初始化它的最接近的东西（我寄予厚望）是类方法`getTemplateSource(String url, HttpServletRequest request)...`，但是当我调用它时，当 Excel 文档打开并且它是空的时，我得到一个文件数据错误。

# objective-c - 如何在 NSStatusItem 的自定义 NSView 中重绘图像？

> ID：14483403
> 
> 赞同：0
> 
> 时间：2013-01-23T15:38:46.877
> 
> 标签：objective-c, nsview, nsstatusitem

我在理解如何为 NSMenuItem 连接自定义 NSView 以支持动画和拖放时遇到了一些麻烦。我有以下 NSView 子类来处理大部分工作。当应用程序正确启动时，它会绘制我的图标，但是当我从另一个调用者调用 setIcon 函数时，我无法正确设置要更改的子视图。是否有一些我遗漏的设计元素？

托盘图标视图.m

```
#import "TrayIconView.h"

@implementation TrayIconView
@synthesize statusItem;
static NSImageView *_imageView;

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
      statusItem = nil;
      isMenuVisible = NO;
      _imageView = [[NSImageView alloc] initWithFrame:[self bounds]];
      [self addSubview:_imageView];
    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
  // Draw status bar background, highlighted if menu is showing
  [statusItem drawStatusBarBackgroundInRect:[self bounds]
                              withHighlight:isMenuVisible];
}

- (void)mouseDown:(NSEvent *)event {
  [[self menu] setDelegate:self];
  [statusItem popUpStatusItemMenu:[self menu]];
  [self setNeedsDisplay:YES];
}

- (void)rightMouseDown:(NSEvent *)event {
  // Treat right-click just like left-click
  [self mouseDown:event];
}

- (void)menuWillOpen:(NSMenu *)menu {
  isMenuVisible = YES;
  [self setNeedsDisplay:YES];
}

- (void)menuDidClose:(NSMenu *)menu {
  isMenuVisible = NO;
  [menu setDelegate:nil];
  [self setNeedsDisplay:YES];
}

- (void)setIcon:(NSImage *)icon {
  [_imageView setImage:icon];
} 
```

托盘图标视图.h

```
#import <Cocoa/Cocoa.h>

@interface TrayIconView : NSView

{
  BOOL isMenuVisible;
}

@property (retain, nonatomic) NSStatusItem *statusItem;

- (void)setIcon:(NSImage *)icon;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:44:35.787

这个问题的解决方案实际上不在此处详述的视图中。接口的调用者意外地被双重实例化，从而使对先前创建的 NSView 的引用无效。在纠正了该问题后，该应用程序绘制并运行良好。

关于拖动，我只是实现了一个 NSView 的子类，它实现了 Cocoa 可拖动协议，并将其作为子视图添加到这个父类中。这允许拖动到当前建立的包含菜单栏图标的 NSRect 上。

# ado.net - DataAdapter.SelectCommand 属性需要初始化

> ID：14483404
> 
> 赞同：1
> 
> 时间：2013-01-23T15:38:50.993
> 
> 标签：ado.net

我想将对 DataSet 所做的修改保存到数据库中，但出现此错误：

> DataAdapter.SelectCommand 属性需要初始化

这是我写的代码：

```
dr = dt.NewRow

dr(0) = t1.Text
dr(1) = t2.Text
dr(2) = t3.Text
dr(3) = d1.Value

dt.Rows.Add(dr)

da.InsertCommand = cb.GetInsertCommand()
da.Update(ds, "stagiaire")
MsgBox("ajout effectu!") 
```

> dr 是 DataRow / dt 是 DataTable / da 是 SqlDataAdapter / cb 是 SqlCommandBuilder / ds 是 DataSet

但是当我`da.InsertCommand = cb.GetInsertCommand()`用 :更改这一行时，`cb = New SqlCommandBuilder(da)`它起作用了。

那么为什么我使用的第一个代码不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:56:30.727

要么你这样做

```
 dr = dt.NewRow

 dr(0) = t1.Text
 dr(1) = t2.Text
 dr(2) = t3.Text
 dr(3) = d1.Value

 dt.Rows.Add(dr)
 SqlComand cmd=new SqlCommand("insert query",conn)
 da.InsertCommand = cmd
 da.Update(ds, "stagiaire")
 MsgBox("ajout effectu!") 
```

或者

```
 dr = dt.NewRow

 dr(0) = t1.Text
 dr(1) = t2.Text
 dr(2) = t3.Text
 dr(3) = d1.Value

 dt.Rows.Add(dr)
 SqlCommandBuilder cb=new SqlCommandBuilder (da)
 da.InsertCommand = cb.GetInsertCommand()
 da.Update(ds, "stagiaire")
 MsgBox("ajout effectu!") 
```

# android - Android 编辑 WebView 历史记录

> ID：14483413
> 
> 赞同：2
> 
> 时间：2013-01-23T15:39:05.820
> 
> 标签：android, android-webview, browser-history

我有一个子类`WebView`并用它来访问外部站点。我希望能够有选择地编辑由`WebView`. 我不想简单地清除历史记录，或者只是覆盖导航（`.goBack()`,`.goForward()`等）。

我无法从`WebView`的公共方法中找到任何方法。我错过了什么吗？

顺便说一句，我也有一个子类`WebViewClient`，`WebChromeClient`如果它们有任何用处。

# javascript - 使用 jQuery 包装函数

> ID：14483414
> 
> 赞同：0
> 
> 时间：2013-01-23T15:39:08.177
> 
> 标签：javascript, jquery

我正在尝试用 div 包装输入元素，然后将另一个元素附加到包装 div。

标记：

```
<div>
    <input type="text" id="foo" />
</div> 
```

JS：

```
var wrapper = $('<div class="wrapper"></div>'),
somethingElse = $('<div class="something-else"></div>');

$('#foo').wrap(wrapper);
wrapper.append(somethingElse); 
```

JSFiddle：http: [//jsfiddle.net/ckpeZ/](http://jsfiddle.net/ckpeZ/)

问题是“somethingElse” div 没有附加到包装器中。就像这条线`wrapper.append(somethingElse)`被完全忽略了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:43:15.637

您正在将 ' `somethingElse`' 附加到包装器中，这是一个在您 'wrap' foo 之后不再相关的引用。

这很丑陋，但是可以理解-您应该能够简单地：

```
$('#foo').wrap(wrapper);
$('#foo').parents('.wrapper').append(somethingElse); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:43:29.613

包装器正在被克隆，您需要附加到创建的新元素。

```
var wrapper = $('<div class="wrapper"></div>'),
somethingElse = $('<div class="something-else"></div>');

$('#foo').wrap(wrapper).parent().append(somethingElse);
// or
$('#foo').wrap(wrapper).after(somethingElse); 
```

[http://jsfiddle.net/ckpeZ/4/](http://jsfiddle.net/ckpeZ/4/)

# xmpp - 当我的消息类型为 Message.Type.groupchat 时，消息未发送

> ID：14483417
> 
> 赞同：0
> 
> 时间：2013-01-23T15:39:11.710
> 
> 标签：xmpp, smack

我正在向 jabber 发送消息

```
Message msgMultipleChat = new Message(to);//,Message.Type.chat);

msgMultipleChat.setBody(inputChatText);
msgMultipleChat.setType(Message.Type.groupchat);
msgMultipleChat.setFileType("text");
msgMultipleChat.setFile("");
//msgMultipleChat.setFriendName(userIds);
msgMultipleChat.setFrom(userIds);
msgMultipleChat.setGroupId(mGroupId);
if(BizproConnection.mXMPPConnection.getHost()!=null ) {
    BizproConnection.mXMPPConnection.sendPacket(msgMultipleChat);
} 
```

我无法收到它但是当消息类型是聊天时我能够收到它为什么会这样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:40:45.370

如果 的值`to`不是MUC 的 JID，则消息无效，因为*仅*`Type.Groupchat`在与 MUC 实例通信时有效（[XEP-0045](http://xmpp.org/extensions/xep-0045.html)）。

# alloy - 合金中的传递闭包

> ID：14483418
> 
> 赞同：4
> 
> 时间：2013-01-23T15:39:15.207
> 
> 标签：alloy

任何人都可以在这里解释传递闭包运算符如何根据矩阵在合金中工作。我的意思是将闭包运算符转换为实际矩阵运算的转换规则。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T16:44:30.477

为了计算传递闭包，Kodkod 使用迭代平方。

简而言之，如果您有一个二元关系`r`（直接转换为二维布尔矩阵），则传递闭包`r`可以迭代计算为

*   r [1] = r 或 (r . r)
*   r [2] = r [1]或 (r [1] . r [1] )
*   r [3] = r [1]或 (r [2] . r [2] )
*   ...
*   ^r = r [n] = r [n-1]或 (r [n-1] . r [n-1] )

问题是我们什么时候停止，即应该停止什么`n`。由于一切都是有界的，Kodkod 静态知道 中的最大行数`r`，并且应该直观地清楚，如果`n`设置为该行数，则该算法将产生语义上正确的翻译。然而，即使`n/2`是足够的（因为我们每次都对矩阵进行平方），这是 Kodkod 使用的实际数字。

# php - 均匀地表示组合子集中的所有数字

> ID：14483420
> 
> 赞同：2
> 
> 时间：2013-01-23T15:39:16.723
> 
> 标签：php, math, combinations

我想找出什么是最有效的 PHP 脚本来均匀地表示特定组合子集中的所有数字。

彩票问题示例：

*   创建**10 个**组合，每个组合由**6 个**数字组成
*   从一组数字**（1,2,3,4,5,6,7,8,9,10,11,12）**

我知道从 12 个数字中我可以创建**924**个组合，每个组合由 6 个数字组成。

因为我买不起 924 行 - 我只想选择 10 行，它们均匀地代表我选择的所有数字。

所以在这个例子中，它会是这样的：

*   1-2-3-4-5-6
*   7-8-9-10-11-12

    还有 8 行

我试图避免这样的组合：

*   1-2-3-4-5-6
*   1-2-3-4-5-7
*   1-2-3-4-5-8

...等几乎相同；我想均匀地表示每个数字。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:46:23.283

您可以创建一个您想要使用的号码的“池”，并从该池中随机抽取。例如，如果您想要 10 个组合，每个组合 6 个数字，则总共有 60 个数字。但是您希望 1-12 中的每一个均等表示，因此每个数字将有 5 个。所以从一个包含 1-12 中的 5 个的数组开始，然后从数组中随机抽取每组 6 个。

```
$pool = array();
for($i = 0; $i < 5; $i++)
    for($x = 1; $x <= 12; $x++)
        $pool[] = $x;

$result = array();
for($i = 0; $i < 10; $i++) {
    $set = array();
    for($x = 0; $x < 6; $x++) {
        $key = array_rand($pool);
        $set[] = $pool[$key];
        unset($pool[$key]);
    }
    $result[] = $set;
}

// $result now contains 10 sets of 6 numbers each 
```

演示：http: [//ideone.com/NpO3h4](http://ideone.com/NpO3h4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:54:29.057

```
// 集合中有多少个数字，从 1 开始
$数字 = 12;
$set = 数组（）；
对于 ($i=1;$i>=$numbers;$i++)
{
    array_push($set, $i);
}

// 子集中有多少个数字
$计数 = 6;
$subSet = 数组（）；
而 ($count > 0)
{
    // 获取一个从 1 到集合中的数字的随机数
    $rand=rand(0,$numbers-1);
    array_push($subSet, $set[$rand]);
    $count--;
}

// $subSet 现在包含从 1 到 12 的 6 个随机数的组合
// 保持刷新
var_dump($subSet);

```

你去吧，有解释，这是你想要的吗？

编辑：我刚刚注意到你说“最有效的方法”。这不是最有效的（就使用的内存而言）方式，但它很接近。

# mysql - 具有内部关系的单表 - 插入删除时约束失败

> ID：14483422
> 
> 赞同：0
> 
> 时间：2013-01-23T15:39:34.673
> 
> 标签：mysql, insert, foreign-keys, constraints, relationship

我有一个表“办公室”，其中包含以下字段：

*   id, int(10) 无符号 auto_inc
*   fk_office, int(10) 无符号，可以为 NULL
*   地址
*   网址
*   电子邮件

一个办公室可能依赖于另一个办公室（用于构建依赖关系树），所以我用 phpMyAdmin 建立了与同一个表的外键关系，该表声明：

> **office.fk_office 与 office.id 相关 - ON DELETE SET NULL, ON UPDATE CASCADE**

我认为这意味着当一个办公室被删除时，它的 fk_office 应该设置为 NULL，而不删除它的子办公室，当一个办公室被更新时，它的子办公室也应该这样做，我错了吗？

**现在我的问题是在插入**. 我还有其他表格（电话、小时等）列出了每个办公室和营业时间的电话传真号码。这些表的 FK 指向 office 表（id​​ 字段）

为什么我得到

> 1452 - 无法添加或更新子行：外键约束失败

将新记录插入办公桌时？我应该优化/改变这个设计吗？

谢谢

# javascript - 是否有任何库/jQuery 插件可以从对象创建表单

> ID：14483425
> 
> 赞同：0
> 
> 时间：2013-01-23T15:39:37.863
> 
> 标签：javascript, jquery, redirect, post, serialization

我想使用 Javascript 发送一些 POST 数据（我在 Javascript 对象中），然后显示结果页面。

我的第一个想法是使用 AJAX jQuery`$.post()`方法，因为我可以直接将我的数据对象传递给这个方法。但是`$.post()`只返回结果而不是显示它（并且`$('html').html(result)`似乎有问题 - 再次加载 Javascript 脚本）。

所以我想出了最好的方法是使用`.submit()`. 有谁知道一些将 Javascript 对象序列化为 HTML 形式的库？或者，至少，进入 URI 组件。

一些数组工作和递归会很好，例如：

`{numbers: [5, 72]}`=>`numbers[]=5&numbers[]=72`或

`{user: {id: 5, name: 'Pepa'}}`=>`user[id]=5&user[name]=Pepa`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:44:31.873

您可以在 javascript 中将其编码为 json 并在 PHP 中使用 json_decode 对其进行解码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:51:29.220

我建议您使用带有 Angular.js 或 Knockout.js 的 MVVM 框架。比如在knockout.js中，你可以创建一个模板表单，并在json中发送和接收对象，非常简单！

# javascript - 无法从 Javascript 中的 NodeList 检索子 NodeList

> ID：14483426
> 
> 赞同：0
> 
> 时间：2013-01-23T15:39:40.430
> 
> 标签：javascript, android, xml, cordova

所以这里是交易：我试图从一个已经存在的 NodeList 中检索一个 NodeList 对象。这是一个简化的 XML 示例：

```
<products>
  <category>
  <name>Category A</name>
    <product>
      <code>1</code>
      <name>Product 1 Category A</name>
      <price>10.0</price>
    </product>
    <product>
      <code>2</code>
      <name>Product 2 Category A</name>
      <price>20.0</price>
    </product>
  </category>
  <category>
  <name>Category B</name>
    <product>
      <code>3</code>
      <name>Product 1 Category B</name>
      <price>5.0</price>
    </product>
    ...
  </category>
</products> 
```

如您所见，标签名称出现了两次，一次是类别的子节点，另一次是产品的子节点。我希望只检索产品名称。由于我无法从 XML 文件中读取，而是将其作为字符串接收，所以这是我的解析函数：

```
function parseXML(xmlString) {
    var parser = new DOMParser();
    var xmlDoc = parser.parseFromString(xmlString, "text/xml");
    var products = xmlDoc.getElementsByTagName("product");
    var names = products.tags("name"); //Here's my problem
    for(var i = 0; i < names.length; i++){
        var element = names[i];
        var name = element.firstChild;
        $('#div_products').append(name.data + "<br>");  
    }
    $('#div_main').html($('#div_products').html());
} 
```

这是我用作参考的内容：http: [//help.dottoro.com/ljtrjxbf.php](http://help.dottoro.com/ljtrjxbf.php)。但是，使用 nodeListObject.tags("tag") 会产生以下错误：

```
processMessage failed: Stack: TypeError: Object #<a NodeList> has no method 'tags' 
```

我尝试了不同的方法，但没有任何效果。甚至

```
var names = products["name"]; 
```

返回“未定义”，这在任何情况下都对我不起作用，因为文档说除了 IE 之外，它只会返回第一个节点和 A）我正在使用 Android/Cordova 和 B）没有属性“名称”无论如何都在节点中。

那么我该如何解决呢？我想我可以尝试从产品 NodeList 创建一个新的 XMLDocument 对象，但我没有研究它，因为它必须有一个更简单的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:08:06.253

谢谢Teemu，通过对Javascript代码进行一些调整，我已经成功实现了我想要的。我会把它贴在这里，以便将来有人可能会发现它有帮助：

```
function parseXML(xmlString) {
    var NAME = 5; 
    var parser = new DOMParser();
    var xmlDoc = parser.parseFromString(xmlString, "text/xml");
    var products = xmlDoc.getElementsByTagName("product");

    for(var i = 0; i < products.length; i++){
        var nodeList = produtos[i].childNodes;
        $('#div_products').append(nodeList[NAME].textContent + "<br>");
    }

    $('#div_main').html($('#div_products').html());
} 
```

请注意，5 是我想要的 DOM TextNode 的索引（产品名称本身），因此：

```
var NAME = 5; 
```

这就是全部。

# c# - SOS.dll ObjSize 和 DumpObject 的底层错综复杂。如何在 C# 中重新创建 SOS.dll？

> ID：14483432
> 
> 赞同：1
> 
> 时间：2013-01-23T15:39:57.290
> 
> 标签：c#, memory, reflection, sos

这个问题很大程度上是基于我以前在[此处](https://stackoverflow.com/questions/14322660/using-reflection-to-determine-which-fields-are-backing-fields-of-a-property)找到的帖子。

我正在尝试使用反射重新创建 SOS.dll 的一些功能。特别是`ObjSize`and`DumpObject`命令。我使用反射来查找所有字段，然后如果这些字段是原始类型，我将原始类型的大小添加到对象的整体大小中。如果该字段是一个值类型，那么我递归地调用原始方法并沿着参考树向下走，直到找到所有原始类型字段。

我一直在获得比 SOS.dll ObjSize 命令大两倍左右的对象大小。我发现的一个原因是我的反射代码似乎正在寻找 SOS 忽略的字段。例如在字典中，SOS 查找以下字段：

*   水桶
*   条目
*   数数
*   版本
*   自由清单
*   自由计数
*   比较器
*   钥匙
*   价值观
*   _syncRoot
*   m_siInfo

但是，我的反射代码找到了以上所有内容，并且还发现：

*   版本名称
*   哈希大小名称
*   键值对名称
*   比较器名称

此外，我对 SOS ObjSize 和 DumpObject 命令中发现的不一致感到困惑。我知道 DumpObject 不会查看引用类型的大小。但是，当我在上面提到的字典上调用对象大小时，我得到：

*   字典 - 532B

然后我在 Dictionary 上调用 DumpObject 来获取它的引用类型的内存地址。然后，当我在它的引用类型上调用 Objsize 时，我得到：

*   水桶 - 40
*   条目 - 364
*   比较器 - 12
*   钥匙 - 492
*   （其余为空或原始）

**顶级字典上的 ObjSize 不应该大致是字典内字段上所有 ObjSize 的总和吗？为什么反射会找到更多的 DumpObject 字段？关于为什么我的反射分析返回的数字大于 SOS.dll 的任何想法？**

此外，我在上面链接的主题中提出的一个问题从未得到答案。我在问在评估对象的内存大小时是否应该忽略属性。普遍的共识是忽略它们。但是，我发现了一个很好的示例，说明属性的支持字段何时不会包含在从 Type.GetFields() 返回的集合中。在查看 String 的引擎盖时，您有以下内容：

对象包含名为 FirstChar 的属性 对象包含名为 Chars 的属性 对象包含名为 Length 的属性 对象包含名为 m_stringLength 的字段 对象包含名为 m_firstChar 的字段 对象包含名为 Empty 的字段 对象包含名为 TrimHead 的字段 对象包含名为 TrimTail 的字段 对象包含名为 TrimBoth 的字段 对象包含名为 charPtrAlignConst 的字段对象包含名为 alignConst 的字段，`m_firstChar`并且`m_stringLength`是属性的支持字段，`FirstChar`但`Length`字符串的实际内容保存在 Chars 属性中。这是一个索引属性，可以对其进行索引以返回字符串中的所有字符，但我找不到保存字符串字符的相应字段。

**关于为什么会这样的任何想法？或者如何获取索引属性的支持字段？索引属性是否应该包含在内存大小中？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T18:00:48.023

好吧，您的反射代码已损坏。您提到的 4 个成员（版本名称等）不是字段，它们是私有常量。我猜你正在使用 Type.GetMembers() 而不是 Type.GetFields() 并且没有正确检查返回的 MemberInfo.MemberType 。只需使用 GetFields() 代替。

请注意，您永远无法获得正确大小的托管对象。对象的布局是不可发现的。大小不是字段的总和，字段是*对齐*的。非常类似于 StructLayout.Pack 属性。对齐会在布局中产生漏洞，即所谓的“填充字节”。当类对象存储在数组中时，以及最后的额外填充以使字段对齐。

CLR 实际上利用了布局不可发现这一事实。如果后面的字段适合其他两个字段之间的填充，它将*交换*字段。如果您知道对齐规则，则生成比您得到的更小的对象。试图逆向工程这是一项危险的工作，它还取决于架构（x86 vs x64 vs Arm）。

SOS.dll 没有这个问题，它可以直接访问 CLR 为类维护的内部数据。托管代码的禁区。

# git - 带有代码审查的 git rebase 流程？可能的？

> ID：14483437
> 
> 赞同：5
> 
> 时间：2013-01-23T15:40:19.993
> 
> 标签：git

是的，另一个 git flow 问题.. :(

我非常了解“标准” git rebase 流程：

*   开发人员从上游分支（例如“master”）创建跟踪分支（例如“featureA”）
*   开发人员代码、提交、rebase 拉取、代码、提交、rebase 拉取等
*   代码完成，开发者压缩提交并推送到 master

我遇到的问题是，**在与 master 合并之前，这没有给代码审查留下空间**。审阅者只有在 master 上才能看到更改，因此如果开发人员需要调整任何内容，则 master 上将针对给定功能进行多次提交。理想情况下只有一个。

我知道有几个选项可以解决这个问题，但并不理想：

*   让开发人员将功能分支推送到远程。这样做的问题是，在他们从 master 重新定位后，推送必须是强制推送，虽然在*这种*情况下可能是安全的，但我不想像往常一样做生意。
*   不要将上游更改重新定位到功能分支，合并它们。有了这个，我无法压缩功能分支并将提交推回主控（对吗？？）
*   使用 gerrit/github。我不得不猜测有一种方法可以在纯 git 中实现这一点吗？

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:18:08.840

有一些第三方工具允许更复杂的审查工作流程。我们目前正在评估基于[Gerrit](http://code.google.com/p/gerrit/)的工作流程。

一种可能的 Gerrit 工作流程如下所示：

*   开发人员提交到功能分支。完成后，他压缩特性分支并将其重新定位到当前主控上。
*   代码审查软件禁止直接推送到主分支，因此开发人员然后将功能（压缩到一次提交）推送到审查系统中，以便对其进行审查。Gerrit 透明地将每个审查请求作为一个单独的分支处理，当审查完成时，该分支被合并（也可以选择樱桃，但不是默认的）。
*   如果更改*没有*通过代码审查，开发人员可以修改提交并将提交重新推送到审查系统。该软件会识别多个（修改过的）提交是否属于同一个功能审查请求。当审查最终完成时，只有最新的提交被合并到实际的主分支中。
    当然，由于每个功能都只是一次提交，因此无法跟踪开发人员在代码审查期间执行的调整（但是，据我了解，这实际上是需要的）。但是，每个审查请求的历史记录都由 Gerrit 管理，因此不会丢失任何内容。

我们自己仍在评估与此类似的工作流程，但尚未在生产中使用它。因此，我无法就这种方法在现实世界场景中的实际效果发表任何声明。然而，我的观点是，如果您对使用 Git 进行更复杂的审查工作流程感兴趣，Gerrit 可能值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:15:06.897

这个工作流程的最大问题是必须压缩到一个提交。这是 Gerrit 的局限性。CodeCollaborator 解决了这个问题并允许多次提交，这是我们更喜欢的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T14:56:02.353

今天有很多支持`rebase`++的拉取请求工具`merge`：`--ff-only`

*   [https://confluence.atlassian.com/bitbucketserver/pull-request-merge-strategies-844499235.html](https://confluence.atlassian.com/bitbucketserver/pull-request-merge-strategies-844499235.html)
*   [https://devblogs.microsoft.com/devops/pull-requests-with-rebase/](https://devblogs.microsoft.com/devops/pull-requests-with-rebase/)
*   [https://help.github.com/en/articles/about-pull-request-merges](https://help.github.com/en/articles/about-pull-request-merges)

# c# - Metro 应用程序中的 Unity 容器

> ID：14483438
> 
> 赞同：1
> 
> 时间：2013-01-23T15:40:22.470
> 
> 标签：c#, windows-runtime, unity-container, winrt-xaml, windows-store-apps

我正在为 Microsoft 平板电脑构建一个复合应用程序。我想知道是否可以在 Metro 应用程序中使用 UNITY 容器？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:45:31.660

Unity 3.0 for Windows RT 预览版可用。 [http://unity.codeplex.com/](http://unity.codeplex.com/)

# javascript - 如何将值从客户端发送到服务器端以进行服务器端处理

> ID：14483440
> 
> 赞同：3
> 
> 时间：2013-01-23T15:40:28.967
> 
> 标签：javascript, jquery, c#-4.0, post, request

我正在尝试使用 javascript 或 JQuery 从客户端发送一个值到服务器（理想情况下发送到我的代码隐藏中的方法）。我正在使用 C# .net 4.0。

在我的客户端 JQuery 中，我有：

```
 $.post("test.aspx/testMethod",
        {
            name: "Donald Duck",
            city: "Duckburg"
        }
    ); 
```

在我的服务器端（test.aspx.cs）方法中，我有

```
 public void testMethod()
{
    string name = Request.Form("name");
    string city = Request.Form("city");
} 
```

但是这样我得到一个编译错误：“不可调用的成员'System.Web.HttpRequest.Form'不能像方法一样使用。”

我该如何纠正这个问题？还是达到相同的目标？使用 $.ajax({...}) 不是一个选项，因为非静态方法需要该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-24T20:57:24.213

对此有一个非常简单的答案。在搜索了几十个相同的问题以及许多人提供过于复杂的 ajax 回发解决方案之后，我想出了这个。基本上是一个班轮。希望它可以帮助某人：

在您的 javascript 中，您只需调用该方法：

```
PageMethods.SomeMethod('test'); 
```

您的“SomeMethod”将是这样的方法背后的代码：

```
[WebMethod]
    public static string SomeMethod(string param1)
    {
        string result = "The test worked!";
        return result;
    } 
```

规则：您必须使用 WebMethod 属性标识方法背后的代码。它必须是静态的。您必须在您的页面中注册一个脚本管理器，如下所示：

```
<asp:ScriptManager ID="MyScriptManager" runat="server" EnablePageMethods="true" /> 
```

由于我正在使用 aspx webforms 页面来执行一些非常简单的 javascript 功能，例如检索/存储地理位置，因此我根据需要将其放在 Form 元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:08:31.883

上面的代码的工作原理是它将一个值从客户端 javascript 传递到服务器端代码隐藏，但由于您丢失了它而无法使用该值。

需要对上述代码进行以下修改才能使用该值（本质上将其存储在单独的静态类中，直到需要）。

C# Default.aspx.cs（Default.aspx 后面的代码）

```
protected void Page_Load(object sender, EventArgs e)
{
    getText();
}

public void getText()
{
    if (HttpContext.Current.Request.Form.Keys.Count > 0)
    {   
        // Reset staticValue
        Class1.staticValue = "";

        Class1.staticValue = HttpContext.Current.Request.Form["MyString"];
    // Call Class1.staticValue anywhere else and you get expected answer= "fname=Henry"

    }
} 
```

STATIC CLASS (App_Code/Class1.cs) - 另一个存储值的对象（否则 HttpContext 对象会将其从任何东西中删除）

```
public class Class1
{
    private static string myValue = "";
    public Class1()
    {
            //
        // TODO: Add constructor logic here
        //
    }

    public static string staticValue
    {
        get
        {
            return myValue;
        }

        set
        {
            myValue = value;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:10:24.793

找到解决方案...（希望有人觉得它有用）

JAVA脚本

```
function myFunction() {

    var str= "fname=Henry&lname=Ford"; 
    log("MyString=" + str);
}

function log(message) {
    var client = new XMLHttpRequest();
    client.open("POST", "Default.aspx", true);  // Default.aspx being the page being posted to
    client.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    client.send(message);
} 
```

C# Default.aspx.cs（Default.aspx 后面的代码）

```
protected void Page_Load(object sender, EventArgs e)
{
    getText();
}

public void getText()
{
    if (HttpContext.Current.Request.Form.Keys.Count > 0)
    {
        string code = HttpContext.Current.Request.Form["MyString"];
    // code = "fname=Henry"
    // For looping etc, see below
    }
} 
```

你还能得到什么......

```
HttpContext.Current.Request.Form.Count       // 2
HttpContext.Current.Request.Form.Keys.Count  // 2

HttpContext.Current.Request.Form.AllKeys[0]  // "MyString"
HttpContext.Current.Request.Form.Keys[0]     // "MyString"
HttpContext.Current.Request.Form.AllKeys[1]  // "lname"
HttpContext.Current.Request.Form.Keys[1]     // "lname"

HttpContext.Current.Request.Form[0]      // "fname=Henry"
HttpContext.Current.Request.Form[1]      // "Ford" 
```

循环键...

```
foreach (string key in Request.Form.Keys) 
  {
    DoSomething(Request.Form[key]);
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T06:13:21.360

我不知道 Web 表单是否支持这种类型的 JSON 请求。我很久以前就尝试过，但那时我必须添加 asmx 文件。目前你有 WCF，但是如果你不想改变你的 webforms 项目并且仍然想要 restful api，那么合并 MVC 项目来完成你的 restful 任务。你不必改变一切，但它可以协同工作。[这里](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)是怎么解释的？

我不知道最新版本的 Web 窗体，但在 VS2012 之前，您不能对页面进行 ajax 类型调用。我所知道的。

如果需要任何进一步的细节，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T15:42:43.250

你可以这样使用 - [https://rvieiraweb.wordpress.com/2013/01/21/sumption-webservice-net-json-using-jquery/](https://rvieiraweb.wordpress.com/2013/01/21/consuming-webservice-net-json-using-jquery/)

试试看 ：）

# c# - 在提交之前验证 MVC4 项目中的表单

> ID：14483443
> 
> 赞同：2
> 
> 时间：2013-01-23T15:40:33.287
> 
> 标签：c#, asp.net-mvc-4, unobtrusive-validation, client-side-validation

想要在表单上进行验证，以便在单击提交按钮之前和之后都可以工作。

目前，表单的服务器端验证工作正常，这使用模型中的数据注释和不显眼的 jquery 验证的组合，在页面顶部给出错误消息并突出显示在某些表单中不正确的控件。

我现在需要得到它，以便在用户有机会提交不正确/不完整的表单之前在表单中输入值时显示类似的验证。

我查看了许多实现此类验证的包，但所有包都是针对 MVC 3（我查看的最后一个是 DataAnnotationsExtensions.ClientValidation 现在是 DataAnnotationsExtensions.MVC3）而不是正在开发项目的 MVC 4。

任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:20:07.700

```
public class BundleConfig
{
            // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/all").Include(
            "~/Scripts/modernizr-*",
             "~/Scripts/jquery-ui-{version}.js",
            "~/Scripts/jquery.unobtrusive*",        
            "~/Scripts/jquery-{version}.js",
            "~/Scripts/jquery.validate*",
            "~/Scripts/custom-ie-enhancements.js"));

        BundleTable.EnableOptimizations = true;
    }
} 
```

}

# javascript - 更改 onclick 方法以点击 ipad

> ID：14483446
> 
> 赞同：0
> 
> 时间：2013-01-23T15:40:41.460
> 
> 标签：javascript, jquery, ipad, mobile

***例如。***

```
<video class="vid" id='video'  height="300" width="500" onclick="vidplay()">

var video = document.getElementById('video');
video.addEventListener('click',function(){
video.play();
},false); 
```

这工作正常，允许在桌面上播放 HTML5 视频。但是它；在 ipad 中不起作用。我假设这是`onclick`方法；我假设我需要将其转换为`tap`...但是如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:06:25.910

你需要`element.addEventListener`看看这个[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

你有，“touchstart”，“touchend”，“touchmove”

所以让我们说

`function doSomething(){ alert("works"); }`

`element.addEventListener("touchstart", doSomething, false);`

# asp.net - 在 ASP.Net DetailsView 和 GridView 上设置 Checkbox ItemStyle ForeColor

> ID：14483447
> 
> 赞同：0
> 
> 时间：2013-01-23T15:40:41.610
> 
> 标签：asp.net, gridview, checkbox, detailsview, foreground

在 ASP.Net DetailsView 和 GridView 上，我注意到 CheckBoxes 中的刻度线是浅灰色（禁用）颜色，即使我将其设置为蓝色。

```
<asp:CheckBoxField DataField="DayOfWeekMonday" HeaderText="Monday:" SortExpression="DayOfWeekMonday">
    <ItemStyle ForeColor="Blue" />
</asp:CheckBoxField> 
```

当 CheckBox 是 TemplateField 时，也会发生同样的事情。

```
<asp:TemplateField HeaderText="Monday:" SortExpression="DayOfWeekMonday">
    <EditItemTemplate>
        <asp:CheckBox ID="CheckBoxEditDayOfWeekMonday" runat="server" Checked='<%# Bind("DayOfWeekMonday") %>' />
    </EditItemTemplate>

    <InsertItemTemplate>
        <asp:CheckBox ID="CheckBoxInsertDayOfWeekMonday" runat="server" Checked='<%# Bind("DayOfWeekMonday") %>' />
    </InsertItemTemplate>

    <ItemTemplate>
        <asp:CheckBox ID="CheckBoxItemDayOfWeekMonday" runat="server" Checked='<%# Bind("DayOfWeekMonday") %>' Enabled="false" />
    </ItemTemplate>

    <ItemStyle ForeColor="Blue" />
</asp:TemplateField> 
```

我也在代码隐藏文件中尝试了这个。

```
Protected Sub CheckBoxItemDayOfWeekMonday_DataBinding(sender As Object, e As EventArgs)

    Dim theControl As CheckBox

    theControl = DetailsView.FindControl("CheckBoxItemDayOfWeekMonday")
    theControl.ForeColor = Drawing.Color.Blue

End Sub 
```

有没有办法像我们的其他字段和列一样将其更改为蓝色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:53:59.060

我注意到您的意思是复选框内的刻度线，而不是前景色。我认为您无法更改此设置，因为这非常依赖于操作系统。我过去已经用图像实现了这一点。您可以尝试这些使用图像的 CSS3 CheckBox：[http ://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-easy-css3-checkboxes-and-radio-buttons/](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-easy-css3-checkboxes-and-radio-buttons/)

样本：

**HTML**：

```
<span><input type="checkbox" id="c1" name="cc" />
<label for="c1"><span></span>Check Box 1</label>
</span> 
```

**CSS**：

```
input[type="checkbox"] {
    display:none;
}

input[type="checkbox"] + label {
    color:#000000;
    font-family:Arial, sans-serif;
    font-size:14px;
}

input[type="checkbox"] + label span {
    display:inline-block;
    width:19px;
    height:19px;
    margin:-1px 4px 0 0;
    vertical-align:middle;
    background:url(http://webdesigntutsplus.s3.amazonaws.com/tuts/391_checkboxes/check_radio_sheet.png) left top no-repeat;
    cursor:pointer;
}

input[type="checkbox"]:checked + label span {
    background:url(http://webdesigntutsplus.s3.amazonaws.com/tuts/391_checkboxes/check_radio_sheet.png) -19px top no-repeat;
} 
```

JSFiddle：http: [//jsfiddle.net/4FraV/2/](http://jsfiddle.net/4FraV/2/)

# salesforce - 在字符''没有可行的选择

> ID：14483450
> 
> 赞同：0
> 
> 时间：2013-01-23T15:40:50.790
> 
> 标签：salesforce, visualforce, soql

尝试执行以下操作时出现此错误。我从直接绑定到控制器的 Visualpage 中获取我的截止日期。

```
QueryException: line 1:322 no viable alternative at character ' ' 
```

我的查询正在执行：

```
 Select c.CaseNumber,c.Status,c.ID, Account.Name, Account.Status__c, Account.Type,Account.Location_Type__c,Account.BillingCountry,Contact.Name, Contact.Email FROM Case c where c.BatchNumber__c = 'a0dR0000003dfBbIAI' and c.Deadline_Date__c = 2012-11-16 00:00:00 
```

我的代码：

```
 Date deadline = CaseParameter.Deadline_Date__c;
  soql = 'Select c.CaseNumber,c.Status,c.ID, Account.Name, Account.Status__c, Account.Type,Account.Location_Type__c,Account.BillingCountry,Contact.Name, Contact.Email  FROM Case c  where c.BatchNumber__c = \''+batchNumber+'\''; 
  soql+= ' and c.Deadline_Date__c = '+deadline; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:46:22.583

你的日期应该是`2012-11-16T00:00:00Z`。注意 T 分隔符，而不是日期和时间组件之间的空格，并在末尾添加时区指示符（在这种情况下为 GMT）

从 apex，您可以使用查询绑定功能，而不是构建 soql 字符串，例如

```
Date deadline =CaseParameter.Deadline_Date__c;
List<Case> cases = [select caseNumber,id,Account.Name from Case where deadline__date__c=:deadline]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:58:57.017

```
datetime deadline =  datetime.newInstance(CaseParameter.Deadline_Date__c,Time.newInstance(0, 0, 0, 0));
  soql = 'Select c.CaseNumber,c.Status,c.ID, Account.Name, Account.Status__c, Account.Type,Account.Location_Type__c,Account.BillingCountry,Contact.Name, Contact.Email  FROM Case c  where c.BatchNumber__c = \''+batchNumber+'\''; 
  soql+= ' and c.Deadline_Date__c = '+deadline.format('yyyy-MM-dd'); 
```

# c++ - 为什么锁定会减慢这个顺序文件解析器的速度？

> ID：14483452
> 
> 赞同：6
> 
> 时间：2013-01-23T15:40:54.417
> 
> 标签：c++, c++11, locking, pthreads

我为图形文件格式编写了一个简单的阅读器和解析器。问题是它非常慢。以下是相关方法：

```
Graph METISGraphReader::read(std::string path) {
    METISParser parser(path);
    std::pair<int64_t, int64_t> header = parser.getHeader();
    int64_t n = header.first;
    int64_t m = header.second;

    Graph G(n);

    node u = 0;
    while (parser.hasNext()) {
        u += 1;
        std::vector<node> adjacencies = parser.getNext();
        for (node v : adjacencies) {
            if (! G.hasEdge(u, v)) { 
                G.insertEdge(u, v);
            }
        }
    }
    return G;
}

std::vector<node> METISParser::getNext() {
    std::string line;
    bool comment = false;
    do {
        comment = false;
        std::getline(this->graphFile, line);
        // check for comment line starting with '%'
        if (line[0] == '%') {
            comment = true;
            TRACE("comment line found");
        } else {
            return parseLine(line);
        }

    } while (comment);
}

static std::vector<node> parseLine(std::string line) {
    std::stringstream stream(line);
    std::string token;
    char delim = ' ';
    std::vector<node> adjacencies;

    // split string and push adjacent nodes
    while (std::getline(stream, token, delim)) {
        node v = atoi(token.c_str());
        adjacencies.push_back(v);
    }
    return adjacencies;
} 
```

为了诊断它为什么这么慢，我在分析器（Apple Instruments）中运行它。结果令人惊讶：由于锁定开销，它很慢。该程序将超过 90% 的时间花在`pthread_mutex_lock`和`_pthread_cond_wait`.

![仪器](../Images/c47a81dc9738d02ba90e0191c5e6071c.png)

我不知道锁定开销来自哪里，但我需要摆脱它。你能建议接下来的步骤吗？

编辑：查看为`_pthread_con_wait`. 通过查看以下内容，我无法找出锁定开销的来源：

![在此处输入图像描述](../Images/2bb73b8d2c415f2a4ceeb0b5fdf68623.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:55:00.467

展开 _pthread_cond_wait 和 pthread_mutex_lock 调用上的调用堆栈以找出调用锁定调用的位置。

作为一种猜测，我会说它存在于你正在做的所有不必要的堆分配中。堆是线程安全的资源，在这个平台上，线程安全可以通过互斥体提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:54:14.063

所有从 a 读取数据的函数`istream`都会锁定`mutex,`从 a 读取的数据`streambuf`并解锁`mutex`. `streambuf`为了消除这种开销，请直接从而不是从读取文件，`istream`并且不要使用它`stringstream`来解析数据。

这是一个版本，`getline`它使用`streambuf`而不是`istream`

```
bool fastGetline(streambuf* sb, std::string& t)
{
    t.clear();
    for(;;) {
        int c = sb->sbumpc();
        switch (c) {
        case '\n':
            return true;
        case '\r':
            if(sb->sgetc() == '\n')
                sb->sbumpc();
            return true;
        case EOF:
            return !t.empty();
        default:
            t += (char)c;
    }
} 
```

# c# - 如何使用 XElement 在标签之间添加值？

> ID：14483455
> 
> 赞同：7
> 
> 时间：2013-01-23T15:40:56.983
> 
> 标签：c#, xml, linq-to-xml, xelement

我查看了一堆使用的 XML 示例`XDocument`，`XElement`但它们似乎都有像`<To Name="John Smith"/>`. 我需要执行以下操作：

```
<To Type="C">John Smith</To> 
```

我认为以下内容会起作用并尝试查看 Linq.XML 类的对象模型，但我只是有点偏离（**请参阅下面的行不工作**）

```
new XElement("To", new XAttribute("Type", "C")).SetValue("John Smith") 
```

感谢任何有关如何正确形成 XML 的帮助，谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T15:44:02.153

我会使用：

```
new XElement("To", new XAttribute("Type", "C"), "John Smith"); 
```

您在构造函数中提供的任何纯文本内容`XElement`最终都会作为文本节点。

您当然*可以*单独调用`SetValue`，但由于它不返回任何内容，因此您需要首先将对该元素的引用存储在变量中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T15:45:30.480

怎么样

```
 new XElement("To", new XAttribute("Type", "C"), "John Smith") 
```

# iphone - SQLite 中没有数据

> ID：14483457
> 
> 赞同：0
> 
> 时间：2013-01-23T15:40:57.620
> 
> 标签：iphone, ios, sqlite, core-data

我有这本关于核心数据的书。我在我的第二章，我正在关注一个正在进行的项目。该项目增加了一个组织和三名员工。其中一名员工是领导。我已成功执行这些步骤，虽然有 4 个警告但没有错误。我知道这应该可行，因为在重新安装 OSX 之前我有同样的项目。

AppDelegate.h

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;

//Core Data Implementation
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

//Display Person
- (void)readData;
- (void)displayPerson:(NSManagedObject *)person withIndentation:(NSString *)indentation;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"

#import "ViewController.h"

@implementation AppDelegate

@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self createData];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

#pragma mark - Create Data

-(void)createData
{
    NSManagedObject *organization = [NSEntityDescription insertNewObjectForEntityForName:@"Organization" inManagedObjectContext:self.managedObjectContext];
    [organization setValue:@"Company, Inc." forKey:@"name"];
    [organization setValue:[NSNumber numberWithInt:[@"Company, Inc." hash]] forKey:@"id"];

    NSManagedObject *john = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
    [john setValue:@"John" forKey:@"name"];
    [john setValue:[NSNumber numberWithInt:[@"John" hash]] forKey:@"id"];

    NSManagedObject *jane = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
    [jane setValue:@"Jane" forKey:@"name"];
    [jane setValue:[NSNumber numberWithInt:[@"Jane" hash]] forKey:@"id"];

    NSManagedObject *bill = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
    [bill setValue:@"Bill" forKey:@"name"];
    [bill setValue:[NSNumber numberWithInt:[@"Bill" hash]] forKey:@"id"];

    NSMutableSet *johnsEmployees = [john mutableSetValueForKey:@"employees"];
    [johnsEmployees addObject:jane];
    [johnsEmployees addObject:bill];
}

- (void)saveContext {
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;

    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }
}

#pragma mark - Core Data stack

- (NSManagedObjectContext *)managedObjectContext {
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }

    return _managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel {
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Core01" withExtension:@"momd"];
    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Core01.sqlite"];
    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

#pragma mark - Display Person

- (void)displayPerson:(NSManagedObject*)person withIndentation:(NSString*)indentation {
    NSLog(@"%@Name: %@", indentation, [person valueForKey:@"name"]);
    indentation = [NSString stringWithFormat:@"%@   ", indentation];
    NSSet *employees = [person valueForKey:@"employees"];
    id employee;
    NSEnumerator *it = [employees objectEnumerator];

    while ((employee = [it nextObject]) != nil) {
        [self displayPerson:employee withIndentation:indentation];
    }
}

- (void)readData {
    NSManagedObjectContext *context = [self managedObjectContext];
    NSEntityDescription *orgEntity = [NSEntityDescription entityForName:@"Organization" inManagedObjectContext:context];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:orgEntity];
    NSArray *organizations = [context executeFetchRequest:fetchRequest error:nil];
    id organization;
    NSEnumerator *it = [organizations objectEnumerator];

    while ((organization = [it nextObject]) != nil) {
        NSLog(@"Organization: %@", [organization valueForKey:@"name"]);
        NSManagedObject *leader = [organization valueForKey:@"leader"];
        [self displayPerson:leader withIndentation:@"   "];
    }
}
- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

这些是唯一对项目很重要的代码。是的，这是一个非常简单的 Core Data 应用程序。

书中有使用 sqlite3 访问数据库的指南。

在 Terminal.app 中：

```
Input: cd ~/Library/Application\ Support/iPhone\ Simulator
Input: find . -name "Core01.sqlite" –print
Output: ./6.0/Applications/25DB9FAD-6921-4791-9409-FF84F275D8A8/Documents/Core01.sqlite
Input: sqlite3 ./6.0/Applications/25DB9FAD-6921-4791-9409-FF84F275D8A8/Documents/Core01.sqlite 
```

在 sqlite3 中：

```
Input: sqlite> select Z_PK, ZID, ZLEADER, ZNAME from ZORGANIZATION;
Output: 1|-19904|2|Company, Inc.

Input: sqlite> select Z_PK, ZID, Z2EMPLOYEES, ZNAME from ZPERSON;
Output:
1|6050|2|Jane
2|-28989||John
3|28151|2|Bill 
```

问题是，数据库是空的。我知道出了什么问题，也没有我想念什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:10:07.300

我认为问题是您需要`-(void)saveContext`在设置所有数据后调用该方法`-(void)createData`

试试这个：

```
-(void)createData
{
    NSManagedObject *organization = [NSEntityDescription insertNewObjectForEntityForName:@"Organization" inManagedObjectContext:self.managedObjectContext];
    [organization setValue:@"Company, Inc." forKey:@"name"];
    [organization setValue:[NSNumber numberWithInt:[@"Company, Inc." hash]] forKey:@"id"];

    NSManagedObject *john = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
    [john setValue:@"John" forKey:@"name"];
    [john setValue:[NSNumber numberWithInt:[@"John" hash]] forKey:@"id"];

    NSManagedObject *jane = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
    [jane setValue:@"Jane" forKey:@"name"];
    [jane setValue:[NSNumber numberWithInt:[@"Jane" hash]] forKey:@"id"];

    NSManagedObject *bill = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
    [bill setValue:@"Bill" forKey:@"name"];
    [bill setValue:[NSNumber numberWithInt:[@"Bill" hash]] forKey:@"id"];

    NSMutableSet *johnsEmployees = [john mutableSetValueForKey:@"employees"];
    [johnsEmployees addObject:jane];
    [johnsEmployees addObject:bill];

    [self saveContext];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:09:06.723

除非我在代码中遗漏了它，否则您调用 [self createData]; 但永远不要保存上下文。

在 createData 方法的末尾，添加 [self saveContext]; 称呼。

# svn - 如何在 phpstorm 中使用 ssh 进行 svn 结帐

> ID：14483463
> 
> 赞同：2
> 
> 时间：2013-01-23T15:41:19.273
> 
> 标签：svn, phpstorm

我需要从中签出的 svn 存储库使用 ssh: 协议，而不是 http:，但是如果 http:// 不用于存储库位置，phpstorm 中的 svn 签出对话框会禁用签出按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:18:35.410

Subversion**不支持**纯 ssh:// 协议。存储库可能只有`http://` `file:///` `svn://` `svn+ssh://`RA 层

# web-services - 实例化 WS-Client 时的 NPE

> ID：14483464
> 
> 赞同：0
> 
> 时间：2013-01-23T15:41:20.710
> 
> 标签：web-services, jboss

当我在 Jboss 4.2.3 中实例化可能的 Webservice 客户端时，我得到以下异常。

看起来 Web 服务客户端只是从类路径加载 WSDL。

当 Jboss 尝试打开以下 URL 时出现问题：“file:/C:/ta30/progs/JBoss423_EntwicklerVersion/jboss-4.2.3.GA.ZPV/server/default/tmp/jbossws/JBossWS_xx.xx.xx_namespace_xxx-xx_xxx_20040201 #967130196328257771.xsd"

有谁知道这个问题可能是什么原因？

```
Caused by: java.lang.NullPointerException
    at org.jboss.ws.tools.JavaToXSD.parseSchema(JavaToXSD.java:179)
    at org.jboss.ws.tools.wsdl.WSDL11Reader.processTypes(WSDL11Reader.java:401)
    at org.jboss.ws.tools.wsdl.WSDL11Reader.processDefinition(WSDL11Reader.java:178)
    at org.jboss.ws.tools.wsdl.WSDLDefinitionsFactory.parse(WSDLDefinitionsFactory.java:128)
    at org.jboss.ws.metadata.umdm.ServiceMetaData.getWsdlDefinitions(ServiceMetaData.java:295)
    at org.jboss.ws.metadata.builder.jaxws.JAXWSClientMetaDataBuilder.buildMetaData(JAXWSClientMetaDataBuilder.java:86)
    at org.jboss.ws.core.jaxws.spi.ServiceDelegateImpl.<init>(ServiceDelegateImpl.java:140)
    at org.jboss.ws.core.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:64)
    at javax.xml.ws.Service.<init>(Service.java:81) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:34:30.227

问题是命名空间中的“#”。这产生了一个不能被 jboss 处理的 URL。

# matlab - 计算区域内所有点之间的距离

> ID：14483468
> 
> 赞同：6
> 
> 时间：2013-01-23T15:41:30.507
> 
> 标签：matlab, matrix, distance

我有一个大约 144 点的区域。我想要实现的是测量一个点与所有其他点的距离并将其存储在一个数组中。我想为所有点都这样做。如果可能的话，我想以不重复的方式存储这些数据。而且我应该能够进行查询，例如 - 所有点之间的所有距离而不重复，点 no56 的所有距离之和等。

我有一个 3*144 数组，其中两列存储点的坐标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:52:44.993

A possible solution (I am not really clear with what you mean by no repetition, though):

```
 X are your points with coordinates x = X(:,1), y = X(:,2)

 dist = sqrt(bsxfun(@minus,X(:,1),X(:,1)').^2 + bsxfun(@minus,X(:,2),X(:,2)').^2) 
```

so

```
dist(i,j) is the euclidean distance between i and j 
```

of course the matrix is symmetric. You can easily reduce the complexity involved.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:02:16.860

假设您的数组是`A`，其中每列存储一个点的坐标。要获得所有点对的组合（不重复），请使用[`nchoosek`](http://www.mathworks.com/help/matlab/ref/nchoosek.html)：

```
pairs = nchoosek(1:size(A, 2), 2) 
```

然后像这样计算[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)：

```
dist = sqrt(sum((A(:, pairs(:, 1)) - A(:, pairs(:, 2))) .^ 2, 1)) 
```

如果您安装了[Statistics Toolbox](http://www.mathworks.com/help/stats/index.html)，则可以使用它[`pdist(A)`](http://www.mathworks.com/help/stats/pdist.html)来获得相同的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-05T18:35:49.523

如果您有统计工具箱，并且您的所有数据都在数组 X 中，那么

```
D = pdist(X) 
```

给出 X 中所有点之间的所有成对距离.

# android - 恼人的“在项目上运行构建器'Android Pre Compiler'时出错”对话框

> ID：14483470
> 
> 赞同：8
> 
> 时间：2013-01-23T15:41:42.577
> 
> 标签：android, eclipse

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:30:51.183

有人找到答案了！就我而言，是 svn 无扩展名文件导致了问题。[在此处](https://stackoverflow.com/questions/14455018/eclipse-android-errors-running-builder-android-pre-compiler-on-project?rq=1)查看解决方案。

# javascript - 是否有任何用于图形操作和算法的 JavaScript 库？

> ID：14483473
> 
> 赞同：29
> 
> 时间：2013-01-23T15:41:58.713
> 
> 标签：javascript, math, graph, graph-algorithm

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-01-19T16:04:29.383

现在有一个库：[graphlib](https://github.com/cpettitt/graphlib)

> Graphlib 是一个 JavaScript 库，它为无向和有向多图提供数据结构以及可以与它们一起使用的算法。

实现：

*   有向图和无向图（A -> B 是否暗示 B -> A）
*   多重图（来自 A -> B 的多个不同的命名边）
*   复合图（节点可以有形成“子图”的子节点）
*   Dijkstra 算法（最短路径）
*   Floyd-Warshall 算法（支持负权重的最短路径）
*   Prim 算法（最小生成树）
*   Tarjan 算法（强连通分量）
*   拓扑排序（有向无环图的依赖排序）
*   前序和后序遍历（每个节点上的回调）
*   查找所有循环并测试图是否是非循环的
*   查找所有连接的组件

支持 NPM、Bower 和浏览器，MIT 许可证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T21:30:34.400

几个月前，我创建了一个在 JavaScript 中实现不同 CS 算法的[存储库。](https://github.com/mgechev/javascript-algorithms)也很少有带图的算法。我计划扩展它（生成树，启发式算法可能是彩色图），但从那以后我认为仍然很少有算法可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T19:03:44.153

我 在 javascript中制作了一个图形算法库[https://github.com/devenbhooshan/graph.js 。](https://github.com/devenbhooshan/graph.js)图书馆很干净而且很简单。这是非常容易使用。只需将 graph.js 文件插入您的项目并开始使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T15:41:58.713

在 StackOverflow 的类似问题建议的帮助下，我发现了几个主题相似的问题。

第一个，[Javascript有向无环图库？（图形可视化不是必需的）](https://stackoverflow.com/questions/6877091/javascript-directed-acyclic-graph-library-graph-visualization-is-not-necessary)，很接近。nrabinowitz建议检查[data.js](https://stackoverflow.com/users/380487/nrabinowitz) [。](http://quasipartikel.at/data-js/)我快速浏览了data.js的源码。它确实提供了处理图形的界面，但只是以非常基本的方式。那里没有遍历算法。data.js 的目标似乎也不是一个综合性的图形库。

第二个，[用于图形操作的 Javascript 库](https://stackoverflow.com/questions/3871821/javascript-library-for-graph-operations)，与此几乎相同的问题，但还没有真正的答案（在 2013-01-23 17:32）。作者[c0dem4gnetic](https://stackoverflow.com/users/105040/c0dem4gnetic)对[NetworkX](http://networkx.github.com/)的引用是我非常需要的，但不幸的是仅在 Python 中实现。

我会很高兴自己实现这样一个库。图表太酷了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-29T12:30:20.253

还有[js-graph-algorithms](https://github.com/chen0040/js-graph-algorithms)，看起来很干净并且有几种算法。它的api虽然很基础。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-12T04:28:13.513

目前维护的折旧替代方案`graphlib`还包括 Typescript 支持将是[graphology](https://github.com/graphology/graphology)。

与某些扩展（例如`graphology-shortest-path`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T16:29:40.350

我们的[Java 库](https://github.com/jgraph/jgraphx)中有算法，我们只是想找到一个空闲槽将它们添加到我们的[JavaScript 库](https://github.com/jgraph/mxgraph)中。这对您现在没有帮助，但可能对以后的观众有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-17T16:38:24.063

这是用 JavaScript 实现的 Tarjan 强连接组件算法：[https ://www.vacilando.org/article/javascript-implementation-tarjans-cycle-detection-algorithm](https://www.vacilando.org/article/javascript-implementation-tarjans-cycle-detection-algorithm)

# cuda - 无法从全局内存 CUDA 读取数组

> ID：14483475
> 
> 赞同：0
> 
> 时间：2013-01-23T15:42:03.783
> 
> 标签：cuda, gpgpu

我正在 CUDA 上实现一个复杂的算法。但是有一个非常奇怪的问题。问题可以概括为：内核会多次重复一系列计算。本次迭代的计算是基于前一次的结果。我在全局内存上使用一个数组来在每次迭代中的块之间传递信息。例如有 2 个块，对于每个迭代块 0 将结果保存到全局内存中，然后块 1 从全局内存中读取它。但是问题是块 1 无法从全局内存中读取数组。它有时会返回第一次迭代的结果，而不是前一次。

a_e 和 e_a 是全局 mem 上的两个数组，大小为 [2*8]。d_a_e 和 d_e_a 在共享内存上，大小为 [blockDim.x+1][8]。

```
if(threadIdx.x<8)
{
     //block 0 writes, block 1 reads, this can't work properly
     a_e[blockIdx.x*8+threadIdx.x]=d_a_e[blockDim.x][threadIdx.x];
     if(blockIdx.x>0)
          d_a_e[0][threadIdx.x]=a_e[(blockIdx.x-1)*8+threadIdx.x];

     //block 1 writes, block 0 reads, this can work properly
     e_a[blockIdx.x*8+threadIdx.x]=d_e_a[0][threadIdx.x];
     if(blockIdx.x < gridDim.x-1)
          d_e_a[blockDim.x][threadIdx.x]=e_a[(blockIdx.x+1)*8+threadIdx.x];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:09:52.747

此设置不起作用；您正在有效地尝试序列化您的块，正如他在评论中提到的那样，这是行不通的。来自 CUDA 编程指南：

“线程块需要独立执行：必须可以以任何顺序并行或串行执行它们。这种独立性要求允许跨任意数量的内核以任何顺序调度线程块......” [http：/ /docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#thread-hierarchy](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#thread-hierarchy)

如果可能启动单独的内核（例如，您在第一个内核中执行块 0 计算，在第二个内核中执行块 1 等），您最好的办法是尝试强制执行第一个内核的结果在读取它们之前完成下一个内核。已经完成了一些关于块间同步的工作，但是您不会从它们中获得太多好处，因为您需要序列化您的块。

编辑：我还应该指出，块调度没有记录，并且随时可能更改，因此任何块间同步都将是不可移植的，并且可能会在驱动程序或 CUDA 工具包更新时中断。

# ms-access - 访问报告中的下拉列表

> ID：14483479
> 
> 赞同：0
> 
> 时间：2013-01-23T15:42:14.377
> 
> 标签：ms-access, drop-down-menu, report

我有一个从查询中提取的 access 2010 报告。该查询具有日期、名称和 ID。我想要的是报告顶部的一个下拉框，用于过滤日期。因此，当用户选择一个日期时，报告将刷新并仅显示该日期的查询结果。我似乎无法让它发挥作用，需要一些指导。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:18:04.710

您可以打开带有参数的报告。

```
 DoCmd.OpenReport ReportName, View, FilterName, WhereCondition, _
    WindowMode, OpenArgs 
```

（[http://msdn.microsoft.com/en-us/library/office/bb238032(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb238032(v=office.12).aspx)）

这意味着您可以使用 MS Access 表单向导创建一个表单，然后添加一个显示所有可用日期的组合框，或者只是一个格式化为接受日期的文本框并将其用作 where 语句的基础。添加一个按钮来运行报告并将点击事件设置为：

```
 DoCmd.OpenReport "ReportName", acViewPreview, , _
    "MyDate=#" & Format(Me.txtDate,"yyyy/mm/dd") & "#" 
```

# python - Python中的正则表达式-从网站抓取数据

> ID：14483481
> 
> 赞同：1
> 
> 时间：2013-01-23T15:42:22.607
> 
> 标签：python

我是 Python 新手，我试图从网站中提取 xml 文件并将它们加载到数据库中。我一直在 Python 中使用 Beautiful Soup 模块，但我无法提取我想要的特定 xml 文件。在网站源代码中，它如下所示：

```
<a href="ReportName I want 20130101.XML">ReportName.XML</a>
<a href="ReportName I want 20120101.XML">ReportName.XML</a>
<<a href="ReportName I dont want 123.XML">ReportName.XML</a> 
```

下面显示了我在 Python 中的代码。这会带回带有“href”标签的所有内容，而我想过滤“报告我想要名称 dddddddd”上的文件。例如，我曾尝试使用诸如“href=\s\w+”之类的正则表达式，但无济于事，因为它返回 NONE。任何帮助表示赞赏

```
from bs4 import BeautifulSoup
import urllib
import re

webpage=("http://www.example.com")
response=urllib.urlopen(webpage).read()
soup=BeautifulSoup(response)

for link in soup.find_all('a'):
   print(link.get('href') 
```

当我使用 Python 时，它 findall('href') 会拉回整个字符串，但我只想过滤 xml 方面。我已经尝试过代码的变体，例如 findall('href\MarketReports') 和 findall('href\w+') 在我运行代码时将返回“None”。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:45:11.967

我并不完全清楚您在寻找什么，但如果我理解正确，您只想获取 ReportName.XML，在这种情况下它将是：

```
find('a').text 
```

如果您正在寻找“/MarketRepoerts/ReportName.XML”，那么它将是：

```
find('a').attrs['href'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:08:48.503

我使用了以下代码，它能够根据需要找到报告。Google 演示文稿与 jdotjdot 输入一起提供了很大帮助

[http://www.youtube.com/watch?v=kWyoYtvJpe4](http://www.youtube.com/watch?v=kWyoYtvJpe4)

我用来查找 XML 的代码是

```
import re
import urllib

webpage=("http://www.example.com")
response=urllib.urlopen(webpage).read()

print re.findall(r"Report I want\w+[.]XML",response) 
```

# php - SQL 查询字符串开头最接近的匹配

> ID：14483483
> 
> 赞同：3
> 
> 时间：2013-01-23T15:42:30.163
> 
> 标签：php, mysql, sql

我目前正在使用 Mysql 和 PHP。

寻找一个接受数字的查询并找到一组数字开头的壁橱匹配，例如我有数字`019235678910, 026725678910, 026825678910`，我的表看起来像这样。

```
Table - Destintation

Name     Number
Watford  01923
Oxford   026
Romford  026
Crawford 0267
Topford  02672 
```

因此，当我通过时`019235678910`，结果将是`Watford`, `026725678910`will be`Topford`和`026825678910`will be `Oxford`and `Romford`。

我也不确定 MYSQL 是否可以直接执行此操作，还是需要与 PHP 结合使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:56:46.593

这是获取所有这些的一种方法：

```
select d.*
from Destination d join
     (select length(Number) as maxlen, number
      from destination d
      where YOURVALUE like concat(Number, '%')
      order by maxlen desc
      limit 1
     ) dsum
     on d.Number = dsum.Number 
```

因为您正在寻找初始序列，所以数字上只有一个最大匹配项（因此`limit 1`有效）。

顺便说一句，调用的字段`number`显然是一个字符字段。就个人而言，我认为将字符字段称为“数字”是不好的做法——这就是所谓的认知失调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:45:59.467

```
SELECT Name, Number
FROM Destintation
WHERE LEFT('026725678910', LENGTH(Number)) = Number 
```

也许

```
WHERE '026725678910' LIKE CONCAT(Number, '%') 
```

# spring-mvc - 无法从远程访问 STS vFabric Server Developer Edition

> ID：14483485
> 
> 赞同：0
> 
> 时间：2013-01-23T15:42:33.707
> 
> 标签：spring-mvc

嗨，我在 STS 内置 tc Server 中成功运行了我的 webapp。我可以从本地主机访问它，但不能从远程计算机访问。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:32:50.230

我认为这不是spring / tc Server的问题。

尝试从远程计算机 ping 服务器

获取您的服务器的 IP，`ipconfig`然后尝试 ping 它

```
ping http://10.xx.xxx.12/yourapp 
```

然后检查您是否有任何防火墙阻止传入的网络流量。或其他程序，例如诺顿/赛门铁克防病毒软件，包括“网络安全威胁”功能来阻止流量。

如果您有这样的程序，请创建一个规则以授予您要访问服务器的客户端的访问权限

# vb.net - Form_Load 不在应用程序中执行

> ID：14483489
> 
> 赞同：2
> 
> 时间：2013-01-23T15:42:39.023
> 
> 标签：vb.net, winforms

我是 Visual Basic 的新手。我已经安装了 Microsoft Visual Studio 2010。创建了一个新的 Windows 窗体应用程序。举个例子，我做了一个简单的程序，它会要求最终用户输入 2 个数字，并允许他们从第一个数字中添加或减去第二个数字，并在文本框中显示输出。

现在，我添加了另一个子程序，它会在 Windows 窗体加载时自动执行。这将计算输出文本框的宽度和表单宽度并显示在底部。

这就是代码现在的样子：

```
Public Class Form1

    ' Run this Subroutine initially to display the Form and Text box width
    Private Sub Form_Load()
        Label5.Text = TextBox3.Width
        Label7.Text = Me.Width
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim a As Integer
        Dim b As Integer
        a = TextBox1.Text
        b = TextBox2.Text
        TextBox3.Text = a + b
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Dim a As Integer
        Dim b As Integer
        a = TextBox1.Text
        b = TextBox2.Text
        TextBox3.Text = a - b
    End Sub
End Class 
```

虽然加法和减法一切正常，但它不会在 Windows 窗体中显示窗体和输出文本框宽度。

我认为，Form_Load() 没有正确执行。

我也尝试过 Form_Activate() 但这也不起作用。

一旦我能够做到这一点，我想扩展这个概念来调整输出文本框的大小以及表单调整大小。但是，出于理解的目的，我想看看我是否可以成功执行 Form_Load() 。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:48:49.043

您需要添加 Handle 以便应用程序自动执行它：

```
Private Sub Form_Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load
    '...
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:46:45.020

`Form_Load`不执行。目前，它只是任何其他方法。为了告诉 VB 让这个方法处理`Load`事件，你需要这样告诉它：

```
Private Sub Form_Load(sender As Object, e As EventArgs) Handles MyBase.Loasd
    Label5.Text = TextBox3.Width
    Label7.Text = Me.Width
End Sub 
```

（并添加事件所需的参数。）

其他几点说明：

*   确保`Option Strict On`始终在您的项目选项中启用该选项。这将使编译器对您的代码更加严格并标记更多错误。**这是一件好事**，因为这些错误是潜在的错误。特别是，您的代码在不同数据类型之间的转换非常宽松，这些应该明确。

*   声明变量时初始化变量，不要在单独的语句中赋值。也就是说，这样写：

    ```
    Dim a As Integer = Integer.Parse(TextBox1.Text) 
    ```

    （也添加了显式转换。）

*   如果你想让一个控件填充表单，你可以`Dock`在表单编辑器中适当地设置它的属性，而不必手动编程。

# vb.net - 如何生成指定长度的星号字符串？

> ID：14483500
> 
> 赞同：1
> 
> 时间：2013-01-23T15:43:06.117
> 
> 标签：vb.net, string, visual-studio-2010

如何生成指定长度的星号字符串（这样我就可以将它与数组项的 .Length 属性一起使用）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T15:51:21.143

您可以`String(Char, Int32)`使用`System.String`.

> 将 String 类的新实例初始化为由重复指定次数的指定 Unicode 字符指示的值。

您可以像这样使用构造函数：

```
Dim mystr As String = New String("*"c, array.Length) 
```

* * *

有更多的构造[函数重载](http://msdn.microsoft.com/en-us/library/system.string.string%28v=vs.90%29.aspx)。`System.String`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:56:20.727

```
Dim myString As String = ""
myString = myString.padLeft(length, "*") 
```

# android - Android：可重复使用的适配器和不同的 onclicklistener

> ID：14483510
> 
> 赞同：3
> 
> 时间：2013-01-23T15:43:40.797
> 
> 标签：android, adapter, android-adapter, android-adapterview

我想知道将同一个适配器用于多个列表视图是否是一种好方法。

在我的代码中，我有许多列表视图，每个列表视图都包含相同的 UL 组件，例如 imageview 和 textview，所以为它们中的每一个使用“MyAdapter extends BaseAdapter”是否很好？或者最好为每个适配器制作适配器？

如果我必须使用一个适配器，如何处理每个列表视图的按钮、图像视图和文本视图的不同 onclick 操作？

```
class MyAdapter extends BaseAdapter {

    public MyAdapter() {
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T13:28:47.420

This is a really good question I often struggle with. Seems so unnecessary duplicating so much adapter code just for different actions. I still struggle with this questions as a design issue, so my answer is not intended to provide an answer on that. However, for the part of the question about reusing the adapter or not, what I do if I wish to reuse a list/adapter is this:

For each type of list I create a global constant value to act as an identifier for that type of list. When I create a new instance of the adapter I supply the requestId/listTypeId to the adapter:

```
//first i create the constants somewhere globally
TYPE_ID_A = 0;
TYPE_ID_B = 1;
TYPE_ID_C = 2

//then i feed them to my adapter and set the clickListener on my list
 mList.setAdapter(new MyListAdapter(mContext, listData, TYPE_ID_A));
 mList.setOnItemClickListener(this); 
```

In my adapter I set this typeId as a member variable and further then create a public function to return this id:

```
public class MyListAdapter extends ArrayAdapter<JSONArray> {

    private final Context mContext;
    private final JSONArray mItems;
    private final int mListType;

    //assign the values in the constructor of the adapter
    public SearchListAdapter(Context context, JSONArray items, int listType) {
        super(context, R.layout.item_filter_list);
        mItems = items;
        mContext = context;
        mListType = listType;
   }

    //function to return the list id
    public int getListType(){
        return mListType;
    }
} 
```

Finally, inside my onClick listener I call this function inside my adapter to return the listTypeId which I then compare the global constants to identify what do to further:

```
@Override
public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
    MyListAdapter adapter = (MyListAdapter) adapterView.getAdapter();
    int listType = adapter.getListType(); //get the listTypeId now

    //now see which list type was clicked:
    switch(listType){
        case(TYPE_ID_A):
          //to action for list A
          break;
        case(TYPE_ID_B):
          //to action for list B
          break;
    }
} 
```

This works for me but I dont think its great. If any one has another proper design pattern please let us know!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:06:08.960

无论哪种方式，在资源方面都没有区别，因为无论如何您都必须为每个列表视图创建一个新的适配器实例。但是，试图将两种不同适配器的功能合并到一个中甚至听起来过于复杂。我会说为了设计的清晰，只需制作两个不同的适配器。从长远来看，在调试方面，它也会让您的生活变得更加轻松。

请记住，这是当每个列表的行为不同时，如果列表应该具有相同的功能，请继续并为每个列表使用相同的适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:06:16.707

您是在谈论重用适配器或其类的实例吗？该类可以无限重复使用。

然而，该实例更安全，不被重用。这样做的原因是您可能会遇到来自以前的 AdapterView 的冲突或工件。适配器的创建是微不足道的，那么为什么不只是安全并为每个 AdapterView 创建一个新的呢？

# javascript - 如何使用 Jquery 向我的页面发送带有特定查询字符串的 GET 请求？

> ID：14483511
> 
> 赞同：0
> 
> 时间：2013-01-23T15:43:44.063
> 
> 标签：javascript, jquery, query-string

每当您单击元素时，[此代码都会切换元素的颜色。](http://jsbin.com/urodit/193/edit)但是如何在第一个切换和第二个切换上发送带有**查询字符串的****GET 请求**？ **`?toggle=True``?toggle=False`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:16:57.383

> 哦，我可以看到它出现在 Firebug 中，但不在页面的 url 中。知道为什么吗？

除非您使浏览器加载一个全新的页面，否则发出请求和更改地址栏中的 URI 是两件不同的事情。

如果你想这样做，那么你应该忘记使用客户端 JavaScript 并移动你的逻辑服务器端并使用常规链接。

在服务器端逻辑中，查询字符串参数的值将用于确定`class`div 的值（用于设置样式）和`href`链接的值（即查询字符串中是否有 True 或 False）。

如果您想避免加载新页面，那么您正在查看两个单独的步骤。

您已经拥有的第一个（使用 JS 更改样式）。

其余的变得更加复杂......</p>

首先，您需要服务器端逻辑，以便查询字符串中的 True/False 将正确设置页面的初始状态。这将与为先前方法描述的逻辑相同。

然后，您需要更新 URI，使其与将在您将当前页面更改为的状态下加载页面的 URI 匹配。这是使用[History API](http://caniuse.com/#search=pushstate)（`pushState`和朋友）完成的。[有关此问题](https://stackoverflow.com/questions/6560570/how-does-github-do-pushstate-without-hash-tags)的主题有更多详细信息。

如果您想将更改通知服务器，那么您需要使用`jQuery.get`, 以及更新页面并更改地址栏中的 URI。为了提高效率，您可能应该添加一个额外的查询字符串参数（这样您就可以从正常页面加载中判断它是否来自 Ajax），并让服务器在看到该参数时返回一个简单的确认而不是整个 HTML 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:48:04.203

只需使用 jQuery 的 get 方法来执行此操作，或者在您的切换函数中自己执行此操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T15:47:46.483

一个实用但非常基本的解决方案可能是使用局部变量作为计数器。如果计数器是偶数，则发送 True，如果奇数，则发送 False。

每次点击增加计数器:)**

# javascript - ASP.NET WebForms 使用 jQuery v1.9.0 检查 GridView 中的所有复选框不起作用

> ID：14483514
> 
> 赞同：3
> 
> 时间：2013-01-23T15:43:52.453
> 
> 标签：javascript, jquery, asp.net, gridview, checkbox

我的应用程序有关于 jQuery 的问题。我尝试了一个代码示例（[http://aspnet.4guysfromrolla.com/articles/120810-1.aspx](http://aspnet.4guysfromrolla.com/articles/120810-1.aspx)）来使用标题复选框来检查/取消选中 GridView 中的所有行。示例代码适用于 jQuery v1.4.4，但不适用于最新的 jQuery 版本 v1.9.0。

这是代码。

```
<script type="text/javascript">
    var allCheckBoxSelector = '#<%=gvFileList.ClientID%> input[id*="chkAll"]:checkbox';
    var checkBoxSelector = '#<%=gvFileList.ClientID%> input[id*="chkSelected"]:checkbox';

    function ToggleCheckUncheckAllOptionAsNeeded() {
        var totalCheckboxes = $(checkBoxSelector),
            checkedCheckboxes = totalCheckboxes.filter(":checked"),
            noCheckboxesAreChecked = (checkedCheckboxes.length === 0),
            allCheckboxesAreChecked = (totalCheckboxes.length === checkedCheckboxes.length);

        $(allCheckBoxSelector).attr('checked', allCheckboxesAreChecked);
    }

    $(document).ready(function () {
        $(allCheckBoxSelector).live('click', function () {
            $(checkBoxSelector).attr('checked', $(this).is(':checked'));

            ToggleCheckUncheckAllOptionAsNeeded();
        });

        $(checkBoxSelector).live('click', ToggleCheckUncheckAllOptionAsNeeded);

        ToggleCheckUncheckAllOptionAsNeeded();
    });
</script> 
```

使用 jQuery v1.4.4 一切正常。使用 jQuery v1.9.0 每次页面加载我都会收到“对象不支持此属性或方法：.live”错误。如果我使用语法：

```
$(allCheckBoxSelector).click(function () {... 
```

而不是上面的那个，我避免了错误，但标题复选框只工作一次。如果我再次单击它，则不会出现任何内容。

我还尝试了 .on 语法：

```
$(allCheckBoxSelector).on('click', function () {... 
```

但它也不起作用。

我想知道该问题是由于 jQuery v1.9.0 中的更改还是错误引起的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:48:41.460

jQuery live 现在应该替换为 on。如果代码在您更改 live 之后应该可以正常工作。

我找到了问题的根源：必须使用`.prop`而不是`.attr`. 我也对代码做了一些小的修改。

这是关于 JS Bin 的工作演示：http: [//jsbin.com/egopar/4/edit](http://jsbin.com/egopar/4/edit)

这是 jQuery 1.9 的工作代码：

```
 $(document).ready(function () {

    var allCheckBoxSelector = $('#chkAll');

    var checkBoxSelector = $('input:checkbox:not(#chkAll)');

    function ToggleCheckUncheckAllOptionAsNeeded() {
        var totalCheckboxes = $(checkBoxSelector),
            checkedCheckboxes = totalCheckboxes.filter(":checked"),
            noCheckboxesAreChecked = (checkedCheckboxes.length === 0),
            allCheckboxesAreChecked = (totalCheckboxes.length === checkedCheckboxes.length);

        //console.log(allCheckboxesAreChecked);

        $(allCheckBoxSelector).prop('checked', allCheckboxesAreChecked);
    }

    $(allCheckBoxSelector).on('click', function () {
        $(checkBoxSelector).prop('checked', $(this).is(':checked'));

        ToggleCheckUncheckAllOptionAsNeeded();
    });

    $(checkBoxSelector).on('click', function () {
        ToggleCheckUncheckAllOptionAsNeeded();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:58:24.437

如果您没有在页面的其他任何地方使用 jQuery，则可以使用非常简单的 javascript 来执行此操作。有很多方法可以做到这一点，但这对我有用，可以附加到按钮、链接等。 checkid 是客户端 ID，选择是真还是假。

```
function checktoggle(checkid,select){
var check=document.getElementById(checkid);
var numinput=check.getElementsByTagName('input');
 for (i=0; i<numinput.length; i++){
  numinput[i].checked=select;
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:08:44.137

解决了！

感谢 Leniel Macaferi 的建议，我使用了方法`.on`和`.prop`方法`.live`，`.attr`但我对脚本进行了不同的实现，最终在我的应用程序上与 jQuery v1.9.0 一起使用。

```
<script type="text/javascript">
    var allCheckBoxSelector = '#<%=gvFileList.ClientID%> input[id*="chkAll"]:checkbox';
    var checkBoxSelector = '#<%=gvFileList.ClientID%> input[id*="chkSelected"]:checkbox';

    function ToggleCheckUncheckAllOptionAsNeeded()
    {
        var totalCheckboxes = $(checkBoxSelector),
            checkedCheckboxes = totalCheckboxes.filter(":checked"),
            noCheckboxesAreChecked = (checkedCheckboxes.length === 0),
            allCheckboxesAreChecked = (totalCheckboxes.length === checkedCheckboxes.length);

        $(allCheckBoxSelector).prop('checked', allCheckboxesAreChecked);
    }

    $(document).ready(function()
    {
        $(allCheckBoxSelector).on('click', function()
        {
            $(checkBoxSelector).prop('checked', $(this).is(':checked'));

            ToggleCheckUncheckAllOptionAsNeeded();
        });

        $(checkBoxSelector).on('click', ToggleCheckUncheckAllOptionAsNeeded);

        ToggleCheckUncheckAllOptionAsNeeded();
    });
</script> 
```

# c# - 如何在运行时仅在类上添加属性？

> ID：14483523
> 
> 赞同：2
> 
> 时间：2013-01-23T15:44:15.727
> 
> 标签：c#, .net, reflection, reflection.emit

我设法在运行时使用反射发射创建了这个类：

```
[DelimitedRecord(",")]
    public partial class Person
    {
        [FieldOrder(0)]
        private string firstName;

        [FieldOrder(1)]
        private string lastName;

        public string FirstName
        {
            get { return firstName; }
            set { firstName = value; }
        }

        public string LastName
        {
            get { return lastName; }
            set { lastName = value; }
        }
    } 
```

像这样：

```
 //create the builder
            AssemblyName assembly = new AssemblyName("FileHelpersTests");
            AppDomain appDomain = System.Threading.Thread.GetDomain();
            AssemblyBuilder assemblyBuilder = appDomain.DefineDynamicAssembly(assembly, AssemblyBuilderAccess.Run);
            ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule(assembly.Name);

            //create the class
            TypeBuilder typeBuilder = moduleBuilder.DefineType("Person", TypeAttributes.Public | TypeAttributes.AutoClass | TypeAttributes.AnsiClass |
                                                                TypeAttributes.BeforeFieldInit, typeof(System.Object));

            //create the Delimiter attribute
            Type[] delimiterAttributeParams = new Type[] { typeof(string) };
            ConstructorInfo delimiterAttrInfo = typeof(DelimitedRecordAttribute).GetConstructor(delimiterAttributeParams);
            CustomAttributeBuilder delimiterAttributeBuilder = new CustomAttributeBuilder(delimiterAttrInfo, new object[] { ";" });
            typeBuilder.SetCustomAttribute(delimiterAttributeBuilder);

            //create the firstName field
            FieldBuilder firstNameField = typeBuilder.DefineField("firstName", typeof(System.String), FieldAttributes.Private);

            //create the firstName attribute [FieldOrder(0)]
            Type[] firstNameFieldOrderAttributeParams = new Type[] { typeof(int) };
            ConstructorInfo firstNameFieldOrderAttrInfo = typeof(FieldOrderAttribute).GetConstructor(firstNameFieldOrderAttributeParams);
            CustomAttributeBuilder firstNameFieldOrderAttributeBuilder = new CustomAttributeBuilder(firstNameFieldOrderAttrInfo, new object[] { 0 });
            firstNameField.SetCustomAttribute(firstNameFieldOrderAttributeBuilder);

            //create the FirstName property
            PropertyBuilder firstNameProperty = typeBuilder.DefineProperty("FirstName", PropertyAttributes.HasDefault, typeof(System.String), null);

            //create the FirstName Getter
            MethodBuilder firstNamePropertyGetter = typeBuilder.DefineMethod("get_FirstName", MethodAttributes.Public | MethodAttributes.SpecialName |
                                                                              MethodAttributes.HideBySig, typeof(System.String), Type.EmptyTypes);
            ILGenerator firstNamePropertyGetterIL = firstNamePropertyGetter.GetILGenerator();
            firstNamePropertyGetterIL.Emit(OpCodes.Ldarg_0);
            firstNamePropertyGetterIL.Emit(OpCodes.Ldfld, firstNameField);
            firstNamePropertyGetterIL.Emit(OpCodes.Ret);

            //create the FirstName Setter
            MethodBuilder firstNamePropertySetter = typeBuilder.DefineMethod("set_FirstName", MethodAttributes.Public | MethodAttributes.SpecialName |
                                                                MethodAttributes.HideBySig, null, new Type[] { typeof(System.String) });
            ILGenerator firstNamePropertySetterIL = firstNamePropertySetter.GetILGenerator();
            firstNamePropertySetterIL.Emit(OpCodes.Ldarg_0);
            firstNamePropertySetterIL.Emit(OpCodes.Ldarg_1);
            firstNamePropertySetterIL.Emit(OpCodes.Stfld, firstNameField);
            firstNamePropertySetterIL.Emit(OpCodes.Ret);

            //assign getter and setter
            firstNameProperty.SetGetMethod(firstNamePropertyGetter);
            firstNameProperty.SetSetMethod(firstNamePropertySetter);

            //create the lastName field
            FieldBuilder lastNameField = typeBuilder.DefineField("lastName", typeof(System.String), FieldAttributes.Private);

            //create the lastName attribute [FieldOrder(1)]
            Type[] lastNameFieldOrderAttributeParams = new Type[] { typeof(int) };
            ConstructorInfo lastNameFieldOrderAttrInfo = typeof(FieldOrderAttribute).GetConstructor(lastNameFieldOrderAttributeParams);
            CustomAttributeBuilder lastNameFieldOrderAttributeBuilder = new CustomAttributeBuilder(lastNameFieldOrderAttrInfo, new object[] { 1 });
            lastNameField.SetCustomAttribute(lastNameFieldOrderAttributeBuilder);

            //create the LastName property
            PropertyBuilder lastNameProperty = typeBuilder.DefineProperty("LastName", PropertyAttributes.HasDefault, typeof(System.String), null);

            //create the LastName Getter
            MethodBuilder lastNamePropertyGetter = typeBuilder.DefineMethod("get_LastName", MethodAttributes.Public | MethodAttributes.SpecialName |
                                                                              MethodAttributes.HideBySig, typeof(System.String), Type.EmptyTypes);
            ILGenerator lastNamePropertyGetterIL = lastNamePropertyGetter.GetILGenerator();
            lastNamePropertyGetterIL.Emit(OpCodes.Ldarg_0);
            lastNamePropertyGetterIL.Emit(OpCodes.Ldfld, lastNameField);
            lastNamePropertyGetterIL.Emit(OpCodes.Ret);

            //create the FirstName Setter
            MethodBuilder lastNamePropertySetter = typeBuilder.DefineMethod("set_FirstName", MethodAttributes.Public | MethodAttributes.SpecialName |
                                                                MethodAttributes.HideBySig, null, new Type[] { typeof(System.String) });
            ILGenerator lastNamePropertySetterIL = lastNamePropertySetter.GetILGenerator();
            lastNamePropertySetterIL.Emit(OpCodes.Ldarg_0);
            lastNamePropertySetterIL.Emit(OpCodes.Ldarg_1);
            lastNamePropertySetterIL.Emit(OpCodes.Stfld, lastNameField);
            lastNamePropertySetterIL.Emit(OpCodes.Ret);

            //assign getter and setter
            lastNameProperty.SetGetMethod(lastNamePropertyGetter);
            lastNameProperty.SetSetMethod(lastNamePropertySetter); 
```

我真正想要的是像这样声明我的班级：

```
 public partial class Person
    {
        private string firstName;

        private string lastName;

        public string FirstName
        {
            get { return firstName; }
            set { firstName = value; }
        }

        public string LastName
        {
            get { return lastName; }
            set { lastName = value; }
        }
    } 
```

并且在运行时只添加这些属性。对于名字字段，我正在考虑这样的事情

```
 //get the builder to that field
    FieldBuilder firstNameField = 

    //create the attribute [FieldOrder(0)]
    Type[] firstNameFieldOrderAttributeParams = new Type[] { typeof(int) };
    ConstructorInfo firstNameFieldOrderAttrInfo = typeof(FieldOrderAttribute).GetConstructor(firstNameFieldOrderAttributeParams);
    CustomAttributeBuilder firstNameFieldOrderAttributeBuilder = new CustomAttributeBuilder(firstNameFieldOrderAttrInfo, new object[] { 0 });
    firstNameField.SetCustomAttribute(firstNameFieldOrderAttributeBuilder); 
```

如何让建设者到那个领域？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T18:37:56.433

正如 rpgmaker 已经在评论中所说，加载后您无法修改类。有一些解决方法：

1.  使用 Mono Cecil 修改现有程序集。
2.  使用 PostSharp 之类的东西作为构建后步骤，将属性添加到程序集。
3.  在运行时创建一个新类，它基本上是添加了属性的类的副本。
4.  在实际编译之前使用类似 Roslyn 的东西来修改你的源代码。

但所有这些都只是解决方法。而且您的最终目标实际上并不是向文件添加属性，它似乎是使用 FileHelpers 读取 CSV 文件，而无需指定必要的属性。

[FileHelpers 站点上有一个页面描述了如何](http://filehelpers.sourceforge.net/runtime_classes.html)使用几种不同的方法执行此操作，包括从 XML 加载格式。

# android - 同时，每部较新的 Android 手机都使用 libtinyalsa.so 吗？

> ID：14483526
> 
> 赞同：0
> 
> 时间：2013-01-23T15:44:24.040
> 
> 标签：android, audio, standards, alsa

几年前，Android 处理音频的方式有多个版本。那里有 OSS，然后是 ALSA，然后是 TinyAlsa 等等。

在我的手机 Galaxy Nexus 上，自 ICS 以来一直使用 TinyAlsa via`/system/lib/libtinyalsa.so`进行录音和播放。

有谁知道这是否同时是标准？还是仅特定于某些手机？

# css - 第n个孩子第一个孩子不工作

> ID：14483527
> 
> 赞同：0
> 
> 时间：2013-01-23T15:44:26.650
> 
> 标签：css, css-selectors

试图让第 n 个孩子/第一个孩子
在下面表格中的第一个标签上工作，但无法正确处理

目前我正在使用

```
form label {
    display: block;
    font-size: 20px;
    font-size: 2rem;
    line-height: 18px;
    cursor: pointer;
    margin:0 auto;
    color:#FFF;
    text-transform:uppercase;
    padding:40px 0 10px;
    font-weight: normal!important;
}
label:first-child {
        padding-top:0;
    } 
```

但用过

```
form code div.field span.lspan label:nth-of-type(1)  
form code div.field span.lspan label:first-child  
.lspan label:first-child  
form label:first-child 
```

他们将表单中的所有标签设置为填充 0

```
 <form method="POST" action="" class="">
    <div class="field">
    <span class="lspan"><label for="sender_name">Name</label></span>
    <span class="inspan"><input class="hinput" type="text" name="sender_name" value=""></span>
       </div>
    <div class="field">
      <span class="lspan"><label for="sender_name">Email</label></span><span class="inspan">         <input class="hinput" type="text" name="email" value=""> </span></div>
    <div class="field">
      <span class="lspan"><label for="subject">Subject</label></span><span class="inspan"><input class="hinput" type="text" name="subject" value=""></span></div>
    <div class="field">
     <span class="lspan"><label for="sender_name">Message</label></span><span class="inspan">    <textarea class="htextarea" name="message"></textarea></span></div>
<div class="field">
        </div>
    <div class="field" style="margin-top:15px">

     <input type = "submit"  class="csubmit" name = "submit" value="Submit" style="" />
                </div>
      </form> 
```

谢谢

罗伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:47:37.143

`<label>`代码中的所有标签都是`first-child`它们各自`<span>`元素的一个。

如果您只想`<label>`在代码中定位 a 的第一次出现，请使用以下命令：

```
form div:first-child label {
  padding: 0;
} 
```

这将针对`<div>`元素内的任何标签，即`first-child`表单的标签。

请记住，您可以`:first-child`在任何子选择器上使用，而不仅仅是在最右边！

# bash - 在 bash 脚本中将 csv 转换为 CRLF 行尾

> ID：14483529
> 
> 赞同：2
> 
> 时间：2013-01-23T15:44:34.493
> 
> 标签：bash, sed

我有一个 csv，我正在使用 csv2json 将其转换为 JSON。我在更改脚本后遇到了一个问题，发现它是因为我的行尾。

当我尝试将我的 csv (original.csv) 转换为 json 时，由于行尾而出现错误。所以我在 Coda（我正在使用的文本编辑器）中打开了 csv，然后选择“转换为 CRLF”，保存文件，然后重新运行 csv2json。有效。

我的问题是，如何在 bash 脚本中将 original.csv 转换为 CRLF？

我尝试使用 sed 没有运气：

```
sed 's/$'"/`echo \\\r`/" original.csv > new.csv 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:10:14.050

最终使用 perl：

```
perl -pe 's/\r\n|\n|\r/\r\n/g' original.csv > new.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:50:44.163

没有`bash`或`sed`只有另一个非常简单的解决方案：

在 Debian 和 Ubuntu 等衍生产品上，您可以使用以下`unix2dos`命令轻松转换`LF`为`CRLF`文件：

```
unix2dos -n original.csv new.csv 
```

您可以使用`dos2unix`软件包安装它：

```
apt-get install dos2unix 
```

要再次转换`CRLF`使用`LF`命令`dos2unix`。

# ios - NSArray 初始化方法

> ID：14483531
> 
> 赞同：3
> 
> 时间：2013-01-23T15:45:09.253
> 
> 标签：ios, objective-c, initialization, nsarray

初始化数组有什么区别

```
NSArray * array = [NSArray array]; 
```

和

```
NSArray * array = @[]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T16:11:55.250

`@[]`是以下的简写：

```
id a = nil;
NSArray* array = [NSArray arrayWithObjects:&a count:0]; 
```

`[NSArray array]`出于所有意图和目的，这实际上只是 的简写。

这是在特定版本的编译器中添加的功能（实际上并不需要对*这种*特定语法的运行时支持）。

它根本*不像*生成*编译时间常数并且不会**在运行时*导致消息传递的`@""`简写。实际上，(any ) 是一种特殊情况，因为它会发出一个编译时常量，该常量在运行时实现，消息为零；零活力。与对象的常规实例相比， A更类似于 Objective-C 类。`@""`**`@""``@"sequence"``@"..."`**

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T15:47:10.370

`NSArray * array = @[];`是新的做事方式`NSArray * array = [NSArray array];`**

# ruby-on-rails - 选择与所有给定记录有关系的记录

> ID：14483536
> 
> 赞同：0
> 
> 时间：2013-01-23T15:45:29.423
> 
> 标签：ruby-on-rails, join, rails-activerecord

快速总结。

一个产品具有并属于许多功能 一个功能具有并且属于许多产品

我想找到具有所有选定功能的所有**产品**。

例子：

*   提供_1 具有功能 1
*   提供_2 具有功能 2
*   Offering_3 具有特征 1 和特征 2
*   Offering_4 具有特征 1、特征 2 和特征 3

当我打电话时，`Offering.with_features([1,2,3])`我希望**只**找到Offering_4，因为它是唯一具有这三个功能的产品。

这似乎是一个愚蠢的问题，但我找不到返回该结果的良好联接。我测试过的所有连接都会返回具有**任何**给定功能的产品，而不是**ALL**。

想法？

**更新**

按照*doublea*的建议，我创建了具有自己 ID 的表，而不是连接表。它的解决方案仍然有效，我已经实现了这样的：

```
# offering.rb
def self.with_features(features)
  if features && features.any?
    where(id: FeatureOfferingRelation.with_all_features(features).pluck(:offering_id))
  else
    scoped
  end
end

# feature_offering_relation.rb
def self.with_all_features(features)
  select(:offering_id)
    .where(feature_id: features)
    .group(:offering_id)
    .having("count(distinct feature_id) = ?", features.size)
end 
```

有用！！但我会接受使用连接而不是子查询的其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:16:36.603

认为查询将是这样的。让我知道它是否有效，否则将在稍后对其进行测试/修复。

```
"select offering_id from features_offerings where feature_id in (?) 
group by offering_id having count(distinct feature_id) = ?", 
feature_ids, feature_count 
```

几件事：

1.  建议使用适当的模型作为连接表，因此使用**has_many, :through**，而不是**has_and_belongs_to_many**。通常对我来说效果更好。在这种情况下，想想会使生成查询更容易。
2.  建议使用斯坦福 DB 类的工具。早期关于关系代数和 SQL 查询的视频对我很有帮助。

[http://class2go.stanford.edu/db/Winter2013](http://class2go.stanford.edu/db/Winter2013)

该跑了。再次，如果您需要更多，请联系我们。

干杯，

# java - Joda DateTime 非法值

> ID：14483544
> 
> 赞同：1
> 
> 时间：2013-01-23T15:45:57.240
> 
> 标签：java, exception-handling, jodatime

我正在使用*Joda-Time*处理应用程序中的日期，发现自己很困惑。我需要使用两个字符串生成日期（一个用于日期，一个用于一天中的小时）。

我已通过使用 RegEx 确定了一天中的时间，但仍有一些日期通过我的 RegEx（例如 2 月 30 日）。

我考虑过在 try 块中使用以下 DateTime 构造（一旦解析了子字符串）

```
DateTime(
    int year,
    int monthOfYear,
    int dayOfMonth,
    int hourOfDay,
    int minuteOfHour
) 
```

然后在 catch 块中抛出我的函数的异常，但根据[api doc](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#DateTime%28int,%20int,%20int,%20int,%20int%29)，这个构造函数不会`IllegalArgumentException`像其他一些人那样抛出我期望捕获的异常。

任何人都有任何指针来判断 MoY/DoM 夫妇是否形成有效的一对以便能够抛出异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:49:52.493

尽管没有记录，但如果值无效，它将抛出[`org.joda.time.IllegalFieldValueException`](http://joda-time.sourceforge.net/api-release/org/joda/time/IllegalFieldValueException.html)（ 的子类）。`IllegalArgumentException`示例代码：

```
import org.joda.time.*;

public class Test {
    public static void main(String[] args) {
        DateTime dt = new DateTime(2012, 2, 30, 0, 0);
        System.out.println(dt);
    }
} 
```

结果：

```
Exception in thread "main" org.joda.time.IllegalFieldValueException: Value 30 for dayOfMonth must be in the range [1,29]
    at org.joda.time.field.FieldUtils.verifyValueBounds(FieldUtils.java:235)
    at org.joda.time.chrono.BasicChronology.getDateMidnightMillis(BasicChronology.java:605)
    at org.joda.time.chrono.BasicChronology.getDateTimeMillis(BasicChronology.java:177)
    at org.joda.time.chrono.AssembledChronology.getDateTimeMillis(AssembledChronology.java:133)
    at org.joda.time.chrono.ZonedChronology.getDateTimeMillis(ZonedChronology.java:119)
    at org.joda.time.chrono.AssembledChronology.getDateTimeMillis(AssembledChronology.java:133)
    at org.joda.time.base.BaseDateTime.<init>(BaseDateTime.java:254)
    at org.joda.time.base.BaseDateTime.<init>(BaseDateTime.java:195)
    at org.joda.time.DateTime.<init>(DateTime.java:307)
    at Test.main(Test.java:6) 
```

显然，如果这*被*记录在案会很好......

# android - HTML5 在 WebView 或 VideoView

> ID：14483549
> 
> 赞同：0
> 
> 时间：2013-01-23T15:46:03.807
> 
> 标签：android, html, webview, html5-video, android-videoview

有没有一些简单的方法可以在 webview 中播放 HTML5 <video> 标签？或者只是在另一个只有一个 VideoView 的 Activity 中播放它？（不管是哪一个）
网页（HTML5 代码）是在第 3 方上传带有 < video > 标签的视频（最终以某种“新闻源”结尾）时自动生成的。我试图让用户能够单击视频的图像并转到我的 video_activity，它只包含一个 VideoView 并播放它。

知道如何做到这一点吗？我尝试了很多不同的东西，但没有任何效果。
如果您有想法，请提供帮助！我将不胜**感激**！
提前致谢！如果您想查看一些代码，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:15:47.663

您可以查看用于播放视频的 API 演示代码

您可以使用 android[视频视图](http://developer.android.com/reference/android/widget/VideoView.html)

由于您使用的是视频标签，因此我不确定兼容性问题

为了获得更好的性能，您的设备应支持[硬件加速](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

注意：由于您使用的是 MP4，因此可能存在编解码器支持等问题，因此您也必须注意这一点

# c# - 将dll替换为较新的版本

> ID：14483550
> 
> 赞同：1
> 
> 时间：2013-01-23T15:46:07.133
> 
> 标签：c#, .net-assembly, caliburn.micro, assemblybinding, fuslogvw

我有一个包含许多项目的 Caliburn.Micro 应用程序。多个项目在单独的文件夹中引用相同的 dll。现在我需要用更新的版本替换那个 dll。我从所有项目中删除了引用并再次添加。但我收到运行时错误：

![在此处输入图像描述](../Images/be5adb0651dc5a6cfaf59fa7f303fe11.png)

能否请你帮忙？

PS 我尝试使用 fuslogvw.exe，但它显示为空： ![在此处输入图像描述](../Images/d185cdbe6c276c9472875107b4db477c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:55:55.287

我认为您正在使用 Visual Studio。首先，如果特定版本设置为 False，请检查所有 FileHelpers 引用的属性（如果没有，请执行此操作）。尝试清理并重建。

如果问题仍然存在，请在解决方案的 app.config `configuration`部分中添加

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="FileHelper" publicKeyToken="3e0c08d59cc3d657" culture="neutral"/>
            <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

通过这种方式，您应该能够将使用过的版本强制为新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:11:50.433

我的猜测是您需要添加对其他程序集的引用。

请附上 csproj 的文本以显示对您更新的 dll 的引用。

程序集可以引用其他不需要编译但在运行时需要的程序集。您需要确定是否`FileHelpers`是您明确引用的程序集。请参阅以下链接了解如何使用 Fusion Log Viewer。它将为您提供有关在何处查找程序集的信息。

*   [MSDN 文档](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.110%29.aspx)
*   [故障排除](https://stackoverflow.com/questions/255669/how-to-enable-assembly-bind-failure-logging-fusion-in-net)
*   [Hanselman 在 fuslogvw 上的一篇旧帖子](http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx)

# c# - 太慢了，排序不起作用

> ID：14483553
> 
> 赞同：1
> 
> 时间：2013-01-23T15:46:16.987
> 
> 标签：c#, sorting, datagridview

我正在`combobox`为`datagridview`.

```
private DataClasses1DataContext db = new DataClasses1DataContext();
private int numberOfObjectsPerPage = 20;
private int CurrentPageIndex = 1;
private string ordering = "c.name ascending";

private void Form1_Load(object sender, EventArgs e)
{
    GetData(CurrentPageIndex);            
}

private void GetData(int page)
{
    page = page - 1;            

    var query = (from c in db.enterprise
    orderby ordering
                    select new { c.id, c.name, c.phone, c.email, c.type, c.city })
                    .Skip(numberOfObjectsPerPage * page).Take(numberOfObjectsPerPage);

    dataGridView1.DataSource = query;
}

private void orderBtn_Click(object sender, EventArgs e)
{
    if (orderCB.SelectedIndex == 1)
    {
        ordering = "c.name descending";
    }
    else if (orderCB.SelectedIndex == 2)
    {
        ordering = "c.id ascending";
    }
    else if (orderCB.SelectedIndex == 3)
    {
        ordering = "c.id descending";
    }
    else
    {
        ordering = "c.name ascending";
    }

    GetData(CurrentPageIndex);            
} 
```

我这里有两个问题。

1.  我当前的数据是关于`2.500`行的。我正在使用分页，所以它会显示`20`数据/页面，但是在加载`datagridview`. 有什么问题？
2.  我的订购按钮不起作用。

这是我第一次使用 C#，所以也许我在这里错过了一些东西：D

更新

所以我根据 the_joric 的建议更改了我的代码

```
Func<IEnumerable<cooperations>, IEnumerable<cooperations>> ordering = t => t; 
```

我根据此参考将 DBType 更改为合作（希望我是对的：D） ![在此处输入图像描述](../Images/bcc0b388b8de2afdc1a037303189e591.png)

但是后来我的datagridview没有显示任何东西，我得到的是这个

```
System.Linq.Enumerable+<TakeIterator>d__3a`1[<>f__AnonymousType0`7[System.Int32,System.String,System.String,System.String,System.String,System.String,System.String]]
A first chance exception of type 'System.ArgumentOutOfRangeException' occurred in mscorlib.dll 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:41:52.817

您的按钮不起作用，因为您是按常量字符串键排序的。是应该采用键选择器`orderby`的方法的语法糖。`OrderBy<>()`在您的情况下，选择器始终是所有项目都相同的字符串。但它应该是一个接受您的对象并返回其键的函数

你可以尝试这样的事情：

```
// instead of DbType your should use the type of db.enterprise
Func<IEnumerable<DbType>, IEnumerable<DbType>> ordering= t => t; // default ordering (as it is)
...
var query = (from c in ordering(db.enterprise)
                    select new { c.id, c.name, c.phone, c.email, c.type, c.city })
                    .Skip(numberOfObjectsPerPage * page).Take(numberOfObjectsPerPage);
...
// in your button click method
if (orderCB.SelectedIndex == 1)
{

    ordering = t => t.OrderByDescending(i => i.name); 
}
else if (orderCB.SelectedIndex == 2)
{
    ordering = t => t.OrderBy(i => i.id); 
}
... 
```

# javascript - jQuery 插件不起作用...“类型错误：‘未定义’不是函数”

> ID：14483557
> 
> 赞同：1
> 
> 时间：2013-01-23T15:46:28.780
> 
> 标签：javascript, jquery, ruby-on-rails-3.2

我有一个使用 jQuery 的 Ruby Rails 应用程序，我正在尝试加载插件，但它不工作；脚本以“正确”顺序加载（即 jquery、jquery_ujs、插件、自己的脚本），但任何插件函数（特别是测试 niceScroll 和 jScrollPane）都会失败，并显示“类型错误：‘未定义’不是函数”。在 Web Inspector 中，我可以看到插件脚本在 jQuery 脚本之后成功加载，但我根本无法让它工作。

jQuery itselt 工作得很好，事实上 Turbolinks 和 jQuery turbolinks 也工作得很好。但是，尝试调用“ `$('.something').niceScroll`”（或任何其他插件）会产生上述类型错误。

这是我的应用程序.js：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require turbolinks
//= require jquery.turbolinks
//= require socket.io
//= require jquery.jscrollpane.min
//= require jquery.mousewheel
//= require auctions 
```

其中，当放置在应用程序布局中时，会产生这个（部分）html：

```
<head>
  <title>Slamlaunch</title>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css">
<link href="/assets/active_admin.css?body=1" media="all" rel="stylesheet" type="text/css">
<link href="/assets/auctions.css?body=1" media="all" rel="stylesheet" type="text/css">
<link href="/assets/marketing/marketing.css?body=1" media="all" rel="stylesheet" type="text/css">
<link href="/assets/patches.css?body=1" media="all" rel="stylesheet" type="text/css">
<link href="/assets/products.css?body=1" media="all" rel="stylesheet" type="text/css">
<link href="/assets/sessions.css?body=1" media="all" rel="stylesheet" type="text/css">
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-affix.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/turbolinks.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.turbolinks.js?body=1" type="text/javascript"></script>
<script src="/assets/socket.io.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.jscrollpane.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.mousewheel.js?body=1" type="text/javascript"></script>
<script src="/assets/auctions.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param">
<meta content="LzMLqv0Sb7+89JGe0U5x2ZGkECJ4l1gfbiD/81jFJD4=" name="csrf-token">
</head> 
```

另外，是的，所有相关代码都在 $(function(){}) 块或控制台中执行，在所有库加载很久之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:49:14.120

出现此问题主要是因为脚本加载不正确，根据您的情况，
尝试将所有代码放入

```
$(function(){
//your code
}) 
```

还要检查一下 jquery 没有被下载两次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-30T04:26:19.453

尝试将所有代码放入以下外壳中。然后它起作用了，对我有用。可能是插件可能没有完全加载的问题，因此调用了**“$(document).ready(function(){})”**。之后，它就像一个魅力。

```
 (function($){

    $(document).ready(function(){

    //Your plugin functions to be called here.

    });

    })(jquery); 
```

如果你在下面使用**“$(document).ready(function(){})”**

```
$(function(){}); 
```

它行不通。不知道为什么。

# sql-server - 为什么 sql server 自动对表变量的行进行排序？

> ID：14483561
> 
> 赞同：3
> 
> 时间：2013-01-23T15:46:35.010
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我注意到在编写插入表变量的 sproc 值时，其顺序与插入顺序不同。有没有办法在不添加另一列进行排序的情况下禁用这种自动排序？想到的想法是正在创建的自动索引或一些排序规则设置......有什么想法吗？

访问[http://sqlfiddle.com/#!3/e1c06/13](http://sqlfiddle.com/#!3/e1c06/13)看看我的意思

```
declare @tmpTbl table (name varchar(100))
insert into @tmpTbl
select 'mark'
union
select 'frank'
union
select 'sharon'
union
select 'jason'

select * from @tmpTbl 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:51:45.213

简短的回答是（可能）“因为存储引擎将您的行存储在无序堆中，当您不指定 ORDER BY 时，这会影响行的输出方式。”

根据 SQL 规范，除非您在 SELECT 查询中提供 ORDER BY，否则排序顺序是**undefined 。**这就是它在每个 SQL 数据库中的方式，无论是 MySql、Oracle 还是 SQL Server。如果数据以您期望的顺序从表中出来，那是巧合，或者很可能是优化器如何生成查询的副作用，或者存储引擎如何选择物理存储行（可能是在这种情况下的根本原因）。

如果您以所需的排序顺序向表中添加聚集索引，则多次（但并非总是）该表将按照您期望的顺序出现。 **永远不要依赖这种行为。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:56:33.220

如果您希望它们按插入顺序排序，则在表中添加一个自动递增字段，然后您可以在选择数据时将其包含在 ORDER BY 中。

否则 SQL Server 将不会以特定顺序返回您的数据 - 它现在可能似乎正在“排序”返回它，但将来可能不是这种情况。

顺便说一句 - 联合查询本身实际上返回的结果排序不同于它们在您的语句中出现的顺序。这可能是使用 UNION 与 UNION ALL 的结果，因为 union 是不同的，它可能意味着某种类型。所以，你得到的结果实际上是插入顺序。

# iphone - 用通用应用程序替换 iphone 应用程序和 ipad 应用程序

> ID：14483562
> 
> 赞同：0
> 
> 时间：2013-01-23T15:46:35.380
> 
> 标签：iphone, ios, ipad, app-store, universal

我在应用商店中有两个应用，一个**iPhone**应用和一个**iPad**应用。现在我构建了一个**通用**应用程序，但不知道如何用通用应用程序替换现有的两个应用程序。因为我的 iphone 应用程序有旧版本，所以应用程序评价不好。我可以用我的新**通用**版本“重置”评级吗？在这种情况下，我有两种方法

1.  更换 iPhone 应用，让 iPad 用户下载新的通用版本并删除已有的版本
2.  将通用应用程序上传为具有新应用程序标识符的新应用程序，并让我的所有用户下载新应用程序并删除旧应用程序，然后使旧版本不可用（在这种情况下，我会摆脱低评级）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:51:20.690

我要做的是替换拥有最多用户的应用程序，以便强制最少数量的用户删除一个应用程序并下载一个新应用程序。换句话说，如果 iPhone 应用程序的下载量比 iPad 应用程序多得多，那么我会从 App Store 中删除 iPad 应用程序并使用新的通用版本更新 iPhone 应用程序。

这个推理没有考虑以下几点：

1.  正如你所说，iPhone 应用程序的评价很差，你会保留它们；用户可能会再次对其进行评分，但会有一些惯性；

2.  您不确定您的两个版本有多少“活跃”用户；具体来说，如果 iPhone 版本有差评，很可能大多数用户已经从他们的设备中删除了它；为了更好地估计“活跃”用户，您可以使用您的应用在上次更新时的下载次数。

希望这可以帮助。

# powershell - 为什么我不能在作业中使用 Get-QADComputer？

> ID：14483566
> 
> 赞同：0
> 
> 时间：2013-01-23T15:46:46.427
> 
> 标签：powershell, jobs, powershell-3.0, quest

为什么 Quest.ActiveRoles.ADManagement 在工作中不可用？

交互运行时好的：

```
PS>Get-QADComputer -SearchRoot '$ou' -SizeLimit 200 |
    %{ if (Test-Connection -Quiet $_.name) { 
         $lastboottime = (Get-WmiObject -Class Win32_OperatingSystem -computername $_.name).LastBootUpTime;  
         $sysuptime = (Get-Date) - System.Management.ManagementDateTimeconverter]::ToDateTime($lastboottime)
write-host "$($_.name) allumé depuis $($sysuptime.days) jours" }  }

domain\comp1$ allumé depuis 8 jours
domain\comp2$ allumé depuis 0 jours 
```

但是在使用作业时：

```
PS>start-job -Name uptime -ScriptBlock{Get-QADComputer -SearchRoot '$ou' -SizeLimit 200 |
        %{ if (Test-Connection -Quiet $_.name) { 
             $lastboottime = (Get-WmiObject -Class Win32_OperatingSystem -computername $_.name).LastBootUpTime;  
             $sysuptime = (Get-Date) - System.Management.ManagementDateTimeconverter]::ToDateTime($lastboottime)
    write-host "$($_.name) allumé depuis $($sysuptime.days) jours" }  }} 
```

它抱怨找不到命令

```
PS>Receive-Job uptime -Keep
Le terme «Get-QADComputer» n'est pas reconnu comme nom d'applet de commande,
fonction, fichier de script ou programme exécutable. Vérifiez l'orthographe du
nom, ou si un chemin d'accès existe, vérifiez que le chemin d'accès est correct et
réessayez.
    + CategoryInfo          : ObjectNotFound: (Get-QADComputer:String) [], Command
   NotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException
    + PSComputerName        : localhost 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:48:39.183

Powershell 作业在单独的进程中运行，因此请先尝试在脚本块中导入模块。前任：

```
Start-Job -InitializationScript { Import-Module ...module here... } -Name uptime -ScriptBlock { ...your code.... } 
```

# javascript - 从 localhost 调用 chrome 扩展功能

> ID：14483567
> 
> 赞同：0
> 
> 时间：2013-01-23T15:46:49.263
> 
> 标签：javascript, google-chrome, google-chrome-extension

我有以下问题。

我已经编写了 chrome 扩展并将其加载到浏览器中。现在我想从扩展脚本之外的任何页面调用一个 JavaScript 函数（例如：从 localhost 上的服务器调用）；

例如，我在扩展中有该脚本：

```
var jqr= jQuery.noConflict(true);
(function($) {

var cls= { ... };

cls.init = function() {
  var listener = function(event) {
  }
}

var anotherCall= function() {...}

})(jqr); 
```

现在我想从扩展之外的任何页面调用该函数。

```
<body>

<script>
function foo(){
     listener({data:"value"}); 
      anotherCall()
}
</script>

<button onclick="foo()">Click me</button>

</body> 
```

它不起作用， listener 和 anotherCall 是**undefined**。我怎样才能做到这一点？

# c++ - 使用 GCC 的 std::list 迭代器的“auto”关键字

> ID：14483569
> 
> 赞同：3
> 
> 时间：2013-01-23T15:46:53.747
> 
> 标签：c++, gcc, c++11

我正在编写 C++ 应用程序，它应该在 Windows 上使用 MS C++ 和 Linux 上的 GCC 进行编译。我在 Windows 上编写了一个循环，它遍历 std::list：

```
 auto  iter = container.GetObj()->begin();
 while (iter!=container.GetObj()->end()){

   (*(iter++))->Execute();

 } 
```

它工作正常，但是在使用 GCC“auto”编译时无法识别：

**意外的令牌“auto”** （在 NetBeans IDE 中）

所以我修复了它“明确地定义迭代器：

```
 std::list<Container*>::iterator iter=container.GetObj()->begin();
 while (iter!=container.GetObj()->end()){

   (*(iter++))->Execute();

 } 
```

**我的 GCC 版本是 4.7.2**

这是否意味着 GCC 不支持 auto 关键字？可能我需要升级编译器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:49:47.377

[这](http://gcc.gnu.org/projects/cxx0x.html)是 gcc c++ 11 支持的链接。您还需要将 -std=c++11 添加到命令行。

# events - 在 primefaces 时间表中显示事件数

> ID：14483573
> 
> 赞同：1
> 
> 时间：2013-01-23T15:47:04.007
> 
> 标签：events, primefaces, scheduler

我正在使用 primefaces(3.4.2) 调度程序组件。

[http://www.primefaces.org/showcase/ui/schedule.jsf](http://www.primefaces.org/showcase/ui/schedule.jsf)

我必须显示特定日期的事件数量

```
 <p:schedule style="width:600px;margin-left:200px;" initialDate="#{scheduleController.initDate}" value="#{scheduleController.eventModel}" id="myschedule" widgetVar="myschedule" view="month" leftHeaderTemplate="prev" rightHeaderTemplate="next" centerHeaderTemplate="title">                           

</p:schedule> 
```

有什么办法可以证明这一点吗？请帮忙

# ios - 在 Objective-C iOS 中将内容上传到 FTP

> ID：14483577
> 
> 赞同：1
> 
> 时间：2013-01-23T15:47:13.383
> 
> 标签：ios, objective-c, upload, ftp

几天前，我在询问如何从 FTP 下载文件，并解决了 NSData 和 dataWithContentsOfURL 的问题：

`ftp://user:pass@server/path/of/file.extension`

但是现在我需要上传一个文件，我想知道是否有任何通过 URL 上传文件的指令，但我认为这是不可能的，而且我看到的许多 iOS 库都使用 PHP，我不想要它， Apple 的 SimpleFTPSample 让初级开发人员感到非常困惑，以至于我什么都不懂，所以一个简单的代码来上传指定 URL、路径、文件、用户和密码的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:33:50.073

如果您想要一个简单的库，我建议您使用 HTTP 和 AFNetworking 库。

但是，如果您想做 FTP，Apple 会提供分步说明。它有点毛茸茸，所以我建议根据需要复制和粘贴和调整。您将不得不稍微阅读一下文档。查找“上传文件”部分。

[http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html](http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html)

这应该有助于苹果不提供代码的初始部分

```
CFStringRef url = CFSTR("ftp://ftp.somedomain.com/file.txt");
CFURLRef requestURL = CFURLCreateWithString(kCFAllocatorDefault, url, NULL);

CFReadStreamRef readStream = CFReadStreamCreateWithFTPURL(kCFAllocatorDefault, requestURL); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T16:39:08.393

看看[Apple Simple FTP Sample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html)。你需要的一切都在那里。

如果您正在寻找框架，请查看[ConnectionKit 项目](http://github.com/karelia/ConnectionKit/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T17:19:02.103

[BlackRaccoon](https://github.com/lloydsargent/BlackRaccoon)是一个很好的免费开源库，用于进行 FTP 传输。

# c# - 在本地计算机上调用 InitiateSystemShutdown

> ID：14483578
> 
> 赞同：1
> 
> 时间：2013-01-23T15:47:19.383
> 
> 标签：c#, windows, system-shutdown, power-off

使用时

```
InitiateSystemShutdown(null, null, 0, true, false); 
```

发生了一些奇怪的事情。当我只调用该函数时一切正常，在我的关机计时器应用程序中也可以正常工作，但问题是它在空闲 30 分钟以上并且我的显示器关闭时不会关闭电脑。

我使用其他功能尝试关闭系统，但无论我使用什么，我都遇到了同样的问题。系统不会进入睡眠或休眠或类似的状态，它只是关闭显示器。

在调用函数或类似的东西之前，是否需要以某种方式“唤醒”系统。

方法声明为：

```
static extern bool InitiateSystemShutdown(
      [MarshalAs(UnmanagedType.LPStr)] string lpMachinename,
      [MarshalAs(UnmanagedType.LPStr)] string lpMessage,
      Int32 dwTimeout,
      bool bForceAppsClosed,
      bool bRebootAfterShutdown); 
```

# vim - 单击时从书呆子树复制路径

> ID：14483579
> 
> 赞同：2
> 
> 时间：2013-01-23T15:47:20.450
> 
> 标签：vim, macvim, nerdtree

怎么可能做到这一点？

我想用 CTRL-R 在命令模式下粘贴它的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:23:06.503

您可以使用插件自己的扩展系统进行自定义映射；甚至有一个例子`:help NERDTreeAddKeyMap()`几乎可以满足您的需求。

只需将以下片段放入`~/.vim/nerdtree_plugin/yank_mapping.vim`：

```
call NERDTreeAddKeyMap({
        \ 'key': '<LeftMouse>',
        \ 'callback': 'NERDTreeYankCurrentNode',
        \ 'quickhelpText': 'put full path of current node into the default register' })

function! NERDTreeYankCurrentNode()
    execute "normal! \<LeftMouse>"
    let n = g:NERDTreeFileNode.GetSelected()
    if n != {}
        call setreg('"', n.path.str())
    endif
endfunction 
```

* * *

**上一个答案**（没有 NERDTree Keymap API）

您可以在末尾注入一个小函数`plugin/NERD_tree.vim`来访问脚本的内部：

```
function! GetSelected()
    return s:TreeFileNode.GetSelected()
endfunction 
```

然后，修改（您可以将它们放在同一个地方）将是：

```
:autocmd FileType nerdtree
\    nnoremap <silent> <buffer> <LeftMouse>
\    <LeftMouse>:silent! call setreg('"', GetSelected().path.str())<CR> 
```

# javascript - JSON 不适用于 JQuery

> ID：14483580
> 
> 赞同：0
> 
> 时间：2013-01-23T15:47:25.393
> 
> 标签：javascript, jquery, json

我的 JSON 有问题吗？

[http://codepen.io/anon/pen/Ieyvl](http://codepen.io/anon/pen/Ieyvl)

```
var url = "http://x.com/json.js";

$.getJSON(url, function(response){
    alert("worked!");
    alert(response);
}); 
```

如果它是一个“跨域”问题，那么为什么会这样呢？

[http://codepen.io/anon/pen/BHshC](http://codepen.io/anon/pen/BHshC)

```
var url = "http://gdata.youtube.com/feeds/api/playlists/PL3E245DF445E37F50?v=2&alt=jsonc";

$.getJSON(url, function(response){
    alert("worked!");
    alert(response);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:51:14.600

看控制台：

> XMLHttpRequest 无法加载 [http://xml.hosting.subsplash.com/5KQ4CM/json.js](http://xml.hosting.subsplash.com/5KQ4CM/json.js)。Access-Control-Allow-Origin 不允许来源 [http://secure.codepen.io 。](http://secure.codepen.io)

阅读有关[同源政策](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)。

如果他们支持，您需要使用 JSONP。如果服务器支持它，请查看[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

* * *

[编辑]

我没有检查，但如果 Google 示例有效，可能是因为 Google 为该资源启用了 CORS。这意味着支持它的浏览器可以通过 Ajax 调用请求资源。并非所有浏览器都支持这种类型的*握手*请求。[看着你老的 IE]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:51:00.763

它是有效的 JSON，也许 jquery 有问题，因为它返回 mimetype application/javascript 而不是 application/json

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:03:51.037

如果您阅读[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)上的 jQuery.getJSON() 文档，
它会显示以下内容： 由于浏览器安全限制，大多数“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。还要记住：从 jQuery 1.4 开始，如果 JSON 文件包含语法错误，请求通常会静默失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:20:26.570

托管服务器未正确处理响应类型，此外您需要将其作为 JSONP 执行，或者如果使用 getJSON 添加 ?callback=? 最后到你的网址。

```
var url = "http://xml.hosting.subsplash.com/5KQ4CM/json.js?callback=?";

$.getJSON(url, function(response){
    alert("worked!");
    alert(response);
}); 
```

# visual-studio - LocalDb 用于单元测试，将实体框架 5.0 部署到 AppHarbor

> ID：14483584
> 
> 赞同：4
> 
> 时间：2013-01-23T15:47:30.120
> 
> 标签：visual-studio, entity-framework-5, appharbor, vs-unit-testing-framework

是否可以在 Visual Studio 2012 中针对使用 Entity Framework 5.0 Code-First 构建的 localDb 运行单元测试？目前我们的开发是针对 SQL Express 服务器实例，但这不适用于 AppHarbor 部署，因为 Db 不可用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T00:23:57.937

我不确定使用 LocalDB 会解决您的问题。要使用 LocalDB，LocalDB 仍然必须安装在运行单元测试的机器上，而在 AppHarbor 上可能不是这样。

考虑这些资源的替代品：

1.  [首先使用内存数据库集成测试实体框架代码](https://stackoverflow.com/questions/5912128/integration-testing-entity-framework-code-first-with-in-memory-database) （使用 SQL Server CE，使用单元测试目录中的文件）
2.  [努力](http://effort.codeplex.com)（让我们创建模式并在内存中运行单元测试而不接触文件系统 - 可能更可取）

# html - z-index 不适用于绝对位置

> ID：14483589
> 
> 赞同：148
> 
> 时间：2013-01-23T15:47:54.080
> 
> 标签：html, css

我打开了控制台（chrome\firefox）并运行了以下几行：

```
$("body").append("<div id=\"popupFrame\" style=\"width:100%;height:100%;background-color:black;opacity:0.5;position:absolute;top:0;left:0;z-index:1;\" />");
$("body").append("<div id=\"popupContent\" style=\"width:200px;height:200px;z-index:1000;background-color:white;\" >dasdasdsadasdasdasdasdasd</div>"); 
```

#popupContent 应该是最重要的，但它受#popupFrame 不透明度的影响。

内容不包含在#popupFrame 中，这很奇怪。

目标是创建类似 Firefox 的警报框

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2013-01-23T15:50:06.083

第二个 div 是`position: static`（默认），因此 z-index 不适用于它。

您需要定位（将 position 属性设置为除 之外的任何东西，在这种情况下`static`您可能想要`relative`）任何您想要给予的东西`z-index`。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2018-02-15T15:33:57.937

老问题，但这个答案可能对某人有所帮助。

如果您试图在容器边界之外显示容器的内容，请确保它没有`overflow:hidden`，否则它之外的任何内容都会被截断。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2013-01-23T15:49:59.657

不透明度会改变 z-index 的上下文，静态定位也是如此。要么为没有它的元素添加不透明度，要么从有它的元素中删除它。您还必须使两个元素都静态定位或指定相对或绝对位置。以下是有关上下文的一些背景：http: [//philipwalton.com/articles/what-no-one-told-you-about-z-index/](http://philipwalton.com/articles/what-no-one-told-you-about-z-index/)

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2013-01-23T15:51:26.430

`z-index`仅适用于已被明确定位的元素。添加`position:relative`到#popupContent，你应该很高兴。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-22T04:27:17.553

我在使用时`position: absolute;`经常遇到这个问题，我`position: relative`在子元素中使用时遇到了这个问题。不需要改成`position: absolute`，`relative`只需要在子元素中加入就可以了，看下面两个例子：

```
let toggle = document.getElementById('toggle')

toggle.addEventListener("click", () => {
 toggle.classList.toggle('change');
})
```

```
.container {
  width: 60px;
  height: 22px;
  background: #333;
  border-radius: 20px;
  position: relative;
  cursor: pointer;

}

.change .slide {
  transform: translateX(33px);
}

.slide {
  transition: 0.5s;
  width: 20px;
  height: 20px;
  background: #fff;
  border-radius: 20px;
  margin: 2px 2px;
  z-index: 100;
}

.dot {
  width: 10px;
  height: 16px;
  background: red;
  position: absolute;
  top: 4px;
  right: 5px;
  z-index: 1;
}
```

```
<div class="container" id="toggle">
  <div class="slide"></div>
  <div class="dot"></div>
</div>
```

# 这是使用相对位置固定的方法：

```
let toggle = document.getElementById('toggle')

toggle.addEventListener("click", () => {
 toggle.classList.toggle('change');
})
```

```
.container {
  width: 60px;
  height: 22px;
  background: #333;
  border-radius: 20px;
  position: relative;
  cursor: pointer;

}

.change .slide {
  transform: translateX(33px);
}

.slide {
  transition: 0.5s;
  width: 20px;
  height: 20px;
  background: #fff;
  border-radius: 20px;
  margin: 2px 2px;
  z-index: 100;

  // Just add position relative;
  position: relative;
}

.dot {
  width: 10px;
  height: 16px;
  background: red;
  position: absolute;
  top: 4px;
  right: 5px;
  z-index: 1;
}
```

```
<div class="container" id="toggle">
  <div class="slide"></div>
  <div class="dot"></div>
</div>
```

# [沙箱在这里](https://jsbin.com/guhunuwute/edit?html,css,js,output)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-30T01:49:12.740

我遇到了同样的问题，我试图通过in a with a`appending`的元素来解决它，我的问题是快速拨号（reactjs + material），所以我不知道它是否适用于所有情况。`absolute position``div``sticky position`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-21T09:35:59.407

可能为时已晚，但它可以作为替代方法的首选。以绝对位置显示元素的分层顺序取决于元素插入父元素的顺序。换句话说，可以不使用 z-index，而是通过添加 $(parent).prepend(me) 将其发送到后面，并通过添加 $(parent) 将其带到前面。附加（我）。

```
function BringToFront(){
  $("#parent").append($("#me"));
}

function SendToBack(){
  $("#parent").prepend($("#me"));
}
```

```
#mySister{
position:absolute;
left:25px;
top:25px;
width:100px;
height:100px;
background-color: red;
}

#me{
position:absolute;
left:50px;
top:50px;
width:100px;
height:100px;
background-color: yellow;
}

#myBrother{
position:absolute;
left:75px;
top:75px;
width:100px;
height:100px;
background-color: blue;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div id="parent">

  <div id="mySister">&nbsp;</div>

  <div id="me">Hello! this is me!</div>

  <div id="myBrother">&nbsp;</div>

</div>

<button type="button" onclick="BringToFront()">Bring to front</button>
<button type="button" onclick="SendToBack()">Send to back</button>
```

# .net - PayPal API 通过交易 ID 获取送货地址

> ID：14483590
> 
> 赞同：1
> 
> 时间：2013-01-23T15:48:00.807
> 
> 标签：.net, api, paypal

PayPal 是否提供 API 以通过交易 ID 检索送货地址？

ps 我正在使用 /n 软件 PayPal Integrator for .Net。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:33:37.223

您可以使用[GetTransactionDetails](https://developer.paypal.com/docs/classic/api/merchant/GetTransactionDetails_API_Operation_SOAP/)获取有关订单的所有信息，包括送货地址。

# c# - 如何创建行并将其附加到此 DataGridView？

> ID：14483597
> 
> 赞同：0
> 
> 时间：2013-01-23T15:48:24.733
> 
> 标签：c#, .net, winforms, datagridview

我是 .Net 的初学者，所以也许我的问题对你们中的一些人来说似乎很幼稚。

我在 WinForm 项目中有 DataGridView 表： ![在此处输入图像描述](../Images/8e0e2d6f0c4277bcfba5717bc3ed489c.png)

它包含三列（图像、组合框和文本框列）。

知道如何创建并将行附加到此表吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:13:54.377

您创建一个数据源，然后将数据源绑定到网格的 DataSource 属性。然后将记录添加到数据源。

```
// create data source
BindingList<Shape> dataSource = new BindingList<Shape>();

// add record to data source
dataSource.Add(new Shape("Some Contour", "Circle", "Some Name"));

// bind data source
yourDataGridView.DataSource = typeof(BindingList<Shape>);
yourDataGridView.DataSource = dataSource; 
```

将每列的 DataPropertyName 设置为与 Shape 类中的字段名称相匹配。

```
DataGridViewTextBoxColumn colName = new DataGridViewTextBoxColumn();
colName.DataPropertyName = "Name";

yourDataGridView.Columns.Add(colName ); 
```

但是，我建议您改用[虚拟模式](http://msdn.microsoft.com/en-us/library/2b177d6d.aspx)来保持数据分离和解耦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:19:43.143

如果您希望接受用户的输入，您必须在此页面上创建一个表单，用户可以使用该表单提供输入。获取这些值并将它们添加到 DataTable。以下是显示它的示例片段：

```
DataTable dt = new DataTable();
dt.Columns.Add("Contour",typeof(string));  //I am assuming that you will store path 
                                           //of image in the DataTable
dt.Columns.Add("Shape",typeof(string));
dt.Columns.Add("Name",typeof(string)); 
```

当您收到来自用户的输入时，继续向 DataTable 添加新行：

```
DataRow row = dt.NewRow();
row["Contour"] = txtContourPath.Text;
row["Shape"] = ddlShape.SelectedValue;
row["Name"] = txtName.Text;
dt.Rows.Add(row); 
```

将上面的 DataTable 分配给 GridView 的 DataSource 属性。

```
dgv.DataSource = dt; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:28:47.533

您可以使用方法：

1.  dataGridView1.Rows.Insert(...)
2.  dataGridView1.Rows.Add(...)
3.  杰的回答：使用 dataGridView1.DataSource = dataSource;

希望我能帮助你。

# sockets - 套接字在读取之前可以在其缓冲区中存储多少数据？

> ID：14483605
> 
> 赞同：1
> 
> 时间：2013-01-23T15:48:51.583
> 
> 标签：sockets, networking, client-server

我有一个客户端/服务器应用程序，客户端将消息发送到服务器。由于我使用的是遗留库，我的服务器无法立即读取，但必须等待条件成真，直到它读取消息。一个套接字可以存储多少数据？是否有固定的缓冲区大小/限制？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T00:51:15.407

它取决于套接字接收缓冲区的大小，其默认值因操作系统而异。您可以通过`setsockopt()`SO_RCVBUFSIZE 选项从您的应用程序中控制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:50:20.147

这取决于许多您无法控制的因素。这不是正确的方法。

您应该在数据可用时立即读取数据，但仅在满足条件时才对其进行*处理。*

编辑：我想我误解了这个问题，请参阅@EJP 的回答。

# java - 在构建路径中从 jre 引用 jar

> ID：14483608
> 
> 赞同：2
> 
> 时间：2013-01-23T15:48:58.473
> 
> 标签：java, eclipse, buildpath

我正在使用 Eclipse，并且正在开发一个简单的小程序来演示 cookie 的使用。

为了使用 cookie，我必须将“plugin.jar”添加到我的构建路径中。现在，那个 jar 文件是：

1.  大 (1.7 MB)
2.  已经存在于我的 jre 文件夹中（C:\Program Files\Java\jre6\lib）

有没有办法在我的项目中使用那个pl​​ugin.jar，但不需要将它添加到我的构建路径中，而是在jre文件夹中“指向它”（用户无论如何必须拥有jre才能运行applet）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:59:21.437

将 jar 放在 jre/lib 中没有帮助，您应该将其放入`jre\lib\ext`。

或者您可以将它放在任何位置并在 Eclipse 中更改 JRE 配置，如下所示

```
Windows -> Preferences -> Java -> Installed JREs -> Choose JRE -> Edit -> Add External Jar 
```

# jquery - jQuery draggable - 改变监听器

> ID：14483610
> 
> 赞同：0
> 
> 时间：2013-01-23T15:49:03.980
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-droppable

我遇到了可拖动/可放置对象的问题。我将可拖动对象设置为大约 400 像素宽和 50 像素高。droppable的高度相同，但宽度只有80px左右。

当您尝试将对象拖放到可放置对象上时，我的问题就出现了。为了让 draggable 真正触发 drop 监听器，draggable 必须几乎完全位于 droppable 的中心，以便它实际工作并触发 drop 事件监听器。

有没有办法修改代码，以便它使用角落来测试下降？它似乎会根据其在可拖放对象上的宽度来测试可拖动对象的放置，以检测它是否被拖放。我需要修改它，以便它监听可拖动对象的外边缘。

例如，如果要拖放下图中被拖动的对象，它将捕捉到标题为“Step 1”的对象。现在，该可拖动对象必须在一半以上才能真正捕捉到可放置对象。

![在此处输入图像描述](../Images/2c41671e2acd786427638874fad658f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:14:17.353

如果您使用 jQuery UI 的 Draggable/Droppable 代码，您是否考虑过设置此参数？[http://api.jqueryui.com/droppable/#option-tolerance](http://api.jqueryui.com/droppable/#option-tolerance) ...看起来您可以将其设置为“触摸”，这意味着只要可拖动区域与自身的任何部分接触到放置区域，就会激活可放置区域。

# asp.net-mvc-3 - 如何从 web 下载 jpg 到 MVC3 中的项目文件夹？

> ID：14483611
> 
> 赞同：0
> 
> 时间：2013-01-23T15:49:09.617
> 
> 标签：asp.net-mvc-3

大家好，我想问一下如何将.jpg文件从网络下载到我创建的“上传”项目文件夹中？

我正在尝试将 youtube 缩略图下载到我的“上传”文件夹。

我的控制器：

```
 var fileName = Path.GetFileName(http://img.youtube.com/vi/RUgd_GDPhYk/1.jpg);
                var path = Path.Combine(Server.MapPath("~/uploads/"), fileName);
file.SaveAs(path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:07:52.997

看看`System.Net.WebClient`.NET 类，它允许您通过 HTTP 请求资源。

[http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.100).aspx)

提供检查示例。

```
 var client = new System.Net.WebClient();

    var uri = "http://img.youtube.com/vi/RUgd_GDPhYk/1.jpg";

    // Here, we're just using the same filename as the resource we're after.
    // You may wish to change this to include extra stuff because you'll
    // inevitably run into a naming clash - especially with stuff like 1.jpg
    var targetFilename = Path.GetFileName(uri);

    client.DownloadFile(uri, 
       Path.Combine(Server.MapPath("~/uploads"), targetFilename)); 
```

# c# - 在 SHA1CryptoServiceProvider 中处理撇号的问题

> ID：14483612
> 
> 赞同：0
> 
> 时间：2013-01-23T15:49:10.130
> 
> 标签：c#, .net, sql, encryption

我有一个`SHA1CryptoServiceProvider`使用`ComputeHash`方法创建密码的对象：

```
private static byte[] GetSHA1(string userLogin, string userPassword)
{
    SHA1CryptoServiceProvider sha = new SHA1CryptoServiceProvider();
    return sha.ComputeHash(System.Text.Encoding.ASCII.GetBytes(userLogin + userPassword));
} 
```

然后我得到 byte[20] 对象保存我的加密密码。我使用带有参数的 SqlCommand 将其保存到数据库中：

```
command.Parameters.AddWithValue("@usrPassword", securePassword); 
```

并将 @usrPassword 参数粘贴到 SQL INSERT 查询中。

当用户登录系统时，我`byte[20]`从数据库中检索对象并将其与登录表单中提供的值进行比较。一切正常，除非用户在注册时使用撇号创建登录名（如 O'Hara）。由于某种奇怪的原因，数据库以`byte[4]`表格形式存储了这些密码，因此它们没有通过比较，用户无法登录。

在我看来，`SqlCommand`每当它在名称中保存带有撇号的用户时，它就像切断了字节 [] 对象的一部分，因为`securePassword`注册时的变量由字节 [20] 表示，但每当从数据库中检索到相同的数据时，它的字节 [4]。

我使用 SQL Express 2008，密码字段是`varbinary(20)`类型。

# asp.net - 问号而不是破折号

> ID：14483624
> 
> 赞同：0
> 
> 时间：2013-01-23T15:49:49.723
> 
> 标签：asp.net, email, .net-4.0, mailmessage

我有一个在.NET 上运行的程序。客户遇到的问题似乎是电子邮件编码问题。问号出现在电子邮件正文中；我已将编码更改为 UTF。还是有问题。

> 北卡罗来纳州夏洛特（美联社）——共和党全国委员会正在北卡罗来纳州举行冬季会议，四个月前，民主党在该市重新提名巴拉克·奥巴马 (Barack Obama) 为总统。

显示如下：

> 北卡罗来纳州夏洛特（美联社）？？？共和党全国委员会正在北卡罗来纳州举行冬季会议，四个月前，民主党人在该市重新提名巴拉克·奥巴马 (Barack Obama) 为总统。

电子邮件消息的编码设置为 UTF-8。

```
MailMessage.BodyEncoding = System.Text.Encoding.UTF8; 
```

从电子邮件中的 HTML 标头：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

这是真正奇怪的事情：

*   问题发生在 Windows 和 Mac 上
*   我订阅了此列表，并且我的电子邮件显示正常。
*   我正在运行带有 Exchange 2010 的 Outlook 2013；它们在 Outlook 和其他一些程序上，不确定是哪个。

是否安装了一些安全软件会搞砸这一切？UTF-16 可以工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:28:52.957

发生这种情况是因为某些电子邮件程序不喜欢HTML 中[的高位 ASCII](http://en.wikipedia.org/wiki/Extended_ASCII)字符。将所有高位 ASCII 字符转换为等效的 HTML。

StackOverflow 上草率的 .NET 版本：[更高级的 .NET HTML 编码](https://stackoverflow.com/questions/14485301/more-advanced-net-html-encoding/14492899#14492899)

有关 HTML 和 ASCII 的更多信息：[Sonic 的终极 HTML 字符集页面](http://www.siber-sonic.com/mac/charsetstuff/Soniccharset.html#tables)

# python - python将值字典1链接到键字典2

> ID：14483627
> 
> 赞同：0
> 
> 时间：2013-01-23T15:49:59.157
> 
> 标签：python

我有两本词典。我必须将第一个中的值与第二个中的键匹配，然后返回在第二个字典中找到的值。到目前为止，我想出了这个：

```
d1 = {}
with open ("file1.txt") as f:
   for line in f:
       (key,val) = line.split()
       d[int(key)] = val
d2 = {}
with open("file2.txt") as f:
   for line in f:
      (key,val) = line.split()
      d[int(key)] = val

for item in d1.values():
     if d2.has_key(item):
         print value.d2(item) 
```

我不断收到错误“太多的值无法解包”，除此之外，我的脚本真的会做我想做的事吗？

更新（对不起，我不知道我可以编辑我的问题！）：我的两个文本文件，file1 将单词映射到数字系统，file2 将数字映射到其相关类别。最终结果应该是 file1 的单词链接到它在 file2 中找到的类别。这是通过首先将单词链接到一个数字，然后将该数字链接到一个类别来完成的。例如：Aanbidden（荷兰语）> 12 > 猫。“影响”。我文件中的行如下所示：

文件 1.txt：

```
aanbidden: 12 13 14 57 58  
leven : 15
drinken: 23 56 
... 
(As you see each key can have one or more values) 
```

文件2.txt：

```
12: affect
13: posemo
14: Posfeel
15: Optim
23: discrep
56: money
57: metaph
58: religious
...
(In this file each key has only one value) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:53:17.193

根据您的评论，以下似乎是您想要的：

```
d1 = {}
with open ("file1.txt") as f:
   for line in f:
       (key,val) = line[:-1].split(": ")
       d1[key] = val.split()

d2 = {}
with open("file2.txt") as f:
   for line in f:
      (key,val) = line[:-1].split(": ")
      d2[key] = val

for word, nums in d1.items():
    print word, "->",
    for num in nums:
        if d2.has_key(num):
            print d2[num],
    print 
```

鉴于您在上面发布的文件，它会打印以下内容：

```
drinken -> discrep money
leven -> Optim
aanbidden -> affect posemo Posfeel metaph religious 
```

# r - 如何将十进制转换为 POSIX 时间

> ID：14483629
> 
> 赞同：4
> 
> 时间：2013-01-23T15:50:02.737
> 
> 标签：r, time, decimal

[我从这里](http://www.r-bloggers.com/approximate-sunrise-and-sunset-times/)使用一个函数来计算日出和日落，它返回：

```
 sunrise           sunset
6.49055593325792 18.2873900837081 
```

我正在努力（尝试使用`strftime`，`POSIXct`或`as.Date`函数）将其转换为实时，但到目前为止没有成功。

与往常一样，非常感谢任何建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-23T16:07:16.250

@Arun 的策略有效，但这样做可能更容易：

```
x <- c(6.49055593325792, 18.2873900837081)
today<-as.POSIXct('2012-01-23 00:00:00 EST')
today + (3600*x)

# "2012-01-23 06:29:26 EST" "2012-01-23 18:17:14 EST" 
```

这也会让你获得秒数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T15:58:34.250

首先将十进制表示转换为小时和分钟（如果我理解正确的话）

```
x <- c(6.49055593325792, 18.2873900837081)
# if 6.49 equals 6.49 hours, then do this.
x.m <- paste(floor(x), round((x-floor(x))*60), sep=":")

> x.m
# [1] "6:29"  "18:17"

> strptime(x.m, format="%H:%M")    
# [1] "2013-01-23 06:29:00" "2013-01-23 18:17:00" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T19:36:01.253

这实际上取决于您希望在转换后对“实时”执行什么操作，但我将假设您只想要您正在使用的 [suncalc] 函数的格式化输出以提高可读性。

如果您只想将时间以 24 小时/12 小时格式显示为字符串，您可以将这些行中的任何一行附加到 [suncalc] 函数的末尾，就在 'return' 语句之前：

```
# Use these two lines for 24-hour format
sunrise <- format(as.POSIXct(sunrise*3600, origin="2001-01-01", "GMT"), "%H:%M")
sunset <- format(as.POSIXct(sunset*3600, origin="2001-01-01", "GMT"), "%H:%M")

# Use these two lines for 12-hour format (AM/PM)
sunrise <- format(as.POSIXct(sunrise*3600, origin="2001-01-01", "GMT"), "%I:%M %p")
sunset <- format(as.POSIXct(sunset*3600, origin="2001-01-01", "GMT"), "%I:%M %p") 
```

# openstreetmap - 我在哪里可以找到 OpenStreetMap 数据库的 ERD？

> ID：14483630
> 
> 赞同：0
> 
> 时间：2013-01-23T15:50:04.450
> 
> 标签：openstreetmap, erd

我需要 OpenStreetMap 的实体关系图。或者一些可以让我很容易习惯 OSM 数据库设计的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:12:09.287

对于数据库来说，没有什么像 ERD 这样的花哨的东西。架构的主要定义是 rails 迁移，您可以在此处找到：

[https://github.com/openstreetmap/openstreetmap-website/tree/master/db/migrate](https://github.com/openstreetmap/openstreetmap-website/tree/master/db/migrate)

这里还有一个（希望是最新的）结果模式的 SQL 形式转储：

[https://github.com/openstreetmap/openstreetmap-website/blob/master/db/structure.sql](https://github.com/openstreetmap/openstreetmap-website/blob/master/db/structure.sql)

除非您实际上正在为 OpenStreetMap 网站开发代码，否则您可能不需要知道任何这些 - 如果您只想使用 OpenStreetMap 数据，您最好将数据加载到具有目标模式的数据库中在您的预期用例中，而不是针对支持数据编辑的用例。

# php - 比较来自 php 和 MSSQL 的日期以检索距现在最近的日期

> ID：14483636
> 
> 赞同：1
> 
> 时间：2013-01-23T15:50:21.467
> 
> 标签：php, sql-server, date, datediff

我想一起比较 MMSQL 日期，我想从现在开始检索最近的日期。

这是我的 mssql 日期数据的示例：2013-01-23 09:34:03.000

我的桌子是这样的：

```
NAME : myTable
 Column:
 - nameUpdate (VARCHAR(255))
  - date (DATETIME) 
```

这是我到目前为止所做的，但它不起作用。

```
$query = "SELECT date FROM myTable";
$res_mnem = mssql_query($query) or die(mssql_get_last_message() . "[ " . $query . " ]");  
        $latestDate = "";    
        if (!mssql_num_rows($query)) {

             while ($row = mssql_fetch_array($res_mnem)) {
                if($latestDate == ""){
                  $latestDate = $row["date"];
                }
                elseif($row["date"] > $latestDate){
                   $latestDate = $row["date"];
        }
            }

      }
    echo $latestDate; 
```

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:17:42.040

```
SELECT TOP 1 DATEDIFF(s, [date], GetDate())
FROM myTable
ORDER BY DATEDIFF(s, [date], GetDate()) 
```

这会在表中的 Current (GETDATE()) 和 [date] 之间以秒为单位进行日期减法（如果需要，您可以以低于秒的粒度执行此操作）。它按相同的 datediff 以升序排列。前 1 只选择第一条记录——这是由于 ORDER BY 而最接近当前日期的记录。

# python - 为什么我不能在 Sphinx 中添加内容

> ID：14483638
> 
> 赞同：0
> 
> 时间：2013-01-23T15:50:22.580
> 
> 标签：python, python-sphinx

当我使用 Sphinx 记录我的程序时，我无法添加内容。它只是引发了这个异常：

```
invalid option block. 
```

这是我的标记：

```
.. toctree::
   :maxdepth: 2
   code
   requirment 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:21:55.903

它看起来不平铺评论问题。尝试在这段代码中添加一个空行，如下所示：

```
.. toctree::
   :maxdepth: 2

   code
   requirment 
```

# java - Slick2d init 运行两次，更新/渲染运行无限次

> ID：14483641
> 
> 赞同：1
> 
> 时间：2013-01-23T15:50:35.543
> 
> 标签：java, eclipse, slick2d

我正在创建一个纸牌游戏并将 slick2d 用于图形。当我在 public void init 中调用我的方法从一副牌中抽一张牌时，它会运行两次。下面的方法从卡片组构造函数中抽取一张卡片并返回索引号。

```
public Card PlayerCardDraw()
{

    Card index = cards.remove(1);
    System.out.println("Cards left: " + cards.size());
    return index;
} 
```

甲板构造函数：

```
Deck()
{
    cards = new ArrayList<Card>();
    for (int a = 0; a < 52; a++)
    {           
            cards.add(new Card(a));         
    }
}
public class Play extends BasicGameState
{
Deck deck = new Deck ();
Image PlayScreen;
Image PauseButton;
Image FaceDown1, FaceDown2;

Image card[] = new Image [52];

public String mouse = "no input";

Card C;

public Play (int state)
{

}

public void init (GameContainer gc, StateBasedGame sbg) throws SlickException
{
    PlayScreen = new Image ("res/Play/PlayScreen.png");
    PauseButton = new Image ("res/Play/PauseButton.png");
    FaceDown1 = new Image("res/CardBacks/redback1.png");
    FaceDown2 = new Image("res/CardBacks/redback2.png");

    String fileLocation = new String ();
    for (int i = 0 ; i < 52 ; i++)
    {
        fileLocation = "res/cards/" + (i+1) + ".png";
        card [i] = new Image (fileLocation);
    }
       //should only run once, right?
    C = deck.PlayerCardDraw();

} 
```

我跑时得到的输出是 Cards left: 51 Cards left: 50

这意味着 PlayerCardDraw() 被调用了两次。我在一个简单的系统输出语句中添加了“嗨”，它也运行了两次。

有人知道为什么会这样以及如何解决吗？顺便说一句，这东西在程序进入播放状态之前就已经运行了。它在标题状态下显示左卡和 hi 卡，其中不包括任何这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-13T00:25:14.357

我意识到这是一个非常古老的问题，但我遇到了完全相同的问题，我只是想通了。`StateBasedGame`对我来说，我是在我的类的构造函数和函数中初始化我的屏幕`initStatesList()`。这是我的代码：

```
public TheGame(String name)
{
    super(name);

    this.addState(new TitleScreen(TheGame.MENUSTATEID));
    this.addState(new HelpScreen(TheGame.HELPSTATEID));
    this.addState(new GameScreen(TheGame.PLAYSTATEID, GAMEWIDTH, GAMEHEIGHT));
    this.addState(new PauseScreen(TheGame.PAUSESTATEID));
    this.addState(new GameOverScreen(TheGame.GAMEOVERSTATEID));
    this.addState(new HighScoresScreen(TheGame.GAMERESULTSSTATEID));
}

public void initStatesList(GameContainer arg0) throws SlickException 
{
    this.getState(TheGame.MENUSTATEID).init(arg0, this);
    this.getState(TheGame.HELPSTATEID).init(arg0, this);
    this.getState(TheGame.PLAYSTATEID).init(arg0, this);
    this.getState(TheGame.PAUSESTATEID).init(arg0, this);
    this.getState(TheGame.GAMEOVERSTATEID).init(arg0, this);
    this.getState(TheGame.GAMERESULTSSTATEID).init(arg0, this);

    this.enterState(TheGame.MENUSTATEID);
} 
```

这是我的计算机科学老师教我的班级的方式，但他是 Slick 2D 的新手，所以我认为他只是犯了一个错误。我通过删除所有`getState()`行来修复它`initStatesList()`。我希望这可以帮到你。

# iphone - 特定 iPhone 应用程序创建的难度级别？

> ID：14483650
> 
> 赞同：-4
> 
> 时间：2013-01-23T15:50:52.347
> 
> 标签：iphone, audio, notepad

我希望构建一个 iPhone 应用程序，但我以前从未尝试过这样的事情，除了 HTML 的基础知识。我想知道创建这个应用程序有多么困难，如果你真的需要专业人士来做，或者它是否可以由新手学习。

该应用程序：该应用程序基本上可以用作记事本和录音机。你应该能够创建帖子，你可以给它一个标题、写文本、录制声音、添加搜索词和保存。所有这些帖子都应按日期列出，并能够使用给定的搜索词搜索它们。而已。你认为这将有多难完成？

如果您相信新手可以做到这一点，我该从哪里开始？（我无法使用 Mac 计算机进行工作，所以我可以在我的 Windows PC 上创建所有内容，然后将项目转移给其他人进行编译等等吗？）

顺便说一句，你的回复不要太技术性，因为我对这个话题真的不太了解，这就是为什么我请求你的帮助，看看我是否应该把这个想法一起扔掉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:59:45.683

我不确定这个问题是否可以“回答”。这是主观的。不过，我会提供一些建议。

1.  您可以开发应用程序。这将是艰难的，需要付出很大的努力。如果您喜欢学习新工具、新编程语言、新操作系统 API，并且喜欢编程的挑战；那么你绝对应该试一试。
2.  如果您担心上市时间，那么您将不得不聘请专业人士。
3.  这个应用程序几乎已经存在。查看已经出售的类似应用程序，并问问自己，您或您组建的团队是否可以构建更好的东西。如果你不能，一定要为了好玩而建造它；但不要发布它。

除非您探索 Appcelerator Titanium 之类的东西，否则在没有 Mac 的情况下执行此操作几乎是不可能的。

祝你好运！

# mysql - mysql where子句跨越多年？

> ID：14483651
> 
> 赞同：0
> 
> 时间：2013-01-23T15:50:56.043
> 
> 标签：mysql

我有 mysql 查询，它输出年领先 v 销售额并计算在 2012 年效果很好的转化率，因为它只保存了一年的数据。现在是 2013 年，我需要改变它的工作方式，但已经陷入困境。如果一个潜在客户在 2012 年 12 月出现，然后在 2013 年成为销售，它在我的查询输出中被省略，因为它只要求 2013 年的 CaseDate。

```
Select
  q.*,
  ROUND(100 * q.Comms / q.Total, 2) As Conversion,
  If(q.Adviser Is Null, 1, 0) As remove
From
  (Select
      a.ContactFullName As Adviser,
      Sum(Year(b.CaseDate) = 2013 And Month(b.CaseDate) = 1) As Jan,
      Sum(Year(b.CaseDate) = 2013 And Month(b.CaseDate) = 2) As Feb,
      Sum(Year(b.CaseDate) = 2013 And Month(b.CaseDate) = 3) As Mar,
      ..... Dec
      Sum(Case
        When Year(b.CaseDate) = 2013 And Month(b.CaseDate) Between '1'
        And '12' Then 1 Else 0 End) As Total,
      Sum(Case When (Year(b.CaseDate) = 2012 Or Year(b.CaseDate) = 2013) And Year(b.StatusSubmittedDate) = ".(int)$_POST['year']." And Month(b.StatusSubmittedDate) Between ".(int)$_POST['start']." And ".(int)$_POST['end']." Then 1 Else 0 End) As Comms
    From
      tblcontacts a Inner Join
      tblcases b On a.ContactID = b.ContactAssignedTo
    Group By
      a.ContactFullName With Rollup) q 
```

这行得通；

```
Sum(Case When (Year(b.CaseDate) = 2012 Or Year(b.CaseDate) = 2013) And Year(b.StatusSubmittedDate) = 2013 And Month(b.CaseDate) Between '1' And '12'  Then 1 Else 0 End) As Comms 
```

这仅显示 2013 年输入和提交的潜在客户；

```
Sum(Case When (Year(b.CaseDate) = 2012 Or Year(b.CaseDate) = 2013) And Year(b.StatusSubmittedDate) = ".(int)$_POST['year']." And Month(b.CaseDate) Between ".(int)$_POST['start']." And ".(int)$_POST['end']." Then 1 Else 0 End) As Comms 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:03:23.843

这取决于您的业务逻辑。如果逻辑说您只显示同一年出现的潜在客户，那么您的代码按原样（原样？）完全正确。如果要包含 2012 或 2013（看起来像您这样做），则需要完整地拼写出来，服务器不理解“2012 或 2013”

```
Sum(Case When (Year(b.CaseDate) = 2012 Or Year(b.CaseDate) = 2013) And Year(.... 
```

注意 Or 语句周围的括号，这是为了确保将`CaseYear=2012 or CaseYear=2013 and SubmitYear=2013`其视为`(CaseYear=2012 or CaseYear=2013) and SubmitYear=2013`而不是`CaseYear=2012 or (CaseYear=2013 and SubmitYear=2013)`

当然，如果业务逻辑不关心 CaseYear，则将其从 Sum 中取出。

# android - 如何从 MapView 获取最小/最大纬度和经度？

> ID：14483652
> 
> 赞同：1
> 
> 时间：2013-01-23T15:50:55.770
> 
> 标签：android, google-maps, android-mapview, android-maps, bounding-box

目前我正在使用以下代码从（Google Maps）MapView 对象中获取最小和最大纬度和经度。

```
GeoPoint center = map.getMapCenter();
Double minLat = (center.getLatitudeE6() - (map.getLatitudeSpan() / 2)) / 1E6;
Double minLong = (center.getLongitudeE6() - (map.getLongitudeSpan() / 2)) / 1E6;
Double maxLat = (center.getLatitudeE6() + (map.getLatitudeSpan() / 2)) / 1E6;
Double maxLong = (center.getLongitudeE6() + (map.getLongitudeSpan() / 2)) / 1E6; 
```

不幸的是，这并没有给我正确的输出。我目前在 MapView 中的缩放级别为 18，以点**(52.9476, -1.1452)**为中心。上述代码的输出分别给出了值**（52.947632、-181.145156、52.947632、178.854844）**。显然这里有一个问题，显示的最小纬度在物理上是不可能的，并且纬度都与中心纬度完全相同。我可以确认 MapView 本身正确显示了位置。

谁能解释为什么会这样？在我见过的所有解决这个问题的方法中，这是唯一一个人们似乎有运气的方法，但它仍然不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:02:21.657

我现在自己解决了这个问题。本质上，在 MapView 的 Projection 准备好之前，这些函数将分别返回 0 和 360*1E6 的纬度和经度。因此，所有需要做的就是在 AsyncTask 中对这些值进行检查，直到它们准备好。

# streaming - 如何对本地 FM 电台的直播进行编码

> ID：14483653
> 
> 赞同：1
> 
> 时间：2013-01-23T15:50:56.760
> 
> 标签：streaming, audio-streaming, radio, shoutcast, icecast

我们正处于即将到来的网络项目的研究阶段。我们想建立一个网站，可以播放（所有）本地 FM 广播电台。

在研究建立上述网站的正确工具时，出现了几个问题。

1.  我们需要什么软件来编码（所有）本地调频广播电台的直播？我们如何连接到 FM 广播电台？

2.  我们是否需要虚拟专用服务器来运行第一个问题的软件，24/7？VPS 可以做到这一点，24/7 全天候运行软件吗？

3.  如果我们设法对（所有）本地调频广播电台的直播进行编码，我们如何将这个东西发送到我们的网站？我们可以使用简单的音频播放器，例如 quicktime/flash 或 html5 音频播放器并将其嵌入到我们的网站中吗？

我希望有人能在这件事上帮助我们。非常感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:59:03.757

## 音频捕捉

您需要做的第一件事是为您的流设置一个编码器源。我强烈建议将编码器放在每个广播电台。FM 收音机的质量不是最好的。您将在车站获得更好的音频质量。此外，至少在美国，许多广播电台的所有工作室都在同一个地方。发现 8 个站点都来自同一组办公室的情况并不少见。因此，您可能只需要在 3 或 4 栋建筑物中安装设备即可覆盖您市场上的所有车站。

如今，大多数电台都在使用数字混音。购买具有兼容数字输入的声卡。AES/EBU 和 S/PDIF 很常见，支持这些的声卡也很实惠。

如果您必须通过无线方式捕获音频，请确保您使用的是高质量的接收器（如果可用，则为数字接收器）和高质量的室外天线。您可以购买多种接收器，其中许多直接安装在机架中。

## 编码

现在对于实际的编码，您需要软件。我一直对 EdCast 很幸运（如果你能找到“EdCast Reborn”之前的版本）。对于拥有自己需要管理的音乐库的电台来说，SAM 是一个不错的选择，但我不建议在您的情况下使用它。你甚至可以在这部分使用 VLC。

您将需要选择一个好的编解码器。如果您希望与 HTML5 兼容，您将需要在 MP3 和 Ogg Vorbis 中进行编码。aacPlus 是节省带宽同时仍提供不错的音频质量的不错选择。如今，大多数电台都尽可能使用 aacPlus，但并非所有浏览器都可以播放它，这就是为什么您还需要另外两个。您可以（并且应该）在每个站使用多个编解码器。

## 服务器软件

我强烈推荐 Icecast 或 SHOUTcast。他们获取您的编码音频并将其分发给听众。它们提供类似 HTTP 的流，通常是兼容的。如果你有兴趣，我也会做[Icecast/SHOUTcast 兼容主机](http://audiopump.co/preview.php)，目标是兼容更多设备，尤其是移动设备。

## 回放

如今，许多电台都使用尝试 HTML5 的播放器，并在必要时回退到 Flash。 [jPlayer](http://www.jplayer.org/)是一个常见的选择，但还有很多其他选择。提供指向包含流 URL 的播放列表文件的链接也很好，这样用户可以选择在他们自己的音频播放器中收听。

# xml - 搜索或索引 XML 文件

> ID：14483658
> 
> 赞同：5
> 
> 时间：2013-01-23T15:51:06.960
> 
> 标签：xml, full-text-search, scalability

我在一个新闻网站工作，该网站将他们所有的故事都存储为 XML。我知道，这不是最好的方法，但它就是这样。我正在尝试做的是使搜索网站上的 XML 文件成为可能。现在我们的搜索功能全部由 Google 提供支持（它只搜索 Google 已经抓取的任何内容）。

我马上想到的是使用Grep，这可以正常工作，但可能不会扩大太多。另一个需要更多工作但效果更好的选择是将部分 XML 存储在关系数据库中。

鉴于我们的后端设置方式，迁移到不同的存储模型需要很长时间，所以目前，这就是我们必须使用的。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:05:26.043

添加一些缓存可能会帮助您扩展 grep 的想法。但是，您可能会考虑一种解决方案，该解决方案不仅可以解决今天的问题，还可以使您更接近明天的更好解决方案。也许设计一个更好的解决方案并随着时间的推移逐步实现它会起到作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T07:19:32.210

我还建议使用 XML 数据库系统，例如 BaseX(.org)，因为它非常快。我建议将每篇文章存储在单独的文件中。BaseX 支持 XQuery 3.0 以及全文、更新工具...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T06:24:51.697

如果您致力于使用 XML，我建议您使用原生 XML 数据库解决方案，例如 Berkeley DBXML 或 eXist-db。它们都允许你向它们发射 xquery。eXist 还实现了 DBXML 没有的全文搜索，但是后者在检索数据方面更快。

# sql - 将数据从 SQL Server 加载到 C# 应用程序

> ID：14483660
> 
> 赞同：0
> 
> 时间：2013-01-23T15:51:13.850
> 
> 标签：sql, sql-server, c#-4.0

我在通过 C# 应用程序从 SQL Server 数据库访问我的数据时遇到了一些问题。我有一个小项目要做，因为我的数据正在加载，所以我不能更进一步。我尝试将它加载到`DataGridView`.

以下是一些代码示例：

```
public List<Country> GetCountryList()
{
        string query = "SELECT * FROM Orszag", error = string.Empty;
        SqlDataReader rdr = ExecuteReader(query, ref error);

        List<Country> countryList = new List<Country>();
        if (error == "OK")
        {
            while (rdr.Read())
            {
                Country item = new Country();
                item.CountryId = Convert.ToInt32(rdr[0]);
                item.CountryName = rdr[1].ToString();
                countryList.Add(item);
            }
        }
        CloseDataReader(rdr);

        return countryList;
    } 
```

这是我将数据放入列表的地方

```
private void FillDgvGames()
{
        dgvGames.Rows.Clear();
        List<Country> CountryList = m_Country.GetCountryList();

        foreach (Country item in CountryList)
        {
            dgvGames.Rows.Add(item.CountryId,item.CountryName);
        }
} 
```

这就是我检索它的地方......我必须用另外 8 个表做同样的事情，但这是最简单的，我认为这样更容易......如果有人可以帮助我，我会很感激......

PS：

这是执行阅读器

```
protected SqlDataReader ExecuteReader(string query, ref string errorMessage)
{
        try
        {
            OpenConnection();
            SqlCommand cmd = new SqlCommand(query, m_Connection);
            SqlDataReader rdr = cmd.ExecuteReader();
            errorMessage = "OK";
            return rdr;
        }
        catch (SqlException e)
        {
            errorMessage = e.Message;
            CloseConnection();
            return null;
        }
} 
```

这是连接字符串

```
protected string m_ConnectionString = "Data Source=SpD-PC;Initial Catalog=master;Integrated Security=SSPI"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:01:22.723

您是否正在设置 DataGridView 的数据源？

```
dgvGames.DataSource = CountryList; 
```

# sql - 从查询中选择部分单词？

> ID：14483667
> 
> 赞同：1
> 
> 时间：2013-01-23T15:51:25.603
> 
> 标签：sql, ms-access-2007

在 Access 中，我有一个这样的字段：

> 从 2013 年 1 月 5 日开始到结束，使用 XXXXXXX 设备。

我正在寻找可以提取设备名称的查询（在本例中为 XXXXXXX）。我可以使用 mid() 让它有点工作，但句子可能更长或更短。还有哪些其他方法可以做到这一点？是否有一个 find() 可以用来查找“设备”的位置？

我的 SQL 看起来像：

```
SELECT Mid(Note, 68, 30)
FROM My_Log
WHERE Note LIKE "*, the*"
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:54:39.873

如果您知道设备的名称，则可以使用 Instr：

```
 ... WHERE Instr([Note], "Mydevice")>0 
```

您还可以使用列出设备的表格：

```
SELECT Note FROM MyTable, ListTable
WHERE Note Like "*" & ListTable.Devices & "*" 
```

重新评论：

```
SELECT Note
FROM MyTable
WHERE [Note] Like "*" & [enter device] & "*" 
```

如果您需要知道在笔记中的哪个位置可以找到*设备*

```
SELECT Note, InStr([Note],[enter device]) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:10:30.233

除了我的评论之外，这是可能对您有所帮助的 Oracle 查询。将 dual with 替换为您的表名，查询应该可以工作。正如我提到的，我在此查询中使用的所有函数都是 ANSI SQL 标准。您可以自己修复的语法。您可以单独运行所有查询以获取机器名称的开始、结束位置和长度等...：

```
SELECT SUBSTR(str, start_pos, end_pos) machine_name
  FROM
  (
   SELECT str, INSTR(str,'XXXXXXX') start_pos, Length('XXXXXXX') end_pos
     FROM
   (
   SELECT 'From the start until end at 01/05/2013, the XXXXXXX device was used.' str FROM dual
   )
 )
 /

SQL> 

MACHINE
-------
XXXXXXX 
```

具有相同结果的更通用方法 - 消除长度：

```
SELECT SUBSTR(str_starts, 1, end_pos) machine_name FROM -- Final string
(
 SELECT str_starts, INSTR(str_starts, ' ')-1 end_pos FROM -- end pos = last X pos in string starts - in 'XXXXXXX'
 (
  SELECT SUBSTR(str, start_pos) str_starts FROM    -- strig starts from first X
  (
   SELECT str, INSTR(str,'XXXXXXX') start_pos FROM  -- start_pos
   (
    SELECT 'From the start until end at 01/05/2013, the XXXXXXX device was used.' str FROM dual
   ))))
  / 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:56:20.680

如果设备名称是“设备”之前的单词，并且您想仅使用 Access db 引擎直接支持的功能来查找该单词`Mid()`，`InStr()`则`InstrRev()`可以完成工作......但它不会很漂亮。

这是一个即时窗口会话...

```
Note = "From the start until end at 01/05/2013, the XXXXXXX device was used."
? Mid(Note, _
InstrRev(Note, " ", InStr(1, Note, " device") -1) +1, _
InStr(1, Note, " device") - InstrRev(Note, " ", InStr(1, Note, " device") -1) -1)
XXXXXXX 
```

因此，您需要`Mid()`在查询中使用该复杂表达式。

但是，如果您可以在查询中使用用户定义的函数，则逻辑可能更易于管理。

```
Public Function FindDevice(ByVal pInput As String) As Variant
    Dim astrWords() As String
    Dim i As Long
    Dim lngUBound As Long
    Dim varReturn As Variant

    varReturn = Null
    astrWords = Split(pInput, " ")
    lngUBound = UBound(astrWords)
    For i = 0 To lngUBound
        If astrWords(i) = "device" Then
            varReturn = astrWords(i - 1)
        Exit For
    End If
    Next i
    FindDevice = varReturn
End Function 
```

那么查询可能是...

```
SELECT FindDevice(Note) AS device_name
FROM My_Log
WHERE Note LIKE "*, the*" 
```

# arrays - rapidJSON 添加结构数组

> ID：14483672
> 
> 赞同：15
> 
> 时间：2013-01-23T15:51:31.423
> 
> 标签：arrays, json, struct

我希望能够使用 rapidJSON 创建以下 JSON 输出

```
{
    "year": 2013,
    "league": "national",
    "teams": [
        {
            "teamname": "reds",
            "teamcity": "cincinnati",
            "roster": [
                {
                    "playername": "john",
                    "position": "catcher"
                },
                {
                    "playername": "joe",
                    "position": "pitcher"
                }
            ]
        }
    ]
} 
```

这是有效的 JSON...在 JSONLint.com 验证我知道如何创建文档并使用 AddMember 添加“年份”和“联盟”。

我无法弄清楚，也没有看到任何关于如何添加具有“团队”或“名册”等结构的数组的示例

如何添加一组结构的“团队”？任何帮助或指向我的例子都会很棒。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-11-21T18:28:27.017

假设我们有一个 std::vector roster，其中包含返回 std::string& 的 Roster 类上的 PlayerName() 和 Postion() 访问器函数。

```
rapidjson::Document jsonDoc;
jsonDoc.SetObject();
rapidjson::Value myArray(rapidjson::kArrayType);
rapidjson::Document::AllocatorType& allocator = jsonDoc.GetAllocator();

std::vector<Roster*>::iterator iter = roster.begin();
std::vector<Roster*>::iterator eiter = roster.end();
for (; iter != eiter; ++iter)
{
    rapidjson::Value objValue;
    objValue.SetObject();
    objValue.AddMember("playername", (*iter)->PlayerName().c_str(), allocator);
    objValue.AddMember("position", (*iter)->Position().c_str(), allocator);

    myArray.PushBack(objValue, allocator);
} 

jsonDoc.AddMember("array", myArray, allocator);
rapidjson::StringBuffer strbuf;
rapidjson::Writer<rapidjson::StringBuffer> writer(strbuf);
jsonDoc.Accept(writer);

const char *jsonString = strbuf.GetString();  // to examine the encoding... 
```

这将为您提供文档中的结构数组。要获得结构的其余部分，您需要做的就是将 rapidjson 对象相互嵌套并使用 AddMember() 构建复杂的对象树。希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-15T07:41:33.840

在 Vs2012/Rapidjson 版本 0.1 中，当从 StringBuffer 输出文档时，以下语句会得到不可读的代码。

```
objValue.AddMember("position", (*iter)->Position().c_str(), allocator); 
```

经过几个小时的挖掘，我想出了如何以正确的方式进行操作。

```
Value tmp;
tmp.SetString( (*iter)->Position().c_str(), allocator);
objValue.AddMember("position", tmp, allocator); 
```

这是一个教程： http: [//miloyip.github.io/rapidjson/md_doc_tutorial.html](http://miloyip.github.io/rapidjson/md_doc_tutorial.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-25T07:55:03.783

```
rapidjson::StringBuffer s;
    rapidjson::Writer<rapidjson::StringBuffer> writer(s);

    writer.StartObject();               

    std::string year("year");
    writer.String(year.c_str(), static_cast<rapidjson::SizeType>(year.length()));
    writer.Int(2013);

    std::string league("league");
    writer.String(league.c_str(), static_cast<rapidjson::SizeType>(league.length()));
    std::string national("national");
    writer.String(national.c_str(), static_cast<rapidjson::SizeType>(national.length()));

    std::string teams("teams");
    writer.String(teams.c_str(), static_cast<rapidjson::SizeType>(teams.length()));

    writer.StartArray();
    writer.StartObject();

    std::string teamname("teamname");
    writer.String(teamname.c_str(), static_cast<rapidjson::SizeType>(teamname.length()));
    std::string reds("reds");
    writer.String(reds.c_str(), static_cast<rapidjson::SizeType>(reds.length()));

    std::string teamcity("teamcity");
    writer.String(teamcity.c_str(), static_cast<rapidjson::SizeType>(teamcity.length()));
    std::string cincinnati("cincinnati");
    writer.String(cincinnati.c_str(), static_cast<rapidjson::SizeType>(cincinnati.length()));

    std::string roster("roster");
    writer.String(roster.c_str(), static_cast<rapidjson::SizeType>(roster.length()));

    writer.StartArray();

    writer.StartObject();
    std::string playername("playername");
    writer.String(playername.c_str(), static_cast<rapidjson::SizeType>(playername.length()));
    std::string john("john");
    writer.String(john.c_str(), static_cast<rapidjson::SizeType>(john.length()));

    std::string position("position");
    writer.String(position.c_str(), static_cast<rapidjson::SizeType>(position.length()));
    std::string catcher("catcher");
    writer.String(catcher.c_str(), static_cast<rapidjson::SizeType>(catcher.length()));
    writer.EndObject();

    // can add one more object in the same manner
    // with player name and position

    writer.EndArray();

    writer.EndObject();

    writer.EndArray();
    writer.EndObject();

s.GetString(); 
```

# php - PDO：绑定问题，所有查询都返回 false

> ID：14483673
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:51:36.147
> 
> 标签：php, mysql, pdo, sqlbindparameter

我一辈子都无法绑定到使用 PDO 查询，它们总是返回 false。

在这个例子中，它检查一个字段的值是否在两个其他值之间。

这有效：

```
$query = $db->query("SELECT * FROM table WHERE field1 > '$start' AND field1 < '$finish'"); 
```

这不会：

```
$query = $db->query("SELECT * FROM table WHERE field1 > :start AND field1 < :finish");
$query->bindParam(":start", $start);
$query->bindParam(":finish", $finish); 
```

更新：由于帮助，上述查询现在可以工作。下面还是不行。

我一直在这里浏览各种 PDO 帖子，但我没有找到解决方案，我不知道还有什么可以尝试的。

UPDATE2：好的，它似乎没有找到$db，因此没有连接并返回false。$db 连接行位于所有主页所需的 connect.php 文件中。这些页面上的内容由包含相关文件/页面的函数调用。因为PDO在函数中自己不起作用，是不是通过函数丢失了$db来包含包含查询的文件？我可能解释得不够清楚。

基本上，functions.php 中的示例函数：

```
function getRegistration() {
    include("registration.php");
} 
```

主文件

```
require_once("connect.php");
require_once("functions.php");

getRegistration(); 
```

registration.php 包含：

```
$sql = $db->prepare("INSERT INTO tempus_members(username, email, password, activation_code, registration_date, registered_ip, name) VALUES(:username, :email, :password, :activation_code, :registration_date, :registered_ip, :name)");
$sql->bindParam(":username", $username);
$sql->bindParam(":email", $email);
$sql->bindParam(":password", $hash);
$sql->bindParam(":activation_code", $activation_code);
$sql->bindParam(":registration_date", $registration_date);
$sql->bindParam(":registered_ip", $registered_ip);
$sql->bindParam(":name", $name);
$sql->execute(); 
```

是否通过包含页面的函数丢失了 $db 变量？如果是这样，我如何通过所有功能携带 $db ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:56:36.627

尝试：

```
$stmt = $db->prepare("SELECT * FROM table WHERE field1 > :start AND field1 < :finish");
$stmt->bindParam(":start", $start);
$stmt->bindParam(":finish", $finish);
$stmt->execute(); 
```

您使用的是[PDO::query](http://php.net/manual/en/pdo.query.php)而不是[PDO::prepare](http://php.net/manual/en/pdo.prepare.php)。

至于其他查询，您要返回什么错误？试试下面的代码，看看是否有任何错误被吐到页面上：

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

try{
    $sql = $db->prepare("INSERT INTO tempus_members(username, email, password, activation_code, registration_date, registered_ip, name) VALUES(:username, :email, :password, :activation_code, :registration_date, :registered_ip, :name)");

    $sql->bindParam(":username", $username);
    $sql->bindParam(":email", $email);
    $sql->bindParam(":password", $hash);
    $sql->bindParam(":activation_code", $activation_code);
    $sql->bindParam(":registration_date", $registration_date);
    $sql->bindParam(":registered_ip", $registered_ip);
    $sql->bindParam(":name", $name);

    $sql->execute();

}
catch(PDOException $e){
    echo $e->getMessage();
} 
```

# kendo-ui - Kendo 模态窗口 ViewModel

> ID：14483681
> 
> 赞同：0
> 
> 时间：2013-01-23T15:51:59.893
> 
> 标签：kendo-ui

我已经创建了一个页面 Main.html，其中有一个 ViewModel。在这个页面中，有一个按钮可以打开一个 Window Modal 并在其中加载一个 ajax 的 html 页面。

我想在我的窗口模式中使用 main.html 的视图模型，但是如果我调用视图模型它会出错..

有人知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:08:50.347

将部分视图加载到您的模式中，并确保它具有正确的 using 语句以允许它使用您的模型：

```
@using YourApp.YourModels.TheModel 
```

# java - android获取视频缩略图PATH，而不是位图

> ID：14483682
> 
> 赞同：7
> 
> 时间：2013-01-23T15:52:00.333
> 
> 标签：java, android, eclipse, thumbnails

是否可以获得视频缩略图路径，而不是位图对象本身？我知道方法

```
MediaStore.Images.Thumbnails.queryMiniThumbnail 
```

但由于我使用自己的位图缓存机制，我希望拥有视频缩略图的路径，而不是位图对象本身。此方法返回位图对象，而不是路径。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T19:14:16.343

首先获取视频文件 URL，然后使用以下查询。

示例代码：

```
private static final String[] VIDEOTHUMBNAIL_TABLE = new String[] {
    Video.Media._ID, // 0
    Video.Media.DATA, // 1 from android.provider.MediaStore.Video
    };

Uri videoUri = MediaStore.Video.Thumbnails.getContentUri("external");

cursor c = cr.query(videoUri, VIDEOTHUMBNAIL_TABLE, where, 
           new String[] {filepath}, null);

if ((c != null) && c.moveToFirst()) {
  VideoThumbnailPath = c.getString(1);
} 
```

VideoThumbnailPath，应该有视频缩略图路径。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-14T14:58:25.177

从 video_id获取视频**缩略图路径：**

```
public static String getVideoThumbnail(Context context, int videoID) {
        try {
            String[] projection = {
                    MediaStore.Video.Thumbnails.DATA,
            };
            ContentResolver cr = context.getContentResolver();
            Cursor cursor = cr.query(
                    MediaStore.Video.Thumbnails.EXTERNAL_CONTENT_URI,
                    projection, 
                    MediaStore.Video.Thumbnails.VIDEO_ID + "=?", 
                    new String[] { String.valueOf(videoID) }, 
                    null);
            cursor.moveToFirst();
            return cursor.getString(0);
        } catch (Exception e) {
        }
        return null;
    } 
```

# c# - 绑定列表 doesn't work for me I have a class that interacts with a tableView. I have multiple pages in my program that uses this class/control. Problem was I was using List<> in this class to assign it to the itemso 问问题 问问题 2013-01-23T15:52:02.853 724 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a class that interacts with a tableView. I have multiple pages in my program that uses this class/control. Problem was I was using List<> in this class to assign it to the itemsource. Later on I noticed I had to use BindingLists instead of Lists in order to be able to edit in the table for the end user. Since I'm using different type of objects now I'm getting a lot of errors saying that it cannot implicitly convert to BindingList, e.g. Error 14 Cannot implicitly convert type 'System.ComponentModel.BindingList<entity.employee>' to 'System.ComponentModel.BindingList' ...\frmMainWindow.xaml.cs Which is really weird because it worked quite fine when I was using List. I cannot declare the BindingList as Employee since I'm using more types. Is there a way to still use BindingLists<> and works well like Lists<>? EDITION: List <vcalendarperiod>temp_list = RPTDAL.Get_CalendarPeriodByCalendarName_View("Monthly"); BindingList <vcalendarperiod>temp_blist = new BindingList<vcalendarperiod>(temp_list); catalogGridAdministrationCalendarsMonthly.ItemsSource = temp_blist; The error is marking temp_blist, and the error is the one i described earlier. when using rufus, Resque or whenever scheduler and what are the weaknesses and strengths of them? I'm a new member of ruby on rails, and i'm researching for job schedulers in rails, but i am quite confused because having many schedulers such as rufus, whenever, resque.... Could you show me some information, documents or advice ? thank you so much! c#wpfobjectwpf-controlsbindinglist 4 0 回答 0 Related 1 java - 从本地用户和 glassfish 到 Mysql DB 的并发连接 3 ios - Xcode：sigabrt 错误 1 facebook - Facebook Like 按钮 - 实时更新？ 2 python - 在python中将拉丁字符串转换为unicode 2 ruby - Nokogiri 破坏 Erb 标记 2 lotus-notes - 在 Lotus Notes 中链接数据库 3 php - 支持 HTML 的 HTML 文本区域？ 1 c++ - 是否有任何公司仍在使用 Pro*C SQL？ 2 excel - 公式中使用的自定义 vba 函数中当前单元格的范围 1 shell - 使用 SFTP 将文件从另一台服务器复制到我的盒子而不提示输入密码的 Shell 脚本 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14483684
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, wpf, object, wpf-controls, bindinglist

I have a class that interacts with a tableView. I have multiple pages in my program that uses this class/control. Problem was I was using `List<>` in this class to assign it to the itemsource. Later on I noticed I had to use `BindingLists` instead of Lists in order to be able to edit in the table for the end user.

Since I'm using different type of objects now I'm getting a lot of errors saying that it cannot implicitly convert to `BindingList<object>`, e.g.

```
Error   14  Cannot implicitly convert type     'System.ComponentModel.BindingList<Entity.Employee>' to     'System.ComponentModel.BindingList<object>'  ...\frmMainWindow.xaml.cs 
```

Which is really weird because it worked quite fine when I was using List. I cannot declare the BindingList as Employee since I'm using more types.

Is there a way to still use `BindingLists<>` and works well like Lists<>?

EDITION:

```
List<vCalendarPeriod> temp_list = RPTDAL.Get_CalendarPeriodByCalendarName_View("Monthly");
BindingList<vCalendarPeriod> temp_blist = new BindingList<vCalendarPeriod>(temp_list);
catalogGridAdministrationCalendarsMonthly.ItemsSource = temp_blist; 
```

The error is marking temp_blist, and the error is the one i described earlier.</vcalendarperiod></vcalendarperiod></vcalendarperiod></entity.employee>

# ruby-on-rails - 当使用 rufus、Resque 或任何时候调度程序时，它们的弱点和优势是什么？

> ID：14483686
> 
> 赞同：2
> 
> 时间：2013-01-23T15:52:04.897
> 
> 标签：ruby-on-rails, scheduler, resque, whenever

我是 ruby​​ on rails 的新成员，我正在研究 rails 中的作业调度程序，但我很困惑，因为有许多调度程序，例如 rufus，无论何时，resque....你能告诉我一些信息，文件吗或建议？太感谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:09:22.697

[Ruby Toolbox](https://www.ruby-toolbox.com)是一个很好的资源，可以帮助您了解何时考虑各种选项。它显示了哪些宝石对于特定类型的任务最受欢迎。

适用于您的问题的两类工具是[调度](https://www.ruby-toolbox.com/categories/scheduling)和[后台作业](https://www.ruby-toolbox.com/categories/Background_Jobs)

`resque`上面列出的、`delayed_job`、`rufus-scheduler`、和其他 gem`Sidekiq`中的任何一个`whenever`都可以帮助满足要求，我会推荐`delayed_job`给初学者 - 因为它很容易设置和学习。

最好先看看[delayed_job](http://railscasts.com/episodes/171-delayed-job)上的Railscasts 集。

如果您有兴趣探索其他选项，可能会有[Railscasts 插曲](http://railscasts.com/?tag_id=32)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-14T19:03:33.373

Resque、delayed_job 和 Sidekiq - 通过作业队列处理后台作业。

rufus 和任何时候进行调度。
当服务器初始化时，Rufus 在应用程序内部运行，当您部署应用程序或手动启动它时，“无论何时”通过环境运行。所以 Rufus 没有应用程序就不能工作，但你需要随时注意。

# php - Easy ways to convert a MYSQL-connected dynamic PHP site into a CMS?

> ID：14483691
> 
> 赞同：7
> 
> 时间：2013-01-23T15:52:19.313
> 
> 标签：php, mysql, wordpress, joomla, content-management-system

(I don't know the best way to word this but here goes!) I have a site that is in PHP and it grabs certain data from tables depending on an identifier input like .php?id=500 and looks up from each table grabbing each respective fields and putting them into tables or lists.

What is the best easy CMS that I would use? How would I approach this? Is there a simple plugin for something like Joomla or Wordpress or the such I can point to specific tables, tell it the identifier column, and tell it to list every row that matches? Including other tables?

IE. It pulls something from address table and lists all their address, pulls something from information and lists their gender age, and etc.

So this way, it creates dynamic pages that I can manage a lot easier and have searches and indexes. Trying to code all that and it's getting way ahead of me. I figured there's a CMS that does all this for me.

I hope you guys understand my question, I tried searching many wordings of this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:55:29.017

你正在做出正确的决定。移至 CMS。我已成功将数据（类别、文章和图像）迁移到 Joomla 安装中，步骤如下：

1.  从您的 CMS 相关数据中选择
2.  如果图片与 CMS 中的文章分开存储，请在前面至少添加一个

    到文本并附加其余部分；

3.  J2.5+ 支持文章图片和缩略图，但模板仍然没有实现
4.  除非您需要在文章级别进行细粒度访问，否则将所有文章指向单个资产 ID
5.  创建示例文章并使用额外字段填写空白
6.  如果可能，使用适当的 IntroText 和 FullText 分离；确保进入每个的 html 是独立的并验证
7.  验证您的数据是 UTF-8（否则转换它）然后运行 ​​SQL 导入
8.  从文章管理器中选择重建图标来重建资产和 ltr-rtl 字段

要执行 SQL 导入，您还需要清除 content_frontpage 表。

这是一个从另一个 cms 接收一行并将其放入 Joomla 的函数；一些评论是用意大利语写的，但你应该知道如何去做。mdc2j 是我编写的专用函数，用于根据需要正确转义数据并更改格式/类别 ID 等。

```
function importaArticolo($row) {
    global $link;
    echo "<h3>Importa Articolo ".$row->Id . " (". $row->titolo . ")</h3>";

    /*
        " ('$row->id', '0', 'test', 'test_alias', '', 'tutto il testo riga per riga', ".
        "  '', '0', '0', '0', '111', '2001-01-25 16:30:15', '4', 'la firma', '2001-01-25 16:30:15',  ".
        " '0', '0', '0000-00-00 00:00:00', '2001-01-25 16:30:30', '0000-00-00 00:00:00', 'list of images?', 'list of urls?',  ".
        " '".'{"show_title":"","link_titles":"","show_intro":"","show_category":"","link_category":"","show_parent_category":"","link_parent_category":"","show_author":"","link_author":"","show_create_date":"","show_modify_date":"","show_publish_date":"","show_item_navigation":"","show_icons":"","show_print_icon":"","show_email_icon":"","show_vote":"","show_hits":"","show_noauth":"","alternative_readmore":"","article_layout":""}'."', ".
        "  '1', '0', '0', 'kewords', 'key-description',  ".
        " '0', '0',  ".
        " '".'{"robots":"","author":"","rights":"","xreference":""}'."', '0', '*', '');";
        */
    try {
        $idcategory = mdc2jCategory($row->idCanale);
        if ($row->isDossier * 1 == 1) {
            if (1*$idcategory==10) {
                $idcategory= 28;
            }
        }
        $default_user=42;
        $SQL=sprintf(
            "INSERT INTO `".$GLOBALS['db_database_new']."`.`eco_content` (`id`, `asset_id`, `title`, `alias`, `title_alias`, `introtext`, ".
            " `fulltext`, `state`, `sectionid`, `mask`, `catid`, `created`, `created_by`, `created_by_alias`, `modified`,  ".
            " `modified_by`, `checked_out`, `checked_out_time`, `publish_up`, `publish_down`, `images`, `urls`, `attribs`,  ".
            " `version`, `parentid`, `ordering`, `metakey`, `metadesc`, `access`, `hits`, `metadata`, `featured`, `language`,  ".
            " `xreference`)  ".
            " VALUES  ".
            " ('%d', '0', '%s', '%s', '', '%s', ".
            "  '%s', '%d', '0', '0', '%d', '%s', '%d', '%s', '%s',  ".
            " '0', '0', '0000-00-00 00:00:00', '%s', '0000-00-00 00:00:00', '', '',  ".
            " '".'{"show_title":"","link_titles":"","show_intro":"","show_category":"","link_category":"","show_parent_category":"","link_parent_category":"","show_author":"","link_author":"","show_create_date":"","show_modify_date":"","show_publish_date":"","show_item_navigation":"","show_icons":"","show_print_icon":"","show_email_icon":"","show_vote":"","show_hits":"","show_noauth":"","alternative_readmore":"","article_layout":""}'."', ".
            "  '1', '0', '0', '%s', '%s',  ".
            " '%d', '%d',  ".
            " '".'{"robots":"","author":"","rights":"","xreference":""}'."', '%d', '*', '');",
        $row->Id,
        mysql_real_escape_string($row->titolo),
        makeAlias($row->titolo), // alias
        mdc2jSommario($row), // this creates the introtext

        mdc2jText($row), // this returns the text
        $row->idStato=="2"?0:1, // idStato="suspended"
        $idcategory, // correct category id
        mdc2jDate($row->dataCreazione),
        $default_user,
        mdc2jFirma($row->firma),
        mdc2jDate($row->dataCreazione), //2001-01-25 16:30:15
        mdc2jDate($row->dataPubblica), //2001-01-25 16:30:30

        mdc2jMetaKeywords($row), // adds "dossier" if appropriate
        mdc2jMetaDesc($row), // if not assigned, create it automatically
        $row->idStato=="2"?3:1,
        $row->viewCounter,
        0 //featured: (($row->Id % 13) == 0 ? 1 : 0 )
        );

        $res = mysql_query($SQL);

        if ($res) {
            $lastid = mysql_insert_id();
            //echo "Article $lastid ($row->Id) Inserted into DB<br>";
                    // this will import images in a separate tool, an ignite gallery, so it's not really meaningful for you:
            importaImmagini($row->Id, $row->canale, $row->cid);

            return 1;

        }
        else {
            echo "<span class='err'>WARNING: article not inserted in db</span>"."<br>".mysql_errno($link) . ": " . mysql_error($link);
            echo "<textarea cols='80' rows='3'>".$SQL."</textarea><br>";
        }

        return 0;

    }
    catch (Exception $e)
    {
        echo "<span class='err'>Exception! ".$e->getMessage()."</span><br>";
        return 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T03:26:11.237

You have a few options:

1.  Convert your PHP template to a WordPress Compatible Theme.
2.  Use and existing theme and install TablePress Plugin to manage your tables.

Also see [http://thethemefoundry.com/blog/html-wordpress/](http://thethemefoundry.com/blog/html-wordpress/) Also see [http://wordpress.org/plugins/tablepress/](http://wordpress.org/plugins/tablepress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:05:46.257

写自己真的不会那么复杂。事实上，它类似于我的一个内容管理系统的工作方式：我为每个“模块”和属性指定了一个类，这些属性指定要从中选择记录的数据库表、要在概览页面上显示的列（表标题），以及要在表单视图（输入）中显示的列。

试图将已经构建的网站硬塞进 WordPress 或 Joomla 等 CMS 中！想要开箱即用地为您做所有事情（包括前端站点）将是一件痛苦的事情。即使你在你的网站上安装了一个 CMS 并让它运行起来，它也会变得臃肿不堪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T23:08:04.517

以下是您尝试完成的一些可能的快捷方式：

如果您当前的站点正在生成 RSS 聚合链接，那么[WP-RSS-Multi-Importer](http://wordpress.org/plugins/wp-rss-multi-importer/) 看起来很有希望。

如果您当前的站点没有 RSS，但您可以访问数据库（通过主机控制面板/phpmyadmin，或通过服务器命令行实用程序，如 mysqldump），那么您可以将数据库导出为 CSV 或 XML 并尝试使用[WP-All-Import 之](https://wordpress.org/plugins/wp-all-import)类的插件将其导入 Wordpress 。

这将花费更多时间，因为您需要将数据映射到适当的 wordpress 字段。

如果您既没有 RSS 也没有访问数据库的权限，那么您将需要“抓取”您的网站。通常这意味着编码，但有几个 wordpress 插件可能适合您。这里可能会出现很多问题，因此如果最终产品不是您想要的，请不要感到惊讶。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T15:50:47.340

好问题。由于回答了 Joomla，我将为 WordPress 回答。我建议创建一个 php 文件，将所有表数据导出到 xml（[RSS](http://www.rssboard.org/rss-specification)或[WordPress](http://olalindberg.com/?p=545)）。然后，您可以使用[WordPress 导入](http://codex.wordpress.org/Importing_Content)功能简单地将您的信息导入 WordPress。

这样，您可以保留两个表格，并且可以将信息完全导入 WordPress。

如果您有兴趣，如果您给我表格的格式，我可能会一起编写一些代码。

[最后，您应该在WordPress Stack Exchange](https://wordpress.stackexchange.com/search?q=) (wordpress.stackexchange.com)上搜索并重新发布您的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T15:59:05.170

有很多 CMS 解决方案可以为您做到这一点。老实说，如果您已经建立并运行了一个网站，而您只想要一个 CMS，那么 Joomla 或 WordPress 有点矫枉过正。看看[PyroCMS](https://www.pyrocms.com/)，它完全符合您的描述。它很容易设置和运行，并且有很好的文档。

如果您对 Python 感兴趣并且对混合解决方案感兴趣，那么我已经成功地将 PHP 框架用于主要站点，并将[Django](https://www.djangoproject.com/)（在 Python 中）用于 CMS。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-31T17:29:42.533

另一个想法可能是使用 Cakephp [http://cakephp.org/](http://cakephp.org/)。Cake 可以读取您的数据库方案并生成启动和运行所需的文件。（如果您有命令行访问权限）。它使用 MVC 模式并且设置起来非常快。我个人在您描述的许多项目中都使用过蛋糕。

如果不手动执行，Wordpress 可能有点难以将所有帖子都输入。但是，如果您不想编写太多代码并且愿意手动移动所有内容，则 wordpress 或其他一些开箱即用的 CMS 系统可能适合您。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-12T13:56:35.320

比使用 cakephp 低一点的方法是使用[ActiveRecord](http://de.wikipedia.org/wiki/Active_Record)，它对处理数据库有很大帮助。

例如使用[PHP ActiveRecord](http://www.phpactiverecord.org/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-19T01:43:32.643

**有四个问号：**

**问：我会使用的最简单的 CMS 是什么？**

*答：WordPress。*

**我将如何处理这个？**

*A. 学习 PHP。*

**问：是否有一个简单的插件，比如 Joomla 或 Wordpress 或者我可以指向特定表，告诉它标识符列，并告诉它列出匹配的每一行？**

*答：可能。这是 PHP 中的一个简单任务。*

**Q. 包括其他表？**

*答：同上。*

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-12-28T00:12:53.970

1.  使用 WordPress 或 Joomla 或 drupal 设置新的 CMS。
2.  制作一个 PHP 以将所有数据库项导入该 CMS。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-12-22T13:25:56.357

你可以使用像 yii 或 codeigniter 这样的框架。他们可以让你的生活变得非常轻松。您可以使用这些框架非常轻松快速地制作 CMS。

您可以传递参数，如 id

# python - PySide 在另一个类中使用 GUI 元素

> ID：14483692
> 
> 赞同：0
> 
> 时间：2013-01-23T15:52:23.307
> 
> 标签：python, qt, pyside

我正在使用 PySide 在 Qt 中制作应用程序。在我的 main.py 中，我有一个名为 Program 的类来设置用户界面，我还有另一个类，它具有与某个区域相关的功能。例如，我有一个区域有一个开始和一个清除按钮。我在 RunArea 类中定义函数并在 Program 类中连接信号，但没有任何反应。这是代码。

```
class Program(QtGui.QMainWindow, Interface.Ui_MainWindow):
    def __init__(self, parent=None):
        super(Program, self).__init__(parent)
        self.setupUi(self)

        self.runArea = RunArea()
        self.startButton.clicked.connect(self.runArea.start)
        self.clearButton.clicked.connect(self.runArea.clear)

class RunArea(QtGui.QMainWindow, Interface.Ui_MainWindow):
    def __init__(self, parent=None):
        super(RunArea, self).__init__(parent)
        self.setupUi(self)

    def start(self):
        self.log.setPlainText("log entry")

    def clear(self):
        self.runTree.clear() 
```

我期望发生的是，当我单击开始时，“日志条目”将被放入 QTextEdit（在 setupUi 中定义）。当我单击清除时，名称为 runTree 的 TreeWidget 将被清除。我知道信号在起作用，但什么都没有出现。有人可以解释为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:59:25.603

我不确切知道您的代码为什么/如何不起作用，尽管我怀疑它与继承有关，而不是在两个类中引用相同的对象。
但是，应该这样做：

```
class Program(QtGui.QMainWindow, Interface.Ui_MainWindow):
    def __init__(self, parent=None):
        super(Program, self).__init__(parent)
        self.setupUi(self)

        self.runArea = RunArea(self)
        self.startButton.clicked.connect(self.runArea.start)
        self.clearButton.clicked.connect(self.runArea.clear)

class RunArea():
    def __init__(self, parent=None):
        self.parent = parent

    def start(self):
        self.parent.log.setPlainText("log entry")

    def clear(self):
        self.parent.runTree.clear() 
```

# jquery - How do I prevent a jGrowl message from displaying again when the page is refreshed?

> ID：14483693
> 
> 赞同：1
> 
> 时间：2013-01-23T15:52:25.383
> 
> 标签：jquery, jgrowl

I have spent some time searching but haven't been able to find an answer to this question. When the user peforms some action on my site, a jGrowl message correctly displays. However if the user then refreshes the page, the message unexpectedly redisplays. Also when the user navigates away from the page and then presses the browser's back button, the jGrowl message unexpectedly displays.

I have set a breakpoint in the code and it only gets hit the first time when the jGrowl message is expected to display. Refreshing the page doesn't cause the breakpoint to get hit.

So how do I prevent this unexpected behavior? Thanks for your time.

I would think this is a problem that many people would need a solution for.

```
<#escape x as x?js_string>
$(function(){

    $("a[name=preview]").fancybox({type:'ajax'});

    // We use jGrowl for the popups that appear in the corner
    $.jGrowl.defaults.closer = false;
    <#if confirmMessage??>
        $("#jgrowlcontainer").jGrowl("${springMacroRequestContext.getMessage(confirmMessage)}");
    </#if>

    // Delete a program
    $('#deleteProgram').click(function(){
        $.fancybox.open('<p>Are you sure you want to delete this program?</p>'+
                        '<button id="deleteProgram">DELETE</button> <button id="deleteCancel">CANCEL</button>');
        return false;
    });
    $("body").on("click","button#deleteCancel",function(){
        $.fancybox.close();
    });
    $("body").on("click","button#deleteProgram",function(){
        $.fancybox.close();
        $('form').attr('action','/build/deleteProgram.html').submit();
        return false;
    });

});
</#escape> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:25:20.727

我解决了这个问题。当页面刷新时，我实际上可以在代码的不同方法中打断点。此方法看到旧消息仍然具有非空值，并再次将消息添加到模型中，然后前端代码再次显示。为了解决这个问题，我使用了一个标志，该标志在执行应显示消息的操作时设置。然后我使用这个标志有条件地将消息添加到模型中。然后标志被重置。

# android - android screenshot for long webpage

> ID：14483695
> 
> 赞同：0
> 
> 时间：2013-01-23T15:52:35.597
> 
> 标签：android

How to get screenshot of a webview if it too long and store it in internal storage. So for example if my webview shows "google.com" and i try below code it takes the screenshot and stores it as .jpg. But if my webview shows "stackoverflow.com", as this web page is too long, the app crashes. Some help will be appreciated.

```
Picture picture=this.getCurrentWebView().capturePicture();
    Bitmap b = Bitmap.createBitmap(picture.getWidth(), picture.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(b);
    picture.draw(c); 
            FileOutputStream fos = null;  
            try {
                fos = new FileOutputStream("mnt/sdcard/myjpg.jpg"); 
                    if ( fos != null ){
                        b.compress(Bitmap.CompressFormat.JPEG, 100, fos);
                        fos.close();
                    }
                }
           catch( Exception e )
           {
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T05:52:37.203

不知道您是否想通，但这可能会有所帮助：

将 android:largeHeap="true" 添加到您的 Mainfest。

就像是...

```
<application
        android:allowBackup="true"
        android:label="@string/app_name"
        android:icon="@drawable/ic_launcher"
        android:theme="@style/AppThemeHolo"
        android:largeHeap="true"
        >
...

...
</application> 
```

# android - 您如何检测是否由于多个可能的目标而未启动 Intent？

> ID：14483696
> 
> 赞同：0
> 
> 时间：2013-01-23T15:52:38.830
> 
> 标签：android, android-intent, android-activity

如果我通过启动 Intent`activity.startActivity(intent)`并且有多个可以处理 Intent 的应用程序，您会看到一个对话框，类似于“使用完成的操作：”，然后是应用程序列表。

我如何检测他们是否取消了这个对话框（例如通过后退按钮）回到应用程序，而不是选择一个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:56:33.523

您不能，除非您创建自己的选择器对话框（使用来自`PackageManager`和的数据`queryIntentActivities()`）。

# c# - Save all changes in DataList on button click

> ID：14483699
> 
> 赞同：1
> 
> 时间：2013-01-23T15:52:45.013
> 
> 标签：c#, asp.net, web-services, datalist

I have the following DataList-

```
<td>
<asp:Label ID="Label3" runat="server" Text="Exclude"></asp:Label>
<asp:DataList runat="server" ID="excludeTextBox">
<ItemTemplate>

<br />
<asp:TextBox ID="myTextBox" runat="server" Text='<%# Container.DataItem.ToString() %>'></asp:TextBox>&nbsp;

</ItemTemplate>
</asp:DataList>
<td>
<asp:Label ID="Label4" runat="server" Text="Active"></asp:Label>
<asp:DataList runat="server" ID="activeCheck" >

<ItemTemplate>

<br />
<asp:CheckBox ID="CheckBox1" runat="server"  Checked='<%# Container.DataItem.ToString().Equals("1") %>' OnCheckedChanged="CheckBox1_CheckedChanged" AutoPostBack="true" />

</ItemTemplate>
</asp:DataList>

</td> 
```

So this is generating a textBox and checkBox for every row that exits in the database.

Currently there is no save action associated with the dataList, however if a user checks or unchecks one of the checkBoxes this calls a webservice and toggles the value in a data base table.

My question is, after a user has edited the text in some of the textBoxes and checked or unchecked some of the check boxes, how can I catch the changes in a `save changes` button. Because if the items have been dynamically created then technically they do not exist on the page. I want to do this without having a save option on ever row on the dataList.

```
protected void saveChanges_Click(object sender, EventArgs e)
{
     // capture all edits and call update webservice method.   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:05:02.953

您基本上必须构建更改的表示。因为没有通用的解决方案，所以我没有任何代码，但这里是过程：

随着项目的更改，您必须存储更改的内容。您可以将实际更改的行的索引存储在页面上的隐藏变量中，或者将更改存储在 JavaScript 对象中。单击保存更改后，您将在客户端上循环浏览这些更改，如果它们存在，则批量发送或一次发送一个。

如果您有一个隐藏字段，其值类似于`0,2,5`每个更改的索引，您可以轻松找到这些项目，从表单中获取值，然后将它们发送到 Web 服务。或者，您可以构建一个具有以下更改的 JavaScript 对象：

```
{ key: 2, checked: true, text:"My new text" } 
```

将这些存储在一个数组中，并通过 Web 服务将它们推送到服务器。

# svn - 一般詹金斯和颠覆信息

> ID：14483700
> 
> 赞同：0
> 
> 时间：2013-01-23T15:52:46.007
> 
> 标签：svn, jenkins

我过去曾使用颠覆来处理小组项目，只是听说过我一无所知的“jenkins”。有人可以告诉我它们之间的区别以及为什么詹金斯如此受欢迎吗？只是想了解一下他们各自的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:02:08.487

Subversion 是一个版本控制系统，用于存储您的代码。Jenkins 是一个基于 Web 的构建管理器和持续集成服务器。

它们如何协同工作的一个例子是您将更改的代码检查为颠覆。然后 Subversion 会通知 Jenkins 更改。Jenkins 会从 subversion 中检查代码，运行构建，可能会运行一些测试，然后可能会将结果通过电子邮件发送给开发团队。

# java - 使用任何详细信息进行春季登录

> ID：14483701
> 
> 赞同：2
> 
> 时间：2013-01-23T15:52:48.020
> 
> 标签：java, spring, spring-security, spring-ws

有谁知道在 Spring 中实现用户服务或身份验证提供程序的方法，在登录时将接受任何用户？

这是对我之前的问题的进一步说明：[spring-ws 获取用户名和密码](https://stackoverflow.com/questions/14460897/spring-ws-get-username-password/14468142#14468142)

我的 spring-ws 项目中有一个基本的安全设置：

```
<security:http auto-config="true">
    <security:intercept-url pattern="/**" access="ROLE_USER" />
    <security:intercept-url pattern="/*.wsdl" access="ROLE_USER" />
    <security:http-basic/>
</security:http>

<security:authentication-manager erase-credentials="false">
    <security:authentication-provider user-service-ref="userService">
        <security:user-service>
            <security:user name="me" password="mypass"
                authorities="ROLE_USER" />
        </security:user-service>
    </security:authentication-provider>
</security:authentication-manager> 
```

我不想在用户服务中指定用户，我希望有任何详细信息的用户能够访问，我只是想确保用户提供用户名和密码，并确保我可以从`SecurityContextHolder`.

是否有必要实现我自己的用户服务或身份验证提供程序来执行此操作，如果是这样，任何人都可以指出一个示例的方向或为我提供一个示例吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:59:29.870

你需要提供你自己`AuthenticationProvider`的`org.springframework.security.authentication.AuthenticationProvider`接口实现。

```
<security:authentication-manager alias="authenticationManager">
  <security:authentication-provider ref="myProvider" />
</security:authentication-manager>

<bean id="myProvider" class="MyProvider"/> 
```

`MyProvider`然后可以委托给自定义`UserDetailsService`设置权限（角色）或`ROLE_USER`直接设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:16:15.830

如果你改变

```
<security:http auto-config="true"> 
```

到

```
<security:http auto-config="true" use-expressions="true"> 
```

然后你可以设置你的拦截

```
<security:intercept-url pattern="/**" access="ROLE_USER" />
<security:intercept-url pattern="/*.wsdl" access="ROLE_USER" /> 
```

到

```
<security:intercept-url pattern="/**" access="isAuthenticated()" />
<security:intercept-url pattern="/*.wsdl" access="isAuthenticated()" /> 
```

这将允许任何经过身份验证的用户访问这些 url 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:12:42.447

您需要执行以下操作：

配置您的拦截 URL 以提供对任何角色名称的访问。您可以通过执行以下操作来做到这一点：

```
<security:http auto-config="true">
     <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_REMEMBERED" />
     <security:intercept-url pattern="/*.wsdl" access="IS_AUTHENTICATED_REMEMBERED" />
     <security:http-basic/>
</security:http> 
```

创建您自己的用户服务，该服务至少向用户授予任何用户名和密码组合的权限。配置 spring security 以使用您创建的服务。

```
<bean id="userService" class="com.ek.UserService" />
<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="userService" />
</authentication-manager> 
```

我希望这能让你知道你需要做什么。否则，我们可以为您创建示例代码。

# string - Shell 编程：列表的访问元素

> ID：14483703
> 
> 赞同：0
> 
> 时间：2013-01-23T15:52:51.777
> 
> 标签：string, list, shell, indexing

据我了解，在编写 Unix shell 程序时，您可以像带有 for 循环的列表一样遍历字符串。这是否意味着您也可以通过索引访问字符串的元素？

例如：

```
foo="fruit vegetable bread" 
```

我怎样才能访问这句话的第一个单词？我尝试使用像基于 C 的语言这样的括号无济于事，而且我在网上阅读的解决方案需要正则表达式，我现在想避免使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:27:02.800

作为参数传递`$foo`给函数。比你可以使用`$1`,`$2`等等来访问函数中的相应单词。

```
function try {
 echo $1
}

a="one two three"

try $a 
```

编辑：另一个更好的版本是：

```
a="one two three"
b=( $a )
echo ${b[0]} 
```

编辑（2）：看看[这个线程。](https://stackoverflow.com/questions/1975849/split-line-into-words-in-bash)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:23:41.373

使用数组是最好的解决方案。

这是使用间接变量的一种棘手方法

```
get() { local idx=${!#}; echo "${!idx}"; }

foo="one two three"

get $foo 1  # one
get $foo 2  # two
get $foo 3  # three 
```

笔记：

*   `$#`是给函数的参数数量（在所有这些情况下都是 4 个）
*   `${!#}`是最后一个参数的*值*
*   `${!idx}`是第'th 参数的*值*`idx`
*   您不能引用`$foo`，以便 shell 可以将字符串拆分为单词。

通过一些错误检查：

```
get() {
  local idx=${!#}
  if (( $idx < 1 || $idx >= $# )); then
    echo "index out of bounds" >&2
    return 1
  fi
  echo "${!idx}"
} 
```

请不要实际使用此功能。使用数组。

# git - 活分支数量的最佳范围是多少？

> ID：14483705
> 
> 赞同：12
> 
> 时间：2013-01-23T15:52:56.680
> 
> 标签：git, svn, branch, rcs

假设一个项目是：

*   `1`产品
*   `Y`多年来建造
*   包含`M`模块
*   用`L`[1..3] 语言编写
*   由开发人员总数`D`开发

什么时候项目包含太多或太少的实时分支？

我知道这是一个很难的问题，用数字来回答更难，但是我正在寻找量化的答案，如果可能的话，请制定一个公式。

背景

如果分支太少，代码永远不会准备好，开发人员不会进行大的更改，因为可能无法赶上下一个截止日期。同样，产品经理永远不会有足够的信心来命名某个版本。功能冻结通常会建立，新想法会延迟，开发速度会减慢。

如果分支太多，开发人员不确定他们的更改应该去哪里以及应该传播到哪里，哪个分支将合并到哪个主干。合并重构的代码非常困难。质量下降。此外，每个开发人员都必须在多个设置中测试他们的更改，浪费了大量的精力，开发速度变慢。

活分支数量的最佳范围是多少？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T11:53:51.633

> 确定 RCS（svn 或 git）包含太多分支的经验法则是什么？

怎么样`rule of 3`：

*   稳定代码的一个分支——主干；
*   一个不稳定的分支——即将发布的开发；
*   还有一个用于维护 - 以前版本的错误修复；

许多 git 托管的项目只使用两个分支：`master`主干和`vNext`未来版本。

使用`tags`功能标记开发中的里程碑。

请允许您的开发人员在本地创建开发分支，并根据他们正在执行的任务将它们合并到这些远程分支。

要求开发人员向本地分支添加有意义的名称和描述。并相应地标记提交。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-23T16:17:48.340

这个问题没有一个答案。它只能是“适合您的组织和工作流程的”。

恕我直言，一旦一个分支不再有用（例如，所有更改合并回主干。或者一个失败的实验/研究项目已被放弃或结束），它应该被删除。如果需要，您可以随时将其取回，这将有助于使事情变得更整洁。

根据您的编辑：如果有过时或“死”的分支，为什么它们仍然存在？根据定义，它们不再有用，所以只需删除它们。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-26T11:06:59.297

如果您正在使用 git，那么即使它们已经死了，拥有多个分支也会很有用。您可以跟踪在哪个产品版本中引入了错误（按版本一分为二），您可以为许多小团队组织您的工作。您可以通过查看死树枝来了解为什么有些想法无法实现。

关键是一致性。尝试对分支进行分组以适应您的工作流程。例如，您可以拥有

*   `stable`- CI 从这个构建生产和/或登台
*   `staging`- 从这个 CI 构建分期
*   `feature/*`- 功能分支
*   `hotfix/*`- 从 staging/stable 分支开始，用于修补程序
*   `experimental/*`- 用于可能无法产生干净和可维护的代码或可能中途放弃的研发功能

这里有一些基本提示：http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

此外，如果您希望您的团队快速开始使用良好的分支结构，请尝试使用 git flow：http: [//jeffkreftmeijer.com/2010/why-arent-you-using-git-flow/](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)

关于重构其他同事糟糕的代码。您可以使用一些`refactor/*`分支，这样您就可以通过在单独的分支上进行原子合并/变基来轻松查看损坏的内容。当然，测试是非常有用的，但是如果你不简单地`git bisect`告诉你是谁和什么时候引入了一个错误（如果你写一个测试来检查这个错误，那么你现在有一个有意义的测试可以添加到你的测试套件）。

底线是：不要害怕有很多分支，只要让它们井井有条。大多数情况下，合并并不像人们所说的那么复杂，您可以随时撤消它们（如果您不使用持续交付模型，则可以推迟到下一个版本）。

编辑：`something/*`我的意思是有多个具有共同`something/`前缀的分支，从而模仿目录结构。

EDIT2：在 SVN-likes 上情况有所不同，分支和合并并不便宜。谨慎行事；）

EDIT3：考虑为不同的模块使用不同的（子）存储库。它可能会简化开发。模块开发者只关心主应用的最新稳定版本，分支模型只面向一个模块。

EDIT4：问：“您是否可以考虑将一些数字或公式置于阈值之下，在该阈值之下可以接受凌乱的分支，而在该阈值之上可以更好地组织分支？”

当然！

公式（以我的拙见）很简单。

*   在本地拥有尽可能多的“脏”分支（只是不要将它们推送给其他人或共享存储库）
*   尽量不要推送脏分支，除非它们对其他开发人员有一定的价值。如果您已经在共享存储库中拥有它们，请保留它们并重命名它们（`legacy/*`或者简单`dirty/*`地想到）。

将它们视为文件结构。您可以拥有许多不再需要的旧文件，但如果您以有组织的方式保存它们，您可以轻松地将存档与您的工作集分开。

看到你喜欢的数字，你可能想要这些分支的真实世界用例

让我举一个我一直在做的中小型 Symfony2 PHP 项目的例子。

如果您有一个项目持续 6-9 个月，由 5 名开发人员以敏捷（scrum）方式积极开发，每两周进行一次客户端演示，您可能希望拥有分支：

*   每个用户故事（在紧密集成的用户故事上，这可能是个坏主意），总共大约 50 个分支，将它们视为功能分支
*   每个开发人员（根据需要，如果开发人员需要一段时间的工作），他们来来去去，但通常开发人员在这类项目中少于 3 个。他们中的一些人根本不使用公共开发人员分支，而是将脏分支留给自己
*   实验（用于研究目的的无限数量的分支，例如模块中使用的不同算法或库），据我记得大约 7 个分支
*   每个 sprint（从用户故事合并，有助于演示），大约 10 个，这些是我们在初始开发期间的暂存/稳定。为什么不用标签？标签也是，但分支，因为它更容易应用修补程序。
*   修补程序（通常是短暂的，为了便于挑选而隔离），3 个顶部 ;)
*   杂项（通常是正在进行的系统范围的功能和/或 2-3 人的团队分支），大约 10

如您所见，这里也没有确切的数字。我已经完成了几个这种规模的项目，其中大多数都有大约 70-80 个分支（20-30 个没有用户故事分支）。如果它们以一种合乎逻辑、简洁的方式组织起来，那么代码存储库就很容易浏览。

使用 git 还可以考虑使用 rebase 而不是合并，这样您就不会出现合并气泡（查看这篇文章[http://stevenharman.net/git-pull-with-automatic-rebase](http://stevenharman.net/git-pull-with-automatic-rebase)）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T16:15:03.437

> 确定 RCS（svn 或 git）包含太多分支的经验法则是什么？

没有任何。这样的通用规则不存在，并且（如果仍然可以定义任何本地规则）最后它依赖于团队和工作流。

使用“每个任务分支”，即使是中小型代码库，您也可能有很多短期分支（适用于任何规模的团队和使用的语言数量）

**移自评论：**

*每个开发人员*1-N 个*未关闭*的任务分支（N 取决于很多因素）*每个开发人员 1-2 个活动*+ 一些公共共享（稳定-不稳定-发布-...）

 *** * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-27T23:59:26.033

对于 Git 和 SVN，有不同的查看方式。但最重要的是拥有太多东西意味着什么，是出于性能原因还是组织原因。

所以**git 性能**：

在 git 中，分支只不过是对作为 git 存储库一部分的对象的引用。所以这个分支对象没有很大的开销。（有关更多信息，请参阅[http://git-scm.com/book/en/Git-Branching-What-a-Branch-Is](http://git-scm.com/book/en/Git-Branching-What-a-Branch-Is)）如果您销毁分支，您的存储库中仍然拥有所有 git 历史记录，它只是得到它的问题。一般来说 - 分支没有额外的存储空间。如果您使用的是一次性分支，请删除，但您的提交仍然存在。git 的整体性能会因 repo 的大小而变慢，但不会创建分支以使其变得更大，提交是。您可以重新打包或删除对象以清理和加速您的 git 存储库。

所以**SVN性能**：

在 SVN 中，分支是工作树的副本，但是，这些副本不是重复数据。同样，它们是对现有树的引用——只要使用 svn-copy。（有关更多信息，请参阅[http://svnbook.red-bean.com/en/1.1/ch04s02.html#svn-ch-4-sect-2.1）SVN](http://svnbook.red-bean.com/en/1.1/ch04s02.html#svn-ch-4-sect-2.1)可以很好地处理大文件和存储库，但同样， repo 不受分支机构的主要影响，相反，它们既高效又便宜。事实上，引用 svnbook 的话：“这里的重点是副本在时间和空间上都很便宜。你想多做分支就多做。”

**SVN 和 git 的组织**：

就像我上面说的，分支很便宜，所以它经常发生，一次性的分支应该被移除，但是历史分支很便宜。基本上，您应该有一种简单的方法来命名您的分支以进行约定：release_1、bugfix_200、temp_branch_for_fun - 任何使名称在按字母数字列出它们时自组织的东西。在 SVN 和 git 中使用标签也很好——人们倾向于对分支感觉更舒服，然而，在 git 中它们确实是相同的，在 SVN 中，它们对于时间点参考很有用。

多少分支太多 - 这是一个业务逻辑决策。我更喜欢为 Work In Progress 提供许多一次性分支，而只有历史分支用于发布。但这仅适用于迭代工作流程。最近我一直在将开发转向持续交付工作流程和分布式 git 分叉网络——然后我根本不在乎开发人员的 git fork 有多少分支——相反，我的源或主线存储库只有 1 个永久分支：master 和高优先级关键修补程序的一次性分支。

我上面提到的方法效果很好，因为现在每个开发人员都可以根据自己的喜好进行分支和遗忘，而不会打扰任何其他开发人员。同样，我的主人也没有杂乱的分支。（这也适用于迭代方法，并且只有发布的分支，没有临时或一次性的分支）。

大家都开心。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T22:16:16.943

git 中的分支被认为是一次性的。如果您不需要它并且不会再次使用它，则将其丢弃。但是在我的情况下，我确实管理了很多分支，但只有 1% 的分支正在使用中。我已锁定其余部分，并确保我已将正确的标签应用于发布版本。

您可能需要定义所有相关分支是否同时处于活动状态。因为您可以有 100 个分支，但只有 1 个正在使用。但是，如果您要为 1 个项目拥有 100 个活动分支，那么是的，我会说这太多了，这表明管理不善。

希望这有帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-26T05:10:56.407

如果要存档分支，我认为通常的解决方案是将它们推送到存档仓库然后删除它们；如果你想要他们回来，你知道去哪里找。**

# forms - Apache Tiles 和 Spring 模型对象

> ID：14483709
> 
> 赞同：1
> 
> 时间：2013-01-23T15:53:05.710
> 
> 标签：forms, spring, spring-mvc, apache-tiles

Header 部分（Apache Tiles 属性）由多个视图共享。它有一个表单，当页面加载时需要一个对象，如果缺少对象就会抱怨。目前，我将对象放置在模型中，并在每次创建继承此布局的视图时使用控制器将其传递给视图。

这种方法似乎相当乏味，因为我在控制器上重复了几行。我希望能够添加一次并完成。

我对 Apache Tiles 不太熟悉，可能有一个我不知道的简单解决方案。

寻找一些有用的提示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:10:05.703

你有几个选择来做到这一点。从我的头顶上你可以。

1.  使用 Tiles 视图准备器，[这里的简单示例](http://richardbarabe.wordpress.com/2009/02/19/apache-tiles-2-viewpreparer-example/)
2.  使用 Spring 拦截器或 AOP 等机制自动将对象添加到模型中，而不是到处重复代码

这实际上取决于您要添加的对象的性质以及它需要多少上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:16:42.890

您可以使用`HandlerInterceptorAdapter`类和`postHandle`方法来实现类似的目标。通过缺点，您需要定义一个规则来帮助您了解何时需要将对象添加到模型中，它可以是路径或 url 中的内容，这取决于您的模板的组织方式。这是一个正在做类似事情的拦截器的例子。

拦截器防御：

```
<mvc:interceptors>
    <bean class="your.package.HeaderModelInterceptor"/>
</mvc:interceptors> 
```

拦截器类：

```
public class HeaderModelInterceptor extends HandlerInterceptorAdapter {

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler,
        ModelAndView modelAndView) throws Exception {

        // Check if you need to add the object
        if (Your rule) {
            modelAndView.addObject("headerObject", headerObject);
        }

        super.postHandle(request, response, handler, modelAndView);
    }
} 
```

# vim - Searching vim history for matching first characters

> ID：14483710
> 
> 赞同：1
> 
> 时间：2013-01-23T15:53:06.257
> 
> 标签：vim

In bash, adding the lines

```
"\e[B": history-search-forward
"\e[A": history-search-backward 
```

to my .inputrc, allows me to search the history for expressions that begin with the characters in front of my cursor by using the `<page-up>`/`<page-down>` keys.

Can I achieve something similar in vim?

I already know about the possibility of opening a history window with `q:` and performing even complex searches there, but I am looking for a simple solution for the simplest case of history search.

Thank you!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:09:13.150

这是内置的`<Up>`和`<Down>`。

当然，您可以自定义它，例如：

```
:cnoremap <PageUp> <Up> 
```

# powershell - I need help understanding PowerShell security and file access issues

> ID：14483711
> 
> 赞同：22
> 
> 时间：2013-01-23T15:53:08.283
> 
> 标签：powershell, file-access

I'm working with PowerShell, running a script (from my console) that includes this line:

```
$inpath = "C:\users\xxxxx\path\foo\bar" 
```

and I keep getting this error:

```
Get-Content : Access to the path 'C:\users\xxxxx\path\foo\bar' is denied.
At C:\users\xxxxx\path\foo\testscript.ps1:53 char:12
+ Get-Content <<<<  $txtfile | Get-WordCount -Exclude (Get-Content c:\temp\exclude.txt) | select -First 15
    + CategoryInfo          : PermissionDenied: (C:\users\xxxxx\path\foo\bar:String) [Get-Content], UnauthorizedAcc
   essException
    + FullyQualifiedErrorId : GetContentReaderUnauthorizedAccessError,Microsoft.PowerShell.Commands.GetContentCommand 
```

The scripts and target files are all located on my local drive. I can access the files in Explorer, view/edit/save them using NotePad, and do not have any permissions restrictions set. When I'm on the command line, I can run the `get-content` cmdlet successfully on files in my path. I can change directories `PS C:> cd C:\users\xxxxx\path\foo\bar` and successfully list what's there. Even more interesting, I can duplicate the line that's erroring in the script, and NOT receive an error on the command line.

```
PS C:\users\xxxxx\path\foo> $inpath = "C:\users\xxxxx\path\foo\bar"
PS C:\users\xxxxx\path\foo> 
```

This makes me suspect that the 'Permission Denied' error is actually something else, or something vague enough that I've got no clue how to proceed with troubleshooting. Is it possible for PS to have different permissions than the user under which it's running? Has anyone seen this behavior before, and how did you solve the problem? I'm sure there's a simple solution that I don't know.

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-23T16:22:51.937

> ```
> Get-Content ：拒绝访问路径“C:\users\xxxxx\path\foo\bar”。
> 在 C:\users\xxxxx\path\foo\testscript.ps1:53 char:12
> ```

该路径看起来不像是文件，而是文件夹。

您确定要将文件名附加到文件夹并将其传递给`Get-Content`吗？

当您尝试像打开文件一样打开目录而不传递额外标志时，Windows 会拒绝访问；并且 .NET 不会传递这些标志（打开文件夹有一些特定情况，但它们不适用于此处）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-06T20:38:24.147

Get-Content 读取文件而不是文件夹的内容。请添加*.* 在您的文件夹路径之后，如下所示。

```
Get-Content "D:\Logs\*.*" | ?{($_|Select-String "test")} 
```

如果你想通过它下面的所有文件夹，然后添加 -recurse 如下：

```
Get-Content "D:\Logs\*.*" -Recurse | ?{($_|Select-String "test")} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T20:27:26.607

而不是这个：（根据您的评论）

```
foreach ($doc in $inpath) { do-function } 
```

尝试这个：

```
foreach ($doc in (gci $inpath)) { do-function } 
```

您正在`foreach`对字符串对象而不是文件夹项目执行操作。

# vba - Select text and insert footnote

> ID：14483712
> 
> 赞同：1
> 
> 时间：2013-01-23T15:53:08.253
> 
> 标签：vba, ms-word, footnotes

In a Word document, I would like to select a word or a phrase using the mouse, and run a macro. The macro should:

1.  Insert a footnote at the end of my selected word or phrase.
2.  Copy the selected text to the footnote, but italicised, and followed by a colon.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T21:06:00.503

应该这样做，当添加脚注时，它应该已经是斜体了！我还在逗号后添加了一个空格，为下一个脚注做好准备。

```
 Sub AddFootNote()

        NewFootNote = Selection & Chr(44) & Chr(32)

        With Selection
            With .FootnoteOptions
                .Location = wdBottomOfPage
                .NumberingRule = wdRestartContinuous
                .StartingNumber = 1
                .NumberStyle = wdNoteNumberStyleArabic
            End With
            .Footnotes.Add Range:=Selection.Range, Text:=NewFootNote

        End With

    End Sub 
```

-edit- 如果你想确保你的脚注是斜体的，你可以添加这部分。

```
With ActiveDocument.Styles("Footnote Text").Font
    .Italic = True
End With 
```

# c# - CertificateStore 的 Certificates.Find() 实际上并没有找到证书

> ID：14483716
> 
> 赞同：3
> 
> 时间：2013-01-23T15:53:16.473
> 
> 标签：c#, certificate

这是我的简单方法：

```
private static X509Certificate2 GetCertificateFromStore(StoreLocation storeLocation, string certName) {
    var store = new X509Store(StoreLocation.LocalMachine);
    try {
        store.Open(OpenFlags.ReadOnly);
        var certs = store.Certificates.Find(X509FindType.FindBySubjectName, certName, true);
        return certs.Count == 0 ? null : certs[0];
    }
    finally {
        store.Close();
    }
} 
```

Debug locals 显示`store.Certificates`已加载并包含两个证书 - 默认的“localhost”一个和一个我已导入，因此正确的存储已成功打开。

但是，`Find()`无论我搜索哪个证书以及是否使用`FindBySubjectName`或，该方法总是返回一个空结果`FindByThumbprint`。

有什么想法可能是错的吗？它是一个简单的控制台应用程序，仅用于学习和测试证书加载，即项目配置或其他任何地方几乎没有默认设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:00:20.957

尝试将 false 作为 store.Certificates.Find() 方法的第三个参数 - 您的证书可能无效并且被排除在外。

# playframework - Eclipse ctrl+space 不适用于 Play 1.2.5

> ID：14483719
> 
> 赞同：1
> 
> 时间：2013-01-23T15:53:20.857
> 
> 标签：playframework, playframework-1.x

我能够创建一个新应用程序并将其成功导入工作区。但是当我对 index.html 进行一些更改（例如添加列表）时，我没有从 Eclipse IDE 获得代码自动生成帮助。

我正在关注以下链接中的视频：

`http://www.playframework.org/documentation/1.2.5/home`

作者使用了一些黑色的 IDE（不知道那个 IDE 的名称是什么）并且正在获取代码自动生成帮助。

如果我需要添加一些插件或其他方式来从 Eclipse IDE 获取代码自动生成支持，请告诉我。我是初学者，因此没有代码自动生成，对我来说真的很难。

另外，让我知道在使用这个框架时可能对我有帮助的其他 IDE。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:13:22.270

我相信视频中的“IDE”是崇高的文字。

Play 1.x 有一个 Eclipse 插件，但不是很好。它不会对模板进行代码完成——我认为这就是你要问的。 [https://github.com/erwan/playclipse](https://github.com/erwan/playclipse) - 它支持模板中的播放结构，但缺少所有 HTML 结构 - 我宁愿选择 #{list}。

不过，您应该会在 Java 源文件中看到代码完成。我建议您在 Java 源代码中保留尽可能多的逻辑，并尽量使任何模板代码保持简单。

# ruby-on-rails - 在rails中相同模型的新视图中附加表单部分

> ID：14483722
> 
> 赞同：1
> 
> 时间：2013-01-23T15:53:32.103
> 
> 标签：ruby-on-rails, forms, view, model

我想使用相同的模型在一个视图（new.erb.html）中通过一次提交一次创建更多记录。

例如，我有一个名为 Report 的模型，其中包含一些字段，例如标题、描述和日期

当我单击添加按钮时，如何多次渲染相同的表单？我认为这不是嵌套模型的问题，因为始终是相同的模型动作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:23:59.033

你可以做这样的事情（我自己没有测试过代码）：

哈姆：

```
.model
  %input{:name => "model[][name]"}
  %input{:name => "model[][desc]"}
  %input{:name => "model[][date]"}
.container
%button.add-model 
```

js：

```
$('.add-model').click(function(){
  $('.model').clone().first().appendTo('.container');
}) 
```

控制器：

```
def save
   params[:model].each do |props|
     Model.create(props)
   end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:01:03.947

我所做的是使用 JavaScript (jQuery) - 在页面加载时，我将唯一呈现的表单保存到 JS 变量中（实际上不是表单，而是其中的输入），然后单击“添加更多”链接将更多输入添加到表单中.

并且要一次保存许多对象，您将需要手工制作的输入名称（例如`model[][name]`为了发送值数组），以及接受数组的控制器。

# c++ - 期望两个共享库构建在两个相同的平台上是否合理？

> ID：14483723
> 
> 赞同：3
> 
> 时间：2013-01-23T15:53:39.403
> 
> 标签：c++, linux, toolchain, gnu-toolchain

如果我构建相同的源代码，链接到相同版本的相同库，使用相同的工具链（相同的编译器，链接器等，GCC 4.4），使用相同版本的相同操作系统，（我的 Centos 5 Linux案例）但在两台不同的机器上；

假设生成的二进制文件应该是相同的是否合理？

这背后的背景是我的代码具有“未定义的行为”，它在一种配置上“有效”，但在另一种配置上无效，显而易见的答案是解决这个问题，但我很想知道我的假设是否生成的二进制文件应该是相同的正确的。

我注意到几百字节的大小差异，使用“nm”命令显示的符号位置略有不同，即使符号相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:21:54.997

通常我希望日期和/或元数据即使在同一主机上的构建之间也会略有不同。

您还忽略了提及编译器标志（`#define`例如命令行中的优化和 s）。

然而，我最初怀疑这些文件应该具有相同的大小，这导致我们得出结论，两个系统之间的*某些东西*是*不一样的。*最有可能的候选者是系统头文件（操作系统安装中的一个根级功能可能会导致这些文件的视图完全不同）和任何依赖库。

`g++ -E`您可以通过使用或类似的预处理来检查标题是否相同。您还可以按照库路径并确认链接到的文件在每个系统上都是相同的。

# web-services - 如何从 Grails 独立客户端访问 EJB 服务

> ID：14483725
> 
> 赞同：2
> 
> 时间：2013-01-23T15:53:41.417
> 
> 标签：web-services, ejb, grails-2.0

我一直无法从我在 grails 2.0.3 上开发的独立客户端访问我的 EJB 服务。EJB 服务部署在 glassfish 服务器 (Java) 上。我在 netbeans 测试器类上测试了这段代码以访问 EJB：

```
 Properties p = new Properties();
    p.put("java.naming.factory.initial", "com.sun.enterprise.naming.SerialInitContextFactory");
    p.setProperty("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
    p.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
    p.setProperty("org.omg.CORBA.ORBInitialHost", INTEGRATION_IP);
    p.setProperty("org.omg.CORBA.ORBInitialPort", CORBA_PORT);
    ctx = new InitialContext(p);
    try {
        this.admAuth = (AdmAuthenticationRemote) this.ctx.lookup(Tester.AUTHENTICATION_SERVICE_JNDI);
    }catch(Exception e){
        ...
    } 
```

这`Tester.AUTHENTICATION_SERVICE_JNDI`是一个包含已部署服务的路径的变量，在这种情况下，类似的东西`"java:global/..."`表示正在请求的服务的地址。这种访问服务的方式在测试人员中非常有效，但是当我尝试从 grails 中做同样的事情时就不起作用了。我能够以相同的方式创建上下文，但是当我调用调用时`ctx.lookup()`出现异常：

```
Message: Lookup failed for 'java:global/...' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.SerialInitContextFactory, 
java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
Cause: javax.naming.NamingException: Unable to acquire SerialContextProvider for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.SerialInitContextFactory, 
java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
[Root exception is java.lang.RuntimeException: Orb initialization erorr] 
```

主要的异常是命名异常，表示在 中失败`ctx.lookup()`，但原因是orb初始化异常，还有一个异常栈：

```
java.lang.RuntimeException: Orb initialization erorr
Caused by: java.lang.RuntimeException: java.lang.IllegalArgumentException: Can not set long field com.sun.corba.ee.impl.orb.ORBDataParserImpl.waitForResponseTimeout to java.lang.Integer
Caused by: java.lang.IllegalArgumentException: Can not set long field com.sun.corba.ee.impl.orb.ORBDataParserImpl.waitForResponseTimeout to java.lang.Integer 
```

我真的迷路了。我一直有很多问题要让这件事继续下去，我必须得到所有 glassfish 罐子（库和模块）才能`InitialContext()`打电话，但现在我不确定这是否仍然是罐子问题或配置问题或它是什么。

我知道`IllegalArgumentException`当你尝试在java中分配不兼容的类型时会发生这种情况，但我没有设置类似的东西，所以我假设它是一个内部方法初始化。

所以问题是为什么会出现这个异常？

是否有另一种方法可以更好地从 grails 调用我的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T14:40:07.987

错误是您尝试使用 grails 中的 tomcat 插件运行您的 Web 应用程序（使用命令 grails run-app）。问题是，当您尝试创建 InitialContext ( `com.sun.enterprise.naming.SerialInitContextFactory`) 时，如果您使用的是 GF 3.1 的客户端库，groovy 会在转换某些类型时出错。（我知道这是问题所在，但我真的不知道这是什么原因。因为理论上这应该可行）

如果生成 .war 文件并部署在 AppServer 中，则可以毫无问题地连接到 EJB。如果你将它部署在另一个 GF 服务器上，你就不必导入任何客户端 jars。

这将在生产环境中完美运行，唯一的问题是您必须在 GF 服务器上编译和部署您的应用程序，每进行一点更改，这在开发中有点烦人。

如果你想在 GF 之外工作并使用命令“ `grails run-app`”，你必须在你有 grails 应用程序的远程服务器上修改两个 .jar GF 3.1：

1- jar 文件 $GLASSFISH_HOME/modules/glassfish-corba-omgapi.jar

你应该在网上搜索类`com.sun.corba.ee.spi.orb.ParserImplBase`，并修改这部分

```
 Field field = getAnyField(name);
    field.setAccessible(true);
    field.set(ParserImplBase.this, value); 
```

为了这

```
if (name.equalsIgnoreCase("waitForResponseTimeout")) {
     Object newValue = new Long(1800000);
     Field field = getAnyField(name);
     field.setAccessible(true);
     field.set(ParserImplBase.this, newValue);
} else {
     Field field = getAnyField(name);
     field.setAccessible(true);
     field.set(ParserImplBase.this, value);
} 
```

这应该解决 java.lang.IllegalArgumentException

2- jar 文件 $GLASSFISH_HOME/modules/glassfish-corba-orb.jar

你必须删除`javax.rmi.CORBA.PortableRemoteObjectClass`这个库的类，因为这个类与 grails 插件使用的类有冲突

PS：如果您不想在您的 grails 应用程序中使用 GF 客户端 jar，您可以将以下库添加到客户端计算机的类路径中

```
$GLASSFISH_HOME/modules/ejb-container.jar
$GLASSFISH_HOME/modules/ejb.security.jar
$GLASSFISH_HOME/modules/management-api.jar 
```

如果你使用 grails 控制台和 grails run-app 命令，必须修改配置文件 $GRAILS_HOME/conf/groovy-starter.conf whit this

```
 load $GLASSFISH_HOME/modules/ejb-container.jar
   load $GLASSFISH_HOME/modules/ejb.security.jar
   load $GLASSFISH_HOME/modules/management-api.jar 
```

# c# - java相当于.NET MVC4 + Entity Framework（我的意思是像Grails，Spring MVC..etc这样的选项。不确定）

> ID：14483726
> 
> 赞同：0
> 
> 时间：2013-01-23T15:53:42.920
> 
> 标签：c#, java, asp.net-mvc

这是一个简单且非常具体的问题：如果您一直在使用 .NET MVC4 和带有大量 jQuery/Json 的 Entity Framework 使用 Visual Studio 2012 进行项目，并且您被要求生成“基于 Java” /“开放”平台，你会选择什么架构/工具？

我不希望“自动迁移”。从“按约定编码”强类型的角度来看，我更喜欢在具有相似功能的平台上认真地重新编码......，从模型生成数据库，优先使用代码......等等，集成自动化测试......等等

我不想在这里进行任何诸如“.net”与“java”之类的辩论。这只是一个关于工具和架构的具体问题。我问的原因是，我生来就是一个“java 人”，但在过去的几年里最终进入了 .NET，并且我忘记了很酷的新事物。

在不承认“爱”微软的情况下，我不得不承认我真的很喜欢 Visual Studio 2012、MVC4 和 Entity Framework 5。但是，很多公司/人出于正当理由更喜欢 Java，我不想争论。

我一直在看 Grails，但没有时间认真比较所有选项，所以我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:03:39.883

你看过[http://playframework.org/](http://playframework.org/)吗？作为 ac# 程序员，我发现自己很容易找到自己的方式。

它还实现了 MVC 模式，并且有一些不错的数据库连接的东西。我已经将它与 Google BigTable 一起使用，这是一种不同的方法，因为没有表架构。当然，它集成了单元测试和硒测试。＃惊人的 ：）

# regex - 使数字、连字符 (-) 和/或点 (.) 的组合无效的正则表达式

> ID：14483729
> 
> 赞同：0
> 
> 时间：2013-01-23T15:53:51.513
> 
> 标签：regex

目前我有一个正则表达式来验证字母、数字、连字符和/或点。

```
^[A-Za-z0-9]+(?:[-\\.]?[A-Za-z0-9])$ 
```

这使得这些值有效：

```
"john.doe"
"john123"
"johndoe"
"john-doe"
"john-doe.123" 
```

我还需要*拒绝*只包含数字、连字符或/和点的组合的值。这意味着该值必须至少包含一个字母才能有效。

这包括：

```
"123"
"1.2.3"
"1-2-3"
"12.3" 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:07:45.063

这个正则表达式应该工作：

```
/^(?:[0-9][-\.]?)*[A-Za-z](?:[-\.]?[A-Za-z0-9])*$/ 
```

*   强制执行至少一个字母
*   只允许连字符和点后跟数字或字母
*   不允许在开头或结尾使用连字符或点

（[正则表达式](http://regexr.com?33gpc)）

# spring - 如何在 mule 中定义本地 spring bean

> ID：14483730
> 
> 赞同：0
> 
> 时间：2013-01-23T15:53:58.127
> 
> 标签：spring, mule

我有几个流程，`mule-config.xml`但有些豆子只能说一个流程。有没有办法定义一个流本地的bean。我知道我可以定义一个内联 bean，如下所示：

```
<custom-transformer name="soapFaultTransformer" class="com.xxx.xx.transformer.VelocityMessageTransformer">
    <spring:property name="velocityEngine"  ref="velocityEngine" />
    <spring:property name="templateName"    value="soapFault.vm" />
    <spring:property name="beanClass">
        <spring:bean class="com.xxx.services.xx.Soap11Fault">
                <spring:property name="faultCode"   value="Client" />
                <spring:property name="faultString" value="Invalid Request" />
                <spring:property name="detail"      value="..." />
        </spring:bean>
    </spring:property>
</custom-transformer> 
```

但是`spring bean`需要在单个流程中的 2 个地方使用内联？我仍然可以在一个地方定义它并在两个地方引用它而不使其成为全局bean吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:40:13.707

将单个流所需的所有 spring bean 收集到一个单独的 spring 配置文件中，该文件仅由该流导入如何？

您的 mule 配置将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:jms="http://www.mulesoft.org/schema/mule/jms" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="EE-3.4.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
    http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
    http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd 
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
    http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <spring:import resource="encapsulated-beans.xml" />

    <flow name="flow" >
        ...
    </flow>

</mule> 
```

其中**encapsulated-beans.xml**将是包含例如您的com.xxx.services.xx.Soap11Fault bean 的配置文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:03:44.363

正如@David 所说，不可能声明特定于**单个**流的 bean。声明的 bean 将可用于所有流。

# scala - 在 Scala 特征上定义隐式视图边界

> ID：14483732
> 
> 赞同：15
> 
> 时间：2013-01-23T15:54:04.160
> 
> 标签：scala, generics, types

我正在做一个练习，以在 Scala 中实现一个功能性二叉搜索树，遵循我在 Haskell 中看到的类似模式。我有一个看起来像这样的结构：

```
trait TreeNode[A] {
    def isLeaf: Boolean
    def traverse: Seq[A]
    ...
}

case class Branch[A](value: A, left: TreeNode[A], right: TreeNode[A]) extends TreeNode[A] { 
   def isLeaf: Boolean = false
   def traverse: Seq[A] = ...
   ... 
}

case class Leaf[A]() extends TreeNode[A] { 
    def isLeaf: Boolean = true
    def traverse: Seq[A] = Seq[A]()
    ... 
} 
```

我想***设置***一个类型约束，`A`以便它只接受扩展的对象`Ordered`。看起来我需要在and上定义 A *( `[A <% Ordered[A]]`)*以及trait 上的视图绑定。但是，我不能在trait 上执行此操作，因为不接受视图边界。`Branch``Leaf``TreeNode``TreeNode`

据我了解，`<%`-style view-bounds 是`implicit`定义的语法糖，因此应该有一种方法可以编写在`TreeNode`特征中手动定义边界。不过，我不确定我应该怎么做。我环顾四周，但没有比需要定义某种隐式更进一步。

谁能指出我正确的方向？我是否完全从错误的角度来解决这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-23T16:22:57.350

问题是视图边界和上下文边界只是特定类型隐式参数的语法糖。当应用于泛型类的类型参数时（与应用于泛型方法时相反），这些隐式被添加到类的构造函数中。因为特征没有构造函数（或者更确切地说，只有一个无**参数**的构造函数），所以无处传递这些隐式参数，因此上下文边界和视图边界在泛型特征上是非法的。最简单的解决方案是`TreeNode`变成一个抽象类。：

```
abstract class TreeNode[A <% Ordered[A]] 
```

请注意，正如 Ben James 所建议的，使用与 an 绑定的上下文`Ordering`通常比与 an 绑定的视图更好`Ordered`（它更通用）。但是问题仍然相同：不适用于特征。

如果`TreeNode`变成一个类是不切实际的（比如你需要在类型层次结构的不同地方混合它），你可以定义一个抽象方法`TreeNode`，它将提供隐式值（类型`Ordered[A]`）并定义所有扩展它的类它。不幸的是，这更冗长和明确，但在这种情况下你不能做得更好：

```
trait TreeNode[A] {
  implicit protected def toOrdered: A => Ordered[A]
}

case class Branch[A<%Ordered[A]](value: A, left: TreeNode[A], right: TreeNode[A]) extends TreeNode[A] { 
   protected def toOrdered = implicitly[A => Ordered[A]]
}

case class Leaf[A<%Ordered[A]]() extends TreeNode[A] { 
    protected def toOrdered = implicitly[A => Ordered[A]]
} 
```

请注意，对于更简洁的定义，您可以等效地定义`Leaf`如下：

```
case class Leaf[A](implicit protected val toOrdered: A => Ordered[A]) extends TreeNode[A] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-23T16:10:27.807

您可以提供“证据”，`A`即通过在 上要求类型的`Ordered`抽象成员：`Ordered[A]``trait`

```
trait TreeNode[A] {
  implicit val evidence: Ordered[A]
} 
```

然后，您将被迫在任何具体子类型中提供此`A`内容，这证明`Ordered`：

```
case class Leaf[A](value: A)(implicit ev: Ordered[A]) extends TreeNode[A] {
  val evidence = ev
} 
```

* * *

相反，您可能希望限制`A`为具有隐式的类型`Ordering[A]`- 这不是继承关系；它更像是一个 haskell 类型类。但是上述技术的实现是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-16T09:05:05.553

[@ben-james](https://stackoverflow.com/users/189179/ben-james)'s answer is great, I would like improve it a bit to avoid redundant `val`s in classes.

The idea is to define implicit constructor parameter name the same as it is defined in trait that holds implicit value.

The idea is to avoid this line:

```
val evidence = ev 
```

Here is a complete example ([gist](https://gist.github.com/Abrasha/0629a8e96292db75f898c80512e0d857))

```
trait PrettyPrinted[A] extends (A => String)

object PrettyPrinted {
  def apply[A](f: A => String): PrettyPrinted[A] = f(_)
}

trait Printable[A] {
  implicit def printer: PrettyPrinted[A]
}

// implicit parameter name is important
case class Person(name: String, age: Int)
                 (implicit val printer: PrettyPrinted[Person])
  extends Printable[Person]

object Person {
  implicit val printer: PrettyPrinted[Person] =
    PrettyPrinted { p =>
      s"Person[name = ${p.name}, age = ${p.age}]"
    }
}

// works also with regular classes
class Car(val name: String)
         (implicit val printer: PrettyPrinted[Car])
  extends Printable[Car]

object Car {
  implicit val printer: PrettyPrinted[Car] =
    PrettyPrinted { c =>
      s"Car[name = ${c.name}]"
    }
} 
```

# c# - 秒表不工作

> ID：14483735
> 
> 赞同：0
> 
> 时间：2013-01-23T15:54:09.303
> 
> 标签：c#, .net, web-services, web-applications

我已经使用 Visual Studio 2010 创建了一个 Web 服务，该 Web 服务接收 2 个整数和秒表，其中一个参数还包括和 out 语句，如下例所示：

```
 public double[][] Parameters(int N_ele, int N_carac, Stopwatch inic, out Stopwatch ini_final) 
```

我在 Visual Studio 中创建了一个 Web 应用程序，必须创建一个 Web 引用才能调用 Web 服务。当我调用网络服务时，我使用了下一个代码：

```
webclient.Serv1 service = new webclient.Serv1();
int element, caracteristic;
System.Diagnostics.Stopwatch time_sent = new System.Diagnostics.Stopwatch();
System.Diagnostics.Stopwatch time_respond = new System.Diagnostics.Stopwatch();
servicie.Parameters(ele, caract,time_sent, out time_respond); 
```

Visual Studio 如何标记和错误它说：无法将 System.Diagnostics.Stopwatch 转换为 Application1.webclient.Serv1.Stopwatch

以及 out 语句中的相同错误，如果有人可以帮助我找到错误的原因以及如何解决它。我也在使用 C#、Visual Studio、.NET 框架 4 和 3，使用两个不同的 Web 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:56:24.627

您正在处理两个名为`Stopwatch`. 一个在`System.Diagnostics`命名空间中，另一个在`Application1.webclient.Serv1`命名空间中。确保所有`Stopwatch`实例都是相同类型的`Stopwatch`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:02:48.137

简短的回答：你不能那样做。

长答案：

在 VS 项目中引用 Web 服务会为 Web 服务声明的任何类创建代理类。

这意味着如果您在 WS 参数中公开类 System.Diagnostics.Stopwatch，客户端引用将为 Stopwatch 创建一个本地代理类，在您的情况下为 Application1.webclient.Serv1.Stopwatch。

因此，您不能在服务器端声明 Stopwatch 类的客户端传递 System.Diagnostics.Stopwatch。

如果这个代理类不仅仅包含公共数据成员，我会感到惊讶。

# iphone - 如何将视图设置为不在 Interface Builder 中的代码中设置的标记？

> ID：14483738
> 
> 赞同：0
> 
> 时间：2013-01-23T15:54:17.863
> 
> 标签：iphone, ios, xcode, ipad

我有一个使用 4 种不同 xib 的应用程序，我们称它们为 1-4

因此，您从视图 1 开始，如果您按下按钮，它将带您查看 2，在视图 2 上，您有一个后退按钮（将您带到 1）和前进按钮，将您带到 3 等等

无论如何，我正在删除下一页按钮，并添加了一个滑动控件而不是按下按钮，您可以滑动到下一页。

但是，我需要知道如何使用滑动来调用标记视图。

目前，下一页的 UIButton 在 IB 中设置为标签 1

这是我的刷卡代码（这是第 1 页，所以只有向左刷卡）

```
- (IBAction)swipeLeftDetected:(UIGestureRecognizer *)sender {

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
        Page2ViewController *UIViewController =
        [[Page2ViewController alloc] initWithNibName:@"Page2ViewController~ipad" bundle:nil];
        [self presentModalViewController:UIViewController animated:YES];

    }else{

        Page2ViewController *UIViewController =
        [[Page2ViewController alloc] initWithNibName:@"Page2ViewController" bundle:nil];
        [self presentModalViewController:UIViewController animated:YES];

        Page2ViewController *VC = [[Page2ViewController alloc] initWithNibName:@"Page2ViewController" bundle:nil];
        [self presentModalViewController:VC animated:YES];

        [self.view removeGestureRecognizer:[self.view.gestureRecognizers lastObject]];

        [VC release];
    }
} 
```

在那个代码中，我可以告诉它滑动到标签 1 吗？

将不胜感激任何帮助:)

谢谢，

克里斯

---- 更新了粮农组织 Rob；

在 appdelegate.m

```
- (void)swicthView:(int)viewControllerIndex :(CGRect)viewRect {

        if (viewControllerIndex < 0 || viewControllerIndex > viewControllers.count) {
            //invalid index passed to function - do nothing
        }else{

            if (subViewForceUseNibSize == NO) {
                //pass the view frame size at runtime

                if (CGRectIsEmpty(viewRect) || viewControllerIndex == 0) {

                    //no frame size so force full screen
                    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
                        viewRect =CGRectMake(0, 0, 320, 480);
                    }else{
                        viewRect = CGRectMake(0, 0, 768, 1024);
                    }
                }

            }else{
                //force use the nib size, so reduce size of NIB to leave display of NIB main nib below
                viewRect = ((UIViewController *)[viewControllers objectAtIndex:viewControllerIndex]).view.frame;
            }

        }

        //swicth our view
        if (viewControllerIndex == 0) {
            /*
             for (UIView *subview in window.rootViewController.view.subviews) {
             [window.rootViewController.view sendSubviewToBack:subview];
             }
             */

            for (int x = 1; x<[viewControllers count]; x++) {
                if (((UIViewController *)[viewControllers objectAtIndex:x]).view.superview != nil) {
                    [window.rootViewController.view sendSubviewToBack:((UIViewController *)[viewControllers objectAtIndex:x]).view];
                }
            }

            [window bringSubviewToFront:((UIViewController *)[viewControllers objectAtIndex:0]).view];
            return;
        }

        if (((UIViewController *)[viewControllers objectAtIndex:viewControllerIndex]).view.superview != nil) {
            ((UIViewController *)[viewControllers objectAtIndex:viewControllerIndex]).view.frame = viewRect;
            [window.rootViewController.view bringSubviewToFront:((UIViewController *)[viewControllers objectAtIndex:0]).view];
            [window.rootViewController.view bringSubviewToFront:((UIViewController *)[viewControllers objectAtIndex:viewControllerIndex]).view];
        }else{
            ((UIViewController *)[viewControllers objectAtIndex:viewControllerIndex]).view.frame = viewRect;
            [window.rootViewController.view bringSubviewToFront:((UIViewController *)[viewControllers objectAtIndex:0]).view];
            [window.rootViewController.view addSubview:((UIViewController *)[viewControllers objectAtIndex:viewControllerIndex]).view];

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:29:20.270

查看修改后的代码示例，很明显有一个`UIAppDelegate`名为`swicthView`[sic] 的方法用于在五个不同的视图控制器之间进行转换，所有这些视图控制器都是同时加载的。鉴于此结构，建议您有一个属性来跟踪加载了五个页面中的哪一个，并根据向左或向右滑动调用`swicthView`以转换到该控制器。因此：

```
@interface ViewController ()
@property (nonatomic) NSInteger currentPage;
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.currentPage = 0;

    UISwipeGestureRecognizer *gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleLeftSwipe:)];
    gesture.direction = UISwipeGestureRecognizerDirectionLeft;
    [self.view addGestureRecognizer:gesture];
    [gesture release];

    gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleRightSwipe:)];
    gesture.direction = UISwipeGestureRecognizerDirectionRight;
    [self.view addGestureRecognizer:gesture];
    [gesture release];

    // the rest of the viewDidLoad
}

- (void)handleLeftSwipe:(UISwipeGestureRecognizer *)gesture {

    if (self.currentPage < 4)
    {
        ++self.currentPage;
        [UIAppDelegate swicthView:self.currentPage :CGRectZero];
    }
}

- (void)handleRightSwipe:(UISwipeGestureRecognizer *)gesture {

    if (self.currentPage > 0)
    {
        --self.currentPage;
        [UIAppDelegate swicthView:self.currentPage :CGRectZero];
    }
} 
```

坦率地说，我强烈建议停用该`swicthView`设计，而是使用[自定义容器视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)。如果您观看[WWDC 2011 - 实现 UIViewController 容器](https://developer.apple.com/videos/wwdc/2011/?id=102)，您将看到一个很好的介绍，介绍了保持视图控制器层次结构与视图层次结构同步的重要性，并看到一些自定义容器的实际演示。

* * *

下面提供的原始答案基于正在执行的原始代码片段`presentViewController`。事实证明，需要一个非常不同的解决方案，如上所述，但出于历史目的，我保留了原始答案：

**原答案：**

我假设你有以下类型的代码`viewDidLoad`：

```
UISwipeGestureRecognizer *gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleLeftSwipe:)];
gesture.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:gesture]; 
```

然后你的手势处理程序可能是：

```
- (void)handleLeftSwipe:(UISwipeGestureRecognizer *)gesture
{
    NSString *nibName;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        nibName = @"Page2ViewController~ipad";
    else
        nibName = @"Page2ViewController";

    Page2ViewController *controller = [[Page2ViewController alloc] initWithNibName:nibName bundle:nil];

    // if supporting iOS versions earlier than 5.0, then you should use:
    //
    //     [self presentModalViewController:controller animated:YES];
    // 
    // otherwise you should use presentViewController as done below.

    [self presentViewController:controller animated:YES completion:nil];

    [controller release];
} 
```

请注意，我不会删除该手势（除非您在返回此视图时真的不希望该手势出现，这是不太可能的）。另请注意，我正在创建控制器、呈现和发布。

我不理解您`tag`在这种情况下对属性的重复引用，因为数值`tag`用于识别视图的子视图，而不是用于识别视图控制器或类似的东西。所以你说“下一页的 UIButton 在 IB 中设置为标签 1”，然后你问“在哪里......我可以告诉它滑动到标签 1 吗？” “滑动到按钮”是没有意义的。但是，您可以拥有两个处理程序，即按钮`IBAction`（我将调用它`onPressNextButton`...我不知道您调用它）和`handleLeftSwipe`调用相同的方法，例如：

```
- (void)handleLeftSwipe:(UISwipeGestureRecognizer *)gesture
{
    [self goToNextViewController];
}

- (IBAction)onPressNextButton:(id)sender
{
    [self goToNextViewController];
}

- (void)goToNextViewController
{
    NSString *nibName;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        nibName = @"Page2ViewController~ipad";
    else
        nibName = @"Page2ViewController";

    Page2ViewController *controller = [[Page2ViewController alloc] initWithNibName:nibName bundle:nil];
    [self presentViewController:controller animated:YES completion:nil];
    [controller release];
} 
```

* * *

参考：

*   [`presentViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW75)，模态转换的首选方法。
*   [`presentModalViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/presentModalViewController%3aanimated%3a)，如果您需要向后兼容 5.0 之前的 iOS 版本，则使用现在已弃用的方法。
*   *Cocoa 编码指南*中的[命名基础知识](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html#//apple_ref/doc/uid/20001281-BBCHBFAH)，提供有关命名变量和方法的建议。注意变量通常以小写字母开头，类通常以大写字母开头。

# mysql - MYSQL 子查询 SELECT 在 JOIN 子句中

> ID：14483739
> 
> 赞同：15
> 
> 时间：2013-01-23T15:54:18.640
> 
> 标签：mysql, subquery

好的...好吧，我必须将子查询放在一个`JOIN`子句中，因为它选择了多个列，并且将其放在`SELECT`子句中不允许这样做，因为它给了我一个操作数错误。任何人，这是我的查询：

```
SELECT 
    c.id, 
    c.title, 
    c.description, 
    c.icon, 
    p.id as topic_id, 
    p.title AS topic_title, 
    p.date, 
    p.username
FROM forum_cat c
        LEFT JOIN (
            SELECT 
                ft.id, 
                ft.cat_id, 
                ft.title, 
                fp.date, 
                u.username
            FROM forum_topic ft
                JOIN forum_post fp ON fp.topic_id = ft.id
                JOIN user u ON u.user_id = fp.author_id
            WHERE ft.cat_id = c.id
            ORDER BY fp.date DESC
            LIMIT 1
         ) p ON p.cat_id = c.id
WHERE c.main_cat = ?
ORDER BY c.list_no 
```

现在我需要的重要的东西......`FOR EACH`类别，我想在每个类别中显示最新的帖子和主题标题。但是，这个 select 语句将进入一个 foreach 循环，该循环围绕在我的 main_cat 中找到的一般类别进行循环。所以有 5 个主要类别和 3-8 个子类别。这是子类别查询。但是对于每个子类别，我需要获取最新的帖子。但是，它只为每个主要类别运行此 SELECT 查询，因此它只选择所有子类别组合之间的最新帖子...我想获取每个子类别的最新帖子，但我宁愿不对每个子类别运行此查询......因为我希望页面加载速度更快。但请记住，一些子类别不会有最新的帖子，因为其中一些甚至可能不包含主题！因此，左连接。

有谁知道该怎么做？

`(WHERE ft.cat_id = c.id)`顺便说一句，它在子查询中给我一个错误，因为`c.id`它是一个未知列。但我试图从外部查询中引用它，所以有人可以帮助我解决这个问题吗？

谢谢！

所有表格：

```
forum_cat (Subcategories)
-----------------------------------------------
ID, Title, Description, Icon, Main_cat, List_no

forum_topic (Topics in each subcategory)
--------------------------------------------
ID, Author_id, Cat_id, Title, Sticky, Locked

forum_post (Posts in each topic)
--------------------------------------------
ID, Topic_id, Author_id, Body, Date, Hidden' 
```

主要类别在函数中列出。我没有将它们存储在数据库中，因为它们永远不会改变，这很浪费空间。虽然有7个主要类别。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T06:13:20.963

如果不查看表的 DDL、相关的示例数据和所需的输出，就很难判断。

我可能弄错了你的要求，但试试这个：

```
SELECT *  
  FROM forum_cat c LEFT JOIN 
       (SELECT t.cat_id, 
               p.topic_id, 
               t.title, 
               p.id, 
               p.body, 
               MAX(p.`date`) AS `date`, 
               p.author_id, 
               u.username
          FROM forum_post p INNER JOIN
               forum_topic t ON t.id = p.topic_id INNER JOIN
               `user` u ON u.user_id = p.author_id
         GROUP BY t.cat_id) d ON d.cat_id = c.id
 WHERE c.main_cat = 1
 ORDER BY c.list_no 
```

# visual-studio-2012 - BizTalk 2010 未将项目类型添加到 Visual Studio 2012

> ID：14483740
> 
> 赞同：2
> 
> 时间：2013-01-23T15:54:19.767
> 
> 标签：visual-studio-2012, biztalk

我正在新 VM 上设置 BizTalk 服务器并安装 BizTalk 2010 Host Integration Developer Ed。但它不会将项目类型添加到 VS 2012 中！！！这是一个全新的安装，首先安装了 VS。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T17:19:19.013

据微软称。无法从 Visual Studio 2012 打开 BizTalk 2010 项目：

[http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx#project](http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx#project)

BizTalk 2010 您无法在 Visual Studio 2012 中打开项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:30:16.520

如果您需要在 VS 2012 中进行开发，您可以使用 biztalk 2013 beta。

[http://blogs.msdn.com/b/biztalk_server_team_blog/archive/2012/11/06/announcing-biztalk-server-2013-beta.aspx](http://blogs.msdn.com/b/biztalk_server_team_blog/archive/2012/11/06/announcing-biztalk-server-2013-beta.aspx)

# sml - 我的功能有什么问题

> ID：14483741
> 
> 赞同：0
> 
> 时间：2013-01-23T15:54:19.623
> 
> 标签：sml, smlnj

如果传递的参数是合理的日期，我有以下函数应该返回 true，否则返回 false。问题是即使对于明显合理的日期它也会返回错误，我无法弄清楚它有什么问题。请任何眼睛更敏锐的人帮忙。这里是：

```
fun reasonable_date(x: int*int*int) =
    if #1 x > 0 andalso #2 x > 0 andalso #2 x <= 12 andalso #3 x > 0 andalso #3 x <= 31 
    then                                
    if #2 x = 1 mod 2 andalso #2 x < 8 andalso #3 x <= 31 then true
         else if #2 x = 0 mod 2 andalso #2 x >= 8 andalso #3 x <= 31 
         then true
     else if #2 x = 0 mod 2 andalso #2 x < 8
     then
         if #2 x = 2 andalso (#3 x = 28 orelse #3 x = 29) then true
         else if #2 x = 0 mod 2 andalso #3 x <= 30 then true
         else false
         else if #2 x = 1 mod 2 andalso #2 x > 8 andalso #3 x <=30 then true 
     else false
     else false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:33:43.363

您当前的解决方案是不可能维护的，它的逻辑看起来像是下地狱再回来的东西:)

我建议您将其分解为更小的逻辑部分，以确保简单的属性。因此，无需首先测试年、月和日是否大于或等于一，您可以将所有关于年、月和日的逻辑分组为自己

```
fun daysInMonth n =
    List.nth([31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], n-1)

fun reasonable_date (y, m, d) =
    (* Check year >= 1 *)
    y >= 1 andalso

    (* Check 1 <= month <= 12 *)
    (m >= 1 andalso m <= 12) andalso

    (* Check 1 <= day <= n, for n being the number of days in specified month *)
    (d >= 1 andalso d <= daysInMonth m) 
```

显然这不处理闰年，但是如果月份是二月，使用辅助函数实现也很简单。可以这样做

```
fun reasonable_date (y, m, d) =
    (* Check year >= 1 *)
    y >= 1 andalso

    (* Check 1 <= month <= 12 *)
    (m >= 1 andalso m <= 12) andalso

    (* Check 1 <= day <= n, for n being the number of days in specified month *)
    (d >= 1 andalso
     (* If February, and leap year *)
     ((m = 2 andalso isLeapYear y andalso d <= 29)
      (* Any other month or non leap year *)
      orelse d <= daysInMonth m)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:22:13.763

您反复使用诸如`if #2 x = 1 mod 2`. 这几乎肯定不会像您想象的那样起作用。这里，`mod`是一个算术运算符，表示将 1 除以 2 时获得的余数，而不是说`#2 x`等于 1 模 2 的数学表达式。因此，不是测试是否`#2 x`是奇数，而是测试它是否等于 1。通过你的条件，你真的只允许`true`when`#2 x`是 1，所以你的合理日期必须都在 1 月（甚至可能没有，我还没有完成所有条件）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T08:26:31.723

我更喜欢这个似乎更具可读性的解决方案

```
fun reasonable_date (y, m, d) =
    let val daysInMonth =
           List.nth([31, if isLeapYear y then 29 else 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], m-1)
    in
        (* Check year >= 1 *)
        y >= 1 andalso

        (* Check 1 <= month <= 12 *)
        (m >= 1 andalso m <= 12) andalso

        (* Check 1 <= day <= n, for n being the number of days in specified month *)
        (d >= 1 andalso d <= daysInMonth)
    end 
```

但可能是我错过了一些技巧（我假设你已经写了一个辅助函数 isLeapYear）

# android - 什么决定了 Android 启动时应用程序自动启动？

> ID：14483742
> 
> 赞同：2
> 
> 时间：2013-01-23T15:54:20.477
> 
> 标签：android, android-intent, broadcastreceiver, android-service

在我的应用程序中，有一个功能允许用户拨打特定号码并将活动显示在前面。我有以下接收器，并且是在 AndroidManifest.xml 中注册的**唯一接收器。**

```
<receiver android:name="com.example.myapp.OutgoingCallListener" android:exported="true">
    <intent-filter>
        <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
    </intent-filter>
</receiver> 
```

请注意没有`BOOT_COMPLETED intent`或`service`。

现在这是我无法弄清楚的事情。当我重新启动设备时，请检查`Running Apps`，我的应用程序未在此处列出。但是，如果我拨打特定号码，我的应用程序就会启动并且活动会被带到前面。

我的问题是：如果应用程序不是服务，并且没有在启动时启动，它如何从 Android 接收意图？也就是说，就我而言，我的应用程序`NEW_OUTGOING_CALL`根本没有启动时如何收听？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:57:41.167

在清单中注册的A`BroadcastReceiver`始终能够响应匹配的广播。如果您的进程由于任何原因没有运行，Android 将为您启动一个进程。

# windows - Perforce：如何在编译源代码时自动检出二进制文件

> ID：14483744
> 
> 赞同：2
> 
> 时间：2013-01-23T15:54:29.043
> 
> 标签：windows, visual-studio-2005, perforce, p4v

我想创建一种机制，通过该机制自动提交与更新代码对应的可执行文件。我的开发环境是 Visual Studio 2005，我使用 windows GUI 客户端提交更改。

理想情况下，我想确保将最新的二进制文件提交到与代码更改相同的更改列表中。

我的要求是：

*   当源代码依赖关系发生变化时，应重新编译代码并检查二进制文件。
*   相关文档/非源文件不影响二进制
*   当源被更改并提交但二进制文件未包含在更改列表中时，Perforce 应该抱怨。

我该如何执行这些规则？是否可以创建在每次提交之前运行的 P4 脚本？另外，是否可以编写一个 Visual Studio 脚本在编译前自动检出可执行文件？

谢谢，

沙哈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:03:21.690

我认为你可以在没有太多工作的情况下完成大部分工作。

如果您在 Perforce 工作区中包含输出目录，您可以轻松地在每次构建时检查它们。（您可能想与 Perforce 管理员讨论使用“清除”选项，这样您就不会存储数千个二进制文件副本。）您可以使用触发器来确保某些目录中的源代码始终与二进制文件一起提交.

# lucene - 在 ElasticSearch 中，移除的停用词对评分的影响仍然很小

> ID：14483746
> 
> 赞同：3
> 
> 时间：2013-01-23T15:54:31.683
> 
> 标签：lucene, elasticsearch

基本匹配查询：Billy Sue

测试匹配查询 #1：Billy Sue 和

测试匹配查询 #2：比利和苏

我们最终在 Base 和 #1 之间得到相同的分数，但 Base 和 #2 的分数相似但不同。

使用分析 API，两个测试查询中的停用词都被删除，但基本查询和测试查询 #2 之间的`and`start_offset 和 end_offset 标记属性不同。`Sue`

本质上，剩余标记之间的停用词删除前距离被记录下来，并且对评分的影响很小但有限。

**问题**

有没有办法将令牌的`start_offset`和`end_offset`属性的计算延迟到停用词被删除之后，或者以其他方式防止删除的停用词以任何方式影响评分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:19:27.060

也许禁用停用 词过滤器上的[位置增量，看看是否有帮助？](http://www.elasticsearch.org/guide/reference/index-modules/analysis/stop-tokenfilter.html)特别是如果您的映射在停用词过滤器之后有某种过滤器，您会从位置增量中得到奇怪的伪影

例如这样的：

```
"analyzer": {
   "analyzer_example":{
      "tokenizer":"standard",
      "filter":["standard", "lowercase", "filter_stop"]
    }
},
"filter": { 
   "filter_stop":{
      "type":"stop",
      "enable_position_increments":"false"
    }
} 
```

# r - 如何从多行中创建列？

> ID：14483748
> 
> 赞同：3
> 
> 时间：2013-01-23T15:54:38.363
> 
> 标签：r, aggregate, reshape

我对 R 和编程本身还是很陌生，现在我的 data.frame 存在问题，不允许我继续工作。

我有一组数据如下

## 表格1

```
 Individual             Score
    Tim                      45
    Tim                      77
    Tim                      32
    Clare                    92
    Clare                    70
    Clare                    88 
```

让我解释一下上面的表 1，我有几个人（上例中的 TIm 和 Clare），我在他们在 3 个不同场合（2009 年、2010 年、2011 年）提出的测试中获得了他们的分数我正在想办法把上面的变成这样的：

## 表2

```
 Individual             Score09             Score10             Score11
    Tim                      45                   77                  32
    Clare                    92                   70                  88 
```

我使用ddply获取表1，因为我原来有测试的子集的信息（变量分数只是所有子集的总和）

请让我知道是否有办法以表 2 而不是表 1 结束，因为我有超过 10000 个观察结果，并且表 1 的设置不会让我按照预期的建议继续前进。

## 编辑：

生成表 1 的原始 df 是：

数据框如下

```
 Base          Individual     score_math    score_bio     score_chem
    SB1120091       Tim              12            23             10
    SB1120092       Tim              30            25             22
    SB1120101       Tim              17             5             10
    SB1120091       Clare            50            20             22
    SB1120092       Clare            40            10             20
    SB1120101       Clare            47            20             21 
```

代码是：

`>Table1 <-ddply(x, .(Indivual), summarise, Score=(score_math*score_bio*score_chem))`

## 编辑2：

原始数据集没有 Year 变量，但有一个基本变量，提供有关何时进行测试的信息。

此外，分数变量是作为所有子集分数的乘积计算的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:08:52.870

数据：

```
df <- structure(list(Individual = structure(c(2L, 2L, 2L, 1L, 1L, 1L), 
                     .Label = c("Clare", "Tim"), class = "factor"), 
                     Score = c(45, 77, 32, 92, 70, 88), 
                     count = c(1L, 2L, 3L, 1L, 2L, 3L)), 
                     .Names = c("Individual", "Score", "count"), 
                     row.names = c(NA, -6L), class = "data.frame")
df$count <- rep(c("09", "10", "11"), 2) 
```

*   `reshape`从基本统计中使用：

    ```
    > reshape(df, idvar="Individual", timevar="count", direction="wide", sep="")

    #   Individual Score09 Score10 Score11
    # 1        Tim      45      77      32
    # 4      Clare      92      70      88 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:08:40.920

您可以使用该`reshape2`软件包：

```
# presuming your data frame is 'xx'
library(reshape2)

# Create a 'Case' Column
xx$Case <- rep(paste0("Score", c("09", "10", "11")), 2)

dcast(xx, Individual ~ Case, value.var="Score")
 Individual Score09 Score10 Score11
      Clare      92      70      88
        Tim      45      77      32 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T16:40:49.530

现在您已经提供了原始表，请`xtabs()`在原始数据集上使用。假设您的数据集名为“x”：

```
xtabs(score_math + score_bio + score_chem ~ Individual + Year, x)
#           Year
# Individual 2009 2010 2011
#      Clare   92   70   88
#      Tim     45   77   32 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T16:28:18.060

您的`ddply`调用是按个人拆分函数，这会为每个人生成一个单独的数据框，并分别计算每个数据框的总和。数据集中的每个人都有多行，所以这个总和对于每一行都有一个总和。然后它将数据重新组合在一起，默认情况下，在结果中为每个初始行提供一行。但是您希望每个人有一排；如果我们只是转置结果，它会变成一个包含一行的矩阵，从而产生所需的行为。

使用您提供的数据：

```
x <- read.table(text="Year Individual score_math score_bio score_chem
2009 Tim 12 23 10
2010 Tim 30 25 22
2011 Tim 17 5 10
2009 Clare 50 20 22
2010 Clare 40 10 20
2011 Clare 47 20 21", header=TRUE) 
```

这是一个修改后的`ddply`调用：

```
> ddply(x, .(Individual), summarise, Score=t((score_math+score_bio+score_chem)))
  Individual Score.1 Score.2 Score.3
1      Clare      92      70      88
2        Tim      45      77      32 
```

`ddply`但是，这确实不是正确的工具；您只需对每一行进行非常简单的计算，然后再进行整形。我的偏好是为总分添加一列，然后`dcast`从`reshape2`包中使用。这种偏好的一个原因是，您将拥有一个完整的主数据集，其中包含您以后可能需要的所有信息，然后使用它来执行所有计算和转换。

```
library(reshape2)
x$Total <- with(x, score_math + score_bio + score_chem)
dcast(x, Individual ~ Year, value.var="Total") 
```

# django - Django 序列化为 JSON 错误：“MetaDict”对象没有属性“concrete_model”

> ID：14483750
> 
> 赞同：7
> 
> 时间：2013-01-23T15:54:42.467
> 
> 标签：django, json, mongodb, serialization

我正在开发一个使用 Django 和 MongoDB（作为模型）的应用程序。我正在尝试使用从表单中获取的数据（手动）初始化模型对象（以便将其进一步发送到另一台服务器）。该模型如下所示：

```
class MyModel(DynamicDocument):
    study_name = StringField(default="first study")
    individual_name = StringField(default="individual")
    file_list = ListField(StringField)   # this is a list of paths to some files 
```

在表格中，我正在执行以下操作：

```
pilot_object = MyModel()
pilot_object.individual_name = self.data['individual_name']
pilot_object.study_name = self.data['study_name']
pilot_object.file_list = files_list #file paths (strings) 
```

其中 self.data 是从表单接收到的数据。现在我想按照文档中的描述将此对象（pilot_object）序列化为 JSON：

```
data_serialized = serializers.serialize('json', [pilot_object, ]) 
```

但我收到此错误：

**'MetaDict' 对象没有属性 'concrete_model'**

并且序列化失败。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-28T02:34:26.667

是的，对于 mongoengine 文档，使用 -- 'from rest_framework_mongoengine import serializers' 而不是 from rest_framework import serializers。并且序列化器类应该继承 DocumentSerializer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T11:03:02.197

如果你有元`{Inheritance:True}`然后删除它。它正在寻找我认为您没有设计的具体类，因此无论如何都不需要继承为 True。它对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-30T08:28:22.140

这是由于您使用的是旧版本的 django。[检查1.3](https://github.com/django/django/blob/stable/1.3.x/django/db/models/base.py)和[1.4](https://github.com/django/django/blob/stable/1.4.x/django/db/models/base.py)之间的区别，`concrete_model`仅适用于 1.4 及更高版本。

# c# - 从 Content-Type 获取扩展

> ID：14483751
> 
> 赞同：3
> 
> 时间：2013-01-23T15:54:43.773
> 
> 标签：c#, content-type, file-extension

这是一个非常直接的问题。

我有一个`Content-Type`以字符串形式存储的。

理想情况下，我想从中推断出一个扩展，`Content-Type`而不必有一个巨大的讨厌的开关盒。

是否有内置结构来实现这一目标？

顺便说一句，我发现了这个[问题](https://stackoverflow.com/questions/1910097/content-type-by-extension)，但从扩展到内容类型的方向相反。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:58:46.103

你会想要一个`Dictionary`. 这将允许您查找给定内容类型的扩展：

```
Dictionary<string, string> extensionLookup = new Dictionary<string, string>()
{
    {"ContentType1", ".ext1"},
    {"ContentType2", ".ext2"},
}; 
```

您可以根据数据库表、文件等填充字典，而不是对值进行硬编码。

一旦你有了`Dictionary`它，它就像这样简单：

```
string extension = extensionLookup[someContentType]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-06T20:56:39.760

在我的 W10 盒子的注册表中，有一个广泛的列表，将内容类型映射到`.extn`：

```
[HKEY_CLASSES_ROOT\MIME\Database\Content Type] 
```

您可能想探索[HtmlAgilityPack OSS 项目](https://github.com/zzzprojects/html-agility-pack)，该项目的源文件`HtmlWeb.cs`包含以下方法：

```
public static string GetContentTypeForExtension(string extension, string def)
public static string GetExtensionForContentType(string contentType, string def) 
```

还有[注释掉]字典和人口代码：

```
//private static Dictionary<string, string> _mimeTypes;
//        _mimeTypes = new Dictionary<string, string>();
//        _mimeTypes.Add(".3dm", "x-world/x-3dmf");
//        _mimeTypes.Add(".3dmf", "x-world/x-3dmf");
//    ...
//        _mimeTypes.Add(".zoo", "application/octet-stream");
//        _mimeTypes.Add(".zsh", "text/x-script.zsh"); 
```

因此，您可以自己酿造（也许只是您的应用程序需要的常见的）以提高效率。

仅供参考，内容类型值和用法的权威列表在这里： **[www.iana.org/assignments/media-types/media-types.xhtml](https://www.iana.org/assignments/media-types/media-types.xhtml)**

# javascript - javascript回调函数调用自身直到为真

> ID：14483754
> 
> 赞同：1
> 
> 时间：2013-01-23T15:54:47.723
> 
> 标签：javascript, json, callback

我正在运行一个需要继续运行的函数，直到我得到响应示例

```
exports.getJson = function(url, callback) {

    var loader = Titanium.Network.createHTTPClient();
    loader.open("GET", url);
    loader.onload = function() {
        var response = JSON.parse(this.responseText);
        callback(response);
    };
    loader.onerror = function(e) {
        callback(false);
    };
    // Send the HTTP request
    loader.send();

} 
```

好的，我遇到的问题是它有时会给我一个 null 的响应，我需要它再次运行。

所以我这样称呼它。

```
 url = 'http://example.com/test.json';
    main.getJson(url, function(response) {
            if(response){
                addData(response);

            }else{      
//return no response i need to run the function again now until it comes back as true
            }       
    }); 
```

谁能给我一个很好的方法来做到这一点，至少尝试 3 次然后返回 false ？？？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:03:24.860

只需将代码放入函数并再次调用它：

```
var counter = 0;
function getData() {
    main.getJson('http://example.com/test.json', function(response) {
        if(response){
            addData(response);
        }
        else if (counter < 3) {
            counter++;
            getData();
        }   
    });
}); 
```

# dart - Web 组件应该放在“web”文件夹下吗？

> ID：14483755
> 
> 赞同：3
> 
> 时间：2013-01-23T15:54:49.533
> 
> 标签：dart

将 Web 组件放置在`web`某个文件夹下的某个位置，还是该`lib`文件夹下？

我问是因为我不确定，据我所知没有提到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:44:33.860

将您的组件放在 lib 目录下。

```
lib/
  control1.html
  control2.html
  control3.html 
```

假设您配置`pubspec.yaml`文件并将包命名为“my_controls”。

```
name: my_controls
dependencies:
  html5lib: '>=0.3.1+2'
  web_ui: '>=0.3.2' 
```

由于您的项目现在定义了一个包，因此您可以将 lib 目录中的文件引用为：

```
<link rel="components" href="packages/my_controls/control1.html">
<link rel="components" href="packages/my_controls/control2.html">
<link rel="components" href="packages/my_controls/control3.html"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:50:59.633

您可以指向组件：

```
<link rel="components" href="component/ui/login.html"> 
```

在这种情况下，您的组件位于 web/component/ 和 web/component/ui/ 中，您有 login.html 文件

# ssl - ircd on aws ssl错误

> ID：14483759
> 
> 赞同：1
> 
> 时间：2013-01-23T15:54:57.203
> 
> 标签：ssl, amazon-web-services

我在我的 aws 上运行了 unrealirc，它是用 ssl 编译的。我将 server.key.pem 下载到我的机器上。当我尝试连接到服务器时，`SSL Error: ssl not available` 我可以使用我的服务器密钥通过终端登录到 aws。

```
02[10:48] * Connecting to ec2-xx-xx-xx-114.compute-1.amazonaws.com (+6697)
-
02[10:48] * SSL error: ssl not available
-
02[10:48] * Connect cancelled 
```

我还向我的安全组添加了正确的端口有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T21:10:43.220

您是否缺少 ec2 实例上的 openssl 共享库？这似乎不太可能，但没有更多信息似乎最有可能来自错误。

在基于 Redhat 的图像上尝试：

```
yum search ssl 
```

和 Debian 尝试

```
apt-cache search ssl 
```

这将告诉您安装了哪些 ssl 库。

# java - JAVA：有没有更短的打印斐波那契数字的方法？

> ID：14483761
> 
> 赞同：-6
> 
> 时间：2013-01-23T15:55:02.697
> 
> 标签：java, arrays, numbers, sequence, fibonacci

基本上，我想知道是否有更短的方法可以打印出 0 到 100 之间的斐波那契数。

我所做的可能是非常基本的，但这里是代码：

```
public static void main(String[] args) {

    int number[] = new int[100];

    number[0] = 0;
    number[1] = 1;

    int sum1 = number[0] + number[0];
    int sum2 = sum1 + number[1];
    int sum3 = sum1 + sum2;
    int sum4 = sum2 + sum3;
    int sum5 = sum3 + sum4;
    int sum6 = sum4 + sum5;

    System.out.println(sum1);
    System.out.println(sum2);
    System.out.println(sum3);
    System.out.println(sum4);
    System.out.println(sum5);
    System.out.println(sum6);

} 
```

我会一直这样做到 100 岁。但我确信有一种更快的方法可以做到这一点。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:05:46.670

您可以使用循环。此示例使用 BigInteger，因为该数字很快变得对于`long`.

```
BigInteger a = BigInteger.ZERO, b = BigInteger.ONE;
System.out.println(1);
for (int i = 0; i < 100000; i++) {
    BigInteger c = a.add(b);
    System.out.println(c);
    a = b;
    b = c;
} 
```

几秒钟后终于打印

420269270299515438 ...删除了很多很多数字... 9669707537501

注意：您不需要记住所有以前的值，只需记住最后两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:21:18.417

以防万一您不想使用递归方式..
这是迭代...

```
public class Fib2 {

public static int fib(int n, int a, int b)
{
if (n==0)
    {
System.out.print("1x +");
    return a;
    }
else
    {
System.out.print("2x +");
    return fib(n-1,b,a+b);
    }
}
public static void main(String arg[])
{
System.out.println(fib(0,1,1));
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T03:28:55.630

好吧，100 不是斐波那契数之一，但是如果我们包括 144，那么这是一个很好的简洁示例：

```
class F
{
    public static void main( final String[] a )
    {
        int a = 1, b = 1;
        for ( ; b < 145; a = b + (b = a) )
            System.out.println( b );
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:00:39.957

谷歌搜索ftw！...甚至没有一分钟的搜索

```
int[] fibonacci = new int[25+1];
fibonacci[1] = 1;
fibonacci[2] = 1;
for ( int i = 3; i < fibonacci.length; i++ )
{
fibonacci[i] = fibonacci[i-2] + fibonacci[i-1];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T16:07:02.627

打印数字 < 100，n=11

```
public int getFib(int n){
  if(n==0) return 0;
  else if(n==1) return 1;
 else{
 int temp=getFib(n-1)+getFib(n-2);
 return temp;
 }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T15:59:40.823

执行此操作的标准方法是递归：

看看这个简单的代码片段，它返回位置 a 的斐波那契数：

```
public static long fib(int a){
      if (a==1||a==2) return 1;
      else return fib(a-1)+fib(a-2);
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-21T16:53:20.627

如果您必须在没有数组的情况下执行此操作，那么这里就是这样做的方法。只需将 20 更改为 100。这是我在作业中必须这样做的方式，对于仍在学习的人来说很容易理解。

```
public static void main(String[] args)
{
    int number1 = 1;
    int number2 = 1;
    int count;
    int fib;
    System.out.print(number1 + " " + number2 + " ");
    for(count = 3; count <= 20; count++)
    {
        fib = number1 + number2;
        number1 = number2;
        number2 = fib;
        System.out.print(fib + " ");
    }
} 
```

# jquery - 如何使用 jquery if else 语句切换类？

> ID：14483765
> 
> 赞同：3
> 
> 时间：2013-01-23T15:55:31.043
> 
> 标签：jquery, css, if-statement

我想在指定条件下使用 jquery If Else 语句切换类。

我的带有默认 css 的 Html`class="horizontal"`

```
<div id="foo-bar"  class="my-item horizontal"> 
</div> 
```

现在我如何在jquery where作为条件之间`horizontal`和使用 jquery 之间打乱我的 css 类。`vertical``var=mayvar`

```
myvar may be layout1 or layout2. 
```

为`myvar=layout1` `class="horizontal"` 和为`myvar="layout2 class="vertical"`

如果更多不同的css类有两个以上的条件，如何编写jquery？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T16:00:12.653

您可以使用[toggleClass()](http://api.jquery.com/toggleClass/)中的开关。

> 一个布尔值，用于确定是否应添加或删除该类。

```
$('#foo-bar').toggleClass('horizontal', myvar==layout1)
             .toggleClass('vertical', myvar==layout2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:58:03.163

您可以使用[切换类](http://api.jquery.com/toggleClass/)

**[现场演示](http://jsfiddle.net/rajaadil/XVRTY/1/)**

*html*

```
<div id="foo-bar"  class="horizontal"> </div> 
```

*Javascript*

```
$('#foo-bar').toggleClass('vertical'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T17:15:10.950

如果您不想使用工具类（），这里是另一种解决方案：

[http://jsfiddle.net/YFBWQ/](http://jsfiddle.net/YFBWQ/)

```
$('#foo-bar')
.removeClass('horizontal vertical')
.addClass( myvar=='layout2' ? 'vertical' : 'horizontal') 
```

或者

```
$('#foo-bar')
.removeClass(myvar=='layout2' ? 'horizontal' : 'vertical')
.addClass(myvar=='layout2' ? 'vertical' : 'horizontal') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T15:57:39.793

有一种[`toggleClass`](http://api.jquery.com/toggleClass/)方法可以做到这一点；它甚至可以与多个由空格分隔的类名一起使用。因此，无论元素的当前类是什么，都切换它们：

```
$("#foo-bar").toggleClass("horizontal vertical"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T16:40:58.930

简单案例：

```
var vh = "layout1";
$('#foo-bar').addClass(function () {
    $(this).prop('class', '');
    return vh == 'layout1' ? 'horizontal' : 'vertical';
}); 
```

编辑添加：确定的简单案例将其设置为无类，如果没有匹配

```
var vh = "layout9";
$('#foo-bar').prop('class',function () {
    return vh == 'layout1' ? 'horizontal' : (vh == "layout2" ? 'vertical' : (vh=="layout3" ? "reddy" : ""));
}); 
```

更复杂的情况：

```
var vh1 = "layout2";
var classList = $('#foo-bar').prop('class').split(/\s+/);
$('#foo-bar').addClass(function (vh1) {
    var self = this;
    $.each(classList, function (index, item) {
       //IF you want to keep one, check it here
       if (item != "keepme") {
          $(self).removeClass(item);
       }
    });
    switch (vh1) {
        case "layout1":
            return "horizontal";
        case "layout2":
            return "vertical";
        default:
            return "reddy";
    }
}); 
```

EDIT2：如果没有匹配，请不要理会这些课程！（注意，用新集合替换所有类）

```
<div id="foo-bar" class='reddy3 freddy' >hi</div> 
```

保持现有：

```
var vh = "nomatches";
$('#toggle').prop('class',function (i,v) {
    return vh == 'layoutA' ? 'horizontal' : (vh == "layout2" ? 'vertical' : (vh=="layout3"? "reddy":v));
});// keeps "reddy3 freddy" 
```

设置多个：

```
var vh = "greenhorizontal";
$('#toggle').prop('class',function (i,v) {
    return vh == 'layout2' ? 'horizontal' : (vh == "layout2" ? 'vertical' : (vh=="greenhorizontal"? "greeny horizontal":v));
});//sets both "greeny" and "horizontal", wipes out existing 
```

仅供参考，用你的“myvar”代替 vh 和 vh1 以获得完整的解决方案

# javascript - 如何在节点js中返回数组数组？

> ID：14483767
> 
> 赞同：1
> 
> 时间：2013-01-23T15:55:37.523
> 
> 标签：javascript, node.js, express

我在节点 js 中有这样的模块

```
var types =  function (){

  var typeList= new Array();
  typeList[0] = "varchar";

  var numericDTs= new Array();
  numericDTs[0] = "tinyint";

  var binaryDTs= new Array();
  binaryDTs[0] = "tinyblob";

  var data = array();
  data[0] = typeList;
  data[1] = numericDTs;
  data[2] = binaryDTs;

  return data;
}

module.exports = {
  types: types,
} 
```

我这样称呼这个模块

```
var types = require("./include/types");
console.log(types.types()); 
```

我得到了这样的错误 **500 ReferenceError: array is not defined** 如果我只返回类型或 typeList 或 binaryDTs，则没有错误。如何在节点js中返回数组数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:58:02.970

你的错误在这里：

```
var data = array(); 
```

请改写以下内容：

```
var date = []; 
```

实际上将每个替换`new Array()`为`[]`.

代替

```
var typeList= new Array();
typeList[0] = "varchar"; 
```

写`var typeList = [ "varchar" ];`等等。

**编辑：**

实际上，您的整个功能可以简化为：

```
var types = function() {
     return [ [ "varchar" ], [ "tinyint" ], [ "tinyblob" ] ];
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T16:04:23.563

扩展另一个答案，

假设您不在其他任何地方使用该功能，您可以编写

```
 module.exports = {
   types: function(){
     return [["varchar"], ["tinyint"], ["tinyblob"]];
   }
 } 
```

# python - Python - 从项目根目录加载相对文件

> ID：14483768
> 
> 赞同：7
> 
> 时间：2013-01-23T15:55:37.500
> 
> 标签：python, oop

我的项目布局如下：

```
├ ...
├── pve
│   ├── blahblah
│   │   ├── TestDefinition.py
│   │   ├── TestDefinition.pyc
│   │   ├── __init__.py
│   │   └── __init__.pyc
│   └── pve.py
├── src
│   └── definitions
│       └── THISFILE.yml
└── ... 
```

我需要能够通过 pve/blahblah/TestDefinition.py 类从 src/definitions 获取文件（例如 THISFILE.yml）。

如何正确访问项目根目录？一旦我有了它，我就可以访问相关的 .yml 文件。TIA。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T16:00:20.313

我喜欢在项目根目录中创建某种配置文件，该文件具有到根目录的绝对路径。我这样做只是因为我通常使用的框架（django，scrapy）有某种像这样的约定

```
├ ...
├── pve
│   ├── blahblah
│   │   ├── TestDefinition.py
│   │   ├── TestDefinition.pyc
│   │   ├── __init__.py
│   │   └── __init__.pyc
│   └── pve.py
├── src
│   └── definitions
│       └── THISFILE.yml
└── settings.py

# settings.py

import os
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
DEFINITIONS_ROOT = os.path.join(PROJECT_ROOT, 'src', 'definitions')

from myproject import settings 
settings.DEFINITIONS_ROOT 
```

# .net - 找不到命名空间 Microsoft.ReportingServices

> ID：14483769
> 
> 赞同：1
> 
> 时间：2013-01-23T15:55:40.193
> 
> 标签：.net, reporting-services

我将目标框架从 .NET 2.0 更改为 .NET 4.0 Client Profile。

现在找不到命名空间 Microsoft.ReportingServices 和 Microsoft.Reporting。

> 命名空间“Microsoft”中不存在类型或命名空间名称“Reporting”（您是否缺少程序集引用？）

当我尝试“添加参考”时，我在列表中找不到它们。

我对常规的 .NET 4.0 框架没有任何问题。

无论如何我可以将这些命名空间与 .NET 4.0 客户端配置文件一起使用，还是应该只使用常规的 .NET 4.0 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:11:01.713

不，Reporting Services 程序集使用客户端配置文件之外的类型，因此它本身不能支持客户端配置文件。如果您需要访问 Reporting Services 程序集，则应使用完整的 .NET Framework。

# linux - csv文件用三个字符替换两个字符串

> ID：14483771
> 
> 赞同：0
> 
> 时间：2013-01-23T15:55:44.473
> 
> 标签：linux, shell, sed, awk, find

我想在大 csv 文件的第一列中使用外壳命令。

我知道我需要类似的东西

big.csv shell_commands big.csv

但我不知道 awk 或 sed

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:37:19.930

```
awk 'BEGIN{ r["GG"] = "GGX"; r["FG"] = "FGX" } 
    { for( k in r ) if( gsub( k, r[k], $1 ) break } 1' input-file 
```

休息是为了防止多次替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:26:30.127

试试这个（假设你有一次出现的字符串）

`awk '{sub("GG","GGX",$0); sub("FG","FGX",$0); print}' temp.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:25:50.777

这个怎么样？

```
sed -i "s/^\(..\),/\1X,/" big.csv 
```

或者如果你有一些空间：

```
sed -i "s/^\([^ ][^ ][ ]*\),/\1X,/" big.csv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T15:58:36.757

使用 sed，用“GGX”替换所有“GG”实例`big.csv`如下所示：

```
sed 's/^GG/GGX/g' big.csv >big_translated.csv 
```

如果需要替换多个模式，可以在 sed 中使用多个替换命令，用分号隔开。

```
sed 's/^GG/GGX/g; s/^FG/FGX/g' big.csv >big_translated.csv 
```

该`^`字符表示行首，并确保我们只编辑 csv 的第一个字段。

# javascript - Knockout.js：使用带有映射插件的嵌套 observables

> ID：14483780
> 
> 赞同：1
> 
> 时间：2013-01-23T15:56:13.457
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我正在构建一个侧边栏来过滤主视图，例如[John Lewis](http://www.johnlewis.com/Men/Men%27s+Jackets+and+Coats/Men%27s+Jackets+and+Coats/Men%27s+Jackets+and+Coats/1216/ProductCategory.aspx)的侧边栏。我有代码工作，但它并不漂亮。

我知道在类似的行上有几个 SO 问题，但我无法完全理解我自己的用例。

我需要从服务器（例如通过 JSON）获取复选框的名称，以便在我的 ShopView 上动态创建 observableArrays。

它是这样的：

```
var data = {
    'gender' : [ ],
    'color' : [ ]
};

var filterMapping = {
    create: function( obj ) {
        return ko.observableArray( obj.data );
    }
}

var ShopView = new function() {

    var self = this;

    ko.mapping.fromJS( { filters: data }, filterMapping, self );

    // this is the bit I don't like
    this.filterChange = ko.computed(function () {
        for( var key in self.filters )  {
            var obj = self.filters[key]; 
             if( ko.isObservable(obj)){
                obj();                 
             }             
        }
    });

    this.filterChange.subscribe( function( ) {
        //make AJAX request for products using filter state
    });

} 
```

我的 HTML 看起来和你期望的一样：

### 性别

```
 <ul>
        <li><input type="checkbox" value="male" data-bind="checked: filters.gender" />Male</li>
        <li><input type="checkbox" value="female" data-bind="checked: filters.gender" />Female</li>
    </ul> 
```

正如我所说，它有效，但它并不好。在理想的世界中，我可以订阅 this.filters，例如

```
this.filters.subscribe( function() { 
    //make AJAX request for products using filter state
}); 
```

**注意**我不是想在客户端进行过滤——只是在动态绑定的复选框发生变化时更新我的​​视图模型。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:19:46.180

首先，映射插件应该被视为代码重复的辅助工具。我认为将映射插件本身视为*解决方案*并不是一个好主意。至少不是直接的。它还掩盖了您在 SO 上发布代码时发生的情况，因为我们看不到您正在使用的模型。只是一个想法。

现在，如果您想从服务器获取动态过滤器，并使用它们来过滤项目列表（就像您在商店中一样），我会这样做（这里是[小提琴](http://jsfiddle.net/tyrsius/seVRa/)）：

```
var FilterOption = function(name) {
    this.name = name;
    this.value = ko.observable(false);
};

var Filter = function(data) {
    var self = this;
    self.name = data.name;
    options = ko.utils.arrayMap(data.options, function(o) {
        return new FilterOption(o);
    });
    self.options = ko.observableArray(options);
    self.filteredOptions = ko.computed(function() {
        var options = []
        ko.utils.arrayForEach(self.options(), function(o) {
            if (o.value()) options.push(o.name);
        });
        //If no options, false represents no filtering for this type
        return options.length ? options : false;
    });
};

var ViewModel = function(data) {
    var self = this;
    self.items = ko.observableArray(data.items);
    filters = ko.utils.arrayMap(data.filters, function(i) {
        return new Filter(i);
    });
    self.filters = ko.observableArray(filters);
    self.filteredItems = ko.computed(function() {
        //Get the filters that are actually active
        var filters = ko.utils.arrayFilter(self.filters(), function(o) {
            return o.filteredOptions();
        });
        //Remove items that don't pass all active filter
        return ko.utils.arrayFilter(self.items(), function(item) {
            var result = true;
            ko.utils.arrayForEach(filters, function(filter) {
                var val = item[filter.name.toLowerCase()];
                result = filter.filteredOptions().indexOf(val) > -1;
            });
            return result;
        });
    });
}; 
```

下一个明显的步骤是添加对具有多个属性或选项属性的项目的支持，但这应该为您提供基本概念。您有一个过滤器列表，每个过滤器都有任意数量的选项（可叠加），并且您使用计算项目数组来存储过滤项目的结果。

* * *

**编辑**：要使用 ajax 订阅获取项目，您可以将`FilteredItems`prop 替换为获取所选过滤器的计算值，然后订阅它，如下所示：

```
var ViewModel = function(data) {
    var self = this;
    self.items = ko.observableArray(data.items);
    filters = ko.utils.arrayMap(data.filters, function(i) {
        return new Filter(i);
    });
    self.filters = ko.observableArray(filters);
    self.selectedFilters = ko.computed(function() {
        ko.utils.arrayFilter(self.filters(), function(o) {
            return o.filteredOptions();
        });
    });
    self.selectedFilters.subscribe(function() {
        //Ajax request that updates self.items()
    });
}; 
```

# java - 如何使这种组合/排列方法递归？

> ID：14483781
> 
> 赞同：0
> 
> 时间：2013-01-23T15:56:13.317
> 
> 标签：java, recursion, permutation, combinations

我有一个字符串数组列表，希望将所有可能的组合存储到另一个集合中。

例如：

```
[air,bus,car]
->
[air]
[bus]
[car]
[air,bus]
[air,car]
[bus,air]
[bus,car]
[car,air]
[car,bus]
[air,bus,car]
[air,car,bus]
...
[car,bus,air] 
```

重复并不重要。我现在拥有的代码是：

```
public ArrayList<String> comb(ArrayList<String> wrds, ArrayList<String> str, int size)
{
    ArrayList<String> s = new ArrayList<String>();
    s.addAll(str);
    if(size != a1.size())
    {
        Iterator e = a1.iterator();
        while(e.hasNext())
        {
            s.add((String)e.next());
        }
        size++;
    }
} 
```

我试图让它递归调用自己，以便它可以存储组合。我可以就我的代码中缺少的位置或部分获得任何帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T18:40:08.370

鉴于这是作业，我将尝试为您提供答案的背景。

解决这个问题的关键是使用递归。

首先想象你的数组中有两个项目。你可以删除第一个项目给你你的第一个组合。将剩余的项目添加到第一个项目为您提供第二个组合。删除第二个项目会给你第三个组合。添加剩余项目为您提供第四种组合。如果你有`["air", "bus"]`它会是这样的：

```
["air"]
["air", "bus"]
["bus"]
["bus", "air"] 
```

返回的方法可能如下所示：

```
String[][] combinations(String[] strings) 
```

需要注意的重要事项是可以将包含单个字符串的数组传递给此方法，并且它可以返回包含包含单个字符串的数组的数组。

这个问题有点复杂，因为你必须记录字符串组合，所以在我们解决这个问题之前，了解递归很重要。

想象一下，您想编写一个乘法方法，它接受两个数字并将它们相乘，但您只能使用加法和减法。您可以编写一个递归函数，将其中一个数字添加到自身，直到另一个数字达到退出条件，例如：

```
public int multiply(int value1, int value2) 
{
  if (value1 > 1) 
  {
    int remaining = value1 - 1;
    return value2 + multiply(remaining, value2);
  }
  else 
  {
    return value2;
  }
} 
```

您可以对数组执行相同的操作，只是`1`在数组包含一个项目时退出当值命中时退出，例如：

```
public String[][] combinations(String[] strings) 
{
  if (strings.length > 1) 
  {
    ...
  }
  else 
  {
    return new String[][]{strings};
  }
} 
```

`java.util.List`由于 Java API 的原因，它比数组更容易使用，所以你想要这样的东西：

```
public List<List<String>> combinations(List<String> strings) 
{
  if (strings.size()> 1) 
  {
    ...
  }
  else 
  {
    List<List<String>> result = new ArrayList<List<String>>();
    result.add(strings);
    return result;
  }
} 
```

现在这是`...`最重要的一点。您需要保留一个列表列表，该列表将成为结果并遍历`strings`. 对于每个字符串，您可以将该字符串添加到结果中，然后您需要创建一个减去当前字符串的子列表，您可以使用该子列表`combinations`再次迭代结果，添加当前字符串包含的每个列表。在代码中，它看起来像：

```
public List<List<String>> combinations(List<String> strings) 
{
  if (strings.size() > 1) 
  {
    List<List<String>> result = new ArrayList<List<String>>();

    for (String str : strings) 
    {
      List<String> subStrings = new ArrayList<String>(strings);
      subStrings.remove(str);

      result.add(new ArrayList<String>(Arrays.asList(str)));

      for (List<String> combinations : combinations(subStrings)) 
      {
        combinations.add(str);
        result.add(combinations);
      }
    }

    return result;
  }
  else 
  {
    List<List<String>> result = new ArrayList<List<String>>();
    result.add(new ArrayList<String>(strings));
    return result;
  }
} 
```

总之，您所做的是将字符串列表减少为单个项目，然后将其与前面的项目组合以在线程返回调用堆栈时产生所有可能的组合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-15T23:32:04.687

```
public static void combination(Object[] array){
         for(int x = 0; x < (1 << array.length); x++){
             System.out.print("[");
             for(int y = 0; y < array.length; y++){
                 if(checkIsOn(x, y){
                    System.out.print(array[y]);
                 }
             }
             System.out.println("]");
         }
    }

    public static boolean checkIsOn(int mast, int position){
         return (mast & (1 << position) > 0);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:43:20.710

使用列表作为递归函数的参数。您可以使用包含除第一项之外的所有内容的新列表从其内部调用该函数。

# c# - ErrorProvider - 输入字符串不是可识别的格式 C#

> ID：14483786
> 
> 赞同：0
> 
> 时间：2013-01-23T15:56:32.743
> 
> 标签：c#, winforms, entity-framework, data-binding, entity-framework-5

我目前正在使用 Entity Framework 5.0 和 WinForms。我想做的是在我的 POCO 类上设置验证，这样当我将它们数据绑定到表单字段时，我想通过 ErrorProvider 显示 UI 验证错误。我已经建立了一个基本的“ValidationEntity”类，它实现了 IDataErrorInfo 接口，并带有一些简单的验证方法供我的子类调用。在大多数情况下，验证字段长度、范围等似乎工作正常，通过 ErrorProvider 向用户显示错误。

但是，我似乎遇到了“ValidateRequiredField”方法的问题。如果我有一个具有不可为空的整数字段的类，并且用户碰巧在表单上删除了此值，则 ErrorProvider 会向最终用户显示一条消息，但消息是“输入字符串不是可识别的格式” . 现在我假设这是因为绑定到整数字段的表单正在尝试将空文本转换为整数，并且在将值发送到 POCO 类属性之前发生转换错误。我的问题是，解决这个问题的最佳方法是什么？

我猜我可能必须在表单内实现 TextBox 控件的验证方法，捕获空/空条目，并在错误提供程序上设置适当的错误消息。但是，我希望有一种方法可以让类处理空/空值并在 POCO 类中设置错误，以便它传播到 UI。最初我曾想过创建一个自定义 TypeConverter（例如 RequiredIntTypeConverter），但由于我从 ValidationEntity 类继承而遇到了问题，并且想不出添加错误的好方法。

下面是来自 ValidationEntity 类的示例以及来自 Company 类的片段。

**验证实体.cs**

```
public class ValidationEntity : IDataErrorInfo
{
    private readonly Dictionary<string, List<string>> errors = new Dictionary<string, List<string>>();

    string IDataErrorInfo.Error
    {
        get { return string.Empty; }
    }

    string IDataErrorInfo.this[string propertyName]
    {
        get
        {
            return (!errors.ContainsKey(propertyName) ? null : String.Join(Environment.NewLine, errors[propertyName]));
        }
    }

    public void AddError(string propertyName, string error, bool isWarning)
    {
        if (!errors.ContainsKey(propertyName))
        {
            errors[propertyName] = new List<string>();
        }

        if (!errors[propertyName].Contains(error))
        {
            if (isWarning)
            {
                errors[propertyName].Add(error);
            }
            else
            {
                errors[propertyName].Insert(0, error);
            }
        }
    }

    public void RemoveError(string propertyName, string error)
    {
        if (errors.ContainsKey(propertyName) &&
            errors[propertyName].Contains(error))
        {
            errors[propertyName].Remove(error);
            if (errors[propertyName].Count == 0)
            {
                errors.Remove(propertyName);
            }
        }
    }

    public void ValidateFieldLength(string propertyName, string value, int maxLength)
    {
        string errorMessage = string.Format("Text entered exceeds max length of {0} characters", maxLength);

        if (value != null)
        {
            if (value.Length > maxLength)
            {
                if (!errors.ContainsKey(propertyName))
                {
                    AddError(propertyName, errorMessage, false);
                }
            }
            else
            {
                RemoveError(propertyName, errorMessage);
            }
        }
        else
        {
            RemoveError(propertyName, errorMessage);
        }
    }

    public void ValidateRequiredField(string propertyName, string value)
    {
        string errorMessage = string.Format("{0} is required.", propertyName);

        if (string.IsNullOrWhiteSpace(value))
        {
            AddError(propertyName, errorMessage, false);
        }
        else
        {
            RemoveError(propertyName, errorMessage);
        }
    }        
} 
```

**公司.cs**

```
public class Company : ValidationEntity
{
   private int companyID;
   private string companyName;

   public int CompanyID 
   {
     get { return this.companyID; }
     set 
     {
       OnCompanyIdChanging(value.ToString());
       this.companyID = value;
     } 
   }
   public string CompanyName
   {
     get { return this.companyName; }
     set 
     {
       OnCompanyNameChanging(value);
       this.companyName = value; 
     }
   }

   private void OnCompanyIdChanging(string value)
   {
     ValidateRequiredField("CompanyID", value);
   }

   private void OnCompanyNameChanging(string value)
   {
     ValidateRequiredField("CompanyName", value);
     ValidateFieldLength("CompanyName", value, 30);
   }
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:07:04.210

在对此进行了更多研究并测试了代码示例之后，我能够找到解决此特定项目的方法。不可为空的整数转换需要自定义 TypeConverter。我能够在[此处](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/ec5e6a17-a0c5-43a8-bdc0-212b35ea5408/)找到信息 并最终使用以下 TypeConverter 来测试“必需的整数”：

```
public class RequiredIntConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
        {
            return true;
        }
        return base.CanConvertFrom(context, sourceType);
    }

    [System.Diagnostics.DebuggerNonUserCode]
    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        if (value == null || string.IsNullOrWhiteSpace(value.ToString()))
        {
            throw new ApplicationException("This field requires an integer value and cannot be blank.");
        }
        int result = 0;
        if (!int.TryParse(value.ToString(), out result))
        {
            throw new ApplicationException("The value could not be parsed as a valid integer data type.");
        }
        else
        {
            return result;
        }
    }
} 
```

当我最初从上面的链接测试代码时，当我尝试抛出 ApplicationException 时，我的调试器不断中断。认为这是我的代码中的一个错误，我对如何使用 TypeConverter 感到困惑。但是，我发现以下[帖子](https://stackoverflow.com/questions/2513577/c-sharp-pragma-to-suppress-break-on-thrown-error)描述了如何禁止调试器中断方法。

我仍然有点不确定为什么它会在这个 ApplicationException 上中断，以及 ErrorProvider 如何知道显示底层异常。如果有人能指出我在这方面的一些额外资源，将不胜感激。

祝你有美好的一天。

# php - 递归站点地图数组函数php

> ID：14483791
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:56:40.637
> 
> 标签：php, mysql, database, arrays, html-lists

我在生成我的数据库（站点地图）的完整树时遇到了一些问题。
我达到了我想编写更好的代码的水平。这就是为什么我为这个谜题选择递归函数。

我想生成一个无穷无尽的无序列表。像这样：

```
<ul>
 <li><a></a>
  <ul>
    <li><a></a>(subs)
    etc etc etc.....
  </ul>
 </li>
</ul> 
```

就像我已经说过的那样，我尝试了以下方法：

```
<?php
    function traverseArray($array, $sub=false)
    { 
        foreach($array as $cat)
        {
            if(isset($cat['childeren']) && is_array($cat['childeren']))
            {
                //a category with subs
                echo('<ul id="'.$cat['parent_cat_id'].'" class="lv0">');
                    echo('<li id="'.$cat['parent_cat_id'].'"><a href=#>'.$cat['name'].'</a>'."\n");
                traverseArray($cat['childeren'], true);
            }else{
                if($sub){
                    //a sub category of category
                    echo('</ul></li>');
                    echo('<li id="'.$cat['parent_cat_id'].'"><a href=#>'.$cat['name'].'</a></li>'."\n");                
                }else{
                    //category with no subs
                    echo('<ul id="'.$cat['parent_cat_id'].'" class="lv0">');            
                        echo('<li id="'.$cat['parent_cat_id'].'"><a href=#>'.$cat['name'].'</a></li>'."\n");
                    echo('</ul>');
                }
            }
        }
    }
    traverseArray($sitemap);
?> 
```

但这是一个我无法正确解决的难题，这是迄今为止的结果（混乱）：

```
<ul id="0" class="lv0">
   <li id="0"><a href=#>Headsets</a>
</ul></li>

<li id="1"><a href=#>(USB) headsets ....</a></li>
</ul></li>
<li id="1"><a href=#>... headsets</a></li>
</ul></li>
<li id="1"><a href=#>.. USB headsets</a></li>
</ul></li>
<li id="1"><a href=#>Bluetooth headsets</a></li>
<ul id="0" class="lv0">
   <li id="0"><a href=#>Unified Communications</a></li> 
```

大混乱！$sitemap 数组如下所示：

```
Array
(
    [0] => Array
        (
            [category_id] => 1
            [parent_cat_id] => 0
            ..........etc
            ........etc
            [type] => cat
            [childeren] => Array
                (
                    [0] => Array
                        (
                            [category_id] => 2
                            [parent_cat_id] => 1
                            .......etc
                            [type] => cat
                            [childeren] => Array
                                (
                                    [0] => Array
                                        (
                                            [category_id] => 32
                                            [parent_cat_id] => 16
                                            .......etc
                                            [type] => series
                                        )                            
                        ) 
```

所以孩子们在孩子们的孩子们，这是在正确的轨道上做这件事的最好方法吗？

还是有更好的方法？像sql树什么的？或者只是 foreach 中的旧 foreach ..（这次我试图避免）。

任何帮助将非常感激！！！

提前致谢，

雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:35:20.427

“我的代码有什么问题？” 不是stackoverflow的问题。

想想'traverseArray' 函数应该做什么。你的代码是一团糟。这是一个数组遍历的干净示例。请根据您的需求进行调整：

```
function traverseArray($array)
{
    echo '<ul>';
    foreach($array as $cat)
    {
        echo '<li>';
        if(isset($cat['childeren']) && is_array($cat['childeren']))
        {
            echo '<a href="#">' . $cat['name'] . '</a>';
            traverseArray($cat['childeren']);
        }
        else
        {
            echo '<a href="' . $cat['url'] . '">' . $cat['name'] . '</a>';
        }
        echo '</li>';
    }
    echo '</ul>';
}

traverseArray($sitemap); 
```

# objective-c - 从 plist 读取多数组

> ID：14483795
> 
> 赞同：0
> 
> 时间：2013-01-23T15:56:59.090
> 
> 标签：objective-c, cocoa-touch, plist

我无法从下面的 plist 中获得 8 个项目。我有一个 plist “settings.plist”。现在我不想从 vragen -> category `(self.catagorie - 1)`-> question。8 项。但是数组保持为空。

我究竟做错了什么？

代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"instellingen.plist"];
NSMutableDictionary *instellingen = [NSMutableDictionary dictionaryWithContentsOfFile:path];

NSArray *vragen = [instellingen objectForKey:@"vragen"];

NSArray *cata = [vragen objectAtIndex: (self.catagorie-1)];
NSArray *question = [cata objectAtIndex: 0];
NSLog(@"count: %i", [question count]); 
```

列表文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>vragen</key>
    <array>
        <array> <--catagorydata
            <array> <-- questiondata
                <string>vraag</string>
                <string>A</string>
                <string>B</string>
                <string>C</string>
                <string>D</string>
                <string>1</string>
                <string>standaard</string>
                <string></string>
            </array>
            <array>
                <string>vraag2</string>
                <string>A</string>
                <string>B</string>
                <string>C</string>
                <string>D</string>
                <string>1</string>
                <string>afbeelding</string>
                <string>afbeelding.jpg</string>
            </array>
        </array>
    </array>
    <key>firstBoot</key>
    <true/>
    <key>regelAtRuntime</key>
    <true/>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:36:22.080

首先这条线

```
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"instellingen.plist"]; ? 
```

应该

```
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"settings.plist"]; 
```

我还不得不从字典中删除这些：

```
<--catagorydata
<-- questiondata 
```

除了上述两件事之外，您的代码或字典没有任何问题。
进行这些更改后，我测试了您的代码，得到的输出是：

```
tester[69637:c07] size of dict 3  
tester[69637:c07] count: 8 
```

根据 .plist 文件，这是正确的

所以你的问题出在前 4 行。确保您的文件位于 Documents 目录中（使用类似以下代码的内容查看问题所在）

```
 NSLog(@"Path : %@",path); 
```

我复制了项目文件夹中的文件（因为我使用了模拟器）并使用了以下代码，一切正常

```
NSBundle* b=[NSBundle mainBundle];
NSURL* path1=[b URLForResource:@"settings" withExtension:@"plist"];
NSMutableDictionary *instellingen = [NSMutableDictionary dictionaryWithContentsOfURL:path1];

NSLog(@"size of dict %d",[instellingen count]);

NSArray *vragen = [instellingen objectForKey:@"vragen"];

NSArray *cata = [vragen objectAtIndex: 0];
NSArray *question = [cata objectAtIndex: 0];
NSLog(@"count: %i", [question count]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:14:36.200

只是快速阅读，但看起来你有一个“categoryData”项目数组，其中包含一个 questionData 项目数组；questionData 项是字符串。

```
NSArray *vragen = [instellingen objectForKey:@"vragen"]; // count = 1
NSArray *cata = [vragen objectAtIndex: (self.catagorie-1)]; // count = 2
NSString *question = [cata objectAtIndex: 0]; 
```

建议您添加一些断点并查看您的数据。或者，NSLog(@"data = %@", cata); 等等

# scheme - 将列表分解为参数的方法？

> ID：14483797
> 
> 赞同：2
> 
> 时间：2013-01-23T15:57:02.497
> 
> 标签：scheme

假设我有一个过程`upto`，当调用 like 时`(upto 1 10)`会生成 list `'(1 2 3 4 5 6 7 8 9 10)`。

如果我想将此列表用作像`lcm` 这样的函数的参数，该函数需要多个参数而不是单个列表，那么`(lcm 1 2 3 4 5 6 7 8 9 10)`有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:59:43.583

使用应用：例如

```
(apply lcm (upto 1 10)) 
```

“应用”将函数应用于参数列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:02:08.283

我发现使用 eval 的一种方法如下：

(eval (cons 'lcm (upto 1 10)))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T20:23:41.580

在 MIT-Scheme（不确定其他人）中，您可以在函数定义中使用点。

```
(define (func-with-multiple-args . args)
  (let loop ((args args))
    (if (null? args)
      'done
      (begin (display (car args)) (loop (cdr args)))))) 
```

打电话给

```
(func-with-multiple-args 1 2 3 4) 
```

将完成这项工作。请注意，参数被放入列表中。

有趣的事实：“list”过程实际上在 MIT-Scheme“运行时”源的 list.scm 中定义为：

```
(define (list . args)
 args) 
```

# java - 为什么在 txt 中使用 \n 时我的输入流字符串不换行？

> ID：14483799
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:57:11.170
> 
> 标签：java, android, textview, newline

为什么在 .txt 中使用 \n 时我的输入流字符串不换行？？？

我正在尝试阅读，然后将其发布到 TextView 中，但它显示 \n insted to go to new line -.- 足够接近

```
try {
            reader = new InputStreamReader(getAssets().open("koce_podatki.txt"),"UTF-8");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        BufferedReader br = new BufferedReader(reader);
        for(int i=-1;i<position;i++){
        try {
            temp = "" + br.readLine();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }}

        try {
            reader.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        temp=temp.replaceAll("\n", "\n");
        nov = temp.split("\\|");

        for(int i=0;i<23;i++){
            podatek.add(""+nov[i]);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:25:26.243

```
 temp=temp.replaceAll("\n", "\n"); 
```

这无济于事。如果您期望文本文件中有真正的新行，那么将它们替换为其他新行是没有意义的。如果您希望文件中包含字符串“\n”（为什么？），则第一个参数中需要*四个*反斜杠：两个用于编译器，另外两个用于正则表达式解析器。

# java - 在java中传递参数变得容易

> ID：14483800
> 
> 赞同：0
> 
> 时间：2013-01-23T15:57:12.907
> 
> 标签：java, methods, parameters, jtextfield, jcomponent

```
public class Model {

public void updateEvent(String name, Date date,String start, String venue, String details,
String opportunity, String more, String end, String row) {
//do stuff here

}

public class Controller {

 public void someMethod() {

 if(button==view.saveButton) {

 model.updateEvent(view.txtEventName.......);

 } }

}

public class View {
public JTextField txtEventName;
//10 more consisting of textarea, datechooser, etc

} 
```

如何将一堆参数`Controller`传递给 for`Model`以更新其状态。好吧，如果`View`它作为表单，它将有很多文本字段、文本区域等用于数据输入。而不是单独处理它们，控制器如何轻松访问所有这些以传递给`model`. 我不想简单地继续添加`view.txtWhere.getText()`很长的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:02:22.230

创建一个具有字符串名称、日期日期、字符串开始、字符串地点、字符串详细信息、字符串机会、字符串更多、字符串结束、字符串行的“事件”类并使用它来代替？

# asp.net-mvc - IIS 将额外的文件夹添加到 ASP MVC 站点中图片的 URL

> ID：14483803
> 
> 赞同：0
> 
> 时间：2013-01-23T15:57:17.560
> 
> 标签：asp.net-mvc, html, iis

我们刚刚将一个 ASP MVC *Intranet*网站移动到本地服务器上，并且在一个页面上使用的图片遇到了一些奇怪的问题。由于某种原因，该 URL 包含一个额外的子文件夹。奇怪的是，这是“主模板”页面中使用的 URL，但没有其他页面显示这种奇怪。这是

这些是有问题的两张照片：

```
<img src="../../Content/images/Monet3.png" id="MonetSig" />
<img src="../../Content/images/TEST2body_top.png"  id="topPic" alt="tag"/> 
```

当我在 Chrome 中打开开发人员工具时，我收到两张图片的以下错误消息：

```
GET http://insideapps.dev.company.com/Monet/Monet/Content/images/Monet3.png 404 (Not Found)
GET http://insideapps.dev.company.com/Monet/Monet/Content/images/TEST2body_top.png 404 (Not Found) 
```

同样，没有其他页面显示此错误。

以下是网站主布局的副本：

```
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    <script language="javascript">

        function DoFun() {

        }    

    </script>
</head>
<body>
@using Monet.Common        
        <div class="page">
            <header>            
            <div style="margin: 10px;" id="Logo">
                    <img src="../../Content/images/Monet3.png" id="MonetSig" />
            </div>
@*            </a>*@
@*            <div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>*@
                <nav>  

                    <ul id="menu">
                        <li>@Html.MenuLink("Agents", "Index", "Agent")</li>
                        <li>@Html.MenuLink("Products", "Index", "Product")</li>
                        <li>@Html.MenuLink("Product Training", "Index", "Course")</li>
                        <li>@Html.MenuLink("Continuing Ed", "Index", "ContEdCourse")</li>
                        <li>@Html.MenuLink("Help", "About", "Home")</li>
                     </ul>                    
                </nav>
        </header> 
        <img src="../../Content/images/TEST2body_top.png"  id="topPic" alt="tag"/>       
            <section id="main">            
            @RenderBody()
        </section>
        <footer>
        </footer>
        </div>
</body>
</html> 
```

以防万一，这里是相关页面的 Index.cshtml

```
 @model IEnumerable<Monet.Models.FollowUpItems>

    @{
        ViewBag.Title = "Index";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
        <script src="@Url.Content("~/Scripts/jquery.tablesorter.min.js")" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#thetable").tablesorter();
            }
            );

            function GetNotes(id) {
                $('#' + id).dialog();
            }
            function GetMisc(id) {
                var target = id + "Misc";
                $('#' + target).dialog();
            }

        </script>

    <h2>Follow Up Items</h2>

    @using (Html.BeginForm())
    {
        <span id="searchBox" class="boxMe" >
                <form method="post">
                  <select name="Table" title="Table" style="font-size:8pt;">
                    <option value="%">--Table Name--</option>
                    <option value="AgentContEd">CE</option>
                    <option value="AgentProductTraining">PT</option>
                  </select>
                  <select name="IssueType" style="font-size:8pt;">
                    <option value="%">--Issue Type--</option>
                    <option value="W">Warning</option>
                    <option value="E">Error</option>
                  </select>
                  <select name="Status" style="font-size:8pt;">
                    <option value="%">--Status Type--</option>
                    <option value="O">Open</option>
                    <option value="U">Under Review</option>
                  </select>

                <input type="image" src="@Url.Content("~/Content/Images/Filter.bmp")" alt="Filter" style="padding-top: 0px;" />
                <a href="#" style="padding-left: 30px;"></a>
                </form>
            </span>
            <br />
            <br />
            <span id="programExplanation" style="width: 500px; float:left; padding: 5px; margin-left: 25px;"></span>

        <span class="error" style="clear: both;">
            @ViewBag.ErrorMessage
        </span>
        <span class="msg">
            @ViewBag.Message
        </span>
        <br />
        <br />
        <br />
    }

    <table>
        <tr>
            <th>
                Table
            </th>
            <th>
                Issue
            </th>
            <th>
                Status
            </th>
            <th>
                Message
            </th>
            <th>
                CreatedBy
            </th>
            <th>
                CreatedOn
            </th>

            <th>
                Key1
            </th>
            <th>
                Key2
            </th>
            <th>
                Notes
            </th>
            <th>
                Misc.
            </th>
            <th></th>
        </tr>

    @foreach (var item in Model.Where(i => i.Status != "C" && i.IssueType != "S"))
    {
        var note = string.Empty;
        if (!String.IsNullOrWhiteSpace(item.Notes))
        {
            note = item.Notes.ToString();
        }

        var id = item.Id;
        var target = id + "Misc";
        <tr>
            <td>
            @if (!String.IsNullOrWhiteSpace(item.TableName))
            {
                if (item.TableName.Equals("AgentContEd"))
                {
                    @Html.Raw("CE");
                }
                else if (item.TableName.Equals("AgentProductTraining"))
                {
                    @Html.Raw("PT");
                }
                else
                {
                    @Html.DisplayFor(modelItem => item.TableName)
                }
            }           
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.IssueType)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Status)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Message)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreatedBy)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreatedOn)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Key1)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Key2)
            </td>
            <td>
            @if (!String.IsNullOrWhiteSpace(item.Notes))
            {
                <span id="notes" onclick='GetNotes(@id);'>
                    <img src="@Url.Content("~/Content/images/magnify.gif")" alt="Show Notes" />
                </span>           
            }

                <div id="@id" title="Notes" style="display:none;">
                    @Html.DisplayFor(modelItem => item.Notes)
                </div>       
            </td>
            <td>
            @if (!String.IsNullOrWhiteSpace(item.LastUpdateBy) || !String.IsNullOrWhiteSpace(item.LastUpdateOn.ToString()))
            {
                <span id="misc" onclick='GetMisc(@id);'>
                    <img src="@Url.Content("~/Content/images/magnify.gif")" alt="Show Notes" />
                </span>           
            }
                <div id="@target" title="Misc" style="display:none;">
                    @Html.DisplayFor(modelItem => item.LastUpdateBy)
                    @Html.DisplayFor(modelItem => item.LastUpdateOn) 
                </div>
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id })
            </td>
        </tr>
    }

    </table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:59:44.260

在 ASP.NET MVC 应用程序中处理 url 时始终使用帮助程序，并且永远不要像以前那样对它们进行硬编码。

所以：

```
<img src="@Url.Content("~/Content/images/Monet3.png")" id="MonetSig" />
<img src="@Url.Content("~/Content/images/TEST2body_top.png")" id="topPic" alt="tag" /> 
```

如果您使用的是 WebPages v2.0（这是 ASP.NET MVC 4 中的默认设置），您可以这样做：

```
<img src="~/Content/images/Monet3.png" id="MonetSig" />
<img src="~/Content/images/TEST2body_top.png" id="topPic" alt="tag" /> 
```

无论您的应用程序托管在何处以及如何托管，Url 助手都会负责为资源生成正确的 url。

# c++ - 从 C++ 调用 python eval

> ID：14483804
> 
> 赞同：3
> 
> 时间：2013-01-23T15:57:30.077
> 
> 标签：c++, python, embedding

我基本上试图做与以下问题相同的事情，但我在调用`PyObject_Print`“toupper() at 0x776e0226”时遇到运行时错误

[Python C API：使用 PyEval_EvalCode](https://stackoverflow.com/questions/9573422/python-c-api-using-pyeval-evalcode)

我的代码是：

```
int callExecFunction(const char* evalStr)
{
    PyCodeObject* code = (PyCodeObject*)Py_CompileString(evalStr, "pyscript", Py_eval_input);
    PyObject* global_dict = PyModule_GetDict(pModule);
    PyObject* local_dict = PyDict_New();
    PyObject* obj = PyEval_EvalCode(code, global_dict, local_dict);

    PyObject* result = PyObject_Str(obj);
    PyObject_Print(result, stdout, 0);
} 
```

evalStr 是`"setCurrentFileDir()"`并且 pModule 早先从脚本初始化而没有错误，并且按照以下代码工作：[http](http://docs.python.org/2/extending/embedding.html#pure-embedding) ://docs.python.org/2/extending/embedding.html#pure-embedding 。

在加载的模块内部有函数：

```
def setCurrentFileDir():
    print "setCurrentFileDir"
    return "5" 
```

我在 eval 函数调用中错过/做错了什么。请注意，我不能通过 python API“直接”调用函数 setCurrentFileDir，我必须使用 eval。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:07:52.937

实际上这很好用。但是，我在 python 必须构建的目录中有一个 .pyd 文件（并且 eclipse 对我隐藏）来自未定义函数的较旧运行的 python 脚本，导致问题。

这是我想到问题可能是 .pyd 文件的地方。

[python NameError: name '<anything>' 未定义（但它是！）](https://stackoverflow.com/questions/4686525/python-nameerror-name-anything-is-not-defined-but-it-is)

# r - r中的数据聚合

> ID：14483809
> 
> 赞同：1
> 
> 时间：2013-01-23T15:57:45.123
> 
> 标签：r

我有一个数据集（测试）

```
v1 v2  v3  v4  v5  v6
1   1   1   0   0   0 
2   2   1   1   0   0 
3   2   1   0   0   0 
4   3   1   0   0   0 
5   3   1   1   0   1 
6   3   1   0   1   1 

structure(list(V1 = 1:6, V2 = c(1L, 2L, 2L, 3L, 3L, 3L), V3 = c(1L, 
1L, 1L, 1L, 1L, 1L), V4 = c(0L, 1L, 0L, 0L, 1L, 0L), V5 = c(0L, 
0L, 0L, 0L, 0L, 1L), V6 = c(0L, 0L, 0L, 0L, 1L, 1L)), .Names = c("V1", 
"V2", "V3", "V4", "V5", "V6"), class = "data.frame", row.names = c(NA, 
-6L)) 
```

我想实现这个

```
v1  v2  v3  v4  v5  v6
 1   1   1   0   0   0  
 5   2   2   1   0   0  
15   3   3   1   1   2 
```

我试过这个：

```
aggregate(test[c('v3', 'v4', 'v5','v6')], list('v2'), FUN=sum, na.rm=TRUE) 
```

这是行不通的。我想基于 V2 聚合（测试）中的数据并对其他变量求和。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T16:12:55.187

`aggregate`将您的命令更改为：

```
aggregate(. ~ V2, test, sum)
#   V2 V1 V3 V4 V5 V6
# 1  1  1  1  0  0  0
# 2  2  5  2  1  0  0
# 3  3 15  3  1  1  2 
```

需要注意的一些事项：

1.  R 区分大小写。您提供的示例数据具有以大写“V”命名的变量，但您尝试的示例代码具有小写“v”。
2.  您正在尝试直接引用变量名称。为此，您要么需要使用公式表示法，`aggregate()`要么需要使用`with()`或（不推荐）`attach()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:17:49.270

您最初的尝试几乎是正确的。稍作修正，您就可以达到您想要的效果。这假设您要按 V2 汇总行

```
result <- aggregate(test[,c('V1', 'V3', 'V4', 'V5','V6')], list(test[,'V2']), FUN=sum, na.rm=TRUE)

> names(result) <- gsub("Group.1", "V2", names(result))
> result
  V2 V1 V3 V4 V5 V6
1  1  1  1  0  0  0
2  2  5  2  1  0  0
3  3 15  3  1  1  2 
```

# xml - XSLT 转换 - 多个输入 XML 文件

> ID：14483811
> 
> 赞同：1
> 
> 时间：2013-01-23T15:57:53.853
> 
> 标签：xml, xslt, foreach, merge, concat

我有以下问题：我有几个输入 XML 文件，其中一个包含指向其他文件的链接。那个看起来像这样：

```
<Envelope>
<Part File='file:SEQ014/DET3262874.9.0.xml' LinkType='REL' DocType='XCD' SubType='Call' Format='XML'/>
<Part File='file:SEQ014/DET3262874.9.1.xml' LinkType='REL' DocType='XCD' SubType='Call' Format='XML'/>
<Part File='file:SEQ014/DET3262874.9.2.xml' LinkType='REL' DocType='XCD' SubType='Call' Format='XML'/>
<Part File='file:SEQ014/DET3262874.9.3.xml' LinkType='REL' DocType='XCD' SubType='Call' Format='XML'/>
<Part File='file:SEQ014/DET3262874.9.4.xml' LinkType='REL' DocType='XCD' SubType='Call' Format='XML'/>
<Part File='file:SEQ014/DET3262874.9.5.xml' LinkType='REL' DocType='XCD' SubType='Charge' Format='XML'/>
<Part File='file:SEQ014/INV3262874.9.xml' LinkType='REL' DocType='INV' Format='XML'/>
<Part File='file:SEQ014/INVINFO3262874.9.xml' LinkType='REL' DocType='IIN' Format='XML'/>
<Part File='file:SEQ014/SUM3262874.9.xml' LinkType='REL' DocType='SUM' Format='XML'/>
<Part File='file:SEQ014/BAL3262874.9.xml' LinkType='REL' DocType='BAL' Format='XML'/>
<Part File='file:SEQ014/ADDR3262874.9.xml' LinkType='REL' DocType='ADD' Format='XML'/>
</Envelope> 
```

现在，我正在访问底部的文件，如下所示：

```
<xsl:param name="BillingDocument2" select="/Bill/Part[@DocType='ADD']/@File"/>
<xsl:param name="BillingDocument3" select="/Bill/Part[@DocType='INV']/@File"/>
etc... 
```

之后，我像这样引用它们：

```
<xsl:variable name="var13_Document" select="document($BillingDocument2)/Document"/>
etc... 
```

但是，我不知道**如何使用前 5 个 XML 文件中的数据**？所有这些文件都具有相同的结构，基本上，它是一个大文件，分成 5 个较小的文件......我需要将这 5 个文件中的所有数据（它们的数量因情况而异）放在一个地方，所以我可以用同样的方式处理它…… **哦，是的，我只能使用 XSLT1！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:14:29.320

答案基本上与您访问其他人的方式相同。如果你说

```
<xsl:param name="XCDDocs" select="/Bill/Part[@DocType='XCD']/@File"/> 
```

那么这将为您提供一个变量，其值为一组 5 个节点（`File`来自所讨论的五个`Part`元素中的每个元素的属性节点）。现在，当您将节点集传递给`document`函数时，您将返回另一个节点集，该节点集由文档中的根节点组成，其 URI 由原始集中每个节点的字符串值给出。因此

```
document($XCDDocs)/Document 
```

是一组五个节点，`Document`五个文件中的每一个的元素，以及

```
<xsl:apply-templates select="document($XCDDocs)/Document/*" /> 
```

将为所有五个文件中的文档元素的所有第一级子元素应用模板，等等。

# ruby-on-rails-3 - Rails 3 和 AWS::S3 Ruby Gem

> ID：14483813
> 
> 赞同：0
> 
> 时间：2013-01-23T15:57:59.103
> 
> 标签：ruby-on-rails-3, amazon-web-services, amazon-s3

我正在按照文档 (http://amazon.rubyforge.org/) 尝试开始在我的应用程序中使用 S3（用于向最终用户提供文件），但我一直遇到错误。

这是我的模型：

```
class File < AWS::S3::S3Object
  set_current_bucket_to 'test-bucket'
end 
```

这是我通过 Rails 控制台尝试的：

```
File.find 'test.pdf' 
```

但我不断收到此错误：

```
undefined method `find' for File:Class 
```

不知道我在这里做错了什么......还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:00:48.613

File 不是一个很好的模型名称，因为它被 Ruby 的标准类 File ( [docs](http://www.ruby-doc.org/core-1.9.3/File.html "文档") ) 覆盖。只需选择另一个名称，一切都会正常运行！

# php - php表单验证和标题位置

> ID：14483817
> 
> 赞同：0
> 
> 时间：2013-01-23T15:58:08.523
> 
> 标签：php, forms, validation, header

我有一个提交给自身的表格。如果设置了 post 变量，那么我希望它们被重定向到**employee_profile.php**。目前，即使设置了 post 变量，标题位置也不起作用。有任何想法吗？

```
<?php 
    $email_error = $password_error = "";
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        if (empty($_POST["email"])) {
            $email_error = "Missing Email";
        } else {
            $email = $_POST["email"];
        }

        if (empty($_POST["password"])) {
            $password_error = "Missing Password";
        } else {        
            $email = $_POST["email"];
            $password = $_POST["password"];
            header ('Location: employee_profile.php');
        }
    }  
?> 
```

表格：

```
<form action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" method="POST">
  Email: <input type="text" name="email" value="<?php echo htmlspecialchars($email);?>">
  <span class="error"><?php echo $email_error;?></span><br />
  Password: <input type="password" name="password">
  <span class="error"><?php echo $password_error;?></span><br />
  <input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:12:04.677

PHP 标头（使用 HTTP/1.1）重定向需要一个绝对 URL。

尝试以下操作：

```
<?php 

// from PHP documentation, see http://php.net/manual/de/function.header.php
$host = $_SERVER['HTTP_HOST'];
// or:
// $host = $_SERVER['SERVER_NAME'];

$email_error = $password_error = "";

if($_SERVER["REQUEST_METHOD"] == "POST") {
    if(empty($_POST["email"])) {
        $email_error = "Missing Email";
    } else {
        $email = $_POST["email"];
    }

    if(empty($_POST["password"])) {
        $password_error = "Missing Password";
    } else {        
        $password = $_POST["password"];
    }

    // some additional fixes: finally check if both is valid
    if($email_error == $password_error) {
        header("Location: http://$host/employee_profile.php");
    }
} 

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:37:13.370

你可以尝试这样的事情。当前在您的脚本中，即使未设置电子邮件但设置了密码，也会调用标头函数。

```
$email = (isset($_POST['email']) && !empty($_POST['email'])) ? $_POST['email'] : "Missing Email";
$password = (isset($_POST['password']) && !empty($_POST['password'])) ? $_POST['password']   : "Missing Password";

if($email != "Missing Email" && $password != "Missing Password"){
    header ('Location: employee_profile.php');
} 
```

（警告：这里作为电子邮件和密码传递的任何值都会让用户进入employee_profile）

还可以在调用 header 之前查看您是否正在打印一些东西或一些 html。

它是否会抛出任何错误，如果是这样，您还可以在这里打印错误吗？

# c++ - Microsoft C/C++ Optimizing Compiler 编译成什么

> ID：14483820
> 
> 赞同：1
> 
> 时间：2013-01-23T15:58:18.133
> 
> 标签：c++, c

我只是好奇微软的 C/C++ 优化编译器是否默认编译为机器语言或字节码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:00:26.443

默认情况下，它使用开关编译为机器语言（微处理器操作码）或[CIL 。](http://en.wikipedia.org/wiki/Common_Intermediate_Language)`/clr`

相比之下，C# 和 Visual Basic 编译为[CIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language)，而 Visual Basic 6 可以编译为 P 代码（一种字节代码形式）或本机代码（机器语言）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:12:06.157

它可以两者兼得。

默认情况下，它会生成本机机器代码。使用 /clr 命令行选项，它将生成 .NET IL 字节码。

# c++ - 刚体模拟摩擦

> ID：14483821
> 
> 赞同：7
> 
> 时间：2013-01-23T15:58:18.450
> 
> 标签：c++, 3d, physics, rigid-bodies

我目前正在开发一个 3D 刚体模拟程序。我目前已经设法让刚体与地板碰撞并使用脉冲正确弹跳。然而，我的问题是，一旦它们反弹，尽管使用摩擦矢量来尝试减慢它们，它们仍会不断加速。

这是你落地时的代码

```
Rvector fDirection(m_Bodies[i].Vel.x,0.0,m_Bodies[i].Vel.z);
Rvector relativeVelocities = m_Bodies[i].Vel - floorVelocity;
fDirection.normalize();

Real impulse = -(1+e) * (Rvector::dotProduct(relativeVelocities,floorNormal)) 
/ (1/m_Bodies[i].mass + floorMass);
Rvector friction = fDirection*mu*gravity.length()*m_Bodies[i].mass;

Rvector collision_forces = Rvector(0,1,0)*impulse;
collision_forces += friction ;

m_Bodies[i].Vel += (collision_forces/m_Bodies[i].mass); 
```

谢谢

编辑：这是集成代码。

```
void RigidBodySimulation::eulerIntegration(float dTime)
{
    Rvector newVel;
    Rvector newPos;
    Rvector zero(0.0, 0.0, 0.0);
    Real one_over_mass;
    Rvector accel;
    for( unsigned int i = 0 ; i < m_Bodies.size(); i++)
    {   
        one_over_mass = 1/m_Bodies[i].mass;
        newVel = m_Bodies[i].Vel + m_Bodies[i].force*one_over_mass*dTime;
        newPos = m_Bodies[i].Pos + m_Bodies[i].Vel*dTime;
        accel = m_Bodies[i].force / m_Bodies[i].mass;
        m_Bodies[i].acceleration = accel;
        m_Bodies[i].newPos = newPos;  
        m_Bodies[i].Vel = newVel;
        m_Bodies[i].Pos = newPos;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T17:46:40.770

我不得不说，这是一段非常糟糕的代码，而我已经这样做了 10 多年。你应该得到一本关于动力学的基本教科书（比如 Hibbeler）。

```
Real impulse = -(1+e) * (Rvector::dotProduct(relativeVelocities,floorNormal))
               / (1/m_Bodies[i].mass + floorMass); 
```

这个方程有点像你试图从冲击中计算恢复冲动（尽管计算是错误的）。首先，您必须了解冲动与力量不同。冲量是力在一定时间间隔内的积分。在撞击期间，您可以假设这段时间非常短，这就是您执行瞬时速度变化的原因。这就是为什么你应该指定积分代码与碰撞计算无关，因为它在那一刻被绕过，或者至少，如果你进行基于脉冲的计算，它应该是。实际计算应该是这样的：

```
Real momentum_before = Rvector::dotProduct(m_Bodies[i].Vel * m_Bodies[i].mass + floorVelocity * floorMass, floorNormal);
Real rel_vel_after = -e * Rvector::dotProduct(relativeVelocities,floorNormal);
// conservation of momentum in normal direction gives this:
Real body_vel_after = (momentum_before + floorMass * rel_vel_after) / (m_Bodies[i].mass + floorMass);
Real floor_vel_after = body_vel_after - rel_vel_after; 
```

这实际上简化为一行如下：

```
Real body_vel_after = ( (m_Bodies[i].mass - e * floorMass) * Rvector::dotProduct(m_Bodies[i].Vel, floorNormal)
                      + (1.0 + e) * floorMass * Rvector::dotProduct(floorVelocity, floorNormal) 
                      ) / (m_Bodies[i].mass + floorMass); 
```

但是，如果您假设地板的质量是无限的（或比身体的质量大得多），那么您只需：

```
Real body_rel_vel_after = -e * Rvector::dotProduct(relativeVelocities, floorNormal);
Real body_vel_after = Rvector::dotProduct(floorVelocity, floorNormal) + body_rel_vel_after; 
```

就是这么简单。但是，在那个假设下，你没有动量守恒。但无论如何，冲击的恢复冲动可以计算为：

```
Real impulse = m_Bodies[i].mass * (body_vel_after - Rvector::dotProduct(m_Bodies[i].Vel, floorNormal)); 
```

现在，因为恢复冲量是法向力在冲击的小时间段内的积分，所以*冲击期间摩擦产生的冲量*可以从恢复冲击中计算出来。摩擦力等于“mu”乘以法向力，即 ，`|Ff| = mu * |Fn|`这也适用于冲量，即`|If| = mu * |In|`。因此，您可以直接计算它：

```
Real friction_impulse = mu * fabs(impulse); 
```

但这只是摩擦脉冲的大小。它的方向与相对切向速度相反，即：

```
Rvector tangent_rel_vel = relativeVelocities - Rvector::dotProduct(relativeVelocities, floorNormal) * floorNormal; 
```

它的方向是：

```
Rvector dir_rel_vel = tangent_rel_vel;
dir_rel_vel.normalize(); 
```

（注意我需要保持切向速度不变，因为后面会用到）

此时，您可以按如下方式计算撞击后的切向速度（同样，在无限质量地板的假设下，否则，它比这更复杂）：

```
Rvector tangent_rel_vel_after = tangent_rel_vel - dir_rel_vel * friction_impulse / m_Bodies[i].mass; 
```

但是，如果摩擦冲量导致切向相对速度为零怎么办？这是一个问题，因为根据上面的公式，部分摩擦冲量最终可能会反转切向相对速度的方向，这意味着在冲击的后半部分，摩擦力实际上作用在速度（不好）。最大的摩擦力就是停止相对运动。因此，您需要检查该条件：

```
Real tang_rel_vel_change = friction_impulse / mBodies[i].mass;
Rvector tangent_rel_vel_after = tangent_rel_vel - dir_rel_vel * tang_rel_vel_change;

if ( tang_rel_vel_change > tangent_rel_vel.length() ) 
    tangent_rel_vel_after = Rvector(0.0, 0.0, 0.0);   // stop relative motion. 
```

此时，您需要做的就是结合两个最终速度：

```
m_Bodies[i].Vel = floorVelocity + tangent_rel_vel_after + body_rel_vel_after * floorNormal; 
```

至少对于这个非常简单的问题（地板的无限质量）就是这样。实际上，当您使事情复杂化时，这种基于脉冲的方法变得越来越难以处理：两个有限质量对象、多个对象和实际的刚体动力学（因为您在这里只做粒子动力学）。除了简单的校园球在地板上弹跳的例子之外，基于脉冲的方法很少见。顺便说一句，您不应该真正将其称为“刚体”模拟器，因为您所做的一切都是在进行粒子动力学（而 3D 刚体动力学比这复杂得多）。此外，您的积分法则很糟糕，但那是完全不同的故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:25:44.507

摩擦是向后的，不是吗？

```
 Rvector fDirection(m_Bodies[i].Vel.x,0.0,m_Bodies[i].Vel.z); 
```

这是在速度的方向。然后将其乘以一些常数，然后将其添加到速度（连同冲量）

```
collision_forces += friction ;
 m_Bodies[i].Vel += (collision_forces/m_Bodies[i].mass); 
```

所以这将起到增加沿地板的速度的作用。

* * *

还有一些其他奇怪的事情：
你的冲动项有： `(1/m_Bodies[i].mass + floorMass)` 这是在质量上加上 1/质量。难道不应该`(1/(m_Bodies[i].mass + floorMass))`

然后在积分器中，您根据力计算加速度，但从不积分它，您还直接将力应用于速度。那么`acceleration`会员有什么用呢？

# wpf - 获取特定 ListViewItem 相对于它拥有的 ListView 的坐标

> ID：14483825
> 
> 赞同：1
> 
> 时间：2013-01-23T15:58:28.867
> 
> 标签：wpf, drag-and-drop, listviewitem, adorner, adornerlayer

我正在尝试确定代表 ListViewItem 的容器的物理坐标（特别是我对 TOP 和 BOTTOM 感兴趣）。

我通过以下方式引用了 ListViewItem：

```
 ListViewItem item = ((ListView)AdornedElement).ItemContainerGenerator.ContainerFromIndex(idx) as ListViewItem;
 ContentPresenter myContentPresenter = FindVisualChild<ContentPresenter>(item); 
```

我现在需要获取该项目并找出它的顶部和底部值相对于整个列表视图。这是为了在拖放过程中显示拖线指示器。

任何人都可以提供任何见解吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:05:29.587

对于将来可能会有所帮助的人。我想通了（字面意思是在我发布之后）

```
 Point pointTransformToVisual = lvItem.TransformToVisual((Visual)theListView.Parent).Transform(new Point());

    Rect boundsRect = VisualTreeHelper.GetDescendantBounds(lvItem);
    boundsRect.Offset(transform.X, transform.Y); 
```

# uitableview - 旋转到横向后，DetailController 何时更改大小？

> ID：14483830
> 
> 赞同：1
> 
> 时间：2013-01-23T15:58:43.613
> 
> 标签：uitableview, ios6, master-detail, autolayout

我正在编写的 iPad 应用程序的主从布局遇到一些问题。DetailController 包含一个管理 tableview 的 UIViewController。tableview 包含自定义单元格，布局非常具体。

我正在使用自动布局，希望使用自动布局来管理从纵向过渡到横向的单元格布局，但这似乎是一个彻底的失败。无论我做什么，我似乎都无法让布局配置在旋转时调整表格大小的情况下工作。尺寸停留在该表的尺寸检查器中定义的任何宽度和高度。

Sooo ...我正在努力让它自己工作。但我无法弄清楚显示控制器何时实际调整自身大小。无论我在哪里检查，当我得到显示控制器的大小时，宽度和高度都固定为纵向模式的原始大小。

我不确定此时该怎么做。如果有人知道如何使用自动布局来使表格布局自动工作，那将是杀手锏。但我想如果有人能告诉我如何在旋转后手动调整表格大小，我会很满意。

# visual-studio-2012 - 为 vstest.console.exe 指定结果文件名

> ID：14483837
> 
> 赞同：63
> 
> 时间：2013-01-23T15:58:59.883
> 
> 标签：visual-studio-2012, vstest

可能是一个愚蠢的问题，但有人知道如何指定VSTEST.Console.exe 运行的输出**文件名吗？**我的命令行如下：

```
 vstest.console.exe [assembly] /logger:trx 
```

在运行结束时，控制台中出现以下内容：

```
 ResultsFile: somepath\TestResults\{username}_{workstation} {timestamp}.trx 
```

我尝试使用**.runsettings**文件来指定输出位置，但这似乎只控制输出目录，而不是输出文件。还没有发现任何其他似乎可以控制它的东西。

我想解析 TRX 文件并从中生成报告（这已经可以了，但是如果我无法指定 TRX 文件的输出路径，我将不知道从脚本中的何处获取它！）

我必须在这里遗漏一些东西......

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-24T08:12:30.053

编辑：见@AnaFranco的回答 - 显然自VS2017以来，文件名可以这样配置：

```
vstest.console.exe [assembly] /logger:trx;LogFileName=[filename].trx 
```

我将把旧答案留给后代和 2017 年之前的版本。

* * *

不，你没有错过任何东西。TRX 记录器不支持任何参数（与 TFS 发布者记录器不同）。

记录器组件位于`"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\Extensions\Microsoft.VisualStudio.TestPlatform.Extensions.TrxLogger.dll"`. 如果您在您最喜欢的 .NET 反编译器中检查它，您将看到方法`TrxLogger.GetTrxFileName`. 它使用有关当前测试运行的一些基本知识来生成表单的错位名称，`{username}_{workstation} {timestamp}.trx`并且无法以明显的方式进行配置。

据我所知，TRX 文件是在`TestResults\`当前工作目录下的文件夹中创建的，除非另有配置。你可以做的是：

*   创建一个新的临时文件夹
*   将当前目录更改为它
*   运行测试运行器
*   使用您最喜欢的递归文件搜索方法扫描文件夹中的结果`.trx`文件，您就完成了

至少这是我在构建中所做的（MSBuild，sob）：

```
<ItemGroup>
  <TestResult Include="**\*.trx"/>
</ItemGroup> 
```

即`.trx`把当前目录下的所有文件都收集起来，塞进`@(TestResult)`item group做进一步处理。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-10-11T01:04:29.000

这对我测试 .net 核心很有用，我没有用 .net 框架尝试过：

```
vstest.console.exe [assembly] /logger:trx;LogFileName=[filename].trx 
```

也许它是一个新事物

更新：这也适用于 .net 框架项目，使用最新的测试平台和 vstest.console.exe

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-11-05T12:49:56.127

显然，您可以指定放置 *.trx 文件的目录（但不是文件本身）。但是，这是通过 .runsettings 文件而不是命令行完成的。

摘自[Bhuvaneshwari 的博客](http://blogs.msdn.com/b/bhuvaneshwari/archive/2012/06/16/vstest-console-exe-commandline-test-runner.aspx)：

> 如果需要覆盖结果的默认位置，用户需要使用 runsettings 文件传递​​此值。
> 
> 例子：

```
Mstest.exe /testcontainer:abc.dll /results:C:\Results.trx 

Vstest.console.exe abc.dll /settings:output.runsettings 
```

> .runsettings 文件的上下文如下所示：

```
<?xml version="1.0" encoding="UTF-8"?> 
<RunSettings> 
  <RunConfiguration>
   <ResultsDirectory>c:\</ResultsDirectory>
  </RunConfiguration>
 </RunSettings> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-02-13T00:56:33.873

我也有这个问题。我决定编写一个 MSBuild 目标，通过 EXEC 任务执行 vstest.console，处理其所有输出，包括覆盖结果。

基本上，我捕获了 vstest 输出并使用正则表达式来捕获输出的 *.trx 和 *.coverage 部分，结果证明这非常容易。此外，它还删除了 TestResults 目录以保持工作空间整洁。

最后，您将获得 *.trx 文件和 *.coverage 文件（可选）。

该脚本可能看起来有点复杂，但它必须满足我们的需要。我试着把它清理一下。希望这可以帮助。

```
<Target Name="Test" DependsOnTargets="Build">
    <!-- Declare the defaults and arrange parameters -->
    <PropertyGroup>
      <ArtifactsPath Condition=" '$(ArtifactsPath)' == '' ">Artifacts</ArtifactsPath>
      <VSTestSessionName Condition=" '$(VSTestSessionName)' == ''">TestResults</VSTestSessionName>
      <VSTestExe Condition=" '$(VSTestExe)' == '' ">C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.console.exe</VSTestExe>
      <VSTestFailBuildOnTestFail Condition=" '$(VSTestFailBuildOnTestFail)' == '' ">false</VSTestFailBuildOnTestFail>
      <VSTestInIsolation Condition=" '$(VSTestInIsolation)' == '' ">true</VSTestInIsolation>
      <VSTestUseVsixExtensions Condition=" '$(VSTestUseVsixExtensions)' == '' ">true</VSTestUseVsixExtensions>
      <VSTestFramework Condition=" '$(VSTestFramework)' == '' ">framework45</VSTestFramework>
      <VSTestLogger Condition=" '$(VSTestLogger)' == '' ">trx</VSTestLogger>
      <ErrorCode>0</ErrorCode>
    </PropertyGroup>
    <ItemGroup>
      <VSTestResultsPath Include="$(VSTestResultsPath)" />
      <VSTestParams Include="@(VSTestFiles ->'&quot;%(FullPath)&quot;', ' ')" />
      <VSTestParams Condition="$(VSTestEnableCodeCoverage)" Include="/EnableCodeCoverage" />
      <VSTestParams Condition="$(VSTestInIsolation)" Include="/InIsolation" />
      <VSTestParams Include="/UseVsixExtensions:$(VSTestUseVsixExtensions)" />
      <VSTestParams Include="/Framework:$(VSTestFramework)" />
      <VSTestParams Include="/Logger:$(VSTestLogger)" />
      <VSTestParams Condition="$(VSTestCaseFilter) != ''" Include="/TestCaseFilter:&quot;$(VSTestCaseFilter)&quot;" />
      <VSTestParams Condition="$(VSTestRunSettings) != ''" Include="/Settings:&quot;$(VSTestRunSettings)&quot;" />
    </ItemGroup>

    <Message Text="TestAssembly: %(VSTestFiles.Identity)" Importance="high"/>

    <Exec ContinueOnError="!$(VSTestFailBuildOnTestFail)" ConsoleToMSBuild="true" WorkingDirectory="$(WorkingDirectory)" Condition=" '@(VSTestFiles)' != ''" 
          Command="&quot;$(VSTestExe)&quot; @(VSTestParams, ' ')">
      <Output TaskParameter="ExitCode" PropertyName="ErrorCode"/>
      <Output TaskParameter="ConsoleOutput" PropertyName="OutputOfExec" />
    </Exec>
    <Message Importance="high" Text="VSTest exitcode: $(ErrorCode)"/>

    <!-- Use the VSTest output to discover the Results & Coverage files respectively -->
    <PropertyGroup>
      <!-- Unencoded Regex: (?<=(Results file: )).*?(?=\;)|(?<=(Attachments:;)).*?(?=\;) -->
      <ResultsFileRegexPattern>(?&lt;=(Results File: )).*.trx</ResultsFileRegexPattern>
      <CoverageFileRegexPattern>(?&lt;=(Attachments:;)).*.coverage</CoverageFileRegexPattern>
      <SourceResultsFile>$([System.Text.RegularExpressions.Regex]::Match($(OutputOfExec), $(ResultsFileRegexPattern)))</SourceResultsFile>
      <SourceCoverageFile Condition="$(VSTestEnableCodeCoverage)">$([System.Text.RegularExpressions.Regex]::Match($(OutputOfExec), $(CoverageFileRegexPattern)))</SourceCoverageFile>
    </PropertyGroup>

    <ItemGroup>
      <TestArtifact Include="$(SourceResultsFile)" />
      <TestArtifact Include="$(SourceCoverageFile)" />
    </ItemGroup>

    <Warning Condition=" '$(SourceResultsFile)' == '' " Text=".trx file not found" />
    <Warning Condition=" $(VSTestEnableCodeCoverage) and '$(SourceCoverageFile)' == '' " Text=".coverage file not found" />

    <!-- Copy files to the artifact directory -->
    <Copy SourceFiles="@(TestArtifact)" DestinationFiles="@(TestArtifact->'$(ArtifactsPath)\$(VSTestSessionName)%(Extension)')" />

    <!-- Clear the test results temporary directory -->
    <RemoveDir Directories="@(TestResults)" />

    <ItemGroup>
      <TestFile Include="$(ArtifactsPath)\**\$(VSTestSessionName).trx" />
      <CoverageFile Include="$(ArtifactsPath)\**\$(VSTestSessionName).coverage" />
    </ItemGroup>

    <Message Text="TestReport: @(TestFile)" />
    <Message Text="CoverageReport: @(CoverageFile)" />
</Target> 
```

# jquery - 分页..添加跨度和增量编号

> ID：14483842
> 
> 赞同：0
> 
> 时间：2013-01-23T15:59:10.370
> 
> 标签：jquery, html, arrays, pagination

我想将我的数组分成几页，每页 4 个。我已经知道我需要多少页：

```
var no_of_entries = docs.length;
var no_of_pages = (Math.round(no_of_entries / 4)); 
```

我将如何添加带有页码的 's 和来自该变量的唯一 id？

即，如果 no_of_pages 的变量为 3，我将需要 3 个跨度，编号为 1-3，每个都有唯一的 id（最好是与数字匹配的 id）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:02:11.700

在带有 ID 的标记中创建一个空 div。在您的 javascript 中（我假设就是这样）使用您的 no_of_pages 作为上限创建一个循环。只需将 span 标签标记添加到您在循环中创建的 div。循环计数器可以为您的跨度提供页码标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:09:24.143

你可以尝试这样的事情：

```
for (var i = 1; i <= no_of_pages; i++) {
  $('.YOUR-WRAPPER').append('<span id="ID-NAME' + i + '">Whatever text you want</span>')
} 
```

这是一个jsfiddle：http: [//jsfiddle.net/NqdBW/](http://jsfiddle.net/NqdBW/)

# php - 由 $.ajax 提交时如何从同一页面获取带有 $_POST 的表单数据

> ID：14483848
> 
> 赞同：1
> 
> 时间：2013-01-23T15:59:32.257
> 
> 标签：php, jquery, ajax

我有*index.php*页面，在该页面中，有一个表单。在表单中，我有一个文本字段，我想`_POST`在*index.php*页面中使用 $ 检索该值。

问题是我在*index.php*中使用 JQUERY AJAX 。我也有`$.ajax`功能。`$.ajax`功能是将数据传递到另一个 PHP 页面。如果我在函数中返回 false `$.ajax`，则表单将不会提交。

所以我无法使用`$_POST`. 如果我不在函数中返回 false ，我可以在*index.php*`$.ajax`中使用检索表单值。但是，$.ajax 函数将不起作用。我怎样才能使它既起作用又从该 index.php 中的该文本字段中获取值。`$_POST`*`$.ajax``$_POST`*

 *提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:02:38.140

```
 $(document).on("submit","form", function() {
       $.post('index.php', $("form").serialize(),function(d) {

       });
       return false;
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:03:25.707

我建议你使用会话变量。获得 POST 后，将 SESSION 设置为要临时存储的值。然后，在使用它们之后，您可以清空会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:03:48.993

`$("#form").submit()`成功发送ajax后，您可以调用

```
$.ajax({ 
url: 'getPost.php', 
type: 'POST', 
data: value,
success: function(data){
 $('#container').html(data); 
 $('#myForm').submit();
}
}); 
```

在哪里`value = {name: "noname"} // javascript object(json)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:11:36.980

你可以用不同的方法来做到这一点，比如

1：您可以有一个隐藏字段和表单，然后在发送 ajax 调用时使用相同的文本字段值填充该字段，然后在完成 ajax 调用后提交该表单

2：您还可以将文本字段的值保存在 java 脚本变量中。然后使用 javascript 制作一个临时表单并使用该表单提交该变量。*

# php - PHP JSON 获取对象的名称

> ID：14483858
> 
> 赞同：2
> 
> 时间：2013-01-23T15:59:54.133
> 
> 标签：php, json, object

```
<?
stdClass Object
(
    [image_header] => Array
        (
            [0] => stdClass Object
                (
                    [img] => /headers/header.jpg
                )
        )
)
?> 
```

对象名称 image_header 是可变的，所以它可以是任何字符串。我可以在不知道它是什么的情况下访问这个字符串吗？

@Jon 他的回答让我很满意。

对于其他想要以这种方式使用变量对象名的人：要使用变量名访问此对象，我必须使用大括号：

```
$key = key(get_object_vars($_json));
$_json->{$key}[0]->img; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T16:05:29.930

您可以通过以下方式方便地做到这一点[`get_object_vars`](http://php.net/manual/en/function.get-object-vars.php)：

```
$propertyName = key(get_object_vars($object)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:25:28.717

如果您不知道属性的名称是什么，您可以使用 PHP 的[反射类](http://php.net/manual/en/book.reflection.php)，或者更简单地使用[get_object_vars()](http://us3.php.net/get_object_vars)。

get_object_vars() 可能是您在这里寻找的 - 它“返回范围内指定对象的已定义对象可访问非静态属性的关联数组。如果尚未为属性分配值，它将返回空值。” 因此，您将获得关联数组中返回的属性名称及其值。

或者，您可以使用一些 PHP 的反射魔法，尽管在这里可能有点过分，这取决于您的最终目标。反射类非常强大，如果您对要实现的目标有更复杂的要求，可能值得使用。举个例子：

```
// let's say $obj is the object you provided in your question
// Instantiate the reflection object
$reflector = new ReflectionClass($obj); 

// Get properties of $obj, returned as an array of ReflectionProperty objects
$properties = $reflector->getProperties();
foreach ( $properties as $property ) {
  echo $property->getName(); // In your example, this would echo 'image_header'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:04:04.867

有几种可能性。如果您正在使用`json_decode()`，则可以将 true 作为第二个参数传入，以将数据解析为关联数组。

```
$data = json_decode($myJson, true);

print_r( $data['image_header'] ); 
```

您还可以从这样的变量访问对象属性。

```
$myProperty = 'image_header';

print_r( $data->$myProperty ); 
```

如果“您不知道它是什么”是指您根本不知道键，您可以使用我的第一个示例并使用`array_values()`通过索引获取值。

```
$values = array_values($data);

// image_header
print_r( $values[0] ); 
```

# c# - Mvc 4 添加带有脚手架的控制器给出错误 - “无法检索元数据......”

> ID：14483860
> 
> 赞同：1
> 
> 时间：2013-01-23T16:00:00.197
> 
> 标签：c#, sql-server, asp.net-mvc

尝试使用 CRUD 操作和 EF 添加控制器时出现以下错误：

> 无法检索 LetLord.Models.Tenant 的元数据。不支持使用相同的 DbCompiledModel 针对不同类型的数据库创建上下文。而是为正在使用的每种类型的服务器创建一个单独的 DbCompiledModel。

添加控制器对话框设置：

**模板：**具有读/写操作和视图的 MVC 控制器，使用 EF。

**模型类：**租户（LetLord.Models）

**数据上下文类：** LetLordContext (LetLord.Models)

我见过类似的问题/问题，并尝试了提供的解决方案，但我**无法**让它发挥作用。

我的连接字符串：

```
<connectionStrings>
<add name="LetLordContext" connectionString="Data Source=|DataDirectory|LetLord.Models.LetLordContext.sdf" providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings> 
```

在`LetLordContext.cs`我没有默认构造函数。在我的`InitializeSimpleMembershipAttribute.cs`课堂上，我打电话给

```
WebSecurity.InitializeDatabaseConnection("LetLordContext", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

我试过的：

*   按照不同问题中的说明更改我的提供者名称。
*   删除连接字符串**并将**其注释掉。
*   删除并重新安装实体框架。
*   确保我安装了 SQL Server CE 4.0。
*   在颠覆上恢复到我项目的早期版本。

我仍然不知所措，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:28:50.483

找到了解决方法，但我仍然不知道导致此错误的原因。

在我更改的根 web.config 文件中

```
<connectionStrings>
 <add name="LetLordContext" connectionString="Data Source=|DataDirectory|LetLord.Models.LetLordContext.sdf" providerName="System.Data.SqlServerCe.4.0" />
</connectionStrings> 
```

至

```
<connectionStrings>
 <add name="DefaultConnection" connectionString="Data Source=|DataDirectory|LetLord.Models.LetLordContext.sdf" providerName="System.Data.SqlServerCe.4.0" />
</connectionStrings> 
```

这让我可以使用脚手架添加视图，添加后，我将字符串改回原来的样子。据我所知，任何新字符串都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T18:18:51.330

这个解决方案有点笨拙，但在尝试了几种解决方案后，我不得不再次移动。我决定创建一个具有不同名称的新模型并将类内部复制到新模型中。然后我在“添加控制器”窗口中选择了新模型，脚手架就完成了。

然后我删除了旧模型。

不知道是什么坏了，但新模型运行良好。

# php - php发送的电子邮件中的Message-Id有什么问题

> ID：14483861
> 
> 赞同：17
> 
> 时间：2013-01-23T16:00:01.127
> 
> 标签：php, email, smtp, zend-mail

我有 php 发送到 gmail 帐户的电子邮件的可疑 message-id 标头：

```
Message-Id: <5100054f.a489440a.5d93.6a70SMTPIN_ADDED_MISSING@mx.google.com> 
```

你能告诉它有这种奇怪的格式吗？ SMTPIN_ADDED_MISSING 在这里是什么意思？我在互联网上看到的示例具有类似这样的格式，其中包含发送域，但由于某种原因我的消息 ID 不包含它：

```
38D1C1FD-3C35-4568-925C-FC46CAC0DE8A@sendinghost.com 
```

我不认为我在 Zend_Mail 中设置了这个标题。是什么产生了这个标题？你看到这个标题有什么问题吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T17:19:18.987

发送电子邮件时，适当的出站电子邮件客户端应生成`Message-ID`标头。当邮件通过其电子邮件系统时，Google 会为您生成它，但大多数人不会，并且大多数垃圾邮件过滤器会将此丢失的标题视为该邮件更有可能是垃圾邮件的指示。任何格式错误或丢失的标头都将添加到“垃圾邮件分数”中。

生成并不难，所需要的只是每个消息都是唯一的：

```
$message-id = time() .'-' . md5($sender . $recipient) . '@' $_SERVER['SERVER_NAME']; 
```

或者

```
$message-id = time() .'-' . md5($sender . $recipient) . '@yourdomain.com'; 
```

给出：

```
1358961017-677533f745f613447d06de25e7fa4d32@yourdomain.com 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T16:53:50.423

如果丢失，Google SMTP 会生成它。此标头必须由第一个 SMTP 服务器设置。所以你不会生成它 - 谷歌会。它用于防止多次传递并将相关消息链接在一起。

不需要设置消息 id 标头，但对于大多数（但不是全部，仅配置）smtp 添加（可能是修复）此标头是一个好习惯。因此，为避免其他人生成此标头，您可以自己生成它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-26T05:38:58.357

这个对我有用（我还在标题中添加了一个“日期”行，因为这对我来说也是一个垃圾邮件问题）。基于[这种和平的代码](https://gist.github.com/Robbert/4967898)。

这是我的 PHP 数组方法（使用 Pear 的 Mail 和 Mime 库）：

```
$headers = array(
   'From'       => $from,
   'Subject'    => $subject,
   'To'     => $to,
   'Cc'     => '',
   'Date'       => date('r'),
   'Message-ID' => sprintf("<%s.%s@%s>",
                                base_convert(microtime(), 10, 36),
                                base_convert(bin2hex(openssl_random_pseudo_bytes(8)), 16, 36),
                                'yourdomain.com')
                ); 
```

请注意，正如 Oleg 在另一个答案中注释掉的那样，使用`$_SERVER['SERVER_NAME']`而不是字面意思在 php cli 中不起作用。`'yourdomain.com'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-20T02:07:44.897

我正在使用相同的 MessageId 来跟踪交换的消息。

我用以下方法修复 MessageId：

```
$mail->MessageID =sprintf('<%s@%s>', $myMessageID, 'myserver'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-16T18:54:19.653

您错过了“<”和“>”括号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-09T16:52:42.400

**tl;博士;** 发送电子邮件时不要使用端口 25，而是使用端口 587

当我使用端口 25 从我自定义创建的 golang 电子邮件客户端发送出站电子邮件到我的本地后缀服务器时，我看到的目标电子邮件地址是 gmail 或 google gsuite 地址

```
Message ID  <5be55db9.1c69fb81.d0444.d894SMTPIN_ADDED_MISSING@mx.google.com> 
```

从 gmail 中的目标电子邮件地址查看`Show Original`...但是，由于我在我的 golang 电子邮件客户端和本地 postfix 服务器中都使用了完整的 TLS 证书，所以当我在出站电子邮件客户端中使用安全端口 587 替换使用端口 25 时（postfix 已经使用 TLS 证书）然后我得到正确的

```
Message ID  <20181109163255.F164D8E9588@mail.myexample.com> 
```

注意 - 我从来没有定义电子邮件标头`message-id`，因为我使用的 golang 存储库没有定义该标头的 api 调用

# verilog - Verilog：混合分配给变量的阻塞和非阻塞分配 不是推荐的编码实践

> ID：14483862
> 
> 赞同：1
> 
> 时间：2013-01-23T16:00:01.633
> 
> 标签：verilog, hdl

我有以下 Verilog 代码：

```
//////////////////////////////////////////////////////////////////////////////
//
//  Xilinx, Inc. 2010                 www.xilinx.com
//
//  XAPP xxx - 1:5 Differential Data De-serializer
//
//////////////////////////////////////////////////////////////////////////////
//
//  File name :       serdes_1_to_5_diff_data.v
//
//  Description :     This module instantiates IODELAY2 and ISERDES2 primitives
//                    to receive TMDS differential data in 1:5 format
//
//  Note:             
//
//  Author :    Bob Feng 
//////////////////////////////////////////////////////////////////////////////
//
//  Disclaimer: 
//
//    This disclaimer is not a license and does not grant any rights to the materials 
//    distributed herewith. Except as otherwise provided in a valid license issued to you 
//    by Xilinx, and to the maximum extent permitted by applicable law: 
//    (1) THESE MATERIALS ARE MADE AVAILABLE "AS IS" AND WITH ALL FAULTS, 
//    AND XILINX HEREBY DISCLAIMS ALL WARRANTIES AND CONDITIONS, EXPRESS, IMPLIED, OR STATUTORY, 
//    INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, NON-INFRINGEMENT, OR 
//    FITNESS FOR ANY PARTICULAR PURPOSE; and (2) Xilinx shall not be liable (whether in contract 
//    or tort, including negligence, or under any other theory of liability) for any loss or damage 
//    of any kind or nature related to, arising under or in connection with these materials, 
//    including for any direct, or any indirect, special, incidental, or consequential loss 
//    or damage (including loss of data, profits, goodwill, or any type of loss or damage suffered 
//    as a result of any action brought by a third party) even if such damage or loss was 
//    reasonably foreseeable or Xilinx had been advised of the possibility of the same.
//
//  Critical Applications:
//
//    Xilinx products are not designed or intended to be fail-safe, or for use in any application 
//    requiring fail-safe performance, such as life-support or safety devices or systems, 
//    Class III medical devices, nuclear facilities, applications related to the deployment of airbags,
//    or any other applications that could lead to death, personal injury, or severe property or 
//    environmental damage (individually and collectively, "Critical Applications"). Customer assumes 
//    the sole risk and liability of any use of Xilinx products in Critical Applications, subject only 
//    to applicable laws and regulations governing limitations on product liability.
//
//  THIS COPYRIGHT NOTICE AND DISCLAIMER MUST BE RETAINED AS PART OF THIS FILE AT ALL TIMES.
//
//////////////////////////////////////////////////////////////////////////////

`timescale 1ps/1ps

module serdes_1_to_5_diff_data # (
  parameter DIFF_TERM = "TRUE",
  parameter SIM_TAP_DELAY = 49,
  parameter BITSLIP_ENABLE = "FALSE"
)(
  input  wire        use_phase_detector,  // '1' enables the phase detector logic
  input  wire        datain_p,            // Input from LVDS receiver pin
  input  wire        datain_n,            // Input from LVDS receiver pin
  input  wire        rxioclk,             // IO Clock network
  input  wire        rxserdesstrobe,      // Parallel data capture strobe
  input  wire        reset,               // Reset line
  input  wire        gclk,                // Global clock
  input  wire        bitslip,             // Bitslip control line
  output wire [4:0]  data_out             // Output data
);  

  wire       ddly_m;
  wire       ddly_s;
  wire       busys;
  wire       rx_data_in;
  wire       cascade;
  wire       pd_edge;
  reg  [8:0] counter;
  reg  [3:0] state;
  reg        cal_data_sint;
  wire       busy_data;
  reg        busy_data_d;
  wire       cal_data_slave;
  reg        enable;
  reg        cal_data_master;
  reg        rst_data;
  reg        inc_data_int;   //THIS LINE (81) IS CAUSING THE ERROR
  wire       inc_data;
  reg        ce_data;
  reg        valid_data_d;
  reg        incdec_data_d;
  reg  [4:0] pdcounter;
  wire       valid_data;
  wire       incdec_data;
  reg        flag;
  reg        mux;
  reg        ce_data_inta ;
  wire [1:0] incdec_data_or;
  wire       incdec_data_im;
  wire [1:0] valid_data_or;
  wire       valid_data_im;
  wire [1:0] busy_data_or;
  wire       all_ce;

  wire [1:0] debug_in = 2'b00;

  assign busy_data = busys ;

  assign cal_data_slave = cal_data_sint ;

  /////////////////////////////////////////////////
  //
  // IDELAY Calibration FSM
  //
  /////////////////////////////////////////////////
  always @ (posedge gclk or posedge reset)
  begin
  if (reset == 1'b1) begin
    state <= 0 ;
    cal_data_master <= 1'b0 ;
    cal_data_sint <= 1'b0 ;
    counter <= 9'h000 ;
    enable <= 1'b0 ;
    mux <= 1'h1 ;
  end
  else begin
      counter <= counter + 9'h001 ;
      if (counter[8] == 1'b1) begin
      counter <= 9'h000 ;
      end
      if (counter[5] == 1'b1) begin
      enable <= 1'b1 ;
      end
      if (state == 0 && enable == 1'b1) begin       // Wait for IODELAY to be available
      cal_data_master <= 1'b0 ;
      cal_data_sint <= 1'b0 ;
      rst_data <= 1'b0 ;
        if (busy_data_d == 1'b0) begin
        state <= 1 ;
      end
      end
      else if (state == 1) begin          // Issue calibrate command to both master and slave, needed for simulation, not for the silicon
        cal_data_master <= 1'b1 ;
        cal_data_sint <= 1'b1 ;
        if (busy_data_d == 1'b1) begin        // and wait for command to be accepted
          state <= 2 ;
        end
      end
      else if (state == 2) begin          // Now RST master and slave IODELAYs needed for simulation, not for the silicon
        cal_data_master <= 1'b0 ;
        cal_data_sint <= 1'b0 ;
        if (busy_data_d == 1'b0) begin
          rst_data <= 1'b1 ;
          state <= 3 ;
        end
      end
      else if (state == 3) begin          // Wait for IODELAY to be available
        rst_data <= 1'b0 ;
        if (busy_data_d == 1'b0) begin
          state <= 4 ;
        end
      end
      else if (state == 4) begin          // Wait for occasional enable
        if (counter[8] == 1'b1) begin
          state <= 5 ;
        end
        end
        else if (state == 5) begin          // Calibrate slave only
        if (busy_data_d == 1'b0) begin
          cal_data_sint <= 1'b1 ;
          state <= 6 ;
        end
      end
        else if (state == 6) begin          // Wait for command to be accepted
        cal_data_sint <= 1'b0 ;
        if (busy_data_d == 1'b1) begin
          state <= 7 ;
        end
      end
      else if (state == 7) begin          // Wait for all IODELAYs to be available, ie CAL command finished
          cal_data_sint <= 1'b0 ;
        if (busy_data_d == 1'b0) begin
          state <= 4 ;
        end
      end
  end
  end

always @ (posedge gclk or posedge reset)        // Per-bit phase detection state machine
begin
if (reset == 1'b1) begin
  pdcounter <= 5'b1000 ;
  ce_data_inta <= 1'b0 ;
  flag <= 1'b0 ;              // flag is there to only allow one inc or dec per cal (test)
end
else begin
  busy_data_d <= busy_data_or[1] ;
    if (use_phase_detector == 1'b1) begin       // decide whther pd is used
    incdec_data_d <= incdec_data_or[1] ;
    valid_data_d <= valid_data_or[1] ;
    if (ce_data_inta == 1'b1) begin
      ce_data = mux ;
    end
    else begin
      ce_data = 64'h0000000000000000 ;
    end
      if (state == 7) begin
      flag <= 1'b0 ;
    end
      else if (state != 4 || busy_data_d == 1'b1) begin // Reset filter if state machine issues a cal command or unit is busy
      pdcounter <= 5'b10000 ;
        ce_data_inta <= 1'b0 ;
      end
      else if (pdcounter == 5'b11111 && flag == 1'b0) begin // Filter has reached positive max - increment the tap count
        ce_data_inta <= 1'b1 ;
        inc_data_int <= 1'b1 ;
      pdcounter <= 5'b10000 ;
      flag <= 1'b1 ;
    end
        else if (pdcounter == 5'b00000 && flag == 1'b0) begin // Filter has reached negative max - decrement the tap count
        ce_data_inta <= 1'b1 ;
        inc_data_int <= 1'b0 ;
      pdcounter <= 5'b10000 ;
      flag <= 1'b1 ;
      end
    else if (valid_data_d == 1'b1) begin      // increment filter
        ce_data_inta <= 1'b0 ;
      if (incdec_data_d == 1'b1 && pdcounter != 5'b11111) begin
        pdcounter <= pdcounter + 5'b00001 ;
      end
      else if (incdec_data_d == 1'b0 && pdcounter != 5'b00000) begin  // decrement filter
        pdcounter <= pdcounter + 5'b11111 ;
      end
      end
      else begin
        ce_data_inta <= 1'b0 ;
      end
    end
    else begin
    ce_data = all_ce ;
    inc_data_int = debug_in[1] ;
    end
end
end

assign inc_data = inc_data_int ;

assign incdec_data_or[0] = 1'b0 ;             // Input Mux - Initialise generate loop OR gates
assign valid_data_or[0] = 1'b0 ;
assign busy_data_or[0] = 1'b0 ;

assign incdec_data_im = incdec_data & mux;          // Input muxes
assign incdec_data_or[1] = incdec_data_im | incdec_data_or;      // AND gates to allow just one signal through at a tome
assign valid_data_im = valid_data & mux;          // followed by an OR
assign valid_data_or[1] = valid_data_im | valid_data_or;     // for the three inputs from each PD
assign busy_data_or[1] = busy_data | busy_data_or;       // The busy signals just need an OR gate

assign all_ce = debug_in[0] ;

IBUFDS #(
  .DIFF_TERM    (DIFF_TERM)) 
data_in (
  .I            (datain_p),
  .IB           (datain_n),
  .O            (rx_data_in)
);

//
// Master IDELAY
//
IODELAY2 #(
  .DATA_RATE            ("SDR"),
  .IDELAY_VALUE         (0),
  .IDELAY2_VALUE        (0),
  .IDELAY_MODE          ("NORMAL" ),
  .ODELAY_VALUE         (0),
  .IDELAY_TYPE          ("DIFF_PHASE_DETECTOR"),
  .COUNTER_WRAPAROUND   ("STAY_AT_LIMIT"), //("WRAPAROUND"),
  .DELAY_SRC            ("IDATAIN"),
  .SERDES_MODE          ("MASTER"),
  .SIM_TAPDELAY_VALUE   (SIM_TAP_DELAY)
) iodelay_m (
  .IDATAIN              (rx_data_in),      // data from IBUFDS
  .TOUT                 (),                // tri-state signal to IOB
  .DOUT                 (),                // output data to IOB
  .T                    (1'b1),            // tri-state control from OLOGIC/OSERDES2
  .ODATAIN              (1'b0),            // data from OLOGIC/OSERDES2
  .DATAOUT              (ddly_m),          // Output data 1 to ILOGIC/ISERDES2
  .DATAOUT2             (),                // Output data 2 to ILOGIC/ISERDES2
  .IOCLK0               (rxioclk),         // High speed clock for calibration
  .IOCLK1               (1'b0),            // High speed clock for calibration
  .CLK                  (gclk),            // Fabric clock (GCLK) for control signals
  .CAL                  (cal_data_master), // Calibrate control signal
  .INC                  (inc_data),        // Increment counter
  .CE                   (ce_data),         // Clock Enable
  .RST                  (rst_data),        // Reset delay line
  .BUSY                 ()                 // output signal indicating sync circuit has finished / calibration has finished
);

//
// Slave IDELAY
//
IODELAY2 #(
  .DATA_RATE            ("SDR"),
  .IDELAY_VALUE         (0),
  .IDELAY2_VALUE        (0),
  .IDELAY_MODE          ("NORMAL" ),
  .ODELAY_VALUE         (0),
  .IDELAY_TYPE          ("DIFF_PHASE_DETECTOR"),
  .COUNTER_WRAPAROUND   ("WRAPAROUND"),
  .DELAY_SRC            ("IDATAIN"),
  .SERDES_MODE          ("SLAVE"),
  .SIM_TAPDELAY_VALUE   (SIM_TAP_DELAY)
) iodelay_s (
  .IDATAIN              (rx_data_in),  // data from IBUFDS
  .TOUT                 (),            // tri-state signal to IOB
  .DOUT                 (),            // output data to IOB
  .T                    (1'b1),        // tri-state control from OLOGIC/OSERDES2
  .ODATAIN              (1'b0),        // data from OLOGIC/OSERDES2
  .DATAOUT              (ddly_s),      // Slave output data to ILOGIC/ISERDES2
  .DATAOUT2             (),            //
  .IOCLK0               (rxioclk),     // High speed IO clock for calibration
  .IOCLK1               (1'b0),
  .CLK                  (gclk),        // Fabric clock (GCLK) for control signals
  .CAL                  (cal_data_slave), // Calibrate control signal
  .INC                  (inc_data),       // Increment counter
  .CE                   (ce_data),        // Clock Enable
  .RST                  (rst_data),       // Reset delay line
  .BUSY                 (busys)        // output signal indicating sync circuit has finished / calibration has finished
);

//
// Master ISERDES
//

ISERDES2 #(
  .DATA_WIDTH       (5),
  .DATA_RATE        ("SDR"),
  .BITSLIP_ENABLE   (BITSLIP_ENABLE),
  .SERDES_MODE      ("MASTER"),
  .INTERFACE_TYPE   ("RETIMED"))
iserdes_m (
  .D                (ddly_m),
  .CE0              (1'b1),
  .CLK0             (rxioclk),
  .CLK1             (1'b0),
  .IOCE             (rxserdesstrobe),
  .RST              (reset),
  .CLKDIV           (gclk),
  .SHIFTIN          (pd_edge),
  .BITSLIP          (bitslip),
  .FABRICOUT        (),
  .Q4               (data_out[4]),
  .Q3               (data_out[3]),
  .Q2               (data_out[2]),
  .Q1               (data_out[1]),
  .DFB              (),
  .CFB0             (),
  .CFB1             (),
  .VALID            (valid_data),
  .INCDEC           (incdec_data),
  .SHIFTOUT         (cascade));

//
// Slave ISERDES
//

ISERDES2 #(
  .DATA_WIDTH       (5),
  .DATA_RATE        ("SDR"),
  .BITSLIP_ENABLE   (BITSLIP_ENABLE),
  .SERDES_MODE      ("SLAVE"),
  .INTERFACE_TYPE   ("RETIMED")
) iserdes_s (
  .D                (ddly_s),
  .CE0              (1'b1),
  .CLK0             (rxioclk),
  .CLK1             (1'b0),
  .IOCE             (rxserdesstrobe),
  .RST              (reset),
  .CLKDIV           (gclk),
  .SHIFTIN          (cascade),
  .BITSLIP          (bitslip),
  .FABRICOUT        (),
  .Q4               (data_out[0]),
  .Q3               (),
  .Q2               (),
  .Q1               (),
  .DFB              (),
  .CFB0             (),
  .CFB1             (),
  .VALID            (),
  .INCDEC           (),
  .SHIFTOUT         (pd_edge));

reg [7:0] rxpdcntr = 8'h7f;
always @ (posedge gclk or posedge reset) begin
  if (reset)
    rxpdcntr <= 8'h7f;
  else if (ce_data)
    if (inc_data)
      rxpdcntr <= rxpdcntr + 1'b1;
    else
      rxpdcntr <= rxpdcntr - 1'b1;
end

endmodule 
```

当我尝试在 Xilinx Platform Studio 中为此设计生成网表时，我不断收到以下错误：

```
ERROR:HDLCompiler:1511 - "/home/eamorr/Desktop/Dropbox/UCD/digitalEye/Atlys_HDMI_PLB_demo/project/pcores/hdmi_in_v1_00_a/hdl/verilog/serdes_1_to_5_diff_data.v" Line 82: Mix of blocking and non-blocking assignments to variable <inc_data_int> is not a recommended coding practice.
ERROR:EDK:546 - Aborting XST flow execution!
ERROR:EDK:440 - platgen failed with errors!
make: *** [implementation/system_microblaze_0_wrapper.ngc] Error 2 
```

我完全被卡住了，不知道该怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:33:34.460

为了推断综合的时序逻辑，您应该使用`nonblocking`assignments ( `<=`) 而不是`blocking`assignments ( `=`)。例如，更改：

```
 ce_data = mux ; 
```

到：

```
 ce_data <= mux ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T13:57:20.480

那来自我假设的[digilentic网站上的HDMI示例。](http://digilentinc.com)

查看所有 inc_data_int 分配：

```
inc_data_int <= 1'b1 ;
inc_data_int <= 1'b0 ;
inc_data_int = debug_in[1] ; 
```

我会注释掉最后一个，因为我认为它是出于调试目的。

（我让 HDMI 像那样工作。）

# symfony - Symfony2，Doctrine OneToOne 关系

> ID：14483863
> 
> 赞同：1
> 
> 时间：2013-01-23T16:00:02.210
> 
> 标签：symfony, orm, doctrine, one-to-one

我有一个表（我们将其命名为“First”），其中包含 id、userID、moonID、typeID 列。还有另一个表（我们将其命名为“Second”），其中也是列“typeID”和TypeName（简单的例子，基本上这个表是一个巨大的数据存储）。

我需要与这两个（实体）表创建简单的关系，这样我就可以在“第一个”表中简单地创建新条目并删除\编辑它们。但我不想从“第二个”表中删除\添加\编辑条目。所以“Second”根本无法触及，我们只是通过“First”的typeID从“Second”中选择数据。我怎样才能做到这一点？

我想看到两个实体和控制器。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:11:51.103

看这里很容易

[http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html](http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html)

你会知道该怎么做。他们那里有例子。

默认情况下，除非您这样做，否则 Doctrine 不会删除链接的一面`onCascade="Delete"`

`OnDelete= Null`如果您想在删除拥有方的情况下使链接为空，您可以使用

# iframe - 谷歌分析，_setDomainName 如何与 iframe 一起使用？

> ID：14483868
> 
> 赞同：0
> 
> 时间：2013-01-23T16:00:15.137
> 
> 标签：iframe, google-analytics, cross-domain

在我们的网站上，我们希望使用 Google Analytics 跟踪 iframe 内容中的用户操作。iframe 托管在不同的第三级域上。出于某种原因，我的设置不起作用。

情况：在 iframe 中，我想使用两个谷歌跟踪器：一个来自父站点，一个单独用于 iframe。我还想使用事件和 VPV。浏览页面时可以在GA账户的“实时概览”部分看到。但我没有看到附加到提交按钮单击的 VPV。

我也不太明白函数“_setDomainName”是如何工作的以及应该有什么。这些是单独的问题，任何帮助将不胜感激。

设置：在父站点上：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXX-1']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_setDomainName', 'parent.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

$(document).ready(function() {
  var pageTracker = _gat._getTrackerByName();
  var iframe = document.getElementById('myIFrame');
  iframe.src = pageTracker._getLinkerUrl('http://mydomain.iframedomain.net/page.aspx');
});

</script> 
```

在 iframe 页面上：

```
<script type="text/javascript">

            var _gaq = _gaq || [];
            _gaq.push(['a._setAccount', 'UA-XXXXXX-1']);
            _gaq.push(['a._setDomainName', 'parent.com']);
            _gaq.push(['a._setAllowLinker', true]);
            _gaq.push(['a._trackPageview']);

            /* this is second tracking account */
            _gaq.push(['b._setAccount', 'UA-XXXXXX-2']);
            _gaq.push(['b._setDomainName', 'iframedomain.net']);
            _gaq.push(['b._trackPageview']);

            (function () {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script> 
```

然后在按钮单击事件上，我调用此函数：

```
 function track() {
                 _gaq.push(['_trackPageview', '/search-retailer-clicked']);
                 _gaq.push(['_trackEvent', 'Search - Event', 'Click - Event', 'Search Retailer Button clicked']); 
             } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:47:54.317

您已在 iframe ( `a._setAccount`& `b._setAccount`) 中命名了两个跟踪器，但在按钮单击事件中，您使用的是默认的未命名跟踪器。

结果是虚拟页面视图和事件被发送到尚未设置帐户的跟踪器。如果您查看跟踪像素请求（通过`ga_debug.js`、`firebug`、`chrome developer tools`或`fiddler`），它们会显示一个`UA-XXXXX-X`accountId。

您可能想要更多类似的东西：

```
function track() {
  _gaq.push(['a._trackPageview', '/search-retailer-clicked']);
  _gaq.push(['a._trackEvent', 'Search - Event', 'Click - Event', 'Search Retailer Button clicked']); 
  _gaq.push(['b._trackPageview', '/search-retailer-clicked']);
  _gaq.push(['b._trackEvent', 'Search - Event', 'Click - Event', 'Search Retailer Button clicked']); 
} 
```

# linux - 通过命令行显示 Ubuntu Unity 的 Laucher

> ID：14483877
> 
> 赞同：0
> 
> 时间：2013-01-23T16:00:35.703
> 
> 标签：linux, bash, ubuntu-12.04, sh, ubuntu-unity

**如何通过终端显示 Ubuntu Unity 的启动器面板？**

我正在尝试将鼠标按钮绑定到此，显示启动器。“启动器”是指带有“主页按钮”的垂直面板。我想按下这个特定的鼠标按钮，它就像我按下了`<Super>`键一样；默认情况下必然会显示启动器。

我已经`xbindkeys`正确设置了。我知道我可以使用`xdotool`(or `xte`) 来模拟`<Super>`按键事件，但我不愿意这样做。我宁愿使用更直接的解决方案。但是找不到任何 Unity 的界面来执行此操作。有没有人？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T19:22:57.010

做到了：

```
xdotool key alt+F1 
```

# lucene - 优化大 Lucene 索引默默地失败

> ID：14483879
> 
> 赞同：1
> 
> 时间：2013-01-23T16:00:40.080
> 
> 标签：lucene

我有一个关于优化大 Lucene 索引的问题（现在是 197 Gb - 对你们中的某些人来说可能听起来没那么大）。我正在使用版本 2.9.4 的 Lucene，当我需要将具有 900 个段的索引优化为更少量的段（理想情况下为 1-10）时，我进入了一个状态。我仍在调用 2.9.4 中可用的 IndexWriter.optimize()，但设置合并因子以同样的方式失败。

所以，在优化我的日志一小时后（我已经设置了所有可能的日志）说优化已经完成并且任何日志文件中都没有错误。一切看起来都很好，除了索引目录中的文件仍然相同 - 没有减少或删除的文件数量被删除。我有足够的驱动器空间（300 Gb）并且没有打开阅读器或搜索器 - 索引被隔离并专注于优化。

根据索引 wirter 日志，合并线程合并段并迭代打印出从 900 到 456 的一些段数，然后突然它说它正在将所有这些段合并到 16 个段（这是我设置的一个或多个段合并到)

有谁知道会发生什么？我是否合并了太多细分？是否存在任何与操作系统相关的（Windows Server 2008）问题，例如“打开的文件处理程序太多”（我在哪里可以查看该消息）？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:25:01.937

It's not a failure. The issue is very simple - you just need to open index reader (or re-open existing one) after optimization got completed. That's it. It will replace old index files with list of new files right when you open the reader in few seconds.

# content-management-system - silverstripe 数据对象可搜索

> ID：14483880
> 
> 赞同：4
> 
> 时间：2013-01-23T16:00:44.580
> 
> 标签：content-management-system, silverstripe

我试图在默认的 SearchResult 页面中显示某些 DataObjects（新闻）。所以结果应该显示正常的页面和新闻。

在 Silverstripe 3 中是否有一种简单的方法可以实现这一点？还是建议将其完全自定义编码-我的意思是处理搜索请求并创建结果列表的自定义控制器/操作，然后我将其显示在自定义模板中？

我发现了这一点，但显然现在禁用了搜索： [https ://github.com/arambalakjian/DataObjects-as-Pages](https://github.com/arambalakjian/DataObjects-as-Pages)

谢谢和问候，弗洛里安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T21:28:02.953

我通常会在启用`FulltextSearchable`. 所以`_config.php`我会

```
FulltextSearchable::enable();
Object::add_extension('NewsStory', "FulltextSearchable('Name,Content')"); 
```

用您希望可搜索的任何内容替换*名称*和*内容。*`DBField`并且每个可搜索`DataObject`的在他们的类中都有这个来启用搜索索引（很确定这需要在启用扩展之前添加并运行 dev/build，并且只适用于 MySQL DB）。

```
static $create_table_options = array(
  'MySQLDatabase' => 'ENGINE=MyISAM'
); 
```

然后在我的`PageController`我有我的自定义*searchForm*和*结果*功能。

这是`search`返回搜索表单的函数，`$search`在模板中调用 with：

```
public function search()
{       
  if($this->request && $this->request->requestVar('Search')) {
    $searchText = $this->request->requestVar('Search');
  }else{
    $searchText = 'Search';
  }

  $f = new TextField('Search', false, $searchText);

  $fields = new FieldList(
    $f
  );
  $actions = new FieldList(
    new FormAction('results', 'Go')
  );
  $form = new Form(
    $this,
    'search',
    $fields,
    $actions
  );
  //$form->disableSecurityToken();
  $form->setFormMethod('GET');
  $form->setTemplate('SearchForm');

  return $form;
} 
```

这里是`results`处理查询的自定义函数......

```
function results($data, $form, $request)
{   
  $keyword = trim($request->requestVar('Search'));
  $keyword = Convert::raw2sql($keyword);
  $keywordHTML = htmlentities($keyword, ENT_NOQUOTES, 'UTF-8');    

  $pages = new ArrayList();
  $news = new ArrayList();

  $mode = ' IN BOOLEAN MODE';
  //$mode = ' WITH QUERY EXPANSION';
  //$mode = '';

  $siteTreeClasses = array('Page');
  $siteTreeMatch = "MATCH( Title, MenuTitle, Content, MetaTitle, MetaDescription, MetaKeywords ) AGAINST ('$keyword'$mode)
                  + MATCH( Title, MenuTitle, Content, MetaTitle, MetaDescription, MetaKeywords ) AGAINST ('$keywordHTML'$mode)";

  $newsItemMatch = "MATCH( Name, Content ) AGAINST ('$keyword'$mode)
                  + MATCH( Name, Content ) AGAINST ('$keywordHTML'$mode)";

  //Standard pages
  foreach ( $siteTreeClasses as $c )
  {
    $query = DataList::create($c)
      ->where($siteTreeMatch);
    $query = $query->dataQuery()->query();
    $query->addSelect(array('Relevance' => $siteTreeMatch));

    $records = DB::query($query->sql());
    $objects = array();
    foreach( $records as $record )
    {
      if ( in_array($record['ClassName'], $siteTreeClasses) )
        $objects[] = new $record['ClassName']($record);
    }
    $pages->merge($objects);
  }

  //news
  $query = DataList::create('NewsStory')->where($newsItemMatch);
  $query = $query->dataQuery()->query();
  $query->addSelect(array('Relevance' => $newsItemMatch));

  $records = DB::query($query->sql());
  $objects = array();
  foreach( $records as $record ) $objects[] = new $record['ClassName']($record);
  $news->merge($objects);

  //sorting results
  $pages->sort(array(
    'Relevance' => 'DESC',
    'Title' => 'ASC'
  ));      
  $news->sort(array(
    'Relevance' => 'DESC',
    'Date' => 'DESC'
  ));

  //output
  $data = array(
    'Pages' => $pages,
    'News' => $news,
    'Query' => $keyword
  ); 
  return $this->customise($data)->renderWith(array('Search','Page'));
} 
```

我添加了我想要搜索的所有*页面*`SiteTree`类并在`$siteTreeClasses`数组中扩展，并且*新闻*部分几乎可以复制到`DataObject`我需要搜索的任何其他部分。

我并不是说这是最好的解决方案，这绝对可以改进，但它对我有用，这可能是一个很好的说明点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T01:13:39.063

我已将@colymba 的解决方案改编为 silverstripe 模块：[https ://github.com/burnbright/silverstripe-pagesearch](https://github.com/burnbright/silverstripe-pagesearch)

它允许在 url 中设置页面类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T21:26:36.507

您需要大量覆盖`SearchForm->getResults()`. 它使用`Database->searchEngine()`，但那些是针对`SiteTree`和`Page`类定制的。

“正确”的解决方案是将数据输入到 Solr 或 Sphinx 等搜索引擎中。为此，我们有与 SS3 兼容的“全文搜索”模块： [https](https://github.com/silverstripe-labs/silverstripe-fulltextsearch) ://github.com/silverstripe-labs/silverstripe-fulltextsearch 这需要一些前期设置，并且只有在您可以自己托管 Solr 或准备为 SaaS 提供商付费。一旦你让它运行起来，可能性是无穷无尽的，它是一个很棒的工具！

# sql - SQL - Group By Select Query 已接近，但我需要使其更加独特

> ID：14483884
> 
> 赞同：0
> 
> 时间：2013-01-23T16:00:57.130
> 
> 标签：sql, sql-server, tsql, sql-server-2000

**更新更清晰**

SQL Sever 2000。我试图让这个查询更加独特。

查询：

```
USE MyDatabase
GO

SELECT MAX(x.provider_entry_id) as provider_entry_id,  -- this ID is the PK
     x.provider_entry_type_id, -- the entry for the specific provider type (the ID)
     x.provider_entry, -- the actual provider entry (the ID)
     x.provider_entry_visit_dt -- the date the entry was created
FROM tbl_claimant_provider_entry x
JOIN (SELECT p.provider_entry_type_id,
             p.provider_entry,
             MAX(provider_entry_visit_dt) AS max_date
        FROM tbl_claimant_provider_entry p
        WHERE provider_entry_clmnt = 4963 -- change this for you user 
        GROUP BY p.provider_entry_type_id, p.provider_entry) y ON y.provider_entry_type_id = x.provider_entry_type_id
                          AND y.max_date = x.provider_entry_visit_dt
GROUP BY x.provider_entry_type_id, x.provider_entry, x.provider_entry_visit_dt 
```

返回：

```
provider_entry_id   provider_entry_type_id  provider_entry  provider_entry_visit_dt
1052                109                     1088            2013-01-22 00:00:00.000
1051                109                     1665            2013-01-23 00:00:00.000
1049                130                     264             2013-01-01 00:00:00.000
1050                130                     1126            2013-01-02 00:00:00.000
1045                132                     NULL            2013-01-22 00:00:00.000
1047                132                     260             2013-01-22 00:00:00.000
1044                132                     1115            2013-01-10 00:00:00.000
1048                132                     1130            2013-01-22 00:00:00.000
1043                142                     1356            2013-01-10 00:00:00.000 
```

`provider_entry_type_id`我希望缩小此列表的范围，以便根据最新的仅向我显示每个唯一的实例`provider_entry_visit_dt`

所以结果将是（请记住，provider_entry_visit_dt 不需要打破平局，这只是我的一个错误）：

```
provider_entry_id   provider_entry_type_id  provider_entry  provider_entry_visit_dt
1051                109                     1665            2013-01-23 00:00:00.000
1050                130                     1126            2013-01-02 00:00:00.000
1048                132                     1130            2013-01-22 00:00:00.000
1043                142                     1356            2013-01-10 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:05:45.060

您需要从 group by 语句中删除 created_date。您可以在其上放置一个函数以将其保留在查询中（即类似于您对 provider_entry_id 的函数）。例如：

```
SELECT MAX(x.provider_entry_id) as provider_entry_id,  -- this ID is the PK
         MAX(x.created_date),
         x.provider_entry_type_id, -- the entry for the specific provider type (the ID)
         MIN(x.provider_entry) -- the actual provider entry (the ID)
    FROM tbl_claimant_provider_entry x
    JOIN (SELECT p.provider_entry_type_id,
                 p.provider_entry,
                 MAX(created_date) AS max_date
            FROM tbl_claimant_provider_entry p
            WHERE provider_entry_clmnt = 4963 -- change this for you user ID
        GROUP BY p.provider_entry_type_id, p.provider_entry) y ON y.provider_entry_type_id = x.provider_entry_type_id
                              AND y.max_date = x.created_date
GROUP BY x.provider_entry_type_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:04:38.247

我认为您需要删除外部`GROUP BY`子句

```
SELECT  x.*
FROM    tbl_claimant_provider_entry x
        INNER JOIN 
        (
            SELECT  p.provider_entry_type_id,
                    MAX(created_date) AS max_date
            FROM    tbl_claimant_provider_entry p
            WHERE   provider_entry_clmnt = 4963 -- change this for you user ID
            GROUP   BY p.provider_entry_type_id
        ) y ON  y.provider_entry_type_id = x.provider_entry_type_id AND 
                y.max_date = x.created_date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T21:59:45.010

这是有效的解决方案，感谢所有试图提供帮助的人：

```
SELECT  b.*
FROM    dbo.tbl_claimant_provider_entry AS b 
INNER JOIN
            (SELECT provider_entry_type_id, MAX(provider_entry_visit_dt) AS maxdate
                            FROM    dbo.tbl_claimant_provider_entry
                            GROUP BY provider_entry_type_id) AS m ON b.provider_entry_type_id = m.provider_entry_type_id AND b.provider_entry_visit_dt = m.maxdate
WHERE   (b.provider_entry_clmnt = 4963) 
```

# c# - DataTable / DataGridView 数据过滤器

> ID：14483885
> 
> 赞同：1
> 
> 时间：2013-01-23T16:00:58.317
> 
> 标签：c#, winforms, datagridview, datatable

当检查/未选中复选框时，我需要过滤数据绑定的DataGridView。

过滤器基于已完成/未完成的记录。

当我将数据加载到底层 DataTable 中时，我会从表中选择所有记录。

当应用程序运行时，我希望它启动时只存在未完成的记录。

当用户选中复选框时，它会切换到已完成的任务。

我已经能够使用 DataView.RowFilter() 来做到这一点，但问题是，当用户在网格中将项目标记为已完成时，它会自动将其从视图中删除。（未选中 CheckBox 的地方）。

我只希望数据在 CheckBox 被选中/未选中时进行过滤。

我想要远离的一件事是每次触发 CheckBox.checked 事件时使用特定的 SQL 语句从数据库中重新加载数据。

我想过滤内存中的数据，但仅在用户与 CheckBox 交互时过滤。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:06:01.880

您可以使用[`DataTable.Select`](http://msdn.microsoft.com/en-us/library/system.data.datatable.select.aspx)来过滤数据，而不是`DataView.RowFilter`仅在复选框检查状态更改时更新 Select 过滤器。

# ruby-on-rails - 如何存储计算两个 UI 参数的结果

> ID：14483886
> 
> 赞同：0
> 
> 时间：2013-01-23T16:00:58.730
> 
> 标签：ruby-on-rails, rest

假设我有一个`Staff`只有两个属性的模型：`name`和`hours`.

我有一个像下面这样的表格，其中`start`和`finish`是虚拟属性：

```
<%= form_for(@staff) do |f| %>
  <%= f.label :name %><br />
  <%= f.text_field :name %>
</div>
<div class="field">
  <%= f.label :start %><br />
  <%= f.text_field :start %>
<div class="field">
  <%= f.label :finish %><br />
  <%= f.text_field :finish %>
</div>
<div class="actions">
  <%= f.submit %>
</div>
<% end %> 
```

在我的数据库中，我想保存`name`and `hours`（是and`hours`之间的区别）。`finish``start`

`hours`我的问题是：在我的数据库中计算和保存的最佳方法是什么？有一种方法可以在`Staff`模型上创建方法，还是我需要在控制器`create`的操作中进行计算？`update`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:11:09.920

正确的方法是在您的模型中执行此操作并进行`before_save`或`before_create`回调。尝试这样的事情：

```
before_save :set_hours

def set_hours
  self.hours = finish - start
end 
```

希望这可以帮助。

# asp.net-mvc - 在 ASP MVC 站点中正确显示/说明 IE 的 Intranet 兼容性

> ID：14483887
> 
> 赞同：1
> 
> 时间：2013-01-23T16:01:02.113
> 
> 标签：asp.net-mvc, internet-explorer, iis, intranet

我的公司目前使用 IE 作为他们的标准浏览器（我知道......）。这导致我们刚刚发布的 ASP MVC 站点出现问题，因为大多数 IE 浏览器都设置为启用“内联网兼容模式”。这会导致某些元素的显示有点偏离。由于很难指导我们所有的员工如何关闭它，有没有办法在代码中弥补它？

# phantomjs - 输入 https url 时出现幻像崩溃

> ID：14483891
> 
> 赞同：2
> 
> 时间：2013-01-23T16:01:15.473
> 
> 标签：phantomjs

```
var page = require('webpage').create();  
page.open('https://secure2.lionair.co.id/lionairibe/OnlineBooking.aspx', function (status) {

    if (status !== 'success') {
        console.log('Unable to access network');
    } else {
        var p = page.evaluate(function () {
            return document.getElementsByTagName('html')[0].innerHTML
        });
        console.log(p);
    }
    phantom.exit();
}); 
```

我收到此错误: : PhantomJS 已崩溃。[请阅读https://github.com/ariya/phantomjs/wiki/Crash-Reporting](https://code.google.com/p/phantomjs/issues/entry)上的崩溃报告指南，并在[https://code.google.com/p/phantomjs/issues/entry](https://github.com/ariya/phantomjs/wiki/Crash-Reporting)上提交错误报告与崩溃附加转储文件：/tmp/2b2956e8-26ff-b99e-68ba0a68-26e94c38.dmp 分段错误（核心转储）

# javascript - Javascript 正则表达式

> ID：14483894
> 
> 赞同：-1
> 
> 时间：2013-01-23T16:01:35.720
> 
> 标签：javascript, regex

我需要一个匹配具有任何字母数字字符或以下标点字符 ( `.:;`) 的字符串的正则表达式（使用 Javascript），例如，至少有两个数字和两个标点字符。

匹配示例：

```
ab0.da;134fd
01.adas:112dd
.dasa;.3123aa 
```

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T16:07:55.850

尝试这个

```
^(?=(.*?\d){2,})(?=([^:;.]*[.:;]){2,}[^:;.]*$)[\w.:;]+$
 -------------- ------------------
        |                |->match further only if there are two punctuation..
        |
        |->match further only if there are atleast two digits 
```

# python - 尝试在 wx python 中设置标签时出现属性错误

> ID：14483896
> 
> 赞同：1
> 
> 时间：2013-01-23T16:01:38.283
> 
> 标签：python, live, wxwidgets

这似乎是一个简单的问题，但我很难理解为什么会出现以下错误：

```
Traceback (most recent call last):
  File "....py", line 46, in update
    self.Grob3Text.SetLabel('Grob 3:  ' + str(Grob3))
AttributeError: 'Frame' object has no attribute 'Grob3Text' 
```

运行以下脚本时：

请参见 -

![](../Images/4c581b0a362c0242d8ed54df139d36a0.png).

我了解该消息告诉我静态文本变量“Grob3Text”未在 Frame 中定义，但在我看来更新事件的定义在同一类下。我要做的就是执行 faultreport 函数并更新静态文本。我已经在另一个脚本中进行了这项工作，但无论出于何种原因，我在这里都忽略了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:03:44.110

您在 中创建了一个局部变量`Grob3Text`，`__init__`但实际上并未将其作为实例属性存储在类实例上。为此，您可以简单地执行以下操作：

```
self.Grob3Text = Grob3Text 
```

在`__init__`你创建之后`Grob3Text`。

# sql - Oracle SQL 相关子查询（在 WHERE 语句中）没有结果

> ID：14483898
> 
> 赞同：0
> 
> 时间：2013-01-23T16:01:47.403
> 
> 标签：sql, oracle, datetime, subquery, correlated-subquery

您好，感谢您的阅读，

我正在尝试使用相关子查询运行以下 SQL 查询，但它没有返回任何结果。我使用子查询只带回具有最低日期范围的结果。单独的查询和单独的子查询都可以正常工作。

有任何想法吗？我是否错误地链接了相关的子查询？

注意：相关子查询在查询的最后一行

谢谢你， Willz06jw

```
SELECT aaa."effective_time", 
       aaa."event_type_c", 
       "clarity_dep"."department_name", 
       "patient"."birth_date", 
       "patient"."pat_mrn_id", 
       "zc_ped_delivr_meth"."name", 
       "zc_ped_delivr_meth"."ped_delivr_meth_c", 
       aaa."department_id", 
       "clarity_dep"."department_id", 
       aaa."alt_event_type_c", 
       aaa."in_event_type_c" 
FROM   (("CLARITY"."clarity_adt" aaa 
         inner join "CLARITY"."clarity_dep" "CLARITY_DEP" 
                 ON aaa."department_id" = "clarity_dep"."department_id") 
        inner join "CLARITY"."patient" "PATIENT" 
                ON aaa."pat_id" = "patient"."pat_id") 
       inner join "CLARITY"."zc_ped_delivr_meth" "ZC_PED_DELIVR_METH" 
               ON "patient"."ped_delivr_meth_c" = 
                  "zc_ped_delivr_meth"."ped_delivr_meth_c" 
WHERE  ( "patient"."birth_date" >= To_date ('01-12-2012 00:00:00', 
                                            'DD-MM-YYYY HH24:MI:SS') 
         AND "patient"."birth_date" < To_date ('06-12-2012 00:00:00', 
                                      'DD-MM-YYYY HH24:MI:SS' 
                                      ) ) 
       AND ( aaa."department_id" = 236601 
              OR aaa."department_id" = 236703 
              OR aaa."department_id" = 236801 
              OR aaa."department_id" = 236901 
              OR aaa."department_id" = 237101 
              OR aaa."department_id" = 237201 ) 
       AND aaa."event_type_c" = 3 
       AND aaa."effective_time" = (SELECT Min(bbb."effective_time") 
                                   FROM   "clarity_adt" bbb 
                                   WHERE  aaa."pat_id" = bbb.pat_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:26:15.857

在不遍历整个语句的情况下，最简单的解决方案是使用该`ROW_NUMBER`函数将语句包装在 select 中以获取最低日期。

**SQL 语句 1**

```
SELECT  *
FROM    (
          SELECT ROW_NUMBER() OVER (PARTITION BY pat_id ORDER BY effective_time) AS rn,
                 aaa."effective_time", 
                 aaa."event_type_c", 
                 "clarity_dep"."department_name", 
                 "patient"."birth_date", 
                 "patient"."pat_mrn_id", 
                 "zc_ped_delivr_meth"."name", 
                 "zc_ped_delivr_meth"."ped_delivr_meth_c", 
                 aaa."department_id", 
                 "clarity_dep"."department_id", 
                 aaa."alt_event_type_c", 
                 aaa."in_event_type_c" 
          FROM   "CLARITY"."clarity_adt" aaa
                 inner join "CLARITY"."clarity_dep" "CLARITY_DEP" ON aaa."department_id" = "clarity_dep"."department_id"
                 inner join "CLARITY"."patient" "PATIENT" ON aaa."pat_id" = "patient"."pat_id"
                 inner join "CLARITY"."zc_ped_delivr_meth" "ZC_PED_DELIVR_METH" ON "patient"."ped_delivr_meth_c" = "zc_ped_delivr_meth"."ped_delivr_meth_c"
          WHERE  ( "patient"."birth_date" >= To_date ('01-12-2012 00:00:00', 'DD-MM-YYYY HH24:MI:SS') 
                 AND "patient"."birth_date" < To_date ('06-12-2012 00:00:00', 'DD-MM-YYYY HH24:MI:SS' ) ) 
                 AND ( aaa."department_id" = 236601 OR aaa."department_id" = 236703 OR aaa."department_id" = 236801 OR aaa."department_id" = 236901 OR aaa."department_id" = 237101 OR aaa."department_id" = 237201 ) 
                 AND aaa."event_type_c" = 3 
        ) q
WHERE   q.rn = 1 
```

您的陈述可以通过使用语句 io来简化*（在阅读时） 。*`IN`所有这样的`OR`陈述

**SQL 语句 2**

```
SELECT  *
FROM    (
          SELECT ROW_NUMBER() OVER (PARTITION BY pat_id ORDER BY effective_time) AS rn,
                 aaa."effective_time", 
                 aaa."event_type_c", 
                 "clarity_dep"."department_name", 
                 "patient"."birth_date", 
                 "patient"."pat_mrn_id", 
                 "zc_ped_delivr_meth"."name", 
                 "zc_ped_delivr_meth"."ped_delivr_meth_c", 
                 aaa."department_id", 
                 "clarity_dep"."department_id", 
                 aaa."alt_event_type_c", 
                 aaa."in_event_type_c" 
          FROM   "CLARITY"."clarity_adt" aaa
                 inner join "CLARITY"."clarity_dep" "CLARITY_DEP" ON aaa."department_id" = "clarity_dep"."department_id"
                 inner join "CLARITY"."patient" "PATIENT" ON aaa."pat_id" = "patient"."pat_id"
                 inner join "CLARITY"."zc_ped_delivr_meth" "ZC_PED_DELIVR_METH" ON "patient"."ped_delivr_meth_c" = "zc_ped_delivr_meth"."ped_delivr_meth_c"
          WHERE  ( "patient"."birth_date" >= To_date ('01-12-2012 00:00:00', 'DD-MM-YYYY HH24:MI:SS') 
                 AND "patient"."birth_date" < To_date ('06-12-2012 00:00:00', 'DD-MM-YYYY HH24:MI:SS' ) ) 
                 AND ( aaa."department_id" IN (236601,236703,236801,236901,237101,237201) )
                 AND aaa."event_type_c" = 3 
        ) q
WHERE   q.rn = 1 
```

最后，我什至会通过给所有表起别名并使用`WITH`语句来进一步简化它。最终结果将如下所示

**SQL 语句 3**

```
;WITH q AS (
  SELECT ROW_NUMBER() OVER (PARTITION BY pat_id ORDER BY effective_time) AS rn,
         aaa."effective_time", 
         aaa."event_type_c", 
         cd."department_name", 
         p."birth_date", 
         p."pat_mrn_id", 
         pdm."name", 
         pdm."ped_delivr_meth_c", 
         aaa."department_id", 
         cd."department_id", 
         aaa."alt_event_type_c", 
         aaa."in_event_type_c" 
  FROM   "CLARITY"."clarity_adt" aaa
         inner join "CLARITY"."clarity_dep" cd ON aaa."department_id" = cd."department_id"
         inner join "CLARITY"."patient" p ON aaa."pat_id" = p."pat_id"
         inner join "CLARITY"."zc_ped_delivr_meth" pdm ON p."ped_delivr_meth_c" = pdm."ped_delivr_meth_c"
  WHERE  p."birth_date" >= To_date ('01-12-2012 00:00:00', 'DD-MM-YYYY HH24:MI:SS'
         AND p."birth_date" < To_date ('06-12-2012 00:00:00', 'DD-MM-YYYY HH24:MI:SS' ) ) 
         AND aaa."department_id" IN (236601,236703,236801,236901,237101,237201)
         AND aaa."event_type_c" = 3 
)
SELECT  *
FROM    q
WHERE   rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:29:30.793

如果日期最早的行也与clearance_adt 上的其他条件匹配，您只会获得行。如果您想要该子集的最早记录，那么您必须将这些条件推送到子查询中。

# java - 在一个类中实现超接口和子接口（A类实现SuperInterface，SubInterface）

> ID：14483909
> 
> 赞同：17
> 
> 时间：2013-01-23T16:02:21.337
> 
> 标签：java, interface

```
interface A {

    public void doSomething();
}

interface B extends A {

    public void doSomethingElse();
}

public class AClass implements A, B {

    public void doSomething() {}

    public void doSomethingElse() {}

} 
```

为什么 Java 允许这样的声明？当通过实现子接口（B）可以实现相同的事情时，实现这两个接口有什么用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T16:06:11.877

我认为“为什么”的问题只能由 Java 设计人员来回答。

一个原因可能是它允许`extends A`在`B`不破坏任何已经碰巧实现两者的现有类的情况下进行改造。

使用此构造的另一个原因可能是让最终用户立即清楚`AClass`该类同时实现了`A`和`B`。这[在 ArrayList.java 中 List 接口的冗余实现中进行了讨论](https://stackoverflow.com/questions/13973900/redundant-implementation-of-list-interface-in-arraylist-java/13973997#13973997)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:04:54.437

这只是一种方便。跟踪接口结构是什么可能很困难，并且程序员必须全部跟踪它会很繁重。此外，不允许冗余接口也没有好处：多次实现一个接口可能是不可避免的。例如：

```
interface A { ... }
interface B extends A { ... }
interface C extends A { ... }
public class AClass implements B, C { ... } 
```

在这种情况下，A 被“实现”了两次，但这没问题。它只是意味着必须实现在、和`AClass`中声明的每个方法。`A``B``C`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T16:14:11.173

如果这是一个错误，那么向现有公共接口添加基本接口将是一个重大更改。
（如果客户端代码有一个已经实现了这两个接口的类）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T16:06:24.013

1）为什么不实施 A 两次是多余的，但不会导致混乱。

2) 接口`B`可能会改变（并且可能不再扩展`A`）。 `AClass`仍将实施`A`和`B`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-06T22:07:19.353

冗余继承声明对某些反射调用有影响。

```
interface One {}
interface Two extends One {}
static class Three implements Two {}
static class Four implements One, Two {}

public static void main(String... args) {
    Three three = new Three();
    Four four = new Four();
    System.out.println(Arrays.toString(three.getClass().getInterfaces()));  // [Two]
    System.out.println(Arrays.toString(four.getClass().getInterfaces()));  // [One, Two]
} 
```

这可能不是以某种方式设计类的理由，但表明它确实在运行时产生了影响。

# .net - ASP.NET Web API 在单个服务中同时托管 HTTPS 和 HTTP？

> ID：14483917
> 
> 赞同：6
> 
> 时间：2013-01-23T16:02:37.300
> 
> 标签：.net, asp.net-web-api

我有一个公开的自托管 ASP.NET Web API 服务，它公开了两个控制器。其中一个我希望只能通过 HTTPS 访问，而另一个我不想。这可以在单个服务中完成吗？如果是这样，你能提供一些提示吗？似乎我需要注册两个基地址，但我看不出这对于单个服务是如何可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:18:45.797

您需要创建两个 HttpServer 实例，一个用于 http，一个用于 https。我一直试图找出为什么存在这种限制，因为我知道 HttpListener 可以处理为同一个侦听器注册两者。

无论如何，如果创建两个 HttpServer 实例确实不适合您，那么您将需要查看 Katana 项目和 Microsoft.Owin.HttpListener。这确实支持多个地址，但不幸的是默认的 Katana 启动代码不支持！但是我有很好的权威，有一种方法可以在启动时自定义 HttpListener 以使其成为可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T13:49:03.497

因为 HttpListenerBase（ServiceStack.Host.HttpListener）在启动时如果不为空则不会覆盖其侦听器，因此可以在继承自 HttpListenerBase 的主机类中完成以下操作：

```
public override ServiceStackHost Start(string urlBaseNoPrefix)
{
    // Here urlBaseNoPrefix is something like "web.acme.com/app/" 
    Listener = new System.Net.HttpListener();
    Listener.Prefixes.Add("http://" + urlBaseNoPrefix);
    base.Start("https://" + urlBaseNoPrefix);
    return this;
} 
```

# scala - 我可以创建一个具有多个具有不同返回类型的动态方法的类吗？

> ID：14483923
> 
> 赞同：1
> 
> 时间：2013-01-23T16:03:05.973
> 
> 标签：scala

```
object GoodReturnType extends Dynamic {
  def applyDynamic(method: String)(args: Any*) = {
    method match {
      case "foo" => 25
      case "bar" => 14
    }
  }
} 
```

*GoodReturnType*对象的方法*applyDynamic具有**Int*返回类型。正如预期的那样，对其动态方法的调用也返回*Int*。

 ***```
scala> GoodReturnType.foo() 
res0: Int = 25 
```

如果我们尝试添加另一个具有不同返回类型的动态方法，则*applyDynamic*的返回类型将是最常见的类型（即*Any*）。和所有动态方法一样。

```
object BadReturnType extends Dynamic {
  def applyDynamic(method: String)(args: Any*) = {
    method match {
      case "foo" => 25
      case "bar" => 14
      case "baz" => "muahahaha!"
    }
  }
}

scala> BadReturnType.foo() 
res1: Any = 25 
```

是否可以有一个具有多个具有不同返回类型的动态方法的类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:24:20.810

原则上这是不可能的，因为您是基于动态信息进行调度的。因此，即使您有一个以特定方式键入的响应，调用代码也不知道从可用集合中返回了哪种类型。如果你愿意，你可以用它`Either`来明确地表达这一点（例如`Left(5)`并且`Right("muahaha")`会 return `Either[Int,String]`），但基本上你不能在经过动态调度步骤后保留你的静态类型。如果您不打算将其用作动态调度步骤，为什么不直接将方法放入？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:55:03.473

你不能。有一组固定的、预定的`Dynamic`方法，所有非静态检查的引用都映射到这些方法。JVM 不支持仅基于返回类型的方法解析，因此您必须为给定的参数签名选择单个实现

如果您还没有，请学习[SIP 17：键入 Dynamic](http://docs.scala-lang.org/sips/pending/type-dynamic.html)。***

# javascript - 为什么这个 jQuery 不能隐藏图像？

> ID：14483924
> 
> 赞同：-6
> 
> 时间：2013-01-23T16:03:08.667
> 
> 标签：javascript, jquery

jQuery：

```
$('.resume-header').hover(
        function() {
            $('resume-header img').css('display', 'none');
            $('resume-header img').attr('src', 'media/resume-icon-download.png');
            $('resume-header img').fadeIn(400);
        },
        function() {
            $('resume-header img').css('display', 'none');
            $('resume-header img').attr('src', 'media/resume-icon.png');
            $('resume-header img').fadeIn(400);
        }
    ); 
```

注意，我所有的其他 jQuery 都在工作。

这是与之对应的HTML：

```
 <div class="header">
                <div class="me-header">
                    <a href="#"><img src="media/me-icon.png" alt="Picture of Christian Selig"><br> <span class="center-text">Contact Me</span></a>
                </div>
                <div class="resume-header">
                    <a href="resume.pdf"><img src="media/resume-icon.png" alt="Resume icon" title="Click to download resume (PDF)"><br> <span class="center-text">Resume (PDF)</span></a>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:04:44.267

这是一个有效的选择器吗？

```
$('resume-header img') 
```

你错过了一个点吗？

```
$('.resume-header img') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:04:58.737

您忘记了类选择器的点

*改变*

```
 $('resume-header img').css('display', 'none'); 
```

*至*

```
 $('.resume-header img').css('display', 'none'); 
```

# c++ - fstream 未打开路径名中带有重音符号的文件

> ID：14483926
> 
> 赞同：0
> 
> 时间：2013-01-23T16:03:15.457
> 
> 标签：c++, exception, visual-studio-2012, fstream

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main(int argc, char **argv) {

    try
    {
        ifstream file;
        string simplePath = "I:/foo.conf";
        string markPath = "I:/Folder_à/foo.conf";

        file.exceptions(ifstream::failbit | ifstream::badbit | ifstream::eofbit);     

        file.open(simplePath.c_str());  // ok
        file.open(markPath.c_str());    // exception ios_base::failbit set
    }

    catch (ifstream::failure f)
    {
        cout << "Exception " << f.what() << endl;
        return 1;
    }

    return 0;
} 
```

如果文件在其路径名中有*重音符号*（例如**à**`open()` ），则该函数将引发`ios_base::failbit set`异常。

一个简单的解决方法是

```
file.exceptions(ifstream::badbit | ifstream::eofbit); // removed failbit from the mask 
```

但这不是我想要的：如果可能的话，我想将故障位设置为正常。

我正在使用 Visual Studio 2012 和 Windows 8。

# php - 字符编码 MSSQL.. ISO -> Utf-8 -> Latin-1..需要颠倒

> ID：14483931
> 
> 赞同：0
> 
> 时间：2013-01-23T16:03:30.400
> 
> 标签：php, sql, sql-server, character-encoding

我们正在尝试迁移数据库内容（使用 PHP 脚本）。

内容已复制到 CMS 中，然后写入数据库。复制的内容可以来自任何字符编码方案（例如 IS0-...-14）和任何网站。

PHP CMS 是 UTF-8，因此粘贴到文本框中的字符在 POST 时将转换为 UTF-8，然后作为 Latin-1 写入数据库（MSSQL db...db charset 和 query charset 都是 latin-1 ）。

我们正在拼命思考如何在 PHP 中扭转这种情况，或者甚至可能（得到它，使字符完全是 UTF-8）。

如果我们能得到逻辑，我们可以用 C++ 编写一个扩展，如果 PHP 不能处理它（它可能不能，mb_shite 和 iconv）。

我一直迷失在 UTF-8 4 字节字符流中（即 0-127 is..ect）。

有人有什么想法吗？

到目前为止，我们已经使用 PHP 的 ord() 函数尝试为每个 char 生成一个 Unicode/Acsii char ref（我知道 ord 返回 ASCII，但它打印超过 128 个字符编号，我认为如果它只是 ASCII 的话很奇怪，或者它可能会重复自己）。

我的想法是 latin1 将难以转换回 UTF-8，并且由于 Latin1 （ISO-...-1）中的单字节字符流而导致黑色菱形。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:10:31.940

如果`latin1`您的数据库是 8 位干净编码（它在 MySQL 中，而不是关于 MSSQL），那么您不需要做任何事情来重建 utf-8 字符串。当你把它从你的数据库中提取到 PHP 中时，你会得到你输入的相同字节，即 UTF-8。

如果您的数据库`latin1`不是8 位干净的编码，那么您的字符串将无法恢复*。*这意味着在您将 utf-8 字符串写入数据库时​​，数据库认为无效的任何字符都被删除或替换。没有任何方法可以从中恢复。

# c++-cli - 语法错误：缺少';' 在 C++ 中的 '^' 之前管理

> ID：14483934
> 
> 赞同：3
> 
> 时间：2013-01-23T16:03:39.183
> 
> 标签：c++-cli

在`my_project.h`：

```
#pragma once

#include <vcclr.h>
#include "MyManagedClass.h"

namespace my_namespace 
{
   MyManagedClass^ DoSomething(const Foo* foo);
} 
```

我有下一个错误：

```
1) error C2143: syntax error : missing ';' before '^'
2) error C4430: missing type specifier - int assumed. 
     Note: C++ does not support default-int 
```

项目已创建为`c++/cli`.

在`"MyManagedClass.h"`：

```
public ref class MyManagedClass
{
public:
System::UInt32 GetMember()
{
   return m_member;
}
private:
System::UInt32 m_member;
}; 
```

在其他文件中一切正常，但在这里，我做错了什么？

**预计到达时间：**

我已经像这样修改了函数：

```
namespace my_namespace 
{
   MyManagedClass^ DoSomething(const System::String^ str);
} 
```

它并没有解决问题，但由于某种原因，如果我将返回类型更改为`void`，那么一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:15:44.157

我重新创建了您的问题，并得到了同样的错误。删除参数`const Foo* foo`（使方法 DoSomething 不带参数）删除了错误。我也尝试添加`typedef char* Foo;`，错误也消失了。

检查您的定义`Foo`，看起来这就是错误所在。

* * *

我将您的代码复制并粘贴到 Visual Studio 中，类型没有错误`MyManagedClass`。如果我们要找到错误，您需要向我们展示更多代码。

也许`MyManagedClass`在您忘记`using namespace`指令的命名空间中？

# javascript - 如何增加 Rally Kanban 列中显示的 100 张卡片的限制？

> ID：14483941
> 
> 赞同：1
> 
> 时间：2013-01-23T16:03:53.907
> 
> 标签：javascript, rally, kanban

我们使用 Rally Kanban 来显示带有自定义字段和特定迭代标记的用户故事（美国）。目前有 104 个我们符合这个标准，但看板上只有 100 个。

帮助说明有 100 个限制。

如何提高该限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:20:59.770

听起来您可能已经使用一些附加功能自定义了看板应用程序，并且正在自定义 HTML 面板中运行。凉爽的。创建 CardBoard 时，您应该能够通过传入 maxCardsPerColumn 来设置最大卡片数。

[http://developer.help.rallydev.com/card-board](http://developer.help.rallydev.com/card-board)

```
var cardboardConfig = {
    //..other configs
    maxCardsPerColumn: 200
    //..other configs
}; 
```

# sql - 在查询中包含 CTE

> ID：14483942
> 
> 赞同：0
> 
> 时间：2013-01-23T16:04:03.887
> 
> 标签：sql

我有以下代码可以完美运行。

我需要做的是使用 CTE 的结果作为查询结果中的列将其包含在查询中，但我无法找出包含它的方法。请问有什么想法吗？

我想要的实际上是这样的：

```
select a, 
b, 
c, 
d,

WITH invoicedates AS (
    SELECT 
        ROW_NUMBER() OVER (ORDER BY Inv_Date DESC) AS RowNumber,
        inv_Date, INVIT_PARTNO
    FROM Invoices join InvoiceItems on invit_invno = inv_no
    WHERE invit_partno  = stock_no and inv_canind <> 'Y' and inv_date >= DATEADD(yy, -1, getdate())
)
SELECT
   AVG(DATEDIFF(DD, O2.Inv_Date, O1.Inv_Date)) AS AverageFrequency
FROM invoicedates O1
LEFT JOIN invoicedates O2
    ON O2.RowNumber = O1.RowNumber + 1 
```

从股票哪里............

给出 abcd 结果的结果输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:16:06.023

您应该能够重新排序您使用 CTE 的方式：

```
 ; WITH invoicedates (RowNumber, inv_Date, INVIT_PARTNO) AS (
    SELECT 
        ROW_NUMBER() OVER (ORDER BY Inv_Date DESC) AS RowNumber,
        inv_Date, INVIT_PARTNO
    FROM Invoices join InvoiceItems on invit_invno = inv_no
    WHERE invit_partno  = stock_no and inv_canind <> 'Y' and inv_date >= DATEADD(yy, -1, getdate())
)

select a, 
b, 
c, 
d,
  AVG(DATEDIFF(DD, O2.Inv_Date, O1.Inv_Date)) AS AverageFrequency
FROM invoicedates O1
LEFT JOIN invoicedates O2
    ON O2.RowNumber = O1.RowNumber + 1 
```

# .net - 如何拆分其列可能包含单引号和双引号的csv

> ID：14483946
> 
> 赞同：1
> 
> 时间：2013-01-23T16:04:07.453
> 
> 标签：.net

```
favorite 
1 Given

2,1016,7/31/2008 14:22,'Geoff Dalgas',6/5/2011 22:21,http://stackoverflow.com,"Corvallis, OR",7679,351,81,b437f461b3fd27387c5d8ab47a293d35,34 
```

预期输出为

```
2
1016
7/31/2008 14:22
Geoff Dalgas
6/5/2011 22:21
http://stackoverflow.com
Corvallis, OR
7679
351
81
b437f461b3fd27387c5d8ab47a293d35
34 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:09:24.510

.NET没有任何*出色的*CSV 库，因此首先使用[CSVfix](http://code.google.com/p/csvfix/)将文件转换为同质格式（所有字段均使用双引号） ，然后使用您喜欢的任何 .NET 库，例如。[文本字段解析器](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)。

执行此操作的命令是[`csvfix echo`](http://csvfix.byethost5.com/csvfix15/csvfix.html?echo.html)

# c# - 绑定组合框以显示整数值

> ID：14483947
> 
> 赞同：2
> 
> 时间：2013-01-23T16:04:08.420
> 
> 标签：c#, wpf, binding, combobox, converter

我将 ComboBox 绑定到实体。我希望组合框在每个项目上显示不同格式的多个值（整数、字符串和日期时间值），如下所示：

```
Item#1) 100  - Description - 01/01/2013

Item#2) 101  - Description - 01/01/2013 
```

但 ComboBox 仅显示 SQL char (C# string) 值，其他为空：

```
Item#1)     - Description -

Item#2)     - Description - 
```

我必须使用转换器，是我走错了路，还是有更简单的解决方案？

在 XAML 中

```
 <UserControl.Resources>
    <CollectionViewSource x:Key="tSCHEDEViewSource" d:DesignSource="{d:DesignInstance my:TSCHEDE, CreateList=True}" />
    <DataTemplate x:Key="SchedaTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Path=KSCHEDA}" Width="60"></TextBlock>
            <TextBlock Text="{Binding Path=DArticolo}" Width="200"></TextBlock>
            <TextBlock Text=" - " Width="40"></TextBlock>
            <TextBlock Text="{Binding Path=DStorico}" Width="150"></TextBlock>
        </StackPanel>
    </DataTemplate>
</UserControl.Resources>

<ComboBox ItemTemplate="{StaticResource SchedaTemplate}" Grid.Column="1" Grid.Row="1" Height="23"   HorizontalAlignment="Left" ItemsSource="{Binding}" Margin="23,129,0,0" Name="tSCHEDEComboBox1" SelectedValuePath="KScheda" VerticalAlignment="Top" Width="393">
        <ComboBox.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel />
            </ItemsPanelTemplate>
        </ComboBox.ItemsPanel>
    </ComboBox> 
```

.edmx 模型

```
<EntityType Name="TSCHEDE">
      <Key>
        <PropertyRef Name="KSCHEDA" />
      </Key>
      <Property Name="KSCHEDA" Type="int" Nullable="false" />
      <Property Name="KLINEA" Type="int" Nullable="false" />
      <Property Name="DSCHEDA" Type="char" MaxLength="30" />
      <Property Name="DSTORICO" Type="datetime" />
      <Property Name="FINSMAN" Type="char" MaxLength="1" />
      <Property Name="DNOTE" Type="char" MaxLength="255" />
      <Property Name="FCANC" Type="char" MaxLength="1" />
      <Property Name="DArticolo" Type="char" MaxLength="60" />
      <Property Name="FFIGLIA" Type="char" MaxLength="1" />
    </EntityType> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:12:24.237

我认为你有区分大小写的问题。绑定时，您必须完全重写变量的名称。

试试这个：

```
<UserControl.Resources>
    <CollectionViewSource x:Key="tSCHEDEViewSource" d:DesignSource="{d:DesignInstance my:TSCHEDE, CreateList=True}" />
    <DataTemplate x:Key="SchedaTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Path=KSCHEDA}" Width="60"></TextBlock>
            <TextBlock Text="{Binding Path=DARTICOLO" Width="200"></TextBlock>
            <TextBlock Text=" - " Width="40"></TextBlock>
            <TextBlock Text="{Binding Path=DSTORICO}" Width="150"></TextBlock>
        </StackPanel>
    </DataTemplate>
</UserControl.Resources> 
```

如果`SelectedValuePath`您也有错误的变量，请将其更改为`SelectedValuePath="KSCHEDA"`.

# c# - 在窗体中迭代所有控件及其相关控件的通用递归方法

> ID：14483948
> 
> 赞同：0
> 
> 时间：2013-01-23T16:04:13.190
> 
> 标签：c#, winforms, controls, toolstrip

是否有任何通用递归方法可以在 Windows 窗体中迭代所有控件（包括工具条及其项目、绑定导航器及其项目...）？（其中一些不是从 Control 类继承的）或者至少迭代工具条及其项目、绑定导航器及其项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:04:05.130

您将在这里遇到障碍，因为`ToolStrip`使用`Items`而不是`Controls`，并且`ToolStripItem`不继承自`Control`. 两者都`ToolStripItem`继承`Control`自`Component`，所以充其量你可以得到一个`IEnumerable<Component>`.

您可以使用以下扩展方法完成此操作：

```
public static class ComponentExtensions
{
    public static IEnumerable<Component> GetAllComponents(this Component component)
    {
        IEnumerable<Component> components;
        if (component is ToolStrip) components = ((ToolStrip)component).Items.Cast<Component>();
        else if (component is Control) components = ((Control)component).Controls.Cast<Component>();
        else components = Enumerable.Empty<Component>();    //  figure out what you want to do here
        return components.Concat(components.SelectMany(x => x.GetAllComponents()));
    }
} 
```

在 Windows 窗体上，您可以`foreach`循环处理所有这些组件：

```
foreach (Component component in this.GetAllComponents())
{
    //    Do something with component...
} 
```

不幸的是，您将进行大量手动类型检查和强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:31:19.347

在这种情况下，我通常会这样做：

首先定义一个接受 Control 作为参数的委托：

```
public delegate void DoSomethingWithControl(Control c); 
```

然后实现一个方法，将此委托作为第一个参数，并将递归执行它的控件作为第二个参数。此方法首先执行委托，然后在控件的 Controls 集合上循环以递归调用自身。这是有效的，因为 Controls 是在 Control 中定义的，并为简单的控件返回一个空集合，例如：

```
public void RecursivelyDoOnControls(DoSomethingWithControl aDel, Control aCtrl)
{
    aDel(aCtrl);
    foreach (Control c in aCtrl.Controls)
    {
        RecursivelyDoOnControls(aDel, c);
    }
} 
```

现在您可以将要为每个控件执行的代码放在一个方法中，并通过委托在 Form 上调用它：

```
private void DoStg(Control c)
{
    // whatever you want
}

RecursivelyDoOnControls(new DoSomethingWithControl(DoStg), yourForm); 
```

**编辑：**

由于您也在处理 ToolStripItems，因此您可以定义委托来处理通用对象，然后编写递归方法的不同重载。即是这样的：

```
public delegate void DoSomethingWithObject(Object o);

public void RecursivelyDo(DoSomethingWithObject aDel, Control aCtrl)
{
    aDel(aCtrl);
    foreach (Control c in aCtrl.Controls)
    {
        RecursivelyDoOnControls(aDel, c);
    }
}

public void RecursivelyDo(DoSomethingWithObject aDel, ToolStrip anItem)
{
    aDel(anItem);
    foreach (ToolstripItem c in anItem.Items)
    {
        RecursivelyDo(aDel, c);
    }
}

public void RecursivelyDo(DoSomethingWithObject aDel, ToolStripDropDownButton anItem)
{
    aDel(anItem);
    foreach (ToolStripItem c in anItem.DropDownItems)
    {
        RecursivelyDo(aDel, c);
    }
}

//and so on 
```

# gcc - make clean 后给出错误

> ID：14483949
> 
> 赞同：0
> 
> 时间：2013-01-23T16:04:13.423
> 
> 标签：gcc, makefile, dependencies, gnu-make

虽然 Make 工作正常，但默认情况下它只编译那些已更改的文件，即使我运行`make all`. 它说像`Nothing to Do`。

我需要编译所有文件的一种情况是当我更改在多个`.c`文件中访问的头文件中的某些内容时。但是在我再次打开任何`.c`文件之前，make 无法识别它。`save & quit`

Makefile 内容可以在这篇文章中看到：

[关于 Makefile 的问题 - 什么是“$+”&这里调用的 .c 文件/依赖项在哪里？](https://stackoverflow.com/questions/14431581/questions-about-makefile-what-is-where-are-c-files-dependencies-called)

虽然这也是一个问题，但我想在这里讨论的实际问题是不同的。

为了编译所有文件我所做的是我运行`make clean`它确实删除了所有目标文件然后我`make`再次运行但这次它给出了一个错误： -

```
 ....
 mec/gen_crc32table > mec/crc32table.h
 mec/gen_crc32table: 1: mec/gen_crc32table: Syntax error: end of file unexpected    
 (expecting ")")
 make: *** [mec/crc32table.h] Error 2 
```

我检查了内容，`crc32table.h`但文件为空。`crc32table.h`因此，我从以前的代码备份中复制，现在它成功运行。现在我`make clean`再次运行并“制作”以检查它，但这次它工作正常。

不知这里有什么玄机？

我猜这些台词正在做一些我无法理解的事情？请帮助我。

```
crc32.o: mec/crc32table.h mec/crc32.c
$(CC) -o $@ -c -I. $(CFLAGS) mec/crc32.c

mec/crc32table.h: mec/gen_crc32table
mec/gen_crc32table > mec/crc32table.h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:34:15.173

问题是这个片段：

```
mec/crc32table.h: mec/gen_crc32table
    mec/gen_crc32table > mec/crc32table.h 
```

问问自己“如果`gen_crc32table`命令因错误退出会发生什么？” 停止（好）但留下腐败`crc32table.h`（坏）。两种选择：（i）重新编写`gen_crc32table`，使其接受`-o`参数；(ii) 骗局。

（一世）

```
mec/crc32table.h: mec/gen_crc32table
    mec/gen_crc32table -o mec/crc32table.h 
```

(二)

```
mec/crc32table.h: mec/gen_crc32table
    mec/gen_crc32table >temp-file-with-an-obscure-name
    mv temp-file-with-an-obscure-name $@ 
```

如果错误`mv`不会发生。`gen_crc32table`

# ajax - Firefox CORS 跨域资源共享 飞行前调试

> ID：14483951
> 
> 赞同：1
> 
> 时间：2013-01-23T16:04:22.377
> 
> 标签：ajax, firefox, cross-domain, cors, same-origin-policy

我试图让 Firefox 允许我为来自应用程序端口的数据创建 XmlHttpRequest。

我可以看到初始发送触发了一个 OPTIONS 消息，我使用 NetMon 捕获了这个，我可以看到 HTTP 字段......

```
OPTIONS /any.htm HTTP/1.1
Host: www.mysite.co.uk:10090
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-gb,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Origin: http://www.mysite.co.uk
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
Connection: keep-alive
Pragma: no-cache  
Cache-Control: no-cache 
```

我对此做出了回应，告诉 FireFox 继续前进并将 XHR 请求中的数据发送给我......

```
HTTP/1.1 200 OK
Access-Control-Allow-Methods: POST,-GET,-OPTIONS
Access-Control-Allow-Origin: *
Access-Control-Max-Age: 172800000
Server: Kawasu-OrderSub
Date: Wed, 23 Jan 2013 15:00:50 GMT 
```

但是 POST 从未发送过，我认为这意味着 FireFox 对 200 OK 响应不满意。POST 发送 Content-Type 为“application/json”的数据

我有 FireBug 并且 Net 选项卡有 XHR 按钮，但这只会在飞行前检查通过后显示 XHR。

主要问题：如何查看（和调试）FireFox 对服务器响应的不满意之处？

非常有义务提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:31:58.373

您需要包含`Access-Control-Allow-Headers: content-type`响应标头。这是因为请求有`Access-Control-Request-Headers: content-type`标头，而这个值需要包含在响应中。

# javascript - 打开带有预填充 HTML 的窗口

> ID：14483953
> 
> 赞同：3
> 
> 时间：2013-01-23T16:04:26.437
> 
> 标签：javascript, html

对不起，奇怪的标题，我不知道如何表达这个问题。基本上，我想知道是否可以打开一个新窗口并从前端用 HTML 填充它，而不是编写实际路由、数据库调用等。（是的，超级懒惰。）沿着这些思路思考......

```
var html = '<!DOCTYPE html><body><h1>Y HALO THAR</h1></body>'

window.open(html); 
```

我只是在这里许愿吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:12:28.747

**编辑**此答案不再有效，因为实施了阻止某些URI的[安全功能。](https://blog.mozilla.org/security/2017/11/27/blocking-top-level-navigations-data-urls-firefox-58/)`data:`

请参阅[打开新选项卡/窗口并向其写入内容？](https://stackoverflow.com/questions/11965087/open-a-new-tab-window-and-write-something-to-it/49019549#49019549)工作答案

可以选择使用[dataurl](https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) ...

```
window.open('data:text/html,<!DOCTYPE html><body><h1>Y HALO THAR</h1></body>'); 
```

以下 Web 浏览器当前支持数据 URI：

*   Firefox 和所有使用 Mozilla Foundation 的 Gecko 渲染引擎的浏览器
*   Safari、Chrome 和其他基于 WebKit 的浏览器
*   歌剧
*   征服者
*   Internet Explorer 8+（有某些限制）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T16:13:00.710

您需要做的第一件事是让弹出窗口有一个变量 -

```
var popup = window.open('blankPage.html');
var html = '<!DOCTYPE html><body><h1>Y HALO THAR</h1></body>';

popup.document.write(html); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-12T17:19:12.577

建议执行以下操作

> ```
> window.open('data:text/html,<!DOCTYPE html><body><h1>Y HALO THAR</h1></body>'); 
> ```

由于“数据：”津贴的折旧，不再适用于 Chrome。

[https://developers.google.com/web/updates/2017/03/chrome-58-deprecations#remove_content-initiated_top_frame_navigations_to_data_urls](https://developers.google.com/web/updates/2017/03/chrome-58-deprecations#remove_content-initiated_top_frame_navigations_to_data_urls)

如果您以前使用过这个，您的代码现在将打开一个空白窗口。

# arrays - 在scala中比较两个数组清单后进行转换

> ID：14483957
> 
> 赞同：1
> 
> 时间：2013-01-23T16:04:41.710
> 
> 标签：arrays, scala, casting, manifest

我有一些问题将我的对象投射到`Variable[A]`哪里`A <: Array[_]`

我创建了一个函数来比较`manifest`数据并将其转换为 Array 到好的类型。

我的对象`Variable[A]`将 a 存储`Manifest[A]`到 def`'type'`

我制作了一个现有软件的插件，所以不是我`Variable`用好的类型来实例化它。

原型对象和类：

```
object Prototype {
  def apply[T](n: String)(implicit t: Manifest[T]) = new Prototype[T] {
    val name = n
    val `type` = t
  }
}

trait Prototype[T] {
  def name: String
  def `type`: Manifest[T]
} 
```

变量对象和类：

```
object Variable {
  def apply[T](p: Prototype[T], v: T) = new Variable[T] {
    val prototype = p
    val value = v
  }
}

trait Variable[T] {
  def prototype: Prototype[T]
  def value: T
} 
```

我的班级使用：

```
class XYDataReader[A <: Array[_]](var data: Iterable[Variable[A]]) {

    def get[T](variable: Variable[A])(implicit m: Manifest[T]): Option[T] = {
        if (variable.prototype.`type` <:< m) {
          Some(variable.value.asInstanceOf[T])
        } else {
          None
        } 
}
} 
```

当我实例化用于比较的变量对象时，我可能有一个错误，所以我也给出了实例化的代码：

```
val v:List[Any] = List[Any](1.2,2,3)
val p = Prototype[Array[Any]]("col1")
val myVariable = Variable(p, v.toArray(ClassTag(p.`type`.runtimeClass))) 
```

我不明白为什么当我调用`get[Array[Double]](myVariable)`where `myVariable.value`contains an时模式匹配失败`Array[Double]`

当我`println()`两个清单时：

*   变量数组类型：`Array[double]`
*   米型：`Array[Double]`

似乎`Array[Double]`不是`Array[double]`，我该如何解决/投射这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:48:01.580

这开始是一个评论，因为它不是一个答案，但它太大并且需要格式化（加上我的浏览器选项卡的自动重新加载导致它第一次丢失......）

所以...对于初学者来说，您的代码片段不完整和/或不正确。可能存在有效的导入，这可能会改变该代码的含义。其次，如图所示，它不会编译，因为看起来是正式的类型参数，`A`没有绑定。因此，除非您有一个`A`不会编译的实际类型。

其次，`Double`可能是模棱两可的。两者都有`scala.Double`，`java.lang.Double`而且它们是不同的。Scala 为您自动装箱和取消装箱原始类型，通常在它们用于实例化泛型方法的类型参数时（并且不使用专门化）。其结果`Array[scala.Double]`是与 不同`Array[java.lang.Double]`。Scala 将在可能的情况下创建原始类型`Array[java.lang.Double]`的数组，但显式地是一个盒装双精度浮点数组。

例如：

```
scala> val d1: scala.Double = 123.456
d1: Double = 123.456

scala> val d2: java.lang.Double = 234.567
d2: Double = 234.567

scala> d1.getClass
res25: Class[Double] = double

scala> d2.getClass
res26: Class[_ <: Double] = class java.lang.Double

scala> val ad1: Array[scala.Double] = Array(123.456, 234.567)
ad1: Array[Double] = Array(123.456, 234.567)

scala> val ad2: Array[java.lang.Double] = Array(234.567, 345.678)
ad2: Array[Double] = Array(234.567, 345.678)

scala> ad1.getClass
res27: Class[_ <: Array[Double]] = class [D

scala> ad2.getClass
res28: Class[_ <: Array[Double]] = class [Ljava.lang.Double; 
```

因此，如果您愿意，请填写您的示例代码中缺少的详细信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:38:17.090

最后，在同事方法的帮助下递归地 unArrayify Array，我解决了我的运行时类型具体化问题。`Array[double]`现在我可以比较with之间的相等性`Array[Double]`。

```
 // Convert unknow A en Array[T], so you need to call get with Type :
  // example : get[Array[Double](myVariable)
  // return an Array[Double] only if it's possible for this Variable, else it return None
  def get[T](variable: Variable[A])(implicit m: Manifest[T]): Option[T] = {
    if (ClassUtils.assignable(variable.prototype.`type`.runtimeClass, m.runtimeClass)) {
      val casted = variable.prototype.`type`.runtimeClass.cast(variable.value)
      Some(casted.asInstanceOf[T])
    } else {
      None
    } 
```

我希望这些方法可以帮助其他人:)

你可以在这里看到帮助方法`ClassUtils.assignable`：

[https://gist.github.com/4686167](https://gist.github.com/4686167)

并在源伪造项目上：

[https://forge.iscpif.fr/projects/openmole/repository/revisions/master/entry/core/openmole/misc/org.openmole.misc.tools/src/main/scala/org/openmole/misc/tools/ obj/ClassUtils.scala](https://forge.iscpif.fr/projects/openmole/repository/revisions/master/entry/core/openmole/misc/org.openmole.misc.tools/src/main/scala/org/openmole/misc/tools/obj/ClassUtils.scala)

# android - 如何在切换标签时保留标签的活动历史记录

> ID：14483959
> 
> 赞同：1
> 
> 时间：2013-01-23T16:04:42.923
> 
> 标签：android, android-activity, tabactivity, android-tabactivity

在我的应用程序中，我有`TabActivity`, 和 3 个选项卡。每个选项卡都有一些按钮，可以更改当前的选项卡视图。我的意思是当我单击按钮时，它会更改当前选项卡中的活动，但是当我要转到第二个选项卡并返回到第一个选项卡时，选项卡正在重新创建。我需要保持 Tab 不变。这个怎么做？

我也没有使用`fragments`，因为它需要最低 API 级别 11

提前致谢

# ruby-on-rails - Rails 4.0 强参数嵌套属性，其键指向哈希

> ID：14483963
> 
> 赞同：35
> 
> 时间：2013-01-23T16:04:58.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-4, strong-parameters

我在玩 Rails 4.x beta 并试图让嵌套属性与carrierwave一起使用。不知道我在做什么是正确的方向。在四处搜索之后，最终查看了 rails 源和强大的参数，我找到了以下注释。

> ```
> # Note that if you use +permit+ in a key that points to a hash,
> # it won't allow all the hash. You also need to specify which
> # attributes inside the hash should be whitelisted. 
> ```

[https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/strong_parameters.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/strong_parameters.rb)

所以它说你必须指定has中的每一个属性，我尝试了以下方法：

帕拉姆的例子：

```
{"utf8"=>"✓",
 "authenticity_token"=>"Tm54+v9DYdBtWJ7qPERWzdEBkWnDQfuAQrfT9UE8VD=",
 "screenshot"=>{
   "title"=>"afs",
   "assets_attributes"=>{
     "0"=>{
       "filename"=>#<ActionDispatch::Http::UploadedFile:0x00000004edbe40
                      @tempfile=#<File:/tmp/RackMultipart20130123-18328-navggd>,
                      @original_filename="EK000005.JPG",
                      @content_type="image/jpeg",
                      @headers="Content-Disposition: form-data; name=\"screenshot[assets_attributes][0][filename]\"; filename=\"EK000005.JPG\"\r\nContent-Type: image/jpeg\r\n">
     }
   }
 },
 "commit"=>"Create Screenshot"} 
```

控制器

```
def screenshot_params
  params.require(:screenshot).permit(:title,
    :assets_attributes => [:filename => [:@tempfile,:@original_filename,:@content_type,:@headers] 
```

以上不是“工作”（它没有触发载波）但是当使用我发现的标准嵌套示例时，我不再收到错误（未经允许的参数：文件名）：

```
def screenshot_params
  params.require(:screenshot).permit(:title, assets_attributes: :filename) 
```

如果有人可以提供帮助，那就太好了。我找不到一个嵌套了指向哈希的键的示例。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-23T18:31:51.093

我的另一个答案大多是错误的 - 新答案。

在您的参数散列中， :filename 不与另一个散列相关联，它与 ActiveDispatch::Http::UploadedFile 对象相关联。您的最后一行代码：

```
def screenshot_params
  params.require(:screenshot).permit(:title, assets_attributes: :filename) 
```

实际上是正确的，但是，不允许使用 filename 属性，因为它不是允许的[标量类型](https://github.com/rails/rails/blob/16e0c8816c4c8a9fb5292278bf5753b026c1105c/actionpack/lib/action_controller/metal/strong_parameters.rb#L362)之一。如果你打开一个控制台，并以这个形状初始化一个 params 对象：

```
params = ActionController::Parameters.new screenshot: { title: "afa", assets_attributes: {"0" => {filename: 'a string'}}} 
```

然后对你的最后一行运行它：

```
p = params.require(:screenshot).permit(:title, assets_attributes: :filename)
# => {"title" => "afa", "assets_attributes"=>{"0"=>{"filename"=>"abc"}}} 
```

但是，如果您对上传文件的 params 哈希执行相同操作，您会得到

```
upload = ActionDispatch::Http::UplaodedFile.new tempfile: StringIO.new("abc"), filename: "abc"
params = ActionController::Parameters.new screenshot: { title: "afa", assets_attributes: {"0" => {filename: upload}}}
p = params.require(:screenshot).permit(:title, assets_attributes: :filename)

# => {"title" => "afa", "assets_attributes"=>{"0"=>{}}} 
```

因此，可能值得向 Rails 提交错误或拉取请求，同时，您将不得不使用原始`params`对象直接访问文件名参数：

```
params[:screenshot][:assets_attributes]["0"][:filename] 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-13T03:31:01.050

因此，您正在处理 has_many 表单和强参数。

这是 params 哈希的重要部分：

```
"assets_attributes"=>{
    "0"=>{
          "filename"=>#<ActionDispatch::Http::UploadedFile:0x00000004edbe40
                  @tempfile=#<File:/tmp/RackMultipart20130123-18328-navggd>,
                  @original_filename="EK000005.JPG",
                  @content_type="image/jpeg",
                  @headers="Content-Disposition: form-data; name=\"screenshot[assets_attributes][0][filename]\"; filename=\"EK000005.JPG\"\r\nContent-Type: image/jpeg\r\n">
 }
} 
```

当你定义这样的强参数时......

```
permit(:assets_attributes => [:filename]) 
```

事情破裂了，因为rails期望`filename`它得到这个`"0"`

这个数字是什么意思？这是`id`您通过表单提交的资产。现在最初你可能认为你必须做类似的事情

```
permit(:assets_attributes => [:id => [:filename]]) 
```

这看起来像遵循其他强参数语法约定。然而，无论好坏，它们都让事情变得更容易了，你所要做的就是：

```
permit(:assets_attributes => [:asset_id, :filename]) 
```

**编辑**- 正如[jpwynn](https://stackoverflow.com/users/597992/jpwynn)在评论中指出的那样，在 Rails 4.2.4+ 中，正确的语法是

```
permit(:assets_attributes => [:id, :filename]) 
```

这应该有效。

当您使用强大的参数碰壁时，最好的办法是在您的控制器中添加一个调试器并进行测试。`params.require(:something).permit(:other_things)`只是一个方法链，因此您可以在完整的参数哈希上尝试不同的东西，直到找到有效的方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-17T09:09:32.783

尝试

```
def screenshot_params
  params.require(:screenshot).permit(:title, :assets_attributes => [:filename, :id, :screenshot_id])
end 
```

大约一个月前我遇到了这个问题，一些搜索发现了这个解决方案。它正在添加解决问题的 :id 或 :screenshot_id （或两者，我不记得了）。不过，这在我的代码中有效。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-25T21:00:03.143

实际上有一种方法可以将所有嵌套参数列入白名单。

```
params.require(:screenshot).permit(:title).tap do |whitelisted|
  whitelisted[:assets_attributes ] = params[:screenshot][:assets_attributes ]
end 
```

与其他解决方案相比，此方法具有优势。**它允许允许深度嵌套的参数。**

而其他解决方案如：

```
params.require(:screenshot).permit(:title, :assets_attributes => [:filename, :id, :screenshot_id]) 
```

不。

* * *

来源：

[https://github.com/rails/rails/issues/9454#issuecomment-14167664](https://github.com/rails/rails/issues/9454#issuecomment-14167664)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-04T17:43:04.757

我有同样的问题，现在解决了，你要做的就是

```
params.require(:vehicle).permit(:user_id, assets_attributes: [:id, :image]). 
```

使用 pry gem 查看您的资产对象具有什么样的属性，确保有一个 id 并添加其他缺少的属性，然后应该可以正常工作。我正在使用回形针资产是我在车辆类中的嵌套对象，并且图像附件被添加到资产中。确保在模型中进行验证

```
accepts_nested_attributes_for :assets, allow_destroy: true
validates_attachment_content_type :image, content_type: /\Aimage\/.*\Z/ 
```

在您的视图中遍历资产以获取每个图像

```
<%= @vehicle.assets.size %>
    <% for asset in @vehicle.assets %>
        <%=link_to image_tag (asset.image.url(:thumb)) %>
    <% end %> 
```

如果正确，您的问题是asset_attributes 是一个数组，每个图像都有一个索引列和一个图像

您的 form_for 应该具有与此类似的内容，如果您愿意，还可以包含预览，以便上传可以查看他们的图像，使用底部代码

```
<div class="field">
    <h3>Vehicle Image Upload</h3>
    <%= f.fields_for :assets do |asset_fields| %>

        <% if asset_fields.object.new_record? %>
            <p>
                <%= asset_fields.file_field :image %>
            </p>
        <% end %>
    <% end %>
</div>

<div class="field">
    <h4>Vehicle Image</h4>
    <%= f.fields_for :assets do |asset_fields| %>

        <% unless asset_fields.object.new_record? %>
          <%= link_to image_tag(asset_fields.object.image.url(:thumb)),
                    asset_fields.object.image.url(:original)%>
          <%= asset_fields.check_box :_destroy %>
        <% end %>
    <% end %>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-02T14:03:23.903

在控制器中保存之前进行清理清理接受_nested_attributes_for 具有索引的属性。

```
before_action :sanitize_fields_params, :only => [:create, :update]

def sanitize_fields_params

    product_free_shippings_attributes = params[:product][:product_free_shippings_attributes]

    product_free_shippings_attributes.each do |index, key_value|
      params[:product][:product_free_shippings_attributes]["#{index}"][:weight] = clear_decimal(key_value[:weight])
      params[:product][:product_free_shippings_attributes]["#{index}"][:height] = clear_decimal(key_value[:height])
      params[:product][:product_free_shippings_attributes]["#{index}"][:width] = clear_decimal(key_value[:width])
      params[:product][:product_free_shippings_attributes]["#{index}"][:depth] = clear_decimal(key_value[:depth])
    end
 end

 def clear_decimal(field) 
    return (field.to_s.gsub(/[^\d]/, '').to_d / 100.to_d) unless field.blank?
  end 
```

# mysql - MySQL 错误 - “检查语法以在 '%s 附近使用”

> ID：14483969
> 
> 赞同：0
> 
> 时间：2013-01-23T16:05:09.053
> 
> 标签：mysql, sql, database

任何人都知道为什么下面的查询会产生错误

“#1064 - 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 '%s) 附近使用的正确语法”？

```
SELECT SQL_CALC_FOUND_ROWS id
FROM (
     SELECT taba.id
FROM (

SELECT alum.id
FROM cvm_education AS edu
JOIN cvm_alumni AS alum ON alum.id = edu.alumni_id
WHERE cvm_alumni.profile_status =1
AND highest_edu
IN (

SELECT name
FROM cvm_filter_educationlevels
JOIN cvm_educationlevel AS edulevels ON educationlevel_id = edulevels.id
WHERE filter_id = % s
)
) AS taba 
```

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:05:58.353

您需要引用字符串值并`LIKE`用于模式匹配

```
WHERE filter_id LIKE '% s' 
```

但如果你真的想从`% s`字面上找到，请使用`=`

```
WHERE filter_id = '% s' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:15:10.257

尝试这个：

```
 SELECT count(taba.id)
FROM (

SELECT alum.id
FROM cvm_education AS edu
JOIN cvm_alumni AS alum ON alum.id = edu.alumni_id
WHERE alum.profile_status =1
AND highest_edu
IN (

SELECT name
FROM cvm_filter_educationlevels
JOIN cvm_educationlevel AS edulevels ON educationlevel_id = edulevels.id
WHERE filter_id = 1
)
) AS taba ; 
```

[http://www.sqlfiddle.com/#!2/f8adc/15](http://www.sqlfiddle.com/#!2/f8adc/15)

两个重要的点：

1.  我不理解 SQL_CALC_FOUND_ROWS() 的使用，如果在 count() 中偶然使用它。我认为这提供了相同的预期结果。
2.  您尚未提供示例数据，因此我无法尝试 %s。我用二进制（1,0）代替了它。此外，我不知道您的确切代码，所以我根据您的查询做了一些假设。

样本数据：

```
CREATE TABLE cvm_education(
  ID int auto_increment primary key,
  alumni_id int
  );

CREATE TABLE cvm_alumni(
  ID int auto_increment primary key,
  profile_status int,
  highest_edu varchar(30)
  );

CREATE TABLE cvm_filter_educationlevels (
  ID int auto_increment primary key,
  educationlevel_id int,
  name varchar(30)
  );

CREATE TABLE cvm_educationlevel(
  ID int auto_increment primary key,
  filter_id int
  );

INSERT INTO cvm_education (alumni_id)
VALUES (10), (1), (2), (3),(5), (6),(7),(8),(9);

INSERT INTO cvm_alumni (profile_status, highest_edu)
VALUES (1, "master"), 
(0,"bachelor"), 
(1,"bachelor"), 
(0, "master"),
(1, "master"),
(0, "master"),
(1, "master"),
(1, "master"), 
(1, "master"),
(1, "master");

INSERT INTO cvm_filter_educationlevels(educationlevel_id,name)
VALUES (1, "master"), (0,"bachelor");

INSERT INTO cvm_educationlevel(filter_ID)
VALUES (1), (0), (1), (0), (0), (1),(1),(1),(1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:31:05.957

" `% s`" 是无效的语法。如果这是文字，则需要将其括在引号中：

```
WHERE filter_id = '% s' 
```

（但该修复似乎不正确。它几乎看起来好像 MySQL 语句是用 sprintf 生成的，并且打算有一个 ' `%s`' 占位符，应该用一个值替换。）

此外，语句末尾缺少右括号和别名：

```
) foo 
```

和这个：

```
WHERE cvm_alumni.profile_status = 1 
```

应该改成这样：

```
WHERE alum.profile_status = 1 
```

（表被分配了一个别名，列引用应该用别名来限定，而不是table_name）

限定所有列引用的引用也是一个好主意，包括`educationlevel_id`,`highest_edu`和`name`. （这不一定是语句的问题，除非 MySQL 抛出“模糊列”错误，但我更愿意将我的语句与添加新列时出现的任何“模糊列”错误隔离开。）

* * *

```
SELECT SQL_CALC_FOUND_ROWS id
  FROM (SELECT taba.id
          FROM (
                SELECT alum.id
                  FROM cvm_education edu
                  JOIN cvm_alumni alum
                    ON alum.id = edu.alumni_id
                 WHERE alum.profile_status = 1
                   AND `highest_edu` IN
                       (
                        SELECT `name`
                          FROM cvm_filter_educationlevels
                          JOIN cvm_educationlevel edulevels
                            ON `educationlevel_id` = edulevels.id
                         WHERE `filter_id` = '% s'
                       )
               ) taba
       ) foo 
```

* * *

# android - ArrayList 没有正确删除

> ID：14483971
> 
> 赞同：0
> 
> 时间：2013-01-23T16:05:15.763
> 
> 标签：android, arraylist

我有一个屏幕，用户在其中选择他/她想要删除的项目，然后我将他/她的选择存储到一个整数数组列表中（基于他们在 listView 上单击的位置）。

然后，我将他们想要删除的项目传递给一个函数，在该函数中，我实际上将它们从包含所有信息的哈希表中删除。但由于某种原因，它只是没有从哈希表中删除。我已经测试并查看了我用来访问数据的所有变量，它们是正确的。我不确定为什么它没有删除我告诉它的内容..

这是功能：

```
for (Entry<Integer, ArrayList<Deck>> i : listOfDecks.entrySet()) {
                    for (int p = 0; p < i.getValue().size(); p++) {
                        if (i.getValue().get(p).getTitle().equals(deckTitle)) {
                            for (int z = 0; z < deletedItems.size(); z++) {
                                listOfDecks.get(i.getKey()).get(p).getDeck().remove(deletedItems.get(z));

                            }
                        }
                    }
                } 
```

deletedItems 是一个数组列表，其中包含用户选择的内容作为他们想要删除的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:40:48.587

我看到的是您正在调用 Deck.remove(int) 所以您不是从哈希表中删除，而是从甲板中删除。

Deck 类的这个方法 remove(int) 有什么作用？

# php - 为什么 \\。平等的 \。在 preg_replace 中？

> ID：14483972
> 
> 赞同：3
> 
> 时间：2013-01-23T16:05:23.987
> 
> 标签：php, regex

在[这个奇妙问题的](https://stackoverflow.com/questions/118884/what-is-an-elegant-way-to-force-browsers-to-reload-cached-css-js-files)[最高投票答案](https://stackoverflow.com/a/118886/1128047)中，调用中使用了以下正则表达式（来自答案的函数）：`preg_replace``auto_version`

```
'{\\.([^./]+)$}' 
```

这个正则表达式的最终目标是从给定的文件名中提取文件的扩展名。但是，我很困惑为什么这个正则表达式的开头有效。即：

**为什么`\\.`匹配方式与`\.`正则表达式相同？**

前者不应该匹配（a）一个文字反斜杠，然后是（b）任何字符，而第二个匹配一个文字句点吗？[单引号字符串](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.single)的规则规定产生`\\`文字反斜杠。

考虑这个简单的例子：

```
$regex1 = '{\.([^./]+)$}';  // Variant 1 (one backslash)
$regex2 = '{\\.([^./]+)$}'; // Variant 2 (two backslashes)

$subject1 = '/css/foobar.css';   // Regular path
$subject2 = '/css/foobar\\.css'; // Literal backslash before period

echo "<pre>\n";
echo "Subject 1: $subject1\n";
echo "Subject 2: $subject2\n\n";

echo "Regex 1: $regex1\n";
echo "Regex 2: $regex2\n\n";

// Test Variant 1
echo preg_replace($regex1, "-test.\$1", $subject1) . "\n";
echo preg_replace($regex1, "-test.\$1", $subject2) . "\n\n";

// Test Variant 2
echo preg_replace($regex2, "-test.\$1", $subject1) . "\n";
echo preg_replace($regex2, "-test.\$1", $subject2) . "\n\n";
echo "</pre>\n"; 
```

输出是：

```
Subject 1: /css/foobar.css
Subject 2: /css/foobar\.css

Regex 1: {\.([^./]+)$}  <-- Output matches regex 2
Regex 2: {\.([^./]+)$}  <-- Output matches regex 1

/css/foobar-test.css
/css/foobar\-test.css

/css/foobar-test.css
/css/foobar\-test.css 
```

长话短说：**为什么要在调用中`\\.`产生与 相同的匹配结果？`preg_replace``\.`**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T16:09:26.713

考虑一下双重转义：PHP 看到`\\.`并说“好的，这真的是`\.`”。然后正则表达式引擎看到`\.`并说“好的，这意味着一个文字点”。

如果删除第一个反斜杠，PHP 会看到`\.`并说“这是一个反斜杠，后跟一个随机字符——不是单引号或反斜杠，按照[规范](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.single)——所以它仍然存在`\.`”。正则表达式引擎再次看到`\.`并给出与上面相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:18:49.387

乔恩完美正确答案的补充：

请考虑使用不同类型的引号（`"`vs `'`）。如果使用`'`，则不能包含控制字符（如换行）。通过使用可以是不同事物`"`的特殊组合键（如、等），这是可能的。所以，如果你想在你的双引号字符串中有一个实数，你需要使用. 请注意，使用单引号时，这不是必需的。`\?``?``\n``\t``\``\\`

# javascript - RaphaelJS HTML5 库：创建一个带有文本的按钮并在鼠标悬停时发光

> ID：14483975
> 
> 赞同：0
> 
> 时间：2013-01-23T16:05:27.933
> 
> 标签：javascript, html, button, raphael, glow

我正在尝试使用 Raphael JavaScript 库创建一个带有文本的按钮。我想在鼠标悬停时在按钮周围发光。我通过在矩形和文本上使用集合并在集合上应用发光来实现这一点。我尝试了两种将 mouseover 和 mouseout 方法绑定到结果按钮集的方法。在第一种情况下，如果光标到达文本，发光会保持不变，在第二种情况下，发光会消失。这是代码：

```
 // canvas
var paper = Raphael(0, 0, "100%", "100%");

// background of the first button
var bBox1 = paper.rect(100, 100, 120, 50, 10).attr({
    fill: 'darkorange',
    stroke: '#3b4449',
    'stroke-width': 2
});
// text of the first button
var text1 = paper.text(bBox1.attrs.x + bBox1.attrs.width / 2, bBox1.attrs.y + bBox1.attrs.height / 2, 'Click to expand').attr({
    "font-family": "Helvetica",
    "font-size": 16
});

// set of rectangle + text = button
var button1 = paper.set().attr({
    cursor: 'pointer'
});
button1.push(bBox1);
button1.push(text1);

button1.mouseover(function (event) {
    this.oGlow = bBox1.glow({
        opacity: 0.85,
        color: 'gray',
        width: 15
    });
}).mouseout(function (event) {
    this.oGlow.remove();
});

// ********** now the second button **********
// background of the second button
var bBox2 = paper.rect(100, 200, 120, 50, 10).attr({
    fill: 'lightblue',
    stroke: '#3b4449',
    'stroke-width': 2
});
// text of the first button
var text2 = paper.text(bBox2.attrs.x + bBox2.attrs.width / 2, bBox2.attrs.y + bBox2.attrs.height / 2, 'Click to expand').attr({
    "font-family": "Helvetica",
    "font-size": 16
});

// set of rectangle + text = button
var button2 = paper.set().attr({
    cursor: 'pointer'
});
button2.push(bBox2);
button2.push(text2);

// function for the mousover event for buttons
var buttonMouseoverHandler = function (event) {
    this.oGlow = this.glow({
        opacity: 0.85,
        color: 'gray',
        width: 15
    });
}

// function for the mouseout event
var buttonMouseoutHandler = function (event) {
    this.oGlow.remove();
}

button2.mouseover(buttonMouseoverHandler);
button2.mouseout(buttonMouseoutHandler); 
```

这是一个有效的 jsfiddle 示例：http: [//jsfiddle.net/fkNhT/](http://jsfiddle.net/fkNhT/)

我完全不明白行为的区别，谁能给我一个提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:40:21.507

很简单：在第一次鼠标悬停时，您将在 rect 对象上设置发光，而不管鼠标悬停在什么上：

this.oGlow = **bBox1** .glow({...

在第二个中，您将其设置为“this”，当您将鼠标悬停在文本对象上时，它将应用于文本对象：

这个.oGlow =**这个**.glow({...

如何防止在元素的内部元素上失去悬停是关于 SO 的最常见的 Raphael 相关问题之一。有关小型项目的简单解决方案，请参见[this](https://stackoverflow.com/questions/14321786/how-to-prevent-loss-hover-in-raphael/14322953#comment19903701_14322953) ，对于较大项目的替代方案，请参[见此开放线程。](https://stackoverflow.com/questions/14384040/raphaeljs-trouble-with-ispointinside-and-catching-hover-events)

# php - 将 xml 提要及其数据转换为工作变量和数组 PHP

> ID：14483980
> 
> 赞同：1
> 
> 时间：2013-01-23T16:05:37.807
> 
> 标签：php, arrays, variables, simplexml

我有一个 xml 数据提要，关于体育赛事，提要中有多个事件，并且多个属性包含每个事件的信息。

我使用的提要是 - [http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N](http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N)

我希望能够使用这些信息构建一个页面，所以我虽然第一步是将每个事件转换为一个数组，然后在其中包含包含信息的嵌套数组。

像这样的东西：

```
$events = array();
    $event[101] => array(
    "id" => "Logo Shirt, Red",
    "name" => "img/shirts/shirt-101.jpg",
    "url" => 18,
    "date" => "2013-03-17",
    "time" => "09:00:00",
    "participant[101]" => array(
        "name" => "Mark Webber",
        "id"212770049",
        "odds" => "4/1",
        "oddsDecimal" => "5.00"
         );
     "participant[102]" => array(
        "name" => "Sebastian Vettel",
        "id"212770048",
        "odds" => "1/7",
        "oddsDecimal" => "1.14"
         );
    ); 
```

然后进入下一个事件并将其列为`$event[102]`

我怎样才能将数据转换成这样的一组工作变量？

这也是从 xml 提要中获取我需要的数据以使用的最佳方法，还是在我需要特定数据时更好地从提要中提取它（尽管我认为这需要调用提要每一次） ？如果是这样，那将是什么语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:13:54.053

您可以使用[http://php.net/simplexml](http://php.net/simplexml)来解析 XML 文件。如果您在每个请求上调用提要，它会减慢页面速度，您可以将提要 lcoly 缓存为 XML 文件并解析该文件。

您可以根据需要设置 CRON 作业定期更新缓存文件。

# actionscript-3 - 我可以使用此代码调用我的movieclip(parent).var 吗？

> ID：14483982
> 
> 赞同：0
> 
> 时间：2013-01-23T16:05:45.233
> 
> 标签：actionscript-3, flash

我可以使用 MovieClip(parent).this["string"] 从父动画剪辑中调用变量吗

我在父影片剪辑中有一个 var target1HP、target2HP 到 target6HP。我想打电话给 target1HP

```
for (counter = 1; counter<=6; counter++) {
    if (MovieClip(parent).this["target"+counter+"HP"] == 0) {
         //do statement//
    }
} 
```

这是可能的还是我必须像这样手动进行？

```
 if (MovieClip(parent).target1HP == 0) {
         //do statement//
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:11:16.407

你可以使用这个：

```
MovieClip(parent)["target"+counter+"HP"] 
```

# sql - 如何在 SQL Server Management Studio 的查询窗口中显示选项卡？

> ID：14483991
> 
> 赞同：0
> 
> 时间：2013-01-23T16:06:04.360
> 
> 标签：sql, tabs, ssms

由于我们使用的插件（源代码控制/模式/数据比较等），SQL Server Management Studio 在我身上崩溃了，我不得不将其重置为默认值。

但是现在，每次我点击`New Query`查询窗口都会打开*而没有标签*。

如何*用*标签打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T00:31:05.233

在这里添加 Hamlet Hakobyan 的答案，这样我就可以结束这个问题了。

回答：

```
Tools\Options\Environment\General\Tabbed Documents 
```

# marklogic - 使用 cts:element-range-query 和 cts:element-attribute-range-query 得到错误结果

> ID：14483992
> 
> 赞同：0
> 
> 时间：2013-01-23T16:06:04.607
> 
> 标签：marklogic

我有以下 xml 文件

```
<data>
<element attribute="10">element1</element>
<element attribute="7">element2</element>
</data> 
```

我在“元素”上创建了元素范围索引，在“属性”上创建了属性范围索引，并尝试执行以下查询：

```
cts:search(collection(), cts:and-query((
 cts:element-range-query(xs:QName("element"), "=", "element1")
 cts:element-attribute-range-query(xs:QName("element"), xs:QName("attribute"), "<=", 7)

))) 
```

现在它给了我上面的片段作为结果，但实际上“element1”的属性是 10，大于 7，因此相应地上面的片段不应该作为结果。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T18:59:36.903

查询正在做它应该做的事情。它匹配 element=element1 和 element/@attribute<=7 的片段。对于示例 XML，这两种说法都是正确的。对于该 XML 中的同一元素，它们并非如此，但查询不能保证这一点。

这里的诀窍是记住索引指向片段。一般来说，这意味着整个文档匹配或不匹配。[http://docs.marklogic.com/guide/search-dev/count_estimate#id_63216](http://docs.marklogic.com/guide/search-dev/count_estimate#id_63216)涉及到这个话题，[http://developer.marklogic.com/blog/fragmented-thoughts](http://developer.marklogic.com/blog/fragmented-thoughts)也可能有帮助。

获得您想要的结果可能需要通过启用各种位置索引并将查询包装在`cts:element-query`. 或者您可能会重新考虑您的节点名称，以便它们对于此查询是片段唯一的。或者您可能会考虑设置片段根 - 但我认为这是最后的手段。