# StackOverflow 问答 13692000-13692999

# facebook - FB.UIServer.setLoadedNode 未定义 - SDK 更改？

> ID：13692000
> 
> 赞同：0
> 
> 时间：2012-12-03T21:26:50.460
> 
> 标签：facebook

一段时间以来，我一直在使用 FB.UIServer.setLoadedNode 方法来解决 IE9 中的问题。

在不改变我们的生产服务器上的任何东西的情况下，现在抛出以下内容：

```
Uncaught TypeError: Cannot set property 'setLoadedNode' of undefined 
```

SDK 有什么变化吗？这是FB最终修复的错误吗？

# jquery - 选中/取消选中复选框，具体取决于选中的复选框（if/else）

> ID：13692001
> 
> 赞同：1
> 
> 时间：2012-12-03T21:26:51.083
> 
> 标签：jquery, if-statement

目前我正在研究一个小的 jQuery 元素。我有 2 个主要复选框：ja 和 nee。选中其中一个框时，会打开一个子菜单，并根据您选中的主复选框（ja 或 nee）填写子菜单中的复选框。这工作正常。

在子菜单中，用户可以选择 ja 或 nee，其中包含初始单击时填充的复选框。我遇到的问题是，当用户首先将主复选框选中为“nee”，然后将子菜单中的复选框更改为“ja”时，主复选框保持在“nee”。

所以我想我可以用 if/else 语句解决这个问题，但我不知道该怎么做。我这样做是为了让所有复选框在未选中时都处于“选中”状态或无状态，它们也有类（“ja”和“no”）。

这是我现在使用的 jQuery 代码

```
$('.open_sub_ja').click(function () {
                $(this).parents('.container_vragen').find('.ja').attr('checked', this.checked);
                $(this).parents('.container_vragen').find('.nee').removeAttr('checked');
            });

            $('.open_sub_nee').click(function () {
                $(this).parents('.container_vragen').find('.ja').removeAttr('checked');
                $(this).parents('.container_vragen').find('.nee').attr('checked', this.checked);
            });

                $('.ja').click(function () {
                    $(this).parents('.antwoorden').find('.ja').attr('checked', this.checked);
                    $(this).parents('.antwoorden').find('.nee').removeAttr('checked');
                });

                $('.nee').click(function () {
                    $(this).parents('.antwoorden').find('.ja').removeAttr('checked');
                    $(this).parents('.antwoorden').find('.nee').attr('checked', this.checked);
                }); 
```

可以在这里找到一个小的 jsFiddle [http://jsfiddle.net/Macjm/](http://jsfiddle.net/Macjm/)。任何帮助都会很有帮助，因为我对 if/else 语句知之甚少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T18:55:38.063

这里有两个问题：

1.  您需要能够跟踪与子菜单的其他检查`ja`或输入相关的检查或输入。`nee``ja``nee`

2.  当计数等于子菜单或输入的数量时，您需要能够检查父级`ja`或输入。`nee``ja``nee`

一种方法是使用一些变量和一些额外的检查。

我将在`ja`这里介绍输入的情况。相同的过程用于`nee`输入。

开始在`.ja`click 函数中，我在现有代码之后添加了两个变量：

```
var _ja = $(this).parents('.submenu').find('.ja');
var _jaCount = 0; 
```

`_ja`是所有子菜单`ja`输入的 jquery 对象。`_jaCount`是一个变量，用于跟踪`ja`检查了多少输入。

然后我做这样的检查：

```
_ja.each(function(){
    if($(this).prop('checked') == true){
        _jaCount++;
    }
}); 
```

在这里，我遍历所有子菜单`ja`输入并检查它们是否被选中。如果是，我将我的 coutner 增加 1。

在此检查之后，我有以下声明：

```
if(_jaCount == _ja.length){
    $('.open_sub_ja').prop('checked',true);
    $('.open_sub_nee').prop('checked',false);
}else{
    $('.open_sub_ja').prop('checked',false);
    $('.open_sub_nee').prop('checked',false);
} 
```

这样做是检查计数是否等于`ja`子菜单中的输入量。如果是，则将 paret`ja`输入设置为选中，将父`nee`输入设置为未选中。此外，如果计数不相等，它会将两个父母都设置为未选中，因为那时您处于混合状态。如果这不是可取的，那么您只需删除 else 情况。

通过这种方式，您可以将 submeu`ja`输入状态链接到父状态。

[这是您的小提琴的修改版本。](http://jsfiddle.net/ymBG3/3/)

# php - mysql查询被缓存

> ID：13692003
> 
> 赞同：0
> 
> 时间：2012-12-03T21:27:00.487
> 
> 标签：php, mysql, mysqli

我有一个包含项目列表和添加新项目的表单的网页，当您添加项目时，它会更新列表。

现在的问题是当你添加一个项目时，页面上的列表更新需要几分钟，项目被正确插入到数据库中，如果我直接在数据库上执行 sql 语句，它会返回正确的数量项目。

现在我确定数据缓存在某处的原因是，当我可以看到列表时，我得到了另一个页面，如果我在添加项目后立即刷新它，它会正确显示，如果我等待一段时间并刷新它会显示再次更正。

我也尝试将 SQL_NO_CACHE 添加到查询中，但它没有改变任何东西。

**编辑** 忘了提到我正在使用 AJAX 进行请求，如果它有任何区别的话。

我只是尝试在不同的浏览器中打开该页面并加载相同的页面，以澄清如果我在 chrome 中添加了一个项目，新项目不会显示在 Firefox 的列表中。

我还计算了页面显示正确列表需要将近 5 分钟的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:58:28.527

您是否指示浏览器不缓存您的网页？

把它放在你的列表页面的顶部。标头告诉浏览器不要缓存呈现的 HTML 并始终请求最新的信息。

```
<?php
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
?> 
```

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:34:31.917

我发现了问题，我的网络主机使用了一种叫做 lightspeed 的东西来缓存页面以加快加载速度，我已经禁用了它，现在一切正常。

# java - Spring 3.2 资源文件加载问题

> ID：13692008
> 
> 赞同：1
> 
> 时间：2012-12-03T21:27:09.803
> 
> 标签：java, spring, maven

我有以下资源文件的spring配置，当我在eclipse环境中执行时它运行良好。但是当我将应用程序打包到 JAR 中并执行它时，它不会归档属性文件资源。

```
 <bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="locations">
        <list>
            <value>classpath:Application.properties</value>
            <value>classpath:database.properties</value>
        </list>
    </property>
</bean>

<!-- define the properties file to use -->
<util:properties id="appProperties" location="classpath:Application.properties" /> 
```

当我看到 jar 文件时，所有文件都存在。我正在使用 Maven 来构建程序集。

项目结构：

项目名称 | |--main |-- java |-- 资源

另外，我正在使用此链接（http://stackoverflow.com/questions/13615634/maven-build-assembly-with-dependencies）使用 maven 配置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:46:28.277

目前没有足够的信息来确切地知道发生了什么。但在我看来，context.xml 中存在一些混淆。首先，我建议将以上所有内容替换为

```
<context:property-placeholder location="classpath:/Application.properties, classpath:/database.properties" /> 
```

# php - 返回单个数组

> ID：13692012
> 
> 赞同：0
> 
> 时间：2012-12-03T21:27:16.930
> 
> 标签：php

我的 mysql 数据库中有一个数组，我想在屏幕上显示数组的值。该数组在**orden**内，我正在尝试使用函数 mysql_one_array($query)。我不知道我是否使用了正确的功能，或者我应该使用另一个。现在我无法看到数组的值。谢谢你的帮助。

```
<?php

$sql = 'select orden from pedido where id_pedido = "' . $ID . '"';

function mysql_one_array($sql) {
    $query  = mysql_query($sql);
    $result = mysql_fetch_array($query);
    return ($result);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:33:29.773

您必须使用 调用该函数`mysql_one_array( $sql )`。正如您的代码一样，该函数仅被定义。

```
<?php

$sql = 'select orden from pedido where id_pedido = "' . $ID . '"';
$arr = mysql_one_array($sql);
var_dump($arr); # or any other way of printing

function mysql_one_array($sql) {
    $query  = mysql_query($sql);
    $result = mysql_fetch_array($query);
    return ($result);
}

?> 
```

# mysql - 循环遍历数组并在数据库中搜索匹配项

> ID：13692013
> 
> 赞同：0
> 
> 时间：2012-12-03T21:27:18.083
> 
> 标签：mysql, arrays, loops

每天我都会收到一个带有电话号码的 csv 文件。我已经构建了一个从 csv 中获取数据的数组。我需要做的是遍历数组并在 mysql 数据库中搜索匹配项。您的一位大师能否如此友善地为我指明正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:35:10.857

如果可以的话，将 csv 导入到一个临时表中[`LOAD DATA`](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)，并编写一个查询，将该表与您的电话号码相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T21:41:13.423

我建议创建临时表，然后将您的号码加载到此表中，然后只需选择并加入您的表即可。您可以将手机插入程序中（一行中的多行，`INSERT`或者如果您可以访问服务器外壳，您可以执行以下脚本：

```
-- you can use TEMPORARY table in one transaction or you can just
-- make sure that the table exists and flush it before import

CREATE TABLE IF NOT EXISTS phonenumbers (
    number varchar(10) primary key
);

TRUNCATE TABLE phonenumbers;

LOAD DATA LOCAL INFILE 'numbers.csv' INTO TABLE phonenumbers;

-- here in script or call it from your program to work with data
-- also you can add  INTO OUTFILE 'output.csv' to export filtered data
-- into outfile 

SELECT addressbook.* FROM addressbook LEFT JOIN phonenumbers on (addressbook.phone = phonenumbers.number); 
```

# django - 带有 Django 的 Bootstrap 的媒体网格类？

> ID：13692014
> 
> 赞同：2
> 
> 时间：2012-12-03T21:27:19.073
> 
> 标签：django, image, twitter-bootstrap, grid, media

我对**Django**很陌生，我遇到了Twitter **Bootstrap的****媒体网格**类的问题：我只能制作普通的图像列表，而不是显示画廊。

 **我在 Windows XP 上使用带有 Django 1.4.1 的 Bootstrap 2.2.1。我将 Bootstrap 文件复制到我的项目文件夹中，并制作了一个非常简单的 HTML 模板来测试 Bootstrap 的**媒体网格**类。我的目标是从我的数据库中可视化一个简单的图像库。

**media-grid**类的正确语法在[这里](http://bootstrap.stage42.net/doc/media)定义为：

```
<ul class="media-grid">
  <li>
    <a href="#">
      <img class="thumbnail" src="http://placehold.it/330x230" alt="">
    </a>
  </li>
  <li>
    <a href="#">
      <img class="thumbnail" src="http://placehold.it/330x230" alt="">
    </a>
  </li>
</ul> 
```

但是，如果我将完全相同的代码复制并粘贴到一个简单的 HTML 模板中，并通过我的**views.py文件中的****render_to_response**命令加载它，则生成的显示页面仅包含一个正常的图像列表，每行一个，正常每个图像前的点（如在每个标准列表中）。我可以在同一个项目中将 Bootstrap 的类与 Django 一起使用，这让我排除了我没有正确导入 css 文件。

 **我觉得 Django 解释页面而不介意**media-grid**的语法，并呈现图像列表。

我正在使用的简单 HTML 文件如下：

```
<!DOCTYPE html> 
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{% block title %}To be defined{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

<!-- Le styles -->
<link href="{{STATIC_URL}}css/bootstrap.css" rel="stylesheet">
<style>
  body {
      padding-top: 80px;        
      padding-bottom: 40px;     
  }
</style>
<link href="{{STATIC_URL}}css/bootstrap-responsive.css" rel="stylesheet">

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
 <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
 <script src="{{STATIC_URL}}js/jquery-1.8.1.min.js" type="text/javascript"></script>
   {% block extrahead %}
   {% endblock %}
 <script type="text/javascript">
   $(function(){
   {% block jquery %}
   {% endblock %}
   });
 </script>
</head>

<body>

  <ul class="media-grid">
    <li>
      <a href="#">
        <img class="thumbnail" src="http://placehold.it/330x230" alt="">
      </a>
    </li>
    <li>
      <a href="#">
        <img class="thumbnail" src="http://placehold.it/330x230" alt="">
      </a>
    </li>
  </ul>

</body>
</html> 
```

我试图以不同的方式写下来，并在网上寻找了 2 天的解决方案，但没有成功。如果您知道为什么此代码可能无法正常工作，请告诉我。

提前感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:22:03.023

如果您使用的 Bootstrap 版本高于 v1.4，则“媒体网格”组件已重命名为“缩略图”。

[http://twitter.github.com/bootstrap/components.html#thumbnails](http://twitter.github.com/bootstrap/components.html#thumbnails)****

# linq - 如何使用带有 lambda 表达式的连接重写此 LINQ？

> ID：13692015
> 
> 赞同：8
> 
> 时间：2012-12-03T21:27:21.157
> 
> 标签：linq, join, lambda

似乎大多数 LINQ 都是用 lambda 表达式编写的。我如何使用 lambda 重写这个 linq，有点混淆样式（尤其是连接）？

```
var responses =
            from c in questionRepository.GetReponses()
            join o in questionRepository.GetQuestions() on
            c.QuestionID equals o.QuestionID
            where c.UserID == 9999
            orderby o.DisplayOrder
       select new { o.QuestionText, c.AnswerValue }; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T21:36:09.327

我更喜欢 Joins 的“LINQ 语法”，因为我认为它看起来更简洁。

无论如何，这里是如何将 LINQ 连接转换为“Lambda 表达式”连接。

翻译：

```
from a in AA
join b in BB on
a.Y equals b.Y
select new {a, b} 
```

是：

```
AA.Join(                 // L
  BB,                    // R
  a => a.Y, b => b.Y,    // L -> join value, R -> join value
  (a, b) => new {a, b})  // L+R result 
```

其他 LINQ 关键字的转换要简单得多（例如`OrderBy(u => u.DisplayOrder)`，只是用`.`. “链接在一起” - 试一试！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-03T21:42:03.767

```
var responses = questionRepository.GetReponses()
                   .Join(questionRepository.GetQuestions(), 
                         c => c.QuestionID,
                         o => o.QuestionID,
                         (c, o) => new {c, o})
                   .Where(x => x.c.UserID == 99999)
                   .OrderBy(x => x.o.DisplayOrder)
                   .Select(x => new {x.o.QuestionText, x.c.AnswerValue}); 
```

# javascript - jQuery选择器没有抓取元素

> ID：13692018
> 
> 赞同：-3
> 
> 时间：2012-12-03T21:27:35.197
> 
> 标签：javascript, jquery

我正在尝试一个相对简单的 jQuery 选择器，类似于我之前做过数百次的选择器，例如：

```
$('.fail_vid') 
```

但是，不是像我期望的那样返回元素，即

```
<div class="fail_vid"></div> 
```

它吐出类似的东西

```
<div>, prevObject: jQuery.fn.jQuery.init[1], context: #document, selector: ".fail_vid" 
```

这是怎么回事？我从来没有见过这样的事情，也不知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:30:12.247

你得到的输出是一个 jQuery 对象，作为 Chrome 的输出（我认为是 23）。关联的元素存储为数组索引。所以任何没有钥匙的东西都是元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T21:44:29.487

您看到的输出只是`$('.fail_vid')`语句返回的 jQuery 对象的表示。

如果您想要实际的 DOM 元素，请使用以下[`.get()`](http://api.jquery.com/get/)方法检索它：

```
$('.fail_vid').get(0) 
```

您还可以直接访问元素数组，如下所示：

```
$('.fail_vid')[0] 
```

这只会检索您的选择器选择的*第一个DOM 元素。*如果您的选择器选择*了多个*DOM 元素，则可以在更高的索引处检索后续元素。您还可以通过不带任何参数的调用一次检索*所有*元素，作为一个数组。`.get()`

*相关问题：[如何从 JQuery 选择器中获取 DOM 元素](https://stackoverflow.com/questions/1677880/how-to-get-a-dom-element-from-a-jquery-selector)*

* * *

为确保仅在加载所有 DOM 元素后执行脚本，您可以在文档末尾包含脚本，或使用[**$(document).ready()**](http://docs.jquery.com/Tutorials:Introducing_$%28document%29.ready%28%29)。

# google-maps - 我无法使用 setMap(null) 或 setVisible(false) 清除标记

> ID：13692020
> 
> 赞同：0
> 
> 时间：2012-12-03T21:27:42.000
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

本质上，我想让用户打开一张地图，在信息窗口中创建一个具有融合表形式的标记，然后让用户提交表单，然后关闭标记。

我要处理的第一个问题是，在“点击”事件期间，似乎创建了 2 个标记/信息窗口。（可以拖动顶部市场以查看其下方还有另一个市场。）我不知道为什么。

但更大的问题是我不确定如何关闭用户创建的现有标记/信息窗口。

这是有关如何向地图添加标记的代码：

```
 // click listenrer that places a marker
     google.maps.event.addListener(map, 'click', function(event) { 
              placeMarker(event.latLng);
        });

      function placeMarker(location) {
          var newmarker = new google.maps.Marker({
         position: location,
       draggable: true,
        map: map,
     });
     var infowindow2 = new google.maps.InfoWindow({
          content: '<iframe width=500 height=300 scrolling=yes frameborder=no src=https://docs.google.com/spreadsheet/embeddedform?formkey=dGdMZjg1T2duck55UjVHNGx2MHRlN0E6MQ&entry_0=Test1&entry_1='+ location.lat() +','+ location.lng() +'&entry_2=test3%22></iframe>' 
        });

    infowindow2.open(map,newmarker);
    } 
```

这是无法清除标记的代码：

```
 // doesn't seem to work... 
    //I thought this is all that is needed for a market to disappear.  Neither setMap(null) or setVisible(false) works.  It doesn't appear that this listener is even triggered upon a double click.  
     google.maps.event.addListener(marker, "dblclick", function() {
        newmarker.setMap(null);
        marker.setVisible(false);
    }); 
```

我使用了一个 'dblclick' 监听器来测试使用两个 'click' 监听器是否是问题所在。但据我所知，双击也没有任何反应。

对此的任何帮助或指导将不胜感激。

[在此处输入链接描述](http://jsfiddle.net/witold/JCzwK/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:10:33.030

您的代码确实存在多个问题，并且解决您指出的问题还不够，但这是您的问题：

您的“dblclick”事件仅被添加到未定义的值“标记”中。“dblclick”侦听器应该移动到您的 placeMarker 函数中，并且应该更改为如下所示：

```
google.maps.event.addListener(newmarker, "dblclick", function() {
    alert('I clicked the map.');
    this.setMap(null);
    this.setVisible(false);
}); 
```

编辑：

还有一个问题，如果您单击一次地图，则会创建两个标记。因此，即使进行了上述修复，您仍然需要双击两次才能删除标记。这是因为您的初始化函数被调用了两次：一次来自 body-onload，一次来自 google maps domEvent 用于 window-onload。

这是一个解决了两个问题的jsfiddle：

[http://jsfiddle.net/vdmmJ/](http://jsfiddle.net/vdmmJ/)

# c++ - 在文本框中显示

> ID：13692021
> 
> 赞同：1
> 
> 时间：2012-12-03T21:27:53.877
> 
> 标签：c++, visual-studio-2010

我正在尝试学习如何在 VS 中使用 Windows 窗体应用程序，但我发现了一个问题。我习惯于基于控制台的应用程序。所以问题是：

我有一个表单，我想在文本框中显示属于另一个类的函数结果，这是我想在按下按钮时执行的操作。例如，这是一个示例类：

```
#ifndef PRUEBA_H
#define PRUEBA_H
#include <string>
#include <iostream>
#include <iomanip>

using namespace std;

class Prueba
{
public:
    void show() 
    {
       cout<<"Thanks"<<endl;
    }
};

#endif 
```

这是按钮的代码：

```
#include "prueba.h"
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

       Prueba *x = new Prueba();
       textBox1->Text= System::Convert::ToString(x->show());
 } 
```

编译器给了我这个错误

```
error C2665: 'System::Convert::ToString' : none of the 37 overloads could convert all the argument types 
```

任何人都可以请帮助并发布在文本框中显示功能的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:30:11.820

```
void show() 
{
   cout<<"Thanks"<<endl;
} 
```

此函数将一些文本打印到标准输出，但不返回任何内容。

你需要让它返回一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:59:22.593

就像其他人说的那样，您需要有一个返回类型而不是打印到控制台中。

```
string show() 
{
    return "Thanks";
} 
```

但是，您还想删除转换。

```
textBox1->Text = (x->show()); 
```

如果这仍然不起作用，那么我建议您尝试使用该函数设置另一个字符串，例如：

```
string v = x->show();
textBox1->Text = v; 
```

看看编译器哪里出错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:16:39.403

我终于得到了解决方案

```
#include <msclr\marshal.h>
#include <msclr\marshal_cppstd.h>

String^ s
s = marshal_as<String^>( what you want to put in the textbox );
textBox->Text += s + Environment::NewLine; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T21:43:12.490

您需要返回一个字符串，而不仅仅是打印到标准输出。就像是 -

```
string show() 
{
   return "Thanks";
} 
```

也代替

```
System::Convert::ToString(x->show()); 
```

你可能只需要

```
x->show(); 
```

# html - 我应该在 css 中创建样式还是只为元素添加样式。更好的做法是什么？

> ID：13692022
> 
> 赞同：2
> 
> 时间：2012-12-03T21:28:11.570
> 
> 标签：html, css

好的，假设我正在编写 HTML/CSS 模板，我发现我需要创建一个具有特定颜色和文本阴影的文本。我应该在 css 文件中创建不同的样式还是只为元素添加样式？这个`<span style="color: #f2f12; text-shadow: 0 2px 0 #f1f1f1">Text</span>`还是这个`<span class="styleforthistext">Text</span>`更好的做法？如果我知道我只会将此颜色用于此文本（仅一次）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T21:29:13.183

您的 html 布局应该只包含数据。所有样式都应在单独的 css 文件中完成。这是一个很好的做法，原因有很多。

*   首先，您的代码变得更加干净和可读。
*   此外，您可以轻松地将您的样式替换为其他样式，甚至无需触摸 html。
*   您可以在多个地方重用您的类（假设您正确命名和构造它们）。
*   如果您根据语义命名类，您的代码将变得更具可读性和更易于维护。
*   等等等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:30:22.747

您应该问自己，**不同样式的文本所承载的含义是什么？**

是*强调文字*吗？也许是一个**强有力的文本**？是`<h3>title</h3>`吗？

在此基础上，创建适当的元素，并在样式表上设置样式。很少有案例证明使用该`style=`属性是合理的，这不是其中一种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:29:34.727

在 CSS 文件中使用单独的样式通常是更好的做法。这是分离关注点的原则——内容在 HTML 中，表示（样式）在 CSS 中（即不与 HTML 内联），而行为在 JavaScript 中（同样，不是在 HTML 中内联）。

# java - 使用 tynamo-security 模块在 Tapestry Web 应用程序中实现身份验证功能的问题

> ID：13692024
> 
> 赞同：0
> 
> 时间：2012-12-03T21:28:13.940
> 
> 标签：java, hibernate, authentication, tapestry, tynamo

我对挂毯和 tynamo-security 模块完全陌生，需要你的帮助。

我想使用 tynamo-security 和休眠在我的网络应用程序上实现身份验证功能。我按照[此处](http://tynamo.org/tapestry-security%20guide)的说明进行操作，但这还不足以让我正常工作。

到目前为止，我已经实现了一个用户实体及其 dao：

```
package com.example.tynamo.entities;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

import org.apache.tapestry5.beaneditor.NonVisual;
import org.apache.tapestry5.beaneditor.Validate;

@Entity
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @NonVisual
    private Long id;

    @Validate("required")
    private String firstName;

    @Validate("required")
    private String lastName;

    @Validate("required")
    private String email;

    @Validate("required")
    private String loginName;

    @Validate("required")
    private String password;

    public User(){

    }

    public User(String firstName, String lastName, String email, String userName, String password){
        this.loginName = userName;
        this.firstName = firstName;
        this.lastName = lastName;
        this.email = email;
        this.password = password;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getLoginName() {
        return loginName;
    }

    public void setLoginName(String loginName) {
        this.loginName = loginName;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String toString(){
        return loginName + " : " + firstName + " " + lastName + " - " + email + " : " + password;
    }
}

package com.example.tynamo.dao.impl;

import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.hibernate.criterion.Criterion;
import org.hibernate.criterion.Restrictions;
import org.hibernate.exception.ConstraintViolationException;

import com.example.tynamo.dao.UserDAO;
import com.example.tynamo.entities.User;

public class UserDAOImpl implements UserDAO {

    private SessionFactory factory = new Configuration().configure().buildSessionFactory();

    public void insertUser(User user) {
        Session session = factory.openSession();
        Transaction tx = session.beginTransaction();
        try {
            System.out.println(session.save(user));
            tx.commit();
            session.close();
        } catch (ConstraintViolationException e) {
            System.out.println(e.getErrorCode());
        }
    }

    public User loadUserById(int id) {
        Session session = factory.openSession();
        User u = (User) session.load(User.class, id);
        session.close();
        return u;
    }

    public User loadUserByLoginName(String loginName) {
        Session session = factory.openSession();
        User u = (User) session.createCriteria(User.class).add(Restrictions.eq("loginName", loginName)).uniqueResult();
        session.close();
        return u;
    }

    @SuppressWarnings("unchecked")
    public List<User> loadAllUser() {
        Session session = factory.openSession();
        List<User> list = session.createCriteria(User.class).list();
        session.close();
        return list;
    }

} 
```

此外，我在 AppModule 中添加了一些行：

在活页夹方法中：

```
binder.bind(UserDAO.class, UserDAOImpl.class); 
```

[...这里](http://tynamo.org/tapestry-security%20guide)描述的方法

```
public static void contributeSecurityConfiguration(Configuration<SecurityFilterChain> configuration,
            SecurityFilterChainFactory factory) 
```

...以及将我自己的 UserRalm 添加到配置中的 addRealms 方法。

```
@Contribute(WebSecurityManager.class)
    public static void addRealms(Configuration<Realm> configuration) {
        UserRealm realm = new UserRealm();
        configuration.add(realm);
    } 
```

[我从这里](http://svn.codehaus.org/tynamo/trunk/tynamo-federatedaccounts/tynamo-federatedaccounts-core/src/test/java/org/tynamo/security/federatedaccounts/testapp/services/UserRealm.java)获取了 UserRealm 的示例类，并对其进行了如下修改

```
package com.example.tynamo.security;

import java.util.HashSet;
import java.util.Set;

import org.apache.shiro.authc.AccountException;
import org.apache.shiro.authc.AuthenticationException;
import org.apache.shiro.authc.AuthenticationInfo;
import org.apache.shiro.authc.AuthenticationToken;
import org.apache.shiro.authc.ExpiredCredentialsException;
import org.apache.shiro.authc.LockedAccountException;
import org.apache.shiro.authc.SimpleAuthenticationInfo;
import org.apache.shiro.authc.UsernamePasswordToken;
import org.apache.shiro.authc.credential.HashedCredentialsMatcher;
import org.apache.shiro.authz.AuthorizationException;
import org.apache.shiro.authz.AuthorizationInfo;
import org.apache.shiro.authz.SimpleAuthorizationInfo;
import org.apache.shiro.cache.MemoryConstrainedCacheManager;
import org.apache.shiro.crypto.hash.Sha1Hash;
import org.apache.shiro.realm.AuthorizingRealm;
import org.apache.shiro.subject.PrincipalCollection;
import org.apache.shiro.util.SimpleByteSource;
import org.apache.tapestry5.ioc.annotations.Inject;
import org.hibernate.Session;
import org.hibernate.criterion.Restrictions;

import com.example.tynamo.dao.UserDAO;
import com.example.tynamo.entities.User;

public class UserRealm extends AuthorizingRealm {

    @Inject
    UserDAO userDAO;

    public UserRealm() {
        super(new MemoryConstrainedCacheManager());
        setName("localaccounts");
        setAuthenticationTokenClass(UsernamePasswordToken.class);
        setCredentialsMatcher(new HashedCredentialsMatcher(Sha1Hash.ALGORITHM_NAME));
    }

    @Override
    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {
        if (principals == null) throw new AuthorizationException("PrincipalCollection was null, which should not happen");

        if (principals.isEmpty()) return null;

        if (principals.fromRealm(getName()).size() <= 0) return null;

        String username = (String) principals.fromRealm(getName()).iterator().next();
        if (username == null) return null;

        User user = findByUsername(username);
        // if (user == null) return null;
        // Set<String> roles = new HashSet<String>(user.getRoles().size());
        // for (Role role : user.getRoles())
            // roles.add(role.name());
        //return new SimpleAuthorizationInfo(roles);
    }

    @Override
    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException {
        UsernamePasswordToken upToken = (UsernamePasswordToken) token;

        String username = upToken.getUsername();

        // Null username is invalid
        if (username == null) { throw new AccountException("Null usernames are not allowed by this realm."); }

        User user = findByUsername(username);

        //if (user.isAccountLocked()) { throw new LockedAccountException("Account [" + username + "] is locked."); }
        //if (user.isCredentialsExpired()) {
        //  String msg = "The credentials for account [" + username + "] are expired";
        //  throw new ExpiredCredentialsException(msg);
        //}
        //return new SimpleAuthenticationInfo(username, user.getEncodedPassword(), new SimpleByteSource(user.getPasswordSalt()), getName());
        return null;
    }

    private User findByUsername(String username) {
        return userDAO.loadUserByLoginName(username);
    }
} 
```

我注释掉了还不能工作的部分。我自己实现的用户实体没有这里询问的方法，我找不到任何帮助我实现这些方法的用户界面（只是联合的）。我究竟做错了什么？有人可以帮我吗？

tynamo-security 是否也提供注册页面（等等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:26:05.493

你得到这个工作了吗？

我注意到的一件事是你自己实例化`UserRealm`了，所以`@Inject`不能在那里工作。您可以允许 Tapestry 通过 using 实例化它，也可以`configuration.addInstance(UserRealm.class)`将引用传递给`UserDAO`using 构造函数。

由于您没有提到您面临什么样的错误，因此很难回答。

# jquery - 使用 jQuery 将表单字段值发送到 PHP 未按预期工作

> ID：13692026
> 
> 赞同：-1
> 
> 时间：2012-12-03T21:28:21.910
> 
> 标签：jquery, uploader

我正在使用[jQuery 上传](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-form-data)器将图像上传到我的网站，它还将照片的名称添加到 MySQL 数据库中。照片名称添加得很好，我已经尝试调整一些代码来添加一个调用数据库的字段，但是我没有从字段`equipmentID`中提取信息，而是将信息提交到数据库字段。`equipmentID``$equipmentID`

```
<script type="text/javascript">
    $('#fileupload').fileupload({
        formData: { equipmentID: '$equipmentID' }
    });
</script> 
```

谁能告诉我，或者指出我如何从上传表单中提取设备ID 字段的内容并将提交的“$equipmentID”替换为文本字段的实际值的正确方向？我期望发生的是设备ID 字段的内容来替换$equipmentID，而不仅仅是将$equipmentID 发布到数据库中。

很抱歉含糊不清，我习惯了 PHP，所以我根本没有使用 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:32:33.210

'$equipmentID' 正如你所拥有的，是一个字符串文字。如果您想获取表单字段的值，它将是这样的：

```
$('#equipmentID').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:21:21.577

最后我自己解决了

```
<script type="text/javascript">
$('#fileupload').bind('fileuploadsubmit', function (e, data) {

    var input = $('#equipmentID');
   data.formData = {equipmentID: input.val()};
   if (!data.formData.equipmentID) {
     input.focus();
     return false;
   }
 });
  </script> 
```

# angularjs - 尝试使用 ng-repeat 创建 ng-model 绑定

> ID：13692028
> 
> 赞同：2
> 
> 时间：2012-12-03T21:28:55.600
> 
> 标签：angularjs

我有以下功能：

```
var app = angular.module('Hubbub-FrontEnd', []);

app.controller('DataEntryCtrl', function($scope) {
   $scope.entryFields = [
       {pHolder:'ID goes here',ngmodel:"kid"},
       {pHolder:'Description goes here',ngmodel:"desc"},
       {pHolder:'Drop Dead Date goes here',ngmodel:"ddd"}
   ];
}); 
```

这在下面被调用`html`。

```
<div ng-controller="DataEntryCtrl">
      <span ng-repeat="entryField in entryFields">
            <input type="text" ng-model="{{entryField.ngmodel}}" placeholder=
"{{entryField.pHolder}}">
   </span>
   <button>Add</button>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:50:27.503

使用 ngModel 指令进行双向数据绑定时，您不需要双花括号`{{}}`。双花括号告诉 angular 评估表达式并打印输出，注意你必须如何使用它们来显示占位符的内容

这是工作版本

```
<span ng-repeat="entryField in entryFields">
        <input type="text" 
               ng-model="entryField.ngmodel" 
               placeholder="{{entryField.pHolder}}">
</span> 
```

[http://jsfiddle.net/jaimem/A8PkC/1/](http://jsfiddle.net/jaimem/A8PkC/1/)

# asp.net-mvc - 将 SessionAuthenticationModule 与 Asp.Net WIF 一起使用时，Base-64 非法字符串

> ID：13692029
> 
> 赞同：3
> 
> 时间：2012-12-03T21:28:58.267
> 
> 标签：asp.net-mvc, authentication, oauth

在我的应用程序中，我让用户登录到保管箱，当该过程完成后，它使用 SessionAuthenticationModule 将声明写入 fedauth cookie。

```
 var sam = FederatedAuthentication.SessionAuthenticationModule;
    if (sam != null)
    {

       // (ClaimsPrincipal.Current.Identity as ClaimsIdentity).AddClaim(new Claim("Provider", "Dropbox"));

        var cp = new ClaimsPrincipal(new ClaimsIdentity(new List<Claim> { new Claim("Provider", "Dropbox") }, "OAuth"));

        var transformer = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager;
        if (transformer != null)
        {

            cp = transformer.Authenticate(String.Empty, cp);
        }
        var token = new SessionSecurityToken(cp);
        sam.WriteSessionTokenToCookie(token);                       

    } 
```

声明已写入，当提出新请求时，用户已通过身份验证并且声明正在运行。

我的问题是，如果用户通过导航到以下登录 URL 之一开始使用 Azure ACS 进行身份验证过程：

```
https://s-innovations.accesscontrol.windows.net/v2/metadata/identityProviders.js?protocol=wsfederation&realm=http://77.75.160.102:2638/&version=1.0&callback=ShowSigninPage 
```

当 STS 返回我的站点时，我得到一个异常：

```
The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or an illegal character among the padding characters.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.FormatException: The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or an illegal character among the padding characters. 

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[FormatException: The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or an illegal character among the padding characters. ]
   System.Convert.FromBase64_Decode(Char* startInputPtr, Int32 inputLength, Byte* startDestPtr, Int32 destLength) +10545309
   System.Convert.FromBase64CharPtr(Char* inputPtr, Int32 inputLength) +130
   System.Convert.FromBase64String(String s) +41
   System.IdentityModel.Services.ChunkedCookieHandler.ReadInternal(String name, HttpCookieCollection requestCookies) +350
   System.IdentityModel.Services.ChunkedCookieHandler.ReadCore(String name, HttpContext context) +45
   System.IdentityModel.Services.CookieHandler.Read(String name, HttpContext context) +74
   System.IdentityModel.Services.SessionAuthenticationModule.TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +126
   System.IdentityModel.Services.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +116
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69 
```

如果过程相反，请先通过 Azure ACS 登录，然后再通过保管箱登录。一切正常。Dropbox 声明正在覆盖 Azure ACS 声明。这让我认为我在开始使用 SAM 编写 cookie 的代码片段中有错误？

**更新**

我刚刚发现，当不使用 MachineKeySessionSecurityTokenHandler 时它可以工作。

```
 <securityTokenHandlers>
    <!--<add type="System.IdentityModel.Services.Tokens.MachineKeySessionSecurityTokenHandler, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />-->
    <!--<remove type="System.IdentityModel.Tokens.SessionSecurityTokenHandler, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />-->
  </securityTokenHandlers> 
```

知道如何更改我的代码以支持 MachineKeySessionSecurityTokenHandler。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:18:44.693

也许cookie被截断了。你使用的是什么浏览器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T20:15:49.527

使用`SessionAuthenticationModule`创建您的`SessionSecurityToken`：

```
var sam = FederatedAuthentication.SessionAuthenticationModule;

var token = sam.CreateSessionSecurityToken(
    claimsPrincipal, 
    "application-context", 
    DateTime.UtcNow, 
    DateTime.UtcNow.AddHours(1), 
    true);

sam.WriteSessionTokenToCookie(token); 
```

# sql-server - 从 netbeans 连接到 SQL 数据库的字符串或缓冲区长度无效

> ID：13692030
> 
> 赞同：1
> 
> 时间：2012-12-03T21:29:06.107
> 
> 标签：sql-server, netbeans, odbc

我正在尝试从 Netbeans 7.2.1 连接到 SQL Server 数据库，但收到此错误：[Microsoft][ODBC Driver Manager] Invalid string or buffer length

我的连接似乎有问题，但我找不到什么。数据源经过测试并且可以正常工作。

```
 public static void main(String[] args) {

    try{
        Connection con = DriverManager.getConnection("jdbc:odbc:school");
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("select 'hello'");
        while(rs.next()) {
            System.out.println(rs.getString(0));
    }
    }catch(Exception e){
        e.printStackTrace();
    } 
```

有谁知道为什么？感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:09:39.607

也许使用本机 JDBC 驱动程序会更好？您可以从以下网址下载：http: [//www.microsoft.com/en-us/download/details.aspx?displaylang=en &id=21599](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=21599)

还有一些信息在 Java8 ODBC 桥中将被删除：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7176225](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7176225)

# c# - 无法让正则表达式在 MVC 4.0 C# 中用于多行文本框

> ID：13692031
> 
> 赞同：0
> 
> 时间：2012-12-03T21:29:09.523
> 
> 标签：c#, regex, asp.net-mvc, asp.net-mvc-4

这是我的模型

```
 [Required(ErrorMessage = "At least one 10 digit number is required.")]
    [DataType(DataType.MultilineText)]
    [RegularExpression(@"^\d{10}$", ErrorMessage = "Please enter a valid 10 digit number.")]
    public string TenDigitNumbers
    {
        get;
        set;
    } 
```

这是我的看法

```
 @Html.TextAreaFor(model => Model.TenDigitNumbers, new { @class = "MyModel", @cols = 11, @rows = 5 })
        @Html.ValidationMessageFor(model => Model.TenDigitNumbers)<br /> 
```

此正则表达式适用于输入到文本框中的一个十位数字。但是，在文本框中输入超过一个十位数字时会失败。我读过正则表达式需要打开多行。我通过在上面的模型中定义数据类型来做到这一点。所以我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:10:00.950

使用 10 位数字，您的意思是这样的：

```
 1234567890 1234567890 1234567890 1234567890 
```

在这种情况下，您需要一个能够理解这一点的表达式，例如：`^\d{10}( \d{10})*$`

如果您使用的是多行文本框，例如：`^\d{10}(\r?\n\d{10})*$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:42:56.213

不支持 MultiLine 属性..`RegularExpressionAttribute`您必须自己动手。

这个问题已经在 SO 上被问过了。不要从原作者的代码中删除。这是一个例子：[https ://stackoverflow.com/a/9689880/1517578](https://stackoverflow.com/a/9689880/1517578)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:13:08.953

这就是使用正则表达式的方法，基本上不依赖多行标志或属性，而是显式定义正则表达式以允许新行，但需要遵循相同的模式

```
 [RegularExpression(@"^\d{10}(\r?\n\d{10})*$", ErrorMessage = "Please enter a valid 10 digit number.")]
    public string TenDigitNumbers
    {
        get;
        set;
    } 
```

# c# - 关于将组合框中的字符串链接到输出数据

> ID：13692032
> 
> 赞同：0
> 
> 时间：2012-12-03T21:29:11.677
> 
> 标签：c#, winforms, visual-studio, c#-4.0, combobox

我在 Visual Studio 中有一个组合框，我在组合框中编辑了字符串以显示 5 个项目，我试图在网上查看，一旦有人单击其中一个项目，如何显示有关该项目的信息。（但是，如果没有单击任何项​​目，则将表单留空）

例如，惠而浦的冰箱，可以冷却到 1 摄氏度，售价 400 美元，24 小时内送达。

因此，一旦有人在组合框中单击“惠而浦冰箱”，它就会在表单标签/文本框上弹出

制造商：Whirlpool 最大冷却：1 摄氏度成本：400 美元交货：24 小时内

另外，我试图找出是否可以在图片框中显示冰箱的图片。但是，我还没有找到解决方案。

我非常感谢您的帮助，很抱歉让您对这个问题感到厌烦！

注意：如果您要将我链接到一个网站，如果您至少能解释一下如何做，我将不胜感激，或者对于喜欢勺子喂食勺的其他人，只需将其粘贴起来，我会想出来。再次感谢你！<:D

编辑：

我正在使用 Windows 窗体应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:50:19.270

使这更简单的一种方法是通过数据绑定。

假设您有一个设备对象：

```
public class Appliance
{
    public string Make { get; set; }
    public string ApplianceType { get; set; }
    public string Model { get; set; }
    public double Price { get; set; }
    public string Info { get; set; }

    public string ShowString
    {
        get { return String.Format("{0} {1}", Make, ApplianceType); }
    }
} 
```

并且您想将这些列表绑定到组合框。您可以定义组合框中显示的属性并将所选对象转换回类：

```
List<Appliance> appliances = new List<Appliance>();

// populate list; for example:
appliances.Add(new Appliance
{
    Make = "Whirlpool",
    ApplianceType = "Fridge",
    Model = "WP-300",
    Price = 500.00,
    Info = "Cools to 4C!"
});
appliances.Add(new Appliance
{
    Make = "Maytag",
    ApplianceType = "Dishwasher",
    Model = "MT-80A",
    Price = 400.00,
    Info = "Washes spot free!"
});

cmbApplianceList.DataSource = appliances;
cmbApplianceList.DisplayMember = "ShowString"; 
```

（`ValueMember`您还可以将其绑定到唯一属性。）

当有人在组合框中选择一个项目时，您可以执行以下操作来对选定的类进行操作：

```
cmbApplianceList_SelectedIndexChanged(object sender, EventArgs e)
{
    Appliance selectedAppliance = (Appliance)cmbApplianceList.SelectedItem;
    MessageBox.Show(selectedAppliance.Info);
} 
```

在这种情况下，一个消息框会显示`Info`所选设备的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:44:50.257

创建一个将所需值作为参数的新 Windows 窗体。

```
public partial class MyItemForm : Form
{
    public myItemForm(string item, double costs, int time, string picturepath)
    {
        InitializeComponent();
        label1.Text = item+ ": 1 Celsius Cost: $"+costs.ToString()+" Delivery: Within "+time.toString() +" hours."
        pictureBox1.ImageLocation = picturepath;
    }
} 
```

表单只接受参数，将它们设置为 LabelText。图片路径也是如此。

总的来说，你必须做这样的事情：

```
 private void ComboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
       MyItemForm itemform = new MyItemForm(ComboBox1.Text, getCosts(ComboBox1.SelectedIndex), getTime(ComboBox1.SelectedIndex), getPicturePath(ComboBox1.SelectedIndex));
       itemform.Show();
    } 
```

因此，每次用户更改 ComboBox 中的项目时，都会调用该事件。您必须自己弄清楚获取方法。

我希望它很清楚。

记住：这是一个例子！您必须自己找出正确的代码。

# c++ - C++ 调用向量类中的私有数据成员

> ID：13692038
> 
> 赞同：2
> 
> 时间：2012-12-03T21:29:45.070
> 
> 标签：c++

我正在寻找一个标准向量形式的类。我一直在编写一些带有实现集合而不是向量的类的程序，所以我有点困惑。

这是我的课：

```
class Employee
{

private:

  Struct Data
  {
unsigned Identification_Number;
// Current capacity of the set

unsigned Department_Code;
// Department Code of employee

unsigned Salary;
// Salary of employee

str Name;
// Name of employee
  } 
```

如果我想稍后调用私有数据成员，我可以执行以下操作吗？

```
vector<Employee> Example;

//Assume there's data in Example

cout << Example[0].Identification_Number;
cout << Example[3].Salary; 
```

如果不是，那么合适的容器是什么？列表列表会更好地处理这组数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:34:21.847

您按原样提供的代码是不可能的，但通过一些修改，您可以使其工作：

```
class Employee
{
public:
    unsigned GetID() const               { return Identification_Number; }
    unsigned GetDepartment() const       { return Department_Code; }
    unsigned GetSalary() const           { return Salary; }
    // Assuming you're using std::string for strings
    const std::string& GetString() const { return string; }
private:
    unsigned Identification_Number; // Current capacity of the set
    unsigned Department_Code;       // Department Code of employee
    unsigned Salary;                // Salary of employee
    string Name;                    // Name of employee
}; 
```

请注意，`Data`在这种情况下，正如您所介绍的那样，该结构是完全多余的。我刚刚将所有数据成员放在`Employee`类本身作为[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)的私有数据成员。

然后您可以通过以下方式访问它们：

```
std::vector<Employee> Example; //Assume there's data in Example
// ...
cout << Example[0].GetID();
cout << Example[3].GetSalary(); 
```

`Employee`大概您会以某种方式将各个变量设置为类中的正确值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:35:25.520

一种常见的方法是访问函数：

```
#include <iostream>

class Employee
{
public:
    void setID(unsigned id)
    {
        Identificaiton_Number = id;
    }

    unsigned getID()
    {
        return Identificaiton_Number;
    }

private:
    unsigned Identification_Number;
    // Current capacity of the set

    unsigned Department_Code;
    // Department Code of employee

    unsigned Salary;
    // Salary of employee

    str Name;
    // Name of employee
};

int main()
{
    Employee e;

    e.setID(5);
    std::cout << e.getID() << std::endl;
} 
```

有人争辩说，如果您有 getter/setter 访问器，您不妨将成员公开。其他人认为最好有 getter/setter 访问器，因为它允许您强制执行不变量/约束或更改各种实现细节。

至于访问私人成员：你不应该这样做。[这在技术上是可行的，但不要这样做。](http://bloglitb.blogspot.com/2010/07/access-to-private-members-thats-easy.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:35:56.527

假设`Struct`是一个错字。

您可以通过删除结构的名称使`Data`结构匿名。`Employee`这将允许您直接访问数据，`Example[0].Identification_Number`但是要使其正常工作，您还必须将结构公开。

另一种选择是完全删除结构并将数据直接存储为`Employee`类的成员。

第三种选择是添加`const`访问器方法以从结构中返回数据。

# asp.net - Crystal 报表不使用 Asp.net 显示数据

> ID：13692040
> 
> 赞同：0
> 
> 时间：2012-12-03T21:29:56.397
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, crystal-reports

我正在使用 Asp.net 4.0 和 Sap 水晶报告，我的问题是绑定数据集后无法在 reportViewer 上显示数据。

下面是我的 Aspx 设计器代码

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true" CodeBehind="productRepot.aspx.cs" Inherits="ProductionPlanning1.productRepot" %>

<%@ Register Assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral,    PublicKeyToken=692fbea5521e1304"
Namespace="CrystalDecisions.Web" TagPrefix="CR" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

<asp:Label ID="prdt_Label1" runat="server" Text="ProductID"></asp:Label>
<asp:TextBox ID="matrl_TextBox" runat="server"></asp:TextBox>

<asp:Button ID="rpt_Button1" runat="server" Text="PrintProduct" 
    onclick="rpt_Button1_Click"></asp:Button>
<CR:CrystalReportViewer ID="product_CrystalReportViewer1" runat="server" 
    AutoDataBind="true"></CR:CrystalReportViewer>

</asp:Content> 
```

产品报告.aspx.cs

```
 protected void rpt_Button1_Click(object sender, EventArgs e)
    {
        //DataSet2 DS2 = new DataSet2();
        //Fyp_1.Product pp = new Fyp_1.Product();
        //DS2.Tables.Add(pp.GetProduct(Convert.ToInt16(matrl_TextBox.Text)).Copy());
        //DS2.Tables[0].TableName = "Product";
        //CrystalReportProduct TR = new CrystalReportProduct();
        //TR.SetDataSource(DS2);
        //product_CrystalReportViewer1.ReportSource = TR;
        //product_CrystalReportViewer1.DataBind();

        GenerateReport();

        //DataSet ds = new DataSet();
        //BookTicket_Class BT = new BookTicket_Class();
           //ds.Tables.Add(BT.GetBookTicketReport(Convert.ToInt16(TicketNO_TextBox.Text)).Copy());
        //ds.Tables[0].TableName = "BookTicket";
        //TicketReport TR = new TicketReport();
        //TR.SetDataSource(ds);
        //CrystalReportViewer1.ReportSource = TR;
        //CrystalReportViewer1.DataBind();
    }

    protected void GenerateReport()
    {
        SqlConnection sqlConn = new SqlConnection(@"Data Source=PROZECK-   PC\R2MSSQLSERVER;Initial Catalog=FYP;Integrated Security=True");

        SqlCommand comd;
        comd = new SqlCommand();
        comd.Connection = sqlConn;
        comd.CommandType = CommandType.StoredProcedure;
        comd.CommandText = "spgetproductNEW";

        comd.Parameters.Add("@MaterialID", SqlDbType.Int);
      //  int VAL = Convert.ToInt32(matrl_TextBox.Text);
        if (matrl_TextBox.Text.Trim() != "")
            comd.Parameters[0].Value = Convert.ToInt32(matrl_TextBox.Text);
        else
            comd.Parameters[0].Value = DBNull.Value;

        SqlDataAdapter sqlAdapter = new SqlDataAdapter();
        sqlAdapter.SelectCommand = comd;

        DataSet2 DS2 = new DataSet2();
        sqlAdapter.Fill(DS2, "Product");

        //oRpt.SetDataSource(ds);

        //CrystalReportViewer1.Visible = true;

        //CrystalReportViewer1.ReportSource = oRpt;
        CrystalReportProduct TR = new CrystalReportProduct();
        TR.SetDataSource(DS2);
        product_CrystalReportViewer1.ReportSource = TR;
       // product_CrystalReportViewer1.DataBind();

    }
} 
```

下面是问题的截图给大家描述。

![在此处输入图像描述](../Images/8d86257a084bc046e19dd21a0a82107a.png)

但是当我在水晶报表设计器中检查数据时，它会显示数据 ![在此处输入图像描述](../Images/eb429ff9e24f99d7490e5903e09cdb3c.png)

我的第一个绑定数据的代码是这个然后我把它改成上面我粘贴的代码

```
 DataSet2 DS2 = new DataSet2();
        Fyp_1.Product pp = new Fyp_1.Product();
        DS2.Tables.Add(pp.GetProduct(Convert.ToInt16(matrl_TextBox.Text)).Copy());
        DS2.Tables[0].TableName = "Product";
        CrystalReportProduct TR = new CrystalReportProduct();
        TR.SetDataSource(DS2);
        product_CrystalReportViewer1.ReportSource = TR;
        product_CrystalReportViewer1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:51:32.997

我认为您只是错过了最后的电话；`product_CrystalReportViewer1.Refresh();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T09:04:17.103

您需要删除参考 crystalReport.web dll，然后添加最新版本的 crystalReport.web dll，然后它就可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-10T14:56:12.237

我也面临同样的问题终于我明白了这是解决方案

转到 webform1.aspx--> 源和这个

之后转到以下路径 C:\inetpub\wwwroot\aspnet_client\system_web\4_0_30319 在这里你看到“ Crystalreportviewers13 ”复制这个文件夹

右键单击你的项目

我们在 FILEEXPLORER 中看到了 OPEN FILE 点击它你可以在这里粘贴你的 crystalreportviewers13

之后转到文件并关闭当前解决方案成功关闭。下一个转到文件->最近的文件和项目从这里打开你的解决方案::))

另见我的评论

# java - 将类导入 JSP 时遇到问题

> ID：13692043
> 
> 赞同：0
> 
> 时间：2012-12-03T21:30:01.460
> 
> 标签：java, jsp, intellij-idea

在它的智慧[jspc](http://mojo.codehaus.org/jspc/jspc-maven-plugin/)告诉我以下关于我的一个`JSP`s

```
[ERROR] MyClassName cannot be resolved to a type 
```

确实它不存在.. 嗯.. 让我们包括它！

```
<%@ page import="com.a.b.c.MyClassName"%> 
```

好的，现在`jspc`说

```
[ERROR] Only a type can be imported. com.a.b.c.MyClassName resolves to a package 
```

这根本不是真的，但是好的，让我们尝试使用通配符

```
<%@ page import="com.a.b.c.*"%> 
```

`jspc`返回原始错误

```
[ERROR] MyClassName cannot be resolved to a type 
```

有任何想法吗？

* * *

## 更新

已确认：问题与构建时间无关。在运行时，假设所有导入都如上所示完成，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:36:10.370

看起来您的 JSP 配置没有链接到该类的 JAR/资源。

一些可以帮助的链接：

[和你一样的问题](https://stackoverflow.com/questions/1858463/java-error-only-a-type-can-be-imported-xyz-resolves-to-a-package)

[JAR 包含导致相同错误的问题](http://www.bonitasoft.org/forum/viewtopic.php?id=3381)

[Tomcat 配置问题导致...相同](http://www.myeclipseide.com/index.php?name=PNphpBB2&file=viewtopic&t=10513&start=0&postdays=0&postorder=asc&highlight=)

我希望这些链接有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:37:08.137

据我了解`com.a.b.c.MyClassName`，JSP 无法访问类加载器。

如果您有多个 Web 应用程序并且 JSP 位于一个 Web 应用程序中而该类位于另一个 Web 应用程序中，则可能会发生这种情况。

要测试它，只需将类放在应用服务器全局类路径中。

# c - printf(string) 与 printf("%s", string)

> ID：13692044
> 
> 赞同：4
> 
> 时间：2012-12-03T21:30:03.773
> 
> 标签：c, printf

我正在编写一个代理服务器，我遇到了一个奇怪的错误，我希望有人能够解释。

我收到来自客户端的 GET 请求的第一行。例如，客户端将发送请求：

```
GET http://en.wikipedia.org/wiki/Special:Random HTTP/1.0
Host: en.wikipedia.org
... 
```

我会将此请求转发给服务器。

但是，对于某些网址，我会遇到一个问题：

```
GET http://map.media6degrees.com/orbserv/curl=http%3A%2F%2Fwww.masteringemacs.org%2Farticles[trunc] HTTP/1.0 
```

我将这一行读入`char buffer[MAXLINE_LENGTH]`，它的长度足以容纳字符串。

当我打印收到的获取请求时

```
printf(buffer); 
```

打印出来的字符串是：

```
GET http://map.media6degrees.com/orbserv/hbpix?pixId=2869&curl=http0X0.0000000000015P-10220.0000000.000000www.masteringemacs.org0.000000articles0.00000020100.000000110.000000010.000000running-shells-in-emacs-overview204741995430849962482228271154502456423284733956118041206315879167624419264810411254941012469231829496710329852458403099883653794777355548418601638730167027236864.000000 HTTP/1.0 
```

似乎 %3A、%2F 等已被格式化。

当我运行时`printf("%s", buffer);`，我得到正确和预期的输出

编辑：我明白为什么会这样；我对为什么会这样发生很感兴趣。printf 是“字符串格式”的值是否来自堆栈上的某个任意区域？%3A et al 是有效的格式字符串吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T21:33:36.827

1) 如果您查看函数原型，您会看到 printf() 需要一个格式字符串和零个或多个参数。所以，严格来说，“printf(string)”是*不*正确的：

```
SYNOPSIS
       #include <stdio.h>

       int printf(const char *format, ...);
       int fprintf(FILE *stream, const char *format, ...);
       int sprintf(char *str, const char *format, ...);
       int snprintf(char *str, size_t size, const  char  *format,
       ...); 
```

2) 第一个参数*将*被解释为格式字符串，它找到的任何“%XXX”条目都将被解释为占位符。这听起来正是正在发生的事情:)

3）当然，解决方案是`printf ("%s", string)`

4）或使用`puts(string)`代替:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T21:32:10.597

切勿将输入字符串用作 printf 的格式参数。

要正常工作，它必须没有“%...”项。这些是 printf() 函数用于访问参数列表的特殊命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T21:33:06.357

在and函数族的`format`参数中被视为转义字符。你的原始输入有一些，并试图解释它们。`printf``scanf``%``printf`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T22:15:05.773

如果使用 printf(string)，则打印的字符串可能为 NULL。
这是我看到的唯一问题。 printf 函数根据提供的格式读取所有 va_list 参数，因此如果传递 NULL 指针，它可能会崩溃。使用 LLVM 4.1，我收到以下警告：

```
Format string is not a literal string (potentially insecure) 
```

这是我个人的意见：如果您确定字符串不为 NULL（可能通过断言验证它，然后在版本中删除该断言），那么您可以使用 printf(string)。如果您不完全确保字符串可能为 NULL 或无效，然后使用文字字符串。

# java - 为什么执行 ldapTemplate.authenticate() 时 baseDN 不正确？

> ID：13692048
> 
> 赞同：1
> 
> 时间：2012-12-03T21:30:11.427
> 
> 标签：java, spring, active-directory, ldap, spring-ldap

我正在尝试使用 Spring 的 LDAP 包对活动目录进行身份验证，但我不断收到错误消息，指出我指定了错误的 baseDN（Ldap 错误代码 32）：

```
org.springframework.ldap.NameNotFoundException: [LDAP: error code 32 - 0000208D: NameErr: DSID-031001E4, problem 2001 (NO_OBJECT), data 0, best match of:
   [testng]     'OU=People,DC=example,DC=com'
   [testng] ]; nested exception is javax.naming.NameNotFoundException: [LDAP: error code 32 - 0000208D: NameErr: DSID-031001E4, problem 2001 (NO_OBJECT), data 0, best match of:
   [testng]     'OU=People,DC=example,DC=com'
   [testng] ]; remaining name 'ou=people,dc=example,dc=com' 
```

奇怪的是 ldapsearch 命令使用了精确的 basedn，它可以工作：

```
ldapsearch -V -x -H ldap://ad.example.com:389 -b 'ou=people,dc=example,dc=com' -D '<user>' -w '<password>' (sAMAccountName=<user>) 
```

以下代码设置 DN（以编程方式设置 ldapContextSource）：

```
AndFilter filter = new AndFilter();
filter.and(new EqualsFilter("sAMAccountName", user));
DistinguishedName dn = new DistinguishedName("ou=people,dc=example,dc=com");
boolean in = ldapTemplate.authenticate(dn, filter.toString(), password); 
```

不确定这是否有帮助，但这些是其他字段：

```
userDN = <myusername>@example.com
url = ldap://ad.example.com:389
password = <mypassword>
baseDN = ou=people,dc=example,dc=com 
```

**编辑**：我更改了 userDN：cn=username,out=people,dc=example,dc=com 这仍然给出错误 32 代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:54:22.710

谢谢大家，你的线索确实阐明了这个问题。

首先，userDN 确实不正确。我解决了这个问题（请参阅原始帖子中的编辑）。

其次，由于我已经在ldapContextSource中指定了baseDN，所以调用authenticate()的时候就不需要再做一遍了。所以使用`DistinguishedName.EMPTY_PATH`解决了这个问题。

第三，我的 equals 过滤器不正确。当我更改 userDN 时，我忘记了`sAMAccountName`需要更改为实际登录名，而不是最初设置的 userDN。

ldapTemplate.authenticate() 现在返回 true，这意味着我已经通过了身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:34:26.957

我不认为这是一个基本的 DN 问题。我认为未找到该用户。您是否正确设置了搜索范围？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T04:28:47.970

您的 userDN 看起来很可疑。DN 应类似于 cn='username',ou='rest of path',dc=example,dc=com。我没有在您的代码中看到它的使用，只有用户。用户应该是“用户名”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T09:21:28.230

搜索中的基础对象（参数的值）与简单绑定（参数）`-b`中使用的可分辨名称不同。`-D`结果代码`32`（在搜索响应中）表示未找到基础对象（在搜索请求中）。

### 也可以看看

*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

# css - ie 9 和 10 中奇怪的文本换行问题。

> ID：13692060
> 
> 赞同：1
> 
> 时间：2012-12-03T21:31:06.833
> 
> 标签：css, internet-explorer, internet-explorer-8, internet-explorer-9

我在这里有一个有趣的问题。我有一个包含在 div 中的链接。

```
<div class="field-content news-panel-title">
    <a href="/news/">Chiquita Fresh North America Recognizes My Company with Chiquita Green Transportation Excellence Award</a>
</div> 
```

CSS如下：

```
.news-panel-title {
margin-top: 1px;
margin-left: 15px;
width: 500px;
float: left;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
font-size: 1.2em;
} 
```

我的问题是，在 IE 9 和 10 上（虽然在 IE 8 上很有趣），文本会在单词的中途换行。在 IE 8 上，至少整个单词是换行的。我尝试将 display:inline-block、宽度、文本溢出、溢出和空白直接应用于锚本身，没有额外的运气。我在这里做错了什么？部分自动换行是怎么回事？当然，chrome/firefox 上的一切都是犹太教。文档类型 html5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:47:17.817

你试过这个属性吗？

```
-ms-word-wrap: break-word; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T11:51:21.240

尝试将 CSS 更改为以下内容：

```
.news-panel-title {
margin-top: 1px;
margin-left: 15px;
width: 500px;
float: left;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
font-size: 1.2em;
word-break: break-all;
-ms-word-break: break-all;
} 
```

# php - 使用 jQuery validate 插件检查是否选择了一个或多个复选框（具有不同的名称）

> ID：13692061
> 
> 赞同：1
> 
> 时间：2012-12-03T21:31:09.560
> 
> 标签：php, javascript, jquery, validation, drupal

好的，所以我正在为 Drupal 7 站点实现 jQuery 验证插件。我遇到的问题是表单的一部分生成了多个名称略有不同的复选框。因此，如果至少选择了这些复选框中的一个，似乎没有直接的方法来检查，使用验证器插件。

[http://docs.jquery.com/Plugins/Validation#API_Documentation](http://docs.jquery.com/Plugins/Validation#API_Documentation)

更具体地说，用户必须选择一个或多个主题类别。这些复选框的名称如下：“field_themes[und][52]”、“field_themes[und][55]”、“field_themes[und][64]”和“field_themes[und][65]”。

除此之外，我们还有一个与其他复选框无关的复选框，也必须选中。那是为了同意政策等。该插件很容易覆盖该插件，但我认为它会使其他 chekcboxes 的解决方案变得更加棘手。我还有另一组复选框，但它们都使用相同的名称（Drupal 有时很痛苦）。

所以我考虑了一下，认为也许我可以使用submitHandler。所以我想出了下面...

```
$('#photo-node-form').validate({
  rules: {
    'field_first_name[und][0][value]': 'required',
    'field_last_name[und][0][value]': 'required',
    'field_email_address[und][0][email]': {
      required: true,
      email: true,
    },
    'field_product_type[und]': 'required',
    'field_terms_and_conditions[und]': 'required',
  },
  messages: {
    'field_first_name[und][0][value]': 'Please enter your first name.',
    'field_last_name[und][0][value]': 'Please enter your last name.',
    'field_email_address[und][0][email]': 'Please enter a valid email address.',
    'field_product_type[und]': 'Please select a product.',
    'field_terms_and_conditions[und]': 'You must confirm that you are 18 or older and agree to the terms and conditions.',
  },
  submitHandler: function(form) {
    //Verify that at least one theme category is selected.
    var themeCatSelected = false;

    //First we have to find all of theme
    $('#photo-node-form input:checkbox').each(function(i) {
      //Make sure this is a theme checkbox
      var name = $(this).name;
      var isTheme = false;
      stristr(name, 'field_themes[und]', isTheme);

      if (isTheme && this.checked) {
        //See if this is checked
        themeCatSelected = true;
      }
    });

    if (!themeCatSelected) {
      //Do something to alert the user that is not a popup alert
      return false; //Prevent form submittion
    }

    form.submit();
  }
});

//A JS reproduction of the PHP stristr function
function stristr (haystack, needle, bool) {
  var pos = 0;
  haystack += '';
  pos = haystack.toLowerCase().indexOf((needle + '').toLowerCase());

  if (pos == -1) {
    return false;
  }
  else {
    if (bool) {
      return haystack.substr(0, pos);
    }
    else {
      return haystack.slice(pos);
    }
  }
} 
```

所以我遇到的问题是我不确定如何在正常区域中放置错误以显示此 submitHandler 函数的错误。我什至不确定这是否是最好的方法。有没有人有任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:10:44.587

你会想要做这些事情：

1.  为您的复选框创建一个组
2.  创建自定义验证方法以确保至少检查其中一个
3.  为每个复选框添加规则到您的规则对象
4.  自定义`errorPlacement`函数以将您的错误放在适当的位置

这是 #2 的代码（请参阅[此处](http://api.jquery.com/attribute-starts-with-selector/)了解选择器的工作原理）：

```
$.validator.addMethod("custom_checks", function(value, element) {
    return $('#photo-node-form input[name^="field_themes[und]"]:checked').length > 0;
}, 'Please check one of these'); 
```

这是#1 和#3 的一部分的代码：

```
var tmpChecks = [], myRules = {
 'field_first_name[und][0][value]': 'required',
 'field_last_name[und][0][value]': 'required',
 'field_email_address[und][0][email]': {
  required: true,
  email: true,
 },
 'field_product_type[und]': 'required',
 'field_terms_and_conditions[und]': 'required'
};
$('#photo-node-form input[name^="field_themes[und]"]').each(function(){
   tmpChecks.push(this.name); //This is the start of #1
   myRules[$(this).attr("name")] = {
    custom_checks: true  
   }; //#3
}); 
```

对于#4，将其添加到您的验证对象中：

```
errorPlacement: function(error, element) {
    if (element.attr("name").match(/^field_themes\[und\]/)){
   $('#checkbox_errors').html(error);
    } else {
   error.insertAfter(element);
    }
} 
```

你最终会像这样调用 validate：

```
$("#photo-node-form").validate({
    rules: myRules,
    groups: {
        checks: tmpChecks.join(' ')   //the rest of #1
    },
    errorPlacement: function(error, element) {
        if (element.attr("name").match(/^field_themes\[und\]/)){
            //I added this span after all the textboxes, you can figure this out in a more dynamic way if you prefer               
           $('#checkbox_errors').html(error); 
        } else {
           error.insertAfter(element);
        }
    }
}); 
```

​ 这是一个更简单形式的工作示例：http: [//jsfiddle.net/ryleyb/nUbGk/1/](http://jsfiddle.net/ryleyb/nUbGk/1/)

# ruby-on-rails - 如何使用rails和mongoid查询相关模型

> ID：13692063
> 
> 赞同：0
> 
> 时间：2012-12-03T21:31:17.920
> 
> 标签：ruby-on-rails, mongoid

我有一个`User`带有相关模型的`EnrollmentInformation`模型：

```
class User
  include Mongoid::Document
  has_one :enrollment_information
end

class EnrollmentInformation
  include Mongoid::Document
  belongs_to :user
  field :type_one, :type => Boolean  
end 
```

我想找到`EnrollmentInformation`'`type_one`字段的值为 true 的所有用户。

我已经尝试了几种变体，但都没有成功。有谁知道我如何进行此查询？

```
User.includes(:enrollment_information).where(:"enrollment_information.type_one" => true) 
```

编辑：

更新的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:39:39.603

在这种情况下，我会考虑将 EnrollmentInformation 文档嵌入到用户中，而不是建立关系。尤其是因为无论如何它是一个 has_one 关系。这样，您可以执行以下操作：

```
User.where(:"enrollment_information.type_one" => true) 
```

这是嵌入一个文档的文档：http: [//mongoid.org/en/mongoid/docs/relations.html#embeds_one](http://mongoid.org/en/mongoid/docs/relations.html#embeds_one)

附带说明一下，当您包含时，这意味着您也在获取相关文档。如果您启用了身份映射，它也将被缓存在那里。where 子句只会对用户对象的属性进行操作，因此，如果您使用嵌入式，您将能够访问嵌入的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T02:25:36.233

如果您可以恢复数组，这应该可以工作 -

```
User.find(EnrollmentInformation.where(:type_one => true).collect{|enrollmentinformation| 
  enrollmentinformation.user_id}) 
```

# c# - Microsoft .NET 图表控件 - 使用矩形选择点

> ID：13692065
> 
> 赞同：0
> 
> 时间：2012-12-03T21:31:21.717
> 
> 标签：c#, .net, charts, selection, microsoft-chart-controls

使用 .NET 4.0 图表控件将具有 X、Y 值的数据绘制为**散点图。**我相信 Microsoft 图表控件是从 Dundas 获得的。

我想使用类似于用于缩放图表的矩形**的橡皮筋矩形选择图表上的点。**（当单击第一个鼠标按钮时，它会建立矩形的一个角，当鼠标移动时，半透明矩形将被重新绘制，直到释放鼠标）。

有没有办法覆盖缩放方法来创建选择而不是放大？

是否可以在现有图表上放置一个叠加层，以捕捉鼠标点击并显示一个透明的矩形？

我通常喜欢发布带有我的问题的示例代码，但在这种情况下，我不知道从哪里开始。文档、其他教程或示例代码中正确位置的链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:59:32.700

不知道您是否仍然需要帮助，我没有任何示例代码，但这几乎是我会尝试的：

1.  使用 Hit Test 捕获 MouseDown 事件的 x/y 值，并将其存储在变量中。
2.  以类似的方式捕获和存储 MouseUp 事件的 x/y 值。
3.  仍然在 MouseUp 事件中，使用带有两个 x/y 值的 LineAnnotations 绘制矩形。然后询问您的系列中的每个数据点以查看它是否位于由矩形包围的区域中，如果是，则将数据点索引添加到数组/列表中。然后，您将拥有一个拖动矩形内所有点的列表。

请注意，您可能需要在某个时候销毁线条注释，可能是在您开始拖动新矩形时。

希望这可以帮助。缺口

# mongodb - MongoDB安全写入问题

> ID：13692068
> 
> 赞同：1
> 
> 时间：2012-12-03T21:31:31.867
> 
> 标签：mongodb, ruby-on-rails-3.2, mongoid

我们注意到这个问题，即“安全”写入数据库的数据在几秒钟后（比如 2 秒）不可用。基本上，我们对集合进行一些安全写入（在 web worker/request 中），并期望数据可以从另一个进程（Sidekiq worker）获得。

任何人都知道为什么会发生这种情况，或者有人看到过 MongoDB 的类似行为吗？

我们的应用程序是 Rails 3.2.9/Ruby 1.9.3/Mongo 2.0.4 应用程序。我们`Mongoid`用作 ORM 工具。

以下是我们如何进行安全写入：

`account.safely.save!`

此外，为此集合启用了分片，服务器上的负载很大。

以下是我们使用的宝石：

```
gem 'mongo', '1.6.1'
gem 'mongoid', '2.4.10' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:21:55.517

在 GitHub 上查看这个 Mongoid 问题：

[https://github.com/mongoid/mongoid/issues/2605](https://github.com/mongoid/mongoid/issues/2605)

这方面的里程碑是 Mongoid 3.0.15——你使用的是 2.4.10，它非常古老

我建议升级.. 3.1 已经出来了。

* * *

大声笑 - 没关系 - 我只是从你的头像中意识到你打开了那个问题。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:41:11.483

您遇到这种情况是因为每个连接都有队列。这在使用连接池时很常见。从相同的连接中，您将获得一致的结果。

# c# - SignalR - 检查用户是否仍然连接

> ID：13692069
> 
> 赞同：17
> 
> 时间：2012-12-03T21:31:33.643
> 
> 标签：c#, asp.net, timer, signalr, signalr-hub

我有一个带有称为客户端的方法的集线器。此方法启动一个带有委托的计时器，该委托每 10 秒运行一次。如果没有人连接到集线器，则继续运行此委托是没有意义的，因此我想在重新安排它之前检查是否有任何用户仍然从委托内部连接。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T21:37:04.533

可能最常用的解决方案是保留一个静态变量，其中包含当前连接的用户，并根据您使用的版本覆盖`OnConnect`和`OnDisconnect`/或实施。`IDisconnect`

你会实现这样的事情：

```
public class MyHub : Hub
{
    private static List<string> users = new List<string>();
    public override Task OnConnected()
    {
        users.Add(Context.ConnectionId);
        return base.OnConnected();
    }

    //SignalR Verions 1 Signature
    public override Task OnDisconnected()
    {
        users.Remove(Context.ConnectionId);
        return base.OnDisconnected();
    }

    //SignalR Version 2 Signature
    public override Task OnDisconnected(bool stopCalled)
    {
        users.Remove(Context.ConnectionId);
        return base.OnDisconnected(stopCalled);
    }

    // In your delegate check the count of users in your list.
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-11-18T12:28:43.550

如果您将 connectionId 保存在数据库中，则可以检查以下内容：

```
var heartBeat = GlobalHost.DependencyResolver.Resolve<ITransportHeartbeat>();

var connectionAlive = heartBeat.GetConnections().FirstOrDefault(c=>c.ConnectionId == connection.ConnectionId);

if (connectionAlive.IsAlive)
{
//Do whatever...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T21:36:29.357

来自[http://forums.asp.net/t/1829432.aspx/1?How+do+I+get+list+of+connected+clients+on+signalr+](http://forums.asp.net/t/1829432.aspx/1?How%20do%20I%20get%20list%20of%20connected%20clients%20on%20signalr%20)

```
IHubContext context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
context.Clients.notify("Hello world"); 
```

所以你应该能够得到 context.Clients.Count。

那篇文章还引用了[wiki](https://github.com/SignalR/SignalR/wiki/Hubs)，它有很多很好的信息。您可以尝试使用 OnConnected/OnDisconnected 示例来跟踪用户，当您达到零用户时停止您的呼叫。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-10T04:23:40.723

我已经这样做了：

```
public class PrincipalCommunicator
    {
        public readonly static Lazy<PrincipalCommunicator> _instance = new Lazy<PrincipalCommunicator>(
                () => new PrincipalCommunicator(GlobalHost.ConnectionManager.GetHubContext<PrincipalHub>())
            );

        public List<string> ConnectedUsers { get; set; }

        private IHubContext _context;

        private PrincipalCommunicator(IHubContext context)
        {
            ConnectedUsers = new List<string>();
            _context = context;
        }

        public static PrincipalCommunicatorInstance
        {
            get
            {
                return _instance.Value;
            }
        }

        public bool IsUserConnected(string user)
        {
            return UsuariosConectados.Contains(user);
        }
    }

    public class PrincipalHub : Hub
    {
        public override Task OnConnected()
        {
            PrincipalComunicador.Instance.UsuariosConectados.Add(Context.User.Identity.Name);

            return base.OnConnected();
        }

        public override Task OnDisconnected(bool stopCalled)
        {
            PrincipalComunicador.Instance.UsuariosConectados.Remove(Context.User.Identity.Name);
            return base.OnDisconnected(stopCalled);
        }
    }
} 
```

这样，向客户端发送内容的所有逻辑都保留在一个位置，[就像示例一样](https://docs.microsoft.com/en-us/aspnet/signalr/overview/getting-started/tutorial-server-broadcast-with-signalr#create-the-stocktickerhub-and-stockticker-classes)，您可以知道用户是否连接到代码中的任何位置。

# python - 如何在 Python 中制作字符列表

> ID：13692070
> 
> 赞同：-5
> 
> 时间：2012-12-03T21:31:39.143
> 
> 标签：python, list, character

我的考试问题要求我将两个字母作为输入，并在两个输入之间（包括）显示字母表中的所有字母。它还需要按照用户输入它们的顺序执行此操作（因此 GA 生成`GFEDCBA`not `ABCDEFG`）。我将如何处理这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:43:57.047

我真的不认为这值得回答，但正如@martineau 在[他的评论](https://stackoverflow.com/questions/13692070/how-to-make-a-list-of-characters-in-python#comment18802418_13692070)中所说，在评论中放置这么多代码并不是一个好主意......所以这里是：

```
>>> begin="A"
>>> end="G"
>>> print "%s" % list((chr(i) for i in range(ord(begin), ord(end) + 1 * (ord(end)-ord(begin))/abs(ord(end)-ord(begin)), (ord(end)-ord(begin))/abs(ord(end)-ord(begin))))) 
['A', 'B', 'C', 'D', 'E', 'F', 'G']
>>> begin="G"
>>> end="A"
>>> print "%s" % list((chr(i) for i in range(ord(begin), ord(end) + 1 * (ord(end)-ord(begin))/abs(ord(end)-ord(begin)), (ord(end)-ord(begin))/abs(ord(end)-ord(begin))))) 
['G', 'F', 'E', 'D', 'C', 'B', 'A'] 
```

唯一稍微相关的部分是[chr](http://docs.python.org/2/library/functions.html#chr)和[ord ，以及如果](http://docs.python.org/2/library/functions.html#ord)*begin > end*`(ord(end)-ord(begin))/abs(ord(end)-ord(begin))`获得 -1的“技巧” ，虽然......

 ***编辑：正如@martineau 在**[另一条评论](https://stackoverflow.com/questions/13692070/how-to-make-a-list-of-characters-in-python#comment18802652_13692070)中指出的那样......您可以使用更大的（！）一个衬里并使用[join](http://docs.python.org/2/library/stdtypes.html#str.join)获取一个字符串（而不是列表） 。

```
>>> begin="G"
>>> end="A"
>>> print "".join((chr(i) for i in range(ord(begin), ord(end) + 1 * (ord(end)-ord(begin))/abs(ord(end)-ord(begin)), (ord(end)-ord(begin))/abs(ord(end)-ord(begin)))))
GFEDCBA 
```

...这是一小段代码... **：D**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:52:25.080

```
>>> import string
>>> def letterList (start, end):
        # add a character at the beginning so str.index won't return 0 for `A`
        a = ' ' + string.ascii_uppercase

        # if start > end, then start from the back
        direction = 1 if start < end else -1

        # Get the substring of the alphabet:
        # The `+ direction` makes sure that the end character is inclusive; we
        # always need to go one *further*, so when starting from the back, we
        # need to substract one. Here comes also the effect from the modified
        # alphabet. For `A` the normal alphabet would return `0` so we would
        # have `-1` making the range fail. So we add a blank character to make
        # sure that `A` yields `1-1=0` instead. As we use the indexes dynamically
        # it does not matter that we have changed the alphabet before.
        return a[a.index(start):a.index(end) + direction:direction]

>>> letterList('A', 'G')
'ABCDEFG'
>>> letterList('G', 'A')
'GFEDCBA'
>>> letterList('A', 'A')
'A' 
```

请注意，此解决方案允许使用任何类型的字母。我们可以设置`a = ' ' + string.ascii_uppercase + string.ascii_lowercase`并得到这样的结果：

```
>>> letterList('m', 'N')
'mlkjihgfedcbaZYXWVUTSRQPON' 
```

当您拥有完整的 unicode 支持时，谁需要 ASCII？

```
>>> a = ' あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわを'
>>> letterList('し', 'ろ')
'しすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろ' 
```*

# git - Git 责备承诺行

> ID：13692072
> 
> 赞同：42
> 
> 时间：2012-12-03T21:31:45.510
> 
> 标签：git

GIT 是否有可能以某种方式找到哪个提交在特定文件中引入了特定的代码行？这是假设自从添加该行以来已经有很多提交。或者这是否必须在脚本中完成，同时查看该行所在文件的所有提交的 git blame ？

澄清

原始文件->行添加到文件并提交->许多其他提交添加其他行并更改代码

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-03T21:37:59.967

您可以使用`git blame -l filename`从更改行时获取 SHA1 哈希。

您还可以使用 --reverse：

> - 逆转
> 
> 让历史前进而不是倒退。这不是显示出现行的版本，而是显示存在行的最后一个版本。这需要一系列修订，例如 START..END，其中责备路径存在于 START 中。

见：[http ://www.kernel.org/pub/software/scm/git/docs/git-blame.html](http://www.kernel.org/pub/software/scm/git/docs/git-blame.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-07T07:21:02.710

看来您可以使用 git log -L 来检查文件。例如，我想检查 file.c 的提交，从 55 到 60 行：

```
git log -L55,60:file.c 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-25T22:15:17.277

您可以像这样责怪特定的代码字符串。

```
git log -S 'THE-CODE' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T21:34:45.467

假设该行自从添加以来没有改变，那么简单地：

`git blame <that file>`然后寻找你所追求的线。

如果该行自添加以来已被修改，您仍然`git blame`可以找出该行被更改的最后一次提交，然后`git checkout <sha>~1`（`sha`原始中显示的 sha 在哪里`git blame`）并`git blame`再次返回历史那条线。

# java - 包装异常：org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; 糟糕的 SQL 语法

> ID：13692076
> 
> 赞同：0
> 
> 时间：2012-12-03T21:32:01.040
> 
> 标签：java, spring, struts, sqlexception

我有一个这样的DAO，

```
public String getCaseTypeById(String caseIdNumber) {
        String caseType = null;

        SqlQuery caseQuery = 
            new PQuery(getDataSource());
        System.out.println("caseIdNumber   --"+caseIdNumber);
        caseType = (String)caseQuery.findObject(caseIdNumber);
        System.out.println("before return");

        return caseType;
    } 
```

并且 pQuery 是

```
public PlanQuery(DataSource dataSource)
{
    super();
    setDataSource(dataSource);
    BQueries bQueries = new BQueries();

    setSql(bQueries.getSelectStandardCaseTypeQuery());
    declareParameter(new SqlParameter("caseIdNumber",
            Types.NUMERIC));
    compile();
} 
```

getSelectStandardCaseTypeQuery 在哪里，

```
public String getSelectStandardCaseTypeQuery() {

String selectCaseTypeByCaseId = null;

        selectCaseTypeByCaseId = 
            " SELECT ct.C_CODE as c_code " + 
            "  FROM  " + getSchemaName() + ".csummary cs, " + 
                getSchemaName() + ".ctype ct " +
            "   WHERE cs.c_number = ? " + 
            "   AND UPPER(ct.C_DESC_TEXT) = UPPER(cs.C_TYPE) ";

    return selectCaseTypeByCaseId;
} 
```

现在上面的返回工作正常。控制返回到 DAO 并在 DAO 中打印 sysout 但之后我得到异常，

[从 gpt.csummary cs 中选择 ct.C_CODE 作为 c_type_code，gpt.ctype ct WHERE cs.c_number = ? AND UPPER(ct.C_DESC_TEXT) = UPPER(cs.C_TYPE) ]; 嵌套异常是 java.sql.SQLException: ORA-00942: 表或视图不存在

```
at org.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:545)
at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:486)
at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:856) 
```

包装异常：org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; 错误的 SQL 语法 [ SELECT ct.C_CODE as c_type_code FROM gpt.csummary cs, gpt.ctype ct WHERE cs.c_number = ? AND UPPER(ct.C_DESC_TEXT) = UPPER(cs.C_TYPE) ]; 嵌套异常是 java.sql.SQLException: ORA-00942: 表或视图不存在。

但是当我在蟾蜍中执行相同的操作时，一切正常。我看到那个数据库连接模式一切都是正确的。但是为什么在DAO中的finObject中会失败。任何输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:36:25.970

看起来你必须使用：

```
select * from schema.table_name 
```

# jquery - jQuery .load() 等到内容被加载

> ID：13692085
> 
> 赞同：11
> 
> 时间：2012-12-03T21:32:44.303
> 
> 标签：jquery

我想让网站页面平滑地滑动到另一个页面。所以我做了 $('a').click(); 检查链接是否为本地的函数，如果是，则获取链接href并将其加载到正文。

```
$('a').click(function(){
    var href=$(this).attr('href');  
    $('body').load(href);
    return false;
}); 
```

它看起来不错，但我的网站也包含很多 js 插件。执行它们需要一段时间，`.load`action首先显示'unchanged by js'内容，然后执行js。它会导致内容的不良闪烁。

是否可以在 JS 的所有执行中缓存新内容，在完成之前不要更改旧正文，当所有 DOM 和 JS 对新内容完成时，slideOut 旧内容和 slideIn 新内容？

编辑：我认为重点不在于检测 js 执行，而在于检查是否加载了所有其他文件 - DOM 更改应该在新文件的 $(window).load 将被触发的同时被触发。

**[编辑] - - - - - - - - - - - - - - - - - - - - - - - - ----------------------**

我的解决方案是跨浏览器不透明度为 0 的 css 代码（总是在构建 dom 之前加载 css）。

```
.transparent{
    -moz-opacity: 0.00;
    opacity: 0.00;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha"(Opacity=0);
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0);
    filter:alpha(opacity=0);
} 
```

它通常但并非总是防止内容的不良闪烁。现在它可以以某种方式检测到内容是由 jQuery ajax 加载的，并应用一些显示超时等等。但实际上问题仍然存在。

现在为这个问题做一个更简单的例子：

单击触发 .load('something.php') 函数的链接后，如何在 $('body').load('something.php') 3000 毫秒后开始更改 DOM？（点击后应立即开始加载，但必须稍后启动 DOM 更改）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T08:32:27.667

也许你应该使用 Promise 并尝试这样的事情：

```
$('a').click(function(){
    var href=$(this).attr('href');
    $('body').hide();
    $('body').load(href, function() {
      $('body').show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T20:33:21.180

不要使用 .load()。该方法专门执行您要避免的操作。

尝试这样做：

1.  使用 $.get、$.post、$.ajax 或任何适合您的方法加载。这样，您就可以将带有脚本的 HTML 代码作为 HTML 字符串。
2.  创建一个隐藏的 div，或透明的 div，或另一个元素来放置内容。这里的技巧是确保这个 div 在脚本执行之前不会显示。为此，唯一的方法是在您要以这种方式加载的每个页面中添加最后一个脚本，并使用删除旧内容并显示新内容的功能。作为最后一个脚本，它不会在其他脚本执行之前执行，因此您的 DOM 应该已准备好。

当然，如果您的脚本依赖于 $(document).ready() 之类的东西，这将不起作用，因为它会立即执行。图片也有同样的问题。它们是异步加载的，因此您不会知道它们何时全部加载，除非您将处理程序附加到每个图像的 onload 事件，这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T13:27:39.483

可能有帮助的一件事是将您的 html 放入具有用户定义类型的脚本标签中（或将您的 html 加载到脚本标签中）

像这样 ：

```
<script type="text/template" id="myTemplate">
    <div>some html</div>
</script> 
```

在将其附加到页面之前，Dom 不会理解其中的 html 代码

```
//... at some point
var tmp = $('#myTemplate').html();
$(body).append(tmp); 
```

阿霍斯！

# firebird - 在 Firebird 数据库中插入后设置索引统计信息

> ID：13692087
> 
> 赞同：2
> 
> 时间：2012-12-03T21:32:51.393
> 
> 标签：firebird

我想自动化在 Firebird 数据库中设置索引统计信息的过程，这样就不需要数据库管理员运行命令，也不需要用户单击按钮。

由于统计只需要在大量插入或删除后重新计算，我正在考虑使用 After Insert 和 After Delete 触发器来跟踪发生了多少插入或删除，然后运行一个程序来设置索引统计基于该值。

我的问题是在实时数据库上以这种方式设置索引统计信息时是否需要注意什么。需要明确的是，我不是在重建索引，而只是重新计算索引统计信息。在批量导入或删除操作期间很可能会发生这种情况。在批量导入或删除期间计算索引统计信息是否有可能导致任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:07:50.850

在使用实时数据库时重新计算索引统计信息是安全的。在 PSQL 中这样做也是安全的，例如在存储过程中。例如，我在夜间运行一个预定的批处理作业，它执行一个存储过程，重新计算所有索引的统计信息。

我不确定在触发器中这样做是否明智，因为 Firebird 中的触发器是每行而不是每条语句触发的，因此您必须确保在 PSQL 主体的某种条件分支中运行它。

# .net - 如何跟踪流中图像之间的运动

> ID：13692089
> 
> 赞同：1
> 
> 时间：2012-12-03T21:32:59.493
> 
> 标签：.net, image-processing, motion-detection

我有一个 ConcurrentQueue 正在填充图像流。为简单起见，假设它们是来自网络摄像头的帧。

我最想做的是检测

*   如果有任何动静
*   最大（按大小而非速度）运动在帧中的位置
*   第二大运动在帧中的位置

大概我需要在最后 N 帧上合成一个参考图像（以便考虑半永久性变化，例如白天/黑夜、停放的汽车等），然后将当前帧与参考帧进行区分。

帧具有（最小）噪声水平，因此精确的颜色比较不是一个可行的选择。

我敢肯定我以前看过这方面的教程（最终形成一个围绕大面积运动的“盒子”），但我现在找不到它们。

有人可以指出一个像样的算法/教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:18:51.013

如果您只是想要一个可行的解决方案，ZoneMinder 或 Motion 是两个使用 video4linux 接口在 linux 下运行的软件。

如果您出于某种原因需要自己动手，可以使用很多技术或策略。您所概述的内容基本上处于正确的轨道上。但是，您缺少一些重要的细节。

1.  由于相机是静止的，请记录最后 N 帧作为“背景”图像。平均它们。

    [http://opencv.willowgarage.com/documentation/cpp/imgproc_motion_analysis_and_object_tracking.html](http://opencv.willowgarage.com/documentation/cpp/imgproc_motion_analysis_and_object_tracking.html)

2.  从当前图像中减去背景。你剩下的我们称之为前景。

    [http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#cv-absdiff](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#cv-absdiff)

3.  可选地执行膨胀或腐蚀（或两者）以消除噪声或连接近连接区域。

    [http://opencv.willowgarage.com/documentation/image_filtering.html#dilate](http://opencv.willowgarage.com/documentation/image_filtering.html#dilate)

4.  对前景图像设置阈值以确定什么是重要的，什么不是。

    [http://docs.opencv.org/doc/tutorials/imgproc/threshold/threshold.html](http://docs.opencv.org/doc/tutorials/imgproc/threshold/threshold.html)

5.  （可选）使用 findContours 函数来获取“移动”内容的描述

    [http://docs.opencv.org/doc/tutorials/imgproc/shapeescriptors/find_contours/find_contours.html](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)

    一旦你有了轮廓，你还可以找到边界矩形，如果这就是你想要的。

    [http://opencv.willowgarage.com/documentation/python/structural_analysis_and_shape_descriptors.html#boundingrect](http://opencv.willowgarage.com/documentation/python/structural_analysis_and_shape_descriptors.html#boundingrect)

这不会是完美的，在调试或优化时，您必须在每一步之后显示输出，以确定哪些工作正常，哪些工作不正常。花一些时间构建基础设施以使这更容易。一旦你有了源数据和大部分工作管道，调整以获得你想要的结果是非常可行的。

# php - 使用 PHP 进行安全 cPanel 登录的脚本

> ID：13692097
> 
> 赞同：1
> 
> 时间：2012-12-03T21:33:31.040
> 
> 标签：php, curl, cpanel

从最近开始，cPanel 改变了它的登录方式。

登录前，网址为：**https://accessurl:2083/**

登录后：**https://accessurl:2083/cpsessXXXX/frontend/x3/index.html?post_login=89711792346495**

您会注意到嵌入在 url 中的**cpsessXXXX 。**

访问 AWSTATS 的页面是：**https://accessurl:2083/cpsessXXXX/awstats.pl?config=domain_name&ssl=&lang=en**

我尝试了以下 PHP 代码

```
$username = 'xxx';
$password = 'xxx';
$loginUrl = 'https://<accessurl>';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $loginUrl);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'user='.$username.'&pass='.$password);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_PORT,2083);
$store = curl_exec($ch);
curl_close($ch); 
```

当我单步执行代码时，**$store**的值为 FALSE，这意味着登录过程失败。

我在网上找到的类似问题的唯一参考是[http://blog.mcfang.com/](http://blog.mcfang.com/)在 3 月 28 日的条目中。

我希望 cookies.txt 有 cpsessXXXX 信息，但没有创建文件。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T21:54:10.740

您需要将安全令牌引用回 cPanel，以便您的脚本被接受。根据[安全令牌的 cPanel 文档中的文档](http://blog.cpanel.net/making-your-script-work-with-security-tokens-in-cpanel-whm/)

举个例子：

```
function createSession() { // Example details
$ip = "127.0.0.1";
$cp_user = "username";
$cp_pwd = "password";
$url = "http://$ip:2082/login";
$cookies = "/path/to/storage/for/cookies.txt";

// Create new curl handle
$ch=curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookies); // Save cookies to
curl_setopt($ch, CURLOPT_POSTFIELDS, "user=$cp_user&pass=$cp_pwd");
curl_setopt($ch, CURLOPT_TIMEOUT, 100020);

// Execute the curl handle and fetch info then close streams.
$f = curl_exec($ch);
$h = curl_getinfo($ch);
curl_close($ch);

// If we had no issues then try to fetch the cpsess
if ($f == true and strpos($h['url'],"cpsess"))
{
    // Get the cpsess part of the url
    $pattern="/.*?(\/cpsess.*?)\/.*?/is";
    $preg_res=preg_match($pattern,$h['url'],$cpsess);
}

// If we have a session then return it otherwise return empty string
return (isset($cpsess[1])) ? $cpsess[1] : "";
} 
```

cpsess 用于将 URL 附加到 cPanel 期望返回的正确令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-11T11:35:51.713

您可以通过添加以下简单行的标题发送“授权”行：

```
$header[0] = "Authorization: Basic " . base64_encode($cp_user.":".$cp_pwd) . "\n\r";
curl_setopt($ch, CURLOPT_HTTPHEADER, $header); 
```

因此，您可以直接向资源 $myResource 发送请求，而无需使用 cookie 和其他任何东西。简单地：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $myResource);
$header[0] = "Authorization: Basic " . base64_encode($cp_user.":".$cp_pwd) . "\n\r";
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_PORT,2083);
$store = curl_exec($ch);
curl_close($ch); 
```

您应该考虑使用[CPanel 的 XML API](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/CallingAPIFunctions)。在 Github 上你可以找到[xmlapi-php 类](https://github.com/CpanelInc/xmlapi-php)，它工作得很好，帮助我保持代码简单和易于更新！

# ruby-on-rails - rails 3establish_connection 不适用于切换数据库

> ID：13692101
> 
> 赞同：0
> 
> 时间：2012-12-03T21:33:48.697
> 
> 标签：ruby-on-rails, database

我需要在我的应用程序中使用两个不同的数据库。我找到了一个简单的例子：

[http://pullmonkey.com/2008/4/21/ruby-on-rails-multiple-database-connections/](http://pullmonkey.com/2008/4/21/ruby-on-rails-multiple-database-connections/)

使用建立连接，但它似乎不起作用。为了测试切换数据库，我有：

```
 class User < ActiveRecord::Base
    establish_connection :test
    # attr_accessible :title, :body
  end 
```

但我收到错误：“未捕获的异常：数据库配置未指定适配器”。

这是我的database.yaml：

```
development:
  adapter: mysql2
  encoding: utf8
  database: foo
  username: bar
  host: foo.com
  password: foobar

test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

我正在为此测试以开发模式运行。任何想法为什么它不能切换？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:51:22.050

首先，“pulmonkeyexample”是在您有多个数据库而不是三个标准数据库（“开发、测试和生产”）时使用数据库标签。当你启动一个 Rails 应用程序时，你可以使用“-e”选项来告诉 Rails 在哪种模式下启动应用程序 - test、dev 或 prod。根据应用程序启动的模式，Rails 将自动使用“database.yml”文件中的相应数据库连接。所以从你的模型中删除那条线。再想一想，即使您编写了它，只要有一个带有用户表的测试数据库，它也应该可以工作。

# php - 以字符开头的数组键

> ID：13692102
> 
> 赞同：0
> 
> 时间：2012-12-03T21:34:09.247
> 
> 标签：php

我有一个包含术语和定义的数组：

```
$myArray = array("apple" => "Fruit that grows ...", "car" => "Vehicle on four..."); 
```

如何确定在 $myArray 中是否有以特定字母开头的单词，例如“c”表示汽车，并在通过循环生成的 ABC 列表中的相应字母中添加一个类：

```
foreach(range('A','Z') as $i) {
    echo '<div>'. $i .'</div>';
} 
```

更新：

预期输出：

```
<div class="match">A</div>
<div>B</div>
<div class="match">C</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:44:06.297

您需要比较您要输出的字符是否确实作为数组键中的第一个字符存在。与一遍又一遍地迭代整个数据数组的所有其他工作解决方案相比，使用一点准备应该会使所发生的事情变得更容易和更容易理解。

```
$myArray = array("apple" => "Fruit that grows ...", "car" => "Vehicle on four...", "cat" => "Meow");

// Prepare array keys
$keys = array_keys($myArray);
array_walk($keys, function(&$key){$key=mb_strtoupper(mb_substr($key,0,1));});
array_unique($keys);

foreach (range('A','Z') as $char) {
    if (in_array($char, $keys)) {
        echo "<div class='match'>".$char."</div>";
    } else {
        echo "<div>".$char."</div>";
    }
} 
```

输出：

```
<div class='match'>A</div><div>B</div><div class='match'>C</div><div>D</div><div>E</div><div>F</div> ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:45:39.473

剥那只猫皮的方法很多。这是一个：

```
$matches = preg_grep('/^[A-Z]/', array_keys($myArray));
foreach($matches as $i) {
    echo '<div>'. $i .'</div>';
} 
```

那是区分大小写的。要匹配 AZ 和 az，请将*i*修饰符添加到正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:43:18.307

```
$myArray = array('a' => 'dog', 'b' => 'cat');
// For each letter from A to Z, contained in $i
foreach (range('A','Z') as $i) {
    echo '<b>' . $i . '</b><br />'; // Output the letter

    // For each key/value pair of the array
    foreach ($myArray as $key => $element) {
        // If the first letter of the key is the letter, it matches
        // This matches both upper and lowercase
        if (in_array($key[0], array($i, strtolower($i)))) {
            echo '<div class="match">' . $element . '</div><br />';
        }
    }
    echo '<br />';
} 
```

循环遍历 A - Z 并检查每个键/值对以查看键是否以该字母开头（或其小写字母；它同时检查 A 和 a）。

编辑：**根据对问题的更新进行更新**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T21:46:43.290

尝试：

```
$arr = array("apple" => "Fruit that grows ...", "car" => "Vehicle on four...");   
foreach ($arr as $k => $v) {
 foreach(range('a','z') as $i ) {
 if (strpos($k, $i) === 0) 
  echo "<div class='match'>". $i .'</div>';
 else
   echo '<div>'. $i .'</div>';
 }
} 
```

# ruby - ruby 调试：花费太长时间时打印行号

> ID：13692103
> 
> 赞同：3
> 
> 时间：2012-12-03T21:34:11.100
> 
> 标签：ruby, profiling, benchmarking

`__LINE__`如果花费超过 9 秒（可调整），Ruby 中有没有办法让它打印它正在处理的代码数量（在我的脚本级别，不需要 gem）？

对于调试，我让它打印它正在尝试做的事情的详细输出，它在代码中的位置等，而不是长时间静坐。

不稳定的情况使得无法预测在某事超时之前它会走多远，因此连续推进在这里不适用。

编辑

像陷阱这样的东西会起作用，例如：

*   原始行号和希望代码被记住（例如，**基准**和**超时**gem都忘记了`__LINE__`......也许有一种方法可以将其推送到另一个 .rb 文件以操纵堆栈以包含我的文件和感兴趣的行?)
*   当超时警告打印时，执行仍然继续，就好像什么都没有改变一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T21:59:57.150

```
require 'timeout'

def do_something
  Timeout::timeout(9) do
    sleep 10
  end
rescue Timeout::Error => e
  puts "Something near line #{__LINE__} is taking too long!"
  # or, count backwards in method
  puts "Line #{__LINE__ - 5} is taking too long!"
end

do_something 
```

如果超时块超时并引发超时错误，这将停止执行。如果您想继续执行，您可能会使用基准测试做得更好：

```
require 'benchmark'

time = Benchmark.realtime do
  sleep 10
end
puts "Line #{__LINE__ - 2} is slow" if time > 9 
```

一个基准块可以有多个计时器：

```
Benchmark.bm do |b|
  b.report('sleeping:') { sleep 3 }
  b.report('chomping:') { " I eat whitespace ".chomp }
end 
```

在此处查看有关基准的更多信息： [http ://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html)

如果您想跟踪正在执行的行号，为什么不尝试将其传递给自定义方法，如下所示：

```
def timethis(line, &block)
  if Benchmark.realtime(&block) > 2
    puts "Line #{line} is slow"
  end
end

timethis(__LINE__) { sleep 1 } 
```

# c# - form.Show() 中心窗口？

> ID：13692109
> 
> 赞同：1
> 
> 时间：2012-12-03T21:34:32.007
> 
> 标签：c#, forms

为什么这不会使表格居中到屏幕上？

```
 Form2 mySettings = new Form2();
        mySettings.StartPosition = FormStartPosition.CenterParent;
        mySettings.Show(); 
```

它在我使用时有效：

```
mySettings.ShowDialog(); 
```

但问题是用户在同时打开 Form2 时无法访问主窗体。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:03:56.943

这是因为`FormStartPosition.CenterParent`表单以它的父位置为中心。Form.Show() 在技术上没有父级。正如评论中已经建议的那样， using`FormStartPosition.CenterScreen`将提供所需的行为。

`FormStartPosition.CenterParent`应主要在使用`Form.ShowDialog(IWin32Window)`重载时使用。

如果您需要以另一个窗体的位置为中心，则需要使用当前窗体的位置和大小自己计算新窗口坐标。然后使用`FormStartPosition.Manual`设置在新创建的表单中使用提供的位置和大小值。

# java - 可中断方法的实现

> ID：13692111
> 
> 赞同：0
> 
> 时间：2012-12-03T21:34:37.733
> 
> 标签：java, multithreading

我想实现一个阻止输入的方法，但可以是 Thread.interrupt()'ed。例如，它在 System.in.read() 上阻塞，然后另一个线程可以中断它，因此它会以 InterruptedException 中断阻塞读取。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:40:45.923

首先想到的是`BlockingQueue`。一个线程将挂起试图从该队列中获取 smth，而另一个线程将使用元素填充该队列，例如执行读取的线程使用元素`System.in`填充`BlockingQueue`。因此可以中断另一个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:49:57.097

考虑 java.nio.InterruptibleChannel

```
If a thread is blocked in an I/O operation on an interruptible channel then another thread may invoke the blocked thread's interrupt method. This will cause the channel to be closed, the blocked thread to receive a ClosedByInterruptException, and the blocked thread's interrupt status to be set. 
```

以下是如何“中断地”从文件中读取数据

```
 FileChannel ch = new FileInputStream("test.txt").getChannel();
    ByteBuffer buf = ByteBuffer.allocate(1024);
    int n = ch.read(buf); 
```

当被另一个线程“读取”中断时会抛出ClosedByInterruptException，它是IOException的一个实例。

以下是如何“中断地”从 TCP 服务器读取字节

```
 SocketChannel ch = SocketChannel.open();
    ch.connect(new InetSocketAddress("host", 80));
    ByteBuffer buf = ByteBuffer.allocate(1024);
    int n = ch.read(buf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:47:21.683

如果它已经在等待另一个阻塞方法，只需将您的方法声明为抛出 InterruptedException 并且不要捕获原始异常。还是你要求别的？

# c++ - 如果我在 C++ 中使用 operator new[] 分配了一个对象数组，但单独取消分配它们是否仍然构成内存泄漏？

> ID：13692112
> 
> 赞同：2
> 
> 时间：2012-12-03T21:34:41.443
> 
> 标签：c++, memory, memory-management, memory-leaks

我知道不应该将 new[] 与 delete 混合和匹配，反之亦然（delete[] 与 new）。所以

```
int* k = new int[5];
delete k; 
```

有缺陷，因为它不会释放分配的数组。但是以下是错误的吗？

```
int *k = new int[5];
for (int i = 0; i < 5; ++i)
    delete k[i]; 
```

我的意思是错误的-它实际上会导致内存泄漏或未定义的行为吗？

编辑**我的错，我的意思是输入：

```
int** k = new int*[5];
memset(k, 0, sizeof(int*)*5);

k[3] = new int;

for (int i = 0; i < 5; ++i)
    if (k[i])
    {
        delete k[i];
        k[i] = 0;
    } 
```

在上面，除非我`k`自己调用 delete[] ，否则永远不会真正释放 5 个位置的块，尽管我可以 new/delete 管理其中的整数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T21:38:31.080

`k[i]`是一个`int`，所以在**语法**上调用它是无效的`delete`。编译器应该引发错误。

Even if you could, it would result in undefined behavior (saying you have an array of pointers which you allocate with `new[]` and attempt to delete it with `delete`). Mixing `new[]` with `delete` and `new[]` with `delete` results in UB.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T21:38:19.037

无论哪种方式，您都不能混搭。如果你这样做，你有未定义的行为（§5.3.5/2）：

> **在第一种选择**（*delete object*）中，操作数的值`delete`可以是空指针值、指向由先前的***new-expression*****创建的非数组对象***的指针或指向表示基的子对象（1.8）的指针此类对象的类别（第 10 条）。如果不是，则行为未定义。*
> 
>  ***在第二种选择**（*删除数组*）中，操作数的值`delete`可以是空指针值或**由前一个数组*new-expression***产生的指针值。如果不是，则行为未定义。*

 *（粗体强调是我的）*

# magento - Magento 产品比较不显示项目

> ID：13692114
> 
> 赞同：1
> 
> 时间：2012-12-03T21:34:49.090
> 
> 标签：magento

尝试查看产品比较时，模块和模板已加载，但未显示产品。如果我在管理员中查看客户，我可以看到那里有产品。

# asp.net-mvc-3 - 如何从动作方法发送数据以在 MVC 中查看？

> ID：13692116
> 
> 赞同：0
> 
> 时间：2012-12-03T21:34:51.463
> 
> 标签：asp.net-mvc-3

视图中的表达式我在 mvc 名称 Flight 中有模型：

```
 public class Flight
{
    public int id { get; set; }
    [Required(ErrorMessage = "name is required")]
    [StringLength(170)]
    public string name { get; set; }
    [Required(ErrorMessage = "flight company is required")]
    [DisplayName("company Name")]
    public string flightCompany { get; set; }
    [DataType(DataType.Date)]
    public DateTime date { get; set; }
    public int idAvaribleClass { get; set; }
     [DisplayName("Duration TO")]
    public string flightDuration { get; set; }
     [DisplayName("Ariport Name")]
     [StringLength(200)]
    public string airportName { get; set; } 
    public int idRegisterFlght { get; set; }
    public List<FlightDuration> FlightDurations { get; set; }
    public List<AvalibleClass> AvalibleClasses { get; set; }
    public List<registerFlightProgram> registerFlightPrograms { get; set; }

} 
```

我有在数据库中搜索用户在视图中输入的内容并通过查询 linq 返回两个表的操作方法。我想在视图中显示此表：

_Mydb _db = 新 _Mydb();

```
 [HttpGet]
    public ActionResult Index()
    {

        return View();
    }

    [HttpPost]
    public ActionResult Index(string searchTerm = null, string to = null)
    {
        var q =
          (from c in _db.flights
           join p in _db.Durations on c.id equals p.FlightId
           where (p.to == to) && (p.fromStar == searchTerm) && (to != null)
           select new
           {
               c = new Flight { id = c.id, name = c.name, flightCompany = c.flightCompany, date = c.date, idAvaribleClass = c.idAvaribleClass, flightDuration = c.flightDuration, airportName = c.airportName, idRegisterFlght = c.idRegisterFlght },
               p = new FlightDuration { id = p.id, fromStar = p.fromStar, to = p.to, takeOffTime = p.takeOffTime, expectedTime = p.expectedTime, priceDuration = p.priceDuration, FlightId =p.FlightId}
           }).SingleOrDefault();

        return View(q);
    }

 *code view , expression in "@foreach"*   

 @model IEnumerable<TourismPro.Models.Flight>
@{
    ViewBag.Title = "Home Page";
}

@using (Html.BeginForm()){
<form method="post">
    <input type="search" name="searchTerm" />
     <input type="search" name="to" />
    <input type="submit" value="Search By Name" />

    **@foreach (var item in Model)**
{
    <div>
    @item.flightCompany
        </div>
}
</form>
} 
```

# javascript - 如何解析这个包含 \n 的变量？

> ID：13692118
> 
> 赞同：2
> 
> 时间：2012-12-03T21:35:07.357
> 
> 标签：javascript, regex, string, node.js, mongodb

我的 mongoDB 文档中有一个非常奇怪的数字。我将整个对象复制到 `node`控制台。我在这里输出。我认为它是 string`\n`和实际 textual的组合，`\n`或者发生了一些奇怪的事情。有人能告诉我如何 `567899876545678987654`从下面的变量中获取数字作为字符串吗？

```
> number
'--- \n- "567899876545678987654"\n- \n'
> JSON.stringify(number);
'"--- \\n- \\"567899876545678987654\\"\\n- \\n"'
> number.replace("\n","");
'--- - "567899876545678987654"\n- \n'
> number.replace(/\n/,"");
'--- - "567899876545678987654"\n- \n'
> number.replace(/-/,"");
'-- \n- "567899876545678987654"\n- \n' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T21:37:18.220

为什么不对所有数字使用正则表达式，而不是尝试删除其余数字？

```
actualNumber = number.match(/\d+/); 
```

正如 TJ Crowder 指出的那样，`actualNumber`现在将是一个包含数字的数组（**如果**有的话）。正如他所建议的，这将安全地检索实际数字：

```
var m = number.match(/\d+/);
if (m) { 
    actualNumber = m[0];
} 
```

# c - 随机win32退出码

> ID：13692120
> 
> 赞同：1
> 
> 时间：2012-12-03T21:35:19.837
> 
> 标签：c, winapi

我正在尝试通过遵循一些教程来学习 win32 API。
（虽然，我做了非常小的调整来创建一个无边框的固定窗口。）

但是，我最简单的窗口应用程序正在退出一些随机代码。
我不知道为什么它没有以代码“0”退出。

有关更多信息，我使用的是 Visual Studio 2012 Pro。
源代码的文件扩展名为 .c，编译器设置可能是默认设置。
我将该项目创建为一个空的 win32 应用程序（不是控制台）。

请，一些帮助将不胜感激。
谢谢你。

```
#include <Windows.h>
#include <windowsx.h>

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);

int __stdcall WinMain(HINSTANCE hInstance,
                      HINSTANCE hPrevInstance,
                      LPSTR lpCmdLine,
                      INT nCmdShow) {
    HWND hWnd;
    WNDCLASSEX wcex;
    MSG msg;

    ZeroMemory(&wcex, sizeof(WNDCLASSEX));

    wcex.cbSize = sizeof(WNDCLASSEX);
    wcex.style = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc  = WndProc;
    wcex.cbClsExtra = 0;
    wcex.cbWndExtra = 0;
    wcex.hInstance = hInstance;
    wcex.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    wcex.hCursor = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszMenuName = NULL;
    wcex.lpszClassName = L"WindowClass1";
    wcex.hIconSm = LoadIcon(NULL, IDI_APPLICATION);

    if (!RegisterClassEx(&wcex))
    {
        MessageBox(
            NULL,
            L"Failed to register window!",
            L"ERROR",
            MB_OK | MB_ICONEXCLAMATION);
        return EXIT_FAILURE;
    }

    hWnd = CreateWindowEx(
        0,
        L"WindowClass1",
        L"Application",
        WS_POPUP,
        0, 0,
        GetSystemMetrics(SM_CXSCREEN),
        GetSystemMetrics(SM_CYSCREEN),
        NULL, NULL, hInstance, NULL);

    if (hWnd == NULL)
    {
        MessageBox(
            NULL,
            L"Failed to create window!",
            L"ERROR",
            MB_OK |  MB_ICONEXCLAMATION);
        return EXIT_FAILURE;
    }

    ShowWindow(hWnd, nCmdShow);
    UpdateWindow(hWnd);

    while (GetMessage(&msg, hWnd, 0, 0) > 0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return msg.wParam;
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    switch (Msg)
    {
    case WM_CLOSE:
        DestroyWindow(hWnd);
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, Msg, wParam, lParam);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:37:20.870

在您的程序中，`GetMessage`实际上是返回`-1`这是一个错误条件。您的消息循环在`GetMessage`返回值 <=0 时终止，因此它在`GetMessage`返回 -1 时终止。

现在，因为最终调用`GetMessage`失败并出现错误，所以 的值`msg.wParam`没有明确定义。您不应将其作为退出代码返回。您应该只`msg.wParam`在最终调用返回 0 时作为退出代码返回。这一切都在[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644936.aspx)`GetMessage`中明确说明。

如果您将消息循环更改为如下所示，您可以看到所有这些：

```
while( (bRet = GetMessage( &msg, hWnd, 0, 0 )) != 0)
{ 
    if (bRet == -1)
    {
        return GetLastError();
    }
    else
    {
        TranslateMessage(&msg); 
        DispatchMessage(&msg); 
    }
}

return msg.wParam; 
```

在我的机器上，`bRet == -1`选择了路线，错误代码是 1400。这是[`ERROR_INVALID_WINDOW_HANDLE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681385.aspx). 我不太清楚你的应用为什么会这样，但我很满意我已经回答了你关于退出代码的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T22:11:25.923

除了用空白窗口覆盖整个屏幕，需要使用 ALT-F4 退出您的应用程序之外，一切看起来都不错，除了一件事：

GetMessage，尽管声称返回“BOOL”，但实际上返回 int：成功时返回一些正值，接收到 WM_QUIT 时返回 0，出错时返回 -1。出于这个原因，微软从 GetMessage（和其他函数）返回“ *BOOL plus a lil' something something* ”的政策是愚蠢和危险的，他们应该为此受到鞭笞。

如果 GetMessage 返回 -1 则 msg 的内容可能有效也可能无效；换句话说，wParam 可能为零，也可能为零`potato`。这可能会转化为您看到的“随机”退出代码。

我建议这样的事情：

```
int nRet;

do
{
    nRet = GetMessage(&msg, hWnd, 0, 0);

    if(nRet == -1)
        return GetLastError();

    if(nRet != 0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
} while(nRet != 0);

return msg.wParam; 
```

# c# - i18n 波兰语字符问题

> ID：13692122
> 
> 赞同：1
> 
> 时间：2012-12-03T21:35:22.960
> 
> 标签：c#, internationalization, asp.net-mvc-4, translation, polish

我在 mvc4 中有一个带有 i18n 内部化的 Web 应用程序，使用：

[https://github.com/danielcrenna/i18n#readme](https://github.com/danielcrenna/i18n#readme)

Everyting 工作正常，直到我开始添加波兰字符，如：ś、ź、ć 等。

字符替换为： � 标记。

并且在运行 xgettext.exe 的参数时设置为：

`var args = string.Format("-LC# -k_ --omit-header --from-code=UTF-8 -o\"{0}\\locale\\messages.pot\" -f\"{1}\"", path, manifest);`

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:00:45.070

也许尝试在您的文档的 HTML 中包含以下标记。

我已经看到在尝试从 C 中的 char 数组中的错误起始位置显示纯十六进制时弹出问号。浏览器可能不知道如何处理它给出的 char 十六进制。

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" /> 
```

# oop - 似乎无法理解 SOLID 原理和设计模式

> ID：13692126
> 
> 赞同：58
> 
> 时间：2012-12-03T21:35:33.847
> 
> 标签：oop, design-patterns, solid-principles

我最近正在尝试进入 OOP，但我在[SOLID](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则和设计模式方面遇到了麻烦。我明白人们为什么要使用它们，而且我也很想使用它们，但我无法完全按照规范开发我的类。我真的很感激任何有助于我理解这些的东西。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-12-03T21:39:04.867

我在大学上了一门课，花了两周时间围绕设计模式，读了《[四人帮》](http://en.wikipedia.org/wiki/Design_Patterns)一书，但无济于事。了解每种模式的用途以及如何使用它们来解决*我的*问题对我来说非常困难，我是一个在 OO 编程方面没有太多经验的开发人员。

真正让我点击的书是*[Head First Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0596007124)*。它首先显示一个问题，开发人员考虑的不同方法，然后他们如何最终使用设计模式来修复它。它使用非常简单的语言，使这本书非常吸引人。

设计模式最终成为描述解决方案的一种方式，但您不必**使**您的类适应解决方案。更多地将它们视为指南，为各种问题提供良好的解决方案。

让我们谈谈SOLID：

1.  **单一责任**。一个类应该只有一个职责。这意味着，例如，一个 Person 类应该只关心关于人本身的域问题，而不是例如它在数据库中的持久性。为此，您可能需要使用 PersonDAO。Person 类可能希望尽可能缩短其职责。如果一个类使用了太多的外部依赖项（即其他类），则表明该类承担了太多责任。当开发人员尝试使用对象对现实世界进行建模并且太过分时，通常会出现此问题。松散耦合的应用程序通常不太容易导航，并且不能准确地模拟现实世界的工作方式。
2.  **开闭**。类应该是可扩展的，但不可修改。这意味着向一个类添加一个新字段是可以的，但改变现有的东西不是。程序上的其他组件可能取决于所述字段。
3.  **里斯科夫换人**。如果传递了子类 dog 和子类 cat，则期望动物类型对象的类应该可以工作。这意味着 Animal 不应该有一个名为 bark 的方法，例如，因为 cat 类型的子类将无法吠叫。使用 Animal 类的类也不应该依赖于属于 Dog 类的方法。不要做类似“如果这个动物是狗，那么（把动物扔给狗）吠。如果动物是猫，那么（把动物扔给猫）喵”。
4.  **接口隔离原则**。尽量保持你的接口最小。既是学生又是学生的教师应该同时实现 IStudent 和 ITeacher 接口，而不是一个名为 IStudentAndTeacher 的大接口。
5.  **依赖倒置原则**。对象不应该实例化它们的依赖关系，但应该将它们传递给它们。例如，内部有 Engine 对象的 Car 不应该执行 engine = new DieselEngine()，而是应该在构造函数中将引擎传递给它。这样，汽车类将不会与 DieselEngine 类耦合。

# php - 用户“类别”表作为“子类别”的标题

> ID：13692128
> 
> 赞同：0
> 
> 时间：2012-12-03T21:35:48.093
> 
> 标签：php, sql

我根本不知道这是否可能......但我需要创建一个 sql 查询，列出我的所有类别及其子类别。问题是类别和子类别存储在单独的表中。

数据库结构如下： TABLE NAME: "Categories", COLUMNS: "ID, Name"

表名：“子类别”。列：“ID、名称、Category_ID”。category_ID 用于使用 ID 将每个子类别链接到其父类别。

现在我只有一个 sql 查询代码，它可以提取所有“类别”......我怎样才能让它在每个类别下显示一个子类别列表？

```
<?php
$catlist= mysql_query('SELECT * FROM categories WHERE hide = 0 ORDER BY `order` ASC')
or die(mysql_error());  
?>
<?php foreach ($catlist as $catitem): ?>
<h2 class="category"><?php echo $catitem['name']; ?></h2>
<?php endforeach; ?>
<?php ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:38:24.417

这将为您提供其余信息 - 然后您将需要进行布局并抑制重复的类别文本。

```
SELECT * 
FROM categories c, sub_categories s
WHERE c.hide = 0 
AND s.category_id = c.category_id
ORDER BY `order` ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:38:40.067

您可以对子类别表使用连接。[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

但是，我建议不要在表级别区分顶级类别和子级别类别，而是将它们全部放在一个具有以下字段的表中：parent_id、left_id 和 right_id。基本上，这允许层次结构中无限深度的类别。可能需要对如何正确实施它进行一些研究，但到目前为止它更强大。

# .net - 是否可以在不删除和创建的情况下更新我的数据库？

> ID：13692131
> 
> 赞同：0
> 
> 时间：2012-12-03T21:35:56.830
> 
> 标签：.net, entity-framework, ef-code-first

如果我在类中进行任何更改，我将 EF 与 CodeFirst 一起使用，更改会反映在数据库中，问题是它会删除数据库并丢失表中的值，使用 Nhibernate 我可以更改映射和更新数据库不费吹灰之力，这可以用EF来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:42:51.070

您将需要使用 EntityFramework 迁移。这里有几个链接可以帮助您入门：

[http://msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx) [http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based -迁移演练.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

# facebook - 专辑请求的不一致 Graph API 行为

> ID：13692132
> 
> 赞同：2
> 
> 时间：2012-12-03T21:35:59.430
> 
> 标签：facebook, facebook-graph-api

我正在尝试使用以下方法获取相册列表：

```
https://graph.facebook.com/USER_ID/albums 
```

它对某些用户来说非常有效，而其他用户我什么也没得到：

```
{
   "data": [

   ]
} 
```

我确信在这两种情况下，用户 ID 都是正确且有效的。对于不返回任何内容的用户，我在以同一用户身份登录时可以看到相册，所以我看不出权限如何成为问题。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:38:22.607

伊吉似乎是正确的。这是[10939051](http://facebook.stackoverflow.com/questions/10939051/why-am-i-unable-to-see-friends-albums-via-facebook-graph-api)的副本。

由于我找不到它，可以通过转到隐私设置>应用程序、游戏和网站>人们如何将您的信息带到他们使用的应用程序>取消检查我的照片来找到将所有用户照片和相册从应用程序中排除的设置.

这是一个屏幕截图：

![在此处输入图像描述](../Images/6aa9c5475d1d699e2923ac122e1f0834.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:49:19.890

这样写会得到更好的结果：

```
https://graph.facebook.com/USER_ID?fields=albums.fields(id) 
```

我在玩[Graph API Explorer](https://developers.facebook.com/tools/explorer)时得到了这个结果。这里，

![在此处输入图像描述](../Images/22b5d94225858ed1dc90e729dcd8cc13.png)

您必须生成一个选择**user_photos**和**friends_photos**的新令牌。然后，在列表中选择您需要的内容：

![在此处输入图像描述](../Images/a13f9e887d4c0603a425c89ab762e672.png)

它似乎显示了您需要的东西（至少如果您要查找的 ID 是您的朋友之一）！

# .net-4.5 - 将源代码控制导出或下载到给定变更集 ID 的本地文件夹

> ID：13692136
> 
> 赞同：0
> 
> 时间：2012-12-03T21:36:14.393
> 
> 标签：.net-4.5, team-explorer

> **可能重复：**
> [TFS 将特定版本获取到单独的文件夹中](https://stackoverflow.com/questions/1597476/tfs-get-specific-version-into-separate-folder)

我有一个更改集 ID，我想从源代码管理下载或导出代码，直到更改集 ID。我可以使用“获取此版本”或其他方式将代码下载到本地文件夹而不影响源代码管理中的当前工作空间或版本吗？

TFS 2012 &
用户拥有 TFS 的完全权限

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:37:12.377

您是否可以选择创建引用不同文件夹的新工作区、切换到新工作区并执行与您的变更集 ID 匹配的获取特定版本？

# ember.js - 使用 ember.js 预编译车把模板

> ID：13692138
> 
> 赞同：5
> 
> 时间：2012-12-03T21:36:19.523
> 
> 标签：ember.js, handlebars.js

我很想在构建过程中预编译我的 ember 模板 - 当我尝试使用 ember-precompile 工具时，生成的函数包含模板数据并将其添加到渲染缓冲区对象，但返回一个空字符串，结果什么也没有正在显示。

```
Ember.TEMPLATES["ins"] = Ember.Handlebars.template(function anonymous(Handlebars,depth0,helpers,partials,data) {
helpers = helpers || Ember.Handlebars.helpers;
  var buffer = '', stack1, stack2, stack3, foundHelper, tmp1, self=this, escapeExpression=this.escapeExpression;

  data.buffer.push("    <script type=\"text/x-handlebars\" data-template-name=\"FramesInstructions\">\n      Instructions - Click on the frames in the correct order!<br>\n      <a ");
  stack1 = depth0;
  stack2 = "watchCommercial";
  stack3 = helpers.action;
  tmp1 = {};
   debugger
  tmp1.hash = {};
  tmp1.contexts = [];
  tmp1.contexts.push(stack1);
  tmp1.data = data;
  stack1 = stack3.call(depth0, stack2, tmp1);
  data.buffer.push(escapeExpression(stack1) + "> START </a>\n    </script>\n");
  return buffer;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:04:16.040

我在模板周围留下了脚本标签。杜尔

# javascript - 使用动态 jQuery 选择器

> ID：13692146
> 
> 赞同：1
> 
> 时间：2012-12-03T21:36:39.827
> 
> 标签：javascript, jquery, html, this, css-selectors

我对 jQuery 还很陌生，想过去使用显式选择器并以这种方式混淆我的代码。我尝试了一些不同的方法，但没有成功让我的选择器在多个元素上动态运行，而没有每个元素的代码片段。

我的脚本如下：

```
 <script type="text/javascript">
        $(document).ready(function() {

            $("#navItem").mouseenter(function(){

                $(this).animate({
                    height: "150px"
                }, 500, "easeOutBounce")
            })

            $("#navItem").mouseleave(function(){

                $(this).animate({
                    height: "120px"
                }, 500, "easeOutBounce")
            })
    </script> 
```

还有我的 HTML ..

```
<div class="navWrap">

     <div id="navItem" class="navButton blue"></div>
     <div id="navItem2" class="navButton orange"></div>
     <div id="navItem3" class="navButton green"></div>
     <div id="navItem4" class="navButton red"></div>

</div> 
```

我省略了脚本的其余部分，因为它是重复的（您在 HTML 中看到的其余 ID 的功能相同）。我的目标是能够动态选择悬停的“当前”元素，而不是显式引用每个 ID。我假设我需要使用“this”选择器，但是我发现的文档在与我的场景相关时遇到了麻烦。

任何帮助表示赞赏，谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T21:39:35.483

```
$('.navButton').hover(function(){
         $(this).animate({
                height: "150px"
            }, 500, "easeOutBounce");
},function(){
          $(this).animate({
                height: "120px"
            }, 500, "easeOutBounce")
}); 
```

jquery 中的选择器与 css 选择器基本相同，因此按类选择将生成一个包含该类所有元素的 jquery 对象。[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

当您应用 jquery 函数时，通常`$(this)`是指有问题的单个特定元素而不是整个列表，因此使用 $(this) 来影响类选择的元素将正常工作。我需要多个绑定到一个组，您应该查看`.each` [http://api.jquery.com/each/](http://api.jquery.com/each/)

我在这里使用 .hover 这是 mouseenter 和 mouseleave [http://api.jquery.com/hover/的简写](http://api.jquery.com/hover/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:41:53.610

尝试这样的事情：

```
<script type = "text/javascript" > 
    $(document).ready(function() {
        $('.navButton').on('mouseenter mouseleave', function(e) {
            $(this).animate({
                height: e.type == "mouseenter" ? 150 : 120
            }, 500, "easeOutBounce")
        });
    });
</script>​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:41:17.957

像这样更改您的脚本：

```
 <script type="text/javascript">
    $(document).ready(function() {
        var $navItems = $('.navitem');

        $navitems.each( function(){
            $(this).mouseenter(function(){

                $(this).animate({
                    height: "150px"
                }, 500, "easeOutBounce")
            })

            $(this).mouseleave(function(){

                $(this).animate({
                    height: "120px"
                }, 500, "easeOutBounce")
        });
    })
</script> 
```

和这样的html

```
<div class="navWrap">

     <div id="navItem" class="navButton blue"></div>
     <div id="navItem" class="navButton orange"></div>
     <div id="navItem" class="navButton green"></div>
     <div id="navItem" class="navButton red"></div>

</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T21:41:31.817

由于[`.hover()`](http://api.jquery.com/hover/)是 and 的简写`mouseenter`，`mouseleave`您可以将代码压缩为：

```
$(".navWrap .navButton").hover(function() {
    $(this).animate({
        height: "150px"
    }, 500, "easeOutBounce")
}, function() {
    $(this).animate({
        height: "120px"
    }, 500, "easeOutBounce")
})​; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-03T21:40:02.180

试试这个代码：

```
 <script type="text/javascript">
        $(document).ready(function() {

            $("div[id^='navItem']").mouseenter(function(){

                $(this).animate({
                    height: "150px"
                }, 500, "easeOutBounce")
            })

            $("div[id^='navItem']").mouseleave(function(){

                $(this).animate({
                    height: "120px"
                }, 500, "easeOutBounce")
            })
    </script> 
```

# javascript - XMLHttpRequest 标记

> ID：13692148
> 
> 赞同：-6
> 
> 时间：2012-12-03T21:36:46.033
> 
> 标签：javascript, xml, ajax

```
var xhr = new XMLHttpRequest();
xhr.open("GET", url, true);
xhr.onreadystatechange = receiveResponse;
xhr.send(); 
```

“true”参数是否暗示对象异步加载？如果不是这样，“真”具体是做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:38:30.167

[是](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#open%28%29)的。并且默认为真。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T21:39:23.053

是的，该`true`值表示请求是异步的。这是 W3Schools 页面的链接： http: [//www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)

这是 W3 链接：[http ://www.w3.org/TR/XMLHttpRequest/#the-open-method](http://www.w3.org/TR/XMLHttpRequest/#the-open-method)

# delphi - Delphi：资源文件中的循环数据

> ID：13692153
> 
> 赞同：3
> 
> 时间：2012-12-03T21:37:04.770
> 
> 标签：delphi, embedded-resource, resource-file

我需要在资源文件中循环并使用以下语句加载所有 BMP 文件；`bBitmap.Handle := LoadBitmap(hInstance, 'IMAGE_NAME');`

如何循环资源文件；我是否必须进行常规 IO 操作并将其视为文本文件？我可以读取每一行并创建一个位图名称列表，而不是在单独的循环中执行上述语句来加载位图。或者 Delphi 库中是否有内置方法来执行此操作？

FILE_NAME_1 BITMAP "btnFile1.bmp"
FILE_NAME_2 BITMAP "btnFile2.bmp"
....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T23:23:10.443

我建议您看一下 Delphi 安装中包含的资源浏览器演示。您可以在“c:\Users\Public\Documents\RAD Studio\9.0\Samples\Delphi\VCL\resXplor\resxplor.dpr”中找到它（针对不同的路径/Delphi 版本进行调整）。在 ExeImage.pas 文件中有一些类可以让您轻松地将资源分配给 TPicture 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:20:20.127

Ken White 建议的 EnumResourceNames 工作得很好，而且实现起来非常简单。无法接受它作为答案，因为他只留下了评论。

这是我使用该建议的解决方案；

在加载图像的过程中，我添加了以下代码行；

```
var
  returnVal:bool;
  hMdl: HMODULE;
begin
  hMdl:=LoadLibraryEX('FileNameWithResources.exe',0,LOAD_LIBRARY_AS_DATAFILE);
  // I load bitmaps so RT_BITMAP parameter is chosen
  returnVal:=EnumResourceNames(hMdl,RT_BITMAP,@Callback,0); 
```

@callback 函数返回一个布尔值。你必须把它放在类级别，在类的实现代码之前。没有声明。我的类是单例的，所以我调用一个类级别的过程来将值添加到 TStringList。如果您有更复杂的 if 语句并且想要循环所有内容，请不要返回 false。如果您在任何时候返回 false，则对该函数的调用将结束，您将无法获得其余的资源名称。

```
function Callback(handle:THandle;ResType:PChar;ResName:Pchar;long:Lparam):bool;stdcall;
var
      tempString: string;    
begin  
      tempString := resname;
      if length(tempString) > 0 then begin
        MyClassName.AddToResourceNames(tempString);
        result := true;
      end else
        result := false;
end; 
```

# jquery - 如何在同一个网页中做两个ajax请求？

> ID：13692154
> 
> 赞同：0
> 
> 时间：2012-12-03T21:37:05.207
> 
> 标签：jquery, ajax, prototypejs, ajax-request

我是 Ajax 请求的初学者。

我有一个使用 Prototype 的 Ajax 请求和其他使用 Jquery 的请求。两者都在工作，但前提是我分别给他们打电话。我需要帮助来解决这个冲突。

在我下面展示的代码中，只有“$.fn.bindPostCommentHandler = function()”上的 Ajax 请求才能工作。“new VoteHijacker("link");”上的 Ajax 请求 不管用。

如何使这两个 Ajax 请求一起工作？

这是我网页上的代码。

```
<html lang="en">
<head>
    <link rel="stylesheet" href="/media/css/base.css" type="text/css" />
    <script src="/media/js/prototype.js"></script>
    <script src="/media/js/getcookie.js"></script>
    <script src="/media/js/prototype.extend.js"></script>
    <script src="/media/js/votehijaker.js"></script>

    <script src="/media/js/jquery-1.8.3.js"></script>
    <script type="text/javascript" charset="utf-8">
        (function( $ ){
        $.fn.bindPostCommentHandler = function() {
            // We get passed a list of forms; iterate and get a unique id for each
            // attach a submit trigger to handle saving and returning
            this.each(function() {
            //$(this).find('input.submit-preview').remove();
            $(this).submit(function() {
                commentform = this;
                commentwrap = $(this).parent();
                $.ajax({
                    type: "POST",
                    data: $(commentform).serialize(),
                    url: "/comments/post/",
                    cache: false,
                    dataType: "html",
                    success: function(html, textStatus) {   
                        // Extract the form from the returned html
                        postedcomment = $(html).find('#newly_posted_comment');
                        //alert(html);
                        $(commentform).replaceWith(postedcomment.html());
                        $(commentwrap).hide();
                        $(commentwrap).slideDown(600);
                        $(commentwrap).find('.comment-form form').bindPostCommentHandler();
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        $(commentform).replaceWith('Your comment was unable to be posted at this time.  We apologise for the inconvenience.');
                    }
                });
                return false;
            });
            }); //each
        };  
        })( jQuery );

        $(function() {
            $('.comment-form form').bindPostCommentHandler();
        });
    </script>

</head>
<body>
    ...
    ...
    <script type="text/javascript">
    Event.observe(window, "load", function()
    {
        new VoteHijacker("link");
    });
    </script>
    ...
    ... 
```

“VoteHijaker()”上的代码 votehijaker.js 如下：

```
var VoteHijacker = Class.create();
VoteHijacker.prototype =
{
    initialize: function(prefix)
    {
    this.prefix = prefix || "";
    this.registerEventHandlers();
    },

    registerEventHandlers: function()
    {
    $$("form." + this.prefix + "vote").each(function(form)
    {
        Event.observe(form, "submit", this.doVote.bindAsEventListener(this), false);
    }.bind(this));
    },

    doVote: function(e)
    {
    Event.stop(e);
    var form = Event.element(e);
    var id = /(\d+)$/.exec(form.id)[1];
    var action = /(up|down|clear)vote/.exec(form.action)[1];
    new Ajax.Request(form.action, {
        onComplete: VoteHijacker.processVoteResponse(this.prefix, id, action)
    });
    }
};

VoteHijacker.processVoteResponse = function(prefix, id, action)
{
    return function(transport)
    {
    var response = transport.responseText.evalJSON();
    if (response.success === true)
    {
        var upArrowType = "grey";
        var upFormAction = "up";
        var downArrowType = "grey";
        var downFormAction = "down";

        if (action == "up")
        {
            var upArrowType = "mod";
            var upFormAction = "clear";
        }
        else if (action == "down")
        {
            var downArrowType = "mod";
            var downFormAction = "clear";
        }

        VoteHijacker.updateArrow("up", prefix, id, upArrowType);
        VoteHijacker.updateArrow("down", prefix, id, downArrowType);
        VoteHijacker.updateFormAction("up", prefix, id, upFormAction);
        VoteHijacker.updateFormAction("down", prefix, id, downFormAction);
        VoteHijacker.updateScore(prefix, id, response.score);
    }
    else
    {
        alert("Erro a votar: " + response.error_message);
    }
    };
};

VoteHijacker.updateArrow = function(arrowType, prefix, id, state)
{
    var img = $(prefix + arrowType + "arrow" + id);
    var re = new RegExp("a" + arrowType + "(?:mod|grey)\\.png");
    img.src = img.src.replace(re, "a" + arrowType + state + ".png");
};

VoteHijacker.updateFormAction = function(formType, prefix, id, action)
{
    var form = $(prefix + formType + id);
    form.action = form.action.replace(/(?:up|down|clear)vote/, action + "vote");
};

VoteHijacker.updateScore = function(prefix, id, score)
{
    var scoreElement = $(prefix + "score" + id);
    scoreElement.innerHTML = score.score + " point" + VoteHijacker.pluralize(score.score);
    scoreElement.title = "after " + score.num_votes + " vote" + VoteHijacker.pluralize(score.num_votes);
};

VoteHijacker.pluralize = function(value)
{
    if (value != 1)
    {
    return "s";
    }
    return "";
}; 
```

以及“prototype.extend.js”上的代码：

```
// This is an extend solution to inject in the HEADERS the csrftoken
Ajax.Base.prototype.initialize = Ajax.Base.prototype.initialize.wrap(
        function (callOriginal, options) {
        var headers = options.requestHeaders || {};
        headers["X-CSRFToken"] = getCookie("csrftoken");
        options.requestHeaders = headers;
        return callOriginal(options);
        }
    ); 
```

关于如何使这两个 Ajax 请求一起工作的任何线索？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:10:37.743

问题是两个图书馆都想拥有`$`捷径。jQuery 中有一个使用“无冲突模式”的设置，但这样做需要您将`$`jQuery 代码中的所有快捷方式替换为其他内容，例如`j$`.

请参阅：[http ://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

[在同一页面中使用 JQuery 和 Prototype](https://stackoverflow.com/questions/451362/using-jquery-and-prototype-in-the-same-page)

# java - Struts 2 中的 HttpServletRequest 和静态方法线程安全

> ID：13692155
> 
> 赞同：1
> 
> 时间：2012-12-03T21:37:06.330
> 
> 标签：java, struts2, thread-safety, static-methods

假设我在这样的类中有一个静态方法：

```
public static String getSomething(HttpServletRequest request) 
```

其中，在该方法中，调用 request.getHeader("headerName") 和 request.getParameter("parameterName")。

另外，在 Struts 2 Action 中，我在 execute() 中调用了这个函数：

```
private String theString;

public String execute() throws Exception {
    theString = TheClass.getSomething(ServletActionContext.getRequest());
    ....
    ....
} 
```

假设我没有修改我的静态 getSomething(request) 函数中的请求反对，这个线程安全吗？我猜是的，因为据我了解，动作中的 HttpServletRequest 对象是线程本地的，但我不能 100% 确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:40:02.457

是的，它是完全线程安全的，因为所有变量都只从堆栈中引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:41:41.193

是的，它的线程安全，因为您将其作为参数传递。就像在代码中使用静态数学类一样。

# scala - AspectJ 编译时编织和 Scala

> ID：13692164
> 
> 赞同：3
> 
> 时间：2012-12-03T21:37:27.237
> 
> 标签：scala, maven, aspectj, compile-time-weaving

是否有可能有一个 Scala Maven 项目并在编译时在 Scala 类中编织 AspectJ 方面？

我已经能够让加载时编织工作，但到目前为止编译时没有成功。

这些方面根本没有融入到 Scala 类中。据我了解，编译时编织需要特定的 Java 编译器（AspectJ Compiler aka ajc）。据我了解，ajc 无法编译 Scala。

Scala 是否有等效的 ajc？或者也许是另一种让编译时编织与 Scala 一起工作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-19T15:20:38.150

答案 1 不是真正的编译时编织 - 它是已编译类的二进制编织。例如，如果您的 scala 类需要这些方面来正确编译，它就不会起作用。我认为 scala 中的编译时编织问题仍然是一个悬而未决的问题。

我们同意原始发布者的评估，即 ajc 不太可能知道如何编译 scala。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:14:50.320

使用 AJC 的 -inpath 开关怎么样？它接受目录或 JAR 中的 .class 文件并将其编入其中。您的 Scala 编译为 .class 文件，因此应该可以工作。毫无疑问，您有 AJC 文档，但[这里有一个链接](http://www.eclipse.org/aspectj/doc/next/devguide/ajc-ref.html)。

# ruby-on-rails - 在 Dreamhost 乘客中上传文件的最大大小

> ID：13692168
> 
> 赞同：-1
> 
> 时间：2012-12-03T21:37:58.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, dreamhost

如何设置最大大小以在 Dreamhost 乘客中上传文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:09:38.557

我不相信有办法直接在乘客中执行此操作，但限制是基于 apache 请求正文限制。因此，您需要编辑您的 httpd.conf 文件并使用 LimitRequestBody 进行设置（这意味着您还需要我们的 VPS 或专用服务器）。请在此处使用 Apache 的解决方案查看最佳答案：

[Rails 文件上传大小限制](https://stackoverflow.com/questions/2200188/rails-file-upload-size-limit)

# java - 使用玻璃窗格时鼠标调整大小光标不起作用

> ID：13692173
> 
> 赞同：1
> 
> 时间：2012-12-03T21:38:09.893
> 
> 标签：java, swing, mouseevent, glasspane

在下面的示例中，我有一张桌子。如果将鼠标悬停在表格标题列边缘上，光标将变为调整大小光标符号。但是，如果您取消注释下面的行以将玻璃窗格设置为可见，则光标不再更改 - 但您仍然可以调整列的大小并以其他方式与表格交互（例如，选择表格单元格等）。

有没有办法在使用玻璃窗格时保持相同的鼠标光标行为？

我需要一个适用于 Java 6 的解决方案。

```
public class Test extends JPanel
{
    public Test()
    {
        super(new GridLayout(1, 0));
        String[] columnNames = { "First Name", "Last Name", "Sport", "# of Years", "Vegetarian" };
        Object[][] data = { { "Kathy", "Smith", "Snowboarding", new Integer(5), new Boolean(false) },
                { "John", "Doe", "Rowing", new Integer(3), new Boolean(true) }, { "Sue", "Black", "Knitting", new Integer(2), new Boolean(false) },
                { "Jane", "White", "Speed reading", new Integer(20), new Boolean(true) }, { "Joe", "Brown", "Pool", new Integer(10), new Boolean(false) } };
        final JTable table = new JTable(data, columnNames);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
    }

    private static void createAndShowGUI()
    {
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JPanel glass = (JPanel)frame.getGlassPane();
        //glass.setVisible(true);
        Test newContentPane = new Test();
        newContentPane.setOpaque(true);
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        javax.swing.SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:44:01.520

*   `GlassPane`默认情况下使用每个`MouseEvents`，必须使用`redispatch`这些事件，然后使用`JLayer`基于`JXLayer`(Java6) 的 (Java7) 而不是`GlassPane`

*   `GlassPane`默认情况下从不消费`KeyEvents`，必须添加`KeyListener`和调用 `keyEvent.consume()`

# wkhtmltopdf - 为什么 wkhtmltopdf page-break-after 没有任何效果？

> ID：13692174
> 
> 赞同：45
> 
> 时间：2012-12-03T21:38:11.963
> 
> 标签：wkhtmltopdf

我在 Mac 上使用 wkhtmltopdf 0.10.0 rc2

我有一个像这样的html：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link href="print.css" rel="stylesheet">
    <style type="text/css" media="screen,print">
      .break{
        display: block;
        clear: both;
        page-break-after: always;
        border :1px solid red
      }
      .page-breaker {
      display: block;
      page-break-after: always;
      border :1px solid red
      }
    </style>
  </head>
  <body>
    <div class="container break">
      page 1
    </div>
    <div class="page-breaker"></div>
    <div class="container">
      page 2
    </div>
  </body>
</html> 
```

我只是尝试：

```
wkhtmltopdf test.html test.pdf 
```

但它没有产生分页符，我做错了什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-02-05T10:04:33.290

可能不相关，因为您的 pdf 使用早期版本的 wkhtmltopdf 生成正常。无论哪种方式，我都遇到了类似的问题，即没有正确应用分页符。`overflow`我的问题是分页元素的父元素具有`visible`. 这解决了我的问题：

```
* {
  overflow: visible !important;
} 
```

当然，您可以更具体地了解适用于的标签；）

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-06-08T17:06:31.153

尝试使用如下

```
 <div style="page-break-before:always;">
   //your content
</div> 
```

这应该有效。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-09-16T08:02:38.047

我用的是 wkhtmltopdf 0.12.3.2

对我来说，page-break-after 在设置边框时起作用，并且当断路器 div 是**body 的直接子级时**。

```
.page-breaker {
    clear: both;
    display: block;
    border :1px solid transparent;
    page-break-after: always;
} 
```

*break-break-before*不起作用。

*--print-media-type*不需要。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-21T18:45:00.417

我正在使用版本 wkhtmltopdf 0.12.0

对我来说，分页符仅适用于 --print-media-type。没有它，图像的分页保护可以工作，但不能在分页之后或之前。

我必须为印刷媒体制作一个特殊的 css 文件才能让它工作。

将纸张尺寸设置为“A3”或使用“溢出：可见”没有任何区别。

另请参阅[在 Rails 上使用 pdfkit 忽略表格分页符的 WKHTMLTOPDF](https://stackoverflow.com/questions/27193481/wkhtmltopdf-with-pdfkit-on-rails-ignoring-table-page-breaks)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-02T11:38:46.323

删除媒体打印后工作正常

**前：**

```
@media print {
    .page-break { height:0;page-break-after: always; margin:0; border-top:none;}
} 
```

上面的代码在新版本中不起作用。

**现在**

```
.page-break { height:0;page-break-after: always; margin:0; border-top:none;} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-13T12:31:08.840

将 wkhtmltopdf 更新到版本 0.12.5。更新后我没有出现分页问题。

用于`--disable-smart-shrinking`避免空白（如果有的话）

用于`--zoom <value>`避免页面页面（如果整个页面未显示）

# javascript - 在 jqGrid 中重新加载 dataurl 元素

> ID：13692177
> 
> 赞同：3
> 
> 时间：2012-12-03T21:38:19.683
> 
> 标签：javascript, jquery, jqgrid

我有一个带有以下选项的简单网格：

```
jQuery("#mygrid").jqGrid({
   url: 'dataurl.htm',
   datatype: 'json',
   ajaxSelectOptions: { cache: false }
   ...
   colModel: [
    { name: 'foo', index: 'foo', width: 25, stype: 'select', searchoptions:{ sopt:       
     ['eq'], dataUrl: 'someurl.htm?columnName=foo'}}
    ]
}); 
```

但是，当我调用`$("#mygrid").trigger("reloadGrid");`它时，它只加载表的数据，`dataurl.htm`但不会`foo`从`some url.htm`链接加载列的数据。

我已经在 SO 上阅读了几个类似的问题，建议这样做，`ajaxSelectOptions: { cache: false }`但这对我不起作用。

`someurl.htm`回报_`<select> <option val=''>something</option></select>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:57:23.443

这是绝对正确的问题！jqGrid的当前实现只有一个`toggleToolbar`方法可以隐藏工具栏，但工具栏本身将被创建*一次*。因此工具栏的所有属性始终保持不变。

为了解决这个问题，我写了一个`destroyFilterToolbar`非常简单的附加方法：

```
$.jgrid.extend({
    destroyFilterToolbar: function () {
        "use strict";
        return this.each(function () {
            if (!this.ftoolbar) {
                return;
            }
            this.triggerToolbar = null;
            this.clearToolbar = null;
            this.toggleToolbar = null;
            this.ftoolbar = false;
            $(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove();
        });
    }
}); 
```

[演示](http://www.ok-soft-gmbh.com/jqGrid/HowRecreateSearchingToolbar.htm)使用该方法。更改某些列的属性后，可以重新创建搜索工具栏。在下面的代码中，可以从搜索工具栏中更改某些文本的语言：

![在此处输入图像描述](../Images/db9e2a13e15cd1fe669491e2f721c73b.png)

对应的代码如下：

```
$("#recreateSearchingToolbar").change(function () {
    var language = $(this).val();

    // destroy searching toolbar
    $grid.jqGrid("destroyFilterToolbar");

    // set some searching options
    $grid.jqGrid("setColProp", "closed",
        language === "de" ?
                {searchoptions: {value: ":Beliebig;true:Ja;false:Nein"}} :
                {searchoptions: {value: ":Any;true:Yes;false:No"}});
    $grid.jqGrid("setColProp", "ship_via",
        language === "de" ?
                {searchoptions: {value: ":Beliebig;FE:FedEx;TN:TNT;IN:Intim"}} :
                {searchoptions: {value: ":Any;FE:FedEx;TN:TNT;IN:Intim"}});

    // create new searching toolbar with nes options
    $grid.jqGrid("filterToolbar", {stringResult: true, defaultSearch: "cn"});
}); 
```

# asp.net-mvc - 我可以从代码中动态更改数据注释值吗？

> ID：13692184
> 
> 赞同：1
> 
> 时间：2012-12-03T21:38:36.953
> 
> 标签：asp.net-mvc, data-annotations

我有一个具有多个字段的模型。每个字段都有数据注释：

```
[Display(AutoGeneratedField=false)] 
```

我希望能够通过代码将其动态更改为 true。这可能吗？

目标是能够在结果网格中仅显示选定的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:16:25.850

为什么不使用单独的视图模型？通常，您会为每个视图创建视图模型，而不是为多个视图创建一个视图模型，而不是使用字段可见性。除非它绝对必要。

顺便说一句，另一种方法是使用`[ScaffoldColumn(false)]`.

顺便说一句-您是否尝试过[流畅的验证](http://fluentvalidation.codeplex.com)？没有太多的第一手经验，但听说它比数据注释更健壮和灵活。我相信您可以更轻松地通过流利的验证表达您的愿望。

希望有帮助，如果没有，请告诉我。

# csv - Dojo DataGrid 和 CsvStore

> ID：13692187
> 
> 赞同：0
> 
> 时间：2012-12-03T21:38:40.013
> 
> 标签：csv, datagrid, store, dojo

我正在使用 Dojo 1.7 并且我遇到了`dojox/grid/DataGrid`and的问题`dojox/data/CsvStore`。我想创建一个`DataGrid`响应用户文本输入的道场。用户将在文本区域中输入 CSV 格式的内容，然后`CsvStore`读取该数据并将其提供给，`DataGrid`但我有一些问题和疑问。

1.  `CsvStore`并不总是按时加载。也就是说，该`_loadFinished`属性在将其提供给`DataGrid`. 我必须使用`Deferred`还是什么？这个对象没有我希望的事件属性。

2.  似乎`DataGrid`必须绝对必须`structure`声明该属性。我不确定这是否属实，有人可以告诉我吗？有没有办法绕过这个？因为如果不是这会导致我的第三个问题。

3.  如果我需要声明我的`DataGrid`结构/布局，我需要知道我需要从中提取的字段名，`CsvStore`因为我不知道我的数据是什么样的。我不确定如何执行此操作，因为我无法调用`_attributes`包含字段名称的内部属性。在我看来，我最好的选择是使用该`getAttributes(item)`方法，但我不知道是什么`item`，根据文档，这个有价值的东西是必需的。

谢谢你所有的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:50:29.040

因此，对于任何感兴趣的人，这就是我解决问题的方法。

1.  显然`CsvStore`，所有 Dojo 商店都不使用它们的主要方法`_processData`，除非被其他一些小部件（例如 Grid）调用，因此它属于同一个线程。

2.  `DataGrid`必须有一个奇怪的结构。我认为它应该是可选的

3.  没有办法检索这些字段名。我不得不使用字符串操作（悲伤的脸）。也许我错了，希望有人能告诉我怎么做。

# python - Python C-Api 线程问题

> ID：13692189
> 
> 赞同：4
> 
> 时间：2012-12-03T21:38:43.157
> 
> 标签：python, python-2.7

我正在编写一个 C 程序，它使用用 python 编写的网络库。我将 python lib 与 python C api 一起嵌入。库异步发送所有请求，并在请求完成时通过信号通知我。

那是理论上的意思。

实际上，我有两个与线程相关的问题：

1.  从 c 对 python 库的所有调用都是块状的（它们应该立即返回）
2.  python 库异步调用注册的回调（thread.start_new_thread（callback，args））。这不起作用（没有任何反应）。如果我将 python 代码更改为 callback(args) 那么它确实有效。

我做错了什么？我必须做些什么才能使多线程工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-10T03:49:11.070

我有类似的情况。

**初始工作流程**

1.  应用程序从 C++ 层开始
2.  C++层在主线程中调用Python层中的函数
3.  主线程中的Python层函数创建事件线程
4.  在 Python 层启动事件线程并返回 C++ 层
5.  主循环从 C++ 层开始
6.  如果需要，事件线程在 C++ 层调用回调函数

从一开始，事件线程就出乎意料地工作。我想这是由于我遇到的情况导致的 GIL，所以我试图从 GIL 解决这个问题。这是我的解决方案。

**分析**

首先，从[PyEval_InitThreads](https://docs.python.org/2/c-api/init.html#c.PyEval_InitThreads)中的注释，

> 当只存在主线程时，不需要 GIL 操作。...因此，最初没有创建锁。...

所以如果需要多线程，`PyEval_InitThreads()`必须在主线程中调用。而我`PyEval_InitThreads()`之前打电话`Py_Initialize()`。现在 GIL 已初始化，主线程获取 GIL。

其次，每次从 C++ 层调用 Python 函数之前，都会调用`PyGILState_Ensure()`GIL。另外，调用 Python 函数后，`PyGILState_Release(state)`会调用返回到之前的 GIL 状态。结果，在第 2 步之前`PyGILState_Ensure()`调用，在第 4 步之后`PyGILState_Release(state)`调用。

但有一个问题。从[PyGILState_Ensure](https://docs.python.org/2/c-api/init.html#c.PyGILState_Ensure)和[PyGILState_Release](https://docs.python.org/2/c-api/init.html#c.PyGILState_Release)中，这两个函数是保存当前 GIL 状态以获取 GIL，并恢复之前的 GIL 状态以释放 GIL。但是，`PyEval_InitThreads()`在主线程中调用后，主线程肯定拥有 GIL。主线程中的 GIL 状态如下：

```
/* main thread owns GIL by PyEval_InitThreads */

state = PyGILState_Ensure();
/* main thread owns GIL by PyGILState_Ensure */

...
/* invoke Python function */
...

PyGILState_Release(state);
/* main thread owns GIL due to go back to previous state */ 
```

从上面的代码示例中，主线程始终拥有 GIL，因此事件线程永远不会运行。为了克服这种情况，让主线程在调用之前不获取 GIL `PyGILState_Ensure()`。因此，在调用之后`PyGILState_Release(state)`，主线程可以释放 GIL 让事件线程运行。所以 GIL 初始化时应该立即在主线程中释放 GIL。

这里`PyEval_SaveThread()`使用。从[PyEval_SaveThread](https://docs.python.org/2/c-api/init.html#c.PyEval_SaveThread)，

> 释放全局解释器锁（如果已创建并启用线程支持）并将线程状态重置为 NULL，...

通过这样做，使用多线程嵌入 Python 是可行的。

**修改后的工作流程**

1.  应用程序从 C++ 层开始
2.  `PyEval_InitThreads();`启用多线程
3.  `save = PyEval_SaveThread();`在主线程中释放 GIL
4.  `state = PyGILState_Ensure();`在主线程中获取 GIL
5.  C++层在主线程中调用Python层中的函数
6.  主线程中的Python层函数创建事件线程
7.  在 Python 层启动事件线程并返回 C++ 层
8.  `PyGILState_Release(state);`在主线程中释放 GIL
9.  主循环从 C++ 层开始
10.  如果需要，事件线程在 C++ 层调用回调函数

# jquery - 使用带有 MVC4 的 jquery 完整日历

> ID：13692191
> 
> 赞同：0
> 
> 时间：2012-12-03T21:38:50.137
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我正在学习 MVC 和 jquery，但我有一个视图，我可以加载它，但它是空白的。

我正在尝试使用`jquery-fullcalendar`.

我将发布我的视图代码，看看我可能做错了什么。

*更新*我曾尝试使用 fullcalendars 示例代码，但它仍然永远不会让任何人知道为什么？

```
 <script>
   $(document).ready(function () {
      $('#calendar').fullCalendar({
          // put your options and callbacks here
      })
  });
</script>

  <div id='calendar'></div> 
```

我知道我只是错过了一些东西，但我就是看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:18:36.693

使用“基本”模板，我将从视图中删除 jquery 脚本标记。当我在 VS2012 中创建一个新的 MVC4 项目时，_Layout.cshtml 看起来像这样

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body>
</html> 
```

@Scripts.Render("~/bundles/jquery") 行将 jquery 脚本标记放在视图主体之后。您可以更改视图，以便在 jquery 脚本标记之后呈现 fullcalender.js 和您的文档就绪功能，如下所示

```
@{
    ViewBag.Title = "Index";
}
@section scripts {
    <link href="@Url.Content("~/Scripts/fullcalendar.css")"rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/fullcalendar.js")" type="text/javascript"></script>
    <script type ='text/javascript'>
        $(document).ready(function () {
            $('#calendar').fullCalendar({});
        });
    </script>
}
<h2>Index</h2>

<div id='calendar'></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:10:09.827

如果其他人有这个问题，我正在使用**Telerik**作为**菜单**，并且在布局中有这个代码

@(Html.Telerik().ScriptRegistrar().DefaultGroup(group => group.Combined(true).Compress(true))) @(Html.Telerik().StyleSheetRegistrar().DefaultGroup(group => group.Add ("telerik.common.css").Add("telerik.windows7.css").Combined(true).Compress(true)))

这些在**正文**中的位置，我只是将它们移到了头部，它似乎并没有影响菜单，但确实修复了完整的日历并开始渲染它

# oracle - 为什么 NHibernate 代码映射忽略我的 Oracle 大小写表名：

> ID：13692192
> 
> 赞同：1
> 
> 时间：2012-12-03T21:38:51.590
> 
> 标签：oracle, nhibernate, mapping-by-code

我正在使用带有 NHibernate 3.3.2.4000 的 Oracle 数据库。

我设置了一个单元测试来验证是否可以从表中选择实体集合。这是它的样子：

```
[TestFixture]
public class UnitOfWorkIntegrationTests
{
    private IUnitOfWork _unitOfWork;
    private INHibernateSessionFactory _nHibernateSessionFactory;
    private IActiveSessionManager _activeSessionManager;

    [SetUp]
    public void BeforeEachTest()
    {
        _nHibernateSessionFactory = new NHibernateSessionFactory();
        _activeSessionManager = new ActiveSessionManager();
        _unitOfWork = new UnitOfWork(_nHibernateSessionFactory, _activeSessionManager);
    }

    [Test]
    public void ShouldFetchOAuthMemberships()
    {
        var oauths = _unitOfWork.OAuthMemberships.ToArray();
        oauths.ShouldNotBeNull();
    }
} 
```

获取我的 OAuthMemberships 集合的行抛出了这个异常：

> 无法执行查询
> 
> [从 bckgrd_booklet_app.OAuthMembership oauthmembe0_ 中选择 oauthmembe0_.id 作为 id13_]
> 
> [SQL: select oauthmembe0_.id as id13_ from bckgrd_booklet_app.OAuthMembership oauthmembe0_]

我的 OAuthMembership 类和映射如下。如您所见，我将表名定义为“OAUTH_MEMBERSHIP”，但生成的 SQL 包含驼峰式类名。我没有定义表名约定。为什么 NHibernate 会忽略我的 Oracle 大小写表名？

```
public class OAuthMembership
{
    public virtual int Id { get; set; }
    public virtual string Provider { get; set; }
    public virtual string ProviderUserId { get; set; }

    public virtual UserProfile UserProfile { get; set; }
}

public class OAuthMembershipMap : ClassMapping<OAuthMembership>
{
    public void OAuthMembership()
    {
        Table("OAUTH_MEMBERSHIP");

        Id(x => x.Id, m => m.Column("ID"));
        Property(x => x.Provider, m => m.Column("PROVIDER"));
        Property(x => x.ProviderUserId, m => m.Column("PROVIDER_USER_ID"));

        ManyToOne(x => x.UserProfile, m => m.Column("USER_PROFILE_ID"));
    }
} 
```

* * *

这是我的 NHibernateSessionFactory：

```
public interface INHibernateSessionFactory
{
    ISession Create();
}

public class NHibernateSessionFactory : INHibernateSessionFactory
{
    private static readonly ILog Log = LogManager.GetLogger(typeof(NHibernateSessionFactory).Name);
    private readonly static ISessionFactory SessionFactory;
    public static string ConnectionString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["MyConnection"].Return(x => x.ConnectionString,
                "Data Source=myServer;User ID=bckgrd_booklet_app;Password=myPass;");
        }
    }

    static NHibernateSessionFactory()
    {
        try
        {
            var mapper = new ModelMapper();
            mapper.AddMappings(Assembly.GetExecutingAssembly().GetExportedTypes());

            HbmMapping domainMapping = mapper.CompileMappingForAllExplicitlyAddedEntities();

            var configure = new NHibernate.Cfg.Configuration().Configure();
            configure.AddMapping(domainMapping);
            configure.BuildMappings();
            configure.DataBaseIntegration(x =>
            {
                x.Driver<OracleClientDriver>();
                x.Dialect<Oracle10gDialect>();
                x.ConnectionStringName = ConnectionString;
            })
            .CurrentSessionContext<WebSessionContext>();
            SessionFactory = configure.BuildSessionFactory();

        }
        catch (Exception ex)
        {
            Log.Error("NHibernateSessionFactory did not initialize correctly.", ex);
            throw;
        }
    }

    public ISession Create()
    {
        Log.Debug("Creating new session.");
        return SessionFactory.OpenSession();
    }
} 
```

我的 ActiveSessionManager：

```
public interface IActiveSessionManager
{
    void ClearActiveSession();
    NHibernate.ISession GetActiveSession();
    void SetActiveSession(NHibernate.ISession session);
}

public class ActiveSessionManager : IActiveSessionManager
{
    [ThreadStatic]
    private static ISession _current;

    public ISession GetActiveSession()
    {
        return _current;
    }

    public void SetActiveSession(ISession session)
    {
        _current = session;
    }

    public void ClearActiveSession()
    {
        _current = null;
    }
} 
```

我的 UnitOfWork 定义的相关部分：

```
public interface IUnitOfWork
{
    //...
    IQueryable<OAuthMembership> OAuthMemberships { get; }
    IQueryable<T> All<T>();
    //...
}

public class UnitOfWork : IUnitOfWork
{
    private readonly ISession _session;

    //...

    public IQueryable<OAuthMembership> OAuthMemberships
    {
        get { return All<OAuthMembership>(); }
    }

    public UnitOfWork(
        INHibernateSessionFactory sessionFactory,
        IActiveSessionManager activeSessionManager)
    {
        _session = sessionFactory.Create();
        activeSessionManager.SetActiveSession(_session);
    }

    public IQueryable<T> All<T>()
    {
        return _session.Query<T>();
    }

    //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:40:52.427

在将 Fluent NHibernate 添加到我的项目并在那里犯了同样的错误后，我发现了我的错误。

我的 OAuthMembershipMap 没有构造函数。我错误地添加了一个名为 OAuthMembership 的 void 方法，因此我的表映射以及我的 Id 和 Property 映射失败。请参阅更正后的代码：

```
public class OAuthMembershipMap : ClassMapping<OAuthMembership>
{
    public OAuthMembershipMap()
    {
        Table("OAUTH_MEMBERSHIP");

        Id(x => x.Id, m => m.Column("ID"));
        Property(x => x.Provider, m => m.Column("PROVIDER"));
        Property(x => x.ProviderUserId, m => m.Column("PROVIDER_USER_ID"));

        ManyToOne(x => x.UserProfile, m => m.Column("USER_PROFILE_ID"));
    }
} 
```

# jquery - jQuery：包装每 2 个循环附加元素

> ID：13692193
> 
> 赞同：2
> 
> 时间：2012-12-03T21:38:55.937
> 
> 标签：jquery, loops, append

我正在使用 Google 的提要 API 并尝试以某种方式附加和包装我的标记。我从一个例子开始。

我已经为现有标记找到了这个问题的许多答案，但是我无法将其应用于循环中附加的标记。我怀疑这比我做的要简单，但还没有找到一个优雅的解决方案。

我想把每两个循环包装起来，附加`<li>`成`<ul>`这样的：

```
<div id="result">
    <ul>
        <li><a ...></li>
        <li><a ...></li>
    </ul>
    <ul>
        <li><a ...></li>
        <li><a ...></li>
    </ul>
    <ul>
        <li><a ...></li>
        <li><a ...></li>
    </ul>
</div> 
```

这是我的简化代码：

```
<!doctype html>
<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript" src='http://www.google.com/jsapi?key=[ key ]'></script><script>
    google.load("feeds", "1");
    $(function(){
      var feed = new google.feeds.Feed("[ feed URL ]");
      feed.load(function(result) {
        if (result.error)return;

        $feed = $('#result');

        for (var i = 0; i < 6; i++) {
          var entry = result.feed.entries[i];

          $feed.append(
            '<li>'+
            '<a class="headline" href="'
            + entry.link +
            '">'
            + entry.title +
            '</a><span>'
            + entry.publishedDate + 
            ' | ' 
            + entry.author + 
            '</span></li>'
            );
        }
      });
    });
  </script>
</head>
<body>
  <div class="articles">
    <div id="result">

    </div>
  </div><!-- e .articles -->
</body>
</html> 
```

我可以添加什么来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:45:35.773

您已经在使用循环遍历所有结果`for`。

[您可以使用javascript 模数运算符](http://www.java2s.com/Tutorial/JavaScript/0040__Operators/Modulus.htm)检查您是否在位置 0、2 或 4，并相应地添加`<ul>`and`</ul>`标记

例如在 for 循环中打开`ul`标签

```
if (i%2 == 0)
   $feed.append('<ul>' + '<li>' ...); 
```

并关闭`ul`标签

```
if (i%2 == 1)
   $feed.append(... '</li>' + '</ul>'); 
```

**旁注**：更优雅的是，您可以使用[jQuery each 函数](http://api.jquery.com/jQuery.each/)来迭代数组。

# jquery - 使用 Hammer.js 和 .on() 绑定事件

> ID：13692194
> 
> 赞同：8
> 
> 时间：2012-12-03T21:38:56.987
> 
> 标签：jquery, web-applications, touch

[Hammer.js](http://eightmedia.github.com/hammer.js/)为我的 Web 应用程序添加了 javascript 触摸和手势支持。我的问题在于将 .hammer() 与 .ajax() 调用文档准备好的之前不存在的 DOM 元素一起使用。

以前，我使用过类似的东西：

```
$('#parent').on('click', '.child', function(e){
    $(this).hammer()...
}); 
```

但是，我需要能够在不调用 .on() 的情况下将事件与 Hammer 绑定，因为 .on() 事件类型与 Hammer 事件类型不匹配。任何帮助表示赞赏 - 我绝不是 jQuery 天才，也不是非常熟悉事件绑定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T15:31:50.850

# 试试 toe.js

受[Hammer.js](http://eightmedia.github.com/hammer.js/)启发的库是[toe.js](https://github.com/visiongeist/toe.js)，它使用 jQuery 特殊事件 API，其中 Hammer.js 使用自定义实现。

因此，无需对您的元素进行任何进一步的初始化，您应该能够像这样使用它：

```
$('#parent').on('tap', '.child', function(e){
  // ... Do something
}); 
```

我已切换到 toe.js，因为backbone.js 使用标准的jQuery 事件API。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T22:33:21.120

查看[jquery.hammer.js](https://github.com/EightMedia/hammer.js/blob/master/jquery.hammer.js)源代码，您应该可以毫无问题地委派事件。

```
$("#parent").on("doubletap",".child",dostuff); 
```

只需确保`.hammer()`在将元素添加到页面时调用它们即可。

# javascript - 使用滑块提交表单后关注滑块

> ID：13692198
> 
> 赞同：1
> 
> 时间：2012-12-03T21:39:11.167
> 
> 标签：javascript, jquery-ui, ruby-on-rails-3.2, uislider

我正在使用 jquery ui 滑块，当滑块滑动时，会提交一个表单。代码如下：

```
<script type="text/javascript">
    $(function() {
        $( "#slider" ).slider({ 

                      min: 2000,
                      max: 2008,
                      value:<%=@epoch.start_year %>,
                      slide: function( event, ui ) {
                           $("#slider_value").html(ui.value);
                           $("form#new_epoch").submit(); 
                           }                          
        });

    });
</script> 
```

当我将滑块移动到不同的值时，表单会提交，但是当页面重新加载时，滑块上的焦点会丢失。我要做的是移动滑块，每次我移动滑块时页面都会更新，并且滑块保持焦点。我正在使用箭头键来移动滑块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:16:18.113

假设您不想使用 ajax 并在页面中加载部分 HTML，并且您想继续重新加载整个页面，那么您可以在页面加载时将焦点设置在滑块句柄上`$(".ui-slider-handle").focus();`：

```
<script type="text/javascript">
$(function() {
    $( "#slider" ).slider({ 

                  min: 2000,
                  max: 2008,
                  value:<%=@epoch.start_year %>,
                  slide: function( event, ui ) {
                       $("#slider_value").html(ui.value);
                       $("form#new_epoch").submit(); 
                       }                          
    });
    $(".ui-slider-handle").focus();
});
</script> 
```

# asp.net-mvc - 在 mvc 应用程序中转换 xml 文件

> ID：13692199
> 
> 赞同：0
> 
> 时间：2012-12-03T21:39:13.787
> 
> 标签：asp.net-mvc, asp.net-mvc-4, publishing, publish-profiles

我正在使用 .net MVC4 Web 应用程序。我使用发布配置文件来发布我的应用程序，并且一切正常。

我转换了 web.config，我为每个部署到 qa、生产等的环境设置了一个发布配置文件。当我为特定环境构建包时，转换工作得很好。

在我的 Web 应用程序中，我有许多其他 xml 文件，这些文件因环境而异。是否也可以转换这些文件以进行部署？如果是这样，如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:55:32.970

我相信[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)就是为此目的而设计的。

# c - C 字符串文字“对于字符来说太大”

> ID：13692200
> 
> 赞同：12
> 
> 时间：2012-12-03T21:39:17.910
> 
> 标签：c, string, literals

使用 MSVC 2010，我尝试在 C 或 C++ 模式下编译它（需要在这两种模式下都可以编译），但它不起作用。为什么？我认为并在文档中发现 '\x' 将接下来的两个字符作为十六进制字符，而不是更多（使用 \X 时为 4 个字符）。

我还了解到，无论如何在 C 源代码中都没有可移植的方式来使用 ASCII 之外的字符代码，那么我该如何指定一些德语 ISO-8859-1 字符呢？

```
int main() {
     char* x = "\xBCd";  // Why is this not char(188) + 'd'
}

// returns  test.c(2) : error C2022: '3021' : too big for character
// and a warning with GCC 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T21:47:48.317

不幸的是，您偶然发现了这样一个事实，即`\x`会读取每一个看起来是十六进制^(1,2)的最后一个字符，而您需要将其分解：

```
const char *x = "\xBC" "d"; /* const added to satisfy literal assignment probs */ 
```

考虑这个程序的输出：

```
/* wide.c */
#include <stdio.h>
int main(int argc, char **argv) 
{
    const char *x = "\x000000000000021";
    return printf("%s\n", x);
} 
```

编译并执行：

```
C:\temp>cl /nologo wide.c
wide.c

C:\temp>wide
! 
```

1.  在 VS 2k12、2k10、2k8 和 2k5 随附的 Microsoft C++ 编译器上测试
2.  在[gcc 4.3.4](http://ideone.com/yXkbnM)上测试。

# haskell - 正确获取 Tries 的类型声明

> ID：13692202
> 
> 赞同：1
> 
> 时间：2012-12-03T21:39:24.263
> 
> 标签：haskell, type-inference, type-declaration

我正在使用这个[`list-tries`包](http://hackage.haskell.org/package/list-tries)：

```
import qualified Data.ListTrie.Patricia.Map as TM
import qualified Data.ListTrie.Patricia.Set as TS
import qualified Data.Map as Map 
```

我有一个字符串列表，我想将其存储在由 Trie-Set 组成的 Trie-Map 中，如下所示：

```
-- vocabs :: [String]
trie = TM.fromListWith' (flip TS.union) $ map (\v->(sort v, TS.singleton v)) vocabs 
```

（这是为了在外部树中查找一组字母，然后在结果树中查找特定的字母组合）。

我可以理解 Haskell 不知道 trie 的确切类型，因为我没有指定使用哪种类型的映射。我想我可以通过添加声明来做到这一点

```
trie :: TM.TrieMap Map.Map Char (TS.TrieSet Map.Map Char) 
```

但这似乎还不够。我仍然收到错误消息，例如

> `(Data.ListTrie.Base.Map.Map Map.Map Char)` 没有因使用而产生的实例`TrieM.fromListWith'`
> 
> 可能的解决方法：为 `(Data.ListTrie.Base.Map.Map Map.Map Char)`
> 
> 在表达式中：`TrieM.fromListWith' TrieS.union`
> 
> 在表达式中：…</p>

和类似的`TS.singleton`,`TM.lookup`和.`TS.member``TS.findMin`

我似乎没有得到实际的问题，也不知道如何将类型声明添加到 [inline] 表达式（我已经看过几次，但没有得到语法）。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:07:27.853

我无法重现该问题。

如果没有 for 的签名`trie`，我会得到 - 不出所料 - 一个*模棱两可的类型变量*错误（嗯，两个），由于问题中所述的原因，以及一个可能的原因（这确实是原因，它是单态性限制），以及两个可能的修复（禁用单态限制使其编译，但给出明确的类型签名是更好的修复）。错误消息附加在下面，用于过度感兴趣的灵魂（它来自 7.6.1）。

使用类型签名，它可以干净地编译。

鉴于此，我无法确定地诊断问题，但经验与您收到的错误消息一起提供了可能的原因。

您收到一条非常具体的消息，表明所需的实例不在范围内：

```
No instance for (Data.ListTrie.Base.Map.Map Map.Map Char) arising from a use of TrieM.fromListWith'

Possible fix: add an instance declaration for (Data.ListTrie.Base.Map.Map Map.Map Char) 
```

另一方面，list-tries 包明确提供了这样一个实例。

这种情况的典型原因是涉及两个不同的类或两种不同的类型，它们来自同一包的不同版本。

在这种情况下，您可能已经构建`list-tries`了 的一个版本`containers`，然后安装了不同版本的`containers`，并且从较新的包版本`import qualified Data.Map as Map`导入了类型，而 in中的实例用于旧版本。`Map.Map``list-tries`

`containers`检查您是否安装了多个版本

```
ghc-pkg list containers 
```

检查`containers`您`list-tries`依赖的版本

```
ghc-pkg describe list-tries 
```

在`depends`该输出的字段中，会出现类似

```
containers-0.5.0.0-e49be7a240765a4edc5c09f677ec6a81 
```

列出包版本和构建`containers`包的 ABI 哈希。`list-tries`

如果版本与您安装的最新版本不对应，`containers`则会出现上述情况，除非`containers`在调用 GHC 时明确指定要使用的版本，直接使用`-package`标志或间接通过`.cabal`文件。

如果是这种情况，您可以

*   `containers`每次使用时明确指定要使用的版本`list-tries`
*   注销较新版本的`containers`（可能会破坏其他软件包）
*   `list-tries`针对新版本重建`containers`

* * *

```
TrieTest.hs:12:8:
    No instance for (Data.ListTrie.Base.Map.Map map0 Char)
      arising from a use of TM.fromListWith'
    The type variable `map0' is ambiguous
    Possible cause: the monomorphism restriction applied to the following:
      trie :: TM.TrieMap map0 Char (TS.TrieSet map1 Char)
        (bound at TrieTest.hs:12:1)
    Probable fix: give these definition(s) an explicit type signature
                  or use -XNoMonomorphismRestriction
    Note: there are several potential instances:
      instance Eq k =>
               Data.ListTrie.Base.Map.Map Data.ListTrie.Base.Map.AList k
        -- Defined in `Data.ListTrie.Base.Map'
      instance Ord k => Data.ListTrie.Base.Map.Map Map.Map k
        -- Defined in `Data.ListTrie.Base.Map'
      instance Enum k =>
               Data.ListTrie.Base.Map.Map Data.ListTrie.Base.Map.WrappedIntMap k
        -- Defined in `Data.ListTrie.Base.Map'
    Possible fix:
      add an instance declaration for
      (Data.ListTrie.Base.Map.Map map0 Char)
    In the expression: TM.fromListWith' (flip TS.union)
    In the expression:
      TM.fromListWith' (flip TS.union)
      $ map (\ v -> (sort v, TS.singleton v)) vocabs
    In an equation for `trie':
        trie
          = TM.fromListWith' (flip TS.union)
            $ map (\ v -> (sort v, TS.singleton v)) vocabs

TrieTest.hs:12:31:
    No instance for (Data.ListTrie.Base.Map.Map map1 Char)
      arising from a use of `TS.union'
    The type variable `map1' is ambiguous
    Possible cause: the monomorphism restriction applied to the following:
      trie :: TM.TrieMap map0 Char (TS.TrieSet map1 Char)
        (bound at TrieTest.hs:12:1)
    Probable fix: give these definition(s) an explicit type signature
                  or use -XNoMonomorphismRestriction
    Note: there are several potential instances:
      instance Eq k =>
               Data.ListTrie.Base.Map.Map Data.ListTrie.Base.Map.AList k
        -- Defined in `Data.ListTrie.Base.Map'
      instance Ord k => Data.ListTrie.Base.Map.Map Map.Map k
        -- Defined in `Data.ListTrie.Base.Map'
      instance Enum k =>
               Data.ListTrie.Base.Map.Map Data.ListTrie.Base.Map.WrappedIntMap k
        -- Defined in `Data.ListTrie.Base.Map'
    Possible fix:
      add an instance declaration for
      (Data.ListTrie.Base.Map.Map map1 Char)
    In the first argument of `flip', namely `TS.union'
    In the first argument of TM.fromListWith', namely `(flip TS.union)'
    In the expression: TM.fromListWith' (flip TS.union) 
```

# java - 即使对于小型程序，Java 内存使用率也很高

> ID：13692206
> 
> 赞同：33
> 
> 时间：2012-12-03T21:39:47.950
> 
> 标签：java, memory, ram

我有几个用 java 编写的简单应用程序，其中一个是作为小部件编写的。令我惊讶的是，即使是小型应用程序也使用了多少 RAM。

我写了以下内容，看看它是我的程序中的错误，还是一般的 Java 问题：

```
public class ram {
    public static void main(String[] args){
    while(true)System.out.print("Hello World");//while loop to give me time to check RAM usage
    }
} 
```

然后编译并运行它，`java ram`它给了我以下 RAM 使用情况：

```
The process java (with pid 4489) is using approximately 43.3 MB of memory.
34460 KB    [heap]
7088 KB /usr/lib/jvm/java-7-openjdk/jre/lib/amd64/server/libjvm.so
1712 KB /usr/lib/jvm/java-7-openjdk/jre/lib/rt.jar
136 KB  [stack:4495]
120 KB  /usr/lib/jvm/java-7-openjdk/jre/lib/amd64/libjava.so 
```

这不是太高了吗？尤其是 34MB 的堆。我的系统是 ArchLinux x86_64 和 openjdk-7。

有什么方法可以最小化 JVM 使用的 RAM 量吗？

**编辑**：我尝试使用 -Xmx 标志，这就是我得到的（1281k 是让我开始的最小的）：

```
java -Xmx1281k ram
The process java (with pid 4987) is using approximately 27.6 MB of memory.
18388 KB    [heap] 
```

相比之下，Python2 使用 4.4MB，Mono 使用 4.3MB。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-07-01T11:36:32.573

我经常看到与此类似的问题，但我还没有看到令人满意的答案。

我最常看到的答案是愤怒的“你为什么在乎？” 答案。有些人花了很多心思和精力来提出这个问题，而提出这个问题的人似乎很愚蠢。

有些人会用长篇大论来回答这个问题，包括 Java 分配的不同类型的内存、为什么这样做以及应该查看哪些命令行参数。（很少有人会非常具体）

事实是，对于小型实用程序，Java 在大多数操作系统上都是内存占用者。效用越小，它就越明显。Java 开发人员长期以来一直习惯于处理或忽略这一事实。

看似异常的内存使用的原因很多。每个线程为其堆栈获取一定数量的内存。无论程序多么简单，例如垃圾清理、RMI 等，都会有几个线程启动。在 Windows/64 位上，每个线程 1MB。默认情况下会加载一堆类和所有类。我敢肯定，幕后还有很多其他事情正在发生。

Java 做出了其他语言没有的权衡选择。加载时间比大多数其他语言慢。初始内存要求更高。最常用的字符串比大多数人意识到的要消耗更多的内存。还有无数其他的。许多情况下的好处确实得到了回报。像 Hello World 这样的东西比其他任何东西都更能展示这些选择的成本。简单的多线程和接近原生的性能等好处确实对 Hello World 没有任何好处。

不幸的是，要真正最小化简单应用程序使用的内存，您可以做的事情并不多。有前面提到的命令行开关，我敢肯定，反复试验可以将您报告的使用量缩小到 ~10-15mb 水平，但是您花在弄清楚它们上的那些选择和时间并不适用于各种各样的未来应用。对于下一个应用程序，您必须再次执行相同的过程。加入一个 GUI 界面和一些日志记录以及另一个或两个通用库，您的基数将很快达到 60mb。

你没有做错什么。这就是 Java 的工作方式。你会习惯的。因此，您有时会选择另一种语言，这也没关系。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-24T16:57:11.213

# php - 查询返回数据以及来自另一个表的数据

> ID：13692207
> 
> 赞同：1
> 
> 时间：2012-12-03T21:39:54.940
> 
> 标签：php, mysql, sql

我在 PHP 编程方面很有经验，对于我正在做的一个小项目，我想从数据库中获取一些信息

我用单例制作了自己的 sql 处理程序，因此连接不会溢出。

这是我的查询功能：

```
<?php    
public static function query($q){
        $a = '';
        $b = '';
        self::$queries[] = $q;
        if(strpos($q, 'INSERT') !== false){
            if(!mysql_query($q)){
                self::$err[] = mysql_error()."<br />Query: ".$q;
                return false;
            }
            return true;
        } elseif(strpos($q, 'SELECT') !== false){
            echo $q;
            if(!$res = mysql_query($q)){
                self::$err[] = mysql_error()."<br />Query: ".$q;
            return false;
            } else {
                if(mysql_num_rows($res) > 1){

                    while($r = mysql_fetch_assoc($res)){
                        foreach($r as $key => $val){
                            self::$results[$r['id']][$key] = $val;
                        }
                    }
                    return self::$results;
                } else {
                    $res = mysql_fetch_assoc($res);
                    foreach($res as $key => $val){
                            self::$results[$res['id']][$key] = $val;
                    }
                    return self::$results;
                }
            }
        } elseif(strpos($q, 'UPDATE') !== false){
            if(!mysql_query($q)){
                self::$err[] = mysql_error()."<br />Query: ".$q;
            return false;
            }
            return true;
        } elseif(strpos($q, 'DELETE') !== false){
            if(!mysql_query($q)){
                self::$err[] = mysql_error()."<br />Query: ".$q;
            return false;
            }
            return true;
        }
    }
?> 
```

现在我想从我创建的表中获取一些数据（表包含 2 个外键）表：

```
 CREATE TABLE IF NOT EXISTS `loc_npc` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `loc_id` int(11) NOT NULL,
  `npc_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `loc_id` (`loc_id`),
  KEY `npc_id` (`npc_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

ALTER TABLE `loc_npc`
  ADD CONSTRAINT `loc_npc_ibfk_2` FOREIGN KEY (`npc_id`) REFERENCES `npcs` (`id`),
  ADD CONSTRAINT `loc_npc_ibfk_1` FOREIGN KEY (`loc_id`) REFERENCES `locations` (`id`); 
```

我运行这个查询时的问题`SELECT id, loc_id, npc_id FROM loc_npc WHERE loc_id = 9` 是它以某种方式从另一个表返回数据，以及正确的数据。

查询在另一个处理程序中运行：

```
public function getLocationNpc($id){
    //return $this->sql->query("SELECT e.`name`, e.`desc`, e.`id` FROM npcs e LEFT JOIN(loc_npc i CROSS JOIN locations l) ON (e.id = i.npc_id AND i.loc_id = l.id) WHERE i.loc_id = $id");
    $npcH = new npcHandler();
    $npcId = $this->sql->query("SELECT id, loc_id, npc_id FROM loc_npc WHERE loc_id = $id");
    echo '<pre>'.print_r($npcId, true).'</pre>';
    foreach($npcId as $nId){
        $npcArr[] = $npcH->getNpc($nId['npc_id']);
    }
    return $npcArr;
} 
```

我在 phpmyadmin 中测试了查询，它只返回正确的数据，这与通过我的处理程序执行的查询不同。

我很确定这是一个小而愚蠢的东西，但我似乎无法找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:33:46.663

您似乎没有清除`self::$results`任何地方的内容 - 您是否从之前运行的查询中获得结果？

# java - Project Coin 的收藏增强功能会出现在 JDK8 中吗？

> ID：13692213
> 
> 赞同：21
> 
> 时间：2012-12-03T21:40:14.237
> 
> 标签：java, java-7, jsr, java-8

最初[Project Coin](http://openjdk.java.net/projects/coin/)[增强了对集合](http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001108.html)的支持，例如`list[3]`代替`list.get(3)`和`map["hello"] = 27`代替，`map.put("hello", 27)`但它们[不在 jdk7 中](https://blogs.oracle.com/darcy/entry/project_coin_javaone_2010)。他们会在jdk8中吗？我找不到是或否的明确答案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T23:35:22.153

Brian Goetz briefly mentions list, set, map (and other possible) literals in this post in the Project Lambda mailing list from 30th May:

[http://mail.openjdk.java.net/pipermail/lambda-dev/2012-May/004979.html](http://mail.openjdk.java.net/pipermail/lambda-dev/2012-May/004979.html)

> To illustrate what I mean by "we could do better", here's an alternative proposal that gets far more mileage out of #: structured literals. While these plans are not in place for 8, we have already stated our desire to add structured literals for lists, maps, sets, etc. # as a prefix symbol, combined with delimiters, gives us a far higher return-on-syntax as a structured literal builder (as a bonus, # is already associated with structured literals in a lot of languages, going all the way back to many early assembly languages where # was the immediate addressing mode.)

So to me it seems that even the collection literals won't make it into JDK 8, let alone the get/set/put operators. It's a pity.

Also I do not see anything relating to collection literals or new operators in the list of JDK 8 milestones:

[http://openjdk.java.net/projects/jdk8/milestones](http://openjdk.java.net/projects/jdk8/milestones)

# javascript - 在另一个函数中只运行一次点击函数

> ID：13692217
> 
> 赞同：0
> 
> 时间：2012-12-03T21:40:20.760
> 
> 标签：javascript, jquery, click

因此，当有人单击具有特定类名（其中 10 个类）的元素时，我正在运行一个函数。然后在该函数中，我有另一个单击侦听器，用于具有另一个类名（另一个 10）的元素。我希望第二次点击功能在第一次点击后只发生一次。

所以理想情况下，有人会从一组 10 个中单击某些东西，然后我会从中提取数据并在有人单击另一组 10 个元素中的一个元素时应用它。然后为了单击第二组 10 个元素，他们将不得不单击又是第一组的东西。

我在解决这个问题时遇到了麻烦，我尝试了某种 .one 实现。

```
 $('.words_col .wrap').click(function(){
   theFunction(this)
 }) 
```

然后

```
 function theFunction(e) {
   $('.examples_col .wrap').click(function(){
     //allow only once.
   })
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:48:10.017

```
$('.words_col .wrap').click(function(){
   theFunction(this);
 });

function theFunction(e) {
   var oncer = true;
   $('.examples_col .wrap').click(function(){
     if(!oncer){return false;}
     oncer = false;
     //allow only once.
   })
 } 
```

我将其添加为替代方法，`.one`因为您选择了多个元素，并且`.one`将允许单击每个元素，而不是单击总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:44:39.457

[one()](http://api.jquery.com/one/)将只附加一次点击：

```
$('.words_col .wrap').on('click', function(){
   $('.examples_col .wrap').one('click', function(){
       //works only once
   });
}); 
```

# sencha-touch - 在浮动组件外点击掩码时调用函数

> ID：13692220
> 
> 赞同：0
> 
> 时间：2012-12-03T21:40:37.060
> 
> 标签：sencha-touch

我正在开发 Sencha 触摸应用程序。在侦听器内部，我设置了一个将 hideOnMaskTap 设置为 true 的面板（基于[浮动组件文档](http://docs.sencha.com/touch/2-0/#!/guide/floating_components)中的代码）：

```
onTap: function() {

    Ext.Viewport.add({
        xtype: 'panel',
        modal: true,
        hideOnMaskTap: true,
        ...
} 
```

这按预期工作。除了隐藏面板之外，我还想在用户点击遮罩时调用一个函数。在查看了 sencha 文档并用谷歌搜索了很多东西之后，我一直无法找到一种方法来进行这样的调用。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:39:20.547

当 modal:true 和 hideOnMaskTap:true 时，一旦点击遮罩，组件就会被隐藏。这将触发隐藏事件。

```
hide( Ext.Component this, Object eOpts )
Fires whenever the Component is hidden 
```

在此事件的处理程序中编写代码。

# java - java中的字谜算法

> ID：13692221
> 
> 赞同：10
> 
> 时间：2012-12-03T21:40:44.670
> 
> 标签：java, algorithm, data-structures, anagram

我想做字谜算法，但这段代码不起作用。我的错在哪里？例如 des 和 sed 是字谜，但输出不是字谜 同时我必须使用字符串方法。不是数组。:)

```
public static boolean isAnagram(String s1 , String s2)
{
    String delStr="";
    String newStr="";

    for(int i=0;i<s1.length();i++)
    {
        for(int j=0 ; j < s2.length() ; j++)
        {
            if(s1.charAt(i)==s2.charAt(j))
            {
                delStr=s1.substring(i,i+1);
                newStr=s2.replace(delStr,"");
            }
        }           
    }

    if(newStr.equals(""))
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-03T21:46:31.143

一种更简单的方法可能是对两个字符串中的字符进行排序，然后比较它们是否相等：

```
public static boolean isAnagram(String s1, String s2){

        // Early termination check, if strings are of unequal lengths,
        // then they cannot be anagrams
        if ( s1.length() != s2.length() ) {
            return false;
        }
        s1=s1.toLowerCase();
        s2=s2.toLowerCase();
        char[] c1 = s1.toCharArray();
        char[] c2 = s2.toCharArray();
        Arrays.sort(c1);
        Arrays.sort(c2);
        String sc1 = new String(c1);
        String sc2 = new String(c2);
        return sc1.equals(sc2);
} 
```

我个人认为它比嵌套的 for-loops =p 更具可读性

这具有**O(n log n)**运行时复杂度，其中`n`是较长字符串的长度。

编辑：这不是最佳解决方案。请参阅@aam1r 的答案以了解最有效的方法（即您应该在面试中实际说的话）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-03T22:04:48.550

这可以**使用恒定空间在线性时间内**完成。这是帮助您入门的伪代码：

```
// Create new hashtable/hashmap to keep track of how many times each character
// is being used
character_map -> new hash map

// Initial check. If lengths are not the same, they can't be anagrams.
if s1.length != s2.length:
    throw exception "Not anagrams"

// Add all characters from s1 to hashmap. Increment the value to keep track of
// number of occurences
foreach character c1 in s1:
    character_map[c1]++

// Iterate through all character in s2 and decrement count of each character.
foreach character c2 in s2:
    character_map[c2]--

// If they are anagrams, each character should be at "0" count at the point.
// If we come across a character that is not, it means that they are not anagrams
foreach key k, value v in character_map:
    if v != 0:
            throw exception "Not anagrams" 
```

此代码不排序，因此可以使用简单的循环来完成。总运行时间为 O(n)，总空间为 O(1)——因此是最快的解决方案。您可以在哈希图中拥有的元素数量是恒定的（即您知道字母集中有多少项目）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-03T21:42:08.650

```
if(s1.charAt(i)==s2.charAt(j))
        delStr=s1.substring(i,i+1);
        newStr=s2.replace(delStr,""); 
```

这段代码很好地展示了为什么你应该总是`curly braces`在你的 . 周围`if`有，即使只有一个语句。你的第二个任务实际上是在 , 之外`if-condition`并且总是会发生。

检查两个字符串的最佳方法`Anagram`是将它们转换为字符数组`(String#toCharArray)`。然后使用`Arrays.sort`方法对它们进行排序。并对它们进行比较。

* * *

**更新 ： -**

如果您只想使用`String`方法，那么您实际上不需要嵌套循环。你可以只用一个。

这是您修改后的代码：-

```
public static boolean isAnagram(String s1 , String s2){

    if (s1.length() != s2.length()) {
        return false;
    }

    for(int i = 0; i < s2.length(); i++) {

            if( !s1.contains("" + s2.charAt(i))) {
                return false;
            }

            s1 = s1.replaceFirst("" + s2.charAt(i), "");
            s2 = s2.replaceFirst("" + s2.charAt(i), "");
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-03T21:47:04.663

更有效的是按排序顺序比较字符串。

```
public static boolean isAnagram(String s1 , String s2) {
    return s1.length() == s2.length() 
        && checkSum(s1) == checkSum(s2)
        && Arrays.equals(lettersSorted(s1), lettersSorted(s2));
}

static long checkSum(String s) {
    long sqrSum = 0;
    for(int i = 0; i < s.length(); s++) {
       char ch = s.charAt(i);
       sqrSum += ch + (1L << ch);
    }
}

static char[] lettersSorted(String s) {
    char[] chars = s.toCharArray();
    Arrays.sort(chars);
    return chars;
} 
```

这是一个 O(N ln N) 算法，但如果字符串通常不是字谜，则平均为 O(N)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-03T21:47:59.897

我不确定您要做什么，但我很确定它不会起作用（并且它会在`O(n^2)`.`O(n log n)`

```
public static boolean isAnagram(String s1, String s2){
  if (s1.length() != s2.length()) return false;

  char[] c1 = s1.toCharArray();
  char[] c2 = s2.toCharArray();

  Arrays.sort(c1);
  Arrays.sort(c2);

  for(int i = 0; i < c1.length; i++) {
    if(c1[i] != c2[i]) return false;
  }

  return true;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-02-27T05:51:50.847

确定字符串是否为 Anagram 有多种可能的解决方案。1.使用`Array.sort()`预定义的方法

```
String string1 = "abc";
String string2 = "bca";
char[] chars = string1.toCharArray();
char[] chars2 = string2.toCharArray();
Arrays.sort(chars);
Arrays.sort(chars2);
string1 = new String(chars);
string2 = new String(chars2);
if (string1.equalsIgnoreCase(string2)) {
  System.out.println("Anagram");
} else {
  System.out.println("Not Anagram");
} 
```

时间复杂度：`Ω(n log n)` 2.通过迭代法

```
char [] charArray = str.toCharArray();
if(str.length() == str1.length()){
    for(char ch : charArray){
        if(str1.indexOf(ch) == -1){
            System.out.println("Not Anagram");
        } 
    }    
    System.out.println("Anagram");
} else {
    System.out.println("Not Anagram");
} 
```

时间复杂度：`Ω(n)`

虽然，第一个算法更具可读性，第二个算法确实执行得更快。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-03T22:05:12.350

它不起作用的原因：

以“des”和“sed”为例。

在匹配的最后一次迭代中，它将评估：

```
if(s1.charAt(i)==s2.charAt(j))
{
    delStr=s1.substring(i,i+1);
    newStr=s2.replace(delStr,"");
} 
```

这将是： if( "s" == "s" )

然后它将进入 if 块，并评估

```
newStr = "sed".replace("s",""); 
```

这会给你“ed”，而不是一个空字符串。

这个故事的寓意是，你总是从 s2 中替换字符减去一个字符，这永远不会是空的。

无论如何，使用 String.replace() 是不好的，因为默认情况下它将替换字符的所有实例。使用 String.replace()，它会将“sed”视为“seeeeeeed”的字谜。你最好使用 String.replaceFirst()。

无论如何，出发点是进行以下修改：

```
String newStr = s2;
...
// inside if block
newStr = newStr.replaceFirst( delStr, "" ); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-05T06:46:24.807

```
import java.util.Scanner;

public class Anagrams {

static boolean isAnagram(String a, String b) {
    a = a.toLowerCase();
    b = b.toLowerCase();
    if (a.length() != b.length()) {
        return false;
    }

    char[] chars = a.toCharArray();
    for (char c : chars) {
        int index = b.indexOf(c);
        if (index != -1) {
            b = b.substring(0, index) + b.substring(index + 1, b.length());
        } else {
            return false;
        }
    }
    return b.isEmpty();
}

public static void main(String[] args) {
    Scanner scan = new Scanner(System.in);
    String a = scan.next();
    String b = scan.next();
    scan.close();
    boolean ret = isAnagram(a, b);
    System.out.println((ret) ? "Anagrams" : "Not Anagrams");

    }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-08-21T23:58:10.723

下面是一个简洁的代码片段，它在两个字符串的单次迭代以及 256 个元素数组的最终迭代中确定两个字符串是否是字谜。这种方法避免了对字符串中的字符进行排序以及通过在映射数组中记录字符计数来转换字符串/字符数组。

```
static boolean isAnagram(String s1, String s2) {
    if (s1.length() != s2.length()) return false;
    int n = s1.length();
    int[] charMap = new int[256];
    for (int i = 0; i < n; i++) {
        char c1 = s1.charAt(i);
        charMap[c1]++;
        char c2 = s2.charAt(i);
        charMap[c2]--;
    }
    for (int i = 0; i < charMap.length; i++) {
        if (charMap[i] != 0) return false;
    }
    return true;
} 
```

此代码基本上递增和递减对应于字符的数组中的索引位置。如果任何数组元素在迭代结束时不为零，则增量和减量的数量不相等，因此字符串包含不同的字符并且不能是彼此的字谜。

鉴于此算法迭代两个相同大小的字符串一次，运行时间为 O(n)。空间复杂度为 O(1)，因为 charMap 始终根据字符集要求保持不变。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-01-27T19:27:07.150

```
public boolean checkAnagram(String s, String t) {
    s = s.toLowerCase();
    t = t.toLowerCase();

    // We can ignore blanks
    char[] word1 = s.replaceAll("\\s","").toCharArray();
    char[] word2 = t.replaceAll("\\s","").toCharArray();

    // Anagrams length should be the same
    if (word1.length != word2.length) {
        return false;
    }

    // Sorting arrays is pretty fast, it can be O(logn) 
    Arrays.sort(word1);
    Arrays.sort(word2);

    if (Arrays.equals(word1, word2)) {
        return true;
    }

    return false;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-04T13:05:53.213

O(n) 解决方案，无需任何排序且仅使用一张地图。还添加了其他解决方案中缺少的正确空检查。

```
public boolean isAnagram(String leftString, String rightString) {
  if (leftString == null || rightString == null) {
    return false;
  } else if (leftString.length() != rightString.length()) {
    return false;
  }

  Map<Character, Integer> occurrencesMap = new HashMap<>();

  for(int i = 0; i < leftString.length(); i++){
    char charFromLeft = leftString.charAt(i);
    int nrOfCharsInLeft = occurrencesMap.containsKey(charFromLeft) ? occurrencesMap.get(charFromLeft) : 0;
    occurrencesMap.put(charFromLeft, ++nrOfCharsInLeft);
    char charFromRight = rightString.charAt(i);
    int nrOfCharsInRight = occurrencesMap.containsKey(charFromRight) ? occurrencesMap.get(charFromRight) : 0;
    occurrencesMap.put(charFromRight, --nrOfCharsInRight);
  }

  for(int occurrencesNr : occurrencesMap.values()){
    if(occurrencesNr != 0){
      return false;
    }
  }

  return true;
} 
```

和不太通用的解决方案，但更快一点：

```
public boolean isAnagram(String leftString, String rightString) {
  if (leftString == null || rightString == null) {
    return false;
  } else if (leftString.length() != rightString.length()) {
    return false;
  }

  char letters[] = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};
  Map<Character, Integer> occurrencesMap = new HashMap<>();
  for (char l : letters) {
    occurrencesMap.put(l, 0);
  }

  for(int i = 0; i < leftString.length(); i++){
    char charFromLeft = leftString.charAt(i);
    Integer nrOfCharsInLeft = occurrencesMap.get(charFromLeft);
    occurrencesMap.put(charFromLeft, ++nrOfCharsInLeft);
    char charFromRight = rightString.charAt(i);
    Integer nrOfCharsInRight = occurrencesMap.get(charFromRight);
    occurrencesMap.put(charFromRight, --nrOfCharsInRight);
  }

  for(Integer occurrencesNr : occurrencesMap.values()){
    if(occurrencesNr != 0){
      return false;
    }
  }

  return true;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-08-22T03:03:41.727

```
Using HashMap
public boolean isAnagram(String word, String anagram) {
    if (word.length() != anagram.length())
        return false;

    int count = 0;
    Map<Character, Integer> map = new HashMap<>();

    for (int i = 0; i < word.length(); i++) {
        if (!map.containsKey(word.charAt(i)))
            map.put(word.charAt(i), 1);
        else
            map.put(word.charAt(i), map.get(word.charAt(i)) + 1);
    }

    for (int i = 0; i < anagram.length(); i++) {
        if (!map.containsKey(anagram.charAt(i)))
            return false;
        else if (map.get(anagram.charAt(i)) >= 1)
            map.put(anagram.charAt(i), map.get(anagram.charAt(i)) - 1);
        else
            return false;
    }

    return true;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-04-12T06:32:56.010

这是一个更简单的方法，主要依赖于 java 完整的代码在这里[https://github.com/rdsr/algorithms/blob/master/src/jvm/misc/AnagramsList.java](https://github.com/rdsr/algorithms/blob/master/src/jvm/misc/AnagramsList.java)（注意这解决了一个相关的不同问题）

```
class Anagram {
    Map<Character, Integer> anagram;

    Anagram(String s) {
        anagram = new HashMap<Character, Integer>();

        for (final Character c : s.toCharArray()) {
            if (anagram.containsKey(c)) {
                anagram.put(c, 1 + anagram.get(c));
            } else {
                anagram.put(c, 1);
            }
        }
    }

    @Override
    public int hashCode() {
        //.. elided
    }

    @Override
    public boolean equals(Object obj) {
        //.. elided
    }
}

    public class Anagrams {
            public static void main(String[] args) {
                System.out.println(new Anagram("abc").equals(new Anagram("bac")));
            }
        } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-26T20:20:45.733

原因很简单，因为 replace 函数创建了一个新`String`对象。它对实际字符串（在您的情况下）没有任何作用`s2`，因为在 Java 中，字符串本质上是最终的。因此，正如 cmonkey 所指出的，您总是从字符串 s2 中删除一个字符，但实际上`String`创建的新对象少了 1 个字符，s2 保持原样。

在你的情况下让它工作的简单方法是创建一个新的字符串对象并将其分配给你自己。

```
{
    s2=s2.replace(delString,"");
    ....
    if(s2.empty()) return true;
    return false;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-12-03T21:54:05.680

只是确保，您正在尝试检查 s1 是否是 s2 的字谜正确？这也意味着 s2 是 s1 的字谜。所以我只会对 s1 和 s2 进行排序并检查它们是否相等。

```
String string1 = "fdafdas";
String string2 = "fdwqkjl";
char[] chars = string1.toCharArray();
char[] chars2 = string2.toCharArray();
Arrays.sort(chars);
Arrays.sort(chars2);
string1 = new String(chars);
string2 = new String(chars2);
if (string1.equals(string2)) {
    //They are an anagram
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-05-12T17:02:27.140

使用位向量方法处理字谜子串的更快版本

```
public boolean isAnagram(String _source1, String _source2)
{

    int flag = 0, char_index = 0, counter = 0;
    if(_source2.length() < _source1.length()){
        return false;
    }
    char[] _stringchar = _source1.toCharArray();
    char[] _tocheck = _source2.toCharArray();
    for(char character : _stringchar)
    {
        char_index = character - 'a';
        if((flag & (1 << char_index)) == 0)
            flag |= (1 << char_index);
    }

    for(char toCheckcChar : _tocheck)
    {
        char_index = toCheckcChar - 'a';

        if((flag & (1 << char_index)) > 0)
            counter++;
        else
            counter = 0;

        if(counter == _source1.length())
            return true;

    }

    return false;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-12-20T00:33:45.530

我想下面的解决方案很`O(n)`复杂，如果有人不同，请告诉我。

```
import java.util.HashMap;
import java.util.Scanner;

public class Anagrams {

    static boolean isAnagram(String word1, String word2)
    {
        if(word1.length() != word2.length()) {
            return false;
        }
        int flag=0;
        HashMap<Character,Integer> table = new HashMap<Character,Integer>();
        for(int i=0; i< word1.length();i++) {
            table.put(word1.charAt(i),1);
        }

        for(int i=0; i< word2.length();i++) {
            if(table.containsKey(word2.charAt(i))) {
                continue;
            } else {
                flag=1;
                break;
            }   
        }
        return flag == 0;
    }

    public static void main(String[] args) {
        System.out.println("Enter your string");
        Scanner sc= new Scanner(System.in);
        String word1= sc.nextLine();
        String word2=sc.nextLine();

         boolean result = isAnagram(word1,word2);
         if(result) {
             System.out.println("The words are Anagrams");
         } else{
             System.out.println("The words are not Anagrams");   
         }
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-04-21T17:27:33.383

只见 newStr=s2.replace(delStr,"");

您在这里所做的替换 s2 中的 char 并分配回 newStr，意味着您没有更改 s2 中的任何内容。只需将此代码替换为以下代码即可

newStr=newStr.replace(delStr,"");

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-01-01T20:57:58.273

有一次我做了一个关于字谜的求职面试测试。我将它上传到我的 github 帐户。java 代码检查文本文件（多行）是否是字谜诗或字谜文本。

[https://github.com/javocsoft/anagram_poem_checker](https://github.com/javocsoft/anagram_poem_checker)

希望能帮助到你！

再见。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-12-30T15:39:47.420

这是另一个建议，没有初始化 int[256] 而是 int[26] 用于英文字母。

```
public static void main(String[] args) {
    System.out.println(isAnagram("restful", "fluster"));
}

static boolean isAnagram(String s1, String s2) {
    if (s1.length() != s2.length()) {
        return false;
    }
    int[] countArray = new int[26];
    for (int i = 0; i < s1.length(); i++) {
        countArray[getIndex(i, s1)]++;
        countArray[getIndex(i, s2)]--;
    }
    for (int i = 0; i < countArray.length; i++) {
        if (countArray[i] != 0) {
            return false;
        }
    }
    return true;
}

public static int getIndex(int position, String value) {
    return value.charAt(position) - 'a';
} 
```

最佳乔治·索普里迪斯

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-05-12T16:36:06.993

```
 String str1="Mother In Law";
    String str2="Hitler Woman";
    char[] anag1=str1.replaceAll("\\s", "").toLowerCase().toCharArray();
    char[] anag2=str2.replaceAll("\\s", "").toLowerCase().toCharArray();
    Arrays.sort(anag1);
    Arrays.sort(anag2);
    System.out.println(Arrays.equals(anag1, anag2)? "words are anagrams":"words are not anagrams"); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-03-19T22:10:05.460

这是我从您的角度来看的解决方案

```
private static boolean isAnagram(String s1, String s2){
    int count = 0;
    boolean flag = false;

    if(s1.length() != s2.length()){
        return false;
    }
    //checks whether both word's letters are the same
    for (int i = 0; i < s1.length(); i++){
        for (int j = 0; j < s2.length(); j++){
            if(s1.charAt(i) == s2.charAt(j)){
                count++;
                break;
            }
        }
    }
    //if count equals to one of the Strings length then it is an anagram
    if(count == s2.length() ){
        flag = true;
    }
    return flag;
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-07-08T22:08:31.310

这是我为使用数组而不是 HashMap 而编写的 Java 实现。这节省了空间，而且数组非常快。

```
public static boolean anagram(String s, String t) { 
        if (s.length() != t.length()) return false;

        int[] arr = new int[123];
        for (char c : s.toCharArray())
            arr[c]++;
        for (char c : t.toCharArray())
            arr[c]--;
        for (int i : arr)
            if (i != 0)
                return false;
        return true;
    } 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-01-22T09:46:12.093

我认为这适用于复杂度 O(2n)

```
public static boolean isAnagram(String str1, String str2){
    if(str1.length() != str2.length()){ return false;}
    int[] buffer = new int[256];
    for(char ch : str1.toCharArray()){
        buffer[ch]++;
    }
    for(char ch : str2.toCharArray()){
        if(buffer[ch]==0) return false;
        buffer[ch] = (buffer[ch] > 0)?(buffer[ch] - 1 ): -1 ;   
    }
    return true;
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-10-15T17:42:25.097

```
import java.util.Scanner;

public class JavaProgram
{
    public static void main(String[] input)
    {
        String str1, str2;
        int len, len1, len2, i, j, found=0, not_found=0;
        Scanner scan = new Scanner(System.in);

        System.out.print("Enter First String : ");
        str1 = scan.nextLine();
        System.out.print("Enter Second String : ");
        str2 = scan.nextLine();

        len1 = str1.length();
        len2 = str2.length();

        if(len1 == len2)
        {
            len = len1;
            for(i=0; i<len; i++)
            {
                found = 0;
                for(j=0; j<len; j++)
                {
                    if(str1.charAt(i) == str2.charAt(j))
                    {
                        found = 1;
                        break;
                    }
                }
                if(found == 0)
                {
                    not_found = 1;
                    break;
                }
            }
            if(not_found == 1)
            {
                System.out.print("Strings are not Anagram to Each Other..!!");
            }
            else
            {
                System.out.print("Strings are Anagram");
            }
        }
        else
        {
            System.out.print("Both Strings Must have the same number of Character to be an Anagram");
        }
    }
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-02-03T21:53:21.807

```
public class Anagram {
    public boolean isAnagram(
            String left, 
            String right) {
        if (left.length() == right.length()) {
            Map<Character, Integer> map = new HashMap<>();
            char[] a = left.toCharArray(), b = right.toCharArray();
            for (int i = 0; i < a.length; i++) {
                accumulate(map, a[i]);
                accumulate(map, b[i]);
            }
            for (char c : map.keySet()) {
                if (map.get(c) > 0) {
                    return false;
                }
            }
            return true;
        } else {
            return false;
        }
    }

    private void accumulate(
            Map<Character, Integer> map, 
            char key) {
        if (map.containsKey(key)) {
            map.put(key, Math.abs(map.get(key) - 1));
        } else {
            map.put(key, 1);
        }
    }
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-10-09T20:26:37.460

我花了一些时间来实际写下逻辑并编写代码来检查两个字符串是否是字谜。当然是在上面的答案的帮助下！XD

```
public static void main(String[] args) {

    Map<Character, Integer> char_map = new HashMap<Character, Integer>();
    Map<Character, Integer> empty_map = new HashMap<Character, Integer>();
    String a = "HelloP";
    String b = "HePlol";

    if (a.length() != b.length()) {
        System.out.println("false");
        System.exit(0);
    }

    for (char c : a.toLowerCase().toCharArray()) {
        empty_map.put(c, 0);
        if (char_map.containsKey(c))
            char_map.put(c, 1 + char_map.get(c));
        else
            char_map.put(c, 1);
    }

    for (char c : b.toLowerCase().toCharArray())
        if (char_map.containsKey(c))
            char_map.put(c, char_map.get(c) - 1);

    System.out.println(char_map.equals(empty_map));
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-11-08T13:42:34.893

一种针对性能进行优化的解决方案。

与其他解决方案有何不同：

*   只有在绝对最坏的情况下，它才会**迭代一次**text1 和一次 text2
*   **快速失败**：在 text1 中遇到不属于 text2 的字符时立即返回 false
*   将直方图存储为**`int[]`**，这比 HashMaps 或类似的要快得多
*   可以处理任何字符的字符串（甚至是**表情符号**）

示例代码：

```
public static boolean check(String text1, String text2) {
    requireNonNull(text1, "text1 must not be null");
    requireNonNull(text2, "text2 must not be null");
    if (text1 == text2) return true;

    var text1Chars = text1.toCharArray();
    var text2Chars = text2.toCharArray();
    if (text1Chars.length != text2Chars.length) return false;

    var text2Counts = new int[Character.MAX_CODE_POINT];
    var text2Index = 0;

    loopThroughText1:
    for (char charOfText1 : text1Chars) {
        if (text2Counts[charOfText1] > 0) {
            text2Counts[charOfText1]--;
        } else {
            while (text2Index < text2Chars.length) {
                var charOfText2 = text2Chars[text2Index++];
                if (charOfText1 == charOfText2) {
                    continue loopThroughText1;
                }
                text2Counts[charOfText2]++;
            }
            return false;
        }
    }
    return text2Index >= text2Chars.length;
} 
```

对应的测试方法：

```
@ParameterizedTest
@CsvSource({
        "a,a,true",
        "a,b,false",
        "aa,a,false",
        "a,aa,false",
        "aa,aa,true",
        "vhjsd682ahjsvdi7861rUZVFD/Ias6srf871r23,vhjsd682ahjsvdi7861rUZVFD/Ias6srf871r23,true",
        "A,a,false",
        ",,true",
        ",,false",
})
public void check(String text1, String text2, boolean expected) {
    assertEquals(AnagramChecker.check(text1, text2), expected);
} 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-01-21T18:53:22.410

1.  如果相等，比较两个字符串的长度
2.  将两个字符串都转换为小写，以便进行有效比较
3.  循环检查 String1 是否包含 String2 中的字符。
4.  将计数器设置为其中一个字符串的长度，并在匹配时减少 -1

    ```
    public boolean isAnagram(String s1, String s2) {

    if(s1.length() != s2.length()) {
        return false;
    }

    int counter= s1.length();
    s1 = s1.toLowerCase();
    s2= s2.toLowerCase();

    for (int i=0; i<s1.length();i++ ) {

            if (s2.contains(s1.charAt(i)+"")) {

                counter--;              
        }
    }

    if (counter<=0) {

        return true;
    }
    return false;
    } 
    ```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-04-10T11:38:21.870

使用 Java 流，这可以在 5 行代码中简化（[https://github.com/vspiliop/java-puzzles/blob/master/src/gy/etiolo/puzzles/streams/Anagrams.java](https://github.com/vspiliop/java-puzzles/blob/master/src/gy/etiolo/puzzles/streams/Anagrams.java)）：

```
/**
 * Are two strings anagrams.
 */
public class Anagrams {
  public static void main(String ... args) {
    String word1 = "abcdefg";
    String word2 = "gfedabc";

    System.out.println("Are they anagrams: " + isAnagram(word1, word2));
  }

  private static boolean isAnagram(String word1, String word2) {
    int [] mask = new int[26];
    Arrays.fill(mask, 0);
    word1.toLowerCase().chars().forEach(c -> mask['z' - c]++);
    word2.toLowerCase().chars().forEach(c -> mask['z' - c]--);
    return Arrays.stream(mask).sum() == 0;
  }
} 
```

在此处查看 ascii 表：[http ://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2018-12-13T03:07:16.480

```
public class SampleAnagram {

    public static void main(String ...s) {

        String s1 = "work";
        String s2="kwro";

        System.out.println(s1.charAt(0));

        int s1L = s1.length();
        int s2L = s2.length();

        int totalCount = 0;

            for(int i=0;i<s1L;i++) {

                for(int j=0;j<s2L;j++) {

                if(s1.charAt(i)==(s2.charAt(j))) {

                    totalCount = totalCount+1;
                }
            }
        }

            System.out.println(totalCount);

            if(s1.length()==totalCount && s2.length()==totalCount) {

                System.out.println("given the input as anagram");
            }

    }

} 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2019-03-22T20:09:03.693

```
public static boolean isAnagram(String s1, String s2) {
    if (s1.length() != s2.length()) {
        return false;
    }
    Map<Character, Integer> frequencies = new HashMap<>();
    for (int i = 0; i < s1.length(); i++) {
        if (frequencies.containsKey(s1.charAt(i))) {
            frequencies.put(s1.charAt(i), frequencies.get(s1.charAt(i)) + 1);
        } else {
            frequencies.put(s1.charAt(i), 1);
        }
    }
    for (int i = 0; i < s2.length(); i++) {
        if (frequencies.containsKey(s2.charAt(i))) {
            int frequency = frequencies.get(s2.charAt(i));
            if (--frequency == 0) {
                frequencies.remove(s2.charAt(i));
            } else {
                frequencies.put(s2.charAt(i), frequencies.get(s2.charAt(i)) - 1);
            }
        }
    }
    return frequencies.isEmpty();
} 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2018-06-21T17:06:38.713

```
public static boolean isAnagram(String s1, String s2) {
    boolean aux = true;
    if (s1.length() != s2.length()){
        aux = false;
    }else{ 
        for (int i = 0; i < s1.length(); i++)
            if(s2.toUpperCase().indexOf(s1.toUpperCase().substring(i, i+1)) == -1) aux = false;
    }
    return aux;
} 
```

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2013-07-12T16:43:15.253

```
public boolean isAnagram(String a, String b) {

  boolean result = false;

  final String one = a.replaceAll("[\\s+\\W+]", "").toLowerCase();

  final String two = b.replaceAll("[\\s+\\W+]", "").toLowerCase();

  if (one.length() == two.length()) {

      final char[] oneArray =  one.toCharArray();

      final char[] twoArray =  two.toCharArray(); 

      Arrays.sort(oneArray);

      Arrays.sort(twoArray);

      result = Arrays.equals(oneArray, twoArray);

    }

  return result; 

} 
```

* * *

## 回答 #35

> 赞同：-2
> 
> 时间：2013-04-25T13:06:14.737

```
import java.util.*;
class Anagrams 
{
    public static void main(String[] args) 
    {
        System.out.println("Enter the two words");
        Scanner scan = new Scanner(System.in);
        String word1 = scan.next();
        String word2=scan.next();

        StringBuilder sb1= new StringBuilder(word1);
        StringBuilder sb2= new StringBuilder(word2);
        int count=0;
        System.out.println("length ! "+sb1.length());
        System.out.println("Length ! "+sb2.length());
        if(sb1.length()==sb2.length()){
            for(int i=0;i<sb1.length();i++){
                for(int k=0;k<sb2.length();k++){
                    if(sb1.charAt(i)==sb2.charAt(k)){
                        sb2.deleteCharAt(k);
                        count++;
                        System.out.println("Count is "+count);
                        break;
                    }
                }
            }

            if(count==sb1.length()){

                System.out.println("Anagrams!");
            }
            else{
                System.out.println("Not Anagrams");
            }
        }
        else{
            System.out.println("Not equal in length");
        }
    }
} 
```

# mongodb - 是否可以在 Mongodb 的 map reduce 中填充零？

> ID：13692223
> 
> 赞同：1
> 
> 时间：2012-12-03T21:40:57.963
> 
> 标签：mongodb, mapreduce

我有一个按日期分组的地图缩减：

```
map = %Q{
  function() {
    var rounded_time = this.created_at;
    rounded_time.setHours(0,0,0,0);
    emit(rounded_time.getTime() / 1000, this.total);
  }
}

reduce = %Q{
  function(key, values) {
    var result = 0;
    values.forEach(function(value) {
      result += value;
    });
    return result;
  }
}

data = Order.map_reduce(map, reduce).out(inline: true) 
```

但是当然有些日期没有任何订单，因此它们不会出现在结果中。这被输入到时间序列图中，所以在那些日子里有零会很好。

我想知道是否有一种干净的方法可以用零填充缺失的日期。似乎`emit(time, 0)`在每个日期都做一个首字母是一种方法，但我还没有看到在 mongo 中这样做的方法。

所以我坚持在数据从地图减少后按摩数据，这不是那么有效并且容易出现舍入错误。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:22:02.230

当你去形成报告时，这可能是最好的做法。

问题是这些行不存在，MR实际上不能在循环中随意形成新的文档，它只能修改输入的文档。

因此，当您迭代图表中的文档时，您很可能知道您在搜索的时间序列（日、月、年）中使用什么分隔符，并且可以轻松修改数据以在这些缺失的点添加 0 值. 通常，最好的方法不是在循环中滚动光标来制作图表，而是滚动日期列表，然后从光标中获取该日期或将零值放在那里。

> 所以我坚持在数据从地图减少后按摩数据，这不是那么有效并且容易出现舍入错误

它不应该容易出错，如果操作正确，它应该与数据库一样准确，因为您使用的是客户端定义的（我假设）时间范围，并且您正在对分隔符进行分组，因此它不应该容易出错。

# javascript - 如何修复此循环，以便在单击时加载并打开正确的链接？

> ID：13692224
> 
> 赞同：1
> 
> 时间：2012-12-03T21:41:03.613
> 
> 标签：javascript, jquery, json, reddit

我正在编写一个脚本来附加 reddit 的前 25 个帖子，并在下面的滑动 div 中打开相应的链接。目前，该脚本为循环中的每个项目输出相同的帖子。我明白为什么会这样，我只是不知道如何解决它！任何人都可以发现错误吗？

```
$(document).ready(function() {

// Reddit JSON array
var redditJSON = 'http://www.reddit.com/.json?jsonp=?';

// Define global variable for link content
var postContent = null;

//Get the JSON output from reddit and add to function "reddit"
$.getJSON(redditJSON,

function(reddit) {

    // Start loop of JSON data
    $.each(reddit.data.children, function(i, redditPost) {

        // Post data variables from Reddit JSON array        
        var author, ups, downs, url, title, commentCount, thumbnail, commentLink, imageNumber;

        author = redditPost.data.author;
        ups = redditPost.data.ups;
        downs = redditPost.data.downs;
        url = redditPost.data.url;
        title = redditPost.data.title;
        commentCount = redditPost.data.num_comments;
        thumbnail = redditPost.data.thumbnail;
        commentLink = redditPost.data.permalink;
        // Object containing content from the post URL
        postContent = '<object type="text/html" data="' + url + '" style="width:100%;height:100%"><p>image' + i + '</p></object>';
        imageNumber = i++;

        // Ouput image thumbnail if it exists
        if (thumbnail.length <= 6) {
            var hasThumbnail = '';
        } else {
            var hasThumbnail = '<img class="thumbnail" src="' + thumbnail + '" />';
        }

        // Output string    
        var redditPostOutput = '<ul data-role="listview"><li data-icon="false"><a href="#" class="postWrapper">' + hasThumbnail + '<div class="postTitle"><p class="no-ellipses">' + title + '</p></div><div class="votesWrapper"><div class="upsWrapper boldText">' + ups + '</div><div class="downsWrapper boldText">' + downs + '</div></div><div id="commentsLink"><p>Comments(' + commentCount + ')</p></div></a><div class="postContent"></div></li></ul>';

        // Append output string to div with ID Feed
        $('#feed').append(redditPostOutput).trigger("create");

        // Change background colour of alternating posts                
        $("li:odd").css("background-color", "rgba(0,0,0,0.2)").trigger("create");

    }); //each
    $(".postContent").hide();
    //toggle the componenet with class msg_body
    $(".postWrapper").click(function() {
        $(this).next(".postContent").slideToggle(500);
        // Append post content into postContant div when visible
        $('.postContent').append(postContent);
    });

}); //getJSON
}); 
```

[http://jsfiddle.net/WUgvN/](http://jsfiddle.net/WUgvN/)

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:49:32.027

我从未使用过 jQuery，因此无法为您发布解决方案，但我可以告诉您，问题似乎是因为在您的`$.each`循环中，您将全局变量设置`postContent`为循环后每个给定帖子含义的内容只有最后一篇文章的内容。

正因为如此，每当

```
//toggle the componenet with class msg_body
$(".postWrapper").click(function() {
    $(this).next(".postContent").slideToggle(500);
    // Append post content into postContant div when visible
    $('.postContent').append(postContent);
}); 
```

被调用时，它将所选帖子的内容设置为在`$.each`循环中为最后一个帖子检索到的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:38:56.797

正如 Loggie 指出的那样，尽管您在`postContent`每次通过`$.each`循环时都为变量设置了值，但在退出循环之前，您不会将其作为任何 .postContent div 的内容传递——这意味着您是始终将最后一次通过循环后保存的变量的值传递给这些 div。

您可以在循环中创建每个 div 时包含内容：

```
// Output string    
var redditPostOutput = '<ul data-role="listview"><li data-icon="false"><a href="#" class="postWrapper">' + hasThumbnail + '<div class="postTitle"><p class="no-ellipses">' + title + '</p></div><div class="votesWrapper"><div class="upsWrapper boldText">' + ups + '</div><div class="downsWrapper boldText">' + downs + '</div></div><div id="commentsLink"><p>Comments(' + commentCount + ')</p></div></a><div class="postContent">' + postContent + '</div></li></ul>'; 
```

[http://jsfiddle.net/YQkBS/](http://jsfiddle.net/YQkBS/)

# jquery - 将 $this 与 Ajax 调用成功处理程序一起使用

> ID：13692228
> 
> 赞同：0
> 
> 时间：2012-12-03T21:41:24.360
> 
> 标签：jquery, html, ajax

我有一个使用 PHP 生成的列表，类似于下面的 HTML 代码。我的 AJAX 调用成功完成，问题是我的状态消息只显示`div`在列表中的第一个，我希望根据`input`单击的框显示它。所以我需要一个`this`参考，`#status_message`但我不知道如何使用它。

编辑：将 id 更改为 class

HTML：

```
<input type='textbox' class='update'>
<div class='status_message'> </div>

<input type='textbox' class='update'>
<div class='status_message'> </div>

<input type='textbox' class='update'>
<div class='status_message'> </div> 
```

jQuery：

```
$(document).ready(function() {
    $('.update').live('click', function() {
        $.ajax({
            type : 'GET',
            url: '',
            dataType : 'json',
            data:  dataString ,
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                $('#status_message').removeClass().addClass('error').text('There was an error.').show(200);
            },
            success : function(data) {
                console.log(data);
                if (data.error === true) {
                    $('.status_message').removeClass().addClass('success').text(data.msg);
                }
                else {
                    $('.status_message').removeClass().addClass('failure').text(data.msg);
                }
            } 
        });    
        return false; 
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:48:05.507

您需要存储对单击的元素的引用。尝试这个：

```
$('.update').live('click', function() {
    var $currentEl = $(this);
    $.ajax({
        // setup...
        success : function(data) {
            console.log(data);
            var className = data.error ? 'failure' : 'success';
            $currentEl.next().removeClass().addClass(className).text(data.msg);
        } 
    });    
    return false; 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:50:03.470

您可以在调用 AJAX 函数之前尝试保存单击的元素：

```
$(document).ready(function() {
    $('.update').live('click', function() {
        var status_message = $(this).next('.status_message');
        $.ajax({
            type : 'GET',
            url: '',
            dataType : 'json',
            data:  dataString ,
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                status_message.removeClass().addClass('error').text('There was an error.').show(200);
            },
            success : function(data) {
                console.log(data);
                if (data.error === true) {
                    status_message.removeClass().addClass('success').text(data.msg);
                }
                else {
                    status_message.removeClass().addClass('failure').text(data.msg);
                }
            } 
        });    
        return false; 
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T21:55:12.780

```
$.ajax({
    // setup...
    context: this,
    success : function(data) {
        var class data.error ? 'success' : 'failure';
        $(this).removeClass().addClass(class).text(data.msg);
    } 
}); 
```

*参考*：

*   [api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 如何将 TreeNode 写入给定文件的 PrintStream？

> ID：13692238
> 
> 赞同：-2
> 
> 时间：2012-12-03T21:41:44.027
> 
> 标签：java, string, file, treenode, printstream

我必须写一个方法

```
write(Printstream p) 
```

其中`p`已定义为

```
new PrintStream(new File(QUESTION_FILE). 
```

我什至不需要知道如何直接从 a`TreeNode`进入`PrintStream`，主要是如何将字符串逐行放入其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:50:12.703

只要 TreeNode 已经实现（覆盖）了 toString() 方法，你就可以这样做：

```
p.print(this); 
```

另一种方法是实现递归版本：

```
p.println(myvalue);
for (TreeNode child : children) {
    write(child);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:43:39.633

> 如何将字符串逐行放入其中

好吧，在[查看 API](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)时非常简单：

```
p.println("This is your line");
p.println("New line (OS dependant) is added automatically"); 
```

# ios - 如何等待动画——完成块

> ID：13692241
> 
> 赞同：2
> 
> 时间：2012-12-03T21:42:07.560
> 
> 标签：ios, animation, uiview

我正在开发一个应用程序，其中两个视图在屏幕上的某处相遇。当他们相遇时，碰撞检测器会触发这种方法。它应该识别适当的基础，然后将两个视图都发送给它。它确实做到了，但它会立即发生，而不是在 4 秒内发生。我错过了什么？RADIUS 在此代码上方定义。它与箭头不是 UIView 有什么关系吗？spriteView 类是 UIView 的子类。

```
-(void)sendToBase:(spriteView *)arrow
{
   int teamNumber = arrow.teamNumber;
   // Find the location of the base.
   for (UIView *scaledView in self.view.subviews) {
      if (scaledView.tag == 100) {
         for (UIView *base in scaledView.subviews) {
            if (base.tag >= 1000) {
               if (teamNumber + 1000 == base.tag) {
                  // We found the right base.
                  CGPoint newCenter;
                  newCenter.x = base.center.x + arc4random() % (int) floor(RADIUS) - RADIUS/2.0;
                  newCenter.y = base.center.y + arc4random() % (int) floor(RADIUS) - RADIUS/2.0;
                  [UIView animateWithDuration:4.0 delay:0.0 options:UIViewAnimationCurveLinear animations:^{
                     [arrow setCenter:newCenter];
                  } completion:^(BOOL finished) {
                     // After walking back to base, remove and create new objects
                     [arrow removeFromSuperview];
                     [self addArrow:scaledView toTeam:teamNumber];
                  }];
               }
            }
         }
      }
   }
} 
```

如果类类型不匹配是问题所在，我因此修改了代码，结果相同。

```
-(void)sendToBase:(spriteView *)arrow
{
   UIView *uiSpriteView = (UIView *)arrow;
   int teamNumber = arrow.teamNumber;
   // Find the location of the base.
   for (UIView *scaledView in self.view.subviews) {
      if (scaledView.tag == 100) {
         for (UIView *base in scaledView.subviews) {
            if (base.tag >= 1000) {
               if (teamNumber + 1000 == base.tag) {
                  // We found the right base.
                  CGPoint newCenter;
                  newCenter.x = base.center.x + arc4random() % (int) floor(RADIUS) - RADIUS/2.0;
                  newCenter.y = base.center.y + arc4random() % (int) floor(RADIUS) - RADIUS/2.0;
                  [UIView animateWithDuration:4.0 delay:0.0 options:UIViewAnimationCurveLinear animations:^{
                     [uiSpriteView setCenter:newCenter];
                  } completion:^(BOOL finished) {
                     // After walking back to base, remove and create new objects
                     [arrow removeFromSuperview];
                     [self addArrow:scaledView toTeam:teamNumber];
                  }];
               }
            }
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:21:29.033

根据文档，您必须使用`beginAnimations:context:`和`commitAnimations`方法为`center`属性设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:55:57.143

我解决了这个问题（使用 setCenter）。有两个动画正在进行。

第一个动画发生在碰撞之前。第二个动画是碰撞的结果。

检测碰撞（并因此产生第二个动画）的代码位于动画块中，而不是完成块中。当我将代码移动到完成块时，第二个动画起作用了。嗯，差不多。两个箭头中的一个被正确设置了动画。既然其中一个正在工作，我可能可以找出另一个问题。

# sql - AND 语句中的逻辑

> ID：13692243
> 
> 赞同：0
> 
> 时间：2012-12-03T21:42:10.550
> 
> 标签：sql, postgresql, operator-precedence

我有这个查询可以提取可用于某些分析的数据：

* * *

```
SELECT   distinct egauge_analyze_2.dataid,     
date_trunc('hour', egauge_analyze_2.timestamp_localtime)::time AS HOUR, 
avg(egauge_analyze_2.use) AS USE   

FROM   dev.egauge_analyze_2

WHERE egauge_analyze_2.timestamp_localtime BETWEEN
       '2012-07-16 00:00:00' AND '2012-08-17 23:59:59' 

AND egauge_analyze_2.use IS NOT NULL

-- AND use > 0

GROUP BY 1,2 
ORDER BY 1,2 
```

* * *

当我将它与上述（按原样）一起使用时，它会为我提供良好的数据并随时抛出任何具有空值的 dataids（及其所有数据），当我添加额外的 use > 0 约束时，它会停止抛出 dataids将为空值。

数据由 dataids（唯一设备的值）、时间戳和 USE（当时该设备的功耗）组成 - 我正在尝试获取设备的季节性配置文件，但丢弃给出 null 的整个设备或错误（负）数据。

我希望它为 null 或 <= 0 的任何使用值丢弃所有 dataids（及其所有数据）。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:53:21.883

很难理解你的问题。我认为您想消除所有具有NULL 或负值`dataid`的 s 。`use`你可以用一个`having`子句来做到这一点：

```
SELECT ea.dataid,     
       date_trunc('hour', ea.timestamp_localtime)::time AS HOUR, 
       avg(ea.use) AS USE   
FROM dev.egauge_analyze_2 ea
WHERE ea.timestamp_localtime BETWEEN '2012-07-16 00:00:00' AND '2012-08-17 23:59:59'
GROUP BY 1,2
having sum(case when use is null or use < 0 then 1 else 0 end) > 0
ORDER BY 1,2 
```

此外，我删除了`distinct`子句中的`select`，因为它是不必要的（你有一个`group by`）。我还给表一个更易读的别名，`ea`而不是表名。

# c++ - 仅删除数组的第一个元素

> ID：13692245
> 
> 赞同：4
> 
> 时间：2012-12-03T21:42:35.017
> 
> 标签：c++, arrays, delete-operator

是否有可能做这样的事情：

```
int *iarray = new int[10];
.....
//do something with it
..... 
```

然后为了轻松删除第一个元素，请执行以下操作：

```
delete iarray;
iarray++; 
```

似乎 delete （没有 [] ）仍然删除整个数组。如果可能的话，删除第一个元素将是非常棘手和聪明的方法。这个想法不是我的，我在某个地方看到过，但它对我不起作用。难道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T21:51:42.843

使用[双端队列](http://www.cplusplus.com/reference/deque/deque/)从前面删除一个元素——这就是发明这种结构的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T21:50:03.280

看起来你正在编写 C++，在这种情况下，`delete`诀窍是疯狂和可怕的，而且不会奏效。如果这是您真正需要的，您当然可以通过指针数学*获得指向*第二个元素的指针，但要实际删除第一项，您将不得不将所有内容移回一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T21:48:49.113

这不会像你期望的那样工作。

在这里查看这个答案：

[delete[] 怎么知道它是一个数组？](https://stackoverflow.com/questions/703691/how-does-delete-know-its-an-array-c)

它几乎回答了你的问题。

# c++ - 如何测试 C++ STL 函数的成功或失败（在 Microsoft Visual C++ 6.0 中）

> ID：13692247
> 
> 赞同：-1
> 
> 时间：2012-12-03T21:42:42.130
> 
> 标签：c++, visual-c++

在 Microsoft Visual C++ 6.0 STL 实现中，作为 STL 类之一的用户，您如何确定函数是否失败？

例如，`vector::insert`有这些原型：

```
void insert(iterator it, size_type n, const T& x);
void insert(iterator it, const_iterator first, const_iterator last); 
```

但是没有失败返回值，文档中也没有提到抛出异常以指示失败。

有谁知道如何在 MSVC++ 6.0 中测试这个或另一个 STL 类的失败？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T21:45:11.057

除非容器无法分配内存或您的复制构造函数抛出异常，否则插入向量不会失败。在这两种情况下，您都可以通过捕获异常来检测故障。

# c# - 使用 System.Collections.Generic 的问题；或者是其他东西

> ID：13692249
> 
> 赞同：-2
> 
> 时间：2012-12-03T21:42:48.747
> 
> 标签：c#, xna-4.0

```
public class Game1 : Microsoft.Xna.Framework.Game
{      
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

     public Game1()
     {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
     }

     protected override void Initialize()
     {                
        base.Initialize();
     }

     bool hasJumped = true;            
     Vector2 velocity;
     Texture2D player;
     Texture2D ground1;
     List<Vector2> vectors = new List<Vector2>();
     List<int> list = new List<int>();
     List.add(1); 
```

`List.add(1);`导致2个错误`"Invalid Token '(' in class,struct,or interface member declaration"`和`"using the generetic type 'System.Collections.Generic.List<T>' requiers 1type arguments"`

发生了什么事请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:44:17.787

正确的情况是`list.Add(1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T21:48:07.023

您应该使用`list.Add(1)`而不是`List.add(1)`. 实例名`list`不是`List`，方法名`Add`不是`add`。此外，您不能在类的主体中进行方法调用，而是在类中某些方法的主体中。

您不能在课程主体中包含此内容：

```
List<int> list = new List<int>();
list.Add(1); 
```

但是您可以在正文中创建 a`List`并使用如下方法：

```
List<int> list = new List<int>();
public void AddOne()
{
     list.Add(1);
} 
```

或者您可以在主体中声明 a`list`然后在方法中实例化它并`Add`像这样调用：

```
List<int> list;
public void CreateListAndAddOne()
{
     list = new List<int>();
     list.Add(1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T21:45:57.473

而不是`List.add(1)`使用`list.Add(1);`.

**编辑：**

另一件事你不能在你的类中以这种方式使用它，但你需要在方法、构造函数或属性中使用它。但是，解决方案可能是：

```
List<int> list = new List<int>(){ 1 }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T21:44:50.440

`Add`不是静态方法..它是实例方法。

重命名变量将有助于缓解混淆（请记住，C# 区分大小写）：

```
List<int> myIntegerList = new List<int>();
myIntegerList.Add(1); 
```

# google-analytics - 带有用户 ID 的 GA _trackPageview

> ID：13692255
> 
> 赞同：0
> 
> 时间：2012-12-03T21:43:14.357
> 
> 标签：google-analytics

在 GA 中进行正确的 _trackPageview 并存储推送的用户 ID 的最佳方法是什么？

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-46732147-1']);
  _gaq.push(['_trackPageview'],"/$textRepresentationUserID");
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

目前我刚刚强制 URL 最后包含变量，但我读过其他人说最好的方法是使用自定义变量。我不想让它运行太久然后发现我有一堆没用的数据。。

有小费吗？

我需要这样做的原因是确定站点上某个成员区域的哪些成员正在使用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:42:33.500

不确定这是否完全合法，请仔细检查 GA 服务条款。

无论如何，正如您的朋友所说，最好的方法是使用自定义变量：

```
_gaq.push(['_setCustomVar', 1,'User ID', '999999', 1]); 
```

`999999`是本例中的用户 ID。

无论如何，任何方法实际上都会生成一堆数据......

# javascript - Caroufredsel 显示部分图像

> ID：13692257
> 
> 赞同：1
> 
> 时间：2012-12-03T21:43:19.773
> 
> 标签：javascript, caroufredsel

我的 caroufredsel 轮播一次显示 8 张图像，然后在屏幕上滑动以显示另外 8 张。但是，在轮播的前四次滑动中，右侧显示的是部分图像而不是完整图像。在四张幻灯片之后，轮播会捕捉到它应该在的位置并从那时起正确显示所有图像。难道我做错了什么？是否有我错过的设置需要使用？链接在这里。

[http://dev.mattresstime.co.uk/cheapbeds/mattresstime/index.php](http://dev.mattresstime.co.uk/cheapbeds/mattresstime/index.php)

这是 jQuery

```
$j("#manufacturer_list").carouFredSel({ 
    width:904,  
    height: 81,
    items: {
        visible: 8,
        minimum: 1,         
        width: 113,
        height: 81
    },
    scroll: {
        pauseOnHover: true
    },
    swipe: {
        onTouch  : true,
        onMouse  : true
    },   
    prev : "#prev_button",
    next : "#next_button"
}); 
```

# python - Python字符串或if语句问题

> ID：13692263
> 
> 赞同：1
> 
> 时间：2012-12-03T21:43:41.547
> 
> 标签：python, string, if-statement, random

所以，我正在制作这个程序来帮助我的日语课学习。正如您可能看到的那样，它会随机排列单词列表并显示它们。然后程序要求翻译。它应该检查答案是否正确并显示适当的消息。但是，无论答案是否正确，它都会显示所有“不正确”的消息。我的问题是如何解决这个问题。拜托，我需要帮助，我想在参加下一级别的日语课之前完成这个。感谢任何愿意帮助我的人。

```
import random

words = ['ano', 'ima', 'eego', 'hai', 'gakusei', '...go', 'kookoo', 'gogo', 'gozen', '...sai', '...san', '...ji', '...jin', 'senkoo', 'sensei', 'soo desu', 'daigaku', 'denwa', 'tomodachi', 'namae', 'nan/nani', 'nihon', '...nensei', 'han', 'bangoo', 'ryuugakusei', 'watashi', 'amerika', 'igirisu', 'oosutoraria', 'kankoku', 'suweeden', 'chuugoku', 'kagaku', 'ajia kenkyuu', 'keizai', 'kokusaikankei', 'konpyuutaa', 'jinruigaku', 'seeji', 'bijinesu', 'bungaku', 'rekishi', 'shigoto', 'isha', 'kaishain', 'kookoosei', 'shufu', 'daigakuinsei', 'bengoshi', 'okaasan', 'otoosan', 'oneesan', 'oniisan', 'imooto', 'otooto']
random.shuffle(words)

index = 0
while index < len(words):
    print()
    print(words[index])
    translation = input('Enter the translation: ')
    index += 1
    print()

    if words == 'ano' and translation == 'um':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: um.')

    if words == 'ima' and translation == 'now':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: now.')

    if words == 'eego' and translation == 'english':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: english.')

    if words == 'hai' and translation == 'yes':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: yes.')

    if words == 'gakusei' and translation == 'student':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: student.')

    if words == '...go' and translation == 'language':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: language.')

    if words == 'kookoo' and translation == 'high school':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: high school.')

    if words == 'gogo' and translation == 'pm':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: pm.')

    if words == 'gozen' and translation == 'am':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: am.')

    if words == '...sai' and translation == 'years old':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: years old.')

    if words == '...san' and translation == 'mr/ms':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: mr/ms.')

    if words == 'ji' and translation == "o'clock":
        print('Correct!')
    else:
        print('Incorrect.')
        print("The correct answer is: o'clock.")

    if words == 'jin' and translation == 'people':
        print('Correct.!')
    else:
        print('Incorrect.')
        print('The correct answer is: people.')

    if words == 'senkoo' and translation == 'major':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: major.')

    if words == 'sensei' and translation == 'teacher':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: teacher.')

    if words == 'soo desu' and translation == "that's right":
        print('Correct!')
    else:
        print('Incorrect.')
        print("The correct answer is: that's right.")

    if words == 'daigaku' and translation == 'college/university':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: college/university.')

    if words == 'denwa' and translation == 'telephone':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: telephone.')

    if words == 'tomodachi' and translation == 'friend':
        print('Correct.!')
    else:
        print('Incorrect.')
        print('The correct answer is: friend.')

    if words == 'namae' and translation == 'name':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: name.')

    if words == 'nan/nani' and translation == 'what':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: what.')

    if words == 'nihon' and translation == 'japan':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: japan.')

    if words == '...nensei' and translation == 'year student':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: year student.')

    if words == 'han' and translation == 'half':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: half.')

    if words == 'bangoo' and translation == 'number':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: number.')

    if words == 'ryuugakusei' and translation == 'international student':
        print('Ccorect!')
    else:
        print('Incorrect.')
        print('The correct answer is: international student.')

    if words == 'watashi' and translation == 'I':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: I.')

    if words == 'amerika' and translation == 'america':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: america.')

    if words == 'igirisu' and translation == 'britain':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: britain.')

    if words == 'oosutoraria' and translation == 'australia':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: australia.')

    if words == 'kankoku' and translation == 'korea':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: korea.')

    if words == 'suweeden' and translation == 'sweeden':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: sweeden.')

    if words == 'chuugoku' and translation == 'china':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: china.')

    if words == 'kagaku' and translation == 'science':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: science.')

    if words == 'ajia kenkyuu' and translation == 'asian studies':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: asian studies.')

    if words == 'keizai' and translation == 'economics':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: economics.')

    if words == 'kokusaikankei' and translation == 'international relations':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: international relations.')

    if words == 'konpyuutaa' and translation == 'computer':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: computer.')

    if words == 'jinruigaku' and translation == 'anthropology':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: anthropology.')

    if words == 'seeji' and translation == 'politics':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: politics.')        

    if words == 'bijinesu' and translation == 'business':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: business.')

    if words == 'bungaku' and translation == 'literature':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: literature.')

    if words == 'rekishi' and translation == 'history':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: history.')

    if words == 'shigoto' and translation == 'job' or translation == 'work' or translation == 'occupation':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: "job" or "work" or "occupation".')

    if words == 'isha' and translation == 'doctor':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: doctor.')

    if words == 'kaishain' and translation == 'office worker':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: office worker.')

    if words == 'kookoosei' and translation == 'high school student' or translation == 'highschool student':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: "high school student" or "highschool student".')

    if words == 'shufu' and translation == 'house wife':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: house wife.')

    if words == 'daigakuinsei' and translation == 'graduate student':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: graduate student.')

    if words == 'daigakusei' and translation == 'college student':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: college student.')

    if words == 'bengoshi' and translation == 'lawyer':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: lawyer.')

    if words == 'okaasan' and translation == 'mother' or translation == 'mom':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: "mother or "mom".')

    if words == 'otoosan' and translation == 'father' or translation == 'dad':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: "father or "dad".')

    if words == 'oneesan' and translation == 'older sister' or translation == 'big sister':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: "older sister" or "big sister".')

    if words == 'oniisan' and translation == 'older brotehr' or translation == 'big brother':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: "older brother" or "big brother".')

    if words == 'imooto' and translation == 'younger sister' or translation == 'little sister':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: "younger sister" or "little sister".')

    if words == 'otooto' and translation == 'younger brother' or translation == 'little brother':
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: "younger brother" or "little brother".') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T21:45:21.917

有几个问题。

首先，您是在比较`words`而不是`word[index]`在

```
if words == 'ano' and translation == 'um': 
```

以及在其他地方。

其次，要使逻辑正常工作，您需要重新构建每条语句，以防止每次输入都打印出`if`大量消息。`Incorrect`

而不是试图解决这个问题，我提出了一种更加数据驱动的方法：

```
import random

dictionary = {'ano': 'um', 'ima': 'now', ...}
words = list(dictionary.items())
random.shuffle(words)

for word, translation in words:
    print(word)
    answer = input('Enter the translation: ')

    if answer == translation:
        print('Correct!')
    else:
        print('Incorrect.')
        print('The correct answer is: %s.' % translation) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:50:22.557

只是一个建议，我会使用这样的程序而不是所有这些`if else`子句

```
import random

translations = {'ano': 'um', 'ima': 'now', 'eego': 'english'}

japanese = translations.keys()
random.shuffle(japanese)

for word in japanese:
    print word
    english = raw_input("Enter the translation: ")
    if english.lower() == translations[word]:
        print "Correct"
    else:
        print "Incorrect"
        print "The correct answer is %s" % translations[word] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:55:50.410

你真的应该使用字典，或者至少两个列表。

```
words = {
    "word1": "answer1",
    "word2": "answer2",
    "word3": "answer3"
}
for word in words:
    answer = input("Translate '" + word + "':")
    if answer == words[word]:
        print("Correct!")
    else:
        print("Fail! Correct translation would be: " + words[word]) 
```

这可能有点错误，我在移动设备上并且不记得字典迭代 atm 的语法，您可能必须先将其转换为元组列表。

**编辑：**当我用手机打字慢时，出现了 50 个狂野的答案。对不起，额外的答案：P

# ubuntu - ubuntu 12.10 中的 ssh 和代理转发

> ID：13692267
> 
> 赞同：0
> 
> 时间：2012-12-03T21:43:56.623
> 
> 标签：ubuntu, ssh, ssh-agent, secure-crt

我有一台机器 X，我登录到 X 并发出一个`ssh somewhere`使用密钥身份验证的命令，它工作正常。

当我从 12.10 机器（没有我的特殊机器 X 密钥）SSH 到机器 X 并尝试上面相同的命令时，它会失败并`Permission denied (publickey).`显示消息。我四处搜索，看起来这与 ssh 代理转发有关，但我不确定。

我在尝试从最新的secureCRT SSH 时也遇到了同样的问题。我尝试在secureCRT中禁用代理转发，但没有成功。

我该如何解决这个问题？如果禁用代理转发是关键，我该怎么做？我需要更改目标机器中的任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T12:44:02.160

需要将参数 ForwardAgent=yes 更改为 /etc/ssh/ssh_config

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T15:54:14.493

该错误意味着机器 X 只接受公钥身份验证，而您在 12.10 机器上似乎没有私钥。

请注意，机器密钥和您的密钥之间存在差异。

在 12.10 上（在大多数机器上也是如此），机器密钥是在安装 openssh-server 软件包时创建的，并将保存在名为类似的文件中`/etc/ssh/ssh_host_*_key[.pub]`

您的密钥保存在您运行 ssh-keygen 的机器上，通常在`~/.ssh/id_rsa`和中找到`~/.ssh/id_rsa.pub`。

在您的情况下，从 12.10 SSH 到 X，您需要安全地`~/.ssh/id_rsa`从 X 复制到 12.10。请注意，这是您的私钥，您不想让任何人看到它。

接下来，您需要确保在 X 上`~/.ssh/id_rsa.pub`调用的文件中有一个副本。（应该完成这项工作）`~/.ssh/authorized_keys``cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys`

您还需要确保正确的权限：该`~/.ssh/`目录应该`rwx`只有您自己，并且其中的文件`~/.ssh/`最好`rw`只由您设置。

# c - 从标准输入获取多个结构条目

> ID：13692268
> 
> 赞同：0
> 
> 时间：2012-12-03T21:43:58.833
> 
> 标签：c

我正在尝试通过键盘为我的结构获取多个条目。我认为我在 scanf 内部错了，但我不确定我错在哪里。谢谢！

这是我所拥有的：

```
#include <stdio.h>
#include <math.h>

int main()
{

    //define the structure
    struct course
    {
        char title[20];
        int num;
    } ;
    // end structure define

    //define the variable  
    struct course classes;

    printf("Enter a course title and course number");
    scanf("%s %d", classes[3].title, &classes.num);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:53:52.210

正如卡尔所说，修复代码，它工作正常：

```
#include <stdio.h>

int main()
{
    struct course
    {
        char title[20];
        int num;
    } ;

    struct course class;

    printf("Enter a course title and course number");
    scanf("%s %d", class.title, &class.num);
    printf("%s %d", class.title, class.num);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:56:27.773

有几个问题。

您有这个称为“类”的结构，但它只有 1 个条目 - 您正在访问第 3 个条目，因此您跑完了。

另外，Title 有 20 个字节长，但如果你在 scanf() 中输入更大的内容，它就会溢出。基本的 scanf() 结构看起来不错。

我会更像这样设置它：

```
#include <stdio.h>
#include <math.h>

#define MAX_CLASSES 50   // how big our array of class structures is

int main()
{

    //define the structure
    struct course
    {
      char title[20];
      int num;
    } ;
    // end structure define

    //define the variable  
    struct course classes[MAX_CLASSES];

    int nCurClass = 0;   // index of the class we're entering
    bool bEnterMore = true;
    while (bEnterMore == true)
    {    
        printf("Enter a course title and course number");
        scanf("%s %d", classes[nCurClass].title, &classes[nCurClass].num);

        // if user enters -1 or we fill up the table, quit
        if (classes[nCurClass].num == -1 || nCurClass > MAX_CLASSES-1)
            bEnterMore = false;
    }
} 
```

这是基本的想法。可以进行的另一项改进是在将课程标题分配给 classes[].title 之前检查其长度。但是你需要*做点什么*;-)

# android - Android以编程方式创建可绘制边框

> ID：13692269
> 
> 赞同：0
> 
> 时间：2012-12-03T21:43:59.760
> 
> 标签：android, android-drawable

我会创建一个可绘制对象作为我的列表项的背景。我正在尝试在 xml 中绘制类似这样的内容：

```
------------
|
|
|
|         _| 
```

所以我需要将边界绘制到两侧，顶部和左侧，并在右下角绘制一个“L”。创建顶部和左侧边框没有问题，但我无法想象如何在右下角创建 L。PS：L的尺寸应该是固定的，并且与drawable的尺寸无关。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:14:04.827

我已经创建了一个 9-patch png，然后将其设置为背景。我还可以在可绘制对象上使用滤色器以编程方式更改边框颜色

# nsview - NSMenu cancelTracking 有时不会取消跟踪

> ID：13692271
> 
> 赞同：1
> 
> 时间：2012-12-03T21:44:03.857
> 
> 标签：nsview, nsmenuitem, nsmenu

我有一个 QT 应用程序，并且我在 OSX 上使用本机菜单。我有自定义绘制的菜单项，我通过将我自己的 NSView 派生类附加到我要专门绘制的 NSMenuItems 来创建它。这一切都很好；菜单项向右绘制并正确激活菜单功能。但是，激活菜单功能后，菜单并没有消失——它仍然在跟踪鼠标移动。（光标仍然突出显示项目）我花了几天时间在谷歌上搜索答案，但我在其他地方没有看到类似的问题。我的 NSView 类很简单；我已经覆盖了用于绘图的“rect”类，并且我的 mouseUp 事件在这里：

```
-(void)mouseUp:(NSEvent *)theEvent
{
    NSMenuItem* item = [self enclosingMenuItem];
    if ( item != nil ){
        NSMenu *menu = [item menu];
        if ( menu != nil ){
            [menu cancelTracking];
            [NSApp sendAction:[item action] to:[item target] from:item];
        }
    }
} 
```

我也尝试过使用“cancelTrackingWithoutAnimation”，并尝试在父菜单栏上调用 cancelTracking。谁能告诉我在什么情况下“cancelTracking”可能会失败？我不确定下一步该尝试什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T10:13:05.727

为时已晚，但我也遇到了同样的问题，并通过使用 carbon API 修复了它`CancelMenuTracking(),`

```
CancelMenuTracking(
  MenuRef   inRootMenu,
  Boolean   inImmediate,
  UInt32    inDismissalReason) 
```

用于`_NSGetCarbonMenu`获取 NSMenu 的 menuref。

```
menuRef = _NSGetCarbonMenu(myMenu); 
```

`CancelMenuTracking(menuRef,YES,kHIMenuDismissedByCancelMenuTracking)`; 对于 10.5 和`CancelMenuTracking(menuRef,YES,0)`; 10.6及以上

# c# - 找不到 AjaxControlToolKit HTMLEditorExtender

> ID：13692275
> 
> 赞同：0
> 
> 时间：2012-12-03T21:44:32.040
> 
> 标签：c#, asp.net

我正在尝试在我的网页上添加一个 HTMLEditorExtender 控件。

在 ASPX 中，我有以下代码片段：

```
<ajaxToolkit:HtmlEditorExtender ID="test" runat="server"/> 
```

当我尝试构建我的项目时，我收到以下编译警告：`The type or namespace name 'HTMLEditorExtender' does not exist in the namespace 'AjaxControlToolkit'(Are you missing an assembly reference?)`

在我后面的代码（C#）中，我尝试使用以下内容。

```
using AjaxControlToolkit.HTMLEditor; 
```

但我得到了同样的构建错误。

我一直在使用这个网站作为参考：[http](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditor/HTMLEditor.aspx) ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditor/HTMLEditor.aspx有没有我遗漏的东西？

此外，智能感知（我使用的是 Microsoft Visual Studios 2012）不会选择 HTMLEditor 控件，但它会从 AjaxControlToolkit 中选择其他控件，例如手风琴......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:57:09.423

我意识到我在我的 aspx 页面的标题处有错误的寄存器。在我的 ASPX 页面顶部包含以下内容并且它有效：

```
<%@ Register
Assembly="AjaxControlToolkit"
Namespace="AjaxControlToolkit.HTMLEditor"
TagPrefix="HTMLEditor" %> 
```

# php - Facebook支付，信用api，测试用户获取不到测试交易order_id详情

> ID：13692278
> 
> 赞同：1
> 
> 时间：2012-12-03T21:44:48.973
> 
> 标签：php, facebook, facebook-graph-api, facebook-credits

我正在使用 Facebook 积分。

我已在应用仪表板付款部分将我的用户 ID 设置为测试用户。

一切正常，交易成功完成，我得到了 order_id ，然后在获取该 order_id 的详细信息以检查它是否存在时，facebook Api 给出了错误

```
Fatal error: Uncaught GraphMethodException: Unsupported get request. thrown in 
```

并通过 file_get_contents 进行测试会出现以下错误

```
failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request 
```

使用 cUrl 检查其详细信息也不起作用。

重要的是，当我复制链接（将由 Facebook graph api、file_get_contents 和 cUrl 执行）并将其粘贴到 url 时，它工作得很好。

我非常担心，Facebook api file_get_contents 有什么问题。

请在这方面帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:41:36.180

这是正确的，无法通过 API 检索测试订单。

[订单 API 文档](https://developers.facebook.com/docs/reference/api/order/)中提到了这一点-

> 注意：调用 Graph API 时必须使用真实订单。来自您应用设置的“付款测试人员”部分中列出的用户的交易不会得到处理，也不会出现在 Order API 中

# android - 所有通知声音的光标

> ID：13692281
> 
> 赞同：0
> 
> 时间：2012-12-03T21:44:56.213
> 
> 标签：android, notifications, cursor, ringtone

我使用此代码获取所有***铃声的******光标***

 *```
RingtoneManager rm = new RingtoneManager(context);
            Cursor c = rm.getCursor(); 
```

它运作良好，但我需要的是让***Cursor***到所有***通知声音***。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:14:10.223

`rm.setType(RingtoneManager.TYPE_NOTIFICATION)`在获得光标之前尝试。*

# android - 在 Android 上使用 OpenGL ES 2.0 中的着色器程序绘制轮廓

> ID：13692282
> 
> 赞同：2
> 
> 时间：2012-12-03T21:45:00.007
> 
> 标签：android, opengl-es-2.0, textures, shader, outline

我正在使用 OpenGL ES 2.0（在 Android 上）来绘制简单的 2D 场景，图像很少。我有背景图像和其他一些具有 alpha 通道的图像。

我想仅使用着色器程序在纹理中的不透明像素周围绘制轮廓。经过一番广泛的搜索后，我找不到示例代码。看起来 GLES 2.0 还没有那么流行。

您能否提供一些示例代码或指出正确的方向，我可以在其中找到有关如何执行此操作的更多信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-29T15:10:48.547

There are a couple of ways of doing this depending on the a) Qaulity, and b) Speed you need. The common search terms are:

*   "glow outline"
*   "bloom"
*   "toon shader" or "toon shading"
*   "edge detection"
*   "silhouette extraction"
*   "mask"

1) The traditional approach is to use the stencil buffer and render to texture

*   Clear the stencil buffer (usually done once per frame)

    ```
    glClear( GL_COLOR_BUFFER_BIT | DEPTH_BUFFER_BIT | STENCIL_BUFFER_BIT ) 
    ```

*   Render to Texture

*   Disable Depth Writes

    ```
    glDepthMask( 1 ); 
    ```

*   Disable Color Buffer Writes

    ```
    glColorMask( 0, 0, 0, 0 ); 
    ```

*   Enable the Stencil buffer Set stencil to always pass and replace

    ```
    glStencilOp( GL_KEEP, GL_KEEP, GL_REPLACE );
    glStencilFunc( GL_ALWAYS, 1, 1 ); 
    ```

*   Draw object into texture

*   Disable stencil
*   Enable Color Buffer Writes
*   Enable Depth Writes
*   Do a N-pass "tap", such as 5 or 7 pass tap where you blur the texture via rendering to itself in both the vertical and horizontal direction (another option is to scale drawing the texture image up)
*   Switch to orthographic projection
*   Draw & Blend the texture image back into the framebuffer
*   Restore perspective projection

2) Pass along extra vertex, namely which vertices are adjacent in the proper winding order, and dynamically generate extra outline triangles.

See: [http://www.gamasutra.com/view/feature/1644/sponsored_feature_inking_the_.php?print=1](http://www.gamasutra.com/view/feature/1644/sponsored_feature_inking_the_.php?print=1)

3) Use cheap edge detection. In the vertex shader check the dot product of the normal with the view. If it is between:

```
-epsilon < 0 < epsilon 
```

Then you have an edge.

4) Use cheap-o-rama object scaling. It doesn't work for concave objects of course but depending on your quality needs may be "good enough"

*   Switch to a "flat" shader
*   Enable Alpha Testing
*   Draw the model scaled up slightly
*   Disable Alpha Testing
*   Draw the model but at the normal size

References:

*   [https://developer.valvesoftware.com/wiki/L4D_Glow_Effect](https://developer.valvesoftware.com/wiki/L4D_Glow_Effect)
*   [http://prideout.net/blog/?p=54](http://prideout.net/blog/?p=54)
*   [http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Toon_Shading#Outlines](http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Toon_Shading#Outlines)
*   [http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter09.html](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter09.html)

Related SO questions:

*   [Outline effects in OpenGL](https://stackoverflow.com/questions/12924188/outline-effects-in-opengl)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:39:10.930

To get the pixel shader drawing something, there needs to be geometry. As far as I understand, you want to draw a border around these images, but the outermost fragments generated would be image pixels in a basic implementation, so you'd overdraw them with any border.

If you want a 'line border', you cannot do anything else than drawing the image triangles/quads (GL_TRIANGLES,GL_QUADS), and in an additional call the outline (using GL_LINES), where you may share the vertices of a single quad. Consider, that lines can't be drawn efficiently by many GPU's)

Otherwise, see below solutions:

**Solution 1:**

*   Draw the rectangle as big as the image + border will be and adjust texture coords for the image, so that it will be placed within the rectangle appropriately. This way, no extra geometry or draw calls are required.
*   Set the texture border property (single 4 component color), there will be no need to do extra fragment shader calculations, the texture unit/sampler does all the work.

Texture properties:

```
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_CLAMP_TO_BORDER)
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_CLAMP_TO_BORDER)
glTexParameterfv(GL_TEXTURE_2D,GL_TEXTURE_BORDER_COLOR,borderColor4f) 
```

I've never used a color border for a single channel texture, so this approach needs to be verified.

**Solution 2:**

Similar to 1, but with calculations in the fragment shader to check, whether the texture coords are within the border area, instead of the texture border. Without modification, the scalars of a texture coord range from 0.0 to 1.0.

Texture properties may be:

```
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_CLAMP)
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_CLAMP) 
```

The fragment color could be determined by any of these methods:

*   an additional border color attribute for the rectangle, where either the texel or that border color is selected then (could be a vertex attribute, but more likely an uniform or constant).

*   combination of the alpha texture with a second texture as background for the whole rectangle (like a picture frame) and here too, either texel is choosen.

*   some other math function

Of course, the color values could be mixed for image/border gradients.

EDIT:

As the number, length and position of such outline segments will vary and can even form concave shapes, you'd need to do this with a geometry shader, which is not available in ES 2.0 core. The best thing you can do is to precompute a line loop for each image on the CPU. Doing such tests in a shader is rather inefficient and even overkill, depending on image size, the hardware you actually run it on etc. If you'd draw a fixed amount of line segments and transform them using the vertex shader, you can not properly cover all cases, at least not without immense effort and GPU workload.

Should you intend to change the color values of corresponding texels, your fragment shader would need to fetch a massive and varying amount of texels for each neighbour pixel towards the texture edges as in all other implementations. Such brute force techniques are usually a replacement for recursive and iterative algos, for which the CPU is a better choice. So I suggest that you do it there by either modifying the texture or generate a second one for combination in the fragment shader.

Basically, you need to implement a path finding algo, which tries to 'get around' opaque pixels towards any edge.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:05:30.820

您的 Alpha 通道可以看作是灰度图像。寻找任何边缘检测/绘图算法。例如 Canny 边缘检测器 (http://en.wikipedia.org/wiki/Canny_edge_detector)。或者，如果您的图像不是程序化的，则可能更好的主意是预先计算边缘。

如果您的目标是混合各种图像，然后根据混合结果应用轮廓，请尝试渲染到纹理，然后在屏幕上再次渲染该纹理并执行边缘检测算法。

# python - “继续”是不好的做法吗？

> ID：13692293
> 
> 赞同：0
> 
> 时间：2012-12-03T21:45:42.733
> 
> 标签：python

在 Python 中使用是否`continue`被认为是不好的做法？似乎在执行过程中停止函数/等通常是构建程序的一种“糟糕”方式，例如`sys.exit()`在错误的情况下，或者`goto`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:53:30.813

结构化编程的基础是在方法中定义明确的入口点和出口点——理想情况下每个点都有一个。然而，这并不是一个硬性规定，在很多情况下，有多个出口点是合适的。我想说看看代码，想想是否有一种不同的方法可以在没有“继续”的情况下仍然优雅，如果没有，使用“继续”将是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:48:45.930

流量控制的使用是一个有争议的话题。

一种思想流派认为，它们通过隐藏读者会假设的流控制来掩盖代码——一种线性控制。

另一种思想流派认为，如果替代方案是复杂的逻辑（如附加标志和更复杂的循环条件），它们是合理的。

您最好的选择是查看您的代码并做出决定；会使用诸如继续隐藏流控制之类的东西吗？没有它，您的代码可以清晰地表达吗？

我的意见是这样的：如果您没有令人信服的理由不这样做，我建议您避免 continue 及其亲属。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:49:01.533

就个人而言，在 Python 中使用 continue 是可以的。如果您将它放在 python 中的 if/else 语句类型条件中，则 continue 将起作用。

# php - 使用 1 个对象代表 2 个模型

> ID：13692294
> 
> 赞同：2
> 
> 时间：2012-12-03T21:45:42.753
> 
> 标签：php, oop, yii

我们正在构建一个核心购物车，我们公司将使用它作为我们将构建的多个购物车的基础。这些是高度专业化的，因此不同的产品类型将需要自己的数据表。

例如，对于销售标签的购物车...

**产品**-`id | type_id | created`

**标签**-`id | product_id | x | y | z`

我们正在为如何构建我们的对象而苦苦挣扎。我们希望以编程方式仅与*Label*类进行交互，并让数据在两个表之间“拆分”。我们折腾的一个想法是创建一个用于查询的*视图*`save()`，然后只覆盖对象的方法以实际与每个表的设置器/保存功能进行交互。

有没有人做到这一点，或者至少面临过类似的挑战？

**更新：**当然这引出了一个问题......是否存在两个表可能具有相同列名的情况？如果是这样，如何处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:54:56.753

您可以对专用列使用名称/值对。使用与列名一致的“名称”部分，您可以拥有通用的 setter/getter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:16:35.693

产品是相关表，因此您可以通过关系与它进行交互，例如`$labelModel->product`. 所以你有每个表的模型，正如 yii 建议的那样。`Label`如果您将功能放在`beforeSave()`,`afterSave()`和其他方法上，您只能与模型交互。

# perl - 将哈希值相加（Perl）

> ID：13692296
> 
> 赞同：8
> 
> 时间：2012-12-03T21:45:52.580
> 
> 标签：perl, hashtable

我想将我创建的哈希值相加。

```
my $value_count;
foreach my $key (@keys) {
    $value_count = sum($words{key}, $value_count);
} 
```

但是，当我运行它时，我得到

```
Undefined subroutine &main::sum called at C:/Users/Clayton/workspace/main/Main.pl line 54, <$filehandle1> line 174. 
```

我不确定我在哪里出错了。我是 Perl 的新手。

**编辑：** 我尝试仅使用 + 运算符，但出现错误

```
Use of uninitialized value in addition (+) at C:/Users/Clayton/workspace/main/Main.pl line 54, <$filehandle1> line 174. 
```

几乎我的哈希就像 Key Value cat 2 dog 4 rat 1

所以我试图把所有的值加起来，这样我就可以取一个平均值。

**编辑 2：** 实际的修复是在我需要使我的 $value_count = 0 的评论中。这修复了一切。谢谢你们。我认为这是一个需要解决的重要问题，我认为它可能对其他人有用，所以我将离开它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-03T21:46:44.273

要使用该`sum`功能，您需要[`List::Util`](https://perldoc.perl.org/List/Util.html#sum)软件包。但在这种情况下不需要这样做，因为您可以使用`+`运算符：

```
$value_count = $value_count + $words{$key};
# or $value_count += $words{$key}; 
```

事实上，您可以使用`sum`并避免循环。这是您应该使用的解决方案：

```
use List::Util 'sum';
my $value_count = sum values %words; 
```

该`values`函数将哈希值作为列表返回，并将`sum`该列表相加。如果您不想对所有键求和，请使用哈希切片：

```
use List::Util 'sum';
my $value_count = sum @words{@keys}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T21:48:24.823

如果你更换你应该没问题：

```
$value_count = sum($words{key}, $value_count); 
```

和：

```
$value_count += $words{key}; 
```

# android - 检查值是否大于具有奇怪结果的不同值

> ID：13692300
> 
> 赞同：0
> 
> 时间：2012-12-03T21:46:02.097
> 
> 标签：android, if-statement

我目前正在研究android项目，我不确定我是否真的很累并且做了一些愚蠢的事情，但对我来说没有任何意义。我有以下代码：

```
long pauseTime = settings.getLong("timePaused", 0);
        long currentTime = common.getCurrentEpochTimeStamp();
        int difference = (int) (currentTime - pauseTime);
        int secondsBeforeLogOff = settings.getInt("autoLogOffTime", 10) * 60;
        if (secondsBeforeLogOff > difference)
        {
            return true;
        }
        else
        {
            return false;
        } 
```

当我调试并单步执行上面的代码时，`secondsBeforeLogOff`设置为 60，设置`difference`为 5。在 if 语句中，我希望它评估为 false，但是当我单步执行代码时，它进入两个`return true`然后进入`return false`，但是在调用此代码的 if 语句中，它似乎总是返回 true。

我不明白这个 if 语句有什么问题，我尝试在 if 语句中交换两个变量，但没有成功。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:48:12.717

> 当我调试并逐步执行上面的代码时， secondsBeforeLogOff 设置为 60，差异为 5.... 它似乎总是返回 true。

这是正确的，因为 60 大于 5。

* * *

你也可以简单地写：

```
return secondsBeforeLogOff > difference; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:52:41.677

eclipse 调试器总是这样做给你一个错误的印象，即遇到了哪个条件。:(

# c# - 未调用 UploadProgressChanged 事件

> ID：13692301
> 
> 赞同：1
> 
> 时间：2012-12-03T21:46:02.887
> 
> 标签：c#, file-upload, uri

我正在使用如下所示的 UploadFilesAsync 方法上传文件。

```
var wc = new WebClient();
Uri myUri = new Uri(uriString);
wc.UploadFileAsync(myUri, "POST", filePath);
wc.UploadProgressChanged += new UploadProgressChangedEventHandler(wc_UploadProgressChanged);
wc.UploadFileCompleted += new UploadFileCompletedEventHandler(wc_UploadFileCompleted); 
```

我的 UploadFileCompleted 事件处理程序被调用，但由于某种原因 UploadProgressChanged 事件处理程序从未被调用。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:54:48.563

改变：

```
wc.UploadFileAsync(myUri, "POST", filePath);
wc.UploadProgressChanged += new UploadProgressChangedEventHandler(wc_UploadProgressChanged);
wc.UploadFileCompleted += new UploadFileCompletedEventHandler(wc_UploadFileCompleted); 
```

为了：

```
wc.UploadProgressChanged += new UploadProgressChangedEventHandler(wc_UploadProgressChanged);
wc.UploadFileCompleted += new UploadFileCompletedEventHandler(wc_UploadFileCompleted);
wc.UploadFileAsync(myUri, "POST", filePath); 
```

> **在 UploadFileAsync 调用之后**绑定事件，您必须首先绑定事件处理程序。

**MSDN 示例：**

```
// Sample call: UploadFileInBackground2("http://www.contoso.com/fileUpload.aspx", "data.txt")
public static void UploadFileInBackground2 (string address, string fileName)
{
    WebClient client = new WebClient ();
    Uri uri = new Uri(address);

    client.UploadFileCompleted += new UploadFileCompletedEventHandler (UploadFileCallback2);

     // Specify a progress notification handler.
     client.UploadProgressChanged += new UploadProgressChangedEventHandler(UploadProgressCallback);
    client.UploadFileAsync (uri, "POST", fileName);
    Console.WriteLine ("File upload started.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:02:37.740

您应该首先添加 eventHandlers，然后调用将触发它们的方法。

```
wc.UploadProgressChanged += new UploadProgressChangedEventHandler(wc_UploadProgressChanged);
wc.UploadFileCompleted += new UploadFileCompletedEventHandler(wc_UploadFileCompleted);
wc.UploadFileAsync(myUri, "POST", filePath); 
```

# jquery - 没有插件的jQuery随机失败对象？

> ID：13692303
> 
> 赞同：1
> 
> 时间：2012-12-03T21:46:23.450
> 
> 标签：jquery, random, for-loop, jquery-animate, setinterval

我正在为假期制作一张贺卡，我想要一些雪花飘落。我不想使用插件来实现这一点。我生成了一些随机在屏幕上放置雪花的代码。我正在尝试使用 for 循环一次在屏幕上随机放置多达 20 个薄片。似乎将 20 个雪花实例放在同一位置。我希望它是随机的。

// 雪落函数fallingSnow() {

```
 var snowflake = $('<div class="snowflakes"></div>');
    $('#snowZone').prepend(snowflake);
    snowX = Math.floor(Math.random() * $('#site').width());
    snowSpd = Math.floor(Math.random() + 5000);

    snowflake.css({'left':snowX+'px'});
    snowflake.animate({
        top: "500px",
        opacity : "0",

    }, snowSpd, "easeInCirc", function(){
        $(this).remove();
        fallingSnow();
    });

}
var timer = Math.floor(Math.random() +1000);

window.setInterval(function(){
    fallingSnow();
}, timer); 
```

[jsfiddle](http://jsfiddle.net/dUZba/13/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:48:59.770

修改元素，而不是其类的所有元素。

```
function fallingSnow() {
  var snowflake = $('<div class="snowflakes"></div>');
  $('#site').prepend(snowflake);
  snowX = Math.floor(Math.random() * $('#site').width());
  snowSpd = Math.floor(Math.random() * (500) * 20) + 1000;

  snowflake.css({
    'left': snowX + 'px'
  });
  snowflake.animate({
    top: "200px", // height of area
    opacity: "0",

  }, snowSpd, function() {
    $(this).remove();
    fallingSnow();
  });
}
for (var i = 0; i < 100; i++) {
  fallingSnow();
}
```

```
.snowflakes {
  width: 10px;
  height: 10px;
  background: black;
  position: absolute;
  top: -40px;
}
#site {
  width: 400px;
  height: 200px;
  position: relative;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="site"></div>
```

# lucene - 使用 Lucene 到 POCO 的 DTO

> ID：13692304
> 
> 赞同：0
> 
> 时间：2012-12-03T21:46:30.630
> 
> 标签：lucene, poco, dto, anemic-domain-model

我们使用 Lucene 作为数据检索的搜索服务器。

随之而来的是一些我没有准备好的复杂性，其中最重要的是管理对象之间的关系。

我想为我们的域对象创建一个干净简单的 POCO。这些 POCO 将包含 UI 所需的相关对象，但没有其他字段（定义这些关系的 ID，UI 上根本不需要的各种其他字段）

这意味着我不能直接将 Lucene 的 Hits 集合转换为我的 UI 友好的 POCO，并且需要一些中间类集，这些类至少包含相关对象的 ID（存储在相同或其他索引中）。我不愿称这些 DTO 对象，但为了简单起见，我将它们称为。

所以我设想它的工作方式如下：

1.  在 Lucene -> Hits 集合中执行查询
2.  遍历 Hits -> DTO 集合
3.  DTO 集合 -> [检索相关对象的服务，组成 POCO] -> POCO
4.  使用闪亮的简单 POCO 渲染 UI

我这样做的恐惧是我最终会得到贫血域模型（[http://www.martinfowler.com/bliki/AnemicDomainModel.html](http://www.martinfowler.com/bliki/AnemicDomainModel.html)）。

这是一个有效的担忧还是我走在正确的道路上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:50:45.227

我最终采用了我熟悉的 DTO 模式。DTO 拥有所有的 ID——它只是从 Lucene 检索到的记录的 CLR 反映。

然后，我从 DTO 映射到服务层中的 POCO，并使用这些对象来呈现 UI 元素。

不觉得光滑，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:03:05.140

如果您的 POCO 中没有任何 ID 信息，您的设计可能会出现贫血，因为只会有一堆未连接的杂乱对象（甚至可能无法一次将所有对象都放入内存中）。此外，在我看来，缺少 ID 会极大地干扰缓存和记忆（这有助于不会在每次需要对象时都访问数据库）。我很少有奢侈的假设我的所有数据都会一次全部放入内存中。

# entity-framework - ValidationResult.Success 字段的用途是什么？

> ID：13692312
> 
> 赞同：24
> 
> 时间：2012-12-03T21:46:45.987
> 
> 标签：entity-framework, validation

[女士号](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationresult.success.aspx)：

> 公共静态只读 ValidationResult ValidationResult.Success
> 
> 表示验证成功（如果验证成功则为 true；否则为 false）。

上面摘录中的文本对我来说没有意义，因为`Success`field 不返回 type`bool`的值，并且它返回的值（即`ValidationResult`instance ）不包含任何我们可以设置为值的布尔属性或字段表示验证成功或失败？！

任何想法这个领域的目的是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-03T22:11:35.650

`ValidationResult.Success`总是不变`null`的。其目的是**文档**。

为了成功验证，您可以编写：

```
return null; 
```

或者

```
return ValidationResult.Success; 
```

在第一种情况下，我问自己“**这是什么意思？null 是什么意思？这是成功，还是失败，还是别的什么？** ”。在后一种情况下，代码**本质上是记录在案**的，而不需要非正式的文本文档。

# c++ - 如何改用cygwin下的g++ mingw工具链

> ID：13692320
> 
> 赞同：1
> 
> 时间：2012-12-03T21:47:10.333
> 
> 标签：c++, c, mingw

看起来 g++/gcc-mingw 已安装，但我不知道如何使用它。

我正在使用 Windows 主 proc 构建一个 C 源文件，我收到此错误：

> g++-3 -mwindows -L/usr/lib/gcc/i686-pc-mingw32 -lmingw32 winmain.c
> 
> /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld：找不到-lmingw32 collect2：ld返回1退出状态

或者

> $ g++-3 -mwindows -L/usr/lib/gcc/i686-pc-mingw32 winmain.c /tmp/ccyLGxkn.o:winmain.c:(.text+0x21): 未定义引用`MainWndProc(HWND__*, unsigned int, unsigned int, long)@16' collect2: ld 返回 1 退出状态

如果我在已安装的库上做一个列表目录，我会看到：

> $ ls /usr/lib/gcc/ i686-pc-cygwin/ i686-pc-mingw32/

注意：'i686-pc-mingw32' 如何使用 mingw32 库进行编译？

另外，我通过cygwin setup.exe实用程序安装了包：'gcc-mingw-g++'，我只是不知道如何使用它？

**注意：** 我主要使用“cygwin”，我不想安装完整的 ming 安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:56:59.910

实际上有两组项目，库和实际的工具链。我安装了库而不是工具链。

这些库是：gcc-mingw-g++

mingw64-i686-gcc 是工具链

我用这个命令运行，它工作正常：

> i686-pc-mingw32-g++
> 
> i686-w64-mingw32-g++

或者：

> i686-w64-mingw32-g++ -mwindows -static -I/opt/jdk/include -I/opt/jdk/include/win32 -Wl,--add-stdcall-alias -shared -o Hello.dll Hello.cpp

# mysql - 查询缓存在本地设置上，但从不在服务器上？

> ID：13692322
> 
> 赞同：10
> 
> 时间：2012-12-03T21:47:12.903
> 
> 标签：mysql, caching, percona

我在一个项目的查询缓存方面遇到了很多麻烦：我正在运行 MySQL 的 Percona 风格，在我的本地开发机器上和生产服务器上的版本相同。现在，启用查询缓存在我的本地机器上给了我很好的结果：几乎所有应该缓存的查询，实际上都是。

现在，生产服务器上没有缓存完全相同的查询。一切都一模一样；mysql 变量、数据库内容、代码库、登录用户……但在生产环境中，只有少数查询被缓存，最重要的查询都被跳过了。而且我不知道为什么:-)

因此，在寻找解决方案时，我正在使用以下查询，用于从主题表中选择最新的 3 个主题：（这是最“重”的查询，也是我绝对想要缓存的查询！）

```
SELECT `topic`.* FROM `topics` AS `topic` 
LEFT OUTER  JOIN `topics` AS `topic_helper` 
 ON (`topic`.`id` = `topic_helper`.`id` 
      AND `topic_helper`.`created_on` < `topic`.`created_on`) 
GROUP BY `topic`.`id` HAVING COUNT(*) < 3 
ORDER BY `topic`.`created_on` DESC; 
```

因此，首先，`SHOW VARIABLES LIKE '%query_cache%`给我相同的结果，无论是在本地还是在生产中：

```
+------------------------------+----------+
| Variable_name                | Value    |
+------------------------------+----------+
| have_query_cache             | YES      |
| query_cache_limit            | 1048576  |
| query_cache_min_res_unit     | 4096     |
| query_cache_size             | 10485760 |
| query_cache_strip_comments   | OFF      |
| query_cache_type             | ON       |
| query_cache_wlock_invalidate | OFF      |
+------------------------------+----------+ 
```

运行上面的查询在第一次运行后被缓存在本地，这`SHOW PROFILE`清楚地告诉我它的跟踪接近尾声：

```
| Waiting for query cache lock   | 0.000001 |
| Waiting on query cache mutex   | 0.000001 |
| freeing items                  | 0.000000 |
| storing result in query cache  | 0.000002 |
| logging slow query             | 0.000001 |
| cleaning up                    | 0.000006 |
+--------------------------------+----------+ 
```

第二次调用按预期从缓存中返回查询。

在生产服务器上，运行此查询永远不会将其存储在缓存中。**结果集完全相同**，并且显然没有使用会使查询缓存无效的语句（根据[http://dev.mysql.com/doc/refman/5.1/en/query-cache-operation上的手册.html](http://dev.mysql.com/doc/refman/5.1/en/query-cache-operation.html) - 我确定上述查询确实符合缓存要求。）

为了完整起见，`SHOW PROFILE`生产服务器上相同查询的完整输出粘贴在这里： http: [//pastebin.com/7Jm5rmVd](http://pastebin.com/7Jm5rmVd)

此外，值得注意的是，虽然两台服务器上的配置完全相同，但我的本地版本是 5.5.27，比生产版本 5.5.17-55 上的版本稍新。难道这就是问题..？

我将本地服务器的完整`SHOW VARIABLES;`输出与生产服务器进行了比较，以查看是否缺少任何内容，但除了系统时区和日志文件的路径等之外，没有什么不同。

那么，你们中的任何人都知道下一步该去哪里寻找吗？或者有任何线索可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:05:20.920

我们在这里经常使用 Percona 服务器，也使用社区 MySQL。

查询缓存功能强大 - 并且非常复杂。MySQL 可能做的最糟糕的事情是返回一些陈旧的缓存数据。

MySQL 不仅缓存查询，还缓存数据库数据——并使用索引来提高性能。

任何可能使查询缓存无效的东西都会使其无效。

作为一个经验法则——我们不会过于关注它是否被缓存……我们相信 MySQL 的行为是智能的——如果出于任何原因它认为某些东西不应该被缓存，它就不会缓存它。我们所做的是确保我们的查询尽可能高效和简单。

如果我可以这样说 - 如果您的示例查询是“您最常用的查询之一”，我认为无论查询缓存如何，您都会遇到严重的可伸缩性问题。一旦服务器忙起来，它就会像没有腿的狗一样跑！

根据您的 pastebin 条目 - 您至少创建了一个临时表，可能是由于外部连接（或 GROUP BY）。

我完全赞成规范化 - 但有时性能需要替代路线。

您不能自己在某种查找/汇总表中缓存其中的一些数据吗？触发器可以在这里成为你的朋友:)

# unit-testing - 必要的合同测试是否意味着存根？

> ID：13692324
> 
> 赞同：1
> 
> 时间：2012-12-03T21:47:15.803
> 
> 标签：unit-testing, testing, mocking, tdd, stubs

最近，我阅读了很多关于合同和协作测试的文章（主要来自 JB Rainsberger）。为了融入其中，我开始了一个小项目。

据我了解，契约测试的职责是确保实现尊重其接口固有契约。换句话说，它鼓励了 Liskov 替换原则。

基本上，嘲笑对象合作者就是对它做出假设。现在，如果这些假设发生变化会发生什么？如果我像这样使用 Mockito 模拟协作者（这与存根相同）：

```
 when(collaborator.doSomething(someArgument)).thenReturn(someValue); 
```

当我修改协作者界面（即它的合同）时，我将无法注意到这些变化。

所以这是我的问题：当伪造一个为被测系统提供间接输入的合作者时，是否应该使用存根来防止未注意到的接口/合同更改？

以下是我已经检查过的一些链接：

[删除集成测试诈骗理解协作和合同](https://stackoverflow.com/questions/9276337/removing-the-integration-test-scam-understanding-collaboration-and-contract)

[以不同的方式在 Java 中编写合同测试](http://blog.thecodewhisperer.com/2011/07/17/writing-contract-tests-in-java-differently/)

我希望我足够清楚，如果没有，我会尽力使这更透明。提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:48:02.297

there is a clear separation between Stubs and Mocks.

A stub is a stand-in and cannot change the outcome of the test. For example, an input parameter that is passed into the subject.

A mock on the other hand can fail a test. It is the basis for the testing the collaboration between objects. If the expected collaboration is not met, the test should fail.

So in the context of your question, indirect inputs into a system should be stubs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:26:12.790

JB Rainsberger 的一篇文章似乎准确地回答了您的问题：[谁来测试合同测试？](http://blog.thecodewhisperer.com/2009/10/08/who-tests-the-contract-tests/)

> 所以这是我的问题：当伪造一个为被测系统提供间接输入的合作者时，是否应该使用存根来防止未注意到的接口/合同更改？

使用存根而不是什么？

嘲笑？正如@bryanbcook 所指出的那样，这并没有太大的区别，无论如何，存根在这种情况下更合适。

甚至没有实现与合作者相同的基类的手动假类？当然。

IMO 有 2 种合同变更：

*   “硬”变化，即合作者方法的返回类型或参数类型的变化。这些修改很容易——它们不会被忽视，因为您的测试甚至不会再编译，*只要您的假合作者实现与真正的合作者相同的接口/基类*。

*   “软”变化，即协作者返回给定值或其他值的条件的变化，协作者可以返回或接受的值范围的变化，可能抛出的异常等。这些更难发现但是根据上述文章，可以通过强制合同测试和协作测试之间的严格对应来避免它们。

# java - 11以下API中移除ActionBar

> ID：13692326
> 
> 赞同：4
> 
> 时间：2012-12-03T21:47:23.717
> 
> 标签：java, android, android-actionbar

我很少`Activities`有`"@android:style/Theme.Holo.Light.NoActionBar"`用作主题的。**高于11的****API**级别可以正常工作，但是当我在清单中设置 my to时，它告诉我它需要**API**级别**13**。**`minimumSdkVerison``"8"`**

 ********如果我理解正确， API**级别低于**8**时没有`ActionBar`或“Theme.Holo” ，所以默认情况下不会有，但是如果我忽略 ，那么在**API**级别高于**11**时，我将拥有. 有什么简单的方法可以摆脱所有的？我尝试使用 Sherlock ActionBar，但发现它对我的需求来说太复杂了，因为我只想摆脱**API 11**以上的设备。****`ActionBar``"@android:style/Theme.Holo.Light.NoActionBar"`****`Activities``ActionBar``ActionBar``Activities``ActionBar`********

 ******* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T21:57:50.513

当您使用 Eclipse 向导创建新项目时，它会`AppTheme`为您创建主题，该主题继承自`AppBaseTheme`. 根据 API 级别替换此主题。因此，您可以将`android:Theme.Light.NoTitleBar`其用作您的默认主题并`android:Theme.Holo.Light.NoActionBar`从 API 级别 11 开始使用。

如果您不关心使用 Holo，只需将`android:Theme.Light.NoTitleBar`其用作您的主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-12T18:58:42.780

要解决此问题，请使用 AppCompat 支持库并将此代码添加到您不想在 AndroidManifest 文件中显示 Actiobar 的活动中

```
android:theme="@style/Theme.AppCompat.NoActionBar" 
```************

# java - 在 Java 中查找既是三角形数又是星数的数

> ID：13692327
> 
> 赞同：2
> 
> 时间：2012-12-03T21:47:29.453
> 
> 标签：java, methods, while-loop

这是我被分配的问题：

> 所谓的“星号”，s，是由以下公式定义的数字： s = 6n(n-1) + 1 其中 n 是星号的索引。因此，前六个（即对于 n = 1、2、3、4、5 和 6）星号是：1、13、37、73、121、181
> 
> 相反，所谓的“三角形数”t 是从 1 到 n 的数字之和：t = 1 + 2 + … + (n-1) + n。因此前六个（即对于 n = 1、2、3、4、5 和 6）三角形数是：1、3、6、10、15、21
> 
> 编写一个 Java 应用程序，生成一个包含所有 int 类型值的列表，这些值既是星号又是三角形数。
> 
> 解决这个问题时，您必须编写并使用至少一个函数（例如`isTriangeNumber()`or`isStarNumber()` 或`determineTriangeNumber()`or `determineStarNumber()`）。此外，您必须仅使用此处提供的公式来解决问题。

tl;dr：需要输出既是星数又是三角形数的值。

不幸的是，我只能在无限循环中得到输出值“1”的结果，即使我在 while 循环中递增 1。

```
public class TriangularStars {
    public static void main(String[] args) {

    int n=1;            
    int starNumber = starNumber(n);
    int triangleNumber = triangleNumber(n);

    while ((starNumber<Integer.MAX_VALUE)&&(n<=Integer.MAX_VALUE))
    {
        if ((starNumber==triangleNumber)&& (starNumber<Integer.MAX_VALUE))
                {
                    System.out.println(starNumber);
                }
        n++;
    }
  }

public static int starNumber( int n)
{
    int starNumber;
    starNumber= (((6*n)*(n-1))+1);
    return starNumber;

}
public static int triangleNumber( int n)
{
    int triangleNumber;
    triangleNumber =+ n;
    return triangleNumber;
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T22:01:28.207

这是一个骨架。自己完成剩下的：

要问自己的问题：

1.  如何制作三角号码？
2.  我怎么知道某物是否是星号？
3.  为什么我只需要继续直到三角形为负数？三角形怎么可能是负数？

祝你好运！

```
public class TriangularStars {
  private static final double ERROR = 1e-7;

  public static void main(String args[]) {
    int triangle = 0;
    for (int i = 0; triangle >= 0; i++) {
      triangle = determineTriangleNumber(i, triangle);
      if (isStarNumber(triangle)) {
        System.out.println(triangle);
      }
    }
  }

  public static boolean isStarNumber(int possibleStar) {
    double test = (possibleStar - 1) / 6.;
    int reduce = (int) (test + ERROR);
    if (Math.abs(test - reduce) > ERROR)
      return false;

    int sqrt = (int) (Math.sqrt(reduce) + ERROR);
    return reduce == sqrt * (sqrt + 1);
  }

  public static int determineTriangleNumber(int i, int previous) {
    return previous + i;
  }
} 
```

输出：

```
1
253
49141
9533161
1849384153 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T21:53:11.393

这里的问题是星号和三角形数的“N”不必相同。所以你可以在计算星数和三角形数时增加“n”，而不是继续增加三角形数，只要它小于当前的星数。本质上，您需要维护两个变量“n”和“m”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T21:50:26.113

您需要在循环内和循环内添加新`starNumber()`调用`triangleNumber()`。您获得初始值，但永远不会使用更新的值重新调用它们`n`。

作为第一个切入点，我会立即将这些调用放在 n++ 之后，所以

```
n++;
starNumber = starNumber(n);
triangleNumber = triangleNumber(n);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T21:49:28.507

第一个问题是您只`starNumber()`在循环外调用该方法一次。（与 相同`triangleNumber()`。）

第二个问题是，除非`Integer.MAX_VALUE`是星号，否则您的循环将永远运行。原因是 Java 数值运算会无声地溢出，因此如果您的下一个星号大于`Integer.MAX_VALUE`，结果将只是环绕。您需要使用`long`s 来检测数字是否大于`Integer.MAX_VALUE`。

第三个问题是，即使将所有调用都放入循环中，它也只会显示共享相同`n`值的星号/三角号对。您需要并行有两个索引，一个用于星号，另一个用于三角形号，并根据哪个函数返回较小的数字来增加一个或另一个。所以沿着这些思路：

```
while( starNumber and triangleNumber are both less than or equal to Integer.MAX_VALUE) {
   while( starNumber < triangleNumber ) {
     generate next starnumber;         
   }
   while( triangleNumber < starNumber ) {
     generate next triangle number;
   }
   if( starNumber == triangleNumber ) {
     we've found a matching pair
   }
} 
```

第四个问题是你的`triangleNumber()`方法是错误的，我想知道它是如何编译的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T22:17:25.920

我认为你的方法有缺陷。`isStarNumber(n)`如果没有在该方法内部测试每个可能的星号，您将无法直接创建一个方法。我会采取稍微不同的方法：预计算。

首先，找到所有的三角形数：

```
List<Integer> tris = new ArrayList<Integer>();
for(int i = 2, t = 1; t > 0; i++) { // loop ends after integer overflow
    tris.add(t);
    t += i; // compute the next triangle value
} 
```

我们可以对星号做同样的事情：

考虑以下 -

```
star(n) = 6*n*(n-1) + 1 = 6n^2 - 6n + 1

therefore, by extension

star(n + 1) = 6*(n+1)*n + 1 = 6n^2 + 6n +1

and, star(n + 1) - star(n - 1), with some algebra, is 12n

star(n+1) = star(n) + 12* n 
```

这导致我们得出以下公式

```
List<Integer> stars = new ArrayList<Integer>();
for(int i = 1, s = 1; s > 0; i++) {
    stars.add(s);
    s += (12 * i);
} 
```

真正的问题是……我们真的需要搜索每个数字吗？答案是不！我们只需要搜索实际上是一个或另一个的数字。所以我们可以很容易地使用星星中的数字（其中 18k）并找到那些也是 tris 的数字！

```
for(Integer star : stars) {
    if(tris.contains(star)) 
        System.out.println("Awesome! " + star + " is both star and tri!");
} 
```

我希望这对你有意义。为了您自己的利益，不要盲目地将这些片段移动到您的代码中。相反，要了解它为什么会这样做，在你不确定的地方提出问题。（希望这不会在两个小时内到期！）

祝你这项任务好运。

这是一些很棒的东西，它会返回前 4 个，但不会返回最后一个。我不知道为什么最后一个不会出来。玩得开心：

```
class StarAndTri2 {
    public static void main(String...args) {
        final double q2 = Math.sqrt(2);
        out(1);
        int a = 1;
        for(int i = 1; a > 0; i++) {
            a += (12 * i);
            if(x((int)(Math.sqrt(a)*q2))==a)out(a);
        }
    }
    static int x(int q) { return (q*(q+1))/2; }
    static void out(int i) {System.out.println("found: " + i);}
} 
```

# javascript - 如何拖放到文本中

> ID：13692328
> 
> 赞同：0
> 
> 时间：2012-12-03T21:47:30.050
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

在尝试构建某些东西之前，我想确定它是否可能。

从可以预先填充文本并且用户可以添加/删除文本的文本区域开始。现在，旁边有一些小元素。它们可以是图像或 HTML 元素，例如按钮或锚链接，无论哪种更容易。用户可以将一个元素拖到文本区域中，它会被插入到鼠标光标位置，并通过推动它周围的现有文本来占据文本空间（附近的元素也将保留，以便用户可以放下一秒钟）。元素将保留为元素，以后可以将其拖动到文档中的其他位置或将被删除的视口之外。当元素根据需要定位时，可以通过某种方式（regex、dom等）识别元素的位置，从而可以将它们替换为不同的内容。

将需要换行符。理想情况下，它将与 jQuery 和 IE7+ 一起使用，但是，IE7 的需求可能需要更改。

我遇到了以下接近但不完全的情况。

*   [http://skfox.com/jqExamples/insertAtCaret.html](http://skfox.com/jqExamples/insertAtCaret.html)
*   [http://jsbin.com/egefi](http://jsbin.com/egefi)（参考[jQuery Drag & Drop into a Text Area](https://stackoverflow.com/questions/1922559/jquery-drag-drop-into-a-text-area)）
*   [http://jqueryui.com/droppable/#method-option](http://jqueryui.com/droppable/#method-option)

如果您认为可以构建它并且您对我应该从哪里开始提出建议，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-08T14:29:18.337

我昨天做了一些非常相似的事情，所以为什么不分享:)

我的目标是将文本元素放到我的 textarea 上，在两行文本的中间，同时显示一个指示符指向它的放置位置。相信对你有用！;)

```
$(document).ready(function() {

    var lineHeight = parseInt($('#textarea').css('line-height').replace('px',''));
    var previousLineNo = 0;
    var content = $('#textarea').val();
    var linesArray = content.length > 0 ? content.split('\n') : [];
    var lineNo = 0;
    var emptyLineAdded = false;

    $('.draggable').draggable({
        revert: function(is_valid_drop) {
            if (!is_valid_drop) {
                $('#textarea').val(content);

                return true;
            }
        },
        drag: function(event, ui) {
            lineNo = getLineNo(ui, lineHeight);

            if (linesArray.length > 0 && previousLineNo != lineNo) {
                insertWhiteLine(lineNo, linesArray);
            }

            previousLineNo = lineNo;
        }
    });

    $("#textarea").droppable({
        accept: ".draggable",
        drop: function( event, ui ) {
            appendAtLine(lineNo, linesArray, ui.draggable.text());
            $(ui.draggable).remove();
            content = $('#textarea').val();
            linesArray = content.split('\n');

            if (linesArray[linesArray.length - 1] == '')
                linesArray.pop(); //remove empty line
        }
    });

    $('#textarea').on('input', function() {
        if (!emptyLineAdded) {
            console.log('input !');
            console.log($('#textarea').val());
            content = $('#textarea').val();
            linesArray = content.split('\n');

            if (linesArray[linesArray.length - 1] == '')
                linesArray.pop(); //remove empty line
        }
    });

});

//Returns the top position of a draggable element,
//relative to the textarea. (0 means at the very top of the textarea)
function getYPosition(element, lineHeight) {
    var participantIndex = $(element.helper.context).index();
    var initPos = participantIndex * lineHeight;
    var actualPos = initPos + element.position.top;

    return actualPos;
}

//Returns the line number corresponding to where the element
//would be dropped
function getLineNo(element, lineHeight) {
    return Math.round(getYPosition(element, lineHeight) / lineHeight);
}

//Inserts a white line at the given line number,
//to show where the element would be dropped in the textarea
function insertWhiteLine(lineNo, linesArray) {
    $('#textarea').val('');
    $(linesArray).each(function(index, value) {
        if (index < lineNo)
            $('#textarea').val($('#textarea').val() + value + '\n');
    });

    emptyLineAdded = true;
    $('#textarea').val($('#textarea').val() + '_____________\n'); //white line
    emptyLineAdded = false;

    $(linesArray).each(function(index, value) {
        if (index >= lineNo)
            $('#textarea').val($('#textarea').val() + value + '\n');
    });
}

//Inserts content of draggable at the given line number
function appendAtLine(lineNo, linesArray, content) {
    $('#textarea').val('');
    $(linesArray).each(function(index, value) {
        if (index < lineNo)
            $('#textarea').val($('#textarea').val() + value + '\n');
    });

    $('#textarea').val($('#textarea').val() + content + '\n'); //content to be added

    $(linesArray).each(function(index, value) {
        if (index >= lineNo)
            $('#textarea').val($('#textarea').val() + value + '\n');
    });
} 
```

# php - PHP获取HTML - 缺少字符

> ID：13692331
> 
> 赞同：0
> 
> 时间：2012-12-03T21:47:56.507
> 
> 标签：php, html, encoding, entities

> **可能重复：**
> [如何将 ISO 8859-1 字符转换为 UTF-8](https://stackoverflow.com/questions/8253914/how-to-convert-iso-8859-1-characters-to-utf-8)

我想获得这个 uRL 的 HTML 内容：[http ://www.20minutos.es/noticia/​​1635461/0/aforo/madrid-arena/vigilantes/](http://www.20minutos.es/noticia/1635461/0/aforo/madrid-arena/vigilantes/)

但是缺少字符（如“ñ”或“á”、“é”...）

获取 HTML 的代码是

```
$html = file_get_contents_utf8($url); 
```

接着：

```
$html = mb_convert_encoding($html, 'HTML-ENTITIES', "UTF-8"); 
```

我尝试了一些替代方案，但仍然无法正常工作。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:06:57.963

我不确定您要转换为哪种编码，但是使用 file_get_contents() 应该可以完成您想做的事情。

更改您的代码如下

```
<?php
 $url = 'http://www.20minutos.es/noticia/1635461/0/aforo/madrid-arena/vigilantes/';
 $html = file_get_contents($url);
 echo $html;
?> 
```

我对此进行了测试，它显示了您所指的所有字符（如“ñ”或“á”、“é”……）。

# php - 如果 PHP 库可以注册自己的自动加载器，那么为什么 PSR-0 要求它们位于统一目录中？

> ID：13692334
> 
> 赞同：8
> 
> 时间：2012-12-03T21:47:59.610
> 
> 标签：php, autoload, spl, psr-0

我正在构建一个框架（这是一个巨大的简化——请不要推荐使用现有的框架，这没有帮助），我希望能够将其他库集成到其中。

PSR-0 建议建议每个子命名空间中的所有文件都包含在它们自己的特定目录中。为了让我的框架的用户不那么复杂，我想把所有东西都放在一个命名空间中，但将文件组织到目录中。

如果 PHP 库可以注册自己的自动加载器`spl_register_autoload()`，那么为什么必须遵守这个目录结构呢？简单地避开 PSR-0，为我的类使用我自己的自动加载器，然后对我可能使用的任何 Symfony 类使用（例如）Symfony 的自动加载器是否可行/允许？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T21:53:11.727

没有人强迫你遵守标准。当然，您可以制作自己的自动装载机并使用它。

该规范很可能是为了使库更易于理解而创建的，其想法是，如果所有代码都使用相同的结构，那么任何人都应该能够立即知道去哪里找到某个类。

以下标准具有一定的优势，例如：

*   了解标准的人已经知道如何使用代码
*   可以使用符合标准的工具来处理相关代码（例如，IDE 插件）
*   假设符合标准的代码已经可以与所有遵守代码一起使用，即使它不是专门为您自己的代码制作的（例如，第三方自动加载器应该能够加载您的代码，而您自己的自动加载器应该能够加载第三方方代码）

缺点可能是您可能不*喜欢*该标准。如果是这种情况，那么在决定是否遵循它时，您也应该权衡优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:56:06.840

此外，如果其他库遵循该标准，您可以只使用单个自动加载器从多个库中加载类，而不是为您的类使用您的自动加载器，然后必须为它的类加载 Symfony 的自动加载器，然后为它的类加载库 X 的自动加载器。它的类。

只要自动加载器符合 PSR 并且其他库的目录结构也符合，您就可以坚持使用一个自动加载器。

# sql-server - 从现有行生成通用插入语句以断开连接插入到另一个数据库以进行同步

> ID：13692339
> 
> 赞同：1
> 
> 时间：2012-12-03T21:48:12.670
> 
> 标签：sql-server, sql-server-2008, insert, disconnected

我们目前有 ac# 控制台应用程序，它从触发器创建一个同步表，允许应用程序向另一个站点的另一个数据库副本发送插入更新或删除语句。这使表保持同步，但是系统经常崩溃，我们没有源代码。

我目前正在尝试在 sql server 中重新创建它。

同步表在每个表的触发器中生成，并添加

```
TableName Action RowNumer columns_updated
test      Insert 10       0x3
test2     Delete 2        
test      update 15       07x 
```

由此我可以生成一个可以在远程服务器上运行的插入、更新或删除语句，但是如果有数千行，它就会太慢了。

```
Insert server2.test.column1,column2,column3.column4 select column1,column2,colum3,column4 from
server1.test where row = RowNumber 
```

我想做的是在 server1 上生成插入语句，然后在 server2 上简单地运行它

```
"Insert column1.column2.colum3.column4 into table1 values 110000,New Order, £99.00, 'John Smith'" 
```

那么是否有人有办法将插入语句写入表行作为准备在服务器 2 中处理的字符串。此选择不必在触发器中发生。

即读取任何表中的任何行并将其转换为插入语句？

# django - 在南数据迁移中使用 django-taggit？

> ID：13692345
> 
> 赞同：7
> 
> 时间：2012-12-03T21:48:26.757
> 
> 标签：django, django-south, django-taggit

我有一个使用 django-taggit 的模型。我想执行向此模型添加标签的 South 数据迁移。但是，.tags 管理器在 South 迁移中不可用，您必须使用 South orm['myapp.MyModel'] API 而不是普通的 Django orm。

这样做会引发异常，因为 post.tags 是 None。

```
post = orm['blog.Post'].objects.latest()
post.tags.add('programming') 
```

是否可以在 South 数据迁移中使用 taggit 创建和应用标签？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T19:59:20.010

是的，您可以这样做，但是您需要`Taggit`直接使用 's API（即创建`Tag`and `TaggedItem`），而不是使用`add`方法。

首先，您需要先冻结`taggit`此迁移：

```
./manage.py datamigration blog migration_name --freeze taggit 
```

然后您的 forwards 方法可能看起来像这样（假设您有一个要应用于所有 Post 对象的标签列表。

```
def forwards(self, orm):
    for post in orm['blog.Post'].objects.all():
        # A list of tags you want to add to all Posts.
        tags = ['tags', 'to', 'add']

        for tag_name in tags:
            # Find the any Tag/TaggedItem with ``tag_name``, and associate it
            # to the blog Post
            ct = orm['contenttypes.contenttype'].objects.get(
                app_label='blog',
                model='post'
            )
            tag, created = orm['taggit.tag'].objects.get_or_create(
                name=tag_name)
            tagged_item, created = orm['taggit.taggeditem'].objects.get_or_create(
                tag=tag,
                content_type=ct,
                object_id=post.id  # Associates the Tag with your Post
            ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:04:40.773

我想不是。您必须首先执行迁移，然后使用帖子对象添加默认标签。标签不与模型相关联。它们与模型对象相关联。

# rendering - 移动 Safari 渲染错误？现场黑匣子

> ID：13692350
> 
> 赞同：0
> 
> 时间：2012-12-03T21:48:46.743
> 
> 标签：rendering, mobile-safari

嘿，我很久以前建立了一个网站，现在我注意到我的网站上有一个错误！

如果用户在带有 ios 6 的 ios 设备上在 safari 应用程序中打开页面，则内容框底部会出现一个黑框！（见下面的截图）

在其他浏览器上，如 firefox 或 google chrome 以及 safari for mac，一切看起来都很好。

该网站的 URL 是[http://rsaschheim.de](http://rsaschheim.de)

希望有人能帮忙！

谢谢劳伦兹

**带有 Bug 的 iOS 6 屏幕截图：**

![带有错误的 iOS 6 屏幕截图](../Images/74a75bcea402ac310766e2379278663c.png)

**没有 Bug 的 iOS 5 截图：**

![iOS 5 截图无Bug](../Images/3cce5ac9cf9602522e750c93a38bf3ea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:18:45.627

这似乎在当前的 iOS 版本中已修复。

# r - 绘图错误 - if (nrow(layer_data) == 0) return() 中的错误：参数长度为零

> ID：13692353
> 
> 赞同：0
> 
> 时间：2012-12-03T21:48:54.963
> 
> 标签：r, ggplot2

我正在运行一个 R 代码（不是我的），旨在读取目录并绘制图表：

```
library(ggplot2)

dat <- at <- read.table(file="User/alexanderzamani/Documents/results.txt", 
                        sep = "\t", header= TRUE)

#let's just look at a single mutation rate
r <- dat[which(dat$u==0.00010),]

#now let's plot it out
p <- ggplot(r, aes(x=S, y=k, group=pN))
p + geom_line(aes(color=pN), size=2, alpha=0.5) + geom_point() +
    xlab("Overlapping generations (proportion of offspring that survive)") + 
    ylab("substitution rate") + 
    scale_colour_gradient(name="Degree of\npopulationsize\nfluctuation") 
```

安装后`ggplot2`，我运行了代码，它显示了一个空白的石英窗口和这个错误：

```
Error in if (nrow(layer_data) == 0) return() : argument is of length zero 
```

我以前没有使用 R 的经验，任何帮助将不胜感激。

- *编辑*

这是我正在使用的上传的 .txt 文件的链接 - [http://txtup.co/NW6lU](http://txtup.co/NW6lU)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T23:04:12.727

当您执行以下操作时，您正在`dat`创建`r`where 列`u`等于 0.0001 的子集：

```
r <- dat[which(dat$u==0.0001),] 
```

您是否可能没有任何值为 0.0001 ....？

我做了0.1并得到：

![在此处输入图像描述](../Images/546c29cf4e87923e2b2a6225c0a59453.png)

# regex - 使用正则表达式有没有办法匹配字符串中的外部字符并排除内部字符？

> ID：13692354
> 
> 赞同：1
> 
> 时间：2012-12-03T21:48:56.247
> 
> 标签：regex

我知道我可以使用前瞻和后视排除字符串中的外部字符，但我不确定中心的字符。

我想要的是`ABCDEF`从字符串中得到一个匹配项`ABC 123 DEF`。

这可以用正则表达式字符串吗？如果没有，是否可以通过其他方式完成？

**编辑**

为了更清楚地说明，在上面的示例中，我可以使用正则表达式字符串`/ABC.*?DEF/`来排序得到我想要的，但这包括匹配的所有内容`.*?`。我想要的是匹配类似`ABC(match whatever, but then throw it out)DEF`导致一个匹配的`ABCDEF`.

作为另一个示例，我可以执行以下操作（在 sudo 代码和正则表达式中）：

```
string myStr = "ABC 123 DEF";
string tempMatch = RegexMatch(myStr, "(?<=ABC).*?(?=DEF)"); //Returns " 123 "
string FinalString = myStr.Replace(tempMatch, ""); //Returns "ABCDEF". This is what I want 
```

同样，有没有办法用一个正则表达式字符串来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:15:18.950

由于大多数语言中的正则表达式替换功能不会更改它所操作的字符串（但会生成一个新字符串），因此您可以在大多数语言中将其作为单行。首先，匹配所有内容，捕获所需的部分：

```
^.*(ABC).*(DEF).*$ 
```

（如果您的输入包含换行符，请确保使用单行/“dotall”选项！）

然后将其替换为：

```
$1$2 
```

这会给你`ABCDEF`一个任务。

尽管如此，正如评论和马克的回答中所述，引擎*确实*匹配和之间的`ABC`东西`DEF`。只有替换便利功能才能将其丢弃。但我想说，几乎所有语言都支持这一点。

**重要提示：**这种方法当然只有在您的输入字符串只包含一次所需的模式时才有效（假设`ABC`并且`DEF`实际上是可变的）。

PHP 中的示例实现：

```
$output = preg_replace('/^.*(ABC).*(DEF).*$/s', '$1$2', $input); 
```

或 JavaScript（没有单行模式）：

```
var output = input.replace(/^[\s\S]*(ABC)[\s\S]*(DEF)[\s\S]*$/, '$1$2'); 
```

或 C#：

```
string output = Regex.Replace(input, @"^.*(ABC).*(DEF).*$", "$1$2", RegexOptions.Singleline); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T21:50:46.353

一个正则表达式可以包含多个捕获组。每个组必须由连续的字符组成，因此不可能有一个组来捕获您想要的内容，但组本身不必是连续的，因此您可以组合多个组以获得所需的结果。

**正则表达式**

```
(ABC).*(DEF) 
```

**捕获**

```
ABC
DEF 
```

在线查看：[rubular](http://rubular.com/r/WCJ4gC2L2I)

**示例 C# 代码**

```
string myStr = "ABC 123 DEF";
Match m = Regex.Match(myStr, "(ABC).*(DEF)");
if (m.Success)
{
    string result = m.Groups[1].Value + m.Groups[2].Value;  // Gives "ABCDEF"
    // ...
} 
```

# java - 释放鼠标后重新排序项目

> ID：13692357
> 
> 赞同：0
> 
> 时间：2012-12-03T21:49:10.257
> 
> 标签：java, swing

我不确定出了什么问题，所以我会尝试解释一下，您可以在以下示例中进行测试：
项目 (3 MB)：[http ://ryannaddy.com/downloads/dist.zip](http://ryannaddy.com/downloads/dist.zip)

1.  解压缩并运行 jar 文件
2.  在应用程序中打开 2 个图像文件
3.  右侧是所有打开图像的列表，您可以拖放图层以最终对主图片的 z 顺序进行排序。
4.  如果将顶层拖到底层下方，它会移回顶部（应该移动到底层下方）
5.  如果将顶层向下拖动几个像素，它将将顶层移动到底层下方。
6.  如果将底层向下拖动，则会将其移动到顶层上方（应保持在底部）

最后，我想将这些标签拖到任何位置，并且在那里放置标签。

释放鼠标后执行的代码块以组织标签：

```
public void lblMouseReleased(MouseEvent evt){
    if(dragging){
        int componentCount = layers.getComponentCount() - 1;
        LayerItem[] comps = new LayerItem[componentCount];

        FocusTraversalPolicy focus = layers.getFocusTraversalPolicy();

        Component comp = focus.getFirstComponent(layers);
        for(int i = 0; i < componentCount; i++){
            Component newComp = focus.getComponentAfter(layers, comp);
            comp = newComp;
            comps[i] = (LayerItem)newComp;
            System.out.println(comps[i].layerID);
        }
        Layers.rebuild(layers, comps);
    }
    dragging = false;
} 
```

**Layers.rebuild**的代码：

```
public static void rebuild(JPanel layers, Component[] list){
    for(int i = 0; i < list.length; i++){
        layers.remove(list[i]);
    }
    for(int i = 0; i < list.length; i++){
        list[i].setBounds(0, i * 50 + 30, 198, 50);
        layers.add(list[i]);
    }
    layers.revalidate();
    layers.repaint();
} 
```

这应该是问题的所有相关代码，如果您需要更多，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:56:09.100

我得到了它！我是因为我没有得到面板中需要的所有项目。我面板中的第一个项目是一个焦点设置为 false 的标题，因为它不属于分组，所以我告诉我的代码只订购项目 1+，而它应该是 0+

# asp.net - 单元测试http模块，检查http状态码

> ID：13692358
> 
> 赞同：0
> 
> 时间：2012-12-03T21:49:11.597
> 
> 标签：asp.net, nunit, moq, httpmodule

我不明白为什么这个单元测试不起作用。它基于此处找到的代码示例： [http ://weblogs.asp.net/rashid/archive/2009/03/12/unit-testable-httpmodule-and-httphandler.aspx](http://weblogs.asp.net/rashid/archive/2009/03/12/unit-testable-httpmodule-and-httphandler.aspx)

```
[Test]
public void when_user_doesnt_authenticate_returns_304_status()
{
    _httpContext = new Mock<HttpContextBase>();
    _httpRequest = new Mock<HttpRequestBase>();
    _httpResponse = new Mock<HttpResponseBase>();          

    _httpContext.SetupGet(context => context.Request).Returns(_httpRequest.Object);        

    var module = new TAS.HttpModule.TASHttpModule();         
    _httpResponse.SetupSet(response => response.StatusCode = 304).Verifiable();
    _httpContext.SetupGet(context => context.Response).Returns(_httpResponse.Object);         
    module.OnAuthenticateRequest(_httpContext.Object);   
    _httpResponse.VerifyAll();

} 
```

http模块中的代码（简化以演示问题）

```
public class TASHttpModule : BaseHttpModule

 public override void OnAuthenticateRequest(HttpContextBase context)
 {

    HttpResponseBase response = context.Response;
    response.StatusCode = 403;
    response.StatusDescription = "Access Denied";
    response.End();
 }
}
public class BaseHttpModule
    {
        public void Init(HttpApplication context)
        {
            context.BeginRequest += (sender, e) => OnBeginRequest(new HttpContextWrapper(((HttpApplication)sender).Context));
            context.Error += (sender, e) => OnError(new HttpContextWrapper(((HttpApplication)sender).Context));
            context.EndRequest += (sender, e) => OnEndRequest(new HttpContextWrapper(((HttpApplication)sender).Context));
            context.AuthenticateRequest += (sender, e) => OnAuthenticateRequest(new HttpContextWrapper(((HttpApplication)sender).Context));
        }

        public void Dispose()
        {
        }

        public virtual void OnBeginRequest(HttpContextBase context)
        {
        }

        public virtual void OnError(HttpContextBase context)
        {
        }

        public virtual void OnEndRequest(HttpContextBase context)
        {
        }
        public virtual void OnAuthenticateRequest(HttpContextBase context)
        {
        }
    } 
```

基本问题是无法设置 response.StatusCode 值。它总是恢复为零。所以检查 304 状态的测试总是失败。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T02:29:50.400

我刚刚设法证明 304 和 403 不相等。自我注意：直接使用http状态码枚举而不是数字。

# javascript - 代码片段是否符合函数语句、函数表达式和函数表达式语句的条件？

> ID：13692368
> 
> 赞同：1
> 
> 时间：2012-12-03T21:49:44.103
> 
> 标签：javascript

我正在查看来自[EcmaScript.NET](http://code.google.com/p/ecmascript-net/)的一些代码，特别是，我正在查看[FunctionNode.cs](http://code.google.com/p/ecmascript-net/source/browse/trunk/EcmaScript.NET/FunctionNode.cs)中的定义。他们在定义之上提供了一个相对描述性的评论，但我不确定我下面的示例符合什么条件：

```
/// <summary>
/// There are three types of functions that can be defined. The first
/// is a function statement. This is a function appearing as a top-level
/// statement (i.e., not nested inside some other statement) in either a
/// script or a function.
///
/// The second is a function expression, which is a function appearing in
/// an expression except for the third type, which is...
///
/// The third type is a function expression where the expression is the
/// top-level expression in an expression statement.
///
/// The three types of functions have different treatment and must be
/// distinquished.
/// </summary>
public const int FUNCTION_STATEMENT = 1;
public const int FUNCTION_EXPRESSION = 2;
public const int FUNCTION_EXPRESSION_STATEMENT = 3; 
```

这是我大致看到的：

```
<script>
(function(){document.write("The name is Bond, ")})(),
(function(){document.write("James Bond.")})()
</script> 
```

这是否符合`FUNCTION_STATEMENT`, `FUNCTION_EXPRESSION`, `FUNCTION_EXPRESSION_STATEMENT`?

## 更新

我想我的问题是关于逗号的作用：

```
// Expression
(function(){ document.write('Expression1<br>'); })();
(function(){ document.write('Expression2<br>'); })();

// Expression
var showAlert=function(){ document.write('Expression3<br>'); };
showAlert();

// Declaration
function doAlert(){ document.write('Declaration<br>'); }
doAlert();

// What about this?
(function(){ document.write('What about'); })(), // <-- Note the comma
(function(){ document.write(' this?<br>'); })();

// And now this? 
var a = ((function(){ return 1; })(), // <-- Again, a comma
(function(){ return 2; })());
document.write("And now this? a = " + a); 
```

最后两个是什么？表达式还是表达式语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T23:06:37.063

不了解 EcmaScript.NET，但据我了解，所有这些函数都是函数表达式。它们是[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)调用的一部分，它又是[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)表达式的一部分——绝不是“*顶级*”。

我想说第三种类型是语法上不允许的函数语句，比如

```
if (false) {
    function doSomething() {…}
} 
```

查看[Kangax 关于命名函数表达式的著名文章](http://kangax.github.com/nfe/)，其中总结了它们跨引擎的行为（例如 Gecko 的[函数语句](http://kangax.github.com/nfe/#function-statements)）。

# java - Play Framework -- 将新目录添加到类路径

> ID：13692369
> 
> 赞同：5
> 
> 时间：2012-12-03T21:50:00.830
> 
> 标签：java, scala, playframework, playframework-2.0

我希望能够有一个单独的目录，可以将代表插件的 jar 文件添加到 Play 2.0 项目中。Jar 文件通常保存在 Play 中的 /lib 目录下。我想将我的 jar 文件放在一个名为 /plugins 的目录中

之前有人问过这个问题，但建议只是使用 /lib 目录。 [将额外的 java 文件添加到 playframework 类路径](https://stackoverflow.com/questions/6731406/adding-additional-java-files-to-playframework-classpath)

如果不手动更改 Play 生成的“eclipsified”文件，就没有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:51:00.153

我想您可以通过更改 sbt 构建脚本来做到这一点。应该很简单

`unmanagedBase <<= baseDirectory { base => base / "custom_lib" }`

这是[sbt 文档](http://www.scala-sbt.org/release/docs/Getting-Started/Library-Dependencies)的链接。

# java - 更改 Java 应用程序中文件的位置

> ID：13692391
> 
> 赞同：0
> 
> 时间：2012-12-03T21:50:57.580
> 
> 标签：java, file, class, path, icons

我一直将我的 Java 应用程序的所有图像放在 src 中一个名为“rtype”的包中，其中我也有处理这些图像的类。我想对图像进行排序并将它们放在自己的文件夹中。当我这样做时，图像将不再加载到类中，我知道这是因为我更改了文件路径。我做了一些研究并尝试了一些不同的东西。这基本上是我最初的：

```
String walkingDown = "WalkingDown.gif";
ImageIcon ii;
Image image;
ii = new ImageIcon(this.getClass().getResource(walkingDown));
image = ii.getImage(); 
```

在我将图像的位置移到课堂位置之外之前它工作得很好。现在它找不到图像。这是我尝试并在网上找到的尝试（文件夹名称是 Sprites）：

```
//use getClassLoader() inbetween to find out where exactly the file is
ii = new ImageIcon(this.getClass().getClassLoader().getResource(standingDown)); 
```

和

```
//Changing the path 
String walkingDown = "src\\Sprites\\WalkingDown.gif";
//also tried a variation of other paths with no luck 
```

我正在使用 C 驱动器，但不想在我的扩展中使用“C”，因为无论我将项目放在哪里，我都希望它可以访问。我在这一点上相当卡住，并且已经做了足够的研究以意识到是时候问了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:59:20.700

您的变量名为`walkingDown`，但您传递`standingDown`给该`getResource()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:02:21.563

对于具有该名称的图像，我有一个单独的“包”（在 src 文件夹中）

尝试这样的事情：

```
 try {
        ClassLoader cl = this.getClass().getClassLoader();
        ImageIcon img = new ImageIcon(cl.getResource("images/WalkingDown.gif"));
    }
    catch(Exception imageOops) {
        System.out.println("Could not load program icon.");
        System.out.println(imageOops);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T22:08:08.100

```
new ImageIcon("src/Sprites/WalkingDown.gif"); 
```

# android - 从 GoogleMap 中删除标记

> ID：13692398
> 
> 赞同：137
> 
> 时间：2012-12-03T21:51:38.693
> 
> 标签：android, google-maps

在新的 Android 版 Google Maps API 中，我们可以[添加一个标记](https://developers.google.com/maps/documentation/android/marker#add_a_marker)，但没有办法（轻松）删除它。

我的解决方案是将标记保留在地图中，并在我想删除标记时重新绘制地图，但这不是很有效。

```
private final Map<String, MarkerOptions> mMarkers = new ConcurrentHashMap<String, MarkerOptions>();

private void add(String name, LatLng ll) {
  final MarkerOptions marker = new MarkerOptions().position(ll).title(name);
  mMarkers.put(name, marker);

  runOnUiThread(new Runnable() {
    @Override
    public void run() {
      mMap.addMarker(marker);
    }
  });
}

private void remove(String name) {
  mMarkers.remove(name);

  runOnUiThread(new Runnable() {
    @Override
    public void run() {
      mMap.clear();

      for (MarkerOptions item : mMarkers.values()) {
        mMap.addMarker(item);
      }
    }
  });
} 
```

有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2012-12-03T22:23:08.490

方法签名为[`addMarker`](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#addMarker%28com.google.android.gms.maps.model.MarkerOptions%29)：

```
public final Marker addMarker (MarkerOptions options) 
```

`GoogleMap`因此，当您通过指定标记的选项将标记添加到 a 时，您应该保存[`Marker`](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html)返回的对象（而不是`MarkerOptions`您用来创建它的对象）。此对象允许您稍后更改标记状态。完成标记后，您可以调用[`Marker.remove()`](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html#remove%28%29)将其从地图中删除。

顺便说一句，如果您只想暂时隐藏它，您可以通过调用来切换标记的可见性[`Marker.setVisible(boolean)`](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html#setVisible%28boolean%29)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-12-25T21:20:57.480

像这样将标记添加到地图

```
Marker markerName = map.addMarker(new MarkerOptions().position(latLng).title("Title")); 
```

然后你就可以使用 remove 方法，它只会删除那个标记

```
markerName.remove(); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-10-07T22:20:43.567

清除地图使用中的所有涂鸦

```
map.clear() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-07T07:08:07.933

如果标记存在，则删除最后一个标记。如果标记不存在，则创建当前标记

```
Marker currentMarker = null;
if (currentMarker!=null) {
    currentMarker.remove();
    currentMarker=null;
}

if (currentMarker==null) {
    currentMarker = mMap.addMarker(new MarkerOptions().position(arg0).
    icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN)));
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-01-13T03:37:43.583

如果您使用 Kotlin 语言，您只需添加以下代码：

创建`GoogleMap`和`Marker`类型的全局变量。

我使用变量标记使变量标记值可以直接改变

```
private lateinit var map: GoogleMap
private lateinit var marker: Marker 
```

我使用这个函数/方法在我的地图上添加标记：

```
private fun placeMarkerOnMap(location: LatLng) {
    val markerOptions = MarkerOptions().position(location)
    val titleStr = getAddress(location)
    markerOptions.title(titleStr)
    marker = map.addMarker(markerOptions)
} 
```

创建函数后，我将此代码放在`onMapReady()`删除标记并创建一个新标记上：

```
map.setOnMapClickListener { location ->
        map.clear()
        marker.remove()
        placeMarkerOnMap(location)
    } 
```

如果您想在单击标记时显示地址位置，请添加此代码以隐藏和显示标记地址，但您需要一种获取地址位置的方法。我从这篇文章中得到了代码：[如何从纬度和经度中获取完整的地址？](https://stackoverflow.com/questions/9409195/how-to-get-complete-address-from-latitude-and-longitude)

```
map.setOnMarkerClickListener {marker ->
        if (marker.isInfoWindowShown){
            marker.hideInfoWindow()
        }else{
            marker.showInfoWindow()
        }
        true
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-25T05:32:49.880

只是一个注释，我今晚浪费了几个小时追踪的东西......

如果您出于某种原因决定保留标记，则在您从地图中删除它之后... getTag 将返回 NULL，即使剩余的 get 值将返回您在创建标记时设置的值。 .

如果您删除了标记，然后尝试引用它，则 TAG 值设置为 NULL。

对我来说似乎是一个错误......

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-11T08:50:45.210

创建一个全局变量来跟踪标记

```
private Marker currentLocationMarker; 
```

//删除旧标记

```
 if (null != currentLocationMarker) {
                currentLocationMarker.remove();
            } 
```

// 添加更新的标记并移动相机

```
 currentLocationMarker = mMap.addMarker(new MarkerOptions().position(
                    new LatLng(getLatitude(), getLongitude()))
                    .title("You are now Here").visible(true)
                    .icon(Utils.getMarkerBitmapFromView(getActivity(), R.drawable.auto_front))
                    .snippet("Updated Location"));

            currentLocationMarker.showInfoWindow(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-01T13:53:00.687

使用以下代码：

```
 mMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {
       @Override
       public boolean onMarkerClick(Marker marker) {

           marker.remove();
           return true;
       }
   }); 
```

单击**“标记”**后，您可以将其删除。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-28T23:19:39.933

在添加地图上创建包含所有标记的数组。

稍后，使用：

```
Marker temp = markers.get(markers.size() - 1);
temp.remove(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-12-09T04:54:13.470

**1.**如果要删除标记，您可以这样做，`marker.remove();` 或者您也可以隐藏标记而不是将其删除

```
 marker.setVisible(false); 
```

并在以后需要时使其可见。
**2.**但是，如果您想从地图中删除所有标记，**请使用** `map.clear();`
**注意：** `map.clear();`也会删除`Polylines, Circles`等。
**3.**如果您不想删除`Polylines, Circles`等，则使用循环到标记的长度（如果您有多个标记）来删除那些[在此处查看示例](https://stackoverflow.com/questions/34218041/removing-markers-in-android/34222153#34222153) **或**将它们设置为 Visible false 并且不要 `map.clear();`在这种情况下使用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-03T02:54:35.050

对于那些遵循此[GoogleMaps - MapWithMarker](https://github.com/googlemaps/android-samples/tree/master/tutorials/kotlin/MapWithMarker)项目示例的人，您可以通过这样做来删除标记

```
override fun onMapReady(googleMap: GoogleMap?) {
    googleMap?.apply {

        // Remove marker
        clear()

        val sydney = LatLng(-33.852, 151.211)
        addMarker(
            MarkerOptions()
                .position(sydney)
                .title("Marker in Sydney")
        )
        moveCamera(CameraUpdateFactory.newLatLng(sydney))
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-21T02:23:01.557

试试这个，它正在更新当前位置，它工作正常。

```
 public void onLocationChanged(@NonNull Location location) {               
        //here we update the location on the map

        LatLng myActualLocation = new LatLng(location.getLatitude(), location.getLongitude());

        if (markerName!=null){  // marker name is declared as a gloval variable.
            markerName.remove();
        }

        markerName = mMap.addMarker(new MarkerOptions().position(myActualLocation).title("Marker Miami").icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_ORANGE)));

        // mMap.addMarker(new MarkerOptions().position(myActualLocation).title("Marker Miami").icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_ORANGE)));
        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(myActualLocation,18));

        } 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2022-02-05T15:05:13.753

如果您想在单击时删除标记，请尝试以下操作：

```
mMap.setOnMarkerClickListener(this); //mMap is googleMap 
```

```
 @Override
    public boolean onMarkerClick(@NonNull Marker marker) {

        marker.remove();

        return false;
    } 
```

[https://developers.google.com/maps/documentation/android-sdk/marker](https://developers.google.com/maps/documentation/android-sdk/marker)

# jquery - 汇总复选框的值时，Jquery Cant GET返回值

> ID：13692401
> 
> 赞同：1
> 
> 时间：2012-12-03T21:51:47.147
> 
> 标签：jquery, arrays

我从选定的复选框中传递了一些带有 ID 的值

我收集要发布的数组中的值但是我也想对标题中的值求和，但我无法做到这一点......

我哪里错了？我知道它在调用返回的变量，但我不知道如何获取它

```
function doAlloMath(){

        var sum=0;

        alert($("input[name=alloInv]:checked").map(function () {return this.value;}).get().join(","));
        alert($("input[name=alloInv]:checked").map(function () {return this.title;}).get().join(","));
        alert($("input[name=alloInv]:checked").each(function (a,b) {sum += parseFloat ($(this.title)); return sum;}).get());

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:55:06.170

我认为您的 $(this.title) 可能指向 $.each() 上下文中的意外情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:53:08.387

除非明确设置，否则复选框没有值。要查看复选框是否被选中，您需要使用`prop('checked');`

你可以尝试更多这样的东西：

```
function doAlloMath() {
    var sum = 0,
        elm = $("input[name=alloInv]:checked"),

        values = elm.map(function() {
            return this.value;
        }).get().join(","),

        titles = elm.map(function() {
            return this.title;
        }).get().join(",");

    elm.each(function(idx, elem) {
        sum += parseFloat(this.title);
    });

    console.log(sum);
    console.log(values);
    console.log(titles);
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:56:13.047

我猜你的 HTML 看起来像这样：

```
<input type="checkbox" name="alloInv" value="10.0" />
<input type="checkbox" name="alloInv" value="20.0" /> 
```

要总结检查的内容，您可以使用以下内容：

```
var sum = 0;
$('input[name="alloInv"]').filter(':checked').each(function() {
    sum += parseFloat(this.value);
});
alert(sum); 
```

# svn - 命令行中的 Tortoise svn 客户端挂钩脚本

> ID：13692406
> 
> 赞同：1
> 
> 时间：2012-12-03T21:52:13.897
> 
> 标签：svn, c#-4.0, tortoisesvn, svn-hooks

你知道是否存在为 TortoiseSVN 创建客户端钩子脚本的命令吗？我需要从 C# 代码而不是 GUI 创建钩子。

[我在下一页](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-automation.html)查找命令，但没有关于钩子脚本的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:17:01.667

客户端挂钩脚本[记录在 TSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-hooks)中。

它们必须在每个客户端上配置，并且不能从存储库服务器“强制”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:00:24.287

很可能您将无法像那样编写 Tortoise SVN 脚本。

Tortoise 确实有一些可以在界面中设置的钩子，这些钩子与服务器端的 SVN 钩子不同。

# jquery-mobile - 每次加载 jquery 移动页面时都运行一个函数

> ID：13692411
> 
> 赞同：0
> 
> 时间：2012-12-03T21:52:42.707
> 
> 标签：jquery-mobile

我试图让一个函数在每次 jquery mobile 将新页面加载到应用程序时运行，但目前，代码仅在页面加载的第一个实例上运行一次。

HTML：

```
<div id="pageID" data-role="page" class="content_page">
    <div data-role="header" data-id="bestHeader" data-position="fixed">
        <h1>Header</h1>
    </div><!-- end header -->
    <section data-role="content">
        <h2>Header2</h2>
            <p>Content goes here</p>
    </section>
<div class="bottomAd" data-role="footer" data-position="fixed">
            <img src="ad2.jpg" width="100%">
    </div>
    <div data-role="footer" data-id="bestFooter" data-position="fixed">
        <nav data-role="navbar">
     <!-- navBar here -->   
        </nav> 
    </div><!-- end footer -->        

</div><!-- end page -->    

  <div id="pageID2" data-role="page" class="content_page">
    <div data-role="header" data-id="bestHeader" data-position="fixed">
        <h1>Header</h1>
    </div><!-- end header -->
    <section data-role="content">
        <h2>Header2</h2>
            <p>Content goes here</p>
    </section>
<div class="bottomAd" data-role="footer" data-position="fixed">
            <img src="ad2.jpg" width="100%">
    </div>
    <div data-role="footer" data-id="bestFooter" data-position="fixed">
        <nav data-role="navbar">
     <!-- navBar here -->   
        </nav> 
    </div><!-- end footer -->        

</div><!-- end page --> 
```

Javascript

```
$(".content_page").live('pageinit', function(event) {
    if ($(".bottomAd img[src*=ad]").length >= 1) {
        console.log($(".bottomAd img[src*=ad]").length);
        $(".bottomAd").remove();
    } 
```

无论您在两个页面之间来回点击多少次，console.log 只会被调用一次，并且 .bottomAd 类会在页面的第一个实例被点击时被删除。我希望每次调用页面时都运行该函数，因此每次检查“页面”时是否在该特定页面的底部广告 div 中具有包含“广告”的 src 的图像，如果是，则将其删除.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:59:15.277

如果您想在每次显示页面时（第一次或后续访问）都做一些事情，那么我建议使用`pageshow`,`pageinit`仅在第一次显示页面时触发，并且 jQuery Mobile 有时会将页面保留在 DOM 中。如果您只想在用户第一次访问页面时运行某些代码，则使用`pageinit`但将您的委托事件处理程序绑定到`document`元素。

我还将使您的选择器更具体（针对当前页面），这样您就不会像这样处理未查看的页面上的元素：

```
...
//`this` refers to the `<data-role="page">` pseudo-page element being bound to
$(this).find(".bottomAd").remove();
.. 
```

您的委托事件处理程序应始终绑定到 DOM 中的元素，例如`document`：

```
$(".content_page").live('pageinit', function(event) { 
```

应该

```
$(document).on('pageinit', '.content_page', function () {...}); 
```

请注意，它`.live()`在 jQuery 1.7 中已被贬低，这`.on()`是新的风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:58:59.447

您可能想要使用该`pageshow`事件，您也可能想要使用[.on](http://www.bing.com/search?q=jQuery%20On%20Function&FORM=QSRE3)而不是`.live`as `.live`is depreciated，

例如

```
$(document).on('pageshow','.content_page' function(event) {
    if ($(".bottomAd img[src*=ad]").length >= 1) {
        console.log($(".bottomAd img[src*=ad]").length);
        $(".bottomAd").remove();
    } 
```

还有一个[pageload](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)事件，但是当外部页面附加到 DOM 时会触发该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:37:12.803

页面加载事件

“在页面成功加载并插入 DOM 后触发。绑定到此事件的回调将传递一个数据对象作为其第二个参数。”

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# python - IX 上的 Pandas Cache 值是否调用？

> ID：13692418
> 
> 赞同：1
> 
> 时间：2012-12-03T21:53:13.890
> 
> 标签：python, pandas

在大熊猫数据帧上使用 IX 时，我注意到一些奇怪的行为。

当我在同一数据帧上连续调用 .ix 50 次时，它的运行速度比我在 50 个不同数据帧上调用 .ix 时快 10 倍。

.ix 的幕后是否有缓存？我注意到底部循环使我的内存使用量增加了一倍。为什么内存会增加？

有没有办法修改这种行为？

请注意，如果您直接使用 numpy，它在两种情况下都在 7.4 秒内运行，内存增加为 0，这就是让我相信 pandas 正在缓存的原因。

显然，您永远不想在每​​个单独的元素上调用 .ix ......

```
import pandas as pd
import numpy as np
import datetime as dt
print 'pandas', pd.__version__

li_list = []
for i in range(50):
    li_list.append(pd.DataFrame(data=np.random.randn(50, 17000)))

print 'starting'

dt_start = dt.datetime.now()
a = 0
for i in range(50):
    b = li_list[0] #Only access first element
    for j in b.columns:
        a += b.ix[i, j]
print (dt.datetime.now()-dt_start).total_seconds()

dt_start = dt.datetime.now()
a = 0
for i in range(50):
    b = li_list[i] #Access all in list
    for j in b.columns:
        a += b.ix[i, j]
print (dt.datetime.now()-dt_start).total_seconds() 
```

输出：

```
pandas 0.9.1
starting
3.651
22.009 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:19:23.307

是的，`ix`缓存结果。[`b.ix`](https://github.com/pydata/pandas/blob/master/pandas/core/frame.py#L562)返回一个[`_NDFrameIndexer`](https://github.com/pydata/pandas/blob/master/pandas/core/indexing.py#L16)。它的`__getitem__`方法调用DataFrame的[`get_value`](https://github.com/pydata/pandas/blob/master/pandas/core/frame.py#L1748)方法，后者调用[`_get_item_cache`](https://github.com/pydata/pandas/blob/master/pandas/core/generic.py#L531)方法，缓存结果。

缓存也可以解释为什么访问第一个 DataFrame 50 次比访问 50 个 DataFrame 更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T23:06:00.443

注意：第一次在轴索引中查找位置时，有一个哈希表填充步骤。这可能就是您在此处看到的内容，并且会因使用而变得模糊`timeit`（因为哈希表只计算一次、存储并重用）。还解释了增加的内存使用量。

在熊猫的未来版本中，我计划使用简单的顺序轴索引来提高此类代码在简单数据上的性能。我将在 GitHub 问题跟踪器上记录您的用例。

[https://github.com/pydata/pandas/issues/2420](https://github.com/pydata/pandas/issues/2420)

# actionscript-3 - 值将正确设置，但 Get 收到 Null

> ID：13692419
> 
> 赞同：1
> 
> 时间：2012-12-03T21:53:15.250
> 
> 标签：actionscript-3, get, null, set

因此，我成功地从 XML 文档中获取了一个值，并将其设置到一个名为“AddCommas”的单独类中。跟踪功能向我表明它设置正确。

有关更多详细信息，我的目标是获取语言指示符（“fr”表示法语或“en”表示英语），将其设置在适当的类中并放入我将使用的变量中。现在，我在 if 语句中使用这个变量；这将帮助我根据客户的要求正确格式化数字（逗号、小数、空格）。

但是，我的问题是当我尝试获得使用它的价值时。它总是以 Null 的形式返回。我已经在我的程序中放置了跟踪，试图查明何时发生这种情况，但我找不到它。这是代码...

从 XML 文件中提取并放入集合中（这工作正常，但我添加它是为了您的利益，以防我错过了什么）

```
 public var commaHold = new AddCommas();
    localLanguage = xmlObj.localLanguage;
    trace("localLanguage + " + localLanguage);
    commaHold.setLanguage(localLanguage); // Set Language
   //More code follows... 
```

这是集合函数 istelf...

```
public function setLanguage(localLanguage:String){
langHold = localLanguage;
trace("Set Language =  " + langHold); //This always shows a successful set
} 
```

现在我认为在 AS3 中，一旦在我的 AddCommas 类中设置了 langHold，我应该能够使用它，而无需在我正在使用 If 语句的函数中调用 get，对吗？比如这样？

```
var language = langHold;
if (language == "en"){
trace("Language is = " + language); // More code follows afterwards and as of now, this shows NULL 
```

现在，我尝试了很多 Get 函数来将调用本身中的语言变量添加到该函数中，并且始终相同。我在这里缺少一些基础知识吗？

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:27:39.030

ShaunHusain 使用单例的理论是我需要的完美解决方案。然而，他的代码给了我一个奇怪的 1061 错误，我的格式和代码似乎没有错误。无论如何，我寻找了另一种使用单例的方法，如下所示，这对我来说非常有效。老实说，Shaun 的代码应该适用于任何人，我不知道为什么不适用。我完全愿意承认这可能是我没有看到的一个错字。

我最终将 Set 和 Get 嵌入到 Singletons 类中，并用它作为中介来保存我需要的信息。它工作得很好。

```
package chart {

    import chart.*;
    //

    public class StaticInstance  {

        private static var instance:StaticInstance;
        private static var allowInstantiation:Boolean;
        private var language:String;

        public static function getInstance():StaticInstance {
        if (instance == null) {
            allowInstantiation = true;
            instance = new StaticInstance();
            allowInstantiation = false;
            }
        return instance;
        }

        public function StaticInstance():void {
        if (!allowInstantiation) {
            throw new Error("Error: Instantiation failed: Use StaticInsance.getInstance() instead of new.");
            }
        }

        public function setLanguage(_language:String):void{
            language = _language;
            trace("language set = " + language);
        }
        public function getLanguage():String{
            return language;
        }
    }
} 
```

这段代码允许我保存数据并从两个不同的类再次调用它。这是一个非常 hack 的工作，而不是仅仅能够在函数之间传递变量，但在我的例子中，我们没有创建这个文件，我们正在修改它并尝试做超出项目原始范围的事情。

再次感谢您的帮助肖恩！我希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:59:04.647

如果您希望进行字符串比较，则需要使用引号，除非 en 是字符串变量，因为 langHold 是字符串，例如：

```
if (language == "en"){ 
```

考虑修改 set 函数以使用 as3 关键字，例如：

```
private var _language:String;

public function set language(value:String):void {
     _language = value;
     //do other stuff here if necessary, put a breakpoint on the line above
}

public function get language():String{
     return _language;
     //put a breakpoint on the line above
} 
```

您应该能够看到您的类的任何实例何时更改了属性。我能想到的唯一其他问题是它不是类的同一个实例，因此不共享您之前设置的属性值。在调试器中，您可以检查它显示的“hashCode”或“地址”，以查看它在遇到断点时是否发生变化。

这是 AS3 中的一个示例 Singleton 结构（全部放在一个文件中）：

```
package com.shaunhusain.singletonExample
{

    public class SingletonExample
    {
        private static var instance:SingletonExample;

        public static function getIntance():SingletonExample
        {
            if( instance == null ) instance = new SingletonExample( new SingletonEnforcer() );
            return instance;
        }

        /**
         * 
         * @param se Blocks creation of new managers instead use static method getInstance
         */
        public function SingletonExample(se:SingletonEnforcer)
        {
        }
    }
}

internal class SingletonEnforcer {public function SingletonEnforcer(){}} 
```

使用来自任何其他类的单个共享实例看起来像这样：

```
private var singletonInstance:SingletonExample = SingletonExample.getInstance(); 
```

# wordpress - WordPress 查询帖子以显示所有并设置每个帖子的样式

> ID：13692424
> 
> 赞同：1
> 
> 时间：2012-12-03T21:53:25.853
> 
> 标签：wordpress

我正在尝试将每篇文章都包含到我在 WordPress 上的索引页面中，并让它们中的每一篇都使用包含的 CSS 进行样式设置。我可以查询所有帖子并显示它们，但实际上只有第一个帖子是样式化的。其余的继承了基本的 h1、h2、p 和其他通用样式，但它们没有继承每个样式的“box”类。所有信息都被放入一个“盒子”类，而不是像我希望的那样为每个帖子启动一个新的“盒子”类。对此的任何帮助将不胜感激。

这是我正在使用的代码

```
 <?php get_header(); ?>

    <div id="index-float-left">

<div class="box">

<?php query_posts( 'showposts=-1' ); ?>

<?php if (have_posts()) : while (have_posts()) : the_post();  ?>

    <div <?php post_class() ?> id="post-<?php the_ID(); ?>"> 

        <h1><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h1>

        <p><?php the_content(); ?></p>

        <p class="post-date"><?php echo $post_date = get_the_date(); ?></p>

    </div>

</div> <!-- END BOX -->

    </div> <!-- FLOAT BOX BOX -->

    <?php endwhile; ?>

<?php else : ?>

    <h2>Not Found</h2>

<?php endif; ?>

<?php get_sidebar(); ?>

     <?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:01:18.613

“End Box”和“Fload Box Box”有问题。你可以这样试试：

```
<?php get_header(); ?>

<div id="index-float-left">

<?php query_posts( 'showposts=-1' ); ?>

<?php if (have_posts()) : while (have_posts()) : the_post();  ?>

<div class="box">
    <div <?php post_class() ?> id="post-<?php the_ID(); ?>"> 
        <h1><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h1>
        <p><?php the_content(); ?></p>
        <p class="post-date"><?php echo $post_date = get_the_date(); ?></p>
    </div>
</div> <!-- END BOX -->   

<?php endwhile; ?>
<?php else : ?>

    <h2>Not Found</h2>

<?php endif; ?>

</div> <!-- FLOAT BOX BOX -->

<?php get_sidebar(); ?> 
```

# linux - 打开文件后 Ubuntu 终端挂起

> ID：13692426
> 
> 赞同：-3
> 
> 时间：2012-12-03T21:53:33.347
> 
> 标签：linux, bash, ubuntu, terminal, sublimetext2

如果我像这样打开文件，Sublime Text 2 总是挂起终端：

```
#sublime index.php 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:58:10.943

默认情况下，终端将在前台运行程序，因此在程序完成之前您不会回到 shell。做就是了：

```
#sublime index.php & 
```

# html - 在电子邮件中嵌入网页/框架

> ID：13692427
> 
> 赞同：2
> 
> 时间：2012-12-03T21:53:34.083
> 
> 标签：html, email

有没有办法将完整的网页嵌入到电子邮件中？

这相当于做：

```
<frameset rows="100%,*" border="0">
  <frame src="http://www.yahoo.com" frameborder="0" />
  <frame frameborder="0" noresize />
</frameset> 
```

我的要求不允许在电子邮件正文中包含页面的实际 HTML（这将是执行此操作的“正常”方式），客户只希望电子邮件客户端在电子邮件发送时从互联网上提取网页打开。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:56:28.170

简而言之：**不要这样做**- 大多数电子邮件客户端不支持它

更多信息在这里： http: [//www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/](http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-18T09:13:41.923

I realize that this is a 2012 question. The "most email clients don't support this", and the "don't do it, you'll be labeled a spammer" response is incorrect. My bank, Microsoft, many newsletters, and most other businesses link to images on their sites. Right click images in most business emails, click copy image address, paste it into the address bar, and you'll see that the image is hosted on their server. This is why many old emails are missing their images. They've been deleted off the server.

Being labeled a spammer has a LOT more to do with return path certification, and properly setting up your email servers. [https://mail.live.com/mail/services.aspx](https://mail.live.com/mail/services.aspx)

Per my host, not all tests have to pass: [https://intodns.com/](https://intodns.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:58:41.370

不要这样做！如果您添加 javascript 或 iframe，您的域将被标记为垃圾邮件。我相信您的客户不希望这种情况发生。

# git - 无法提取 b/c “您有未暂存的更改”，但状态显示没有更改

> ID：13692429
> 
> 赞同：26
> 
> 时间：2012-12-03T21:53:36.260
> 
> 标签：git

我正在与这里的一位开发人员合作，他发现了一个我以前从未遇到过的奇怪问题。他正在开发一个存储库，需要从其他人那里获取最新的更改，然后才能推送。他的所有更改都已提交。

```
$ git pull
Cannot pull with rebase: You have unstaged changes.
Please commit or stash them. 
```

这似乎足够合理，直到......

```
$ git status
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 3 and 1 different commit each, respectively.
#
nothing to commit (working directory clean) 
```

说什么？

我在拉之前尝试`git reset --hard HEAD`过，但拉仍然失败。

只有一个人看到这个并且他在 Mac (OSX 10.6.8) 上。有任何想法吗？我正要拔头发。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-04T01:16:37.933

代替

```
git pull 
```

尝试

```
git fetch
git rebase -p origin/master 
```

如果这不起作用，您可以尝试

```
git pull --no-rebase 
```

***如何检查为什么会出现此消息***

确保你在一个分支上，而不是一个独立的头。变基不适用于分离的头部。

运行以下命令，结果应该是没有输出。

```
git update-index -q --ignore-submodules --refresh
git diff-files --ignore-submodules
git diff-index --cached --ignore-submodules HEAD -- 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-22T09:10:49.267

您在本地文件系统或 nfs 共享上工作吗？

我在处理 nfs 共享时遇到了完全相同的问题。

我`noatime`在命令中添加了选项`mount`，它有帮助：

```
mount -t nfs -o noatime,... device dir 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-15T13:42:07.207

对我来说问题是安全文件夹中的文件

1.  只有这个命令显示有文件未暂存

    ```
    git diff-files --ignore-submodules 
    ```

2.  取消配置 git-crypt 并重新加密工作树中的文件

    ```
    git-crypt lock 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T07:04:24.020

您可以尝试 $ git stash 然后尝试 git pull。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-13T10:32:32.287

当我尝试对 root 拥有的 repo 进行 rebase 时遇到了这个问题（我是一个非特权用户）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-03T21:58:55.337

看起来可能正在进行rebase。先试试跑步`git rebase --abort`。

清除局部的更强有力的方法包括

*   删除工作目录中的所有文件（当然不包括 .git 目录）

*   `git clean -d -x -f` （`-d`：目录，`-x`：忽略的文件，`-f`：强制。替换`-f`为`-n`空运行）

然后跟进 a`git reset --hard`和`git checkout`。

另一个想法是尝试一个`git reset --hard HEAD~N`- 即重置一些提交，并希望拉动能够工作并快进本地。

# soundcloud - Soundcloud 自定义播放器 - IOS 5 返回 onMediabuffering 事件的间歇 NaN 值

> ID：13692431
> 
> 赞同：5
> 
> 时间：2012-12-03T21:53:43.940
> 
> 标签：soundcloud

我在 Safari IOS 5 中遇到了 soundcloud 自定义播放器的问题，即 Play Bar Indicator、Track Buffer Bar Indicator 和 Seek 功能停止正常工作。

要重现问题，请使用包含的示例红色皮肤，并继续在两个轨道之间进行选择。最终，缓冲区指示器不会重置到开头，播放器指示器将不会显示或卡在一个位置。因此，轨道搜索功能只是不断地重新启动轨道，因为它基于指标位置值。

我已将问题追溯到 onMediabuffering 事件返回 NaN 值而不是百分比（第 479 行 sc-player.js）但不知道是什么原因造成的？或者如何解决。在 Safari IOS 4 或任何桌面浏览器中不会出现此问题。

有人对这个有经验么？或者有什么解决问题的办法？

# android - 在片段活动中实现滑动菜单的推荐方法

> ID：13692433
> 
> 赞同：1
> 
> 时间：2012-12-03T21:53:46.383
> 
> 标签：android, android-fragments, android-viewpager

**细节：**

我的应用程序有一个主要活动，该活动具有页眉和页脚的静态布局。屏幕的中间部分由基于用户交互处理的片段表示

![在此处输入图像描述](../Images/0d67434513988c37cfe9e939e6cf4fd8.png)

**我想要达到的目标**

我有一个包含菜单选项的片段，我希望能够实现向左或向右滑动以显示菜单选项。用户完成后，向后滑动并恢复到另一个片段。这种滑动只会在一个活动片段和菜单片段之间进行。编写此代码的最简单有效的方法是什么？

现在我的活动布局中有一个可以处理片段的 LinearLayout

```
 <LinearLayout
        android:id="@+id/layFragment"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:orientation="vertical" >
    </LinearLayout> 
```

当我想切换我使用的片段时：

```
fragmentManager = getSupportFragmentManager();
fragment = fragmentManager.findFragmentById(R.id.layFragment);

final FragmentTransaction ft = fragmentManager.beginTransaction();
ft.replace(R.id.layFragment, new FragmentOperation());
ft.commit(); 
```

除此之外，我需要以某种方式实现菜单滑动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:56:58.867

最后，我使用 FragmentStatePagerAdapter 使用 ViewPager 方法，并且似乎工作正常。

# python - 将字符串与 Python 中的片段列表进行比较

> ID：13692441
> 
> 赞同：1
> 
> 时间：2012-12-03T21:54:24.073
> 
> 标签：python, string

我有一长串职位描述标题，我需要根据它们对组织的重要性进行过滤。为此，我开发了一个简单的启发式方法。例如，如果标题中包含“管理员”或“主管”之类的词，则它很重要。未通过此测试，如果它包含诸如“副手”或“助理”之类的词，那么它并不重要。

这很容易用 Python 中的几行代码来完成，但我想知道是否有更 Pythonic 的方式来做到这一点。这就是我现在的位置。

```
def in_fragment(phrase, fragments):
    for fragment in fragments:
        if fragment in phrase:
            return True
    return False 
```

工作得很好，但如果可能的话，我会喜欢正确的方式！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T22:02:25.587

一种方法是使用`any`：

```
def in_fragment(phrase, fragments):
    return any(x in phrase for x in fragments) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T22:06:34.977

嗯......可能FC的[答案](https://stackoverflow.com/a/13692555/289011)比我要写的更干净，但是因为我在我的电脑上测试了它`sets`，所以它是这样的：

```
#!/usr/bin/env python

a="this is a letter for the administrator of the company"
important = set(["administrator", "director"])

hits=important.intersection(set(a.split(" ")))
if len(hits) > 0:
    print "Wo! This is important. Found: %s" % (hits) 
```

也许你会发现它很有用......对于某些东西...... **:)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:07:03.030

```
def rankImportance(titles, fragments):
    """titles is a list of job titles
       fragments is a list of sets. 
         At index 0: set(['administrator', 'director'])
         At index 1: set(['deputy', 'assistant'])
         etc..."""

    answer = collections.defaultdict(list)
    while titles:
        done = set()
        for i,title in enumerate(titles):
            for r,words in enumerate(fragments):
                if any(word in title for word in words):
                    answer[r].append(title)
                    delete.add(i)
        titles = [title for i,title in enumerate(titles) if i not in delete]

    return answer 
```

这应该返回一个字典，其中的键是排名，值是职位列表。等级的值越小，它越重要。最小等级将为 0。

希望这可以帮助

# eclipse - 使 Eclipse 变量视图窗口大小变大

> ID：13692443
> 
> 赞同：9
> 
> 时间：2012-12-03T21:54:40.133
> 
> 标签：eclipse

在 Eclipse 中调试时，我发现自己使用将鼠标悬停在变量上来快速快照变量，这会弹出一个快速变量视图窗口。当这些是结构时，有很多成员，并且 Eclipse 放置的显示数据的窗口太小而无法看到其中的几个。

是否可以更改此窗口的大小以使其默认变大？我必须经常停下来放大它才能看到一切，这违背了使用它而不是监视窗口的目的。我查看了 Eclipse 设置并在谷歌中搜索但没有运气。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T22:57:07.263

我建议您不要悬停变量，而是双击变量（或表达式）并按`Ctrl`+ `Shift`+ `I`，它会带来可以调整大小的*Inspect Variable*弹出窗口（下次重新打开它时它会记住大小）。按`Esc`关闭它（或在弹出窗口外单击）。

不像将鼠标悬停在变量上那么简单，但是下次您对变量（或表达式）进行此组合时，弹出窗口将以新的大小打开。

# templates - 任何知道什么用户在 renderEditor.template 中登录的方法

> ID：13692444
> 
> 赞同：0
> 
> 时间：2012-12-03T21:54:46.887
> 
> 标签：templates, grails, groovy, spring-security

我的问题是：在 renderEditor.template 中有什么方法可以知道登录的是什么用户以及他有什么角色？
我想做的事情：在我的应用程序中，当登录用户为管理员（“ROLE_ADMIN”）时，我希望更改一些字段 - 普通用户将只有 html 选择标签 1 个选项，默认情况下选中，当管理员用户登录时，出现所有用户的列表。

我正在使用 Spring Security Plugin + Grails 2.1.1。

我已经尝试过的：

1.  添加 Spring Security Service ( `def springSecurityService`) 但它始终为空
2.  尝试传递布尔参数 - 无效

任何帮助将不胜感激！

**编辑**非常感谢您的回答。但是，我的问题不够精确，所以我包含了一些伪代码，可以更好地解释我想要实现的目标（renderTemplate.template 中的方法）

```
private renderManyToOne(domainClass,property) {
        if (property.association) {
            def sb = new StringBuilder()
            sb << '<g:select'
            ...
            if (/*loged user is admin*/) {
                sb << ' from="${' << property.type.name << '.list()}"'
            }else{
                sb << ' from="${user}"'/*only loged user can be selected*/
            }
            ...
            sb << '/>'
            sb as String
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:42:09.280

有一个带有弹簧安全性的标签库 [http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html#6.1%20SecurityTagLib](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html#6.1%20SecurityTagLib)

在我的应用程序中，我这样使用它：

```
<ul>
<sec:access expression="hasRole('ROLE_ADMIN')">
    <li><a href="#newFeedModal" role="button">Add New Feed</a></li>
</sec:access>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:05:40.147

`renderEditor.template`不是使用通常的 GSP 模板引擎呈现的。它是用一个标准渲染的`SimpleTemplateEngine`，只有几个简单的绑定。但是，此模板的*输出*随后会使用 GSP 模板引擎呈现。这相当令人困惑，但您可以`renderEditor.template`输出 GSP 代码。例如：

```
<%  if (property.type == Boolean || property.type == boolean)
        out << renderBooleanEditor(domainClass, property)
    else ...
    else if (property.type == String && domainInstance == 'specialField') {
        out << '''<g:if test="${org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils.ifAllGranted('ROLE_ADMIN')}">'''
        out << renderStringEditor(domainClass, property)
        out << '''</g:if>'''
        out << '''<g:else>'''
        out << renderStringSelectEditor(domainClass, property)
        out << '''</g:else>'''
    }
    ... 
```

# .net - .Net MemoryCache - 如何更新现有项目的到期时间？

> ID：13692448
> 
> 赞同：4
> 
> 时间：2012-12-03T21:55:08.600
> 
> 标签：.net, caching, memorycache

Memcached API 有一个 Touch() 方法，用于更新给定键的过期策略。如何使用 .Net ObjectCache 类最好地完成此任务？

我能看到的最好的方法是删除对象并重新添加一个新的过期时间，但显然这是次优性能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:46:04.697

不幸的是，无法重置缓存项持续时间。

但是，因为它是内存缓存（不像 memcached 那样分布式），所以获取和重新添加速度很快，就像传递引用一样。

另一种选择是对缓存项使用 SlidingExpiration。

# actionscript-3 - onLoadComplete 不适用于通过 AS3 加载的 AS2 SWF

> ID：13692451
> 
> 赞同：0
> 
> 时间：2012-12-03T21:55:15.237
> 
> 标签：actionscript-3, actionscript-2

所以我遇到了一个问题，我认为这主要是因为我已经有 5 年没有使用 as2 了，所以事情很模糊。无论如何，我的问题是我需要在 Flash 电影中显示 PDF 文件。为此，我求助于在我的后端运行 SWFTools 并将 pdf 转换为 swf 以进行显示。不过，SWFTools 会输出 AS2 文件，我可以将这些文件加载​​到 AS3 中，但我实际上无法控制（例如，调用 stop()）。

因此，我使用了一个 AS2 加载程序，该加载程序被加载到负责加载转换后的 pdf swfs 的 AS3 项目中。我遇到的问题是，当我通过 AS3 加载 AS2 文件时，侦听器似乎没有被触发，但在它自己运行时它触发得很好。

这是我正在运行的代码。总结一下，当我自己运行此代码时，“LOADED”会正确打印到输出，并且加载的 SWF 会停止。但是，当我通过 AS3 容器运行它时，swf 会正确加载，但“已加载”跟踪永远不会发生，并且不会执行停止。

非常感谢您的帮助！

```
var loader:MovieClipLoader

var listener =  new Object();
listener.onLoadComplete = function(loadedClip) {
    trace("LOADED");
    loadedClip.stop();
}

loadFile("data/testing.swf");

function loadFile(target){
    loader = new MovieClipLoader();
    loader.addListener(listener);
    loader.loadClip(target, holder_mc);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:17:24.990

SWF Tools**确实**支持 AS3，您需要在选项中更改它。

```
1\. Open your PDF in swf tools
2\. Edit=>Options
3\. Viewer tab
4\. Check "No viewer" and flash version 9\. (Or use the simple viewer) 
    - You can also do the "Insert stop after each frame" 
```

我知道这一点是因为我对 PDF 做了同样的事情。如果您没有这些选项，那么是时候下载最新版本了！

# wpf - 如何在矩形WPF内缩放图像

> ID：13692453
> 
> 赞同：1
> 
> 时间：2012-12-03T21:55:21.240
> 
> 标签：wpf, zooming

我正在尝试放大和缩小 Rectangle 控件内的图像。但是在这样做的同时，我的整个矩形都被放大了，而不仅仅是其中的图像。为此，我在 Rectangle 上使用 ScaleTransform 和 TranslateTranform。我应该在图像而不是矩形上做同样的事情，但我不知道怎么做？谁能帮帮我。

XAML：

```
 <Rectangle x:Name="LiveViewWindow" Fill="#FFF4F4F5" HorizontalAlignment="Right"  
            ClipToBounds="True" /> 
```

代码：

```
InteropBitmap m_LiveViewBitmapSource =Imaging.CreateBitmapSourceFromMemorySection(
    section, width, height, PixelFormats.Bgr32, width*4, 0) as InteropBitmap;

ImageBrush m_BackgroundFrame = new ImageBrush(m_LiveViewBitmapSource);

RenderOptions.SetBitmapScalingMode(m_BackgroundFrame, BitmapScalingMode.LowQuality);

LiveViewWindow.Fill = m_BackgroundFrame; 
```

n 然后我使用 Invalidate() 属性将 InteropBitmap 呈现为 Rectangle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:45:29.407

您可以设置 ImageBrush 的[Transform](http://msdn.microsoft.com/en-us/library/system.windows.media.brush.transform.aspx)属性。[在画笔转换概述](http://msdn.microsoft.com/en-us/library/aa970500.aspx)中获取更多信息。

# c# - 使用 c# 记录 Javascript 交互

> ID：13692459
> 
> 赞同：0
> 
> 时间：2012-12-03T21:55:40.910
> 
> 标签：c#, javascript

我想知道是否有人对如何在 C# 中记录 javascript 与浏览器的交互有任何建议。其背后的原因是我想设计一个记录任何 javascript 交互的网络爬虫，我可能会对其进行筛选以找到任何类型的恶意调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-05T08:19:27.607

您必须首先捕获服务器引擎盖下发生的事情，因此您可能需要这样的日志记录工具：[jqlog](https://code.google.com/p/jqlog/)

> 一个可以配置和扩展的 jQuery 日志框架插件，允许您“滚动自己的”日志框架。

基本用法：

```
(function($) {
    $(document).ready(function() {
        $.jqlog.enabled(true);
        $.jqlog.log("Log entry");
        $.jqlog.info("Information entry");
        $.jqlog.warn("Warning entry");
        $.jqlog.error("Error entry");
    });
})(jQuery); 
```

在此之后，您可以使用 C# 或任何您想要的，但您必须了解您的 Javascript 代码会发生什么。

# php - PHP：使用冒号和属性获取 XML 值

> ID：13692463
> 
> 赞同：0
> 
> 时间：2012-12-03T21:55:58.830
> 
> 标签：php, xml

下面是 Xml 文件，我需要检索 之间的值`<im:name> and </im:name>`，即**牙科手术**。以及之间的值 `<im:image height="75"> and </im:image>`，即 `http://a478.phobos.apple.com/.75x75-65.png`

```
<entry>
   <im:name>Dental Surgery</im:name>  
    <im:image height="53">
    http://a1962.phobos.apple.com/53x53-50.png
    </im:image>
    <im:image height="75">
    http://a478.phobos.apple.com/.75x75-65.png
    </im:image>
    <im:image height="100">
    http://a683.phobos.apple.com/100x100-75.png
    </im:image>
</entry> 
```

我尝试了下面的代码但不起作用

```
 $entry->im->name; 
```

# regex - JMeter 响应断言：将属性合并到模式测试中

> ID：13692468
> 
> 赞同：2
> 
> 时间：2012-12-03T21:56:14.487
> 
> 标签：regex, properties, jmeter, assertion

我想设置一个 JMeter 测试计划来建议网站 (URL) 是否基于 Drupal（完全基于来自该站点的 HTTP 响应）并将其与我在环境中拥有的现有数据进行比较。（我意识到使用 HTTP 方法，而不是说检查站点的文件系统，是“不确定的”，但我很好奇这种方法有多有用）

JMeter 命令行可能如下所示：

```
JMeter -t "DrupalAssertions.jmx" -Jurl=http://my.dot.com -Jdrupal=true 
```

我提供了要测试的 URL 和一个附加属性“drupal”，表明我对该站点是否基于 Drupal 的最佳猜测。

在我的测试计划中，我添加了一个 HTTP 请求以返回 URL 页面的 HTML 内容。然后我可以成功地添加一个响应断言来测试一个模式（比如`(?i)(drupal)`一个可悲的缺少模式），看看它是否包含在响应中。

这一切都很好，或者正如预期的那样，但我想做的是在同一个响应断言中将“drupal”属性的值与该模式测试的结果进行比较。我知道我在这里遗漏了一些简单的东西，但我不知道该怎么做。

我想尝试使用这样的表达式：

```
(?i)(drupal) == ${__P(drupal)} 
```

在一个模式中，但这不起作用。[比较断言](http://jmeter.apache.org/usermanual/component_reference.html#Compare_Assertion)的名称看起来很有希望，但我不知道如何将该属性合并到比较中。

**更新**：PMD UBIK-INGENIERIE 建议的方法确实有效。我使用了这样的正则表达式提取器：

```
<RegexExtractor guiclass="RegexExtractorGui" testclass="RegexExtractor" testname="Extract Drupal in Response" enabled="true">
  <stringProp name="RegexExtractor.useHeaders">false</stringProp>
  <stringProp name="RegexExtractor.refname">drupalInResponse</stringProp>
  <stringProp name="RegexExtractor.regex">(.*drupal.*)</stringProp>
  <stringProp name="RegexExtractor.template">$0$</stringProp>
  <stringProp name="RegexExtractor.default">__false__</stringProp>
  <stringProp name="RegexExtractor.match_number">1</stringProp>
</RegexExtractor> 
```

其次是这个 BeanShell 断言：

```
// Variable "drupalInResponse" is "__false__" by default
if ( !(vars.get("drupalInResponse").equals("__false__") ) ) {
  vars.put("drupalInResponse","true");
}
else {
  vars.put("drupalInResponse","false");
}

print("\n\nThe value of property 'drupal' is: " + props.get("drupal") + "\n");
print("\n\nThe value of variable 'drupalInResponse' is: " + vars.get("drupalInResponse") + "\n");

if (vars.get("drupalInResponse").equals( props.get("drupal") ) ) { 
  print("Site Drupalness is consistent with your beliefs"); 
} 
else { 
  print("You're wrong about the site's Drupalness"); 
  Failure = true; 
  FailureMessage = "Incorrect Drupal assumption"; 
} 
```

在正则表达式提取器中，我设置了一个我认为与我感兴趣的模式不匹配的默认值，然后与 BeanShell 断言中的“drupal”属性进行了丑陋的 Java 比较。

希望以某种方式可以在单个组件中做出断言，而不是由两个部分组成，但是您不能与“工作”争论：)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:49:19.683

您可以将正则表达式提取器与您的第一个模式一起使用

然后使用 Beanshell 断言，它将使用您的变量并将其与 drupal 属性进行比较。

# php - is_unique 用于 codeigniter 表单验证

> ID：13692473
> 
> 赞同：22
> 
> 时间：2012-12-03T21:56:42.587
> 
> 标签：php, codeigniter

我试图弄清楚如何`is_unique`在以下情况下使用 Codeigniter 表单验证库中的规则。

我正在尝试提交编辑用户表单并具有以下规则：

```
$this->form_validation->set_rules('user_name', 'User Name', 'required|trim|xss_clean|is_unique[users.user_name]'); 
```

如果表单中的其他值正在更改但该值保持不变怎么办。表单将看到这个值已经存在，所以如果这个值没有改变，我将如何保护它不被编辑。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-04T01:35:23.367

以您的代码为例，`is_unique`验证规则通过查找数据库表中调用`user_name`的字段来工作。`users`如果存在具有相同值的字段，则验证为 false。

为确保它仅在用户提交新值时运行，您可以将发布 `$this->input->post('user_name')`的值与从数据库中提取的值进行检查以填充表单。如果它们相同，则不要验证 is_unique；

```
if($this->input->post('user_name') != $original_value) {
   $is_unique =  '|is_unique[users.user_name]'
} else {
   $is_unique =  ''
}

$this->form_validation->set_rules('user_name', 'User Name', 'required|trim|xss_clean'.$is_unique); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-21T09:39:51.937

我认为有一个更好的方法可以绕过它，仍然使用 CodeIgniters 的验证库...使用 edit_unique 传递一个额外参数，即您正在编辑的行的 id ..见下文..我使用它和对我来说效果很好..希望它有所帮助

```
$this->form_validation->set_rules('user_name', 'User Name', 'required|trim|xss_clean|edit_unique[users.user_name.'.$id.']'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-12T15:54:19.337

```
$something = $this->input->post('something');

$this->form->validation->set_rules('something','Something','xss_clean|is_unique['tbl'.users]');

if($this->form_validation->run()== FALSE){

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-27T11:24:54.977

**简单的方法**

**只需在 system/libraries/form_validation.php 中将 isset 更改为 is_object**

```
public function is_unique($str, $field)
{
    sscanf($field, '%[^.].%[^.]', $table, $field);
    return is_object($this->CI->db) //default isset
        ? ($this->CI->db->limit(1)->get_where($table, array($field => $str))->num_rows() === 0)
        : FALSE;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-01T21:06:58.537

这是一个对我有用的简单方法，它使用了有据可查的代码（感谢[https://github.com/ivantcholakov](https://github.com/ivantcholakov)的分享！）。我发现它在[https://github.com/bcit-ci/CodeIgniter/issues/3109#issuecomment-46346280](https://github.com/bcit-ci/CodeIgniter/issues/3109#issuecomment-46346280)

1.  下载[https://github.com/ivantcholakov/starter-public-edition-3/blob/master/platform/application/libraries/MY_Form_validation.php（MIT](https://github.com/ivantcholakov/starter-public-edition-3/blob/master/platform/application/libraries/MY_Form_validation.php)许可）并将其保存到您的应用程序 application\libraries\MY_Form_validation.php
2.  从 __construct() 中删除这两行：

    $this->CI->load->helper('checkbox'); $this->CI->load->helper('email');

3.  删除除 __construct() 和 unique() 之外的所有函数。

4.  在控制器的 __construct() 方法的末尾添加以下行：

    $this->load->library('form_validation');

5.  根据 unique() 方法的文档，更新您的验证规则以添加这样的“唯一”规则（例如，如果您已经有 required 和 trim 规则）：

    …|必需|唯一[tablename.fieldname,tablename.(primaryKey-used-for-updates)]|trim...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-02T07:01:13.653

扩展 Form_validation.php 库在应用程序/库文件名 MY_Form_validation.php 内创建类

```
<?php

class MY_Form_validation extends CI_Form_validation{
    protected $ci;
     public function __construct($config = array()){
                parent::__construct($config);
                $this->ci =& get_instance();
        }

                public function is_unique_update($str, $field){
                $explode=explode('@', $field);
                $field_name=$explode['0'];
                $field_id_key=$explode['1'];
                $field_id_value=$explode['2'];
                sscanf($field_name, '%[^.].%[^.]', $table, $field_name);

                 if(isset($this->ci->db)){
                        if($this->ci->db->limit(1)->get_where($table, array($field_name => $str,$field_id_key=>$field_id_value))->num_rows() === 0){
                             $this->ci->form_validation->set_message('is_unique_update', 'The {field} field must contain a unique value.');
                            return false;
                        }
                        return true;
                    }

            }
} 
```

现在在你的控制器中

```
$this->form_validation->set_rules('user_name', 'User Name', 'required|trim|xss_clean|is_unique_update[users.user_name@id@'.$id.']'); 
```

"@" 我用来分解字符串
，其中 id 是用户表的主键，
$id 是 id 的值。现在您可以在任何控制器中使用这个 is_unique_update 验证。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-20T09:53:36.777

这个问题很老，但也许一些新人会遇到这个问题，这就是它的解决方案。我敢打赌您正在使用模块化扩展 (HMVC)，并且您已经创建了一个新库 MY_Form_validation。你为回调做了 id ，所以你的类上有这行代码以便使用回调：

```
$this->form_validation->CI =& $this; 
```

好吧，解决这个问题的方法是，每当你想使用“is_unique”时，你必须删除这行代码“$this->form_validation->CI =& $this;” 从课堂上。我遇到过这个问题，我用这种方式修复它，现在它工作正常。

如果您真的想使用回调“$this->form_validation->CI =& $this;”，那么只在您不想使用 is_unique 的所需“方法”/“函数”上执行此操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-13T06:55:10.667

## 此代码有助于创建和更新函数的唯一验证...

在控制器中

在创建和更新函数中添加此表单验证代码

```
$this->form_validation->set_rules('order_no', 'Order no', 'required|callback_check_order_no'); 
```

在控制器中添加此回调函数

```
function check_order_no($order_no) {        
        if($this->input->post('id'))
            $id = $this->input->post('id');
        else
            $id = '';
        $result = $this->Data_model->check_unique_order_no($id, $order_no);
        if($result == 0)
            $response = true;
        else {
            $this->form_validation->set_message('check_order_no', 'Order no already exist');
            $response = false;
        }
        return $response;
    } 
```

在模型中

```
function check_unique_order_no($id = '', $order_no) {
        $this->db->where('order_no', $order_no);
        $this->db->where('status', "A");

        if($id) {
            $this->db->where_not_in('id', $id);
        }
        return $this->db->get('delivery_order')->num_rows();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-18T06:17:59.920

我正在使用 codeigniter3，当我在更新值时检查用户名时它显示错误，is_unique 不适用于更新场景，因此使用@Anthony Mutisya 的答案，这是完整的解决方案

在您的控制器中，在使用数据库验证当前用户的用户名时添加此行

```
$this->form_validation->set_rules('user_name', 'User Name', 'required|trim|xss_clean|edit_unique[users.user_name.'.$id.']'); 
```

你可以`$id`从你提交的表格中得到它。

现在，将以下函数添加`/system/libraries/Form_Validation.php`到此文件中。`System`文件夹位于 CodeIgniter3 文件夹的根目录中。

```
/**
* edit_unique // for check on update value
*
* Check if the input value doesn't already exist
* in the specified database field.
*
* @param    string  $str
* @param    string  $field
* @return   bool
*/
function edit_unique($value, $params)  {
    $CI =& get_instance();
    $CI->load->database();
    $CI->form_validation->set_message('edit_unique', "Sorry, that %s is already being used.");

    list($table, $field, $current_id) = explode(".", $params);

    $query = $CI->db->select()->from($table)->where($field, $value)->limit(1)->get();

    if ($query->row() && $query->row()->id != $current_id)
    {
        return FALSE;
    } else {
        return TRUE;
    }
} 
```

在我的情况下它工作得很好

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-08-17T11:56:46.020

我们必须为**is_unique添加表名**

为 Exp。

```
 is_unique[users.email] 
```

# c# - C# Kinect 骨骼跟踪

> ID：13692474
> 
> 赞同：1
> 
> 时间：2012-12-03T21:56:42.717
> 
> 标签：c#, kinect

我在使用 SDK v1.5 和 VS2012 让 Kinect For Windows 的骨架跟踪正常工作时遇到了一些严重的问题。我正在构建来自[https://github.com/EvilClosetMonkey/Fizbin.Kinect.Gestures](https://github.com/EvilClosetMonkey/Fizbin.Kinect.Gestures)的源代码，但是当屏幕上有多个人时，跟踪会完全误入歧途。然后我继续查看这里的代码（[http://social.msdn.microsoft.com/Forums/en-US/kinectsdknuiapi/thread/459012d7-d51e-460d-aa6a-a1b80c27626c/](http://social.msdn.microsoft.com/Forums/en-US/kinectsdknuiapi/thread/459012d7-d51e-460d-aa6a-a1b80c27626c/)），我我试图集成“AppChoosesSkeletons”功能（下面的代码）：

```
using System.Windows;
using System.Windows.Data;
using Microsoft.Kinect;
using Microsoft.Kinect.Toolkit;
using Microsoft.Samples.Kinect.WpfViewers;
using System.Diagnostics;
using System.ComponentModel;
using System.Linq;
using System;

namespace Fizbin.Kinect.Gestures.Demo
{
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private readonly KinectSensorChooser sensorChooser = new KinectSensorChooser();

    private Skeleton[] skeletons = new Skeleton[0];

    // skeleton gesture recognizer
    private GestureController gestureController;

    public MainWindow()
    {
        DataContext = this;

        InitializeComponent();

        // initialize the Kinect sensor manager
        KinectSensorManager = new KinectSensorManager();
        KinectSensorManager.KinectSensorChanged += this.KinectSensorChanged;

        // locate an available sensor
        sensorChooser.Start();

        // bind chooser's sensor value to the local sensor manager
        var kinectSensorBinding = new Binding("Kinect") { Source = this.sensorChooser };
        BindingOperations.SetBinding(this.KinectSensorManager, KinectSensorManager.KinectSensorProperty, kinectSensorBinding);
    }

    #region Kinect Discovery & Setup

    private void KinectSensorChanged(object sender, KinectSensorManagerEventArgs<KinectSensor> args)
    {
        if (null != args.OldValue)
            UninitializeKinectServices(args.OldValue);

        if (null != args.NewValue)
            InitializeKinectServices(KinectSensorManager, args.NewValue);
    }

    /// <summary>
    /// Kinect enabled apps should customize which Kinect services it initializes here.
    /// </summary>
    /// <param name="kinectSensorManager"></param>
    /// <param name="sensor"></param>
    private void InitializeKinectServices(KinectSensorManager kinectSensorManager, KinectSensor sensor)
    {
        // Application should enable all streams first.

        // configure the color stream
        kinectSensorManager.ColorFormat = ColorImageFormat.RgbResolution640x480Fps30;
        kinectSensorManager.ColorStreamEnabled = true;

        // configure the depth stream
        kinectSensorManager.DepthStreamEnabled = true;

        kinectSensorManager.TransformSmoothParameters =
            new TransformSmoothParameters
            {
                Smoothing = 0.5f,
                Correction = 0.5f,
                Prediction = 0.5f,
                JitterRadius = 0.05f,
                MaxDeviationRadius = 0.04f
            };

        // configure the skeleton stream
        sensor.SkeletonFrameReady += FramesReady;
        kinectSensorManager.SkeletonStreamEnabled = true;
        sensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Seated;
        // initialize the gesture recognizer
        gestureController = new GestureController();
        gestureController.GestureRecognized += OnGestureRecognized;

        kinectSensorManager.KinectSensorEnabled = true;

        if (!kinectSensorManager.KinectSensorAppConflict)
        {
            // addition configuration, as needed
        }
    }

    /// <summary>
    /// Kinect enabled apps should uninitialize all Kinect services that were initialized in InitializeKinectServices() here.
    /// </summary>
    /// <param name="sensor"></param>
    private void UninitializeKinectServices(KinectSensor sensor)
    {

    }

    #endregion Kinect Discovery & Setup

    #region Properties

    public static readonly DependencyProperty KinectSensorManagerProperty =
        DependencyProperty.Register(
            "KinectSensorManager",
            typeof(KinectSensorManager),
            typeof(MainWindow),
            new PropertyMetadata(null));

    public KinectSensorManager KinectSensorManager
    {
        get { return (KinectSensorManager)GetValue(KinectSensorManagerProperty); }
        set { SetValue(KinectSensorManagerProperty, value); }
    }

    /// <summary>
    /// Gets or sets the last recognized gesture.
    /// </summary>
    private string _gesture;
    public String Gesture
    {
        get { return _gesture; }

        private set
        {
            if (_gesture == value)
                return;

            _gesture = value;

            Debug.WriteLine("Gesture = " + _gesture);

            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("Gesture"));
        }
    }

    #endregion Properties

    #region Events

    /// <summary>
    /// Event implementing INotifyPropertyChanged interface.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    #endregion Events

    #region Event Handlers

    /// <summary>
    ///
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e">Gesture event arguments.</param>
    private void OnGestureRecognized(object sender, GestureEventArgs e)
    {
        Debug.WriteLine(e.GestureType);

        switch (e.GestureType)
        {
            case GestureType.Menu:
                Gesture = "Menu";
                break;
            case GestureType.WaveRight:
                Gesture = "Wave Right";
                break;
            case GestureType.WaveLeft:
                Gesture = "Wave Left";
                break;
            case GestureType.JoinedHands:
                Gesture = "Joined Hands";
                break;
            case GestureType.SwipeLeft:
                Gesture = "Swipe Left";
                break;
            case GestureType.SwipeRight:
                Gesture = "Swipe Right";
                break;
            case GestureType.ZoomIn:
                Gesture = "Zoom In";
                break;
            case GestureType.ZoomOut:
                Gesture = "Zoom Out";
                break;

            default:
                break;
        }
    }

    void FramesReady(object sender, AllFramesReadyEventArgs e, KinectSensor sensor)
    {
        Skeleton skeleton = FindSkeleton(e);
        if (skeleton != null)
        {
            gestureController.UpdateAllGestures(skeleton);
        }
    }

    private int CurrentTrackingId = 0;

    Skeleton FindSkeleton(AllFramesReadyEventArgs e)
    {
        Skeleton skeleton = null;

        using (SkeletonFrame SFrame = e.OpenSkeletonFrame())
        {
            if (SFrame == null)
            {
                return null;
            }

            if (skeletons == null)
            {
                skeletons = new Skeleton[SFrame.SkeletonArrayLength];
            }

            SFrame.CopySkeletonDataTo(skeletons);

            if (CurrentTrackingId != 0)
            {
                // We've been tracking someone; see if they're still here

                skeleton =
                    (from s in skeletons
                     where s.TrackingState == SkeletonTrackingState.Tracked &&
                           s.Joints[JointType.Head].TrackingState == JointTrackingState.Tracked &&
                           s.TrackingId == CurrentTrackingId
                     select s).FirstOrDefault();

                if (skeleton == null)
                {
                    CurrentTrackingId = 0;
                    sensor.SkeletonStream.AppChoosesSkeletons = false;
                }
            }
            else
            {
                // Try to find someone new

                skeleton =
                    (from s in skeletons
                     where s.TrackingState == SkeletonTrackingState.Tracked &&
                           s.Joints[JointType.Head].TrackingState == JointTrackingState.Tracked
                     select s).FirstOrDefault();

                if (skeleton != null)
                {
                    CurrentTrackingId = skeleton.TrackingId;
                    sensor.SkeletonStream.AppChoosesSkeletons = true;
                    sensor.SkeletonStream.ChooseSkeletons(CurrentTrackingId);
                }
            }
        }

        return skeleton;
    }

    #endregion Event Handlers

   }
} 
```

但是，我从 VS2012 收到关于以下内容的错误：

1) 'FramesReady' 没有重载匹配委托 'System.EventHandler'

2）“传感器”不存在（很可能是因为它没有被导入，但根据我的尝试，跨方法传递传感器会导致更多错误）

如果有人可以帮助解决这个问题，或者甚至为我指出解决这个问题的正确方向，那就太好了！重申一下，主要目标是让 Kinect 锁定它找到的第一个人，并在多人在视线范围内移动时保持该锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:29:31.230

如果您打算继续使用，`KinectSensorManager`您可以使用`KinectSkeletonChooser`来帮助您挑选出您想要的骨架。这个帮助函数也包含在`KinectWpfViewers`项目中。您无需在后面的代码中添加任何其他代码即可使用它。

最简单的方法是将其添加到您的 XAML 中。更新除了周二库附带的演示代码，它看起来像：

```
<Window x:Class="Fizbin.Kinect.Gestures.Demo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:kv="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers"
        Title="MainWindow" Height="350" Width="525">
    <Grid>        
        <Grid HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="320" Height="240">
            <kv:KinectSkeletonChooser KinectSensorManager="{Binding KinectSensorManager}" SkeletonChooserMode="Sticky1Player" />
            <kv:KinectDepthViewer x:Name="DepthViewer" KinectSensorManager="{Binding KinectSensorManager}" />
            <Canvas>
                <kv:KinectSkeletonViewer
                                    KinectSensorManager="{Binding KinectSensorManager}"
                                    Width="{Binding ElementName=DepthViewer, Path=ActualWidth}"
                                    Height="{Binding ElementName=DepthViewer, Path=ActualHeight}"
                                    ShowBones="True" ShowJoints="True" ShowCenter="True" ImageType="Depth" />
            </Canvas>
        </Grid>

        <TextBlock Text="{Binding Gesture}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="48" FontWeight="Bold" Margin="-2,0,0,0"/>
        <TextBlock Text="{Binding Gesture}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="48" FontWeight="Bold" Margin="2,0,0,0"/>
        <TextBlock Text="{Binding Gesture}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="48" FontWeight="Bold" Margin="0,-2,0,0"/>
        <TextBlock Text="{Binding Gesture}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="48" FontWeight="Bold" Margin="0,2,0,0"/>
        <TextBlock Text="{Binding Gesture}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="48" FontWeight="Bold" Foreground="White"/>

    </Grid>
</Window> 
```

*注意第 8 行的新`KinectSkeletonChooser`标签。*

其他可用选项可以在`SkeletonChooserMode`枚举中看到：

```
public enum SkeletonChooserMode
{
    /// <summary>
    /// Use system default tracking
    /// </summary>
    DefaultSystemTracking,

    /// <summary>
    /// Track the player nearest to the sensor
    /// </summary>
    Closest1Player,

    /// <summary>
    /// Track the two players nearest to the sensor
    /// </summary>
    Closest2Player,

    /// <summary>
    /// Track one player based on id
    /// </summary>
    Sticky1Player,

    /// <summary>
    /// Track two players based on id
    /// </summary>
    Sticky2Player,

    /// <summary>
    /// Track one player based on most activity
    /// </summary>
    MostActive1Player,

    /// <summary>
    /// Track two players based on most activity
    /// </summary>
    MostActive2Player
} 
```

# rest - 使用 Apache CFX 的 Java Resfull Web 服务

> ID：13692483
> 
> 赞同：1
> 
> 时间：2012-12-03T21:57:26.213
> 
> 标签：rest, interface

有人可以发布一个使用 Apache CFX 实现多个接口的 Rest Webservice 的示例。下面是一个例子。当尝试从第二个接口调用方法时，它仅适用于 add() 方法，它会引发 404 错误。

```
@path("calculator")
public calc implements addcalc, subcalc{

    public int add(){}

    public int sub(){}

}

@path("add")

interface addcalc{
    @path("add")
    public int add();

}

@path("plus")

interface subcalc{

    @Path("minus")
    public int mins();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-23T02:54:27.943

sub 没有覆盖 mins 并且 sub 没有用 Path 注释。此外，缺少 http 方法，这意味着它不是资源方法，而是资源定位器。

# .net - 多对多自引用实体框架代码首先实际上不能用作模型

> ID：13692484
> 
> 赞同：1
> 
> 时间：2012-12-03T21:57:30.383
> 
> 标签：.net, asp.net-mvc, entity-framework, ef-code-first, code-first

这是我的代码：

```
public class RegisteredUser
{
    public virtual int ID { get; set; }
    [Required]
    public virtual string FirstName { get; set; }
    [Required]
    public virtual string LastName { get; set; }
    [Required]
    public virtual string Email { get; set; }
    [Required]
    [DataType(DataType.Password)]
    public virtual string Password { get; set; }
    public virtual string NickName { get; set; }
    [Required]
    [DataType(DataType.Date)]
    public virtual DateTime DOB { get; set; }
    public virtual string Avatar { get; set; }
    public virtual ICollection<Post> Posts { get; set; }
    public virtual ICollection<CommentPost> CommentPosts { get; set; }
    public virtual ICollection<TagPost> TagPosts { get; set; }
    public virtual ICollection<RegisteredUser> Friends { get; set; }
}

public class SocialWeb_BasedApplicationDB : DbContext
{
    public DbSet<RegisteredUser> RegisteredUsers { get; set; }
    public DbSet<Post> Posts { get; set; }
    public DbSet<CommentPost> CommentPosts { get; set; }
    public DbSet<TagPost> TagPosts { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Post>().HasMany(m => m.CommentPost).WithRequired(a => a.Post).WillCascadeOnDelete(false);
        modelBuilder.Entity<RegisteredUser>().HasMany(m => m.TagPosts).WithRequired(a => a.RegisteredUser).WillCascadeOnDelete(false);
        modelBuilder.Entity<RegisteredUser>().HasMany(a => a.Friends).WithMany().Map(a => a.MapLeftKey("UserID").MapRightKey("FriendID").ToTable("Users_Friends"));
    } 
```

Many To May 表已创建，但我不能像我做的那样实际使用它（从 n in Context.User_Friends where n.UserId = 0 select n）；

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:06:25.743

从 EF 的角度来看，User_Friends 不是一个实体，而是要获取用户的朋友，您必须使用此查询

```
var friends = from u in Context.RegisteredUsers
              from f in u.Friends
              where u.UserId=0
              select f; 
```

我通常将关系变成显式实体，因为有更多关于这些关系的有用信息，否则无法捕获。

# javascript - 在“for”循环中填充多维数组（javascript）

> ID：13692488
> 
> 赞同：3
> 
> 时间：2012-12-03T21:57:50.710
> 
> 标签：javascript, arrays, optimization, for-loop, multidimensional-array

似乎 JavaScript 试图以某种方式优化代码，所以如果我们想在循环`largeArr`中用改变的一维数组 ( ) 的值填充多维数组 ( )并使用以下代码：`smallArr`

```
largeArr = []
smallArr = []

for (i=0; i<2; i++)
{
    smallArr[0]=i
    smallArr[1]=2*i

    largeArr[i]=smallArr
} 
```

我们得到了一个意想不到的结果：（`largeArr=[[1,2],[1,2]]`必须是`[[0,0],[1,2]]`）。因此，Javascript`smallArr`首先计算值，然后才填充`largeArr`. 为了得到正确的结果，我们必须`smallArr`在循环中声明：

```
largeArr = []

for (i=0; i<2; i++)
{
    smallArr = []
    smallArr[0]=i
    smallArr[1]=2*i

    largeArr[i]=smallArr
} 
```

然后它按预期工作（`largeArr=[[0,0],[1,2]]`）。

为什么它会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T22:00:18.490

因为指针，这就是原因。Javascript 以这种（而且只有这种）方式继 Java 和 C 之后。当你做作业时

```
largeArr[i] = smallArr 
```

你正在分配一个指针。指针分解：

在 C 中（以及在较小程度上，Java 和 Javascript）你没有基本的数组类型——相反，一个数组指向内存中的一个空间，你可以用你想要的任何信息填充那个空间（或者更确切地说，你已经宣布）。指针在内存中的存在方式？一个四（或八，或二，取决于您的系统）字节*内存地址*，它告诉编译器/解析器从哪里获得适当的信息。所以，当你在那里做那个赋值时，你是在告诉它：“嘿，设置 largeArr[i] 等于 smallArr 的内存地址。” 因此，当您对 smallArr 进行更改时，每次取消引用数组时都会反映出来 - 因为它实际上是同一个数组。但是当你这样做时：

```
smallArr = [] 
```

在循环内部，您说的是“创建一个新数组，并将 smallArr 设置为等于该数组的地址。” 这样，阵列就保持分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:02:22.627

使用该行`largeArr[i]=smallArr`，您将`i`属性设置为对`smallArr`. 你不要**复制**它。最后， 的所有属性都`largeArr`将指向同一个`smallArr`，您每次都覆盖了其中的值。

通过初始化`smallArr`每个循环转弯，您可以创建新对象；因此 的每个属性都`largeArr`将指向不同的数组。顺便说一句，它是一个*赋值*，而不是一个*声明*——你会（并且应该）用一个[`var`语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)将变量声明为本地（函数） 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:03:05.080

在最后一次迭代中

```
smallArr[0]=i
smallArr[1]=2*i 
```

（其中`i=1`）上面的代码转换为：

```
smallArr[0]=1
smallArr[1]=2 
```

你的大数组就是这样：

```
[smallArr, smallArr] 
```

这导致了*意想不到*的结果：

```
[[1, 2], [1, 2]] 
```

在 javascript 中，对象是通过引用复制的（一种 c 样式指针）。
为了获得所需的结果，您必须按值复制数组，或在每个循环中分配不同的数组：

```
var largeArr = [];

for (i=0; i<2; i++)
   largeArr[i] = [[i, 2*i]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T22:05:48.713

当您像上面那样分配数组引用时，您并没有分配该数组的*值*，而只是对该数组的*引用*。

把它想象成一个指针。largeArr[0] 和 largeArr[1] 指向 smallArr，循环迭代只是简单地改变 smallArr 的*内容*。largeArr 被“指向”的东西没有改变。

# iphone - 不断更新 UITableView 问题

> ID：13692490
> 
> 赞同：0
> 
> 时间：2012-12-03T21:58:12.103
> 
> 标签：iphone, xcode, uitableview, uisearchbar, updating

我有一个搜索栏，用户可以在其中搜索地址。每次更改输入的文本时，都会调用选择器，搜索新地址并将其存储到 NSMutableArray 中。到目前为止，这非常有效。

在搜索栏下，我有一个 UITableView，每次都会被调用

```
[searchTableView reloadData] 
```

在将新地址添加到数组中之后。

找到第一个地址后，将其放入数组并调用 searchTableView 应用程序崩溃并显示以下消息：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
```

原因：'UITableView 数据源必须从 tableView 返回一个单元格：cellForRowAtIndexPath：'

这是我正在使用的代码：

```
 - (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{ 

      list = [[NSMutableArray alloc]init];

[geoCoder geocodeAddressString:self.addressSearch.text
             completionHandler:^(NSArray* placemarks, NSError* error){
                 for (CLPlacemark* aPlacemark in placemarks)
                 {

                     for (int i=0; i<[placemarks count]; i++) {

                         NSString *temp = [NSString stringWithFormat:@"%@",[[[[placemarks objectAtIndex:i]addressDictionary] valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "]];

                         [list addObject:temp];

                         [searchTableView reloadData];

                         NSLog(@"List: %@", list);
                     }

                 }
             }]; 
}

- (UITableViewCell *)tableView:(UITableView *)tableVieww cellForRowAtIndexPath:(NSIndexPath *)indexPath {

...

if (tableVieww == savedTableView) {

    UIView *bgColor;

    cell = [self.savedTableView dequeueReusableCellWithIdentifier:[list objectAtIndex:indexPath.row]];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:[list objectAtIndex:indexPath.row]];
        cell.accessoryType = UITableViewCellAccessoryNone;

        bgColor = [[UIView alloc] initWithFrame:cell.frame];
        [cell addSubview:bgColor];
        [cell sendSubviewToBack:bgColor];

    }

    cell.textLabel.text = [list objectAtIndex:indexPath.row];
    cell.textLabel.backgroundColor = [UIColor clearColor];

    cell.textLabel.textColor = [UIColor whiteColor];

    if (indexPath.row % 2 == 0){
        bgColor.backgroundColor = [UIColor colorWithRed:098.0f/255.0f
                                                  green:211.0f/255.0f
                                                   blue:182.0f/255.0f alpha:0.90f];
    } else {
        bgColor.backgroundColor = [UIColor colorWithRed:230.0f/255.0f
                                                  green:089.0f/255.0f
                                                   blue:128.0f/255.0f alpha:0.90f];
    }

}

return cell; 
} 
```

谢谢您的帮助！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:26:20.567

该错误是因为您没有在`cellForRowAtIndexPath`方法中返回任何单元格。

`savedTableView`应该在方法`searchTableView`中。`cellForRowAtIndexPath`

* * *

你应该有 else 条件 -> if 会发生什么`(tableVieww != savedTableView)`？

```
- (UITableViewCell *)tableView:(UITableView *)tableVieww cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (tableVieww == savedTableView) {
         ....
    } else {
         // Initialize cell here as well
    }
} 
```

# git - Git 挂在写对象等等

> ID：13692502
> 
> 赞同：1
> 
> 时间：2012-12-03T21:59:02.847
> 
> 标签：git, github, ssh

我正在使用 Ubuntu 12.04，当我尝试将多个文件推送到 Github 时，git 在写入对象时挂起（如果包有这么多文件）或在写入对象后挂起（如果包的文件较少 - 比如 10- 15）。我试图重新创建 git 文件，但它不起作用。我尝试使用`openssh-server`并配置 sshd_config 使其本身具有“TcpRcvBufPoll no”（顺便说一句，它最初没有这个短语，我将它添加为新行），它也不起作用。可能是什么问题呢？我不能一次推送 10-15 个文件。这是最初的提交，我无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:26:12.317

您是否尝试过通过 HTTPS 添加 git 远程并确认该行为仅是由于 SSH 配置损坏所致？

```
git remote add myrepoHTTP https://github.com/path/to/repo.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:10:52.937

尝试使用 HTTPS 克隆现有存储库并以这种方式推送文件。

[按照github](https://help.github.com/articles/set-up-git)上描述的设置来设置 git 和 github 以在 HTTPS 上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-30T16:52:54.710

这是一个老问题，但我遇到了类似的问题，上传冻结在 71%，希望我的解决方案可以帮助任何人找到这个 ;)

我的问题是我使用超级用户创建了目录和 git-repository，所以推送失败导致它冻结在 70% 左右。将目录改成指定的 git-ssh-user 解决了这个问题。

# gwt - GWT Widget 未在 DOM 中正确设置

> ID：13692503
> 
> 赞同：1
> 
> 时间：2012-12-03T21:59:10.617
> 
> 标签：gwt, dom, printing

我想打印一个扩展 Composite 的 GWT 小部件。此小部件由一个网格组成，其单元格是使用 ListDataProvider 构建的。当用户单击按钮打印时，将构建要打印的小部件。完成后，我启动打印：

```
 Element element = widgetToPrint.getElement();
    String content = element.getInnerHTML();
    print(content);

    public static native boolean print(String content)
    /*-{
    var mywindow = window.open('', 'Printing', '');
    mywindow.document.write('<html><head><title>Test</title>');
    mywindow.document.write('<link rel="stylesheet" href="/public/stylesheets/ToPrintWidget.css" type="text/css" media="all"/></head><body>');
    mywindow.document.write(content);
    mywindow.document.write('</body></html>');
    mywindow.print();
    return true;
    }-*/; 
```

所以，这是我的问题：

此方法打开的窗口包含小部件的核心（由 UI Binder 构建），但缺少一些子...

如果我查看 ListDataProvider 及其相关的 FlowPanel，数据是一致的，即我的列表和 flowPanel 中有几个项目。

因此，它应该在打印窗口上可见......我认为问题可能与用于打印小部件的方法有关，所以我也尝试在启动打印之前将此小部件添加到对话框中，看看是否该小部件已正确构建...确实如此。

所以我的小部件在对话框上显示得很好，但是如果我尝试通过使用 getElement() 将其 innerHTML 提供给打印方法，一些小部件会丢失......我感觉应该在ListDataProvider 更改未在 DOM 中正确设置...当我将小部件添加到常规组件时它以某种方式工作，但是当我必须直接提供其 innerHTML 时它不起作用...

你有什么主意吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:56:36.047

小部件不仅仅是它们元素的总和，DOM 元素不仅仅是它们被序列化的字符串。小部件是元素，所有事件都下沉到 dom 以侦听用户的任何更改或交互。然后，元素具有回调函数或当用户与它们交互时调用的处理程序。

通过对元素进行序列化（即调用`getInnerHTML()`），您只是读出了 dom 的结构，而不是回调，而且还不是 CSS 设置的样式。可能不应该期望这可以正常工作，并且正如您的经验所证明的那样，事实并非如此。

由于这只是您尝试创建的打印窗口，因此事件处理可能不是问题。您只希望能够查看该组小部件中的内容，但不能与之交互。样式可能是这里的主要问题（尽管您的问题没有指定“缺少一些孩子”并没有告诉我们缺少什么，或者给我们更多关于为什么的线索......） - 您正在添加一个样式表在您的 JSNI 代码中，但 CellTable（我假设您正在使用它，因为您引用了 ListDataProvider）需要额外的 CssResource 实例才能正确显示。我不确定你如何劫持那些在新窗口中绘制。

你只是用它来打印内容，而不是让用户直接与数据交互吗？如果是这样，请考虑另一种方法 - 使用 SafeHtmlBuilder 创建一个巨大的、正确转义的内容字符串以在新窗口中绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:19:53.850

首先感谢您的回答，它帮助我解决了这个问题。我几乎解决了这个问题：

首先，我不再使用 ListDataProvider，因为我不清楚何时以及如何刷新视图。相反，我手动添加了我的小部件，这是有道理的，因为它们无论如何都不会移动。

然后，我使用通用 CSS 样式表定义小部件的样式。但是，为了做到这一点，我不能依赖 CssResource，这是我过去使用 GWT 的方式。我认为这来自被这种样式丢失的 JS 方法......相反，我必须在静态 CSS 样式表中指定所有内容，并将其提供给 JS。

它工作得非常好，即，我有我的小部件，有它们的样式，我可以打印它。

但是......一些小部件的颜色取决于它们所代表的对象的颜色。因此，我无法编写通用 CSS 样式表...正如我所说，我无法使用 CssResource 添加样式...您对处理该问题有什么想法吗？

为了确保我清楚我添加样式的方式，这里有一个例子：

```
 Label l = new Label("Here is a cell in my grid to be printed");
    l.addStyleName("PrintLineCell-kind_1"); 
```

在公共 CSS 样式表中：

```
 .PrintLineCell-kind_1{
        background-color: red;
    } 
```

我希望有更好的方法，而不是写 300 种样式来涵盖 300 种不同的颜色...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:16:16.220

您可能想要获取*外部 HTML*而不是*内部*HTML 。

不幸的是，GWT 没有`getOuterHTML`，但它比较容易*模仿*。

*   如果您的小部件是元素中唯一的子元素，则只需获取父元素的内部 HTML ( `w.getElement().getParentElement().getInnerHTML()`)
*   否则，克隆您的小部件的节点，将其添加到新创建的父元素中，您将能够从中获取内部 HTML：

    ```
    DivElement temp = Document.get().createDivElement();
    temp.appendChild(w.getElement().cloneNode(true));
    return temp.getInnerHTML(); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:36:00.117

```
String content = element.toString(); 
```

这将包括节点中的所有层次结构元素。

提醒一下，所有的 GWT 处理程序都不起作用，您必须使用 DOM 接收所有事件。

# linq - XElement.Nodes() 和类似方法不起作用

> ID：13692505
> 
> 赞同：1
> 
> 时间：2012-12-03T21:59:17.027
> 
> 标签：linq, windows-phone-7, xml-parsing

我是 Windows 手机开发的新手，目前我遇到了一个问题。我正在为 Windows Phone 应用程序使用 RESTful 服务，并且我成功地收到了如下所示格式的响应

```
 <StationsResp xmlns="http://www.wmata.com" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
 <Stations>
 <Station>
  <Code>A03</Code> 
  <Lat>38.9095980575</Lat> 
  <LineCode1>RD</LineCode1> 
  <LineCode2 i:nil="true" /> 
  <LineCode3 i:nil="true" /> 
  <LineCode4 i:nil="true" /> 
  <Lon>-77.0434143597</Lon> 
  <Name>Dupont Circle</Name> 
  <StationTogether1 /> 
  <StationTogether2 /> 
  </Station>
 <Station>
  <Code>A02</Code> 
  <Lat>38.9032019462</Lat> 
  <LineCode1>RD</LineCode1> 
  <LineCode2 i:nil="true" /> 
  <LineCode3 i:nil="true" /> 
  <LineCode4 i:nil="true" /> 
  <Lon>-77.0397008272</Lon> 
  <Name>Farragut North</Name> 
  <StationTogether1 /> 
  <StationTogether2 /> 
  </Station>
  </Stations>
  </StationsResp> 
```

我的 C# 代码在下面调用服务并存储此响应。

```
 private void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
        Uri uri = new Uri("http://api.wmata.com/Rail.svc/Stations?api_key=API_KEY_CODE_OMITTED_INTENTIONALLY");

            WebClient webClient = new WebClient();
            webClient.DownloadStringCompleted += OnDownloadStringCompleted;
            webClient.DownloadStringAsync(uri);
}

 void OnDownloadStringCompleted(object sender, DownloadStringCompletedEventArgs args)
        {

 XElement elm = XElement.Load(args.Result);

            var SearchResults = elm.Elements("Station");

} 
```

我的问题是最后一行。对象“榆树”具有上面发布的响应的值。但是，当我尝试使用任何方法查询对象 elm 时 [如 elm.Descendents()、elm.Elements()] 它不起作用。我的 Windows Phone 的 System.Xml.Linq 参考版本是 2.0.5.0。我还缺少其他东西吗？

以下是我收到的确切错误消息。

在监视窗口中，我看到对象 elm 中的值。但是 LINQ 查询 elm.Elements("Station") 出错了。错误消息是“System.Collections.IEnumerator.CurrentCould not evaluate expression”。

任何帮助是极大的赞赏。提前致谢。

# c# - 用于 Join 的 Linq 扩展方法

> ID：13692508
> 
> 赞同：2
> 
> 时间：2012-12-03T21:59:21.763
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我正在通过在线视频教程学习 LINQ、ASP.NET、EF 和 MVC。我希望能帮助我理解 LINQ 扩展方法语法中的联接。

为简化起见，我有两个表（这些表映射到 SQL DB）：

```
User Table:
    public int userID{get;set;}
    public string firstName{get;set;}
    ...

Address
    public int ownerID{get;set;}
    public int value{get;set;}
    public string Nickname{get;set;}
    public string street{get;set;}
    public string zip{get;set;}
    ... 
```

假设我想查找特定用户拥有的所有属性。我相信我可以做这样的事情：

```
var test = db.User
    .Join(db.Address, user => user.userID, add => add.ownerID, (user, add) => new { user, add });
Source: http://byatool.com/c/linq-join-method-and-how-to-use-it/ 
```

这应该相当于

```
SELECT * FROM User a JOIN Address b on a.userID = b.ownerID 
```

请确认这是正确的。

现在，如果我想查找特定用户拥有的所有具有`value greater than x`. 让我们更进一步，说 x 是另一个 LINQ 查询的结果。如何强制执行`x`第二个查询？我什至必须考虑这一点，还是 LINQ 知道在这种情况下该怎么做？

谢谢

编辑：当我尝试将查询结果用作另一个参数时，我需要使用贪婪运算符来强制执行。很多人喜欢用`.Count()`or `.ToList()`。我只希望`x`（从上面的示例）通过使用返回 1 个字符串`.Take(1)`。如果我追加`ToList()`到我的第一个查询的末尾，我需要在我的第二个查询中使用 x[0]。这似乎是一种混乱的做事方式。当您知道只有 1 个结果时，是否有更好的方法来强制执行查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T23:00:48.207

如果我理解您的问题，您是否正在尝试以连接模型为条件？

```
var query = db.Users.Where(x => x.Addresses.Where(y => y.Value >= yourValue).Any()); 
```

这将返回属性值大于 的所有用户`yourValue`。如果您需要在查询中返回地址，您可以添加`Include`到您的查询中。例如：

```
query.Include(x => x.Addresses); 
```

您无需手动执行`Join`示例中的操作。

# java - Jackrabbit 更新或合并节点

> ID：13692511
> 
> 赞同：3
> 
> 时间：2012-12-03T21:59:33.707
> 
> 标签：java, jackrabbit, jcr

我已经向 jackrabbit 用户列表发送了相同的消息，但没有人回复我。

我想用 Jackrabbit 2.4.3 throw jackrabbit-jcr2dav 更新一个节点和他的孩子。（如合并：更新、创建或删除节点）。

但是当我更新存储库中已经存在的属性时，我在日志中有一个错误，并且没有保存任何内容。这不是一个例外，只是一个错误。

[错误] org.apache.jackrabbit.jcr2spi.hierarchy.ChildNodeEntriesImpl:176 - ChildInfo 迭代器包含多个具有相同名称|索引或唯一 ID 的条目 -> 忽略 ChildNodeInfo。

我的代码：

存储库存储库 = JcrUtils.getRepository(jcrUrl); 会话会话 = repository.login(new SimpleCredentials("admin", "admin".toCharArray()));

```
 try { 
        String user = session.getUserID(); 
        String repositoryname = repository.getDescriptor(Repository.REP_NAME_DESC); 
        LOGGER.debug( "Logged in as " + user + " to a " + repositoryname + " repository.");

        // Retrieve content 
        StringBuilder expression = new StringBuilder();
        expression.append("SELECT * FROM [nt:unstructured] AS mynode ");
        expression.append("WHERE id = "+ mynode.getId() +" " );

        QueryManager queryMgr = session.getWorkspace().getQueryManager();
        Query query = queryMgr.createQuery(expression.toString(),Query.JCR_SQL2);
        QueryResult result = query.execute();
        RowIterator rowIterator = result.getRows();

        if (rowIterator.hasNext() ) {
            Node node = rowIterator.nextRow().getNode();

            // Store metadata content 
            node.setProperty("description", mynode.getDescription());
            node.setProperty("keywords", mynode.getKeywords());
            node.setProperty("title", mynode.getTitle());   // ERROR IN THE LOG AT THIS LINE because description and keywords doesn't exist, but title already exist.
            node.setProperty("resume", mynode.getResume()); 

            [... updating childs node here ]

            session.save(); 

        }
    } catch ( RepositoryException e) {
        LOGGER.error("Error getting data", e);
        throw e;
    } finally { 
        session.logout(); 
    }
    return book;
} 
```

是否有人已经尝试更新节点属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:04:19.737

最后，我确认同一个父节点下的两个节点应该具有相同的名称。这就是为什么我有这个错误。如果没有相同的名称，我的代码可以正常工作。

# javascript - 文件无法识别但在同一文件夹中

> ID：13692514
> 
> 赞同：1
> 
> 时间：2012-12-03T22:00:03.237
> 
> 标签：javascript, html, css, anchor

我的模板文件夹中有三个文件，其中还有我的 main.html 文件。但是，当我加载 html 文件时，我收到这 3 个文件的 404 错误。这就是我将它们包含在 html 头部的方式：

```
<script type="text/javascript" src="date.js"></script>
<script type="text/javascript" src="daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="daterangepicker.css" /> 
```

它们都位于与我的 main.html 相同的文件夹中的模板文件夹中。

为什么他们不被认可？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T22:09:40.983

您的本地路径未正确解析。在没有看到您的目录结构的情况下，我无法确切地说出哪里出了问题——我对在哪里以及在哪里感到有些`main.html`困惑`base.html`。

如果`main.html`是在浏览器中加载的文件，则您的`script`源应基于该目录。如果您的模板目录（我们将其称为“模板”）是`main.html`所在目录的子目录，则您需要：

```
<script type="text/javascript" src="templates/date.js"></script>
<script type="text/javascript" src="templates/daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="templates/daterangepicker.css" /> 
```

或者，您可以将整个 URL 解析为适当的路径：

```
<script type="text/javascript" src="http://www.myurl.com/templates/date.js"></script> 
```

# jquery - 在选择时，动态填充 textarea — jQuery

> ID：13692518
> 
> 赞同：1
> 
> 时间：2012-12-03T22:00:18.550
> 
> 标签：jquery, forms, wordpress, gravity

我正在使用 WordPress 的 Gravity Forms 插件，并且试图让其中一个选择菜单动态更新文本区域中的文本。我对 jQuery 很陌生，我非常感谢一些帮助理解如何使我的代码工作。

```
<script type="text/javascript"> 
    $(document).ready(function() {

        $('#input_27').change(function() {
            var divetext = $('#input_27').val();
            var divewords = '';
            if (divetext == 'Standard') {
            divewords = 'All Ye Surface Sailors, aviators, fossil-fuelers, landlubbers, and other innocents Know ye and Mark ye that from (date) to (date) the inner depths of my subaqueous realm were visited by a very large black denizen.  On careful examination by my mermaids this great black fish was identified as (Name of submarine). I am informed that among the distinguished on board at that time was (Recipient name). By this my decree, this Submariner is awarded and shall bear in perpetuity the honored title of Deep Diver and shall be accorded all the perquisites and privileges that befit this exalted status.';
            }
            else if (divetext == '1st Dive') {
            divewords = 'All Ye Surface Sailors, aviators, fossil-fuelers, landlubbers, and other innocents Know ye and Mark ye that from (date) to (date) the inner depths of my subaqueous realm were visited by a very large black denizen.  On careful examination by my mermaids this great black fish was identified as (Name of submarine). I am informed that among the distinguished on board for their 1st Dive was (Recipient name). By this my decree, this Submariner is awarded and shall bear in perpetuity the honored title of Deep Diver and shall be accorded all the perquisites and privileges that befit this exalted status.';
            }
            else if (divetext == 'Last Dive') {
            divewords = 'All Ye Surface Sailors, aviators, fossil-fuelers, landlubbers, and other innocents Know ye and Mark ye that from (date) to (date) the inner depths of my subaqueous realm were visited by a very large black denizen.  On careful examination by my mermaids this great black fish was identified as (Name of submarine). I am informed that among the distinguished on board for their last time was (Recipient name). By this my decree, this Submariner is awarded and shall bear in perpetuity the honored title of Deep Diver and shall be accorded all the perquisites and privileges that befit this exalted status.';
            }
            else if (divetext == 'Honorary Submariner') {
            divewords = 'All Ye Surface Sailors, aviators, fossil-fuelers, landlubbers, and other innocents Know ye and Mark ye that from (date) to (date) the inner depths of my subaqueous realm were visited by a very large black denizen.  On careful examination by my mermaids this great black fish was identified as (Name of submarine). I am informed that among the distinguished on board at that time was (Recipient name). By this my decree, this Submariner is awarded and shall bear in perpetuity the honored title of Deep Diver and shall be accorded all the perquisites and privileges that befit this exalted status.';
            }
            else {
            divewords = 'All Ye Surface Sailors, aviators, fossil-fuelers, landlubbers, and other innocents Know ye and Mark ye that from (date) to (date) the inner depths of my subaqueous realm were visited by a very large black denizen.  On careful examination by my mermaids this great black fish was identified as (Name of submarine). I am informed that among the distinguished on board at that time was (Recipient name). By this my decree, this Submariner is awarded and shall bear in perpetuity the honored title of Deep Diver and shall be accorded all the perquisites and privileges that befit this exalted status.';
            }
            $("#input_20").val(divewords);    
        });​
    });
</script> 
```

（代码也在： http: [//pastie.org/pastes/5476003](http://pastie.org/pastes/5476003)）

input_27 — 选择菜单的 ID。input_20 — 文本区域的 ID。

简而言之，我希望 textarea 中的语言根据他们从下拉列表中选择的项目而改变。

提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:17:24.743

请试试这个。

请替换此代码：

```
var divetext = $('#input_27').val(); 
```

至

```
var divetext = $('#input_27:selected').text(); 
```

# python - 运行多个python的linux bash脚本

> ID：13692519
> 
> 赞同：18
> 
> 时间：2012-12-03T22:00:27.233
> 
> 标签：python, linux, bash

我有 2 个 python 脚本 a.py 和 b.py，我想编写一个 bash 脚本来加载 a.py 并且在 a.py 完成之前不运行 b.py。简单地说

```
#!/usr/bin/env bash
python a.py
python b.py 
```

但这很天真，检查 a.py 是否完成......我该怎么做？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-03T22:03:05.773

默认情况下，这将一个接一个地运行。

* * *

要检查是否`python a.py`已成功完成作为运行的必需条件`python b.py`，您可以执行以下操作：

```
#!/usr/bin/env bash
python a.py && python b.py 
```

* * *

相反，尝试运行，如果没有成功终止`python a.py`，则只运行'python b.py' ：`python a.py`

```
#!/usr/bin/env bash
python a.py || python b.py 
```

* * *

要与后台进程同时运行它们：

```
#!/usr/bin/env bash
python a.py &
python b.py & 
```

* * *

（回应评论） - 您可以将其链接到一行中的多个命令，例如：

```
python a.py && python b.py && python c.py && python d.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:55:04.890

```
prompt_err() { 
```

`echo -e "\E[31m[ERROR]\E[m"`

`}`

`prompt_ok() {`

`echo -e "\E[32m[OK]\E[m"`

`}`

`status() {`

`if [ $1 -eq 0 ]; then`

`prompt_ok`

`else` `prompt_err`

`exit -1`

`fi`

`}`

`a.py`

`status`

`b.py`

您可以使用上面的校验码。

如果“a.py”仅完成，那么它将处理“b.py”，否则它将以“错误”退出。

# multithreading - 等待 IdThreadComponent 在程序退出时完成

> ID：13692521
> 
> 赞同：0
> 
> 时间：2012-12-03T22:00:31.093
> 
> 标签：multithreading, delphi, c++builder, indy

我正在尝试利用共享函数（在主线程中）并从 3 个线程中使用它。该函数将执行一些可能冗长的操作，例如磁盘写入，为了避免可能出现的问题，我将其锁定。我使用印地`IdThreadComponent`和`TCriticalSection`. 这是它的外观：

```
//---------------------------------------------------------------------------
// In header file
//---------------------------------------------------------------------------
boost::scoped_ptr<TCriticalSection> csShared;

//---------------------------------------------------------------------------
// Main file
//---------------------------------------------------------------------------

__fastcall TForm1::TForm1(TComponent* Owner) : TForm(Owner)
{
csShared.reset(new TCriticalSection);
}
//---------------------------------------------------------------------------
void __fastcall TForm1::SharedFunction(UnicodeString TextData)
{
try
    {
    csShared->Enter();           // As suggested by Remy this is placed incorrectly and needs to be moved outside of try block
    //Memo1->Lines->Add(TextData); // [EDIT] calling this within thread is wrong
    Sleep(2000);
    }
__finally
    {
    csShared->Leave();
    }
}
//---------------------------------------------------------------------------
void __fastcall TForm1::IdThreadComponent1Run(TIdThreadComponent *Sender)
{
SharedFunction("Thread 1 calling");
IdThreadComponent1->Stop();
}
//---------------------------------------------------------------------------
void __fastcall TForm1::IdThreadComponent2Run(TIdThreadComponent *Sender)
{
SharedFunction("Thread 2 calling");
IdThreadComponent2->Stop();
}
//---------------------------------------------------------------------------
void __fastcall TForm1::IdThreadComponent3Run(TIdThreadComponent *Sender)
{
SharedFunction("Thread 3 calling");
IdThreadComponent3->Stop();
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Button1Click(TObject *Sender)
{
IdThreadComponent1->Start();
IdThreadComponent2->Start();
IdThreadComponent3->Start();
}
//---------------------------------------------------------------------------
void __fastcall TForm1::FormCloseQuery(TObject *Sender, bool &CanClose)
{
// Note - these 3 Stop() calls are used if threads are set to run infinitely
// But in this example it is not needed as they stop themselves
//IdThreadComponent1->Stop();
//IdThreadComponent2->Stop();
//IdThreadComponent3->Stop();

// Now wait for lock to be released [WRONG - COMMENTED IN EDIT]
//while (!csShared->TryEnter())
//  {
//  Sleep(500);
//  }
//csShared->Leave();

// [EDIT v1] easier and faster way to wait than above
//csShared->Enter();
//csShared->Leave();

// [EDIT v2] block exit until all threads are done
while (IdThreadComponent1->Active || IdThreadComponent2->Active || IdThreadComponent3->Active)
{
Sleep(200); // make wait loop less CPU intensive
};

CanClose = true;
}
//--------------------------------------------------------------------------- 
```

问题：

~~- 如果我快速关闭窗口（只有一个线程执行该函数，它永远不会离开程序 - 永远等待，并且在调试器中只有第一个线程退出，其他两个不退出）。我正在使用 OnCloseQuery 事件来检查线程是否已完成。我做错了什么？~~

[编辑]`Memo1->Lines->Add(TextData);`按照大卫赫弗南评论中的建议删除后，它正确退出，因此这部分问题得到解决，以下内容仍然存在：

*   像上面那样在共享函数内部调用是否可以`csShared->Enter();`，或者我必须在每个线程中调用它外部，如下所示：

    ```
    void __fastcall TForm1::IdThreadComponent1Run(TIdThreadComponent *Sender)
    {
    csShared->Enter();
    SharedFunction("Thread 1 calling");
    csShared->Leave();
    IdThreadComponent1->Stop();
    } 
    ```

*   这比上面的版本更好吗（`csShared->Enter();`在函数本身内调用）？还是一样？两个版本似乎都可以正常工作，我想知道是否有区别，因为第一个版本更干净。

如果您想知道，我不需要`Synchronize`，这将用于磁盘写入而不是用于更新 VCL，因此上述 SharedFunction 仅用于示例目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:43:29.013

将调用放在共享函数内部是很好的，甚至是可取的`Enter()`。`Leave()`但是，如果你要使用`try/__finally`那么你需要把它放在`Enter()`外面`try`，以防它失败。你不想做`Leave()`一些你没有成功的事情`Enter()`，例如：

```
void __fastcall TForm1::SharedFunction(UnicodeString TextData)
{
    csShared->Enter();
    try
    {
        //...
        Sleep(2000);
    }
    __finally
    {
        csShared->Leave();
    }
}

void __fastcall TForm1::IdThreadComponent1Run(TIdThreadComponent *Sender)
{
    SharedFunction("Thread 1 calling");
    IdThreadComponent1->Stop();
} 
```

由于您无论如何都在使用 Boost，因此您应该使用它自己的类`mutex`和`lock`类，那么您不必担心`try/__finally`,`Enter()`或根本不用担心`Leave()`，例如：

```
#include <boost/thread/recursive_mutex.hpp>
#include <boost/thread/locks.hpp>

boost::recursive_mutex mutex;

void __fastcall TForm1::SharedFunction(UnicodeString TextData)
{
    boost::lock_guard<boost::recursive_mutex> lock(mutex);
    //...
    Sleep(2000);
} 
```

至于`TMemo`访问，使用`TIdSync`or`TIdNotify`类以线程安全的方式执行该代码，例如：

```
#include <IdSync.hpp>

class TMemoNotify : public TIdNotify
{
protected:
    String TextData;

    void __fastcall DoNotify()
    {
        Form1->Memo1->Lines->Add(TextData);
    }

public:
    __fastcall TMemoNotify(const String &ATextData) : TextData(ATextData) {}
};

void __fastcall TForm1::SharedFunction(UnicodeString TextData)
{
    ...
    (new TMemoNotify(TextData))->Notify(); // TIdNotify is self-freeing
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T23:05:23.480

> 我正在尝试利用共享函数（在主线程中）并从 3 个线程中使用它。

*方法或过程（通常是一段代码）本身*不属于线程。任何一段代码都可能被应用程序中的任何线程调用，如果以并发方式从不同线程调用，它可以同时运行多次。

例如

```
procedure A();
begin
  //do some work.
end; 
```

你可以有这样的执行：

```
main thread
     |
  SomeFunc();
     |
     |      spawns
     |     thread X  
     |---------|
     |         |
     |         |
     |      OtherF()
    A()        |
     |         |   spawns thread Y
     |         |-------------|
     |        A()            |
     |         |             |
     |         |            A()
     |         |             | 
     |         |             |
  t1>|         |             |
     |         |             |
   A returns   |             |
    B()        |             |
     |         |             |
  t2>|         |             |
     |         |             |
     |        A returns      |
     |        thread end     |
     |                       |
     |                       |
  t3>|                       |
     |                      A returns
     |                      thread end
     |
   program end 
```

在 t1，3 个不同的线程正在运行函数 A()，在 t2，2 个线程仍在运行它（X 和 Y），在 t3 只有一个线程执行该函数（线程 Y）。

> 调用 csShared->Enter(); 可以吗？在上面的共享函数内部还是我必须在每个线程中调用它外部，如下所示：

这取决于你。您必须定义在哪里调用它，因为您有责任定义哪些代码必须仅在一个线程的上下文中运行，而其他代码将等待它完成开始（串行执行）。

*   如果要*序列化*整个函数体，我认为最好将关键部分 Enter 放在函数内（作为第一行），因为恕我直言，这会导致调用站点中的代码更清晰，同时确保您不会忘记在调用函数之前进入临界区。
*   如果函数调用是更复杂操作的一部分，则必须在该操作开始时调用 CriticalSection 输入，显然是在函数体之外。
*   函数的某些部分也可以并行运行，因此您必须支持并发并仅在函数内部需要时调用 CriticalSection.Enter。

请记住，每个关键部分都是瓶颈。一个故意的，但你必须谨慎使用它以避免在不需要的地方引入等待。

# sql - RANK() OVER 忽略相等的等级

> ID：13692522
> 
> 赞同：0
> 
> 时间：2012-12-03T22:00:31.663
> 
> 标签：sql, sql-server-2008

我有这个查询

```
SELECT
patientid, 
practiceid,
visitcount
  FROM
    (       
        SELECT 
          patientid, 
          practiceid ,
          visitcount,
          RANK() OVER (PARTITION BY patientid ORDER BY visitcount DESC) as Rank
        FROM
            aco.patients_practices
    WHERE practiceid in (select id from aco.practices where parentaco = 30982) and isprimary = 0
    ) AS A
WHERE
    Rank = 1 
```

以下是一些结果

```
patientid practiceid 就诊次数
157053 30976 6
158463 30974 2
187772 30973 15
187797 30971 1
187797 30975 1

```

请注意，最后 2 个患者 ID 是相同的，并且访问次数相同，因此排名相同。如何从输出中完全省略这些具有相同等级的记录？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:05:31.533

您可以通过计算它们并将它们包含在`where`子句中来消除它们。以下查询使用类似于排名的逻辑对它们进行计数——患者具有相同就诊次数的次数：

```
SELECT patientid, practiceid, visitcount
FROM (SELECT patientid, practiceid, visitcount,
             RANK() OVER (PARTITION BY patientid ORDER BY visitcount DESC) as Rank,
             COUNT(*) over (PARTITION by patientid, visitcount) as RankCount
      FROM aco.patients_practices
      WHERE practiceid in (select id from aco.practices where parentaco = 30982) and isprimary = 0
     ) A
WHERE Rank = 1 and RankCount = 1 
```

我确实注意到最后两条记录中的 practiceid 不同。不过，您似乎仍然想消除两者。

# c# - 根据 C# 中输入的日期范围提取一组周

> ID：13692523
> 
> 赞同：1
> 
> 时间：2012-12-03T22:00:31.537
> 
> 标签：c#, asp.net, datetime

我最终为我们生产的软件的客户定制了许多基于 Web 的报告，而且我对开发还比较陌生，所以我遇到了一个不知道如何处理的有趣问题。我已经制定了具体细节，但我确信有更好的方法来处理这个问题，如果有人遇到这个问题，我希望能够分享我今天早上的工作结果。我渴望成为社区中富有成效的成员，但也愿意接受有关我的问题/答案/方法等的任何反馈。

生成报告并且允许用户给出开始和结束日期，但是在报告的整个生成过程中，日期范围可能意味着多种情况。在报告的一个部分中，输入的日期范围会拉出该范围内的月份，这很容易从 DateTime 字符串中拉出，分成可管理的块。在其他领域，该范围被视为这样，并且提取的数据在该范围内聚合。我遇到的挑战是报告的一个部分，其中数据是基于周聚合的，因此报告的呈现方式显示每周（1901 年 1 月 1 日 - 1901 年 1 月 7 日），并且所有相关数据列都紧随其后选定日期范围内受影响的周数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:00:31.537

我为缓解这个问题所做的是获取给定的日期，然后使用内置的 DateTimeFormat.FirstDayOfWeek 计算出一周中“第一”天的日期，然后确定该周结束的日期加上六个日期，将日期作为开始和结束提交到数据表，然后添加一个以将日期推送到下一周。

另外，为了确保集合有一个结束，我将输入的结束日期与计算出的那一周的结束日期进行比较，最终这些日期的减法将以负数或零结束，这表示输入的结束日期在一周内刚刚提交给DataTable。我确信有更好的方法可以做到这一点，但它仍然有效。我希望这至少可以为一个人节省 20 分钟的时间。谢谢！

```
String sBeginDate = "";//Given in input
String sEndDate = "";//Given in input
DateTime weekStartDate;
DateTime weekEndDate;
DataTable dtWeeksInRange = new DataTable();                
DataColumn dcWeekStart = new DataColumn("WeekStart");
DataColumn dcWeekEnd = new DataColumn("WeekEnd");        
dtWeeksInRange.Columns.Add(dcWeekStart);
dtWeeksInRange.Columns.Add(dcWeekEnd);
DayOfWeek firstday = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.FirstDayOfWeek;        
     weekStartDate = Convert.ToDateTime(sBeginDate) ;

    do
    {            

      while (weekStartDate.DayOfWeek != firstday) 
           { 
              weekStartDate = weekStartDate.AddDays(-1); 
           }
        weekEndDate = weekStartDate.AddDays(6);
        dtWeeksInRange.Rows.Add(weekStartDate, weekEndDate);
        weekStartDate = weekEndDate.AddDays(1);            
    }
      while ((Convert.ToDateTime(sEndDate).Subtract(weekEndDate)).Days > 0);

foreach (DataRow dr in dtWeeksInRange.Rows)
    {
      //Outputting the set of dates to the page
        Response.Write(Convert.ToDateTime(dr["WeekStart"]).ToShortDateString() + 
        " - " + 
        Convert.ToDateTime(dr["WeekEnd"]).ToShortDateString() + 
        "<br />");
    } 
```

# wcf - 需要集成测试 ServiceSecurityContext 虚假策略

> ID：13692525
> 
> 赞同：0
> 
> 时间：2012-12-03T22:00:40.213
> 
> 标签：wcf, unit-testing, authentication, mocking, basic-authentication

我有一个使用 HTTP+SSL 进行身份验证的 WCF 服务。我现在正在编写实例化实际服务类并进行调用的集成测试（Visual Studio 2012 单元测试项目）。

问题出现在 WCF 服务方法的第一行：

var userName = ServiceSecurityContext.Current.PrimaryIdentity.Name;

因为单元测试项目没有通过 HTTP 进行调用。

任何人都可以推荐一种模拟/存根上下文以使身份验证起作用的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:35:58.637

我能够与 Telerik JustMock 一起工作。我开始沿着城堡路走，但没有那么幸运。无论如何，为了未来的后代：

```
var username = "me";
var param1 = "oneoneone";
var param2 = @"stuffstuffstuff";
var conmock = Mock.Create<ServiceSecurityContext>( Constructor.Mocked );
var perinstance = new MyWcfService();
Mock.Arrange( () => ServiceSecurityContext.Current ).IgnoreInstance().Returns( conmock );
Mock.Arrange( () => conmock.PrimaryIdentity.Name ).Returns( username );
var something = perinstance.SubmitRequest( param1 , param2 );
Assert.AreEqual( something , somethingelse ); 
```

# svg - Raphael 没有添加 id 和 data 属性

> ID：13692530
> 
> 赞同：1
> 
> 时间：2012-12-03T22:00:48.170
> 
> 标签：svg, raphael

希望有人有答案，因为查看文档中的示例代码和“免费图标”脚本我只是看不出这是如何工作的。

我的问题是我正在尝试创建一个无檐小便帽（帽子）。这个豆豆由许多不同的部分组成，我将它们存储在一个名为“豆豆”的变量中，如下所示：

```
beanie = {
  section1: "PATH CO-ORDINATES",
  section2: "PATH CO-ORDINATES",
  section3: "PATH CO-ORDINATES"
}; 
```

基本上与前面提到的“免费图标”的完成方式相同。然后，我遍历了所有部分，并在纸上创建了每个部分，如下所示：

```
for (var section in beanie) {
  activeSection = beanieWindow.path(beanie[section]).attr({
    'fill': '#ffffff',
    'stroke': 'none'
  })
  .data('section', beanie[section])
  .click(function () {
    makeActiveSection(this);
  })
  .hover(
    function () {
      this.attr('stroke', 'red');
    },
    function () {
      this.attr('stroke', 'none');
    }
  );
} 
```

这一切都非常有效，但是在检查路径时没有添加数据部分属性 - 甚至没有 Neil 在他对[Raphael 的回答中提到的“id”属性，在分配数据后，我无法得到](https://stackoverflow.com/questions/13249681/raphael-after-assigning-data-i-am-not-able-to-get-it)它id 由 Raphael 提供。

不知道我是否遗漏了一些明显的东西，但如果我是，我就是看不到它：-/

任何帮助将非常感激！

在此先感谢，垫

# r - 如何跨运行应用函数

> ID：13692532
> 
> 赞同：2
> 
> 时间：2012-12-03T22:01:01.020
> 
> 标签：r, function, plyr, apply

> **可能重复：**
> [R 分组函数：sapply vs. lapply vs. apply。vs. tapply vs. by vs. aggregate vs](https://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega)

我有一个模型输出文件，如下所示：

```
run step x
1    1    1
1    2    4
1    3    3
1    1    4 
1    2    5
1    3    6
2    1    5
2    2    4
2    3    7
2    1    3 
```

. . . 我需要根据运行号计算每个步骤的平均值。我该怎么做？非常感谢任何可以帮助我的人。中提琴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:05:50.070

如果我理解正确，这可以使用 plyr 包中的 ddply 来完成：

```
require(plyr)
ddply(model_output, .(run, step), summarise, mn = mean(x)) 
```

`model_output`您从文件中读取的模型输出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:16:45.123

或基本 R 版本：

```
aggregate(test["x"],test[c("run","step")],mean)

  run step   x
1   1    1 2.5
2   2    1 4.0
3   1    2 4.5
4   2    2 4.0
5   1    3 4.5
6   2    3 7.0 
```

# automapper - 为什么在使用 Condition 时会出现“可空对象必须有值”异常？

> ID：13692533
> 
> 赞同：3
> 
> 时间：2012-12-03T22:01:02.460
> 
> 标签：automapper

在下面的示例代码中，我得到一个“可空对象必须有一个值”。为什么我需要以下修复来完成这项工作：

```
.ForMember(dest => dest.ShirtColor,
           dest => dest.MapFrom(src => src.ShirtColor != null
                                       ? new OptionSetValue((int) src.ShirtColor)
                                       : null)) 
```

```
AutoMapper.Mapper.CreateMap<PersonA, PersonB>()
    .ForMember(dest => dest.FirstName, dest => dest.MapFrom(src => src.FirstName))
    .ForMember(dest => dest.LastName, dest => dest.MapFrom(src => src.LastName))

    // Condition to avoid overwriting existing data!!!
    .ForMember(dest => dest.ShirtColor,
               dest => dest.Condition(src => src.ShirtColor != null))
    .ForMember(dest => dest.ShirtColor,
               dest => dest.MapFrom(
                   src => new OptionSetValue((int)src.ShirtColor)))
    // Fix that should not be needed due to condition:
    //.ForMember(dest => dest.ShirtColor,
    //           dest => dest.MapFrom(
    //               src => src.ShirtColor != null
    //                      ? new OptionSetValue((int) src.ShirtColor)
    //                      : null));

PersonA source = new PersonA();
source.FirstName = "Thomas";
source.LastName = "Jefferson";
source.ShirtColor = null;  // nullable int

PersonB destination = new PersonB();
destination.FirstName = "Thomas";
destination.LastName = "Jefferson";
destination.ShirtColor = new OptionSetValue(4);

// Results in: "Nullable object must have a value" despite the fact that
// condition should have been met!
Mapper.Map<PersonA, PersonB>(source, destination);

Debug.Assert(destination.ShirtColor != null);
Console.WriteLine("Our existing data was not overwritten!!");

Console.WriteLine("Hit enter to exit");
Console.ReadLine(); 
```

下面是 OptionSet 的定义方式： public class OptionSetValue { public OptionSetValue(){}

```
 public OptionSetValue(int value)
    {
        Number = value;
    }

    public int Number { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-19T14:15:02.567

只需使用`PreCondition`而不是`Condition`..

所以改变你的

```
//Condition to avoid overwriting existing data!!!
.ForMember(dest => dest.ShirtColor, dest => dest.Condition(src => src.ShirtColor != null))
    .ForMember(dest => dest.ShirtColor, dest => dest.MapFrom(src => new OptionSetValue((int)src.ShirtColor))) 
```

至

```
//Condition to avoid overwriting existing data!!!
.ForMember(dest => dest.ShirtColor, dest => dest.PreCondition(src => src.ShirtColor != null))
    .ForMember(dest => dest.ShirtColor, dest => dest.MapFrom(src => new OptionSetValue((int)src.ShirtColor))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T22:20:42.123

你需要改变

```
.ForMember(dest => dest.ShirtColor,
           dest => dest.Condition(src => src.ShirtColor != null)) 
```

至

```
.ForMember(dest => dest.ShirtColor,
           opt => opt.Condition(src => !src.IsSourceValueNull)) 
```

请注意，您也不需要以下内容，因为它们是按约定映射的：

```
.ForMember(dest => dest.FirstName, opt => opt.MapFrom(src => src.FirstName))
.ForMember(dest => dest.LastName, opt => opt.MapFrom(src => src.LastName)) 
```

* * *

**更新 - 2**

问题与条件和映射没有结合的事实有关。我创建了一个简单的扩展方法来允许它。

这是一个测试来证明它

**课程**

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class PersonA : Person
{
    public int? ShirtColor { get; set; }
}

public class PersonB : Person
{
    public OptionSetValue ShirtColor { get; set; }
}

public class OptionSetValue
{
    public int OptionSet { get; set; }
} 
```

**映射配置**

```
public class MyProfile : Profile
{
    protected override void Configure()
    {
        Mapper.CreateMap<PersonA, PersonB>()
              .ForMember(dest => dest.ShirtColor,
                         opt => opt.ConditionallyMapFrom(
                             src => new OptionSetValue
                                 {
                                     OptionSet = src.ShirtColor.Value
                                 },
                             src => src.ShirtColor.HasValue));
    }
}

public static class AutoMapperExtensions
{
    public static void ConditionallyMapFrom<TSource, TMember>(
                         this IMemberConfigurationExpression<TSource> expression,
                         Expression<Func<TSource, TMember>> sourceMember,
                         Func<TSource, bool> condition)
    {
        expression.Condition(condition);
        expression.MapFrom(sourceMember);
    }
} 
```

**单元测试**

```
[TestFixture]
public class MappingTests
{
    [Test]
    public void AutoMapper_Configuration_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<MyProfile>());
        Mapper.AssertConfigurationIsValid();
    }

    [Test]
    public void AutoMapper_ClientMapping_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<MyProfile>());
        Mapper.AssertConfigurationIsValid();

        var source = new PersonA
            {
                FirstName = "FirstA",
                LastName = "LastA",
                ShirtColor = null
            };

        var destination = new PersonB
            {
                FirstName = "FirstB",
                LastName = "LastB"
            };

        destination = Mapper.Map(source, destination);

        Assert.That(destination, Is.Not.Null);
        Assert.That(destination.FirstName, Is.EqualTo("FirstA"));
        Assert.That(destination.LastName, Is.EqualTo("LastA"));
        Assert.That(destination.ShirtColor, Is.Null);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-25T09:47:21.193

只需将其转换为可为*空* `int`的：

```
.ForMember((destination)         => destination.ShirtColor,
           (memberConfiguration) => memberConfiguration.MapFrom((source) => (int?)source.ShirtColor)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T09:27:45.423

可能会帮助某人。

当有一个代码试图解析 automapper 中无效值的枚举时，我遇到了这个异常。

我也觉得其他人可能的情况可能是您正在根据您在 automapper 中的逻辑创建一个异常。

```
Mapper.CreateMap<Data.Employee, Domain.Entities.Employee>().
      .ForMember(dest => dest.EmployeeType, opt => opt.MapFrom(src =>(EmployeeTypeEnum)src.EmployeeTypeId))  
  // if the EmployeeTypeId has an invalid value which does not match the enum values we get exception 
```

# java - 使用 Java 创建一个新的本地数据库

> ID：13692538
> 
> 赞同：2
> 
> 时间：2012-12-03T22:01:20.287
> 
> 标签：java, sql, database, local, embedded-database

我的目标是创建一个可以用 Java 读写的本地数据库。我在使用 Python 操作本地 sqlite 数据库以及通过 VB.Net 与 Microsoft Azure 上现有的网络数据库进行交互方面有一些经验，但是用于创建数据库的 Java 公式让我无法理解。

大多数来源（如[JDBC Docs](http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/connection.html#996856)）似乎都假设您正在通过网络协议或托管在 localhost 上的数据库访问数据库。我想要的实现是创建数据库并将其存储在一个文件（或文件集合）中，以便可以在本地存储和访问它，而无需网络连接（可能通过“文件：”协议）。

[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html)看起来在我启动并运行后会非常有用，但目前超出了我的范围，因为我什至还没有现有的数据库。

[许多](https://stackoverflow.com/a/6922609/1040915) [消息来源](https://stackoverflow.com/a/6524141/1040915)都提出了 H2、MySQL、Derby 或 Hypersonic DB 等解决方案。但是，出于多种原因，我不愿意安装扩展程序（如果这是正确的术语）：

*   这个项目最初是为了帮助我了解 Java ——扩大项目范围会削弱我对“基础”语言的经验，并且可能会增加从事“货物崇拜编程”的诱惑
*   如果这个项目真的被分发给其他用户（诚然不太可能，但仍然如此！），我不想强​​迫他们安装更多的 Java 核心。
*   我根本不知道如何在 Java 中安装扩展（附加组件？模块？）——一次一步！

出于类似的原因，安装 Microsoft SQL Server 不会有成效。

[这个](https://stackoverflow.com/a/717451/1040915)答案看起来接近我的目标；但是，它给出了错误：

```
java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/?user=root&password=rootpassword 
```

并尝试“jdbc:file://targetFile.sql”会给出类似的错误。

我见过术语“嵌入式”数据库，我认为它是“本地数据库”的子集（即本地数据库存储在同一系统上 - 嵌入式数据库是仅由单个应用程序使用的本地数据库） - 如果我的定义有误，请随时纠正我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T22:24:34.377

最有可能的是，您收到错误的原因是您在实际使用它来建立连接之前没有注册驱动程序（使用反射......）等。

大概你会想做一些类似的事情`Class.forName("driver")`

然后在必要时进行转换，然后在调用该`getConnection()`方法之前将其注册到 DriverManager 中。

这是一个非常有用的链接，可以帮助您解决问题：

[http://www.kfu.com/~nsayer/Java/dyn-jdbc.html](http://www.kfu.com/~nsayer/Java/dyn-jdbc.html)

但是，如果你真的想使用本地数据库/文件，你可能想看看 SQLite，这可能是一种方法，尽管我建议使用 MySQL 方法，因为它更容易配置并了解事物如何与 JDBC 一起工作。

如果您仍在考虑使用 SQLite，请查看：

[Java 和 SQLite](https://stackoverflow.com/questions/41233/java-and-sqlite)

我看到您在将外部 .jar 文件导入您的代码时需要一些指导（例如，您将用于 JDBC 驱动程序的第三方库）。您是在使用 IDE（例如 Eclipse、Netbeans 等）还是在文本编辑器中编写并手动编译？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-08T12:19:52.563

最近出现了一些嵌入式纯Java数据库，它们的接口非常简单，通常只是`java.util.Map`，不涉及使用JDBC或其他SQL工件，并将它们的数据存储在单个文件或目录中：

*   [编年史地图](https://github.com/OpenHFT/Chronicle-Map)
*   [JetBrains Xodus](https://github.com/JetBrains/xodus)
*   [地图数据库](https://github.com/jankotek/mapdb)

主要缺点是大多数此类数据库仅提供简单的键值模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:08:08.507

DBC 可以与任何具有 JDBC 驱动程序的数据库一起使用，它不一定是“网络模式”下的数据库，它也可以与嵌入式数据库一起使用。

以下是一些 Java 和可嵌入数据库：

[http://www.h2database.com/html/main.html](http://www.h2database.com/html/main.html)

[http://db.apache.org/derby/](http://db.apache.org/derby/)

[http://hsqldb.org/](http://hsqldb.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T23:16:12.047

Java 的 JDK 不包括任何数据库的实现或访问它的驱动程序。它只提供 JDBC 作为连接到“数据库”的抽象。由您决定在代码中包含所有需要的库。

如果你想拥有一个自包含的代码，你可以简单地在你的类路径中包含一个可嵌入数据库的 .jar 文件。这样，您可以在代码中创建数据库实例并最小化外部依赖项。

您可以在[此处](http://www.javablogging.com/embedded-database-in-java-use-of-hsqldb/)找到java 可嵌入数据库的列表

您可以在[此处](http://www.javablogging.com/embedded-database-in-java-use-of-hsqldb/)找到如何在代码中嵌入 HSQLDB 的示例。

# java - webservice 下载 vs 简单的 http post 下载

> ID：13692547
> 
> 赞同：1
> 
> 时间：2012-12-03T22:02:07.363
> 
> 标签：java

这是场景，

1.  设计一个允许文件下载的服务。
2.  要下载的文件将很重并且已经签名/加密。

我正在寻找以下方面的一些方向/想法：

1.  开发一个简单的 http post 并通过颁发客户端证书并在请求下载文件时执行客户端证书验证来保护服务？我担心它会影响服务器性能，因为文件已经很重了。

2.  使用纯 Web 服务来完成任务并依赖于提供的 WS-Security？同样，虽然我可以使用 MTOM，但文件已经很重了，但它有自己的依赖项。

各位大佬，给点建议好吗？

# xml - 读取 XML 文件并将其回显到控制台

> ID：13692548
> 
> 赞同：0
> 
> 时间：2012-12-03T22:02:06.767
> 
> 标签：xml, vbscript

我需要以人类可读的格式将 XML 回显到命令提示符，最好让它看起来与 XML 完全一样。

当我做

```
Set fs = CreateObject("Scripting.FileSystemObject")
Set fsInput = fs.OpenTextFile("\\PATH",1)
WScript.Echo fsInput.ReadAll 
```

它给了我一行文本......所以我假设它将 XML 作为一行读取，而不是遍历节点并输出它们。所以这行不通。过去一个小时我一直在谷歌搜索，不幸的是我找不到我需要的东西。

这是我的 XML 的示例

```
<?xml version="1.0"?> 
<Configuration Date="12/3/2012 4:32:30 PM"> 
   <Sys_Info>
      <Name>CEJHUI34</Name> 
      <Manufacturer>LENOVO</Manufacturer> 
      <Model>7826</Model> 
      <Serial_Number>N/A</Serial_Number> 
      <Operating_System>"Microsoft Windows 7"</Operating_System> 
      <OS_Version>"Professional "</OS_Version> 
      <IP_Address>1.5.1.85</IP_Address>
      <CPU_per_Domain>1</CPU_per_Domain>
      <CPU_Speed_MHz>6984</CPU_Speed_MHz>
      <RAM>3176.45 MB</RAM>
   </Sys_Info> 
   <Configuration-Tasks> 
      <task> 
         <name>All updates loaded</name> 
         <result>PASS</result> 
         <comment></comment> 
      </task> 
     <task> 
        <name>Accounts Setup</name>
        <result>FAIL</result>
        <comment>No Guest account</comment>
     </task>
  </Configuration-Tasks> 
</Configuration > 
```

关于我能做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:28:55.123

而不是单独`ReadAll()`使用`ReadLine()`和输出每一行：

```
Set fs = CreateObject("Scripting.FileSystemObject")
Set fsInput = fs.OpenTextFile("\\PATH",1)

do until fsInput.AtEndOfStream
    WScript.Echo fsInput.ReadLine()
loop

fsInput.Close 
```

# jquery - JQuery 没有收到点击事件

> ID：13692556
> 
> 赞同：0
> 
> 时间：2012-12-03T22:02:28.660
> 
> 标签：jquery

我正在尝试将事件侦听器分配给动态加载的锚标记。该工具是一个简单的建议框，会在文本框下方弹出。首先，我为搜索框分配了一个 keyup 侦听器：

```
$('.question').keyup(function(e) {
    if (e.which != 13) {
        self.suggest($(this).val());
    }
}); 
```

然后，被调用的函数`self.suggest`：

```
function suggest(text) {
    if (text.length > 0) {
        bkBtn.hide();
        waitImg.show();
        var d = document.createElement('div');
        d.className = 'suggest-box';
        var data = {}
        data.text = text;
        $.ajax({
            url: BASE_URL + '/urm8/suggest',
            type: 'POST',
            data: data,
            cache: false,
            success: function(markup) {
                waitImg.hide();
                if (markup.indexOf('##none##') != -1 || markup.length == 0) {
                    $(d).hide();
                }
                else {

                    $(d).append(markup);
                    $('.content').append(d);
                }
            },
            error: function(e) {
                waitImg.hide();
                alert('error');
                $('.content').html('');
                $('.content').append(e.responseText);
            }
        })   
    }
} 
```

我在文档加载时将此功能分配给`.suggest-link`选择器：

```
$('.suggest-link').live('click', function(e) {
    var answerID = $(this).attr('id');
    alert(id)
    self.updateBackStack();

    $(document).find('.suggest-box').remove();
    $('.content').blindRightToggle('fast', undefined, function() {
        self.appendAnswer(false, answerID);
    }); 
}); 
```

这里没有`alert`被解雇。我不确定如何以这种方式附加事件侦听器，将不胜感激。

此外，我使用的是 10 分钟前最新的稳定 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:06:21.170

使用 'on' 而不是 'live' 并将事件处理委托给父元素，例如：

`$('#parent').on("click", "#child", function() {});`

也可以看看：

[jQuery .live() 与 .on() 方法在加载动态 html 后添加点击事件](https://stackoverflow.com/questions/8752321/jquery-live-vs-on-method-for-adding-a-click-event-after-loading-dynamic-ht)

# java - 带有 Java 的 i/o .dat 文件以及如何保护它们

> ID：13692557
> 
> 赞同：-2
> 
> 时间：2012-12-03T22:02:33.683
> 
> 标签：java, io

我计划编写一个处理 .dat 文件的 Java 应用程序——从它们中读取、更新它们等。你知道任何简短的基本示例（代码）吗？

我也对如何以某种方式保护 .dat 文件（打开时使其不可读）感兴趣。例如，我刚刚将记事本文件转换为 .dat（通过重命名） - 当我打开 .dat 时，我（显然）仍然可以清楚地看到文本。

但是，我遇到了一些 .dat 文件，这些文件在打开它们时会显示各种有趣的字符——这就是保护，对吧？我对如何实现这一点几乎一无所知 - 我将不胜感激任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:05:20.290

“.dat”文件可以是您想要的任何文件。

一个典型的选择是明文。

这是一个关于在 Java 中读写文本文件的简单链接：

*   [http://www.javacoffeebreak.com/faq/faq0004.html](http://www.javacoffeebreak.com/faq/faq0004.html)

如果要“隐藏”文件，可以将其文件属性设置为“隐藏”。

如果要防止人们读取文件，则必须对其进行加密：

*   [http://www-users.york.ac.uk/~mal503/lore/pkencryption.htm](http://www-users.york.ac.uk/~mal503/lore/pkencryption.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:06:08.683

我建议您阅读[Basic File IO 教程。](http://docs.oracle.com/javase/tutorial/essential/io/)

以二进制格式写入文件并不是为了保护，它只是另一种易于阅读的格式。

通常为了保护文件，您会对其进行加密，这是一个相当复杂的主题。

如果您只想要二进制格式，您可以压缩文件，这也会使其更小。

# google-apps-script - 如何从客户端处理程序中移动弹出窗口？

> ID：13692563
> 
> 赞同：3
> 
> 时间：2012-12-03T22:02:53.653
> 
> 标签：google-apps-script

我有一个模拟由客户端处理程序触发的弹出窗口（[感谢 Waqar Ahmad ）的代码。](https://stackoverflow.com/questions/13641306/how-to-make-the-google-ui-services-popuppanel-works)我想让这个弹出窗口出现在触发它的按钮附近，但是使用脚本我看不到移动窗口的方法。代码如下，应用程序[可以在这里查看](https://script.google.com/macros/s/AKfycbwS2GR3ZJHOnFbhe8OxiNI51Bj6CrA2xPoZr65XjaDf4PIjJ0Wi/exec)，如果有人知道我应该如何重新组织或更改脚本，以便弹出窗口显示在触发该过程的按钮附近？

```
var choice = ['-','Choice 1','Choice 2','Choice 3','Choice 4']; // var definition

function doGet(){
      var app = UiApp.createApplication().setStyleAttribute("background", "beige");

      app.add(createMaskPanel_());//this is used to make popup panel modal

      var mainPanel = app.createVerticalPanel().setStyleAttributes({'padding' : '15'});
      app.add(mainPanel);
 // idx holds the index value of the button that is pressed
      var idx = app.createTextBox().setId('idx').setName('idx').setVisible(false);
      mainPanel.add(idx);
      //Make a panel for popup and add your popup elements
      var popup = app.createVerticalPanel().setId('popup').setVisible(false)
      .setStyleAttributes(
        {'position': 'fixed', 
         'border' : '1px solid brown',
         'padding' : '15',
         'background' : 'beige',
         'top' : '150PX',
         'left' : '300PX',
         'width' : '200', 
         'height':'120',
         'zIndex' : '2'});
      popup.add(app.createLabel('Select your choice').setId('label'));
      var list = app.createListBox().setId('ppValue').setName('ppValue').setWidth('200')
        .addItem(choice[0], '0').addItem(choice[1], '1').addItem(choice[2], '2').addItem(choice[3], '3').addItem(choice[4], '4');
      popup.add(list);
      var valHandler = app.createServerHandler('showVal').addCallbackElement(mainPanel).addCallbackElement(popup);;
      popup.add(app.createButton('✖ Close / confirm').addClickHandler(valHandler));
      app.add(popup);
      var mask = app.getElementById('mask')
      var ppHandler = app.createClientHandler().forTargets([popup,mask]).setVisible(true)

      var flex = app.createFlexTable()
  for(nn=1;nn<11;++nn){
      flex.setText(nn,0,'Item nr '+nn)
      var text = app.createTextBox().setHeight('26').setWidth('150').setId('val'+nn).setName('val'+nn)
      flex.setWidget(nn,1,text);
      var handler = app.createClientHandler().forTargets(idx).setText(nn).forTargets(text).setText('suggestion = ?');
      flex.setWidget(nn,2,app.createButton('✐').setHeight('26').setId('btn'+nn).addClickHandler(handler).addClickHandler(ppHandler))
      }
      mainPanel.add(flex);
      return app;
    }

function createMaskPanel_(){ //Called when UI loads, initially it will be invisble. it needs to be made visible
      var app = UiApp.getActiveApplication();
      var mask = app.createVerticalPanel().setId('mask').setSize('100%', '100%') //maskPanel to mask the ui
      .setStyleAttributes({
        'backgroundColor' : '#F0F0F0',
        'position' : 'fixed',
        'top' : '0',
        'left' : '0',
        'zIndex' : '1',
        'opacity' : '0.4'}).setVisible(false);
      mask.add(app.createLabel('POPUP')
               .setStyleAttribute('color', '#F0F0F0')
               .setStyleAttribute('opacity', '0.6')); 
      return mask;
    }

function showVal(e){
      var app = UiApp.getActiveApplication();
      var source = e.parameter.idx
      var value = app.getElementById('val'+source)
      value.setText('choice value = '+choice[e.parameter.ppValue])
      var popup = app.getElementById('popup')
      var mask = app.getElementById('mask')
      popup.setVisible(false)
      mask.setVisible(false)
      return app
    } 
```

* * *

**编辑：**由于服务器处理程序似乎是我尝试的唯一方法，因此可以[在此处](https://script.google.com/macros/s/AKfycbxFFUTFpbOeslwKnaVRxKcZYPCqYvqh7LZfwN-Om_-tne2I0TLA/exec)查看应用程序，并且*（最终？）*代码如下所示。

```
var choice = ['-','Choice 1','Choice 2','Choice 3','Choice 4','Choice 5','Choice 6','Last choice !'];//var definition

function doGet(){
  var app = UiApp.createApplication().setStyleAttribute("background", "beige");
  app.add(createMaskPanel_());//this is used to make popup panel modal
  var top = '100PX'
  var left = '265PX'
  var mainPanel = app.createVerticalPanel().setStyleAttributes({'padding' : '15'});
  app.add(mainPanel);
// item definitions
  var idx = app.createTextBox().setId('idx').setName('idx').setVisible(false);
  mainPanel.add(idx);
  //Make a panel for popup and add your popup elements
  var popup = app.createVerticalPanel().setId('popup').setVisible(false)
  .setStyleAttributes(
    {'position': 'fixed', 
     'border' : '1px solid brown',
     'padding' : '10',
     'background' : 'beige',
     'top' : top,
     'left' : left,
     'width' : '200', 
     'height':'110',
     'zIndex' : '2'});
  popup.add(app.createLabel('Select your choice').setId('label'));
  var list = app.createListBox().setId('ppValue').setName('ppValue').setWidth('160')
   for(c in choice){list.addItem(choice[c], c)}
  popup.add(list);
  var valHandler = app.createServerHandler('showVal').addCallbackElement(mainPanel).addCallbackElement(popup);;
  popup.add(app.createButton('✖ Close / confirm').addClickHandler(valHandler));
  app.add(popup);

  var idxHandler = app.createServerHandler('setidx').addCallbackElement(mainPanel)

var flex = app.createFlexTable()
for(nn=1;nn<11;++nn){
  flex.setText(nn,0,'Item nr '+nn)
  flex.setWidget(nn,1,app.createTextBox().setPixelSize(180,26).setId('val'+nn).setName('val'+nn));
  flex.setWidget(nn,2,app.createButton('✐').setHeight('26').setId('btn'+nn).addClickHandler(idxHandler))
  }
  mainPanel.add(flex);
  return app;
}

function setidx(e){
  var app = UiApp.getActiveApplication();
  var idx = app.getElementById('idx')
  var idxval = Number(e.parameter.source.replace(/[a-z]/g,''))
  idx.setValue(idxval);
  var top = -30+38*idxval+'PX'
  var left = '265PX'
  var popup = app.getElementById('popup')
  var mask = app.getElementById('mask')
  var label = app.getElementById('label').setText('Select your choice (item '+idxval+')')
  var value = app.getElementById('val'+idxval)
  value.setText('suggestion = ?')  
  popup.setVisible(true)
  mask.setVisible(true)
  popup.setStyleAttributes(
    {'top' : top,
     'left' : left});
  return app
}

function createMaskPanel_(){ //Called when UI loads, initially it will be invisble. it needs to be made visible
  var app = UiApp.getActiveApplication();
  var mask = app.createVerticalPanel().setId('mask').setSize('100%', '100%') //maskPanel to mask the ui
  .setStyleAttributes({
    'backgroundColor' : '#F0F0F0',
    'position' : 'fixed',
    'top' : '0',
    'left' : '0',
    'zIndex' : '1',
    'opacity' : '0.6'}).setVisible(false);
  mask.add(app.createLabel('POPUP')
           .setStyleAttribute('color', '#F0F0F0')
           .setStyleAttribute('opacity', '0.6')); 
  return mask;
}

function showVal(e){
  var app = UiApp.getActiveApplication();
  var source = e.parameter.idx
  var value = app.getElementById('val'+source)
  value.setText('choice value = '+e.parameter.ppValue+' ('+choice[Number(e.parameter.ppValue)]+')')
  var popup = app.getElementById('popup')
  var mask = app.getElementById('mask')
  popup.setVisible(false)
  mask.setVisible(false)
  return app
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T15:24:47.943

根据我目前在这些回复中看到的发现，这种方法是相应地定位我的小部件，而不是实际的表单本身。当然，除非我遗漏了一些东西，这是完全有可能的。感谢您到目前为止的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:16:19.143

Serge 我使用对话框做了一些类似的事情来获得这种功能。
在显示对话框的适当功能中，我决定对话框的位置。

我用它来放大图像，所以我只放了我用于对话框的（整个）代码。

```
function showimg(e){
  var app = UiApp.getActiveApplication();

  //
  // Style
  //
  var _showimg =
  {
    "position":"fixed",
    "width":"200px",      // here you can change size 
    "top":"100px",        // and horizontal position maybe you can use your 
    "left":"100px",       // your setidx function .
    "opacity":"0.95",
    "border":"none",
    }  
  var _container =
  {
    "width":"90%",
    "border":"none",
    }  

  var _img= {
    "background-color":"none",
    "width":"90%",
    "border":"4px solid f2f2f2",
  }

  var _btn= {
    "background-color":"none",
    "background":"none",
    "width":"80px",
    "height":"24px",
    "border":"None",
    "font-family":"hobo std",
    "font-size":"0.9em",
    "color":"3f3f3f",
    "opacity":"1",
  }

  //
  // aplication
  //    
  var f = DocsList.find("YOURSPREADSHEET");
  var id = f[0].getId();
  var ss = SpreadsheetApp.openById(id);
  var sheet = ss.getSheetByName("YOURSHEET");

  var rows= sheet.getLastRow();
  var cols = sheet.getLastColumn();

  var dialogBox = app.createDialogBox(true, true).setId("dialogBox");
  applyCSS(dialogBox, _showimg);

  var cont = app.createAbsolutePanel().setId("cont").setVisible(true);
  applyCSS(cont, _container); 

  var source = e.parameter.source;

  for (var i = 1; i < rows ; i++) { 
    for (var j = 1; j <6 ; j++) {
      if (source == "imgb"+[j]+[i]) {
     if (j == 1) { 
       var img = app.createImage().setId('img').setUrl(sheet.getRange(i+1,[5]).getValue()).setVisible(true); 
       dialogBox.setText(sheet.getRange(i+1,[6]).getValue());
      }
     if (j == 2) { 
       var img = app.createImage().setId('img').setUrl(sheet.getRange(i+1,[7]).getValue()).setVisible(true); 
       dialogBox.setText(sheet.getRange(i+1,[8]).getValue());
      }
      }  
      app.getElementById( "imgb"+[j]+[i]).setEnabled(false);                   
      //}

    }

  }

       applyCSS(img,_img)
app.createImage().setId('img').setUrl("https://lh6.googleusercontent.com/-PTl6c-pfHoc/TzFvp1dteaI/AAAAAAAACTI/Mmx-7RU4i8g/s640/xxxxxxx.jpg").setVisible(true);
    //  applyCSS(img,_img)

  var closeb = app.createButton("Close").setId("closeb").setTitle("close");
  applyCSS(closeb,_btn);

  var closeH = app.createServerClickHandler("closediag");
  closeb.addClickHandler(closeH);
  closeH.addCallbackElement(cont);

  cont.add(img);
  cont.add(closeb);
  dialogBox.add(cont);
  app.add(dialogBox);
  return app;
} 
```

[James](https://sites.google.com/site/scriptsexamples/gs-interactive)的 applyCss

```
function applyCSS(element, style){
  for (var key in style){
    element.setStyleAttribute(key, style[key]); 
  }  
} 
```

# fuelphp - Fuelphp石油迁移允许字段为空

> ID：13692567
> 
> 赞同：2
> 
> 时间：2012-12-03T22:03:32.977
> 
> 标签：fuelphp

是否可以向 Oil 传递一个允许新表字段为空的参数？

就像是

```
oil g migration foo bar:string null baz:int 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T15:00:24.020

当然，在生成迁移时，可以解析大部分用于创建表的参数。所需参数必须用冒号分隔，如下所示：

```
oil g migration foo bar:string:null baz:int:unsigned 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:10:42.837

最简洁的答案是不”。

您应该做的是使用允许的语法创建迁移，然后编辑位于

```
app/migrations. 
```

更新迁移文件后，您可以

```
run oil refine migrate 
```

# java - 为什么稀薄的 Boggle Solver 不起作用？

> ID：13692573
> 
> 赞同：3
> 
> 时间：2012-12-03T22:03:59.590
> 
> 标签：java, algorithm, boggle

我正在编写一个 boggle 求解器，但我不知道我的编码哪里出错了。这是我到目前为止所拥有的：

```
public class Boggle {
char[][] letters;
ArrayList <String> wordsPossible;
boolean[][] lettersUsed;
ArrayList<String> wordsMade = new ArrayList<String>();

public static void main(String[] args) {
    Boggle boggle = new Boggle();

    boggle.findWords();
}

public Boggle(){
    letters = new char[4][4];
    letters[0][0] = 'a';
    letters[0][1] = 'd';
    letters[0][2] = 'e';
    letters[0][3] = 'h';
    letters[1][0] = 's';
    letters[1][1] = 't';
    letters[1][2] = 'i';
    letters[1][3] = 'p';
    letters[2][0] = 's';
    letters[2][1] = 'k';
    letters[2][2] = 'c';
    letters[2][3] = 'e';
    letters[3][0] = 'u';
    letters[3][1] = 'f';
    letters[3][2] = 'r';
    letters[3][3] = 'o';

    Scanner scanner = null;
    try {
        scanner = new Scanner(new File("brit-a-z.txt"));
    } catch (FileNotFoundException ex) {
        Logger.getLogger(Boggle.class.getName()).log(Level.SEVERE, null, ex);
    }
    wordsPossible = new ArrayList<String>();
    while(scanner.hasNext()){
        String str = scanner.nextLine();
        wordsPossible.add(str);
    }
    lettersUsed = new boolean[4][4];
}

public void findWords(){
    for(int i=0; i<letters.length; i++){
        for(int j=0; j<letters[i].length; j++){
            //findWords(jLabels[i][j].getText(), i, j, labelsUsed);
            findWords(Character.toString(letters[i][j]), i, j, lettersUsed);
            System.out.println("Done");
        }
    }
    for(int i=0; i<wordsMade.size(); i++){
        System.out.println(wordsMade.get(i));
    }
}

public void findWords(String word, int iLoc, int jLoc, boolean[][] lettersUsed){
    if(iLoc < 0 || iLoc >= 4 || jLoc < 0 || jLoc >= 4){
        return;
    }

    if(lettersUsed[iLoc][jLoc] == true){
        return;
    }

    word += letters[iLoc][jLoc];
    lettersUsed[iLoc][jLoc] = true;

    if(word.length() >= 3 && wordsPossible.contains(word)){
        System.out.println(word);
        wordsMade.add(word);
    }

    findWords(word, iLoc-1, jLoc, lettersUsed);
    findWords(word, iLoc+1, jLoc, lettersUsed);
    findWords(word, iLoc, jLoc-1, lettersUsed);
    findWords(word, iLoc, jLoc+1, lettersUsed);
    findWords(word, iLoc-1, jLoc+1, lettersUsed);
    findWords(word, iLoc-1, jLoc-1, lettersUsed);
    findWords(word, iLoc+1, jLoc-1, lettersUsed);
    findWords(word, iLoc+1, jLoc+1, lettersUsed);

    lettersUsed[iLoc][jLoc] = false;
} 
```

}

它只是运行，并且很少会说找到了一个词。它也需要很长时间才能运行，大约一个小时。我看不出我的错误在哪里，我看不出我可以在哪里犯错。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:24:41.003

这将在所有 10-、11-、12-、13-、14- 等字母词中进行组合爆炸。一旦当前`word`不是字典中任何单词的前缀，您应该添加代码来修剪搜索。

此外，您正在使用 ArrayList 作为单词列表。搜索一个平面列表`wordsPossible.contains(word)`非常慢，因为它每次都会扫描整个列表。平均而言，对于 80,000 个单词的字典，这将需要 40,000 次迭代。

更合适的数据结构是[树集](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)或[前缀树](http://en.wikipedia.org/wiki/Trie)（或 trie）。两者都针对快速查找进行了优化，非常适合上述前缀检查。对于树集，[ceiling()](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#ceiling(E))方法会很方便。有关 Java 中尝试的信息，请参阅[此问题](https://stackoverflow.com/questions/623892/where-do-i-find-a-standard-trie-based-map-implementation-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:25:40.697

那 ArrayList 将是巨大的！您应该尝试使用更好的数据结构，例如，`ArrayList<ArrayList<ArrayList<String>>>` 其中第一个索引是单词的第一个字母，第二个索引是单词的第二个字母。

```
wordsPossible = new ArrayList<ArrayList<ArrayList<String>>>(26);
for (char c = 'a'; c <= 'z'; c++) {
    ArrayList<ArrayList<String>> temp = new ArrayList<ArrayList<String>>(26);
    wordsPossible.add(temp);
    for(char d = 'a'; d <= 'z'; d++) { 
        ArrayList<String> innerTemp = new ArrayList<String>();
        temp.add(innerTemp);
    }
}

// Snip

while(scanner.hasNext()){
  String str = scanner.nextLine();
  addWord(str);
}

// Snip

public void addWord(String str) {
  int first = str.toLowerCase().charAt(0) - 'a';
  int second = str.toLowerCase().charAt(1) - 'a';
  wordsPossible.get(first).get(second).add(str);
} 
```

然后通过首先找到正确的内部来查找匹配的单词，`ArrayList`而无需进行大量搜索。

# jquery - 如何切换按钮文本以及切换 div

> ID：13692576
> 
> 赞同：1
> 
> 时间：2012-12-03T22:04:13.270
> 
> 标签：jquery, text, toggle

我觉得这似乎很简单，可能是一个常见问题，但我需要在第二次点击时将文本更改回原始状态，

```
 $('#about').hide();     
      $('#about-btn').click(function(){         
            $('#about').toggle('down'),
             $(this).text('close');

        }); 
```

它与关闭的单词保持一致，我需要它在切换元素时切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:06:50.617

```
$("#about-btn").click(function() {
    if (this.innerHTML === "close") {
        this.innerHTML = "open";
        $("#about").slideUp();
    } else {
        this.innerHTML = "close";
        $("#about").slideDown();
    }
}); 
```

**演示：http:** [//jsfiddle.net/pX4QW/](http://jsfiddle.net/pX4QW/)

# jquery - 使用 jquery 解绑函数

> ID：13692577
> 
> 赞同：0
> 
> 时间：2012-12-03T22:04:16.827
> 
> 标签：jquery, if-statement, unbind

我有这个功能 sideNav 是通过点击子导航项目触发的

```
$(".side-nav ul li a").click(function(event) {
    $(document).ready(sideNav());
});

if(window.location.hash) {
    $(document).ready(sideNav());
} 
```

单击某个元素时，我正在尝试取消绑定 sideNav

```
$(".side-nav .page-header h1 span").click(function(event) {

}).unbind('ready',sideNav); 
```

我曾尝试使用 .live() 和 .die()，但这些不适用于主题标签 if 语句。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:06:05.603

查看 jQuery [bind()](http://api.jquery.com/bind/)和[unbind()](http://api.jquery.com/unbind/)。

做改变你的点击（），你可以这样做：

```
$(".side-nav ul li a").bind('click', function(event) {
    $(document).ready(sideNav());
});

$(".side-nav ul li a").unbind('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:09:12.043

[on()](http://api.jquery.com/on/)和[off()](http://api.jquery.com/off/)将是附加和分离事件处理程序的首选方式。

此外，将代码包装在准备好的文档中以确保在执行代码时已加载 DOM，不要将每个函数都包装在它自己的文档准备函数中。

引用函数时，只需键入函数名称“ `sideNav`”，如果添加括号，如“ `sideNav()`”，则立即执行该函数并传回该函数的值，除非返回其他内容，否则默认值为“ undefined”，并且在添加括号时，您的文档就绪功能根本不起作用。

```
$(document).ready(function() {
    $(".side-nav ul li a").on('click', sideNav);

    $(".side-nav .page-header h1 span").on('click', function() {
        $(".side-nav ul li a").off('click');
    });
}); 
```

# unit-testing - Angular 指令测试抛出错误

> ID：13692578
> 
> 赞同：1
> 
> 时间：2012-12-03T22:04:18.637
> 
> 标签：unit-testing, autocomplete, angularjs, directive

这是包装 jquery-ui 自动完成的指令

```
angular.module('myApp.directives', [])
    .directive('autocomplete', function () {
        return {
            restrict: 'E',
            replace: true,
            transclude: true,
            template: '<input ng-model="autocomplete" type="text"/>',
            link: function (scope, element, attrs) {
                scope.$watch(attrs.typedvalue, function () {
                    element.autocomplete({
                        search: function (event) {
                            scope[attrs.typedvalue] = this.value;
                            scope[attrs.fullselection] = '';
                            scope[attrs.selectionid] = '';
                            scope[attrs.shortselection] = '';
                            scope.$apply();
                        },
                        source: scope.fetchList,
                        select: function (event, ui) {
                            scope[attrs.fullselection] = ui.item.label;
                            scope[attrs.selectionid] = ui.item.itemId;
                            scope[attrs.shortselection] = ui.item.value;
                            scope.$apply();
                        }
                    });
                });
            }
        };
    }); 
```

我正在尝试使用以下测试对其进行单元测试（按照此处的说明[https://github.com/vojtajina/ng-directive-testing](https://github.com/vojtajina/ng-directive-testing)）：

```
describe('Directives', function () {

    beforeEach(module('myApp.directives'));

    describe('autocomplete directive', function () {
        var elm, scope;
        beforeEach(inject(function ($rootScope, $compile) {
            elm = angular.element('<autocomplete fullselection="fullDstn" shortselection="dstn" selectionid="geonameId" typedvalue="typedValue" id="DstnSlctr"/>');
            scope = $rootScope;
            $compile(elm)(scope);
            scope.$digest();
        }));

        it('should create input', inject(function ($compile, $rootScope) {
            expect(elm.id).toBe('DstnSlctr');
            expect(elm.prop('tagName')).toBe('INPUT');
            debugger;
        }));
    });
}); 
```

但我收到一个错误：

```
 TypeError: Object [[object HTMLInputElement]] has no method 'autocomplete'
            at Object.fn (C:/Users/kmukhort/Documents/_files/TMate/AngularTest/a
pp/js/directives.js:13:33) 
```

在 element.autocomplete({ 我怀疑 jquery-ui 功能在 $compile 时没有附加到元素上。我指的是 testacular.config 中的 jquery-ui 库

```
basePath = '../';

files = [
...
  'app/lib/jquery-ui-*.js',
]; 
```

你能告诉我我做错了什么吗？

谢谢！克塞尼亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:38:18.343

我认为您需要更换：

```
element.autocomplete(...); 
```

和：

```
$(element).autocomplete(...); 
```

# android - 带有 CameraUpdateFactory.newLatLngBounds 的 moveCamera 崩溃

> ID：13692579
> 
> 赞同：96
> 
> 时间：2012-12-03T22:04:22.630
> 
> 标签：android, android-mapview, google-maps-android-api-2

我正在使用新的[Android Google Maps API](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/package-summary)。

我创建了一个包含 MapFragment 的活动。在活动中`onResume`，我将标记设置到 GoogleMap 对象中，然后为包含所有标记的地图定义一个边界框。

这是使用以下伪代码：

```
LatLngBounds.Builder builder = new LatLngBounds.Builder();
while(data) {
   LatLng latlng = getPosition();
   builder.include(latlng);
}
CameraUpdate cameraUpdate = CameraUpdateFactory
   .newLatLngBounds(builder.build(), 10);
map.moveCamera(cameraUpdate); 
```

调用会`map.moveCamera()`导致我的应用程序因以下堆栈而崩溃：

```
Caused by: java.lang.IllegalStateException: 
    Map size should not be 0\. Most likely, layout has not yet 

    at maps.am.r.b(Unknown Source)
    at maps.y.q.a(Unknown Source)
    at maps.y.au.a(Unknown Source)
    at maps.y.ae.moveCamera(Unknown Source)
    at com.google.android.gms.maps.internal.IGoogleMapDelegate$Stub
        .onTransact(IGoogleMapDelegate.java:83)
    at android.os.Binder.transact(Binder.java:310)
    at com.google.android.gms.maps.internal.IGoogleMapDelegate$a$a
        .moveCamera(Unknown Source)
    at com.google.android.gms.maps.GoogleMap.moveCamera(Unknown Source)
    at ShowMapActivity.drawMapMarkers(ShowMapActivity.java:91)
    at ShowMapActivity.onResume(ShowMapActivity.java:58)
    at android.app.Instrumentation
        .callActivityOnResume(Instrumentation.java:1185)
    at android.app.Activity.performResume(Activity.java:5182)
    at android.app.ActivityThread
        .performResumeActivity(ActivityThread.java:2732) 
```

如果 -`newLatLngBounds()`我使用方法而不是工厂方法`newLatLngZoom()`，则不会发生相同的陷阱。

将标记绘制到 GoogleMap 对象上的最佳位置是`onResume`还是我应该绘制标记并将相机位置设置在其他地方？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-12-10T11:30:27.627

**您可以在OnCameraChangeListener**中使用简单的**newLatLngBounds**方法。一切都将完美运行，您无需计算屏幕尺寸。此事件发生在地图大小计算之后（据我了解）。

 **例子：

```
map.setOnCameraChangeListener(new OnCameraChangeListener() {

    @Override
    public void onCameraChange(CameraPosition arg0) {
        // Move camera.
        map.moveCamera(CameraUpdateFactory.newLatLngBounds(builder.build(), 10));
        // Remove listener to prevent position reset on camera move.
        map.setOnCameraChangeListener(null);
    }
}); 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-03-20T00:27:58.220

这些答案很好，但我会采用不同的方法，一种更简单的方法。如果该方法仅在地图布局后有效，请等待：

```
map.setOnMapLoadedCallback(new GoogleMap.OnMapLoadedCallback() {
    @Override
    public void onMapLoaded() {
        map.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 30));
    }
}); 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-12-03T22:28:55.430

好的，我解决了这个问题。如此[处所述](https://developers.google.com/maps/documentation/android/views#changing_camera_position)，API 不能用于预布局。

要使用的正确 API 描述为：

> 注意：如果要在地图经过布局后移动相机，请仅使用更简单的方法 newLatLngBounds(boundary, padding) 生成 CameraUpdate。在布局期间，API 计算正确投影边界框所需的地图显示边界。相比之下，您可以随时使用由更复杂的方法 newLatLngBounds(boundary, width, height, padding) 返回的 CameraUpdate，甚至在地图进行布局之前，因为 API 会根据您传递的参数计算显示边界。

为了解决这个问题，我计算了我的屏幕尺寸并提供了宽度和高度

```
public static CameraUpdate newLatLngBounds(
    LatLngBounds bounds, int width, int height, int padding) 
```

然后，这允许我指定边界框预布局。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-01-28T09:51:59.733

解决方案比这更简单......

```
// Pan to see all markers in view.
try {
    this.gmap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 50));
} catch (IllegalStateException e) {
    // layout not yet initialized
    final View mapView = getFragmentManager()
       .findFragmentById(R.id.map).getView();
    if (mapView.getViewTreeObserver().isAlive()) {
        mapView.getViewTreeObserver().addOnGlobalLayoutListener(
        new OnGlobalLayoutListener() {
            @SuppressWarnings("deprecation")
            @SuppressLint("NewApi")
            // We check which build version we are using.
            @Override
            public void onGlobalLayout() {
                if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
                    mapView.getViewTreeObserver()
                        .removeGlobalOnLayoutListener(this);
                } else {
                    mapView.getViewTreeObserver()
                        .removeOnGlobalLayoutListener(this);
                }
                gmap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 50));
            }
        });
    }
} 
```

而是在视图上捕获`IllegalStateException`并使用全局侦听器。使用其他方法预先设置绑定大小（预布局）意味着您必须计算 THE VIEW 的大小，而不是屏幕设备。只有当您全屏使用地图并且不使用片段时，它们才会匹配。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-12-30T09:50:10.547

这是我的解决方法，在这种情况下等到地图加载完毕。

```
final int padding = getResources().getDimensionPixelSize(R.dimen.spacing);    

try {
    mMap.animateCamera(CameraUpdateFactory.newLatLngBounds(pCameraBounds, padding));
} catch (IllegalStateException ise) {

    mMap.setOnMapLoadedCallback(new GoogleMap.OnMapLoadedCallback() {

        @Override
        public void onMapLoaded() {
            mMap.animateCamera(CameraUpdateFactory.newLatLngBounds(pCameraBounds, padding));
        }
    });
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2015-06-30T16:17:48.183

接受的答案对我不起作用，因为我必须在我的应用程序的各个地方使用相同的代码。

我没有等待相机更换，而是根据 Lee 指定地图大小的建议创建了一个简单的解决方案。这是在您的地图是屏幕大小的情况下。

```
// Gets screen size
int width = getResources().getDisplayMetrics().widthPixels;
int height = getResources().getDisplayMetrics().heightPixels;
// Calls moveCamera passing screen size as parameters
map.moveCamera(CameraUpdateFactory.newLatLngBounds(builder.build(), width, height, 10)); 
```

希望它可以帮助别人！

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-01-26T00:40:42.333

添加和删​​除标记可以在布局完成前完成，但不能移动相机（除非`newLatLngBounds(boundary, padding)`按照 OP 的回答中所述使用）。

执行初始相机更新的最佳位置可能是使用[Google 示例代码](https://developers.google.com/maps/documentation/android/intro#sample_code)`OnGlobalLayoutListener`中所示的 one-shot，例如，请参阅*MarkerDemoActivity.java*中的以下摘录：`setUpMap()`

 *```
// Pan to see all markers in view.
// Cannot zoom to bounds until the map has a size.
final View mapView = getSupportFragmentManager()
    .findFragmentById(R.id.map).getView();
if (mapView.getViewTreeObserver().isAlive()) {
    mapView.getViewTreeObserver().addOnGlobalLayoutListener(
    new OnGlobalLayoutListener() {
        @SuppressLint("NewApi") // We check which build version we are using.
        @Override
        public void onGlobalLayout() {
            LatLngBounds bounds = new LatLngBounds.Builder()
                    .include(PERTH)
                    .include(SYDNEY)
                    .include(ADELAIDE)
                    .include(BRISBANE)
                    .include(MELBOURNE)
                    .build();
            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
              mapView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            } else {
              mapView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
            }
            mMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 50));
        }
    });
} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-02-19T17:38:38.813

正如评论中指出的那样，公认的答案有点老套。实施后，我注意到`IllegalStateException`分析中的日志数量高于可接受的数量。我使用的解决方案是添加一个`OnMapLoadedCallback`在其中`CameraUpdate`执行的。回调被添加到`GoogleMap`. 地图完全加载后，将执行相机更新。

这确实会导致地图在执行相机更新之前短暂显示缩小的 (0,0) 视图。我觉得这比导致崩溃或依赖无证行为更容易接受。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-02-07T07:30:05.963

```
 map.moveCamera(CameraUpdateFactory.newLatLngZoom(bounds.getCenter(),10)); 
```

使用它对我有用

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-07-15T15:29:17.830

在极少数情况下，MapView 布局完成，但 GoogleMap 布局未完成，`ViewTreeObserver.OnGlobalLayoutListener`本身无法阻止崩溃。我看到了 Google Play 服务包版本 5084032 的崩溃。这种罕见的情况可能是由于我的 MapView 可见性的动态变化引起的。

为了解决这个问题，我嵌入`GoogleMap.OnMapLoadedCallback`了`onGlobalLayout()`，

```
if (mapView.getViewTreeObserver().isAlive()) {
    mapView.getViewTreeObserver().addOnGlobalLayoutListener(
    new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        @SuppressWarnings("deprecation")
        public void onGlobalLayout() {
            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
                mapView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            } else {
                mapView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
            }
            try {
                map.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 5));
            } catch (IllegalStateException e) {
                map.setOnMapLoadedCallback(new GoogleMap.OnMapLoadedCallback() {
                    @Override
                    public void onMapLoaded() {
                        Log.d(LOG_TAG, "move map camera OnMapLoadedCallback");
                        map.moveCamera(CameraUpdateFactory
                            .newLatLngBounds(bounds, 5));
                    }
                });
            }
        }
    });
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-04-17T18:59:57.503

我创建了一种方法来组合两个回调：onMapReady 和 onGlobalLayout 到一个单独的 observable 中，只有当这两个事件都被触发时才会发出。

[https://gist.github.com/abhaysood/e275b3d0937f297980d14b439a8e0d4a](https://gist.github.com/abhaysood/e275b3d0937f297980d14b439a8e0d4a)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-11-30T08:39:23.077

我使用了适用于最新版本的 Google Maps SDK（9.6+）并基于[onCameraIdleListener](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraIdleListener)的不同方法。正如我所看到的，它的回调方法`onCameraIdle`总是在`onMapReady`. 所以我的方法看起来像这段代码（考虑到它放入`Activity`）：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // set content view and call getMapAsync() on MapFragment
}

@Override
public void onMapReady(GoogleMap googleMap) {
    map = googleMap;
    map.setOnCameraIdleListener(this);
    // other initialization stuff
}

@Override
public void onCameraIdle() {
    /* 
       Here camera is ready and you can operate with it. 
       you can use 2 approaches here:

      1\. Update the map with data you need to display and then set
         map.setOnCameraIdleListener(null) to ensure that further events
         will not call unnecessary callback again.

      2\. Use local boolean variable which indicates that content on map
         should be updated
    */
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-07-24T04:21:38.730

好的，我面临同样的问题。我的片段带有 SupportmapFragment、ABS 和导航抽屉。我所做的是：

```
public void resetCamera() {

    LatLngBounds.Builder builderOfBounds = new LatLngBounds.Builder();
    // Set boundaries ...
    LatLngBounds bounds = builderOfBounds.build();
    CameraUpdate cu;
    try{
        cu = CameraUpdateFactory.newLatLngBounds(bounds,10);
        // This line will cause the exception first times 
        // when map is still not "inflated"
        map.animateCamera(cu); 
        System.out.println("Set with padding");
    } catch(IllegalStateException e) {
        e.printStackTrace();
        cu = CameraUpdateFactory.newLatLngBounds(bounds,400,400,0);
        map.animateCamera(cu);
        System.out.println("Set with wh");
    }

    //do the rest...
} 
```

而且，顺便说一句，我是在充气之后和返回之前打电话`resetCamera()`的。 这样做是第一次捕获异常（虽然地图“获取大小”作为一种说法......）然后，其他时候我需要重置相机，地图已经有了大小并通过填充来完成。`onCreateView`

[问题在文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory#newLatLngBounds%28com.google.android.gms.maps.model.LatLngBounds,%20int%29)中进行了解释，它说：

> 在地图经过布局之前，请勿使用此相机更新更改相机（为了使此方法正确确定适当的边界框和缩放级别，地图必须具有大小）。否则`IllegalStateException`会抛出一个。仅地图可用是不够的（即`getMap()`返回非空对象）；包含地图的视图也必须经过布局，以便确定其尺寸。如果您不能确定是否发生了这种情况，`newLatLngBounds(LatLngBounds, int, int, int)`请改用并手动提供地图的尺寸​​。

我认为这是一个相当不错的解决方案。希望它可以帮助某人。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-12-17T09:50:41.477

如果您需要等待可能的用户交互开始，`OnMapLoadedCallback`请按照前面答案中的说明使用。但是，如果您只需要为地图提供默认位置，则不需要这些答案中概述的任何解决方案。两者都`MapFragment`可以`MapView`接受一个`GoogleMapOptions`可以提供默认位置的 at start。唯一的技巧是不要将它们直接包含在您的布局中，因为系统将在没有选项的情况下调用它们，而是动态初始化它们。

在您的布局中使用它：

```
<FrameLayout
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

并替换您的片段`onCreateView()`：

```
GoogleMapOptions options = new GoogleMapOptions();
options.camera(new CameraPosition.Builder().target(location).zoom(15).build());
// other options calls if required

SupportMapFragment fragment = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.map);
if (fragment == null) {
  FragmentTransaction transaction = getFragmentManager().beginTransaction();
  fragment = SupportMapFragment.newInstance(options);
  transaction.replace(R.id.map, fragment).commit();
  getFragmentManager().executePendingTransactions();
}
if (fragment != null)
  GoogleMap map = fragment.getMap(); 
```

除了启动速度更快之外，不会先显示世界地图，然后再移动相机。地图将直接从指定位置开始。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-02-17T12:52:21.117

我发现这比其他解决方案更有效并且更简单：

```
private void moveMapToBounds(final CameraUpdate update) {
    try {
        if (movedMap) {
            // Move map smoothly from the current position.
            map.animateCamera(update);
        } else {
            // Move the map immediately to the starting position.
            map.moveCamera(update);
            movedMap = true;
        }
    } catch (IllegalStateException e) {
        // Map may not be laid out yet.
        getWindow().getDecorView().post(new Runnable() {
            @Override
            public void run() {
                moveMapToBounds(update);
            }
        });
    }
} 
```

这会在布局运行后再次尝试调用。可能包括避免无限循环的安全措施。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-01-26T00:44:47.833

另一种方法类似于（假设您的最顶层视图是一个名为 FrameLayout `rootContainer`，即使只要您始终选择最顶层的容器，无论它具有哪种类型或名称，它都会起作用）：

```
((FrameLayout)findViewById(R.id.rootContainer)).getViewTreeObserver()
    .addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        public void onGlobalLayout() {
            layoutDone = true;
        }
    }); 
```

修改您的相机功能以仅在`layoutDone`is时才有效，这`true`将解决您的所有问题，而无需添加额外的功能或将逻辑连接到`layoutListener`处理程序。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-08-11T11:15:37.210

为什么不直接使用这样的东西：

```
CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngBounds(builder.build(), padding);
try {
    map.moveCamera(cameraUpdate);
} catch (Exception e) {
    int width = getResources().getDisplayMetrics().widthPixels;
    int height = getResources().getDisplayMetrics().heightPixels;
    cameraUpdate = CameraUpdateFactory.newLatLngBounds(builder.build(), width, height, padding);
    map.moveCamera(cameraUpdate);
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-08-09T03:53:27.747

我在尝试调用 mMap.animateCamera 时遇到了同样的错误。**我通过在我的onMapReady**函数中调用**setOnMapLoadedCallback**回调来解决它，如下所示

 **```
public void onMapReady(GoogleMap googleMap) {
        mMap = googleMap;

   // other codes go there

    mMap.setOnMapLoadedCallback(() -> {
            //Your code where exception occurs goes here...

        });
} 
```

这应该可以正常工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-12-20T22:08:15.603

您可以利用 Google Maps 存储库中的一个帮助程序类 - 它等待布局和地图都准备好，然后再通过 GoogleMap 通知回调：

原始来源在这里：

[https://github.com/googlemaps/android-samples/blob/7ee737b8fd6d39c77f8b3716ba948e1ce3730e61/ApiDemos/java/app/src/main/java/com/example/mapdemo/OnMapAndViewReadyListener.java](https://github.com/googlemaps/android-samples/blob/7ee737b8fd6d39c77f8b3716ba948e1ce3730e61/ApiDemos/java/app/src/main/java/com/example/mapdemo/OnMapAndViewReadyListener.java)

还有一个 Kotlin 实现：

[https://github.com/googlemaps/android-samples/blob/master/ApiDemos/kotlin/app/src/main/java/com/example/kotlindemos/OnMapAndViewReadyListener.kt](https://github.com/googlemaps/android-samples/blob/master/ApiDemos/kotlin/app/src/main/java/com/example/kotlindemos/OnMapAndViewReadyListener.kt)

```
public class OnMapAndViewReadyListener implements OnGlobalLayoutListener, OnMapReadyCallback {

/** A listener that needs to wait for both the GoogleMap and the View to be initialized. */
public interface OnGlobalLayoutAndMapReadyListener {
    void onMapReady(GoogleMap googleMap);
}

private final SupportMapFragment mapFragment;
private final View mapView;
private final OnGlobalLayoutAndMapReadyListener devCallback;

private boolean isViewReady;
private boolean isMapReady;
private GoogleMap googleMap;

public OnMapAndViewReadyListener(
        SupportMapFragment mapFragment, OnGlobalLayoutAndMapReadyListener devCallback) {
    this.mapFragment = mapFragment;
    mapView = mapFragment.getView();
    this.devCallback = devCallback;
    isViewReady = false;
    isMapReady = false;
    googleMap = null;

    registerListeners();
}

private void registerListeners() {
    // View layout.
    if ((mapView.getWidth() != 0) && (mapView.getHeight() != 0)) {
        // View has already completed layout.
        isViewReady = true;
    } else {
        // Map has not undergone layout, register a View observer.
        mapView.getViewTreeObserver().addOnGlobalLayoutListener(this);
    }

    // GoogleMap. Note if the GoogleMap is already ready it will still fire the callback later.
    mapFragment.getMapAsync(this);
}

@Override
public void onMapReady(GoogleMap googleMap) {
    // NOTE: The GoogleMap API specifies the listener is removed just prior to invocation.
    this.googleMap = googleMap;
    isMapReady = true;
    fireCallbackIfReady();
}

@SuppressWarnings("deprecation")  // We use the new method when supported
@SuppressLint("NewApi")  // We check which build version we are using.
@Override
public void onGlobalLayout() {
    // Remove our listener.
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
        mapView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
    } else {
        mapView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
    }
    isViewReady = true;
    fireCallbackIfReady();
}

private void fireCallbackIfReady() {
    if (isViewReady && isMapReady) {
        devCallback.onMapReady(googleMap);
    }
}
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-12-19T12:12:27.077

如[OnCameraChangeListener() is deprecated](https://stackoverflow.com/questions/38727517/oncamerachangelistener-is-deprecated/38732283)中所述，`setOnCameraChangeListener`现在已弃用。因此，您应该将其替换为以下三种方法之一：

*   `GoogleMap.OnCameraMoveStartedListener`
*   `GoogleMap.OnCameraMoveListener`
*   `GoogleMap.OnCameraIdleListener`

就我而言，我使用`OnCameraIdleListener`并在里面删除了它，因为它在任何动作中一次又一次地被调用。

```
googleMap.setOnCameraIdleListener {
    googleMap.setOnCameraIdleListener(null) // It removes the listener.
    googleMap.moveCamera(track)
    googleMap.cameraPosition
    clusterManager!!.cluster()
    // Add another listener to make ClusterManager correctly zoom clusters and markers.
    googleMap.setOnCameraIdleListener(clusterManager)
} 
```

更新

我在我的项目中删除`googleMap.setOnCameraIdleListener`了，因为有时在显示地图时不会调用它，而是保留了`googleMap.setOnCameraIdleListener(clusterManager)`.*****

# c# - ora-01036 非法变量名

> ID：13692581
> 
> 赞同：2
> 
> 时间：2012-12-03T22:04:31.397
> 
> 标签：c#, sql, oracle, mybatis

我知道有相关的问题，但是我在网上遇到的大多数解决方案都有相同的解决方案，**将分号前身从您的 where 子句中的语句中删除**。但是，这对我不起作用，因为我没有分号。

我正在使用 MyBatis 并运行 NUnit 测试。

我的Batis代码

```
<select id="GetLineNumber" parameterClass="HashTable" resultClass="long">
  <![CDATA[
      SELECT
                     HP.LINE_NUM  
      FROM
                      ODS.HAIL_PLCY_LINE_NUM
      WHERE     
                      PLCY_ID = #PolicyId#
      AND             HCL_ID = #HailCoverageId#
</select> 
```

C#代码：...

```
 Hashtable lineNumberHash = new Hashtable
      {
         {"PolicyId",x.PolicyId}
            ,{"HailCoverageId",x.Id}
                 };
    lastDatabaseCoverage.AddRange(IbatisSqlMapper.QueryForList<T>("GetLineNumber", lineNumberHash)); 
```

上面代码中的“X”是一个对象，属性 PolicyId 和 Id 是有效的，所以请忽略一些无上下文的信息！

请注意，我已经习惯了 SQL Server，因此如果 Select、From、Where 已关闭，那么我为简单的修复表示歉意。

我不断收到“ORA01036 非法变量...”消息

这是我的第一个问题，所以我不知道他们得到回答的速度有多快，但希望相当快:-)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:11:42.490

野餐问题。

CDATA 标签未关闭的原因是我从我的代码中复制/粘贴。我没有做的是发布整个消息。我有一些代码被注释掉了。我不认为添加评论是一个禁忌，但在再次查看后，我意识到 CDATA 标签是一个*文字*.

从标签中取出评论（这样他们就不会被如此字面地阅读）解决了这个问题。我现在有一个结果映射问题，但至少我克服了这个非法变量的废话。

感谢您的帮助和维基文章！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:51:33.250

我看到的唯一问题是您需要关闭包含查询的[CDATA 部分](http://en.wikipedia.org/wiki/CDATA)。为此，请更改以下内容：

```
 AND             HCL_ID = #HailCoverageId#
</select> 
```

对此：

```
 AND             HCL_ID = #HailCoverageId#
  ]]>
</select> 
```

# .net - 在 .NET 4.5 中替换 SecurityTokenCache 的内容

> ID：13692585
> 
> 赞同：2
> 
> 时间：2012-12-03T22:04:48.910
> 
> 标签：.net, wif

当 WIF 是独立的时，您可以创建 SessionSecurityTokenHandler 并指定一个令牌缓存以用于类似网络农场的场景。现在，.NET 4.5 中的 SessionSecurityTokenHandler 没有该构造函数参数。.NET 4.5 中是否有等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:47:27.423

找到了替代品。它记录在这里：

[http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.sessionsecuritytokencache.aspx](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.sessionsecuritytokencache.aspx)

# php - 使用 php 格式化从另一个网站收集的原始文本

> ID：13692586
> 
> 赞同：2
> 
> 时间：2012-12-03T22:04:48.553
> 
> 标签：php, html

我正在尝试从另一个网站检索表格，该表格基于通过表单传递给它的几个变量。我已经计算出 ? 之后的 url 详细信息。对应于这些变量，并在我的页面上创建了一个表单来发布这些变量并创建 url，然后我将其放入一个`file_get_contents`流程中，从而我将表格作为数据收集（我已将表格缩小`get`到`div`容纳表格的位置） .

我的问题是数据在我的页面上显示为一串纯文本，没有格式（即没有列或行）。

这是检索数据的代码：

```
<?php
$page = file_get_contents($stats_url);
$doc = new DOMDocument();
$doc->loadHTML($page);
$divs = $doc->getElementsByTagName('div');
foreach($divs as $div) {
    // Loop through the DIVs looking for one withan id of "content"
    // Then echo out its contents (pardon the pun)
    if ($div->getAttribute('id') === 'statstable') {
         echo $div->nodeValue;
    }
}
?> 
```

以下是返回的数据示例：

> NameGamesInnsNot OutsRunsHigh ScoreAvg50's100'sDucksStrike RateBowled (%)Caught (%)LBW (%)Stumped (%)Run Out (%)Not Out (%)Did Not Bat (%)%Games Won%Games Drawn%Games Lost%Team RunsCatchesStumpingsRun OutsOwais Fareed 1 1 0 72 7272 1 0 0 - 0 1 (100) 0 0 0 0 0 0 0 100 42.6 0 0 0 Atif Ali 2 2 0 28 2814 0 0 1 - 2 (100) 0 0 0 0 0 0 0 0 100 11.62 0 0 0 克雷格希尔斯 2 2 0 20 1310 0 0 0 - 0 1 (50) 1 (50) 0 0 0 0 0 0 100 8.3 1 0 0 戴尔斯凯斯 2 2 0 16 128 0 0 0 - 1 (50) 1 (50) 0 0 0 0 0 0 0 100 6.64 1 0 0 灰烬 2 2 1 16 10*16 0 0 0 - 0 1 (50) 0 0 0 1 (50) 0 0 0 100 6.64 0 0 0 侯赛因·达尔维 1 1 0 11 1111 0 0 0 - 0 1 (100) 0 0 0 0 0 0 0 100 6。51 0 0 0 阿兹哈尔阿里 1 1 0 11 1111 0 0 0 - 0 1 (100) 0 0 0 0 0 0 0 100 6.51 0 0 0 哈默德 1 1 0 10 1010 0 0 0 - 0 1 (100) 0 0 0 0 0 0 0 100 5.92 0 0 0 M 阿里 1 1 0 5 55 0 0 0 - 1 (100) 0 0 0 0 0 0 0 0 100 2.96 0 0 0 西蒙普莱森特 1 1 0 5 55 0 0 0 - 0 1 (100) 0 0 0 0 0 0 0 100 6.94 0 0 0

然后，我怎样才能获取此文本并将其重新编译为表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:26:14.290

查看 PHP 简单 HTML DOM 解析器

它非常适合这些东西。

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# android - 更新 SDK 工具后无法更新 Eclipse

> ID：13692588
> 
> 赞同：0
> 
> 时间：2012-12-03T22:04:55.163
> 
> 标签：android, xml, eclipse

所以我最近将我的 SDK 工具更新为修订版 21。这样做之后，我去更新 Eclipse，但在更新进行到一半时，我收到以下错误：

> 找不到某些网站。有关更多详细信息，请参阅错误日志。
> 
> 无法在 [https://subclipse.tigris.org/update_1.6.x/content.xml](https://subclipse.tigris.org/update_1.6.x/content.xml)读取存储库。握手期间远程主机关闭连接
> 
> 无法在 [https://subclipse.tigris.org/update_1.8.x/content.xml](https://subclipse.tigris.org/update_1.8.x/content.xml)读取存储库。握手期间远程主机关闭连接
> 
> 我访问了两个 URL 并收到以下错误：
> 
> 无法与服务器建立安全连接。这可能是服务器的问题，或者可能需要您没有的客户端身份验证证书。
> 
> 错误 107 (net::ERR_SSL_PROTOCOL_ERROR)：SSL 协议错误。

我想知道问题的根源是我使用的 SSL 还是 XML 编辑器，因为我之前在从其他存储库读取 XML 文件时遇到过问题。

帮助！谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:07:18.467

我认为发生此错误是因为您的 Eclipse 无法与服务器建立 SSL 连接，请检查您是否有任何阻止 SSL 连接的防病毒/防火墙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:10:21.653

可以肯定地说这是他们的 SSL 连接。

资料来源：[http://www.downforeveryoneorjustme.com/https://www.downforeveryoneorjustme.com/http://www.downforeveryoneorjustme.com/http://subclipse.tigris.org/update_1.8.x/content。 xml](http://www.downforeveryoneorjustme.com/https://www.downforeveryoneorjustme.com/http://www.downforeveryoneorjustme.com/http://subclipse.tigris.org/update_1.8.x/content.xml)

# php - 将 smarty 布尔值转换为人类可读的值。（“是”/“否”或“真”/“假”）

> ID：13692590
> 
> 赞同：2
> 
> 时间：2012-12-03T22:05:00.653
> 
> 标签：php, javascript, jquery, html, smarty

我正在使用 Smarty 生成一些表，并且在某一时刻我正在打印出从 php 文件传递​​的变量值。问题是其中一些变量是布尔值，它们呈现为“1”或“”。这是我尝试将这些布尔值转换为人类可读格式的尝试。这没用。如何检查变量是否为布尔值？

```
{if $val2.$value_index === true}Yes
{else if $val2.$value_index === false}No
{else}{$val2.$value_index->value}{/if} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-16T15:06:57.150

使用 PHP [var_export()](http://www.php.net/manual/en/function.var-export.php)函数作为布尔变量的 smarty 修饰符。将第二个参数设置为 true，因此[var_export()](http://www.php.net/manual/en/function.var-export.php)返回变量表示而不是输出它。

要检查您的变量是否为布尔值，请使用 PHP [is_bool()](http://php.net/manual/de/function.is-bool.php)函数。

您的 Smarty 代码应如下所示：

```
{if is_bool($val2.$value_index)}
  {$val2.$value_index|var_export:true}
{/if} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T22:15:46.240

我对此并不完全熟悉，但看起来应该是：

```
{if $val2.$value_index->value === true}Yes
{elseif $val2.$value_index->value === false}No
{else}{$val2.$value_index->value}{/if} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T22:07:01.997

怎么样：

```
{if $va2.$value_index}Yes
{else}No
{/if} 
```

> 问题是其中一些变量是布尔值，它们呈现为“1”或“”。

`1`并且`""`不是布尔值，它们是相应的整数和字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-23T19:27:22.000

我用谷歌搜索了 if else 的简写，这篇文章最初是出现的。以防万一有人需要以下简称：

```
{if $val2.$value_index === true}Yes
{else if $val2.$value_index === false}No
{else}{$val2.$value_index->value}{/if} 
```

到：

```
{($val2.$value_index->value) ? 'yes' : (!$val2.$value_index->value) ? 'no' : $val2.$value_index->value} 
```

# mysql - 结合 SQL 视图和左外连接查询

> ID：13692596
> 
> 赞同：1
> 
> 时间：2012-12-03T22:05:19.663
> 
> 标签：mysql, sql, outer-join, sql-view

我有一个名为 Home 的视图：

```
CREATE VIEW `skohr`.`Home` AS
Select Song_OID, Song_Name, Album_Name, Artist_First_Name, Artist_Last_Name, Band_Name, Genre, Album_Art_File_Path
From Song, Album, Artist, Track_Number, Made
Where Song_OID = Track_Number.Song_OID_FK AND Album_OID=Track_Number.Album_OID_FK AND Album_OID=Made.Album_OID_FK AND Artist_OID=Made.Artist_OID_FK
ORDER BY Song_Name Asc 
```

我在视图上运行了以下查询以获取我想要的表：

```
Select DISTINCT * From Home LEFT OUTER JOIN (SELECT * FROM Song_Setting, user WHERE User_OID=User_OID_FK) AS UserSongs
ON Song_OID=Song_OID_FK 
```

如何将两个单独的查询合并为一个以创建单个视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:10:39.553

尝试创建视图

```
CREATE VIEW `skohr`.`MyNewView` AS

Select DISTINCT * From Home h
LEFT OUTER JOIN Song_Setting x
    ON h.Song_OID_FK = x.Song_OID
INNER JOIN user u
    ON u.User_OID = x.User_OID_FK 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T22:15:28.477

::回复请求 MySQL 版本的评论::

我今天没有专门使用 MySQL，但是你有什么理由不能像其他数据集那样使用子查询吗？像这样的东西：

```
Select DISTINCT * From 
(
    Select Song_OID, Song_Name, Album_Name, Artist_First_Name, Artist_Last_Name, Band_Name, Genre, Album_Art_File_Path
    From Song, Album, Artist, Track_Number, Made
    Where Song_OID = Track_Number.Song_OID_FK AND Album_OID=Track_Number.Album_OID_FK AND Album_OID=Made.Album_OID_FK AND Artist_OID=Made.Artist_OID_FK
) as a
LEFT OUTER JOIN (SELECT * FROM Song_Setting, user WHERE User_OID=User_OID_FK) AS b
ON a.Song_OID=b.Song_OID_FK 
```

如果这对 MySQL 不起作用，我认为您可能会考虑使用临时/内存表。因此，请考虑在 MySQL 中创建临时表，创建一个临时表并用我在下面的 CTE 中捕获的子查询填充它，然后将其加入到您的其他查询中。

如果这是 SQL Server，您可以使用[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

只需将以下代码放入视图中，它就会为您提供所需的内容。

```
WITH Home AS 
(
Select Song_OID, Song_Name, Album_Name, Artist_First_Name, Artist_Last_Name, Band_Name, Genre, Album_Art_File_Path
From Song, Album, Artist, Track_Number, Made
Where Song_OID = Track_Number.Song_OID_FK AND Album_OID=Track_Number.Album_OID_FK AND Album_OID=Made.Album_OID_FK AND Artist_OID=Made.Artist_OID_FK
)
Select DISTINCT * From Home 
LEFT OUTER JOIN (SELECT * FROM Song_Setting, user WHERE User_OID=User_OID_FK) AS UserSongs
ON Song_OID=Song_OID_FK 
```

# python - 在不同的进程中使用管理器/代理暴露对象

> ID：13692601
> 
> 赞同：1
> 
> 时间：2012-12-03T22:05:49.320
> 
> 标签：python, multiprocessing

所以我有这个对象可以在不同的过程中使用。如何在当前进程中使用别名公开此对象，以便每当我在别名（代理）上调用方法时，它将被腌制并在引用对象上调用并引发任何异常（如果有）。

我也喜欢通过管道而不是套接字发送数据。

我在 python 的多处理页面上看到的示例并没有解决这种情况。或者至少不直接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:40:22.890

我最终使用 BaseManager.start() 为管理器生成了一个新进程。我还通过继承 BaseProxy 并使用管理器注册代理来使用自定义代理。

我仍然不知道如何在生成的进程中创建一个管道，但这无论如何都不是主要问题。

# c++ - 'operator<' 不匹配

> ID：13692608
> 
> 赞同：0
> 
> 时间：2012-12-03T22:06:24.853
> 
> 标签：c++, operators

这可能是一个非常快速的解决方法，但我无法弄清楚为什么会出现错误。

代码：

```
#include <iostream>
#include <queue>
#include <vector>
#include <iomanip>
#include <stdlib.h>
#include <time.h>

using namespace std;

int main(int argc, char *argv[]){

    srand ( time(NULL) );
    double randomNumber = (double)(rand() % 100) / 100;

    string numCars;

    cout << "\nPlease enter the number of cars going through the intersection:" << endl;
    cout << "->";
    getline (cin, numCars);

    for(double i=0; i<numCars; i++){
        cout << randomNumber << endl;
    }

} 
```

错误是：

```
 traffic.cpp:80: error: no match for ‘operator<’ in ‘i < numCars’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T22:07:11.003

`numCars`是一个字符串。它应该是整数类型（char、short、int、long）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T22:10:25.297

您不能将 a`string`与数值进行比较。将用户输入读入`unsigned int`. 将您的代码更改为：

```
unsigned int numCars;
if( !(cin >> numCars) ) {
  // invalid user input, handle it
}

for( unsigned int i = 0 ; i < numCars; ++i ) {
  // ...
} 
```

我还将`i`from的数据类型更改`double`为`unsigned int`。没有理由使用浮点数，除非以某种方式有一小部分汽车可以通过那个交叉路口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:08:23.377

您不能将字符串与整数进行比较，或者您必须为此定义运算符。应该`numCars`是整数？

# android - 即使铃声在android中静音，也会响起警报

> ID：13692613
> 
> 赞同：2
> 
> 时间：2012-12-03T22:06:34.997
> 
> 标签：android, alarm

先生，即使铃声被静音，是否可以响铃？如果是，如何。而且，我可以将它的音量设置在两者之间，而不仅仅是 maxvolume 吗？提前致谢

```
for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("firealert")) {

            Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
             if(alert == null){
                 // alert is null, using backup
                 alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                 if(alert == null){  
                     // alert backup is null, using 2nd backup
                     alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);               
                 }
             }
             Ringtone r = RingtoneManager.getRingtone(context.getApplicationContext(), alert);
             AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
             int maxVolumeAlarm = audioManager.getStreamMaxVolume(AudioManager.STREAM_ALARM);
             int maxVolumeRing = audioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
             audioManager.setStreamVolume(AudioManager.STREAM_ALARM, maxVolumeAlarm,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
             audioManager.setStreamVolume(AudioManager.STREAM_RING, maxVolumeRing,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
             r.play();
                Toast.makeText(context.getApplicationContext(), "alarm started", Toast.LENGTH_LONG).show();

        }//end if
    }//end for 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:34:02.363

要看的东西：

AudioManager.getRingerMode / setRingerMode。将其设置为 RINGER_MODE_NORMAL 以确保手机没有静音或设置为振动。（尽管您可能想先检查状态，以便您可以存储它并在清除警报后重置值。）

```
if ( aManager.getRingerMode() != AudioManager.RINGER_MODE_NORMAL )
    aManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
```

例如，如果要将音量设置为 50%，请检查 AudioManager.getStreamMaxVolume，然后将其除以 2。不过，让用户配置它可能会更好。使用 SeekBar 让他设置首选音量（同样，您可以在闹钟响起后恢复正常）。

```
RingerVolumeBar = (SeekBar) findViewById(R.id.seekBar1);
RingerVolumeBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
{
   @Override
   public void onProgressChanged(SeekBar seekBar,
                        int progress, boolean fromUser)
   {
   aManager.setStreamVolume(AudioManager.STREAM_RING,
                            progress, AudioManager.FLAG_PLAY_SOUND);
   // record new setting so you can load it up or reset it back later
   ...
   }
}); 
```

# wcf - 无法从（死信）队列中获取服务

> ID：13692615
> 
> 赞同：1
> 
> 时间：2012-12-03T22:06:47.527
> 
> 标签：wcf, msmq, netmsmqbinding

我在远程机器上有一个名为 log 的队列。当我在本地调用该队列时，我通过修改我的 NetMsmqBinding 来指定一个自定义死信队列：

```
_binding.DeadLetterQueue = DeadLetterQueue.Custom;
_binding.CustomDeadLetterQueue = new Uri(
    "net.msmq://localhost/private/Services/Logging/LogDeadLetterService.svc"); 
```

这很好用；当我强制我的消息无法到达其目的地时，它会出现在此队列中。

现在，我有一个托管在 IIS/WAS 中的服务来读取死信队列。它托管在一个名为 Services 的站点中，位于 Services/Logging/LogDeadLetterService.svc。这是我的配置中的服务：

```
 <service name="Me.Logging.Service.LoggingDeadLetterService">
    <endpoint binding="netMsmqBinding"
              bindingNamespace="http://me.logging/services/2012/11"
              contract="Me.Logging.Service.Shared.Service.Contracts.ILog" />
  </service> 
```

这是我的激活：

```
 <add relativeAddress="LogDeadLetterService.svc"
         service="Me.Logging.Service.LoggingDeadLetterService" /> 
```

我的实际服务基本上是这样的：

```
[ServiceBehavior(AddressFilterMode = AddressFilterMode.Any, // Pick up any messages, regardless of To address.
                 InstanceContextMode = InstanceContextMode.Single, // Singleton instance of this class.
                 ConcurrencyMode = ConcurrencyMode.Multiple, // Multiple callers at a time.
                 Namespace = "http://me.logging/services/2012/11")]
public class LoggingDeadLetterService : ILog
{
    public void LogApplication(ApplicationLog entry)
    {
        LogToEventLog(entry);
    }
} 
```

我的队列是事务性的和经过身份验证的。我在服务站点和日志记录应用程序上都将 net.msmq 作为启用的协议包含在内，并且我将 net.msmq 绑定添加到服务站点。如果绑定信息为，则在浏览[http://appdev.me.com/Logging/LogDeadLetterService.svc](http://appdev.me.com/Logging/LogDeadLetterService.svc)`appdev.me.com`时出现以下错误（appdev.me.com 在我的 HOSTS 文件中设置）：

```
An error occurred while opening the queue:Access is denied. (-1072824283, 0xc00e0025). 
```

如果我的绑定信息为`localhost`，则会收到以下错误：

```
An error occurred while opening the queue:The queue does not exist or you do not have sufficient permissions to perform the operation. (-1072824317, 0xc00e0003). 
```

无论我设置哪种方式，服务都不会收到死信，因为它仍在队列中，而不是在我的事件日志中。

现在，我意识到这两个都引用了权限问题。但是，为了在确定身份验证部分之前测试此代码部分，我已将完全控制权授予我能想到的每个人 - 包括所有人、经过身份验证的用户、网络服务、IIS_USERS、匿名登录和我自己。（应用程序池以我的身份运行。）

关于如何让我的服务能够从这个队列中拉出的任何帮助都将是惊人的。谢谢！

**编辑：** 根据[这个 MSDN 博客条目](http://blogs.msdn.com/b/drnick/archive/2008/10/10/diagnosing-common-queue-errors.aspx)，0xC00E0003 对应于 MQ_ERROR_QUEUE_NOT_FOUND，而 0xc00e0025 对应于 MQ_ERROR_ACCESS_DENIED，所以看起来我希望绑定信息为`appdev.me.com`. 但是，这仍然不能解决发生的明显权限问题。

**EDIT2：** 如果我在控制台应用程序中托管服务并提供以下端点，它就可以工作：

```
 <endpoint address="net.msmq://localhost/private/Services/Logging/LogDeadLetterService.svc"
              binding="netMsmqBinding"
              bindingNamespace="http://me.logging/services/2012/11"
              contract="Me.Logging.Service.Shared.Service.Contracts.ILog" /> 
```

那么控制台应用程序中的情况与 IIS 中的情况有何不同？由于上面的**编辑**，我非常有信心我正在排队。那我为什么进不去呢？

**EDIT3：根据**[此处](http://www.codewrecks.com/blog/index.php/2009/03/17/hosting-a-wcf-service-based-on-msmq-in-iis7/)给出的建议将 Services/Logging/LogDeadLetterService.svc 更改为 Logging/LogDeadLetterService.svc ，但没有变化。

//

[额外问题：我需要处理死信队列中的有害消息吗？]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:42:21.603

因此，需要改变三件事：

1.  绑定*确实*必须是`localhost`.
2.  必须命名队列`Logging/LogDeadLetterService.svc`才能找到 - 它是应用程序和服务，而不是站点、应用程序和服务。
3.  我的应用程序池出了点问题——我不知道它是什么，但是使用不同的应用程序池可以工作，所以我取消了所有与服务相关的更改，然后重新创建了所有内容，并且它可以工作。

好吧，为了“不要弄乱你的应用程序池”这样简单的事情，我的头撞到了我的办公桌上。

# c# - 如何使用 C# 使用多个条件运算符

> ID：13692617
> 
> 赞同：0
> 
> 时间：2012-12-03T22:06:49.727
> 
> 标签：c#, asp.net

我想使用 2 个运算符的组合： && 和 || 使用 C# 的运算符。我有 5 个变量要确定是否满足这些条件。varRequestedDate varTotdayDate varExpectedDate Approval1 Approval2 这是我目前的情况，但想添加其他变量添加 OR 运算符：

```
if (varRequestedDate != ("&nbsp;") && varExpectedDate < varTotdayDate) 
```

这是更新版本后我希望看到的伪代码：

```
(if varRequestedDate is not blank 
and varExpectedDate is less than varTotdayDate
and either Approved1 OR Approved2 = Yes)
send email() 
```

我不知道该怎么做。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T22:08:19.693

您只需添加嵌套括号：

```
if (varRequestedDate != "&nbsp;" 
    && varExpectedDate < varTotdayDate
    && (Approved1 == "Yes" || Approved2 == "Yes")
)
    sendEmail(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T22:11:42.617

为了可读性和表达性，我会将布尔值提取到有意义的命名变量中：

```
var isDateRequested = varRequestedDate != ("&nbsp;");
var isDateWithinRange = varExpectedDate < varTotdayDate;
var isApproved = Approved1 == "Yes" || Approved2 == "Yes";

if (isDateRequested && isDateWithinRange && isApproved)
{...} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T22:12:24.840

您可以使用括号嵌套逻辑运算符（就像算术运算符一样）。否则，它们遵循从左到右的定义优先级。

```
if (
    varRequestedDate !=("&nbsp;") && 
    varExpectedDate < varTodayDate && 
    (Approved1==Yes||Approved2==yes)) 
```

# java - Java 中每个共享引用是否占用另一个内存字（例如 32 位或 64 位）？

> ID：13692625
> 
> 赞同：1
> 
> 时间：2012-12-03T22:07:22.150
> 
> 标签：java, memory, reference

假设 3 个对象每个都有一个 object 的引用`x`，这 3 个引用中的每一个是否占用另一个内存字（例如 32 或 64 位，意味着总共 96 或 192 位），即使它们都已设置为同一个对象？

例如

```
X x = getX();
object1.x = x;
object2.x = x;
object3.x = x; 
```

?

此外，如果我有一个`HashMap<Character, Character>`，我总是输入完全相同的`Character`对象作为键和值，它是否会占用双倍的引用内存`HashSet<Character>`加上`Characters`它们自己的内存量，即使相同的对象引用是每次都用于键和值？我知道这可能与第一个问题相同，但我想知道这种情况的行为是否会有所不同？

在每种情况下，如果根对象是`static`，那么引用是存储在堆栈还是堆中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:11:49.370

是的，你有 3 个引用，所以它是引用内存的 3 倍。

该`Character`对象获取引用的内存及其内容（例如 a `char`）。`char`原语只会消耗原语的空间（比 64 位系统上的引用少）。如果您使用*相同*的对象作为键和值，那么您将查看两个引用和 1 个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:09:59.477

基本上，如果您有多个引用，则每个引用都会占用单独的内存，而不管它指向何处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:18:32.043

对象 x、object1、object2 和 object3 将在堆上分配一次。最后三个对象中的每一个都将通过引用引用实例 x。除了引用属性（假设它们没有任何其他属性）之外，这些对象中的每一个都不需要额外的内存。通常，每个对象占用的空间取决于其属性。每个分配的对象还需要 jvm 一个标头，通常包括一个标记字、类元数据，如果实例是一个数组，它的长度（参见[http://www.cs.princeton.edu/picasso/mats/HotspotOverview.pdf](http://www.cs.princeton.edu/picasso/mats/HotspotOverview.pdf)）。

静态定义的类属性在类初始化阶段（http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html）位于永久代（热点中）的类定义中分配#jvms-5.5)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T22:13:00.283

将对象想象成数据库表中的一行：对于给定列，两行是否具有相同的值无关紧要：仍然必须将值保存在特定行中，所以如果两个用户共享名称*John* ，则可以，您的桌子可以容纳两个约翰的 :)

```
+------------------------------+
|   ID   |        NAME         |
+--------+---------------------+
|0x76BA39|       John          |
+--------+---------------------+
|0xB4H821|       John          |
+--------+---------------------+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T22:09:19.113

在您编写的代码中，没有消耗尚未消耗的额外内存。您只是在更改引用`object1.x`、`object2.x`和的内容`object3.x`。

在当前的 JDK 中，a`HashMap<Character, Character>`将占用与`HashSet<Character>`相同大小的 a 相同的内存量。（实际上稍微*少一点*。）这与它是否将字符映射到自身无关。

只有方法局部引用变量存储在堆栈中；其他所有内容都存储在堆上。特别是，任何对象的字段（无论是否`static`存在）都将像对象的其余部分一样存储在堆上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T22:09:44.297

引用总是占用相同数量的内存，通常是 32 位，即使在 64 位 JVM 上也是如此。它不会因为它引用同一个对象作为另一个引用而变得更小。

> 它是否占用了引用内存的两倍

不。HashSet 是 HashMap 的包装器，因此它消耗相同数量的内存。

> 在每种情况下，如果根对象是静态的，那么引用是存储在堆栈还是堆中？

静态字段始终存储在 HotSpot 的堆中，但 AFAIK 未在 JLS 中指定它，因此它可能会有所不同。将它放在堆栈上是没有意义的，因为这是线程本地的。

# java - 从新线程中的类启动活动

> ID：13692626
> 
> 赞同：0
> 
> 时间：2012-12-03T22:07:28.913
> 
> 标签：java, android

基本上我的想法是我检查网络会话是否仍然有效，如果不是，我启动自动登录用户的主要活动。

我有这个工作，不确定这是否是最好的方法。如果有人有更好的方法请告诉我。

谢谢

用途：

```
 @Override
    public void onResume() {
         super.onResume();
         new LoginCheck(this,new Intent(this,MyActivity.class));

    } 
```

班上

```
 public class LoginCheck extends Application {

Intent home;
Activity activity;

public LoginCheck(Activity activity, Intent home) {
    this.activity = activity;
    this.home = home;
    new Check().execute();
}

public class Check extends AsyncTask {

    @Override
    protected Object doInBackground(Object... objects) {
        try {
            InputStream is = null;
            String result = "";
            JSONObject jArray = null;
            PersistentCookieStore myCookieStore = new PersistentCookieStore(MyApp.getAppContext());
            //http post
            DefaultHttpClient mClient = AppSettings.getClient();
            try {
                HttpPost request = new HttpPost(MyApp.getServiceUrl() + "/Api/Login/AmILoggedIn");
                mClient.setCookieStore(myCookieStore);
                HttpResponse response = mClient.execute(request);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
            }

            //convert response to string
            try {

                BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }
            final String r = result;
            final Intent i = home;
            activity.runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    try {

                        JSONObject j = new JSONObject(r);
                        if (!j.getBoolean("Success")) {
                            try {
                                activity.startActivity(i);
                            } catch (Exception e) {
                                Log.e("log_tag", e.getMessage());
                            }
                        }

                    } catch (JSONException e) {

                        Log.e("log_tag", "Error parsing data " + e.toString());
                    }
                }
            });

            return true;

        } catch (Exception e) {

        }

        return null;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:11:11.787

这是清理后的版本

利用：

```
new LoginCheck() {
        @Override
        public void LoggedIn() {
            //To change body of implemented methods use File | Settings | File Templates.
        }

        @Override
        public void LoggedOut() {
            //To change body of implemented methods use File | Settings | File Templates.
        }
    }; 
```

班级

```
public abstract class LoginCheck {
public LoginCheck(){
    new Check().execute(true);
}
public  class Check extends AsyncTask<Boolean,Boolean,Boolean>{
 @Override
 protected Boolean doInBackground(Boolean... objects) {

     JSONStringer jsonSend = null;

     try {
         jsonSend = new JSONStringer()
                 .object()
                 .endObject();
     } catch (JSONException e) {
         Log.e("log_tag", "Error creating Json " + e.toString());
     }

     JSONObject result = JsonPost.postJSONtoURL(MyApp.getServiceUrl() + "/Api/Login/AmILoggedIn", jsonSend);

     try {
         if (result.getBoolean("Success")) {
             return true;
         }
     } catch (JSONException e) {
         Log.e("log_tag", "Error parsing data " + e.toString());
     }
     try {
         if (!result.getBoolean("Success")) {
             return false;
         }
     } catch (JSONException e) {
         Log.e("log_tag", "Error parsing data " + e.toString());
     }

     return false;
 }

 @Override
 protected void onPostExecute(Boolean result){
     if(result)
         LoggedIn();
     if(!result)
         LoggedOut();

 }
  }

public abstract void LoggedIn();
public abstract void LoggedOut();

 } 
```

# android - Android尴尬的行为

> ID：13692627
> 
> 赞同：-2
> 
> 时间：2012-12-03T22:07:46.913
> 
> 标签：android, behavior

我正在制作一个创建新文件的应用程序，当我这样命名文件时没有问题：

```
private String FILENAME = "myFilename"; 
```

但是当我使用一种方法来命名文件时，编译器会直接跳转到这一行：

```
String lineSep = System.getProperty("line.separator"); 
```

然后到我的班级声明：

```
public class AddUser extends Activity 
```

并且应用程序崩溃。

这是日志文件所说的：

```
12-03 16:26:12.814: E/AndroidRuntime(20307): FATAL EXCEPTION: main
12-03 16:26:12.814: E/AndroidRuntime(20307): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp.app/com.myapp.app.ProfileSaved}: java.lang.NullPointerException
12-03 16:26:12.814: E/AndroidRuntime(20307):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-03 16:26:12.814: E/AndroidRuntime(20307):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-03 16:26:12.814: E/AndroidRuntime(20307):    at android.app.ActivityThread.access$600(ActivityThread.java:130) 
```

这是我的文件命名方法：

```
int firstArray;
int nextArray;  

private String fileNamer(){

    File dataDirectory = Environment.getDataDirectory();
    File fileDir = new File(dataDirectory, "data/com.myapp.app/files");

    String[] filenameArray = fileDir.list();

    Arrays.sort(filenameArray);

    if (filenameArray.length == 0){
        return "0";
    }

    if (filenameArray.length == 2500){
        return "too_many_items";
    }

    if (!filenameArray[0].equals("0")){
        return "0";
    }

    int arrayLength = filenameArray.length;
    int i;

    for(i=0; i<arrayLength-1;){

        firstArray = Integer.parseInt(filenameArray[i]);
        nextArray = Integer.parseInt(filenameArray[i+1]);

        if (firstArray+1 == nextArray){
            i++;
        }
    }
    return Integer.toString(nextArray+1);
} 
```

该方法似乎工作正常，但我不明白为什么它会影响程序的其余部分，因为它所做的只是返回一个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:14:22.880

`if (filenameArray.length == 2500){`应该是`if (filenameArray.length >= 2500){`，我怀疑。但更重要的是，

```
 for(i=0; i<arrayLength-1;){
        firstArray = Integer.parseInt(filenameArray[i]);
        nextArray = Integer.parseInt(filenameArray[i+1]); 
```

将访问`filenameArray[arrayLength]`不存在的。我想你的意思是

```
 for(i=0; i<arrayLength-2;){ 
```

并且您还应该检查数组中是否至少有两个元素。这听起来不对，对我来说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:44:32.817

好的，谢谢您的意见。

我相信我终于做对了。首先，该方法确实有问题，但这并不是真正的问题，一个好的答案应该是这样的：

`String`“a和调用返回分配给变量的 a 的方法之间存在区别`String`，因为为了`String`在另一个类中使用调用的方法，您可能需要将变量设置为`static`。这就是为什么`String`'方法调用'`String`不是。

关于代码中的错误以防万一有人感兴趣，`if`在

```
if (firstArray+1 == nextArray) 
```

需要`else`，以防文件名之间有空格，就像`1, 3, 4`下一个文件被命名为`2`.

另一个错误是我正在比较文件名，`Strings`因此当我对它们进行排序时，它们被排序为`1, 10, 2, 3, 4, 5, 6, 7, 8, 9`.

我使用的解决方案是在文件名的开头添加零，`0001, 0002,`等等。

# sql - 为什么 UNION 会带回一个空行？

> ID：13692628
> 
> 赞同：1
> 
> 时间：2012-12-03T22:07:52.540
> 
> 标签：sql, tsql, union

我有两个选择语句。

```
SELECT ...

UNION

SELECT ... 
```

如果我运行第一个 SELECT，数据恢复正常。

如果我运行第二个 SELECT，数据恢复正常。

如果我使用 UNION 同时运行两者，则第一行始终为 NULL。

我不明白。任何人都知道为什么这可能会导致问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:12:10.037

您的数据中有一个 NULL 行。令人兴奋的是，它`union`正在做一个排序，它将 NULL 带到第一行。

如果要消除 NULL 值，请使用`where`子句。

如果您希望通过不消除重复来提高查询效率，请使用`union all`.

# c# - 查询List项的多个属性

> ID：13692630
> 
> 赞同：1
> 
> 时间：2012-12-03T22:08:01.247
> 
> 标签：c#, linq, search

我有一个列表类型：

```
List<Concept>
  --- Property
  --- List<Class2>
  --- --- Class2pty
  --- --- Class2pty2
  --- List<Class3>
  --- --- Class3pty 
```

有一个查询字符串，我需要一个新的**概念**列表，该列表在任何属性（嗯，一种属性）上都有该查询字符串，例如*Property*或*Class2pty2*，*Cl​​ass3pty* ...

使用*Where* I can query *Property*但我不知道如何查询*Class2pty*如果匹配，则返回具有该*Class2的***概念**

 *那么，我可以用一个嵌套查询来做到这一点还是我能做什么？

**编辑**：由于我不清楚，我举个例子

想象一下，我有一个“foo”的查询字符串，我有一个包含这 4 个项目的列表

```
Concept
  --- Property = "foo"
  --- List<Class2>
  --- --- Class2pty
  --- --- Class2pty2
  --- List<Class3>
  --- --- Class3pty

Concept
  --- Property
  --- List<Class2>
  --- --- Class2pty = "foo"
  --- --- Class2pty2
  --- List<Class3>
  --- --- Class3pty

Concept
  --- Property
  --- List<Class2>
  --- --- Class2pty = "bar"
  --- --- Class2pty2
  --- List<Class3>
  --- --- Class3pty

Concept
  --- Property
  --- List<Class2>
  --- --- Class2pty
  --- --- Class2pty2
  --- List<Class3>
  --- --- Class3pty = "foo" 
```

第一个列表项在*Property上有***foo**，在第二个项目上（想象 List< Class2 > 有大约 10 个*Class2*实例，其中一个（或者可能更多））在*Class2Pty上有***foo** ，第三个项目在任何属性上都没有**foo**（在 Concept 实例本身和内部实例中），四个项目确实有它。

 *******因此，当任何概念项目（包括他们的孩子）具有该**foo**项目的属性时，返回概念项目。在我们的例子中，1、2 和 4。

简而言之，拥有一个带有内部列表的概念列表，返回每个具有该字符串属性的概念，或者如果它们的一个子实例具有它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:13:44.270

如果我正确理解您的问题，您想选择与条件匹配的外部类，并包含与条件匹配的内部类？

```
testConcepts.Where( c => c.Property == "SomeValue" 
                         && c.Classes.Any(cls => cls.Class2Pty > 1) ); 
```

如果概念没有匹配的属性，则将其消除。如果它们包含与预期标准匹配的类，则将返回与该属性匹配的概念。（在我的示例中，包含一个值 > 1 的属性，可以是任何条件。）

要从与其属性匹配的容器中返回匹配的子类，`.SelectMany()`可以使用：

```
testClasses = testConcepts.Where( c => c.Property == "SomeValue")
                       .SelectMany( c => c.Classes ).Where( cls => cls.Class2Pty > 1 ); 
```********

# c# - Linq to SQL：如果连接条件的左侧等于 NULL，则抛出对象引用异常

> ID：13692634
> 
> 赞同：2
> 
> 时间：2012-12-03T22:08:10.420
> 
> 标签：c#, linq-to-sql

这是我的查询：

```
from f in DataAccess.Data.FList
join fA in DataAccess.Data.FAppsList on f.ID equals fA.fID into fApps
from fA in fApps.Where(fA => fA.Year == reportYear).DefaultIfEmpty() 
join fSrc in DataAccess.Data.FSourcesList on new { ID = fA.sourceID, CropYear = reportYear } 
equals new { ID = fSrc.ID, CropYear = fSrc.CropYear } 
```

如果 fA == null，我得到对象引用 null 异常。我正在对 fA 进行左连接，因此它可能为空值或非空值。如何重写这部分查询，以便在 fA 为空时查询不会引发异常。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:12:56.307

[三元条件运算符 ( `?:`)](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)中的常见构造可用于*保护*`null-valued`在表达式上调用成员：

```
foo != null ? foo.bar : anExpressionThatDoesNotUseFoo 
```

在上下文中：

```
new {
  ID = fA != null ? fA.sourceID : 0, // or as appropriate
  ..
} 
```

# python - Tkinter ScrolledFrame 初始尺寸

> ID：13692636
> 
> 赞同：0
> 
> 时间：2012-12-03T22:08:18.147
> 
> 标签：python, tkinter

我正在使用[PWM ScrolledFrame](http://pmw.sourceforge.net/doc/ScrolledFrame.html)，我想让它的大小小于默认大小。我不想使用固定大小（`usehullsize=1`选项）。

这是我尝试过的：

```
import Tkinter
import Pmw

root = Tkinter.Tk()
Pmw.initialise(root)

sf = ScrolledFrame(root)
sf.interior().configure(height=50, width=50, bg='yellow')
sf.pack()

root.mainloop() 
```

但这会导致：

![在此处输入图像描述](../Images/e146a78d4a07ad2cc3e9d887b668a32e.png)

理发器框架显然不受内部框架配置尺寸的影响。我可以以某种方式访问​​剪辑器框架来配置它的大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:05:33.057

您应该在 之后包含以下行`sf = ScrolledFrame(root)`：

```
sf._clipper.config(width='value_you_want', height='value_you_want') 
```

一个完整的例子：

```
#! /usr/bin/python3.2

import tkinter
import Pmw

root = tkinter.Tk()
Pmw.initialise(root)

sf = Pmw.ScrolledFrame(root)
sf._clipper.config(width=100, height = 200)
sf.interior().configure(height=80, width=80, bg='yellow')

sf.pack()

root.mainloop() 
```

结果：

![在此处输入图像描述](../Images/2f74bff10b8cf3189b9330f6e28d89db.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:36:23.097

好吧，只是说，我以前从未使用过这个。但是，您在问题中链接的不只是这一部分吗？

```
self.sf = Pmw.ScrolledFrame(parent,
            labelpos = 'n', label_text = 'ScrolledFrame',
            usehullsize = 1,
            hull_width = 400,
            hull_height = 220,
    ) 
```

hull_width 和高度？

# c# - WlanGetAvailableNetworkList 第一次调用失败然后成功

> ID：13692640
> 
> 赞同：2
> 
> 时间：2012-12-03T22:08:24.037
> 
> 标签：c#, windows, network-programming, wifi

我正在尝试调用 WlanGet 可用网络，但它失败并出现错误 1168 (ERROR_NOT_FOUND)，然后重新运行成功。我认为这是我初始化 out 指针的方式，但无法使其工作，即使我可以重复获得 GUID 指针。我正在构建一个供我自己使用的托管包装器，所以现在我的调用代码是一个 Nunit 框架。

失败运行的输出：

```
 ***** zz_Test_Fixture_TDD.NetworkListTester.NetworkListTest
Guid Pointer = 89327880
Client Handle and GUID pointers initialized
 handle 1   Guid pointer = 89327880 Avail network pointer = 0
 handle 1   Guid pointer = 89327880 Avail network pointer = 0
Wlan Get Avail networks Failed by error =1168 
```

通过运行的输出：

```
***** zz_Test_Fixture_TDD.NetworkListTester.NetworkListTest
Guid Pointer = 89008544
Client Handle and GUID pointers initialized
 handle 17   Guid pointer = 89008544 Avail network pointer = 0
 handle 17   Guid pointer = 89008544 Avail network pointer = 89415752
Number of Networks Found = 18 
```

这是我的代码：

```
 [TestFixture]
            public class NetworkListTester
            {
             IntPtr pclientHandle;
            Guid ThisInterfaceGuid;
            IntPtr pGuid;

            [Test]
            public void NetworkListTest()
            {
             pclientHandle = WiFiApi.GetClientHandle();
            ThisInterfaceGuid = WiFiApi.GetCurrentInterfaceGuid(pclientHandle);
            pGuid = WiFiApi.GetCurrentInterfaceGuidPointer(pclientHandle);
            Console.WriteLine("Guid Pointer = " + pGuid);
            Console.WriteLine("Client Handle and GUID pointers initialized");

            IntPtr pAvailNetWorks = new IntPtr();

        uint dwFlags = 3;
        uint error = 99;
        Console.WriteLine(" handle " + pclientHandle + "   Guid pointer = " + pGuid + " Avail network pointer = " + pAvailNetWorks);
        error = WiFiApi.WlanGetAvailableNetworkList(pclientHandle, pGuid, dwFlags, IntPtr.Zero, out pAvailNetWorks);
        Console.WriteLine(" handle " + pclientHandle + "   Guid pointer = " + pGuid + " Avail network pointer = " + pAvailNetWorks);
        if (error != 0)
        {

            Console.WriteLine("Wlan Get Avail networks Failed by error =" + error);
//same impact with or without this retry
//also added a Thread.Sleep(60000); before the call with no impact
            error = WiFiApi.WlanGetAvailableNetworkList(pclientHandle, pGuid, dwFlags, IntPtr.Zero, out pAvailNetWorks);

        }
        else
        {
            //tests intentionally outside of else so they will fail if an error.
        }
        //todo get managed pointer for available networks
        WiFiApi.WLAN_AVAILABLE_NETWORKS_LIST NetworkList = (WiFiApi.WLAN_AVAILABLE_NETWORKS_LIST)Marshal.PtrToStructure(pAvailNetWorks, typeof(WiFiApi.WLAN_AVAILABLE_NETWORKS_LIST));
        Console.WriteLine("Number of Networks Found = " + NetworkList.NumberOfNetworks);
        Assert.Greater(NetworkList.NumberOfNetworks, 0);
        Assert.Less(NetworkList.CurrentNetwork, NetworkList.NumberOfNetworks);

                //close handle
        WiFiApi.CloseClientHandle(pclientHandle);
        WiFiApi.WlanFreeMemory(pGuid);
                WiFiApi.WlanFreeMemory(pAvailNetWorks);

            } 
```

这是我正在调用的函数：

```
 [DllImport("Wlanapi.dll")]
    public static extern uint WlanGetAvailableNetworkList(
                IntPtr _hClientHandle,
                IntPtr _InterfaceGuid,
                UInt32 _dwFlags,
                IntPtr _pReserved,
                out IntPtr ppAvailableNetworkList); 
```

# coldfusion - web.config MS Access 查询

> ID：13692641
> 
> 赞同：1
> 
> 时间：2012-12-03T22:08:30.603
> 
> 标签：coldfusion, web-config

我想在 web.config 中对我的产品页面进行自动重写。所以像这样的“itemdetail.cfm?ProductID=4399”变成了“products/Ipad_3”。我得到了这个工作

```
<?xml version="1.0"?>
  <configuration> 
    <system.webServer>     
      <rewrite> 
        <rules> 
          <rule name="Rewrite for Products" stopProcessing="true"> 
            <match url="products/(.+)" /> 
            <action type="Rewrite" url="itemdetail.cfm?ProductID={Products:{R:1}}" /> 
          </rule> 
        </rules> 
        <rewriteMaps> 
          <rewriteMap name="Products"> 
            <add key="Ipad_3" value="4399" /> 
          </rewriteMap> 
        </rewriteMaps> 
      </rewrite>
    </system.webServer> 
  </configuration> 
```

如何修改 web.config 中的代码以使其使用“ProductID”从 MS Access 数据库中获取“标题”？如果是coldfusion，查询将是这样的

```
<cfquery name="GetData" datasource="myaccessdns">
  SELECT Title 
  FROM   Products  
  WHERE  ProductID = #ProductID#
</cfquery> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:14:12.967

我认为您想使用[urlMappings](http://msdn.microsoft.com/en-us/library/ms228302%28v=vs.100%29.aspx)。

`/products/Ipad_3`您可以使用它来映射对to的请求`/itemdetail.cfm?ProductID=4399`（甚至可能源自使用您发布的代码重写的请求）。

这是一个不错的 urlMappings 指南：[A Look at ASP.NET 2.0's URL Mapping](http://www.4guysfromrolla.com/articles/011007-1.aspx)

（注意：不能使用 web.config 直接查询数据库）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:40:01.190

是的，正如我所提到的，您的想法是正确的，您只需要 ColdFusion 定期在 web.config 中生成 rewriteMap（或者在每次更改产品标题或添加/删除新产品时将其绑定以重新生成）

生成重写映射.cfm

```
<cfquery name="AllProducts" datasource="#request.dsn#">
     select ProductID, URLTitle
     from Products
</cfquery>

<cfsavecontent variable="WebConfigFileData"><?xml version="1.0"?>
  <configuration> 
    <system.webServer>     
      <rewrite> 
        <rules> 
          <rule name="Rewrite for Products" stopProcessing="true"> 
            <match url="products/(.+)" /> 
            <action type="Rewrite" url="itemdetail.cfm?ProductID={Products:{R:1}}" /> 
          </rule> 
        </rules> 
        <rewriteMaps> 
          <rewriteMap name="Products">
            <cfoutput query="allProducts"><add key="#URLTitle#" value="#ProductID#" />
            </cfoutput>
          </rewriteMap> 
        </rewriteMaps> 
      </rewrite>
    </system.webServer> 
  </configuration></cfsavecontent>

<!--- Backup the Original Web.Config --->
<cffile
  action = "copy"
  source = "c:/inetpub/wwwroot/mysite/web.config"
  destination = "c:/inetpub/wwwroot/mysite/web.config.#getTickCount()#">

<cffile
  action = "write"
  file = "c:/inetpub/wwwroot/mysite/web.config"
  output = "#WebConfigFileData#"> 
```

我这样做的另一种方法是在 /products/This_Products_Title 解析出 /products/ 之后的所有内容之后转换 /products.index.cfm 以搜索标题，然后在数据库中搜索产品的标题并拉出相应的页面。没有找到任何东西，将用户返回到主页。这确实需要您更改应用程序中的所有链接以使用 FriendlyURLTitle。

# css - 使用@font-face kit 让Agenda Font 在IE9 中工作... font-squirrel 说字体局已经禁止它

> ID：13692652
> 
> 赞同：0
> 
> 时间：2012-12-03T22:09:34.407
> 
> 标签：css, fonts, internet-explorer-9, font-face

好的，所以我试图让 IE9 显示字体议程。我像往常一样去了fontsquirrel，它说字体局不允许他们创建字体工具包。然后我去了codeandmore并在那里制作了套件，但他们没有给你专家选项来制作字体的精简版。在 IE 9 中，我收到错误 CSS3111 和 CSS3114：

```
CSS3111: @font-face encountered unknown error. 
agenda-light.eot?#iefix
CSS3114: @font-face failed OpenType embedding permission check. Permission must be Installable. 
agenda-light.ttf 
```

我已经尝试了多种解决方法，例如使字体专门针对 woff，但这是行不通的。

```
@font-face {
        font-family: 'IE9Agenda-Light';
        src: url('agenda-light.woff') format('woff');
        font-weight: normal;
        font-style: normal;
} 
```

我添加了一个具有以下语法的 .htaccess 文件：

```
AddType font/ttf .ttf
AddType font/eot .eot
AddType font/otf .otf
AddType font/woff .woff 
```

我想我需要在这里放置某种配置文件，但不确定要使用什么：我的客户也购买了字体，所以我没有非法字体。这是我的代码：

```
@font-face {
        font-family: 'Agenda-Bold';
        src: url('agenda-bold.eot?') format('embedded-opentype'),
                 url('agenda-bold.woff') format('woff'),
                 url('agenda-bold.ttf') format('truetype'),
                 url('agenda-bold.svg#agenda-bold') format('svg');
        font-weight: normal;
        font-style: normal;
}

@font-face {
        font-family: 'Agenda-Light';
        src: url('agenda-light.eot');
        src: url('agenda-light.eot?#iefix') format('embedded-opentype'),
                 url('agenda-light.woff') format('woff'),
                 url('agenda-light.ttf') format('truetype'),
                 url('agenda-light.svg#agenda-light') format('svg');
        font-weight: normal;
        font-style: normal;
} 
```

这适用于除 IE9 之外的所有浏览器，如果有人有替代字体松鼠的字体生成器，它将把 eot 文件打包为 lite 版本而不是 eot.compressed 版本，这将很有帮助，这似乎是唯一的解决方法我还没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:46:36.303

[根据http://www.fontbureau.com/webfonts/](http://www.fontbureau.com/webfonts/)，似乎 Agenda 字体仅可作为托管服务用于网络字体，这意味着您应该使用提供的代码来引用该服务，而不是生成自己的字体文件。

如果字体是根据普通（非网络字体）许可购买的，则不允许将其用作网络字体。见[http://www.webtype.com/info/articles/fonts-and-the-law/](http://www.webtype.com/info/articles/fonts-and-the-law/)

# java - 在另一个类 (GUI) 上使用 JFileChooser 选择并运行 java 类或调用类中的方法

> ID：13692656
> 
> 赞同：-1
> 
> 时间：2012-12-03T22:09:49.110
> 
> 标签：java, jfilechooser

我有一个`A.java`包含类的文件，该类`A`的方法`aMethod()`保存在 PC 上的文件夹中（不在包或工作区中）。

我有一个`JFileChooser`在另一个班级（`GUI`）。我希望能够选择类`A`并运行它，或者`A::aMethod()`使用`JFileChooser`.

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:25:55.920

您需要将类加载`A`到自定义类加载中，以便执行它。

这涉及到许多问题。第一个围绕包名称，第二个围绕实际调用类方法。

下面的例子基本上使用 a`URLClassLoader`来指向一个类目录，这些类被布局在我们那里正确的包结构中。本质上为自定义类加载器提供了它的类路径

```
try {
    URLClassLoader classLoader = new URLClassLoader(new URL[] {new File("path/to/classes/").toURI().toURL()});
    Class<?> loadClass = classLoader.loadClass("dynamicclasses.TestClass");
    Object newInstance = loadClass.newInstance();
    System.out.println(newInstance);
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

该示例还依赖于加载的类`toString`方法来返回结果。在我的测试中，我只是转储了类类加载器引用。

第二个问题更难克服。你有两个基本的选择。

1.  您可以定义一个对当前运行时和动态加载的类都可用的通用接口。这允许您将加载的类转换为某个已知接口，从而使您能够调用加载的类方法（因为您已经在两者之间建立了契约）
2.  使用反射调用已加载类的方法。

我更喜欢第一个选项，但这确实意味着如果您更改接口，则需要重新编译双方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:28:56.973

所以我已经取得了一些进展。不是我想去的地方，但它很好......

我的 GUI 有一个按钮，可以执行以下操作：

```
btnButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            runFAQm();
        }
    }); 
```

单击按钮时在 GUI 中调用的方法是 runFAQm()。方法 runFAQm() 使用 Runtime 运行保存在其他目录中的 java 文件。

```
public static void runFAQm(){
try {                   
                String[] cmdArray = new String[2];
                // first argument is the program we want to open
                cmdArray[0] = "java";
                // second argument is a txt file we want to open with notepad
                cmdArray[1] = "FAQm";
                // print a message
                // create a file which contains the directory of the file needed
                File dir = new File(
                        "c:/Documents and Settings/AESENG/My Documents/MK/Selenium_Practice/workspace/TestCDM/src");
                // create a process and execute cmdArray and currect environment
                Process p = Runtime.getRuntime().exec(cmdArray, null, dir);
                BufferedReader in = new BufferedReader(new InputStreamReader(
                        p.getInputStream()));
                String line = null;
                while ((line = in.readLine()) != null) {
                    System.out.println(line);
                    textArea.append(line);
                }
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

通过 runFAQm() 方法中的 runtime() 运行的 java 文件（称为 FAQm.java）启动 Firefox 浏览器。当然我有sun Javac。

```
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import static org.junit.Assert.*;
import org.openqa.selenium.*;

public class FAQm {
static WebDriver driver = new FirefoxDriver();

public static void main(String[] args) throws Exception {
    System.out.print("inside FAQm main" );      
} 
```

**我现在的问题是我可以从命令行和 eclipse 运行 Class FAQm，但是当我通过单击按钮从 GUI 运行它时它挂起。它仅在启动 Webdriver 时挂起。如果我注释掉 //static WebDriver driver = new FirefoxDriver(); 程序运行良好。**

# html - 如何测量特定字体大小的特定字体的文本大小

> ID：13692660
> 
> 赞同：0
> 
> 时间：2012-12-03T22:10:23.520
> 
> 标签：html, css, font-size

我想对需要在网页上的框中显示的文本进行修剪。已知参数是字体系列、字体大小、要显示的字符数和实际文本，当然还有边界框的宽度。

我需要计算修剪源文本的位置以及放置“...”的位置

我有一个想法，但它不是太快。

如果有其他方法可以在 CSS 中进行修剪，我想知道它，我也可以接受它作为解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:27:47.827

您无法提前计算。您需要在浏览器中定位实际文本并测量输出。如果需要，您可以使用否定文本缩进在屏幕外执行此操作。

有一些 jQuery 插件可以根据一个固定大小的容器设置省略号，并带有溢出。

请参阅：http: [//archive.plugins.jquery.com/plugin-tags/ellipsis](http://archive.plugins.jquery.com/plugin-tags/ellipsis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:49:43.067

只要您不需要支持较旧的浏览器，您就可以使用这个简单的 css：

```
text-overflow:ellipsis; 
```

[http://www.w3schools.com/cssref/css3_pr_text-overflow.asp](http://www.w3schools.com/cssref/css3_pr_text-overflow.asp)[在此处输入链接描述](http://www.w3schools.com/cssref/css3_pr_text-overflow.asp)

# java - 使用迭代器和 iterator.remove() 时出现 ConcurrentModificationException

> ID：13692661
> 
> 赞同：4
> 
> 时间：2012-12-03T22:10:26.230
> 
> 标签：java, collections, iterator, concurrentmodification

```
 private int checkLevel(String bigWord, Collection<String> dict, MinMax minMax)
{
    /*value initialised to losing*/
    int value = 0; 
    if (minMax == MinMax.MIN) value = 1; 
    else value = -1; 

    boolean go = true;

    Iterator<String> iter = dict.iterator();

    while(iter.hasNext())
    {
        String str = iter.next(); 
        Collection<Integer> inds = naiveStringSearch(bigWord, str);

        if(inds.isEmpty())
        {
            iter.remove();
        }

        for (Integer i : inds)
        {
            MinMax passin = minMax.MIN;
            if (minMax == MinMax.MIN) passin = minMax.MAX;

            int value2 = checkLevel(removeWord(bigWord, str, i), dict, passin); 
            if (value2 == -1 && minMax == minMax.MIN)
            {
                value = -1; 
                go = false;
            }
            if (value2 == 1 && minMax == minMax.MAX)
            {
                value = 1; 
                go = false; 
            }

        }

        if (go == false) break; 
    }

    return value;
} 
```

错误：

```
Exception in thread "main" java.util.ConcurrentModificationException
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:810)
at java.util.HashMap$KeyIterator.next(HashMap.java:845)
at aStringGame.Main.checkLevel(Main.java:67)
at aStringGame.Main.test(Main.java:117)
at aStringGame.Main.main(Main.java:137) 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T22:11:53.787

某处正在修改`dict`。我怀疑它可能发生在这个调用中：

```
int value2 = checkLevel(removeWord(bigWord, str, i), dict, passin);
                                                     ^^^^ 
```

**编辑**基本上，发生的事情是递归调用通过*另一个*迭代器进行`checkLevel()`修改。这使得外部迭代器的快速失败行为开始发挥作用。`dict`

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T22:11:56.140

当您使用迭代器对其进行迭代时，您无法修改集合。

您尝试调用*iter.remove()*违反了此规则（您的*removeWord*方法也可能）。

**如果**您使用**ListIterator**进行迭代，则可以在迭代时修改 List [。](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html)

 **您可以将 Set 转换为 List 并使用 List 迭代器：

```
List<String> tempList = new ArrayList<String>(dict);
ListIterator li = tempList.listIterator(); 
```

* * *

另一种选择是在迭代时跟踪要删除的元素。

例如，您可以将它们放在 Set 中。

然后，您可以在循环之后调用*dict.removeAll()*。

例子：

```
Set<String> removeSet = new HashSet<String>();
for (String s : dict) {
    if (shouldRemove(s)) {
        removeSet.add(s);
    }
}
dict.removeAll(removeSet); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T22:13:02.217

使用`for each`循环时，您不允许修改`Collection`您在循环内迭代的内容。如果需要修改，请使用经典`for`循环

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T22:13:28.787

这是所有 Collections 类中常见的情况。例如，TreeSet 中的条目使用 failfast 方法。

> 此类的迭代器方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间修改集合，除了通过迭代器自己的 remove 方法之外，迭代器将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

[http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)***

# java - 在 Java 中观察/捕获 302 重定向

> ID：13692667
> 
> 赞同：1
> 
> 时间：2012-12-03T22:11:11.970
> 
> 标签：java, http, redirect, httpurlconnection, http-status-code-302

我有一个正在测试的 Web 应用程序。使用 Fiddler/Httpfox，我可以看到在登录 Web 应用程序时，在收到 200 OK 响应之前有两个 302 HTTP 重定向。是否可以使用 Java 代码观察这两个重定向？

这是我编码的：

```
public class HttpReq {
    HttpURLConnection con = null;
    StringBuilder str = new StringBuilder();
    BufferedReader br = null;
    URL address = null;
    String line = null;

    HttpReq () {
      try {
        address = new URL("http://walhs24002v.us.oracle.com/t1mockapp1/");
        con = (HttpURLConnection)address.openConnection();
        con.setRequestMethod("GET");
        con.setReadTimeout(60000);
        con.setConnectTimeout(60000);
        con.setDoOutput(true);
        con.setInstanceFollowRedirects(true);

        con.connect();

        InputStreamReader is  = new InputStreamReader(con.getInputStream());
        br = new BufferedReader(is);
        while((line = br.readLine()) != null)
        {
            str.append(line + '\n');
        }
        //System.out.println(str);
        System.out.println(con.getResponseCode());
        System.out.println(con.getResponseMessage());
      }
      catch (MalformedURLException m)
      {
        m.printStackTrace();
      }
      catch (IOException i)
      {
        i.printStackTrace();
      }
      finally
      {
        br = null;
        str = null;
        con = null;
      }
  }

  public static void main(String[] args) {
    HttpReq http = new HttpReq();
      }

} 
```

程序给出输出：200 OK

那里没有惊喜。有没有办法在收到 200 ok 之前捕获两个 302 重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:47:48.177

使用 defaulthttpclient 你肯定可以：

[http://hc.apache.org/httpcomponents-client-ga/tutorial/html/httpagent.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/httpagent.html)

> ClientPNames.HANDLE_REDIRECTS='http.protocol.handle-redirects'：定义是否应该自动处理重定向。此参数需要 java.lang.Boolean 类型的值。如果未设置此参数，HttpClient 将自动处理重定向。

# javascript - Backbone：从名称数组中过滤模型

> ID：13692668
> 
> 赞同：0
> 
> 时间：2012-12-03T22:11:12.663
> 
> 标签：javascript, backbone.js

有一个 id 的数组

```
['tom','tim','joe','matt','scott'] 
```

每个模型都有一个带有 id 的属性。

我怎样才能抓住所有 5 个模型并放入一个新系列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:15:04.353

在相应的集合上使用[下划线过滤方法怎么样？](http://documentcloud.github.com/backbone/#Collection-Underscore-Methods)

```
var ids = ['tom','tim','joe','matt','scott'];

var matches = collection.filter(function (model) { 
   return ids.indexOf(model.id) > -1; 
}); 
```

如果您需要`fetch`来自持久层的模型，您可以考虑使用`id`属性集生成模型集合并提供适当的端点来填充其他属性：

```
var MyCollection = Backbone.Collection.extend({
  model: MyModel, // whatever your model is
  url: '/byname'  // whatever the endpoint is
});

var models = [];

_.each(ids, function (id) {
  models.push({ id: id });
});

var collection = new MyCollection;
collection.fetch({ models: models }); // fetch the associated models 
```

无论您提供什么端点（`/byname`在上面的示例中），都应该准备好生成一个集合，该集合包含每个模型的 id 在`models`参数中指定。

# ruby-on-rails - 导轨中的产量布局

> ID：13692673
> 
> 赞同：2
> 
> 时间：2012-12-03T22:11:32.453
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试向应用程序布局添加布局。我在尝试找出所有不同的布局解决方案时遇到了麻烦。首先，我只尝试了布局内的布局，因为我没有完全掌握部分是什么，或者它们是否也是布局？也许我可以从这个问题开始。布局和局部有什么区别。

这是我现在所拥有的。我正在尝试将具有导航和其他一些元素的标题代码分离到单独的布局中。我希望这个布局出现在所有视图上。这意味着它应该是应用程序布局内的布局，以及在调用其控制器时调用的其他视图。我的代码中包含 <%= yield %>。该产量有效，但 :header 无效。

**应用程序布局** app/views/layouts/application.html.erb

```
<!DOCTYPE html>
<html>
<head>
  <title>home</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
    <div id="header"><%= yield(:header) %></div> 
    <%= yield %>
</body>
</html> 
```

**标题布局** app/views/layouts/application.html.erb

```
<% content_for :header %>
    <p>HEADER TEXT</p>
<% end %> 
```

为什么上面的代码不起作用？

我也看到了我尝试过的这样的代码，但它给了我一个错误。

```
<%= render layouts/header %> 
```

有人可以解释所有这些不同的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:30:48.617

```
 <% content_for :header do %>
    <p>HEADER TEXT</p>
<% end %> 
```

你忘了`do`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:50:57.970

最好将页眉和页脚分成部分，您将分别作为“_header.html.erb”和“_footer.html.erb”存在于视图/布局文件夹中。

然后，您可以选择用特定的 div 包装每个部分，这是您尝试对标头执行的操作（您也可以对主体执行相同的操作），它最终看起来像这样：

```
<!DOCTYPE html>
<html>
<head>
  <title>home</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

    <div id="header">
      <%= render 'layouts/header' %>
    </div> 
    <%= yield %>

    <div id="footer">
     <%= render 'layouts/footer' %>
    </div>
</body>
</html> 
```

这将做你想做的事。

请注意，'layouts/header' 和 'layouts/footer' 周围有 ''。

要回答您关于布局和部分之间有什么区别的问题，布局是在整个应用程序中使用的东西，例如一致的页眉或页脚。部分可以是布局，但并非必须如此，因此您可以部分特定于您网站上的其他视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:56:54.237

所以 - 首先 - yield 语法可能正确也可能不正确，但我从未见过它，而且我不喜欢它。我只在文件中调用一次 yield 。

如果你想在你的应用程序模板文件中呈现一个标题，那当然是可能的——我的建议是直接将它放在你的模板文件中——毕竟，这就是模板文件的用途。如果您出于某种原因想将您的标头完全封装在单独的文件中，您需要的是部分文件。你要做这样的事情：

```
<body>
    <%= render :partial => "shared/header" %>
    <%= yield %>
</body> 
```

这会将存储在 /shared/_header.html.erb 中的标题内容呈现到此处的布局中。

在此处查看[本指南](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)以获取更多信息

# php - 在php中访问当前类的函数版本

> ID：13692674
> 
> 赞同：0
> 
> 时间：2012-12-03T22:11:33.370
> 
> 标签：php, javascript, class

我正在尝试用 PHP 开发一个可以生成 JS“类”的系统，并且我有一个可以工作的实现。我遇到的问题围绕着这些 JS 类的多个包含；我的代码每次需要时都会打印出 JS 类，我希望它只在第一次打印出来。

我目前对这个问题的解决方案是不优雅的；它要求 PHP 类开发人员显式调用一个函数，该函数将检查 JS 类是否已包含在内。例如：

```
public function getJSClass() {
//:: Call Parent
$js = parent::getJSClass();

//:: Add Current Class
if ($this->classNeeded('SearchAndManageDataManipulator')) {
    $js .= "
        //|| Class: SearchAndManageDataManipulator
        /**
         * Base class for applications which feature a search and results control
         * as the central element of the application.  Such applications generally
         * specialize in handling multiple records at once.
         */
        function SearchAndManageDataManipulator() {

            // ...

        }
        SearchAndManageDataManipulator.inheritsDM(WindowedDataManipulator);
    ";
}

//:: Return
return $js;
} 
```

我想将此检查与类开发人员隔离开来，使其类似于以下内容：

```
public function getJSClass() {
return "
        //|| Class: SearchAndManageDataManipulator
        /**
         * Base class for applications which feature a search and results control
         * as the central element of the application.  Such applications generally
         * specialize in handling multiple records at once.
         */
        function SearchAndManageDataManipulator() {

            // ...

        }
        SearchAndManageDataManipulator.inheritsDM(WindowedDataManipulator);
    ";
} 
```

所以，我想创建一个调用 getJSClass 的函数，如果需要该类，以及任何父 getJSClass()es; 该函数将需要类的名称，以检查它是否已被包含。该类名是通过覆盖另一个函数 jsClassName() 来设置的；但是调用 jsClassName() 将始终返回类层次结构中最低的类的类名，因为它是该函数的最新覆盖版本。

如果父类正在调用 getJSClass()，我需要它能够检查 jsClassName() 中的类名是否已包含在内。但它不能是 jsClassName() 的版本已被最低类覆盖，它需要是父类中定义的版本。

有没有办法访问函数的“当前”类的版本？当前，我的意思是定义当前函数的类。这样，当我们向上移动 parent:: 链时， jsClassName 将反映有问题的类名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:00:07.033

您可以使用数组来跟踪您的类链，并且仅在 key 不存在时添加一个类`jsClassName()`：

```
public function getJSClass()
{
    $chain = parent::getJSClass();

    return $chain + array(
        $this->jsClassName() => "implementation here",
    );
} 
```

最顶层的实现在初始化数组时会略有不同：

```
public function getJSClass()
{
    return array(
        $this->jsClassName() => "implementation",
    );
} 
```

# c# - 如何在数据表中创建组合框列

> ID：13692677
> 
> 赞同：1
> 
> 时间：2012-12-03T22:11:40.660
> 
> 标签：c#, winforms, datagridview

这几天我一直在为此苦苦挣扎，我把 DataTables 和 dataGridViews 都搞混了。

我有一个 WinForms 程序，它有一个 DataGridView、dataGridView1 和一个 DataTable，出现错误。

```
public static DataTable errors = new DataTable();
dataGridView1.DataSource = errors; 
```

现在，再往下，在一个名为 ValidateText 的方法中，我将文本文件中的数据逐行读取到一个数组中，其中我还定义了错误数据表的列：

```
 errors.Columns.Add("Account Number");
 errors.Columns.Add("Customer Name");
 errors.Columns.Add("Country");
 errors.Columns.Add("State");
 errors.Columns.Add("Ship-to Country");
 errors.Columns.Add("Ship-to State");

 var lines = File.ReadAllLines(file);

   foreach (string line in lines)
   {.
    . 
    . 
    string []items=line.Split('\t').ToArray();
    errors.Rows.Add(items[0], items[1],...items[5]); 
```

当我运行它时，它工作得很好。问题是，我想让“国家”列中有一个组合框，所以当程序运行时，数据显示在 dataGridView1 中，用户将有机会选择一个新的国家，如果他们想要，从“国家”一栏。在程序的更下方，我确实定义了一个创建 DataGridViewComboBoxColumn 的方法

```
private DataGridViewComboBoxColumn CreateComboBoxColumn()
    {
        DataGridViewComboBoxColumn buildCountries = new DataGridViewComboBoxColumn();
        buildCountries.HeaderText = "List of Countries";
        DataTable dataTable = new DataTable();
        dataTable.Columns.Add("Keys");
        dataTable.Columns.Add("Values");
        KeyValuePair<string, string>[] array = CountryList.ToArray();
        foreach (KeyValuePair<string, string> kvp in array)
        {
            dataTable.Rows.Add(kvp.Key, kvp.Value);
        }
        buildCountries.DataSource = dataTable;
        buildCountries.DisplayMember = "Values";
        buildCountries.ValueMember = "Keys";

        return buildCountries;

    } 
```

我遇到的问题是如何将我在最后一种方法中创建的组合框放入我在上面创建的“国家”列中？我觉得我没有得到 DataGridView 和 DataTable 的东西。您将 DataTable 绑定到 DataGridView，但添加此 DataGridViewComboBoxColumn 似乎很难。

谢谢，

阿曼达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:59:33.007

这只是我的建议，.NET 框架已经有一个国家列表。所以你可以使用这个类。我忘了是谁创建了这段代码:)

```
public static class CountryEntries
    {
        public static IEnumerable<Country> GetCountries()
        {
            return from ri in
                       from ci in CultureInfo.GetCultures(CultureTypes.SpecificCultures)
                       select new RegionInfo(ci.LCID)
                       orderby ri.DisplayName
                   group ri by ri.TwoLetterISORegionName into g                       
                   select new Country
                   {
                       CountryId = g.Key,
                       Title = g.First().DisplayName
                   };
        }
        public class Country
        {
            public string CountryId { get; set; }
            public string Title { get; set; }
        }
    } 
```

# r - 引导统计值

> ID：13692682
> 
> 赞同：5
> 
> 时间：2012-12-03T16:00:29.197
> 
> 标签：r, statistics-bootstrap

我想将引导统计的值（原始、偏差和错误）放入一个单独的列表中 - 但我不知道如何做到这一点。

这是一个例子：

```
> library(boot)
> set.seed(123)
> mean.fun <- function(data, idx) { mean(data[idx]) }
> data <- boot(data=rnorm(100), statistic=mean.fun, R=999)
> names(data)
 [1] "t0"        "t"         "R"         "data"     
 [5] "seed"      "statistic" "sim"       "call"     
 [9] "stype"     "strata"    "weights"  
> data
ORDINARY NONPARAMETRIC BOOTSTRAP

Call:
boot(data = rnorm(100), statistic = mean.fun, R = 999)

Bootstrap Statistics :
    original   bias    std. error
t1* 0.09040591 0.004751773  0.08823615 
```

现在，我想要的不是文本，而是实际值。显然`data$t0`是“原始”，但我不知道如何获得偏差和错误的值。

* * *

此外，由于输入函数名称会为您提供其代码，因此我输入`boost`了 R 并从源代码中复制了一个片段，并尝试在我的本地 R 安装中搜索它。但是什么也找不到。为什么，R 不应该从本地存储中获取源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:31:08.910

std.error 和bias 不作为引导对象的一部分存储。它是即时计算的（参见：[https](https://stat.ethz.ch/pipermail/r-help/2011-July/284660.html) ://stat.ethz.ch/pipermail/r-help/2011-July/284660.html ）

在您的情况下，请尝试：

```
mean(data$t) - data$t0
sd(data$t) 
```

# apache - 使一个 HTML 文件通过 PHP 处理器运行

> ID：13692685
> 
> 赞同：3
> 
> 时间：2012-12-03T22:12:01.017
> 
> 标签：apache, .htaccess

我有一个文件webpage.htm，其中有3 行左右的php。我还有其他扩展名为 .htm 的页面，但我只希望通过 PHP 预处理器运行 pages.htm。是否可以使用 .htaccess 文件中的 Apache 指令来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:15:33.323

是的，您可以通过修改 .htaccess 文件来做到这一点

```
<Files yourpage.html>
AddType application/x-httpd-php .html
</Files> 
```

或所有 html/htm 页面：

```
AddType application/x-httpd-php .html .htm 
```

这是一篇有用的文章 [http://php.about.com/od/advancedphp/p/html_php.htm](http://php.about.com/od/advancedphp/p/html_php.htm)

# php - 在 PHP 中按自定义顺序重新排列对象数组

> ID：13692687
> 
> 赞同：2
> 
> 时间：2012-12-03T22:12:11.803
> 
> 标签：php, arrays, sorting

我将如何重新排序对象数组，例如：

```
Array
(
    [0] => stdClass Object
        (
            [term_id] => 3
            [name] => Name
        )
    [1] => stdClass Object
        (
            [term_id] => 1
            [name] => Name2
        )
    [2] => stdClass Object
        (
            [term_id] => 5
            [name] => Name
        )
) 
```

根据对象 term_id，针对自定义定义的 id 数组：

> $order_by = 数组（5,3,1）

我现在使用的是下面，但我觉得我没有利用 PHP 的一些高级排序功能......谁能告诉我什么会更好？

```
$sorted_terms = array();
$order_by = array( 5,3,1 );

foreach( $order_by as $id ) {
    foreach ( $terms as $pos => $obj ) {
        if ( $obj->term_id == $id ) {
            $sorted_terms[] = $obj;
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T22:32:31.400

基本上，您的术语在其排序顺序中的排名与其对应的 id 的排名相同，这恰好是数组中的数组键`$order_by`。所以我们只需要翻转该数组以获取 id 到排名的映射，然后使用自定义比较函数对其进行排序。

这是一个应该可以工作的简单代码片段：

```
<?php

   $skeys = array_flip($order_by);
   usort($terms,
             function($a,$b) use ($skeys){$a =  $skeys[$a->term_id]; $b = $skeys[$b->term_id]; return $a - $b;}); 
```

上面的代码适用于 PHP 5.3 或更高版本。

这与 5.3 之前的 PHP 相同：

```
 <?php

   $skeys = array_flip($order_by);
   function sfun($a,$b){
       global $skeys;
       $a =  $skeys[$a->term_id]; $b = $skeys[$b->term_id]; return $a - $b;
   }

   usort($terms, "sfun"); 
```

重要的功能是：

*   [数组翻转](http://php.net/manual/en/function.array-flip.php)
*   [排序](http://php.net/manual/en/function.usort.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:17:17.717

这是[可用的 PHP 排序函数的比较](http://php.net/manual/en/array.sorting.php)。在您的情况下，您需要带有自己的比较器的东西-其中一个带有“排序顺序”标记为“用户定义”的东西，最有可能`uasort()`或`usort()`

**编辑**

自定义比较器必须返回 -1 或 0 或 +1。但是由比较器决定两个对象彼此相等或小于或大于彼此的真正含义以及使用哪些逻辑规则来判断。因此，您只需要编写您的逻辑，即如果对象 A 大于 B 根据您的逻辑规则返回 +1。这并不意味着 A 在数学意义上更大。如果我将苹果与自行车进行比较，我的比较器返回 +1，那么这意味着苹果大于自行车。我是这么说的。我的逻辑。时期。

所以，基本上，如果你可以将你的逻辑转化为算法，那么你可以编写一个由该逻辑/算法引导的代码，可以作为你的比较器来提供你想要的订单。

# html - 对于文件：// url，WebGL Inspector 扩展未出现在 Chrome 中？

> ID：13692692
> 
> 赞同：0
> 
> 时间：2012-12-03T22:12:27.137
> 
> 标签：html, webgl, three.js

我的步骤（这些是文档中描述的），在 Win 7 下：

1.  下载/解压 zip 文件
2.  使用 cygwin，运行 buildextensions.sh 文件，该文件创建了 lib 和扩展目录
3.  打开铬
4.  通过 chrome 商店安装了 webgl 扩展（从这里开始，各种重复关闭/重新启动 chrome，几乎没有帮助）
5.  chrome setup->extnesions，确保启用了webgl
6.  打开开发者模式，“加载解压的扩展程序......”选择（创建的）扩展程序/chrome 目录（在本例中为 C:\Users\kbjorke\Documents\benvanik-WebGL-Inspector-6108bee\benvanik-WebGL-Inspector -6108bee\core\extensions ) 并允许 "file://" url
7.  ？？？没有多少 relaod/update/restart 似乎会导致 GL 徽标出现在右上角的扩展按钮中——即使我加载 webgl 密集型页面，除非我首先从某个 NON-file:// 页面加载 webgl 页面-- 如果我打开另一个带有 http:// webgl 页面的选项卡，我会在该地址栏中看到红色的“GL”指示器 TWICE，但它们都指向 http:// 页面，而不是我的 file:// ！

除了将其推送到外部服务器之外，我如何访问自己的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:45:01.603

使用本地服务器。只需打开命令提示符，cd 到您的网页，然后键入

```
python -m SimpleHTTPServer 
```

然后去

```
http://localhost:8000 
```

我认为不允许在 file:: urls 上运行扩展，因为这样扩展就可以读取您的硬盘。

如果您正在制作视频或音频，请[尝试使用此节点服务器](https://stackoverflow.com/questions/12905426/faster-alternative-to-pythons-simplehttpserver)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T16:40:12.537

我刚刚下载了 WebGL Inspector 1.13，它有一个设置（在 Settings>Extensions>WebGL Inspector 下）显示为“允许访问文件 URL”。听起来像什么 - 一切就绪！

# java - 已完成程序中的线程“主”java.lang.NullPointerException 中的异常

> ID：13692693
> 
> 赞同：-3
> 
> 时间：2012-12-03T22:12:27.553
> 
> 标签：java, exception

我得到了我认为是完成的程序，现在 java 正在把它拉到我身上。

我得到的错误如下：

```
Exception in thread "main" java.lang.NullPointerException
    at hirecardemo.HireCar.isAvailable(HireCar.java:68)
    at hirecardemo.HireCarDemo.runSimulation(HireCarDemo.java:49)
    at hirecardemo.HireCarDemo.main(HireCarDemo.java:25)
Java Result: 1 
```

主类：

```
package hirecardemo;
import java.util.Random;

public class HireCarDemo {

    public static void main(String[] args) {
        HireCar car0 = new HireCar("Toyota", "AV77 FGJ", 6000, 12300, 41500);
        HireCar car1 = new HireCar("Mercedes", "DI99 FTZ", 6700, 7000, 91800);
        HireCar car2 = new HireCar("Toyota", "FG82 FTP", 25000, 12000, 72000);
        HireCar car3 = new HireCar("Vauxhall", "TW56 LTS", 10000, 11000, 19001);
        HireCar car4 = new HireCar("Ford", "TD85 LTU", 13000, 12300, 12000);
        HireCar car5 = new HireCar("Susuki", "GU12 UTJ", 12000, 10000, 50000);

        HireCar[] fleet = {car0, car1, car2, car3, car4, car5};
        int minMileage = 1000;
        int maxMileage = 60000;
        int numberOFevents = 12;

        String [] results = HireCarDemo.runSimulation(fleet, numberOFevents,
                minMileage, maxMileage);

        for(int i = 0; i < numberOFevents; i++) {
            System.out.println(results[i]);
        }
    }

    /**
    * @param fleet the fleet of hire cars
    * @param numberOFevents the size of the events table to be generated
    * @param minMileage the assumed minimum mileage driven by any hired
    * car
    * @param maxMileage the assumed maximum mileage driven by any hired
    * car
    * @return table of events generated during the simulation
    */
    public static String[] runSimulation(HireCar [] fleet, int numberOFevents, 
            int minMileage, int maxMileage) {
        int n = fleet.length; // Number of cars in the fleet.
        Random carGenerator = new Random();
        String [] events = new String [numberOFevents];
        for(int i = 0; i < numberOFevents; i++) {
            int randomNumber = carGenerator.nextInt(n-1);
            if(fleet[randomNumber].isAvailable() == true)
            {
                fleet[randomNumber].hireOut();
                events[i] = fleet[randomNumber].getRegNumber() + " <HIRE OUT>";
            }

            else if(fleet[randomNumber].isOnHire() == true)
            {
                Random mileage = new Random();
                int randomMileage = mileage.nextInt(maxMileage - minMileage); 

                if(fleet[randomNumber].isBeingServiced() == true)
                {
                    events[i] = fleet[randomNumber].getRegNumber() + 
                            " <RETURN FROM HIRE>" + " <SEND FOR SERVICE>";
                } else {
                    events[i] = fleet[randomNumber].getRegNumber() + 
                            " <RETURN FROM HIRE>";                    
                }
            }
            else 
            {
                fleet[randomNumber].makeAvailable();
                events[i] = fleet[randomNumber].getRegNumber() + 
                        " <RETURN FROM SERVICE>";
            }
        }
        return events;  
    }
} 
```

这是我的单独课程：

```
//******************************************************************************
// HireCar.java                                             Author: Ryan Holder
// 
// Represents the car hire company's fleet of cars and the information on them.
//******************************************************************************
package hirecardemo;

public class HireCar {

    private String manufacturer, regNumber, carStatus;
    private int mileage, serviceInterval, lastService; // All in miles.    

    private boolean serviceDue() { 
        if((mileage- lastService) >= serviceInterval) {
            this.sendForService();  
            return true;
        } else { 
            return false;
        }
    }

   private void sendForService() {
       carStatus = "Servicing";      
   }

    //--------------------------------------------------------------------------
    // Default Constructor: Sets information for a new car.
    //--------------------------------------------------------------------------    
    public HireCar(String demoManufacturer, String demoRegNumber) {
        manufacturer = demoManufacturer;
        regNumber = demoRegNumber;
        carStatus = "Available";
        serviceInterval = 0;        
        lastService = 0;
        mileage = 0;                 
    }  

      public HireCar(String demoManufacturer, String demoRegNumber, 
             int demoMileage, int demoServiceInterval, int lastInterval) { 
         manufacturer = demoManufacturer;
         regNumber = demoRegNumber;
         mileage = demoMileage;     
     }

    public void setMileage(int demoMileage) {
        mileage = demoMileage;
    }    

    public void setServiceInterval(int demoServiceInterval) {
        serviceInterval = demoServiceInterval;
    }

    public void setLastService(int demoLastService) {
        lastService = demoLastService;    
    }

    public String getRegNumber() {
        return regNumber;
    }

    public void makeAvailable() {
        carStatus = "Available";
    }

    public boolean isAvailable() {
        if(carStatus.equals("Available") || carStatus.equals("Return from Service")) {
            return true;
        } else {
            return false;
        }
    }

    public boolean isOnHire() {
        if(carStatus.equals("On Hire")) {
            return true;
        } else {
            return false;
        }
    }

    public boolean isBeingServiced() {
        if(carStatus.equals("Being Serviced")) {
            return true;
        } else {
            return false;
        }
    }

 public void hireOut() {
        carStatus = "On Hire"; 
    }

    public void returnFromHire() {
        if(this.serviceDue() == true) {
            carStatus = "Being Serviced";            
        } else {
            carStatus = "Available For Hire";
        }        
    }

    public void returnFromService() {
        carStatus = "Return From Service";
    }

    public String ToString() {
        return("Manufacturer: <" + this.manufacturer + ">/n "
                + "Registration Number: <" + this.regNumber + ">/n" 
                + "Mileage: <" + this.mileage + ">/n" 
                + "Service Interval: <" + this.serviceInterval + "</n"
                + "Last Service: <" + this.lastService + "</n"
                + "Status: <" + this.carStatus + "</n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:17:58.547

您正在使用`5-arg constructor`构建您的`HireCar`实例： -

```
new HireCar("Toyota", "AV77 FGJ", 6000, 12300, 41500); 
```

在那个构造函数中，你没有设置 - 的值`"carStatus"`。

```
 public HireCar(String demoManufacturer, String demoRegNumber, 
         int demoMileage, int demoServiceInterval, int lastInterval) { 
     manufacturer = demoManufacturer;
     regNumber = demoRegNumber;
     mileage = demoMileage;     
 } 
```

所以，`carStatus`还是`null`。（您应该在此构造函数中设置每个字段。至少`references`, 因为它们的默认值为`null`）

因此，当您`isAvailable`为您添加的任何实例调用该方法时`array`： -

```
fleet[randomNumber].isAvailable() 
```

它会产生一个`NPE`，就像在`isAvailable`方法中一样，你正在调用`equals`方法`carStatus`： -

```
if(carStatus.equals("Available") || carStatus.equals("Return from Service"))
     ^^^
 This is null here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:18:36.490

堆栈跟踪告诉您 isAvailable 方法正在抛出 NullPointerException，所以让我们看一下。

```
public boolean isAvailable() {
    if(carStatus.equals("Available") || carStatus.equals("Return from Service")) {
        return true;
    } else {
        return false;
    }
} 
```

除了不必要的返回真/假之外，这里唯一被取消引用的是汽车状态，那么它什么时候可以为空？

好吧，看看你正在使用的构造函数：有 5 个参数的构造函数。它从来没有设置过状态，所以它保持为空。因此是空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:17:56.483

您正在使用 2-args 在构造函数中进行**初始化** `carStatus`，并且您从不调用该构造函数，因此在`carStatus`调用方法时仍然为 null 。      `equals()``isAvailable()`

  if(carStatus.equals("可用") || carStatus.equals("从服务返回")) {

```
 ^^^ This is **null** as it is not initialized yet, Thus **NPE**. 
```

`carStatus`您还应该在您的 5-args 构造函数中进行初始化，以使您当前的代码能够正常工作。

```
 public HireCar(String demoManufacturer, String demoRegNumber, 
             int demoMileage, int demoServiceInterval, int lastInterval) { 
         manufacturer = demoManufacturer;
         regNumber = demoRegNumber;
         mileage = demoMileage;     
         carStatus="someval" ; //initialize carStatus here
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T22:18:19.017

1.  carStatus 使用枚举代替字符串
2.  初始化ALL构造函数中的所有属性（左二carStatus = null）

# c# - 泛型和继承的编译器问题

> ID：13692695
> 
> 赞同：0
> 
> 时间：2012-12-03T22:12:42.970
> 
> 标签：c#, .net, generics, inheritance

我有 2 个具有以下声明的类：

> *   `abstract class ClassBase<T, S> where T : myType where S : System.Data.Objects.DataClasses.EntityObject`
> *   `abstract class ServiceBase<T> where T : myType`

我还有 2 个其他类，每个类都继承一个，我们可以调用*ClassInherited*和*ServiceInherited*。请注意，这两个 Service 类与其他两个不在同一个项目中。

这个想法是，`ServiceBase`我可以在类中声明一个属性`protected ClassBase<T,System.Data.Objects.DataClasses.EntityObject> Class { get; set; }`，然后在继承的服务的构造函数中声明类似`this.Class = ClassInheritedInstance`

我已经实现了这个想法，但是在 ServiceInherited 类构造函数中分配*Class属性时它给了我这个错误：*

> 无法将类型“ClassInherited”隐式转换为“ClassBase< T, S>”

请注意， ClassInherited 确实是`Class<T,S>`……的规范，只是编译器似乎无法正确分辨类型。还将类属性的声明更改为`protected ClassBase<T, EntityObjectInherited>`有效，而*EntityObjectInherited*是`System.Data.Objects.DataClasses.EntityObject`...的实现。我不明白为什么会出现问题。

## 更新 1

请注意，在编译时类型`ClassInherited`是已知的，因为它的声明是`public class ClassInherited : ClassBase<myTypeInherited, EntityObjectInherited>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:25:30.807

这个丑陋的拳击，拆箱应该可以工作：

```
Class = (ClassBase<T, S>)(object)new ClassInherited(); 
```

* * *

今天只有通用接口才允许协方差？[MSDN](http://msdn.microsoft.com/en-us/library/ee207183.aspx)

这有效：

```
// Covariance. 
IEnumerable<string> strings = new List<string>();
// An object that is instantiated with a more derived type argument  
// is assigned to an object instantiated with a less derived type argument.  
// Assignment compatibility is preserved. 
IEnumerable<object> objects = strings; 
```

这不会：

```
 List<string> strings = new List<string>();
        List<object> objects = strings; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:25:03.607

## 初步答复

不能在 ServiceInherited-class 中使用的原因是`protected ClassBase<T,S> Class { get; set; }`您不知道声明属性 Class 的类型所需的 S-type。

你必须选择：

*   在 Service-type 的规范中包含 S 类型：`abstract class ServiceBase<T, S> where T : myType where S : System.Data.Objects.DataClasses.EntityObject`

*   为 ClassBase 实现一个只使用 T 类型的接口，这样您就可以在不使用 S 类型的情况下引用一个类继承对象。然后你可以在服务类（接口类型）中有一个属性，因为你不需要指定 S 类型。

请注意，通用类型检查不在运行时检查，而是在编译时检查。否则它不会是强类型。

## 更新

强制转换不起作用的原因是 type`ClassBase<T, EntityObjectInherited>`不等于或不能转换为`ClassBase<T, System.Data.Objects.DataClasses.EntityObject>`. 协方差不适用于类类型，仅适用于接口类型。

我认为这里的解决方案是使用接口。使用基于类的接口，例如`IClassBase<T>`. 这样你就可以在类的签名中省略 S 类型，而只在接口中使用它。

## 更新 (2)

您可以做的一件事是为 Class 属性创建一个接口。您可以定义以下接口。

```
public interface IClass<T> where T : myType {
    // TODO
    // Define some interface definition, but you cannot use the
    // EntityObject derived class, since they are not to be known 
    // in the service class.      
} 
```

如果您在 ClassBase 类上实现此接口，并在 ServiceBase 类上添加一个接受 IClass 类型对象的构造函数，那么您可以将此对象推送到基类中的属性 Class。像这样：

```
public abstract class ClassBase<T, S> : IClass<T>
    where T : MyType
    where S : EntityObject {
}

public abstract class ServiceBase<T> where T : MyType {
    protected ServiceBase(IClass<T> classObject) {
        Class = classObject;
    }
    protected IClass<T> Class { get; set; }
}

public class ServiceInherited : ServiceBase<MyTypeDerived> {
    public ServiceInherited(IClass<MyTypeDerived> classObject)
        : base(classObject) {
    }
} 
```

需要注意的一点是，不要将 ClassBase 的 S-type 暴露给接口。由于您不希望服务类知道这种类型，因此它们不能主动调用任何方法或使用在其定义中以某种方式具有 S 类型的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:34:04.627

编译器将无法猜测*ClassInherited*确实是*ClassBase<T, S>*的正确匹配，因为它不知道*T*和*S*的确切类型，这将在运行时的泛型类型实例化中决定。

因此，如果您确定在运行时类型将兼容，您可以安全地尝试强制转换：

```
Class = ClassInheritedInstance as ClassBase<T, S> 
```

由于 CLR 需要检查类型的兼容性以获得*安全*的代码，因此这只会产生轻微的（不是可以忽略不计的）开销。

# java - 从 Java Set 中获取 *any* 值的好方法？

> ID：13692700
> 
> 赞同：84
> 
> 时间：2012-12-03T22:13:00.753
> 
> 标签：java, set, any

给定一个简单*的*`Set<T>`，从?*`Set`*

 *使用`List`，很容易：

```
List<T> things = ...;
return things.get(0); 
```

但是，对于 a `Set`，没有`.get(...)`方法，因为`Set`s 没有排序。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-12-03T22:13:00.753

A`Set<T>`是 a `Iterable<T>`，因此迭代到第一个元素有效：

```
Set<T> things = ...;
return things.iterator().next(); 
```

Guava 有[一种方法](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterables.html#getFirst-java.lang.Iterable-T-)可以做到这一点，尽管上面的代码片段[可能更好](https://stackoverflow.com/questions/7832479/in-google-guava-java-why-are-iterables-getfirst-and-getlast-are-inconsist)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-05-23T11:52:21.527

由于存在流，因此您也可以这样做，但是您必须使用 class `java.util.Optional`。`Optional`是元素的包装类或明确的无元素（避免 Nullpointer）。

```
//returns an Optional.
Optional <T> optT = set.stream().findAny();

//Optional.isPresent() yields false, if set was empty, avoiding NullpointerException
if(optT.isPresent()){
    //Optional.get() returns the actual element
    return optT.get();
} 
```

编辑：正如我`Optional`自己经常使用的那样：有一种方法可以访问元素或获取默认值，以防它不存在：
`optT.orElse(other)`返回元素或者，如果不存在，则返回`other`. `other`可能是`null`，顺便说一句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-29T14:56:50.390

从 Set 或 Collection 中获取*任何*元素似乎是一种不常见的需求——如果不是任意的或不拘一格的——但是，例如，当需要计算**Map 中 Keys 或 Values 对象的统计信息并且必须初始化 min/时，这是很常见的。最大值**。*在更新每个*元素的最小/最大值之前，集合/集合中的*任何*元素（由 Map.keySet() 或 Map.values() 返回）将用于此初始化。

 *那么，当面对这个问题并同时试图保持较小的内存和执行时间以及代码清晰时，有什么选择呢？

通常你会得到通常的：“*将 Set 转换为 ArrayList 并获取第一个元素*”。伟大的！另一个包含数百万个项目的数组和额外的处理周期，用于从 Set中*检索对象、**分配*数组并*填充*它：

```
HashMap<K,V> map;
List<K> list = new ArrayList<V>(map.keySet()); // min/max of keys
min = max = list.get(0).some_property(); // initialisation step
for(i=list.size();i-->1;){
 if( min > list.get(i).some_property() ){ ... }
 ...
} 
```

或者可以使用带有迭代器的循环，使用标志来表示需要初始化最小值/最大值，并使用条件语句检查是否为循环中的所有迭代设置了该标志。这意味着大量的条件检查。

```
boolean flag = true;
Iterator it = map.keySet().iterator();
while( it.hasNext() ){
  if( flag ){
    // initialisation step
    min = max = it.next().some_property();
    flag = false;
  } else {
    if( min > list.get(i).some_property() ){ min = list.get(i).some_property() }
  ...
  }
} 
```

或者在循环外进行初始化：

```
HashMap<K,V> map;
Iterator it = map.keySet().iterator();
K akey;
if( it.hasNext() ){
  // initialisation step:
  akey = it.next();
  min = max = akey.value();
  do {
    if( min > list.get(i).some_property() ){ min = akey.some_property() }
  } while( it.hasNext() && ((akey=it.next())!=null) );
} 
```

但是，当需要 min/max 时，是否真的值得代表程序员（并代表 JVM 设置迭代器）进行所有这些操作？

来自 javally-correct ol' 运动的建议很可能是：“将您的 Map 包装在一个类中，该类在放置或删除时跟踪最小值和最大值！”。

**还有另一种情况**，根据我的经验，需要地图中的*任何*项目。**这就是地图包含具有共同属性的对象（该地图中的所有对象都相同）并且您需要读取该属性**的情况。例如，假设有一个具有相同直方图的存储箱的地图，这些箱具有相同的维数。给定这样的 Map，您可能需要知道Map 中*任意*Histobin 的维数，以便创建另一个相同维数的 Histobin。我是否需要再次设置一个迭代器并在调用 next() 一次后处理它？对于这种情况，我将跳过 javally 正确的人的建议。

如果获取*any*元素的所有麻烦导致显着的内存和 cpu 周期增加，那么为了获取难以获取的*任何*元素而必须编写的所有代码呢？

我们需要*any*元素。给我们吧！**

# ruby-on-rails - 如何从我的 Rack 应用程序中删除“服务器”HTTP 响应标头

> ID：13692701
> 
> 赞同：3
> 
> 时间：2012-12-03T22:13:01.663
> 
> 标签：ruby-on-rails, ruby, heroku, rack

我正在尝试从运行在 Heroku 上的 ruby​​ on rails 应用程序中的 http 响应标头中删除服务器信息，但我被卡住了。检查响应标头给了我：

```
Server:thin 1.5.0 codename Knife 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:06:56.680

此`Server`标头[由瘦服务器](https://github.com/macournoyer/thin/blob/v1.4.1/lib/thin/response.rb#L32)在组装响应时设置。最近[的提交增加了将 设置`Server`为 else](https://github.com/macournoyer/thin/commit/617fccf7f7e1ee93671e8905623852e23fcc296c)的能力，但看起来你不能完全删除它。

您可以做的一件事是将常量的值设置`Thin::VERSION`为`nil`，这将导致不`Server`发送标头：

```
Thin.send :remove_const, :SERVER
Thin::SERVER = nil 
```

第一行是避免在更改常量时产生的警告。现在，当 Thin 尝试设置`Server`它看到的标题`nil`并[跳过它时](https://github.com/macournoyer/thin/blob/v1.4.1/lib/thin/headers.rb#L22-23)，根本没有设置任何标题。

# sharepoint - SP2010 如何确定 SharePoint 内容数据库是否处于支持模式

> ID：13692704
> 
> 赞同：1
> 
> 时间：2012-12-03T22:13:04.940
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我有一个 SharePoint 2007 的旧内容数据库，我需要升级到 SharePoint 2010（然后是 SP2013），但我觉得它不在支持模式下。SP 管理员在 Stage 中使用 Select 语句提取信息，我觉得他们可能将数据库置于不受支持的模式。

有没有办法可以确定我尝试迁移的内容数据库是否已经处于不受支持的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:00:57.397

数据库中没有“支持模式”，只是如果你有一个手动修改过的数据库，微软不会给你支持。

本质上，如果迁移有效或无效，您只能靠自己...

# twitter-bootstrap - 引导范围内的图像溢出

> ID：13692709
> 
> 赞同：0
> 
> 时间：2012-12-03T22:13:26.017
> 
> 标签：twitter-bootstrap

我连续有一系列跨度。在每个跨度内，我都有一个大于跨度的图像。

当前，图像的宽度设置为跨度的宽度。我想做的是使图像成为全宽，隐藏溢出。

有人可以让我知道如何在一个跨度内制作一个图像是它的原始宽度，而不是跨度的宽度吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:03:55.887

跨度可能将其内部的 img 的最大宽度设置为 100%。尝试使用以下方法覆盖该样式：

```

`[class*="span"]img {
     max-width: auto !important;
 }` 

或类似的东西。

```

# magento - Magento：如何查看非默认根类别的产品列表？

> ID：13692712
> 
> 赞同：0
> 
> 时间：2012-12-03T22:13:37.590
> 
> 标签：magento

Magento 似乎神奇地将默认类别的子类别映射到 url。例如，当前可在 /tops 访问类别“Tops”的产品列表。

我为不想在“正常”产品列表中显示的产品创建了一个新的根类别。我在新的非默认根类别中创建了一个子类别。让我们将此子类别称为“隐藏”。当我浏览到 /hidden 时，我收到 404 错误。

我尝试浏览到 catalog/category/view/id/10 并在“URL 重写管理”中创建了 URL 重写。仍然得到一个 404

如何让 Magento 列出来自另一个根类别的产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:49:50.777

我相信“一般信息”选项卡下的“包含在导航菜单中”选项是您正在寻找的。该类别仍需要位于您的商店根目录中，但不会显示在您的导航中。一个商店只能有 1 个根类别，因此无法显示来自另一个根的类别。

url 实际上是从“URL Key”字段创建的。

# c# - 使用带有 ComboBox 的 DataSource 的字典，DataBinding 到 Integer

> ID：13692714
> 
> 赞同：0
> 
> 时间：2012-12-03T22:13:44.540
> 
> 标签：c#, winforms

这个问题已经被几个人问过并回答了 100 次。但是，我似乎仍然有问题。我有一个 ComboBox，我有一个 DataBinding 到数据库中一个整数列。我有一个填充 ComboBox 数据源的 Dictionary 类。当我运行表单时，ComboBox 中不显示任何内容，或者显示数据库中的 Integer 值，而不是 Dictionary 中的“Text”。我附上了表格的图片；

![组合框显示](../Images/55d5983a2ac66d87afcb84da98e231ee.png)

这是用于生成此 ComboBox 的代码；

```
 public static SortedDictionary<int, string> SecurityCodes()
    {
        SortedDictionary<int, string> SecurityCodes = new SortedDictionary<int, string>
            {
                {1, "View only"},
                {3, "Print reports"},
                {4, "Post changes"},
                {5, "Edit records"},
                {6, "Revise postings"},
                {7, "Add records"},
                {8, "Remove postings"},
                {9, "Supervisor"},
                {10, "Programmer"}
            };

        return SecurityCodes;
    }

        this.cboSecurity.DataBindings.Add(new System.Windows.Forms.Binding("Text", this.loginInfoBindingSource, "Security_Level", true, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged));

        this.cboSecurity.DataSource = new BindingSource(BaseDictionaries.SecurityCodes(), null);
        this.cboSecurity.DisplayMember = "Value";
        this.cboSecurity.ValueMember = "Key"; 
```

现在，如果我将 DataBinding 更改为“ValueMember”而不是“Text”，文本将显示，但当您导航到另一条记录时它不会更新，它始终保留在 Dictionary 的第一项上。如果我将 DataBinding 更改为具有与 Dictionary 中的内容匹配的条目的视图，则适当的“Text”将显示在 DataBinding 设置为“Text”的 ComboBox 中。没关系，但是我必须在数据库中维护一个只有这些条目的表，我不想走那条路。

谁能看到我做错了什么？

我尝试了许多不同类型的 DataSource 组合，包括以下几种，但行为没有改变；

```
 SortedDictionary<int, string> loDataSource = BaseDictionaries.SecurityCodes();
        KeyValuePair<int, string>[] kvp = new KeyValuePair<int,string>[loDataSource.Count];
        loDataSource.CopyTo(kvp,0);
        new BindingSource(kvp, "Key");
        this.cboSecurity.DataSource = kvp; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:35:46.370

只能通过使用“文本”值来完成这项工作。尝试“SelectedValue”和“ValueMember”并不能解决问题。当我有时间弄清楚这一点时，我会发布另一个回复。

# sql - Oracle SQL 查询 TO 从匹配两个条件的表中返回行

> ID：13692716
> 
> 赞同：0
> 
> 时间：2012-12-03T22:13:59.590
> 
> 标签：sql, oracle, plsql, plsqldeveloper

我有一个表“员工”：

```
E_ID    E_Name                E_Salary   Grade
01      Hansen, Ola           15,000     HC_1
02      Svendson, Tove        15,000     HC_2
03      Svendson, Stephen     32,000     HC_9
04      Pettersen, Kari       21,000     HC_1
05      Sachin, Tendulkar     21,000     HC_2
06      Brian, Lara           19,000     HC_3 
```

我需要返回同时具有 HC_1 和 HC_2 等级的员工工资。有人可以帮我形成这个查询。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:37:13.233

我想你想要...

```
 Select   e_salary
 from     employees
 where    grade in ('HC_1','HC_2')
 group by e_salary
 having   count(distinct grade) = 2 
```

# asp.net - 在 Y 轴上显示数字 - ASP.NET 图表

> ID：13692717
> 
> 赞同：0
> 
> 时间：2012-12-03T22:14:14.357
> 
> 标签：asp.net, charts

我需要在 y 轴上显示从 0 开始一直到 60 的范围。

我可以轻松地将 60（最大值）设置为 0（最小值）和 0（最大值）设置为 -60（最小值），但我找不到将 0 显示为最大值并将 60 显示为最小值的方法。

我想将 Y 轴的最大值设置为 0，将最小值设置为 -60，将间隔设置为 1，然后以某种方式将每个标记的文本样式更改为 Abs(value)。

任何人都可以通过某种方式来解决它吗？

提前谢谢了，

埃拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:33:22.757

[http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.axis.isreversed.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.axis.isreversed.aspx)

只需将其设置为反转，如果我正确理解您的问题，这应该可以满足您的要求。

# android - InAppBilling 不可靠

> ID：13692721
> 
> 赞同：1
> 
> 时间：2012-12-03T22:14:27.390
> 
> 标签：android, in-app-purchase, in-app-billing, google-checkout

我在 PlayStore 上确实有一个应用程序，并且当前版本存在一个主要问题。每天我都会收到很多来自客户的邮件，说他们为 InAppItem 付款，但没有收到。

有两种表现形式：

1.  客户收到来自谷歌的确认邮件，其中包括订单号。但是订单号不在我的 Google 结帐帐户中。所以谷歌正在向客户收费，但我没有收到钱，我的客户也没有收到商品。即便如此，它已经付出了！如果他再次尝试购买该物品，则会出现一条错误消息，说明：“失败：您已经拥有该物品”

2.  客户在购买商品两天后收到商品。但在此之前，我可以在我的结帐帐户上看到成功提款。

案例1很烦人，很麻烦，因为客户要退款，我从来没有收到过！在我看来，很明显，这个错误是由谷歌引起的，因为总的来说这不是问题，谷歌正在发送这些确认邮件。

有没有人，有或有类似的问题？我如何就此事与 Google 联系？我确实收到了一个询问我详细信息的答案，但在描述之后，我没有得到任何回应。现在我觉得他们让我一个人解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T09:35:57.823

我建议将您的应用升级到[In App billing v3 api](http://developer.android.com/google/play/billing/api.html)。比第 2 版更可靠。

# servlets - 包罗万象（通配符）servlet url-pattern 覆盖文件扩展名模式

> ID：13692722
> 
> 赞同：9
> 
> 时间：2012-12-03T22:14:27.427
> 
> 标签：servlets, web.xml, zk, url-pattern

我想实现以下目标：

> ```
> /webapp-context/Page-1               -> Handled by my custom "ContentServlet"
> /webapp-context/Another-Page         -> Handled by my custom "ContentServlet"
> /webapp-context/Page-with-long-title -> Handled by my custom "ContentServlet"
> 
> /webapp-context/_cms/<something>.zul -> Handled by ZK framework 
> ```

我最近的尝试看起来像这样（web.xml 提取）：

> ```
>  <servlet-mapping>
>     <servlet-name>zkLoader</servlet-name>
>     <url-pattern>*.zul</url-pattern>
>   </servlet-mapping>
> 
>   <servlet-mapping>
>     <servlet-name>myContentServlet</servlet-name>
>     <url-pattern>/*</url-pattern>
>   </servlet-mapping> 
> ```

不幸的是，现在我的内容 servlet 处理所有请求（我认为更具体的模式优先？）。

如果我将我的内容 servlet 映射到模式“/webapp-context/content/*”，则不存在冲突，但这不是我想要的。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T22:52:41.690

我刚刚通过这个问题找到了解决方案：[Difference between / and /* in servlet mapping url pattern](https://stackoverflow.com/questions/4140448/servlet-mapping-vs)

使用 '/' 而不是 '/*' 对我有用。

> ```
> <servlet-mapping>
>   <servlet-name>myContentServlet</servlet-name>
>   <url-pattern>/</url-pattern>
> </servlet-mapping> 
> ```

# servicestack - IOneWay SOAP 参数和无效返回

> ID：13692723
> 
> 赞同：3
> 
> 时间：2012-12-03T22:14:43.677
> 
> 标签：servicestack

我在为 ServiceStack SOAP+REST 服务生成正确的 WSDL 时遇到了一些问题。

主要问题是，当我使用 AddServiceReference 时，生成的 IOneWay 会被填充，并且方法都返回 void。查看提供的 SOAP 示例，看起来应该填充 ISyncReply（当前根本没有操作），并且响应类型应该是 DTO + Response 对象中的字段之一。我究竟做错了什么？

*   类型和操作分布在多个命名空间中，但它们都被 AssemblyInfo 中的单个 ContractNamespace 引用
*   遵循 DTO + Response 命名约定
*   我认为这可能是继承的请求/响应类型的问题，但即使完全删除它们也不会改变这种情况，尽管显然你不能从一个具体的类型继承，即使是在一个命名的命名空间中，并且操作参数是正确生成
*   使用显式 [DataContract]/[DataMember] 注释并没有什么不同
*   REST 调用似乎按预期工作
*   我正在使用最新的 ServiceStack 二进制文件
*   WSDL 根本没有 wsdl:output 元素
*   同时应用 SOAP 1.1 和 SOAP 1.2 wsdls
*   只是为了使情况更加复杂，在 http://*/metadata 中为每个操作生成的元数据似乎是完全准确的！

如果我可以提供任何具体的进一步信息，请告诉我。

# ruby-on-rails - 以一种形式添加/编辑 2 个数据库表

> ID：13692728
> 
> 赞同：1
> 
> 时间：2012-12-03T22:15:08.753
> 
> 标签：ruby-on-rails

菜鸟在这里。我正在建立一个食谱网站，但有一小块的问题。如果您有时间为我指明正确的方向，那就太好了。

我有一个食谱表，上面有标题、描述、照片和准备时间。

我还有一个成分表，其中包含数量、修饰符（例如杯子、毫升）、成分、修饰符 2（切碎、切块等）

我无法在一页中添加/编辑食谱及其成分并让它填充两个表格。

我假设它很简单，我只是忽略了一些基本的东西。

我不需要冗长的答案，只需指出正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:18:42.270

您需要查找嵌套表单：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

简短的伪示例：

```
# model
attr_accessible :ingredients_attributes
accepts_nested_attributes_for :ingredients

# controller
def new
  @recipe = Recipe.new
  @recipe.ingredients.build
end

# new.html.erb
<% form_for(@recipe) do |f| %>
  <%= f.text_field(:name) %>
  <% fields_for(@recipie.ingredients) do |r|
    <%= r.text_field(:amount) %>
    <%= r.text_field(:name) %>
  <% end %>
  <%= submit_tag %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:21:51.033

```
class Recipe < ActiveRecord::Base
  has_many :ingredients
  accepts_nested_attributes_for :ingredients
end 
```

[您可以在此处](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)查看文档。

# r - 如何在折线图中以 Sep-12 格式显示数据并抑制网格线和灰色背景？

> ID：13692739
> 
> 赞同：2
> 
> 时间：2012-12-03T22:15:43.367
> 
> 标签：r, date, ggplot2

我正在努力使日期格式正确。数据已经采用了 melt() 格式。数据中有四个变量恰好共享相同的数据。我只是想用四条线绘制一个简单的折线图（每个变量作为一条单独的线）并将 Sep-12 显示为最新数据点？我正在使用旧的ggplot。随意我有两个问题。

第一个问题：如何按季度显示数据（日期间隔为 Sep-11、Dec-11、Mar-12、Jun-12 和 Sep-12）？

第二个问题：如何抑制网格线和灰色背景？

```
 x4.1.m<-structure(list(Var.1=structure(c(1L,2L,3L,4L,5L,6L,1L,2L,3L,4L,5L,6L,1L,2L,3L,4L,5L,6L,1L,2L,3L,4L,5L,6L,1L,2L,3L,4L,5L,6L),.Label=c("I'vechangedforwork/anewjob/goneonaworkplan","Iwantaphonethat2degreesdoesn'toffer","IwantBestMates/Favourites","Iwasofferedorsawabetterofferonanothernetwork","Issueswiththe2degreesnetwork(poorcoverage)","Other"),class="factor"),YearQuarter=structure(c(1L,1L,1L,1L,1L,1L,2L,2L,2L,2L,2L,2L,3L,3L,3L,3L,3L,3L,4L,4L,4L,4L,4L,4L,5L,5L,5L,5L,5L,5L),.Label=c("2011-09-01","2011-12-01","2012-03-01","2012-06-01","2012-09-01"),class="factor"),value=c(0.23,0.23,0.121,0.25,0.223,0.14,0.39,0.22,0.05,0.37,0.25,0.2,0.09,0.14,0.05,0.3,0.4,0.12,0.13,0.1,0.26,0.38,0.28,0.15,0.33,0.05,0.06,0.44,0.32,0.43)),.Names=c("Var.1","YearQuarter","value"),row.names=c(NA,-30L),class="data.frame")

  x4.1.m$YearQuarter <- format(as.Date(x4.1.m$YearQuarter),"%b-%y")

  x4.line <- ggplot(data=x4.1.m, aes(x=factor(YearQuarter), y=value,colour=Var.1)) + 
         geom_smooth(se=F, size=1.5)+labs(y="Percentage",x="Year Quarter")

  x4.line+geom_text(aes(label =paste(round(value*100,0), "%", sep=""),group=Var.1),
                    size = 3, hjust = 0.5, vjust =1.5) +

  opts(axis.line = theme_segment(colour = "black"),
            panel.grid.major = theme_blank(),
            panel.background=theme_blank(),
                panel.grid.minor = theme_blank(),
                panel.border = theme_blank()) +
        scale_y_continuous("Percentage",labels=percent, limits=c(0,0.5)) +
        ggtitle("Percentages:Main Reasons for Leaving 2degrees by Quarter") +
        theme(plot.title = element_text(size=rel(1.2))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:11:44.850

不幸的是，问题不清楚，我无法回答。但最终的结果似乎不错。

我更改了您的代码，因为我使用的是 ggplot2 的最新版本。我没有发现日期格式有问题，但是您对 ggplot2 有点困惑。

请注意，我添加 了用于百分比格式的**scales**包。

```
library(scales)
library(ggplot2)
###data 
x4.1.m$YearQuarter <- as.Date(x4.1.m$YearQuarter)
x4.1.m$label       <- paste(round(x4.1.m$value*100,0), "%", sep="")

### plot
x4.line <- ggplot(data=x4.1.m, aes(x=YearQuarter, y=value,colour=Var.1,group = Var.1))
x4.line <- x4.line + geom_smooth(se=F, size=1.5)
x4.line <- x4.line + geom_text(aes(label = label),size = 3, hjust = 0.5, vjust =1.5) 

### theme  
x4.line <- x4.line +  theme(axis.line = element_line(colour = "black"),
       panel.grid.major = element_blank(),
       panel.background=element_blank(),
       panel.grid.minor = element_blank(),
       panel.border = element_blank()) 

x4.line <- x4.line +  ggtitle("Percentages:Main Reasons for Leaving 2degrees by Quarter") +
  theme(plot.title = element_text(size=rel(1.2)))+ 
scale_y_continuous(labels=percent, limits=c(0,0.5)) +
  scale_x_date(labels = date_format("%b-%y"))+
  labs(y="Percentage",x="Year Quarter")

x4.line 
```

![在此处输入图像描述](../Images/e56b2d64bc433461d02b86af296120dd.png)

# php - 如何仅使用 preg_match_all 获得括号内的数字

> ID：13692742
> 
> 赞同：-1
> 
> 时间：2012-12-03T22:16:02.240
> 
> 标签：php, preg-match

我想`preg_match_all`从以下方面获得：

```
[['p0',-1,[1,5,6,7,9,10],[['Text','ACER'],['Value','19'],['NavigateUrl','m-19-acer.aspx'],['Look-RightIconUrl','arrow.gif'],['Look-RightIconWidth','15']]] 
```

只有括号内的数字。那就是`1,5,6,7,9,10`或：

```
['p1',0,[2,3,4],[['Text','NOTEBOOK'],['Value','87'],['NavigateUrl','m-87-notebook.aspx'],['Look-RightIconUrl','arrow.gif'],['Look-RightIconWidth','15']]],['p2',1,[],[['Text','MONITOR >11"'],['Value','125'],['NavigateUrl','m-125-monitor-11.aspx']]], 
```

即：`2,3,4`。

我使用的这种模式缺少一些东西`/(\d{1,})(,|\])/`。无法正确获取第一个数字，有时是最后一个，有时我会得到更多数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:21:24.570

使用这个： `/\[[0-9,]+\]/`。假设它会工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:54:45.593

preg_match_all 本身不会给你你需要的东西。您可以从 preg_match_all 开始，例如：

```
preg_match_all("/\[((\d,)+\d)\]/",$string,$matches); 
```

以上将为您提供`$matches[1]`仍然用逗号分隔的完整数字字符串数组。在您的第二个示例中，它将包括

```
var_dump($matches[1]);
arrray(1) { [0] => string(5) "2,3,4" } 
```

然后，您可以使用 join/implode 将该数组的元素合并为：

```
$all_matches = implode(',',$matches[1]); 
```

在您提供的两个示例中，这将无济于事，但是如果您遇到多个括号内的所有数字元素的情况，它将把它们合并在一起（这可能是您真正想要的，也可能不是您真正想要的）。

然后，您可以使用 split 获取单个数字项

```
$individual_matches = split(',',$all_matches); 
```

`1,5,6,7,9,10`这将为您提供第一个示例或`2,3,4`第二个示例中的数组。显然，如果您想将多个匹配项分开，您可以简单地每次循环遍历原始数组拆分：

```
$all_matches = $matches[1];
foreach ( $all_matches as $key => $value ) { 
    $all_matches[$key] = split(',',$all_matches[$key]);
} 
```

这将为您提供一个数组数组，其中每个第一级代表括号内的数字组，第二级是从组中拆分出来的单个数字。

# ios - 适用于蓝牙扫描仪的 iOS 条码扫描仪 SDK

> ID：13692744
> 
> 赞同：2
> 
> 时间：2012-12-03T22:16:09.050
> 
> 标签：ios, barcode-scanner

我需要在我的应用程序中集成一个解决方案，允许用户使用通过蓝牙连接到 iPad 的手持条形码扫描仪将数据扫描到应用程序中。我目前拥有摩托罗拉 CS3070，但我希望找到一个适用于多种设备的库/框架。

我环顾四周，只能找到利用内置摄像头进行条形码扫描的库。我找到了一些用于手持设备的第三方库，但这些库仅适用于特定的阅读器。

所以我的问题是，有没有人遇到过允许 iOS 设备从蓝牙条码扫描仪（如摩托罗拉 3070）接收数据的库/框架？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T00:11:17.067

Miken，Socket Mobile（完全公开，我的雇主）可以为 iOS 的 Socket Mobile 蓝牙无绳手持式扫描仪 (CHS) 提供 SDK。我们有一整套 API，可让您完全控制我们的扫描仪。然而，我们的 SDK 仅支持 Socket Scanner。

此外，在寻找与 iOS 一起使用的扫描仪时，您应该寻找经过 Apple MFI 批准的扫描仪，它允许扫描仪在串行端口配置文件模式下运行，这比蓝牙 HID 模式更有效。

Socket 有一个只能读取一维条码的低端扫描仪，还有一个可以读取几乎所有二维条码的成像扫描仪。

使用 SDK，您可以连接到我们的任何无线扫描仪。

请参阅 Socket Mobile 网站了解更多信息[http://www.socketmobile.com/support/developers](http://www.socketmobile.com/support/developers)

问候，

伦

# scope - 嵌入混乱。嵌套指令不起作用

> ID：13692747
> 
> 赞同：-1
> 
> 时间：2012-12-03T22:16:27.513
> 
> 标签：scope, angularjs, nested, directive

我在嵌套两个指令时遇到问题。此代码与一个指令按预期工作：http: [//plnkr.co/edit/nq1DD0](http://plnkr.co/edit/nq1DD0)

但是当我将此指令包装到另一个包含嵌入的指令中时，对控制器范围的访问会中断： http: [//plnkr.co/edit/zaWDQxqeFe9aYIBPnpJ3](http://plnkr.co/edit/zaWDQxqeFe9aYIBPnpJ3)

它出什么问题了？

在此先感谢您的帮助！

克塞尼亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:12:59.993

我已经修好了你的 plunker，在这里查看我的叉子：http://plnkr.co/edit/ul4HcAoopJjdcj7dXFYt?p= [preview](http://plnkr.co/edit/ul4HcAoopJjdcj7dXFYt?p=preview)

您的实施几乎没有问题：

1.  在自动完成中，您正在更改选择对象而不是其属性
2.  scope.$watch 在 emptyverifier 中没有很好地定义

总的来说，您应该避免对值/属性/属性等使用相同的名称，“selection”关键字在所有地方都使用，因此理解代码是一个很大的挑战；）我只修复了绑定和选择部分。 ..还没有触及应该显示“空消息”的逻辑 - 您应该尝试处理自动完成插件的“更改”事件。

# php - Laravel 更新记录 - 这是 2 个 MySQL 调用最有效的吗？

> ID：13692750
> 
> 赞同：0
> 
> 时间：2012-12-03T22:16:48.703
> 
> 标签：php, mysql, sql, laravel

因此，作为早期帖子的后续，我很好奇这是否是基于 POST 数据更新记录的最有效方法。

路由.php

```
//COLLECT POST DATA IN $thisOrder ARRAY
//DETERMINE THAT $thisOrderID is the primary key of the record to be updated
$updateOrder = Order::find($thisOrderID)->update($thisOrder); 
```

在我看来，这似乎是在执行 2 个查询：

```
1 - SELECT * FROM tblOrder WHERE orderid=$thisOrderID
2 - UPDATE SET //myvalues = $thisOrder// WHERE orderid = $thisOrderID 
```

我知道这不是正确的语法，但它解释得很快。

我是否正确理解这一点？使用 find() 命令正在执行 SELECT 并且 update() 正在执行更新。

如果我知道ID，我不能直接进行更新吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:28:06.483

是的，你做得对。通过使用 ORM，您可以将自己从底层 SQL 中抽象出来。IE。您正在为简单（可以说）和更少的代码而交易效率。这不是一件坏事，这里的抽象是完全合法的。

我不会担心这个。只要你在`orderid`列上有一个索引。首先构建一个可以工作的应用程序，然后进行优化。除非您能解释为什么需要优化，否则无需优化。如果您需要，这种事情将是您最不担心的事情。那时，您会发现应用程序的瓶颈并进行优化。这个 ORM 可能不会成为瓶颈。

这是一个过度简化[，所以这里是一个很好的阅读，更详细一点](http://blog.ircmaxell.com/2011/08/on-optimization-in-php.html)

# python - Python：列表内的列表索引超出范围错误

> ID：13692751
> 
> 赞同：3
> 
> 时间：2012-12-03T22:16:48.463
> 
> 标签：python, list, indexing, range

尝试将值附加到列表内的列表时出现错误。我究竟做错了什么？

```
xRange = 4
yRange = 3
baseList = []
values = []
count = 0

#make a list of 100 values
for i in range(100):
    values.append(i)

#add 4 lists to base list
for x in range(xRange):
    baseList.append([])
#at this point i have [[], [], [], []]

#add 3 values to all 4 lists
    for x in range(xRange):
        for y in range(yRange):
            baseList[x][y].append(values[count])
            count += 1

print baseList

#the result i'm expecting is:
#[[0,1,2], [3,4,5], [6,7,8], [9,10,11]] 
```

我收到此错误：

```
Traceback (most recent call last):
  File "test.py", line 19, in <module>
    baseList[x][y].append(values[count])
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T22:18:43.337

您不应该索引到一个空列表。您应该调用`append`列表本身。

改变这个：

```
baseList[x][y].append(values[count]) 
```

对此：

```
baseList[x].append(values[count]) 
```

结果：

```
[[0, 1, 2], [3, 4, 5], [6, 7, 8], [9, 10, 11]] 
```

在线查看它：[ideone](http://ideone.com/vaFhoa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:20:10.020

```
for x in range(xRange):
    baseList.append([])
# at this point i have [[], [], [], []] 
```

对，`baseList = [[], [], [], []]`。因此，访问`baseList[0][0]`将失败，因为第一个子列表没有元素。

顺便提一句。[您可以使用一些itertools](http://docs.python.org/3/library/itertools.html)和[recipes](http://docs.python.org/3/library/itertools.html#itertools-recipes)更轻松地获得想要的列表。

```
>>> x = 4
>>> y = 3
>>> list(itertools.islice(zip(*([itertools.count()] * y)), x))
[(0, 1, 2), (3, 4, 5), (6, 7, 8), (9, 10, 11)] 
```

这基本上是从 0 开始的不定*计数*的 y*分组的 x**取值*。

# php - 插件没有有效的标题 - Wordpress 无法添加新插件

> ID：13692752
> 
> 赞同：3
> 
> 时间：2012-12-03T22:16:48.347
> 
> 标签：php, wordpress, plugins, header, zip

我有 wordpress 版本 3.4.2

每当我在安装后尝试激活插件时，我都会得到

```
The plugin does not have a valid header. 
```

我尝试删除之间的空格

```
<?php

/* plugin info 
```

在 plugin_name.php 文件中。但是，它不能解决问题。

任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:01:08.960

你的插件之一是坏的。我猜你知道哪一个可能是罪魁祸首。

从您的服务器中完全删除其 wp-content/plugins/ *myplugin目录。*然后，当您显示插件页面时，您应该会收到一条通知，通知您刚刚删除的插件已被禁用。其他的东西应该工作。

修复你的插件代码。确保您*准确*了解您上传的 zip 文件或目录层次结构中的内容。摆脱嵌套 zip 文件或 .svn 目录等额外内容。

上传它并尝试再次激活它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T13:59:19.240

也许在您的标题中，有这样的字符`$ : % / &`（或等），例如：

```
<?php
/*
Plugin Name: Simple:Press & % $

*/
?> 
```

尝试删除它，然后再次激活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-27T12:14:18.370

**备份您的 WP 网站并更新您的 Wordpress 版本和相关插件。**

我使用了超过 2 年的插件 - SiteOrigin 的 Page Builder 时遇到了同样的问题。它与之前的 Wordpress 4.9.9 不兼容，并且开发人员没有通知我们插件的更新。

# javascript - greensock TweenMax javascript - 杀死循环补间

> ID：13692757
> 
> 赞同：0
> 
> 时间：2012-12-03T22:17:14.880
> 
> 标签：javascript, tween, gsap

[我使用Greensock javascript](http://www.greensock.com/gsap-js/)创建了一个循环补间，我让它使用一个函数循环，也许这不是最好的循环方式，如果你知道更好的方法请建议，但基本上当我尝试使用这种方法杀死补间时，它不起作用。

我的代码：

```
var dvdTween;
function playDVD()
{
 dvdTween = TweenMax.to($("#bigDVD"), 4, {css:{rotation:+1440, transformOrigin:"150px 150px"},ease:Expo.easeNone, delay:7, onComplete:playDVD});
} 
```

/// 稍后在我调用的函数中

```
dvdTween.kill(); /// but this does nothing. 
```

同样，循环补间可能有更好的方法，这可能是我的问题，但到目前为止，这个补间在我“杀死”它之后继续调用该函数。

感谢您的提示和帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T20:59:45.923

您的代码确实应该可以工作 - 我希望看到一组示例文件显示它无法正常工作。我想知道您是否遇到了范围问题或其他问题-您确定“dvdTween”在您调用它的上下文中引用了补间吗？尝试将 onCompleteScope:this 添加到补间中。

另外两个提示：

1) 您可以通过设置 repeat:-1 来无限循环 TweenMax，例如：

```
TweenMax.to($("#bigDVD"), 4, {css:{rotation:1440}, repeat:-1}); 
```

2）您可以使用 TweenMax.killTweensOf() 杀死特定对象的所有补间，例如：

```
TweenMax.killTweensOf($("#bigDVD")); 
```

# c++ - 二进制 GCD - 太慢的算法

> ID：13692766
> 
> 赞同：0
> 
> 时间：2012-12-03T22:17:48.003
> 
> 标签：c++, algorithm, greatest-common-divisor, bignum

根据维基百科（[http://en.wikipedia.org/wiki/Binary_GCD_algorithm](http://en.wikipedia.org/wiki/Binary_GCD_algorithm)），我试图为 bignums（最多 5000 位）编写二进制 GCD。

我的 GCD 本身看起来像这样：

```
bitset<N> gcd(bitset<N> u, bitset<N> v) {
    bitset<N> one (string("1"));
    bitset<N> zero (string("0"));

    int shift;

    if (u == 0) return v;
    if (v == 0) return u;

    for (shift = 0; ((u | v) & one) == zero; ++shift) {
        u >>= 1;
        v >>= 1;
    }

    while ((u & one) == zero) u >>= 1;

    do {
        while ((v & one) == zero) v >>= 1;

        if (u.to_string() > v.to_string()) {
            bitset<N> t = v;
            v = u;
            u = t;
        }

        bitsetSubtract(v,u);
    } while (v != 0);

    return u << shift;
} 
```

我也在使用自己的位集减法函数：

```
void bitsetSubtract(bitset<N> &x, const bitset<N> &y) {
    bool borrow = false;

    for (int i = 0; i < N; i++) {
        if (borrow) {
            if (x[i]) {
                x[i] = y[i];
                borrow = y[i];
            } else {
                x[i] = !y[i];
                borrow = true;
            }
        } else {
            if (x[i]) {
                x[i] = !y[i];
                borrow = false;
            } else {
                x[i] = y[i];
                borrow = y[i];
            }
        }
    }
} 
```

我没有看到任何地方可以提高这个算法的速度（二进制 GCD 本身很快），但我收到反馈说我的程序太慢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T22:40:55.213

您已将 bignum 表示为以 2 为底（二进制）数字的数组。

真正的 bignum 库不使用 2 的基数。它们使用更大的基数，因为 CPU 具有一次操作多个位的指令。通常，如果您的目标是最大速度和最小大小，则您将使用 256 (2 ⁸ )、65536 (2 ^(16) )、4294967296 (2 ^(32) ) 或 18446744073709551616 (2 ^(64) ) 的基数，或者以 100 为基数（一个字节如果您必须存储精确的十进制小数，则为 10000（每位 2 个字节）、1000000000（每位 4 个字节）或 10000000000000000000（每位 8 个字节）。

你需要使用类似`vector<uint32_t>`或`vector<uint64_t>`作为你的 bignum 的东西，并且一次操作 32 位或 64 位，而不是一次只操作 1 位。

# ajax - Weblogic 上的 RMI 和线程

> ID：13692773
> 
> 赞同：0
> 
> 时间：2012-12-03T22:18:10.430
> 
> 标签：ajax, weblogic, rmi

我有一个使用 SmartGWT (Ajax) 实现并部署到 WebLogic 12c 的 Web 应用程序。由于难以解决集成一个特定自定义 API 的类路径问题，我正在研究使用 Java RMI 访问此 API 的适用性。我的问题是，由于我的应用程序是完全异步的，使用 RMI 时是否存在线程问题的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:52:32.670

RMI 不是“完全异步的”：它基本上是一个请求/响应协议。使用 RMI 时总是存在“潜在的线程问题”。不保证 RMI 线程行为。因此，所需的任何同步都 100% 取决于您。

# android - 如何在android中获取位置提供者（GPS或网络）时间

> ID：13692774
> 
> 赞同：0
> 
> 时间：2012-12-03T22:18:14.383
> 
> 标签：android, gps, android-location

我已经尝试从 Location 类中获取 getTime() 方法来获取获得修复的时间。但它没有给出位置提供者的时间，而且这个时间可以通过同一类的 setTime() 方法进行修改。我们可以从更准确、更可靠的位置提供者（不考虑时区）那里获得时间吗？

# jquery - 在 Firefox 中杀死 html5 视频实例

> ID：13692779
> 
> 赞同：0
> 
> 时间：2012-12-03T22:18:24.883
> 
> 标签：jquery, html, firefox, video, instances

我有一个页面，其中在不同的选项卡结构中嵌入了多个 html5 视频。FF 播放 ogg 格式，并且加载这些视频的方式似乎有所不同。每个视频都将自动播放设置为打开，并在单击每个选项卡时播放。问题是当我在标签之间快速导航时，我会同时播放多个视频，即使所有标签点击都有一个删除任何先前`<video>`标签的代码。有没有人经历过这种行为？你是怎么解决的？该问题仅限于 FF 内；所有其他浏览器都成功杀死了视频实例。

PS：我正在使用jquery

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:20:24.460

无论您在哪里播放当前选项卡的视频，您也可以暂停其他选项卡中的视频。

```
$(".tab").on("click", function () {
    $('video').each(function () { this.pause(); });
    //now play the correct video
}); 
```

让我知道这是否有帮助。Firefox 似乎可能不想删除`video`仍在播放的标签。

# c# - 如果 Powershell 构建在 .Net 之上，那么编写脚本而不是 C# 代码的原因是什么？

> ID：13692786
> 
> 赞同：5
> 
> 时间：2012-12-03T22:18:48.323
> 
> 标签：c#, .net, powershell, build, ildasm

作为一个刚接触 Powershell 的人，我一度不是 100% 清楚：

如果

> “在 PowerShell 中，管理任务通常由 cmdlet（发音为 command-let）执行， 这是实现特定操作的**专用 .NET 类。”**

编写脚本而不是使用这些类编写 .Net 可执行文件并将它们编译为控制台应用程序的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T22:28:28.783

您可以很容易地问一个问题，当您可以在 PowerShell 中轻松创建完全成熟的桌面和服务器软件时，使用 .NET 编写应用程序的原因是什么？

有理由在不同的情况下同时使用两者。PoSH 脚本本身就是简单的小文本文件，非常容易编写和维护。作为一个涉足两者的人，我想说在很多情况下，使用快速生成的 PoSH 脚本比使用 .NET 应用程序更容易完成系统维护任务。

也就是说，有些事情在 .NET 中更容易完成（我自己使用 C#），但是开发这些事情的过程要麻烦得多，并且需要额外的技能，这在 SysAdmins 中并不常见。

简而言之，PoSH 面向系统管理员，.NET 面向开发人员，但这并不是说没有交叉空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:27:13.813

我完全同意@Matt G 的回答。

我只想补充一件事，那就是围绕文化。Windows SysAdmins 文化更多的是“点击”驱动（由图形用户界面管理）而不是编程驱动。

我曾经在 Unix 世界中工作，在那里，系统管理员可以为脚本编写者（sh、csh、ksh ...）提供支持，并且在需要时，他们可以在桌子的一角编写一个小的“C”程序（以提高性能，或充当复杂的文件过滤器等）。

自 .NET (2001) 开始以来，Windows 系统管理员可以使用 C# 编译器（可从 .NET 目录中以 CSC.EXE 的形式获得），因为 Linux 或 Unix 能够使用“cc”编译器，但他们不能。最好的方法是使用 WSH（Window Script Shell），但 VBScript 并不那么容易使用，需要为每种情况发现不同的 COM 对象。

微软，通过多种方式促使 Windows 系统管理员使用命令行和脚本（WSH、netsh、wmic 等）。几年来（2006 年），Microsoft 决定亲自接管系统管理员，并为他们提供了一个 Power 工具，从用户界面中移除了权力（Exchange 2007）。所以现在 SysAdmin 除了使用 PowerShell 之外什么也做不了。但由于他们不是 devolppers，所以语言被解释了，“对象文化”不知何故对初学者来说是隐藏的。

现在优秀的 Windows 系统管理员可以开发自己的 C# 类并将它们内联到他们的 PowerShell 脚本中，系统管理员不是开发人员，他们只需要自动化他们的过程。

# ruby-on-rails - 在 vendor 中存储 gem 资源有什么好处？

> ID：13692787
> 
> 赞同：0
> 
> 时间：2012-12-03T22:18:49.240
> 
> 标签：ruby-on-rails

由于文件夹的大小较大，将 gem 源存储在 vendor 中会使部署速度变慢，想知道这样做有什么好处？

除了部署之外，还有什么其他缺点会变大吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:14:00.927

在 Rails 发生两次变化之前，出售你的 gem 是相关的：

*   Rails 2.X 系列中的某个时候`config.gem`被添加到环境文件中以允许管理 gem 版本。
*   当 3.0 出现时，有了 Bundler，它可以更好地控制 gem 版本。

在此之前，确保 gem 版本得到修复的唯一方法是提供它们，并将它们与应用程序的其余部分一起分发，从而允许开发团队的所有成员始终拥有正确的 gem 和版本。有关原因和方法的更多信息，请阅读[2007 年的这篇 Chris Wanstrath 文章](http://errtheblog.com/posts/50-vendor-everything)。

# apache-flex - 将项目渲染器应用于 Flex Advanceddatagrid

> ID：13692794
> 
> 赞同：1
> 
> 时间：2012-12-03T22:19:36.293
> 
> 标签：apache-flex, flex3, advanceddatagrid, flash-builder4.5, itemrenderers

我正在尝试将自定义项渲染器应用于 Flex AdvancedDataGrid。我现在正在通过对父节点@depth="1" 应用一个纯黑色方块进行测试。黑色方块不是最终的项目渲染器，我只是想确保我可以将自定义项目渲染器应用于父节点。最终产品将有一些获取样式和使用绘图 APi 绘制的背景皮肤。

参考... 看到[这个](https://stackoverflow.com/questions/5566786/set-alternate-color-for-advanceddatagrid-one-for-parent-node-and-other-for-chi)！

请参阅[“将项目渲染器与 AdvancedDataGrid 控件一起使用”](http://livedocs.adobe.com/flex/3/html/help.html?content=advdatagrid_10.html)！

请参阅[Adob​​e 语言参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/AdvancedDataGrid.html)！

示例 #1 - 这应该将 _groupItemRendereFactory 应用于列，并将 GroupTitleRenderer 应用于**depht="1"的任何列**

 ````
 <mx:dataProvider>
            <mx:HierarchicalCollectionView id="foldersView">
                <mx:source>
                    <mx:HierarchicalData id="foldersData" source="{ model.folders }" childrenField="profiles" />
                </mx:source>
            </mx:HierarchicalCollectionView>
        </mx:dataProvider>
        <mx:columns>
            <mx:AdvancedDataGridColumn id="column" dataField="name" headerText="Name" itemRenderer="{ _groupItemRendererFactory }" />
        </mx:columns>
        <mx:rendererProviders>
            <mx:AdvancedDataGridRendererProvider columnIndex="1" columnSpan="1" depth="1" renderer="com.theme.skins.GroupTitleItemRenderer"/>
        </mx:rendererProviders>
    </mx:AdvancedDataGrid></code> 
```

Example #2 - Here I'm trying to specify which item renderer to use at which depth.` 

```
 <mx:dataProvider>
            <mx:HierarchicalCollectionView id="foldersView">
                <mx:source>
                    <mx:HierarchicalData id="foldersData" source="{ model.folders }" childrenField="profiles" />
                </mx:source>
            </mx:HierarchicalCollectionView>
        </mx:dataProvider>
        <mx:columns>
            <mx:AdvancedDataGridColumn id="column" dataField="name" headerText="Name"/>
        </mx:columns>
        <mx:rendererProviders>
            <mx:AdvancedDataGridRendererProvider columnIndex="1" columnSpan="1" depth="1" renderer="com.themes.skins.GroupTitleItemRenderer"/>
            <mx:AdvancedDataGridRendererProvider columnIndex="1" columnSpan="1" depth="2" renderer="{ _groupItemRendererFactory }"/>
        </mx:rendererProviders>
    </mx:AdvancedDataGrid></code> 
```

# android - Android 中的 Javassist 缺少反射找到的类方法

> ID：13692800
> 
> 赞同：0
> 
> 时间：2012-12-03T22:20:10.547
> 
> 标签：android, reflection, javassist

我正在尝试使用 javassist 来检查 Android 类的内容。我这样做的目的无关紧要，请向我解释为什么会发生以下情况：

当我用反射检查类 com.android.Intent 时，我得到了一个巨大的类列表。当我使用 javassist 时，我得到的很少。为什么会存在这种差异？不应该有相同数量的方法吗？这是我的 javassist 代码：

```
final ClassPool pool = ClassPool.getDefault(getApplicationContext());
final CtClass cc = pool.get("android.content.Intent");
CtMethod[] mts = cc.getDeclaredMethods();

for (int i = 0; i < mts.length; i++) {
    System.out.println("JAVASSIST: " + mts[i].toString());
} 
```

这是输出：

```
12-03 14:42:23.819: I/System.out(2308): JAVASSIST: javassist.CtMethod@33a3ff1e[protected clone ()Ljava/lang/Object;]
12-03 14:42:23.819: I/System.out(2308): JAVASSIST: javassist.CtMethod@87a44f24[public equals (Ljava/lang/Object;)Z]
12-03 14:42:23.819: I/System.out(2308): JAVASSIST: javassist.CtMethod@919e519f[protected finalize ()V]
12-03 14:42:23.828: I/System.out(2308): JAVASSIST: javassist.CtMethod@70ae6c43[public final native getClass ()Ljava/lang/Class;]
12-03 14:42:23.828: I/System.out(2308): JAVASSIST: javassist.CtMethod@c13165c[public native hashCode ()I]
12-03 14:42:23.838: I/System.out(2308): JAVASSIST: javassist.CtMethod@5e7eee0a[public final native notify ()V]
12-03 14:42:23.838: I/System.out(2308): JAVASSIST: javassist.CtMethod@96773899[public final native notifyAll ()V]
12-03 14:42:23.838: I/System.out(2308): JAVASSIST: javassist.CtMethod@69cb6c6d[public toString ()Ljava/lang/String;]
12-03 14:42:23.838: I/System.out(2308): JAVASSIST: javassist.CtMethod@d0990d36[public final wait ()V]
12-03 14:42:23.838: I/System.out(2308): JAVASSIST: javassist.CtMethod@42889db2[public final wait (J)V]
12-03 14:42:23.849: I/System.out(2308): JAVASSIST: javassist.CtMethod@e8b1c97[public final native wait (JI)V]
12-03 14:42:23.849: I/System.out(2308): JAVASSIST: javassist.CtMethod@7e58240d[private native internalClone (Ljava/lang/Cloneable;)Ljava/lang/Object;] 
```

然而，很明显它缺少许多附加到这个类的 50 多个函数。这是我使用反射的代码：

```
Class<?> c = Class.forName("android.content.Intent");
Method[] allMethods = c.getDeclaredMethods();
for (int i = 0; i < allMethods.length; i++) {
    System.out.println("REFLECTION: " + allMethods[i].toString());
} 
```

这是输出：

```
12-03 14:42:23.869: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.addCategory(java.lang.String)
12-03 14:42:23.869: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.addFlags(int)
12-03 14:42:23.878: I/System.out(2308): REFLECTION: public java.lang.Object android.content.Intent.clone()
12-03 14:42:23.878: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.cloneFilter()
12-03 14:42:23.878: I/System.out(2308): REFLECTION: public int android.content.Intent.describeContents()
12-03 14:42:23.889: I/System.out(2308): REFLECTION: public int android.content.Intent.fillIn(android.content.Intent,int)
12-03 14:42:23.889: I/System.out(2308): REFLECTION: public boolean android.content.Intent.filterEquals(android.content.Intent)
12-03 14:42:23.889: I/System.out(2308): REFLECTION: public int android.content.Intent.filterHashCode()
12-03 14:42:23.889: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.getAction()
12-03 14:42:23.899: I/System.out(2308): REFLECTION: public [Z android.content.Intent.getBooleanArrayExtra(java.lang.String)
12-03 14:42:23.899: I/System.out(2308): REFLECTION: public boolean android.content.Intent.getBooleanExtra(java.lang.String,boolean)
12-03 14:42:23.899: I/System.out(2308): REFLECTION: public android.os.Bundle android.content.Intent.getBundleExtra(java.lang.String)
12-03 14:42:23.899: I/System.out(2308): REFLECTION: public [B android.content.Intent.getByteArrayExtra(java.lang.String)
12-03 14:42:23.899: I/System.out(2308): REFLECTION: public byte android.content.Intent.getByteExtra(java.lang.String,byte)
12-03 14:42:23.909: I/System.out(2308): REFLECTION: public java.util.Set android.content.Intent.getCategories()
12-03 14:42:23.909: I/System.out(2308): REFLECTION: public [C android.content.Intent.getCharArrayExtra(java.lang.String)
12-03 14:42:23.909: I/System.out(2308): REFLECTION: public char android.content.Intent.getCharExtra(java.lang.String,char)
12-03 14:42:23.909: I/System.out(2308): REFLECTION: public [Ljava.lang.CharSequence; android.content.Intent.getCharSequenceArrayExtra(java.lang.String)
12-03 14:42:23.909: I/System.out(2308): REFLECTION: public java.util.ArrayList android.content.Intent.getCharSequenceArrayListExtra(java.lang.String)
12-03 14:42:23.918: I/System.out(2308): REFLECTION: public java.lang.CharSequence android.content.Intent.getCharSequenceExtra(java.lang.String)
12-03 14:42:23.918: I/System.out(2308): REFLECTION: public android.content.ComponentName android.content.Intent.getComponent()
12-03 14:42:23.918: I/System.out(2308): REFLECTION: public android.net.Uri android.content.Intent.getData()
12-03 14:42:23.928: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.getDataString()
12-03 14:42:23.928: I/System.out(2308): REFLECTION: public [D android.content.Intent.getDoubleArrayExtra(java.lang.String)
12-03 14:42:23.928: I/System.out(2308): REFLECTION: public double android.content.Intent.getDoubleExtra(java.lang.String,double)
12-03 14:42:23.939: I/System.out(2308): REFLECTION: public java.lang.Object android.content.Intent.getExtra(java.lang.String)
12-03 14:42:23.939: I/System.out(2308): REFLECTION: public java.lang.Object android.content.Intent.getExtra(java.lang.String,java.lang.Object)
12-03 14:42:23.949: I/System.out(2308): REFLECTION: public android.os.Bundle android.content.Intent.getExtras()
12-03 14:42:23.949: I/System.out(2308): REFLECTION: public int android.content.Intent.getFlags()
12-03 14:42:23.949: I/System.out(2308): REFLECTION: public [F android.content.Intent.getFloatArrayExtra(java.lang.String)
12-03 14:42:23.959: I/System.out(2308): REFLECTION: public float android.content.Intent.getFloatExtra(java.lang.String,float)
12-03 14:42:23.959: I/System.out(2308): REFLECTION: public android.os.IBinder android.content.Intent.getIBinderExtra(java.lang.String)
12-03 14:42:23.959: I/System.out(2308): REFLECTION: public [I android.content.Intent.getIntArrayExtra(java.lang.String)
12-03 14:42:23.959: I/System.out(2308): REFLECTION: public int android.content.Intent.getIntExtra(java.lang.String,int)
12-03 14:42:23.959: I/System.out(2308): REFLECTION: public java.util.ArrayList android.content.Intent.getIntegerArrayListExtra(java.lang.String)
12-03 14:42:23.959: I/System.out(2308): REFLECTION: public [J android.content.Intent.getLongArrayExtra(java.lang.String)
12-03 14:42:23.959: I/System.out(2308): REFLECTION: public long android.content.Intent.getLongExtra(java.lang.String,long)
12-03 14:42:23.968: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.getPackage()
12-03 14:42:23.968: I/System.out(2308): REFLECTION: public [Landroid.os.Parcelable; android.content.Intent.getParcelableArrayExtra(java.lang.String)
12-03 14:42:23.968: I/System.out(2308): REFLECTION: public java.util.ArrayList android.content.Intent.getParcelableArrayListExtra(java.lang.String)
12-03 14:42:23.968: I/System.out(2308): REFLECTION: public android.os.Parcelable android.content.Intent.getParcelableExtra(java.lang.String)
12-03 14:42:23.968: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.getScheme()
12-03 14:42:23.968: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.getSelector()
12-03 14:42:23.968: I/System.out(2308): REFLECTION: public java.io.Serializable android.content.Intent.getSerializableExtra(java.lang.String)
12-03 14:42:23.968: I/System.out(2308): REFLECTION: public [S android.content.Intent.getShortArrayExtra(java.lang.String)
12-03 14:42:23.978: I/System.out(2308): REFLECTION: public short android.content.Intent.getShortExtra(java.lang.String,short)
12-03 14:42:23.978: I/System.out(2308): REFLECTION: public android.graphics.Rect android.content.Intent.getSourceBounds()
12-03 14:42:23.978: I/System.out(2308): REFLECTION: public [Ljava.lang.String; android.content.Intent.getStringArrayExtra(java.lang.String)
12-03 14:42:23.978: I/System.out(2308): REFLECTION: public java.util.ArrayList android.content.Intent.getStringArrayListExtra(java.lang.String)
12-03 14:42:23.978: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.getStringExtra(java.lang.String)
12-03 14:42:23.978: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.getType()
12-03 14:42:23.989: I/System.out(2308): REFLECTION: public boolean android.content.Intent.hasCategory(java.lang.String)
12-03 14:42:23.989: I/System.out(2308): REFLECTION: public boolean android.content.Intent.hasExtra(java.lang.String)
12-03 14:42:23.989: I/System.out(2308): REFLECTION: public boolean android.content.Intent.hasFileDescriptors()
12-03 14:42:23.989: I/System.out(2308): REFLECTION: public boolean android.content.Intent.isExcludingStopped()
12-03 14:42:23.989: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putCharSequenceArrayListExtra(java.lang.String,java.util.ArrayList)
12-03 14:42:23.989: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,byte)
12-03 14:42:23.989: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,char)
12-03 14:42:23.999: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,double)
12-03 14:42:23.999: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,float)
12-03 14:42:23.999: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,int)
12-03 14:42:23.999: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,long)
12-03 14:42:23.999: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,android.os.Bundle)
12-03 14:42:24.008: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,android.os.IBinder)
12-03 14:42:24.008: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,android.os.Parcelable)
12-03 14:42:24.008: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,java.io.Serializable)
12-03 14:42:24.019: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,java.lang.CharSequence)
12-03 14:42:24.019: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,java.lang.String)
12-03 14:42:24.028: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,short)
12-03 14:42:24.028: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,boolean)
12-03 14:42:24.028: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[B)
12-03 14:42:24.028: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[C)
12-03 14:42:24.028: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[D)
12-03 14:42:24.039: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[F)
12-03 14:42:24.039: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[I)
12-03 14:42:24.039: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[J)
12-03 14:42:24.039: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[Landroid.os.Parcelable;)
12-03 14:42:24.039: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[Ljava.lang.CharSequence;)
12-03 14:42:24.039: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[Ljava.lang.String;)
12-03 14:42:24.048: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[S)
12-03 14:42:24.048: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtra(java.lang.String,[Z)
12-03 14:42:24.048: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtras(android.content.Intent)
12-03 14:42:24.048: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putExtras(android.os.Bundle)
12-03 14:42:24.048: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putIntegerArrayListExtra(java.lang.String,java.util.ArrayList)
12-03 14:42:24.048: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putParcelableArrayListExtra(java.lang.String,java.util.ArrayList)
12-03 14:42:24.048: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.putStringArrayListExtra(java.lang.String,java.util.ArrayList)
12-03 14:42:24.058: I/System.out(2308): REFLECTION: public void android.content.Intent.readFromParcel(android.os.Parcel)
12-03 14:42:24.058: I/System.out(2308): REFLECTION: public void android.content.Intent.removeCategory(java.lang.String)
12-03 14:42:24.058: I/System.out(2308): REFLECTION: public void android.content.Intent.removeExtra(java.lang.String)
12-03 14:42:24.058: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.replaceExtras(android.content.Intent)
12-03 14:42:24.058: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.replaceExtras(android.os.Bundle)
12-03 14:42:24.058: I/System.out(2308): REFLECTION: public android.content.ComponentName android.content.Intent.resolveActivity(android.content.pm.PackageManager)
12-03 14:42:24.058: I/System.out(2308): REFLECTION: public android.content.pm.ActivityInfo android.content.Intent.resolveActivityInfo(android.content.pm.PackageManager,int)
12-03 14:42:24.068: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.resolveType(android.content.ContentResolver)
12-03 14:42:24.068: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.resolveType(android.content.Context)
12-03 14:42:24.068: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.resolveTypeIfNeeded(android.content.ContentResolver)
12-03 14:42:24.068: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setAction(java.lang.String)
12-03 14:42:24.079: I/System.out(2308): REFLECTION: public void android.content.Intent.setAllowFds(boolean)
12-03 14:42:24.079: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setClass(android.content.Context,java.lang.Class)
12-03 14:42:24.079: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setClassName(android.content.Context,java.lang.String)
12-03 14:42:24.079: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setClassName(java.lang.String,java.lang.String)
12-03 14:42:24.079: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setComponent(android.content.ComponentName)
12-03 14:42:24.079: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setData(android.net.Uri)
12-03 14:42:24.079: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setDataAndType(android.net.Uri,java.lang.String)
12-03 14:42:24.079: I/System.out(2308): REFLECTION: public void android.content.Intent.setExtrasClassLoader(java.lang.ClassLoader)
12-03 14:42:24.089: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setFlags(int)
12-03 14:42:24.089: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setPackage(java.lang.String)
12-03 14:42:24.089: I/System.out(2308): REFLECTION: public void android.content.Intent.setSelector(android.content.Intent)
12-03 14:42:24.089: I/System.out(2308): REFLECTION: public void android.content.Intent.setSourceBounds(android.graphics.Rect)
12-03 14:42:24.098: I/System.out(2308): REFLECTION: public android.content.Intent android.content.Intent.setType(java.lang.String)
12-03 14:42:24.108: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.toInsecureString()
12-03 14:42:24.108: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.toShortString(boolean,boolean,boolean)
12-03 14:42:24.108: I/System.out(2308): REFLECTION: public void android.content.Intent.toShortString(java.lang.StringBuilder,boolean,boolean,boolean)
12-03 14:42:24.108: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.toString()
12-03 14:42:24.108: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.toURI()
12-03 14:42:24.108: I/System.out(2308): REFLECTION: public java.lang.String android.content.Intent.toUri(int)
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public void android.content.Intent.writeToParcel(android.os.Parcel,int)
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public static android.content.Intent android.content.Intent.createChooser(android.content.Intent,java.lang.CharSequence)
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public static android.content.Intent android.content.Intent.getIntent(java.lang.String) throws java.net.URISyntaxException
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public static android.content.Intent android.content.Intent.getIntentOld(java.lang.String) throws java.net.URISyntaxException
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public static android.content.Intent android.content.Intent.makeMainActivity(android.content.ComponentName)
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public static android.content.Intent android.content.Intent.makeMainSelectorActivity(java.lang.String,java.lang.String)
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public static android.content.Intent android.content.Intent.makeRestartActivityTask(android.content.ComponentName)
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public static android.content.Intent android.content.Intent.parseIntent(android.content.res.Resources,org.xmlpull.v1.XmlPullParser,android.util.AttributeSet) throws org.xmlpull.v1.XmlPullParserException,java.io.IOException
12-03 14:42:24.118: I/System.out(2308): REFLECTION: public static android.content.Intent android.content.Intent.parseUri(java.lang.String,int) throws java.net.URISyntaxException
12-03 14:42:24.118: I/System.out(2308): REFLECTION: private void android.content.Intent.toUriInner(java.lang.StringBuilder,java.lang.String,int) 
```

为什么 javassist 缺少这么多方法？我是否以某种方式引用了错误的 ClassPool？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:00:05.200

我对 android 堆栈并不完全熟悉，尽管我知道它可以与一个名为[Dalvik VM](http://en.wikipedia.org/wiki/Dalvik_%28software%29)的修改后的 JVM 一起使用。Dalvik VM 类格式完全不同，因为它是基于寄存器的架构，与通常的基于堆栈的架构相反。

我认为问题很可能是 javassist 无法完全/正确地解析类格式，只给你一些方法。

**更新**

经过几次搜索后，我[在 SO 中找到了另一个帖子](https://stackoverflow.com/questions/7299845/adding-modifying-annotations-in-a-java-project)，这证实了我的怀疑。似乎 javassist 不适用于 android。虽然，似乎 ASM 确实如此。但是使用 ASM，您将在较低的抽象级别上工作。

引用用户 alokoko：

> *   可以使用 Javassist 修改 java 字节码，但它不适用于 Android 等平台。
> *   可以使用 ASM，但这涉及处理 Java 程序集（这里有一个示例：http: [//community.jboss.org/thread/150002](http://community.jboss.org/thread/150002)）。

# python - python中曲线的距离矩阵

> ID：13692801
> 
> 赞同：9
> 
> 时间：2012-12-03T22:20:16.597
> 
> 标签：python, numpy, scipy, distance, curves

我有一组曲线定义为二维数组（点数，坐标数）。我正在使用 Hausdorff 距离为他们计算距离矩阵。我当前的代码如下。不幸的是，它太慢了，500-600 条曲线每条有 50-100 个 3D 点。有没有更快的方法呢？

```
def distanceBetweenCurves(C1, C2):
    D = scipy.spatial.distance.cdist(C1, C2, 'euclidean')

    #none symmetric Hausdorff distances
    H1 = np.max(np.min(D, axis=1))
    H2 = np.max(np.min(D, axis=0))

    return (H1 + H2) / 2.

def distanceMatrixOfCurves(Curves):
    numC = len(Curves)

    D = np.zeros((numC, numC))
    for i in range(0, numC-1):
        for j in range(i+1, numC):
            D[i, j] = D[j, i] = distanceBetweenCurves(Curves[i], Curves[j])

    return D 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T10:05:48.093

您的问题也可能与[此有关](https://stackoverflow.com/q/10947366/1622937)

这是一个难题。一种可能的方法是自己实现欧几里得距离，完全放弃`scipy`并使用[pypy](http://pypy.org/)的 JIT 编译器。但这很可能不会让你变得太多。

*就个人而言，我建议您用 C 编写例程。*

问题不在于实施，而在于您解决此问题的方式。您通过计算每对可能的度量空间子集中的每对不同点的欧几里德距离来选择一种蛮力方法。这对计算要求很高：

*   假设你有 500 条曲线，每条曲线有 75 个点。使用蛮力方法，您最终计算欧几里得距离 500 * 499 * 75 * 75 = 1 403 437 500 次。这种方法需要永远运行也就不足为奇了。

我不是这方面的专家，但我知道 Hausdorff 距离广泛用于图像处理。我建议您浏览文献以了解速度优化算法。起点可能是[this](https://docs.google.com/viewer?url=http%3A%2F%2Fwww.vldb.org%2Fpvldb%2Fvol4%2Fp506-nutanong.pdf)或[this](https://docs.google.com/viewer?url=http%3A%2F%2Fwww.cs.uu.nl%2Fdocs%2Fvakken%2Fgmspr%2FComparing%2520Images%2520Using%2520the%2520Hausdorff%2520Distance2.doc) paper。此外，经常与豪斯多夫距离一起提到的是[沃罗尼图](http://en.wikipedia.org/wiki/Voronoi_diagram)。

我希望这些链接可以帮助您解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-26T10:13:10.317

我最近在这里回答了一个类似的问题： [Hausdorff distance between 3D grids](https://stackoverflow.com/questions/30706079/hausdorff-distance-between-3d-grids)

我希望这会有所帮助，我在成对比较中遇到了 25 x 25.000 点（总共 25 x 25 x 25.000 点），并且我的代码运行时间从 1 分钟到 3-4 小时（取决于点数）。我在数学上看不到太多提高速度的选择。

替代方案可以是使用不同的编程语言 (C / C++) 或将此计算带到 GPU (CUDA)。我现在正在使用 CUDA 方法。

## 2015 年 3 月 12 日编辑：

通过进行基于并行 CPU 的计算，我能够加快这种比较。那是最快的方法。我使用了**pp**包（**parallel python**）的好例子，并在三台不同的计算机和 phython 组合上运行。不幸的是，我一直在使用 python 2.7 32 位时出现内存错误，所以我安装了 WinPython 2.7 64 位和一些实验性的 numpy 64 位软件包。

[![在此处输入图像描述](../Images/fe252088a60150b6c66ef5bce8316703.png)](https://i.stack.imgur.com/qrNW6.png)

所以对我来说，这种努力非常有帮助，它对我来说并不像 CUDA 那样复杂......祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:53:08.803

您可以尝试几种方法：

1.  使用 numpy-MKL，它利用 Intel 的高性能数学内核库而不是 numpy；
2.  使用 Bootleneck 处理数组函数；
3.  使用 Cpython 进行计算。

# database - Postgresql 角色无法访问其创建的架构

> ID：13692806
> 
> 赞同：0
> 
> 时间：2012-12-03T22:20:37.070
> 
> 标签：database, database-schema, postgresql-9.2

值得注意的信息

*   我在 Windows 7 64 位上使用**Postgresql 9.2 。**[它是使用Postgresql 网站](http://www.postgresql.org)提供的安装程序安装的
*   我以 postgres 身份登录**到****postgres**数据库
***   我在**postgres**用户下创建**BryceTest Schema*****   我配置`search_path`为显示`"brycetest, public"`****

 ****由 pgAdmin-III 提供的查询生成器生成的此 SQL 按预期工作

```
SELECT "DummyDataMasterTable"."Dummy_PK", 
       "DummyDataMasterTable"."DummyName"
FROM "BryceTest"."DummyDataMasterTable"; 
```

**但这不是**

```
SELECT DummyDataMasterTable.Dummy_PK, 
       DummyDataMasterTable.DummyName
FROM BryceTest.DummyDataMasterTable;
-------------------------------------------

ERROR:  relation "dummydatamastertable" does not exist
LINE 4:     FROM DummyDataMasterTable;
                 ^

********** Error **********

ERROR: relation "dummydatamastertable" does not exist
SQL state: 42P01
Character: 101

     FROM BryceTest.DummyDataMasterTable; 
```

**也没有**

```
SELECT 
    Dummy_PK, 
    DummyName
FROM DummyDataMasterTable;

-------------------------------
ERROR:  relation "dummydatamastertable" does not exist
LINE 4:     FROM DummyDataMasterTable;                     ^

********** Error **********

ERROR: relation "dummydatamastertable" does not exist
SQL state: 42P01
Character: 59 
```

我会**认为**，通过配置我的模式`search_path`以首先查看我新创建的模式**，**它不需要完全限定`schemaName.tableName`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:47:46.923

您使用双引号创建了表，因此它们现在区分大小写（根据 ANSI SQL 标准的要求）。

`"FooBar"`是与 不同的名称，`"Foobar"`但是它们是相同的名称（因为它们没有被引用）。`FooBar``foobar`

**因为您这样做了，所以您必须始终**引用表名和列名。

以下是有效的，因为没有引用标识符：

```
create table FooBar 
(
  Some_COLUMN integer
);

select some_column from foobar;
select SOME_COLUMN FROM FOOBAR;
select Some_ColumN from FooBAR; 
```

我建议您重新创建不带任何引号的表，然后您可以以任何方式编写表名和列名（只要您不使用双引号）。

有关（引用）标识符的更多详细信息在手册中：[http ://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)****

# ruby-on-rails - Rails 自定义更新操作生成获取请求

> ID：13692807
> 
> 赞同：1
> 
> 时间：2012-12-03T22:20:37.147
> 
> 标签：ruby-on-rails, routing, paperclip

我正在使用回形针来存储名为“费用”的记录的图像——图像是费用的收据。

一切正常，但是当我去编辑费用时，我想要一个链接来删除与该费用关联的图像，所以在我的费用控制器中，我有：

```
def delete_receipt_img
  @expense = Expense.find(params[:id])
  @expense.receipt_img.destroy
  @expense.receipt_img.clear

  @expense.save

  redirect_to edit_expense_path(params[:id])
end 
```

我生成编辑费用页面的视图，其中仅当图像与费用相关联时才显示删除链接：

```
<% if @expense.id.nil? || !@expense.receipt_img.file? %>
    <%= f.label :attach_receipt %><br/>
    <%= f.file_field :receipt_img %>
<% else %>
    <%= image_tag @expense.receipt_img.url %>
    <%= link_to "Delete Receipt", 
                delete_receipt_img_expense_url(@expense.id), 
                :method => :put %>
<% end %> 
```

在我的路由文件中，我遵循了 Rails 路由指南中的示例，并创建了如下链接：

```
resources :expenses do
  member do
   put 'delete_receipt_img'
  end
end 
```

当我转到编辑费用页面时，我看到“删除收据”链接是这样生成的：

```
<a href="http://localhost:3000/expenses/1/delete_receipt_img" data-method="put" rel="nofollow">Delete Receipt</a> 
```

所以*看起来*一切都很好，但是当我点击链接时，我得到一个路由错误：

> **路由错误**
> 
> 没有路线匹配 [GET] "/expenses/1/delete_receipt_img"
> 
> 尝试运行 rake 路线以获取有关可用路线的更多信息。

我不知道这个 GET 请求来自哪里！想法？

# javascript - 学习 Dart 好还是我必须使用基本的 javascript？

> ID：13692812
> 
> 赞同：27
> 
> 时间：2012-12-03T22:20:41.910
> 
> 标签：javascript, html, client-side, dart

还是继续使用基本的 Javascript 语言更好还是 Dart 会为我节省很多时间？我认为 Dart 看起来是很酷的软件，但它会增加我的产量吗？Dart 代码比 javascript 快吗？

是好方法还是目前还不清楚是否选择学习？

我的目标是制作非常好的动画网站，并带有一些复杂的自定义过渡。我用 jQuery 做得很好，但我想比使用 jQuery 插件和调整它更具体和专业。

非常感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T22:25:58.297

这一切都取决于您要做什么以及您的要求是什么。我建议你阅读一些 Dart 与 Javascript 的页面（以了解故事的两面），并在阅读完这些页面后问问自己你的立场。

以下是来自 Google 的“Dart vs. Javascript”的一些快速链接。请注意，这些链接可能不平衡，甚至有很好的理由，但我希望它们足以让您入门。我强烈建议您寻找更多的比较，并对问题的双方进行自己的研究：

这是一个支持 Dart 的页面，但其中详细说明了为什么张贴者喜欢 Dart： [http://www.grobmeier.de/10-reasons-why-dart-is-cooler-than-javascript-03012012.html#。 UL0kXuT7J8E](http://www.grobmeier.de/10-reasons-why-dart-is-cooler-than-javascript-03012012.html#.UL0kXuT7J8E)

这是一个更亲 Javascript 的角度： [http ://www.quirksmode.org/blog/archives/2011/10/dart_or_why_jav.html](http://www.quirksmode.org/blog/archives/2011/10/dart_or_why_jav.html)

同样，不要将这些链接作为您是否应该使用 Dart 的说明。相反，请阅读为什么每个链接都支持其中一个，然后问问自己该推理是否适用于您的案例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T22:28:20.777

Google 在今年早些时候的上一次 Google I/O 大会上介绍 Dart 的演讲可能会回答您的一系列问题和考虑：

[http://www.youtube.com/watch?v=bsGgfUreyZw](http://www.youtube.com/watch?v=bsGgfUreyZw)

简而言之：听起来 Dart 还没有到真正有用的地步。因此，您需要考虑的一件事是：您何时需要该工具。如果是现在，请远离 Dart（暂时）。

如果您对纯 JavaScript 编码的替代方案感兴趣，您还应该查看 Google Web Toolkit。我有一种感觉 Dart 甚至可能是 GWT 的演变。

GWT 非常成熟，可以在今天采取行动，并使用 Java 进行开发，结合​​ Eclipse 或 IntelliJ 提供了惊人的生产力，我认为这在 JavaScript 中是不可能的。特别是对于需要跨浏览器运行并且实际上没有错误的复杂应用程序。

这也是 GWT 的一个（相当古老但）很好的介绍，同样来自 Google I/O（但 2008 年）：

[https://www.youtube.com/watch?v=nvti32k4xyU](https://www.youtube.com/watch?v=nvti32k4xyU)（替换链接...这个更好）

# php - 在更大的数组树中搜索数组键分支 - PHP

> ID：13692816
> 
> 赞同：-2
> 
> 时间：2012-12-03T22:21:13.533
> 
> 标签：php, arrays, search, recursion, tree

问题类似于这个[Find an array inside another large array](https://stackoverflow.com/questions/3940194/find-an-array-inside-another-larger-array)

不同之处在于，我不是在搜索值，而是在更大的数组键树中搜索一个小的数组键分支。

基本上这是我正在寻找的数组键分支：

```
$mission_parameters['stmt_echo']['subnodes']['exprs'][0]['expr_constfetch']['subnodes']['name']['name']['subnodes']['parts'][0] = 'true'; 
```

数组键树是一棵非常大的树，这意味着它是多维的，它可能在树中的任何点包含 $mission_parameters。

所以这有点像试图在一棵棕色的树上找到一根黄色的树枝，它可能有也可能没有黄色的树枝。

比较分支末尾的值也是必要的。

我正在查看array_intersect，但它不适用于多维。以前有没有人解决过这种问题？

请注意，这与在数组中搜索数组不同。我不是在寻找价值。

- 编辑 -

这是一个例子：

我在找

```
array(
    'statement' => array(
        'statement2' => array(
            0 => 'true',
        ),
    ),
); 
```

在这样一个更大的数组中：

```
array(
    'statement4' => array(
        'statement' => array(
            'statement2' => array(
                0 => 'true',
            ),
            'statement3' => array(
                2 => 'false',
            ),
        ),
    ),
); 
```

您是否看到较小的阵列如何像较大阵列的分支。较大的数组当前包含较小的分支，但它具有其他类型的其他元素。因此我正在搜索一个数组键分支。在这个例子中，它将是`[statement][statement2][0] = 'true'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:54:47.643

我认为（并且您已经确认）您可以将数据表示为 XML 结构。在这种情况下，您可以使用[XPath](http://php.net/manual/en/class.domxpath.php)查找数据中的任何分支。以下是从您的问题中推断出的示例 XML 数据：

```
<?xml version="1.0" encoding="utf-8" ?>
<stmt_echo>
    <subnodes>
        <exprs>
            <expr_constfetch>
                <subnodes>
                    <name>
                        <name>
                            <subnodes>
                                <parts>
                                    <part>true</part>
                                    <!-- more items -->
                                </parts>
                            </subnodes>
                        </name>
                    </name>
                </subnodes>
            </expr_constfetch>
            <!-- more items -->
        </exprs>
    </subnodes>
</stmt_echo> 
```

这是用于定位您提到的节点的 PHP 代码：

```
$doc = new DOMDocument;
$doc->Load("test.xml");

$xpath = new DOMXPath($doc);
$nodes = $xpath->query("//subnodes/parts[part='true']");

foreach($nodes as $node) {
    dumpNodePath($node);
}

# Output
# /stmt_echo/subnodes/exprs/expr_constfetch/subnodes/name/name/subnodes/parts

function dumpNodePath($node) {
    $path = array($node->tagName);
    while ($node = $node->parentNode) {
        if ($node->nodeType != XML_DOCUMENT_NODE) {
            $path[] = $node->tagName;
        }
    }
    echo "/" . implode("/", array_reverse($path)) . "\n";
} 
```

# haskell - 你如何让像 HasHdbc 这样的 Snaplet 在 Snap 上下文之外工作？

> ID：13692823
> 
> 赞同：1
> 
> 时间：2012-12-03T22:21:31.107
> 
> 标签：haskell, haskell-snap-framework

在[使用 HDBC Snaplet 的教程中](http://norm2782.github.com/snaplet-hdbc.html)，它说“设计 HDBC snaplet 时的目标之一是将函数与 Handler monad 或任何与 Snap 相关的 monad 分离，以便相同的查询也可以在外部运行Snap 上下文，例如在命令行工具中。”

我正在努力做到这一点。

类型类 HasHdbc 有定义

```
class  (  IConnection c
       ,  ConnSrc s
       ,  MonadCatchIO m
       )
  =>   HasHdbc m c s | m -> c s where
  getHdbcState :: m (HdbcSnaplet c s) 
```

可以这样定义这种类型的 Snap 应用程序的实例：

```
instance HasHdbc (Handler App App) Connection IO where
  getHdbcState = with dbLens get 
```

有人可以勾勒出如何使用 HasHdbc 类型类在 Snap 上下文之外制作这个命令行工具吗？我在基本层面上了解类型类，但类型签名`getHdbcState :: m (HdbcSnaplet c s)`对我来说是一个挑战，例如为 IO Monad 定义一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:39:13.940

你在正确的轨道上。您确实需要为要使用的任何 monad 定义一个 HasHdbc 实例。为此，您必须定义一个返回 HdbcSnaplet 的函数 getHdbcState。该数据类型中的信息不可能来自任何地方，但 getHdbcState 函数不接受任何参数。这意味着您要么必须为数据库服务器输入常量，要么从文件或其他东西中读取它们。更灵活的方法是为 ReaderT 或 Reader 创建一个 HasHdbc 实例。

# django - Django - 放置特定代码的位置

> ID：13692824
> 
> 赞同：0
> 
> 时间：2012-12-03T22:21:35.070
> 
> 标签：django, django-models, django-views

我想要一些处理缓存地理编码结果的代码，但我不确定在哪里放置它。一个特定的 .py 文件？自定义经理？模型方法？看法？

这段代码基本上会触发请求，在模型中操作/存储结果并缓存数据。

我应该将处理许多事情（请求、模型、缓存）的代码放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:45:05.413

因为它们都与地理相关，所以我会将它放在它自己的模块（即`geo.py`）中，然后在其中创建可以导入并在其他模块中使用的辅助方法和类。例如，我只是在猜测您需要的功能是什么，可能是这样的`geo.py`：

```
class GeoConnection(object):
    def __init__(self, whatever, init, vars, here):
        # initialize connection

    def get_country_code(self, some_var):
        # fire off request and return value

class GeoCache(object):
    def store(self, key, value):
        # code

    def retrieve(self, key):
        # code 
```

然后在其他一些模块中，您可以执行以下操作：

```
from your_app.geo import GeoConnection

gc = GeoConnection(whatever, init, vars, here)
some_model.country_code = gc.get_country_code(some_var)
some_model.save() 
```

# c# - BackgroundWorker 和访问全局变量

> ID：13692829
> 
> 赞同：0
> 
> 时间：2012-12-03T22:21:51.010
> 
> 标签：c#, serial-port, c#-2.0, backgroundworker

我得到了全局变量 SerialPort comm; 打开 com 端口后，我正在读取接收的字节，我得到了 com 端口已关闭的异常。
我如何才能在后台工作人员中正确访问它？
有没有更好的方法来声明通讯？

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    while(true)
    {
        if ((worker.CancellationPending == true))
        {
            e.Cancel = true;
            break;
        }
        else
        {
            string str = comm.ReadLine();
            //...
        }
    }
} 
```

**编辑：**是的......只需使用这个[http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)
不需要 BackgroundWorker

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:32:59.477

SerialPort.ReadLine() 是一个阻塞调用。在端口收到一行文本和一个新行之前，它不会返回。这不可避免地意味着您对 CancellationPending 的测试将不起作用，代码卡在 ReadLine() 调用中。因此，您将调用 bgw 的 CancelAsync() 调用，然后关闭串行端口。这会导致 ReadLine() 方法抛出异常。

没有好的方法可以干净地做到这一点，您没有任何其他方法可以强制 ReadLine() 方法返回。因此，捕获异常，检查 CancellationPending 是否为真，并在它为真时退出。

# php - PHP ftp_chmod 和文件夹权限

> ID：13692831
> 
> 赞同：2
> 
> 时间：2012-12-03T22:22:16.160
> 
> 标签：php, upload, permissions, ftp

我正在开发一个 PHP FTP 上传脚本，到目前为止，它仅在我的 FTP 服务器上的目标文件夹具有权限设置 775 或 777 时才有效。

我需要某事。像下面的代码（我知道它应该只适用于文件而不是文件夹）来远程更改文件夹权限：

```
ftp_chmod ($connection, '0775', './'); 
```

上传脚本不适用于我自己的 FTP 服务器，而是将数据从我的服务器推送到我的客户端 FTP 服务器。

有没有办法在我这边设置正确的权限，让我的客户摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:37:09.243

> 有没有办法在我这边设置正确的权限，让我的客户摆脱它？

仅当他们的 FTP 服务器配置错误时。如果已正确配置，那么您应该已经具有写入权限。如果您不这样做，那么您将永远无法将其授予自己。

# wpf - XAML 无类附加属性

> ID：13692833
> 
> 赞同：-2
> 
> 时间：2012-12-03T22:22:23.317
> 
> 标签：wpf, xaml, dependency-properties

我在整个框架的几个类中有几个附加属性。所有这些都使用`XmlnsDefinitionAttribute`. 我注意到，如果我声明其中一些附加属性而不引用类名（实际包含该属性的类，我会收到编译时错误：

`The property 'XXX' does not exist in XML namespace 'YYY'`

为了更好地解释，当我假设一个`FocusHelper`具有`IsFocused`附加属性的类时会发生这种情况，但尝试像这样在 XAML 中使用它：

`<CheckBox my:IsFocused="true"/>`.

请注意，我指定了 xml 命名空间（我已正确声明），但没有指定类名。

**我的问题是：**

有没有办法做到这一点？该错误提示我有一种方法可以定义`properties inside namespaces directly`. 这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T23:10:11.227

这不是 XAML 问题，这是 C#“问题”。这意味着，您不能在 C# 中拥有“全局”属性。它必须在一个类中。

C# 中没有“全局”概念。

为了获得您想要的语法，您必须能够全局声明一个属性（即在类的上下文之外），而这在 C# 中是不可能的

这就是为什么框架附加属性前面也有类名（Grid.Column、Canvas.Top）

对于框架附加属性（Grid.Column、Canvas.Top 等），您不必指定命名空间，因为它们位于“默认”命名空间中

```
xmlns="" 
```

与您的命名空间相反

```
xmlns:my="" 
```

# perl - 在 Perl 中使用 Net::FTP 并尝试不同的命令

> ID：13692836
> 
> 赞同：0
> 
> 时间：2012-12-03T22:22:31.683
> 
> 标签：perl, networking, cpan

出于测试目的，我需要编写一个程序，使用 [ `Net::FTP`][Net::FTP] 连接到服务器，然后接收某个目录中的文件。收到后，立即将其放回同一位置。

这是我的代码：

```
 #!/usr/bin/perl

   use Net::FTP;

   $host = "serverA";
   $username = "test";
   $password = "ftptest123";
   $ftpdir = "/ftptest";
   $file = "ftptest.txt";

   $ftp = Net::FTP->new($host) or die "Error connecting to $host: $!";

   $ftp->login($username,$password) or die "Login failed: $!";

   $ftp->cwd($ftpdir) or die "Can't go to $ftpdir: $!";

   $ftp->get($file) or die "Can't get $file: $!";

   $ftp->put($file) or die "Can't put $file: $!";

   $ftp->quit or die "Error closing ftp connection: $!"; 
```

关于如何解决这个问题的任何想法？它似乎运行良好，但是当它遇到`put`语句时，它会向我射击：

```
[Net::FTP]: https://metacpan.org/module/Net::FTP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:07:28.793

检查错误消息`$ftp->message`，而不是`$!`。它可能会告诉您您没有对该目录的写入访问权限，或者不允许覆盖现有文件...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:12:05.653

首先，您应该*始终* `use strict`and `use warnings`，并在所有变量的第一个使用点使用`my`. 这样一来，许多您可能会忽略的琐碎错误都会为您突出显示。

的文档`Net::FTP`不完整，因为它没有提供有关该`message`方法的任何信息。但是，从概要中可以清楚地看出，任何错误的信息都可以使用`$ftp->message`.

当然这不适用于构造函数，好像没有对象提供`message`方法一样失败，所以在这种情况下，信息出现在内置变量中`$@`。

在您的程序上尝试这种变化。它可能会立即告诉您失败的原因。

```
#!/usr/bin/perl

use strict;
use warnings;

use Net::FTP;

my $host = 'serverA';
my $username = 'test';
my $password = 'ftptest123';
my $ftpdir = '/ftptest';
my $file = 'ftptest.txt';

my $ftp = Net::FTP->new($host) or die "Error connecting to $host: $@";

$ftp->login($username,$password) or die "Login failed: ", $ftp->message;

$ftp->cwd($ftpdir) or die "Can't go to $ftpdir: ", $ftp->message;

$ftp->get($file) or die "Can't get $file: ", $ftp->message;

$ftp->put($file) or die "Can't put $file: ", $ftp->message;

$ftp->quit or die "Error closing ftp connection: ", $ftp->message; 
```

# c# - 确定财产价值

> ID：13692839
> 
> 赞同：0
> 
> 时间：2012-12-03T22:22:40.497
> 
> 标签：c#, winforms, propertygrid

我有一个现有的窗口窗体应用程序。该应用程序有一个属性网格。属性的值由用户在运行时设置。我想做的是从代码中确定任何给定属性的当前值。我取得了部分成功。我能够获取类别以及属性名称信息。我很难获得用户设置的属性的当前值，以及其他两个相关问题。

我正在使用的代码如下：

```
 // ICustomTypeDescriptor Interface Implementation
 public AttributeCollection GetAttributes()
 {
      return TypeDescriptor.GetAttributes(GetType());
 }

 public string GetClassName()
 {
      return TypeDescriptor.GetClassName(GetType());
 }

 public string GetComponentName()
 {
      return TypeDescriptor.GetComponentName(GetType());
 }

 public TypeConverter GetConverter()
 {
      return TypeDescriptor.GetConverter(GetType());
 }

 public EventDescriptor GetDefaultEvent()
 {
      return TypeDescriptor.GetDefaultEvent(GetType());
 }

 public PropertyDescriptor GetDefaultProperty()
 {
      return TypeDescriptor.GetDefaultProperty(GetType());
 }

 public object GetEditor(Type editorBaseType)
 {
      return TypeDescriptor.GetEditor(GetType(), editorBaseType);
 }

 public EventDescriptorCollection GetEvents(Attribute[] attributes)
 {
      return TypeDescriptor.GetEvents(GetType(), attributes);
 }

 public EventDescriptorCollection GetEvents()
 {
      return TypeDescriptor.GetEvents(GetType());
 }

 public PropertyDescriptorCollection GetProperties(Attribute[] attributes)
 {
      // ... This returns a list of properties.
      PropertyDescriptorCollection pdc = TypeDescriptor.GetProperties(GetType(), attributes);
      PropertyDescriptor[] arr = new PropertyDescriptor[pdc.Count];
      pdc.CopyTo(arr, 0);
      PropertyDescriptorCollection propertyCollection = new PropertyDescriptorCollection(arr);

      ModifyProperties(propertyCollection); // modifies which properties are visible

      // temporary code to get the program to print out the properties
foreach (PropertyDescriptor pd in propertyCollection)
{
           Print("input category = "+pd.Category);
           Print("input display name = "+pd.DisplayName);
           Print("input name = "+pd.Name);
        // Print("input value = "+pd.GetValue(Input).ToString()); <--- Does NOT work
}

return propertyCollection;
 }

 public PropertyDescriptorCollection GetProperties()
 {
      return TypeDescriptor.GetProperties(GetType());
 }

 public object GetPropertyOwner(PropertyDescriptor pd)
 {
      return this;
 } 
```

我的问题是：

1.  如何获取属性的值？例如，我有一个属性纵横比。它的显示名称是 Aspect Ratio，它的名称是 aspectRatio。它的值为 5。如何在运行时通过代码检索它？

2.  我如何订购这些属性。我尝试使用上述方法对属性进行排序，但排序失败。我不确定如何最好地进行。

任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:05:26.970

也许这

```
foreach (PropertyDescriptor pd in propertyCollection)
{
     Print("input category = "+pd.Category);
     Print("input display name = "+pd.DisplayName);
     Print("input name = "+pd.Name);
     Print("input value = " + pd.GetValue(GetPropertyOwner(pd)));   
} 
```

如果您有自定义对象，您想从中获得一个不错的字符串，可以添加一个辅助方法，如下所示：

```
 private string GetPropertyValue(PropertyDescriptor pd)
    {
        var property = GetPropertyOwner(pd);
        if (property is CustomObject)
        {
            var dataSeries = property as CustomObject;
            // This will return a string of the list contents ("One, Two, Three")
            return string.Join(",", dataSeries.ListProperty.ToArray());

        }
        else if (property is ....)
        {
            return somthing else
        }
        return property.ToString();
    } 
```

演示类：

```
public class CustomObject
{
    private List<string> _listProperty = new List<string>(new string[]{"One","Two","Three"});
    public List<string> ListProperty
    {
        get { return _listProperty; }
        set { _listProperty = value; }
    }

} 
```

# ruby - 提取 ncview 工具中存在的值...使用 ruby -netcdf

> ID：13692841
> 
> 赞同：0
> 
> 时间：2012-12-03T22:22:54.637
> 
> 标签：ruby, geolocation, geospatial, netcdf

我有一个 netcdf 数据文件，描述为：[https ://gist.github.com/4198037](https://gist.github.com/4198037)

我用一个名为“ncview”的工具打开了这个文件，我找到了我需要的确切值：

当前： (i=397, j=137) 14 (x=18.75, y=21.25)

![在此处输入图像描述](../Images/83383149332ae9d6ec8d18dc7cc00546.png)

14的价值是赚钱的。它对应于地图上的颜色输出......我需要能够为给定的输入 Lat/Lng 获得该值。

有没有人碰巧知道我可以输入 (lat, lng) 并获得该值的特定 ruby​​ 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:56:53.297

这需要使用 gem "ruby-netcdf"、"0.6.6.1" gem（这涉及一个漫长的安装过程）......但是一旦安装，您可以轻松获取如下值：

```
require "rubygems"
require "numru/netcdf"    
@global_biome = NumRu::NetCDF.open("netcdf/vegtype.nc")
@global_biome_num = @global_biome.var("vegtype")[397,137,0,0][0]
p @global_biome_num 
```

# c# - WebClient.DownloadFile 存储的文件太小

> ID：13692844
> 
> 赞同：1
> 
> 时间：2012-12-03T22:22:57.217
> 
> 标签：c#, .net, webclient

我正在尝试在 VS2008、.NET Framework 3.5 中下载和存储图像文件，但生成的文件太小。

当我在浏览器中导航到[http://www-nass.nhtsa.dot.gov/nass/cds/GetBinary.aspx?Image&ImageID=682367204](http://www-nass.nhtsa.dot.gov/nass/cds/GetBinary.aspx?Image&ImageID=682367204)时，我可以将其下载为 68k 文件。但是，使用以下代码，我得到了一个小于 4k 的文件：

```
using (WebClient webClient = new WebClient()) {
  webClient.DownloadFile("http://www-nass.nhtsa.dot.gov/nass/cds/GetBinary.aspx?Image&ImageID=682367204", @"D:\\682367204.jpg");
} 
```

更新：[具有凭据的 WebClient 仍未下载文件](https://stackoverflow.com/questions/13457487/webclient-with-credentials-still-not-downloading-file)可能描述了我的问题的来源（和解决方案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:25:39.823

该网址似乎有问题。它在 Internet Explorer 中为我工作，但使用 google chrome 浏览器开始下载**“GetBinary.aspx”**文件，也许这就是你得到的**4ks**文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:46:18.150

好吧，我想这是由于**授权限制**。

您的代码、*Carlos*和我自己获得 4K 文件的原因是因为我们无权访问所请求的文件。

我猜您已经使用某种登录程序通过浏览器访问该站点，或者位于允许该站点使用您的 NT 令牌的受信任网络上。

似乎证实了这一假设的是，当我将 GetBinary.aspx 文件的扩展名更改为**jpeg**时，我获得了一种“禁止”图标。

因此，您可能需要从代码中做更多的工作来进行**身份验证**。

编辑：使用带有 Cygwin的“NIX**文件实用程序”给出：**

```
JPEG image data, JFIF standard 1.01 
```

所以你得到的确实是一张JPEG图像。

# asp.net-mvc - ASP.NET MVC Jqgrid 编辑？

> ID：13692846
> 
> 赞同：0
> 
> 时间：2012-12-03T22:23:28.717
> 
> 标签：asp.net-mvc, jqgrid, edit

**脚本：**

```
<script type="text/javascript">
$(document).ready(function () {
    $("#grid").jqGrid({
        url: '@Url.Action("GetAllCategories", "Admin")',
        datatype: "json",
        mtype: 'GET',
        colNames: ['sno','Kategori Adı', 'Sıra No', 'Vitrin'],
        colModel: [
                { name: 'sno', index: 'sno', editable: false, hidden: true },
                  { name: 'Name', index: 'Name', editable: true },
                  { name: 'OrderNo', index: 'OrderNo', editable: true },
                  { name: 'IsShowcase', index: 'IsShowcase', width: 100, editable: true, sortable: false }
        ],
        jsonReader: {
            repeatitems: false
        },
        rowNum: 10,
        rowList: [10, 20, 30, 40, 50],
        pager: jQuery('#gridpager'),
        sortname: 'CategoryName',
        viewrecords: true,
        sortorder: "asc",
        id: "sno",
        width: 710,
        height: 300,
        editurl: '@Url.Action("_EditCategory", "Admin")'
    }).navGrid('#gridpager');
});
</script> 
```

**控制器**

```
[HttpPost]
public ActionResult _EditCategory(CategoriesViewModel categoriesViewModel)
{
    Categories category = entity.Categories.SingleOrDefault(x => x.sno == categoriesViewModel.sno);
    category.IsShowcase = categoriesViewModel.IsShowcase;
    category.Name = categoriesViewModel.Name;
    category.OrderNo = categoriesViewModel.OrderNo;
    try
    {
        entity.Categories.Add(category);
        entity.SaveChanges();
    }
    catch (Exception ex) { }

    return PartialView(categoriesViewModel);
} 
```

我调试了它。我不能只发布模型的 sno（sno 是模型和 uniq 的主键）。模型贴了参数，但只有sno没有贴。

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:54:40.360

在您的代码中，我关心的第一件事是`id`您使用的选项 - jqGrid 没有这样的选项。如果该选项是假设让 jqGrid 从您的模型中解析行 ID，那么您应该`jsonReader`为此目的使用：

```
$("#grid").jqGrid({
    ...
    jsonReader: {
        repeatitems: false,
        id: 'sno'
    },
    ...
}).navGrid('#gridpager'); 
```

现在假设您的行 ID 已正确绑定，您可以使用`prmNames`选项告诉 jqGrid 它应该在*sno*名称下发布行 ID：

```
$("#grid").jqGrid({
    ...
    jsonReader: {
        repeatitems: false,
        id: 'sno'
    },
    prmNames: {
        id: 'sno'
    },
    ... 
}).navGrid('#gridpager'); 
```

这应该可以解决您的问题。

PS 很可能您的列模型（和列名称）定义中不需要*sno*列，因为您仅将它用于行 ID。

# http - ReST API 是否应该默默地忽略更改不存在字段的请求？

> ID：13692847
> 
> 赞同：6
> 
> 时间：2012-12-03T22:23:30.887
> 
> 标签：http, rest, api-design

考虑一个提供数据库接口的 ReST API。

服务器是否应该以尝试为数据库中不存在的列指定新值的`HTTP 400 Bad Request`on a`PUT`或请求进行响应？`PATCH`服务器应该默默地忽略错误吗？服务器是否应该做一些我在这里没有提到的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:46:28.740

**除了服务器关闭连接而不发送响应之外，不要默默地忽略**
我不知道怎么做的请求。

400 和 409 一样好。您可能还需要考虑 403 Forbidden：服务器理解您的请求但拒绝执行它。

400 通常用于格式错误的请求。
403 适用于请求的格式足够好，以至于您的服务器代码能够解析它并理解请求的目的。我认为这里最符合您的要求。

但是，您问题中的一行让我担心：

> 尝试为数据库中不存在的列指定新值

请求不应修改数据库中列的值。他们应该修改资源的内容。两者不一样。很容易陷入思考“哦，让我们将这个域对象公开为 HTTP 资源”的陷阱，但这可能会导致可伸缩性问题。一般来说，你的 URI 空间中应该有比模型对象更多的资源。这允许您使用与那些更动态的部分不同的策略来缓存模型中相当静态的部分。

例如，在订单处理系统中，收货地址很少更改，但进度跟踪器可能每隔几分钟就更改一次。给这两个数据不同的 URI 和不同的缓存策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T20:54:29.117

默默地忽略错误是让你的 API 难以使用的秘诀。除非您提供非常好的文档（有时甚至如此），否则为您的 API 开发客户端的开发人员不太可能知道他们的部分请求可能会被忽略。因此，他们很可能会对为什么资源不反映他们最后 PUT 的内容感到困惑。像这样浪费人们的时间不太可能让你的 API 流行起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:59:02.760

如果客户可以在没有额外价值的情况下重新提交，您应该使用[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)中的 409\. 回复：

> 10.4.10 409 冲突
> 
> 由于与资源的当前状态冲突，无法完成请求。仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。响应正文应该包含足够的信息让用户识别冲突的来源。理想情况下，响应实体将包含足够的信息供用户或用户代理解决问题；但是，这可能是不可能的，也不是必需的。
> 
> 响应 PUT 请求时最有可能发生冲突。例如，如果正在使用版本控制并且被 PUT 的实体包含对资源的更改，这些更改与早期（第三方）请求所做的更改相冲突，则服务器可能会使用 409 响应来指示它无法完成请求. 在这种情况下，响应实体可能会以响应 Content-Type 定义的格式包含两个版本之间差异的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-19T20:42:04.533

根据我的经验，您不应默默地忽略其他属性并将 PUT/POST 视为它们不存在。考虑使用模型中的可选属性调用 API 的消费者。如果 API 使用者在可选属性的名称中有拼写错误，则 API 将响应 200，并且与返回 400 相比，使用者将花费更多的时间进行调试。最令人沮丧的错误通常来自诸如“laed”而不是“lead”之类的无辜错字。

# jquery - jQuery Data Table 插件如何摆脱分页？

> ID：13692848
> 
> 赞同：2
> 
> 时间：2012-12-03T22:23:32.973
> 
> 标签：jquery, datatables

如何删除jQuery[数据表的](http://datatables.net/)**分页**和**显示**功能？我只想要它的搜索和排序功能，并想摆脱其他功能。有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T22:49:46.513

如果您使用没有 jQuery UI 主题，您可以这样做

```
$(document).ready( function() {
    $('#example').dataTable( {
      "sDom": 'frt' // only show search.. processing.. and table
    });
}); 
```

[http://live.datatables.net/iqewoh/2/edit#preview](http://live.datatables.net/iqewoh/2/edit#preview)

带有 jQ​​uery UI 主题

```
$(document).ready( function() {
    $('#example').dataTable( {
      "sDom": '<"H"f>rt' // only show search.. processing.. and table
    });
}); 
```

<"H"lfr>t<"F"ip> == 在页眉中放置`lfr`.. 表格 .. 然后在页脚中放置`ip`

> 允许以下选项：
> 
> 'l' - 长度变化
> 
> 'f' - 过滤输入
> 
> 't' - 桌子！
> 
> '我' - 信息
> 
> 'p' - 分页
> 
> 'r' - 处理
> 
> 允许使用以下常量：'H' - jQueryUI 主题“标题”类（'fg-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix'）
> 
> 'F' - jQueryUI 主题“页脚”类（'fg-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix'）
> 
> 应使用以下语法：'<' 和 '>' - div 元素
> 
> '<"class" 和 '>' - 带有类的 div
> 
> '<"#id" 和 '>' - 带有 ID 的 div
> 
> 默认值：lfrtip（当 bJQueryUI 为假时）或 <"H"lfr>t<"F"ip>（当 bJQueryUI 为真时）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-05T03:05:26.487

该`sDom`选项不专门控制分页。换句话说，即使指定了 sDom，也只会显示数据的第一“页”，尽管所有的分页控件都被隐藏了。

至少在 1.9x 版本的 DataTables 中，一个更好的方法是指定`bPaginate`选项。

```
$(element).dataTable({
    "bPaginate": false
}); 
```

这将防止分页并隐藏分页控件。

# php - 为什么我没有从中得到任何错误？

> ID：13692849
> 
> 赞同：2
> 
> 时间：2012-12-03T22:23:37.173
> 
> 标签：php, error-reporting

我有这段代码，由于某种原因，当我传入无效数据时，它不会给我任何错误。至少我希望得到错误的数据库或标准`'Access denied for user 'root@localhost'`。在我迁移到 PHP 5.4 之后，我遇到了很多这些神秘的不显示错误，这变得很麻烦。我在这里忽略了一些非常愚蠢的事情吗？任何帮助表示赞赏。

```
mysql_connect('localhost', 'wrong', 'wrong') or die(mysql_error());
mysql_select_db('wrong'); or die(mysql_error()); # <--- Somehow a semi-colon appeared inside this line and kept php/mysql from showing errors.

php.ini: display_errors = On, error_reporting = E_ALL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:26:18.553

行中的多余`;`部分，

```
mysql_select_db('wrong') or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:26:45.183

空白屏幕通常是解析错误

# css - css box阴影提升左下角

> ID：13692853
> 
> 赞同：0
> 
> 时间：2012-12-03T22:24:14.303
> 
> 标签：css

在过去的一个小时里，我一直在试图弄清楚如何使用盒子阴影来提升 div 的左角。这就是我想要完成的，第 3 号：http: [//www.paulund.co.uk/creating-different-css3-box-shadows-effects](http://www.paulund.co.uk/creating-different-css3-box-shadows-effects)。我知道有些帖子向您展示了如何做到这一点，但我已经尝试了所有方法，但似乎没有任何效果，这让我相信我的代码有问题。我将不胜感激找到我的错误的任何帮助，谢谢。

html

```
<img class='lazy image effect3' src='http://pearlsquirrel.com/images/lazyload.png' original-src='http://pearlsquirrel.com/profilethumbnails/$thumbnail' width='180' height='180' alt='PearlSquirrel'/> 
```

css

```
.image {
-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;
position:relative;
padding:2px;
background:#fcfcfc;
box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.2);
-o-box-shadow: 0px 0px 1px 1px  rgba(0,0,0,0.2);
-moz-box-shadow: 0px 0px 1px 1px  rgba(0,0,0,0.2);
}
.effect3
{
position: relative;
}
.effect3:before
{
z-index: -1;
position: absolute;
content: "";
bottom: 15px;
left: 10px;
width: 50%;
 top: 80%;
max-width:300px;
background: #777;
-webkit-box-shadow: 0 15px 10px #777;
-moz-box-shadow: 0 15px 10px #777;
 box-shadow: 0 15px 10px #777;
-webkit-transform: rotate(-3deg);
-moz-transform: rotate(-3deg);
-o-transform: rotate(-3deg);
-ms-transform: rotate(-3deg);
transform: rotate(-3deg);
 } 
```

这是我在这里的示例：`http://jsfiddle.net/j4naA/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:45:25.413

在这里，我尽力在[http://www.paulund.co.uk/creating-different-css3-box-shadows-effects](http://www.paulund.co.uk/creating-different-css3-box-shadows-effects)复制阴影。

jsFiddle：http: [//jsfiddle.net/j4naA/19/](http://jsfiddle.net/j4naA/19/)

html:

```
<div class="effect3" style="margin:20px;">
<img class="effect3" src="http://0777.ir/img/lndl.png"         
original-src="http://pearlsquirrel.com/profilethumbnails/$thumbnail" 
width="180" height="180" alt="PearlSquirrel"/>
</div>​ 
```

CSS：

```
 .effect3
{
  position: relative;
}
.effect3:before
{
  z-index: -1;
  position: absolute;
  content: "";
  bottom: 15px;
  left: 10px;
  width: 50%;
  top: 80%;
  max-width:155px;
  max-height:18px;
  background: #777;
  -webkit-box-shadow: 0 15px 10px #777;
  -moz-box-shadow: 0 15px 10px #777;
  box-shadow: 0 15px 10px #777;
  -webkit-transform: rotate(-4deg);
  -moz-transform: rotate(-4deg);
  -o-transform: rotate(-4deg);
  -ms-transform: rotate(-4deg);
  transform: rotate(-4deg);
}​ 
```

# c - 反转字符串列表顺序

> ID：13692854
> 
> 赞同：0
> 
> 时间：2012-12-03T22:24:25.310
> 
> 标签：c, string

我想颠倒字符串存储在数组中的顺序，以便最后一个成为新数组中的第一个。到目前为止，我正在获取数据并存储在第一个数组中，但我被困在那里。我只想颠倒字符串的顺序，而不是字符串本身。

示例输入：

```
here is a sample
line two of test 
```

输出：

```
line two of test
here is a sample 
```

到目前为止，我将输入存储在第一个数组中：

```
// Accept user input until hit EOF.
while (( c = getc(stdin) ) != EOF) {
    if(input != NULL) {
        int c = EOF;
        int i = 0;

        // Accept user input until hit EOF.
        while (( c = getc(stdin) ) != EOF) {
            input[i++] = (char)c;
            input[i++] = (char)c;

            // If reached maximize size, realloc size.
            if (c == '\n') {
                input[i]='\0';
            }

            if (i == current_size) {
                current_size = i + len_max;
                input = realloc(input, current_size);
            }
        }

        input[i] = '\0';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:38:53.763

假设您有一个数组`char *`并且您知道数组的长度：

在数组上循环，并将 position 处`i`的元素与 position处的元素交换`n - i - 1`，其中`n`是数组的长度。

对于`n`= 10，您得到：

```
i = 0, n - i - 1 = 9
i = 1, n - i - 1 = 8
i = 2, n - i - 1 = 7
i = 3, n - i - 1 = 6
i = 4, n - i - 1 = 5 
```

记住在到达时停止循环`n / 2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:28:09.330

尝试存储在链接列表中。颠倒顺序将是更好，更简单的方法。

# data-warehouse - 器官捐献的星图设计

> ID：13692855
> 
> 赞同：-1
> 
> 时间：2012-12-03T22:24:31.553
> 
> 标签：data-warehouse, star-schema

我需要一些帮助来启动用于跟踪器官捐赠者的新维度模型（星型模式）。我们有一个 OLTP 数据库，其中包含一个转诊表（死亡术语），其中包含（性别、种族、年龄、死亡日期）等信息和相关查找表，例如日期、时间、种族、医院、器官类型、捐赠器官信息等。一些推荐人成为器官捐赠者。我知道大多数查找表将成为维度表，但想知道我是否应该有 2 个事实表 - factReferralInfo 和 factOrganDonors 或只有 1 个事实表来跟踪所有内容。我们可能会有诸如“转诊总数”、“肾脏捐赠者总数”等查询。

经过考虑，我想我需要一个维度 dimReferral ，它具有每个死亡推荐的属性。我想我很困惑，因为我读到你不应该有一个与事实表相同范围的维度表。也许在事实表中，我对每个捐赠的器官都有一行，例如肾脏、胰腺、肺等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:18:50.577

听起来推荐人可以捐赠多个器官。这将是推荐和捐赠之间的一对多关系。正因为如此，我会说捐赠应该是你的事实表的颗粒，而推荐将是一个维度。以下粗略草图是我将如何开始处理它：

![作为事实表的捐赠粗略草图](../Images/f6850ec3b2adb6076d29d56776a531f1.png)

# objective-c - 从多对多关系中获取核心数据

> ID：13692861
> 
> 赞同：1
> 
> 时间：2012-12-03T22:24:50.263
> 
> 标签：objective-c, ios, core-data

我在编写将根据一对多关系的内容获取数据对象的获取请求时遇到问题。一张桌子用于照片，另一张用于标签。每张照片可以有多个标签，每个标签可以有多张照片。

所以，数据模型是：Photos <<-->> 标签。照片有一个称为“标题”的属性和一个称为“标签”的关系。Tag 有一个名为“label”的属性和一个名为“taggedPhotos”的关系。我为这两种对象类型创建了子类。（我正在学习斯坦福 CS193p 课程）。

我想要一个 Photo 实体的获取请求谓词，如果它们的“标签”关系包含给定的标签标签，它将选择照片对象。因此，如果我有一个名为“架构”的标签，我希望与任何以“架构”作为标签之一的照片进行匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T22:29:12.593

如果我理解你是正确的，我认为谓词应该是：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:
@"ANY tags.label LIKE %@", @"searchKey""]; 
```

并且确定这是对照片实体的请求。

这是[Apple NSPreciate 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)以获取更多信息

# jquery - Jquery获取所选对象的属性并将其应用于另一个对象

> ID：13692863
> 
> 赞同：0
> 
> 时间：2012-12-03T22:24:55.340
> 
> 标签：jquery

构建一个简单的图像滑块/画廊。我有一些简单的替换代码，没什么特别的。

```
<script>
$(".imgt").click(function(){
    var newsrc = (this).attr("src");
    $("#imgb").attr("src","newsrc");
});
</script> 
```

我不确定的是 var 和对 var 的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:25:44.907

这样做：

```
$(".imgt").click(function() {
    $("#imgb").prop("src", this.src);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:27:40.183

```
<script type="text/javascript">
$(".imgt").click(function(){
    var newsrc = $(this).attr("src");
    $("#imgb").attr("src", newsrc);
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:27:08.137

```
$("#imgb").attr("src","newsrc"); 
```

应该是

```
$("#imgb").attr("src",newsrc); 
```

**应该没有引号..**

```
Also missing the **$** before this var newsrc = (this).attr("src");
                                                ^
                                              Missing here 
```

如果可用，最好使用本机 DOM 对象。

```
$(".imgt").click(function(){
    var newsrc = this.src;
    $("#imgb").attr("src",newsrc);
}); 
```

# android - 删除查询是否修改了 Android 选择查询游标？

> ID：13692865
> 
> 赞同：3
> 
> 时间：2012-12-03T22:25:17.317
> 
> 标签：android, sqlite, android-sqlite

我正在尝试找到一种在删除某些行时通知依赖组件的方法，那么我可以发出选择查询，获取游标，然后发出删除还是会修改原始游标？有更好的方法吗？这就是我所指的：

```
Cursor c = builder.query(db, projection, selection, selectionArgs, groupBy, having, sortOrder);
db.delete(table, selection, selectionArgs);
while (cursor != null && cursor.moveToNext()) {
    final String name = cursor.getString(0);
    // send notifications
}
c.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:27:12.050

游标是与数据库分离的数据结构。也就是说，以任何方式修改数据库都不会影响您已经获取的游标。

**更新**

这似乎是错误的！.. 对不起！

有关详细信息，请参阅评论。感谢@Selvin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:50:25.747

如果您使用内容提供者来访问您的数据库，那么您可以使用专门为此目的设计的[ContentObservers ：](http://developer.android.com/reference/android/database/ContentObserver.html)

当您通过内容提供者检索数据时，您可以使用 URI 来执行此操作，并且您可以使用此 URI 通知 ContentObserver 光标已更改：

```
getContentResolver ().notifyChange (URI, null) 
```

有关更多信息，请参阅[javadocs`notifyChange(...)`](http://developer.android.com/reference/android/content/ContentResolver.html#notifyChange%28android.net.Uri,%20android.database.ContentObserver%29)：

恐怕如果您不使用内容提供者来访问您的数据，您将不得不为此编写自己的解决方案。

# c++ - 为什么我总是使用默认参数获取对象？

> ID：13692867
> 
> 赞同：0
> 
> 时间：2012-12-03T22:25:19.763
> 
> 标签：c++, constants

我有 2 个成员函数的问题，其中一个是 const 返回一个 const：

```
const BoardNode & Board::getBoardNode(unsigned int rowIdx, unsigned int colIdx) const
{
    return _mData[rowIdx*_mNumColumns + colIdx];
}

BoardNode & Board::getBoardNode(unsigned int rowIdx, unsigned int colIdx)
{
    return _mData[rowIdx*_mNumColumns + colIdx];
} 
```

过了一会儿，我使用了代码：

```
// where this is a Board holding Nodes in std::vector
BoardNode nodeToAddAsNeighbor   = this->getBoardNode(x1+ x, y1+ y); 
```

无论`y1`, `y`, `x`,的值是什么`x1`，我总是返回带有 coords 的节点`(0,0)`。

然而，节点的其他参数是不同的，只是坐标如上所述。

知道为什么吗？

**编辑** 我的复制构造器：

```
BoardNode::BoardNode(const BoardNode & other) :
    _mNodeType(other._mNodeType),
    _coordinates( other._coordinates ),
    _neighboursVector( other._neighboursVector) {} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T22:28:22.200

```
BoardNode nodeToAddAsNeighbor = ....; 
```

调用复制构造函数。定义了吗？它是如何定义的？也许它不像宣传的那样有效。例如

```
struct A
{
    int i;
    A(int i)    : i(i)  {}
    A(A const&) : i(42) {}
}; 
```

显然与

```
A a(7);
A b = a; 
```

您不能指望 bi 包含 7，而是它将包含 42

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:30:58.277

复制构造函数似乎有问题......似乎复制构造函数不能很好地工作。或者，也许您没有正确填写数据。尝试了解在复制构造函数和插入过程中发生了什么。在调试模式下尝试查看 _mData 中的内容。

啊，用下划线开始数据成员不是一个好主意，最好是 mData 或 m_data （写起来也更快），

# javascript - 使用 jQuery 加载下拉框

> ID：13692874
> 
> 赞同：0
> 
> 时间：2012-12-03T22:25:59.043
> 
> 标签：javascript, jquery, html

我正在尝试使用来自服务器的数据加载一个下拉框。

来自服务器的数据是这样的：`<select><option>...</option></select>`

我现在有这样的东西，但我不知道如何从服务器加载 html..？

```
$.getJSON("myurl", function(result) {
    //how do I load html from the server to the dropdown element

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:30:33.927

如果你的代码是完整的选择你可以使用它：

> $('#YourDestinationDiv').html(结果);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:31:24.160

$.getJSON() 将 dataType 设置为 JSON，您应该使用 $.ajax 设置 dataType: 'html' 。

像这样的东西：

```
$.ajax({
  url: 'myurl',
  dataType: 'html',
  success: function(selectMarkup) {
    $('#my_div_id').html(selectMarkup);
  }
}); 
```

什么是 dataType 属性？这是来自 jquery Docs 的描述：

数据类型 $.ajax() 函数依赖于服务器来提供有关检索数据的信息。如果服务器将返回数据报告为 XML，则可以使用普通的 XML 方法或 jQuery 的选择器来遍历结果。如果检测到另一种类型，例如上例中的 HTML，则将数据视为文本。

使用 dataType 选项可以实现不同的数据处理。除了纯 xml，dataType 还可以是 html、json、jsonp、script 或 text。

# iis - 具有 net.msmq 绑定的 wcf 服务未从本地队列中获取消息

> ID：13692879
> 
> 赞同：1
> 
> 时间：2012-12-03T22:26:17.423
> 
> 标签：iis, msmq

我有一个客户端应用程序将消息放入名为 MsmqService/MsmqService.svc 的私有队列中。

在 IIS 默认网站下，我添加了带有 net.msmq 绑定的 wcf 服务。

我确保队列设置为事务性

以下是客户端应用程序和 wcf 的相关配置部分。

```
<system.serviceModel>
    <bindings>
      <netMsmqBinding>
        <binding name="MsmqBindingNonTransactionalNoSecurity" exactlyOnce="false">
          <security mode="None"/>
        </binding>
        <binding name="MsmqBindingNonTransactionalTransportSecurity" exactlyOnce="false">
          <security mode="Transport"/>
        </binding>
        <binding name="MsmqBindingTransactionalTransportSecurity" exactlyOnce="true" receiveErrorHandling="Move">
          <security mode="Transport"/>
        </binding>
      </netMsmqBinding>
    </bindings>
    <services>
      <service name="MsmqService.MsmqService">
        <endpoint address="net.msmq://localhost/private/MsmqService/MsmqService.svc" binding="netMsmqBinding" 
                  bindingConfiguration="MsmqBindingTransactionalTransportSecurity" contract="MsmqContract.IMsmqContract"/>
      </service>
    </services>
  </system.serviceModel> 
```

我在默认网站的启用协议和 wcf 服务的启用协议下拥有 net.msmq

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:43:39.383

这可能是因为您使用 IIS 来托管服务。IIS 在不活动期间卸载工作进程，这意味着当消息到达时将没有进程可用于使用消息。

[最好](https://stackoverflow.com/q/1399280/569662)在 IIS 中托管。更好地托管在 Windows 服务中，更简单。

# c# - Win Form Webbrowser Control 内置拼写检查

> ID：13692883
> 
> 赞同：0
> 
> 时间：2012-12-03T22:26:21.030
> 
> 标签：c#, vb.net

我正在尝试为 Webbrowser 控件实现内置的拼写检查器。我使用 NHunspell 完成了拼写检查功能，但我无法实现告诉用户单词拼写错误的红色下划线（或其他功能）。我尝试了许多不同的途径来获得此功能。我什至尝试过 webkit.net 和 Gecko Webbrowsers，仍然没有。

我要做的就是在 Webbrowser 控件的文本字段中突出显示或下划线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:44:35.383

您需要从 DOM 中提取文本并规范化文本节点（因此`"he<span>ll</span>o"`变为`"hello"`），然后将其传递给您的拼写检查器。然后，您需要用一个`<span>`元素包围不正确的文本片段（以正确的方式，例如，您不能`<div>`用跨度包围 a，您需要设计一种考虑到这一点的算法）。

使用 CSS2，您唯一的选择是简单的实线、虚线或点红色下划线，或者使用定义为与底部边缘对齐的重复背景图像的波浪下划线。我相信 CSS3 让它变得更容易。

# sublimetext2 - Sublime Text 打开 *.handlebars.coffee 作为 HTML 文件

> ID：13692886
> 
> 赞同：4
> 
> 时间：2012-12-03T22:26:46.053
> 
> 标签：sublimetext2

我正在尝试将 Sublime Text 2 配置为默认使用 HTML 语法突出显示打开 *.handlebars.coffee 文件。我知道我可以更改所有 .coffee 文件的默认语法突出显示，但是有没有办法更改具有两个扩展名的文件的默认值？

我看过这个类似的帖子，但这并不能完全回答我的问题： [在 Sublime Text 2 中将默认语法设置为不同的文件类型](https://stackoverflow.com/questions/7574502/set-default-syntax-to-different-filetype-in-sublime-text-2)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T09:49:05.603

您可以将*handlebars.coffee*添加到 HTML.tmLanguage 中的 fileTypes 数组中。在我这样做之后，Sublime以 html 语法打开了一个示例*handlebars.coffee文件。*这是我的 HTML.tmLanguage 文件中的相关行：

```
<key>fileTypes</key>
<array>
    <string>handlebars.coffee</string>
    <string>html</string>
    <string>htm</string>
    etc.
</array> 
```

*您可以通过在首选项 > 浏览包...*下打开 HTML 文件夹来访问此文件。

 *确保将此文件的**新**版本保存在您的*用户*首选项文件夹中。这将通过更新保留它。*

# cakephp - cakePHP第一次保存数据（有很多关系）

> ID：13692887
> 
> 赞同：2
> 
> 时间：2012-12-03T22:26:47.927
> 
> 标签：cakephp

好吧，我正在尝试包含 hasMany 关系的第一个 saveAll （或 saveMany 或 saveAssociated 不确定哪个是“正确的”），我似乎无法弄清楚 cake 需要这些数据。我可以更新主表上的名称字段，但无法更新 hasMany 关系。

我只是在寻找正确的方向，我渴望学习，但是用我的头在墙上挖一个洞的想法看起来越来越诱人。

只是一点背景我有两个表一个“供应商”表和一个“vendor_payment_types”表。“vendors”表有很多“vendor_payment_types”。结构如下：

**供应商表** ID、公司 ID、名称

**vendor_payment_types** id、vendor_id、类型

目前我发送给控制器的数组是（如果支付类型有一个 id，这意味着它已经存在于数据库中并且不需要发生任何事情，如果没有 id 它需要添加，第三部分是如果它存在于数据库中但不在此数组中，需要从数据库中删除）：

```
Array
(
[0] => Array
    (
        [Vendor] => Array
            (
                [id] => 7
                [company_id] => 2
                [name] => Test Vendor
                [VendorPaymentTypes] => Array
                    (
                        [0] => Array
                            (
                                [vendor_id] => 7
                                [id] => 13
                                [type] => payable
                            )

                        [1] => Array
                            (
                                [vendor_id] => 7
                                [type] => check
                            )

                        [2] => Array
                            (
                                [vendor_id] => 7
                                [id] => 14
                                [type] => cash
                            )

                    )

            )

    ) 
```

我需要做的是 a) 更新名称 b) 添加任何新的 VendorTypes c) 删除任何不在 POST 数组中但存在于数据库中的 VendorTypes。以下是我在 VendorController 中的内容：

```
public function save() {
   $vendors = array();
    $companyid = $this->Auth->user('company_id');
    $needle = 'new';
    $i = 0;

    // Setup array and also if id of payment_type includes "new" unset the id so cake will add a new and not try and match id and update

    if ($this->request->is('post')) {
        foreach ($this->request->data['Vendor'] as $vendorId => $vendor) {
            $vendors[$vendorId]['Vendor']['id'] = $vendorId;
            $vendors[$vendorId]['Vendor']['company_id'] = $companyid;
            $vendors[$vendorId]['Vendor']['name'] = $vendor['name'];
            foreach ($vendor['VendorTypes'] as $type => $val) {
                if ($val != '0') {
                    $vendors[$vendorId]['Vendor']['VendorPaymentTypes'][$i]['vendor_id'] = $vendorId;
                    $vendors[$vendorId]['Vendor']['VendorPaymentTypes'][$i]['id'] = $val;
                    $vendors[$vendorId]['Vendor']['VendorPaymentTypes'][$i]['type'] = $type;

                    if (strstr($vendors[$vendorId]['Vendor']['VendorPaymentTypes'][$i]['id'], $needle)) {
                        unset($vendors[$vendorId]['Vendor']['VendorPaymentTypes'][$i]['id']);
                    }
                    $i++;
                }
            }
        }

        // Clean up array to make it an array starting at 0 and not based on vendor['id']

        $cleanedarr = array();
        foreach ($vendors as $vendor => $data) {
            $cleanedarr[] = $data;
        }

        // Currently this only updates the name

        if ($this->Vendor->saveAll($cleanedarr, array('deep' => TRUE) )) {
            $this->Session->setFlash('Updated Vendors!');
            die(pr($this->Vendor->getDataSource()->getLog()));
        } else {
            $this->Session->setFlash('Failed to Update');
        }
    }
} 
```

供应商模型设置为

```
public $name = 'Vendor';

public $hasMany = array(
    'VendorPaymentTypes' => array(
        'className' => 'VendorPaymentTypes',
        'foreignKey' => 'vendor_id',
        'dependent' => true
    )
); 
```

我什至还没有开始处理删除部分，因为我无法添加新的 vendor_types。在无数次“尝试”上度过了美好的一天，但都一无所获。

感谢您一百万次的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:43:36.440

关联的日期（供应商类型）不应该是供应商数据内部的数组，而是外部的数组。

```
array(
    'Vendor' => 
           array('name' => 'test', 'id' => 7),
    'VendorPaymentType => array(
         array('id' => 13, 'type' => 'payable'),
         array('type' => 'check')
    )
); 
```

所以 VendorPaymentType 不是 Vendor 数据的一部分。为了进一步混淆您，更深层次的关联应该是“父”数组的一部分。

还：

*   您不必在 VendorPaymentType 记录中重复 Vendor 的 id
*   您不应该使用模型名称 VendorPaymentType（单数）吗？
*   在您的代码中，您可以一次保存所有供应商。如果您在 foreach 循环中放置一个 saveAssociated 调用，您可以让自己更轻松。如果需要（并使用 InnoDB），您可以将其包装在事务中。
*   如果一次保存关联太难，您可以只保存供应商，然后保存对 de VendorPaymentType 的更改，如果需要创建新的。在一个循环中，可能在一个事务中。

希望这可以帮助。:-)

另见：[http ://book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html)

# valgrind - 抑制 Valgrind 中潜在的内存泄漏

> ID：13692890
> 
> 赞同：2
> 
> 时间：2012-12-03T22:27:08.327
> 
> 标签：valgrind

我从 Valgrind 获得以下日志：

```
MPK ==5263== 4 bytes in 1 blocks are still reachable in loss record 1 of 84
==5263==    at 0x402CE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==5263==    by 0x43D9F4B: ??? (in /lib/i386-linux-gnu/libcrypto.so.1.0.0)
==5263==    by 0x43DA5DB: CRYPTO_malloc (in /lib/i386-linux-gnu/libcrypto.so.1.0.0)
==5263==    by 0x44449A5: ??? (in /lib/i386-linux-gnu/libcrypto.so.1.0.0)
==5263==    by 0x44451EE: ENGINE_add (in /lib/i386-linux-gnu/libcrypto.so.1.0.0)
==5263==    by 0x444A776: ENGINE_load_dynamic (in /lib/i386-linux-gnu/libcrypto.so.1.0.0) 
```

我很确定我的代码或使用 libcrypto 的 libcurl 没有任何问题，因此我想禁止显示这些消息。

从[文档](http://valgrind.org/docs/manual/mc-manual.html#mc-manual.suppfiles)中我可以找到任何合适的抑制类型。

抑制文件中应该写什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T22:57:35.783

您可以通过使用 运行相同的命令来生成抑制块`--gen-suppressions=yes`。这是弄清楚如何使用 valgrind 抑制给定错误的最简单方法。让它告诉你你应该包括什么作为压制。

一旦 valgrind 生成了抑制，你可以把它放在一个文本文件中。

再次运行 valgrind 并使用`--suppressions=<filename>`参数指定抑制文件，中提琴您的错误/警告将消失。

# matlab - 使用错误。/矩阵尺寸必须一致

> ID：13692891
> 
> 赞同：3
> 
> 时间：2012-12-03T22:27:29.457
> 
> 标签：matlab

我正在尝试使用 t,x,l 变量绘制此代码...

我收到此错误“使用错误。/矩阵尺寸必须一致。

Uentitled5 中的错误（第 16 行）a=cos(Lambda1.*(x./L));"

```
t=1:0.5:300;
x=0:0.1:100;
L=0:0.3:100;
Bi=0.01;
A1=1.0017
Lambda1=0.0998
a=cos(Lambda1.*(x./L));
theta=(A1.*exp(-(Lambda1.^2).*t).*a);
for i=t
    plot(t,theta,'-') 
    for j=x
        plot (x,theta,'-','green')
    end
    for k=L
        plot (L,theta,'-','red')
    end
end
title('Dimensionless Temperature for Plane Wall  ')
xlim([0 2])
ylim([0 350])
xlabel('\Theta(0)')
ylabel('t(Time in Seconds)') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:59:30.620

您正在使用的三个向量`x`、`t`、 和`L`必须具有相同数量的元素。您可以通过更改您正在使用的步长手动修复此问题，即

```
x = 0:0.1:100;
L = 0:0.1:100;
t = 0:0.3:300; 
```

定义明确定义元素数量的向量的另一种方法是“linspace”。您可能会使用：

```
x = linspace(0, 100, 1001);
L = linspace(0, 100, 1001);
t = linspace(0, 300, 1001); 
```

这将为指定范围内的每个向量提供 1001 个点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:47:36.573

x 以 0.1 的增量
存储 0 到 100 L 以 0.3 的增量存储 0 到 100
因此，如果 x 具有元素 x = {x1 x2 x3} 和 L = {L1，则 L 中的元素数小于 x 中的元素数L2 L3}，那么 x./L 应该给出
ans = {x1/L1 x2/L2 x3/L3}。如果分子和分母数组中的元素个数不相同，那么matlab会报错

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:37:58.643

是的，那是因为 L 是 1x334 而 x 是 1x1001。要按元素划分元素，它们需要具有相同数量的元素。

# visual-studio-2010 - 通过 VS2010 中的 Prebuild 命令重置应用程序池

> ID：13692893
> 
> 赞同：3
> 
> 时间：2012-12-03T22:27:34.247
> 
> 标签：visual-studio-2010, iis-7, build, msbuild, msbuild-task

我正在寻找一种在运行构建时自动重置 IIS7 中的应用程序池的方法。目前，在将代码部署到测试服务器或 TeamCity 中的构建中断之前，我必须手动回收应用程序池。

经过一些研究，似乎预构建命令就是答案。我尝试按照类似 apppool recycle [question](https://stackoverflow.com/questions/8556139/recyling-apppool-using-msbuild-script)中的指南使用 MSBuild Extension Pack ，但无法成功实施。我下载了扩展包，并尝试在 .csproj 的两个元素中添加建议的任务：

```
 <PropertyGroup>
  <PreBuildEvent>
  </PreBuildEvent>
</PropertyGroup> 
```

和

```
<Target Name="BeforeBuild">
</Target> 
```

使用 MSBuild 扩展包或其他方法的任何帮助都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:27:55.917

尝试在构建过程的任何部分使用 Powershell？看看这些： [https](https://serverfault.com/questions/223496/recycle-remote-iis-app-pool-from-the-command-line) ://serverfault.com/questions/223496/recycle-remote-iis-app-pool-from-the-command-line 和： [http ://www.ilovesharepoint.com/2008/07 /recycle-iis-application-with-powershell.html](http://www.ilovesharepoint.com/2008/07/recycle-iis-application-with-powershell.html)

也请让我们知道更多细节，比如服务器操作系统和相关软件......

# ruby-on-rails - 如何将 ruby 字符串转换为 HTTP 地址？

> ID：13692896
> 
> 赞同：-2
> 
> 时间：2012-12-03T22:27:48.597
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以我有一个 HTTP 请求的字符串 URL

```
http://locahost:3000/stuff?owner=foo bar+type=video game 
```

我需要将此作为 HTTP 获取请求的一部分传递给另一个 ruby​​ 服务。我如何编码这个 URL，即去掉空格和特殊字符并提出正确的请求 URL？有没有宝石可以处理。我知道这可能可以通过某种正则表达式来完成，但我希望找到一个可以做到这一点的标准 gem。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:32:26.450

```
require 'uri'
uri_string = URI::encode("http://localhost:3000/stuff?owner=foo bar+type=video game") 
```

不确定如何搜索“ruby url encode”或解析等没有为您找到。

# java - Java 读取当前打开的文本文件以供写入

> ID：13692898
> 
> 赞同：0
> 
> 时间：2012-12-03T22:27:58.813
> 
> 标签：java, file, io

我想知道从当前打开以供写入的文件中读取的最佳方法是什么。

该程序处理读/写请求。

在程序中，PrintWriter 用于写入文件。

```
PrintWriter serverLog = new PrintWriter(new FileWriter("server"+processID+".log"));
serverLog.println("arbitrary text"); 
```

我有一个需要从文件中读取的函数。当我需要访问文件进行读取时，不会执行任何写入。

使用 Scanner 或 BufferedReader 方法进行读取似乎不起作用。我能想到的唯一选择是关闭 PrintWriter，读取文件，然后以“附加”模式重新打开 PrintWriter，但这似乎是一个非常糟糕的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:06:28.433

考虑 java.io.RandomAccessFile。此类可以从打开的文件中读取和写入。虽然读/写文本不是很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:01:22.077

我认为您不能同时执行两种模式（读取和写入）。

# java - android上复杂数学期间的Stackoverflow

> ID：13692901
> 
> 赞同：1
> 
> 时间：2012-12-03T22:28:13.807
> 
> 标签：java, android

我正在使用霍夫变换在 android 上的图像中查找圆圈。有一次我得到一个堆栈溢出：

```
12-03 16:18:20.999: I/dalvikvm-heap(21563): Grow heap (frag case) to 29.662MB for 2253716-byte allocation
12-03 16:18:21.014: I/dalvikvm(21563): threadid=11: stack overflow on call to Lorg/DTS/boltSizer/ImageProcessing/hystThresh;.hystConnect:VII
12-03 16:18:21.014: I/dalvikvm(21563):   method requires 44+20+12=76 bytes, fp is 0x5e949338 (56 left)
12-03 16:18:21.014: I/dalvikvm(21563):   expanding stack end (0x5e949300 to 0x5e949000) 
```

这是引发错误的地方：

```
 private void hystConnect(int x, int y) {

        int value = 0;
        for (int x1=x-1;x1<=x+1;x1++) {
            for (int y1=y-1;y1<=y+1;y1++) {
                if ((x1 < width) & (y1 < height) & (x1 >= 0) & (y1 >= 0) & (x1 != x) & (y1 != y)) {
                    value = (input[y1*width+x1])  & 0xff;
                    if (value != 255) {
                        if (value >= lower) {
                            input[y1*width+x1] = 0xffffffff;
                            hystConnect(x1, y1);
                            ran++;

                        } 
                        else {
                            input[y1*width+x1] = 0xff000000;
                        }
                    }
                }
            }
        }

    } 
```

我想我明白这意味着什么，但是如何避免这种情况。如果您需要更多正在运行的代码，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:34:10.543

从这个开始：

[如何增加 Java 堆栈大小？](https://stackoverflow.com/questions/3700459/how-to-increase-to-java-stack-size)

[Android：增加调用堆栈大小](https://stackoverflow.com/questions/8857602/android-increase-call-stack-size)

最终，这只是意味着您的函数正在消耗*大量*内存，您必须找到更有效的算法。这类似于如果您发布了一个`O(e^n)`函数并询问如何使其运行得更快。如果这是您的情况，那么您将需要研究一种更节省空间的算法来使用。

# java - GameLogic, x in a row game

> ID：13692902
> 
> 赞同：0
> 
> 时间：2012-12-03T22:28:14.923
> 
> 标签：java, arrays, loops, multidimensional-array

我正在制作一个游戏，我需要创建一个方法来检查指定的单元格是否是包含相同字符的水平连续单元格序列的一部分。单元序列的长度必须为 l。如果单元格是长度至少为 l 的水平序列的一部分，则为真，否则为假。

到目前为止，我可以检测到在指定字符的行中是否有至少 5 个具有相同字符的连续单元格。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:37:21.967

您可以使用两个循环（每侧一个）简单地搜索两侧并检查连续单元格的总和是否确实为`l`. 类似于以下内容：

```
public static boolean checkPositionRow(char[][] a, int row, int col, int l) {
    int counter = 1; //starting from 1, because for a[row][col] itself
    char charAtPosition = a[row][col];
   //expand to the right as much as possible
    for (int i = col+1; i < a[row].length && a[row][i] == charAtPosition; i++) counter++;
   //expand to the left as much as possible
    for (int i = col-1; i >= 0 && a[row][i] == charAtPosition; i--) counter++;
    return counter >= l;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:47:06.587

假设您要包含的列是 - `5`。并且序列的长度是`3`。

现在，以下是您的序列在该行中出现的可能性：-

*   `Col = (5 - 2) to 5`
*   `Col = 5 to (5 + 2)`
*   `(5 - 2), (5 + 2)`或者，范围 [ ]之间的任何位置

因此，您感兴趣的范围是： - `[col - length + 1, col + length - 1]`。在此范围内，每个长度序列都`3`将包括您的 column `5`。

因此，只需在这些范围之间运行循环。现在，问题将是当这些范围超出范围时。所以，你可以先做那个检查。

更好的方法是使用`Math.max(0, col-length+1)`, 和`Math.min(col + length-1, arraylength)`。

所以，你可以使用这个`for-loop`： -

```
public static boolean checkPositionRow(char[][] a, int row, int col, int l) {

  int counter = 0;
  int left = col - l + 1;
  int right = col + l - 1;
  char charAtPosition = a[row][col];

  for (int i = Math.max(0, left); i < Math.min(right, a[row].length); i++) {
        if (a[row][i] == charAtPosition) {
            counter++;
            if (counter >= l)
                return true;

        } else {
            counter = 0;
        }
  }
} 
```

# matlab-load - MATLAB - 使用字符串文件名加载数据文件

> ID：13692907
> 
> 赞同：1
> 
> 时间：2012-12-03T22:28:35.727
> 
> 标签：matlab-load

我正在编写一个 Matlab 程序，它加载在另一个 C++ 程序中创建的数据文件。

```
 planet = input('What is the name of your planet? ', 's')
    data_file = strcat(planet, '.dat')
    load(data_file);
    data_file;
    x = data_file(:,1);
    y = data_file(:,2);
    plot (x,y,'r*') 
```

该程序将行星名称作为用户输入，然后将“.dat”连接到行星名称的末尾。例如，这给出了“earth.dat”，它是由其他 C++ 程序创建的文件的名称。

我已确保正在加载的数据文件位于正确的文件夹中；但是，当我运行程序时，MATLAB 仍然会出错。

加载此文件的正确命令是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:54:30.480

尝试使用它：

```
planet = input('What is the name of your planet? ', 's')
filename=[num2str(planet) '.dat'];
data_file=load(filename);
x = data_file(:,1);
y = data_file(:,2);
plot (x,y,'r*') 
```

# sql - 分配结果的 SQL 排序

> ID：13692914
> 
> 赞同：2
> 
> 时间：2012-12-03T22:29:12.913
> 
> 标签：sql, ruby-on-rails, postgresql, analytic-functions

给定这样的产品表：

```
ID Name     Seller ID  Updated at
-- ----     ---------  ----------
1  First      3         2012-01-01 12:00:10
2  Second     3         2012-01-01 12:00:09
3  Third      4         2012-01-01 12:00:08
4  Fourth     4         2012-01-01 12:00:07
5  Fifth      5         2012-01-01 12:00:06 
```

我想构造一个查询来对产品进行排序，如下所示：

```
ID
---
1
3
5
2
4 
```

换句话说，查询应该显示最近更新的产品，由卖家分发，以尽量减少来自同一卖家的连续产品序列的可能性。

关于如何最好地做到这一点的任何想法？（请注意，此应用程序的代码是 Ruby，但如果可能的话，我想在纯 SQL 中执行此操作）。

编辑：

请注意，查询也应该处理这种情况：

```
ID Name     Seller ID  Updated at
-- ----     ---------  ----------
1  First      3         2012-01-01 12:00:06
2  Second     3         2012-01-01 12:00:07
3  Third      4         2012-01-01 12:00:08
4  Fourth     4         2012-01-01 12:00:09
5  Fifth      5         2012-01-01 12:00:10 
```

产生以下结果：

```
ID
---
5
4
2
3
1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:52:56.600

[此 sqlfiddle](http://sqlfiddle.com/#!12/560d6/5)中演示的一个选项是

```
select subq.*
  from (
    select rank() over (partition by seller_id order by updated_at desc) rnk,
           p.*
      from products p) subq
 order by rnk, updated_at desc; 
```

# windows - 无法将用户输入值回显到批处理脚本中的文件

> ID：13692916
> 
> 赞同：1
> 
> 时间：2012-12-03T22:29:18.957
> 
> 标签：windows, cmd, batch-file

我正在编写一个批处理文件，它将根据多个用户输入值生成/写入属性文件。但是，它没有记录输入的值。结果看起来像

```
prop1=
prop2= 
```

我想知道是否有一些我需要知道的东西阻止它工作。

奇怪的是，如果我多次运行这个特定的脚本，从 echo 输出的值似乎总是上次的用户输入。

**代码：**

```
@echo off

IF NOT EXIST data_file (
set /p prop1=Enter value: 
set /p prop2=Enter value: 
(echo prop1=%prop1%) > data_file 
(echo prop2=%prop2%) >> data_file 
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:52:53.717

没有经验的批处理人员的经典问题:)

`%prop1%`解析行时展开。您的问题是括号内的所有内容都是一次性解析的。所以你看到的值就是你输入 IF 语句之前存在的值。

你有两个简单的解决方案。

1）通过反转逻辑并使用 GOTO 来消除封闭的括号

```
@echo off
IF EXIST file goto skip
set /p prop1=Enter value: 
set /p prop2=Enter value: 
(echo prop1=%prop1%) >file 
(echo prop2=%prop2%) >>file 
:skip 
```

2) 使用延迟扩展——这发生在括号内的每一行执行之前

```
@echo off
setlocal enableDelayedExpansion
IF NOT EXIST file (
  set /p prop1=Enter value: 
  set /p prop2=Enter value: 
  (echo prop1=!prop1!)>file
  (echo prop2=!prop2!)>>file
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:31:04.810

您需要使用 SETLOCAL ENABLEDELAYEDEXPANSION 或使用 CALL 扩展变量。

```
@echo off

IF NOT EXIST data_file (
    set /p prop1=Enter value: 
    set /p prop2=Enter value:

    (
    Call echo prop1=%%prop1%%
    Call echo prop2=%%prop2%%
    ) > data_file 

) 
```

# java - 从签名的 APK 或 JAR 中提取原始 X.509 证书

> ID：13692917
> 
> 赞同：12
> 
> 时间：2012-12-03T22:29:29.853
> 
> 标签：java, android, keystore, jar-signing, jarsigner

我有一个用于签署各种 jar 的公钥的 MD5 哈希库，以及到它们各自的密钥库的映射，我们使用这些密钥库来签署不同的 APK。我想做的是确定哪个密钥库用于签署 APK，但不使用反复试验。（此外，遗憾的是，我们的许多密钥共享相似或相同的 DN。）

我的解决方案，因为我知道 META-INF/FOO.RSA（或 FOO.DSA）包含证书，是从 APK 的 RSA 文件中提取证书并直接计算 MD5 哈希。（我知道证书在那里，因为它可以被正在运行的 android 应用程序访问，并且 jarsigner 文档告诉我它在那里。）

但我找不到任何工具可以为我提供证书的实际字节。当我使用 时，我可以获得 DN 和证书元数据`jarsigner -verbose -verify -certs my.apk`，但这并没有给我字节。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-22T17:50:33.433

提取 JAR，然后使用“openssl”输出证书：

因此，假设 'foo.jar' 在您的当前目录中，请执行以下操作：

```
mkdir temp
cd temp
jar -xvf ../foo.jar
cd META-INF
openssl pkcs7 -in FOO.RSA -print_certs -inform DER -out foo.cer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:18:02.397

Hexdump FOO.RSA。最后 n 个字节是签名本身，其中 n 取决于密钥长度（例如，1024 位 RSA）。如果您使用相同的密钥签署两次，您可以比较 .RSA 文件并看到只有最后 n 个字节发生变化；文件的静态部分是证书，更改的位是 FOO.sf 哈希上的签名。您还必须删除证书和签名之间的分隔符。

# angularjs - 带有数组的Angularjs ngOption

> ID：13692921
> 
> 赞同：20
> 
> 时间：2012-12-03T22:29:46.813
> 
> 标签：angularjs, html-select

我想添加一个带有选项 AM、PM 和 angularjs 的 html 选择，我需要的是使选项的键和值相同：

```
<option value="AM">AM</option>
<option value="PM">PM</option> 
```

我的 html 看起来像这样

```
<select ng-model="ampm" ng-options="k as v for (k , v) in ampms"></select> 
```

我的控制器看起来像

```
 $scope.ampm = (new Date().getHours()) >= 12 ? 'PM' : 'AM';
  $scope.ampms ={"AM":"AM","PM":"PM"}; 
```

一切正常。

我的问题是为什么当我使用数组（我尝试了 ng-options 中的所有选项）时我不能拥有相同的东西

```
$scope.ampms =["AM","PM"]; 
```

我做什么我总是得到这个

```
<option value="0">AM</option>
<option value="1">PM</option> 
```

我想要的是使用像上面这样的数组，该选项具有相同的键和值。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-04T00:04:03.107

使用 AngularJS，您无需担心选项的值是什么。我见过的所有选择的`ng-options`值都是 0 到任何值。如果您只是在寻找带有两个选项的下拉菜单，它可以很简单

```
<select ng-model="ampm" ng-options="currOption for currOption in ['AM', 'PM']"></select> 
```

见[http://jsfiddle.net/EyBVN/1/](http://jsfiddle.net/EyBVN/1/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T00:15:30.583

这是 Angular 中 ng-options 的默认行为。如果不指定键名，Angular 会自动选择使用索引而不是键。执行此操作的代码可以[在 Angular 的 Github 存储库的 /src/ng/directives/select.js 中的第 405 行](https://github.com/angular/angular.js/blob/master/src/ng/directive/select.js#L405)看到。

它甚至不能被“值作为值中（索引，值）的值”强制。

但是由于 dnc253 只是用他的答案击败了我（它在我打字时出现了）......你不必担心它，Angular 会自动为你做这一切。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-17T01:19:54.693

我确实找到了一种将特定数据放在选择选项值中的方法。您必须在 select 标签内的 option 标签中添加一个 ng-repeat 属性：

```
<select id="{{question.id}}" name="{{question.id}}" 
    class="{{question.inputclass}}" ng-required="question.required" 
    title="{{question.title}}">
  <option value=""></option>
  <optgroup ng-repeat="group in question.data" label="{{group.group}}">
    <option ng-repeat="item in group.data" value="{{item.value}}" 
        ng-selected="{{item.value == question.defaultValue}}">
          {{item.description}}
    </option>
  </optgroup>
</select> 
```

作为奖励，我保留了选项组标签以作为每个人的示例。

是`question.data` `JSON`：

```
[
  {"group":"Canada","data":[{"value":"Ontario","description":"Toronto"},
                            {"value":"Quebec","description":"Quebec City"},
                            {"value":"Manitoba","description":"Winnipeg"}
                           ]
  },
  {"group":"Mexico","data":[{"value":"Jalisco","description":"Guadalajara"},
                            {"value":"Nayarit","description":"Tepic"}
                           ]
  },
  {"group":"United States of America","data":[
                            {"value":"Alabama","description":"Montgomery"},
                            {"value":"Georgia","description":"Atlanta"},
                            {"value":"Mississippi","description":"Jackson"},
                            {"value":"Louisiana","description":"Baton Rouge"},
                            {"value":"Texas","description":"Ausint"}
                           ]
  }
] 
```

# install4j - 我可以将完整的 jdk 与我的 install4j 安装捆绑在一起吗？

> ID：13692922
> 
> 赞同：3
> 
> 时间：2012-12-03T22:29:53.037
> 
> 标签：install4j

作为安装过程的一部分，我的应用程序需要进行一些编译（我知道这是不好的形式，但确实如此）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:16:04.250

对于编译，我只需将 JDK 中的 lib/tools.jar 添加到分发树并将其添加到启动器的类路径中。然后您可以以编程方式编译类。

一个更轻量级的解决方案是使用[janino](http://docs.codehaus.org/display/JANINO/Home)。

# javascript - jQuery找到最接近div的图像src

> ID：13692923
> 
> 赞同：5
> 
> 时间：2012-12-03T22:29:54.037
> 
> 标签：javascript, jquery, html

如果我有以下 html：

```
<div class="showPin">
    <div class="pinIt" style="display: none;">
        <a href="#" onclick="window.open(&quot;http://pinterest.com/pin/create/button/?url=http://mysite.com/some-post&amp;description=Some Description&amp;media=http://mysite.com/path/to/myimage.jpg&quot;,&quot;Pinterest&quot;,&quot;scrollbars=no,menubar=no,width=600,height=380,resizable=yes,toolbar=no,location=no,status=no&quot;);return false;"><img src="images/pinbutton.jpg" class="pinbuttonImg"></a>
    </div>
    <a href="myimage.jpg">
        <img class="lazy data-lazy-ready" src="myimage.jpg" data-lazy-type="image" data-lazy-src="http://dev.papermusepress.com/stageblog/wp-content/uploads/2012/11/Fall_baby_shower_mantle2.jpg" alt="Fall Baby Shower Mantle" width="700" height="393" style="display: inline;">
    </a>
</div> 
```

我怎样才能让我的警报功能工作，所以它会提醒 img src 是实际被固定的图像，它`class="lazy"`总是在其中。

```
$('div.pinIt').click(function() {
    var url = $(this).closest('img.lazy').attr('src');      
    alert(url);
}); 
```

它提醒我的只是`undefined`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T22:31:21.247

```
$('div.pinIt').click(function() {
    var url = $(this).next('a').find('img.lazy').attr('src');      
    alert(url);
}); 
```

最近`traverses thru the ancestors`的 . 但是图像`sibling(anchor tag)`在**div**的内部。所以试试这个方法。。

如果你想使用`.closest()`那么这应该工作..

```
$('div.pinIt').click(function() {
        var url = $(this).closest('.showPin').find('img.lazy').attr('src');      
        alert(url);
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T22:30:56.627

最简单的方法之一是到 parent 并在里面搜索 image 元素：

```
$("div.pinIt").click(function() {
    var url = $(this).closest("div.showPin").find("img.lazy").attr("src");
    alert(url);
}); 
```

# menu - MODX revo Wayfinder 不显示

> ID：13692925
> 
> 赞同：0
> 
> 时间：2012-12-03T22:30:02.250
> 
> 标签：menu, header, modx

我正在与 Wayfinder 合作，对其进行测试以查看它是如何工作的，但由于某种原因，它不起作用，我的意思是我将代码放在它应该在的地方并且它根本不输出任何东西，我得到了我的标题上的空白菜单部分。

我一直在学习本指南[http://codingpad.maryspad.com/2011/02/21/modx-revolution-for-complete-beginners-part-8-using-wayfinder-to-create-menus/](http://codingpad.maryspad.com/2011/02/21/modx-revolution-for-complete-beginners-part-8-using-wayfinder-to-create-menus/)

我已按照此动手视频中的说明进行操作[https://www.youtube.com/watch?v=eabBx-KUHjk](https://www.youtube.com/watch?v=eabBx-KUHjk)

以及 wiki 上的文档。

我把它放在标题上以测试菜单的加载方式，但什么也没发生。

```
<!-- BEGIN NAVIGATION -->
<nav>
[[!Wayfinder? &startid='0']]
</nav>
<!-- END NAVIGATION --> 
```

输出什么都没有。“从菜单中隐藏”选项未选中，所以我对为什么没有发生任何事情一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:03:36.990

我让它工作。它似乎区分大小写， &startid 应该是 &startId

```
[[!Wayfinder? &startId='0']] 
```

虽然我认为如果我在同一棵树下有更多项目并且我使用 &startid （小写）它会列出除根文档之外的所有内容，但如果我将它与大写“I”一起使用，那么它会列出从根开始的所有内容。

无论如何，它现在正在工作。

# c++ - fscanf 的包装功能不起作用

> ID：13692926
> 
> 赞同：1
> 
> 时间：2012-12-03T22:30:05.577
> 
> 标签：c++, scanf, variadic-functions

我尝试围绕 fscanf 创建一个包装函数，但不明白为什么它不起作用，

```
char name[255] = {0};
fscanf(inFile, "%s", &name);   // This work fine 
```

但是当我这样做时

```
int WrapFScanF(File* inFile, const char* format, ...) {

    int rv;
va_list args;

va_start(args, fmt);
rv = fscanf(file, fmt, args);
va_end(args);

return rv;
}

char name[255] = {0};
WrapFScanF(inFile, "%s", &name);   // This work fine 
```

它没有用。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:35:13.683

你真的很想读一读[`vfscanf()`](http://linux.die.net/man/3/vfscanf)。使用它而不是`fscanf()`当你有一个`va_list`as`va_list`不能那样使用时。

# jquery - jQuery UI CSS 样式未应用于使用 getJSON 生成的菜单栏

> ID：13692927
> 
> 赞同：2
> 
> 时间：2012-12-03T22:30:05.550
> 
> 标签：jquery, css, json, jquery-ui

我正在尝试使用 JSON 数据生成一个 jQueryUI 菜单栏。JSON 被正确解析为有效的 HTML；但是，菜单栏显示为无样式的无序列表，而不是像在[http://view.jqueryui.com/menubar/demos/menubar/default.html](http://view.jqueryui.com/menubar/demos/menubar/default.html)上看到的顶部那样的样式菜单栏。请注意，此时将 JSON 数据转换为 HTML 的例程不会超过一级菜单，因此有意不读取子菜单选项（打开、保存、关闭等）。

出于某种原因，如果我硬编码与下面的 jQuery 方法生成的 HTML 完全相同的 HTML `menuBar.jsp`，则菜单栏样式显示得很好。

这是主页（`appFrameNew.jsp`）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>    

<title>Menu Test</title>

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" />
    <link rel="stylesheet" href="http://view.jqueryui.com/menubar/themes/base/jquery.ui.menu.css" />
    <link rel="stylesheet" href="http://view.jqueryui.com/menubar/themes/base/jquery.ui.menubar.css" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>    
    <script src="http://view.jqueryui.com/menubar/ui/jquery.ui.core.js" type="text/javascript"></script>
    <script src="http://view.jqueryui.com/menubar/ui/jquery.ui.widget.js" type="text/javascript"></script>
    <script src="http://view.jqueryui.com/menubar/ui/jquery.ui.menu.js" type="text/javascript"></script>
    <script src="http://view.jqueryui.com/menubar/ui/jquery.ui.menubar.js" type="text/javascript"></script>
    <script src="http://view.jqueryui.com/menubar/ui/jquery.ui.position.js" type="text/javascript"></script>

    </head>
    <body>

    <div id="layout" class="layout">

       <jsp:include page="menuBar.jsp" flush="true" />

    </div>

    </body>
    </html> 
```

这里是`menuBar.jsp`：

```
<div class="demo"></div>

<script type="text/javascript">
    function select(event, ui) {
        if (ui.item.text() == 'Quit') {
            $(this).menubar('destroy');
        }
    }
    $(function() {
        $("#bar1").menubar({
            position: {
                within: $(".demo").add(window).first()
            },
            select: select
        });
    });

$.getJSON('menuBarTestJSON.json', function(data) {
    var output='<ul id="bar1" class="menubar">';
    for (var i in data.menuOptions) {
        output+='<li><a href="#">' + data.menuOptions[i].menubarItem + '</a></li>';
    }
    output+="</ul>";
    $(".demo").html(output);
});

</script>

<ul id="bar1" class="menubar">
    <li>
        <a href="#File">File</a>
        <ul>
            <li><a href="#Open">Open</a>
            <li><a href="#Save">Save</a></li>
        </ul>
    </li>
</ul> 
```

最后，`menuBarTestJSON.json`：

```
{"menuOptions":[
    {
        "menubarItem":"File",
        "menuElement": {
            "option":"Open",
            "option":"Save",
            "option":"Close",
            "option":"Quit"
        }
    }
]} 
```

几天来，我一直在网上搜索解决方案是徒劳的，需要尽快继续这个项目。非常感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:12:41.963

您需要：

1.  将初始化 jQuery UI 菜单的代码添加到 getJSON 回调或
2.  使用[http://api.jquery.com/live/](http://api.jquery.com/live/)观察 DOM 的变化并初始化 jQuery UI 菜单

基本上发生的事情是 $("#bar1").menubar 启动一次，准备就绪。但是当你更新它的内容时，它不知道它需要再次启动。您必须手动要求它再次初始化菜单，或者让它监视更改。

例子：

```
<script type="text/javascript">
    function select(event, ui) {
        if (ui.item.text() == 'Quit') {
            $(this).menubar('destroy');
        }
    }
    function initMenu() {
        $("#bar1").menubar({
            position: {
                within: $(".demo").add(window).first()
            },
            select: select
        });
    }
    $(function() { initMenu(); });

   $.getJSON('menuBarTestJSON.json', function(data) {
       var output='<ul id="bar1" class="menubar">';
       for (var i in data.menuOptions) {
            output+='<li><a href="#">' + data.menuOptions[i].menubarItem + '</a></li>';
       }
       output+="</ul>";
       $(".demo").html(output);
       initMenu();
   });

</script> 
```

# java - AsyncTask 的 TCP/IP 连接问题

> ID：13692928
> 
> 赞同：-3
> 
> 时间：2012-12-03T22:30:15.643
> 
> 标签：java, android, tcp, android-asynctask, telnet

> **可能重复：**
> [使用套接字和 AsyncTask 强制关闭](https://stackoverflow.com/questions/13685850/force-close-using-sockets-and-asynctask)

嗨，堆栈的人们....

请帮帮我，我正在失去理智。

请看代码和logcat.....

基本上代码正在做的是：

1.  从意图中获取 IP 地址。
2.  使用 32 端口连接到 IP
3.  然后发送一个命令，等待响应并发送另一个命令。
4.  在我们发送 2 个命令后，我应该得到“SNX_COM>”的响应
5.  建立连接后，我希望连接保持打开状态，以便在单击按钮时发送特定命令。

^^这基本上是我的代码应该实现的^^

Java 类

```
package com.smarte.smartipcontrol;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;

public class IPControl extends Activity {

private Socket socket;
private String serverIpAddress = "com.smarte.smartipcontrol.ACTU_IP";
private static final int REDIRECTED_SERVERPORT = 32;
public PrintWriter out;
public BufferedReader in;
public String data;
public Object pd;

public void getModel(View view) {
    try {
        out.println("[m\r\n");
        //System.out.print("root\r\n");
        while(!in.ready());
        String textStatus = readBuffer();

    } catch(IOException e) {}
}

@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);

   setContentView(R.layout.act_ipcontrol);

   try{   

    new AsyncAction().execute();

   }catch (Exception e) {
       e.printStackTrace();
   }

   }

private class AsyncAction extends AsyncTask<String, Void, String> {
   protected String doInBackground(String... args) { 
   try {
 InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
 socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
} catch (UnknownHostException e1) {
 e1.printStackTrace();
} catch (IOException e1) {
 e1.printStackTrace();
}
try {
 out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true); in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
 while (! in .ready());
 readBuffer();
 out.println("root\r\n");
 //System.out.print("root\r\n");
 while (! in .ready());
 readBuffer();
 out.println("root\r\n");
 //System.out.print("root\r\n");
 while (! in .ready());
 String msg = "";

while ( in .ready()) {
 msg = msg + (char) in .read();
}
} catch (IOException e) {}

       return null;//returns what you want to pass to the onPostExecute()
   }

   protected void onPostExecute(String result) {

   //results the data returned from doInbackground

       IPControl.this.data = result;

       }
   }

private String readBuffer() throws IOException {
    String msg = "";

    while(in.ready()) {
        msg = msg + (char)in.read();
    }
    //System.out.print(msg);
    if(msg.indexOf("SNX_COM> ") != -1) return msg.substring(0, msg.indexOf("SNX_COM> "));
    else return msg;
}

} 
```

日志猫....

```
12-03 21:56:43.670: E/AndroidRuntime(1231): FATAL EXCEPTION: AsyncTask #1
12-03 21:56:43.670: E/AndroidRuntime(1231): java.lang.RuntimeException: An error occured while executing doInBackground()
12-03 21:56:43.670: E/AndroidRuntime(1231):     at  android.os.AsyncTask$3.done(AsyncTask.java:299)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at java.lang.Thread.run(Thread.java:856)
12-03 21:56:43.670: E/AndroidRuntime(1231): Caused by: java.lang.NullPointerException
12-03 21:56:43.670: E/AndroidRuntime(1231):     at com.smarte.smartipcontrol.IPControl$AsyncAction.doInBackground(IPControl.java:71)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at com.smarte.smartipcontrol.IPControl$AsyncAction.doInBackground(IPControl.java:1)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-03 21:56:43.670: E/AndroidRuntime(1231):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-03 21:56:43.670: E/AndroidRuntime(1231):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:49:37.513

当您吞下异常时会发生这种情况......您在其中一行有一个 NPE（不能说是哪一个，因为您将两者都粘贴在同一行 71）：

```
out = new PrintWriter(new BufferedWriter(
    new OutputStreamWriter(socket.getOutputStream())), true);
in = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
```

`socket`是`IPControl`（就像`in`and `out`）的一个实例变量，这意味着如果由于某种原因无法建立连接，程序只会打印堆栈跟踪并继续：

```
try {
    InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
    socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
} catch (UnknownHostException e) {
    e.printStackTrace();
}
// next of the code 
```

如果您仔细检查您的控制台（或者可能是 Eclipse 控制台），您会发现究竟发生了什么，因此您可以做些什么来解决实际问题。

但是，您确实应该将所有代码放在第一个`try`块中，因为如果无法建立连接，继续进行没有任何意义。

此外，`socket`和`in`不`out`应该是实例变量——我们不能提供进一步的建议，因为你没有提供上下文——但是，由于这些在 Activity 的其余代码中没有重用，你可以自由地将它们设为局部变量。`close()`最后，完成后对所有事情都是一个好习惯（这是不使用实例变量的另一个原因）。

# android - Android MediaRecorder 设置音量

> ID：13692930
> 
> 赞同：3
> 
> 时间：2012-12-03T22:30:29.467
> 
> 标签：android, audio, sdk, volume, mediarecorder

我对 android 编程不太熟悉，想在使用`MediaRecorder`. 有没有办法做到这一点？或者有没有更好的方法来录制可变音量的视频，而不是使用`MediaRecorder`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:38:30.617

使用录音时无法设置音量`MediaRecorder`。但是您可以`MediaPlayer`使用该方法在播放时设置音量`setVolume(float, float)`

# unicode - 在 MFC 静态文本中显示 Unicode 字符

> ID：13692932
> 
> 赞同：2
> 
> 时间：2012-12-03T22:30:45.047
> 
> 标签：unicode, mfc

我正在尝试让 MFC 静态文本控件显示~~ASCII~~Unicode 字符，特别是 Omega ( `&#937`)。当我只使用`&`不显示而其余文本显示时。但是，如果我将控件的“无前缀”属性设置为 True，那么它会删除它`&`之后的所有内容。

这可以通过项目设置来完成还是我只是输入了错误的字符串？

这是我用于字符串的内容：`VDC Resistance (k&#937)`→ 我想`&#937`成为欧米茄符号的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:58:20.250

首先`&#937`不是 ASCII 字符，而是 Unicode 字符：[GREEK CAPITAL LETTER OMEGA](http://www.fileformat.info/info/unicode/char/3a9/index.htm)。

`&#937`是 omega 的 Html 转义序列，因此静态文本控件不会翻译 Html 转义序列。如果您在 C/C++ 源代码中输入文本，请使用 C 转义序列`L"\u03A9"`。（十六进制的 3A9 等于十进制的 937）。这假设您在 ANSI 中构建 Unicode 应用程序，它不会工作。我不确定在这种情况下你会怎么做。

# javascript - chrome扩展和javascript提交表单

> ID：13692936
> 
> 赞同：2
> 
> 时间：2012-12-03T22:30:59.913
> 
> 标签：javascript, forms, google-chrome, google-chrome-extension

我最近开始学习 chrome ext。我遇到了这个问题。基本上我只是想将一个字符串转换为相应的数字。例如 a=1、b=2、c=3... 等等。因此，如果我尝试使用 html 表单来获取输入字符串，然后在提交按钮上使用 onclick，我希望我的 javascript 文件将字符串转换为数字并在同一个输入文本框中打印出值。

这是我当前的代码，如果我使用提示符获取输入，它工作正常。我的问题是如何调用 onclick，因为清单版本 2 限制了内联 js。

显现

```
{
  "name": "String converter",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Convert string to number",
  "browser_action": {
    "default_icon": "icon.ico",
    "default_popup": "popup.html"
  }

} 
```

弹出.html：

```
<!doctype html>
<html>
<head>
 <title>Convert string</title>
    <style>
     body {
        min-width:160px;
        overflow-x:hidden;
      } 
    </style>
    <script src="popup.js"></script>
</head>
<body>
    <input type="text" id="result" />
    <!--I need the button here-->
</body>
</html> 
```

popup.js（我只是从教程中复制并粘贴并修改它）

```
var req = new XMLHttpRequest();
req.open(
    "GET",
    "http://api.flickr.com/services/rest/?" +
        "method=flickr.photos.search&" +
        "api_key=90485e931f687a9b9c2a66bf58a3861a&" +
        "text=hello%20world&" +
        "safe_search=1&" +  // 1 is "safe"
        "content_type=1&" +  // 1 is "photos only"
        "sort=relevance&" +  // another good one is "interestingness-desc"
        "per_page=20",
    true);
req.onload = test;
req.send(null);

function test(){
    var s=prompt("enter string");
    var result ="";
    for(var i =0; i<3; i++){
        if(s.charAt(i) == "a"){
            result += "1"
        }
        else if(s.charAt(i) == "b"){
            result += "2"
        }
        else if(s.charAt(i) == "c"){
            result += "3"
        }

    document.getElementById("result").value = result;

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T11:46:57.613

将此按钮代码放置在您想要按钮的位置：

```
<button id='sbmt'>Submit</button> 
```

并`popup.js`添加这些行来监听上面按钮的点击事件。

```
function myAlert(){
 alert('Button Clicked');
}
document.addEventListener('DOMContentLoaded', function () {
document.getElementById('sbmt').addEventListener('click', myAlert);
}); 
```

# android - 隐藏配对的蓝牙设备

> ID：13692937
> 
> 赞同：2
> 
> 时间：2012-12-03T22:31:00.307
> 
> 标签：android, bluetooth

我正在创建一个与蓝牙模块交互的 Android 应用程序。 **有没有办法隐藏配对设备以防止它显示在配对设备列表中？**这样做的原因是，如果我有 20 台设备只会与我的应用程序交互，那么它们显示在配对设备列表中并没有多大意义。

# ruby - 了解简单 Sinatra 应用程序中的 ruby 多线程

> ID：13692938
> 
> 赞同：2
> 
> 时间：2012-12-03T22:31:03.053
> 
> 标签：ruby, multithreading, sinatra, jruby

从 MRI 与 JRuby 的角度来看，我正试图围绕多线程进行思考。我已经完成了简单的 sinatra 应用程序：

```
require 'sinatra'

get '/long' do
  sleep(10)
  "Long operation finished"
end

get '/other' do
  "Time now is #{Time.now}"
end 
```

通过我在 ruby​​ 1.9.3 上运行它，`ruby app.rb`我期望当`/long`被调用时我将无法完成任何其他请求。但事实证明，`/other`即使在`/long`等待完成时，我也可以在不同的浏览器中调用。

我被困在这里。我认为这应该适用于 JRuby（当应用程序在特立尼达上运行时），但不适用于 MRI。我想我必须生成几个实例才能让它以这种方式工作。

有人可以解释我哪里错了吗？为什么即使长时间运行一个阻塞，我仍然可以得到其他请求的响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:39:56.477

MRI 中有一个全局解释器锁，可防止两个线程一起运行。在您的示例中，您的长线程正在休眠（什么都不做），因此 MRI 可以挂起它并运行另一个线程。如果两个线程都占用了 100% 的 cpu 时间，那么您会期望其中一个线程等待另一个线程。如果您有 JRuby，那么您将让每个线程从每个核心占用 100% 的 CPU 时间（假设您有多核处理器），因此您的线程不会减慢速度。

以下文章应深入回答您的问题：http: [//ablogaboutcode.com/2012/02/06/the-ruby-global-interpreter-lock/](http://ablogaboutcode.com/2012/02/06/the-ruby-global-interpreter-lock/)

# wpf - 如何在 ListBox 项实例之间共享资源？

> ID：13692939
> 
> 赞同：2
> 
> 时间：2012-12-03T22:31:11.317
> 
> 标签：wpf, listbox, itemscontrol, shared-resource

我们有一个自定义渲染的 ListBox，它维护一个基于其宽度的 StreamGeometry 对象的实例。然后，该控件需要将该 StreamGeometry 实例与其所有项目共享以进行渲染。

我们能想到的唯一方法是将 StreamGeometry 实例放在 ListBox 的 ViewModel 中，然后在各个 DataTemplates 中绑定到它，考虑到这是一个仅限视图的东西，因此不应该在 ViewModel 中全部。

注意：我们也可以通过 ListBox（或 ListBox 的子类）上的附加属性来存储它，但我们仍然需要绑定一个仅查看的东西，这对我来说似乎是错误的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:05:18.767

您可以使 StreamGeometry 成为自定义列表视图上的依赖属性，然后通过`Binding MyGeometry, RelativeSource={RelativeSource AncestorType=ListView}`.

这样，不涉及 ViewModel。

![在此处输入图像描述](../Images/f85fc0de5e3ae18f66f2b6ff7bdf976f.png)![在此处输入图像描述](../Images/0983b7f775f77262dcd838d0ff63310c.png)

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:local="clr-namespace:WpfApplication1"
                xmlns:s="clr-namespace:System;assembly=mscorlib"
                Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <!-- default lsitviewitem style except for added path -->
        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Padding" Value="2,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListViewItem}">
                        <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                            <StackPanel Orientation="Horizontal">
                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                <!-- added path-->
                                <Path Stretch="Uniform" Stroke="DarkBlue" Fill="DarkOrchid" Data="{Binding MyGeometry, RelativeSource={RelativeSource AncestorType=ListView}}" />
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSelected" Value="true"/>
                                    <Condition Property="Selector.IsSelectionActive" Value="false"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.InactiveSelectionHighlightBrushKey}}"/>
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}}"/>
                            </MultiTrigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid >
        <local:CustomListView Margin="20" >
            <local:CustomListView.Items>
                <ListViewItem Content="ListViewItem1" />
                <ListViewItem Content="ListViewItem2" />
                <ListViewItem Content="ListViewItem3" />
            </local:CustomListView.Items>
        </local:CustomListView>
    </Grid>
</Window> 
```

自定义列表视图：

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace WpfApplication1
{
    public class CustomListView : ListView
    {
        public StreamGeometry MyGeometry { get { return (StreamGeometry)GetValue(MyGeometryProperty); } set { SetValue(MyGeometryProperty, value); } }
        public static readonly DependencyProperty MyGeometryProperty = DependencyProperty.Register("MyGeometry", typeof(StreamGeometry), typeof(CustomListView), new PropertyMetadata(null));

        protected override void OnRender(DrawingContext drawingContext)
        {
            StreamGeometry geometry = new StreamGeometry(); // directly opening MyGeometry results in "must have isfrozen set to false to modify" error
            using (StreamGeometryContext context = geometry.Open()) 
            {
                Point p1 = new Point(this.ActualWidth * (2d / 5d), 0);
                Point p2 = new Point(this.ActualWidth / 2d, -10);
                Point p3 = new Point(this.ActualWidth * (3d / 5d), 0);

                context.BeginFigure(p1, true, true);

                List<Point> points = new List<Point>() { p2, p3 };
                context.PolyLineTo(points, true, true);
            }

            drawingContext.DrawGeometry(Brushes.DarkOrchid, new Pen(Brushes.DarkBlue, 1), geometry);

            this.MyGeometry = geometry;

            base.OnRender(drawingContext);
        }
    }
} 
```

# wpf - WPF WindowChrome WindowsFormsHost：不透明度

> ID：13692941
> 
> 赞同：3
> 
> 时间：2012-12-03T22:31:21.943
> 
> 标签：wpf, windowsformshost, monthcalendar

由于 WPF 没有允许显示多个月份的月历，我试图在 WindowsFormsHost 中使用经典的 WindowsForms MonthCalendar。在“普通”WPF 窗口中执行此操作可以正常工作。我正在尝试将模板化窗口与 WindowChrome 一起使用。结果看起来像 MonthCalendar 的不透明度值为 0.5，尽管它没有（左/第一张图片）在 VS 设计器中它看起来符合预期（右/第二张图片）

![月历](../Images/51613d8347cdb986eaa0f2690bdf6c45.png)![月历InIDE](../Images/e6b021c6bab97d245e831923626145ff.png)

我怎样才能摆脱这种影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-23T21:58:25.023

```
<WindowChrome GlassFrameThickness="0"/> 
```

如果您`GlassFrameThickness`设置为 -1（或导致内部玻璃边框足够大以覆盖控件的其他值），WindowsFormsHost 将获取玻璃状透明度。

# c - 在 C 中，定义一个结构类型 element_t 来表示元素周期表中的一个元素

> ID：13692943
> 
> 赞同：0
> 
> 时间：2012-12-03T22:31:40.883
> 
> 标签：c

我正在用 C 编写代码，它没有给我任何错误，但我没有得到想要的结果。

定义一个结构类型 element_t 来表示元素周期表中的一个元素。组件应包括原子序数（整数）；名称、化学符号和类别（字符串）；原子量的数字字段；和一个七元素整数数组，用于表示每个壳中的电子数。以下是钠的 element_t 结构的组成部分。11 钠 Na 碱金属 22.9898 2 8 1 0 0 0 0 定义和测试 I/O 函数 scan_element 和 print_element。

编译并测试代码后，这是我得到的输出 11 ÿ sodNa Na 22.989800 2810000%

如您所见，它没有给我元素名称或元素类。

这是我的代码：

```
#include <stdio.h>
#include <string.h>
#define ELEM_NAME 15
#define ELEM_CLASS 20
#define ELECT 7

  typedef struct
  {
    int atom_num;
    char name[ELEM_NAME];
    char symbol[3];
    char class_of_metal [ELEM_CLASS];
    double atomic_weight;
   nt elec[ELECT];
  } element_t;

element_t scan_element();

void print_element(element_t my_element);

element_t

scan_element(); 

int main(void)
{

  int i = 0;
  element_t my_element;

  printf("enter the atomic number:\n");
  scanf("%d", &my_element.atom_num);

  printf("enter element name:\n");
  scanf("%s", &my_element.name[ELEM_NAME]);

  printf("enter symbol:\n");
  scanf("%s", &my_element.symbol[3]);

  printf("enter type of metal:");
  scanf("%s", &my_element.class_of_metal[ELEM_CLASS]);

  printf("enter atomic weight:");
  scanf("%lf", &my_element.atomic_weight);

  printf("enter number of electrons in each shell:");
  scanf("%d", &my_element.elec[ELECT]);

 /* output */
    printf("%d   %s   %s   %s   %lf   %d", my_element.atom_num,
                                           my_element.name,
                                           my_element.symbol,
                                           my_element.class_of_metal,
                                           my_element.atomic_weight,
                                           my_element.elec[ELECT]);

 return (0);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:36:33.653

您误解了应该如何将`scanf()`字符串插入数组。例如，

```
&my_element.name[ELEM_NAME] 
```

指向元素末尾（在我看来，您认为`scanf()`需要此信息，但不，它不需要），因此您的写入超出了数组的范围。

所以你应该把所有这些错误的函数调用改成

```
scanf("%s", my_element.name);
scanf("%s", my_element.symbol);
scanf("%s", my_element.class_of_metal);
scanf("%d", my_element.elec); 
```

分别。

（另外，请阅读数组、指针和指针算法。这太基础了......）

# java - 如何添加与数组关联的整数值？

> ID：13692944
> 
> 赞同：1
> 
> 时间：2012-12-03T22:31:58.497
> 
> 标签：java

好的，我的 getBreadInfo 代码是

```
public static String[] getBreadInfo()  
{   
    ArrayList<String> breadsList = new ArrayList<>();

        try (BufferedReader in =
                new BufferedReader(
                new FileReader("bread.txt")))
        {
            String line = in.readLine();
            while (line != null)
            {
                String[] elems = line.split("~");
                breadsList.add(elems[0]+ " $" + elems[1]);
                line = in.readLine();
            }

        }
        catch(IOException e)
        {
            System.out.println(e);
            return null;
        }
    String[] breadInfo = breadsList.toArray(new String[]{});
    return breadInfo;
} 
```

在我的主应用程序中显示这个数组是

```
public static void displayBreadMenu()  
{  
    System.out.println("=== Select Sandwich Bread ===");

   String[] breadInfo = SandwichDB.getBreadInfo();
   for (String breads : breadInfo)
   {
       System.out.println(breads);
   }
} 
```

它在控制台上打印为

=== 选择三明治面包 ===
白面包 1.50
小麦面包 1.80
法式面包 2.00
有机面包 2.30

我将如何添加一个整数值以与每个数组关联？比如
1 白面包
2 小麦面包
3 法式面包
4 有机面包

我被告知我的 getBread() 类似于 getBreadInfo，除了它只包含面包名称，并返回另一个数组 bread[] 供 SandwichApp 确定用户选择了哪个面包，因为用户输入了与面包相关的数字（索引+1），而不是面包名称。

我是在我的 getbread() 中写入整数值还是 getBread 只是为了检查用户选择的面包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:33:37.417

我想这就是你想要的。只需在显示行时使用变量来保持计数...

```
int counter = 0;
for (String breads : breadInfo)
{
    System.out.println(++counter + "\t" + breads);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:34:13.773

有一个计数器并在添加到列表时附加它怎么样。

```
int count=1;
 while (line != null)
            {
                String[] elems = line.split("~");
                breadsList.add(count+" " +elems[0]+ " $" + elems[1]);
                line = in.readLine();
                 count++;
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:41:52.760

`White bread 1.50`当您添加`elems[0]+ " $" + elems[1]`到数组中时，我真的很惊讶它是如何打印的（注意`$`中间的符号）。

不打印`1 White bread`，你想`$" + elems[1]`在前面打印索引之前截断字符串的末尾吗？

如果是：请尝试以下操作：

```
 int ind = 1;
      for (String breads : breadInfo){
         System.out.println(ind++ + "\t" + breads.split("\\$")[0]);
      } 
```

请注意：将从存储在数组中的字符串返回`breads.split("$")[0]`。`White bread``White bread $1.50`

# javascript - $(document).ready 监听器不在动态内容上运行

> ID：13692945
> 
> 赞同：2
> 
> 时间：2012-12-03T22:32:00.167
> 
> 标签：javascript, jquery, action, listener

我有一个`$(document).ready`为某些元素设置监听器的函数。但是，所有`#leave-ride`元素都是动态添加的。

听众：

```
$(document).ready(function() {
    $("#post-ride").click(function() {
        addRide(currentDriver, $(destinationInput).val(), $(originInput).val(), $(dateInput).val(), $(timeInput).val());
        $.getScript("scripts/myRides.js", function() {});
    });

    $("#request-ride").click(function() {
        requestRide(currentDriver, $(destinationInput).val(), $(originInput).val(), $(dateInput).val(), $(timeInput).val());
        $.getScript("scripts/myRides.js", function() {});
    });

    $("#leave-ride").click(function() {
        console.log("leave Ride");
        leaveRide(currentDriver, $("leave-ride").closest("div").attr("id"));
        $.getScript("scripts/myRides.js", function() {});
    });
}); 
```

我需要做什么才能让听众收听动态内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T22:39:23.770

是的，`ready`只运行一次。您可以使用事件委托：

取最接近`#leave-ride`未动态加载的元素（`document`在极端情况下）。然后在其上附加处理程序，并用作[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)`#leave-ride`的选择器。

假设具有 id 的 div`#container`是该静态元素：

```
$('div#container').on('click', '#leave-ride', function(){…}); 
```

另请参阅[动态创建的元素上的事件绑定？](https://stackoverflow.com/q/203198/1048572)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T22:33:38.530

使用`on`，更改您的事件声明

```
$("#post-ride").click(function() { 
```

至

```
$("body").on('click',"#post-ride",(function() { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:33:23.680

利用`.on()`

例子：

```
$("#leave-ride").on('click', function() {
   console.log("leave Ride");
   leaveRide(currentDriver, $("leave-ride").closest("div").attr("id"));
   $.getScript("scripts/myRides.js", function() {
    });
}); 
```

# ruby-on-rails - 如何从子类重定向到父类#show 视图？

> ID：13692947
> 
> 赞同：2
> 
> 时间：2012-12-03T22:32:18.637
> 
> 标签：ruby-on-rails, associations

我有一个应用程序，其中一个事件有_许多视频，它属于一个事件。如何单击视频实例并使用其 event_id 外键将其重定向到 events#show 视图以识别正确的事件？该关联肯定有效，但我正在努力思考逻辑，甚至重定向应该发生在哪里，即在路由、控制器或视图中？

这是一些可能相关的代码：

从视图

```
 <% @video.each do |v| %>
   <li><%= link_to image_tag(v.video_thumb('150'), width: 150), v %></li>
<% end %>

class VideosController < ApplicationController

  def show
    @video = Video.find(params[:id])
    if current_event
      @videos = current_event.videos
      @random_video = current_event.videos.random
    else
      @videos = Video.all
      @random_video = Video.random
    end
  end

class EventsController < ApplicationController
def show
    @event = Event.find_by_name(request.subdomain)
    if request.params[:id].present?
      @event = Event.find(params[:id])
    end

    if not @event.nil? and @event.videos.any?
      @video = Video.random(@event)
      @comment = @video.comments.new
      @comments = @video.comments
    end
  end

  resources :events do
    match '', to: 'events#show', constraints: lambda { |r| r.subdomain.present? && r.subdomain != 'www' }
  end
resources :videos 
```

让我知道您是否可能需要帮助的任何其他代码，我将使用相关代码更新问题。

谢谢你的帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:30:16.337

您可以使用 event_path(@event.video)

让我告诉你，当一个视频属于事件时，你可以很容易地从该对象中找到与该视频相关的关联事件。例如：

```
@video = Video.find(params[:id])
@event = @video.event 
```

用于链接生成：link_to @event.name, event_path(@event)

// 如果该事件有任何子域，并且如果子域将 EventsController#show 定义为 root，那么要转到该事件显示页面，我们可以编写：

```
link_to "#{@video.event.name}", root_url(:subdomain => 
@video.event.name) 
```

或相同：

```
link_to "#{@event.name}", root_url(:subdomain => @event.name 
```

我希望这会奏效！

# iphone - 在单元格内添加 uiimageview

> ID：13692948
> 
> 赞同：0
> 
> 时间：2012-12-03T22:32:22.630
> 
> 标签：iphone, xcode, uitableview

试图在单元格内加载图像。我能够在单元格内加载图像，但是当上下滚动 tableView 时，图像也会随机出现在其他不同的单元格内......

这是一些代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView_ cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView_ dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];

    cell.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.textColor = [UIColor whiteColor];

}

if (indexPath.section == ONE_SECTION) {

    switch(indexPath.row) {

        case 0:{
            //some code
}
                break;
            case 2:{
                              //some code

}
                break;
            case 3:{

            UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(256,0,43,43)];
            imageView.contentMode = UIViewContentModeScaleAspectFit;
            [cell.contentView addSubview:imageView];
            imageView.layer.cornerRadius = 10.0;
            //imageView.contentMode = UIViewContentModeScaleAspectFit;
            imageView.layer.masksToBounds = YES;
            imageView.image = [UIImage imageNamed:@"imageName.png"];}
            break;
        default:
            break;
    }

}

if (indexPath.section == TWO_SECTION) {
    //some code
}

if (indexPath.section == THREE_SECTION) {
    //some code
}

return cell;
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:55:51.150

由于您使用的是缓存单元格，因此您获得的单元格可能是您在之前调用代码时添加了图像视图的单元格。如果您`tag`为您的图像视图分配一个唯一性，那么对于您不想要它的情况，您可以检查它的存在并在找到它时将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:00:50.950

试试下面的代码。如果您正在重用单元格，则不必`imageView`重复添加到所有单元格。您可以在单元格分配部分创建它，然后在其外部设置`imageView.image`属性，如下所示。

```
- (UITableViewCell *)tableView:(UITableView *)tableView_ cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView_ dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];

    cell.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.textColor = [UIColor whiteColor];

    UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(256,0,43,43)];
    imageView.contentMode = UIViewContentModeScaleAspectFit;
    [cell.contentView addSubview:imageView];
    imageView.layer.cornerRadius = 10.0;
    //imageView.contentMode = UIViewContentModeScaleAspectFit;
    imageView.layer.masksToBounds = YES;
    imageView.tag = 567; //unique tag
}

UIImageView *imageView = (UIImageView *)[cell.contentView viewWithTag:567];
imageView.image = nil;

if (indexPath.section == ONE_SECTION) {

    switch(indexPath.row) {

        case 0:{
            //some code
        }
        break;
        case 2:{
                              //some code
        }
        break;
        case 3:{

            UIImageView *imageView = (UIImageView *)[cell.contentView viewWithTag:567];
            imageView.image = [UIImage imageNamed:@"imageName.png"];
        }
            break;
        default:
            break;
    }
}

if (indexPath.section == TWO_SECTION) {
    //some code
}

if (indexPath.section == THREE_SECTION) {
    //some code
}

 return cell;
} 
```

更好的方法是创建自定义`UITableViewCell`类并添加`UIImageView`到`init`该单元格的方法中。然后将属性设置为`cell.imageView.image = ...`方法中`cellForRowAtIndexPath`。

# php - AS3、PHP 和 JSON - 解码一个对象很好，数组返回 null

> ID：13692961
> 
> 赞同：2
> 
> 时间：2012-12-03T22:33:33.010
> 
> 标签：php, json, actionscript-3, flash

我已经四处搜寻了几个小时，但我仍然不知道发生了什么。我是 PHP 新手，但对简单的 Flash 内容相当熟悉。

我使用 URLLoaders 等将一个 JSON 对象从 PHP 传递到 Flash AS3。这是我的 PHP 创建的测试 JSON 数组：

```
$objJSON = array('sample' => null);
    $objJSON['sample'] = "TESTING";
    $objJSON['sample2'] = "TESTING2";
    $objJSON = json_encode($objJSON); 
```

我把它还给闪光灯

```
echo "arrayData=$jsonArray"; 
```

当我将其解析为 Flash 中的 SINGLE 对象时，使用

```
var tempJSON = JSON.decode(event.target.data.arrayData); 
```

我得到“TESTING”作为我的输出（textBox.text = tempJSON.sample; 通过 WAMP 使用 localhost），这是正确的。一切看起来都很好，有通信，JSON 库使用得当，对象在那里并且可以访问......

**但！**当我将它视为一个数组时（因为它就是这样），将上面的代码直接更改为：

```
var tempJSON:Array = JSON.decode(event.target.data.arrayData, true); 
```

我抛出一个编译器错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 com.adobe.serialization.json::JSONTokenizer/nextChar()[....\json\JSONTokenizer.as:545]

在 localhost 中运行 swf 让我无法返回以前获取字符串的位置。当我将数据视为数组时，我是否犯了一些新手错误，即数据突然变为空？

我已经通过 PHP 中的输出检查了我的 JSON 的有效性并检查了出来。我确保在调用的 PHP 类中没有额外的回声。我只是难过。

***修复！***

在评论的指导下，我基本上没有将我的 JSON 形成一个数组，只是具有多个属性的对象。正确的做法是：

```
$objArray = array(
   array(
   "sample1" => "Testing!",
   "sample2" => "Testing2!",
),
   array (
   "sample1" => "Testing!",
   "sample2" => "Testing2!",
  )
);

$objArray = json_encode($objArray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:37:58.307

我相信这是因为您的 JSON 正在解码为对象而不是数组。如果您使用非整数值作为数组键（即“sample”、“sample2”），就会发生这种情况。

我对 AS3 并不太熟悉，但您可能需要将其转换为类似对象的实例而不是数组。

```
$objJSON = array('sample' => "TESTING", 'sample2' => "TESTING2");
echo json_encode($objJSON);

// Will output
{ "sample": "TESTING", "sample2": "TESTING2" } 
```

这*不是*使用 JSON 的数组表示法。它是对象符号。

我希望这有帮助！

# machine-learning - 为什么 weka 不能正确预测我的测试集的值？

> ID：13692962
> 
> 赞同：0
> 
> 时间：2012-12-03T22:33:35.537
> 
> 标签：machine-learning, weka, svm

为什么 weka 不能正确预测我的测试集的值？

使用的命令：

```
weka -c 'weka.classifiers.functions.SMO -no-cv -t triggering.arff -d triggering.model'
weka -c 'weka.classifiers.functions.SMO -p 0 -T triggering-new.arff -l triggering.model' 
```

训练数据：

```
@relation triggering

@attribute iota real
@attribute A{TRUE, FALSE}
@attribute B{TRUE, FALSE}
@attribute C{TRUE, FALSE}

@data
10, FALSE, FALSE, FALSE
20, FALSE, FALSE, FALSE
30, FALSE, TRUE, FALSE
40, FALSE, FALSE, TRUE
50, TRUE, FALSE, FALSE 
```

测试数据：

```
@relation triggering-new

@attribute iota real
@attribute A{TRUE, FALSE}
@attribute B{TRUE, FALSE}
@attribute C{TRUE, FALSE}

@data
10, ?, ?, ?
20, ?, ?, ?
30, ?, ?, ? 
```

预言：

```
=== Predictions on test data ===

 inst#     actual  predicted error prediction
     1        1:?    2:FALSE       1
     2        1:?    2:FALSE       1
     3        1:?    2:FALSE       1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:29:03.917

我认为您的意思是测试集而不是训练集，因为这是您在此处提供的输出。测试集数据没有属性值。如果您尝试在给定 B 和 C 的情况下预测 A 的值，则必须在测试数据集中提供 B 和 C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T11:03:59.083

您必须在测试集中有实例（填写每个属性的前三个实例的值），并且只保留类为空。

问候，莱昂纳多

# html - 只要 html5 验证没问题，我可以使用 div

> ID：13692963
> 
> 赞同：-3
> 
> 时间：2012-12-03T22:33:36.990
> 
> 标签：html

只要 html5 验证可以[使用 w3](http://validator.w3.org/)

然后html5可以发布并且没问题。还是有一些我应该看的清单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:38:38.677

如果您只是在谈论让 HTML5 元素工作，您将需要添加 HTML5shiv 以便在所有浏览器中识别这些元素。

```
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

# python - 这个玩具环境中的最佳多处理方法

> ID：13692969
> 
> 赞同：2
> 
> 时间：2012-12-03T22:33:46.003
> 
> 标签：python, performance, parallel-processing, multiprocessing

我想使用多处理来提高我的项目的速度。

```
from multiprocessing import Queue, Process

def build(something):
    # ... Build something ...
    return something

# Things I want to build.
# Each of these things requires DIFFERENT TIME to be built.
some_things = [a_house, a_rocket, a_car]

#________________________________
# My approach

def do_work(queue, func, args):
    queue.put(func(*args))

# Initialize a result queue
queue = Queue()

# Here I'll need to distribute the tasks (in case there are many)
# through each process. For example process 1 build a house and a rocket 
# and so on. Anyway this is not the case..
procs = [Process(target=do_work, args=thing) for thing in some_things]

# Finally, Retrieve things from the queue
results = []
while not queue.empty():
    results.append(queue.get()) 
```

这里的问题是，如果一个进程完成构建它的东西，它将等到其他进程完成，而我希望这个进程做其他事情。

我怎样才能做到这一点？我想我可以使用一组工人，但我真的不明白如何使用它，因为我需要检索结果。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:19:22.343

您可以使用几种技术：

1.  使用共享内存数组在主进程和所有子进程之间进行通信。将 dicts 作为输入值并在计算出输出值后设置一个标志。

2.  使用 Pipes 将作业初始化数据从主服务器传递给工作人员，并将结果从工作人员传回主服务器。如果您可以轻松地序列化数据，这将很有效。

这两个类都在这里详细介绍：http: [//docs.python.org/2/library/multiprocessing.html](http://docs.python.org/2/library/multiprocessing.html)

# ruby-on-rails - Rails：单元测试：ActiveRecord::StatementInvalid: PG::Error: ERROR: null value in column "created_at"

> ID：13692973
> 
> 赞同：3
> 
> 时间：2012-12-03T22:33:59.150
> 
> 标签：ruby-on-rails

嗨，我目前正在尝试为我的用户通过一个简单的单元测试

```
require 'test_helper'

class UsersTest < ActiveSupport::TestCase
  test "user is created" do
    user = User.create!(:name => "Edmund")
    assert_equal user.id, User.first.id
  end
end 
```

但是，我运行`rake test:units`并得到一个错误：

```
1) Error:
test_user_is_created(UsersTest):
ActiveRecord::StatementInvalid: PG::Error: ERROR:  null value in column "created_at" violates not-null constraint
: INSERT INTO "messages" ("content", "read") VALUES ('MyText', 1) 
```

（这是完整的日志）

```
Edmunds-MacBook-Pro:langexchange edmundmai$ rake test:units
NOTICE:  CREATE TABLE will create implicit sequence "languages_id_seq" for serial column "languages.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "languages_pkey" for table "languages"
NOTICE:  CREATE TABLE will create implicit sequence "locations_id_seq" for serial column "locations.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "locations_pkey" for table "locations"
NOTICE:  CREATE TABLE will create implicit sequence "messages_id_seq" for serial column "messages.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "messages_pkey" for table "messages"
NOTICE:  CREATE TABLE will create implicit sequence "users_id_seq" for serial column "users.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "users_pkey" for table "users"
Run options: 

# Running tests:

E

Finished tests in 0.666783s, 1.4997 tests/s, 0.0000 assertions/s.

  1) Error:
test_user_is_created(UsersTest):
ActiveRecord::StatementInvalid: PG::Error: ERROR:  null value in column "created_at" violates not-null constraint
: INSERT INTO "messages" ("content", "read") VALUES ('MyText', 1)
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:654:in `async_exec'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:654:in `block in execute'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:653:in `execute'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/database_statements.rb:277:in `insert_fixture'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:502:in `block (5 levels) in create_fixtures'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:501:in `each'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:501:in `block (4 levels) in create_fixtures'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:500:in `each'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:500:in `block (3 levels) in create_fixtures'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:492:in `each'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:492:in `block (2 levels) in create_fixtures'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:491:in `block in create_fixtures'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:527:in `disable_referential_integrity'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:476:in `create_fixtures'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:895:in `load_fixtures'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/fixtures.rb:849:in `setup_fixtures'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:407:in `_run__1860443591909891061__setup__836517370287596446__callbacks'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/testing/setup_and_teardown.rb:35:in `run'

1 tests, 0 assertions, 0 failures, 1 errors, 0 skips
rake aborted!
Command failed with status (1): [ruby -I"lib:test" -I"/Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rake-10.0.2/lib" "/Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rake-10.0.2/lib/rake/rake_test_loader.rb" "test/unit/**/*_test.rb" ]
Tasks: TOP => test:units
(See full trace by running task with --trace) 
```

我的模型是：

```
class Users < ActiveRecord::Base
  attr_accessible :age, :gender, :name

  has_many :sent_messages, :class_name => "Messages", :foreign_key => 'sender_id'
  has_many :received_messages, :class_name => "Messages", :foreign_key => 'receiver_id'

  belongs_to :location
  belongs_to :language

  before_save { |user| if user.new_record? then create_remember_token end }

    private

        def create_remember_token
            self.remember_token = SecureRandom.urlsafe_base64
        end

end

class Messages < ActiveRecord::Base
  attr_accessible :content, :read

  belongs_to :sender, :class_name => "User", :foreign_key => 'sender_id'
  belongs_to :receiver, :class_name => "User", :foreign_key => 'receiver_id'
end 
```

有人可以帮忙吗？`Messages`当我只是创建一个简单的`User`...时，我不明白为什么它在谈论模型

更新

测试/fixtures/messages.yml

```
one:
  content: MyText
  read: 1

two:
  content: MyText
  read: 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T01:42:07.933

要查看的堆栈跟踪中的行是

```
/Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/database_statements.rb:277:in `insert_fixture' 
```

在测试开始之前，它会读取包含您的测试将使用的样本数据的夹具。很可能您的夹具没有正确的数据（尽管我承认我认为`updated_at`and`created_at`属性会由 Rails 神奇地管理）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T03:19:09.900

如果你从谷歌来到这里。可能是您有这些列`created_at`，并且`updated_at`在您的夹具 yaml 文件中，它们被设置为空白。我只是从带注释的`model.rb`文件中复制了所有列并转换为 yaml 格式后才这样做。

# css - 在灵活导航上定位背景图像

> ID：13692975
> 
> 赞同：2
> 
> 时间：2012-12-03T22:34:04.760
> 
> 标签：css, menu, navigation

我在尝试将图像放置在 wordpress 上的活动菜单项上时遇到了一个棘手的问题。html 是由 wordpress 吐出的，所以我无法更改呈现给我的类我已经设法创建了一个很好的灵活菜单，但我似乎无法控制这个图像的位置。

这就是我想要实现的 > [http://i48.tinypic.com/1pyzqo.png](http://i48.tinypic.com/1pyzqo.png)

下面是 HTML，这是一个小提琴 > [http://jsfiddle.net/rafoggin/cwA7Y/1/](http://jsfiddle.net/rafoggin/cwA7Y/1/)

HTML：

```
<nav id="navigation" class="menu-main-navigation-container"> 

<ul id="main-menu" class="item-list inline links small">

<li id="menu-item-54" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-54"><a href="http://richardfoggin.co.uk/pinkfloyd/about">About</a></li>

<li id="menu-item-57" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-55 current_page_item menu-item-57"><a href="http://richardfoggin.co.uk/pinkfloyd/">Portfolio</a></li>

<li id="menu-item-42" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42"><a href="http://richardfoggin.co.uk/pinkfloyd/blog">Blog</a></li>

</ul>

</nav>​ 
```

和CSS：

```
nav#navigation {
    position:absolute; 
    top:0; width:100%; 
    padding:20px 0 0; 
    border-bottom:1px solid #dedede;
    background: #FFFFFF;
}

nav#navigation ul#main-menu {
    list-style-type: none;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
}

nav#navigation ul#main-menu li{
 display: inline-block;
}

nav#navigation ul#main-menu a{
    display: block;
    text-decoration: none;
    color: black;
    padding: 8px;
    margin: 0 9px;
}

li.current_page_item a {
    background: url(http://richardfoggin.co.uk/pinkfloyd/wp-content/themes/svbtle/images/menu-bg.png) no-repeat 50% 100%;
    border-bottom: solid 1px #fff;
} 
```

我在 li.current_page_item 一个类上尝试了一个 :after 伪元素，但这并没有达到目的。但是坚持如何做到这一点，任何帮助都会一如既往地感激:)

R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:47:06.823

您可以使用`:after`，但您需要将其与绝对定位相结合。您还需要给这个定位的项目一个大小。

```
nav#navigation ul#main-menu a {
    display: block;
    text-decoration: none;
    color: black;
    padding: 8px;
    margin: 0 9px;
    position:relative;   <--- you need this 
}

li.current_page_item a:after {
    background: url(http://richardfoggin.co.uk/pinkfloyd/wp-content/themes/svbtle/images/menu-bg.png);
    border-bottom: solid 1px #fff;      
    position:absolute;
    content: "";
    top:16px;
    left:30px;
    width:18px;
    height:20px;   
} 
```

# cron - 如何在 crontab 更改时获得警报？

> ID：13692977
> 
> 赞同：1
> 
> 时间：2012-12-03T22:34:10.227
> 
> 标签：cron, crontab

我有大约十二台服务器，每台服务器都有 crontab，其中包含 20-50 个 crontab 条目。我最常见的进程失败原因是有人在修复或补丁期间注释掉了 cron 中的作业，然后忘记取消注释这些作业。

我想做两件事来解决这个问题：

1.  开始使用我们的计划抑制过程，该过程允许用户在不实际接触 crontab 的情况下抑制计划。没什么神奇的 - 只需触摸专用于该过程的目录中的文件。该过程在启动时检查该目录。
2.  如果 crontab 与 svn 中的备份或当前版本不匹配，则实现一个发送警报的过程。

任何人都可以推荐#2 的现有解决方案（在 crontab 更改时发出警报）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:48:38.653

在这种情况下，我建议比较您想要拥有的文件和实际文件的哈希值。

只需编写一个发送电子邮件通知或创建通知文件或您想要的任何内容的小 bashscript，并让此脚本每 x 秒/分钟/小时自动运行一次。

一个可能的脚本可能是

```
if [[ $(md5sum path/to/crontab.backup | cut -d' ' -f1) == $(md5sum /etc/crontab | cut -d' ' -f1) ]]
then
    # send your notification
fi 
```

这是一个非常简单的解决方案，用于检查自上次备份以来文件是否已更改。

# objective-c - (iOS, Objective-C) 在计算日期/时间时处理不同的时区

> ID：13692980
> 
> 赞同：1
> 
> 时间：2012-12-03T22:34:28.363
> 
> 标签：objective-c, timezone, nsdate

**2013 年 7 月 8 日编辑：Apple 有一组出色的 WWDC 视频，它们真正帮助我理解了 Objective-C 中的各种日期和时间类，以及如何正确地执行时间计算/操作。**

**“常见日期和时间挑战的解决方案”（[高清视频](http://devstreaming.apple.com/videos/wwdc/2013/227xax5xif2s7s531dsmfs1afo2/227/227-HD.mov?dl=1)、[标清视频](http://devstreaming.apple.com/videos/wwdc/2013/227xax5xif2s7s531dsmfs1afo2/227/227-SD.mov?dl=1)、[幻灯片（PDF）](http://devstreaming.apple.com/videos/wwdc/2013/227xax5xif2s7s531dsmfs1afo2/227/227.pdf?dl=1)）（WWDC 2013）**
**“执行日历计算”（[标清视频](https://developer.apple.com/videos/wwdc/2011/includes/performing-calendar-calculations.html#performing-calendar-calculations)、[幻灯片（PDF）](https://developer.apple.com/devcenter/download.action?path=/wwdc_2011/adc_on_itunes__wwdc11_sessions__pdf/117performing_calendar_calculations.pdf)）（WWDC 2011）**

**注意：链接需要免费的 Apple Developer 会员资格。**

在[这个 SO question](http://stackoverflow.com/questions/12829705/programmatically-getting-the-date-next-sunday-at-5pm)中，我问我如何计算某个日期和时间（“下周日下午 5 点”）。感谢我得到的答案，我想出了以下代码：

```
 - (NSDate *) toPacificTime
 {
     NSTimeZone *tz = [NSTimeZone timeZoneWithName:@"America/Los_Angeles"];
     NSInteger seconds = [tz secondsFromGMTForDate: self];
     return [NSDate dateWithTimeInterval: seconds sinceDate: self];
 }

 - (void)handleLiveShowReminders
 {
    NSDate *gmtNow = [NSDate date];
    NSDate *now = [gmtNow toPacificTime];

    NSCalendar *calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
    [calendar setTimeZone:[NSTimeZone timeZoneWithName:@"America/Los_Angeles"]];
    NSDateComponents *dateComponents = [calendar components:NSWeekdayCalendarUnit fromDate:now];
    NSInteger weekday = [dateComponents weekday];

    NSInteger daysTillNextSunday = 8 - weekday;

    int secondsInDay = 86400; // 24 * 60 * 60
    NSDate *nextSunday = [now dateByAddingTimeInterval:secondsInDay * daysTillNextSunday];

    NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:nextSunday];
    [components setHour:17];
    [components setMinute:00];
    [components setTimeZone:[NSTimeZone timeZoneWithName:@"America/Los_Angeles"]];
    NSDate *nextSunday5PM = [calendar dateFromComponents:components];

    warningInterval = -300;    // we want the notification to fire 5 minutes beforehand

    NSDate *alertDate = [nextSunday5PM dateByAddingTimeInterval:(NSTimeInterval)warningInterval];

    UILocalNotification* notifyAlarm = [[[UILocalNotification alloc] init] autorelease];
    if (notifyAlarm)
    {
        notifyAlarm.fireDate = alertDate;
        notifyAlarm.timeZone = [NSTimeZone timeZoneWithName:@"America/Los_Angeles"];    
        notifyAlarm.repeatInterval = NSWeekCalendarUnit;
        notifyAlarm.soundName = @"alert.aif";
        notifyAlarm.alertBody = @"LIVE SHOW REMINDER: The live show is about to start!";

        [[UIApplication sharedApplication] scheduleLocalNotification:notifyAlarm];
    }
 } 
```

问题是，虽然这段代码对我有用，但它不适用于不在 PST 时区的任何人，正如我从 EST 的用户那里收到的调试输出所示：

```
number of notifications = 1

Notification #1
===================
Body: LIVE SHOW REMINDER: The live show is about to start!
Details: <UIConcreteLocalNotification: 0x1d5f2200>
{fire date = Sunday, December 9, 2012, 4:30:00 PM Pacific Standard Time,
time zone = America/Los_Angeles (PST) offset -28800,
repeat interval = NSWeekCalendarUnit
repeat count = UILocalNotificationInfiniteRepeatCount,
next fire date = Sunday, December 9, 2012, 4:30:00 PM Eastern Standard Time,
user info = (null)} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:51:05.520

您的逻辑有一个问题，只是将 86,400 添加到您的时间间隔可能不是您想要的。例如，如果用户体验到夏令时，那么如果它发生在午夜附近，您将休息一个小时，甚至一天。更好的方法是向 NSCalendar 询问结果，其中考虑了用户本地时区。

```
NSDate *start = yourDate;
NSDateComponents *oneDay = [NSDateComponents new];
[oneDay setDay:1];

NSCalendar *cal = [NSCalendar currentCalendar];
NSDate *end = [cal dateByAddingComponents:oneDay toDate:start options:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:49:18.170

NSDate 与 UTC/GMT 相关。当您“调整”太平洋时间时，您会造成完全的混乱。

# windows-installer - 安装程序未覆盖为客户端分支的旧 DLL

> ID：13692983
> 
> 赞同：6
> 
> 时间：2012-12-03T22:34:37.423
> 
> 标签：windows-installer, installshield, installshield-2012

我有一个我一直在为我们公司维护的 InstallShield 2012 Basic MSI 项目。我不是一个训练有素的 InstallShield 开发人员（只是 [当时] 图腾柱上最低的），但我在这几个月里学到了足够多的东西来让每个版本都能顺利运行。

最近，我们的一位客户坚持要我们修复旧版本产品中的错误，我们已经在最新版本中修复了该错误。我们通常不创建补丁，因为完整的安装程序兼作更新程序，但在这种情况下，我们遵守了，在他们所在的版本上创建了一个分支，并向他们发送了一个更新补丁。该补丁中仅包含一个文件，并且它与要替换的文件具有相同的版本。一切都好。

今天，该客户希望升级到我们的最新版本。实际上，我们正在将他们的分支合并回主线，并且由于他们的分支没有额外的组件或特定于客户端的代码，我认为我们可以简单地给他们我们的常规安装程序并让它覆盖所有内容。不是这样...

当我复制他们的分支安装并尝试更新文件时，安装程​​序成功运行并替换了除分支 dll 之外的所有内容。修补“omus”、“amus”、强制覆盖等不会改变任何事情。事先删除文件没有任何作用。无论我尝试什么，分支的 dll 仍然存在，日志看起来像这样（更改名称以保护有罪者，版本和 guid 保持不变）：

正确更新的 DLL：

```
Executing op: RegisterSharedComponentProvider(,,File=dll_that_works.r1,Component={B4F132E0-6C2A-4138-990B-16B991F8C54D},ComponentVersion=1.1.1.195,ProductCode={B2F1D6AC-95A4-44A9-9A52-631A3AD14389},ProductVersion=1.1.1,PatchSize=0,PatchAttributes=0,PatchSequence=0,SharedComponent=0,IsFullFile=0)
Executing op: FileCopy(SourceName=SY2F9C~1.DLL|dll_that_works.dll,SourceCabKey=dll_that_works.r1,DestName=dll_that_works.dll,Attributes=16384,FileSize=51584,PerTick=65536,,VerifyMedia=1,,,,,CheckCRC=0,Version=1.1.1.195,Language=0,InstallMode=130023424,,,,,,,)
File: C:\inetpub\wwwroot\Service\bin\dll_that_works.dll;    Overwrite;  Won't patch;    REINSTALLMODE specifies all files to be overwritten
Source for file 'dll_that_works.r1' is compressed 
```

不更新的分支 DLL：

```
Executing op: SetSourceFolder(Folder=C:\Windows\Installer\$PatchCache$\Managed\CA6D1F2B4A599A44A92536A1A31D3498\1.1.1)
Executing op: RegisterSharedComponentProvider(PatchGUID={EC6657A6-01A1-4AFC-86F9-1F4BF5F15481},MediaCabinet=#PCW_CAB_Family1,File=branched_dll.r,Component={74531F91-82A9-421D-A227-15DDDEDFC2FA},ComponentVersion=1.1.1.195,ProductCode={B2F1D6AC-95A4-44A9-9A52-631A3AD14389},ProductVersion=1.1.1,PatchSize=35952,PatchAttributes=0,PatchSequence=10000,SharedComponent=0,IsFullFile=0)
Executing op: FileCopy(SourceName=branched_dll.r,SourceCabKey=branched_dll.r,DestName=branched_dll.dll,Attributes=0,FileSize=225664,PerTick=65536,,VerifyMedia=0,,TotalPatches=1,,,CheckCRC=0,Version=1.1.1.195,Language=0,InstallMode=130023424,,,,,,,)
File: C:\inetpub\wwwroot\Service\bin\branched_dll.dll;  Overwrite;  Smart patch;    REINSTALLMODE specifies all files to be overwritten
Redirecting file copy of 'C:\inetpub\wwwroot\Service\bin\branched_dll.dll' to 'C:\Config.Msi\PTB2C9.tmp'.   A subsequent patch will update the intermediate file, and then copy over the original.
Source for file 'branched_dll.r' is uncompressed, at 'C:\Windows\Installer\$PatchCache$\Managed\CA6D1F2B4A599A44A92536A1A31D3498\1.1.1\'. 
```

这有点超出我的深度。据我所知，它正在尝试修补分支的 DLL，但不能这样做，并且出于某种原因将文件扔到临时目录中（我找不到有关“智能补丁”究竟是什么意思的详细信息）。我已经看到应用到错误版本的补丁会发生这种情况，但这不是补丁！这是一个使用 REINSTALLMODE=v(oa)mus 和 REINSTALL=ALL 运行的常规安装程序。它应该只看到旧版本，看到它嵌入了新版本，然后将旧版本吹走。

（一时兴起，我尝试手动更新 DLL，而不是使用我们为客户端提供的更新程序。一切都正确更新，因此文件本身不会阻塞）

我的直接目标是让这个客户端重新同步，最好不用任何卸载并使用一个统一的安装程序，而不是为他们创建一个特殊的更新程序。由于文件已经在野外，如果这不可行，我可以忍受一个特殊情况。我未来的目标是让它像我想象的那样自然地工作——文件是旧版本，文件被替换，其他都不重要。

我想我已经提供了所有相关的信息，但如果没有，我可以提供更多信息。我今天大部分时间都在看这个，我根本找不到任何与这种情况类似的材料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:43:34.040

根据您对场景的描述，听起来您为客户修补的组件的密钥文件的“修改日期”可能晚于升级包中的日期，但版本相同。Windows Installer 可能不会替换该文件。请参阅[替换现有文件](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/8be734c7-4f16-4f54-93db-bb8efb1ea6da)和 FileF 行中的示例

此客户可能需要在应用最新升级之前使用卸载已修补组件的自定义包。

# haskell - MonadCatchIO 的问题将如何影响未来使用 Snap 框架构建的应用程序？

> ID：13692984
> 
> 赞同：1
> 
> 时间：2012-12-03T22:34:42.950
> 
> 标签：haskell, haskell-snap-framework

[我最近在这里](http://hackage.haskell.org/packages/archive/MonadCatchIO-transformers/0.3.0.0/doc/html/Control-Monad-CatchIO.html#t%3aMonadCatchIO)看到了有关 MonadCatchIO 类的警告。

Snap Monad 就是一个例子。

我想知道 MonadCatchIO 问题的任何可能解决方案将如何影响基于当前版本 Snap 构建的 webapps。这是否意味着 Snap webapps 的框架升级将需要大量更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-05T02:14:23.800

是的，snap 1.0 将使用 monad-control。使用 MonadCatchIO 的代码应该很容易从提升的基础包移植到[Control.Exception.Lifted 。](https://hackage.haskell.org/package/lifted-base-0.2.3.3/docs/Control-Exception-Lifted.html)

将 Snap 从 iteratee 样式和 monad-control 移开的组合应该会导致与 Snap monad 中的异常处理相关的开销以及在它之上的 monad 中的开销大幅减少。

# android - 用于图形应用程序的 GLSURFACEVIEW 之上的 Android TextView

> ID：13692985
> 
> 赞同：0
> 
> 时间：2012-12-03T22:34:44.087
> 
> 标签：android, android-layout, opengl-es, android-activity, textview

[这是我在此处](https://stackoverflow.com/questions/13654964/how-to-render-text-to-bitmap-and-draw-it)显示的另一个问题的后续问题

基本上我和我的本科项目组正在 opengl es 2.0 中创建一个 2D 图形应用程序，用户可以在其中输入直线方程并将其绘制到屏幕上。如此处所示 ![sin(x) 图](../Images/e6ebf420664382358f53be8ad58836f1.png)

所以基本上我想添加一个数字比例[-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4, 5,6,7,8,9,10] 到 x 和 y 轴上，并用“X”和“Y”标记 x 和 y 轴。基本上我现在已经确定在我的 GLSURFACEVIEW 之上的 textView 可能是实现这一目标的最简单方法。任何人都有指向教程的链接，或者可以帮助我开始编写此视图并在适当的位置设置文本，如下所示：![我需要一个 textView 来显示这样的数字](../Images/0642c06387001a51337aeaa42a319dfd.png)

**我将如何编写 textView 以显示数字刻度以及 X 和 Y 标签？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:04:19.080

我会在 GLSurfaceView 之上创建一个视图，而不是添加将覆盖整个 GLSurfaceView 的 textview。

您可以使用 onDraw(Canvas canvas) 使用 drawText 方法绘制比例。

# sql - JOIN 与 EXISTS 性能

> ID：13692992
> 
> 赞同：8
> 
> 时间：2012-12-03T22:35:07.380
> 
> 标签：sql, teradata

一般来说，使用 JOIN 选择行与 EXISTS where 子句之间是否存在性能差异？搜索各种问答网站表明加入更有效，但我记得很久以前就知道 EXISTS 在 Teradata 中更好。

我确实看到了其他 SO 答案，例如[this](https://stackoverflow.com/q/3604042/1275871)和[this](https://stackoverflow.com/q/4457132/1275871)，但我的问题是针对 Teradata 的。

例如，考虑这两个返回相同结果的查询：

```
select   svc.ltv_scr, count(*) as freq
from     MY_BASE_TABLE svc
join     MY_TARGET_TABLE x
on       x.srv_accs_id=svc.srv_accs_id
group by 1
order by 1 
```

-和-

```
select   svc.ltv_scr, count(*) as freq
from     MY_BASE_TABLE svc
where exists(
    select 1
    from   MY_TARGET_TABLE x
    where  x.srv_accs_id=svc.srv_accs_id)
group by 1
order by 1 
```

两个表上的主索引（唯一）是“srv_accs_id”。MY_BASE_TABLE 相当大（2 亿行），而 MY_TARGET_TABLE 相对较小（200,000 行）。

EXPLAIN 计划有一个显着的区别：第一个说两个表是**“通过 RowHash 匹配扫描”**连接的，第二个说**“通过所有行扫描”**。两者都说这是**“一个全 AMP 加入步骤”**，并且估计的总时间是相同的（0.32 秒）。

两个查询执行相同（我使用的是 Teradata 13.10）。

一个类似的实验来查找不匹配项，将 LEFT OUTER JOIN 与相应的 IS NULL where 子句与 NOT EXISTS 子查询进行比较，确实显示了性能差异：

```
select   svc.ltv_scr, count(*) as freq
from     MY_BASE_TABLE svc
left outer join MY_TARGET_TABLE x
on       x.srv_accs_id=svc.srv_accs_id
where    x.srv_accs_id is null
group by 1
order by 1 
```

-和-

```
select   svc.ltv_scr, count(*) as freq
from     MY_BASE_TABLE svc
where not exists(
    select 1
    from   MY_TARGET_TABLE x
    where  x.srv_accs_id=svc.srv_accs_id)
group by 1
order by 1 
```

第二个查询计划更快（2.21 对 2.14 秒，如 EXPLAIN 所述）。

我的例子可能太微不足道了，看不出有什么区别；我只是在寻找编码指导。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T18:35:42.573

NOT EXISTS 比使用 LEFT OUTER JOIN 更有效地排除使用 IS NULL 条件从参与表中丢失的记录，因为优化器将选择使用带有 NOT EXISTS 谓词的 EXCLUSION MERGE JOIN。

虽然您的第二次测试没有为您使用的数据集产生令人印象深刻的结果，但随着数据量的增加，从 NOT EXISTS over LEFT JOIN 的性能提升非常明显。请记住，表需要由参与 NOT EXISTS 连接的列进行散列分布，就像它们在 LEFT JOIN 中一样。因此，数据倾斜会影响 EXCLUSION MERGE JOIN 的性能。

**编辑：**

Typically, I would defer to EXISTS as a replacement for IN instead of using it for re-writing a join solution. This is especially true when the column(s) participating in the logical comparison can be NULL. That's not to say you couldn't use EXISTS in place of an INNER JOIN. Instead of an EXCLUSION JOIN you will end up with an INCLUSION JOIN. The INNER JOIN is in essence an inclusion join to begin with. I'm sure there are some nuances that I am overlooking but you can find those in the manuals if you wish to take the time to read them.