# StackOverflow 问答 12513000-12513999

# php - SimpleXMLElement 对象的访问属性

> ID：12513002
> 
> 赞同：0
> 
> 时间：2012-09-20T12:51:09.093
> 
> 标签：php, xml, arrays, simplexml

我得到了这个对象：

```
SimpleXMLElement Object\n(\n    
[@attributes] => Array\n        (\n            
  [article_number] => 550007\n        )\n\n    
[serial_number] => Array\n        (\n            
   [0] => 5500070000126237\n            
   [1] => 5500070000126246\n            
   [2] => 5500070000126255\n            
   [3] => 5500070000126264\n            
   [4] => 5500070000126273\n        )\n\n)\n 
```

我想访问这样的属性，但它似乎不起作用：

```
foreach ($product_array as $codes) 
{    
    error_log($codes->product[0]->attributes()->article_number);    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:54:02.037

```
$codes->product[0]['article_number'] 
```

这应该有效。

# jquery - 为什么使用 gridview:true 以及它是什么意思？

> ID：12513004
> 
> 赞同：10
> 
> 时间：2012-09-20T12:51:27.723
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我正在研究 JqGrid。

我想知道如果我们指定`gridview:true`.

在什么情况下我们需要提供？

我最近正在研究一个这样的 jqGrid 并且我`afterInsertRow`没有被调用，一旦我删除了`gridview:true`现在调用。

这是我自己经历过的一个案例，我想知道是否还有其他案例我们应该知道是否`gridview:true`使用过。

请指导我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T19:48:27.033

我同意该`gridview: true`选项在文档中没有得到很好的解释。在某些情况下（例如在 TreeGrid 的情况下）该选项将被自动设置。因此，我尝试解释它的含义以及为什么我建议始终使用该`gridview: true`选项和从不使用`afterInsertRow`.

许多人从其他一些计算机语言开始，例如 JavaScript，并在他们具有某种程序编写风格后编写了他的第一个在 Web 浏览器中运行的程序。3年前我有同样的问题。**在对 HTML 页面进行一些更改后，了解 Web 浏览器必须执行的操作非常重要**。在使用 jQuery 时，这是你永久要做的事情。

如果您更改页面上的某些 DOM 元素，则可以更改页面上存在的所有其他 DOM 元素的位置。如果您考虑浮动模型（如 with `float: left`）或许多其他 CSS 设置，您将了解 Web 浏览器不能仅移动现有页面的位图表示并插入新插入的元素。因此*，网络浏览器必须重新计算页面上存在的所有元素的位置，并从另一个位置的元素中移动一些元素*。即使您更改元素的 CSS 样式，也会发生所谓的重排。我建议您阅读[文章](https://developers.google.com/speed/articles/reflow)并观看有关该主题的视频。

在上述情况下，提高网络浏览器性能的主要思想是**减少**页面上的更改次数。因此，您是否需要更改一个 DOM 元素的 5 种样式，您应该在一次操作中执行此操作。您可以使用`jQuery.css({...})`所有更改的样式，而不是 5 个单独的调用。更好的办法是定义一个 CSS 类和使用`jQuery.addClass`方法。

在 jqGrid 的情况下，需要填充`<tbody>`网格的所有行和单元格。如果您使用`gridview: true`选项，则 jqGrid 将所有行的内容收集为带有 HTML 片段的字符串。`jQuery.append`稍后在设置内部属性[的行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L1424)中调用 jqGrid`innerHTML`以设置页面上的整个 HTML 片段。

由于同样的原因，您应该使用与 HTML 片段一起使用的[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)`cellattr`将单元格`rowattr`或行表示*为字符串*。最后，这些字符串将被附加到其他字符串，并将像我上面描述的那样在操作中使用。*`jQuery.append`*

 *回调函数的使用要求在调用回调之前`afterInsertRow`将网格的每一行*放置*在页面上。`afterInsertRow`因此，无法使用`gridview: true`选项并使页面的工作缓慢。

确切地说，我应该提到我之前描述的性能下降只有在大网格的情况下才可见，并且在网络浏览器速度较慢的情况下（如 Internet Explorer，尤其是旧版本的 IE）大部分情况下都可以清楚地看到。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T19:22:34.530

根据[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions&s%5B%5D=gridview)`gridview`文档：

> 在包括 3.4.X 在内的 jqGrid 之前的版本中，读取相对较大的数据集（行数 >= 100 ）会导致速度问题。这样做的原因是，当每个单元格被插入到网格中时，我们对其应用了大约 5 到 6 次 jQuery 调用。现在这个问题解决了；我们现在使用 jQuery 追加一次插入条目行。结果令人印象深刻 - 大约快 3 到 5 倍。如果我们一次插入所有数据，结果会怎样？是的，这可以在 gridview 选项的帮助下完成（将其设置为 true）。结果是网格速度提高了 5 到 10 倍。当然，当此选项设置为 true 时，我们会有一些限制。**如果设置为 true，我们将无法使用 treeGrid、subGrid 或 afterInsertRow 事件**. 如果您不在网格中使用这三个选项，您可以将此选项设置为 true 并享受速度。

因此，通过使用此选项，您可以获得不错的速度提升，但需要注意的是它与 treeGrid、subGrid 或`afterInsertRow`. 我相信这就是局限的程度。如果您发现更多，请告诉我们，以便更新文档。

* * *

对于它的价值，您实际上可以看到方法中的[特定情况](https://github.com/tonytomov/jqGrid/blob/master/js/grid.base.js#L1232) 以及跳过的位置：`grid.base.js``addXmlData``addJSONData``afterInsertRow`

```
if(ts.p.gridview === false ) {
    $("tbody:first",t).append(rowData.join(''));
    $(ts).triggerHandler("jqGridAfterInsertRow", [rid, rd, xmlr]);
    if(afterInsRow) {ts.p.afterInsertRow.call(ts,rid,rd,xmlr);}
    rowData=[];
} 
```

treeGrid 和 subGrid 的限制更加微妙，并且没有在代码中显式调用。*

# c++ - 在 GDB 中打印自动变量的类型和模板函数/方法的原型

> ID：12513009
> 
> 赞同：2
> 
> 时间：2012-09-20T12:51:37.970
> 
> 标签：c++, debugging, c++11, gdb

出于演示目的，我需要打印`auto`模板函数和方法的变量类型和原型。

如何在 GDB 中实现这一点？或者有没有更好的方法来获取这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:56:48.643

快速搜索出现了[这个页面](http://www.delorie.com/gnu/docs/gdb/gdb_116.html)，它显示了`whatis`命令。似乎在 GDB 7.0.1 版中对我有用。

# javascript - 灯箱中的图像顺序

> ID：12513011
> 
> 赞同：1
> 
> 时间：2012-09-20T12:51:55.083
> 
> 标签：javascript, jquery, lightbox

从这里获得帮助后，我的 Lightbox 工作正常。谢谢！

我不得不重新排序页面上的缩略图，[http://www.deccardy.com/portfolio-field-house.html](http://www.deccardy.com/portfolio-field-house.html)以使这些对查看者有意义。

是否可以按照 1-6-2-7-3-8-4-9 等的顺序重新排序图像？

这就是当前剩余的投资组合页面的排列方式（不带灯箱），以便之前/之后的图像在彼此上方/下方。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:07:49.083

只需更改图像的顺序。

# c++ - 使用大小为 4 的倍数的 freetype 生成位图

> ID：12513018
> 
> 赞同：0
> 
> 时间：2012-09-20T12:52:37.020
> 
> 标签：c++, size, freetype

我想用 FreeType 创建字形位图，其大小（宽度和高度）保证为 4 的倍数。有什么方法可以用 FreeType 做到这一点？

我想要它的原因是因为我正在从单色位图生成有符号距离场。我使用的算法更适用于较大的源图像，然后我将其缩小 4 倍。

如果有帮助，我正在用 C++11 编程。

# php - 哪个更快：从 $_SESSION 或从 json 文件获取数组？

> ID：12513019
> 
> 赞同：0
> 
> 时间：2012-09-20T12:52:38.377
> 
> 标签：php, json, file-io, session-variables

这是我的困境：

我正在创建一个多语言平台。为此，我创建了 json 文件，其中包含每种语言的所有翻译文本。

现在，当用户登陆他们的页面时，我从该文件中读取并将翻译数组存储在 $_SESSION 变量中，例如

```
$_SESSION['website_text'] = json_decode(file_get_contents("content_".$language.".json"), true); 
```

然后每次我想在视图上回显文本时，我都会从会话数组中访问元素：

```
$text = $_SESSION['website_text']['paragraph2_headline']; 
```

现在我想知道，因为 $_SESSION 存储在服务器上。像我一样从会话中读取还是每次从文件中读取并解码 json 更快？第二种选择是这样的：

```
$website_text = json_decode(file_get_contents("content_".$language.".json"), true);
$text =  $website['paragraph2_headline']; 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:55:00.997

从 中提取数据很可能会更快`$_SESSION`，但`$_SESSION`不是存储本地化数据的好地方，因为它最终会为每个用户复制。

当您从中检索字符串时，`$_SESSION`PHP 必须从会话文件中读取数据（它已经读取任何其他会话数据，因此打开文件的成本在一定程度上摊销了）并`unserialize`在其上运行；如果您从 JSON 文件中检索它，则它已打开文件，读取并运行`json_decode`. `unserialize`应该比 快`json_decode`，但请不要引用我的话。

如果您有兴趣加快速度，最好直接从 PHP 文件中读取字符串，并将它们存储为数组：

```
// content_en.php
<?php
return array(
    'welcome' => 'Welcome to our website!',
    // ...
); 
```

即使您的本地化文件是 JSON，也很容易将 JSON“编译”成 PHP 并将 PHP 代码用作缓存：

```
$lang = 'en';

$sourceFile = 'content_'.$lang.'.json';
$cacheFile = 'content_'.$lang.'.cache.php';
if (!is_file($cacheFile)) {
    $content = json_decode(file_get_contents($sourceFile), true);
    file_put_contents($cacheFile, "<?php\n return ".var_export($content, true).";");
}
else {
    $content = include($cacheFile);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:58:40.450

我对 JSON 不太了解，但我知道将`$_SESSION`其保存为服务器上的文件

```
file_put_contents($path, serialize($_SESSION)); 
```

并读为

```
$_SESSION = unserialize(file_get_contents($path)); 
```

是的，正如 Jon 所说，如果您有速度，请将其格式化为原生 PHP 代码，或者我们可以在此示例中将数据另存为 PHP 文件。

```
function save_data($path,$data) {
     file_put_contents($path, "<?php $data=unserialize('".addslashes(serialize($data))."'); ?>");
} 
```

而对于加载，这只是包含文件，然后从 $data 获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:06:30.400

在您给我们的两个示例中，您将本地化数据存储在文件中，但以不同的方式处理它们，一种在变量中，另一种在会话中。

问题应该是“如何有效地处理本地化数据”

# coffeescript - 咖啡脚本中的可选括号

> ID：12513020
> 
> 赞同：0
> 
> 时间：2012-09-20T12:52:42.497
> 
> 标签：coffeescript

我注意到 Coffeescript 中的可选括号引入了句法歧义。例如，代码

```
prompt Math.max(2), 3      # no space after max 
```

编译为

```
prompt(Math.max(2), 3);    // one parameter to max(), two to prompt() 
```

然而

```
prompt Math.max (2), 3     # space after max 
```

编译为

```
prompt(Math.max(2., 3));    // two parameters to max(), one to prompt() 
```

即在参数列表之前添加一个空格会改变参数的分组。

这是故意的吗？语言中是否还有其他地方可以使空格产生句法差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:17:21.723

是的，这是故意的。

CofeeScript 中变量后的空格表示：“将以下参数列表应用于此函数。

让我们看看你的代码：

```
prompt Math.max(2), 3 
```

这意味着：“适用于`prompt`两个参数：`Math.max(2)`和`3`”。

```
prompt Math.max (2), 3 
```

这意味着：“应用于`Math.max`两个参数：`(2)`and `3`，然后将结果应用于`prompt`”。

让我们看看更复杂的例子：

```
my_function (obj = other_function 1, 2), some_var 
```

在此示例中，括号是必需的。

此功能允许您以两种方式编写相同的代码：

```
my_function (my_array.map (x) -> do_smth x), some_var 
```

是相同的

```
my_function my_array.map((x) -> do_smth x), some_var 
```

我不知道该语言中的任何其他地方，其中空格会产生句法差异。但是有一个地方，括号会有所不同：

```
my_object = one: two: three: 'three', four: 'four'
=>
my_object = {one: {two: {three: 'three', four: 'four'}}} 
```

和

```
my_object = one: {two: three: 'three'}, four: 'four'
=>
my_object = {one: {two: {three: 'three'}, four: 'four'}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:17:39.263

在您的示例中，括号的含义完全不同。

```
prompt Math.max(2), 3 
```

在这里，您`max`使用唯一的参数调用该函数`2`。括号是函数调用的一部分。很明显，`max`将使用此参数调用。

```
prompt Math.max (2), 3 
```

在这种情况下，括号是*表达式* `(2)`的一部分，将被简化为`2`。您省略了函数调用的可选括号。

那么，这是故意的吗？是的，我会这么说，没有太多不同的解释空间。如需进一步参考，请[参阅 coffeescript style guide](https://github.com/polarmobile/coffeescript-style-guide)。它没有明确提到函数名和它的括号之间不应该有空格，但是所有的例子都是这样写的。

# php - 在表格中显示数组值

> ID：12513026
> 
> 赞同：0
> 
> 时间：2012-09-20T12:52:56.817
> 
> 标签：php

我想在表格中显示数组中的值，我尝试搜索，但都不起作用，这是代码段

```
$host="localhost";
$username="root";
$password="";
$db_name="sampledb";
$tbl_name="tblsched";
$cd1 = date("Y-m-d");
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$sql = "SELECT * FROM tblteacher WHERE teacherName='$uname'";
$result=mysql_query($sql);
$row = mysql_fetch_assoc($result);

$teacherid  = $row['teacherID'];

function mymainfunc()
{
global $uname;
global $teacherid;
$bgcolor="#ADDFFF";
$tdali="center";
dateto();
datefrom();
$arrayto[] = array();
$arrayfrom[] = array();
$arrayto[] = dateto();
$arrayfrom[] = datefrom();
$x=0;
while($x<count($arrayto[]))
{
echo "<tr>";
echo "<td align=$tdali bgcolor=$bgcolor>$arrayfrom[$x] - $arrayto[$x]</td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>"; 
echo "</tr>";

$x++;
}
}
function dateto()
{
global $uname;
global $cd1;
global $teacherid;
$sql="SELECT SchedTimeTo FROM tblsched WHERE SchedTeacherID=$teacherid and SchedDateFrom<='$cd1' and SchedDateTo>='$cd1' ";
$result=mysql_query($sql);

if($result === FALSE) {
die(mysql_error());
}

$count=mysql_num_rows($result);
$row = mysql_fetch_array($result);

$STF = array();
while($row=mysql_fetch_array($result))
  {
  $STF[] = $row;
}

return $STF;
}

function datefrom()
{
global $uname;
global $cd1;
global $teacherid;
$sql="SELECT SchedTimeFrom FROM tblsched WHERE SchedTeacherID=$teacherid and SchedDateFrom<='$cd1' and SchedDateTo>='$cd1' ";
$result=mysql_query($sql);

if($result === FALSE) {
die(mysql_error());
}

$row = mysql_fetch_array($result);

$STF = array();
while($row=mysql_fetch_array($result))
  {
  $STF[] = $row;
  }

return $STF;
} 
```

关于如何在不同的单元格中显示每个数组值的任何建议，每个单元格将包含来自数组的不同值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:58:19.873

删除第一个：

```
$row = mysql_fetch_array($result); 
```

然后添加一个：

```
var_dump($STF); 
```

在函数中的每个 while 循环之后。这将帮助您了解它如何更好地工作，并希望该变量充满了很多好东西！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:59:03.703

像这样使用

```
for($x=0;$x<count($arrayto);$x++)
{
echo "<tr>";
echo "<td align=$tdali bgcolor=$bgcolor>$arrayfrom[$x] - $arrayto[$x]</td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>";
echo "<td align=$tdali> </td>"; 
echo "</tr>"; 
```

}

不要使用 $array[] 进行分配，它需要传递给它的任何值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:09:34.190

```
 $sql=mysql_query("select  * from tblname");
    while($row=mysql_fetch_array($sql))
        {
            echo "<td>".$row["id"];
            echo "<td>".$row["name"];
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:01:31.997

循环遍历 $STF 数组，并使用 for 循环回显结果。

```
for ($STF as $r) 
{ 
  echo '<td>' .$r["whatever data you want to display here"] .'</td>';
} 
```

# php - 将 parameters.ini 中的多个参数注入服务

> ID：12513032
> 
> 赞同：0
> 
> 时间：2012-09-20T12:53:19.357
> 
> 标签：php, symfony, dependency-injection

我正在寻找一种将多个参数从 parameters.ini 发送到服务的美丽方式。

实际上，要向我的服务发送 10 个参数，我的构造函数中需要 10 个参数，这不是很漂亮。我的代码实际上从第 350 行开始（包含所有属性和文档），我对此并不满意。

根据[这个](https://stackoverflow.com/questions/9299981/symfony2-how-to-inject-all-parameters-in-a-service)答案，我可以注入@kernel 服务，但这是一个非常糟糕的做法。

你对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:59:52.677

您可以将单个参数作为更多服务和参数的关联数组传递。

# compact-framework - 缺少 OpenNetCF.Net.NetworkInformation.Adapter 类

> ID：12513035
> 
> 赞同：0
> 
> 时间：2012-09-20T12:53:30.793
> 
> 标签：compact-framework, opennetcf

我已经下载了 OpenNETCF 的智能设备框架，但两者都

`OpenNETCF.Net.NetworkInformation.Adapter`

和

`OpenNETCF.Net.NetworkInformation.AdapterCollection`

产生一个

来自编译器的“命名空间丢失或不可用”错误。

我正在使用 OpenNetCF.Net 版本 2.3.1.12004.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:35:55.313

在我清理大量冗余之前，这些来自旧的 1.4 版本。你想要的是这样的：

```
var adapters = OpenNETCF.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-10T12:48:38.537

Adapter 和 AdaptorCollection 类是 Opennetcf.net 的旧版本。

较新的版本包含 AccessPoint 和 AccessPointCollection。

但是，您可以像这样使用适配器，

```
INetworkInterface[] nics = NetworkInterface.GetAllNetworkInterfaces(); 
```

然后，您可以根据`using OpenNETCF.Net.NetworkInformation;`网络接口的类型对 nics 进行类型化，例如 wirelessNetworkInterface、wirelessZeroConfiguredNetworkInterface 等。

# javascript - 如何根据div大小调整图像大小？

> ID：12513041
> 
> 赞同：0
> 
> 时间：2012-09-20T12:53:56.257
> 
> 标签：javascript, jquery, html, jquery-mobile

我的 HTML5 代码是

```
 <div id="changeimg" align="center">
           <div id="imgbutton" onclick="changeimg()"/>
    </div> 
```

我的CSS是

```
 #imgbutton
   {
     background-image:url('../images/tab1.png'); 
     height:35px;
     width:269px;
     border-radius:8px;
     margin-left:6%;
   }
    #changeimg
   {
     width:80%;
     height:50px;
     margin-left:5%;
     padding-top: 12px;
     z-index: 1;
  } 
```

在图像按钮 div 中，我在背景中使用图像，我想在更改屏幕尺寸时根据更改图像 div 调整图像。有人可以帮我吗？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:02:10.007

也许这篇文章对你来说很有趣：[使用 CSS 设置背景图像的大小？](https://stackoverflow.com/questions/1341358/set-size-on-background-image-with-css)

这个任务只能通过使用 CSS3 来完成。不支持“背景尺寸”的浏览器不会缩放背景！

```
background-size: 100% auto; // 100% width and auto height, keeping aspect ratio
background-size: auto 100%; // 100% height and auto width, keeping aspect ratio
background-size: 100% 100%; // 100% width and height, aspect ratio will be lost 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:12:16.163

我仍然不知道您为什么要为图像使用 div 。

```
<div id="changeimg" align="center">
    <img id="imgbutton" src="../images/tab1.png" onclick="changeimg()" />
</div> 
```

这个CSS

```
#imgbutton
{
  height:100%; /*I'm not 100% sure, but leaving height out might maintain aspect ratio*/
  width:100%;
  border-radius:8px;
  margin-left:6%;
}
#changeimg
{
  width:80%;
  height:50px;
  margin-left:5%;
  padding-top: 12px;
  z-index: 1;
} 
```

# firefox - 使用 css 的下拉菜单！不适用于FF

> ID：12513047
> 
> 赞同：0
> 
> 时间：2012-09-20T12:54:10.170
> 
> 标签：firefox, focus

就像标题说的那样，
我创建了一个下拉菜单，从 display:none; 显示：块；
单击父 li 元素时。

当涉及到测试时，它似乎可以与 Safari 和 Chrome 一起正常工作。
使用 IE & FF 进行测试时，预期的结果只有在您点击
li#mtfw 范围的底部时才会触发，当您使用 Safari 点击链接时，无论
您点击哪里都会出现下拉菜单！这是示例页面和 css 代码 [http://www.incapsulatest.tk/test/example.html](http://www.incapsulatest.tk/test/example.html)

PS 在非输入类型上使用 :focus 选择器是可能的，因为我在元素上使用了 tabindex。

# asp.net - 我的第一个 linq conncetion，不会连接到中继器

> ID：12513051
> 
> 赞同：0
> 
> 时间：2012-09-20T12:54:16.460
> 
> 标签：asp.net, vb.net, linq

希望有人可以帮助我解决这个问题。我试图从 mdf 数据库中获取数据到转发器中。

我创建了名为“Thedatabaseconnection.dbml”的 dbml 文件，我有 web.config 文件，其中有一个名为“masterDBConnectionString”的连接字符串。

我有这个 vb 类文件。

```
Imports Microsoft.VisualBasic
Imports System.Web

Public Class connectionDBtesttable

Private _testId As Integer
Private _testCat As String
Private _testInfo As String
Private _testNumbers As Integer
Private _testDate As Date

Public Property test_id() As Integer
    Get
        Return _testId
    End Get

    Set(value As Integer)
        _testId = value
    End Set
End Property

Public Property test_cat() As String
    Get
        Return _testCat
    End Get

    Set(value As String)
        _testCat = value
    End Set
End Property

Public Property test_info() As String
    Get
        Return _testInfo
    End Get

    Set(value As String)
        _testInfo = value
    End Set
End Property

Public Property test_numbers() As Integer
    Get
        Return _testNumbers
    End Get

    Set(value As Integer)
        _testNumbers = value
    End Set
End Property

Public Property test_datetime() As Date
    Get
        Return _testDate
    End Get

    Set(value As Date)
        _testDate = value
    End Set
End Property

End Class 
```

我有这个 code_behind

```
Imports System
Imports System.Linq

Partial Class _default
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        Call linqdb()
    End If
End Sub

Private Sub linqdb()
    Using datacontext As New ThedatabaseconnectionDataContext()
        Dim query = From a In datacontext.GetTable(Of testtable)() _
                    Order By a.test_id Descending _
                    Select a

        Repeater1.DataSource = query.ToList
        Repeater1.DataBind()
    End Using
End Sub

End Class 
```

我有这个主页

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="default.aspx.vb" Inherits="_default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:Repeater ID="Repeater1" runat="server">
    </asp:Repeater>
</div>
</form>
</body>
</html> 
```

但我无法将数据库中的数据导入repeater1...有人可以帮我吗，这是我的第一个LinQ 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:01:36.363

您尚未指定应为转发器中的每个项目呈现什么标记。例如，尝试如下更改您的标记：

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        Info: <%# Eval("test_info") %>
        Date: <%# Eval("test_datetime") %>
    </ItemTemplate>
</asp:Repeater> 
```

这将简单地呈现从数据库返回的每个项目的信息和日期。如果您愿意，可以指定更复杂的标记。有关此主题的更多信息，您可以查看[有关中继器控件的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)。

# ruby-on-rails - 如何制作一个简单的点“。” 在 HAML 中？

> ID：12513054
> 
> 赞同：25
> 
> 时间：2012-09-20T12:54:27.433
> 
> 标签：ruby-on-rails, haml

在我的 Ruby on Rails 项目中，我使用 HAML，我需要翻译这样的内容

```
<div>foo <a>bar</a>.<div> 
```

进入 HAML。它应该看起来像：

```
.divclass
  foo
  %a bar
  . 
```

开始时的时间段不起作用，因为它被 HAML 使用。那么如何使用句号作为内容呢？

即使围绕它不工作建立一个跨度，这个时期再次被视为特殊的东西。

我认为有一个逃生机制，但我找不到它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-20T12:56:50.420

它与`\`

像这样

```
\. 
```

请参阅HAML 参考中的[转义 \](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#escaping_)。

**更新：**如果您需要在句尾添加一个点（以防止不必要的空格），则使用 HAML `succeed`（如[本答案所示）是一个更好的解决方案。](https://stackoverflow.com/a/18346789/212245)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-20T23:56:01.743

更好的方法：

```
%p
  This sentence ends with a link which is *just* before a period
  = succeed "." do
    %a{:href => "#"} link
  But the period wasn't included with the link and there was no space before the period. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-18T17:49:34.523

您还可以访问 :plain 过滤器，如下所示：

```
%p 
  :plain
    . 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-19T16:14:14.683

我将使用 Rails 的内置`link_to`帮助程序添加另一个选项，而不是手动创建链接。然后你可以简单地做

```
%p
  This sentence ends with a link which is *just* before a period
  #{ link_to "link", "#" }. 
```

不同的解决方案将在不同的地方工作，但我发现这很干净，特别是如果已经使用`link_to`or`mail_to`等​​。

# actionscript-3 - 嵌入 Flash 应用程序的 IE9 上的浏览 器 srcolling 问题

> ID：12513056
> 
> 赞同：0
> 
> 时间：2012-09-20T12:54:33.103
> 
> 标签：actionscript-3, flash, scroll, focus, internet-explorer-9

有谁知道当 Flash 应用程序需要箭头键输入时防止浏览器在 IE9 桌面模式下滚动的解决方案？

在以前的 IE 版本中，通过将 Wmode 设置为“直接”或完全关闭它来防止这种情况发生。这将使应用程序获得焦点而不是浏览器窗口。

但是，这在 IE9 的预览版中并没有发生。无论如何，浏览器都会保持焦点，因此如果按下箭头键，窗口就会移动。这对于游戏来说显然是可怕的。

而且我知道解决方案应该是放弃 Flash 并使用 HTML5，但仍然有很多基于 Flash 的游戏。任何潜在的解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:01:12.773

我假设您指的是*Flash 没有在页面加载时获得键盘焦点的问题。*

如果是这种情况，请尝试[此处](http://helpx.adobe.com/flash/kb/give-keyboard-focus-embedded-movie.html)`focus()`指定的 javascript 事件。

# android - 在按钮单击时滚动 ListView

> ID：12513060
> 
> 赞同：2
> 
> 时间：2012-09-20T12:54:50.937
> 
> 标签：android, listview

我开发了一个应用程序，我在其中使用水平`ListView`显示内容（实际上这个内容适用于标题）。我使用了两个按钮来左右滚动以查看更多内容。我对此感到困惑，任何人都可以建议我如何解决这个问题呢 ？**谢谢**

**Horizo​​ntalListView的代码**

```
public class HorizontialListView extends AdapterView<ListAdapter> {

    public boolean mAlwaysOverrideTouch = true;
    protected ListAdapter mAdapter;
    private int mLeftViewIndex = -1;
    private int mRightViewIndex = 0;
    protected int mCurrentX;
    protected int mNextX;
    private int mMaxX = Integer.MAX_VALUE;
    private int mDisplayOffset = 0;
    protected Scroller mScroller;
    private GestureDetector mGesture;
    private Queue<View> mRemovedViewQueue = new LinkedList<View>();
    private OnItemSelectedListener mOnItemSelected;
    private OnItemClickListener mOnItemClicked;
    private boolean mDataChanged = false;

    public HorizontialListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initView();
    }

    private synchronized void initView() {
        mLeftViewIndex = -1;
        mRightViewIndex = 0;
        mDisplayOffset = 0;
        mCurrentX = 0;
        mNextX = 0;
        mMaxX = Integer.MAX_VALUE;
        mScroller = new Scroller(getContext());
        mGesture = new GestureDetector(getContext(), mOnGesture);
    }

    @Override
    public void setOnItemSelectedListener(
            AdapterView.OnItemSelectedListener listener) {
        mOnItemSelected = listener;
    }

    @Override
    public void setOnItemClickListener(AdapterView.OnItemClickListener listener) {
        mOnItemClicked = listener;
    }

    private DataSetObserver mDataObserver = new DataSetObserver() {

        @Override
        public void onChanged() {
            synchronized (HorizontialListView.this) {
                mDataChanged = true;
            }
            invalidate();
            requestLayout();
        }

        @Override
        public void onInvalidated() {
            reset();
            invalidate();
            requestLayout();
        }

    };

    @Override
    public ListAdapter getAdapter() {
        return mAdapter;
    }

    @Override
    public View getSelectedView() {
        // TODO: implement
        return null;
    }

    @Override
    public void setAdapter(ListAdapter adapter) {
        if (mAdapter != null) {
            mAdapter.unregisterDataSetObserver(mDataObserver);
        }
        mAdapter = adapter;
        mAdapter.registerDataSetObserver(mDataObserver);
        reset();
    }

    private synchronized void reset() {
        initView();
        removeAllViewsInLayout();
        requestLayout();
    }

    @Override
    public void setSelection(int position) {
        // TODO: implement
    }

    private void addAndMeasureChild(final View child, int viewPos) {
        LayoutParams params = child.getLayoutParams();
        if (params == null) {
            params = new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.FILL_PARENT);
        }

        addViewInLayout(child, viewPos, params, true);
        child.measure(
                MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST),
                MeasureSpec.makeMeasureSpec(getHeight(), MeasureSpec.AT_MOST));
    }

    @Override
    protected synchronized void onLayout(boolean changed, int left, int top,
            int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        if (mAdapter == null) {
            return;
        }

        if (mDataChanged) {
            int oldCurrentX = mCurrentX;
            initView();
            removeAllViewsInLayout();
            mNextX = oldCurrentX;
            mDataChanged = false;
        }

        if (mScroller.computeScrollOffset()) {
            int scrollx = mScroller.getCurrX();
            mNextX = scrollx;
        }

        if (mNextX < 0) {
            mNextX = 0;
            mScroller.forceFinished(true);
        }
        if (mNextX > mMaxX) {
            mNextX = mMaxX;
            mScroller.forceFinished(true);
        }

        int dx = mCurrentX - mNextX;

        removeNonVisibleItems(dx);
        fillList(dx);
        positionItems(dx);

        mCurrentX = mNextX;

        if (!mScroller.isFinished()) {
            post(new Runnable() {
                @Override
                public void run() {
                    requestLayout();
                }
            });

        }
    }

    private void fillList(final int dx) {
        int edge = 0;
        View child = getChildAt(getChildCount() - 1);
        if (child != null) {
            edge = child.getRight();
        }
        fillListRight(edge, dx);

        edge = 0;
        child = getChildAt(0);
        if (child != null) {
            edge = child.getLeft();
        }
        fillListLeft(edge, dx);

    }

    private void fillListRight(int rightEdge, final int dx) {
        while (rightEdge + dx < getWidth()
                && mRightViewIndex < mAdapter.getCount()) {

            View child = mAdapter.getView(mRightViewIndex,
                    mRemovedViewQueue.poll(), this);
            addAndMeasureChild(child, -1);
            rightEdge += child.getMeasuredWidth();

            if (mRightViewIndex == mAdapter.getCount() - 1) {
                mMaxX = mCurrentX + rightEdge - getWidth();
            }
            mRightViewIndex++;
        }

    }

    private void fillListLeft(int leftEdge, final int dx) {
        while (leftEdge + dx > 0 && mLeftViewIndex >= 0) {
            View child = mAdapter.getView(mLeftViewIndex,
                    mRemovedViewQueue.poll(), this);
            addAndMeasureChild(child, 0);
            leftEdge -= child.getMeasuredWidth();
            mLeftViewIndex--;
            mDisplayOffset -= child.getMeasuredWidth();
        }
    }

    private void removeNonVisibleItems(final int dx) {
        View child = getChildAt(0);
        while (child != null && child.getRight() + dx <= 0) {
            mDisplayOffset += child.getMeasuredWidth();
            mRemovedViewQueue.offer(child);
            removeViewInLayout(child);
            mLeftViewIndex++;
            child = getChildAt(0);

        }

        child = getChildAt(getChildCount() - 1);
        while (child != null && child.getLeft() + dx >= getWidth()) {
            mRemovedViewQueue.offer(child);
            removeViewInLayout(child);
            mRightViewIndex--;
            child = getChildAt(getChildCount() - 1);
        }
    }

    private void positionItems(final int dx) {
        if (getChildCount() > 0) {
            mDisplayOffset += dx;
            int left = mDisplayOffset;
            for (int i = 0; i < getChildCount(); i++) {
                View child = getChildAt(i);
                int childWidth = child.getMeasuredWidth();
                child.layout(left, 0, left + childWidth,
                        child.getMeasuredHeight());
                left += childWidth;
            }
        }
    }

    public synchronized void scrollTo(int x) {
        mScroller.startScroll(mNextX, 0, x - mNextX, 0);
        requestLayout();
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        boolean handled = mGesture.onTouchEvent(ev);
        return handled;
    }

    protected boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        synchronized (HorizontialListView.this) {
            mScroller.fling(mNextX, 0, (int) -velocityX, 0, 0, mMaxX, 0, 0);
        }
        requestLayout();

        return true;
    }

    protected boolean onDown(MotionEvent e) {
        mScroller.forceFinished(true);
        return true;
    }

    private OnGestureListener mOnGesture = new GestureDetector.SimpleOnGestureListener() {

        @Override
        public boolean onDown(MotionEvent e) {
            return HorizontialListView.this.onDown(e);
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            return HorizontialListView.this.onFling(e1, e2, velocityX,
                    velocityY);
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,
                float distanceX, float distanceY) {

            synchronized (HorizontialListView.this) {
                mNextX += (int) distanceX;
            }
            requestLayout();

            return true;
        }

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {
            Rect viewRect = new Rect();
            for (int i = 0; i < getChildCount(); i++) {
                View child = getChildAt(i);
                int left = child.getLeft();
                int right = child.getRight();
                int top = child.getTop();
                int bottom = child.getBottom();
                viewRect.set(left, top, right, bottom);
                if (viewRect.contains((int) e.getX(), (int) e.getY())) {
                    if (mOnItemClicked != null) {
                        mOnItemClicked.onItemClick(HorizontialListView.this,
                                child, mLeftViewIndex + 1 + i,
                                mAdapter.getItemId(mLeftViewIndex + 1 + i));
                    }
                    if (mOnItemSelected != null) {
                        mOnItemSelected.onItemSelected(
                                HorizontialListView.this, child, mLeftViewIndex
                                        + 1 + i,
                                mAdapter.getItemId(mLeftViewIndex + 1 + i));
                    }
                    break;
                }

            }
            return true;
        }

    };

} 
```

**xml代码**

```
<com.ui.HorizontialListView
            android:id="@+id/listview"
            android:layout_width="fill_parent"
            android:layout_height="30dp"
            android:layout_centerInParent="true"
            android:layout_toLeftOf="@+id/rightcorv"
            android:layout_toRightOf="@+id/leftcorv" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-21T11:04:49.620

```
private void startScroll(AbsListView view)
{
    try
    {
        Field field = android.widget.AbsListView.class.getDeclaredField("mFlingRunnable");
        field.setAccessible(true);
        Object flingRunnable = field.get(view);
        if (flingRunnable != null)
        {
            Method method = Class.forName("android.widget.AbsListView$FlingRunnable").getDeclaredMethod("endFling");
            method.setAccessible(true);
            method.invoke(flingRunnable);
        }
    }
    catch (Exception e) {}
}

Just call startScroll(myListView); when you need to start scroll. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:05:10.713

试试这个代码，这可能会对你有所帮助。

```
int index = mList.getFirstVisiblePosition();
View view = mList.getChildAt(0);
int top = (view == null) ? 0 : view.getTop();

// restore
mList.setSelectionFromTop(index, top); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:57:26.677

您可能希望使用 setSelection() 方法，而不是每次将列表滚动 100 像素。向下滚动时增加选择，向上滚动时减少选择。这将确保单击正确的项目。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:21:17.030

对于上一个，请参阅 BtnPrev，对于下一个，请参阅 btnNext R.id.lv 是您的列表视图的 id。

```
Button btnPrev = (Button) findViewById(R.id.button1);
    btnPrev.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ListView lv = (ListView) findViewById(R.id.lv);

            int firstVisibleItem = lv.getFirstVisiblePosition();
            int lastVisibleCount = lv.getLastVisiblePosition();
            if (firstVisibleItem != 0) {
                int count1 = firstVisibleItem
                        - (lastVisibleCount - firstVisibleItem);
                if (count1 < 0) {
                    lv.setSelection(0);
                }

                else {
                    lv.setSelection(count1);
                }
            }

        }
    });

    Button btnNext = (Button) findViewById(R.id.button2);
    btnNext.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ListView lv = (ListView) findViewById(R.id.lv);
            int count = lv.getCount();
            int firstVisibleItem = lv.getFirstVisiblePosition();
            int lastVisibleCount = lv.getLastVisiblePosition();
            if (lastVisibleCount != count) {
                int count1 = lastVisibleCount
                        + (lastVisibleCount - firstVisibleItem);
                if (count1 > count) {
                    lv.setSelection(count);
                } else {
                    lv.setSelection(count1);
                }
            }

        }
    }); 
```

# java - 从大型 XML 文件中删除不可打印和/或 unicode 字符

> ID：12513061
> 
> 赞同：1
> 
> 时间：2012-09-20T12:54:50.590
> 
> 标签：java, xml, jaxb, sax

我有一个接收包含 XML 数据的 File 对象的方法。文件可以超过 50 MB。是否有一种方便的方法可以从中删除控制字符和/或不可打印字符。

对于较小的文件，我将文件内容读取到 String 并使用 replaceAll("\p{Cntrl}", "")。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:17:41.303

1）。使用 notepad++ 或 ms word 并使用 find/replace 2) 使用 bufferedStream 编写 java 程序查找并替换 stringtokens

# php - 单用户Basecamp API时间条目

> ID：12513062
> 
> 赞同：3
> 
> 时间：2012-09-20T12:54:53.633
> 
> 标签：php, xml, curl, basecamp

要访问我只是使用的单个项目的时间条目`https://{*}.basecamphq.com/projects/{project_id}/time_entries.xml` ，但我想为单个用户获取时间条目。官方文档说

## 获取报告

*   `GET /time_entries/report.xml`返回与给定条件匹配的时间条目集。

此操作接受以下查询参数：`from`、`to`、`subject_id`、`todo_item_id`、`filter_project_id`和`filter_company_id`。该`subject_id`参数允许您将结果限制为单个人的时间条目。

但是我应该把这个标准放在哪里？

```
https://{*}.basecamphq.com/time_entries/report.xml?subject_id={person_id} 
```

什么都没有给我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:24:55.033

找到答案了！

```
https://{*}.basecamphq.com/time_entries/report.xml?from=20120707&to=20120920&subject_id=9652173 
```

有用！因此，据我了解，如果您想使用其中一个标准，您还必须声明“从”和“到”标准。

# ruby-on-rails - Capybara 测试页面是否有正则表达式

> ID：12513072
> 
> 赞同：19
> 
> 时间：2012-09-20T12:55:14.437
> 
> 标签：ruby-on-rails, regex, rspec, capybara

我是 RSpec 和 Capybara 的新手，我正在尝试测试页面是否有时间。12:00 或 14:24 或 08:12 是我要测试的很好的例子。

我正在使用以下正则表达式：

```
/^\d{2}:\d{2}/ 
```

我不确定如何在 capybara 中“措辞”来测试页面是否包含此正则表达式。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-20T13:06:22.073

我想像

```
page.text.should match(/^\d{2}:\d{2}/) 
```

或者，使用新的 RSpec 语法

```
expect(page.text).to match(/^\d{2}:\d{2}/) 
```

或者您可以测试的不是整个页面，而是某个元素，例如

```
find("span.time").text.should match(/^\d{2}:\d{2}/) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-24T20:54:49.797

我不知道这是否是新行为，但您可以使用`has_content?`：

`page.has_content?(/do not have permission/i)`

在 rspec 中，这将是这样的：

`expect(page).to have_content(/do not have permission/i)`

我在 capybara 的在线文档中找到了这个，[但](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_text%3F-instance_method)它只是一个别名。`has_text?``has_content?`

# iphone - UIPickerview 多选支持 iOS 中的两个方向

> ID：12513076
> 
> 赞同：0
> 
> 时间：2012-09-20T12:55:19.210
> 
> 标签：iphone, objective-c, uipickerview

我想实现一个选择器视图，用户可以在其中选择多行，并且选定的行应该显示一个“勾号”标记。

在谷歌上搜索了很多之后，我发现[了这个](https://github.com/alexleutgoeb/ALPickerView)开源代码

但是当我试图支持这两种方向时，GUI 以不正确的方式显示。

任何人都可以帮助我获得支持纵向和横向的多行选择的选择器视图。

希望得到您的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:08:58.303

添加图像或空选择器视图并在其中添加一个表格视图，然后在选择或取消选择时切换单元格配件类型

```
cell.accessoryType = UITableViewCellAccessoryCheckmark 
```

# c# - System.Net.WebRequest - 超时错误

> ID：12513078
> 
> 赞同：5
> 
> 时间：2012-09-20T12:55:24.443
> 
> 标签：c#, asp.net, http, httpwebrequest, webrequest

以下代码给出 **错误消息：“操作已超时”错误源：在 System.Net.httpWebRequest.GetResponse()**

此方法正在调用 URL 并获取响应对象。

注意：这一切在我最后都可以正常工作..但是当我将相同的代码发送到生产环境时..它显示超时错误

```
public GetUpdatedInventoryUnitValues(Vehicle aeVehicle)
{
            WebRequest oWebRequest = null;
            StringBuilder oStringBuilder = null;
            StreamReader oStreamReader = null;
            dcDealerDetails = new Dictionary<string, string>();

            MSRP = string.Empty;
            NetPrice = string.Empty;
            string strLine = string.Empty;
            string strURL = GetUpdatedInventoryUnitValues.GetFormattedURL(aeVehicle);

            try
            {
                /* Open the requested URL */
                oWebRequest = WebRequest.Create(strURL);
                oWebRequest.Method = "GET";
                oWebRequest.ContentType = "application/xml";
                /* Get the stream from the returned web response */
                oStreamReader = new StreamReader(oWebRequest.GetResponse().GetResponseStream());
                /* Get the stream from the returned web response */
                oStringBuilder = new StringBuilder();
                /* Read the stream a line at a time and place each one into the stringbuilder  */
                while ((strLine = oStreamReader.ReadLine()) != null)
                {
                    /* Ignore blank lines */
                    if (strLine.Length > 0)
                        oStringBuilder.Append(strLine);
                }

                string[] tempArray = null;
                string[] tempNextArray = null;
                //Split string by semicolon as a separater
                tempArray = Data.SplitString(oStringBuilder.ToString(), new char[] { ';' });

                if (tempArray != null)
                {
                    foreach (string invUnits in tempArray)
                    {
                        //Split string by '=' as a separater
                        tempNextArray = Data.SplitString(invUnits, new char[] { '=' });

                        if (tempNextArray != null && tempNextArray.Length == 2)
                        {
                            switch (tempNextArray[0].ToLower())
                            {
                                //case "msrp":
                                //    MSRP = Data.RemoveDoubleCode(tempNextArray[1]);
                                //    break;
                                case "netprice":
                                    NetPrice = Data.RemoveDoubleCode(tempNextArray[1]);
                                    break;
                            }
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                ErrorLog.ErrorMessage = ErrorLog.Separator;
                ErrorLog.ErrorMessage = "Exception during posting data to another application .";
                ErrorLog.ErrorMessage = "ERROR MESSAGE : " + ex.Message;
                ErrorLog.ErrorMessage = "ERROR SOURCE: " + ex.StackTrace.ToString();

            }
            finally
            {
                if (oStreamReader != null)
                {
                    oStreamReader.Close();
                }
                if (oWebRequest != null)
                {
                    oWebRequest = null;
                }
            }
        } 
```

请建议我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T12:59:54.243

您是否发现前几个请求没问题，*然后*它们开始超时？如果是这样，我怀疑这是问题所在：

```
oStreamReader = new StreamReader(oWebRequest.GetResponse().GetResponseStream()); 
```

您正在获取响应，但从不处理它。你应该使用：

```
using (var response = oWebRequest.GetResponse())
{
    ...
} 
```

事实上，如果您始终使用语句，您可以完全摆脱`finally`阻塞。`using`

As an aside, this is a pretty long method - 77 lines! - and worse, it looks like it's actually a constructor:

*   Try to split it out into smaller, more easily understood, more easily testable chunks
*   Try to avoid doing a lot of work in constructors

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:13:47.403

Just sharing experience.

I was getting the same error "Operation Timed Out".

I have tried using both WebClient And WebRequest (set Timeout also) but was still getting error.

Reason was that I was not disposing the response.

So I used as mentioned above :

```
using (var response = oWebRequest.GetResponse())

{
    ...
} 
```

And it solved the problem...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:05:55.260

I personnally use this code for one of my program and it works perfect:

```
 WebRequest webRequest = WebRequest.Create(requestUri);
    webRequest.Credentials = new NetworkCredential(login, password);
    WebResponse webResponse = webRequest.GetResponse();
    Stream response = webResponse.GetResponseStream();
    StreamReader reader = new StreamReader(response); 
```

So i think it doesn't come from your code but from your production platform.

# asp.net-mvc-3 - 在表单提交后和重定向前添加加载屏幕

> ID：12513083
> 
> 赞同：0
> 
> 时间：2012-09-20T12:55:44.353
> 
> 标签：asp.net-mvc-3, jquery, screen, loading

我有一个带有 MVC3 和 Jquerymobile 的移动应用程序。在表单提交（使用 ajax 功能）时，我想在提交和重定向时显示加载图标（ajax-loader.png）。谢谢！

我的ajax函数：

```
 $("#add").click(function () {
    $.validator.unobtrusive.parse($('form'));  //added
    if ($("form").valid()) {
        var IDs = new Array($("#SelectedProduct").val(), $("#SelectedAccount").val(), $("#SelectedProject").val(), $("#SelectedTask").val(), $("#date").val(), $("#duration").val());
        $.ajax({
            url: '@Url.Action("SaveLine", "AddLine")',
            type: 'post',
            data: { ids: IDs },
            dataType: 'json',
            traditional: true,
            success: function (data) {
                if (data.success == true) {
                    $("#ajaxPostMessage").html(data.Success);
                    $("#ajaxPostMessage").addClass('ajaxMessage').slideDown(function () {
                        window.location.href = '@Url.Action("Index", "AddLine")';
                    }).delay(1800)
                }
                else {
                    $("#ajaxPostMessage").html(data.Error);
                    $("#ajaxPostMessage").addClass('ajaxMessage');
                    $("#ajaxPostMessage").show();
                }
            }
        });
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:37:28.570

尝试（未经测试）：

```
$("#add").click(function () {
    $.validator.unobtrusive.parse($('form'));  //added
    if ($("form").valid()) {
        var IDs = new Array($("#SelectedProduct").val(), $("#SelectedAccount").val(), $("#SelectedProject").val(), $("#SelectedTask").val(), $("#date").val(), $("#duration").val());
        $.ajax({
            url: '@Url.Action("SaveLine", "AddLine")',
            type: 'post',
            data: { ids: IDs },
            dataType: 'json',
            traditional: true,
            beforeSend: function(jqXHR, settings){
                $.mobile.showPageLoadingMsg();
            },
            success: function (data) {
                $.mobile.hidePageLoadingMsg();
                if (data.success == true) {
                    $("#ajaxPostMessage").html(data.Success);
                    $("#ajaxPostMessage").addClass('ajaxMessage').slideDown(function () {
                        window.location.href = '@Url.Action("Index", "AddLine")';
                    }).delay(1800)
                }
                else {
                    $("#ajaxPostMessage").html(data.Error);
                    $("#ajaxPostMessage").addClass('ajaxMessage');
                    $("#ajaxPostMessage").show();
                }
            }
        });
    }
    return false;
}); 
```

资料来源：

[http://forum.jquery.com/topic/how-to-show-hide-loading-spinner-in-jquery-mobile](http://forum.jquery.com/topic/how-to-show-hide-loading-spinner-in-jquery-mobile) [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# cocoa-touch - 将 Scale AffineTransform 应用于 UIView 会更改其中心

> ID：12513092
> 
> 赞同：4
> 
> 时间：2012-09-20T12:56:19.000
> 
> 标签：cocoa-touch, uiview, core-animation, cgaffinetransform, cgaffinetransformscale

当用户点击其超级视图时，我正在运行此代码以缩小 UIView。然而，当应用 CGAffineTransformScale() 时，它也会改变中心。这是预期的行为吗？

```
-(void) onTap:(UITapGestureRecognizer *)tap{

    [UIView animateWithDuration:1.2
                          delay:0
                        options:0
                     animations:^{
                         CGAffineTransform transform = self.icon.transform;
                         NSLog(@"Previous center: %@", NSStringFromCGPoint(self.icon.center));

                         self.icon.transform = CGAffineTransformScale(transform, 0.5, 0.5);

                         NSLog(@"Next center: %@", NSStringFromCGPoint(self.icon.center));
                     } completion:^(BOOL finished) {
                         //
                     }];

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T12:38:57.487

我终于发现了发生了什么：自动布局正在重新定位子视图并更改中心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:27:42.003

我使用 ObjC 在 ViewController 中测试了这段代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Create a subview
    CGRect bounds = CGRectMake(10, 10, 100, 100);
    UIView* v = [[UIView alloc] initWithFrame: bounds];
    [v setBackgroundColor:[UIColor yellowColor]];
    [self.view addSubview:v];

    icon = v;
} 
```

并在 viewDidAppear 中启动了一个动画：

```
- (void)viewDidAppear:(BOOL)animated
{
    NSLog(@"Previous center: %@", NSStringFromCGPoint(self.icon.center));

    [UIView animateWithDuration:1.2 
          delay:1.0 
        options:0 
     animations:^{
         NSLog(@"Before center: %@", NSStringFromCGPoint(self.icon.center));

         CGAffineTransform transform = self.icon.transform;
         self.icon.transform = CGAffineTransformScale(transform, 0.5, 0.5);

         NSLog(@"After center: %@", NSStringFromCGPoint(self.icon.center));
     }
     completion:^(BOOL finished){
         // nothing
         NSLog(@"Completion center: %@", NSStringFromCGPoint(self.icon.center));
     }];        
} 
```

每次通话的中心都是相同的（60,60）：

```
2012-09-24 10:22:11.776 ScaleView[19611:f803] Previous center: {60, 60}
2012-09-24 10:22:11.778 ScaleView[19611:f803] Before center: {60, 60}
2012-09-24 10:22:11.779 ScaleView[19611:f803] After center: {60, 60}
2012-09-24 10:22:13.979 ScaleView[19611:f803] Completion center: {60, 60} 
```

所以我会说不，这不是预期的行为。

# c# - 使用 VisualBasic.DLL 的 InputBox 需要 DialogResult

> ID：12513099
> 
> 赞同：2
> 
> 时间：2012-09-20T12:56:28.813
> 
> 标签：c#, .net, inputbox

我正在使用 Visual Basic 库中的 InputBox，我需要确定最终用户选择了哪个按钮。使用 InputBox，您只能获取用户输入的值，我还需要检测他们是否点击 Ok 或 Cancel。

有没有人尝试过这样做？

我知道我可以创建一个新表单并这样做，但想知道有解决方法吗？

```
string answer =  Interaction.InputBox("Question","Title",""); 
```

我可以通过 answer.length 确定用户是否输入了任何内容，但我需要知道他们在输入内容后是否点击了“取消”或“确定”，因为我需要在“取消”上中止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:02:03.127

你不能，除了[检查字符串长度](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.interaction.inputbox.aspx)。

> 如果用户单击取消，则返回零长度字符串。

因此，如果您希望能够区分单击取消按钮和用户刚刚输入了一个空字符串的事实，那么您就不走运了。

但是那里有很多自定义实现，[比如 codeplex 上的这个](http://inputbox.codeplex.com/)，它将返回一个[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.dialogresult.aspx).

# c# - 循环语句不超过第二项

> ID：12513103
> 
> 赞同：2
> 
> 时间：2012-09-20T12:56:34.920
> 
> 标签：c#

我仍然是一名初学者开发人员 - 如果我把这个问题弄错了，请原谅我，但我有一个类可以根据另一个公共结构的属性构建一个字符串。当结构被命名时，这曾经可以正常工作，但我想让这个类对任何类型的结构做同样的事情，所以我改为使用对象。这是我用来遍历属性并构造字符串的方法——这是在一个名为构造函数的公共类中，然后我从我的其余代码中调用（不创建构造函数的实例）。

```
 public string MyConstructor(object TheObject)
    {
        string S = "";

        Type t = TheObject.GetType();
        PropertyInfo[] PI = t.GetProperties();

        Constructors Cons = new Constructors();

        foreach (PropertyInfo info in PI)
        {
            S = MyConstructor(S, info, info.GetValue(TheObject, null););
        }

        return S;
    } 
```

我的问题是它不想退出 foreach 循环。当我用

```
 for (int i = 0; i < PI.Count(); i++)
        {
            S = MyConstructor(S, PI[i], PI[i].GetValue(TheObject, null));
        } 
```

并通过调试器运行它->在每个循环之后我进入 0、1、0、1、0、1... MyConstructor 有 2 个重载...上面的一个和另一个带有（字符串、PropertyInfo、对象）的重载。但即使我将第二种方法的名称更改为 MyPropertyConstructor 也会发生同样的情况。目前，代码是从没有线程的表单中调用的，因此在我看来没有任何其他线程可以干扰。同样对于循环 0 和 1，该方法返回空字符串“”。那么我该如何摆脱这个循环呢？

这是其余的代码

```
 public static string MyConstructor(string CompiledString, PropertyInfo PropertyToAdd, object ThisValue)
    {
        string s = "";
        //object ThisValue = PropertyToAdd.GetValue(PropertyToAdd, null);

        //See if there is something to work with
        if(PropertyToAdd != null)
        {
            //Remove items which has been set not to record
            if (PropertyToAdd.GetCustomAttributes(typeof(DontRecord), true).Length > 0)
            {
                if(((DontRecord)PropertyToAdd.GetCustomAttributes(typeof(DontRecord), true)[0]).Record)
                {
                    return CompiledString;
                }
            }

            //see if it is the first time using the compile string
            if (CompiledString != "")
            {
                s += ";";
            }

            //For Testing
            int testint = 0;

            //only record items that where default value is different to their value
            Object[] Attr = PropertyToAdd.GetCustomAttributes(typeof(DefaultValueAttribute), true);

            //see if there is a default value set
            if (Attr.Length > 0)
            {
                //Get Constructorname value
                Object[] constructorname = PropertyToAdd.GetCustomAttributes(typeof(ConstructorName), true);

                if (constructorname.Length > 0)
                {
                    s += ((ConstructorName)constructorname[0]).Name.ToString() + "=";

                    //If value is a string
                    if (PropertyToAdd.PropertyType == typeof(string))
                    {
                        if (Convert.ToString(((DefaultValueAttribute)Attr[0]).Value) != (string)ThisValue) { s += ThisValue; } else { s = ""; }
                    }

                    //Incase value is an int
                    else if (PropertyToAdd.PropertyType == typeof(int) && int.TryParse(ThisValue.ToString(), out testint))
                    {
                        if (Convert.ToInt32(((DefaultValueAttribute)Attr[0]).Value) != (int)ThisValue) { s += Convert.ToString((int)ThisValue); } else { s = ""; }
                    }

                    //Incase value is a bool
                    else if (PropertyToAdd.PropertyType == typeof(bool))
                    {
                        if (Convert.ToBoolean(((DefaultValueAttribute)Attr[0]).Value) != (bool)ThisValue)
                        {
                            if ((bool)ThisValue) { s += "True"; } else { s += "False"; }
                        }
                        else { s = ""; }
                    }
                    else
                    {
                        s = "";
                    }
                }
                else
                {
                    //There is no ConstructorName so therefore cannot create
                    return CompiledString;
                }
            }
            else
            {
                return CompiledString;
            }
        }

        return CompiledString += s;
    }

} 
```

这是最初传递给 MyConstructor 的部分对象类型的公共结构示例

public struct ODBCDataString { #region 变量 #region 通用变量 static string _connection = ""; 静态字符串 _saveString = ""; 静态字符串 _unsaveString = ""; #endregion 通用变量

```
 #region Security Variables
            static string _userID = "";
            static string _password = "";
        #endregion Security Variables

        #region Source Variables
            static string _dsn = "";
            static string _driver = "";
        #endregion Source Variables
    #endregion Variables

    #region Properties
        #region General
            [Browsable(false)]
            public string ConnectionString { get { return _connection; } set { _connection = value; } }

            [Browsable(false)]
            public string SaveString 
            {
                get 
                {
                    Constructors Cons = new Constructors();
                    string MyS = Cons.MyConstructor((object)this);
                    return MyS; 
                } 
            } 

            [Browsable(false)]
            public string UnsaveString 
            { 
                get 
                {
                    Constructors Cons = new Constructors();
                    string MyS = Cons.MyConstructor((object)this);
                    //string MyS = Constructors.MyConstructor((object)this);
                    if (_password != "")
                    {
                        MyS += ";Password=" + _password;
                    }

                    return MyS; 
                } 
            }
        #endregion General

        #region Source
            [DisplayName("DSN")]
            [Description("The DSN to use when connecting to the Data Source")]
            [DefaultValue("")]
            [Category("Source")]
            [ConstructorName("Dsn")]
            public string DSN { get { return _dsn; } set { _dsn = value; } } 
```

...这基本上只是对传递的结构/对象类型的简要概述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:28:31.353

```
namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {
        Test1 t1 = new Test1();
        string result = ObjToString<Test1>(t1);
        Console.WriteLine(result);
        Console.ReadKey();
    }

    public static string ObjToString<T>(T obj)
    {
        if (obj == null)
        {
            throw new Exception("passed in parameter is null");
        }

        StringBuilder sb = new StringBuilder();

        Type t = obj.GetType();
        PropertyInfo[] properties = t.GetProperties();

        foreach (var property in properties)
        {
            sb.Append(property.Name);
            sb.Append(",");
        }

        return sb.ToString();
    }
}

public struct Test1
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:09:35.180

好的抱歉在这里浪费时间，但我发现了问题。正如HOBO建议的那样。我的一个属性也调用了相同的方法（实际上它是我在上面的示例中设置的确切类的第二个属性。我评论说一个输出并且代码正在工作。花了一整天之后 - 我觉得自己像个白痴并且浪费了你们所有的时间......非常感谢你们的帮助:)我几乎放弃了一起开发:)

# grails - 我应该把可重用的方法放在 grails 的什么地方？

> ID：12513104
> 
> 赞同：5
> 
> 时间：2012-09-20T12:56:34.690
> 
> 标签：grails, groovy

我是 Grails 的新手。我想创建一个可重用的函数，它可以根据我指定的任何 2 个输入值计算百分比（0 - 100%）。我希望它可以跨域和控制器重用，但我很难弄清楚该函数的放置位置。

这是我的代码：

```
def calcPercentComplete(hoursComp, hoursReq) {
  def dividedVal = hoursComp/hoursReq
  def Integer result = dividedVal * 100

  // results will have a min and max range of 0 - 100.
  switch(result){
    case{result > 100}:
      result = 100
      break

    case {result <= 0}:
      result =  0
      break

    default: return result
  }

} 
```

有没有人对实现这一点的最佳实践有建议？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:02:42.183

如果您编写一个类（例如称为`TimeUtils.groovy`）并将其放入`src/groovy/utils`

然后添加一些作为静态方法执行此操作的内容：

```
package utils

class TimeUtils {
  static Integer calcPercentComplete(hoursComp, hoursReq) {
    Integer result = ( hoursComp / hoursReq ) * 100.0
    result < 0 ? 0 : result > 100 ? 100 : result
  }
} 
```

然后您应该可以调用：

```
def perc = utils.TimeUtils.calcPercentComplete( 8, 24 ) 
```

从代码中的任何位置

# sql - 一个外键和两个主键

> ID：12513105
> 
> 赞同：0
> 
> 时间：2012-09-20T12:56:40.397
> 
> 标签：sql, database, oracle10g

我有一个分配表和一个员工表。我希望分配与现有员工和现有项目相关联。我有两个主键，一个来自员工表，另一个来自项目表。每个引用回分配表。我的外键约束可以像我展示的那样是分开的，还是它们必须在一起并且有一个“和”声明？

```
 create table assignment 
(asg_prj_p# number(2),
asg_emp_e#a varchar2(1),
asg_emp_e#n varchar2(5),
asg_hrs number(3),
constraint fk_project foreign key (asg_prj_p#) references project (prj_p#),
constraint fk_employee foreign key (asg_emp_e#a, asg_emp_e#n) references employee (emp_e#a, emp_e#n)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:48:12.383

你的问题对我来说并不完全清楚。但以下陈述将帮助您解决问题。

在您的分配表中，您有两个外键。一种是单外键：asg_prj_p#，另一种是复合外键（asg_emp_e#a，asg_emp_e#n）。复合外键必须引用复合主键或复合唯一键列。因此，在您的示例中，员工表的 (emp_e#a, emp_e#n) 列必须是复合主键或复合唯一键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:02:22.267

外键约束是独立的——即一个确保您在项目表中有一行具有在您的 asg_prog_p 字段中指定的 ID，另一个对员工表和构成它的键的两个字段执行相同的操作。因此，就外键约束而言，您所拥有的看起来不错。

然后，您可能需要使用这 3 个字段的复合主键 - 这取决于员工是否可以在特定项目上拥有一个或多个分配。如果只有一个，那么复合主键可能是一个好主意。否则，您应该考虑是否需要另一个字段来加入复合主键，或者您可以创建一个新字段，例如“assignment_id”作为主键。

# java - 我应该将 Eclipse 设置 (.settings) 签入到 SVN 吗？

> ID：12513114
> 
> 赞同：20
> 
> 时间：2012-09-20T12:57:14.157
> 
> 标签：java, eclipse, svn, maven, settings

> **可能重复：**
> [哪些 eclipse 文件属于版本控制](https://stackoverflow.com/questions/337304/which-eclipse-files-belong-under-version-control)

我们使用 Eclipse IDE 进行开发。.settings 文件夹中总是有变化。有时我们在 Eclipse 中配置某些东西，但通常我们在 Eclipse 中更改任何东西。

Eclipse 在没有我们要求的情况下更改了设置？？

.settings 的最佳做法是什么？

我应该检查 SVN 中的 Eclipse 设置（.settings）还是添加到忽略列表？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-20T13:15:53.930

该`.settings`目录包含（或至少应该包含）在 Eclipse 中成功构建项目所需的重要信息，例如用于源代码的字符编码、Java 编译器设置等等。如果您不将该目录提交给 SCM，则在大多数情况下，您将无法将项目签出到新的工作区并立即对其进行编译。一个特别敏感的方面是编译器错误/警告的精确配置。如果开发人员的这些设置有误，后果可能从失败的 Eclipse 构建到开发人员破坏代码以试图“修复”不存在的错误/警告。

每个插件都可以将自己的设置文件贡献给目录，因此可以随意挑选并忽略不相关的，保留重要的，例如`org.eclipse.jdt.core.prefs`.

您必须非常小心，不要弄乱项目特定的设置，以免破坏其他人的构建。任何个人偏好都应在工作区级别全局更改，以便此配置不会传播给队友。

从理论上讲，人们可能会强制执行一项政策，要求每个人都从另一个地方导入项目特定的设置，并且永远不要提交它们，但该路线没有任何优势，而且在易用性方面显然逊色。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-20T14:50:11.783

由于您使用[maven](http://maven.apache.org)来管理您的构建，因此实际上没有必要将`.settings`源代码置于控制之下。

通过使用 maven，您可以在不依赖 eclipse 设置的情况下使用其他 IDE。

另请参阅[如果使用 Maven，是否应该忽略 VCS 中的 Eclipse 特定文件？](https://stackoverflow.com/questions/8169941/should-eclipse-specific-files-in-an-vcs-be-ignored-if-using-maven)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T13:00:19.733

这真的取决于你的项目。这里的这个线程应该给你足够多的信息来弄清楚你需要什么。

[哪些 Eclipse 文件属于版本控制？](https://stackoverflow.com/questions/337304/which-eclipse-files-belong-under-version-control)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T13:00:54.187

没必要，

因为不同的用户使用不同的设置和配置。

该设置可以在文本文件中描述

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T00:56:40.813

当您使用 Maven 时，我肯定会拒绝。根据我从事的项目的经验，提交这些文件会导致问题，特别是如果您与具有不同环境（OSX/Windows/*nix，文件系统布局）的人合作。

如果您还没有使用它，我建议您使用 Maven Eclipse 插件 (http://maven.apache.org/plugins/maven-eclipse-plugin/) 自动生成您的 Eclipse 项目文件。

编辑：

忘了提一下，我不喜欢提交任何 Eclipse 项目设置/文件的最大原因可能是它给我的 VCS 历史添加了混乱。我发现这些文件经常无缘无故地更改（即首选项文件时间戳更改），并且充其量会添加额外的更改，或者最坏的情况会导致烦人的冲突。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T13:00:55.543

您可以创建最佳配置并将其放入 SVN 中，但这会带来很多麻烦。

1.  不能保证有人会犯错设置，每个人都会受苦
2.  每次配置更改发生时都需要更改设置。

如果有人没有任何东西，最好作为参考，然后他可以从它开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T13:04:35.190

直接的答案是否定的。不是因为此文件最终是否更改，而是项目源代码存储库不适用于个人文件设置。

如果您确实需要将这些 IDE 特定文件放在某个位置，请签入与项目分开的单独 SVN 文件夹。

# plone - 无法将内容添加到新的 Plone 站点：ValueError：无法找到 update_version_before_edit 异常

> ID：12513123
> 
> 赞同：8
> 
> 时间：2012-09-20T12:57:40.187
> 
> 标签：plone

刚刚使用统一安装程序在 CentO 上成功安装了 Plone 4.2.1。登录后，我无法添加任何内容。

我收到以下错误：

```
Traceback (innermost last):

    Module ZPublisher.Publish, line 126, in publish
    Module ZPublisher.mapply, line 77, in mapply
    Module ZPublisher.Publish, line 46, in call_object
    Module Products.CMFPlone.FactoryTool, line 453, in __call__
    Module ZPublisher.mapply, line 77, in mapply
    Module ZPublisher.Publish, line 46, in call_object
    Module Products.CMFFormController.FSControllerPageTemplate, line 91, in __call__
    Module Products.CMFFormController.BaseControllerPageTemplate, line 28, in _call
    Module Products.CMFFormController.ControllerBase, line 231, in getNext
    Module Products.CMFFormController.Actions.TraverseTo, line 35, in __call__
ValueError: Unable to find update_version_before_edit 
```

我已经运行 bin/buildout -n 来更新组件。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T08:40:33.210

我今天在使用 Plone 4.1.6 时遇到了同样的问题。这是一个解决方法：

转到 zmi -> portal_setup -> 选项卡“导入” -> 在下拉菜单中选择“CMFEditions” -> 然后点击“导入所有步骤”按钮。

问题是由于某种原因，我还没有找到 Product.CMFEditions 的皮肤层没有在 portal_skins 中注册，因此当您尝试创建处于版本控制下的内容类型时，它会因此而失败。我会更深入地调查它，但同时这个技巧也能发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:43:35.860

update_version_before_edit 应该参考 update_version_before_edit.py 脚本。

这个脚本

*   磁盘上不存在（安装失败）

*   Zope 管理界面 > portal_skins 配置错误（某种第三方主题干扰）

你能重复 ZEO 安装的问题吗？如果是，那么它一定是某种 CentOS 安装程序错误没有正确设置文件。

# nhibernate - 加载具有许多记录的表作为集合

> ID：12513132
> 
> 赞同：-1
> 
> 时间：2012-09-20T12:58:27.150
> 
> 标签：nhibernate, sql-server-ce, fluent

加载具有许多记录（1000 万）的表的最佳方法是什么。

目前，我执行以下操作：

```
Session.QueryOver<Table>().List(); 
```

我得到以下异常：

```
 threw exception: 
NHibernate.Exceptions.GenericADOException: could not execute query
[ SELECT this_.Id as Id7_0_, this_.Tag as Tag7_0_, this_.Vss as Vss7_0_, this_.checkpoint_id as checkpoint4_7_0_, this_.vpg_id as vpg5_7_0_ FROM "CheckpointToProtectionGroup" this_ ]
[SQL: SELECT this_.Id as Id7_0_, this_.Tag as Tag7_0_, this_.Vss as Vss7_0_, this_.checkpoint_id as checkpoint4_7_0_, this_.vpg_id as vpg5_7_0_ FROM "CheckpointToProtectionGroup" this_] ---> System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:59:13.030

Skip/Take 或 SetFirstResult/SetMaxResults 批量加载。您还必须清除每个批次之间的会话。和/或使用无状态会话。和/或让查询本身投射到 NHibernate 不会跟踪的简单 DTO 实例以减少内存消耗。或者不使用 NHibernate 进行此类批量加载（它不是 NHibernate 的主要用例）。

# architecture - 架构图组件类型是否有任何公认的标准？（架构图的刻板印象）

> ID：12513136
> 
> 赞同：6
> 
> 时间：2012-09-20T12:58:40.280
> 
> 标签：architecture, components, diagrams

我正在为系统开发架构图，我需要在架构图中使用公认的组件类型标准（组件名称和其他详细信息）。（我目前正在使用“系统”、“层”、“子系统”和“单元”等）。我研究了 UML 表示法，但 UML 中没有架构图（只有部署图）。

那么在开发架构图时，谁能告诉我组件类型（Stereotypes）的标准是什么？

谢谢

[UML 组件表示法](http://www.ibm.com/developerworks/rational/library/dec04/bell/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:23:36.150

[4+1 架构视图模型](http://java.dzone.com/articles/%E2%80%9C41%E2%80%9D-view-model-software)通常用于记录架构。

# winapi - VB 应用程序中 user32.dll 的用途是什么？

> ID：12513138
> 
> 赞同：3
> 
> 时间：2012-09-20T12:58:40.997
> 
> 标签：winapi, vb6, vb6-migration

在我们的中我们使用了user32.dll并传递了hWnd的值。所以我想知道这个User32.dll有什么用并传递hWnd的值？

他们正在设置这个值

```
SetProp hwnd, "PrevWndProc", SetWindowLong(hwnd, GWL_WNDPROC, AddressOf WindowProc) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T13:07:24.633

它使用`SetProp`Windows API 函数将值与变量中的句柄标识的窗口相关联`hwnd`。

该片段用于存储原始*窗口过程*的地址（由 返回`SetWindowLong`），同时用 VB6 过程（称为`WindowProc`）替换（子类化）它，通常是为了与发送到窗口的消息进行交互。

随后`SetWindowLong`查找先前存储`hwnd`的 with`GetProp`恢复原始 windows 过程，然后`RemoveProp`进行整理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:01:36.590

User32 是一个管理桌面上所有窗口的库。hwnd 参数是一个句柄，用于标识您在系统中的窗口

# security - 为什么要使用 RSA 进行 DPAPI 网络场加密？

> ID：12513139
> 
> 赞同：3
> 
> 时间：2012-09-20T12:58:41.820
> 
> 标签：security, encryption, dpapi

我们将使用 DPAPI 加密 ASP.NET Web 配置文件中的连接字符串。但我对为我们的网络集群（农场）使用 RSA 或 DPAPI 感到困惑。下面的 MSDN 链接清楚地表明，如果我们想在网络场上部署 ASP.NET 应用程序，我们需要使用 RSA 提供程序。

[http://msdn.microsoft.com/en-us/library/ms998280.aspx](http://msdn.microsoft.com/en-us/library/ms998283.aspx)

[http://msdn.microsoft.com/en-us/library/ms998283.aspx](http://msdn.microsoft.com/en-us/library/ms998283.aspx)

但我不明白在我的网络场中的所有机器上使用 DPAPI 可能会出现什么问题。我基本上可以在所有服务器上执行相同的操作，并在每台机器上创建一个新的“加密连接字符串”。为什么这行不通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T07:00:11.857

它不起作用的原因是您的网络场中使用的域帐户将登录到多台计算机上。

> “为使 DPAPI 在使用漫游配置文件时正常工作，域用户只能登录到域中的一台计算机。如果用户想要登录到域中的另一台计算机，则用户必须注销用户登录到第二台计算机之前的第一台计算机。如果用户同时登录到多台计算机，DPAPI 很可能无法正确解密现有的加密数据。

[http://support.microsoft.com/kb/309408#6](http://support.microsoft.com/kb/309408#6)

我目前正在尝试以某种方式解决这个问题，并且会喜欢你如何解决它的一些想法！

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:46:11.497

文章指出它是可取的，但这不是一项授权。如果您的场中有几台机器，那么加密一个文件并将其部署多次会更容易，而不是去每台机器并“触摸”它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:52:06.200

通过使用，您可以使用& 导出这些密钥`RSAProtectedConfigurationProvider`在一台机器上加密您的配置。`custom RSA Key Container`然后，您可以将容器导入您部署应用程序的每台服务器。[MSDN](http://msdn.microsoft.com/en-us/library/ms998283.aspx)

# java - Elasticsearch 中的字符串字典范围查询

> ID：12513145
> 
> 赞同：3
> 
> 时间：2012-09-20T12:58:55.027
> 
> 标签：java, range, elasticsearch

是否可以查询 Elasticsearch 并为其提供一系列字符串？

我想像的东西：

**样本映射：**

```
 {
      "resource" : {
        "properties" : {
          "Title" : {
            "type" : "string"
          },
          "type_" : {
            "index" : "not_analyzed",
            "type" : "string"
          },
           "Summary" : {
            "format" : "dateOptionalTime",
            "type" : "date"
          }
        }
      }
    } 
```

**示例查询：**

```
{
  "size" : 10,
  "query" : {
    "filtered" : {
      "query" : {
        "bool" : {
          "should" : [ {
            "text" : {
              "Title" : {
                "query" : "AAA",
                "type" : "phrase_prefix"
              }
            }
          }, {
            "range" : {
              "Title" : {
                "from" : "BBB",
                "to" : "CCC",
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ],
          "minimum_number_should_match" : 1
        }
      },
      "filter" : {
        "and" : {
          "filters" : [{
            "or" : {
              "filters" : [ {
                "term" : {
                  "type_" : "personType"
                }
              } ]
            }
          } ]
        }
      }
    }
  }
} 
```

**数据索引：** 具有`Titles`“AAA”、“BBB”、“CCC”、“DDD”的资源

**带有“AAA”的结果** 资源`Title`（范围未选择“BBB”和“CCC”）

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:05:35.047

对的，这是可能的。elasticsearch 查询 DSL 提供的[RangeQuery](http://www.elasticsearch.org/guide/reference/query-dsl/range-query.html)在内部使用 lucene`TermRangeQuery`作为类型字段`string`。另一方面，它使用 lucene`NumericRangeQuery`作为数字/日期类型的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:29:23.547

默认情况下，ElasticSearch 将所有索引数据保持小写。**但是，它不会小写查询**。伟大的。

总结一下：在以小写形式发送查询（`from`和`to`值）之后，范围搜索就像一个魅力。

# css - 如何使用引导程序创建类似谷歌的下拉搜索框

> ID：12513149
> 
> 赞同：3
> 
> 时间：2012-09-20T12:59:03.120
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter bootstrap，并想在搜索框上创建一个下拉列表。我正在尝试模拟 gmail 的搜索栏，其中输入搜索框的末尾有一个插入符号，可以单击它来打开一个表单。

当单击插入符号时，我正在尝试使用引导程序的下拉菜单来显示一个 div。但是我不能像谷歌那样将插入符号放在输入框中。

查看谷歌的代码，我看到他们有一个不带边框的输入框，位于下拉插入符号旁边，嵌入在带边框的 div 中。

我无法覆盖引导输入框的边框属性。有人试过吗？

下面是我的代码 -

```
<div class="input-append dropdown">

  <input type="text" name="puesto" class="input-xlarge noBorder"   placeholder="Email Address"/>    <a class="dropdown-toggle btn" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
    <b class="caret"></b>   </a>

  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">    Hello world   </ul>   <button class="btn" type="button"><i class="icon-filter"></i></button> </div> 

<style type="text/css">   .noBorder {border-top-width: 0px;} </style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:52:05.967

使用类来帮助覆盖，例如：

```
<input class="the-input" type="text" /> 
```

然后摆脱那个边界：

```
input.the-input {
    border: none transparent;
    -webkit-box-shadow: none;
            box-shadow: none;
    filter:-;    /* for IE */
} 
```

# java - 从apk反编译jar文件，编辑java代码单变量，重新编译成class和jar

> ID：12513151
> 
> 赞同：-1
> 
> 时间：2012-09-20T12:59:24.713
> 
> 标签：java, android, class, apk

制造商不再支持旧的 android apk 文件。

我想出了什么可能是错的，因为它正在从java调用一个方法：

在其中一个 java 文件中（在 dex2jar 之后查看并使用 jd-gui 查看）

**进口 com.htc.buletoothconfirm；**

我想做的就是将其**更改为**

**导入 com.htc.bluetoothconfirm；**

然后将其**重新编译**成**.class 文件**。然后将该**.class 文件****重新插入**到 .jar文件中。然后我将重建**.apk****文件**。

 ******问题是我不能用 jd-gui 改变任何东西。

如果我尝试使用 javac 编译单个 .java 文件，它会给我导入错误（文件中有很多导入）。

我曾尝试[使用 jad](http://www.varaneckas.com/jad/)反编译类文件，这就是我正在使用的。

尽管它给出了很多“无法完全反编译”的错误。

我想我想做的只是将整个java文件内容从jd-gui复制并粘贴到记事本中，将其保存为.java，然后将其编译为.class，然后将其重新插入.jar文件中。

但说起来容易做起来难。由于所有的导入，我不知道如何将这个新的 .java 文件编译成 .class 文件。（例如，我从哪里得到 import android.content.intent; 等等？我真的需要保留目录结构等等吗？）

有没有更简单的方法？我只是想改变一行。其余的都可以保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:09:42.730

您应该使用[ASM-Android](http://forge.ow2.org/projects/asm/)或[Dedexer](https://github.com/sciruela/ReadableDex)等工具反编译 apk 文件。如果你想生成一个类，你可以使用 sdcard 在设备上生成，然后创建一个 dex。文件及其对应的 .jar。我使用[BCEL 和 ASM](https://github.com/sciruela/android)在设备上生成字节码。******

# git - 合并2个本地文件

> ID：12513162
> 
> 赞同：3
> 
> 时间：2012-09-20T13:00:08.990
> 
> 标签：git, merge, kdiff3

我有 2 个需要合并的本地文件。git 中都没有版本控制。有没有合并文件的linux命令？我试过`merge`了，但没有得到任何有用的输出。合并文件似乎表明整个第一个文件被删除，第二个文件是整个输出：

```
$ cat m1
hello there
my friend
how are you
$
$ cat m2
hello there
my chum
how are you
$
$ merge merge m1 m2
$ cat merge
<<<<<<< merge
=======
hello there
my chum
how are you
>>>>>>> m2 
```

**编辑**

澄清一下，我希望创建一个 git 样式的合并文件，显示内联文件之间的差异，而不是简单地将 2 个文件端到端粘合在一起（无论如何这不适用于代码）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:57:10.283

如果你不介意使用图形应用程序，我真的可以推荐[KDiff3](http://kdiff3.sourceforge.net/)，它是一个很棒的合并工具。在你的情况下，运行

```
kdiff3 -o output.txt m1 m2 
```

你会得到

![kdiff3 截图](../Images/c8c8d94c6d138159504f7a3b92cf6d2a.png)

对于每个合并冲突，按 A 或 B 按钮选择要选择的行（或两者）。您可以在底部区域随意编辑。

* * *

更新：如果您只想在终端中以文本模式工作，那么设置一个临时 git 存储库非常便宜。学习使用 git 需要一些努力，但它是可行的。对于您的情况，以下命令可以完成工作：

```
$ mkdir /tmp/test
$ cd /tmp/test
$ git init
Initialized empty Git repository in /tmp/test/.git/
$ touch gitfile
$ git add gitfile
$ git commit -m "initial commit"
[master (root-commit) 31efd12] initial commit
 0 files changed
 create mode 100644 gitfile
$ git checkout -b m1-branch
Switched to a new branch 'm1-branch'
$ cat m1 >> gitfile
$ git add gitfile
$ git commit -m "m1 content"
[m1-branch 420b423] m1 content
 1 file changed, 3 insertions(+)
$ git checkout -b m2-branch master
Switched to a new branch 'm2-branch'
$ cat m2 >> gitfile
$ git add gitfile
$ git commit -m "m2 content"
[m2-branch c4c525a] m2 content
 1 file changed, 3 insertions(+)
$ git checkout master
Switched to branch 'master'
$ git merge m1-branch m2-branch
Fast-forwarding to: m1-branch
Trying simple merge with m2-branch
Simple merge did not work, trying automatic merge.
Auto-merging gitfile
ERROR: content conflict in gitfile
fatal: merge program failed
Automatic merge failed; fix conflicts and then commit the result.
$ cat gitfile
hello there
<<<<<<< .merge_file_qRmZJF
my friend
=======
my chum
>>>>>>> .merge_file_BUlXHH
how are you
$ 
```

# java - 重构代码查找二叉树是否为 BST

> ID：12513165
> 
> 赞同：0
> 
> 时间：2012-09-20T13:00:14.110
> 
> 标签：java, algorithm, tree, refactoring, binary-tree

我已经编写了代码来查找给定的树是否是 BST。但我需要帮助重构它。我正在寻找的一些东西是：

1.  摆脱临时变量（如 Martin Fowler 所建议）
2.  结合 leftTreeMax 和 RightTreeMin 方法
3.  更好的方法名称

另外，我会感谢人们提出的任何其他重构想法。

```
package com.cc.bst;

import com.cc.queue.Queue;
import com.cc.trees.BinaryTreeNode;

public class IsBinaryTreeBST {

public static boolean binaryTreeBST ( BinaryTreeNode root) {

    if (root == null) {
        return false;
    }
    int maxVal = leftTreeMax(root.getLeft());
    int minVal = rightTreeMin(root.getRight());
    int rootVal = root.getData();

    if (maxVal == 0 || minVal == 0 ) {
        return false;
    }

    if (rootVal > maxVal && rootVal < minVal) {
        return true;
    }

    return false;

}

private static int leftTreeMax (BinaryTreeNode node) {

    if (node == null) {
        return 0;
    }
    Queue nodeQueue = new Queue();
    nodeQueue.enqueue(node);
    int maxValue = node.getData();

    while (!nodeQueue.isEmpty()) {
        BinaryTreeNode tempNode = (BinaryTreeNode) nodeQueue.dequeue();         
        BinaryTreeNode left = tempNode.getLeft();
        BinaryTreeNode right = tempNode.getRight();

        if (left != null ) {
            if (left.getData() > tempNode.getData()) {
                return 0;
            }
            nodeQueue.enqueue(left);
        }
        if (right != null) {
            if ( tempNode.getData() > right.getData()) {
                return 0;
            }
            nodeQueue.enqueue(right);
        }
        if (tempNode.getData() > maxValue) {
            maxValue = tempNode.getData();
        }           
    }       
    System.out.println("---------- maxVal -------->" +  maxValue);
    return maxValue;
}

private static int rightTreeMin(BinaryTreeNode node) {

    if (node == null) {
        return 0;
    }
    Queue nodeQueue = new Queue();
    nodeQueue.enqueue(node);
    int minValue = node.getData();

    while (!nodeQueue.isEmpty()) {
        BinaryTreeNode tempNode = (BinaryTreeNode) nodeQueue.dequeue();         
        BinaryTreeNode left = tempNode.getLeft();
        BinaryTreeNode right = tempNode.getRight();
        System.out.println("---------- tempNode -------->" + tempNode.getData());

        if (left != null ) {
            System.out.println("---------- left -------->" + left.getData());

            if (left.getData() > tempNode.getData()) {
                return 0;
            }
            nodeQueue.enqueue(left);                
        }
        if (right != null) {
            if ( tempNode.getData() > right.getData()) {
                return 0;
            }
            System.out.println("---------- right -------->" + right.getData());

            nodeQueue.enqueue(right);               
        }           
        if (tempNode.getData() < minValue) {
            minValue = tempNode.getData();
        }
    }       
    System.out.println("---------- minVal -------->" +  minValue);

    return minValue;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:01:24.717

老实说，我很惊讶您的代码如此复杂。我很难找到进行一轮改进的原因：重写它似乎更简单。可以这样想：

我们需要满足 3 条规则，（取自维基百科）：

1.  节点的左子树仅包含键小于节点键的节点。
2.  节点的右子树仅包含键大于或等于节点键的节点。
3.  左右子树也必须是二叉搜索树。

如您所见，规则 3 给您一个很大的提示，即递归是有序的，因为每个子树都需要与其父树具有相同的规则。

那么为什么不做这样的事情：

```
checkBST(node,min,max) {
    if(node == NULL)
        return true
    if(node.value < min || node.value >= max)
        return false
    return checkBST(left,min,node.value) && checkBST(right,node.value,max)
}

checkBST(root,-infinity,+infinity) 
```

这样，您正在为每个子树保留其值的边界，该边界由其父级接收，因此现在假设左子树需要小于其父级，则其父级为最大值这个子树可以是，右子树也一样，它必须大于或等于它的父树。

这个算法不是最好的时间复杂度，但最容易编写和理解。

# wpf - 对象更新后通知 PropertyChanged

> ID：12513166
> 
> 赞同：0
> 
> 时间：2012-09-20T13:00:15.333
> 
> 标签：wpf, mvvm, observablecollection, inotifypropertychanged, model-view

我希望以一种优雅的方式更新我的列表视图。

这是我的代码：

```
ObservableCollection<Track> tracks = new ObservableCollection<Track>();
Track track = new Track();
Tracks.AddRange(track); // collection add a track, and list view updates too
Task.Factory.StartNew(() =>
    track.GetInfo(); // this operation might require some times to update
    // here I need to notify that my object is updated
); 
```

我如何强制更新 ObservableCollection 中的对象绑定？

这是我的 userControl.xaml

```
<UserControl.Resources>
    <local:TimeConverter x:Key="timeConverter" />
    <local:IndexConverter x:Key="indexConverter" />
    <CollectionViewSource x:Key="trackList" Source="{Binding Path=TrackList.Tracks}"/>
</UserControl.Resources>

<DockPanel LastChildFill="True">
    <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" Margin="2, 5, 2, 5">
        <Button Name="btn_addtrack" Command="{Binding AddTrack}" Content="+" />
    </StackPanel>
    <ListView Name="lv_tracklist" 
              DataContext="{StaticResource trackList}" 
              ItemsSource="{Binding}"
              >
        <ListView.View>
            <GridView>
                <GridViewColumn Header="#" Width="20" DisplayMemberBinding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}, Converter={StaticResource indexConverter}}" />
                <GridViewColumn Header="Title" DisplayMemberBinding="{Binding Title}"/>
                <GridViewColumn Header="Artist" DisplayMemberBinding="{Binding Artist}"/>
                <GridViewColumn Header="Length" DisplayMemberBinding="{Binding Length, Converter={StaticResource timeConverter}}" />
                <GridViewColumn Header="Path" DisplayMemberBinding="{Binding Location}"/>
            </GridView>
        </ListView.View>
    </ListView>
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:23:56.343

If you are opposed to implementing INotifyPropertyChanged you could set the binding to null then rebind but that is not what I would reccomend.

See this answer for notify all

[notify-all-properties-of-the-view-model-has-changed](https://stackoverflow.com/questions/3422331/how-to-notify-all-properties-of-the-view-model-has-changed)

Unless you are changing all the properties I would go with the answer from Miklos. There is overhead to NotifyPropertyChanged.

Recommended pattern

```
 private string prop1

   Public string Prop1
   {
        get { return prop1; }
        set 
        {
            if (prop1 == value) return;
            prop1 = value;
            NotifyProperyChanged("Prop1");
        }
   { 
```

Yes lines of code but then the UI only paints what has changed.

I just saw the update to your question and your comment.
An update to ALL is an update to each property.
The UI receives notification at the property level.
You only have 5 properties.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:07:27.767

你的`Track`类需要实现`INotifyPropertyChanged`接口。

`PropertyChanged`在要发送通知的每个属性的设置器中引发事件（在设置新值之后）。

# svn - 如何从颠覆中获得部分更新

> ID：12513169
> 
> 赞同：0
> 
> 时间：2012-09-20T13:00:22.790
> 
> 标签：svn, nant, revision

我在我的应用程序存储库中处于以下场景：

*   修订版 7（2 个更改的文件，1 个添加的文件）
*   修订版 6（4 个更改的文件）
*   修订版 5（添加 2 个，删除 2 个，更改 2 个）
*   修订版 4（3 个更改的文件）
*   修订版 3（添加 12 个，更改了 2 个文件）

我想获得一份工作副本，其中包含从修订版 3 到 Head 的所有更改，但不包括修订版 5 和 6 的更改。

我为此使用 SVN 合并，但没有反映更改，并且我遇到了修订版 5 和 6 的文件冲突。

下面是 nant 的配置文件描述，其中包含为此的可执行命令。

```
<exec program="C:\Program Files\CollabNet\Subversion Client\svn.exe" commandline="checkout https://test.repositoryhosting.com/svn/1_test@${Rev} D:\MyTest --username test --password 123"/> 
<exec program="C:\Program Files\CollabNet\Subversion Client\svn.exe" commandline="merge -c  -6  https://test.repositoryhosting.com/svn/1_test  D:\MyTest  --username test --password 123"  />
<exec program="C:\Program Files\CollabNet\Subversion Client\svn.exe" commandline="merge –c  -5  https://test.repositoryhosting.com/svn/1_test  D:\MyTest  --username test --password 123"  />
<exec program="D:\NANT_SCRIPTS\Delete Publish.bat"  commandline="${Rev}" />
<exec program="C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_compiler.exe" commandline="-nologo -v / -p D:\ MyTest -u D:\PublishOutput_${Rev}" /> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:26:52.130

您可以尝试以相反的方式执行此操作：

*   恢复修订版 6 的更改
*   犯罪
*   恢复修订版 5 的更改
*   犯罪
*   查看头部修订

这应该会将工作副本带到您想要的状态。版本 5 和 6 的更改将在存储库中恢复，但无论如何都会在您提交更改时发生。

# .net - nuget 包 url - 如何查找源

> ID：12513175
> 
> 赞同：2
> 
> 时间：2012-09-20T13:00:54.093
> 
> 标签：.net, nuget

我正在尝试在公司网络上使用 nuget。我们的安全软件阻止了大多数 nuget 包（给出 403 错误）。

我试图找出需要解锁哪些 URL 才能让 nuget 完全正常工作，但除了我们的安全团队扫描我们的日志以查看我访问过的内容之外，我无法找到这些包的实际托管位置。

我在 nuget.org 上看不到任何有帮助的东西。有没有人有任何想法，我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:05:50.497

那么 repo 位于[https://nuget.org/api/v2/](https://nuget.org/api/v2/)
如果该 url 还不够，Fiddler 应该会有所帮助。

# java - 可靠的 Java 单元测试自动化？(JUnit/Hamcrest/...)

> ID：12513184
> 
> 赞同：23
> 
> 时间：2012-09-20T13:01:17.657
> 
> 标签：java, eclipse, unit-testing, junit

## 意图

我正在寻找以下内容：

*   可靠的单元测试方法
    1.  我的方法中缺少什么？
    2.  **我在做什么错**？
    3.  *我在做什么是不必要的？*
*   一种尽可能多地自动完成的方法

## 当前环境

*   **[Eclipse](http://eclipse.org/)**作为 IDE
*   **[JUnit](http://www.junit.org/)**作为测试框架，集成到 Eclipse 中
*   **[Hamcrest](http://code.google.com/p/hamcrest/)**作为“匹配器”库，以提高断言的可读性
*   用于前置条件验证的**[Google Guava](http://code.google.com/p/guava-libraries/)**

## 目前的方法

### 结构

*   每个班级一个测试班进行测试
*   在静态嵌套类中分组的方法测试
*   测试方法命名以指定测试的行为 + 预期结果
*   **[Java Annotation](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html)**指定的预期异常，不在方法名称中

### 方法

*   注意`null`价值观
*   注意空的**[List<E>](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)**
*   注意空**[字符串](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)**
*   注意空数组
*   注意被代码改变的对象状态不变量（后置条件）
*   方法接受记录的参数类型
*   边界检查（例如**[Integer.MAX_VALUE](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)**等...）
*   通过特定类型记录不变性（例如**Google Guava [ImmutableList<E>](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html)**）
*   *...有这个清单吗？不错的测试列表示例：*
    *   在数据库项目中检查的东西（例如 CRUD、连接性、日志记录等）
    *   在多线程代码中检查的事情
    *   检查 EJB 的事项
    *   ... ?

## 示例代码

*这是一个人为的例子来展示一些技术。*

* * *

### MyPath.java

```
import static com.google.common.base.Preconditions.checkArgument;
import static com.google.common.base.Preconditions.checkNotNull;
import java.util.Arrays;
import com.google.common.collect.ImmutableList;
public class MyPath {
  public static final MyPath ROOT = MyPath.ofComponents("ROOT");
  public static final String SEPARATOR = "/";
  public static MyPath ofComponents(String... components) {
    checkNotNull(components);
    checkArgument(components.length > 0);
    checkArgument(!Arrays.asList(components).contains(""));
    return new MyPath(components);
  }
  private final ImmutableList<String> components;
  private MyPath(String[] components) {
    this.components = ImmutableList.copyOf(components);
  }
  public ImmutableList<String> getComponents() {
    return components;
  }
  @Override
  public String toString() {
    StringBuilder stringBuilder = new StringBuilder();
    for (String pathComponent : components) {
      stringBuilder.append("/" + pathComponent);
    }
    return stringBuilder.toString();
  }
} 
```

* * *

### MyPathTests.java

```
import static org.hamcrest.Matchers.is;
import static org.hamcrest.collection.IsCollectionWithSize.hasSize;
import static org.hamcrest.collection.IsEmptyCollection.empty;
import static org.hamcrest.collection.IsIterableContainingInOrder.contains;
import static org.hamcrest.core.IsEqual.equalTo;
import static org.hamcrest.core.IsNot.not;
import static org.hamcrest.core.IsNull.notNullValue;
import static org.junit.Assert.assertThat;
import org.junit.Test;
import org.junit.experimental.runners.Enclosed;
import org.junit.runner.RunWith;
import com.google.common.base.Joiner;
@RunWith(Enclosed.class)
public class MyPathTests {
  public static class GetComponents {
    @Test
    public void componentsCorrespondToFactoryArguments() {
      String[] components = { "Test1", "Test2", "Test3" };
      MyPath myPath = MyPath.ofComponents(components);
      assertThat(myPath.getComponents(), contains(components));
    }
  }
  public static class OfComponents {
    @Test
    public void acceptsArrayOfComponents() {
      MyPath.ofComponents("Test1", "Test2", "Test3");
    }
    @Test
    public void acceptsSingleComponent() {
      MyPath.ofComponents("Test1");
    }
    @Test(expected = IllegalArgumentException.class)
    public void emptyStringVarArgsThrows() {
      MyPath.ofComponents(new String[] { });
    }
    @Test(expected = NullPointerException.class)
    public void nullStringVarArgsThrows() {
      MyPath.ofComponents((String[]) null);
    }
    @Test(expected = IllegalArgumentException.class)
    public void rejectsInterspersedEmptyComponents() {
      MyPath.ofComponents("Test1", "", "Test2");
    }
    @Test(expected = IllegalArgumentException.class)
    public void rejectsSingleEmptyComponent() {
      MyPath.ofComponents("");
    }
    @Test
    public void returnsNotNullValue() {
      assertThat(MyPath.ofComponents("Test"), is(notNullValue()));
    }
  }
  public static class Root {
    @Test
    public void hasComponents() {
      assertThat(MyPath.ROOT.getComponents(), is(not(empty())));
    }
    @Test
    public void hasExactlyOneComponent() {
      assertThat(MyPath.ROOT.getComponents(), hasSize(1));
    }
    @Test
    public void hasExactlyOneInboxComponent() {
      assertThat(MyPath.ROOT.getComponents(), contains("ROOT"));
    }
    @Test
    public void isNotNull() {
      assertThat(MyPath.ROOT, is(notNullValue()));
    }
    @Test
    public void toStringIsSlashSeparatedAbsolutePathToInbox() {
      assertThat(MyPath.ROOT.toString(), is(equalTo("/ROOT")));
    }
  }
  public static class ToString {
    @Test
    public void toStringIsSlashSeparatedPathOfComponents() {
      String[] components = { "Test1", "Test2", "Test3" };
      String expectedPath =
          MyPath.SEPARATOR + Joiner.on(MyPath.SEPARATOR).join(components);
      assertThat(MyPath.ofComponents(components).toString(),
          is(equalTo(expectedPath)));
    }
  }
  @Test
  public void testPathCreationFromComponents() {
    String[] pathComponentArguments = new String[] { "One", "Two", "Three" };
    MyPath myPath = MyPath.ofComponents(pathComponentArguments);
    assertThat(myPath.getComponents(), contains(pathComponentArguments));
  }
} 
```

* * *

## 问题，明确表述

*   是否有用于构建单元测试的技术列表？比我上面过于简化的列表更高级的东西（例如检查空值、检查边界、检查预期异常等）也许可以在要购买的书或要访问的 URL 中找到？

*   一旦我有了一个采用某种类型参数的方法，我能否获得任何**[Eclipse](http://eclipse.org/)**插件来为我的测试生成存根？也许使用 Java**[注释](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html)**来指定有关方法的元数据并让工具为我实现相关检查？（例如@MustBeLowerCase，@ShouldBeOfSize(n=3)，...）

我发现必须记住所有这些“质量检查技巧”和/或应用它们很乏味且像机器人一样，我发现复制和粘贴很容易出错，而且当我像我一样编写代码时发现它不是自我记录的以上。诚然，Hamcrest[库](http://code.google.com/p/hamcrest/wiki/MatcherLibraries)朝着专门测试类型的大方向发展（例如，使用 RegEx对**[String对象、对](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)****[File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)**对象等），但显然不会自动生成任何测试存根，也不会反映代码及其属性并准备对我来说是一个安全带。

请帮我把这个做得更好。

## 附言

*不要告诉我，我只是在展示代码，它是围绕从静态工厂方法中提供的路径步骤列表创建路径的概念的愚蠢包装，这是一个完全虚构的示例，但它显示了“几个” 论证验证案例......如果我包含一个更长的例子，谁会真正阅读这篇文章？*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T13:33:50.603

1.  考虑使用[ExpectedException](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/ExpectedException.html)而不是`@Test(expected...`. 这是因为，例如，如果您期望 a`NullPointerException`并且您的测试在您的设置中抛出此异常（在调用被测方法之前），您的测试将通过。随着`ExpectedException`您在调用被测方法之前立即放置期望，因此没有机会。此外，`ExpectedException`允许您测试异常消息，如果您有两个不同`IllegalArgumentExceptions`的可能抛出并且您需要检查正确的一个，这将很有帮助。

2.  考虑将您的测试方法与设置和验证隔离开来，这将简化测试审查和维护。当被测类的方法作为设置的一部分被调用时尤其如此，这可能会混淆哪个是被测方法。我使用以下格式：

    ```
    public void test() {
       //setup
       ...

       // test (usually only one line of code in this block)
       ...

       //verify
       ...
    } 
    ```

3.  要看的书：[清洁代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)、[JUnit 实践](https://rads.stackoverflow.com/amzn/click/com/1935182021)、[测试驱动开发示例](https://rads.stackoverflow.com/amzn/click/com/0321146530)

    清洁代码有一个很好的测试部分

4.  我见过的大多数示例（包括 Eclipse 自动生成的）在测试的标题中都有被测方法。这有利于审查和维护。例如：`testOfComponents_nullCase`。您的示例是我看到的第一个使用`Enclosed`按被测方法对方法进行分组的示例，这非常好。但是，它增加了一些开销，`@Before`并且`@After`不会在封闭的测试类之间共享。

5.  我还没有开始使用它，但是 Guava 有一个测试库：[guava-testlib](http://code.google.com/p/guava-libraries/source/browse/guava-testlib/?name=v12.0-rc1)。我没有机会玩它，但它似乎有一些很酷的东西。例如：[NullPointerTest](http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java?name=v12.0-rc1)是引用：

> *   一个测试实用程序，用于验证您的方法在任何 * 参数为空时抛出 {@link * NullPointerException} 或 {@link UnsupportedOperationException}。要使用它，您必须首先为类使用的参数类型提供有效的默认 * 值。

评论：我意识到上面的测试只是一个例子，但由于建设性的评论可能会有所帮助，所以你去吧。

1.  在测试`getComponents`中，也测试空列表案例。另外，使用`IsIterableContainingInOrder`.

2.  在测试中，调用或验证它是否正确处理了各种非错误情况`ofComponents`似乎是有意义的。应该有一个没有参数传递给的测试。我看到这已经完成了，但为什么不直接做呢？需要测试通过的值之一在哪里：因为这将引发 NPE。`getComponents``toString``ofComponents``ofComponents( new String[]{})``ofComponents()``null``ofComponents("blah", null, "blah2")`

3.  在测试`ROOT`中，如前所述，我建议调用`ROOT.getComponents`一次并对其进行所有三个验证。此外，`ItIterableContainingInOrder`是否所有三个非空​​、大小和包含。测试`is`中的 是无关的（尽管它是语言的），我觉得不值得拥有（恕我直言）。

4.  在测试`toString`中，我觉得隔离被测方法很有帮助。我会写`toStringIsSlashSeparatedPathOfComponents`如下。请注意，我没有使用被测类中的常量。这是因为恕我直言，对被测类的任何功能更改都会导致测试失败。

    ```
    @Test     
    public void toStringIsSlashSeparatedPathOfComponents() {       
       //setup 
       String[] components = { "Test1", "Test2", "Test3" };       
       String expectedPath =  "/" + Joiner.on("/").join(components);   
       MyPath path = MyPath.ofComponents(components)

       // test
       String value = path.toStrign();

       // verify
       assertThat(value, equalTo(expectedPath));   
    } 
    ```

5.  `Enclosed`不会运行任何不在内部类中的单元测试。因此`testPathCreationFromComponents`不会运行。

最后，使用测试驱动开发。这将确保您的测试以正确的原因通过并且会按预期失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T19:02:10.133

I see you put a lot of effort to really test your classes. Good! :)

My comments/questions would be:

*   what about mocking? you do not mention any tool for this
*   it seems to me that you care a lot about the nitty-gritty details (I do not say they are not important!), while neglecting the business purpose of tested class. I guess it comes from the fact you code code-first (do you?). What I would suggest is more TDD/BDD approach and focus on business responsibilities of the tested class.
*   not sure what this gives you: "Method testing grouped in static nested classes"?
*   regarding auto-generation of test stubs etc. Simply put: don't. You will end up testing implementation instead of behaviour.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T13:50:19.097

好的，这是我对您的问题的看法：

## 是否有用于构建单元测试的技术列表？

简短的回答，不。您的问题是，要为方法生成测试，您需要分析它的作用并为每个地方的每个可能值进行测试。有/曾经有测试生成器，但是 IIRC，它们没有生成可维护的代码（请参阅[测试驱动开发的参考资料](http://www.junit.org/taxonomy/term/7)）。

你已经有了一个相当不错的检查清单，我要补充一下：

*   确保涵盖通过您的方法的所有路径。
*   确保所有重要功能都被多个测试覆盖，为此我经常使用 Parameterized。

我发现真正有用的一件事是询问这个方法*应*该做什么，而不是这个方法做*什么*。这样，您可以以更开放的心态编写测试。

我觉得有用的另一件事是减少与测试相关的样板，这样我就可以更轻松地阅读测试。添加测试越容易越好。我发现 Parameterized 非常适合这个。对我来说，测试的可读性是关键。

因此，以上面的示例为例，如果我们放弃“仅在方法中测试一件事”的要求，我们会得到

```
public static class Root {
  @Test
  public void testROOT() {
    assertThat("hasComponents", MyPath.ROOT.getComponents(), is(not(empty())));
    assertThat("hasExactlyOneComponent", MyPath.ROOT.getComponents(), hasSize(1));
    assertThat("hasExactlyOneInboxComponent", MyPath.ROOT.getComponents(), contains("ROOT"));
    assertThat("isNotNull", MyPath.ROOT, is(notNullValue()));
    assertThat("toStringIsSlashSeparatedAbsolutePathToInbox", MyPath.ROOT.toString(), is(equalTo("/ROOT")));
  }
} 
```

我做了两件事，我将描述添加到断言中，并将所有测试合并为一个。现在，我们可以阅读测试并看到我们实际上有重复的测试。我们可能不需要测试`is(not(empty())`&&`is(notNullValue())`等。这违反了每个方法一个断言的规则，但我认为这是合理的，因为您已经删除了很多样板文件而没有减少覆盖范围。

## 我可以自动执行检查吗？

是的。但我不会使用注释来做到这一点。假设我们有一个类似的方法：

```
public boolean validate(Foobar foobar) {
  return !foobar.getBar().length > 40;
} 
```

所以我有一个测试方法，上面写着：

```
private Foobar getFoobar(int length) {
  Foobar foobar = new Foobar();
  foobar.setBar(StringUtils.rightPad("", length, "x")); // make string of length characters
  return foobar;
}

@Test
public void testFoobar() {
  assertEquals(true, getFoobar(39));
  assertEquals(true, getFoobar(40));
  assertEquals(false, getFoobar(41));
} 
```

上述方法很容易根据长度分解，当然是参数化测试。故事的寓意是，您可以像使用非测试代码一样分解测试。

因此，为了回答您的问题，根据我的经验，我得出的结论是，您可以通过减少测试中的样板，通过使用参数化和因式分解的明智组合，为所有组合提供很多帮助测试。作为最后一个示例，这就是我将如何使用 Parameterized 实现您的测试：

@RunWith(Parameterized.class) public static class OfComponents { @Parameters public static Collection data() { return Arrays.asList(new Object[][] { { new String[] {"Test1", "Test2", "Test3" }, null }, { new String[] {"Test1"}, null }, { null, NullPointerException.class }, { new String[] {"Test1", "", "Test2"}, IllegalArgumentException }, }) ; }

```
private String[] components;

@Rule
public TestRule expectedExceptionRule = ExpectedException.none();

public OfComponents(String[] components, Exception expectedException) {
   this.components = components;
   if (expectedException != null) {
     expectedExceptionRule.expect(expectedException);
   }
}

@Test
public void test() {
  MyPath.ofComponents(components);
} 
```

请注意，以上内容未经测试，可能无法编译。从上面，您可以分析数据作为输入并添加（或至少考虑添加）所有内容的所有组合。例如，您没有测试 {"Test1", null, "Test2"} ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T17:48:04.643

Well, I will post 2 difference answers.

1.  As James Coplien stated unit test is worthless. I disagree with him on this issue, but may be you will find this helpful to consider to unit test less instead of searching for automatic solution.

2.  Consider to use Theories with DataPoints. I think this will minimize your problem significantly. Also, using mock can help you.

# python - 从 __init__ 中删除工作以帮助单元测试

> ID：12513185
> 
> 赞同：9
> 
> 时间：2012-09-20T13:01:20.467
> 
> 标签：python, object-initializers

这个问题的关键是帮助单元测试。如果我很忙`__init__`（即`__init__`进行复杂的初始化），我不能简单地实例化一个类的对象，但我需要模拟/存根在`__init__`.

为了说明这个问题，这里是一个例子：

```
class SomeClass(object):
    def __init__(self, dep1, dep2, some_string):
        self._dep1 = dep1
        self._dep2 = dep2
        self._some_string = some_string

        # I would need to mock everything here (imagine some even more
        # complicated example)
        for dep2element in self._dep2:
            dep2element.set_dep(dep1)
        self._dep1.set_some_string(some_string)

    def fun1(self):
        ...
    def fun2(self):
        ...
    def fun3(self):
        ... 
```

为了测试`fun*`功能，每个测试都必须执行复杂的构造。

```
class TestSomeClass(TestCase):
    def create_SomeClass(self, some_string):
        dep1 = Mock()
        # mock everything required by SomeClass' constructor

        dep2 = Mock()
        # mock everything required by SomeClass' constructor

        return SomeClass(dep1, dep2, some_string)

    def test_fun1(self):
        sc = self.create_SomeClass('some string')
        ...

    def test_fun2(self):
        sc = self.create_SomeClass('some other string')
        ...

    def test_fun3(self):
        sc = self.create_SomeClass('yet another string')
        ... 
```

我发现这是多余的，并且想知道如何在 python 中优雅地处理这个问题，如果不是通过从构造函数中移动工作的话。

**解决方案：**

正如@ecatmur 所建议的，要测试一些特定的功能，这段代码应该可以解决问题：

```
def test_some_method():
    mobject = Mock(SomeClass)
    SomeClass.fun1(mobject) 
```

使用这种方法，所有方法都将被模拟出来。如果`fun1`调用您想要执行的其他方法（例如`fun2`），您可以这样做：

```
def test_some_method():
    mobject = Mock(SomeClass)
    mobject.fun2 = SomeClass.fun2.__get__(mobject)
    SomeClass.fun1(mobject) 
```

`SomeClass.fun2.__get__(mobject)`将产生`instancemethod`将提供正确绑定的内容。

**¡万岁蟒蛇！**

原始问题：

最初的问题集中在将完成的工作`__init__`转移到单独的`init`方法和围绕该方法的不同问题上。我通常的做法是做这个

```
class SomeClass(object):
    def __init__(self, dep1, dep2, some_string)
        self._dep1 = dep1
        self._dep2 = dep2

        # lots of mumbo-jumbo here... 
```

变成这个

```
class SomeClass(object):
    def __init__(self, dep1, dep2)
        self._dep1 = dep1
        self._dep2 = dep2

    def initiate(self, some-string)
        # lots of mumto-jumbo here... 
```

普遍的看法是，将工作移出`__init__`不是一种常见的做法，对于经验丰富的 Python 开发人员来说毫无意义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T13:21:50.367

`__init__`如果您将初始化函数与经验丰富的开发人员分开编写，那么您*肯定*会将您的代码视为儿童游乐场。

如果您担心能够在不运行该`__init__`方法的情况下创建看起来像类实例的对象，请使用[Mock](http://www.voidspace.org.uk/python/mock/)：

```
def test_some_method():
    mock_object = Mock(MyClass)
    MyClass.some_method(mock_object) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T13:13:36.277

`__init__`实际上不能返回任何东西；如果您考虑如何使用它，这应该是显而易见的：

```
class Example(object):
    def __init__(self, x):
        self.x = x
        return ANYTHING

e = Example(1)   # how are you going to get ANYTHING back? 
```

使用与`initialize()`分开的方法`__init__`似乎有点傻 - 重点是您的初始化程序应该在创建对象时自动运行，所以您的示例初始化应该看起来像

```
scobj = SomeClass(dep1, dep2, 'abcdef')
# scobj.initialize('abcdef')     # <= separate call not needed! 
```

**编辑：**

如果您确实需要将代码放入 中`__init__`，我建议将其放入私有方法中并从 中调用它们`__init__`，如下所示：

```
class Example2(object):
    def __init__(self, a, b, c):
        self._init_connection(a)
        self._init_display(b)
        self.c = c

    def _init_connection(self, a):
        self.conn = make_connection(a)

    def _init_display(self, b):
        self.disp = make_display(b) 
```

...这很好，因为

*   所有初始化都在创建对象时完成（您不需要记住进行后续初始化调用）
*   您不必保留一个标志来记住您的对象是否已初始化 - 如果它存在，它已被初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T13:05:17.843

```
class Klass:
    def __init__(self):
        initialize instance here, no return 
```

`__init__`将在对象创建时自动运行，因此您无需检查它是否运行；**如果你有**一个实例，它就会运行！

关于从 init() 返回 self：我不会，因为它是就地操作。[在这里](https://stackoverflow.com/questions/1682567/why-does-pythons-list-append-evaluate-to-false)阅读第一个答案，因为它很好地解释了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T13:24:02.820

关于什么

```
class SomeClass(object):
    def __init__(self, dep1, dep2, st=None):
        self._dep1 = dep1
        self._dep2 = dep2
        if st is None:
            self._initialized = False
        else:
            self.initialize(st)

    def initialize(self, st):
        ...
        self._initialized = True
        ... 
```

?

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T23:59:02.823

`__init__()`拆分成单独的方法并没有错。如果您可以以使这些方法适当命名和可重用的方式来做到这一点，那就更好了 - 例如：

```
class SomeClass(object):
    def __init__(self, dep1, dep2, some_string):
        self.set_dependencies(dep1, dep2, some_string)

    def set_dependencies(self, dep1, dep2, some_string):
        self._dep1 = dep1
        self._dep2 = dep2
        self._some_string = some_string

        for dep2element in self._dep2:
            dep2element.set_dep(dep1)
        self._dep1.set_some_string(some_string) 
```

在这里，`remove_dependencies()`将来可以添加一个方法来将实例恢复到中性状态，然后再设置新的依赖项。该功能与初始化过程分离。

注意我已经从 中调用了它`__init__()`，即使我们不希望它在测试中运行。如果我们*不*从 调用它，则`__init__()`使用此类的人必须`set_dependencies()`在实例化后调用——这对您的类的 API 来说是不必要的复杂化。

我们可以做的是将方法存根进行测试，例如：

```
class TestSomeClass(TestCase):
    def __init__(self):
        SomeClass._old_set_dependencies = SomeClass.set_dependencies
        SomeClass.set_dependencies = lambda *args: None

    ... 
```

这是一种非常粗暴的方法，只是为了证明一个真正的观点 - 有一些很好的库可以更努力地做到这一点 - 请参阅[这个讨论](https://stackoverflow.com/questions/98053/what-is-your-favorite-python-mocking-library)，但我也推荐[Mockstar](http://mockstar.readthedocs.org/en/latest/index.html)，它是[Mock](http://www.voidspace.org.uk/python/mock/mock.html)设计的扩展来简化语义。

# openlaszlo - 如何在 openlaszlo 的 scrolledittext 中强制执行 maxlength？

> ID：12513188
> 
> 赞同：2
> 
> 时间：2012-09-20T13:01:32.313
> 
> 标签：openlaszlo, lzx

最近我试图在 openlaszlo 中创建一个可滚动的编辑文本。但由于某种原因 maxlength 属性不起作用。任何想法，例如为什么它不起作用。它是一个错误吗？

我现在正在以另一种方式进行操作。有没有更好的方法？

```
<canvas debug="true">
<include href="incubator/scrolledittext.lzx" /> 

<handler name="oninit">
canvas.answer.setAttribute('width',200);

this.answer.setAttribute('maxlength',20);

</handler>

    <scrolledittext  name="answer" x="20" y="20"  >
    <handler name="ontext">
        //this.setAttribute(maxlength,20);  
    Debug.write("greater1",this.text);  
    if(this.text.length > 20){
        var textContent = this.text;
        textContent = textContent.substring(0,20);
        updateText(textContent);
    }

    </handler>  

    <method name="updateText" args="a">
        Debug.write("UpdateText");
        this.setAttribute('text',a);        
    </method>   
    </scrolledittext>
</canvas> 
```

# c# - NHibernate CreateSQLQuery

> ID：12513191
> 
> 赞同：15
> 
> 时间：2012-09-20T13:01:37.300
> 
> 标签：c#, nhibernate

我正在尝试使用 NH CreateSQLQuery 方法获取一些数据，例如

```
IList<Logistic> LCollection = sess.CreateSQLQuery(@"select * from some_schema.logistic")
                                           .SetResultTransformer(Transformers.AliasToBean(typeof(Logistic)))
                                           .List<Logistic>(); 
```

物流类是

```
public class Logistic
{
    public virtual long? l_id { get; set; }
    public virtual long? carrier_id { get; set; }
    ...
} 
```

映射

```
public class LogisticMap : ClassMap<Logistic>
{
    public LogisticMap()
    {
        Table("some_chema.logistic");
        Id(x => x.l_id).GeneratedBy.Sequence("some_chema.logistic_sq");
        Map(x => x.carrier_id);
        ...
    }
} 
```

但我有错误

```
The type System.Decimal can not be assigned to a property of type System.Nullable`1[System.Int64] setter of MyNamespase.Logistic.l_id 
```

知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-20T13:54:57.850

`AliasToBean`当您想要检索轻量级 DTO 而不是实体时，使用转换器。（例如，如果您有一个仅显示每个实体的一些基本信息的概览屏幕，那么最好使用 DTO 并在 NHibernate 中创建一个使用 AliasToBean 转换器的查询，以便 NH 知道它不应该检索完整的实体）。

如果要使用 SQL 查询检索实体，则必须这样做：

```
var query = sess.CreateSQLQuery(@"select {l.*} from some_schema.logistic as l");

query.AddEntity ("l", typeof(Logistic));

return query.List<Logistic>(); 
```

但是，我想知道在这种情况下为什么要使用本机 SQL 查询？为什么不使用`HQL`，`ICriteria`或`QueryOver`？

# android - 以编程方式设置Listview项目的x和y坐标android

> ID：12513192
> 
> 赞同：0
> 
> 时间：2012-09-20T13:01:46.543
> 
> 标签：android, listview, android-listview

我使用列表视图。但我想设置列表视图项的 x 和 y 位置。例如：我想像下面这样绘制图像。可能吗？如果是，请给我任何想法，如果不是，请给我其他建议。

```
 ---------------------
|                     | 
|  |start point       |   
|                     |
|---------------------|
|                     |
|      |start point   | 
|                     |  
---------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:11:24.553

*   创建自定义 ArrayAdapter
*   覆盖 ArrayAdapter 的 getView
*   在 getView 中创建您的行布局或使用来自 xml 布局资源的行布局
*   对于行布局，您不能（容易）使用 x 和 y。您可以使用 android:layout_margin 或类似的东西进行定位

欲了解更多信息，这里有一个教程： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:05:31.140

在您的客户适配器中，在 getView 方法上，根据您的条件为原始布局设置 X 边距或填充。

# xml - 根据属性的返回值显示是/否

> ID：12513198
> 
> 赞同：2
> 
> 时间：2012-09-20T13:02:06.410
> 
> 标签：xml, xsl-fo

我是 XML/XSL 的新手（比如 2 天新）。我有一行我正在做一个 xsl:value-of 选择，它返回一个 True/False 属性。我想让它显示是/否，但我试图这样做没有成功。下面是我目前的线路。有人可以告诉我我需要添加什么以使其显示是或否吗？

```
<fo:block>Automatic Sprinklers Required: &#xA0;
      <xsl:value-of select="Attributes/AttributeInstance/Attribute[@id='1344297']/../Value"/>
</fo:block> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:22:58.107

使用 xsl:choose 块来测试该值。选择具有以下语法：

```
<xsl:choose>
   <xsl:when test="some Boolean condition">
    <!-- "if" stuff -->
  </xsl:when>
  <xsl:otherwise>
    <!-- "else" stuff -->
  </xsl:otherwise>
</xsl:choose> 
```

我重新格式化了您的代码以调用执行此测试并根据布尔值打印是/否的模板：

```
<fo:block>Automatic Sprinklers Required: &#xA0;
    <xsl:call-template name="formatBoolean">
       <xsl:with-param name="theBoolValue" select="Attributes/AttributeInstance/Attribute[@id='1344297']/../Value"/>
    </xsl:call-template>
</fo:block>

<xsl:template name="formatBoolean">
   <xsl:param name="theBoolValue"/>

   <xsl:choose>
       <xsl:when test="$theBoolValue = true()">
          Yes
       </xsl:when>
       <xsl:otherwise>
          No
       </xsl:otherwise>
   </xsl:choose>
</xsl:template> 
```

这段代码应该可以工作，尽管我没有测试它是否有任何语法错误。

祝你好运！

科比

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:30:57.860

这应该很简单，以下是我的 XML：

```
<form>
    <value>False</value>
</form> 
```

还有我的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:date="http://exslt.org/dates-and-times" xmlns:str="http://exslt.org/strings">
    <xsl:template match="/">
        <xsl:choose>
            <xsl:when test="/form/value = 'True'">
                <xsl:text>Yes</xsl:text>
            </xsl:when>
            <xsl:otherwise>
                <xsl:text>No</xsl:text>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

# ios - iOS6 更新后视图不旋转到横向模式

> ID：12513201
> 
> 赞同：7
> 
> 时间：2012-09-20T13:02:13.117
> 
> 标签：ios, ipad, ios-simulator, orientation, landscape-portrait

我`Landscape (left home button)`在我的`-Info.plist`文件中设置了界面方向，并且在我更新到最新版本的 xcode 之前一切正常。模拟器现在运行 iOS 6。当我在模拟器中启动我的应用程序时，它以纵向模式启动，但显示的内容好像应用程序不支持横向模式一样。它们向右旋转了 90 度并且内容不合适（我从来没有打算支持纵向模式）

任何想法在 iOS 6 中发生了什么变化以及如何让我的视图旋转？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-20T13:44:37.247

似乎 iOS6 要求您为窗口设置一个 rootViewController，而不是将控制器的视图添加为子视图。

您的代码中可能有某处：

```
[window addSubview:yourController.view]; 
```

尝试将其更改为：

```
[window setRootViewController:yourController]; 
```

反而。

# matlab - 在 Matlab 中读取具有更改字段的 csv 文件

> ID：12513202
> 
> 赞同：3
> 
> 时间：2012-09-20T13:02:14.600
> 
> 标签：matlab, csv

我正在尝试将数据文件从示波器导入 Matlab。看起来示波器制造商试图使这项任务尽可能困难。这是文件的样子：它有三列，最后两列中的值是可能有一个字母作为单位后缀的数字（例如“m”=milli、“u”=micro、“n” = nano...)，但并非总是如此，正如您在示例中看到的那样。

现在我正在做类似的事情

```
data = textscan(fid,'%d%s%s',ns,'Headerlines',1,'Delimiter',','); 
```

其中 data{1} 是一个元胞数组，我可以轻松地将其转换为向量，但 data{2} 和 data{3} 是字符串元胞数组。如果是字母，我想去掉最后一个字符，转换为向量，并根据单位后缀缩放每个元素（如果有的话）。

这是我的文件的摘录：

```
No.,Time,CH1
1,-6,0
2,-5.99999,6m
3,-5.99998,0
4,-5.99997,8m
5,-5.99996,-12m
6,-5.99995,6m
...
600006,50u,-4m
600007,60u,-8m
600008,70u,62m
600009,80u,0
600010,90u,70m
600011,100u,-104m 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:30:08.903

对于最后一列，如果值始终为 0 或终止，`m`则可以使用正则表达式去除字符。

```
value = regexprep(input_string, 'm', ''); % replace any m's with nothing 
```

您可以将其包装在一个匿名函数中并将其应用于整个单元格数组`cellfun`

```
convertFn = @(x) str2double( regexprep( x, 'm', '') );
data_column = cellfun(convertFn, data{3}); 
```

如果终止字符可以是其他值，您需要为下面的第二列应用解决方案。

转换第二列有点复杂，因为您想根据终止字符更改值。

您需要编写一个简单的函数来去除字符并返回缩放值。

```
function v = convert_str(s)
  if numel(str)==1 && strcmp(s, '0')
     v = 0;
  else 
     v = str2double(s(1:end-1)); % convert all but last char to number

     if strcmp( s(end), 'u') )
        v = v * 1e-6;
     end
  end
end 
```

然后，您可以在调用中使用这个新函数`cellfun`来转换第二列：

```
data_column = cellfun(@convert_str, data{2}); 
```

*注意：*上面的代码未经测试，但它说明了您需要做什么。

# windbg - 使用 Windbg 进行远程调试

> ID：12513205
> 
> 赞同：1
> 
> 时间：2012-09-20T13:02:39.583
> 
> 标签：windbg

我正在尝试使用 Windbg 远程调试用户模式应用程序。我使用 Windbg 作为服务器运行

```
Windbg -server npipe:pipe=PipeName,IcfEnable 
```

并尝试使用作为客户端运行的windbg连接到服务器，使用Windbg->连接到远程会话。但它无法连接到服务器，显示错误“访问被拒绝”。

不知道我做错了什么。

调试服务器是Win 8，客户端是Windows 2k8。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:58:12.670

1.  确保您遵循[此处](https://web.archive.org/web/20130605113813/http://blogs.msdn.com/b/ntdebugging/archive/2009/02/09/remote-debugging-connecting-to-a-remote-stub-using-the-microsoft-debugging-tools-for-windows.aspx)给出的步骤。

2）如果会话中的两个调试器没有运行相同的调试器版本，也会发生这种情况。

3）尝试禁用客户端计算机中的防火墙并尝试再次连接。

# actionscript-3 - 正确使用public static const，错误1119

> ID：12513207
> 
> 赞同：0
> 
> 时间：2012-09-20T13:02:48.893
> 
> 标签：actionscript-3

我有一个链接到 MovieClip 的 SpeachBubble 类：

```
 import flash.display.MovieClip;
    import flash.geom.Matrix;

    public class SpeachBubble extends MovieClip {

        public static const SPEACH_POSITION_LEFT:String = 'speachPositionLeft';
        public static const SPEACH_POSITION_RIGHT:String = 'speachPositionRight';

        private var currentPosition = SPEACH_POSITION_LEFT;

    } 
```

我还有一个名为“Speak”的方法，它附加到我的角色上，该方法如下所示：

```
public function speak(text:String, position:String, displayTime:Number = 2500) 
```

我希望能够像这样调用 speak 方法：

```
man.speak("I'm saying something!", SpeachBubble.SPEACH_POSITION_LEFT); 
```

但我只是得到错误：

**1119：通过静态类型 Class 的引用访问可能未定义的属性 SPEACH_POSITION_LEFT。**

**编辑：**我已经在[这里](http://www.mediafire.com/?6o3b4n3wwgo7o55)上传了完整的项目，我正在使用 CS6，但已保存为 CS5 版本，以防您尚未升级。它包含 1 个 fla 文件和一些类，对于入口点，请参见时间轴上的第一帧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:46:13.287

您的问题在于您的 CS6 链接设置。您没有使用完全限定的命名空间。

在您的库中，右键单击您的“人”资产，然后转到符号属性。在您的类路径中，使用**classes.intro.Man** - 您当前只是将它作为“Man”，这相当于在项目目录的根目录中有一个 Man.as 文件。

使子类为空，因为它是从您的类文件派生的。（尽管我相信如果它找到具有该名称空间的类文件，它无论如何都会忽略它）

为你的演讲泡泡做同样的事情

# c - __try 和 __exception 可移植性

> ID：12513209
> 
> 赞同：2
> 
> 时间：2012-09-20T13:02:56.020
> 
> 标签：c, exception-handling, seh

你好，再次对不起

我正在阅读英特尔的“Detecting Multiprocessor Topology in IA-32 Architecture”。我正在重新编写示例。但是我在代码中读到了这句话 __try 和 __except。

我在 MSDN Microsoft 网页上找到了一些信息，但我使用的是 gcc 编译器/链接器

__try 和 __except 是 gcc 中的有效句子吗？__try 和 __except 在 *nux 环境中是可移植的句子吗？确实存在比 __try 和 __except 语句更好的模式用于 C 中的异常处理？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:24:08.503

# General considerations

According to [MSDN](http://msdn.microsoft.com/en-us/library/zazxh1a9%28v=VS.80%29.aspx), `__try` and `__except` are extensions to the C language. As such, they are not portable out of the box.

For some applications it might be possible to mimic their behaviour using macros and a `setjmp`/`longjmp` constructs. In general this will not be the case. In particular, MSDN states that

> The `__except` expression executes in the scope of the `__try` body.

which cannot be achieved using macros alone.

# Your questions

> are `__try` and `__except` valid sentences in gcc?

No, they are not, as gcc does not support this Microsoft dialect of C.

> are __try and __except portable sentences on *nux environments?

No, they are not, although there are ways to achieve similar exception handling on *nix as well.

> do exist a better mode than __try and __except sentences for exception handling in C?

There is a strong reason to use C++ when you do exception handling. C++ scoped objects with destructors are much more robust in the presence of exceptions than standard C resource management. So while there are implementations which provide `try`and `catch` for C one way or another, I'd advise against them and favor C++ instead. Exception handling in C++ is part of the standard and therefore supported by all standards-compliant compilers, without portability issues.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:26:26.273

__try 和 __except 是（如 Microsoft 所述）C/C++ 语言的扩展。所以它在 gcc 中不可移植。我认为微软把这些放进去是为了让纯 C（不使用 C++ 编译器）可以有类似于异常处理的东西。* *S* *tructured * *E* *xception * *H* *andling (SEH) 是相当低级的，据我所知，甚至微软自己的 C++ 异常处理在引擎盖下也使用 SEH。

我对整个事情的看法是，如果您看到 __try 和 __except，只需将其替换为 try 和 catch，然后使用 C++ 编译器进行编译。您当然必须更换传递给 __except 的过滤器，但这没什么大不了的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:08:39.033

C 标准没有异常处理支持。C++ 可以。有许多使用 setjmp 的 try/catch 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:13:14.473

您可能想查看以下链接：

[gcc.gnu.org/onlinedocs/libstdc++/manual/using_exceptions.html](http://gcc.gnu.org/onlinedocs/libstdc++/manual/using_exceptions.html)

[www.autohotkey.com/community/viewtopic.php?t=31475](http://www.autohotkey.com/community/viewtopic.php?t=31475)

# unit-testing - 模拟动态查找器

> ID：12513210
> 
> 赞同：0
> 
> 时间：2012-09-20T13:02:56.553
> 
> 标签：unit-testing, grails, groovy, grails-orm

在测试中我需要覆盖一些域类的功能，像这样

```
SomeDomain.countBySomeField(Paramater) 
```

为了解决这个问题，我尝试了

```
@Mock([SomeDomain])
class SomeDomainTests ...
...
    void test() {
        SomeDomain.metaClass.static.countBySomeField = { -> 1}
    } 
```

但是当这个方法在控制器中调用（由测试调用）时，我所期望的不会发生。可能，你说去阅读文档，但我没有找到可以告诉我如何做到这一点的东西。我将不胜感激任何可以说我哪里错的文章或示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:49:40.563

我通过这样做解决了我的问题

```
@TestFor(SomeController)
@Mock([SomeDomain])
@TestMixin(DomainClassUnitTestMixin)
class SomeControllerTests {
    ...
    void test() {
        SomeDomain.metaClass.'static'.countBySomeParam = { a -> 0}
    }
} 
```

# jqgrid - 自定义验证消息显示选项值而不是选项文本

> ID：12513211
> 
> 赞同：1
> 
> 时间：2012-09-20T13:02:58.570
> 
> 标签：jqgrid

在网格中有一列，用户可以使用下拉菜单设置值。我在该列上调用了一个自定义验证。如果验证失败，它会显示带有选项值而不是选项文本的消息。如何将此值更改为文本？

```
<script language="javascript" type="text/javascript">
var i = 1;
var  lastSelection=0;
$(function()
{
     $("#curruntppeGridgrid").jqGrid({
            url:'getcostperformancecurreuntPPE',
            datatype: "json",
            jsonReader:{"repeatitems":false,unformat:Unformat_Select},
            colNames:[category], 
            colModel:[                  
                        {name:'category',index:'category',align:'center',editable: true, hidden: false, edittype: 'select',
                       editoptions: { multiple: false, value:catList},
                       editrules: {required:false,custom:true,custom_func:categorycheck}
                       }                   
                       ],
            cmTemplate:{sortable:false},
            width: eval('gridWidth()'),
            pgbuttons:false,
            pginput:false,
            viewrecords:false,
            //pager: '#curruntppeGridpager',
            toppager:true,
            multiselect:true,
            editurl: 'editsurveyppe',
            caption: currentPPE,
            //forceFit:true,
            hiddengrid:true,
            hidegrid:true,
            headertitles:true,
            postData: { appId: function() { return $('#selectApplication option:selected').val(); }
            },
            onHeaderClick : function(gridstate){

                if(gridstate == 'visible'){
                    $("#curruntppeGridgrid_toppager").show();
                }
                else{
                    $("#curruntppeGridgrid_toppager").hide();
                }

            },
            loadComplete: function() {
                $('#del_curruntppeGridgrid_top').removeClass('ui-state-disabled');//this is added to enable delete button after record reload
                if(jQuery('#curruntppeGridgrid').jqGrid('getGridParam','gridstate')!='visible')
                {
                    $("#curruntppeGridgrid_toppager").hide();
                }
                else{
                    $("#curruntppeGridgrid_toppager").show();
                }

            },
            afterInsertRow:function(){//this is added to disable delete button while adding record
                $('#del_curruntppeGridgrid_top').addClass('ui-state-disabled');
            }
            ,ajaxSelectOptions: { cache: false }

        });

        jQuery("#curruntppeGridgrid").jqGrid('navGrid',"#curruntppeGridpager",{cloneToTop:true,position:'right',edit:false,add:false,del:true,search:false,refresh:false,pgbuttons:false},
                {},{},{mtype:'POST',reloadAfterSubmit:true,
                    serializeDelData: function (postdata) {
                        var row = jQuery('#curruntppeGridgrid').getRowData(postdata.id);
                        // append postdata with extra information 
                        return {id: postdata.id, oper: postdata.oper,gridId:'current'};
                    }},{});

        //top toolbar
        jQuery("#curruntppeGridgrid").jqGrid('inlineNav','#curruntppeGridgrid_toppager',
                {position:'right',editParams : {aftersavefunc:function()
                    {
                        $("#curruntppeGridgrid").jqGrid().trigger("reloadGrid");
                        $('#del_curruntppeGridgrid_top').removeClass('ui-state-disabled');//this is added to enable delete button after saveing record
                    },oneditfunc: function() {
                        $('#del_curruntppeGridgrid_top').addClass('ui-state-disabled');//this is added to disable delete button while editing record
                    },
                    afterrestorefunc :function() {
                        $('#del_curruntppeGridgrid_top').removeClass('ui-state-disabled');//this is added to enable delete button while cancelling record
                    }
                    ,extraparam:{
                        currentApplicationId: function() { return $("#selectApplication option:selected").val(); }
                    }
                  },

                  "restoreAfterSelect":false
                });

});     

function categorycheck(value,colname)
{
    if(parseInt(count)>=1){
        //return [false,':You can add only one (Inner/Outer) product per Category'];
        return [false,':'+youCanAddOnlyOneInnerOuterProductPerCategory];
    }else{
        return [true,""];
    }

}

function Unformat_Select(cellvalue, options, cellobject)
{
    var unformatValue = '';

    $.each(options.colModel.editoptions.value, function (k, value)
            {
        if (cellvalue == value)
        {
            unformatValue = k;
        }
            });

    return unformatValue;

}

</script>
<div id="curruntppeGridContainer" class="pad7 ansellGridContainer">
<table id="curruntppeGridgrid" class="ansellGrid"></table>
<div id="curruntppeGridpager" class="scroll" style="text-align:center;"></div>
</div>
<div id="curruntppeGriddialogSelectRow" title="Warning" style="display:none">
<p>
Please select row
</p>
</div> 
```

# android - 未调用自定义基本适配器的 getView

> ID：12513213
> 
> 赞同：0
> 
> 时间：2012-09-20T13:02:59.163
> 
> 标签：android

我正在尝试为此显示一个列表，我使用了一个类 Ios.java

```
public class Ios extends Activity implements OnItemClickListener,OnClickListener

        {
        list=(ListView) findViewById(R.id.list);
        list.setOnItemClickListener(this);
        String DATA[] = {"io1","io2","io3","io4","io5"};
        IosListAdapter obj = new IosListAdapter(this.getApplicationContext()
                ,R.layout.row, DATA);
        list.setAdapter(obj);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

    }} 
```

我的自定义适配器如下：

```
public IosListAdapter(Context con, int rid,String[] dATA) {
        // TODO Auto-generated constructor stub
        this.con = con;
        this.DATA = dATA;
        this.rid = rid;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        LayoutInflater loi = LayoutInflater.from(con);          
        View v = loi.inflate(rid, parent, false);   
        ImageView iv= (ImageView) v.findViewById(R.id.t1);
        TextView tv1 = (TextView) v.findViewById(R.id.t4);
        iv.setBackgroundResource(arrow);
        tv1.setText(DATA[position]);
        return v;
    }} 
```

和 demolist.xml::

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="#f1eff0">

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:stretchColumns="1" android:gravity="center_vertical"
        android:background="@drawable/toptab" android:id="@+id/tb1">

        <TableRow>

            <Button android:id="@+id/btnback" android:background="@color/hover_bckbtn"
                android:text="Back" android:textColor="#ffffff" android:textSize="14sp"
                android:textStyle="normal" android:typeface="normal"
                android:layout_marginLeft="5dp" />

            <TextView android:id="@+id/tvnormalcallreg" android:text="Call Registration"
                android:textColor="#ffffff" android:textSize="18sp"
                android:layout_gravity="center" android:textStyle="normal"
                android:typeface="normal" />

            <Button android:id="@+id/btnregister" android:textColor="#ffffff"
                android:background="@color/hover_button" android:text="Register"
                android:textSize="14sp" android:textStyle="normal" android:typeface="normal"
                android:layout_marginRight="5dp" />
        </TableRow>
    </TableLayout>

    <TableLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:stretchColumns="0"
        android:layout_marginRight="30dp">

        <TableRow android:gravity="center_vertical"
            android:layout_width="fill_parent">

            <LinearLayout android:layout_width="wrap_content"
                android:layout_height="wrap_content" android:orientation="vertical">

                <TextView android:id="@+id/top" android:layout_height="wrap_content"
                    android:textStyle="bold" android:layout_width="wrap_content"
                    android:singleLine="true" android:textColor="#ffffff"
                    android:typeface="normal" />

                <TextView android:id="@+id/address" android:layout_width="wrap_content"
                    android:layout_height="wrap_content" android:textSize="10sp"
                    android:textColor="#ffffff" android:typeface="normal"
                    android:layout_marginTop="-2dp" />

                <TextView android:id="@+id/tvdept" android:layout_width="wrap_content"
                    android:layout_height="wrap_content" android:textSize="10sp"
                    android:textColor="#ffffff" android:typeface="normal"
                    android:layout_marginTop="-2dp" />

            </LinearLayout>

        </TableRow>

    </TableLayout>

    <ListView android:id="@+id/list" 
        android:layout_below="@+id/toptbl"  
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp" 
        android:layout_width="fill_parent" 
        android:cacheColorHint="#00000000"
        android:fadingEdge="none"
        android:layout_marginBottom="50dp"/>

    <TableLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:layout_alignParentBottom="true"
        android:id="@+id/bottom">

        <TableRow android:background="@drawable/toptab"
            android:gravity="center">

            <ImageView android:layout_width="wrap_content"
                android:layout_height="wrap_content" android:background="@drawable/logobottom" />
        </TableRow>

    </TableLayout>

</RelativeLayout> 
```

它运行良好我面临的唯一问题是列表没有显示，当我调试它时，我发现适配器的 getView 方法从未被调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:05:33.977

您的`getCount`方法应根据您提供给适配器的数据返回您拥有的行数。像这样的东西：

```
@Override
public int getCount() {
    return DATA.length;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:21:55.283

它对上述答案有所改进。您正在扩展的 Adapter 类是什么？我在您的构造函数中看不到对 super 的任何调用。我猜你正在扩展 ArrayAdapter，或者什么。你必须像这样修改你的 getCount() ：

```
@Override
    public int getCount() {

    return (DATA == null) ? 0 : DATA.length;
    } 
```

# c# - 为什么我的 Linq 查询没有更新数据库？

> ID：12513217
> 
> 赞同：0
> 
> 时间：2012-09-20T13:03:07.120
> 
> 标签：c#, asp.net, linq

想知道是否有人可以看到为什么我收到错误“未找到或更改行”。当我执行此 LINQ 查询时。

该行在那里并且数据正在被拾取，但是当涉及到更新时，我得到了上面提到的错误。

```
aboDataDataContext dc = new aboDataDataContext();

        var orders = dc.GetOrderToAcknowledges;

        //Get the TWE Order ID and Store in DB.
        foreach (var order in orders)
        {
            int orderId = dc.amzOrders.Single(o => o.amzOrderId == order.amzOrderId).id;
            DateTime now = DateTime.Now;

            GetTWEOrderID(orderId, now.ToString());

            amzOrder orderUpdate = dc.amzOrders.Single(o => o.id == orderId);
            orderUpdate.acknowledged = true;
            orderUpdate.lastUpdate = Convert.ToDateTime(now);

            dc.SubmitChanges();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:16:09.873

确保设计器为您的实体显示**完全相同的字段**，例如您的数据库架构。

当数据库中存在未在实体**中更新**的更改时，通常会发生此错误。

例如，可能会更改表列以允许`null`值，但实体未更新以识别更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:18:57.623

解决了问题，查看了 DaveHogan 所说的内容，并稍微移动了一下，也更新了一些东西......

```
var ou = dc.amzOrders.Single(o => o.amzOrderId == order.amzOrderId);
int orderId = ou.id;
DateTime now = DateTime.Now;

ou.acknowledged = true;
ou.lastUpdate = Convert.ToDateTime(now);

dc.SubmitChanges();

GetTWEOrderID(orderId, now.ToString()); 
```

# c# - Windows Phone 7 模拟器 互联网

> ID：12513220
> 
> 赞同：1
> 
> 时间：2012-09-20T13:03:13.640
> 
> 标签：c#, windows-phone-7, window

我真的很难让 Windows Phone 7 模拟器连接到互联网。以下事情不是问题：

*   我的代理设置是正确的。我可以通过 IE 浏览互联网，我的同事可以使用相同的设置进行连接。

*   我没有安装提琴手，所以这不应该引起问题。

*   我没有收到启动模拟器或使用模拟器的错误消息。

我已经卸载并重新安装了 SDK 并将其修补到最新版本，但所有这些都可以使用。

当我的手机连接到我的电脑时，我遇到了同样的问题，它会阻止我通过手机浏览互联网。

值得注意的是，我可以访问内部站点，这些站点要么在我的例外列表中定义，要么从代理服务器转发到内部 DNS。

在 Windows 7 Pro x64 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:53:32.217

当您使用浏览器访问站点时，如果连接是从模拟器发出的，如何使用[Wireshark进行测试。](http://www.wireshark.org/)未能使用互联网的原因可能是多方面的。让我们首先消除模拟器正在发送 HTTP 请求的事实。你知道如何使用 Wireshark 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:44:29.403

我认为您需要使用 Proxifier 之类的工具 - 一种*可以*将传出请求重定向到代理的工具，因为据我所知，WP7 模拟器不支持代理。

# .htaccess - 301重定向多个页面

> ID：12513221
> 
> 赞同：0
> 
> 时间：2012-09-20T13:03:18.880
> 
> 标签：.htaccess, mod-rewrite

我的重写规则几乎可以工作，但仍然存在一些问题。这是代码：

```
RewriteEngine on
RewriteRule ^tag/(.*)$ /?s=$1&search=GA [L,R=301] 
```

现在的**第一个**问题是重定向链接到：

```
mydomain.com/?s=tag/&search=GA 
```

我怎样才能摆脱第二个斜线？

现在**第二个**问题......当标签包含超过 1 个单词（例如标签营销提示）时，重定向是：

```
mydomain.com/?s=marketing-tips/&search=GA 
```

如何将该 - 符号转换为 + 符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:57:06.200

尝试这个：

```
# getting rid of trailing slash:
RewriteRule ^tag/(.*?)/?$ /?s=$1&search=GA [L]

# change "-" with "+":
RewriteCond %{QUERY_STRING} ^s=([^&]+)-([^&]+)&(.*)
RewriteRule ^(.*)$ /$1?s=%1+%2&%3 [L,NE]

# if there's no more "-", redirect:
RewriteCond %{QUERY_STRING} ^s=([^&-]+)(&|$)
RewriteRule ^(.*)$ /$1 [L,R=301] 
```

当我转到类似的 URL 时`mydomain.com/tag/some-thing-else-lots-of-dashes/`，我会被重定向到`mydomain.com/s=some+thing+else+lots+of+dashes&search=GA`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:13:52.157

看起来您的正则表达式正在从其集合中的传入 URL 中提取斜杠，尝试将其移出并使其成为可选，我还让您的选择器不那么贪婪：

```
RewriteRule ^tag/(.*?)/?$ /?s=$1&search=GA [L,R=301] 
```

# xcode - 适用于 iOS6/Xcode 4.5 的 Facebook SDK 无法正常工作

> ID：12513222
> 
> 赞同：13
> 
> 时间：2012-09-20T13:03:22.213
> 
> 标签：xcode, facebook, sdk, ios6, xcode4.5

> **可能重复：**
> [文件是通用的（3 个切片），但不包含 iOS 上静态库的 (n) armv7s 切片错误，无论如何要绕过？](https://stackoverflow.com/questions/12402092/file-is-universal-3-slices-but-does-not-contain-an-armv7s-slice-error-for-st)

最近将 Xcode 和我的 iOS 设备升级到各自的最新版本，我现在无法使用 Facebook SDK（版本 3.0.8）为设备构建应用程序 - 在模拟器上构建工作正常。

我在尝试构建时收到的错误：

```
file is universal (3 slices) but does not contain a(n) armv7s slice: ....FacebookSDK.framework/FacebookSDK for architecture armv7s 
```

我注意到在 iOS SDK 登录页面（[http://developers.facebook.com/ios/](http://developers.facebook.com/ios/)）上，他们有这样一段文字。

*升级到 3.0 SDK。在接下来的几周内，我们将添加对 SDK 中备受期待的 iOS 6 集成的支持。*

所以..是这样吗？在他们支持 iOS6 之前，我真的无法继续工作数*周吗？*

我希望有一个快速解决这个问题的方法，当然我不能成为这种情况下唯一的一个。

谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-22T02:11:37.073

对于临时修复，您可以按照 Sudhakar 所说的进行操作，但该应用程序无法在 iPhone 5 上运行（或者至少在我的测试中没有运行）。你真的需要一个正确编译的 SDK。

当前的 Facebook SDK 是为 armv6 构建的。我听说他们正在努力尽快推出为 armv7 构建的新版本。

同时，您可以从 github 克隆 facebook SDK 并自己编译 SDK 以使用 armv7。以下是说明：

1.  从 git 中心页面 (https://github.com/facebook/facebook-ios-sdk) 下载或克隆源代码的副本
2.  打开 xcode 项目并在构建设置中将架构更改为 armv7。
3.  保存并关闭
4.  导航到 /scripts 并在终端中运行 build_all.sh

然后，这将编译源和输出 builds/FacebookSDK.framework 为了让它工作，我必须将 git 存储库克隆到 /Desktop/iOS 我用新创建的版本替换了我的应用程序中的 FacebookSDK.framework，它的工作方式就像一种魅力。

祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-20T13:57:22.833

单击您的 Xcode 项目 -> 在架构选项卡中 -> 有效架构 -> 仅保留 armv7 并删除 armv7s。就我而言，它工作正常，这只是临时解决方案。

# facebook - 您如何为 Facebook 页面创建移动友好的 Like Gate？

> ID：12513223
> 
> 赞同：3
> 
> 时间：2012-09-20T13:03:30.003
> 
> 标签：facebook, mobile, facebook-like

我在我的一些 Facebook 页面上设置了一个赞门，我收到很多投诉，说自从 facebook 网站的移动版本和 facebook 应用程序以来，人们无法通过他们的移动设备访问内容ios/android，不支持 Facebook 上的标签。

我看到那里有一些服务（我不确定它们的合法性），它们提供了一种为您的页面标签创建类似移动设备的门的方法，但我找不到任何关于他们如何做到这一点的文档。这些服务不适合我，因为我的选项卡上的内容是自定义的和动态的。

那么，如何为移动页面创建一个插页式页面，要求访问者在 Facebook 上喜欢我的页面才能继续？这必须适用于新用户以及重新访问选项卡且*无需*安装到应用程序的现有用户。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:40:46.180

您可以对移动网站采取的一种方法是通过 JS SDK 检查用户是否喜欢相关页面。

如果您的应用程序有登录用户，您可以`authResponseChange`在 JS SDK 初始化中订阅 FB 事件，或者直接调用函数发出 API 请求以验证用户是否是您的页面的粉丝。

在您的初始化中：

```
FB.init({appId: YOUR_FB_APP_ID_HERE });
window.fbAsyncInit = function() {
  // React to a user clicking an on-page Like button:
  FB.Event.subscribe("edge.create", verifyUserLikesPage);     
} 
```

您可以验证用户是否喜欢类似处理程序中的相应页面：

```
function verifyUserLikesPage() {
  FB.api("/me/likes/"+FBID_OF_PAGE_TO_ENSURE_THEY_LIKE, function(apiResponse){
    if (apiResponse.data && apiResponse.data.length > 0)
      // User likes the page. Enabled them to proceed
    else
      // User does not like the page. Require they click Like.
  }
} 
```

有关通过 JS 订阅的 edge.create 的更多信息，请访问：[https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# mongodb - 我可以设置 MongoDB 查询的优先级，以便将批处理/归档操作交给用户请求吗？

> ID：12513229
> 
> 赞同：1
> 
> 时间：2012-09-20T13:03:53.093
> 
> 标签：mongodb, concurrency, locking

我已经使用 Mongo 的 map/reduce 有一段时间了，这会阻止其他操作，因为 2.0 中的 JS 引擎取出了锁（或者我相信）。我只是在 2.2 中试验新的聚合框架，并希望由于它只是读取它不需要锁定，但根据 db.currentOps() 它是锁定的。

因此，关于新的聚合框架（实际上是任何 MongoDB 操作），我想知道是否可以指示某个操作的优先级，以便 MongoDB 可以智能地将低优先级操作（例如一些后台更新）生成给时间敏感的高优先级操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:00:56.623

在此[文档](http://www.mongodb.org/display/DOCS/How+does+concurrency+work#Howdoesconcurrencywork-Operations)中，您可以看到它说 Map Reduce “允许大量并发操作，但仅限于其他 javascript 执行。”

所以这意味着它已经产生了对数据库的操作。另外，这主要是由于 map/reduce 是一个单线程的 JavaScript 操作。

但是，如果您想确保没有锁定，您可以将 Map Reduce 的输出写入另一个数据库，然后将集合移动到原始数据库。

```
>use admin
>db.runCommand( {renameCollection: "mapreducedb.mycol", to: "appdb.mycol"} ) 
```

聚合框架也一样

**编辑：**不能用于聚合框架（从 2.2 开始），因为它没有 {{$out}} 运算符来写入另一个数据库。但是聚合操作仍然可以安全地在生产/主数据库上执行，因为这些操作的屈服仍然会发生。

# spring - 基于用户的动态后注销重定向网址？

> ID：12513234
> 
> 赞同：3
> 
> 时间：2012-09-20T13:04:13.420
> 
> 标签：spring, grails, spring-security

我想知道如何使用自定义注销处理程序实现注销后重定向。我已经实现了一个 CustomLogoutSuccessHandler 但我无法访问以前由登录用户设置的 http 会话数据。数据总是空的......

```
class CustomLogoutSuccessHandler extends SimpleUrlLogoutSuccessHandler {

    private static final ThreadLocal<Authentication> AUTH_HOLDER = new ThreadLocal<Authentication>()

    void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {
        AUTH_HOLDER.set authentication

        // reading session variable...
        request.session?.variable // but this is always empty

        try {
            super.handle(request, response, authentication)
        }
        finally {
            AUTH_HOLDER.remove()
        }
    }

    @Override
    protected String determineTargetUrl(HttpServletRequest request, HttpServletResponse response) {
        Authentication auth = AUTH_HOLDER.get()

        String url = super.determineTargetUrl(request, response)

        // do something with the url based on session data..

        url
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:36:04.410

我不知道是否有任何简单的方法可以做到这一点，但提出了以下解决方案。

您所要做的就是在 LogoutSuccessHandler 中设置 setTargetUrlParameter。为此，我使用了 Lincoln Baxter 编写的 HttpServletRequestWrapper 的实现，[此处](http://ocpsoft.org/opensource/how-to-safely-add-modify-servlet-request-parameter-values/)为向当前请求添加参数。这是相关的代码。

```
public class PrettyFacesWrappedRequest extends HttpServletRequestWrapper
{
    private final Map<String, String[]> modifiableParameters;
    private Map<String, String[]> allParameters = null;

    /**
     * Create a new request wrapper that will merge additional parameters into
     * the request object without prematurely reading parameters from the
     * original request.
     * 
     * @param request
     * @param additionalParams
     */
    public PrettyFacesWrappedRequest(final HttpServletRequest request, 
                                                    final Map<String, String[]> additionalParams)
    {
        super(request);
        modifiableParameters = new TreeMap<String, String[]>();
        modifiableParameters.putAll(additionalParams);
    }

    @Override
    public String getParameter(final String name)
    {
        String[] strings = getParameterMap().get(name);
        if (strings != null)
        {
            return strings[0];
        }
        return super.getParameter(name);
    }

    @Override
    public Map<String, String[]> getParameterMap()
    {
        if (allParameters == null)
        {
            allParameters = new TreeMap<String, String[]>();
            allParameters.putAll(super.getParameterMap());
            allParameters.putAll(modifiableParameters);
        }
        //Return an unmodifiable collection because we need to uphold the interface contract.
        return Collections.unmodifiableMap(allParameters);
    }

    @Override
    public Enumeration<String> getParameterNames()
    {
        return Collections.enumeration(getParameterMap().keySet());
    }

    @Override
    public String[] getParameterValues(final String name)
    {
        return getParameterMap().get(name);
    }
} 
```

然后在 CustomLogoutSuccessHandler 中，我将此 targetUrl 添加为参数，如下所示：

```
@Component
public class MyCustomLogoutSuccessHandler extends SimpleUrlLogoutSuccessHandler {

    @Override
    public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response,
            Authentication authentication) throws IOException, ServletException {
       HttpServletRequest wrappedRequest = request;

        if (authentication != null) {
           //do something with the Principal and add the corresponding url
           Map<String, String[]> extraParams = new TreeMap<String, String[]>();
           extraParams.put("targetUrl", new String[] {"/target.xhtml"});
           wrappedRequest = new PrettyFacesWrappedRequest(request, extraParams);
           setTargetUrlParameter("targetUrl");
        }
        setDefaultTargetUrl("/general/main.xhtml");
        super.onLogoutSuccess(wrappedRequest, response, authentication);       
    }
} 
```

以及对 applicationContext 的相关更改：

```
<http>
    <logout logout-url="/j_spring_security_logout"
                success-handler-ref="myCustomLogoutSuccessHandler"
                invalidate-session="true"/>
</http>
<beans:bean id="myCustomLogoutSuccessHandler" class="com.examples.MyCustomLogoutSuccessHandler"/> 
```

# autocomplete - Liferay AUI 自动完成限制选择

> ID：12513235
> 
> 赞同：3
> 
> 时间：2012-09-20T13:04:19.677
> 
> 标签：autocomplete, liferay

在表单编译期间，我需要能够插入一个值，显示已使用值的列表（通常的列表框行为）。但我还需要能够输入一个新值，所以我选择了 aui:autocomplete（代码如下）。

默认情况下，它允许选择由“delimChar”分隔符分隔的多个项目。有什么方法可以限制为 1 个单值选择（或新值）？

```
var catArray = new Array();
    <%for (String s : categoryList) {%>
        catArray.push('<%=s%>');
    <%} %>
    var autoCompleteCategory = new A.AutoComplete( 
    { 
        contentBox: '#<portlet:namespace />contactOptions',
        input:'#<portlet:namespace/>category',
        dataSource: catArray, 
        delimChar: ',', 
        typeAhead: true, 
    }).render(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:34:18.323

将[评论](https://stackoverflow.com/questions/12513235/liferay-aui-autocomplete-limit-selection#comment16930531_12513235)作为答案以获得更好的可见性：

`delimchar: ','`您可以从以下代码中删除该属性：

```
var catArray = new Array();
    <%for (String s : categoryList) {%>
        catArray.push('<%=s%>');
    <%} %>
    var autoCompleteCategory = new A.AutoComplete( 
    { 
        contentBox: '#<portlet:namespace />contactOptions',
        input:'#<portlet:namespace/>category',
        dataSource: catArray, 
        delimChar: ',', // **remove this attribute**
        typeAhead: true, 
    }).render(); 
```

我认为这应该有效。

在尝试之前还要清除浏览器缓存:)

# asp.net-mvc-3 - 我可以在 mvc3 中使用 AdditionalMetadata 和编辑器模板吗？

> ID：12513240
> 
> 赞同：2
> 
> 时间：2012-09-20T13:04:36.800
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我需要为不同类型的数据创建一个编辑器模板，例如：对于字符串，我需要一个用于 largeString 和 shortstring 的 EditorTemplate

我发现对我来说最好的方法是使用编辑器模板。那么我可以使用 AdditionalMetadata 吗？对于这样的事情？

```
 [UIHint("StringLarge")]
    [AdditionalMetadata("width", "50px")]
    public DateTime Date { get; set; } 
```

我的编辑器模板 StringLarge.cshtml

```
@inherits System.Web.Mvc.WebViewPage<System.String> 

if("have AdditionalMetadata"){
@Html.TextBox("", Model, new { @class = "StringLarge" })
}
else
{
@Html.TextBox("", Model, new { @class = "StringShort" })
} 
```

我可以这样做还是只为 stringLarge 和 StringShort 创建单独的 EditorTemplate？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:09:11.423

您可以通过编写实现[IMetadataAware](http://msdn.microsoft.com/en-us/library/system.web.mvc.imetadataaware.aspx)接口的自定义属性来做到这一点：

```
public class MyStringsAttribute : Attribute, IMetadataAware
{
    private readonly string _value;
    public MyStringsAttribute(string value)
    {
        _value = value;
    }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.TemplateHint = "Strings";
        metadata.AdditionalValues["someKey"] = _value;
    }
} 
```

接着：

```
[MyStrings("somevalue")]
public DateTime Date { get; set; } 
```

最后在您的自定义编辑器模板 ( `~/Views/Shared/EditorTemplates/Strings.cshtml`) 中，您可以检查是否存在此附加元数据：

```
@{
    var additionalMetadata = (string)ViewData.ModelMetadata.AdditionalValues["someKey"];
}

@if (string.Equals(additionalMetadata, "somevalue"))
{
    ...    
}
else
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:48:45.590

使用 [附加元数据]

视图模型：

```
 [UIHint("StringCorto")]
    [AdditionalMetadata("style", "width:100px")] 
    public string Nit { get; set; } 
```

编辑器模板：

```
@inherits System.Web.Mvc.WebViewPage<System.String> 

@{
    this.ViewData.ModelMetadata.AdditionalValues.Add("class", "StringCorto");
}

@Html.TextBox(string.Empty, ViewContext.ViewData.TemplateInfo.FormattedModelValue, this.ViewData.ModelMetadata.AdditionalValues) 
```

# c# - 如何将图片框动态添加到图片框数组中

> ID：12513241
> 
> 赞同：0
> 
> 时间：2012-09-20T13:04:43.147
> 
> 标签：c#, arrays

您好，我的 form1 中有 20 个图片框，我已经定位。我想将这 20 个图片框添加到我的图片框数组中。我需要帮助

```
 private void Form1_Load(object sender, EventArgs e)
    {
       Control[] pBoxes = new PictureBox[20];
                    for (int i = 0; i < 20; i++)
                    {
                        pBoxes[i] = new PictureBox();
                        PBoxes[i] =System.Windows.Find("PictureBox" + i, true);
                    }
    } 
```

我试过这样但它没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:08:28.003

您正在创建*新的*PictureBox，这肯定不是您想要的。相反，您需要在表单中获取 PictureBox 的*现有*实例。由于它们已经添加到您的表单中，因此它们可能已经作为成员存在`Form1`（尤其是如果您使用设计器）。尝试：

```
var pBoxes = new PictureBox[] {pictureBox1, pictureBox2, pictureBox3, ...}; 
```

*否则，您还可以执行以下操作来获取所有*`PictureBox`直接*子*级的数组`Form1`：

```
var pBoxes = this.Controls.OfType<PictureBox>().ToArray(); 
```

请注意，如果 PictureBoxes 位于其他容器（例如 Panels）中，您将不得不递归所有容器以获取所有容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:08:36.763

您可以使用 Linq 轻松获取所有 Picturebox ..

```
private void Form1_Load(object sender, EventArgs e)
{
   var pBoxes = this.Controls.OfType<PictureBox>();
} 
```

# .net - MVC3 路由 - href 添加了额外的路由

> ID：12513242
> 
> 赞同：0
> 
> 时间：2012-09-20T13:04:46.940
> 
> 标签：.net, asp.net-mvc-3, routing

我有一个 html 助手：actionLink 在“a href”中生成一个“img”

所以这：

```
Html.ActionImage"Create", "Premises", "~/Images/Views/Premises/LicensableActivitiesButton.png", "Licensable Activities", new { id = "licensableActivitiesImg" })</div> 
```

生成这个：

```
<a id="licensableActivitiesImg" href="/Users/Premises/Create"><img src="/Images/Views/Premises/LicensableActivitiesButton.png" alt="Licensable Activities"> 
```

问题是它将'/Users/'附加到href的开头，我不知道为什么。这个附加也以我的开始形式发生：

```
using (@Html.BeginForm("Create", "Premises", FormMethod.Post, new { id = "premisesForm" })) 
```

给出：

```
<form id="premisesForm" method="post" action="/Users/Premises/Create"> 
```

我的路线很简单：

```
 routes.MapRoute(
             "",
             "Premises/Premises/Create",
             new { controller = "Premises", action = "Create" }
             );

        routes.MapRoute("Default", // Route name                
                        "{controller}/{action}/{id}", // URL with parameters                
                        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults            
                       ); 
```

未使用的区域。

HTML 助手代码：

```
 public static MvcHtmlString ActionImage(this HtmlHelper html, string action, string 
     Controller, string imagePath, string altText, object htmlAttributes, object routeValues)
    {
        var url = new UrlHelper(html.ViewContext.RequestContext);

        // build the <img> tag 
        var imgBuilder = new TagBuilder("img");
        imgBuilder.MergeAttribute("src", url.Content(imagePath));
        imgBuilder.MergeAttribute("alt", altText);
        string imgHtml = imgBuilder.ToString(TagRenderMode.SelfClosing);

        // build the <a> tag 
        var anchorBuilder = new TagBuilder("a");

        anchorBuilder.MergeAttributes(new RouteValueDictionary(htmlAttributes));
        anchorBuilder.MergeAttribute("href", url.Action(action, controller, routeValues));
        anchorBuilder.InnerHtml = imgHtml; // include the <img> tag inside 
        string anchorHtml = anchorBuilder.ToString(TagRenderMode.Normal);

        return MvcHtmlString.Create(anchorHtml);
    } 
```

任何想法/建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:53:23.307

好的，经过几个小时的挫折，我发现断点没有被击中。

原来正在加载一个旧程序集。

检查构建设置：项目 -> 属性 -> 构建选项卡

构建输出路径设置为：/bin/x86/Debug

将其更改为：/bin

并且断点被命中并且hrefs显示正确的路径。

呸！

# python - python中的合成函数

> ID：12513243
> 
> 赞同：1
> 
> 时间：2012-09-20T13:04:47.507
> 
> 标签：python, function, python-internals

在 python 中，我可以创建一个没有类语句的类：

```
MyClass = type('X', (object,), dict(a=1)) 
```

有没有办法创建一个没有'def'的函数？据我所知...

```
d={} # func from string
exec'''\
def synthetics(s):
    return s*s+1
''' in d

>>> d.keys()
['__builtins__', 'synthetics']
>>> d['synthetics']
<function synthetics at 0x00D09E70>
>>> foo = d['synthetics']
>>> foo(1)
2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:20:54.403

从技术上讲，是的，这是可能的。与所有其他类型一样，函数的类型是该类型实例的构造函数：

```
FunctionType = type(lambda: 0)
help(FunctionType) 
```

从帮助中可以看出，您至少需要代码和全局变量。前者是编译后的字节码对象；后者是一本字典。

要制作代码对象，您可以使用代码类型的构造函数：

```
CodeType = type((lambda: 0).func_code)
help(CodeType) 
```

帮助说这“不适合胆小的人”，这是真的。你需要将字节码和一堆其他的东西传递给这个构造函数。因此，获取代码对象的最简单方法是从另一个函数中获取，或者使用该`compile()`函数。但是，如果您对 Python 字节码有足够的了解，那么*在*技术上完全可以综合生成代码对象。（我已经在非常有限的基础上这样做了，以构造用于装饰器的保留签名的包装函数。）

PS——`FunctionType`也`CodeType`可以通过`types`模块获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:12:40.963

可能有比以下更直接的方法，但这里有一个没有`def`. 首先，使用一个简单的`lambda`表达式来获取一个函数对象：

```
>>> func = lambda: None 
```

然后，`compile`一些源代码获取代码对象并使用它来替换`lambda`'s 代码：

```
>>> func.__code__ = compile("print('Hello, world!')", "<no file>", "exec")
>>> func()
Hello, world! 
```

# c# - 固定尺寸面板

> ID：12513247
> 
> 赞同：0
> 
> 时间：2012-09-20T13:05:05.650
> 
> 标签：c#, winforms

我有一个作业，我需要使用 C# 创建一个 winforms 游戏。我有以下组件：

*   具有自定义绘制事件的面板子类
*   具有默认 Windows UI 元素的面板。

我希望他们这样安排：

![在此处输入图像描述](../Images/220532bc86045537d3bd5d15a610c9c5.png)

因为我手动在中心面板上绘制，所以我想将其设置为`Width`, 并`Height`固定，因此`Form`包含它的子类将显示整个面板。

我尝试在面板子类中手动设置大小：

```
Width = someFixedWidth;
Height = someFixedHeight; 
```

然后将其添加到包含`Form`：

```
GamePanel panel = new GamePanel(...);
panel.Dock = DockStyle.Center;
this.AutoSize = true;
this.AutoSizeMode = AutoSizeMode.GrowAndShrink;
this.Controlls.Add(panel); 
```

使用这个，我认为，表单将尊重面板的大小，但它只是将窗口缩小到如此之小，以至于什么都不可见，只有标题。

**所以我的问题是，我如何能够手动设置 GamePanel 的大小，然后将其停靠在表单的中心，以便表单尊重我设置的大小，并且不会使其更小/更大?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:48:29.303

Dock 属性用于定义组件在调整容器大小时的行为 Container (Form) 你做屏幕的方式不是集中的，而是根据屏幕变化调整大小，理想的是使用一种方法来重新定位控件并设置其尺寸。看到这个：

```
SuspendLayout();

Width = someFixedWidth;
Height = someFixedHeight;

panel.Size = new Size(panelWidth, panelHeight);

panel.Location = new Point( ClientSize.Width / 2 - panelWidth / 2, ClientSize.Height / 2 - panelHeight / 2);
panel.Anchor = AnchorStyles.None;
panel.Dock = DockStyle.None;

ResumeLayout(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-24T00:01:16.507

就我而言，我编辑了面板的最小高度/宽度并且它起作用了。

我尝试编辑与设计相关的代码，但不建议重写自动生成的代码。

谢谢你。

# java - 如何使用 PDFReactor 生成不透明的 PDF？

> ID：12513248
> 
> 赞同：0
> 
> 时间：2012-09-20T13:05:08.130
> 
> 标签：java, pdf-generation

我在 Java 中使用 PDFReactor 5 来生成 PDF 文件。生成的文件必须符合 PDF/A1-a 标准，该标准不允许透明度。

我像这样在 PDFReactor 中使用 PDFA 一致性模式，但[http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx](http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx)`pdfReactor.setConformance(PDFreactor.CONFORMANCE_PDFA);`上的验证器说我生成的文件不是有效的 PDF/A1-a，因为它们包含透明度。

知道如何配置 PDFReactor 以生成不透明的文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T08:21:08.687

生成的方式就是你用的那个，所以设置是正确的：

```
pdfReactor.setConformance(PDFreactor.CONFORMANCE_PDFA); 
```

我已经看到`pdfreactor5`生成的 pdf 与 pdf-a 规范（透明度和其他）不完全兼容。

升级到`pdfreactor6`.

升级后，我的 pdf 已针对[http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx进行了验证](http://www.pdf-tools.com/pdf/validate-pdfa-online.aspx)

# android - 动态创建微调器？

> ID：12513254
> 
> 赞同：0
> 
> 时间：2012-09-20T13:05:25.097
> 
> 标签：android, android-layout, android-spinner

嗨，请给我推荐一个很好的例子，展示如何动态创建微调器（就像按下按钮添加微调器）并在提交时从它们中检索值。我对我的想法感到震惊..非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:09:28.260

这是动态创建微调器的[示例。](http://www.lacherstorfer.at/haris_blog/2008/03/android-howto-create-spinners.html)请首先在此处搜索并发布问题。

# perl - 如果列相同，则合并 R 数据框中的连续行

> ID：12513261
> 
> 赞同：0
> 
> 时间：2012-09-20T13:05:47.537
> 
> 标签：perl, r

我正在尝试将我的 Perl 脚本之一转换为 R 脚本。我在 R 中有一个数据框，看起来像（忽略列名）-

```
CHR 起始端类型
chr1 945493 945593 正常
chr1 945593 947374 正常
chr1 947374 947474 正常
chr1 947474 947574 增益
chr1 947574 947674 增益
chr1 947674 960364 增益
chr1 960364 960464 正常
chr22 17290491 17290591 正常
chr22 17290591 17290691 正常
chr22 17290691 17290791 增益
chr22 17290791 17292513 增益
chr22 17292513 17292613 增益
chr22 17292613 17292713 增益
chr22 17292713 17293046 增益
chr22 17293346 17298475 增益
chr22 17298475 17298575 增益
chr22 17298575 17298675 正常
chr22 17298675 17303632 正常
chr22 17303632 17303732 损失
chr22 17303732 17303832 正常
chrX 154162621 154181221 正常
chrX 154181221 154181321 正常
chrX 154181321 154181421 损失
chrX 154181421 154181521 损失
chrX 154181521 154181621 损失
chrX 154181621 154181721 损失
chrX 154181721 154216867 损失
chrX 154216867 154216967 正常
chrX 154216967 154217067 正常
chrX 154217067 154217167 正常
```

如果至少 5 个连续行在“CHR”列和“TYPE”列中具有相同的值，则将所有这些行合并为一行，以便 START 列应具有第一行的值，END 列应具有最后一行的值，最后只返回具有“增益”或“损失”类型的行。所以想要的输出是：

```
chr22 17290691 17298575 增益
chrX 154181321 154216867 损失
```

我现在正在做的是：

1.  使用“write.table”保存数据框。
2.  使用这个 perl 脚本：

    ```
     open $first, "<",$ARGV[0] or die "Unable to open input file: $!";
      my $count=1;
      $_ = <$first>;
      chomp;
      my ($p_key, $p_col1, $p_col2,$p_cnv) = split;

      while(<$first>) {
          chomp;
          my ($key, $col1, $col2,$cnv) = split;
          if ($key eq $p_key and $cnv eq  $p_cnv) {
            $p_col2 = $col2;
            $count++;

          } elsif ($count > 4){

             print $p_key,"\t", $p_col1,"\t", $p_col2,"\t", $p_cnv,"\n" if($p_cnv eq "gain" or $p_cnv eq "loss");
             ($p_key, $p_col1, $p_col2, $p_cnv) = ($key, $col1, $col2, $cnv);
             $count=1;
            }

           else { 

        ($p_key, $p_col1, $p_col2, $p_cnv) = ($key, $col1, $col2, $cnv);
            $count=1;
           }
    } 
    ```

我认为这是先保存数据帧然后使用 Perl 脚本的额外步骤。任何人都可以建议在 R 中执行此操作的更简单方法 - 任何包或任何其他技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:16:31.567

这些方面的东西？

```
library(plyr)
ddply(x[x$TYPE %in% c("gain", "loss"), ], 
      .(CHR, TYPE), 
      function(z){if(nrow(z) < 5) NULL else z[range(seq_len(nrow(z))), ]}
      )

    CHR     START       END TYPE
1 chr22  17290691  17290791 gain
2 chr22  17298475  17298575 gain
3  chrX 154181321 154181421 loss
4  chrX 154181721 154216867 loss 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:40:46.210

我担心如果在一个染色体中有 TYPE 的交替值，你应该想要中断序列（即认为它们是不同的）。你没有特别说明它，但我认为生物学会保证额外的要求。因此需要创建另一个变量。`cdat`在没有相反建议的情况下，我们将假设数据框命名为。这在 TYPE 的连续运行中查找，应用测试，并在开头绑定 CHR 和 START，为最后一个元素绑定 END 和 TYPE。

```
cdat$conseq <-cumsum(c(1, cdat$TYPE[-1] != cdat$TYPE[-length(cdat$TYPE)] ) )
do.call( rbind, 
    by(cdat, list(cdat$CHR, cdat$conseq), 
         function(df)
            if( NROW(df) >=5 & df$TYPE[1] %in% c("gain", "loss") ) {
                cbind(df[1, c("CHR", "START")] , df[NROW(df), c("END", "TYPE")] ) 
                } else{NULL} ) )
     CHR     START       END TYPE
10 chr22  17290691  17298575 gain
23  chrX 154181321 154216867 loss 
```

conseq 向量是通过将下一个 TYPE 值与其先前值进行比较并 cumsum() 建立新值沿其全长出现的。因为这些变量要短一个元素。1 在开头添加为占位符，以使其与数据框对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:21:55.420

如果您熟悉 SQL 并希望对数据帧进行大量操作，则另一个选择是[`sqldf`](https://code.google.com/p/sqldf/)库，它允许您对 R 数据帧执行 SQL 查询。它使这样的操作非常容易。

还有[R-Perl 接口](http://www.omegahat.org/RSPerl/)，它允许你保留现有的 Perl 代码，然后用结果做 R 事情。

# visual-studio-2010 - 用 .left 将图表并排放置

> ID：12513262
> 
> 赞同：0
> 
> 时间：2012-09-20T13:05:49.213
> 
> 标签：visual-studio-2010, excel, vba

我试图在创建时将 2 个图表与 .left 并排放置，但我没有工作。我想念什么？

```
With ThisWorkbook.Worksheets("Diagram").ChartObjects.Add(200, 200, 600, 400).Chart
    .Parent.Name = Name
    .left = 400

    If Not .HasTitle Then
        .HasTitle = True
        .ChartTitle.Text = Name
    End If

    .ChartType = xlXYScatterSmoothNoMarkers
    .Axes(xlValue).CrossesAt = CrossAt
    .Axes(xlCategory).TickLabels.NumberFormat = "YYYY-MM-DD"

    For i = LBound(sXRanges) To UBound(sXRanges)
        With .SeriesCollection.NewSeries
            .Name = country(i)
            .XValues = sXRanges(i)
            .Values = sYRanges(i)
        End With
    Next
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:13:40.667

`.Left`不是您引用的图表的属性。你真正想要使用的是 ChartObject`.Parent.Left`

# batch-file - 批处理手动运行但不在计划任务中

> ID：12513264
> 
> 赞同：6
> 
> 时间：2012-09-20T13:05:51.633
> 
> 标签：batch-file, windows-server-2008, scheduled-tasks

我一般不写`batches`，但我目前有一个`batch`用于`forfiles`将我的 FLV 从一个文件夹复制到另一个文件夹。当我手动运行批处理时，它每次都有效，但是从计划的任务中，它会引发`(0x1)`错误。

```
forfiles -p "C:\Program Files\Adobe\Flash Media Server 4.5\applications\name\streams" -m *.flv -s -d -1 -c "cmd /c copy @file ^0x22C:\Program^ Files\Adobe\Flash^ Media^ Server^ 4.5\applications\name\output\" 
```

不确定计划任务不喜欢什么语法。

**更新**

在我的计划任务下，我有以下操作：

```
Program/script:  name.bat
Start in (optional): \\servername\file\to\batch 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-26T03:55:53.547

嗨，这可能有帮助，我也面临同样的问题。只需设置 startin 路径，如：

[![在此处输入图像描述](../Images/12b774fe15bb217842b857f532225f8b.png)](https://i.stack.imgur.com/993OB.png)

这里 start in path 是批处理文件的路径：就像您在程序脚本中输入：“E:\program related files\demo.bat”然后在 startin 中通过：E:\program related files & 完成！

谢谢

阿伦·夏尔马

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T13:43:56.793

当我的`Start in (optional):`路径是 UNC 路径时，它不起作用。所以我把我的批次移到服务器上，一切正常。

[Windows 批处理文件中的 UNC](http://en.wikipedia.org/wiki/Path_(computing)#UNC_in_Windows_Batch_Files)

[具有 UNC 路径的文件](https://stackoverflow.com/questions/7503491/forfiles-with-unc-path)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-29T07:08:51.010

请参阅下面的屏幕截图。您需要将用户更改为系统![在此处输入图像描述](../Images/5757af5ace46058233315dc0d796a106.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-13T09:54:47.123

在 Server 2008 R2 上，在域用户凭据下运行批处理文件时，在本地安全策略>本地设置>用户权限分配中确认“作为批处理作业登录”安全性，即使是我的批处理（将日志文件复制到网络共享）不会按计划任务运行，直到我在选项卡*常规*中选择选项“**以最高权限运行**”（默认未选中！）还选择了*无论用户是否登录都运行*选项，带有单选按钮，但我猜测这是非常标准的，选择使用域用户帐户运行任务。

对于选项卡操作：直接在“程序/脚本：”中指定整个批处理文件名（包括其路径）可以正常工作（使用 Server 2008 R2） 在批处理文件中使用双引号不会导致任何问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:14:52.643

此类问题的最常见原因是权限：计划任务并不**总是**使用**您的**用户凭据运行。如果您希望计划任务以您的身份运行，**您**必须将其设置为**您**或替代用户。

除此之外，我希望您的代码行是批处理文件的**内容**，您不要尝试直接运行此命令。还是你？

PS这些是什么，在你的代码中做什么`^0x22`？`^`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-19T02:45:12.120

我知道这是一个老问题，但只是想分享一些信息。

( *0x01)*错误代码也可以引用未找到的资源。所以：

*   批处理文件中引用的所有文件/文件夹都应该可供用户使用哪个帐户来运行该计划任务；
*   使用网络位置时要注意结合“无论用户是否登录都运行”选项；
*   上述选项可能很难使用，因为某些资源可能仅在登录后才可用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-08T22:11:50.397

要在计划任务中运行 .bat 文件，您需要在 start 选项中指定 .bat 文件路径 - 尽管 .bat 文件与 .exe 位于同一目录中。此外，我将其标记为以最高权限运行。做完这两件事后，任务突然起飞，没有任何问题！

[![windows计划任务图片](../Images/ce427ce71d9169a33f9237a83d2d8781.png)](https://i.stack.imgur.com/8b9JK.jpg)

# windows - 如何获取创建的 mdi 子进程的句柄？

> ID：12513270
> 
> 赞同：0
> 
> 时间：2012-09-20T13:06:15.053
> 
> 标签：windows, delphi, winapi

谢谢！！我希望使用 WM_MDICREATE 消息在 clientWndProc 中获取 mdi child 的句柄

```
procedure TFrmMain.ClientWndProc(var Message: TMessage);
var
Hwnd : HWND;
procedure Default;
begin
 with Message do
  Result := CallWindowProc(FClientWndProc, ClientHandle, Msg, wParam, lParam);
end;

begin
case Message.Msg of
  WM_MDICREATE:
   begin
    hwnd := Message.LParam; //dont' work
    hwnd := TWMMDICreate(Message).MDICreateStruct^.lparam; //don't work
   Default;
   end;

  end;

  inherited ClientWndProc(Message);
  end; 
```

我想在启动 MDICHILD 时将下一个过程（ChildProc）绑定到 MainForm 的 ClientWndProc 过程中

```
 function childProc(hwnd: HWND;  msg, wParam,lParam: LongInt): LongInt; stdcall;
    begin
     if msg = WM_SYSCOMMAND then
      begin
       CallWindowProc(p,hwnd,msg,wparam,lparam);
        if WParam = SC_MINIMIZE then
          //do something
       end;

    result := CallWindowProc(p,hwnd,msg,wparam,lparam);

    end; 
```

我需要新儿童形态的手柄，类似的东西

```
 P := Pointer(SetWindowLong(ActiveMDIChild.Handle, GWL_WNDPROC, integer(@Child))); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T13:12:07.690

根据以下[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644913.aspx)`WM_MDICREATE`：

> ### 返回值
> 
> 类型：**HWND**
> 
> 如果消息成功，则返回值是新子窗口的句柄。
> 
> 如果消息失败，则返回值为 NULL。

所以，答案是窗口过程返回的值的窗口句柄。`Message.Result`在你调用了继承的窗口过程之后把它读出来。

如果您想要在创建窗口之前获得窗口句柄，那么您就不走运了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:30:57.337

非常感谢！你的回答很完美

```
 procedure TMain.ClientWndProc(var Message: TMessage);
   begin

      case Message.Msg of

         WM_MDICREATE:
          begin
          inherited ClientWndProc(Message);
          with Message do
          FindControl(Result).Tag := SetWindowLong(Result, GWL_WNDPROC, Integer(@MDIChildProc));
          Exit; 
          end;

       end;

   end; 
```

# symfony1 - 使用推进的 SQL 到标准

> ID：12513274
> 
> 赞同：0
> 
> 时间：2012-09-20T13:06:28.293
> 
> 标签：symfony1, criteria, propel

我有这个sql：

```
SELECT link.ID, link.URL, link.ANCHOR, link.HOME, link.CREATED_AT 
FROM `link`, `linkcategory`
WHERE link.ID=linkcategory.LINK_ID
GROUP BY linkcategory.LINK_ID 
HAVING count(linkcategory.category_id) =(select count(*) from categoria) 
```

我正在尝试生成标准，这是不起作用的标准：

```
$c = new Criteria();
$c->addJoin(self::ID, LinkcategoryPeer::LINK_ID);
$c->addAsColumn('catCount','(SELECT COUNT(*) FROM CATEGORIA)');
$c->addGroupByColumn(LinkcategoryPeer::LINK_ID);
$having = $c->getNewCriterion(count(LinkcategoryPeer::CATEGORY_ID),$c->getColumnForAs('catCount'));
$c->addHaving($having); 
return self::doSelect($c); 
```

这个条件的返回 sql 是这个：

```
SELECT (SELECT COUNT(*) FROM CATEGORIA) AS catCount 
FROM `link`, `linkcategory` 
WHERE link.ID=linkcategory.LINK_ID 
GROUP BY linkcategory.LINK_ID 
HAVING 1='(SELECT COUNT(*) FROM CATEGORIA)' 
```

我真的不知道为什么条件会错误地转换 sql。有谁知道错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:45:24.347

试试这个查询。我不记得如何`link.*`使用 Propel 执行。但我认为问题`having`在于您使用的是 PHP 计数函数而不是 MySQL 函数。

```
$c = new Criteria();
$c->addSelectColumn(self::ID);
$c->addSelectColumn(self::URL);
$c->addSelectColumn(self::ANCHOR);
$c->addSelectColumn(self::HOME);
$c->addSelectColumn(self::CREATED_AT );

$c->addJoin(self::ID, LinkcategoryPeer::LINK_ID);
$c->addGroupByColumn(LinkcategoryPeer::LINK_ID);

$having = $c->getNewCriterion(
  'COUNT('.LinkcategoryPeer::CATEGORY_ID.')'),
  $c->getColumnForAs('catCount')
);
$c->addHaving($having);

return self::doSelect($c); 
```

# jquery - 如何触发 ajaxStart 和 ajaxStop

> ID：12513276
> 
> 赞同：1
> 
> 时间：2012-09-20T13:06:30.513
> 
> 标签：jquery, ajax

我正在尝试触发 ajaxStart 和 ajaxStop 事件以显示正在加载的消息，但我对如何执行此操作感到非常困惑。据我了解，这些事件是由每个 ajax 事件触发的，但我仍然不确定这到底意味着什么。单击 href 链接或提交按钮是否也会触发 ajax 事件？似乎不是因为单击超链接或按钮时，我下面的代码中没有出现任何警报。我刚开始学习 JQuery，我可能缺少一些明显的东西。

有人可以解释如何使这项工作？

我的`<head>`标签里有这个

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

这就在开始`<body>`标签之前：

```
<script language="JavaScript" type="text/javascript">

// prepare the form when the DOM is ready 
$(document).ready(function() { 
$(document).ajaxStart(function() {
    alert('ajaxStart');
    $('#ajaxBusy').show(); 
});
$(document).ajaxStop(function() {
    alert('ajaxStop');
    $('#ajaxBusy').hide(); 
});

</script> 
```

**编辑：** 我想通过单击一个 href 链接来使加载弹出窗口出现，从而触发 ajaxStart 事件。链接调用的另一个页面需要相当长的时间来加载，我希望同时出现加载消息。

```
<a href="http://www.mysite.com/long-loading-page.php">link</a> 
```

我将如何使用 ajax 事件来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:08:03.107

要使 AJAX 事件触发*，您必须启动 AJAX 请求*。

这意味着`$.ajax`, `$.get`, `$.post`,`$.load`等。

单击链接或按钮将不起作用。`click`但是，您可以为每个元素注册自己的处理程序，`a`以便它用于`$.load`检索请求的 URL，然后使用该新内容更新 DOM。不过，这绝对不能算作“初学者的 jQuery”。

更好的解决方案可能是让*新*页面使用`document.write`或类似的方式在页面加载时弹出弹出窗口，然后在完成后将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:16:39.357

`ajaxStart`并且`ajaxStop`是每当发出任何 AJAX 请求时触发的[jQuery](http://api.jquery.com/category/ajax/)事件。在这里阅读：http: [//api.jquery.com/ajaxStart/](http://api.jquery.com/ajaxStart/) jQuery 有一个很好的文档。

当您单击链接或提交按钮时，浏览器只需加载一个新页面，而无需启动任何 AJAX 请求。

# java - 如何在 Maven 中配置 Checkstyle？

> ID：12513277
> 
> 赞同：5
> 
> 时间：2012-09-20T13:06:30.110
> 
> 标签：java, maven, configuration, checkstyle

我正在使用 Maven。

我有一个父模块和一些其他模块。

它们看起来像这样：

```
PARENT
├── pom.xml
├── ModulA
|   └── pom.xml
└── ModulB
    ├── pom.xml
    └── folder
        └── checkstyle.xml 
```

我试图用我自己的规则替换规则。但它忽略了我的规则。我将插件添加到父 pom.xml

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    <version>2.9.1</version>
    <configuration>
        <includeTestSourceDirectory>true</includeTestSourceDirectory>
        <configLocation>
            ${basedir}/../ModulB/folder/checkstyle.xml                  
        </configLocation>
    </configuration>
</plugin> 
```

问题出在哪里？

## **编辑：**

结果`mvn checkstyle:checkstyle -X`：

```
...
    <configuration>
      <cacheFile default-value="${project.build.directory}/checkstyle-cachefile"/>
      <configLocation default-value="config/sun_checks.xml">${checkstyle.config.location}</configLocation>
      <consoleOutput default-value="false"/>
      <enableFilesSummary default-value="true">${checkstyle.enable.files.summary}</enableFilesSummary>
      <enableRSS default-value="true">${checkstyle.enable.rss}</enableRSS>
      <enableRulesSummary default-value="true">${checkstyle.enable.rules.summary}</enableRulesSummary>
      <enableSeveritySummary default-value="true">${checkstyle.enable.severity.summary}</enableSeveritySummary>
      <encoding default-value="${project.build.sourceEncoding}">${encoding}</encoding>
      <excludes>${checkstyle.excludes}</excludes>
      <failsOnError default-value="false"/>
      <format default-value="sun"/>
      <headerFile>${basedir}/LICENSE.txt</headerFile>
      <headerLocation default-value="LICENSE.txt">${checkstyle.header.file}</headerLocation>
      <includeTestSourceDirectory default-value="${false}"/>
      <includes default-value="**/*.java">${checkstyle.includes}</includes>
      <linkXRef default-value="true">${linkXRef}</linkXRef>
      <outputDirectory default-value="${project.reporting.outputDirectory}"/>
      <outputFile default-value="${project.build.directory}/checkstyle-result.xml">${checkstyle.output.file}</outputFile>
      <outputFileFormat default-value="xml">${checkstyle.output.format}</outputFileFormat>
      <project default-value="${project}"/>
      <propertiesLocation>${checkstyle.properties.location}</propertiesLocation>
      <skip default-value="false">${checkstyle.skip}</skip>
      <sourceDirectory default-value="${project.build.sourceDirectory}"/>
      <suppressionsFileExpression default-value="checkstyle.suppressions.file">${checkstyle.suppression.expression}</suppressionsFileExpression>
      <suppressionsLocation>${checkstyle.suppressions.location}</suppressionsLocation>
      <testSourceDirectory default-value="${project.build.testSourceDirectory}"/>
      <xrefLocation default-value="${project.reporting.outputDirectory}/xref"/>
    </configuration>
... 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-23T12:50:47.437

要让它获取您的自定义配置，您需要将您的文件声明为属性：

```
<project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  ...

  <properties>
    <checkstyle.config.location><!-- file location --></checkstyle.config.location>
  </properties>

  <build>
    ...

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <version>2.9.1</version>
      </plugin>
    </plugins>
  </build>

</project> 
```

摘自我关于如何在此处创建自定义 CheckStyle 检查的教程：http:
[//blog.blundellapps.com/create-your-own-checkstyle-check/](http://blog.blundellapps.com/create-your-own-checkstyle-check/)

源代码在这里：
[https ://github.com/blundell/CreateYourOwnCheckStyleCheck](https://github.com/blundell/CreateYourOwnCheckStyleCheck)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T13:51:48.047

为什么你不把你的 checkstyle 配置放在父项目的目录中，`src/main/resources`并像这样在父 pom.xml 中参数化插件

```
<!-- Checkstyle -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    <version>RELEASE</version>
    <configuration>
        <configLocation>src/main/resources/checkstyle.xml</configLocation>                   
    </configuration>
</plugin> 
```

子项目应该有权执行此配置

# extjs - JsonStore 加载记录并将它们标记为幻像

> ID：12513279
> 
> 赞同：2
> 
> 时间：2012-09-20T13:06:44.293
> 
> 标签：extjs, store, extjs3, jsonstore

我的 JsonStore 是这样定义的：

```
var data_json = new Ext.data.JsonStore({
    url: '/Game/json_index',
    autoLoad: true,
    id: 'data_json',
    idProperty: 'id',
    fields: [ {name: 'id', type: 'int'}, 'name', {name:'add_date', type:'date', dateFormat: 'M$'}, 'price', 'kind', 'metacritic'],
    listeners: { 'load': function(storename, records, options){
    console.dir(this);
    }},
    writer: new Ext.data.JsonWriter()
}) 
```

它接收的 JSON 的 DUMP 类似于：

```
[
{"id":1,"name":"Guild Wars 2","add_date":"\/Date(1346104800000)\/","price":24.99,"kind":"MMO","metacritic":93},
{"id":2,"name":"Dark Souls: Prepare to Die Edition","add_date":"\/Date(1345759200000)\/","price":45.00,"kind":"actionrpg","metacritic":87},
{"id":3,"name":"Orcs Must Die! 2","add_date":"\/Date(1343599200000)\/","price":15.00,"kind":"action","metacritic":83}
] 
```

JSON 被正确解码，商店里满是我的记录，但要小心.. 可怕的事情发生了！

![可怕的东西截图](../Images/792c70887e768f3f5a2a809852a69fec.png)

所有记录都被标记为 phantom = true，这不允许我正确使用 ExtJS 3.4.x store.save() 功能

我已经在谷歌上彻底搜索了这个问题，并且（我认为）它与 JsonReader 没有将记录 id 与我正在传递的“id”字段相关联。我什至指定了 idProperty: 'id'。

这方面的帮助？我越来越绝望，阅读关于记录创建的 extjs 源代码是纯粹的**痛苦**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:29:48.013

尝试删除：

```
id: 'data_json' 
```

从你的商店。JsonStore 的所有配置选项都传递到自动创建的 JsonReader 中，这似乎是搞砸了。

# java - Java MicroEdition 中的 XML 数据绑定

> ID：12513284
> 
> 赞同：2
> 
> 时间：2012-09-20T13:07:17.990
> 
> 标签：java, java-me

我有一个 J2ME 应用程序，我需要在 J2ME 中绑定我的 XML 响应。在这种情况下您能帮我吗？如何在 J2ME 中绑定 XML 数据绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:25:20.703

[JiBX](http://jibx.sourceforge.net/) seems to support J2ME. See the following related JIRA issue: [[#JIBX-110] Having a J2ME compatible official jibx release](http://jira.codehaus.org/browse/JIBX-110).

Once [downloaded](http://sourceforge.net/projects/jibx/files/), you'll have to ant-build the j2me jars using the `j2me` target (`ant j2me` from the `build` directory where `build.xml` is sitting). You can just build it with a standard `javac`, no need for a specialized compiler (see [this discussion](http://www.mail-archive.com/jibx-users@lists.sourceforge.net/msg02241.html) in the JiBX users list).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:21:56.643

您似乎想要将 XML 文件解组为 Java 类。如果是这样，我在[我的博客](http://smallandadaptive.blogspot.com.br/2010/11/xml-data-binding.html)上分享了一个通用的方法。它使用两个类来实现它。第一类的代码是：

```
public class XMLTag {
  // if you do not have enough memory, use lazy 
  // instantiation on these attributes
  private Hashtable attributes = new Hashtable();
  private Vector childs = new Vector();

  public void setAttributeValue(String attribute, String value) {
    if (attribute != null && value != null) {
      attributes.put(attribute, value);
    }
  }

  public String getAttributeValue (String attribute) {
    return (String) attributes.get(attribute);
  }

  public void addChild (XMLTag child) {
    childs.addElement(child);
  }

  public Enumeration getChilds () {
    return childs.elements();
  }

  public XMLTag getChildAt (int index) {
    return (XMLTag) childs.elementAt(index);
  }
} 
```

下面是第二类的源代码：

```
class XMLBinder extends org.xml.sax.helpers.DefaultHandler {

  private Hashtable map = new Hashtable();
  private Stack stack = new Stack();
  private XMLTag rootElement;

  private String attribute;
  private StringBuffer value = new StringBuffer();

  /**
   * @param map with String keys and XMLTag values
   */
  public XMLBinder(Hashtable map) {
    Enumeration e = map.keys();
    while (e.hasMoreElements()) {
      Object key = e.nextElement();
      Object tag = map.get(key);
      if (validateMapping(key, tag)) {
        this.map.put(key, tag);
      } else {
        throw new IllegalArgumentException("key " + key);
      }
    }
  }

  private boolean validateMapping (Object key, Object tag) {
    return key instanceof String
           && tag instanceof Class
           && XMLTag.class.isAssignableFrom((Class) tag);
  }

  public XMLTag unmarshall (InputStream in) throws IOException {
    try {
      SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
      parser.parse(in, this);
      return rootElement;
    } catch (Exception ex) {
      throw new IOException("caused by " + ex);
    }
  }

  public void startElement(String uri, String localName, String qName,
      Attributes attributes) throws SAXException {
    Class tag = (Class) map.get(qName);
    if (tag != null) {
      try {
        XMLTag newTag = (XMLTag) tag.newInstance();
        addAttributesToXMLTag(attributes, newTag);
        stack.push(newTag);
      } catch (Exception e) {
        throw new SAXException("caused by " + e);
      }
    } else {
      attribute = qName;
    }
  }

  private void addAttributesToXMLTag (Attributes attributes, XMLTag newTag) {
    if (attributes != null) {
      for (int i = attributes.getLength() - 1; i >= 0; i--) {
        String attrName = attributes.getQName(i);
        String attrValue = attributes.getValue(i);
        newTag.setAttributeValue(attrName, attrValue);
      }
    }
  }

  public void characters(char[] ch, int start, int length) {
    if (attribute != null) {
      value.append(ch, start, length);
    }
  }

  public void endElement(String uri, String localName, String qName)
      throws SAXException {
    if (stack.isEmpty()) {
      throw new SAXException("no mapping for " + qName);
    }
    if (attribute != null && attribute.equals(qName)) {
      XMLTag parent = (XMLTag) stack.peek();
      parent.setAttributeValue(attribute, value.toString());
      attribute = null;
      value.setLength(0);
    } else {
      XMLTag child = (XMLTag) stack.pop();
      if (stack.isEmpty() == false) {
        XMLTag parent = (XMLTag) stack.peek();
        parent.addChild(child);
      } else {
        rootElement = (XMLTag) child;
      }
    }
  }
} 
```

为了防止使用 Class.forName，我们使用带有标签和类的映射。键是带有标签名称的字符串，值是扩展 XMLTag 的类。例如，阅读 RSS 提要将使用以下类：

```
class RSS extends XMLTag {
  Channel channel;
  public void addChild(XMLTag child) {
    if (child instanceof Channel) {
      channel = (Channel) child;
    }
  }
}
class Channel extends XMLTag {
  public void addChild(XMLTag child) {
    if (child instanceof Item) {
      super.addChild(child);
    }
  }
}
class Item extends XMLTag {
} 
```

以及下面的地图：

```
Hashtable map = new Hashtable();
map.put("rss", RSS.class);
map.put("channel", Channel.class);
map.put("item", Item.class); 
```

然后可以使用粘合剂：

```
XMLBinder binder = new XMLBinder(map);
rss = (RSS) binder.unmarshall(in); 
```

**评论后更新**

对于您的 xml 示例，您需要创建以下类：

```
class DataTable extends XMLTag {
  XsSchema xsSchema;
  DiffgrDiffgram diffgrDiffgram;
  public void addChild(XMLTag child) {
    if (child instanceof XsSchema) {
      xsSchema = (XsSchema) child;
    }
    else if (child instanceof DiffgrDiffgram) {
      diffgrDiffgram = (DiffgrDiffgram) child;
    }
  }
}
class XsSchema extends XMLTag {
}
class DiffgrDiffgram extends XMLTag {
} 
```

并使用以下地图

```
Hashtable map = new Hashtable();
map.put("DataTable", DataTable.class);
map.put("xs:schema", XsSchema.class);
map.put("diffgr:diffgram", DiffgrDiffgram.class); 
```

# html - 类名等于标签名

> ID：12513285
> 
> 赞同：3
> 
> 时间：2012-09-20T13:07:20.040
> 
> 标签：html, css

作为 HTML 代码审阅者，有时阅读 html 代码时，我会看到如下内容：

```
<form class='form' …&gt; 
```

即使允许，我想知道这种类名等于标签名的东西是否应该由上下文独立弃用。

PS：
可能的上下文：

```
<form class='form'>
</form>

<div class='form'>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:13:04.140

让类同名是没有意义的，类的全部意义在于您可以为元素分配一个明显的命名结构，例如

```
.login-form { }

.shopping-form { } 
```

如果表单具有 form 的类名，则意味着它的命名结构很差，并且如果表单类应用于所有表单，那么它们也可以仅应用于：

```
form { } 
```

不是

```
.form { } 
```

因此，虽然它被允许，但如果他们只对所有形式使用一个类，这只是一种不好的做法和不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:37:08.143

类名应被视为可由作者或作者社区通过协议选择。我认为仅仅因为第一眼看起来很奇怪就“弃用”名称是不合适的。“形式”这个词在不同的语言和社区中可能有不同的含义。`<form class="form">`即使类名取自英语，也可能有各种各样的原因导致一些看起来很奇怪的事情。在检查代码时，此类结构应该提出问题，而不是触发自动拒绝。

（我几乎提议以非建设性的方式结束这个问题。但指出问题背后的假设中的问题也许有一些价值。）

# web-services - 基于 SOAP 的金融网络服务的 XML 标准

> ID：12513290
> 
> 赞同：1
> 
> 时间：2012-09-20T13:07:40.627
> 
> 标签：web-services, soap, financial

我正在为提供财务计算的基于 SOAP 的 Web 服务开发 XSD 方案。服务响应包含投资组合的历史表现和不同的衡量标准：回报率、标准差等。

我想知道这些信息是否有一些众所周知的标准？例如：

*   值应该有多少个十进制数字；
*   如何在 SOAP 响应中格式化货币/百分比/日期/等值；
*   数据类型的任何标准枚举；
*   任何标准结构。

您在 Web 服务中遵循任何内部标准吗？你能提出什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:03:14.813

看看一个名为 XBRL 的标准

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:12:45.053

有一次，我遇到了一个名为[IFX](http://www.ifxforum.org/standards/standard_overview_2010-06-01/)的标准。没有亲自使用过它，但它应该是专门为寻求交换财务信息的系统的互操作性而设计的。还进行了一些开发以[允许使用 Web 服务传输 IFX 文档](http://www.ifxforum.org/standards/wswg)。

看看它是否有任何帮助。

# ios - IOS相互认证

> ID：12513291
> 
> 赞同：12
> 
> 时间：2012-09-20T13:07:42.850
> 
> 标签：ios, authentication, openssl, mutual-authentication

我正在尝试在 IOS 5 中实现相互身份验证，但我遇到了麻烦：

```
{NSUnderlyingError = "Error Domain=kCFErrorDomainCFNetwork Code=-1200 \"An SSL error has occurred and a secure connection to the server cannot be made.\" UserInfo=0x18d830 {NSLocalizedDescription=An SSL error has occurred and a secure connection to the server cannot be made., _kCFNetworkCFStreamSSLErrorOriginalValue=-9800, _kCFStreamPropertySSLClientCertificateState=0, NSLocalizedRecoverySuggestion=Would you like to connect to the server anyway?, NSErrorFailingURLStringKey=https://192.168.24.110:8081/t01.json, kCFStreamPropertySSLPeerTrust=<SecTrustRef: 0xceaa2d0>, NSErrorFailingURLKey=https://192.168.24.110:8081/t01.json} 
```

我以这种方式为服务器（无论是自签名还是使用假 CA，我总是遇到这个问题）和客户端生成了密钥、证书和 pkcs12：

```
openssl genrsa -out client.key 1024
openssl req -new -key client.key -out client.csr

self-signed
openssl req -new -key ca.key -x509 -days 1095 -out ca.crt

CA signed
openssl x509 -req -days 365 -in client.csr -CA server.crt -CAkey server.key -CAcreateserial -out client.crt

CRT to PEM
openssl x509 -in client.crt -out client.der -outform DER
openssl x509 -in client.der -inform DER -out client.pem -outform PEM

PEM TO PKCS 12
openssl pkcs12 -export -in client.pem -inkey client.key -out client.p12 
```

当我在浏览器 (FF15) 中导入生成的 client.p12 文件时，它可以完美运行。所以问题不在前面的步骤中。

IOS端我试过这个例子：http: [//vanjakom.wordpress.com/tag/nsurlconnection/](http://vanjakom.wordpress.com/tag/nsurlconnection/)

当我发现该示例不起作用时，这就是我所写的：

```
// Returns an array containing the certificate
- (CFArrayRef)getCertificate:(SecIdentityRef) identity {
    SecCertificateRef certificate = nil;

    SecIdentityCopyCertificate(identity, &certificate);
    SecCertificateRef certs[1] = { certificate };

    CFArrayRef array = CFArrayCreate(NULL, (const void **) certs, 1, NULL);

    SecPolicyRef myPolicy   = SecPolicyCreateBasicX509();
    SecTrustRef myTrust;

    OSStatus status = SecTrustCreateWithCertificates(array, myPolicy, &myTrust);
    if (status == noErr) {
        NSLog(@"No Err creating certificate");
    } else {
        NSLog(@"Possible Err Creating certificate");
    }
    return array;
}

// Returns the identity
- (SecIdentityRef)getClientCertificate {
    SecIdentityRef identityApp = nil;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectoryPath = [paths objectAtIndex:0];
    NSString *myFilePath = [documentsDirectoryPath stringByAppendingPathComponent:@"file12.p12"]; 
    NSData *PKCS12Data = [NSData dataWithContentsOfFile:myFilePath];

    CFDataRef inPKCS12Data = (__bridge CFDataRef)PKCS12Data;
    CFStringRef password = CFSTR("password");
    const void *keys[] = { kSecImportExportPassphrase };//kSecImportExportPassphrase };
    const void *values[] = { password };
    CFDictionaryRef options = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);
    CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
    OSStatus securityError = SecPKCS12Import(inPKCS12Data, options, &items);
    CFRelease(options);
    CFRelease(password);
    if (securityError == errSecSuccess) {
        NSLog(@"Success opening p12 certificate. Items: %ld", CFArrayGetCount(items));
        CFDictionaryRef identityDict = CFArrayGetValueAtIndex(items, 0);
        identityApp = (SecIdentityRef)CFDictionaryGetValue(identityDict, kSecImportItemIdentity);
    } else {
        NSLog(@"Error opening Certificate.");
    }

    return identityApp;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    if ([challenge previousFailureCount] == 0) {
        SecIdentityRef identity = [self getClientCertificate];  // Go get a SecIdentityRef
        CFArrayRef certs = [self getCertificate:identity]; // Get an array of certificates
        // Convert the CFArrayRef to a NSArray
        NSArray *myArray = (__bridge NSArray *)certs;

        // Create the NSURLCredential
        NSURLCredential *newCredential = [NSURLCredential credentialWithIdentity:identity certificates:myArray persistence:NSURLCredentialPersistencePermanent];

        // Send
        [challenge.sender useCredential:newCredential forAuthenticationChallenge:challenge];    
    } else {
        // Failed
        [[challenge sender] cancelAuthenticationChallenge:challenge];
    }
}

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    return YES;
} 
```

在这两种情况下，我都无法验证客户端。此外，我还在设备（iPhone/iPad）上安装了 server.crt 证书，但我一直收到“Error Domain=NSURLErrorDomain Code=-1200”。

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T17:42:42.817

我编写的代码完美运行，问题出在服务器端。

# c++ - socket TCP 服务器程序问题

> ID：12513293
> 
> 赞同：0
> 
> 时间：2012-09-20T13:07:46.440
> 
> 标签：c++, c, sockets, tcp

以下代码是我的 TCP 服务器程序：

```
    ＃包括
    ＃包括
    #pragma 注释 (lib,"ws2_32.lib")
    #定义端口 8888
    #define 地址“127.0.0.1”

`int main()
{
    WSADATA wsock;
    SOCKET listensocket,connectsocket;
    SOCKADDR_IN seraddr,cliaddr;
    int cliaddrsize=sizeof(cliaddr);
    int nret=0;
    char buf[100];

    printf("init socket ...\n");
    if(WSAStartup(MAKEWORD(2,2),&wsock)!=0)
    {
        printf("WSAStartup() failed %d\n",WSAGetLastError());
        return 0;
    }
    printf("init successfully\n");
    printf("create TCP socket...\n");

    if((listensocket=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP))==INVALID_SOCKET)
    {
        printf("socket create failed %d\n",WSAGetLastError());
        WSACleanup();
        return 0;
    }
    printf("socket create successfully\n");

    seraddr.sin_family=AF_INET;
    seraddr.sin_addr.s_addr=inet_addr(ADDR);
    seraddr.sin_port=htons(PORT);
    if(bind(listensocket,(SOCKADDR *)&seraddr,sizeof(seraddr))==SOCKET_ERROR)
    {
        printf("bind failed %d\n",WSAGetLastError());
        closesocket(listensocket);
        WSACleanup();
        return 0;
    }
    printf("bind successfully\n");

    if(listen(listensocket,5)==SOCKET_ERROR)
    {
        printf("listen failed %d\n",WSAGetLastError());
        closesocket(listensocket);
        WSACleanup();
        return 0;
    }
    printf("wait for a connection on port %d\n",PORT);

    if(connectsocket=accept(listensocket,(SOCKADDR*)&cliaddr,&cliaddrsize)==INVALID_SOCKET)  //accept
    {
        printf("accept failed %d\n",WSAGetLastError());
        closesocket(listensocket);
        WSACleanup();
        return 0;
    }
    printf("get connection from %s : %d successfully\n",inet_ntoa(cliaddr.sin_addr),ntohs(cliaddr.sin_port));//NB 啊
    closesocket(listensocket);

    printf("wait to receive data...\n");
    memset(buf,0,sizeof(buf));
    while(1)
    {
        if(nret=recv(connectsocket,buf,sizeof(buf),0)==SOCKET_ERROR)      //recv
        {
            printf("recv failed %d\n",WSAGetLastError());
            closesocket(connectsocket);
            WSACleanup();
            return 0;
        }
        printf(buf);
        printf("\n");
        if(strncmp(buf,"exit",sizeof("exit"))==0)
        {
            printf("exit the loop\n");
            break;
        }
        if(nret=send(connectsocket,buf,sizeof(buf),0)==SOCKET_ERROR)
        {
            printf("send failed %d\n",WSAGetLastError());
        }
    }
    closesocket(connectsocket);
    WSACleanup();
    return 0;
}` 

 `And I use my network debugging assistent software to run as a TCP client. As follows:

I started my TCP server program, it went as follows:` 

`(...cannot upload images...)`

但是当我点击我的 TCP 客户端时，TCP 服务器出错了：dos 框显示：recv failed 10038

我的问题是为什么出错了？以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2012-09-20T13:15:57.080

这个：

```
if(connectsocket=accept(listensocket,(SOCKADDR*)&cliaddr,&cliaddrsize)
       ==INVALID_SOCKET) 
```

将导致`connectsocket`具有值`0`，它不引用错误代码`10038`表示的有效套接字描述符：

> 尝试对不是套接字的东西进行操作。

因为[运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)：

```
// Result of this will be 0 (false) when result of accept()
// is not `INVALID_SOCKET`
accept(listensocket,(SOCKADDR*)&cliaddr,&cliaddrsize) == INVALID_SOCKET

// Which is then assigned to connectsocket
connectsocket = 0

// And the failing if branch is not entered
if (connectsocket) 
```

您需要在作业周围加上括号：

```
if((connectsocket=accept(listensocket,(SOCKADDR*)&cliaddr,&cliaddrsize))
    ==INVALID_SOCKET) 
```

您已经为之前调用`socket()`.

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2012-09-20T13:14:51.753

你有一个错误：

```
if(connectsocket=accept(listensocket,(SOCKADDR*)&cliaddr,&cliaddrsize)==INVALID_SOCKET)  //accept 
```

它应该是：

```
if((connectsocket=accept(listensocket,(SOCKADDR*)&cliaddr,&cliaddrsize))==INVALID_SOCKET)  //accept 
```

注意**括号**。在您的原始代码中，您将比较结果分配给**connectsocket**变量（结果始终为零）。 
```

# silverlight - 自定义 Silverlight Combobox 的控件模板

> ID：12513294
> 
> 赞同：1
> 
> 时间：2012-09-20T13:07:47.037
> 
> 标签：silverlight, autocomplete, controltemplate

我想在 Silverlight 中实现这一点。

弹出框中带有内联过滤器的组合框

[http://gregandora.wordpress.com/2012/01/25/filtering-items-in-a-wpf-combobox/](http://gregandora.wordpress.com/2012/01/25/filtering-items-in-a-wpf-combobox/)

不幸的是，它适用于 WPF，并且 XAML 不兼容。很难转换或理解如何更改组合框的控件模板。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:03:54.997

这是解决方案的演示：[https](https://dl.dropbox.com/u/8424800/StackOverflowSl.html) ://dl.dropbox.com/u/8424800/StackOverflowSl.html （请参阅组合框过滤器）

我采用了默认的 Silverlight ComboBox 模板，并在 Popup 部分添加了一个“FilterTextBox”。我无法发布整个 xaml，因为它超出了 StackOverflow 的限制。完整的源代码在[此处作为 GitHub Gist](https://gist.github.com/3759380)。我已经离开了重要的部分。接下来，需要连接 TextBox 上的事件处理程序。

```
<Style TargetType="ComboBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Grid>                       
                    <Popup x:Name="Popup">
                        <Border x:Name="PopupBorder"
                                Height="Auto"
                                HorizontalAlignment="Stretch"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                    <GradientStop Offset="0" Color="#FFFFFFFF" />
                                    <GradientStop Offset="1" Color="#FFFEFEFE" />
                                </LinearGradientBrush>
                            </Border.Background>
                            <Grid>
                                <TextBox x:Name="FilterTextBox"
                                            Height="22"
                                            VerticalAlignment="Top" />
                                <ScrollViewer x:Name="ScrollViewer"
                                                Margin="0,25,0,0"
                                                BorderThickness="0"
                                                Padding="1">
                                    <ItemsPresenter />
                                </ScrollViewer>
                            </Grid>
                        </Border>
                    </Popup>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

连接文本框

```
public Q12513294()
{
    // Required to initialize variables
    InitializeComponent();

    InitializeMyCombo(
        Enumerable.Range(1, 99).Select(x => "Beer " + x.ToString() + " on the wall"),
        (object item, string filter) => (item as String).Contains(filter)
    );
}

private void InitializeMyCombo(IEnumerable items, Func<object, string, bool> filter)
{
    MyComboBox.Loaded += (s, e) =>
    {
        // PagedCollectionView implements a filterable collection
        PagedCollectionView list = new PagedCollectionView(items);
        MyComboBox.ItemsSource = list;

        // Set the filter based on the contents of the textbox
        TextBox filterTextBox = MyComboBox.GetTemplateChild<TextBox>("FilterTextBox");
        list.Filter = new Predicate<object>(
            item => filter(item, filterTextBox.Text)
            );

        // Refresh the filter each time
        filterTextBox.TextChanged += (s2, e2) =>
        {
            list.Refresh();
            filterTextBox.Focus();
        };
    };

}

public static class Helper
{
    public static T GetTemplateChild<T>(this DependencyObject parent, string partName)
    {
        return (T)(VisualTreeHelper.GetChild(parent, 0) as Panel).FindName(partName);
    }
} 
```

# c# - 使用 newtonsoft 进行 Json 序列化

> ID：12513297
> 
> 赞同：2
> 
> 时间：2012-09-20T13:07:58.997
> 
> 标签：c#, json, json.net

当该字段为空时，JsonConvert 是否可以不序列化该字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:10:17.060

```
JsonConvert.SerializeObject(yourObj, 
    new JsonSerializerSettings() { NullValueHandling = NullValueHandling.Ignore }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:11:09.377

是的。查看 JsonSerializerSettings 及其 NullValueHandling 属性。

# web-services - REST Web 服务 - 动态查询参数

> ID：12513307
> 
> 赞同：3
> 
> 时间：2012-09-20T13:08:38.243
> 
> 标签：web-services, rest, get

我需要将动态查询参数发送到 REST Web 服务 GET 方法 [如下所示]。

主机：端口/应用程序？field1=XXX&value1=VVV&field2=XXX&value2=XXX ....

消费者可以将参数发送到 fieldn 和 valuen。每个字段都映射到该值。

对于这种类型的要求，我无法在服务器端方法上编写有限的 QueryParams 集。

是否有任何类型的 REST 库支持此功能？我检查了 RESTEasy 和 Jersey，它们似乎都不支持这一点 [据我检查]。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-10T10:48:23.407

使用[`UriInfo.getQueryParameters()`](https://docs.oracle.com/javaee/7/api/javax/ws/rs/core/UriInfo.html#getQueryParameters--)，如下：

```
@GET
@Path("/foo")
@Produces(MediaType.APPLICATION_JSON)
public Response foo(@Context UriInfo uriInfo) {
    MultivaluedMap<String, String> queryParams = uriInfo.getQueryParameters(); 
    ...
} 
```

它返回一个[`MultivaluedMap`](https://docs.oracle.com/javaee/7/api/javax/ws/rs/core/MultivaluedMap.html). 然后迭代它。

# css - 用作背景图像的 SVG 会丢失嵌入图像？

> ID：12513308
> 
> 赞同：2
> 
> 时间：2012-09-20T13:08:38.757
> 
> 标签：css, google-chrome, svg, background-image, responsive-design

我将 svg 用作响应式布局的背景图像，以在线格式重新创建复杂的小册子。

一切都适用于矢量对象，但是如果我在 svg 上嵌入图像，它们不会出现在背景上。

最奇怪的是，如果我自己检查 svg，图像就在那里，所以这有点烦人！

有谁知道它是否与 svg 配置或类似的东西有关？

我该如何解决这个问题并且仍然能够将 svg 用作背景图像（背景大小：覆盖规则！）？

哦，我应该补充一点，我已经在我的 mac 的 chrome 上看到了这种“现象”，如果它是特定于浏览器的，请说出来！

有问题的svg是这样的：http: [//nonstoptrip.limsomnium.com/img/fundoinfo1.svg](http://nonstoptrip.limsomnium.com/img/fundoinfo1.svg)

不幸的是，我不是一个 jsfiddler，所以我无法创建一些东西来展示给大家。

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T13:50:23.463

如果您在文档级别加载 svg，图像将出现。您可以稍后删除此元素，并且图像不会消失。您可以将其设置为加载到 1px x 1px 元素中...

```
function loadSVG(svgpath){
     if( /webkit/gi.test(navigator.userAgent.toLowerCase()) ){
       var obj = document.createElement("object");
       obj.setAttribute("type", "image/svg+xml");
       obj.setAttribute("data", svgpath);
       obj.setAttribute("width", "1");
       obj.setAttribute("height", "1");
       obj.setAttribute("style", "width: 0px; height: 0px; position: absolute;visibility : hidden");
       document.getElementsByTagName("html")[0].appendChild(obj);
     }
}

window.onload = function(){
  loadSVG("../img/mySVG.svg");
} 
```

该技术的作者是 Dirk Weber，这里有更多详细信息：[http ://www.eleqtriq.com/2012/01/enhancing-css-sprites-and-background-image-with-svg/](http://www.eleqtriq.com/2012/01/enhancing-css-sprites-and-background-image-with-svg/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T13:26:13.760

恐怕Webkit根本不支持这个。[https://bugs.webkit.org/show_bug.cgi?id=63548](https://bugs.webkit.org/show_bug.cgi?id=63548)正在跟踪这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T19:05:14.410

@Duopixel，仅对 type 属性使用“image/xml”也有效（我只在 chrome 中测试过）并且不会导致“资源解释为文档但使用 MIME 类型 image/svg+xml 传输”错误（而“image/svg+xml”确实如此）。希望这有助于摆脱您可能会遇到的控制台中那个烦人的错误！

# spring - 带有cron表达式的spring Quartz调度程序

> ID：12513310
> 
> 赞同：1
> 
> 时间：2012-09-20T13:08:41.363
> 
> 标签：spring, quartz-scheduler, scheduler

我想安排一个作业类，检查布尔变量是否更改为 true 或，最初未设置为任何值，每晚在某个时间（比如 1 点钟）使用 cron 表达式。如果 var，调度程序应该退出作业设置为 true 或 false，否则继续按计划运行作业最多 15 天，然后自动将其设置为 true。我认为 IoC 容器模式适合这样做。请提供整个代码的简要图片来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:23:17.683

Spring 具有内置的调度功能。虽然完整的实施在您的法庭上，但这里是一个预定方法的示例，在这种情况下是每天凌晨 1 点：

```
private Boolean scheduleToggle = null;

@Scheduled(cron = "0 0 01 * * ?")
public void myScheduledJob() {
    if(scheduleToggle != null) {
        return;
    } else {
        // run the job
        scheduleToggle = true;
        return;
    }
} 
```

有关完整说明和配置详细信息，请参阅：[http ://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html)

# javascript - Javascript SPA ASP.NET 表单身份验证与在 Javascript 中存储凭据

> ID：12513311
> 
> 赞同：1
> 
> 时间：2012-09-20T13:08:43.857
> 
> 标签：javascript, security, single-page-application

我正在为数据服务构建一个带有 ASP.NET MVC Web API 项目后端的 SPA Javascript 应用程序。过去，我使用 ASP.NET 表单身份验证来确保用户安全，但我正在考虑可能每次都将用户名/密码传递给数据服务，而不是使用任何类型的 cookie。所有通信都将通过 HTTPS。

2 个问题

1.  基于 cookie + 会话的安全性与将用户凭据存储在某种 Javascript 对象中的内存中的优缺点是什么？
2.  是否有任何推荐的方法可以在内存浏览器端保存凭据（包括密码）？

# internet-explorer - BO1IE8_v1;ENUS 在 UserAgent 中表示什么？

> ID：12513312
> 
> 赞同：1
> 
> 时间：2012-09-20T13:08:45.870
> 
> 标签：internet-explorer, browser, user-agent

我有一个客户在我们的应用程序中出现浏览器脚本错误。在故障排除中，我看到报告的用户代理包含几个我不认识的条目：

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; BO1IE8_v1;ENUS) 
```

具体来说，**BO1IE8_v1;ENUS**表示什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:51:33.240

这是 Internet Explorer 8。就我个人而言，我鼓励 IE8 用户升级到 IE9 或 Firefox 15。IE8 存在很多渲染问题和安全风险。

# java - 在java中将字符串从一个类传递到另一个类

> ID：12513316
> 
> 赞同：1
> 
> 时间：2012-09-20T13:08:57.497
> 
> 标签：java, string, class

我试图将一个字符串从一个类传递到另一个类，但我得到的结果是'null'。我想将字符串用户名从 LoginFrame 传递给 HomeworkFrame；

作业框架：

```
public void loadSubjects (){
    String item;
    try{
        System.out.println(username);
        Scanner f = new Scanner (new FileReader (username + " " + "Subjects" + ".txt"));
        while(f.hasNext()){
            item = f.nextLine();
            chSubjects.add(item);
        }
        f.close();  
    }catch(Exception e){
        JOptionPane.showMessageDialog(null, "Subjects cannot be loaded!", "Error", JOptionPane.ERROR_MESSAGE);
    }
} 
```

登录框架：

```
 public void loginUser(){
    r = new Registration();
    h = new HomeworkFrame();
    l = new Login();

    l.username = txtUser.getText();
    l.password = txtPass.getText();
    try{
        String line;
        boolean passwordFound = false ;
        BufferedReader f = new BufferedReader(new FileReader(l.username + ".txt"));
        while((line = f.readLine()) != null){
            if(line.equals(l.password)){
                passwordFound = true;
            }
        }

        if(passwordFound){
                h.username = l.username;
                dispose();
                m.setSize(700,600);
                m.setLocation(100,100);
                m.setVisible(true);
            }else{
                JOptionPane.showMessageDialog(null, "Wrong information!", "Error", JOptionPane.ERROR_MESSAGE);
            }
        f.close();
    }catch(Exception e){
        JOptionPane.showMessageDialog(null, "Wrong information!", "Error", JOptionPane.ERROR_MESSAGE);
    }
} 
```

显然我收到错误“无法加载主题”，因为用户名为空（我使用 println 方法检查了它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:33:36.643

如果出现此类问题，您必须从您注意到您的“用户名”字段为空的地方跟踪您的变量/字段。下一步应该是：

1.  在调用 loadObjects() 方法之前检查您对“h”对象执行的操作，如果有，然后检查它们对 HomeWorkFrame 中的用户名字段的影响（使用 println 或调试器）。
2.  检查您在 LoginFrame 中的 passwordFound 是否为真（因为如果为假，它不会为 h.username 赋值）
3.  如果它是错误的，请检查您的密码是否已从文件中检索（使用相同的 println 语句）

这种情况应该可以帮助您找到大多数“空”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:32:22.453

 *```
public class LoginFrame{

   private HomeworkFrame hw;

   public void doSomething(){

          String username = "your username";
          hw = new HomeworkFrame(username);
   }
}
public class HomeworkFrame{

   public HomeworkFrame(String username){

            doSomething with 'username'
   }
} 
```*  *回答你的问题！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:17:54.173

首先尝试检查您得到哪种类型的异常。

可能是文件不存在或列表为空或....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:18:28.867

是格式问题：`\`在 pathString 的空格前放一个：`"\ "`

你必须写它`"\ Subjects.txt"`，中间没有'+'。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:18:51.100

如果**System.out.println(username); 显示 null**这意味着

1.username 变量未初始化而离开。

2.value没有正确分配给它。

3.它可能是一个静态变量，你正在改变它的值。

请检查所有这些条件，并提供**调用 loadSubjects() 的**那部分代码，而不是您已经提供的该方法的主体。

**还有所有那些初始化、分配、修改用户名的代码部分。**

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-20T13:33:52.803

需要指定或传递该值，否则它肯定会给出 Null，因为它找不到任何要执行的值。*

# localization - 使用 knockout.js 和 Web Api 进行本地化

> ID：12513320
> 
> 赞同：2
> 
> 时间：2012-09-20T13:09:14.010
> 
> 标签：localization, knockout.js, asp.net-web-api

我目前正在使用 Web Api 进行服务调用并通过 knockout.js 绑定响应。除本地化外，一切都运行良好。

以前，使用 MVC3 Razor，我会使用 HtmlHelper 为我获取本地化文本，例如：`@Html.Resource("File, Key")`

显然，使用这种新方法，我无法在客户端上获取服务端代码，因此我需要事先从服务器获取所有这些值。

我的问题是：在使用 Web Api 和 Knockout 时，这是如何实现的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T12:47:06.287

你也可以看看[i18next](http://i18next.com/) 它为你提供了 html 页面的声明式语法，并且可以动态加载 json 资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T03:13:49.250

这可能是您正在寻找的内容：[Knockout Localization Binding](https://github.com/tfsjohan/Knockout-Localization-Binding)。即使您不想使用原始源，构建一个新源也非常简单。

# javascript - IE 8 将空字符串显示为“null”

> ID：12513322
> 
> 赞同：0
> 
> 时间：2012-09-20T13:09:22.230
> 
> 标签：javascript, internet-explorer

我从服务和一些字段和空字符串中获取 json 结果。所有其他浏览器都可以很好地显示空字符串，但 IE 8 显示它为“null”，

有谁遇到过同样的问题并得到解决方案？

# jsf-2 - 在 JSF 中使用 jquery 对话框

> ID：12513323
> 
> 赞同：1
> 
> 时间：2012-09-20T13:09:25.540
> 
> 标签：jsf-2

我目前在 JSF 2.0 和 jquery 中运行我的 Web 应用程序。此外，我添加了 jquery 对话框。模型对话框正常打开，没有任何错误。但是，当我尝试通过 ajax 提交时，对话框上的输入值不会发布到服务器端。

请参考下面的输入文本和按钮来提交值。

### 输入：

```
<h:inputText id="routingNumber_1" required="true" class="routingNo"
    value="#{paymentInfoController.modelBankInfo.routingNumber}"
    valueChangeListener="#{paymentInfoController.getBankByRoutingNumber}">
</h:inputText> 
```

### 按钮：

```
<h:commandLink styleClass="fll btn2 btnOff mr savepannextbutton" 
    id="savepannextbutton" style=" align:left;height: 40px; width: 70px;"
    value="Confirm" title="Confirm">
    <f:attribute name="bank" 
        value="#{paymentInfoController.modelBankInfo.routingNumber}">
    </f:attribute>
    <f:ajax execute="@form" onevent="addBankshowSuccessMessage" event="click"
        render=":formPaymentInformation:paymentInformationDataTable"
        listener="#{paymentInfoController.addBank}">
    </f:ajax>
</h:commandLink> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:26:13.257

JS/CSS 模态对话框通常在设计上重新定位到正文的末尾（以防止可能的浏览器特定布局/演示/zindex 问题）。因此，如果您将表示对话框的 HTML 元素放在 a`<h:form>`中，那么对话框最终将被放置在任何 HTML 之外`<form>`，因此无法向服务器提交任何内容。

您需要确保将`<h:form>`放置在对话框内。

* * *

**与具体问题无关**，请考虑查看在幕后使用 jQuery UI 的 JSF 组件库，而不是自制/重新发明所有 JSF+jQuery 事务。例如，[PrimeFaces有一个](http://www.primefaces.org)[`<p:dialog>`组件](http://www.primefaces.org/showcase/ui/dialog.jsf)作为用于此目的的一体化解决方案。

# java - 继承和多个协作者

> ID：12513329
> 
> 赞同：0
> 
> 时间：2012-09-20T13:09:48.517
> 
> 标签：java, generics, inheritance

我有几个 Java 接口/ABC/类：

```
public abstract class Target {
    public abstract void fire(Load load);
}

public class HttpTarget extends Target {
    @Override
    public void fire(Load load) {
        // ...
    }
}

public interface Load {
    // ...
}

public class HttpLoad implements Load {
    // ...
}

// Inside a driver
Target target = testSuite.getTarget();
Load load = testSuite.getLoad();

target.fire(load); 
```

所以本质上是一个`Target`罐头。我的主应用程序不关心返回的类型，或者返回的类型。它的工作是确保负载被触发。`fire()``Load``Driver``Target``getTarget()``Load``getLoad()`

我想将`fire()`内部的方法定义更改`HttpTarget`为：

```
@Override
public void fire(HttpLoad httpLoad) {
    // ...
} 
```

`Target`但是，当我这样做时，Java 抱怨方法覆盖与其父类提供的定义不匹配（因为`Load`和`HttpLoad`是两个不同的东西）。

这里有什么解决方案？泛型？抽象工厂？**最终，我希望能够强制执行 that`HttpTarget`的`fire()`方法只能接受`HttpLoad`s，但仍然与`Driver`代码兼容。**有人可以提供代码示例吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:15:39.077

是的，你需要泛型：

```
public abstract class Target<L extends Load> {
    public abstract void fire(L load);
}

public class HttpTarget extends Target<HttpLoad> {
    @Override
    public void fire(HttpLoad load) {
        ...
    }
}

public interface TestSuite<L extends Load> { // or class
    L getLoad();
    Target<L> getTarget();
}

public class HttpTestSuite implements TestSuite<HttpLoad> {
    @Override
    public HttpLoad getLoad() {
        ...
    }

    @Override
    public Target<HttpLoad> getTarget() {
        return new HttpTarget();
    }
} 
```

Java 拒绝编译您的 HttpTarget 类的原因是它没有覆盖 Target 的`fire(Load)`方法。实际上，根据合同，目标应该接受任何类型的负载作为参数。并且`HttpTarget`'`fire()`方法只接受 HttpLoad 的实例，因此违反了 Liskov 原则。泛型是解决这个问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:35:35.317

您将不得不使用泛型，即使那样它也不是您想要的。

```
public interface Load<T extends Load> {

    public void someMethod();

}

public class HttpLoad implements Load<HttpLoad> {

    @Override
    public void someMethod() {
        System.out.println("Http Load");
                ...
    }

}

public abstract class Target<T extends Load> {

    public abstract void fire(Load<T> load);

}

public class HttpTarget extends Target<HttpLoad> {

    @Override
    public void fire(Load<HttpLoad> load) {
        load.someMethod();

    }

} 
```

现在如果你写

```
Target<HttpLoad> httpTarget = new HttpTarget();
Load<HttpLoad> httpLoad = new HttpLoad();
Load<OtherLoad> otherLoad = new OtherLoad();
Load otherLoad2 = new OtherLoad();

httpTarget.fire(httpLoad);
httpTarget.fire(otherLoad); // this doesn't compile
httpTarget.fire(otherLoad2) // this how ever compiles 
```

# xslt - 查找 xml 节点的差异

> ID：12513330
> 
> 赞同：1
> 
> 时间：2012-09-20T13:09:49.780
> 
> 标签：xslt, xml-parsing

XML/XSLT 新手在这里。我有一些需要比较的数据集。输出需要是不在当前名册中的名册的先前成员的列表。该节点包含两组元素，我需要循环浏览并将缺少的成员放入 csv 文件中。在下面的示例中，Kerry Smith 被列为“Previous_Members”而不是“Member”，因此她需要在输出中列出。

相同的结构将发生在多个团队中。不同的团队可以有不同的#。（史密斯队可能有 4 名成员，琼斯队可能有 7 名成员，杰克逊队可能有 10 名成员，等等。）所以解决方案需要能够处理可变数量的元素。

这对我的经验来说是一个很大的延伸，所以任何指导都将不胜感激。

```
<?xml version="1.0" encoding="UTF-8"?>
<am:Team>
<am:First_Day>08/24/2012</am:First_Day>
<am:_Date>08/23/2012</am:_Date>
<am:Member am:Descriptor="Clare Smith">
    <am:ID am:type="Member_ID">4588-D4</am:ID>
</am:Member>
<am:Members am:Descriptor="Jack Smith">
    <am:ID am:type="Member_ID">4588-D3</am:ID>
</am:Members>
<am:Members am:Descriptor="Colin Smith">
    <am:ID am:type="Member_ID">4588-D2</am:ID>
</am:Members>
<am:Previous_Members am:Descriptor="Kerry Smith">
    <am:ID am:type="Member_ID">4588-D1</am:ID>
</am:Previous_Members>
<am:Previous_Members am:Descriptor="Colin Smith">
    <am:ID am:type="Member_ID">4588-D2</am:ID>
</am:Previous_Members>
<am:Previous_Members am:Descriptor="Jack Smith">
    <am:ID am:type="Member_ID">4588-D3</am:ID>
</am:Previous_Members>
<am:Previous_Members am:Descriptor="Clare Smith">
    <am:ID am:type="Member_ID">4588-D4</am:ID>
</am:Previous_Members> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:51:28.737

**使用**：

```
/*/am:Previous_Members[not(am:ID=/*/am:Member/am:ID)] 
```

这将选择 ID 不是当前成员 ID 的所有以前的团队成员。

仅将模板应用于此 XPath 表达式选择的元素。

**更新**：

所提供的 XML 文档同时包含：`am:Member`和`am:Members`-- 这可能是一个输入错误。

**更正上述内容，使只有`am:Members`，XML 文档变为**：

```
<am:Team xmlns:am="some:am">
    <am:First_Day>08/24/2012</am:First_Day>
    <am:_Date>08/23/2012</am:_Date>
    <am:Members am:Descriptor="Clare Smith">
        <am:ID am:type="Member_ID">4588-D4</am:ID>
    </am:Members>
    <am:Members am:Descriptor="Jack Smith">
        <am:ID am:type="Member_ID">4588-D3</am:ID>
    </am:Members>
    <am:Members am:Descriptor="Colin Smith">
        <am:ID am:type="Member_ID">4588-D2</am:ID>
    </am:Members>
    <am:Previous_Members am:Descriptor="Kerry Smith">
        <am:ID am:type="Member_ID">4588-D1</am:ID>
    </am:Previous_Members>
    <am:Previous_Members am:Descriptor="Colin Smith">
        <am:ID am:type="Member_ID">4588-D2</am:ID>
    </am:Previous_Members>
    <am:Previous_Members am:Descriptor="Jack Smith">
        <am:ID am:type="Member_ID">4588-D3</am:ID>
    </am:Previous_Members>
    <am:Previous_Members am:Descriptor="Clare Smith">
        <am:ID am:type="Member_ID">4588-D4</am:ID>
    </am:Previous_Members>
</am:Team> 
```

**XPath 表达式变为**：

```
/*/am:Previous_Members[not(am:ID=/*/am:Members/am:ID)] 
```

**而且，为了方便 OP，这里是一个完整的转换**，它准确地复制了想要的节点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:am="some:am" exclude-result-prefixes="am">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="am:Team/*"/>

 <xsl:template match="am:Previous_Members[not(am:ID=/*/am:Members/am:ID)] ">
     <xsl:copy-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对上述 XML 文档应用此转换时，会产生所需的正确结果**：

```
<am:Previous_Members xmlns:am="some:am" am:Descriptor="Kerry Smith">
   <am:ID am:type="Member_ID">4588-D1</am:ID>
</am:Previous_Members> 
```

# facebook - Facebook 应用页面上的“发送到手机”通知不会重定向到 Google Play

> ID：12513332
> 
> 赞同：1
> 
> 时间：2012-09-20T13:09:58.313
> 
> 标签：facebook, notifications

我开发了一款安卓应用程序“Smarter App”，我正在尝试将其集成到 facebook。现在，我在封面图片下方获得了带有“转到应用程序”和“发送到手机”按钮的应用程序页面。单击“发送到手机”时，它会在我的手机上发送通知。但是，当我单击通知（“Android 版 Smarter Car 已准备好在您的手机上使用。开始使用”）时，它并没有转到我可以安装此应用程序的谷歌应用程序商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:31:03.607

从一位 Facebook 开发人员那里得到帮助。

解决方案：在您的开发者设置中设置一个移动 URL，然后将其重定向到应用商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:28:02.043

在您的开发者设置`Native Android App`中为您的应用设置设置。确保同时包含包名称和类名称以使其正常工作。

# mysql - sql的平均函数

> ID：12513334
> 
> 赞同：-3
> 
> 时间：2012-09-20T13:10:00.717
> 
> 标签：mysql, sql, database

问题1。sql 的 where 子句不能与聚合函数（sum、avg、max、min）一起使用？

问题2。考虑一个名为 cust 的表，包含列：orderno、custid、cost

`select * from cust having cost> avg(cost)`

avg(cost) 给出输出 5695，因此，输出中应该有 3 条记录，因为它们的成本大于 5695。但只有一条记录。另一方面，这个查询：

`select * from cust having cost>(select avg(cost) from cust)`给出正确的输出为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:15:46.213

1.  不，使用`HAVING`
2.  因为 MySQL 没有正确实现 SQL 并隐含`GROUP BY`
3.  因为这几乎是一个正确的查询（见 2）。它应该是

    `select * from cust where cost>(select avg(cost) from cust)`

# c++ - 钩住参数包含未知对象的方法

> ID：12513336
> 
> 赞同：1
> 
> 时间：2012-09-20T13:10:08.160
> 
> 标签：c++, hook, detours

我通过弯路钩住了一个 C++ 成员方法。

该方法的声明是从 IDA 中的符号文件 (*.pdb) 中检索的

```
LPVOID __thiscall Foo(class UnknownClass, unsigned int, int) 
```

以下是我替换真实的方法

```
// the first parameter of the method is an unknown class to me
// I don't know its implementation, don't know its size
// so I just declare a dummy class with a enough size
class UnknownClass { public: CHAR dummy[1024]; };

typedef LPVOID (__thiscall MyDummyClass::*PFN_Foo)( UnknownClass, unsigned int, int );

class MyDummyClass
{
public:
    // The address of the real method
    PFN_Foo m_pfnFoo;

    // My method to replace the real one
    LPVOID MyFoo( UnknownClass p1, unsigned int p2, int p3)
    {
        MyDummyClass * pThis = (MyDummyClass*)this;

        // call the real one.
        // and here the error happens 
        return (pThis->*m_pfnFoo)( p1, p2, p3 );
    }
}; 
```

钩子起作用并被`MyFoo`调用而不是真正的方法。但是在调用真实方法时出现错误：

> `Run-Time Check Failure #0 - The value of ESP was not properly saved across a function call. This is usually a result of calling a function declared with one calling convention with a function pointer declared with a different calling convention.`

你对我有什么建议吗？当参数之一作为对象传递时如何处理这种钩子，但我不知道它的实现。

# javascript - 脚本不适用于加载无限滚动的元素

> ID：12513337
> 
> 赞同：0
> 
> 时间：2012-09-20T13:10:08.657
> 
> 标签：javascript, tumblr, infinite-scroll

我在我的 tumblr 页面上使用这个脚本，它为帖子提供不同的随机文本颜色：

```
function get_random_color() {
var letters = '0123456789ABCDEF'.split('');
var color = '#';
for (var i = 0; i < 6; i++ ) {
    color += letters[Math.round(Math.random() * 15)];
}
return color;}
$(function() {
$(".post").each(function() {
    $(this).css("color", get_random_color());
}); }); 
```

问题是脚本不适用于加载无限滚动的元素。谁能帮我重写这段代码？可悲的是，我不知道如何编写 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:17:18.910

看看你博客的`main.js`脚本。当您从另一个页面获取新元素时，您可以调用自定义函数。这是我对您`main.js`文件的建议修订。

```
$(window).load(function () {
var $wall = $('#content');
$wall.imagesLoaded(function () {
    $wall.masonry({
        itemSelector: '.post',
        isAnimated: false
    });
});
$wall.infinitescroll({
    navSelector: '#pagination',
    nextSelector: '#pagination li a.pagination_nextlink',
    itemSelector: '.post',
    loadingImg: "http://static.tumblr.com/kwz90l7/bIdlst7ub/transparent.png",
    loadingText: " ",
    donetext: " ",
    bufferPx: 100,
    debug: false,
    errorCallback: function () {
        $('#infscr-loading').animate({
            opacity: .8
        }, 2000).fadeOut('normal');
    }
}, function (newElements) {
    var $newElems = $(newElements);
    $newElems.hide();
    $newElems.each(function(value){
        value.css("color", get_random_color());
    });
    $newElems.imagesLoaded(function () {
        $wall.masonry('appended', $newElems, {
            isAnimated: false,
            animationOptions: {
                duration: 900,
                easing: 'linear',
                queue: false
            }
        }, function () {
            $newElems.fadeIn('slow');
        });
    });
    $(document).ready(function () {
        $("a[rel^='prettyPhoto']").prettyPhoto({
            deeplinking: false,
            default_width: 600,
            default_height: 550,
            allow_resize: true,
        });
    });
});
$('#content').show(500);
});

function get_random_color() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
         color += letters[Math.round(Math.random() * 15)];
    }
    return color;
 } 
```

我所做的是添加您的`get_random_color`函数并从 Infinite Scroll 调用中调用它，以便为每个元素添加自定义颜色，`$newElems`所以我所做的只是获取您的代码并以不同于您尝试的方式集成它做，这是行不通的。从理论上讲，这应该有效。如果没有或您有任何疑问，请告诉我。

# mockito - 使用 Enum 参数进行 Mockito 模拟不起作用

> ID：12513344
> 
> 赞同：1
> 
> 时间：2012-09-20T13:10:27.493
> 
> 标签：mockito, powermock

我无法弄清楚这有什么问题，希望有人可以提供帮助：

我有一个枚举 MyEnum，它用作我试图模拟的方法的参数。嘲笑看起来有点像这样：

```
when(myMockedObject.getMethod(MyEnum.XYZ)).thenReturn(myMockedValue); 
```

实际的代码执行如下所示：

```
MyMockedValue theMockedValue = myMockedObject.getMethod(MyEnum.XYZ); 
```

我期望 theMockedValue 等于 myMockedValue。但是，模拟不起作用，并且 theMockedValue 始终为空。这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:16:02.583

这取决于我自己的狡猾代码。我发现一个重复的模拟对象，一个实例参与模拟，另一个在代码中使用，导致返回空值。

就像我以为我输掉了与 mockito 的战斗一样，现在我意识到我确实明白发生了什么。

# php - php include 在块的开头添加空格

> ID：12513345
> 
> 赞同：1
> 
> 时间：2012-09-20T13:10:32.823
> 
> 标签：php, include

我有简单的页面，例如：

```
...
<div><?php include 'somefile.php' ?></div>
... 
```

'somefile.php'-文件包含`<p>Lorium ipsum...</p>`

浏览器在块的开头添加空格？看图片： [http ://s44.radikal.ru/i104/1209/95/87e6c2438700.jpg](http://s44.radikal.ru/i104/1209/95/87e6c2438700.jpg)

而这个测试页面[http://new.arsltd.ru/test.php](http://new.arsltd.ru/test.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:12:01.330

很可能`somefile.php`在 PHP 开始标记之前有空格或其他不可打印的字符（例如 BOM）。

**更新：**确实，您的文件以 UTF-8 BOM（字节`EF BB BF`）开头。使用您的文本编辑器在没有 BOM 的情况下保存它；您将看到文件大小减少 3 个字节作为确认。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:12:18.720

您的一个元素上很可能有填充或边距样式指令。浏览器在解析 HTML 时会忽略空格（应该如此）。

例如，您在 HTML 源代码中看到的空格可能是由包含的 .php 文件开头的换行符引起的（注意：这仍然不会影响代码的呈现方式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:13:06.240

`somefile.php`包含包含在段落中的文本`<p>`，并且最确定该段落具有边距或填充。

你的问题`test.php`从一个不可见的 unicode 字符开始。

```
<div><p> // between <div> and <p> there is an unicode character 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:14:00.900

'somefile.php' 的内容是什么？尝试使用 Notepad++ 或其他 IDE/文本编辑器在没有 BOM 的情况下以 UTF-8 更改该文件的编码

# php - Symfony2 MimeTypeGuesser 错误地处理 WMV 文件

> ID：12513346
> 
> 赞同：0
> 
> 时间：2012-09-20T13:10:33.837
> 
> 标签：php, file, symfony, mime-types, wmv

更新：这是处理视频文件上传的代码。

我有一个 symfony2 项目，它在运行时注册了 3 个 MIME 类型猜测器。他们是：

```
[0] => Symfony\Component\HttpFoundation\File\MimeType\FileinfoMimeTypeGuesser Object
[1] => Symfony\Component\HttpFoundation\File\MimeType\ContentTypeMimeTypeGuesser Object
[2] => Symfony\Component\HttpFoundation\File\MimeType\FileBinaryMimeTypeGuesser Object 
```

当[FileBinaryMimeTypeGuesser.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/File/MimeType/FileBinaryMimeTypeGuesser.php)执行时，该方法`guess()`被调用，它会：

```
file -b --mime video.wmv 2>/dev/null 
```

结果是：

```
application/octet-stream; charset=binary 
```

这是不正确的 - 每个[microsoft](http://support.microsoft.com/kb/288102)， wmv 应该有一个 MIME 类型：

```
audio/x-ms-wmv 
```

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:05:59.853

因此，它似乎与视频有关。我在互联网上找到的一些视频有效，而另一些则没有。我不知道为什么，因为它们都是 wmv 的 - 无论如何，这似乎不是猜测者的问题，而是*一些*wmv 的编码属性或字节序列的问题。

啊啊啊微软！

# java - 通过java代码查看jar文件

> ID：12513347
> 
> 赞同：1
> 
> 时间：2012-09-20T13:10:33.150
> 
> 标签：java, jar

我想创建一个将迭代 jar 文件并提供该 jar 文件的类的 java 应用程序。

我搜索了很多，但没有得到足够的信息。我想要能够打开 jar 文件并能够迭代该 jar 的 java 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:15:08.663

请参阅：java.util.jar.JarFile.entries()

[http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html#entries%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html#entries%28%29)

# grails - Grails 验证密码

> ID：12513348
> 
> 赞同：1
> 
> 时间：2012-09-20T13:10:52.373
> 
> 标签：grails

在控制器中，我如何验证密码，使其至少包含 1 个字母、1 个数字、1 个特殊字符，并且长度至少为 8 位。我尝试使用的代码如下：

```
 boolean validatePassword(String password) {
    System.out.println("In validate")
   def pattern = /^.*(?=.{7,})(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%*&+()]).*$/
    def matcher = password =~ pattern
    System.out.println("HERERERE")
    return matcher.getCount() ? true : false
} 
```

如果说一切都无效，这将不起作用。我安装了 spring security ui 插件。有没有办法可以使用它的验证功能？我知道我可以用它来编码密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:28:53.133

我没有尝试在一个正则表达式中做所有事情，而是拆分了测试。由于在 Groovy 中 a`Matcher`通过调用强制转换为布尔值`find()`，因此以下应该可以工作，并使意图更清晰。

```
boolean validatePassword(String pass) {
  return (pass) && (pass.length() > 7) && (pass =~ /\p{Alpha}/) &&
         (pass =~ /\p{Digit}/) && (pass =~ /[!@#$%*&+()]/)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:04:09.030

如果您需要更复杂的东西，还有一个很好的名为 vtpassword 的 Java 库

[http://code.google.com/p/vt-middleware/wiki/vtpassword](http://code.google.com/p/vt-middleware/wiki/vtpassword)

# eclipse - 如何从现有的 Eclipse 安装创建 Webstart

> ID：12513350
> 
> 赞同：2
> 
> 时间：2012-09-20T13:11:00.293
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, java-web-start

我想创建一个 java webstart 产品，其中包含我当前 eclipse 安装的所有内容 - 标准 eclipse java 版本以及我开发/下载的一些额外插件。

有许多教程展示了如何为 Eclipse RCP 应用程序执行此操作，但我不想专门为此目的创建 RCP（我也尝试过这样做，但从未真正设法将应用程序配置为看起来像我的工作台）。

那么，这甚至可能吗？任何指针？

更新：我关注[了这篇](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-jws/index.html)文章，但是在将我的应用程序部署到 Web 服务器并运行 jnlp 之后，下载了 jars 但什么也没发生。我尝试将`eclipse.product`属性更改为其他“可能”值，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:27:30.990

你真的需要网络启动软件吗？

由于 eclipse 不需要安装，并且插件安装在 eclipse 的同一目录中，为什么在配置好 eclipse 后不压缩 eclipse 并将其重新分发为 zip。甚至 eclipse 本身也以 zip 的形式分发。

# android - 关闭 AlertDialog 时键盘没有被隐藏

> ID：12513352
> 
> 赞同：6
> 
> 时间：2012-09-20T13:11:08.147
> 
> 标签：android

我已经用显示我的 XML 布局的类扩展了 AlertDialog。我不使用 AlertDialog 的标准按钮，我有自己的 OK 和 Cancel 按钮。听众为他们打电话`dismiss()`。问题是如果我正在编辑 EditText 的内容然后按 OK（它是 Android 3.1 平板电脑，键盘不会阻止我与对话框交互），对话框将隐藏但键盘不会，它会留在后台。可能是什么原因以及如何解决？

这是我的对话框的构造函数，给出这个想法：

```
public NetworkCameraParametersDialog(Context context ) {
        super(context);

        View content = ((LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.dialog, null);
        setView(content);

        Button btnOk = (Button) content.findViewById(R.id.btn_Ok);
        btnOk.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                                // Some work
                dismiss();              
            }
        });

        Button btnClose = (Button) content.findViewById(R.id.btn_Close);
        btnClose.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                dismiss();
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:11:04.360

您可以强制软键盘隐藏：

```
 try {
        InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        inputManager.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), 0);
    } catch (Exception e) {} 
```

# python - 使用python从img读取的四舍五入numpy float数组，返回的值未四舍五入

> ID：12513355
> 
> 赞同：2
> 
> 时间：2012-09-20T13:11:23.337
> 
> 标签：python, numpy, floating-point

由于某种原因，浮点 numpy 数组的简单舍入似乎不起作用。

我从读取一个巨大的 img （形状为 (7352, 7472)）中得到了 numpy 数组。防爆值：

```
>>> imarray[3500:3503, 5000:5003]
array([[ 73.33999634,  73.40000153,  73.45999908],
       [ 73.30999756,  73.37999725,  73.43000031],
       [ 73.30000305,  73.36000061,  73.41000366]], dtype=float32) 
```

对于舍入，我一直在尝试使用 numpy.around() 作为原始值，还将值写入新数组，原始数组的副本，但由于某种原因没有结果..

```
arr=imarray
numpy.around(imarray, decimals=3, out=arr)
arr[3500,5000] #results in 73.3399963379, as well as accessing imarray 
```

所以，精度更高！！！是因为这么大的阵型吗？

我需要对其进行四舍五入以获得最频繁的值（模式），并且我正在搜索 vay 以避免越来越多的库..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:19:17.510

你的数组有 dtype `float32`。那是一个 4 字节的浮点数。使用可表示的最接近 73.340 的浮点数`float32`大约是 73.33999634：

```
In [62]: x = np.array([73.33999634, 73.340], dtype = np.float32)

In [63]: x
Out[63]: array([ 73.33999634,  73.33999634], dtype=float32) 
```

所以我认为`np.around`四舍五入是正确的，只是你`dtype`的粒度太大而无法四舍五入到你可能期望的数字。

```
In [60]: y = np.around(x, decimals = 3)

In [61]: y
Out[61]: array([ 73.33999634,  73.33999634], dtype=float32) 
```

然而，如果 dtype 是`np.float64`：

```
In [64]: x = np.array([73.33999634, 73.340], dtype = np.float64)

In [65]: y = np.around(x, decimals = 3)

In [66]: y
Out[66]: array([ 73.34,  73.34]) 
```

请注意，即使`y`显示 73.34 的打印表示，实数 73.34 也不一定完全可以表示为 float64。float64 表示可能非常接近 73.34，以至于 NumPy 选择将其打印为 73.34。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:23:02.630

The answer by @unutbu is absolutely correct. Numpy is rounding it as close to the number as it can given the precision that you requested. The only thing that I have to add is that you can use [`numpy.set_printoptions`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html) to change how the array is displayed:

```
>>> import numpy as np
>>> x = np.array([73.33999634, 73.340], dtype = np.float32)
>>> y = np.round(x, decimals = 3)
>>> y
array([ 73.33999634,  73.33999634], dtype=float32)
>>> np.set_printoptions(precision=3)
>>> y
array([ 73.34,  73.34], dtype=float32) 
```

# delphi - TListView：在 Columns.Delete(index) 之后丢失了最后一列的标题

> ID：12513358
> 
> 赞同：2
> 
> 时间：2012-09-20T13:11:33.033
> 
> 标签：delphi, vcl, tlistview, columnheader

我想我在 TListView 中发现了一个潜在的错误。

重现步骤：创建一个新的 VCL Forms 应用程序，添加一个 TListView，将其 ViewStyle 设置为 vsReports。添加两个按钮

按钮1：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  lCol: TListColumn;
begin
  lcol :=   ListView1.Columns.Add;
  lcol.Caption := 'name';
  lcol :=   ListView1.Columns.Add;
  lcol.Caption := 'name2';
  lcol :=   ListView1.Columns.Add;
  lcol.Caption := 'name3';
end; 
```

按钮2：

```
procedure TForm1.Button2Click(Sender: TObject);
begin
  ListView1.Columns.Delete(1);
end; 
```

结果：该列被删除，但最后一列的标题丢失。当添加更多列并删除其他列之间的列（或删除第一列）时，也会发生这种情况。最后一列的标题始终为空。

我正在使用 XE3。有什么我错过的吗？

谢谢

编辑： [质量控制链接](http://qc.embarcadero.com/wc/qcmain.aspx?d=108880)

[潜在重复](http://qc.embarcadero.com/wc/qcmain.aspx?d=105680)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T02:11:31.090

除了问题中报告的内容之外，还有更多内容（最后更多）。

这与您之前的[问题](https://stackoverflow.com/questions/8258386/tlistview-vcl-loses-the-order-of-columns-if-you-add-a-column)有关。该问题涉及列表视图控件在添加列后移动列时丢失列和项/子项之间的映射。我提出了一个可能的解决方案，`comctrls.pas`其中涉及`FOrderTag`在移动列时保留 s 列。每当移动列时，VCL 都会从头开始构建“FOrderTag” - 不考虑列的当前位置。

然后发生的事情是，您提交[错误报告](http://qc.embarcadero.com/wc/qcmain.aspx?d=101435)，提交可能的修复作为解决方法，然后它会按原样签入。现在您发现的问题是，当我们保留`FOrderTag`每一列，然后从中间删除一列时，我们会创建一个洞 - 它们不再是连续的（假设我们有带有各自顺序标签的第 0、1 和 2 列，删除第 1 列，现在我们有 2 列，订单标签为 0 和 2)。显然本机控件不喜欢这样。

再次修改 VCL，我们可以在移除列时移除任何可能的孔。当您调整/移动问题[评论](https://stackoverflow.com/questions/12513358/tlistview-last-columns-caption-lost-after-columns-deleteindex#comment16843417_12513358)中提到的缺少标题的列时，下面似乎会处理缺少的标题和 AV。

```
destructor TListColumn.Destroy;
var
  Columns: TListColumns;
  i: Integer; //+
begin
  Columns := TListColumns(Collection);
  if TListColumns(Collection).Owner.HandleAllocated then
    ListView_DeleteColumn(TListColumns(Collection).Owner.Handle, Index);
//{+
  for i := 0 to Columns.Count - 1 do
    if Columns[i].FOrderTag > FOrderTag then
      Dec(Columns[i].FOrderTag);
//}
  inherited Destroy;
  Columns.UpdateCols;
end; 
```

现在，如果我们回到问题中未报告的内容，如果您插入了一些子项，您会注意到它们保留了它们的位置，IOW 列和子项之间的映射丢失了。您的观点可能与我的观点不同，但我认为已删除列的子项应该会丢失。不幸的是，我无法找到实现这一目标的方法。

* * *

**编辑：**我想不出任何可以在 VCL 中轻松集成/修复的东西。没有什么能阻止您删除第一个插入的列。这一项对应items，如果我们删除items，所有子item也会被取出。VCL 中的当前实现是，当您删除列时，实际上不会删除任何项目数据。您可以通过在删除一列后添加一列来验证这一点，子项将神奇地出现在新列下。

无论如何，我可以建议您手动删除已删除列的子项。以下是删除列及其相应子项的实用程序示例：

```
procedure ListViewDeleteColumn(ListView: TListView; Col: Integer);
var
  i: Integer;
  ColumnOrder: array of Integer;
begin
  SetLength(ColumnOrder, ListView.Columns.Count);
  ListView_GetColumnOrderArray(
        ListView.Handle, ListView.Columns.Count, PInteger(ColumnOrder));
  Assert(ColumnOrder[Col] <> 0, 'column with items cannot be removed');

  for i := 0 to ListView.Items.Count - 1 do
    if Assigned(ListView.Items[i].SubItems) and
        (ListView.Items[i].SubItems.Count >= Col) then
    ListView.Items[i].SubItems.Delete(ColumnOrder[Col] - 1);

  ListView.Columns.Delete(Col);
end; 
```

如果您决定删除第一列，请决定您将如何处理项目/子项目并重建它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:51:48.417

如果您使用下面的代码删除最后一列，则可以正常工作：

```
uses
 CommCtrl;

procedure TForm1.Button3Click(Sender: TObject);
begin
  ListView_DeleteColumn(ListView1.Handle, 2);
end; 
```

# java - Java Swing GUI 在重新聚焦时冻结

> ID：12513359
> 
> 赞同：1
> 
> 时间：2012-09-20T13:11:33.080
> 
> 标签：java, swing, concurrency, freeze, event-dispatching

我有一个在 WinXP 上运行的 Swing GUI。

有时，当我做其他事情（在网上冲浪......）然后我想回到我的程序时，GUI 会出现但完全冻结，我无法对其进行任何操作。

我必须等待（可能是 10 秒或 5 分钟），直到它再次工作。

当我从屏幕保护程序回来时，我注意到了同样的问题（所以我禁用了它）。

机器故障，RAM 和处理器级别正常。

你知道这个非常烦人的问题的根源吗？可能是重绘问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:18:05.860

对此可能有很多解释：

1.  您的应用在 EDT 线程（控制界面更新的线程）中执行了一些繁重的操作
2.  可能存在由 L&F 或组件错误导致的 UI 更新问题（极少数情况）
3.  GC 由于一些内部调用而发生并处理整个应用程序（不太可能）
4.  应用程序窗口的一些本机或旧 JDK 问题（几乎 0% 的机会是您的情况）

通常第一个解释是有效的，在这种情况下，您应该只查看您的代码并在单独的线程中提取所有“繁重”操作。

无论如何，如果没有看到代码，我不能说更具体的内容......

# java - JAXB、自定义绑定、Adapter1.class 和 Joda-time

> ID：12513361
> 
> 赞同：12
> 
> 时间：2012-09-20T13:11:34.320
> 
> 标签：java, binding, annotations, jaxb

我对 JAXB 为 XML 模式生成绑定类的方式有疑问（为了精确起见，我无法修改）。我想将 xsd:date 类型映射到 Joda-time LocalDate 对象，并在[此处](http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html)、[此处](https://stackoverflow.com/questions/12501581/wsdl-customization-xmlgregoriancalender-to-java-util-date)和[此处](https://stackoverflow.com/questions/4666988/in-jaxb-how-to-use-xmljavatypeadapters-annotation)阅读，我创建了以下 DateAdapter 类：

```
public class DateAdapter extends XmlAdapter<String,LocalDate> {
    private static DateTimeFormatter fmt = DateTimeFormat.forPattern("yyyyMMdd");

    public LocalDate unmarshal(String v) throws Exception {
        return fmt.parseLocalDate(v);
    }

    public String marshal(LocalDate v) throws Exception {
        return v.toString("yyyyMMdd");
    }
} 
```

我将以下内容添加到我的全局绑定文件中：

```
 <jaxb:globalBindings>
        <jaxb:javaType name="org.joda.time.LocalDate" xmlType="xs:date"
            parseMethod="my.classes.adapters.DateAdapter.unmarshal"
            printMethod="my.classes.adapters.DateAdapter.marshal" />
    </jaxb:globalBindings> 
```

问题是，当我尝试 maven 编译我的项目时，它失败并出现以下错误：

```
[ERROR] \My\Path\MyProject\target\generated-sources\xjc\my\classes\generated\Adapter1.java:[20,59] non-static method unmarshal(java.lang.String) cannot be referenced from a static context
[ERROR] \My\Path\MyProject\target\generated-sources\xjc\my\classes\generated\Adapter1.java:[24,59] non-static method marshal(org.joda.time.LocalDate) cannot be referenced from a static context 
```

...这就是事情变得奇怪的地方。JAXB 生成一个包含以下内容的类 Adapter1：

```
public class Adapter1
    extends XmlAdapter<String, LocalDate>
{

    public LocalDate unmarshal(String value) {
        return (my.classes.adapters.DateAdapter.unmarshal(value));
    }

    public String marshal(LocalDate value) {
        return (my.classes.adapters.DateAdapter.marshal(value));
    }

} 
```

....这是编译错误的来源。

现在，我的问题是：

*   由于我的适配器覆盖了 XmlAdapter，我无法将方法设为静态....如何避免这种情况？
*   我可以完全避免生成 Adapter1.class 吗？也许使用包级注释 XmlJavaTypeAdapters，如果是这样，我该怎么做？（JAXB 已经生成了自己的 package-info.java ......）

希望我把我的情况说清楚。
谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-18T09:25:22.590

我在第一个 WSDL 环境中：根本没有 java，只需从提供的 WSDL 生成一个 CXF 客户端。

我被丑陋困扰`Adapter1.java`了很长时间，但我在[那里](https://web.archive.org/web/20150125085421/http://blog.steveperkins.info/2011/01/changing-jaxb-generated-adapter-classes/)找到了解决方案。

您将使用已经解释过的自定义 XMLAdapter。

这个问题的关键是`xjc`在全局绑定文件中添加扩展名：

```
<jaxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
 xmlns:xs="http://www.w3.org/2001/XMLSchema" 
 xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
 jaxb:extensionBindingPrefixes="xjc" jaxb:version="2.1">
    <jaxb:globalBindings>
       <xjc:javaType adapter="com.xxx.tools.xjc.DateAdapter" 
        name="java.util.Date" xmlType="xs:dateTime" />
    </jaxb:globalBindings>
</jaxb:bindings> 
```

**xjc**扩展允许使用`xjc:javaType`该接受**适配器**参数。不再需要静态方法！

**请注意**，这似乎仅适用于 jaxb 2.1+。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T13:35:45.993

您不需要扩展`XmlAdapter`.

只需在 POJO 上创建静态方法，它就会起作用。

例子：

```
 public class DateAdapter {
    private static DateTimeFormatter fmt = DateTimeFormat.forPattern("yyyyMMdd");

    public static LocalDate unmarshal(String v) throws Exception {
        return fmt.parseLocalDate(v);
    }

    public static String marshal(LocalDate v) throws Exception {
        return v.toString("yyyyMMdd");
    }
 } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-10T11:36:48.330

您不需要扩展`XmlAdapter`和使用 Joda-Time v2，您甚至不需要实现静态方法，因为它们已经提供。

```
<jaxb:javaType xmlns="http://java.sun.com/xml/ns/jaxb" 
    name="org.joda.time.LocalDate"
    xmlType="xs:date"
    parseMethod="org.joda.time.LocalDate.parse"
    printMethod="java.lang.String.valueOf"
/> 
```

请参阅[用于 xs:date xs:time 和 xs:dateTime 的 JAXB 数据类型转换器](https://sourceforge.net/p/joda-time/feature-requests/82/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T13:33:30.700

从 XML 模式生成 XmlAdapters 时，您需要将转换逻辑放在静态方法中，而不是放在`XmlAdapter`. 这样`XmlAdapter`可以利用该逻辑来生成。我承认这是一个奇怪的机制。

**完整示例**

*   [http://blog.bdoughan.com/2011/08/xml-schema-to-java-generating.html](http://blog.bdoughan.com/2011/08/xml-schema-to-java-generating.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-20T13:41:17.550

您正在扩展`XmlAdapter`当您想要为 JaxB 注释 Java 模型时使用的，即通过 annotation `@XmlJavaTypeAdapter(Adapter1.class)`。对于您的情况，您只需要一个具有不扩展的静态方法的类`XmlAdapter`。您将需要 parse 方法（获取一个字符串并返回日期）和 print 方法（获取一个日期并返回一个字符串），仅此而已。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-16T09:51:15.177

我发现这个解决方案很有用 [http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html](http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html)

您将创建一个适配器

```
package blog.jodatime;

import javax.xml.bind.annotation.adapters.XmlAdapter;
import org.joda.time.DateTime;

public class DateTimeAdapter 
    extends XmlAdapter<String, DateTime>{

    public DateTime unmarshal(String v) throws Exception {
        //return new DateTime(v); - old solution that didn't properly handled the timezone
        return DateTime.parse(v);
    }

    public String marshal(DateTime v) throws Exception {
        return v.toString();
    }

} 
```

然后通过在源代码中定义 blog/jodatime/package-info.java 来注册它

```
@XmlJavaTypeAdapters({ @XmlJavaTypeAdapter(type = DateTime.class, value = JodaDateTimeJaxbAdapter.class) })
package blog.jodatime;

import javax.xml.bind.annotation.adapters.*;

import org.joda.time.*; 
```

然后您应该期望 DateTime 的序列化完成后没有任何其他更改，只是不要忘记使用 @XmlRootElement 注释您的类。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-09T13:34:31.087

一个完整的例子。这是您的 bindings.xml：

```
<jaxws:bindings wsdlLocation="YourWsdl"
      xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
      xmlns:xs="http://www.w3.org/2001/XMLSchema"
      xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
      xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
      xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
      jxb:extensionBindingPrefixes="xjc">
    <jaxws:bindings  node="wsdl:definitions/wsdl:types/xs:schema[@targetNamespace='YourTargetNameSpace']">
       <jxb:globalBindings xmlns:jxb="http://java.sun.com/xml/ns/jaxb" xmlns:xs="http://www.w3.org/2001/XMLSchema">
          <xjc:javaType adapter="com.xxx.your.package.DateAdapter" name="java.util.Date" xmlType="xs:dateTime" />
       </jxb:globalBindings>
    </jaxws:bindings>
</jaxws:bindings> 
```

加上Java类：

```
package com.yourpackage;

import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

import javax.xml.bind.DatatypeConverter;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class DateAdapter extends XmlAdapter<String, Date>
{

    @Override
    public Date unmarshal(final String date) {
        return DatatypeConverter.parseDate(date).getTime();
    }

    @Override
    public String marshal(final Date date)
    {
        Calendar calendar = new GregorianCalendar();
        calendar.setTime(date);
        return DatatypeConverter.printDate(calendar);
    }

} 
```

加上 pom.xml 定义：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>${cxf.version}</version>
    <dependencies>
        <dependency>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics</artifactId>
            <version>0.6.4</version>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <id>generate-sources</id>
            <phase>generate-sources</phase>
            <configuration>
                <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                <defaultOptions>
                    <autoNameResolution>true</autoNameResolution>
                </defaultOptions>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>${basedir}/src/main/resources/your.wsdl</wsdl>
                        <extraargs>
                            <extraarg>-verbose</extraarg>
                            <extraargs>-xjc-npa</extraargs>
                            <extraarg>-xjc-Xsetters</extraarg>
                        </extraargs>
                        <bindingFiles>
                        <bindingFile>${basedir}/src/main/resources/binding.xml</bindingFile>
                        </bindingFiles>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

# java - HTTP 网络服务

> ID：12513362
> 
> 赞同：0
> 
> 时间：2012-09-20T13:11:39.510
> 
> 标签：java

是否可以使用 HTTP 客户端调用 Web 服务？

如果是的话，给我一些例子。如何获取该 Web 服务中存在的方法列表？

例如 ：

我正在使用这个[Web 服务 WSDL 链接](http://www.w3schools.com/webservices/tempconvert.asmx?WSDL)

它有两个函数 FahrenheitToCelsius 和 CelsiusToFahrenheit

注意：我知道如何使用 Web 客户端调用 webservice，但我需要使用 HTTP 客户端执行调用 webService

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:22:02.493

是的你可以。例如使用 Apache HttpClient 4.2.1。

```
import java.io.File;
import java.io.IOException;

import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.fluent.Content;
import org.apache.http.client.fluent.Request;
import org.apache.http.entity.ContentType;

public class HttpClientPost {
    public static void main(String[] args) throws ClientProtocolException, IOException {
        String request = "<soapenv:Envelope response xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" " +
            "xmlns:tem=\"http://tempuri.org/\"><soapenv:Header/><soapenv:Body>" +
            "<tem:CelsiusToFahrenheit><tem:Celsius>100</tem:Celsius>" +
            "</tem:CelsiusToFahrenheit></soapenv:Body></soapenv:Envelope>";
        Content response = Request.Post("http://www.w3schools.com/webservices/tempconvert.asmx")
            .bodyString(request, ContentType.TEXT_XML).execute().returnContent();
        System.out.println("response: " + response);
    }
} 
```

对于这些方法，请查看WSDL 文件中名为*operation的元素。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:16:49.437

可以肯定的是，只要 Web 服务是通过 HTTP 协议公开的。但是您必须自己解析响应，并自己构建有效请求。使用像[Apache Axis](http://axis.apache.org/axis2/java/core/)这样的框架要容易得多，它使所有这些都自动化。

您还应该注意，此 Web 服务正在使用 SOAP 协议，当您尝试使用它时应该考虑到这一点。

# ocaml - 寻找在 ocaml 类型构造函数上迭代的技巧

> ID：12513366
> 
> 赞同：3
> 
> 时间：2012-09-20T13:11:57.820
> 
> 标签：ocaml

我有一个 ocaml 类型：

```
type t = A | B |  ... 
```

以及打印有关该类型的内容的功能：

```
let pp_t fmt x = match x with 
  | A -> Format.fprintf fmt "some nice explanations about A"
  | B -> Format.fprintf fmt "some nice explanations about B"
  | ... 
```

我怎么能写一个函数来打印所有的解释？相当于：

```
let pp_all_t fmt = 
   Format.fprintf fmt A;
   Format.fprintf fmt B;
   ... 
```

但是如果我忘记添加一个新的构造函数，那会警告我。拥有自动构建该功能的东西会更好，因为我的问题是它`t`很安静而且变化很大。

我无法想象如何在类型构造函数上“迭代”，但也许有一个技巧......

**编辑**：我最后做的是：

```
type t = A | B |  ... | Z
let first_t = A
let next_t = function A -> B | B -> C | ... | Z -> raise Not_found
let pp_all_t fmt = 
  let rec pp x = pp_t fmt x ; try let x = next_t x in pp x with Not_found -> ()
  in pp first_t 
```

因此，当我更新时`t`，编译器会警告我必须更新`pp_t`and`next_t`并且`pp_all_t`不必更改。感谢大家的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:35:09.933

为了解决复杂且不断发展的类型的问题，实际上我可能会编写一个 OCaml 程序，该程序从包含值列表和相关信息的文件生成代码。

但是，如果您有一个`incr_t : t -> t`增加 type 值的函数`t`，并且让 t 的第一个和最后一个值保持不变，则可以编写以下代码：

```
let pp_all_t fmt =
    let rec loop v =
        pp_t fmt v;
        if v < Last_t then loop (incr_t v)
     in
         loop First_t 
```

在 OCaml中不能有一个通用的多态`incr_t`，因为它只对构造函数为空值（不取值）的类型有意义。`incr_t`但是你可以为任何给定的类型编写自己的。

这种事情在 Haskell 中处理得非常好。基本上，当定义非常明显时，编译器会为您编写一些函数。OCaml 有一个类似的项目，称为[deriving](http://code.google.com/p/deriving/)。我从未使用过它，但它似乎确实可以处理枚举值的问题。

既然你说你想要一个“技巧”，如果你不介意使用 OCaml 的不安全部分（我个人*确实*介意），你可以这样写`incr_t`：

```
let incr_t (v: t) : t =
    (* Please don't use this trick in real code :-) !  See discussion below.
     *)
    if t < Last_t then
        Obj.magic (Obj.magic v + 1)
    else
        failwith "incr_t: argument out of range" 
```

如果可能的话，我会尽量避免这种代码，这太危险了。例如，如果类型`t`获得了接受值的构造函数，它将产生无意义的值。真的是“等待发生的事故”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:51:56.857

人们需要某种形式的元编程来完成此类任务。例如，您可以探索从[Jeffrey](http://code.google.com/p/deriving/)`incr_t`的答案中生成。

这是类似任务的示例代码：[https ://stackoverflow.com/a/1781918/118799](https://stackoverflow.com/a/1781918/118799)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:24:31.617

您可以做的最简单的事情是定义所有构造函数的列表：

```
let constructors_t = [A; B; ...]

let pp_all_t = List.iter pp_t constructors_t 
```

这是一个单行，简单的做法。诚然，它有点多余（灰色或黑暗魔法可以避免），但就“做我想做的事”/“有痛苦的副作用”比率而言，它仍然可能是最好的方法。

# ajax - View Scoped bean 复制中注入的 Session Scoped Bean

> ID：12513374
> 
> 赞同：2
> 
> 时间：2012-09-20T13:12:21.230
> 
> 标签：ajax, jsf, session, jsf-2, view-scope

我有一个`ViewScoped`bean，在这个 bean 中我正在注入一个`SessionScoped`bean。在这方面可以找到很多信息，并且非常简单。

**会话 bean**

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.HashMap;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class Following implements Serializable {
    private HashMap<Integer, ArrayList<String>> followingThese;

    //Constructors and getters+setters
    ...
} 
```

**看豆**

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.ResourceBundle;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.ViewScoped;
import javax.faces.component.UICommand;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;

@ManagedBean
@ViewScoped
public class DisplayResults implements Serializable {

    // Following Bean
    @ManagedProperty(value = "#{following}")
    private Following followingBean;

    // other information...
    ...

    //*and this is how this injected bean is used*
    public void startStopFollowing(int id, name) {
         followingBean.startStopFollowing(id, name);  //adds this id to followingThese
    }
} 
```

**小面**

```
...
<h:outputText value="#{displayResults.followingBean.followingThese}" id="test"/>
<h:outputText value="#{following.followingThese}" id="test2"/>

...

<h:selectBooleanCheckbox value="#{results.followed}" immediate="true" 
    valueChangeListener="#{displayResults.startStopFollowing(displayResults.id, displayResults.name)}">
     <f:ajax render=":test :test2"/>
</h:selectBooleanCheckbox> 
```

这里有趣的是，`test`通过单击复选框会更新，但`test2`不会。会话范围的变量永远不会更新。刷新页面时，我丢失了所有信息`#{displayResults.followingBean.followingThese}`

***编辑***：会话变量不会在 ajax 调用中更新，只有“注入的会话变量”

如果我更改`javax.faces.STATE_SAVING_METHOD`为`server`上面的代码有效，但是当 on 时`client`，什么都没有。我丢失了通过`ViewScoped`bean 保存的所有“会话”信息。

***编辑*** 忘了提。在 Glassfish 3.1.2.2 上使用 JSF (Majorra) 2.1.6（刚刚更新了所有内容，希望这可以解决问题）。

***编辑#2*** 使用上面的代码添加了完整的导入列表。

***添加的信息***`RequestScoped`在这里和那里尝试了一些东西之后，如果我将接收 bean 设置为OR ，我正在寻找的功能没有问题`SessionScoped`。设置为 时不起作用`ViewScoped`。这一切都很好而且很花哨，但是我需要视图范围内的其他功能，将我的 bean 设置为会话范围是没有意义的。

任何帮助表示赞赏。

### 编辑 3

这已被记录为[JIRA上的错误](http://java.net/jira/browse/JAVASERVERFACES-1950?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

# ipad - 适用于 CentOS 的 iPad 应用程序的无线分发

> ID：12513379
> 
> 赞同：0
> 
> 时间：2012-09-20T13:12:32.307
> 
> 标签：ipad, centos, plist, wireless, centos6

我正在尝试使用 CentOS 6 服务器通过 IP 地址无线分发 iPad 应用程序。我已经在 GoDaddy 网络托管帐户上完成了此操作，并且效果很好。我在那里有 plist 和 ipa 文件，我链接到 plist 是这样的：

```
itms-services://?action=download-manifest&amp;url=http://(ipAddress)/apps/theapp.plist 
```

但是，当我单击链接时，绝对没有任何反应。我已经将 ipa 和 plist 的 MIME 列表添加到 mime.type 文件中，然后重新启动服务器。

```
application/octet-stream ipa

text/xml plist 
```

依然没有。到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:45:52.137

对于企业/内部分发，必须使用与存档/分发过程中使用的相同配置文件对发布版本进行签名

# android - Android ABS 显示大的 ProgressBar

> ID：12513381
> 
> 赞同：0
> 
> 时间：2012-09-20T13:12:42.837
> 
> 标签：android, actionbarsherlock

我`setSupportProgressBarIndeterminateVisibility(true);`在我的活动中使用来显示 Indertiminate ProgressBar。这在 ActionBar 中显示了一个大的 ProgressBar。我想用一个小的进度条。我怎样才能做到这一点 ？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:25:42.683

您需要创建一个样式才能获得一个小的进度条。

请参阅此链接，其中说明了如何更改 ActionBarSherlock 中的默认不确定进度大小

> [http://thanksmister.com/2012/03/30/change-default-progress-actionbarsherlock/](http://thanksmister.com/2012/03/30/change-default-progress-actionbarsherlock/)

# sql - 计算一行表中空列的数量

> ID：12513385
> 
> 赞同：1
> 
> 时间：2012-09-20T13:13:03.680
> 
> 标签：sql, sql-server, sql-server-2008, null

> **可能重复：**
> [如何在 SQL 中计算一条记录中具有空值的所有字段？](https://stackoverflow.com/questions/9079037/how-to-count-in-sql-all-fields-with-null-values-in-one-record)

我有五列的表：

```
姓名 DOB 电子邮件 电话 职位
abc null a@c.com null null
英国广播公司 null null null null

```

如何编写查询以便可以找到一行中的空列数？

（例如，第 1 行有 3 个空值，第 2 行有 4 个空值。）

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:15:45.877

天真的方式：

```
SELECT CASE WHEN Name IS NULL THEN 1 ELSE 0 END +
    CASE WHEN DOB IS NULL THEN 1 ELSE 0 END +       
    CASE WHEN Email IS NULL THEN 1 ELSE 0 END +       
    CASE WHEN phone IS NULL THEN 1 ELSE 0 END +       
    CASE WHEN jobtitle IS NULL THEN 1 ELSE 0 END 
```

但我不想写其中的 76 个。那么动态方式怎么样（未经测试，但沿着这些思路）：

```
DECLARE @SQL NVARCHAR(4000);    
SET @SQL = 'SELECT theTable.ID, ' + 
    STUFF((SELECT '+ CASE WHEN ' + QUOTENAME(COLUMN_NAME) + 
        ' IS NULL THEN 1 ELSE 0 END' 
        FROM INFORMATION_SCHEMA.COLUMNS 
        WHERE TABLE_NAME = 'theTable' FOR XML PATH('')) , 1 , 1 , '') 
    + ' FROM theTable';    
EXEC(@SQL); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-20T13:23:52.170

I think the only way is to specify each of your columns

```
select sum(case when item1 is null then 1 else 0 end
          +case when item2 is null then 1 else 0 end
          +case when item3 is null then 1 else 0 end
          +case when item4 is null then 1 else 0 end
          +case when item5 is null then 1 else 0 end
          +case when item6 is null then 1 else 0 end
          ) as grandtotalnulls
  from yourtable 
```

# php - 是否可以用 PHP 编写电子邮件解析器？

> ID：12513390
> 
> 赞同：4
> 
> 时间：2012-09-20T13:13:20.653
> 
> 标签：php, codeigniter, email

我的 PHP 技能是中级的，但我想尝试实现这一点：

我有一个本地爵士音乐家的网站。我希望他们能够将即将举行的演出添加到他们的个人资料页面。我希望他们能够通过电子邮件发送这些更新，就像我可以将任务添加到我的在线待办事项列表中一样。

所以我需要在服务器上解析我帐户中的电子邮件。

我认为执行标准格式是公平的。.我在想

```
(In subject)NEWGIG   [[or maybe set up a separate "newgig@mySite.com" email account for gig updates only]]

TITLE>My next super gig<TITLE
DATE>03/10/2012<DATE
DESC>Here is some supplementary information<DESC
LINK>www.hereIsTheVenue.com<LINK 
```

将添加演出并发送确认电子邮件。

这有多难做到？可能吗？我想我可以完成所有的测试解析和 SQL 等。但我对邮件没有太多经验，而且似乎有很多“繁琐的位”需要注意。

任何人都可以在我开始之前确认这是可行的吗？有什么提示或注意事项吗？

顺便说一句 - 我正在做电子邮件解析器，因为我希望它超级好用。音乐家是出了名的懒惰，所以如果我可以让他们直接从他们的电子邮件中发布一个演出（他们通常会得到确认），那么他们就可以省去访问网站、登录、访问他们的帐户等的麻烦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T13:21:32.110

是的，这是可行的。您所需要的只是访问具有 smtp 端点的服务器。诸如 postfix 或 exim 之类的东西或任何其他收听传入电子邮件的东西。您需要配置此软件以将传入邮件作为纯文本传递到您的脚本或程序中，该脚本或程序可以处理来自`stdin`.

最简单的方法是创建一个指向脚本的新电子邮件别名。我的`/etc/aliases`文件中有很多条目，如下所示：

```
userpart: "|/usr/bin/php -f /path/to/some/script.php" 
```

每当电子邮件到达此地址时都会触发此操作：`userpart@this.server.example`

脚本本身像这样读取输入

```
$fp = fopen('php://stdin','r');
    while (!feof($fp)) {
            $input .= fgets($fp);
    }
fclose($fp); 
```

您可能会发现使用现有的 MIME 解析器很有用，因为输入可以是现代 MUA 可以想到的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:20:04.893

解析电子邮件就像解析任何类型的数据一样。您只需为电子邮件定义一个通用格式。

编写解析器后，创建一个脚本，使用 php imap 函数定期连接到邮件服务，读取邮件，解析它们并将它们插入到数据库中。

但是创建一个 Web 表单会更简单、更快捷，他们将在其中添加所有的演出数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:11:05.540

您可以使用正则表达式来执行此操作。但是您需要对格式进行一些改进。

确保您的格式不包含用户可以输入的字符并破坏您的格式。如果您想让您的用户/客户端使用 XML 格式变得非常简单。用户将更容易对其进行编辑。

这是前任：（我创建了如何获取**TITLE**并修改了**开始和结束标记**）现在它使用***双花括号***。

```
$str= '
(In subject)NEWGIG   [[or maybe set up a separate "newgig@mySite.com" email account for gig 
updates only]]
{{TITLE}}My next super gig{{TITLE}}
DATE>03/10/2012<DATE
DESC>Here is some supplementary information<DESC
LINK>www.hereIsTheVenue.com<LINK';
preg_match('#{{TITLE}}(?P<title>.+){{TITLE}}#', $str, $matches);
echo $matches['title']; 
```

XML 格式（您可以使用[simplexml_load_string 函数](http://php.net/manual/en/function.simplexml-load-string.php)解析 XML 格式）：

```
<document>
<TITLE>My next super gig</TITLE>
<DATE>03/10/2012</DATE>
<DESC>Here is some supplementary information</DESC>
<LINK>www.hereIsTheVenue.com</LINK>
</document> 
```

# php - 无法使用 javascript loadXMLString() 解析 xml

> ID：12513392
> 
> 赞同：0
> 
> 时间：2012-09-20T13:13:25.083
> 
> 标签：php, javascript, xml, parsing, domparser

我正在尝试从 Web 服务解析 xml 文件。我正在使用 javascript loadXMLString 函数将 xml 解析为 html。如果我将 xml 代码插入到变量中，则使用本地文件可以正常工作。但是为了从外部链接获取 xml，我在这里使用了 php 函数，如下所示：

```
<?php 

$request = "http://www.somewebsite.com/feeds/get-cities.php?vendor_key=xxx";
$response = file_get_contents($request);
$xmlstring =  htmlspecialchars($response, ENT_QUOTES);
?>
<script language="javascript">
function loadXMLString(txt)  
{
if (window.DOMParser)
{
  parser=new DOMParser();
  xmlDoc=parser.parseFromString(txt,"text/xml");
}
else // Internet Explorer
{
  xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
  xmlDoc.async=false;
  xmlDoc.loadXML(txt); 
}
return xmlDoc;
}//function loadXMLString ends

text = <?php $xmlstring;?>

xmlDoc=loadXMLString(text);

document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("city");
for (i=0;i<x.length;i++)
{ 
  document.write("<tr style='background:#dddddd;'><td>");
  document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  document.write(x[i].getElementsByTagName("country")[0].childNodes[0].nodeValue);
  document.write("</td></tr>");
}
document.write("</table>");
</script> 
```

在上面的代码中，我试图将 xml 代码从 php 变量 $xmlstring 插入到 javascript 变量文本中。但它什么也没显示。但是如果我将 xml 代码放在下面的脚本中，它就可以完美地工作：

```
text="<cities>"
text=text+"<city>";
text=text+"<name>bulga</name>";
text=text+"<country>Giada De Laurentiis</country>";
text=text+"<city_id>2005</city_id>";
text=text+"</city>";
text=text+"</cities>"; 
```

有没有人知道我该如何解析它。或者如果有人有更好的解决方案，请也建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:17:57.967

尝试更改代码中的以下行

```
text = <?php echo $xmlstring;?> 
```

它应该回显您的变量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:16:42.403

在 GBD 的帮助下，我编写了以下代码并开始显示城市列表。但是当我尝试使用不同的 xml 代码时它不起作用。可能有人对此有更好的解决方案

```
<?php 
function curl_get_file_contents($URL) 
{ 
$c = curl_init(); 
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($c, CURLOPT_URL, $URL); 
$contents = curl_exec($c); 
curl_close($c); 

if ($contents) return $contents; 
else return FALSE; 
} 

$xmlString = curl_get_file_contents("http://www.somesite.com/feeds/get-cities.php?vendor_key=xxx");

?>

<script language="javascript">
function loadXMLString(text) 
{ 
if (window.DOMParser) 
{ 
parser=new DOMParser(); 
xmlDoc=parser.parseFromString(text,"text/xml"); 
} 
else // Internet Explorer 
{ 
xmlDoc=new ActiveXObject("Microsoft.XMLDOM"); 
xmlDoc.async=false; 
xmlDoc.loadXML(text);  
} 
return xmlDoc; 
}

var text = "<?php echo substr_replace($xmlString,"",0,39);?>";

xmlDoc=loadXMLString(text);

document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("city");
for (i=0;i<x.length;i++)
{ 
document.write("<tr style='background:#dddddd;'><td>");
document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue);
document.write("</td><td>");
document.write(x[i].getElementsByTagName("country")[0].childNodes[0].nodeValue);
document.write("</td></tr>");
}
document.write("</table>");
</script> 
```

# php - PHP Apache mod_rewrite

> ID：12513395
> 
> 赞同：0
> 
> 时间：2012-09-20T13:13:32.243
> 
> 标签：php, apache, mod-rewrite, wamp

这是基本信息：我在 Windows 8 64 位上使用 WAMP。Apache 2.4.2，PHP 5.4+。

我的项目文件位于`http://localhost/test/`. 此`.htaccess`文件夹中的文件是：

```
RewriteEngine on

#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?$1 [L,QSA] 
```

如果我输入一个类似的 URL `http://localhost/test/some/cool/stuff/`，它可以正常工作

即在 PHP 中：`$_SERVER['QUERY_STRING'] = index.php&some/cool/stuff/`
我希望它也能去掉，`index.php&`但我在 PHP 中这样做。

而如果我输入一个像`http://localhost/test/some/cool/stuff` PHP`$_SERVER['QUERY_STRING']`返回的 URL`index.php&some/cool/stuff/&some/cool/stuff`

这`&some/cool/stuff/`部分是从哪里来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:16:28.087

我使用`RewriteRule ^(.+)$ index.php [L]` 然后通过`$_SERVER['REQUEST_URI']`

我使用 PHP 的这个函数来获取带有后备的请求 URL。

```
private static function get_request_URL() {
    if (isset($_SERVER["REDIRECT_URL"])) {
        $realURL = $_SERVER["REDIRECT_URL"];
    } elseif (isset($_SERVER["REQUEST_URI"])) {
        list($realURL) = explode("?", $_SERVER["REQUEST_URI"]);
    } else {
        return null;
    }
    $realURL = rtrim(trim(strtolower($realURL)), "/");
    if ($realURL == "") {
        $realURL = "/";
    }
    return $realURL;
} 
```

# python - Python 正则表达式 - 解析 HTML

> ID：12513401
> 
> 赞同：0
> 
> 时间：2012-09-20T13:13:51.793
> 
> 标签：python, html, regex

我有这个小代码，它给了我AttributeError：'NoneType'对象没有属性'group'。

```
import sys
import re

#def extract_names(filename):

f = open('name.html', 'r')
text = f.read()

match = re.search (r'<hgroup><h1>(\w+)</h1>', text)
second = re.search (r'<li class="hover">Employees: <b>(\d+,\d+)</b></li>', text)  

outf = open('details.txt', 'a')
outf.write(match)
outf.close() 
```

我的意图是读取一个 .HTML 文件以查找`<h1>`标签值和员工人数并将它们附加到文件中。但由于某种原因，我似乎无法正确处理。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:15:09.007

您正在使用正则表达式，但是将 XML 与此类表达式匹配变得太复杂、太快。不要那样做。

改用 HTML 解析器，Python 有几个可供选择：

*   [ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)是标准库的一部分
*   [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)是一个流行的第三方库
*   [lxml](http://lxml.de/)是一个快速且功能丰富的基于 C 的库。

后两者也非常优雅地处理格式错误的 HTML，对许多拙劣的网站有很好的理解。

元素树示例：

```
from xml.etree import ElementTree

tree = ElementTree.parse('filename.html')
for elem in tree.findall('h1'):
    print ElementTree.tostring(elem) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:35:34.713

只是为了完成：您的错误消息只是表明您的正则表达式失败并且没有返回任何内容......

# python - Python：正则表达式与 find()、strip()

> ID：12513403
> 
> 赞同：1
> 
> 时间：2012-09-20T13:13:57.360
> 
> 标签：python, regex, string

我正在学习 Python，需要格式化从 IMAP 收到的“发件人”字段。我尝试使用`str.find()`and `str.strip()`，也使用正则表达式。使用 find() 等，我的函数运行速度比使用 re 快很多（我计时了）。那么，什么时候*使用*re 更好呢？有没有人有任何与此相关的好链接/文章？Python文档显然没有提到...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T13:16:53.330

`find`只匹配一个精确的字符序列，而正则表达式匹配一个模式。自然，只寻找精确序列会更快（即使您的正则表达式模式也是精确序列，仍然存在一些开销）。

由于上述原因，`find`如果您知道确切的顺序，则应该使用，如果不知道，则应该使用正则表达式（或其他东西）。您应该使用的确切方法实际上取决于您所面临问题的复杂性。

附带说明一下，python`re`模块提供了一种`compile`方法，如果您要重复使用它，则允许您预编译正则表达式。如果您多次使用相同的模式，这可以大大提高速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:17:16.143

如果你打算做一些复杂的事情，你应该使用`re`. 它比使用字符串方法更具可扩展性。

字符串方法很适合做一些简单的事情，不值得为正则表达式烦恼。

所以，这取决于你在做什么，但通常你应该使用正则表达式，因为它们更强大。

# c# - 将 XML 字符串作为参数传递给 Process.Start

> ID：12513405
> 
> 赞同：1
> 
> 时间：2012-09-20T13:14:02.977
> 
> 标签：c#, cmd, process.start

我试图在调用 Process.Start 时使用包含 XML 作为参数的字符串，但是只有第一个空格之前的字符才能通过。例如，如果 Input.xml 包含以下文本`<?xml version="1.0" encoding="utf-8" ?>`，我调用的所有应用程序接收到的是`"<?xml"`.

这是将其放入上下文的代码示例：

```
 XmlDocument xml = new XmlDocument();
        xml.Load("C:/Input.xml");
        Process proc = Process.Start("C:/Program.exe", xml.OuterXml); 
```

有没有办法解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:20:46.237

```
Process proc = Process.Start("C:/Program.exe", String.Concat("\"", xml.OuterXml,"\""); 
```

即将参数用引号括起来。

与命令行中的 xml 参数无关，由空格分隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:22:53.497

尝试将 XML 数据作为命令行参数传递基本上是一个问题的根源。您会在各处遇到转义问题，并且可能还会遇到命令行长度限制。

从标准输入或文件名读取。在这一点上，这很容易——文件通常比向标准输入提供数据更简单，但两者都是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:20:05.237

传递参数时，应用标准规则，当字符串包含空格时，它被分成多个参数。

你可以试试：

```
 Process proc = Process.Start("C:/Program.exe", "\"" + xml.OuterXml + "\""); 
```

但随后您的 xml 也包含`"`字符，并且它再次中断。你可以做点什么，但是……这不值得。只需将文件名作为参数传递并在程序中加载 xml（如果可以修改）。

# search - SOLR：通过过滤器添加逻辑运算符

> ID：12513406
> 
> 赞同：0
> 
> 时间：2012-09-20T13:14:07.447
> 
> 标签：search, solr

嗨，我不知道如何表达这个问题，所以我会尝试举个例子。

假设我的搜索词是：`PHP/MYSQL`

我在索引中有 6 个文档，其中“原始”内容为：

```
1: PHP MYSQL
2: PHP/MYSQL
3: PHP
4: MYSQL
5: PHP some stuff here and then MYSQL
6: weirdos may enter stuff like PHPMYSQL 
```

我希望这个查询搜索的是`"PHP MYSQL" OR (PHP AND MYSQL)`给我带来文档 1,2（斜杠在索引时间被剥离）、5 和 6

我已经尝试了具有各种不同选项的 solr.WordDelimiterFilterFactory，我什至尝试在查询分析器上手动执行它：

```
<filter class="solr.PatternReplaceFilterFactory"
                pattern="(\S+)[\.\\;,\/:!\?]+(\S+)"
                replacement="$1$2 || $1 &amp;&amp; $2"
                replace="all"
                /> 
```

我无法让 solr 识别我的“&&”或“||” 在这个阶段。

任何人都可以建议组合过滤器来实现这种行为吗？

SOLR 版本是 3.5

# c# - ASP.Net MVC 路由空默认参数

> ID：12513412
> 
> 赞同：1
> 
> 时间：2012-09-20T13:14:55.537
> 
> 标签：c#, .net, asp.net-mvc-3, asp.net-mvc-routing

**概括：**

我正在审查我最近开始工作的站点的路线图。我遇到了一条我不熟悉的路线：

`RouteTable.Routes.MapRoute(NamedRoutes.ROUTE_NAME, "urlSegment1/urlSegment2", new { });`

请注意，MapRoute 的“默认”参数是一个空对象。这通常是我指定控制器、操作和任何参数的地方。我一直在谷歌搜索，发现我没有提出正确的问题来产生我正在寻找的答案。

**问题：**

当 MapRoute 的“defaults”参数为空对象时，MVC 路由如何表现？一个答案会很棒。支持文档会更好。

**编辑：**

实际使用的路线是：

```
routes.MapRoute(NamedRoutes.BROWSE_MEN, "browse/Mens", new { } }); 
```

使用以下方法生成 URL 时会出现问题：

```
Html.BeginForm("Add", "Signup", FormMethod.Post, new { id = "signup", enctype = "multipart/form-data" }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:45:55.413

它们被映射为stings，在这种情况下匹配所有内容。仅当 url 未提供控制器/操作参数之一时，默认值才存在。在这种情况下，没有任何默认值是没有意义的。它实际上正在捕获所有字符串/字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:16:20.517

当您不指定控制器时，无论是作为 URL 参数（令牌）还是默认值，您都应该得到一个 InvalidOperationException：

> 匹配的路由不包含必需的“控制器”路由值。

动作也一样。那是针对传入的请求。对于 URL 生成，不需要控制器或操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:50:02.393

您拥有的路线将匹配一个请求，该请求恰好包含 url ex 中的两个段。`http://localhost/urlSegment1/urlSegment2`并返回 404。我猜您定义了此路由以避免以下路由处理此请求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T13:19:27.823

您不必指定默认值。

所以它就像没有指定默认对象一样工作

# multithreading - Cassandra API JMX 服务器线程

> ID：12513414
> 
> 赞同：0
> 
> 时间：2012-09-20T13:15:06.423
> 
> 标签：multithreading, service, cassandra, jmx

在 cassandra api 中，哪个类启动 JMX Server 线程......？

是 StandardMBean 还是 StorageService...？

cassandra wrapper.exe 的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:04:29.287

JVM 自动启动 JMX 服务，Cassandra 只是为不同的服务注册 MBean，这会自动导致它们通过 JMX 公开。

# python - Python：用海龟制作背景图像

> ID：12513415
> 
> 赞同：0
> 
> 时间：2012-09-20T13:15:06.637
> 
> 标签：python, background-image, turtle-graphics

我正在尝试在我的海龟世界中插入一个 .gif 文件作为背景图像，以便单独的海龟继续旅行，但我无法让它工作。我是 python 新手，任何帮助都会很棒。

这是当前代码：

```
from turtle import * 
from Tkinter import *

def test():
    turtle.bgpic("warehouse1.gif")
    fd(100)
    goto(50, 100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:26:56.930

`from turtle import *`使模块中的所有名称都可用，因此您可以在这种情况下`turtle`使用 bare ：`bgpic()`

```
#!/usr/bin/env python
from turtle import *

def test():
    speed(1) # set the slowest speed to see the turtle movements
    bgpic('warehouse1.gif')
    fd(100)
    goto(50, 100)
    mainloop()

test() 
```

注意：通常*不应*`*`在 Python 交互式 shell 之外使用通配符导入 ( )。请参阅[Python 中的成语和反成语](https://docs.python.org/2/howto/doanddont.html#from-module-import)。

# jquery - 我怎样才能让我的消息 当我发布消息时，元素与 jQuery 一起出现？

> ID：12513420
> 
> 赞同：0
> 
> 时间：2012-09-20T13:15:11.807
> 
> 标签：jquery

我有以下 HTML：

```
<ul class="message" 
    style="border-width: 1px 0 0 0;
           border-top-left-radius: 0;
           border-top-right-radius: 0;">
</ul> 
```

以及设置 $message 的这段代码：

```
oLink.$message = oLink.$modal.find('.message'); 
```

我有以下添加消息的javascript：

```
obj.$message.html("<li>Contacting Server, please wait ...</li>"); 
```

这可行，但问题是，当没有消息时，我的 ul 仍然使用一些属性设置样式，这些属性赋予它一个高度并使其显示为屏幕底部的一个区域。有什么方法可以让消息不可见，然后显示出来。我不太擅长 jQuery，但我可以在创建新消息时链接显示或隐藏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:18:11.003

`ul`仅使用 css（和现代浏览器），您可以使用`:empty`伪类设置空样式

```
ul:empty {
   display: none;
} 
```

小提琴示例：http: [//jsbin.com/ipeciw/1/edit](http://jsbin.com/ipeciw/1/edit)

`ul`或者只是通过 jQuery 以编程方式删除/隐藏空

```
$('ul:empty').remove(); // or hide() if you need it later 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:17:56.120

这都是css相关的。你说的高度可能是默认的边距或填充。

你最初可以隐藏它

```
ul.message { display:none; } 
```

然后当你编写 html 时，像这样显示它。

```
obj.$message..show().html("<li>Contacting Server, please wait ...</li>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:18:55.373

有 jQuery 的 show 和 hide 方法。如果消息仍然没有改变，您可以将其插入 ul 中，然后像这样显示/隐藏它：

```
$('.message').show();
$('.message').hide(); 
```

查看更多信息： http : [//api.jquery.com/show/ http://api.jquery.com/hide/](http://api.jquery.com/show/)

# java - Android：无法从 View 类型中对非静态方法 getResources() 进行静态引用

> ID：12513422
> 
> 赞同：1
> 
> 时间：2012-09-20T13:15:22.150
> 
> 标签：java, android, static

我的简单应用程序有问题。我不想粘贴大量代码。我有一堂课`Zaladuj`，我必须使用`getResources()`.

```
loading_screen = BitmapFactory.decodeResource(Widok.getResources(),R.drawable.loading_screen); 
```

在这一行我有错误：

> 无法从类型 View 对非静态方法 getResources() 进行静态引用。

我把所有的类代码放在这里：[http](http://www.pcyra.pl/badpanda)
://www.pcyra.pl/badpanda 这不是一个网站，它只是我的项目的文件夹。我在 MainActivity 中创建了 View 的实例，错误显示在`Zaladuj`第 50 行的类中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:22:20.880

[getResources()](http://developer.android.com/reference/android/view/View.html#getResources%28%29)不是静态方法。您需要一个`View`（或`Widok`在您的情况下）的实例来调用它。您最好的选择是向您的`Zaladuj`类添加一个参数，该参数接受`Context`然后使用`getResources()`：

```
private Context context;
public Zaladuj(Context con)
{
    super()
    this.context = con
}

private void downloadResources() 
{
    //
      loading_screen = BitmapFactory.decodeResource(this.context.getResources(),R.drawable.loading_screen);
    //
    int count = 10;
    for (int i = 0; i < count; i++) 
    {
        try { Thread.sleep(1000); } catch (InterruptedException ignore) {}
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:21:41.680

由于`getResources()`方法 is not `static`，您将需要创建`Widok`类的实例才能调用它，例如：

```
Widok widok = new Widok(context);
BitmapFactory.decodeResource(widok.getResources(),R.drawable.loading_screen); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:22:49.307

错误清楚地告诉你出了什么问题。你不能用 Widok 来调用它。

如果您在活动课上，请致电

```
BitmapFactory.decodeResource(getResources(),R.drawable.loading_screen); 
```

如果您在非活动课程中，那么您将需要活动上下文。

就像你在 AsyncTask 中，那么你会写这样的东西

```
BitmapFactory.decodeResource(context.getResources(),R.drawable.loading_screen); 
```

只要确保在构造函数中传递正确的活动上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:28:37.010

您收到该错误的原因是“无法从 View 类型中对非静态方法 getResources() 进行静态引用。” 是因为 getResources() 方法不是静态方法。换句话说，你需要实例化一个新的 Widok

```
Widok w = new Widok(context); 
```

asnd 然后调用该对象上的资源

```
w.getResource(); 
```

**编辑

这是您放入活动类的代码。您将关键字“this”传递给引用应用程序上下文的 Widok 的构造函数

```
Widok w = new Widok(this);
loading_screen = BitmapFactory.decodeResource(w.getResources(),R.drawable.loading_screen); 
```

# r - R中的鬼因子水平

> ID：12513424
> 
> 赞同：11
> 
> 时间：2012-09-20T13:15:30.013
> 
> 标签：r, subset, r-factor

> **可能重复：**
> [在 R 中的子集数据框中删除因子级别](https://stackoverflow.com/questions/1195826/dropping-factor-levels-in-a-subsetted-data-frame-in-r)

我已经用某个因子水平对观察进行了子集化。在检查这是否已经完成时`summary()`，仍然列出了级别，但观察值为零。他们不应该在子集期间消失吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T13:19:00.777

子集不会删除空级别。为什么会这样是因为它是一个特性。将其视为您的因素水平决定了**事物**的可能/潜在类别。如果你只取这些东西的一个子集，那么可能的**东西**类别不会改变，你的子集只是不包含它们中的任何一个。

如果要删除这些空级别，请参阅`?droplevels`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T13:20:27.133

要使额外的级别消失，请`drop=TRUE`在子集时使用：

```
newfactor <- oldfactor[indices, drop=TRUE] 
```

顺便说一句，这不是默认设置的一个原因是无法比较不同级别的因素。因此，如果您想将因子与原始向量或向量的不同子集进行比较，则需要保留额外的水平。

# c++ - 删除指向堆栈对象的指针时会发生什么？

> ID：12513426
> 
> 赞同：3
> 
> 时间：2012-09-20T13:15:32.570
> 
> 标签：c++, object, stack, heap-memory, delete-operator

> **可能重复：**
> [C++ 在堆栈上分配的变量上调用 delete](https://stackoverflow.com/questions/441831/c-calling-delete-on-variable-allocated-on-the-stack)

```
int i = 10;
int* iP = &i;
delete iP; 
```

执行此代码时究竟会发生什么？我根本没有收到任何运行时错误或编译器警告，指针在对其调用 delete 之前和之后仍然保持相同的地址，但是在 delete 尝试取消引用甚至将其强制转换为**有时**`int`会使程序崩溃但其他时候它只是工作，哪种闻起来像未定义的行为。

# android - Android，通过使用 SimpleCursorAdapter.ViewBinder 将 URL 解析为参数来检索缩略图

> ID：12513432
> 
> 赞同：1
> 
> 时间：2012-09-20T13:15:45.497
> 
> 标签：android, url, listview, thumbnails, simplecursoradapter

我知道标题有点乱，但问题出在这里……我的目标是检索标题，并使用缩略图 URL 将我的 youtube 频道视频的缩略图绘制到 listView……到目前为止，我有textView 可以正确显示视频标题，但无论如何都无法绘制缩略图.....顺便说一下，我已经正确完成了 json / sqlite 东西类，它们可以正确检索数据，所以我不必担心。 ..唯一困扰我的是缩略图不会显示，imageView在应用程序中显示为空白空间......

这是我的代码，请帮帮我。谢谢

这是活动的创建方法...

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String[] uiBindFrom = { TutListDatabase.COL_TITLE, TutListDatabase.COL_THUMBNAIL };
    int[] uiBindTo = { R.id.title, R.id.thumbnail };

    getLoaderManager().initLoader(TUTORIAL_LIST_LOADER, null, this);

    adapter = new SimpleCursorAdapter(
            getActivity().getApplicationContext(), R.layout.list_item,
            null, uiBindFrom, uiBindTo,
            CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    adapter.setViewBinder(new MyViewBinder());
    setListAdapter(adapter);
} 
```

而这个是把东西放到listView上的私有类...

```
private class MyViewBinder implements SimpleCursorAdapter.ViewBinder{

    @Override
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
        int viewId = view.getId();
        switch(viewId){
        case R.id.title:
            TextView titleTV = (TextView)view;
            titleTV.setText(cursor.getString(columnIndex));
            break;

                    // it is not displaying any thumbnail in app....
        case R.id.thumbnail:
            ImageView thumb = (ImageView) view;
            thumb.setImageURI(Uri.parse(cursor.getString(columnIndex)));

        break;
        }
        return false;
    }

} 
```

这是xml布局文件...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center_vertical"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/thumbnail"
    android:layout_width="101dp"
    android:layout_height="101dp"
    android:src="@drawable/icon" />

<TextView
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="6dp"
    android:textSize="24dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:40:11.483

我可以向您展示我使用过的一种方法，并且效果很好，首先我们需要一种缓存图像的方法，而我迄今为止看到的最好的方法是使用 LruCache，如出色的 Google IO 演示文稿中所述事半功倍：[http ://www.youtube.com/watch?v=gbQb1PVjfqM](http://www.youtube.com/watch?v=gbQb1PVjfqM)

这是我对该演示文稿中描述的方法的实现。

```
public class BitmapCache extends LruCache<String, Bitmap> { 

    public BitmapCache(int sizeInBytes) {
        super(sizeInBytes);
    }   

    public BitmapCache(Context context) {
        super(getOptimalCacheSizeInBytes(context));
    }   

    public static int getOptimalCacheSizeInBytes(Context context) {
        ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);

        int memoryClassBytes = am.getMemoryClass() * 1024 * 1024;

        return memoryClassBytes / 8;
    }

    @Override
    protected int sizeOf(String key, Bitmap value) {
        return value.getRowBytes() * value.getHeight();
    }
} 
```

接下来我们需要使用 AsyncTask 异步加载图像，以下实现负责将图像加载到给定的 ImageView 并处理缓存：

```
public class LoadImageAsyncTask extends AsyncTask<Void, Void, Pair<Bitmap, Exception>> {
    private ImageView mImageView;
    private String mUrl;
    private BitmapCache mCache;

    public LoadImageAsyncTask(BitmapCache cache, ImageView imageView, String url) {
        mCache = cache;
        mImageView = imageView;
        mUrl = url;

        mImageView.setTag(mUrl);
    }

    @Override
    protected void onPreExecute() {
        Bitmap bm = mCache.get(mUrl);

        if(bm != null) {
            cancel(false);

            mImageView.setImageBitmap(bm);
        }
    }

    @Override
    protected Pair<Bitmap, Exception> doInBackground(Void... arg0) {
        if(isCancelled()) {
            return null;
        }

        URL url;
        InputStream inStream = null;
        try {
            url = new URL(mUrl);
            URLConnection conn = url.openConnection();

            inStream = conn.getInputStream();

            Bitmap bitmap = BitmapFactory.decodeStream(inStream);

            return new Pair<Bitmap, Exception>(bitmap, null);

        } catch (Exception e) {
            return new Pair<Bitmap, Exception>(null, e);
        }
        finally {
            closeSilenty(inStream);
        }
    }

    @Override
    protected void onPostExecute(Pair<Bitmap, Exception> result) {
        if(result == null) {
            return;
        }

        if(result.first != null && mUrl.equals(mImageView.getTag())) {
            mCache.put(mUrl, result.first);
            mImageView.setImageBitmap(result.first);
        }
    }

    public void closeSilenty(Closeable closeable) {
        if(closeable != null) {
        try {
            closeable.close();
        } catch (Exception e) {
            // TODO: Log this
        }
        }
    }
} 
```

接下来，您需要在托管 ListView 的 Activity 或 Fragment 中的 onCreate(...) 或 onActivityCreated(...) 中创建 BitmapCache 的实例：

```
mBitmapCache = new BitmapCache(this); // or getActivity() if your using a Fragment 
```

现在我们需要更新显示图像的 SimpleCursorAdapter，我已经省略了大部分代码，因为它特定于我的项目，但想法是你覆盖 setViewImage，其中值应该是绑定到光标的值，我将imageview 为 null 以确保它没有来自与项目关联的缓存中的奇数图像。

```
 @Override
    public void setViewImage(ImageView iv, String value) {
        final String url = value;
        iv.setImageBitmap(null);
        new LoadImageAsyncTask(mBitmapCache, iv, url).execute();

    } 
```

*更新*

为了清楚起见，您的适配器应该看起来像这样

```
 adapter = new SimpleCursorAdapter(
            context, R.layout.list_item,
            null, uiBindFrom, uiBindTo,
            CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER) {
        @Override
        public void setViewImage(ImageView iv, String value) {
                final String url = value;
                iv.setImageBitmap(null);
                new LoadImageAsyncTask(mBitmapCache, iv, url).execute();
        }
    }; 
```

希望有帮助！

# java - 具有圆角保留阴影的 JTextField

> ID：12513436
> 
> 赞同：1
> 
> 时间：2012-09-20T13:15:52.133
> 
> 标签：java, swing, jtextfield, rounded-corners

我需要一个圆角文本字段，我在[这里](https://stackoverflow.com/questions/8515601/java-swing-rounded-border-for-jtextfield)找到了解决方案，问题是使用这个解决方案我失去了所有标准`JTextField`阴影。

有谁知道如何恢复它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:34:29.537

您不能简单地替换原始文本字段边框而不会丢失阴影。您必须使用自己的阴影效果应用一些特定的边框，甚至修改 UI 以便在场周围绘制阴影。

这是文本字段的类似阴影的 UI 的简单示例：

```
public static class RoundedFieldUI extends BasicTextFieldUI
{
    private int round = 5;
    private int shadeWidth = 2;
    private int textSpacing = 3;

    public void installUI ( JComponent c )
    {
        super.installUI ( c );

        c.setOpaque ( false );

        int s = shadeWidth + 1 + textSpacing;
        c.setBorder ( BorderFactory.createEmptyBorder ( s, s, s, s ) );
    }

    protected void paintSafely ( Graphics g )
    {
        Graphics2D g2d = ( Graphics2D ) g;
        g2d.setRenderingHint ( RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON );

        Shape border = getBorderShape ();

        Stroke os = g2d.getStroke ();
        g2d.setStroke ( new BasicStroke ( shadeWidth * 2 ) );
        g2d.setPaint ( Color.LIGHT_GRAY );
        g2d.draw ( border );
        g2d.setStroke ( os );

        g2d.setPaint ( Color.WHITE );
        g2d.fill ( border );

        g2d.setPaint ( Color.BLACK );
        g2d.draw ( border );

        super.paintSafely ( g );
    }

    private Shape getBorderShape ()
    {
        JTextComponent component = getComponent ();
        if ( round > 0 )
        {
            return new RoundRectangle2D.Double ( shadeWidth, shadeWidth,
                    component.getWidth () - shadeWidth * 2 - 1,
                    component.getHeight () - shadeWidth * 2 - 1, round * 2, round * 2 );
        }
        else
        {
            return new Rectangle2D.Double ( shadeWidth, shadeWidth,
                    component.getWidth () - shadeWidth * 2 - 1,
                    component.getHeight () - shadeWidth * 2 - 1 );
        }
    }

    public static void main ( String[] args )
    {
        JFrame frame = new JFrame ();

        JPanel panel = new JPanel ( new BorderLayout ( 5, 5 ) );
        panel.setBorder ( BorderFactory.createEmptyBorder ( 50, 50, 50, 50 ) );
        frame.add ( panel );

        panel.add ( new JLabel ( "Field:" ), BorderLayout.NORTH );

        JTextField field = new JTextField ( 20 );
        field.setUI ( new RoundedFieldUI () );
        panel.add ( field );

        frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
        frame.pack ();
        frame.setLocationRelativeTo ( null );
        frame.setVisible ( true );
    }
} 
```

# javascript - Date.parse() 在 IE 8 中不起作用

> ID：12513441
> 
> 赞同：3
> 
> 时间：2012-09-20T13:15:59.170
> 
> 标签：javascript, date

简单的功能在**Internet Explorer 8**`Date.parse()`中无法正常工作。 我用来验证格式的日期。 **`Date.parse()``"MM/DD/YYYY"`**

 ***   `_.isNaN(Date.parse("99/99/9999"))`返回`true`- 日期无效
*   `_.isNaN(Date.parse("01/01/1990"))`返回`false`- 日期有效

但是现在我在 IE 8 中尝试了我的 JavaScript，我很困惑。

*   `"88/88/8888"`- 这个日期一切正常 - 日期无效。
*   `"13/35/2012"`- 无效日期，但`Date.parse("13/35/2012")`仅在 IE 中解析此日期且不返回`NaN`。

[**jsFiddle 演示**](http://jsfiddle.net/QrRLA/5/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:20:34.487

标准 JavaScript 只接受 RFC 2822 日期，看起来不像。您必须编写自己的代码来分离日期部分，将它们转换为数字，并以`Date`这种方式创建实例。

Internet Explorer 还支持 ISO 日期 (2012-09-20 08:22)，它实际上会解析“MM/DD/YYYY”日期。它为您的“2012 年 13 月 35 日”日期执行此操作，就 JavaScript 而言，这是一个完全有效的日期：它是 2013 年 2 月 4 日。JavaScript“修复”虚假日期；一年中的第十三个月是次年的第一个月，当月的第 35 天（如果是 1 月，则为 31 天）是下个月的第四天。

基本上，您期望 Date 解析器的行为与实际行为不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:22:26.237

看[这里](https://stackoverflow.com/questions/3020508/ie-javascript-date-parsing-error)，[这里](https://stackoverflow.com/questions/3046459/ie-date-parse-method-returns-nan-for-date-with-time-string)和[这里](https://stackoverflow.com/questions/3310913/javascript-date-parse-help)。一般来说`Date.parse()`不是跨浏览器的解决方案。有很多可用的插件和库，只需 google 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:24:46.927

我使用我的方法进行日期验证

```
 var isValidDate = function(dateAsString)
   {
      var parsedDate = Date.parse(dateAsString);
      if (_.isNaN(parsedDate) || !_.isEqual(new Date(parsedDate).format("mm/dd/yyyy"), dateAsString))
      {
         return false
      }

      return true
   } 
```**

# xaml - 以 1024 x 768 分辨率设计

> ID：12513444
> 
> 赞同：1
> 
> 时间：2012-09-20T13:16:13.250
> 
> 标签：xaml, windows-8, microsoft-metro, visual-studio-2012, resolution

我有一个 Windows 8 应用程序。该应用程序由图像按钮组成，当我在具有“1024 x 768”分辨率的模拟器中运行它们时，它们会有点失真。

关键是，我无法专门针对该分辨率进行设计，因为我的视觉工作室不允许我以该分辨率进行设计。

查看图片将清楚我对问题的确切描述。

![解析度](../Images/68ec87dcee03222f1ce014ece20f0719.png)

我在下拉菜单中寻找 1024 x 768 的分辨率，但找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:00:16.393

AFAIR 1024*768 不是有效的物理尺寸。您应该在“侧面有其他东西”类别中找到它（“视图”右侧和“FullScreenLandscape”上方的第二个图标）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:31:31.193

查看图像的顶部。你看到视图选择器了吗？视觉状态是全屏。将其更改为填充视图（3/4 视图），您应该会看到 1024x768 视图。

有关 Metro 屏幕尺寸的进一步参考，请阅读：[Microsoft 的这篇博文。](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx)

10/13 编辑

我在我的应用程序的模拟器上看到了这个，即使不是在快照视图中： ![在此处输入图像描述](../Images/9ed3b028c17d7f63d8ded98b108216c1.png)

你在VS上运行什么版本？我正在使用 .NET c4.5.50709 运行版本 11.0.50727.1 RTMREL

# css - 如何使内表单元格占据外表单元格的整个空间

> ID：12513447
> 
> 赞同：0
> 
> 时间：2012-09-20T13:16:27.050
> 
> 标签：css

我在单元格表中有一个表。我希望桌子占据整个空间。看起来表格只占据单元格的中心。

```
 <asp:ListView ID="EmployeeListView" runat="server">
      <LayoutTemplate>
           <table id="tblEmployee">
           </table>
      </LayoutTemplate>
    <ItemTemplate>
     <tr>
    <td>
    <table style = "width: 100%; border-collapse: collapse; padding: 0">
       <tr>
           <td class = "aprovGriditem">
               <asp:Label ID="Label1" runat="server" Text="3:15"></asp:Label>
           </td>
       </tr>
       <tr>
           <td class = "aprovGridalt">
               <asp:Label ID="Label2" runat="server" Text="0:45"></asp:Label>
           </td>
       </tr>
    </table>
</td>
</tr>
</ItemTemplate>
</asp:ListView> 
```

我希望内表的两个单元格均匀地占据外单元格的整个空间，而不是集中在中间并在它们周围留出空间。

```
#tblEmployee
{
  border-collapse: collapse;
  height: 100%;
  width: 100%;
}
#tblEmployee th
{
 background-color: #BBC6E3;
 height: 25px;    
 }
 .aprovGriditem 
 {    
  border: 2px solid #BBC6E3;
  padding: 0;
  width: 100%;
  }
.aprovGridalt 
{
  background-color: #BBC6E3; 
  border: 2px solid #BBC6E3;
  padding: 0;
 width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:25:34.383

使用以下样式设置您`table`的样式：

`height: 100%; width: 100%;`

要将这些样式添加到您的`table`中，您可以使用内联样式：

`<table style = "height: 100%; width: 100%;">`

或者给它一个类（更可取，因为您以后可能想使用相同的样式组合）：

`<table class = "bigtable">`

然后将其添加到您的样式表中：

```
.bigtable {
    height: 100%;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T13:37:07.190

删除正文边距和填充：

```
body {
  margin: 0;
  padding: 0;
} 
```

并将您的表格包装在一个占据所有空间的 div 中：

```
div {
  position: absolute;
  width: 100%;
  height: 100%;
} 
```

# jquery - jQuery动画不工作

> ID：12513453
> 
> 赞同：0
> 
> 时间：2012-09-20T13:16:46.743
> 
> 标签：jquery, css

我正在使用 jQuery 在屏幕上移动一些元素，但是动画功能不起作用（或者我的 CSS 定义阻碍了它，更像是..）。例如，我相信这个动画元素 id foobar 到给定位置..

```
$('#foobar').animate({ top: '0px', left: '200px' }); 
```

我在这里[有一个 jsfiddle 示例：玩一下](http://jsfiddle.net/upNSd/1/ "玩一玩")

据我所知，我应该能够放置绝对定位的元素（示例中的 menuButton 类），只要它们位于相对定位的 div 中（示例中的 ScreenDesign）。但是我不能让它工作。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:18:03.070

你只是忘了引用 jQuery。

[http://jsfiddle.net/upNSd/2/](http://jsfiddle.net/upNSd/2/)

要调试类似问题，您应该检查 javascript 控制台（Chrome 和 FireBug 中的 F12）。对于你的小提琴它说：

> 未捕获的类型错误：无法调用 null 的方法“动画”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:18:13.033

您的 jsFiddle 不起作用，因为不包含[jQuery （默认情况下仅包含不同的库](http://jquery.com/)[MooTools](http://mootools.net/)）。

要包含 jQuery，请从“框架”选项卡中选择它：

![在此处输入图像描述](../Images/3ae5f551d633669c54a9dc119226d2aa.png)

这是一个固定版本：[little link](http://jsfiddle.net/upNSd/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:26:19.357

将动画包装在 jQuery 就绪函数中，确保 DOM 完全加载。

```
 jQuery(document).ready(onready);

  function onready
  {
    jQuery('#foobar').animate({ top: '0px', left: '200px' });

  } 
```

此外，使用 'jQuery' 而不是 doller 符号将确保不会与任何 over js 库发生冲突 :-)

# css - 这个 CSS 代码如何使网页居中？

> ID：12513470
> 
> 赞同：0
> 
> 时间：2012-09-20T13:17:44.427
> 
> 标签：css

这个 CSS 代码如何使网页居中？

```
html,
body {
    margin:0;
    padding:0;
    color:#000;
    background:#fff;
}
#body {
    width:870px;
    margin:0 auto;
    background:#ddd;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:18:46.097

```
margin: auto; 
```

居中任何块。

但这不是`body`居中的，只是一个`div`id 是“body”的（我觉得有点误导）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:59:02.037

将类或 ID 命名为与 body/head/footer/etc 相同时要小心。您发布的代码可以正常工作，因为它`margin:auto`将使块居中，但该命名方案很容易导致一些意外更改。尝试使用`#wrapper`,`#container`或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:20:23.943

没有任何错误。

`body { ... }`指整个页面，即文档的正文。

`#body { ... }`肯定是你体内的一个 div `ID = "body"`。CSS 是正确的，因为它在左侧和右侧提供了固定宽度和自动边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T05:37:54.973

这将在现代浏览器中工作，但您需要添加更多属性才能在旧版本的 IE 中工作

```
html,
body {
    margin:0;
    padding:0;
    color:#000;
    background:#fff;
    text-align:center; /* align contents to center which will align #body center */

}
#body {
    width:870px;
    margin:0 auto;
    background:#ddd;
    text-align:left; /* re-arranges contents of #body to default left */
} 
```

# php - TCPDF + TinyMCE + 新字体

> ID：12513480
> 
> 赞同：4
> 
> 时间：2012-09-20T13:18:06.123
> 
> 标签：php, tinymce, tcpdf

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:59:03.143

因为我已经有几年没有使用过 TCPDF 了，所以请多加注意。

我似乎记得字体的命名约定非常重要。

Amaranth-Bold-webfont.ttf 标准 Amaranth-Bold-webfontb.ttf 粗体 Amaranth-Bold-webfonti.ttf 斜体 Amaranth-Bold-webfontib.ttf 粗斜体

希望这是有用的。

# xml - 避免在 Document->createTextNode 中编码

> ID：12513484
> 
> 赞同：-2
> 
> 时间：2012-09-20T13:18:16.170
> 
> 标签：xml, vb.net

```
Dim xmlDoc As DOMDocument
Dim codeXML as String
Dim n As IXMLDOMNode

codeXML = '<data>value</data>'
Set n = xmlDoc.createTextNode(codeXML) 
```

我需要这样的结果：

```
<main><data>value</data></main> 
```

但我明白了

```
<main>&lt;data&gt;value&lt;/data&gt;</main> 
```

请帮助解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:20:10.383

您正在创建`<data>value</data>`一个文本节点，但您不需要文本节点。相反，您想要一个带有嵌套文本节点的元素`<data>`（通过创建） （使用上述）。`createElement``value`

明确地说，`<data>value</data>`它由一个带有嵌套文本节点的 XML 元素组成。如果您调用`createTextNode()`并传入您的 XML，那么它会将其编码为文本并创建一个文本节点。*如果没有发生该实体编码，您将无法存储此文本*。

它有助于理解 DOM 中的不同节点子类。这是关于这个主题的[有用教程。](http://www.w3schools.com/dom/dom_nodes.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:06:42.453

正如布赖恩建议的那样，尝试：

```
mainElement.createElement("data").setTextContent("value"); 
```

# windows - 获取进程总页面错误

> ID：12513488
> 
> 赞同：3
> 
> 时间：2012-09-20T13:18:29.647
> 
> 标签：windows, winapi, page-fault

任务管理器和 SysInternals Process Explorer 都显示了进程页面错误的总量，但我发现的所有性能计数器和 WMI 对象仅显示每秒页面错误，

是否有不同的 API 或一些晦涩的性能计数器可以显示某个进程的页面错误总数？（在 Windows 上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:29:08.477

[`GetProcessMemoryInfo`](http://msdn.microsoft.com/en-us/library/ms683219%28v=vs.85%29.aspx)的`PROCESS_MEMORY_COUNTERS`有一个计数`PageFaultCount`。

# sql-server - 使用 Simple.Data 时使用输出参数调用 sql server 存储过程

> ID：12513489
> 
> 赞同：1
> 
> 时间：2012-09-20T13:18:29.367
> 
> 标签：sql-server, simple.data

使用 Simple.Data，我想从存储过程中的输出参数中获取结果。假设我有以下 SP（忽略它的无用性）：

```
CREATE PROCEDURE [dbo].[TestProc]
    @InParam int,
    @OutParam int OUTPUT
AS
BEGIN
    SELECT @OutParam = @InParam * 10
END 
```

当我用 Simple.Data 调用它时，我使用以下代码。

```
var db = Database.Open();

int outParam;
var result = db.TestProc(42, out outParam);

Console.WriteLine(outParam); // <-- == 0
Console.WriteLine(result.OutputValues["OutParam"]); // <-- == 420 
```

感觉 outParam 应该包含值，而不是 OutputValues 字典。所以我的问题是：在这种特殊情况下，有没有更好的方法从 OutParam 获得结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:48:14.193

不幸的是，`out`Simple.Data 使用的动态绑定基础结构不支持参数，因为并非所有 CLR 语言都支持这些参数。

不过，我愿意接受有关更好语法的建议。

# linux - 从主机 (Windows) 访问来宾 (Ubuntu) localhost

> ID：12513490
> 
> 赞同：0
> 
> 时间：2012-09-20T13:18:31.923
> 
> 标签：linux, ubuntu, localhost, virtual-machine, virtualbox

有没有办法通过主机内的浏览器访问来宾的本地主机？我在 Win7 上运行带有 Virtualbox 的 Ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:28:29.447

您可以为访客系统配置网络接口。例如桥应该可以帮助你。或者您可以通过 NAT 使用端口转发。

查看[官方文档](http://www.virtualbox.org/manual/ch06.html)以获取更多信息。

# c - 如何使它不共享相同的内存

> ID：12513492
> 
> 赞同：0
> 
> 时间：2012-09-20T13:18:31.947
> 
> 标签：c

```
#include <stdio.h>
typedef struct TESTCASE{
    char *before; 
}ts;
int main(void) {
     ts t[2] = {{"abcd"}, 
                {"abcd"}};
     t[0].before[0] = t[0].before[2] = t[0].before[3] = 'b';
     printf("%s - %s\n", t[0].before, t[1].before);
     return 0;
} 
```

输出是

bbbb - bbbb

我在 Cygwin 中用 gcc 编译

cc -g test.c -o 测试

我的问题是，使用什么编译选项，我可以获得 bbbb - abcd 的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:20:39.987

您不应该编写字符串，它们是“不可变的”，写入它会导致未定义的行为。

因此，编译器可以自由地为两个字符串使用相同的位置。

提示：[strdup() - 它在 C 中做了什么？](https://stackoverflow.com/questions/252782/strdup-what-does-it-do-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:36:27.873

`t[0].before[3] = 'b';`会在某些系统上出现分段错误。您不能写入常量字符串。

```
#include <stdio.h>
typedef struct TESTCASE{
  char before[5];
}ts;
int main(void) {
  ts t[2] = {{ {'a','b','c','d',0} },
             { {'a','b','c','d',0} }};
  t[0].before[0] = t[0].before[2] = t[0].before[3] = 'b';
  printf("%s - %s\n", t[0].before, t[1].before);
  return 0;
} 
```

# java - Apache Velocity 自定义 Uberspect

> ID：12513495
> 
> 赞同：1
> 
> 时间：2012-09-20T13:18:43.407
> 
> 标签：java, velocity

从 Apache 速度指南属性查找规则是：

对于地址属性（$object.address）

```
getaddress()
getAddress()
get("address")
isAddress() 
```

我想更改获取规则以接受可变参数对象参数。所以它不会调用

```
get(String name) 
```

但

```
get(String name, Object...params) 
```

我知道这可以通过创建自定义 ubespector 来完成。但我完全不知道怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:35:14.943

最后经过 2 天的挖掘，我能够制作自定义的 Uberspector。如果没有找到相应的方法，将调用“run(String, Object[])”方法。标准的“get(String)”将调用

```
run(name, new Object[]{}); 
```

自定义Ubersector

```
import java.lang.reflect.Method;
import org.apache.velocity.util.introspection.Info;
import org.apache.velocity.util.introspection.UberspectImpl;
import org.apache.velocity.util.introspection.VelMethod;

public class CustomUberspector extends UberspectImpl {

public VelMethod getMethod(Object obj, String methodName, Object[] args, Info i)
        throws Exception  {

        if (obj == null) return null;

        VelMethod vm = super.getMethod(obj, methodName, args, i);
        if(vm != null) return vm;

        Object[] iargs = {methodName, new Object[] {}} ;
        Method m = introspector.getMethod(obj.getClass(), "run", iargs);
        if (m != null) return new PortalVelMethodImpl(m, methodName);

        return null;
}

public class PortalVelMethodImpl extends VelMethodImpl {
    final Method method;
    final String name;

    public PortalVelMethodImpl(Method m, String methodName) {
        super(m);
        method = m;
        name   = methodName;            
    }

    protected Object doInvoke(Object o, Object[] actual) throws Exception  {
        /* "run" method argumens are String and Object[] so we need to get plain Object[] array
         * From [Arg0,[Arg1..ArgN] to [Arg0,Arg1..ArgN]
         * */
        List<Object> args = new ArrayList<Object>();
        if(actual.length >= 1) {
            args.add(actual[0]);

            if(actual.length >= 2) {
                Object[] nestedArgs = (Object[])actual[1];
                for(int i=1; i<nestedArgs.length; i++) args.add(nestedArgs[i]);
            }
        }

        return method.invoke(o, name, args.toArray());
    }

} 
```

}

# javascript - 在jquery html中没有表单的对象HTMLInputElement

> ID：12513496
> 
> 赞同：0
> 
> 时间：2012-09-20T13:18:45.550
> 
> 标签：javascript, jquery, html, variables, object

我有一个功能

```
function changeval(fid) { 
    $('#'+fid).html('<span onclick="alert(' + fid + ');" class="link">Change</span>');
} 
```

首先，fid 显示为普通变量并影响我需要的 div（id 为“fid”），但在警报功能上，它显示为 [object HTMLInputElement]。我只是不知道该怎么办......我想我已经尝试了一切......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:11:57.073

您需要在 html 输出中用引号将 'fid' 包裹起来，不带引号 javascript 警告第一个元素带有`'id="fid's content"'`.

[在这里查看](http://codepen.io/anon/pen/oBafF)

```
function changeval(fid) { 
  $('#'+fid).html('<span onclick="alert(\'' + fid + '\');" class="link">Change</span>');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:49:03.967

我会删除“onclick”并这样做（使用jquery 1.7.1）......

```
$(function() {//Document ready

    $('body').on('click','.link',function(){
        //Do what you want i.e...
        alert($(this).parent().attr('id'));
        alert($(this).parent().html());
    });

});

function changeval(fid) { 
    $('#'+fid).html('<span class="link">Change</span>');
} 
```

希望能帮助到你。

# asp.net-mvc-3 - 自定义 Html.ValidationSummary()

> ID：12513499
> 
> 赞同：3
> 
> 时间：2012-09-20T13:18:48.430
> 
> 标签：asp.net-mvc-3

我在 MVC 3 中的默认 Html.ValidationSummary() 有问题。

默认情况下，它添加以下代码：

```
<ul>
  <li style="display:none"></li>
</ul> 
```

那个空`<ul>`会导致我想摆脱的空间。

有没有办法解决这个问题？让它在它`div`周围或类似的地方切换一些？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T13:30:34.427

如何有条件地显示 ValidationSummary

```
if(!ViewData.ModelState.IsValid)
 {
     @Html.ValidationSummary() 
 } 
```

**重要的**是，如果您这样做，您将无法使用[客户端 javascript 验证](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)（因为 div 不会出现）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:31:30.323

您可以创建自己的验证摘要，例如，如下所示：[Custom ValidationSummary template Asp.net MVC 3](https://stackoverflow.com/questions/5857851/custom-validationsummary-template-asp-net-mvc-3)

# c++ - C++ VS2010中的3n+1解溢出

> ID：12513512
> 
> 赞同：1
> 
> 时间：2012-09-20T13:19:15.160
> 
> 标签：c++, visual-studio-2010, overflow

我正在尝试使用 VS2010 c++ 解决 3n+1 问题，在小输入中它运行良好，但是当它达到 113383 时它会溢出。

这是[问题链接](http://acm.uva.es/p/v1/100.html "问题链接")。

这是我用来解决这个问题的代码：

```
#include <iostream>
using namespace std;
int main(void) {
    while (!cin.eof()) {
        int i, j, maxCycle = 0, tmaxCycle = 0;
        cin >> i >> j;
        for (int x = i; x <= j; x++) {
            int n = x;
            tmaxCycle = 0;
            while (n != 1) {
                if ((float)(n/2) != (n/2.0)) {
                    n = 3*n + 1;
                }
                else {
                    n /= 2;
                }
                tmaxCycle += 1;
                if (n < 0) {
                    int blah = 0; //just for the breakpoint
                } 
            }
            tmaxCycle += 1;
            if (tmaxCycle > maxCycle) {
                maxCycle = tmaxCycle;
            }
        }
        cout << i << "\t" << j << "\t" << maxCycle << endl;
    }
    system("pause");
} 
```

我在第 15 行做了一个断点，此时值溢出

```
n=-1812855948 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:41:29.743

使用 64 位无符号整数。如果这些溢出，请使用像[GNU Multiple Precision Library](http://gmplib.org/)这样的 bignum 库。Bignums 为您提供无限的精度和大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:24:04.417

这

```
if((float)(n/2)!=(n/2.0)) 
```

`int`在溢出之前很久就会产生不正确的结果。将其更改为

```
if ( n & 1) 
```

# c# - 我无法在我的数据库中添加一行

> ID：12513515
> 
> 赞同：0
> 
> 时间：2012-09-20T13:19:19.357
> 
> 标签：c#, sql-server, winforms

我想从我的表单中添加一行到数据库，这是我用于它的代码：

```
private Connexion connexion = new Connexion();
private SqlDataAdapter daAuteur;
private byte[] imgData;

     class Connexion
        {
            public DataSet ds = new DataSet();
            public SqlConnection cnx = new SqlConnection("Data Source=MAC-BOOK-AIR;Initial Catalog=Gestion_bib;Integrated Security=True");

    }

    private void AjoutAuteur_Load(object sender, EventArgs e)
            {
                InitializeOpenFileDialog();
                daAuteur = new SqlDataAdapter("select * from Auteur", connexion.cnx);
                daAuteur.Fill(connexion.ds, "Auteur");
            }

     private void AjoutAuteur_Load(object sender, EventArgs e)
            {
                InitializeOpenFileDialog();
                daAuteur = new SqlDataAdapter("select * from Auteur", connexion.cnx);
                daAuteur.Fill(connexion.ds, "Auteur");
            }

      private void ajouterNewBook_Click(object sender, EventArgs e)
            {
                DataRow row = connexion.ds.Tables["Auteur"].NewRow();
                row[1] = String.IsNullOrEmpty(nomAuteurBox.Text) ?
                    DBNull.Value :
                    nomAuteurBox.Text as Object;
                row[2] = String.IsNullOrEmpty(prenomAuteurBox.Text) ?
                    DBNull.Value :
                    prenomAuteurBox.Text as Object;
                row[3] = String.IsNullOrEmpty(nomAuteurBox.Text) ?
                    DBNull.Value :
                    dateDeNaissanceAuteurBox.Text as Object;
                row[4] = String.IsNullOrEmpty(lieuDeNaissanceAuteurBox.Text) ?
                    DBNull.Value :
                    lieuDeNaissanceAuteurBox.Text as Object;
                row[5] = String.IsNullOrEmpty(nationaliteAuteurBox.Text) ?
                    DBNull.Value :
                    nationaliteAuteurBox.Text as Object;
                if (decesCheckBox.Checked)
                {
                    row[6] = true;
                    row[7] = String.IsNullOrEmpty(dateDecesAuteurBox.Text) ?
                    DBNull.Value :
                    dateDecesAuteurBox.Text as Object;
                    row[8] = String.IsNullOrEmpty(lieuDecesAuteurBox.Text) ?
                        DBNull.Value :
                        lieuDecesAuteurBox.Text as Object;
                }
                else
                {
                    row[6] = false;
                    row[7] = DBNull.Value;
                    row[8] = DBNull.Value;
                }
                row[9] = String.IsNullOrEmpty(periodeAuteurBox.Text) ?
                    DBNull.Value :
                    periodeAuteurBox.Text as Object;
                row[10] = String.IsNullOrEmpty(resumeAuteurBox.Text) ?
                   DBNull.Value :
                   resumeAuteurBox.Text as Object;
                row[11] = String.IsNullOrEmpty(lien1Box.Text) ?
                   DBNull.Value :
                   lien1Box.Text as Object;

                imgData = new ImageConverter().ConvertTo(auteurPhoto.Image, typeof(Byte[])) as Byte[];
                row[12] = imgData == null ?
                   DBNull.Value :
                   imgData as Object;
                connexion.ds.Tables["Auteur"].Rows.Add(row);

                SqlCommandBuilder cmb = new SqlCommandBuilder(daAuteur);
                daAuteur.Update(connexion.ds, "Auteur");
            } 
```

但它给了我这个错误：

> 字符串或二进制数据将被截断。该语句已终止

哪里有问题 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:27:47.473

您还必须确保`size on field`in 数据库符合您的`string parameter length`

您可以使用固定行内容的大小`SubString method`

您在传输图像时遇到问题

```
imgData = new ImageConverter().ConvertTo(auteurPhoto.Image, typeof(Byte[])) as Byte[];
row[12] = imgData == null ? DBNull.Value : imgData; //Adjust here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:23:53.460

此错误意味着数据库中的一个（或多个）列太小而无法包含您尝试插入的文本。您需要确保字符串不会太长，或者增加数据库中列的长度。

没有更多信息，我无法再查明问题所在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T13:30:37.017

正如其他人所说，您遇到的正是错误所说明的内容：您尝试输入的数据大于列允许的数据。

看看[这个 sqlfiddle](http://sqlfiddle.com/#!3/42e87/1)

请注意，它可以工作，但是如果您将插入更改为 6 个字符，它将无法构建架构，原因与您所说的相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:24:02.087

该截断错误意味着您尝试插入的数据太大而无法放入列中。您是否对可以将多少数据添加到表列中设置了限制？

# javascript - jQuery可旋转拖动 - 旋转时拖动时“抽搐”

> ID：12513520
> 
> 赞同：1
> 
> 时间：2012-09-20T13:19:30.460
> 
> 标签：javascript, jquery, jquery-ui, draggable

> **可能重复：**
> [Webkit 和 jQuery 可拖动跳跃](https://stackoverflow.com/questions/3523747/webkit-and-jquery-draggable-jumping)

我在这里创建了一个 jsfiddle 来解释问题：http: [//jsfiddle.net/sCguA/15/](http://jsfiddle.net/sCguA/15/)

我们在模板后面有一个图像，我们希望用户能够拖动它来定位它。他们还需要能够“旋转”图像。

我在上面的小提琴中编写的代码非常适合拖动图像和旋转图像——但是，当图像处于“旋转”90/270 度时。状态，拖动会导致它“跳跃”。我似乎无法弄清楚如何解决这个问题！

编辑：该死，这似乎相关：[Webkit and jQuery draggable jumping](https://stackoverflow.com/questions/3523747/webkit-and-jquery-draggable-jumping)我怎么在我的谷歌搜索中错过了这个:(

# android - 用于测试android应用程序的记录工具

> ID：12513523
> 
> 赞同：4
> 
> 时间：2012-09-20T13:19:35.200
> 
> 标签：android, testing, android-testing

是否有任何应用程序可以用来记录用户在 Android 应用程序中的活动？

我想在测试应用程序时获取用户步骤。是否可以记录他们的步骤（可能是截图）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:39:43.963

您可以使用 LogCat。在您要记录的每一步，将一些内容打印到 LogCat

```
Log.D("Button Press", "User touched the 'View More' button); 
```

然后使用 LogCollectors 源代码 (http://code.google.com/p/android-log-collector/ )，您可以将其通过电子邮件发送给自己并进行分析。

或者，您可以尝试使用 monkeyrunner (http://developer.android.com/tools/help/monkeyrunner_concepts.html) 并创建一个脚本，在用户使用应用程序时运行并拍摄屏幕截图 [不确定这是否可行- 从未使用过它]。

我认为出于收集数据的目的，使用 logcat 将是一个更顺畅、更详细的过程。

# android - 如何在不征求用户许可的情况下直接卸载安卓应用

> ID：12513524
> 
> 赞同：1
> 
> 时间：2012-09-20T13:19:40.757
> 
> 标签：android, android-intent

从另一个应用程序卸载 android 应用程序时如何跳过“你确定”对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:24:50.930

I guess that is not possible due to android security policy. And that policies have reasons to be there.

Otherwise every app would be able to uninstall another one causing troubles to the users if that operation is performed by a rogue app.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:16:18.600

就安装/卸载、基本的 Android 安全而言，您无法控制其他应用程序。

您可以做的最好的事情是让您的应用程序检查您担心学生使用的应用程序是否存在，如果存在，则不要让您的应用程序运行。

然后就看学生了。他们可以选择卸载所述应用程序以允许您运行或不运行您的应用程序。

# blackberry-10 - 无法在 Momentics 中编译 BB10 示例原生应用程序“HelloWorldDisplay”

> ID：12513526
> 
> 赞同：1
> 
> 时间：2012-09-20T13:19:47.970
> 
> 标签：blackberry-10

我在使用 Momentics IDE 编译 HelloWorldDisplay 本机应用程序时遇到问题。我已经阅读了 BB10 原生 SDK 开发者页面上的入门指南：

[https://developer.blackberry.com/native/beta/documentation/getting_started.html](https://developer.blackberry.com/native/beta/documentation/getting_started.html)

我下载了示例应用程序并尝试通过右键单击并选择构建来导入和构建 HelloWorldDisplay 应用程序。

构建失败并显示以下控制台输出：

```
**** Build of configuration Device-Debug for project HelloWorldDisplay ****

make all 
make -j 1 -CDevice-Debug -fmakefile all 
make[1]: Entering directory `C:/Users/pro-cln0042/Downloads/Code/BB10Examples/HelloWorldDisplay/Device-Debug'
make[1]: Leaving directory `C:/Users/pro-cln0042/Downloads/Code/BB10Examples/HelloWorldDisplay/Device-Debug'
make[1]: *** No rule to make target `HelloWorldDisplay', needed by `all'.    Stop.
make: *** [all] Error 2

**** Build Finished **** 
```

我认为 Momentics 应该自动处理这个问题，并且我应该能够在不设置任何编译器、构建文件等的情况下右键单击-> 构建，是不是错了？

我是 BB 开发和 Eclipse/Momentics 的新手。任何有关如何解决这些错误的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:23:07.227

您的链接返回 404 Not Found 错误。我怀疑你已经建立了一个旧的开发环境。转到[BB10 Beta 2 站点](https://developer.blackberry.com/cascades/documentation/getting_started/setting_up.html)并从那里下载 NDK，然后按照说明进行操作。PlayBook 和 BB10 NDK 基于 Momentics，但进行了大量定制以支持 BlackBerry（尤其是 BB10）的开发。由于它是 Beta 版，它是一个移动的目标，您必须使您的 IDE 和模拟器保持最新。

# algorithm - 哈希是否最适合要求高查找速度的应用程序？

> ID：12513530
> 
> 赞同：0
> 
> 时间：2012-09-20T13:19:57.203
> 
> 标签：algorithm, data-structures

我记住，`hash`如果我想编写一个要求高查找速度的应用程序，那将是我应该求助的第一件事，而任何其他数据结构都不能保证这一点。

但是当我看到很多帖子说不同的时候我很困惑，比如后缀树，特里，仅举几例。

所以我想知道`hash`高速查找总是最好的吗？如果我想要高查找速度和更少的空间成本怎么办？

是否有任何**关于高速查找和空间效率的数据结构或算法的**材料（书籍或论文） ？任何此类都受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:35:32.517

> 所以我想知道哈希总是高速查找的最佳选择吗？

**没有**。如评论中所述：

[一些通用问题]从来没有这样的事情最好的数据结构。一切都取决于大小写。尝试和基数树可能非常适合字符串，因为无论如何您都需要读取字符串。数组允许简单性和出色的缓存效率 - 通常是小规模静态信息的最佳选择
我曾经回答过一个相关问题，即树可能比哈希表更好：[Hash Table v/s Trees](https://stackoverflow.com/questions/10033417/hash-table-v-s-trees)

> 如果我想要高查找速度和更少的空间成本怎么办？

这两者可能是**自相矛盾的**。`X`即使对于 size的哈希表与size 的哈希表的简单示例也是如此`2*X`。较大的哈希表发生冲突的可能性较小，因此预计会比较小的哈希表更快。

> 是否有任何材料（书籍或论文）讲授有关高速查找和空间效率的数据结构或算法？

**[Introduction to Algorithms](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)**很好地介绍了所使用的主要数据结构。开发的任何算法都试图提供良好的空间和时间效率，但就像说的那样，有一个权衡，有些算法可能比其他算法更适合特定情况。
**为特定问题选择正确的算法/数据结构/设计是工程的意义所在，不是吗？**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:29:19.263

只有良好的哈希实现才能为您提供良好的性能。并且您无法在所有情况下都将哈希与 Trie 进行比较。Trie 适用的情况很快，但在内存方面可能会很昂贵（再次取决于实现）。

但是你测量过性能吗？或者这是您正在寻找的不必要的优化。地图让你失望了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T22:52:30.337

我假设您在这里谈论的是字符串，答案是“否”，哈希不是查找字符串的最快或最节省空间的方法，尝试是。当然，编写散列算法比编写 trie 容易得多。

在维基百科或有关尝试的书籍中找不到的一件事是，如果您天真地用每个字母一个节点来实现它们，您最终会得到大量低效的单子节点。要进行真正消耗 CPU 的尝试，您必须实现节点，以便它们可以具有可变数量的字符。当然，这比写一个普通的 trie 更难。

我已经编写了处理超过 10 亿个条目的 trie 实现，我可以告诉你，如果处理得当，它的速度非常快，没有什么比得上的了。

尝试的另一个问题是您必须编写自定义堆，因为如果您只使用某种通用内存管理它会很慢。因此，除了实现 trie 之外，您还必须实现 trie 运行所在的堆。相当复杂，但如果你这样做，你会得到疯狂的速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:24:54.853

这也可能取决于元素的实际数量。在复杂性理论中，散列还不错，但复杂性理论只有在元素的实际数量大于某个阈值时才是好的。

即，如果您只有 2 个元素，则有比散列更快的方法；-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:39:08.497

哈希表是一种很好的通用结构，但如果哈希函数不适合输入数据，它们可能会严重失败。最坏情况查找是 O(n)。正如您提到的，它们还浪费了一些空间。其他通用结构（如平衡二叉搜索树）的平均情况较差，但比哈希表的最坏情况性能更好。这对于实时应用程序很重要。trie 是为字符串查找量身定制的更特殊用途的结构。

# tomcat - grails 1.3.7 中的 solr 索引失败

> ID：12513535
> 
> 赞同：0
> 
> 时间：2012-09-20T13:20:17.277
> 
> 标签：tomcat, grails, solr

我目前正在开发一个带有 solr 插件的 grails 项目。

**圣杯版本**：1.3.7

**grails start-solr**输出：

```
/path/.grails/1.3.7/projects/projectName/plugins/solr-0.2/scripts/StartSolr.
Starting Solr - Solr HOME is
/path/.grails/1.3.7/projects/projectName/solr-home
Console access: http://localhost:8983/solr/ 
```

我根据需要编辑了 data-config.xml 文件：

```
<dataConfig>
    <dataSource driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/database?autoreconnect=true" user="user"
        password="password" />
/*...*/ 
```

我还编辑 DataSource 文件：

```
/*...*/
// environment specific settings
environments {
    development {
        dataSource {
//            dbCreate = "create-drop" // one of 'create', 'create-drop','update'
//            url = "jdbc:hsqldb:mem:devDB"
            dbCreate = "update"
            driverClassName = "com.mysql.jdbc.Driver"
            username = "username"
            password = "password"
            url = "jdbc:mysql://127.0.0.1:3306/database?autoreconnect=true"
        }
    }
/*...*/ 
```

我已将 solr 配置重新加载到此 url：

```
http://localhost:8983/solr/dataimport?command=reload-config 
```

然后，当我访问此网址时：

```
http://localhost:8983/solr/dataimport?command=full-import 
```

我收到这条消息：

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">11</int>
    </lst>
    <lst name="initArgs">
        <lst name="defaults">
            <str name="config">data-config.xml</str>
        </lst>
    </lst>
    <str name="command">full-import</str>
    <str name="status">idle</str>
    <str name="importResponse"/>
    <lst name="statusMessages">
        <str name="Time Elapsed">0:0:8.711</str>
        <str name="Total Requests made to DataSource">0</str>
        <str name="Total Rows Fetched">0</str>
        <str name="Total Documents Processed">0</str>
        <str name="Total Documents Skipped">0</str>
        <str name="Full Dump Started">2012-09-20 14:53:56</str>
        <str name="">Indexing failed. Rolled back all changes.</str>
        <str name="Rolledback">2012-09-20 14:53:56</str>
    </lst>
    <str name="WARNING">This response format is experimental.  It is likely to change in the future.</str>
</response> 
```

我忘记了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:13:48.303

我终于找到了答案：

打开位于此处的 solr 日志文件后：

> tail -f ~/.grails/1.3.7/projects/PROJECT-NAME/solr-home/logs/AAAA_MM_JJ.stderrout.log

我看到以下错误：

> 坟墓：完全导入失败 org.apache.solr.handler.dataimport.DataImportHandlerException：无法加载驱动程序：com.mysql.jdbc.Driver 处理文档＃1

所以我在 mysql 网站上下载了 jdbc 驱动程序：

[http://dev.mysql.com/downloads/mirror.php?id=13597](http://dev.mysql.com/downloads/mirror.php?id=13597)

我将包的**mysql-connector-java-5.0.8-bin.jar**文件移动到这里：

> mv mysql-connector-java-5.0.8-bin.jar ~/.grails/1.3.7/projects/PROJECT-NAME/solr-home/lib/

希望它对某人有用！

# xml - xquery 获取节点值

> ID：12513536
> 
> 赞同：0
> 
> 时间：2012-09-20T13:20:17.647
> 
> 标签：xml, xquery, xquery-sql

我正在尝试获取 cat 的值，但它使我返回 null。请帮助我获得这个价值。提前致谢！

```
DECLARE @xml XML 
SET @xml = '
<cat:catalog xmlns:cat="http://datypic.com/cat"
             xmlns:prod="http://datypic.com/prod">
  <cat:number>1446</cat:number>
  <prod:product>
    <prod:number>563</prod:number>
    <prod:name prod:language="en">Floppy Sun Hat</prod:name>
  </prod:product>
</cat:catalog>'

Select @xml.value('declare namespace ns="xmlns:cat=http://datypic.com/cat"; /ns:cat[1]/number[1]', 'int') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:35:11.597

您正在尝试抓取“cat[1]”，但没有元素“cat”，它只是一个前缀。我相信你想要“目录”。此外，您还必须为“数字”子项添加命名空间前缀。而且我认为您编写声明命名空间的方式也不正确。那里不需要“xmlns:cat=”。

换句话说：

```
Select @xml.value('declare namespace ns="http://datypic.com/cat"; /ns:catalog[1]/ns:number[1]', 'int') 
```

...应该工作。但是 podiluska 的前缀更改更合适，因为“ns”没有给出任何关于您正在使用的命名空间的提示。要记住的重要一点是前缀是任意的（它可以是任何东西），但您必须将它绑定到该名称空间中您想要的任何元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:57:01.360

尝试

```
Select @xml.value('declare namespace cat="http://datypic.com/cat"; 
    (/cat:catalog/cat:number)[1]','int') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T23:58:36.277

您还可以使用 WITH XMLNAMESPACES 来执行此操作，这使得命名空间声明适用于整个语句，而不是对 .value 的单个调用。如果您需要从 XML 中获取多个值，这很有用，例如

```
DECLARE @xml XML  
SET @xml = '<cat:catalog xmlns:cat="http://datypic.com/cat" xmlns:prod="http://datypic.com/prod">
  <cat:number>1446</cat:number>
  <prod:product>
    <prod:number>563</prod:number>
    <prod:name prod:language="en">Floppy Sun Hat</prod:name>
  </prod:product>
</cat:catalog>' 

;WITH XMLNAMESPACES (
'http://datypic.com/cat' AS cat,
'http://datypic.com/prod' AS prod
)
SELECT 
    c.c.value('(cat:number/text())[1]', 'INT') 'cat:number',
    p.c.value('(prod:number/text())[1]', 'INT') 'prod:number',
    p.c.value('(prod:name/@prod:language)[1]', 'VARCHAR(2)') 'prod:language',
    p.c.value('(prod:name/text())[1]', 'VARCHAR(50)') 'prod:name'
FROM @xml.nodes('cat:catalog') c(c)
    CROSS APPLY c.c.nodes('prod:product') p(c) 
```

# mysql - MySQL 中有两个 ENUM 字段的表，奇怪的行为。它是一个错误吗？

> ID：12513538
> 
> 赞同：4
> 
> 时间：2012-09-20T13:20:19.183
> 
> 标签：mysql, mysqldump

升级到 MySQL 5.5 后，我们注意到默认 MySQL 服务器配置上发生的奇怪错误，它使用 utf16 排序规则作为默认值（至少在我看来）

奇怪的行为如下。

使用以下两个字段创建表

```
CREATE TABLE `aa` (
  `a` ENUM('on','off') NOT NULL DEFAULT 'off',
  `b` ENUM('on','off') NOT NULL DEFAULT 'off'
) CHARACTER SET 'utf16' COLLATE 'utf16_general_ci'; 
```

转储表，结构如下

```
CREATE TABLE `aa` (
  `a` ENUM('o','o') NOT NULL DEFAULT 'o',
  `b` ENUM('o','o') NOT NULL DEFAULT 'o'
)ENGINE=InnoDB
CHARACTER SET 'utf16' COLLATE 'utf16_general_ci'; 
```

系统配置

```
Ubuntu 12.04.1 LTS
Linux host 3.2.0-30-virtual #48-Ubuntu SMP Fri Aug 24 17:12:24 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
mysql-server-5.5 5.5.24-0ubuntu0.12.04.1    MySQL database server binaries and system database setup 
```

任何人都可以证实这一点？

UTF8 排序规则似乎**不会**发生，这可以强制成为 my.cnf 中的默认值

```
[mysqld]
character-set-server = utf8
collation-server = utf8_unicode_ci
init-connect='SET NAMES utf8'
character-set-server = utf8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:48:37.957

这可能是一个答案（来自文档 - [Unicode Support](http://dev.mysql.com/doc/refman/5.5/en//charset-unicode.html)）：

> 需要使用 Unicode 与服务器通信的客户端应用程序应相应设置客户端字符集；例如，通过发出 SET NAMES 'utf8' 语句。ucs2、utf16 和 utf32 不能用作客户端字符集，这意味着它们不适用于 SET NAMES 或 SET CHARACTER SET。（请参阅第 10.1.4 节，“连接字符集和排序规则”。）

还有一点（来自[Connection Character Sets and Collat​​ions](http://dev.mysql.com/doc/refman/5.5/en//charset-connection.html)）：

> ucs2、utf16 和 utf32 不能用作客户端字符集，这意味着它们不适用于 SET NAMES 或 SET CHARACTER SET。

看起来 utf16 字符没有正确存储。

# javascript - 我总是得到最后一个 onload 函数，但我需要两者，是否有任何其他替代选项而不删除任何 window.onload 事件？

> ID：12513544
> 
> 赞同：0
> 
> 时间：2012-09-20T13:20:41.520
> 
> 标签：javascript, javascript-events

我总是得到最后一个 onload 函数，但我需要两者，是否有任何其他替代选项而不删除任何 window.onload 事件？

```
window.onload = function(){
    alert("first");
}

window.onload = function(){
    alert("second");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:22:19.277

声明第二个时，可以与第一个链接。

```
var lastOnLoad = window.onload;
window.onload = function(){
    lastOnLoad();
    alert("second");
} 
```

您还可以制作这样的实用程序：

```
function addOnLoad(f) {
    var lastOnLoad = window.onload;
    window.onload = function() {
        lastOnLoad();
        f();
    }
} 
```

你会这样称呼它：

```
addOnLoad(function(){
    alert("first");
});

addOnLoad(function(){
    alert("second");
}); 
```

编辑：或者你可以简单地按照 ThiefMaster 的建议去做......（我会支持他！）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:23:27.210

最好的解决方案是注册事件侦听器，[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)而不是将其分配给`window.onload`：

```
window.addEventListener('load', function(event) {
    // your code
}, false); 
```

您可以多次执行此操作，它永远不会覆盖以前的侦听器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:26:40.733

试试这个：

```
window.addEventListener('load', function() {
    alert("first");
}, false)

window.addEventListener('load', function() {
    alert("second");
}, false) 
```

# vba - 在行中使用的最后一个单元格之后写入数据并沿列向下进行 vlookup 直到某个单元格

> ID：12513552
> 
> 赞同：1
> 
> 时间：2012-09-20T13:20:51.023
> 
> 标签：vba, excel, excel-2010

我正在尝试使用 vba 自动化一个 excel 过程。

从 2010 年开始，每个月都有一列（这可以无限延伸，或者至少在 excel 的限制内）。下面有大约 500 行带有数字数据。

所以，我想找到最后一列未使用（当前月份）并从 vlookup 中填充它下面的所有行。

谢谢。

* * *

工作代码！

```
With ActiveSheet.Range("IV42").End(xlToLeft)
    Dim iRow As Integer
    For iRow = 1 To 581

        Dim Lookup_Value, Table_Array, Col_Index, Range_Lookup As String
        Lookup_Value = "B42:B622"
        Table_Array = "'Current Rankings'!$B$2:$C$607"
        Col_Index = "2"
        Range_Lookup = "False"
        .Offset(iRow - 1, 0).Formula = "=VLOOKUP(" & Lookup_Value & "," & Table_Array & "," & Col_Index & "," & Range_Lookup & ")"

    Next iRow
End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:12:45.967

要查找最后一列，请使用`ActiveSheet.Range("IV1").End(xlToLeft)`. （假设你在第一行有值）

因此，要在使用的最后一列之后找到该列，您可以使用`ActiveSheet.Range("IV1").End(xlToLeft).Range("B1")`. 这将指向新月份列的第一个单元格。

然后你可以做一个简单的循环来填充列......你的代码应该看起来像：

```
With ActiveSheet.Range("IV1").End(xlToLeft).Range("B1")
    Dim iRow as Integer
    for iRow = 1 to 500

        Dim Lookup_Value, Table_Array, Col_Index, Range_Lookup
        Lookup_Value = ????
        Table_Array = ????
        Col_Index = ????
        Range_Lookup = ????

        .Offset(iRow-1,0).Formula = "=VLOOKUP(" & "," & _
            Lookup_Value & _"," & _
            Table_Array & "," & _
            Col_Index_Num & "," & _
            Range_Lookup & ")"

    next iRow
end with 
```

# jenkins - 超出声纳限制时使 Jenkins Build 不稳定

> ID：12513559
> 
> 赞同：5
> 
> 时间：2012-09-20T13:21:17.233
> 
> 标签：jenkins, sonarqube

我们正在从 Jenkins 运行 Sonar，并希望在超出 Sonar 限制时将构建标记为不稳定。我们已在质量配置文件中将适当的限制设置为警报。

我们认为我们可以使用 Build Breaker 将 Sonar 标记为失败（这会将这一事实放入 Jenkins 日志中），然后在这种情况下使用 Jenkins Post-build Groovy 脚本来使构建不稳定。

不幸的是，如果 Sonar 失败，Jenkins Sonar 插件会标记构建失败（并停止构建过程），并且 Jenkins 人员表示这是按设计的并将相关缺陷设置为“将无法修复”。

我还尝试将 Sonar 的日志记录设置为 Verbose，希望超出限制的事实会出现在日志中（因此我们可以再次使用构建后的 groovy 任务），但情况似乎也并非如此。

有什么见解吗？在这一点上，在我看来，最好的办法是创建一个 Build Breaker 的变体，它只报告警报但不会破坏构建，但如果可以避免的话，我宁愿不走自定义插件路线.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T16:03:17.753

好的，我们已经满意地解决了这个问题，尽管它确实需要一个自定义的 Sonar 插件。

我们创建了一个 BuildBreaker 版本（我们称之为 BuildWarner）。唯一的区别（除了插件名、包名、类名等）是 AlertThresholdChecker.java 的第 44 行从：

```
 fail("Alert thresholds have been hit (" + count + " times)."); 
```

到 ：

```
 logger.info("SONARTHRESHOLDSEXCEEDED - Alert thresholds have been hit (" + count + " times)."); 
```

一旦在 Sonar 中运行，如果任何警报命中达到错误阈值级别 ，Jenkins 控制台将包含短语**SONATHRESHOLDSEXCEEDED 。**

然后，安装 Jenkins Groovy Postbuild 插件。我们使用以下 Groovy 脚本：

```
if(manager.logContains(".*SONARTHRESHOLDSEXCEEDED.*")) {
     manager.addWarningBadge("Sonar Thresholds Exceeded")
     manager.createSummary("warning.gif").appendText("<h1>Sonar Thresholds Exceeded</h1>", false, false, false, "red")
     manager.buildUnstable()
} 
```

如果您愿意，也可以使用 Jenkins Text Finder 插件。

需要注意的是，Sonar 插件必须在 Groovy Post Build 或 Text Finder 插件之前。

希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T07:20:25.980

我们还创建了一个基于 Build Breaker 插件的 Sonar 插件，该插件会在出现错误或警告级别警报时`ERROR_THRESHOLD_EXCEEDED`记录到控制台。`WARNING_THRESHOLD_EXCEEDED`我们的 build warner 插件版本可以在[https://github.com/NitorCreations/sonar-build-warner-plugin找到](https://github.com/NitorCreations/sonar-build-warner-plugin)

此外，我们使用 Jenkins 控制台日志插件将构建标记为失败或不稳定。说明可在 github 站点上找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:25:17.433

目前您不能将构建标记为不稳定（只有失败可用）。在 Sonar 的用户邮件列表[http://sonar.15.n6.nabble.com/Marking-Sonar-Builds-td5001684.html](http://sonar.15.n6.nabble.com/Marking-Sonar-Builds-td5001684.html)上有一个相关的帖子可能会有所帮助

# java - 如何实现列表的高效视图？

> ID：12513564
> 
> 赞同：3
> 
> 时间：2012-09-20T13:21:31.823
> 
> 标签：java, list

我需要一个类为原始元素中的每个元素`HidingList`实现一个`List`位置的视图，有点说它是否应该包含在视图中。简单的解决方案是使用 a ，但是如果列表变大`BitSet`，我看不到如何实现的简单有效的方法。`hidingList.get(int index)`就像是

```
public T get(int index) {
    int realIndex = bitSet.nextSetBit(0);
    for (int i=0; i<index; ++i) {
        realIndex = bitSet.nextSetBit(realIndex+1);
    }
    return delegate.get(realIndex);
} 
```

看起来效率不高，我看不到像`bitSet.cardinality(int from, int to)`. 也许在番石榴或其他地方已经有我需要的东西了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:36:19.060

如果您想`get(int)`提高效率（即平均优于 O(N)），可以将位图替换为整数数组，其中索引表示视图列表的索引，索引处的值表示原始列表中的元素。

但是，除非您想`set(int, T)`写入原始列表（或类似的东西），否则您最好创建一个新列表而不是视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:45:13.337

您可以使用二进制搜索并`Integer.bitCount`至少在位数上实现对数时间复杂度（而您的解决方案在 O(n) 中）。首先，所有位的一半为 0。用于`Integer.bitCount`检索 1 的数量（此操作通常映射到机器指令，因此非常快）。如果检索到的数字大于您的索引，则仅将一半字节归为 0，如果较小，则将更多字节归零（通常的二进制搜索）。这将允许您以对数步数找到位置。

例如，我们在两个字节数中寻找索引 4（即第 5 个元素）`0010 1010 1110 1001`

第一步： `0010 1010 1110 1001`b = 8 > 5，清空所有字节的一半

第二步：`0010 1010 0000 0000`b = 3 < 5，仅空出 4 个字节

第三步：`0010 1010 1110 0000`b = 6 > 5，再清空两个字节

第四步：`0010 1010 1100 0000`b = 5 == 5，所以答案肯定在剩下的两个字节中。再空出一个 -> b = 4 -> 搜索到的位置必须是第 10 个字节。

尽管如此，维护索引列表会更快，但需要更多内存。除非您处于嵌入式设置中，否则内存不是一个太大的问题，您应该使用此解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:25:03.997

不同结构的效率很大程度上取决于您的访问模式。例如，相对于可见性更改的次数，隐藏列表的索引读取频率如何？

平均而言（假设可见性更改相对不频繁或可以批量更改） - 我的建议是创建一个新列表，该列表是原始列表的副本，其中隐藏元素已删除。原因：

*   您可以在 O(n) 时间内构建整个事物，每个项目只需 O(1)。
*   您可以保持 O(1) 访问，因为新列表将支持直接索引访问。扫描一个位集是 O(n)，这对于大型列表上的索引访问来说将是可怕的！
*   你可以让它不可变。不变的东西是好的。

否则，如果您希望能够在任意时间打开或关闭每个列表项的可见性，您可能需要实现自定义数据结构。使用二叉树可以获得 O(log n) 的隐藏、取消隐藏和索引查找性能。然而，我不知道有任何现有的实现 - 这是一个不寻常的要求！

# tridion - tridion 富文本区域 wcag 验证

> ID：12513565
> 
> 赞同：2
> 
> 时间：2012-09-20T13:21:34.987
> 
> 标签：tridion, tridion-2011

抱歉，如果这是一个相当简单的问题。我将富文本区域字段设置为 XHTML 过渡和 WCAG 优先级 2。我看到在富文本字段上的选项卡之间切换或保存组件时会自动发生某些验证/清理。但是，如果在成功保存后单击“验证”按钮，则 Tridion 会警告尚未在保存时自动更正/标记的验证错误，例如图像上缺少 alt 标记。是否可以指示 Tridion 强制执行单击“验证”按钮时发生的完整验证，以便在错误仍然存​​在时无法保存组件？

谢谢

菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:43:06.887

您需要注意，RTF 上发生了三种类型的验证：

文档类型验证（严格/过渡）发生在内容作者：

*   保存一个组件
*   按下验证按钮
*   更改格式区域中的选项卡

W3C 可访问性级别验证仅在以下情况下发生：

*   内容作者按下验证按钮。

您还可以定义一个 Filtering XSLT，每当用户：

*   保存一个组件
*   按下验证按钮
*   更改格式区域中的选项卡

如果您想在保存之前执行验证操作，我认为您最好的选择是通过 GUI 扩展路径，并在按下保存按钮时触发验证功能。但默认情况下，没有办法做到这一点。

# python - 用于测试文件夹内容的 Python unittest

> ID：12513567
> 
> 赞同：0
> 
> 时间：2012-09-20T13:21:36.353
> 
> 标签：python, unit-testing, function

我有一个项目，我需要编写一个模块，其中包含一个函数来检查当前工作目录的内容并打印出每个扩展名（“.txt”、“.doc”等）有多少文件的计数

然后我需要编写一个单独的模块来通过测试该函数是否给出正确的结果来验证。

```
import os
from collections import Counter

filenames = {}
extensions = []
file_counts = {}
extensions2 = {}

def examine(): 

    for filename in filenames:
        f = open(filename, "w")
        f.write("Some text\n")
        f.close()
        name, extension = filename.split('.')
        extensions.append(extension)

    extensions2 = dict(Counter(extensions))

    return extensions2 
```

这是测试：

```
import unittest
import tempfile
import os
import shutil
import examine_directory as examdir

class TestExamine(unittest.TestCase):
    def setUp(self):
        self.origdir = os.getcwd()
        self.dirname = tempfile.mkdtemp("testdir")
        os.chdir(self.dirname)

    examdir.filenames = {"this.txt", "that.txt", "the_other.txt","this.doc","that.doc","this.pdf","first.txt","that.pdf"}

def test_dirs(self):
    expected = {'pdf': 2, 'txt': 4, 'doc': 2}
    self.assertEqual(examdir.extensions2, expected, "Creation of files not possible")

def tearDown(self):
    os.chdir(self.origdir)
    shutil.rmtree(self.dirname) 

if __name__ == "__main__":
    unittest.main() 
```

我被困住了，我需要一些帮助。我收到一个 assertEqual 错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:50:46.780

您收到 assertEqual 错误，因为`examdir.extensions2`与 不同`expected`，这应该是您的第一个线索。尝试在断言调用之前打印出两者的值以验证这一点。

其次，我假设您在此处列出的第一个文件称为`examine_directory`? 查看那个文件，我看到 extensions2 被初始化为一个空的 dictionary `{}`。检查函数返回名为 extensions2的*局部变量的值，但是：*

1.  它不会将其分配给您的全局字典（我认为这是您所期望的行为）
2.  检查（）不会从您的测试脚本中调用

# asp.net - ASP.NET Web Api - 统一的 JSON Api

> ID：12513572
> 
> 赞同：1
> 
> 时间：2012-09-20T13:21:50.300
> 
> 标签：asp.net, asp.net-web-api, json.net, asp.net-4.5

我正在使用新的 ASP.Net 4.5 Web Api 编写 Api。[我的 Api 响应与fourSquare 的 Api Response Messages](https://developer.foursquare.com/overview/responses)
非常相似。 我的 api 应该总是响应这样的消息：

```
{
    Meta:
    {
        Code: "401"
        ErrorDetails: "Not Authorized!"
    }
    Response: "The Api Response Object or Text'
} 
```

意思是我应该**总是**返回 Http 状态码：**200 OK**
任何错误指示都将位于“Meta”标签中。因此，我为所有 Json 请求实现了一个 MediaFormatter。看起来像这样：

```
 public class MyApiResponseFormatter : JsonMediaTypeFormatter
{
    public MyApiResponseFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/json"));
    }

    public override bool CanReadType(Type type)
    {
        return true;
    }

    public override bool CanWriteType(Type type)
    {
        return true;
    }

    public override Task WriteToStreamAsync(Type type, object value, System.IO.Stream writeStream, System.Net.Http.HttpContent content, System.Net.TransportContext transportContext)
    {
        HttpContext.Current.Response.StatusCode = (int)HttpStatusCode.OK;
        return Task.Factory.StartNew(() =>
        {
            ApiResponse apiResponse = CreateApiResponse(type, value);

            using (StreamWriter requestWriter = new StreamWriter(writeStream))
            {
                requestWriter.Write(JsonConvert.SerializeObject(apiResponse, new JsonSerializerSettings
                {
                    NullValueHandling = NullValueHandling.Ignore
                }));
            }
        });
    }

    private ApiResponse CreateApiResponse(Type type, object value)
    {
        #region Handle Errors
        Type exceptionType = null;
        ErrorDetails errorDetails = null;
        HttpStatusCode statusCode = HttpStatusCode.OK;
        if (type == typeof(HttpError))
        {
            exceptionType = Type.GetType(((System.Web.Http.HttpError)value)["ExceptionType"].ToString());
            errorDetails = new ErrorDetails()
            {
                Message = ((System.Web.Http.HttpError)value)["ExceptionMessage"].ToString(),
                StackStace = ((System.Web.Http.HttpError)value)["StackTrace"].ToString()
            };

            // get the status code
            if (exceptionType == typeof(UnauthorizedAccessException))
            {
                statusCode = HttpStatusCode.Unauthorized;
            }
            else
            {
                statusCode = HttpStatusCode.BadRequest;
            };
        }
        #endregion

        ApiResponse apiResponse = new ApiResponse()
        {
            Meta = new MetaData()
            {
                Code = (int)statusCode,
                ErrorType = exceptionType,
                ErrorDetails = errorDetails
            },

            Notifications = null,
            Response = type == typeof(HttpError) ? null : value
        };
        return apiResponse;
    }

    public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, System.Net.Http.HttpContent content, IFormatterLogger formatterLogger)
    {
        return base.ReadFromStreamAsync(type, readStream, content, formatterLogger);
    }
} 
```

一切似乎都很好，除了如果引发异常，响应上的状态代码不是 200（它是 500 - 内部服务器错误）
所以我添加了这行代码，看起来像一个 hack：
`HttpContext.Current.Response.StatusCode = (int)HttpStatusCode.OK;`

在这个解决方案中感觉有些不对劲。任何有经验的关于如何实现这样的 Api 的 web api 见解将不胜感激。谢谢。

# jquery-ui - 骨干.js jquery ui 可调整大小慢

> ID：12513576
> 
> 赞同：2
> 
> 时间：2012-09-20T13:22:02.697
> 
> 标签：jquery-ui, backbone.js, jquery-ui-resizable

我正在使用backbone.js 作为我的框架来制作一个谜题。

我已经这样设置了：

*   有`PuzzleBoard`一个模型和一个视图。
*   该`PuzzleBoard`模型包含 200`Piece`秒的集合。
*   每个`Piece`都有一个模型和一个视图。
*   每个`PieceView`都是可拖动和调整大小的（我的拼图是非常规的，让人们调整大小）。
*   每个`PieceView`都有一组功能。
*   还有一些 UI 菜单，每个菜单都有一个模型和一个视图。

我正在使用[jquery UI resizable](http://jqueryui.com/demos/resizable/)，问题是**resizable 真的很慢**。有任何想法吗？我的设置在概念层面有什么问题吗？我想知道是否是因为我在内存中有太多实例化的pieceViews？`pieceView`每个实例化都有一组通用`PieceView`函数的副本这一事实是否会导致任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:58:27.753

事实证明，一些其他代码被绑定到窗口调整大小，并且调整 div 大小触发了该代码。

# tun - 在 Windows 中使用 TUN 驱动程序

> ID：12513580
> 
> 赞同：6
> 
> 时间：2012-09-20T13:22:22.967
> 
> 标签：tun

我已经在我的 Windows 7 机器上安装了*TAP-WIN32 Adapter V9 。*我想使用 TUN 从接口中读取 IP 数据包。我遵循了来自 [http://www.varsanofiev.com/inside/using_tuntap_under_windows.htm的 C# 示例](http://www.varsanofiev.com/inside/using_tuntap_under_windows.htm)

我修改了如下代码

```
IntPtr ptun = Marshal.AllocHGlobal(8);       
Marshal.WriteInt32(ptun, 0, 0x0a030001);
Marshal.WriteInt32(ptun, 4, unchecked((int)0x00ffffFF));
bool val = DeviceIoControl (ptr, TAP_CONTROL_CODE (5, METHOD_BUFFERED) /*POINT TO POINT */, ptun, 8,ptun, 8, out len, IntPtr.Zero); 
```

但是，我似乎仍然没有收到 IP 数据包。我在另一端运行了 tcpdump，它抱怨*“Wrong link layer encapsulation”*。

这是尝试从 TUN 接口获取 IP 数据包的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-25T19:43:12.013

不，这不是正确的方法。很遗憾，但是 tap/tun 驱动程序只能在 windows 的 tap 模式下工作。这意味着您可以接收以太网数据包，而不是IP。让我们考虑一下当你有一些目标地址 X 的 IP 数据包的情况。在以太网层发送这个数据包之前，操作系统会创建一个 ARP 查询，嘿，IP X，你的 MAC 是多少？在这种情况下，您必须实现 ARP 层。ARP协商完成后，系统会发送以太网封装的IP包。

# video - 如何获得 H.264 帧的 DTS 和 PTS？

> ID：12513583
> 
> 赞同：1
> 
> 时间：2012-09-20T13:22:31.073
> 
> 标签：video, video-streaming, h.264

我使用 v4l2 从 Logitech C920 网络摄像头读取 H.264 帧。我怎样才能在我的程序中获得他们的 PTS 和 DTS？例如，我可以使用此函数确定帧类型：

```
// < 0 = error
// 0 = I-Frame
// 1 = P-Frame
// 2 = B-Frame
// 3 = S-Frame
int VOutVideoStream::getVopType( const std::vector<uint8_t>& image )
{
    if( image.size( ) < 6 )
        return -1;
    unsigned char *b = (unsigned char*)image.data( );

    // Verify NAL marker
    if( b[ 0 ] || b[ 1 ] || 0x01 != b[ 2 ] ) {
        ++b;
        if ( b[ 0 ] || b[ 1 ] || 0x01 != b[ 2 ] )
            return -1;
    }

    b += 3;

    // Verify VOP id
    if( 0xb6 == *b ) {
        ++b;
        return ( *b & 0xc0 ) >> 6;
    }

    switch( *b ) {
    case 0x65: return 0;
    case 0x61: return 1;
    case 0x01: return 2;
    }

    return -1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T16:03:28.973

PTS 和 DTS*不是*H.264 比特流的一部分。

通常，PTS 与从相机抓取的帧相关联。如果您的相机不提供​​ API 来获取帧的 PTS 和 DTS，您可以使用类似`gettimeofday()`帧的 pts 之类的东西。

在相机已经输出 H.264 编码帧的情况下，您还需要考虑用于编码的 GOP 结构，尽管我猜测如果相机已经输出 H.264，则可能需要获取 API持有该信息。

# php - How to assign different shipping rate to different product in the same cart

> ID：12513592
> 
> 赞同：0
> 
> 时间：2012-09-20T13:23:01.783
> 
> 标签：php, magento

I am using the `magento store` and I want to assign different shipping rate for the products in same cart. But not getting how to. Means if i am having the products A,B,C in my cart then for the product A it will have shipping rate 5.50 and for each next product B and C it would be 1.50\.

Is this possible?

# javascript - 如何防止Highcharts中的列重叠

> ID：12513593
> 
> 赞同：5
> 
> 时间：2012-09-20T13:23:03.287
> 
> 标签：javascript, json, highcharts

我相信这是一个一般问题，不需要我的 highcharts 数据中的太多信息。

我想防止列相互堆叠/重叠，我该怎么做？

请参阅下面的图片链接了解现在的情况

[http://highslide.com/forum/download/file.php?id=3157](http://highslide.com/forum/download/file.php?id=3157)

jsfiddle：http: [//jsfiddle.net/Dzs5q/](http://jsfiddle.net/Dzs5q/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T10:11:25.443

请尝试在此处重现错误@ [http://jsfiddle.net/jugal/bgNBG/](http://jsfiddle.net/jugal/bgNBG/)

默认情况下，如果列太多，Highcharts 会巧妙地减小列的宽度，以避免重叠。

如果您通过指定覆盖了上述默认行为，这些列将趋于重叠[`column.pointWidth`](http://api.highcharts.com/highstock#plotOptions.column.pointWidth)

```
 column: {           
        pointWidth : 10
    } 
```

例如： @http: [//jsfiddle.net/jugal/bgNBG/2/](http://jsfiddle.net/jugal/bgNBG/2/)

所以为了避免重叠，我看到你有两个选择。

**选项1。** 删除 这将使列更薄以便不重叠， 例如：@ [http://jsfiddle.net/jugal/bgNBG/](http://jsfiddle.net/jugal/bgNBG/)[`column.pointWidth`](http://api.highcharts.com/highstock#plotOptions.column.pointWidth)

**选项 #2。** 使用 这将有助于保持列的宽度不变，但会减少（通过对它们进行分组）列数以避免混乱/重叠。 [`column.dataGrouping`](http://api.highcharts.com/highstock#plotOptions.column.dataGrouping)

```
dataGrouping = {
    groupPixelWidth: 40, // Minimum width for each column
    units: [[            // Permissible groupings
        'day',
        [1, 2, 3,4,5,6]  // 1,2,3,4,5,6 days may be grouped into 1 column
        ]]
} 
```

例如： @http: [//jsfiddle.net/jugal/JraJW/4/](http://jsfiddle.net/jugal/JraJW/4/)
类似问题[@https ://stackoverflow.com/a/12354111/1566575](https://stackoverflow.com/a/12354111/1566575)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T17:24:05.213

控制列并确保它们不会相互堆叠/重叠的最佳方法是控制图表的宽度。您可以在包含`<div>`.

*   [**CSS: min-width**](http://jsfiddle.net/6BbSP/) ~ 允许 div 改变大小，但限制它低于一定宽度。你这样做是因为你知道一旦它低于那个宽度，东西就会开始模糊在一起并且不可读。
*   [**CSS: width**](http://jsfiddle.net/6BbSP/1/) ~ 强制图表的宽度允许为某个值。
*   [**CSS：没有设置宽度**](http://jsfiddle.net/6BbSP/2/)~注意如果你把浏览器窗口缩小到很远，它开始使图表不可读。

通过控制包含 div 的宽度并按照 c0deNinja 的建议旋转标签，您可以防止大多数堆栈重叠/重叠问题。但是，如果您的图表有许多系列/数据点，即使这样也无济于事。

​</p>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-30T10:15:20.343

我的问题很相似，将项目移动到辅助轴等的解决方案无济于事。然后我发现我的 x 轴被识别为连续体（在这种情况下：日期），并且两个重叠的列当然共享相同x 值。

我通过选择x轴解决了这个问题，找到名为“轴类型”的选项并取消选择“根据数据自动选择”将其更改为“文本轴”。这让我的专栏并排。

您的问题有点过期，但可能会有所帮助。

# css - css files not getting rendered in firefox

> ID：12513597
> 
> 赞同：0
> 
> 时间：2012-09-20T13:23:19.050
> 
> 标签：css, firefox, iis-7.5

I have my project deployed on iis 7.5\. Now when I try to access it from any other machine in firefox ( in IE its seems to be working fine) , all the files are getting rendered (html, js) except the css files.

By going through the other posts, I have checked that the MIME type for .css files is there in my iis MIME settings.

I am including my css file in my head section as :

```
@Html.CssInclude("jquery.ui.core.css") 
```

In the response header, I am getting -
Content-Type text/html; charset=utf-8

I am including my javascript files in the same way:

```
@Html.ScriptInclude("jquery-1.7.min.js") 
```

But, in my response headers, I am getting
Content-Type application/x-javascript

I am not getting why is the behaviour different for css files.. Please help..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:27:15.670

这可能是编码问题。当您包含具有不同字符编码的文件时，浏览器可能会感到困惑。

检查源文件的编码并确保它们都相同。在 Windows 中最简单的方法是将它们保存为 ASCII（例如使用记事本）。

# emacs - 如何从便携式驱动器运行 Emacs 和 Cygwin

> ID：12513600
> 
> 赞同：1
> 
> 时间：2012-09-20T13:23:31.147
> 
> 标签：emacs, cygwin, portable-applications

我正在从便携式驱动器（USB 记忆棒）成功运行 Emacs，但是当我尝试使用 diff 函数时遇到了麻烦。我已经安装了 cygwin，当我将 diff.exe 的路径添加到 Windows 中的环境变量 PATH 时，它可以与 Emacs 一起使用。问题是，使用这种方法，我必须在我想使用的每台计算机上编辑环境变量。不好。

然后我尝试将它从我的 site-start.el 中添加到路径变量中。当我从 Emacs 中检查变量时添加了路径，但 Emacs 仍然找不到 diff 工具。

有谁知道如何解决这个问题？

提前致谢

——马丁

**编辑：** 我的 site-lisp.el 现在看起来像这样，到目前为止没有任何效果（除了手动将路径添加到 PATH 环境变量中）：

```
;
; Get drive letter
;
(defvar usb-drive-letter (substring data-directory 0 2)) 

;
; Add cygwin-folder to path and exec-path
;
(defvar cygwin-folder (concat usb-drive-letter "/PortableApps/CygwinPortable/App/Cygwin/bin/"))
(setenv "PATH" (concat (getenv "PATH") ";" cygwin-folder))
(setq exec-path (append exec-path cygwin-folder)) 
```

我的文件夹如下：

```
[root of usb stick]
\PortableApps\Emacs\bin  (including runemacs.exe)
\PortableApps\CygwinPortable\App\Cygwin\bin   (including diff.exe) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:27:08.350

您正在设置哪个“路径变量”？IIUC 你想设置`exec-path`Lisp 变量（你可能还想设置`PATH`环境变量，但是那个不会影响 Emacs 对可执行文件的搜索，它只会传递给子进程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:29:44.407

尝试：
(setenv "PATH" (concat "d:/path/to/bin;" (getenv "PATH")))
注意路径分隔符应该是 ; 而不是：在windows下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:06:13.673

您可以尝试通过使用完整路径设置变量“diff-command”来明确指向 diff 命令。

```
(setq diff-command "full/path/to/diff.exe") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T13:58:34.707

我最终将 diff.exe 移动到 Emacs bin 文件夹。我发现没有其他东西在起作用。现在我唯一的问题是血腥的 nodosfilewarning 变量来阻止 cygwin 在我的 ms-dos 路径上抱怨......

干杯

# asp.net-mvc - ASP MVC + EF Code First - 数据注释是否仅用于验证目的？

> ID：12513606
> 
> 赞同：2
> 
> 时间：2012-09-20T13:23:47.717
> 
> 标签：asp.net-mvc, entity-framework, annotations, ef-code-first

在我的应用程序中，我有数据库模型和视图表单模型。当我的视图表单模型属性中有用于验证输入的数据注释时，我是否需要在我的数据库模型属性中复制这些注释？我的意思是，当我`[Range(5,10)]`在某些属性上指定类似的内容时，它会对数据库进行任何更改吗？或者也许是`context.SaveChanges()`在将最终模型保存到数据库之前使用这些注释来验证最终模型？

重新假设：当我的视图模型类中已经有数据注释时，是否有必要在我的数据库模型类中放置数据注释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:40:16.537

当您尝试将更改保存到数据库时，EF 将使用 DataAnnotations 验证您的模型，因此它只是针对无效数据的另一层保护。如果输入了无效数据，Context 将返回 EntityValidationErrors。

一些 DataAnnotations 转换为 SQL 更新（Required 和 MaxLength 立即跳到脑海），但其他人没有。

# uinavigationbar - Change title of UINavigationBar

> ID：12513607
> 
> 赞同：0
> 
> 时间：2012-09-20T13:23:51.383
> 
> 标签：uinavigationbar, title

I've created a view-based application. I've placed a Navigation Bar on the view and two buttons. I'd like to change the title of the nav bar after pressing the buttons. In IB I've connected the buttons with the corresponding actions. Debugging shows that the actions are getting called but the title of the nav bar is not changed.

Kindly help!

```
//
//  NavBarViewController.h

#import <UIKit/UIKit.h>

@interface NavBarViewController : UIViewController {

}

-(IBAction) clickedOne: (id)sender;
-(IBAction) clickedTwo: (id)sender;

@end
//
//  NavBarViewController.m

#import "NavBarViewController.h"

@implementation NavBarViewController

-(IBAction) clickedOne: (id)sender {
    self.navigationItem.title = @"1";
}

-(IBAction) clickedTwo: (id)sender {
    self.navigationItem.title = @"2";
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:35:29.367

我已经找到了。我使用了 UINavigationItem 并将 IB 中的 IBOutlet 与 UINavigationItem 连接起来。

```
//
//  NavBarViewController.h

#import <UIKit/UIKit.h>

@interface NavBarViewController : UIViewController {
  UINavigationItem *navBar;
}

@property (nonatomic, retain) IBOutlet UINavigationItem *navBar;

-(IBAction) clickedOne: (id)sender;
-(IBAction) clickedTwo: (id)sender;

@end

//
//  NavBarViewController.m

#import "NavBarViewController.h"

@implementation NavBarViewController

@synthesize navBar;

-(IBAction) clickedOne: (id)sender {
    navBar.title = @"1";
}

-(IBAction) clickedTwo: (id)sender {
    navBar.title = @"2";
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

# c# - Linq 查询，如何检查空值并使用值 0 代替空值？

> ID：12513621
> 
> 赞同：4
> 
> 时间：2012-09-20T13:24:21.727
> 
> 标签：c#, linq

我有以下查询：

```
var ordersPlacedBeforeOneHourList = ordersPlacedBeforeOneHourAgo.Select(order => order.Promo.PercentOff * (double) order.TotalCost).ToList(); 
```

我的一些`order.Promo.PercentOff`是空的。如何更改上面的行，以便如果`order.Promo`为空，它的行为就好像值是`0`？

这个想法是，如果没有应用特定的促销，我会将促销的成本计算为`0 * order.TotalCost`（始终为 0），然后继续计算下一个值以计算`orders.Promo`可能不为空的位置，然后继续.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T13:25:39.720

空[合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)是您的朋友。

```
(order.Promo.PercentOff ?? 0) 
```

# c++ - 记住状态 c++

> ID：12513622
> 
> 赞同：0
> 
> 时间：2012-09-20T13:24:36.243
> 
> 标签：c++, function, object, state

我的应用程序让我调用了一堆回调，这些回调需要知道它们的最后状态或最后调用的状态。一个简单的例子是两次连续调用之间的时间差。

我知道 C++ 中的函数对象是一种通用的方法。但我是一个 nOOb，不知道如何设置这个模式。任何帮助或特定的简单代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:28:51.060

只需创建一个实现 operator() 的类。例如，

```
class F {
    int state;
public:
    int operator()(/*any parameters would go here*/){
        return state++;
    }
    F() : state(0) {}
}; 
```

然后，您可以创建可调用并保留状态的实例。

```
F f;
f(); //returns 0
f(); //returns 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:33:25.627

如果你想要一个好的状态框架而不是使用 FSM。很少有像这样的流行：

[http://boost-extension.redshoelace.com/docs/boost/fsm/doc/reference.html](http://boost-extension.redshoelace.com/docs/boost/fsm/doc/reference.html)

和

[http://www.boost.org/doc/libs/1_51_0/libs/msm/doc/HTML/index.html](http://www.boost.org/doc/libs/1_51_0/libs/msm/doc/HTML/index.html)

它对新手来说有点复杂，但你会学到很多东西。您甚至可以实现自己的虚拟版本（没那么复杂）。

Fsms 在嵌入式世界中非常有用，在示例类中可以有 20 个状态。

# javascript - jQuery 这个和这些

> ID：12513628
> 
> 赞同：0
> 
> 时间：2012-09-20T13:24:55.097
> 
> 标签：javascript, jquery, function, this

有一个很好的标准 jQuery 函数用于在链接上切换类。想象一个新的背景颜色被添加到链接中。

```
$(document).ready(function(){
        $('.blocklink a').click(function(){
            $(this).parent().find('a').removeClass('active');
            $(this).addClass('active');
            return false
        });
    }); 
```

很简单，但我想知道我们是否可以为诸如此类的脚本节省大量时间，因为考虑到需要这样的事情的频率。--`these`

```
$(document).ready(function(){
            $('.blocklink a').click(function(){
                $(these).removeClass('active');
                $(this).addClass('active');
                return false
            });
        }); 
```

有没有一种方法可以创建术语这些作为填充符来填充`.click(function .scroll(function .mouseenter(function`等...等中指定的初始元素组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:27:01.650

如果您不希望元素动态更改（即您不会添加或删除它们中的任何一个），那么您可以缓存选择器的结果：

```
$(document).ready(function() {
    var $these = $('.blocklink a');
    $these.click(function() {
        $these.removeClass('active');
        $(this).addClass('active');
        return false
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:28:50.247

您不会节省*大量*费用，但您可以缓存`$('.blocklink a')`;返回的 jQuery 对象。

```
$(document).ready(function() {
    var $these = $('.blocklink a').click(function() {
        $these.removeClass('active');
        $(this).addClass('active');
        return false
    });
}); 
```

FWIW，如果您对性能感兴趣，您当前在*所有*后代中搜索的选择器`a`，但从您看来`$(this).parent()`，您只需要孩子。

考虑到这一点，您只能使用[`>`选择器](http://api.jquery.com/child-selector/)遍历子代（而不是后代） ；

```
$(document).ready(function() {
    var $these = $('.blocklink > a').click(function() {
        $these.removeClass('active');
        $(this).addClass('active');
        return false
    });
}); 
```

此外，[`children()`](http://api.jquery.com/children)搜索children，where-as[`find()`](http://api.jquery.com/find)搜索所有后代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:28:13.900

简单地说：没有。

但是您可以使用[`.siblings()`](http://api.jquery.com/siblings/)ti 稍微简化一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:37:26.127

你能用一个函数吗？这将防止您影响其他 .blocklink 元素中的锚点

```
$('.blocklink a').click(function(){
    parentAnchors(this).removeClass('active');
    $(this).addClass('active');
    return false
});

function parentAnchors(elem){
    return $(elem).parent().find('a');
} 
```

# google-oauth - Upgrade Google OAuth 1.0 token to OAuth2

> ID：12513629
> 
> 赞同：4
> 
> 时间：2012-09-20T13:25:04.027
> 
> 标签：google-oauth

Is there any way to upgrade the Google Oauth token and secret obtained using OAuth 1.0 to OAuth2 access token?

My application is having around 800+ Google users and if each user needs to go through the whole OAuth process again, it will be painful for them.

Haven't seen any posts regarding this anywhere. Any help would be much appreciated as I have already moved my app to OAuth2 and need a way out for these users asap.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-24T19:57:22.907

最近，Google 为开发人员实施了一种迁移路径，可以将 OAuth1 授权迁移到 OAuth2 授权中。查看[Google 的迁移文档](https://developers.google.com/accounts/docs/OAuth_ref#migration)。

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T14:26:20.510

**编辑：这不再是真的，请参阅 Miguel Andres 的回答**

不，它们是两个完全不同的系统，因此无法将 OAuth 1.0 凭据交换为 OAuth 2.0 凭据。

通过一些工作，您可以让新用户通过 OAuth 2.0 流程并使用 OAuth 2.0 凭据，然后慢慢开始将老用户迁移到批量使用 2.0。

# javascript - 循环“FOR”之间的Javascript区别

> ID：12513630
> 
> 赞同：0
> 
> 时间：2012-09-20T13:25:07.117
> 
> 标签：javascript, dom

HTML：

```
<body>
  <canvas id="canvas1"></canvas>
  <canvas id="canvas2"></canvas>
</body> 
```

Javascript：

```
window.onload = function() {
  var canvasElements = document.getElementsByTagName("canvas");
  for ( var index in canvasElements) {
  }
  for ( var index = 0; index < canvasElements.length; index++) {
  }
} 
```

这两个循环没有相同的迭代次数。你知道为什么吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:25:07.117

`document.getElementsByTagName("canvas")`返回具有一个属性“length”和两个方法“item”和“namedItem”的 HTMLCollection。

所以 FOR ... IN 循环遍历该集合中的项目和 HTMLCollection 的成员。
所以有5次迭代：

*   每个 HTMLElement 2 次迭代，这里是 canvasElement
*   eahc 方法的 2 次迭代：item、namedItem
*   属性的 1 次迭代：长度

for(...;...;...) 循环仅迭代项目，因为 document.getElementsByTagName("canvas")[index] 引用一个项目

希望这个回应是明确的！
否则请询问更多信息...

一些参考资料：

*   https://developer.mozilla.org/en-US/docs/DOM/HTMLCollection
*   https://developer.mozilla.org/en-US/docs/DOM/HTMLElement
*   http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#htmlelement
*   http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-58190037
*   http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-75708506

# haskell - Haskell 将列表的内容作为参数传递

> ID：12513635
> 
> 赞同：1
> 
> 时间：2012-09-20T13:25:23.910
> 
> 标签：haskell

> **可能重复：**
> [为什么在haskell中不允许这样的函数定义？](https://stackoverflow.com/questions/6168880/why-is-such-a-function-definition-not-allowed-in-haskell)

再会！

我正在尝试编写/查找将任意有限大小列表转换为函数参数的函数 g，例如

```
 g k [a,b,c,d] = k a b c d
    g f [a,b,c] = f a b c = ((((f) $ a) $ b) $ c) 
```

语法上看起来像`g = foldl ($) f`，但编译器合理地未能应用该函数，回答：

```
 ghci> let (><) f = foldl ($) f
     <interactive>:1:19:
     Occurs check: cannot construct the infinite type: b = b1 -> b
     Probable cause: `$' is applied to too many arguments
     In the first argument of `foldl', namely `($)'
     In the expression: foldl ($) f 
```

所以我无法产生一些有效的实现。你有什么想法？先感谢您！

# javascript - 网站的奇怪挂断和加载问题。（去吧爸爸）

> ID：12513639
> 
> 赞同：4
> 
> 时间：2012-09-20T13:25:35.883
> 
> 标签：javascript, html, css

[BuyTack.com](http://www.buytack.com)

在过去的几周里，我一直在回去重新更新我的网站。它是一个朋友给我的，我一直在做一些小改动，以保持它有点旧的外观，分辨率更高，并清理了 HTML5 代码。

我最近的问题是，我一直在通过在我的网站上启用压缩、加载时间以及在许多网站推荐我的地方移动一些代码来实现 SEO 优化和用户体验优势。

结束正文标记之前的 Javascript，头部的 css，通过 Photoshop 压缩的照片。

现在的问题是，由于我最近更改并编辑了我的 .htaccess 文件以允许压缩，因此不断刷新或一致使用搜索栏会导致极端挂断（20 秒或更长时间），然后页面将加载时缺少图片（直到再次刷新）或其中一个脚本运行时间过长。

提供一些额外的细节：

*   csSearchPro 是很久以前用 perl 制作的。最近它做得很好，直到我开始搞乱压缩和我添加到网站的所有其他 JS 片段。

*   HTML5Shiv 是为 IE 7/8 添加的，因为它们仍然是最高的浏览器：用户比率。

**问题** 与压缩前相比，压缩后网站挂断的原因是什么？为什么多次加载页面时搜索栏/图像表现得很奇怪？

如果您需要更多信息，请询问。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:46:17.420

您的整个服务器*响应*缓慢尝试检查您的 .htaccess 和权限。您还应该对脚本和样式表进行分组，如下所示：

```
<!-- CSS -->
<link rel="stylesheet" href="/css/one.css" />
<link rel="stylesheet" href="/css/two.css" />
<!-- JS -->
<script type="text/javascript" src="/js/one.js"></script>
<script type="text/javascript" src="/js/two.js"></script> 
```

这将允许它们异步加载，即所有样式表将一次加载，然后一次加载所有脚本。我通常做的是将 jQuery 放在标题中，以便我可以内联使用它，然后将其余脚本合并到一个文件中（如果可能，将每个脚本放入文档准备好的处理程序中，你不会有变量问题）在页脚。

# mysql - 将分隔字符串拆分为存储过程中的变量

> ID：12513643
> 
> 赞同：0
> 
> 时间：2012-09-20T13:25:44.697
> 
> 标签：mysql, sql

> **可能重复：**
> [Mysql 可以拆分列吗？](https://stackoverflow.com/questions/1096679/can-mysql-split-a-column)

我打算将一个逗号分隔的字符串从我的 java 代码中传递给我的`mysql`存储过程，该字符串由过滤器参数组成。这将由`IN`过程的参数之一获取。

我想将此逗号分隔的字符串拆分为单独的变量并在不同的查询中使用它们。

在谷歌搜索中，我发现[了这个 MySQL 子字符串函数](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)

但是它有一个问题：

```
mysql> SELECT SUBSTRING_INDEX('www.mysql.com', '.', 2);
    -> 'www.mysql' 
```

但我想要`www`, `mysql`，`com`没有规定将子字符串从第一个分隔符获取到下一个分隔符，依此类推......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:34:10.743

MySQL 以及其他 RDBMS 不提供此类功能。

您正在寻找的是[一个](http://www.montrealseocompany.com/2012/04/17/mysql-split-string-into-rows-function/)功能齐全的分离器功能。

你想要什么已经在这里被问了好几次了。

[在这里](https://stackoverflow.com/questions/1096679/can-mysql-split-a-column)，[这里](https://stackoverflow.com/questions/4703418/mysql-split-string)和[这里](https://stackoverflow.com/questions/11008577/how-to-split-a-string-field-sentence-in-mysql-to-words)你有同样的问题。

# .net - 为默认 AppDomain 设置卷影复制的正确方法是什么

> ID：12513655
> 
> 赞同：9
> 
> 时间：2012-09-20T13:26:44.113
> 
> 标签：.net, appdomain, shadow-copy, appdomainsetup

有关[我可以使默认 AppDomain 使用某些程序集的卷影副本吗？](https://stackoverflow.com/q/1373199/1684064)，它描述了在特定目录的默认 AppDomain 中激活卷影复制的有效解决方案。

基本上它说使用这些简单的方法：

```
AppDomain.CurrentDomain.SetShadowCopyPath(aDirectory);
AppDomain.CurrentDomain.SetShadowCopyFiles(); 
```

但是因为这里使用的方法被标记为过时，所以我想知道现在完成相同操作的正确方法是什么。警告消息提示：

> 请调查 AppDomainSetup.ShadowCopyDirectories 的使用情况

AppDomain 有一个称为此类型的成员，`SetupInformation`它可能会将您带到这个简单的实现

```
AppDomain.CurrentDomain.SetupInformation.ShadowCopyDirectories = aDirectory;
AppDomain.CurrentDomain.SetupInformation.ShadowCopyFiles = "true"; 
```

不幸的是，这没有效果。所以问题是，有没有办法改变当前 appdomain 的 AppDomainSetup 来激活卷影复制？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T15:57:20.400

据我所知，这些方法仅适用于 .NET Framework 1.1 版。对于所有更高版本，您不能在主 AppDomain 上启用卷影复制。您需要创建一个新`AppDomain`的并进行适当的设置。一个简单的方法是创建一个加载器应用程序，它简单地：

*   **创建一个启用了卷影复制的新 AppDomain**。为此，您将不得不使用采用AppDomainSetup[参数](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.aspx)的[AppDomain.CreateDomain的重载之一。](http://msdn.microsoft.com/en-us/library/system.appdomain.createdomain.aspx)
*   **使用[AppDomain.ExecuteAssembly](http://msdn.microsoft.com/en-us/library/system.appdomain.executeassembly.aspx)方法**执行您的主应用程序。****

 **[可以在应用程序代码项目的影子复制](http://www.codeproject.com/Articles/29961/Shadow-Copying-of-Applications)文章中找到一个很好的起点。以下程序摘自文章，稍作修改（未指定缓存路径：

```
using System;
using System.IO;

namespace Loader
{
    static class Program
    {
        [LoaderOptimization(LoaderOptimization.MultiDomainHost)]
        [STAThread]
        static void Main()
        {
            /* Enable shadow copying */

            // Get the startup path. Both assemblies (Loader and
            // MyApplication) reside in the same directory:
            string startupPath = Path.GetDirectoryName(
                System.Reflection.Assembly
                .GetExecutingAssembly().Location);

            string configFile = Path.Combine(
                startupPath,
                "MyApplication.exe.config");
            string assembly = Path.Combine(
                startupPath,
                "MyApplication.exe");

            // Create the setup for the new domain:
            AppDomainSetup setup = new AppDomainSetup();
            setup.ApplicationName = "MyApplication";
            setup.ShadowCopyFiles = "true"; // note: it isn't a bool
            setup.ConfigurationFile = configFile;

            // Create the application domain. The evidence of this
            // running assembly is used for the new domain:
            AppDomain domain = AppDomain.CreateDomain(
                "MyApplication",
                AppDomain.CurrentDomain.Evidence,
                setup);

            // Start MyApplication by executing the assembly:
            domain.ExecuteAssembly(assembly);

            // After the MyApplication has finished clean up:
            AppDomain.Unload(domain);
        }
    }
} 
```

你不得不：

*   替换`MyApplication.exe`为您的可执行程序集的名称。
*   替换`MyApplication`为应用程序的名称。
*   替换`MyApplication.exe.config`为您的应用程序配置文件的名称。如果你没有，那么你不需要设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-08T09:34:08.193

您不需要创建单独的应用程序。您可以在主方法中生成子域或根据`AppDomain.CurrentDomain.IsDefaultAppDomain()`值调用实际的主方法：

```
public static void Main(string[] args)
{
    if (AppDomain.CurrentDomain.IsDefaultAppDomain())
    {
        // Loader
        var entryPoint = System.Reflection.Assembly
            .GetExecutingAssembly();

        var applicationName = entryPoint.GetName().Name;
        // Create the setup for the new domain:
        var setup = new AppDomainSetup();
        setup.ApplicationName = applicationName;
        setup.ShadowCopyFiles = "true"; // note: it isn't a bool

        // Create the application domain. The evidence of this
        // running assembly is used for the new domain:
        AppDomain domain = AppDomain.CreateDomain(
           applicationName,
            AppDomain.CurrentDomain.Evidence,
            setup);

        try
        {
            // Start MyApplication by executing the assembly:
            domain.ExecuteAssembly(entryPoint.Location, args);
        }
        finally
        {
            // After the MyApplication has finished clean up:
            AppDomain.Unload(domain);
        }
    }
    else
    {
        // Main
        ActualMain(args);
    }
}

public static int ActualMain(string[] args)
{
     //Hello-world!
} 
```**

# asp.net - ASP.NET 菜单呈现

> ID：12513657
> 
> 赞同：0
> 
> 时间：2012-09-20T13:26:54.313
> 
> 标签：asp.net, controls, rendering

我有一个带有 ASP.NET 菜单的页面。在用户导航应用程序并单击菜单上的 10/15 链接后，其呈现行为会发生变化。

在随机点击导航后，它开始以这种方式呈现：链接有点，没有样式

![在此处输入图像描述](../Images/ac6e4b78b08e25627527d2d24ebe4ba5.png)

然后，半秒后应用样式并且菜单看起来不错：

![在此处输入图像描述](../Images/02b7c34afe399438f2e5543642b5671c.png)

不是很好！

菜单标记定义看起来像这样：

```
 <asp:Menu ID="FrontEndMenu" CssClass="FrontEndMenuStyle"
                        StaticEnableDefaultPopOutImage="False" Font-Size="14px" 
                        Orientation="Horizontal" runat="server" StaticDisplayLevels="1" >
                    <StaticMenuItemStyle HorizontalPadding="6px" VerticalPadding="10px"/>
                    <DynamicHoverStyle BackColor="LightGreen"/>
                    <DynamicMenuItemStyle BorderColor="white" BorderStyle="Solid" BorderWidth="1px" CssClass="DynamicMenu" />
                    <Items>
                        <asp:MenuItem Text="Armonizzazione">
                                <asp:MenuItem  NavigateUrl="CalibrazioneRating.aspx?figura=BHR" Text="Rating"></asp:MenuItem>
                                <asp:MenuItem  NavigateUrl="CalibrazioneRating.aspx?figura=AC1" Text="Conferma Rating"></asp:MenuItem>
                        </asp:MenuItem>                        
                        <asp:MenuItem Text="Calibrazione">
                                <asp:MenuItem NavigateUrl="CalibrazioneRanking.aspx?figura=BHRL" Text="Ranking"></asp:MenuItem>
                                <asp:MenuItem NavigateUrl="CalibrazioneRanking.aspx?figura=AC2"  Text="Conferma Ranking"></asp:MenuItem>
                        </asp:MenuItem>
                        <asp:MenuItem  NavigateUrl="Approvatore.aspx" Text="Approvazione"></asp:MenuItem>
                        <asp:MenuItem  NavigateUrl="ElencoSchede.aspx?tipo=personali" Text="Schede personali"></asp:MenuItem>
                        <asp:MenuItem  NavigateUrl="ElencoSchede.aspx?tipo=dacompilare" Text="Schede da Completare"></asp:MenuItem>
                        <asp:MenuItem  NavigateUrl="ElencoSchede.aspx?tipo=definitive" Text="Schede definitive"></asp:MenuItem>
                        <asp:MenuItem  NavigateUrl="Ranking.aspx" Text="Distribuzione Delle Valutazioni"></asp:MenuItem>
                    </Items>
                </asp:Menu> 
```

和相对的CSS是：

```
.DynamicMenu
{
    color: white;
    display: block;
    font-family: Tahoma, Arial, Verdana, Helvetica;
    font-size: 14px;
    font-weight: bold;
    width: 150px;
    padding: 5px;
    border-width: 1px !important;
    border-color: white !important;
    border-style: solid !important;
    background-color: #76c773;
    text-align: left !important;
}

.DynamicMenuHover
{
    text-decoration: underline;
}

.FrontEndMenuStyle ul li ul
{
     display: none;
}

.FrontEndMenuStyle > ul > li
{
    position: relative;
    float: left;
    list-style: none;
} 
```

你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:32:59.260

您的 HTML 在加载和应用 CSS 之前呈现。

您可以通过将包装元素的默认 CSS 可见性设置为 hidden like 来避免这种情况`display:none;`。然后，您可以使用连接到 DOM 加载事件的 JavaScript 并将包装器元素的显示设置为`block`.

# macos - 等效于 IntelliJ Mac 的 Ctrl-W

> ID：12513662
> 
> 赞同：52
> 
> 时间：2012-09-20T13:27:09.383
> 
> 标签：macos, intellij-idea

备忘单说我应该使用扩展选择`Ctrl-Up`，但在最新的 IntelliJ 和 Mac OS X 10.7.4 上它对我不起作用

`Ctrl-W`Mac OS X中的 IntelliJ 相当于什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-09-20T13:38:24.010

取决于`Preferences`| `Keymap`. 该操作称为**在 Caret 处选择单词**。

*   `Mac OS X`键盘映射：`Cmd``W`（`Cmd`= `Meta`）
*   `Mac OS X 10.5+`键盘映射`Alt``Up`：( `Alt`= `Option`=`⌥</kbd>)`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-09-30T15:53:15.647

选择单词：`option`+`Up arrow`

（`IntelliJ IDEA 2016.2.3`上`macOS Sierra 10.12`）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-04-09T11:43:26.263

现在调用它`Extend selection`，如前所述，默认情况下`Alt``Up`。

`IntelliJ IDEA 2019.1 (Ultimate Edition), Build #IU-191.6183.87`
`macOS Mojave 10.14.3`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-04T15:23:56.537

要获得所有功能，您可以将 2 个操作绑定到 Keymap[Editor Actions]：

1.  "扩展选择" cmd+w [使更多选择]
2.  “收缩选区” cmd+shift+w [少选]

# java - logback 模式在消息后打印 [jar]

> ID：12513663
> 
> 赞同：4
> 
> 时间：2012-09-20T13:27:10.327
> 
> 标签：java, logging, logback

我有一个来自 logback 的奇怪日志。所有消息（每行）后跟 [jar name]，如下所示：

```
 13:19:45 ERROR [c.o.s.w.s.Class] lalalalal [module-version.jar] 
```

模式是：

```
<pattern>%d{HH:mm:ss,SSS} %-5p [%c{3}] %m%n</pattern> 
```

我在 logback 网站上搜索过，但没有找到任何东西。这个后缀弄乱了堆栈跟踪，所以我该如何隐藏它？

PS对不起我的英语:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T13:41:13.647

正如其他人所指出的那样，这确实是一个功能。但是，如果需要，可以禁用它。

`%ex`您可以通过在模式末尾添加来禁用它，因此`%d %logger - %m%n`应重写为`%d %logger - %m%n%ex`. 在你的情况下，我认为这应该是正确的形式，如果你想禁用它：

```
<pattern>%d{HH:mm:ss,SSS} %-5p [%c{3}] %m%n%ex</pattern> 
```

在某些情况下，甚至可能需要此信息会导致大量开销，尽管我个人会保留它，而是更改环境或 IDE。

编辑：是的，`%ex`已[记录在案](http://logback.qos.ch/manual/layouts.html#xThrowable)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:29:50.010

这是一个特性，是 logback 的一部分，它打印包装数据 - 类的来源。所以你确切地知道这个日志来自哪里和哪个版本。

[http://logback.qos.ch/reasonsToSwitch.html](http://logback.qos.ch/reasonsToSwitch.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:38:03.583

这是一个*特点*。如果出现错误，logback 会为您提供错误源自的 jar 的确切名称，这可能有助于诊断类路径问题。[你可以在这里](http://logback.qos.ch/reasonsToSwitch.html#packagingData)阅读更多关于它的信息

# c++ - 如何使用 g++ 获取 C++ 头文件 (.hpp) 的汇编代码？

> ID：12513665
> 
> 赞同：2
> 
> 时间：2012-09-20T13:27:27.390
> 
> 标签：c++, assembly, header

我有兴趣尝试查看我的头文件的汇编代码。使用虚拟 main 方法玩一个简单的 .cpp 文件并编译它很容易：`g++ -S -o prog.exe main.cpp`

但是，我现在要进入头文件。我有一个`func.hpp`只包含一个虚拟方法的虚拟头文件，现在我希望能够编译它并在 .S 文件中查看它的程序集。（这样做的主要原因是，如果我有一个更复杂的功能，也许我可以在汇编中进行一些手动优化，然后通过`g++ -o prog.exe func.S main.cpp`.

但是，我无法找到解释这一点的来源。如果我尝试`g++ -S -o func.S func.hpp` ，我会收到一条错误消息`output filename specified twice`。谁能帮我这个？

作为参考，这里是 func.hpp：

```
int number()
{
    return 0;
} 
```

我也在尝试使用另一个名为 struct.hpp 的 hpp 文件：

```
struct Coord
{
    int x;
    int y;
}; 
```

两者都有相同的错误，但我希望能够在不将它们转换为 .cpp 文件的情况下查看两个头文件的程序集（因为这破坏了头文件的含义。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:32:49.777

您可以强制 g++ 将 .hpp 文件视为 C++ 源文件。

```
g++ -x c++ -S -o func.S func.hpp 
```

您收到“两次指定输出文件名”消息的原因是，当将头文件传递给 gcc 时，它会假定您要将其编译成[预编译的头文件](https://stackoverflow.com/questions/58841/precompiled-headers-with-gcc)。就像命名一样，这将“编译”标题，因此将在中间生成一个 *.s 文件。如果您`-v`使用原始命令传递标志，您将看到 cc1plus 的调用如下：

```
 /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.1/cc1plus
     -quiet
     -v 
     -D_GNU_SOURCE 
     func.hpp
     -quiet 
     -dumpbase func.hpp 
     -mtune=generic 
     -march=x86-64 
     -auxbase-strip func.S
     -version 
     -o func.S                # <---
     -o /tmp/ccxEg3J7.s       # <---
     --output-pch= func.S 
```

所以确实`-o`指定了两次，一次来自您的`-o`，一次来自编译器。

（当然编译器可以避免添加`-o /tmp/ccxEg3J7.s`，但是这种边缘情况增加的复杂性并不值得。）

# android - 片段方向更改 - 比横向更好的测试

> ID：12513668
> 
> 赞同：1
> 
> 时间：2012-09-20T13:27:36.410
> 
> 标签：android, android-activity, orientation, fragment

在“横向”模式下，我有两个 FrameLayouts 由一个 Activity 控制并使用两个 Fragment。在“纵向”模式下，我有一个由一个活动控制的 FrameLayout，在选择一条线时，我调用另一个活动以使用细节片段显示细节

在“人像”详细活动中，我在 onCreate() 方法中检查了以下方向。

if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) { finish(); 返回; }

上面的效果很好，但是，

但是，当我有一个“小型”设备时，就会出现问题。在这种情况下，在“横向”模式下，我不想要两个片段视图，而是希望表现得像“纵向”视图。但是，由于在详细活动启动时设备实际上处于“横向”状态，因此它会自动完成。

所以问题是处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:06:43.053

或使用 bool 值创建自定义资源（来自 google io 2012）

```
<!-- in your values/custom.xml -->
<resources>
    <bool name="small_screen">true</bool>  
    <bool name="normal_screen">false</bool>  
</resources>

<!-- in your values-sw320dp/custom.xml -->
<resources>
    <bool name="small_screen">false</bool>  
    <bool name="normal_screen">true</bool>
</resources> 
```

**注意：您必须定义一个最小屏幕宽度（sw320dp），您会认为屏幕不小（[更多信息链接](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)）**

优点是您可以在运行时读取此值，并且您可以有特殊资源限定符的特殊情况......例如，您可以通过调用您的活动在运行时读取此值：

```
if(getResources().getBoolean(R.bool.small_screen)) {
    // You have a screen which is < 320dp
} else {
    // You have a screen which is >= 320dp
} 
```

你甚至可以像这样在清单中使用这个布尔资源，为小屏幕启动一个完全不同的活动

```
<activity android:name="SmallScreenActivity" 
          android:enabled="@bool/small_screen">  <!-- ENABLE FOR SMALL SCREEN -->
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<activity android:name="NormalActivity" 
          android:enabled="@bool/normal_screen"> <!-- ENABLE FOR OTHER -->
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

这样，您可以简单地将 Activity 用于正常情况 (android:enabled="@bool/normal_screen") 并为小屏幕使用特殊 Activity android:enabled="@bool/small_screen"

**警告：此方法不适用于自蜂窝以来的较新设备。** [您可以阅读为什么不再允许使用此方法](http://damianflannery.wordpress.com/2011/10/16/architecting-a-single-apk-app-to-handle-phones-and-tablets-on-android/)或[阅读有关工作类似解决方案的信息](https://stackoverflow.com/questions/13202805/how-to-specify-activities-that-are-only-for-phones-or-tablets-on-android/13202806#13202806)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:46:06.193

在检查方向之前执行额外的屏幕尺寸检查。考虑到小型设备的宽度为 500 像素，高度为 600 像素，您将执行以下操作。

```
Display display = getWindowManager().getDefaultDisplay(); 
Point size = new Point(); 
display.getSize(size); i
int width = size.x; 
int height = size.y;
if ( width > 500 && height > 600 && 
    getResources().getConfiguration().orientation == 
    Configuration.ORIENTATION_LANDSCAPE)
{ 
     finish(); 
     return; 
} 
```

# c# - 如何从另一个项目调用表单

> ID：12513673
> 
> 赞同：4
> 
> 时间：2012-09-20T13:28:13.667
> 
> 标签：c#, .net, vb.net

我在一个解决方案中有两个 WinForm 项目（A，B）。

一个项目是VB.Net2

B项目是C#.Net4

他们都有Form。

A 项目设置为启动项目，并有 START 按钮。当我按下按钮时，我必须从 B 项目中激活 Form。

任何想法如何实现它？

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T13:35:19.450

您首先需要获得从项目 A 到项目 B 的引用。为此，右键单击项目 A，选择`Add Reference`，选择选项卡`Projects`，然后双击项目 B。

现在您将能够在项目 A 中引用项目 B 中的表单：

`Namespace.FormName.Show()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T13:41:13.303

1.  在您的项目 A 中添加对项目 B 的引用（右键单击项目，添加引用...，单击项目选项卡并添加项目 B）。
2.  在您的项目 A 中添加 Imports ProjectBNamespace
3.  创建一个 ProjectBClassName 类型的变量，例如。`Dim sample As New SampleForm()`，在您的按钮单击事件处理程序中
4.  在此事件处理程序调用`sample.Show()`或`sample.ShowDialog()`. 第一个选项将打开一个无模式对话框，而另一个是模式对话框。

# mysql - 在这种情况下使用外键（MySQL）是否明智？

> ID：12513675
> 
> 赞同：1
> 
> 时间：2012-09-20T13:28:17.643
> 
> 标签：mysql, sql, foreign-keys, duplicates

仍在尝试开始使用数据库，每天都会遇到问题！

我有一张“歌曲”表，其中包含有关艺术家/曲目的信息：

```
CREATE TABLE songs (
    song_id INT AUTO_INCREMENT PRIMARY KEY, 
    artist_name varchar(100) DEFAULT NULL,
    song_name varchar(100) DEFAULT NULL,
    tag_fk SMALLINT,
    FOREIGN KEY (tag_fk) REFERENCES tags(tag_id) ON DELETE SET NULL ON UPDATE CASCADE,
) ENGINE = 'InnoDB';

CREATE TABLE tags (
    tag_id SMALLINT AUTO_INCREMENT PRIMARY KEY,
    tag_name varchar(255) UNIQUE
) ENGINE = 'InnoDB'; 
```

现在我在“歌曲”中有一个引用“tags.tag_id”的外键，“tags.tag_name”稍后将包含“lovesong”、“melancholic”等标签。现在在某些情况下，一首歌可以有多个标签，所以如果它是一首忧郁的情歌，它应该有两个标签。虽然我刚刚注意到我不能将两个 SMALLINT 添加到 tag_fk 以逗号分隔，但它只允许每行一个 SMALLINT。

我想我可以在 'tag.tag_name' 中添加一个包含'lovesong;melancholic' 的新行，然后在 php 中处理它，用 ';' 拆分它，但这是一个不那么性感的问题解决方案，特别是因为数据是由一个程序添加的，我也必须处理对字符串进行排序，所以我不会得到重复的标签，比如“lovesong;melancholic”和“melancholic;lovesong”，这基本上是一样的。

这个问题一般是怎么解决的？如果我用 varchar 列 'songs.tag' 替换 'songs.tag_fk' 而不是我会有大量重复数据，因为数据库中会有很多“Lovesongs”和“Melancholic”歌曲，所以一个外键解决方案可能是最好的。

我还考虑过添加 'songs.tags_fk' 和 'songs.tags_fk2' 但这也是一个肮脏的 hack。特别是如果某些歌曲开始有超过 2、3、4 个标签。

处理它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:32:28.217

听起来像是多对多的关系。您需要第三个表来链接两者。这样一首歌可以有很多标签，一个标签可以分配给很多歌曲。

[http://www.phpknowhow.com/mysql/many-to-many-relationships/](http://www.phpknowhow.com/mysql/many-to-many-relationships/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:36:40.860

您想要的是多对多表关系。为此，您可以创建第三个表，其中包含 song_id 和 tag_id 的外键。

```
CREATE TABLE Song_Tag_Xref (
    FOREIGN KEY (tag_id) REFERENCES tags(tag_id),
    FOREIGN KEY (song_id) REFERENCES songs(song_id),
) ENGINE = 'InnoDB'; 
```

然后，您可以通过执行以下操作获取歌曲的所有标签：

```
select tags.tag_name 
from songs, song_tag_xref, tags 
where songs.song_id = song_tag_xref.song_id 
and song_tag_xref.tag_id = tags.tag_id
and songs.artist_name like 'Bob Marley' 
```

# php - 用于创建管理面板的 Yii 扩展

> ID：12513676
> 
> 赞同：6
> 
> 时间：2012-09-20T13:28:22.120
> 
> 标签：php, yii

我需要创建管理站点，目前我正在使用 Yii 框架，但问题是我有一个巨大的数据库，里面有很多表，以及它们之间的关系。用标准的 Yii 方法设置所有这些将是一个地狱。Yii 是否有一个很好的扩展可以帮助我减少编码时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:40:25.407

你可以试试这个：[http ://www.gxccms.com/](http://www.gxccms.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:46:52.713

有许多为此扩展的区域

您可以为此检查以下扩展名

[ycm](http://www.yiiframework.com/extension/ycm/)

[QQ面板](http://www.yiiframework.com/extension/qtzpanel/)

和

[yii-用户管理](http://www.yiiframework.com/extension/yii-user-management/)

我认为它解决了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:34:31.513

[您可以从gii-template-collection](https://github.com/schmunk42/gii-template-collection)尝试 FullModel 和 FullCrud 。

如果你有例如。MySQL Inno DB Tables，关系自动生成到模型中。并且 CRUD 还可以显示和更新您的相关表，使用“slim”模板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T09:04:33.510

只是在这里发布我的博客文章来帮助那些想要在 Yii 框架中创建自己的管理面板的人。

在这里，我告诉你**[在 yii 框架中分离前面板和管理面板的](http://scriptbaker.com/how-to-separate-front-and-admin-panel-in-yii-framework/)**完整步骤。

# apache-flex - 如何在 flex textare 组件中保留 N 条顶行？

> ID：12513677
> 
> 赞同：0
> 
> 时间：2012-09-20T13:28:24.987
> 
> 标签：apache-flex, flex4, flex4.5

我的 textarea 组件使用 myTextArea 换行（我的 TextArea 是 SPARK 组件）

我只想保留最后 50 行。（不删除旧行）

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:58:55.963

下面的代码可能会给你一些想法......

```
<?xml version="1.0"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx">

    <s:layout> 
        <s:VerticalLayout/> 
    </s:layout>

    <fx:Script>
        <![CDATA[          

            [Bindable]
            private var initialDisplayText:String = "1\n2\n3\n4\n5\n6\n7\n8";

            private var maxLines:int = 8;

            private function arrangeTextHandler(event:KeyboardEvent):void
            {
                var count:int = 0;
                var displayString:String = "";
                var arrayTemp:Array = new Array();

                if(event.target.content.mxmlChildren.length > maxLines)
                {
                    for(var i:int = event.target.content.mxmlChildren.length-1; 0 <= i  ; i--)
                    {
                        for(var j:int = event.target.content.mxmlChildren[i].mxmlChildren.length-1; 0 <= j ; j--)
                        {
                            if(maxLines > count)
                            {
                                arrayTemp.push(event.target.content.mxmlChildren[i].mxmlChildren[j].text);
                                count ++;
                            }
                        }
                    }

                    arrayTemp.reverse();
                    for (var k:int=0; k<arrayTemp.length ;k++)
                    {
                        if(arrayTemp.length-1 != k)
                            displayString += arrayTemp[k] + "\n";
                        else
                            displayString += arrayTemp[k];
                    }

                    arrayTemp = null;
                    initialDisplayText = displayString;
                    myTextArea.invalidateProperties();
                }
            }

            private function onKeyEventDown(e:KeyboardEvent):void
            {
                if(myTextArea.textFlow.flowComposer.numLines > maxLines)
                {
                    arrangeTextHandler(e)
                }
            }

        ]]>
    </fx:Script>

    <s:TextArea id="myTextArea" text="{initialDisplayText}" 
                keyUp="onKeyEventDown(event)" height="500" width="100" x="50" y="50"/>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:11:04.127

据此，不存在这样的属性[。](http://cookbooks.adobe.com/post_Limiting_the_number_of_lines_in_a_TextArea-222.html)您必须创建自己的从 TextArea 派生的组件。

# sql - SQL 从 1 个表中选择，从另一个具有多行的表中获取最小值最大值

> ID：12513678
> 
> 赞同：0
> 
> 时间：2012-09-20T13:28:24.733
> 
> 标签：sql, tsql

我有 2 个表我希望尽可能有效地“加入”。

第一个表有一个产品代码，我需要这个表中的所有列。

2nd 包含相同的产品代码，每个产品代码具有多行。

我需要获取产品代码与第一个表匹配的第二个表行的最小值和最大值。

以下是我到目前为止所拥有的，它很丑陋，可能非常不正确和缓慢。第二个表是问题，因为它有 750k 行！

```
 ALTER PROCEDURE [dbo].[GetProductDescriptions]
(
    @site INT = 0,
    @langid INT = 0
)
AS

select p.* ,
stuff((select ',' + cast(FilterValueID as nvarchar(max))from Product_Filter_Mapping c where c.ProductCode = p.ProductCode AND c.ApplicationID = @site for xml path('')),1,1,'') as FilterIDs,
stuff((select ',' + cast(BrandID as nvarchar(max))from Product_Brand_Mapping d where d.ProductCode = p.ProductCode AND d.ApplicationID = @site for xml path('')),1,1,'') as BrandIDs,
stuff((select '|' + cast(Name as nvarchar(max))from Brands e where e.ID IN (SELECT BrandID FROM Product_Brand_Mapping f WHERE f.ProductCode = p.ProductCode AND f.ApplicationID = @site)  for xml path('')),1,1,'') as BrandNames,
stuff((select ',' + cast(DepartmentID as nvarchar(max))from Product_Department_Mapping e where e.ProductCode = p.ProductCode and e.ApplicationID = @site for xml path('')),1,1,'') as DepartmentIDs,
(select MAX(pr.Sell) from Products pr where pr.ProductCode = p.ProductCode AND pr.ApplicationID = @site) as SellTo, 
(select MAX(pr.WholeSale) from Products pr where pr.ProductCode = p.ProductCode AND pr.ApplicationID = @site) as WasTo
from ProductDescription p WHERE p.ApplicationID = @site AND p.LanguageID = @langid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:38:35.757

```
CREATE PROCEDURE [dbo].[GetProductDescriptions3]
(
    @site INT = 0,
    @langid INT = 0
)
AS

select p.*,
stuff((select ',' + cast(FilterValueID as nvarchar(max))from Product_Filter_Mapping c where c.ProductCode = p.ProductCode AND c.ApplicationID = @site for xml path('')),1,1,'') as FilterIDs,
stuff((select ',' + cast(BrandID as nvarchar(max))from Product_Brand_Mapping d where d.ProductCode = p.ProductCode AND d.ApplicationID = @site for xml path('')),1,1,'') as BrandIDs,
stuff((select '|' + cast(Name as nvarchar(max))from Brands e where e.ID IN (SELECT BrandID FROM Product_Brand_Mapping f WHERE f.ProductCode = p.ProductCode AND f.ApplicationID = @site)  for xml path('')),1,1,'') as BrandNames,
stuff((select ',' + cast(DepartmentID as nvarchar(max))from Product_Department_Mapping e where e.ProductCode = p.ProductCode AND e.ApplicationID = @site for xml path('')),1,1,'') as DepartmentIDs,
stuff((select ',' + cast(DepartmentID as nvarchar(max)) + '|' + cast(DisplayOrder as nvarchar(max)) from Product_Department_DisplayOrder g where g.ProductCode = p.ProductCode AND g.ApplicationID = @site for xml path('')),1,1,'') as DisplayOrders,
X.SellFrom,
X.SellTo,
X.WasFrom,
X.WasTo
FROM ProductDescription p
OUTER APPLY (
  SELECT 
    MIN(pr.Sell) as SellFrom,
    MAX(pr.Sell) as SellTo, 
    MIN(pr.Wholesale) as WasFrom, 
    MAX(pr.WholeSale) as WasTo
  FROM Products pr
  WHERE where pr.ProductCode = p.ProductCode AND pr.ApplicationID = @site
  ) X
WHERE p.ApplicationID = @site AND p.LanguageID = @langid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:06:40.230

我要提出一个有点开箱即用的建议，所以请接受 FWIW。

我想我会建议将此查询分为两部分。我相信，如果您仅通过 ProductCode（如果我推断正确的话）将单独计算 MIN 和 MAX 值的部分分开，您会看到性能显着提高。拖动伴随着“选择中的选择”，例如选择a，b，c，（选择...）

我（最终）意识到您正在使用这些选择来获取部门/品牌/等的聚合/逗号分隔列表，我想到如果只有查询的那部分（例如）作为子选择执行或放置在视图中（例如 product_detail_info_view），它*可能会*减轻他们遇到的性能损失。这个想法是“嵌套”选择仅在一次通过中执行。这样做可以让您将查询表达为更像：

```
select  a.*,ps.SellFrom,ps.SellTo,ps.WasFrom,ps.WasTo
  from  product_detail_info_view a
  join  (select pr.productcode, min(pr.sell) as SellFrom, max(pr.Sell) as SellTo,
                min(pr.WholeSale) as WasFrom, max(pr.WholeSale) as WasTo
           group by pr.productcode) as ps
    on  a.productcode=ps.productcode  -- Or should this be a.productID=ps.productID? Not sure
where a.ApplicationID = @site
  and a.LanguageId = @langid 
```

现在，我完全意识到这方面的细节并不完整，例如，对连接字段并不完全确定，但想法就在那里。我经常发现简化查询的最佳方法是查看是否可以将其分解为块，然后将其“重新组装”成更有效的部分。我希望这有一定的意义。

# c++ - Ubuntu SDL 程序

> ID：12513682
> 
> 赞同：0
> 
> 时间：2012-09-20T13:28:32.923
> 
> 标签：c++, ubuntu, sdl

我正在使用 SDL 在 C++ 中创建一个程序，当我按下一个键时，我需要显示一个消息框。我的代码创建一个窗口，当我按下一个键时可以捕获。这是已经拥有的：

```
#include <SDL/SDL.h>
#include <stdlib.h>

bool wait_for_events ()
{
  SDL_WM_SetCaption("TESTE DE RATO E TECLAS", "TESTE DE RATO E TECLAS"); //titulo

    SDL_Surface* screen = SDL_SetVideoMode(640, 480, 0, 0); // criação da janela

    SDL_Surface* temp = SDL_LoadBMP("sdl_logo.bmp"); // leitura do bitamp

    SDL_Surface* bg = SDL_DisplayFormat(temp); // converter

    SDL_FreeSurface(temp);

  SDL_Event event;
  int status;
  char *key;
  bool quit = false;

  printf("Prima 'esc' ou pressione o botao 'x' para sair\n");
  while ( !quit ) {             
    status = SDL_WaitEvent(&event); 

    if ( !status ) {            
    printf("SDL_WaitEvent error: %s\n", SDL_GetError());
    return false;
    }
    switch (event.type) {       
      case SDL_KEYDOWN:         
    key = SDL_GetKeyName(event.key.keysym.sym);
        printf("A Tecla '%s' Foi Pressionada\n", key );
    if ( event.key.keysym.sym == SDLK_ESCAPE )  
      quit = true;
        break;
      case SDL_MOUSEBUTTONUP:           
        printf("Solto\n");
        break;
      case SDL_MOUSEBUTTONDOWN:           
        printf("Pressionado\n");
        break; 
     case SDL_QUIT:         
      exit ( 1 );
        break;
    }

        SDL_BlitSurface(bg, NULL, screen, NULL); // desenho do fundo

        SDL_UpdateRect(screen, 0, 0, 0, 0);
    }

    SDL_FreeSurface(bg);

    SDL_Quit();
  return true;
}

int main()
{   

  SDL_Surface *screen;

  //iniciação do sistema de video
  if ( SDL_Init( SDL_INIT_VIDEO ) < 0 ) {
        fprintf(stderr, "Erro na inicializacao do SDL: %s\n", SDL_GetError());
        exit(1);
  }
  atexit(SDL_Quit);

  //tamanho da janela, resolução bits
  screen = SDL_SetVideoMode(640, 480, 16, SDL_SWSURFACE);
  if ( screen == NULL ) {
        fprintf(stderr, "Erro na resolucao 640x480 video: %s\n", SDL_GetError());
        exit(1);
  }

  wait_for_events();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:11:02.950

消息框的简单方法：

```
char buf[1024];
sprintf(buf, "xmessage -center \"%s\"", mymessage);
system(buf); 
```

使用 gtk/qt 来进行适当的 GUI 集成可能会更好。

# android - HTML5 手机游戏的性能问题

> ID：12513685
> 
> 赞同：2
> 
> 时间：2012-09-20T13:28:42.523
> 
> 标签：android, ios, html, air, adobe

我们开始使用 HTML5 开发一个简单的手机游戏，但我们正在重新考虑我们的决定。当我们使用 CSS3 添加一些简单的动画时，这些动画在某些 android 设备上运行非常缓慢甚至根本无法运行，而在 iOS 上它们运行得更快但不够快。

您认为有一种方法可以显着提高（简单）HTML5 的图形性能吗？我们现在有点困惑，尽管我们很不想失去迄今为止所做的所有工作，但最好现在停止而不是一两个月。我们正在开发的应用程序在风格上与 Song Pop 相似，现在我们知道他们已经使用 Adob​​e AIR 开发了他们的应用程序（iOS、Android 和 facebook），我们认为这可能是一个替代方案。我想问你是否认为我们需要放弃 HTML5 并使用 Adob​​e AIR 开发游戏，或者可能采用原生方式（我们真的想避免这种情况，因为我们希望在合理的时间内在所有平台上发布）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:34:23.740

我建议使用原生或使用 adobe air 将其翻译成原生（某种）。这样，即使在低规格 CPU 上，您也可以实现硬件加速并获得良好的性能。

HTML5 的问题在于应用程序与输入和 cpu 处理之间有很多层。有检查、双重检查、权限层、脚本代码处理成 cpu 可理解的指令，这些都增加了延迟。使用本机应用程序，您可以直接访问所有内容并省去脚本处理。

甚至 facebook 也在从 HTML5 切换到原生[http://news.cnet.com/8301-1023_3-57511142-93/html5-is-dead-long-live-html5/](http://news.cnet.com/8301-1023_3-57511142-93/html5-is-dead-long-live-html5/)

使用 html 进行各种演示，因此人们无需下载即可获得嗅探，但不要将其用于快速响应的交互依赖游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:36:53.520

在决定将代码翻译成另一种语言之前，您可以尝试将您的 Web 应用程序转换为原生应用程序。周围有一些程序可以做到这一点，但我从未使用过它们。

[http://mashable.com/2010/08/11/cross-platform-mobile-development-tools/](http://mashable.com/2010/08/11/cross-platform-mobile-development-tools/)

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T14:40:42.520

走哪条路是一场曲折的辩论。

[在LinkedIn](http://www.linkedin.com/groups/What-do-you-guys-think-22352.S.166429949)上查看这里的意见。

此外，我注意到[PhoneGap 网站上的特色游戏与](http://phonegap.com/app/feature/)[Adob​​e AIR 应用程序示例](http://www.yeahbutisitflash.com/?p=4536)相比并不是非常具有交互性/游戏性。

你最后走的是哪条路？我有一个相当简单的[Flash 应用程序](http://gridclub.com/radius/)，我想部署到多个平台，但无法决定使用哪条路线。本机或 AIR 或 HTML5！

# batch-file - CMD 从文件中获取字符串并将其设置为要在 cd 中使用的变量

> ID：12513691
> 
> 赞同：5
> 
> 时间：2012-09-20T13:28:55.020
> 
> 标签：batch-file, cmd

我是批处理文件的新手，我正在尝试编写一个来完成我的部分工作（我知道懒惰）

到目前为止，我有以下...

```
SET skip=1

REM for all the directories indicated to contain core repositories
FOR /F "skip=%skip% delims=" %%i IN (C:\Repos.txt) DO ( 
SET TgtDir =%%i
echo %TgtDir% >> C:\result.txt
) 
```

Repos.txt 的内容是：

```
60000
C:\somedir\someotherdir\
C:\a\b\c\ 
```

基本上我希望这个脚本通过一个文件，忽略稍后将用于延迟设置的第一行，然后提取每一行然后（理想情况下）将它传递给 cd 命令但现在我只是想得到它进入变量 TgtDir。

当我运行此脚本时，C:\result.txt 中的输出为：

```
ECHO is on.
ECHO is on. 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T13:41:20.357

您需要查看批处理文件的[EnableDelayedExpansion](http://ss64.com/nt/delayedexpansion.html)选项。从上述链接：

> 使用 FOR 循环时，延迟变量扩展通常很有用。通常，即使它跨越批处理脚本的多行，整个 FOR 循环也会作为单个命令进行评估。

所以你的脚本最终看起来像这样：

```
@echo off
setlocal enabledelayedexpansion
SET skip=1

REM for all the directories indicated to contain core repositories
FOR /F "skip=%skip% delims=" %%i IN (C:\Repos.txt) DO (
    SET TgtDir=%%i
    echo !TgtDir! >> C:\result.txt
) 
```

作为替代方案，只需`%%i`在内部循环中使用变量，而不是创建新变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T19:27:21.037

```
@echo off
setlocal enabledelayedexpansion
SET skip=1
REM for all the directories indicated to contain core repositories
FOR /F "skip=%skip% delims=" %%i IN (C:\Repos.txt) DO echo %%n>>c:result.txt 
```

# javascript - 对所有这些图像有什么要求？

> ID：12513695
> 
> 赞同：0
> 
> 时间：2012-09-20T13:29:11.233
> 
> 标签：javascript, firebug, google-chrome-devtools

我继承了一个大型项目，在调查一些性能问题时，我注意到该站点下载了一大堆图像而从未使用它们，从而导致大量延迟。使用 Firebug 或 Chrome，有没有办法查看代码中实际要求这些图像的位置？我正在尝试逐步执行一些可能是罪魁祸首的 Javascript，但这个过程很乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:33:59.993

有一些 css 图像预加载器可以解析 css 然后预加载所有图像。

看看你是否有一个可以做到这一点的库

# java - 在java中返回具有具体实现的通用接口

> ID：12513698
> 
> 赞同：3
> 
> 时间：2012-09-20T13:29:23.430
> 
> 标签：java, generics, maven

我有一个由类实现的通用接口，我想以通用方法返回。界面：

```
public interface IWorker<T extends Object, K extends Object> {  
public K doWork(T o);
} 
```

执行：

```
public class WorkerImpl implements IWorker<String, List<Serializable>>
{
   @Override
   public List<Serializable> doWork(String s)
   {
       return ...
   }
} 
```

返回实现的泛型方法的 ActionCoordinator 接口：

```
public interface IActionCoordinator
{
    public <T extends Serializable, K extends Serializable> IWorker<T, K> getAction(T  request);
} 
```

ActionCoordinator 实现：

```
public class ActionCoordinatorImpl implements IActionCoordinator
{
    @Override
    public <T extends Serializable, K extends Serializable> IWorker<T, K> getAction(final T requ)
    {
        return (IWorker<T,K>)new WorkerImpl();
    }
} 
```

**问题：** 在 Eclipse 中这将起作用，但是使用 JDK 1.6.0_35 进行 maven 构建不会并说“不可转换类型”。我可以解决这个问题：

```
public class ActionCoordinatorImpl implements IActionCoordinator
{
    @Override
     public <T extends Serializable, K extends Serializable> IWorker<T, K> getAction(final T requ)
    {
        Object temp = new WorkerImpl();
        return (IWorker<T,K>)temp;
    }
} 
```

但它不应该是，那根本不是类型安全的。

一些想法会很好。提前致谢...

**编辑：现在对我有用的是：** 我将所有通用 Ts 和 Ks 更改为可序列化。这就是我需要限制 WorkerImpl 的全部内容。实际的调用者仍然需要一个`IWorker<T,K>`但`IWorker<Serializable,Serializable>`适合并且可以工作...谢谢大家，但我仍然想知道为什么 eclipse 什么也没说...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:38:14.850

问题不在于 maven*不会*编译，而是 Eclipse 没有抱怨不安全的演员阵容：您可能在 Eclipse 首选项中关闭了一个选项，并且正在 maven 中进行严格的编译。

你`WorkerImpl`不适合从你的工厂方法返回`ActionCoordinatorImpl`，因为不能保证`Serializable`传递给它的`doWork()`方法将是 a `String`- 它必须是 any `Serializable`。

此外，您可以通过更改`IWorker`从

```
public interface IWorker<T extends Object, K extends Object> 
```

至

```
public interface IWorker<T, K> 
```

因为它们是等价的（一切都扩展了对象）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:53:46.273

`new WorkerImpl()`产量`IWorker<String, List<Serializable>>`，你打算如何将其转换为 `IWorker<T,K>`？您认为编译器应该在哪里获取类型`K`？你会在调用时总是明确地传递它`getAction`吗？然后你也必须传递类型`T`，但它也是由参数设置的`requ`，调用看起来很丑陋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:48:15.220

你`WorkerImpl`唯一的工具`IWorker<String, List<Serializable>>`。然后，您尝试将其设置为不正确`IWorker<T extends Serializable, K extends Serializable>`的`ActionCoordinatorImpl`，应将其报告为错误。

在您清楚自己想要做什么之前，很难推荐修复程序。

# javascript - Javascript/HTML onclick 将新值传递给正在运行的内容滑块

> ID：12513700
> 
> 赞同：3
> 
> 时间：2012-09-20T13:29:25.443
> 
> 标签：javascript, jquery, events, javascript-events

滑块代码 [http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/](http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/)

图像模拟 [http://i.imgur.com/qSs9u.png](http://i.imgur.com/qSs9u.png)

我想先说我不是开发人员，我是设计师，对 JavaScript 几乎一无所知。最重要的是，我已经有大约十年没有做过任何网络工作了。我有一个基于滑块的网站，我正在拼凑在一起，我想为滑块添加或修改一些功能。在 HTML 文件末尾调用滑块

```
<script type="text/javascript">
        $(function() {

            $('#da-slider').cslider();

        });
    </script> 
```

我想添加文本按钮，如图所示，这将改变滑块的页面。滑块会生成我想要的但不包含文本的按钮。目前我将文本按钮作为锚点，例如

```
<a href="#" onClick="$('#da-slider').cslider({current:2});"><p>Live PA</p></a> 
```

但它会在该页面上创建一个新滑块，而不是更改已经运行的滑块。有没有办法将此值传递给已经运行的值？这是范围问题吗？我只是使用错误的语法传递给现有实例吗？我尝试查找与按钮跨度相关的代码，但我能找到的只是创建它们的位置，而不是如何处理点击。我认为它使用的是我不熟悉的 jQuery。请注意，滑块是基于 jQuery 的，因此也已加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:40:06.097

您的调用正在初始化一个新的 cslider 实例。

查看源代码，他们有一个用于更改当前页面的方法页面。使用 jQuery 的常用符号，您可以通过执行以下操作将页面更改为第二页：

```
 $('#da-slider').cslider('page', 2); 
```

# java - 如何与 JavaMail 中的 Transport 同步？

> ID：12513701
> 
> 赞同：0
> 
> 时间：2012-09-20T13:29:26.377
> 
> 标签：java, asynchronous, jakarta-mail

我有一个应该像这样工作的应用程序：

1.  打开与传输提供程序的连接。
2.  尽快发送一堆消息。
3.  与运输提供商的紧密联系。

我发现我的应用程序对于传输线程来说移动得太快了。我最终会丢失消息，因为在传输线程完成之前的消息之前，我会转到下一条消息。为了（暂时）解决这个问题，我在一条消息的启动和下一条消息的创建之间暂停了 2 秒。但这是不可接受的！我想要的是某种信号量，我可以等待它来确定传输线程何时完全处理完一条消息（即，我想要同步操作）。

有谁知道这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:19:35.840

传输**是**同步的。

你是什​​么意思你“丢失消息”？你的意思是说，即使 Transport 说消息已经发送（没有例外），但消息永远不会到达目的地？这可能表明您的邮件服务器中存在错误。

您可能想尝试按照 JavaMail FAQ 中的说明打开会话调试，以查看与邮件服务器的对话中是否有任何内容表明它为什么没有按预期工作。

# c# - 将相当于关联数组的内容从控制器传递到 MVC 4 中的视图的最佳方法

> ID：12513702
> 
> 赞同：1
> 
> 时间：2012-09-20T13:29:28.110
> 
> 标签：c#, asp.net, asp.net-mvc

我有 2 个数组需要传递给并在视图中显示。现在我有：

```
String[] unactivePanelsHeader = new String[] {"GT5C", "GT5E", "GT5P", "GT5W"};
int[] unactivePanelsValues = new int[4];

//Values for unactivePanelsValues created with a linq query

ViewBag.unactivatedHeader = unactivePanelsHeader;
ViewBag.unactivatedPanels = unactivePanelsValues; 
```

结果随后显示在视图中。

```
<table>
    <tr>
    @for (int i = 0; i < 4; i++ )
    {
        <td>@ViewBag.unactivatedHeader[i]</td>
    }
    </tr>
    <tr>
    @for (int i = 0; i < 4; i++ )
    {
        <td>@ViewBag.unactivatedPanels[i]</td>
    }
    </tr> 
```

它有效，但我是这个平台的新手，似乎应该有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:35:43.907

最好创建一个包含视图所需的所有数据的强类型模型类。

然后你会使用

```
@Model.Property 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:37:19.223

这 2 个数组应包含在页面顶部返回的模型中。

例如 Inherits="ViewPage<>"

另一种选择是在 PartialView 中传递数组

例如 Html.RenderPartial("YourControl", new Model { x = "value1", y = "value2" } );

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:37:24.427

有几种方法可以传递和显示数据。

其中之一是 Sruly 提到的强类型模型。

我建议您关注或查看这些教程[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)

```
public ActionResult ViewUnactivated()
    {
        var unactivatedViewModel= new UnactivatedViewModel{ UnactivatedHeaders = unactivatedPanelsHeaders, UnactivatedPanels = unactivatedPanelsValues };
        return View(UnactivatedViewModel);
    } 
```

并创建一个相应的视图，您可以在其中循环模型属性的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T13:40:52.040

当您不知道要显示什么类型的数据时，Viewbag 主要适用于通用视图。显示您预先知道其类型的信息的视图应创建为强类型视图。您创建一个具有所有视图数据属性的模型，在控制器中创建该模型的实例并将模型传递给您的视图。例如，模型可能如下所示：

```
class MyModel
{
    IList<string> UnactivatedHeaders { get; set; }
    IList<int> UnactivatedPanels { get; set; }

    public MyModel
    {
        UnactivatedHeaders = new List<string>();
        UnactivatedPanels = new List<int>();
    }
} 
```

然后你的控制器会像这样调用你的视图：

```
public ActionResult Index()
{
    var model = new MyModel();
    model.UnactivatedHeaders.Add("GT5C");
    // and so on...

    return View(model);

} 
```

在您看来，您将能够像这样访问模型的属性：

```
@foreach(var header in Model.UnactivatedHeaders) {
<td>@header</td>
} 
```

要创建强类型视图，首先创建模型并至少编译一次项目。然后创建您的视图并标记复选框“创建强类型视图”并在下面的下拉列表中选择您的模型类。

# vb.net - 收集不是来自datagridview的所有列

> ID：12513710
> 
> 赞同：0
> 
> 时间：2012-09-20T13:29:46.270
> 
> 标签：vb.net, datagridview

**情况：**

我正在创建一个用于创建用户报告的最小客户端。主窗体具有一个网格，其中包含 .XSD 文件中一些最重要的列和一个名为“自定义报告”的菜单项。当用户单击“自定义报告”时，网格中所有可用列的表单都会实现。

**这是摩擦：**

现在我的代码引用了主窗体网格中的所有列。我想知道是否有办法引用 .XSD 的所有列，显然我认为用户不需要主窗体上的所有这些列，但他可以在某个时候。我也不想创建一个单独的隐藏表来引用。周围的其他人已经提出了这一建议。

我愿意接受建议，但直觉告诉我应该有某种方法可以从定义 XSD 文件中收集这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:07:07.637

我发现到目前为止，唯一的方法是用我需要的表填充一个临时数据集，然后查询该数据集以查看其中有多少字段。如果有人有更好的主意。请告诉我。

# java - Android StringTokenizer - 读取空白值

> ID：12513713
> 
> 赞同：1
> 
> 时间：2012-09-20T13:29:59.617
> 
> 标签：java, android, tokenize, stringtokenizer

我有包含 id、纬度、经度、参考名称、用户 ID、用户名的管道分隔字符串：

```
1390|-32.5506782531738|18.9797592163086|Hardie - Vrede 4|21|Hardie van der Merwe
1391|-33.5143165588379|18.422327041626|test|3|sgroenewald
1392||||3|sgroenewald 
```

当我使用 StringTokenizer 类读取这些行中的每一行时，它们都可以工作，直到我点击第 3 行，那里有空白值。我读了 ID ok，然后我检查 hasMoreTokens()，它返回 true，但它跳过空白并转到倒数第二个字段，使用 nextToken 读取为 3，但在我的代码中输入了错误的变量。

继续我使用 nextToken 读取下一个字段，期望它是经度，但我得到一个字符串（sgroenewald）并且轮子脱落..

有没有办法在阅读之前查看下一个令牌是否为空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:40:23.870

尝试使用带有 3 个参数[的 StringTokenizer 的构造函数](http://developer.android.com/reference/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String,%20boolean%29)，指定`returnDelimiters`为`true`. 当然，您需要在循环标记器时手动从值本身中删除分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:32:45.207

您可以做的一件事是，使用 String 类的 replace() 方法将这些空格替换为没有空格（ " " 与 "" ）。

String finalStr = "1390|-32.5506782531738|18.9797592163086|Hardie - Vrede 4|21|Hardie van der Merwe";

```
finalStr = finalStr.replaceAll( " ", "" ); 
```

# php - 带有扩展名的有效英国电话正则表达式

> ID：12513717
> 
> 赞同：0
> 
> 时间：2012-09-20T13:30:10.400
> 
> 标签：php, regex, phone-number

我需要一个 php 的正则表达式，它允许 0-9、字符串分机、空格和 +（对于英国电话号码，分机用于分机）。这是我的尝试，但不起作用：

```
/^[\d -(ext)]+$/ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:33:47.870

您需要将字符串从字符类中取出：

```
/^([\d -]+|ext)+$/ 
```

只允许`ext`一次：

```
/^[\d -]+(ext)?[\d -]+$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:33:53.787

**直接来自谷歌...**

接受号码的例子：

02081234567

0208 123 4567

020 8123 4567

0208 123-4567

+44 208 123 4567

+44 (0) 208 123 4567

01234 567 890

+44 0 1234 567-890

07712 123 456

不接受的号码示例：

020812345678 123456789 07612 123 4567 +33 345 876 1298

```
/^(((44))( )?|((+44))( )?|(+44)( )?|(44)( )?)?((0)|((0)))?( )?(((1[0-9]{3})|(7[1-9]{1}[0-9]{2})|(20)( )?[7-8]{1})( )?([0-9]{3}[ -]?[0-9]{3})|(2[0-9]{2}( )?[0-9]{3}[ -]?[0-9]{4}))$/ 
```

# sql - 使用 PROC SQL 直通使用 SAS 数据更新外部 DBMS 表——这可能吗？

> ID：12513718
> 
> 赞同：0
> 
> 时间：2012-09-20T13:30:20.880
> 
> 标签：sql, sas

我有一个 MS Access 数据库。我需要使用 SAS 处理和更新此数据库中的表。桌子可以很大。某些处理需要使用纯 SAS 函数。对于 MS Access 的 SAS/ACCESS LIBREF，您无法使用 PROC SQL 更新或更改表。因此，我看到了两种方法：

1.  使用 LIBREF：将整个表复制到 SAS 中。删除 Access 中的原始表。在 SAS 中处理表。将表写回 Access。
2.  使用 PROC SQL 直通：将我需要的行读入 SAS。使用 SAS 处理这些行。更新 Access 中的行。

我的问题：2号甚至可能吗？使用 SQL 函数（而不是 SAS），数字 2 中概述的过程比数字 1 快很多数量级。我知道这种差异来自完全由 DBMS 处理的数据，但数字 2 仍然必须更快， 对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:56:11.210

我建议的是选项 2，然后使用 LIBREF 将这些行上传到临时表，然后使用 passthrough 更新更大的表。可以通过 libref 直接更新行，但我对 SAS 与 Access 的连接不够熟悉，无法回答该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:43:02.507

使用 LIBNAME 语句连接到 Access 数据库时，您需要添加选项“scan_text=no”以启用更新该数据库。然后，您可以使用 MODIFY 更改现有记录或使用 APPEND 添加新记录。下面是我前段时间写的一些训练代码，它连接到Excel，但原理与Access相同。

```
/* Create libname to Excel */
libname xl 'N:\SAS\Code\sas_training\sample_data\range.xls' scan_text=no; /* important to use this option */

/* Create table with updated values */
data xl_update;
input month a b c d;
cards;
200909 1 2 3 4
200910 5 6 7 8
200911 10 11 12 13
run;

/* Extract latest month from existing data */
proc sql noprint;
select max(month) into :maxmth
from xl.testdata;
quit;

/* Update existing values */
data xl.testdata;
modify xl.testdata xl_update (where=(month<=&maxmth.));
by month;
run;

/* Append new rows to exisiting data */
proc append base=xl.testdata 
            data=work.xl_update (where=(month>&maxmth.));
run;

libname xl clear; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:09:04.140

对于未来的读者：我问这个问题是因为 SAS 不支持`PROC SQL` `UPDATE`关于 MS Access 库的声明。要更新 Access 表，您必须在数据库中创建一个新表并使用传递语句。我的第一直觉是使用`UPDATE`带有子句的语句分配`WHERE`来更新记录子集。当我研究这个时，我读到了一些不好的信息，说 Jet SQL 不支持更新记录子集。这是不正确的。使用`INNER JOIN`，您可以更新子集。下面的示例代码：

```
/* Access database is "C:/database.mdb".
   Original table in database is "original". 
   Processed table is "work.updates". */

libname mdbfile "C:/database.mdb";

proc sql;
create table mdbfile.updates as select * from work.updates;
connect to access (path="C:/database.mdb");
execute (
  update original as a inner join updates as b on a.id = b.id
  set a.variable1 = b.variable1
  where condition = 1
) by access;
execute (drop table updates) by access;
disconnect from access;
quit; 
```

# ios - Cordova 2.0 iOS 持久化存储策略

> ID：12513719
> 
> 赞同：2
> 
> 时间：2012-09-20T13:30:29.873
> 
> 标签：ios, cordova, persistent-storage

Cordova 2.0 是否解决了 iOS 持久存储问题？（Web 存储在 iOS 5.1x 中被移动到缓存目录，这破坏了 Cordova 中的许多应用程序）

我想知道存储 API 是否可以安全地用于持久存储... [http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage)

或者 SQLite 插件现在是否安全... [https://github.com/chbrody/Cordova-SQLitePlugin](https://github.com/chbrody/Cordova-SQLitePlugin)

或者是使用文件 API 的唯一真正“安全”的方法... [http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File)

您的想法将不胜感激！

**更多详细信息** 我的应用程序会将数百条记录（主要是整数）写入几个表中。数据将离线捕获，最终需要同步到在线数据库。复杂度堪比典型的小型动态企业网站，无需所有繁重的 TEXT。所以...类似 SQL 的设置将是理想的。

**编辑** 我使用了上面提到的 SQLLitePlugin，它像宣传的那样工作。已经 2 年了，所以不确定现在有哪些新选项可用。

# php - PHP+MySQL中的IP黑名单

> ID：12513727
> 
> 赞同：1
> 
> 时间：2012-09-20T13:30:56.203
> 
> 标签：php, mysql, blacklist

我一直在尝试在 PHP 中实现一种 IP 黑名单，我将失败的登录尝试存储到具有以下架构的 MySQL 表中：

```
CREATE TABLE blacklist(
    `ip_address` VARCHAR(35) NOT NULL,
    `failures` INTEGER DEFAULT 0,
    `release_time` BIGINT DEFAULT -1,
    PRIMARY KEY(`ip_address`)
); 
```

在我的登录检查中，我首先使用以下查询删除所有发布时间早于当前时间（如果发布时间已经过去）的黑名单条目：

```
/* I pass in time() */
DELETE FROM failures WHERE release_time < ?; 
```

然后我执行以下操作：

```
/* I pass in $_SERVER['REMOTE_ADDR'] */
SELECT failures FROM blacklist WHERE ip_address=? 
```

如果我没有检索到任何行或者我返回的 $row['failures'] 超过 5，我允许检查用户名和密码。否则，我完全拒绝登录。

对于每次失败的登录尝试（无论是通过黑名单规则还是通过无效的用户名/密码），我都会执行：

```
/* IP address is $_SERVER['REMOTE_ADDR'],
   release_time is current time + (new failures * 90 minutes) */
INSERT INTO BLACKLIST(ip_address, failures, release_time) VALUES(?,?,?) 
ON DUPLICATE KEY UPDATE failures=failures+1, release_time=?; 
```

不幸的是，我至少访问了数据库 3 次（清除黑名单、获取 IP 地址、最少增加失败次数）。有没有更好的方法来维护动态黑名单，也许每分钟写入一次缓存？

我确实看到[使用 php/mysql 的 IP 禁止与](https://stackoverflow.com/questions/2986154/banning-by-ip-with-php-mysql)我的问题类似，但是如果人们在很长一段时间内停止尝试登录，我允许他们从黑名单中删除。这样一来，简单地忘记他们的凭证的人受到的影响比那些试图通过暴力方式获得凭证的人受到的影响要小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:48:30.503

以下查询不需要定期运行，可以移至 cron 作业：

```
DELETE FROM failures WHERE release_time < ?; 
```

如果此人被列入黑名单，则此“布尔”查询将返回 1，否则返回 0：

```
SELECT
  COUNT(ip_address) as blacklisted
FROM blacklist
WHERE
  ip_address = ? AND
  release_time > ? AND
  failures > 5 
```

它可能会加快速度，因为您不使用 PHP 来计算行数和比较数字：

```
if ($row['blacklisted']) { /* ... */ } 
```

我认为你真的不能避免最后一个。

# python - 直方图的python和opencv2问题

> ID：12513729
> 
> 赞同：0
> 
> 时间：2012-09-20T13:31:10.197
> 
> 标签：python, opencv

我在使用直方图和使用 python 的 opencv2 时遇到了一些问题。我从这里拿了一些代码：http: [//opencvpython.blogspot.com/2012/04/drawing-histogram-in-opencv-python.html](http://opencvpython.blogspot.com/2012/04/drawing-histogram-in-opencv-python.html)

这是代码：

```
import cv2
import numpy as np

img = cv2.imread('lena.bmp')
h = np.zeros((512,512,3))                                   

bins = np.arange(256).reshape(256,1)
color = [ (255,0,0),(0,255,0),(0,0,255) ]
for ch, col in enumerate(color):
    hist_item = cv2.calcHist([img],[ch],None,[256],[0,255])
    cv2.normalize(hist_item,hist_item,0,255,cv2.NORM_MINMAX)
    hist=np.int32(np.around(hist_item))
    pts = np.column_stack((bins,hist))
    cv2.polylines(h,[pts],False,col)
    print pts 
```

lena.bmp 来自此链接。

问题是：

1) cv2.polylines(h,[pts],False,col) 失败并出现错误：

```
OpenCV Error: Assertion failed (src.dims <= 2 && esz <= (size_t)32) in transpose 
```

2) 打印 pts 我看到值与我使用 gimp 分析 r、g 和 b 直方图得到的值不同。在这里我的意思是垃圾箱有不同的值。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:21:15.283

最终我让这段代码在另一台计算机上工作，所以代码是正确的，但我的环境中缺少一些东西。

# php - 如何在按下按钮时执行脚本（最后，转移到另一个 URL）？

> ID：12513733
> 
> 赞同：1
> 
> 时间：2012-09-20T13:31:37.047
> 
> 标签：php, javascript, button

试图为 HTML 登录页面的编码人员提供一些指导。我们正在开展展示广告活动以吸引某人申请信用卡，特别是在网络上开展 CPC 活动。我们将人们从广告带到登陆页面，然后他们点击“立即申请”按钮后，他们就去了银行。

该网络将在触发转换像素时优化广告展示位置。我们无法像在另一家公司（我们的信用卡服务银行）那样对最终的感谢页面甚至申请页面进行编程。我们唯一比点击优化更好的方法是将像素放在“立即应用”按钮“后面”。

有人可以建议一种简单的方法来编码按钮吗？我假设我们可以执行一段脚本，一行是像素，另一行是转移到另一个网站。我们的编码员说这是不可能的（执行像素代码，然后从页面转移到新的 URL）。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:59:44.063

猜测的HTML：

```
<form id="form1">
<img src="blank.gif" id="pixel" />
<input type="button" id="subbut" />
</form> 
```

纯JS：

```
<script>
window.onload=function() {
  document.getElementById("subbut").onclick=function() {
    var pix = document.getElementById('pixel');
    pix.onload=function() { document.getElementById("form1").submit() }
    pix.src='http://a1.interclick.com/someprocess?someparameter=...';
  }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:44:44.150

作为标题的答案，因为其余的我不明白问题的内容，您可以使用“onclick”执行一个功能，然后`window.location`重定向/打开另一个 URL。像这样的东西：

```
<button onclick="functionName()">Test</button>
<script type="text/javascript">
function functionName(){
  // your code, Ajax to access a php script
  return window.location = 'url_to_redirect';
}
</script> 
```

# javascript - 如何在给定坐标的街道上画一条线？

> ID：12513739
> 
> 赞同：0
> 
> 时间：2012-09-20T13:31:55.530
> 
> 标签：javascript, google-maps, google-directions-api

给定坐标，我怎么能找到在整个街道（或最近的街道，如果坐标不那么准确）画一条线的方法？

示例：我有这些坐标：40.752443,-73.987376（纽约市百老汇的一部分）……我想在百老汇各处画一条线。

使用 Google Directions API 可以在街道上画一条线……但我需要知道街道的起点和终点。

先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:41:56.273

纬度/经度坐标对仅指定地球上的一个点，并不暗示有关其周围区域地理的任何细节。可能有一个 API 可以接收坐标对并为您提供最近街道的名称，然后 Google Directions API 可以为您提供一组坐标，指示沿街道的转折点（因为并非所有街道都是完全笔直的）。获得这些坐标后，您可以画一条穿过所有坐标的线，这将代表街道。

希望这会有所帮助 - 不幸的是，我很长时间没有使用 Google Directions API，所以我不确定它在这类事情上的功能。

编辑：[这个](https://stackoverflow.com/questions/805792/snap-to-nearest-street?rq=1)问题可能对第一部分有帮助。最佳答案链接到一个 API，该 API 用于查找与给定纬度/经度对最近的街道名称。不确定它是否适用于每个国家/地区。

# asp.net - 选中嵌套数据列表中的所有复选框

> ID：12513744
> 
> 赞同：1
> 
> 时间：2012-09-20T13:32:35.877
> 
> 标签：asp.net, selectall, nested-datalist

我有一个嵌套的数据列表结构，并希望在每个类别上都选择所有复选框。

顶部复选框工作正常，但不知道如何为每个主要类别执行此操作

![在此处输入图像描述](../Images/ca02814c74a1151b62973eae7884da9d.png)

这工作正常：

```
 protected void cbTamaminiSec_CheckedChanged(object sender, EventArgs e)
{
    CheckBox cbTemp;

    foreach (DataListItem ItemP in parentDataList.Items)
    {
        cbTemp = (CheckBox)parentDataList.Items[ItemP.ItemIndex].FindControl("cbTumunuSec");
        cbTemp.Checked = cbTamaminiSec.Checked;

        DataList nestedDataList = (DataList)parentDataList.Items[ItemP.ItemIndex].FindControl("nestedDataList");

        foreach (DataListItem Item in nestedDataList.Items)
        {
            cbTemp = (CheckBox)nestedDataList.Items[Item.ItemIndex].FindControl("cbTamam");

            cbTemp.Checked = cbTamaminiSec.Checked;
        }
    }
} 
```

但不知道部分选择（在父数据列表中的 chechboxes 代码下面）我将选择的 id 设置为“0”以强调问题

```
 protected void cbTumunuSec_CheckedChanged(Object sender, EventArgs e)
    {
        int selected = 0;//= (int)parentDataList.SelectedItem.ToString(); // problem is here..

        DataList nestedDataList = (DataList)parentDataList.Items[selected].FindControl("nestedDataList");

        foreach (DataListItem Item in nestedDataList.Items)
        {
            CheckBox cbTemp = (CheckBox)nestedDataList.Items[Item.ItemIndex].FindControl("cbTamam");

            cbTemp.Checked = true;

        }
    } 
```

解决办法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:36:31.523

您可以尝试使用此代码 - 基于`OfType LINQ Operator`和`Controls propery`

```
var allControls = nestedDataList.Items[index].Controls.OfType<CheckBox>();

....//Filter with `Where Operator` 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.control.controls (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.control.controls(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:14:18.163

问题解决了！ASP代码：

```
<asp:HiddenField ID="hiddenBaslikId" runat="server" Value='<%# Eval("baslikId") %>' /> 
```

后面的代码：

```
protected void cbTumunuSec_CheckedChanged(Object sender, EventArgs e)
    {
    CheckBox checkAll = (CheckBox)sender;
    DataListItem item = (DataListItem)checkAll.NamingContainer;
    HiddenField HiddenID = (HiddenField)item.FindControl("hiddenBaslikId");

    int selected = Convert.ToInt32(HiddenID.Value)-1;

        DataList nestedDataList = (DataList)parentDataList.Items[selected].FindControl("nestedDataList");

        foreach (DataListItem Item in nestedDataList.Items)
        {
            CheckBox cbTemp = (CheckBox)nestedDataList.Items[Item.ItemIndex].FindControl("cbTamam");

            cbTemp.Checked = true;

        }
    } 
```

# java - 令牌过期后 Google App Engine Channel API 重新连接

> ID：12513745
> 
> 赞同：1
> 
> 时间：2012-09-20T13:32:39.490
> 
> 标签：java, google-app-engine, gwt, channel-api

我正在使用 Channel API (GAE Java SDK + GWT)，并且我正在尝试为有关重新创建通道的问题创建一个解决方法（在到期日期之后以及在引发错误之后）。我发现这篇文章提供了可能的解决方案，但没有一个有效：[https ://groups.google.com/forum/?fromgroups=#!searchin/google-appengine-java/channel/google-appengine-java/kD3H6BWNYuA/NivXiDrqW7QJ](https://groups.google.com/forum/?fromgroups=#!searchin/google-appengine-java/channel/google-appengine-java/kD3H6BWNYuA/NivXiDrqW7QJ)

我尝试在到期时间之前删除 Channel API iframe 并重新创建通道。它似乎可以工作，但是如果我重新创建一个频道，计时器不会重置，所以如果我尝试创建一个新频道并在过期期过后打开它，我会得到“onerror”和“onclose”（即使我关闭了插座）。如果我刷新页面，它可以工作，但这不是一个好的选择

此外，如果互联网连接关闭并重新打开，有时我会收到错误代码 0 或 1。这里也一样：我无法重新创建和打开新频道，因为我收到“onerror”和“onclose”。

谁能帮我提供更具体的解决方案细节？

更新：在调用 onclose/onerror 后，我使用计时器重新创建通道（5 秒），它现在可以工作了。但是在第一个令牌过期后，重新创建频道将不再起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:07:52.060

似乎无法使用 gwt-gae-channel-...jar 在 GWT 中重新创建通道的原因是因为 ChannelFacotry 只会实例化一次 Channel 类型的对象，因此，当尝试重新创建和打开另一个通道，例如必须将初始对象设置为 null。我能做到这一点的唯一方法是创建另一个类，然后复制/修改代码（我添加了一个简单的方法来将“通道”设置为空）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:58:06.067

如果您使用 javascript API，则必须在尝试创建新套接字之前调用 socket.close()。socket.close() 将删除 iframe 等。

# javascript - 在 jquery 中需要帮助

> ID：12513752
> 
> 赞同：0
> 
> 时间：2012-09-20T13:32:57.793
> 
> 标签：javascript, jquery, html

我有以下代码：

```
<div id="comments" class="clearfix">
  <div class="conversation box_round_s box_shadow clearfix mtm">
  <div class="conversation box_round_s box_shadow clearfix mtm">
    <input class="conv_tracker" type="hidden" value="4695f1db2d">
    <div class="conv-header">2</div>
    <div class="comment pts plm prs pbs">
    <div class="comment plxl pts plm prs pbs">
    <div class="replybox pvs clearfix">
      <textarea class="comment_txt_r fses fft"></textarea>
    </div>
  </div>
  <div class="conversation box_round_s box_shadow clearfix mtm">
  <div class="conversation box_round_s box_shadow clearfix mtm">
</div> 
```

我正在尝试使用 conv_tracker 类读取输入的值（代码中的第 4 行，value="4695f1db2d"）。我想读取这个值。当有人在 textarea 中按 Enter 键时，我正在阅读它。页面上有多个文本区域。我正在使用以下 jquery：

代码确实进入了 if，但显示未定义。

```
$(".comment_txt_r").keydown(function(e){
  var code = (e.keyCode ? e.keyCode : e.which);
  if(code == 13) {      
    var ctext = $(this).val();
    var relid = $(this).closest('.conversation').children('input.conv_tracker').val();
    alert(relid);
  }
}); 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:34:33.193

使用`$('#conv_tracker').val()`. `closest`ID 在页面内必须是唯一的，所以没有理由通过and上下遍历 DOM `children`，然后通过 ID 进行选择。只需按 ID 选择。

很有可能，如果您当前的代码不起作用，则该 ID 在页面中*不是*唯一的，并且它会从具有重复 ID 的后续元素中剥离，从而阻止您的代码选择该元素。如果是这种情况，您需要为重复的元素使用类或其他属性。

* * *

作为一个不相关的建议，尝试使用`data`属性并将值直接附加到您将事件绑定到的元素上，而不是将随机的、未耦合的、语义上无意义的元素转储到 DOM 中。

您的文本区域获得一个`data-conv-tracker`属性：

```
<textarea class="comment_txt_r fses fft" data-conv-tracker="4695f1db2d" /> 
```

并且您的代码大大简化，无需额外的选择/DOM 遍历：

```
if(code == 13) {      
  var ctext = $(this).val();
  var relid = $(this).data('conv-tracker');
  alert(relid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:35:20.803

换行

```
var relid = $(this).closest('.conversation').children('input#conv_tracker').val(); 
```

到

```
var relid = $('#conv_tracker').val() 
```

您`$(this)`在错误的上下文中使用（它是 $('.comment_txt_r') 在您的代码中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:35:41.313

只需像这样直接在 jQuery 中处理输入`$('#conv_tracker').val()`。所以你的代码看起来像：

```
$(".comment_txt_r").keydown(function(e){
  var code = (e.keyCode ? e.keyCode : e.which);
  if(code == 13) {      
    var ctext = $(this).val();
    var relid = $('#conv_tracker').val();
    alert(relid);
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:47:23.757

**HTML**

代替`<textarea class="comment_txt_r fses fft" />`

和`<textarea class="comment_txt_r fses fft"></textarea>`

**JavaScript**

```
$('#comments .conversation').each(function(i, conversation){    
    $('.comment_txt_r', conversation).keydown(function(e){
      if((e.keyCode ? e.keyCode : e.which) == 13) {      
        var ctext = $(this).val();
        var relid = $('.conv_tracker', conversation).val();
        alert(relid);
      }
    });
    // additional per conversation code
}); 
```

通过单独运行每个对话，您可以为 jQuery 提供一组较小的元素来过滤。

# java - Jersey REST - 将 MultivaluedMap 发送到 GET 导致不受支持的媒体类型

> ID：12513754
> 
> 赞同：3
> 
> 时间：2012-09-20T13:33:01.180
> 
> 标签：java, http, rest, jersey, mime-types

我正在尝试进行参数化获取（又名搜索）。我不确定为什么这不起作用。我们使用最新的 jersey 依赖项 (1.14)，到目前为止，所有 REST 接口都可以正常工作。简单的 REST：

```
@Path("/some/path")
@Component
public class SomeRest {

    @GET
    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)
    @Produces({ MediaType.APPLICATION_JSON })
    public Response getAll(MultivaluedMap<String, String> queryParams) {

        // extract params, do search, return response as JSON
        // (Using ObjectMapper.writeValue() to convert object to JSON String)

    }
} 
```

我认为该方法的工作原理并不重要，因为错误明确指出，由于某些不受支持的媒体类型（当我在浏览器中输入路径时），它无法首先输入它：

```
HTTP Status 415 - Unsupported Media Type 
```

输出是：

```
SEVERE: A message body reader for Java class javax.ws.rs.core.MultivaluedMap, and Java type javax.ws.rs.core.MultivaluedMap<java.lang.String, java.lang.String>, and MIME media type application/octet-stream was not found.
The registered message body readers compatible with the MIME media type are:
.... 
```

有人有想法吗？谢谢！

**编辑：**

我的目标是通过使用带有 GET 资源的查询参数来实现搜索。因此，当我打电话时，`/some/path`我会得到所有结果，但如果我打电话，`some/path?limit=10&offset=10`我会得到第二组 10 个。我可以用查询参数解决这个特定问题，但我也希望能够定义 where 子句参数，如 name=foo 相同参数图。这些参数应该是动态的，因为我想创建一个通用的 getAll 方法，该方法可以在 GET 调用中获取任何参数映射。

所以我猜的问题是：如何实现动态查询参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:38:32.607

我认为您混淆了实际网址中的查询参数：

someurl/resource?param1=value1¶m2=value2

表单 url 编码信息格式相同，但参数在正文中。由于 GET 请求不接受正文，因此您要么意味着要执行 POST，要么要使用查询参数而不是 x-www-form-urlencoded。

祝你好运！

编辑：

如果您确切知道要输入哪些参数，则您想使用 @QueryParam，如果您不确定 URL 中需要多少/哪些查询参数，则使用 @Context UriInfo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:35:49.030

`@GET`来自[JAX-RS](http://jcp.org/aboutJava/communityprocess/final/jsr311/index.html)。GET 请求不应包含正文。尝试使用相同的示例`@POST`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:29:38.500

我为更复杂的问题编写了我的解决方案：map GET params throw MultivaluedMap to Object。可能对其他人有帮助。

GET 查询是与您的服务器聊天的非常简单的方法。即使是具有浏览器 url 控制的非程序员也可以执行简单的 API 任务。

但是不推荐从“get”查询创建对象的方式（原因之一是最大限制为 4000 个符号）。

GET 查询默认具有 MediaType.APPLICATION_OCTET_STREAM。

```
// GOAL: create simple in use API (for non-programmers) to call rest service to test functional. User can use any business object field.
//      So need map GET query params to server business object.

// Create Provider and save it in jersey rest folder (for auto detect).
// 
// PROBLEM: "get" query hasn't body and query params don't available get from readFrom prodiver method
//          So use uriInfo for getting query params 

@Provider
@Consumes(MediaType.APPLICATION_OCTET_STREAM)
public class GETQueryMapperProvider<T> implements MessageBodyReader<T> {
    //[!!!] MAIN PART: save the uri
    @Context
    private UriInfo uriInfo;

    @Override
    public boolean isReadable(Class<?> aClass, Type type, Annotation[] annotations, MediaType mediaType) {
        return true;
    }

    @Override
    public T readFrom(Class<T> tClass, Type type, Annotation[] annotations, MediaType mediaType,
                      MultivaluedMap<String, String> stringStringMultivaluedMap,
                      InputStream inputStream) throws IOException, WebApplicationException {
        MultivaluedMap queryParams = uriInfo.getQueryParameters();
        //create from Map Object
        return ServiceUtils.convertMapToObject(queryParams, tClass);
    }
} 
```

第二部分解决方案：

```
public static <T> T convertMapToObject(Map map, Class<T> objectClass) {
    try {
        //[!!!] MAIN PART - MultivaluedMap for each value create list. 
        //But we list only for fields with collection type, for other need take first value. 
        map = fixCollectionsValue(map, objectClass);

        ObjectMapper ob = new ObjectMapper();
        StringWriter json = new StringWriter();
        ob.writeValue(json, map);

        return ob.readValue(json.toString(), objectClass);
    } catch (IOException e) {
        log.error(e.getMessage(), e);
    }
    return null;
}
protected static Map fixCollectionsValue(Map map, Class objectClass) {
    Map newMap = new HashMap(map);
    for(Field field : objectClass.getDeclaredFields()) {
        if(!Modifier.isStatic(field.getModifiers())
                &&!Modifier.isFinal(field.getModifiers())) {
            String name = field.getName();
            Object value = map.get(name);
            Object newValue = value;
            if(value != null) {
                if(isCollectionClass(field.getType())) {
                    if(!isCollectionClass(value.getClass())) {
                        newValue = new ArrayList();
                        ((ArrayList) newValue).add(value);
                        newMap.put(name, newValue);
                    }
                } else {
                    if(isCollectionClass(value.getClass())) {
                        //take first value to our object
                        newValue = ((Collection) newValue).iterator().next();
                        newMap.put(name, newValue);
                    }
                }
            }
        }
    }
    return newMap;
}
protected static boolean isCollectionClass(Class clazz) {
    return clazz.isArray() ||
           Collection.class.isAssignableFrom(clazz);
} 
```

# .net - 在没有 windowless=true 的 Silverlight 中显示 HTML 内容

> ID：12513759
> 
> 赞同：1
> 
> 时间：2012-09-20T13:33:19.620
> 
> 标签：.net, silverlight, telerik

我是 Silverlight 的新手，想在**Silverlight App中显示一些****HTML**。我一直在阅读一些方法，例如 Telerik 的**HTMLPlaceHolder**或**HTML Overlays**，通过将一些 css 和 javascript 与应用程序混合。

 ******问题是两者都需要我设置 windowless=true ，在经历了以下限制之后：

[http://blogs.msdn.com/b/silverlight_sdk/archive/2008/11/12/limitations-of-windowless-mode-for-silverlight.aspx](http://blogs.msdn.com/b/silverlight_sdk/archive/2008/11/12/limitations-of-windowless-mode-for-silverlight.aspx)

我认为这不值得，有没有任何方法可以在**没有无窗口**设置为 true的情况下显示**HTML ？**

 **提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:46:43.003

从 Silverlight 4 开始，当您的应用程序用尽浏览器时，您可以使用一个[WebBrowser控件。](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser%28v=VS.95%29.aspx)从 Silverlight 5 开始，它也可以在浏览器中运行，但需要[提升](http://msdn.microsoft.com/en-us/library/gg192793%28v=vs.95%29.aspx)对用户系统的信任。

对于非常简单的 HTML，您还可以尝试[HtmlTextBlock](http://www.sharpgis.net/post/2010/09/15/Displaying-HTML-in-Silverlight.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:25:34.427

我正在使用 Telerik 的 RadRichTextBox，它可以让您渲染几乎任何类型的文档。

Herzmeister，非常感谢您的回答，在查看了您建议的 HTMLTextBlock 的代码后，我可以想出一个解决方案.. 这是我使用的代码..

> .xaml

```
<UserControl x:Class="RadControlsSample.RadRichTextBoxTest"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"            
    xmlns:telerikHtml="clr-namespace:Telerik.Windows.Documents.FormatProviders.Html;assembly=Telerik.Windows.Documents.FormatProviders.Html"
    mc:Ignorable="d" d:DesignWidth="700" d:DesignHeight="400" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
    Loaded="Example_Loaded">

    <Grid x:Name="LayoutRoot">
        <telerik:RadRichTextBox Grid.Row="1" x:Name="richTextBox" DataContext="{Binding}" IsReadOnly="True" ShowMergeFieldsHighlight="False" IsSpellCheckingEnabled="False" />
    </Grid>
</UserControl> 
```

> 。CS

```
using System;
using System.IO;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Resources;
using Telerik.Windows.Documents.FormatProviders.Html;
using Telerik.Windows.Documents.Model;

namespace RadControlsSample
{
    public partial class RadRichTextBoxTest : UserControl
    {
        private const string SampleDocumentPath = "SampleData/SomeHtml.html";

        public RadRichTextBoxTest()
        {
            InitializeComponent();
        }

        private void Example_Loaded(object sender, RoutedEventArgs e)
        {
            //Load html file from the content file
            var fileUri = new Uri(SampleDocumentPath, UriKind.Relative);
            StreamResourceInfo streamInfo = System.Windows.Application.GetResourceStream(fileUri);
            var reader = new StreamReader(streamInfo.Stream);
            this.richTextBox.Document = new HtmlFormatProvider().Import(reader.ReadToEnd());
            this.richTextBox.Document.LayoutMode = DocumentLayoutMode.Flow;
        }
    }
} 
```********

# vb.net - 如何从我的 VB 代码 (Windows Phone/Silverlight) 更改颜色资源？

> ID：12513762
> 
> 赞同：2
> 
> 时间：2012-09-20T13:33:24.253
> 
> 标签：vb.net, windows-phone-7, xaml, colors

我正在尝试在我的 XAML 中设置一个配色方案，该配色方案可以通过我的应用程序中的 VB 代码进行更改。我在整个 UI 中使用 Color 和 SolidColorBrush，它们的定义如下：

```
<Color x:Key="PrimaryColour">#FFF7A619</Color>
 <SolidColorBrush x:Key="PrimaryColourBrush" Color="{StaticResource PrimaryColour}"/> 
```

我想在我的 VB 代码中更改我的所有 SolidColorBrush 和 Color 资源以更改配色方案。

我可以像这样成功更改 SolidColorBrushes：

```
TryCast(App.Current.Resources("PrimaryColourBrush"), SolidColorBrush).Color = ThisTeam.TeamPrimaryColour 
```

在我的 ThisTeam 类中定义了颜色：

```
Public Property TeamPrimaryColour As Color = Colors.Purple 
```

但我不知道如何对颜色资源做同样的事情。我试过像这样简单地设置资源：

```
App.Current.Resources("PrimaryColour") = ThisTeam.TeamPrimaryColour 
```

并尝试模仿适用于刷子的 TryCast，但没有运气。我完全迷路了。我尝试过的一切都会导致“NotImplementedException”错误。FWIW 错误总是指向代码中的下一行（即不是试图设置颜色的行），但显然是导致异常的颜色行。

我正在尝试的甚至可能吗？

感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:59:11.367

你应该看看 Coding4Fun 工具包：

[Coding4Fun 工具包](http://coding4fun.codeplex.com/)

它包含 3 个允许选择/选择颜色的工具。

*   颜色六边形选择器
*   选色器
*   颜色滑块

# ssrs-2008 - 如何减小 SSRS PDF 导出大小

> ID：12513764
> 
> 赞同：3
> 
> 时间：2012-09-20T13:33:24.970
> 
> 标签：ssrs-2008, reporting-services

我有一个导出为 PDF 的 SSRS 报告。该报告有一个有 2 行的表格。（没有格式和一条记录的标题）。创建的 PDF 导出为 130K。我确信这比它需要的要大得多。

有什么方法可以减少从 SSRS 创建的 PDF 的大小？或者我应该注意的任何可能使 SSRS 中的 PDF 膨胀的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:58:28.787

这个问题的最佳通用答案可能是：

*   打开并**检查 RDL 文件中的代码**：它只是一个 XML 文件，即使您不了解具体细节，您也可能能够发现导致报告超出控制的情况。

除了这个通用提示之外，还有两件事会导致您提到的特定问题：

*   如果您在报告中使用特定**字体**，这些字体可能包含在呈现的 PDF 中？（我不能 100% 确定 SSRS 是否能做到这一点，但检查一下也无妨。）
*   **检查您是否有作为资源嵌入的**“挥之不去的”图像：未*使用*但仍嵌入的图像。查看作为资源嵌入的图像，并完全删除不再使用的图像。

# c# - LayoutUpdated 事件需要更新布局...无限循环

> ID：12513766
> 
> 赞同：1
> 
> 时间：2012-09-20T13:33:30.930
> 
> 标签：c#, silverlight, event-handling, begininvoke

我正在使用 C#、Silverlight、WP7。

我正在尝试向我的应用程序添加一个覆盖（类似于[this](http://www.jeff.wilcox.name/2011/10/metrogridhelper/)），该覆盖覆盖在每个 LayoutUpdated 事件系列的末尾。

第一个问题是 LayoutUpdated 会在每个控件事件上多次触发，无论是加载应用程序还是滚动或旋转。我需要在*最后一个*LayoutUpdated 事件之后执行我的代码。根据[这个](https://stackoverflow.com/questions/1577240/wpf-layoutupdated-event-firing-repeatedly)问题，对 Loaded 事件执行 BeginInvoke 将允许我的代码等待所有事件完成触发。我对此的理解正确吗？

另一个问题是更新布局......在 LayoutUpdated 事件上。[这个](https://stackoverflow.com/questions/6511012/loaded-event-not-exactly-loaded)问题说会有一个无限循环的 LayoutUpdated 事件触发，解决方案是设置一个 hasChanged 标志。但是标志需要被某些东西重置，以便在下一个控制事件中，对吗？

我很困惑如何实施解决这两个问题的解决方案。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:06:32.837

我最终用一个解决方案解决了这两个问题。我添加了一个变量来跟踪上次调用此方法的时间，如果在阈值（例如 500 毫秒）内没有调用它，它会将方法添加到调度程序。

这确保了无论 LayoutUpdated 事件被调用一次还是多次，该方法都将执行一次。我将变量初始化为时间的开始，这样即使第一次调用也会执行。

这是我的代码：

```
public class DesignChecker 
{
    private static DateTime lastCallTime = Datetime.MinValue;
    private static int minTimeSpan = 500; //set this threshold to your own needs
    public static void designChecker()
    {
        DateTime curTime = DateTime.UtcNow;
        TimeSpan span = curTime - lastCallTime;
        if (span.TotalMilliseconds < minTimeSpan)
        {
            lastCallTime = curTime;
        }
        else
        {
            lastCallTime = curTime;
            Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    doDesignCheck();
                });
        }
    }
} 
```

# objective-c - OS X / iOS：如何创建无法打印的 PDF？

> ID：12513769
> 
> 赞同：0
> 
> 时间：2012-09-20T13:33:31.617
> 
> 标签：objective-c, cocoa, pdf, encryption, cgpdfcontext

我想创建一个无法打印的 PDF 文档。我为此使用了 Quartz 框架。这就是我所做的（短路）：

```
 PDFDocument *pdfDocument = ...

    NSMutableDictionary *options = [[NSMutableDictionary alloc] init];
    [options setValue:@"test-password" forKey:(NSString *)kCGPDFContextUserPassword];
    [options setValue:@0 forKey:(NSString *)kCGPDFContextAllowsPrinting];

    [pdfDocument writeToFile:savePath withOptions:options]; 
```

但我仍然可以使用 Preview.app 打印生成的文件，而无需输入密码。

如果我设置了*kCGPDFContextOwnerPassword*，文档将被密码锁定（但不是打印功能）

我究竟做错了什么？

谢谢！

[CGPDF上下文参考](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGPDFContext/Reference/reference.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:14:32.727

在使用*CFMutableDictionaryRef*而不是*NSMutableDictionary*之后，它终于可以工作了。不要问我为什么... :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:27:52.810

将`kCGPDFContextAllowsPrinting`值设置为`kCFBooleanFalse`but by`default`此键的值是`kCFBooleanTrue`。

使用用户密码解锁时文档是否允许打印。

# jquery - fancybox 2 - 重新加载页面

> ID：12513788
> 
> 赞同：3
> 
> 时间：2012-09-20T13:34:15.457
> 
> 标签：jquery, callback, fancybox

我刚刚更新了我的 fancybox 版本，我注意到父页面的 rafraichisement 不起作用。在我做之前：

```
OnClosed: function () {
    parent.location.reload (true);
} 
```

但是今天该怎么做呢？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:40:29.747

### 打回来

```
afterClose: function() {
    window.location.reload()
} 
```

### 工作示例

```
// Tested and works as expected 
$(".fancybox").fancybox({
    afterClose: function() {
        window.location.reload();
    }
}); 
```

`afterClose`关闭动画结束后调用回调。顺便说一句：http: [//fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

# c# - 如何禁止 TreeView.ExpandAll 方法自动滚动到树的末尾？

> ID：12513791
> 
> 赞同：3
> 
> 时间：2012-09-20T13:34:24.193
> 
> 标签：c#, .net, winforms, treeview

我有一棵巨大的树，大约有 1000 个节点，当我使用 TreeView.ExpandAll 方法时，它会将所有树滚动到最后并不顺利。如何让它平滑滚动或根本不滚动（让留在开始）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:39:01.540

我实际上最近不得不解决这个问题。我在调用 ExpandAll() 方法后所做的只是将[TreeView中的](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aspx "TreeView")[SelectedNode](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.selectednode.aspx "选定节点")设置为第一个节点，如下所示：

```
this.treeView1.ExpandAll();
this.treeView1.SelectedNode = this.treeView1.Nodes[0]; 
```

您要小心，因为如果 TreeView 中有 0 个节点，这可能会引发异常，因此最好将其放在 try-catch 块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:26:26.920

通过使用 TreeView 控件的 BeginUpdate() 和 EndUpdate() 方法，您可以在将节点添加到树时暂停 TreeView 控件的绘制。在显示控件的滚动条部分时，TreeView 控件的 ExpandAll() 方法似乎忽略了该部分。

一个简单的解决方法是在将节点分支添加到 TreeView 控件之前展开父节点，同时使用这些 BeginUpdate() 和 EndUpdate() 方法。

例子：

```
treeView1.BeginUpdate();
for (int i = 0; i < 4; ++i) {
  TreeNode tn = new TreeNode("Node #" + i.ToString());
  tn.Expand();
  for (int j = 0; j < 250; ++j) {
    tn.Nodes.Add("Child #" + j.ToString());
  }
 treeView1.Nodes.Add(tn);
}
treeView1.EndUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-13T19:33:31.503

[在ExpandAll](https://msdn.microsoft.com/pt-br/library/system.web.ui.webcontrols.treeview.expandall(v=vs.110).aspx)为我工作之后立即使用[EnsureVisible](https://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.ensurevisible(v=vs.110).aspx)方法：

```
tree.ExpandAll();
tree.Nodes[0].EnsureVisible(); 
```

# ruby-on-rails - 从 RedCloth 获取文本字数

> ID：12513793
> 
> 赞同：0
> 
> 时间：2012-09-20T13:34:28.743
> 
> 标签：ruby-on-rails, ruby, textile, redcloth

我刚刚开始在我的 ruby​​ on rails 应用程序中使用 RedCloth 作为一个简单的 wiki 功能的一部分。

我希望能够在索引中的 wiki 页面旁边显示字数。

鉴于从数据库中提取的纺织品作为输入，我应该如何获得准确的字数作为输出？

最明显的解决方案是简单地拆分`/\s+/`并删除所有已知的纺织标记，例如`p.`或`#`从结果数组中删除。

但我想知道是否有更优雅（不那么乏味）的解决方案，例如 RedCloth 的一个功能或从 RedCloth html 输出中删除标记的快速且现成的方法，这将只留下空格分隔的单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:05:57.487

不幸的是，你的分裂想法可能是最好的。为了性能起见，我会在您将更改保存到 wiki 页面时进行计算，并仅存储该数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:41:58.613

1.  将 RedCloth 渲染为 html。
2.  剥离 html。
3.  比字数统计。

# php - 为 mongocollection 返回一个 mongo 对象 php

> ID：12513796
> 
> 赞同：0
> 
> 时间：2012-09-20T13:34:30.503
> 
> 标签：php, mongodb, mongoid, mongo-collection

我有一个 mongo 类，稍后我想在其中添加 CRUD 函数，但是到目前为止，我想在创建 Mongo 的对象后编写自己的集合函数，所以每当我想使用 mongodb 时，我只需创建我的类的对象, 并编写命令

但它给了我这个错误：

引发异常：错误 (2)：“MongoCollection::__construct() 期望参数 1 为 MongoDB，给定对象

我怎样才能得到它作为 MongoDB，

**mongo.class.php**

```
 class Mongo
   {
        public function __construct(){
               $this->connect();
        }
        public function connect{
                $this->conn = new \Mongo("mongodb://admin:123456@192.168.2.3); 
                $this->dbLink = $this->conn->selectDB('profiles');
                return $this->dbLink;
    } 
```

**索引.php**

```
 $myMongo = new Mongo(); 
       $collection = new MongoCollection($myMongo,'user'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:38:19.907

我想有问题的行应该这样写：

```
$collection = new MongoCollection($myMongo->dbLink, 'user'); 
```

您似乎期望`Mongo`类构造函数将返回`connect`方法返回的值。但这不是真的：构造函数返回整个对象（哪些属性可能 - 也可能没有 - 在执行时定义）。

有人可能会说不`dbLink`应该直接暴露属性，而应该使用 getter 方法：

```
private $dbLink;
...
public function getDb() {
  return $this->dbLink;
}
...
$collection = new MongoCollection($myMongo->getDb(), 'user'); 
```

我，我认为在这种情况下这是不必要的，因为您的课程似乎与 Mongo 本身紧密耦合（对我来说，这是应该首先解决的问题）。

# css - 支持 IE6+ 的基于百分比的 CSS 网格？

> ID：12513820
> 
> 赞同：0
> 
> 时间：2012-09-20T13:36:00.633
> 
> 标签：css, internet-explorer-6, percentage, grid-layout

我正在寻找一个轻量级的基于百分比的 CSS 网格系统（最好是 12 列），它已被证明与 IE6+ 和所有现代浏览器兼容。此外，这不是绝对必要的，但对嵌套列的支持会很好。我发现的大多数网格系统要么不支持 IE6，要么只是基于像素的宽度。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:21:13.977

试试这个：[http ://www.tinyfluidgrid.com/](http://www.tinyfluidgrid.com/)

另外，我认为您应该阅读一下：[http ://www.alistapart.com/articles/fluidgrids/](http://www.alistapart.com/articles/fluidgrids/)

# django - Django Serve Static Files - Django-Storages 的正确 URL 设置

> ID：12513821
> 
> 赞同：0
> 
> 时间：2012-09-20T13:36:06.247
> 
> 标签：django, deployment

我只是对如何设置我的 URL 设置以便正确地提供静态文件感到头疼。

对于开发，我的 URL 设置如下所示。

```
(r'^static/(?P<path>.*)$', 'django.views.static.serve',
    {'document_root': settings.STATIC_ROOT, 'show_indexes': True}), 
```

但我认为我必须更改此设置，因为 django.views.static.serve 仅用于开发。至少这在Django 1.1的[文档中有所说明。](https://docs.djangoproject.com/en/1.1/howto/static-files/#the-big-fat-disclaimer)而在我目前正在使用的 Django 1.4的[文档](https://docs.djangoproject.com/en/1.4/howto/static-files/)中找不到免责声明。

我正在使用[django-storages](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)和 s3 来提供静态文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:32:15.930

您无需在 urls.py 文件中添加任何内容，因为您的文件是从 S3 提供的。

为您的开发服务器和生产使用 django[内置视图](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)，只需在 settings.py 文件中设置 STATIC_URL 和 STATIC_ROOT 的权限路径。

```
STATIC_URL = 'http://s3.amazonaws.com/yourbucket/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:49:49.730

我会使用[django cumulus](https://github.com/richleland/django-cumulus) 它有很好的文档，我已经成功地使用它来提供来自亚马逊和 rackspace cdn 的静态文件

Cumulus 文档将准确地告诉您在静态配置的设置文件中要做什么

如果您不想 - 在我的情况下将您的静态 URL 设置为您的亚马逊存储桶，我使用的是 rackspace，所以我的静态 url 看起来像：STATIC_URL = '//csk3ls.r93.d2.rackcdn.com/'

# unix - 在 *nix 上持续设置 Hubot 的 Campfire 变量

> ID：12513825
> 
> 赞同：0
> 
> 时间：2012-09-20T13:36:26.237
> 
> 标签：unix, github, hubot, campfire

我已经根据[Campfire 适配器 README](https://github.com/github/hubot/wiki/Adapter%3a-Campfire)成功设置了一个带有变量设置的[Hubot](http://hubot.github.com/)，但是当我重新启动我的 shell 时，不再设置变量。如何以跨 shell 会话持续存在的方式设置这些变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:12:38.387

我知道我必须将它们保存到一个文件中，而不仅仅是`export`在 shell 中输入命令，但我不知道这很简单：

1.  编辑 bin/hubot 文件本身（我认为必须有一些单独的配置文件）
2.  只需在 hubot 文件中键入与我在 shell 中键入的完全相同的导出命令（我认为会有一些奇怪的语法，但没有。）

# android - 获取当前片段并在 onSaveInstanceState() 方法上保存屏幕方向

> ID：12513827
> 
> 赞同：10
> 
> 时间：2012-09-20T13:36:30.410
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock, screen-orientation

我有一个包含多个片段的活动。我也在使用 actionbarSherlock 作为我的标签，它也连接到片段。

我的问题是当我要旋转屏幕（即纵向到横向/反之亦然）时，我的活动将再次被调用，因此它重新启动了我的活动。

我不想重新开始我的活动，而只是恢复在旋转之前显示的当前片段。请不要回答`android:configChanges="orientation|keyboardHidden"`，因为它没有解决问题，而只是简单地破解它。我的解决方案是 OnsaveInstanceState 和 onRestoreInstanceState 方法，但我只是不知道如何使用它来解决我的问题。请帮我解决这个问题。任何回应都非常感谢。

代码：

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ActionBar actionBar = getSupportActionBar();  
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tabA = actionBar.newTab().setIcon(R.drawable.about);
    ActionBar.Tab tabE = actionBar.newTab().setIcon(R.drawable.faq);
    ActionBar.Tab tabB = actionBar.newTab().setIcon(R.drawable.sponsors);
    ActionBar.Tab tabC = actionBar.newTab().setIcon(R.drawable.map);
    ActionBar.Tab tabD = actionBar.newTab().setIcon(R.drawable.destination);
    Fragment aboutTab = new PhotosActivity();
    Fragment sponsorTab = new SongsActivity();
    Fragment mapTab = new HCCMapActivity(); 
    Fragment questTab = new FaqActivity(); 
    Fragment DestinationTab = new TourActivity();
    tabA.setTabListener(new MyTabsListener(aboutTab));
    tabB.setTabListener(new MyTabsListener(sponsorTab));
    tabC.setTabListener(new MyTabsListener(mapTab));
    tabD.setTabListener(new MyTabsListener(DestinationTab));
    tabE.setTabListener(new MyTabsListener(questTab));
    actionBar.addTab(tabD, 0, true);
    actionBar.addTab(tabC, 1, false);
    actionBar.addTab(tabA, 2, false);
    actionBar.addTab(tabB, 3, false);
    actionBar.addTab(tabE, 4, false);
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  // Save UI state changes to the savedInstanceState.
  // This bundle will be passed to onCreate if the process is
  // killed and restarted.
  savedInstanceState.putString("MyString", "Welcome back to Android");
  //savedInstanceState.putString("id",)
  // etc.
  //getSupportFragmentManager().putFragment(savedInstanceState, "fragment", getSupportFragmentManager().findFragmentById(R.id.fragment_place));
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    FragmentManager fragmentManager ;
    FragmentTransaction ft ;
    super.onRestoreInstanceState(savedInstanceState);
  // Restore UI state from the savedInstanceState.
  // This bundle has also been passed to onCreate.
  String myString = savedInstanceState.getString("MyString");
  Log.i("Hello", myString);

    fragmentManager =  getSupportFragmentManager();
    ft = fragmentManager.beginTransaction();
    ft.setCustomAnimations(R.anim.slide_out_left, R.anim.slide_out_right);  
    ft.replace(R.id.fragment_place, getSupportFragmentManager().getFragment(savedInstanceState, "fragment"), null); 
}

@Override
public void onConfigurationChanged (Configuration newConfig){
    Log.i("hello", "Config");
    super.onConfigurationChanged(newConfig); 
}

@Override
public boolean onPrepareOptionsMenu (Menu menu) {
    //MenuItem menuitem1 = menu.findItem(R.id.menuitem1);
    //menuitem1.setVisible(false);

    menu.getItem(1).setVisible(false);
    menu.getItem(0).setVisible(false);
    return true;
}

 protected class MyTabsListener implements TabListener{

    Fragment fragment;

    public MyTabsListener(Fragment fragment){

        this.fragment = fragment;
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {           
        if (myTabPosition < 0){
            //ft.setCustomAnimations(android.R.animator.fade_in, android.R.animator.fade_out);  
        }else{
            if (myTabPosition >  tab.getPosition()){
                ft.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_right);   
            }else{
                ft.setCustomAnimations(R.anim.slide_out_left, R.anim.slide_out_right);  
            }
        }   
        myTabPosition = tab.getPosition();
        ft.replace(R.id.fragment_place, fragment, null);    
        //ft.commit();
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        ft.remove(fragment);
        getSupportFragmentManager().popBackStack(null, FragmentManager.POP_BACK_STACK_INCLUSIVE);
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T13:52:50.687

如果您不再次添加，默认情况下，设备旋转后会恢复片段。如果您希望片段看起来相同，那么您应该自己执行您的`onSaveInstanceState`片段`Fragment`。在`Activity`您可以执行以下操作：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(savedInstanceState == null) {
        /* First launch, add fragments */
    } else {
        /* 
           Activity restored, don't add new fragments or in your case,
           don't make the first tab selected. 
        */
    }
} 
```

即使您没有`onSaveInstanceState`在活动中覆盖，`savedInstanceState`在恢复`Activity`. 它只是一个空的`Bundle`。

另一种选择是存储所选选项卡索引是什么，并在您的活动恢复时重新选择该选项卡。

```
@Override
public void onSaveInstanceState(Bundle outState) {
    outState.putInt("CurrentTab", currentTabIndex);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /* Your existing code */

    if(savedInstanceState != null) {
        int currentTab = savedInstanceState.getInt("CurrentTab", 0);
        /* Set currently selected tab */
    }
} 
```

这将重新选择当前选项卡并显示`Fragment`正在显示的选项卡。唯一的缺点是你的片段的状态没有被保存。要保存片段的状态，您必须执行类似于第一个解决方案的操作。

# ruby-on-rails - 我是否需要在所有目标机器（Capistrano）上安装公钥？

> ID：12513829
> 
> 赞同：0
> 
> 时间：2012-09-20T13:36:39.260
> 
> 标签：ruby-on-rails, linux, unix, deployment, capistrano

我正在使用 Capistrano 将我们的代码部署到许多机器（**几台到数百**台）。

我将使用 Capistrano 来执行此操作。据我所知，我需要为 Capistrano 使用的 SSH 登录生成一对公私钥；我想我可能需要将我的公钥安装到我**所有的目标机器**上。我对吗？

有一个更好的方法吗？这很乏味。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:46:43.167

是的，这是与远程服务器进行身份验证的唯一方法，否则您必须使用用户名和密码。

我们实际上是使用 Puppet 来安装基础系统和公钥。然后您可以使用 capistrano 进行部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:58:10.960

我也没有安慰。

但试着这样看：如果你有`x`机器要部署，没有公钥加密，你将不得不使用密码`x * #deployments`时间登录。现在你只需要登录`x`时间。您部署的越多，优势就越大。

当然，如果您只计划部署一次或两次，那么可能只有很小的优势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:00:46.303

是的，您的 Capistrano 脚本将通过 ssh 进入机器以启动部署。您应该注意，很可能会有一个 ssh 从目标机器返回到保存要部署的文件的机器。因此，您还需要将目标机器的公钥放在处理版本控制的机器上）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:45:19.820

要回答您的问题，是的，要获得 SSH 密钥身份验证登录，您需要将您的公钥放在每台机器上。如果部署涉及登录大量单独的服务器，那么我建议您做错了什么。想到的第一个解决方案是让每个框在某种触发器（例如成功的 CI 构建）之后从中央存储库中检查最新的工作副本，但是如果不了解您的项目的更多信息，很难说出什么最有效.

# bash - 在shell编程中用转义序列替换字符串中的特殊字符

> ID：12513830
> 
> 赞同：1
> 
> 时间：2012-09-20T13:36:39.680
> 
> 标签：bash, shell, ksh

我有脚本文件，它用文件中的一个单词替换了另一个单词。

这是我使用的一段代码。现在我面临的问题是当 Var1 和 Var2 是路径名时。我对 shell 脚本很陌生。我知道我应该在前面放一个转义序列。因为 var1 和 var2 是从 csv 文件中读取的我不能手动在它们上面放置转义序列。有没有办法在这个命令之前检测特殊字符并用转义序列替换它们

$f 是文件名

```
sed -i "s/$Var1/$Var2/g" "$f" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:51:49.313

嘿，

您可以使用不同的字符来分隔语句：

```
sed "s%PATTERN%PATTERN%" 
```

sed 在命令之后看到的第一个字符将用于分隔您的模式。

在您的示例中，这可能是：

```
sed -i "s%$Var1%$Var2%g" "$f" 
```

然后`$Var1`并且`$Var2`可以 持有 any`/`但 not `%`。如果必须将分隔符用作模式，则必须使用`\`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:44:40.157

您可以像这样引用变量：

```
sed -i 's@'"${Var1}"'@'"${Var2}"'@g' "${f}" 
```

由于您在变量中提到了路径，因此也将通知`/`替换为。`@`

# macos - 为非键 NSWindow 调整光标

> ID：12513832
> 
> 赞同：0
> 
> 时间：2012-09-20T13:36:46.040
> 
> 标签：macos, nswindow

根据文档，invalidateCursorRectsForView：仅在窗口为键时更新光标。当窗口不是关键窗口时，有没有办法调整光标？

# c# - 接口扩展方法，具有匹配的泛型参数

> ID：12513833
> 
> 赞同：2
> 
> 时间：2012-09-20T13:36:48.957
> 
> 标签：c#, generics, extension-methods

## 更新 1

我意识到简单泛型类型的原始限制意味着我无法比较不同类型的对象，无论它们是否实现`IComparable<T>`，因此最新的是现在：

```
public static bool IsLessThan<TSource, TComparer>(this TSource source, TComparer comparer)
    where TSource : IComparable<TComparer>
    where TComparer : IComparable<TComparer>
{
    return source.CompareTo(comparer) < 0;
} 
```

## 原来的

我在接口上写了一个简单的`IsLessThan(IComparable comparer)`扩展方法。`IComparable`但是，我遇到了一个小*问题*；我已经意识到本质上它允许`IComparable`比较任何东西，我宁愿没有。或者我想知道是否可以使用泛型类型来限制参数？目前我的扩展方法如下所示：

```
public static bool IsLessThan(this IComparable source, IComparable comparer) 
{
    return source.CompareTo(comparer) < 0;
} 
```

有什么方法可以使用泛型来确保`source`和`comparer`是相同的类型，同时仍然保持 的约束`IComparable`？

## 例子

```
int test = 2;
var resultOne = test.IsLessThan(3); // should return true
var resultTwo = test.IsLessThan("Hello world"); // shouldn't compile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:38:49.717

好吧，你可以使用：

```
public static bool IsLessThan<T>(this T source, T comparer) where T : IComparable 
```

或者您可以使用以下命令使其更加受限`IComparable<T>`：

```
public static bool IsLessThan<T>(this T source, T comparer)
    where T : IComparable<T> 
```

后者在避免拳击方面也会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:47:24.007

这是完整的代码

```
public static class ComparableEx
{
    public static bool IsLessThan<T>(this T source, T comparer)  
        where T : IComparable<T>
    {
        return source.CompareTo(comparer) < 0;
    }

}

class Program
{
    static void Main(string[] args)
    {
        int test = 2;
        var resultOne = test.IsLessThan(3); // returns true
        var resultTwo = test.IsLessThan("Hello world"); // doesn't compile
    }        
} 
```

^(我知道我迟到了，但这是一个独立的解决方案（而且很难与 Jon 竞争，叹息......）)

# java - 视频流无法通过 Internet 或本地网络工作

> ID：12513834
> 
> 赞同：2
> 
> 时间：2012-09-20T13:36:54.480
> 
> 标签：java, applet, rtp, jmf

我正在开发一个项目，该项目需要实现从服务器上的网络摄像头到远程客户端上的小程序的实时视频流。

我有一个代码，用于通过服务器上的 JMF 从网络摄像头捕获实时流，并在 rtp 上部署流和一个从 rtp 地址接收流然后将其播放到其中的小程序。

但问题是它只能在我自己的电脑（服务器）中工作并且不能在本地网络上工作（它加载小程序但不运行视频播放器）。

服务器代码：

```
public class Streaming_Server {

    /**
     * @param args the command line arguments
     */
    private static String PORT = "10000";
    private static InetAddress addr;
    static final Format[] FORMATS = { new VideoFormat("rgb") };
    static final ContentDescriptor CONTENT_DESCRIPTOR = new ContentDescriptor("raw.rtp");

    public static void main(String[] args) throws IOException, NoDataSourceException, NoProcessorException, CannotRealizeException, NoDataSinkException {
        // TODO code application logic here
        try
        {
            addr = InetAddress.getLocalHost();
            String ipAddr = addr.getHostAddress();
            String hostname = addr.getHostName();
            System.out.println("Your IP is " + ipAddr);
            System.out.println("Your Host Name is " + hostname);
        }
        catch (UnknownHostException e){}

        CaptureDeviceInfo webcamInfooo = new CaptureDeviceInfo("Camera", new MediaLocator("vfw://0"), null);
        MediaLocator camDeviceMediaLocator = webcamInfooo.getLocator();
        DataSource source = Manager.createDataSource(camDeviceMediaLocator);
        Processor mediaProcessor = Manager.createRealizedProcessor(new ProcessorModel(source, FORMATS, CONTENT_DESCRIPTOR));
        //MediaLocator outputMediaLocator = new MediaLocator("rtp://" + addr.getHostAddress() + ":" + PORT + "/video");
        MediaLocator outputMediaLocator = new MediaLocator("rtp://192.168.1.4:20000/video");
        DataSink dataSink = Manager.createDataSink(mediaProcessor.getDataOutput(), outputMediaLocator);

        mediaProcessor.start();
        dataSink.open();
        dataSink.start();
    }
} 
```

客户代码：

```
public class Streaming_Client extends Applet implements ControllerListener {

    /**
     * Initialization method that will be called after the applet is loaded into
     * the browser.
     */
    Player player = null;
    private MediaLocator mediaLocator;
    private static String PORT = "10000";
    private static InetAddress addr;

    public void init() {
        // TODO start asynchronous download of heavy resources
        //mediaLocator = new MediaLocator("rtp:/192.168.1.4:10000/video");
        mediaLocator = new MediaLocator("rtp:/192.168.1.4:20000/video");
        setLayout(new BorderLayout());
        try {
            player = Manager.createPlayer(mediaLocator);
            player.addControllerListener(this);
        } catch (IOException | NoPlayerException ex) {
            Logger.getLogger(Streaming_Client.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void start(){
        player.start();
    }

    public void stop(){
        player.stop();
        player.deallocate();
    }

    public void destroy(){
        player.close();
    }
    // TODO overwrite start(), stop() and destroy() methods

    @Override
    public void controllerUpdate(ControllerEvent ce) {
        if ((ce instanceof RealizeCompleteEvent))
        {
        Component comp;
        if ((comp = this.player.getVisualComponent()) != null)
            add("Center", comp);
        if ((comp = this.player.getControlPanelComponent()) != null)
            add("South", comp);
        validate();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:35:07.237

经过一番研究，我发现服务器中的 MediaLocator 采用**目标 IP**而不是源 IP。

这是一件烦人的事情，因为你必须知道你在哪里流式传输。

所以，在这个编辑之后..

```
CaptureDeviceInfo webcamInfooo = new CaptureDeviceInfo("Camera", new MediaLocator("vfw://0"), null);
MediaLocator camDeviceMediaLocator = webcamInfooo.getLocator();
DataSource source = Manager.createDataSource(camDeviceMediaLocator);
Processor mediaProcessor = Manager.createRealizedProcessor(new ProcessorModel(source, FORMATS, CONTENT_DESCRIPTOR));
//MediaLocator outputMediaLocator = new MediaLocator("rtp://" + addr.getHostAddress() + ":" + PORT + "/video");
MediaLocator outputMediaLocator = new MediaLocator("rtp://192.168.1.6:20000/video");
DataSink dataSink = Manager.createDataSink(mediaProcessor.getDataOutput(), outputMediaLocator); 
```

**我只能通过Intranet**从 192.168.1.4 流式传输实时视频捕获到 192.168.1.6 。

但直到现在我还找不到如何通过互联网流式传输，因为我必须分配远程 pc ip。

# c++ - googletest doc C 字符串和字符串

> ID：12513836
> 
> 赞同：1
> 
> 时间：2012-09-20T13:36:57.390
> 
> 标签：c++, c, string, googletest

我正在阅读[Googletest doc](http://code.google.com/p/googletest/wiki/Primer#Assertions)，并且我了解到有一种用于比较字符串的语法，而另一种用于比较 C 字符串的语法。我没有看到所谓的 C 字符串和字符串。这些有什么不同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T13:41:47.393

如果您尝试使用`ASSERT_EQ`C-Strings，您只会比较两个指针，而不是真正以 null 结尾的 C-Strings。为此存在`ASSERT_STREQ`语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:40:36.540

`std::string`常被称为`C++ string`。使用类似的字符串

```
 const char *text = "text"; 
```

称为CStrings。

更多信息可以在这里找到：

[char * const 和 const char * 有什么区别？](https://stackoverflow.com/questions/890535/what-is-the-difference-between-char-const-and-const-char)

[何时使用 const char * 以及何时使用 const char []](https://stackoverflow.com/questions/7903551/when-to-use-const-char-and-when-to-use-const-char)

# java - 使用 Eclipse 的 Java Web Service 客户端身份验证

> ID：12513841
> 
> 赞同：0
> 
> 时间：2012-09-20T13:37:17.090
> 
> 标签：java, eclipse, web-services, wsdl

我使用默认的 Eclipse 向导创建了一个 Web 服务客户端（文件>新建>其他并为 Web 服务客户端选择一个向导）。生成了类，我可以使用带有如下代码的服务方法：

```
import java.rmi.RemoteException;
import javax.xml.rpc.ServiceException;
import com.olsn.ws.ShipmentService_PortType;
import com.olsn.ws.ShipmentService_ServiceLocator;

public class wsClient {
 public static void main(String[] args) throws ServiceException, RemoteException {

             //To load the web service and to create the client
             ShipmentService_ServiceLocator WS = new ShipmentService_ServiceLocator();              
             ShipmentService_PortType client = WS.getShipmentServicePort();

             //To get Close status for Issue
             System.out.println(client.getCloseDesc("35557"));

             //To get the list of NetP projects
             for (int i=1; i<client.getProjects().length;i++)
                 {System.out.println(client.getProjects()[i].toString());}

           }

     } 
```

现在的问题是引入了用户名和密码，我不知道如何修改我的代码来访问服务器，我试图添加验证器：

```
import java.net.Authenticator;
import java.net.PasswordAuthentication;

Authenticator myAuth = new Authenticator() 
{
    @Override
    protected PasswordAuthentication getPasswordAuthentication()
    {
        return new PasswordAuthentication("user", "password".toCharArray());
    }
};

Authenticator.setDefault(myAuth); 
```

或更改生成的代理类的 _initShipmentServiceProxy() 方法

```
 private void _initShipmentServiceProxy() {
    try {
      shipmentService_PortType = (new com.olsn.ws.ShipmentService_ServiceLocator()).getShipmentServicePort();
      if (shipmentService_PortType != null) {
        if (_endpoint != null)
        {
          ((javax.xml.rpc.Stub)shipmentService_PortType)._setProperty("javax.xml.rpc.service.endpoint.address", _endpoint);
          **((javax.xml.rpc.Stub)shipmentService_PortType)._setProperty(javax.xml.rpc.Stub.USERNAME_PROPERTY, "user");
          ((javax.xml.rpc.Stub)shipmentService_PortType)._setProperty(javax.xml.rpc.Stub.PASSWORD_PROPERTY, "password");**
        }  
        else
          _endpoint = (String)((javax.xml.rpc.Stub)shipmentService_PortType)._getProperty("javax.xml.rpc.service.endpoint.address");
      }

    }
    catch (javax.xml.rpc.ServiceException serviceException) {}
  } 
```

但我继续收到这些错误：

```
org.apache.axis.utils.JavaUtils isAttachmentSupported
WARNING: Unable to find required classes (javax.activation.DataHandler and javax.mail.internet.MimeMultipart). Attachment support is disabled.
Exception in thread "main" AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Client.Authentication
 faultSubcode: 
 faultString: Access denied to operation getCloseDesc 
```

请告知我应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:58:53.547

根据您的错误，我假设您正在使用它`Axis`，因此`Authenticator`无法使用。如果要对`Axis`服务执行客户端的基本身份验证，则需要执行以下操作：

```
private static final Logger LOGGER = LoggerFactory.getLogger(YourClass.class);

private ShipmentService_PortType proxy;

public void init()
        throws Exception {
    ShipmentService_ServiceLocator locator = new ShipmentService_ServiceLocator();
    try {
        LOGGER.debug("Initializing shipment service...");
        proxy = locator.getShipmentServicePort(new URL("yourServiceEndpointURL"));
        ((ShipmentServicePortBindingStub) proxy).setUsername("yourUsername");
        ((ShipmentServicePortBindingStub) proxy).setPassword("yourPassword");
        ((ShipmentServicePortBindingStub) proxy).setTimeout(10000);
        LOGGER.debug("Shipment service successfully initialized.");
    } catch (ServiceException e) {
        LOGGER.error("Error in shipment client initialization", e);
        throw new Exception("Error in shipment client initialization.");
    } catch (MalformedURLException e) {
        LOGGER.error("Error in shipment client initialization", e);
        throw new Exception("Error in shipment client initialization.");
    }
} 
```

并且只有在调用此`init()`方法时，您才能通过以下方式调用客户端的方法：

```
proxy.getCloseDesc("35557"); 
```

# android - 让安卓手机对网站上的操作采取行动

> ID：12513847
> 
> 赞同：0
> 
> 时间：2012-09-20T13:37:24.037
> 
> 标签：android, push-notification

这只是我正在考虑的一个理论问题。也许你可以拓宽我的视野。假设有一个简单的网站，我可以在其中输入颜色并点击发送按钮。所以我选择红色。现在我希望我的 Android 手机接收刚刚在网站上提交的颜色为“红色”的消息，并将监听应用程序的背景颜色更改为刚刚提交的颜色。现在我的问题是，我的手机怎么知道服务器刚刚发生了变化？当然，如果发生了变化，我可以稳定地发送请求，或者一直在监听套接字，但这不会是电池效率的......？

也许您有一些有效的想法来收听这些更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:43:55.630

我想这就是你要找的。

> Google Cloud Messaging for Android (GCM) 是一项服务，可帮助开发人员将数据从服务器发送到他们在 Android 设备上的 Android 应用程序。

[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

# mysql - 在mysql中查找具有常用词的字符串

> ID：12513850
> 
> 赞同：1
> 
> 时间：2012-09-20T13:37:29.253
> 
> 标签：mysql

我正在使用 mysql，我有 2 个表

```
emp(id int, name varchar, dept_id int)
dept(id int, name varchar) 
```

我想获得具有以下限制的员工：员工姓名与他/她的部门名称至少有 1 个常用词。

解决方案可以是选择语句还是存储过程？但是，欢迎任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:13:39.987

使用[REGEXP](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)并从`emp.name`. 这是[SQLFiddle 演示](http://sqlfiddle.com/#!2/c4a0c/3)

```
select emp.id,
       emp.name emp_name, 
       dept.name dep_name from emp
join dept
where emp.dept_id=dept.id
      AND

      dept.name regexp 
        CONCAT('([[:<:]]',
               REPLACE(
                   TRIM(emp.name),
                   ' ',
                   '[[:>:]]|[[:<:]]'
               ),
               '[[:>:]])'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:33:27.613

```
SELECT
*
FROM
emp
INNER JOIN dept ON emp.dept_id = dept.id
WHERE
emp.name LIKE CONCAT('%', dept.name, '%') 
```

这将为您提供姓名在其部门名称中的所有员工。但是，如果员工姓名列是前名**和**姓氏，这是糟糕的数据库设计，并且实施“至少一个常用词”的限制有点困难。通过将名称分成两列来更改数据库架构，或者您将不得不使用这些函数

*   `substring()`
*   `substring_index()`
*   `length()`

拆分名称等。这会变得很难看。[在此处](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)阅读有关这些功能的更多信息。

反正你自己试试，不然学不会。这不是一个“为我做所有工作”的网站，当你至少表现出一些研究努力时，会有更多的人愿意提供帮助。祝你好运。

# c# - 如何将 SQL 查询应用于 C# DataTable/Dataset？

> ID：12513853
> 
> 赞同：6
> 
> 时间：2012-09-20T13:37:30.870
> 
> 标签：c#, sql, datatable, dataset

我有一个应用程序，用户可以在其中输入一个 sql 查询作为文本，我需要在我的应用程序中针对 C# DataTable/Dataset 运行它。有可能吗？

编辑：根据答案和一些更多的研究，它无法完成 - 无法将 SQL 查询应用于您已经读入应用程序的表。查看可能的解决方法的答案。

编辑 2：在我的案例中，最终的解决方案是使用 ANTLR 实现一个简单的解析器。它允许用户使用“AND”和“OR”关键字以及括号输入简单的查询。ANTLR 生成的类会将其转换为一组指令，然后我可以使用这些指令来查询 C# 数据集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:05:47.890

如果您的用户将输入除了最简单的选择语句之外的任何内容，那么您将很难做到这一点。我想为您的项目编写一个完整的 SQL 解析器会非常昂贵，但这基本上就是您所说的。

对于我们拥有的本土 ORM，我有一个类，它将本质上预定义的 SQL 查询转换为可以与 一起使用的东西`DataTable.Select`，但是 where 子句是从 SqlParameters 生成的。

**可能的解决方案**

也许您可以结合以下项目来接近您所追求的：

[Linqer（SQL 到 LINQ 转换器）](http://www.sqltolinq.com/)然后[是 LINQ 到 DataSet](http://msdn.microsoft.com/en-us/library/bb386977.aspx)

我自己没有使用过 Linqer。

**其他一些想法**

我相信你一直在考虑这个问题，但是这样做的困难可能意味着如果你缩小一点，会有更好的方法。严格来说，使用未知查询查询缓存意味着您必须用所有可能的数据填充缓存，或者能够在提交查询时调用该数据。根据定义，这不能提供比直接查询源更好的性能，除非您在缓存过时之前充分访问缓存以使其值得。对于临时报告系统（我的假设），我倾向于怀疑情况是否如此，并且我还担心它在除边缘情况之外的任何情况下都不会胜过数据库引擎。

@JoshC 还提到了使用 Sqlite 的可能性，还有可能符合要求的 SQL Server 2012 LocalDB，尽管这些肯定不是 .net 数据集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T13:48:17.250

如果您想在应用程序中针对 c# 数据表/数据集运行搜索字符串

`select`您可以在方法中使用过滤器表达式。

`myDataTable.Select("columnName1 like '%" + value + "%'");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-11T17:11:40.773

其实有一个简单的解决方案。

1.  将 DataTable 中的数据导出到 SQLite 内存数据库。
2.  在 SQLite 内存数据库上运行 SQL。

# iphone - UIPopOverController 表格视图中的箭头方向 | iPad

> ID：12513854
> 
> 赞同：1
> 
> 时间：2012-09-20T13:37:37.197
> 
> 标签：iphone, uipopovercontroller, uipopover

我想`UIPopover`在`UITableView`. 我想在所选行的上方或下方显示它。但目前它正在覆盖选定的行。有什么帮助吗？

# apache - 如何在 Apache Tuscany 中使用元素 DataObject？

> ID：12513855
> 
> 赞同：0
> 
> 时间：2012-09-20T13:37:41.150
> 
> 标签：apache, createelement, apache-tuscany

我有一个 XSD 架构，其中包含 xsd 类型和该类型的元素。

像这样：

```
TargetNamespace: http://mycorp.com/ws
Type: PaymentType
Element: PaymentElement 
```

我需要创建一个表示 PaymentElement 的 commonj.sdo.DataObject。我能用 Tuscany API 做的就是创建 PaymentType 类型的 commonj.sdo.DataObject，这是不合适的。

我这样创建它：

```
DataFactory factory = scope.getDataFactory();
DataObject req = factory.create("http://mycorp.com/ws", "PaymentType"); 
```

如何创建 commonj.sdo.DataObject 元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:19:08.993

我设法解决了这个问题。诀窍是创建元素类型的子类型，其名称与元素名称相同。

我在 CXF 邮件列表中的问题中有更多信息。[关联](http://cxf.547215.n5.nabble.com/Using-SDOs-commonj-sdo-DataObject-with-CXF-td5714321.html#a5714415)

该解决方案不是那么干净，但允许正确的序列化等。

# drupal-7 - Drupal 7 - 使用从数据库检索的数据创建页面

> ID：12513857
> 
> 赞同：2
> 
> 时间：2012-09-20T13:37:47.600
> 
> 标签：drupal-7

我正在使用 Drupal 7 开发一个站点。我从访问者那里收集一些数据并将它们存储在 drupal db 的自定义表中。该数据与关联相关，包括地址、联系人和其他一些信息。该数据仅存储在数据库中，但不会显示在站点中。我想要做的是创建一个自定义内容类型，在其中我通过一个选择字段选择一个关联并从 db.xml 检索数据。有了这些数据，我想将它们“嵌入”到 html 代码中，而无需重新输入信息。有可能这样做吗？

我希望我的问题很清楚。

提前致谢， 毛罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:33:23.337

Well, time has come to create your [first Drupal Module](http://reinholdweber.com/2010/06/28/create-your-first-simple-drupal-7-module/) .

1.  Create module files (module.info, module.module , module.install )
2.  Use [Schema module](http://drupal.org/project/schema) to examine your custom table and provide you the hook_schema() you need in your .install file
3.  Create a hook_menu() to create the path you need for your page e.g mydrupal.com/custompage
4.  In custompage callback function , query your database using the [best practices](http://api.drupal.org/api/drupal/includes!database!database.inc/group/database/7) and return your data

for the custom content types and configurable theming you need to go even further and take advantage of the [node_api](http://api.drupal.org/api/drupal/modules!node!node.api.php/group/node_api_hooks/7) and theming hooks and functions

Hope this helped

# java - JavaMelody 奇怪的信息

> ID：12513860
> 
> 赞同：2
> 
> 时间：2012-09-20T13:37:52.577
> 
> 标签：java, jakarta-ee, monitoring, java-melody

我是 JavaMelody 的新手。“统计 http - 1 天”块显示以下信息：（ ![在此处输入图像描述](../Images/8fac9ff946862cf65c40baf793950533.png)
[链接）](https://i.stack.imgur.com/oDlMD.png)

如您所见，我有很多`select`请求，最大时间为 128 毫秒。好的，我正在向下移动并检查“当前请求”块：（ ![在此处输入图像描述](../Images/f51a3d2b90b946a43e8b6ac3ad8757df.png)
[链接）](https://i.stack.imgur.com/oTwaA.png)

此刻我有 3 个请求需要比 128 毫秒更多的时间来执行！为什么 JavaMelody 在“Statistics http”块和“Http mean times”图中显示错误信息？我误解了显示的信息吗？

# java - Apache Tomcat 是否适合 MySQL、Jetty 或 Glassfish？

> ID：12513862
> 
> 赞同：1
> 
> 时间：2012-09-20T13:37:57.710
> 
> 标签：java, tomcat, glassfish, webserver, jetty

我已经**为 iPhone/iPad**设备使用 Java 中的 Restlet API 开发了 WebService。

我们的服务器是**Linux CentOS，2GB RAM，14GB 磁盘空间**。

我正在使用**Apache Tomcat 6.0.35 和 MySQL 5.1**数据库。

这些用户可能有很多并发用户，例如 100000。

所以我的问题是 Apache Tomcat 和 MySQL 是它的最佳组合，或者我应该改变组合，如**Jetty 或 Glassfish 或任何其他 Web 服务器**和**MySQL 或其他数据库**？

但我担心组合的性能。

所以请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:42:47.520

该硬件上的任何配置都不会为 100000 个并发用户提供服务。这是一个巨大的数字。除非您手头有下一个 google，否则我认为您一次最多只能查看几个并发用户，这取决于您在做什么，应该很容易管理。

就个人而言，我使用 tomcat 是因为我认为它比 glassfish 更“轻”一点。Glassfish 虽然在其管理控制台中提供了更多配置。

编辑：

显然 Jetty 确实可以用作生产就绪的应用程序服务器。请参阅下面的评论。我的经验纯粹是用它来测试，但这是一次很好的体验！

# c# - 读取文本文件的特定部分

> ID：12513864
> 
> 赞同：1
> 
> 时间：2012-09-20T13:38:07.427
> 
> 标签：c#

我想读取写入不断更新的文本文件的所有行。我尝试了以下方法，但这导致我阅读重复文件。

1.  获取文件大小
2.  从零读取到文件末尾
3.  从步骤 1 中的文件大小开始读取到文件末尾
4.  重复上一步

问题是我在读取文件时复制了写入文件的文件。这是因为我正在阅读文件的末尾。

我想做的是以下

1.  获取文件大小
2.  从步骤 1 读取从零到文件大小
3.  获取文件大小
4.  从步骤 1 中的文件大小开始读取到步骤 3 中的文件大小
5.  重复前面的步骤

这样我就永远不会重复读取的行。

这可能吗，我想我需要为流阅读器/文件阅读器指定一个起点和终点来读取文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:53:51.850

如果您确实必须使用文件进行进程间通信，则可以使用[内存映射文件进行调查。](http://msdn.microsoft.com/en-us/library/dd267538.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:08:02.500

您也许可以尝试这样的事情：

1.  将文件重命名为临时名称
2.  使用原始名称创建一个新的空文件
3.  处理临时文件
4.  重复

如果由于某种原因文件总是被其他进程锁定，您可以尝试对同一进程进行这种更改。

1.  将文件复制到临时名称
2.  注意文件大小
3.  处理文件
4.  重复，下一次从 FileSize + 1 开始处理

# performance - ToTraceString 需要很长时间才能执行

> ID：12513865
> 
> 赞同：5
> 
> 时间：2012-09-20T13:38:12.280
> 
> 标签：performance, entity-framework, entity-framework-4, linq-to-entities

我有一个通过 Entity Framework 4 执行查询的服务，它没有任何问题，直到现在我尝试在带有 IIS 6 的 Windows Server 2003 或带有 IIS 7 的 Windows 7 上执行它。

现在，当我尝试在 Windows Server 2008 R2 和 IIS 7.5 上运行相同的服务时，**相同的查询**变得非常慢（从 200 毫秒到 3 秒）。分析问题我发现，当它尝试生成要执行的sql查询时需要很长时间，只需调用一个**ToTraceString()就需要将近3秒。**

我不知道操作系统和 IIS 版本是否可能是问题，但它们是我看到的唯一差异。

谢谢

**更新**

我发现问题实际上是在 Entity Framework 生成查询所需的时间，它取决于处理器，使用 Intel 它运行良好，**使用 AMD 它要慢得多，如果应用程序运行多，它会变得更糟-cores**，强制 w3wp 使用单个内核，它变得更好但仍然比英特尔解决方案慢

# r - 仅添加到向量中的负条目

> ID：12513866
> 
> 赞同：3
> 
> 时间：2012-09-20T13:38:13.500
> 
> 标签：r

我想取一个向量，例如：

```
X <-  c(1,2,3,-1,-2,-3) 
```

并将 1（或任何其他预先固定的数字）添加到值为负的条目中，以产生

```
1,2,3,0,-1,-2 
```

有没有一种巧妙的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T14:49:53.717

针对这个问题在 R Golf 比赛中提交：

```
X+(X<0) 
```

之所以有效，是因为 (X<0) 对于任何所需的情况将被强制为 1，而对于其他情况则为 0。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T13:40:50.400

使用`ifelse`：

```
x + ifelse(x<0, 1, 0)
[1]  1  2  3  0 -1 -2 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-20T13:50:07.173

一种矢量化但略显冗长的替代方法是：

```
> X <-  c(1,2,3,-1,-2,-3)
> want <- X < 0
> X[want] <- X[want] + 1
> X
[1]  1  2  3  0 -1 -2 
```

关键步骤是生成 X 为负数 ( `want`) 的索引。然后我们使用它来索引`X`并仅向这些添加 1。

向量化是否超过了上面涉及的函数调用的数量，我留给其他人讨论（我怀疑它对大多数问题有什么影响）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T13:43:26.590

也许不是最易读的解决方案，但我还是会为了好玩而发布它：

```
> pmax(X, X+sign(X)*(-1))
[1]  1  2  3  0 -1 -2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T08:51:46.333

也可以使用 which 命令：

```
X <-  c(1,2,3,-1,-2,-3)
X[which(X < 0)] <- X[which(X < 0)] +1 
```

# csv - 无法将大型 .csv 行数传输到 Excel 2007

> ID：12513873
> 
> 赞同：1
> 
> 时间：2012-09-20T13:38:23.720
> 
> 标签：csv, vbscript, excel-2007, export-to-excel, file-format

我一直在使用下面的 VBScript 代码片段将每小时的 .csv 文件拖放到 Excel 文件中。除了最近 .csv 超过了 65536 行限制之外，它的工作原理就像发条一样。这台机器充斥着来自兼容性检查器的弹出窗口，然后我意识到它正在使用 Excel 2003，即使安装了 Excel 2007。即使显式调用**Excel.Application.12**对象，也不确定为什么会发生这种情况：

```
Dim oExcel
Set oExcel = CreateObject("Excel.Application.12")
With oExcel
    .DefaultSaveFormat=51
    .Workbooks.Open sourceFile
    .Sheets(1).Columns("A").TextToColumns .Range("A1"), xlDelimited, , , , True
    .ActiveWorkbook.SaveAs outputFile, xlNormal
    .Quit
End With 
```

如何使此脚本在没有兼容性检查器提示的情况下将大于 65536 的行数导入 Excel 2007，同时保留所有源行？

一些附加信息：

1.  全新机
2.  运行 Windows 7 x64 位操作系统
3.  只安装了一个版本的 Office：Office 2007

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:34:28.120

尝试按照[Ron de Bruin](http://www.rondebruin.nl/saveas.htm)`fileformat:=51`的建议添加。

以下摘自OP对问题的编辑：

> 以下更改有效！：
> 
> ```
>  Dim oExcel  
>  Set oExcel = CreateObject("Excel.Application.12")  
>  With oExcel  
>     .DefaultSaveFormat=51  
>     .Workbooks.Open sourceFile  
>     .Sheets(1).Columns("A").TextToColumns .Range("A1"), xlDelimited, , , , True  
>     .ActiveWorkbook.SaveAs outputFile, 51  
>     .Quit  
>  End With 
> ```
> 
> 此外，请确保文件扩展名为 .xlsx。

# java - 我在哪里可以找到 el-ri-1.0.jar 的源代码？

> ID：12513876
> 
> 赞同：2
> 
> 时间：2012-09-20T13:38:28.550
> 
> 标签：java, el

似乎我在任何地方都找不到它。我发现的只是里面只有编译代码的jar。
如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:51:25.653

我相信我在这里找到了它：

[http://grepcode.com/file/repo1.maven.org/maven2/org.mortbay.jetty/jsp-2.1/6.1.12.rc3/com/sun/el](http://grepcode.com/file/repo1.maven.org/maven2/org.mortbay.jetty/jsp-2.1/6.1.12.rc3/com/sun/el)

（似乎 RI 代码已进入 Jetty 代码库。没关系，因为 Sun 代码是在 GPL 许可下发布的......根据标题。）

我看到迹象表明您可以在[http://java.net上的“el”项目中找到参考实现源代码](http://java.net)

更新：

找到了！这是包含 RI 源代码的 Java.net 存储库：http: [//java.net/projects/el-spec/sources/source-code/show](http://java.net/projects/el-spec/sources/source-code/show)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-20T13:47:19.123

[http://mvnrepository.com/artifact/commons-el/commons-el/1.0](http://mvnrepository.com/artifact/commons-el/commons-el/1.0)引导我到[http://commons.apache.org/el/download_el.cgi](http://commons.apache.org/el/download_el.cgi)链接到 [http://www.mirrorservice.org/站点/ftp.apache.org//commons/el/source/commons-el-1.0-src.tar.gz](http://www.mirrorservice.org/sites/ftp.apache.org//commons/el/source/commons-el-1.0-src.tar.gz)

# spring-mvc - -servlet.xml 和 applicationContext.xml 的正确配置声明是什么？

> ID：12513880
> 
> 赞同：0
> 
> 时间：2012-09-20T13:38:40.480
> 
> 标签：spring-mvc

我正在学习如何使用@MVC，现在我对配置文件“...-servlet.xml”和“applicationContext.xml”感到困惑。以下内容*确实有效*，如果您能指出什么是多余或错位的，我将不胜感激。例如，如何避免重复控制器包扫描？

mrpomario-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
              http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
              http://www.springframework.org/schema/context
              http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config/>

    <context:component-scan base-package="mrpomario.springcore.mvc.controller"/>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

</beans> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
              http://www.springframework.org/schema/beans
              http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
              http://www.springframework.org/schema/context
              http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/jdbc
            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
            http://www.springframework.org/schema/tx
            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <context:annotation-config/>

    <context:component-scan base-package="mrpomario.springcore.mvc.controller, mrpomario.springcore.mvc.dao, mrpomario.springcore.mvc.service"/>

    <tx:annotation-driven/>

    <jdbc:embedded-database id="dataSource" type="H2">
        <jdbc:script location="/WEB-INF/mvc-db.sql"/>
    </jdbc:embedded-database>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="packagesToScan">
            <list>
                <value>mrpomario/springcore/mvc/domain</value>
            </list>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver"/>

</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">

    <display-name>MrPomario</display-name>

    <servlet>
        <servlet-name>mrpomario</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>mrpomario</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:42:48.823

基本原理：spring-config.xml -> 在 -> applicationContext.xml 中看到 beans，但不是 VICE-VERSA。

当我将控制器扫描移动到 spring-confing.xml 中时，它仍然无法正常工作。阻止它运行的原因是我在 applicationContext.xml 中保留了以下内容：

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>    

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver"/> 
```

这些（在 applicationContext.xml 中）没有扫描我的 Controller 的 @RequestMappings，因为它们是在 spring-config.xml 中定义的，因此无法看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:53:35.787

如果存在不同的spring servlet（通常只有一个），applicationContext 将在不同的spring servlet 之间共享。

为避免重复，只需从其中一个文件中删除即可。

如果它导致问题，您的 web-inf/web.xml 可能没有正确设置。它需要引用正确的文件来配置上下文。

```
<servlet>
  <servlet-name>mrpomario</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
  <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/mrpomario-servlet.xml.xml</param-value>
  </init-param> 
```

# c# - 如何从 ASP.NET MVC 网站中生成可下载的 c# 类？

> ID：12513888
> 
> 赞同：6
> 
> 时间：2012-09-20T13:39:07.877
> 
> 标签：c#, asp.net-mvc, templates, razor, t4

我敢肯定这是一个非常奇怪的要求，但在这里。

我们有一些客户配置代码，这些代码由我们编译到类库中的 C# 类表示。创建这些配置类目前是我想分配给开发人员以外的其他人的猴子工作。因此，我们正在构建一个“配置器”网站，业务分析师可以使用该网站来生成有效的 C# 类，方法是填写一个选择了相关选项的表单。

从 MVC 网站中的模板生成 C# 类的最佳方法是什么？请注意，我在这里讨论的不是在运行时动态生成*和执行*类：我们实际上是在生成一个文本文件，该文件恰好包含将包含在完全不同的项目中的 C# 代码。

事实证明，这对谷歌来说是一个非常困难的话题！到目前为止出现的选项...

*   只需使用标记化的文本文件并使用 String.Format 替换值
*   以某种方式使用 Razor 作为模板引擎（但不确定如何，而且它不是我们生成的 html）
*   以某种方式使用 T4 模板（至少我知道它用于生成 C#，但不确定如何在运行时执行）

关于如何最好地解决这个问题的任何想法？

根据要求，这是输出类/文件的示例。此处的值会覆盖具有客户特定标签、验证等的基类中设置的值。这就是我们为客户定制产品的方式。

```
public class AreaRiskTemplate: AreaRiskTemplateBase
{
    public override string EntityName { get { return "risk"; } }
    public override string EntityNamePlural { get { return "risks"; } }
    public override string EntityNameArticle { get { return "a"; } }
    public override string CGovItemRefPrefix { get { return "R"; } }
    public override void SetFieldDefinitions()
    {

        FieldDefinitions.Level1.IsImplemented = true;
        FieldDefinitions.Level1.Label = "Category";
        FieldDefinitions.Level1.IsVisibleInGrid = true;

        FieldDefinitions.Level2.IsImplemented = true;
        FieldDefinitions.Level2.Label = "Team";
        FieldDefinitions.Level2.IsVisibleInGrid = true;

        FieldDefinitions.Description.IsImplemented = true;
        FieldDefinitions.Description.Label = "Description";
        FieldDefinitions.Description.IsVisibleInGrid = true;

    }
    public override ModelStateDictionary Validate()
    {
        var msd = new ModelStateDictionary();
        // add template-specific validation here
        msd.Merge(base.Validate());
        return msd;
    }
    public override List<string> Level1Options
    {
        get
        {
            return new List<string>
                {
                    "Organisational",
                    "Financial",
                    "Operational",
                    "External",
            "IT"
                };
        }
    }
} 
```

更新：目前在[http://msdn.microsoft.com/en-us/library/ee844259(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee844259(v=vs.100).aspx)调查 T4 模板（感谢下面的评论）。看起来很有希望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:19:22.920

我建议避免使用该网站，而直接使用 CodeSmith。您可以设计 CodeSmith 脚本，以便它会询问信息，然后生成所需的代码。尽管您必须购买 CodeSmith，但工作似乎少了很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:55:24.963

以最少开销执行此操作的方法是使用 Microsoft 内置的[CodeDOM API](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)。它允许您使用跨语言兼容的文档对象模型构建和操作 CLR 代码文档。

这种方法的唯一缺点是，如何实现某些特定于语言的特性并不是很明显。一个示例是 C#`readonly`字段，因为它们并非在所有 CLR 语言中都可用，而仅在 C# 中可用。这种特殊复杂性的解决方案是使用 a`CodeSnippet`并将手动代码作为字符串插入。其他更复杂的不匹配问题可以通过将 CodeDOM 与模板引擎集成来缓解。Oleg Sych 写[了一篇关于将 CodeDOM 与 T4 模板引擎集成的有用文章](http://www.olegsych.com/2009/09/t4-and-codedom-better-together/)。我更喜欢这种方法而不是纯文本生成方法，因为强类型文档对象模型比纯文本更不容易出错。

此外，如果您确实想要编译输出代码，CodeDOM API 也支持这一点。

如果这是一种您认为可能会经常使用的做法，您可能希望使用[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)将一些常见的 DOM 操作功能包装到流利的方法调用中。我已经建立了一个使用这种方法的个人库，它通过代码生成非常成功地提高了我的工作效率。

# svn - 颠覆限制访问一个文件的增长版本

> ID：12513893
> 
> 赞同：1
> 
> 时间：2012-09-20T13:39:16.523
> 
> 标签：svn, permissions, hook, restriction, pre-commit

我试图发现在颠覆中对文件实施写限制的最佳方法。

随着时间的推移，这个文件会有很多标签和分支。一个特定的用户，用户构建，必须有权访问此文件（在所有可能的分支或标签中），而没有其他权限。

```
i.e., 
svn://app/trunk/changelog.txt
svn://app/branches/1.1/changelog.txt
svn://app/tags/1.2/changelog.txt
etc.. 
```

如您所见，这不是一组有限的文件，而是一个文件，随着时间的推移，它将被复制到各种分支和标签。但是，我们可以确保文件名在文件树中是唯一的。

为了实现这个限制，在用户'build'上，对于所有名为'changelog.txt'的文件，我想实现一个预提交脚本。

这是最好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:41:58.330

最简单的方法是编写一个预提交钩子并将其放入存储库中的 /hooks 中。

Subversion 将始终将存储库目录和修订号传递给您的挂钩。

伪bash示例：

```
REPO="$1"
NO="$2"
AUTHOR=`svnlook author $REPO -t "$NO"`
FILES=`svnlook changed -t "$NO" "$REPO" | cut -b2-`

if echo $AUTHOR | grep -q builduser; then
    for FILE in $FILES; do
        if ! echo $FILE | grep -q changelog.txt$; then
            exit 1
        fi
    done
fi 
```

你明白它的要点，我希望。

# c# - json 数组未正确反序列化

> ID：12513895
> 
> 赞同：0
> 
> 时间：2012-09-20T13:39:18.750
> 
> 标签：c#, javascript, jquery, asp.net-mvc, json

将 json 数据发布到 mvc 操作时，我遇到了 ASP.NET MVC 4 的问题。

我用 a`Dictionary<string, string[]>`来表示一个包含多个命名数组的 javascript 对象。但是不是将数组值存储在一个键中，而是每个数组值都有自己的键

```
var data = { 
    foo1: { bar1: ['a', 'b', 'c' ], bar2: ['z'] },
    foo2: { bar3: ['d', 'e' ] } 
};
$.ajax({
    url: '/mvc/SomeAction',
    type: 'POST',
    data: data,
    dataType: 'json',
    contentType: 'application/json',
    success: myCallback
}); 
```

我的 MVC 模型如下所示：

```
public class Data 
{
    public Dictionary<string, string[]> foo1 { get; set; }
    public Dictionary<string, string[]> foo2 { get; set; }
}

[HttpPost]
public JsonResult SomeAction(Data data) 
{
    // Instead of having a key named bar1 with the value as an array of strings, 
    // this is what I get:
    // data.foo1 = 
    // { 
    //     (key: "bar1[0]", value: null), 
    //     (key: "bar1[1]", value: null), 
    //     (key: "bar1[2]", value: null),
    //     (key: "bar2[0]", value: null)
    // }
    // etc..
} 
```

似乎 MVC 模型绑定器没有正确地将 json 反序列化为数据模型。

只有当字典的值是一个数组时才会发生这种情况，如果它是另一个对象，它会按预期工作。

非常感谢有关如何解决此问题的任何想法。

在最坏的情况下，我将不得不`JSON.stringify`在服务器上使用和解析字符串，但这感觉不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:58:26.027

你可以使用[这个插件为 jQuery](http://erraticdev.blogspot.com.ar/2010/12/sending-complex-json-objects-to-aspnet.html)转换 json 数据：

```
var data = $.toDictionary({ 
    foo1: { bar1: ['a', 'b', 'c' ], bar2: ['z'] },
    foo2: { bar3: ['d', 'e' ] } 
}); 
```

# javascript - 当内容扩展项目时为 iframe 设置高度

> ID：12513896
> 
> 赞同：1
> 
> 时间：2012-09-20T13:39:20.293
> 
> 标签：javascript, html

我有 2 个 iframe：

1.  导航
2.  动态内容

我正在使用 JavaScript 调整内容的大小：

```
function autoResize(id) {
    var newheight;
    newheight = document.getElementById(id).contentWindow.document.body.scrollHeight;
    document.getElementById(id).height = (newheight) + 'px';
}; 
```

html是：

```
<iframe src="navigation.jsp" id="leftFrame" name="leftFrame" onload="autoResize('leftFrame');" frameborder="0" scrolling="auto" width="200" style="height: 100%;"></iframe>
<iframe src="" id="mainFrame" name="mainFrame" onload="autoResize('mainFrame');" frameborder="0" scrolling="no" width="200" style="height: 100%;"></iframe> 
```

我的动态页面有一些可扩展的内容，但是当我单击展开内容页面时会隐藏其内容。（对于 mainFrame 的滚动条 =“no”）

我不想为主机启用滚动条，因为它显示了两个滚动条（即主机和浏览器滚动条） 我应该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:05:14.663

您可以尝试使用[jQuery 的 load() 功能](http://api.jquery.com/load/)而不是 iframe...

```
<body>
    <div id="nav"></div>
    <div id="content"></div>
</body>

<script>
    $(document).ready(function(){
        $('#nav').load('path/to/navigation');
        $('#content').load('path/to/dynamic content');
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:29:33.097

`autoResize`仅在加载框架时运行一次（jQuery 的 load() 也是如此）。每次框架的内容更改时，您都需要调整框架的大小。这意味着[在框架中捕获调整大小事件](https://stackoverflow.com/questions/641857/javascript-window-resize-event)并从那里[调用`autoResize`父级。](https://stackoverflow.com/questions/3615141/calling-a-function-in-parent-file-from-child-frame)

# sql-server - 如何对聚合度量应用费率

> ID：12513900
> 
> 赞同：0
> 
> 时间：2012-09-20T13:39:31.447
> 
> 标签：sql-server, database-design, ssas, cube

我目前正在为我的立方体设计一个新的措施。逻辑很简单：

我有一个衡量标准，即在我的网站上加载的页面数（表 PageLoad 中的行数）。

我有一个数据：例如，在给定月份加载的页面价值 0.01 美分。

我的结构如下：

Fact_PageLoad -> Dim_Calendar -> Dim_PricePerPage

我需要衡量页面加载收入（即：行数 * 率）

现在我想知道如何实现这些数据。我想到了一个经过计算的成员。但是，即使这是可能的，如果我要求 SSAS 提供我在 8 月 15 日至 9 月 15 日之间的收入，而 8 月的利率是 0.01 和 9 月的利率是 0.05，那么 SSAS 将如何处理它？它是否能够计算八月行并将它们乘以 0.01 并将其添加到九月行数乘以 0.05 ？

我想到了另一个应该可行的解决方案：在我的 PageLoad 表中添加一个计算字段，这就是速率。然后我只需要总结这个领域。但我不确定这是最好的解决方案。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:04:49.200

我不确定我是否完全理解您的问题，但根据我的推测，两张表和一段代码应该可以完成这项工作。它更多的是逻辑方面的问题，而不是数据库设计方面。

将每个命中与时间戳一起存储在一个表中。将月费率存储在另一个表中。

当提出计算请求时，计算 1 个月的点击数，乘以月率，计算第二个月的点击数，然后将它们相加。当利率变化时，我看不到任何其他方式。

# python - 是否可以在不使用 co_code 的情况下获取 python 字节码？

> ID：12513901
> 
> 赞同：4
> 
> 时间：2012-09-20T13:39:32.257
> 
> 标签：python, reverse-engineering, bytecode

假设我在 python 解释器中并定义一个函数如下：

```
def h(a):
  return a 
```

如果我想查看字节码（不是使用 dis 的反汇编），我通常可以使用`h.func_code.co_code`. 还有其他方法可以查看字节码吗？

例如，在解释器中，如果我只是键入`h`而不使其成为函数调用，我会得到函数的地址。我可以使用该地址来获取字节码吗？还有其他方法吗？

评论中的一些附加信息：

该应用程序是用 python 编写的，并使用 Py2App、cx_freeze 或 py2exe 之类的东西打包。我在可执行文件上玩了一些技巧，现在，当启动时，可执行文件将我转储到 python 命令行。从那里，我手动将我的函数`h`输入到 interepeter 中。

的其他属性`h.func_code`存在，例如`co_varnames`,`co_argcount`等，但`co_code`不存在。

如果我在`h.func_code.co_code`解释器中输入，我会得到`'code' object has no attribute 'co_code'`.

**更新**：再次来自评论。据我所知，操作码已针对应用程序附带的 python 解释器重新映射。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:28:21.010

如果您已经定义了自己的`def h(): pass`虚拟函数，并且该函数没有`.func_code.co_code`值，那么很可能包含的 python 解释器是一个自定义编译版本，其中`co_code`插槽已被清除。

解决方法很简单，将`Contents/Resources`zip 文件（在所有子目录中）复制到其他地方，将它们添加到您的`PYTHONPATH`并将代码导入您自己的解释器中。

# php - 带有while循环的jquery工具提示

> ID：12513905
> 
> 赞同：0
> 
> 时间：2012-09-20T13:39:55.193
> 
> 标签：php, jquery, loops, while-loop, tooltip

工具提示不适用于while循环所有图标都向我显示第一个图标的信息只有这里是php

```
$check = odbc_exec($conn,"select * from Item");
while($r = odbc_fetch_array($check)){
$info = $r['Info'];
$Image = $r['image'];
echo  "<span class='hint'><img src='$Image'></span>
<div class='readitem' style='display:none'>$info</div>";

} 
```

jquery：工具提示

```
<script type="text/javascript">
$(document).ready(function() {
    var changeTooltipPosition = function(event) {
      var tooltipX = event.pageX - 10;
      var tooltipY = event.pageY + 10;
      $('div.tooltip').css({top: tooltipY, left: tooltipX});};
    var showTooltip = function(event) {
    var item = $('.readitem').html();

      $('<div class="tooltip"><center>'+ item + '</center></div>').appendTo('body');
      changeTooltipPosition(event);
    };
    var hideTooltip = function() {
       $('div.tooltip').remove();
    };
    $(".hint").bind({
       mousemove : changeTooltipPosition,
       mouseenter : showTooltip,
       mouseleave: hideTooltip
    });
});

</script> 
```

任何解决方案？

谢谢你 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:57:34.647

我从未见过没有条件的while循环。你的while循环应该像

```
while (condition) {
    //your code
} 
```

其中 condition 是一个被评估为真或假的表达式。但是，在您的情况下，您可能有一组图标 URL。您应该使用更方便在数组中循环的 for 循环。

```
for ($i = 0; $i < count($images); $i++) {
    echo $images[$i]; // Assuming $images is an array.  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:41:43.583

是线路有问题`var item = $('.readitem').html();`。

当您这样做`$('.readitem')`时，它将匹配页面上具有该类的所有元素。然后调用`.html()`它时，它将返回第一个匹配元素的 html（因此总是向您显示第一个）。

相反，您需要做的是查看`.hint`您悬停的位置，以找到兄弟姐妹`.readitem`，然后使用该兄弟的 html。

所以，这应该起作用：

```
var item = $(this).siblings('.readitem').html(); 
```

`$(this)`应该是`.hint`您悬停的实例，因此您试图`.readitem`在它的兄弟元素中找到 。

# c++ - GCC 错误：“X”不是模板？

> ID：12513906
> 
> 赞同：0
> 
> 时间：2012-09-20T13:39:55.700
> 
> 标签：c++, templates, gcc

最近，我在 Codepad 上测试了一些模板代码。虽然代码是正确的，但 GCC 给了我一个非常奇怪的错误。我还在 Ideone 上对其进行了测试：

测试代码：

```
template<int num>
struct count;

template<>
struct count<-1>
{
};

int main()
{
 return 0;
} 
```

以下是 Codepad (GCC 4.1.2) 和 Ideone (GCC 4.3.4) 上的结果[：](http://codepad.org/h8xfcCBi) GCC [4.1.2](http://ideone.com/9Lbr7)输出：

```
Line 5: error: 'count' is not a template 
```

而 GCC 4.3.4 编译正常而没有错误。这真的是编译器错误，还是我的代码不正确（并且由于扩展而编译？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T13:53:08.700

如果我尝试

```
template<int num>
struct count;

template<>
struct count<-1>
{
};

int main()
{
 return 0;
} 
```

使用 g++ 4.1.2，我没有问题。如果我尝试

```
#include <algorithm>
using namespace std;

template<int num>
struct count;

template<>
struct count<-1>
{
};

int main()
{
 return 0;
} 
```

使用 g++ -Wfatal-errors 我得到

```
count.cpp:8: error: 'count' is not a template
compilation terminated due to -Wfatal-errors. 
```

所以我的猜测是，Codepad 正在强制你触发错误的序言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:57:46.413

看起来 Codepad 默默地添加了一堆`#include`s 和 a`using namespace std;`无论你是否想要它们：请参阅[这个](http://codepad.org/xet06aXW)不应自行编译的示例：

```
int main()
{
    cout << "Hello" << endl;
}

Output: Hello 
```

这可能会破坏像您这样`count`在全局命名空间中定义名称（）的代码，该名称也存在于`std`命名空间中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T11:30:03.320

此错误的最可能原因是标识符名称之间的冲突。

有时，一个人从一堂课开始。一段时间后，该类被扩展为模板。当此时仍有类原型（例如在不同的头文件中）时，编译器将发出此错误。

（尽管这不适用于此处的特定情况，但此答案可能会帮助其他在寻求帮助时浏览此页面的人。）

# jquery - jQuery插件多个实例，只绑定一次事件

> ID：12513915
> 
> 赞同：1
> 
> 时间：2012-09-20T13:40:18.590
> 
> 标签：jquery, jquery-plugins

我正在编写一个 jQuery 插件并遇到了一个有趣的问题，我想将插件中的事件绑定到 body 并委托给特定的子元素。

这没问题，但是该插件是为支持同一页面上的多个实例而构建的，这导致事件被触发的次数与该插件在页面上存在的次数相同。（已经绑定了很多次了）

除了附加到窗口的布尔标志之外，是否只能从插件代码中绑定一次？

我可以通过在插件代码之外绑定来解决这个问题，因此它只绑定一次，或者确保定时器只设置一次，但是我不想让事件被触发 20 次。如果有其他方法，我正在寻找更多..

可能的解决方案

```
if (!window.tip.hoverIntent || window.tip.hoverIntent === undefined) {
    //bind handler..
    window.tip.hoverIntent = true;
} 
```

事件处理程序

```
$('body').on({
    mouseenter: function() {
        clearTimeout(window.tip.timerID);
    },
    mouseleave: function() {
        window.tip.timerID = setTimeout(function() {
            $('.tip-shown').remove();
        }, 250);
    }
}, '.tip-shown'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-11T14:00:44.330

您可以在插件功能之外使用标志

```
var first_time = true;
$.fn.my_plugin = function() {
    if (first_time) {
        first_time = false;
        $('body').on({
            mouseenter: function() {
                clearTimeout(window.tip.timerID);
            },
            mouseleave: function() {
                window.tip.timerID = setTimeout(function() {
                    $('.tip-shown').remove();
                }, 250);
            }
        }, '.tip-shown');

    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:46:23.163

您可以尝试评估您的处理程序之前是否已被调用然后中断。如下所示：

```
function eventHandler(e)
{
  if(e.handled !== true)
  {
    e.handled = true;
  }
  return false;
} 
```

那应该只触发一次您的事件。

# objective-c - Objective C 中的树形数据结构

> ID：12513920
> 
> 赞同：0
> 
> 时间：2012-09-20T13:40:35.240
> 
> 标签：objective-c, data-structures, expression-trees

我需要在 Objective C 中实现一个 Tree 数据结构并弄清楚它是如何工作的。

所以我现在所知道的：

**关于 - 它看起来如何。**

树是一种递归数据结构。我必须实现的参数很少，例如没有添加、搜索、删除和其他方法：

```
id info;
id left_node;
id right_node; 
```

据我了解 info - 是每个节点存储的值（例如 NSInteger、NSString 或其他）。left_node 和 right_node 有指向当前树或子树中其他节点的指针。

**关于添加到树**

例如，我需要添加基于以下表达式的下一个数据：

**50*(10-(5+6)) + (60*(10-2))**

所以在这一步我有一个问题，因为我现在不知道它在树中的样子，我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:06:44.597

我已经为你搜索了：

![在此处输入图像描述](../Images/a9d1ac8593100a47d3b2ba49b8fb2fe8.png)

这是`(4*3)+((2*7)-5)`

所以`info`必须是一个类似于

```
bool isOperation;
NSInteger number;
NSInteger operation idx;   //like 0 for '+', 1 for '-' ecc. to evaluate in a case 
```

# php - php imagick 不工作，是否需要解码？

> ID：12513924
> 
> 赞同：0
> 
> 时间：2012-09-20T13:40:46.173
> 
> 标签：php, image-processing, imagemagick, imagick

我只是在学习imagick，只是想看到它起作用。我的基本用法是创建缩略图和渲染 .ai 和 .psd 文件。

我的 phpinfo() 显示已安装 imagemagick。

我有从[http://valokuva.org/?cat=1](http://valokuva.org/?cat=1)获得的这段代码：

```
 /* Create new object */
$im = new Imagick();

/* Create new checkerboard pattern */
$im->newPseudoImage(100, 100, "pattern:checkerboard");

/* Set the image format to png */
$im->setImageFormat('png');

/* Fill background area with transparent */
$im->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);

/* Activate matte */
$im->setImageMatte(true);

/* Control points for the distortion */
$controlPoints = array( 10, 10,
                        10, 5,

                        10, $im->getImageHeight() - 20,
                        10, $im->getImageHeight() - 5,

                        $im->getImageWidth() - 10, 10,
                        $im->getImageWidth() - 10, 20,

                        $im->getImageWidth() - 10, $im->getImageHeight() - 10,
                        $im->getImageWidth() - 10, $im->getImageHeight() - 30);

/* Perform the distortion */ 
$im->distortImage(Imagick::DISTORTION_PERSPECTIVE, $controlPoints, true);

/* Ouput the image */   
//header("Content-Type: image/png");
echo $im; 
```

现在代码只是在屏幕上打印字符，例如：

�PNG IHDRo�*��ybKGD����9�oFFs��������^�� pHYsHHF�k>3CIDATx���w�U���̽[�H!����л (�BQ@�(E� ���" J�NQA�4)�{�=�R�e˽3�Ϭ$!�l�%�o~��Mٝ{��y���� ���d��^'��I&7��}f���[��(�,����]lЍ����<�*Cog�&��������L� ��������d'L��a'���<��<�;C`Fa.䗋</p>

如果我取消对倒数第二行的注释，它只会将我带到一个损坏的图像。

我需要做点别的吗？也许解码和保存文件？也许我做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-08T17:35:09.027

仔细检查您的 php 文件不包含[BOM](https://en.wikipedia.org/wiki/Byte_order_mark)。

# sql - 如何计算存储过程中临时创建的虚拟表中的行号

> ID：12513928
> 
> 赞同：0
> 
> 时间：2012-09-20T13:41:04.427
> 
> 标签：sql, stored-procedures, count

我有这样的存储过程

```
create store procedure onetimeprocessing  
as
begin
declare @input_data (id int,title varchar(400),topic varchar(400))
insert into @input_data
select id,title,topic from dB 
```

我只想计算虚拟表@input_data 中的记录数

我应该如何获得计数。请帮助我提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:43:44.563

```
select count(*) from @input_data 
```

或插入后

```
select @@rowcount 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:42:59.750

为什么不只拥有这个？

```
create store procedure onetimeprocessing  
as
begin
select COUNT(*) as TheCount from dB 
```

编辑

我很难理解为什么其他人会建议先加载`@inputdata`，然后再计算。或返回一个额外的结果集`@@ROWCOUNT`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:43:53.870

它可用于[`@@ROWCOUNT`](http://technet.microsoft.com/en-us/library/ms187316.aspx)：

```
declare @input_data table (id int,title varchar(400),topic varchar(400))
insert into @input_data select ....

SELECT @@ROWCOUNT 
```

# regex - 零验证正则表达式

> ID：12513932
> 
> 赞同：0
> 
> 时间：2012-09-20T13:41:19.187
> 
> 标签：regex, validation

我有一个使用正则表达式匹配的小测试。

当且仅当用户输入“0000”或 000 或 00 或 0 时匹配为真。

0001 或 0011、1000、0111、1111 应该返回 false。

这是我尝试过的：`/^0*([0]{1,4})/`但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:45:58.347

这应该可以正常工作：

```
/^0{1,4}$/ 
```

# ember.js - 如何通过以下代码获取 Ember Select 中的值

> ID：12513934
> 
> 赞同：1
> 
> 时间：2012-09-20T13:41:20.767
> 
> 标签：ember.js, handles

把手如下：- {{#控制器中的每个类别}}

```
 {{view Ember.Select
    contentBinding="App.testsController.content"
    optionLabelPath="content.category"

    selectionBinding="content.myVal"

 }}    

{{view Ember.Select
   contentBinding="App.testsController.content"

   optionLabelPath="content.type"  
}}   

{{view Ember.Select
   contentBinding="App.testsController.content"      
   selectionBinding="content.myVal"
}} 

controller is :-
App.TestsController = Ember.ArrayController.extend({
  content: []
});

model is :- 
App.Test = Ember.Object.extend(
 category: null
 type: null
 #operands: null
#defaults: null
) 
```

在视图中，我无法获取值类别和类型。它没有显示。如何解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:03:49.923

您是否通过路由器抓住控制器？如果是这样，您可能特别需要调用 contentBinding: 'App.router.testsController.content'

此外，您的 selectionBinding 应为“controller.myVal”而不是“content.myVal”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:15:58.220

请参考[Git hub doc](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/select.js)，下面是相关部分。

或者，您可以通过用于呈现每个提供`selectionBinding`. 当 selected `<option>`更改时，提供给的属性路径`selectionBinding` 将更新以匹配呈现`<option>` 元素的内容对象：

```
App.controller = Ember.Object.create({
selectedPerson: null,
content: [
Ember.Object.create({firstName: "Yehuda", id: 1}),
Ember.Object.create({firstName: "Tom", id: 2})
]
}); 
```

* * *

```
{{view Ember.Select
contentBinding="App.controller.content"
optionValuePath="content.id"
optionLabelPath="content.firstName"
selectionBinding="App.controller.selectedPerson"}} 
```

将产生以下带有选定选项的 HTML：

```
<select class="ember-select">
<option value>Please Select</option>
<option value="1">Yehuda</option>
<option value="2" selected="selected">Tom</option>
</select> 
```

# ajax - 如何检测表单提交完成

> ID：12513947
> 
> 赞同：1
> 
> 时间：2012-09-20T13:42:06.347
> 
> 标签：ajax, internet-explorer, form-submit, access-denied

我希望能够提交带有文件的表单并检测表单何时成功提交。我已经在网上查看了所有内容，并且还尝试了 AJAX 解决方案来解决“ajaxSubmit”问题。当然，“ajaxSubmit”适用于除 IE 之外的所有浏览器（如图）。我也明白 IE 出于安全原因禁止这样做，这就是我收到“拒绝访问错误”的原因。但是，我想知道这个问题是否有可能的解决方案（我知道这个问题已经被问过很多次了，但到目前为止我还没有看到解决方案）。任何帮助都会很棒！

# c# - FileUpload 上传代码隐藏。

> ID：12513949
> 
> 赞同：3
> 
> 时间：2012-09-20T13:42:19.453
> 
> 标签：c#, asp.net, code-behind

如何仅使用 FileUpload 代码隐藏上传？我的控件是代码隐藏的，因为我有 Dropdown_SelectedIndexChanged 并且需要生成各种数量的控件。我可以很好地列出控件并将文件和文本附加到txtbox：

```
 private void SetChildrenCountControls(int total)
        {
          for (int i = 0; i < total; i++)
          {
            var tbBirthDate = new TextBox();
            tbBirthDate.ID = "tbBirthDate_" + (i + 1);
            tbBirthDate.CssClass = "tbSister_input";
            tbBirthDate.EnableViewState = true;

            FileUpload upload = new FileUpload();
            upload.ID = "imgUpload_" + (i + 1);
            upload.CssClass = "tbSister_upload";
            upload.EnableViewState = true;

            ChildrenCountTextPanel.Controls.Add(tbBirthDate);
            ChildrenCountTextPanel.Controls.Add(upload);
          }
       } 
```

并且可以通过以下方式获取 txtbox 中输入的文本：

```
 protected void lbFamilySave_Click(object sender, EventArgs e)
    {
        var countSisters = ChildrenCountTextPanel.Controls.OfType<TextBox>();
        string sisterBirth = string.Empty;
        foreach (var sister in countSisters)
        {
            if (sister.ID.Contains("tbBirthDate_"))
                sisterBirth = sister.Text;
        }
    } 
```

如何从 FileUpload 控件获取文件？似乎无法使用 FileUpload 完成上述操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:57:51.600

在下面的单击事件中，您将获得 TextBoxes 而不是 FileUpload Control

```
btn_protected void lbFamilySave_Click(object sender, EventArgs e)
{
        var countSisters = ChildrenCountTextPanel.Controls.OfType<TextBox>(); 
```

文件上传控件属于这种类型 `System.Web.UI.WebControls.FileUpload`

因此，请获取 FileUpload 控件，然后执行以下操作：

```
if (myFileUpload.HasFile)
{
  string savePath = @"C:\Temp\" + myFileUpload.FileName;

  myFileUpload.SaveAs(savePath);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:00:08.663

得到它的工作，以为我已经尝试过。显然不够好:)

```
 var countUploads = ChildrenCountTextPanel.Controls.OfType<FileUpload>();

        FileUpload FileUl = new FileUpload();
        foreach (var ul in countUploads)
        {
            if(ul.ID.Contains("imgUpload_"))
            {
                FileUl = ul;               
            }
        }
if (FileUl.HasFile)
{
 ConvertAndSave(FileUl)
 } 
```

# android - AAPT.EXE 停止在 Eclipse 中运行（ANDROID）

> ID：12513950
> 
> 赞同：3
> 
> 时间：2012-09-20T13:42:29.020
> 
> 标签：android, aapt

我在执行 android 项目时遇到了 AAPT 的问题。我已完成以下步骤：

项目 > 清洁

和

窗口 > 首选项 > Android > 构建 > 正常

不过不影响项目。属性不在 R.java 文件中生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T00:29:21.743

当我遇到这个问题时，我只是删除所有项目，然后创建一个新项目并再次从新项目中复制文件。但是在复制之前先检查xml代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T09:13:38.487

请试试这个[答案](https://stackoverflow.com/a/16831707/1237656)。平台工具有时会出现此问题。

如果不是，则可能是由于您的 XML 中的一些错误。如果是这样，解决方案在此[链接](https://groups.google.com/forum/#!topic/android-developers/utnUiNIGgmA)中。

# php - 数组值不相同（但它们是？）

> ID：12513952
> 
> 赞同：10
> 
> 时间：2012-09-20T13:42:43.590
> 
> 标签：php, arrays

我有两个数组。它们似乎至少包含一组相同的值，但是 `array_diff()`即使我认为应该执行，也不会返回任何东西！这应该只是例行代码，但由于某种原因，它不喜欢我所做的。

奇怪的是，`var_dump($queue[0]);`返回`String(167);`和`var_dump($videos[0])`返回`String(168)`。

很明显，它们一定是不同的吧？

`echo similar_text($queue[0]), $videos[0]);`返回`167`。什么！？

**注意：这些只是文件名，并不代表文件的内容。**

**视频阵列**

`Array ( [0] => /var/www/downloads/j2/Dexter Season 1, 2, 3, 4, 5 & 6 + Extras (Early Cuts, Audiobooks etc) DVDRip HDTV TSV/Season 3/Dexter Season 3 Episode 04 - All in the Family.avi )`

**队列数组**

`Array ( [0] => /var/www/downloads/j2/Dexter Season 1, 2, 3, 4, 5 & 6 + Extras (Early Cuts, Audiobooks etc) DVDRip HDTV TSV/Season 3/Dexter Season 3 Episode 04 - All in the Family.avi [1] => j2 )`

**输出**

`$diff = array_intersect($queue,$videos); print_r($diff);` *返回* `Array ( )`

`var_dump($queue[0]);`返回`string(167) "/var/www/downloads/j2/Dexter Season 1, 2, 3, 4, 5 & 6 + Extras (Early Cuts, Audiobooks etc) DVDRip HDTV TSV/Season 3/Dexter Season 3 Episode 04 - All in the Family.avi"`

`var_dump($videos[0]);` *返回* `string(168) "/var/www/downloads/j2/Dexter Season 1, 2, 3, 4, 5 & 6 + Extras (Early Cuts, Audiobooks etc) DVDRip HDTV TSV/Season 3/Dexter Season 3 Episode 04 - All in the Family.avi"`

`echo similar_text($queue[0], $videos[0]);` *返回* `167`。

我已经将字符串放入 JavaScript 字符计数中，我使用 strlen()、trim() 来修剪空白，我什至手动单独计算了每个字符。这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:38:12.777

使用将两个字符串转换为十六进制转义形式后

```
var_dump(preg_replace_callback('#.#', function($m) {
  return '\\x' . dechex(ord($m[0]));
}, $input)) 
```

，结果字符串如下所示：http: [//jsfiddle.net/mgaWn/](http://jsfiddle.net/mgaWn/)

以这种形式查看它们表明第一个字符串包含`5,·6·+·Extras`，第二个包含`5,·6··+·Extras`-**符号****前有一个双空格`+`**。

HTML 折叠空白，这种差异变得完全不可见。在任何输出格式细节（例如字符编码或此 HTML 空白最小化）妨碍您之前，将数据尽可能接近其原始格式进行比较通常是一个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T14:01:43.607

可能有一个不可打印的字符。

将两个字符串从 PHP 以二进制格式写入文件，然后使用十六进制编辑器或类似工具比较结果。在某些情况下，仅复制字符串然后进行比较是行不通的，因为它可能会丢失字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:12:38.870

检查传递给 array_diff() 的数组是否顺序正确。在这件事上我被抓了好几次。

# android - 适用于 Android 的原生 Brightcove

> ID：12513957
> 
> 赞同：1
> 
> 时间：2012-09-20T13:42:55.717
> 
> 标签：android, brightcove

我在原生 Android 中成功实现了光明湾。但目前面临一些问题，

1.  当我按下视频并按下 HOME 按钮时，视频从第一个开始
2.  当我锁定屏幕并解锁屏幕时，视频从第一个开始。

有没有人遇到过这个问题。可以分享知识。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-06T09:13:01.973

您是否在实施中扩展 BrightCovePlayer 或 BrightCovePlayerFragment？如果您共享播放器设置的代码片段，那就太好了。

# forms - 如何从 HTML 表单中读取输入并将其保存在文件中 - Golang

> ID：12513963
> 
> 赞同：9
> 
> 时间：2012-09-20T13:43:18.620
> 
> 标签：forms, go

我正在尝试设置一个非常简单的 Web 服务器，用户可以在其中访问一个站点并写入一个字符串和一个 int。然后我想保存这两个输入，我的想法是将它保存到一个也可以显示的文本文件中浏览器：.../文本文件/

我不知道关于可以发布多少代码的 SO 规范是什么，但这是我目前所拥有的：

```
type Person struct {
    name  string
    hours int
}

const filename string = "timelister"

func upload(w http.ResponseWriter, r *http.Request) {
    t, _ := template.ParseFiles("upload.html")
    t.Execute(w, nil)
}

func (person *Person) open() {
    newFilename := filename + ".txt"
    _, err := os.OpenFile(newFilename, os.O_RDWR|os.O_APPEND|os.O_CREATE, 0666)
    if err != nil {
        log.Fatal("Open Filename: ", err)
    }
}

func returnInput() //want to implement this
func saveInput() //want to implemet this

func main() {
    http.HandleFunc("/", upload)
    http.ListenAndServe(":8080", nil)

} 
```

还有我的 HTML 表单：（没有所有格式）

```
 Name: <input type="text" name="Name">
        <input type="submit" value="submit"></br>
     Hours: <input type="text" name="Hours">
            <input type="submit" value="submit"> 
```

所以我最初的想法是实现两个函数 returnInput() 和 saveInput() 但也许有一些更易于使用的内置函数？

如果有人能指出我如何从 HTML 表单中保存输入的正确方向，那我将非常感激！提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T14:10:05.953

您需要选择一种格式来写入文件。让我们无缘无故地选择 JSON。所以给出如下形式：

```
<form action="/save" method="post"> ... </form> 
```

你可以有以下处理程序

```
import (
    "strconv"
    "http"
    "os"
    "encoding/json"
)

type Data struct {
    Name string
    Hours int
}

func save(w http.ResponseWriter, r *http.Request) {
    name := r.FormValue("Name")
    hours, err := strconv.Atoi(r.FormValue("Hours"))
    if err != nil {
        http.Error(w, err.Error(), 500)
        return
    }

    data := &Data{name, hours}

    b, err := json.Marshal(data)
    if err != nil {
        http.Error(w, err.Error(), 500)
        return
    }

    f, err := os.Open("somefile.json")
    if err != nil {
        http.Error(w, err.Error(), 500)
        return
    }

    f.Write(b)
    f.Close()
}

func init() {
    http.HandleFunc("/save", save)
} 
```

# sas - 读取 SAS 中分隔文件的特定列

> ID：12513964
> 
> 赞同：4
> 
> 时间：2012-09-20T13:43:19.497
> 
> 标签：sas

这似乎应该很简单，但我在文档中找不到如何做到这一点。我想读一个逗号分隔的文件，但它很宽，我只想读几列。

我以为我可以这样做，但`@`指针似乎指向文本的列，而不是由分隔符定义的列号：

```
data tmp;
 infile 'results.csv' delimiter=',' MISSOVER DSD lrecl=32767 firstobs=2;
 @1 id
 @5 name$
run; 
```

在此示例中，我想根据分隔符仅读取第 1 列和第 5 列中的内容，但 SAS 正在读取文本文件位置 1 和位置 5 中的内容。所以如果输入文件的第一行是这样开始的

> 1234567, "x", "y", "asdf", "bubba", ... 更多变量 ...

我想要`id=1234567`和`name=bubba`，但我得到`name=567, "`。

我意识到我可以阅读每一列并删除我不想要的那些，但必须有更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:52:01.570

实际上，@ 确实指向文本列而不是分隔列。我发现的唯一使用标准输入的方法是读取空白，即

```
input
id
blank $
blank $
blank $ 
name $
; 
```

然后留空。

但是，如果您不介意以不同的方式编写输入，则有更好的解决方案。

```
data tmp;
 infile datalines;
 input @;
 id = scan(_INFILE_,1,',');
 name = scan(_INFILE_,5,',');
 put _all_;
 datalines;
12345,x,y,z,Joe
12346,x,y,z,Bob
;;;;
run; 
```

它使格式化稍微复杂一些，因为您需要为每个您不想要的基本字符格式的变量设置 put 或 input 语句，但根据您的需要，它可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T13:58:47.060

如果您了解一点 INPUT 语句语法，则可以相当有效地跳过字段，请注意 (3*dummy)(:$1.) 的使用。只读取一个字节也应该会稍微提高性能。

```
data tmp;
   infile cards DSD firstobs=2;
   input id $ (3*dummy)(:$1.) name $;
   drop dummy;
   cards;
id,x,y,z,name
1234567, "x", "y", "asdf", "bubba", ... more variables 
1234567, "x", "y", "asdf", "bubba", ... more variables 
   run;
proc print;
   run; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T20:57:42.360

我在回答其他用户的相关问题时想到的另一个选项。

```
filename  tempfile temp;

data _null_;
  set sashelp.cars;
  file tempfile dlm=',' dsd lrecl=32767;
  put (Make--Wheelbase) ($);
run;

data mydata;
  infile tempfile dlm=',' dsd truncover lrecl=32767;
  length _tempvars1-_tempvars100 $32;
  array _tempvars[100] $;
  input (_tempvars[*]) ($);
  make=_tempvars[1];
  type=_tempvars[3];
  MSRP=input(_tempvars[6],dollar8.);
  keep make type msrp;
run; 
```

在这里，我们使用一组有效的临时变量（不幸的是，实际上不能是临时变量），然后获取我们想要指定列的内容。这对于一个小文件来说可能是多余的——只需读入所有变量并处理它——但对于 100 或 200 个变量，你只需要 15、18 和 25，这可能更容易，只要你知道你在哪一列正是想要。（我可以看到在处理人口普查数据时使用它，例如，如果你有 CSV 格式的数据。只需要几列是很常见的，其中大多数列比起始列低 100 或 200 列。）

您必须注意临时数组的长度（必须与您关心的最长列一样长！），并且您必须确保不要弄乱列，因为您不会知道如果你搞砸了，除非从数据中很明显。

# php - PHP date_diff 方法 facebook 风格

> ID：12513977
> 
> 赞同：0
> 
> 时间：2012-09-20T13:43:50.887
> 
> 标签：php, codeigniter, methods, datediff

我写了一个简单的方法，它从日期开始返回经过了多少天的小时和秒。

例如，它返回 15000 天 3 小时 3 秒前……在用户端似乎不太好阅读。

我怎样才能做得更好？

例如像facebook发布时间之类的东西？

任何人都可以照顾这段代码吗？

```
public function date_diff($start, $end="NOW")
    {
        $timeshift = false;
        $sdate = strtotime($start);
        $edate = strtotime($end);

        $time = $edate - $sdate;

        if($time >= 0 && $time <= 59) {
                // Seconds
              if($time == 1)
               {
                   $s = 'second';
               }
               else
               {
                   $s = 'seconds';
               }
                $timeshift = $time." ".$s;

        } elseif($time>=60 && $time<=3599) {
                // Minutes + Seconds
                $pmin = ($edate - $sdate) / 60;
                $premin = explode('.', $pmin);
                 if($premin[0] == 1)
               {
                   $m = 'min';
               }
               else
               {
                   $m = 'min';
               }

              //  $presec = $pmin-$premin[0];
                //$sec = $presec*60;

                $timeshift = $premin[0]." ".$m;//.round($sec,0); // sec ';

        } elseif($time>=3600 && $time<=86399) {
                // Hours + Minutes
                $phour = ($edate - $sdate) / 3600;
                $prehour = explode('.',$phour);

                $premin = $phour-$prehour[0];
                $min = explode('.',$premin*60);
                 if($prehour[0] > 1)
               {
                   $h = 'hours';
               }
               else
               {
                   $h = 'hour';
               }
                  if($min[0] == 1)
               {
                   $m = 'min';
               }
               else
               {
                   $m = 'min';
               }

           //     $presec = '0.'.$min[1];
            //    $sec = $presec*60;

                $timeshift = $prehour[0]." ".$h." ".$min[0]." ".$m;//.round($sec,0).' sec ';

        } elseif($time>=86400) {
                // Days + Hours + Minutes
                $pday = ($edate - $sdate) / 86400;
                $preday = explode('.',$pday);

                $phour = $pday-$preday[0];
                $prehour = explode('.',$phour*24);

                $premin = ($phour*24)-$prehour[0];
                $min = explode('.',$premin*60);

           //     $presec = '0.'.$min[1];
            //    $sec = $presec*60;

               if($preday[0] > 1)
               {
                   $d = 'days';
               }
               else
               {
                   $d = 'day';
               }
               if($prehour[0] > 1)
               {
                   $h = 'hours';
               }
               else
               {
                   $h = 'hour';
               }
               if($min[0] == 1)
               {
                   $m = 'min';
               }
               else
               {
                   $m = 'min';
               }

               $timeshift = $preday[0]." ".$d." ".$prehour[0]." ".$h." ".$min[0]." ".$m;

        }
        return $timeshift.' ago';
    } 
```

thx 并希望有人会喜欢这段代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:06:29.523

在我写一个日期函数之前的一段时间

```
function format_date($date, $type, $seperator="-")
    {
        if($date)
        {
            $day = date("j", strtotime($date));
            $month = date("n", strtotime($date));
            $year = date("Y", strtotime($date));
            $hour = date("H", strtotime($date));
            $min = date("i", strtotime($date));
            $sec = date("s", strtotime($date));

            switch($type)
            {
                case 0:  $date = date("Y".$seperator."m".$seperator."d",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 1:  $date = date("D, F j, Y",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 2:  $date = date("d".$seperator."m".$seperator."Y",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 3:  $date = date("d".$seperator."M".$seperator."Y",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 4:  $date = date("d".$seperator."M".$seperator."Y h:i A",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 5:  $date = date("m".$seperator."d".$seperator."Y",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 6:  $date = date("M",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 7:  $date = date("Y",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 8:  $date = date("j",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 9:  $date = date("n",mktime($hour, $min, $sec, $month, $day, $year)); break;
                case 10: 
                                 $diff = abs(strtotime($date) - strtotime(date("Y-m-d h:i:s"))); 
                                 $years = floor($diff / (365*60*60*24));
                                 $months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
                                 $days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));
                                $date = $years ." years, ".$months. " months, ". $days.  "days";
            }
        }
        return($date);
    } 
```

用来`format_date("Any Date",10);`打电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:48:54.783

我想你需要它作为前端，因为你写了一个人类可读的日期语法。

我知道我的解决方案不在 php 中，但我可以向您推荐这个库：

[http://momentjs.com/](http://momentjs.com/)

它是一个 js 工具集，可以让您开发更少的代码并维护更少的软件。它有最常用的方法，如添加日期、减去日期等。

根据我的经验，它对日期处理非常有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:51:05.180

CodeIgniter 3 里程碑的 GitHub 上有一个问题，您可以在那里获得许多关于您的任务的建议。那里有几个变体：[https ://github.com/EllisLab/CodeIgniter/issues/309](https://github.com/EllisLab/CodeIgniter/issues/309)

好处是它将原生于 CodeIgniter

# java - 使用 Apache POI 的 SXSSFSheet 从 xlsx 读取数据

> ID：12513981
> 
> 赞同：10
> 
> 时间：2012-09-20T13:43:54.413
> 
> 标签：java, apache, apache-poi, xlsx

我想使用 apachi poi 从某个 xlsx 文件中读取数据（单元格值）。下面的代码`SXSSFWorkBook`成功创建实例并分配 db.xlsx（我的虚拟 xlsx）。我尝试更改工作表编号并使用该`getSheetNumber`方法仔细检查以确保正确分配工作簿。

接下来我想为实例分配一个特定的工作表（`0`带有名称的索引`main`） ，但目前它返回. （我已经尝试过和方法）。`SXSSFSheet``null``getSheetAt``getSheet`

```
SXSSFRow DummyRow;
SXSSFCell DummyCell;

int RowCount;
OPCPackage pkg = OPCPackage.open(blabla string adress);

XSSFWorkbook wb = new XSSFWorkbook(pkg);
Workbook MainBook = new SXSSFWorkbook(wb,100);

int a = MainBook.getNumberOfSheets();

SXSSFSheet MainSheet = (SXSSFSheet) MainBook.getSheetAt(0); 
RowCount = MainSheet.getLastRowNum(); 
```

我究竟做错了什么？

编辑：

我已经尝试过`getSheetName`方法并取得了积极的结果。所以问题在于到达工作表中的行。所以，最后一行`getLastRowNum()`不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T14:44:57.203

你不能。SXSSFWorkBook 只写，不支持读

对于 .xlsx 文件的低内存读取，您应该查看[XSSF 和 SAX EventModel 文档](http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api)

# objective-c - 新设备上的 IOS 配置文件和推送通知

> ID：12513985
> 
> 赞同：1
> 
> 时间：2012-09-20T13:44:03.597
> 
> 标签：objective-c, ios, error-handling, push-notification, provisioning

我可以将推送通知发送到 IOS 设备（IOS 5.1 IPAD 3rd gen）并处理通知等。所以它工作得很好。

现在我必须使用另一个设备（IOS 5.1 IPAD 3rd gen），在管理器上通过右键单击我将我的设备添加到配置文件我可以将我的应用程序安装到设备但我无法发送推送通知，因为我无法获得设备的令牌。

我想这是因为当我右键单击并将设备添加到我的配置文件时它只会添加`iOS Team Provisioning Profile`而不是`myApp Development Profile`

在苹果开发者门户我有：

![在此处输入图像描述](../Images/7632254aea39c3dc7108fcc3ff319dd7.png)

在库中的我的管理器上-> 配置文件

![在此处输入图像描述](../Images/ac5b07397e3787714dd97b016cb83708.png)

在我的团队中

![在此处输入图像描述](../Images/518b42a37c31ec854891e6c0ef5b1e68.png)

我在推送通知上处理错误代码：

```
- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
    NSLog(@"Failed to get token, error: %@", error);
} 
```

错误是：`Failed to get token, error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0xxxxxxx {NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application}`

如果错误是因为配置文件：

如何将该 Paper Development 配置文件添加到我的设备？或者如何在不完全创建配置文件的情况下学习设备令牌并发送推送通知？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:17:23.173

我之前也遇到过类似的问题，所以我会列出您可能遇到的问题，

首先，不要使用带有通配符的配置文件，您很可能`IOS Team Provisoning Profile`包含通配符。因此，只需在管理器上转到您设备的配置文件并删除它`IOS Team Provisoning Profile`

其次，转到您在 developer.apple 上的配置文件，然后单击您有问题的第二张图片上的编辑。当您单击编辑时，您将看到修改单击该

并通过检查如下方格来添加您的设备： ![在此处输入图像描述](../Images/ee9a75ff58bdb1971e5a7e182efc4128.png)

单击保存并下载新配置文件，现在转到管理器上的配置文件并删除以前的`Pape Developement Profile`. 双击您下载的个人资料或单击组织者上的刷新。现在将 proviosinig 配置文件拖放到管理器上的设备。

最后，如果以上都不能解决您的问题，这意味着您的包标识符和您的应用程序 ID 在这种情况下可能没有太大作用，请检查[此](https://stackoverflow.com/questions/7864623/apple-push-notifications-no-valid-aps-environment-have-tried-all-solutions-i)答案

希望你能解决这个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T19:57:02.730

对我来说，它只是将捆绑标识符和代码签名身份更改为 IOS 开发人员。包标识符来回更改它并在更改之间构建可以解决问题（不确定此步骤是否必要）。不确定它到底是什么。希望有一天这对某人有所帮助，可能不会。

# c++ - “警告 C4987：使用了非标准扩展：'throw (...)'”是什么意思？

> ID：12513986
> 
> 赞同：0
> 
> 时间：2012-09-20T13:44:07.190
> 
> 标签：c++, visual-c++, atl, visual-studio-2010

我正在尝试编译一个 VC++ 项目，它抱怨这个错误

```
Microsoft Visual Studio 10.0\VC\atlmfc\include\atlalloc.h(517): warning C4987: nonstandard extension used: 'throw (...)' 
```

它指向的线是

```
_Ret_opt_bytecap_x_(nElements * sizeof(T)) T* Allocate(_In_ size_t nElements) throw( ... )
    {
        return( AllocateBytes( ::ATL::AtlMultiplyThrow(nElements,sizeof( T )) ) );
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:49:45.977

这意味着`throw(...)`异常规范是一个非标准的扩展（如果曾经有过一个非答案......），也就是说，C++ 标准没有为这段代码定义一个含义。在 Visual Studio 中，这意味着该函数可能会引发任何异常。

如果它是您自己的代码，您可以通过简单地删除异常规范来修复警告（好吧，无论如何，对于 C++ 异常；我不知道这将如何影响 Microsoft 的结构化异常处理）。

# c# - 在 WPF 中快速删除（和添加）许多项目到画布

> ID：12513989
> 
> 赞同：3
> 
> 时间：2012-09-20T13:44:08.153
> 
> 标签：c#, wpf, performance, wpf-controls, uielementcollection

在我的 WPF 应用程序的某个时刻，一旦我将项目删除和/或添加到画布，UI 线程将锁定 ~0 到 ~500 毫秒（取决于数量）。几个性能测试指出 Canvas.Children.Remove 是主要原因，并且 .Add 也是如此（.Remove 更严重）。我同时删除了大约 500 个项目，同时也添加了大约 500 个项目。这大约每秒 10 次会导致问题。

最后，我编写了一个简单的基准测试应用程序，代码如下。

```
 public MainWindow() {
        InitializeComponent();
        this.Loaded += (object sender, RoutedEventArgs e) => {
            List<Image> a = new List<Image>();
            Stopwatch s = new Stopwatch();
            s.Start();
            for (int i = 0; i < 7500; i++) {
                Image img = new Image();
                Canvas.SetLeft(img, i * 10);
                C.Children.Add(img);
                if (i % 10 == 1)
                    a.Add(img);
            }
            s.Stop();
            long add = s.ElapsedMilliseconds;
            s.Reset();
            s.Start();
            foreach (Image img in a) {
                C.Children.Remove(img);
            }
            s.Stop();
            MessageBox.Show(String.Format("Add: {0}, Remove: {1}.", add, s.ElapsedMilliseconds));
        };
    } 
```

这给出了以下结果（围绕这个，每次我运行它时）：

```
Add: 174, Remove: 156. 
```

请记住，只有 750 项被删除，而 7500 项被添加。

这个过程有点繁重，但我不希望 UI（`ScrollViewer`主要）在执行此操作时锁定。我面临的另一个问题是我不能将它“移动”到另一个`Thread`，因为我无法控制那个特定的 UI `Thread`。

如何改进这个过程？或者有没有办法“随着时间的推移”动态添加/删除项目，这样它就不会挂断？

谢谢，

~Tgys

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:12:13.203

如果您将其拆分为新线程并每隔 20 毫秒左右将工作分派到 UI 线程中会怎样？这样您就不会完全锁定 UI。所以用户可以同时做其他事情。

我知道的其他事情：有 AddRange 方法吗？也许您可以一次添加所有项目。这样，理论上只会发生一次布局更新，从而将时间缩短为零。

删除也一样。看`Canvas.Children.RemoveRange(a);`

# css - .ui-layout-north 背景颜色

> ID：12513992
> 
> 赞同：0
> 
> 时间：2012-09-20T13:44:12.677
> 
> 标签：css, jsf-2

我在我的主用户界面中使用 primefaces 4.3。

我想将北单元的背景颜色更改为红色由于某种原因，它的颜色只有单元的前 80%

```
.ui-layout-north .ui-layout-unit-content {  
   background-color: red ;
   font-size:90% !important;
 } 
```

如何将其更改为所有北方单位

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:49:50.417

为列表的 CONTENTS 设置样式（带有 的 A 标记`display:block`），而不是容器。

此外，如果您使用`!important`, 可能需要[阅读这篇](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)关于 CSS Specificity 的文章。

# c# - 委托返回类型对象不接受返回 Guid 的函数

> ID：12513994
> 
> 赞同：3
> 
> 时间：2012-09-20T13:44:28.620
> 
> 标签：c#

返回以下函数时

```
public Guid GetUserFilterValue( string filterID ) 
```

作为

```
Func<string, object> 
```

我收到错误返回类型错误。如果我将返回类型更改为 Guid 以外的任何内容，它就会编译。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:47:51.863

如果返回类型是引用类型，这通常会起作用，因为`Func<T, TResult>`对于 T 是协变的；but`Guid`是一个值类型，这就是为什么您的方法不是`Func<string, object>`.

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd799517.aspx)：

> 差异仅适用于引用类型；如果为变体类型参数指定值类型，则该类型参数对于生成的构造类型是不变的。

作为一种解决方法，您可以使用 lambda 表达式：

```
Func<string, object> f = filterId => GetUserFilterValue(filterId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:46:02.667

那是因为`Guid`是一个[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)，因此没有与 的二进制表示兼容`object`。如果您需要使此方法适应给定的签名，您需要编写一个包装函数，将其装箱[到](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)`Guid`一个对象中：

```
Func<string, object> f = s => (object)GetUserFilterValue(s); 
```

# java - 带有自定义光标适配器的 ListView 为空

> ID：12513998
> 
> 赞同：1
> 
> 时间：2012-09-20T13:44:41.700
> 
> 标签：java, android, android-listview

我正在尝试实现高分活动，并且正在尝试使用 ListView。但是有一个问题： **列表视图只显示了一个由 .addHeaderView() 方法添加的元素，但适配器元素似乎是不可见的。**
即使 adapter.getCount() 返回正确数量的元素，它们也是不可见的。

请帮忙，我在这里拔头发。

我的活动布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:keepScreenOn="true" >
    <ListView
        android:id="@+id/scores_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView>
</LinearLayout> 
```

我的 ListView 行布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/name"
    android:layout_width="match_parent"
    android:gravity="center_vertical"
    android:paddingLeft="5dip"
/> 
```

我的活动代码：

```
public class ScoresActivity extends Activity   {
private ScoresAdapter adapter;
private ListView scoresList;
private Cursor cursor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_scores);

    scoresList = (ListView)findViewById(R.id.scores_layout);    

    SQLiteDatabase dataBase = ((MyApplication) getApplication()).getDataBase();     

    cursor = dataBase.query(ScoresDBHelper.SCORES_TABLE_NAME,null,null,null,null,null,null);

    adapter = new ScoresAdapter(this, cursor, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

    scoresList.addHeaderView(getLayoutInflater().inflate(R.layout.scores_list_row, null));

    scoresList.setAdapter(adapter);

    Toast.makeText(this, String.valueOf(adapter.getCount()), Toast.LENGTH_LONG).show();
    }
} 
```

我的适配器代码：

```
class ScoresAdapter extends CursorAdapter{
LayoutInflater inflater;

public ScoresAdapter(Context context, Cursor c, int flags) {
    super(context, c, flags);
    inflater = LayoutInflater.from(context);
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    TextView textViewName = (TextView) view.findViewById(R.id.name);
    textViewName.setText(cursor.getString(cursor.getColumnIndex("name")));
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return  inflater.inflate(R.layout.scores_list_row, null);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:28:36.877

我在调用 `cursor.close();` 之前的`onDestroy()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:49:19.073

您需要在行布局的 TextView 中添加 **android:layout_height ="wrap_content"** 。